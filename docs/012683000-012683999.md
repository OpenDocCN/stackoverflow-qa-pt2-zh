# StackOverflow 问答 12683000-12683999

# c - 用于存储过程的 Linux 内存映射区域

> ID：12683003
> 
> 赞同：1
> 
> 时间：2012-10-02T00:30:11.897
> 
> 标签：c, memory-management, assembly

我有一个问题要我解释一个过程存储在 linux 内存映射的哪些区域中。该问题指示我使用 objdump -h 来查找此信息。

现在，我有点困惑“内存中的区域”是什么意思。

我知道对于给定的过程，我们有特定的寄存器可以使用（比如 %eax、%edx ...），并且对于每个变量，我们都有一个存储位置（比如 8（%ebp））。此外，我知道我们有 %esp 和 %ebp 寄存器来“照顾”堆栈。

我还在我的文件上运行 objdump -h 但从我得到的信息中我无法说出任何具体的内容。

那么我应该只提到正在使用的寄存器和存储此过程变量的内存地址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:36:07.613

我相信您的问题是询问链接器在操作系统加载时将您的实际代码指定驻留在内存中的位置。该代码区域将由程序计数器寄存器或`%EIP`在 x86 上表示。

通常在 Linux 上，程序代码和只读变量存储在进程映射内存的下部区域，堆栈位于上部区域（即堆栈向下增长）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:39:51.900

您可以轻松地在互联网上搜索 linux 内存映射，毕竟这是您的家庭作业，您将学习如何解决问题和进行研究。

每个程序都有特定的段，这里有几个： bss - 未初始化的数据 data - 初始化的数据（字符串、数组等...） text - 代码“程序”

节与程序的起始地址相关，具有正偏移或负偏移。

这是一个很好的页面： [http ://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory)

# php - 方法无效...str_replace_once(Array)

> ID：12683004
> 
> 赞同：0
> 
> 时间：2012-10-02T00:30:13.110
> 
> 标签：php, arrays, str-replace

我在 Magento 中创建 AZ 索引搜索时遇到了一些麻烦。我已经创建了代码，但是，我收到“无效方法...”错误：

> str_replace_once(数组 ( [0] => & [1] => ? [2] => 127.0.0.1/mgn-default/electronics/cameras.html ) )

我不太了解PHP，这里的代码用于：

```
<?php 
$search_array = array('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','ALL');

/*Find if the URL already contains any querystring variable or not */
if (strstr( $this->helper('core/url')->getCurrentUrl(), "&" ))
{
 $separator = '&'; 
}
else
{
    $separator = '?';
}
?>
    <div>
        <p class="view-mode-list-bot">
            <?php 
   $postData = Mage::app()->getRequest()->getParam('alpha');
   foreach ($search_array  as $search_array_value):

   /*Clean the URL*/
   if (strstr( $this->helper('core/url')->getCurrentUrl(), "?" ) )
   {
    $new_Url =  $this->str_replace_once('&','?',str_replace("?alpha=".trim($postData['alpha']),'',str_replace($separator."alpha=".trim($postData['alpha']),'',$this->helper('core/url')->getCurrentUrl())));
   }
   else
   {
    $new_Url = str_replace("?alpha=".trim($postData['alpha']),'',str_replace($separator."alpha=".trim($postData['alpha']),'',$this->helper('core/url')->getCurrentUrl()));
   }

   $alphaURL = $new_Url.$separator.'alpha='.$search_array_value;
?>

                    <a href="<?php echo $alphaURL; ?>" title="<?php echo $_label ?>" class="<?php echo strtolower($_code); ?> <?php if($search_array_value == $postData){ echo 'remove_under'; } ?>"><?php echo $search_array_value; ?></a>   

            <?php endforeach; ?>

        </p> 
```

任何建议和帮助将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:27:51.360

我不知道磁电机，但我可以看到，**不需要**像你一样测试 url。您应该使用请求实例。

IE`Mage::app()->getRequest()->getParam('alpha')`

由于示例中引用的许多变量可能具有任何值，因此您实际上试图通过循环获得什么令人困惑。但是，以下内容可以帮助您查看可以通过请求对象访问变量，例如：

```
$alpha = array('a','b','c', 'etc..');
/** fetch the request object **/
$request = Mage::app()->getRequest();
$letter  = $request->getParam("letter"); // Would and return "k" from http://mysite.com?letter=k
/** Test if we found a letter in the url **/
if (null !== $letter) {
  /** output the alphabet as links with each letter value as a link parameter **/
  for ($x = 0; $x < 26; $x++) {
    echo '<p><a href="?letter=$alpha">$alpha[$x]</a></p>';
  } 
} 
```

最后，看起来您正在查看 URL 参数以及引用`$_POST`数据。根据我的经验，最好一次只处理一个请求范围 ($_GET/$_POST)。

# c# - C#，你可以在不继承的情况下为所有数据输入控件添加通用属性吗？（类似于扩展方法）

> ID：12683006
> 
> 赞同：1
> 
> 时间：2012-10-02T00:30:19.307
> 
> 标签：c#, generics, properties

也许有替代策略，但我有一个允许设置许多值的设置应用程序。我在想，如果每种类型的控件（文本框、复选框、组合框、datagridivew）都有一个 IsDirty 标志，该标志在用户编辑值时设置。

自然地，我可以将每个都包装在用户控件中，但我想知道是否有一种类似于扩展方法或类似方法的方法来避免必须为每个控件创建用户控件。

有什么想法吗？

谢谢马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T00:32:25.640

查看 .NET 的[ConditionalWeakTable](http://msdn.microsoft.com/en-us/library/dd287757.aspx)，它旨在用于向对象“添加”属性。这可以有效地与扩展方法一起使用：

```
public static class DirtyExtensions {
    private class ExtraPropertyHolder {
        public bool IsDirty { get; set; }
    }

    private static readonly ConditionalWeakTable<Control, ExtraPropertyHolder> _isDirtyTable 
        = new ConditionalWeakTable<Control, ExtraPropertyHolder>();    

    public static bool IsDirty(this Control @this) {
        return _isDirtyTable.GetOrCreateValue(@this).IsDirty;
    }

    public static void SetIsDirty(this Control @this, bool isDirty) {
        _isDirtyTable.GetOrCreateValue(@this).IsDirty = value;
    }
} 
```

使用 ConditionalWeakTable 的最大好处是它避免了在正确处理线程安全和垃圾收集（通过弱引用）时必须使用 UserControl 包装每个 .NET 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:42:50.383

听起来您在 WinForm 领域，因此自定义[扩展程序提供程序](http://msdn.microsoft.com/en-us/library/d6c1xa43%28v=vs.100%29.aspx)（[示例实现](http://msdn.microsoft.com/en-us/library/f6b055wc%28v=vs.71%29.aspx)）可能在这些场景中运行良好。基本上，您在从 Control 对象派生的对象上添加属性（并在设置属性时处理行为） - 这就是所有控件。

# objective-c - 我正在创建视图控制器的新实例变量，如何向原始实例发送消息

> ID：12683008
> 
> 赞同：-3
> 
> 时间：2012-10-02T00:30:35.510
> 
> 标签：objective-c, ios, cocoa-touch

> **可能重复：**
> [为什么我的 UILabel 不显示 NSInteger](https://stackoverflow.com/questions/12666739/why-wont-my-uilabel-display-a-nsinteger)

昨天我问为什么我的标签不会更新，它总是显示 0，有人告诉我这是因为我正在制作视图控制器的新 ivar，它不是实际的视图控制器（游戏控制器的第 4 行）。如何在实际屏幕上更新 UILabel？我可以用某种方法来实例化 viewController 是实际的 ViewController 还是我必须编写一个方法来询问 gameController ivar 的分数是多少？我显然在这一点上迷路了。

在视图控制器中

```
-(void)setScore:(NSInteger)gameScore{
NSString *string = [NSString stringWithFormat:@"%i", gameScore];
scoreLabel.text = string;
NSLog(@"the score is %i", gameScore);
}

-(IBAction)play:(id)sender{
gameController = [[GameController alloc] init];
//in my header is GameController* gameController;
} 
```

在游戏控制器中

```
-(id)init{
self = [super init];
if (self) {

viewController = [[ViewController alloc] init];
//in header ViewController* viewController;
displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(gameLoop:)];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode: NSRunLoopCommonModes];

//in the header CADisplayLink* displayLink;
}
return self;

}

-(void)gameLoop:(CADisplayLink *)sender{
deltaScore++;
if (deltaScore >= 20) {
deltaScore -= 20;
score++;
//deltaScore and score are NSIntegers
[viewController setScore:score];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:08:44.697

在`GameController`课堂上，您正在创建一个新实例`viewController`而不是调用原始实例。考虑让主 viewController 类成为 GameController 的委托，并在`GameControllerDelegate`协议中创建一个从 GameController 到 viewController 通信的方法。

# visual-studio - 在代码中调用 VS2012 解决方案资源管理器命令

> ID：12683013
> 
> 赞同：4
> 
> 时间：2012-10-02T00:31:28.027
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-extensions

我正在尝试进行扩展，我需要从代码中调用两个命令...

*   SolutionExplorer.SyncWithActiveDocument
*   解决方案资源管理器中的全部折叠命令。

我无论如何都找不到调用这些函数。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T06:30:40.837

您是否尝试过通过 DTE 执行命令？

```
dte.Windows.Item(EnvDTE.Constants.vsWindowKindSolutionExplorer).Activate(); 

// Sync with Active Document
dte.ExecuteCommand("SolutionExplorer.SyncWithActiveDocument");

// Collapse All
int cmdidSolutionExplorerCollapseAll = 29;
Guid guidCMDSETID_StandardCommandSet11 = new Guid("D63DB1F0-404E-4B21-9648-CA8D99245EC3");
dte.Commands.Raise(guidCMDSETID_StandardCommandSet11.ToString("B"), cmdidSolutionExplorerCollapseAll, null, null); 
```

如果您需要识别任何其他命令的 ID，您可以打开 VSIP 日志记录：http: [//blogs.msdn.com/b/dr._ex/archive/2007/04/17/using-enablevsiplogging-to-identify -menus-and-commands-with-vs-2005-sp1.aspx](http://blogs.msdn.com/b/dr._ex/archive/2007/04/17/using-enablevsiplogging-to-identify-menus-and-commands-with-vs-2005-sp1.aspx)

# css - CSS nth-child 表达式避免最后一行最多包含 3 个元素

> ID：12683015
> 
> 赞同：15
> 
> 时间：2012-10-02T00:31:38.183
> 
> 标签：css, css-selectors

我正在创建以三列显示的列表，每个`<li>`都有`border-bottom`这样的：

```
x | x | x
---------    
x | x | x
---------      
z | z | z
---------  

<ul>
    <li>x</li><li>x</li><li>x</li>
    <li>x</li><li>x</li><li>x</li>
    <li>z</li><li>z</li><li>z</li>
</ul> 
```

我想要做的是创建一个 nth-child 表达式来删除`border-bottom`最后一行的三，所以对于上面的例子，这将是：

```
ul li:nth-child(-n+6) {
    border-bottom:0;
} 
```

**问题**

然而，稍微复杂一点的是列表中的项目数量会有所不同，因此可能会出现以下任何情况：

**方案 1**

```
x | x | x
---------   
x | x | x
---------   
z |
---  

<ul>
    <li>x</li><li>x</li><li>x</li>
    <li>x</li><li>x</li><li>x</li>
    <li>z</li>
</ul> 
```

**方案 2**

```
x | x | x
---------   
x | x | x
---------   
z | z |
-------

<ul>
    <li>x</li><li>x</li><li>x</li>
    <li>x</li><li>x</li><li>x</li>
    <li>z</li><li>z</li>
</ul> 
```

**方案 3**

```
x | x | x
---------   
z | z |
-------

<ul>
    <li>x</li><li>x</li><li>x</li>
    <li>z</li><li>z</li>
</ul> 
```

**结论**

我的目标是始终删除`border-bottom`最后一行的 （或在本例中为字符**z**），以便它没有应用样式。

一个理想的解决方案是：

```
ul {
    padding-bottom:-20px;
} 
```

但`padding-bottom:-#px;`在 CSS 中不支持。

我能想到的唯一其他方法是创建一个第 n 个子表达式来仅捕获包含 3 的行，这不是最后一行？

我想它可能需要某种除以 3 来寻找应用它的数量？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-02T15:33:31.103

到目前为止，我已经创建了一个将样式应用于最后一行的选择器

```
/* all the cells */
li {
   background: #ccc;
}

/* last row, doesn't matter how many cells */
li:nth-last-child(-n + 3):nth-child(3n + 1), /* first element of the last row */
li:nth-last-child(-n + 3):nth-child(3n + 1) ~ li /* all its following elements */
{
   /* reset the style, eg: */
   background: transparent;
} 
```

你可以在这里看到一个活生生的例子[http://jsbin.com/ufosox/1/edit](http://jsbin.com/ufosox/1/edit)

当然这不支持IE8及以下。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-15T13:19:02.867

而不是第 n 个表达式，也许一个简单的 css 解决方案就足够了？

将*border-bottom*设置为每个LI，并将*overflow:hidden*设置为UL。然后将每个 LI 向下移动 1px，以便隐藏最后一行。

示例：http: [//jsfiddle.net/willemvb/7uGRq/](http://jsfiddle.net/willemvb/7uGRq/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T13:58:07.747

由于我看不到`nth-*`仅使用伪类来实现所需结果的方法，因此我试图发挥创造力：如果您的列表项具有所有*相同的高度*（例如假设`30px`），则可以在此完成仅涉及 css 的解决方法方式

[http://jsbin.com/ukubug/4/edit](http://jsbin.com/ukubug/4/edit)

CSS

```
ul { list-style: none;  
     margin: 3em 0 0 0; padding: 0;
     height: auto; overflow: hidden; 
     position : relative;
}

li { float: left; width: 30px; height: 30px; 
     position: relative; z-index: 1;
     text-align: center; line-height: 30px;  /* just to h/v centering */
}

li:nth-child(3n+1) { clear: left }

ul:before {
   position: absolute;
   z-index : 1;
   content : "";
   display : block;
   background : #f00;
   left    : 0;
   top     : -30px;  /* this is the height of your list-items */
   width   : 100%;
   height  : 100%;
} 
```

诀窍是将背景颜色应用于`ul:before`伪元素，给它一个绝对位置，然后应用一个等于`li`高度的负顶部偏移。

`overflow : hidden`应用到将`ul`用作清除方法和剪切位于其父边界之外的红色层。同时，您还需要定位`li`元素，以便它们可以重叠`ul:before`。

`li`请注意，如果您的元素少于 4 个，您将看不到任何突出显示效果（因为您的*第一*行也是*最后*一行）：如果您需要始终突出显示*至少一行*（部分填充或不填充），只需应用

```
min-height : 60px;  /* double height of a li element */ 
```

到`ul:before`.

希望它会有所帮助。

* * *

作为最后的考虑，还要注意这个解决方案本身^((*))

*   即使在 上也应该可以正常工作`IE8`，而依赖于`nth-*`伪类的解决方案不适用于该伪*浏览器*
*   如果您切换到`2/4/5/6/`... 列布局，它很容易扩展。

^((*))好吧，这当然需要不同的方法来获取 a `clear: left`on `3n+1`li 元素：)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T09:54:31.953

我不知道您是否可以访问 HTML 代码本身，但如果可以，我的完美解决方案是在 ul 之后添加另一个 html div，背景颜色为白色，高度为 30px，顶部或边距-top of -30px（或任何需要隐藏 ul 的最后一块）

```
<ul>...</ul>
<div style="background-color: #fff; height: 30px; margin-top: -30px">&nbsp;</div> 
```

另一个注意事项，您尝试了 padding-bottom，但是您尝试了 margin-bottom: -20px 吗？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-02T13:37:28.903

我建议您对所有 li 应用一种样式，然后为最后一个执行特定规则：

```
ul li:last-child {
    background-color:#FF0;
} 
```

请注意 :last-child 与 IE LTE 8 ( [http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html) )不兼容

# jquery - jQuery 幻灯片不再正常工作

> ID：12683016
> 
> 赞同：0
> 
> 时间：2012-10-02T00:31:54.107
> 
> 标签：jquery, slideshow

我在客户网站上有一个 jQuery 幻灯片。幻灯片正在运行，但现在它只显示幻灯片中的三个图像之一，即最后一个图像。我发现页面上的另一个脚本导致了错误，但是这个脚本是显示下拉选择菜单和正确显示幻灯片所必需的。我不知道为什么它不再工作并且找不到任何修复它的方法。

这是页面：[http ://www.isis.com.au/projects-and-partnerships/projects.aspx](http://www.isis.com.au/projects-and-partnerships/projects.aspx)

这是生成的幻灯片：

```
<div class="anythingFader">
  <div class="wrapper" style="overflow: hidden; opacity: 1;">
    <ul id="slider1"><li class="cloned"><img src="/media/158894/last_financial_year.jpg" alt=""></li><li><img src="/media/158882/last_5_years.jpg" alt=""></li><li><img src="/media/158888/last_3_years.jpg" alt=""></li><li><img src="/media/158894/last_financial_year.jpg" alt=""></li><li class="cloned"><img src="/media/158882/last_5_years.jpg" alt=""></li></ul>
  </div><a class="arrow forward">&gt;</a><a class="arrow back">&lt;</a>
<div id="thumbNav"><a href="#" class="">5 Years</a><a href="#" class="">3 Years</a><a href="#" class="cur">FY 2011/2012</a></div><a id="start-stop" href="#" class="playing">Pause</a></div> 
```

以下 javascript 导致幻灯片中的最后一张图像保持显示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

我尝试将幻灯片 javascript 放在它之前，但是幻灯片无法正确显示。它只显示幻灯片的图像和滚动条的框架。这些是幻灯片所需的两个 javascript：

```
<script type="text/javascript" src="/Scripts/jquery_anythingfader.js" charset="utf-8"></script> 
```

幻灯片应该像在主页上一样运行：[http ://www.isis.com.au/](http://www.isis.com.au/)

任何人都可以建议使用更好的 javascript，或者我如何订购 javascript，以便一切都能正确显示和运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:46:22.323

仅从简单的观察来看，在您的滑块 < ul > 中，您有 < li > 包含图像，第一个和最后一个具有 class = "clone"。这可能是一个很好的起点——这类“克隆”是做什么的？也许这就是为什么你有你在最后一张图像中观察到的效果。

尝试深入研究源代码，解决方案在于 javascript 本身。

确保在依赖它的脚本之前先导入 jQuery。

希望能帮助到你！

# ruby-on-rails - Javascript Coffeescript 不起作用

> ID：12683019
> 
> 赞同：0
> 
> 时间：2012-10-02T00:33:35.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, coffeescript

我似乎无法使用咖啡脚本。我正在尝试使用 jquery 进行简单的自动完成。

这是我试图在其上实现自动完成的代码

```
<%= form_tag "/search", :method => "get" do %>
  <%= text_field_tag :query, params[:query], :value => "Search for people.", :class=>"searchbox", :onclick=>"this.value='';", :id => "querysearch" %>
  <%= image_submit_tag("site/blankimg.png", :name => nil, :class=>"searchbox_submit" ) %>
<% end %> 
```

自动完成必须在文本字段上，并调用以下咖啡脚本来运行它

```
jQuery ->
  $('#querysearch').autocomplete
    source: ['foo', 'food', 'four'] 
```

现在，当我运行服务器时，什么都没有，但是我确实查看是否在以下脚本的链接上检查我的源代码

```
(function() {

  jQuery(function() {
    return $('#querysearch').autocomplete({
      source: ['foo', 'food', 'four']
    });
  });

}).call(this); 
```

现在我不知道咖啡脚本是否已执行，在我的 gem 文件中我有以下内容

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem 'devise'
gem "RedCloth", "~> 4.2.9"
gem "paperclip", "~> 3.0"
gem "paperclip-ffmpeg"
gem 'geocoder'
gem "coffee-script"
... 
```

我也尝试从这篇文章[Application.js.coffee rails](https://stackoverflow.com/questions/12682471/application-js-coffee-rails)中发表以下评论，但我不确定是否还有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:41:49.447

我不熟悉您正在使用的库，但不应该...

```
jQuery ->
  $('#querysearch').autocomplete
    source: ['foo', 'food', 'four'] 
```

是...

```
jQuery(document).ready ->
  $('#querysearch').autocomplete
    source: ['foo', 'food', 'four'] 
```

您当前的实现实际上将 jQuery 作为函数调用，而不是附加回调处理程序。

# java - Why doesn't it look like -Xms and -Xmx are doing anything to Java's memory usage in Windows?

> ID：12683020
> 
> 赞同：3
> 
> 时间：2012-10-02T00:33:43.000
> 
> 标签：java, jvm

I am running this version of Java:

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b11)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
```

I am running this on a Windows 2008 R2 64-bit server on Amazon EC2, in an m1.large instance that has 7.5GB of memory.

When I start my Java app, I am using this command line:

```
java -Xms6G -Xmx6G -server -jar start.jar 
```

My intent is to have Java reserve 6GB for it's heap, so that when my application runs, it will be able to load its entire dataset into memory.

However, when I start the app, I only see 1.3GB of memory used in Task Manager?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T00:33:43.000

The issue is you're looking at the default memory column shown in Task Manager, which is "Memory - Private Working Set." This doesn't reflect what is actually reserved for use.

In Task Manager, go to the View menu and choose Select Columns. Add the "Memory - Commit Size" column. You should see this column reflects the reserved heap size from Java. In my tests, it shows around 6.6GB committed for a commandline of -Xms6G.

[Here is Microsoft's page that explains what each column means.](http://windows.microsoft.com/is-IS/windows-vista/What-do-the-Task-Manager-memory-columns-mean)

"**Memory - Private Working Set:** Subset of working set that specifically describes the amount of memory a process is using that cannot be shared by other processes."

"**Memory - Commit Size:** Amount of virtual memory that is reserved for use by a process."

# java - 如何避免 NullPointerException 与父实体类的 OneToOne 映射？

> ID：12683026
> 
> 赞同：1
> 
> 时间：2012-10-02T00:34:11.287
> 
> 标签：java, hibernate, nullpointerexception, one-to-one

我已经搜索并发现了类似的问题，但它们似乎与

*   [为什么我会收到此 NullPointer 异常？](https://stackoverflow.com/questions/681979/why-am-i-getting-this-nullpointer-exception)
*   [使用休眠/JBoss/Seam 的 OneToOne 映射](https://stackoverflow.com/questions/1638432/onetoone-mapping-with-hibernate-jboss-seam)
*   [ANN-613 - 当 mappedBy 属性在 @OneToOne 上错误时，NPE](https://hibernate.onjira.com/browse/ANN-613)
*   [ANN-558 - @OneToMany(mappedBy="") 无法识别父类中的属性](https://hibernate.onjira.com/browse/ANN-558)
*   [Hibernate 用户 - 在 @OneToOne 上使用 @Id 的 NPE](https://forum.hibernate.org/viewtopic.php?t=970823)

我有一些像这样映射的实体：

```
Person
  |
  +--User 
```

我想添加一个`PersonPartDeux`具有 OneToOne 映射的新实体到`Person`. 生成的映射应如下所示：

```
Person + PersonPartDeux
  |
  +--User 
```

当我这样做时，`NullPointerException`会在尝试加载映射时抛出 a：

```
java.lang.NullPointerException
    at org.hibernate.cfg.OneToOneSecondPass.doSecondPass(OneToOneSecondPass.java:135) 
```

如何指定映射以避免此异常？

这是我的代码：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Person implements Serializable
{
    @Id
    @GeneratedValue
    public Long id;

    @Version
    public int version = 0;

    public String name;

    @OneToOne(cascade = CascadeType.ALL)
    @PrimaryKeyJoinColumn
    public PersonPartDeux personPartDeux;
}

@Entity
public class PersonPartDeux implements Serializable
{
    @Id
    @GeneratedValue(generator = "person-primarykey")
    @GenericGenerator(
        name = "person-primarykey",
        strategy = "foreign",
        parameters = @Parameter(name = "property", value = "person")
    )
    public Long id = null;

    @Version
    public int version = 0;

    @OneToOne(optional=false, mappedBy="person")
    public Person person;

    public String someText;
}

@Entity
@PrimaryKeyJoinColumn(name = "person_Id")
public class User extends Person
{
    public String username;
    public String password;
} 
```

至于我为什么要打扰，我需要继承和`OneToOne`映射来解决我的应用程序中的不同已知问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:39:40.200

将 Hibernate 源附加到您的项目，因此您可以单击 thru 或“Open Type”（Eclipse 中的 Ctrl-Shift-T）来查看 OneToOneSecondPass 源。

查看源代码，您可以清楚地了解需要指定的内容。

在我的源代码（Hibernate 4.1.7）中，第 135 行是

```
propertyHolder.addProperty( prop, inferredData.getDeclaringClass() ); 
```

但是，您可能使用的是早期版本。

查看映射，我怀疑@OneToOne 的定义——mappedBy="person"。

```
@OneToOne(optional=false, mappedBy="person")
public Person person; 
```

自己映射关联属性有什么用处？Hibernate 已经知道该属性是 OneToOne —— 你刚刚告诉它。

将属性的基础映射/ FK 指向本身.. 可能实际上并没有告诉 Hibernate 任何正确或有用的信息。

这是 HB dosc 中的一个示例，可能更好地展示了如何做你想做的事：

```
@Entity
class MedicalHistory implements Serializable {
  @Id Integer id;

  @MapsId @OneToOne
  @JoinColumn(name = "patient_id")
  Person patient;
}

@Entity
class Person {
  @Id @GeneratedValue Integer id;
} 
```

资料来源： [http](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/) ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/ （JBoss 网站上的 3.5 文档。）

干杯，希望这会有所帮助。

# ruby-on-rails - Rails生产环境安全

> ID：12683027
> 
> 赞同：0
> 
> 时间：2012-10-02T00:34:22.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我最近转为主要是 Rails 开发人员。我还没有弄清楚的一件事是，当应用程序在本地机器上处于生产模式时，如何保护开发人员不犯粗心的错误。因为我使用的是 Heroku 和 MongoLab，所以我可以从本地机器访问我的生产环境资源。当我需要使用本地机器调试生产环境中发生的问题时，这真的很棒。然而，这使得团队中的某个人非常容易忘记他们当前正在以生产模式运行本地服务器并错误地搞砸了一些事情——例如删除数据库中的所有记录。

有没有人有一些关于如何防止粗心错误发生的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:47:06.940

`rails c production --sandbox`

*总是*，除非你去那里是为了管理记录。该`--sandbox`标志将整个控制台会话包装在数据库事务中，并回滚您在退出时所做的任何数据库更改。

但是正如其他人所说，如果您发现自己需要在生产环境中进行测试，那么您*真正*需要做的是设置您的开发环境以更接近地模拟您的生产环境。我知道这在 Heroku 这样的云服务上有点困难，但你可以非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:39:56.133

这样做没有“最佳实践”。您正在寻找的是使用*最差*做法的最佳做法。您的开发机器绝对不可能与您的生产数据库对话。

您的生产凭据不应该包含在您的版本控制系统中，因此甚至没有人可以从他们的开发机器访问生产数据库。

如果您真的想在生产中进行测试，请在您的工作站上本地配置一个“生产”数据库，远离您的真实生产服务器，并将一些生产数据复制到其中。

# javascript - 使用 javascript 处理跨浏览器功能

> ID：12683030
> 
> 赞同：0
> 
> 时间：2012-10-02T00:35:24.003
> 
> 标签：javascript, html, firefox, cross-browser

我有一个 JavaScript 文件，可以检测正在使用的浏览器。我不确定这是否不是补偿不同浏览器的正确方法，但我想根据正在使用的浏览器使用不同的 div。

我有一个非常基本的页面，我想使用这样的东西，但是我的两个“主要”div 都出现了。有没有办法使用javascript做到这一点？

```
<script>    
    if(BrowserDetect.browser == "Firefox"){
       </script>
            <div id="main_Firefox">
            </div>
        <script>
    }
    else{
        </script>
           <div id="main">
           </div>
    <script>
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:38:24.407

你永远不想拥有这样的东西，你应该为所有事情使用一个 HTML 系统。并在 CSS 中使用 CSS 和条件标签来解决任何跨浏览器问题。

此外，您不应依赖用户代理字符串来确定浏览器。

# ios - 按下展开按钮时，地图标注扩展动画类似于地图中的动画

> ID：12683038
> 
> 赞同：3
> 
> 时间：2012-10-02T00:37:07.953
> 
> 标签：ios, maps, mkmapview, mapkit, callouts

在标注上选择泄露按钮时，呼叫将动画传递到幻灯片，并使用更多信息扩展到更大的区域。

除了从头开始制作这个组件之外，有没有人知道如何让注释标注做到这一点？

![初始标注](../Images/5433c27451ffff2b4712d5e903692e5c.png)

![扩展标注](../Images/ea7ba619fb0e314734faec14ad135b0d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:05:13.190

据此： [http](http://www.cocoacontrols.com/controls/gikanimatedcallout) ://www.cocoacontrols.com/controls/gikanimatedcallout，Apple 正在使用私有 API。上面的链接包含试图复制 Apple 所做的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:42:35.503

你应该使用下面的委托方法

```
(void)mapView:(MKMapView *)mapview annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
```

然后在这个委托方法中，您应该创建一个披露按钮。if(buttonType==disclosurebutton) 然后显示自定义 UIView。

我认为这将总体上有所帮助。

# c - gdb 中的未知类型

> ID：12683041
> 
> 赞同：1
> 
> 时间：2012-10-02T00:37:40.460
> 
> 标签：c

在这段代码中：

```
...
size_t bytes_over=0;    //Number of bytes overthe region.
size_t byte_size=0; //Number of bytes overthe region.

if(isin_allocatedblock(mem, key_address,&bytes_over,&byte_size))
{
//** Seg Fault here
asprintf(err_msg_2nd,"%s:%d: %p is %Zu bytes inside a %Zu byte region allocated here\n",file, line, key_address, bytes_over,byte_size);
    }
...
}

bool isin_allocatedblock(struct memory *mem, char *key_address, size_t *bytes_over, size_t *byte_size) {
...
*bytes_over = (previous_alloc_ptr+prev_alloc_sz) - key_address; //Right side is 1901
*byte_size = get_metadata_recordsize(meta_rec); 
return true;
} 
```

当在 gdb 中打印 bytes_over 时，它被分配了我得到的新值

```
$17 = <unknown type> 
```

当我打印 byte_size 我得到：

```
Function return type unknown. 
```

我在 asprint 命令上遇到了段错误，所以我试图查看这两个变量的值。我在 gdb 中“设置了投诉 5”，现在我在 gdb 中运行后看到了这一点（行号是 bytes_over 分配给它的值的行）：

```
During symbol reading, incomplete CFI data; unspecified registers (e.g., esi) at 0x8049acc.
isin_allocatedblock (mem=0x804cec8, key_address=0x804de64 "", bytes_over=
    0xbffff078, byte_size=0xbffff074) at memory.c:471 
```

# javascript - 如何在 main.js 中使用 DOM 特性和 jQuery？

> ID：12683043
> 
> 赞同：0
> 
> 时间：2012-10-02T00:38:05.553
> 
> 标签：javascript, jquery, firefox-addon, firefox-addon-sdk

我正在使用 Mozilla 的 Add-on SDK 开发一个插件，并且我遇到了对一些文本进行 HTML 编码的需要（将与号和特殊字符换成它们的`&amp;`等价物）。您可以使用 DOM 在 JavaScript 中通过调用`document.createElement()`并向其添加文本（激发浏览器对文本进行编码）来执行此操作。麻烦的是，在特权代码 ( `main.js`) 中没有 DOM，因此无法访问这些功能，甚至无法使用 jQuery 之类的库。这里有最佳实践吗？如何访问通常需要全局`document`对象的功能`main.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:17:04.443

如果我理解正确，您想用`&amp;`实际字符替换 HTML 实体（和类似实体）。到目前为止，您的解决方案是：

```
var text = "foo&amp;bar";
var element = document.createElement('foo');
element.innerHTML = text;
text = element.textContent; 
```

[您可以使用DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)而不是使用文档的 DOM（并冒着无意中运行某些脚本的风险）——它将解析文本而没有任何副作用。不幸的是，访问`DOMParser`from`main.js`需要[chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.10/dev-guide/tutorials/chrome.html)，但除此之外，代码很简单：

```
var text = "foo&amp;bar";
var {Cc, Ci} = require("chrome");
var parser = Cc["@mozilla.org/xmlextras/domparser;1"]
               .createInstance(Ci.nsIDOMParser);
text = parser.parseFromString(text, "text/html").documentElement.textContent; 
```

# r - cor(x,y) 当 x 为 POSIXct

> ID：12683052
> 
> 赞同：0
> 
> 时间：2012-10-02T00:39:33.660
> 
> 标签：r, linear-regression, posixct

我正在计算年龄（数字）向量和日期（POSIXct）向量之间的线性回归。转换日期以使*cor*满意的最方便的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:03:42.473

正如@Chase 的评论中提到的，`cor`如果您将日期转换为带有`as.numeric`.

```
#First some dummy data:
age<-ceiling(runif(20,min=25,max=45))
joindate<-sample(seq(as.Date("01/01/1990","%d/%m/%Y"), 
                     as.Date("31/12/2010","%d/%m/%Y"), by="day"), 20)
age
[1] 35 33 33 30 39 30 32 26 45 37 28 44 35 31 39 44 44 40 29 39
joindate
 [1] "1999-07-03" "2006-08-09" "2001-11-22" "2003-02-11" "1991-06-23" "2007-04-20" "1993-04-28" "1997-04-08" "1999-08-16"
[10] "2005-02-17" "2002-11-01" "1991-09-17" "2006-05-03" "1995-12-02" "2007-06-20" "2000-02-26" "2005-10-01" "1997-06-13"
[19] "2007-06-09" "1994-11-27"

as.numeric(joindate) 
# Dates are transformed into a number that corresponds to the number of days since the origin date (as a convention the 1970/01/01)
 [1] 10775 13369 11648 12094  7843 13623  8518  9959 10819 12831 11992  7929 13271  9466 13684 11013 13057 10025 13673  9096

cor.test(age, as.numeric(joindate))

    Pearson's product-moment correlation

data:  age and as.numeric(joindate) 
t = -0.9641, df = 18, p-value = 0.3478
alternative hypothesis: true correlation is not equal to 0 
95 percent confidence interval:
 -0.6048037  0.2449517 
sample estimates:
       cor 
-0.2215884 
```

# javascript - 将 for in 循环写入页面的最佳方法是什么

> ID：12683054
> 
> 赞同：0
> 
> 时间：2012-10-02T00:39:51.430
> 
> 标签：javascript

```
var family = {
    dad: 'Father',
    mom: 'Mother',
    son: 'Boy',
    daughter: 'Girl'
}

for ( var person in family ) {
    console.log('<li>' + 'the ' + person + ' is a ' + family[person] + '</li>')
} 
```

我想知道将其插入 DOM 而不是将其记录到控制台的最佳方法是什么。我只想使用 JavaScript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:43:43.350

取决于 HTML 中已有的内容。如果你只是简单地添加你所拥有的，那么使用它并不是一个坏主意：

```
var all_family = "";
for (var person in family) {
    all_family += "<li>the " + person + " is a " + family[person] + "</li>";
}
document.getElementById("main_ul").innerHTML = all_family; 
```

其中“main_ul”是：

```
<ul id="main_ul"></ul> 
```

另一种选择是：

```
var ul = document.getElementById("main_ul");
for (var person in family) {
    var li = document.createElement("li");
    li.innerHTML = "the " + person + " is a " + family[person];
    main_ul.appendChild(li);
} 
```

您可能会看一些东西来帮助决定使用哪个：[“innerHTML += ...”与“appendChild(txtNode)”](https://stackoverflow.com/questions/2305654/innerhtml-vs-appendchildtxtnode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:43:23.937

原生的、跨浏览器的 DOM 方法是最安全的。

```
var list = document.createElement('li');

for (var person in family)
   list.appendChild(
       document.createTextNode('the person is a ' + family[person]) );

document.body.appendChild( list ); 
```

# sql - 如何最好地检索每条记录的最近的先前记录

> ID：12683055
> 
> 赞同：0
> 
> 时间：2012-10-02T00:39:51.213
> 
> 标签：sql

假设您有一个简单的表，它表示由 someID 标识的另一个实体的时间序列。每行由 someID 和时间戳标识，时间戳不受任何规则增量的影响，即间隔可以变化：

```
CREATE TABLE someSeries
(
   someID int not null,
   rowTS datetime not null,
   val int not null
);
ALTER TABLE someSeries 
ADD CONSTRAINT PK_someSeries(someID, rowTS); 
```

是否有一种优雅而有效的方法（因此不使用笛卡尔积）来返回所有行并显示该行的 rowTS 和该 someID 的最近的先前 rowTS？

例如，如果数据是

```
someID        rowTS            val
------------------------------------
1             9/1/2012         2
1             9/2/2012         3
1             9/5/2012         5
2             9/2/2012         1
2             9/4/2012         6
3             9/5/2012         7
3             9/7/2012         9
3             9/10/2012        2 
```

该查询应该返回

```
someID        rowTS            prevRowTS          val          prevVal
------------------------------------------------------------------------
1             9/1/2012         null               2            null
1             9/2/2012         9/1/2012           3            2 
1             9/5/2012         9/2/2012           5            3
2             9/2/2012         null               1            null
2             9/4/2012         9/2/2012           6            1
3             9/5/2012         null               7            null
3             9/7/2012         9/5/2012           9            7
3             9/10/2012        9/7/2012           2            9 
```

目前，我在我的应用程序中需要这样的东西，我这样做的方式是在应用程序层中，基本上我将最后一个 rowTS 存储在 someID 主表中，它是 PK，然后，在插入时间序列时，我得到了从主表中获取值并查找最近的先前记录，并进行一些计算（例如比较 val 和 prevVal）并将其插入时间序列表中。

但我想知道是否有一种快速的方法可以在 SQL 中做到这一点。唯一想到的是笛卡尔积，不用说，这不是很有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:47:35.567

对于 SQL Server、Oracle 和 PostgreSQL - 使用窗口函数

```
;with cte as (
select *, rn=row_number() over (partition by someid order by rowTS)
from someSeries
)
select a.someID, a.rowTS, b.rowTS prevRowTS, a.val, b.val prevVal
from cte a
left join cte b on a.someid = b.someID and b.rn = a.rn-1
order by a.someID, a.rowts 
```

对于 SQL Server 2012 和 Oracle，使用 LAG 函数可以轻松超越上述。

```
select
    someid,
    rowts,
    lag(rowts) over (partition by someid order by rowts) prevrowts,
    val,
    lag(val) over (partition by someid order by rowts) prevval
from someSeries
order by someid, rowts 
```

对于 MySQL **ONLY**，hack 但它的性能非常好。

```
select
  @ts:=rowts rowts,
  if(@s=someID,@ts,null) prevrowts,
  @v:=val val,
  if(@s=someID,@v,null) prevval,
  @s:=someID someID
from (select @s:=null) a, someSeries
order by someID, rowts 
```

注意：虽然您可能会受到诱惑，但**不要**将 someID 列移到其他列之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:58:41.777

既然您说您使用什么 RDBMS 并不重要，那么您可以在 SQL Server 中执行此操作：

```
;WITH cte
AS
(
    SELECT *, ROW_NUMBER() OVER(Partition BY someID ORDER BY someID, rowTS) row_num
    FROM @Temp
)
SELECT c1.someID, c1.rowTS, 
  (SELECT MAX(c2.rowTS) 
   FROM cte c2 
   WHERE c2.someID = c1.someID AND c2.row_num < c1.row_num) AS prevRowTS,
  c1.val,
  (SELECT MAX(c2.val) 
   FROM cte c2 
   WHERE c2.someID = c1.someID AND c2.row_num < c1.row_num) AS prevVal
FROM cte c1 
```

## [这是一个现场演示](https://data.stackexchange.com/stackoverflow/query/81451)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:01:58.747

这与这个问题非常相似：[SQL 根据日期和另一列减去两行](https://stackoverflow.com/questions/12310221/sql-subtract-two-rows-based-on-date-and-another-column/12320812#12320812)

那里有很多解决方案。

# python - 如何在 django 中使用后端库中的多处理？

> ID：12683057
> 
> 赞同：1
> 
> 时间：2012-10-02T00:39:57.517
> 
> 标签：python, django

我有一个使用多处理的后端库，它使用它对列表中的每个项目执行一组命令 - 这是最快的方式。

我知道 WSGI 不好 - 那么我可以使用什么？

# algorithm - 非重叠购买的最优顺序

> ID：12683058
> 
> 赞同：6
> 
> 时间：2012-10-02T00:39:59.010
> 
> 标签：algorithm, scheduling

我认为这是一个调度问题，但我什至不确定！我想要的是找到非重叠购买决策的最佳顺序，当我完全了解它们的价值以及未来会出现什么机会时。

想象一个批发商销售我想为自己的商店购买的各种商品。在任何时候，他们可能会推出多项特别优惠；我会以全价出售，所以他们的折扣就是我的利润。

我想最大化利润，但问题是我一次只能买一件东西，没有信用这样的东西，更糟糕的是，交货延迟。好消息是商品一到货我就卖掉，然后我就可以再花钱了。因此，通过所有选择的一条路径可能是：我星期一买了 100 公斤的苹果，它们在星期二交货。然后我买了 20 件修女服装，在星期天送来，还算合适。我跳过了几天，因为我知道周三他们会以很大的折扣购买法拉利。所以我买了其中一个，它在下周二交付。等等。

您可以考虑复利或不复利。该算法归结为在选择今天的特别优惠之一或等待一天（因为明天会有更好的东西）之间的每个阶段的决定。

让我们抽象一下。购买和交付成为时代以来的日子。利润写为卖出价格除以买入价格。即 1.00 意味着盈亏平衡，1.10 意味着 10% 的利润，2.0 意味着我的钱翻了一番。

```
 buy    delivery   profit
    1        2       1.10    Apples
    1        3       1.15    Viagra
    2        3       1.15    Notebooks
    3        7       1.30    Nun costumes
    4        7       1.28    Priest costumes
    6        7       1.09    Oranges
    6        8       1.11    Pears
    7        9       1.16    Yellow shoes
    8       10       1.15    Red shoes
   10       15       1.50    Red Ferrari
   11       15       1.40    Yellow Ferrari
   13       16       1.25    Organic grapes
   14       19       1.30    Organic wine 
```

注意：机会只存在于购买日（例如，如果没有人购买有机葡萄，它们就会被制成葡萄酒！），我可以在交货的同一天出售，但直到第二天才能购买我的下一件商品。所以我不能在 t=7 卖掉我的修女服装，然后立即在 t=7 买黄鞋。

我希望存在一个已知的最佳算法，并且已经有一个 R 模块，但算法或学术文献也会很好，就像任何其他语言的任何东西一样。速度很重要，但主要是当数据变大时，所以我想知道它是 O(n ² ) 还是其他什么。

顺便说一句，如果有最大可能的交付延迟，最好的算法会改变吗？例如，如果`delivery - buy <= 7`

以下是上述 CSV 格式的数据：

```
buy,delivery,profit,item
1,2,1.10,Apples
1,3,1.15,Viagra
2,3,1.15,Notebooks
3,7,1.30,Nun costumes
4,7,1.28,Priest costumes
6,7,1.09,Oranges
6,8,1.11,Pears
7,9,1.16,Yellow shoes
8,10,1.15,Red shoes
10,15,1.50,Red Ferrari
11,15,1.40,Yellow Ferrari
13,16,1.25,Organic grapes
14,19,1.30,Organic wine 
```

或作为 JSON：

```
{"headers":["buy","delivery","profit","item"],"data":[[1,2,1.1,"Apples"],[1,3,1.15,"Viagra"],[2,3,1.15,"Notebooks"],[3,7,1.3,"Nun costumes"],[4,7,1.28,"Priest costumes"],[6,7,1.09,"Oranges"],[6,8,1.11,"Pears"],[7,9,1.16,"Yellow shoes"],[8,10,1.15,"Red shoes"],[10,15,1.5,"Red Ferrari"],[11,15,1.4,"Yellow Ferrari"],[13,16,1.25,"Organic grapes"],[14,19,1.3,"Organic wine"]]} 
```

或作为 R 数据框：

```
structure(list(buy = c(1L, 1L, 2L, 3L, 4L, 6L, 6L, 7L, 8L, 10L, 
11L, 13L, 14L), delivery = c(2L, 3L, 3L, 7L, 7L, 7L, 8L, 9L, 
10L, 15L, 15L, 16L, 19L), profit = c(1.1, 1.15, 1.15, 1.3, 1.28, 
1.09, 1.11, 1.16, 1.15, 1.5, 1.4, 1.25, 1.3), item = c("Apples", 
"Viagra", "Notebooks", "Nun costumes", "Priest costumes", "Oranges", 
"Pears", "Yellow shoes", "Red shoes", "Red Ferrari", "Yellow Ferrari", 
"Organic grapes", "Organic wine")), .Names = c("buy", "delivery", 
"profit", "item"), row.names = c(NA, -13L), class = "data.frame") 
```

**链接**

[是否有任何 R 图形包（最短路径等）？](https://stackoverflow.com/questions/2771178/is-there-any-library-in-r-to-work-with-graphs-find-shortest-path-and-so-on) （[igraph](http://igraph.sourceforge.net/)提供了一个 shortest.paths 函数，除了 C 库之外，还有一个[R 包](http://cran.r-project.org/web/packages/igraph/index.html)和一个 python 接口）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T06:07:54.380

考虑这个问题的最简单方法类似于[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)（尽管将其视为[最大流量问题](http://en.wikipedia.org/wiki/Maximum_flow_problem)在技术上可能更好）。天数 1 ... 19 可用作节点名称；每个节点*j*都有一个到节点*j+1*的链接，权重为 1，列表中的每个产品 ( *b,d,g,p* ) 都添加了从第*b*天到第*d+1*天的链接，权重为*g*。当我们在寻路时遍历节点时，我们会跟踪迄今为止在每个节点上看到的最佳乘法值。

下面显示的 Python 代码运行时间为 O(V+E)，其中 V 是顶点数（或天数），E 是边数。在这个实现中，E = V + 正在销售的产品数量。 *补充说明：***i, t in enumerate(graf)**的循环：对每个顶点处理一次。在该循环中，**for e in edges:**将*当前顶点的*边各处理一次。因此，没有边缘被处理超过一次，因此性能为 O(V+E)。

*编辑注释 2：* krjampani 声称 O(V+E) 比 O(n log n) 慢，其中 n 是产品数量。但是，除非我们对考虑的天数做出假设，否则这两个订单是不可比较的。请注意，如果交货延迟是有界的并且产品日期重叠，则天数为 O(n)，其中 O(V+E) = O(n)，这比 O(n log n) 快。

但是，在一组给定的假设下，我的方法和 krjampani 的运行时间顺序可能相同：对于大量天数，更改我的方法以仅在 x[0] 和 x[ 的排序联合中创建图节点1] 值，并使用指向 day[i-1] 和 day[i+1] 而不是指向 i-1 和 i+1 的链接。对于少数天数，将 krjampani 的方法更改为使用 O(n) 计数排序。

该程序的输出如下所示：

```
 16 :   2.36992 [11, 15, 1.4, 'Yellow Ferrari']
 11 :   1.6928 [8, 10, 1.15, 'Red shoes']
 8 :    1.472 [4, 7, 1.28, 'Priest costumes']
 4 :    1.15 [1, 3, 1.15, 'Viagra'] 
```

这表明在第 15 天卖出黄色法拉利后，我们在第 16 天获得了 2.36992 的复合利润；在卖出红鞋后到达第 11 天，获利 1.6928；等等。请注意，产品列表开头的虚拟条目以及数字周围引号的删除是与 JSON 数据的主要区别。列表元素中的条目以`graf[j]`开头`[1, j-1, 0, [[j+1,1,0]]]`，即形式为 [best-value-so-far, best-from-node#, best-from-product-key, edge-list]。每个边缘列表都是一个列表列表，其形式为 [next-node#, edge-weight, product-key]。将产品 0 设为虚拟产品可简化初始化。

```
products = [[0,0,0,""],[1,2,1.10,"Apples"],[1,3,1.15,"Viagra"],[2,3,1.15,"Notebooks"],[3,7,1.30,"Nun costumes"],[4,7,1.28,"Priest costumes"],[6,7,1.09,"Oranges"],[6,8,1.11,"Pears"],[7,9,1.16,"Yellow shoes"],[8,10,1.15,"Red shoes"],[10,15,1.50,"Red Ferrari"],[11,15,1.40,"Yellow Ferrari"],[13,16,1.25,"Organic grapes"],[14,19,1.30,"Organic wine"]]
hiDay = max([x[1] for x in products])
graf = [[1, i-1, 0, [[i+1,1,0]]] for i in range(2+hiDay)]

for i, x in enumerate(products):
    b, d, g, p = x[:]
    graf[b][3] += [[d+1, g, i]] # Add an edge for each product

for i, t in enumerate(graf):
    if i > hiDay: break
    valu = t[0]                 # Best value of path to current node
    edges = t[3]                # List of edges out of current node
    for e in edges:
        link, gain, prod = e[:]
        v = valu * gain;
        if v > graf[link][0]:
            graf[link][0:3] = [v, i, prod]

day = hiDay
while day > 0:
    if graf[day][2] > 0:
        print day, ":\t", graf[day][0], products[graf[day][2]]
    day = graf[day][1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T02:40:52.340

这个问题自然地映射到在一组加权区间中找到最大权重独立区间的问题。输入集中的每个项目对应一个区间，其起点和终点是购买和交货日期，项目的利润代表区间的权重。最大权重独立区间问题是找到一组总权重最大的不相交区间。 ![在此处输入图像描述](../Images/6215d39a36b2fbc4f41b84e68f520c87.png)

该问题可以通过`O(n log n)`以下方式解决。按它们的端点对间隔进行排序（见图）。然后，我们遍历排序列表中的每个区间`i`，并计算由排序列表中的区间组成的子问题的最优解`1...i`。区间问题的最优解`1...i`是以下的最大值：

```
1\. The optimal solution of the problem for intervals `1...(i-1)` in the 
   sorted list or

2\. Weight of interval `i` + the optimal solution of the problem for intervals 
   `1...j`, where j is the last interval in the sorted list whose end-point
   is less than the start-point of `i`. 
```

请注意，该算法运行`O(n log n)`并计算排序列表的每个前缀的最优解的值。在我们运行这个算法之后，我们可以以相反的顺序遍历排序列表，并根据为每个前缀计算的值找到最优解中存在的区间。

**编辑：**

为了使其正常工作，间隔的权重应该是相应项目的实际利润（即它们应该是 sell_price - buy_price）。

**更新 2：运行时间**

设为天数（遵循jwpat7`V`的符号）。如果`V`远小于`O(n log n)`，我们可以使用计数排序对时间间隔进行排序，`O(n + V)`并使用一个大小数组`V`来记录子问题的解决方案。这种方法导致时间复杂度为`O(V + n)`。所以算法的运行时间为`min(O(V+n), O(n log n))`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T00:56:22.360

这是一个动态规划问题。做出整体最优选择只需要在每一步都做出最优选择。您可以制作一个表格，描述基于先前状态的每个步骤的最佳选择以及从该状态采取各种步骤的利润。您可以通过消除明显不理想的可能性，将大量可能性合并成一个较小的集合。

在您的问题中，影响选择的唯一状态是交货日期。例如，在第一天，您有三个选择：您可以购买苹果，将利润设置为 1.10，将交货日期设置为 2；购买伟哥，将您的利润设置为 1.15，并将您的交货日期设置为 3；或者什么都不买，将您的利润设置为零，并将交货日期设置为 2。我们可以像这样表示这些替代方案：

```
(choices=[apples], delivery=2, profit=1.10) or
(choices=[viagra], delivery=3, profit=1.15) or
(choices=[wait],   delivery=2, profit=0.00) 
```

就做出未来决定而言，您在第一天购买伟哥还是什么都不买都没有任何区别。无论哪种方式，您可以购买的第二天是第二天，因此您可以消除等待作为替代方案，因为利润较低。但是，如果您购买苹果，与购买伟哥或等待相比，这将影响未来的决策，因此您必须考虑另一种选择。这只会在第一天结束时为您提供这些替代方案。

```
(choices=[apples], delivery=2, profit=1.10) or 
(choices=[viagra], delivery=3, profit=1.15) 
```

第二天，您需要根据第一天的替代方案来考虑您的替代方案。这产生了三种可能性：

```
(choices=[apples,notebooks], delivery=3, profit=2.25) or
(choices=[apples,wait],      delivery=3, profit=1.10) or
(choices=[viagra,wait],      delivery=3, profit=1.15) 
```

就考虑未来的决定而言，所有这三个选择都使您处于相同的状态，因为它们都将交货日期设置为 3，因此您只需选择具有最大利润的一个：

```
(choices=[apples,notebooks], delivery=3, profit=2.25) 
```

继续第三天，你有两个选择

```
(choices=[apples,notebooks,wait],         delivery=4, profit=2.25)
(choices=[apples,notebooks,nun costumes], delivery=7, profit=3.55) 
```

这两种选择都必须保留，因为它们将以不同的方式影响未来的决定。

请注意，我们只是根据交货日期和利润来做出未来的决定。我们跟踪选择，以便我们可以在最后报告最佳选择集。

现在也许你可以看到模式。你有一组备选方案，当你有多个备选方案具有相同的交货日期时，你只需选择利润最大的一个，并消除其他的。这种折叠替代方案的过程可以防止问题呈指数级增长，从而使其得到有效解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T01:12:42.340

您可以将其作为[线性规划](http://en.wikipedia.org/wiki/Linear_programming)问题来解决。这是解决物流问题的标准方法，例如航空公司和公司面临的问题，问题空间比您的要大得多。我不会在这里正式定义您的问题，而是从广义上讲：您的目标函数是利润最大化。您可以将购买天数和“每天仅购买一次”表示为线性约束。

标准的线性规划算法是[单纯形法](http://en.wikipedia.org/wiki/Simplex_algorithm)。尽管它具有指数级的最坏情况行为，但在实践中，它往往对实际问题非常有效。有很多很好的免费实现。我最喜欢的是[GNU 线性编程工具包](http://www.gnu.org/software/glpk/)。R 有[一个到 GLPK 的接口](https://r-forge.r-project.org/softwaremap/tag_cloud.php?tag=linear%20programming)。[Lp_solve](http://sourceforge.net/projects/lpsolve/)是另一个著名的项目，它也有一个[R 接口](http://lpsolve.sourceforge.net/5.5/R.htm)。每种情况下的基本方法是正式定义您的问题，然后将其交给第三方解决方案来完成。

要了解更多信息，我建议您查看[算法设计手册](https://rads.stackoverflow.com/amzn/click/com/1848000693)，它应该为您提供足够的背景来进行在线进一步研究。p.412 以后是对线性规划及其变体的全面总结（例如，如果您有完整性约束，则为整数规划）。

如果您以前从未听说过线性规划，您可能想看看一些如何使用它的示例。我真的很喜欢这[组简单的 Python 教程问题](http://www.coin-or.org/PuLP/CaseStudies/index.html)。它们包括最大化猫粮罐头的利润，以及解决数独问题。

# html - 框内段落旁边的图像

> ID：12683059
> 
> 赞同：0
> 
> 时间：2012-10-02T00:40:02.227
> 
> 标签：html, css, position

我最近尝试编写一个框，在左侧包含一个图像，在它旁边有一个标题和段落，如下所示：

[http://gyazo.com/c5165fa45c32f69499768ba95d815328](http://gyazo.com/c5165fa45c32f69499768ba95d815328)

这就是我所做的：

```
 <div class="span4">
        <div class="box">
            <img src="img/share.png" class="image_margin"/>
                <span class="box_title">SHARE</span>
                <span id="texting">Upload files straight from you hard disc. Up to 600MB per file upload! the more you earn the more file storage you get.</span>
        </div>
        </div> 
```

CSS：

```
.box {
    background-image: url("../img/box.png");
    width: 305px;
    height: 117px;
}
#texting {
font-size: 14px;
}

.image_margin{
    margin-top: 25px;
    margin-left: 25px;
}
.box_title{
    font-size: 24px;
    color: #8d8d8d;
    margin-left: 15px;
    margin-top: 20px;
    position: absolute;
} 
```

这是结果：

[http://gyazo.com/f600c42f86b51e52de436631fc96656d](http://gyazo.com/f600c42f86b51e52de436631fc96656d)

为什么文本开箱即用，却在盒子的类中？我做错了什么？如何像 CSS 中的第一张图片一样对齐标题 + 段落，使其适合所有屏幕？

十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:04:47.367

`align="left"`在`img`标签中使用。

```
<img src="img/share.png" class="image_margin" align="left"/> 
```

希望这会有所帮助

# css - CSS: Positioning a box over top over a main div

> ID：12683062
> 
> 赞同：1
> 
> 时间：2012-10-02T00:40:15.083
> 
> 标签：css, html, position

I have the following HTML with the `div.logo` centered in the middle.

What would be the easiest cross browser solution to allow me to put another box `contactDetails` onto the left or right but retain the centered image?

**HTML:**

```
<div id="page-wrap">
    <header>
        <div id="logo">
                <img src="_assets/images/logo.png" width="500" height="518"/>
                <h3>New Website Soon</h3>
        </div><!--END logo-->
        <div id="contactDetails">
            <p>Content</p>
        </div>
    </header>
</div><!--END page-wrap--> 
```

**CSS:**

```
*{
    padding: 0;
    margin: 0;
}
body{
    background:url('../images/background.png') repeat;
    margin: 0 auto;
}
div.page-wrap,header,div.logo,h1{
    font-family: arial;
    text-align: center;
    margin:0;
}
div.page-wrap,header,div.logo,img{
    border-radius: 5px;
}
div.contactDetails{
    float: left;
    margin: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:03:14.763

Position the contact box absolutely.

For what it's worth, none of your CSS above will work because you're using a dot to signify the class of the div, rather than a # pound sign to signify ID of the div (`div.logo` corresponds to `<div class="logo">`, `div#logo` corresponds to `<div id="logo">`)

```
#page-wrap {
/* parents of absolutely positioned elements must have a position */
position: relative;
}

#contactDetails {
position: absolute;
top: 0;
right: 0; 
/* you could use 'left: 0;' instead, to move to the left edge */
width: 300px;
} 
```

# php - 检测 HTML 文本区域中的新行

> ID：12683065
> 
> 赞同：3
> 
> 时间：2012-10-02T00:40:27.497
> 
> 标签：php, html, textarea

> **可能重复：**
> [PHP 中提交的文本中的换行符转换](https://stackoverflow.com/questions/9454732/newline-conversion-in-submitted-text-in-php)

我正在使用 PHP 将从 textarea 提交的文本存储到数据库中，以便稍后回显。如果用户在文本框中按 Enter 键开始新行，我希望它开始换行。

我该怎么做呢？

假设这是文本框：

```
This is line one.
This is line two. 
```

当用户将其提交到数据库时，它只是存储为一行并回显是相同的结果。“这是第一行。这是第二行。”

那么如何让存储的文本反映原始输入的格式呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T00:42:33.470

从数据库读取时，您将在输出上运行类似 nl2br() 的内容。新行将存储为 \n。

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

还应该注意的是，您不应该在插入数据库之前运行 nl2br()。只是不是一个好习惯。

# apache-flex - Flex 发布构建问题（AIR 应用程序）

> ID：12683066
> 
> 赞同：0
> 
> 时间：2012-10-02T00:40:28.670
> 
> 标签：apache-flex, air, flash-builder

我在从 Flash Builder 4.6 导出构建版本时遇到问题。情况是，当我在 IDE（Flash Builder 4.6）上运行它时，它工作正常，没有遇到任何问题，它从未崩溃过，但是当我将它导出以进行发布构建并运行时，它会崩溃到某个模块/视图。AIR 应用程序崩溃的视图/模块有多个远程对象调用（最少 5 个）。我注意到，当请求多个远程对象调用（例如一次 5 个远程调用）时，它会崩溃。是远程对象导致了崩溃吗？请帮助我解决这个问题，任何想法将不胜感激。

谢谢格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:59:37.060

我敢打赌，这是您在从 ide 调用应用程序时解决的一个安全问题。默认情况下，Flash Builders 工作目录被标记为“安全”，因此您不会遇到任何安全问题。但是在实时系统上工作时，您可能需要有一个跨域策略。

另外：我建议将 Thunderbolt 记录器与日志记录框架一起使用。这使您可以直接在浏览器的控制台中获取日志信息。

# c# - 如何检测滚动查看器是否在winrt中到达底部

> ID：12683070
> 
> 赞同：9
> 
> 时间：2012-10-02T00:41:40.943
> 
> 标签：c#, xaml, windows-runtime

我想知道检测 ScrollViewer 是否到达底部、右侧等的最佳方法是什么。

我想我可以通过同时使用 PointerWheelChanged 和 ManipulationDelta 来实现这一点。在这些事件处理程序中，我可以记录 Horizo​​ntalOffset 以了解滚动条何时到达终点。但我认为可能有更好的方法来做到这一点。

我找到了这篇[文章](http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx)。但是压缩视觉状态似乎在 winrt 中不起作用。未调用 CurrentStateChanging 事件方法。

我还查了另[一篇文章](http://mobile.dzone.com/articles/winrt-xaml-automatically)。但它只适用于滚动条，而不是通用方法。

任何人都知道解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T05:22:37.113

XAML：

```
<ScrollViewer
    x:Name="sv"
    ViewChanged="OnScrollViewerViewChanged">
    <Rectangle
        x:Name="rect"
        Width="2000"
        Height="2000"
        Fill="Yellow"
        Margin="10" />
</ScrollViewer> 
```

后面的代码：

```
private void OnScrollViewerViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
{
    var verticalOffset = sv.VerticalOffset;
    var maxVerticalOffset = sv.ScrollableHeight; //sv.ExtentHeight - sv.ViewportHeight;

    if (maxVerticalOffset < 0 ||
        verticalOffset == maxVerticalOffset)
    {
        // Scrolled to bottom
        rect.Fill = new SolidColorBrush(Colors.Red);
    }
    else
    {
        // Not scrolled to bottom
        rect.Fill = new SolidColorBrush(Colors.Yellow);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-25T07:58:51.250

对于UWP，我是这样的

```
<ScrollViewer Name="scroll" ViewChanged="scroll_ViewChanged">
    <ListView />
</ScrollViewer>

private void scroll_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
{
    var scrollViewer = (ScrollViewer)sender;
    if (scrollViewer.VerticalOffset == scrollViewer.ScrollableHeight)
        btnNewUpdates.Visibility = Visibility.Visible;
}

private void btnNewUpdates_Click(object sender, RoutedEventArgs e)
{
    itemGridView.ScrollIntoView(itemGridView.Items[0]);
    btnNewUpdates.Visibility = Visibility.Collapsed;
} 
```

# ios - 在提交之前发现我的应用程序的 iTunes 链接

> ID：12683073
> 
> 赞同：5
> 
> 时间：2012-10-02T00:42:16.357
> 
> 标签：ios, objective-c, app-store

> **可能重复：**
> [是否可以在将 iOS 应用程序提交到 appstore 之前找到它的 iTunes 链接？](https://stackoverflow.com/questions/6799737/is-it-possible-to-find-out-itunes-link-for-ios-application-before-it-being-submi)

在提交之前，我想知道我的 App 在 App Store 中的链接。我知道方法是使用链接：

> [http://itunes.com/apps/appname](http://itunes.com/apps/appname)

但是我的应用程序在 iTunes Connect 中有一个名称，而在应用程序的元数据中有另一个名称，它们将出现在 App Store 中供用户使用……我必须在链接中使用哪一个？iTunes Connect 项目名称还是元数据名称？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:07:58.867

您可以在以下位置找到应用程序链接：

*iTunes Connect* (https://itunesconnect.apple.com) ->*管理您的应用程序*->*选择您的应用程序*->*链接表*->*在 App Store 中查看*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:15:18.617

如果您的应用程序已经上线，那么只需打开 iTunes Connect，找到您的应用程序并在 AppStore 中单击查看。否则，如果您的应用未上线...

在您的应用上线之前，您的应用 URL 不可用，但大多数应用遵循相同的链接模式：

> [http://itunes.com/apps/yourappnamewithoutspaces](http://itunes.com/apps/yourappnamewithoutspaces)

确保应用名称没有空格、%20 或任何字符。我在 AppStore 上的应用程序有破折号等特殊字符，并且链接只是应用程序名称的纯文本形式。

**链接中的名称将是 AppStore 上显示的名称，而不是 iOS 设备上显示的名称**。通过 iTunes Connect 项目名称，我相信您指的是 AppStore 名称。

这是关于链接的另一篇 SO 帖子：[如何链接到应用商店中的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

# python - Python：将数组转换为文本文件

> ID：12683075
> 
> 赞同：0
> 
> 时间：2012-10-02T00:42:31.003
> 
> 标签：python, text-files

我处理的数据格式如下：

```
x = [1,2,3,4,5,6] 
```

等等。我怎么能把这个列表变成一个 .txt 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:01:39.590

```
with open(r'C:\txtfile\exported_array.txt', 'w+') as txt_export:
    for i in x: txt_export.writelines(str(i)) 
```

将保存`123456`到txt

```
with open(r'C:\txtfile\exported_array.txt', 'w+') as txt_export:
    for i in x: txt_export.writelines(str(i)+',') 
```

将保存`1,2,3,4,5,6,`到txt

```
with open(r'C:\txtfile\exported_array.txt', 'w+') as txt_export:
    for i in x: txt_export.writelines(str(i)+'\n') 
```

将保存

```
1
2
3
4
5
6 
```

进入txt

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:45:18.027

Python 2.7，每行产生一个数字：

```
with open('list.txt', 'w') as f:
    print >> f, '\n'.join(str(xi) for xi in x) 
```

您可以使用任何其他连接字符串，例如`','`在一行上生成以逗号分隔的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:50:35.240

在 python 中，您可以使用[write](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)命令写入文件。`write()`将字符串的内容写入缓冲区。不要忘记使用该`close()`功能关闭文件。

```
data = [1,2,3,4,5,6]

out = open("output.txt", "w")

for i in data:
    out.write(str(i) + "\n")

out.close() 
```

# css - Chrome 和 Firefox 之间的链接颜色不同

> ID：12683078
> 
> 赞同：0
> 
> 时间：2012-10-02T00:42:49.427
> 
> 标签：css, cross-browser

在 Firefox 中，我的网站将“打开”一词显示为蓝色，但在 Chrome 中却是某种灰色。

Firefox 计算样式

```
#content a:link #0645AD 
style.css?ver=1.2 (line 15)
a   #444444  (crossed out)
style.css (line 424)
body    #444444 (colored greY)
style.php?ver=1.2 (line 1) 
```

铬计算风格

```
#content a:hover - #4E8B4E (only item not crossed out)
#content a:link - #0645AD .sticky-title, p.trigger.active a, span.current, .themecolor, a:hover, .tag-links a:hover, .excerpt, .unitedthemes a:hover, .copyright a:hover, .entry-meta a:hover, .entry-meta-single-post a:hover, #footer a:hover, #footer .lambda_widget_twitter a, #footer .lambda_widget_recent_comments a,
#sidebar .lambda_widget_twitter a, #sidebar a:hover, .widget_recent_comments a, .lambda_widget_recent_comments a - #80B600 a - #444444 a:-webkit-any-link - -webkit-link user agent stylesheet body - #444444 
```

谁能解释为什么会这样？

更新：现在有一个解决方案，所以网站 (http://125.7.123.252/) 链接现在是蓝色的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:51:17.820

我不确定这是您想要的，但请确保将更具体的 CSS 选择器（您想要的那个）写在您不想要的更一般的规则下方（不仅在同一个 .css 文档中，而且如果您是使用多个 .css 文件，然后链接到您想要在下面优先使用的文件或“在”其他 .css 样式表之后）。

也可能是已经访问过的链接的问题。

尝试这个

```
#content a:link, #content a:visited { color:#0645AD } 
```

而不仅仅是

```
#content a {color: #0645AD} 
```

# javascript - JavaScript 电话号码验证（拒绝带有字母字符的输入）

> ID：12683085
> 
> 赞同：0
> 
> 时间：2012-10-02T00:43:16.843
> 
> 标签：javascript, jquery, forms, validation

我正在创建简单的表单验证，排除任何包含字母的条目（基本上来自 az 或 AZ 的任何条目）。

这是我目前正在使用的，但我的脚本只拒绝任何不是 0-9 的东西。这将拒绝我要验证的句点、括号和破折号。

```
var numericReg = /^\d*[0-9](|.\d*[0-9]|,\d*[0-9])?$/;
    if(number != "" && !numericReg.test(number)) {
    return false; 
```

我怎样才能只检查字母？

另一种方法是只接受具有数字 0-9 和以下字符的输入：“.”、“-”、“(”、“)”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T00:54:10.380

两个正则表达式供您尝试。第一个匹配只包含您指定的字符的字符串。第二个匹配不包含字母 az 或 AZ 的字符串：

```
var isPhoneChar = /^[-.() \d]+$/;
var isNonAlpha = /^[^a-z]+$/i; 
```

请记住，`isNonAlpha`不会防止 ñüṃȅɍǒǘṩ ȯẗḥḛṝ ḽëʈťĕřś‼</p>

您也可以考虑允许`x`电话分机和`+`国际拨号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:18:24.017

您可以随时使用它来直接拉出号码。

咖啡脚本：

```
console.log number.match ///

  # Match the start of the string.
  ^

  # Get the first 3 digits.
  \(?(?=\d{3})(\d{3})[).\-\s]*

  # Get the next 3 digits.
  (\d{3})[.\-\s]*

  # Get the last 4 digits
  (\d{4})

  # End of the number
  $

/// 
```

Javascript（或节点）：

```
console.log(number.match(/^\(?(?=\d{3})(\d{3})[).\-\s]*(\d{3})[.\-\s]*(\d{4})$/)); 
```

以下是我在 CoffeeScript 中运行的测试用例，以确保它有效：

```
exports '1234567890'
exports '123 456 7890'

exports '123.456.7890'
exports '123 456.7890'
exports '123.456 7890'
exports '123456.7890'
exports '123.4567890'
exports '123456\. 7890'

exports '123-456-7890'
exports '123 456-7890'
exports '123-456 7890'
exports '123456-7890'
exports '123-4567890'

exports '(123)456-7890'
exports '(123)4567890'
exports '(123) 4567890'
exports '(123)456 7890'
exports '(123) 456 7890'
exports '(123) 4567890' 
```

他们的输出：

```
1234567890
[ '1234567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '1234567890' ]
123 456 7890
[ '123 456 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123 456 7890' ]
123.456.7890
[ '123.456.7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123.456.7890' ]
123 456.7890
[ '123 456.7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123 456.7890' ]
123.456 7890
[ '123.456 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123.456 7890' ]
123456.7890
[ '123456.7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123456.7890' ]
123.4567890
[ '123.4567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123.4567890' ]
123456\. 7890
[ '123456\. 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123456\. 7890' ]
123-456-7890
[ '123-456-7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123-456-7890' ]
123 456-7890
[ '123 456-7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123 456-7890' ]
123-456 7890
[ '123-456 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123-456 7890' ]
123456-7890
[ '123456-7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123456-7890' ]
123-4567890
[ '123-4567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '123-4567890' ]
(123)456-7890
[ '(123)456-7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123)456-7890' ]
(123)4567890
[ '(123)4567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123)4567890' ]
(123) 4567890
[ '(123) 4567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123) 4567890' ]
(123)456 7890
[ '(123)456 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123)456 7890' ]
(123) 456 7890
[ '(123) 456 7890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123) 456 7890' ]
(123) 4567890
[ '(123) 4567890',
  '123',
  '456',
  '7890',
  index: 0,
  input: '(123) 4567890' ] 
```

如果`number.match`返回`null`该代码，则它不是有效数字。所以这是一种简单的检查方法，然后已经解析了数字。

如果您想允许`a-z`，只需将所有`\d`条目更改为`[\d\w]`. （[见此](https://gist.github.com/3815845)）

# jquery - jquery插入的元素类未加载

> ID：12683088
> 
> 赞同：0
> 
> 时间：2012-10-02T00:43:37.140
> 
> 标签：jquery, class

我正在从表中删除行，然后在用户对表单进行一些编辑后重新插入它们；问题是

```
class="view_dialog" 
```

没有为插入的行“加载”。

原始行具有以下布局：

```
<tr>
    <td>new one</td>
    <td>B2B NFIB</td>
    <td class="actions" id="actions">
       <a href="/dirs/edit/252" class="view_dialog">Edit</a>
    </td>
</tr> 
```

一旦用户更改了某些内容，我将删除所有行（通常只有 4 行中的 3 行）并使用 jquery 填充表（.records）：

```
$('.records tbody tr:last').after('<tr><td>'+data.dirArray[$count].Dir.name+'</td><td>'+data.dirArray[$count].Dir.dir_description+'</td><td class="actions" id="actions"><a href="/dirs/edit/'+data.dirArray[$count].Dir.id+'" class="view_dialog" id="Edit'+data.dirArray[$count].Dir.id+'">Edit</a></td></tr>'); 
```

行创建得很好，为行生成的代码与原始代码相同（添加 id 尝试使用 .addClass 不走运）

```
<tr>
    <td>new one</td>
    <td>B2B NFIB</td>
    <td class="actions" id="actions">
        <a href="/dirs/edit/252" class="view_dialog" id="Edit252">Edit</a>
   </td>
</tr> 
```

为什么类没有“加载”。我正在使用该类来触发一些事件。

试过了

```
$("[id^=Edit]").addClass('view_dialog'); 
```

到没有结果。

检查 .live 但它与父子控件有关。在这种情况下是否必须使用？

你能帮我吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:06:47.370

您的点击绑定仅适用于您创建它们时 DOM 中的元素，而不适用于稍后添加的元素。要处理动态添加的元素，您需要使用以下命令进行委托：

```
$(".records").on("click", ".view_dialog", function() {
    alert('class clicked');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T00:47:32.620

您是否将代码包含在 DOM Ready 事件中

```
$(function() {

   // You code 
   $("[id^=Edit]").addClass('view_dialog'); 

}); 
```

另外你什么时候添加类..它是在创建元素之前或之后..

如果您在创建元素之前分配它，恐怕这对新添加的元素没有帮助..

您需要在每个新创建的元素上显式添加该类。

# java - Runnable 不是 java 中的垃圾收集器

> ID：12683092
> 
> 赞同：2
> 
> 时间：2012-10-02T00:44:25.967
> 
> 标签：java, garbage-collection

我已经看到许多 Thread java 示例和 Runnable 对象被创建为任务并传递给线程。由于没有引用这些任务，那么为什么这个任务没有被 java 垃圾收集呢？还是垃圾收集了，我在这里问错了问题？请分享您宝贵的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:47:15.327

您没有对对象的显式引用这一事实并不意味着内部 JVM 对象不持有它。

举个例子：

```
frame.add(new JButton("foobar")); 
```

从开发人员的角度来看，没有对它的引用，但框架内部有一个组件列表。这就是线程发生的情况，内部调度程序必须确保对它们保持引用。

线程本身将在从调度程序释放时被垃圾收集（因此不再有效地存在对它的引用）

# ruby-on-rails - 控制器如何为某个字段手动设置验证错误

> ID：12683100
> 
> 赞同：8
> 
> 时间：2012-10-02T00:45:19.577
> 
> 标签：ruby-on-rails, validation

我有一个包含 3 个 ActiveRecord 字段的表单。其中一个领域有一种愚蠢的和状态相关的验证要求。（例如，如果对象是在设置向导表单上创建的，我只验证该字段。）

在我创建对象的 POST 处理程序中，我想我可以调用 errors.add 来插入一个特殊的错误条件

```
@foo = Foo.new(params[:foo])
if goofy_conditions(params[:foo][:goofy_field])
  @foo.errors.add(:goofy_field, "doesn't meet the goofy conditions" )
end
respond_to do |format|
  if @foo.save
    ...
  else
    ... redirect back to form (with error fields hilited) 
```

但是，在控制器中执行 @foo.errors.add() 似乎没有做任何事情......如果其他字段通过验证，它不会阻止 save() 。

另一种方法是将自定义验证处理程序放入模型中...我知道使用 errors.add(:field, 'msg') 在那里可以正常工作...但是在这种情况下，我的控制器如何将信息“传递”给验证器告诉它是否需要验证该字段。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T03:43:28.280

这就是模型逻辑。查看[自定义验证](http://guides.rubyonrails.org/active_record_validations.html#performing-custom-validations)

```
class GoofyThing < ActiveRecord::Base
  validate :goofy_attribute_is_goofy

  def goofy_attribute_is_goofy
    if goofy_conditions(self.goofy_field)
      self.errors.add(:goofy_field, "doesn't meet the goofy conditions" )
    end
  end
end 
```

然后它将像任何其他验证一样运行。

**编辑**

`:if`您可以使用以下选项有条件地验证：

```
attr_accessible :via_wizard
validate :goofy_attribute_is_goofy, :if => lambda { self.via_wizard } 
```

在你的控制器中：

```
class WizardController < ApplicationController
  before_filter :get_object, :set_wizard

  #...

  def get_object
    @object = GoofyThing.find(params[:id])
  end

  def set_wizard
    @object.via_wizard = true
  end
end 
```

# java - 在 JBoss 7 中使用 301 重定向从 www 重定向到非 www

> ID：12683105
> 
> 赞同：0
> 
> 时间：2012-10-02T00:46:22.713
> 
> 标签：java, http, jsf, redirect, jboss

我有一个域，并希望通过 301 重定向将诸如“domain.com/blau”之类的请求重定向到“www.domain.com/blau”。我想为此使用内部 jboss 服务器（jboss as 7）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:29:04.387

我解决了我的问题：

```
<virtual-server name="foobarVirtualDomain">
    <alias name="foobar.com"/>
    <alias name="www.foobar.com"/>
    <rewrite pattern="^(.*)$" substitution="http://%1:%{SERVER_PORT}$1" flags="R=301,L">
        <condition test="%{HTTP_HOST}" pattern="^www\.(.+)$" flags="NC"/>
    </rewrite>
</virtual-server> 
```

# ios - UITextView 可点击，几乎像 UIButton

> ID：12683107
> 
> 赞同：0
> 
> 时间：2012-10-02T00:46:37.783
> 
> 标签：ios

我有`UITextView`很多文字，并按照我需要的方式进行了定制。我想知道，有没有办法让它可以点击然后导航到一个新的`UIViewController`？

我正在寻找这个，似乎唯一的方法是有一个隐形`UIButton`覆盖它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:55:36.550

您可以将 UITapGestureRecogniser 添加到您的文本视图中。无论是在界面生成器中，还是在您的代码中。

```
UITapGestureRecogniser *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myfunction:)]:
[mytextview addGestureRecogniser:tap];
[mytextview setEditable:NO];
[mytextview setUserInteractionEnabled:YES];
[tap release]; 
```

编辑：谢谢 Nekto

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T20:00:44.147

`UITextView`没有声明选择器`addGestureRecognizer`，所以我使用它来代替：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(textViewTapped:)];
NSArray *gestureRecognizers = [NSArray arrayWithObject:tap];
[textView setGestureRecognizers:gestureRecognizers];
[textView setEditable:NO];
[textView setUserInteractionEnabled:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T20:06:35.267

使用界面生成器，您可以将 TextViews 类设置为 UIControl。然后，您可以控制从它拖动到任何 IBAction。

# java - Java新手——汽车应用

> ID：12683114
> 
> 赞同：0
> 
> 时间：2012-10-02T00:47:51.863
> 
> 标签：java

我是一名学生，是的，这是我的家庭作业。上周我一直在复习笔记，阅读本书，并在网上研究相关主题，但我就是不明白问题出在哪里。你能告诉我我做错了什么吗？任何帮助将不胜感激。（我只使用记事本和命令提示符。）

我得到的指导方针：创建一个包含两个类的 Java 应用程序。第一类将是您的应用程序类。第二类将是一个名为 Car 的类。您的应用程序将创建一个名为 nova 的 Car 实例并驱动它。

用车规则：

*   如果汽车未启动，您将无法驾驶（向控制台发送错误消息）。
*   如果汽车未启动，您将无法停车（向控制台发送错误消息）。
*   如果汽车已经启动，则无法启动（向控制台发送错误消息）。
*   一旦你告诉汽车开车，你唯一能做的就是停下来（向控制台发送消息）
*   一旦您调用停止，汽车将返回初始状态，用户必须在尝试执行任何其他功能之前启动汽车。（向控制台发送消息）

showState 方法的目的是提供一种检查汽车状态的方法。它应该构建一条消息，然后可以将其发送到控制台。

我的代码：

```
public class MyAppAssignment3
{
   public static void main (String[] args)
   {
       System.out.println("Scenario 1");
       Car nova1 = new Car();
       nova1.start();
       nova1.showState();
       nova1.drive();
       nova1.stop();
       nova1.showState();
       System.out.println("");

       System.out.println("Scenario 2");
       Car nova2 = new Car();
       nova2.showState();
       nova2.drive();  //needs to send error message - can't drive a car that's not started
       nova2.stop();
       nova2.showState();
       System.out.println("");

       System.out.println("Scenario 3");
       Car nova3 = new Car();
       nova3.showState();
       nova3.start();
       nova3.showState();
       nova3.stop();   //needs to send error message - can't stop a car that's not driving
       nova3.showState();
       nova3.drive();
       nova3.stop();
   }
}

class Car
{
   private boolean isStarted;
   private boolean isDriving;
   private boolean isStopped;
   private String showState;

   public Car()
   {
       this.showState = showState;
   }

   public void start()
   {
       isStarted = true;
       isDriving = false;
       isStopped = false;
       System.out.println("The car is " + this.showState);
   }

   public void drive()
   {
       isStarted = false;
       isStopped = false;
       isDriving = true;
       System.out.println("The car is " + this.showState);
   }

   public void stop()
   {
       isStopped = true;
       isStarted = false;
       isDriving = false;
       System.out.println("The car is " + this.showState);
   }

   public String showState()
   {
       if (isStarted)
       {
           showState = "started";
       }
       else if(isDriving)
       {
           showState = "driving";
       }
       else if(isStopped)
       {
           showState = "stopped";
       }
       System.out.println("The car is " + this.showState);
       return showState;
   }
} 
```

我的输出（这都是错误的 - 值不正确）：

```
Scenario 1
The car is null
The car is started
The car is started
The car is started
The car is stopped

Scenario 2
The car is null
The car is null
The car is null
The car is stopped

Scenario 3
The car is null
The car is null
The car is started
The car is started
The car is stopped
The car is stopped
The car is stopped 
```

抱歉，如果这发布的所有内容都不稳定。我打字很好，但预览看起来很糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T01:03:58.600

这实际上并没有做任何事情......

```
public Car()
{
    this.showState = showState;
} 
```

基本上，它只是将相同的值重新分配回自身。我会更改为初始状态，可能是`stopped`

我会使用`enum`我的汽车状态，而不是依赖`boolean`状态，这可能会变得混乱......

```
public enum CarState {
    Stopped,
    Started,
    Driving
} 
```

然后只需将其分配给单个`state`变量...

```
class Car
{
    private CarState state;

    public Car()
    {
       this.state= CarState.Stopped;
    }

    public void start()
    {
        if (state.equals(State.Stopped)) {
            state = CarState.Started;
            showState();
        } else {
            System.error.println("Car is not in a valid state to be started");
        }
    }

    public void drive()
    {
        if (state.equals(State.Started)) {
            state = CarState.Driving;
            showState();
        } else {
            System.error.println("Car is not in a valid state to be driven");
        }
    }

    public void stop()
    {
        if (state.equals(State.Driving)) {
            state = CarState.Stopped;
            showState();
        } else {
            System.error.println("Car is not in a valid state to be stopped");
        }
    }

    public String showState()
    {
        System.out.println("The car is " + state);
    }
} 
```

你遇到的另一个问题是`showStatus`当你改变状态时没有被调用，它没有将当前状态分配给`showState`变量......我已经通过使用更正了`enum`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:56:18.227

一方面，您只是在创建一个新实例。您从未真正为这些实例设置默认值。

至少考虑这样的事情：

```
public Car()
{
    isStopped = true;
} 
```

这样，当你第一次打电话时，`nova1.start();`你可以在允许它重新开始之前检查 isStopped 是否为真......

```
public void start()
{
    if(isStopped)
    {
        isStarted = true;       
        isDriving = false;       
        isStopped = false;   
        showState = "started";    
        System.out.println("The car is " + this.showState);
    }
} 
```

只是一个例子。但是您可以轻松地使用它来推断您的其余需求。我的观点主要是您创建了一个实例，但随后期望布尔值具有未指定的值。您可以在默认值或构造函数中执行此操作。

例如：

```
private boolean isStarted = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T01:41:02.103

使用枚举是个好主意。这是一个使用枚举的实现，使用默认实现的枚举和使用类型系统的自己的实现。也没有任何条件，例如使用 if 或 switch。只是纯粹而美丽的 Java 代码。

```
public class Car {
private enum State {
  OFF {
    void start(Car c) {
      System.out.println("Starting the car");
      c.state = State.STARTED;
    }
  }, 
  STARTED {
    void stop(Car c) {
      System.out.println("Stopping the car");
      c.state = State.OFF;
    }
    void drive(Car c) {
      System.out.println("Driving the car");
      c.state = State.DRIVING;
    }
  }, 
  DRIVING {
    void stop (Car c) {
      System.out.println("Stopping the car");
      c.state = State.OFF;
    }
  };

  void start(Car c) {
    System.err.println("Can't start");
  }

  void stop(Car c) {
    System.err.println("Can't stop");
  }

  void drive(Car c) {
    System.err.println("Can't drive");
  }
}
  private State state = State.OFF;

  public void start(){
    state.start(this);
  }

  public void stop(){
    state.stop(this);
  }
  public void drive() {
    state.drive(this);
  }

  public void showState(){
    System.out.println("The car is "+state);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T20:37:33.423

这行得通！感谢所有的帮助！

```
public class MyAppAssignment3
{
    public static void main (String[] args)
    {
        System.out.println("Scenario 1");
        Car nova1 = new Car();
        nova1.start();
        nova1.showState();
        nova1.drive();
        nova1.stop();   
        nova1.showState(); 
        System.out.println("");

        System.out.println("Scenario 2");
        Car nova2 = new Car();
        nova2.showState();
        nova2.drive();
        nova2.stop();
        nova2.showState();
        System.out.println("");

        System.out.println("Scenario 3");
        Car nova3 = new Car();
        nova3.showState();
        nova3.start();
        nova3.showState();
        nova3.stop();
        nova3.showState();
        nova3.drive();
        nova3.stop();
    }
}

class Car
{
    private boolean isStarted;
    private boolean isDriving;
    private boolean isStopped;
    private String showState;

    public Car()
    {
        isStarted = false;
        isDriving = false;
        isStopped = true;
    }

    public void start()
    {
        if(isStarted == false)
        {
            isStopped = false;
            isStarted = true;
            showState();
        }
        else
        {
            System.out.println("You can't start a car which is already started.");
        }

    }

    public void drive()
    {
        if(isStarted)
        {
            isDriving = true;
            showState();
        }
        else
        {
            System.out.println("You can't drive a car which is not started.");
        }

    }

    public void stop()
    {
        if(isStarted)
        {
            isStarted = false;
            isDriving = false;
            isStopped = true;
            showState();
        }
        else
        {
            System.out.println("You can't stop a car which is not started.");
        }

    }

    public String showState()
    {
        if(isStarted && (isDriving == false))
        {
            showState = "started";
        }
        else if(isStarted && isDriving)
        {
            showState = "driving";
        }
        else if(isStopped)
        {
            showState = "stopped";
        }
        System.out.println("The car is " + this.showState + ".");
        return showState;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T00:52:54.297

我的建议是，每辆车都有自己唯一的 ID：

```
 class Car
{
   private boolean isStarted;
   private boolean isDriving;
   private boolean isStopped;
   private String showState;
   private int id;

   public Car(Integer id)
   {
       this.id = id;
   }
...

} 
```

然后在你说打印出来的所有地方，还包括id：

```
System.out.println("The car id "+id+" is "+ this.showState); 
```

然后创建一个这样的对象：

```
Car nova1 = new Car(1);

Car nova2 = new Car(2);

Car nova3 = new Car(3); 
```

它不是解决方案，但它为解决方案提供了途径。你会找到解决方案，你会感受到它的味道

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T01:01:00.200

您必须在代码中翻译您被要求的内容，并且您可以看到它甚至接近实际要求 - 例如：

> **如果**汽车未**启动**，您将无法驾驶（向控制台发送错误消息）。

变成：

```
public void drive()
{

    if( this.isStarted == false ){

        System.out.println("You should start the car first!");

    }else{

        System.out.println("Car is running!");

    }

} 
```

请注意，您可以`!this.isStarted`写成`isStarted == false`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T01:10:51.837

尝试在每个步骤中输出变量的值。逻辑流程中存在一些问题。例如，检查构造函数。

```
public Car()
{
   System.out.println(showState);
   this.showState = showState;
} 
```

没有将 showState 值传递给构造函数，并且它也没有在函数内部初始化。

此外，在每个函数启动、停止和驱动中，您需要编写：

```
 System.out.println("The car is " + this.showState()); 
```

代替 ：

```
 System.out.println("The car is " + this.showState); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-02T01:21:07.183

让我们保持简单，为什么只需要两个变量时使用 3 个变量？如果我错了，请纠正，但是如果汽车没有启动并且您没有驾驶它，那么它就停止了，对吗？看看我的课：

```
public class car
{
private boolean isStarted;
private boolean isDriving;

public car()
{
    isStarted = false;
    isDriving = false;
    //Initial State
    showState();
}

public void start()
{
    if(!isStarted)
    {
        if(!isDriving)
            isStarted = true;
    }
    else
        System.err.println("You can\'t start a car which is already started"); //You can’t start a car if it is already started (send an error message to the console).
        showState();
}   

public void drive()
{
    if(isStarted)
        isDriving = true;
    else
        System.err.println("You can\'t drive a car which is not started");

    showState();
}

public void stop()
{
    if(isStarted)
    {
        isStarted = false;
        isDriving = false;
        // Once you call stop, the car will return to the initial state and the user must start the car before attempting to do any other functions. (Send a message to the console. (Below on ShowState)
    }
    else
        System.err.println("You can\'t stop a car which is not started"); // You can’t stop a car if it is not started (send an error message to the console).
    showState(); // Once you tell the car to drive, the only thing you can do is stop (Send a message to the console)
}

public void showState()
{
    if(isStarted && isDriving)
        System.out.println("It\'s Driving");
    if(!isStarted && !isDriving)
        System.out.println("It\'s Stopped");
    if(isStarted && !isDriving)
        System.out.println("It\'s Started");
}

} 
```

我希望它有所帮助。干杯

# ruby - 为什么ruby gem方法返回错误类的变量

> ID：12683115
> 
> 赞同：0
> 
> 时间：2012-10-02T00:48:01.893
> 
> 标签：ruby, x12

我正在使用 hippo gem 将 X12 文件解析为它们的段和值。我正在使用解析器方法，我希望它返回类的变量：Hippo::TransactionSets::Hippa_837::Base 但返回的值是类数组。在库中，我可以将我需要的数量放入一个全局变量中并以这种方式访问​​它，但我认为我不应该这样做。我试图创建一个类的变量并使用解析器方法返回来设置它的值，到目前为止还没有运气。

```
begin  
require 'rubygems'
gem 'minitest'
require 'minitest/autorun'
require 'pp'
require 'pry'
require 'hippo'

t = Hippo::Parser.parse_string(File.read('c:/test.edi'))
puts "DONE: "
puts t.class
puts $t.class
gets
puts $t.ST
end 
```

输出：

```
DONE: 
Hippo::TransactionSets::HIPAA_837::Base
Array
ST*837*0021*005010X222A1~ 
```

$t 是我在 parser.rb 库文件中设置的全局变量。t 原来是一个没有访问段的方法的数组类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:53:46.603

您需要遍历数组，或获取单个元素，然后您将找到您期望的对象，以及与段关联的所有方法。

# android - 为什么我在发送 SMS 时没有调用我的 ContentObserver？

> ID：12683116
> 
> 赞同：4
> 
> 时间：2012-10-02T00:48:25.827
> 
> 标签：android, service, sms, android-contentprovider

我正在尝试检测何时发送短信。我在网上和 StackOverflow 上搜索过，似乎都是相同的解决方案。我有一个启动服务的简单活动，并且在服务中我试图检测何时发送短信：

**MainActivity.java**

```
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    Intent serviceIntent;
    private static MyReceiver mServiceReceiver; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected void onPause() {
        Log.i("Status","Pause");
        unregisterReceiver(mServiceReceiver);
        super.onPause();
    }

    @Override
    protected void onResume() {
        Log.i("Status","Resume");

        // Inicio el Servicio
        serviceIntent = new Intent(MainActivity.this, TrackerService.class);
        startService(serviceIntent);
        // Registro el broadcast del Service para obtener los datos
        mServiceReceiver = new MyReceiver();
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(TrackerService.mAction);
        registerReceiver(mServiceReceiver, intentFilter);

        super.onResume();
    }

    /**
     * Receiver del Service, aqui se obtienen los datos que envia el Service
     */
    private class MyReceiver extends BroadcastReceiver{
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            Log.i("ServiceReceiver", "onReceive()");
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

**TrackerService.java**

```
import android.app.Service;
import android.content.ContentResolver;
import android.content.Intent;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;

public class TrackerService extends Service{

    // Nombre del service
    public static final String mAction = "SMSTracker";
    ContentResolver content;
    ContentResolver contentResolver;

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i("Status","Service Start");

        // ContentResolver para obtener los SMS salientes
        contentResolver = this.getContentResolver();
        contentResolver.registerContentObserver(Uri.parse("content://sms/out"), true, new mObserver(new Handler()));

        return super.onStartCommand(intent, flags, startId);
    }

    /**
     * Observer que obtiene los SMS salientes
     */
    class mObserver extends ContentObserver {

        public mObserver(Handler handler) {
            super(handler);
        }

        @Override
        public void onChange(boolean selfChange) {
            super.onChange(selfChange);
            Log.i("Status","onChange");

            Uri uriSMS = Uri.parse("content://sms/out");
            Cursor cur = contentResolver.query(uriSMS, null, null, null, null);
            Log.i("SMS", "Columns: " + cur.getColumnNames());

            cur.moveToNext();
            String smsText = cur.getString(cur.getColumnIndex("body"));

            Log.i("SMS", "SMS Lenght: " + smsText.length());

        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.i("Status","Service Destroy");
    }

    @Override
    public IBinder onBind(Intent intent) {
        Log.i("Status","Service Bind");
        return null;
    }

} 
```

**显现**

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
    <uses-permission android:name="android.permission.READ_SMS"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <service android:name=".TrackerService" />

</application> 
```

根据我的 LogCat，该服务已启动，我可以在我的 Android 手机运行服务中看到它，我的服务中的 onChange() 方法在我发送短信时永远不会被调用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:59:04.483

如果您替换`content://sms/out`为`content://sms/`，您将看到在发送 SMS 时不调用 ContentObserver，而是在收到 SMS 时调用。这是我的观察者的代码。只有在收到短信时才进入 onChange(boolean)。此时协议为“0”。

所以，我和你一样被打动:(

```
class SmsProviderObserver extends ContentObserver {

    public SmsProviderObserver(Handler handler) {
        super(handler);
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);

        Uri uriSms = Uri.parse("content://sms/");

        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(uriSms, null, null, null, null);
        // this will make it point to the first record, which is the last
        // SMS sent
        if (!cur.moveToNext()) {
            return; // weird!
        }

        String protocol = cur.getString(cur.getColumnIndex("protocol"));
        if (protocol == null) {
            // send
            Log.i("SMS", "SMS SEND");
            int threadId = cur.getInt(cur.getColumnIndex("thread_id"));

            Log.i("SMS", "SMS SEND ID = " + threadId);
            Cursor c = cr.query(
                    Uri.parse("content://sms/outbox/" + threadId), null,
                    null, null, null);
            c.moveToNext();
            int p = cur.getInt(cur.getColumnIndex("person"));
            Log.i("SMS", "SMS SEND person= " + p);
            // getContentResolver().delete(Uri.parse("content://sms/conversations/"
            // + threadId), null, null);

        } else {
            // receive
            Log.i("SMS", "SMS RECIEVE");
            int threadIdIn = cur.getInt(cur.getColumnIndex("thread_id"));

            cr.delete(
                    Uri.parse("content://sms/conversations/" + threadIdIn),
                    null, null);
        }
    }
} 
```

以及注册观察者的代码：

```
ContentResolver contentResolver = getContentResolver();
mSmsObserverHandler = new Handler();
mSmsProviderObserver = new SmsProviderObserver(mSmsObserverHandler);
contentResolver.registerContentObserver(Uri.parse("content://sms/"), true, mSmsProviderObserver); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:05:12.377

好的，似乎没有办法，不知道这是否是我在 Android 错误上的错误，但我得到了它的工作：

```
 if( (type == 2 || type == 1) && (!lastID.contentEquals(cur.getString(cur.getColumnIndex("_id")))) ){
            String protocol = cur.getString(cur.getColumnIndex("protocol"));
            lastID = cur.getString(cur.getColumnIndex("_id"));
            // Mensaje enviado
            if(protocol == null){
                Log.i("SMSStatus", "SMS Sent");
            }
            // Mensaje recibido
            else{
                Log.i("SMSStatus", "SMS received");
            }
        } 
```

收到短信时type = 1，发送短信时type = 6、4，最后发送时type = 2。要小心，因为有时onChange方法会被调用很多次，如果它只是一条短信，因此您应该通过检查 _id 参数来检测它是否是相同的短信。

# java - 使用 Akka 玩 Framewrok 对象序列化

> ID：12683118
> 
> 赞同：0
> 
> 时间：2012-10-02T00:48:46.060
> 
> 标签：java, playframework, akka, object-serialization

我有一个使用 java 语言连接到远程 akka 系统的 play framework 2.0。我有一个包装在消息类中的 java 数组列表对象。问题是我想将消息对象发送到远程 akka 系统进行计算。所以，我想知道我需要部署消息对象还是需要序列化消息对象。有人可以帮助我对最佳选择以及如何实施进行很好的解释。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:53:40.093

如果你让包装类实现 Serializable 并将其放入消息对象中，Akka 应该负责其余的工作。（对不起，我帮不上忙，但这样的事情在 Scala 版本中更容易处理）

# excel - 索引/匹配 Excel 中的多个列

> ID：12683119
> 
> 赞同：1
> 
> 时间：2012-10-02T00:48:47.237
> 
> 标签：excel, excel-formula, excel-match

我有 2 张纸。表 1 的设置类似于：

```
Keyword  Domain  Rank
  A        Z      1
  B        Z      2
  C        Z      3
  D        Y      10
  E        Y      15
  B        Y      20 
```

表 2 的设置如下：

```
Keyword  (Domain Z)  (Domain Y)
  A           1          -
  B           2          20
  C           3          -
  D           -          10 
```

我试图有一个公式，将表 2 中的关键字与表 1 中的关键字进行比较，然后返回对应于正确域的排名（在表 2 中为该列指定）。我无法得到任何我用来评估的公式。到目前为止，我已经使用了 2 个公式：

```
=INDEX(Raw!$H$11:$H$322, MATCH(A3,IF(Raw!$D$11:$D$322=All!$B$2,Raw!$B$11:$B$322),0)) 
```

上面的公式在一定程度上有效。问题是它简单地为找到的关键字的第一个实例提取域，它并不总是与工作表 2 列中的域匹配。我尝试过的第二个公式：

```
=INDEX(Raw!$H$11:$H$322, MATCH(B3,MATCH($C$2,Raw!$D$11:$D$322,0))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:00:05.950

要使值出现在工作表 2 表中，请使用以下公式：

```
=SUMPRODUCT(--($A$2:$A$7=E2),--($B$2:$B$7=$F$1),$C$2:$C$7) 
```

![在此处输入图像描述](../Images/e86703253f37d293ad5edcbc25944d1e.png)

这将返回`0`不匹配 - 您可以格式化单元格以显示 0 您想要的方式，或者您可以使用更长/更丑的：

```
=IF(SUMPRODUCT(--($A$2:$A$7=E2),--($B$2:$B$7=$G$1),$C$2:$C$7)<>0,SUMPRODUCT(--($A$2:$A$7=E2),--($B$2:$B$7=$G$1),$C$2:$C$7),"-") 
```

* * *

要根据第二张表中的数据计算第一张表上的排名：

```
=VLOOKUP(A2,$F$2:$H$5,MATCH(B2,$G$1:$H$1,0)+1,FALSE) 
```

出于示例目的，这只是将您的 sheet2 数据放在 F1:H5 中。 ![在此处输入图像描述](../Images/01546a5a913de55921bf9cd2f323f537.png)

这会查找相应的关键字，然后使用 match 来选择正确的列。我将列命名为`Z`和`Y`，但如果您需要`Domain`包含，也可以这样做。请注意，这会导致错误，因为您的第二个表中没有`E`定义 - 是这样吗？如果是这样，可以按如下方式调整它以解决不匹配的情况（假设 Excel 2007）：

```
=IFERROR(VLOOKUP(A6,$F$2:$H$5,MATCH(B6,$G$1:$H$1,0)+1,FALSE),"Rank Not Found") 
```

![在此处输入图像描述](../Images/1d9e3c91f73b00f31ba33c3d0aeb793a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T04:26:05.220

您还可以将数据透视表与行中的关键字和列中的域名一起使用。看起来这样可以完成工作并且是一个更强大的解决方案。

# c# - 使用 WCF Ria 的实体框架 ObjectContext 生命周期

> ID：12683121
> 
> 赞同：1
> 
> 时间：2012-10-02T00:49:28.307
> 
> 标签：c#, silverlight, entity-framework-4, wcf-ria-services

我目前正在阅读 70-516 考试（访问数据）的自定进度培训工具包，并且我在关于实体框架的章节中。

我现在谈到 ObjectContext 并继承 IDisposable 进行清理。这带来了一些我在研究时似乎无法得到确切答案的问题。我只是想了解事情是如何运作的。

* * *

**场景：** 我使用 WCF Ria 和实体框架创建了一个 Silverlight 应用程序，并使用 MVVM Lite 模式。我制作了我的 EDMX 并创建了一个名为 FamilyService 的域服务，我在 silverlight 应用程序中将其用作 FamilyContext。我创建了一个名为 GetFamilyMembers 的方法，该方法从 FamilyMember 表中返回数据。

```
[EnableClientAccess()]
public partial class FamilyService : LinqToEntitiesDomainService<FamilyEntities>
{
    public IQueryable<FamilyMember> GetFamilyMembers()
    {
        return this.ObjectContext.FamilyMembers;
    }
} 
```

在我的 ViewModel 中，我在构建 FamilyContext 时创建了一个实例，并在清理时将其设为空。

* * *

1) 当我为 FamilyContext 对象设置 null 时，它会对服务器上的 ObjectContext 做任何事情吗？我问这个是因为我从不在域服务中手动创建或处置它。

2) 我知道当我在 Entity Framework 中运行查询时，它会缓存数据。在 RIA 场景中，数据是缓存在客户端应用程序上的 FamilyContext 上，还是仍然驻留在服务器上的 ObjectContext 上？我只是好奇 ObjectContext 是否拥有缓存，因为我的应用程序中的每个视图模型都创建了自己的 FamilyContext 实例，想知道视图模型是否因清理而减轻，但仍然可以利用缓存。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:24:45.057

你需要多区分一点。

[DomainService](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.domainservice%28v=vs.91%29.aspx) （您的 FamilyService）是您的服务器逻辑的一部分，每次在您的服务上进行请求/方法调用（例如`Query`, `Update`, `Insert`, `Delete`, `Invoke`）时都会创建一个服务实例。这是由 ASP.NET/WCF RIA 服务运行时完成的。

*如果要控制如何创建 DomainServices 实例，则需要实现自己的[DomainServiceFactory](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.domainservice.factory%28v=vs.91%29.aspx)。但这是一个高级场景。*

因此，每个请求都有自己的实例，`DomainService`因此也将`DomainService`拥有自己的`ObjectContext`. 调用完成后，ObjectContext 将被释放。只有在请求期间多次查询 ObjectContext 时才会发生这种情况下的缓存。

[DomainContext](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.client.domaincontext%28v=vs.91%29.aspx)是域服务的有状态客户端表示，提供对服务所有功能的访问。它提供了一个缓存（又名 EntityCollections），其中包含从`DomainService`. 缓存还用于更新或删除加载的实体以及插入新实体。需要提交对缓存的更改，以便调用相应的方法`DomainService`来更新、删除或插入您的实体。

DomainContext 的实例是使用类的构造函数创建的，通常由您来创建和清理 DomainContext 的实例。因此，将 DomainContext 设置为 null 在服务器端没有任何作用。

# c# - C#/WPF 项目中的类在 C++/CLI 项目中不起作用

> ID：12683122
> 
> 赞同：2
> 
> 时间：2012-10-02T00:49:31.193
> 
> 标签：c#, c++, media-player, command-line-interface

我用 C# 开发了一个小媒体播放器，现在我需要将它转换为 C++。我的老师希望我们比较这两种方法，看看哪种方法实际上更好/更快。

我有一个 C# WPF 项目，其中一些类在新的 C++ CLI 项目中使用时似乎无法正常运行。例如，我无法使用 MediaPlayer 类。Visual Studio 2008 找不到`System.Windows.Media::MediaPlayer`. 这是我从 MSDN 得到的：http: [//msdn.microsoft.com/fr-fr/library/system.windows.media.mediaplayer.aspx#Y100](http://msdn.microsoft.com/fr-fr/library/system.windows.media.mediaplayer.aspx#Y100)

关于如何将 C# WPF 项目转换为 C++ CLI 项目的任何想法？我认为这实际上很容易，但由于某些原因，VS2008 找不到我需要的大部分类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:13:42.183

以下应该很接近，但我可以保证它在速度方面不会有太大差异，因为它也是托管代码（我把它全部放在头文件中）：

```
using namespace System;
using namespace System::Collections::Generic;
using namespace System::Linq;
using namespace System::Windows;
using namespace System::Windows::Controls;
using namespace System::Windows::Media;
using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Threading;
using namespace Microsoft::Win32;

namespace VideoThumbnailer
{
    /*---------------------------------------------------------------------------------* 
     * CLASSE WINDOW1 
    /*---------------------------------------------------------------------------------*/ 
    public ref class Window1 : Window
    {
        // Inheritable attached dependency property indicates whether processing is going on 
    public:
        static bool GetProcessing(DependencyObject ^obj)
        {
            return safe_cast<bool>(obj->GetValue(ProcessingProperty));
        }
        static void SetProcessing(DependencyObject ^obj, bool value)
        {
            obj->SetValue(ProcessingProperty, value);
        }
        static initonly DependencyProperty ^ProcessingProperty = DependencyProperty::RegisterAttached("Processing", bool::typeid, Window1::typeid, gcnew FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions::Inherits));

        // Dependency property indicates the file name of the current media 
        property String ^FileName
        {
            String ^get()
            {
                return safe_cast<String^>(GetValue(FileNameProperty));
            }
            void set(String ^value)
            {
                SetValue(FileNameProperty, value);
            }
        }
        static initonly DependencyProperty ^FileNameProperty = DependencyProperty::Register("FileName", String::typeid, Window1::typeid);

        // Member variables 
    private:
        MediaPlayer ^_mediaPlayer;
        Queue<TimeSpan> ^_positionsToThumbnail;
        //private TimeSpan _positionsToThumbnail = new TimeSpan(); 
        DispatcherTimer ^_watchdogTimer;
        array<Byte> ^framePixels;
        array<Byte> ^previousFramePixels;
        float m_iContrast;
        int m_iBrightness;

    public:
        Window1()
        {
            // Initialize window and hook up to events of interest 
            InitializeInstanceFields();
            InitializeComponent();
            _mediaPlayer->MediaOpened += gcnew EventHandler(this, &Window1::HandleMediaPlayerMediaOpened);
            _mediaPlayer->Changed += gcnew EventHandler(this, &Window1::HandleMediaPlayerChanged);
            _watchdogTimer->Interval = TimeSpan::FromSeconds(1);
            _watchdogTimer->Tick += gcnew EventHandler(this, &Window1::HandleWatchdogTimerTick);
        }

#pragma region Utils 
    private:
        void SeekToNextThumbnailPosition()
        {
            // If more frames remain to capture... 
            if (0 < _positionsToThumbnail->Count)
            {
                // Seek to next position and start watchdog timer 
                _mediaPlayer->Position = _positionsToThumbnail->Dequeue();
                _watchdogTimer->Start();
            }
            else
            {
                // Done; close media file and stop processing 
                _mediaPlayer->Close();
                framePixels = nullptr;
                previousFramePixels = nullptr;
                SetProcessing(this, false);
            }
        }

        void CaptureCurrentFrame(bool forceCapture)
        {
            // Capture the current frame as an ImageSource 
            WriteableBitmap ^imageSource = RenderBitmapAndCapturePixels(framePixels);

            // If captured pixels are different than the previous frame... 
            if (forceCapture || !framePixels->SequenceEqual(previousFramePixels))
            {
                // Stop the watchdog timer 
                _watchdogTimer->Stop();

                // Add an Image for the Thumbnail 
                ThumbnailPanel::Children->Clear(); // en effaÃ§ant a chaque fois, on rÃ©Ã©crit au mÃªme endroit
                ThumbnailPanel::Children->Add(gcnew Image {Source = imageSource, ToolTip = _mediaPlayer->Position, MaxWidth = _mediaPlayer->NaturalVideoWidth, MaxHeight = _mediaPlayer->NaturalVideoHeight, Margin = Thickness(0)}); // distance entre chaque image

                // Swap the pixel buffers (moves current to previous and avoids allocating a new buffer for current) 
                array<Byte> ^tempPixels = framePixels;
                framePixels = previousFramePixels;
                previousFramePixels = tempPixels;

                // Seek to the next thumbnail position 
                SeekToNextThumbnailPosition();
            }
        }

        WriteableBitmap ^RenderBitmapAndCapturePixels(array<Byte> ^pixels)
        {
            // Render the current frame into a bitmap 
            DrawingVisual ^drawingVisual = gcnew DrawingVisual();
            RenderTargetBitmap ^renderTargetBitmap = gcnew RenderTargetBitmap(_mediaPlayer->NaturalVideoWidth, _mediaPlayer->NaturalVideoHeight, 96, 96, PixelFormats::Default);
            Rect videoRect = Rect(0, 0, _mediaPlayer->NaturalVideoWidth, _mediaPlayer->NaturalVideoHeight);

//C# TO C++ CONVERTER NOTE: The following 'using' block is replaced by its C++ equivalent:
//          using (var drawingContext = drawingVisual.RenderOpen())
            System::Windows::Media::DrawingContext ^drawingContext = drawingVisual->RenderOpen();
            try
            {
                drawingContext->DrawVideo(_mediaPlayer, videoRect);
            }
            finally
            {
                delete drawingContext;
            }
            renderTargetBitmap->Render(drawingVisual);

            // Copy the pixels to the specified location 
            renderTargetBitmap->CopyPixels(pixels, _mediaPlayer->NaturalVideoWidth * 4, 0);

            // Effectuer un traitement 
            TraiterImage(pixels);

            // Utiliser un "WritableBitMap" 
            WriteableBitmap ^wrBitMap = gcnew WriteableBitmap(renderTargetBitmap);
            Int32Rect wrRect = Int32Rect();
            wrRect.X = safe_cast<int>(videoRect.X);
            wrRect.Y = safe_cast<int>(videoRect.Y);
            wrRect.Width = safe_cast<int>(videoRect.Width);
            wrRect.Height = safe_cast<int>(videoRect.Height);

            wrBitMap->WritePixels(wrRect, pixels, _mediaPlayer->NaturalVideoWidth * 4, 0);

            // Return the bitmap 
            return wrBitMap;
        }

        void TraiterImage(array<Byte> ^pixels)
        {
            try
            {
                for (int i = 0; i < pixels->Length; i++)
                {
                    double tempPixel = pixels[i];

                    tempPixel = (pixels[i] + m_iBrightness) * m_iContrast;

                    if (tempPixel < 0)
                        tempPixel = 0;
                    else if (tempPixel > 255)
                        tempPixel = 255;

                    pixels[i] = Convert::ToByte(tempPixel);
                }
            }
            catch (Exception ^e)
            {
                Console::WriteLine("Une exception c'est produite : " + e->ToString());
            }
        }
#pragma endregion 
#pragma region Events 
        void but_brightnessDown_Click(Object ^sender, RoutedEventArgs ^e)
        {
            if (m_iBrightness > -255)
                m_iBrightness -= 5;

            lb_brightnessValue->Content = m_iBrightness;
        }

        void but_brightnessUp_Click(Object ^sender, RoutedEventArgs ^e)
        {
            if (m_iBrightness < 255)
                m_iBrightness += 5;

            lb_brightnessValue->Content = m_iBrightness;
        }

        void but_constrastDown_Click(Object ^sender, RoutedEventArgs ^e)
        {
            if (m_iContrast > 0.5)
                m_iContrast -= 0.5F;

            lb_contrastValue->Content = m_iContrast;
        }

        void but_contrastUp_Click(Object ^sender, RoutedEventArgs ^e)
        {
            if (m_iContrast < 2)
                m_iContrast += 0.5F;

            lb_contrastValue->Content = m_iContrast;
        }

#pragma endregion 
#pragma region handle 
        void HandleWatchdogTimerTick(Object ^sender, EventArgs ^e)
        {
            // Stop the watchdog timer 
            _watchdogTimer->Stop();

            // Capture the current frame (even if it's not different than the previous) 
            CaptureCurrentFrame(true);
        }

        void HandleOpenFileButtonClick(Object ^sender, RoutedEventArgs ^e)
        {
            // Display open file dialog 
            OpenFileDialog ^openFileDialog = gcnew OpenFileDialog {CheckFileExists = true, Filter = "Video Files (*.wmv;*.dvr-ms;*.mpeg;*.mpg;*.avi)|*.wmv;*.dvr-ms;*.mpeg;*.mpg;*.avi|All Files (*)|*"};

            // Show dialog 
            System::Nullable<System::Boolean> result = openFileDialog->ShowDialog();

            // If a file was chosen... 
            if (result.HasValue && result.Value)
            {
                // Reset state 
                System::String ^fileName = openFileDialog->FileName;
                SetProcessing(this, true);
                ThumbnailPanel::Children->Clear();
                FileName = fileName;

                // Open media file 
                _mediaPlayer->ScrubbingEnabled = true;
                _mediaPlayer->Open(gcnew Uri(fileName));
            }
        }

        void HandleMediaPlayerMediaOpened(Object ^sender, EventArgs ^e)
        {
            // Get details about opened file 
            //var numberFramesToThumbnail = (ThumbnailPanel.Columns * ThumbnailPanel.Rows); 
            System::Double totalMilliseconds = _mediaPlayer->NaturalDuration.TimeSpan::TotalMilliseconds;
//C# TO C++ CONVERTER TODO TASK: There is no equivalent to implicit typing in C++ unless the C++11 inferred typing option is selected:
            var numberFramesToThumbnail = 1 * totalMilliseconds / 67; // le vidÃ©o sera jouÃ© Ã  8 frame par seconde
            framePixels = gcnew array<Byte>(_mediaPlayer->NaturalVideoWidth * _mediaPlayer->NaturalVideoHeight * 4);
            previousFramePixels = gcnew array<Byte>(framePixels->Length);

            // Enqueue a position for each frame (at the center of each of the N segments) 
            for (int i = 0; i < numberFramesToThumbnail; i++)
            {
                _positionsToThumbnail->Enqueue(TimeSpan::FromMilliseconds((((2 * i) + 1) * totalMilliseconds) / (2 * numberFramesToThumbnail)));
                //_positionsToThumbnail = (TimeSpan.FromMilliseconds((((2 * i) + 1) * totalMilliseconds) / (2 * numberFramesToThumbnail))); 
            }

            // Capture the first frame as a baseline 
            RenderBitmapAndCapturePixels(previousFramePixels);

            // Seek to the first thumbnail position 
            SeekToNextThumbnailPosition();
        }

        void HandleMediaPlayerChanged(Object ^sender, EventArgs ^e)
        {
            // If still processing the file (i.e., not done)... 
            if (GetProcessing(this))
            {
                // Capture the current frame 
                CaptureCurrentFrame(false);
            }
        }

    private:
        void InitializeInstanceFields()
        {
            _mediaPlayer = gcnew MediaPlayer();
            _positionsToThumbnail = gcnew Queue<TimeSpan>();
            _watchdogTimer = gcnew DispatcherTimer();
            m_iContrast = 1;
        }
    };
#pragma endregion 
} 
```

# android - ViewPager 在删除并重新添加到 FrameLayout 后未加载项目

> ID：12683123
> 
> 赞同：0
> 
> 时间：2012-10-02T00:49:52.837
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-framelayout

我正在尝试制作一个片段来为用户显示提示。片段的 createView 方法返回一个 ViewPager 并通过 AsyncTask 设置 PagerAdapter。当用户按下按钮时，这个片段会动态地添加到 FragmentActivity 中。如果用户再次按下相同按钮到达最后一项，则从 FragmentActivity 中删除该片段。需要注意的是，我将片段添加到由 android.R.id.content 标识的 FrameLayout 中。

好的，我第一次按下按钮时，它按预期工作。但是我第二次按下按钮时，ViewPager 没有出现。当我使用 View Hierarchy 查看发生了什么时，我在正确的位置看到 ViewPager，但没有任何项目。我调试并注意到调用了 PagerAdapter 的 getCount() ，但从未调用过 getItem 。

这是我的片段的 createView 方法：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  View tipsView = inflater.inflate(R.layout.tip_manager_layout, container, false);
  this.tipPagerAdapter = new TipPagerAdapter(getFragmentManager(), getArguments().getIntArray(TIP_LAYOUT_IDS_KEY));
  this.viewPager = (ViewPager) tipsView.findViewById(R.id.tip_pager);
  this.viewPager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {  
    @Override
    public void onPageSelected(int position) {
      if(position == (tipPagerAdapter.getCount()-1)){
         stop();
      }
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    @Override
    public void onPageScrollStateChanged(int state) {

    }
  });
  // Workaround to set the PagerAdapter within a fragment transaction
  new SetViewPagerAdapterTask().execute();
  return tipsView;
} 
```

我以这种方式添加片段：

```
FragmentTransaction fragmentTransaction = fragmentActivity.getSupportFragmentManager().beginTransaction();
fragmentTransaction.add(android.R.id.content, this, TAG);
fragmentTransaction.commit(); 
```

并以这种方式删除片段：

```
FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
fragmentTransaction.remove(tipManagerFragment);
fragmentTransaction.commit(); 
```

这是被片段膨胀的布局：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tip_pager"
    android:layout_width="fill_parent"
    android:layout_height="175dp"
    android:layout_gravity="center_horizontal|bottom"
    android:paddingBottom="2dp" /> 
```

有人可以帮我解决这个问题吗？

编辑：

有一段时间，我在将片段添加到活动后使用它的显示和隐藏方法。但这不是正确的方法。我不明白为什么我不能用 ViewPager 再次添加片段。ViewPager 已正确添加和删除，但第二次，它根本不显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:12:22.293

想了很久我的问题，我有了以下想法：可能问题与我移除了有ViewPager的fragment有关，但是我没有移除ViewPager使用的fragment。然后，这些片段在 FragmentManager 中继续存在，当新的 ViewPager 尝试使用它们时会发生一些奇怪的事情。

所以，我开始尝试删除所有的碎片。为此，我以这种方式在 FragmentPagerAdapter 中创建了一个方法：

```
public void destroy(FragmentTransaction fragmentTransaction){
    for(Fragment tipFragment : tipFragments){
        fragmentTransaction.remove(tipFragment);
    }
} 
```

适配器正在使用tipFragments 创建其内容。所以，我得到一个 fragmentTransaction 作为参数，我删除了所有这些片段。当我想删除我的片段时，我使用以下代码：

```
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
tipPagerAdapter.destroy(fragmentTransaction);
fragmentTransaction.remove(TipManagerFragment.this);
fragmentTransaction.commit(); 
```

这样，我删除了所有片段，当我再次添加具有 ViewPager 的片段时，一切正常。

# c - 检查我在linux中使用的串口

> ID：12683125
> 
> 赞同：1
> 
> 时间：2012-10-02T00:50:03.873
> 
> 标签：c, linux, linux-kernel, serial-port

我有一个插入的 USB 串行设备插入我的 Windows 并使用 virtualbox 串行映射它，例如 COM1 -> /dev/ttyS0..

现在我怎么知道我的设备正在使用哪个串行端口。我现在知道我正在使用/dev/ttyS0。但是如果我不知道怎么办？.. Linux Debian 在启动时创建这个永久串行端口设备 /​​dev/ttyS0-S3。

我如何测试 /dev/ttyS0 是我在 c 中使用的真实端口。

这是我测试端口是否正确的方法。

```
devfd=open("/dev/ttyS0",O_WRONLY | O_NOCTTY | O_NDELAY);

        if(s_fd<0) exit(1);

        printf("open\n");    //It will always return true printing open because this device is created on boot time and is always available. so i made another check and that is to write to the port(Assuming i have set the permission to have full access to the serial port). if i can write to the port then it means it is really the port im using.

test=write(devfd,"ATZ",4);

if(test<0) printf("Can't write to port: Maybe not the serial port ur using\n");

printf("Device is avaialable\n");  // returns true because we can write to the port 
```

如果有设备插入该串行端口，您能否向我展示 c 中如何检查串行端口的其他示例？

或者在 c 中对以下串行端口 /dev/ttyS0 - /dev/ttyS3 进行测试，如果以下设备已插入它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:21:02.717

正如您正确说明的`Standard Serial ports`那样，它们被映射为 /ttyS0,/ttyS1,...。通用`USB Serial Ports`以及大多数`G3 modems`都可以`/dev/ttyUSB0`通过`/dev/ttyUSB255`

区分串行端口是否与调制解调器“连接”的更好方法是将`ATIx`命令发送到串行端口。这些是[身份](http://en.wikipedia.org/wiki/Hayes_command_set)命令，您可以使用它们来检测设备的型号名称和许多其他详细信息。

首先，您尝试发送`ATIx`不更改波特率的命令。如果您没有收到任何有效的响应（`ASCII`后面的多行文本，`OK<CR><LF>` `ERROR...<CR><LF>`则可以更改波特率并重试。最好先设置端口支持的最大速度，然后再降低它，直到找到调制解调器或结束110 波特或其他合理的限制。

有一种方法可以检测是否很可能没有任何东西连接到串行端口。背后的想法是检测在一段合理的时间内持续存在的帧错误（以选定的波特率接收字节的数十次），比如 2-3 秒。要查看如何启用/禁用帧错误检测，请查看`man termios`. 但是，我不确定在您描述的设置中这是否可行（从 VM 中），因此您必须尝试。

另请查看这篇文章[如何在 Ubuntu 10.10 上将终端连接到串行 USB 设备？](https://stackoverflow.com/questions/5347962/how-to-connect-to-a-terminal-to-serial-usb-device-on-ubuntu-10-10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T16:27:15.193

请注意，根据经验，我发现写入串行端口进行测试可能会产生可怕的后果；当我的脚本挂起（但仅在 ESXi 管理程序上运行时）尝试测试对断开连接的设备的写入时

如果有帮助，这是一种更安全的检查方法

```
cat /proc/tty/driver/serial | \
    grep -v unknown | \
    sed 's/^/ttyS/g' 
```

然后例如检查 ttyS0 的输出

# android - MonoDroid：创建地图片段

> ID：12683126
> 
> 赞同：2
> 
> 时间：2012-10-02T00:50:11.960
> 
> 标签：android, map, mono, xamarin.android, fragment

我正在使用以下代码将**地图**添加到**片段中：**

```
public class MapFragment : Fragment
{
    private MapActivity map=null;
    public override Android.Views.View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        return new FrameLayout(Activity);
    }

    public override void OnActivityCreated(Bundle savedInstanceState)
    {
        base.OnActivityCreated(savedInstanceState);
        map = new MapView(Activity,"XXXXX-v0jt5Z-XXXXXX");
        //HOW TO ADD THE VIEW HERE???
    }
} 
```

我的问题是，在**Mono for Android**中，如何将地图添加到视图中。

注意：在 Java 中我会这样写：

```
((ViewGroup)getView()).addView(map); 
```

脚注：此示例使用 Java MapFragment 源代码中的代码：[https ://github.com/commonsguy/cw-omnibus/blob/master/Maps/NooYawkFragments/src/com/commonsware/android/mapfrags/MapFragment.java](https://github.com/commonsguy/cw-omnibus/blob/master/Maps/NooYawkFragments/src/com/commonsware/android/mapfrags/MapFragment.java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:41:09.613

地图不能按原样添加到片段中，它们需要一个托管环境。

这是 MapFragment 的解决方案：

```
namespace BahaiResearch.com
{
public class MyMapFragment : Fragment
{
    // FROM http://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb
    private static  String KEY_STATE_BUNDLE = "localActivityManagerState";

    public override void OnCreate(Bundle savedInstanceState)
    {
        base.OnCreate(savedInstanceState);

        Bundle state = null;
        if (savedInstanceState != null) {
            state = savedInstanceState.GetBundle(KEY_STATE_BUNDLE);
        }
        mLocalActivityManager = new LocalActivityManager(Activity, true);
        mLocalActivityManager.DispatchCreate(state);
    }

    public override Android.Views.View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        //This is where you specify you activity class
        Intent i = new Intent(Activity, typeof(SteamLocationMapActivity)); 
        Window w = mLocalActivityManager.StartActivity("tag", i); 
        View currentView=w.DecorView; 
        currentView.Visibility = ViewStates.Visible; 
        currentView.FocusableInTouchMode = true; 
        ((ViewGroup) currentView).DescendantFocusability = DescendantFocusability.AfterDescendants;
        return currentView;
    }

    private LocalActivityManager mLocalActivityManager;
    protected LocalActivityManager GetLocalActivityManager() {
        return mLocalActivityManager;
    }   

    public override void OnSaveInstanceState(Bundle outState)
    {
        base.OnSaveInstanceState(outState);
        outState.PutBundle(KEY_STATE_BUNDLE,mLocalActivityManager.SaveInstanceState());
    }

    public override void OnResume()
    {
        base.OnResume();
        mLocalActivityManager.DispatchResume();

    }

    public override void OnPause()
    {
        base.OnPause();
        mLocalActivityManager.DispatchPause(Activity.IsFinishing);
    }

    public override void OnStop()
    {
        base.OnStop();
        mLocalActivityManager.DispatchStop();
    }
}
} 
```

# android - 在移动设备上签名和验证配置文件（iOS + Android）

> ID：12683128
> 
> 赞同：1
> 
> 时间：2012-10-02T00:51:04.827
> 
> 标签：android, ios, mobile

我们有一个应用程序可以在本地存储一些数据，除了用户和我们之外，这些数据对其他任何人都没有价值。所以，我们不需要加密它，但我们确实想确保没有人改变它。

我认为最简单的方法是从文件内容、日期戳和/或大小生成散列。直接做 md5 可能还不够好，因为想要更改数据的人可能只会生成一个新的哈希，所以使用某种密钥会很好。有谁知道一个简单的方法来做到这一点？我想避免使用诸如crypto++之类的库，但不是100%反对它。

哦，我们正在用 C++ 编写应用程序。

也许，我只需要向我们传递给 md5 函数的任何内容添加一些晦涩的数据并完成此操作。你们有什么感想？

重申一下，文件对黑客来说没有有价值的信息，因此没有理由过度安全。我只是想检查设置是否被弄乱了。

谢谢，安格里厄斯。

PS> 有谁知道实现 md5 的好方法，这两者都适用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:55:15.860

如果要对数据进行签名，则需要使用密钥和签名算法。要么是像 RSA 这样的非对称算法，要么是像 AES 这样的对称算法。但是，如果您的应用程序需要使用它签署数据，则需要嵌入密钥或以其他方式提供给应用程序。在这种情况下，潜在的攻击者可以从应用程序中提取它并创建自己的有效签名。您决定这是否适合您，以及您想在多大程度上保护它。

添加“模糊数据”或以其他方式尝试提出自己的算法是一个坏主意，您一定会弄错，尤其是如果您没有该领域的经验。请务必使用标准算法，并考虑如何保护密钥（使用 iOS 密钥链等）。搜索“RSA 签名”或“HMAC”以获取有关如何在实践中执行此操作的更多详细信息。如果您无法利用 C++ 库中的平台加密 API（？），您将需要使用并链接到第三方库，例如 OpenSSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:08:08.263

做我想做的最简单的方法是实现基本的 HMAC (http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)。您甚至可以将此哈希存储在配置文件本身中，虽然这有点复杂，但非常简洁。

事实证明，iOS 和 Android 都内置了库来执行基本的 SHA1、MD5 等。它们也都支持 HMAC。所以对于 iOS，你会做这样的事情：

```
#include <CommonCrypto/CommonHMAC.h>

string createHMAC( string key, string text )
{
    string result;

    const char *cKey  = key.c_str();
    const char *cData = text.c_str();
    unsigned char cHMAC[CC_SHA1_DIGEST_LENGTH];

    CCHmac( kCCHmacAlgSHA1, cKey, strlen(cKey), cData, strlen(cData), cHMAC );

    NSMutableString* output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];
    for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++)
    {
        [output appendFormat:@"%02x", cHMAC[i]];
    }
    result = string( [output UTF8String] );

    return result;
} 
```

由于这是 Objective-c 代码，您可以将其编译为 Objective-C++ 并且它会工作。如果您的应用不需要任何高级密码学，则无需使用任何框架。

干杯，安格里斯

# ios - ObjC：[self.items enumerate...] 是每次在块内生成的 self.item（派生）吗？

> ID：12683132
> 
> 赞同：0
> 
> 时间：2012-10-02T00:51:17.533
> 
> 标签：ios, objective-c-blocks, enumeration

在我的一个类中，我有一个名为 items 的派生属性，它基本上类似于：

```
- (NSArray *)items
{
    [self.unsortedSet.allValues sortedArrayUsingDescriptor:...];
} 
```

然后在其他地方：

```
[self.items enumerateUsingBlock...{
    // do something with item
}] 
```

在这种情况下，如果 self.items 有 X 个项目，那么枚举块是否会生成 self.items X 次？或者更安全的是：

```
NSArray *sortedItems = self.items;
[sortedItems enumerateUsingBlock...{}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:54:13.357

> 那么枚举块会生成 self.items X 次吗？

不，只有一次。这是为了语义和效率。

> 还是这样更安全……</p>

语义取决于您的实现。

# php - 用于编写用于 android 消费的 PHP Web 服务的库

> ID：12683134
> 
> 赞同：-1
> 
> 时间：2012-10-02T00:51:17.187
> 
> 标签：php, android

> **可能重复：**
> [提供 API 访问网站的框架？](https://stackoverflow.com/questions/4603975/framework-for-providing-api-access-to-website)

我需要用 PHP 编写一个服务。android/iphone 客户端将通过 url 使用服务器，例如这样

```
http://www.myservice.com/query.php?param1=a&param2=2... 
```

*   服务器将返回数据
*   客户端将数据推送到服务器
*   可能有大量客户端同时访问，因此性能是关键

我想使用我的android客户端容易理解的数据格式。换句话说，我不想重新发明轮子并创建自己的格式和解析，而是更愿意使用任何存在的库。是否有一个框架可以用来抽象数据获取和推送的通信机制？

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:51:54.287

作为 Restler 的作者，我建议您可以尝试[使用 Restler 3](https://github.com/Luracast/Restler/tree/v3)，原因如下

*   它专门用于创建 API
*   它为您处理媒体类型转换并支持许多媒体类型，包括
    *   JSON
    *   Plist（XML 和二进制）
    *   XML
*   附带许多[示例](http://bit.ly/r3-examples)以供入门。
*   [Restler API Explorer](https://github.com/Luracast/Restler-API-Explorer)会自动记录您的 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:25:35.587

我开发了一个类，它是 PHP 原生 SoapServer 类的 REST 等价物。

您只需包含 RestServer.php 文件，然后按如下方式使用它。

```
class Hello
{
  public static function sayHello($name)
  {
    return "Hello, " . $name;
  }
}

$rest = new RestServer(Hello);
$rest->handle(); 
```

然后你可以像这样从 Java 调用：

```
http://myserver.com/path/to/api?method=sayHello&name=World 
```

（请注意，在查询字符串中提供参数的顺序无关紧要。此外，参数键名和方法名不区分大小写。）

[在这里得到它](http://jakesankey.com/blog/2012/09/php-simple-rest-server/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T01:00:32.440

好吧，使用 mvc framework(yii, ci, ...) 并从控制器直接打印`json_encode($object)`。

它会将 json 数据返回到浏览器，并在任何地方使用它（计算机、机器人、iphone、...、铁：D）。解决方案是json。只需以 json 格式共享对象，因此任何人都可以将其映射到它的首选对象中

这里有[一些](http://docs.fuelphp.com/general/controllers/rest.html)你可以看看的东西

# ssh - 尽管 ssh-agent 已启动，但 SSH-add 不是持久事件

> ID：12683135
> 
> 赞同：0
> 
> 时间：2012-10-02T00:51:27.253
> 
> 标签：ssh, ssh-agent

我做了ssh-add。在会话期间它工作正常，但是当我退出并使用 ssh 重新连接到服务器时，它不再工作 ssh-add -l 说：没有身份。

我确实使用 eval $(ssh-agent) 在我的 .bash_profile 中启动了 ssh-agent。

任何想法我可以做些什么来保持身份？

**// 编辑** 所以这是我的场景。我正在使用 ssh 连接到我的网络空间。我想使用 git pull 从 github 中提取数据。我添加了到 github 的连接并且 git pull 工作正常。但它要求输入密码。执行 ssh-add 并添加密码可以停止，但仅适用于当前会话。

我必须使用类似的东西来启动 ssh-agent，`eval $(ssh-agent)`因为它不会在服务器上自动启动。

我遇到的主要问题是，我需要一个脚本来执行来自 github 的请求调用的 git pull，所以我不能给它密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:46:57.693

如果您在会话开始时生成代理，那么它会在您断开连接时死亡。您可以连接到使代理保持活动状态的屏幕或 byobu/tmux 服务器（如果您像这样连接，则可以跳过 bash 的实例`ssh user@hostname -t 'byobu'`）。

否则，请在机器启动时启动代理，这样您的会话来来去去就不会影响它。

编辑：您还可以从*本地*计算机转发您的代理。如果您碰巧在两台机器上都有相同的密钥，这将非常有效。在你的尝试这样的事情`~/.ssh/config`：

```
Host whatever
    Hostname        whatever.com
    User            username
    ForwardAgent    yes 
```

`ssh whatever`如果您不熟悉该配置文件，请使用 调用它。

# iphone - 更改 UIBarButtonItem 的 UIToolbar 阴影颜色

> ID：12683141
> 
> 赞同：5
> 
> 时间：2012-10-02T00:52:14.297
> 
> 标签：iphone, objective-c, ios, ipad

我`UIToolbar`通过改变它的色调和它的`UIBarButtonItem`子视图的色调来设计它。除了我找不到如何将**单个条形按钮项目**的阴影颜色从深色更改为浅色（参见示例，条形按钮项看起来模糊）之外，我让它工作了：

![黑暗而不是光影](../Images/9b0811eb6e773ddfadd638ffe5b5bcf3.png)

如何将`UIBarButtonItem`with 样式的阴影更改`UIBarButtonItemStylePlain`为白色？我在[这里](http://cl.ly/3r0N2V2B1h0E)上传了一个示例项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:41:36.143

1.  在[UIBarButtonItem 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)中没有提到“影子”这个词
2.  您使用图像作为阴影，而不是`UIColor`
3.  *一些源代码示例可以在@ [cocoaControls.com找到](http://www.cocoacontrols.com/platforms/ios/controls)*

* * *

**对于[UIBarButtonItem 外观](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)，只能更改 2 个图像和颜色：**

**setBackgroundImage:forState:barMetrics：**
设置给定状态和条形指标的背景图像。

```
- (void)setBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state barMetrics:(UIBarMetrics)barMetrics 
```

* * *

**对于`UIToolBar`：**

1.  要添加您自己的自定义阴影[，请查看此 StackOverflow 帖子](https://stackoverflow.com/questions/5595878/how-can-i-add-attached-drop-shadows-to-uinavigationbar-and-uitoolbar)
2.  要使用可可预定义的函数[，请查看 UIToolBar 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html)

**setShadowImage:forToolbarPosition：**
设置用于给定位置的工具栏阴影的图像。

```
(void)setShadowImage:(UIImage *)shadowImage forToolbarPosition:(UIToolbarPosition)topOrBottom 
```

**shadowImageForToolbarPosition：**
返回用于给定位置的工具栏阴影的图像。

```
(UIImage *)shadowImageForToolbarPosition:(UIToolbarPosition)topOrBottom 
```

* * *

**我不知道还能说什么，UIBarButtonItem 没有影子方法。**
我希望这是不言自明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:00:37.193

最终的解决方案是添加`UIButton`包含在中的按钮，`UIBarButtonItem`并在用于`UIButton`图像的 PNG 中包含任何阴影。

# c# - 图形 (2D) 编程中的比例因子

> ID：12683142
> 
> 赞同：1
> 
> 时间：2012-10-02T00:52:39.253
> 
> 标签：c#, autocad, cad, solidworks

当尝试设计/实现图形环境以支持缩放（例如英寸和厘米）时，必须考虑哪些要求？

那么应该如何解决呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:19:34.660

可能的方法：

*   为内部表示选择一个测量单位
*   定义和使用接口，让您将内部单位转换为 UI 字符串（即一组成员，如`FormatLength(double); FormatArea(double); FormatSpeed(double)`）
*   提供接口的必要实现（即 MetricFormats 和 UsFormats）
*   提供一种方法来选择要使用的接口的实现。

# ruby-on-rails - Compass 可以从 app/assets/images 之外的文件夹中的图像生成精灵吗？就像在 lib/assets/images 甚至 Gems 中一样？

> ID：12683144
> 
> 赞同：0
> 
> 时间：2012-10-02T00:53:11.940
> 
> 标签：ruby-on-rails, asset-pipeline, compass-sass

我的印象是 Compass 可以在 Rails 3.1+ 资产管道环境中从图像文件生成精灵；但是，我无法让它工作。

在我的 application.scss 文件中，我有以下代码：

```
@import "foo/*.png";
@include all-foo-sprites; 
```

如果我有`foo`目录`app/assets/images`，这工作得很好，但如果我有它，`lib/assets/images`或者`vender/assets/images`它根本不起作用。

我不断收到错误：

```
No files were found in the load path matching "foo/*.png". Your current load paths are: /Users/xxxxxx/app/assets/images 
```

但我知道这`vender/assets/images/foo` **是**在加载路径中，因为`image-url('foo/bar.png')`工作得很好。

我**真正**想要的是将图像放在 Gem 中（因为它们在我的许多应用程序中共享），但我也无法让它工作。

有谁知道这是否可能？我知道 compass-rails 支持资产管道，但我找不到任何提到支持此特定功能的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:28:59.157

看起来默认情况下 compass-rails 不会在正常资产管道目录中查找精灵，这不是我所期望的，但如果您需要它可以轻松添加。

我刚刚在 compass 初始化程序中添加了以下代码，它基本上将所有资产管道加载路径添加到 Compass 的 sprite_load_path。

```
Compass.add_configuration({:sprite_load_path => Compass.configuration.sprite_load_path + Rails.application.config.assets.paths}, 'sprites') 
```

# arrays - 迭代一个 使用 MooTools 列出

> ID：12683154
> 
> 赞同：0
> 
> 时间：2012-10-02T00:53:53.733
> 
> 标签：arrays, mootools, each, loops

我正在尝试迭代下面的列表：

```
<ul>
  <li class="tab">Tab 1</li>
  <li class="tab">Tab 2</li>
  <li class="tab">Tab 3</li>
</ul> 
```

使用以下 MooTools 脚本：

```
$$('ul').getElements().each(function(el,i) {
    alert(i);
}); 
```

我只看到“0”出现在屏幕上，正如我所期待的“0”、“1”、“2”。任何人都可以解释这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:10:34.573

`$$('ul')`返回一个`ul`元素列表。如果您随后调用`getElements`该列表，则需要指定标签名称。`li`这将为您提供元素列表的列表： `[[li, li, li]]`.
因此，如果要迭代`li`元素，可以执行以下操作：

```
 $$('ul').getElements('li')[0].each(function (el, i) { alert(i); }); 
```

或者：

```
$$('ul li').each(function(li, index){
    // faster. 
}); 
```

# c++ - 具有整数参数的模板的部分特化

> ID：12683165
> 
> 赞同：14
> 
> 时间：2012-10-02T00:55:52.657
> 
> 标签：c++, template-specialization

我正在尝试做一些部分专业化的东西。我有一个`tuple`，我想从某个元素索引迭代到第一个元组索引，从`tuple`. 这似乎是使用递归模板实例化的简单问题。

问题是，我似乎无法让递归工作。为了停止递归，我需要在元组索引 0 处部分专门化模板函数。这看起来很简单，但它不起作用。

注意：我已经`tuple`从示例中删除了实际内容，因为它无关紧要；这是模板专业化不起作用。

```
template<int Index, typename Tpl>
size_t CalcInterleaveByteOffset(const Tpl &t)
{
    size_t prevOffset = CalcInterleaveByteOffset<Index - 1>(t);
    return prevOffset + sizeof(Tpl);
}

template<typename Tpl>
size_t CalcInterleaveByteOffset<0, Tpl>(const Tpl &t)
{
    return 0;
} 
```

[GCC 只是说不允许这种专业化。](http://ideone.com/N0Lu0)真的吗？有没有其他方法来处理这种事情？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T01:05:18.587

通常，函数不允许任何形式的部分模板特化。但是，它允许用于课程。所以解决方案只是将您的函数移动到模板化持有者类的静态成员。

如果您需要推断模板参数，则可以创建一个调用模板类的包装函数。

结果是这样的：

```
template<int Index, typename Tpl>
class CalcInterleaveByteOffsetImpl
{
  static size_t CalcInterleaveByteOffset(const Tpl &t)
  {
    // This is OK it calls the wrapper function
    // You could also do 
    // size_t prevOffset = CalcInterleaveByteOffsetImpl<Index - 1, Tpl>::CalcInterleaveByteOffset(t);
    size_t prevOffset = ::CalcInterleaveByteOffset<Index - 1>(t);
    return prevOffset + sizeof(Tpl);
  }
};

template<typename Tpl>
class CalcInterleaveByteOffsetImpl<0, Tpl>
{
  static size_t CalcInterleaveByteOffset(const Tpl &t)
  {
    return 0;
  }
};

template<int Index, typename Tpl>
size_t  CalcInterleaveByteOffset(const Tpl &t)
{
   return CalcInterlaveByteOffsetImpl<Index,Tpl>::CalcInterleaveByteOffset(t);
} 
```

# linux - 测量 linux 内核从启动到用户空间所用的时间

> ID：12683169
> 
> 赞同：3
> 
> 时间：2012-10-02T00:56:28.487
> 
> 标签：linux, linux-kernel, kernel, embedded-linux, kernel-module

是否有基于内核检测的方法来测量内核在启动期间转移到用户空间的时间？我可以将 printk 与计时信息一起使用，但我只是不确定该 printk 的确切放置位置，以便观察内核何时转移到用户空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:20:17.280

由`start_kernel()`体系结构特定代码（arch/architecture_type）调用。内核加载后，它会调用第一个用户空间进程，即 /sbin/init（或更新版本上的 systemd）。`init_post()`这两个函数都在*init/main.c*中定义。

您可能想阅读此[博客](http://duartes.org/gustavo/blog/post/kernel-boot-process)以获取有关启动过程的详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T21:20:53.077

**`/dev/kmsg`创建您自己的 init 并立即记录到**

使用 a 破解内核代码的更简单的替代方法`printk`是使用以下 init：

```
#include <stdio.h>
#include <unistd.h>

int main(void) {
    FILE *fp;
    fp = fopen("/dev/kmsg", "w");
    fputs("hello init\n", fp);
    fclose(fp);
    while (1)
        sleep(0xFFFFFFFF);
} 
```

并使用内核命令行参数：

```
init=/path/to/myinit printk.devkmsg=on printk.time=y 
```

现在就在引导结束和 init 启动之后，我们看到一条消息：

```
[<timestamp>] hello init 
```

这不是 100% 精确的，因为您将失去一些 CPU 周期`fopen`，但我认为这并不重要。

最小的可重复设置来测试它：

*   [https://github.com/cirosantilli/linux-kernel-module-cheat/tree/88cd83cd020af12b987afab5e990099f7efa2107#custom-init](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/88cd83cd020af12b987afab5e990099f7efa2107#custom-init)
*   [https://github.com/cirosantilli/linux-kernel-module-cheat/blob/88cd83cd020af12b987afab5e990099f7efa2107/kernel_module/user/init_dev_kmsg.c](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/88cd83cd020af12b987afab5e990099f7efa2107/kernel_module/user/init_dev_kmsg.c)

# aviarc - 如何将数据规则附加到数据代理的密钥生成操作？

> ID：12683171
> 
> 赞同：1
> 
> 时间：2012-10-02T00:56:58.130
> 
> 标签：aviarc

我有一个 Workflow SQL 数据代理，其中 ID 字段是带有附加字符填充的序列号，即**P001**或**TM234**。

我已将 ID 生成查询定义为：

```
<key-generation field="id" query="queries/asset-patent-get-id" /> 
```

它只是根据提供的参数检索下一个序列值。因此，对于每条创建的记录，我需要确保当 ID 存储在数据库中时，它已经按照所需的规则填充并存储为字符串而不仅仅是数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:50:22.023

首先要注意：数据规则不绑定到*操作，*而是绑定到*字段。*因此，在这种情况下，只需将生成密钥的操作视为检索序列中的下一个数字，仅此而已。一旦检索到序列值，适当的绑定数据规则应该能够在序列值被持久化之前对其进行格式化。

您应该能够定义如下数据规则：

```
<!-- datarules/format-asset-patent-id/definition.xml -->
<data-rule name="format-asset-patent-id"
           factory-class="com.aviarc.framework.datarule.xml.DefaultXMLDataRuleProviderFactoryImpl"
           datarule-class="com.aviarc.framework.datarule.workflow.WorkflowDataRule">
    <parameters>
        <parameter name="field" mandatory="y"/>
    </parameters>
    <event name="onBeforeDatasetPersisted" workflow="workflows/format-asset-patent-id" field="{@field}"/>
</data-rule> 
```

然后在 format-asset-patent-id 工作流程中，您可以处理 id 的格式。（**注意：**我没有机会测试 onBeforeDatasetPersisted 事件是在执行密钥生成操作之前还是之后触发。）

然后您可以将其与数据绑定绑定，例如：

```
<!-- databindings/asset-patent.xml -->
<databinding databroker="asset-patent"
             factory-class="com.aviarc.framework.databinding.basic.BasicDataBindingFactoryImpl">
    <on-dataset-bound>
        <data-rules>
            <format-asset-patent-id field="id"/>
        </data-rules>
    </on-dataset-bound>
</databinding> 
```

# .net - 如何使用 vb.net 将数据表分成 N 部分？

> ID：12683172
> 
> 赞同：-1
> 
> 时间：2012-10-02T00:57:33.387
> 
> 标签：.net, vb.net, datatable

我想将数据表拆分为 N 个部分。让我们假设 N = 5。

如果 datatable.rows.count 为 13，则数据表应拆分为 3 个集合，其中：

*   第一组有 5 条记录。
*   第二组有 5 条记录和
*   第三组有 3 条记录。

如果 datatable.rows.count 为 16，则数据表应拆分为 4 个集合，其中：

*   第一组有 5 条记录
*   第二组有 5 条记录
*   第三组有 5 条记录和
*   第四组有 1 条记录。

这怎么可能 ？在搜索网络时，我知道它可以像这样[使用 LINQ 将集合拆分为“n”部分？](https://stackoverflow.com/questions/438188/split-a-collection-into-n-parts-with-linq)

但我想做一个简单的函数，传递数据表和 N 的值。

在循环内循环是令人困惑的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:22:20.143

```
'create a dtb for demo
Dim dtbSource As New DataTable("MyDataTable")
dtbSource.Columns.Add("Column1", GetType(String))
dtbSource.Columns.Add("Column2", GetType(String))
dtbSource.Columns.Add("Column3", GetType(String))
dtbSource.Rows.Add("1", "2", "3")
dtbSource.Rows.Add("2", "2", "3")
dtbSource.Rows.Add("3", "2", "3")
dtbSource.Rows.Add("4", "2", "3")
dtbSource.Rows.Add("5", "2", "3")
dtbSource.Rows.Add("6", "2", "3")
dtbSource.Rows.Add("7", "2", "3")
dtbSource.Rows.Add("8", "2", "3")
dtbSource.Rows.Add("9", "2", "3")
dtbSource.Rows.Add("10", "2", "3")
dtbSource.Rows.Add("11", "2", "3")
dtbSource.Rows.Add("12", "2", "3")
dtbSource.Rows.Add("13", "2", "3")
'now split the datatable
Dim n As Integer = 5 'number of rows per datatable
Dim dst As New DataSet("Output")
For i As Integer = 0 To dtbSource.Rows.Count - 1 Step n
  Dim intLastRow As Integer = i + n - 1
  If intLastRow > dtbSource.Rows.Count - 1 Then intLastRow = dtbSource.Rows.Count - 1
  Dim dtbNew As DataTable = dtbSource.Clone 'copy structure of original datatable 
  dtbNew.TableName = dtbSource.TableName & "_" & (i \ n).ToString
  For j As Integer = i To intLastRow
    dtbNew.ImportRow(dtbSource.Rows(j))
  Next j
  dst.Tables.Add(dtbNew)
Next i
'the split datatables are available in dst.Tables
MsgBox(dst.Tables(1).Rows(2).Item(0).ToString) 'table 2, row 3, column 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:34:34.223

这可能对您想要的有所帮助

```
Dim page As Integer = 0
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim data As New DataClasses1DataContext
    Dim m = (From master In data.Masters Select master).Skip(page * 5).Take(5)
    DataGridView1.DataSource = m
    page += 1
End Sub 
```

# ruby-on-rails - 将字符串插入到 ruby 方法的一部分

> ID：12683173
> 
> 赞同：3
> 
> 时间：2012-10-02T00:57:34.570
> 
> 标签：ruby-on-rails, ruby

我的项目可以是红色、黄色、绿色（比这更复杂）等几个属性之一，它们有相应的 is_red、is_yellow、is_green 布尔值。

我想要一个 api 函数来更改我传递的这个值，例如：

```
id: 12
type: red 
```

在我的功能有：

```
item=Item.find(id)
if item.is_ + type == true
  item.is_ + type=false
end 
```

我该怎么做？

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T00:59:41.753

采用[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

```
item = Item.find(id)

if item.send(:"is_#{type}") == true
  item.send(:"is_#{type}=", false)
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T05:39:36.747

不使用 Ruby 就不能动态地构建变量名`eval`，这会很脏，但是很实用。

您可以`method_missing`在 BlankSlate 对象上使用来捕获自由文本方法调用并将它们作为一个大的脏案例语句来处理。

最优雅的解决方案是哈希，因为键可以很容易地动态组合。

# php - 编译 PHP 扩展 - 如何摆脱“putwchar() 不一致的 dll 链接”警告

> ID：12683174
> 
> 赞同：0
> 
> 时间：2012-10-02T00:57:43.417
> 
> 标签：php, c, visual-studio, php-extension, stdio

我正在尝试使用 Visual Studio Express 为 Windows 创建一个 PHP 扩展。我从头开始扩展并且只有`test.cpp`文件，我在其中编写了一些代码。尽管代码编译并运行良好，但在编译期间它产生了几个警告，我宁愿摆脱。

我将文件减少到一行，它重现了这些警告：

```
#include "php.h" 
```

构建这样一个空的 DLL 我得到：

```
>Compiling...
>test.cpp
>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\stdio.h(620) : warning C4273: 'getwchar' : inconsistent dll linkage
>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\stdio.h(435) : see previous definition of 'getwchar'
>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\stdio.h(622) : warning C4273: 'putwchar' : inconsistent dll linkage
>        C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\stdio.h(437) : see previous definition of 'putwchar' 
```

**解决这两个警告的正确方法是什么？**

我试图调查这个问题，并检查我是否忘记了一些预处理器指令。但我找不到任何适用于`stdio.h`适当影响的东西。

这是我在项目配置中设置的预处理器指令列表：

```
WIN32
NDEBUG
_WINDOWS
_USRDLL
TEST_EXPORTS
PHP_WIN32
ZEND_WIN32
ZTS=1
ZEND_DEBUG=0

Inherited values:
_WINDLL
_UNICODE
UNICODE 
```

它看起来与其他 PHP 项目非常相似。我也研究了`stdio.h`，但没有找到合适的预处理器指令来设置。

因此，主要问题分为较小的问题：

1.  PHP 作者的意图是什么——我应该将这些 函数`getwchar()`和`putwchar()`函数导入还是内联声明？`stdio.h`试图同时做到这一点。
2.  我错过了一些要设置的预处理器指令吗？
3.  我是否必须从 PHP 源中包含一些特定于 win32 的头文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-17T20:49:15.647

我解决它添加 math.h 和 wchar.h 看到[https://jojokahanding.wordpress.com/tag/php-extension/](https://jojokahanding.wordpress.com/tag/php-extension/)以获得更好的解释

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T18:32:36.497

最终我设法找到了问题 - 那是**.cpp**扩展名，它导致文件被编译为 C++，而 PHP 是用纯 C 编写的。

最简单的解决方案是将文件重命名为具有**.c**扩展名。而且，当然，用 C 编写源代码。

# php - 使用 jquery/ajax/php/oop codeigniter 的聊天应用程序

> ID：12683175
> 
> 赞同：1
> 
> 时间：2012-10-02T00:57:47.677
> 
> 标签：php, jquery, ajax, codeigniter

嗨，这个问题与我最近发布的一个问题有关，我试图找到至少一些帮助来解决整个问题。下面的代码不是我的，我不得不修复它只是为了让它工作到现在的程度，但问题是 _get_chat_messages 中的算法继续执行 else 条件。这没有意义，因为Mysql中有聊天消息数据。我正在尝试使此源代码正常工作，希望它能引导我朝着正确的方向前进，自动刷新聊天消息内容，而无需强制浏览器客户端刷新或重定向标头。

是什么导致 _get_chat_messages 执行 else 条件而不考虑 if 条件。if 条件似乎评估为 TRUE，这是没有意义的。

非常感谢任何帮助。谢谢。

//JQUERY/AJAX:

```
$(document).ready(function() {

setInterval(function() { get_chat_messages(); } , 2500);

$("input#chat_message").keypress(function(e) {
    if (e.which == 13) {
        $("a#submit_message").click();
        return false;
    }
});

$("#submit_message").click(function() {
    var chat_message_content = $("input#chat_message").val();
    //this if condition seems to be ignored not sure why?
    if (chat_message_content == "") { return false; }

    $.post(base_url + "chat/ajax_add_chat_message", { chat_message_content : chat_message_content, chat_id : chat_id, user_id : user_id }, function(data) {

        if (data.status == 'ok')
        { 
            var current_content = $("div#chat_viewport").html();
            $("div#chat_viewport").html(current_content + data.message_content);

        }
        else
        {
            // there was an error do something 

        }

    }, "json");

    $("input#chat_message").val("");

    return false;
});

function get_chat_messages()
{

    $.post(base_url + "chat/ajax_get_chat_messages", { chat_id : chat_id }, function(data) {

        if (data.status == 'ok')
        {
            var current_content = $("div#chat_viewport").html();

            $("div#chat_viewport").html(current_content + data.message_content);

        }
        else
        {
            // there was an error do something 

        }

    }, "json");
}

get_chat_messages();

  }); 
```

//控制器：

```
 class Chat extends CI_Controller {

public function __construct()
{
    parent:: __construct();
    $this->load->model('chat_model');   
}

public function index()
{
    /* send in chat id and user id */

    $this->view_data['chat_id'] = 1;

    // check they are logged in
    if (! $this->session->userdata('logged_in')) {
        redirect('user/login');
    }

    $this->view_data['user_id'] = $this->session->userdata('user_id');

    $this->session->set_userdata('last_chat_message_id_' .    $this->view_data['chat_id'], 0);

    $this->view_data['page_title'] = 'web based chat app :)';
    $this->view_data['page_content'] = 'view_chat';
    $this->load->view('view_main', $this->view_data);   
}

public function ajax_add_chat_message()
{

    /* Scalar Variable data that needs to be POST'ed to this function
     * 
     * chat_id
     * user_id
     * chat_message_content
     *       * 
     */

    $chat_id = $this->input->post('chat_id');
    $user_id = $this->input->post('user_id');
    $chat_message_content = $this->input->post('chat_message', TRUE);

    $this->chat_model->add_chat_message($chat_id, $user_id,   $chat_message_content);

    // grab and return all messages
    $this->ajax_get_chat_messages($chat_id);
}

public function ajax_get_chat_messages($chat_id)
{
    $chat_id = $this->input->post('chat_id');

    echo $this->_get_chat_messages($chat_id);
}

private function _get_chat_messages($chat_id)
{
    $last_chat_message_id = (int)$this->session->userdata('last_chat_message_id_' . $chat_id); 

    $chat_messages = $this->chat_model->get_chat_messages($chat_id, $last_chat_message_id);

    if ($chat_messages->num_rows() > 0)
    {
        // store the last chat message id
        $last_chat_message_id = $chat_messages->row($chat_messages->num_rows() - 1)->chat_message_id;

        $this->session->set_userdata('last_chat_message_id_' . $chat_id, $last_chat_message_id);

        // we have some chat let's return it

        $chat_messages_html = '<ul>';

        foreach ($chat_messages->result() as $chat_message)
        {
            $li_class = ($this->session->userdata('user_id') == $chat_message->user_id) ? 'class="by_current_user"' : '';

            $chat_messages_html .= '<li ' . $li_class . '>' . '<span class="chat_message_header">' . $chat_message->chat_message_timestamp . ' by ' . $chat_message->name . '</span><p class="message_content">' .  $chat_message->chat_message_content . '</p></li>';
        }

        $chat_messages_html .= '</ul>';

    $result = array('status' => 'ok', 'content' =>    $chat_messages_html);
        //header('Content-Type: application/json',true);
        return json_encode($result);
        exit();
    }
    else
    {
        // we have no chat yet
        $result = array('status' => 'no chat', 'content' => '');
        //header('Content-Type: application/json',true);
        return json_encode($result);
        exit();
    }
 }

  } 
```

//模型：

```
 class chat_model extends CI_Model {

public function __construct()
{
    parent::__construct();
}

public function add_chat_message($chat_id, $user_id, $chat_message_content)
{
    $query_str = "INSERT INTO chat_messages (chat_id, user_id,  chat_message_content) VALUES (?, ?, ?)";

    $this->db->query($query_str, array($chat_id, $user_id, $chat_message_content));
}

public function get_chat_messages($chat_id, $last_chat_message_id = 0)
{
    $query_str = "SELECT
                cm.chat_message_id,
                cm.user_id,
                cm.chat_message_content,
                DATE_FORMAT(cm.create_date, '%D of %M %Y at %H:%i:%s') AS chat_message_timestamp,
                u.name
                FROM chat_messages cm
                JOIN users u ON cm.user_id = u.user_id
                WHERE cm.chat_id = ?
                and cm.chat_message_id > ?
                ORDER BY cm.chat_message_id ASC";

    $result = $this->db->query($query_str, array($chat_id, $last_chat_message_id));

    return $result;
}
} 
```

//查看文件因此 VIEW_CHAT.PHP

```
 <html>
    <head>
    <script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="<?php echo base_url() . 'public/';?>chat.js">   
    </script>
    <script type="text/javascript">

    var base_url = "<?php echo base_url();?>";

    var chat_id = "<?php echo $chat_id; ?>";
    var user_id = "<?php echo $user_id; ?>";

    </script>
    </head>
    <body>

     <style type="text/css">

     div#chat_viewport {
 font-family:Verdana, Arial, sans-serif;
 padding:5px;
 border-top:2px dashed #585858;
 min-height:300px;
 color:black;
 max-height:650px;
 overflow:auto;
 margin-bottom:10px;
 width:750px;
}

    div#chat_viewport ul {
list-style-type:none;
padding-left:10px;
  }

    div#chat_viewport ul li {
margin-top:10px;
width:85%;
  }

    span.chat_message_header {
font-size:0.7em;
font-family:"MS Trebuchet", Arial, sans-serif;
color:#547980;
 }

    p.message_content {
margin-top:0px;
margin-bottom:5px;
padding-left:10px;
margin-right:0px;
}

    input#chat_message {
margin-top:5px;
border:1px solid #585858;
width:70%;
font-size:1.2em;
margin-right:10px;
  }

   input#submit_message {
font-size:2em;
padding:5px 10px;
vertical-align:top;
margin-top:5px;
 }

    div#chat_input { margin-bottom:10px; }

    div#chat_viewport ul li.by_current_user span.chat_message_header {
color:#e9561b;
}

   </style>

  <h1>Let's do some chatting :D</h1>

  <div id="chat_viewport">

  </div>

  <div id="chat_input">
  <?php echo form_open('chat/ajax_add_chat_message'); ?>
  <input id="chat_message" name="chat_message" type="text" value="" tabindex="1" />
  <?php echo form_submit('submit_message','submit_message'); ?>
  <?php echo anchor('#', 'Say it', array('title' => 'Send this chat message', 'id' => 'submit_message'));?>
<div class="clearer"></div>
  <?php echo form_close(); ?>
  </div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:16:39.053

我不确定，但我感觉您从服务器收到的 json 格式不正确。看到这个：[jQuery 不会从 AJAX 查询中解析我的 JSON](https://stackoverflow.com/questions/249692/jquery-wont-parse-my-json-from-ajax-query)

# playframework-2.0 - 与 Play 1.2 的 @Before 和 @After 等效的 Play 2.0 是什么？

> ID：12683176
> 
> 赞同：9
> 
> 时间：2012-10-02T00:57:54.617
> 
> 标签：playframework-2.0

当我使用 Play 1.2 时，我能够使用 @Before 或 @After （以及其他......）注释任何控制器内的一些方法，以便在该控制器内的每个请求之前或之后执行一个方法。

如何在 Play 2.0 中做到这一点？

我阅读了一些有关 Global 对象的信息，但它似乎不是我想要的。此外，对于我想做的事情来说，动作组合似乎太复杂了。我希望看到更简单的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T06:30:42.637

不幸的是，您必须对 使用[动作组合](http://www.playframework.org/documentation/2.0.3/JavaActionsComposition)，`@Before`而`@After`.

对于，我会在结束动作结束时`@After`编写自己的方法；`after`像这样的东西：

```
public static Result index() {
    ....
    Result result = ...;
    return after(result);
}

protected static Result after(Result result) {
    ...
    Result afterResult = ...,
    return afterResult

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-19T05:45:24.050

```
public class Logging {

    @With(LogAction.class)
    @Target({ElementType.TYPE, ElementType.METHOD})
    @Retention(RetentionPolicy.RUNTIME)
    public @interface Logs {

    }

    public static class LogAction extends Action<Logs> {

        private void before(Context ctx) { 
            System.out.println("Before action invoked");
        } 

        private void after(Context ctx) { 
            System.out.println("After action invoked");
        } 

        public F.Promise<Result> call(Http.Context context) throws Throwable {
            before(context); 
            Promise<Result> result = delegate.call(context);
            after(context);
            return result; 
        }
    }

} 
```

在控制器中使用 @Logs 进行注释。

# objective-c - 如何更改存储在单例中的 SQL 数据库？

> ID：12683177
> 
> 赞同：0
> 
> 时间：2012-10-02T00:58:20.163
> 
> 标签：objective-c, sql, ios, singleton

我有一个应用程序，它几乎遵循[此处](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)描述的方法。关键代码如下：

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>     
@interface FailedBankDatabase : NSObject {
    sqlite3 *_database;
}     
+ (FailedBankDatabase*)database;
- (NSArray *)failedBankInfos;    
@end

#import "FailedBankDatabase.h"
#import "FailedBankInfo.h"
@implementation FailedBankDatabase
static FailedBankDatabase *_database;

+ (FailedBankDatabase*)database {
if (_database == nil) {
    _database = [[FailedBankDatabase alloc] init];
}
return _database;
}

- (id)init {
if ((self = [super init])) {
    NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"banklist" 
        ofType:@"sqlite3"];

    if (sqlite3_open([sqLiteDb UTF8String], &_database) != SQLITE_OK) {
        NSLog(@"Failed to open database!");
    }
}
return self;
}

- (void)dealloc {
    sqlite3_close(_database);
    [super dealloc];
} 
```

现在，该应用程序可以按预期使用一个数据库。但是，我希望能够在用户触摸按钮时切换到不同的数据库。我有按钮处理程序和逻辑 OK，我存储要使用的数据库的名称并可以检索它。但是，无论我做什么，我总是得到相同的（原始）数据库被调用。我担心示例中`_database`与 类型的对象关联的句柄`sqlite3`没有正确更改，因此我没有正确打开数据库。我应该如何去改变这个？您不能重新初始化单例，但我需要更改其中存储的内容，在这种情况下`_database`。谢谢。

编辑：我会补充说，如果我要求`_database`是一个指针。所以我需要打开一个新数据库（并关闭我猜的第一个）并在此过程中为新数据库提供一个新地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:39:26.077

经过一些额外的研究，我没有成功回答所提出的问题。但是，看起来[FMDB](https://github.com/ccgus/fmdb)可能可以处理这个任务，我只是不想在我的项目中添加一个大型框架。我以完全不同的方式解决了我的问题：我修改了每个数据库，给它一个标识列，然后将它们组合起来，并修改了我用来仅选择所需的原始数据库块的查询。当然，这种方法仅在数据库具有相同结构时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T09:42:50.497

我有同样的问题，但无法修改数据库（它们被用于其他项目）。

所以，我创建了一个名为 useDatabase: 的方法，它关闭之前的连接，然后打开一个新连接。

步骤：您的 - (id)init 保持不变

在 FailedBankDatabase 中，您创建一个关闭和打开具有新数据库名称的数据库的方法

```
-(void)useDatabase:(NSString*)database {

    sqlite3_close(_database);

    NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:database 
    ofType:@"sqlite3"];

    if (sqlite3_open([sqLiteDb UTF8String], &_database) != SQLITE_OK) {
        NSLog(@"Failed to open database!");
    }

} 
```

在最开始时（例如在 appDidFinishLaunching 中），您调用单例一次

> [FailedBankDatabase 数据库];

, 所以它首先被初始化。

然后，当您想更改使用的 .sqlite 时，可以调用：

> [FailedBankDatabase useDatabase:@"anOtherDatabase"]

我认为当**您不必经常更改数据库**时可以这样做。就我而言，我在第**一个屏幕上使用了****一次**，带有 3 个按钮，我将在其中选择要使用的数据库。

 **对于更复杂的情况，例如涉及多线程，您不应该这样做，因为它会关闭连接一段时间，而它会在其他地方使用。

希望能帮助到你，

杰瑞**

# memory - 在 Clojure 中跟踪内存分配

> ID：12683178
> 
> 赞同：1
> 
> 时间：2012-10-02T00:58:36.867
> 
> 标签：memory, clojure, heap-memory

在我的程序中，所有状态都保存在原子中的一个巨大映射中，该映射在每次迭代中由大量纯函数更新。我已经确定堆大小正在增加，我如何找到负责的代码？我尝试了 VisualVM，但它提供了通用信息，我找不到我的状态的哪个部分正在增长以及哪个函数导致它增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:27:32.863

1.  寻找常见的陷阱，例如忘记使用 with-open、挂在序列的头部等。

2.  使用 JVisualVM 隔离较小的代码段，看看您是否仍然看到相同类型的内存增长。如果敲掉或嘲笑某件作品没有任何区别，那就把它放回去，如果它有区别，那么你可以专注于它并弄清楚发生了什么。

我不知道任何灵丹妙药工具或技术，这只是一个分而治之的过程，并考虑您在代码中所做的事情。

# node.js - 如何使用 NodeJS 加密来签署文件？

> ID：12683189
> 
> 赞同：12
> 
> 时间：2012-10-02T01:00:08.597
> 
> 标签：node.js, cryptography

我想使用 nodeJS 来签署文件。我得到了一个 p12 证书（包括私钥）、一个密码短语和一个 pem 证书。

这里展示了它是如何在 ruby​​ 中完成的： [https ://gist.github.com/de4b602a213b4b264706](https://gist.github.com/de4b602a213b4b264706)

提前致谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-02T01:08:07.477

您应该能够`createSign`在`crypto`模块中使用（请参阅[http://nodejs.org/docs/v0.4.2/api/all.html#crypto](http://nodejs.org/docs/v0.4.2/api/all.html#crypto)）来做您想做的事。代码最终看起来像这样（来自[http://chimera.labs.oreilly.com/books/1234000001808/ch05.html#chap7_id35952189](http://chimera.labs.oreilly.com/books/1234000001808/ch05.html#chap7_id35952189)）：

```
var crypto = require('crypto');
var fs = require('fs');

var pem = fs.readFileSync('key.pem');
var key = pem.toString('ascii');

var sign = crypto.createSign('RSA-SHA256');
sign.update('abcdef');  // data from your file would go here
var sig = sign.sign(key, 'hex'); 
```

# php - php当前数组位置和上一个/下一个

> ID：12683190
> 
> 赞同：0
> 
> 时间：2012-10-02T01:00:12.553
> 
> 标签：php, next

我已经阅读了许多关于上一个/下一个的帖子，但我仍然很困惑。

我有一个显示图像和相关数据的页面。这是从数据库中获得的。图像位于每个专辑文件夹中的网站文件夹中。因此，一个图像文件夹可能包含 1、2 或 100 张图像。

对于这些数据，我有如下功能：-

```
function get_images_album($artist_id) {
    $artist_id = (int)$artist_id;
    $images = array();
    $image_query = mysql_query("SELECT `image_album_id`, `member_id`, `artist_id`,     
                   `albumname`, `ext`, `timestamp`  FROM `album_images`
                   WHERE `artist_id`=$artist_id AND `member_id`=".$_SESSION['member_id']);
    while ($images_row = mysql_fetch_assoc($image_query)) {
        $images[] = array(
            'id' => $images_row['image_album_id'],
            'album' =>  $images_row['artist_id'],
            'albumname' => $images_row['albumname'],
            'ext' => $images_row['ext'],
            'timestamp' => $images_row['timestamp']
            );
    }
    return $images;
} 
```

该页面根据 localhost 上的 url 显示正确的图像和数据。网站/album_view.php?artist_id=4&image_album_id=4。

在html页面上的代码是： -

```
 $images = get_images_album($artist_id);
 if (empty($images)) {
     echo 'There are no Images in this album.';
 }else{
     foreach ($images as $key => $val) {

     }
 } 
```

?>

我已经明白，如果我回显 $key 和 current($val) 我会得到数组索引号。和当前页面的图像 ID。在上述情况下，这将是 0 和 4。但是，我总是得到数组的最后一个索引详细信息，对于特定专辑，恰好是 13 和 2181。

我知道所有数据都在那里，因为我已经回显了数组并且一切看起来都很好。

我不知道为什么。

从我所拥有的继续我无法弄清楚如何继续进行下一个和以前的设置谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:24:30.270

`get_images_album`解决此问题的更简单方法可能是稍微更改您的功能：

```
function get_images_album($artist_id) {
  $artist_id = (int)$artist_id;
  $images = array();
  $image_query = mysql_query("SELECT `image_album_id`, `member_id`, `artist_id`,     
                   `albumname`, `ext`, `timestamp`  FROM `album_images`
  WHERE `artist_id`=$artist_id AND `member_id`=".$_SESSION['member_id']);
  While ($images_row = mysql_fetch_assoc($image_query)) {
   // $images[] = array(
   // instead, make your images array a hash and key it on the album_id
    $images[$images_row["image_album_id"]] = array(
      'id' => $images_row['image_album_id'],
      'album' =>  $images_row['artist_id'],
      'albumname' => $images_row['albumname'],
      'ext' => $images_row['ext'],
      'timestamp' => $images_row['timestamp']
     );
   }
   return $images;
 } 
```

现在您可以消除`foreach`循环并获得您正在寻找的专辑：

```
 $images = get_images_album($artist_id);
 if (empty($images)) {
 echo 'There are no Images in this album.';
 }else{
  $album_images = $images[$image_album_id];

  // do stuff with the $album_images hash
  var_dump($album_images);

 } 
```

# java - 世界瓷砖生成器

> ID：12683191
> 
> 赞同：1
> 
> 时间：2012-10-02T01:00:15.380
> 
> 标签：java, tile

我有一个游戏，最近决定从 TilED（瓷砖地图编辑器）切换到手动完成。我一直在谷歌上搜索一些帮助，但无济于事。这是我使用天空图块呈现背景的代码：

```
for (int x = 0; x < 16; x++) {
           for (int y = 0; y < 16; y++) {
              map[x][y] = AIR; 
              if(map[x][y] == AIR) {
                 air.draw(x * tilesize, y * tilesize);
              }

           }
        } 
```

这只是创建了一个新的 16 * 16 地图并用天空图块填充它。我的问题是，我如何指定其他瓷砖的级别？所以就像草砖在第 10 层，泥土穿过第 9 - 6 层，而石头填满其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:07:38.723

您可以查看“AndEngine”的源代码，这是一个开源的 android 游戏引擎，它读取从 Tiled 创建的 TMX 磁贴：

有很多类，但这是一个开始：

[http://code.google.com/p/andengine/source/browse/src/org/anddev/andengine/entity/layer/tiled/tmx/TMXTiledMap.java](http://code.google.com/p/andengine/source/browse/src/org/anddev/andengine/entity/layer/tiled/tmx/TMXTiledMap.java)

您可以尝试使用 tiled 创建地图，然后按原样通过 tmx 加载器解析地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:28:16.527

要在每个级别上执行此操作，您只需执行另一个 for 循环：

```
for(int x = 0; x < 16; x++) {
    map[x][10] = GRASS;
} 
```

这就是你如何让它发挥作用。希望能帮助到你！

# c - 阻塞操作的成本因线程数而增加

> ID：12683200
> 
> 赞同：-1
> 
> 时间：2012-10-02T01:01:58.843
> 
> 标签：c, multithreading, optimization

我编写了一个程序来执行一些计算，然后合并结果。

我使用多线程并行计算。

在合并结果阶段，每个线程都会锁定全局数组，然后将单独的部分附加到它上面，并且会做一些额外的工作来消除重复。

我测试了一下，合并的开销随着线程数的增加而增加，而且速度出乎意料：

2线程：40,116,084(us)
6线程：511,791,532(us)

为什么：线程数增加时会发生什么？我该如何改变？

--------------------------斜线 ---------- -------------------------------------------

其实代码很简单，有伪代码：

typedef my_object{
长不;
整数计数；
双倍价值；
//其他的东西
} my_object_t;

静态 my_object_t** global_result_array; //大约十千个

静态 pthread_mutex_t global_lock;

void* thread_function(void* arg){
my_object_t** local_result;
int local_result_number;
诠释我;
my_object_t* ptr;
for(;;){
if( exit_condition ){ return NULL;}
if(merge_condition){
//开始记录时间点
pthread_mutex_lock( &global_lock);
for( i = local_result_number-1; i>=0 ;i++){
ptr = local_result[ i] ;
if( NULL == global_result_array[ ptr->no] ){
global_result_array[ ptr->no] = ptr; //第4步
}else{
global_result_array[ ptr->no] -> count += ptr->count; // 第 5 步
global_result_array[ ptr->no] -> value += ptr->value; // 第 6 步
}
}
pthread_mutex_unlock( &global_lock); // 记录的结束时间点
}else{
//做一些计算并产生部分和线程本地的结果，即local_result和local_result_number
}
}
}

如上，两个线程和六个线程的区别是第5步和第6步，我统计了第5步和第6步的执行顺序大约有几亿次。其他的都是一样的。
因此，在我看来，合并操作非常轻，尽管使用 2 线程或 6 线程，但它们都需要锁定和独占合并。
另一个令人吃惊的事情是：使用六线程时，第 4 步的成本飙升！这就是总成本暴涨的启动原因！

顺便说一句：测试服务器有两个 cpu，每个 cpu 有四个核心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:22:01.367

显示的行为有多种原因：

1.  更多的线程意味着更多的锁和更多的线程间阻塞时间。从您的描述中可以明显看出，您的实现使用互斥锁或类似的东西。如果数据集在很大程度上是独占的，那么线程的加速效果会更好。

2.  除非您的系统具有与线程数一样多的处理器/内核，否则它们都不能同时运行。您可以使用 设置最大并发`pthread_setconcurrency`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:03:20.107

这是 2/6 线程之间的巨大性能差异。很抱歉，您确实必须非常努力才能做出如此巨大的差异。你似乎成功了:((

正如其他人指出的那样，只有在线程间通信（锁等）上花费的时间少于并发操作所获得的时间时，才值得在一个数据集上使用多个线程。

例如，如果您发现您正在合并连续较小的数据部分（例如，使用合并排序），那么您正在有效地优化浪费在线程间通信和缓存抖动上的时间。这就是为什么一旦数据被划分为小于 L1 缓存大小的块时，多线程合并排序经常以就地排序开始。

'每个线程都会锁定全局数组' - 尽量不要这样做。长时间锁定大型数据结构，或在连续的短期内连续锁定它们，是一个非常糟糕的计划。锁定全局一次会使线程序列化并生成一个线程间通信过多的线程。持续锁定/释放会生成一个线程，线程间通信过多。

一旦操作变得如此短以至于回报减少到无用的地步，您最好将这些操作排队到一个线程来自行完成工作。

锁定经常被严重过度使用和/或误用。如果我发现自己锁定任何东西的时间超过了将指针推入/弹出队列或类似的时间，我开始感到紧张。

没有查看/分析代码，更重要的是，没有数据，（我想两者都很复杂），很难给出任何直接的建议：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:07:55.417

上下文切换是一种开销。因此差异。如果您的计算机有 6 个内核，它会更快。过度地，您需要为线程提供更多的上下文切换。

# python - python re.split() 以空格、逗号和句点分隔，但在 1,000 或 1.50 等情况下则不行

> ID：12683201
> 
> 赞同：40
> 
> 时间：2012-10-02T01:02:02.107
> 
> 标签：python, regex

我想使用 python`re.split()`通过空格、逗号和句点将字符串拆分为单个单词。但我不想`"1,200"`被分割成`["1", "200"]`或`["1.2"]`被分割成`["1", "2"]`.

例子

```
l = "one two 3.4 5,6 seven.eight nine,ten" 
```

结果应该是`["one", "two", "3.4", "5,6" , "seven", "eight", "nine", "ten"]`

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-02T01:09:23.890

使用负前瞻和负后瞻：

```
> s = "one two 3.4 5,6 seven.eight nine,ten"
> parts = re.split('\s|(?<!\d)[,.](?!\d)', s)
['one', 'two', '3.4', '5,6', 'seven', 'eight', 'nine', 'ten'] 
```

换句话说，你总是用（空格`\s`）分割，并且只有在逗号和句点后面**没有**数字的情况下才用逗号和句点分割。`(?!\d)``(?<!\d)`

**[演示](http://ideone.com/FyS9m)**。

**编辑**：根据@verdesmarald 评论，您可能希望使用以下内容：

```
> s = "one two 3.4 5,6 seven.eight nine,ten,1.2,a,5"
> print re.split('\s|(?<!\d)[,.]|[,.](?!\d)', s)
['one', 'two', '3.4', '5,6', 'seven', 'eight', 'nine', 'ten', '1.2', 'a', '5'] 
```

这将拆分`"1.2,a,5"`为`["1.2", "a", "5"]`.

**[演示](http://ideone.com/wYZIb)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T01:10:10.823

因此，您希望在空格、逗号和不被数字包围的句点上进行拆分。这应该有效：

```
r" |(?<![0-9])[.,](?![0-9])" 
```

# c# - C# 中的错误：找不到类型或命名空间“SmptMailMessage”

> ID：12683203
> 
> 赞同：2
> 
> 时间：2012-10-02T01:02:08.963
> 
> 标签：c#, smtp

好吧，我已经完成了我的功课，甚至查看了这个网站上的几个示例，但无济于事。我的程序旨在发送表格上填写的数据，并将其发送到电子邮件。我的代码的其余部分没有显示任何错误，除了 SmptMailMessage 之一。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net.Mail;

namespace FPSArrestReport
 {
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btn1_Click(object sender, EventArgs e)
    {

        SmtpClient SmptMailMessage = new SmtpClient();
        SmptMailMessage mail = new SmtpMailMessage("smtp.gmail.com", 25); // error on this line
         \\on the SmptMailmessage

           //set the to address to the primary email 
      mail.To.Add("xxx@abc.com"); 

     //set the message type and subject and body 
      mail.IsHtmlMessage = true; 
      mail.Subject = ""; 
      mail.Body = "Hello world!"; 

    //send the email 
      mail.Send();   
      } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T01:08:30.737

System.Net.Mail 库中没有像 SmtpMailMessage （或 SmptMailMessage ）这样的类型。看起来您正在尝试创建 SmtpClient 的实例来发送消息。也许你的意思是做类似的事情；

```
SmtpClient client = new SmtpClient("smtp.gmail.com", 25); 

MailMessage mail = new MailMessage();
mail.To.Add("xxx@abc.com");
client.Send(mail); 
```

您在这里使用了 2 个对象 - 一个 SmtpMailClient（用于发送）和一个描述消息的**MailMessage 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:38:30.013

这对您来说应该是一个简单的解决方法。另外，请尝试注意您的拼写是否正确。:D

```
 $
    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Net.Mail;
    using System.Net;
    namespace WindowsFormsApplication1
    {
        public partial class Form1 : Form
        {
            MailAddress fromAddress = new MailAddress("YourEmailAcct@gmail.com", "NameForIt");
            MailAddress toAddress = new MailAddress("DesinationEmailAddress", "NameForDestination");
            const string fromPassword = "password";
            const string subject = "Subject";
            const string body = "First line of text \n Second line of text.";

            public Form1()
            {
                InitializeComponent();

            }

            private void button1_Click(object sender, EventArgs e)
            {

                SmtpClient client = new SmtpClient()
                {
                    Host = "smtp.gmail.com",
                    Port = 587,
                    EnableSsl = true,
                    DeliveryMethod = SmtpDeliveryMethod.Network,
                    UseDefaultCredentials = false,
                    Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
                };

                try
                {
                    MailMessage message = new MailMessage(fromAddress, toAddress)
                    {
                        Subject = subject,
                        Body = body
                    };

                    client.Send(message);
                }
                catch (Exception ex)
                {
                    MessageBox.Show("There was an error!" + ex.Message);
                }

            }

            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T01:08:07.913

.NET中没有`StmpMailMessage`类。你想要`MailMessage`。您还希望将服务器凭据传递给`SmtpClient`.

此处的此问题说明了如何使用 Gmail 执行此操作。

[使用 C# 通过 Gmail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

# codeigniter - 如何禁用对回调函数的直接访问？

> ID：12683205
> 
> 赞同：5
> 
> 时间：2012-10-02T01:02:37.810
> 
> 标签：codeigniter, codeigniter-2

```
<? if ( ! defined('BASEPATH')) exit();

    class Registration extends CI_Controller {

        public function __construct() {
            parent::__construct();
            $this->load->model('registration_model');
        }

        public function index() {
            $this->load->library('form_validation');

            $this->form_validation->set_rules('email', 'E-mail', 'trim|required|valid_email|callback_email_available');

            if($this->form_validation->run() == FALSE) {
                $this->load->view('registration');
            } else {
                $this->registration_model->add_user();
            }
        }

        # Check E-mail
        public function email_available($email) {
            $this->db->select('email');
            $this->db->where('email', $email);
            $query = $this->db->get('users');
            $result = $query->row();

            if(!empty($result)) {
                $this->form_validation->set_message('email_available', 'This e-mail belongs to another user.');
                return FALSE;
            } else {
                return TRUE;
            }
        }

    }
    ?> 
```

我有一个带有表单验证的注册表单。我有一个回调函数来验证电子邮件的唯一性。

所有代码都可以正常工作，但我可以直接访问有错误的回调函数

examle.com/registration/email_available

```
A PHP Error was encountered
Severity: Warning
Message: Missing argument 1 for Registration::email_available()
Filename: controllers/registration.php

A PHP Error was encountered
Severity: Notice
Message: Undefined variable: email
Filename: controllers/registration.php 
```

如何拒绝直接访问回调函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T03:06:13.233

您可以在方法名称前面加上一个前缀，`_`以拒绝通过 HTTP 请求进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:48:06.090

我的建议是将您的验证规则放入一个单独的文件中。CodeIgniter 通过允许您将验证配置保存在`config/form_validation.php`. 查看[表单验证文档](http://codeigniter.com/user_guide/libraries/form_validation.html)，特别是标记为**将验证规则集保存到配置文件的部分。**

## 您的控制器的索引：

```
public function index() {
    $this->load->library('form_validation');
    if($this->form_validation->run('submit_registration') == FALSE) {
        $this->load->view('registration');
    } 
    else{
        $this->registration_model->add_user();
    }
} 
```

## 配置/form_validation.php

```
$config = array
(   
    'submit_registration' => array
    (
        array(
            'field' => 'email',
            'label' => 'Email',
            'rules' => 'trim|required|valid_email|email_available'
        ),
        array(
            'field' => 'username',
            'label' => 'Username',
            'rules' => 'required|alpha_numeric|etc'
        )
    ),
    'some_other_submission' => array(
        array(
            'field' => 'somefield',
            'label' => 'SomeField',
            'rules' => 'some|rules'
        ),
        array(
            'field' => 'getit',
            'label' => 'Get The Point?',
            'rules' => 'trim'
        )
    )
); 
```

## 库/MY_Form_validation.php

```
class MY_Form_validation extends CI_Form_validation
{   
    function __construct($config = array()){
        parent::__construct($config);
    }

    function email_available($email){
        $CI =& get_instance();
        //check your database with the $CI variable...
       if(email_exists) return TRUE;
       else return FALSE;
    }
} 
```

# javascript - 如何检测第三方网站上的 JavaScript 事件

> ID：12683207
> 
> 赞同：0
> 
> 时间：2012-10-02T01:02:54.190
> 
> 标签：javascript, dom-events, headless-browser

是否有任何方法（实施或仅在理论上）可以检测到第三方站点上分配的 JavaScript 事件和操作？

如果我将 JavaScript 注入到外部站点并希望避免覆盖`onsubmit`,`onclick`和`onfocus`其他此类事件，有没有办法检测和扩展此类回调而不是覆盖它们？

我有过的想法：

*   事先在无头浏览器或 JavaScript 引擎中运行网站以捕获所有已执行的 JavaScript
*   即时解析 JavaScript 并希望第三方 JavaScript 符合我的解析器的期望

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T01:07:40.677

如果您只想添加新的事件处理程序而不覆盖现有的事件处理程序，您可以使用`addEventListener()`or `attachEvent()`（对于旧版本的 IE）而不是设置`.onclick`,`.onsubmit`等来添加新的事件处理程序而不影响以前的事件处理程序。

这是一个添加事件的简单跨浏览器功能：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
} 
```

我知道从常规 javascript 中没有跨浏览器的方式来询问现有的 DOM 对象以查看哪些具有通过`addEventListener`或安装的常规 javascript 事件处理程序`attachEvent`。如果事件处理程序是用 jQuery 安装的，则可以通过[这种技术](https://stackoverflow.com/questions/2382994/how-to-check-if-any-javascript-event-listeners-handlers-attached-to-an-element-d)来询问它们。

未来的规范工作已经完成，以添加一个列出所有事件处理程序的属性，但我不确定它是否已实现。您可以[在此处](https://stackoverflow.com/questions/6886792/attachevent-or-addeventlistener-stored-where/6886806#6886806)阅读更多相关信息。

对于使用`onclick`、`onsubmit`、`onfocus`等安装的事件处理程序，您可以检查所有现有的 DOM 元素以查看哪些已为这些事件分配了处理程序，然后您可以根据需要挂钩它们。

```
// add other events here you are interested in
var events = ["onclick", "onsubmit", "onfocus", "onblur"];
var elems = document.getElementsByTagName("*"), item;
for (var i = 0; i < elems.length; i++) {
    item = elems[i];
    for (var j = 0; j < events.length; j++) {
        if (item[events[j]]) {
            console.log("event handler for " + events[j]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:13:43.423

`addEventListener`你实际上可以通过改变and的原型得到你想要的`attachEvent`：

```
// intercept events cross browser
var method;
if (HTMLElement.prototype.addEventListener) {
  method = 'addEventListener';
} else {
  method = 'attachEvent';
}
HTMLElement.prototype.realAddEventListener = HTMLElement.prototype[method];
HTMLElement.prototype[method] = function(a,b,c) {
  console.log('here are all the events being added:', arguments);
  this.realAddEventListener(a,b,c);
}; 
```

当然，在任何其他页面脚本之前将其添加到页面中很重要，但它可以在 jQuery 之类的库之后或之前添加，但可能会在原型上与prototype.js 发生冲突，不确定。

您还需要检查`onclicks`整个事件集，您可以通过`console.dir(document.createElement('a'))`在 javascript 控制台中运行来找到这些事件。

# c++ - C++ sizeof 与 bool

> ID：12683215
> 
> 赞同：10
> 
> 时间：2012-10-02T01:04:19.240
> 
> 标签：c++, boolean, sizeof

这是一个简单的问题。先上代码。

```
struct A {
    int x; 
};
struct B {
    bool y;
};
struct C {
    int x;
    bool y;
}; 
```

在主函数中，我调用

```
cout << " bool : " << sizeof(bool) <<
     "\n int : " << sizeof(int) <<
     "\n class A : " << sizeof(A) <<
     "\n class B : " << sizeof(B) <<
     "\n class C : " << sizeof(C) << "\n"; 
```

结果是

```
bool : 1
int : 4
class A : 4
class B : 1
class C : 8 
```

为什么 C 类的大小是 8 而不是 5？请注意，这是在 MINGW 4.7 / Windows 7 / 32 位机器中使用 gcc 编译的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T01:33:28.287

聚合的对齐是它最严格的成员（具有最大对齐要求的成员）的对齐。换句话说，结构的大小是其最严格（具有最大对齐要求）成员对齐的倍数。

```
struct D
{
  bool a;
  // will be padded with char[7]
  double b; // the largest alignment requirement (8 bytes in my environment)
}; 
```

上面结构的大小将是 16 个字节，因为 16 是 8 的倍数。在您的示例中，最严格的类型是 int 对齐到 4 个字节。这就是结构被填充为 8 个字节的原因。我再举一个例子：

```
struct E
{
  int a;
  // padded with char[4]
  double b;
}; 
```

上面结构的大小是 16。16 是 8 的倍数（在我的环境中对齐双精度）。

我写了一篇关于内存对齐的博客文章以获得更详细的解释 [http://evpo.wordpress.com/2014/01/25/memory-alignment-of-structures-and-classes-in-c-2/](http://evpo.wordpress.com/2014/01/25/memory-alignment-of-structures-and-classes-in-c-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:06:06.633

将结构对齐到一个字的大小，这里是 4 个字节。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T01:10:43.397

查看结构的定义，您有 1 个字节的值，后跟 4 个字节的整数。该整数需要在 4 字节边界上分配，这将强制编译器在 1 字节布尔值之后插入 3 字节填充。这使得结构的大小为 8 个字节。为避免这种情况，您可以更改结构中元素的顺序。

同样对于返回不同值的两个 sizeof 调用，您确定这里没有错字，并且您没有采用指针大小或不同类型或某些整数变量。

Rohit J 回答的[struct size 与 typedef 版本不同？](https://stackoverflow.com/questions/2778289/struct-size-is-different-from-typedef-version)

# ios - NSMutableArray for 循环

> ID：12683218
> 
> 赞同：0
> 
> 时间：2012-10-02T01:05:02.333
> 
> 标签：ios

我的 for 循环似乎没有按照我的要求做。如果它不等于空格，我正在尝试进行计数，如果它等于空格，我正在尝试删除另一个 for 循环。两者似乎都不起作用，因为我的 NSLOG 告诉我它仍在计算空格，也没有删除它们。任何帮助将不胜感激。

```
NSMutableArray *a1 = [[NSMutableArray alloc] init];
// Take address and break into array by colon

if ([str rangeOfString:@"::"].location == NSNotFound)
{

    NSLog(@"Double Colon not found");
}
else 
{

    a1 = [[display.text componentsSeparatedByString:@":"]mutableCopy];
    //Separate string by colon
    NSLog(@"Separated string by colon: %@",a1);

    //count non blank segments
    for (item in a1) {
        if (item != @""){
            numofSeg = numofSeg + 1;

            needSeg = 8 - numofSeg;
            NSLog(@"%d",needSeg);
            }

    }

    while (needSeg > 0) {

        NSUInteger index = [a1 indexOfObject:@""];
        if (index != NSNotFound) {
            [a1 insertObject:@"0000" atIndex:index];
            needSeg = needSeg - 1;

        }
    }
    for (item in a1) {
        if (item == @"") {
            //remove blank spaces from list
            [a1 removeObject:item];
        }
    }
}

//Join objects back into a string separted by colon.
NSString *join = [a1 componentsJoinedByString:@":"];
NSLog(@"Join array into String: %@",join); 
```

下面输出。当我将阵列重新连接在一起时，它应该等于 8 个段，但只有 6 个显示。这告诉我，当我分隔双冒号时，它正在计算两个空格。

```
2012-10-01 19:50:52.430 IPv6[1287:c07] Separated string by colon: (
2002,
0000,
"",
""
)
2012-10-01 19:50:52.432 IPv6[1287:c07] 7
2012-10-01 19:50:52.433 IPv6[1287:c07] 6
2012-10-01 19:50:52.434 IPv6[1287:c07] 5
2012-10-01 19:50:52.435 IPv6[1287:c07] 4
2012-10-01 19:50:52.435 IPv6[1287:c07] Join array into String:       2002:0000:0000:0000:0000:0000:: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:15:50.427

迭代可变数组时不能修改它。您可以反转逻辑并收集要**保存**在单独数组中的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:17:58.570

首先，使用 '-isEqualToString:' 来比较字符串，而不是 '!='。

其次，很难通过与 '@""' 进行比较来判断您正在尝试做什么——如果您已经确定没有 ': ：'？你的意思是要寻找'@" "'？

第三，第一行是毫无意义的分配，因为 else 子句所做的第一件事就是将其他内容分配给“a1”。

# c - Portaudio：打开文件而不是使用麦克风

> ID：12683220
> 
> 赞同：1
> 
> 时间：2012-10-02T01:05:32.640
> 
> 标签：c, macos, portaudio

我正在使用 PortAudio，这就是我现在打开流进行阅读的方式。

```
Pa_OpenDefaultStream(&stream, 1, 0, paFloat32, SAMPLE_RATE, SAMPLES, PaCallback, NULL); 
```

据我所知，这使用麦克风作为输入。我怎样才能使用文件作为输入？奇怪的是，该`Pa_OpenStream`功能似乎不允许我输入文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:25:45.683

PortAudio 仅用于设备 I/O，例如扬声器、麦克风、线路输入和类似设备。要进行文件 I/O，您需要另一个为此设计的库。例如，[libsoundfile](http://www.mega-nerd.com/libsndfile/)、[libsox](http://sox.sourceforge.net/libsox.html)或[libaudiofile](http://audiofile.68k.org/)。

# php - Codeigniter $query->result() 循环到关联数组

> ID：12683221
> 
> 赞同：0
> 
> 时间：2012-10-02T01:05:40.817
> 
> 标签：php, json, codeigniter, foreach, associative-array

我无法让这个循环返回我知道mysql在这个查询中生成的所有行。我的 javascript 控制台中的对象正在按我的意愿返回；但是，我只从每个 unique 中获取最后一行`$row->student_id`。我可以说每个唯一`row->student_id`的都被前一个覆盖，但我不确定如何执行此逻辑。

这是 Codeigniter 模型的一部分。`$.ajax`我的控制器在这个函数上执行一个 json_encode 函数，然后我用连接到 handlebars.js 模板的 jQuery 将这个数据拉到我的视图中。我知道我可以使用 ember 进行数据绑定，但这超出了我目前的专业知识。

```
$query = $this->db->get();
    if ($query->num_rows() > 0) {

        $prev = null;
        foreach ($query->result() as $row) {

            if ($prev != $row->student_id) {
                $data[$row->student_id] = array(
                    'first' => $row->last_name,
                    'last' => $row->first_name);
                $data[$row->student_id]['dorc'] = array($row->debit_or_credit);
                $prev = $row->student_id;
            } else {
                $data[$row->student_id]['dorc'][] += $row->debit_or_credit;

            }
        }

        return $data;
    } else {
        return array();
    }` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:46:30.937

你的第二个`if`条件不正确。你应该用这个替换它：

```
foreach ($query->result() as $row) {
    if (!isset($data[$row->student_id])) { // Creates the row if not exists
        $data[$row->student_id] = array(
                            'first' => $row->last_name,
                            'last' => $row->first_name);
    }

    if (!isset($data[$row->student_id]['dorc'])) { // Create the dorc key if not exists
        $data[$row->student_id]['dorc'] = array($row->debit_or_credit);
    } else { // if it exists, push the debit_or_credit row value
        $data[$row->student_id]['dorc'][] = $row->debit_or_credit;
    }
} 
```

# ruby-on-rails - 是否有控制台命令可以查看队列中的内容并清除 Sidekiq 中的队列？

> ID：12683222
> 
> 赞同：103
> 
> 时间：2012-10-02T01:05:49.733
> 
> 标签：ruby-on-rails, sidekiq

我习惯于使用delayed_jobs 方法进入控制台查看队列中的内容，以及在需要时轻松清除队列。Sidekiq 中是否有类似的命令？谢谢！

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-09-21T00:21:21.307

有一个符合人体工程学的[API 用于查看和管理队列](https://github.com/mperham/sidekiq/wiki/API)。

默认情况下不需要。

```
require 'sidekiq/api' 
```

这是摘录：

```
# get a handle to the default queue
default_queue = Sidekiq::Queue.new 

# get a handle to the mailer queue
mailer_queue = Sidekiq::Queue.new("mailer") 

# How many jobs are in the default queue?
default_queue.size # => 1001

# How many jobs are in the mailer queue?
mailer_queue.size # => 50

#Deletes all Jobs in a Queue, by removing the queue.    
default_queue.clear 
```

您还可以获得一些汇总统计信息。

```
stats = Sidekiq::Stats.new

# Get the number of jobs that have been processed.
stats.processed # => 100

# Get the number of jobs that have failed.    
stats.failed # => 3

# Get the queues with name and number enqueued.
stats.queues # => { "default" => 1001, "email" => 50 }

#Gets the number of jobs enqueued in all queues (does NOT include retries and scheduled jobs).
stats.enqueued # => 1051 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-10-02T05:25:32.680

我从未使用过 Sidekiq，因此可能有一些方法仅用于查看排队的作业，但它们实际上只是 Redis 命令的包装器，因为这基本上是 Sidekiq（和 Resque）的全部内容：

```
# See workers
Sidekiq::Client.registered_workers

# See queues
Sidekiq::Client.registered_queues

# See all jobs for one queue
Sidekiq.redis { |r| r.lrange "queue:app_queue", 0, -1 }

# See all jobs in all queues
Sidekiq::Client.registered_queues.each do |q|
  Sidekiq.redis { |r| r.lrange "queue:#{q}", 0, -1 }
end

# Remove a queue and all of its jobs
Sidekiq.redis do |r| 
  r.srem "queues", "app_queue"
  r.del  "queue:app_queue"
end 
```

不幸的是，删除一个特定的工作有点困难，因为你必须复制它的确切值：

```
# Remove a specific job from a queue
Sidekiq.redis { |r| r.lrem "queue:app_queue", -1, "the payload string stored in Redis" } 
```

您可以通过以下方式更轻松地完成所有这些操作`redis-cli`：

```
$ redis-cli
> select 0 # (or whichever namespace Sidekiq is using)
> keys * # (just to get an idea of what you're working with)
> smembers queues
> lrange queues:app_queue 0 -1
> lrem queues:app_queue -1 "payload" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-18T03:19:33.370

如果有任何预定的工作。您可以使用以下命令删除所有作业：

```
Sidekiq::ScheduledSet.new.clear 
```

如果有任何队列要删除所有作业，可以使用以下命令：

```
 Sidekiq::Queue.new.clear 
```

重试作业也可以通过以下命令删除：

```
Sidekiq::RetrySet.new.clear 
```

以下链接有更多信息，您可以查看： [https ://github.com/mperham/sidekiq/wiki/API](https://github.com/mperham/sidekiq/wiki/API)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-24T07:51:36.100

有一个 API 用于访问有关工作人员、队列和作业的实时信息。
访问这里[https://github.com/mperham/sidekiq/wiki/API](https://github.com/mperham/sidekiq/wiki/API)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T20:16:12.083

一种解决方法是使用测试模块（需要'sidekiq/testing'）并耗尽工作人员（MyWorker.drain）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-04T14:52:40.123

默认队列中有被绞死的“工人”，我可以通过网络界面看到他们。但是如果我使用 Sidekiq::Queue.new.size，它们就不能从控制台获得

```
irb(main):002:0> Sidekiq::Queue.new.size
2014-03-04T14:37:43Z 17256 TID-oujb9c974 INFO: Sidekiq client with redis options {:namespace=>"sidekiq_staging"}
=> 0 
```

使用 redis-cli 我能够找到它们

```
redis 127.0.0.1:6379> keys *
    1) "sidekiq_staging:worker:ip-xxx-xxx-xxx-xxx:7635c39a29d7b255b564970bea51c026-69853672483440:default"
    2) "sidekiq_staging:worker:ip-xxx-xxx-xxx-xxx:0cf585f5e93e1850eee1ae4613a08e45-70328697677500:default:started"
    3) "sidekiq_staging:worker:ip-xxx-xxx-xxx-xxx:7635c39a29d7b255b564970bea51c026-69853672320140:default:started"
    ... 
```

解决方案是：

```
irb(main):003:0>  Sidekiq.redis { |r| r.del "workers", 0, -1 }
=> 1 
```

在 Sidekiq v3 中也有一个命令

```
Sidekiq::Workers.new.prune 
```

但由于某种原因，那天它对我不起作用

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-10T04:02:18.640

如果你想清除 sidekiq 重试队列，是这样的：`Sidekiq::RetrySet.new.clear`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-24T06:35:33.560

```
$ redis-cli
> select 0 # (or whichever namespace Sidekiq is using)
> keys * # (just to get an idea of what you're working with)
> smembers queues
> lrange queue:queue_name 0 -1 # (queue_name must be your relevant queue)
> lrem queue:queue_name -1 "payload" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-26T13:36:33.277

清除所有 sidekiq 队列的 Rake 任务：

```
namespace :sidekiq do
  desc 'Clear sidekiq queue'
  task clear: :environment do
    require 'sidekiq/api'
    Sidekiq::Queue.all.each(&:clear)
  end
end 
```

用法：

```
rake sidekiq:clear 
```

# struts2 - Struts2 i18NInterceptor 不再与 ExecuteAndWaitInterceptor 一起工作

> ID：12683224
> 
> 赞同：1
> 
> 时间：2012-10-02T01:06:27.433
> 
> 标签：struts2

我正在使用 struts2 tile 插件 (v2.2.3)，但在使用 I18nInterceptor 和 ExecuteAndWaitInterceptor 时遇到问题。本质上，当我出于某种原因添加 execAndWait 拦截器（参见下面的 xml）时，本地化不再起作用，当我尝试获取本地化文本（例如 TextProviderSupport.hasKey）时，我得到一个 NullPointerException（参见错误），我将其缩小到此代码本地化文本工具...

```
public static String findText(Class aClass, String aTextName, Locale locale, String defaultMessage, Object[] args) {
    ValueStack valueStack = ActionContext.getContext().getValueStack();
    return findText(aClass, aTextName, locale, defaultMessage, args, valueStack);

} 
```

...我假设 getValueStack() 出于某种原因为空，但我不知道为什么。有任何想法吗？

谢谢，瑞安

```
<pre><code>    
    java.lang.NullPointerException
      at com.opensymphony.xwork2.util.LocalizedTextUtil.findText(LocalizedTextUtil.java:359)
      at com.opensymphony.xwork2.TextProviderSupport.hasKey(TextProviderSupport.java:98)
      at com.opensymphony.xwork2.ActionSupport.hasKey(ActionSupport.java:96)
      at com.test.plus.PlusSupport.getCurrentLocale(PlusSupport.java:213)
      at com.test.plus.import.Test.action.TestAction.testMethod(TestAction.java:801)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
      at java.lang.reflect.Method.invoke(Unknown Source)
      at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
      at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
      at org.apache.struts2.interceptor.BackgroundProcess$1.run(BackgroundProcess.java:57)
      at java.lang.Thread.run(Unknown Source)
</code></pre> 
```

**Struts.xml**

```
<action name="Test/m/testMethod" method="testMethod" class="com.test.plus.import.Test.action.TestAction">
    <result type="tiles">/WEB-INF/jsp/import/Test/testMethod.jsp</result>
    <result name="success" type="tiles">/WEB-INF/jsp/import/Test/testMethod.jsp</result>
    <result name="input" type="tiles">/WEB-INF/jsp/import/Test/testMethod.jsp</result>
    <result name="error" type="tiles">/WEB-INF/jsp/import/Test/testMethod.jsp</result>
    <result name="wait" type="tiles">/WEB-INF/jsp/import/execAndWait.jsp</result>
    <interceptor-ref name="plusStack"/>
    <interceptor-ref name="defaultStack"/>
    <interceptor-ref name="execAndWait">
      <param name="excludeMethods">input,back,cancel</param>
    </interceptor-ref>
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:14:10.240

来自[http://struts.apache.org/2.x/docs/execute-and-wait-interceptor.html](http://struts.apache.org/2.x/docs/execute-and-wait-interceptor.html)

> **重要提示：**因为动作将在单独的线程中运行，所以不能使用 ActionContext，因为它是 ThreadLocal。这意味着如果您需要访问例如会话数据，您需要实现 SessionAware 而不是调用 ActionContext.getSession()。

# objective-c - OSX：如何检测 Mission Control 是否正在运行？

> ID：12683225
> 
> 赞同：26
> 
> 时间：2012-10-02T01:06:28.007
> 
> 标签：objective-c, macos, cocoa

当 Mission Control 运行时，它会阻止应用程序接收键盘和鼠标事件。它还使最后一个运行的应用程序认为它仍然具有焦点。这对我来说是个问题，因为如果我用鼠标按钮或按住的键启动任务控制，我不会收到 keyUp 或 mouseUp 事件，并且我的应用程序的行为就像按住鼠标按钮或键一样。

我想要一种即使在任务控制处于活动状态时也能读取键盘和鼠标事件的方法，或者一种检测任务控制处于活动状态的方法。理想情况下，我希望能够执行后者，因为在 Mission Control 运行时我实际上无法使用我的应用程序。

我尝试了几件事没有运气：

1.  使用 addGlobalMonitorForEventsMatchingMask 为键盘和鼠标事件注册一个全局监视器。当我切换到另一个应用程序时，这会捕获鼠标事件（但不是键盘事件，尽管[文档](https://developer.apple.com/documentation/appkit/nsevent/1535472-addglobalmonitorforeventsmatchin)说 keyDown 事件应该被发送到全局监视器），但是 Mission Control 似乎并没有让事件传播到全局监视器。
2.  检查`[[NSRunningApplication currentApplication] {isActive, ownsMenuBar}]`。显然，我的应用程序处于活动状态，即使它没有收到事件！
3.  检查`[NSApp keyWindow] != nil`。显然，我的一个窗口应该正在接收关键事件。他们都不是。
4.  检查 Mission Control 是否是`[NSWorkspace runningApplications]`. Mission Control 在运行时不会显示在此列表中。

编辑：

我终于解决了这个问题（尽管不是很满意）。对于鼠标，事实证明您可以使用 查询按下按钮的状态`[NSEvent pressedMouseButtons]`。我只是从 NSLeftMouseDown 和 NSLeftMouseUp 事件中跟踪我认为鼠标状态应该是什么，并将其与`[NSEvent pressedMouseButtons]`每隔一段时间进行比较以确保它们是一致的。如果不是，那么我知道某些东西劫持了我的 NSLeftMouseUp 事件并采取相应措施。

对于键盘，我找不到查询键盘状态的方法，所以我无法做类似的解决方法。我最终在按下按键时使用[演示选项禁用了应用程序切换。](https://developer.apple.com/library/archive/technotes/KioskMode/Introduction/Introduction.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-27T23:42:23.560

至少在 OS X 10.10 中，您可以使用此代码检查 Mission Control 是否处于活动状态：

```
func missionControlIsActive() -> Bool
{
    var result: Bool = false
    let windowInfosRef = CGWindowListCopyWindowInfo(CGWindowListOption(kCGWindowListOptionOnScreenOnly), CGWindowID(0)) // CGWindowID(0) is equal to kCGNullWindowID
    let windowList: NSArray = windowInfosRef.takeRetainedValue() // We own the returned CFArrayRef
    for entry in windowList
    {
        if (entry.objectForKey("kCGWindowOwnerName") as! String) == "Dock"
        {
            var bounds: NSDictionary = entry.objectForKey("kCGWindowBounds") as! NSDictionary
            if (bounds.objectForKey("Y") as! NSNumber) == -1
            {
                result = true
            }
        }
    }
    return result
} 
```

简而言之，代码检查 OS X Dock 进程拥有的特定窗口是否在屏幕上可见，以及它是否位于特定位置。如果满足这两个条件，任务控制将立即激活。代码将在沙盒应用程序中运行，并且不需要辅助设备的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:08:17.303

您是否使用 NSTask 尝试过 bash 级别？`ps -faxU <username>`应该列出所有正在运行的进程，然后您可以解析输出，或者确实可以使用`ps -faxU <username> | grep -i "mission control"`（在我的脑海中，我不确定如何调用该进程，但是诸如“任务控制”之类的东西似乎是合法的）。也许不是最优雅的解决方案，但如果没有其他办法，它可能是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:01:05.750

可能是我遗漏了一些东西，但是您是否尝试过使用事件点击而不是全局监控？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T20:58:36.343

看起来 DTrace 确实有能力看到任务控制被激活。尝试运行：

> 须藤 fs_usage -filesys | grep 任务

从命令行，然后从 /Application 文件夹启动 Mission Control 应用程序。

您应该会看到很多与 Mission Control 启动相关的输出。不幸的是，使用键盘快捷方式或轻扫没有出现相同的输出。当然，我实际上并不推荐在生产代码中使用 DTrace。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-14T20:12:42.880

C++ 和 Qt 实现适用于最新的 OS X。

```
bool Window::missionControlIsActive() {
    bool result = false;
    CFArrayRef windows = CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly+kCGWindowListExcludeDesktopElements, kCGNullWindowID);
    for (int i = 0; i < CFArrayGetCount(windows) ; i++) {
        auto cfMutableDictionaryRef_dict    = (CFMutableDictionaryRef)CFArrayGetValueAtIndex( windows, i );
        auto cfStringRef_name = (CFStringRef)CFDictionaryGetValue(cfMutableDictionaryRef_dict, kCGWindowName);
        if (QString::fromCFString(cfStringRef_name) != u"") continue;
        auto cfStringRef_ownerName = (CFStringRef)CFDictionaryGetValue(cfMutableDictionaryRef_dict, kCGWindowOwnerName);
        if (QString::fromCFString(cfStringRef_ownerName) != u"Dock") continue;
        auto cfDictRef_bounds = (CFDictionaryRef)CFDictionaryGetValue(cfMutableDictionaryRef_dict, kCGWindowBounds);
        auto cfNumRef_bounds_Y = (CFNumberRef)CFDictionaryGetValue(cfDictRef_bounds, QString("Y").toCFString());
        double num;
        CFNumberGetValue(cfNumRef_bounds_Y, kCFNumberFloat64Type, &num);
        if (num > 1.0 and num < 1000000) continue;
        result = true;
        break;
    }
    CFRelease(windows);
    return result;
} 
```

# c# - 如何在 .NET 上使用 C# 从选项卡式 Excel 电子表格中获取嵌套 XML

> ID：12683228
> 
> 赞同：1
> 
> 时间：2012-10-02T01:06:32.753
> 
> 标签：c#, .net, xml, excel

来自选项卡式 Excel 电子表格 C# .NET 的嵌套 XML

我正在尝试将 excel 电子表格中多张工作表中的数据格式化为嵌套 xml

我想结束的xml是

```
<root>
<Tab>
    <TabName>Tab 0</TabName>
    <Products>
        <ItemId>11111</ItemId>
        <Image>/images/100.jpg</Image>
        <Link>http://www.google.com</Link>
    </Products>
    <Products>
        <ItemId>22222</ItemId>
        <Image>/images/100.jpg</Image>
        <Link>http://www.google.com</Link>
    </Products>
</Tab>
<Tab>
    <TabName>Tab 1</TabName>
    <Products>
        <ItemId>11111</ItemId>
        <Image>/images/100.jpg</Image>
        <Link>http://www.google.com</Link>
    </Products>
    <Products>
        <ItemId>22222</ItemId>
        <Image>/images/100.jpg</Image>
        <Link>http://www.google.com</Link>
    </Products>
</Tab>
</root> 
```

我正在使用的代码是

```
public static string Ajax_ReadExcel()
{
    OleDbConnection objConn = null;
    System.Data.DataTable dt = null;
    string fileName = HttpRuntime.AppDomainAppPath + "ExcelUpload\\ProductData.xlsx";
    DataSet objDataset1 = new DataSet("root");

    try
    {
        // Connection String. Change the excel file to the file you
        // will search.
        String connString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
          "Data Source=" + fileName + ";Extended Properties=Excel 8.0;";
        connString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}; Extended Properties=Excel 12.0;", fileName);
        // Create connection object by using the preceding connection string.
        objConn = new OleDbConnection(connString);
        // Open connection with the database.
        objConn.Open();
        // Get the data table containg the schema guid.
        dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        //dt = objConn.E
        if (dt == null)
        {
            return null;
        }

        String[] excelSheets = new String[dt.Rows.Count];
        int i = 0;

        // Add the sheet name to the string array.
        foreach (DataRow row in dt.Rows)
        {
            excelSheets[i] = row["TABLE_NAME"].ToString();
            i++;
        }

        // Loop through all of the sheets if you want too...
        for (int j = 0; j < excelSheets.Length; j++)
        {
            OleDbCommand objCmdSelect = new OleDbCommand("SELECT * FROM ["+excelSheets[j]+"]", objConn);
            OleDbDataAdapter objAdapter1 = new OleDbDataAdapter();

            objAdapter1.SelectCommand = objCmdSelect;

            objAdapter1.Fill(objDataset1, "Products");
            // Query each excel sheet.
            //Trace.Write(objDataset1.GetXml());
        }

        //ltrContent.Text += "<hr/>" + excelSheets;

        objConn.Close();
        //return excelSheets;
    }
    catch (Exception ex)
    {
        return null;
    }
    finally
    {
        // Clean up.
        if (objConn != null)
        {
            objConn.Close();
            objConn.Dispose();
        }
        if (dt != null)
        {
            dt.Dispose();
        }
    }
    return objDataset1.GetXml();

} 
```

我可以将所有的 excel 数据加载到一个 xml 集中

```
<root>
<Products>...</Products>
</root> 
```

，但我对 C# DataSet 不够熟悉，无法将输出转换为我需要的嵌套 xml。

# tinybutstrong - OpenTBS 替换文本

> ID：12683230
> 
> 赞同：2
> 
> 时间：2012-10-02T01:07:11.957
> 
> 标签：tinybutstrong, opentbs

是否可以在不创建标签的情况下替换文本？

我正在使用模板在 word 文档中填写一些数据。我需要填写的一件事是修订号，例如：“1º Revision”（[onshow.rev]）

但是生成的文件可以多次重新提交，每次都需要增加修订，但是由于标签[onshow.rev]从第一次消失了，我不能再这样做了。是否可以将文本“1º Revision”替换为“2º Revision”行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:07:05.313

使用 TinyButStrong，您可以直接使用`$TBS->Source`.
但是，通过 TBS 上的 OpenTBS，您必须注意只有当前子文件才能被`$TBS->Source`.

例如，如果您正在处理 Ms Excel 工作表，那么您必须执行 a`$TBS->PlugIn(OPENTBS_SELECT_SHEET, $Sheet)`才能选择要修改的工作表。

以下是如何替换模板中的项目：

```
$TBS->Source = str_replace("1º Revision", "2º Revision", $TBS->Source); 
```

# apache - htaccess 将真实目录路径重写为不同的、不存在的 url，隐藏真实路径

> ID：12683231
> 
> 赞同：0
> 
> 时间：2012-10-02T01:07:16.027
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想使用类似的目录`___test`并`/___test/subdirectory1/`包含一些内容，但从不在 url 中显示此路径。相反，我希望 url`/demo/subdirectory1`或者说，`/demo/subdirectory1/images/image.jpg`指向`/___test/subdirectory1/images/image.jpg`和浏览器上的 url 保持为：`/demo/subdirectory1/images/image.jpg`。实际上替换`___test`为`demo`

我尝试过的各种问题虽然看起来有时有效，但它是：

```
RewriteRule ^demo/subdirectory1(.*) ___test/subdirectory1/$1 
```

以上仅适用于： `demo/subdirectory1`或 `demo/subdirectory1/`（使用现有内容示例，其中包含 index.html `/___test/subdirectory1/`）但不适用于 `demo/subdirectory1/somethingmore...`尽管在这种情况下内容也存在，但不幸的是它在 url 中显示了真实的目录路径。

此外，我使用以下内容通过 404 到从`/___test`url 开始的任何内容：

```
RewriteCond %{THE_REQUEST} ^GET\ /___test/
RewriteRule ^___test/(.*) - [R=404,L,NC] 
```

它可以工作，但是当我添加它时，不幸的是（再次），前一个也变成了 404。但对我来说最重要的是把第一部分做好，即使我从来没有做过第二部分。

任何帮助都非常感谢。谢谢。

编辑 1：我也尝试在`/___test/subdirectory1/.htaccess`

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /___test/subdirectory1 
```

没有成功。

编辑 2：虽然效果不佳，但到目前为止我在 Jon Lin 的帮助下想出的最好的方法如下：

```
RewriteCond %{REQUEST_URI} ^/demo/subdirectory1(.*)
RewriteCond %{DOCUMENT_ROOT}/___test/subdirectory1/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/___test/subdirectory1/%1 -d
RewriteRule ^ /___test/subdirectory1/%1 [L] 
```

`/demo/subdirectory1`<- 好的

`/demo/subdirectory1/`<- 好的

`/demo/subdirectory1/subdirectory2`<- 暴露真实路径

`/demo/subdirectory1/subdirectory2/`<- 好的

`/demo/subdirectory1/subdirectory2/subdirectory3`<- 暴露真实路径

`/demo/subdirectory1/subdirectory2/subdirectory3/`<- 好的

正如你所看到的，任何比`subdirectory1`问题更深层次的东西。我只是不明白为什么。在 linux apache 上的站点根目录中存在的干净 .htaccess 文件上进行测试（没有其他更深的文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:24:28.340

在大多数情况下，您都在正确的轨道上，但您可能需要添加一些检查以使`__test`目录不暴露：

```
RewriteEngine On

# prevent mod_dir from redirecting to trailing slash
RewriteCond %{REQUEST_URI} ^/demo/subdirectory1/(.*[^/])
RewriteCond %{DOCUMENT_ROOT}/___test/subdirectory1/%1 -d    
RewriteRule ^ /demo/subdirectory1/%1/ [L,R=301]

RewriteCond %{REQUEST_URI} ^/demo/subdirectory1$
RewriteRule ^ /demo/subdirectory1/ [L,R=301]

# check if the file actually exists first
RewriteCond %{REQUEST_URI} ^/demo/subdirectory1/(.*)
RewriteCond %{DOCUMENT_ROOT}/___test/subdirectory1/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/___test/subdirectory1/%1 -d

# and rewrite only if the resource exists within ___test
RewriteRule ^ /___test/subdirectory1/%1 [L] 
```

使用 .确保您已在当前迭代中结束重写`[L]`。

您的 404 规则应该有效，但您应该删除尾部斜杠，以便 mod_dir 不会尝试重定向和公开`___test`目录：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /___test
RewriteRule ^ - [R=404,L,NC] 
```

# javascript - 为什么 new 与函数表达式一起使用？

> ID：12683242
> 
> 赞同：3
> 
> 时间：2012-10-02T01:08:17.367
> 
> 标签：javascript

在查看一些源代码时，我发现了这一点：

```
require["./helpers"] = new function() {...}; 
```

为什么`new`在这里被使用？当我在 JSLint 上运行它时，我得到

`Weird construction. Delete 'new'.`

那么这只是一种风格，个人喜好吗？或者这背后有什么东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T01:13:45.647

这是一种创建对象的方法，允许`this`在创建过程中使用。

这在对象文字语法不允许的实例化期间提供了对对象的一些直接引用。

```
var o = new function() {
    this.num = Math.random();
    this.isLow = this.num < .5; // you couldn't reference num with literal syntax
}; 
```

对象文字版本需要如下所示：

```
var o = {
    num: Math.random()
};
o.isLow = o.num < .5; 
```

所以匿名函数基本上是用作临时构造函数的。我们可以很容易地使用一个命名的构造函数，但是由于我们并不真正关心构造函数，我们只使用一个“一次性”的。

当然，由于它是一个函数，它会创建一个局部变量范围，因此如果您将任何函数分配给新对象，它们将能够关闭局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:28:00.597

它基本上与 IIFE 做同样的事情，它返回某种公共接口（一个具有公共属性/方法的对象，可以访问函数的私有范围），除了那些在构建过程中***真的非常***想使用的人`this`, 并且懒得使用`call`,`bind`或`apply`, 或者直接返回一个常规的内联对象。

在幕后，IIFE 和构造函数之间存在一些差异，当两者都以预期的方式使用时......但在这种情况下，无论哪种方式，最终返回值实际上并没有任何本质上的不同，从高层次（即：就您的程序而言）。

# optimization - 基本队列优化

> ID：12683244
> 
> 赞同：0
> 
> 时间：2012-10-02T01:08:33.540
> 
> 标签：optimization, queue

如何为典型的队列优化：

访问/存储

内存使用情况

除了尝试在其上运行压缩算法之外，我不确定是否要减少内存，但这将花费相当多的存储时间作为权衡 - 我必须重新压缩我认为的所有内容。

因此，我在想带有指针的典型链表....一个圆形队列？

有任何想法吗？

谢谢

编辑：不管上面是什么；本质上如何制作最快/最少内存密集型的基本队列结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:47:30.810

链表实际上并不是很典型（除非在函数式语言中或者当新手错误地认为链表比动态数组快时）。动态循环缓冲区更为典型。增长（以及，可选地，收缩）的工作方式与动态数组略有不同：如果“数据保存部分”越过数组的末尾，数据应该以保持连续的方式复制到新空间（简单地扩展数组会在数据中间产生间隙）。

像往常一样，它有一些优点和一些缺点。

缺点：

*   稍微复杂的实现
*   不适合无锁同步

优点：

*   更紧凑：在最坏的情况下（当它刚刚增长或即将缩小但还没有时）它有大约 100% 的空间开销，单链表几乎*总是*有 100%*或更多*的开销（除非数据元素大于指针），双向链表更糟糕。
*   缓存效率：读取发生在接近于先前的读取，写入发生在接近于先前的写入。因此缓存未命中很少见，当它们确实发生时，它们会读取最相关的数据（或者在写入的情况下：它们得到一个可能很快会再次写入的缓存行）。在链表中，局部性很差，每次缓存未命中的大约一半都浪费在开销上（指向其他节点的指针）。

通常这些优点大于缺点。

# sql - SQL：根据多组最小值选择多列？

> ID：12683248
> 
> 赞同：0
> 
> 时间：2012-10-02T01:09:13.000
> 
> 标签：sql, sql-server

以下查询给了我一行，因为`b.id`已固定。我想要一个查询，我可以给出一组 id 并为每个 id 获取最小值行。

我想要的效果就像我将此查询包装在一个循环中，覆盖一组 id，并使用每个 id 执行查询，`b.id = value`但这将是（数十个？）数千个查询。

```
 select top 1 a.id, b.id, a.time_point, b.time_point
from orientation_momentum a, orientation_momentum b
where a.id = '00820001001' and b.id = '00825001001'
order by calculatedValue() asc 
```

这是在 sql-server 上，但如果可能的话，我更喜欢便携式解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:21:44.687

SQL Server 排名功能应该可以解决问题。

```
select * from (
select a.id, b.id, a.time_point, b.time_point, 
rank() over (partition by a.id, b.id
order by calculatedValue() asc) ranker
from orientation_momentum a, orientation_momentum b
where a.id = '00820001001' and b.id between 10 and 20
) Z where ranker = 1 
```

# javascript - 如何通过 html/javascript 表单输入在服务器上创建新的 html 页面

> ID：12683251
> 
> 赞同：0
> 
> 时间：2012-10-02T01:09:41.253
> 
> 标签：javascript, html, forms

我想知道是否可以使用基本的 html / javascript 表单来输入数据，然后单击提交按钮时，结果是在 Web 服务器上创建了一个新的 html 文档。初始表单内容将用于确定在创建新 html 页面时将哪些数据添加到该页面。大概使用 PHP/MySQL。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:22:17.107

JavaScript 在客户端而不是服务器上运行，因此它不能直接创建文件。这将使用处理表单的服务器上的 PHP 脚本来完成。这与基于表单数据显示页面非常相似，但它写入文件：

```
$f = fopen($filename, 'w') or die "Can't create file $filename";
fprintf($f, "<html>\n<body>\n");
// and so on
fprintf($f, "</body>\n</html>\n");
fclose($f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:39:05.677

您可以这样做，但我强烈建议您不要将此类内容放在网站上。像这样的工具很容易让攻击者在您的网站上放置他们喜欢的任何类型的代码。如果您创建这样的工具，您可以使用网络服务器对目录进行密码保护或创建某种身份验证系统。如果您希望能够使用数据库编辑页面，那么有很多内容管理系统已经允许您这样做。Drupal 或 Wordpress 是几个不错的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:54:04.300

实际上不需要在服务器上创建整个 html 页面。更好的方法是将表单的数据实际保存在数据库中。当您需要显示数据时，只需填充模板并提供服务。这将使所有这些页面的管理变得更加容易，因为只需对模板进行任何更改，而不是对创建的文件进行更改。

例如，假设您的表单具有名字、姓氏和评论字段。你可能会存储。

```
{ firstName: 'John', lastName: 'Doe', comment: 'This was good' }
{ firstName: 'Jane', lastName: 'Doe', comment: 'This was bad' } 
```

而且您可能`template.html`在服务器上有一个，如下所示：

```
<html>
<head><title>View Comment</title></head>
<body>
    Name: {{lastName}}, {{firstName}}
    Comment: {{comment}}
</body>
</html> 
```

这使用[Mustache.js](https://github.com/janl/mustache.js)特定的语法，但你可以选择任何你喜欢的。发出请求时，您只需用数据填充占位符，瞧！一个动态的html页面。

# mysql++ - MySql++ 安装 Linux 12.04 LTS

> ID：12683253
> 
> 赞同：0
> 
> 时间：2012-10-02T01:09:54.310
> 
> 标签：mysql++

来自 tangentsoft 的 mysql++ 包是 3.1.0 版，我在我的 linux 系统上构建时遇到了问题。为了让它配置我必须用标志指定

./configure --with-mysql-lib=/usr/lib/i386-linux-gnu/

否则在查找 mysqlclient 库时会出现问题。现在不幸的是它不会犯，我得到的错误是 ./lib/refcounted.h:258:2: error: 'size_t' does not name a type，在我输入 make 之后和在我输入 make install 之前。

有没有人在编译时遇到同样的问题，你找到解决方案了吗？

感谢它解决这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:17:13.940

MySQL++ 版本中有一些`#include`修复`svn`尚未包含在发布版本中。它们在像您这样的现代操作系统上是必需的，其中包括最近的 GCC 和`libstdc++`'s。

不要担心`svn`在生产中使用该版本。目前相当稳定。我不按原样发布它的原因与稳定性无关。

# c - GtkEntry 透明背景而不使整个小部件透明？

> ID：12683255
> 
> 赞同：2
> 
> 时间：2012-10-02T01:10:16.943
> 
> 标签：c, gtk

我只想让背景透明而不是整个小部件，我知道我可以让整个窗口透明，但是光标也会消失？本质上对于 gtk_widget_modify_bg 我想传递一个透明的颜色。我尝试使用这个：

```
GdkColor color;
gkd_color_parse(&color, "#000000000");
gtk_widget_modify_bg ... 
```

颜色出来为黑色，或一些随机的透明颜色。

我尝试这样做但仍然没有结果：

```
static gboolean on_expose(GtkWidget *widget,  GdkEventExpose *event,   gpointer data)
{
  cairo_t *cr;
  cr = gdk_cairo_create(gtk_widget_get_window(widget));
  cairo_set_source_rgba(cr, 0, 0, 1, 0.1);
  cairo_destroy(cr);

  return FALSE;
} 
```

我想`gdk_window_shape_combine_mask`可能是另一个方向。

# wpf - 是否可以在外部程序集中使用样式而不将它们合并到 app.xaml 的 ResourceDictionary 中？

> ID：12683256
> 
> 赞同：0
> 
> 时间：2012-10-02T01:10:31.113
> 
> 标签：wpf, xaml

我试图解决的理想情况是这样的：

1.  MyCompany.Styles.dll 程序集中定义了一组常用样式。

2.  MyCompany.Controls.dll 程序集中有一组自定义控件使用 MyCompany.Styles.dll 程序集中的样式。

3.  任何使用 MyCompany.Controls.dll 程序集中的控件的应用程序都不需要在应用程序的 app.xaml 中引用 MyCompany.Styles.dll 程序集中的任何 ResourceDictionary，但只要样式被引用并且由 MyCompany.Controls.dll 程序集使用。

这可能吗？如果可以，怎么做？

非常感谢，尤金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:42:55.290

这是可能的，所以我为任何偶然发现我原来的问题的人发布了解决方案。

修复方法是将所需样式合并到 MyCompany.Controls.dll 程序集中每个自定义控件的 ResourceDictionary 中。虽然我在 XAML 中没有成功执行此操作，但只需将以下调用添加到每个自定义控件的构造函数中：

```
this.MergeInResources("/MyCompany.Styles;component/default.xaml"); 
```

神奇的扩展方法如下：

```
 /// <summary>
    /// Loads the resources pointed to by the (relative) path
    /// <paramref name="resourcePath"/> into the Merged Dictionaries
    /// of <paramref name="control"/>.
    /// </summary>
    internal static void MergeInResources(this FrameworkElement control,
                                          string resourcePath)
    {
        if (String.IsNullOrWhiteSpace(resourcePath))
            throw new ArgumentNullException("resourcePath");

        Uri uri = new Uri(resourcePath, UriKind.Relative);
        ResourceDictionary dictionary = (ResourceDictionary)Application.LoadComponent(uri);
        control.Resources.MergedDictionaries.Add(dictionary);
    } 
```

错误处理和 ResourceDictionary 缓存 + 共享留给读者。

# javascript - 如何根据下拉列表中选择的数字多次执行相同的操作？

> ID：12683260
> 
> 赞同：2
> 
> 时间：2012-10-02T01:10:47.583
> 
> 标签：javascript, jquery, dynamic

如何生成多组下拉列表和文本类型输入字段（其中一组由 3 个下拉列表和 1 个输入类型 = 文本组成），基于它必须生成的次数是通过从另一个下拉列表中选择一个数字。

我的代码是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Add New Detail</title>
<link href='http://fonts.googleapis.com/css?family=Orienta' rel='stylesheet' type='text/css'>

<style type="text/css">
#main {
    background-color:#0CF;
    width:600px;
    padding:25px 0;
}

#drop_box_set {
    background:#666;
    width:90%;
    color:#FFF;
    padding:25px 0;
}

</style>
<!------------------------------------------------------------------------------------------------>
<!--------------------------- CHANGE OPTIONS ON CHILD DROPDOWN SCRIPT ---------------------------->
<!------------------------------------------------------------------------------------------------>

<script type="text/javascript">
function setOptions(chosen, selbox) {

selbox.options.length = 0;
if (chosen == " ") {
  selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
setTimeout(setOptions(' ',document.add_new_customer_form.optthree),5);
}
if (chosen == "1") {
  selbox.options[selbox.options.length] = new Option('first choice - option one','11');
  selbox.options[selbox.options.length] = new Option('first choice - option two','12');
setTimeout(setOptions('11',document.add_new_customer_form.optthree),5);
}
if (chosen == "2") {
  selbox.options[selbox.options.length] = new Option('second choice - option one','21');
  selbox.options[selbox.options.length] = new Option('second choice - option two','22');
setTimeout(setOptions('21',document.add_new_customer_form.optthree),5);
}
if (chosen == "3") {
  selbox.options[selbox.options.length] = new Option('third choice - option one','31');
  selbox.options[selbox.options.length] = new Option('third choice - option two','32');
setTimeout(setOptions('31',document.add_new_customer_form.optthree),5);
}
if (chosen == "11") {
  selbox.options[selbox.options.length] = new Option('first choice - option one - sub one','111');
  selbox.options[selbox.options.length] = new Option('first choice - option one - sub two','112');
}
if (chosen == "12") {
  selbox.options[selbox.options.length] = new Option('first choice - option two - sub one','121');
  selbox.options[selbox.options.length] = new Option('first choice - option two - sub two','122');
}
if (chosen == "21") {
  selbox.options[selbox.options.length] = new Option('second choice - option one - sub one','211');
  selbox.options[selbox.options.length] = new Option('second choice - option one - sub two','212');
}
if (chosen == "22") {
  selbox.options[selbox.options.length] = new Option('second choice - option two - sub one','221');
  selbox.options[selbox.options.length] = new Option('second choice - option two - sub two','222');
}
if (chosen == "31") {
  selbox.options[selbox.options.length] = new Option('third choice - option one - sub one','311');
  selbox.options[selbox.options.length] = new Option('third choice - option one - sub two','312');
}
if (chosen == "32") {
  selbox.options[selbox.options.length] = new Option('third choice - option two - sub one','321');
  selbox.options[selbox.options.length] = new Option('third choice - option two - sub two','322');
}
}
</script>

</head>

<body>

<div align="center"><!--DIV ALIGNMENT CENTER START-->

<div id="main"><!--DIV MAIN START-->

<form name="add_new_customer_form" method="post" action="">

<label class="description">Number Of Computer Devices : </label>

            <select name="element_19" class="short_select"> 
                <option value="" selected="selected"></option>
                        <option value="01" >01</option>
                        <option value="02" >02</option>
                        <option value="03" >03</option>
                        <option value="04" >04</option>
                        <option value="05" >05</option>
                        <option value="06" >06</option>
                        <option value="07" >07</option>
                        <option value="08" >08</option>
                        <option value="09" >09</option>
                        <option value="10" >10</option>
                        <option value="11" >11</option>
                        <option value="12" >12</option>
                        <option value="13" >13</option>
                        <option value="14" >14</option>
                        <option value="15" >15</option>

        </select>
<div id="drop_box_individual"><!--DIV DROP_BOX_INDIVIDUAL START-->
<label class="description">Device Type : </label>

            <select name="optone" class="element select medium" style="width:200px;" onchange="setOptions(document.add_new_customer_form.optone.options[document.add_new_customer_form.optone.selectedIndex].value,document.add_new_customer_form.opttwo);">
                <option value=" " selected="selected"> </option>
                        <option value="1">First Choice</option>
                        <option value="2">Second Choice</option>
                        <option value="3">Third Choice</option>
            </select>

</div><!--DIV DROP_BOX_INDIVIDUAL ENDS-->

<div id="drop_box_individual"><!--DIV DROP_BOX_INDIVIDUAL START-->
<label class="description">Device Brand : </label>

            <select name="opttwo" class="element select medium" style="width:200px;" onchange="setOptions(document.add_new_customer_form.opttwo.options[document.add_new_customer_form.opttwo.selectedIndex].value,document.add_new_customer_form.optthree);">
                <option value=" " selected="selected"></option>
            </select>
</div><!--DIV DROP_BOX_INDIVIDUAL ENDS-->

<div id="drop_box_individual"><!--DIV DROP_BOX_INDIVIDUAL START-->
<label class="description">Operating System : </label>

            <select name="optthree" class="element select medium" style="width:200px;">
                <option value=" " selected="selected"></option>
            </select>

</div><!--DIV DROP_BOX_INDIVIDUAL ENDS-->

<div id="drop_box_individual"><!--DIV DROP_BOX_INDIVIDUAL START-->
<label class="description">Serial Number : </label>

            <input name="element_10" class="element text medium" type="text" maxlength="255" value=""/>
</div><!--DIV DROP_BOX_INDIVIDUAL ENDS-->
</form>
</div><!--DIV MAIN ENDS-->
</div><!--DIV ALIGNMENT CENTER ENDS-->

</body>
</html> 
```

另外，这是我在寻找解决方案时遇到的[jsFiddle的链接。](http://jsfiddle.net/gilly3/v5kvX/1/)

在上面的 jsFiddle 中，如果单击“添加”按钮，它会生成一组 02 下拉列表 + 01 type=text 输入字段和一个 REMOVE 按钮，以防某些生成的超出要求。

这正是我需要的，但不同的是我需要它是一个自动化的过程。

我需要的是（根据我的代码）：

如果从“计算机设备数量”的第一个下拉列表中选择 05，它应该生成 05 组下拉框和 type=text 输入并删除按钮。

它应该生成 05 个集合，其中`01 set = 03 dropdowns + 01 type=text`输入字段和删除按钮（如果生成的数量超过 requiremt）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:40:25.323

在您的代码中添加一个循环。

像这样

**JS**

```
$(function() {
    $("input[type=button][value=Add]").click(function(e) {
        for (i = 0; i < document.getElementById('sel').value; i++) {
            e.preventDefault();
            var newDiv = $("<div>").appendTo("#div");
            $("<input>").attr("name", "a").appendTo(newDiv);
            $("<input>").attr("name", "b").appendTo(newDiv);
            $("<select>").attr("name", "c").appendTo(newDiv).append(
            $("<option>").val("0").text("Option 1"), $("<option>").val("1").text("Option 2"));
            $("<select>").attr("name", "d").appendTo(newDiv).append(
            $("<option>").val("0").text("Option 1"), $("<option>").val("1").text("Option 2"));
            $("<button>").text("Remove").appendTo(newDiv).click(function(e) {
                e.preventDefault();
                newDiv.remove();
            })
        }
    })
}) 
```

**HTML**

```
<form>
    <div id="div"></div>
    <select id="sel">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
    <input type="button" value="Add" />
</form> 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/bYBPD/](http://jsfiddle.net/RASG/bYBPD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:28:08.953

只是一个提示：您可以替换：

```
> <select name="optone" ... onchange="setOptions(document.add_new_customer_form.optone.options[document.add_new_customer_form.optone.selectedIndex].value,document.add_new_customer_form.opttwo);"> 
```

和：

```
<select name="optone" ... onchange="setOptions(this.value, this.form.opttwo)"> 
```

对于其他听众也是如此。

我还建议您摆脱 XHTML 过渡 DOCTYPE，显然您并没有过渡到 XHTML（自 XHTML 1.0 以来已经有 12 年了，而且非常非常少的网站将文档作为 XML 提供，无论 DOCTYPE 是什么），只需使用`DOCTYPE html`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:40:50.127

我不确定我是否理解您的所有代码，但让我看看我是否理解您的问题：

您有一个表单，您希望用户从下拉框中选择多个设备。用户选择一个数字后，您希望填充相应数量的表单元素。

你为什么不把你的一些代码与[这个例子](http://jsfiddle.net/mbeasley183/HM4zC/)合并。

# css - 垂直居中的 Jquery 幻灯片在 Firefox 中不起作用

> ID：12683268
> 
> 赞同：1
> 
> 时间：2012-10-02T01:12:14.410
> 
> 标签：css, jquery-ui, firefox

我的 JQuery UI 垂直幻灯片在 Firefox 中不起作用，因为它`display:table-cell`用于`.label`垂直居中文本。

请参阅：[JSFiddle](http://jsfiddle.net/tt4LK/3/)

如何在 Firefox 中修复但保持垂直居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:18:12.970

只需在标签之外创建一个 div 并为 div 设置动画：

HTML：

```
<div id="labels">
    <div>
    <p class="label" data-groupl="1">Vertically centered text</p>
    </div>
</div> 
```

jQuery：

```
$(".label").parent().show("slide", { direction: "right" }, 1000); 
```

# xcode - Xcode 如何自动收缩 UITextView？

> ID：12683270
> 
> 赞同：6
> 
> 时间：2012-10-02T01:12:32.777
> 
> 标签：xcode, text, textview, uitextview

我有一个文本视图框，我希望该矩形保持相同的大小，而里面的文本会自动收缩以适合该框。我需要这个的原因是因为文本是从 plist 中提取的，并且字符串的长度都不同。标签有一个 Autoshrink 功能，这正是我想要的，但我什至无法通过代码找到一种方法来让 Text View 做同样的事情。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:21:24.440

`UILabel`s 可以有多于一行的文本。您只需要设置以下内容：

```
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0; // 0 = unlimited number of lines, set to another number to have that as maximum 
```

我不完全确定这是否有效，但您可以将其与`label.adjustsFontSizeToFitWidth = YES;`自动收缩文本的多行标签结合使用。

# jquery - 扩展页面内的 iframe 内的 AJAX 调用

> ID：12683272
> 
> 赞同：0
> 
> 时间：2012-10-02T01:12:52.413
> 
> 标签：jquery, google-chrome-extension

我有一个 chrome 扩展，它在扩展页面内的 iframe 中显示来自 Web 服务的 UI 作为它自己的 UI。我正在使用以下方法将一些内容脚本注入远程 UI：

```
"content_scripts": [
  {
    "matches" : [ "https://mywebservice.com/frontend/*" ] ,
    "js" : [ "frontend-page-contentscript.js" ],
    "all_frames" : true
  }
] 
```

这是允许的，因为（也在 manifest.json 中）：[编辑：事实证明不需要在 iframe 中运行内容脚本 - 但删除它不会使 AJAX 以我期望的方式工作]。

```
"sandbox" : {
  "pages" : [
    "cocoon_page_proxy.html"
  ]
} 
```

但是，当我进行微不足道的 ajax 调用（不是来自内容脚本，来自 iframe）时：

```
$.get('asdf',function success(data) { console.log("Success"); },
             function error(xhr) { console.log("Error: "+xhr.responseText); }); 
```

我没有得到任何回应，它停止并获得“0”的状态。这（根据我的经验）通常是由于跨域权限问题，但它不应该是 - 它正在从主页所在的同一服务器请求另一个资源。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:43:20.490

叹息 - 结果是我的扩展中其他地方的错误，在 webrequest 重定向代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:56:49.967

假设我理解正确并且您正在将`chrome-extension://`URL 加载到框架中并尝试从那里 XHR 远程页面的内容，您需要[请求该域的跨域权限](http://developer.chrome.com/extensions/xhr.html#requesting-permission)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:33:27.657

因此，您实际上可以使用 Chrome 中的 webRequest api 强制跨域 ajax。`Access-Control-Allow-Origin`您只需在HeadersReceived 上添加http 标头。

```
chrome.webRequest.onHeadersReceived.addListener(function onHeadersReceived(resp) {
  resp.responseHeaders.forEach(function forEachHeader(header, index) {
    if(header.name.toLowerCase() === "access-control-allow-origin") {
      resp.responseHeaders[index].value = "*";
    }
  });
  resp.responseHeaders[resp.responseHeaders.length] = {
    "name":"Access-Control-Allow-Origin",
    "value":"*"
  };
  return {responseHeaders: resp.responseHeaders};
}, {
  urls: [
  //chrome-extension://jkafskjifsf/cocoon_page_proxy.html
    chrome.extension.getURL('') + 'cocoon_page_proxy.html',
   '*://your.api.endpoint.domain.com/*'
  ] ,
  types: [
    'sub_frame'
  ]
}, ['blocking', 'responseHeaders']); 
```

尝试将其添加到您的背景页面。如果您没有后台页面，请将其添加到您的 manifest.json 并创建关联文件：

```
"background": {
  "scripts": [ "background.js" ]
} 
```

您还需要将这些项目添加到`permissions`manifest.json 文件中的现有列表中：

```
//"permissions": [
    "chrome-extension://<put_your_extension_id_here>/cocoon_page_proxy.html",
    "*://your.api.endpoint.domain.com/*",
    "webRequest",
    "webRequestBlocking"
//], 
```

对于 URL，如`*://your.api.endpoint.domain.com/*`，添加您也需要发出 ajax 请求的任何 url。

请评论这是如何工作的，如果您遇到任何问题。

# castle-windsor - 温莎城堡设施与 Nancy Windsor Bootstrapper 配合得不好

> ID：12683274
> 
> 赞同：1
> 
> 时间：2012-10-02T01:13:15.917
> 
> 标签：castle-windsor, interceptor, nancy, windsor-facilities, multicastdelegate

我在尝试从 Nancy 0.7 升级到 0.12 时遇到了一个奇怪的问题。以前我正在注册一个工具来为我的引导程序中的所有服务进行日志记录：

```
 protected override void ConfigureApplicationContainer(IWindsorContainer existingContainer)
    {
        existingContainer.AddFacility<LoggingFacility>();
        existingContainer.Register(Component.For<LoggingInterceptor>());
        ...other registration
    } 
```

LoggingFacility 如下所示：

```
public class LoggingFacility : AbstractFacility 
{
    protected override void Init() { Kernel.ComponentRegistered += KernelComponentRegistered; }

    static void KernelComponentRegistered(string key, IHandler handler)
    {
        if (!ShouldProxyComponent(handler))
            return;

        // Don't add more than one logging interceptor to a component
        handler.ComponentModel.Interceptors.AddIfNotInCollection(InterceptorReference.ForType<LoggingInterceptor>());
    }

    static bool ShouldProxyComponent(IHandler handler)
    {
        //Don't log interceptors themselves
        if (typeof(IInterceptor).IsAssignableFrom(handler.ComponentModel.Implementation)) 
            return false;

        //Don't put proxy around any late-bound (usually factory-created) component
        if (handler.ComponentModel.Implementation == typeof(LateBoundComponent))
            return false;

        return true;
    }
} 
```

不幸的是，自从升级到 0.12/Castle 3.1 后，以下行`WindsorNancyBootstrapper.RegisterTypes`导致了一些问题

```
 container.Register(Component.For<Func<IRouteCache>>()
            .UsingFactoryMethod(ctx => (Func<IRouteCache>) (ctx.Resolve<IRouteCache>))); 
```

基本上，Castle 试图围绕 Func 创建一个动态代理。如果此注册触发了我的设施订阅的事件，这会很好，但它不会。然而拦截器似乎已经注册了。

尝试创建代理时，它显然失败了，因为 MulticastDelgate（IL 的 Func<> 的父级）被密封：TypeLoadException 无法从程序集 'DynamicProxyGenAssembly2，Version=0.0.0.0，Culture=neutral 加载类型'Castle.Proxies.Func`1Proxy' , PublicKeyToken=a621a9e7e5c32e69' 因为父类型是密封的。

我不确定在这里做什么，有人对设施和南希 0.12 有任何经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:49:27.157

对我来说，解决方案是注册 Castle TypedFactoryFacility 作为我覆盖 Nancy 引导程序的一部分：

```
existingContainer.AddFacility<TypedFactoryFacility>(); 
```

Nancy.Bootstrappers.Windsor有一个[拉取请求](https://github.com/NancyFx/Nancy.Bootstrappers.Windsor/pull/8)，其中包含该更改作为其余更改的一部分

# java - 如何重载 LinkedList 的 add 方法？

> ID：12683275
> 
> 赞同：0
> 
> 时间：2012-10-02T01:13:21.080
> 
> 标签：java, linked-list

我必须重载 LinkedList 的 add 方法，以便它按订单号（整数）按顺序添加新的 CustomerOrders。这是我到目前为止的代码。

```
public boolean add(CustomerOrder order)
{

    ListIterator<CustomerOrder> i = this.listIterator();

    if(!(i.hasNext())) //there are no orders in the list
    {
        i.add(order);
        return true;
    }

    while(i.hasNext())
    {
        int compare = order.compareTo(i.next(), 1);//compareTo returns 0 if the orders have the same order number, 1 if order greater order num, -1 if order has lower order num

        if(compare == 0) //can't add the order if another order has the same order num
        {
            return false;
        }
        else
        {
            if(compare == 1) //order is greater than i.next()
            {
                i.add(order); //my guess is that the problem is here
                return true;
            }
        }
    }

    return false;
} 
```

当我输入订单号为 1 到 5 的订单时，列表为 1、5、4、3、2。我想要的是列表为 1、2、3、4、5。谁能指出我哪里出错并给我一些修复它的提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:15:36.463

我认为您真正想要的数据结构是[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)。

就您的代码中的错误而言，我很确定问题是当前将在*较小的元素**之后*`i.add(order)`插入新元素，而要获得您想要的顺序，您需要在*较大的*元素*之前*插入它。

# c - C - 你如何使用 select() 与多个管道？

> ID：12683282
> 
> 赞同：2
> 
> 时间：2012-10-02T01:15:08.740
> 
> 标签：c, select, pipe

我很难弄清楚 select() 是如何与 UNIX 中的管道一起工作的。我已经多次扫描手册页，但我并不完全理解给定的定义。

通过阅读手册页，我的印象是 select() 会让系统等待，直到给定的文件描述符之一可以从管道中读取（在我的情况下）而不会阻塞。

这是我的一些大纲代码[编辑]：

```
int size, size2;
fd_set rfds;
struct timeval tv;
char buffer[100];
char buffer2[100];
int retval;

while(1)
{
    FD_ZERO(&rfds);
    FD_SET(fd[0], &rfds);
    FD_SET(fd2[0], &rfds);
    tv.tv_sec = 2;
    tv.tv_usec = 0;
    retval = select(2, &rfds, NULL, NULL, &tv); //2 seconds before timeout

    if(retval == -1)
       perror("Select failed.\n");
    else if(retval)
    {
       size = read(fd[0], buffer, sizeof(buffer));
       if(size > 0)
          printf("Parent received from even: %s\n", buffer);
       size2 = read(fd2[READ], buffer2, sizeof(buffer2));
       if(size2 > 0)
          printf("Parent received from odd: %s\n", buffer2);
    }
    else
       printf("No data written to pipe in 2 last seconds.\n");
} 
```

我这里有两个管道。两个子进程正在写入各自的管道，父进程必须同时读取它们。

作为测试，我在每个管道上写了一个小字符串。然后我尝试读入它们并防止用 select 阻塞。唯一打印出来的是偶数管中的字符串。它似乎仍在阻止。我感到很沮丧，因为我觉得我在手册页上遗漏了一些东西。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T01:33:30.143

返回后`select()`，您的 0 个或多个文件描述符将处于“就绪”状态，您可以在不阻塞的情况下读取它们。但是如果你读到一个还没有准备好的，它仍然会阻塞。现在你正在阅读所有这些，因为 select() 只等到一个准备好，很可能另一个不会。

你需要做的是找出哪些已经准备好了，而且只能`read()`从他们那里得到。的返回值`select()`会告诉你有多少准备好了，你可以用`ISSET()`宏询问一个特定的是否准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:22:52.240

1.  你需要使用`FD_ZERO()`- 见[select](http://linux.die.net/man/2/select)之前`FD_SET`
2.  在选择之前设置超时值。这些值通过`select`

# css - 如何使用 CSS 制作圆角切口？

> ID：12683284
> 
> 赞同：3
> 
> 时间：2012-10-02T01:15:29.500
> 
> 标签：css, rounded-corners

我想使用 CSS 制作如下图所示的内容：

![在此处输入图像描述](../Images/414c84309f8f7cfddceee44db10589f0.png) 我完全不知道如何做到这一点。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T01:19:59.163

这可以使用两个元素或一个元素和一个伪元素来完成：

**HTML：**

```
<div></div> 
```

**CSS：**

```
div { position:relative; background-color:#333; padding:20px;
      margin:20px; float:left; }

div:before { content:""; display:block; padding:5px; background-color:#f60;
             border:2px solid white; position: absolute; top:-2px;
             right:-2px;}​ 
```

[http://jsfiddle.net/Vv6Eb/](http://jsfiddle.net/Vv6Eb/)

* * *

**更新：**

与`border-top-right-radius`：

[http://jsfiddle.net/Vv6Eb/1/](http://jsfiddle.net/Vv6Eb/1/)

或者，`border-bottom-left-radius`：

[http://jsfiddle.net/Vv6Eb/4/](http://jsfiddle.net/Vv6Eb/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:45:49.280

```
<div id="page">
         <div id="up">

        </div>
        <div id="logo">
            <div id="logobody"></div>    
        </div>
        <div id="down">

        </div>

</div>​

#page{
    margin:30px auto;
    width:500px;
    height:auto;
    border-radius:10px;
    border:2px red thin;
    background:white;
    overflow:hidden;
}
#logo{
   float:right;
    width:100px;
    height:70px;
    border-radius:10px;
    background:white;
    margin-top:-70px;
    margin-right:10px;
}
#up{

    width:80%;
    height:60px;
    border-radius-top:10px;
    background:gray;

}
#down{
    margin-top:-0px;
    margin-right:-10px;
    width:100%;
    height:60px;
    border-radius: 0px 10px 10px 10px;
    background:gray;

}

#logobody{
    border:2px blue solid;
    margin :auto;
    width:85px;
    height:50px;
    margin-top:10px;
    margin-right:0px;
    border-radius:7px;
}
​ 
```

[jsFiddle](http://jsfiddle.net/afshinprofe/KPjty/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:22:32.380

使用浮动..http://www.w3schools.com/css/css_float.asp

```
<div style="background-color:#000; height:500px; width:500px; margin-bottom:10px;">

<div style="background-color:#FFF; float:right; height:100px; width:100px; margin-right:10px; margin-top:10px;"></div>

</div>

<div style="background-color:#000; height:500px; width:500px; position:relative;">

<div style="background-color:#FFF; position:absolute; right:0px; height:100px; width:100px; margin-right:10px; margin-top:10px;"></div>

</div>​ 
```

不建议使用内联样式，因此可能想在样式表文件中编写样式。使用 float 使文本包装 div 标签。秒码栈

# python - 使用 Python 脚本在 MS SQL 数据库中创建表的问题

> ID：12683287
> 
> 赞同：7
> 
> 时间：2012-10-02T01:16:06.930
> 
> 标签：python, sql, sql-server

```
 import pyodbc
  cnxn = pyodbc.connect('DRIVER={SQL Server};' +
                           'SERVER=' + data.dbConnection()[0] + ';' +
                           'DATABASE=' + data.dbConnection()[3] + ';' +
                           'UID=' + data.dbConnection()[1] + ';' +
                           'PWD=' + data.dbConnection()[2])
  cursor = cnxn.cursor()
  cursor.execute(
  """
  CREATE TABLE Persons
  (
  P_Id int,
  LastName varchar(255),
  FirstName varchar(255),
  Address varchar(255),
  City varchar(255)
  )
  """
             )
  cursor.close()
  cnxn.close() 
```

以上代码成功连接数据库。该脚本在运行时也不会返回任何错误，但是当我检查表是否已创建时，SQL DB 中根本没有表。

为什么没有创建表，为什么没有返回错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-31T18:44:09.793

我认为您需要`cnxn.commit()`在`cnxn.close()`. 这就是您如何将程序中所做的更改保存到数据库中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T01:42:14.280

MS SQL Server 中的每个用户都有一个与之关联的默认架构。配置详细信息取决于 SQL Server 的版本，并在企业管理器中进行配置。我认为 SQL Management Studio 没有 GUI 可见性。
您可以尝试使用以下方法查询它：

```
select default_schema_name
, type_desc
, name
, create_date
from sys.database_principals
order by default_schema_name
, type_desc
, name 
```

您还可以通过在表名前添加模式名前缀来显式地在特定模式中创建表，即

```
create myschema.mytable as... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-14T19:03:43.060

在关闭连接之前，您的语句没有提交语句。在and语句`cnxn.commit()`之前使用语句。`cursor.close()``cnxn.close()`

# search - 这个 IMAP ESEARCH 命令语法有什么问题？

> ID：12683288
> 
> 赞同：1
> 
> 时间：2012-10-02T01:16:32.047
> 
> 标签：search, imap

我正在寻找一种方法来搜索我的邮件服务器上的所有 IMAP 文件夹。我最近发现了[IMAP ESEARCH 命令](https://www.rfc-editor.org/rfc/rfc6237#section-2)，它扩展了通常的 SEARCH 命令以跨文件夹搜索。然而，我似乎无法让它发挥作用。

我检查了邮件服务器是否支持`ESEARCH`. 远程登录后，我执行了以下操作：

```
* OK JAMES IMAP4rev1 Server Server server-address is ready.
A1 LOGIN test test
A1 OK LOGIN completed.
A2 CAPABILITY
* CAPABILITY SASL-IR IDLE LITERAL+ AUTH=PLAIN CONDSTORE ESEARCH CHILDREN UIDPLUS UNSELECT WITHIN ENABLE I18NLEVEL=1 SEARCHRES IMAP4rev1 NAMESPACE QRESYNC
A2 OK CAPABILITY completed.
A3 LIST "" "*"
* LIST (\HasNoChildren) "." "INBOX"
* LIST (\HasNoChildren) "." "Drafts"
* LIST (\HasNoChildren) "." "Sent"
* LIST (\HasNoChildren) "." "Trash"
A3 OK LIST completed. 
```

注意 的存在`ESEARCH`。然后我尝试了以下`ESEARCH`方法，但失败了。

```
A4 ESEARCH IN (mailboxes "INBOX") unseen
A4 BAD failed. Unknown command. 
```

普通的搜索工作正常：

```
A5 SELECT INBOX
* FLAGS (\Answered \Deleted \Draft \Flagged \Seen)
...
A5 OK [READ-WRITE] SELECT completed.
A6 SEARCH UNSEEN
* SEARCH 3
A6 OK SEARCH completed. 
```

从我可以阅读的规范和[正式语法](https://www.rfc-editor.org/rfc/rfc6237#section-4)来看，这应该可以工作。任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:00:25.590

该`ESEARCH`能力表明服务器支持定义响应和命令扩展格式的[RFC 4731](https://www.rfc-editor.org/rfc/rfc4731)和[RFC4466](https://www.rfc-editor.org/rfc/rfc4466)。`ESEARCH``SEARCH`

该`MULTISEARCH`功能 ( [RFC 6237](https://www.rfc-editor.org/rfc/rfc6237) ) 建立在`ESEARCH`能够在另一个邮箱中搜索而不是当前选择的邮箱的能力之上。您使用的命令语法需要`MULTISEARCH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:26:43.253

该文件表明`ESEARCH`由能力描述`MULTISEARCH`。

能力`ESEARCH`可能是别的东西？

# python - Python re.sub 无法正常工作

> ID：12683290
> 
> 赞同：0
> 
> 时间：2012-10-02T01:17:10.867
> 
> 标签：python, regex

试图在 python 工作中获得“sed replace”功能

我现在拥有的

```
def pysed(filename,search,replace):    
    for line in fileinput.input(filename,inplace=True):
        sys.stdout.write(re.sub(r'{0}','{1}',line.format(search,replace))) 
```

调用函数...

```
pysed('/dev/shm/FOOD_DES.txt','Butter','NEVER') 
```

文件 /dev/shm/FOOD_DES.txt 包含以下内容......

```
~01001~^~0100~^~Butter, salted~^~BUTTER,WITH SALT~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01002~^~0100~^~Butter, whipped, with salt~^~BUTTER,WHIPPED,WITH     SALT~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01003~^~0100~^~Butter oil, anhydrous~^~BUTTER OIL,ANHYDROUS~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01004~^~0100~^~Cheese, blue~^~CHEESE,BLUE~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01005~^~0100~^~Cheese, brick~^~CHEESE,BRICK~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01006~^~0100~^~Cheese, brie~^~CHEESE,BRIE~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01007~^~0100~^~Cheese, camembert~^~CHEESE,CAMEMBERT~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01008~^~0100~^~Cheese, caraway~^~CHEESE,CARAWAY~^~~^~~^~~^~~^0^~~^6.38^4.27^8.79^3.87
~01009~^~0100~^~Cheese, cheddar~^~CHEESE,CHEDDAR~^~~^~~^~Y~^~~^0^~~^6.38^4.27^8.79^3.87
~01010~^~0100~^~Cheese, cheshire~^~CHEESE,CHESHIRE~^~~^~~^~~^~~^0^~~^6.38^4.27^8.79^3.87 
```

但是，在运行此程序时，我收到以下错误。有什么想法、想法吗？

```
pysed('/dev/shm/FOOD_DES.txt','Butter','NEVER')    
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in pysed
  File "/usr/lib64/python2.6/re.py", line 151, in sub
    return _compile(pattern, 0).sub(repl, string, count)
  File "/usr/lib64/python2.6/re.py", line 245, in _compile
    raise error, v # invalid expression 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:30:01.687

你写了：

```
sys.stdout.write(re.sub(r'{0}','{1}',line.format(search,replace))) 
```

这相当令人困惑。这是你要写的吗？

```
sys.stdout.write(re.sub('{0}'.format(search), '{0}'.format(replace), line)) 
```

这当然相当于：

```
sys.stdout.write(re.sub(search, replace, line)) 
```

# python - 在python中解析时间字符串

> ID：12683293
> 
> 赞同：5
> 
> 时间：2012-10-02T01:17:44.627
> 
> 标签：python

> **可能重复：**
> [如何从一个简单的字符串构造一个 timedelta 对象](https://stackoverflow.com/questions/4628122/how-to-construct-a-timedelta-object-from-a-simple-string)

我有一个格式为的字符串，`hours:minutes:seconds`但它不是一天中的时间，而是持续时间。例如，`100:00:00`表示`100 hours`。

我试图找到从当前时间偏移字符串中指定的时间量的时间。我可以使用正则表达式手动拉开时间字符串并将其转换为秒并将其添加到返回的浮点数中`time.time()`，但是有一个`time`函数可以做到这一点吗？

`time.strptime()`函数格式似乎适用于时间/日期字符串，而不是任意字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T01:36:54.800

```
import datetime
dur_str = "100:00:00"
h, m, s = map(int, dur_str.split(':'))
dur = datetime.timedelta(hours=h, minutes=m, seconds=s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:26:54.280

不使用`re`，但有时理解正则表达式比编写 python 需要更多的工作。

```
>>> import datetime
>>> time_str = "100:00:00"
>>> hours, minutes, seconds = [int(i) for i in time_str.split(":")]
>>> time_in_seconds = hours * 60 * 60 + minutes * 60 + seconds
>>> time_in_seconds
360000
>>> now = datetime.datetime.now()
>>> now
datetime.datetime(2012, 10, 2, 10, 24, 6, 639000)
>>> new_time = now + datetime.timedelta(seconds=time_in_seconds)
>>> new_time
datetime.datetime(2012, 10, 6, 14, 24, 6, 639000) 
```

正如 nneonneo 指出`datetime.timedelta()`的那样，接受`hours`,`minutes`和`seconds`作为参数。所以你甚至可以做一些像这样愚蠢的事情（不推荐）：

```
>>> datetime.timedelta(**{k:v for k,v in zip(["hours", "minutes", "seconds"], [int(i) for i in "100:00:00".split(":")])})
datetime.timedelta(4, 14400) 
```

# ios - 有关为 iOS 6.0 及更高版本安排睡眠/唤醒设备的信息在哪里？

> ID：12683295
> 
> 赞同：-2
> 
> 时间：2012-10-02T01:18:00.230
> 
> 标签：ios, ios6, power-management

根据[http://code.google.com/p/iphone的提示，我可以从 3.x - 5.x 固件的文件](http://code.google.com/p/iphone-insomnia/)**/private/var/preferences/SystemConfiguration/com.apple.AutoWake.plist**中获取此信息 [-失眠/](http://code.google.com/p/iphone-insomnia/)

我在哪里可以找到 ios 6.0 的此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:02:06.600

iOS 只有后台/挂起/活动/非活动/未打开状态。

通常，应用程序在挂起/活动状态下运行。您可以使用 API 和单独的处理程序函数请求后台处理时间。

更多信息[在这里](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:59:37.623

很可能，这不是一个答案。只是一条您可能会觉得有趣的信息。

我搜索了二进制文件，发现只提到了 com.apple.AutoWake.xml （应该可以在同一目录中访问）。

提到在 /System/Library/CoreServices/powerd.bundle/powerd /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation

# html - 列内的表

> ID：12683302
> 
> 赞同：0
> 
> 时间：2012-10-02T01:19:36.667
> 
> 标签：html, jsp, jstl, html-table

[我在jsfiddle.net](http://jsfiddle.net/23Lx6/)中有这个示例表，我的表应该是什么样子

第二列可以有多个与原始列重合的行。我很困惑如何使用`jstl <c:forEach>`

这是我编写的代码，它在同一行中打印所有内容，因为我没有任何内部的 break 语句，`foreach`但我想要类似于我在 jsfiddle 中的东西

```
<c:forEach items="${abc.bcd }" var="abc">
<tr>
<td align="center"><c:out value="${abc.interval }" /></td>
<td><c:out value="${abc.operation}" /></td>
<td>
<c:forEach items="${abc.parts.info}" var="info">
<c:out value="${info.number}" />
<c:out value="${info.quantity}" />
<c:out value="${info.name}" />
</c:forEach>                        
</td>
</tr>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:05:38.417

我不知道如何详细说明基于 HTML 的表格的工作方式，但总体而言，单个列中的行并不是它的开发方式。由于行与列的比例需要在一个问题上平衡。

如果您有一列需要行的外观，最好的办法是在该列中放置一个新表并在其中构建所述行的外观

例子：

```
<table>
   <tr>
     <td>
       <table>
         <tr>
           <td>Info</td>
           <td>Info</td>
           <td>Info</td>
         </tr>
       </table>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:29:28.890

看看你到目前为止所构建的内容，看起来你有一个[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)at `abc.parts.info`。如果你有一个有序的地图，比如 a [`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)，你可以[遍历地图](https://stackoverflow.com/questions/2210907/use-cforeach-with-hashmap)：

```
<c:forEach items="${abc.bcd}" var="abc">
  <tr>
    <td align="center"><c:out value="${abc.interval}" /></td>
    <td><c:out value="${abc.operation}" /></td>
    <c:forEach items="${abc.parts.info}" var="info">
      <td><c:out value="${info.value}" /></td>
    </c:forEach>                        
  </tr>
</c:forEach> 
```

如果您有一个无序映射，例如 a [`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，您可以使用 EL 访问映射中的值（假设您的键是字符串）：

```
<c:forEach items="${abc.bcd}" var="abc">
  <tr>
    <td align="center"><c:out value="${abc.interval}" /></td>
    <td><c:out value="${abc.operation}" /></td>
    <td><c:out value="${abc.parts.info['number']}" /></td>
    <td><c:out value="${abc.parts.info['quantity']}" /></td>
    <td><c:out value="${abc.parts.info['name']}" /></td>
  </tr>
</c:forEach> 
```

# jquery - Jquery css更改问题

> ID：12683305
> 
> 赞同：0
> 
> 时间：2012-10-02T01:20:14.950
> 
> 标签：jquery, css

简单地说，我想根据您在下拉菜单中选择的内容来更改 div 的 css 显示状态。这意味着，当我在下拉列表中选择一个项目时，它会将 div 的 css`display`属性从更改`none`为`block`。

我的 CSS

```
<style>
  .lp_claims, .gap_claims, .home_claims, .motor_claims{ display:none;}
</style> 
```

HTML

```
<select name="claimsform">
<option value="lp_claims"> Loan Protection </option>
 <option value="gap_claims"> GAP or Cash Assist </option>
 <option value="home_claims"> Home </option>
 <option value="land_claims"> Landlords </option>
<option value="motor_claims"> Car </option>
</select> 

<div class="lp_claims">
<p> <strong>Loan </strong><br>
Contact  us  </p>
</div>

<div class="gap_claims">
<p> <strong>GAP or Cash Assist </strong><br>
Contact  us  </p></div>

<div class="home_claims">
<p><strong>Home </strong><br>
Contact  us  .</p>
</div>

<div class="motor_claims">
<p><strong>Motor</strong><br>
Contact  us .</p>
</div> 
```

和jQuery

```
<script type="text/javascript">
$(document).ready(function(){
$('select').on('change', function(){
var val = $(this).val();
$('div').hide();
$('.' + val).css('display','block'); }).change();
});
</script> 
```

这是小提琴：http: [//jsfiddle.net/En4Ka/](http://jsfiddle.net/En4Ka/)

**现在一切正常。我的问题是：为什么这不适用于我的 HTML 文件： http: [//fitfixtraining.com.au/test/index.html](http://fitfixtraining.com.au/test/index.html)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:30:14.310

因为（正如 ahren [+1] 所说）您的代码中有非法字符，请查看控制台的错误。

当您从 jsfiddle 复制粘贴代码时，通常会发生这种情况。

这是[Notepad++](http://notepad-plus-plus.org/)的屏幕截图，我在其中为您突出显示：

![在此处输入图像描述](../Images/90c0fe1f03f01e351cccd0f28a0a3772.png)

**编辑：**刚刚编写了一个快速的 JS 来摆脱那些讨厌的不可见的空白，你可以[在这里](http://jsbin.com/alefal/12)试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:25:10.863

当您从 JSFiddle 复制和粘贴时，您会复制额外的非法字符并引发错误。

您的位于 index.html 的第 49 行。

```
$('select').on('change', function(){
    var val = $(this).val();
    $('div').hide();
    $('.' + val).css('display','block');
}).change();​
//Uncaught SyntaxError: Unexpected token ILLEGAL 
```

此外，正如*PhillipKregg*指出的那样，您有语法错误。有关详细信息，请参阅他的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T01:25:16.557

看到这一行：

```
 $('.' + val).css('display','block'); }).change();​ 
```

去掉多余的花括号 - }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T01:27:45.200

您没有正确关闭您的 javascript，因此它无效并且没有被加载。

您需要关闭选择功能和文档准备功能。

# android - 有没有办法监控用户在android的其他应用程序中选择的文本

> ID：12683307
> 
> 赞同：0
> 
> 时间：2012-10-02T01:20:28.107
> 
> 标签：android

我知道用户可以共享选定的文本，将文本复制到剪贴板，以便将文本传递给第三方应用程序。
但这可以更简单的方式让用户突出显示文本（例如在浏览器中），然后将选定的文本传递给我的应用程序吗？
如果没有，可能是选择文本后长按或其他手势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:39:22.370

你正在寻找的东西会导致一个重大的安全漏洞，所以我非常怀疑你能做到这一点。应用程序本身需要向您发送数据（例如共享意图等），发送选定的文本可能意味着应用程序可以窥探您在其他应用程序上执行的活动。

# gcc - 为什么 GCC 发出“lea”而不是“sub”进行减法？

> ID：12683314
> 
> 赞同：11
> 
> 时间：2012-10-02T01:21:25.577
> 
> 标签：gcc, assembly, x86, compiler-optimization, gnu-assembler

我正在查看通过反汇编一些 C 程序生成的一些程序集，我对经常重复的单个优化感到困惑。

当我对 GCC 编译器没有优化时，使用`subl`减法指令，但是当我打开优化（`-O3`准确地说）时，编译器使用`leal`指令而不是减法，示例如下：

没有优化：

```
83 e8 01     subl $0x1, %eax 
```

有优化

```
8d 6f ff     leal -0x1(%edi), %ebp 
```

这两条指令都是 3 个字节长，所以我在这里没有看到优化。有人可以帮我解释一下编译器的选择吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T01:24:38.930

如果没有看到产生这个的原始 C 代码，就很难判断。

但如果我不得不猜测，那是因为它`leal`允许在不破坏源寄存器的情况下进行减法。

这可以节省额外的寄存器移动。

* * *

第一个例子：

```
83 e8 01     subl $0x1, %eax 
```

覆盖`%eax`从而破坏原始值。

第二个例子：

```
8d 6f ff     leal -0x1(%edi), %ebp 
```

存储`%edi - 1`到`%ebp`. `%edi`被保留以备将来使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T04:12:27.820

还要记住，`lea`这不会影响标志，而`sub`会影响。因此，如果随后的指令不依赖于通过减法更新的标志，那么*不*更新标志也会更有效。

# c++ - C++ 在类析构函数释放二维数组时遇到问题

> ID：12683317
> 
> 赞同：2
> 
> 时间：2012-10-02T01:21:48.277
> 
> 标签：c++

第一次海报，yadayada。在做家庭作业时，我在让析构函数正常工作时遇到问题。该程序将成功编译，但运行时会抛出：

```
*** glibc detected *** ./bmain: munmap_chunk(): invalid pointer: (random memory address) 
```

我已经确定这是由我的析构函数引起的，因为当我将其注释掉时，一切正常。我玩过析构函数，我**认为**它的当前形式应该是正确的，但显然不是。有人可以向我指出我做错了什么吗？如果我发布了太多代码，我提前道歉，但我宁愿提供信息过载而不是不够。

游戏板.h

```
#include <iostream>
#include <iomanip>
#include <string>

const int ROW_MIN = 3;
const int ROW_MAX = 50;
const int COL_MIN = 3;
const int COL_MAX = 50;

using namespace std;

class gameBoard
{
    public:

       gameBoard(int x = ROW_MIN, int y = COL_MIN);

       ~gameBoard();

       void setCell(int x = 0, int y = 0, char piece = '?');

       char getCell(int x = 0, int y = 0) const;

       void printBoard();

   protected:

      int rows;
      int cols;
      char **board;
}; 
```

gameBoardImp.cpp

```
#include "gameBoard.h"

gameBoard::gameBoard(int x, int y)
{
    if (x < ROW_MIN || x > ROW_MAX)
    {
       cout << "Error.  Invalid game board size.  Number of rows must be between " << ROW_MIN << " and " << ROW_MAX << "." << endl;
       cout << "Board not created." << endl;
    }
    else if (y < COL_MIN || y > COL_MAX)
    {
       cout << "Error.  Invalid game board size.  Number of columns must be between " << COL_MIN << " and " << COL_MAX << "." << endl;
       cout << "Board not created." << endl;
    }
    else
    {
       rows = x;
       cols = y;
       board = new char* [rows];
          for (int row = 0; row < rows; row++)
          {
             board[row] = new char[cols];
             for (int col = 0; col < cols; col++)
             {
                board[row][col] = '?';
             }
          }
    }
}

gameBoard::~gameBoard()
{
   if (board != NULL)
   {
      for (int i = 0; i < rows; i++)
      {
         delete [] board[i];
      }
      delete []board;
      board = NULL;
   }
}

void gameBoard::setCell(int x, int y, char piece)
{
   if (x > rows || x < 0)
   {
      cout << "Error.  Invalid board location.  X has to be between 0 and " << (rows - 1) << " ." << endl;
   }

   else if (y > cols || y < 0)
   {
      cout << "Error.  Invalid board location.  Y has to be between 0 and " << (cols - 1) << " ." << endl;
   }

   else board[x][y] = piece;
}

char gameBoard::getCell(int x, int y) const
{
   if (x > rows || x < 0)
   {
      cout << "Error.  Invalid board location.  X has to be between 0 and " << (rows - 1) << " ." << endl;
   }

   if (y > cols || y < 0)
   {
      cout << "Error.  Invalid board location.  Y has to be between 0 and " << (cols - 1) << " ." << endl;
   }

   return board[x][y];
}

void gameBoard::printBoard()
{
   cout << " " << setw(cols) << setfill('-') << "-" << " " << endl;
   for (int i = 0; i < rows; i++)
   {
      cout << "|";
      for (int j = 0; j < cols; j++)
      {
         cout << board[i][j];
      }
      cout << "|" << endl;
   }
   cout << " " << setw(cols) << setfill('-') << "-" << " " << endl;
} 
```

bmain.cpp

```
// CS 202 Provided Main

#include <iostream>
#include <iomanip>
#include <string>

#include "gameBoard.h"

using namespace std;

int main()
{
// ---------------------------------------
//  Some valid declarations

    gameBoard brd1(10, 10);
    gameBoard brd2(8, 8);

// ---------------------------------------
//  Some invalid declarations

    cout << endl << "*** Invalid declarations -> should show errors." << endl;
    cout << endl;
    gameBoard brd3(1, 1);           // error
    gameBoard brd4(9, 60);          // error

// ---------------------------------------
//  Try board #1

    cout << endl;
    cout << "*** Board #1 *******************************" << endl;
    cout << endl;

    {
        brd1.printBoard();

        for (int i=0; i<10; i++)
            brd1.setCell(i,i,'x');

        cout << endl;
        cout << "Cell (0,1) is :" << brd1.getCell(0,1) << endl;
        cout << "Cell (1,1) is :" << brd1.getCell(1,1) << endl;
        cout << "Cell (1,0) is :" << brd1.getCell(1,0) << endl << endl;

        brd1.printBoard();
    }
// Note, brd1 goes out of scope here...

//  uncommenting this print board will crash if the destructor works correctly.
//  brd1.~gameBoard();

// ---------------------------------------
//  Try board #2

    cout << endl;
    cout << "*** Board #2 -> Error Testing *************" << endl;
    cout << endl;
    brd2.setCell(10,10,'x');        // error
    brd2.setCell(1,10,'x');         // error
    brd2.setCell(10,1,'x');         // error
    brd2.setCell(5,-1,'x');         // error
    brd2.setCell(-5,1,'x');         // error
    cout << endl;

    cout << endl;
    cout << "*** Board #2 *******************************" << endl;
    cout << endl;

    for (int i=0; i<8; i++)
        brd2.setCell(i,i,'x');

    for (int i=0, j=7; i<8; i++, j--)
        brd2.setCell(i,j,'y');

    brd2.printBoard();

    cout << endl;
    cout << "********************************************" << endl;
    cout << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T01:25:28.523

在构造函数中，当`x`或`y`无效时，您没有设置`board`为 NULL，因此它未初始化。这会导致析构函数指向`delete[]`无效的指针。

# c# - 如何阻止 wpf UI 以避免非法状态？

> ID：12683323
> 
> 赞同：1
> 
> 时间：2012-10-02T01:22:29.223
> 
> 标签：c#, wpf, multithreading, user-interface, slider

假设我有 3 个或更多滑块，每个滑块的值可以从 0 到 100。但是我希望所有滑块值的总和 <= 100。如果我有 4 个滑块，每个滑块的最大值将为 25。

每个滑块都有一个与双变量的绑定，每次用户使用滑块（滴答频率 0.1）时，我都会计算总和并将其他滑块向后设置，或者如果需要，将相同的滑块向后设置，以便总和 <= 100。

问题是，计算需要相当长的时间，同时用户可以设置非法值。我想通过阻止 UI 直到计算结束来解决这个问题。基本上与所需的响应能力相反。

欢迎其他解决滑块问题的想法和建议。

![例如 3 个滑块。](../Images/ba0b7b884d52904b1e14cd7b1b7ec608.png)

滑块绑定

```
public BindingList<WLCToolParameter> WLCParameter
   {
       get { return _toolParameter; }
       set { _toolParameter = value; }
   } 
```

应该是即时的 - 不是真的:(

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MCDA.Entity;
using MCDA.Extensions;

namespace MCDA.Model
{
    class ProportionalDistributionStrategy : IWeightDistributionStrategy
    {
        public void Distribute<T>(IList<T> listOfToolParameter) where T : class, IToolParameter
        {

            if (listOfToolParameter.Count == 0)
                return;

            IToolParameter lastWeightChangedToolParameter =  lastWeightChangedToolParameter = listOfToolParameter[0].LastWeightChangedToolParameter;

            double sumOfAllWeights = listOfToolParameter.Sum(t =>t.Weight);

            //we have to rescale
            if (sumOfAllWeights > 100)
            {
                double overrun = sumOfAllWeights - 100;

                //how much do we have without the locked and the last changed?
                double availableSpace = listOfToolParameter.Where(t => t.IsLocked == false && t != lastWeightChangedToolParameter).Sum(t => t.Weight);

                //we have enough by taking from the non locked
                if (availableSpace > overrun)
                {
                    //lets remove proportional
                    double sumOfChangeableWeights = listOfToolParameter.Where(t => t.IsLocked == false && t != lastWeightChangedToolParameter).Sum(t => t.Weight);

                    //in case we have only one element that is suitable we can directly remove all from this one
                    if (listOfToolParameter.Where(t => t.IsLocked == false && t.Weight > 0 && t != lastWeightChangedToolParameter).Count() == 1)
                    {
                        listOfToolParameter.Where(t => t.IsLocked == false && t.Weight > 0 && t != lastWeightChangedToolParameter).ForEach(t => t.Weight = t.Weight - overrun);
                        return;
                    }
                    listOfToolParameter.Where(t => t.IsLocked == false && t.Weight > 0 && t != lastWeightChangedToolParameter).ForEach(t => t.Weight = t.Weight - (sumOfChangeableWeights / (sumOfChangeableWeights - t.Weight)) * overrun);
                }

                //we have to resize also the latest change, but we try to keep as much as possible of the latest change
                else
                {
                    //lets set them to zero
                    listOfToolParameter.Where(t => t.IsLocked == false && t != lastWeightChangedToolParameter).ForEach(t => t.Weight = 0);

                    //how much are we still over?
                    double stillOver = listOfToolParameter.Sum(t => t.Weight) - 100;

                    //and cut from the last changed
                    listOfToolParameter.Where(t => t == lastWeightChangedToolParameter).ForEach(t => t.Weight -= stillOver);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:19:18.500

看起来您没有使用数据绑定。这是一个简单的示例 - 只需将您的计算逻辑添加到计算方法中即可。UI 将自行更新。请注意，这是一个粗略的示例。我不确定我会以这种方式实现它。还要小心在数字中使用小数。如果您将它与外语/区域设置一起使用，并以逗号作为小数点分隔符 - 它会出错。

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <Slider Margin="10" Value="{Binding Path=Value1}" />
            <TextBlock Text="{Binding Path=Value1}" />
            <Slider Margin="10" Value="{Binding Path=Value2}" />
            <TextBlock Text="{Binding Path=Value2}" />
            <Slider Margin="10" Value="{Binding Path=Value3}" />
            <TextBlock Text="{Binding Path=Value3}" />
        </StackPanel>

    </Grid>
</Window> 
```

隐藏代码（MVVM 方法，这将在您的视图模型中）

```
namespace WpfApplication3
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        private double _value1;
        public double Value1
        {
            get { return _value1; }
            set
            {
                if(value != _value1)
                {
                    _value1 = value;
                    DoMyCalculations(_value1, _value2, _value3);
                    NotifyPropertChanged("Value1");
                }
            }
        }
        private double _value2;
        public double Value2
        {
            get { return _value2; }
            set
            {
                if (value != _value2)
                {
                    _value2 = value;
                    DoMyCalculations(_value1, _value2, _value3);
                    NotifyPropertChanged("Value2");
                }
            }
        }
        private double _value3;
        public double Value3
        {
            get { return _value3; }
            set
            {
                if (value != _value3)
                {
                    _value3 = value;
                    DoMyCalculations(_value1, _value2, _value3);
                    NotifyPropertChanged("Value3");
                }
            }
        }
        private bool isCalculating = false;
        private void DoMyCalculations(double value1, double value2, double value3)
        {
            if (isCalculating)
                return;
            isCalculating = true;

            // Perform logic to reset here

            isCalculating = false;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        /// <summary>
        /// Notify of Property Changed event
        /// </summary>
        /// <param name="propertyName"></param>
        public void NotifyPropertChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

# delphi - 如何从 Delphi 中的 TList<> 读取分组数据

> ID：12683328
> 
> 赞同：1
> 
> 时间：2012-10-02T01:23:15.903
> 
> 标签：delphi, tlist, delphi-xe3

在 C# 中，Linq 会让这变得超级简单，但我是在 Delphi 中使用列表的新手，我需要一些建议。

我有一个对象列表，`TList<IMyInterface>`每个对象本质上都是一个数据集合，例如

```
1, 1, 2, 2, 2, 2, 3, 4, 4, 4 
```

我希望创建一个新`TList<TList<IMyInterface>>`的列表中的项目分组的位置，例如：

```
1, 1 
2, 2, 2, 2, 2 
3 
4, 4, 4 
```

在 Delphi XE3（入门版）中执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T06:05:41.823

最简单的是一组循环。为 Delphi 使用 DeHL 或 Spring 框架可能会稍微缩短您的代码，但不会太多。

[这个](https://stackoverflow.com/questions/8246378/copy-content-from-list1-to-list2-with-specific-criteria)关于使用条件查询通用 TList 实例的问题给出了使用 Spring 框架中的集合的提示。

[我的示例](https://besharp.codeplex.com/SourceControl/changeset/94898)使用`Integer`而不是您的接口类型，但它应该很容易适应。

以下是两种拆分方法，具体取决于您是希望每个列表从变化的值开始，还是仅针对不同的值（如大卫所说：万岁`TDictionary<Key, Value>`）

我看到了区别，我把你的例子翻了一番：

```
1, 1, 2, 2, 2, 2, 3, 4, 4, 4, 1, 1, 2, 2, 2, 2, 3, 4, 4, 4 
```

第一个算法将返回这些：

```
1, 1
2, 2, 2, 2
3
4, 4, 4
1, 1
2, 2, 2, 2
3
4, 4, 4 
```

第二个：

```
1, 1, 1, 1
2, 2, 2, 2, 2, 2, 2, 2
3, 3
4, 4, 4, 4, 4, 4 
```

这是示例程序；只有打印需要嵌套循环。

```
program SplitListOfIntegersIntoSublists;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,
  System.Generics.Collections;

type
  TIntegerList = TList<Integer>;
  TIntegerListList = TList<TIntegerList>;
  TMain = class(TObject)
  private
    class function AddNewIntegerList(IntegerListList: TIntegerListList): TIntegerList;
    class procedure AddValues(AllIntegers: TIntegerList);
    class procedure Fill_NewListForEachValueChange(const AllIntegers: TIntegerList; const IntegerListList: TIntegerListList);
    class procedure Fill_NewListForDistinctValues(const AllIntegers: TIntegerList; const IntegerListList: TIntegerListList);
    class procedure Free(const IntegerListList: TIntegerListList);
    class procedure Print(const IntegerList: TIntegerList); overload;
    class procedure Print(const IntegerListList: TIntegerListList); overload;
  public
    class procedure Run;
  end;

class function TMain.AddNewIntegerList(IntegerListList: TIntegerListList): TIntegerList;
begin
  Result := TIntegerList.Create;
  IntegerListList.Add(Result);
end;

class procedure TMain.AddValues(AllIntegers: TIntegerList);
begin
// 1, 1, 2, 2, 2, 2, 3, 4, 4, 4
  AllIntegers.Add(1);
  AllIntegers.Add(1);
  AllIntegers.Add(2);
  AllIntegers.Add(2);
  AllIntegers.Add(2);
  AllIntegers.Add(2);
  AllIntegers.Add(3);
  AllIntegers.Add(4);
  AllIntegers.Add(4);
  AllIntegers.Add(4);
end;

class procedure TMain.Fill_NewListForEachValueChange(const AllIntegers: TIntegerList; const IntegerListList: TIntegerListList);
var
  IntegerList: TIntegerList;
  Value: Integer;
begin
  for Value in AllIntegers do
  begin
    if (IntegerListList.Count = 0) or (Value <> IntegerList.First) then
      IntegerList := AddNewIntegerList(IntegerListList);
    IntegerList.Add(Value);
  end;
end;

class procedure TMain.Fill_NewListForDistinctValues(const AllIntegers: TIntegerList; const IntegerListList:
    TIntegerListList);
type
  TIntegerListDictionary = TDictionary<Integer, TIntegerList>;
var
  IntegerListDictionary: TIntegerListDictionary;
  IntegerList: TIntegerList;
  Value: Integer;
begin
  IntegerListDictionary := TIntegerListDictionary.Create();
  for Value in AllIntegers do
  begin
    if IntegerListDictionary.ContainsKey(Value) then
      IntegerList := IntegerListDictionary[Value]
    else
    begin
      IntegerList := AddNewIntegerList(IntegerListList);
      IntegerListDictionary.Add(Value, IntegerList);
    end;
    IntegerList.Add(Value);
  end;
end;

class procedure TMain.Free(const IntegerListList: TIntegerListList);
var
  IntegerList: TIntegerList;
begin
  for IntegerList in IntegerListList do
    IntegerList.Free;
  IntegerListList.Free;
end;

class procedure TMain.Print(const IntegerList: TIntegerList);
var
  Value: Integer;
  First: Boolean;
begin
  First := True;
  for Value in IntegerList do
  begin
    if not First then
      Write(', ');
    Write(Value);
    First := False;
  end;
  Writeln;
end;

class procedure TMain.Print(const IntegerListList: TIntegerListList);
var
  IntegerList: TIntegerList;
begin
  for IntegerList in IntegerListList do
    Print(IntegerList);
  Writeln;
end;

class procedure TMain.Run;
var
  AllIntegers: TIntegerList;
  IntegerListList: TIntegerListList;
begin
  AllIntegers := TIntegerList.Create();
  try
    AddValues(AllIntegers);
    Print(AllIntegers);

    IntegerListList := TIntegerListList.Create();
    try
      Fill_NewListForEachValueChange(AllIntegers, IntegerListList);
      Print(IntegerListList);
    finally
      Free(IntegerListList);
    end;

    AddValues(AllIntegers);
    Print(AllIntegers);

    IntegerListList := TIntegerListList.Create();
    try
      Fill_NewListForEachValueChange(AllIntegers, IntegerListList);
      Print(IntegerListList);
    finally
      Free(IntegerListList);
    end;

    Print(AllIntegers);

    IntegerListList := TIntegerListList.Create();
    try
      Fill_NewListForDistinctValues(AllIntegers, IntegerListList);
      Print(IntegerListList);
    finally
      Free(IntegerListList);
    end;
  finally
    AllIntegers.Free;
  end;
end;

begin
  try
    TMain.Run();
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# javascript - 尝试在 UpdatePanel 中填充 DropDownList 时，出现 404 错误（> Uncaught Sys.WebForms.PageRequestManagerServerErrorException: ）

> ID：12683329
> 
> 赞同：1
> 
> 时间：2012-10-02T01:23:25.213
> 
> 标签：javascript, jquery, asp.net

我有一个带有单选按钮的下拉列表。单选按钮用于对 DropDownList 进行排序（按名称、按 id 等）。数据库通过存储过程填充 DropDownList。它被一个更新面板包围。

```
 <div id="casefiles">
    <ajaxToolkit:ToolkitScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" />
  <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
            <ContentTemplate>
                <div id="rbfileByHolder" runat="server">
                    <label>Sort By</label>
                    <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" ID="rbMyFiles" Text="My Files" Checked="true"
                        runat="server" AutoPostBack="True" OnCheckedChanged="rbMyFiles_CheckedChanged" /></span>
                    <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" id="rbByFileID"
                        Text="By File ID"  runat="server" AutoPostBack="True"
                        oncheckedchanged="rbByFileID_CheckedChanged" /></span>
                    <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" id="rbByFileName"
                        Text="By File Name" runat="server" AutoPostBack="True"
                        oncheckedchanged="rbByFileName_CheckedChanged" /></span>            

                </div><br />
            </ContentTemplate>
        </asp:UpdatePanel>
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <label>Select New CaseFile</label>
                <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" />
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddlCaseFiles" ToolTip="Casefile Required" InitialValue="-1" Text="*" Display="Dynamic" />
                <ajaxToolkit:ListSearchExtender ID="ddlExtCaseFiles" runat="server" PromptCssClass="ListSearchExtenderPrompt" TargetControlID="ddlCaseFiles" BehaviorID="ddlExtCaseFiles" Enabled="True"/>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="rbByFileName" EventName="CheckedChanged" />
                <asp:AsyncPostBackTrigger ControlID="rbByFileID" EventName="CheckedChanged" />
                <asp:AsyncPostBackTrigger ControlID="rbMyFiles" EventName="CheckedChanged" />
            </Triggers>
        </asp:UpdatePanel>
        </div> 
```

这是我的 javascript 函数，用于在弹出窗口中显示控件：

```
//create popup with dropdownLists then call moveCaseFile
    function getCaseFiles(canCopyTo) {
        //create Popup with content from div
        $('#casefiles').dialog({
            autoOpen: true,
            height: 'auto',
            width: 'auto',
            modal: true,
            buttons: {
                "Ok": function () {
                    debugger;
                    alert("test");
                    var t = $("#casefiles");
                },
                Cancel: function () {
                    $(this).dialog('close');
                    $("#viewExpensesGrid").flexReload();
                }
            }
        });
    } 
```

这是后面的相关代码（单选按钮排序和为下拉列表分配默认值）：

```
protected void rbByFileName_CheckedChanged(object sender, EventArgs e)
{
    ddlCaseFiles.DataSourceID = "dsCaseFilesReverse";
    ddlCaseFiles.DataTextField = "Display";
    ddlCaseFiles.DataValueField = "FileID";
}

protected void rbByFileID_CheckedChanged(object sender, EventArgs e)
{
    ddlCaseFiles.DataSourceID = "dsCaseFiles";
    ddlCaseFiles.DataTextField = "Display";
    ddlCaseFiles.DataValueField = "FileID";
}

protected void rbMyFiles_CheckedChanged(object sender, EventArgs e)
{
    ddlCaseFiles.DataSourceID = "dsMyCaseFiles";
    ddlCaseFiles.DataTextField = "Display";
    ddlCaseFiles.DataValueField = "FileID";
}
protected void ddl_PreRender(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    try
    {
        if (ddl.Items[0].Value != "-1")
            ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
    catch
    {
        ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
} 
```

好的。是时候解释更多了。

假设会出现一个弹出窗口，如下所示：！[在此处输入图像描述][1]

如果您单击 myFiles，它将对显示您拥有的所有文件的下拉列表进行排序（通过存储过程）。因此，对于每个单选按钮，它会根据不同的信息（通过存储过程）进行不同的排序。但我的问题是，当我选择一个单选按钮（并且它必须执行存储的过程）时，我收到此错误：

未捕获的 Sys.WebForms.PageRequestManagerServerErrorException：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：404

我认为搞砸的是UpdatePanel/AutoPostback。它不仅更新下拉列表，还尝试刷新页面，但刷新到另一个链接或其他内容。请在小猫被踢之前帮忙

这是我从 chrome 调试器得到的错误：

> 未捕获的 Sys.WebForms.PageRequestManagerServerErrorException：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：404

所有这些错误都是在我添加 AutoPostback="true" 时发生的。

# drupal - 如何做这种类型的过滤器：这个用户的更多广告

> ID：12683330
> 
> 赞同：0
> 
> 时间：2012-10-02T01:23:28.057
> 
> 标签：drupal

嗨，如果有人可以帮助我，我将不胜感激，我正在做一个在本地服务器上运行的分类网站，而我正在做这件事，我想做一些事情，比如为这个用户显示更多广告

我会更好地解释我希望在我的网络上的每个广告中显示一个块或链接到为我当前正在阅读的广告的用户创建的所有广告，如果有人可以帮助我，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:40:37.057

听起来您可以使用 Views 模块。创建一个列出您需要的视图。然后，您可以根据需要添加上下文过滤器。

# objective-c - keysSortedByValueUsingComparator 没有给出正确排序的数组

> ID：12683332
> 
> 赞同：5
> 
> 时间：2012-10-02T01:24:12.660
> 
> 标签：objective-c, ios, ios5, nsdictionary

我有一本字典，其键由`NSNumber`s 组成。我使用`keysSortedByValueUsingComparator`如下：

```
NSArray *sortedKeys = [self.platformDict  keysSortedByValueUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        return [(NSNumber*)obj2 compare:(NSNumber*)obj1];
    }]; 
```

然而，这是我得到的结果：

```
(lldb) po sortedKeys
(NSArray *) $1 = 0x0704bd20 <__NSArrayI 0x704bd20>(
100000,
250000,
1000000,
500000,
3000000,
2000000,
5000000,
10000000
) 
```

这是不正常的。这是方法实现的错误还是这里有其他问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T01:38:40.307

也许您误解了该`keysSortedByValue:...`方法的作用。它*不对*键进行排序（因为您只需对返回的数组进行排序`allKeys`），而是对值进行排序，然后将它们的顺序应用于键。

因此，假设您有以下字典：

```
{"Orange": 1, "Apple": 3, "Peach": 2} 
```

结果将是：

```
"Orange", "Peach", "Apple" 
```

因为这对应于值的排序顺序 (1, 2, 3)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T01:45:10.213

您可以只使用 sortedArrayUsingSelector：

```
NSArray *sortedArray = [[self.PlatformDict allKeys] sortedArrayUsingSelector:@selector(compare:)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T01:30:00.393

用以下内容替换块的内部。这将告诉您比较方法或其他方法是否存在问题。

```
 if ([obj1 integerValue] > [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedDescending;
 }

 if ([obj1 integerValue] < [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedAscending;
 }
 return (NSComparisonResult)NSOrderedSame; 
```

# java - JButton ActionEvent 中的 If-else 条件

> ID：12683333
> 
> 赞同：0
> 
> 时间：2012-10-02T01:24:17.400
> 
> 标签：java, string, if-statement, jbutton, jradiobutton

我刚刚将我的进度上传到程序中。请看一下，看看它缺少什么。另外，请忽略其中字符串中的蹩脚笑话。可从此链接下载：[http ://www.mediafire.com/?n0sp8v22egfsx7t](http://www.mediafire.com/?n0sp8v22egfsx7t)

请注意，我使用 NetBeans 轻松制作程序。

编辑：

一旦读取了最内行或最后一行代码，如何阻止 JButton 的 ActionEvent 方法重新迭代嵌套 if-else 条件的第一层的读取？

另外，作为一个额外的问题，我如何提示系统在选择之间进行选择，从而一旦给出选择就从另一个分支出来？显然，我正在做的只是将这些字符串块连接在一起，而不是将它们分支出来，因此一旦要显示与显示的前一个代码块相关的新代码块，就会出现迭代。.

片段：

```
// Strings of text displayed on the JTextArea is shown here
// prompting to choose between two options: example, left or right

jButton1.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
       jButton1actionPerformed(e);
    }
});

private void jButton1actionPerformed(ActionEvent e) 
{                                             
    if(jRadioButton1.isSelected()) 
    {     
       // Display strings of text as response to the choice left
       // Another options to choose from here:, example, up or down
       JTextArea.setText("You've chosen: " );
       JTextArea.append("Now choose between: ");

       if (jRadioButton1.isSelected())
       {
         JTextArea.append("From first choice, choose between: ");
         // stop from here
       }

       else if (jRadioButton2.isSelected())
       {
         //same as above
       }
     }

     if (jRadioButton2.isSelected())
     {
        // Same as above
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:29:14.410

> 一旦读取了最内行或最后一行代码，如何停止 JButton 的 ActionEvent 方法重新迭代嵌套 if-else 条件的第一层的读取？

如果我明白你在问什么，这就是`if ... else if ... else if ... (etc) ... else`声明的重点。当其中一个条件匹配时，不会执行任何其他块。所以看起来你只需要添加`else`s 来匹配你`if`的 s。例如：

```
// Strings of text displayed on the JTextArea is shown here
// prompting to choose between two options: example, left or right

jButton1.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
       jButton1actionPerformed(e);
    }
});

private void jButton1actionPerformed(ActionEvent e) 
{                                             
    if(jRadioButton1.isSelected()) 
    {     
       // Display strings of text as response to the choice left
       // Another options to choose from here:, example, up or down
       JTextArea.setText("You've chosen: " );
       JTextArea.append("Now choose between: ");

       if (jRadioButton1.isSelected())
       {
         JTextArea.append("From first choice, choose between: ");
         // stop from here
       }

       else if (jRadioButton2.isSelected())
       {
         //same as above
       }
     }

     else if (jRadioButton2.isSelected()) // ***** Note the "else" added here.
     {
        // Same as above
     }
} 
```

但是，您的代码存在问题。如果被选中，为什么要检查两次`jRadioButton1`？在第一个 if 语句之后，您已经知道它已被选中，无需再次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:12:55.360

我认为，如果您询问如何在达到条件后停止操作，您需要做的就是在代码中添加一个 return 语句。例如，如果按下按钮 1，则显示消息，然后添加一个 return 语句，这将导致代码退出该方法并且无法到达另一个 if 语句。

也许您想使用哈希或列表之类的东西来存储您的选择，并且每次做出选择时，将其添加到列表中。然后，您总是可以通过获取列表的最后一个元素来找到最后的选择。我不太清楚你想在这里做什么，但也许这会给你一些想法。

* * *

我在这里写了一个小程序，它有 2 个单选按钮和一个提交。当您单击提交时，它会根据单选按钮选择更新窗口中的文本。

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTextArea;
import javax.swing.border.EmptyBorder;

public class MyWindow extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MyWindow frame = new MyWindow();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public MyWindow() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        final JRadioButton rdbtnNewRadioButton = new JRadioButton("Choice 1");
        rdbtnNewRadioButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });
        rdbtnNewRadioButton.setSelected(true);
        rdbtnNewRadioButton.setBounds(5, 7, 424, 23);
        contentPane.add(rdbtnNewRadioButton);

        JRadioButton rdbtnNewRadioButton_1 = new JRadioButton("Choice 2");
        rdbtnNewRadioButton_1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });
        rdbtnNewRadioButton_1.setBounds(5, 33, 109, 23);
        contentPane.add(rdbtnNewRadioButton_1);

        ButtonGroup buttonGroup = new ButtonGroup();
        buttonGroup.add(rdbtnNewRadioButton);
        buttonGroup.add(rdbtnNewRadioButton_1);

        final JTextArea textArea = new JTextArea();
        textArea.setBounds(57, 80, 321, 94);
        contentPane.add(textArea);

        JButton btnNewButton = new JButton("Submit");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (rdbtnNewRadioButton.isSelected()) {
                    textArea.setText("Choice 1 Selected.");
                } else {
                    textArea.setText("Choice 2 Selected.");
                }
            }
        });

        btnNewButton.setBounds(135, 212, 89, 23);
        contentPane.add(btnNewButton);
    }
} 
```

* * *

查看有关使用按钮的 Java 教程。具体查看如何使用单选按钮部分，看看这是否有助于您了解如何设计它。

[如何使用单选按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:27:56.540

`JTextField.setText("")`每当您想清理文本区域时使用。关于主要问题 - 发布一些代码..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T17:26:36.907

如果我能理解你在问什么

也许这就足够了：

```
private void jButton1actionPerformed(ActionEvent e) 
{                                             
    if(jRadioButton1.isSelected()) 
    {     
       // Display strings of text as response to the choice left
       // Another options to choose from here:, example, up or down
       JTextArea.setText("You've chosen: " );
       JTextArea.append("Now choose between: ");

//       if (jRadioButton1.isSelected())
//       {
//         JTextArea.append("From first choice, choose between: ");
//        // stop from here
//       }

       else if (jRadioButton2.isSelected())
       {
         //same as above
       }
     }
// The above else if block covers what you are doing bellow
//     if (jRadioButton2.isSelected())
//     {
//        // Same as above
//     }
} 
```

如果您想从两个不同的 jRadioButton 进行分支并记住给定的代码，我会建议 4 条可能的路径

1.  if (jRadioButton1.isSelected() && jRadioButton2.isSelected())

2.  如果（jRadioButton1.isSelected（））

3.  如果（jRadioButton2.isSelected（））

4.  别的

# iphone - iPhone 和 iPad Safari 的视口和居中问题

> ID：12683334
> 
> 赞同：1
> 
> 时间：2012-10-02T01:24:18.943
> 
> 标签：iphone, ipad, safari

我正在尝试帮助修复朋友的网页。她付了一个人 800 美元为她建立了一个网站，而网站一上线，他就反弹了，但没有使其兼容`iOS Safari` *（正如他所承诺的那样）*。她抓不住这个家伙，几个月后。所以无论如何，我想帮助她。[www.avasassi.com](http://www.avasassi.com)

* * *

*   **我试图修复视口标签**

    *   整个显示在 iOS Safari 上显示过大
    *   您无法正确缩小以查看页面
    *   她希望它正确加载，并以初始加载为中心
    *   每个页面都有这个问题
    *   到目前为止，我只调整了 index.hmtl 和 projects.html

原来的[视口标签](http://www.avasassi.com/spicemates.html)是...

```
<meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=1;" name="viewport"> 
```

我尝试将它调整到[这个视口标签](http://www.avasassi.com/projects.html)，结果平庸

```
<meta name="viewport" content="width=device-width, initial-scale = 0.5" /> 
```

* * *

*   **接下来是项目页面*（projects.html）***

    *   显示以 Firefox 和 chrome 为中心的单个图像，但在 iPhone 上的 safari 上
    *   它偏离中心，并以某种方式将橙色条剪短，使其不会跨越整个页面
    *   图像不以标题为中心

这是项目页面图像的代码...

```
<section id="frame">
<div class="row1 cbox"><a class="samlink" href="saltysam.html"></a></div>
<div class="row2 cbox"><a class="spicelink" href="spicemates.html"></a></div>
<div class="row3 cbox"><a class="khloelink" href="khloe.html"></a></div>
<div class="row4 cbox"><a class="simonlink" href="simon.html"></a></div>
<div class="row5 cbox"><a class="thrivelink" href="thrive.html"></a></div>
</section> 
```

CSS

```
#frame {
width: 450px;
height: 1850px;
margin: 0 auto;
position: relative;
display: block; 
```

&

```
.cbox {
position: absolute;
overflow: hidden;
opacity: 1.0;
filter: alpha(opacity=100);
width: 450px;
margin: 0 auto; 
```

* * *

**任何和所有的帮助都是很高兴的。干杯。**

# sql - EntityFramework SQLQuery 运行时的动态类型

> ID：12683338
> 
> 赞同：0
> 
> 时间：2012-10-02T01:24:56.293
> 
> 标签：sql, entity-framework, dynamic, entity-framework-4

我只是想知道是否有一种方法可以针对 dbContext 运行基于字符串的 SQL 查询并检查返回的对象以在运行时为对象提供类型。即直到运行时我才会知道正在执行的 SQL 字符串的结构。

这可能吗？

代码示例：

```
My_DataProvidor.DB.Database.SqlQuery<MyDynamicType>("SELECT * FROM CUSTOMER").ToList(); 
```

或者

```
My_DataProvidor.DB.Database.SqlQuery(MyDynamicType,"SELECT * FROM CUSTOMER").ToList(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:51:55.753

找到了答案。使用像 Dapper 或 mass 这样的 micro-ORM 框架。

# android - Android .out.xml 错误？

> ID：12683340
> 
> 赞同：2
> 
> 时间：2012-10-02T01:25:03.760
> 
> 标签：android, xml

每次我编译我的android代码时，我都会收到这个错误。

```
[2012-09-30 14:46:48 - My First App] activity_main.out.xml is out of sync. Please refresh.
[2012-09-30 14:47:08 - My First App] activity_main.out.xml is out of sync. Please refresh.
[2012-09-30 14:51:04 - My First App] Error in an XML file: aborting build.
[2012-09-30 14:51:18 - My First App] Error in an XML file: aborting build.
[2012-09-30 15:39:17 - My First App] Error in an XML file: aborting build.
[2012-09-30 21:21:33 - sup_cheesepuff] ------------------------------
[2012-09-30 21:21:33 - sup_cheesepuff] Android Launch!
[2012-09-30 21:21:33 - sup_cheesepuff] adb is running normally.
[2012-09-30 21:21:33 - sup_cheesepuff] Performing com.example.sup_cheesepuff.MainActivity activity launch
[2012-09-30 21:21:34 - sup_cheesepuff] Automatic Target Mode: launching new emulator with compatible AVD 'Froyo.'
[2012-09-30 21:21:34 - sup_cheesepuff] Launching a new emulator with Virtual Device 'Froyo.'
[2012-09-30 21:21:56 - Emulator] 2012-09-30 21:21:56.633 emulator-arm[7523:1107] Warning once: This application, or a library it uses, is using NSQuickDrawView, which has been deprecated. Apps should cease use of QuickDraw and move to Quartz.
[2012-09-30 21:21:56 - sup_cheesepuff] New emulator found: emulator-5554
[2012-09-30 21:21:56 - sup_cheesepuff] Waiting for HOME ('android.process.acore') to be launched...
[2012-09-30 21:23:20 - sup_cheesepuff] HOME is up on device 'emulator-5554'
[2012-09-30 21:23:20 - sup_cheesepuff] Uploading sup_cheesepuff.apk onto device 'emulator-5554'
[2012-09-30 21:23:20 - sup_cheesepuff] Installing sup_cheesepuff.apk...
[2012-09-30 21:23:36 - sup_cheesepuff] Success!
[2012-09-30 21:23:36 - sup_cheesepuff] Starting activity com.example.sup_cheesepuff.MainActivity on device emulator-5554
[2012-09-30 21:23:41 - sup_cheesepuff] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.sup_cheesepuff/.MainActivity }
[2012-09-30 21:32:10 - sup_cheesepuff] Error in an XML file: aborting build. 
```

我已经查看了具有类似主题的其他主题，但没有任何帮助。这是我的 XML 源代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="100dp"
        android:text="Hey boi!"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

顺便说一句，我对 Android 和 XML 都是新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T01:26:14.263

当您在编辑 XML 文件时尝试从 Eclipse 执行应用程序时会发生这种情况。它尝试编译 XML 文件，但惨遭失败，生成 .out.xml 文件。

这是一个简单的修复，只需删除有问题的 .out.xml 文件，并确保在编译时正在编辑 .java 文件（或者您可以在构建配置中设置目标）。

编辑：哦，欢迎来到 StackOverflow！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:56:22.903

当您尝试从`XML`文件编译项目时会出现此问题！您可以从您的`java`文件编译，也可以通过以下方式从任何位置编译：`org.eclipse.wst.xsl.*`从文件夹中删除所有实例，`"\Eclipse\plugins"`并在重新启动 Eclipse 后，一切都将按预期工作。尝试一下！

# android - MediaPlayer.SeekTo(int) 抛出 IllegalStateException

> ID：12683341
> 
> 赞同：0
> 
> 时间：2012-10-02T01:25:05.510
> 
> 标签：android, service, media-player, illegalstateexception

有时我得到 MediaPlayer.SeekTo(int) 抛出的 IllegalStateException MediaPlayer 在服务中运行，并像这样调用 SeekTo(int)：

```
public void seekTo(int value)
{
if (mp != null && !(value <= -1)) {
mp.seekTo(value);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:57:23.733

`IllegalStateException`抛出以防止编程错误，例如调用`prepare()`,或处于无效状态`prepareAsync()`的重载方法之一。`setDataSource`

如果或在任何其他状态下调用，`IllegalStateException`则抛出An 。`prepare()``prepareAsync()`

尽管异步`seekTo(int)`调用以正确的方式返回，但实际的查找操作可能需要一段时间才能完成，尤其是对于正在流式传输的音频/视频。当实际的搜索操作完成时，`OnSeekComplete.onSeekComplete()`如果`OnSeekCompleteListener`事先通过`setOnSeekCompleteListener(OnSeekCompleteListener)`. 请注意，`seekTo(int)`也可以在其他状态下调用，例如`Prepared`,`Paused`和`PlaybackCompleted` state。

这些数据都在这里覆盖：http: [//developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html) 其实我是直接引用的。

您应该能够处理使用`OnErrorListener()`.

您可以在此处找到有关 an 的更多信息`OnErrorListener()`：

[http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html)

在错误侦听器中，您将：

1.  接收错误。
2.  确定错误的类型。
3.  处理错误以纠正情况而不会崩溃。

# windows - SNMP 计算机详细信息

> ID：12683344
> 
> 赞同：0
> 
> 时间：2012-10-02T01:25:21.850
> 
> 标签：windows, networking, snmp

我对 SNMP 协议比较陌生，我必须找到一种方法来获取网络上计算机的详细信息。我需要从每台机器远程获取以下信息：

*   建筑学
*   内存
*   硬盘大小
*   中央处理器速度

这可以用 SNMP 检索列出的变量吗？

所有机器都在某个时候进行了修改，并安装了 Windows XP Pro。此外，WMI 不是一个选项。我已经浏览了 RFC1213 和 SNMPv2 MIB，但是我可能忽略了这些变量。

我有 1 台机器用于测试方法。它是 Windows XP 主页。它已安装 SNMP 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:34:19.753

首先，请多花点时间学习 SNMP。这意味着至少你应该超越 RFC1213。

其次，微软的SNMP支持自己的MIB文件。尝试在 Windows XP 机器上安装 SNMP 支持，然后您可以在 %windir%\system32 中找到它们 (*.mib)。您可以从中找到特定于 Windows 的 OID。它可能无法涵盖您想要的所有对象，但它可以作为一个起点。

总之，微软更喜欢 WMI 而不是 SNMP，所以你应该让你的老板和其他利益相关者相信，选择 SNMP 将来可能会成为一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:47:39.923

是的，这是可能的。为此，您需要为 Windows XP 安装 SNMP 服务。按照[MS 官方网站的说明进行操作](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/snmp_install.mspx?mfr=true)

# jquery - Jquery + zindex 增量

> ID：12683346
> 
> 赞同：2
> 
> 时间：2012-10-02T01:25:57.257
> 
> 标签：jquery, html, css

> **可能重复：**
> [Jquery Draggable + 放在前面](https://stackoverflow.com/questions/12665435/jquery-draggable-bring-to-front)

我有一个网站，用户可以在其中打开多个聊天窗口。

我需要将最新的窗口保持在顶部，并且我正在使用以下内容

```
 var chatZIndex = 100;   
        $(document).on('mousedown','div.chatMessenger', function() {
            $(this).css('z-index', chatZIndex++);
        }); 
```

这工作正常，但我发现了一个错误。如果打开了 6 个聊天框（“d​​iv.chatMessenger”的 6 个实例），则变量 chatZIndex 一次增加 6。4 打开，然后增加 4 等等。

有没有一种方法可以使用相同的设置，但无论打开多少个“div.chatMessenger”实例，每次只能将变量递增 1？

谢谢

* * *

这是设置它们的当前代码

```
var memberID = 1000000000;          // This is the Member ID - REPLACE
var chatMsgTop = 45;                        // Initial Chat Open Location Top
var chatMsgLeft = 45;                       // Initial Chat Open Location Left
var chatZIndex = 100;                       // Starting Number for Chat Messenger z-index Value

// Chat Messenger - Open a New Chat Messager IM Box
$(document).on('click','div#chatFriendsContainer table tr', function() {

    memberID++;     // This is the Member ID - REPLACE

    // Increment Initial Chat Messaging Location on Windows - Avoid Overlap
    chatMsgTop += 10;
    chatMsgLeft += 10;

    var timeStamp = Math.round((new Date()).getTime() / 1000);                                                                                                                          // Timestamp
    $('div#chatWrapper').append('<div id="'+memberID+'" class="chatMessenger" data-timestamp="'+timeStamp+'"></div>');          // Create new Chat IM Container
    $('div#chatMessengerTemplate div.chatMessengerContainer').clone().appendTo('div#'+memberID);                                                        // Clone Template
    $('div#'+memberID).css({left : chatMsgLeft+'px', top : chatMsgTop+'px'});                                                                                               // Update IM Location

    // JQUERY UI Draggable - Initialize
    $('div#'+memberID).draggable({
        containment: $('div#chatWrapper')
    });

    // JQUERY UI Draggable - Update Z-Index
    $(document).on('mousedown','div.chatMessenger', function() {
        //$('div.chatMessenger').not(this).css('z-index', '100');
        //alert('here now...');

        if($('div.chatMessenger', this)) {
            $(this).css('z-index', chatZIndex++);
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:38:44.867

我怀疑您没有正确创建新的聊天窗口。如果你有这样的东西，你的代码应该可以正常工作：http: [//jsfiddle.net/thetext/VT8j8/](http://jsfiddle.net/thetext/VT8j8/)。- 你的聊天元素都是兄弟姐妹。

但相反，我认为你有这样的东西：http: [//jsfiddle.net/thetext/F84Aa/](http://jsfiddle.net/thetext/F84Aa/)。- 您的聊天元素嵌套在前一个元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:39:09.373

这使用“on”功能的数据元素

```
var chatZIndex = 100;  
$("body").on({"mousedown":function(event){
  $(this).css('z-index',chatZIndex ).trigger("upZIndex");

},"upZIndex":function(event){
  chatZindex++;
}},"div.chatMessenger",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:40:09.133

添加一个新类，如 active-chat，其 z-index 比 div.chatMessenger 高得多

```
​$(document).ready(function(){

    $('div.chatMessenger').click(function(){

        // Find The Current Active Chat Window Then REmove The Class
        $('.active-chat').removeClass('active-chat');
        // Assign THe active-chat class to the clicked div
        $(this).addClass('active-chat');  

    });

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T01:41:00.767

我认为您正在向新创建的回调添加 2 个 mousedown 回调，因此它复制了变量 ++ 的添加。

你能提供更多我们可以检查的代码吗？稍后将在下面将我的答案更新为您的附加代码

如何使用 .index()

[http://api.jquery.com/index/](http://api.jquery.com/index/)

或使用 bind 方法确保它只完成一次

# c# - 哪种方式返回 List 的只读包装器 更可取？

> ID：12683352
> 
> 赞同：10
> 
> 时间：2012-10-02T01:26:48.677
> 
> 标签：c#, generics, ienumerable, readonly-collection

比如说，我们有一个带有私有 List 的泛型类。我们至少可以通过两种方式让它返回这个列表的只读包装器：

```
public class Test<T>
{
    public List<T> list = new List<T>();

    public IEnumerable<T> Values1
    {
        get
        {
            foreach (T i in list)
                yield return i;
        }
    }

    public IEnumerable<T> Values2
    {
        get
        {
            return list.AsReadOnly();
        }
    }
} 
```

两者都`Values1`反映`Values2`基础集合中的任何变化，并防止它通过自身进行修改。

哪种方式更可取？应该注意什么？或者有没有其他更好的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T01:30:25.900

如果`IEnumerable<T>`输出只需要一个，我更喜欢：

```
public IEnumerable<T> Values
{
    return this.list.AsReadOnly();
} 
```

由于[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)implements `IEnumerable<T>`，这为您的对象提供了一个安全的包装，同时仍然灵活高效，并防止强制转换能够设置值。

如果您决定需要在结果中做一些不同的事情，您可以随时更改内部实现。

# ruby-on-rails-3 - How to make Delayed_Job notify Airbrake when an ActionMailer runs into an error?

> ID：12683364
> 
> 赞同：12
> 
> 时间：2012-10-02T01:28:47.310
> 
> 标签：ruby-on-rails-3, actionmailer, delayed-job

The DelayedJob docs mention hooks, including an error hook, but only in the context of custom Job subclasses.

[This similar question](https://stackoverflow.com/questions/11766368/error-reporting-when-sending-emails-with-delayed-job) (with no answers) says adding the same hook to the mailer class did not work.

What's the trick?

**Update:**

In general, I'd like to see how to add hooks to jobs that are triggered using the `object.delay.action()` syntax, where I don't see an obvious link to a `____Job` class.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-05T13:16:53.683

I was just searching for a solution to this problem too, and I found [this gist](https://gist.github.com/2223758).

I don't know where it comes from (found it on Google), but well, it seems to do the job pretty well, is quite simple, and seems to follow a DelayedJob's plugin system I was not even aware of...

Here is a lightly improved one using parts of previous monkey-patch code:

```
# https://gist.github.com/2223758
# modified

module Delayed
  module Plugins
    class Airbrake < Plugin
      module Notify
        def error(job, error)
          ::Airbrake.notify_or_ignore(
            :error_class   => error.class.name,
            :error_message => "#{error.class.name}: #{error.message}",
            :parameters    => {
              :failed_job => job.inspect,
            }
          )
          super if defined?(super)
        end
      end

      callbacks do |lifecycle|
        lifecycle.before(:invoke_job) do |job|
          payload = job.payload_object
          payload = payload.object if payload.is_a? Delayed::PerformableMethod
          payload.extend Notify
        end
      end
    end
  end
end

Delayed::Worker.plugins << Delayed::Plugins::Airbrake 
```

It will add the error's message and payload so that it's available in Airbrake.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T00:58:06.873

There's a DJ-honeybadger gem. The gem is of course actively maintained which makes it much better than using a monkey patch. Granted, when the monkey patch came out, there was no gem to do this.

[https://github.com/honeybadger-io/delayed_job_honeybadger](https://github.com/honeybadger-io/delayed_job_honeybadger)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:04:01.263

The best method would be to use Global Hooks. Someone [proposed](https://github.com/collectiveidea/delayed_job/wiki/Global-Hooks-Proposal) this in 2011, but doesn't look like they've been implemented yet.

In the mean time, this works to monkey patch things:

```
# Patch delayed job to report runtime errors to Airbrake
module Delayed
  class Worker

    protected

    def handle_failed_job_with_airbrake(job, error)
      ::Airbrake.notify(
        :error_class   => error.class.name,
        :error_message => "#{error.class.name}: #{error.message}",
        :parameters    => {
          :failed_job => job.inspect,
        }
      )

      handle_failed_job_without_airbrake(job, error)
    end

    alias_method_chain :handle_failed_job, :airbrake

  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T17:09:43.323

Probably the simplest way to get delayed_job to send through an alert to Airbrake when the job fails is to monkey-patch delayed_job. This allows you to hook into delayed_job's internals, and modify it slightly to alert Airbrake when something goes wrong.

Unfortunately, exactly how to do this will depend on which version of delayed_job you are using, and which version of Airbrake you are using; it will also depend, perhaps, on exactly where within the delayed_job processing you want to hook into the system.

However, probably the simplest example I have seen for how to do what you want is to monkey-patch the handle_failed_job method, as seen [here](https://stackoverflow.com/questions/1276164/how-do-i-integrate-hoptoad-with-delayedjob-and-daemonspawn/7170605#7170605). Note though that this example uses the old Hoptoad system for the alerting, so if you're using a modern Airbrake gem, you'll need to change the code that does the actual notifying to be as described [here](https://github.com/airbrake/airbrake/wiki/Sending-notices-to-Airbrake-manually-from-controllers).

# bash - 如何在 BASH 中的 IF THEN 条件测试中添加 OR？

> ID：12683365
> 
> 赞同：-1
> 
> 时间：2012-10-02T01:28:49.527
> 
> 标签：bash, conditional

我有这样的条件：

```
if [ "$day" == "1" ]
then
    echo "First day."
fi 
```

我想添加一个额外的条件，以便如果其中一个为真，它将打印“第一天”，例如：

```
IF $day IS 1 OR $a IS 1
THEN
    "First day."
FI 
```

这如何在 BASH 中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:36:07.177

保持 POSIX 兼容性，有两种选择：

```
if [ "$day" = "1" ] || [ "$a" = "1" ]; then ... fi

if [ "$day" = "1" -o "$a" = "1" ]; then ... fi 
```

在 bash 中，有两个附加选项：

```
if [[ $day = 1 || $a = 1 ]]; then ... fi

if (( day == 1 || a == 1 )); then ... fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:31:39.110

`if [ "$day" == "1" ] || [ "$a" == "1" ]; then echo "First day."; fi`

或者

```
if [ "$day" == "1" ] || [ “$a" == "1" ]
then
    echo "First day."
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T01:33:06.413

使用[`-o`](http://tldp.org/LDP/abs/html/comparison-ops.html)（逻辑或）：

```
if [ "$day" == "1" -o "$a" == "1" ]
then
    echo "First day."
fi 
```

# python - Heroku/Django：没有名为 dj_database_url 的模块

> ID：12683367
> 
> 赞同：13
> 
> 时间：2012-10-02T01:29:05.103
> 
> 标签：python, django, postgresql, heroku

我第一次尝试在 Django 上设置 PostgresSQL，当我尝试执行 syndb 时遇到此错误？

> ImportError：无法导入设置“testapp.settings”（是否在 sys.path 上？）：

在我的 settings.py 文件顶部也有这个，不知道这是否正确？

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default=os.environ.get('DATABASE_URL'))} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-02T03:50:44.227

您没有提供很多有关您尝试运行同步数据库的确切位置的信息吗？本地？还是在 Heroku 上？我的回答是假设它在本地。

基本上，您需要安装 virtualenv 和 pip。在你的 virtualenv 中工作（激活它）时，你需要做一个

```
 pip install dj-database-url 
```

然后你需要做一个：

```
 pip freeze > requirements.txt 
```

起床并继续使用 Python+Django+Heroku 并不是一件很难的事情……但是，有很多步骤。如果你不明白，我推荐 Heroku Django[教程](https://devcenter.heroku.com/articles/django)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:37:08.583

您必须安装 dj-database-url。

将其添加到您的 requirements.txt 文件中。

# c# - 我可以从 ActionResult 中调用 ActionResult 并使用返回的 HTML

> ID：12683374
> 
> 赞同：0
> 
> 时间：2012-10-02T01:30:55.103
> 
> 标签：c#, asp.net-mvc, actionresult

> **可能重复：**
> [在 MVC3 Razor 中，如何在动作中获取渲染视图的 html？](https://stackoverflow.com/questions/4692131/in-mvc3-razor-how-do-i-get-the-html-of-a-rendered-view-inside-an-action)

好的，这是场景。我有一个返回格式良好的局部视图的操作结果。我希望在由另一个操作结果触发的电子邮件中发送完全相同的 HTML 结果。我意识到有很多方法可以做到这一点。在 Controller 或 Model 中格式化 HTML 字符串需要很长时间。我还可以从磁盘等读取文件内容。目前我正在这样做，但在我的控制器中必须有更好更可接受的方法来完成此操作：

```
// MAKE AN HTTP REQUEST FROM CONTROLLER A AND GET THE DETAILS FROM ANOTER CONTROLLER/ACTION
WebRequest req = WebRequest.Create("UrlToAnotherActionResult");
req.PreAuthenticate = true;
WebResponse resp = req.GetResponse();
StreamReader reader = new StreamReader(resp.GetResponseStream());
var html = reader.ReadToEnd().Trim(); 
```

然后我获取 html 结果并将其用作我的电子邮件正文。

有没有比这更优雅的方法来从另一个动作中获取结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:51:19.603

我一直在使用此处定义的 RenderPartialViewToString 功能：

[http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)

它似乎工作得很好。

# objective-c - Cocoa - 如何通过 NSMenuItem 的操作传递参数？

> ID：12683379
> 
> 赞同：8
> 
> 时间：2012-10-02T01:32:26.940
> 
> 标签：objective-c, cocoa

我正在以编程方式创建一个菜单：

```
+ (void)refreshStatusMenu {
    for (NSDictionary *dict in kbMsgSet) {
        NSString *msj = [dict objectForKey:@"msj"];
        NSString *mid = [dict objectForKey:@"mid"]; // <- this would be http://www.blah.com 

        msg_item = [[NSMenuItem alloc] initWithTitle:[NSString stringWithFormat:@"%@", msj] action:@selector(goToURL:mid:) keyEquivalent:@""];

        [msg_item setTarget:[self class]];
        [sm insertItem:msg_item atIndex:(i_msg)];
        i_msg++;
        //...
    }
} 
```

如何将参数传递给`@selector(goToURL:)`，以便在单击项目时可以调用：

```
+ (void)goToURL:(id)obj {
    NSLog(@"Open url:...%@", obj);
} 
```

如果我尝试通过，`@selector(goToURL:var2:)`我会收到未捕获的异常错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T01:58:34.250

动作方法不能有 2 个参数。应该只有一个，发件人，在这种情况下是菜单项。有关将额外信息附加到菜单项并在操作方法中检索它的方法，请参阅[此问题](https://stackoverflow.com/questions/2824287/how-do-i-set-the-sender-on-a-nsmenuitems-action)的答案。

# ios - xcode 4.5 一些安装错误

> ID：12683380
> 
> 赞同：1
> 
> 时间：2012-10-02T01:32:31.470
> 
> 标签：ios, xcode, ios6, simulator, osx-mountain-lion

像这样的 xcode 4.5 OSX 10.8 CoreLibrary(529mb) 安装错误。

“无法安装 OS X 10.8 Core Library 的文档”安装路径是 /User/ ***** /Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10_8.Core...，指向一个文件夹看起来不像是用于更新的有效文档集

而且模拟器 6.0 的午餐时间很慢（而不是模拟器 5.0）。

我的mac os是“山狮”。

我已经尝试重新安装但无法正常工作。（使用 AppCleaner）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:21:01.913

我发现以前未完成的下载留下的文件被删除。

1.  退出 Xcode。
2.  转到 ~/Library/Developer/Shared/Documentation/DocSets
3.  删除整个 com.apple.adc.documentation.AppleOSX10_8.CoreReference.docset
4.  打开 Xcode 并重新启动下载和安装过程。

# css - CSS nth-last-child 混淆

> ID：12683382
> 
> 赞同：1
> 
> 时间：2012-10-02T01:32:51.497
> 
> 标签：css, css-selectors

当我试图用这个做点什么时，我真的对 nth-child 感到困惑......

我已经想出了如何让每三帧的边距设置为零！

```
#thumbnailWrap .thumbnail:nth-child(3n+3) {
    margin-right: 0px;
} 
```

但是，我无法弄清楚如何让最后一个孩子将 margin-bottom 重置为零。

我一直在尝试，但后来我只是输入了这个：

```
#thumbnailWrap .thumbnail:nth-last-child(1), #thumbnailWrap .thumbnail:nth-last-child(2), #thumbnailWrap .thumbnail:nth-last-child(3) {
    margin-bottom: 0px;
} 
```

因为我已经厌烦了。现在，如果您不介意，请帮助我并教我，我怎样才能更简化和更好地做到这一点:)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:39:41.187

如果您想要最后 3 个孩子，请使用此

```
#thumbnailWrap .thumbnail:nth-last-child(-n+3) {
    margin-bottom: 0px;
} 
```

# ruby-on-rails-3 - Mongoid 不区分大小写的查询

> ID：12683388
> 
> 赞同：1
> 
> 时间：2012-10-02T01:33:16.910
> 
> 标签：ruby-on-rails-3, mongodb, indexing, mongoid, denormalization

我想对任务标题进行不区分大小写的 mongoid 查询。

假设模型看起来像：

```
class Mission
  include Mongoid::Document

  field :title
  filed :description
end 
```

这可以通过 mongoid 范围/索引来完成吗？它会是什么样子？

此外，更好的做法是对数据进行非规范化并保存可索引的小写字段，如果是这样，那会是什么样子？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:23:35.277

如果这是一个字段，您将为其编制索引，最好的解决方案是添加一个附加字段，该字段包含您的字段的小写/大写版本，如此处建议的[那样](https://jira.mongodb.org/browse/SERVER-90)。

如果没有，您可以[通过不区分大小写的正则表达式进行查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)。这将对性能产生影响，但如此轻描淡写。

```
db.Mission.find({"title" : /foo/i}) 
```

# arrays - Matlab，使用if语句比较数组

> ID：12683393
> 
> 赞同：4
> 
> 时间：2012-10-02T01:33:42.670
> 
> 标签：arrays, matlab, if-statement, matrix, median

我已经搜索了网络，试图找到我遇到的这个问题的答案。

我有一个类似于以下的数组

```
A = [2 4 6 8 ; 3 5 7 9 ; 1 4 6 9]

row median = [ 5 6 5 ]
col median = [ 2 4 6 9 ] 
```

根据这些值，我想创建一个中值图。所以我创建了数组

```
MedianMap = int8(zeros(MAX_ROWS, MAX_COLS)) 
```

在这个数组中，我想分配三个不同的值：1、0、-1。所以中值映射输出将与数组“A”的大小相同：

*   如果该值大于行和列的中位数，则将“1”分配给中位数图
*   如果该值小于行和列中位数，则将“-1”分配给中位数图
*   否则为 0？

如何遍历“A”数组中的每一行和每一列并将其与各自的列和行中位数相关联？

我已经用 C 代码编写了代码并且它是成功的，但是只是在 Matlab 中挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:10:05.760

这是我的做法：

1.  为每个条件创建逻辑索引（元素大于/小于行/列中位数）
2.  使用逻辑索引来更新 MedianMap。

在代码中：

```
[xMedian, yMedian] = meshgrid(col_median, row_median);

isRowHigh = (A > yMedian);
isColHigh = (A > xMedian);

isRowLow = (A < yMedian);
isColLow = (A < xMedian);

MedianMap(isRowHigh & isColHigh) = 1;
MedianMap(isRowLow & isColLow) = -1; 
```

笔记：

*   [`meshgrid`](http://www.mathworks.com.au/help/matlab/ref/meshgrid.html)展开`row_median`并`col_median`变成大小相同的数组`A`
*   `A > yMedian`返回一个大小相同的矩阵，其中包含将 的每个元素与 的对应元素`A`进行比较的布尔结果。`A``xMedian`
*   `isRowHigh & isColHigh`执行布尔矩阵的元素与
*   `MedianMap(L)`，其中`L`是逻辑索引（布尔矩阵），选择`MedianMap`对应于其中元素为`L`真的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:59:52.680

我会这样做：

```
MedianMap = ...
    ( bsxfun(@gt,A,col_median) & bsxfun(@gt,A,row_median.') ) - ...
    ( bsxfun(@lt,A,col_median) & bsxfun(@lt,A,row_median.') ); 
```

这个是多线程的（适用于更大的问题），并且没有其他答案中涉及的任何临时变量（更小的峰值内存占用）。

虽然它不是很漂亮:)所以如果你想要更好的可读性，请使用`meshgrid`BrianL的答案，或者`repmat`：

```
Col_median = repmat(col_median, size(A,1),1);
Row_median = repmat(row_median.', 1, size(A,2));

MedianMap = ...
    ( A > Col_median & A > Row_median ) - ... 
    ( A < Col_median & A < Row_median ); 
```

或像拉斯曼那样乘以一个矩阵：

```
Col_median = ones(size(A,1),1) * col_median;
Row_median = row_median.' * ones(1,size(A,2));

MedianMap = ...
    ( A > Col_median & A > Row_median ) - ... 
    ( A < Col_median & A < Row_median ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T02:12:12.103

```
MedianMap  = (A > Rmedian'*ones(1,4))+ ( A > ones(3,1)*Cmedian) -1 
```

# html - 我在 XML 文件中嵌入了 HTML 代码，在浏览器中显示为代码

> ID：12683395
> 
> 赞同：0
> 
> 时间：2012-10-02T01:34:11.760
> 
> 标签：html, xml, xslt

我有实体形式的 HTML 代码，例如

```
<zh_tw shortText="">&amp;nbsp;</zh_tw> 
```

嵌入在 XML 文件中。当我在浏览器中查看 XML 文本时，我希望将该文本呈现为 HTML。我创建了一个简单的 XSLT，用于将 XML 文件转换为表格格式，但我不希望 HTML 代码显示为代码。

以下是 XML 中的代码示例：

```
<?xml-stylesheet type='text/xsl' href='Simple.xslt'?>
<Projects>
  <Project>
    <Text Type="surveyitem" SubType="intro" TranslationGroupID="46675">
     <zh_tw shortText="">&amp;nbsp;</zh_tw>
    </Text>
      <Scale Type="scaletext" ScaleTextID="23501">
        <en_us>to translate</en_us>
        <zh_tw>to translate</zh_tw>
      </Scale>
    </Text>
  </Project>
</Projects> 
```

这是我正在使用的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="html" indent="yes" version="4.0"/>

<xsl:template match="/">

  <html>
  <body>
  <table border="1">
     <tr bgcolor="#9acd32">
        <th>Translation</th>
      </tr>
      <xsl:for-each select="Projects/Project/Text">
        <tr>
          <td><xsl:value-of select="zh_tw"/></td>
       </tr>
      </xsl:for-each>
     <xsl:for-each select="Projects/Project/Text/Scale">
        <tr>
          <td><xsl:value-of select="zh_tw"/></td>
       </tr>
      </xsl:for-each>
    </table>
 </body>
  </html>

  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:15:53.530

使用禁用输出转义是一个坏主意。[更好的是在这里](https://stackoverflow.com/questions/1069092)使用字符串替换模板作为 Welbog 的解决方案。

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="html" indent="yes" version="4.0"/>

<xsl:template name="string-replace-all">
  <xsl:param name="text"/>
  <xsl:param name="replace"/>
  <xsl:param name="by"/>
  <xsl:choose>
    <xsl:when test="contains($text,$replace)">
      <xsl:value-of select="substring-before($text,$replace)"/>
      <xsl:value-of select="$by"/>
      <xsl:call-template name="string-replace-all">
        <xsl:with-param name="text" select="substring-after($text,$replace)"/>
        <xsl:with-param name="replace" select="$replace"/>
        <xsl:with-param name="by" select="$by"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$text"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template name="replace-entities">
  <xsl:param name="text"/>
  <xsl:call-template name="string-replace-all">
    <xsl:with-param name="text" select="$text" />
    <xsl:with-param name="replace" select="'&amp;nbsp;'" />
    <xsl:with-param name="by" select="'&#160;'" />
  </xsl:call-template>
  <!-- Add more calls to string-replace-all for each entity reference you want to map. -->
</xsl:template>

<xsl:template match="/">
  <html>
  <body>
  <table border="1">
     <tr bgcolor="#9acd32">
        <th>Translation</th>
      </tr>
      <xsl:for-each select="Projects/Project/Text">
        <tr>
          <td>
            <xsl:call-template name="replace-entities">
              <xsl:with-param name="text" select="zh_tw" />
            </xsl:call-template>
          </td>
       </tr>
      </xsl:for-each>
     <xsl:for-each select="Projects/Project/Text/Scale">
        <tr>
          <td>
            <xsl:call-template name="replace-entities">
              <xsl:with-param name="text" select="zh_tw" />
            </xsl:call-template>
          </td>
       </tr>
      </xsl:for-each>
    </table>
 </body>
  </html>

  </xsl:template>
</xsl:stylesheet> 
```

...当应用于您的输入时，将产生此 html...

```
<html>
  <body>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Translation</th>
      </tr>
      <tr>
        <td> </td>
      </tr>
      <tr>
        <td>to translate</td>
      </tr>
    </table>
  </body>
</html> 
```

...这将使中间行像一个空间一样简单。在上面的清单中，中间行的 td 标记之间的空白实际上是代码点为 160 的字符，而不是正常的空格字符。当然，这在代码清单中并不能很好地显示出来。

一些 XSLT 处理器可能会将 nbsb 字符序列`&#160;`化为`&nbsp;`. 所有这些结果都应该没问题，因为它们对浏览器意味着同样的事情，并且都会以相同的方式呈现。

# facebook - Score API 是否需要 publish_actions 或 publish_stream？

> ID：12683399
> 
> 赞同：1
> 
> 时间：2012-10-02T01:34:56.040
> 
> 标签：facebook, facebook-graph-api, web-applications, permissions, facebook-apps

目前，我在 User & Friend Permissions 下拥有 email 和 publish_actions，在 Extended Permissions 下拥有 publish_stream。奇怪的是，删除或添加 publish_actions 不会更改 Auth Dialog。扩展对话框要求“代表您发布”。如果用户代表您拒绝该帖子，我将无法为该用户使用 Score API。Score API 文档说我只需要 publish_actions 就可以使用 Score API。

我有两个问题：1）添加 publish_actions 是否会以任何方式更改身份验证对话框？2) 使用 Score API 需要什么权限？它是 publish_actions 还是 publish_stream？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:35:09.937

关于 publish_stream 和 publish_actions 存在一些混淆，因为 Facebook 首先[更改了 publish_actions](https://developers.facebook.com/blog/post/2012/04/25/streamlining-publish_stream-and-publish_actions-permissions/)以允许与 publish_stream 有一些重叠，然后[将两者设为同义词](https://developers.facebook.com/docs/reference/login/extended-permissions/)。

1.  截至目前（2013 年 6 月），publish_actions 确实更改了身份验证对话框，添加了“代表您发布”步骤。
2.  从现在开始使用的权限是 publish_actions。到目前为止，publish_stream 似乎是它的别名，但它可能会在将来的某个时候被删除。

# actionscript-3 - Flash - 按钮的标签和缩放

> ID：12683400
> 
> 赞同：0
> 
> 时间：2012-10-02T01:35:14.727
> 
> 标签：actionscript-3, flash

我在 Flash 中使用一个按钮组件并使用它的标签字段。当我将标签字段设置为一个单词时，由于我的按钮对于标签来说太小，它的一半被切断了。有什么办法可以调整按钮上文字的大小吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:59:33.250

我想到了。创建一个 TextFormat 然后执行 m_button.setStyle("textFormat", myTextFormat);

# syntax - Clojure 中匿名函数的 fn 和 # 语法有区别吗？

> ID：12683403
> 
> 赞同：13
> 
> 时间：2012-10-02T01:35:27.007
> 
> 标签：syntax, clojure, lambda, anonymous-function

我是 clojure 的新手，我见过这样写的匿名函数：

```
(fn [x] (* x x)) 
```

并且还喜欢：

```
#(* % %) 
```

显然，第二种更简洁。有什么相关的区别吗？每个匿名函数都可以用任何一种风格表示吗？是更惯用的一种吗？

与这个问题相关，我无法确定如何转换`(fn [x] [x x])`为后一种语法。我将不胜感激指向澄清这种情况的文档的指针。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T02:23:18.463

最重要的区别是：

*   `(fn ...)`可以嵌套，`#()`不能
*   您可以使用`(fn [x y] ..)`或类似名称更好地命名您的参数，而不是使用`%`,`%2`等`%3`。
*   您可以为递归使用命名函数`(fn ...)`，例如`(fn fib [n] (if (<= n 1) 1 (+ (fib (- n 1)) (fib (- n 2)))))`
*   `(fn [...] ...)`由于`#()`是阅读器宏而不是常规的 Clojure 形式，因此更容易进行代码生成/操作。
*   `#()`更简洁。但是，如果这是一个主要考虑因素，那么您的优先级可能是错误的:-)

我个人的建议是：

*   `(fn [...] ...)`大多数情况下更喜欢
*   仅用于`#()`非常短的内联函数，例如`(map #(+ 2 %) (range 10))`
*   还要考虑通过高阶函数生成匿名函数而不是显式地写出它们可能会更好，例如`(comp func1 func2)`或`(partial func param1 param2)`等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T02:27:54.773

另一个 SO 答案（[Clojure 开发人员要避免的常见编程错误](https://stackoverflow.com/a/2021343/22417)）提到`#([% %])`扩展为`fn [%] ([% %])`（注意括号），这会导致 ArityException。

您可以`#(vector % %)`解决此限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T02:14:43.943

从[文档](http://clojure.org/reader)中，我认为这些是最相关的差异：

> 惯用的将用于非常短的一次性映射/过滤器 fns 等。
> 
> #() 表单不能嵌套。

另一件事是，如果您需要命名参数，fn 是一个更好的选择。对于#()，您将使用 %，或者对于多个参数，例如 %1、%2 等（还有 %&）。

# glassfish - MDB 异常处理中的明显资源泄漏

> ID：12683404
> 
> 赞同：0
> 
> 时间：2012-10-02T01:35:44.667
> 
> 标签：glassfish, ejb, message-driven-bean

我有一个 MDB，它使用队列中的消息，然后调用无状态 EJB 来执行一些数据库操作。像这样的东西：

```
public class TestMDB implements MessageListener
{
  @EJB
  private UpdateService updateSvc;

  @Override
  public void onMessage(Message message) 
  {
    try
    {
      updateSvc.updateSystemStatuses();
    }
    catch(Exception e)
    {
      // log error
    }
  }
} 
```

在上面的代码中，如果 updateSystemStatuses() 调用抛出 RuntimeException，这似乎会导致内存泄漏。我通过诱导 updateSystemStatuses() 抛出 RuntimeExceptions 来加速这个过程，当这种情况发生时，CPU 使用率和内存使用率峰值（如在 JVisualVM 中观察到的）直到我开始得到 OutOfMemoryErrors。

如果我修改代码以将 RuntimeExceptions 从 onMessage 中抛出，资源泄漏似乎完全消失了：

```
public class TestMDB implements MessageListener
{
  @EJB
  private UpdateService updateSvc;

  @Override
  public void onMessage(Message message) 
  {
    try
    {
      updateSvc.updateSystemStatuses();
    }
    catch(RuntimeException e)
    {
      //log error
      throw e;
    }
    catch(Exception e)
    {
      //log error
    }
  }
} 
```

我知道从 EJB 方法中抛出 RuntimeException 会导致事务回滚，我认为这与我所看到的有关，但除此之外，我不清楚这里发生了什么。资源泄漏是 Glassfish 错误吗？我是否以正确的方式处理 MDB 中的异常？

我使用 Eclipselink 和 Oracle 11G 在 Java 1.6.0_35 上运行 Glassfish 3.1.2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:08:23.307

我认为您正面临“**有毒信息**”的情况。您的 MDB 获取队列中的消息并尝试处理它。因为处理失败（您抛出异常），所以消息被放回队列中。并一次又一次地处理。这就是为什么你看到 CPU 飞速发展的原因。

使用 Glassfish，您可以指定消息在被忽略之前可以处理多少次（即，如果处理引发异常）。您将在此博客上找到有用的信息：

[http://weblogs.java.net/blog/felipegaucho/archive/2009/09/24/handling-poison-messages-glassfish](http://weblogs.java.net/blog/felipegaucho/archive/2009/09/24/handling-poison-messages-glassfish)

# c# - 在内存中保留 EF Code First 模型

> ID：12683405
> 
> 赞同：0
> 
> 时间：2012-10-02T01:35:45.663
> 
> 标签：c#, wpf, entity-framework

我有几个不同的 wpf 窗口，例如 sales.xaml、buy.xaml。

两个窗口都使用相同的 EF 代码优先模型 sales.cs。

我为 sales.xaml 中的销售模型添加了一些价值，当 sales.xaml 关闭时，如何从 sales.xaml 中检索到 buy.xaml 中的相同模型。

如果我没有将模型属性设置为静态，数据将会丢失。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:16:01.547

一种选择是将模型的实例声明为 StaticResource，然后在每个页面上访问它，并根据需要将实例设置为 DataContext。

```
<Application.Resources>
 <Example:ViewModel x:Key="VM"/>
</Application.Resources> 
```

...

```
 <UserControl.DataContext>
  <Binding Source="{StaticResource VM}"/>
 </UserControl.DataContext> 
```

如果您在每个页面上执行此操作，则任何更改都应保留到全局存储在应用程序的 ResourceDictionary 中的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:20:51.793

在任何情况下都不要使您的数据上下文静态化。不要使用单例。不要让它成为全球性的。

当您需要进行数据操作时，始终实例化一个新的数据上下文。操作完成后，调用 SaveChanges 以便下次需要时返回数据。

原因是数据上下文被设计为短暂的。如果您将上下文设为静态，则它在应用程序的整个生命周期内都不会被销毁。它将继续增长对象缓存，直到最终耗尽内存。

数据上下文没有中止或回滚功能。它们被设计为在逻辑操作结束时被丢弃。假设您将实体添加到数据上下文，然后 SaveChanges.. 如果出现错误，则无法删除您刚刚添加的数据。唯一受支持的方法是破坏上下文。

# java - 使用 StringTokenizer 制作单词对

> ID：12683410
> 
> 赞同：1
> 
> 时间：2012-10-02T01:36:19.857
> 
> 标签：java, string, stringtokenizer

我陷入了一种情况，我必须使用 StringTokenzier 从一串行中制作成对的单词。但我不确定该类如何为我提供该功能。

示例：输入：“USA UK USSR China”
输出：“USA UK”“UK USSR”“USSR China”

StringTokenizer 只有 hasMoreElements() 和 hasMoreTokens()，我们如何迭代它来实现所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:39:48.463

只需存储以前的，你就完成了：

```
String previous = tokenizer.nextToken();
while (tokenizer.hasMoreElements()) {
  String current = tokenizer.nextToken();
  String correctValue = previous + " " + current;

  previous = current;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:45:25.050

你看过[StringTokenizer 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)吗？它也有例子。你试过什么了？

标记器用于根据预定标记拆分字符串。在您的情况下，您的令牌是一个空格（默认值）。

```
 StringTokenizer st = new StringTokenizer("this is a test", " ");
 String prevToken = st.hasMoreTokens() ? st.nextToken() : "";
 while (st.hasMoreTokens()) {
     String currToekn = st.nextToken();
     System.out.println(prevToken + " " + nextToken );
     prevToken = currToken;
 } 
```

# html - localhost 不会立即更新

> ID：12683417
> 
> 赞同：13
> 
> 时间：2012-10-02T01:37:19.860
> 
> 标签：html, xampp, localhost

我一直在使用 XAMPP 连接到 localhost 以在我的计算机上为网站进行编辑。我已经使用它一年多了，过去每当我更新本地文件时，我都可以在浏览器上刷新页面，它会立即更新。现在，即使图像文件已更改，我也无法对其进行更新。

我想知道这是否是 cookie 的问题（我过去没有过）。发生这种情况有共同的原因吗？我在搜索中找不到任何东西。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-04-02T11:58:48.127

我遇到了同样的问题，只需重新加载当前页面，忽略缓存的内容即可解决。我知道有一个适用于 Chrome 和 Firefox 的快捷方式：

对于电脑：

> Ctrl + Shift + R

对于 Mac：

> Command + Shift + R

我希望它能让一些人的生活更轻松。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T01:40:27.263

首先要尝试的是清除浏览器历史记录/缓存并重新加载浏览器。

如果您启用了某种也可以解释它的缓存。

您可以通过在 localhost 上创建一个**新**页面来进行测试，看看它是否有效。如果是这样，请检查您在 localhost 上更改的任何页面是否实际上正在更新（检查文件修改时间并关闭/重新加载源以查看更改是否确实存在）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-06T11:48:33.493

只需删除所有与浏览器相关的临时文件，我使用了 C-Cleaner。添加标题`<meta http-equiv="Cache-control" content="no-cache">`

我用这种方法解决了这个问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-29T21:03:56.860

为了完全更新/刷新您的网站，您需要使用以下命令：

`Ctrl`+`F5`

这会强制浏览器完全更新您对文件所做的更改。如果您在 CSS 文件中进行了更改（已保存）但浏览器刷新不反映新更改，则此方法有效。在这种情况下，常规的 F5 刷新将不起作用。

对于 Mac 操作系统：`Command`+ `Shift`+`R`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-14T08:18:32.877

我知道这是一个老问题，但希望我的回答对将来的人有所帮助。对我有用的解决方案是在 htcdocs 中删除包含我的代码的文件夹，并将其替换为更新的代码文件夹。这要求我将我的代码的原始文件夹保存在另一个文件夹中，我用更新对其进行了修改并制作了一个副本以替换存储在 htcdocs 中的过时代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-04T10:37:31.017

我以为这发生在我身上，但我基本上犯了一个非常基本但具有欺骗性的错误：在记事本中打开它进行编辑之后，我已将 .php 文件移动到服务器上的新文件夹中。为了查看从 .php 文件生成的页面，我在 Web 浏览器中输入了新 URL 以说明这一移动，但在移动它之前，我仍在使用记事本 openeed 处理该文件。因此，我在移动前保存了对文件的更改，但无法理解为什么实际上它没有更改浏览器中的页面。也许很愚蠢，但让我感到困惑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T02:12:04.570

我见过其他人有同样的问题。他们刚刚搬到 WAMP。如果您没有特定的理由坚持使用 XAMPP，您可以尝试一下。希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-05T18:09:29.507

我最近使用 Django 2.1 遇到了这个问题。我尝试了每个浏览器，多次清除缓存，三次检查我是否在编写代码的同一目录中使用 Python 的 SimpleHTTPServer，甚至完全重新启动......不走运。

在将 MacBook 扔出窗外之前，我通过将`Debug`设置从更改`False`为`True`. 为什么这样做？我不太确定，因为[此设置的文档](https://docs.djangoproject.com/en/2.2/ref/settings/#debug)根本没有提到这种行为，但这是我记得最近更改为可能暗示这个幽灵错误的唯一一件事。如果有人有特定来源来确认此信息，请发表评论，我将编辑我的答案。

希望这可以帮助任何想砸绿巨人电脑的人:-)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-16T14:34:09.973

当我将 xampp 与 chrome(mac) 一起使用时，我遇到了同样的问题。我尝试了几种方法来解决它，例如清除 chrome 或在 html 文件中添加额外的代码。但两者都不起作用。最后，我通过使用 safari 而不是 chrome 简单地解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-10T08:23:12.380

我通过重命名 php 文件来修复我的问题（在这种情况下，我删除了 'index.php' 中的 'e'，然后将其添加回来）

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-10-28T12:56:07.080

清除您的浏览器历史记录或缓存。

尝试使用不同的浏览器，如果您使用的是 Chrome，则使用 Mozila 和其他浏览器，反之亦然。

# android - Android禁用锁屏应用程序的所有硬件键

> ID：12683418
> 
> 赞同：1
> 
> 时间：2012-10-02T01:37:25.067
> 
> 标签：android, lockscreen, android-homebutton

我正在为 android 编写一个自定义锁屏应用程序。

我设法禁用了后退按钮。但事实证明，ICS 上的主页按钮和最近的应用程序按钮并不那么容易。

我四处寻找并想出了：

```
@Override
public void onAttachedToWindow() {
    // TODO Auto-generated method stub
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
} 
```

但是，这会抛出 IllegalArgumentException 窗口类型在添加后无法更改。然后我尝试在 onCreate() 中设置它，但主页键仍然有效。

我愿意使用根方法来实现这一点。有什么办法可以完成吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:38:59.430

对于 2.3 以上的 android 版本，禁用 Home 按钮的覆盖

# javascript - 将相同编号的数组对象与其他数组中的相同编号组合？

> ID：12683420
> 
> 赞同：0
> 
> 时间：2012-10-02T01:37:36.983
> 
> 标签：javascript

我有一个 AJAX 脚本，它返回如下结果：

```
array one = ["<p>Number 1</p>","<p>Number 2</p>", "<p>Number 3</p>"]

array two = ["<p>Test</p>","<p>Other</p>", "<p>Random</p>"] 
```

第一个数组中的对象数量总是与第二个数组相同。

是否可以将数组 1 中的第一个对象与数组 2 中的第一个对象组合，然后将数组 1 中的第二个对象和数组 2 中的第二个对象组合起来，等等。

前任。）

```
["<p>Number 1</p>", "<p>Test</p>"]
["<p>Number 2</p>", "<p>Other</p>"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:39:50.967

```
var result = [];
for( var i = 0; i < one.length; i++){
    result[i] = [one[i], two[i]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:40:27.470

当然：

```
var results = [];

for(var i = 0; i < one.length; i++){
    results.push([one[i], two[i]]);
} 
```

# javascript - 从 Javascript 中的函数外部访问内部函数

> ID：12683425
> 
> 赞同：0
> 
> 时间：2012-10-02T01:38:39.873
> 
> 标签：javascript

我正在尝试从 Javascript 中的函数外部访问内部函数，但它只打印“未定义”而不是打印函数的源代码。如何`changeBlah`从范围之外修改函数的原型`exampleFunction`？

```
var blah = "";
function exampleFunction(theParameter){
   this.blah = theParameter;
    this.changeBlah = function(){
        this.blah += "gah";
    }
}

var stuff2 = new exampleFunction("Heh!");
alert(stuff2.blah);
stuff2.changeBlah();
alert(stuff2.blah);

alert(exampleFunction.changeBlah); //now why doesn't this work? It doesn't print the function's source code, but instead prints undefined.​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:42:06.317

最接近的方法是使用 Prototype 模型：

```
function exampleFunction(theParameter) {this.blah = theParameter;}
exampleFunction.prototype.changeBlah = function() {this.blah += "gah";}

alert(exampleFunction.prototype.changeBlah); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:41:29.600

> .. 现在为什么 [exampleFunction.changeBlah] 不起作用？

因为`this` *不是* `exampleFunction`。

这是一个具有[[prototype]]的*新对象。*`exampleFunction`分配给属性*不会*传播回 [[prototype]] 解析链。（*没有办法*直接从对象访问对象的 [[prototype]]，但如果 [[prototype]] 对象是*已知*的，那么它可以被*变异*。）

比较（这会中断`stuff2.blah`，但应该显示`exampleFunction.changeBlah`按预期工作）：

```
exampleFunction.changeBlah = function(){
    this.blah += "gah";
} 
```

（另请参阅 xdazz 的评论以了解另一种可能的访问方法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:15:05.117

这是迄今为止我设计的最好的解决方案（而且相当简洁）：

```
exampleFunction.prototype.changeBlah = function(){
    this.blah += "gah"; //"this" refers to an instance of changeBlah, apparently 
}

var blah = "";
function exampleFunction(theParameter){
   this.blah = theParameter;
}

var stuff2 = new exampleFunction("Heh!");
alert(stuff2.blah);
stuff2.changeBlah(); //it works, even though the "prototype" keyword isn't specifically used here
alert(stuff2.blah);
alert(exampleFunction.prototype.changeBlah);​ 
```

# java - java.lang.outofmemoryError java

> ID：12683429
> 
> 赞同：0
> 
> 时间：2012-10-02T01:38:58.703
> 
> 标签：java, memory

我正在尝试使用 JSP 在页面上显示 5000 条记录。但是我的内存不足异常。我这样做是因为，

```
<TABLE><tr><td>Header1</td><td>Header2</td><td>Header3</td><td>Header4</td><td>Header5</td></tr>");
    <%Test test = new Test();
         List myList = test.fetchdata();

        Iterator itr  = myList.iterator();
        while(itr.hasNext())
        {       
          Object[] row = (Object[]) itr.next();
          String hdr1 = (String) row[0];
          String hdr2 = (String) row[1];
          String hdr3 = (String) row[2];
          String hdr4 = (String) row[3];
          String hdr5 = (String) row[4];
              stringBuilder.append"<tr><td>'"+hdr1+"'</td><td>'"+hdr2+"'</td><td>'"+hdr3+"'</td><td>'"+hdr4+"'</td><td>'"+hdr5+"'</td></tr>");              
        }
 stringBuilder.append("</TABLE></body></html>");
 out.print(stringBuilder.toString()); 
  %> 
```

1）如果我想决定在屏幕上保留 5000 条记录，我的代码有什么问题吗

2）或者如果我使用分页等，这个错误会消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:24:13.300

因为您的代码示例在某种程度上被破坏了，所以很难说，但是有两个地方会导致内存问题。A) 你的 test.fetchdata() B) 你对 StringBuilder 的追加

从 B 开始，如果您直接在 JSP 上，您可以尝试直接输出它，而不是使用 StringBuilder。根据 JSP 编译器的不同，它可能会生成较小的 StringBuilders，它们不应该占用太多内存。

但很可能问题出在 A 中。您会返回一个已经占用大量内存的长列表。您只能通过对结果进行一些延迟加载（在迭代器中）或通过分页建议自己进行优化（这是值得推荐的，因为所有评论都表明:-)）

当有很多重复的字符串时，最后一个选项可能值得一试。在将字符串存储在数组中之前，在 fetchdata() 方法中使用 .intern() 。这可以防止多个相同的字符串占用额外的堆，但需要花费一点 CPU 时间来计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:37:32.977

我在想一些更像这样的东西。

```
 List myList = test.fetchdata();

    Iterator itr = myList.iterator();

    StringBuilder stringBuilder = new StringBuilder("");

    while (itr.hasNext()) {
        Object[] row = (Object[]) itr.next();
        String hdr1 = (String) row[0];
        String hdr2 = (String) row[1];
        String hdr3 = (String) row[2];
        String hdr4 = (String) row[3];
        String hdr5 = (String) row[4];
        stringBuilder.append("<tr><td>'").append(hdr1)
                .append("'</td><td>'").append(hdr2).append("'</td><td>'")
                .append(hdr3).append("'</td><td>'").append(hdr4)
                .append("'</td><td>'").append(hdr5).append("'</td></tr>");
    }
    stringBuilder.append("</TABLE></body></html>");
    out.print(stringBuilder.toString()); 
```

或者可能将其重构为这个。

```
 List myList = test.fetchdata();

    Iterator itr = myList.iterator();

    StringBuilder stringBuilder = new StringBuilder("");

    while (itr.hasNext()) {
        Object[] row = (Object[]) itr.next();
        stringBuilder.append("<tr><td>'").append(row[0])
                .append("'</td><td>'").append(row[1]).append("'</td><td>'")
                .append(row[2]).append("'</td><td>'").append(row[3])
                .append("'</td><td>'").append(row[4]).append("'</td></tr>");
    }
    stringBuilder.append("</TABLE></body></html>");
    out.print(stringBuilder.toString()); 
```

# java - 谷歌应用引擎 JDO 延迟数据持久化

> ID：12683433
> 
> 赞同：0
> 
> 时间：2012-10-02T01:39:31.573
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

总而言之，我有一个代码可以在数据存储中写入一些内容，并且在我调用检索刚刚写入数据存储的数据后立即进行操作。我的第二个电话总是失败！但是，如果我再次拨打电话，它可以正常工作并找到数据！真的是连线！代码在 1.7.1 上运行良好，这在我升级到 1.7.2 后开始发生（不能 100% 确定，因为我同时还做了一些其他更改，但我想我也提到了） . 这是我编写数据的代码：

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    pm.evictAll();
    Key userKey = KeyFactory.createKey(User.class.getSimpleName(), request.getUsername());
    try {
        User user = pm.getObjectById(User.class,userKey);
        if (!user.getPassword().equals(request.getPassword())){
            ret.setCode(ResultInfo.WRONG_PASSWORD);
        }else{
            ret.setCode(ResultInfo.FINE);
            UUID sid = UUID.randomUUID();
            ret.setCredit(user.getCredit());
            ret.setSid(sid.toString());
            ret.setUsername(user.getUsername());
            ret.setName(user.getName());
            user.setSid(sid.toString());
            user.setLastLogin(new Date());
        }
    } catch (Exception e) {
        ret.setCode(ResultInfo.USER_NOT_FOUND);
    }finally{
        pm.flush();
        pm.close();
    } 
```

这是读取数据的代码：

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    pm.evictAll();
    try {
           User user = getUserForSession(pm, sid);
        if (user==null){
            ret.setCode(ResultInfo.SESSION_NOT_FOUND);              
        }else{
            ret.setCode(ResultInfo.FINE);
            ret.setCredit(user.getCredit());
            ret.setSid(sid.toString());
            ret.setUsername(user.getUsername());
            ret.setName(user.getName());
            if (user.getGid()!=null){
                Game game = getGameByGameId(pm, user.getGid());
                ret.populateGameResult(user,game);
            }
        }
    } catch (Exception e) {
        ret.setCode(ResultInfo.USER_NOT_FOUND);
    } finally{
        pm.flush();
        pm.close();
    } 
```

getUserForSession 只需使用以下代码来检索用户：

```
static public User getUserForSession(PersistenceManager pm,String sid){
Query q = pm.newQuery(User.class);
q.setFilter("sid == sidParam");
q.declareParameters("String sidParam");
    try {
        List<User> users = (List<User>) q.execute(sid);
        if (users.size()!=1){
            return null;
        }else{
            return users.get(0);
        }
    } catch (Exception e) {
        return null;
    } finally {
    }

} 
```

当我在这个函数中调试时，列表的大小在第一次调用时为零，在下次调用时为 1，参数完全相同！结果，我总是在第一次调用时收到 SESSION_NOT_FOUND 错误，而在第二次调用时，我得到了我想要的数据！

第二个代码段由 Ajax 调用，所以现在我已经更改了代码以检查错误并再次调用！我不喜欢它，我想知道如何解决这个问题。这是我的 Ajax 代码：

```
function fetchUserInfo(){
    var sid = getCookie("sid");
    var urlStr = BURL + '/game/' + sid + "/gameInfo";
    $.ajax({
        type:'POST',
        url: urlStr,
        dataType: 'json',
        data: null,
        contentType: "application/json; charset=utf-8",
        success: function(data) {
            console.debug(data);
            if (data.code == "OK"){
                try{
                    $("#client_name").html(data.name);
                    $("#client_credit").html(data.credit);
                }catch(e){
                }
            }else{
                fetchUserInfo();
            }
        },
        error: function(data){
            alert("Error");
        }               
    });

    } 
```

任何帮助/指针表示赞赏

阿米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:17:03.400

写入 HRD 时，在持久化数据和能够读取数据之间存在延迟。

您需要将此因素考虑到您的设计中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:33:00.143

正如伊恩所说，您必须处理这种延迟。这是解决方案：当您第一次将 User 实例存储在数据存储中时，使用 makePersistent() 方法，然后使用 detachCopy() 来获取一个您也可以放入 memcache 的实例。然后，您的 fetchUserInfo() 将首先从内存缓存中获取用户。如果未找到 (==null)，则从数据存储中获取。

# java - 使用 Ecllipse 调试 RMI 应用程序

> ID：12683439
> 
> 赞同：0
> 
> 时间：2012-10-02T01:39:59.143
> 
> 标签：java, eclipse, rmi

我有一个具有多个 Peer 的 RMI 应用程序。我希望利用 Eclipse IDE 来调试它（设置断点等）。如何在能够设置断点的同时同时运行多个 Peer？谢谢。

目前我使用的是windows 7命令行，打开多个命令行窗口，同时测试多个Peers。（当然我们需要在测试前使用命令行窗口启动rmiregistry）

我对其他可以更好地调试这些类型的应用程序的 IDE 持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:34:05.810

我认为您应该使用以下选项启动您的应用程序： -Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y

因此应用程序可以停止等待连接，然后您可以使用 IDE 进行远程调试。

# php - 我如何在wordpress中剪切功能

> ID：12683444
> 
> 赞同：0
> 
> 时间：2012-10-02T01:40:30.263
> 
> 标签：php, wordpress

我只想从 wordpress wp-admin 中删除页面系统和外观-> 编辑器。

因为我不想要所有这些功能，因为编写页面系统和模板编辑器非常耗时。

因为 wordpress 是开源项目，我只需要那些用于我的应用程序，我搜索了很多，发现即使 wp-admin 文件夹也很难更改，因为它是硬编码的，所以削减这些功能的最简单方法是什么。

我只想要这个[http://codex.wordpress.org/Pages](http://codex.wordpress.org/Pages) 和这个 [http://codex.wordpress.org/Appearance_Editor_Screen](http://codex.wordpress.org/Appearance_Editor_Screen)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:45:20.067

您可以轻松删除所有这些菜单项：

[http://codex.wordpress.org/Function_Reference/remove_menu_page](http://codex.wordpress.org/Function_Reference/remove_menu_page)

剥离实际代码并完全拆除 Wordpress 功能是另一回事。但是，如果您打算更新 WP 基础，那可能是不明智的。

# python - 存储文件信息

> ID：12683453
> 
> 赞同：1
> 
> 时间：2012-10-02T01:41:43.367
> 
> 标签：python, json, data-storage

我目前正在研究备份解决方案，一旦文件同步，我还想列出文件/目录（它们的权限/uid/gid）列表并将其保存在某处。

目前我有一个备份“快照”，它有 4105 个文件和 574 个目录，我正在使用 python 遍历备份快照并获取这些信息，它工作得很好，但这里有一个问题。

首先，我想获取所有这些信息并将其写入一个文件，最后它的大小为 170MB。不太好。

然后我决定根据每个目录拆分信息并将其写下来，我最终得到了 106MB 的磁盘使用量。

脚本 os.walks() 并将目录信息保存在一个列表中，然后对文件执行相同操作。两个列表组合在一个字典中，然后根据大小进行 JSON 编码并以小文件的形式写入磁盘。

我想知道您是否有建议如何减少磁盘使用量？

我还没有尝试将 SQLite 作为存储引擎来记录这些信息，也没有尝试使用 MySQL，最终可能会以几 GB 的数据库大小结束。

感谢您的建议和帮助，代码只是为了感受一下我在使用什么。

这是我正在使用的完成这项工作的脚本：

```
import os, sys
import json

zdir = {}
filestat=[]
dirstat=[]
for path, dirs, files in os.walk("/backup/us-s01",  followlinks=None):
        try:
                # Store files in the directory
                for file in files:
                        #print  os.path.join(path, file) 
                        st = os.stat( os.path.join( path, file ) )
                        file_stat = {
                                                        'name': file, 
                                                        'perm': oct( st.st_mode )[-4::],
                                                        'uid': st.st_uid,
                                                        'gid': st.st_gid,
                                                        'size': st.st_size
                                                        }
                        filestat.append( file_stat )

                # Store directory in 
                for di in dirs:
                        std = os.stat( os.path.join( path, di ) )
                        di_stat = { 
                                                'name': di,
                                                'perm': oct(std.st_mode)[-4::],
                                                'uid': std.st_uid,
                                                'gid': std.st_gid,
                                                'size': std.st_size
                                        }
                        dirstat.append( di_stat  )
                pa = path.replace('/', '-')
                zdir = { 'files':filestat, 'dirs':dirstat}
                f = open( '/root/test/json'+pa+'dat', 'w')
                f.write( json.dumps(zdir, separators=(',',':')) )
                f.close()

        except OSError:
                pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:51:18.460

您可以只使用 gunzip 输出：

```
import gzip

# your code as posted

zdir = { 'files':filestat, 'dirs':dirstat}
string_out = json.dumps(zdir, separators=(',',':'))    
f = gzip.open( '/root/test/json'+pa+'gz', 'wb')
f.write(string_out) 
```

我对此进行了测试，发现与将字符串写入文本文件相比，它可以将输出压缩到磁盘使用量的 10%。

# fluent-nhibernate - Fluent NHibernate 自引用表与复合键

> ID：12683456
> 
> 赞同：0
> 
> 时间：2012-10-02T01:41:56.877
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我只想知道这是否可能与流利的nhibernate有关。

我的数据库中有一个自引用表。

```
Table Service
{
int Season (PK) (FK)
int Service_No (PK)
int ParentService_No (FK)
} 
```

该表有一个复合键作为 Season 和 Service_No，以及用于自引用的外键作为 Season 和 ParentService_No

我尝试在我的服务类中创建一个名为 ChildServices 的集合属性，就像多对多关系一样。

```
HasManyToMany(x => x.ChildServices )
.Table("SERVICE")
.Access.Property()
.AsBag()
.Cascade.SaveUpdate()
.LazyLoad()
.Generic()
.ParentKeyColumns.Add("SEASON")
.ParentKeyColumns.Add("SERVICE_NO")
.ChildKeyColumns.Add("SEASON")
.ChildKeyColumns.Add("P_SERVICE_NO"); 
```

如果我使用上面的映射，它会抛出我的异常，说在集合映射中重复列：Service.ChildServices 列：SEASON

我怎样才能做到这一点？这是流畅的nhibernate的限制吗？

谢谢回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:04:25.227

这是 NHibernate 的一个限制。您不能将一列用于两种不同的事物，例如在您的情况下主键和外键。[看到我关于同一主题的问题](https://stackoverflow.com/q/6047926/671619)

您可以尝试猜测 NHibernate 生成的别名并将该`ParentService_No`列用作外键，并使用 service_no 上的别名作为 where 条件

# ruby-on-rails-3 - 覆盖 Devise 的 TokenAuthenticatable::authenticate！功能

> ID：12683459
> 
> 赞同：0
> 
> 时间：2012-10-02T01:42:16.580
> 
> 标签：ruby-on-rails-3, devise, token

我的用户类是：token_authenticable。我想重写函数 Devise::Strategies::TokenAuthenticatable.authenticate！用我自己的功能发挥作用。最好的方法是什么？

另一个问题是，如果我想用 MyTokenAuthenticatable 类覆盖 TokenAuthenticatable 类来覆盖几个函数，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:42:01.243

你应该创建一个新的策略，即

> 设计::策略::MyTokenAuthenticatable

它可以是副本

> 设计::策略::TokenAuthenticatable

有你必要的改变

# jquery-selectors - 在使用 jquery 向 div 添加一些 html 代码时，html 标签没有显示其对添加文本的影响

> ID：12683462
> 
> 赞同：1
> 
> 时间：2012-10-02T01:42:34.313
> 
> 标签：jquery-selectors

我正在尝试使用 jquery $('div').html() 方法将此代码添加到我的 html 页面中。它只会添加文本而不是图像，或者不会在该文本上添加 p、br、h1 标签的效果

```
<section>
   <article>
    <h1>Click HQ >></h1>
    <p>monday 20th August 2012 
    <img alt="click HQ"" src="14.png" />
    </p>
    <h1>rent sign >></h1><br/>
    <p>monday 11th August 2012
    <img alt="rent sign"" src="rent.png" />
    </p>
      </article>
   </section> 
```

# erlang - gen_tcp:recv 收到的二进制文件是什么？

> ID：12683463
> 
> 赞同：0
> 
> 时间：2012-10-02T01:42:45.693
> 
> 标签：erlang, gen-tcp

```
loop(Socket) ->
    case gen_tcp:recv(Socket, 0) of
        {ok, Bin} ->
            io:format("Bin=~p~n", [Bin]),
            loop(Socket);
        {error, Reason} ->
            io:format("Reason=~p~n", [Reason])
    end.

{env, [
    {tcp_listen_options, [binary, {active, false}, {packet, 0}, {reuseaddr, true}, {backlog, 256}]},
    {port, 5678}
]} 
```

无论我设置`packet`为 0 还是 1、2、4，总是得到以下信息：

gen_tcp:send(S1,term_to_binary("1"))。输出 <<131,107,0,1,49>>
gen_tcp:send(S1,term_to_binary(a))。输出 <<131,100,0,1,97>>
gen_tcp:send(S1,term_to_binary("abcd"))。输出 <<131,107,0,4,97,98,99,100>>
gen_tcp:send(S1,term_to_binary(1))。输出 <<131,97,1>>

我的问题是：
1\. <<131,107>> 是什么？
2\. 发送 1 而不是 "1" 得到的二进制没有包长度，比如 '131,107,0,1'，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:58:43.450

当您使用 term_to_binary 时，您将 erlang 值转换为外部术语格式。131 是该格式的标头。107 表示“下一个字节是字符串”你可以在这里阅读：[http ://www.erlang.org/doc/apps/erts/erl_ext_dist.html](http://www.erlang.org/doc/apps/erts/erl_ext_dist.html)

我相信您在这里不需要 term_to_binary 。你可能会使用

```
gen_tcp:send(S1,<< "abcd" >>) 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:13:08.837

我使用 term_to_binary 进行编码，但不使用 binary_to_term 进行解码。

# ios - TestFlight 安装应用失败，无法删除部分安装的应用

> ID：12683464
> 
> 赞同：5
> 
> 时间：2012-10-02T01:42:46.037
> 
> 标签：ios, testflight

我有一个通过 TestFlight 部署的 iOS 应用程序。该应用程序可以在运行 iOS 5.1.1 的 iPad 1 上正常安装。该应用程序不会安装在运行 iOS 6.0 的 iPhone 4 上。两个设备都包含在配置文件中。该应用程序在 5.1 和 6.0 模拟器中运行良好。

当我尝试将应用程序安装到我的 iPhone 4 时，我得到以下屏幕：

![在此处输入图像描述](../Images/2ee29cc0da593ed081de4abcf856a0cb.png)

**此外**，我无法删除部分下载的应用程序（它位于主屏幕的右下方）。我尝试重新启动设备并重置设备但没有成功。

这是我点击重试时从手机获得的控制台输出（<<>> 中的内容已编辑）：

```
Oct  1 20:35:10 <<my device name>> SpringBoard[67] <Warning>: Killing <<bundleID>> for app installation
Oct  1 20:35:10 <<my device name>> installd[31] <Error>: 0x2ffd8000 handle_install: Install of "/var/mobile/Media/Downloads/-2645453250453581032/5351851639508112860" requested by itunesstored
Oct  1 20:35:12 <<my device name>> installd[31] <Error>: 0x2ffd8000 MobileInstallationInstall_Server: Installing app <<bundleID>>
Oct  1 20:35:12 <<my device name>> installd[31] <Error>: Oct  1 20:35:12  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
Oct  1 20:35:13 <<my device name>> installd[31] <Error>: 0x2ffd8000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.Axitjn/foo_extracted/Payload/<<app>>.app/<<executable>>: 0xe8008017
Oct  1 20:35:13 <<my device name>> installd[31] <Error>: 0x2ffd8000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.Axitjn/foo_extracted/Payload/<<app>>.app
Oct  1 20:35:13 <<my device name>> itunesstored[66] <Error>: 0x2ffc6000 MobileInstallationInstall: failed with -1
Oct  1 20:35:13 <<my device name>> installd[31] <Error>: 0x2ffd8000 install_application: Could not preflight application install
Oct  1 20:35:13 <<my device name>> installd[31] <Error>: 0x2ffd8000 handle_install: API failed 
```

**更新**

该应用程序可以在另一台运行 iOS 6 的 iPhone 4 上正常安装。

**更新**

类似的问题：[How to force remove an app from an iDevice](https://stackoverflow.com/questions/9919618/how-to-force-removing-of-an-app-from-an-idevice)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T17:06:43.643

今天我把我的手机带到了苹果商店——令人震惊的是，他们能够删除这个应用程序。他们所做的只是在删除的“x”上敲了大约 50 次，它最终消失了。

删除损坏的 (?) 应用程序后，TestFlight 现在可以毫无问题地安装该应用程序。

不知道....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:02:05.663

我发现这通常是当我从主屏幕删除 TestFlight WebClip 时引起的。

从“设置”>“常规”>“配置文件”卸载 TestFlight 配置文件并重新安装它们通常可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-12T05:45:40.473

我刚刚在 iPhone 5c 上遇到了这个问题。我进入设置>常规>使用>管理存储>并从那里删除了该应用程序。它显示为通用图片，当我尝试删除它时询问我是否要删除空应用程序。它从那里毫无问题地删除。我认为主屏幕上的问题是系统实际上并未将其视为存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-06T23:08:28.980

我偶然发现了这个确切的问题。我删除图标的操作如下。出现错误后，我点击了图标，标签更改为正在安装。再次轻按，其标签变为已暂停。现在，当我尝试删除图标时，它工作正常...

# shell - 使用 SIGTSTP 挂起子进程后，shell 没有响应

> ID：12683466
> 
> 赞同：7
> 
> 时间：2012-10-01T03:09:56.390
> 
> 标签：shell, process, c, signals

我正在用 C 编写一个基本的 shell，我现在正在暂停一个子进程。

我认为我的信号处理程序是正确的，并且我的子进程正在挂起，但是在那之后，终端应该返回到父进程并且没有发生这种情况。

孩子被挂起，但我的外壳不再注册任何输入或输出。tcsetpgrp() 似乎没有帮助。

这是我的 SIGTSTP 外壳代码中的信号处理程序：

```
void suspend(int sig) {
    pid_t pid;
    sigset_t mask;
    //mpid is the pgid of this shell.
    tcsetpgrp(STDIN_FILENO, mpid);
    tcsetpgrp(STDOUT_FILENO, mpid);
    sigemptyset(&mask);
    sigaddset(&mask, SIGTSTP);
    sigprocmask(SIG_UNBLOCK, &mask, NULL);
    signal(SIGTSTP, SIG_DFL);
    //active.pid is the pid of the child currently in the fg.
    if (active.pid != 0) {
        kill(active.pid, SIGTSTP);
    }
    else{
        //if this code is being run in the child, child calls SIGTSTP on itself.
        pid = getpid();
        if (pid != 0 && pid != mpid){
            kill(pid, SIGTSTP);
        }
    }
    signal(SIGTSTP, suspend);
} 
```

谁能告诉我我做错了什么？

我是否将我的外壳与孩子一起挂起，我是否需要以某种方式将标准输入和标准输出返回给外壳？我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-25T15:03:53.320

这是一个老问题，但我仍然认为我找到了答案。
你没有写你父母的代码，但我假设它看起来像：

```
int main(){ 
     pid_t pid = fork();
     if(pid == 0){ //child process
        //call some program
     else //parent process
        wait(&status); //or waitpid(pid, &status, 0)
        //continue with the program
} 
```

问题出在wait（）或waitpid（）上，看起来如果您在使用之后在像Ubuntu这样的操作系统上运行程序`Ctrl`+`Z`您的子进程正在获取SIGTSTP，但父进程中的wait（）函数仍在等待！

这样做的正确方法是用 pause() 替换父级中的 wait()，并创建另一个捕获 SIGCHLD 的处理程序。例如：

```
void sigHandler(int signum){
     switch(signum){
        case SIGCHLD:
             // note that the last argument is important for the wait to work
             waitpid(-1, &status, WNOHANG);
             break;
     }
} 
```

在这种情况下，子进程接收`Ctrl`+`Z`父进程也接收 SIGCHLD 和 pause() 返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-25T18:54:39.217

我使用带有信号的人来使进程暂停并使用 ctrl+c 恢复

运行时的视频：[链接](https://youtu.be/wY30F39R148)

代码：

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>

void reverse_handler(int sig);
_Bool isPause=0;
_Bool isRunning=1;

int main()
{
    int ppid;
    int counter=0;
    //make parent respond for ctrl+c (pause,resume).
    signal(SIGINT,reverse_handler);
    while(isRunning){
        while(isPause==0)
        {
            /*code exec while process is resuming */
            printf("\nc:%d",counter++);
            fflush(stdout);
            sleep(1);
        }
        //close parent after child is alive.
        if((ppid=fork())==0){   exit(0);    }
        //make child respond for ctrl+c (pause,resume).
        signal(SIGINT,reverse_handler);
        //keep child alive and listening.
        while(isPause==1){ /*code exec while process is pausing */  sleep(1);   }
    }
    return 0;
}
//if process is pause made it resume and vice versa.
void reverse_handler(int sig){
    if(isPause==0){
        printf("\nPaused");
        fflush(stdout);
        isPause=1;
    }
    else if(isPause==1){
        printf("\nresuming");
        fflush(stdout);
        isPause=0;
    }
} 
```

我希望这很有用。

如果有任何问题请评论我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:33:39.813

`tcsetpgrp`是指定什么是前台工作。当您的 shell 在前台（不带 ）生成作业时`&`，它应该创建一个新的进程组并将其设为前台作业（控制终端的，而不是 STDIN 上的任何内容）。然后，按 CTRL-Z 后，该作业将获得 TSTP。暂停工作的是终端，而不是你的外壳。您的外壳不应捕获 TSTP 或将 TSTP 发送给任何人。

它应该只`wait()`针对它产生的作业并检测它何时停止（并收回前台组并将作业标记为内部暂停）。您的`fg`命令将使作业的 pgid 再次成为前台进程组并向`SIGCONT`其发送并再次等待它，而`bg`只会发送`SIGCONT`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-17T22:55:34.150

我可能会迟到在这里回答这个问题，但当我遇到同样的问题时，这就是有效的。根据 tcsetpgrp() 的手册页

> 函数 tcsetpgrp() 使进程组 ID 为 pgrp 的进程组成为与 fd 关联的终端上的前台进程组，fd 必须是调用进程的控制终端，并且仍然与其会话关联。此外，pgrp 必须是与调用进程属于同一会话的（非空）进程组。
> 
> 如果 tcsetpgrp() 由其会话中的后台进程组的成员调用，并且调用进程没有阻塞或忽略 SIGTTOU，则会向该后台进程组的所有成员发送 SIGTTOU 信号。

`SIGTTOU`所以，对我有用的是在我创建将出现在前台的进程之前忽略 shell 程序中的信号。如果我不忽略这个信号，那么内核会将这个信号发送到我的 shell 程序并挂起它。

# perl - 如何在 CGI Perl 中防止用户会话劫持？

> ID：12683469
> 
> 赞同：2
> 
> 时间：2012-10-02T01:43:15.500
> 
> 标签：perl, session, cgi

我有一个由少数人使用的网络应用程序（仅限内部），并且正在使用存储在用户记录下并放置在各种链接中的随机 sessionID。

我遇到了一个问题，即用户相互发送链接，这允许他们劫持发件人的会话。

有哪些方法可以防止这种情况发生，同时仍然允许用户相互发送链接？

编辑：链接中的会话 ID（也包含 $username）只是与存储在用户表中的内容进行比较。&incorrectLogin 只是打印一个错误，然后是 die；

```
if ($sid) {

    $sth = $dbh->prepare("SELECT * FROM tbl_User WHERE UserID = '$username'");
    $sth->execute();

    $ref         = $sth->fetchrow_hashref();
    $session_chk = $ref->{'usr_sessionID'};

    unless ($sid eq $session_chk) {

        &incorrectLogin;
    }
} 
```

问题是，如果有人使用由其他人创建的链接，页面将作为他们加载。我没有使用 cookie，我记得过去有人告诉我 CGI perl cookie 处理很差。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:10:35.143

如果查询字符串包含您用于会话身份验证的所有信息，那么您就是设计的。您将需要找到某种方法将用户名或会话 ID，或者最好将两者都放入 cookie；否则，您将成为 SOL，因为您无法阻止用户发送的链接包含您的代码用来告诉它正在与哪个用户交谈的所有内容。

如果我是你，我会首先找出 CGI.pm 在 cookie 方面的表现是否像我被告知的那样糟糕，如果是这样，我会继续滚动我自己的 Cookie: headers。我能看到的唯一另一种选择是将应用程序中的所有链接都转换为 POST 请求，这既更糟糕，也太可怕了，无法考虑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:24:15.187

首先，查询字符串（或会话 ID）不应包含用户 ID。当您收到会话 ID 时，您会查看存储在服务器端的会话信息以检索与该会话 ID 关联的用户 ID。

其次，您应该在一定量的不活动后使会话过期。

第三，您可以在服务器端会话中存储两个额外的项目，以帮助您在不使用 cookie 的情况下解决这个问题。解决方案并不完美，即仍有机会劫持会话，但使其更加困难。

在服务器端，存储用户登录的 IP 地址。如果您收到来自不同 IP 的同一会话的后续请求，请再次请求凭据。不要在查询字符串中包含 IP 地址。

此外，对于每个响应，生成一个`next_request_id`. 将其存储在服务器端会话中，并将其发送回客户端。您返回的页面上的所有链接也必须包含此内容`next_request_id`。

当您收到请求时，请检查您收到的请求是否与`next_request_id`您为该会话存储的请求相同。如果不是，请重新进行身份验证。

现在，这将干扰用户使用具有多个选项卡或使用重新加载/刷新的站点的能力，但在特定用例中，这对我来说是一个合适的解决方案。

但是，在一般情况下，您最好使用 cookie。

[在普通 HTTP 上](http://www.codinghorror.com/blog/2012/02/should-all-web-traffic-be-encrypted.html)使用 cookie 时，会话仍然可以被劫持，但是，至少，您要防范这种特殊的失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T20:18:11.563

在切换到 cookie 之前，我曾经非常像现在这样处理会话管理。现在，我使用[CGI::Session](http://search.cpan.org/~markstos/CGI-Session-4.48/lib/CGI/Session.pm)，并且对它非常满意。

**但是**，如果您想在短期内更快地解决您的问题，您可以做的一件事是将每个会话的 IP 地址与会话 ID 一起存储。然后，如果传入的 IP 地址/会话 ID 对与您存储的不匹配，您可以重定向到您的登录页面。

这种方法确实存在一些缺陷并且并不完美，但它确实弥补了您目前存在的巨大安全漏洞。

# haskell - GHCi 看到 Happstack.Server，但 GHC 没有。这是怎么回事？

> ID：12683471
> 
> 赞同：2
> 
> 时间：2012-10-02T01:44:02.557
> 
> 标签：haskell, cabal, happstack

我想安装和使用 Happstack，而应该花 10 分钟的时间，整天都在困扰着我。首先，我不得不与 Cabal 搏斗，最终将其淘汰，并安装了一个新副本，并对其进行了更新：

```
# I use Fedora 16... 
yum remove cabal-install
...
yum install cabal-install
...
cabal update
...
# I was told that a new version was available.
cabal install cabal-install
...
cabal install happstack-server 
```

这些命令都没有失败（或者至少他们没有给人留下他们失败的印象。）

现在*安装*它后，我决定尝试构建[Crashcourse 指南](http://www.happstack.com/docs/crashcourse/HelloWorld.html#first_app)中的第一个简单示例。

我把它写成：

```
-- server.hs
module Main where

import Happstack.Server (nullConf, simpleHTTp, toResponse, ok)

main :: IO()
main = simpleHTTP nullConf $ ok "Hello World!" 
```

当我尝试使用以下命令行使用 GHC 编译它时：

```
ghc --make -threaded server.hs -o server 
```

我收到以下错误：

```
server.hs:3:8:
    Could not find module `Happstack.Server':
      Use -v to see a list of the files searched for. 
```

并使用建议的`-v`选项给出：

```
Glasgow Haskell Compiler, Version 7.0.4, for Haskell 98, stage 2 booted by GHC version 7.0.4
Using binary package database: /usr/lib/ghc-7.0.4/package.conf.d/package.cache
wired-in package ghc-prim mapped to ghc-prim-0.2.0.0-6bf7b03ebc9c668817e4379b6796c0c2
wired-in package integer-gmp mapped to integer-gmp-0.2.0.3-4c5ab8b517f0b5d4ecf2153d5dfb7f41
wired-in package base mapped to base-4.3.1.0-4582a5bc64f22f03f6d960b4f15c981f
wired-in package rts mapped to builtin_rts
wired-in package template-haskell mapped to template-haskell-2.5.0.0-958de6d18727479331372229849ac6b8
wired-in package dph-seq not found.
wired-in package dph-par not found.
Hsc static flags: -static
*** Deleting temp files:
Deleting: 
*** Deleting temp dirs:
Deleting: 
ghc: no input files 
```

老实说，我很难解释这一点。无论如何，我决定是时候谷歌了（再次！）这让我想到了[这个类似的问题](https://stackoverflow.com/questions/5740746/haskell-web-framework)（*顺便说一句，这很混乱而且不是很有用......*），它建议尝试在 GHCi 中加载模块。

我试了一下，令我惊讶的是，这行得通：

```
> :m Happstack.Server
> simpleHTTP nullConf $ ok "Hello World!"
> 
> ...MODULE LOADING INFORMATION HERE... 
```

还有这个：

```
> :l server
> main 
```

两者都按应有的方式运行和运行。

所以简而言之，这很奇怪，Cabal 很麻烦，而且我对基本的 Haskell 工具集还没有太多经验。

有人对如何解决这个问题有任何想法吗？提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:46:33.623

通常最好编写自己的`.cabal`文件并使用 Cabal 来构建您的项目。尝试`cabal init`快速开始，并确保添加`happstack-server`到`build-depends`您的可执行文件或库中。

如果您真的想使用`ghc --make`，也许尝试将类似的东西传递`-package happstack-server`给它。

# python - 在 python 中使用命令行参数而不是 shell

> ID：12683472
> 
> 赞同：1
> 
> 时间：2012-10-02T01:44:14.653
> 
> 标签：python, command-line-arguments

假设一个 python 脚本可以调用：

```
python myscript.py ./mycommand > myoutput.txt 
```

如何确保`myscript.py`获取`./mycommand > myoutput.txt`命令行参数列表，而不是 shell 将输出管道`python myscript.py ./mycommand`传输到文件？

编辑

使用引号会带来额外的问题。考虑：

```
import subprocess
import sys

argList = sys.argv[1].split()

subprocess.call(argList) 
```

然后由以下方式调用：

```
python myscript.py 'ls -l > ls.out' 
```

结果是

```
ls: cannot access >: No such file or directory
ls: cannot access ls.out: No such file or directory 
```

动机是只有我试图运行的命令的输出应该保存在文件中。`myscript.py`to的任何其他输出`stdout`都不应该进入文件。看起来管道需要设置`stdout`为`subprocess.call()`. `>`有没有办法直接使用参数列表，这样我就不必为之类的东西解析`2>`它？`2&>``<`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:09:26.257

如果您愿意承担依赖关系，您可以使用[Kenneth Reitz 的`envoy`](https://github.com/kennethreitz/envoy)（如果您想从命令行将任意命令传递给您的脚本，您仍然需要使用引号）。

```
from envoy import run
from sys import argv

run(argv[1]) 
```

然后您可以使用以下方法调用它：

```
$ python myscript.py './mycommand > myoutput.txt' 
```

或者，如果您想在 Python 文件中使用类似 shell 的语法，您可以使用[`sh`](https://github.com/amoffat/sh)（以前`pbs`）或[`plumbum`](https://github.com/tomerfiliba/plumbum)：

```
from sh import ls

with open("myoutput.txt", "w") as outfile:
    ls("-l", _out=outfile)

# Or, in plumbum
from plumbum.cmd import ls

# Yes, this looks crazy, but the docs say it works.
ls["-l"] > "myoutput.txt" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:59:42.113

标准 bash 或 tcsh shell 将解析您给它的命令，并将某些特殊字符解释为 shell 进程本身的方向（示例中的“>”字符）。被调用的程序对此没有控制权；命令行解析发生在你的程序被调用之前。

在您的示例中，您可以说：

```
python myscript.py ./mycommand ">" myoutput.txt 
```

引用的 ">" 将告诉 shell 不要使用它的特殊行为。

子进程模块有两种操作模式；一个带有 shell（通常是 /bin/sh）的中间过程——这是你给`Popen`对象一个`shell=True`关键字参数的时候。当您以这种方式调用它时，它会调用 shell 来解析参数文本，然后 shell 调用您指定为从程序中删除的子进程的命令。

另一种操作模式，默认，是 when `shell=False`。这将创建一个子进程并直接填充其 ARGV 数组，而无需任何中间 shell 尝试解释命令中的字符。

最终结果是，如果您想从解释特殊字符并包含特殊字符的 shell 发出命令，您必须对它们进行转义或引用它们。如果您从`subprocess`标准库模块调用子进程，则可以传入任意文本作为子进程的 ARGV 元素，而不必担心它们会被中间 shell 进程以某种特殊方式解释。

# sql - Oracle SQL 子字符串

> ID：12683473
> 
> 赞同：0
> 
> 时间：2012-10-02T01:44:42.727
> 
> 标签：sql, oracle, substr

我有两张桌子：

```
Employee(empNo, lName, fName, sex, dob, address, deptno, position)
Zip(city, state, zipcode) 
```

在 Employee 表中，地址是这样存储的：`55 Maple Ln., AL 55555`

是的，我知道这是存储地址的最可怕的方式，但这是我无法控制的。

我需要在查询中返回 empNo、lName、fName、地址的街道部分、州部分、城市和邮政编码。这就是我正在使用的，我很难让它正常工作：

```
SELECT empNo, lName, fName,
    substr(Address,0, INSTR(Address,',')-1) AS streetAddr,
    city,
    substr(Address, INSTR(Address,',')+2,2) AS stateAddr,
    substr(Address,-5) AS zipC
FROM Employee
    JOIN Zip z ON z.zipcode = zipC
WHERE deptNo = '124'; 
```

我得到的错误是在 JOIN 语句上；zipC 是无效标识符。我的问题是我试图通过表的邮政编码部分加入员工和邮编。我只需要这样做，以便我可以摆脱邮政编码的城市。

**编辑#1**

我也试过这个：

```
SELECT e.empNo, e.lName, e.fName,
    substr(e.Address,0, INSTR(e.Address,',')-1) AS streetAddr,
    z.city,
    substr(e.Address, INSTR(e.Address,',')+2,2) AS stateAddr,
    substr(e.Address,-5) AS zipC
FROM Employee e, Zip z
WHERE deptNo = '124'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:00:45.513

```
SELECT empNo, lName, fName,
    substr(Address,0, INSTR(Address,',')-1) AS streetAddr,
    city,
    substr(Address, INSTR(Address,',')+2,2) AS stateAddr,
    substr(Address,-5) AS zipC
FROM Employee
    JOIN Zip z ON z.zipcode = substr(Address,-5)
WHERE deptNo = '124'; 
```

即不要在连接中使用别名。

如果存在前导或尾随空格的危险，您可能还需要在确定 INSTR 或 substr 之前修剪（）您的地址值

# python - 如何将模型中的更改传播到视图？（使用 pyqt 信号和槽）

> ID：12683479
> 
> 赞同：1
> 
> 时间：2012-10-02T01:45:39.327
> 
> 标签：python, pyqt4, signals-slots

所以我有一个模型类，我想不知道它在 pyqt 应用程序中运行。但同时，当模型发生变化时，我希望 ui 更新。

我宁愿在模型的代码中没有 pyqt 信号。观察者模式感觉就像一件事的代码太多，要听它。

这个问题的干净解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-27T00:12:37.780

> 观察者模式感觉就像一件事的代码太多，要听它。

实际上，观察者模式*正是*您所需要的，您根本不必使用 PyQt 信号/插槽。构建代码的“正确”方法是编写业务逻辑，不知道 GUI 的存在，但 GUI 应该对业务逻辑有（弱）引用。

## 程序结构

我通常大致这样启动我的 PyQt 应用程序：

```
import sys
import weakref
import PyQt4.QtGui as QtGui
from businesslogic import MyBusinessLogicClass
from guimodule import MyGuiClass    

app = QtGui.QApplication(sys.argv)
business_object = MyBusinessLogicClass()
gui = MyGuiClass(weakref.proxy(business_object))
sys.exit(app.exec_()) 
```

请注意，gui 接收对业务逻辑对象的引用（通过弱引用）。因此，当人类与 gui 交互时，gui 可以将数据发送到业务逻辑。

## 从业务逻辑获取信息到 gui

您的问题是关于业务逻辑如何在没有明确引用其代码中的 gui 的情况下将数据获取到 gui。我通过制作一个装饰器解决了这个问题，我可以把它放在我希望 gui 能够知道的函数和方法上。假设业务逻辑如下所示

```
# businesslogic.py
from observed import event  # Bear with me for a minute.

class MyBusinessLogicClass(object):
    @event
    def do_something_interesting(self, arg):
        print("logic back-end did something interesting with arg=%s"%(arg,)) 
```

那个小装饰器`@event`使它可以让其他东西可以注册以在`do_something_interesting`被调用时得到通知。gui这样做

```
# guimodule.py

class MyGuiClass(QtGui.QMainWindow):
    def __init__(self, business):
        QtGui.QMainWindow.__init__(self)
        self.business = business
        business.do_something_interesting.addObserver(self.notify)

    def notify(self, arg):
        <present notification to the user> 
```

请注意，`MyBusinessLogicClass`对 gui 一无所知。对代码的唯一入侵是`@event`装饰器，它完全不了解 GUI，实际上完全不了解 PyQt。另请注意，`arg`传入`MyBusinessLogicClass`的内容将传递给 GUI 中的观察方法`notify`。

## 观察者模式的实现

好的，这一切都很好，但它依赖于实现观察者模式的东西的存在来获得那个`@event`装饰器。你可以得到我的实现，[在 GitHub 上被称为](https://github.com/DanielSank/observed)**观察** ，或者你可以做

`$ pip install observed`

如果您在 Windows 上，只需从 github 下载源代码分发，然后在根目录中执行

`> python setup.py install`

我真的希望这会有所帮助。我专门为这个用例开发了**观察。**它非常简单，但解决了我在 python 中看到的其他观察者模式实现的几个缺点。

**注意：**我**观察到**的库正在开发中，因此自写这篇文章以来语法可能会发生一些变化。

* * *

**编辑**：您说您希望在不更改自定义类的情况下让这一切正常工作。虽然这是可能的，但你必须（我认为）在运行时弄乱你的方法的性质，这通常是不受欢迎的，因为它比直接在代码中做事情更令人困惑和脆弱。如果将`@event`装饰器添加到某些方法过于侵入，您可以将自定义类子类化并在子类中添加装饰器。您甚至可以使用自定义元类自动应用装饰器。

# php - 将变量从一页传递到另一页

> ID：12683484
> 
> 赞同：0
> 
> 时间：2012-10-02T01:46:18.553
> 
> 标签：php, session-variables

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我在尝试将变量从一个页面传递到另一个页面时遇到问题（php）我有第 1 页，当您访问它时会自动加载第 2 页（使用 jquery）。为了使第 2 页正常工作，我需要传递 2 个变量，所以这是我的方法：

```
on Page 1:
session_start();
$_SESSION['username'] = $username;
$_SESSION['user_id'] = $user_id;

on Page 2:
session_start();
$username = $_SESSION['username'];
$user_id = $_SESSION['user_id'] ; 
```

在第一次加载时，它不起作用。如果我刷新，一切都很好。如果我转到另一台计算机或清除当前浏览器的缓存，我会遇到同样的问题，在第一次加载时，它不起作用。刷新后，一切都很好。

错误日志消息：

```
[01-Oct-2012 20:02:59] PHP Warning: session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started at /public_html/php/info.php:1) in /public_html/php/info.php on line 26 
```

有谁知道这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:12:07.987

经典`headers already sent`错误*（如评论中所示）。问题是您在`session_start()`通过`echo`或常规 HTML（以及其他可能的输出方法）输出某些内容之后调用。

将您的`session_start()`呼叫移至两个/所有页面中脚本的最顶部，这应该可以解决您的问题。

*`headers already sent`正如我所说，错误是因为您在发送标头*之前将数据输出到页面。*在 Web 应用程序中，您必须先发送*所有*标头（包括会话标头），然后才能输出任何数据/内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:12:29.653

会话处理需要 Cookie（一些例外情况，取决于您的服务器配置）。在发送任何其他信息之前，cookie 会在标头中发送。

您看到的错误消息是告诉您在执行 session_start() 之前发送了一些内容；

通常的嫌疑人之一是在第一行打开 PHP 标记 (<?php) 之前有空行。

[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。

# linux - ELF 重定位 - 这些符号从何而来？

> ID：12683485
> 
> 赞同：1
> 
> 时间：2012-10-02T01:46:24.513
> 
> 标签：linux, gcc, assembly, ld, binutils

在我的 Debian x86 32 位中，当我执行 readelf -r /usr/lib/libstdc++.so.6 | grep pthread，我得到这个输出：

```
000eceac  00006206 R_386_GLOB_DAT    00000000   pthread_cancel
000ed058  00000807 R_386_JUMP_SLOT   00000000   pthread_cond_destroy
000ed148  00001207 R_386_JUMP_SLOT   00000000   pthread_cond_signal
000ed1e8  00001e07 R_386_JUMP_SLOT   00000000   pthread_key_create
000ed320  00002a07 R_386_JUMP_SLOT   00000000   pthread_once
000ed418  00003607 R_386_JUMP_SLOT   00000000   pthread_getspecific
000ed42c  00003a07 R_386_JUMP_SLOT   00000000   pthread_mutex_unlock
000ed4ec  00004607 R_386_JUMP_SLOT   00000000   pthread_create
000ed54c  00004b07 R_386_JUMP_SLOT   00000000   pthread_equal
000ed678  00005607 R_386_JUMP_SLOT   00000000   pthread_mutex_lock
000ed71c  00006007 R_386_JUMP_SLOT   00000000   pthread_cond_wait
000ed7b0  00006907 R_386_JUMP_SLOT   00000000   pthread_key_delete
000ed8b4  00007307 R_386_JUMP_SLOT   00000000   pthread_cond_broadcast
000ed8c0  00007507 R_386_JUMP_SLOT   00000000   pthread_detach
000ed8f0  00007a07 R_386_JUMP_SLOT   00000000   pthread_setspecific
000ed968  00007c07 R_386_JUMP_SLOT   00000000   pthread_join 
```

但是，当我列出 /usr/lib/libstdc++.so.6 libpthread 的依赖项时，没有列出：

```
john@ThirdEarth:~$ ldd /usr/lib/libstdc++.so.6
linux-gate.so.1 =>  (0xb77df000)
libm.so.6 => /lib/i686/cmov/libm.so.6 (0xb76ad000)
libc.so.6 => /lib/i686/cmov/libc.so.6 (0xb7566000)
/lib/ld-linux.so.2 (0xb77e0000)
libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb7547000) 
```

那么动态加载器是如何解决这些依赖关系的呢？我发现了与 __gmon_start__ 类似的问题，粗略地说，这个符号的定义在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T03:49:37.347

Linux 中的 pthread 函数在 libc 中实现。

例如，在我必须手头的系统上：

`objdump -T /lib/libc-2.11.1.so | grep pthread`

给

```
00000000000f64a0 g    DF .text  0000000000000026  GLIBC_2.3.2 pthread_cond_signal
0000000000126100 g    DF .text  0000000000000026 (GLIBC_2.2.5) pthread_cond_signal
00000000000f6be0 g    DF .text  000000000000005a  GLIBC_PRIVATE __libc_pthread_init
00000000000f65f0 g    DF .text  0000000000000026  GLIBC_2.2.5 pthread_mutex_lock
00000000000f63e0 g    DF .text  0000000000000026  GLIBC_2.2.5 pthread_condattr_init
00000000000f6290 g    DF .text  0000000000000026  GLIBC_2.2.5 pthread_attr_getschedparam
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:19:02.053

要回答问题的第二部分，`__gmon_start__`它是 C 运行时的一部分，并且在为 [gprof(1)](http://en.wikipedia.org/wiki/Gprof)样式分析构建可执行文件时使用。

在 Ubuntu GNU/Linux 上，相关定义可以在以下位置找到`/usr/lib/gcrt1.o`：

```
% nm /usr/lib/gcrt1.o| grep -C2 gmon_start
00000000 R _IO_stdin_used
00000000 D __data_start
00000030 T __gmon_start__
         U __libc_csu_fini
         U __libc_csu_init 
```

对于正常的编译运行，`/usr/lib/crti.o`提供“弱”定义：

```
% nm /usr/lib/crti.o| grep -C2 gmon_start
          U _GLOBAL_OFFSET_TABLE_
          w __gmon_start__
 00000000 T _fini
 00000000 T _init 
```

# ios - ViewController 类在创建视图时创建新实例，但它应该使用现有的实例

> ID：12683486
> 
> 赞同：-1
> 
> 时间：2012-10-02T01:46:28.453
> 
> 标签：ios, xcode, cocoa-touch

我正在一个名为 ResourcesTableViewController 的类中创建一个 TableViewController。我正在创建课程：

视图控制器.h：

```
@interface ViewController : UIViewController {
    ResourcesTableViewController *resourceTableViewController; 
```

视图控制器.m：

```
resourceTableViewController = [[ResourcesTableViewController alloc] initWithStyle:UITableViewStylePlain];
[resourceTableViewController setTableViewObject:localObject]; 
```

现在我可以使用它，我可以打电话

```
NSLog(@"%@ %@",resourceTableViewController,[resourceTableViewController tableViewObject]); 
```

在我的 ViewController.m 的几个部分（如预期的那样）具有相同的输出

```
<ResourcesTableViewController: 0x749f1c0> tableViewObjectContent 
```

. 为了打开新的 TableView，我在情节提要中创建了一个带有弹出框到新视图的按钮（作为触发的 segue）。但是一旦按下按钮并出现视图，它就会创建一个新实例。奇怪的是，我放入了我的类 ResourcesTableViewController 的 viewDidLoad：

```
NSLog(@"viewDidLoad: %@: %@", self, self.tableViewObject); 
```

它正在返回

```
<ResourcesTableViewController: 0x74bbcd0>: (null) 
```

. 另一个内存地址，另一个实例。不是我之前使用的实例，也绝对不是我给该 tableViewOject 的实例。如何从属于我创建和使用的 resourceTableViewController 的实例调用视图？我仍然可以通过与对象 resourceTableViewController 通信来访问那个“旧”实例，但是创建的视图是另一种类型的视图，它肯定不会从我给第一个对象的对象中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:47:39.363

如何显示表格视图取决于您希望如何显示它，以及之前屏幕上的内容。通常，您会使用 segue 从当前控制器（您的按钮所在的控制器）转换到表格视图。为此，您可以使用 performSegueWithIdentifier:sender: 其中标识符参数是您在 IB 中为 segue 指定的名称。但是您可以通过控制从一个视图中的按钮拖动到表视图控制器的视图并为 segue 类型选择模态来完全不使用任何代码 - 然后，单击按钮将导致该表视图出现在屏幕上.

如果您使用情节提要，则根本不应该在代码中分配 init —— segue 会为您实例化新的视图控制器。

# javascript - 在 IE8 中使用 DWR 实现“在 JavaScript 中扩展 ActiveXObject”脚本的问题

> ID：12683487
> 
> 赞同：1
> 
> 时间：2012-10-02T01:46:31.127
> 
> 标签：javascript, ajax, internet-explorer, activex, dwr

环境：

内联网

客户端：IE8

服务器：JBOSS 4.2.3

AJAX 技术：DWR 2.x

我需要创建模块化 javascript，可以通过简单的脚本标签轻松地将其添加到我们的任何 Intranet 应用程序中。该脚本的目标是创建一个通用的会话超时架构，其中包含用户友好的提示，指示在会话超时之前还剩多少时间。所有这一切都很简单（使用简单的 setTimeout 调用），但我需要考虑 DWR 发起的命中服务器的 AJAX 请求，从而扩展实际会话。因为我需要这是一个模块化的、非侵入式的设计，所以我不能修改每个 Intranet 应用程序中的任何代码。因此，经过大量搜索，我找到了一个可以从页面拦截 AJAX 调用以捕获事件的脚本 -[在 javascript 中扩展 ActiveXObject](https://stackoverflow.com/questions/797960/extending-an-activexobject-in-javascript)

看起来我们的浏览器环境被锁定，以至于对 window.XMLHttpRequest 的测试返回 false。因此，我使用与 ActiveX 版本有关的脚本部分。DWR 似乎正在使用控件的 msxml2.xmlhttp.6.0 版本。

我的问题似乎出现在这一行（在步骤 3.4 和 3.5 之间）...

```
batch.req.setRequestHeader("Content-Type", "text/plain"); //@TODO 
```

在 DWR 生成的 engine.js 文件中的这部分代码中......

```
try {
    alert("Step 1 - engine.js - before open; batch.req = " + batch.req);
    batch.req.open(batch.httpMethod, request.url, batch.async);
    alert("Step 3 - engine.js - after open; batch.req = " + batch.req);
    try {
      for (prop in batch.headers) {
        var value = batch.headers[prop];
        if (typeof value == "string") {
          batch.req.setRequestHeader(prop, value);
        }
      }
      if (!batch.headers["Content-Type"]) {
        alert("Step 3.4 - engine.js - inside of 'if (!batch.headers[\"Content-Type\"])'; before setRequestHeader call; batch.req = " + batch.req);
        batch.req.setRequestHeader("Content-Type", "text/plain"); //@TODO
        alert("Step 3.5 - engine.js - inside of 'if (!batch.headers[\"Content-Type\"])'; after setRequestHeader call; batch.req = " + batch.req);
      }
    }
    catch (ex) {
      dwr.engine._handleWarning(batch, ex);
    }
    alert("Step 4 - engine.js - before send; batch.req = " + batch.req);
    batch.req.send(request.body);
    alert("Step 5 - engine.js - after send; batch.req = " + batch.req); 
```

请注意，“batch.req”本质上是“new ActiveXObject('msxml2.xmlhttp.6.0');”

这是“扩展 ActiveXObject”脚本截获的内容...

```
Step 2.1 - CommonSessionTimeout.js
intercepted open (POST , /tbcalltracking/dwr/call/plaincall/JDataHelper.getSystemTime.dwr , true , undefined , undefined) 
```

照原样，使用扩展 ActiveXObject 的脚本，DWR 调用失败并显示消息：“'req' 为空或不是对象”。查看服务器的日志显示**没有**DWR 活动。好像对“setRequestHeader”的调用使 ActiveX XMLHttpRequest 对象无效？？？

如果我将此行注释掉，我可以在服务器日志中看到 DWR 活动，甚至可以在日志中看到返回值，但似乎返回的值永远不会返回到回调函数（以及随后的页面）。我的猜测是因为没有设置 Content-Type 标头。

所以我尝试修改上面链接中引用的脚本以在那里设置请求标头，认为因为它“拦截”此类调用，所以应该在那里定义请求标头。我的第一次尝试是在调用“open”之后简单地添加这一行（我删除了 return 关键字）......

```
this._ax.setRequestHeader("Content-Type", "text/plain"); 
```

这没有效果。我的第二次尝试是将其添加到脚本中...

```
o._setRequestHeader = function () {
    alert("Step 2.0 - setting request header...");
    return this._ax.setRequestHeader("Content-Type", "text/plain");
}; 
```

这也没有效果。

同样，我无法修改 DWR 生成的“engine.js”文件，因为其他开发人员可能会在稍后加入，并且如果他们修改底层 Java 类（添加/删除方法或修改方法签名），则必须重新构建文件。大多数 DWR 返回目标都是表单上的简单字段 - 没什么花哨的（这里就是这种情况；DWR 向调用 Web 服务的 Java 类/方法发起请求 - Web 服务返回几个经过解析的值并放入相应的字段中）。

我在这里束手无策，希望可以帮助我。我觉得我真的很接近，但只是忽略或不理解某些东西。任何帮助将不胜感激。

# c - 将节点添加到链表时出现分段错误

> ID：12683488
> 
> 赞同：1
> 
> 时间：2012-10-02T01:46:45.423
> 
> 标签：c, pointers, linked-list, segmentation-fault, singly-linked-list

```
typedef struct 
{
     uint32_t field_id;
     uint16_t length;
}entry_t;

struct node
{
        entry_t *sp_entry;
        struct node *next;
}*head; 
```

我有一个名为 add() 的函数来向链表添加条目。

```
void add( entry_t *entry )
{
        struct node *temp;
        temp=(struct node *)malloc(sizeof(struct node));
        temp->sp_entry = entry;
        if (head== NULL)
        {
                head=temp;
                head->next=NULL;
        }
        else
        {
                temp->next=head;
                head=temp;
        }
} 
```

请注意，存储在链表节点中的“值”本身就是一个指向结构的指针。我遇到了分段错误

```
temp->sp_entry = entry; 
```

这可能是因为我没有为 entry_t 结构分配内存。我想知道这是一个常见的用例吗？如果是，我该怎么做。我必须做吗

```
temp->sp_entry = malloc(sizeof (entry_t)); 
```

在做任务之前？还有更优雅的方法来实现这一点吗？

附加信息。

当我运行 gdb 我得到

```
p *temp
$3 = {sp_entry = 0x0, next = 0x3e64656269} 
```

sp_entry 看起来像是一个空指针。这是在 add() 函数中的 malloc 之后打印的。而且我的代码已与“-g -O0 -Wall”结合使用。没有任何警告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:56:07.150

你的代码看起来不错。`temp->sp_entry = entry;`不应出现段错误，因为您`temp`已在上一行分配。

指针错误可能很隐蔽。崩溃的线路不一定是故障线路。`add()`看起来是正确的，所以我怀疑在您的程序执行的早期有一个错误不会导致您的程序立即崩溃。

> 当我运行 gdb 时，我得到：
> 
> ```
> p *temp
> $3 = {sp_entry = 0x0, next = 0x3e64656269} 
> ```
> 
> sp_entry 看起来像是一个空指针。

不是问题。您尚未初始化`temp->sp_entry`或`temp->next`尚未初始化，因此它们的值毫无意义。

重要的是`temp`的价值。它似乎是一个有效的指针，因为 gdb 可以打印`*temp`。这真的是发生段错误的地方吗？我本来希望 gdb 抱怨`temp`是指向无效内存位置的指针并拒绝打印`*temp`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:14:51.917

没有足够的业力（？）发表评论，所以发布这个作为答案......

如果您使用的是 unixy 系统，请运行 Valgrind (http://valgrind.org/) 以查看有问题的内存读/写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T04:04:25.280

代码看起来不错。它可以给出分段错误的唯一方法是 malloc 返回 null 或无效值。我建议在尝试使用它之前检查 malloc 返回的值是否为空。

# python - 在 URLConf 中定义嵌套命名空间，用于反转 Django URL——有没有人有一个有说服力的例子？

> ID：12683494
> 
> 赞同：23
> 
> 时间：2012-10-02T01:47:26.220
> 
> 标签：python, django, namespaces, url-mapping, urlconf

我一直在试图弄清楚如何`look:like:this`在 Django URLConf 中定义一个嵌套的 URL 命名空间（which ）。

在此之前，我想出了如何创建一个基本的 URL 命名空间，并提出了[这个简单的示例片段](https://gist.github.com/1290418)，其中包含您可能放入`urls.py`文件中的内容：

```
from django.conf.urls import patterns, include, url

# you can only define a namespace for urls when calling include():

app_patterns = patterns('',
    url(r'^(?P<pk>[\w\-]+)/$', 'yourapp.views.your_view_function',
        name="your-view"),
)

urlpatterns = patterns('',
    url(r'^view-function/', include(app_patterns,
        namespace='yournamespace', app_name='yourapp')),
)

"""

    You can now use the namespace when you refer to the view, e.g. a call
    to `reverse()`:

    # yourapp/models.py

    from django.core.urlresolvers import reverse

    # ...

    class MyModel(models.Model):

        def get_absolute_url(self):
            return reverse('signalqueue:exception-log-entry', kwargs=dict(pk=self.pk))

""" 
```

... w/r/t [Django 文档](https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces)的推论在这种情况下根本没有帮助。虽然 Django 的文档在所有其他方面都很棒，而且这是一个例外，但关于定义嵌套 URL 命名空间的信息就更少了。

我没有发布我的意大利面条式的尝试†来解决这个问题，我想我可能会问是否有人拥有或知道一个直接有说服力和/或不言自明的 URLconf 示例，该示例定义了一个他们可以共享的嵌套命名空间。

具体来说，我对视图前缀的嵌套部分感到好奇：它们*都*需要安装 Django 应用程序吗？

[†）对于好奇，这里有一个（可能有点难以理解）的例子：http: [//imgur.com/NDn9H](https://imgur.com/NDn9H)。我试图在底部以红色和绿色打印出 URL，`testapp:views:<viewname>`而不是仅仅命名为`testapp:<viewname>`.]

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-02T02:51:40.277

它的工作原理相当直观。`include`具有另一个命名空间的 urlconf`include`将导致嵌套命名空间。

```
## urls.py
nested2 = patterns('',
   url(r'^index/$', 'index', name='index'),
)

nested1 = patterns('',
   url(r'^nested2/', include(nested2, namespace="nested2"),
   url(r'^index/$', 'index', name='index'),
)   

urlpatterns = patterns('',
   (r'^nested1/', include(nested1, namespace="nested1"),
)

reverse('nested1:nested2:index') # should output /nested1/nested2/index/
reverse('nested1:index') # should output /nested1/index/ 
```

这是保持网址井井有条的好方法。我想我能给出的最好建议是记住`include`可以直接获取一个`patterns`对象（如我的示例中所示），这使您可以使用单个`urls.py`视图并将视图拆分为有用的命名空间，而无需创建多个 urls 文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-17T20:47:10.410

### 更新 2 (2019-10-09)

正如 eugene 评论的那样，UPDATE 1 不再适用于更新版本的 Django，后者需要在包含时`app_name`在 a 中定义。`urls.py`

[在 GitHub 上，我创建了一个 Django 项目](https://github.com/philgyford/django-url-namespace-example)( `myproject`)，其中包含几个应用程序 (`products`和`books`)，以演示如何创建嵌套命名空间。总之，各种`urls.py`看起来像这样：

```
# myproject/urls.py
from django.urls import include, path
from products import urls as products_urls
from products import views

urlpatterns = [
    path("", views.site_home, name="home"),
    path("products/", include(products_urls, namespace="products"),)
] 
```

```
# products/urls.py
from django.urls import include, path
from books import urls as books_urls
from . import views

app_name = "products"

urlpatterns = [
    path("", views.index, name="product_index"),
    path("books/", include(books_urls, namespace="books")),
] 
```

```
# books/urls.py
from django.urls import path
from . import views

app_name = "books"

urlpatterns = [
    path("", views.index, name="book_index"),
    path("<slug:book_slug>/", views.detail, name="book_detail"),
] 
```

因此，您可以像这样使用这些嵌套的 URL 名称：

```
reverse("products:books:book_index")
# '/products/books/'

reverse("products:books:book_detail", kwargs={"book_slug": "my-book"})
# '/products/books/my-book/' 
```

* * *

### 更新 1

Django 2.0 引入了两个相关的变化。首先，`urls()`函数现在在 中`django.urls`，所以`urls.py`上面示例的第一行将是：

```
from django.urls import include, url 
```

其次，它引入了`path()`函数作为不需要正则表达式的路径的更简单替代方案。使用它，示例`urls.py`将如下所示：

```
from django.urls import include, path

nested2 = [
   path('index/', 'index', name='index'),
]   

nested1 = [
   path('nested2/', include(nested2, namespace='nested2')),
   path('index/', 'index', name='index'),
]   

urlpatterns = [
   path('nested1/', include(nested1, namespace='nested1')),
] 
```

* * *

### 原始答案

虽然 Yuji 的回答是正确的，但请注意`django.conf.urls.patterns`不再存在（自 Django 1.10 起），而是使用普通列表。

同样的例子`urls.py`现在应该是这样的：

```
from django.conf.urls import include, url

nested2 = [
   url(r'^index/$', 'index', name='index'),
]   

nested1 = [
   url(r'^nested2/', include(nested2, namespace='nested2')),
   url(r'^index/$', 'index', name='index'),
]   

urlpatterns = [
   url(r'^nested1/', include(nested1, namespace='nested1')),
] 
```

仍然像这样使用：

```
reverse('nested1:nested2:index') # should output /nested1/nested2/index/
reverse('nested1:index') # should output /nested1/index/ 
```

# c++ - 尝试从模板化函数返回向量会引发编译错误。

> ID：12683495
> 
> 赞同：1
> 
> 时间：2012-10-02T01:47:30.610
> 
> 标签：c++, templates, vector

问题如下：以下测试引发大量编译器错误。

```
#include <vector>
using namespace std;

template<class T>
class test{
   vector<T> vec;
public:
   vector<T>::iterator begin();

};

template<class T>
vector<T>::iterator test<T>::begin(){
  return vec.begin();
}

int main(){

  test<float> testing;
  testing.begin();

} 
```

一些编译器错误：

```
 test.cpp(8): warning C4346: 'std::vector<T>::iterator' : dependent name is not a type
 test.cpp(8): error C2146: syntax error : missing ';' before identifier 'begin'
 test.cpp(13): error C2143: syntax error : missing ';' before 'test<T>::begin' 
```

但是，如果您将模板换成`vector<T>`say，`vector<float>` 它的编译就很好了。例如：

```
template<class T>
class test{
   vector<T> vec;
public:
   vector<float>::iterator begin();

};

template<class T>
vector<float>::iterator test<T>::begin(){
   return vec.begin();
} 
```

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:54:57.840

您需要`typename`在两个地方添加：

```
typename vector<T>::iterator begin(); 
```

和

```
typename vector<T>::iterator test<T>::begin() 
```

通过添加`typename`，您是在告诉编译器**如何**解析代码。基本上，通过添加`typename`，您是在告诉编译器将声明解析为类型。

请阅读[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)进行深入的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:53:30.267

您需要使用`typename`关键字来区分它`vector<T>::iterator`是指范围类型，而不是范围数据或函数成员：

```
template<class T>
class test{
   vector<T> vec;
public:
   typename vector<T>::iterator begin();

};

template<class T>
typename vector<T>::iterator test<T>::begin(){
  return vec.begin();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-02T01:54:28.853

在 C++ 模板类中，模板成员函数的主体必须在类内部定义，因为模板参数不存在于类外部。最后两个错误看起来像编译器在不熟悉的上下文导致它误解完全有效的语法时产生的错误。尝试在类内移动函数体。

# ruby-on-rails - 用于检查唯一性的 Rspec 测试

> ID：12683498
> 
> 赞同：2
> 
> 时间：2012-10-02T01:47:58.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

这是检查电子邮件唯一性的 rspec 测试（来自[http://ruby.railstutorial.org/chapters/modeling-users.html#code-validates_uniqueness_of_email_test](http://ruby.railstutorial.org/chapters/modeling-users.html#code-validates_uniqueness_of_email_test)）

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com")
  end
  .
  .
  .
  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.save
    end

    it { should_not be_valid }
  end
end 
```

正如作者提到的，我补充说

```
class User < ActiveRecord::Base
  .
  .
  .
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true
end 
```

到我的用户模型并且测试通过。

但是@user 还没有保存到数据库中（我在代码的任何地方都找不到@user.save 语句。）所以，user_with_same_email 已经是唯一的，因为**数据库**中没有其他用户使用相同的电子邮件。那么它是如何工作的呢？

我在控制台中创建了类似的东西。user_with_same_email.valid？返回 false （错误“已被采取”），但 user_with_same_email.save 仍然有效。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T19:46:06.330

您可以使用[shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers) gem。

```
# spec/models/user_spec.rb
require 'spec_helper'

describe User, 'validations' do
  it { should validate_uniqueness_of(:email) }
  it { should validate_presence_of(:email) }
  it { should validate_format_of(:email).with_message(VALID_EMAIL_REGEX) }
end 
```

对最后一个并不积极，但看起来它应该可以工作。

如果您正在使用许可，您可以在此处使用内置`email_validator`功能[PR](https://github.com/thoughtbot/clearance/pull/266)

```
# app/models/user.rb
validates :email, presence: true, email: true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:57:12.937

这是匹配器的源代码[：](http://rspec.rubyforge.org/rspec-rails/1.3.2/classes/Spec/Rails/Matchers.html#M000018)`be_valid`

```
match do |actual|
  actual.valid?
end 
```

如您所见，匹配器实际上并没有保存记录，它只是调用[`valid?`](http://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-valid-3F)实例上的方法。`valid?`检查验证是否通过，如果没有，则在实例上设置错误消息。

在上述情况下，您首先（成功地）保存了具有相同电子邮件 ( ) 的用户，这是因为实际上尚未*保存*`user_with_same_email`具有该电子邮件的用户。然后，您正在检查另一个具有相同电子邮件的用户实例 ( ) 上的验证错误，即使您实际上没有保存重复记录，这显然也会失败。*`@user`*

 *关于您在控制台中获得的内容，`save`即使失败也可能不会返回错误。尝试`save!`改用。*

# parsing - 如何使用 scala 在 playframework 2.0 中重用异常解析器

> ID：12683499
> 
> 赞同：6
> 
> 时间：2012-10-02T01:48:14.463
> 
> 标签：parsing, playframework-2.0, anorm

我一直在查看[计算机数据库示例](https://github.com/playframework/Play20/blob/master/samples/scala/computer-database/app/models/Models.scala)，我注意到为了重用计算机解析器，列表方法使用了 Computer.withCompany 解析器，它返回 (Computer, Company) 的元组

在我必须处理的情况下，我想要一个 Computer 对象，而不是对计算机 id 的引用，就像这样

case class Computer(id: Pk[Long] = NotAssigned, name: String, 介绍: Option[Date], 停产: Option[Date], company: Company)

所以我在想如何才能实现以下目标（当然是伪代码）

```
val simple = {
  get[Pk[Long]]("computer.id") ~
  get[String]("computer.name") ~
  get[Option[Date]]("computer.introduced") ~
  get[Option[Date]]("computer.discontinued") ~
  get[Company]("company.*") map {
    case id~name~introduced~discontinued~company => Computer(id, name, introduced, discontinued, company)
  }
} 
```

显然，棘手的部分是如何解决 getCompany

任何想法？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:03:15.057

我有一个 Idea 实体和一个 IdeaType 实体（就像计算机和公司，在计算机数据库示例中）

```
case class IdeaTest(
  val id: Pk[Long]          = NotAssigned,
  val name: String          = "unknown idea",
  val description: String   = "no description",
  val kind: IdeaType        = IdeaType()
)

case class IdeaType (
  val id: Pk[Long] = NotAssigned,
  val name: String = "unknown idea type",
  val description: String = "no description"
) 
```

我定义了一个 TypeParser

```
val typeParser: RowParser[IdeaType] = {
  get[Pk[Long]]("idea_type.id") ~
  get[String]("idea_type.name") ~
  get[String]("idea_type.description") map {
    case id~name~description => IdeaType(
      id, name, description
    )
  }
} 
```

我尝试的第一件事是：

```
val ideaParser: RowParser[IdeaTest] = {
  get[Pk[Long]]("idea.id") ~
  get[String]("idea.name") ~
  get[String]("idea.description") ~
  typeParser map {
    case id~name~description~ideaType => IdeaTest(
      id, name, description, ideaType
    )
  }
} 
```

即使它编译好，它总是无法加载ideaType。

最后，我不得不定义一个没有ideaType的ideaParser，并用typeParser组合它：

```
val typeParser: RowParser[IdeaType] = {
  get[Pk[Long]]("idea_type.id") ~
  get[String]("idea_type.name") ~
  get[String]("idea_type.description") map {
    case id~name~description => IdeaType(
      id, name, description
    )
  }
}

val ideaWithTypeParser = ideaParser ~ typeParser map {
  case idea~kind => (idea.copy(kind=kind))
} 
```

这是使用它的代码：

```
def ideaById(id: Long): Option[IdeaTest] = {
  DB.withConnection { implicit connection =>
    SQL("""
      select * from
      idea inner join idea_type 
      on idea.idea_type_id = idea_type.id 
      where idea.id = {id}""").
      on('id -> id).
      as(ideaParser.singleOpt)
  }
} 
```

我看到的唯一麻烦是我必须在不一致的状态下创建 IdeaTest 对象（没有ideaType），然后将其复制到另一个具有正确 IdeaType 的实例。

# visual-studio - JSLint“跳过构建”在 Visual Studio 2012 中不起作用

> ID：12683500
> 
> 赞同：2
> 
> 时间：2012-10-02T01:48:24.197
> 
> 标签：visual-studio, jslint

我在 VS 2010 上使用 JSLint 已经有一段时间没有问题了。我最近开始使用 VS 2012，今天添加了 JSLint.VS2012 Nuget 包。问题是当我右键单击一个脚本文件（例如 jquery.xxjs）并选择“Skip on Build”时，JSLint 在我构建时仍然会解析 js 文件并且我得到通常的 > 千警告。还有其他人遇到这种情况吗？谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:22:13.823

问题已在 2012 年 10 月 6 日发布的 jslint 1.4.2 中解决。[JSLint 发布变更日志](http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd/view/Discussions/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:51:25.353

不幸的是，这是一个已知问题，并在 7 天前向开发人员报告，但在 Visual Studio 库中没有任何回应。

[http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd/view/Discussions/1](http://visualstudiogallery.msdn.microsoft.com/1a417c37-4d6f-43ca-b753-6ea6eb5041fd/view/Discussions/1)

Codeplex 上响应了两个错误，但它似乎不是高优先级：

[1.4.1 “跳过构建”无法在 Visual Studio Premium 2012 上运行](http://jslint4vs2010.codeplex.com/discussions/397812)

[VS 2012 - 保存要从构建中排除的文件](http://jslint4vs2010.codeplex.com/discussions/397068)

# air - Adobe AIR HTML 组件 - socket.io

> ID：12683505
> 
> 赞同：2
> 
> 时间：2012-10-02T01:49:09.667
> 
> 标签：air, adobe

我试图在 HTML 组件中加载一个网站，该组件使用 socket.io 获取一些流信息。它在 AIR 之外运行得非常好，但在 HTML 组件中时，流不运行。它是从自身以外的域流式传输的，我无法控制这两个站点。

关于如何让流在 HTML 组件中工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:59:40.373

Socket.io 使用 websockets，不幸的是 Adob​​e AIR 的 HTMLLoader 不支持 websockets：[http ://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-67c0013e126afbe6c4d-8000.html](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-67c0013e126afbe6c4d-8000.html)

# java - 如何让应用程序与 Asterisk 服务器交互以进行调用？

> ID：12683506
> 
> 赞同：2
> 
> 时间：2012-10-02T01:49:18.620
> 
> 标签：java, android, voip, asterisk

我有一个项目来编写一个应用程序来拨打电话，语音邮件与星号服务器交互。我搜索了有关[Asterisk AGI](http://www.voip-info.org/wiki/view/Asterisk+AGI)的信息。我在 Asterisk 服务器和 Android 应用程序中做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:56:57.843

AGI 与此无关。[您需要一个适用](http://developer.android.com/guide/topics/connectivity/sip.html)于 Android的 SIP 库，例如Android 2.3 中可用的库，或第三方库。然后，您将使用该库来构建您的应用程序并连接到 SIP 服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T15:20:31.970

要让 Asterisk 为您发出呼叫，您所要做的就是将一个文本文件放到 Asterisk 服务器的输出假脱机目录中。Asterisk 会在您拨打电话后立即拨打电话。

将文件放在以下位置：

```
/var/spool/asterisk/outgoing/

Channel:SIP/Phonenukmber@YourSipProvider
Context: context in your dialplan to place this call when it is answered
Exten: extension in that context to place call on
Priority: priority to start on, normally 1
Callerid: number to use when placing the call 
```

您可以在此处传递其他几个值以获取更多信息： [http ://www.voip-info.org/wiki/view/Asterisk+auto-dial+out](http://www.voip-info.org/wiki/view/Asterisk+auto-dial+out)

到目前为止，这是一种不需要与 Asterisk 进行任何编程交互的简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:05:11.897

如果您需要从 android 手机呼叫，请搜索 SIP 库或 sip softphone for android。

如果您需要从 android 控制星号调用，您必须检查 AMI（管理器接口）或在您的星号服务器上编写服务器端 API 并在您的应用程序中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T16:02:54.570

您安装服务器，然后编写与 SIP 通信的客户端应用程序。使用这些开源项目中的任何一个来快速入门。

[http://www.codeplex.com/site/search?query=SIP&ac=2](http://www.codeplex.com/site/search?query=SIP&ac=2)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-09T09:59:44.200

只需安装 Asterisk 并创建一些 SIP 对等体。要拨打 PSTN，您需要有 VOIP 中继或模拟中继或 ISDN 中继。

完成上述操作后，从 Android 应用市场为您的 Android 手机下载 3cx 软电话，并注册在 Asterisk 中创建的任何 SIP 扩展。

要拨打电话，您需要根据您的要求编写拨号方案。对于新手，您可以参考 Google 免费提供的“Trixbox Without Tears”一书。

# html - ios“web control”alert() 对话框在标题中显示 HTML 本地存储文件夹名称

> ID：12683509
> 
> 赞同：1
> 
> 时间：2012-10-02T01:49:43.053
> 
> 标签：html, ios, alert, web-controls, confirm

我们正在构建一个使用内部 Web 控件呈现本地存储的 HTML 页面的 iOS 应用程序。我们发现，当 HTML 页面调用 alert()、prompt() 或 confirm() 时，对话框会打开，但标题中包含页面所在文件夹的名称。显然，这看起来像胡言乱语。我假设它将文件夹视为“主机服务器”。

Safari Web 浏览器中的示例：来自 Web 浏览器的消息在 iOS 应用程序中使用 Web 控件：475b7e1b6004451da78b33b5194f386d

我一直在这里制作原型并关注线程，用我自己的 HTML 和自定义 CSS 覆盖对话框，但是据我了解，这意味着我们将不得不用我们自己的函数重写 confirm() 行为。我想知道是否有人可以在 xCode 中指出我发布通用语句而不是文件夹名称的方向？

我使用过的网站之一： [要解决的 JavaScript 难题：window.confirm = divConfirm(strMessage)](https://stackoverflow.com/questions/2056747/javascript-puzzle-to-solve-window-confirm-divconfirmstrmessage)

提前致谢。

# javascript - iOS 6 Safari，setInterval 不会被解雇

> ID：12683510
> 
> 赞同：7
> 
> 时间：2012-10-02T01:49:52.573
> 
> 标签：javascript, ios, mobile-safari, setinterval, dom-events

似乎如果我正在滚动`window`，`window.setInterval`则在滚动发生时或之后不会附加/触发。**有没有其他人看到同样的问题？**

**我是说...**

*   这可能是什么原因造成的？
*   我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T01:57:30.703

iOS 会暂停几乎所有响应用户触摸的操作，以确保其感觉反应灵敏。setInterval 问题是已知的，并且似乎没有解决方法。

[滚动期间在 iphone/ipad（移动 Safari）中的 setInterval 暂停](https://stackoverflow.com/questions/11177774/setinterval-pauses-in-iphone-ipad-mobile-safari-during-scrolling)

**编辑**

在“冻结”期间，一旦用户释放屏幕，计时器将不会赶上。错过的事件不会被推迟，而是完全丢失（一个错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T03:10:41.210

找到了这个（可怕但惊人的）解决方法，它在 iOS 6.0 中对我有用：

[https://gist.github.com/3755461](https://gist.github.com/3755461)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:05:11.233

我不完全确定，但你可以使用 a`setTimeout`而不是`setInterval`? 无论如何，使用 setInterval 通常是不好的做法。

```
var delay = 100;
(function callee() {
    setTimeout(callee, delay);
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T06:10:57.850

iOS6 Safari 存在一个错误，该错误会杀死在页面滚动时创建的计时器。

kTmnh 通过在滚动完成后重新创建计时器来解决此问题

[https://gist.github.com/3798925](https://gist.github.com/3798925)。

# php - 插入返回真但不插入数据

> ID：12683514
> 
> 赞同：0
> 
> 时间：2012-10-02T01:50:38.190
> 
> 标签：php, sql, mysqli

我有一个函数，它首先检查是否存在一行，如果不存在则插入数据。如果有任何失败，它应该返回 false。当我运行该函数并使用 var_dump 检查返回时，它返回 true。我假设数据已插入数据库，但事实并非如此。为什么会这样做？我的功能有问题吗？

```
function add_tier ($mysqli, $project_id, $tier_number, $wanted, $in_return, $limit) {

    if ($result = $mysqli->query("SELECT COUNT(tier_id) FROM `tier` WHERE `project_id` 
    = $project_id AND `tier_number` = $tier_number")){

      if ($return < 1) {

        if ($stmt = $mysqli->prepare("INSERT INTO `tier` (`project_id`, 
        `tier_number`, `wanted`, `in_return`, `limit`) VALUES (?, ?, ?, ?, ?)")){

        $stmt->bind_param('iissi', $project_id, $tier_number, $wanted, $in_return, 
        $limit);

        $return = $stmt->execute();

        $stmt->close();

        return $return;

        } else {return false;}      

      } else {return false;}            

    }  else {return false;}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:09:21.577

（从评论继续）您似乎没有`$return`在此行中的任何地方定义：

```
if ($return < 1) { 
```

# matlab - 如何停止从 Matlab 中的独立应用程序打印出来？

> ID：12683516
> 
> 赞同：2
> 
> 时间：2012-10-02T01:50:42.637
> 
> 标签：matlab, printing, command-window

我必须从 .m 文件 Gen.m 中执行一个独立的应用程序 aTool.exe。
我在 Gen.m 中放了一个命令来执行 aTool.exe 作为

```
system('aTool.exe'); 
```

它工作得很好。但是，因为 aTool.exe 有很多打印到命令窗口，所以要花很长时间才能完成运行此命令。我写了 Gen.m。“aTool.exe”是一个开源应用程序，所以我无法访问源代码。aTool.exe最后应该生成3个文本文件，Result1.txt、Result2.txt和Result3.txt。当它运行时，它会在屏幕上打印出一些处理消息。这三个文本文件是我需要的，但在运行时我不需要那些处理消息。

有谁知道当我运行 Gen.m 文件时如何停止“aTool.exe”打印到命令窗口？我努力了

```
matlab -nodisplay -nojvm -nosplash -nodesktop -r Gen > matlab.out 
```

它没有用。命令窗口仍然弹出并开始打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:47:37.677

`system`您可以使用的输出参数在变量中捕获输出。这将让您检查错误，并可能从输出中提取有用的位。只要您使用分号来抑制回显，它就不会显示在命令窗口中。

```
[status,result] = system('aTool.exe'); 
```

或者我认为你可以在系统调用中使用重定向来丢弃它的输出。

```
system('aTool.exe > NUL'); 
```

从长远来看，以第一种方式捕获输出将使调试更容易。但如果它真的是大量的输出，你最终可能会缓冲大量数据。

# python - Python youtube-dl 重新编译

> ID：12683518
> 
> 赞同：4
> 
> 时间：2012-10-02T01:50:56.287
> 
> 标签：python, compilation, makefile, youtube-dl

旧的 youtube-dl 曾经只是一个文件，所以我很容易编辑。新版本里面有多个文件。为了让它在我的服务器上工作，我需要提取文件并更改 python 路径。现在我该如何把它重新组合起来？youtube-dl 网站说 make compile。

youtube-dl 包含**main** .py、**init** .py、FileDownloader.py、InfoExtractors.py、PostProcessor.py、utils.py

我需要将这些脚本放回单个 youtube-dl 文件中。我正在运行 CentOS。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T02:41:14.060

如果您只想更改解释器行（hashbang），则应编辑该文件。

由于它是二进制文件，因此您不能使用普通的文本编辑器。我建议只用 Python 脚本编辑它：

```
with open('youtube-dl', 'rb') as f:
    header = f.readline()
    zipfile = f.read()

with open('youtube-dl-new', 'wb') as f:
    print >> f, '#!/your/new/hashbang/line'
    f.write(zipfile) 
```

在 Python 3 中：

```
with open('youtube-dl', 'rb') as f:
    header = f.readline()
    zipfile = f.read()

with open('youtube-dl-new', 'wb') as f:
    print('#!/your/new/hashbang/line', file=f)
    f.write(zipfile) 
```

# c++ - 卷快照服务 - 忽略 FilesNotToSnapshot

> ID：12683523
> 
> 赞同：2
> 
> 时间：2012-10-02T01:51:32.763
> 
> 标签：c++, windows, volume-shadow-service

我正在使用`Volume Snapshot Services`（VSS）备份驱动器。默认情况下，下面列出的所有文件`HKLM\SYSTEM\CurrentControlSet\Control\BackupRestore\FilesNotToSnapshot`都由 VSS 从快照中删除。

如何让 VSS 保留这些文件？有一些软件（例如 Macrium Reflect）可以做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:19:17.633

在拥有它的系统上（XP 没有），“影子副本优化编写器”负责在拍摄快照后从影子副本中删除不需要的文件。

我要么尝试明确禁用此编写器，要么使用 VSS_VOLSNAP_ATTR_NO_AUTORECOVERY 标志调用 SetContext()（它应该防止任何快照后写入操作）。但是 MSDN 说[这个标志有缺点](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385012%28v=vs.85%29.aspx)。

# jquery - 使用 Rails UJS，如何从函数提交远程表单

> ID：12683524
> 
> 赞同：19
> 
> 时间：2012-10-02T01:51:44.820
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ujs

我正在使用 Rails UJS。我有一个表单设置来执行远程提交，如下所示：

```
<form accept-charset="UTF-8" action="/subscriptions" class="new_subscription form-horizontal" id="new_subscription" data-remote="true" data-type="json" method="POST"> 
```

我正在尝试找到一种从 JavaScript 函数提交此表单的方法。我试过了：

```
var form$ = $("#new_subscription");
form$.get(0).submit(); 
```

但是这样做的问题是它提交了没有远程的表单，它发布到服务器并刷新了页面。知道为什么吗？是否有不同的方式来提交远程表单？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2017-07-10T01:36:31.967

也许对于那些使用`jquery-ujs`（Rails 5.0 默认及以下版本）的人来说，正如 Mikhail 已经回答的那样，触发自定义 jquery 事件将起作用，即：

```
$("#new_subscription").trigger("submit.rails"); 
```

对于那些在 2017 年偶然发现这个问题并使用 Rails 5.1 的人来说，答案会有所不同。Rails 5.1 已`jquery`作为依赖项删除，因此已被`jquery-ujs`完全重写的`rails-ujs`. 见：[http ://weblog.rubyonrails.org/2017/4/27/Rails-5-1-final/](http://weblog.rubyonrails.org/2017/4/27/Rails-5-1-final/)

因此，您必须在 rails-ujs 中触发正确的[CustomEvent 对象：](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent)

截至目前，文档（又名 RailsGuides）中没有发布/推荐的方法，但这里有一些选项，您只需查看 Rails 的源代码即可使用：

1.  使用`Rails.fire`功能：

    ```
    nativeFormEl = $("#new_subscription")[0] // you need the native DOM element
    Rails.fire(nativeFormEl, 'submit') 
    ```

2.  您还可以以编程方式调用处理程序（通过 XHR`Rails.handleRemote`实际提交表单的处理程序：`data-remote=true`

    ```
    nativeFormEl = $("#new_subscription")[0] // you need the native DOM element
    Rails.handleRemote.call(nativeFormEl, event); // unfortunately, you cannot reference the previously created submit CustomEvent object by rails-ujs.js
    //  ... or ...
    Rails.handleRemote.call(nativeFormEl) // submits via XHR successfully, but throws an error after success callback at Rails.stopPropagation 
    ```

我更喜欢选项 1，因为它只是一个使用更新的 Web API 方法的包装器，即创建 a`CustomEvent`并将其分派到`EventTarget`via `dispatchEvent`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-02T06:11:06.130

尝试触发`submit.rails`事件：

```
$("#new_subscription").trigger("submit.rails"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T23:43:52.377

尝试自己做一个 Ajax 请求：

```
$('#new_suscription').submit(function(){
  /*do whatever you want here*/
  $.post('/subscriptions',$(this).serialize(),function(){},'script');
} 
```

这样，您使用表单数据执行 POST 请求并将响应作为脚本执行。

# mysql - 这个数据库是否规范化

> ID：12683525
> 
> 赞同：2
> 
> 时间：2012-10-02T01:51:46.413
> 
> 标签：mysql, database, database-design, database-schema

我正在尝试建立一个强大的数据库，该数据库已标准化并且在需要时有扩展空间。这看起来像我可能有问题吗？这会更有效率吗？最重要的是，这个数据库是不是最好的标准化了？感谢您的关注！

![在此处输入图像描述](../Images/3bdd0114a6cff34a9ed123d468579fc6.png)

**编辑我**

我将尝试解释我的多对多关系。

属性：本站计划携带枪支、弹药、配件等……每个产品可以有很多属性，有些可以有一个。例如，边缘火力、手枪和中心火力的弹药将具有相同的属性，而霰弹枪将具有不同的属性。所以我的想法是，为了使属性灵活，我需要像在我的示例中那样设置表格。希望这是有道理的——我确实为此而苦苦挣扎。

供应商：一个产品可以有多个供应商。

图片 - 产品将有一张主图片和数量不详的附加图片。

类别：一个产品可以出现在多个类别中。例如，枪支可能出现在半自动步枪和战术枪支中。

评论：单个产品将有多个评论。

请忽略产品表中的“新字段”字段。那是无人看管的，我忘了在截图之前删除那些。

**编辑二**

我根据每个人的建议重新设计了架构。请看一下，看看我是否越来越近了。我真的很感谢大家在这方面的时间；）

![在此处输入图像描述](../Images/4765aa8609f9faed16403ded5bd00e82.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:02:21.720

为什么 Products 表中有两个“新字段”？为什么产品表中的 review_id 和 attribute_id 似乎是通过联结表链接的？

一张图片真的能展示多个产品吗？如果没有，您不需要或不需要 product_images，只需将 product_id 放入 images 表中即可。与评论相同的问题；一个评论是否涵盖多个产品？如果不是，请移除连接表。

产品真的有供应商和制造商吗？每个制造商只供应一种产品真的是真的吗？

您为属性设置的键值机制背后的想法是什么？

您是否有任何特殊原因决定在表中使用额外的 id 列，例如类别和属性，而不是使用自然键？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:08:35.390

为什么需要在和之间建立*多对多*关系？一个属性也可以属于多个产品吗？如果没有，请删除该表。在 table 上创建一个名为 column 的列，并将其引用到 table on column 。`product``attributes``product_attributes``attribute_id``product``attributes``attribute_id`

我也认为`product`and `images`table 之间的关系只是*一对多*。删除表并在表中创建一个名为`images`的新列。也可以使用和执行此操作。`product_images``image_path``product``reviews`

我在您的架构中发现了许多多对多关系。

永远记住，加入一个表对于应用程序级别来说是非常昂贵的。

# javascript - 在javascript中解析类似json的结构/字符串

> ID：12683529
> 
> 赞同：0
> 
> 时间：2012-10-02T01:52:21.617
> 
> 标签：javascript, arrays, json

我有这个变量：

```
var txt = { 
    'e3fe40': { 
        'name' : 'Menu2',
        'data': {
            'prompt_say' : 'Thank you for calling ',
            'keys[]' : ['1','2'],
            'choices[]' : [
                'start/e3fe40/d2d27',
                'start/e3fe40/77c197'
            ]... 
```

虽然我可以毫无问题地解析诸如`txt[position].data`.... 之类的东西，但我似乎无法解析这两个：

> `txt[position].data.keys`和`txt[position].data.choices`
> 
> 　　^(（上面代码的最后两个条目）)

我试过了

```
txt[position].data.keys[1], 
txt[position].data.keys[],
txt[position].data.keys 
```

等等

没有工作。我总是得到`"undefined"`价值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T01:54:19.113

```
txt[position].data['keys[]'] 
```

密钥`keys[]`是密钥的名称。您不能任意插入类似 JSON 的字符串作为键名并期望它进行解析。这显然假设 is 的值`position`或`e3fe40`它需要的任何值。

# jquery - Access-Control-Allow-Origin 不允许来源 http://localhost。？

> ID：12683530
> 
> 赞同：24
> 
> 时间：2012-10-02T01:52:24.073
> 
> 标签：jquery, ajax, json, api

我有一个问题...我尝试在**“ [http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json](http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json) ”中获取 json api**

当我尝试使用此代码进入离线模式时（这意味着我在记事本中复制该 json API 并在我的本地主机中调用它）...

```
function getLast(){
        $.ajax({
            url:"http://localhost/tickets/json/api_airport.json",
            type:'GET',
            dataType:"json",
            success:function(data){console.log(data.results.result[1].category);}
        });
    } 
```

它运行完美。:)

但是当我尝试使用以下代码访问真实网址（“ **[http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json](http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json)** ”）时：

```
$.ajax({
            url:"http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json",
            type:'GET',
            crossDomain:true,
            beforeSend: function(x) {
                if(x && x.overrideMimeType) {
                    x.overrideMimeType("application/j-son;charset=UTF-8");
                }
            },
            success:function(data){console.log("Success");}
        }); 
```

[然后在我的 google chrome javascript 控制台中，出现这样的错误：“ XMLHttpRequest](http://localhost)无法加载[http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json](http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json)。来源[://localhost](http://localhost) ) 是 Access-Control-Allow-Origin 不允许的。”

我知道，这一定是跨域问题，有人可以帮助我吗？nb：一些代码，我从堆栈溢出社区获得....谢谢 :)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-02T02:01:39.627

你有两种前进的方式：

# JSONP

* * *

如果此 API 支持`JSONP`，则解决此问题的最简单方法是添加`&callback`到 URL 的末尾。你也可以试试`&callback=`。如果这不起作用，则意味着 API 不支持`JSONP`，因此您必须尝试其他解决方案。

# 代理脚本

* * *

您可以在与您的网站相同的域上创建代理脚本，以避免跨域问题。这仅适用于 HTTP URL，不适用于 HTTPS URL，但如果您需要修改它应该不会太难。

```
<?php
// File Name: proxy.php
if (!isset($_GET['url'])) {
    die(); // Don't do anything if we don't have a URL to work with
}
$url = urldecode($_GET['url']);
$url = 'http://' . str_replace('http://', '', $url); // Avoid accessing the file system
echo file_get_contents($url); // You should probably use cURL. The concept is the same though 
```

然后你只需用 jQuery 调用这个脚本。一定要`urlencode`网址。

```
$.ajax({
    url      : 'proxy.php?url=http%3A%2F%2Fapi.master18.tiket.com%2Fsearch%2Fautocomplete%2Fhotel%3Fq%3Dmah%26token%3D90d2fad44172390b11527557e6250e50%26secretkey%3D83e2f0484edbd2ad6fc9888c1e30ea44%26output%3Djson',
    type     : 'GET',
    dataType : 'json'
}).done(function(data) {
    console.log(data.results.result[1].category); // Do whatever you want here
}); 
```

# 为什么

* * *

由于 XMLHttpRequest 同源策略，您会收到此错误，这基本上归结为将 ajax 请求限制为具有不同端口、域或协议的 URL。此限制用于防止跨站点脚本 (XSS) 攻击。

[更多信息](http://www.w3.org/Security/wiki/Same_Origin_Policy)

我们的解决方案以不同的方式绕过这些问题。

`JSONP`使用将脚本标签指向 JSON（包装在 javascript 函数中）以接收 JSON 的能力。JSONP 页面被解释为 javascript，并被执行。JSON 将传递给您指定的函数。

代理脚本通过欺骗浏览器来工作，因为您实际上是在请求与您的页面同源的页面。实际的跨域请求发生在服务器端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-27T20:13:17.177

我用一个简单的 nginx 代理修复了这个（用于开发）......

```
# /etc/nginx/sites-enabled/default
server {
  listen 80;
  root /path/to/Development/dir;
  index index.html;

  # from your example
  location /search {
    proxy_pass http://api.master18.tiket.com;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T02:00:17.850

彻底阅读[jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)似乎表明您正在查询的服务器正在返回一个禁止跨域 json 请求的标头字符串。检查您收到的响应的标头，以查看是否设置了 Access-Control-Allow-Origin 标头，以及其值是否将跨域请求限制到本地主机。

# sql - 如何进行递归查询

> ID：12683532
> 
> 赞同：1
> 
> 时间：2012-10-02T01:52:40.477
> 
> 标签：sql, sql-server, database, tsql, recursive-query

我有一个数据库表，如下所示：

```
EVENT_ID TEXT_FRO TEXT_TO
55001              05
55001    05        10
55001    10        15
55001    15        20
55001    20        30
56215    06        11
56215    11        22 
```

我需要编写一个查询（或 SP）来生成一个结果集，以列出每个不同 event_ID 的所有动作，如下所示：

```
Event ID Movements
55001    05 10 15 20 30
56215    06 11 22 
```

我怎样才能做到这一点？

*编辑以简化示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:37:07.493

如果您使用函数和光标，这非常简单：

```
use tempdb
go

create table tmp (
  EVENT_ID int, 
  TEXT_FRO varchar(10), 
  TEXT_TO varchar(10)
)
go

insert into tmp values
(55001, NULL, '05'),
(55001, '05', '26'),
(55001, '26', '28'),
(55001, '28', '27'),
(55001, '27', '26'),
(55001, '26', '27'),
(55001, '27', '28'),
(55001, '28', '30'),
(55001, '30', '40'),
(56215, '06', '11'),
(56215, '11', '22')
go 
```

您必须创建一个函数来组装连接的字符串：

```
create function fnConcat (@id int) returns varchar(255) as
begin
  declare @rtn varchar(255) = '', @fro varchar(10), @to varchar(10), @cnt int = 1

  declare cr cursor local for
    select TEXT_FRO, TEXT_TO
    from   tmp
    where  EVENT_ID = @id

  open cr
  fetch next from cr into @fro, @to

  while @@fetch_status = 0
  begin
    if @cnt = 1 and @fro is not null
      set @rtn = @rtn + @fro + ' '

    set @rtn = @rtn + @to + ' '

    set @cnt = @cnt + 1
    fetch next from cr into @fro, @to
  end

  close cr
  deallocate cr

  set @rtn = left(@rtn, datalength(@rtn) - 1)

  return @rtn
end
go 
```

如果每个唯一的 EVENT_ID 只调用一次函数会更有效**，**因此我们`distinct`在子查询中选择 EVENT_ID：

```
select x.EVENT_ID as [Event ID], dbo.fnConcat(x.EVENT_ID) as Movements
from (
  select distinct EVENT_ID
  from tmp
) as x
go 
```

然后清理：

```
drop table tmp
go
drop function fnConcat
go 
```

结果如下：

```
Event ID    Movements
----------- ---------------------------
55001       05 26 28 27 26 27 28 30 40
56215       06 11 22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:37:31.807

您可以使用递归公用表表达式来执行此操作。

出于测试目的，我在测试表中添加了一个列来标识事件的顺序，以便能够识别第一个：

```
create table movements 
(
  event_id   INTEGER,
  text_fro   VARCHAR(10),
  text_to    VARCHAR(10),
  sort_ord   INTEGER
);

insert into movements (event_id, text_fro, text_to, sort_ord)
values
(55001,null,'05',1),
(55001,'05','10',2),
(55001,'10','15',3),
(55001,'15','20',4),
(55001,'20','30',5),
(56215,'06','11',1),
(56215,'11','22',2)
;

with mvt as (
   select m1.event_id as root_id,
          m1.event_id,
          cast(coalesce(m1.text_fro,'') + ' ' + m1.text_to as varchar(8000)) as path,
          m1.text_fro,
          m1.text_to,
          m1.sort_ord
   from movements m1
   where m1.text_fro is null
   or m1.sort_ord = (select min(sort_ord) from movements m2 where m1.event_id = m2.event_id)

   union all 

   select p.root_id,
          c.event_id,
          p.path + ' ' + c.text_to,
          c.text_fro,
          c.text_to,
          c.sort_ord
   from movements c
     join mvt p on p.text_to = c.text_fro
)
select root_id, max(ltrim(path)) as movements
from mvt
group by root_id; 
```

这是一个[SQLFiddle 演示](http://sqlfiddle.com/#!3/65937/1)

不过，我不确定如何处理事件循环中的循环。

# java - 绘制一个不会在下一次绘画中消失的矩形

> ID：12683533
> 
> 赞同：8
> 
> 时间：2012-10-02T01:52:51.723
> 
> 标签：java, swing, graphics, jpanel, paint

我试图创建一个绘制矩形的 JPanel。面板需要绘制很多矩形，但它们不会移动。我的问题的一个解决方案是创建一个包含我已经创建的所有矩形的列表，并在每次调用“Paint”时将它们全部绘制出来。但是有很多矩形，它会减慢计算机的速度。
我还尝试使用 repaint(x, y, height, width) 来绘制新矩形的空间，但它不起作用。（JPanel 不断擦除以前的矩形。）在排序中，我需要绘制不会在每次绘画中消失的矩形。或者一种不会擦除以前绘制的绘制方法，或者不会绘制背景。这是我的 JPanel 课程的一部分：

```
class MyPanel extends JPanel{
  private int x, y, size;
  private Color c;
  public void DrawRect(int x, int y, int size, Color c){
      this.x = x;
      this.y = y;
      this.size = size;
      this.c = c;
      repaint();
  }
  @Override
    public void
    paint(Graphics g) {

        g.setColor(c);
      g.fillRect(x, y, size, size);
    } 
```

}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T02:08:25.357

从这种方法开始 - 基于 a`BufferedImage`作为绘画表面..

![基本的绘画应用程序。](../Images/ee831addd93f8947cf552471a7e134cb.png)

```
import java.awt.*;
import java.awt.RenderingHints.Key;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.filechooser.FileFilter;
import javax.swing.filechooser.FileNameExtensionFilter;

public class BasicPaint {

    /** Reference to the original image. */
    private BufferedImage originalImage;
    /** Image used to make changes. */
    private BufferedImage canvasImage;
    /** The main GUI that might be added to a frame or applet. */
    private JPanel gui;
    /** The color to use when calling clear, text or other 
     * drawing functionality. */
    private Color color = Color.WHITE;
    /** General user messages. */
    private JLabel output = new JLabel("You DooDoodle!");

    private BufferedImage colorSample = new BufferedImage(
            16,16,BufferedImage.TYPE_INT_RGB);
    private JLabel imageLabel;
    private int activeTool;
    public static final int SELECTION_TOOL = 0;
    public static final int DRAW_TOOL = 1;
    public static final int TEXT_TOOL = 2;

    private Point selectionStart; 
    private Rectangle selection;
    private boolean dirty = false;
    private Stroke stroke = new BasicStroke(
            3,BasicStroke.CAP_ROUND,BasicStroke.JOIN_ROUND,1.7f);
    private RenderingHints renderingHints;

    public JComponent getGui() {
        if (gui==null) {
            Map<Key, Object> hintsMap = new HashMap<RenderingHints.Key,Object>();
            hintsMap.put(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            hintsMap.put(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            hintsMap.put(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
            renderingHints = new RenderingHints(hintsMap); 

            setImage(new BufferedImage(320,240,BufferedImage.TYPE_INT_RGB));
            gui = new JPanel(new BorderLayout(4,4));
            gui.setBorder(new EmptyBorder(5,3,5,3));

            JPanel imageView = new JPanel(new GridBagLayout());
            imageView.setPreferredSize(new Dimension(480,320));
            imageLabel = new JLabel(new ImageIcon(canvasImage));
            JScrollPane imageScroll = new JScrollPane(imageView);
            imageView.add(imageLabel);
            imageLabel.addMouseMotionListener(new ImageMouseMotionListener());
            imageLabel.addMouseListener(new ImageMouseListener());
            gui.add(imageScroll,BorderLayout.CENTER);

            JToolBar tb = new JToolBar();
            tb.setFloatable(false);
            JButton colorButton = new JButton("Color");
            colorButton.setMnemonic('o');
            colorButton.setToolTipText("Choose a Color");
            ActionListener colorListener = new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    Color c = JColorChooser.showDialog(
                            gui, "Choose a color", color);
                    if (c!=null) {
                        setColor(c);
                    }
                }
            };
            colorButton.addActionListener(colorListener);
            colorButton.setIcon(new ImageIcon(colorSample));
            tb.add(colorButton);

            setColor(color);

            final SpinnerNumberModel strokeModel = 
                    new SpinnerNumberModel(3,1,16,1);
            JSpinner strokeSize = new JSpinner(strokeModel);
            ChangeListener strokeListener = new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent arg0) {
                    Object o = strokeModel.getValue();
                    Integer i = (Integer)o; 
                    stroke = new BasicStroke(
                            i.intValue(),
                            BasicStroke.CAP_ROUND,
                            BasicStroke.JOIN_ROUND,
                            1.7f);
                }
            };
            strokeSize.addChangeListener(strokeListener);
            strokeSize.setMaximumSize(strokeSize.getPreferredSize());
            JLabel strokeLabel = new JLabel("Stroke");
            strokeLabel.setLabelFor(strokeSize);
            strokeLabel.setDisplayedMnemonic('t');
            tb.add(strokeLabel);
            tb.add(strokeSize);

            tb.addSeparator();

            ActionListener clearListener = new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    int result = JOptionPane.OK_OPTION;
                    if (dirty) {
                        result = JOptionPane.showConfirmDialog(
                                gui, "Erase the current painting?");
                    }
                    if (result==JOptionPane.OK_OPTION) {
                        clear(canvasImage);
                    }
                }
            };
            JButton clearButton = new JButton("Clear");
            tb.add(clearButton);
            clearButton.addActionListener(clearListener);

            gui.add(tb, BorderLayout.PAGE_START);

            JToolBar tools = new JToolBar(JToolBar.VERTICAL);
            tools.setFloatable(false);
            JButton crop = new JButton("Crop");
            final JRadioButton select = new JRadioButton("Select", true);
            final JRadioButton draw = new JRadioButton("Draw");
            final JRadioButton text = new JRadioButton("Text");

            tools.add(crop);            
            tools.add(select);          
            tools.add(draw);            
            tools.add(text);

            ButtonGroup bg = new ButtonGroup();
            bg.add(select);
            bg.add(text);
            bg.add(draw);
            ActionListener toolGroupListener = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    if (ae.getSource()==select) {
                        activeTool = SELECTION_TOOL;
                    } else if (ae.getSource()==draw) {
                        activeTool = DRAW_TOOL;
                    } else if (ae.getSource()==text) {
                        activeTool = TEXT_TOOL;
                    }
                }
            };
            select.addActionListener(toolGroupListener);
            draw.addActionListener(toolGroupListener);
            text.addActionListener(toolGroupListener);

            gui.add(tools, BorderLayout.LINE_END);

            gui.add(output,BorderLayout.PAGE_END);
            clear(colorSample);
            clear(canvasImage);
        }

        return gui;
    }

    /** Clears the entire image area by painting it with the current color. */
    public void clear(BufferedImage bi) {
        Graphics2D g = bi.createGraphics();
        g.setRenderingHints(renderingHints);
        g.setColor(color);
        g.fillRect(0, 0, bi.getWidth(), bi.getHeight());

        g.dispose();
        imageLabel.repaint();
    }

    public void setImage(BufferedImage image) {
        this.originalImage = image;
        int w = image.getWidth();
        int h = image.getHeight();
        canvasImage = new BufferedImage(w,h,BufferedImage.TYPE_INT_ARGB);

        Graphics2D g = this.canvasImage.createGraphics();
        g.setRenderingHints(renderingHints);
        g.drawImage(image, 0, 0, gui);
        g.dispose();

        selection = new Rectangle(0,0,w,h); 
        if (this.imageLabel!=null) {
            imageLabel.setIcon(new ImageIcon(canvasImage));
            this.imageLabel.repaint();
        }
        if (gui!=null) {
            gui.invalidate();
        }
    }

    /** Set the current painting color and refresh any elements needed. */
    public void setColor(Color color) {
        this.color = color;
        clear(colorSample);
    }

    private JMenu getFileMenu(boolean webstart){
        JMenu file = new JMenu("File");
        file.setMnemonic('f');

        JMenuItem newImageItem = new JMenuItem("New");
        newImageItem.setMnemonic('n');
        ActionListener newImage = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                BufferedImage bi = new BufferedImage(
                        360, 300, BufferedImage.TYPE_INT_ARGB);
                clear(bi);
                setImage(bi);
            }
        };
        newImageItem.addActionListener(newImage);
        file.add(newImageItem);

        if (webstart) {
            //TODO Add open/save functionality using JNLP API
        } else {
            //TODO Add save functionality using J2SE API
            file.addSeparator();
            ActionListener openListener = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    if (!dirty) {
                        JFileChooser ch = getFileChooser();
                        int result = ch.showOpenDialog(gui);
                        if (result==JFileChooser.APPROVE_OPTION ) {
                            try {
                                BufferedImage bi = ImageIO.read(
                                        ch.getSelectedFile());
                                setImage(bi);
                            } catch (IOException e) {
                                showError(e);
                                e.printStackTrace();
                            }
                        }
                    } else {
                        // TODO
                        JOptionPane.showMessageDialog(
                                gui, "TODO - prompt save image..");
                    }
                }
            };
            JMenuItem openItem = new JMenuItem("Open");
            openItem.setMnemonic('o');
            openItem.addActionListener(openListener);
            file.add(openItem);

            ActionListener saveListener = new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JFileChooser ch = getFileChooser();
                    int result = ch.showSaveDialog(gui);
                    if (result==JFileChooser.APPROVE_OPTION ) {
                        try {
                            File f = ch.getSelectedFile();
                            ImageIO.write(BasicPaint.this.canvasImage, "png", f);
                            BasicPaint.this.originalImage = BasicPaint.this.canvasImage;
                            dirty = false;
                        } catch (IOException ioe) {
                            showError(ioe);
                            ioe.printStackTrace();
                        }
                    }
                }
            };
            JMenuItem saveItem = new JMenuItem("Save");
            saveItem.addActionListener(saveListener);
            saveItem.setMnemonic('s');
            file.add(saveItem);
        }

        if (canExit()) {
            ActionListener exit = new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    // TODO Auto-generated method stub
                    System.exit(0);
                }
            };
            JMenuItem exitItem = new JMenuItem("Exit");
            exitItem.setMnemonic('x');
            file.addSeparator();
            exitItem.addActionListener(exit);
            file.add(exitItem);
        }

        return file;
    }

    private void showError(Throwable t) {
        JOptionPane.showMessageDialog(
                gui, 
                t.getMessage(), 
                t.toString(), 
                JOptionPane.ERROR_MESSAGE);
    }

    JFileChooser chooser = null;

    public JFileChooser getFileChooser() {
        if (chooser==null) {
            chooser = new JFileChooser();
            FileFilter ff = new FileNameExtensionFilter("Image files", ImageIO.getReaderFileSuffixes());
            chooser.setFileFilter(ff);
        }
        return chooser;

    }

    public boolean canExit() {
        boolean canExit = false;
        SecurityManager sm = System.getSecurityManager();
        if (sm==null) {
            canExit = true;
        } else {
            try {
                sm.checkExit(0);
                canExit = true; 
            } catch(Exception stayFalse) {
            }
        }

        return canExit;
    }

    public JMenuBar getMenuBar(boolean webstart){
        JMenuBar mb = new JMenuBar();
        mb.add(this.getFileMenu(webstart));
        return mb;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch (Exception e) {
                    // use default
                }
                BasicPaint bp = new BasicPaint();

                JFrame f = new JFrame("DooDoodle!");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.setLocationByPlatform(true);

                f.setContentPane(bp.getGui());
                f.setJMenuBar(bp.getMenuBar(false));

                f.pack();
                f.setMinimumSize(f.getSize());
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }

    public void text(Point point) {
        String text = JOptionPane.showInputDialog(gui, "Text to add", "Text");
        if (text!=null) {
            Graphics2D g = this.canvasImage.createGraphics();
            g.setRenderingHints(renderingHints);
            g.setColor(this.color);
            g.setStroke(stroke);
            int n = 0;
            g.drawString(text,point.x,point.y);
            g.dispose();
            this.imageLabel.repaint();
        }
    }

    public void draw(Point point) {
        Graphics2D g = this.canvasImage.createGraphics();
        g.setRenderingHints(renderingHints);
        g.setColor(this.color);
        g.setStroke(stroke);
        int n = 0;
        g.drawLine(point.x, point.y, point.x+n, point.y+n);
        g.dispose();
        this.imageLabel.repaint();
    }

    class ImageMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent arg0) {
            // TODO Auto-generated method stub
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selectionStart = arg0.getPoint();
            } else if (activeTool==BasicPaint.DRAW_TOOL) {
                // TODO
                draw(arg0.getPoint());
            } else if (activeTool==BasicPaint.TEXT_TOOL) {
                // TODO
                text(arg0.getPoint());
            } else {
                JOptionPane.showMessageDialog(
                        gui, 
                        "Application error.  :(", 
                        "Error!", 
                        JOptionPane.ERROR_MESSAGE);
            }
        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selection = new Rectangle(
                        selectionStart.x,
                        selectionStart.y,
                        arg0.getPoint().x,
                        arg0.getPoint().y);
            }
        }
    }

    class ImageMouseMotionListener implements MouseMotionListener {

        @Override
        public void mouseDragged(MouseEvent arg0) {
            reportPositionAndColor(arg0);
            if (activeTool==BasicPaint.SELECTION_TOOL) {
                selection = new Rectangle(
                        selectionStart.x,
                        selectionStart.y,
                        arg0.getPoint().x-selectionStart.x,
                        arg0.getPoint().y-selectionStart.y);
            } else if (activeTool==BasicPaint.DRAW_TOOL) {
                draw(arg0.getPoint());
            }
        }

        @Override
        public void mouseMoved(MouseEvent arg0) {
            reportPositionAndColor(arg0);
        }

    }

    private void reportPositionAndColor(MouseEvent me) {
        String text = "";
        if (activeTool==BasicPaint.SELECTION_TOOL) {
            text += "Selection (X,Y:WxH): " + 
                    (int)selection.getX() +
                    "," +
                    (int)selection.getY() +
                    ":" +
                    (int)selection.getWidth() +
                    "x" +
                    (int)selection.getHeight();
        } else {
            text += "X,Y: " + (me.getPoint().x+1) + "," + (me.getPoint().y+1);
        }
        output.setText(text);
    }
} 
```

这个来源非常不完整。

*   它有很多部分`// TODO`
*   声明了一个`dirty`属性，但从未以任何有意义的方式使用。..

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-02T02:02:53.263

1.  不要在`paint`没有非常非常好的理由的情况下覆盖......`paintComponent`改用
2.  总是 call `super.paintXxx`，这些方法在后台做了很多，没有调用 super 只会回来困扰你。
3.  如果您将多个窗格用作矩形，请将其设为`MyPanel`透明。

油漆是无国籍的。最后一幅画和下一幅画之间没有联系。在每个绘制请求上，您都应该更新整个状态。

Andrew 关于双缓冲（或后缓冲）的建议是非常好的建议，我强烈建议您看看实现它。

同时，我把这个小例子放在一起......

![在此处输入图像描述](../Images/237886faa5dd4225090206bd1a42b405.png)

基本上，您按住鼠标按钮，它会每 40 毫秒（大约每秒 25 帧）随机向面板添加另一个矩形。

我得到了 1000 个矩形，没有任何问题，能够调整窗口大小而没有发出或明显减慢......

```
public class MyPanel extends JPanel {

    private List<MyRectangle> lstShapes;
    private Timer populate;

    public MyPanel() {

        lstShapes = new ArrayList<MyRectangle>(25);

        populate = new Timer(40, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                int x = (int) (Math.random() * getWidth());
                int y = (int) (Math.random() * getHeight());
                int width = (int) (Math.random() * (getWidth() / 4));
                int height = (int) (Math.random() * (getHeight() / 4));

                if (x + width > getWidth()) {
                    x = getWidth() - width;
                }
                if (y + height > getHeight()) {
                    y = getHeight() - height;
                }

                Color color = new Color(
                        (int) (Math.random() * 255),
                        (int) (Math.random() * 255),
                        (int) (Math.random() * 255));

                lstShapes.add(new MyRectangle(x, y, width, height, color));
                repaint();
            }
        });
        populate.setInitialDelay(0);
        populate.setRepeats(true);
        populate.setCoalesce(true);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                populate.restart();
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                populate.stop();
            }
        });

    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        for (MyRectangle rect : lstShapes) {
            rect.paint(g2d);
        }

        FontMetrics fm = g2d.getFontMetrics();
        String text = Integer.toString(lstShapes.size());

        g2d.setColor(getForeground());
        g2d.drawString(text, getWidth() - fm.stringWidth(text), getHeight() - fm.getHeight() + fm.getAscent());

    }

    public class MyRectangle extends Rectangle {

        private Color color;

        public MyRectangle(int x, int y, int width, int height, Color color) {
            super(x, y, width, height);
            this.color = color;
        }

        public Color getColor() {
            return color;
        }

        public void paint(Graphics2D g2d) {

            g2d.setColor(getColor());
            g2d.fill(this);

        }
    }
} 
```

试试看，很有趣；）

ps- 在我注意到速度变慢之前，我达到了 5000 多个矩形（我将代码修改为 10 毫秒的延迟，并且每个刻度添加了 10 个新矩形）

# html - 在 html 问题中创建括号？

> ID：12683535
> 
> 赞同：0
> 
> 时间：2012-10-02T01:53:24.780
> 
> 标签：html, css, square-bracket

我正在制作一些锦标赛括号。出于某种原因，我在将徽标 div 与括号线对齐时遇到问题。你能帮我并告诉我如何放置其他括号（以防我添加更多）非常感谢！

[JSFIDDLE](http://jsfiddle.net/Hunter4854/qdmfB/)

### HTML

```
<div class="logo1"></div>
<div class="logo2"></div>

<div class="brackets-direct">
    <div class="tpleft"></div>
    <div class="tpright"></div>
    <div class="btleft"></div>
    <div class="btright"></div>
</div>
​ 
```

### CSS

```
.brackets-direct
{

}
.brackets-direct div {
    border: 1px solid #aaa;
    width: 38px;
    float: left;
    height: 33px;

}

div.tpleft 
{
    border-width: 1px 1px 0 0;
}
div.btleft 
{
    border-width: 0 1px 1px 0;
    clear: left;
}
div.tpright 
{
    border-width: 0 0 1px 0;
}
div.btright 
{
    border-width: 0;
}

.logo1, .logo2
{
    width: 50px; 
    height: 50px; 
    border: 1px solid #000; 
    margin-bottom: 2px;
}

​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:02:17.913

对此的快速解决方法是使用以下样式：

```
.brackets-direct
{
    float: left;
    position: relative;
    top: -35px;
}

.logo1, .logo2
{
    width: 50px; 
    height: 50px; 
    border: 1px solid #000; 
    margin-bottom: 2px;
    float: left;
    clear: left;
} 
```

不确定这是否适用于所有其他浏览器，但只需更改您的 JSFiddle 即可。您可以在此处阅读有关该`clear`属性的更多信息：[http ://reference.sitepoint.com/html/br/clear](http://reference.sitepoint.com/html/br/clear)

# c# - MVC 下拉列表，onchange

> ID：12683537
> 
> 赞同：1
> 
> 时间：2012-10-02T01:54:10.070
> 
> 标签：c#, asp.net-mvc-3

我在 html 中有一个 2 Dropdownlistfor，用于 Country 的 dropdownlist 和用于 state 的 dropdownlist。我使用 MVC，我想成为这样的输出，如果我更改 Selected Country，所选国家的 state 将填充到 state 的下拉列表中。我从数据库中获取国家和州的数据，并且在州表中有一个 countryId 字段。感谢帮助。

这是 Html 中的示例代码。

```
 <div class="fieldBlock">
                <div><label>Country</label>&nbsp;*</div>
                <div>@Html.DropDownListFor(model => model.Country.Id, Model.CountrySelectList, new { @class = "width305", @id = "ddlCountry" })</div>
                @Html.HiddenFor(model => model.Country.Name) @Html.HiddenFor(model => model.Country.Abbreviation)
                <div>@Html.ValidationMessageFor(model => model.Employee.StateId)</div>
            </div>

            <div class="fieldBlock">
                <div>@Html.LabelFor(model => model.Employee.StateId, "State/Province")&nbsp;*</div>
                <div>@Html.DropDownListFor(model => model.Employee.StateId, Model.CountryStateProvinceSelectList, new { @class = "width305" })</div>
                <div>@Html.ValidationMessageFor(model => model.Employee.StateId)</div>
            </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:49:13.377

尝试这个

在视图中

```
<script type="text/javascript">
     $(function() {
            $("#ddlCountry").change(function() {
                var selectedItem = $(this).val();
                var ddlStates = $("#ddlState");
                var statesProgress = $("#states-loading-progress");
                statesProgress.show();
                $.ajax({
                    cache: false,
                    type: "GET",
                    url: "@(Url.Action("SomeAction", "SomeController"))",
                    data: { "countryId": selectedItem},
                    success: function (data) {
                        ddlStates.html('');
                        $.each(data, function(id, option) {
                            ddlStates.append($('<option></option>').val(option.id).html(option.name));
                        });

                    },
                    error:function (xhr, ajaxOptions, thrownError){
                        alert('Failed to retrieve states.');

                    }  
                });
            });
        });
    </script>

<div class="fieldBlock">
    <div><label>Country</label>&nbsp;*</div>
    <div>@Html.DropDownListFor(model => model.Country.Id, Model.CountrySelectList, new { @class = "width305", @id = "ddlCountry" })</div>
    @Html.HiddenFor(model => model.Country.Name) @Html.HiddenFor(model => model.Country.Abbreviation)
    <div>@Html.ValidationMessageFor(model => model.Employee.StateId)</div>
</div>

<div class="fieldBlock">
    <div>@Html.LabelFor(model => model.Employee.StateId, "State/Province")&nbsp;*</div>
    <div>@Html.DropDownListFor(model => model.Employee.StateId, Model.CountryStateProvinceSelectList, new { @class = "width305", @id = "ddlState" })</div>
    <div>@Html.ValidationMessageFor(model => model.Employee.StateId)</div>
</div> 
```

在控制器中

```
public ActionResult SomeAction(string countryId)
{
     //perform your action here
     var states = _stateProvinceService.GetStateProvincesByCountryId(country.Id).ToList();
     var result = (from s in states
                   select new { id = s.Id, name = s.GetLocalized(x => x.Name) }
                  ).ToList();

   return Json(result, JsonRequestBehavior.AllowGet);
} 
```

注意：检查是否`Id`正确绑定到下拉菜单，并且我已经编写了虚拟代码来获取状态。

# asp.net - 在 ASP.Net 标记中显示字符串变量的值

> ID：12683540
> 
> 赞同：3
> 
> 时间：2012-10-02T01:54:39.223
> 
> 标签：asp.net, vb.net, markup

是否可以从代码隐藏文件中的字符串变量中获取值并将其显示在此标记中？

```
<h1>People Authorized to Release Children for <TheVariableGoesHere>  </h1> 
```

我们想要包含的变量称为 strForename。

```
Protected Sub GridViewParentsSummary_SelectedIndexChanged(sender As Object, e As EventArgs) Handles GridViewParentsSummary.SelectedIndexChanged

    IntParentsID = GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Value
    strForename = GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Values("Forename")

    blnAddModeIsSelected = False

    Response.Redirect("AuthorizationForChildReleaseDetails.aspx")

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T02:47:43.710

实现这一点的方法是通过调用方法背后的代码。

像这样的 C#

```
<h1>People Authorized to Release Children for <% =this.GetForename() %> </h1> 
```

或者这个对于 VB.NET

```
<h1>People Authorized to Release Children for <% =Me.GetForename() %> </h1> 
```

在 C# 后面的代码中

```
protected string GetForename() 
{
    return GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Values("Forename");
} 
```

或在 VB.NET 中

```
Protected Function GetForename() As String
    Return GridViewParentsSummary.DataKeys(GridViewParentsSummary.SelectedIndex).Values("Forename")
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:54:28.797

您可以通过使变量受保护或公共成员并在标记中使用它来做到这一点，如下所示：

<%#strForename%> 确保调用 DataBind 以便绑定字段。我看到您在函数结束时进行了重定向，除非您以某种方式将其传递（作为请求参数或会话参数），否则您不能将第 1 页中的变量使用到重定向页面中或者您可以执行 Server.Transfer 和在上下文中传递它

# php - 从 ffmpeg 转换的 mp3 文件中读取 id3 标签

> ID：12683544
> 
> 赞同：1
> 
> 时间：2012-10-02T01:55:12.393
> 
> 标签：php, mp3

我有以下脚本用于读取`id3`mp3 文件的标签。我手动检查`id3`了 mp3 文件中是否存在标签，但我的输出总是返回一些文件： `MP3 file does not have any ID3 tag!`

我正在从 ffmpeg 转换这些文件。当我为原始文件运行以下代码时，它显示了`id3`标签，但是当我为转换后的文件运行脚本时（通过 ffmpeg），它没有显示任何`id3`标签。我已经下载了原始文件和转换后的文件并检查了它们，发现这两个文件具有完全相同的标签，但是下面的代码仍然给出了错误消息。

这是代码：

```
 <?php
 $mp3 = "4.mp3"; //The mp3 file.

 $filesize = filesize($mp3);
 $file = fopen("4.mp3", "r");

 fseek($file, -128, SEEK_END); // It reads the 

 $tag = fread($file, 3);

 if($tag == "TAG")
 {
     $data["title"] = trim(fread($file, 30));

     $data["artist"] = trim(fread($file, 30));

     $data["album"] = trim(fread($file, 30));

     $data["year"] = trim(fread($file, 4));

      $data["genre"] = trim(fread($file, 1));

   }
   else
     die("MP3 file does not have any ID3 tag!");

   fclose($file);

   while(list($key, $value) = each($data))
   {
     print("$key: $value<br>\r\n");    
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:23:57.187

它需要正确的`id3`版本。我已经用这段代码解决了这个问题：

```
<?

print_r( tagReader ("4.mp3") );

function tagReader($file){
  $id3v23 = array("TIT2","TALB","TPE1","TRCK","TDRC","TLEN","USLT");
  $id3v22 = array("TT2","TAL","TP1","TRK","TYE","TLE","ULT");
  $fsize = filesize($file);
  $fd = fopen($file,"r");
  $tag = fread($fd,$fsize);
  $tmp = "";
  fclose($fd);

  if (substr($tag,0,3) == "ID3") {
    $result['FileName'] = $file;
    $result['TAG'] = substr($tag,0,3);
    $result['Version'] = hexdec(bin2hex(substr($tag,3,1))).".".hexdec(bin2hex(substr($tag,4,1)));
  }

  if($result['Version'] == "4.0" || $result['Version'] == "3.0"){
    for ($i=0;$i<count($id3v23);$i++){
      if (strpos($tag,$id3v23[$i].chr(0))!= FALSE){
        $pos = strpos($tag, $id3v23[$i].chr(0));
        $len = hexdec(bin2hex(substr($tag,($pos+5),3)));
        $data = substr($tag, $pos, 9+$len);
        for ($a=0;$a<strlen($data);$a++){
          $char = substr($data,$a,1);
          if($char >= " " && $char <= "~") $tmp.=$char;
        }
        if(substr($tmp,0,4) == "TIT2") $result['Title'] = substr($tmp,4);
        if(substr($tmp,0,4) == "TALB") $result['Album'] = substr($tmp,4);
        if(substr($tmp,0,4) == "TPE1") $result['Author'] = substr($tmp,4);
        if(substr($tmp,0,4) == "TRCK") $result['Track'] = substr($tmp,4);
        if(substr($tmp,0,4) == "TDRC") $result['Year'] = substr($tmp,4);
        if(substr($tmp,0,4) == "TLEN") $result['Lenght'] = substr($tmp,4);
        if(substr($tmp,0,4) == "USLT") $result['Lyric'] = substr($tmp,7);
        $tmp = "";
      }
    }
  }

  if($result['Version'] == "2.0"){
    for ($i=0;$i<count($id3v22);$i++){
      if (strpos($tag,$id3v22[$i].chr(0))!= FALSE){
        $pos = strpos($tag, $id3v22[$i].chr(0));
        $len = hexdec(bin2hex(substr($tag,($pos+3),3)));
        $data = substr($tag, $pos, 6+$len);
        for ($a=0;$a<strlen($data);$a++){
          $char = substr($data,$a,1);
          if($char >= " " && $char <= "~") $tmp.=$char;
        }
        if(substr($tmp,0,3) == "TT2") $result['Title'] = substr($tmp,3);
        if(substr($tmp,0,3) == "TAL") $result['Album'] = substr($tmp,3);
        if(substr($tmp,0,3) == "TP1") $result['Author'] = substr($tmp,3);
        if(substr($tmp,0,3) == "TRK") $result['Track'] = substr($tmp,3);
        if(substr($tmp,0,3) == "TYE") $result['Year'] = substr($tmp,3);
        if(substr($tmp,0,3) == "TLE") $result['Lenght'] = substr($tmp,3);
        if(substr($tmp,0,3) == "ULT") $result['Lyric'] = substr($tmp,6);
        $tmp = "";
      }
    }
  }

  return $result;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:49:41.710

有一个 PECL 扩展已经解决了 ID3 数据的解析。您可以在 PHP 手册中阅读它：[http](http://www.php.net/manual/en/book.id3.php) ://www.php.net/manual/en/book.id3.php 。

# html - Html div在放置一些文本后调整大小

> ID：12683545
> 
> 赞同：2
> 
> 时间：2012-10-02T01:55:14.447
> 
> 标签：html, css

伙计们..我希望我的 html div 在放置一些文本后不要调整大小.. 正如您在上面的图片中看到的那样，将最小高度设置为 250px；但是在多次放置一些 LAYER 1
之后。可能 20 次，我希望 div 高度为 250 像素，但它会自动调整大小？任何人都知道如何将 div 的高度设置为修复？即使添加文本也不会使 div 自动调整大小？谢谢..

![在此处输入图像描述](../Images/319ee5ad188c6b9b6c7c245806c6cc00.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T01:56:17.573

不是将最小高度设置为 250 像素，而是设置`height`为 250 像素...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T01:59:31.470

将 min-height 和 max-height 都设置为 250

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T02:03:11.983

尝试以下操作；请注意，`overflow:hidden;`如果您不希望内容溢出 div，则需要：

```
div#yourid {
    height: 250px;
    overflow: hidden;
} 
```

[**演示**](http://jsfiddle.net/t4prR/)

# redis - 达到 eta 时，长 eta（8 小时以上）的 celery 任务会连续执行多次

> ID：12683546
> 
> 赞同：17
> 
> 时间：2012-10-02T01:55:41.160
> 
> 标签：redis, celery, celery-task

我正在创建一个 eta 介于 3 到 20 小时之间的任务，当我查看工作日志时，对于这个任务，工作人员`Got task from broker: ...`在收到原始任务后每小时都会说“”，直到达到 eta。

我知道这与设置`BROKER_TRANSPORT_OPTIONS = {'visibility_timeout': X}`X 是以秒为单位的数字有关。

所以我玩了 visibility_timeout，如果我将它设置为小于 1 小时，那么我可以看到工作人员每 X 秒执行一次相同的任务，但是当我将`visibility_timeout`X 设置为大于 1 小时时，它会保持默认为 1h，不管我设定的时间。

还有其他人遇到这个问题吗？这是一个已知的错误吗？

我正在使用带有 Redis 服务器版本 2.4.15 的 Celery 3.0.11 (Chiastic Slide)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T12:25:35.433

编辑：任何使用 kombu* 连接到同一个 Redis URL 的消息消费者都将有助于恢复未确认的消息，因此您必须确保它们都配置有相同的`visibility_timeout`值。

一个常见的错误是像这样启动 Flower 监视器：

```
celery flower -b redis://somewhere 
```

而不是这样：

```
celery -A proj flower 
```

因为前者意味着花实例不会配置芹菜配置，然后丢失`BROKER_TRANSPORT_OPTIONS`和`visibility_timeout`设置。

除此之外，您还必须确保挂钟使用 ntp 同步，如下面的原始回复中所述。

*   kombu 是 Celery 使用的消息传递库。

**原回复**：

尽管我没有听说过这样的事情，但它可能是一个错误。我添加了一些打印语句来`kombu/transport/redis.py`检查 visibility_timeout 是否设置正确，这绝对适合我。测试它是否适用于大于一个小时的值将需要更多时间（确切地说大约需要 2 小时），所以我可以在那时报告。

同时，您可以通过自己添加 print 语句来验证您是否正确设置了 visiblity_timeout（例如，添加到 redis 传输中的 restore_visible 方法）

请注意，此功能使用时间戳，因此如果您有不止一台机器，时钟几乎同步（尤其是不偏离小时）很重要。您应该始终在联网服务器上使用 ntp 并定期同步。

# android - android上的密码提示

> ID：12683547
> 
> 赞同：12
> 
> 时间：2012-10-02T01:55:54.610
> 
> 标签：android, android-alertdialog

我正在尝试进行密码提示，当用户输入错误密码时，它会显示一个对话框，要求“取消”或“重试”，当用户单击“重试”时，它将再次显示密码提示。

下面是图片来说明我的意思

![在此处输入图像描述](../Images/35f4f85f082ff6ad2f4db2bf502ada33.png)

![在此处输入图像描述](../Images/c06578a65bc24f2430e7504f717a407d.png)

这就是我的做法

```
 /** RETRIEVE VIEW FROM DIALOGPROMPT.XML AND SET VIEW AS AN ALERTDIALOG BUILDER **/
                LayoutInflater li = LayoutInflater.from(context);
                View promptsView = li.inflate(R.layout.searchprompt, null);
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
                alertDialogBuilder.setView(promptsView);

                final EditText userInput = (EditText) promptsView
                        .findViewById(R.id.user_input);

                // set dialog message
                alertDialogBuilder
                    .setCancelable(false)
                    .setNegativeButton("Go",
                      new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            /** DO THE METHOD HERE WHEN PROCEED IS CLICKED*/
                            String user_text = (userInput.getText()).toString();

                            /** CHECK FOR USER'S INPUT **/
                            if (user_text.equals("oeg"))
                            {
                                Log.d(user_text, "HELLO THIS IS THE MESSAGE CAUGHT :)");
                                Search_Tips(user_text); 

                            }
                            else{
                                Log.d(user_text,"string is empty");
                                String message = "The password you have entered is incorrect." + " \n" + "Please try again";
                                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                                builder.setTitle("Error");
                                builder.setMessage(message);
                                builder.setPositiveButton("Cancel", null);
                                builder.setNegativeButton("Retry", null);
                                builder.create().show();

                            }
                            }
                      })
                    .setPositiveButton("Cancel",
                      new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                        dialog.cancel();
                        }
                      });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();

            }
        }); 
```

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T04:12:11.750

我已经解决了我自己的问题。我为我的警报对话框创建了一个方法，然后当我单击“重试”时，我将再次调用该方法。:)

```
public void showDialog()
{

    LayoutInflater li = LayoutInflater.from(context);
    View promptsView = li.inflate(R.layout.searchprompt, null);
    final AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setView(promptsView);

    final EditText userInput = (EditText) promptsView
            .findViewById(R.id.user_input);

    // set dialog message
    alertDialogBuilder
        .setCancelable(false)
        .setNegativeButton("Go",
          new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                /** DO THE METHOD HERE WHEN PROCEED IS CLICKED*/
                String user_text = (userInput.getText()).toString();

                /** CHECK FOR USER'S INPUT **/
                if (user_text.equals("oeg"))
                {
                    Log.d(user_text, "HELLO THIS IS THE MESSAGE CAUGHT :)");
                    Search_Tips(user_text); 

                }
                else{
                    Log.d(user_text,"string is empty");
                    String message = "The password you have entered is incorrect." + " \n \n" + "Please try again!";
                    AlertDialog.Builder builder = new AlertDialog.Builder(context);
                    builder.setTitle("Error");
                    builder.setMessage(message);
                    builder.setPositiveButton("Cancel", null);
                    builder.setNegativeButton("Retry", new DialogInterface.OnClickListener() {
                        @Override
                       public void onClick(DialogInterface dialog, int id) {
                            showDialog();
                       }
                   });
                    builder.create().show();

                }
                }
          })
        .setPositiveButton("Cancel",
          new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
            dialog.dismiss();
            }

          }

        );

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
    alertDialog.show();

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-27T15:07:32.610

这是一个很好的示例 - mkyong 的[http://www.mkyong.com/android/android-prompt-user-input-dialog-example](http://www.mkyong.com/android/android-prompt-user-input-dialog-example)。

密码提示的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Type Your Message : "
        android:labelFor="@+id/editTextDialogUserInput"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editTextDialogUserInput"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="textPassword" >

        <requestFocus />

    </EditText>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T20:55:38.173

尝试这个

```
 public class LoginToApp extends DialogFragment {

public static final String TAG = "LoginDialog";

public static LoginToApp newInstance() {
    LoginToApp login = new LoginToApp();
    login.setStyle(STYLE_NO_TITLE, 0);
    login.setCancelable(false);
    return login;
}

@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.dialog_login_to_app, container, false);

    final EditText passwordEditText = view.findViewById(R.id.dialog_login_password);
    Button loginButton = view.findViewById(R.id.dialog_login_loginBtn);

    loginButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            String password = passwordEditText.getText().toString();
            if (getActivity() != null) {
                CharSequence passwordFromShared;
                passwordFromShared = "Your password";

                assert passwordFromShared != null;
                if (password.contains(passwordFromShared) && password.length()==passwordFromShared.length()) {
                    LoginToApp.super.dismiss();
                } else {

                    //show some info when error

                }

            }
        }
    });

    return view;
} 
```

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:orientation="vertical">

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|center_horizontal|center"
    android:layout_marginBottom="10dp"
    android:background="@color/colorPrimary"
    android:foregroundGravity="center_vertical|center_horizontal|center"
    android:gravity="center_vertical|center_horizontal|center"
    android:padding="10dp"
    android:text="Login"
    android:textColor="#000000"
    android:textSize="12sp"
    android:textStyle="bold" />

<EditText
    android:id="@+id/dialog_login_password"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Password"
    android:inputType="textPassword" />

<Button
    android:id="@+id/dialog_login_loginBtn"
    style="@style/Widget.AppCompat.Button.Borderless"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:background="@color/colorAccent"
    android:fontFamily="sans-serif"
    android:text="login"
    android:textColor="#000000" /> 
```

将其用作：

```
 LoginToApp loginToApp = LoginToApp.newInstance();
        loginToApp.show(getSupportFragmentManager(),LoginToApp.TAG); 
```

# nsstring - UISegmentedControl 选定的段已更改

> ID：12683551
> 
> 赞同：0
> 
> 时间：2012-10-02T01:56:41.977
> 
> 标签：nsstring, uisegmentedcontrol

我有一个 UISegmentedControl，我想通过另一个视图控制器上的值以编程方式更改选定的段。我试图使用 NSString 但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:35:47.113

只需使用 NSUserDefaults。

将您的字符串保存在另一个视图控制器中的 NSUserDefaults 中，例如

```
 [[NSUserDefaults standardUserDefaults] setValue:@"first" forKey:@"uniquekey"]; 
```

然后在具有 UISegmentedcontroll 的视图控制器中创建 if 条件

首先从 nsuserdefaults 中获取 nsstring，例如

```
NSString *getstr = [[NSUserDefaults standardUserDefaults] objectForKey:@"uniquekey"]; 
```

然后使 if 条件

```
if([getstr isEqualToString:@"first"]
{
    segment first
}
else
{
    segment second
} 
```

# c# - 是否可以使 LINQ To XML 动态化？

> ID：12683556
> 
> 赞同：1
> 
> 时间：2012-10-02T01:56:58.730
> 
> 标签：c#, xpath, .net-4.0, linq-to-xml

动态可能不是这里这个词的最佳用法，但我将举一个例子来说明我的意思：

我有一些 XML 格式的配置文件，我需要访问这些配置文件的某些元素。现在，在代码中，我正在做类似的事情：

```
string serverName = elements.Element("Server").Value; 
```

`Server`如果仍然作为 的子元素，上述一切都很好`elements`，但如果它移动，我将不得不修改代码。我想到的一种解决方案是使用`XPATH`在运行时加载的某个文件中定义的表达式，如果我要查找的元素或属性发生更改，我不必更改代码，我只需要更改`XPATH`表达式。这是一种可行的方法还是有另一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:08:41.147

您可以使用 Descendants 在树中查找任何元素“服务器”元素。然而，当 Xml 更改时更改代码可能不是一件坏事——至少你知道你在读什么。如果您使用 Descendands，则无论更改是有意还是无意，您都将读取该值，这意味着您读取了其中恰好包含“Server”元素的任何 Xml 文档，这意味着您接受的 Xml 文件不必遵守任何结构/definitione（除非您有 xsd 强制执行）

# jquery - 如何压缩此代码？

> ID：12683564
> 
> 赞同：1
> 
> 时间：2012-10-02T01:58:26.323
> 
> 标签：jquery, html

编辑-抱歉，这很不清楚。我想将 id 放入多个悬停事件的 src 中。

```
$("#trig1").hover(
  function () { 
    $("#main").attr("src", "trig1.png");
  }, 
  function () {
    $("#main").attr("src", "4.png");
  }
);

$("#trig2").hover(
  function () {
    $("#main").attr("src", "trig2.png");
  }, 
  function () {
    $("#main").attr("src", "4.png");
  }
);

$("#trig3").hover(
  function () {
    $("#main").attr("src", "trig3.png");
  }, 
  function () {
    $("#main").attr("src", "4.png");
  }
);

html

<area id="trig1 2 3 etc.." shape="poly" alt="blah" coords="0,1,2,3,4,...">
<img src="4.png"> 
```

我一直在尝试类似的东西

```
$('area').each(function(e)
   {
    $(this).hover(
        function () { 
        $(e).attr("src", $(e).attr("id") + ".png"});
    }, 
    function () {
        $("#main").attr("src", "4.png");
    }); 
```

这不起作用，但我真的不明白我在做什么关于函数（e）。有没有一个像样的地方可以阅读这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:05:11.773

```
$('#trig1, #trig2, #trig3').hover(
  function () { $('#main').attr('src', this.id.substr(-1) + '.png'); }, 
  function () { $("#main").attr('src', '4.png'); }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:06:21.343

似乎您正在将`src`属性设置为`trig1`,`trig2`而`trig3`不是您`.png`的 s.

尝试：

```
$(e).attr("src", ($(e).attr("id").charAt(4) + ".png") }); 
```

**请注意，这是一个非常脆弱的实现，但您明白了，并且可能会找到一个更好的（基于正则表达式的？）。**

# javascript - 在幻灯片放映中加载数据时，Jquery 不起作用

> ID：12683567
> 
> 赞同：0
> 
> 时间：2012-10-02T01:58:35.183
> 
> 标签：javascript, jquery

我在我的 asp.net mvc 项目中使用[这个幻灯片。](http://tympanus.net/Tutorials/ElasticSlideshow/)

当我将模型数据放在我的页面中时，它运行良好，但是当我将其更改为从控制器获取的动态 JSON 数据时，它不起作用。

这是我简单的 html：

```
 <ul class="ei-slider-large">
     <li>
        <img src="../../Product/760557822400.jpg" alt="image05" style="margin-top: 2.467px;"/>
        <div class="ei-title">
           <h2>
              <span class="productName">Dell Lat E6320 Core W7P 13.3"HD BT WC</span>
              <span class="productPrice">$110.00</span>
           </h2>
           <h3>
              <span class="productSpec">

              <br />
              Dell Latitude E6320<br />
              Processor (2.8GHz, 4M Cache)<br />

              ....
              </span>
              <span style="position:relative; left:-20px; top: -21px;"><a href="#" id="readmore">Read more</a></span>
           </h3>
      </div>
    </li>
    //there are 5 <li> in this <ul>
   </ul> 
```

这是幻灯片的缩略图：

```
 <ul class="ei-slider-thumbs" style="position:relative; left:-12px;">
         <li class="ei-slider-element">Current</li>
         <li><a href="#"><span style="font-weight:bold;">DELL</span> <br /> Lat E6320 </a></li>
         <li><a href="#"><span style="font-weight:bold;">SONY</span> <br /> Lat E6320 </a></li>
         <li><a href="#"><span style="font-weight:bold;">LENOVO</span> <br /> Lat E6320 </a></li>
         <li><a href="#"><span style="font-weight:bold;">ACER</span> <br /> Lat E6320 </a></li>
         <li><a href="#"><span style="font-weight:bold;">APPLE</span><br /> Lat E6320 </a></li>
   </ul> 
```

现在我更改了简单数据以使用我的动态数据：

```
 function itemSlideShow(_pictureName10,_name,_price,_notes,_id,_depID,_catID) {
    var dotString = "";
    if (_notes.length < 120) {
       dotString = "";
    } else {
       dotString = " <br/> ....";
    }
    var listSlide = '<li>' +
                '<img src="../../Product/' + _pictureName10 + '" alt="Product" width="135px"/>' +
                '<div class="ei-title"><h2>' +
                '<span class="productName">' + TrimString(_name, 80) + '<br /></span>' +
                '<span class="productPrice"> $' + formatCurrency(_price) + '</span></h2>' +
                '<h3><span class="productSpec"><br />' + TrimString(_notes, 120) + dotString + '<br /></span>' +
                '<span style="position:relative; left:-20px; top: -21px;">' +
                '<a href="Products/ProductSpec/' + _id + '?dep=' + _depID + '&cat=' + _catID + '&tab=2" style="text-decoration:none;" id="readmore">Read more</a></span></h3></div>' +
                '</li>';

   return listSlide;
 }

 var smallLi = "";
 var url = '<%: Url.Content("~/") %>' + "Home/GetNewProduct";
 $.getJSON(url, function (newProduct) {
        var contentNewProduct = $("ul.ei-slider-large");
        var smallNewProduct = $("ul.ei-slider-thumbs");
        $.each(newProduct.ja, function (index, data) {
            var smallLi = $('<li><a href="#"><span style="font-weight:bold;">' +
                                            TrimStringAddNewLine((TrimString(data.Name, 12)).toUpperCase()) +
                                            '</span><br />' +
                                            '</a></li>');
            contentNewProduct.append(itemSlideShow(data.PictureName10,data.Name,data.Price,data.Notes,data.ID,data.DepartmentID,data.CategoryID));
            smallNewProduct.append(smallLi); 
      });
  }); 
```

`loading`当我使用此 jquery 附加数据而不是静态加载数据时，幻灯片被幻灯片放映的面板 卡住了。

谁能告诉我，我在这里怎么错了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:45:54.007

加载完所有内容后尝试初始化幻灯片。

我希望在块结束后立即在块`$(selector).eislideshow({...});`内看到一条语句。`$.getJASON()``$.each(...);`

# model-view-controller - 视图未读取当前会话

> ID：12683571
> 
> 赞同：0
> 
> 时间：2012-10-02T01:59:13.653
> 
> 标签：model-view-controller, jsp, session, jakarta-ee, servlets

这是我的 servlet，它创建会话并将 accessCount 存储到当前会话

```
@WebServlet("/ShowSession.do")
public class ShowSession extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException, ServletException {
        HttpSession session = request.getSession();

        String header;
        Integer accessCount  = (Integer)request.getAttribute("accessCount");

        if(accessCount == null){
            accessCount = new Integer(0);
            header = "Welcome New Comer";
        }else{
            header = "Welcome Back!";
            accessCount = new Integer(accessCount.intValue() + 1 );
        }

        //Integer is immutable data structure. so we cannot
        //modify the old one in-place,Instead, you have to
        //allocate a new one and redo setAttribute
        session.setAttribute("accessCount", accessCount);
        session.setAttribute("heading", header);
        RequestDispatcher view = getServletContext().getRequestDispatcher("/showsession.jsp");
        view.forward(request, response);
    }
} 
```

这是打印出该会话内容的视图

```
<body>
    <%
        HttpSession clientSession = request.getSession();
        String heading = (String) clientSession.getAttribute("heading");
        Integer accessCount = (Integer) clientSession
                .getAttribute("accessCount");
    %>
    <h1>
        <center>
            <b><%=heading%></b>
        </center>
    </h1>
    <table>
        <tr>
            <th>Info type</th>
            <th>Value</th>
        <tr>
        <tr>
            <td>ID</td>
            <td><%=clientSession.getId()%></td>
        </tr>
        <tr>
            <td>Creation Time</td>
            <td><%=new Date(clientSession.getCreationTime())%></td>
        </tr>
        <tr>
            <td>Time of last Access</td>
            <td><%=new Date(clientSession.getLastAccessedTime())%></td>
        </tr>
        <tr>
            <td>Number OF Access</td>
            <td><%=accessCount%></td>
        </tr>
    </table>
</body> 
```

问题是，即使我已经访问了很多次，它仍然返回我一个 accessCount == 0，

我在 localhost:8080/someFolderName/ShowSession.do 访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:01:24.777

您正在`accessCount`从请求中获得初始值。你应该从会话中检查它。

```
//Bad!
Integer accessCount  = (Integer)request.getAttribute("accessCount");
//Good (maybe)
Integer accessCount  = (Integer)session.getAttribute("accessCount"); 
```

# python - 如何在python中删除列表的后端？

> ID：12683576
> 
> 赞同：2
> 
> 时间：2012-10-02T01:59:59.940
> 
> 标签：python, list, range

因此，对于部分课程，我有来自`txt`文件的给定输入。基本上，我可以给出的输入字符串类似于

```
listy = ["Miko's Lounge", '41.2', '56.7', '99th Ave, NY', '3', '4', '5', '2'] 
```

我需要对此输入做的是删除地址，并将列表末尾的数字放入列表中自己的列表中，就像这样。

```
["Miko's Lounge", '41.2', '56.7', ['3', '4', '5', '2'] ] 
```

我知道我可以使用删除地址`listy.pop(3)`。但是字符串末尾的数字可能会有所不同！这些代表星级，有些地方的星级比其他地方多。是否可以从列表中的某个特定点删除所有索引，例如函数`slice()`之类的？

我一直在尝试使用该`range`函数使用 for 循环，但它似乎无法正常工作（或者我期望它如何）。

```
listy = ['1', '2', '3', '4', '5']

for i in range( 2 , len(listy)-1 ):
    listy.pop(i)

print listy 
```

我得到的输出是：

```
['1', '2', '4'] 
```

当我试图从以下方面获得更多信息时：

```
['1', '2'] 
```

为什么`'4'`里面是随机的？我不明白这个范围的事情！我想念带有简单 for 循环的 java -_-

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T02:02:44.093

您可以使用[列表切片](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)轻松地做到这一点：

```
>>> listy[:3]+[listy[4:]]
["Miko's Lounge", '41.2', '56.7', ['3', '4', '5', '2']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:05:33.760

试试看：

```
listy = ["Miko's Lounge", '41.2', '56.7', '99th Ave, NY', '3', '4', '5', '2']
l = listy[:3]
l.append(listy[4:])
l 
```

给你：

```
["Miko's Lounge", '41.2', '56.7', ['3', '4', '5', '2']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:12:29.970

您可能应该已经阅读过 List 的文档：http: [//docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

但是，我也没有看到您正在寻找的语法。

我认为您想要的是替换通用容器方法“切片”的两部分索引语法

python寻址子列表的方式是

```
myListInstance[start:end] //<-- note the colon 
```

更多信息：

[http://docs.python.org/tutorial/datastructures.html#the-del-statement](http://docs.python.org/tutorial/datastructures.html#the-del-statement)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-02T13:25:25.810

首先，您的列表`listy`有五个元素。当您删除索引 2 元素时，剩下 4 个元素并且 len(listy) 返回 4 因此 listy[3] 被删除。因此你有`[1,2,4]`. 我希望你明白结果是怎么来的。调整

```
for i in range(3):
    listy.pop(len(listy)-1)
print listy 
```

# java - 使用 netbeans 创建的 JFrame 在设计窗口中看起来不错，但在我运行它时却搞砸了

> ID：12683578
> 
> 赞同：1
> 
> 时间：2012-10-02T02:00:18.213
> 
> 标签：java, swing, layout, netbeans, layout-manager

我一直在使用 netbeans 设计器模式设计应用程序。一直很顺利，但是有个问题：我设计的时候布局很好看，但是运行程序就乱七八糟了，大家可以对比一下。

如您所见，它在设计器窗口中看起来很好并且对齐良好：

![设计视图](../Images/17a97a49dd5596b35c80a1762277f3bf.png)

但是，当我运行程序时，对齐变得一团糟

![跑](../Images/0087776608ffc3d67376440636f34338.png)

每个标签和 jTextField 都位于一个小的单独面板中，以使某些事情变得更容易。

我想知道如何防止这种情况发生，谢谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T02:27:25.847

The short answer, don't use the "free form layout", it gets screwy real quickly.

Use instead something like `GridBagLayout`.

Layout each separate group it's own pane and drag them into the master pane.

# excel - For 循环中的运行时错误 13

> ID：12683579
> 
> 赞同：1
> 
> 时间：2012-10-02T02:00:18.520
> 
> 标签：excel, vba, declaration, runtime-error

出于某种原因，当我执行以下代码时出现“运行时 13”错误。

```
Dim N_1 As Variant

Worksheets("Trucks").Activate
Range("G9").Activate

Do Until ActiveCell.Value = ""
ActiveCell.Offset(1, 0).Select
If ActiveCell.Value = "" Then Exit Do
Loop

ActiveCell.Offset(-1, 0).Select
N_1 = Range(ActiveCell, "G9")

With CreateObject("scripting.dictionary")
    .comparemode = vbTextCompare
    For Each v1 In N_1
        If Not IsEmpty(v1) Then
            If Not .exists(v1) Then .Add v1, Nothing
        End If
    Next
    z1 = .keys
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:11:27.780

`Range(...)`返回一个对象类型，所以`Set`必须使用：

`Set N_1 = Range(ActiveCell, "G9")`

* * *

虽然`Range(...)`确实返回一个对象类型，但将其分配给 a`Variant`而不使用`Set`会生成该范围内单元格值的 2D 变体数组。这适用于`For Each v1 in N_1`零件和`IsEmpty(v1)`零件。

因此，我不是 100% 确定你为什么首先得到错误 13（假设`v1`and`z1`也被声明为`Variant`）。实际上，如果您使用`Set`，您还必须更改填充字典以使用的循环，`v1.Value`而不仅仅是`v1`

如果您随后使用`N_1`并期望它是一个`Range`对象，那么这将解释一些事情，但是如果所有内容都声明为 a ，那么上面显示的代码对我来说运行正常`Variant`：

![Excel 屏幕截图显示问题中的代码运行没有错误](../Images/a123e9f1949a058cdc64c77ee4447c10.png)

# asp.net-mvc-3 - 已修复多对多关系，列名无效已修复

> ID：12683581
> 
> 赞同：0
> 
> 时间：2012-10-02T02:00:27.400
> 
> 标签：asp.net-mvc-3, many-to-many

我在房屋和租户之间有多对多的关系。我有点困惑如何全部解决，调试器说我的列名是
Tenants_TenantID 但不是，它的 TenantID ？

我的错误

{"无效的列名 'Tenants_TenantID'。\r\n无效的列名 'House_HouseID'。"}

我的错误来自哪里

```
 @using (Html.BeginForm("AddRole", "Role", new { houseId = @Model.HouseID }))
 {
        <table>
        <tr>
            <td>Select to Add Item</td>
            <td>
               <div class="editor-field">
              @Html.ListBoxFor(model => model.TenantID, ((IEnumerable<FlatSystem.Models.Tenants>)ViewBag.TenantLookupList).Select(option => new SelectListItem
                {
                 Text = Html.DisplayTextFor(_ => option).ToString(),
                 Value = option.TenantID.ToString(),
                 Selected = (Model != null)
                 }), "Choose...")

              </div>
            </td>
           <td><input type="submit" value="Add" /></td>
        </tr>
        </table>
 } 
```

固定的

我通过更新我的 DBContext 文件解决了这个问题。

我犯了一个简单的错误，错过了我的多对多关系的第三张表的 DbSet

# java - 如何在 RAD eclipse 中指向其他 JAVA 版本

> ID：12683582
> 
> 赞同：1
> 
> 时间：2012-10-02T02:00:33.417
> 
> 标签：java, eclipse, generics, ibm-rad

我看到以前有人问过这个问题，但情况与我的情况不同。无论如何，最初我的 RAD 使用的 Java 版本是 1.3，我最初也将我的 JAVA_HOME 指向位于此处的 1.3：C:\IBM\SDP70\jdk

现在我将我的 JAVA_HOME 更改为：C:\Java\jdk1.6.0_34 并将我的 CLASSPATH 更改为：C:\Java\jdk1.6.0_34\bin 并将 CLASSPATH 添加到我的 PATH 中。

所以，当我在 cmd 中检查我的 java 版本时，它是 1.6。这些信息可能不相关，但我还是说了。

至于RAD的eclipse，在preferences > Java > Compiler下：

```
*JDK Compliance
Compiler compliance level: 6.0
checked - Use default compliance settings
Generated .class files compatibility is 6.0* 
```

对于已安装的 JRE：

```
*checked - Java 1.6 Location - C:\Java\jdk1.6.0_34* 
```

抱歉，我还不能在这里粘贴图片。

但是当我使用泛型运行我的程序时，我仍然收到了这个问题。

```
C:\IBM\SDP70\runtimes\base_v61\profiles\AppSrv01\temp\SGSETSCIMPB501Node01\server1  
\cimwebEAR\cimweb.war\prodctl\_login.java : 91 : The type List is not generic; it 
cannot be parameterized with arguments <Map>JSPG0091E: An error occurred at line: 22 
in the file: /prodctl/login.jspJSPG0093E: Generated servlet error from file: /prodctl
/login.jsp 

C:\IBM\SDP70\runtimes\base_v61\profiles\AppSrv01\temp\SGSETSCIMPB501Node01
\server1\cimwebEAR\cimweb.war\prodctl\_login.java : 91 : Syntax error, parameterized 
types are only available if source level is 5.0 
```

我认为它仍然指向1.3，我现在不知道如何更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:22:29.567

不知道**RAD**。但是，如果 RAD 内置在 Eclipse 之上，那么您应该尝试几件事

1.  检查你的[eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)文件。您可以在 ini 文件中指定**VM 。**例如

    -vm C:\IBM\SDP70\jdk

2.  如果您的日食给您带来问题，第 1 点是解决方案。但它实际上是eclipse正在使用的编译器。所以你必须做两件事。

3.  首先，Preference > Java > Installed JRE > (Add new JDK) > (Standard VM 1.x) something > 并指向您的 IBM JDK

4.  然后转到您的项目构建路径并确保您的构建选项卡中的 JAVA 库设置为您的 IBM JAVA SDK

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:14:02.213

您可以检查几件事：

1.  检查 eclipse.ini 中的 -vm 参数。它可以指定不同的 VM。但是，这只是用于启动 eclipse 的虚拟机，不一定是用于您的项目的虚拟机。
2.  检查您的 Preferences -> Installed JREs 是否将 1.6 jdk 设置为默认值
3.  检查项目的构建路径库（您可能将另一个 JRE 用作项目 JRE）
4.  您没有指定这是否是一个 Maven 项目。如果是这样，您的 pom.xml 中可能有一些设置指定它是 1.3 JRE

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T02:14:09.543

IBM RAD Developer 基本上是 Eclipse-on-steroids。

您应该能够通过更改 Preferences > Java > Installed JREs 来更改您的 Java

我目前没有我的 RAD Developer 副本，所以恐怕我无法为您提供更多帮助。

'希望有帮助...

# ruby-on-rails - 如何在搜索结果中访问 sphinx_select？

> ID：12683584
> 
> 赞同：0
> 
> 时间：2012-10-02T02:00:52.183
> 
> 标签：ruby-on-rails, thinking-sphinx

我正在使用thinking sphinx，带有sphinx_select 参数来创建一个动态字段，如下所示：

```
@subjects = Subject.search(sphinx_select: "*, petals < 1 or color = 2 as my_attribute") 
```

有没有办法`custom_attribute`在搜索结果中访问？例如：

```
@subjects.each do |s|
    s.my_attribute
end 
```

退货

```
undefined method `my_attribute' for #<Subject:0x007fb25cdcdb18> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:49:59.340

在思考的狮身人面像源中进行了一些挖掘并弄清楚了这一点。动态属性存储在一个`match`对象中，可以像这样访问它：

```
@subjects.each_with_match do |s, match|
    match[:attributes]["my_attribute"]
end 
```

# testing - 使用 angularjs 模拟而不实际模拟任何东西

> ID：12683586
> 
> 赞同：8
> 
> 时间：2012-10-02T02:00:58.880
> 
> 标签：testing, angularjs, jasmine

我正在为我们的应用程序编写一些测试，并且我已经包含了 angularjs-mocks.js，所以我可以使用它附带的不错的 dsl 函数。

但我不想实际模拟 $http 请求，因为我正在将此应用程序与不断变化的客户端后端集成，并且我想针对真实响应进行测试。

在这种情况下使用真正的 http 后端的最佳（最简单）方法是什么？

**编辑：**

我找到了一个潜在的解决方案，那就是使用它：

```
$httpBackend.whenPOST(/.*/).passThrough() 
```

但正如我在下面提到的，它不工作，可能坏了？我收到此错误：

```
Error: Unexpected request: POST /some/url/here No more request expected 
```

我在这里打开了一个问题：[https ://github.com/angular/angular.js/issues/1434](https://github.com/angular/angular.js/issues/1434)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:40:38.263

我想出了一个快速而肮脏的解决方案：注释掉 $httpBackend 被覆盖的行（angular-mocks-1.0.2.js 中的 1365）。

```
angular.module('ngMock', ['ng']).provider({
  $browser: angular.mock.$BrowserProvider,
  $exceptionHandler: angular.mock.$ExceptionHandlerProvider,
  $log: angular.mock.$LogProvider,
  //$httpBackend: angular.mock.$HttpBackendProvider,
  $rootElement: angular.mock.$RootElementProvider
}).config(function($provide) {
  $provide.decorator('$timeout', function($delegate, $browser) {
    $delegate.flush = function() {
      $browser.defer.flush();
    };
    return $delegate;
  });
}); 
```

这可能会破坏其他东西，但它可以让我测试我需要测试的内容，并且不会影响生产应用程序，所以我没问题。希望将来会有一种内置的方法来做到这一点。

# matlab - 如何去除信号中的噪声？

> ID：12683594
> 
> 赞同：-1
> 
> 时间：2012-10-02T02:01:59.707
> 
> 标签：matlab, signal-processing, decoder, dtmf, noise-reduction

我整个星期都在试图解决这个问题。我的主要问题是将声音与信号中的噪声分开（参见绘图示例：

![在此处输入图像描述](../Images/ef6c64e6c7f79934170ca70b13b2faac.png)

在这些小噪音之间是 dtmf 音调。一旦我得到音调的起点和终点的索引，转换它们就很容易了。

我们应该如何准确地确定噪音是开始还是开始？每个噪音都可以有不同的长度，并且在实际声音中会有很多突然的下降。我理解采取小块的概念，但是我们如何比较它们以确定声音中的噪音。我们可以通过比较一个索引在某个数字下连续多长时间来消除沉默吗？我不知道如何开始这个问题。

```
function [phone_number,ERROR] = cjm274_dtmf_number(dtmf_signal,fs)
Input:
% dtmf_signal - samples of the input waveform
% fs - sampling frequency
% Output:
% phone_number - string of characters representing a phone number
% ERROR - set to zero if phone_number does not represent a valid
% phone number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:18:45.010

由于您对所需信号的了解比对噪声的了解更多，因此通常认为过滤和传递所需信号更容易，并在将其从噪声中滤除后确定该信号的开始和停止。例如，您可以尝试一组窄带滤波器，每个滤波器都围绕一个 DTMF 频率。

# html - 如何实现多行弹性框？

> ID：12683595
> 
> 赞同：33
> 
> 时间：2012-10-02T02:02:00.490
> 
> 标签：html, css, layout, flexbox

尽管我在谷歌上搜索，但我发现很少有关于如何实现多行 flexbox 的示例。我从示例中获得的代码都没有工作。我在一个 flexbox 中有三个元素，我希望第一个元素位于顶部，第二个和第三个元素位于底部一行。

```
<div class="flexbox">
  <div id="element1">element 1</div>
  <div id="element2">element 2</div>
  <div id="element3">element 3</div>
</div> 
```

我试过使用这些属性：

```
.flexbox {
  width: 300px;
  display: box;
  display: -webkit-box;
  display: -moz-box;
  box-lines: multiple;
  flex-wrap: wrap;
}

#element1 {
  width: 100%;
} 
```

并给它一个设定的宽度，但它仍然不会换行，即使第一个元素的宽度为 100%。我是否缺少某些供应商前缀或者我的语法错误？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-02T20:27:58.603

弹性盒规范在过去几个月发生了[变化，您使用的是旧语法。](http://www.w3.org/TR/css3-flexbox/)我认为新规范目前仅在 Chrome Canary 中实现，并且在某种程度上在最新的 chrome 中实现。（这有点错误）box-lines multiple 已经消失了，所以要实现这种垂直布局有几种方法。使用 -webkit-flex-direction:column; 所以

```
<div id="flexbox">
    <div class="box">DIV 1</div>
    <div class="box">DIV 2</div>
    <div class="box">DIV 3</div>
</div> 
```

和CSS：

```
#flexbox {
    display: -webkit-flex;
    -webkit-flex-direction: column;
    width: 500px;
    height: auto;
    min-height: 200px;
}

#flexbox .box {
    -webkit-flex: 1;

} 
```

使用包装：

```
-webkit-flex-wrap: wrap; 
```

并将您的方向设置为：

```
-webkit-flex-direction: row; 
```

所以

```
<div id="flexbox">
    <div class="box">DIV 1</div>
    <div class="box">DIV 2</div>
    <div class="box">DIV 3</div>
    <div class="box">DIV 4</div>
    <div class="box bigger">DIV 5</div>
    <div class="box">DIV 6</div>
</div>

#flexbox {
    display: -webkit-flex;
    -webkit-flex-direction: row;
    -webkit-flex-wrap: wrap;
    width: 500px;
    height: auto;
    min-height: 200px;
    }

#flexbox .box {

    -webkit-flex: 130px 1;

    }

#flexbox .box.bigger {

    -webkit-flex: 330px 1;

    } 
```

上面链接的规范页面上有一大堆示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T11:27:36.070

使用`flex-direction`属性。

```
.container {
  flex-direction: row | row-reverse | column | column-reverse;
} 
```

参考以下文章： http: [//fend-tricks.com/flexbox-intro/](https://web.archive.org/web/20171214034957/http://fend-tricks.com/flexbox-intro/)

# php - 解析 html 以检索标签

> ID：12683600
> 
> 赞同：-1
> 
> 时间：2012-10-02T02:02:44.497
> 
> 标签：php, html, parsing, tags

> **可能重复：**
> [计算页面中的所有 HTML 标签 PHP](https://stackoverflow.com/questions/3184284/count-all-html-tags-in-page-php)
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我在解析信息以检索 HTML 文档中使用的 html 和元标记列表以及每个标记在文档中出现的次数时遇到问题。

因此，例如，如果我有以下 html 文档

```
 <head>
 <a href="example.com">example1</a>
 <a href="example.com">example2</a>
 <a href="example.com">example3</a>
 </head> 
```

然后你会得到一个类似的列表

```
head tag =1
a tag =3 
```

我正在尝试用 php 来做这件事，如果有人能给我一个很好的起点的话。

编辑：我正在尝试复制类似以下 python 代码但使用 php

```
 class MyHTMLParser(HTMLParser):
  def handle_starttag(self, tag, attrs):
  print "Encountered a start tag:", tag
  def handle_endtag(self, tag):
  print "Encountered an end tag :", tag
  def handle_data(self, data):
 print "Encountered some data  :", data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:04:57.860

请参阅[http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)以解析 PHP 中的 DOM（例如，从方法[http://www.php.net/manual/en/domdocument.loadhtml .php](http://www.php.net/manual/en/domdocument.loadhtml.php)）。有关任何其他 API，另请参阅[http://www.php.net/manual/en/book.dom.php](http://www.php.net/manual/en/book.dom.php)。

# sql - 在插入语句 SQL Server 2005 之前添加 N' 字符

> ID：12683602
> 
> 赞同：0
> 
> 时间：2012-10-02T02:02:58.117
> 
> 标签：sql, sql-server

我有一个需要帮助的问题，请给我一个建议。我想通过以下语句将数据库从一台 Oracle 服务器插入到 SQL 服务器：

```
SELECT * INTO ABC_temp SELECT * FROM DIM_PROVINCE 
```

在 DIM_PROVINCE 和 ABC_temp 有 3 列：，`PROVINCE_ID`问题 是它不能显示越南语。在网上搜索帮助后，大家都表明我必须在INSERT语句之前使用N'字符。那么，我该如何替换此语句。`PROVINCE_NAME``NOTE`

```
INSERT INTO ABC_temp values (N’abc,N’abc,N’abc) 
```

通过以下声明：

```
SELECT * INTO ABC_temp SELECT * FROM DIM_PROVINCE 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:24:04.350

I don't think you need to.

The `'N'` is used to denote that the string is a unicode literal, so if the datatype in Oracle is unicode as well, there may not be a need to convert (SQL Server does an implicit conversion from `VARCHAR` to `NVARCHAR`).

Otherwise, you can cast the values (see [CAST and CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:25:54.843

You put the N outside the single quotes.

```
INSERT INTO ABC_temp values (N'abc', N'abc', N'abc') 
```

The SQL statement should follow the syntax:

```
insert into ABC_temp
select * from DIM_PROVINCE 
```

(In SQL Server, this is how you do it. I'm not sure about the syntax in Oracle.)

# objective-c - 初始化 NSMutableArray 的正确方法

> ID：12683604
> 
> 赞同：2
> 
> 时间：2012-10-02T02:04:15.287
> 
> 标签：objective-c, ios, nsmutablearray

我有一个 ivar，它是一个`NSMutableArray`. 我见过一些人使用这个函数来初始化一个数组：

```
- (NSMutableArray *)varArray
{
   if (!varArray)
      varArray = [[NSMutableArray alloc]init];

   return varArray;
} 
```

并且该数组在`dealloc`.

当我尝试这样做时，有时数组会被初始化，有时不会。

所以我要问的是，这是初始化 ivar 的好方法`NSMutableArray`，还是这样做更好：`varArray = [[[NSMutableArray alloc]init]autorelease];`而不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:16:20.980

这样做：

`varArray = [[NSMutableArray alloc]init];`

总是很好，但是在哪个功能中很重要。看来您正在变量的设置器中对其进行初始化，因此无论何时查询该实例变量，它都应该始终存在……理论上。但是，如果您只是解除分配 ivar 而不将其设置为 nil，则可能会出现问题，因此以下将显式重置 ivar 指针，以便在解除分配时保证它为 nil：

```
[varArray dealloc];
varArray = nil; 
```

这将确保您的`if (!varArray)`支票是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:43:43.267

> 所以我要问的是，这是初始化 ivar NSMutableArray 的好方法吗

**不。**

只需实现对象的指定初始化程序并在那里初始化数组：

```
- (id)init
{
  self = [super init];
  if (0 == self)
    return 0;
  varArray = [NSMutableArray new];
  return self;
} 
```

# postgresql - PostgreSQL 中数据库操作的复杂性？

> ID：12683609
> 
> 赞同：8
> 
> 时间：2012-10-02T02:04:59.020
> 
> 标签：postgresql

有没有人有一个指南来计算 postgresql 中各种操作的复杂性？例如选择、连接（在 from 与 where 中）、分组、聚合、笛卡尔积等？

我正在寻找大 O 表示法的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T03:32:20.963

您所要求的不存在也不可能存在，因为操作类型和复杂性之间没有 1:1 的关系。例如，考虑一个基本的选择操作。这可以映射到各种计划中，并且计划者就每个计划的估计复杂性做出决定。例如，假设我们：

```
CREATE TABLE my_index_test (id int primary key); -- creates an index too!
EXPLAIN ANALYZE SELECT * FROM my_index_test where id = 0;

                                            QUERY PLAN                      

--------------------------------------------------------------------------------
---------------------------
Seq Scan on my_index_test  (cost=0.00..34.00 rows=2400 width=4) 
    (actual time=0.003..0.003 rows=0 loops=1)
  Total runtime: 0.045 ms
 (2 rows) 
```

现在，在这种情况下，计划者决定（正确地）使用索引是不必要的复杂性。因此，即使是一个简单的查询也有多种可能性，PostgreSQL 会根据它所知道的情况尝试选择最不复杂的计划。

一个例外是提交和回滚都具有 O(1) 复杂度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-19T20:09:35.560

答案取决于索引的质量。通常具有二进制块大小。如果没有索引，搜索是`O(n)`. 如果是索引，搜索是`O(log n)`. 您还可以设置要在哪个索引中使用哪个数据结构。例如，这里将 B-tree 作为部分索引的方法，[以及这里](https://en.wikipedia.org/wiki/B-tree)[对于](http://www.postgresql.org/docs/9.0/static/sql-createindex.html)二元操作的不同操作的复杂性：

```
 Average     Worst case
Space   O(n)        O(n)
Search  O(log n)    O(log n)
Insert  O(log n)    O(log n)
Delete  O(log n)    O(log n) 
```

做简单的测试。底层块大小影响对数速度，关于它我有一个线程[B-tree 的部分索引的块大小是多少？](https://dba.stackexchange.com/q/111603/69807)因为`log_b n`是对数的事情是如何完成的，这使得操作比默认的二进制操作更快，但可能会在空间上产生一些成本（不知道如何在那里呈现它）：

```
 Average     Worst case
Space   O(n)        O(n)         % not sure about this here
Search  O(log_b n)  O(log_b n)
Insert  O(log_b n)  O(log_b n)
Delete  O(log_b n)  O(log_b n) 
```

# android - android中圆圈背景内的图像？

> ID：12683616
> 
> 赞同：0
> 
> 时间：2012-10-02T02:05:46.383
> 
> 标签：android, background, uiimageview

我需要加载图像，但是当我加载图像时，它不应该是方形/矩形，而是圆形。所以我想要圆圈中的图像，边框应该是白色的。如何以圆形/椭圆形加载图像。我尝试使用形状 = 椭圆和渐变 = 270 创建背景，并将图像视图的背景设置为该形状。我还能如何设置 imageview 的背景。

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
    <gradient android:startColor="#FFFF0000" android:endColor="#80FF00FF"
            android:angle="270"/>
</shape> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:41:11.580

[如何制作带圆角的 ImageView？](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners)

解决了我的问题。我需要在位图图像周围有一个白色边框，现在弄清楚:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:11:08.907

创建一个中心有圆圈的图像。那个圆圈应该是透明的。

将此图像层放在您的图像上:)

相对或 FrameLayout 将为此工作。

# asp.net-mvc - 如何使用此咖啡脚本类正确加载 Facebook javascript SDK，并使其可用于同一页面上的多个 facebook 功能？

> ID：12683618
> 
> 赞同：1
> 
> 时间：2012-10-02T02:06:12.080
> 
> 标签：asp.net-mvc, facebook-javascript-sdk

MyNamespace.Facebook.coffee：

```
namespace 'MyNamespace', (exports) -> 
    exports.FacebookAPILoader = class 

        constructor: (@appId, @channelFileUrl) -> 
            @init()

        init: (fbAPILoadedCallback) -> 
            #FB triggers/calls window.fbAsyncInit() after the API javascript loads: 
            window.fbAsyncInit = () => 
                @initFb()
                fbAPILoadedCallback() if fbAPILoadedCallback?
                return
            @loadAPI()

        loadAPI: () -> 
            ((d) ->
                id = 'facebook-jssdk'
                ref = d.getElementsByTagName('script')[0]
                return if d.getElementById id

                js = d.createElement 'script'
                js.id = id
                js.async = true
                js.src = "//connect.facebook.net/en_US/all.js"
                ref.parentNode.insertBefore js, ref
            )(document)

        # Set app specific settings here: 
        initFb: () -> 
            fbConfig = 
                appId: @appId
                channelUrl: @channelFileUrl
                status: true
                cookie: true
                xfbml: true
            FB.init fbConfig 
```

这就是我在视图中加载 api 的方式： //MyView.cshtml:

```
@using (Script.Foot()) {
    var settingsReader = new System.Configuration.AppSettingsReader();
    var facebookAPIAppId = settingsReader.GetValue("Facebook_API_AppId", typeof(string));
    var hostName = settingsReader.GetValue("EnvHostname", typeof(string));

<script type="text/javascript">
    var myFb;
    $(document).ready(function () {
        myFb = new MyNamespace.FacebookAPILoader(
            '@Html.Raw(facebookAPIAppId)'
            , '//@Html.Raw(hostName)/modules/myapp/channel.html'
        );
    });
</script>
} 
```

`</body>`Jquery 在结束标记之前加载。我有两个问题：

1.  我在这里加载它的方式有什么问题吗？我相信它会在 jquery 触发文档“就绪”事件后异步加载——对吗？有没有一种性能更好的方法？

2.  设置此模块以便我可以传入将在 fbAsyncInit() 中执行的任意回调的最佳方法是什么？我在 CMS (Orchard) 驱动的网站中使用它，并且我可能在同一个 HTTP 请求中有多个视图，希望添加它们自己的自定义回调，这些回调应该作为 fbAsyncInit() 的一部分运行。我该如何做到这一点？我知道我可以只传入一个回调数组，但我不确定的部分是如何确保给定页面上的所有不同功能都可以反映他们的 Facebook 相关代码是什么，以及如何确保FacebookAPILoader.init() 仅在所有这些 FB 小部件的回调和 DOM 元素并且一切都准备好与之交互之后运行。

**更新：** 我想我会以与谷歌分析异步跟踪`_gaq`对全局命名空间中的变量相同的方式执行此操作。任何需要 Facebook API 交互的代码都可以将回调推送到 _gaq 样式队列中，FacebookAPILoader 模块将在准备好时拉出该队列。这是一种天真的方法吗？*在调用fbAPILoadedCallback* ()之后，我的代码是否会尝试添加到 _gaq 样式队列中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:22:41.680

我发现[了这个](http://english.orchardproject.hu/blog/the-event-extensible-javascript-jquery-pattern)，我认为这是迄今为止我遇到的这个问题的最佳解决方案。比`_gaq`样式队列更容易实现，只要你不介意依赖 jQuery。

# hadoop - Pig的Python UDF：数据类型转换错误

> ID：12683625
> 
> 赞同：0
> 
> 时间：2012-10-02T02:07:07.337
> 
> 标签：hadoop, user-defined-functions, apache-pig

我正在使用 Python UDF，它在减少阶段会导致错误。

```
java.lang.ClassCastException: java.lang.Double cannot be cast to org.apache.pig.data.DataByteArray 
```

这是 UDF 的代码：

```
import math
outputSchema("score:double")
def confidenceLowerBound(numerator, denominator, constant):
    raw_score = numerator * 1.0 / denominator
    normalized_interval = math.sqrt( raw_score * (1 - raw_score) / denominator )

    wilson_score = raw_score - constant * normalized_interval
    return wilson_score 
```

这就是我在 pig 中调用 udf 的方式。

```
register 'confidence_interval_compute.py' using jython as pyutils;
...
..
A = FOREACH A GENERATE $0, $1, $2, $3, $4, pyutils.confidenceLowerBound($3, $4, 4) AS score PARALLEL 20; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:26:00.633

正如@Ian Stevents 在评论中指出的那样，这是因为您在装饰器中有错字。

你应该使用

```
@outputSchema("score:double") 
```

# postgresql - Liquibase：关系“databasechangeloglock”已经存在，使用 grails 插件和非默认模式

> ID：12683626
> 
> 赞同：8
> 
> 时间：2012-10-02T02:07:26.083
> 
> 标签：postgresql, grails, database-migration, liquibase

我正在使用 grails 2.0.3、数据库迁移（liquibase）插件 1.1 和 postgres 9.1。

我看到我认为这些其他用户描述的相同问题，但有皱纹：

*   [使用 maven 和 postgres-db 运行 liquibase 的问题](https://stackoverflow.com/questions/4995341/problem-running-liquibase-with-maven-and-postgres-db)
*   [https://liquibase.jira.com/browse/CORE-183](https://liquibase.jira.com/browse/CORE-183)
*   [其他参考被删除，没有足够的声誉:(]

皱纹是这样的：

1.  我正在使用 grails 和数据库迁移插件。
2.  生产数据库不使用默认模式。
3.  我**必须**在启动时使用自动数据库迁移 (grails.plugin.databasemigration.updateOnStart = true)，因为没有开发人员可以访问实际的生产数据库。

我对这个问题的理解是，liquibase 正在检查默认模式是否存在其维护表，然后尝试在正确的位置（非默认模式）创建表。但当然，它们在第一次执行后就已经存在。通过指定命令行选项似乎有一种解决方法，但我没有该选项，因为需要在部署的 grails 应用程序中自动运行。

有没有办法让数据库迁移插件做我需要的？告诉 DBA 以不同方式组织模式不是一种选择。

在此先感谢，雷 A. 康纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-02-04T19:11:16.277

对我来说，这是缺少的所有者权利。这样，登录用户就无法找到该表，但也无法创建它，因为它在那里。

我的解决方法是将所有者更改为正确的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T19:18:13.690

Preconditions and refactoring commands take an attribute schemaName.

```
<tableExists schemaName="myschema" tableName="..."/>
<createTable schemaName="myschema" tableName="..."/> 
```

You can also parametrize it:

```
<databaseChangeLog ..>
  <property name="schema.name" value="myschema"/>
  ....
  <changeset ...>
    <createTable schemaName="${schema.name]" tableName="..."/>
  </changeset>
</databaseChangeLog> 
```

For Liquibase itself, you can set defaultSchemaName, in your case (Grails) this should be:

```
grails.plugin.databasemigration.updateOnStartDefaultSchema 
```

# python - Tastypie：将元代码添加到 dispatch_list

> ID：12683630
> 
> 赞同：0
> 
> 时间：2012-10-02T02:08:04.593
> 
> 标签：python, django, api, rest, tastypie

如何`dispatch_list`在 Tastypie 中添加自定义字段（在本例中为元代码）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T15:54:00.807

恕我直言，更好的方法是在做出响应之前使用函数来覆盖/添加字段到数据：

```
 def alter_list_data_to_serialize(self, request, data):
        data['meta']['current_time'] = datetime.strftime(datetime.utcnow(), "%Y/%m/%d") 
        return data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:35:31.887

您可以向资源添加一个新字段并使用 dehydrate_field_name() 对其进行脱水。

# c# - 如何使用作为工具条项的子项的项？

> ID：12683637
> 
> 赞同：0
> 
> 时间：2012-10-02T02:08:56.350
> 
> 标签：c#, toolstrip

好的，所以这有点令人困惑，所以请耐心等待。

我有一个名为“下载”的工具条项目。当（这是 100% 随机）添加新项目时（它发生在我无法控制的网站时）。我希望能够一次读取“下载”子集中的每个项目（所以它是 this.ToolStrip.Downloads.ITEM），并使用它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:39:04.560

从图像中可以看出，您正在将下载项目添加到 ToolStripMenuItem。ToolStripMenuItem 具有**DropDown**属性，该属性又具有**Items**集合属性。您可以使用与任何其他相同的项目集合来添加、删除等您的下载。

```
Downloads.DropDown.Items.Add("A File"); 
```

# android - 我无法在 eclipse 4.2.1 中配置 ADT 插件（在 Mac OS X 10.5.8 上）

> ID：12683638
> 
> 赞同：3
> 
> 时间：2012-10-02T02:09:03.650
> 
> 标签：android, eclipse, macos, adt

我曾多次尝试卸载并重新安装 eclipse（和 android sdk）。我正在尝试安装 ADT 插件来开发一个 android 应用程序。下载 ADT 插件并重新启动 eclipse 后，我无法配置插件。错误日志如下所示：

错误日志说：

```
Unable to find Action Set: adt.actionSet.lint
Unable to find Action Set: adt.actionSet.avdManager
Unable to find Action SEt: adt.actionSet:refactorings
Unable to find Action SEt: adt.actionSet.wizards
System property http.nonProxyHosts has been set to local|*.local|102...by an external source. This value will be overwritten using the values from the preferences. 
```

我已经读到我的工作区可能有问题，但是我很确定在重新安装之前我已经删除了与 eclipse 和 android sdk 有关的所有内容。似乎由于某种原因我无法摆脱我的旧工作区，尽管我不能 100% 确定这是这里的问题。

我一直在努力解决这个问题一个星期，但没有运气。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:51:50.633

Now, at this year (2013) you can try to download Android Studio, [https://developer.android.com/sdk/installing/studio.html](https://developer.android.com/sdk/installing/studio.html)

# javascript - 这个 JS 单例模式如何/为什么起作用？

> ID：12683644
> 
> 赞同：7
> 
> 时间：2012-10-02T02:09:49.007
> 
> 标签：javascript, constructor, singleton, this

我遇到了一种相当有趣的方法来创建一个可以用`new`关键字实例化的 JavaScript 单例，例如`var x = new SingletonClass()`. 我对变量范围和闭包等有很好的掌握，但我很难理解为什么这段代码会以它的方式工作。

```
// EDIT: DO NOT USE this code; see the answers below
function SingletonClass() {
  this.instance = null;
  var things = [];

  function getInstance() {
    if (!this.instance) {
      this.instance = {
        add: function(thing) {
          things.push(thing);
        },
        list: function() {
          console.log(things.toString());
        }
      };
    }
    return this.instance;
  }

  return getInstance();
}

var obj1 = new SingletonClass();
obj1.add("apple");
obj1.list();  //"apple"

var obj2 = new SingletonClass();
obj2.add("banana");
obj1.list();  //"apple,banana"
obj2.list();  //"apple,banana"

obj1.add("carrot");
obj1.list();  //"apple,banana,carrot"
obj2.list();  //"apple,banana,carrot" 
```

我的直觉说，每次`SingletonClass`实例化一个 new 时，都`this`指的是那个新的新对象——但是由于构造函数返回了一个完全独立的对象，我认为`this`它只会被丢弃。但它徘徊。如何？为什么？

这里有一些我遗漏的小细节。任何人都可以照亮它吗？

**编辑：**原来这段代码很糟糕。它“神奇地”似乎持有对实例的引用的原因是因为它实际上默默地将它存储在全局对象中。这充其量是不好的做法，而且无疑容易出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:27:17.760

不要被`this`函数内部弄糊涂了`getInstance`，那`this`就是全局对象`window`，所以你是在创建一个对象并赋值给窗口对象，下次调用构造函数时，你是在检查是否`window.instance`存在。

代码`this.instance = null;`毫无意义，只会让您感到困惑。删除它不会改变任何东西。

以下来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)。

> 执行代码时`new foo(...)`，会发生以下情况：
> 
> 1.  创建了一个新对象，继承自 foo.prototype。
> 2.  构造函数 foo 使用指定的参数调用，并且 this 绑定到新创建的对象。new foo 等价于 `new foo()`，即如果没有指定参数列表，则调用不带参数的 foo。
> 3.  **构造函数返回的对象成为整个 new 表达式的结果。**如果构造函数没有显式返回对象，则使用在步骤 1 中创建的对象。（通常构造函数不返回值，但如果他们想覆盖正常的对象创建过程，他们可以选择这样做。）

注意第3步，当你在构造函数中有return语句时，返回的结果将是new表达式的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:26:00.797

当构造函数调用`getInstance()`时，里面的`this`指针`getInstance()`被设置为`window`所以`this.instance`里面是一个全局变量`window.instance`。

这段代码只是使用一个全局变量`window.instance`来跟踪一个实例，并且可以做得比现在简单很多。

实现这一点的更清洁的方法是这样。一个全局实例存储为函数本身的属性，而不是顶级全局变量。

```
 function SingletonClass() {
        var things = [];

        // if there is a previous instance, return it
        if (SingletonClass.inst) {
            return SingletonClass.inst;
        }
        // if not called with 'new', force it
        if (!this instanceof SingletonClass) {
            return new SingletonClass();
        }

        // remember the first created instance
        SingletonClass.inst = this;

        // add methods that can see our private `things` variable
        this.add = function(thing) {
           things.push(thing);
        }

        this.list = function() {
            console.log(things.toString());
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T02:26:50.583

它使用`window`-与`getInstance`' s 不同：`this``SingletonClass`

```
function Singleton() {
    console.log("This is:", this);
    this.instance = null;

    function _get() {
        console.log("_get's this is:", this);
        if (!this.instance) {
           console.log("Instance is null");
           this.instance = { test: 1 };
        }
        return this.instance;
    }

    return _get();
}

var x = new Singleton();

// Output is:
This is: 
Singleton
_get's this is: 
Window
Instance is null 
```

在 JavaScript 中实现单例模式的更好方法可能是：

```
function Singleton() {

    // Handle not being called with `new`
    if (!this instanceof Singleton) {
        return new Singleton();
    }

    var instantiating = !!Singleton.instance,
        things = [];

    Singleton.instance = instantiating ? this : Singleton.instance;

    if (instantiating) {
        this.list = function() {
            console.log(things.toString());
        }

        this.add = function(item) {
            things.push(item);
        }
    }

    return Singleton.instance;
} 
```

这仍然受到限制。例如，如果有人`Singleton.instance`用另一个对象替换，那么不同实例之间的测试`Singleton`可能会中断 - 例如：

```
var x = new Singleton();
// Har, har, we be breaking things!
Singleton.instance = {"not": "the", "same": "at", "all": true};
var y = new Singleton();

console.log(x === y); // false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T02:55:07.730

`this`函数中的关键字`getInstance`表示一个`Window`对象。在`SingletonClass`函数中，它表示一个`SingletonClass`对象。

对于词法作用域，`add`and`list`函数总是引用同一个`things`数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T03:12:17.493

这似乎是单身人士的一个很好的链接：

[在 JavaScript 中实现单例的最简单/最干净的方法？](https://stackoverflow.com/questions/1479319/simplest-cleanest-way-to-implement-singleton-in-javascript)

这是与您在上面所做的事情有关的示例：

```
var myInstance = {
    method1: function () {
        return "Apple";
    },
    method2: function () {
        return "Orange";
    },
    banana: "Banana"
};

myInstance.grape = "Grape";

console.log(myInstance.method1(), myInstance.method2(), myInstance.banana, myInstance.grape); 
```

这是工作链接：

[http://www.quirkscode.com/flat/forumPosts/singleton/singleton.html](http://www.quirkscode.com/flat/forumPosts/singleton/singleton.html)

# vb.net - 在树视图中构建远程机器 (LAN) 的目录结构

> ID：12683648
> 
> 赞同：0
> 
> 时间：2012-10-02T02:10:13.390
> 
> 标签：vb.net, treeview

我正在构建一个树视图结构来在我的本地机器上显示远程机器的目录。它适用于在我的本地机器上显示目录，但不适用于远程机器。

这是代码，如果有人能告诉我如何使用远程机器进行这项工作，我会很高兴

```
Imports System.IO
Imports System.Collections.Generic
Imports System.ComponentModel
Imports System.Windows.Forms
Imports System.Linq
Imports System.Drawing
Imports System.Data

Public Class GPSTestAuto
Private mRootPath() As String = Directory.GetFileSystemEntries("\\192.168.0.35\Test Drive\ULTS\")
    Property RootPath As String
        Get
            Return mRootPath(0)
        End Get
        Set(value As String)
            mRootPath(0) = value
        End Set
    End Property
    Private Sub GPSTestAuto_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        Dim mRootNode As New TreeNode
        mRootNode.Text = RootPath
        mRootNode.Tag = RootPath

        mRootNode.Nodes.Add("*DUMMY*")
        TreeView1.Nodes.Add(mRootNode)

    End Sub
    Private Sub TreeView1_BeforeCollapse(ByVal sender As Object, ByVal e As System.Windows.Forms.TreeViewCancelEventArgs) Handles TreeView1.BeforeCollapse
        ' clear the node that is being collapsed
        e.Node.Nodes.Clear()
        ' add a dummy TreeNode to the node being collapsed so it is expandable
        e.Node.Nodes.Add("*DUMMY*")
    End Sub

    Private Sub TreeView1_BeforeExpand(ByVal sender As Object, ByVal e As System.Windows.Forms.TreeViewCancelEventArgs) Handles TreeView1.BeforeExpand
        ' clear the expanding node so we can re-populate it, or else we end up with duplicate nodes
        e.Node.Nodes.Clear()
        ' get the directory representing this node
        Dim mNodeDirectory As IO.DirectoryInfo
        mNodeDirectory = New IO.DirectoryInfo(e.Node.Tag.ToString)
        ' add each subdirectory from the file system to the expanding node as a child node
        For Each mDirectory As IO.DirectoryInfo In mNodeDirectory.GetDirectories
            ' declare a child TreeNode for the next subdirectory
            Dim mDirectoryNode As New TreeNode
            ' store the full path to this directory in the child TreeNode's Tag property
            mDirectoryNode.Tag = mDirectory.FullName
            ' set the child TreeNodes's display text
            mDirectoryNode.Text = mDirectory.Name
            ' add a dummy TreeNode to this child TreeNode to make it expandable
            mDirectoryNode.Nodes.Add("*DUMMY*")
            ' add this child TreeNode to the expanding TreeNode
            e.Node.Nodes.Add(mDirectoryNode)
        Next
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:28:33.110

我认为您的问题与[我](https://stackoverflow.com/questions/7094691/robust-approach-for-copying-or-moving-remote-files-from-a-net-client)不久前的问题有关，并且是由于安全限制。您需要在远程计算机上创建相同的用户帐户，如果代码在 Web 应用程序中，则必须将其包装到使用本地帐户的 WindowsImpersonationContext 中。我得到了这个工作，但它比它需要的更复杂。

[这个问题](https://stackoverflow.com/questions/401284/file-exists-returning-false-from-a-network-share)的答案对我找到解决方案最有帮助。

# qooxdoo - Qooxdoo POST 收到错误 414 Request-URI Too Large

> ID：12683650
> 
> 赞同：1
> 
> 时间：2012-10-02T02:10:53.390
> 
> 标签：qooxdoo

我正在使用 qooxdoo 创建应用程序并使用 qx.io.remote.Request 类向 apache 服务器请求。我已经使用 setMethod('POST') 将方法设置为 POST。当我创建长请求时，出现错误**414 Request-URI Too Large**，

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T09:16:01.387

要解决此问题，您可以使用 2 种方式：

1.  服务器端：您需要重置 Apache Tomcat 设置以允许 maxHttpHeaderSize 标记超过 8KB。您可以在 CAROLINA_HOME/conf/server.xml 执行此操作

2.  修复您的应用而不在 URL 中显示您的参数。但对不起，我在这一点上有同样的问题。我仍然没有成功做到这一点。

# php - 循环输出缓冲区

> ID：12683651
> 
> 赞同：3
> 
> 时间：2012-10-02T02:10:58.657
> 
> 标签：php, output-buffering

我看到了一些行为`ob_start()`，`ob_end_*()`这似乎非常违反直觉。

本着整洁的精神，我的算法是：

1.  打开缓冲区
2.  做一些事情
3.  将缓冲区保存为字符串
4.  关闭缓冲区

对于第一个案例之外的每个循环案例，我在运行时收到以下通知。

> 注意：ob_end_clean()：删除缓冲区失败。在第 21 行的 C:...\testing\TestOBError.php 中没有要删除的缓冲区
> 
> 注意：ob_end_clean()：删除缓冲区失败。在第 21 行的 C:...\testing\TestOBError.php 中没有要删除的缓冲区
> 
> 注意：ob_end_clean()：删除缓冲区失败。在第 21 行的 C:...\testing\TestOBError.php 中没有要删除的缓冲区
> 
> 当前故事有效载荷：“一个”。
> 
> 当前故事有效载荷：“两个”。
> 
> 当前故事有效载荷：“三”。
> 
> 当前故事有效载荷：“四”。

示例代码（TestOBError.php）：

```
<?php
class Story {
    public $payload;
    public function __construct($payload) {
        $this->payload = $payload;
    }
}

$stories = array();
$stories[] = new Story('one');
$stories[] = new Story('two');
$stories[] = new Story('three');
$stories[] = new Story('four');

$foo = "";

foreach ($stories as $story) {
    ob_start();
    require 'TestOBError_Foo.php';
    $foo .= ob_get_clean();
    ob_end_clean();
}

print $foo;

?> 
```

TestOBError_Foo.php 的内容：

```
<p>Current story payload: `<?php print $story->payload; ?>'.</p> 
```

我只是滥用输出缓冲区吗？谁能告诉我这样做的“正确方法”？

我正在运行 PHP 版本 5.4.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:12:59.310

您不需要同时调用`ob_get_clean()`和`ob_end_clean()`。要么这样做：

```
$foo .= ob_get_clean(); 
```

或者这样做：

```
$foo .= ob_get_contents();
ob_end_clean(); 
```

从[PHP 手册](http://us3.php.net/ob_get_clean)：

> ### [字符串**ob_get_clean** ( 无效 )](http://us3.php.net/ob_get_clean)
> 
> 获取当前缓冲区内容并删除当前输出缓冲区。
> 
> **ob_get_clean()**本质上同时执行 ob_get_contents() 和 ob_end_clean()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T15:39:43.277

非常简单的循环并按预期工作:)

```
foreach($Records as $pp=>$Record){
    ob_start();
    include(STYLESHEETPATH.'/inc/set-record-vars.php');
    include(STYLESHEETPATH.'/inc/make-html-row.php'); //Here direct HTML output;
    $jsItems[] = array(
        'id' => $proxyId,
        'row' => ob_get_contents()
    );
    ob_end_clean();
} 
```

# javascript - 某些链接在 Chrome 上不起作用

> ID：12683658
> 
> 赞同：0
> 
> 时间：2012-10-02T02:11:29.520
> 
> 标签：javascript, html, google-chrome

我的网站可以在所有主流浏览器上运行，但我发现 Chrome 上的某些链接存在问题。

在顶部菜单（'Início Portfólio Sobre Contato'）一切都很好。下面是另一个导航区域，其中一些单词是指向特定工作的链接，但是当我单击它们时它不起作用。该区域（和对角线）下方的拇指图像会发生这种情况。

这很奇怪，因为一些链接正在工作（在主导航中），而另一些则没有。

我的网站是： http: [//www.santosidaniel.com](http://www.santosidaniel.com)

有人知道问题是什么吗？我在 Mac OS 上，使用最新的 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:42:37.663

我不确定其他人怎么说，但我在您的页面中看到了以下代码：

```
$('#main_menu a').bind('click',function(event){
    if(!$(this).parent('li').hasClass('lang') && !$(this).parent('li').hasClass('langlast')) {
        $(document).find('title').text($(this).text() + ' | santosidaniel');

        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1500,'easeInOutExpo');

        event.preventDefault();
    }
}); 
```

这似乎是导致滚动的有效代码，至少在 Chrome 中是这样。其他链接不起作用，因为它们没有绑定功能？

如果我也添加了`#words_menu a`，`#thumbs_menu a`那么链接将起作用。

显然这并不能解释为什么它在其他浏览器中确实有效，但这似乎解决了问题，至少在 Chrome 中是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:32:39.983

由于新信息而对此进行编辑，

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

看起来您正在使用的库需要使用适当的语法通过缩略图水平移动每个部分。

尝试设置 JS 语句，如

`$(...).scrollTo( '520px', 800 );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T05:05:54.217

我真的不知道为什么，但如果你改变这一行：

*滑块.js（第 67 行）*

```
$('body').stop().scrollTo(container, 800); 
```

这样

```
$('html, body').stop().animate({
    scrollTop: container.offset().top
}, 1500, 'easeInOutExpo'); 
```

将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T04:10:14.373

问题似乎出在您的 javascript 中，如果我禁用 javascript，则锚点会起作用。您的 javascript 全部被挖掘，因此很难判断发生了什么，但我的钱在`jquery.scrollTo-1.4.2-min.js`脚本上。

# android - 当活动从回栈弹出时保存和恢复片段

> ID：12683659
> 
> 赞同：1
> 
> 时间：2012-10-02T02:11:50.467
> 
> 标签：android

当用户按下后退按钮时，如何保存片段的状态，然后在下次加载片段时恢复它？我试过`onSaveInstanceState`了，但是当我回击时它没有被调用，并且`Bundle`传入`onCreate`的是`null`。

对于上下文，我有一个标题 Activity，它在用户按下按钮时启动一个新的游戏 Activity（例如，“新游戏”）。第二个（游戏）活动加载一个 XML 布局，`onCreate`其中包含自定义的`Fragment`. 当用户按下后退按钮时，我想返回标题Activity，但提供一个“恢复游戏”按钮。为此，我需要为 Fragment 保存一些自定义状态数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:14:42.797

默认情况下，当用户按下返回时不会发生 onSaveInstanceState() 调用

> 如果用户按下后退按钮，当前活动将从堆栈中弹出并 > 销毁。堆栈中的先前活动被恢复。当一个活动被销毁时，系统不会保留活动的状态。

所以你可以这样做的方式似乎是：（1）用你自己的实现覆盖活动的 onBackPressed() （2）保存片段实例。看看 FragmentManager.saveFragmentInstanceState() - 我相信这就是你需要的

# makefile - 在程序中使用来自 autoconf 的“program_name_transform”

> ID：12683660
> 
> 赞同：3
> 
> 时间：2012-10-02T02:12:00.267
> 
> 标签：makefile, autotools, autoconf, automake

在我使用 autoconf 和 automake 的项目中，我有两个可执行文件，比如“foo”和“bar”。假设“foo.c”看起来像

```
int main()
{
    exec ("bar");
    return 0;
} 
```

即，“foo”使用“bar”。一旦我这样做，它就可以正常工作`./configure && make && make install`。但是，autoconf 提供了转换程序名称的选项。例如，我可以做`./configure --program-suffix=-2.0`. 然后“foo”和“bar”将被安装为

```
/usr/bin/foo-2.0
/usr/bin/bar-2.0 
```

在这种情况下，“foo”中对“bar”的引用是不正确的，因为`bar`系统中将没有（应该是`bar-2.0`）。有什么办法可以让 autoconf/automake 自动调整这个参考？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:10:22.520

在您的文件中，`Makefile`您可以运行`$(program_transform_name)`sed 脚本来创建带有最终名称的头文件。

例如，假设您的程序名称是`foo`and `bar`，请创建一个包含以下内容的`names.h.in`文件：

```
#define FOO_NAME "@foo-name@"
#define BAR_NAME "@bar-name@" 
```

然后装备你`Makefile.am`有规则`names.h`从`names.h.in`：

```
BUILT_SOURCES = names.h
EXTRA_DIST = names.h.in

edit = sed \
  -e 's/@foo-name@/'`echo foo | sed '$(program_transform_name)'`'/g;' \
  -e 's/@bar-name@/'`echo bar | sed '$(program_transform_name)'`'/g;'

names.h: $(srcdir)/names.h.in Makefile
        $(edit) < $(srcdir)/names.h.in > $@ 
```

最后在你的源代码中包含`names.h`并使用`FOO_NAME`和。`BAR_NAME`

# macos - 在 Mac 上更新到 JDK7，现在出现 AquaTableUI 异常

> ID：12683661
> 
> 赞同：1
> 
> 时间：2012-10-02T02:12:03.540
> 
> 标签：macos, java, osx-mountain-lion, java-7

基本上我得到了以下类型的例外：

线程“主”java.lang.NoClassDefFoundError 中的异常：apple/laf/AquaTableUI

在带有 JDK7 的 Mac OS X 10.8.2（最新的 Mac OS）上。不知道是什么原因造成的。是的，该应用程序已签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:28:48.017

问题是因为其中一个库引用了 JDK7 不再支持的 JDK6 特定库。当它们可用时，我必须从这些库中升级 jar。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T14:03:39.280

恐怕你要使用的问题是你使用的是Oracle JDK。众所周知，它具有纯 Mac OS X 支持。很可能您的问题必须通过切换回 Apple JDK 6 来解决。

我意识到您可以手动将带有 AquaUI 的 JAR 文件添加到您的类路径中。但是当我测试这种方法时，我发现了许多不明显的错误，例如这个：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166379](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166379)

这样的错误可能会显示死机灰屏。它们也可能是一个安全漏洞，允许特洛伊木马占据您的 Mac。您可以谷歌“闪回木马java mac”了解详情。

基于这些原因，我几乎不推荐使用 Apple 的 JDK。

# spring - SpringSource：加载属性 PropertyPlaceholderConfigurer bean

> ID：12683663
> 
> 赞同：0
> 
> 时间：2012-10-02T02:12:05.943
> 
> 标签：spring, spring-mvc

我正在使用 Spring Tool Suite 版本：3.0.0.RELEASE

我想加载我自己的 .properties 文件以在我的应用程序中使用，所以我尝试使用 PropertyPlaceholderConfigurer

这是我的 servlet-context.xml 代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>
    <context:component-scan base-package="jp.co.rns" />

    <mvc:interceptors>
    <beans:bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <beans:property name="paramName" value="lang" />
    </beans:bean>
</mvc:interceptors>

    <beans:bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <beans:property name="basename" value="classpath:static" />
    <beans:property name="defaultEncoding" value="UTF-8"/>
</beans:bean>

<beans:bean id="localeChangeInterceptor"
    class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <beans:property name="paramName" value="lang" />
</beans:bean>

<beans:bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
    <beans:property name="defaultLocale" value="jp"/>
</beans:bean>

<beans:bean id="handlerMapping"
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <beans:property name="interceptors">
        <beans:ref bean="localeChangeInterceptor" />
    </beans:property>
</beans:bean>

<beans:bean id="propertyConfigurer" 
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"> 
    <beans:property name="location">
     <beans:value>application.properties</beans:value> 
    </beans:property>
    <beans:property name="ignoreUnresolvablePlaceholders">
    <beans:value>true</beans:value>
    </beans:property>
</beans:bean>
</beans:beans> 
```

应用程序属性：

```
order=2
companyName=Unknown 
```

项目结构：

```
src
|
 ---main
|  |
|   ---java
|  |
|   ---resources
|  |
|   ---webapp
|      |
|       ---application.properties
|      |
|       ---resources
|      |   |
|      |    ---application.properties    
|      |
|       ---WEB-INF
|          |
|           ---application.properties 
|          |
|           ---web.xml
|          |
|           ---classes (empty)
|          |
|           ---spring
|          |   |
|          |    ---application.properties
|          |   |
|          |    ---root-context.xml
|          |   |
|          |    ---appServlet
|          |       |
|          |        ---servlet-context.xml
|          |       |
|          |        ---application.properties
|          |
|           ---views (...)
|
 ---test 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

我检查了，application.properties 在 /WEB-INF/ 目录中。

但是当我开始启动服务器时，它给了我一个错误：

```
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/application.properties] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:40:08.687

来自[spring-context-3.0.xsd](http://www.springframework.org/schema/context/spring-context-3.0.xsd)

> 要解析占位符的属性文件的位置，作为 Spring 资源位置：URL、“类路径：”伪 URL 或相对文件路径。可以指定多个位置，用逗号分隔。如果既没有指定 location 也没有指定 properties-ref，占位符将根据系统属性进行解析。

您没有指定可解析的位置，`/WEB-INF/application.properties`它不是 url、伪 URL（如“file：”或“classpath”）或相对文件路径。我推荐类路径方法。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:28:06.977

我设法通过在 /src/main/resources 源文件夹中创建新的 application.properties 文件并从旧文件中复制内容来使其工作。另外，我必须将位置值更改为 classpath:application.properties 我有一个问题：这个资源文件会被编译成 jar 吗？我可以在不重新编译的情况下更改它吗？如果没有，请分享一些其他加载外部属性的方法。

# objective-c - 地理围栏后台应用程序可能吗？

> ID：12683666
> 
> 赞同：3
> 
> 时间：2012-10-02T02:12:09.920
> 
> 标签：objective-c, ios, cllocationmanager

我不确定Apple是否允许这样做。我可以制作一个使用地理围栏的应用程序来跟踪您在地理围栏位置内的时间以及离开的时间吗？

我知道我可以创建提醒应用程序之类的警报，但是如何将这些警报反馈到我的应用程序中，以便查看我在地理围栏中的时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:29:15.107

Your app can be notified when the user enters or leaves an area you designate. Read about [Location Services](http://developer.apple.com/library/ios/ipad/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html). You can't/shouldn't try to do much when you get such a notification, though -- just save the information. Don't try to send messages to a server or something like that -- save that for when your app is in the foreground.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T02:16:21.583

可以触发地理围栏事件，应用程序的回调代码片段不仅可以在后台执行，甚至可以在应用程序完全停止时的终止状态执行。

# php - PHP 在类外的函数中重用 MySQL 对象

> ID：12683668
> 
> 赞同：1
> 
> 时间：2012-10-02T02:12:10.123
> 
> 标签：php, mysql, class

我在下面使用这个类来连接到我的 sql db。一切都很好，但我认为我没有以正确的方式使用它。当我的网站上加载一个页面时，会调用一些函数来显示文本、赞助商......并且每个函数都会创建一个 mysql 对象。这是错的吗？？它会产生过多的连接问题吗？我应该创建一个对象并将其传递给函数的参数吗？或者有没有办法让这个对象成为全球性的？

```
class clsMysql
{
    var $con;
    var $last_id;

    function __construct($db = array()) 
    {
        $this->con = mysql_connect($db['host'], $db['user'], $db['pass'], true, MYSQL_CLIENT_INTERACTIVE) or die ('Error connecting to MySQL');
        mysql_select_db($db['db'], $this->con) or die('Database ' . $db['db'] . ' does not exist!');
    }

    function __destruct() {
        mysql_close($this->con);
    }

    // fonction qui exécute la requête SQL
    function fxQuery($sql) {
        return mysql_query($sql, $this->con);
    }

    // fonction qui retourne la variable du résultat de la requête SQL
    function fxGetVar($sql) {
        return $this->fxFetchArray(0, $sql);
    }

    // fonction qui retourne un tableau contenant la ligne unique du résultat de la requête SQL
    function fxGetRow($sql) {
        return $this->fxFetchArray(1, $sql);
    }

    // fonction qui retourne un tableau contenant le résultat de la requête SQL
    function fxGetResults($sql) {
        return $this->fxFetchArray(2, $sql);
    }

    // fonction qui met la requête dans un tableau
    function fxFetchArray($p, $sql)
    {
        $qry = $this->fxQuery($sql);
        $nb = mysql_num_rows($qry);
        $this->last_id = mysql_insert_id($this->con);

        if ($nb > 0)
        {
            switch ($p)
            {
                // fxGetVar
                case 0:
                    $rec = mysql_fetch_array($qry, MYSQL_NUM);
                    $mem_results = $rec[0];
                    break;

                // fxGetRow
                case 1:
                    $rec = mysql_fetch_array($qry, MYSQL_ASSOC);

                    foreach (array_keys($rec) as $field)
                        $mem_results[$field] = $rec[$field];
                    break;

                // fxGetResults
                case 2:
                    $ctr = 1;

                    while ($rec = mysql_fetch_array($qry, MYSQL_ASSOC))
                    {
                        foreach (array_keys($rec) as $field)
                            $mem_results[$ctr][$field] = $rec[$field];

                        $ctr++;
                    }
            }

            return $mem_results;
        }
        else
            return null;
    }

    //fonction pour échapper les caractères pour les variables post ou get
    //param: valeur
    //retourne la valeur échappée
    function fxEscape($values)
    {
        if (is_array($values))
            $values = array_map(array($this, 'fxEscape'), $values);
        else
        {
            // Stripslashes
            if (get_magic_quotes_gpc())
                $values = stripslashes($values);

            if ((int)ini_get('magic_quotes_sybase'))
                $values = str_replace("''", "'", $values);

            $values = mysql_real_escape_string($values, $this->con);
        }

        return $values;
    }

    function fxGetLastId() {
        return $this->last_id;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:15:25.647

您应该能够实例化对象一次并多次调用查询方法。它应该防止它为每个查询建立连接。

```
$mysql = new clsMysql();

$mysql->fxQuery("select * from something");

$mysql->fxQuery("Another Query");

$mysql->fxQuery("Yet another query..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:53:52.403

以一种简单的方式：

```
// on the top of your code
$db = new clsMysql(); 
```

然后，在您的类方法或函数中：

```
// class
class abc {

    public function xyz () {
        global $db;            // make it global here

        // use it!
    }
} 
```

换句话说，更多的 OOP：

```
// main class
class system {

    // variable to the store database object
    public $db;

    // constructor
    public function __constructor() {

        include('mysql.class.php');    // your mysql class file

        $this->db = new clsMysql();
    }

} 
```

在其他课程上，您可以`extend`上课`system`。

```
// sample class
class sample extends system {

    // sample function
    public function sample_method() {

        $this->db->fxQuery('SELECT * FROM table');

} 
```

在课堂之外：

```
$app = new system();
$result = $app->db->fxQuery('SELECT 1'); 
```

# php - Symfony 2 FOQElasticaBundle 搜索多个实体

> ID：12683670
> 
> 赞同：4
> 
> 时间：2012-10-02T02:12:14.703
> 
> 标签：php, symfony, elasticsearch

我开始在 Symfony 2 中使用 Elastic Search Bundle，并且对实体的搜索功能有疑问。

如果你有这样的配置：

```
foq_elastica:
clients:
    default: { host: localhost, port: 9200 }
indexes:
    website:
        client: default
        types:
            user:
                mappings:
                    username: { boost: 5 }
                    firstName: { boost: 3 }
                persistence:
                    driver: orm # orm, mongodb, propel are available
                    model: Application\UserBundle\Entity\User
                    provider: 
```

然后，您可以像这样搜索索引：

```
$userType = $this->container->get('foq_elastica.index.website.user');

$resultSet = $userType->search('bob'); 
```

但是如果你想用一个函数搜索多个实体呢？就像是...

配置：

```
foq_elastica:
clients:
    default: { host: localhost, port: 9200 }
indexes:
    website:
        client: default
        types:
            user:
                mappings:
                    username: { boost: 5 }
                    firstName: { boost: 3 }
                persistence:
                    driver: orm
                    model: Application\UserBundle\Entity\User
                    provider:
            client:
                mappings:
                    clientname: { boost: 5 }
                persistence:
                    driver: orm 
                    model: Application\UserBundle\Entity\Client
                    provider: 
```

搜索功能：

```
$Type = $this->container->get(['foq_elastica.index.website.user', 'foq_elastica.index.website.client']);

$resultSet = $Type->search('bob'); 
```

上面的代码不起作用，但我想知道是否有一种方法可以对多个实体进行一次搜索并根据它们的 boost 属性获取结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T15:52:46.297

**来自 OP 的回答**

这是我的解决方案...我编辑了我的配置文件，让 finder 位于我网站的根目录，如下所示：

```
foq_elastica:
clients:
    default: { host: localhost, port: 9200 }
indexes:
    website:
        client: default
        finder:
        types:
            user:
                mappings:
                    username: { boost: 5 }
                    firstName: { boost: 3 }
                persistence:
                    driver: orm
                    model: Application\UserBundle\Entity\User
                    provider:
            client:
                mappings:
                    clientname: { boost: 5 }
                persistence:
                    driver: orm 
                    model: Application\UserBundle\Entity\Client
                    provider: 
```

我这样称呼我的搜索......

```
$finder = $this->container->get('foq_elastica.finder.website');

$results = $finder->find('bob'); 
```

它将在我的用户和客户实体中搜索！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:52:47.477

在我看来，有两种方法可以做你想做的事。您可以为 User 和 Client 创建父实体并将其作为类型添加到索引中。看看 Doctrine 的[继承映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#single-table-inheritance)；但是，我不确定 FOQ_ElasticaBundle 在将这些实体保留在索引中时是否以及如何处理这些。这只是一个方向的指针，我不确定这是否会起作用！

我会推荐以下方法：搜索索引而不是类型。您可以使用`foq_elastica.index_manager`检索所需的索引（网站），然后构建一个查询，该查询使用类型过滤器将结果限制为您的用户和客户端类型。

# css - 在 CSS 中将 ID 用于“模块”是否被认为是不好的做法？

> ID：12683679
> 
> 赞同：0
> 
> 时间：2012-10-02T02:13:09.890
> 
> 标签：css, css-selectors

我知道很多人反对在你的样式中使用 ID，因为它们增加了太多的特异性。

但是，如果您正在使用可以放置在任何页面或任何容器上的组件，如果小心使用，这不是一件好事吗？我忽略了什么吗？

我做的最后一个项目是使用 SMACSS 方法来模块化所有内容。这工作得很好，除非在某些情况下我必须故意添加额外的特异性。

使用 SCSS 的示例：

```
#myWidget {
  .foo { 
    width: 150px;
  }
  ...
} 
```

在某些情况下，这可以被公平地覆盖

```
.myWidget {
  .foo {
    width: 150px;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:19:32.363

一般规则是，一个 ID 应该只出现在页面上一次（例如`#main-navigation`，对于`<div>`包含您网站的导航的），并且类可以在页面上出现多次（`.red-text`例如，给某些文本一个红色）。我个人倾向于使用 ID 来分隔不同的容器级别部分，而类可以更广泛地应用。

但是，您的示例不包含有效的 CSS……您需要像这样编写它们：

```
#myWidget .foo { 
    width: 150px;
} 
```

或者

```
.myWidget .foo { 
    width: 150px;
} 
```

# c# - 嵌套的 TransactionScope 异常

> ID：12683680
> 
> 赞同：0
> 
> 时间：2012-10-02T02:13:10.387
> 
> 标签：c#, nested, transactionscope

下面的代码会引发以下异常。我究竟做错了什么？

错误堆栈：System.Transactions.TransactionAbortedException：事务已中止。---> System.Data.SqlClient.SqlException：事务操作无法执行，因为有待处理的请求正在处理此事务。

```
public class NestedTransaction
{
    public void SomeTransaction()
    {
        using (var context = new SomeDBContext())
        {
            using (TransactionScope transaction = new TransactionScope(TransactionScopeOption.Required,
                  new TransactionOptions { IsolationLevel = IsolationLevel.ReadCommitted }))
             {
                context.Connection.Open();

                List<SomeEntities> entities = GetEntitiesFromDatabase();

                    entities.ForEach(entity =>
                    {
                        SaveEntity((EntityConnection)context.Connection, entity);                            
                    });

            context.SaveChanges();

            context.Connection.Close();

            transaction.Complete();

            }               
        }
    }

    private static void SaveEntity(EntityConnection connection,SomeEntity entity)
    {
        foreach (SomeEntity childEntity in entity.ChildEntities)
        {
              SaveEntity(connection, childEntity)
        }
    }
} 
```

在此先感谢 Niju

# git - 远程 git repo 和 svn 之间无休止的冲突

> ID：12683681
> 
> 赞同：2
> 
> 时间：2012-10-02T02:13:25.803
> 
> 标签：git, git-svn

我刚刚创建了一个 git-to-svn 设置，我对此束手无策。我已经设置了一个包含两个远程存储库的存储库，一个基于 svn，另一个基于远程 git：

```
svn-remote.svn.url=https://subversion.acme.com/svn/sales/portal/trunk
svn-remote.svn.fetch=:refs/remotes/git-svn
remote.origin.url=mottinger@git.tkknow.com:/gitroot/acme-gtm-2-0.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/* 
```

一旦我设置了这个，我就可以将提交从 git repo 移动到 svn repo，如下所示：

```
git fetch origin
git rebase origin/master (linearizes commits to svn)

git svn rebase
git svn dcommit 
```

一切都很好，直到我决定测试我将如何处理冲突。我创建了一个 foo.dat 文件，并从 svn 端在其中添加了一行，并在 git 端创建了一个相应的文件，其中一行表明它来自 git。我跑过去`git fetch origin`把`git rebase origin/master`foo.dat 文件放下。这很好，但是尝试运行`git svn rebase`导致了冲突。完全符合预期，所以我完成了编辑冲突和使用 svn rebase --continue 的步骤。但随后混乱开始了。尝试运行后`git rebase origin/master`为了从 repo 中删除其他更改，我在同一个 foo.dat 文件上发生冲突。我已经把它变成了一个状态，如果我解决了 svn 的冲突，git 就会失败，反之亦然。最令人沮丧的是，我似乎无法找到一种方法让存储库恢复到恢复这种混乱状态的状态。目前，我有幸完全吹走 repos 并重试，但将来当开发人员使用它时，如果我让自己进入这样的状态，我真的很想知道如何摆脱。任何关于正在发生的事情以及如何结束不断合并的提示将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:01:38.110

这些冲突与 git-svn 无关。

如果一个人有几个遥控器：remote1 和 remote2，并且这些遥控器的历史已经不同，那么 rebase 操作总是会重写第一个遥控器的历史。

假设一个提交 A 被 master 分支引用：

```
$ git log master
* commit A
Initial commit 
```

还有几个历史不同的遥控器：

```
$ git log remote1/master
* commit R1
Added conflict.txt at remote1
* commit A
Initial commit 
```

和

```
$ git log remote2/master
* commit R2
Added conflict.txt at remote2
* commit A
Initial commit 
```

现在，将本地历史重新设置为如下：

```
$ git rebase remote1/master
$ git log master
* commit R1
Added conflict.txt at remote1
* commit A
Initial commit 
```

现在尝试在 remote2/master 之上重新设置本地历史记录，得到冲突并解决它们：

```
$ git rebase remote2/master
$ git log master
* commit R1
Added conflict.txt at remote1
* commit R2
Added conflict.txt at remote2
* commit A
Initial commit 
```

注意到了吗？变基操作将提交 R1 置于 R2 之上。如您所料，在 remote1/master 之上重新设置给定历史记录只是交换提交 R1 和 R2 并生成完全相同的冲突。

如何解决？好吧，您必须使两个遥控器的历史记录相同。最安全的方法是合并提交 R1 和 R2，并将生成的合并提交推送到 remote1 和 remote2。

现在回到 git-svn。对于您的情况，合并不同的历史记录将不起作用，因为 git-svn 总是在您运行时重写您的本地历史记录`git svn dcommit`。相反，您必须执行以下操作：

1.  从 Git 存储库中获取和 rebase 提交：

    ```
     $ git fetch origin
     $ git rebase origin/master (linearizes commits to svn) 
    ```

2.  将更改发送到 SVN 存储库：

    ```
     $ git svn rebase
     $ git svn dcommit 
    ```

3.  将从 SVN 获取的提交推送回源：

    ```
     $ git push -f origin master:master 
    ```

第三步是极其危险的，可能会导致历史丢失。所以，我不建议这样做—— git-svn 只是不支持这样的工作流程。

相反，您可以尝试[SubGit](http://subgit.com)。SubGit 是用于 SVN 和 Git 存储库的双向服务器端镜像工具。

如果您对 Subversion 存储库具有本地访问权限，则可以将 SubGit 安装到其中：

```
$ subgit configure $SVN_REPOS
# Adjust $SVN_REPOS/conf/subgit.conf to specify your branches and tags
# Adjust $SVN_REPOS/conf/authors.txt to specify git & svn authors mapping
$ subgit install $SVN_REPOS
...
$ INSTALLATION SUCCESSFUL 
```

结果，您获得了转换后的 Git 存储库，该存储库自动与原始 SVN 存储库同步。

如果您没有 SVN 存储库的本地访问权限，您可以考虑使用即将进入早期访问阶段的 SubGit 2.0。SubGit 2.0 允许在 Git 存储库和远程 SVN 存储库之间设置双向镜像。

SubGit 是一个商业产品。它对开源和学术项目以及最多 10 个提交者的项目都是免费的。

有关详细信息，请参阅[SubGit 文档](http://subgit.com/documentation/)和[git-svn](http://subgit.com/documentation/gitsvn.html)比较页面。

全面披露：我是 SubGit 开发人员之一。

# python - 在脚本中运行 scipy 的单向方差分析

> ID：12683683
> 
> 赞同：7
> 
> 时间：2012-10-02T02:13:47.860
> 
> 标签：python, scipy, anova

我有个问题。我想在脚本中运行 scipy.stats f_oneway() ANOVA，该脚本加载包含具有 numpy 数组的组的数据存档，如下所示：

```
archive{'group1': array([ 1, 2, 3, ..., ]),
        'group2': array([ 9, 8, 7, ..., ]),
        ...} 
```

现在我的问题是不同数据档案的组数不固定。换句话说，我事先不知道档案中有多少组（也不一定知道他们的名字是什么）。

单向方差分析的[scipy 实现](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.f_oneway.html)只接受逗号分隔的数组作为输入，如下所示：

```
a = array([ 1, 2, 3, ..., ])
b = array([ 9, 8, 7, ..., ])
c = array([ 5, 6, 4, ..., ])

scipy.stats.f_oneway(a, b, c) 
```

我试图给它列表、元组、多维数组都没有成功。所以目前，我可以使用此 ANOVA 实现的唯一方法是每次手动输入组变量，这实际上使得无法在脚本中运行它。我想知道你们中是否有人知道如何解决这个问题或如何避免 f_oneway() 的这些非常具体的数据格式要求。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T02:16:36.300

我想你应该尝试：

```
scipy.stats.f_oneway(*archive.values()) 
```

# python - Heroku：模板不存在

> ID：12683686
> 
> 赞同：0
> 
> 时间：2012-10-02T02:14:22.727
> 
> 标签：python, django, heroku, foreman

这里是 Heroku/Django 的新手，这是我的 Procfile：

```
web: python testapp/manage.py runserver 0.0.0.0:$PORT 
```

出于某种原因，当我尝试在浏览器中加载模板时，我似乎无法加载它。下正常工作`python manage.py runserver`，有人知道这是什么问题吗？这是无法加载我的静态文件的情况吗？

准确的错误信息是：foreman start

```
TemplateDoesNotExist at /test/index.html
Request Method: GET
Request URL:    http://127.0.0.1:5000/test/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:51:26.843

我使用之前在我的 settings.py 文件中定义的 PROJECT_ROOT 目录修复了这个问题：

```
TEMPLATE_DIRS = (
    os.path.join(PROJECT_ROOT, '../templates'),
) 
```

看起来 Heroku 只需要一个完整的路径。

# asp.net - Crystal Reports 中的分页

> ID：12683687
> 
> 赞同：1
> 
> 时间：2012-10-02T02:14:29.623
> 
> 标签：asp.net, crystal-reports, crystal-reports-2008

在这方面需要帮助。因为每次我点击下一页或预览页面时，它总是从数据库中检索数据。我试着把它放进`If Not Page.IsPostBack Then...EndIf`去，但它删除了数据。

下面是代码。

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
        Threading.Thread.CurrentThread.CurrentCulture = _datestyle

        Try
            If (Session("userID").ToString() = Nothing Or Session("userID").ToString() = "") Then
                Const script As String = "top.location='../logon.aspx';"
                Page.ClientScript.RegisterClientScriptBlock(Me.GetType(), "logon", script, True)
                Return
            End If
        Catch ex As Exception
            Const script As String = "top.location='../logon.aspx';"
            Page.ClientScript.RegisterClientScriptBlock(Me.GetType(), "logon", script, True)
            Return
        End Try

        If Not Page.IsPostBack Then
            _rptSvc = CType(Session("ServiceDue"), ClsRptServiceDue)
            _dsSvcDue = _rptSvc.RetrieveServiceDue()

            GenerateReport(_dsSvcDue)
        End If

    End Sub

    Private Sub GenerateReport(ByVal dataSet As DataSet) Implements IBasicReportPage.GenerateReport
        titleLab.Text = _xml.GetLabelName("EngLabelMsg", "BB-RPTSERVICE-TITLE")
        _rptSvc = CType(Session("ServiceDue"), ClsRptServiceDue)

        Dim strHead As String() = CType(Array.CreateInstance(GetType(String), 18), String())
        PopulateLabels(strHead)
        DefineDefaultValues(strHead)

        Try                
            With _clsReport
                .ReportFileName = "RPTServiceDueLstng.rpt"
                .SetReport(CrystalReportViewer1, dataSet, strHead)
            End With

        Catch err As Exception
            Response.Write("<BR>")
            Response.Write("Error Message: " & err.Message.ToString)
            Response.Write("<BR>")
            Response.Write("Source : " & err.Source)
            Response.Write("<BR>")
            Response.Write("Stack Trace Message: " & err.StackTrace)
        End Try

    End Sub 
```

在这方面需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:29:15.797

您是否使用报告工具中的 Crystalreport 查看器控件。有一个事件称为分页。调用您的私有方法以在该事件中生成报告。

# php - 循环遍历 2 行，合并和删除重复项

> ID：12683694
> 
> 赞同：1
> 
> 时间：2012-10-02T02:15:52.410
> 
> 标签：php, mysql, associative-array, duplicate-removal

我在 mysql 表中有 2 行。有些数据跨行重复，有些数据在同一行中重复。我想呼应每个独特的价值。

数组如下所示：

```
Array ( [0] => Array ( [Character1] => Moe Szyslak [Character2] => 0 ) [1] => Array ( [Character1] => Homer Simpson [Character2] => 0 ) [2] => Array ( [Character1] => Homer  Simpson [Character2] => ) [3] => Array ( [Character1] => Homer Simpson [Character2] => Marge Simpson ) 
```

尝试了各种事情，`foreach's`结合 array_unique 等，但没有什么是接近的，所以我想我一定要离开了。预期结果是： `Moe Szyslak Homer Simpson Marge Simpson`

编辑：查询在 CI 模型中（是的，我的数据库结构应该更好）：

```
function getCharacter()
{
$query = $this->db->query("SELECT DISTINCT Character1, Character2 FROM clip");
return $query->result_array();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:18:22.353

你能从你的表中做一个“选择不同的*”来删除欺骗吗？

另一种选择是检查数组中的前一个值：

```
for ($i = 0; $i < count($array); $i++)
{
    if ($i == 0 || $array[$i]->Character1 != $array[$i - 1]->Character1)
    {
        echo $array[$i]->Character1 ."<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:09:56.747

使用`DISTINCT Character1, Character2`只会清除包含相同`Character1`和的行`Character2`。因此，对于以下数据，将返回三行 - 第 2 行、第 4 行和（第 1 行和第 3 行）之一

```
Character1    | Character2
-----------------------------
Moe Szyslak   | Homer Simpson 
Marge Simpson | Moe Szyslak 
Moe Szyslak   | Homer Simpson 
Moe Szyslak   | Marge Simpson 
```

使用以下代码获取唯一值

```
$charaters = array();
foreach ($charater_arr as $charater_arr) {
  if (!in_array($charater_arr['Character1'], $charaters)) {
    $charaters[]  = $charater_arr['Character1'];
  }
  if (!in_array($charater_arr['Character1'], $charaters)) {
    $charaters[]  = $charater_arr['Character2'];
  }
}
print_r($charaters); 
```

否则请尝试以下查询。

```
SELECT Character1 AS character FROM clip 
UNION
SELECT Character2 AS character FROM clip 
```

# business-intelligence - pentaho BA服务器和Bi服务器

> ID：12683705
> 
> 赞同：4
> 
> 时间：2012-10-02T02:17:04.990
> 
> 标签：business-intelligence, pentaho

看了一些pentaho的文档，发现有的提到BI server，有的提到BA server，这两个概念有什么区别？

它们看起来一样，对吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T04:20:11.713

Pentaho 支持其产品的企业版和社区版。社区版是免费的，通常比企业版少一些功能，但在应用程序核心上它们是相同的。

BI 服务器的企业版——意思是商业智能——最近更名为 BA 服务器——用于商业分析。社区版仍使用 BI 服务器名称。

Pentaho 网站有一个显示差异的特征矩阵：[http](http://www.pentaho.com/explore/packages/) ://www.pentaho.com/explore/packages/ 。然而，这个矩阵比过去发布的矩阵要少得多。您可能需要进一步挖掘。

# lisp - 简单的 CouchDB 在 Common LISP 中获取和显示记录

> ID：12683707
> 
> 赞同：1
> 
> 时间：2012-10-02T02:17:14.833
> 
> 标签：lisp, common-lisp

我在 Common Lisp 中迈出了第一步，感谢 clouchdb [http://common-lisp.net/project/clouchdb/#examples](http://common-lisp.net/project/clouchdb/#examples)

我设法从 couchdb 获取了一些简单的数据

```
 (invoke-view "hulk" "hulk" )
 ((:|total_rows| . 2) (:|offset| . 0) (:|rows| ((:|id| . "gjc") (:|key| . "hulk") (:|value|                             
 (:|_id| . "gjc2321o3io13") (:|_rev| . "3-b6433781c65460f2c9b1f1a153953171")
  (:NAME . "Dr Bruce Banner") (:|kind| . "users") (:|username| . "hulk") (:|title| . "gamma r adia
 tions: what to do ?"))) ((:|id| . "irnmn239223") (:|key| . "ironman") (:|value| (:|_id| . "irnmn2     39223") 

  (:|_  rev| . "5-2b6cf739d24b1208fe8eca70e37ffdc9") (:|name| . "tony stark") (:|title| . 
(:|name| . "tony stark") (:|title| . "why iphone 5 sucks - but i own one \"") (:|kind| . "users") (:|username| . "ironman") (:|text| .  "welcome to post number one ......"))))) 
```

7 >

我正在使用 SEXML 显示 HTML 记录，因此我的 HTML 显示模板如下所示

```
 ;;static here 
 (<:h2 "((LISP RETRO BLOG))")
 (<:h3 "(( ***** RETRO BUT STILL COOL *****))")
 (<:p "( (MADE IN LISP ))")
 (<:p "READY.")
 (<:img :src "/img/prompt.gif" :alt "cursor"))
 ;;this is a variable
 (<:p "universal time: " mytime) 
```

现在我是否可以通过上述结果创建一个简单的循环（例如，用户名是 Ironman 和 hulk）以显示类似

```
 (<:p "Welcome!" username) 
```

很抱歉为最终可能是一个非常简单的循环发布了这么多代码。我确实阅读并尝试了示例（[http://psg.com/~dlamkins/sl/chapter05.html](http://psg.com/~dlamkins/sl/chapter05.html)）和其他资源，但我可能缺少一些非常基本的东西，希望您能提供帮助。请注意，couchdb 文档可能具有不同的字段，因此它与遍历具有模式的某些记录并不完全相同。这可能是相关的，例如，如果一个文档是一篇博客文章，它可能包含也可能不包含标签，所以我可能想显示/创建一个包含文档中所有可用数据的页面（可能不包括 _id）。

如果有不清楚的地方，请发表评论，我很乐意编辑问题。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:04:25.067

如果您将其重新格式化以使其更具可读性，您将更好地理解输出数据。像这样：

```
((:|total_rows| . 2) (:|offset| . 0)
 (:|rows|
   ((:|id| . "gjc") (:|key| . "hulk")
    (:|value|
      (:|_id| . "gjc2321o3io13")
      (:|_rev| . "3-b6433781c65460f2c9b1f1a153953171")
      (:NAME . "Dr Bruce Banner")
      (:|kind| . "users")
      (:|username| . "hulk")
      (:|title| . "gamma radiations: what to do ?")))
   ((:|id| . "irnmn239223") (:|key| . "ironman")
    (:|value|
      (:|_id| . "irnmn2     39223") 
      (:|_  rev| . "5-2b6cf739d24b1208fe8eca70e37ffdc9")
      (:|name| . "tony stark")
      (:|title| .

      ;; here you repeat name and title, so the previous and next lines are erroneous

      (:|name| . "tony stark")
      (:|title| . "why iphone 5 sucks - but i own one \"")
      (:|kind| . "users")
      (:|username| . "ironman")
      (:|text| .  "welcome to post number one ......"))))) 
```

所以，你通过 clouchdb 从 CouhcDB 得到的是一个特殊结构的列表， 在 Lisp 用语中称为**alist 。**有一组用于处理 alist 的函数，其中最重要的是`ASSOC`.

结果告诉您，您有 2 行，每行都将数据保存为另一个 alist。要迭代它们，您可以使用以下函数：

```
(defun maprows (fn data)
  (mapcar fn (cdr (assoc :|rows| data)))) 
```

现在你必须传入一个参数`MAPROWS`的函数`FN`。例如，如果您只想以合理的方式打印值，则可以传递以下函数。

```
(defun print-row (record)
  (dolist (pair (cdr (assoc :|value| record)))
    (format t "~A: ~A~%" (car pair) (cdr pair)))
  (terpri)) 
```

让我们看看它是如何工作的：

```
CL-USER> (maprows 'print-row
                  '((:|total_rows| . 2) (:|offset| . 0)
                    (:|rows|
                     ((:|id| . "gjc") (:|key| . "hulk")
                      (:|value|
                        (:|_id| . "gjc2321o3io13")
                        (:|_rev| . "3-b6433781c65460f2c9b1f1a153953171")
                        (:NAME . "Dr Bruce Banner")
                        (:|kind| . "users")
                        (:|username| . "hulk")
                        (:|title| . "gamma radiations: what to do ?")))
                     ((:|id| . "irnmn239223") (:|key| . "ironman")
                      (:|value|
                        (:|_id| . "irnmn2     39223") 
                        (:|_rev| . "5-2b6cf739d24b1208fe8eca70e37ffdc9")
                        (:|name| . "tony stark")
                        (:|title| . "why iphone 5 sucks - but i own one \"")
                        (:|kind| . "users")
                        (:|username| . "ironman")
                        (:|text| .  "welcome to post number one ......"))))))
_id: gjc2321o3io13
_rev: 3-b6433781c65460f2c9b1f1a153953171
NAME: Dr Bruce Banner
kind: users
username: hulk
title: gamma radiations: what to do ?

_id: irnmn2     39223
_rev: 5-2b6cf739d24b1208fe8eca70e37ffdc9
name: tony stark
title: why iphone 5 sucks - but i own one "
kind: users
username: ironman
text: welcome to post number one ......

(NIL NIL) 
```

如您所见，`MAPROWS`它也收集应用程序的结果，`FN`底层也是如此`MAPCAR`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T09:31:10.497

这里有一点不同的方法，虽然，我并不完全满足于此。也许有人会纠正我/提出更好的方法，但这种整体策略被称为对象映射。即，当您从数据库中的表中检索数据时，您将构建一个对象，该对象在您编写应用程序逻辑的语言中更加舒适。

现在，具有讽刺意味的是，CouchDB 应该超越这个阶段——因为它将对象编码为 JSON 格式，它对于 JavaScript 来说是“原生的”，它是常用的。但是，您在 CL 中收到的格式不适合使用/它不是对象的良好原生表示。现在，由于您不能在客户端浏览器应用程序中使用 CL，我真的看不出您的组合有什么意义......我的意思是，您在服务器端没有赢得任何东西（很可能，您会失去性能- 明智，但由于这是您的个人博客，因此这不太可能成为问题）。

所以，下面是一些天真的对象映射的尝试：

```
(defclass db-object () ())

(defun slot-list-from-query (query)
  (mapcar
   #'(lambda (pair)
       (let ((name (string-upcase (symbol-name (car pair)))))
         (list (intern name)
               :accessor
               (intern (concatenate 'string name "-OF"))
               :initarg (intern name "KEYWORD")))) (eval query)))

(defmacro table-to-class (name describe-table-query)
  `(let ((db-class (defclass ,name (db-object)
                     ,(slot-list-from-query describe-table-query))))
     (defmethod initialize-instance :after ((object ,name) &key raw-data)
                (mapcar
                 #'(lambda (pair)
                     (setf (slot-value object
                                       (find-symbol
                                        (string-upcase
                                         (symbol-name (car pair)))))
                           (cdr pair))) raw-data))
     db-class))

(defparameter *raw-data*
  '((:|total_rows| . 2) (:|offset| . 0)
    (:|rows|
     ((:|id| . "gjc") (:|key| . "hulk")
      (:|value|
        (:|_id| . "gjc2321o3io13")
        (:|_rev| . "3-b6433781c65460f2c9b1f1a153953171")
        (:|name| . "Dr Bruce Banner")
        (:|kind| . "users")
        (:|username| . "hulk")
        (:|title| . "gamma radiations: what to do ?")))
     ((:|id| . "irnmn239223") (:|key| . "ironman")
      (:|value|
        (:|_id| . "irnmn2     39223") 
        (:|_rev| . "5-2b6cf739d24b1208fe8eca70e37ffdc9")
        (:|name| . "tony stark")
        (:|title| . "why iphone 5 sucks - but i own one \"")
        (:|kind| . "users")
        (:|username| . "ironman")
        (:|text| .  "welcome to post number one ......"))))))

(table-to-class example-mapping (car (cdaddr *raw-data*)))
(id-of (make-instance 'example-mapping :id "foo")) ; foo
(id-of (make-instance 'example-mapping :raw-data (car (cdaddr *raw-data*)))) ; gjc 
```

我冒昧地稍微“修复”了您的数据，以使其看起来一致。此外，通常您会在运行代码之前对表进行描述，因此在运行时声明类的整个麻烦将减少为您在部署之前会执行的一些机械操作，并且不需要`eval`在此宏。我这样发布它是为了保留您拥有的信息并让它看起来好像在部署代码后收到了一样。

如果您想使用它，您可以删除`eval`并执行以下操作：

```
(table-to-class example-mapping ((name-1 . value-1) (name-2 . value-2) ...)) 
```

# css - 从浏览器到浏览器对 css 文件的大小和数量有什么限制？

> ID：12683709
> 
> 赞同：1
> 
> 时间：2012-10-02T02:17:46.533
> 
> 标签：css, internet-explorer, cross-browser, stylesheet

阅读[Internet Explorer 的 CSS 规则限制](https://stackoverflow.com/q/9906794/985284?stw=2)后，似乎 Internet Explorer 将仅加载 31 个样式表，并且每个样式表必须包含少于 4095 个规则。

其他浏览器和不同版本是否有这样的规则，如果有，它们是什么？还有其他类似的规则，比如脚本或 html 页面大小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:52:47.030

看起来这确实是一个过时的机制，无论多么真实。我编写了一个非常快速的程序来创建 35 个样式表，其中包含 4500 个类，每个类具有 1 个 css 属性。然后我用一个快速的小脚本动态地创建了指向这些样式表的链接：

```
$(document).ready(function() {
try
  {
    for(var i = 0; i<35; i++)
    {
        var el = document.createElement("link");
        el.type = "text/css";
        el.rel = "stylesheet";
        el.href = "style" + i + ".css";
        document.getElementsByTagName("head")[0].appendChild(el);
    }
  }
catch(e)
  {
      alert(e);
  }
}); 
```

这在 Chrome 和 IE9 中都可以正常工作，不会引发任何错误。然后，我使用 MSDN 对 createStyleSheet 的引用在 IE9 中测试了相同数量的工作表，将 for 循环中的代码替换为：

```
document.createStyleSheet("style" + i + ".css"); 
```

这确实引发了存储不足的错误。我还要注意这个函数只能在 IE 中工作，试图在 Chrome 中运行这个脚本会抛出一个“createStyleSheet”类型的未知对象错误。

这是代码的工作版本：http: [//fluidev.com/cssMax/test.html](http://fluidev.com/cssMax/test.html)

# python - Flask MondoDB 游标查询问题

> ID：12683710
> 
> 赞同：0
> 
> 时间：2012-10-02T02:18:07.027
> 
> 标签：python, mongodb, flask

我正在尝试创建一个使用 MongoDB 在 Flask 中吐出 JSON 的 API。

在我的控制器中，我有这样的路由设置：

```
@frontend.route('/api/get_images_by_building_id/<building_id>')
def api_get_images_by_building_id(building_id):
    building_images = database.get_images_by_building_id(building_id)
    return building_images 
```

在作为数据库导入的 db.py 中，我有以下两个功能：

```
def get_image_ids_by_building_id(self, building_id):
    try:
        return self.buildings.find_one(ObjectId(building_id),{"vertical_images":1})["vertical_images"]
    except:
        return None 
```

这将返回：

```
[ObjectId('506638290f536676fc004702'), ObjectId('506638290f536676fc004703'), ObjectId('506638290f536676fc004704'), ObjectId('506638290f536676fc004705'), ObjectId('506638290f536676fc004706'), ObjectId('506638290f536676fc004707'), ObjectId('506638290f536676fc004708')] 
```

第二个功能：

```
def get_images_by_building_id(self, building_id):
    try:
        image_ids = self.get_image_ids_by_building_id(building_id)
        temp = self.images.find({ "_id" : { "$in" : image_ids } })
        return temp
    except:
        return None 
```

处理 mongo 游标对象的最佳实践是什么？它会导致问题，因为我无法在控制器中对其进行 jsonify。在数据库函数中，我应该完全按照我想要的方式操作数据，还是应该在控制器中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:52:09.203

我倾向于让请求处理程序尽可能简单和精简。如果`json.dumps`对您不利，并且您不喜欢将一堆格式/序列化特定代码放在数据库模块中，我通常会创建一个名为`serializers.py`自定义输出的模块。

至于最佳实践，我认为最好不要放一堆，“我希望我的控制器完全像这样返回它，所以我会将所有这些特定的东西放在我的 db 模块中”。如果您需要返回 json 以外的其他内容怎么办（我知道这不太可能）*！？*db 模块最好返回 db 对象（而不是自定义序列化的 json 字符串）并拥有一个知道如何序列化文档的单独模块。

# java - 使用 Play 2 和远程 Akka 集群实现序列化

> ID：12683712
> 
> 赞同：2
> 
> 时间：2012-10-02T02:18:23.460
> 
> 标签：java, serialization, playframework-2.0, akka

我有一个连接到远程 Akka 集群系统的游戏框架 2，两个系统都在 java 中。我有一个包装在一个类中的数据结构，并且我已经在包装类上实现了可序列化。我想使用数据结构进行远程计算，但是每当我尝试将包装类发送到远程 Akka 系统时，都会出现错误。

下面是代码片段。

这是包装类

```
package controllers;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Map;

public class Coordinates implements Serializable{

    String className = null;
    Map <String,ArrayList<Object>> jMap = null;
    boolean train = false;

    public Coordinates() { train = true;}

    public Coordinates (String className)
    {   
        this.className = className;     
    }

    public Coordinates (Map <String,ArrayList<Object>> jMap , boolean b)
    {           

        this.jsonMap = jMap;    
        train = b;
             }          
} 
```

这是发送对象的 Actor 类

```
package controllers;

import akka.actor.ActorRef;
import akka.actor.UntypedActor;

public class LocalActor extends UntypedActor {

     ActorRef masterActor;
    @Override
    public void onReceive(Object arg) throws Exception {
         if(arg instanceof Coordinates)
         {   Coordinates msg = (Coordinates) arg ;
             masterActor.tell(msg , getSelf());
         }      
    }

    public void preStart()
    {
      masterActor = getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/masterActor");
    }

} 
```

这是接收课程的 Akka 演员

```
package Rubine_Cluster;

import java.io.Serializable;

import akka.actor.*;

public class MasterActor extends UntypedActor implements Serializable{

    public MasterActor(){System.out.println(" the masteractor has been started ");}

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.print(" this is from before me to you  "+message.toString());

         if(message instanceof Coordinates)
         {   Coordinates msg = (Coordinates) message;

             try { System.out.print(" this is from message  " + msg.jsonMap.toString());
                  getSender().tell( 1234 , getSelf());
                } catch (Exception e) {
                  getSender().tell(new akka.actor.Status.Failure(e), getSelf());
                  throw e;
                }

    }
         else{ unhandled(message);}
  }  
} 
```

这是来自我的 Eclipse IDE 的错误消息

```
[INFO] [10/02/2012 02:58:35.606] [main] [ActorSystem(MasterNode)] REMOTE: RemoteServerStarted@akka://MasterNode@127.0.0.1:2552
 Master Node is called 
 the masteractor has been started 
[INFO] [10/02/2012 02:59:28.223] [MasterNode-7] [ActorSystem(MasterNode)] REMOTE: RemoteClientStarted@akka://LocalNode@127.0.0.1:63305
[ERROR] [10/02/2012 02:59:28.334] [MasterNode-7] [ActorSystem(MasterNode)] REMOTE: RemoteServerError@akka://MasterNode@127.0.0.1:2552] Error[java.lang.ClassNotFoundException:controllers.Coordinates
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at java.io.ObjectInputStream.resolveClass(Unknown Source)
    at akka.util.ClassLoaderObjectInputStream.resolveClass(ClassLoaderObjectInputStream.scala:12)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at akka.serialization.JavaSerializer$$anonfun$1.apply(Serializer.scala:121)
    at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
    at akka.serialization.JavaSerializer.fromBinary(Serializer.scala:121)
    at akka.serialization.Serialization.deserialize(Serialization.scala:73)
    at akka.remote.MessageSerializer$.deserialize(MessageSerializer.scala:22)
    at akka.remote.RemoteMessage.payload(RemoteTransport.scala:210)
    at akka.remote.RemoteMarshallingOps$class.receiveMessage(RemoteTransport.scala:276)
    at akka.remote.netty.NettyRemoteTransport.receiveMessage(NettyRemoteSupport.scala:30)
    at akka.remote.netty.RemoteServerHandler.messageReceived(Server.scala:182)
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
    at akka.remote.netty.RemoteServerHandler.handleUpstream(Server.scala:154)
    at org.jboss.netty.channel.StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:366)
    at org.jboss.netty.channel.StaticChannelPipeline$StaticChannelHandlerContext.sendUpstream(StaticChannelPipeline.java:528)
    at org.jboss.netty.handler.execution.ChannelUpstreamEventRunnable.run(ChannelUpstreamEventRunnable.java:44)
    at org.jboss.netty.handler.execution.OrderedMemoryAwareThreadPoolExecutor$ChildExecutor.run(OrderedMemoryAwareThreadPoolExecutor.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
] 
```

我也在 Remote Akka 系统中实现了 Coordinate 类。任何建议或帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:34:53.570

您不必两次实现 Coordinate 类。您应该有一个包含所有模型类（坐标等）的模块，并根据第一个创建其他两个 Akka 项目。

你应该有这种项目/模块依赖：

```
module containing Coordinate class (Maven Project)
   |
   ---- Local Actor (Play project)
   |
   ---- Remote Actor (Maven Project) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:11:07.120

显然，您的主演员在其类路径中没有控制器。坐标。另一个答案建议代码可重用性，但这不是根本原因；在某些情况下也没有意义（您可以在本地和主控中进行不同的操作）。你的男主角是怎么炼成的？它的类路径是什么样的？只需将类添加到主项目，你应该没问题。

# regex - 可选捕获组未捕获

> ID：12683713
> 
> 赞同：2
> 
> 时间：2012-10-02T02:18:31.853
> 
> 标签：regex, parsing

```
<tr><td align=right>Name:</td><td align=left><b><font color=black>Nathan</font></b></td></tr>
<tr><td align=right>Extension:</td><td align=left><b>222</b></td></tr> 
```

我有上面的~~HTML~~文本（无法更改），我想要一个返回 3 个捕获组、标签`(Name|Extension)`字体颜色`(black|red)`和数据的正则表达式`(\w+)`。

我在返回捕获组 2（字体颜色）时遇到了一些问题。如您所见，它不在表格的“扩展”行中，因此我将捕获组设为可选。当我这样做时，第一行根本不匹配。我已经尝试了很多不同的量词组合的试验和错误，但我仍然无法得到我正在寻找的结果。

这是我到目前为止的模式：`(Name|Extension):.*?(?:<font color=(black|red)>)?.*?>(\w+)`

我相信它`.*?`正在消耗可选的捕获组，并且只匹配第 1 组和第 3 组。如果有人可以向我解释我哪里出错了，那就太好了。

编辑：作为一个试图了解更多关于正则表达式的人，如果人们可以将我上面的数据解释为不可变文本而不是 HTML，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:06:44.163

这是您正在寻找的暴行：

```
 (Name|Extension).*?<b>[<font color=]{0,12}(black|red)?>?(.*?)</.* 
```

它非常脆弱，如果您处理的 HTML 格式与您提供的示例略有不同，我绝对不会期望它能够工作。不过，如果那个 HTML 确实*很*糟糕，我认为你应该没问题。

请注意，这不能被视为 Signor Mendoza 在使用正则表达式解析 HTML 的固有不可能性方面是错误的证据；恰恰相反，这证明他在每一个细节上都是绝对正确的。这不是解析；这是*作弊*，就像我说的那样，如果您正在使用的源 HTML 与您提供的示例一样丑陋，您只会侥幸逃脱。

测试用例：

```
 <tr><td align=right>Name:</td><td align=left><b><font color=black>Nathan</font></b></td></tr>
 <tr><td align=right>Extension:</td><td align=left><b>222</b></td></tr>
 <tr><td align=right>Name:</td><td align=left><b><font color=red>Thomas</font></b></td></tr>
 <tr><td align=right>Extension:</td><td align=left><b>223</b></td></tr>
 <tr><td align=right>Name:</td><td align=left><b><font color=black>Frank</font></b></td></tr>
 <tr><td align=right>Extension:</td><td align=left><b>224</b></td></tr>
 <tr><td align=right>Name:</td><td align=left><b><font color=red>Steve</font></b></td></tr>
 <tr><td align=right>Extension:</td><td align=left><b>225</b></td></tr>
 <tr><td align=right>Name:</td><td align=left><b><font color=black>Tony</font></b></td></tr>
 <tr><td align=right>Extension:</td><td align=left><b>226</b></td></tr> 
```

结果：

```
 Name black Nathan
 Extension  222
 Name red Thomas
 Extension  223
 Name black Frank
 Extension  224
 Name red Steve
 Extension  225
 Name black Tony
 Extension  226 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T03:14:40.243

问题是不情愿的量词。第一个开始`.*?`不消耗任何内容，允许正则表达式的下一部分尝试匹配 . 之后的 FONT 标记`:`。它没有找到一个，但这没关系，因为那部分是可选的。然后第二个`.*?`接管，只消耗它必须的量，直到`>(\w+)`可以匹配。所以如果有*一个*FONT 标签，它会被第二个匹配`.*?`，而不是你想要的可选组。

但是不要费心使量词变得贪婪；它*可能会*起作用，但更有可能只是失败的效率较低。试试这个：

```
<td[^>]*>(Name|Extension):</td><td[^>]*><b>(?:<font color=(black|red)>)?([^<]*)< 
```

因为我明确匹配了标签后面的所有标签，所以如果有一个，它就在正确的位置来匹配 FONT 标签。如果它在那里，`group(2)`将包含颜色；否则它将是`null`。

# android - 从包中获取活动列表

> ID：12683717
> 
> 赞同：1
> 
> 时间：2012-10-02T02:19:08.320
> 
> 标签：android, android-activity, package

我是 Android 新手，我试图从包中检索活动列表，但出现错误。

我试过这段代码

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_LAUNCHER);
PackageManager pm = this.getPackageManager();

PackageInfo info = pm.getPackageArchiveInfo(getPackageName(), PackageManager.GET_ACTIVITIES);

for (android.content.pm.ActivityInfo a : info.activities) {
    Log.i("ActivityInfo", a.name); 
} 
```

但我得到一个空指针异常

```
10-02 02:17:12.168: E/AndroidRuntime(367): FATAL EXCEPTION: main
10-02 02:17:12.168: E/AndroidRuntime(367): java.lang.NullPointerException
10-02 02:17:12.168: E/AndroidRuntime(367):  at nyp.android.project.AnalyzeActivity.getActivityList(AnalyzeActivity.java:75)
10-02 02:17:12.168: E/AndroidRuntime(367):  at nyp.android.project.AnalyzeActivity.access$0(AnalyzeActivity.java:59)
10-02 02:17:12.168: E/AndroidRuntime(367):  at nyp.android.project.AnalyzeActivity$1.onClick(AnalyzeActivity.java:48)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.view.View.performClick(View.java:2408)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.view.View$PerformClick.run(View.java:8816)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.os.Handler.handleCallback(Handler.java:587)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.os.Looper.loop(Looper.java:123)
10-02 02:17:12.168: E/AndroidRuntime(367):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-02 02:17:12.168: E/AndroidRuntime(367):  at java.lang.reflect.Method.invokeNative(Native Method)
10-02 02:17:12.168: E/AndroidRuntime(367):  at java.lang.reflect.Method.invoke(Method.java:521)
10-02 02:17:12.168: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-02 02:17:12.168: E/AndroidRuntime(367):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-02 02:17:12.168: E/AndroidRuntime(367):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-01T16:42:13.690

使用: `getPackageInfo`_`getPackageArchiveInfo`

```
try {
    PackageInfo packageInfo = context.getPackageManager()
            .getPackageInfo(packageName, PackageManager.GET_ACTIVITIES);

    for (ActivityInfo activityInfo : packageInfo.activities) {
        Log.i("ActivityInfo", activityInfo.name);
    }
} catch (PackageManager.NameNotFoundException e) {
    // handle exception
} 
```

# android - Android：Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用于参数 (MyBroadCastReceiver, String, int)

> ID：12683719
> 
> 赞同：1
> 
> 时间：2012-10-02T02:19:29.607
> 
> 标签：android, toast

我无法弄清楚错误，请帮助这是代码。我不断收到“Toast 类型中的方法 makeText（Context，CharSequence，int）不适用于参数（MyBroadCastReceiver，String，int）”

```
 public class MyBroadCastReceiver extends BroadCastReceiver {

public void onReceive(Context context, Intent alarmIntent) {
    // TODO Auto-generated method stub

    Toast.makeText(MyBroadCastReceiver.this, "Alarm worked", Toast.LENGTH_LONG).show();
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T02:21:29.787

应该

```
Toast.makeText(context, "Alarm worked", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T02:20:58.803

尝试 makeText(context, ...) 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T05:16:55.613

您必须让活动作为上下文传递。尝试

Toast.makeText(MyBroadCastReceiver.this.getActivity(),"报警工作", Toast.LENGTH_LONG).show();

# java - 将字符串拆分为 3 部分并转换为 int

> ID：12683725
> 
> 赞同：0
> 
> 时间：2012-10-02T02:20:16.360
> 
> 标签：java, string, int

```
import java.util.Scanner;
public class Question3 {
public static void main(String[] args) {
    String input;
    int i1,i2,i3;
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Input a 3 digit number ");
    input = keyboard.next();
    String[] numbers = input.split("\\s+");
    i1= Integer.parseInt(numbers[0]);
    i2= Integer.parseInt(numbers[1]);
    i3= Integer.parseInt(numbers[2]);
    System.out.println(i1);
    System.out.println(i2);
    System.out.println(i3);

    }   
} 
```

这是它应该做的：有人输入 1 2 3 并且程序应该输出

1

2

3 但是，它会在 i2= ... 行引发 arrayindexoutofbounds 执行。

顺便说一句，我需要他们成为 INT，因为我之后需要对他们做一些事情......我该如何解决这个问题？（我班的问题是……）

> 编写一个程序，使用 Scanner 读取三个整数（正数）显示最大的三个数。（请不要使用运算符 && 或 || 中的任何一个来完成。这些运算符将很快在课堂上介绍。类似的循环不是必需的。）
> 
> 一些示例运行：
> 
> 请输入 3 个整数：5 8 3
> 
> 三个的最大值是：8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:22:36.707

而不是 `input = keyboard.next();`尝试 `input = keyboard.nextLine();`

根据[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)文档，默认分隔符是空格 -

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

而方法[`next()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)——

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。

所以在我们的例子中，`keyboard.next()`只返回第一个数字作为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:30:00.307

```
import java.util.Scanner;
public class Test {
public static void main(String[] args) {
    int i1,i2,i3;
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Input a 3 digit number ");

    i1= Integer.parseInt(keyboard.next());
    i2= Integer.parseInt(keyboard.next());
    i3= Integer.parseInt(keyboard.next());
    System.out.println(i1);
    System.out.println(i2);
    System.out.println(i3);

    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T09:05:23.640

```
import java.util.Scanner;

class Question3 {
    public static void main(String[] args) {

        String input;
        int i1,i2,i3;
        Scanner keyboard = new Scanner(System.in);
        System.out.println("Input a 3 digit number ");
        input = keyboard.next();
        int i=0;
        for (String result: input.split("\\s+")){
             System.out.println(result.charAt(i++));
             System.out.println(result.charAt(i++));
             System.out.println(result.charAt(i++));
        }

    }   
} 
```

您的原始代码包含以下错误：`numbers[0]`包含没有空格的 String 的所有元素，因此在尝试访问时会引发错误`numbers[1]`。在这段代码中，`for`循环只执行一次，不带空格的字符串存储在字符串引用结果中，因此使用显示数字`result.charAt()`给出了正确的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T02:21:59.823

用于`keyboard.nextInt()`读取 int 值。如果需要读取 3 个值，请使用 3 次。

文档链接：

*   [扫描仪#nextInt](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)。

> 将输入的下一个标记扫描为 int。如果下一个标记无法转换为有效的 int 值，则此方法将抛出 InputMismatchException，如下所述。如果翻译成功，扫描仪会超过匹配的输入。

如果您不知道下一个数据是否可以是整数，则可以使用[`Scanner#hasNextInt`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29)method.

# sql - sql查询中特定列的多个条件

> ID：12683729
> 
> 赞同：0
> 
> 时间：2012-10-02T02:21:02.800
> 
> 标签：sql, special-characters, sql-like

示例表（Person_data）

```
Name   |   Area      |   Id
=============================== 
Jack   | A_102       |  102   
Roy    | Abc-34      |  109   
tom    | ABC6778     |  107    
Aly    | hj23        |  122   
Saly   | dsfds       |  342 
```

我需要一个查询，以便它返回 Area 列不包含`_`or`-`或`Abc`or的所有行`ABC`。

我的查询

```
Select * from Person_data 
where area not like '%-%' 
or area not like '%_%' 
or area not like '%Abc%' 
or area not like '%ABC%'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:27:37.253

> 返回区域列不包含“_”或“-”或“Abc”或“ABC”的所有行

您需要将这些搜索条件与`AND`'s 结合起来，但问题是`_`which 是`LIKE`谓词中的保留通配符。您必须在`LIKE`谓词 using中对其进行转义，或者您可以使用类似 的关键字`[]`确定要使用的任何转义字符来转义它 ，因此它将被视为文字，并且它是这样的标准方式：`ESCAPE``LIKE '%\_%' ESCAPE '\'`

```
SELECT * 
FROM PersonData
WHERE area NOT LIKE '%-%'
AND area NOT LIKE '%\_%' ESCAPE '\'
AND area NOT LIKE '%Abc%' 
AND area NOT LIKE '%ABC%'; 
```

## [这是一个 SQL Fiddle 演示](http://sqlfiddle.com/#!3/93e9c/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:36:14.617

```
SELECT * 
FROM PersonData
WHERE area NOT LIKE '%-%'
    AND area NOT LIKE '%[_]%' -- brackets for special character matching
    AND area NOT LIKE '%Abc%' 
    AND area NOT LIKE '%ABC%'; 
```

正如其他人所提到的，您可能需要`AND`运算符而不是`OR`运算符，因为您当前的查询看起来可能会返回任何非空值。

此外，您必须对文字下划线的匹配进行[转义或括](https://stackoverflow.com/questions/258757)起来，因为它是SQL Server`_`中的特殊[通配符](http://msdn.microsoft.com/en-us/library/ms179859.aspx)`NOT LIKE '%_%'`（在语义上与 相同`LIKE ''`）。

另一个有趣的事情是同时使用`Abc`and `ABC`，这仅在您需要[区分大小写](http://www.abstraction.net/ViewArticle.aspx?articleID=72)时才需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:22:48.017

您并没有真正提出问题，但我认为您希望您的“ORs”是“ANDs”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T02:24:15.030

将 OR 替换为 AND。现在它得到所有不包含至少一个符号的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T02:27:45.083

您需要`AND`为 WHERE 子句使用条件而不是 OR 条件：

```
SELECT * 
FROM `Person_data` 
WHERE `area` NOT LIKE '%-%' 
AND `area` NOT LIKE '%_%' 
AND `area` NOT LIKE '%Abc%' 
AND `area` NOT LIKE '%ABC%'; 
```

# c# - 聚合多维数组

> ID：12683734
> 
> 赞同：1
> 
> 时间：2012-10-02T02:21:46.280
> 
> 标签：c#, linq, aggregate

试图模块化一些乳胶表生成代码，大量镀金。

```
var MIDRULE = @"\\\midrule";

var a = new []{new []{"a", "b", "c"}, new []{"1", "2", "3"}, new []{"alpha", "beta", "gamma"}};

a.Dump();

a.Aggregate(
        (x,y) => x.Aggregate((i,j) => i + "&" + j) 
           + MIDRULE + Environment.NewLine
           + y.Aggregate((k,l)=>k+"&"+l)).Dump(); 
```

预期结果：

```
a&b&c\\\midrule
1&2&3\\\midrule
alpha&beta&gamma\\\midrule 
```

实际结果：

```
Cannot implicitly convert type 'string' to 'string[]' 
```

如果可能的话，我想用一行聚合命令来做到这一点，已经可以在嵌套循环或各种其他方式中做到这一点，我有兴趣更好地了解聚合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:43:02.700

尝试：

```
string.Concat(a.Select(inner => string.Join("&", inner)
                                + MIDRULE + Environment.NewLine))
      .Dump(); 
```

注意不要`Join`用于外部调用，因为您希望`MIDRULE + Environment.NewLine`附加到包括最后一个在内的每个字符串。

**编辑**：

由于您热衷于`Aggregate`在这里使用（我不推荐它，因为它的可读性较差且*效率*低下），请尝试（未经测试）：

```
a.Aggregate(string.Empty, (x, y) => x 
                                  + y.Aggregate(string.Empty,
                                                (k, l) => k + "&" + l) 
                                  + MIDRULE 
                                  + Environment.NewLine)
 .Dump(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:00:56.897

这是因为您错误地使用了聚合。如果您查看[Aggregate 的定义，](http://msdn.microsoft.com/en-us/library/bb548651.aspx)您会看到定义是：

```
public static TSource Aggregate<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, TSource, TSource> func
) 
```

您注意到泛型仅采用一种类型，因此您隐式调用 Aggregate，这意味着函数的参数都必须是 string[]。当您尝试使用类型字符串作为参数和预期输出时，会发生编译错误。

我想到的一种方法是

```
string.Join( MIDRULE + Environment.NewLine, a.Select(x => string.Join( "&", x))).Dump(); 
```

如果您不想要尾随的 MIDRULE 换行符和已经推荐的

我不确定这是否是解决此问题的最佳方法，但它应该可以工作。

```
string.Concat(a.Select(inner => string.Join("&", inner)
                            + MIDRULE + Environment.NewLine))
  .Dump(); 
```

如果你这样做了。

# ios - iOS 在动态表格顶部创建一个静态单元格

> ID：12683735
> 
> 赞同：3
> 
> 时间：2012-10-02T02:21:47.743
> 
> 标签：ios, xcode, uitableview, dynamic

标题几乎说明了这一点。如何在动态表格顶部创建一个静态单元格？我希望能够将它用作我的桌子的图例。谢谢。

这是我的 tableView 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
JointCAD *currentCall = [[xmlParser calls] objectAtIndex:indexPath.row];
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]];

TableViewCell *cell = (TableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIView *selectionView = [[UIView alloc] initWithFrame:CGRectMake(10, 7, 200, 65)];
    [selectionView setBackgroundColor: [UIColor clearColor]];
    cell.selectedBackgroundView = selectionView;
}

cell.callTypeLabel.text = currentCall.currentCallType;
cell.locationLabel.text = currentCall.location;
cell.unitsLabel.text = currentCall.units;
cell.stationLabel.text = [@"Station: " stringByAppendingString:currentCall.station];

if ([currentCall.callType isEqualToString:@"F"]) {
    cell.imageType = Fire;
}
else {
    cell.imageType = EMS;
}

if ([currentCall.county isEqualToString:@"W"]) {
    cell.imageType1 = Washington;
}
else {
    cell.imageType1 = Clackamas;
}

return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:47:21.977

这看起来更像是您想要表格的标题，而不是静态单元格。如果我理解您的问题，您需要一个位于顶部且不移动的单元格，而动态部分中的其他单元格按正常方式上下滚动。

如果是这种情况，请使用返回标题视图及其大小的 tableviewdelegate 方法。

如果不是这种情况，那么我不明白你的问题，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:32:49.540

我有一个类似的问题。我想要顶部的一部分动态单元格和底部的其他几个部分都是静态的。我使用了一种解决方法，其中我只是操纵了实际出现在顶部的单元格的数量，即使整个 tableView 只是一个静态 tableView。我知道我只会在表格的动态部分中使用最多 7 个单元格，因此只要您确保在动态部分中一次出现的最大单元格数为 <= 7（或任何数字您选择），一切都会顺利进行。这是你要做的：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
 int i;

switch(section) {
case 0:  
//Do a bunch of checking here on how many i actually need. Then, I will just return the required amount. 
//  As long as it is less than the number of cells I have statically placed in my .xib, everything works good.
     return i;
case 1:
     return 3;
case 2:
     return 1;
case 3:
     return 2;        
default:
     return 0;
}
} 
```

然后在您的 willDisplayCell 中，自定义一个或多个动态部分：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell*)currentCell forRowAtIndexPath:(NSIndexPath*)indexPath
{

  //  DB_NSLog((@"will display CELL"));

    if(indexPath.section==0){
        currentCell.textLabel.text=nil;
        for(int i=0;i<numberOfDevices;i++)
        {
            //get the names of connected devices from whatever they're array they are stored in
            //assign to respective labels
            //just using row indexes as tester for passing to the device specifiic settings page

            if(i==indexPath.row){
               //do whatever customization you want here

                currentCell.textLabel.text=[tempDic objectForKey:@"deviceName"];

               // currentCell.textLabel.textAlignment=UITextAlignmentCenter;
                currentCell.textLabel.font=[UIFont fontWithName:@"System" size:17];

                currentCell.textLabel.textColor=[UIColor colorWithRed:0 green:0.32156863 blue:0.54117647 alpha:1.0];

            }
        }

    } 
```

如果您有任何问题，请告诉我！

# web-testing - 网页开发测试

> ID：12683737
> 
> 赞同：0
> 
> 时间：2012-10-02T02:21:53.707
> 
> 标签：web-testing

请说明任何 Web 开发项目必须执行的多/跨浏览器测试条件；尤其是涉及到windows平台的HTML、CSS、JavaScript、J2EE/JSP/Servlets和MySQL技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:40:22.757

我想说这完全取决于 Web 开发公司、客户和特定项目。您可以从测试驱动开发开始（阅读更多[http://en.wikipedia.org/wiki/Test-driven_development](http://en.wikipedia.org/wiki/Test-driven_development)）为您的 JSP/MySQL 的东西。跨浏览器不兼容通常处于频谱的高端（HTML、CSS 和 JS）。在这种情况下，我建议完全忽略过时的浏览器。

与其花费荒谬的时间来弥补仍然停留在互联网复兴中的一小部分人（也就是使用 IE6），您应该正确地教育您的客户和您的应用程序用户将网络引入现代标准的优势。浏览器更新是一个很好的折衷方案，它适用于我们许多对统计数据持谨慎态度的客户（阅读更多[http://browser-update.org/](http://browser-update.org/)）。这是一个小脚本，用于检查浏览器类型/版本并显示有关兼容性和安全风险的非侵入性警告消息，提供有关更新原因和方式的建议。

为了进一步证明您对 IE6 的指控，您可以使用我最喜欢的网站向您的客户展示中国是世界上唯一仍然坚持使用这个神器浏览器的国家（阅读更多[http://www.ie6countdown.com/](http://www.ie6countdown.com/)）。

话虽如此，确保跨浏览器兼容性的最佳方法是严格测试和遵守标准。甚至 IE9 也不再那么糟糕了。使用 css 重置样式表当然也很有帮助。我不确定是否有人足够疯狂以列出所有跨浏览器的不一致（这是值得怀疑的），但我建议在开始您的项目之前进行大量的研究并分配大量的质量检查时间，如果您要求自己，或聘请具有丰富经验和您可以欣赏的投资组合的人。

# objective-c - 从下载的 plist 中重新加载 UITableView 数据

> ID：12683739
> 
> 赞同：0
> 
> 时间：2012-10-02T02:22:13.893
> 
> 标签：objective-c, ios, xcode, uitableview, plist

首先，我对objective-c和ios开发真的很陌生。

我有一个从 Internet 下载的 .plist，然后用于填充 UITableView。我可以在 AppDelegate 中的 ApplicationDidLaunch 方法中让它工作，如下所示。

```
NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *finalPath = [path stringByAppendingPathComponent:@"Data.plist"];
NSURL *theFileURL = [NSURL URLWithString:@"http://dl.dropbox.com/u/8068058/Data.plist"];
NSDictionary *replace = [[NSDictionary alloc] initWithContentsOfURL:theFileURL];
if (replace != nil){
    [replace writeToFile:finalPath atomically:YES];
} 
```

然后我将它设置为 DataPath

```
NSString *Path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *DataPath = [Path stringByAppendingPathComponent:@"Data.plist"];

NSDictionary *tempDict = [[NSDictionary alloc] initWithContentsOfFile:DataPath];
self.data = tempDict;
[tempDict release]; 
```

这一切都很好，然后我填充 TableView 并显示它。如果我向显示表格的 NavgationController 添加一个“刷新”按钮。当我按下它并运行相同的下载代码时

```
[self.tableView reloadData]; 
```

我什么都没有，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:48:08.900

虽然你已经解决了你的问题，但我应该指出一些最好改变的事情。

1.  上面写的代码不应该放在 App Delegate 中。你应该把它放在处理 TableView 的 View Controller 中。这将在启动时更加高效，并且更加面向对象。
2.  如果您打算将此应用程序提交到商店，则应小心将下载的数据存储在`NSDocumentsDirectory`. 如果用户无法随时编辑数据，我**强烈建议您**将其保存在`NSCachesDirectory`. 如果不尝试使用`NSLibraryDirectory`. 由于 iOS5 Apple 不喜欢您将下载的数据存储在`NSDocumentsDirectory`.
3.  谈到缓存，您应该以某种方式缓存您的数据。在上面发布的代码中，您正在下载数据并在每次运行应用程序时保存它。这是毫无意义的，因为如果您没有互联网连接，您的应用程序将无法运行，并且如果您从不加载 plist，则没有必要保存它。
4.  **我强烈推荐**的另一件事是在辅助中执行网络获取`queue`。如果您对其执行网络提取，主队列将被阻止。我知道在这种情况下，这几乎不会引起注意，因为文件很小，但是如果您的互联网连接不好，您会注意到 UI 是如何被阻止的。

我指出这些事情是因为当我开始为 iOS 开发时，我遇到了同样的麻烦。如果您不想了解有关如何执行此操作的更多信息，请随时询问:)

# python - 如何在python中找到Tomcat的PID并杀死它？

> ID：12683745
> 
> 赞同：0
> 
> 时间：2012-10-02T02:23:11.093
> 
> 标签：python, tomcat, grep, pid, sigkill

`shutdown.sh`通常，通过运行其脚本（或批处理文件）来关闭 Apache Tomcat 。在某些情况下，例如当 Tomcat 的 Web 容器托管一个使用多线程执行一些疯狂操作的 Web 应用程序时，`shutdown.sh`优雅地运行会关闭Tomcat 的*某些*部分（因为我可以看到更多可用内存返回到系统），但是 Tomcat进程继续运行。

我正在尝试编写一个简单的 Python 脚本：

1.  来电`shutdown.sh`
2.  运行`ps -aef | grep tomcat`以查找引用了 Tomcat 的任何进程
3.  如果适用，终止进程`kill -9 <PID>`

这是我到目前为止所得到的（作为原型 - 我是 Python BTW 的新手）：

```
#!/usr/bin/python

# Imports
import sys
import subprocess

# Load from imported module.
if __init__ == "__main__":
    main()

# Main entry point.
def main():
    # Shutdown Tomcat
    shutdownCmd = "sh ${TOMCAT_HOME}/bin/shutdown.sh"
    subprocess.call([shutdownCmd], shell=true)

    # Check for PID
    grepCmd = "ps -aef | grep tomcat"
    grepResults = subprocess.call([grepCmd], shell=true)

    if(grepResult.length > 1):
        # Get PID and kill it.
        pid = ???
        killPidCmd = "kill -9 $pid"
        subprocess.call([killPidCmd], shell=true)

    # Exit.
    sys.exit() 
```

我在中间部分苦苦挣扎 - 获取`grep`结果，检查它们的大小是否大于 1（因为`grep`总是返回对自身的引用，所以总是返回至少 1 个结果，我认为），然后解析返回的PID 并将其传递到`killPidCmd`. 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:27:12.770

You can add "c" to ps so that only the command and not the arguments are printed. This would stop grab from matching its self.

I'm not sure if tomcat shows up as a java application though, so this may not work.

PS: Got this from googling: "grep includes self" and the first hit had that solution.

EDIT: My bad! OK something like this then?

```
p = subprocess.Popen(["ps caux | grep tomcat"], shell=True,stdout=subprocess.PIPE)
out, err = p.communicate()
out.split()[1] #<-- checkout the contents of this variable, it'll have your pid! 
```

Basically "out" will have the program output as a string that you can read/manipulate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:44:05.237

如果要将命令的结果保存在 grepResults 中，则需要替换`grepResults = subprocess.call([grepCmd], shell=true)`为。`grepResults = subprocess.check_output([grepCmd], shell=true)`然后您可以使用 split 将其转换为数组，数组的第二个元素将是 pid：`pid = int(grepResults.split()[1])'`

然而，这只会杀死第一个进程。如果打开的进程不止一个，它不会杀死所有进程。为此，您必须编写：

```
grepResults = subprocess.check_output([grepCmd], shell=true).split()
for i in range(1, len(grepResults), 9):
  pid = grepResults[i]
  killPidCmd = "kill -9 " + pid
  subprocess.call([killPidCmd], shell=true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:36:42.813

不需要创建子进程来运行`ps`和字符串匹配输出。`grep`Python 具有出色的字符串处理功能，并且 Linux 在 /proc 中公开了所有需要的信息。procfs mount 是命令行实用程序获取此信息的地方。还不如直接上源码。

```
import os

SIGTERM = 15

def pidof(image):
    matching_proc_images = []
    for pid in [dir for dir in os.listdir('/proc') if dir.isdigit()]:
        lines = open('/proc/%s/status' % pid, 'r').readlines()
        for line in lines:
            if line.startswith('Name:'):
                name = line.split(':', 1)[1].strip()
                if name == image:
                    matching_proc_images.append(int(pid))

    return matching_proc_images

for pid in pidof('tomcat'): os.kill(pid, SIGTERM) 
```

# java - Given an array [a1b2c3d4] convert to [abcd1234]

> ID：12683749
> 
> 赞同：14
> 
> 时间：2012-10-02T02:23:37.093
> 
> 标签：java, arrays, algorithm, array-algorithms

**Constraints :**

1.  O(1) space
2.  O(n) Time

It is not a homework question just a interesting question I came across.

Here are some solutions I could think of but nothing that does it in given constraints.

**Method 1**

*With O(n) memory *

*   Divide the array in two parts recursively. ( keep dividing till the size <=2 for each sub problem )
*   Sort each sub problem with array first and numbers at end.
*   Merge the sub problem arrays

**Method 2**

*In O(n log n) time*

*   Sort the array based Lexicographical order it becomes 1234abcd
*   Reverse both halves of array 4321dcba
*   Reverse the whole string abcd1234

**Method 3**

*If range of numbers was defined*

Also if the case was that numbers are in a specific range then I can initialize a int say track= 0; And set the appropriate bit when I come across a number in array eg (1 << a[2] ) . 1\. Swap alphabets to first half of array 2\. Mark numbers in track variable 3\. later use track to fill in second half of array.

**Method 4** We can use Method 3 with HashMap if we want to remove the constraint of range of integers but then it will need more memory.

Cannot think of a better way to solve the generic problem in O(1) time and O(n) space.

Generic Problem here refers to:

Given a sequence x1y1x2y2x3y3....xnyn where x1 , x2 are alphabets x1 < x2 <.... < xn and y1y2...yn are integers . y1 < y2 <.... < yn Arrange the output as x1x2...xny1y2...yn

Any suggestions ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:52:01.710

是什么`n`？假设这`n`是输入的大小：

这称为列表的卷积。本质上，您必须将一对列表转换`(a,1),(b,2),(c,3),(d,4)`为一对列表`(a,b,c,d),(1,2,3,4)`。它与矩阵的转置操作相同。

无论如何，您必须将结构视为 k 维数组，其中 k = lg n。数组的卷积是当您将索引 i 处的值“移动”到索引 i 按位旋转时得到的结果。在这种情况下，我们希望将索引向右旋转 1 位。这意味着卷积是一个最大循环长度为 k 的排列。诀窍是从每个循环中选择一个索引——这将始终包括 0 和 n-1。

编辑：实际上，您可能想要的是将排列分解为转置的产物。然后，您需要做的就是交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-09T09:59:18.630

@coder 提到的循环领导算法有效。只需确保将数组拆分为 (3^n + 1) 的大小。应用循环领导算法，然后合并它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T07:43:51.687

解决方案：

1.  第一个（索引 0）和最后一个（索引 n-1）不动。
2.  总移动次数为 (n - 2)
3.  源中的偶数元素是字母。他们进入上半场。

    target = j/2 // n 是偶数

4.  源中的奇数元素是数字，它们移动到后半部分。

    目标 = n/2 + 楼层(j/2)

5.  从第一个元素开始，将其移动到其目标位置。

6.  将您在目标位置找到的内容移动到其目的地，依此类推，直到形成一个循环。注 1：有时，循环不包括列表中的所有元素，因此，继续 j + 2 注 2：有时，在一个循环结束时，会得到所需的解决方案，但如果我们继续，数组会再次被打乱。要解决此问题，请计算发生的移动次数，并在达到 n - 2 时停止。

您可以尝试运行代码，在此处克隆和编辑 [Online Java Compiler IDE](https://kasadara.com/p/c21c895f-08d1-4c7b-bf08-a6b0a423196a "在线Java编译器IDE")

* * *

```
int maxShifts = n - 2; // This is required to fix going around and messing up.
int shifts = 0;

for (int i = 1; i < n && shifts < maxShifts; i+=2) {
  int source = i;
  char itemToMove = array[source];
  do {
    int target;
    if (source % 2 == 0) {
      target = source / 2; // Even index is an alphabet
    } else {
      target = n/2 + source/2; // Odd index is a digit, that goes in the second half
    }
    char tmp = array[target];
    array[target] = itemToMove;
    itemToMove = tmp;

    shifts++;
    source = target;

  } while (i != source /*&& shifts < maxShifts*/); // Full cycle reached

} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-05-10T03:41:49.930

这是我在 O(n) 中的算法。

无效的cycle_leader（int *arr，int n）{

```
for (int i = 1; i < n / 2; i+= 2)
{
    int j = i;
    int save;
    int tmp = arr[i];

    do{
        if (j & 1) //odd index element
            j = n / 2 + j / 2;
        else
            j = j / 2;

        save = arr[j];
        arr[j] = tmp;
        tmp = save;
    } while(j != i);
} 
```

}

# autohotkey - Autohotkey - 每秒递减一次变量

> ID：12683751
> 
> 赞同：0
> 
> 时间：2012-10-02T02:23:40.877
> 
> 标签：autohotkey

我不是 AutoHotKey 专家，如果变量每秒一次大于 0，我会遇到递减变量的问题：

```
Loop
{
If spaceFreq > 0
    spaceFreq--
If returnFreq > 0
    returnFreq--
Sleep, 1000
} 
```

这个脚本有什么问题？变量并没有减少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:24:12.003

```
to decrement a value and store the result back in the same variable directly,
you must do
ex: Var := --x instead of Var := x--
because --x decrements X immediately and then assigns its value to Var
x-- increments X only after assigning the current value of X to Var consequently, 
not modifying the original variable, if no variable is specified. 
```

[在此处](http://www.autohotkey.com/docs/Variables.htm#Operators)阅读有关递减的更多信息...我建议使用[SetTimer](http://www.autohotkey.com/docs/commands/SetTimer.htm)，而不是循环和睡眠..

前任：

```
#Persistent
SetTimer, decrementlabel, 1000 ;1000 ms = 1 second
return

decrementlabel:
If spaceFreq > 0
   --spaceFreq
If returnFreq > 0
   --returnFreq
return 
```

# c# - System.Collections.ObjectModel.ObservableCollection`1 Error

> ID：12683756
> 
> 赞同：1
> 
> 时间：2012-10-02T02:25:16.770
> 
> 标签：c#, wcf, portable-class-library

I'm using ObservableCollection in a portable library but I'm getting the error below. How can I solve this problem?

> 'System.Collections.ObjectModel.ObservableCollection`1<MyClass>' does not contain a definition for 'Add' and no extension method 'Add' accepting a first argument of type 'System.Collections.ObjectModel.ObservableCollection`1' could be found (are you missing a using directive or an assembly reference?)

edited: I have this class in a portable library

```
Class A
{

public ObservableCollection<MyClass> MyList { get;set;}

} 
```

and trying to use it in a WCF Service.

```
myA.MyList.Add(new MyClass()); 
```

Second Edit: I figured it out by putting my class having the observable collection property to a different project/library. But I'm still wondering why I got that strange error.

Another solution for this question would be a better solution structure for my projects. I'm still trying to manage it.

I am designing a Silverlight project consuming a WCF service. I have some common classes to share in both Silverlight and the WCF Service. I could not make it work by using just a portable class and share because I need some data structures to use like ObservableCollection and SortedList etc. Portable classes do not have this. Because of that reason I am having Surrogate classes in different libraries but this doesnt look good. How should I design it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:33:01.353

该错误听起来像是您正在尝试将类型的项目添加到由对象列表组成`ObservableCollection`的现有项目中，例如：`ObservableCollection``MyClass`

```
ObservableCollection<object> miscList = new ObservableCollection<object>();
ObservableCollection<MyClass> realList = new ObservableCollection<MyClass>();
realList.Add(miscList); // miscList isn't a "MyClass" object =[ 
```

尝试检查引发错误的行并确保您传递了正确的变量（可能是错字）。

**更新**
您的代码示例证实了这种情况。您将列表定义为`ObservableCollection<MyClass>`，这意味着插入此列表的任何对象*都*必须通过 的实例`MyClass`或继承*自* `MyClass`。

在以下行中，您尝试将类型的对象添加`A`到列表中，并且`A`它既不是`MyClass`也不是继承自`MyClass`：

```
myA.MyList.Add(new A()); 
```

要解决此问题，您将需要类`A`继承`MyClass`( `class A implements MyClass`)，将列表更改为`ObservableCollection<A>`，或者重新考虑需要`A`向该列表添加类型的原因（也许您需要两个列表来代替？）。

# grails - How to generate, sign and distribute passbook passes via email with Grails?

> ID：12683763
> 
> 赞同：1
> 
> 时间：2012-10-02T02:26:05.130
> 
> 标签：grails, ios6, passbook

Are there any good plugins, tutorials, etc., that walk through this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:55:59.040

我推荐[jpasskit](https://github.com/bitzeche/jpasskit)。下面是一些用于创建通行证的示例代码：

```
PKPass pass = new PKPass()
// add information to the pass

def certFile = getCertificatePath() + File.separator + P12_CERT_NAME
def wwdrca = getCertificatePath() + File.separator + APPLE_WWDRCA_NAME
def tempDir = createTempDir()

PKSigningInformation pkSigningInformation = PKSigningUtil.loadSigningInformationFromPKCS12FileAndIntermediateCertificateFile(
        certFile,
        PASSBOOK_SIGNING_PASSWORD,
        wwdrca)
byte[] passZipBytes = PKSigningUtil.createSignedAndZippedPkPassArchive(pass, tempDir.absolutePath, pkSigningInformation) 
```

正如@Fabiano 所指出的，您可能希望按照[Apple 指南了解上述一些内容。](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1)然后要将您的通行证附加到电子邮件中，您可以使用[Mail 插件](http://grails.org/plugin/mail)：

```
List myPasses = getPasses() // using code from above, plus adding unique names to passes
def contentType = "application/vnd.apple.pkpass"
mailService.sendMail {
            multipart true
            getMessage().setTo(emailAddresses as String[])
            from(mailFromAddress)
            subject(subjectString)
            body(view: bodyTemplate, model: model)
            myPasses.each {
                attachBytes(it.name, contentType, it.bytes)
            }
        } 
```

其中 it.bytes 指的是 passZipBytes，it.name 是 pass 的唯一名称，例如条形码编号。你需要在这里或那里填补一些空白，但这是如何做到这一点的基础。

Grails 2.x 和 jpasskit-0.0.2 之间存在 bouncycastle 依赖问题。让他们玩得好：

```
inherits("global") {
    ...
    excludes 'bcprov-jdk15', 'bcpg-jdk15'
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:27:36.827

我们最近完成了我们的 grails 项目[LIKELLA.com](http://likella.com)

免费的“自己动手”忠诚度平台。

只需按照[苹果指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1)。

为了登录 grails，我们使用了[bouncy castle library](http://www.bouncycastle.org/)

可以在[此处](http://i-proving.com/2007/09/21/pkcs7-signatures-using-bouncy-castle/)找到在 PKCS7 中使用 bouncy caste 进行签名的指南，它没有更新到最后一个充气城堡版本，但它是一个很好的起点。

如果您有更多帮助，我们甚至可以在 likella dot com 的 info 上提供商业支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:10:02.247

如果您想在不使用 BouncyCastle 的情况下对其进行签名，请查看以下问题：

[https://security.stackexchange.com/questions/13910/pkcs7-encoding-in-java-without-external-libs-like-bouncycastle-etc](https://security.stackexchange.com/questions/13910/pkcs7-encoding-in-java-without-external-libs-like-bouncycastle-etc)

我实际上将使用这种方法对内容进行签名。

# php - How to put echo response (text) in alert box via ajax?

> ID：12683764
> 
> 赞同：3
> 
> 时间：2012-10-02T02:26:25.597
> 
> 标签：php, ajax, response, echo

i'm new to php and ajax and i`m trying to send a php form data via ajax (without the reflesh) and display the echo msg of the php on an alert box via ajax sucess, but it didnt work. The code goes like this:

```
jQuery(document).ready(function(){
        jQuery('#ajax_form').submit(function(){
            var dados = jQuery( this ).serialize();

            jQuery.ajax({
                type: "POST",
                url: "env.php",
                data: dados,
                success: function( data )
                {
                    alert( data );
                }
            });

            return false;
        });
    }); 
```

and the php echo responses (send and error):

```
 $erros = "";

 if(empty($_POST['nome'])){
     $erros .= "O nome deve ser preenchido.";
 }

 if(empty($_POST['email']) ){
      $erros .= "O E-mail deve ser preenchido.";
 }else{
      $email = $_POST['email'];
      eregi("([\._0-9A-Za-z-]+)@([0-9A-Za-z-]+)(\.[0-9A-Za-z\.]+)",$email,$match);
    if(!isset($match)){
       $erros .= "O e-mail informado é inválido.";
    }
}

if(empty($_POST['mensagem'])){
    $erros .= "A mensagem deve ser preenchida.";
}
if( empty($erros) ){

all the code to get form data and send

 $send = $phpmail->Send();

    if($send){
        echo "A Mensagem foi enviada com sucesso.";
    }else{
        echo "Não foi possível enviar a mensagem. Erro: " .$phpmail->ErrorInfo;
    }

    }else{
        echo $erros;
    } 
```

I want to put the echo message of env.php on the alert, but i really dont know how to do this, i tryied putting data, but it shows the entire document (with html on text form). Can anyone help me please?

ps: the form is on a .html and the php on a .php

**EDIT:**

I tryied to add `$json = json_encode($erros);` but it wont work, how can i read this on the sucess ajax function? (on a alert box)

* * *

I tryied to add $json = json_encode($erros); but it wont work, how can i read this on the sucess ajax function? (on a alert box)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:27:44.187

`env.php` needs to respond to the AJAX call with only the data you want it to, not an entire page. All you have to do is modify `env.php` to not have all the HTML stuff you don't need.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T10:55:58.307

这样做我的朋友：

```
jQuery(document).ready(function(){
        jQuery('#ajax_form').submit(function(){
            var dados = jQuery( this ).serialize();

            jQuery.ajax({
                type: "POST",
                url: "env.php",
                data: dados,
                success: function( data )
                {
                    var data_output = data;
                    alert(data_output);
                }
            });

            return false;
        });
    }); 
```

# objective-c - 子项目的方法上出现无法识别的选择器错误

> ID：12683766
> 
> 赞同：1
> 
> 时间：2012-10-02T02:26:45.460
> 
> 标签：objective-c, ios5, subproject

我已按照以下链接的“使用”部分下的步骤添加了第 3 方库作为子项目

[http://cocoanetics.github.com/DTCoreText/](http://cocoanetics.github.com/DTCoreText/)

但是，添加子项目后，我的项目可以正确构建，但是我无法调用子项目中定义的任何方法，并且出现以下错误：

```
[NSConcreteAttributedString initWithHTMLData:documentAttributes:]: unrecognized selector
    sent to instance 0x71141e0
2012-10-01 17:34:30.600 final_try[7785:11303] *** Terminating app due to uncaught   
  exception NSInvalidArgumentException', reason: '-[NSConcreteAttributedString 
  initWithHTMLData:documentAttributes:]: unrecognized selector sent to instance 0x71141e0
  *** First throw call stack:
 (0x1971012 0x1796e7e 0x19fc4bd 0x1960bbc 0x196094e 0x22a4 0x1f1e 0x6db7b7 0x6dbda7 
  0x6dcfab    0x6ee315 0x6ef24b 0x6e0cf8 0x1deedf9 0x1deead0 0x18e6bf5 0x18e6962 0x1917bb6 
  0x1916f44 0x1916e1b 0x6dc7da 0x6de65c 0x1c9d 0x1bc5 0x1)
  libc++abi.dylib: terminate called throwing an exception 
```

实现文件有以下代码：

```
NSString *fileName = [[NSBundle mainBundle] pathForResource:@"mailBody1" ofType:@"txt"];
NSString *str1 = [NSString stringWithContentsOfFile:fileName encoding:NSUTF8StringEncoding error:nil];

str1 = [str1 gtm_stringByUnescapingFromHTML];
NSData *data = [str1 dataUsingEncoding:NSUTF8StringEncoding];
_html = str1;

NSAttributedString *string = [[NSAttributedString alloc] initWithHTMLData:data documentAttributes:NULL];
NSLog(@"%@",[string plainTextString]);

NSLog(@"%@",string);

return self; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:49:30.263

也许尝试更改`initWithHTMLData`为`initWithHTML`？所以是这样的：

```
NSAttributedString *string = [[NSAttributedString alloc] initWithHTML:data documentAttributes:NULL]; 
```

我认为没有你所说的方法。

我所指的方法可以[在这个链接](http://cocoanetics.github.com/DTCoreText/Classes/DTHTMLAttributedStringBuilder.html#//api/name/initWithHTML%3aoptions%3adocumentAttributes%3a)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:26:01.680

修复 ！！我只需要在我的应用程序目标下的“Link Binary With Libraries”部分下添加“libDTCoreText.a”静态库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T10:01:36.257

除了 Jerry 的确保 libDTCoreText.a 已链接的答案之外，可能需要的另一个修复是将“-ObjC”添加到项目的构建设置下的其他链接器标志。

# ruby - 如何修改矩阵（Ruby std-lib Matrix 类）？

> ID：12683772
> 
> 赞同：8
> 
> 时间：2012-10-02T02:27:28.623
> 
> 标签：ruby, matrix

我知道Ruby stdlib Matrix 是不可修改的，例如。

```
m = Matrix.zero( 3, 4 ) 
```

一个人不能写

```
m[0, 1] = 7 
```

但是我非常想做......我可以用笨拙的编程来做到这一点，例如

```
def modify_value_in_a_matrix( matrix, row, col, newval )
  ary = (0...m.row_size).map{ |i| m.row i }.map( &:to_a )
  ary[row][col] = newval
  Matrix[ *ary ]
end 
```

...或作弊，例如

```
Matrix.send :[]=, 0, 1, 7 
```

，但我想知道，这一定是人们一直遇到的问题。是否有一些标准的、习惯性的方法来做到这一点，而不必使用#send 方法强奸班级？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-04T17:35:20.427

你为什么要打开这个类来重新定义一个已经存在的方法？

```
class Matrix
  public :"[]=", :set_element, :set_component
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T02:42:13.977

您可以打开该类并定义您自己的方法来执行此操作：

```
class Matrix
  def []=(i, j, x)
    @rows[i][j] = x
  end
end 
```

# c - sscanf iterative loop for float numbers

> ID：12683775
> 
> 赞同：0
> 
> 时间：2012-10-02T02:27:37.737
> 
> 标签：c, scanf

I need to convert recursively char[] into float variable. My code is as follows:

```
while(1)
{
    //take char[] str as input
    sscanf(str,"%f",&n);
    //printf n
} 
```

The program works well for positive numbers. But if we give negative numbers initially followed by positive numbers then n is displaying different output.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T13:44:41.023

用C写的，这似乎对我有用。

```
char* str = "-9 1.1 2 3.1 0.9 .8 -2 -1.1";
float n;
int offset;
while (sscanf(str, "%f%n", &n, &offset) > 0) {
  printf("%f,", n);
  str += offset;
} 
```

与输出`-9.000000,1.100000,2.000000,3.100000,0.900000,0.800000,-2.000000,-1.100000,`

# android - Are onCreate and onRestoreInstanceState mutually exclusive?

> ID：12683779
> 
> 赞同：47
> 
> 时间：2012-10-02T02:27:49.030
> 
> 标签：android

I have a couple of question regarding `onRestoreInstanceState` and `onSaveInstanceState`.

1) where do these methods fit the activity lifecycle? I have read a lot of documentation but there is no clear idea, except a broad statement that when the state of the activity is to be saved

2) Are `onCreate` and `onRestoreInstanceState` mutually exclusive?

3) is `onRestoreInstanceState` called when the activity is destroyed? what does this mean? an activity always destroyed except for scenarios when another activity is floating on top of current.

4) `onRestoreInstanceState` appears to be called only from instrumentation in jelly bean. Is this no longer relevant to activity lifecycle?

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-03T19:51:06.033

> 这些方法在哪里适合活动生命周期？

OnSaveInstanceState 在您的活动即将被终止或重新启动之前被调用（例如内存压力或配置更改的 b/c）。请注意，这与 onPause 不同，后者在您的活动失去焦点时被调用（例如，您转换到另一个活动）。

通常 onSaveInstanceState 将在 onPause 之后但在 onStop 之前调用，但并非总是如此。例如，如果您按回，则活动被破坏（如调用完成（））并且不需要保存状态，因此不会调用 onSaveInstanceState。那么为什么不在 onPause 中保存状态呢？仅仅因为活动失去焦点并不意味着它已被杀死。它仍在记忆中。基本上，您不想在每次暂停时保存状态，而是在您暂停并即将变得不可见时（即从前台转到后台）。

那么在 onPause 中应该怎么做呢？理想情况下，您应该释放消耗电池的资源，例如网络连接、关闭地理或加速度计、暂停视频（所有这些都取决于您的应用程序）。并在 onResume 中恢复这些资源，正如您可能已经猜到的，当您的活动获得焦点时，它会被调用。

> onCreate 和 onRestoreInstanceState 是互斥的吗？

onRestoreInstanceState 是多余的，因为您可以在 onCreate 中轻松恢复状态。

话虽如此，这是官方文档对 onRestoreInstanceState 所说的：

> 大多数实现将简单地使用 onCreate(Bundle) 来恢复它们的状态，但有时在完成所有初始化之后在此处执行此操作或**允许子类决定是否使用您的默认实现**会很方便。

因此，为了获得最佳实践，请在 onCreate 中布置视图层次结构，并在 onRestoreInstanceState 中恢复之前的状态。如果你这样做，任何继承你的 Activity 的人都可以选择覆盖你的 onRestoreInstanceState 来增加或替换你的恢复状态逻辑。**将onRestoreInstanceState 用作模板方法**的说法有很长的路要走。

> Activity 销毁时是否调用 onRestoreInstanceState？这是什么意思？

这在 1 中得到了部分回答。是的，当系统即将销毁您的活动时，会调用 onRestore。系统将在内存压力下或用户明确关闭应用程序（例如从导航栏中的最新消息中滑动删除）或配置更改（例如从陆地到纵向）时销毁您的活动。

为什么android是这样设计的（不像桌面应用程序）？因为在移动系统上，资源管理是电池寿命的一个严重问题。因此，您希望在应用程序生命周期中提供挂钩，以便应用程序可以在关闭或失去焦点之间干净地保存和恢复其状态，同时使其对用户完全透明。

> onRestoreInstanceState 似乎只能从果冻豆中的仪器调用。这不再与活动生命周期相关吗？

我不明白这个问题。你能改写一下吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T04:20:57.243

> 1）这些方法在哪里适合活动生命周期？

来自开发者文档。

**onSaveInstanceState（捆绑 outState）**

这个方法在一个活动可能被杀死之前被调用，这样当它在未来某个时间回来时它可以恢复它的状态。例如，如果活动 B 在活动 A 之前启动，并且在某个时刻活动 A 被杀死以回收资源，活动 A 将有机会通过此方法保存其用户界面的当前状态，以便当用户返回时对于activity A，可以通过onCreate(Bundle) 或onRestoreInstanceState(Bundle) 恢复用户界面的状态。

onSaveInstanceState() 的默认实现负责保存与每个具有 id 的每个视图相关的数据。

如果调用，此方法将在**onStop() 之前发生。**无法保证它是否会在**onPause()**之前或之后发生。

**onRestoreInstanceState (Bundle savedInstanceState)**

当活动从先前保存的状态重新初始化时，在**onStart()**之后调用此方法

> 3) Activity 销毁时是否调用 onRestoreInstanceState？这是什么意思？一个活动总是被销毁，除了另一个活动漂浮在当前之上的情况。

当活动从先前保存的状态重新初始化时，在**onStart()**之后调用此方法，此处在**savedInstanceState**中给出 （这是一个包含保存在 onSaveInstanceState(Bundle) 中的数据的包对象）。

大多数实现将简单地使用 onCreate(Bundle) 来恢复它们的状态，但有时在完成所有初始化之后在此处执行此操作或允许子类决定是否使用您的默认实现会很方便。该方法的默认实现会恢复之前被 onSaveInstanceState(Bundle) 冻结的任何视图状态。

> 4) onRestoreInstanceState 似乎只能从果冻豆中的仪器调用。这不再与活动生命周期相关吗？

没有。onRestoreInstanceState 从 API 级别 1 开始就已经存在。它仍然是新 Jelly Bean API 的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T02:49:15.807

1.  如果您的 Activity 被终止，例如您启动了另一个 Activity 并且系统缺少终止您的 Activity 所需的资源，您可以使用 onSaveInstanceState 保存状态然后恢复它。

2.  不必要。onCreate 在 onStart 之前调用，但 onRestoreInstanceState 在之后调用，所以这取决于您要实现的目标

3.  你的意思是onSaveInstanceState。那么它在活动被杀死时被调用，如上面的第 1 点

4.  抱歉...我不知道，我没有在 Jellybean 上尝试过

# php - 删除 wordpress 中的标题帖子，以便我可以将其用作静态 CMS

> ID：12683787
> 
> 赞同：0
> 
> 时间：2012-10-02T02:29:26.797
> 
> 标签：php, wordpress, content-management-system

所以基本上我想管理一个简单的静态网站。我的模板非常多`<?php get_header ?>`，并且`<?php get_footer ?>`在它们之间有循环。我的目标是能够在页眉和页脚之间有效地创建页面并发布 HTML 代码。但每当我发帖时，我当然会得到这个：

“测试
2012 年 10 月 1 日，由 admin
testest
发表于”

我不知道足够的 PHP 来修改我尝试做的循环代码本身。我还尝试制作一个具有以下功能的functions.php：

```
<?php 
add_action('genesis_before', 'child_conditional_actions');
function child_conditional_actions() {
if ( is_page() )
remove_action('genesis_post_title', 'genesis_do_post_title');
}
?> 
```

但它什么也没做。有人有建议吗？

这是我使用的完整循环代码，以防有人好奇： http: [//pastie.org/4894413](http://pastie.org/4894413)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:44:46.603

循环是输出您的“测试”帖子的内容。任何有循环的地方，WordPress 都会插入一篇或多篇文章。

您可以根据自己的喜好删除 The Loop 的部分内容，因此删除`the_time()`会停止显示时间，删除`the_content()`会删除帖子正文/摘录等。起初理解起来可能会比较复杂，但完全可以做。

如果你想要一个真正的静态页面，带有 WP 页眉和页脚，但中间是完全原始的 HTML，你甚至可以完全退出循环。差不多了`<?php get_header() ?>`，然后是你的静态 HTML 代码，最后是`<?php get_footer() ?>`. 请记住，这样做会失去 WordPress 的很多用处，并且可能会导致页面标签出现一些奇怪的问题等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:04:49.330

如果您只想在 get_header(); 之间粘贴 html 代码 和 get_footer(); 除了 the_content(); 之外，所有内容都可以从循环中删除。以下代码是对您的粘贴代码的修改

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php the_content(); ?>
<?php endwhile; else: ?>
<p>Sorry, no posts matched your criteria.</p>
<?php endif; ?> 
```

警惕任何已删除的结构元素（div 等），但现在您在管理控制台的内容框中放置的任何代码都将显示在您的页面上。还应该注意的是，将代码复制到 Wordpress 的帖子/页面的 html 视图中并不总是一个好主意，因为 Wordpress 喜欢“清理”；某些情况下的代码。如果发生这种情况，您可以使用一个片段插件，基本上是一个短代码生成器。

我过去曾为客户使用过[http://wordpress.org/extend/plugins/embedit-pro/](http://wordpress.org/extend/plugins/embedit-pro/)。

希望这可以帮助，

杰米

# c# - 将断言输出从 dll 重定向到文件

> ID：12683790
> 
> 赞同：3
> 
> 时间：2012-10-02T02:30:06.470
> 
> 标签：c#, c, pinvoke, assert, stderr

我有一个由 C# 程序调用的 C DLL。DLL 中充满了`assert()`陈述，但没有一个足够自信，无法出现在我的屏幕上。我理解这是因为断言输出被写入 STDERR（或者可能是 STDOUT）。

有没有办法以某种方式插入断言宏，以便将输出重定向到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:56:20.833

也许断言驻留在 dll 中全部通过？

我在 Mono 上进行了以下测试

```
#include <assert.h>
void foo()
{
    assert(1==2);
}

//~~~~~

[DllImport("mylib.so")]
extern static void foo();

public static void Main (string[] args)
{
  foo();
} 
```

断言失败后程序立即中止。

如果您只想重定向stderr，`Console.SetError(new StreamWriter("err.log"));...;Console.Error.Close()`就足够了。但是如果程序过早中止，`Console.Error`不会正确关闭，流将不会被刷新并且不会记录任何内容。

# windows-phone-7 - Speech To Text In WP7 or Windows 8 Metro

> ID：12683791
> 
> 赞同：0
> 
> 时间：2012-10-02T02:30:10.213
> 
> 标签：windows-phone-7, windows-8, microsoft-metro, speech-recognition, speech-to-text

I think the question pretty much says it all.

Is there any API by which I can take speech input from the user and then convert it to text? (windows phone 7 or windows 8 metro) ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:12:57.663

您可能想看看夏威夷项目：-

Speech-to-Text 服务 该服务采用口语短语并返回文本（目前只有英文）。

[http://research.microsoft.com/en-us/projects/hawaii/](http://research.microsoft.com/en-us/projects/hawaii/)

# xcode - How can I navigate stack frames to track down the original line called in xCode using the LLDB

> ID：12683792
> 
> 赞同：1
> 
> 时间：2012-10-02T02:30:09.443
> 
> 标签：xcode, cocos2d-iphone, lldb

I'm getting an error very rarely in my game and I'm trying to determine which runAction is conflicting with an action already in progress. I know I just need to stop a previous action, but can't determine which action is trying to run.

Can anyone give me advice on how to see earlier in the backtrace or navigate to a more useful area since most of the backtrace is just throwing the error and I want to see what is happening before the error gets thrown?

Here is my error and backtrace to help give some context.

NOTE: I'm a noob when it comes to LLDB!

```
2012-10-01 19:44:27.000 Game Name[19255:907] *** Assertion failure in -[CCActionManager addAction:target:paused:], /Users/username/Documents/Development/Sandbox/Game Name/libs/cocos2d/CCActionManager.m:177
2012-10-01 19:44:27.004 Game Name[19255:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'runAction: Action already running'
*** First throw call stack:
(0x392b83e7 0x354b6963 0x392b829d 0x356647b3 0x2799d 0x497d7 0xb732d 0xede1b 0x3569ce67 0x3928d857 0x3928d503 0x3928c177 0x391ff23d 0x391ff0c9 0x313fb33b 0x39380289 0xaf0a1 0x12ee0)
libc++abi.dylib: terminate called throwing an exception 
```

Here is the backtrace which doesn't show back far enough or I just don't know how to navigate to the right place?

```
(lldb) thread list
Process 19255 stopped
* thread #1: tid = 0x2403, 0x39bf9350 libsystem_kernel.dylib`__pthread_kill + 8, stop reason = signal SIGABRT
  thread #4: tid = 0x2903, 0x39bf9d98 libsystem_kernel.dylib`__workq_kernreturn + 8
  thread #9: tid = 0x2c03, 0x39bf9d98 libsystem_kernel.dylib`__workq_kernreturn + 8
  thread #7: tid = 0x2d03, 0x39bf96a4 libsystem_kernel.dylib`__semwait_signal + 24
  thread #8: tid = 0x2e03, 0x39be95d0 libsystem_kernel.dylib`kevent64 + 24
  thread #10: tid = 0x2f03, 0x39be8e30 libsystem_kernel.dylib`mach_msg_trap + 20
  thread #11: tid = 0x3003, 0x39be8e30 libsystem_kernel.dylib`mach_msg_trap + 20
  thread #12: tid = 0x3103, 0x39bf9594 libsystem_kernel.dylib`select$DARWIN_EXTSN + 20
  thread #13: tid = 0x3203, 0x39be8e30 libsystem_kernel.dylib`mach_msg_trap + 20
  thread #14: tid = 0x3303, 0x39be8e30 libsystem_kernel.dylib`mach_msg_trap + 20
  thread #15: tid = 0x233f, 0x39bf9d98 libsystem_kernel.dylib`__workq_kernreturn + 8

(lldb) thread backtrace
* thread #1: tid = 0x2403, 0x39bf9350 libsystem_kernel.dylib`__pthread_kill + 8, stop reason = signal SIGABRT
    frame #0: 0x39bf9350 libsystem_kernel.dylib`__pthread_kill + 8
    frame #1: 0x39a4ffb6 libsystem_c.dylib`pthread_kill + 58
    frame #2: 0x39a8c36a libsystem_c.dylib`abort + 94
    frame #3: 0x3504edde libc++abi.dylib`abort_message + 74
    frame #4: 0x3504c098 libc++abi.dylib`default_terminate() + 24
    frame #5: 0x354b6a5a libobjc.A.dylib`_objc_terminate() + 146
    frame #6: 0x3504c11a libc++abi.dylib`safe_handler_caller(void (*)()) + 78
    frame #7: 0x3504c1b4 libc++abi.dylib`std::terminate() + 20
    frame #8: 0x3504d62a libc++abi.dylib`__cxa_rethrow + 94
    frame #9: 0x354b69b4 libobjc.A.dylib`objc_exception_rethrow + 12
    frame #10: 0x391ff2a0 CoreFoundation`CFRunLoopRunSpecific + 456
    frame #11: 0x391ff0c8 CoreFoundation`CFRunLoopRunInMode + 104
    frame #12: 0x313fb33a GraphicsServices`GSEventRunModal + 74
    frame #13: 0x39380288 UIKit`UIApplicationMain + 1120
    frame #14: 0x000af0a0 Game Name`main + 100 at main.m:14 
```

I've seen people talking about "moving up a couple stacks to get to the root item" and have no idea how to move up stacks?

Any help, suggestions, or pointers would be greatly appreciated! Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:55:00.290

尝试让 Xcode 在你的程序中放置一个异常断点——你应该能够在抛出异常时捕获它。在 Xcode 中，查看 > 导航器 > 显示断点导航器，点击 + 按钮添加新断点，您可以在“添加异常断点”和“添加符号断点”之间进行选择（后者是 main() 上的断点或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T18:23:49.127

**问题**

*如何导航堆栈帧以使用 LLDB 跟踪 xCode 中调用的原始行*

**解决方案**

在 Xcode 中打破异常后，您可以通过键入单词“up”或“down”（不带引号）然后按 [enter] 键来向上/向下导航堆栈帧。调试器将一次一步导航到适当的帧。您可能还想查看日志导航器以查看调试会话的完整历史记录 (⌘ + 8)。

# ruby - why doesn't this work: x.map(&:+"A")

> ID：12683794
> 
> 赞同：3
> 
> 时间：2012-10-02T02:30:23.610
> 
> 标签：ruby, ruby-1.9, ampersand

from what I've [read](https://stackoverflow.com/questions/1961030/ruby-ruby-on-rails-ampersand-colon-shortcut),

```
something {|i| i.foo } 
something(&:foo) 
```

are equivalent. So if x = %w(a b c d), why aren't the following equivalent:

```
x.map {|s| s.+ "A"}
x.map {&:+ "A"} 
```

?

The first one works as expected (I get ["aA","bA","cA","dA"]), but the second one gives an error no matter what I try.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:55:36.593

`Symbol::to_proc`不接受参数。

您可以将`to_proc`方法添加到`Array`.

```
class Array
  def to_proc
    lambda { |o| o.__send__(*self) }
  end
end

# then use it as below
x.map &[:+, "a"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:41:23.400

如果这行得通，那么作为一名红宝石学家，您将无事可做。我写了一个完整的后缀类`#method_missing`来解决这个问题。简单的肮脏解决方案是：

```
x = ?a, ?b, ?c

def x.rap( sym, arg )
  map {|e| e.send sym, arg }
end

x.rap :+, "A" 
```

# ruby-on-rails - Converting Videos In the Background ROR 3

> ID：12683795
> 
> 赞同：1
> 
> 时间：2012-10-02T02:30:40.583
> 
> 标签：ruby-on-rails, ffmpeg, paperclip

I've searched around on google and have come up with only one site that explains how to do this: [http://railsonedge.blogspot.com/2009/01/flash-video-tutorial-with-rails-ffmpeg.html?m=0](http://railsonedge.blogspot.com/2009/01/flash-video-tutorial-with-rails-ffmpeg.html?m=0) I'm already using paperclip and already have everything set up with it and like using it better than the way this site is doing it. Is there a way to convert videos in the background while keeping track of the state of it using paperclip? My Video.rb currently:

```
class Video < ActiveRecord::Base
  belongs_to :user
  has_many :comments, dependent: :destroy
  attr_accessible :video, :user_id, :video_file_name, :title, :public, :description, :views

  has_attached_file :video, :styles => { 
    :video => { geometry: "800x480>", format: 'webm' },
    :thumb => { geometry: "200x200>", format: 'png', time: 3 },
  }, processors: [:ffmpeg], url: "/users/:user_id/videos/:id/:basename_:style.:extension"

  #process_in_background :video #causes death

  validates :video, presence: true
  validates :description, presence: true, length: { minimum: 5, maximum: 100}
  validates :title, presence: true, length: { minimum: 1, maximum: 15 }

  validates_attachment_size :video, less_than: 1.gigabytes
  validates_attachment :video, presence: true

  default_scope order: 'created_at DESC'

  Paperclip.interpolates :user_id do |attachment, style|attachment.instance.user_id
  end

  def self.search(search)
    if search
      find(:all, conditions: ["public = 't' AND title LIKE ?", "%#{search}%"], order: "created_at DESC")
    else
      find(:all, conditions: ["public = 't'"], order: "created_at DESC")
    end
  end

  def self.admin_search(search)
    if search
      find(:all, conditions: ['title LIKE ?', "%#{search}%"], order: "created_at DESC")
    else
      find(:all, order: "created_at DESC")
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:54:35.087

首先[检查这个答案](https://stackoverflow.com/questions/5523539/converting-video-to-flash-and-mp4-ruby-on-rails)。对于您要使用的后台作业[sidekiq](http://mperham.github.com/sidekiq/)。您将需要处理转换的方法。您将在 sidekiq 的#perform 中调用该方法。在此方法中，您还可以更改状态（只需更改字符串字段值）。

# c++ - Build a 2d map if each node only knows distances to a 3 closest nodes

> ID：12683798
> 
> 赞同：2
> 
> 时间：2012-10-02T02:31:20.357
> 
> 标签：c++, graph-theory, computational-geometry, som, slam-algorithm

I'm looking for a C++ library or a combination of libraries.

the idea is that robots move around and they can only know distance between the closest 3. the problem is to find relative (x,y) location of all of the nodes.

My solution would be to build triangles from distances (is there a library for that) then make a map from those triangles (library?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:41:29.890

如果这是一个真实世界的应用程序，图表将永远不会一致。我的意思是，如果你从一端开始构建三角形，当你关闭循环时，它永远不会匹配。“闭环”是机器人领域的热门研究课题。您的问题在某种程度上比一般情况更简单，但您可能很幸运，只需将距离扔给非线性最小二乘求解器即可。谷歌搜索返回了这个[ceres-solver](http://code.google.com/p/ceres-solver/)。

使用通用非线性最小二乘求解器，您需要定义解向量和目标函数。在您的情况下，假设您有 100 个节点。这意味着您正在寻找 200 个值；每个节点的 x 和 y 值。那个 200 元素长的向量是你的解向量。您的目标函数是这 20000 个元素的分配，以便分配中已知对的距离与您的可用数据尽可能匹配。对于 100 个节点，每个节点 3 个已知距离，您有 300 个方程要最小化误差。恐怕您必须弄清楚 ceres API 才能将此解决方案应用于您的问题，因为我没有个人经验。

作为旁注，从无噪声解决方案开始，依靠数据与涉及噪声的数据保持一致，基本上将从头开始......

# android-widget - Android 中如何管理 View Lifecycle

> ID：12683799
> 
> 赞同：3
> 
> 时间：2012-10-02T02:31:46.270
> 
> 标签：android-widget

如果我在 Android 中实现了一个自定义视图，并且`onSaveInstanceState`已经被调用（视图正在被回收），我的视图成员变量是否也可能会被重置`onRestoreInstanceState`

# solaris-10 - Solaris 10 - dbx 转储不显示局部变量

> ID：12683800
> 
> 赞同：1
> 
> 时间：2012-10-02T02:31:57.330
> 
> 标签：solaris-10, dbx

我是一名 Windows 开发人员，经常且相当容易地使用 WinDbg。我得到了一个 Solaris 10.2 核心文件来使用 dbx 进行分析。(dbx) 显示堆栈的位置，我可以找到具有实现的 .so 。由于转储（dbx）没有显示结果（本地变量），我使用了文件（os）命令，该命令表示二进制文件已被剥离。我找到了最匹配的未剥离 .so 版本，并使用文件命令对其进行了验证。由于已经崩溃的进程正在再次运行，我不想停止它。因此，我将所有二进制文件复制到了一个新位置，然后复制了未剥离的 .so。当我现在尝试打开核心时，它抱怨核心比二进制文件旧，使用触摸。因此，我将核心复制到了一个新位置，然后 dbx 毫无怨言地打开了它。尽管如此，转储（dbx）仍然没有显示任何结果。我试着向上移动& 帧数下降，但转储始终静音。我怎么知道未剥离的版本是否不匹配？如何检查符号是否已加载？

# php - gearman 或自定义 mongo

> ID：12683805
> 
> 赞同：0
> 
> 时间：2012-10-02T02:32:41.573
> 
> 标签：php, mongodb, gearman

这不是一个这样或那样的问题，试图找出我在差异和理解中缺少什么。通常，当我想分配工作和排队时，我会将要完成的工作写入 mysql 或 mongodb 等数据库，然后我将进行一些设置，我可以锁定行记录并解锁它以避免两个节点在同一个节点上工作事物。现在我最近听说了 gearman，并试图找出它与简单的数据库解决方案之间的区别。谁能告诉我我错过了什么？

我正在处理的应用程序正在获取大量复杂的日志数据并能够对其进行一些分析。为了避免过载，我不想当场处理。所以需要他们排队我只是通常将它们写入数据库并等待所以现在我试图了解差异是什么以及为什么我所做的是“错误的方式”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:01:44.170

最大的不同是 gearman 不是数据库。我知道你知道这一点，但我想我会重申一下。Gearman 是一个独立的实体，必须作为一个守护进程独立运行。

Gearman 是一个分布式工作队列和工作器，而 MySQL 或 MongoDB 等数据库没有真正内置的分布式工作队列器和工作器。

Gearman 有一个分布式作业注册和复制系统，这是普通数据库所没有的。它还可以（如我所说）在一个大型集群中均匀地分配工作人员和作业（想想 AWS 现场实例上的集群处理）。

当不使用 Gearman 时，您可能会在尝试在自己的代码中实现所有 Gearman 所做的事情时头疼，尤其是在 PHP 中，它在守护程序模式下运行非常糟糕。

因此，使用 Gearman，您可以获得一个完整的社区开发和审查的分布式工作队列和工作人员，而使用您自己的代码......我不确定您会得到什么，因为我不确定您输入工作队列和工作人员的内容。

### 编辑

Gearman 在一个简单解决方案上的用例将是：

*   分布式视频编码器
*   方程的科学集群计算
*   计算硬件的通用池化以创建堆栈以处理其他任务

真正的 Gearman 在分布式环境中大放异彩。它就像分布式作业队列和工作人员的 MongoDB。它只是缩放。

话虽如此，如果您正在运行一个具有非大规模分布式工作集群的简单应用程序，那么 Gearman 可能会矫枉过正。但从我个人使用它的经验来看，Gearman 的设置并不比你自己的队列难。

# php - PHP嵌套if条件

> ID：12683807
> 
> 赞同：0
> 
> 时间：2012-10-02T02:32:53.717
> 
> 标签：php

我想要实现的是一个嵌套条件，例如`if ((a = true && b = true) or (c = true && d = true)) {...}`. 这似乎对我不起作用。

进一步解释：我在我们可以称之为“顶部”的地方有两个变量，在我们可以称之为“底部”的地方有两个变量。如果变量在“顶部”和“底部”中都为真，我需要做的是执行代码。

为了更简洁地说明：

```
if ((t1 = true && b1 = true) or
    (t1 = true && b2 = true) or
    (t2 = true && b1 = true) or
    (t2 = true && b2 = true)
) {
    ...do some stuff...
} 
```

我很想把它称为“格子问题的条件语句”……除了它不是真正的格子问题……但如果你画它，它看起来确实有点像格子`|X|`……是的，你'如果你能告诉我一个很好的方法来做到这一点，那就太棒了，如果你能告诉我我应该怎么称呼它，你就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:35:42.993

`=`用于赋值，`==`用于测试相等，`===`用于测试相等和相等类型。您需要使用`==`or `===`，具体取决于 t1、t2、b1、b2 是否已经是布尔值或其他值。还有亚当所说的东西，除了那`or`是完全有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:34:00.760

您需要使用两个等号`==`而不是`=`. 此外，您的变量需要`$`在它们前面。你的“或”应该是`||`.

逻辑没问题。

它应该如下所示：

```
if (($t1 == true && $b1 == true) ||
    ($t1 == true && $b2 == true) ||
    ($t2 == true && $b1 == true) ||
    ($t2 == true && $b2 == true)
) {
    ...do some stuff...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:37:30.853

改变条件

```
if (($t1 == true && $b1 == true) or
($t1 == true && $b2 == true) or
($t2 == true && $b1 == true) or
($t2 == true && $b2 == true)
) 
```

`=`is 赋值运算符`==`是比较运算符。

# websocket - WebSockets - ASP.NET 4.5 IIS 8 最终版本

> ID：12683808
> 
> 赞同：1
> 
> 时间：2012-10-02T02:32:59.030
> 
> 标签：websocket, asp.net-4.5, iis-8

所有在线博客都参考了带有旧命名空间的测试版并使用了 nuget 包。我试图获得一个简单的低级 websockets 示例，该示例基于现在野外的内容，但它只是不起作用。

客户端永远无法建立连接。来自 chrome 调试控制台的错误是：“端口错误：无法建立连接。接收端不存在。”

但是，我知道请求正在被接收，因为我将代码放入我的 ashx 处理程序中，以便在各个时间点向我发送电子邮件，以确认请求正在进入并且我的任务正在触发等。

配置 - 所有最终发行版本：Windows Server 2012/IIS 8/ASP.NET 4.5

我的示例基于： [http ://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097383)

处理程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.WebSockets;
using System.Net.WebSockets;
using System.Threading;
using System.Text;
using System.Threading.Tasks;

namespace myWebSocket
{
/// <summary>
/// Summary description for wsHandler
/// </summary>
public class wsHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        // context.Response.ContentType = "text/plain";
        // context.Response.Write("Hello World");

        context.AcceptWebSocketRequest(MyWebSocketTask);
    }

    public async Task MyWebSocketTask(WebSocketContext context)
    {
        WebSocket socket = context.WebSocket;

        while (true)
        {
            System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
            message.To.Add("email@address.com");
            message.Subject = "Handler";
            message.From = new System.Net.Mail.MailAddress("michaelo@hostcollective.com");
            message.Body = string.Format("Task Launched {0}", socket.State.ToString());
            System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("localhost");
            smtp.Send(message);

            ArraySegment<byte> buffer = new ArraySegment<byte>(new byte[1024]);

            // Asynchronously wait for a message to arrive from a client
            WebSocketReceiveResult result =
                    await socket.ReceiveAsync(buffer, CancellationToken.None);

            // If the socket is still open, echo the message back to the client
            if (socket.State == WebSocketState.Open)
            {
                string userMessage = Encoding.UTF8.GetString(buffer.Array, 0,
                        result.Count);
                userMessage = "You sent: " + userMessage + " at " +
                        DateTime.Now.ToLongTimeString();
                buffer = new ArraySegment<byte>(Encoding.UTF8.GetBytes(userMessage));

                // Asynchronously send a message to the client
                await socket.SendAsync(buffer, WebSocketMessageType.Text,
                        true, CancellationToken.None);
            }
            else { break; }
        }
    }
    public bool IsReusable
    {
        get
        {
            return true;
        }
    }
}
} 
```

至于客户端，这是基于 websockets.org 上的东西的最简单的一个

```
<script language="javascript" type="text/javascript">

// var wsUri = "ws://echo.websocket.org/";
var wsUri = "ws://iis8hosting.com/mikey/wshandler.ashx";
var output;

function init() {
    output = document.getElementById("output");
    testWebSocket();
}

function testWebSocket() {
    websocket = new WebSocket(wsUri);       

    websocket.onopen = function (evt) { onOpen(evt) };
    websocket.onclose = function (evt) { onClose(evt) };
    websocket.onmessage = function (evt) { onMessage(evt) };
    websocket.onerror = function (evt) { onError(evt) };
}

function onOpen(evt) {
    writeToScreen("CONNECTED");
    doSend("WebSocket rocks");
}

function onClose(evt) {
    writeToScreen("DISCONNECTED");
}

function onMessage(evt) {
    writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data + '</span>');
    websocket.close();
}

function onError(evt) {
    writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
}

function doSend(message) {
    writeToScreen("SENT: " + message);
    websocket.send(message);
}

function writeToScreen(message) {
    var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = message;
    output.appendChild(pre);
}

window.addEventListener("load", init, false); 
```

```
<h2>WebSocket Test</h2><div id="output"></div> 
```

任何人都有任何想法或另一个简单的示例，例如确认可以与最终版本一起使用的示例。感谢您花时间阅读和回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:18:50.913

我可以使您的代码在您的代码中进行一些更改。
您可能不需要在您的环境中进行以下所有更改。
**在服务器端**

*   在 SMTP 代码周围放置一个 try catch 块*   验证 context.IsWebSocketConnection 是否为真if (context.IsWebSocketRequest)
{
context.AcceptWebSocketRequest(MyWebSocketTask);
}
else
{
throw new HttpException("这不是 WebSocket 请求！");
}

**在客户端：**
我根据我得到的错误更改了如下代码:)。此代码也适用于 IISExpress 8。
var wsUri = "ws://<%: Request.Url.Host %>:<%: Request.Url.Port %><%: Response.ApplyAppPathModifier("~/wshandler.ashx")

1.  在表格中添加了 serverData，如下所示。<form id="form1" runat="server">
    <div id="serverData"></div>
    </form>
    并在 writeToScreen() 函数中使用。
    函数 writeToScreen(message) {
    var serverData = document.getElementById("serverData");
    var newElem = document.createElement("p");
    newElem.style.wordWrap = "断词";
    newElem.innerHTML = 消息；
    serverData.insertBefore(newElem, serverData.firstChild);
    }

2.  onMessage() 函数关闭来自客户端的连接。所以只有一条消息被发送和接收。

3.  确保 IE10 浏览器的文档模式为“标准”。我使用 IE10 来测试您的代码。

# jquery - 为什么我的 jquery 对话框不会弹出？

> ID：12683811
> 
> 赞同：0
> 
> 时间：2012-10-02T02:33:42.847
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我不知道为什么我的对话框不会弹出有什么问题，因为当我尝试从 html 中弹出表单时，它工作正常，但是从生成的这个 jquery 表中它不会。那我会怎么做？

```
success: function(data){
            var toAppend = '';

            toAppend += '<thead><tr><th>Name</th><th>Image</th><th>Price</th></tr></thead>';
            toAppend += '<tbody>';

            for(var i=0;i<data.length;i++){

                toAppend += '<tr><td><p>'+

                data[i]['product_name'][0]+'</p></td><td><a href="#">'+

                <img id="size" src="'+data[i]['image'][0]+'" alt="">+'</a></td><td>'+

                data[i]['price'][0]+'</td></tr>';
            }

            toAppend += '</tbody>';

            $('.data-results').append(toAppend);
        } 
```

这是调用对话框功能

```
$('#size').click(function() {
    $('#dialog').dialog({
        resizable: false,
        modal: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:39:20.970

您已经有一个迭代器。

```
<img id="size-"+i 
```

更改您的点击选择器 -

```
$('img[id^=size]').click(function(){ 
    $('#dialog').dialog({
        resizable: false,
        modal: true
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:10:48.137

将 id="size" 重命名为 class="size"，因为每个元素的参数“id”必须是唯一的

```
$('.size').live("click",function() {
    $('#dialog').dialog({
        resizable: false,
        modal: true
    });
}); 
```

# iphone - iPhone与当前位置的距离作为字幕

> ID：12683813
> 
> 赞同：0
> 
> 时间：2012-10-02T02:33:49.060
> 
> 标签：iphone, objective-c, xcode, ipad

我正在尝试查找从 selectedAnnotation 到 userLocation 的距离。我在注释 NSObject 中添加了以下代码：

```
-(void) setDistanceFromCurrentLocation:(CLLocation *)currentLocation{

CLLocation *location2 = [[CLLocation alloc] initWithLatitude:self.latitude longitude:self.longitude];

[self setDistance:[currentLocation distanceFromLocation:location2]];
}

- (NSString *)subtitle
{
NSString *myDistance = [NSString stringWithFormat:@"%1.1f from current location", distance];
return myDistance;
} 
```

现在在 didUpdatedidUpdateToLocation 我尝试使用来自这个问题的以下逻辑：[https ://stackoverflow.com/a/10881683/984248](https://stackoverflow.com/a/10881683/984248)

仍然返回 0.0。我究竟做错了什么？

**编辑：**

所以我现在正在正确计算与当前位置的距离。但是我如何传递它以将其设置为 pin 的字幕？

这是我找到距离的方法：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

[self setCurrentLocation:newLocation];

// if not Current Location then update the currently displayed Dealer Annotation
for (int i=0; i<self.dataArray.count; i++){

    NSDictionary *dataDictionary = [self.dataArray objectAtIndex:i];
    NSArray *array = [dataDictionary objectForKey:@"Locations"];

    for (int i=0; i<array.count; i++){

        NSMutableDictionary *dictionary = [array objectAtIndex:i];

        CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:[[dictionary objectForKey:@"Latitude"] doubleValue] longitude:[[dictionary objectForKey:@"Longitude"] doubleValue]];

        [?????? setDistance:[self.currentLocation distanceFromLocation:pinLocation]];
    }
  }
} 
```

这是我向地图添加图钉的方法：

```
for (int i=0; i<self.dataArray.count; i++){

    NSDictionary *dataDictionary = [self.dataArray objectAtIndex:i];
    NSArray *array = [dataDictionary objectForKey:@"Locations"];

    for (int i=0; i<array.count; i++){

        NSMutableDictionary *dictionary = [array objectAtIndex:i];

        MapAnnotation *annotation = [[MapAnnotation alloc] init];

        annotation.latitude = [[dictionary objectForKey:@"Latitude"] doubleValue];
        annotation.longitude = [[dictionary objectForKey:@"Longitude"] doubleValue];

        CLLocationCoordinate2D coord = {.latitude =
            annotation.latitude, .longitude =  annotation.longitude};
        MKCoordinateRegion region = {coord};

        annotation.title = [dictionary objectForKey:@"Name"];

        annotation.subtitle = ?????;
        annotation.coordinate = region.center;

        //Saving the dictionary of the pin to show contact info later
        annotation.sourceDictionary = dictionary;
        [mapView addAnnotation:annotation];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:59:19.217

只是想知道，currentLocation 是否设置为 self.latitude,self.longitude？

在这种情况下，您将试图找到与自己的距离。尝试记录 currentLocation 参数以及 self.latitude 和 self.longitude 变量的纬度和经度值，并确保它们不同。

如果是，则尝试记录 [currentLocation distanceFromLocation:location2] 以查看它是否非零，如果是，那么您的 setDistance 方法就是问题所在。

除此之外，我能想到的只是您的距离变量在其他地方设置为 0，或者它是一个未使用 %1.1f 格式化的变量，因此格式化程序将其设置为 0.0

# javascript - 如何让javascript时钟只显示一个时区？

> ID：12683817
> 
> 赞同：0
> 
> 时间：2012-10-02T02:34:42.537
> 
> 标签：javascript, time, clock, zone

我的网站上有一个实时时钟，它使用 JavaScript 运行，但是它从用户的计算机上获取当前时间，因此每个用户的时钟工作时区不同。如何修改下面的代码以使时钟仅使用美国中部标准时间 (GMT - 6)？

```
function updateClock () {
    var currentTime = new Date();
    var currentHours = currentTime.getHours();
    var currentMinutes = currentTime.getMinutes();
    var currentSeconds = currentTime.getSeconds();

    currentMinutes = (currentMinutes < 10 ? "0" : "") + currentMinutes;
    currentSeconds = (currentSeconds < 10 ? "0" : "") + currentSeconds;

    var timeOfDay = (currentHours < 12) ? "AM" : "PM";
    currentHours = (currentHours > 12) ? currentHours-12 : currentHours;
    currentHours = (currentHours == 0) ? 12 : currentHours;

    var currentTimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay;

    document.getElementById("clock").firstChild.nodeValue = currentTimeString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:02:33.913

此示例每秒检查分钟，并在分钟更改时更新显示时间。在 2006 年之前是不准确的，这是美国最后一次调整 DST。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>US Time Zones</title>
<style>
p{max-width:700px;font-size:1.25em}
</style>
<script>

Date.short_months= ['Jan', 'Feb', 'Mar', 'Apr', 'May',
'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
Date.tzones={
    N:['Newfoundland', -210],
    A:['Atlantic', -240],
    E:['Eastern', -300],
    C:['Central', -360],
    M:['Mountain', -420],
    P:['Pacific', -480],
    AK:['Alaska', -540],
    HA_:['Hawaii-Aleutian (Aleutian)', -600],
    HA:['Hawaii-Aleutian (Hawaii)', -600, -600]
};
Date.dstOff= function(d, tz){
    var off= tz[1], doff= tz[2],
    countstart, countend, dstart, dend,
    y= d.getUTCFullYear();
    if(y>2006 && off!== doff){
        countstart= 8, countend= 1,
        dstart= new Date(Date.UTC(y, 2, 8, 2)),
        dend= new Date(Date.UTC(y, 10, 1, 2));
        while(dstart.getUTCDay()!== 0){
            dstart.setUTCDate(++countstart);
        }
        while(dend.getUTCDay()!== 0){
            dend.setUTCDate(++countend);
        }
        dstart.setUTCMinutes(off);
        dend.setUTCMinutes(off);
        if(dstart<= d && dend>= d) off= doff;
    }
    return off;
}
Date.toTZString= function(d, tzp){
    d= d? new Date(d):new Date();
    tzp= tzp || 'G';
    var h, m, s, pm= 'pm', off, dst, str,
    label= tzp+'ST',
    tz= Date.tzones[tzp.toUpperCase()];
    if(!tz) tz= ['Greenwich', 0, 0];
    off= tz[1];
    if(off){
        if(tz[2]== undefined) tz[2]= tz[1]+60;
        dst= Date.dstOff(d, tz);
        if(dst!== off) label= tzp+'DT';
        d.setUTCMinutes(d.getUTCMinutes()+dst);
    }
    else label= 'GMT';
    h= d.getUTCHours();
    m= d.getUTCMinutes();
    if(h>12) h-= 12;
    else if(h!== 12) pm= 'am';
    if(h== 0) h= 12;
    if(m<10) m= '0'+m;
    var str= Date.short_months[d.getUTCMonth()]+' '+d.getUTCDate()+', ';
    return str+ h+':'+m+' '+pm+' '+label.replace('_', '').toUpperCase();
}
window.onload=function(){
    var who=document.getElementById('CentralTimer');
    who.firstChild.data= Date.toTZString('', 'C');
    Date.ctclock= setInterval(function(){
        var v=who.firstChild.data,
        t=Date.toTZString('', 'C');
        if(v!=t) who.firstChild.data=t;
    },1000);
who.ondblclick=function(){
    clearInterval(Date.ctclock);
    who.firstChild.data+=' (Clock Stopped)';
}
}
</script>
</head>
<body>
<h1 id="CentralTimer">Central Time</h1>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:12:31.543

进行自定义时区时钟的一种方法是根本不使用本地时间，而是在将日期移动您选择的时差后始终从 UTC 计算。

这是您的代码修改为使用`.getUTC...`和向前推进 DST（使用 2007 年的美国规则）

```
function updateClock () {
    var d = null,                  // date
        h = 0, m = 0, s = 0,       // integers
        sh = '', sm = '', ss = '', // strings
        tod = 'AM',
        timeString = '',
        month = 0, dom = 0,        // used for DST calculation
        dos = 0, DST = false,
        offset = -21600000;        // -6 hours in ms

    d = new Date( (new Date()).valueOf() + offset ); // create date moved by offset

    h = d.getUTCHours(), m = d.getUTCMinutes(), s = d.getUTCSeconds();

    // --- calculate DST ---
    // needs to be modified for different regions ( currently US )
    // remove or comment out if you don't need DST

    month = d.getUTCMonth(), dom = d.getUTCDate(), dos = dom - d.getUTCDay();
    // dos is dom of most recent Sunday ( dos <= 0 means last month )
    if ( month === 2 ) {                    // March
        if ( dom > 14 ) DST = true;         // after second week, definately DST
        else if ( dos > 7 ) {               // Sunday was in second week
            if ( dom === dos ) {            // case for day of change
                if( h > 1 ) DST = true;
            } else DST = true;
        }
    } else if ( month === 10 ) {            // November
        if ( dom < 8 ) {                    // first week
            if ( dos < 1 ) DST = true;      // no Sunday yet, definately DST
            else if ( dos === dom &&        // case for day of change
                h < 1 ) DST = true;
        }
    } else if ( month > 2 && month < 10 )   // between March & November
        DST = true;                         // definately DST

    if ( DST ) {               // in DST
        h = h + 1;             // advance clock one hour
        if ( h === 24 ) h = 0; // allow for AM/PM check
    }

    // --- end of DST calculation ---

    ss = (s < 10 ? '0' : '') + s; // pad
    sm = (m < 10 ? '0' : '') + m; // pad

    if ( h >= 12 ) {   // convert to 12 hour
        tod = 'PM';
        h = h - 12;
    }
    if( h === 0 ) h = 12;
    sh = (h < 10 ? '0' : '') + h; // pad

    timeString = sh + ':' + sm + ':' + ss + ' ' + tod; // build final string

    document.getElementById("clock").firstChild.nodeValue = timeString;
    return timeString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:49:34.870

每个人都提到的那条线是

```
var offset = new Date().getTimezoneOffset(); 
```

这将设置`offset`为一个数字，等于客户端时区和 GMT 之间的差异（以分钟为单位）。对于 CST，这应该是 300 或 360，具体取决于夏令时。客户和 CST 偏移之间的差异`offset`是您需要从日期中添加/减去的分钟数。

日期数学相对简单：

```
var minutesToAdd = 300;  //can also be negative
var now = new Date();
now.setMinutes(now.getMinutes() + minutesToAdd);
//now is five hours ahead 
```

结合起来，这两部分应该可以满足您的需求。

# haskell - 中缀运算符的应用风格？

> ID：12683818
> 
> 赞同：7
> 
> 时间：2012-10-02T02:35:23.103
> 
> 标签：haskell, applicative, infix-operator

有没有办法在处理中缀运算符时进行应用性使用`<$>`并看起来不错？`<*>`我觉得

```
((++) <$> a <*> ((++) <$> b <*> c )) 
```

然后看起来更混乱

```
a ++ b ++ c 
```

所以我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T02:44:31.590

```
(<++>) = liftA2 (++)
a <++> b <++> c 
```

或者

```
liftA2 (++) a $ liftA2 (++) b c 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T06:19:56.897

请参阅 Thomas Davie 的[InfixApplicative](http://hackage.haskell.org/package/InfixApplicative)包，它提供了一个通用的句法技巧，而不必为每次提升定义一个新的运算符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T07:46:48.597

[SHE](https://personal.cis.strath.ac.uk/conor.mcbride/pub/she/)让你写

```
(|a ++ (|b ++ c|)|) 
```

如果那有什么用。当然，引入预处理层有一些开销。

# visual-studio-2012 - VS2012 中的打字稿：（自动）从 .ts 生成 .js

> ID：12683820
> 
> 赞同：20
> 
> 时间：2012-10-02T02:35:33.033
> 
> 标签：visual-studio-2012, typescript

我已经添加了`file1.ts`，我可以看到它有一个依赖项 - 即`file1.js`.

我注意到我对`file1.ts`-`file1.js`所做的任何更改都不会自动重新生成。

我目前唯一的解决方法是调用`tsc.exe`- 作为预构建事件的一部分。

我的问题是 - 有没有更好的解决方法或者我可能错过的某个设置？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T19:43:08.323

在 Visual Studio 2012 中安装 Web Essentials 2012 扩展。

它将在每次保存 .ts 文件时重新生成 .js 文件。

[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T18:21:07.677

您必须将 BeforeBuild 目标添加到 ASP.NET 应用程序的 CSPROJ：

```
<Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot;     @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
</Target> 
```

提示：使用记事本编辑您的 csproj 文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-13T13:00:06.817

已从 Web Essentials 2012 v3 中删除对 typescript 的支持

您现在需要直接从 microsoft 下载 typescript 支持：

[http://www.microsoft.com/en-us/download/details.aspx?id=34790](http://www.microsoft.com/en-us/download/details.aspx?id=34790)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:56:08.787

在 Visual Studio 中，您需要调用生成过程以生成文件。Playground 不使用相同的构建系统，一旦源代码更改就会触发编译，这就是为什么您会看到行为差异的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T12:23:52.967

**插头**

您可以使用 Install-Package TypeScript.Compile 添加一个编译后的目标，以编译项目中包含的所有 TypeScript 文件。

# php - 如何将一个表中的价格数据用于存储在另一个表中的计算？

> ID：12683825
> 
> 赞同：1
> 
> 时间：2012-10-02T02:36:25.370
> 
> 标签：php, html, mysql

我仍然在学习 PHP/MySQL，但由于 StackOverflow 上的代码，我学到了很多东西。我正在尝试使用两张桌子设置一种房间预订系统：

* * *

## ***设置：***

房间价格表：有，客户可能想要租用的类型房间的价格以及他们希望使用它的日期（星期几）。价格根据一周中的某一天和每间客房而有所不同。

我为每种房型设置了不同的表格，因为每种房型在一周中的每一天都有不同的定价。因此，有一个 Alpha 房间表、Bravo 房间等。在 Alpha 表中是一周中各天的标题，价格预先输入到行中。

客户信息表：包含特定客户的姓名、地址、房间使用日期等数据。

## ***例子：***

**Alpha 房间价格表：** Sun = $100；周一 = 200 美元；周二 = 300 美元，以此类推。

**Bravo 房间价格表：** Sun = $100；周一 = 200 美元；周二 = 300 美元，以此类推。

**客户端数据表：** ClientName；房间使用日期；地址; day_subtotal; 累计。

## **问题：**

我正在尝试找到以下 PHP 代码：

1.  查看客户数据表中的房间使用日期，
2.  在特定房间定价表中查找该日期的相关费用，
3.  在客户数据表的天小计中记录该单位成本
4.  并在客户数据表的总计行中求和总计（假设房间可能被客户使用超过一天）。

我知道与 join 有关，但我发现很难掌握这个概念，如果有人可以使用这个例子进行演示，我想我会对如何处理这种事务有更好的理解。

提前感谢大家的建议或替代方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:34:32.807

首先，你应该稍微分开你的数据库，你应该有四个表。`rooms`, `prices`,`clients`和`bookings`. 设置有点像这样...

`rooms`应具有以下字段`id`：`name`和`description`。

`prices`应具有以下字段：`id`、`price`和。`room_id``day`

`clients`应该有以下字段：`id`以及您想要存储在用户身上的任何其他内容，例如名字和姓氏、电话号码或其他任何内容。

`bookings`应具有以下字段：`id`、`client_id`、`room_id`和。最好and字段将是一个 int，填充 PHP 的方法。`started_at``ended_at``started_at``ended_at``time()`

您可以在表格中添加您想要/需要的任何额外字段。

像这样分离表后，您将能够正确查询数据库。所以回答你的问题...

1.  查看房间的使用日期...您现在可以通过执行以下操作来查询房间是否在特定日期使用...

    ```
    <?php
    $selectedDate= mktime(); // Create a UNIX timestamp based on the day the user selected.
    $query = "SELECT r.name, r.description
              FROM rooms r, bookings b
              WHERE b.room_id = r.id
              AND b.started_at < $selectedDate
              OR b.ended_at > $selectedDate";
    $result = $pdo->query($query);
    ?> 
    ```

2.  查找该日期的费用

    ```
    <?php
    $selectedDate = mktime() // Create a UNIX timestamp based on the day the user selected
    $dayOfWeek = Date('N', $selectedDate); // This will give the numerical day of the week.
    $query = "SELECT price
              FROM prices
              WHERE room_id = $roomId
              AND day = $dayOfWeek";
    $result = $pdo->query($query);
    ?> 
    ```

3.  在客户表中记录该单位成本

    由于已经在另一个表中拥有信息，这样做只是愚蠢的。永远不要在数据库中重新创建相同的信息。如果是，则说明您构建的数据库不正确。

4.  客户表中的总计

    再一次，愚蠢的......不要重新创建数据......

    1.  不过，要找到该信息，您首先需要在预订表上进行查询，并查看用户将占用房间的开始和结束日期。

    2.  计算客户在房间里的时间，(ended_at - started_at) / 86400，（86400 是一天中的秒数），这将给出客户在房间里的天数。

    3.  既然您知道客户将在房间里停留的日期和时间，您可以动态创建一个 sql 调用来选择您需要的星期几，记住`Date('N', $timeStamp)`会给您一个给定时间戳的星期几的数字。

    4.  然后只需进行简单的加法即可。

我在这里为您提供了基础知识，您可以修改答案一中的查询，以显示在用户要求的时间范围内是否可以预订房间。

我希望这涵盖了您所询问的所有内容...

# linux - 如何在文本文件unix中显示包含某个字符串的第一行？

> ID：12683826
> 
> 赞同：9
> 
> 时间：2012-10-02T02:36:26.197
> 
> 标签：linux, unix, grep

希望有人可以帮助解决这个问题。我试图弄清楚如何显示包含某个字符串的第一行，即“计算机”（在 txt 文件中第一次出现“计算机”）。我更喜欢使用 grep 来执行此操作。

我知道`grep "computer" somefile.txt`

将显示包括“计算机”在内的所有行。我渴望学习，如果有人有其他方法，我想听听！

谢谢大家

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T02:40:19.733

使用 grep 的匹配计数选项

```
grep -m 1 "computer" somefile.txt 
```

请注意，grep 在 un*x 中是非标准的，因此虽然[http://www.gnu.org/software/grep/](http://www.gnu.org/software/grep/)支持这一点，但如果您的发行版或 unix 不支持，这将不起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T02:37:52.903

管道是你的朋友：

```
grep "computer" somefile.txt | head -n1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T02:37:44.620

这是作业吗？

```
grep -v "computer" somefile.txt | head -n 1 
```

想到最快。

# php - 从 Base64 字符串中提取图像尺寸

> ID：12683829
> 
> 赞同：8
> 
> 时间：2012-10-02T02:37:41.610
> 
> 标签：php, regex, image, base64

是否有一种相对简单的方法（可能是正则表达式？）从 base64 字符串（可能还有文件大小）检测图像的尺寸 - 高度和宽度？也就是说没有实际创建图片资源？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T02:39:43.837

解码 base64，并使用`getimagesizefromstring()`.

[http://www.php.net/manual/en/function.getimagesizefromstring.php](http://www.php.net/manual/en/function.getimagesizefromstring.php)

这将比尝试编写自己的每种可用图像类型的处理方式更可靠。

# php - 如何在php中将字节数组转换为整数？

> ID：12683833
> 
> 赞同：7
> 
> 时间：2012-10-02T02:37:51.670
> 
> 标签：php

我见过一个**将整数转换为字节数组**的代码。下面是**如何在 php 3 中将整数转换为字节数组**的代码（[如何在 php 中将整数转换为字节数组](https://stackoverflow.com/questions/11544821/how-to-convert-integer-to-byte-array-in-php)）：

```
<?php

$i = 123456;
$ar = unpack("C*", pack("L", $i));

print_r($ar);
?> 
```

上面的代码将输出：

```
//output:
Array
(
   [1] => 64
   [2] => 226
   [3] => 1
   [4] => 0
) 
```

但我现在的问题是如何**扭转**这个过程。意思是从**字节数组转换为整数**。在上述情况下，输出将为**123456**

任何人都可以帮我解决这个问题。我会是一个很大的帮助。提前谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T02:56:33.970

为什么不把它当作数学问题来对待呢？

$i = ($ar[3]<<24) + ($ar[2]<<16) + ($ar[1]<<8) + $ar[0];

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T02:43:30.763

由于 L 是四个字节长，因此您知道数组的元素数。因此您可以简单地执行反向操作：

```
$ar = [64,226,1,0];
$i = unpack("L",pack("C*",$ar[3],$ar[2],$ar[1],$ar[0])); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-05T03:57:33.763

为了在 PHP 中获得一个有符号的 4 字节值，您需要这样做：

```
$temp = ($ar[0]<<24) + ($ar[1]<<16) + ($ar[2]<<8) + ($ar[3]);
if($temp > 2147483648)
     $temp -= 4294967296; 
```

# python - 如何在python中递归复制目录并覆盖全部？

> ID：12683834
> 
> 赞同：85
> 
> 时间：2012-10-02T02:37:58.210
> 
> 标签：python, copy, distutils

我正在尝试将`/home/myUser/dir1/`其所有内容（及其内容等）复制到`/home/myuser/dir2/`python 中。此外，我希望副本覆盖`dir2/`.

*看起来*可能是适合这项`distutils.dir_util.copy_tree`工作的工具，但不确定是否有任何更容易/更明显的方法可用于如此简单的任务。

如果它是正确的工具，我该如何使用它？根据[文档](http://docs.python.org/distutils/apiref.html)，它需要 8 个参数。我是否必须通过所有 8 个只是`src`, `dst`and `update`，如果是，如何（我是 Python 的新手）。

如果那里有更好的东西，有人可以给我一个例子并指出我正确的方向吗？提前致谢！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-02T08:04:54.483

您可以使用[`distutils.dir_util.copy_tree`](https://docs.python.org/2/distutils/apiref.html#distutils.dir_util.copy_tree). 它工作得很好，你不必传递每个参数，只有`src`并且`dst`是强制性的。

但是，在您的情况下，您不能使用类似的工具，`shutil.copytree`因为它的行为不同：由于目标目录不能存在，因此此功能不能用于覆盖其内容。

如果您想`cp`按照问题评论中的建议使用该工具，请注意使用该`subprocess`模块目前是生成新进程的推荐方式，如您[在 os.system 函数的文档中所见](http://docs.python.org/library/os.html)。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-10-02T09:02:48.397

看看[`shutil`](https://docs.python.org/3/library/shutil.html)包装，尤其是[`rmtree`](https://docs.python.org/3/library/shutil.html#shutil.rmtree)和[`copytree`](https://docs.python.org/3/library/shutil.html#shutil.copytree)。您可以使用 . 检查文件/路径是否存在`os.paths.exists(<path>)`。

```
import shutil
import os

def copy_and_overwrite(from_path, to_path):
    if os.path.exists(to_path):
        shutil.rmtree(to_path)
    shutil.copytree(from_path, to_path) 
```

`copytree`如果目录已经存在，文森特关于不工作的说法是正确的。`distutils`更好的版本也是如此。下面是固定版本`shutil.copytree`。它基本上是 1-1 复制的，除了第一个`os.makedirs()`放在 if-else-construct 后面：

```
import os
from shutil import *
def copytree(src, dst, symlinks=False, ignore=None):
    names = os.listdir(src)
    if ignore is not None:
        ignored_names = ignore(src, names)
    else:
        ignored_names = set()

    if not os.path.isdir(dst): # This one line does the trick
        os.makedirs(dst)
    errors = []
    for name in names:
        if name in ignored_names:
            continue
        srcname = os.path.join(src, name)
        dstname = os.path.join(dst, name)
        try:
            if symlinks and os.path.islink(srcname):
                linkto = os.readlink(srcname)
                os.symlink(linkto, dstname)
            elif os.path.isdir(srcname):
                copytree(srcname, dstname, symlinks, ignore)
            else:
                # Will raise a SpecialFileError for unsupported file types
                copy2(srcname, dstname)
        # catch the Error from the recursive copytree so that we can
        # continue with other files
        except Error, err:
            errors.extend(err.args[0])
        except EnvironmentError, why:
            errors.append((srcname, dstname, str(why)))
    try:
        copystat(src, dst)
    except OSError, why:
        if WindowsError is not None and isinstance(why, WindowsError):
            # Copying file access times may fail on Windows
            pass
        else:
            errors.extend((src, dst, str(why)))
    if errors:
        raise Error, errors 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-04-05T00:54:32.720

这是一个简单的解决方案，可以用源递归覆盖目标，同时创建任何必要的目录。这不处理符号链接，但它会是一个简单的扩展（见上面@Michael 的回答）。

```
def recursive_overwrite(src, dest, ignore=None):
    if os.path.isdir(src):
        if not os.path.isdir(dest):
            os.makedirs(dest)
        files = os.listdir(src)
        if ignore is not None:
            ignored = ignore(src, files)
        else:
            ignored = set()
        for f in files:
            if f not in ignored:
                recursive_overwrite(os.path.join(src, f), 
                                    os.path.join(dest, f), 
                                    ignore)
    else:
        shutil.copyfile(src, dest) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2020-10-13T17:15:35.030

在 Python 3.8 中，`dirs_exist_ok`关键字参数[被添加](https://docs.python.org/3.8/library/shutil.html?highlight=shutil#shutil.copytree)到`shutil.copytree()`：

> `dirs_exist_ok`指示是否引发异常以防万一`dst`或任何缺少的父目录已经存在。

因此，即使目标目录已经存在，以下内容也适用于最新版本的 Python：

```
shutil.copytree(src, dest, dirs_exist_ok=True)  # 3.8+ only! 
```

一个主要的好处是它比 更灵活`distutils.dir_util.copy_tree()`，因为它需要忽略文件的附加参数等（请参阅[文档](https://docs.python.org/3.8/library/shutil.html?highlight=shutil#shutil.copytree)）。最重要的是，已接受的[PEP 632](https://www.python.org/dev/peps/pep-0632/)还声明`distutils`将在 Python 3 的未来版本中弃用并随后将其删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-29T19:22:57.987

我的简单回答。

```
def get_files_tree(src="src_path"):
    req_files = []
    for r, d, files in os.walk(src):
        for file in files:
            src_file = os.path.join(r, file)
            src_file = src_file.replace('\\', '/')
            if src_file.endswith('.db'):
                continue
            req_files.append(src_file)

    return req_files
def copy_tree_force(src_path="",dest_path=""):
    """
    make sure that all the paths has correct slash characters.
    """
    for cf in get_files_tree(src=src_path):
        df= cf.replace(src_path, dest_path)
        if not os.path.exists(os.path.dirname(df)):
            os.makedirs(os.path.dirname(df))
        shutil.copy2(cf, df) 
```

# haskell - Snap、IO 和酸态

> ID：12683835
> 
> 赞同：1
> 
> 时间：2012-10-02T02:38:12.737
> 
> 标签：haskell, haskell-snap-framework, acid-state

尝试在 Snap 中使用酸状态，但遇到了障碍。

这是我到目前为止得到的。

首先是我的酸态相关对象（这是一本带有 isbn 编号的虚拟书）：

```
{-# LANGUAGE DeriveDataTypeable         #-}
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
{-# LANGUAGE MultiParamTypeClasses      #-}
{-# LANGUAGE TemplateHaskell            #-}
{-# LANGUAGE TypeFamilies               #-}
{-# LANGUAGE OverloadedStrings          #-}

module Models where

import Prelude hiding ((.), id)
import Control.Category ((.))
import Control.Monad.Reader (asks)
import Data.ByteString (ByteString)
import Data.SafeCopy (base, deriveSafeCopy)
import qualified Data.Text as T
import Data.Typeable (Typeable)
import Data.Acid (Update, Query, makeAcidic)
import Control.Monad.Reader (ask)
import Control.Applicative ((<$>))
import Data.Data (Data)

data Book = Book { isbn :: String }
     deriving (Eq, Ord, Read, Data, Show, Typeable)

$(deriveSafeCopy 0 'base ''Book)

-- Retrieve the book's isbn
queryIsbn :: Query Book String
queryIsbn = isbn <$> ask

$(makeAcidic ''Book ['queryIsbn]) 
```

然后我实际尝试将它与 Snap 集成。如您所见，我在定义 __doQuery__ 函数时遇到了麻烦，它应该返回一个字符串 isbn：

```
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE OverloadedStrings #-}
module Application where

import           Control.Monad.Trans.Class (lift)
import           Data.Text.Encoding (decodeUtf8)
import           Text.XmlHtml (Node(TextNode),Node (Element), 
                 getAttribute, setAttribute, nodeText)
import           Data.ByteString (ByteString)
import           Data.Maybe
import           Snap.Core
import           Snap.Snaplet
import           Snap.Snaplet.Heist (Heist, HasHeist(heistLens), heistInit,
                        addSplices, liftHeist, render)
import           Snap.Util.FileServe
import           Text.Templating.Heist (HeistT, Template, getParamNode)
import           Data.Lens.Template

import Models
import Data.Acid.Advanced (query')
import Data.Acid (AcidState, openLocalState, closeAcidState, IsAcidic, query)
import Data.Text (pack)
import Control.Monad.IO.Class (liftIO, MonadIO)
import Snap (snapletValue)
import Data.Lens.Common (getL, (^$), (^.), Lens) 
import Control.Monad.Reader (ask, asks)
import Control.Applicative ((<$>))
import Data.Typeable (typeOf)

import Prelude hiding ((.), id)
import Control.Category ((.), id)

------------------------------------------------------------------------------
type AppHandler = Handler App App

--------------
-- Acid
---------------
-- Used for holding data for the snapplet
data Acid st = Acid { _state ::  AcidState st }

-- Initializer function for the snapplet
seedBook =  Book "9213-23123-2311"

acidInit ::  SnapletInit b (Acid Book)
acidInit = makeSnaplet "storage" "Snaplet providing storage functionality" Nothing initializer

--The 'm' is the type variable of the MonadSnaplet type class. 'b' is the base state, and 'v' is the state of the current "view" snaplet (or simply, current state).
initializer :: Initializer b v (Acid Book)
initializer = do
      st <- liftIO (openLocalState seedBook)

      --onUnload (closeAcidState st)
      return $ Acid st

-----------------------
-- Snap Global State
--------------------

data App = App
    { _heist :: Snaplet (Heist App),
      _acid  :: Snaplet (Acid Book)
    }

makeLens ''App
----------------------------------------------------------------------------------

instance HasHeist App where
    heistLens = subSnaplet heist

-----------------------------------------------
-- | Initialize app
-----------------------------------------------
appInit :: SnapletInit App App
appInit = makeSnaplet "app" "Website" Nothing $ do
    h <- nestSnaplet "" heist $ heistInit "templates"
    a <- nestSnaplet "isbn"  acid (acidInit)
    addRoutes routes --see below
    addSplices [ ("menuEntry", liftHeist menuEntrySplice) ]
    return $ App h a

------------------------------------------------
-- | The application's routes.
------------------------------------------------
routes :: [(ByteString, Handler App App ())]
routes = [ ("/books",    handleBooks)
         , ("/contact",  render "contact")
         , ("/isbn",     liftIO doQuery >>= writeBS )
         , ("",          serveDirectory "static")
         ]

-- Is this Function signature possible? Or must it run inside Snap or other monad?
doQuery :: IO ByteString
doQuery = do    -- ???????????
        --somehow retrieve acid store from snaplet
        --run queryIsbn on it
        --return isbn string
        return "BLAH"

handleBooks :: Handler App App ()
handleBooks = render "books" 
```

对我所缺少的任何帮助将不胜感激。如果有不清楚的地方，请告诉我，我会更新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:52:06.823

MathematicalOrchid 是正确的，对您的问题最简单的答案是在 openLocalState 调用上使用 liftIO 。

但从更广泛的角度来看，您在这里所做的事情已经由[snaplet-acid-state](http://hackage.haskell.org/package/snaplet-acid-state)包为您完成，所以我建议您只使用它。该存储库还包括一个[示例应用程序](https://github.com/mightybyte/snaplet-acid-state/blob/master/examples/Site.hs)，演示如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:44:47.053

我不知道你正在使用的包，但*看起来*问题只是`openLocalState`一个`IO`动作，但你的类型签名要求它是一个`Initializer`动作。

修复它可能就像`liftIO`在其中填充调用一样简单。不过我不太确定......我不知道这些类型中的每一种来自哪个模块。

# ios - MPMoviePlayerController 在视图展开到全屏时释放

> ID：12683840
> 
> 赞同：2
> 
> 时间：2012-10-02T02:39:16.160
> 
> 标签：ios, xcode, mpmovieplayercontroller, xcode-instruments

如何检查实例何时`MPMoviePlayerController`被释放？注意我已经将 NSZombieEnabled 设置为 YES 并选中。

有问题的代码在我的应用程序中的某些情况下运行良好。在另一个例子中，当带有moviePlayer控件的视图展开时，`MPMoviePlayerDidEnterFullscreenNotification`回调方法被执行，并且在屏幕变黑并且从用户角度看应用程序冻结后不久。（不同的是这个在导航堆栈上有一个额外的 viewController）。它不会使应用程序崩溃。它仍在运行，但无法返回可用的 UI。

在调试器中，我检查实例“活动”的最后已知时间以获取其地址，检查并发现它已被释放：

```
2012-10-01 18:35:46.032 MyApp[930:907] -[MyMoviePlayerViewController moviePlayerDidEnterFullscreenNotification:](203): : moviePlayer = <MPMoviePlayerController: 0x1dba9420> loadState = 3
2012-10-01 18:36:05.280 MyApp[930:907] [MPAVController] Autoplay: Enabling autoplay 
```

这里出现黑屏，所以我检查调试器：

```
(lldb) po 0x1dba9420
2012-10-01 18:37:38.656 MyApp[930:907] *** -[MPMoviePlayerController respondsToSelector:]: message sent to deallocated instance 0x1dba9420
(int) $0 = 498766880 [no Objective-C description available] 
```

如果我检查其他类的其他已知实例，它们是活着的并且如预期的那样：

```
(lldb) po 0x1da12110
(int) $1 = 497099024 <MyDetailViewControllerWithTableView: 0x1da12110>
(lldb) po 0x1da1af70
(int) $2 = 497135472 <MyMasterTableViewController: 0x1da1af70>
(lldb) po 0x1da19be0
(int) $3 = 497130464 <NSFetchedResultsController: 0x1da19be0> 
```

因此，重申一下，如何检查实例何时以及通过什么方式被释放或销毁？是否有可以使用的 Instruments 类型。Allocations 显示实例已分配，但现在不存在了....

我想我可以逐步跟踪，但这很乏味......能够在事件发生时设置条件并触发仪器（或调试器）停止会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:06:28.667

我解决了这个问题。似乎当用户展开moviePlayer时，事件生命周期导致视图（MyAddDetailViewController）（包含子视图（MyMoviePlayerController））执行viewWillDisappear和viewDidDisappear。

我提到代码路径在导航堆栈上创建了一个额外的 viewController，并且 VC 正在短暂出现（由 viewWillAppear 消息证明）然后返回后台并使用 viewWillDisappear。仍然不清楚为什么这会导致 autoreleasePool 释放 MyAddDetailViewController 从而释放 MyMoviePlayerController，但现在很清楚没有对 MyAddDetailViewController 的强引用。

为了解决这个问题，我在 VC 中创建了一个属性，将 MyAddDetailViewController 推送到导航堆栈上以保持对它的强引用。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// ... snip ...
    self.myAddDetailViewControllerReference = [segue destinationViewController];

}

//

- (void)viewDidUnload {
    [self setMediaAddDetailViewControllerReference:nil];

} 
```

这可以解决黑屏/冻结问题。

# flash - 如何在 AS 2 中访问已在舞台上的对象？

> ID：12683845
> 
> 赞同：0
> 
> 时间：2012-10-02T02:39:48.693
> 
> 标签：flash, actionscript-2

如果我想使用 ActionScript 访问它们，我总是通过以编程方式添加元素来解决这个问题，但我现在处于一种非常困难的情况。我的电影都需要网络访问，所以我不能在本地运行它们，所以 trace() 语句也不起作用。有谁知道是否可以使用脚本访问元素（在本例中为动态文本字段）？如果是这样，我该如何访问它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:51:10.917

如果您指的是 Flash 设计视图中放置在舞台上的对象，只需确保您在属性面板中为该对象指定了一个“实例名称”。然后您可以通过movieClipName.instanceName 或_root.instanceName 引用该对象，如果该对象没有嵌套在任何子影片剪辑中。

# php - 是否有任何符号不能提交到哈希函数中？

> ID：12683851
> 
> 赞同：1
> 
> 时间：2012-10-02T02:40:40.327
> 
> 标签：php, hash

是否有任何字符或符号不能/不应该提交到任何会引发错误或破坏函数或类似内容的哈希函数中？不需要转义提交到散列中的字符或任何对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:42:14.697

不会。哈希函数适用于二进制数据，就像字符串一样。您无需为散列准备数据。

# c# - 在 Monotouch 中继承和覆盖 UITextField

> ID：12683853
> 
> 赞同：5
> 
> 时间：2012-10-02T02:40:54.900
> 
> 标签：c#, objective-c, ios, xamarin.ios, uitextfield

我正在尝试将 UITextField 的占位符文本设置为不同的颜色。我了解到我需要继承并覆盖 drawPlaceholderInRect 方法。

[iPhone UITextField - 更改占位符文本颜色](https://stackoverflow.com/questions/1340224/iphone-uitextfield-change-placeholder-text-color-)

```
 (void) drawPlaceholderInRect:(CGRect)rect {
    [[UIColor blueColor] setFill];
    [[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:16]];
} 
```

这是我到目前为止所拥有的，但我只是不知道如何让它恰到好处。我对最后一行感到困惑，因为我不知道如何将其映射到 MonoTouch/C# 对象。

```
using System;
using MonoTouch.UIKit;
using MonoTouch.Foundation;
using System.Drawing;

namespace MyApp
{
    [Register("CustomUITextField")]
    public class CustomUITextField:UITextField
    {
        public CustomUITextField () :base()
        {

        }

        public CustomUITextField (IntPtr handle) :base(handle)
    {

    }    

        public override void DrawPlaceholder (RectangleF rect)
        {       

            UIColor col = new UIColor(0,0,255.0,0.7);
            col.SetFill();
            //Not sure what to put here
            base.DrawPlaceholder (rect);}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:46:39.213

原始的 ObjC 代码不调用`super`（它的基本方法）但是`drawInRect:`. 你用 MonoTouch 尝试过同样的方法吗？例如

```
public override void DrawPlaceholder (RectangleF rect)
{
    using (UIFont font = UIFont.SystemFontOfSize (16))
    using (UIColor col = new UIColor (0,0,255.0,0.7)) {
        col.SetFill ();
        base.DrawString (rect, font);
    }
} 
```

注意：`drawInRect:WithFont:`映射到`DrawString`C# 中的扩展方法（可以在任何 上调用`string`）。

# android - 使用命令行参数使用 ffmpeg 将图像编码为视频

> ID：12683856
> 
> 赞同：1
> 
> 时间：2012-10-02T02:41:10.013
> 
> 标签：android, c++, command-line-arguments

我们正在使用 ffmpeg 对图像进行视频编码。这是基于 3D 动画的 Android 原生应用。

我们在构建 ffmpeg 视频编码时使用命令行参数选项。其他选项是使用 Android NDK。

任何人都可以帮助我们使用 ffmpeg 视频编码的命令行参数选项。

谢谢

# json - Grep JSON 代码块

> ID：12683858
> 
> 赞同：0
> 
> 时间：2012-10-02T02:41:18.740
> 
> 标签：json

嗨，我有一个相当长的 JSON 文件，其中包含一堆条目，例如：

```
 {
Title: ABC123
Date: 583838484483
User: ABC33333
},
...etc 
```

我正在寻找的是能够 grep 字符串，如果它包含在该代码块中的任何位置，则返回整个块。你能提供什么帮助吗？

好吧，我想我已经完成了一半，所以我可以让 awk 在 {} 之间打印，但现在我如何让它也将每个块打印到自己的文件中？

```
cat all.txt  /{/ , /},/ { print $0 }>test.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:43:14.760

您可以将 grep 与 --before-context 和 --after-context 选项一起使用，例如：

```
grep --before-context=5 --after-context=5 "User: ABC33333" file.json 
```

# java - 在 android 活动中使用外部类

> ID：12683867
> 
> 赞同：1
> 
> 时间：2012-10-02T02:42:44.927
> 
> 标签：java, android

在我真正开始做一个项目之前，我想练习一下我认为的 android 开发的基本原则。我目前有一`ChipCount`门课程负责保存和加载玩家将拥有的筹码数量。该班级还将负责跟踪总体上的筹码数量。

我的`ChipCount`班级目前如下所示：

```
package com.example.parceltest;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import android.content.Context;

public class ChipCount {

    private int number_of_chips;
    Context file_context;

    public ChipCount() {
        loadChips();
    }

    public void setChips(int chips) {
        this.number_of_chips = chips;
    }

    public int getChips() {
        return number_of_chips;
    }

    public void saveChips() {
        String filename = "chipsave";
        String save_string = String.valueOf(number_of_chips);

        try {
            FileOutputStream output = file_context.getApplicationContext().openFileOutput(filename, Context.MODE_PRIVATE);
            output.write(save_string.getBytes());
            output.close();
        } catch(IOException e) {

        }

    }

    public void loadChips() {
        String filename = "chipsave";
        String chip_count = "";

        try {
            FileInputStream input = file_context.getApplicationContext().openFileInput(filename);
            input.read(chip_count.getBytes());
        } catch(IOException e) {
            this.setChips(500);
        }
    }

} 
```

我也有`MainActivity`尝试使用的，`ChipCount`但它崩溃了。

```
package com.example.parceltest;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

    ChipCount chips = new ChipCount();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView number_of_chips = (TextView) findViewById(R.id.number_of_chips);
        int chip = chips.getChips();
        //number_of_chips.setText("500");
    }

} 
```

通过注释掉不同的行，我确定问题出在 line 上`int chip = chips.getChips();`。

为什么这会使程序崩溃，我怎么可能修复它。

**这是日志猫：**

```
10-01 22:51:06.958: I/Process(28051): Sending signal. PID: 28051 SIG: 9
10-01 22:51:26.669: D/AndroidRuntime(28106): Shutting down VM
10-01 22:51:26.669: W/dalvikvm(28106): threadid=1: thread exiting with uncaught exception (group=0x40b7c300)
10-01 22:51:26.669: E/AndroidRuntime(28106): FATAL EXCEPTION: main
10-01 22:51:26.669: E/AndroidRuntime(28106): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.parceltest/com.example.parceltest.MainActivity}: java.lang.NullPointerException
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.os.Looper.loop(Looper.java:137)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread.main(ActivityThread.java:4745)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at java.lang.reflect.Method.invokeNative(Native Method)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at java.lang.reflect.Method.invoke(Method.java:511)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at dalvik.system.NativeStart.main(Native Method)
10-01 22:51:26.669: E/AndroidRuntime(28106): Caused by: java.lang.NullPointerException
10-01 22:51:26.669: E/AndroidRuntime(28106):    at com.example.parceltest.ChipCount.loadChips(ChipCount.java:45)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at com.example.parceltest.ChipCount.<init>(ChipCount.java:15)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at com.example.parceltest.MainActivity.<init>(MainActivity.java:9)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at java.lang.Class.newInstanceImpl(Native Method)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at java.lang.Class.newInstance(Class.java:1319)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-01 22:51:26.669: E/AndroidRuntime(28106):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-01 22:51:26.669: E/AndroidRuntime(28106):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:44:42.620

你永远不会初始化`chips`. 因此它是`null`，所以你不能访问它的方法。

而不是`ChipCount chips;`，尝试：`ChipCount chips = new ChipCount();`。

*注意：另外，将来，当您遇到崩溃时，请发布 LogCat 错误。在这种情况下，这是一个相对简单的修复，但将来可能需要这些日志。*

**编辑**：

此外，您永远不会向您的`ChipCount`对象传递`file_context`参数。这使得`file_context` `null`当你调用它时`loadChips();`。

试试这个：

```
public class MainActivity extends Activity {

    ChipCount chips; // Don't initialize here, on second thought

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        chips = new ChipCount(this); // Initialize here; and pass it `this`, which is an Activity, and also a Context

        TextView number_of_chips = (TextView) findViewById(R.id.number_of_chips);
        int chip = chips.getChips();
        //number_of_chips.setText("500");
    }

} 
```

然后，在您的构造函数中`ChipCount`，接受一个`Context`参数，然后执行`file_context = newContext;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:44:26.880

您从未初始化`ChipCount chips;`，因此调用时为 null ，并引发`NullPointerException`.

你需要`ChipCount chips = new ChipCount();`在你的代码中有类似的东西。

# php - 使用 jQuery 将 msg_id 传递到 Twitter Bootstrap 模式

> ID：12683868
> 
> 赞同：1
> 
> 时间：2012-10-02T02:42:58.390
> 
> 标签：php, jquery, twitter-bootstrap

我有一个 jquery 模式。所以现在我想将 msg_id 的值传递给模态。

HTML 代码：

```
<a data-toggle="modal" href="#com" id="<?php echo $msg_id; ?>">Comment</a> 
```

--

```
<div id="com" class="modal hide fade in" style="display: none; ">
<div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
        <h3><?php echo $msg_id; ?></h3>
</div>

<div class="modal-body">
    <h4>Text in a modal</h4>
    <p>You can add some text here.</p>              
</div>

<div class="modal-footer">
    <a href="#" class="btn btn-success">Call to action</a>
    <a href="#" class="btn" data-dismiss="modal">Close</a>
</div> 
```

这是屏幕截图。如果我单击表 1 中的注释，它会显示并且我可以看到通过值。但是如果我单击表 2 中的注释，它会显示与表 1 相同。应该不同，因为每个都有不同的 msg_id。

![在此处输入图像描述](../Images/69dd8050f049d4f6a206c0657ed19594.png)

那么如何将 msg_id 值传递给我的代码情况下的模式？感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:55:35.230

您必须在 a 标签中添加一些类属性，例如“modal-toggler”

```
<a  class="modal-toggler" data-toggle="modal" href="#com" 
    id="<?php echo $msg_id; ?>">
    Comment
</a> 
```

并像这样调用一些jQuery脚本

```
<script type="text/javascript">
$(".modal-toggler").click(function(){
    var _id = $(this).attr("id");
    $("#com h3").text(_id);
    $("#com").show();
    return false;
});
</script> 
```

# ember.js - ember 路由器错误：对象哈希没有方法“getURL”

> ID：12683871
> 
> 赞同：0
> 
> 时间：2012-10-02T02:43:16.570
> 
> 标签：ember.js, ember-old-router

我刚刚从 v1.0.pre-42 切换到 ember-latest v1.0.pre-160-g7d62790，现在我的路由器抛出错误：TypeError: Object hash has no method 'getURL' when it is started。

该应用程序正在自动初始化。我已经深入研究了源代码，违规行是 11264: router.route(location.getURL());

在这种情况下，位置是'hash'，它是Router.location的默认值。我认为它应该在路由器初始化时在内部设置为HashLocation。因此getURL（）调用。

但它仍然是一个字符串。我怀疑这与某种初始化不正常有关，但我可以弄清楚原因。其他人遇到过这种情况，或者知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:17:10.367

自己解决了。问题是我覆盖了 Router.initialize() 但没有在其中调用 super() ，因此路由器没有完成其初始化。

# java - What causes my Java algorithm slower and slower after I start it for the first time?

> ID：12683873
> 
> 赞同：-1
> 
> 时间：2012-10-02T02:43:31.120
> 
> 标签：java, performance

I made a Java algorithm. It access the MongoDB database. It looks like they don't provide a method like .close() or .dispose(). SO I never use this kind of methods in the codes. Every time I run/debug the program, it becomes slower and slower. Is that any reasons or possibilities, generally or specifically?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:52:23.850

The specific problem is that you are probably not cleaning test data out of the database after each run.

But this is also telling you something important about your application's scalability; i.e. that it is likely to slow down noticeably in production as you add more and more data ... in some particular dimension. You should probably track down what is causing this problem now, rather than waiting until you run into operational problems.

The slow down that you are observing could potentially be a number of things, but I'd start by looking at whether your query performance could be improved by adding appropriate indexes.

* * *

> I only retrieve. I don't insert new data.

That's what you say. In practice, *something* must be inserting data ... or something like that. It is hard to see what else could be causing the slowdown.

# iphone - 模式视图中的 UIWebview 在横向模式下以纵向显示

> ID：12683874
> 
> 赞同：4
> 
> 时间：2012-10-02T02:43:38.750
> 
> 标签：iphone, objective-c, uiview, uiwebview, modalviewcontroller

我浏览了大部分问题并尝试了几乎所有内容。但不好的部分是问题仍然存在。

我有一个`UIVIew`总是在横向模式下启动的，我将第二个视图 ( `detailView`) 作为全屏模式视图。

上面有`detailview`一个`UIwebview`。

当我将其呈现`detailView`为模态视图时，webview 以纵向模式显示。

我正在返回 " `YES`"并且`shouldAutoRotateToInterfaceOrientation`还有 set`autoresize`和属性。`autoresizingMask``scalePageToFit`

当我旋转设备时，当`detailView`它在前面时，webview 会正确排列为横向。

问题仅在我第一次提出`modalView`时。

旋转设备正在正确调整布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:17:03.697

据我所知，iPhone 上的 ModalViews 不支持横向视图。iPhone 5 的情况可能有所不同。

但听起来您将 ModalView 而不是 WebView 设置为横向，我建议采用不同的方法来处理这个问题。

例如，您可以像 ModalView 一样为 DetailView 设置动画，以便它以正确的方向开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T15:48:50.267

如果您在 iOS 6 上运行您的应用程序，您将需要在模态视图控制器中添加以下代码来支持横向：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL) shouldAutorotate {
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscapeLeft;
} 
```

此外，请确保您在实际设备上进行测试，而不是在模拟器上进行测试，因为自动旋转在模拟器上的行为不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:03:30.300

这样就可以了：

```
CGAffineTransform transform = CGAffineTransformIdentity;
webView.transform = CGAffineTransformRotate(transform,-M_PI/2); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-08T06:40:00.960

好的。首先，我发布的问题不清楚。我的问题是，当我以纵向加载 webview 时，它以横向模式（CSS）加载 webview 元素，并以横向模式加载为纵向模式（CSS）。

原来我没有应用正确的 CSS 样式。

我所做的修复是：在 ViewDidLoad 和 willAnimateRotation 方法中，我将通知发布到我的 javascript 以根据方向更新样式:)

# sql - 选择查询固定长度

> ID：12683876
> 
> 赞同：7
> 
> 时间：2012-10-02T02:43:51.230
> 
> 标签：sql, sql-server-2008, ssis, text-files, fixed-width

我有一个名为 customer 的表，我在其中选择几列并使其长度固定，我需要将值发送到 SSIS 包以获得固定长度的输出并写入文本文件

```
customerID:10
Mobilenumber:11
Emailaddress:256

select customerID,mobilenumber,Emailaddress from customer 
```

我想确保我的 customerID 的长度始终为 10，手机号码为 11，电子邮件地址为 256。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T03:17:43.270

您可以将它们转换为固定长度的字符串数据类型，如下所示：

```
select cast(customerID as char(10)) as customerID,
    cast(mobilenumber as char(11)) as mobilenumber,
    cast(Emailaddress as char(256)) as Emailaddress
from customer 
```

如果您在像这样工作时遇到任何奇怪的事情，记住您的[ANSI_PADDING](http://msdn.microsoft.com/en-us/library/ms187403.aspx)设置可能会有所帮助。

另一种方法可能是：

```
select left(Emailaddress + replicate(' ', 256), 256) 
```

尽管这种方法通常只是将其他语言的类似逻辑应用于 T-SQL。

# java - 字符串金字塔中的java计数器

> ID：12683878
> 
> 赞同：0
> 
> 时间：2012-10-02T02:44:08.283
> 
> 标签：java, for-loop

我正在尝试用字符串创建一个倒金字塔。循环从每一端减去一个字符。只有它的右侧被减去。我如何让它对左侧做同样的事情？我怎样才能让它正确打印每行的长度？

```
 int x = 0;

     int space = ' ';

     space = space + ' ';  

     int counter = fullName.length();

     for( x = 0; x < fullName.length()/2; x++ )
     {

         System.out.println( counter - x + " [" + fullName.substring( x, fullName.length() - x ) + "]" );

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:46:43.823

`String#substring`不替换`String`变量的内部数据。请记住，`String`实例是不可变的。

您应该在打印`String spaces`之前打印一个变量`fullName`以添加空格：

```
String spaces = ""
for( x = 0; x < fullName.length()/2; x++ ) {
    System.out.println(spaces + fullName.substring(x, fullName.length()-x));
    spaces = spaces + " ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:52:40.790

如果你想要看起来像这样的东西：

```
triangle
 riangl
  iang
   an 
```

除了从打印内容的末尾删除文本之外，您还需要确保在打印内容的开头添加空格。

```
for( x = 0; x < fullName.length()/2; x++ ) {
    System.out.print(counter - x + " [");
    for(int y = 0; y < x; y++) {
        System.out.print(" ");
    }
    System.out.println(fullName.substring( x, fullName.length() - x ) + "]" );
} 
```

# kinect - 适用于 Xbox 的 Kinect 与 OpenNI 兼容

> ID：12683884
> 
> 赞同：1
> 
> 时间：2012-10-02T02:44:50.647
> 
> 标签：kinect, openni, xbox, point-cloud-library

我正在使用适用于 Xbox 的 Kinect，我计划使用 OpenNI 框架和点云库进行处理，但我无法让 OpenNI 识别我的适用于 Xbox 的 Kinect，我想确保它实际上与设备。

出于某种原因，我无法找到关于这个确切主题的任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:02:08.287

PCL 确实适用于 OpenNI。我已经设法在 Windows 上轻松编译[OpenNI Grabber 示例](http://pointclouds.org/documentation/tutorials/openni_grabber.php#openni-grabber)（使用 All In One 安装程序）。我必须承认我在 osx 上没有进行同样的管理（在机器上安装了各种版本的 VTK 时遇到了一些问题）。

从外观上看，问题似乎不在 PCL 方面，而是在 OpenNI 驱动程序方面。你能运行任何样本吗？如果没有，您会收到什么错误消息？我建议清理（卸载 OpenNI、NITE、SensorKinect）并安装不稳定的版本，但尝试按以下顺序安装：

1.  OpenNI 1.5.4.0
2.  晚上 1.5.2.21
3.  [Avin 的 SensorKinect](https://github.com/avin2/sensorkinect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:07:13.817

您使用哪个版本的 OpenNI？如果您使用 1.5.4 版本，我认为没有问题，因为 OpenNI 直接与您的 Kinect Xbox 交互。但是，如果您使用 OpenNI 2.x 版，它将通过 Kinect SDK 与您的设备交互（[http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/a11ff6d9-7fbe-4636-8ff0 -92d6220ac3f8/](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/a11ff6d9-7fbe-4636-8ff0-92d6220ac3f8/) ) 由于 linux 上没有 Kinect SDK，因此您无法让 OpenNI 2 识别您的设备。

# c# - 在 Android 中开发 WP7 应用程序 - 如何将类型从 C# 移植到 Android？

> ID：12683889
> 
> 赞同：0
> 
> 时间：2012-10-02T02:46:18.533
> 
> 标签：c#, java, android, windows-phone-7

我有一个使用 Windows Azure Web 服务的 WP7 应用程序。我目前使用可移植类库来管理 Windows Azure 应用程序和 WP7 应用程序共享的类型。Azure 服务是一个 REST API - WP7 反序列化我的一个类的实例并将其发送到 API，API 将其序列化回类类型并将其保存到 Azure 表存储。

要开始在 Android 中构建它，如何将这些类提供给 Android 代码？REST API 需要能够识别它们并将它们序列化回 .NET 类。我知道我可以将它们转换为 Java，并与 C# 类分开管理它们，但这是最好、最干净的方式吗？我不想让这本身成为一个巨大的项目。我们正在谈论 7 个左右的类，它们可能不会有太大变化。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:48:50.683

如果您需要移植到 Android，我认为您需要忘记本机序列化（但首先您需要仔细检查它实际上是如何序列化的）。

您需要使用 JSON 或 XML 进行移植。

您可以使用内容类型协商向 WP 客户端提供序列化的 .net 本机，向 Android 客户端提供 JSON 或 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:08:53.490

最好的选择似乎是让 Android 开发人员将 C# 类重写为 Java 类。

# java - Java：如何从用户指定的文件中扫描

> ID：12683890
> 
> 赞同：0
> 
> 时间：2012-10-02T02:46:18.513
> 
> 标签：java, io

更具体地说，我如何编写可以为用户输入的任何文本文件创建扫描仪的代码？例如，一个用户可能想要从“foo.txt”中扫描文本，而另一个用户可能想要从“bar.txt”中读取。我该如何弥补这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:58:05.187

您可以简单地创建一个打开文件并返回阅读器的函数，以便您可以阅读每一行：

```
public BufferedReader readFromFile(String path) {
    try {
        return new BufferedReader(new FileReader(path));
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

然后使用它返回的 BufferedReader 并遍历每一行！希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T02:52:44.067

您可以将文件的路径作为程序的输入。对于输入，您可以查看[http://www.programmingsimplified.com/java/source-code/java-program-take-input-from-user](http://www.programmingsimplified.com/java/source-code/java-program-take-input-from-user)

在变量中包含此路径后，您可以用此变量替换硬编码的文件名。

# php - preg_split 和使用正则表达式时遇到问题

> ID：12683891
> 
> 赞同：1
> 
> 时间：2012-10-02T02:46:19.133
> 
> 标签：php, regex, preg-split

我在学习正则表达式和`preg_split`.

我正在尝试应用我所*学*的知识，但似乎无法进行简单的搜索..

我尝试了很多变体，但无法区分粗体标签，只有粗体标签

```
<?php
$string = "<b>this is</b> <i>not</b> <b>bold</b>";

$find = '/<b>/';       // works as expected, separating at <b>

$find = '/<b>|<\/b>/'; // works as expected, separating at either <b> or </b>

$find = '/<b>*<\/b>/'; // why doesn't this work?

$find = '/^<b>*<\/b>/'; // why doesn't this work?

$find = '/<b>.<\/b>/'; // why doesn't this work

$result = preg_split($find, $string);

print_r($result);

?> 
```

如您所见，我正在尝试合并`.` `+`或开始`^`/结束`$`字符。

我*做错了*什么，它没有按我预期的方式工作？

感谢你的帮助！

ps 发现[这个](http://www.grymoire.com/Unix/Regular.html)也很有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:51:21.743

前两个“为什么不起作用”是匹配的，`<b`后跟零个或多个`>`字符，然后是`</b>`. 最后一个匹配`<b>`then 任何单个字符 then `</b>`。

我不确定你到底要做什么，但这会在开始和结束粗体标签上分开：`<\/?b>`- 它匹配`<`，然后是可选的`/`，然后是`b>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:05:41.257

```
$find = '/<b>*<\/b>/'; // why doesn't this work? 
```

匹配`"<b"`，零个或多个`">"`，后跟`"</b>"`.

也许你的意思是：

```
$find = '/<b>.*?<\/b>/'; 
```

这将匹配`"<b>"`，后跟一个长度未知的字符串，在第一次出现 时结束`"</b>"`。我不知道你为什么会分裂。应用在上面你会得到一个包含三个元素的数组：

```
" "
"<i>not</b> "
"" 
```

要匹配里面的所有东西`"<b>"`，`"</b>"`你需要`preg_match_all()`：

```
preg_match_all('#<b>(.*?)</b>#i', $str, $matches);
// $matches[1] will contain the patterns inside the bold tag, theoratically 
```

请注意，嵌套标签不太适合正则表达式，您可能希望使用[`DOMDocument`](http://www.php.net/domdocument).

* * *

```
$find = '/^<b>*<\/b>/'; // why doesn't this work? 
```

匹配`"<b"`字符串开头的零个或多个`">"`，后跟`"</b>"`.

```
$find = '/<b>.<\/b>/'; // why doesn't this work 
```

匹配`"<b>"`，后跟任意字符，后跟`"</b>"`.

# c++ - c++中的打印顺序

> ID：12683893
> 
> 赞同：2
> 
> 时间：2012-10-02T02:46:45.597
> 
> 标签：c++, compiler-optimization, cout

> **可能重复：**
> [cout << c++ << c; 的正确答案是什么？](https://stackoverflow.com/questions/10782863/what-is-the-correct-answer-for-cout-c-c)

我有以下代码 -

```
int a= 7;
const int &b = a;
int &c = a; 
```

如果我使用

```
cout << endl << ++c << '\t' << a << '\t' << b << '\t' <<  c; 
```

它打印

```
"8 7 7 8" 
```

但是，如果我使用

```
cout << endl << a << '\t' << b << '\t' << ++c << '\t' << a << '\t' << b << '\t' <<  c; 
```

它打印

```
"8 8 8 8 8 8" 
```

这究竟是怎么发生的？它与优化有关吗？如果是，我如何在 ideone.com 中将其关闭？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:48:57.130

实际上 operator<< 是一个函数调用，c++ 允许以它喜欢的任何顺序评估传递给函数的参数，因此 ++c inc 是由你的编译器首先完成的，非常合法 - 我的做法不同。

有趣的是我的编译器打印

```
8       8       8       7       7 
```

一些编译器为函数参数的评估顺序提供了开关，但如果你真的需要使用它，我会质疑自己的原因，因为代码有更多错误，而是以可移植的方式编写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:51:08.183

`a`, `b`, 和`c`都是同一个对象。然而，函数参数的求值顺序是未定义的。因此，无论编译器选择首先评估什么都可以。看来，在您的第二个表达式中，它`++c`首先评估。避免问题的方法是不要将修改与表达式的其余部分折叠起来，即`c`在输出之前或之后递增。

# java - 在java中格式化2个小数位

> ID：12683894
> 
> 赞同：3
> 
> 时间：2012-10-02T02:46:59.500
> 
> 标签：java, decimal

这是我的例子：

```
double num = 0;

num = 4/3;

System.out.println(num); 
```

我的输出是 1.0 而不是 1.3

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T02:47:33.337

不要进行 int 除法，因为这总是会导致截断的 int。而是让您的部门至少使用一个双精度值。

```
double num = 4.0/3.0; 
```

然后，当您想将其显示为字符串时，格式化输出，以便您可以选择小数位：

```
// one way to do it
// %.3f is for a floating number with 3 digits to the right of the decimal
// %n is for new line
System.out.printf(%.3f%n, num); 

Another:
DecimalFormat decimalFormat = new DecimalFormat("0.000");
System.out.println(decimalFormat.format(num)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-28T09:08:24.603

写

```
num=(double)4/3; 
```

它会返回`1.3333`....然后你可以四舍五入小数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:51:08.793

您还应该使用 String.format(%1.2f, yourDouble) 来格式化小数位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T17:52:19.253

试试这个..

```
double value= 255.956666;

BigDecimal bd = new BigDecimal(value).setScale(2, RoundingMode.HALF_UP);
System.out.println("value="+bd); 
```

# django - 在 Django 中获取动态字段的最佳方法

> ID：12683895
> 
> 赞同：0
> 
> 时间：2012-10-02T02:47:06.890
> 
> 标签：django, html-input

我有一个允许人们创建记录的 Django 应用程序。一条记录可以包含一个或多个人，默认情况下表单包含三个字段来捕获一个人的姓名。一个用于名字，一个用于中间名首字母，一个用于姓氏。当一个人创建记录时，他们可以通过单击加号按钮添加其他人。加号按钮添加了另一组三个文本框。他们可以为想要添加的人执行此操作。

一旦他们单击加号按钮，就会在每行旁边显示一个减号按钮，以便他们可以在决定删除这些字段时删除这些字段。

命名文本字段的最佳方法是什么，以便我可以获取所有文本字段并在应用程序的后端遍历它们？

我想如果我将它们都命名为相同的名称，那么当我这样做时，我会得到一组名称：

```
request.POST.getlist('firstname') 
```

然而，事实并非如此。相反，我从具有该名称的最后一个输入字段中获取值。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:56:32.193

我建议你看一下表单集，而不是重新发明这个。

[https://docs.djangoproject.com/en/dev/topics/forms/formsets/](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)

```
from django.forms.formsets import formset_factory

FormSet = formset_factory(MyForm, extra=2)
formset = FormSet()
print formset.forms # you will see it is a collection of MyForm objects 
```

您可以通过修改“管理表单”并添加下一个表单来动态添加/删除表单集（您可以将`{{ formset.empty_form }}`ID 复制并修改为第 N 个表单），网上有很多示例说明如何执行此操作：

[您将如何在 Django 中制作动态表单集？](https://stackoverflow.com/questions/2353710/how-would-you-make-a-dynamic-formset-in-django)
[使用 Ajax 将表单动态添加到 Django 表单集](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)

# java - 无法从 Java 属性文件中检索所有二维数组数据

> ID：12683897
> 
> 赞同：0
> 
> 时间：2012-10-02T02:47:18.047
> 
> 标签：java, eclipse

我正在尝试从 Java 属性文件中获取 2D 数组数据并将这些数据存储到 HashMap 对象中。让我感到困惑的是 Eclipse 仅从 2D 数组中检索一些数据。

以下是代码：

```
Properties config = new Properties();
config.load(new FileInputStream("categories.properties"));
String[][] categories = fetchArrayFromPropFile("content", config);
HashMap<String,Integer> hashmap = new HashMap<String,Integer>();
for (String[] mapping : categories)
{
  hashmap.put(mapping[0], 0);
} 
```

* * *

```
private static String[][] fetchArrayFromPropFile(String propertyName, Properties propFile) {
  String[] a = propFile.getProperty(propertyName).split(";");
  String[][] array = new String[a.length][a.length];
  for(int i = 0;i < a.length;i++) {
    array[i] = a[i].split(",");
  }
  return array;
} 
```

在 categories.properties 文件中：

```
content=Advertising,0;Agriculture,0;Art,0;Automotive,0;Aviation,0;Banking,0;Beverages,0;Biotechnology,0;Business,0;Crime,0;Disasters,0;Economics,0;Education,0;Elections,0;Fashion,0;Food,0;Hardware,0;Health,0;Hotels,0;Intellectual Property,0;Investing,0;Labor,0;
Law,0;Marriage,0;Mobile Devices,0;Politics,0;Real Estate,0;Renewable Energy,0;Robotics,0;Science,0;Social Media,0;Software and Internet,0;Space,0;Sports,0;Technology,0;Traditional Energy,0;Travel,0;Video Games,0;War,0;Weather,0;Entertainment,0;No Topic,0; Business_Finance,0;Disaster_Accident,0;Entertainment_Culture,0;Environment,0;Health_Medical_Pharma,0;Hospitality_Recreation,0;Human  Interest,0;Law_Crime,0;Religion_Belief,0;Technology_Internet,0;War_Conflict,0;Other,0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:26:25.837

这是因为您的属性文件格式是

> ```
> content=XXXXXXXXXXXXXXXXXXXXXXXX
> XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
> ```

你看，**它被分成两行代表一个属性。因此，在读取您的内容属性时，它只读取第一行并且不包含所有数据。**

如果是这样，请像这样手动将您的属性文件连接成一行。

```
content=Advertising,0;Agriculture,0;Art,0;Automotive,0;Aviation,0;Banking,0;Beverages,0;Biotechnology,0;Business,0;Crime,0;Disasters,0;Economics,0;Education,0;Elections,0;Fashion,0;Food,0;Hardware,0;Health,0;Hotels,0;Intellectual Property,0;Investing,0;Labor,0;Law,0;Marriage,0;Mobile Devices,0;Politics,0;Real Estate,0;Renewable Energy,0;Robotics,0;Science,0;Social Media,0;Software and Internet,0;Space,0;Sports,0;Technology,0;Traditional Energy,0;Travel,0;Video Games,0;War,0;Weather,0;Entertainment,0;No Topic,0; Business_Finance,0;Disaster_Accident,0;Entertainment_Culture,0;Environment,0;Health_Medical_Pharma,0;Hospitality_Recreation,0;Human  Interest,0;Law_Crime,0;Religion_Belief,0;Technology_Internet,0;War_Conflict,0;Other,0; 
```

如果是这样，您的代码工作正常并且所有数据都被读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:40:34.900

使用“\”连接一个属性的不同线。

例如：

```
 a=b \
    c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T03:01:10.033

我想你想要：

```
String[][] array = new String[a.length][2]; 
```

# python - 如何将字符串转换为嵌套列表中的整数？

> ID：12683899
> 
> 赞同：-1
> 
> 时间：2012-10-02T02:47:28.123
> 
> 标签：python, string, integer, nested-lists

> **可能重复：**
> [如何在python中将字符串转换为整数？](https://stackoverflow.com/questions/642154/how-to-convert-strings-into-integers-in-python)

```
listy = [['1', '2', '3', '4', '5'], "abc"]

for item in listy[0]:
    int(item)

print listy 
```

在嵌套列表中，如何将所有这些更改`strings`为`ints`？上面的内容给了我一个输出：

```
[['1', '2', '3', '4', '5'], 'abc'] 
```

这是为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:51:18.730

您需要将转换后的项目分配回子列表 ( `listy[0]`)：

```
listy[0][:] = [int(x) for x in listy[0]] 
```

解释：

```
for item in listy[0]:
    int(item) 
```

上面迭代子列表中的项目并将它们转换为整数，但它没有将表达式的结果分配`int(item)`给任何东西。因此结果丢失。

`[int(x) for x in listy[0]]`是一个列表推导（`for`循环的一种简写），它遍历列表，将每个项目转换为整数并返回一个新列表。然后将新列表分配回（就地，可选）到外部列表。

这是针对您的特定问题的非常定制的解决方案。更通用的解决方案涉及递归以获取子列表，以及某种检测候选数字转换的方法。

# php - PHP MongoDB execute() 锁定集合

> ID：12683905
> 
> 赞同：0
> 
> 时间：2012-10-02T02:48:00.910
> 
> 标签：php, mongodb, mongodb-php

我在命令行上使用 MongoDB 来循环遍历一组特定条件的文档，从一个集合移动到另一个集合并从原始集合中删除。

```
db.coll1.find({'status' : 'DELETED'}).forEach(
    function(e) {db.deleted.insert(e);  db.coll1.remove({_id:e._id});  }); 
```

这可行，但是我需要编写脚本，以便每天（或每小时）通过 cron 脚本将 coll1 中的所有文档移动到已删除的集合中。我正在使用 PHP，所以我想我会编写一个使用 Mongo PHP 库的脚本::

```
$db->execute('db.coll1.find({'status' :'DELETED'}).forEach(
    function(e) {  db.deleted.insert(e); db.coll1.remove({_id:e._id});  })'); 
```

这可行，但与 Mongo 命令行不同，db->e​​xecute() 被评估，这会导致锁定直到执行块完成，这会阻止对集合的所有写入。我不能在我的生产环境中这样做。

有没有办法（无需手动登录 Mongo 并运行命令）并通过 PHP 脚本执行而不锁定？

如果我使用：

```
db->selectCollection('coll1')->find(array('status' => 'DELETED')) 
```

并遍历，我可以选择文档，保存到已删除的集合并从 coll1 集合中删除。然而，这似乎需要大量带宽来拉取客户端上的所有内容并将其保存回服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:51:58.057

> 有没有办法（无需手动登录 Mongo 并运行命令）并通过 PHP 脚本执行而不锁定？

正如您所说，最好的办法是在客户端进行。至于带宽，除非您拥有 90 年代之前的网络，否则与您用于其他一切（包括副本集等）的带宽相比，它很可能是非常小的带宽。

您可以做的是在实际删除时（在您的应用程序中）存储您的删除，而不是每天一次，然后您将每天一次返回原始集合，删除所有已删除的行。这样一来，带宽将全天分布，在清理您的作品时，您只需执行一个删除命令。

另一种选择是使用 MR 并使其`output`成为该集合。

虽然一般来说，以这种方式进行仓储删除通常比它值得做的工作更多。通常最好将它们保留在您的主集合中并围绕已删除标志处理您的查询（因为您可能已经不立即存储这些）。

# css - 设置 select2 输入的宽度（通过 Angular-ui 指令）

> ID：12683907
> 
> 赞同：168
> 
> 时间：2012-10-02T02:48:30.370
> 
> 标签：css, twitter-bootstrap, angularjs, jquery-select2

我在使这个 plunkr (select2 + angulat-ui) 工作时遇到问题。

[http://plnkr.co/edit/NkdWUO?p=preview](http://plnkr.co/edit/NkdWUO?p=preview)

在本地设置中，我得到了 select2 的工作，但我无法按照[文档](http://angular-ui.github.com/#directives-select2)中的描述设置宽度。它太窄而无法使用。

![在此处输入图像描述](../Images/c74dbeb8f5d1925e5f3223a0b921b1b7.png)

谢谢你。

编辑：没关系那个plnkr，我在这里找到了一个工作小提琴 [http://jsfiddle.net/pEFy6/](http://jsfiddle.net/pEFy6/)

看起来这是 select2 折叠到第一个元素的宽度的行为。我可以通过引导程序设置宽度。`class="input-medium"`仍然不确定为什么 angular-ui 不采用配置参数。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2014-01-18T01:26:42.367

在我的情况下，如果有零个或多个药丸，select2 将正确打开。

但是，如果有一颗或多颗药丸，我将它们全部删除，它会缩小到最小的宽度。我的解决方案很简单：

```
$("#myselect").select2({ width: '100%' }); 
```

* * *

## 回答 #2

> 赞同：228
> 
> 时间：2012-11-24T16:54:11.333

您需要指定要解析的属性宽度以保留元素宽度

```
$(document).ready(function() { 
    $("#myselect").select2({ width: 'resolve' });           
}); 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-06-01T11:53:20.987

这是一个老问题，但新信息仍然值得发布......

从 Select2 版本 3.4.0 开始，有一个属性`dropdownAutoWidth`可以解决问题并处理所有奇怪的情况。请注意，默认情况下不启用。它在用户进行选择时动态调整大小，`allowClear`如果使用该属性，它会添加宽度，并且它也可以正确处理占位符文本。

```
$("#some_select_id").select2({
    dropdownAutoWidth : true
}); 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2017-01-20T13:10:34.543

选择2 V4.0.3

```
<select class="smartsearch" name="search" id="search" style="width:100%;"></select> 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-05-02T05:46:19.353

使用 > 4.0 of select2 我正在使用

```
$("select").select2({
  dropdownAutoWidth: true
}); 
```

这些其他人没有工作：

*   dropdownCssClass：'bigdrop'
*   宽度：'100%'
*   宽度：'解决'

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-02-21T12:30:08.363

在脚本中添加方法容器 css，如下所示：

```
$("#your_select_id").select2({
      containerCss : {"display":"block"}
}); 
```

它会将您选择的宽度设置为与您的 div 的宽度相同。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-06-20T05:48:07.283

向您的 select2 函数添加宽度解析选项

```
$(document).ready(function() { 
        $("#myselect").select2({ width: 'resolve' });           
}); 
```

将以下 CSS 添加到您的样式表后

```
.select2-container {
width: 100% !important;
} 
```

它将对问题进行排序

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-20T14:48:47.907

将宽度设置为“解决”对我不起作用。相反，我在我的选择中添加了“width:100%”，并像这样修改了 css：

`.select2-offscreen {position: fixed !important;}`

这是唯一对我有用的解决方案（我的版本是 2.2.1）您的选择将占据所有可用的位置，它比使用更好

`class="input-medium"`

从引导程序，因为选择总是留在容器中，即使在调整窗口大小（响应）之后

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-03-16T14:49:03.043

在你的样式表中添加这个：

```
.select2 {
  width: unset !important;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-10T16:18:47.790

也想在这里添加我的解决方案。这类似于上面拉文杜的回答。

我`width: 'resolve',`在select2中添加了一个属性：

```
 $('#searchFilter').select2({
        width: 'resolve',
    }); 
```

然后我在with 中添加了一个`min-width`属性：`select2-container``!important`

```
.select2-container {
    min-width: 100% !important;
} 
```

在 select 元素上，该`style='100px !important;'`属性需要`!important`起作用：

```
<select class="form-control" style="width: 160px;" id="searchFilter" name="searchfilter[]"> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-01T05:11:23.223

你可以这样试试。这个对我有用

`$("#MISSION_ID").select2();`

在隐藏/显示或 ajax 请求时，我们必须重新初始化 select2 插件

例如：

```
$("#offialNumberArea").show();
$("#eventNameArea").hide();

$('.selectCriteria').change(function(){
    var thisVal = $(this).val();
    if(thisVal == 'sailor'){
        $("#offialNumberArea").show();
        $("#eventNameArea").hide();
    }
    else
    {
        $("#offialNumberArea").hide();
        $("#eventNameArea").show();
        $("#MISSION_ID").select2();
    }
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-17T18:05:06.547

在最近使用**Bootstrap 4**构建的项目中，我尝试了上述所有方法，但没有任何效果。我的方法是使用**jQuery编辑****库** **CSS**以获得**100%**的效果。

 ****```
 // * Select2 4.0.7

$('.select2-multiple').select2({
    // theme: 'bootstrap4', //Doesn't work
    // width:'100%', //Doesn't work
    width: 'resolve'
});

//The Fix
$('.select2-w-100').parent().find('span')
    .removeClass('select2-container')
    .css("width", "100%")
    .css("flex-grow", "1")
    .css("box-sizing", "border-box")
    .css("display", "inline-block")
    .css("margin", "0")
    .css("position", "relative")
    .css("vertical-align", "middle") 
```

工作**演示**

```
$('.select2-multiple').select2({
        // theme: 'bootstrap4', //Doesn't work
        // width:'100%',//Doens't work
        width: 'resolve'
    });
    //Fix the above style width:100%
    $('.select2-w-100').parent().find('span')
        .removeClass('select2-container')
        .css("width", "100%")
        .css("flex-grow", "1")
        .css("box-sizing", "border-box")
        .css("display", "inline-block")
        .css("margin", "0")
        .css("position", "relative")
        .css("vertical-align", "middle")
```

```
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />

<div class="table-responsive">
    <table class="table">
        <thead>
        <tr>
            <th scope="col" class="w-50">#</th>
            <th scope="col" class="w-50">Trade Zones</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>
                1
            </td>
            <td>
                <select class="form-control select2-multiple select2-w-100" name="sellingFees[]"
                        multiple="multiple">
                    <option value="1">One</option>
                    <option value="1">Two</option>
                    <option value="1">Three</option>
                    <option value="1">Okay</option>
                </select>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-25T19:20:54.810

独立于 select2 的更简单的 CSS 解决方案

```
//HTML
<select id="" class="input-xlg">
</select>
<input type="text" id="" name="" value="" class="input-lg" />

//CSS
.input-xxsm {
  width: 40px!important; //for 2 digits 
}

.input-xsm {
  width: 60px!important; //for 4 digits 
}

.input-sm {
  width: 100px!important; //for short options   
}

.input-md {
  width: 160px!important; //for medium long options 
}

.input-lg {
  width: 220px!important; //for long options    
}

.input-xlg {
  width: 300px!important; //for very long options   
}

.input-xxlg {
  width: 100%!important; //100% of parent   
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-22T09:36:13.597

您可以使用的其他方法是在 Select 标签上设置样式宽度。

```
<select id="myselect" style="width: 20%;">
    <option>...</option>
</select> 
```

然后，使用这个

```
$(document).ready(function() { 
    $("#myselect").select2({ width: 'style' }); //This will use style attr of the select element  
}); 
```****

# ruby-on-rails - 这个define_method我做错了什么？

> ID：12683912
> 
> 赞同：0
> 
> 时间：2012-10-02T02:49:37.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, metaprogramming

好的，所以我想为所有类型设置一个named_scope，如下所示

```
class Variety < ActiveRecord::Base
  TYPES = ["holiday", "party", "other", yet_another]

  Variety::TYPES.each do |role|
    define_method
      scope "#{role.to_sym}_applications", where(:type => role)
    end
  end
end 
```

基本上我想要以编程方式定义元的命名范围，这样我就可以做到这一点

```
Variety.holiday_applications
Variety.party_applications
Variety.other_applications
Variety.yet_another_applications 
```

知道我在定义方法上做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:53:47.733

尝试将您的 to_sym 移动到整个方法名称。

```
scope "#{role}_applications".to_sym, where(:type => role) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:56:13.797

```
 Variety::TYPES.each do |role|
   scope "#{role}_applications".to_sym, where(:type => role)
 end 
```

# sql - 在 SQL 中访问链接服务器对象时如何缩短路径

> ID：12683913
> 
> 赞同：2
> 
> 时间：2012-10-02T02:49:38.210
> 
> 标签：sql, alias, linked-server

有没有办法缩短 SQL 中的访问路径？我正在考虑类似于别名的东西，但我不知道如何在谷歌中问这个问题以获得别名的适当应用

这个：

```
 select * from ServerName.DBName.dbo.TableName 
```

至：

```
 declare @RDB as RemoteDatabaseObject
  set @RDB = ServerName.DBName.dbo

  select * from @RDB.TableName 
```

我知道这不起作用，但我想知道是否有办法为具有长路径的对象设置别名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:17:44.797

也许您正在寻找同义词？

[http://msdn.microsoft.com/en-us/library/ms177544.aspx](http://msdn.microsoft.com/en-us/library/ms177544.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T04:46:33.637

别名适用于您在这里想要的东西。

```
SELECT * FROM ServerName.DBName.dbo.TableName AS myAlias 
```

很酷的是，您几乎总是可以在 sql 语句中间使用 AS。 [http://www.w3schools.com/sql/sql_alias.asp](http://www.w3schools.com/sql/sql_alias.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T05:12:38.437

除了使用动态 SQL 之外，我没有想到任何方法可以使这成为可能。

# regex - 将正则表达式与 for 循环一起使用？

> ID：12683918
> 
> 赞同：0
> 
> 时间：2012-10-02T02:50:29.230
> 
> 标签：regex, bash, loops

我可以用正则表达式成功运行一个while循环

```
$ cat while.sh
#!/bin/sh
arr=(a1c a2c a3c b4c)
i=0
while [[ ${arr[i]} =~ a(.)c ]]
do
  echo ${BASH_REMATCH[1]}
  ((i++))
done

$ ./while.sh
1
2
3 
```

for 循环导致此错误

```
$ cat for.sh
#!/bin/sh
arr=(a1c a2c a3c b4c)
for ((i=0; [[ ${arr[i]} =~ a(.)c ]]; i++))
do
  echo ${BASH_REMATCH[1]}
done

$ ./for.sh
./for.sh: line 3: ((: [[ a1c =~ a(.)c ]]: syntax error: operand expected (error
token is "[[ a1c =~ a(.)c ]]") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T03:58:24.810

为了跟进我上面的评论，如果你想或多或少地保持你的格式，这可能会达到你的预期，因为你需要评估的返回值作为 for 循环中的表达式，而不是它的输出.

```
for ((i=0; `[[ ${arr[i]} =~ a(.)c ]] && echo -n 1`; i++)); do
    # do whatever 
done 
```

丑陋，但对我有用，应该为你解释你的错误。反引号对表达式求值，然后输出“1”表示真或不输出任何假。这为您留下了中间循环的有效条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:44:11.197

我不确定您的`for`循环构造在正则表达式中是否合法。双括号用于[算术](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC34)表达式，包括 for 循环。正则表达式匹配不是算术。我认为，如果您`for`出于某种原因真的打算使用，则必须执行以下操作：

```
arr=(a1c a2c a3c b4c)

for val in "${arr[@]}"; do
    if [[ $val =~ a(.)c ]]; then
        echo ${BASH_REMATCH[1]}
    fi
done 
```

# html - 基本href导致这个？

> ID：12683919
> 
> 赞同：0
> 
> 时间：2012-10-02T02:50:40.387
> 
> 标签：html, apache, .htaccess

嗨，我有一个 spip 网站，我需要在我的本地机器上工作。

我复制了所有内容，并且该站点似乎正在与所有数据库一起“工作”。

问题是我认为有一个基本的 href 集。

标题中的样式表是这样链接的：

```
<link rel="stylesheet" type="text/css" href="/css/style.css" /> 
```

并且无法正常工作，因为它要转到本地主机的根目录而不是网站文件夹。

但是，将链接更改为这个（没有正斜杠）效果很好。

```
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

问题是我在网站上有大量的链接都是这样的。有什么地方我可以看看是什么原因造成的？我在任何地方都找不到基本的 href 设置，并且 htaccess 文件似乎没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:54:14.270

以斜杠 ( ) 开头的资源 URL 和链接 href`/`不使用该`<base href="xyz">`值。它们告诉浏览器从主机/域路径的根目录中获取资源。

例如，如果您有：

```
<base href="http://mysite.com/res/">

<!-- style sheet 1 -->
<link rel="stylesheet" type="text/css" href="/css/style.css" />

<!-- style sheet 2 -->
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

`style sheet 1`无论基本 href 值如何，都将尝试从中获取它`http://mysite.com/css/style.css`，因为它的 URL 以`/`指示主机文档根开头。

`style sheet 2`但是将使用基本 href 值并尝试从中获取它`http://mysite.com/res/css/style.css`

**可能的解决方案**

1.  更新您的 HTML/PHP/JSP 等以从您的所有样式表 url、链接、图像等中删除 / 前缀。您应该能够使用像*记事本 ++这样的好编辑器找到并替换它*

2.  丑陋的方式 - 在页面加载后使用一些 JS 修改这些 URL。这有一个问题，用户可能会在 JS 完成执行之前看到错误/不完整的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:45:11.973

以（绝对路径引用）开头的 URL`/`仅在文档​​位于 HTTP 服务器上或它的基本 URL 集（通过`base`标记）以引用绝对 HTTP URL 时才有用。如果您尝试在本地 HTML 文档（不带标签）中使用它们，则使用的基本URL`base`将是一个URL `file://`，因此像计算机文件系统中资源的完整路径名。`/foo/bar``file://foo/bar``foo/bar`

因此，应该可以下载以供本地使用的站点根本不能使用以 . 开头的 URL `/`。

# python - 导入图像适用于 GAE，但不适用于 dev_appserver.py

> ID：12683920
> 
> 赞同：1
> 
> 时间：2012-10-02T02:50:40.813
> 
> 标签：python, image, google-app-engine, python-imaging-library

我将 PIL 用于 GAE 应用程序，并且一直使用直接导入 PIL 模块

```
import Image, ImageDraw, ImageChops, 
```

该应用程序在上传到 GAE 时可以正常运行，但在尝试运行时`dev_appserver.py`拒绝导入模块。

有没有办法强制`dev_appserver.py`识别它们，因为 GAE 显然支持它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:59:49.893

我认为您必须编写`from PIL`才能导入它们。

```
from PIL import Image, ImageDraw, ImageChops 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:34:18.447

您只需要使用此命令安装 PIL。

```
sudo easy_install --find-links http://www.pythonware.com/products/pil/ Imaging 
```

它将需要您的管理员密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:06:32.230

你的 app.yaml 中有这个吗？

```
libraries:
 - name: PIL
   version: "1.1.7" 
```

你是怎么做进口的？这对我有用：

```
from PIL import ImageChops 
```

# web-config - CodeAssassin.ConfigTransform 用于任意命名的配置文件

> ID：12683927
> 
> 赞同：1
> 
> 时间：2012-10-02T02:51:50.040
> 
> 标签：web-config, app-config, web-config-transform

NuGet 包，例如`CodeAssassin.ConfigTransform`转换`web.*.config`或`app.*.config`到`web.*.config.transformed`或`app.*.config.transformed`在 VS 构建时。

但是，如果您有 form 的配置文件`{arbitrary-name}.config`怎么办？

例如，`MyAssembly.dll.config`它的变换规则集`MyAssembly.dll.debug.config`&`MyAssembly.dll.release.config`

`CodeAssassin.ConfigTransform`似乎不适用于这些文件模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:21:48.713

免责声明：在此示例中，我直接修改了 CodeAssassin.ConfigTransform.targets。但是您应该创建一个单独的 .targets 文件并在您的 .csproj 中引用它。

添加 ConnectionString.config（作为示例），然后添加转换。 ![转换文件](../Images/c8052829dba838e3c9d16c8a4080e337.png)

将此添加到 .targets 文件中（您的配置名称只需与正则表达式匹配 -`(?i)^ConnectionString\.`在这种情况下）：

```
<Target Name="TransformAllConnectionStringConfigTransformFiles"
        Condition="'$(WebProjectOutputDir)'!=''"
        BeforeTargets="Compile">

  <ItemGroup>
    <ConnectionStringConfigTransformFile Include="@(None);@(Content)" Condition="'$([System.Text.RegularExpressions.Regex]::IsMatch(%(Filename),&quot;(?i)^ConnectionString\.&quot;))' == true and '%(Extension)'=='.config'" />
  </ItemGroup>

  <TransformXml Source="ConnectionString.config" Destination="%(ConnectionStringConfigTransformFile.Identity).transformed" Transform="@(ConnectionStringConfigTransformFile)"
                Condition="'@(ConnectionStringConfigTransformFile)'!=''" />

  <CreateItem Include="%(ConnectionStringConfigTransformFile.Identity).transformed"
              AdditionalMetadata="CopyToOutputDirectory=Always">
    <Output TaskParameter="Include" ItemName="Content"/>
  </CreateItem>

</Target> 
```

构建，并创建您的 .transformed 文件。

![.transformed 文件](../Images/2de985b4a0bfb347b9301eaeee735cb9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:31:32.020

如果您查看[目标源代码](https://bitbucket.org/jstangroome/configtransform/src/5ff270723dff/ConfigTransform/CodeAssassin.ConfigTransform.targets)，修改它以允许转换任何 .config 文件看起来非常简单。实际上我认为应该可以转换任何 XML 文件。

明天我将分叉该存储库并对此进行试验。

# python - Porter Stemmer 算法没有返回预期的输出？当修改成def

> ID：12683932
> 
> 赞同：1
> 
> 时间：2012-10-02T02:52:28.280
> 
> 标签：python, algorithm, preprocessor, artificial-intelligence, normalization

我正在使用[Python 端口](http://tartarus.org/martin/PorterStemmer/python.txt)[`PorterStemmer`](http://tartarus.org/martin/PorterStemmer/)

> Porter 词干算法（或“Porter stemmer”）是一种从英语单词中去除常见的形态和屈折词尾的过程。它的主要用途是作为通常在设置信息检索系统时完成的术语规范化过程的一部分。

对于以下..

> 您需要做的另一件事是将每个单词简化为词干。例如，单词`sing`, `sings`,`singing` 都有相同的词干，即`sing`。有一种合理接受的方法可以做到这一点，称为波特算法。[你可以从http://tartarus.org/martin/PorterStemmer/](http://tartarus.org/martin/PorterStemmer/)下载一些执行它的东西。

我已经修改了代码..

```
if __name__ == '__main__':
    p = PorterStemmer()
    if len(sys.argv) > 1:
        for f in sys.argv[1:]:
            infile = open(f, 'r')
            while 1:
                output = ''
                word = ''
                line = infile.readline()
                if line == '':
                    break
                for c in line:
                    if c.isalpha():
                        word += c.lower()
                    else:
                        if word:
                            output += p.stem(word, 0,len(word)-1)
                            word = ''
                        output += c.lower()
                print output,
            infile.close() 
```

从预处理字符串中读取`input`而不是文件并返回输出。

```
def algorithm(input):
    p = PorterStemmer()
    while 1:
        output = ''
        word = ''
        if input == '':
            break
        for c in input:
            if c.isalpha():
                word += c.lower()
            else:
                if word:
                    output += p.stem(word, 0,len(word)-1)
                    word = ''
                output += c.lower()
        return output 
```

请注意，如果我将 my放置`return output`在相同的缩进上，因为`while 1:`它变成了`infinite loop`.

**用法（示例）**

```
import PorterStemmer as ps
ps.algorithm("Michael is Singing"); 
```

**输出**

> 迈克尔是

**预期产出**

> 迈克尔在唱歌

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:41:19.773

所以看起来罪魁祸首是它当前没有将输入的最后部分写入`output`（例如，尝试“Michael is Singing stuff” - 它应该正确写入所有内容并省略“stuff”）。可能有一种更优雅的方法来处理这个问题，但您可以尝试的一件事是在循环中添加一个`else`子句。`for`由于问题是最终单词未包含在 中`output`，因此我们可以使用`else`来确保在`for`循环完成后添加最终单词：

```
def algorithm(input):
    print input
    p = PorterStemmer()
    while 1:
        output = ''
        word = ''
        if input == '':
            break
        for c in input:
            if c.isalpha():
                word += c.lower()
            elif word:
                output += p.stem(word, 0,len(word)-1)
                word = ''
                output += c.lower()
        else:
            output += p.stem(word, 0, len(word)-1)  
        print output
        return output 
```

这已经用两个测试用例进行了广泛的测试，所以很明显它是防弹的 :) 那里可能有一些边缘情况，但希望它能让你开始。

# mysql - vb.net mysql 组合框显示表

> ID：12683937
> 
> 赞同：-1
> 
> 时间：2012-10-02T02:52:51.167
> 
> 标签：mysql, database, vb.net, combobox

我是编程新手，我正在开发一个基本的 VB.NET 应用程序，它允许用户从 MySQL 中选择、插入、更新和删除各种数据表。

我遇到的麻烦是，我需要用一个特定数据库中的所有表名填充一个组合框，以便用户可以选择要使用的数据库表。我认为我的代码可以工作，但是当我运行应用程序时我得到的只是一个空白的组合框。

有人可以告诉我我的代码有什么问题吗？

提前非常感谢！

代码：

```
Private Sub TableList_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles TableList.SelectedIndexChanged

    Try

        command = New MySqlCommand
        dt = New DataTable
        adapter = New MySqlDataAdapter

        If (conn.State = ConnectionState.Closed) Then
            setConnection()
        End If

        command.Connection = conn
        command.CommandText = "SHOW TABLES"

        adapter.SelectCommand = command
        reader = command.ExecuteReader

        'adapter.Fill(dt)
        dt.Load(reader)

        TableList.DataSource = dt
        TableList.DisplayMember = "Tables_in_sampledata" 'What is displayed
        TableList.ValueMember = "Tables_in_sampledata" 'The ID of the row

    Catch ex As MySqlException
        MessageBox.Show("Error1: " & ex.Message)
    Finally
        reader.Close()
        conn.Close()
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:55:09.480

而不是`SHOW TABLES`，使用以下查询

```
SELECT DISTINCT TABLE_NAME 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA='YourDatabase'; 
```

# ruby-on-rails - Ruby 类实例变量与类变量

> ID：12683940
> 
> 赞同：1
> 
> 时间：2012-10-02T02:53:23.197
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [类变量和类实例变量之间的区别？](https://stackoverflow.com/questions/3802540/difference-between-class-variables-and-class-instance-variables)

我想了解这里的区别：

```
class Blog
  class << self
    def tags (default_tags)
      @tags ||= default_tags
    end
  end
end 
```

现在，Blog.tags 总是返回最初分配的内容。由于我正在使用 Rails，因此每个请求都是如此。

上面的@tags 是类级别的实例变量，似乎与@@tags 类似，后者是类变量。它们实际上是一样的吗？两者之间是否有任何区别，并决定选择哪一个而不是另一个？

还是我的理解完全错误？

ps：这显然是一个虚构的例子

# c++ - 将 c++ 输出写入 xlsx 文件

> ID：12683941
> 
> 赞同：0
> 
> 时间：2012-10-02T02:53:24.663
> 
> 标签：c++, xlsx

我的 c++ 代码中有一个特定的函数，它比较 2 个 .bmp 文件（一个参考文件一次与另一个目录中的近 100 个文件进行比较），并在终端窗口中运行时正确报告位错误。执行此操作的函数如下：

```
 void getBitErrors(char *filename, char *dirName, int height, int width){

DIR *dir;
struct dirent *ent;
//char *f = "";
    dir = opendir (dirName);
if (dir != NULL) {
    /* print all the files and directories within directory */
    while ((ent = readdir (dir)) != NULL) {
        if(strcmp(ent->d_name,".") && strcmp(ent->d_name,".."))
        {
              char f[255]="";
          strcat(f,dirName);
          strcat(f,ent->d_name);    
              printf ("reading image file %s\n", f);
          cout<<"Bit Error "<<getBitError(filename,f,height,width)<<endl;
        }
       }
       closedir (dir);
 } 
else {
perror ("");
    }
} 
```

我希望在我的代码中有一个函数，将 100 个相应的比较值写入 xlsx/obs 文件。（与 std::cout 在终端窗口中显示输出相反。）我研究了 2 个不同的选项。1) 不言自明的 libXL，它是一个付费图书馆，我真的没有 199 美元来购买这个图书馆。2) SimpleXlsx 有点朦胧。如果有人向我解释如何实现我的结果，我将非常感激。操作系统：Linux Ubuntu 10.10 Maverick。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:56:34.890

我建议您查看`.csv`（逗号分隔值）格式。您可以获得类似结果的电子表格，但复杂性要低得多。

# c++ - C++ 以字符串格式 YYYYMMDD 减去天数

> ID：12683948
> 
> 赞同：0
> 
> 时间：2012-10-02T02:54:18.747
> 
> 标签：c++

我正在努力让一些 C++ 代码进行合作。有没有一种直接的方法来减去两个字符串日期？我想知道他们之间的天数。它们是字符串，`YYYYMMDD`. Boost 库是正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:58:42.593

是的，[Boost Date_Time](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time)当然可以做到这一点，甚至其他人可能会建议“更轻”的替代方案。

这是关于*活着的日子*的示例，它几乎完全解决了您的问题（只需添加第二个日期解析）：

```
/* Short example that calculates the number of days since user was born.
 * Demonstrates comparisons of durations, use of the day_clock,
 * and parsing a date from a string.
 */

#include "boost/date_time/gregorian/gregorian.hpp"
#include <iostream>

int
main() 
{

  using namespace boost::gregorian;
  std::string s;
  std::cout << "Enter birth day YYYY-MM-DD (eg: 2002-02-01): ";
  std::cin >> s;
  try {
    date birthday(from_simple_string(s));
    date today = day_clock::local_day();
    days days_alive = today - birthday;
    days one_day(1);
    if (days_alive == one_day) {
      std::cout << "Born yesterday, very funny" << std::endl;
    }
    else if (days_alive < days(0)) {
      std::cout << "Not born yet, hmm: " << days_alive.days() 
                << " days" <<std::endl;
    }
    else {
      std::cout << "Days alive: " << days_alive.days() << std::endl;
    }

  }
  catch(...) {
    std::cout << "Bad date entered: " << s << std::endl;
  }
  return 0;
} 
```

# android - 如何在三星 Sidekick 4G (Froyo) 上启用调试？

> ID：12683956
> 
> 赞同：1
> 
> 时间：2012-10-02T02:55:07.327
> 
> 标签：android, debugging, adb, android-2.2-froyo

尝试使用开箱即用的三星 Sidekick 4G 进行调试会给出：

> **安卓 AVD 错误**
> 
> 未找到兼容的目标。您想添加新的 Android 虚拟设备吗？

设置没有任何看起来像冰淇淋三明治/果冻豆中可用的“开发人员选项”的东西，可以启用 USB 调试。如何启用调试？

是不是像 Kindle Fire 一样，你必须在其中输入幻数`~/.android/adb_usb.ini`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:55:07.327

在提出这个问题时，我发现了隐藏在所有地方[的手册中的答案。](http://downloadcenter.samsung.com/content/UM/201111/20111103025047970/T839_English_User_Guide.pdf)RTFM 确实：

![安卓开发](../Images/88a30484db0b2636d0a66c1c39174124.png)

结果是相关设置位于**Applications** > **Development**中。

# javascript - 变量没有传递给函数

> ID：12683962
> 
> 赞同：0
> 
> 时间：2012-10-02T02:55:49.307
> 
> 标签：javascript, function, variables

我正在尝试编写一些 JavaScript，我可以将当​​前页面 URL 的路径传递给另一个函数；特别想将其作为一个值添加到 Google Analytics 的自定义变量中。但是，由于我不懂 JavaScript，我认为最好看看我是否可以将变量传递给一个简单的警报。唉，我不能。我已经检查了这个网站上的几个帖子，但无法让它工作。我检查过的一些线程是：

[需要将变量传递给函数](https://stackoverflow.com/questions/3214413/need-to-pass-variable-to-function)
[如何将这个变量传递给这个函数？](https://stackoverflow.com/questions/10434440/how-to-pass-this-variable-to-this-function)
[将变量传递给外部javascript？](https://stackoverflow.com/questions/10822388/pass-variable-to-external-javascript)

我还尝试过 Google 和一些 JavaScript 教程，并尝试使用单引号、双引号、括号等……没有任何效果。有人可以帮忙吗？谢谢你。

```
 <script type="text/javascript">
            $(document).ready(function() {
                var pdpURL = window.location.pathname;
            });
            function popup() {
                alert('pdpURL');
            }
            </script> 
```

弹出窗口出现，但它只是在其中显示 pdpURL 而不是 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T02:57:56.000

几个问题：

*   你没有打电话`popup`

*   `pdpURL`对于处理程序来说是本地的，但是`popup`是全局的

*   给`alert`定一个字符串，而不是变量引用

* * *

```
$(document).ready(function() {
    var pdpURL = window.location.pathname;

    function popup() {
        alert(pdpURL);
    }

    popup();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:00:16.493

首先，当你调用它时，你不需要在变量名周围加上引号。其次，该变量的作用域是`$(document).ready()`函数，因此您的其他函数将无法访问该变量。变量必须是全局的，您才能执行此操作，您可以通过在函数之外声明变量来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T02:59:04.937

试试这个：

```
 <script type="text/javascript">
            function popup(path) {
                alert(path);
            }
            $(document).ready(function() {
                var pdpURL = window.location.pathname;
                popup(pdpURL);
            });
            </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T02:57:00.773

您需要替换单引号。尝试`alert(pdpURL)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T03:03:06.980

当然它是行不通的。

如果你想象函数和它们的变量，比如盒子，那么你在一个盒子里有一个变量，另一个盒子看不到

```
$(document).ready(function() {
  var pdpURL = window.location.pathname;
});
function popup() {
  alert('pdpURL');
} 
```

你有两个选择。

*   将 popURL 移动到全局级别
*   在匿名函数中移动弹出窗口

**示例 1**

```
var pdpURL;
+------------------------------------------
|  // This is box 1, an anonymous function|
|  // can see pdpURL                      |
+------------------------------------------

+------------------------------------------
|  // This is box 2 called popup          |
|  // Can't see anything inside box 1     |
|  // But can also see pdpURL             |
+------------------------------------------ 
```

**示例 2**

```
+------------------------------------------
|  // This is box 1, an anonymous function|
|  var pdpURL                             |
|  +----------------------------------+   |
|  |  // This is box 2 called popup   |   |
|  |  // Can see inside box 1         |   |
|  +----------------------------------+   |      
|                                         |
+------------------------------------------ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T21:42:54.020

您需要考虑 $(document).ready(); 只有在整个页面完成加载时才会触发。

这意味着这之后的代码实际上可能在页面完成加载之前执行。

在查看执行顺序时，您应该始终考虑“事件”顺序。

# c - 将 2 种类型的数据输入到链表中

> ID：12683963
> 
> 赞同：0
> 
> 时间：2012-10-02T02:56:07.467
> 
> 标签：c, linked-list

我正在尝试将两种类型的数据放入链接列表中。例如：

```
rotate 0
move 100
rotate 270
move 100
pattern #
rotate 0
draw 50
rotate -30
draw 100
rotate -90 
```

它首先是一个字符串`rotate`，然后是一个整数 `0`。

我这样声明：

```
typedef struct NODE
{
    char command[6];
    int number;
    struct NODE *next;
} NODE; 
```

初始化字符串和变量：

```
char command1[6];
int num = 0; 
```

然后输入到列表中，有一个功能`addnode`：

```
void addnode(NODE *llist, char command1[6], int num)
{
    while (llist->next != NULL)
        llist = llist->next;

    llist->next = (NODE *)malloc(sizeof( NODE));
    llist->next->command[6] = command1[6];
    llist->next->number = num;
    llist->next->next = NULL;
} 
```

并输入：

```
scanf("%s, %d"&command1, &num);
append_node(llist,command1, num);` 
```

我收到错误：

`scanf`在线：`invalid operands to binary & (have ‘char *’ and ‘char *’)`

在`addnode`函数结束时：`expected declaration or statement at end of input`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:29:06.813

scanf 应该是

```
scanf("%s %d", command1, &num); 
```

数组的名称`command1`，当不使用下标运算符时给出第一个元素的地址。

你的 addNode 应该是这样的：

```
void addnode(NODE *root, char command1[6], int num)
{
    NODE *llist = root;
    do
    {
        if (llist == NULL)
        {
            llist = (NODE *)malloc(sizeof(NODE));
            ...error check allocation...
            llist->command = command1;
            llist->number = num;
            llist->next = NULL;
            break;
        }
        llist = llist->next;
    }
    while (1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:03:43.697

您实际上不会在这里进行任何“搜索”，而只是对每个命令进行字符串比较。首先，您只需要创建一个包含从文件中读取的“行”的列表。当您逐行遍历文件时，在列表上创建一个新节点。

然后，您可以通过使用节点并进行字符串比较来处理列表，以查看您需要调用哪个命令函数。

听起来您的老师要求您使用链接列表，但这不是必需的。您可以执行函数调用，而无需将行实际存储在容器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:34:48.927

一些观察：

1.要初始化一个 char 数组，使用`memcpy(array, 0, sizeof(array))`.

2.要将一个字符串复制到另一个字符串，请使用`strcpy/strncpy`. `=`运算符不会在 c 中工作。

3.你的scanf语句是错误的，应该是`scanf("%s, %d",command1, &num);`。

# android - Android — 如何跟踪进程的带宽使用情况？

> ID：12683967
> 
> 赞同：7
> 
> 时间：2012-10-02T02:56:23.470
> 
> 标签：android

我可以跟踪 Android 设备的整体和每个 uid（应用程序）带宽使用情况`android.net.TrafficStats`。然而，一个 uid 可以执行多个二进制文件来调用多个进程。

我想知道是否有任何方法或方式来获取每个进程的带宽使用情况，以便我可以追溯启动到 Internet 连接的二进制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:14:10.663

如果您对您的应用程序完成的网络流量感兴趣，您可以尝试[AT&T ARO](https://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)，您需要在 AT&T 注册（免费）但该工具非常好，它仅适用于您的应用程序完成的网络，您实际上可以看到发送和接收的数据包，并获得有关您可以改善网络使用情况的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:14:13.887

您可能想看看[nethogs](http://www.binarytides.com/monitor-bandwidth-used-by-each-process-on-ubuntu-linux-with-nethogs/)及其适用于 Linux 的[源代码](http://nethogs.sourceforge.net/)。作为构建在 Linux 内核上的 Android，我相信您可以以类似的方式实现它。

# jquery - xml 解析 jquery - 如何从具有不同属性的重复 XML 标记中提取单个值

> ID：12683971
> 
> 赞同：0
> 
> 时间：2012-10-02T02:56:38.527
> 
> 标签：jquery, xml, parsing

所以我试图从我的 XML 中提取一个值，整个代码（几乎但是一般的想法）在 jsfiddle 上[http://jsfiddle.net/TQzkj/4/](http://jsfiddle.net/TQzkj/4/)

我要做的就是从顶部的 XML 中提取 Option Value=1 的值

```
 xml = '<Set>    <Question>        
        <QuestionId>278</QuestionId>

        <Option Value='1'>Tops</Option>
        <Option Value='2'>Skirts</Option>
        <Option Value='3'>Shoes</Option>        </Question>    <Points>0</Points>      
        <BarHide>8</BarHide></Set>'; 
```

我正在使用以下代码

[代码]

```
$(xml).find( "Question" ).each(
function(){
    var item = $(this), 
    id =  item.find('QuestionId').text();

    if(id==="278"){
        var option = item.find('Option');
        var itemid = option.attr('Value');

        if(itemid === "1"){
            $("#button1").attr("value", option[0]); //this is the line that is wrong and needs fixing
        }
    }
    //itemid =  item.attr('id');
} 
```

);

[/代码]

当我调试 value 选项时，我看到了 3 个元素，并且在 textContext 中看到了我需要的文本，但我不知道如何提取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:59:42.983

它不是一个数组，jQuery`find()`在一个对象中返回一组元素，所以只需：

```
$("#button1").val(option.text()); 
```

[**小提琴**](http://jsfiddle.net/TQzkj/5/)

# c - 读取文件行，将每一行放入一个数组中，然后打印

> ID：12683974
> 
> 赞同：2
> 
> 时间：2012-10-02T02:57:33.473
> 
> 标签：c, string, io

我刚刚想出了如何使用整数来做到这一点，所以决定尝试使用字符串并卡住了。

这是我的文件“kw”中的内容：

```
keyword0
keyword1
keyword2
keyword3 
```

使用此当前代码，我收到“错误：格式'％s'需要'char *'类型的参数，但参数3具有'char **'类型

```
#include <stdio.h>

int main () {
    FILE *pFile;

    pFile = fopen("kw", "r");

    if (pFile != NULL) {

        char *a[3];
        int i;

        for(i = 0; i <= 3; i++) {
            fscanf(pFile, "%s", &a[i]);
            printf("%s\n", a[i]);
        }
    }
    return 0;
} 
```

有人可以在这里指出我正确的方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:05:40.637

这段代码有几个问题：

*   您正在遍历数组的四个元素`a`，而数组只有三个元素。
*   您没有为正在阅读的字符串分配空间`scanf`。
*   读取字符串时不传递地址的地址。

要解决第一个问题，请更改`<=`为`!=`or `<`，如下所示：

```
for(i = 0; i != 3; i++) 
```

要解决第二个和第三个问题，请使用`malloc`：

```
a[i] = malloc(21*sizeof(char));
fscanf(pFile, "%20s", a[i]); 
```

完成分配的数据后，不要忘记释放字符串：

```
for(i = 0; i != 3; i++) {
    free(a[i]);
} 
```

# javascript - 有没有办法监听 div 溢出事件？

> ID：12683975
> 
> 赞同：3
> 
> 时间：2012-10-02T02:57:53.577
> 
> 标签：javascript, dom, overflow

> **可能重复：**
> [如何检测 div 元素中的溢出？](https://stackoverflow.com/questions/7138772/how-to-detect-overflow-in-div-element)

是否有跨浏览器的方式来收听 div 溢出？

就像是：`$('#myDiv').bind("divOverflow", function(){alert('div overflowed!')})`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:00:00.463

您可以通过将 scrollHeight 与 clientHeight 进行比较来做到这一点。

```
<script type="text/javascript">
function GetContainerSize ()
{
    var container = document.getElementById ("tempDiv");
    var message = "The width of the contents with padding: " + container.scrollWidth + "px.\n";
    message += "The height of the contents with padding: " + container.scrollHeight + "px.\n";

    alert (message);
}
</script> 
```

有关更多信息：[如何检测 div 元素中的溢出？](https://stackoverflow.com/questions/7138772/how-to-detect-overflow-in-div-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:00:06.357

您可以设置一个间隔并检查元素的`scrollHeight > offsetHeight`. 对此没有内置事件。

# c# - double.parse 将两个零小数转换为一个小数

> ID：12683980
> 
> 赞同：1
> 
> 时间：2012-10-02T02:58:48.387
> 
> 标签：c#

我有一个字符串 10.00，我想将它转换为双 10.00。

我用 ：

```
string str = "10.00";
double db = double.Parse(str); 
```

我得到的结果是 10.0 而不是 10.00。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:10:59.707

和在数值上尊重当地文化设置`Parse`；`TryParse`您可以通过指定一个`CultureInfo`对象来更改它。例如，在德国解析`2.999`成双精度：`2999`

```
Console.WriteLine (double.Parse ("2.999"));   // 2999 (In Germany) 
```

这是因为在德国，句点表示千位分隔符而不是小数点。指定不变的文化解决了这个问题：

```
double x = double.Parse ("2.999", CultureInfo.InvariantCulture); 
```

调用时相同`ToString()`：

```
string x = 2.9999.ToString (CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:02:40.040

双精度不是字符串。如果要将双精度数显示为字符串，可以将其格式化为有两个小数点。

例如：

```
string str = "10.00";
double db = double.Parse(str);
String.Format("{0:0.00}", db); // will show 10.00 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T03:03:50.067

问题不是很清楚，但是如果您指的是将 double 更改回具有 2 个小数位精度的字符串，您可以使用：

```
string str = "10.00"
double db = double.parse(str);
string convertedBack = db.ToString("0.00"); 
```

# sorting - 在没有数组的情况下与 sort(arrayList) 做同样的事情？？？进行中

> ID：12683985
> 
> 赞同：0
> 
> 时间：2012-10-02T03:00:04.497
> 
> 标签：sorting, processing

有没有办法对不在数组中的整数进行排序？

我知道您可以将`sort(arrayList)`类型想法与数组一起使用，但是示例...

如果我有单独的变量，可以完成类似的任务吗？例如，如果我有三个数字，我可以对它们进行排序，以便它们从大到小打印吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:03:10.193

如果您的 ArrayList 包含对象，则这些对象的类型可以实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)，因此您可以使用[Collections](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)的排序方法。如果您愿意，您可以将 ArrayList 转换为数组并以这种方式对其进行排序，但它看起来不像您想要的那样。下面是一个使用这两种方法的简单示例：

```
void setup(){
  int count = 100,now;
  stroke(192,0,0);strokeWeight(count/width);
  //make up some data
  ArrayList<Pair> p = new ArrayList<Pair>();
  for(int i = 0 ; i < count ; i++) {
    Pair pair = new Pair(i,random(10,100));
    p.add(pair);
    float x = map(i,0,count,i,width);
    float y = map(pair.distance,10,100,0,50);
    line(x,50,x,50-y);
  }

  now = millis();

  //Sort typed ArrayList by converting to array first
  println("sort typed array: \n");
  Pair[] s = new Pair[p.size()];
  p.toArray(s);
  Arrays.sort(s);

  println("took " + (millis()-now) + " ms");

  now = millis();

  //Sort using Collections
  println("\n\nsorting typed array list: \n" );
  Collections.sort(p);

  println("took " + (millis()-now) + " ms");

  stroke(0,192,0);
  for(int i = 0 ; i < count ; i++) {
    Pair pair = p.get(i);
    float x = map(i,0,count,i,width);
    float y = map(pair.distance,10,100,0,50);
    line(x,100,x,100-y);
  }

}
class Pair implements Comparable<Pair>{
  public int id;
  public float distance;
  Pair(int i, float d){
    id = i;
    distance = d;
  }
  int compareTo(Pair p){
    if     (p.distance > this.distance) return  1;
    else if(p.distance < this.distance) return -1;
    else return 0;
  }
  String toString(){    return id+":"+distance;    }
} 
```

# javascript - 自动建议下拉列表

> ID：12683990
> 
> 赞同：0
> 
> 时间：2012-10-02T03:00:19.163
> 
> 标签：javascript, ajax, jquery, autocomplete, autosuggest

是否有允许我执行以下操作的 JavaScript 库：

*   对数据库执行 Ajax 调用以获取结果的自动建议下拉列表。

*   用户只能选择从 Ajax 调用返回的值。

*   我想格式化数据结果，以便显示多列。

前任。用户输入地址，它会返回 address_id、街道（10 Lincoln Ave）、城市、州和邮政编码

我想做一个自动建议文本框，但这并不限制用户输入不是从 Ajax 调用返回的值。

谢谢你，-Tesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:06:28.520

我建议你看看 jQueryUI 自动完成。它执行前 2 个，但您也可以对其进行自定义以获得第 3 个要求。

# excel - 从多个相同的键中提取excel一个值

> ID：12683992
> 
> 赞同：1
> 
> 时间：2012-10-02T03:00:28.040
> 
> 标签：excel, excel-formula

这是我的数组

```
Number  LastVisitSite   bonus homeclub

1000001 Beta             589   Delta

1000001 Delta            324   Delta

1000001 Alpha            456   Delta

1000002 Tango            78    Delta

1000002 Delta            98    Delta

1000003 Delta            745   Delta

1000004 Delta            142   Delta 

1000004 Emerald          50    Delta 
```

* * *

我将使用下表创建 Excel 工作表

```
Number   Bonus

1000001

1000002

1000003

1000004 
```

我将在 Bonus 文件中创建一个 Excel 公式

如果上次访问站点 = 家庭俱乐部，则获得奖励积分，否则放入

所以结果应该如下：

```
Number   Bonus

1000001  324

1000002  98 

1000003  745

1000004  142 
```

我尝试使用查找，但它没有得到我想要的结果。

请指教。最好的问候， 洪耀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:56:40.847

你可以尝试这样的事情：

```
=SUMPRODUCT(
      --($A$2:$A$9=F2),
      --($B$2:$B$9=VLOOKUP(F2,$A$2:$D$9,4,FALSE)),
     $C$2:$C$9) 
```

基本上它所做的是在主表中找到 ID 等于当前行并且`LastVisitSite`等于 `homeclub`该数字的行（匹配将返回 1，未命中 0）。然后它将该数组乘以`bonus`列，从而得出每次`LastVisitSite`等于的奖金总和`homeclub`（请注意，如果有多个主场比赛，这将重复计算）。

![在此处输入图像描述](../Images/4494f930dc488bca4405cfaffd6deb80.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T04:13:30.830

使用该`SUMPRODUCT()`功能，您可以进行多次比较（数字是您想要的，Lastsitevisit=homeclub）。

```
=SUMPRODUCT(--($B$2:$B$9=$D$2:$D$9),--($A$2:$A$9=A13),$C$2:$C$9) 
```

（假设您的数据范围在 A1:D9 中，结果范围在 A12:B16 中，因此对 A13 的引用 = 1000001

这是一个很好的`SUMPRODUCT()`技巧参考： [http ://chandoo.org/wp/2009/11/10/excel-sumproduct-formula/](http://chandoo.org/wp/2009/11/10/excel-sumproduct-formula/)

# ios - 将字符串附加到 txt-iOS

> ID：12683996
> 
> 赞同：0
> 
> 时间：2012-10-02T03:01:23.470
> 
> 标签：ios

如下所示的代码，我正在尝试保存所有字符串。但是，即使它显示 txt created 但没有 txt 创建。参考这个问题[Adding string on existing txt file -iOS](https://stackoverflow.com/questions/12682468/adding-string-on-existing-txt-file-ios)

```
 -(void)saveData:(NSString*)data
    {
        NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentDirectory=[paths objectAtIndex:0];
            NSString *fileName=[NSString stringWithFormat:@"%@/%d.txt",documentDirectory,1];
            NSString *content=data;
            NSFileHandle *fileHandler= [NSFileHandle fileHandleForWritingAtPath:fileName];
            [fileHandler seekToEndOfFile];
            [fileHandler writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
            [fileHandler closeFile];
            NSLog(@"%@",fileName);
    } 
```