# StackOverflow 问答 16155000-16155999

# css - 无论内容如何， 如何使列具有相同的高度，并在这些列中垂直对齐按钮？

> ID：16155003
> 
> 赞同：1
> 
> 时间：2013-04-22T19:18:33.467
> 
> 标签：css, layout, height

我正在尝试制作一个列布局，每个都有内容，我希望它们的高度相同，但我无法让它工作。

其中一列比其他列高，它延伸整行，但不是其他列，也垂直居中内容。span4 上的 height 100% 没有帮助。

```
<div class="row">
    <div class="span4">
        <h3>Header 1</h3>
        <p>...</p>
        <div style="text-align: center">
            <a class="btn btn-success" href="">Some Button</a>
        </div>
    </div>
    <div class="span4">...</div>
    <div class="span4">...</div>
</div> 
```

简化的CSS：

```
.row{width:100%;}
.span4{
    float:right;
    width:32%;
    margin-right:1%;
    border-radius:6px;
} 
```

现存的： ![现存的](https://i.stack.imgur.com/PYL4m.png)

期望： ![期望的](https://i.stack.imgur.com/ey6q1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:14:44.457

如果您想完美地重新创建该布局，Flexbox 可以做到。

[http://codepen.io/cimmanon/pen/enurd](http://codepen.io/cimmanon/pen/enurd)

```
.row {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  /* fix for Firefox */
  width: 100%;
}

.block {
  min-width: 30%;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 30%;
  -ms-flex: 1 30%;
  flex: 1 30%;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: justify;
  -moz-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}

.block h3 {
  margin-top: 0;
  margin-bottom: 1em;
}

.block div {
  text-align: center;
  margin-top: 1em;
}

/* pretty it up! */
body {
  background: #ccccff;
}

.block {
  background: white;
  margin: 0 .5em;
  padding: 1em;
  border: 1px solid;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  -moz-border-radius: 1em;
  -webkit-border-radius: 1em;
  border-radius: 1em;
}
```

```
 <div class="row">
<div class="block">
    <h3>Header 1</h3>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec. Vestibulum quam dolor, feugiat in posuere a, posuere imperdiet tellus.</p>
    <div><a class="btn btn-success" href="#">Some Button</a></div>
</div>

<div class="block">
    <h3>Header 1</h3>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec. Vestibulum quam dolor, feugiat in posuere a, posuere imperdiet tellus. Mauris sed ligula vitae urna consequat aliquet. Curabitur pellentesque consectetur ornare. Pellentesque vel euismod odio. Nulla tempus pharetra nulla. In justo dolor, sollicitudin nec commodo sit amet, adipiscing eget lectus.</p>

    <div><a class="btn btn-success" href="#">Some Button</a></div>
</div>

<div class="block">
    <h3>Header 1</h3>

    <p>Mauris sed ligula vitae urna consequat aliquet. Curabitur pellentesque consectetur ornare. Pellentesque vel euismod odio. Nulla tempus pharetra nulla. In justo dolor, sollicitudin nec commodo sit amet, adipiscing eget lectus.</p>

    <div><a class="btn btn-success" href="#">Some Button</a></div>
</div>
</div>
```

这适用于 Firefox、Safari、Chrome、Opera 和 IE10。如果您需要比这更广泛的支持，那么使用`display: table/table-row/table-cell`是您的下一个最佳选择。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:22:09.583

你可以做等高列技术：

```
.row {
    overflow:hidden;
}
.span4 {
    padding-bottom:32767px;
    margin-bottom:-32767px;
} 
```

要实现垂直居中的文本内容确实很棘手。我会尝试使用

```
.row {
    display:table;
}
.span4 {
    display:table-cell;
    vertical-align:middle;
} 
```

但你必须进一步调整它，我不确定它是否真的会奏效，哪些浏览器确实支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:38:40.743

至于垂直对齐内容，请查看这篇文章：

[http://phrogz.net/css/vertical-align/](http://phrogz.net/css/vertical-align/)

您将父容器设置为位置：相对，然后将您的内容设置为位置：绝对；最高：50%；高度：10em；边距顶部：-5em；

基本上上边距是 - 容器高度的 1/2。

# java - 计算我的程序的大 O 复杂度

> ID：16155009
> 
> 赞同：0
> 
> 时间：2013-04-22T19:18:57.353
> 
> 标签：java, big-o

我的程序打印包含双字母的单词的所有排列例如在单词'Helloo'中

结果将是：[heloo, helo, hello, hello]

```
private List<String> doubleLetterPermute(String start, String ending, List<String> possibleWords) {
    String prev = "";
    for (int i = 0; i < ending.length(); i++) {
        String letter = String.valueOf(ending.charAt(i));
        // its a double letter
        if (letter.equals(prev)) {
            doubleLetterPermute(start + ending.substring(0, i), ending.substring(i + 1), possibleWords);
            doubleLetterPermute(start + ending.substring(0, i + 1), ending.substring(i + 1), possibleWords);
        }
        prev = letter;
    }
    possibleWords.add(start + ending);
    return possibleWords;
} 
```

我不确定当递归函数出现时如何计算复杂度。它循环 n 次，其中 n 是单词中的字符数，O(n)，但我在每次出现双字母时拆分单词所以这在大 O 符号中是如何显示的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:29:42.347

为了计算您的复杂性，您需要查看最坏和最好的情况。

充其量，你会得到一个长度为 N 且没有双字母的单词，比如“ **abcde** ”。您的复杂性将是 O(n)，因为您只有一个大小为 N 的循环。

在最坏的情况下，你会有一个长度为 N 的单词和同一个字母，比如说“ **aaaa** ”。在这种情况下，您有一个大小为 N 的循环，其中包含 2 个大小为 (N - i) 的循环。因此，复杂度将是 O(2(ni)*n) 或 O(n^2)。

# emacs - 如何一起使用 dart-mode 和 d-mode （为什么我们不能相处？）

> ID：16155013
> 
> 赞同：3
> 
> 时间：2013-04-22T19:19:16.500
> 
> 标签：emacs, elisp, dart

我正在尝试在 emacs 24 中使用 dart-mode 和 d-mode。如果我单独使用任何一种模式，一切都很好。如果我分别在每种类型的文件上使用这两种模式，我在尝试缩进 D 代码时会出错。

以下是在 init 需要以下内容后出现的错误：

```
(require 'd-mode)
(require 'dart-mode) 
```

然后我在第一个加载的 D 文件上打开 d-mode。

```
Error during redisplay: (jit-lock-function 1) signaled (invalid-function (setq ad-return-value (with-no-warnings (funcall ad--addoit-function)))) 
```

再次 - 如果我*不需要 'dart-mode*一切正常。

d-mode 来自[https://raw.github.com/Emacs-D-Mode-Maintainers/Emacs-D-Mode/master/d-mode.el，dart](https://raw.github.com/Emacs-D-Mode-Maintainers/Emacs-D-Mode/master/d-mode.el)模式来自[https://github.com /nex3/dart-mode/blob/master/dart-mode.el](https://github.com/nex3/dart-mode/blob/master/dart-mode.el)

这是否意味着两种模式之间存在一些不兼容，或其他一些设置问题？我试过 --no-site-file 但仍然没有运气。

* * *

换一种说法，鉴于以下情况，如果我在其中调出一个 D 文件和*Mx d-mode*，我就会遇到问题：

```
user@user-thinkpad:/tmp/breakEmacs$ ls
dart-mode.el  d-mode.el  emacs_test.el
user@user-thinkpad:/tmp/breakEmacs$ cat emacs_test.el
(add-to-list 'load-path "/tmp/breakEmacs")
(require 'd-mode)
(require 'dart-mode)
user@user-thinkpad:/tmp/breakEmacs$ emacs-snapshot --no-init-file --no-site-file -l /tmp/breakEmacs/emacs_test.el 
```

我希望这种方式成功地消除了我的任何 .emacs 内容的潜在问题？

* * *

根据@wvxvw 的建议，我尝试通过添加*(setq debug-on-error t)*进行调试，它提供了如下所示的调用堆栈。我说*喜欢*是因为有些行很大并且看起来像二进制编码，所以我省略了一些文本。但是，希望这里的某些东西有助于指出罪魁祸首？

```
Debugger entered--Lisp error: (invalid-function (setq ad-return-value (with-no-warnings (funcall ad--addoit-function))))
  (setq ad-return-value (with-no-warnings (funcall ad--addoit-function)))()
  ad-Advice-c-parse-state(#[nil ...] 5])
  apply(ad-Advice-c-parse-state #[nil ...] nil)
  c-parse-state()
  #[nil  ...] 8 ("/usr/share/emacs/24.3.50/lisp/progmodes/cc-engine.elc" . 156151)]()
  ad-Advice-c-guess-basic-syntax(#[nil ...] 8 ("/usr/share/emacs/24.3.50/lisp/progmodes/cc-engine.elc" . 156151)])
  apply(ad-Advice-c-guess-basic-syntax #[nil ...] 8 ("/usr/share/emacs/24.3.50/lisp/progmodes/cc-engine.elc" . 156151)] nil)
  c-guess-basic-syntax()
  c-indent-line()
  c-indent-command(nil)
  c-indent-line-or-region(nil nil)
  call-interactively(c-indent-line-or-region nil nil)
  command-execute(c-indent-line-or-region) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:36:30.150

问题在于飞镖模式。它使用如下代码：

```
(if (not (c-major-mode-is 'dart-mode))
    (ad-do-it) 
```

而它应该是

```
(if (not (c-major-mode-is 'dart-mode))
    ad-do-it 
```

请注意删除 . 周围的括号`ad-do-it`。

# vim - 将单词表添加到 vim 拼写

> ID：16155016
> 
> 赞同：2
> 
> 时间：2013-04-22T19:19:21.820
> 
> 标签：vim, spell-checking

我有一个很长的（化学）单词列表，我想添加到 vim 拼写检查文件中。为此，看起来最好的方法是获取英语词典（我使用 libreoffice 中的 .oxt 获取 en_US.dic 和 en_US.aff 文件），然后执行（在包含这三个文件的目录中）：

```
:mkspell ./chemdic chemistry.dic en_US 
```

但无论我如何尝试，似乎总是会收到有关文件中无效区域的错误。有时它在第一个参数中，有时在第二个参数中，如果我使用 --ascii 选项，它会给出关于输出文件的 E755（这对我来说没有意义）。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:26:04.410

您可以创建一个本地拼写文件，其中包含您需要的所有单词，每行一个。让我们称之为这个文件`lspell`。然后，您可以将此文件称为本地拼写存储库。例如，如果您正在检查文件中的拼写`myfile`，您可以发出命令：`spell +lspell myfile`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T22:50:23.910

`cs_CZ`从hunspell 词典生成词典时，我遇到了同样的问题。我设法用以下方法解决了它：

```
# go to directory with cs_CZ.aff and cs_CZ.dic files
cd /usr/share/hunspell
# convert into cs.spl
env LANG=cs_CZ.utf-8 vim -u NONE -e -c "mkspell! $HOME/.vim/spell/cs cs_CZ" -c q 
```

我认为这可以针对自定义单词表进行调整，但我没有尝试过......

# javascript - 如何在 JQuery 中更改按钮文本

> ID：16155018
> 
> 赞同：13
> 
> 时间：2013-04-22T19:19:34.977
> 
> 标签：javascript, jquery, jquery-ui, button, jquery-autocomplete

到目前为止，我有这个工作代码：

小提琴：http: [//jsfiddle.net/r4emt/12/](http://jsfiddle.net/r4emt/12/)

现在，在您进入 JQuery UI 自动完成之前，按钮显示为“Hello”。您可以在 JQuery UI 自动完成中键入“item”，您会注意到按钮现在显示“World”。单击“世界”按钮将项目放入列表中。如果您再次键入项目，您可以选择一个并单击列表中已有项目上的替换按钮。然而，一旦你这样做了，按钮仍然显示“世界”，但它应该说“你好”，因为输入字段中没有任何内容。如果您单击输入字段，然后单击删除或返回箭头，它会变回“你好”，但没有任何内容可以删除或转到左侧。我认为这与这部分代码有关：

```
$('#inputWrapper').on('keyup', '#tags', function() {
    if($(this).val() == '') {
        $('button.addButton').text('Hello');
    } else {
        $('button.addButton').text('World');
    }
}); 
```

特别是'keyup'部分。所以我的问题是如何解决这个问题，以便每当输入框为空时，按钮总是显示“hello”，当字段中有输入时，按钮显示“world”？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T19:49:14.193

[这](http://jsfiddle.net/r4emt/36/)是工作小提琴。所做的更改是：

```
$('#tags').keyup( function() {
    if($(this).val() == '') {
        $('button.addButton').text('Hello');
    } else {
        $('button.addButton').text('World');        
    }
}); 
```

并在您的按钮末尾单击：

```
$('#tags').val('');
$('#tags').keyup(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-14T14:56:59.823

我知道这是一个很长的死线程，但我需要添加它，因为我刚刚花了 2 天时间来追踪内存泄漏（由我使用此页面中的代码引起的）。

**重要提示：不要在按钮元素上使用 jQuerys text()！**

该函数在 DOM 中创建了一些无法通过 empty() 删除的内容。如果您在很长一段时间内多次调用该函数，大量垃圾将被放入您的 DOM 中，从而导致内容中断。

请参阅[jQuery API 文档。](https://api.jquery.com/text/)

（无法找到文档中提到的确切位置，但它就在某个地方，我现在必须为我的火车奔跑）......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:25:59.750

您不能在他们单击后将文本设置回 Hello 吗？将此添加到按钮单击功能的底部：

```
$(this).text('Hello'); 
```

[http://jsfiddle.net/r4emt/13/](http://jsfiddle.net/r4emt/13/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T19:28:01.487

[jsFiddle 工作演示](http://jsfiddle.net/mohammadAdil/r4emt/17/)

```
 $('#inputWrapper').on('keyup', '#tags', function() {
        if($(this).val() == "") {
            $('button.addButton').html('Hello1');
        } else {
            $('button.addButton').html('World');
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T19:26:34.990

把条件像这样

`if($.trim($(this).val()) == '')`

删除不需要的空格。此外，您应该在单击事件的处理程序中将按钮文本更改为“Hello”

在 click 函数的末尾添加： `$(this).text('Hello');`

这是代码：http: [//jsfiddle.net/r4emt/34/](http://jsfiddle.net/r4emt/34/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T20:09:06.947

这个函数只在第一次工作，因为在它执行之后，事件监听器总是会在 keyup 之后被评估，导致输入框总是有一个值。您会注意到，一旦您单击该按钮，如果您键入内容并按退格键擦除它，它将变回 Hello。

为了达到您想要的结果，当您在清除输入框后单击按钮上的提交时，您也可以更改那里的文本。

见：http: [//jsfiddle.net/r4emt/37/](http://jsfiddle.net/r4emt/37/)

我刚刚补充说：

```
//refreshes button name
$(this).text('Hello'); 
```

到按钮点击功能结束。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-10T08:44:42.050

使用“文本”功能

```
 $("#inputWrapper").click(function () {
        $(this).text(function(i, v){
           return v === 'Hello' ? 'World' : 'Hello'
        }) 
```

# javascript - AngularJS延迟错误：参数'fn'不是函数，得到对象

> ID：16155022
> 
> 赞同：18
> 
> 时间：2013-04-22T19:19:58.383
> 
> 标签：javascript, angularjs, runtime-error, promise, deferred

我试图让我的应用程序在更改路线之前收集数据，如 John Lindquist 的许多视频所示：[http ://www.youtube.com/watch?v=P6KITGRQujQ&list=UUKW92i7iQFuNILqQOUOCrFw&index=4&feature=plcp](http://www.youtube.com/watch?v=P6KITGRQujQ&list=UUKW92i7iQFuNILqQOUOCrFw&index=4&feature=plcp)

我已经把它全部连接起来了，但是当延迟对象解决的时候，我得到了错误：

```
Error: Argument 'fn' is not a function, got Object
at assertArg (http://localhost:9000/components/angular/angular.js:1019:11)
at assertArgFn (http://localhost:9000/components/angular/angular.js:1029:3)
at annotate (http://localhost:9000/components/angular/angular.js:2350:5)
at invoke (http://localhost:9000/components/angular/angular.js:2833:21)
at Object.instantiate (http://localhost:9000/components/angular/angular.js:2874:23)
at http://localhost:9000/components/angular/angular.js:4759:24
at <error: illegal access>
at Object.Scope.$broadcast (http://localhost:9000/components/angular/angular.js:8261:28)
at http://localhost:9000/components/angular/angular.js:7417:26
at wrappedCallback (http://localhost:9000/components/angular/angular.js:6797:59) angular.js:5704 
```

我的代码如下所示：

路线 -

```
angular.module( 'saApp' )
.config( function ( $routeProvider, $locationProvider ) {
    $routeProvider
        .when( '/dashboard', {
            templateUrl: 'views/dashboard/dashboard.html',
            controller: Dashboard,
            resolve: Dashboard.resolve
        } 
}); 
```

控制器 -

```
var Dashboard = angular.module( 'saApp' ).controller(
    function ( $scope, dataset ) {
            $scope.data = dataset;
    } );

Dashboard.resolve = {
  dataset: function ( $q, DBFactory ) {

    console.log("dataset enter")
    var deferred = $q.defer();

    DBFactory.get( {noun: "dashboard"},
        function ( data ) {
            console.log("resolving");
            deferred.resolve( data );
        } );

    console.log("promise");
    return deferred.promise;
  }
} 
```

运行时，它执行解析，DBFactory 资源去，回来，一切正常，直到实际的“deferred.resolve(data);” 这就是我在上面粘贴错误的地方。如果我评论那一行，当然我没有页面，但我也没有错误。

从 DBFactory 返回的数据内容是一个 JSON 对象，这是预期的，并且显示在我在网上和视频中看到的所有示例中。

使用：

```
AngularJS 1.0.6 
```

想法？感谢你的帮助。

**更新：**

似乎我使用路由并使用命名空间定义控制器的方式：

```
var Dashboard = angular.module( 'saApp' ).controller() 
```

应该为此负责。当我简单地使用标准函数声明时：

```
function DashboardCtrl($scope, dataset) {
  $scope.data = dataset;
} 
```

它满足“寻找功能，得到对象”的错误。奇怪的是我将其更改为将其用作对象“var DashboardCtrl = angular.module('saApp').controller()”，甚至是我在 yeoman 生成器之前拥有的对象，并在 angularjs 文档中指定的：

```
angular.module( 'saApp' )
.controller( 'DashboardCtrl', function ( $scope, dataset ) {}); 
```

路线为：

```
.when( '/dashboard', {
            templateUrl: 'views/dashboard/dashboard.html',
            controller: 'DashboardCtrl'
        } ) 
```

行不通。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-26T22:16:45.747

我多次遇到此错误，终于找到了完美而简单的解决方案。只需将您的控制器名称放在“何时”构造中，如下所示：

```
.when( '/dashboard', {
    templateUrl: 'views/dashboard/dashboard.html',
    controller: 'Dashboard',
    resolve: Dashboard.resolve
} 
```

代替

```
.when( '/dashboard', {
    templateUrl: 'views/dashboard/dashboard.html',
    controller: Dashboard,
    resolve: Dashboard.resolve
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-23T04:53:38.487

这将返回控制器对象：

```
var myCtrl = myApp.controller('whatever'... 
```

但是路由想要实际的控制器功能。所以....假设这是您的控制器并解决：（注意我将控制器命名为“IndexCtrl”...我认为您在代码中没有这样做）

```
myApp = angular.module('myApp')

var IndexCtrl = myApp.controller('IndexCtrl', function($scope){ 
   .. blah blah... 
})
IndexCtrl.resolve = {
  loadData:function(){ ... blah blah... }
} 
```

您可以通过传入名称来有角度地查找控制器。（注意控制器引用是一个字符串）

```
.when('/',{controller:'IndexCtrl', resolve:IndexCtrl.resolve}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-07T20:31:57.013

如果您在工厂中链接时不小心包含了额外的括号，也会发生这种情况：

坏的：

```
myModule.factory('monkey', ['$http', MonkeyFactory()]); 
```

好的：

```
myModule.factory('monkey', ['$http', MonkeyFactory]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-12T19:07:35.857

或者如果您错误地在工厂/控制器名称之后进行了注入（错误的方式）；

```
angular.module('MyModule')
    .factory('MyFactory', 'AnotherFactory', ['$http', function($http, AnotherFactory){
        // CODE HERE
    }]); 
```

正确的方式;

```
angular.module('MyModule')
    .factory('MyFactory', ['$http', 'AnotherFactory', function($http, AnotherFactory){
        // CODE HERE
    }]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-02T02:43:45.087

我遇到过同样的问题。您可以通过执行以下操作来解决它。

从路由 .when() 方法中删除控制器声明。所以这...

```
.when( '/dashboard', {
        templateUrl: 'views/dashboard/dashboard.html',
        controller: Dashboard,
        resolve: Dashboard.resolve
    } 
```

变成了这个……

```
 .when( '/dashboard', {
        templateUrl: 'views/dashboard/dashboard.html',
        resolve: Dashboard.resolve
    } 
```

现在为了维护您的范围，在您的 html 模板中添加控制器声明。例如..

```
<div ng-controller="DashboardCtrl">{{Some fancy dashboard stuff}}</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-12T09:14:08.270

当我忘记导出我正在导入的类时出现此错误

```
import MyService from './services/MyService'
app.service('MyService', MyService); 
```

我的服务.js

```
class MyService(){
    // ... do stuff
} 
```

需要是

```
export default class MyService(){
    // ... do stuff
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-09T13:50:07.740

在 Coffeescript 中使用 Karma 进行模块模拟时出现此错误。

解决方案是在 ($provide)-> 函数的末尾添加“return null”。没有它，coffeescript 将返回 $provide.value() 的结果，我猜它是一个对象，它以某种方式导致“'fn 不是函数”。

例子：

```
module 'myModule', ($provide)->
  $provide.value 'myInjectable',
    myFunction:-> return "dummy value"
  return null # prevents "fn is not a function" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-14T05:19:00.417

我能够通过添加 {} 从另一个文件导入我的“函数”来解决这个“fn 不是函数，得到对象”，如下所示：

```
import {MenuCtrl} from './controllers/MenuCtrl.js'; 
```

老办法：

```
import MenuCtrl from './controllers/MenuCtrl.js'; 
```

引用了这个问题：[https ://github.com/swimlane/angular-data-table/issues/189](https://github.com/swimlane/angular-data-table/issues/189)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-01-02T03:21:33.367

如果您使用 Coffescript + angularjs，也会发生这种情况。

由于 angularjs 支持 Coffescript 类。

```
class IndexCtrl 
    constructor: () ->

myApp.controller('IndexCtrl',IndexCtrl) 
```

然后在 .when()

“控制器：IndexCtrl”看到的是一个对象，而不是一个函数。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-23T06:00:12.577

当我们在 html 中有一个未在控制器中定义的函数时，我们也会收到此错误。

# google-bigquery - bigquery重复记录中的数据顺序

> ID：16155023
> 
> 赞同：2
> 
> 时间：2013-04-22T19:19:59.023
> 
> 标签：google-bigquery

使用聚合函数时，我如何知道（或控制）重复字段中的记录将以什么顺序返回？

例如，如果我在儿童中使用“group_concat(children.name)”，我可以假设连接顺序与插入到 JSON 中的表中的顺序相同吗？

同样适用于孩子中的 first(children.name)。

有没有一种方法可以在不使用整个表的 ORDER BY 的情况下对数据进行排序，这从资源的角度来看是非常昂贵的？（尝试执行此操作时，我不断收到“在查询执行期间超出资源”）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:12:43.047

应在嵌套或重复字段中的记录之间保留顺序。

不使用 order by 就无法进行排序。如果您只需要前几个值，您可以尝试使用`TOP()`或将其拆分为两个查询并进行`WHERE`子句限制。例如，对于第一个查询，您会在`QUANTILES()`添加的第二个查询中找到一个分割点（可能使用 ）`WHERE field < split_point`。

# reporting-services - 如何在变量分组值上按分组显示 SSRS 中的行数？

> ID：16155024
> 
> 赞同：13
> 
> 时间：2013-04-22T19:20:02.617
> 
> 标签：reporting-services, grouping, row-number

本质上，我希望每个分组有单独的行数。我相信我应该使用`RowNumber`. 这似乎已经讨论过了，但由于我的 groupby 不是字符串常量，我遇到了困难。

我的尝试导致了类似于：

```
=RowNumber(Parameters!GroupBy1.Value) 
```

如果我按原样设置，则不会加载 SSRS 报告。

每个 DS 工作的行数。如果相反，我使用：

```
=RowNumber("NameOfMyDataSet") 
```

我将成功计算行数，但不重置每组。

如果我使用变量分组名称，如何重置每组的行数？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-22T19:46:22.130

您需要将函数的范围设置为组的名称，而不是 DataSet，例如：

```
=RowNumber("Group1") 
```

**评论后编辑：**

如上所述，这是在报告中创建的组的名称，而不是 DataSet 中的任何值。

在设计师中：

![在此处输入图像描述](https://i.stack.imgur.com/zNgI7.png)

组属性：

![在此处输入图像描述](https://i.stack.imgur.com/2HXqw.png)

# ios - IndexPath.row 值未存储

> ID：16155025
> 
> 赞同：0
> 
> 时间：2013-04-22T19:20:03.477
> 
> 标签：ios, objective-c, properties, indexing

我试图存储 indexPath.row 值，但在下一个视图中我得到 0。

在 selectedRecipiesViewController 中，我总是得到一个零。这是我的代码。

**MainRecipieViewController.h**

```
@property (assign)   int storageString ; 
```

**MainRecipieViewController.m**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.selectedRecipiesViewController) {
        self.selectedRecipiesViewController = [[[SelectedRecipiesViewController alloc] initWithNibName:@"SelectedRecipiesViewController" bundle:nil] autorelease];
    }

    if(indexPath.row == 0) {

        self.selectedRecipiesViewController.passingArray = soupArray; 
    }
    if (indexPath.row == 1) {

        self.selectedRecipiesViewController.passingArray = seaFoodArray;
    }      
    if (indexPath.row ==2) {
        self.selectedRecipiesViewController.passingArray = meatMuttonArray;
    } 

    storageString = indexPath.row;
    NSLog(@"storageString %i",storageString);

    [self.navigationController pushViewController:self.selectedRecipiesViewController animated:YES];
    [tableView reloadData];
} 
```

**SelectedRecipiesViewController.m**

```
- (void)viewWillAppear:(BOOL)animated {
     NSLog(@"next view %i" ,self.vc.storageString);
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:24:24.430

似乎您没有在目标视图控制器中设置它。此外，您似乎`storageString`在不正确的头文件 ( `MainRecipieViewController.h`) 中创建了该属性。

### SelectedRecipiesViewController.h

```
@property (assign) int storageString; 
```

然后在推送视图控制器之前尝试使用它：

```
[self.selectedRecipesViewController setStorageString:indexPath.row]; 
```

最后...

### SelectedRecipiesViewController.m

```
- (void)viewWillAppear:(BOOL)animated {
    NSLog(@"next view %i", self.storageString);
} 
```

# objective-c - 为什么这段代码在 ARC 下会泄露？（一个 __weak 实例变量）

> ID：16155026
> 
> 赞同：3
> 
> 时间：2013-04-22T19:20:08.103
> 
> 标签：objective-c, cocoa

我正面临一个奇怪的泄漏。以下`Car`类的对象永远不会被释放。

但是，如果我去掉实例变量`_unsafe_self`，而是在方法中声明（并像以前一样分配）变量`init`，泄漏就会消失。

这可能是什么原因造成的？我认为`__weak`总是很弱，无论它是否是实例变量。

```
@interface Car : NSObject
@end

@implementation Car {
  id _obs;
  __weak Car *_unsafe_self;
}

- (id)init {
  if (!(self = [super init]))
    return nil;

  _unsafe_self = self;

  _obs = [[NSNotificationCenter defaultCenter]
          addObserverForName:NSWindowDidMoveNotification
          object:nil
          queue:[NSOperationQueue mainQueue]
          usingBlock:^(NSNotification *note) {
              NSLog(@"hello %@", _unsafe_self);
            }];

  return self;
}

- (void)dealloc {
  [[NSNotificationCenter defaultCenter] removeObserver:_obs];
}
@end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T19:29:08.070

`_unsafe_self`与 相同`self->_unsafe_self`，因此块在

```
_obs = [[NSNotificationCenter defaultCenter]
          addObserverForName:NSWindowDidMoveNotification
          object:nil
          queue:[NSOperationQueue mainQueue]
          usingBlock:^(NSNotification *note) {
              NSLog(@"hello %@", _unsafe_self);
            }]; 
```

捕获`self`，导致阻止`self`被释放的保留周期。

这不会导致保留周期：

```
__weak Car *weakSelf = self;
_obs = [[NSNotificationCenter defaultCenter]
        addObserverForName:NSWindowDidMoveNotification
        object:nil
        queue:[NSOperationQueue mainQueue]
        usingBlock:^(NSNotification *note) {
            NSLog(@"hello %@", weakSelf);
        }]; 
```

* * *

使用属性`self.unsafe_self`会使代码中的这一点更加明显，但是已经有足够多的“属性与 ivar”问答 :-)

# symfony1 - Symfony 1.4 中的验证表单

> ID：16155029
> 
> 赞同：0
> 
> 时间：2013-04-22T19:20:21.463
> 
> 标签：symfony1, symfony-1.4

我在我的项目中创建了一个搜索表单，但验证似乎不起作用：

过滤搜索表单：

```
class FilterSearchForm extends sfForm
 {
  public function configure()
    {

$def_volume = array(-1=>"Please select a volume");
$def_issue = array(-1=>"Please select issue");

$volumes = array_merge($def_volume,IssuePeer::getAllVolumesForListChoices());
$issues = array_merge($def_issue,IssuePeer::getAllIssuesForListChoices());

//******************************** WIDGET **************************************//
   $this->setWidgets(array(
  'keyword'    => new sfWidgetFormInput(),
  'volume' => new sfWidgetFormSelect(array('choices' => $volumes)),
  'issue' => new sfWidgetFormSelect(array('choices' => $issues)),
));

           //*****************************************  VALIDATORS           
          **********************************//
   $this->setValidators(array(
  'keyword'    => new sfValidatorString(array('required' => true)),
  'volume' => new sfValidatorChoice(array('choices' => array_keys(IssuePeer::getAllVolumesForListChoices()))),
  'issue' => new sfValidatorChoice(array('choices' => array_keys(IssuePeer::getAllIssuesForListChoices()))),
));

$this->widgetSchema->setNameFormat('filterSearch[%s]');
$this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);

} 
```

}

在搜索动作中：

```
$this->form = new FilterSearchForm(); 
```

在搜索模板中：

```
 <form id="form_content" method="post" action="<?php echo url_for('@ResultSearch')  ?>">
                <?php echo $form->renderHiddenFields(); ?>

            <?php if($form->hasGlobalErrors()): ?>
            <ul class="error_list">
                <?php foreach($form->getGlobalErrors() as $name => $error): ?>
                <li><?php echo $error; ?></li>
                <?php endforeach; ?>
            </ul>
           <?php endif; ?>
                <div class="search_word" >

                        <?php echo $form['keyword']->render();?>
                <?php echo $form['keyword']->renderError() ?>
                </div>
                    <div class="select-wrapper" data-icon="&#710;">

                   <?php echo $form['volume']->render();?>
                   <?php echo $form['volume']->renderError() ?>
                    </div>
                    <div class="select-wrapper" data-icon="&#710;" >
                                    <?php echo $form['issue']->render();?>
                <?php echo $form['issue']->renderError() ?>

                    </div>
                <div class="search_button">
                <button class="msg_submit_btn" id="fpost" type="submit"></button>
                </div>
        </form> 
```

在结果搜索操作中：

```
 if ($request->isMethod('post'))
{
  $this->form = new FilterSearchForm();
  $this->form->bind($request->getParameter('filterSearch'));
  if ($this->form->isValid())
  {

      $values = $this->form->getValues();

   $keyword = trim($values['keyword']);
   $volume = trim($values['volume']);
   $issue = trim($values['issue']);

   $search= new Issue();

  $object = $search->searchFilter($issue, $volume, $keyword);

      $this->results= $object;   

  }
} 
```

最后在 ResultSearch 模板中：

```
<?php foreach ($results as $result): ?>
..... 
```

因此，例如，在我的搜索模板中，当我将表单中的关键字字段保持为空并单击提交时，会将我重定向到结果搜索而不显示“错误验证”==>“需要关键字”。

当我放 var_dump 时，我说代码也在`if ($this->form->isValid())`Resultsearch 操作中停止。

任何想法？

编辑 ：

我注意到当我在“搜索模板”上面的代码中只使用一个页面时，这意味着 post 方法在同一页面中重定向`<form id="form_content" method="post" action="">`，所以表单的验证工作正常，但不是我想要的，我希望在之后重定向上述代码中的“Resultsearch”模板提交并传递搜索的数据到另一个页面。

# ios - iOS 5 自定义标签栏取消分配表视图？

> ID：16155030
> 
> 赞同：2
> 
> 时间：2013-04-22T19:20:23.870
> 
> 标签：ios, objective-c, xcode, uitableview, storyboard

按照 Scott Sherwood 的本教程（[http://www.scott-sherwood.com/ios-5-creating-a-custom-side-tabbar-using-storyboards-and-custom-segues/](http://www.scott-sherwood.com/ios-5-creating-a-custom-side-tabbar-using-storyboards-and-custom-segues/)），我创建了一个使用子视图加载其他视图的自定义标签栏。一切都很顺利，我对结果非常满意。但是，当我将表格视图添加到“标签页”之一并将其连接到数据源时，应用程序崩溃了。

我正在使用 ARC 并打开了僵尸，所以我的控制台告诉我一条消息已发送到我的表视图的已释放实例。我不知道如何保留表格视图，以便显示我的数据。这只是我的第二个应用程序，我对故事板和高级视图控制器还不太熟悉。我错过了什么？

这是我的自定义选项卡视图控制器：

**CustomTabBarViewController.h**

```
@interface CustomTabBarViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>{

}

@property(weak,nonatomic)UIViewController *currentViewController;
@property(weak,nonatomic)IBOutlet UIView *placeholder;
@property (weak, nonatomic) IBOutlet UIImageView *tabIndicator;
@property (weak, nonatomic) IBOutlet UIImageView *headerBacker1;
@property (weak, nonatomic) IBOutlet UIImageView *headerBacker2;

@end 
```

**CustomTabBarViewController.m**

```
#import "CustomTabBarViewController.h"

@interface CustomTabBarViewController ()

@property (weak, nonatomic) IBOutlet UIView *buttons;

@end

@implementation CustomTabBarViewController

@synthesize currentViewController;
@synthesize placeholder;
@synthesize buttons;
@synthesize tabIndicator;
@synthesize headerBacker1;
@synthesize headerBacker2;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self performSegueWithIdentifier:@"ProductSegue" sender:[self.buttons.subviews objectAtIndex:0]];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setTabIndicator:nil];
    [self setHeaderBacker1:nil];
    [self setHeaderBacker2:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"ProductSegue"]
       || [segue.identifier isEqualToString:@"ContactSegue"]
       || [segue.identifier isEqualToString:@"CategoryPage"]){

        if([segue.identifier isEqualToString:@"ContactSegue"]){

            [UIView animateWithDuration:0.25f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^{
                [tabIndicator setCenter:CGPointMake(614, 108)];
                [headerBacker1 setCenter:CGPointMake(1024, 48)];
                [headerBacker2 setCenter:CGPointMake(1024, 789)];
            } completion:nil];

        }else{
            [UIView animateWithDuration:0.25f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^{
                [tabIndicator setCenter:CGPointMake(499, 108)];
                [headerBacker1 setCenter:CGPointMake(341, 48)];
                [headerBacker2 setCenter:CGPointMake(341, 789)];
                } completion:nil];

        }
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

@end 
```

以及加载到选项卡中的页面，其中包含表格视图：（注意*：此页面链接为情节提要中的表格视图数据源和表格视图委托）

**ProductListViewController.h**

```
#import <UIKit/UIKit.h>

@interface ProductListViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) NSMutableArray *maTheData;

@end 
```

**ProductListViewController.m**

```
#import "ProductListViewController.h"

@interface ProductListViewController ()

@end

@implementation ProductListViewController

@synthesize maTheData;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        //
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"viewDidLoad");
    if (!maTheData) {
        maTheData = [[NSMutableArray alloc] initWithObjects:@"Comets", @"Asteroids", @"Moons", nil];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [maTheData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"categoryTableCell"];
    UILabel *lblName = (UILabel *)[cell viewWithTag:100];
    [lblName setText:[maTheData objectAtIndex:[indexPath row]]];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    //return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    return interfaceOrientation == UIInterfaceOrientationLandscapeRight;

}

@end 
```

谢谢你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:45:27.033

据我从您提供的链接中可以看出，您要连接的控制器应该由 currentViewController 指向。所以，问题在于这个声明：

@property(weak,nonatomic)UIViewController *currentViewController;

这需要强大，而不是弱。IBOutlets 弱是可以的，因为指向的对象是另一个视图的子视图，该视图持有对它们的强引用。但是， currentViewController 应该很强大，以防止您的控制器被释放（没有其他东西对它有很强的引用）。我从链接中看到他在 perform 方法中将 currentViewController 设置为 segue 的目标控制器——如果你这样做，并且你将声明更改为 strong，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:26:48.093

```
@property (nonatomic, strong) IBOutlet UITableView *tableView; 
```

将此属性与情节提要中的 tableview 连接。这应该会阻止 tableview 处理，因为视图控制器有一个强指针。从调试点开始在您认为导致错误的区域放置断点以定位代码中断的行。然后您可以更深入地调查错误。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:39:32.617

我猜你遇到的问题是因为你有弱属性而不是强属性，特别是对于你的 currentViewController。尝试将它们全部更改为强，看看您是否仍然有问题。

摘自：[Objective-C 中的弱和强属性设置器属性](https://stackoverflow.com/questions/7912555/weak-and-strong-property-setter-attributes-in-objective-c)

**弱（iOS4 = unsafe_unretained）**

*   它说“只要其他人强烈指出就保留它”与分配相同，不保留或释放
*   “弱”引用是您不保留的引用。
*   我们通常对 IBOutlets（UIViewController 的 Childs）使用weak。这是因为子对象只需要与父对象一样存在。
*   弱引用是不保护被引用对象不被垃圾收集器收集的引用。
*   弱本质上是赋值，一个未保留的属性。除了当对象被释放时，弱指针自动设置为 nil

# java - Android - 每 15 分钟运行一次后台任务，即使应用程序没有运行

> ID：16155032
> 
> 赞同：19
> 
> 时间：2013-04-22T19:20:27.077
> 
> 标签：java, android, service, repeat

我需要构建一个每 10/15 分钟运行一次的后台任务（没关系，要么很好），即使应用程序没有运行。

我怎样才能做到这一点？我似乎无法解决这个问题。

我读到我可以使用某种 runnable() 功能或使用后台服务或 AlarmManager。我在考虑后台服务，因为它也必须在应用程序本身未运行时完成。

有什么更好的方法可以做到这一点，我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T19:25:11.833

您已经确定了执行一段代码的时间（间隔），最好使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)，因为它更节能。如果你的应用需要监听某种事件，那么 Service 就是你所需要的。

```
public static void registerAlarm(Context context) {
    Intent i = new Intent(context, YOURBROADCASTRECIEVER.class);

    PendingIntent sender = PendingIntent.getBroadcast(context,REQUEST_CODE, i, 0);

    // We want the alarm to go off 3 seconds from now.
    long firstTime = SystemClock.elapsedRealtime();
    firstTime += 3 * 1000;//start 3 seconds after first register.

    // Schedule the alarm!
    AlarmManager am = (AlarmManager) context
            .getSystemService(ALARM_SERVICE);
    am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, firstTime,
            600000, sender);//10min interval

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:33:57.503

警报管理器（系统服务）与具有内部警报实现（单独进程）的远程服务？

警报管理器是您的选择，因为它已经拥有您所需要的，您只需设置警报间隔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:40:23.060

您也可以通过 SyncAdapter 实现此目的 这是一个示例供您查看并获得启发

[SyncAdapter 示例](https://github.com/android/platform_development/blob/2d52182dfac91014c2975a1bb1afd99a3b14b4e9/samples/SampleSyncAdapter/src/com/example/android/samplesync/syncadapter/SyncAdapter.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-14T06:55:45.477

工作经理实际上是最好的定期重复，他们的默认值是 15 分钟，这正是你需要的。这是一个例子：

```
 final PeriodicWorkRequest periodicWorkRequest
                = new PeriodicWorkRequest.Builder(ApiWorker.class, 15, TimeUnit.MINUTES)
                .build();
        WorkManager.getInstance().enqueue(periodicWorkRequest); 
```

其中 ApiWorker 只是以下类：

```
public class ApiWorker extends Worker implements iOnApiRequestSuccessful {

public ApiWorker(@NonNull Context context, @NonNull WorkerParameters workerParams) {
    super(context, workerParams);
}

@NonNull
@Override
public Result doWork() {
    return Result.success();
}
} 
```

并在成功返回之前在 doWork() 函数中填写您想要完成的任何工作。

Return.success() 使其再次插入队列，因此它将每 15 分钟重复一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-06T11:07:32.757

最好的方法是在 Google I/O 2018 - [WorkManager](https://developer.android.com/reference/androidx/work/WorkManager)上介绍的。

[您可以在此处](https://developer.android.com/topic/libraries/architecture/workmanager)找到文档。

# jquery - jQuery 获取每个具有正确类的父 div 的表单输入

> ID：16155037
> 
> 赞同：0
> 
> 时间：2013-04-22T19:20:45.343
> 
> 标签：jquery, css

在这样的简单形式上：

```
<form method="post">
<div class="success">
<input type="text" name="username" id="username"/>
</div>
<div class="notsuccess">
<input type="password" name="password" id="password"/>
</div>
<input type="submit" name="submit" id="submit" value="submit" />
</form> 
```

jQuery 是否有可能获取每个输入的列表或数组，这些输入具有一个成功类的父 div？我想做某种验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:37:51.230

我从字面上看

> (1) 每个输入的列表或数组
> 
> (2) 有一个成功类的 *parent div

然后`$('div.success input')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:23:24.647

你可以试试

```
$("input").parent("div.success").each(function() {
    //code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:24:22.030

你可以试试这个：

`var $elements = $('input').parent('.success');`

要遍历它们，您可以使用：

```
$('input').parent('.success').each( function(i, ele) { 
    $(this); // This is each .success element.
} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:43:20.393

```
$('input', $('div.success')) 
```

到目前为止最简单的答案。请记住，默认情况下，$() 选择器将创建一个 jQuery 对象，其中包含与选择匹配的所有 DOM 节点。这意味着您不必创建数组，它已经完成了。

# file - 如何将两个文件合并为一个？

> ID：16155038
> 
> 赞同：3
> 
> 时间：2013-04-22T19:20:50.590
> 
> 标签：file, delphi

我有两个二进制文件（假设这是一个以前分成两部分的 ZIP 文件）。如何将它们组合成一个文件？更准确地说，将第二个文件添加到第一个文件中。

**更新：**伙计们，感谢所有回复我的人，但这并不是我所需要的。基本上，我需要一个 shell 命令的类似物：“copy /b file.000+file.001+file.002 file.bin”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T19:23:49.573

像这样：

```
var
  InStream, OutStream: TFileStream;
....
OutStream := TFileStream.Create(OutFileName, fmCreate);
try
  InStream := TFileStream.Create(InFileName1, fmOpenRead);
  try
    OutStream.CopyFrom(InStream, InStream.Size);
  finally
    InStream.Free;
  end;
  InStream := TFileStream.Create(InFileName2, fmOpenRead);
  try
    OutStream.CopyFrom(InStream, InStream.Size);
  finally
    InStream.Free;
  end;
finally
  OutStream.Free;
end; 
```

或者更一般地连接多个文件：

```
procedure ConcatenateFiles(const InFileNames: array of string;
  const OutFileName: string);
var
  i: Integer;
  InStream, OutStream: TFileStream;
begin
  OutStream := TFileStream.Create(OutFileName, fmCreate);
  try
    for i := 0 to high(InFileNames) do
    begin
      InStream := TFileStream.Create(InFileNames[i], fmOpenRead);
      try
        OutStream.CopyFrom(InStream, InStream.Size);
      finally
        InStream.Free;
      end;
    end;
  finally
    OutStream.Free;
  end;
end; 
```

像这样称呼它：

```
ConcatenateFiles(['Part1', 'Part2'], 'Outfile.zip') 
```

# java - 如何在 Java 中访问 MS SQL Server 公钥

> ID：16155041
> 
> 赞同：0
> 
> 时间：2013-04-22T19:20:57.970
> 
> 标签：java, encryption, rsa

我们正在尝试使用直接在 MS SQL Server 中创建的 RSA 2048 公钥加密文件。这些公钥可以通过 sys.asymmetric_keys 视图查询。我们真的没有访问数据库的权限。公钥存储为 VARBINARY(max) 字段。看起来像这样：

```
0x0602000000240000525341310008000001000100D1D13925EC404DA171AE1EA9EFCFCB9849FA
4678DB26D0EEDD36D440D5EC3781A7EE3E05654EC6830B79E5E745F24A0C35B21C0089D19254A7
A12B65EA018116482190B2D4DDADB2CD7B0B79F0E08DF97C4E4569D181BC3C34D350AEF821CCA0
819E4AA336449A4B022F75FC6C382C4BA60CBBBA03461D2B6C7BF7CECE48D52A6B186C57226297
A09DD5D730ECA29C41796C1C961AA7763D8F7D0094F310D29AEA8D5F526B0B99FEC1841B5462A0
75648CADBB32C51A43EAC76E8D02B644996368890A762AEF80439B4CD92DA7D38417601918B104
B1DDEE846DF09E944B562A0828285A6EB362D19E2BDD79DBCE6B86D9F60D264C8EF4F4CCCAEB6B
89F410AF 
```

该公钥的长度为 554 位。它似乎是一个十六进制数。我不知道这个密钥是如何编码的。我知道我们需要一个 KeySpec 来实例化一个公钥。

```
PublicKey publicKey = KeyFactory.getInstance("RSA").generatePublic((KeySpec) new SomeKeySpec(bytes); 
```

我不知道如何从中创建关键规范。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:46:53.427

嗯，`010001`是公共指数。这是一个众所周知的，费马的第四个数（一个素数，第一个和最后一个位设置为`1`，中间全为零）。这使它成为一个快速的公钥。

这使得：

```
00 D1D13925EC404DA171AE1EA9EFCFCB98
   49FA4678DB26D0EEDD36D440D5EC3781
   A7EE3E05654EC6830B79E5E745F24A0C
   35B21C0089D19254A7A12B65EA018116

   482190B2D4DDADB2CD7B0B79F0E08DF9
   7C4E4569D181BC3C34D350AEF821CCA0
   819E4AA336449A4B022F75FC6C382C4B
   A60CBBBA03461D2B6C7BF7CECE48D52A

   6B186C57226297A09DD5D730ECA29C41
   796C1C961AA7763D8F7D0094F310D29A
   EA8D5F526B0B99FEC1841B5462A07564
   8CADBB32C51A43EAC76E8D02B6449963

   68890A762AEF80439B4CD92DA7D38417
   601918B104B1DDEE846DF09E944B562A
   0828285A6EB362D19E2BDD79DBCE6B86
   D9F60D264C8EF4F4CCCAEB6B89F410AF 
```

模数，编码为大端有符号整数。我不知道公共指数之前的标题。`52534131`是“RSA1”的ASCII，可能是某种标签，`0800`无疑是密钥大小。

# android - Android：如何通过捆绑发送带有成员对象的对象？

> ID：16155042
> 
> 赞同：0
> 
> 时间：2013-04-22T19:21:00.657
> 
> 标签：android, bundle

我找到了一些简单的例子来说明如何使用包含原始类型的对象来做到这一点。我正在使用一个包含一组对象作为其成员和几个枚举成员变量的类。我将如何存储每个对象？我想我必须让两者都实现 Parcelable。是否有任何例子或其他处理过这个问题的人？

[如何通过捆绑发送对象](https://stackoverflow.com/questions/4249897/how-to-send-objects-through-bundle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:01:46.017

[Parcel](http://developer.android.com/reference/android/os/Parcel.html) 界面为您的对象数组提供了不同的可能性

```
writeParcelableArray(T[] value, int parcelableFlags)
writeStringArray(String[] val)
writeStringList(List<String> val)

readParcelableArray(ClassLoader loader)
readStringList(List<String> list)
readStringArray(String[] val) 
```

对于枚举，您可以保存名称并稍后使用

```
readString()
writeString(String val) 
```

或获取枚举值并使用

```
readInt()
writeInt(Int val) 
```

小代码示例

```
public class Tag implements Parcelable {

private long id;
private String title;

// ... getter & setters & constructor ...

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel out, int flags) {
    out.writeLong(id);
    out.writeString(title);
}

public static final transient Parcelable.Creator<Tag> CREATOR = new Parcelable.Creator<Tag>() {
    public Tag createFromParcel(Parcel in) {
        return new Tag(in);
    }

    public Tag[] newArray(int size) {
        return new Tag[size];
    }
};

protected Tag(Parcel in) {
    readFromParcel(in);
}

protected final void readFromParcel(Parcel in) {
    id = in.readLong();
    title = in.readString();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:36:27.693

我希望 JSONObject 能帮助你。您可以使用 put 方法将其他对象放入一个 json 对象中......您可以通过将其写入任何 .txt 或 .json 文件来发送该对象，您只需解析该文件并获取您拥有的所有对象写入文件

# java - Java，如何即时编写文件

> ID：16155053
> 
> 赞同：1
> 
> 时间：2013-04-22T19:21:34.890
> 
> 标签：java

目前在我的应用程序中，我将一堆数据存储在内存中，最后通过遍历`ArrayList`并将数据转储到文件指针中将其写入文件。我如何才能即时写入数据，但我不希望它存储在某些文件指针内存中。我希望在应用程序运行时将其写入磁盘。试图将内存成本保持在最低限度。如果有必要回答，我也可以参加关于文件指针如何在 Java 中工作的简短讲座。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:34:49.357

我不确定我是否理解您的问题，但通常，这就是您“即时”将数据写入磁盘的方式。

*   打开输出文件
*   生成数据时，将行或缓冲区写入输出文件
*   关闭输出文件

编辑以回答评论中的问题。

> 我希望在应用程序运行时将数据流式传输到磁盘，并且如果应用程序在执行过程中崩溃，数据本身不会丢失。

好吧，如果应用程序崩溃，您可能会丢失最后一行或缓冲区。即使应用程序崩溃，您也可以使用 finally 方法来确保关闭输出文件。

> 你能提供一个快速的代码示例吗？

当然。

```
public void writeOutput() {
    boolean processRunning = true;
    BufferedWriter bufferedWriter = null;
    try {
        bufferedWriter = new BufferedWriter(new FileWriter("output.txt"));
        while (processRunning) {
            String s = generateOutput();
            bufferedWriter.write(s);
            if (s.equals("finished")) {
                processRunning = false;
            }
        }
        bufferedWriter.flush();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (bufferedWriter != null) {
                bufferedWriter.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:42:39.180

您正在寻找的可能是[FileChannel](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html)。

您可以使用该方法强制您写入的数据实际刷新到磁盘上`force()`。

这是一个使用示例：

```
RandomAccessFile file = null;

try {
    file = new RandomAccessFile("/home/user/mytempfile", "rw");
    FileChannel channel = file.getChannel();

    for (int i = 0; i < 100; i++) {
        file.writeUTF("Hello");
        channel.force(true);
    }
} finally {
    if (file != null) {
        file.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:49:22.117

您可能想尝试使用

java.io.FileStream 和 java.io.BufferedWriter

图书馆。

这是一个快速设置，可让您开始使用它们：

```
import java.io.*;

FileWriter fstream = new FileWriter("C:\\junkdirectory\\textdump.txt");
BufferedWriter out = new BufferedWriter(fstream);

out.write("This is a test!!");
out.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:49:52.523

您可以使用以下代码将 ArrayList 转储到文件中：

**在构建 ro App 启动时间：**

```
final ObjectOutputStream fos = new ObjectOutputStream(
                                   new FileOutputStream("data.dump", true)); 
```

**在将数据写入文件时：**

```
try {
    fos.writeObject(list); // write your list to file
    fos.flush();
} catch (IOException e) {
    e.printStackTrace();
} 
```

**当您不再需要文件时（最后）：**

```
fos.close(); // surround with try-catch block 
```

# c++ - 在复制构造函数中复制向量的向量

> ID：16155054
> 
> 赞同：2
> 
> 时间：2013-04-22T19:21:36.687
> 
> 标签：c++, copy, copy-constructor, stdvector

我想在复制构造函数中复制一个 int 类型的向量向量。

```
std::vector<std::vector<int> * > * bar; 
```

这不起作用：

```
Foo(const Foo& rhs)
: bar(new std::vector<std::vector<int> * >(rhs.vec->size())) {

    for (std::size_t i = 0; i < rhs.bar->size(); i++) {
        bar->push_back(new std::vector<int>());
        for (size_t j = 0; j < (*rhs.bar)[i]->size(); j++) {
            bar->back()->push_back((*rhs.bar)[i]->at(j));
        }
    }
} 
```

我还想我是否可以使用一些东西，`swap`但`back()`我不确定这是否可行。

有人可以告诉我制作副本的正确方法吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T19:26:09.893

由于您的实际存储类型是`int`，我想不出在这种情况下使用任何指针的充分理由。将您的成员变量更改为不使用指针，而只需让`vector`对象的复制构造函数为您完成工作。

```
class T
{
public:
   T() {};

   // For this class, the copy constructor isn't even necessary!

private:
   std::vector<std::vector<int>> v_;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T19:26:13.233

如果你有你*所说*的，一个整数向量的向量，而不是你*显示*的（一个指向指向整数的向量的指针的向量的指针），那么对象已经可以做到了。您只需使用它的复制构造函数或赋值运算符：

```
std::vector<std::vector<int> > vec;
std::vector<std::vector<int> > copy_of_vec = vec; 
```

是的，一旦你摆脱了所有的指针，它真的就这么简单。

# regex - '[]' 是 Perl 中的有效正则表达式吗？

> ID：16155056
> 
> 赞同：-3
> 
> 时间：2013-04-22T19:21:40.687
> 
> 标签：regex, perl

```
[ [ 'or', [ 'ar', 1, undef, ['v'] ], ['v'] ] ] 
```

这是什么意思？在 Perl 或 Perl 正则表达式中？它试图通过什么？这是有效的吗？我认为`[]`只能是正则表达式中的字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:27:56.063

在这种情况下，它与正则表达式没有任何关系。它创建一个包含其他数组引用的数组引用——换句话说，一个复杂的数据结构。您可以将其存储在标量中：

```
my $foo = [ [ 'or', [ 'ar', 1, undef, ['v'] ], ['v'] ] ]; 
```

并打印出一些东西：

```
say $$foo[0][0];       # "or"
say $$foo[0][1][0];    # "ar"
say $$foo[0][1][3][0]; # "v" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:25:14.237

这是一个数组引用。阅读*[perlreftut - Mark 关于引用的简短教程](http://perldoc.perl.org/perlreftut.html)*。

# php - Phpass登录不起作用

> ID：16155059
> 
> 赞同：0
> 
> 时间：2013-04-22T19:22:01.753
> 
> 标签：php, login, phpass

我正在更改我的注册并登录到不同的加密（Phpass），因为每个人都说 md5 不再安全。我设法让注册功能正常工作，但无法弄清楚为什么登录不起作用。此代码运行没有错误，但它没有从这一行传递`if($stm->rowCount()>0){}`

请忽略注释代码，它是我的旧登录版本。欢迎任何其他建议！

```
 include("include/connection.php");
        require_once('include/PasswordHash.php');

        function login($db){
            if (isset($_GET["type"])){  
                if($_GET["type"]=="log" && isset($_POST['email']) && isset($_POST['password'])){

                    session_start();

                    $email = $_POST['email'];
                    $password = $_POST['password'];
                    $hasher = new PasswordHash(8, false);

                    if($email=='' || $password==''){
                        echo "<font style='background-color: #F9C5CA'>Error: Please fill the required fields.</font>";
                    }else{

                        //$password = md5($password);
                        $pass = $hasher->HashPassword($_POST['password']);

                        $sql = "SELECT email,password,id FROM user WHERE email=? AND password=?";
                        $stm = $db->prepare($sql);
                        $stm->execute(array($email,$pass));
                        $row = $stm->fetch(PDO::FETCH_ASSOC);

                        /*if($stm->rowCount()>0){

                            $_SESSION['id']=$row['id'];
                            header('Location: cpanel/#welcome');
                        }else{
                            echo "<font style='background-color: #F9C5CA'>Error: Your email and/or password are incorrect. Please try again.</font>";
                        }*/

                        if($stm->rowCount()>0){
                            if ($hasher->CheckPassword($pass,$row['password'])) {
                                $_SESSION['id']=$row['id'];
                                header('Location: cpanel/#welcome');
                                exit();

                            }else{
                                echo "<font style='background-color: #F9C5CA'>Error: Your email and/or password are incorrect. Please try again.</font>";
                            }
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T10:40:56.417

确保散列密码为 60 个字符，否则将返回 false。我有同样的问题，注意到我的第一个散列密码是 61 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:42:09.603

您可以更改条件，因为有几种方法可以替换`rowCount()`：

如果用户存在则`$row = $stm->fetch(PDO::FETCH_ASSOC);`返回一个包含数据的数组，如果没有用户则返回一个空数组：

```
// Count array and check if is greater than 0
if ( count($row) > 0 )
// Check if array is not empty
if ( !empty($row) )
// Simple check. An empty array would return false
if ( $row ) 
```

# performance - Python 3.3 在大循环期间减速

> ID：16155064
> 
> 赞同：2
> 
> 时间：2013-04-22T19:22:22.097
> 
> 标签：performance, list, dictionary, python-3.x

我对编程很陌生，不明白我的程序速度变慢的原因。

我正在处理大约 350,000 - 500,000 行的数据集，并希望得到一些指导。

我需要对照旧列表检查新列表中的所有条目，以便更新旧条目并将全新的条目添加到列表的末尾。

如果将打印语句添加到重新分配循环并且新行异常，则前几千次迭代很快，但之后程序变得非常慢。（在前 3 秒内完成了近 1000 个完整的循环，在大约第 20,000 次迭代之后，速度降低到低于 5 秒内的 100 个完整循环，到第 60,000 次迭代，它比 15 秒内的 100 个完整循环慢。）

RAM 的使用率低于 70%，而 CPU 一直保持在 48% 到 50% 之间

代码如下所示：

```
import gc
gc.disable() #this was added to possibly improve speed

def updateOldList(oldListOfLists, newListOfLists):
    oldListIndexDict = dict()
    IDNumber = <index of ID number>
    for i in range(len(oldListOfLists)):
        oldListIndexDict[oldList[i][IDNumber]] = i
    for i in range(len(newListOfLists)):
        try:
            oldIndex = oldListIndexDict[newListOfLists[i][IDNumber]]
            oldListOfLists[oldIndex][0] = newListOfLists[i][0]
            oldListOfLists[oldIndex][3] = newListOfLists[i][3]
            del(oldListIndexDict[newListOfLists[i][IDNumber]]) #this was added to limit the number of entries in the hash table to attempt to improve speed
        except:
            oldListOfLists= oldListOfLists + newListOfLists
return oldListOfLists 
```

每个列表列表中的内部列表需要保持有序，所以我认为我不能使用集合。

以下两个问题非常相似，我在询问之前尝试/考虑了他们的评论。

[python函数无明显原因变慢](https://stackoverflow.com/questions/1723494/python-function-slowing-down-for-no-apparent-reason)

[Python函数因存在大列表而变慢](https://stackoverflow.com/questions/5823465/python-function-slows-down-with-presence-of-large-list)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T01:28:49.927

好的，让我们使用 Python 3.3。我想 oldListOfLists 中的每个列表都应该是*newListOfLists中的**一个*，并且您主要更新值，因此，例如，*oldListOfLists 的第 0 个由 newListOfLists**的*第 0 个、1ft 等更新- 相同的索引，你可以简化您的代码。

```
def updateOldList(oldListOfLists, newListOfLists):

    for i in range(lenNewListOfLists):
        try:            
            oldListOfLists[i][0] = newListOfLists[i][0]
            oldListOfLists[i][3] = newListOfLists[i][3]            
        except IndexError:
            oldListOfLists+=newListOfLists

return oldListOfLists 
```

如果 oldListofLists 中的 a 列表没有被*newListOfLists*中具有相同索引的列表更新，*那么*它实际上不会很好地工作，你可以想象。

编辑：您可能想要捕获类似 IndexError 的内容，以防活动的新列表没有对应的旧列表，而其他的一般错误则没有。

Edit2 : += 是扩展的别名。

```
oldListOfLists+=newListOfLists 
```

是相同的

```
oldListOfLists.extend(newListOfLists) 
```

Edit3：代码仍然变慢吗？您的最后一个列表（在索引中）是否变得越来越大？两个列表的总内存大小是多少？

# python - 在python中构建依赖图

> ID：16155071
> 
> 赞同：1
> 
> 时间：2013-04-22T19:22:46.020
> 
> 标签：python

我正在尝试构建一个如下的python调用图，我有一个具有内部和外部依赖项的更改，并且这些依赖项需要递归进入，直到每个叶子都得到一个关闭的更改......我有逻辑来获取内部和外部依赖，我需要一些输入或主体如何构建如下图..

```
 change
             /    \
            /      \
           /        \
internal dependency   external dependency
         / \                      /\   
        /   \                    /  \
   /     \                  /    \
  /       \                /      \ 
```

internal dep external dep internal dep external dep （重复此操作，直到依赖项更改处于关闭状态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:08:23.003

如果您将预期的输出放在一边，这将更容易。然后创建你想要的树结构：

```
class Tree(object):
    def __init__(self, name, *children):
        self.name = name
        self.children = children

    def __str__(self):
        return '\n'.join(self.tree_lines())

    def tree_lines(self):
      yield self.name
      last = self.children[-1] if self.children else None
      for child in self.children:
          prefix = '`-' if child is last else '+-'
          for line in child.tree_lines():
          yield prefix + line
          prefix = '  ' if child is last else '| '

tree = Tree('Change',
    Tree('External',
        Tree('External A'),Tree('External B'),Tree('External C',Tree('Sub Ext C'))),
    Tree('Internal',
        Tree('Internal A'),Tree('Internal B',Tree('Sub Int B')),Tree('Internal C'))
    )   

print tree 
```

印刷：

```
Change
+-External
| +-External A
| +-External B
| `-External C
|   `-Sub Ext C
`-Internal
  +-Internal A
  +-Internal B
  | `-Sub Int B
  `-Internal C 
```

# php - sqlsrv 数组不返回所有行

> ID：16155073
> 
> 赞同：6
> 
> 时间：2013-04-22T19:22:48.787
> 
> 标签：php, sql-server, sqlsrv

我似乎无法弄清楚为什么`sqlsrv_fetch_assoc`当结果集中有 2 行时只返回 1 行`sqlsrv_num_rows`。我尝试对参数进行硬编码，但仍然得到相同的结果。

**SSMS 结果集**

```
标识说明
------ -------------
2 管理员
3 用户
```

**PHP**

```
$col = 'abcd';
$stmt = "SELECT id, [description] FROM dbo.tbl WHERE col = ?";
$params = array( $col );
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );

$query = sqlsrv_query( $conn, $stmt, $params, $options );
if( $query === false ) {
    print( print_r( sqlsrv_errors() ) );
}

while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC )) {
    ...
} 
```

当我尝试查看结果集时

```
$row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC );

print_r($row); 
```

我收到

```
大批
(
    [id] => 2
    [描述] => 管理员
)
```

**sqlsrv_num_rows**

```
echo sqlsrv_num_rows( $query );
//Returns 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T19:39:19.933

> 当我尝试查看结果集时
> 
>       $row = sqlsrv_fetch_array($query, SQLSRV_FETCH_ASSOC);
>       打印_r（$行）；`

既然你单独列出了这个，我希望你没有这样做（显示所有代码）：

```
$col = 'abcd';
$stmt = "SELECT id, [description] FROM dbo.tbl WHERE col = ?";
$params = array( $col );
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );

$query = sqlsrv_query( $conn, $stmt, $params, $options );
if( $query === false ) {
    print( print_r( sqlsrv_errors() ) );
}

while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC )) {
    ...
    $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC );
    print_r($row);
} 
```

因为很明显，每次循环迭代都会消耗 sqlsrv_fetch_array**两次**，一次用于条件检查，一次*在*循环内。

从 while 循环中删除所有绒毛，只拥有这个 - 绝对没有别的，甚至没有 ... 或评论。

```
while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC )) {
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:27:26.143

> [`sqlsrv_fetch_array`](http://php.net/manual/en/function.sqlsrv-fetch-array.php)：将**下一个**可用数据行作为关联数组、数值数组或两者（默认）返​​回。

由我强调。

> 返回值：成功时返回一个数组，如果没有更多行要返回，则返回 NULL，如果发生错误，则返回 FALSE。

您需要执行一个 while 循环来获取所有记录，如下所示：

```
while ($row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC )) {
    //process $row
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:27:17.530

我的印象是`fetch_array`一次只检索一行（一行是下一行）......尝试类似......

```
while($row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC );){ 

//do something awesome 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T14:48:07.470

一个简单的方法是使用 sqlsrv_fetch_array 并使用多维数组来存储每一行​​数据。但是这样做时请确保使用 $i++ 而不是 $i += 1 如果我们使用 $i +=1 则只保存单行。

```
 $i = 0;
   while( $row = sqlsrv_fetch_array( $query, SQLSRV_FETCH_ASSOC )) {
        $result[$i][0] = $row['id'];
        $result[$i][1] = $row['description'];

        $i++;    //works 
       // $i += 1; //does not work with this !
    }
var_dump($result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T14:07:51.890

这段代码终于为我服务了感谢“Ashish”。我不明白为什么它没有被赞成。

```
$Result = array();
$sql  = "EXEC CRM_TestSP;";
$stmt = sqlsrv_query( $conn, $sql );
if( $stmt === false) {
    die( print_r( sqlsrv_errors(), true) );
}

$i = 0;
while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {
    $Result[$i]["Description"] = $row['Description'];
    $i++;
}

sqlsrv_free_stmt($stmt);
return $Result; 
```

它返回一个像这样的数组：

```
array(2) { [0]=> array(1) { ["Description"]=> string(4) "Text 1" } [1]=> array(1) { ["Description"]=> string(4) "Text2" } } 1 
```

这正是我正在寻找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-11T06:30:30.443

```
$sql  = "SELECT id, description FROM dbo.tbl";
$stmt = sqlsrv_query( $conn, $sql );
if( $stmt === false) {
    die( print_r( sqlsrv_errors(), true) );
}
$data = array();
while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {
    $data[] = array(
                "description" => $row['description']
                );  
}

return $data; 
```

# windows-runtime - 我可以在 WinRT 中对已部署的应用程序包运行单元测试吗？

> ID：16155074
> 
> 赞同：2
> 
> 时间：2013-04-22T19:23:08.120
> 
> 标签：windows-runtime, microsoft-metro, windows-store-apps, winrt-xaml, dotfuscator

这个问题几乎解释了它。我们有一个 WinRT (Metro) 应用程序包，我们在每次构建后都使用 Dotfuscator 对其进行混淆。由于 Dotfuscator 重命名的方式，我们现在需要手动重命名我们从代码隐藏中按名称调用的任何控件。如果我们不这样做，我们会得到一个 NullReferenceException。这有点烦人，但我们已经成功地跟上了它并捕获了所有这种情况，但这非常耗时，而且我们总是有机会错过一个。

我想做的是能够创建一些单元测试来测试我创建的视图中的事件功能，但这只有在我可以在混淆版本中完成时才有效。我知道我们可以调试已部署的应用程序包，甚至可以调试混淆的应用程序包（因为我们在项目中有 .pdb 文件）。

如果有人对此或 Dotfuscator 有任何经验并且知道这样做的更好方法，我很想得到一些意见。从理论上讲，我还可以创建一个读取我们当前的“参考”Dotfuscator 项目的测试，并将其与代码隐藏中的所有命名控件进行比较，但这似乎是一个要编写的测试的恶魔，我不期待不得不这样做完全解析代码隐藏。它可能像在整个 XAML 文档中搜索 [x:Name"*"] 属性一样简单（对于简单的不同定义），然后在后面的代码和 Dotfuscator 项目文档中搜索加星标的值，幸好只是 XML。

您可以在这方面提供的任何帮助将不胜感激。我已经在 PreEmptive 支持论坛上创建了一个主题。我正在使用 Dotfuscator Professional（不是 App Store 版本），并且已更新到最新版本 4.10。

*编辑 25/4/13 所以最后，虽然@ianschol 的建议很有帮助，但现在我实现了上面概述的解决方案：-
枚举控件的字段
-确定哪些字段是属性，哪些是命名控件-读
入.xaml.cs
- 查找名称引用的所有字段，保存它们

> 注意：然后我使用了一些正则表达式来过滤掉 .cs 文件本身中声明的字段，因为它们是不必要的。

- 读入 Dotfuscator 项目文件
-Parse Descendants。如果控件的名称出现在引用列表中，则断言它有一个具有给定名称属性的后代元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:26:38.000

解决您的问题的最有效和可重用的技术可能是编写一个帮助程序类来处理读取属性名称映射，并提供一个“GetProperty”方法供您的单元测试使用。这样，如果混淆名称失败，您可以封装尝试非混淆名称的回退行为，从而省去担心是否打开属性名称混淆的麻烦。目前没有 PreEmptive 构建的解决方案或工具来执行翻译，但构建起来应该很简单。

或者，您可以设置一个不会在 Dotfuscator 中混淆属性名称的构建，并将其用于测试。就个人而言，我觉得辅助对象更易于使用，但它也在您的代码库中引入了构建系统工件。

# java - OpenGL ES 2.0 vbo 白屏

> ID：16155079
> 
> 赞同：2
> 
> 时间：2013-04-22T19:23:28.710
> 
> 标签：java, android, opengl-es, opengl-es-2.0, vbo

我一直在尝试让我的游戏引擎在 android 上运行，但我陷入了顶点缓冲区数组。它使用 FloatBuffer 工作，但是当我尝试使用 VBO 进行渲染时，我只得到一个白屏。所以我想知道我的代码是否有问题。

这就是我创建 VBO 的方式：

```
private int[] vbo = new int[1];
private int[] ibo = new int[1];

private void setUpVBO()
{
    short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices
    float TextureCoords[] = 
    { 
    0.0f, 0.0f,   // bottom left
    0.0f, 1.0f,   // top left
    1.0f, 1.0f, // top right
    1.0f, 0.0f,   // bottom right
    };
    float squareCoords[] = { 
                -width / 2.f - 0.015f / 2.f,  height / 2.f + 0.015f / 2.f, 0.0f,   // top left
                -width / 2.f - 0.015f / 2.f, -height / 2.f - 0.015f / 2.f, 0.0f,   // bottom left
                 width / 2.f + 0.015f / 2.f, -height / 2.f - 0.015f / 2.f, 0.0f,   // bottom right
                 width / 2.f + 0.015f / 2.f,  height / 2.f + 0.015f / 2.f, 0.0f }; // top right
        ByteBuffer bb = ByteBuffer.allocateDirect(bb.order(ByteOrder.nativeOrder());
        bb.order(ByteOrder.nativeOrder());
        FloatBuffer vertexBuffer = bb.asFloatBuffer();
        vertexBuffer.put(squareCoords);
        vertexBuffer.position(0);

        // initialize vertex byte buffer for shape coordinates
        ByteBuffer tc = ByteBuffer.allocateDirect(TextureCoords.length * 4);
        tc.order(ByteOrder.nativeOrder());
        FloatBuffer TextureCoordinateBuffer = tc.asFloatBuffer();
        TextureCoordinateBuffer.put(TextureCoords);
        TextureCoordinateBuffer.position(0);

        // initialize byte buffer for the draw list
        ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2);
        dlb.order(ByteOrder.nativeOrder());
        ShortBuffer drawListBuffer = dlb.asShortBuffer();
        drawListBuffer.put(drawOrder);
        drawListBuffer.position(0);

        GLES20.glGenBuffers(1, vbo, 0);
        GLES20.glGenBuffers(1, ibo, 0);

        if (vbo[0] > 0 && ibo[0] > 0) 
        {
            GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbo[0]);
            GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, vertexBuffer.capacity() * 4,
                    vertexBuffer, GLES20.GL_STATIC_DRAW);

            GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbo[0]);
            GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, TextureCoordinateBuffer.capacity() * 4,
                    TextureCoordinateBuffer, GLES20.GL_DYNAMIC_DRAW);

            GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, ibo[0]);
            GLES20.glBufferData(GLES20.GL_ELEMENT_ARRAY_BUFFER, drawListBuffer.capacity()
                    * 2, drawListBuffer, GLES20.GL_STATIC_DRAW);

            GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
            GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);
    }
} 
```

这就是我渲染的方式：

```
public void render(float[] mMVPMatrix) 
{       
    if (vbo[0] > 0 && ibo[0] > 0) 
    {
        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbo[0]);

        GLES20.glEnableVertexAttribArray(Values.mPositionHandle);
        GLES20.glVertexAttribPointer(Values.mPositionHandle, Values.COORDS_PER_VERTEX,
                GLES20.GL_FLOAT, false,
                Values.fullStride, 0);

        GLES20.glEnableVertexAttribArray(Values.mTextureCoordinateHandle);
        GLES20.glVertexAttribPointer(Values.mTextureCoordinateHandle, Values.COORDS_PER_VERTEX_TEXTURE, 
                GLES20.GL_FLOAT, false,
                Values.fullStride, 0);

        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureOfBody); 
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_REPEAT);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_REPEAT);
        GLES20.glUniform1i(Values.mTheActualTexture, 0);

    GLES20.glUniform4fv(Values.mColorHandle, 1, colorOfBody, 0);

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv(Values.mMVPMatrixHandle, 1, false, mMVPMatrix, 0);

        // Draw the square
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, ibo[0]);
        GLES20.glDrawElements(GLES20.GL_TRIANGLE_STRIP, drawOrder.length, GLES20.GL_UNSIGNED_SHORT, 0);

        // Disable vertex array
        GLES20.glDisableVertexAttribArray(Values.mTextureCoordinateHandle);
        GLES20.glDisableVertexAttribArray(Values.mPositionHandle);

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);
    }
} 
```

着色器已正确加载。这是我的着色器：

顶点：

```
 uniform mat4 uMVPMatrix;
    attribute vec4 vPosition;
    attribute vec2 TexCoordinate;
    varying vec2 TexCoordinateGLFS;

    void main()
    {
        TexCoordinateGLFS = TexCoordinate;

        gl_Position = uMVPMatrix * newPosition ;
    } 
```

分段：

```
 precision mediump float;
    uniform sampler2D theActualTexture;
    uniform vec4 vColor;
    varying vec2 TexCoordinateGLFS;

    void main() 
    {
        gl_FragColor = texture2D(theActualTexture, TexCoordinateGLFS) * vColor;
    } 
```

一些变量：

```
public static final int COORDS_PER_VERTEX = 3;
public static final int COORDS_PER_VERTEX_TEXTURE = 2;

public static final int vertexStride = COORDS_PER_VERTEX * 4;
public static final int textureStride = COORDS_PER_VERTEX_TEXTURE * 4;
public static final int fullStride = (COORDS_PER_VERTEX + COORDS_PER_VERTEX_TEXTURE) * 4; 
```

编辑：这是新的 VBO 构造：

```
 ByteBuffer bb = ByteBuffer.allocateDirect((squareCoords.length + TextureCoords.length) * 4);
        bb.order(ByteOrder.nativeOrder());
        vertexBuffer = bb.asFloatBuffer();
        vertexBuffer.put(squareCoords);
        vertexBuffer.put(TextureCoords);
        vertexBuffer.position(0);

GLES20.glGenBuffers(1, vbo, 0);
GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, vertexBuffer.capacity() * BYTES_PER_FLOAT,
                    vertexBuffer, GLES20.GL_DYNAMIC_DRAW); 
```

我在这里画：

```
 GLES20.glVertexAttribPointer(Values.mPositionHandle, Values.COORDS_PER_VERTEX,
                GLES20.GL_FLOAT, false,
                Values.vertexStride, 0);

        GLES20.glVertexAttribPointer(Values.mTextureCoordinateHandle, Values.COORDS_PER_VERTEX_TEXTURE, 
                GLES20.GL_FLOAT, false,
                Values.textureStride, squareCoords.length); 
```

squareCoords.length == 12; （每个顶点 3 个坐标（x，y，z）-> 4 * 3 = 12）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:27:56.353

从您发布的代码看来，您似乎用纹理坐标覆盖了您的位置坐标。通常，您需要与数组一样多的缓冲区，因此在您的情况下，您需要一个单独的纹理坐标缓冲区。更优雅的解决方案是将提到的 2 个数组合并为 1 个交错数组，将其推送到单个 VBO 并在设置顶点和纹理坐标指针时使用步幅。

这是完全不行的：

```
GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbo[0]);
GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, vertexBuffer.capacity() * 4, vertexBuffer, GLES20.GL_STATIC_DRAW);

GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbo[0]);
GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, TextureCoordinateBuffer.capacity() * 4, TextureCoordinateBuffer, GLES20.GL_DYNAMIC_DRAW); 
```

当您绑定相同的缓冲区两次并将数据推送到 GPU 时，最后剩下的就是纹理坐标（实际上，代码可能会根据您的矩阵在屏幕上的某处生成单个像素图像）

# .net - w3wp.exe（网络服务用户）阻止访问文件

> ID：16155081
> 
> 赞同：0
> 
> 时间：2013-04-22T19:23:48.113
> 
> 标签：.net, iis, w3wp

我有一个 Web 服务应用程序，它使用另一个保存和加载 xml 文件的应用程序。

对文件进行了 3 次访问后，无法再次访问该文件。如果我杀死属于 NETWORK SERVICE 用户的 w3wp.exe 进程，一切都会重新开始工作，但只有一次。

这是保存和加载 xml 文件的代码示例。

```
 public void saveXmlFile(string filename)
    {
        if (vsqlschema == null)
        {
            Console.WriteLine("Tried export data without schema");
            //TODO: Messagebox
            return;
        }
        FileStream fs = null;

        try
        {
            XmlSerializer serializer = new XmlSerializer(typeof(vsqlSchema));
            fs = new FileStream(filename, FileMode.Create, FileAccess.Write);
            serializer.Serialize(fs, vsqlschema);
        }
        catch (Exception e)
        {
            Console.WriteLine("IO Error: {0}", e.Message);
            //TODO: Messagebox
        }
        finally
        {
            if (fs != null)
            {
                fs.Close();
                fs.Dispose();
            }
        }
    }

    public XmlDocument loadXml(string filename)
    {
        //XmlReaderSettings xrs = new XmlReaderSettings();
        //xrs.XmlResolver = null;
        //xrs.DtdProcessing = DtdProcessing.Ignore;
        XmlDocument xdoc = new XmlDocument();
        try
        {
            //using (StringReader sr = new StringReader(filename))
            //using (XmlReader reader = XmlReader.Create(sr, xrs))
            using (XmlTextReader reader = new XmlTextReader(filename)){
                xdoc.Load(reader);  

                    reader.Close();

            }   

        }
        catch (XmlException xe)
        {
            errors.Add(string.Format("Line: {0}, Position: {1}::: {2}", xe.LineNumber, xe.LinePosition, xe.Message));
        }

        return xdoc;
    } 
```

任何想法发生了什么以及可以解决这个问题的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:32:45.850

访问该文件似乎存在竞争条件。您应该锁定文件以进行写入，并允许其他人在读取时对其进行修改。

为了实现这一点，您还需要对 FileStream 类构造函数进行细粒度控制，为每种情况指定正确的参数，以允许或不允许在读取 System.IO.FileShare 枚举值时修改文件。

[http://msdn.microsoft.com/en-us/library/cssfs8c4.aspx](http://msdn.microsoft.com/en-us/library/cssfs8c4.aspx)

[http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)

我不知道这是否完全有必要，但我也喜欢在 Close() 之前调用 Stream.Flush()

# batch-file - 一个批处理文件 - 多个命令 - 无需等待

> ID：16155083
> 
> 赞同：0
> 
> 时间：2013-04-22T19:23:51.297
> 
> 标签：batch-file, multiple-instances

我真的看过这里的多个示例，但我无法让它工作 - 所有示例都有这样一种情况，您只需调用一个实际结束的命令，我需要保持我的运行。这是我需要做的。

要配置网络设备，我可以使用`arp`命令和 ping 命令来配置，但这些都需要在同一个命令提示符下执行，但每个设备都需要在自己的窗口中。

我需要运行`arp -s 192.168.5.5 00-CC-CC-CC-CC-CC`，完成后，我需要运行`ping -l 408 -t 192.168.5.5`. 这两个命令必须在同一个命令窗口中运行。我想同时打开其中的 30 个，在该特定窗口中解析和 ping 相同的地址，但在每个其他窗口中使用不同的地址（我希望这是有道理的）。

现在，我可以让它运行，但它会等待第一个命令完成，然后再开始第二个。我用过`START`，但这也不起作用。

是的，我想我可以创建 30 个不同的批处理文件，但这会破坏对象，因为我需要配置 500 多个设备，因此创建 500 个批处理文件需要同样长的时间；除非批处理文件可以为我创建所有必需的批处理文件？

所以，我有一个 excel 电子表格，可以在批处理文件中创建我需要的所有行，我希望使用它：

```
start cmd.exe /K arp -s 192.168.5.5 00-40-8C-D4-FB-BC && ping -l 408 -t 192.168.5.5   
start cmd.exe /K arp -s 192.168.5.6 00-40-8C-D4-F9-A9 && ping -l 408 -t 192.168.5.6    
start cmd.exe /K arp -s 192.168.5.7 00-40-8C-D4-FB-F6 && ping -l 408 -t 192.168.5.7    
start cmd.exe /K arp -s 192.168.5.8 00-40-8C-D4-FC-70 && ping -l 408 -t 192.168.5.8  
start cmd.exe /K arp -s 192.168.5.9 00-40-8C-D4-FB-F4 && ping -l 408 -t 192.168.5.9
start cmd.exe /K arp -s 192.168.5.10 00-40-8C-D4-FB-F8 && ping -l 408 -t 192.168.5.10 
```

所以使用上面的，只有第一个命令实际运行。如果我将它设置为 ping 只说 300 次，它会切换到下一个，但这会再次破坏对象，因为我需要一次执行 30 个设备，因此等待每个设备先完成将永远需要。

也许我在这里完全走错了路，也许有人有更好的主意？请记住，上述每个命令都必须在其自己的命令提示符窗口中运行，否则如果您尝试同时执行太多命令，arp 命令将失败。

为了清楚起见，我需要运行 arp 命令，完成后运行 ping 命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:45:16.677

你需要逃避你的 &&s，也许只需要 &:

```
start cmd.exe /K arp -s 192.168.5.5 00-40-8C-D4-FB-BC ^& ping -l 408 -t 192.168.5.5 
```

但是，在 cmd 中转义会很快变得棘手。我建议您使用所需的一切创建一个 DoPing.cmd：

```
arp -s %1 %2
ping -l 408 -t %1 
```

并从您生成的 cmd 调用它：

```
start cmd.exe /K DoPing.cmd 192.168.5.5 00-40-8C-D4-FB-BC 
```

当然，这意味着您需要将 DoPing.cmd 部署到您正在运行的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:54:42.437

假设您的数据以这种方式保存在文本文件中：

```
192.168.5.5 00-40-8C-D4-FB-BC
192.168.5.6 00-40-8C-D4-F9-A9
192.168.5.7 00-40-8C-D4-FB-F6
192.168.5.8 00-40-8C-D4-FC-70
192.168.5.9 00-40-8C-D4-FB-F4
192.168.5.10 00-40-8C-D4-FB-F8 
```

下面的批处理文件创建多个批处理文件，每个批处理文件都有所需的命令，然后启动它们。每个创建的批处理文件在完成其业务后都会自行删除。

```
@echo off
for /F "tokens=1,2" %%a in (theDataFile.txt) do (
   echo @echo off > %%b.bat
   echo arp -s %%a %%b >> %%b.bat
   echo ping -l 408 -t %%a >> %%b.bat
   echo del %%b.bat ^& exit >> %%b.bat
   start %%b.bat
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:39:25.950

尝试在整个论点周围引用引号，也可以使用 & 而不是 &&

例如

```
start cmd.exe /K "arp -s 192.168.5.5 00-40-8C-D4-FB-BC & ping -l 408 -t 192.168.5.5" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T02:53:03.913

问题是您需要引用传递给 CMD 的参数。您的原件是：

```
start cmd.exe /K arp -s 192.168.5.5 00-40-8C-D4-FB-BC && ping -l 408 -t 192.168.5.5 
```

此语法将启动 CMD 窗口并将 ARP 命令作为参数传递给该窗口，但不是 && ping 部分。相反，这被视为在 START 之后运行的命令。

为了纠正这个问题，我们可以添加引号，将 arp 和 ping 作为单个参数显式传递给 CMD。

```
start cmd.exe /K "arp -s 192.168.5.5 00-40-8C-D4-FB-BC && ping -l 408 -t 192.168.5.5" 
```

此外，[我看到它建议](http://ss64.com/nt/start.html)应该始终为启动命令提供一个标题，即使标题为空。所以....

```
start "" cmd.exe /K "arp -s 192.168.5.5 00-40-8C-D4-FB-BC && ping -l 408 -t 192.168.5.5" 
```

当然，您还有更多选择。&& 只有在第一个返回成功时才运行第二个命令。所以理论上 & 可以用来确保第二个命令总是运行。然后再一次，如果 arp 调用失败，则没有理由同时进行 ping 操作，因此 && 可以...

我假设您故意打开新的 CMD 窗口，以便您可以看到结果，但您始终可以使用 /c 而不是 /k 来自动关闭它们。

作为 /c 的注释。您在对另一个答案的回应中提到，点击 control+c 会杀死所有窗口。这是正常行为，但使用 /c 运行 CMD 应该使 control+c 仅适用于当前窗口。在另一个答案中更改以下行：

```
start %%b.bat 
```

到...

```
start cmd /c %%b.bat 
```

（或类似的东西）应该让您在循环产生的各个窗口中使用 CTRL+C。

# fonts - HDMI 标志上使用的字体是什么？

> ID：16155084
> 
> 赞同：-2
> 
> 时间：2013-04-22T19:23:57.003
> 
> 标签：fonts

有谁知道HDMI标志上使用的是什么字体？ [http://commons.wikimedia.org/wiki/File:HDMI_Logo.svg](http://commons.wikimedia.org/wiki/File:HDMI_Logo.svg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:30:28.927

我认为您正在寻找的答案称为“武装直升机”..

使用 whatfontis.com 上的工具，它能够以类似的字体重新创建“HDMI”，而 Gunship 的答案似乎完美匹配：

![在此处输入图像描述](https://i.stack.imgur.com/guMiW.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:57:05.557

这可能不是此类事情的正确站点，因为我们不是在谈论用于制作字体的代码。

大多数著名的标志实际上不能用字体复制，而是从常规字体开始，然后被编辑为独一无二的，因此它们不能被轻易复制。要重建一个标志，有几个很酷的网站可以在字体和字体方面查找这种东西：

[What the Font](http://www.whatthefont.com/) - 让您通过上传该类型的图像来查找字体名称。

[Identifont](http://www.identifont.com/identify.html) - 让您直观地确定哪些属性适合您要查找的字体。

如果标志非常独特，那么就有可能以标志的风格制作字体（想想可口可乐）。

其他海报之一推荐了[Gunship](http://www.dafont.com/gunship.font?text=HDMI)，可在字体分发站点[dafont.com](http://www.dafont.com/)上找到它，该站点主要提供开源字体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T19:28:56.523

我猜这没有字体，但标志是艺术家设计的。。对于接近的东西，你可能会看[Porsche](http://www.ffonts.net/porsche.font)。这不准确，但字母具有相同的基本形状。

# java - 具有 Long、Int 或 String 等类型的 WeakHashMap

> ID：16155085
> 
> 赞同：3
> 
> 时间：2013-04-22T19:24:02.793
> 
> 标签：java, weak-references, weakhashmap

在对如何在 android 中传递对象引用进行一些研究时，我正在考虑以下问题。

假设我有一个带有 Long 作为键的 WeakHashmap。现在我将一个对象放入这个 WeakHashMap 并将其分配给键“new Long(1)”（假设我将保存对这个 Long 的引用）。

现在应用程序的另一部分创建了一个新的 Long(1)，然后我将我的第一个 Long（用作键）设置为 null。

1.  WeakHashMap 中的对象会发生什么？
2.  如果我将 Long 替换为具有 Long 成员的自己的 Class 并让它的 compare()-Method 返回 true，如果它与另一个相同类型的对象（我自己的类）在它的 Long 中具有相同的值。
3.  假设在这两种情况下 WeakReference 都被清除了。如果我在清除第一个密钥之前使用第二个创建的密钥访问 WeakHasMap 会有所不同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T19:38:09.410

当内存没有强引用时，弱引用将被垃圾回收。

现在，你的例子。这有点棘手。从[javadoc for 中`Long`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html)，该`valueOf`方法通过“缓存频繁请求的值”来提高性能。这意味着无论您使用`valueOf`还是，答案都会有所不同`new`。

在您的情况下，您使用的`new`每个`new Long(1)`都是不同的对象 - 即不同的参考。但这是需要牢记的 -`Integer`其他`Long`包装器类型通常由 JVM 缓存，可能不会像您在`WeakHashMap`. `String`s被实习，所以他们也有问题。

无论如何，回答你的问题：

1.  如果没有更多对您的原始引用，`Long`那么映射将在下一次机会时被 GC'ed。
2.  我想你在这里很困惑。A`HashMap`用于`hashcode`比较`equals`。A`TreeMap`使用`compareTo`. 在任何情况下都没有区别，这是关于引用而不是任何平等概念。如果没有更多对您的对象的强引用，则映射将被 GC'ed。
3.  不，它不会。正如我在 2\. 中所说 -`Map`检查`hashcode`密钥`equals`是否已经在`Map`. 这`Weak`部分是在谈论参考。两个对象可以是`equals`但不是`==`。

您可以使用 a[`PhantomReference`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/PhantomReference.html)来[跟踪您的密钥何时被 GC'ed](https://stackoverflow.com/questions/1227557/wait-for-garbage-collection-of-a-specific-object)。这可能会帮助您了解弱引用的工作原理。

# android-listview - ContextMenu 未在 ListView 长按上打开

> ID：16155086
> 
> 赞同：0
> 
> 时间：2013-04-22T19:24:03.717
> 
> 标签：android-listview, android-contextmenu

我曾经`AsyncTask`远程加载数据并将其存储到`ListView`. 视图加载到`onPostExecute()`. 我注册了`ListView`上下文菜单，但它不响应长点击事件。

这是活动：

```
public class BookmarkDeals extends ListActivity {

Context context;
ListActivity activity;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bookmark_deals);
    context = this;
    activity = this;
    getBookmarkDeals();
    this.registerForContextMenu(getListView());

}

private void getBookmarkDeals() {
    new GetBookmarkDealsTask(context, activity).execute(Constants.getBookmarkApi);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.bookmark_deals, menu);
    return true;
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
}
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo)item.getMenuInfo();
    int position = info.position;
    int id = item.getItemId();
    DealsListAdapter adapter = (DealsListAdapter) getListView().getAdapter();
    int dealCode = adapter.getItem(position).getDealCode();
    switch (id) {
    case R.id.con_delete:
        new UpdateBookmarkTask(context, activity).execute(String.valueOf(dealCode));
    }
    return false;
} 
```

}

...这是 AsyncTask 类：

```
public class GetBookmarkDealsTask extends AsyncTask<String, Integer, List<Deal>>{
Context context;
Editor editor;
SharedPreferences settings;
Editor settingsEditor;
private DealsListAdapter listAdapter;
private ListActivity activity;
private GoozHttpConnection httpConnection;
private ProgressDialog progressDialog;
private String status;
private String goozErrorMessage;

public GetBookmarkDealsTask(Context context, ListActivity activity) {
    this.context = context;
    this.activity = activity;
    settings = context.getSharedPreferences(Constants.SETTINGS_FILE_NAME,Context.MODE_PRIVATE);
    settingsEditor = settings.edit();
}

@Override
protected void onPreExecute() {
    progressDialog= ProgressDialog.show(activity, "Progress Dialog Title Text","Process Description Text", true);
}

@Override
protected List<Deal> doInBackground(String... urls) {
    httpConnection = new GoozHttpConnection(Constants.getBookmarkApi, activity); // **
    goozErrorMessage = httpConnection.getGoozErrorMessage();
    try {
        if(goozErrorMessage.equals(Constants.NO_CONNECTION)){
            return null;
        }
    } catch (Exception e2) {
        Log.e("goozErrorMessage", e2.getMessage());
    }
    JSONObject json = new JSONObject();
    httpConnection.AddParam(json);
    httpConnection.AddHeader("Content-type", "application/json"); // **

    try {
        httpConnection.Execute(RequestMethod.POST);
    } catch (Exception e) {
        e.printStackTrace();
    }
    String response = httpConnection.getResponse();
    String errorMessage = httpConnection.getErrorMessage();
    if (errorMessage.equalsIgnoreCase("OK")){
        try { 
            JSONObject responseObject = new JSONObject(response);
            status = (String)responseObject.get("Status");
            } catch (JSONException e) {
                e.printStackTrace();
        }

        if (goozErrorMessage.equals(Constants.NO_CONNECTION)) { // no connection.
            return null;
        }
        if (status.equalsIgnoreCase("Success")){ // connection fine and gooz api return success
            return saveToPreferences(response);
        }else { // connection fine and gooz api return error
            goozErrorMessage = httpConnection.getGoozErrorMessage();
            return null;
        }
    }else{
        return null;
    }
}

private List<Deal> saveToPreferences(String response) {
    List<Deal> deals = null;
    try {
        JSONObject responseObject = new JSONObject(response);

        String securityToken = (String)responseObject.get(Constants.SECURITY_TOKEN);
        settingsEditor.putString(Constants.SECURITY_TOKEN, securityToken).commit();         
        JSONArray results = responseObject.getJSONArray("Results");
        deals = new ArrayList<Deal>();
        for (int i = 0; i < results.length(); i++) { 
            JSONObject jDeal = results.getJSONObject(i);
            int dealCode = jDeal.getInt(Constants.DealCode);
            int rating = jDeal.getInt(Constants.Rating);
            int ourPick = jDeal.getInt(Constants.OurPick);
            String branchName = jDeal.getString(Constants.BranchName);
            String branchAdress = jDeal.getString(Constants.BranchAdress);
            String title = jDeal.getString(Constants.Title);
            int distance = jDeal.getInt(Constants.Distance);
            String endDateTime = jDeal.getJSONObject(Constants.Ending).getString(Constants.ExpirationDateTime);
            endDateTime = new GoozDateFormat(endDateTime, context).getDisplayDate();
            String smallImageUrl = jDeal.getString("SmallPhoto");
            deals.add(new Deal(dealCode, rating, ourPick, title, distance, branchName, smallImageUrl, branchAdress, endDateTime));

        }
    }catch (JSONException e) {
        e.printStackTrace();
    }
    return deals;

}
@Override
protected void onPostExecute(List<Deal> data) {
    if (data == null) {
        progressDialog.dismiss();
        Toast.makeText(activity, goozErrorMessage, Toast.LENGTH_SHORT).show();
    }else{
        listAdapter = new DealsListAdapter(context, data);
        activity.registerForContextMenu(activity.getListView());
        activity.setListAdapter(listAdapter);
        progressDialog.dismiss();
        for (Deal deal : data) {
            deal.loadImage(listAdapter);
        }

    }
}

@Override
protected void onProgressUpdate(Integer... progress) {

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:38:18.623

它不会打开，因为您的 onCreateContextMenu 是空的。你需要在那里创建你的菜单才能有一些东西。添加一个条目的示例：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:20:20.723

在覆盖方法 onContextItemSelected() 你返回 false 这就是你没有显示上下文菜单的原因。如果您想要显示上下文菜单而不是在此覆盖方法中返回 true。

# wordpress - 高级自定义字段 wordpress 插件不更新内容

> ID：16155087
> 
> 赞同：0
> 
> 时间：2013-04-22T19:24:08.767
> 
> 标签：wordpress

我在我的网站上使用高级自定义字段插件。我正在更新管理部分的内容，但它在前端和后端都显示了旧内容。它没有显示任何错误。我已经更新了插件，但错误仍然存​​在。

```
Plugin:Advance custom field  4.3
Wordpress : 3.5.1 
```

请让我知道我该如何解决？

谢谢。

# hibernate - 在持久化的 JPA 实体上实现通用搜索

> ID：16155088
> 
> 赞同：1
> 
> 时间：2013-04-22T19:24:13.770
> 
> 标签：hibernate, jakarta-ee, jpa, lucene, jpql

假设我们有一个`Foo`包含各种数据字段的实体，其中一个是`List<Bar>`. 反过来， Bar 具有各种数据字段，其中一个是`List<Snafu>`. 我们希望为用户提供一个输入字段，允许他们对持久的 Foo 记录进行通用搜索。例如，他们搜索`test`并找到一条 Foo 记录，该记录有一个 Bar，该 Bar 有一个 Snafu，其数据字段包含字符串“test”。

是否可以有效地进行这种搜索，还是需要不同的技术（例如 Lucene）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:58:43.000

是的，你应该看看使用 lucene。

hibernate-search 库（由 lucene 提供支持）非常容易在带有注释的实体上启动和运行，并且非常适合 hibernate 项目。

[http://www.hibernate.org/subprojects/search.html](http://www.hibernate.org/subprojects/search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:40:48.787

如果仅找出对 的引用就足够了`Foo`，则可以创建一个数据库视图，其中包含所有引用表中的记录。为这样的视图编写 SQL 将非常简单。

否则，您可以查看 Lucene（如 rhinds 指出的那样），但这意味着您必须将数据库数据复制到其他地方。另一方面，搜索会更强大（例如，Lucene 与 DB 不同，可以轻松处理拼写错误）。

# c# - 等待 IObservable 获取所有元素错误

> ID：16155094
> 
> 赞同：3
> 
> 时间：2013-04-22T19:24:24.983
> 
> 标签：c#, system.reactive, reactive-programming

我有这堂课：

```
public class TestService
{
     public IObservable<int> GetObservable(int max)
     {
         var subject = new Subject<int>();
         Task.Factory.StartNew(() =>
                               {
                                   for (int i = 0; i < max; i++)
                                   {
                                       subject.OnNext(i);
                                   }
                                   subject.OnCompleted();

                               });
         return subject;
     }
} 
```

我也为此编写了一个测试方法：

```
[TestMethod]
public void TestServiceTest1()
{
   var testService = new TestService();
   var i = 0;
   var observable = testService.GetObservable(3);
   observable.Subscribe(_ =>
   {
      i++;
   });          
   observable.Wait();
   Assert.AreEqual(i, 3);
} 
```

但有时我会收到错误消息：**序列**在方法 Wait() 中不包含任何元素。

我建议在测试到达*observable.Wait()*行之前完成我的 IObservable。我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:43:45.547

在我看来，这段代码的基本问题是 an`IObservable` **代表了如何观察某事的契约。**

在这种情况下，该`GetObservable`方法不仅仅是返回一个合同，而是立即执行工作（使用 TPL）。如果您认为您可以多次订阅同一个`IObservable`实例（这实际上发生在示例代码中，因为您是第一次订阅`Subscribe`和另一次订阅`Wait`），这没有意义。*这个区别是我学习 Rx 的最大绊脚石。*

我会改为实现这样的方法（并完全避免使用`Subject<>`，因为它不是创建 Observable 的首选方式）：

```
public class TestService
{
     public IObservable<int> GetObservable(int max)
     {
         return Observable.Create<int>((IObserver<int> observer) =>
                               {
                                   for (int i = 0; i < max; i++)
                                   {
                                       observer.OnNext(i);
                                   }
                                   observer.OnCompleted();
                               });
     }
} 
```

还有一些有趣的覆盖可以`Observable.Create`提供更大的灵活性。

# postgresql - Postgres：如何在数据库启动后立即启动程序？

> ID：16155096
> 
> 赞同：2
> 
> 时间：2013-04-22T19:24:32.573
> 
> 标签：postgresql

我有几十个未记录的表，文档说未记录的表在崩溃或不干净的关闭后会自动截断。

基于此，我需要在数据库开始后检查一些表以查看它们是否“空”并对其进行处理。

所以简而言之，我需要在数据库启动后立即执行一个过程。

如何做到最好？

PS：我在 Ubuntu 12.04 服务器上运行 Postgres 9.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:16:58.280

没有这样的功能可用（在撰写本文时，最新版本是 PostgreSQL 9.2）。您唯一的选择是：

*   从 PostgreSQL 初始化脚本启动一个轮询数据库的脚本，当数据库准备好时锁定表并填充它们；

*   修改启动脚本以使用`pg_ctl start -w`并在`pg_ctl`返回后立即调用您的脚本；这具有相同的竞争条件，但避免了轮询的需要。

*   指导您的应用程序在打开新的池连接时运行测试，以检测这种情况、锁定表并填充它们；或者

*   如果您的应用程序在打开新连接时无法处理它们为空的情况，请不要为此任务使用未记录的表

已经讨论了 pgsql-hackers 上的连接时间钩子，但没有发布和合并任何可行的实现。

您可以使用 PostgreSQL bgworkers 执行类似的操作，但这比简单地从脚本轮询数据库要困难得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-29T00:09:09.380

Postgres 现在`pg_isready`可以确定数据库是否准备就绪。 [https://www.postgresql.org/docs/11/app-pg-isready.html](https://www.postgresql.org/docs/11/app-pg-isready.html)

# javascript - 尝试使用 ajax 上传文件时，CSRF 保护总是失败

> ID：16155097
> 
> 赞同：1
> 
> 时间：2013-04-22T19:24:36.590
> 
> 标签：javascript, jquery, django, django-csrf, jqxhr

几天前我得知[我们可以使用 ajax 进行文件上传](https://stackoverflow.com/a/2320097/842622)。所以我尝试构建一个应用程序，当用户填写表单的其他部分时上传所选文件。

我的应用有两个模型：

```
class Post(models.Model):
    image = models.ImageField(...)
    title = ...
    desc = ...

class TempImg(models.Model):
    image = models.ImageField(...)
    posted_by = ...
    posted_at = ... 
```

该表格用于发帖，在这里您可以看到 temp_image 作为隐藏输入：

```
class PostForm(forms.ModelForm):
    temp_image = forms.IntegerField(widget=forms.HiddenInput)
    class Meta:
        model = Post 
```

当用户选择图像时，此 javascript 代码将其上传并将返回的 id 值放入表单的 temp_image 字段：

```
// here is a function that gets csrftoken, [which is taken from docs
// https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax

csrftoken = ...

form = new FormData();
form.append("image", dataURLToBlob(resizedImgData));
form.append("csrftoken", csrftoken)

$.ajax({
    url: '/upload/',
    data: form,
    processData: false,
    contentType: false,
    dataType: 'json',
    type: 'POST',
    beforeSend: function() {
        $("#uploadingIndicator").show()
    },
    success: function(data){
        $("#id_temp_image").val(data['id'])
        $("#uploadingIndicator").hide();
    }
}); 
```

对我来说一切似乎都很好，但是有一个问题是我的视图总是返回 403。CSRF 验证错误。

谁能知道我应该在哪里看？如果找不到解决方案，我将使用 csrf_exemt ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:09:52.073

你应该使用

```
form.append("csrfmiddlewaretoken", csrftoken) 
```

当你试图做`form.append("csrftoken", csrftoken)`

# python - 如何使用 python 读取 xml 标头/版本

> ID：16155102
> 
> 赞同：1
> 
> 时间：2013-04-22T19:24:48.747
> 
> 标签：python, xml, sax

我正在寻找一种在 python 中使用 xml.sax 解析器读取 XML 版本标头的方法。

```
**<?xml version="1.0"?>**
<root>
  <child>Hello</child>
  <child2>World</child>
</root> 
```

到目前为止，每当我尝试读取 XML 时，它似乎只是跳过了标题并转到了根节点。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:33:03.403

我不确定这在您的 SAX 版本中是否可用，但获得它的方法是通过`Locator2`.

[http://sax.sourceforge.net/apidoc/org/xml/sax/ext/Locator2.html](http://sax.sourceforge.net/apidoc/org/xml/sax/ext/Locator2.html)

# java - java图形gouraud着色

> ID：16155110
> 
> 赞同：0
> 
> 时间：2013-04-22T19:25:23.777
> 
> 标签：java, graphics

我想用 gouraud 阴影填充三角形我计算了每个顶点的法线并使用了以下代码，但它不能正常工作我使用这些公式对 y 插值颜色

```
 Ir = Ir2 - (Ir2 - Ir1)* (v2.y -y)/dy;
  Ig = Ig2 - (Ig2 - Ig1)* (v2.y -y)/dy;
  Ib = Ib2 - (Ib2 - Ib1)* (v2.y -y)/dy; 
```

并在 x 方向使用

```
 rr =  r2- (r2-r1)*(Xs2-j)/dxs; 
```

在方法 drawCurrentTriangle(Graphics2D g) 我如何从插值顶点法线计算颜色。（场景中没有灯光（只有三角形颜色））

```
public boolean convert(Triangle triangle) {

    ensureCapacity();
    clearCurrentScan();

    triangle.getVlist()[0].r = triangle.normals[0].x;
    triangle.getVlist()[0].g = triangle.normals[0].y;
    triangle.getVlist()[0].b = triangle.normals[0].z;
    triangle.getVlist()[1].r = triangle.normals[1].x;
    triangle.getVlist()[1].g = triangle.normals[1].y;
    triangle.getVlist()[1].b = triangle.normals[1].z;
    triangle.getVlist()[2].r = triangle.normals[2].x;
    triangle.getVlist()[2].g = triangle.normals[2].y;
    triangle.getVlist()[2].b = triangle.normals[2].z;
    for (int i = 0; i < 3; i++) {
        Vector3d v1 = triangle.getVlist()[i];
        Vector3d v2;
        if (i == 2) {
            v2 = triangle.getVlist()[0];
        } else {
            v2 = triangle.getVlist()[i + 1];
        }

        // ensure v1.y < v2.y
        if (v1.y > v2.y) {
            Vector3d temp = v1;
            v1 = v2;
            v2 = temp;
        }
        double dy = v2.y - v1.y;

        Ir1 = v1.r;
        Ig1 = v1.g;
        Ib1 = v1.b;
        Ir2 = v2.r;
        Ig2 = v2.g;
        Ib2 = v2.b;

        // ignore horizontal lines
        if (dy == 0) {
            continue;
        }

        int startY = Math.max(FastMath.ceil(v1.y), minY);
        int endY = Math.min(FastMath.ceil(v2.y) - 1, maxY);
        top = Math.min(top, startY);
        bottom = Math.max(bottom, endY);
        double dx = v2.x - v1.x;

        double Ir;
        double Ig;
        double Ib;
        double Ic;
        double Ia;
        double Yc;
        // special case: vertical line
        if (dx == 0) {
            int x = FastMath.ceil(v1.x);
            // ensure x within view bounds

            x = Math.min(maxX + 1, Math.max(x, minX));
            for (int y = startY; y <= endY; y++) {
                Ir = Ir2 - (Ir2 - Ir1)* (v2.y -y)/dy;
                Ig = Ig2 - (Ig2 - Ig1)* (v2.y -y)/dy;
                Ib = Ib2 - (Ib2 - Ib1)* (v2.y -y)/dy;

                scans[y].setBoundary(x, Ir, Ig, Ib);
            }
        } else {
            // scan-convert this edge (line equation)
            double gradient = dx / dy;

            // (slower version)
            for (int y = startY; y <= endY; y++) {
                int x = FastMath.ceil(v1.x + (y - v1.y) * gradient);
                // ensure x within view bounds
                x = Math.min(maxX + 1, Math.max(x, minX));
                Ir = Ir2 - (Ir2 - Ir1)* (v2.y -y)/dy;
                Ig = Ig2 - (Ig2 - Ig1)* (v2.y -y)/dy;
                Ib = Ib2 - (Ib2 - Ib1)* (v2.y -y)/dy;
                scans[y].setBoundary(x, Ir, Ig, Ib);
            }

            // check if visible (any valid scans)
            for (int i = top; i <= bottom; i++) {
                if (scans[i].isValid()) {
                    return true;
                }
            }
            return false;

        }
    }
}

protected void drawCurrentTriangle(Graphics2D g) {
    int y = scanConverter.getTopBoundary();
    double Xs1 = 0;
    double Xs2 = 0;
    double dxs = 0;
    double r1 = 0;
    double g1 = 0;
    double b1 = 0;
    double r2 = 0;
    double g2 = 0;
    double b2 = 0;
    double rr = 0;
    double gg = 0;
    double bb = 0;
    while (y <= scanConverter.getBottomBoundary()) {
        GouraudTriangleScanConverter.Scan scan = scanConverter.getScan(y);
        if (scan.isValid()) {

            r1 = scan.rL;
            g1 = scan.gL;
            b1 = scan.bL;

            r2 = scan.rR;
            g2 = scan.gR;
            b2 = scan.bR;

            Xs1 = scan.left;
            Xs2 = scan.right;
            dxs = Xs2-Xs1;

            for (int j = scan.left; j < scan.right; j++) {

                rr =  r2- (r2-r1)*(Xs2-j)/dxs;
                gg = g2- (g2-g1)*(Xs2-j)/dxs;
                bb = b2- (b2-b1)*(Xs2-j)/dxs;

                if(rr > 255) rr = 255;
                if(gg > 255) gg = 255;
                if(bb > 255) bb = 255;
                g.setColor(new Color((int)rr, (int)gg, (int)bb));
                g.drawLine(j,y,j,y);
            }
            //g.drawLine(scan.right,y,scan.right,y);
        }
        y++;
    }

}

public static class Scan {
    public int left;
    public int right;
    public double rL = -1;
    public double gL = -1;
    public double bL = -1;
    public double rR = -1;
    public double gR = -1;
    public double bR = -1;

    /**
     * Sets the left and right boundary for this scan if
     * the x value is outside the current boundary.
     */
    public void setBoundary(int x, double r, double g, double b) {
        if (x > max)
            max = x;

        if (x < left) {
            left = x;
            rL = r;
            gL = g;
            bL = b;
        }
        if (x - 1 > right) {
            right = x - 1;
            rR = r;
            gR = g;
            bR = b;
        }

    }

    /**
    * Determines if this scan is valid (if left <= right).
    */
    public boolean isValid() {
        return (left <= right);
    }

} 
```

我如何将颜色应用于网格。当我修复颜色时（没有照明）

# networking - 在 tcpdump 中添加新的标头解析

> ID：16155112
> 
> 赞同：0
> 
> 时间：2013-04-22T19:25:39.580
> 
> 标签：networking, embedded, tcpdump

我有必要添加对我们设计中的 FPGA 在 MAC 头和有效负载之间的传入以太网帧中插入的专有头的支持。显然必须挖掘 tcpdump 源代码和 libpcap，但是任何人都可以给出一些关于从哪里开始的提示，以便我可以节省时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:54:09.580

您需要做的第一件事是为您的专有标头获取`DLT_`/`LINKTYPE_`值。请参阅tcpdump.org 网站上[的链接层标头类型页面](http://www.tcpdump.org/linktypes.html)，了解现有的 DLT_/LINKTYPE_ 链接层标头类型值以及有关如何在内部使用`DLT_USER`*n 个*值之一或获取分配的新值（如果您打算让组织以外的人使用它。

一旦你分配了值，你就必须在 libpcap 上做一些工作：

如果您被分配了一个`DLT_`值，则必须修改`pcap/pcap.h`文件以添加该链接层类型（并更改该`DLT_MATCHING_MAX`头文件和`LINKTYPE_MATCHING_MAX`中的值`pcap-common.c`，以便它们> =您的`DLT_`值），或等待tcpdump.org 的任何人（可能是我）分配您的`DLT_`值并更新 libpcap Git 存储库（此时您可以使用 top-of-trunk libpcap）。

如果您打算进行实时捕获，您可能需要向 libpcap 添加一个模块以支持硬件上的实时捕获，或者，如果您的设备看起来像操作系统的常规网络设备，以便您可以使用其本机捕获机制，修改该操作系统的模块以将操作系统使用的任何链路层标头类型值（例如，`DLT_`*BSD/OS X 上的`ARPHRD_`值或 Linux 上的值）映射到`DLT_`您用于链路层标头类型的任何值。

您必须进行修改`gencode.c`才能为您的`DLT_`值编译捕获过滤器。

完成后，libpcap 现在应该可以工作了。

现在，对于 tcpdump：

添加一个`if_print`处理专有标头的例程（无论是跳过它们还是为它们打印内容），调用`ether_print()`，然后返回专有标头和以太网标头的长度之和（`ETHER_HDRLEN`如 定义`ether.h`）。参见示例`ether_if_print()`。`print-ether.c`

将该例程的声明添加到`interface.h`and `netdissect.h`，并为它添加一个条目，带有例程名称 and `DLT_`，`ndo_printers[]`如果你复制`ether_if_print()`（你应该）或者`printers[]`如果你没有（如果你没有，你将不得不`&gndo`作为第一个参数传递给`ether_print()`)。这些数组在`tcpdump.c`.

# sql - SQL 查询请求参数

> ID：16155113
> 
> 赞同：0
> 
> 时间：2013-04-22T19:25:42.717
> 
> 标签：sql, ms-access, parameters

这是我的查询

```
SELECT (100.0 * count(char_copilot) / count(*)) AS [%CoPilot]
FROM charter; 
```

我试图计算有 copliot 的包机数量。

当我在访问中运行查询时，它会询问参数。

为什么要这样做？

![我正在使用的表](https://i.stack.imgur.com/izUOp.png)

![在此处输入图像描述](https://i.stack.imgur.com/jJQ3j.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:51:54.403

`%``LIKE`是用于与SQL 语句中的 claue进行比较的运算符。
我认为，这可能是`[%CoPilot]`问题所在。尝试使用`[PercentageCoPilot]`.

# jquery - 有没有办法使用 CSS 向后工作

> ID：16155115
> 
> 赞同：1
> 
> 时间：2013-04-22T19:25:44.707
> 
> 标签：jquery, html, css, border, hyperlink

我想知道是否有办法在 CSS 中向后工作。我的意思是说我在 div 标签周围有一个边框，然后在该 div 标签内是一个具有悬停功能的链接。有没有办法在该链接悬停时更改 div 标签上的边框颜色，或者这只能使用 jquery 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:37:02.580

当下一个 CSS 选择器规范准备好并由浏览器实现时，这将成为可能。然后就可以写出类似的东西：

```
!div a:hover { border-color: red; } 
```

当前的工作草案提案在这里：[http ://www.w3.org/TR/2012/WD-selectors4-20120823/#subject](http://www.w3.org/TR/2012/WD-selectors4-20120823/#subject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:31:50.307

有点可能。这是一个例子：http: [//jsfiddle.net/hL3Ta/](http://jsfiddle.net/hL3Ta/)

```
<div>
    <a href="#">Some link</a>
</div> 
```

..

```
div {
    display: inline-block;
    border:5px solid black;
}
div:hover {
    border: 5px solid red;
}

a {
    display: inline-block;
    width: 100px;
    height: 100px;
} 
```

正如其他答案中提到的，块模型的性质目前不允许选择器反向操作。纯 CSS 解决方法是在将尺寸作为嵌套目标的容器上使用伪元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:29:07.783

您可以使整个 div 悬停：

```
.outer-class:hover {
  border-color: some-color;
} 
```

而`outer-class`div 的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:30:04.410

你的问题的答案是：不，没有这样的方法。使用 jQuery 来实现这一点还是有点过头了，我不建议这样做。相反，重构您的标记并记住您可以访问伪类 (:hover) 不仅用于链接（我们支持 IE6 的日子已经结束，甚至 IE7 也支持 :hover 任意元素 iirc），因此您可以简单地执行以下操作：

```
div:hover {
    border-color:green;
} 
```

# sql-server - 删除 Excel 文件中的唯一行

> ID：16155118
> 
> 赞同：0
> 
> 时间：2013-04-22T19:25:53.640
> 
> 标签：sql-server, excel, unique, rows

我被问到一件很奇怪的事情，尽管我猜这很简单。从 Excel 文件中删除唯一行，只保留重复项。有没有简单的方法可以做到这一点？所有选项都非常受欢迎，例如将 excel 文件加载到 Sql-Server 并对其应用选择！！！提前很多 M.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:47:17.037

此 sql 查询仅返回重复的行

```
select column1, column2, column3, ...
from Table1
group by column1, column2, column3, ...
having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:53:24.173

假设 A2 到 A11 中的数据，在 B2 中输入并复制下来：

```
=COUNTIF($A$2:$A$11,A2)=1 
```

![在此处输入图像描述](https://i.stack.imgur.com/0LP3K.png)

然后将 B 列过滤为 TRUE 并删除这些行。

# sql - 事务回滚时如何保留身份？

> ID：16155124
> 
> 赞同：1
> 
> 时间：2013-04-22T19:26:16.270
> 
> 标签：sql, sql-server-2008

假设我在一个表上有 ID 列并且最大 ID 值为 100。然后我在事务中在该表中插入 50 行，最大 ID 将为 150。但事务被回滚。但下一个 ID 值为 151 ,not 101。表示回滚事务时最大ID值不回滚。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:38:14.853

这就是 IDENTITY 列的工作方式，并且非常符合设计要求。原因是值被分发但没有回滚以提高效率。如果您必须为每个分配了标识值的事务锁定整个表，那么您绝对会扼杀并发性和性能。老实说，您不应该关心差距，因为您无法使用 IDENTITY 列来阻止它们。有一些变通方法，但它们也会扼杀并发性和性能。

# java - 将元素添加到列表末尾

> ID：16155126
> 
> 赞同：-2
> 
> 时间：2013-04-22T19:26:33.293
> 
> 标签：java

假设我有以下 ArrayList：

```
ArrayList<String> myList = new ArrayList<String>(); 
```

而且我不知道里面有多少元素。

然后我想在当前最后一个元素之后的某个位置添加一个元素，例如：

```
myList.add(myList.size()+1, "Hello World"); 
```

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T19:28:02.987

[`add`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28E%29)您使用不带索引添加到末尾的重载方法。

```
myList.add("Hello World"); 
```

# jquery - Jquery没有按我的意愿工作

> ID：16155132
> 
> 赞同：-3
> 
> 时间：2013-04-22T19:26:43.303
> 
> 标签：jquery, css

我有这个 HTML 代码：

```
<div id="switcher" >
<h3>Style Switcher</h3>
<button id="switcher-large">
Large Print
</button>
    <br/> <br/>text
</div> 
```

而这个jquery代码

```
$(document).ready(function() {
$('#switcher-large').bind('click', function() {
$('#switcher').addClass('large');
});
}); 
```

我有这个 CSS 样式

```
.large  {
font-size: 2.5em;
}**strong text** 
```

当我单击按钮时，我希望 div 中的文本变为 2.5em，但它没有按我的意愿工作。这是它的代码：

[http://jsfiddle.net/MzJaH/](http://jsfiddle.net/MzJaH/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:28:29.993

您的代码很好，记得在 jsFiddle 中将 jQuery 添加到项目中。在左侧，从库列表中选择 jQuery！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:28:26.863

你没有在你的小提琴中包含 jQuery。我从左侧边栏顶部的菜单中添加了 jQuery。[http://jsfiddle.net/MzJaH/11/](http://jsfiddle.net/MzJaH/11/)

jQuery：

```
$(document).ready(function() {
    $('#switcher-large').click(function() {
        $('#switcher').addClass('large');
    });
}); 
```

我也将`.bind`点击更改为`.click`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:40:12.580

更好地使用`.click`你忘记了 jQuery！这里是。 [http://jsfiddle.net/MzJaH/13/](http://jsfiddle.net/MzJaH/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:30:49.020

你应该先参考 jQuery js

# php - 解析错误：语法错误，意外的 T_VARIABLE

> ID：16155134
> 
> 赞同：-5
> 
> 时间：2013-04-22T19:26:56.047
> 
> 标签：php

```
$login = array('action'=>'getSession', 'user'=>'user', 'password' => 'password'); 
```

同样的

```
$login = array('action'=>$getSession, 'user'=>$user, 'password' => $password); 
```

我只是在创建一个数组并收到语法错误，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:28:52.613

您在`;`显示的那条线之前缺少一条线。

# arrays - 创建和获取值“数组结构的数组”

> ID：16155137
> 
> 赞同：0
> 
> 时间：2013-04-22T19:27:08.347
> 
> 标签：arrays, delphi, delphi-xe2

我正在尝试制作一个数组数组来获取数据（我之前添加过），将其称为“GameMap[i,j,k].Items[m].Index”或“GameMap[i,j,k ]。数数”

我在 delphi 中的类型部分如下所示：

```
type
 TItemRec = record
 Index: Integer;
 Volume: Integer;
 Count: Integer;
 Id: string;
end;
TMApRec = record
  ID: LongWord;
  Count: integer;
  Order1: integer;
  Order2: integer;
  Order3: integer;
  Order4: integer;
  Order5: integer;
  Order6: integer;
  Order7: integer;
  Order8: integer;
  Order9: integer;
  Order10: integer;
  Items: array[0..9] of TItemRec;
end;

TMap = class

GameMap : array[0..8,0..14,0..$12] of TMapRec; 
```

例如，如果我现在这样做：

```
procedure TMap.Update;
 var
  i,j,k,m: integer;
 begin
  i:=0;
  while i < 8 do
  begin
   j:=0;
   while j < 14 do
   begin
    k:=0;
     while k < $12 do
     begin
      m:= 0;
      while m < 10 do
      begin
       showmessage('asdf');
       GameMap[i,j,k].Items[m].Id:= (inttostr(i)+' '+inttostr(j)+' '+inttostr(k)+' '+inttostr(m));
       showmessage((GameMap[i,j,k].Items[m].Id));
       inc(m);
      end;
      inc(k);
     end;
     inc(j);
    end;
    inc(i);
   end; 
```

它只会显示第一个showmessage（'asdf'），但是如果你想突出显示它，它会在这里崩溃你有完整的代码[http://pastebin.com/xfL94QXU](http://pastebin.com/xfL94QXU)

再次感谢你们的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:11:12.907

如果您未能实例化`TMap`.

我怀疑调用的代码`Update`如下所示：

```
var
  Map: TMap;
begin
  Map.Update;
end; 
```

这将失败，因为`Map`未初始化。像这样修复它：

```
var
  Map: TMap;
begin
  Map := TMap.Create;
  try
    Map.Update;
  finally
    Map.Free;
  end;
end; 
```

作为更一般的建议，我强烈建议您阅读有关如何创建[简短、自包含、正确（可编译）的示例](http://sscce.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:16:40.097

首先声明一个`type`供您`Items`记录：

```
type
  TItemRec = record
    Index: Integer;
    Volume: Integer;
    Count: Integer;
    Id: Integer;
  end; 
```

现在在你的`GameMap`：

```
GameMap : array[0..8,0..14,0..$12] of record
  ID: LongWord;
  Count: integer;
  Order1: integer;
  Order2: integer;
  Order3: integer;
  Order4: integer;
  Order5: integer;
  Order6: integer;
  Order7: integer;
  Order8: integer;
  Order9: integer;
  Order10: integer;
  Items: array[0..9] of TItemRec;
end; 
```

# javascript - 防止按下回车键时多次调用按键方法

> ID：16155139
> 
> 赞同：3
> 
> 时间：2013-04-22T19:27:09.967
> 
> 标签：javascript, jquery, html, input

我正在使用 HTML 输入标签制作一个简单的搜索栏：

```
<input type="text" id="search_bar" /> 
```

然后在 jQuery 中，我实现了 keypress 方法来检测用户何时按下回车键：

```
$('#search_bar').keypress(function(e) {
    if(e.keyCode == 13 && !e.shiftKey) { // enter/return
        e.preventDefault();
        //do stuff
    }
}); 
```

但是，如果用户决定按住回车键，此方法将被多次调用。我想禁用此行为，即`keypress`仅在用户按 Enter 时调用一次，但在按住键时不再调用。实现这一目标的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:31:47.723

使用`onkeyup()`只会检测到何时释放键。这应该可以解决您的控股输入问题。

```
$('#search_bar').keyup(function(e) {
    if(e.keyCode == 13 && !e.shiftKey) { // enter/return
        e.preventDefault();
        console.log("xx");
    }
}); 
```

按住回车--xx 只登录发布。

小提琴：http: [//jsfiddle.net/veRkd/](http://jsfiddle.net/veRkd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:31:39.590

您可以使用计时器，因为您遇到的是`keypress`（`keyup`并且`keydown`可以用于计算按键次数，但跟踪[所有浏览器上的所有边缘情况](http://www.quirksmode.org/js/keys.html)可能会相当棘手）。

```
$('#search_bar').keypress(function(e) {
    if(e.keyCode == 13 && !e.shiftKey) { // enter/return
        e.preventDefault();

        if (window.preventDuplicateKeyPresses)
            return;

        window.preventDuplicateKeyPresses = true;
        window.setTimeout(function() { window.preventDuplicateKeyPresses = false; }, 500 );

        //do stuff
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:30:00.990

尝试使用`keydown`或`keyup`。这可能会改变`keycode`价值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-19T10:19:30.683

回答上面的问题有点晚了。但我建议[创建一个去抖动功能。](https://davidwalsh.name/javascript-debounce-function)该功能只会在每分之一秒内触发一次，而不是在触发时触发一次。它肯定有助于难以置信地提高性能。

```
// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
function debounce(func, wait, immediate) {
    var timeout;
    return function() {
        var context = this, args = arguments;
        var later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
    };
};

var apiRequestFunction = debounce(function() {
 //send an AJAX network request.
 //250 indicates the minimum time interval between the series of events being fired
}, 250);

$('#search_bar').keypress(function(e) {
        e.preventDefault();
        //do stuff
        //Function call to send an AJAX network request
        apiRequestFunction();
}); 
```

[参考大卫沃尔什的博文](https://davidwalsh.name/javascript-debounce-function)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T19:31:32.817

尝试改用[Keydown](http://api.jquery.com/keydown/)或[Keyup](http://api.jquery.com/keyup/)事件。它们仅在密钥从一种状态更改为另一种状态时才会被触发。

# ruby-on-rails - Rails 模型中的属性

> ID：16155150
> 
> 赞同：0
> 
> 时间：2013-04-22T19:27:37.260
> 
> 标签：ruby-on-rails

我正在制作一个带有联系人资源的 Rails 应用程序，其中包含地址、状态和 zip 字段。还有一些字段供用户输入电话号码。在我用来获取灵感的另一个网站的表格上，用户可以指明电话是移动电话、家庭电话还是办公室电话，也就是电话号码的类型。我想知道是否可以创建接受有关模型上其他字段的更多信息的字段，或者在这种情况下，Phone 是否应该是一个单独的模型（例如，Contact has_many :phones）并且电话号码的类型为电话模型上的常规字段。

因为在我的应用程序中有一个 User has_one Contact，我宁愿将所有电话相关信息保留在 Contact 模型中，而不是 User has_one Contact 和 Contact has_many :phones。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:43:34.510

使用其他模型是实现此目的的一种选择。另一种是创建一个存储电话号码的哈希。

```
class Contact
  attr_accessible :phones
  serialize :phones, Hash
end 
```

然后您可以将每部手机存储在适当的密钥中，例如

```
contact = Contact.new
contact.phones = {home: '1234-1234', work: '1234-5678', mobile: '9876-5432'}
contact.save! 
```

它们可以通过电话 Hash 访问：

```
contact.phone[:home] # => "1234-1234" 
```

通过`serialize`在模型上提供命令，`ActiveRecord`将其序列化以存储在数据库中。

因此，它允许您将数组或哈希存储到数据库中，前提是您`text`在其表上创建一个字段。

迁移将是：

```
rails g migration add_phones_to_contact phones:text 
```

有关序列化的更多信息：[api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# uml - 问卷（审核）类图？

> ID：16155152
> 
> 赞同：0
> 
> 时间：2013-04-22T19:27:44.060
> 
> 标签：uml

我正在使用 JSF2、spring 和 jpa 开发一个 Web 应用程序，我的应用程序允许用户：

*   创建新的审计
*   回答审计的相关问题

...

我的类图的规则是：

*   1.一个问题属于一章
*   2.一章有很多问题。
*   3\. 审计有 1 个或多个章节
*   4\. 一章可用于一次或多次审核
*   5.一个问题（属于一个章节）有一个iche审计的答案。

在我的类图中，我将 AUDIT 类与 QUESTION 类相关联，以便生成一个名为“ANSWER”的关联类，该类具有答案属性。

我不确定这是否正确，或者我是否应该以其他方式做到这一点。有任何想法吗 ？（对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:21:42.350

你提供的信息很少。这是我能做到的最好的，无需详细描述如何使用该模型：

![UML](https://i.stack.imgur.com/ourdq.png)

# soap - 如何在 Camel 中立即响应 SOAP 消息，同时调用其他处理？

> ID：16155156
> 
> 赞同：1
> 
> 时间：2013-04-22T19:27:55.827
> 
> 标签：soap, cxf, apache-camel

基本上，我希望立即响应 SOAP 请求，但也开始进一步处理。我看到的是在路由结束之前不会发送响应。换句话说：

```
from("cxf:bean:someEndpoint")
    .to("seda:replySOAP")
    .to("direct:ABCMessage");
from("seda:replySOAP")
    .to("bean:soapReply?method=process").end();
from("direct:ABCMessage")
    .process(new ConvertABCToNZFCY())
    .to("bean:prelimNZFCYCall")
    .end(); 
```

在“direct:ABCMessage”完成之前不生成响应。我认为 seda 会指定异步处理。我也试过“vm:replySOAP”，指向一个单独的骆驼上下文，但这没有帮助。

我也尝试过多播，但无济于事：

```
from("cxf:bean:someEndpoint")
    .multicast().parallelProcessing()
    .to("seda:replySOAP")
    .to("direct:ABCMessage"); 
```

对我有用的是wireTap，但它看起来并不优雅：

```
from("cxf:bean:someEndpoint")
    .wireTap("direct:ABCMessage") 
    .to("direct:replySOAP"); 
```

我必须使用 JMS 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:14:26.120

您看到的行为是由于

`.to("direct:ABCMessage");`

在路线中。它是一个同步过程，即一种`InOut`交换模式。jms 可以使用，但如果您只是为了避免窃听而使用它，这可能是一种矫枉过正。为什么你认为窃听看起来不优雅。

# powershell - Powershell 输出不一致

> ID：16155160
> 
> 赞同：0
> 
> 时间：2013-04-22T19:28:00.450
> 
> 标签：powershell, csv, output

我有一个 powershell 脚本，当我手动打开 powershell 并运行脚本时它工作得很好。它产生如下输出：

```
10.52.30.131    BALL-AIRKYYCP0      Not installed    Ping successful    Windows
10.52.30.133    BALL-4FNRAMLOD      Not installed    Ping successful    Windows
10.52.30.134    BALL-5UU20W8E2      Not installed    Ping successful    Windows 
```

如果我右键单击脚本文件，然后单击在 powershell 中运行，则脚本运行良好并完成它需要做的所有事情，但返回的输出不同，见下文：

```
10.52.30.131    BALL-AIRKYYCP0  Not installed    Ping successful    Wind
ows             
10.52.30.133    BALL-4FNRAMLOD  Not installed    Ping successful    Wind
ows             
10.52.30.134    BALL-5UU20W8E2  Not installed    Ping successful    Wind
ows 
```

出于某种原因，通过右键单击“在 Powershell 中运行”运行它会导致输出混乱，并且单元格被切断并在下一行完成。这是一个小样本

任何想法为什么以这种方式运行脚本时输出会有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:53:50.030

控制台窗口的大小似乎不同，具体取决于您启动它的方式。

如果需要，您可以在 Powershell 脚本中设置控制台窗口大小，使用`get-host`.

例如，这会将控制台的宽度设置为 120：

```
$ws = (get-host).UI.RawUI.WindowSize
$ws.Width = 120
(get-host).UI.RawUI.WindowSize = $ws 
```

从这里获得了这项技术： [http ://technet.microsoft.com/en-ca/library/ee156814.aspx](http://technet.microsoft.com/en-ca/library/ee156814.aspx)

# indexing - 在两个文本框中显示帐户 ID 和余额时遇到问题

> ID：16155166
> 
> 赞同：1
> 
> 时间：2013-04-22T19:28:06.863
> 
> 标签：indexing, outofrangeexception, bank

在列表框中更改所选索引后，我似乎无法弄清楚如何在文本框中显示帐户 ID 和帐户余额。我有一个客户类和一个支票账户类（它是银行账户类的子类）。混乱的代码部分在底部。

这是我遇到问题的代码部分：

```
txtAccountID.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartChecking.SelectedIndex].GetAcctNumber();
txtBalance.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartChecking.SelectedIndex].GetBalance().ToString(); 
```

这是代码的其余部分：

```
public partial class frmStart : Form
{
    private static List<Customer_Account> customers;
    private Customer_Account aCustomer;

    private Saving_Account aSaver;
    private static List<Saving_Account> savers;
    private Checking_Account aChecker;
    private static List<Checking_Account> checkers;

    public frmStart()
    {
        InitializeComponent();
        customers = new List<Customer_Account>();
        checkers = new List<Checking_Account>();
        savers = new List<Saving_Account>();
    }

    #region New form for Savings and Checking
    private void lstFrmStartChecking_DoubleClick(object sender, EventArgs e)
    {
        //Shows Checking form
        frmChecking showCheckingForm = new frmChecking();
        this.Hide();
        showCheckingForm.ShowDialog();
        this.Close();
    }

    private void lstFrmStartSavings_SelectedIndexChanged(object sender, EventArgs e)
    {
        //Show Savings form
        frmSavings showSavingForm = new frmSavings();
        this.Hide();
        showSavingForm.ShowDialog();
        this.Close();
    }
    #endregion

    #region Everything needed for TabPage1
    //Sets CheckChanged event handler for either New customer or Existing Customer
    private void rdoNewCustomer_CheckedChanged(object sender, EventArgs e)
    {
        groupBox2.Visible = true;
        groupBox3.Visible = false;

    }
    private void rdoExistingCustomer_CheckedChanged(object sender, EventArgs e)
    {
        groupBox3.Visible = true;
        groupBox2.Visible = false;
    }//End of CheckChanged event handler
    //Button controls for Adding customer to our bank and Clearing the textboxes 
    //in the 1st group panel
    private void btnAddCustomer_Click(object sender, EventArgs e)
    {
        AddCustomerAccountToList();
        PopulateListBox(customers);

    }
    private void AddCustomerAccountToList()
    {
        double socialSecurity;
        double phoneNumber;
        double zipCode;

        if (double.TryParse(txtTab1SocialSecurity.Text, out socialSecurity) && double.TryParse(txtTab1PhoneNumber.Text, out phoneNumber)
            && double.TryParse(txtTab1Zip.Text, out zipCode))
        {
            aCustomer = new Customer_Account(txtTab1SocialSecurity.Text, txtTab1Name.Text, txtTab1Address.Text, txtTab1City.Text,
                txtTab1State.Text, txtTab1Zip.Text, txtTab1PhoneNumber.Text, txtTab1Email.Text);
            customers.Add(aCustomer);
        }
        else
        {
            MessageBox.Show("Please be sure to use only numeric entries for: \nSocial Security \nPhone Number \nZip Code", "Non-numeric Entry");
        }

    }//End of AddCustomerAccount

    private void btnTab1Clear_Click(object sender, EventArgs e)
    {
        foreach (Control ctrl in groupBox2.Controls)
        {
            if (ctrl is TextBox)
            {
                ((TextBox)ctrl).Clear();
            }
            txtTab1SocialSecurity.Focus();
        }
    }//end of button controls for 1st group panel
    //Add CheckingAccount to List()

    //Populate ListBox for List<>
    private void PopulateListBox(List<Customer_Account> aListCustomerAccount)
    {
        lstTabPage1.Items.Clear();
        lstTabPage2Checking.Items.Clear();
        foreach (Customer_Account customer in aListCustomerAccount)
        {
            lstTabPage1.Items.Add(customer.GetCustomerName().ToUpper());
            lstTabPage2Checking.Items.Add(customer.GetCustomerName().ToUpper());
        }
    }//End of Populate listbox
    //Search for an existing member with name
    private void txtTabPage1Search_TextChanged(object sender, EventArgs e)
    {
        for (int i = 0; i < lstTabPage1.Items.Count; i++)
        {
            if (string.IsNullOrEmpty(txtTabPage1Search.Text))
            {
                lstTabPage1.SetSelected(i, false);
            }
            else if (lstTabPage1.GetItemText(lstTabPage1.Items[i]).StartsWith(txtTabPage1Search.Text.ToUpper()))
            {
                lstTabPage1.SetSelected(i, true);
            }
            else
            {
                lstTabPage1.SetSelected(i, false);
            }
        }
    }//End of search
    //This button will open a checking account for the customer
    private void btnOpenCheckingAccount_Click(object sender, EventArgs e)
    {
        string acctID;
        acctID = txtAccountID.Text;
        aChecker = new Checking_Account(acctID, DateTime.Today, 0, 
            200, frmStart.GetCustomer()[lstTabPage1.SelectedIndex]);

    }
    //This button will open a saving account for the customer
     private void btnOpenSavingsAccount_Click(object sender, EventArgs e)
    {
         aSaver = new Saving_Account(txtAccountID.Text, DateTime.Today, 0, 0.05, 
            frmStart.GetCustomer()[lstTabPage1.SelectedIndex]);
    }

    private static List<Customer_Account> GetCustomer()
    {
        return customers;
    }    
    #endregion

    #region Everything Needed for TabPage2
    //Search TabPage 2 Checkers
    private void txtTabPage2SearchChecking_TextChanged(object sender, EventArgs e)
    {
        for (int i = 0; i < lstTabPage2Checking.Items.Count; i++)
        {
            if (string.IsNullOrEmpty(txtTabPage2SearchChecking.Text))
            {
                lstTabPage2Checking.SetSelected(i, false);
            }
            else if (lstTabPage1.GetItemText(lstTabPage2Checking.Items[i]).StartsWith(txtTabPage2SearchChecking.Text.ToUpper()))
            {
                lstTabPage2Checking.SetSelected(i, true);
            }
            else
            {
                lstTabPage2Checking.SetSelected(i, false);
            }
        }
    }//End Search TabPage2 Checkers

    //Display values in textboxes depending on user selection in listbox
    private void lstTabPage2Checking_SelectedIndexChanged(object sender, EventArgs e)
    {
        try
        {
            txtTab2SocialSecurity.Text = customers[lstTabPage2Checking.SelectedIndex].GetSocialSecurity().ToString();
            txtTab2Name.Text = customers[lstTabPage2Checking.SelectedIndex].GetCustomerName().ToString();
            txtTab2City.Text = customers[lstTabPage2Checking.SelectedIndex].GetCity().ToString();
            txtTab2State.Text = customers[lstTabPage2Checking.SelectedIndex].GetState().ToString();
            txtTab2Zip.Text = customers[lstTabPage2Checking.SelectedIndex].GetZip().ToString();
            txtTab2PhoneNumber.Text = customers[lstTabPage2Checking.SelectedIndex].GetPhoneNumber().ToString();
            txtTab2Email.Text = customers[lstTabPage2Checking.SelectedIndex].GetEmail().ToString();
            txtTab2Address.Text = customers[lstTabPage2Checking.SelectedIndex].GetAddress().ToString();
            txtAccountID.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartChecking.SelectedIndex].GetAcctNumber();
            txtBalance.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartChecking.SelectedIndex].GetBalance().ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    }
    #endregion

} 
```

（这是错误消息所说的） System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:42:12.163

欢迎来到 SO，盖伊！

在我看来，您正在将该`.ToString()`方法附加到除此之外的所有控件：

```
txtAccountID.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartCheck‌​ing.SelectedIndex].GetAcctNumber(); 
```

将您的代码更改为：

```
txtAccountID.Text = frmStart.GetCustomer()[lstTabPage1.SelectedIndex].GetCheckers()[lstFrmStartCheck‌​ing.SelectedIndex].GetAcctNumber().ToString(); 
```

你应该没事！

# c - C printint中的整数奇怪的事情

> ID：16155168
> 
> 赞同：0
> 
> 时间：2013-04-22T19:28:26.593
> 
> 标签：c, int, printf

我不明白为什么这段代码会打印 24 和 20。

```
int main(){ 
    int m = 24, n = 024;
    printf("%d %d", m, n); 
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:29:52.287

在 C 中，以“0”开头的数字是八进制。所以`024`表示 24 [8]，即 2•8 + 4 = 20。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:30:09.997

前导 0 表示八进制，即以 8 为底。所以：

```
 2 * 8 + 4 == 20 
```

# vb.net - 如何将 linq 数组转换为 json 的字符串数组

> ID：16155172
> 
> 赞同：0
> 
> 时间：2013-04-22T19:28:36.477
> 
> 标签：vb.net, json, linq

我在 VB.NET 中有这个功能

```
Dim dt = (From d In db.d ...).ToArray()

Return New With {
    .label = "label",
    .data = dt.ToArray()
} 
```

以 JSON 格式返回以下数据

```
{
    "label":"label",
    "data":[
        {"date":1366657400000,"value":12051},
        {"date":1366657397000,"value":12102},
        {"date":1366646820000,"value":12099}
    ]
} 
```

如何以以下格式返回数据

```
{
    "label":"label",
    "data":[
        [1366657400000,12051],
        [1366657397000,12102],
        [1366646820000,12099]
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:33:55.347

我对 VB 不是很熟悉，但它应该看起来像这样：

```
Return New With { _
    .label = "label", _
    .data = data.[Select](Function(d) New Long() { d.date, d.value} ).ToArray() _
} 
```

这个想法是您想为原始集合中的每个项目创建一个新数组。新数组中的第一项是`date`属性，第二项是`value`属性。

这就是它在 C# 中的样子：

```
return Json(new {
    label = "label",
    data = data.Select(d => new[] { d.date, d.value }).ToArray()
}); 
```

# .net - 在任务中显示来自 Catch 语句的自定义弹出窗口

> ID：16155173
> 
> 赞同：1
> 
> 时间：2013-04-22T19:28:47.143
> 
> 标签：.net, wpf, multithreading, task-parallel-library

我有一个我想使用的 WPF 窗口，而不是常规的 Windows.MessageBox，主要是因为我希望它有一个“详细信息”框来显示错误的内容。这工作正常，直到我开始进入线程。

我想运行一个任务，该任务将获得一个列表，例如，SQL Server 数据库中的表可能需要一点时间。如果出现错误 - 在尝试连接时说超时 - 我想显示带有异常详细信息的自定义弹出窗口。

拳头它一直在崩溃。经过一些阅读（对你们这里的 SO），我突然意识到任务不在 UI 线程中并且无法显示窗口（本机 MessageBox 似乎仍然可以工作）。所以，我想出了以下内容：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Task t = Task.Factory.StartNew(() => DoWork());
    }

    void DoWork()
    {
        Thread thread = new Thread(() =>
        {
            Window1 popup = new Window1();
            popup.Show();
            System.Windows.Threading.Dispatcher.Run();
        });

        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
    }
} 
```

这是我制作的一个临时应用程序，因此我可以展示我正在做的事情的基础知识。在主应用程序中，我将异常作为参数发送到弹出窗口。

我的问题是：这是最好的方法吗？它似乎工作正常，但不是 100% 确定混合这样的线程是最佳实践，并认为我会把它放在那里。

如果这是一个好的解决方案，我的下一个问题是如何将弹出窗口与父窗口联系起来，以防止用户在弹出窗口打开时关闭父窗口，或者在父窗口关闭时自动关闭弹出窗口？Parent 本身不会是主要应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:03:56.443

我认为最好的方法是在应用程序的主 UI 线程上显示窗口。

你可以通过传递一个`Dispatcher`to 来做到这一点`DoWork()`。但是将执行计算和显示错误的关注点分开也是有意义的。因此，您可以做的是让`DoWork()`throw 并在`Task`. 延续只会在发生错误时运行，并将在主 UI 线程的上下文中运行：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Task.Factory.StartNew(DoWork)
        .ContinueWith(
            task => ErrorBox.Show(task.Exception),
            CancellationToken.None, TaskContinuationOptions.OnlyOnFaulted,
            TaskScheduler.FromCurrentSynchronizationContext());
}

private void DoWork()
{
    throw new Exception();
} 
```

（假设`ErrorBox.Show()`创建并显示窗口。）

# c# - 哪些 ADO.NET 数据集/数据表方法对于多个读取器线程是安全的？

> ID：16155180
> 
> 赞同：1
> 
> 时间：2013-04-22T19:29:06.067
> 
> 标签：c#, multithreading, caching, ado.net, thread-safety

我正在为相对静态并定期从数据库更新的数据创建自定义缓存对象。我选择使用强类型数据集来存储缓存数据。现在，通过 ReaderWriterLockSlim 同步对自定义缓存对象的读取和刷新（客户端无法写入缓存，只能刷新）访问。但是，我想确保缓存的客户端不能通过同时修改其组成对象来破坏强类型数据集中的数据（DataTables、DataRows 等），即使客户端*~ 不应该 ~*更改数据。因此，我的方法是，在查找缓存项时，克隆强类型 DataSet 并用所需行及其相关父/子行的副本填充它，然后将其返回给客户端。基本上，将不可变缓存数据的副本返回给客户端，这样即使他们尝试修改它，其他线程也不会受到影响。

我的问题是，这可以在 ReaderWriterLockSlim 读锁中安全地完成吗？更直接地说，像 DataSet.Clone、DataTable.ImportRow 这样的方法对于读取器线程来说本质上是安全的，即它们是对克隆/复制对象的只读操作吗？考虑一下 MSDN 文档中有关 DataSet、DataTable 等的注释。

“**这种类型对于*多线程读取操作***是安全的。您必须同步任何写入操作。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:31:26.790

是的。DataSet 和 DataTable 及相关项在读取时是线程安全的。正如您自己的报价所述。

因此，只要每个威胁克隆您的缓存项，然后修改克隆，您就无需担心。

是的，这一切都可以在 ReaderWriterLockSlim 的范围内安全地完成，它用于同步多个读取操作和一个写入操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T08:45:25.373

以下 ADO.NET 类型对于多线程**读取**操作是安全的：

*   [数据行集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataRowCollection#thread-safety)
*   [数据表集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataTableCollection#thread-safety)
*   [数据列集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataColumnCollection#thread-safety)
*   [数据列](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataColumn#thread-safety)
*   [数据视图设置](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataViewSetting#thread-safety)
*   [数据关系](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataRelation#thread-safety)
*   [数据关系集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataRelationCollection#thread-safety)
*   [数据行](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataRow#thread-safety)
*   [数据视图管理器](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataViewManager#thread-safety)
*   [数据行视图](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataRowView#thread-safety)
*   [外键约束](https://docs.microsoft.com/en-us/dotnet/api/system.data.ForeignKeyConstraint#thread-safety)
*   [约束集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.ConstraintCollection#thread-safety)
*   [约束](https://docs.microsoft.com/en-us/dotnet/api/system.data.Constraint#thread-safety)
*   [数据表](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataTable#thread-safety)
*   [数据集](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataSet#thread-safety)
*   [数据视图设置集合](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataViewSettingCollection#thread-safety)
*   [数据视图](https://docs.microsoft.com/en-us/dotnet/api/system.data.DataView#thread-safety)

但是，它们对于多线程**写入**操作**并不安全。**

# c - c 计算所有可能的子网

> ID：16155183
> 
> 赞同：3
> 
> 时间：2013-04-22T19:29:16.763
> 
> 标签：c, networking, mask

我正在尝试使用我的网络 IP 和掩码计算所有可能的子网：

```
char *net = "192.168.1.0"
char *mask = "255.255.255.0"

in_addr_t _net = inet_addr(net);
in_addr_t _mask = inet_addr(mask);
int possibleHosts = ntohl(~_mask);  // = 255

for (int i=0; i<possibleHosts; i++) {    //From 0 to 255
    in_addr_t subnet = (_mask & _net) | i;    // should calculate the subnets from 192.168.1.0 to 192.168.1.255
    struct in_addr in;
    in.s_addr = subnet;
    char *test = inet_ntoa(in);
    printf("%s\n", test);    //always prints 192.168.1.0???

} 
```

但输出始终是“192.168.1.0”。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:59:22.753

假设您想保留现有代码（这是一个很大的假设），请记住，`_net`并且`_mask`两者仍然处于网络顺序，因此您在子地址中的 OR 也需要如此。

```
const char *net = "192.168.1.0";
const char *mask = "255.255.255.0";

in_addr_t _net = inet_addr(net);
in_addr_t _mask = inet_addr(mask);
int possibleHosts = ntohl(~_mask);

for (int i=0; i<possibleHosts; i++)
{
    in_addr_t subnet = (_mask & _net) | htonl(i); // <<== must be network-order
    struct in_addr in;
    in.s_addr = subnet;
    char *test = inet_ntoa(in);
    printf("%s\n", test);

} 
```

**输出**

```
192.168.1.0
192.168.1.1
192.168.1.2
192.168.1.3
192.168.1.4
192.168.1.5
192.168.1.6
192.168.1.7
192.168.1.8
192.168.1.9
192.168.1.10
192.168.1.11
192.168.1.12
192.168.1.13
192.168.1.14
192.168.1.15
192.168.1.16
192.168.1.17
192.168.1.18
192.168.1.19
192.168.1.20
192.168.1.21
192.168.1.22
192.168.1.23
192.168.1.24
192.168.1.25
192.168.1.26
192.168.1.27
192.168.1.28
192.168.1.29
192.168.1.30
192.168.1.31
192.168.1.32
192.168.1.33
192.168.1.34
192.168.1.35
192.168.1.36
192.168.1.37
192.168.1.38
192.168.1.39
192.168.1.40
192.168.1.41
192.168.1.42
192.168.1.43
192.168.1.44
192.168.1.45
192.168.1.46
192.168.1.47
192.168.1.48
192.168.1.49
192.168.1.50
192.168.1.51
192.168.1.52
192.168.1.53
192.168.1.54
192.168.1.55
192.168.1.56
192.168.1.57
192.168.1.58
192.168.1.59
192.168.1.60
192.168.1.61
192.168.1.62
192.168.1.63
192.168.1.64
192.168.1.65
192.168.1.66
192.168.1.67
192.168.1.68
192.168.1.69
192.168.1.70
192.168.1.71
192.168.1.72
192.168.1.73
192.168.1.74
192.168.1.75
192.168.1.76
192.168.1.77
192.168.1.78
192.168.1.79
192.168.1.80
192.168.1.81
192.168.1.82
192.168.1.83
192.168.1.84
192.168.1.85
192.168.1.86
192.168.1.87
192.168.1.88
192.168.1.89
192.168.1.90
192.168.1.91
192.168.1.92
192.168.1.93
192.168.1.94
192.168.1.95
192.168.1.96
192.168.1.97
192.168.1.98
192.168.1.99
192.168.1.100
192.168.1.101
192.168.1.102
192.168.1.103
192.168.1.104
192.168.1.105
192.168.1.106
192.168.1.107
192.168.1.108
192.168.1.109
192.168.1.110
192.168.1.111
192.168.1.112
192.168.1.113
192.168.1.114
192.168.1.115
192.168.1.116
192.168.1.117
192.168.1.118
192.168.1.119
192.168.1.120
192.168.1.121
192.168.1.122
192.168.1.123
192.168.1.124
192.168.1.125
192.168.1.126
192.168.1.127
192.168.1.128
192.168.1.129
192.168.1.130
192.168.1.131
192.168.1.132
192.168.1.133
192.168.1.134
192.168.1.135
192.168.1.136
192.168.1.137
192.168.1.138
192.168.1.139
192.168.1.140
192.168.1.141
192.168.1.142
192.168.1.143
192.168.1.144
192.168.1.145
192.168.1.146
192.168.1.147
192.168.1.148
192.168.1.149
192.168.1.150
192.168.1.151
192.168.1.152
192.168.1.153
192.168.1.154
192.168.1.155
192.168.1.156
192.168.1.157
192.168.1.158
192.168.1.159
192.168.1.160
192.168.1.161
192.168.1.162
192.168.1.163
192.168.1.164
192.168.1.165
192.168.1.166
192.168.1.167
192.168.1.168
192.168.1.169
192.168.1.170
192.168.1.171
192.168.1.172
192.168.1.173
192.168.1.174
192.168.1.175
192.168.1.176
192.168.1.177
192.168.1.178
192.168.1.179
192.168.1.180
192.168.1.181
192.168.1.182
192.168.1.183
192.168.1.184
192.168.1.185
192.168.1.186
192.168.1.187
192.168.1.188
192.168.1.189
192.168.1.190
192.168.1.191
192.168.1.192
192.168.1.193
192.168.1.194
192.168.1.195
192.168.1.196
192.168.1.197
192.168.1.198
192.168.1.199
192.168.1.200
192.168.1.201
192.168.1.202
192.168.1.203
192.168.1.204
192.168.1.205
192.168.1.206
192.168.1.207
192.168.1.208
192.168.1.209
192.168.1.210
192.168.1.211
192.168.1.212
192.168.1.213
192.168.1.214
192.168.1.215
192.168.1.216
192.168.1.217
192.168.1.218
192.168.1.219
192.168.1.220
192.168.1.221
192.168.1.222
192.168.1.223
192.168.1.224
192.168.1.225
192.168.1.226
192.168.1.227
192.168.1.228
192.168.1.229
192.168.1.230
192.168.1.231
192.168.1.232
192.168.1.233
192.168.1.234
192.168.1.235
192.168.1.236
192.168.1.237
192.168.1.238
192.168.1.239
192.168.1.240
192.168.1.241
192.168.1.242
192.168.1.243
192.168.1.244
192.168.1.245
192.168.1.246
192.168.1.247
192.168.1.248
192.168.1.249
192.168.1.250
192.168.1.251
192.168.1.252
192.168.1.253
192.168.1.254 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:35:32.527

核心理念

```
mask32 = 0xFFFFFFFF = (~0 << 0);
mask31 = 0xFFFFFFFE = (~0 << 1);
mask30 = 0xFFFFFFFB = (~0 << 2);

mask01 = 0x00000000 = (~0 << 31);

[Note: ~0 means inverting all bits of 0, i.e. 0xFFFFFFFF. "<<" means left bit shift.] 
```

公式

```
uint32_t mask[ 33 ];
for i = 1 to 32:
   mask[i] = ~0 << (32 - i); 
```

额外的

```
// A function to convert mask from number format to string format.
// See http://www.allredroster.com/iptodec.htm for reference
// Example: maskAsString( 0xC0A80100 ) --> "192.168.1.0"
char const * maskAsString( uint32_t mask );

// .. and also the inverse function
uint32_t stringAsMask( char const * maskString ); 
```

# shell - 用于从单列解析多行的 Shell 脚本

> ID：16155186
> 
> 赞同：1
> 
> 时间：2013-04-22T19:29:34.890
> 
> 标签：shell, unix, awk

我正在通过一个非常复杂且冗长的多条件语句来执行此操作，并且想知道是否有人知道更简单的方法。我有一个要解析的多列/多行列表。我需要做的是取第一行在第 5 个位置有“ ***** ”并将所有这些条目复制到接下来几行的空白处，然后丢弃原始的顶行。使这有点复杂的是，有时接下来的几行可能在所有其他字段中都没有空白空间（参见原始列表的下半部分）。如果是这种情况，我想获取额外的条目（下面的 Q1）并将其放在行尾的新列中。

原名单：

```
A B C D ***** F G
    E1
    E2
    E3
Q R S T ***** V W
    U1
Q1  U2 
```

最终输出：

```
A B C D E1 F G
A B C D E2 F G
A B C D E3 F G
Q R S T U1 V W
Q R S T U2 V W Q1 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:46:21.473

简洁/神秘的一班：

```
awk '/[*]/{f=$0;p="[*]+";next}{r=$2?$2:$1;sub(p,r,f);p=r;print $2?f" "$1:f}' file
A B C D E1 F G
A B C D E2 F G
A B C D E3 F G
Q R S T U1 V W
Q R S T U2 V W Q1 
```

**解释：**

```
/[*]+/ {                  # If line matches line with pattern to replace
    line = $0             # Store line
    pat="[*]+"            # Store pattern
    next                  # Skip to next line
}
{
    if (NF==2)            # If the current line has 2 fields 
       replace = $2       # We want to replace with the second
    else                  # Else
       replace = $1       # We want to replace with first first

    sub(pat,replace,line) # Do the substitution
    pat=replace           # Next time the pattern to replace will have changed 

    if (NF==2)            # If the current line has 2 fields
       print line,$1      # Print the line with the replacement and the 1st field
    else                  # Else
       print line         # Just print the line with the replacement 
} 
```

要运行脚本，请将其保存到文件中，例如`script.awk`运行`awk -f script.awk file`.

# sql - 如何在对 SQLi 安全的地方进行 LIKE 查询

> ID：16155188
> 
> 赞同：1
> 
> 时间：2013-04-22T19:29:46.230
> 
> 标签：sql, ruby-on-rails-3, sql-injection, where, rails-activerecord

我有这条线

```
 User.where("email LIKE ?", "%#{@search}%") 
```

哪个brakeman说它可以用于sql注入

是否有更好、更安全的方式来编写此行（搜索包含电子邮件的用户`@search`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:41:43.983

它不能用于注射。
这种方式已经很安全了。

# .net - FrameworkElementAdapters 类的性能

> ID：16155189
> 
> 赞同：1
> 
> 时间：2013-04-22T19:29:51.883
> 
> 标签：.net, wpf, performance, appdomain

无法弄清楚为什么跨域调用对于`FrameworkElementAdapters`课堂来说如此缓慢。这是一个简单的代码：

```
class Program
{
    [STAThread]
    static void Main()
    {
        AppDomain domain = AppDomain.CreateDomain("AnotherDomain");

        var instance = (AnotherDomainClass) domain.CreateInstanceAndUnwrap(
            typeof (AnotherDomainClass).Assembly.FullName,
            typeof (AnotherDomainClass).FullName);

        var contract = instance.CreateContract();
    }
}

class AnotherDomainClass : MarshalByRefObject
{
    public INativeHandleContract CreateContract()
    {
        return FrameworkElementAdapters.ViewToContractAdapter(
            new TextBlock());
    }
} 
```

最后一行的执行时间`instance.CreateContract`接近**1.7 秒**！哪里有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:58:51.950

[您是否尝试过将LoaderOptimizationAttribute](http://msdn.microsoft.com/en-us/library/vstudio/system.loaderoptimizationattribute%28v=vs.90%29.aspx)设置为 来装饰 Main 方法`LoaderOptimization.MultiDomainHost`？

该类`FrameworkElementAdapters`是 System.AddIn 的一部分。看看插件[性能：当你跨越隔离边界时你能期待什么，以及如何使它更好地](http://blogs.msdn.com/b/clraddins/archive/2008/02/22/add-in-performance-what-can-you-expect-as-you-cross-an-isolation-boundary-and-how-to-make-it-better-jesse-kaplan.aspx)形成 System.AddIn 团队的博客。[另请查看WPF 加载项概述](http://msdn.microsoft.com/en-us/library/bb909794.aspx)MSDN 文章的“性能优化”部分。

# html - 没有最大宽度的响应式设计框架

> ID：16155191
> 
> 赞同：1
> 
> 时间：2013-04-22T19:29:53.610
> 
> 标签：html, css, responsive-design

是否有用于创建未设置宽度的响应式网站的框架？我一直在使用骨架，但它使用 960px 和其他框架使用大约相同的宽度。我需要知道是否有可能拥有一个响应式网站，无论我的屏幕宽度如何，它仍然可以在平板电脑和手机上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:37:41.450

我使用框架移交代码，但是您应该能够将骨架 960px 宽度设置为 em 或百分比值，只要他们将内部代码编码为基于百分比，它仍然可以正常工作，这里的代码看起来不错重置为 % 值：[http](http://webdesign.tutsplus.com/tutorials/complete-websites/building-a-responsive-layout-with-skeleton-widescreen/) ://webdesign.tutsplus.com/tutorials/complete-websites/building-a-responsive-layout-with-skeleton-widescreen/ :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:38:45.353

[http://gumbyframework.com/](http://gumbyframework.com/)也许？我刚刚在谷歌上搜索了响应式网格，那里有很多……除非我不明白你的问题。

# selenium - Selenium WebDriver 和网格 2

> ID：16155193
> 
> 赞同：0
> 
> 时间：2013-04-22T19:29:57.217
> 
> 标签：selenium, grid, webdriver

我尝试运行[Grid2](https://code.google.com/p/selenium/wiki/Grid2)，但我不了解基本的东西。

我有集线器，我在集线器机器上运行下一个命令：

```
java -jar selenium-server-standalone-2.14.0.jar -role hub 
```

我有一个节点，我在它上面运行下一个命令：

```
java -jar selenium-server-standalone-2.14.0.jar -role node  -hub http://localhost:4444/grid/register 
```

现在，我想在 Java 中运行一个**仅**在节点（而不是集线器）上执行的测试。但是测试的代码在 Hub 机器上。我怎样才能让它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:13:42.160

如果您在同一台机器上运行集线器和节点，那么是的，当您运行测试时，它们将在集线器所在的节点上启动。为了解决这个问题，您至少需要 2 台机器，1 台运行集线器，1 台运行节点。

在机器 A 上启动集线器，然后将节点注册到集线器，当您在集线器机器上开始测试时，它将自动选择可用节点并运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:53:32.587

你的代码在哪里并不重要。您的代码与集线器通信，并根据所需的功能对象告诉它在哪个节点上执行案例。

在您的情况下，该案例仅在节点上运行。集线器只是完成将其分发到适当节点的任务。只是节点与集线器位于同一台机器上，因此您看不到区别。

# javascript - d3js围绕饼图重新分配标签

> ID：16155194
> 
> 赞同：7
> 
> 时间：2013-04-22T19:29:57.920
> 
> 标签：javascript, d3.js

我正在使用 d3.js 创建一个带有外部标签的圆环图。使用基于每个饼图的质心的三角函数，我定位标签。

```
g.append("g")
        .attr("class", "percentage")
        .append("text")
            .attr("transform", function(d)
                { 
                    var c = arc.centroid(d);
                    var x = c[0];
                    var y = c[1];
                    var h = Math.sqrt(x*x + y*y);
                    return "translate(" + (x/h * obj.labelRadius) +  ',' + (y/h * obj.labelRadius) +  ")"; 
                }
            ) 
            .attr("dy", ".4em")
            .attr("text-anchor", function(d) 
                {
                    return (d.endAngle + d.startAngle)/2 > Math.PI ? "end" : "start";
                }
            )
            .text(function(d) { return d.data.percentage+"%"; }); 
```

我最终要完成的是重新排列饼图边缘之外的标签，以防止重叠。

![在此处输入图像描述](https://i.stack.imgur.com/8Hwpl.jpg)

我尝试解决问题的方法之一是定义设置的“锚点”，标签可以放置在其中，保证它们不会重叠。问题是将质心映射到锚点并在切片和标签之间保留一些视觉对应感（当切片很薄时特别困难）。

![在此处输入图像描述](https://i.stack.imgur.com/9vatK.jpg)

上图显示了锚点的可能位置（所示切片的质心）。有了这些位置，就不可能有重叠。

使问题更加复杂的是，当标签（它们是水平的）靠近饼图的顶部或底部时，它们比位于饼图的右侧或左侧时更容易重叠。

关于如何解决这个问题的任何想法？

[编辑] 根据 meetamit 的建议，我实施了以下操作：

```
.attr("dy", function(d)
{
    var c = arc.centroid(d);
        var x = c[0];
        var y = c[1];
        var h = Math.sqrt(x*x + y*y);
        var dy = y/h * obj.labelRadius; 
    dy=dy*fontSizeParam*.14/heightParam);
    return (dy)+"em";
}) 
```

它有点帮助，并为标签提供了一些空间，但仍在寻找一种涵盖所有情况的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T21:12:41.500

你不能创建两条弧线吗？一个用于图表，一个用于标签？

```
// first arc used for drawing the pie chart
var arc = d3.svg.arc()
  .outerRadius(radius - 10)
  .innerRadius(0);

// label attached to first arc
g.append("text")
  .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
  .attr("dy", ".35em")
  .style("text-anchor", "middle")
  .text(function(d) { return d.data.age; });

// second arc for labels
var arc2 = d3.svg.arc()
  .outerRadius(radius + 20)
  .innerRadius(radius + 20);

// label attached to second arc
g.append("text")
  .attr("transform", function(d) { return "translate(" + arc2.centroid(d) + ")"; })
  .attr("dy", ".35em")
  .style("text-anchor", "middle")
  .text(function(d) { return d.data.age; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T09:38:56.027

程序员 John Williams 提出了一个很好的、实用的基于[d3.js的解决方案：](http://d3js.org "d3.js")

[https://www.safaribooksonline.com/blog/2014/03/11/solving-d3-label-placement-constraint-relaxing/](https://www.safaribooksonline.com/blog/2014/03/11/solving-d3-label-placement-constraint-relaxing/)

它应该适用于具有合理限制的情况，例如上面讨论的最多 12 个标签。文章中还提到了更高级的算法，但这种简单的方法实际上可能会在与足够的标签内容约束一起使用时，给出比其他方法产生的视觉外观更有序的结果。

# sql - SQL 选择跨越整个属性范围的项目

> ID：16155200
> 
> 赞同：1
> 
> 时间：2013-04-22T19:30:23.873
> 
> 标签：sql, select, jdbc, toggle, derby

标题可能听起来有点不清楚，希望我的描述会更清楚！这是我想要做的。我有一个包含 3 列、id、值和二进制属性的表。我想从表中选择具有相同名称但二进制属性相反的项目，例如

```
ID|Value     |Toggle
====================
0 |noun      |no
1 |verb      |no
2 |noun      |yes
3 |adjective |yes
4 |article   |no
5 |noun      |no
6 |adjective |yes
7 |verb      |no
8 |article   |yes 
```

在此表上，返回的记录将是

```
ID|Value     |Toggle
====================
0 |noun      |no
2 |noun      |yes
4 |article   |no
5 |noun      |no
8 |article   |yes 
```

将返回所有名词记录和所有文章记录，因为存在具有 no 和 yes 的名词记录以及具有 no 和 yes 的文章记录。

形容词不会被返回，因为两个记录都有一个是的切换，动词不会被返回，因为两个记录都有一个没有的切换。谢谢阅读！

如果我的描述仍然不清楚，请问我任何后续问题。如果重要的话，我正在将 Derby 与 JDBC 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:27:34.573

这可能对你有用，我很想知道这会有多快/慢（如果你在 tog 上有一个索引，它会非常快）....我假设表名是 t 并且列值是val 和列切换是 tog :)

```
SELECT * FROM T 
WHERE  tog = 'yes' and val in (select val from t where tog='no')

UNION 

SELECT * FROM T 
WHERE  tog = 'no'  and val in (select val from t where tog='yes') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:37:10.103

请试试这个：

```
select * from table a
where exists (
select 1 from table b
where a.Value = b.Value
and a.ID != b.ID
and a.Toggle != b.Toggle
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:42:50.630

```
select distinct a.* from my_table a
  join my_table b on a.Value = b.Value and a.Toggle != b.Toggle 
```

# html - HTML 不同部分中的多个表单

> ID：16155206
> 
> 赞同：1
> 
> 时间：2013-04-22T19:30:41.860
> 
> 标签：html

我的页面中有几个部分需要包含在同一个`form`标​​签下，但这样做会破坏 HTML。例如：

```
<div>
<form name="firstform">
    <input type="text" name="input1" />
    <input type="text" name="input2" />
    <input type="text" name="input3" />
</div>
<p>bla bla</p>
<div>
<form name="secondform">
    <input type="text" name="one" />
</form>

    <input type="text" name="input4">
</form> 
```

所以基本上我想提交表格`firstform`，但以一种包括`input4`但不提交的方式`secondform`？

**编辑：**

我有一个很长的页面，里面有很多输入，在页面中间我有一个不同的表单，用于允许文件上传，我想保留它在页面中的位置，但是，在那部分之后我有一个第一种形式的延续。所以我有第一个表格，然后是另一个带有文件上传的表格，然后是第一个表格的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:35:54.607

如果您想拥有多个表单，请使用一个带有多个提交按钮的表单标签。给按钮名称和值以及用户提交表单的时间，在后端检查哪个按钮已被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:08:04.777

您可以简单地添加一个带有 onClick 事件的 html 按钮，该事件调用一个函数来模拟嵌套表单。如果第二种形式的 onSubmit 函数是纯 javaScript，这可能是一个快速剪切/粘贴。如果您的第二种形式与服务器通信，您将不得不跳入一些 AJAX。

# javascript - 当 HTML 标签包含在 JavaScript 代码中时，如何使 JSHint 发出警告？

> ID：16155211
> 
> 赞同：3
> 
> 时间：2013-04-22T19:30:52.720
> 
> 标签：javascript, jenkins, jslint, jenkins-plugins, jshint

在我们的开发商店中，我们使用客户端模板并且在我们的 JavaScript 代码中不包含任何 HTML 标记。

在我们的持续集成过程中，我们在每次提交（Jenkins 中的构建后操作）后自动运行 JSHint，以验证是否符合我们的编码风格指南。

我想配置 JSHint，这样当它在 .js 文件中找到 HTML 标记时会引发警告。

我怎样才能做到这一点？我已经搜索过了，但我找不到 HTML 标记警告的示例，也找不到 JSHint 的自定义规则。

**编辑：**

为了清楚起见，我试图捕捉这样的代码：

```
var newDiv = "<div>Hello World!</div>";
$("body").append(newDiv); 
```

如果我能让 JSHint 为上面示例中的第一行生成警告，那就太好了。

**第二次编辑：**

如果 Jenkins 有构建后插件，如果在 .js 文件中找到 HTML，可能会引发验证错误，那么这也是一个很好的替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:56:33.387

### 答案

不，jSHint 不支持在字符串中禁止任意字符串内容或 HTML 标记。它目前也不支持自定义规则，尽管作者已经讨论过[将来添加公共 api。](https://groups.google.com/forum/?fromgroups=#!topic/jshint/M8w5o1fSfI8)

### 我对 WHY 的猜测（因为我不是内部人员）

您提出的解决方案（在任何情况下都不允许任何 HTML 标记）将不允许各种高度有效的用例，无论您对在 js 中创建 HTML 有什么看法。我知道这是您的团队想要做的，但是这样一个生硬的规则不会具有其余 jsHints 规则的普遍适用性。他们的重点是执行风格规则。由于您不允许字符串中的所有 HTML 标记，这实际上更像是一种内容验证，而不是一种样式验证。它将消除以下与 DOM 注入/关注点分离无关的**内容示例。**

例如：

```
var example="I'm writing a report on <div> tags and css"; 
```

或者

```
var htmlStrippedText = text.replace("<div>",""); 
```

### 我的建议

当然，缺乏广泛的适用性并不是你不这样做的理由。如果您真的想过滤这样的内容，请使用命令行脚本使用正则表达式进行搜索。由于您只想查看是否存在 HTML，而不是其是否有效，因此您可以只搜索表单中的内容，`<[div|span|body|html...`并且`document.createElement`应该没问题（尽管如果您想在其中允许它，您可能必须更有创意注释）。只是不要使用 nodejs 来运行带有 JS 的脚本，否则它将无法验证自身。:)

当然，这一切都不会阻止坚定的开发人员：

```
var topSecretDOMObject,topSecretFunction,topSecretArgument;
topSecretFunction = "create"+"Element";
topSecretArgument = "d" + "i" + "v";
topSecretDOMObject = document[topSecretFunction](topSecretArgument); 
```

# c - 使用内联汇编更新内部系统寄存器

> ID：16155215
> 
> 赞同：1
> 
> 时间：2013-04-22T19:31:10.697
> 
> 标签：c, inline-assembly

我想在我目前正在处理的项目中使用内联汇编。该项目是关于从头开始构建一个简单的操作系统。

我已经完成了开始编写内核代码和屏幕驱动程序的部分。

问题出在屏幕驱动程序中，我认为它正是在将屏幕光标（闪烁的光标）保存/检索到内部寄存器中/从内部寄存器中检索的代码中。

这是我的代码中使用内联汇编的地方。

我已将内联组件部分与屏幕驱动程序分开放在一个单独的文件中，以便正确测试它的功能。

这是 test.c ：

```
# include <stdio.h>

// scree device I/O ports
# define REG_SCREEN_CTRL 0x3D4    
# define REG_SCREEN_DATA 0x3D5

unsigned char port_byte_in ( unsigned short port ) {

    // A handy C wrapper function that reads a byte from the specified port
    // "= a " ( result ) means : put AL register in variable RESULT when finished
    // " d " ( port ) means : load EDX with port
    unsigned char result ;
    __asm__ ("in %%dx, %%al" : "=a" (result) : "d" (port));
    return result ;

}

void port_byte_out ( unsigned short port , unsigned char data ) {
    // " a " ( data ) means : load EAX with data
    // " d " ( port ) means : load EDX with port
    __asm__ ("out %%al, %%dx" : :"a" (data) , "d" (port));
}

unsigned short port_word_in ( unsigned short port ) {
    unsigned short result ;
    __asm__ ("in %%dx, %%ax" : "=a" (result) : "d" (port));
    return result ;
}

void port_word_out ( unsigned short port , unsigned short data ) {
    __asm__ ("out %%ax, %%dx" : :"a" (data) , "d" (port));
}

void main (){
    int i = 10;

    printf("%d\n",i);
    port_byte_out ( REG_SCREEN_CTRL , 14);
    port_byte_out ( REG_SCREEN_DATA , ( unsigned char )( i >> 8));
    port_byte_out ( REG_SCREEN_CTRL , 15);

    port_byte_out ( REG_SCREEN_CTRL , 14);
    int j = port_byte_in ( REG_SCREEN_DATA ) << 8;
    printf("%d\n",j);
    port_byte_out ( REG_SCREEN_CTRL , 15);
    j += port_byte_in ( REG_SCREEN_DATA );
    printf("%d\n",j);
} 
```

通过运行 test.c 它给了我：

```
10
Segmentation fault (core dumped) 
```

我期待一些价值而不是分段错误。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:42:03.290

和`IN`指令`OUT`具有特权。您通常不能从 Linux 中的用户空间可执行文件中调用它们。

您可以使用[`ioperm()`](http://linux.die.net/man/2/ioperm)or[`iopl()`](http://linux.die.net/man/2/iopl)系统调用来授予您的可执行文件直接访问 I/O 端口的权限。请注意，这些系统调用都要求您的可执行文件以 root 身份运行。

# ember.js - 没有车把的 Ember 视图

> ID：16155226
> 
> 赞同：2
> 
> 时间：2013-04-22T19:31:48.257
> 
> 标签：ember.js, handlebars.js

如何在 Ember 中创建使用纯 'ol HTML 而不是车把模板的视图？我正在使用一个名为 Rickshaw 的图形库，我希望能够调用它的“渲染”函数，该函数绘制到屏幕上，但我无法在车把模板中执行 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:22:00.530

你可以尝试这样的事情：

```
App.GraphView = Ember.View.extend({
    didInsertElement: function () {
        var graph = new Rickshaw.Graph({
            element: this.$().get(0),
            series: [] // DATA
        }):
        graph.render();
    }
}); 
```

`didInsertElement`一旦视图被插入到 DOM 中就会被调用，通过调用`this.$().get(0)`你可以获得它的基本 DOM 元素。

# sql-server-2008 - 如何在 T-SQL 中调用语句块？

> ID：16155228
> 
> 赞同：1
> 
> 时间：2013-04-22T19:31:53.950
> 
> 标签：sql-server-2008, tsql

在编写存储过程时，可能存在相同情况的重复代码，例如错误处理。为了重用代码，可以创建一个函数并调用该函数。

是否可以在存储过程中有一个语句块并且可以多次调用而不创建函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:34:20.460

您可以使用 GOTO 语句，但请不要。在我看来，创建一个函数并使用它的优点远远大于缺点。

[http://msdn.microsoft.com/en-us/library/ms180188.aspx](http://msdn.microsoft.com/en-us/library/ms180188.aspx)

# c# - 为什么我的财产在智能感知上有一条线？

> ID：16155231
> 
> 赞同：-1
> 
> 时间：2013-04-22T19:32:10.597
> 
> 标签：c#, class, properties, intellisense

当我通过智能感知访问一个属性时，有时它有一条线穿过它，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/4dl2T.png)

为什么会这样？它被弃用了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T19:32:52.547

它已被弃用（已过时），您可以从其[文档页面](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings.appsettings.aspx)中看到它标有`ObsoleteAtrribute`.

您应该改用`ConfigurationManager.AppSettings`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T19:35:34.790

它们已被弃用或过时。它们的存在是为了向后兼容。

在您的特定示例中，建议改用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)。[请参阅 ConfigurationSettings 的备注](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings.aspx)。

# angularjs - AngularJS 复合组件

> ID：16155232
> 
> 赞同：1
> 
> 时间：2013-04-22T19:32:11.847
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在尝试创建一个包含多个子组件的组件。我正在创建一组指令，我团队中的其他开发人员可以使用这些指令来创建自定义搜索表单。例如，他们会创建如下标记：

```
<search-panel name="myCustomSearch">
    <search-field name="dates" type="dateRange"></search-field>
    <search-field name="categories" type="categorySelector" data="{{categories}}"></search-field>
</search-panel> 
```

我有一个搜索面板指令和几个搜索字段指令。搜索面板充当容器，每个搜索字段都提供特定类型的字段（日期范围、提前输入、类别选择器等）。每个搜索字段在其范围内都有一个值属性，我试图找出一种方法让父搜索面板指令在其范围内有一个属性，该属性包含所有子搜索字段的键值集合。

我已经正确渲染了两个指令，但我不确定如何让搜索面板知道/可以访问所有子组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:39:40.750

您可以在`search-field`指令中要求`search-panel`控制器使用`require:'^searchPanel'`

然后在链接函数中，您将拥有到该控制器的链接，因此这些指令可以将自己添加到某个数组中（我假设每个搜索字段都有其隔离范围）：

```
link: function(scope, elem, attrs, spCtrl) {
  spCtrl.fields.push({name: attrs.name, scope: scope});
} 
```

（当然，您可以添加的不是整个范围，而是一些对象，然后观察更改并更新该对象的值字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T19:05:48.987

我的复合组件（多个嵌入指令）的实现基于以下思想：

*   使用一个指令捕获子组件 $transclude
*   用另一个指令输出这个子组件

现场演示[http://nickholub.github.io/angular-composite-component/#/](http://nickholub.github.io/angular-composite-component/#/)

演示源代码[https://github.com/nickholub/angular-composite-component](https://github.com/nickholub/angular-composite-component)

指令源代码[https://github.com/nickholub/angular-composite-component/blob/master/app/directive/angular-composite-component.js](https://github.com/nickholub/angular-composite-component/blob/master/app/directive/angular-composite-component.js)

```
<div cs-composite>
    <div cs-section="header">
        Composite Component Header
    </div>
    <div cs-section="footer">
        Composite Component Footer
        <div>Random Value: {{randomValue}}</div>
        <div>Percentage: {{percentage}}%</div>
    </div>
</div> 
```

捕获内容的指令

```
.directive('csSection', function () {
    return {
      transclude: 'element',
      priority: 100,
      require: '^csComposite',
      link: function (scope, element, attrs, ctrl, $transclude) {
        var directiveTransclude = {
          id: attrs.csSection,
          transclude: $transclude,
          element: element
        };

        ctrl.registerTransclude(directiveTransclude);
      }
    };
  }) 
```

输出内容的指令

```
.directive('csTransclude', function () {
    return {
      transclude: true,
      link: function (scope, element, attrs) {
        var id = attrs.csTransclude;
        var directiveTransclude = scope.transcludes[id];
        if (directiveTransclude) {
          var selectedScope = scope.$new();
          directiveTransclude.transclude(selectedScope, function (clone) {
            element.append(clone);
          });
        }
      }
    };
  }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:21:01.050

Mark Rajcok 在这里有一个很好的 stackoverflow 答案：

[**AngularJS 指令控制器需要父指令控制器？**](https://stackoverflow.com/questions/15622863/angularjs-directive-controllers-requiring-parent-directive-controllers)

带有指向这个非常清晰的 jsFiddle 的链接：http: [//jsfiddle.net/mrajcok/StXFK/](http://jsfiddle.net/mrajcok/StXFK/)

```
<div ng-controller="MyCtrl">
    <div screen>
        <div component>
            <div widget>
                <button ng-click="widgetIt()">Woo Hoo</button>
            </div>
        </div>
    </div>
</div> 
```

JavaScript 在 jsFiddle 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:45:50.250

这里的基本思想是在两者之间创建一个公共控制器，并在指令链接中将它们链接起来。

创建指令时，您可以将控制器传递给第四个参数，如下所示：

```
app.directive('myDirective', function(){
  return {
    scope: true,
    link: function postLink( scope, element, attrs, ctrls ){
      //check ctrls for common link
    }
  }
} 
```

在 angularui/bootstrap 项目中创建的一个很好的例子是**[Tabs 指令](https://github.com/angular-ui/bootstrap/blob/master/src/tabs/tabs.js)**，它有一个通用控制器将它们链接起来，作为从哪里开始的例子。

希望这可以帮助。

# c# - 尝试使用互操作创建 Excel 文件时出现“对象引用未设置为对象的实例”

> ID：16155233
> 
> 赞同：0
> 
> 时间：2013-04-22T19:32:20.757
> 
> 标签：c#, interop, excel-interop

我[在 Internet 上](http://csharp.net-informations.com/excel/csharp-create-excel.htm)`Interop`找到了使用库创建 Excel 文件的代码：

```
object misValue = System.Reflection.Missing.Value;
xlWorkBook = xlApp.Workbooks.Add(misValue);
xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
xlWorkSheet.Cells[1, 1] = "http://csharp.net-informations.com";

xlWorkBook.SaveAs("csharp-Excel.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
xlWorkBook.Close(true, misValue, misValue);
xlApp.Quit();

releaseObject(xlWorkSheet);
releaseObject(xlWorkBook);
releaseObject(xlApp);

MessageBox.Show("Excel file created , you can find the file c:\\csharp-Excel.xls"); 
```

但是当我执行代码时出现此错误：

> 你调用的对象是空的

在这条线上：

```
xlWorkBook = xlApp.Workbooks.Add(misValue); 
```

**编辑**这是堆栈跟踪：

```
System.NullReferenceException was unhandled
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=CMApp
  StackTrace:
       at WindowsFormsApplication1.ExcelDBUserControl.button3_Click(Object sender, EventArgs e) in d:\Private\Dropbox\Work\ClanMovil21Comunicaciones\Apps\WindowsFormsApplication1\WindowsFormsApplication1\ExcelDBUserControl.cs:line 332
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at WindowsFormsApplication1.Program.Main() in d:\Private\Dropbox\Work\ClanMovil21Comunicaciones\Apps\WindowsFormsApplication1\WindowsFormsApplication1\Program.cs:line 20
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:37:20.240

可能在复制/粘贴中丢失？

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application(); 
```

# node.js - 使用 C++ 包装器将参数传递给 Nodejs 模块？

> ID：16155235
> 
> 赞同：1
> 
> 时间：2013-04-22T19:32:26.483
> 
> 标签：node.js

我正在尝试更好地理解开发使用 C++ 包装器的 Nodejs 模块所需的技术。我正在研究尽可能多的信息，例如[Nodejs Documentation](http://nodejs.org/api/addons.html)。为了加深我的理解，我设置了编写 Nodejs 模块的挑战，该模块可以以类似的方式使用：

```
var addon = require('./fruit.js');

var apple = new addon.Fruit(5,7);
var pear  = new addon.Fruit(3,6); 

console.log("Apple: weight =  " + apple.getWeight() + " calories = " 
                                + apple.getCalories());

var bunch = new addon.Grapes( 50, 2, 2 );

console.log("Calories of a grape: " + bunch.getCalories());   

console.log("Total weight of grapes: " + bunch.getBunchWeight()); 
```

**Fruit.js**在哪里：

```
function Fruit(weight, calories) {
   this.weight = weight;
   this.calories = calories;
}

Fruit.prototype.getWeight = function() {
      return this.weight;
};

Fruit.prototype.getCalories = function() {
      return this.calories;
}; 

Grapes.prototype = new Fruit();
Grapes.prototype.constructor=Grapes;
function Grapes(number, weight, calories) {
         this.number=number;
         this.weight=weight;
         this.calories=calories;
}

Grapes.prototype.getTotalWeight = function () {
      return this.number * this.weight;
}

exports.Fruit = Fruit;
exports.Grapes = Grapes; 
```

为了使用 C++ 包装器开发 Nodejs 模块，我完成了[Stack Overflow](https://stackoverflow.com/questions/15394176/implementing-inheritance-in-node-js-bindings)发布，但是当我将参数添加到继承的类时，参数没有传递给基类。我尝试了许多解决方案，但我觉得我对**Inherit(Handle parent)**函数的理解是我出错的地方。代码如下：

**mymod_wrap.h**

```
#ifndef MYOBJECT_WRAP_H
#define MYOBJECT_WRAP_H

#include <node.h>

using namespace v8;

class Fruit : public node::ObjectWrap {
 public:

    Fruit();
  ~Fruit();

  static Persistent<FunctionTemplate> fruit_template;

  static void Init(Handle<Object> exports);  
  static Handle<Value> New(const Arguments& args);  
  static Handle<Value> GetWeight(const Arguments& args);
  static Handle<Value> GetCalories(const Arguments& args);

private:

   double weight_;
   double calories_;

};

class Grapes : public node::ObjectWrap {

public: 
    Grapes();
    ~Grapes();

    static Persistent<FunctionTemplate> grapes_template;

    static void Init(Handle<Object> exports);
    static Handle<Value> New(const Arguments& args);

    static Handle<Value> GetBunchWeight(const Arguments& args);

private:

    int number_; 

};

#endif 
```

**mymod_wrap.cc**

```
#include <node.h>
#include "mymod_wrap.h"

using namespace v8;

Fruit::Fruit() {};
Fruit::~Fruit() {};

void Fruit::Init(Handle<Object> exports) {

  Local<FunctionTemplate> tpl = FunctionTemplate::New(New);

  fruit_template = Persistent<FunctionTemplate>::New(tpl);

  fruit_template->InstanceTemplate()->SetInternalFieldCount(1);  
  fruit_template->SetClassName(String::NewSymbol("Fruit"));

  NODE_SET_PROTOTYPE_METHOD(fruit_template, "getWeight", GetWeight);
  NODE_SET_PROTOTYPE_METHOD(fruit_template, "getCalories", GetCalories);

  exports->Set(String::NewSymbol("Fruit"), fruit_template->GetFunction());

}

Handle<Value> Fruit::New(const Arguments& args) {
  HandleScope scope;

  Fruit* obj = new Fruit(); // Conventional C++ Call see notes

  obj->weight_   = args[0]->IsUndefined() ? 0 : args[0]->NumberValue();
  obj->calories_ = args[1]->IsUndefined() ? 0 : args[1]->NumberValue();

  obj->Wrap(args.This());

  return args.This();
}

Handle<Value> Fruit::GetWeight(const Arguments& args) {
  HandleScope scope;

  Fruit* obj = ObjectWrap::Unwrap<Fruit>(args.This());

  return scope.Close(Number::New(obj->weight_));
}

Handle<Value> Fruit::GetCalories(const Arguments& args) {
  HandleScope scope;

  Fruit* obj = ObjectWrap::Unwrap<Fruit>(args.This());

  return scope.Close(Number::New(obj->calories_));

}

Persistent<FunctionTemplate> Fruit::fruit_template;

Grapes::Grapes() {};
Grapes::~Grapes() {};

void Grapes::Init(Handle<Object> exports) {

  Local<FunctionTemplate> tpl = FunctionTemplate::New(New);

  grapes_template = Persistent<FunctionTemplate>::New(tpl);

  grapes_template->Inherit(Fruit::fruit_template);

  grapes_template->InstanceTemplate()->SetInternalFieldCount(1);

  grapes_template->SetClassName(String::NewSymbol("Grapes"));

   NODE_SET_PROTOTYPE_METHOD(grapes_template, "getBunchWeight", GetBunchWeight);

  exports->Set(String::NewSymbol("Grapes"), grapes_template->GetFunction());

}

Handle<Value> Grapes::New(const Arguments& args ){

      HandleScope scope;

      Grapes* obj = new Grapes();

      obj->number_  = args[0]->IsUndefined() ? 0 : args[0]->NumberValue(); 

      /* the above works but need to pass args[1], args[2] to */
      /*  "weight_" and "calories_" in the base class ?        */

      obj->Wrap(args.This());

      return args.This();

}

Handle<Value> Grapes::GetBunchWeight(const Arguments& args) {

    HandleScope scope;

    Grapes* obj = ObjectWrap::Unwrap<Grapes>(args.This());

    /* Need to unwrap the base object to get "weight_" */
    /* multiply with "number_" to get the total weight of the bunch */

    return scope.Close(Number::New( /* return calculated total weight */)); 

}

Persistent<FunctionTemplate>Grapes::grapes_template; 
```

**我的mod.cc**

```
#include <node.h>

#include "mymod_wrap.h"

using namespace v8;

void InitAll(Handle<Object> exports) {
  Fruit::Init(exports);
  Grapes::Init(exports);
}

NODE_MODULE(fruit, InitAll) 
```

我在代码中添加了一些注释来表明我认为问题出在哪里。

感谢任何关于我哪里出错的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:20:16.207

首先，我认为您对 JS 方面的理解有一个轻微的误解，我想先澄清一下。

```
Grapes.prototype = new Fruit(); 
```

这不是解决此问题的好方法，因为`Fruit`即使您的`Fruit`函数有两个参数，它也会执行一次且仅一次没有参数的构造函数。这有效地做到了

```
Grapes.prototype.__proto__ = Fruit;
Grapes.prototype.weight = undefined;
Grapes.prototype.calories = undefined; 
```

你真正想要的只是第一行，它是这样完成的：

```
var util = require('util');
util.inherits(Grapes, Fruit);

// or this if you want to do it manually.
function GrapesProto(){}
GrapesProto.prototype = Fruit;
Grapes.prototype = new GrapesProto(); 
```

`Grapes`构造调用`Fruit`超级构造函数。

```
function Grapes(number, weight, calories) {
     this.number = number;

     // Call the 'super' constructor.
     Fruit.call(this, weight, calories);
} 
```

现在，除此之外，我认为更清楚一点，您要在 C++ 中进行这项工作，实际上应该使用标准继承进行`Grapes`扩展，因为这是您可以进行正确调用的唯一方法。`Fruit``C++``super`

```
class Grapes : public Fruit { 
```

我也会像上面的 JS 那样让你的`Grapes`并且`Fruit`有非默认的构造函数调用 super 。您的实现期望每个`Grapes`对象都有一个重量和卡路里值，如果没有这个，情况就不会如此。如果您希望能够从`Fruit`C++ 中调用继承的模板函数，那么它需要能够`Unwrap`将`Grapes`对象作为 a `Fruit`，这意味着它需要是一个子类。

所以基本上：

```
Handle<Value> Grapes::New(const Arguments& args ){
  double weight  = args[0]->IsUndefined() ? 0 : args[0]->NumberValue(); 
  double calories  = args[1]->IsUndefined() ? 0 : args[1]->NumberValue(); 
  double number  = args[2]->IsUndefined() ? 0 : args[2]->NumberValue(); 
  Grapes* obj = new Grapes(number, weight, calories);

// AND

Grapes::Grapes(int number, double weight, double calories)
  : Fruit(weight, calories), number_(number) {}; 
```

并且几乎反映了这一点`Fruit`。

# c# - Asp.net 在 mvc4 中形成身份验证 - 看起来很简单吗？

> ID：16155244
> 
> 赞同：0
> 
> 时间：2013-04-22T19:33:21.463
> 
> 标签：c#, asp.net-mvc-4, forms-authentication

我正在开发这个 asp.net mvc4 应用程序，而且我是 .net 世界的这一部分的新手。我已经阅读了十几篇文章，并浏览了几个小时关于复数视觉的材料，但我忍不住提出了这个问题；Webforms 身份验证是否像他们所说的那样容易在基本级别上实现？我的意思是注册全局过滤器并只允许匿名访问我想要公开的操作？然后当然是实现登录逻辑、设置 cookie 等。

我想我想说服自己，这是否是正确的开始方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:38:35.853

是的，这很容易。

假设您将使用基本身份验证（仅隔离创建登录表单的问题）。

*   第 1 步：添加全局过滤器`System.Web.Mvc.AuthorizeAttribute`。
*   第 2 步：添加`[AllowAnonymous]`到您想要公开的控制器操作。
*   结果：用户在查看非公共 URL 时被要求输入他的凭据。

现在，当它工作时，您可以设置表单身份验证 - 除了创建 HTML 之外，它只是几行主要围绕`FormsAuthentication.RedirectFromLoginPage()`.

# java - 外部文件中的系统属性？

> ID：16155247
> 
> 赞同：1
> 
> 时间：2013-04-22T19:33:33.720
> 
> 标签：java, maven, selenium, properties, automation

我今天刚开始使用 Maven，所以我还在跟上进度。我在 Eclipse 中设置了一个硒测试，在我的测试中我有`baseUrl = System.getProperty("webdriver.base.url");`

然后我通过命令行传递我希望基本 url 为的参数运行测试

`mvn clean test -Dwebdriver.base.url=http://www.google.com`

我的问题是我正在做一个测试，我需要传入很多参数，并且如果我可以从属性文件中读取它们而不是使用大量的命令行参数，我会更喜欢。

这是可能的吗？谁能给我一个教程，以便我进行设置？

我已经阅读了有关我添加到我的 mojo properties maven 插件的信息，`pom.xml`但到目前为止我还无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:36:53.813

将属性文件`src/test/resources`从测试类中读取为资源

```
InputStream in = YourTestClass.class.getClassLoader().getResourceAsStream("some.properties");
Properties properties = new Properties();
properties.load(in);
// access key values
properties.getProperty("someKey") 
```

注意：这里不处理异常，需要自己处理

# scala - 为什么 Scala 库是用可变状态实现的？

> ID：16155248
> 
> 赞同：2
> 
> 时间：2013-04-22T19:33:51.257
> 
> 标签：scala, immutability

为什么 Scala 标准库中的某些方法使用可变状态实现？

例如，`find`作为类的一部分的方法`scala.Iterator`被实现为

```
def find(p: A => Boolean): Option[A] = {
  var res: Option[A] = None
  while (res.isEmpty && hasNext) {
    val e = next()
    if (p(e)) res = Some(e)
  }
  res
} 
```

可以作为`@tailrec`'d 方法实现，可能类似于

```
def findNew(p: A => Boolean): Option[A] = {

  @tailrec
  def findRec(e: A): Option[A] = {
    if (p(e)) Some(e)
    else {
      if (hasNext) findRec(next())
      else None
    }
  }

  if (hasNext) findRec(next())
  else None
} 
```

现在我想一个论点可能是可变状态的使用，而`while`循环可能更有效，这在库代码中非常重要，可以理解，但对于`@tailrec`'d 方法来说真的是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:39:15.637

只要他**不被共享**，拥有可变状态就没有坏处。

在您的示例中，无法从外部访问可变 var，因此该可变变量不可能由于副作用而发生变化。

尽可能地强制执行不变性总是好的，但是当性能很重要时，只要以安全的方式限制它，拥有一些可变性就没有错。

*注意：迭代器是一种没有副作用的数据结构，这可能会导致一些奇怪的行为，但这是另一回事，绝不是以这种方式设计方法的原因。您也会在不可变数据结构中找到类似的方法。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:40:21.967

在这种情况下，很可能与循环`tailrec`具有相同的性能。`while`我想说，在这种情况下，`while`循环解决方案更短更简洁。

但是，迭代器无论如何都是一个可变的抽象，因此使用尾递归方法来避免这种情况的好处`var`是值得怀疑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:09:58.307

Scala 的设计目的不是为了*功能纯度*，而是为了广泛有用的功能。其中一部分包括尝试最有效地实现基本库例程（当然不是普遍正确，但经常如此）。

因此，如果您有两个可能的接口：

```
trait Iterator[A] { def next: A }
trait FunctionalIterator[A] { def next: (A, FunctionalIterator[A]) } 
```

而第二个又笨又慢，选择第一个还是比较明智​​的。

当一个纯功能的实现对于大部分用例来说都优越时，你通常会找到一个纯功能的实现。

当涉及到简单地使用`while`循环与递归时，任何一个都足够容易维护，因此这实际上取决于编码器的偏好。请注意，`find`必须`final`在`tailrec`案例中进行标记，以便`while`保留更多灵活性：

```
trait Foo {
  def next: Int
  def foo: Int = {
    var a = next
    while (a < 0) a = next
    a
  }
}

defined trait Foo

trait Bar {
  def next: Int
  @tailrec def bar: Int = {
    val a = next
    if (a < 0) bar else a
  }
}

<console>:10: error: could not optimize @tailrec annotated method bar:
it is neither private nor final so can be overridden
             @tailrec def bar: Int = {
                          ^ 
```

有一些方法可以解决这个问题（嵌套方法、final、重定向到私有方法等），但它往往会在`while`语法上更紧凑的地方添加样板。

# php - 可点击链接有问题

> ID：16155253
> 
> 赞同：0
> 
> 时间：2013-04-22T19:34:08.130
> 
> 标签：php, mysql

所以这是我的代码：

```
$sql = "SELECT * FROM $tbl_name ORDER BY id DESC LIMIT $start, $limit";
$result = mysql_query($sql);
while ($row = mysql_fetch_array($result)) {
  echo "<a href =\"vicevi.php?id=$row[id]\">".$row['Title'];"</a>";
  echo "<br>";
  echo nl2br($row["VicText"]);
  echo "<hr>";
} 
```

我得到了链接`vicevi.php?id=x`（*x=any number*），但它没有打开特定的 ID。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:35:39.357

`echo "<a href =\"vicevi.php?id=" . $row["id"] . "\">".$row['Title'] . "</a>";`

除了这个`$row[id]`问题，你还有一个`;`额外的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:36:30.227

```
echo "<a href =\"vicevi.php?id=".$row['id']."\>".$row['Title']."</a>"; 
```

# php - php在准备好的语句中循环失败

> ID：16155260
> 
> 赞同：0
> 
> 时间：2013-04-22T19:34:37.507
> 
> 标签：php, while-loop, prepared-statement, prepare

下面的代码是我`sitemap.xml`文件的一部分。我的目标是写出我批准文章的最后修改日期。该数据有两种可能性。

1.  如果文章没有被批准的评论，那么`lastmod`就是文章的批准日期。
2.  如果文章至少有 1 条批准评论，`lastmod`则为最后批准评论的批准日期。

我的输出中的错误是：

1.  我的数据库中有一些没有评论的文章，​​但这些无评论的文章获得了其他一些文章的最后评论的批准日期。结果，由于我今天有一些评论被批准，所有那些没有评论的文章的最后模式都是今天的日期。但是这些文章已经很老了。
2.  `$newsql`在我的第二个while循环中在屏幕上打印**“newstmt prepare error”**，所以`if ($newstmt = $connection->prepare($newsql))`部分不起作用

你能纠正我吗？

谢谢您最好的问候

## 代码

```
<?php       
//if spesific article is approved then its last modification date = approval date of article
//if spesific article has approved comment(s), then modification date = approval date of its last comment
$sql = "SELECT col_author, col_title, col_approvaldate FROM articles WHERE col_status = ? ORDER by col_approvaldate DESC";

if ($stmt = $connection->prepare($sql)) 
{
    /* bind parameters */
    $stmt -> bind_param("s", $bindparam1);

    /* assign value */
    $bindparam1 = 'approved';

    /* execute statement */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($author, $title, $articledate);

    /* fetch values */
    while ($stmt->fetch()) 
    {
        //if exist, get approved newest comment approval date
        $newsql = "SELECT col_approvaldate FROM comments WHERE col_status = ? AND col_for_author = ? AND col_for_title = ? ORDER by col_approvaldate DESC LIMIT 1";
        if ($newstmt = $connection->prepare($newsql))
        {
            /* bind parameters */
            $newstmt -> bind_param("sss", $ybindparam1, $ybindparam2, $ybindparam3);

            /* give values */
            $ybindparam1 = 'approved';
            $ybindparam2 = $author;
            $ybindparam3 = $title;

            /* execute statement */
            $newstmt->execute();

            /* bind result variables */
            $newstmt->bind_result($commentdate);

            /* fetch values */
            $biggerdate = '';

            while ($newstmt->fetch())
            {                   
                // is there any approved comment for this article?
                if (!is_null($commentdate))
                {$biggerdate = $commentdate;}
            }
            /* close statement */
            $newstmt->close();                  
        }
        else {echo 'newstmt prepare error';}

        //print the result
        echo '<url>'."\r\n";
        echo "\t".'<loc>'.root_folder.urlencode('articles').'/'.urlencode(space_to_dash($author)).'/'.urlencode(space_to_dash(no_punctuation($title))).'</loc>'."\r\n";             
        //if there is no approved comment for this article
        if ($biggerdate == '') 
        {
            $biggerdate = $articledate;
        }
        $datetime = new DateTime($biggerdate);
        $biggerdate = $datetime->format('Y-m-d\TH:i:sP');
        echo "\t".'<lastmod>'.$biggerdate.'</lastmod>'."\r\n";
        echo '</url>'."\r\n";

    }
    /* close statement */
    $stmt->close();

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:02:40.470

它必须如何

1.  您必须使用单个查询来获取数据。
2.  必须使用文章 ID 链接评论
3.  应该使用[PDO而不是 mysqli](https://stackoverflow.com/tags/pdo/info)

所以，给你：

```
$sql = "SELECT author, title, a.approvaldate, max(c.approvdate) biggerdate
        FROM articles a
        LEFT JOIN comments c ON c.article_id = a.id AND c.status='approved'
        WHERE a.status = 'approved' 
        GROUP BY a.id
        ORDER BY a.approvaldate DESC";
$stmt = $con->prepare($sql);
$stmt->execute();
$data = $stmt->fetchall();
foreach ($data as $row) {
    extract($row);
    echo "<url>\r\n";
    echo "\t<loc>".root_folder.'articles';
    echo '/'.urlencode(space_to_dash($author));
    echo '/'.urlencode(space_to_dash(no_punctuation($title)))."</loc>\r\n";
    //if there is no approved comment for this article
    if (!$biggerdate) 
    {
        $biggerdate = $approvaldate;
    }
    $datetime = new DateTime($biggerdate);
    $biggerdate = $datetime->format('Y-m-d\TH:i:sP');
    echo "\t<lastmod>$biggerdate</lastmod>\r\n";
    echo "</url>\r\n";
} 
```

它当然没有经过测试，显然包含许多错误，只是为了向您展示一个想法。

首先，您必须使查询工作。
然后读取链接的 PDO 标签 wiki 并建立连接。
然后修复所有错误和拼写错误（如果有）

# mysql - 从备份中恢复 mysql 数据库时遇到问题

> ID：16155262
> 
> 赞同：-1
> 
> 时间：2013-04-22T19:34:44.367
> 
> 标签：mysql

朋友们，我一直在尝试从我用 mysqldump 创建的备份中恢复一个 mysql 数据库。我一直在使用这段代码（在命令提示符 Win XP 和 Win 7 中运行）

```
"C:\Program Files\MySQL\MySQL Server 5.5\mysql --user=root --password=password --host= localhost --port= 3306 --database=dbname < C:/Backup/dbname.sql" 
```

我收到“文件名、目录名或卷标语法不正确”错误消息。我已经用谷歌搜索了这个错误，但与 mysql 无关。

*我的mysql服务器启动并运行没有问题。（即使 mysqldump 命令也有效） *即使我从 C:\Program Files\MySQL\MySQL Server 5.5\mysql 打开命令提示符，问题也是一样的 *我试图删除“”，但没有帮助。*我曾尝试使用反斜杠 () 而不是 (/)，但没有帮助。

对于这个，我将非常感谢任何帮助。这里有什么问题？这是什么文件名，目录名.... 语法错误？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:49:30.897

我认为这是因为您在只需要引用程序名称时引用了整个命令，因为路径中有空格

此外，备份文件的路径看起来像是用“/”代替了“\”

应该更像（假设选项是正确的：

```
"C:\Program Files\MySQL\MySQL Server 5.5\mysql.exe"  --user=root --password=password --host= localhost --port=3306 --database=dbname < C:\Backup\dbname.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:49:59.073

您可以从命令行退出您尝试执行的文件，然后登录 MySQL 并在其中执行以下操作：

```
source C:/Backup/dbname.sql 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-29T19:07:32.247

1.  打开**命令提示符**并输入

> **cd C:\Program Files (x86)\MySQL\MySQL Server 5.5\bin**

按回车

或者，

直接打开这个目录“ ***C:\Program Files (x86)\MySQL\MySQL Server 5.5\bin*** ”，然后在**键盘上按****LEFT SHIFT KEY** ，然后在目录窗口上按**右键。**

 ****2.  **输入这个**

    > **mysql -u root -p12345 -h localhost ""DATABASE_NAME"" < e:\tmp.sql**

它将 100% 正确工作****

# actionscript-3 - 在 For 循环中访问数组中的项目索引

> ID：16155263
> 
> 赞同：0
> 
> 时间：2013-04-22T19:34:46.007
> 
> 标签：actionscript-3

我有一个看起来像这样的数组：

```
public var meatItems:Array = [{label: "None", data: 0},
                              {label: "Chicken", data: 1},
                              {label:"Beef", data: 2},
                              {label: "Ham", data: 3},
                              {label: "Lamb", data: 4},
                              {label: "Pork", data: 5},
                              {label: "Sausages", data: 6},
                              {label: "Venison", data: 7},
                              {label: "Turkey", data: 8},
                              {label: "Duck", data: 9},
                              {label: "Fish", data: 10}]; 
```

我想遍历这个数组中的每个项目，并通过用该特定项目填充 TextField 的 .text 属性将其插入到滚动列表中。

```
var i:Number;
for (i=0;  i < meatItems.length; i++) {
    itemTextField.text = meatItems[i].toString();
    _item = new Item();
    _item.addChild(_itemTextField);
    _item.y = i * _itemPosition;
} 
```

我知道很简单，但我一直在研究这个问题，但没有找到任何答案

此刻，当我运行它时，它只显示一个项目，它说`[object Object]`而不是文本

编辑：我意识到我需要`_itemTextField.text = meatItems[i].label.toString();`解决文本问题，但它仍然只显示一个项目，我的循环有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:40:38.090

`meatItems[0]`（例如）是`{label: "None", data: 0}`。那是一个对象。使用该方法将对象转换为字符串时，无论其内容如何`toString`，​​对象都表示为。`[object Object]`如果你想要一个更有用的输出，你需要自己构建它。

例如：

```
_itemTextField.text = meatItems[i].label + '(' + meatItems[i].data + ')'; 
```

> [...] 但它仍然只显示一项，我的循环有什么问题？

另一个问题是您遍历数组，并不断将文本字段的文本属性设置为当前项目。这意味着您在每次迭代中都会覆盖旧值，并且只保留最后一个值。如果您想将它们全部放在文本字段中，您可以例如附加新文本（这里在每个项目的末尾用逗号分隔 - 这意味着最后会有一个尾随逗号，您可能想要剥离）：

```
_itemTextField.text += meatItems[i].label +  ', '; 
```

# mongodb - MongoDB：如何获取子文档字段值的不同列表？

> ID：16155266
> 
> 赞同：31
> 
> 时间：2013-04-22T19:35:20.040
> 
> 标签：mongodb, distinct, nosql

假设我收集了以下文件：

```
{
   "family": "Smith",
   "children": [
        {
            "child_name": "John"
        },
        {
            "child_name": "Anna"
        },
    ]
}

{
   "family": "Williams",
   "children": [
        {
            "child_name": "Anna"
        },
        {
            "child_name": "Kevin"
        },
    ]
} 
```

现在我想以某种方式获得以下所有家庭的唯一孩子姓名列表：

```
[ "John", "Anna", "Kevin" ] 
```

结果的结构可能不同。如何在 MongoDB 中实现这一点？应该很简单，但我无法弄清楚。我在集合上尝试了 aggregate() 函数，但后来我不知道如何应用 distinct() 函数。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-22T19:59:08.727

你可以这样做：

```
db.collection.distinct("children.child_name"); 
```

在您的情况下，它返回：

```
[ "John", "Anna", "Kevin" ] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T19:50:50.930

借助帮助聚合框架：

```
db.collection.aggregate([{$unwind:'$children'}, {$group:{_id:'$children.child_name'}}]) 
```

或更多的兴趣;) 名称的频率：

```
db.collection.aggregate([{$unwind:'$children'}, {$group:{_id:'$children.child_name', freq:{$sum:1}}}]) 
```

# ruby-on-rails-3 - 路由重载http动词的问题

> ID：16155268
> 
> 赞同：0
> 
> 时间：2013-04-22T19:35:21.180
> 
> 标签：ruby-on-rails-3, routing

我们在控制器（称为“residential_springs”）中使用相同的操作来处理和呈现表单

```
def index
  //..code...
  if params[:authenticity_token]
    if process_post(params)
      redirect_to checkout_index_url 
    end
  end
end

def process_post(params)
  return true 
end 
```

然后在我们拥有的路线中

```
get "residential_springs/index"
post "residential_springs/index" 
```

表单实际上指向了这个动作

```
=form_for @order_garage_door, :url => {:action => 'index'} do |f|
//form stuff... 
```

但是我们不断收到路由错误

```
No route matches "/residential_springs/index" 
```

疯狂的是我们已经在这个项目中设置了很多，它对其他控制器工作正常，所以我们知道我们错过了一些疯狂的小而愚蠢的东西。但我认为该项目的每个人都有隧道视野，新的眼睛将不胜感激。

# c# - 在javascript和c#中传递参数问题

> ID：16155272
> 
> 赞同：0
> 
> 时间：2013-04-22T19:35:45.483
> 
> 标签：c#, javascript, asp.net

参数中包含一些格式信息，如粗体、斜体等。事实证明这是被禁止的。

有这个文本编辑器和一个按钮。单击按钮后，我们会将文本传递到服务器端并将其保存在数据库中。

这是错误信息：

> 从客户端检测到潜在危险的 Request.QueryString 值 (text=" `efh<b>esy</b>ytry`")。
> 
> 说明：ASP.NET 在请求中检测到具有潜在危险的数据，因为它可能包含 HTML 标记或脚本。这些数据可能表示试图破坏您的应用程序的安全性，例如跨站点脚本攻击。如果这种类型的输入适合您的应用程序，您可以在网页中包含代码以明确允许它。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=212874](http://go.microsoft.com/fwlink/?LinkID=212874)。
> 
> 异常详细信息：System.Web.HttpRequestValidationException：从客户端检测到潜在危险的 Request.QueryString 值（文本 =“ `efh<b>esy</b>ytry`”）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:45:18.007

尝试：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
    <pages validateRequest="false" />
</system.web> 
```

参考：[ValidateRequest="false" 在 Asp.Net 4 中不起作用](https://stackoverflow.com/questions/2673850/validaterequest-false-doesnt-work-in-asp-net-4)

# javascript - Twitter Bootstrap DatePicker 不起作用

> ID：16155274
> 
> 赞同：0
> 
> 时间：2013-04-22T19:35:51.713
> 
> 标签：javascript, css, twitter-bootstrap

从[这里开始，](http://www.eyecon.ro/bootstrap-datepicker/)我使用以下 html 代码：

```
<div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
  <input class="span2" size="16" type="text" value="12-02-2012">
  <span class="add-on"><i class="icon-th"></i></span>
</div> 
```

在身体的尽头，我称之为：

```
<script src="../js/bootstrap-datepicker.js"></script>
<script>$('#dp3').datepicker(); </script>
  </body> 
```

我还包括以下内容

```
<link href="../css/datepicker.css" rel="stylesheet"> 
```

但是当我单击该字段时，没有打开日期选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:13:18.137

如前所述，确保您包含 jQuery，并将您的 datepicker 初始化包装在 jQuery ready() 函数中，如下所示：

```
$(document).ready(function($) {
  $('#dp3').datepicker();
}); 
```

看到它在这里工作：http: [//jsfiddle.net/rUa7M/](http://jsfiddle.net/rUa7M/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T20:24:46.000

或者

```
$(function() {
  $('#dp3').datepicker();
}); 
```

# django - django webapi：将 django 模型转储为 JSON

> ID：16155277
> 
> 赞同：1
> 
> 时间：2013-04-22T19:36:04.043
> 
> 标签：django, json, model

我正在尝试将 django 模型转储为 JSON 格式。我试过这样做：

```
import json
from api.models import User
from django.http import HttpResponse

def users(request):
    users = User.objects.all()
    return HttpResponse(json.dumps(users), content_type="application/json") 
```

但它会引发以下错误：

```
[<User: Paul McCartney>, <User: John Lennon>, <User: George Harrison>, <User: Ringo Starr>] is not JSON serializable 
```

我知道我可以遍历所有对象并创建一个手动的字典列表，但我希望有更好的方法来做到这一点。有没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T20:05:12.790

```
from django.core import serializers

data = serializers.serialize('json', User.objects.all()) 
```

您可以了解如何在反序列化中获取这些数据：

```
import json
json.loads(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T12:36:39.080

我知道这是一个老问题，但我发现将其转换为列表可以对其进行序列化。

```
import json
from api.models import User
from django.http import HttpResponse

def users(request):
    users = list(User.objects.all())
    return HttpResponse(json.dumps(users), content_type="application/json") 
```

# android - ActionBarSherlock 不显示硬件按钮菜单

> ID：16155279
> 
> 赞同：3
> 
> 时间：2013-04-22T19:36:06.093
> 
> 标签：android, actionbarsherlock

我有两个菜单项，但是其中一个在纵向模式下变得无法访问，因为操作栏上没有空间。我假设它应该被移到活动底部可访问的选项菜单中，并通过我的姜饼设备上的硬件菜单按钮访问，但这不会发生。

如果我将设备置于横向模式，则两个菜单项都会在操作栏上可见。有什么想法可以解决这个问题吗？

MainActivity.java

```
getSupportActionBar()
    .setDisplayShowCustomEnabled(true);
    getSupportActionBar().setCustomView(R.layout.actionbar_main);
    getSupportActionBar().setIcon(R.drawable.title);
    getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

菜单.xml

```
 <item android:id="@+id/photos"

        android:title="Collections"
        android:icon="@drawable/content_picture"
                android:showAsAction="ifRoom"

        /> 

  <item android:id="@+id/contact"
        android:title="Contact"
        android:icon="@drawable/content_email"
                android:showAsAction="ifRoom"

      /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:58:59.927

带有硬件菜单按钮的设备中不显示溢出菜单。这就是运行 ICS+ 的标准设备的行为方式。ActionbarSherlock 复制了这种行为。

有关详细信息，您可以参考[ActionBarSherlock 中的强制溢出菜单](https://stackoverflow.com/questions/13179620/force-overflow-menu-in-actionbarsherlock)和[如何在具有菜单按钮](https://stackoverflow.com/questions/9286822/how-to-force-use-of-overflow-menu-on-devices-with-menu-button)的设备上强制使用溢出菜单。

# html-table - html 表格 td 大小固定和相对混合

> ID：16155282
> 
> 赞同：0
> 
> 时间：2013-04-22T19:36:13.827
> 
> 标签：html-table, width

例如，

```
<table width="100%">
  <tr>
     <td width="40"></td> // left margin

     <td width="10">0</td>
     <td width="%"></td>
     <td width="10">3</td>
     <td width="%">0</td>
     <td width="10">6</td>
     <td width="%">0</td>
     <td width="10">9</td>

     <td width="40"></td> // right margin
  </tr>
</table> 
```

我想让固定数字列是固定的，而其他列是相对的。我每个都试了 25%。但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:01:48.017

基于这个问题，这就是我将如何构建它。这是一个演示代码的[JSFiddle 。](http://jsfiddle.net/P8ZPy/2/)

CSS：

```
table {
    width: 100%;
}

td.fixed {
    position: fixed;
    width: 40%;
}

td.others {
    padding: 0 10px;
    width: 10%;
} 
```

HTML：

```
<table>
  <tr>
     <td class="fixed"></td>

     <td class="others">0</td>
     <td class="others">3</td>
     <td class="others">6</td>
     <td class="others">9</td>

     <td class="fixed"></td>
  </tr>
</table> 
```

# c - c中意外的数组分配

> ID：16155284
> 
> 赞同：0
> 
> 时间：2013-04-22T19:36:19.717
> 
> 标签：c, dynamic-memory-allocation

我写了这段代码：

```
 Resident_x * infos_shorted;
        Residents=6;
        infos_shorted=(Resident_x *)malloc(Residents*(sizeof(Resident_x)));
        i=0;
        while ((infos_shorted+i)!=NULL){
              printf ("%d\n", i);
              i++;
           } 
```

虽然有人会期望我分配了 6 个内存位置，但当我运行它时，它会一直打印 i 直到我手动终止它。

这就是我为找到我的主要问题的答案所做的工作：

我写的 ：

```
 Resident_x * infos_shorted;
    Residents=6;
    infos_shorted[i].height[8]=7;
    infos_shorted=(Resident_x *)malloc(Residents*(sizeof(Resident_x)));
    for (i=0; i<=Residents+4; i++){
          printf ("%d %d\n", infos_shorted[i].height, i);
    } 
```

我得到了正确打印的 infos_shorted[i].height[8] 。那个怎么样;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:40:12.983

```
while ((infos_shorted+i)!=NULL){ 
```

只要`i > Residents`，你有未定义的行为。然而，`infos_shorted + i`很可能会评估为.`i*sizeof(Resident_x)`值后面的地址字节`infos_shorted`。没有理由期望这样的地址是空指针（直到它换行，但这是更多未定义的行为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:48:00.890

您期望 C 运行时按照您希望的方式运行；可悲的是，它的行为方式并非如此。malloc 为您分配一块内存，由您决定它的开始和结束在哪里

你必须做

```
 const int NRES = 6;
  Resident_x * infos_shorted;
    Residents=NRES;
    infos_shorted=(Resident_x *)malloc(Residents*(sizeof(Resident_x)));
    i=0;
    for(int i = 0; i < NRES; i++){
       ...info_shorted[i];
       } 
```

# android - 如何在Android中处理视图外的触摸？

> ID：16155285
> 
> 赞同：13
> 
> 时间：2013-04-22T19:36:20.030
> 
> 标签：android, gmail, undo

我发现在 Android 的 Gmail 应用程序中使用了[“撤消栏”的实现。](https://code.google.com/p/romannurik-code/source/browse/misc/undobar)“UndoBar”基本上是一个显示在布局顶部的视图。

不幸的是，它并不完整——它没有通过触摸栏外的屏幕来关闭栏的功能。

我已经实现`FrameLayout`了覆盖`onInterceptTouchEvent`来处理酒吧解雇，但触摸操作栏什么都不做。

有什么方法可以从操作栏中处理此类事件？

下面有一个带有“UndoBar”的图像。我想在红点表示的操作栏中处理触摸时要实现的目标。

![在此处输入图像描述](https://i.stack.imgur.com/DuwNB.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T06:31:05.837

尝试覆盖您的活动的 dispatchTouchEvent。

```
dispatchTouchEvent(MotionEvent event){

     int x= event.getRawX();
     int y= event.getRawY();

         if(/*check bounds of your view*/){
          // set your views visiblity to gone or what you want. 
         }
      //for prevent consuming the event.
      return super().dispatchTouchEvent(event);    
} 
```

**更新**

```
dispatchTouchEvent(MotionEvent event){

     int x= event.getRawX();
     int y= event.getRawY();

      return super().dispatchTouchEvent(event)||[YourView].onTouch(event);    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T08:41:23.607

要捕获包括 ActionBar 在内的整个屏幕的触摸事件，请向 Window 添加一个视图。

```
View overlayView = new View(this);
WindowManager.LayoutParams p = new WindowManager.LayoutParams();
p.gravity = Gravity.TOP;
p.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL;
p.token = overlayView.getWindowToken();
overlayView.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View view, MotionEvent event) {
        // Get the action bar
        int actionBarHeight = actionBar.getHeight();
        if ((event.getAction() == MotionEvent.ACTION_DOWN)
            && (event.getRawY() < actionBarHeight)) {
            // Touch inside the actionBar so let's consume it
            // Do something
            return true;
        }
        return false;
    }
});
WindowManager mWindowManager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
mWindowManager.addView(overlayView, p); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-10T23:37:23.987

你应该重写 Activity 的 dispatchTouchEvent(ev: MotionEvent) 方法

* * *

看看这个解除无限期 Snackbar 的例子

```
class MainActivity : AppCompatActivity() {

private var snackbar: Snackbar? = null

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    setSupportActionBar(toolbar)

    // show indefinite snackbar
    snackbar = Snackbar.make(coordinator_layout, "Hello world!", Snackbar.LENGTH_INDEFINITE).apply {
        show()
    }
}

/**
 * On each touch event:
 * Check is [snackbar] present and displayed
 * and dismiss it if user touched anywhere outside it's bounds
 */
override fun dispatchTouchEvent(ev: MotionEvent): Boolean {
    // dismiss shown snackbar if user tapped anywhere outside snackbar
    snackbar?.takeIf { it.isShown }?.run {
        val touchPoint = Point(Math.round(ev.rawX), Math.round(ev.rawY))
        if (!isPointInsideViewBounds(view, touchPoint)) {
            dismiss()
            snackbar = null // set snackbar to null to prevent this block being executed twice
        }
    }

    // call super
    return super.dispatchTouchEvent(ev)
}

/**
 * Defines bounds of displayed view and check is it contains [Point]
 * @param view View to define bounds
 * @param point Point to check inside bounds
 * @return `true` if view bounds contains point, `false` - otherwise
 */
private fun isPointInsideViewBounds(view: View, point: Point): Boolean = Rect().run {
    // get view rectangle
    view.getDrawingRect(this)

    // apply offset
    IntArray(2).also { locationOnScreen ->
        view.getLocationOnScreen(locationOnScreen)
        offset(locationOnScreen[0], locationOnScreen[1])
    }

    // check is rectangle contains point
    contains(point.x, point.y)
}
} 
```

或查看完整的[要点](https://gist.github.com/and291/ce5704c4163f8dcd9d06b1ab6a9850cf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T15:01:58.940

你`onTouchEvent`在你的 FrameLayout 上试过了吗？

我还没有尝试过，但我认为这对我来说是有意义的，如果发生`MotionEvent`这种布局`ACTION_OUTSIDE`动作应该被解雇。

试试下面的。

```
public boolean onTouchEvent(MotionEvent event)  
{  

       if(event.getAction() == MotionEvent.ACTION_OUTSIDE){  

             undoBar.setVisibility(View.GONE);
       }  
       return true;  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T01:58:02.553

有 2 种可能的解决方案。

正如我在评论中提到的，您可以在您的和最轻微的滚动上实现一个滚动侦听器`ListView`和简单的调用`hideUndoBar(true)`。

或者

您可以修改`UndoBarController`. 您会注意到，撤消栏只是在构造函数中的监听器和视图的显示方法 setFocus 中的一个`View`耳光。`OnFocusChange``View`

在您`OnFocusChange`检查视图是否失去焦点并调用`hideUndoBar(true)`.

# 更新

我在这里创建了一个要点[https://gist.github.com/atgheb/5551961](https://gist.github.com/atgheb/5551961) 展示了如何更改`UndoBarController`以添加失去焦点时隐藏的功能。

我没有测试它，但我不明白为什么它不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-05T04:02:52.723

```
params = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL|WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
                PixelFormat.TRANSPARENT); 
```

你真正需要的是：

```
WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL|WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH 
```

文档说：

> 窗口标志：如果你设置了 FLAG_NOT_TOUCH_MODAL，你可以设置这个标志来接收一个带有动作 MotionEvent.ACTION_OUTSIDE 的特殊 MotionEvent，用于在你的窗口之外发生的触摸。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-31T12:19:36.863

我对在这里找到的任何答案都不满意。我的解决方案是将触摸侦听器附加到父视图，如下所示：

```
((View)getParent()).setOnTouchListener((v, event) -> {
    return true;
}); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-04-22T20:26:23.973

您可以`Activity`使用以下代码获取您的所有触摸事件。我想这段代码也会受到影响`ActionBar`。

```
public class MainActivity extends Activity {
...
// This example shows an Activity, but you would use the same approach if
// you were subclassing a View.
@Override
public boolean onTouchEvent(MotionEvent event){ 

    int action = MotionEventCompat.getActionMasked(event);

    switch(action) {
        case (MotionEvent.ACTION_DOWN) :
            Log.d(DEBUG_TAG,"Action was DOWN");
            return true;
        case (MotionEvent.ACTION_MOVE) :
            Log.d(DEBUG_TAG,"Action was MOVE");
            return true;
        case (MotionEvent.ACTION_UP) :
            Log.d(DEBUG_TAG,"Action was UP");
            return true;
        case (MotionEvent.ACTION_CANCEL) :
            Log.d(DEBUG_TAG,"Action was CANCEL");
            return true;
        case (MotionEvent.ACTION_OUTSIDE) :
            Log.d(DEBUG_TAG,"Movement occurred outside bounds " +
                    "of current screen element");
            return true;      
        default : 
            return super.onTouchEvent(event);
    }      
} 
```

# java - 矩形java的交集

> ID：16155290
> 
> 赞同：0
> 
> 时间：2013-04-22T19:36:49.467
> 
> 标签：java, intersection

我的老师要我找到我创建的 2 个矩形之间的交点。请帮我弄清楚为什么这不运行。我得到的错误说找不到变量底部。

```
public class Rectangle { 

    private int left, bottem, width, height;

    public Rectangle (int l, int b, int w, int h) {
        left = l;
        bottem = b;
        width = w;
        height = h;   
    }

    public int getX() {
        return left;
    }

    public int getY() {
         return bottem;
    }

    public int getW() {
         return width;
    }

    public int getH() {
         return height;
    }

    public int getArea () {
        int area;
        area = (width * height);
        return area;
    }

    public int getPerimeter() {
        int perimeter;
        perimeter = (width + height) * 2;
        return perimeter;
    }

    public int getIntersection (Rectangle one, Rectangle two)  {
         int intxValue;
         int intyValue;
         int intxValue2;
         int intyValue2;
         int area;

         if (one.left + one.width > two.left && one.bottom + one.height > two.bottom) {
               intxValue = two.left;
               intyValue = two.bottom;
               intxValue2 = one.left + one.width - intxValue;
               intyValue2 = one.bottom + one.height - intyValue;
               area = intxValue2*intyValue2;
               return area;
         } else if (one.left+one.width < two.left && one.bottom+one.height < two.bottom) {
               intxValue = one.left;
               intyValue = one.bottom;
               intxValue2 = two.left + two.width - intxValue;
               intyValue2 = two. bottom + two.height - intyValue;
               area = intxValue2*intyValue2;
               return area;
         } else return area;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:38:40.590

因为在顶部你写了：

```
bottem = b; 
```

不是底部。

下次尝试通过正确格式化代码来更轻松地帮助您。

# jquery - 添加动态 tr 并使用 jquery 引用它

> ID：16155293
> 
> 赞同：1
> 
> 时间：2013-04-22T19:36:53.693
> 
> 标签：jquery

我正在尝试创建一个表格，当用户单击其中一个表格行时，我希望它在单击的行之后添加一行。添加完成后，我想用一些 ajax 信息填充该行。在此传递的 ajax 信息中，将是一个“关闭/销毁”该行的按钮。我如何实现这一目标？到目前为止，我已经尝试过了，但它不起作用。

```
 <tr onclick="$(this).append('<tr style=\'background-color:#ff0000;\'><td colspan='5'>AJAX CONTENT GOES HERE</td></tr>');">
    <td class="center"><%=location%></td>
    <td><span class="text-warning"><%=formatcurrency(refundAmount,2)%></span> <small class="muted">(potential)</small></td>
    <td><span class="text-error"><%=formatcurrency(refundReceived,2)%></span></td>
    <td><span class="text-info"><%=formatcurrency(lateAmount,2)%></span></td>
    <td><span class="text-success"><%=formatcurrency(refundReceived+refundAmount,2)%></span> <small class="muted">(potential)</small></td>
  </tr> 
```

如果我能把它放在一个函数中就更好了。我还想将该行滑入滑出。谢谢大家，我感谢所有的评论！

达米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:01:13.857

基于上面 tymeJV 的回答，但如果用户选择，则包括销毁该行的按钮：

```
$("table tr").click(function() {
    var htmlRowData = "<tr style=\'background-color:#ff0000;\'><td>";
    $.ajax() {
        //do some ajax stuff here
        success: function(data) {
            htmlRowData += data;
        }
    });
    var removeRow = function(this){
        $(this).parents("td").remove();
    }
    htmlRowData += "<input type='button' value='Delete' onclick='removeRow(this)'";
    htmlRowData += "</td></tr>";
    $(this).after(htmlRowData).slideDown(); <-- Append and achieve sliding effect
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:44:31.423

首先，您需要处理每个单元格中的 OnClick 事件，其次，如果将其抽象为一个函数会更好，而不是像这样：

```
function addRow(element)
{
    $(element).append('<tr style=\'background-color:#ff0000;\'><td colspan='5'>AJAX CONTENT GOES HERE</td></tr>');
} 
```

然后，向您的表添加一个 ID，以便您可以轻松引用它，假设您给它一个“MyTable”ID，那么您可以这样做：

```
onClick = "addRow('#MyTable')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:12:57.220

```
$('tr').on('click',function(){
$var =
'\
<tr>\
    <td>asdf</td>\
    <td><input type="button" value="I need an event handler"></td>\
</tr>\
';
$(this).parent().append($var);
}); 
```

[http://jsfiddle.net/M3BpW/](http://jsfiddle.net/M3BpW/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:34:04.293

你可以试试这个

```
$(function(){
    $('table tr:not(".closeDestroy")').on('click', function(){
        var activeTr = $(this);
        if(activeTr.next('tr').hasClass('closeDestroy')) return false;
        $.post('your_url', function(data) {
            var tr = $('<tr/>', {'class':'closeDestroy', 'style':'background-color:#ff0000'});
            var td = $('<td/>', {'html':'<button>Destroy</button>', 'colspan':5});
            activeTr.after(tr.append(td));
        });
    });

    // Click handler for button
    $('table').on('click', 'tr.closeDestroy td button', function(){
        // code for clicked button
        var button = $(this);
        button.closest('tr').prev().remove().andSelf().remove();
    });
}); 
```

只需更改`td`变量的内容以使用来自 ajax 调用的数据，例如，如果您在按钮中有要使用的 id，那么您可以使用

```
var td = $('<td/>', {'html':'<button id='+data.id+'>Destroy Me</button>', 'colspan':5}); 
```

还可以尝试`id`在表格中使用一个`$('table#myId tr:not(".closeDestroy")')`来使选择更加具体。

[**演示。**](http://jsfiddle.net/heera/UTBME/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T19:43:57.607

您可能可以通过以下方式实现它：

```
$("table tr").click(function() {
    var htmlRowData = "<tr style=\'background-color:#ff0000;\'><td>";
    $.ajax() {
        //do some ajax stuff here
        success: function(data) {
            htmlRowData += data;
        }
    });
    htmlRowData += "</td></tr>";
    $(this).after(htmlRowData).slideDown(); <-- Append and achieve sliding effect
}); 
```

# java - 让 MySQL DATE_ADD 与 PHP 一样工作

> ID：16155297
> 
> 赞同：2
> 
> 时间：2013-04-22T19:37:03.080
> 
> 标签：java, php, mysql, date-arithmetic

如果你这样做，在 PHP 中：

```
$date = "2013-08-31";
$nextdate = strtotime(date("Y-m-d", strtotime($date)) . " +1 month");
$date = date( "Y-m-d", $nextdate );
echo $date; 
```

你得到 2013-10-01 即这个月已经过去了，因为 9 月只有 30 天。

在 MySQL 中，如果你这样做：

```
UPDATE member_account SET NextBillDate = '2013-08-31'
SELECT DATE_ADD(NextBillDate, INTERVAL 1 MONTH) FROM member_account 
```

你得到 2013-09-30 即没有翻转

在 Java 中也是一样的：

```
GregorianCalendar oDate = new GregorianCalendar();
SimpleDateFormat Sdf = new SimpleDateFormat( "yyyy-MM-dd" );
try{oDate.setTime(Sdf.parse("2013-08-31"));} catch (Exception e) {}
String sTodayDate = Sdf.format( oDate.getTime() );

oDate.add(Calendar.MONTH, 1);
String sTodayDate2 = Sdf.format( oDate.getTime() ); 
```

sTodayDate2 是“2013-09-31”

有没有办法让 MySQL 或 Java 的行为方式与 PHP 相同，因此如果超过该月的天数，它将翻转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:01:20.967

找到了这个小 Java 片段，可以解决问题：

```
 int oldDay = oDate.get(Calendar.DAY_OF_MONTH);
    oDate.add(Calendar.MONTH, 1);

    // If the old DAY_OF_MONTH was larger than our new one, then
    // roll over to the beginning of the next month.
    if (oldDay > oDate.get(Calendar.DAY_OF_MONTH)){
        oDate.add(Calendar.MONTH, 1);
        oDate.set(Calendar.DATE, 1);
    }

    String sTodayDate2 = Sdf.format( oDate.getTime() ); 
```

# php - 如何使用 Ant 运行 PHPUnit 3.7？

> ID：16155312
> 
> 赞同：4
> 
> 时间：2013-04-22T19:38:02.053
> 
> 标签：php, unit-testing, ant, phpunit

我正在使用 PHPUnit 3.7 并尝试使用 Apache Ant 自动构建（和测试）我的项目。我已经阅读了 PHPUnit 的文档，但找不到如何配置它以向 Ant 抛出错误。

我当前的 Ant 任务如下所示（测试文件位于“tests”目录中）：

```
 <target name="test">

        <echo message="Running unit tests with PHPUnit" />

        <exec executable="phpunit" >
            <arg value="tests/"/>
        </exec>

    </target> 
```

我编写了一个简单的测试，该测试将失败，并且 ant 测试任务在 [exec] 中显示失败，但构建标记为成功。

如何配置 Ant 任务以便能够识别测试失败的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:48:39.437

啊啊啊，就这样搞定了。failonerror *="true"*命令是我的朋友。

```
 <target name="test">

        <echo message="Running unit tests with PHPUnit" />

        <exec executable="phpunit" failonerror="true">
            <arg value="tests/"/>
        </exec>

    </target> 
```

它现在是一种享受。

# c++ - Directx C++ - 绘制 DNA 形状

> ID：16155320
> 
> 赞同：0
> 
> 时间：2013-04-22T19:38:30.307
> 
> 标签：c++, algorithm, winapi, math, directx

在我目前的程序中，我希望能够绘制“DNA 形状”。我写了一个“DrawPixel(x,y,r,g,b)”函数，它可以在屏幕上绘制一个像素。从这一点开始，我实现了[Bresenham 线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)来绘制一条线：“DrawLine(x1,y1,x2,y2,r,g,b)”。

现在我意识到将图像用于 DNA 形状将是一个非常糟糕的选择（在多个方面）。所以我尝试制作一个函数来绘制 DNA 形状（因为我找不到算法）。这是目前基于画圆算法（[Midpoint Circle Algorithm](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)）的：

```
void D3DGHandler::DrawDNAShape(int x1, int y1, int length, int curves, int dir 
                               int off, int r, int g, int b){
     int x2Pos = sin(dir)*length+x1;
     int y2Pos = cos(dir)*length+y1;

     for (int i = 0; i < curves; i++) {
          int xIncrease = (x2Pos / curves) * i;
          int yIncrease = (y2Pos / curves) * i;

          int rSquared = off * off;
          int xPivot = (int)(off * 0.707107 + 0.5f);
          for (int x = 0; x <= xPivot; x++) {
               int y = (int)(sqrt((float)(rSquared - x*x)) + 0.5f);
               DrawPixel(x1+x+xIncrease,y1+y+yIncrease,r,g,b);
               DrawPixel(x1-x+xIncrease,y1+y+yIncrease,r,g,b);
               DrawPixel(x1+x+xIncrease,y1-y+yIncrease,r,g,b);
               DrawPixel(x1-x+xIncrease,y1-y+yIncrease,r,g,b);
               DrawPixel(x1+y+xIncrease,y1+x+yIncrease,r,g,b);
               DrawPixel(x1-y+xIncrease,y1+x+yIncrease,r,g,b);
               DrawPixel(x1+y+xIncrease,y1-x+yIncrease,r,g,b);
               DrawPixel(x1-y+xIncrease,y1-x+yIncrease,r,g,b);
          }
     }
} 
```

这个实现目前为我提供了一些我不想要的全新功能。

沿着：

![绘制DNAShape()](https://i.stack.imgur.com/8lsWC.png)

我很高兴听到你能给我的任何信息！

**更新**

预期结果：

[预期结果](http://www.radiostadharlingen.nl/programmas/dna-van-50-jaar-popmuziek/image)

但那样更像线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:10:08.683

您可以绘制两个具有一定偏移量的正弦图，这将为您提供所需的形状。

例如。在 R 中

```
x=(1:100)/10.0
plot(sin(x),x)
points(sin(x+2.5),x) 
```

# jquery - 复选框和部分视图

> ID：16155322
> 
> 赞同：1
> 
> 时间：2013-04-22T19:38:40.210
> 
> 标签：jquery, asp.net-mvc-3

在我看来，我有多个数据源的复选框，一些文本框和一个搜索按钮

```
<table width="100%">
   <tr>
       <td width="12%">
           Data Source
       </td>
       <td>
          @Html.CheckBoxFor(per => per.DataSource1) &nbsp; DataSource1 &nbsp; &nbsp; 
          @Html.CheckBoxFor(per => per.DataSource2) &nbsp; DataSource2 &nbsp; &nbsp;  
          @Html.CheckBoxFor(per => per.DataSource3) &nbsp; DataSource3 &nbsp; &nbsp;         
          @Html.CheckBoxFor(per => per.DataSource4) &nbsp; DataSource4 &nbsp; &nbsp;
          @Html.CheckBoxFor(per => per.DataSource5) &nbsp; DataSource5 &nbsp; &nbsp;
       </td>
        <td>
           First Name
       </td>
       <td>
           @Html.TextBoxFor(per => per.FirstName)
       </td>

        <td>
           Last Name
       </td>
       <td>
           @Html.TextBoxFor(per => per.LastName)
       </td>
       <td>
           <button name="button" value="search" class="button">
                    Search</button>
       </td>
   </tr> 
```

根据在文本框中输入的值单击搜索按钮时，将在检查的数据源中搜索名称。假设如果选择了数据源 1 和 2，则针对 DataSource1 和 datasource2 搜索名字和姓氏。两个结果列表在部分视图中填充网格并显示两次。

如何做到这一点。根据选择的来源，如全部说，应显示 5 个网格。数据源将来可能会增加，所以我想做一些东西来处理网格的动态加载，这取决于所选源的数量

# android - 将项目添加到具有指定对象的数组列表

> ID：16155326
> 
> 赞同：1
> 
> 时间：2013-04-22T19:38:43.387
> 
> 标签：android, arraylist

我正在使用翻译类的应用程序，我需要一些帮助。我的 Array List 对象有一个带有 getter 和 setter 的类。每个对象都有一个短语、一个含义和用法。

所以我有这个来创建我的列表：

```
ArrayList<PhraseCollection> IdiomsList = new ArrayList<PhraseCollection>(); 
```

现在我如何将这些对象添加到列表中，每个对象都包含短语、其含义和句子中的用途？

例如：布局将是这样的

## 短语

气绝

## 意义

当有人死去

## 用法

我的祖父踢了水桶

### 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:42:13.423

这就是我想出的对我有用的东西

```
private void loadIdioms() {

    //creating new items in the list
    Idiom i1 = new Idiom();
    i1.setPhrase("Kick the bucket");
    i1.setMeaning("When someone dies");
    i1.setUsage("My old dog kicked the bucket");
    idiomsList.add(i1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:43:55.687

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)有一个方法调用 add() 或 add(ELEMENT,INDEX); 为了添加您的对象，您必须首先创建它们

```
PhraseCollection collection=new PhraseCollection(); 
```

然后通过创建 ArrayList

```
ArrayList<PhraseCollection> list=new ArrayList<PhraseCollection>(); 
```

通过以下方式添加它们：

```
list.add(collection); 
```

最后，如果要在 ListView 项中呈现它，则必须覆盖 PhraseCollection 中的 toString()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:41:51.917

我想你会使用 add(E) 方法（[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add(E)](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add(E))）。

这是使用您提供的示例的示例。

```
public class Phrase {
    public final String phrase, meaning, usage;
    //TODO: implement getters?

    public Phrase(String phrase, meaning, usage) {
        this.phrase = phrase;
        this.meaning = meaning;
        this.usage = usage;
    }
} 
```

并像这样使用它：

```
// create the list
ArrayList<Phrase> idiomsList = new ArrayList<Phrase>();

// create the phrase to add
Phrase kick = new Phrase("kick the bucket", "When someone dies", "My grandfather kicked the bucket");

// add the phrase to the list
idiomsList.add(kick); 
```

# python - Python raw_input 不起作用

> ID：16155329
> 
> 赞同：0
> 
> 时间：2013-04-22T19:38:52.407
> 
> 标签：python

我刚刚开始编程并正在尝试学习 Python。第四章的最后一部分，练习 5，`how to think like a computer scientist`难倒我。我正在尝试修改 shell 脚本，以便用户可以输入“a”、“b”或“c”，并且正确的响应将根据用户的选择打印出来。到目前为止，这就是我实现它的方式，并希望有人能告诉我我在这里缺少什么。

```
def dispatch(choice):
    if choice == 'a':
        function_a()
    elif choice == 'b':
        function_b()
    elif choice == 'c':
        function_c()
    else:
    print "Invalid choice."

def function_a():
    print "function_a was called ..."

def function_b():
    print "function_b was called ..."

def function_c():
    print "function_c was called ..."

dispatch1 = raw_input ("Please Enter a Function.")
print dispatch(choice) 
```

当我运行它时，我得到名称选择未定义错误。我试图让它吐回function_b被调用......当它被输入到raw_input时。

感谢您的任何帮助，

约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:40:50.587

您正在接受输入并将其分配给 dispatch1，而不是选择：

```
choice = raw_input ("Please Enter a Function.")
print dispatch(choice) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:46:47.070

James 是正确的（Lattyware 也是如此）。由于您仍在学习，我认为提供有关您所见内容的更多信息可能会有所帮助。

dispatch 的参数是一个变量。在函数调用本身内部，它被称为“选择”。当您使用 raw_input 捕获输入时，您当前将其保存为名为“dispatch1”的变量。在你调用 dispatch 的时候 Choice 是未定义的（不过，因为它在函数定义中被称为 choice，所以有点混乱）。它未定义的事实是您错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:46:05.367

一个工作示例.. 顺便说一下，请注意 python 中的缩进。

```
def dispatch(choice):
    if choice == 'a':
        function_a()
    elif choice == 'b':
        function_b()
    elif choice == 'c':
        function_c()
    else:
        print "Invalid choice."

def function_a():
    print "function_a was called ..."
def function_b():
    print "function_b was called ..."
def function_c():
    print "function_c was called ..."

choice = raw_input ("Please Enter a Function.")
dispatch(choice) 
```

# c++ - 如何实现由用户定义的可变文本文件名，然后从中获取 3x3 矩阵？

> ID：16155331
> 
> 赞同：0
> 
> 时间：2013-04-22T19:39:01.427
> 
> 标签：c++, file-io, matrix

我需要编写一个程序，从用户定义的文件中获取一个 3x3 矩阵，打印它，然后确定它是否是一个[幻方](http://en.wikipedia.org/wiki/Magic_square)。

我的最新版本有一些我不知道如何解决的问题，我已经为此困惑了好几个小时。从尝试在网络上寻找解决方案到再次查看基础知识，我已经完成了所有工作。

我尝试了大卫布朗的解决方案，但我意识到我们彼此误解了。

我希望用户输入文件名，程序从中获取 3x3 矩阵（使用 ifstream），打印矩阵，然后确定它是否是幻方。

```
#include <iostream>
#include <fstream>
#include <iomanip> #include <string>

using namespace std;

int main()
{
    int n = 3;
    int row, col, r, c, i, j, k, diag=0;
    int magic[19][19];

    std::string fout = "my_file_name.txt";

    std::ifstream ifs(fout.c_str());

    for(j=0 ; j<n+1 ; j++){
        for(k=0 ; k<n+1 ; k++)
            magic[j][k] = 0;
    }

    row=1;
    col=(n+1)/2;
    magic[row-1][col-1]=1;

    for(i=2 ; i<=(n*n) ; i++){
        row-=1;
        col-=1;

        if(row==0 && col==0){
            col++;
            row+=2
        }
        else if(row==0)
            row=n;
        else if(col==0)
            col=n;
        else if(magic[row-1][col-1]!=0){
            col++;
            row+=2;
        }

        magic[row-1][col-1]=i;
    }

    for(r=0; r<n; r++){
        for(c=0; c<n; c++){
            magic[r][n]+=magic[r][c];
        }
    }

    for(c=0; c<n; c++){
        for(r=0; r<n; r++){
            magic[n][c]+=magic[r][c];
        }
    }

    for(r=0; r<n; r++){
        magic[n][n] += magic[r][r];
    }

    for(r=0; r<n; r++){
        c = n - r + 1;
        diag+=magic[r][c];
    }

    for(r=0; r<(n+1) ; r++){
        fout << endl;
        for(c=0; c<(n+1) ; c++){
            fout << setw (5) << magic[r][c];
        }
        fout << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:16:55.773

正如大卫布朗指出的那样，您没有`fout`正确使用。听起来您实际上想将矩阵打印到控制台。如果是这样，你想要***`cout`***：

```
for(r=0; r<(n+1) ; r++){
    cout << endl;
    for(c=0; c<(n+1) ; c++){
        cout << setw (5) << magic[r][c];
    }
    cout << endl;
} 
```

要从用户那里获取文件名，请使用`cin`和`>>`运算符。[您可以在http://www.cplusplus.com/doc/tutorial/basic_io/](http://www.cplusplus.com/doc/tutorial/basic_io/)阅读它。

要打开文件并读取其内容，您可以使用`ifstream`已定义的 ( `ifs`) 和`>>`运算符。先前的参考网站在[http://www.cplusplus.com/doc/tutorial/files/也有关于此的教程](http://www.cplusplus.com/doc/tutorial/files/)

事实上，您可能只想浏览整个[cplusplus.com 教程](http://www.cplusplus.com/doc/tutorial/)。如果您对任一主题有任何具体问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:53:42.693

`fout`是一个`std::string`（包含“my_file_name.txt”），但您似乎正在尝试像`std::ofstream`. 你的意思是声明`fout`为

```
std::ofstream fout("my_file_name.txt"); 
```

# haskell - Arrows 能做哪些 Monads 做不到的事情？

> ID：16155336
> 
> 赞同：21
> 
> 时间：2013-04-22T19:39:14.623
> 
> 标签：haskell, monads, arrows

Arrows 似乎在 Haskell 社区中越来越受欢迎，但在我看来，Monads 似乎更强大。使用箭可以获得什么？为什么不能使用 Monads 代替？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T20:29:48.390

每个单子都会产生一个箭头

```
newtype Kleisli m a b = Kleisli (a -> m b)
instance Monad m => Category (Kleisli m) where
   id = Kleisli return
   (Kleisli f) . (Kleisli g) = Kleisli (\x -> (g x) >>= f)
instance Monad m => Arrow (Kleisli m) where
   arr f = Kleisli (return . f)
   first (Kleisli f) = Kleisli (\(a,b) -> (f a) >>= \fa -> return (fa,b)) 
```

但是，有些箭头不是单子。因此，有些箭头可以做你不能用单子做的事情。一个很好的例子是箭头转换器添加一些静态信息

```
data StaticT m c a b = StaticT m (c a b)
instance (Category c, Monoid m) => Category (StaticT m c) where
   id = StaticT mempty id
   (StaticT m1 f) . (StaticT m2 g) = StaticT (m1 <> m2) (f . g)
instance (Arrow c, Monoid m) => Arrow (StaticT m c) where
   arr f = StaticT mempty (arr f)
   first (StaticT m f) = StaticT m (first f) 
```

这个箭头转换器很有用，因为它可以用来跟踪程序的静态属性。例如，您可以使用它来检测您的 API 以静态测量您正在进行的调用次数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T22:37:53.910

我一直觉得很难用这些术语来思考这个问题：使用箭头可以获得什么。正如其他评论者所提到的，每个单子都可以轻松地变成一个箭头。所以一个单子可以做所有箭头y的事情。但是，我们可以制作不是单子的箭头。也就是说，我们可以使类型可以做这些箭头-y 的事情，而无需让它们支持单子绑定。看起来可能不是这样，但一元绑定函数实际上是一个相当严格（因此很强大）的操作，它取消了许多类型的资格。

看，为了支持绑定，你必须能够断言无论输入类型如何，将要输出的内容将被包装在 monad 中。

```
(>>=) :: forall a b. m a -> (a -> m b) -> m b 
```

但是，我们将如何为类型定义绑定，`data Foo a = F Bool a`当然，我们可以将一个 Foo 的 a 与另一个的结合，但我们将如何结合 Bools。想象一下，Bool 标记了另一个参数的值是否发生了变化。如果我有`a = Foo False whatever`并且我将它绑定到一个函数中，我不知道该函数是否会改变`whatever`。我无法编写正确设置 Bool 的绑定。这通常被称为静态元信息问题。我无法检查绑定到的函数以确定它是否会改变`whatever`。

还有其他几种情况：表示变异函数的类型、可以提前退出的解析器等。但基本思想是：monad 设置了一个并非所有类型都能清除的高标准。箭头允许您以强大的方式组合类型（可能支持也可能不支持这种高绑定标准），而不必满足绑定。当然，你确实失去了一些单子的力量。

故事的寓意：没有什么是单子不能做的，因为单子总是可以变成箭头。然而，有时你不能将你的类型变成 monad，但你仍然希望让它们拥有 monad 的大部分组合灵活性和强大功能。

许多这些想法的灵感来自于精湛的[理解 Haskell 箭头](http://ertes.de/new/tutorials/arrows.html "了解 Haskell 箭头")（[备份](http://vrici.digitalkingdom.org/%7Erlpowell/media/public/haskell_arrow.txt "了解 Haskell 箭头：备份")）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T01:05:50.113

好吧，我将通过将问题从 更改为 来稍微`Arrow`作弊`Applicative`。许多相同的动机都适用，而且我比箭头更了解应用程序。（事实上​​，[every`Arrow`也是 a`Applicative`](http://cdsmith.wordpress.com/2011/07/30/arrow-category-applicative-part-i/)但[反之亦然](http://cdsmith.wordpress.com/2011/08/13/arrow-category-applicative-part-iia/)，所以我只是将它从斜坡往下移一点到`Functor`.）

就像every`Monad`是一个`Arrow`，every`Monad`也是一个`Applicative`。有些`Applicatives`不是`Monad`s（例如，`ZipList`），所以这是一个可能的答案。

但是假设我们正在处理一个允许`Monad`实例和`Applicative`. 为什么我们有时会使用`Applicative`实例而不是`Monad`？因为`Applicative`功能不那么强大，并且带来了好处：

1.  有些事情我们知道`Monad`可以做`Applicative`而不能做。例如，如果我们使用 of 的`Applicative`实例`IO`从更简单的动作中组合出一个复合动作，那么我们组成的任何动作都不能使用任何其他动作的结果。applicative`IO`所能做的就是执行组件动作并将它们的结果与纯函数结合起来。
2.  `Applicative`可以编写类型，以便我们可以在执行动作之前对动作进行强大的静态分析。所以你可以编写一个程序，`Applicative`在执行之前检查一个动作，弄清楚它要做什么，然后用它来提高性能，告诉用户要做什么，等等。

作为第一个例子，我一直致力于设计一种使用s的[OLAP](http://en.wikipedia.org/wiki/Online_analytical_processing)计算语言。`Applicative`该类型承认一个`Monad`实例，但我故意避免这样做，因为我希望查询*不如*`Monad`允许 的强大。`Applicative`意味着每次计算都将达到可预测的查询数量。

作为后者的示例，我将使用[我仍在开发的操作`Applicative`库](https://github.com/sacundim/free-operational)中的一个玩具示例。如果您将`Reader`monad 编写为操作程序`Applicative`，则可以检查结果`Reader`s 以计算它们使用该`ask`操作的次数：

```
{-# LANGUAGE GADTs, RankNTypes, ScopedTypeVariables #-}

import Control.Applicative.Operational

-- | A 'Reader' is an 'Applicative' program that uses the 'ReaderI' 
-- instruction set.
type Reader r a = ProgramAp (ReaderI r) a

-- | The only 'Reader' instruction is 'Ask', which requires both the
-- environment and result type to be @r@.
data ReaderI r a where
    Ask :: ReaderI r r

ask :: Reader r r
ask = singleton Ask

-- | We run a 'Reader' by translating each instruction in the instruction set
-- into an @r -> a@ function.  In the case of 'Ask' the translation is 'id'.
runReader :: forall r a. Reader r a -> r -> a
runReader = interpretAp evalI
    where evalI :: forall x. ReaderI r x -> r -> x
          evalI Ask = id

-- | Count how many times a 'Reader' uses the 'Ask' instruction.  The 'viewAp'
-- function translates a 'ProgramAp' into a syntax tree that we can inspect.
countAsk :: forall r a. Reader r a -> Int
countAsk = count . viewAp
    where count :: forall x. ProgramViewAp (ReaderI r) x -> Int
          -- Pure :: a -> ProgamViewAp instruction a
          count (Pure _) = 0
          -- (:<**>) :: instruction a 
          --         -> ProgramViewAp instruction (a -> b)
          --         -> ProgramViewAp instruction b
          count (Ask :<**> k) = succ (count k) 
```

`countAsk`据我了解，如果您实现`Reader`为 monad ，您将无法编写。（我的理解来自[于 Stack Overflow 中的提问](https://stackoverflow.com/questions/15426320/how-do-i-implement-reader-using-free-monads)，我会补充。）

同样的动机实际上是`Arrow`s 背后的想法之一。一个很大的激励示例`Arrow`是解析器组合器设计，它使用“静态信息”来获得比单子解析器更好的性能。他们所说的“静态信息”的含义与我的示例中的或多或少相同`Reader`：可以编写一个`Arrow`可以像我一样检查解析器的实例`Reader`。然后解析库可以在执行解析器之前检查它，看它是否可以提前预测它将失败，并在这种情况下跳过它。

在对您的问题的直接评论之一中，jberryman 提到箭头实际上可能正在失去人气。我要补充一点，正如我所看到的，`Applicative`箭头正在失去人气。

* * *

参考：

*   Paolo Capriotti & Ambrus Kaposi，[“免费应用函子”](http://paolocapriotti.com/blog/2013/04/03/free-applicative-functors/)。非常推荐。
*   Gergo Erdi，[“应用程序的静态分析”](http://gergo.erdi.hu/blog/2012-12-01-static_analysis_with_applicatives/)。鼓舞人心，但我很难跟上...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:29:08.267

这个问题不太对。这就像问你为什么要吃橙子而不是苹果，因为苹果看起来更有营养。

箭头和 monad 一样，是一种表达计算的方式，但它们必须遵守一组不同的[定律](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Arrow.html#t%3aArrow)。特别是，当你有类似函数的东西时，这些定律往往会使箭头更容易使用。

Haskell Wiki 列出了[一些](http://www.haskell.org/haskellwiki/Arrow#External_links)关于箭头的介绍。特别是，[Wikibook](https://en.wikibooks.org/wiki/Haskell/Understanding_arrows)是一个很好的高级介绍，John Hughes 的[教程](http://www.cse.chalmers.se/~rjmh/afp-arrows.pdf)很好地概述了各种箭头。

对于一个真实世界的例子，比较[本教程](http://jaspervdj.be/hakyll/tutorials/03-arrows.html)使用 Hakyll 3 的基于箭头的界面，与 Hakyll 4 的基于 monad 的界面大致[相同](http://jaspervdj.be/hakyll/tutorials/03-rules-routes-compilers.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-18T17:37:40.477

我总是发现箭头的真正实际用例之一是**流式编程**。

看这个：

```
data Stream a = Stream a (Stream a)
data SF a b = SF (a -> (b, SF a b)) 
```

`SF a b`是一个同步流函数。您可以从中定义一个函数，该函数转换`Stream a`为`Stream b`永不挂起并始终一对一`b`输出`a`：

```
(<<$>>) :: SF a b -> Stream a -> Stream b
SF f <<$>> Stream a as = let (b, sf') = f a
                         in  Stream b $ sf' <<$>> as 
```

有一个`Arrow`实例`SF`。特别是，您可以*编写* `SF`s：

```
(>>>) :: SF a b -> SF b c -> SF a c 
```

现在尝试在 monads 中执行此操作。效果不好。你可能会这么说，`Stream a == Reader Nat a`因此它是一个 monad，但 monad 实例效率很低。想象一下类型`join`：

```
join :: Stream (Stream a) -> Stream a 
```

您必须从流中提取对角线。这意味着th 元素`O(n)`的复杂性，但是原则上使用 s 的实例会给你！（并且还处理时间和空间泄漏。）`n``Arrow``SF``O(1)`

# git - 如何将 git 与多个工作目录一起使用？

> ID：16155338
> 
> 赞同：1
> 
> 时间：2013-04-22T19:39:17.280
> 
> 标签：git

我正在尝试使用 git，但是很难理解如何将它与每个项目的多个工作目录一起使用。我在网上找到的示例似乎建议使用单个存储库。

例如，我为每个项目都有一个目录，例如项目 A、项目 B 等。它们可以位于相同的路径或不同的路径中，例如本地驱动器、网络共享。

我想每个项目都有自己的存储库。这是否意味着每个项目都需要自己的 .git 初始化目录，或者是使用单个 git 存储库的标准和建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:41:36.527

通常，您会将每个项目设置在它自己的目录中，并在它自己的目录中设置它自己的存储库`.git`。

Git 非常轻量级。你只有正常的项目目录，你 cd 到它，然后你做`git init`，准备一个`.gitignore`文件，做`git add .`然后做你的第一次提交。

该`.git`目录包含工作目录中所有文件的压缩版本（排序）。但是将几个项目放在一起并不会真正节省任何有趣的空间。

将所有项目放在同一目录中的唯一原因是您确实希望它们都共享版本控制历史记录。如果它们是真正独立的项目，那么将它们放在同一个存储库中是没有意义的。

# java - Corba - 服务器端方法可能吗？

> ID：16155340
> 
> 赞同：0
> 
> 时间：2013-04-22T19:39:22.077
> 
> 标签：java, corba

是否有可能在 corba 对象的服务器端拥有访问和更改变量的方法？

如果是这样，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:58:45.783

CORBA 对象通过其接口访问，在[IDL](http://en.wikipedia.org/wiki/OMG_IDL)中描述。

请参阅[OMG 教程](http://www.omg.org/gettingstarted/omg_idl.htm)。

您可以在对象接口中添加一个方法来更新服务器端的*“变量”*，但该方法应该具有意义，一种比*更新变量*更重要的语义。

从 OMG 示例中：

```
interface salestax  {

     float  calculate_tax ( in float taxable_amount );
} 
```

我们可以添加一个方法来设置服务器端*变量*：

```
interface salestax  {

     float  calculate_tax ( in float taxable_amount );

     void   setVariable( in string name, in long value );
} 
```

我们必须修改实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:03:19.990

> 是否有可能在 corba 对象的服务器端拥有访问和更改变量的方法？

[科尔巴](http://en.wikipedia.org/wiki/Corba)：

> CORBA 使以不同语言编写并在**不同计算机**上运行的独立软件能够像单个应用程序或一组服务一样相互协作。更具体地说，CORBA 是软件中的一种机制，用于规范位于同一地址空间（应用程序）或远程地址空间（同一主机或网络上的远程主机）中的应用程序对象之间的方法调用语义。

所以，是的，这是可能的。

> 如果是这样，如何做到这一点？

官方[教程](http://v1.dione.zcu.cz/java/docs/jdk1.3/docs/guide/idl/jidlExample.html)提供了解释和`Hello world`代码示例。

# deployment - 如何在 AppFog 上设置 Jenkins？

> ID：16155343
> 
> 赞同：0
> 
> 时间：2013-04-22T19:39:30.153
> 
> 标签：deployment, jenkins, continuous-integration, appfog

我在 AppFog 上上传了 Jenkins，但出现错误：

```
Unable to create the home directory '/nonexistent/.jenkins'. This is most likely a         permission problem.

To change the home directory, use JENKINS_HOME environment variable or set the JENKINS_HOME system property. 
```

我应该将 JENKINS_HOME 环境变量设置为什么值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T16:24:44.107

I'd add another folder to your Jenkins instance's directory and set it as your JENKINS_HOME. You received the above error because AppFog does not want to grant access to directories outside of the web root.

# php - PHP - 使用 Stripos() 过滤字符串

> ID：16155348
> 
> 赞同：1
> 
> 时间：2013-04-22T19:39:59.407
> 
> 标签：php, arrays, string

我已经阅读了有关如何为某些针过滤字符串的所有线程，我认为`stripos()`这将完成这项工作，但是，例如，当找到第一根针时，该函数不会返回 true，就好像它仅使用过滤干草堆一样我的数组的第二个值。

**例子 ：**

```
$String = 'IWantToSolveThisProblem!!';
$needle = array('want', 'solve');

foreach ($needle as $value) {

$res = stripos($String, $value,0);
if($res !==false){

echo 'found';
}
else {
echo 'not found'; }} 
```

在上面的示例中，输出将回显“找到”，因为这两个值都存在于我的字符串中。

问题是它只使用我的数组的最后一个值来循环。如果第一个值存在于字符串中而不是第二个值，它将返回 false。我不想运行多个 if 语句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:48:45.610

我用这段代码测试过：

```
<?php
$str = "IWantToSolveThisProblem!";
$str2 = 'IWantAnAnswer';
$needles = array('want', 'solve');

foreach ($needles as $needle){
        $res = stripos($str2, $needle, 0);
        if ($res !== false){
                echo "$needle found\n";
        }
        else {
                echo "$needle not found\n";
        }
}
echo "\n";
?> 
```

它输出：

```
$php testme.php

want found
solve not found 
```

所以它似乎在这里为我工作......你可能会检查错别字......？？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:31:47.307

我已将您的问题解释为寻找一个函数，当所有针都存在于给定的干草堆中时，该函数返回 true，而这里有一个函数可以做到这一点......

```
/**
 * Search the haystack for all of the given needles, returning true only if 
 * they are all present.
 * 
 * @param  string  $haystack  String to search
 * @param  array   $needles   Needles to look for
 * @return boolean            
 */
function stripos_array($haystack, array $needles)
{
    foreach ($needles as $needle)
    {
        if (stripos($haystack, $needle) === false) return false;
    }
    return true;
}

// Test the function

$string = 'IWantToSolveThisProblem!!';

$search = array('want', 'solve');
$found = stripos_array($string, $search);
echo $found ? 'found' : 'not found', "\n"; // found

$search = array('want', 'cheese');
$found = stripos_array($string, $search);
echo $found ? 'found' : 'not found', "\n"; // not found

$search = array('cheese', 'problem');
$found = stripos_array($string, $search);
echo $found ? 'found' : 'not found', "\n"; // not found 
```

* * *

如果找到任何针而不是所有针，则将此函数更改为返回 true 将是微不足道的。

```
/**
 * Search the haystack for any of the given needles, returning true if any of
 * them are present.
 * 
 * @param  string  $haystack  String to search
 * @param  array   $needles   Needles to look for
 * @return boolean            
 */
function stripos_array($haystack, array $needles)
{
    foreach ($needles as $needle)
    {
        if (stripos($haystack, $needle) !== false) return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:45:25.623

```
$String = 'IWantToSolveThisProblem!!'; //you were missing this semicolon
$needle = array('want', 'solve'); //no spaces before the array (not needed, I just like nospaces :P)

foreach($needle as $value) {

$res = stripos($String, $value,0);
if($res !==false){

echo 'found';
}
else {
echo 'not found'; }} 
```

*现在这没有意义......这并不是说它只是比较最后一个元素。它只是没有比较第一个。看这个例子...*

```
$haystack = "string to be tested";
$needles  = array("string","to","pineapple","tested");
foreach($needles as $needle){
    if(stripos($haystack,$needle,0)){
        echo "The word \"$needle\" was found in the string \"$haystack\".";
    }
    else{
        echo "The word \"$needle\" was NOT found in the string \"$haystack\".";
    }
}

Expected Output:
The word "string" was found in the string "string to be tested".
The word "to" was found in the string "string to be tested".
The word "pineapple" was NOT found in the string "string to be tested".
The word "tested" was found in the string "string to be tested".

Actual Output:
The word "string" was NOT found in the string "string to be tested".
The word "to" was found in the string "string to be tested".
The word "pineapple" was NOT found in the string "string to be tested".
The word "tested" was found in the string "string to be tested". 
```

*现在一切都说得通了......来自文档：*

> “此函数可能返回布尔值 FALSE，但也可能返回非布尔值，其计算结果为 FALSE。有关更多信息，请阅读布尔值部分。使用 === 运算符测试此函数的返回值。”

*因此，更改* `if(stripos($haystack,$needle,0))`以`if(stripos($haystack,$needle,0) !== False)` *修复逻辑。*

```
$String = 'IWantToSolveThisProblem!!'; 
$needle = array('want', 'solve', 42); 

foreach($needle as $value) {

if(stripos($String, $value,0) !== FALSE){
    echo "found \"$value\" in \"$String \"";
}
else {
    echo "$value not found"; 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:46:29.493

你应该做：

```
if(stripos($value,$array[0]) !== false){ //check for the first element 
   echo "found want";
}
if(stripos($value,$array[1]) !== false){ //check for the second element
   echo "found solve";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T21:49:52.570

```
<?php
$String = 'IWantToSolveThisProblem!!';
$needle = array('want', 'solve');

foreach ($needle as $value) {

$res = stripos($String, $value,0);
if($res !==false){

echo 'found';
}
else {
echo 'not found'; }}
?> 
```

输出：foundfound

如果您将 foreach 循环“转换”为 if 语句，它将与以下内容相同：

```
if(stripos($String,$needle[0]) !== false){ //check for the first element 
   echo "found";
}
if(stripos($String,$needle[1]) !== false){ //check for the second element
   echo "found";
} 
```

输出：foundfound

所以 foreach - 循环执行几个 if 条件（数组中的每个元素一个）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T20:21:43.663

您得到“未找到”，因为当 $value 变为“解决”时，在`$String = 'IWantAnAnswer'.`

# python - Django — 发送 404 封邮件，没有推荐人

> ID：16155350
> 
> 赞同：1
> 
> 时间：2013-04-22T19:40:00.143
> 
> 标签：python, django, http-status-code-404

来自[Django 1.5 文档](https://docs.djangoproject.com/en/dev/howto/error-reporting/)：

> Django 还可以配置为通过电子邮件发送有关断开链接的错误（404“找不到页面”错误）。Django 在以下情况下发送有关 404 错误的电子邮件：
> 
> *   `DEBUG`是`False`；
> *   您的`MIDDLEWARE_CLASSES`设置包括`django.middleware.common.BrokenLinkEmailsMiddleware`.
> 
> 如果满足这些条件，`MANAGERS`只要您的代码引发 404 并且请求具有引用者，Django 就会向设置中列出的用户发送电子邮件。（**对于没有引荐来源的 404 发送电子邮件并不费心**——这些通常只是人们输入损坏的 URL 或损坏的 Web 'bots）。

我正在修复一个被我之前的人维护得很差的网络项目。最大的问题之一是没有明确的更改 URI 列表，因此有很多人使用 pdf/word 文档中的书签或链接可能无处可去。关键是，我需要一种方法来检查没有推荐人的 404。

有没有使用此中间件检查没有引荐来源的 404 的方法？我对其他软件甚至不使用 Django 的解决方案持开放态度。它只需要工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:14:30.903

您可以只回收 Django 的[中间件](https://github.com/django/django/blob/master/django/middleware/common.py#L134)并删除标头中对引用者的条件检查：

```
class BrokenLinkEmailsMiddleware(object):

    def process_response(self, request, response):
        """
        Send broken link emails for relevant 404 NOT FOUND responses.
        """
        if response.status_code == 404 and not settings.DEBUG:
            domain = request.get_host()
            path = request.get_full_path()
            referer = request.META.get('HTTP_REFERER', 'None')
            is_not_search_engine = '?' not in referer
            is_ignorable = self.is_ignorable_404(path)
            if is_not_search_engine and not is_ignorable:
                ua = request.META.get('HTTP_USER_AGENT', '<none>')
                ip = request.META.get('REMOTE_ADDR', '<none>')
                mail_managers(
                    "Broken link on %s" % domain,
                    "Referrer: %s\nRequested URL: %s\nUser agent: %s\nIP address: %s\n" % (referer, path, ua, ip),
                    fail_silently=True)
        return response

    def is_ignorable_404(self, uri):
        """
        Returns True if a 404 at the given URL *shouldn't* notify the site managers.
        """
        return any(pattern.search(uri) for pattern in settings.IGNORABLE_404_URLS) 
```

# objective-c - 将 UIImage -> NSData 保存到 Core Data 二进制文件

> ID：16155352
> 
> 赞同：1
> 
> 时间：2013-04-22T19:40:01.780
> 
> 标签：objective-c, core-data, uiimage, nsdata, unrecognized-selector

我想将使用 UIImagePickerController 从相机中选取的图像存储到 CoreData。该列是具有“允许外部存储”的二进制类型。我要保存的方法：

```
-(CoreDataImageClass *)initWithImageId:(NSString *)imageid
                                 image:(UIImage *)image
{
    CoreDataImageClass *imageClass = [self getNew];

    imageClass.imageid = imageid;
    NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
    //NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];
    imageClass.image = imageData; // runtime error

    [DataAccess saveObject:imageClass];

    return imageClass;
} 
```

在运行时错误行中，我收到此错误： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSConcreteMutableData managedObjectContext]: unrecognized selector sent to instance 0x1eaf6f90”

libc++abi.dylib：终止调用抛出异常

我已经尝试了注释掉的行，并且还使用了列类型为可转换的转换类。总是同样的错误。

这里有什么问题？

提前致谢！

**编辑：**

```
@interface CoreDataImage : NSManagedObject

@property (nonatomic, retain) NSString * imageid;
@property (nonatomic, retain) NSData * image;

-(CoreDataImage *)initWithImageId:(NSString *)imageid
                            image:(UIImage *)image;

@end 
```

# actionscript-3 - 检测互联网连接

> ID：16155361
> 
> 赞同：3
> 
> 时间：2013-04-22T19:40:25.900
> 
> 标签：actionscript-3, air

我正在尝试找出一种方法来对 AIR for iOS 应用程序进行 Internet 连接检查。以前，我使用（根据我更好的判断）`URLMonitor`每 30 秒检查一次 Google 的 a。我不喜欢把这个负担放在谷歌身上，他们也不喜欢。今天早上，我们的网络仅仅通过测试应用程序就被标记为可能的 DDoS 攻击者。所以我不得不禁用这种类型的检查并继续前进。

我曾考虑过使用 Adob​​e 的[`NetworkInfo`ANE](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/networkinfo.html)，但这在确定 Internet 连接方面存在其自身的问题。我能想到的唯一方法是检查接口“en0”和“pdpxx”（分别对应于 WiFi 和蜂窝接口）并检查它们的 IP 以确保它们不在 192.168.xx、10.10.xx 中，或 127.0.xx 范围。但是，我不完全确定这些是唯一的静态路由器/本地主机 IP，并且网络接口名称将来总是有可能发生变化，这会使该监视器无用。还有一个问题是 IPv6 也可能对这种方法造成影响。

有没有其他方法可以检查用户是否连接到互联网？我已经搜索过多次，似乎只有这两种检查方法。如果是这种情况，最好的检查方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:25:27.413

我很惊讶您被标记为 DDoS 攻击者，您确定是这样吗？

在任何情况下，如果您不满意将负载放到其他人的服务器上，那么请制作自己的服务器，这只是您与 URLMonitor 一起使用的基本设置。您不必将 google 的 url 与 URLMonitor 一起使用，您可以将另一个 URLRequest 传递给它，它可以指向您自己的服务器。

```
monitor = new URLMonitor(new URLRequest("http://www.you-own-server.com")); 
```

如果您决定要在应用程序和服务器之间传递更多数据，这也可能很有用。它是你的服务器，所以可以用它做你想做的事。

我认为没有其他方法可以检查用户是否连接到互联网。老实说，我不明白为什么会有。检查用户接口/wan0 等... 可能是可能的，但您需要另一个程序，可能是一个简单的 python 或 c++ 程序，Air 可以使用它来检查这些东西，但这听起来很长。

# python - Django模型保存调用了两次

> ID：16155363
> 
> 赞同：3
> 
> 时间：2013-04-22T19:40:33.270
> 
> 标签：python, django, django-models

我有一个像这样的 django 模型：

```
class UserProfile(models.Model):
    username = models.CharField(max_length=16)
    password = models.CharField(max_length=256)
    email = models.CharField(max_length=64, null=True)
    gender = models.CharField(max_length=8, null=True)
    phone_number = models.PositiveIntegerField(unique=True)
    profile_pic = models.FileField(upload_to=content_file_name)
    badge = models.PositiveIntegerField(default=0)

    def __str__(self):
        return "%s" % self.username

    def save(self, *args, **kwargs):
        set_password(self=self, raw_password=self.password)
        super(UserProfile, self).save(*args, **kwargs) 
```

如您所见，我重写了该`save`函数以调用`set_password()`函数。

由于一个模糊的原因（或至少对我来说模糊），该`save`方法被**调用了两次**。这是一个问题，因为它对我的密码进行了两次加密，之后无法检索。

我真的不知道为什么。我从 sweetpie API 调用这个模型。

告诉我您是否需要其他任何东西，我的设置或我的导入，我会添加它们。

编辑： set_password 代码：

```
def set_password(self, raw_password):
    import random
    algo = 'sha1'
    salt = get_hexdigest(algo, str(random.random()), str(random.random()))[:5]
    hsh = get_hexdigest(algo, salt, raw_password)
    self.password = '%s$%s$%s' % (algo, salt, hsh) 
```

# ruby-on-rails - 允许用户绕过创建图库上传照片

> ID：16155365
> 
> 赞同：0
> 
> 时间：2013-04-22T19:40:44.800
> 
> 标签：ruby-on-rails, carrierwave, photo-gallery

我有一个社交网络，为此我正在使用载波。我需要帮助进行设置，这样用户就不必创建图库名称来上传照片。这是carrierwave的默认设置，但由于这是一个社交网络，我不允许用户拥有不同的画廊（或专辑）。应该只有一个链接可以将照片上传到他们的个人资料。那么我应该如何攻击呢？顺便说一句，我是 Rails 的新手，所以任何和所有的帮助都将不胜感激！

照片控制器：

```
 def new
    @photo = Photo.new(:gallery_id => params[:gallery_id])
  end

  def create
    @photo = Photo.new(params[:photo])
    if @photo.save
      flash[:notice] = "Successfully created photos."
      redirect_to @photo.gallery
    else
      render :action => 'new'
    end
end

  def edit
    @photo = Photo.find(params[:id])
  end

  def update
    @photo = Photo.find(params[:id])
    if @photo.update_attributes(paramas[:photo])
      flash[:notice] = "Successfully updated photo."
      redirect_to @photo.gallery
    else
      render :action => 'edit'
    end
  end

  def destroy
    @photo = Photo.find(params[:id])
    @photo.destroy
    flash[:notice] = "Successfully destroyed photo."
    redirect_to @photo.gallery
  end
end 
```

画廊控制器：

```
 def index
    @galleries = Gallery.all
  end

  def show
    @gallery = Gallery.find(params[:id])
  end

  def new
    @gallery = Gallery.new
  end

  def create
    @gallery = Gallery.new(params[:gallery])
    if @gallery.save
      flash[:notice] = "Successfully created gallery."
      redirect_to @gallery
    else
      render :action => 'new'
    end
  end

  def edit
    @gallery = Gallery.find(params[:id])
  end

  def update
    @gallery = Gallery.find(params[:id])
    if @gallery.update_attributes(params[:gallery])
      flash[:notice] = "Successfully updated gallery."
      redirect_to gallery_url
    else
      render :action => 'edit'
    end
  end

  def destroy
    @gallery = Gallery.find(params[:id])
    @gallery.destroy
    flash[:notice] = "Successfully destroy gallery."
    redirect_to galleries_url
  end
end 
```

路线：

```
Dating::Application.routes.draw do
  get 'signup' => 'users#new'
  get 'login' => 'sessions#new'
  get 'logout' => 'sessions#destroy'
  get 'edit' => 'users#edit'
  get "/profile/:id" => "users#show"
  get "profile/:id/settings" => 'users#edit'
  match 'settings/:id' => 'users#settings'

  resources :users
  resources :sessions
  resources :password_resets
  resources :galleries
  resources :photos
  resources :searches

  resources :users do  
      get 'settings', on: :member  
  end

  root to: 'users#new'
  root to: 'galleries#index'

  resources :users do |user|
    resources :messages do
      collection do
        post 'delete_multiple'
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:56:43.683

据我所知，zwippie 的回答是一个不错的选择。

如果您遵循 zwippie 的回答，则必须修改您的照片控制器，例如如下所示：

```
def new
  @photo = Photo.new
end

def create
  @photo = Photo.new(params[:photo])
  @photo.gallery = current_user.gallery
  if @photo.save
    flash[:notice] = "Successfully created photos."
    redirect_to gallery_path @photo.gallery
  else
    render :action => 'new'
  end
end 
```

另一种选择是不生成任何图库，只需将当前用户与照片相关联。

用户模型：

```
class User < ActiveRecord::Base
  has_many :photos
end

class Photos < ActiveRecord::Base
  belongs_to :user
end 
```

照片控制器

```
def new 
  @photo = Photo.new
end

def create
  @photo = Photo.new(params[:photo])
  @photo.user = current_user
  if @photo.save
    flash[:notice] = "Successfully created photos."
    redirect_to user_photos_path(current_user)
  else
    render :action => 'new'
  end
end 
```

作为您的载波设置的画廊名称，您可以选择当前用户用户名或其他名称。

**更新：**更改重定向路径

您的路线应如下所示：

```
resources :users do
  resources :photos
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:35:14.093

为什么不在用户注册后直接创建图库？或者在用户上传第一张图片时创建。

照片控制器：

```
def new
  # Get the gallery for the current user (assuming Gallery has attribute user_id)
  @gallery = current_user.gallery

  # Create a new gallery if user does not have one already
  @gallery = Gallery.create(:user_id => current_user.id) if @gallery.nil?

  # Save the photo
  @photo = Photo.new(:gallery_id => @gallery.id)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T17:43:45.357

您可以使用回形针创建相册，这里是回形针宝石的链接：

[https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

# php - 如何通过 HTML 标签的内容定义 PHP 变量？

> ID：16155371
> 
> 赞同：-3
> 
> 时间：2013-04-22T19:41:14.710
> 
> 标签：php, javascript, html, post, echo

HTML

```
<p id="a" name="a"></p> 
```

Javascript

```
document.getElementById("a").innerHTML=price; 
```

如果价格是一个变量，我如何创建一个 php 变量，即 = 放置在 id "a" i 的 HTML 中的结果？

```
$price = $_POST['a']; 
```

回显时，此变量为空白，是的，我确实设置了一个由 PHP 页面处理的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:42:38.137

这不是表单的工作方式。

浏览器只会将**表单控件**（`<input>`, `<select>`, `<textarea>`）的值发送到服务器。
它不会发送任意命名元素的值。（实际上，那`name="a"`是无效的 HTML）

相反，您应该使用`<input type="hidden" name="a" value="" />`, 并将`value`此标记的属性设置为`<input>`您希望 PHP 获取的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:44:39.127

我猜，您只想更改 HTML 元素中的值。为此，您需要一个 XML 解析器 ( [id](http://www.php.net/manual/en/book.xml.php) )。我认为[shamittimar 的帖子](https://stackoverflow.com/a/3627553/1493365)可能会对您有所帮助。他做的正是你想要的。

# c# - 启动进程并允许调用者结束而不等待进程完成

> ID：16155372
> 
> 赞同：5
> 
> 时间：2013-04-22T19:41:16.377
> 
> 标签：c#, process

我需要从 C# 控制台应用程序启动一个进程，然后允许控制台应用程序完成/结束，而无需等待进程/线程完成。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-30T22:06:58.410

您需要避免使您的新进程成为当前进程的子进程：

```
ProcessStartInfo sinfo = new ProcessStartInfo();
sinfo.UseShellExecute = true; // Do not wait - make the process stand alone
sinfo.FileName = "PathAndNameofExe";
Process.Start(sinfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:41:50.663

```
Process.Start("TheNameOfTheOtherProcess.exe"); 
```

# php - jQuery/CSS 日历

> ID：16155373
> 
> 赞同：1
> 
> 时间：2013-04-22T19:41:18.673
> 
> 标签：php, jquery, json, unix-timestamp

我希望实现以下内容： [**日历示例**](http://www.interfaithmedical.com/cal/index.html)

我要做的是清除所有事件并从我自己的事件日期重新开始。我在很多地方看到日期发生，

*   “[**事件.json**](http://pastebin.com/vrwiRhNj) ”

*   “ [**jquery.eventCalendar.js**](http://pastebin.com/MC9B8w3E) ”

*   “ [**event.humanDate.json.php**](http://pastebin.com/t0qPZdVt) ”

事件条目之一是 events.json 中的以下内容：

```
{
    "date": "1337594400000",
    "type": "HERE I AM",
    "title": "Project A meeting",
    "description": "Lorem Ipsum dolor set",
    "url": "http://www.event1.com/"
}, 
```

日期如何计算：1337594400000？

我查看了文档，但不太清楚。如果擅长 json 的人能给我一些想法或者我应该如何开始它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:48:58.440

这是以毫秒为单位的 unix 时间。

取您的值`1337594400000`，然后删除毫秒`1337594400`并使用此站点进行转换，例如：[http](http://www.onlineconversion.com/unix_time.htm) ://www.onlineconversion.com/unix_time.htm => Mon, 21 May 2012 10:00:00 GMT

[您可以使用 JS 日期http://www.w3schools.com/jsref/jsref_gettime.asp](http://www.w3schools.com/jsref/jsref_gettime.asp)的 gettime() 函数获取以毫秒为单位的 unix 时间

或`echo (date('U')*1000)`以 PHP 为例。

# objective-c - UIScrollView decelerationRate 和速度的单位/尺寸？

> ID：16155375
> 
> 赞同：4
> 
> 时间：2013-04-22T19:41:29.283
> 
> 标签：objective-c, cocoa-touch, uiscrollview, uiscrollviewdelegate

我试图在用户抬起手指后获取滚动 UIScrollView 的速度，以便在滚动视图的速度降至阈值速度以下时触发事件。

Apple 文档指出滚动视图速度的单位是**点**，我猜这将是每秒（pts/s），例如 UIScrollView Delegate 方法`- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset`。

因此，我*假设*滚动视图减速度的单位是**每秒点数（pts/s^2）**，但**情况似乎并非如此。**

`- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset`以下是从方法和方法中提取的平移手势事件结束后（即，只要您抬起手指）就从滚动滚动视图中提取的一些示例参数`- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView`：

**（初始偏移、目标偏移、初始速度、最终速度、减速度、经过时间）=**

*   (364.0, 2664.5, 4.619940, 0, 0.998, 3.068916)
*   (2595.5, 3288.5, 1.398724, 0, 0.998, 2.485449)
*   (3094.5, 1907.0, -2.389578, 0, 0.998, 2.752163)
*   (143.0, 1275.5, 2.279252, 0, 0.998, 2.718653)

在哪里：

*   手指一抬起，初始偏移量 = scrollView.contentOffset.y
*   目标偏移 = targetContentOffset->y 手指一抬起或 scrollView.contentOffset.y 滚动视图完成减速
*   手指一抬起，初始速度 = velocity.y
*   最终速度 = 0 因为让滚动视图滚动直到它自然停止
*   手指一抬起，Deceleration = scrollView.decelerationRate
*   已用时间 = 从手指抬起到滚动视图停止之间的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:43:32.203

对您而言，最重要的委托方法可能是`scrollViewDidScroll:`，因为您只是一遍又一遍地不断收到该消息，包括*在减速期间*。监控正在发生的事情对你来说比试图提前计算更有用。没有有用的“滚动视图的减速单位” - 也就是说，您没有任何信息可以让您提前计算减速期间每个时刻的速度。但是，`scrollViewWillEndDragging:withVelocity:targetContentOffset:`告诉你现在的速度和当速度为零时滚动视图的偏移量，你可以现在要求偏移量，这样你就可以决定当前偏移量和最终偏移量之间的偏移量，并监控滚动的剩余部分，在`scrollViewDidScroll:`，以了解何时通过该偏移量。当然，您可以在每次`scrollViewDidScroll:`调用时获取时间戳，因此有了它和瞬时偏移量，以及所有先前调用的记录，presto，就有了瞬时速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-19T07:04:45.860

速度单位`UIScrollView`是测量的，`pt/ms`同时速度单位是`UIPanGestureRecognizer`测量的`pt/s`

# asp.net-mvc - jQuery Mobile 1.3.x 和 ASP.NET MVC 4 Razor 的 Listview 渲染问题

> ID：16155378
> 
> 赞同：2
> 
> 时间：2013-04-22T19:41:36.317
> 
> 标签：asp.net-mvc, jquery-mobile, razor, asp.net-mvc-4

jQuery Mobile 1.3.x 列表视图在 Internet Explorer 9/10 和 IE 8 手机上呈现不正确的问题。它可以在 Chrome、Safari、iOS 上的 Safari 和 IE 9/10 上的 jQuery Mobile 1.2.1 上正确呈现。我在 Win7 上运行 VS 2012、C#、MVC 和 Razor。

要使用 VS 2012 重现，使用 Razor 生成 ASP.NET MVC 4 移动项目，然后使用 NuGet 升级到 jQuery Mobile 1.3.0 或 1.3.1。

主页上的这段代码在列表项和左边框的项目符号之间有额外的空间：

```
<ul data-role="listview" data-inset="true">
    <li data-role="list-divider">Navigation</li>
    <li>@Html.ActionLink("About", "About", "Home")</li>
    <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
</ul> 
```

升级前： [https ://dl.dropboxusercontent.com/u/47974701/Capture%20B4.PNG](https://dl.dropboxusercontent.com/u/47974701/Capture%20B4.PNG)

升级到 1.3.0 jQuery Mobile 后： [https ://dl.dropboxusercontent.com/u/47974701/Capture%20After.PNG](https://dl.dropboxusercontent.com/u/47974701/Capture%20After.PNG)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:16:43.613

将脚本块移动到 HEAD 部分可以解决此问题。由于其他原因，它并不理想（出于性能/优化原因，它位于页面底部），但它解决了 IE 未正确初始化的问题。

```
 @Scripts.Render("~/bundles/jquery")
    <script>
        $(document).on("mobileinit", function () {
            $.mobile.ajaxEnabled = false;
        });
    </script>
    @Scripts.Render("~/bundles/jquerymobile")
</head> 
```

# javascript - 在 IE 10 中以编程方式设置复选框选中属性

> ID：16155380
> 
> 赞同：1
> 
> 时间：2013-04-22T19:41:46.630
> 
> 标签：javascript, checkbox, internet-explorer-10, checked

我有一个旧页面，它使用大量原始 javascript（没有隐藏浏览器差异的 JS 库）。它动态地创建一个这样的复选框：

```
function createCheckbox(checkboxName, isChecked, onClickHandler)
{
    var checkboxId = checkboxName + 'ChkBx';
    var chkbx;

    if(Ext.isIE)
    {
        // Following code does not work in IE10 when NOT using compatibility view
        // Throws JS error.  Worked in IE9.
        //if (isChecked)
        //{
        //    chkbx = document.createElement('<input id="' + checkboxId + '" type="checkbox" name="' + checkboxName + '" value="true" checked="checked" className="checkbox" />');
        //}
        //else
        //{
        //    chkbx = document.createElement('<input id="' + checkboxId + '" type="checkbox" name="' + checkboxName + '" value="true" className="checkbox" />');
        //}

        // Following code does not work in IE10 when using compatibility view
        // isChecked == true does not product checked checkbox
        chkbx = document.createElement('input');
        chkbx.id = checkboxId;
        chkbx.name = checkboxName;
        chkbx.value = 'true';
        chkbx.type = 'checkbox';
        chkbx.checked = isChecked;
        chkbx.className = 'checkbox';
    }
    else 
    { ... }

    return chkbx;    
} 
```

我知道在 IE10 中， createElement() 不再接受复杂的字符串参数。这就是为什么我更改了上面的代码。我不明白为什么，它不尊重我将选中的属性设置为 true？应该如何指示复选框应该被选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:16:24.063

添加

`chkbx.defaultChecked = isChecked;`

问题解决了。

在使用兼容性视图时，IE10 可能会退回到 IE7 的处事方式。（取决于您的设置）

来源：[复选框不会在 IE7 中使用 Javascript 进行检查，但没有错误](https://stackoverflow.com/questions/1049396/checkboxes-will-not-check-in-ie7-using-javascript-and-yet-no-errors)

使用 IE 10.0.9200.16519 测试

# css - 移动浏览器上页脚图像的一个像素位移？

> ID：16155384
> 
> 赞同：1
> 
> 时间：2013-04-22T19:41:53.460
> 
> 标签：css, html, google-chrome, mobile, mobile-safari

我们网站上的页脚在移动浏览器上移动了 1px，我们不明白为什么。

这是它在 iPad 上的样子的屏幕截图。页脚顶部的 1px 绿线不会出现在桌面浏览器中——仅在移动浏览器上出现（在 iPhone 和 iPad Chrome 和 Safari 上测试）。

![在此处输入图像描述](https://i.stack.imgur.com/5VvSk.jpg)

如果您想亲自查看，请访问[www.panabee.com](http://www.panabee.com)。

谁能解释为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:46:49.043

这是一个时髦的问题。我在不同的缩放级别上看到不同。

将 #page_box 中的最后一个 div 更改为以下样式：

```
#all_icons {
    margin: 60px auto 54px auto
} 
```

这在 iPad 上以默认缩放级别为我修复了它。

但是，我看到它以不同的缩放级别返回。我会尝试用透明像素换出该图像，看看它是否消失。我怀疑这与该图像有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T07:32:43.373

我可以在 上看到问题`iPhone 4S running iOS 6.1.3`，放大后它确实消失了。但我也可以使用`Google Chrome Version 26.0.1410.64 m`. 当我放大到上面的任何位置时`110%`（显然，在更高的缩放级别下更容易发现）我可以看到一条绿线出现了一会儿，然后随着图像在几秒钟内变得更清晰而消失。线条不再消失，它始终可见，同时`300%`图像不再变得更清晰，但在更高的缩放级别下，线条永远不存在。

看到图像变得更清晰，然后看到线条消失，这让我相信问题可能在于图像被保存为[隔行扫描图像](http://en.wikipedia.org/wiki/Interlacing_(bitmaps))。显然，您可能是故意这样做的，因为这并不是一件坏事。在这种情况下，您还会知道，隔行扫描图像可以使其显示为自身的降级副本，而其预期收件人（在这种情况下是您网站上的访问者）仅收到了部分图像。

现在我从来没有听说过移动 safari 中的交错图像有任何问题，但是[谷歌搜索确实出现了一些结果](http://www.google.com.au/#q=mobile+safari+interlaced+png)。在 SO 上包括[一个带有一些有用答案的问题的结果](https://stackoverflow.com/q/12520364)。问题似乎始于 iOS 6 更新。大多数问题似乎都可以通过**关闭**图像的透明度或在**关闭隔行扫描选项的情况下保存图像来解决**。

因此，我建议您尝试这些选项，看看是否可以解决问题。或者，如果您真的需要隔行扫描，也许可以使用支持隔行扫描的不同图像格式（浏览器可能会在不同格式之间以不同方式处理它？）。

我觉得很有趣的是，谷歌浏览器似乎没有在更高的缩放级别上使用隔行扫描，我想当你已经放大那么多时尝试让图像变得更清晰是没有意义的？

我会发现阅读一些关于不同浏览器如何处理支持它的不同格式的隔行扫描的文档很有趣。我真的找不到任何东西（但我没有很好看）。它可能会解释为什么在 iOS 6 及更高版本中开始出现一些问题，在我看来，iOS 6 上的移动 safari 根本不支持隔行扫描 PNG 图像，因为我可以在 Chrome 中重现该问题，所以我想这可能是基于 WebKit 的浏览器的一个问题，但我`Safari 5.1.7`确实在所有缩放级别上都做了正确的事情。

无论如何，我希望其中一个建议可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T01:14:55.817

由于您的网页被缩放，这在我看来就像一个舍入错误。

如果您尚未在页面上设置[视口元标记](http://developer.apple.com/library/iOS/documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)，则默认视口宽度设置为 980 像素，无论方向如何。这意味着在横向上，当设备宽度为 768 像素时，页面必须缩小到 78% 左右。

如果您的页面设计依赖于以像素完美精度对齐的各个部分，那么这必然会不时失败。我希望新版本的 webkit 能够更好地处理这类事情，因为它们最近转移到了[subpixel layout units](https://trac.webkit.org/wiki/LayoutUnit)，但这并不总是有帮助。

假设这是问题所在，您应该可以通过向页面添加视口元标记来解决它，如下所示：

```
<meta name="viewport" content="width=device-width"> 
```

然后，您需要使用媒体查询来调整布局以更好地处理不同的设备宽度，因为您不能再依赖浏览器为您缩放页面。

即使这样，您也不能保证您的 css 像素一定会转换为精确的设备像素，因为某些移动设备可能具有非整数[设备像素比率](http://developer.android.com/guide/webapps/targeting.html#DensityCSS)。不过，它至少应该可以解决您在 iPad 上的问题，因为它的设备像素比为 1 或 2（取决于您是否有视网膜显示器）。

如果媒体查询看起来太费力了，我建议你把你的`#footer_top`向下移动一个像素，但看起来你已经这样做了。这没有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T20:11:51.867

这是修复：

```
#footer_top {
background: transparent url(/images/footer_header.png);
height: 72px;
position: relative;
background-position-y: -1px;
} 
```

这与背景重复的事实有关，尽管奇怪的是添加 repeat-x 并不能解决它，因为它似乎是从底部到顶部的重复像素。我在图像边缘遇到了类似的东西，我认为这是 webkit 在图像边缘进行插值的方式的错误。无论如何，我所做的只是隐藏顶部像素，但您可能会发现在底部放置一个重复的透明像素也可以解决您的问题（尽管在我的其他项目中没有）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-18T08:55:01.757

尝试将您的 CSS 更改为`#footer_top`：

```
#footer_top{

    background: transparent url(/images/footer_header.png) repeat-x center -1px;
    height: 72px;
    position: relative;
    top: 1px;

} 
```

基本上，如果您将背景图像拉高 1px 像素并将 div 面板拉低 1px，它应该有助于解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T07:51:45.277

我无法在我的 iPad 上重现这个问题（也许你已经调整了一些东西），但我认为你可以`background-origin: border-box;`通过 #footer_top 和 #footer 解决这个问题。

# mysql - 变量作为值进入 mysql 存储过程

> ID：16155392
> 
> 赞同：1
> 
> 时间：2013-04-22T19:42:12.480
> 
> 标签：mysql, stored-procedures

我正在创建一个 while 循环，直到 30 并且我想将 x 作为值放入查询中。我不能运行它，因为我不能使用 x 作为值。我怎样才能做到这一点 ？我想使用 x 作为小时 id。谢谢

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `add_day`(IN `d_id` INT, IN `date` VARCHAR(64))
BEGIN
      DECLARE x  INT;
      SET x = 1;
      WHILE x  <= 30 DO

INSERT INTO  `e-heal`.`scheduler` (`scheduler_id` ,`d_id` ,`hour_id` ,`date` ,`available`)
VALUES (NULL ,  '5',  x,  '2013-04-22',  '0');

                  SET  x = x + 1; 
      END WHILE;
 END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:55:42.980

它按原样对我有用。您可以尝试`@`在前面添加`x`：

```
DROP PROCEDURE `add_day`;

DELIMITER $$

CREATE DEFINER=`root`@`localhost` 
       PROCEDURE `add_day`(IN `d_id` INT, IN `date` VARCHAR(64))
BEGIN
      DECLARE x  INT;
      SET @x = 1;
      WHILE @x  <= 30 DO
          INSERT INTO  `e-heal`.`scheduler`
              (`scheduler_id` ,`d_id` ,`hour_id` ,`date` ,`available`)
              VALUES (NULL ,  '5',  @x,  '2013-04-22',  '0');

          SET  @x = @x + 1; 
      END WHILE;
END $$

DELIMITER ; 
```

但是我想知道您要如何处理您从未使用过的两个内参数，并且它们与其中的两个列具有相同的名称。

# visual-c++ - 无法调用或分配具有右值引用作为参数的 std::function (Visual C++)

> ID：16155395
> 
> 赞同：0
> 
> 时间：2013-04-22T19:42:19.683
> 
> 标签：visual-c++, rvalue-reference

似乎 Visual C++`std::function<>`不处理以右值引用作为参数的函数。任何人都可以提出解决方法吗？

```
#include <functional>
using namespace std;

class Object { };

void f(Object&&) { }
auto g = [](Object&&){ };
function<void(Object&&)> h;

int main()
{
   Object o;
   f(move(o));
   g(move(o));

   // Uncomment any one of the following lines, and we get an error from the instantiation
   // of std::function: "error C2664: You cannot bind an lvalue to an rvalue reference"

   //h(move(o));
   //h = g;
   //h = f;

   return 0;
} 
```

这是 Visual Studio 2010。我没有使用 /Za（所以不是[这个问题](https://stackoverflow.com/questions/2681959/problem-with-moveable-only-types-in-vc-2010)）。

**经过一些研究后更新：**代码在 Clang 中编译，所以我很确定这是 Microsoft 的错误。可能是这个，在 VC11 中修复：[649274](http://connect.microsoft.com/VisualStudio/feedback/details/649274)

**更正更新：** VC11 中未修复 MS 错误。从链接：

> 我们的第一个机会将是 Herb Sutter 在 GoingNative 2012 会议上宣布的 VC11 和 VC12 之间的“带外”版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:55:02.357

我不确定您在这里想要什么解决方法。假设您无法更改函数对象的调用表达式和目标签名，则可以包装右值引用并通过 const ref 传递包装的对象（临时）。本质上，调用扩展为：`f( wrap(move(o)) );`

我怀疑完美转发存在问题，因为绑定`i = bind(&f);`不起作用；因此，我引入了一个执行完美转发的中间步骤，以便将呼叫解析为：`f( move( (Object&)wrap( move(o) ) ) );`

```
#include <iostream>
#include <functional>
using namespace std;

struct Object { int m; };

// target function with fixed signature (assuming we cannot change that)
void f(Object&& p) { p.m = 42; std::cout << p.m; };

// was surprised I didn't find any method to chain functions in the StdLib
// so here's my own:
template < typename F1, typename F2, typename P1 >
auto chain2(F1 f1, F2 f2, P1&& p1)
    -> decltype( f1(f2( std::forward<P1>(p1) )) )
{
    return f1( f2( std::forward<P1>(p1) ) );
}
// a special bind version; mostly syntactic sugar
// note you can also deduce the first template parameter; would be more work
// and not necessary here
template < typename P1, typename F1, typename F2 >
auto bind_chain(F1 f1, F2 f2)
  -> decltype( std::bind( &chain2<F1,F2,P1>, f1, f2, std::placeholders::_1 ) )
{
    return std::bind( &chain2<F1,F2,P1>, f1, f2, std::placeholders::_1 );
}

// as `std::move` is overloaded, we make things a little bit simpler;
// we later will need to get a function pointer on this, that's why
// I'd like to avoid too much overloading
template < typename T >
// for a certain reason, cannot use && here --------v, clang++3.2 accepts it
typename std::remove_reference<T>::type && my_move(T& p)
{
    return std::move(p);
}

struct wrapper
{
    Object&& m;
    wrapper(Object&& p) : m(std::move(p)) {}
    operator Object&() const { return m; }
    // alternatively:
    // operator Object&&() const { return std::move(m); }
};

int main()
{
   Object o;

   // we'll need to call the functor with an const ref
   function<void(wrapper const&)> i;

   // chaining the conversion to rvalue ref with the target function
   i = bind_chain<wrapper const&>( &f, &my_move<Object> );

   i( move(o) );

   return 0;
} 
```

# javascript - 在表格中使用多个 thead 或 tfoot 元素是否有效？

> ID：16155396
> 
> 赞同：91
> 
> 时间：2013-04-22T19:42:22.447
> 
> 标签：javascript, html

想象一个类似这样的列表：

```
var list = [
  { name: 'group1', 
    items: [ 1, 2, 3, 4, 5 ]
  },
  { name: 'group2', 
    items: [ 1, 2, 3, 4, 5 ]
  },
  etc...
] 
```

现在忘记了整个“表格是用于数据而不是设计”的论点，我想显示一个表格，`list`并为. `<thead>``<tbody>``list`

这在技术上有效吗？这在浏览器中有效，但我的[蜘蛛感觉对这个感到刺痛](https://stackoverflow.com/questions/3206239/multiple-thead-tbody-design)。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-04-22T19:44:30.093

您可以拥有任意数量的元素，但和中`<tbody>`的每个元素不得超过一个。[参考](https://www.w3.org/TR/html/tabular-data.html#the-table-element)：`<thead>``<tfoot>`

> **内容模型：**
> 
> 按此顺序：可选的标题元素，后跟零个或多个 colgroup 元素，**可选的后跟一个 thead 元素，后跟零个或多个 tbody 元素或一个或多个 tr 元素，可选的后跟一个 tfoot 元素**，可选地与一个混合或更多脚本支持元素。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T19:48:24.717

最多[允许](http://www.w3.org/TR/html-markup/table.html#table)`thead`一个和一个，所以你不应该创建额外的标题。毕竟in a为您的列赋予了含义，例如“一天中的时间”、“温度”、“当前着火的猫的数量”。`tfoot` `th``thead`

如果列表中的条目是相关的，它们应该都在同一个表中，并且您应该提供一个合适的标题来显示该关系。

如果条目实际上是不相关的，您应该为每个条目提供一个表。您仍然可以在每个表上应用相同的 CSS 以获得良好的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T19:45:19.830

我认为它就像`id`属性一样。它们应该是唯一的，但您实际上可以在同一页面中重复使用它并且您仍然可以选择它。 **也就是说，仅仅因为它可以完成并不意味着它应该完成。**

我建议反对它。

# wpf - 如何在不使用 BasedOn 属性的情况下基于另一种样式应用 WPF 样式

> ID：16155399
> 
> 赞同：0
> 
> 时间：2013-04-22T19:42:42.967
> 
> 标签：wpf

我正在设计 CellValuePresenter（来自 Infragistics）以赋予 Gid Lines 不同的外观，并定义了一个样式（gridLineStyle）并应用于 Grid 的 CellValuePresenterStyle 属性。

我发现有些列的自定义模板是通过模板化 CellValuePrenter 定义的，并且网格线不可见（如预期的那样）。我可以通过应用 BasedOn 属性使其工作，如

```
 <Style x:Key="gridLineStyle" TargetType="ig:CellValuePresenter">
      <Setter Property="BorderThickness" Value="0,0,1,1"/>
      <Setter Property="BorderBrush" Value="{Binding Path=BorderBrushForAllCells,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type pwc:CarbonBlotter}}}"/> 
    </Style>

 <Style x:Key="anotherColumnStyle" TargetType="{x:Type ig:CellValuePresenter}"   BasedOn="{StaticResource gridLineStyle}">
      <Setter Property="Template">
      ....

<pwc:BaseXamDataGrid>
    <pwc:BaseXamDataGrid.FieldSettings>
            <ig:FieldSettings CellValuePresenterStyle="{StaticResource gridLineStyle}"
             ... 
```

但是有很多带有自定义模板的样式，只是想知道我是否可以在不使用 BasedOn 属性但继承默认样式的情况下定义样式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:59:57.427

您可以在 DefaultStyles\DataPresenter\DataPresenterGeneric_Express.xaml 下的 infragistics 安装文件夹中找到完整的 CellValuePresenter 样式定义。您可以将该样式复制到 Application.Resources 下的 App.xaml 中，根据需要进行修改，这应该成为新的默认样式单元值演示者。

# c# - 应用内购买时的返回按钮/取消按钮

> ID：16155405
> 
> 赞同：1
> 
> 时间：2013-04-22T19:43:25.403
> 
> 标签：c#, exception-handling, windows-phone-8, in-app-purchase, windows-phone

在 Windows Phone 8 的单元测试（Beta 应用程序）期间，当我按下手机上的取消或返回按钮时，我无法检测到应用内购买商店抛出的异常。该应用程序只是退出。

使用 MockIAP 时没有错误。取消或返回按钮在`await receipt = Store..`. 它在 MockIAP 中得到了正确处理。但显然 Unit Test 和真正的应用商店以不同的方式处理 Cancel 或 Back 事件。该应用程序只是退出，我相信这是因为它抛出了一个未处理的错误。

我的应用是 Phonegap 2.3，购买部分由插件处理。与 MockIAP 不同，在购买过程中按下取消或后退按钮时，我看不到（即附加断点）包装端发生的情况。我尝试过展示`MessageBox.Show`购买的每一步。当`MessageBox.Show`我按下确认购买时，代码有效，但当我按下取消或返回按钮时无效。我已经让它与`EventWaitHandle`.

另外，我已经`e.Handled = true`为未处理的异常事件设置了尝试阻止它退出应用程序而没有运气。

从网上，我的购买代码是样板，所以我不明白为什么其他人以前没有遇到过这个问题，为什么网上没有解决方案。有谁知道如何解决这个问题？

购买.cs（插件）：

```
private static string receipt;

private async void purchaseProduct()
        {
            bool canBuy = false;
            try
            {
                li = await Store.CurrentApp.LoadListingInformationAsync();

                if (li.ProductListings.ContainsKey(package_id))
                {
                    canBuy = true;

                    EventWaitHandle Wait = new AutoResetEvent(false);
                    Deployment.Current.Dispatcher.BeginInvoke(async () =>
                    {

                        // Here is the problem.. Don't know what is passed back to receipt when Cancel or Back is pressed, which is causing the app to close during Unit Test but not MockIAP

                        receipt = await Store.CurrentApp.RequestProductPurchaseAsync(package_id, true);
                        receipt = receipt.ToString();
                        Wait.Set();
                    });

                    Wait.WaitOne();
                }
            }
            catch(Exception e)
            {
                var eMsg = e.Message.ToString();
                errorMsg("Catch Exception: ", eMsg);
                DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR));
            }
            finally
            {
                errorMsg("Receipt with await: ", receipt);

                if (canBuy && receipt!= "")
                {
                    errorMsg("Hitting the parsing", "");

                    parseXML(receipt);
                    prepData();
                    httpPostData();
                    Store.CurrentApp.ReportProductFulfillment(package_id);
                }
                else
                {
                    errorMsg("Else Finally", "");

                    DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR));
                }
            }
        }

        private static void errorMsg(String caption, String msg)
        {
            EventWaitHandle Wait = new AutoResetEvent(false);
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(caption + msg);
                Wait.Set();
            });

            Wait.WaitOne();
        } 
```

应用程序.cs

```
 private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
        {
            Exception ex = (Exception)e.ExceptionObject;

            EventWaitHandle Wait = new AutoResetEvent(false);
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show("Unhandled Exception: " + ex.Message);
                Wait.Set();
            });

            Wait.WaitOne();

            // Stop from exiting.. 
            e.Handled = true;

            if (System.Diagnostics.Debugger.IsAttached)
            {
                // An unhandled exception has occurred; break into the debugger
                //System.Diagnostics.Debugger.Break();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:06:11.510

修复这个在 RequestProductPurchaseAsync 方法调用周围附上 try/catch，即使您对整个方法都有一个 try/catch...

```
try
{
  receipt = await CurrentApp.RequestProductPurchaseAsync("MyItem", false);
}
catch (Exception){}

.... other code 
```

# ajax - 具有动态更新 api 的 extjs TreeStore 代理

> ID：16155406
> 
> 赞同：3
> 
> 时间：2013-04-22T19:43:27.747
> 
> 标签：ajax, json, tree, extjs4

从我扩展的 Ext.data.TreeStore：

```
proxy: {
    type: 'ajax',
    api: {
        read: "/GetTree.json",
        update: "/SetTree.aspx?username=user1"
    },
    reader: {
        type: 'json',
        root: 'children'
    },
    listeners: {
        exception: function (proxy, response, options) {
            // error case
            console.log('Exception in Portlets store proxy...');
            console.log(response);
        }
    }
}, 
```

我想弄清楚的是如何制作`username=user1`动态，以便我可以传入`user2`并使用该用户数据进行 aspx 页面处理。

我无法弄清楚是否/如何`TreeStore.sync()`允许将参数传递给它。

## 更新：

我真正想要的是能够将整个树结构保存为 JSON 字符串，而不仅仅是更新的记录。我可以构建我需要传递的 JSON 字符串，但无法弄清楚如何将这些信息实际获取到我的`SetTree.aspx`页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:26:53.280

您可以在调用同步之前尝试在代理上设置额外的参数：

```
store.proxy.extraParams = { param1 : '', param2 : '' }; 
```

有轶事证据表明这在 4.1.3 中有效，但在早期版本中无效。

另一个想法是只触发一个常规的 Ajax.request 并发送所需的参数，而不是使用树存储来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T18:59:07.387

我知道这已经过时了，但是对于像我这样正在搜索相同问题的人...如果您想保存整个结构而不仅仅是修改后的行，您需要`writer`在您的商店代理和该作家中定义一个，设置`writeAllFields: false`：

```
proxy: {
    type: 'ajax',
    api: {
        read: "/GetTree.json",
        update: "/SetTree.aspx?username=user1"
    },
    reader: {
        type: 'json',
        root: 'children'
    },
    listeners: {
        exception: function (proxy, response, options) {
            // error case
            console.log('Exception in Portlets store proxy...');
            console.log(response);
        }
    },
    writer: {
        type: 'json',
        writeAllFields: true
    }
}, 
```

# ios - 具有自动布局的动态 uiview 布局

> ID：16155411
> 
> 赞同：0
> 
> 时间：2013-04-22T19:43:40.513
> 
> 标签：ios, uiview, interface-builder, autolayout, nslayoutconstraint

我正在使用自动布局，到目前为止它进展顺利，但现在我对如何继续实现我想要的设计感到迷茫。

我收到了一份包含 2 个部分的小问卷。每个部分都嵌入在自己的 UIView 中，每个部分的视图包含每个问题的 uiview。

我的问题是，我想动态添加问题，当用户在问题 1 中输入某个输入时，只显示第 1 部分的问题 2。

![所需布局](https://i.stack.imgur.com/3X7hn.png)

我首先尝试通过对问题视图使用 addsubview 并使用 setFrame 动态重置该部分的框架来显示每个部分：在意识到此方法不适用于自动布局之前（例如，因为我的问卷包含在滚动视图中，滚动将调用滚动视图上的 loadsubviews 方法并将部分的视图重置为其原始大小...）

实现这一目标的正确方法是什么？也许使用可变大小的表格视图？或者以编程方式创建布局约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:43:52.110

我最终做的是 Dan F 建议使用 tableview。[我在这篇很棒的帖子https://stackoverflow.com/a/12574544/865632](https://stackoverflow.com/a/12574544/865632)中使用了答案在视图容器中创建静态 tableview 允许我拥有静态单元 uitableview 而不必将我的主视图控制器与虚拟 tablecontroller 聚集在一起

# angularjs - AngularJS 中“值”属性的 ng-src 等效项

> ID：16155420
> 
> 赞同：1
> 
> 时间：2013-04-22T19:44:13.203
> 
> 标签：angularjs, angularjs-directive

使用 AngularJS，我正在尝试将 vimeo 链接嵌入到我的一个页面。但是，根据用户是来自 HTTPs 还是 HTTP，我们将相应地更改 URL。

```
 <div class="video">
    <object width="640" height="480">
        <param name="allowfullscreen" value="true" />
        <param name="allowscriptaccess" value="always" />
        <param name="movie" value="{{sslCheck}}//vimeo.com/moogaloop.swf?clip_id=12345&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=666699&amp;fullscreen=1" />
        <embed ng-src="{{sslCheck}}//vimeo.com/moogaloop.swf?clip_id=12345&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=666699&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="640" height="480">
        </embed>
    </object>
</div> 
```

控制器中的 sslCheck 将是**"https:"**或**"http"**。

问题是**ng-src**在 Google Chrome 中正确获取 HTTPs 和 HTTP 的 URL，但是

```
<param name="movie" value="{{sslCheck}}//vimeo.com/moogaloop.swf?clip_id=12345&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=666699&amp;fullscreen=1" /> 
```

在谷歌浏览器中没有（尽管它在 FF 中有效）。在控制台中，我们可以看到它正在尝试获取

[https://myDomain.com/](https://myDomain.com/) **%7B%7BmovieURL%7D%7D** //vimeo......

我是否需要为此创建一个指令，或者我可以使用 AngularJS 中的一些开箱即用的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:02:26.687

实际上，我认为最好的方法是不使用 sslCheck。浏览器应该为您处理这个问题，类似于它对 CDN 的处理方式，例如：

```
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script> 
```

所以你的代码就是：

```
<div class="video">
    <object width="640" height="480">
        <param name="allowfullscreen" value="true" />
        <param name="allowscriptaccess" value="always" />
        <param name="movie" value="//vimeo.com/moogaloop.swf?clip_id=12345&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=666699&amp;fullscreen=1" />
        <embed ng-src="//vimeo.com/moogaloop.swf?clip_id=12345&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=666699&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="640" height="480">
        </embed>
    </object>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:10:54.750

看起来指令将是您最好的选择，但您实际上可以创建一个指令参数来模拟本机参数标记，如下所示：

```
module.directive("param", function(){
  return {
   scope: {
     value: "@",
   },
   link: function( scope, element, attrs ){
     element.attr("value", scope.value );
   }
  }
}) 
```

# php - 停止 google 索引 php 页面重定向

> ID：16155427
> 
> 赞同：1
> 
> 时间：2013-04-22T19:44:35.797
> 
> 标签：php, indexing, meta, noindex

我有一个（随机命名的）php 文件，它进行了一些处理，然后使用 header("location:url") 重定向到另一个页面。

如前所述，出于安全原因，该脚本有一个随机名称（例如：euu238843a.php），因为我不希望人们偶然发现它。

事情是 - 我如何阻止谷歌索引它 - 我希望同一目录中的其他页面被索引但不是这个 php 文件。我不希望人们能够做一个 site:myurl.com 并找到“隐藏”脚本。

我通常会在头部放置一个 meta name="robots" content="noindex" 但是，我不能这样做，因为页面需要在最后输出标题以进行重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:51:02.293

您可以使用 PHP 脚本动态更新目录中的 robots.txt 文件，该脚本`robots.txt`根据需要输出新的或附加的。如果您在新行上指定每个动态文件名，例如`Disallow: /File_12345.html`，您可以避免不得不禁止整个目录。

# python - Python SciPy 插值 - 缺少函数

> ID：16155428
> 
> 赞同：1
> 
> 时间：2013-04-22T19:44:37.627
> 
> 标签：python, scipy, interpolation

[我从http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)为 Python 2.7 安装了 SciPy 0.12.0 ，但我只有 scipy.interp 而不是 scipy.interpolate 函数。这不是我想要的，因为 interp 不提供三次插值。我搜索了一些信息，但到处都是使用 scipy.interpolate 的示例。我卸载了 scipy，并从 scipy.org 安装了相同的版本，甚至是 0.9.0 版 - 结果相同。

我找到了“手动”三次插值的例子，但我宁愿使用 scipy.interpolation。如何得到它？

问候， mopsiok

# ajax - 设计多个模型，使用 ajax 登录的引导模式

> ID：16155429
> 
> 赞同：1
> 
> 时间：2013-04-22T19:44:39.013
> 
> 标签：ajax, twitter-bootstrap, devise, ruby-on-rails-3.2

我有两种用户 - 护士和患者，并且想要设置登录，以便在欢迎/登陆页面上有两个按钮，它们为每种类型的用户打开一个带有登录表单的引导模式。我希望登录表单发送一个 AJAX 请求，这样如果有错误，它们就会显示在模式本身中。

我正在使用 Devise 进行身份验证，并为护士和患者设置了 2 个模型。最初，我设置了模式以加载`new_nurse_session_path`单击按钮的 url，修改默认设计登录表单以发送 AJAX 请求，使用自定义`SessionsController`处理新会话并发送回 JSON 回复，然后让 JS 代码捕获回复. 这个工作（尽管有一些问题如下）非常慢，因为它正在加载整个页面`nurses/sessions/new.html.erb`以及标题、导航栏等。

## 问题

1.  虽然在模式中打开整个登录页面时 JS 代码正在捕获 AJAX 请求（如下面的代码所示），但如果我直接打开该页面，即使服务器正在发送正确的 JSON，也不会处理 AJAX 请求回来 - 我在这里做错了什么可能会导致这个问题吗？

2.  为了避免在模态中加载整个新会话页面，我按照此处的说明进行操作[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere- in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)将表单置于模态中。我在这里面临的问题是如何创建帮助程序，以便它根据尝试登录的护士或患者来定义资源和设计映射。如果我为每个表单创建单独的自定义表单和模式，我在处理 AJAX 请求时会遇到与第一季度相同的问题。非常感谢我在这里可能做错的事情的帮助。

3.  如果我在这里陷入困境，非常感谢以更好的方式实现上述功能的建议！谢谢！

## 使用的代码

登录表单，nurses/sessions/new.html.erb：

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name), 
    :html => {:id => "sign_in_nurse"}, :format => :json, 
    :remote => true) do |f| %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email, :autofocus => true %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %>

<%= render "nurses/shared/links" %> 
```

Coffeescript 处理 AJAX 回复，nurses.js.coffee：

```
$("form#sign_in_nurse").bind "ajax:success", (e, data, status, xhr) ->
  if data.success
    window.location.replace(data.redirect)
  else
    alert('failure!') 
```

会话控制器：

```
class SessionsController < Devise::SessionsController
  def create
    resource = warden.authenticate!(:scope => resource_name, :recall => "sessions#failure")
    return sign_in_and_redirect(resource_name, resource)
  end

  def sign_in_and_redirect(resource_or_scope, resource=nil)
    scope = Devise::Mapping.find_scope!(resource_or_scope)
    resource ||= resource_or_scope
    sign_in(scope, resource) unless warden.user(scope) == resource
    return render :json => {:success => true, :redirect => stored_location_for(scope) || after_sign_in_path_for(resource)}
  end

  def failure
    return render :json => {:success => false, :errors => ["Login failed."]}
  end
end 
```

生成模态的代码：

```
 <li><%= link_to image_tag('i_am_nurse.png', :size => "130x130"),
 new_nurse_session_path , :data => { :target => "#ajax-modal",  :toggle => "modal"} %></li> 
```

引导模态 div：

```
<div id="ajax-modal" class="modal hide fade" tabindex="-1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    </div>
    <div class="modal-body">
        <div class="modal-body-content"></div>
        <div class="ajax-loader"></div>
    </div>
    <div class='modal-footer'>
        <button type="button" data-dismiss="modal" class="btn">Close</button>
    </div>
</div>​ 
```

# java - Java 套接字聊天应用程序

> ID：16155432
> 
> 赞同：-1
> 
> 时间：2013-04-22T19:45:02.187
> 
> 标签：java, serversocket

您好我正在寻找使用套接字构建聊天应用程序的指导，该应用程序允许客户创建房间供其他客户加入和聊天。我已经建立了一个聊天应用程序，它可以工作，客户可以加入，但是客户在一个房间里，不能移动到其他房间。我创建了一个类似的应用程序，使用 rmi 用户可以添加房间供其他客户加入和聊天。这次我想练习使用socket。任何让我开始的帮助或指导都会非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:58:19.187

据我所知，你想

*   通过普通的 IO 套接字连接，并且可能通过每个套接字一个读取器线程阻塞 NIO。
    *   我建议你有一个包装每个套接字的处理程序类。
*   使用基于文本的协议。
    *   您需要一个命令来添加到房间、从房间中删除、获取当前房间列表以及发送消息。
*   允许单个客户一次订阅/收听/出现在多个房间
    *   这意味着每个房间都需要一组处理程序。
*   您想要处理缓慢的消费者并优雅地断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:00:18.420

要实现通信层，您应该查看 netty[或](http://netty.io)apache [mina](http://mina.apache.org)。两者都满足您对客户端和服务器端的需求。我猜他们已经有一个聊天协议示例。

# matlab - 在matlab中读取不同长度的数据

> ID：16155433
> 
> 赞同：0
> 
> 时间：2013-04-22T19:45:02.407
> 
> 标签：matlab, scanf

我有一个文件 'output.polygon' 存储多行不同长度的数据，如下所示

```
7760 5593040 0 5622880 0 5591040 7760 5593040 
65000 5407200 0 5407200 0 0 65000 0 65000 5407200 
7760 5593040 
```

我要做的是首先读取所有数据，然后用空格解析它。

```
conductor = fopen('output.polygon');
s = fscanf(conductor, '%s');
A = strread(s); 
```

但是，我的代码不起作用。任何人都可以帮我指出问题并就这个问题给出提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:10:31.273

您可以尝试[importdata](http://www.mathworks.com/help/matlab/ref/importdata.html)函数，它允许您指定列分隔符。以下代码将您的数据加载到稀疏矩阵 A 中：

```
 A = importdata('output.polygon',' ');

 A =

    7760     5593040           0     5622880           0     5591040        7760     5593040
   65000     5407200           0     5407200           0           0       65000           0
   65000     5407200         NaN         NaN         NaN         NaN         NaN         NaN
    7760     5593040         NaN         NaN         NaN         NaN         NaN         NaN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:14:26.357

```
fid = fopen('output.polygon','r');
A = textscan(fid,'%s','Delimiter','\n');
A = A{1}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:39:26.603

所以你可以这样做：

```
conductor = fopen('output.polygon');
A = fscanf(conductor, '%d'); 
```

# properties - Gradle / Groovy 属性

> ID：16155435
> 
> 赞同：5
> 
> 时间：2013-04-22T19:45:17.863
> 
> 标签：properties, configuration, groovy, gradle

我想使用每个构建机器（dev、ci、uat、...）上的外部属性文件来控制 Gradle 构建脚本中的“全局”配置，并使用命令行参数指定文件名。

例如`gradle -DbuildProperties=/example/config/build.properties`

我特别不想使用 gradle.properties，因为我们有已经使用这种方法的现有项目，并且（例如）我们希望能够修改数据库 url 和 jdbc 驱动程序而不必更改每个项目。

到目前为止已经尝试过：-

```
Properties props = new Properties() 
props.load(new FileInputStream("$filename")) 
project.setProperty('props', props) 
```

它有效，但有一个已弃用的警告，但我不知道如何避免这种情况。

还尝试使用带有 ConfigSlurper 的 groovy 样式配置文件：-

```
environments {
    dev {
        db.security {
            driver=net.sourceforge.jtds.jdbc.Driver
            url=jdbc:someserver://somehost:1234/some_db
            username=userId
            password=secret
        }
    }
} 
```

但是冒号和正斜杠会导致异常，我们不想用转义字符弄乱配置。

必须有一种不被弃用的方式来做到这一点 - 任何人都可以提出“正确”的方式来做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T20:56:14.990

您可以很容易地摆脱已弃用的警告。您收到的消息可能如下所示：

> 按需创建属性（也称为动态属性）已被弃用，并计划在 Gradle 2.0 中删除。有关替换动态属性的信息，请阅读[http://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html 。](http://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html)不推荐使用的动态属性：“根项目'private'”上的“props”，值：“true”。

可以通过更换来修复：

```
project.setProperty('props', props) 
```

和

```
project.ext.props = props 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-12T15:06:02.857

只是为了补充@Steinar给出的回复：

仍然可以使用下一个语法：

```
project.ext.set('prop_name', prop_value) 
```

如果您有文件中的几个属性：

```
props.each({ project.ext.set(it.key, it.value)} ) 
```

# rows - 将道场标签分成多行？

> ID：16155438
> 
> 赞同：0
> 
> 时间：2013-04-22T19:45:22.067
> 
> 标签：rows, dojo, tabcontainer

是否有可能有一个 dijit TabContainer 在一行以上的选项卡上而不是默认情况（您左右滚动以查看额外的选项卡）？我正在使用dojo 1.8 和claro 主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T17:48:34.673

我发现添加 controllerWidget="dijit.layout.TabController" 会将标签分成多行：

```
<div data-dojo-type="dijit/layout/TabContainer" controllerWidget="dijit.layout.TabController" doLayout="false"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:47:07.100

这应该可以帮助您：

[http://shaneosullivan.wordpress.com/2009/04/04/dojo-tabcontainer-beating-the-wrap/](http://shaneosullivan.wordpress.com/2009/04/04/dojo-tabcontainer-beating-the-wrap/)

显然它被称为“包装标签”。

我认为当您以编程方式使用 dojo 时，您几乎可以将任何东西放入可以注入小部件构造器的 data-dojo-props 中。要找出可以在那里使用的内容，请查阅 dojo api 并查看小部件的属性：

[https://dojotoolkit.org/api/](https://dojotoolkit.org/api/)

这是 dojo 解析器（将声明性代码转换为实际 javascript 的东西）如何处理内容的链接：

[http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html](http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html)

# xcode - 如何运行 2 个版本的 Xcode（.app 版本）？

> ID：16155448
> 
> 赞同：1
> 
> 时间：2013-04-22T19:45:48.100
> 
> 标签：xcode

安装两个版本的 Xcode 后是否有任何问题，因为它们已移至 .app 版本？

过去会设置单独的目录树，以防止我的 Xcode 世界发生冲突。不再需要了吗？

谢谢，
道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:09:35.450

没有问题。每次有测试版时我都会这样做。如果它们在同一目录中，您只需要**重命名应用程序。**

与往常一样，使用`xcode-select`设置默认值。

# gentoo - pkg-config 看不到 .pc 文件，即使包含文件夹位于 PKG_CONFIG_PATH

> ID：16155449
> 
> 赞同：3
> 
> 时间：2013-04-22T19:45:49.333
> 
> 标签：gentoo, pkg-config

我正在运行 gentoo linux，我试图让 pkg-config 找到 ntk.pc（ntk 是我试图链接到的库）。以下是场地：

输出`echo $PKG_CONFIG_PATH`：

```
/usr/local/lib/pkgconfig:/usr/lib/pkgconfig 
```

输出`locate ntk.pc`：

```
/usr/local/lib/pkgconfig/ntk.pc 
```

输出`pkg-config --modversion ntk`：

```
Package ntk was not found in the pkg-config search path.
Perhaps you should add the directory containing `ntk.pc'
to the PKG_CONFIG_PATH environment variable
No package 'ntk' found 
```

输出`cat /usr/local/lib/pkgconfig/ntk.pc`：

```
prefix=/usr/local
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir=${prefix}/include

Name: ntk
Description: Non ToolKit
Version: 1.3.0

Requires: cairo >= 1.9.0
Requires.private: x11 xft
Libs: -L${libdir} -lntk
Cflags: -I${includedir}/ntk -pthread -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE 
```

任何帮助都是极好的。如果您需要更多信息，请发表评论，我会给您。先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:48:31.070

所以我修好了。事实证明，pkg-config 不像普通的 bash 路径（/usr:/bin...等）那样理解冒号分隔，或者我的 comp 只需要重新启动。无论哪种方式，将 $PKG_CONFIG_PATH 分配给 /usr/local/lib/pkgconfig 都可以！

# django - 我对 django 很着迷，没有名为 xxx 的模块

> ID：16155451
> 
> 赞同：1
> 
> 时间：2013-04-22T19:45:57.957
> 
> 标签：django

我不是美国人。我希望我能清楚地表达我发生的事情。

```
**Django wrong log:**
    ImportError at /accounts/signin/
    No module named coltrane
    Request Method: GET 
    Request URL: http://abc.com:8080/accounts/signin/ 
    Django Version: 1.4.1 
    Exception Type: ImportError 
    Exception Value: No module named coltrane 
    Exception Location: /usr/lib/python2.6/site-packages/django/utils/importlib.py in import_module, line 35 
    Python Executable: /usr/bin/python 
    Python Version: 2.6.6 
    Python Path: ['/home/graduate',
     '/usr/lib64/python26.zip',
     '/usr/lib64/python2.6',
     '/usr/lib64/python2.6/plat-linux2',
     '/usr/lib64/python2.6/lib-tk',
     '/usr/lib64/python2.6/lib-old',
     '/usr/lib64/python2.6/lib-dynload',
     '/usr/lib64/python2.6/site-packages',
     '/usr/lib64/python2.6/site-packages/PIL',
     '/usr/lib64/python2.6/site-packages/gtk-2.0',
     '/usr/lib/python2.6/site-packages',
     '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info'] 
    Server time: 星期二, 23 四月 2013 11:27:33 +0800 

    Error during template rendering
    In template /usr/lib/python2.6/site-packages/userena/templates/userena/signin_form.html, error at line 29

    No module named coltrane
    19     </p>

    20     {% else %}

    21     <p>

    22     {{ field.label_tag }}

    23     {{ field }}

    24     </p>

    25     {% endif %}

    26     {% endfor %}

    27   </fieldset>

    28   <input type="submit" value="{% trans "Signin" %}" />

    29   <p class="forgot-password"><a href="{% url 'userena_password_reset' %}" title="{% trans 'Forgot your password?' %}">{% trans "Forgot your password?" %}</a></p>

    30   {% if next %}<input type="hidden" name="next" value="{{ next }}" />{% endif %}

    31 </form>

    32 {% endblock %}

    33 
```

但我的设置文件：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'django.contrib.markup',
    'django.contrib.comments',
    'userena',
    'easy_thumbnails',
    'guardian',
    'graduate.coltrane',
    'graduate.accounts',
) 
```

我的项目目录：

```
[root@fuwuqi graduate]# pwd
/home/graduate/graduate
[root@fuwuqi graduate]# ls
accounts  coltrane  __init__.py  __init__.pyc  settings.py  settings.pyc  templates  urls.py  urls.pyc  wsgi.py  wsgi.pyc
[root@fuwuqi graduate]# 
```

我很疯狂，为什么 django 告诉我“没有名为 coltrane 的模块”，我很困惑。

这个问题花了我很长时间直到现在。

所以我只是去睡觉，希望有人能帮我一把。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:58:52.653

如果您选中`PYTHONPATH`,则`/home/graduate/graduate`需要在路径上才能使`coltrane`包可导入。

您需要检查您的项目配置或将`coltrane`包移动到`/home/graduate`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T20:32:17.623

尝试使用不带 ''的**url 模板标签**

```
 29   <p class="forgot-password"><a href="{% url 'userena_password_reset' %}" 
```

这边走

```
{% url userena_password_reset %} 
```

有时你从调试器得到的信息不是很清楚。

# ios - UIPicker 显示？而不是文字

> ID：16155452
> 
> 赞同：1
> 
> 时间：2013-04-22T19:46:03.410
> 
> 标签：ios, cocoa-touch, uipickerview

我仍然是 iOS 编码的新手，但我正试图让我的 UIPicker 显示我想要的选项，然后能够选择选择的选项并用它做一些事情。但不是让选择器显示我的选项，而是显示？标记而不是我的选择。

这是我的 GuardCompany.h

```
#import <UIKit/UIKit.h>
#define COLOUR 0 

@interface GuardCompany : UIViewController

<UIPickerViewDataSource,UIPickerViewDelegate>{

    IBOutlet UIPickerView *ColourAndShadePicker;

    NSMutableArray *arrayColour;
     }

@end 
```

这是我的 GuardCompany.m

```
#import "GuardCompany.h"

@interface GuardCompany ()

@end

@implementation GuardCompany

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

    if (component == COLOUR)
        return [arrayColour count];

    return 0;

}

- (NSString *)GuardCompany:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    if (component == COLOUR)
        return [arrayColour objectAtIndex:row];

    return 0;
}

#pragma mark - view lifecycle

-(void)viewDidLoad
{
    [super viewDidLoad];

    arrayColour = [[NSMutableArray alloc] init];
    [arrayColour addObject:@"red"];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:51:15.887

乍一看，这看起来不正确：

```
- (NSString *)GuardCompany:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

将其更改为：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

# vb.net - 控制台应用程序添加了额外的行，为什么？

> ID：16155454
> 
> 赞同：0
> 
> 时间：2013-04-22T19:46:17.773
> 
> 标签：vb.net

我对编写控制台应用程序很陌生。我不明白为什么当控制台运行并写入它收到的消息时，它会在控制台中创建一堆额外的行。我敢肯定这是愚蠢的，但我在不得已的情况下，因为谷歌上没有人显然对 vb.net 如此愚蠢。提前致谢！

```
Sub Main()
    Do
        Console.WriteLine("Waiting for connection...")
        server.Start()
        client = server.AcceptTcpClient()
        Console.WriteLine("Connected")
        Do
            stream = client.GetStream()
            Dim recvBytes(client.ReceiveBufferSize) As Byte
            stream.Read(recvBytes, 0, client.ReceiveBufferSize)
            Dim recvText As String = Encoding.ASCII.GetString(recvBytes)
            Console.WriteLine(recvText)
            responses = Console.ReadLine
            If responses = "close" Then
                stream.Close()
                client.Close()
                server.Stop()
                Environment.Exit(0)
            Else
                Dim sendBytes() As Byte = Encoding.ASCII.GetBytes(responses)
                stream.Write(sendBytes, 0, sendBytes.Length)
                Console.WriteLine("Message Sent")
            End If
            If client.Connected = False Then
                Console.WriteLine("Client is no longer connected")
                Exit Do
            End If
        Loop
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:17:54.990

我相信以下行返回一个空字符串

```
Dim recvText As String = Encoding.ASCII.GetString(recvBytes) 
```

因此，在打印出该行之前，只需验证它是否为空。修改后的代码如下：

```
Sub Main()
Do
    Console.WriteLine("Waiting for connection...")
    server.Start()
    client = server.AcceptTcpClient()
    Console.WriteLine("Connected")
    Do
        stream = client.GetStream()
        Dim recvBytes(client.ReceiveBufferSize) As Byte
        stream.Read(recvBytes, 0, client.ReceiveBufferSize)
        Dim recvText As String = Encoding.ASCII.GetString(recvBytes)
        If recvText <> "" Then Console.WriteLine(recvText)
        responses = Console.ReadLine
        If responses = "close" Then
            stream.Close()
            client.Close()
            server.Stop()
            Environment.Exit(0)
        Else
            Dim sendBytes() As Byte = Encoding.ASCII.GetBytes(responses)
            stream.Write(sendBytes, 0, sendBytes.Length)
            Console.WriteLine("Message Sent")
        End If
        If client.Connected = False Then
            Console.WriteLine("Client is no longer connected")
            Exit Do
        End If
    Loop
Loop

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:52:40.167

我遇到的问题与接收缓冲区大小有关。一旦我实际设置了它，然后使用字符串生成器来构建最终的字符串；一切都很好。感谢所有的建议。这些建议导致了一些非常有趣和急需的关于我没有考虑过的事情的阅读，事实证明，需要更多地关注。

# wpf - WPF。如何将属性绑定到控件？

> ID：16155455
> 
> 赞同：0
> 
> 时间：2013-04-22T19:46:17.927
> 
> 标签：wpf, binding

**C#代码：**

一个`Theme`有成员的类`Color themeColor`And

`MainWindow`有一个成员`Theme winTheme`。

**XAML：**

一个`Grid`。

我想将 绑定`winTheme.themeColor`到 Grid 的`Background`. 这样当变量改变时，Grid的背景会自动改变......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:52:42.600

```
<Grid>
    <Grid.Background>
        <SolidColorBrush Color="{Binding Color}"/>
    </Grid.Background>
</Grid> 
```

# homebrew - 使用自制软件安装时出现 gfortran 错误

> ID：16155457
> 
> 赞同：3
> 
> 时间：2013-04-22T19:46:21.630
> 
> 标签：homebrew, gfortran

我在使用自制软件尝试 gfortran 时遇到的这个问题的任何帮助。非常感谢您提前。

```
 bash-3.2$ brew install gfortran
    Warning: gfortran-4.8.0 already installed, it's just not linked
    bash-3.2$ brew link gfortran
    Linking /usr/local/Cellar/gfortran/4.8.0... Warning: Could not link gfortran. Unlinking...

    Error: Could not symlink file: /usr/local/Cellar/gfortran/4.8.0/share/gcc-4.8.0/python
    /libstdcxx/v6/printers.py
    Target /usr/local/share/gcc-4.8.0/python/libstdcxx/v6/printers.py already exists. 
    You may need to  delete it.
    To force the link and delete this file, do:
    brew link --overwrite formula_name

    To list all files that would be deleted:
    brew link --overwrite --dry-run formula_name
    bash-3.2$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T05:25:19.693

This looks like another GCC 4.8 installation, either from Homebrew or elsewhere, is conflicting with the gfortran install. GFortran is based on GCC so they can collide.

The `gcc48` Homebrew formula looks like it has an undocumented conflict with `gfortran`. Both want to symlink /usr/local/share/gcc-4.8.0\. I was able to reproduce your error with `brew tap homebrew/versions; brew install gcc48; brew install gfortran`

Head on over to the [Homebrew issue tracker on GitHub](https://github.com/mxcl/homebrew/issues) and report this conflict as a bug.

As a workaround, if you don't need that GCC 4.8.0, either `brew unlink gcc48` (if it's from homebrew) or uninstall it, and then try the gfortran install again.

UPDATE: Looks like the Homebrew folks are already aware of this issue. There is a fix for it included in [this pull request (#19382)](https://github.com/mxcl/homebrew/pull/19382).

# php - 使用 PHP 在编辑页面上使用组合框

> ID：16155461
> 
> 赞同：0
> 
> 时间：2013-04-22T19:46:34.053
> 
> 标签：php, html, mysql, crud

我有两个表， tblPlayer(PlayerID, PlayerName,PlayerTeam(int) ) 和 tblTeams (TeamID, TeamName)

在一个 PHP 页面上我有一个查找所选播放器的功能，功能如下，

```
function find_selected_player() {
    global $sel_player;
    if (isset($_GET['id'])) {
        $sel_player = get_player_by_id($_GET['id']);
    } else {
        $sel_player = NULL;
    }
} 
```

我的其他功能如下，

```
function get_player_by_id($player_id) {
    global $conn;
    $query = "SELECT * ";
    $query .= "FROM tblPlayer ";
    $query .= "WHERE PlayerID =" . $player_id ." ";
    $query .= "LIMIT 1";
    $result_set = mysql_query($query, $conn);
    confirm_query($result_set);

    if ($player = mysql_fetch_array($result_set)) {
        return $player;
    } else {
        return NULL;
    }
} 
```

所以在要编辑的表单上我可以得到所有的值，比如

```
<input type="text" name="PlayerName" value="<?php echo $sel_player['PlayerName']; ?>" /> 
```

但是... :) 当我尝试用相反的方式填充组合框时，我被困在那里。添加一些东西时，这就像一个魅力，但 $sel_player['PlayerTeam'] 只给我 ID :(

```
<?php include "conn.php" ?>
<?php include "function.php" ?>
<?php find_selected_player() ?>
<h2>Edit: <?php echo $sel_player['PlayerName'] ." ". $sel_player['PlayerLname']; ?></h2>
<form action="player.php" method="post">
<table>
<tr>
   <td>Name: </td>
   <td><input type="text" name="PlayerName" value="<?php echo $sel_player['PlayerName']; ?>" /></td>
   </tr>
   <tr>
   <td>Lastname:</td>
   <td><input type="text" name="PlayerLname" value="<?php echo $sel_player['PlayerLname']; ?>" /></td>
   </tr>
   <tr>
   <td>Team:</td>
   <td>
        <?php
$sql = "SELECT TeamName, TeamID FROM tblTeam";
$result = mysql_query($sql);

echo '<select name="TeamName"><option>';
echo "Choose a team.</option>";
echo '<option selected>' . $sel_player['PlayerTeam']  . '</option>';
while ($row = mysql_fetch_array($result)) {
    $team_name= $row["TeamName"];
    $team_id = $row["TeamID"];
    echo "<option value=\"$team_id\">$team_name</option>";
}
echo "</select>";
        ?>
    </td>
   </tr>
   <tr>
       <td><input type="submit" name="submit" value="Save" /></td>
       <td align="right">&nbsp;</td>
   </tr>
   </table>
</form>
<?php ob_end_flush() ?>
<?php include ("footer.php") ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:29:29.827

您应该更新您的代码以使用 MySQLi_* 或 PDO。我已经让你从这里开始了。试试这个，看看它是如何为你工作的。

```
function getPlayerByID($pid = '')
{
    global $conn;

    if($pid == '')
        return false;

    $sql = mysql_query("SELECT * FROM tblPlayer WHERE PlayerID = '$pid'", $conn);
    $row = mysql_fetch_array($sql);

    if(mysql_num_rows($sql) == 1)
        return $row;
    else
        return false;
}

$id = isset($_GET['id']) ? $_GET['id'] : '';

$sel_player = getPlayerByID($id);

$sql = mysql_query("SELECT TeamName, TeamID FROM tblTeam");

$select = '<select name=""><option>Choose a Team</option>';

while($row = mysql_fetch_array($sql))
{
    $team_id = $row['TeamID'];
    $team_name = $row['TeamName'];

    $selected = $team_id == $sel_player['PlayerTeam'] ? 'selected' : '';

    $select .= '<option ' . $selected . ' value="' . $team_id . '">' . $team_name . '</option>';
}

$select .= '</select>';

echo $select; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:51:10.730

```
$team_adi should be $team_name 
```

改变：

```
echo "<option value=\"$team_id\">$team_adi</option>"; 
```

到：

```
echo "<option value=\"$team_id\">$team_name</option>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T00:42:11.720

```
<?php

                        $sql = "SELECT TeamName, TeamID FROM tblTeam";
                        $result = mysql_query($sql);
                        $player_id = $_GET['id'];
                        $current_team = mysql_query("SELECT
                                        tblteam.TeamID,
                                        tblteam.TeamName,
                                        tblplayer.PlayerID,
                                        tblplayer.PlayerTeam,
                                        tblplayer.PlayerName
                                        FROM
                                        tblplayer
                                        INNER JOIN tblteam ON tblplayer.PlayerTeam = tblteam.TeamID
                                        WHERE PlayerID = $player_id LIMIT 1 ");
                        $my_row = mysql_fetch_array($current_team);
                        ?>
                        <select name="TeamName">

                            <option selected value="<?php echo $my_row['TeamID']; ?>"> <?php echo $my_row['TeamName']; ?> </option>
                            <?php
                            while ($row = mysql_fetch_array($result)) {
                                $team_name= $row["TeamName"];
                                $team_id = $row["TeamID"];
                                echo "<option value=\"$team_id\">$team_name</option>";
                            }
                            echo "</select>";

                            ?> 
```

# sql - SQL Case 语句增加值

> ID：16155462
> 
> 赞同：6
> 
> 时间：2013-04-22T19:46:37.540
> 
> 标签：sql, sql-server, sql-server-2008

尝试创建一个计算列，该列的值基于其他四个列中的值。第 1 列、第 2 列、第 3 列、第 4 列可以是“是”或“否”。计算列中的最终结果，比如说进度，应该是这样的：

```
Progress = CASE
WHEN [Column1] = 'Yes' THEN Value+1
WHEN [Column2] = 'Yes' THEN Value+1
WHEN [Column3] = 'Yes' THEN Value+1
WHEN [Column4] = 'Yes' THEN Value+1
ELSE 0 END 
```

希望这是有道理的，因为上面的语法显然是不正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T19:51:30.603

听起来这就是你想要的。

```
Progress = 
CASE WHEN [Column1] = 'Yes' THEN 1 ELSE 0 END +
CASE WHEN [Column2] = 'Yes' THEN 1 ELSE 0 END +
CASE WHEN [Column3] = 'Yes' THEN 1 ELSE 0 END + 
CASE WHEN [Column4] = 'Yes' THEN 1 ELSE 0 END 
```

这将为每个“是”返回 0 + 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:03:22.643

在 SQL Server 中：

```
SELECT  *
FROM    mytable
CROSS APPLY
        (
        SELECT  COALESCE(SUM(CASE val WHEN 'yes' THEN 1 END), 0)
        FROM    (VALUES (NULL)) q(v)
        UNPIVOT
                (
                val FOR col IN
                (column1, column2, column3, column4)
                ) c
        ) q (progress) 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!3/1e27d/5)。

# class - 类名前的斜线是什么意思

> ID：16155467
> 
> 赞同：1
> 
> 时间：2013-04-22T19:46:52.153
> 
> 标签：class, uml, slash

一个类前面有斜线，是一个抽象。我在类中看到了开头带有斜线的派生属性，但我不知道当我们在类名之前有斜线时这是什么意思。

![在此处输入图像描述](https://i.stack.imgur.com/UMPOl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:14:07.197

UML2 规范中唯一提到分类器名称前面的斜线涉及组件的接口。英寸。8.3.1，第 155：

> 直接或通过端口定义由组件公开并在图表上标注的接口可以从超类型组件继承。这些接口在图表上通过在接口名称前加上正斜杠来表示。

但是，在您的示例中似乎不太可能出现这种情况。所以我最好的猜测是它是一些非规范用途。显然有些人使用斜线来表示分类器是一个接口。但同样，这是不规范的 - 正确的表示将使用«interface»关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:17:44.303

我想你自己回答了这个问题。属性前面的斜线表示该属性是派生的。派生类的值是根据图中其他基类的值计算得出的。

这有时由`convertToDC():DerivedClass`对象中列出的操作表示，以将信息从基类发送到派生类。

这里有[更多信息](http://som.eldoc.ub.rug.nl/FILES/reports/themeA/2002/02A47/02A47.pdf)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:08:38.493

UML 规范不允许类名前的斜杠。所以这似乎是一个错误。您应该向图表（或创建图表的工具）的作者询问有关斜线的信息。

（关于派生属性，您是正确的。但它们不是由超类定义的，而是由计算规则定义的。）

# android - Android：在初始屏幕期间在后台加载数据并稍后使用

> ID：16155473
> 
> 赞同：3
> 
> 时间：2013-04-22T19:47:22.697
> 
> 标签：android

我试图在我的应用程序启动期间从网络服务器加载数据（返回 JSONArray）。到目前为止，我只能使用以下命令从主要活动中取回数组：

```
if (DEVELOPER_MODE) {
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
        .detectDiskReads()
        .detectDiskWrites()
        .detectNetwork()
        .penaltyLog()
        .build());<br>
}

jsonArray = JsonParser.getJSONFromURL("cities2.php"); 
```

这给了我当前班级中的所有城市（或我需要的任何数据），但这不是一种干净的方法。
我现在的问题是，如何将城市从我的 SplashScreen Activity 获取到我需要的 Activity数据。

我的目标是在 SplashScreen 期间从网络服务器加载所有数据（大约 4500 行文本 -> 大约 50KB 数据）并在不同的活动中使用它们。

所以，我目前的主要问题是如何获取数据从我在 SplashScreen 期间加载的网络服务器到“最后一个”活动（即 SplashScreen -> MainActivity -> SetFilterActivity -> ShowDataActivity（这里我需要数据））

我在这里读书；[Android SplashScreen](https://stackoverflow.com/questions/1979524/android-splashscreen)
Here：[如何制作启动画面（应用启动时屏幕可见）？](https://stackoverflow.com/questions/2222890/how-to-make-a-splash-screen-screen-visible-when-app-starts)
这里：[http](http://www.androidpeople.com/android-loading-welcome-splash-spash-screen-example)
: //www.androidpeople.com/android-loading-welcome-splash-spash-screen-example 这里：[http ://www.41post.com/4588/programming/android-coding-a-loading- screen-part-1](http://www.41post.com/4588/programming/android-coding-a-loading-screen-part-1)
和其他...... :-)

我还尝试编写一个扩展应用程序的独立类并在其中“存储”数据（getter 和 setter），但不知何故它不像我想要的那样工作。

任何人都可以指导我如何以正确的方式做到这一点的正确方向..

谢谢您的帮助

PS：我可以在需要时轻松地在每个屏幕上加载数据，但我想一次加载它，然后在程序中随时随地使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:13:17.913

我遇到了同样的问题，所以我没有创建一个新的活动来显示启动屏幕，而是使用了一个对话框，所以你不需要在活动之间共享数据。我曾经这样做的链接：http: [//blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/](http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:11:47.283

将您累积的数据加载为共享首选项。然后，您可以从应用程序中的任何位置以键入的键/值对的形式访问它们。

请参阅：http: [//developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)

```
// Writing prefs

SharedPreferences.Editor editor = preferences.edit();

editor.putInt(defaultInt, currentInt);
editor.putFloat(defaultFloat, currentFloat);
editor.putString(defaultString, currentString);

// Reading prefs

currentString = this.getResources().getString("my_string_value");
currentFloat = this.getResources().getFloat("my_float_value"); 
```

与扩展应用程序相比，使用 SharedPreferences 的开销要少得多——它会更快更容易维护，尤其是对于 50kb 的数据，这是一个相当微不足道的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:48:31.203

使用数据库来保存和放置您的数据。数据库根本与活动无关，因此一旦您将数据存储在那里，您可以稍后从任何地方检索它，基本上这就是数据库的用途 - 保存您的数据:) 使用共享首选项的建议并不是很好，因为它是基本上是键值存储。如果您需要进行任何排序或条件数据获取，那么您会发现自己在重新发明轮子。

# c++ - 检查幻方

> ID：16155474
> 
> 赞同：-3
> 
> 时间：2013-04-22T19:47:30.353
> 
> 标签：c++, magic-square

我有一个程序，它接收一组 16 个数字并将它们打印在 4x4 的网格中。然后我必须检查每一行、每一列和对角线加起来的数字是否相同，但是我不能做这部分，因为我不知道它是如何工作的。任何人都可以帮忙吗？

当前代码：

```
void getNumbers(int numbers[]){
int idx;
for(int x = 0; x < 17; x++){
    cout << "Please enter a number: " << endl;
    cin >> idx;
    numbers[x] = idx;
}
cout << " " << numbers[0] << " " << numbers[1] << " " << numbers[2] << " " << numbers[3] << endl;
cout << " " << numbers[4] << " " << numbers[5] << " " << numbers[6] << " " << numbers[7] << endl;
cout << " " << numbers[8] << " " << numbers[9] << " " << numbers[10] << " " << numbers[11] << endl;
cout << " " << numbers[12] << " " << numbers[13] << " " << numbers[14] << " " <<  numbers[15] << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:41:15.520

如果您看到，请删除任何语法错误，整体代码必须有效！享受 ;-）

```
bool magicSquare(){
    int idx;
    int numbers[4][4];
    cout << "Please enter your numbers: " << endl;
    for(unsigned int i=0; i<4; i++) {
        for(unsigned int j=0; j<4; j++) {
            cin >> idx;
            numbers[i][j] = idx;
        }
    }
    // Checking 
    for(unsigned int i=0; i<4; i++) {
        int row_sum = 0;
        for(unsigned int j=0; j<4; j++) {
            row_sum+= numbers[i][j];
        }
        int col_sum = 0;
        for(unsigned int j=0; j<4; j++) {
            col_sum+= numbers[j][i];
        }
        int diag_sum_left = numbers[0][0] +  numbers[1][1] +  numbers[2][2];
        int diag_sum_right = numbers[0][2] +  numbers[1][1] +  numbers[2][0];
        if ((col_sum != 15) || 
            (row_sum !=15) ||
            (diag_sum_left != 15) ||
            (diag_sum_right != 15) )
            return false;
    }       
    cout << "Your answer is correct:" << endl;
    for(unsigned int i=0; i<4; i++) {
        for(unsigned int j=0; j<4; j++) 
            cout << numbers[i][j] << "\t";
        cout << endl;
    }       
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:04:28.143

撇开`how to check`，您在发布的代码中有问题：您提到您有 16 个数字，但实际上您要求的是 17。如果您的`numbers`数组大小 = 16，那么您将遇到`index out of bound`错误。

```
for(int x = 0; x < 17; x++){
            //^^^should be 16, put them into numbers array with numbers[0] to numbers[15]
    cout << "Please enter a number: " << endl;
    cin >> idx;
    numbers[x] = idx;
} 
```

对于检查，蛮力方法是分别检查行、列然后对角线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:55:25.410

你可以直接写下所有的总和和规则

像这样：

```
int horizontal1 = numbers[0]+ numbers[1]+ numbers[2]+ numbers[3];
int horizontal2 = numbers[4]+ numbers[5]+ numbers[6]+ numbers[7];
int horizontal3 = numbers[8]+ numbers[9]+ numbers[10]+numbers[11];
int horizontal4 = numbers[12]+numbers[13]+numbers[14]+numbers[15];

int vertical1 = numbers[0]+numbers[4]+numbers[8]+ numbers[12];
int vertical2 = numbers[1]+numbers[5]+numbers[9]+ numbers[13];
int vertical3 = numbers[2]+numbers[6]+numbers[10]+numbers[14];
int vertical4 = numbers[3]+numbers[7]+numbers[11]+numbers[15];

int diagonal1 = numbers[0]+numbers[5]+numbers[10]+numbers[15];
int diagonal2 = numbers[3]+numbers[6]+numbers[9]+ numbers[12];

// The result of check would be in this variable
bool result = horizontal1 == horizontal2 && 
              horizontal1 == horizontal3 &&
              horizontal1 == horizontal4 &&
              horizontal1 == vertical1 &&
              horizontal1 == vertical2 &&
              horizontal1 == vertical3 &&
              horizontal1 == vertical4 &&
              horizontal1 == diagonal1 &&
              horizontal1 == diagonal2; 
```

# asp.net-mvc - ASP.NET MVC 路由 - 无限变量树

> ID：16155475
> 
> 赞同：2
> 
> 时间：2013-04-22T19:47:32.617
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的链接看起来像这样：

```
https://myhost.com/Forums/Category/
https://myhost.com/Forums/SubCategory/
https://myhost.com/Forums/SubSubCategory/ 
```

现在这个路由配置正在捕获上面的路由：

```
context.MapRoute(
    "Forums_category",
    "Forums/{category}",
    new { controller = "Forums", action = "ThreadList" }
); 
```

这就是我想使用的：

```
https://myhost.com/Forums/Category/SubCategory/SubSubCategory 
```

我希望它被捕获为：

```
context.MapRoute(
    "Forums_category",
    "Forums/{THIS_IS_IGNORED}/{category}",
    new { controller = "Forums", action = "ThreadList" }
); 
```

所以，基本上我希望它只捕获链接中的最后一个变量。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:50:49.483

使用通配符（又名“catch all”）参数（以`*`字符为前缀）：

```
context.MapRoute(
    "Forums_category",
    "Forums/{*category}",
    new { controller = "Forums", action = "ThreadList" }
); 
```

这将导致所有剩余的路径段（包括斜杠）存储在`category`.

如果您只对最后一段感兴趣，您可以搜索最后一个斜线字符，如果找到，则删除前面的部分。您可能不想考虑尾随斜杠，所以先修剪它们。

像这样的东西会起作用：

```
category = category.TrimEnd('/');

int lastSlash = category.LastIndexOf('/');
if (lastSlash >= 0)
{
    category = category.Substring(lastSlash + 1);
} 
```

# python - 带有外部库的 Python 脚本 cronjob

> ID：16155477
> 
> 赞同：0
> 
> 时间：2013-04-22T19:47:38.970
> 
> 标签：python, cron, beautifulsoup

我想在托管的 Web 服务器上运行带有外部库 ( [beautifulsoup ) 的 Python 脚本。](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

我需要什么类型的网络服务器？我听说了一些关于 CGI 的事情？我如何在我的脚本和服务器上实现和安装外部库？Cronjob 仅适用于 PHP，不是吗？Python有一个“cronjob”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:59:07.627

[cron](http://en.wikipedia.org/wiki/Cron)是类 unix 系统的操作系统调度程序。它允许您以设定的时间间隔运行任何命令。

您需要网络服务器，还是只想定期执行您的脚本？如果您只想定期执行脚本，则不需要网络服务器，cron 就足够了。

我相信您所需要的只是 ssh 访问和对服务器的 sudo 访问。（Amazon ec2 提供一年的免费微型实例）

之后，您可以安装[pip、virtualenv](http://dabapps.com/blog/introduction-to-pip-and-virtualenv-python/)和美丽的汤。然后你可以注册你的命令（它只是执行你的脚本），`cron`你就准备好了

# python - python 交互式控制台在套接字上没有换行符

> ID：16155480
> 
> 赞同：1
> 
> 时间：2013-04-22T19:47:53.077
> 
> 标签：python, sockets

在嵌入 python 解释器的 C 程序中，我通过 TCP 套接字生成了一个 python 交互式控制台。

```
import socket
import code
import sys

s = socket.socket()
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind(('0.0.0.0', 2000))
s.listen(1)
c = s.accept()[0] # client socket

def sread(s, len):
        return s.recv(len)
def swrite(s, str):
        return s.sendall(str)
def sreadline(s):
        return sread(s, 256) # lazy implementation for quick testing
socket.socket.read = sread
socket.socket.write = swrite
socket.socket.readline = sreadline
sys.stdin = c
sys.stdout = c
sys.stderr = c
code.interact() # runs the interactive console 
```

这基本上有效。但是，交互式控制台在返回某些用户输入语句的结果时永远不会发出任何行尾字符。换句话说，我们得到这样的东西：

```
nc localhost 2000
Python 2.7.3 (default, Sep 26 2012, 21:53:55) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> 1+1
2>>> 
```

在解释器响应用户输入“1+1”而发送结果“2”之后，在下一个提示“>>>”之前，我们看不到 CR-LF。通过检查套接字用户端的十六进制输出或检查即将写入套接字的字符串来确认是否缺少任何行尾字符（CR 和/或 LF） swrite( ）。

现在为什么交互式控制台没有发出行尾字符？

可以修复吗？如何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:03:03.857

关于“为什么”的问题仍然悬而未决，但至于如何解决它，这里有解决方案。不要向 socket.socket 类添加 read/write/readline 方法，而是对 socket.socket 类进行包装：

```
import socket
import code
import sys

s = socket.socket()
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind(('0.0.0.0', 2000))
s.listen(1)
c = s.accept()[0] # client socket

class sw: # socket wrapper
    def __init__(self, s):
        self.s = s
    def read(self, len):
            return self.s.recv(len)
    def write(self, str):
            return self.s.send(str)
    def readline(self):
            return self.read(256) # lazy implementation for quick testing
c = sw(c)
sys.stdin = c
sys.stdout = c
sys.stderr = c
code.interact() # runs the interactive console 
```

现在这可以按预期工作，但原因不明。

```
nc localhost 2000
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> 1+1
2
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:15:22.760

这与[`softspace`](http://docs.python.org/2/library/stdtypes.html#file.softspace)决定 Python 何时应该发送换行符的文件属性有关，并且需要可写才能使 Python 正常运行。

因为您设置`sys.stdout`为“只读”套接字对象，所以无法设置该属性，因此您会遇到文本输出问题。

`__getattr__`您可以通过以与其他方法相同的方式定义 a and方法来修复它`__setattr__`，但这是一个完整的 hack，因此您最好使用“包装器”解决方案。

# xml - 将 XML 标记表示为字符范围

> ID：16155481
> 
> 赞同：1
> 
> 时间：2013-04-22T19:47:58.247
> 
> 标签：xml, xml-parsing

您是否知道任何基于原始未标记文本将 XML 标记与字符范围或偏移信息进行转换的 XML 库？（我不太关心库的基础平台：它可能是 Java、Python、Perl 等）

例如，假设我有这个未标记的文本：

```
the calico cat and the black dog 
```

标记为

```
the <PET>calico</PET> cat and the <PET>black do</PET>g 
```

标记有位置错误（如上所示）。我知道如何解决这些错误：这不是这里的问题。但是使用传统的层次结构的 XML 解析器来做这件事是相当痛苦的。如果将 XML 标记转换为我可以轻松调整的带外字符范围会更容易：

```
PET: 4-10    # "calico"  (should be 4-14 "calico cat" )
PET: 23-31   # "black do" (should be 23-32 "black dog" ) 
```

修复偏移后，我将重新生成 XML。

我只找到了一些返回字符偏移信息的 XML 解析库，并且偏移基于 XML 文本，而不是未标记的文本。偏移量也可能是错误的（参见[Java，XMLEvent location Characters](https://stackoverflow.com/questions/15007961/java-xmlevent-location-characters/)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:50:48.450

下面是如何使用 .NET 中的 XmlReader 来完成此操作：

```
class MarkupSpan
{
    internal string Name;
    internal int Start;
    internal int Stop;
    internal List<object> ChildItems;

    internal MarkupSpan(string name, int start)
    {
        Name = name;
        Start = start;
        ChildItems = new List<object>();
    }

    public override string ToString()
    {
        return string.Concat(ChildItems);
    }
}

private static string ProcessMarkup(string text)
{
    Stack<MarkupSpan> inputStack = new Stack<MarkupSpan>();

    StringReader sr = new StringReader("<n>" + text + "</n>");

    XmlReader xr = XmlReader.Create(sr);
    int pos = 0;
    StringBuilder output = new StringBuilder();

    while (xr.Read())
    {
        if (xr.Depth > 0)
        {
            switch (xr.NodeType)
            {
                case XmlNodeType.Text:
                    pos += xr.Value.Length;
                    if (inputStack.Count != 0)
                    {
                        inputStack.Peek().ChildItems.Add(xr.Value);
                    }
                    break;
                case XmlNodeType.Element:
                    MarkupSpan ms = new MarkupSpan(xr.LocalName, pos);
                    if (inputStack.Count != 0)
                    {
                        inputStack.Peek().ChildItems.Add(ms);
                    }
                    inputStack.Push(ms);
                    break;
                case XmlNodeType.EndElement:
                    ms = inputStack.Pop();
                    ms.Stop = pos;
                    if (inputStack.Count == 0)
                    {
                        output.Append(OutputSpan(ms));
                    }
                    break;
            }
        }
    }

    return output.ToString();
}

private static string OutputSpan(MarkupSpan ms)
{
    string nameAndRange = string.Format("{0}: {1}-{2}",
                                        ms.Name, ms.Start, ms.Stop);
    return string.Format("{0,-14}# \"{1}\"", nameAndRange, ms) +
           Environment.NewLine +
           string.Concat(ms.ChildItems.OfType<MarkupSpan>().Select(OutputSpan));
} 
```

在您的示例输入上运行时，结果是：

```
PET: 4-10     # "calico"
PET: 23-31    # "black do" 
```

当在一个更有趣的例子上运行时（带有嵌套标签）：

```
the <PET><COLOR>calico</COLOR></PET> cat and the <PET><COLOR>bla</COLOR>ck do</PET>g 
```

结果是：

```
PET: 4-10     # "calico"
COLOR: 4-10   # "calico"
PET: 23-31    # "black do"
COLOR: 23-26  # "bla" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:11:45.223

我已经提供了一个 .NET 答案，但这里是如何使用 XSLT 完成的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" />
  <xsl:variable name="space" select="'                  '" />
  <xsl:variable name="spaceLen" select="string-length($space)" />

  <xsl:template match="text()" />

  <xsl:template match="*/*">
    <xsl:param name="parentLeading" select="0" />
    <xsl:variable name="leadingText">
      <xsl:apply-templates select="preceding-sibling::node()" mode="value" />
    </xsl:variable>

    <xsl:variable name="leading" select="$parentLeading + 
                                             string-length($leadingText)" />

    <xsl:variable name="nameAndRange" 
                  select="concat(local-name(), ' ', $leading, 
                                 '-', $leading + string-length())" />
    <xsl:variable name="spacing"
                  select="substring($space, 1, 14 - string-length($nameAndRange))" />
    <xsl:value-of select="concat($nameAndRange, $spacing, 
                                 '# &quot;', ., '&quot;&#xA;')"/>
    <xsl:apply-templates>
      <xsl:with-param name="parentLeading" select="$leading" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="node()" mode="value">
    <xsl:value-of select="." />
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<n>the <PET>calico</PET> cat and the <PET>black do</PET>g</n> 
```

结果是：

```
PET 4-10      # "calico"
PET 23-31     # "black do" 
```

在此输入上运行时：

```
<n>the <PET><COLOR>calico</COLOR></PET> cat and the <PET><COLOR>bla</COLOR>ck do</PET>g</n> 
```

结果是：

```
PET 4-10      # "calico"
COLOR 4-10    # "calico"
PET 23-31     # "black do"
COLOR 23-26   # "bla" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:56:16.600

你反对.NET吗？

您可能想从 HTML 的角度来解决这个问题。有一个名为[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)的库可以解析 HTML（无论如何它只是 XML）。在这样做时，您的示例看起来像一个节点列表，在文本节点和 HTML (XML)`PET`节点之间分解：

```
HtmlNode[n]
|
+--[0] "the " (text node)
|
+--[1] <PET>
|   |
|   +--[0] "calico" (text node)
|
+--[2] " cat and the " (text node)
|
+--[3] <PET>
|   |
|   +--[0] "black do" (text node)
|
+--[4] "g" (text node) 
```

每个`HtmlNode`对象都有一个`LinePosition`属性，可以为您提供起始偏移量。可以通过添加节点文本（`InnerText`属性）的长度或从下一个节点的 中减去 1来计算结束偏移量`LinePosition`。

我不知道您是否认为这种方法不那么痛苦，但这是*我*要开始的地方（以前从未解决过这样的问题）。

[**这里**](https://stackoverflow.com/questions/2861/options-for-html-scraping)有各种语言的 HTML 解析库列表。

# ruby-on-rails - Rails 路线架构

> ID：16155486
> 
> 赞同：0
> 
> 时间：2013-04-22T19:48:22.263
> 
> 标签：ruby-on-rails, activerecord, routes

我试图了解构建一个相当简单的关系的最佳方式。我在 JobCategories 模型中有一个 Job 模型和一个 Category 模型，它们之间具有 has_many 关系。

我想要一个列出特定类别的所有工作的页面。提取此数据的逻辑应该在类别控制器上（在显示操作上），还是应该在作业控制器上创建一个类别方法？我的直觉告诉我它应该在 Category 方面，因为 Category 有 Job，但是 Job 具有为给定类别提取所有 Job 的逻辑感觉不正确。

话虽如此，如果我希望 URL 是更具体的工作，例如：

```
domain/jobs/:id/{category-name} (for SEO purposes) 
```

我将如何构建路线，使其看起来像上面那样，而不是

```
domain/categories/:id 
```

这就是你会得到的`resources :categories, only: [:show]`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:10:12.497

对于一个漂亮的蛞蝓，我建议在您的类别模型上使用[FriendlyId 。](https://github.com/norman/friendly_id)

至于路线，您将无法使用`resources :categories`

一种方法是

```
resources :jobs, only: [] do
  member do
    get '/:slug' => 'categories#some_action'
  end
end 
```

slug 将在您的参数中传递。

这将产生这样的路线

```
GET    /jobs/:id/:slug(.:format)    categories#some_action 
```

**更新**

这`:slug`只是漂亮 url 的一个例子。

在您的情况下，您希望拥有`:category_name`. 这将通过`params[:category_name]`.

当我重新阅读您的问题时，我确实开始思考的一件事是您想要显示特定类别的工作列表。像这样的 url 路径`/jobs/:id/{category-name}`实际上不应该显示作业列表，因为您指定的`id`是一个特定的作业。我认为您要获取的网址更符合`/jobs/{category-name}`. 我对么？

**更新 2**

我建议您阅读此[Ruby On Rails 路由](http://guides.rubyonrails.org/routing.html#nested-names)

**更新 3**

既然您确实想要一个更像`/jobs/{category-name}`

你的路线应该是这样的

```
resources :jobs, only: [] do
  collection do
    get '/:category_name' => 'categories#some_action'
  end
end 
```

祝你的项目好运！:D

# c++ - 调度算法实现 C++

> ID：16155487
> 
> 赞同：0
> 
> 时间：2013-04-22T19:48:24.673
> 
> 标签：c++

我正在尝试编写 CLOOK 调度算法，但我对如何前进有点迷茫。这是我所拥有的

```
 queue<int> workQ;
int headPosition;
int temp;
int cyl;
cout << "Enter the number of cylinders: ";
cin >> cyl;
cout << "Please enter the head Position: " ;
cin >> headPosition;
cout << "Enter the request: "; 
    while(true)
    {
        cin >> temp;

        //Enter a '0' to signal the end of inputing request
        if(temp == 0)
        {
            break;
        }
        //Will implement check later to make sure the request is not greater than the number of cylinder        
        workQ.push(temp);
    }

    //Print content of Queue AND put into a vector
    queue<int> tempQ;
    vector<int>request;

        tempQ = workQ;
    while(!tempQ.empty())
    {
        cout << tempQ.front() << " ";
        //Put in vector for easier use
        request.push_back(tempQ.front());

        tempQ.pop();
    }

    cout << endl;
    queue<int> clook; // used to hold the order of the request after scheduling is complete

    //starting the CLOOK algorithm with the head set at 50 by user
    //for(int i = 0 ; i < request.size() ; i++)
    //{}

    int max;
    int min;
            //I didnt include the insertion Sort code but it works fine
    insertionSort(request, max, min);
    cout << max << endl;
    cout << min << endl;

    while(!request.empty())

        for(int i = 0 ; i < request.size(); i++)
        {
          // I am lost on how to go forward here!! 
```

磁头位置为50，柱面数为200。工作请求如下[95,180,34,119,11,123,62,64]，排序后得到[11,34,62,64,95,119,123,180]。我基本上想从 50 开始磁头，这意味着 CLOOK 调度应该服务于 34,11 并跳转到 180，然后是 123,119,95,64,62（同时跟踪磁头位置）

```
 }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:01:31.213

网上有十几种实现，只要用谷歌搜索它们。例如[http://ashbeecode.blogspot.ru/2011/05/c-look-disk-scheduling-algorithm.html](http://ashbeecode.blogspot.ru/2011/05/c-look-disk-scheduling-algorithm.html)

# android - Android：减少垃圾收集所花费的时间

> ID：16155490
> 
> 赞同：0
> 
> 时间：2013-04-22T19:48:30.643
> 
> 标签：android, concurrency, garbage-collection

我的 openGL 音频可视化器落后于音乐时遇到问题。我最近改用多线程方法。在三星 S3 上一切正常，但在 HTC Evo 上，音频可视化器落后于音乐。

从音频输入到可视化的管道中有四个线程，AudioIn -> AudioProc -> UI -> openGL。我认为问题可能出在 openGL 上，但我在将新消息添加到 requestRender() 方法之前开始清除消息队列。没有帮助。

我认为问题出在 AudioIn 到 AudioProc 之间，即 AudioProc 花费的时间太长并且正在建立 que。我不断获得 GC_CONCURRENT ~43ms 的 Logcats。在 60Hz 下大约是 2 或 3 帧。DDMS 中的分配跟踪器建议在 AudioProc 线程上进行许多分配。所以我删除了分配并用我的 DSP 类中的私有 float[] 对象替换它们。

但是随后分配开始显示对“java 反射数组”的一些调用，并且 GC_CONCURRENT 调用变得更长了。我认为这可能是因为我在 UI 线程中声明了 DSP 类 ref 对象，并且在我的 AudioProc 线程中使用它，所以我更改了代码以在我的 AudioProc 线程中调用分配 mDSP，但现在 logcat 显示“JIT unchain all”对 AudioProc 线程的调用和 700+ms 的 GC_CONCURRENT 时间。

显然我错过了一些基本的东西，请推测。我可以发布代码。

# python - Python Parse 输入文件的行

> ID：16155494
> 
> 赞同：3
> 
> 时间：2013-04-22T19:48:46.707
> 
> 标签：python, parsing, python-2.7

我是一名刚毕业的人，他已经建立了一些联系并试图帮助一个项目。该项目将有助于发展成为对人们开放源代码的东西。因此，我能得到的任何帮助将不胜感激。

我试图解析文件中的某些项目我已成功解析出特定项目。例如，我现在需要弄清楚如何以有组织的方式将所有剩余数据附加到另一个变量。

```
file=open("file.txt",'r') 

row = file.readlines()

for line in row:
    if line.find("Example") > -1:
        info = line.split()
        var1 = info[0]
        var2 = info[1]
        var3 = info[2]
        remaining_data = ???? 
```

^^^^^^^^^^是我的示例代码已经完成了我需要的 90%。我想将剩余数据全部逐行放入该变量中。

```
print remaining_data

output:remaining_data{
    line 1 of data
    line 2 of data
    line 3 of data
    line 4 of data
} 
```

我怎样才能将它组织起来并像那样一行一行地进入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T20:18:38.707

```
remaining_data = []
for line in open("file.txt",'r'):
    if line.find("Example") > -1:
        info = line.split()
        var1 = info[0]
        var2 = info[1]
        var3 = info[2]
        remaining_data.append(' '.join(info[3:])) 
```

在循环结束时，剩余数据将包含没有前 3 个元素的所有行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:56:14.623

通过使用切片

```
remaining_data=info[3:] 
```

如果你需要你可以做的索引

```
for i, line in enumerate(info[3:]):
    print("{}: {}".format(i, line)) 
```

# android - AndroidDriver“NoClassDefFound”错误发生在运行时但不是在编译时

> ID：16155501
> 
> 赞同：1
> 
> 时间：2013-04-22T19:49:07.517
> 
> 标签：android, selenium, webdriver, selenium-webdriver

每当我运行测试时，我都会收到以下错误“NoClassDefFound”AndroidDriver。

编译期间没有错误，但仅在运行时发生。（我在构建路径中包含了 jar 文件 selenium-server-standalone.jar）

如果我在外部包含 jar 文件，则结果为“NoClassDefFound”；如果我将 jar 包含在 libs 文件夹中，则整个测试在执行期间卡住（尝试超过 4 个）。

请帮我解决这个问题！！！！

# php - 如何在不使用 J 安装管理器的情况下通过复制文件来安装 Joomla 2.5 组件

> ID：16155503
> 
> 赞同：4
> 
> 时间：2013-04-22T19:49:17.660
> 
> 标签：php, joomla2.5, jcomponent

在 Joomla 2.5 上安装自定义组件时，一切正常。如果我只是将组件的内容复制并粘贴到相应的文件夹中`/components/com_mycomponent`而不安装它，则目录结构将变得相同，但在请求时找不到组件。

我假设组件需要安装才能工作。我的问题是如何在不实际安装组件的情况下模拟此安装。那么如何告诉 Joomla 在 components 目录中复制了一个组件。

我需要它能够创建测试组件并开发它们，而无需在平台上实际安装它们，直到它们准备好。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:56:26.653

从 的下拉菜单中选择`Extensions`→ 。然后在出现的屏幕中选择菜单项。`Extension Manager``Joomla! Administrator Panel``Discover``Extension manager`

正如 Joomla 文档手册中所说：`Discover`搜索 Joomla！已卸载扩展的安装目录。找到的任何未安装的扩展都将显示在扩展列表中。缓存搜索结果，以便在后续访问此屏幕时继续显示它们。”

这是实际[手册页](http://docs.joomla.org/Help16:Extensions_Extension_Manager_Discover#Toolbar)的链接。

希望这可以帮助。

斯托扬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:05:35.780

我已经为我的项目尝试过这个
首先，登录到您的管理面板
转到扩展选项卡，然后单击扩展管理器您将找到发现选项卡和您在列表中复制的组件。只需单击顶部的安装按钮，它就会像您安装任何组件一样工作。

# customization - OGRE - 创建粒子系统

> ID：16155506
> 
> 赞同：0
> 
> 时间：2013-04-22T19:49:28.893
> 
> 标签：customization, textures, ogre, particle-system

如果这是一个愚蠢的问题，我很抱歉，但我似乎无法找到答案。

我正在 Ogre 中开展一个项目，我需要的是创建一个粒子系统，但不是使用 OgreOde 提供的示例，而是我自己的一个。不同之处在于我想创建一个仅包含一个粒子的 Praticle System，并使用笔记本电脑上已有的图像为该粒子应用纹理。

有没有教程/示例/有人可以帮助我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:20:32.543

**一般来说**

Ogre 手册中的“粒子脚本”部分是一个很好的起点：[http ://www.ogre3d.org/docs/manual/manual_34.html#Particle-Scripts](http://www.ogre3d.org/docs/manual/manual_34.html#Particle-Scripts)

另一个灵感来源是我们 wiki 中的粒子部分：[http ://www.ogre3d.org/tikiwiki/Particles](http://www.ogre3d.org/tikiwiki/Particles)

**关于你的具体问题**

你只需要一个非常基本的粒子脚本：

1.  配额设置为“1”，因为您只需要一个粒子
2.  一个简单的材质脚本，引用您的图像/纹理
3.  将产生粒子的发射器，具有一些关于该粒子应该存在多长时间以及应该产生新粒子的延迟的设置

***但是：***我无法真正想象单个粒子的用例，因为您将得到的只是一个广告牌，那么为什么不首先使用广告牌呢？

# javascript - Ajax 函数内容类型

> ID：16155513
> 
> 赞同：1
> 
> 时间：2013-04-22T19:50:18.803
> 
> 标签：javascript, ajax

我不太了解ajax，但有以下功能：

```
function saveViaAJAX() {  
    var canvasData = $("#wPaint").wPaint("image");
    var postData = "canvasData="+canvasData;

    var ajax = new XMLHttpRequest();
    ajax.open("POST",'testSave.php',true);    
    ajax.setRequestHeader('Content-Type', 'canvas/upload');

    ajax.onreadystatechange=function() {
        if (ajax.readyState == 4) { 
            document.getElementById("debugFilenameConsole").innerHTML="Saved as<br><a target='_blank' href='"+ajax.responseText+"'>"+ajax.responseText+" </a><br>Reload this page to generate new image or click the filename to open the image file in a new window.";
        }
     }

    ajax.send(postData);  
} 
```

这工作正常，但我有另一个变量我想传递给 testSave.php

```
<select id="website_string" name="website_string"> 
    <option value="" selected="selected"></option>
    <option value="A4">A4</option>
    <option value="A5">A5</option>
</select> 
```

我试图在同一个函数中传递它，但我认为它是 ("Content-type", "application/x-www-form-urlencoded")。

# dependency-injection - 我可以覆盖匕首中的绑定吗？

> ID：16155515
> 
> 赞同：3
> 
> 时间：2013-04-22T19:50:29.240
> 
> 标签：dependency-injection, dagger

如果我有一个类的默认 impl，并且它确实定义了 @Inject 构造函数，那就太好了。系统将其拾取。

如果一个应用程序想用子类覆盖该默认 impl，我可以在其模块中定义一个 @Provides 并在我自己的代码中对该子类调用“new”，而 dagger 则使用该 impl（据我目前所知，这有效）。

但是，如果我想让 dagger 实例化该子类，是否可以在 @Module 中不声明“override=true”的情况下做到这一点？我喜欢没有 override=true 以便构建时的所有重复检查都会给我适当的警告。

当然，一种方法是强制所有应用程序直接声明@Provides。这只会增加臃肿。

我之前使用过 GIN（GWT 的 Guice），您可以通过 .class 引用定义与所需类的绑定，但我在 dagger 中看不到任何类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T19:07:18.840

现在，没有办法拥有一个可以自由覆盖的“默认绑定”，而无需使用“overrides”属性（该属性更多地用于测试。）我们正在考虑如何进行默认绑定。

您可能会考虑使用 set 绑定来执行此操作，方法如下：

```
@Module(...)
class MyModule {
  @Qualifier @interface OverridableFoo { }

  @Provides(type=SET_VALUES) @OverridableFoo Set<Foo> provideOverriddenFoo() {
    return new HashSet<Foo>(); // Empty set to ensure the Set is initialized.
  }

  @Provides Foo provideFoo(@OverridableFoo Set<Foo> Foo overriddenFoo) {
    switch (overriddenFoo.size()) {
      case 0: return new DefaultFooImpl();
      case 1: return overriddenFoo.iterator().next();
      default: throw new IllegalStateException("More than one overridden Foo Provided.");
    }
  }
} 
```

然后，当您想要覆盖时，您只需包含以下内容：

```
@Module(...)
class MyModule {
  @Provides(type=SET_VALUE) @OverridableFoo Foo provideBetterFoo() {
    return new MyAwesomeFoo();
  }
} 
```

这不是一个好方法，因为它将应该是编译时错误转移到运行时，但作为我们尝试决定如何处理默认绑定时的权宜之计，我认为它是可行的。

# c# - 使用 XElement 保存 XML 文件时，文件中的对齐方式也会发生变化，如何避免？

> ID：16155516
> 
> 赞同：3
> 
> 时间：2013-04-22T19:50:31.037
> 
> 标签：c#, xml, whitespace, xelement

我在用

```
XElement root = XElement.Load(filepath); 
```

加载 XML 文件，然后找到我需要的东西。

```
IEnumerable<XElement> commands = from command in MyCommands
                                 where (string) command.Attribute("Number") == Number
                                 select command;

foreach (XElement command in commands)
{
     command.SetAttributeValue("Group", GroupFound);
} 
```

完成更改后，我使用以下代码保存文件。

```
root.Save(filepath); 
```

保存文件时，我的 XML 文件中的所有行都会受到影响。Visual Studio 默认对齐所有行，但我需要保存原始文件格式。

我不能更改文档的任何部分，除了 Group 属性值。

```
command.SetAttributeValue("Group") attributes. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T20:01:17.697

你需要做：

```
XElement root = XElement.Load(filepath, LoadOptions.PreserveWhitespace); 
```

然后做：

```
root.Save(filepath, SaveOptions.DisableFormatting); 
```

[这将通过使用LoadOptions](http://msdn.microsoft.com/en-us/library/system.xml.linq.loadoptions.aspx)和[SaveOptions](http://msdn.microsoft.com/en-us/library/system.xml.linq.saveoptions.aspx)保留您的原始空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:55:01.357

您要保留的信息在 XDocument 中开始丢失。

XDocument 不在乎您的元素前面是否有制表符或空格，以及属性之间是否有多个空格等。如果您想依赖 Save() 方法，则必须放弃可以保留的想法格式化。

要保留格式，您需要添加自定义处理并确定要在何处进行更改。或者，如果您的 XML 来自机器而不是人工编辑，您可以调整保存选项以匹配您拥有的格式

# javascript - 使用 onchange 调用多个函数

> ID：16155517
> 
> 赞同：0
> 
> 时间：2013-04-22T19:50:33.153
> 
> 标签：javascript, html, function, input, onchange

所有这一切都超出了我的经验，但我已经到处寻找，并且今天到目前为止研究了这些东西 6 个小时，我只是遇到了砖墙。

我有一张表，用户在其中输入两个变量，然后从这两个变量中吐出 12 个不同的数字。这些数字作为纯文本字符串吐出到只读文本字段中的问题，我需要将它们显示为（美国）货币。表中的所有输入字段都使用 onchange 来运行第一个进行计算的函数，但是我在网上找到的第二个和第三个函数无法运行。

HTML：

```
 <form name="form" >

<table width="550" border="0">
<tr>
<td width="265" height="30"><div align="right">Number of Business Customers</div></td>
</tr>
<TR>
<td width="265" height="30"><div align="right">Number of Business Clients:</div></td>
<td width="142" div align="center"><input style="font-size:12px;text-align:center;" name="sum1" onChange="updatesum();CurrencyFormatted();CommaFormatted90;" /></td>
<td width="129" div align="center">&nbsp;</td>
</tr>
<TR>
<td height="30"><div align="right">Average Number of Employees:</td>
<TD div align="center"><input style="font-size:12px;text-align:center;" name="sum2" onChange="updatesum();CurrencyFormatted();CommaFormatted();" /></TD>
<TD div align="center">&nbsp;</TD>
<TR>
<td height="30"><div align="right">Anticipated Employee Tax Reduction:</div></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none;" name="sum16"  readonly "></TD>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum26" readonly><BR /></TD>
</TR>
<TR>
<td height="30"><div align="right">Potential Payroll Tax Reduction (annually):</div></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum17" readonly ></TD>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum27" readonly ></TD>
</TR>
<TR>
<td height="30"><div align="right">Potential Payroll Tax Reduction (monthly):</td>
<TD div align="center"><input type="text" style="font-size:12px;text-align:center;border:none" name="sum18" readonly ></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum28" readonly ></td>
</TR>
<TR>
<td height="30"><div align="right">Pearl Logic Billing (50% of savings, for 12 months):</td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum19" readonly ></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum29" readonly ></td>
</TR>
<TR>
<td height="30"><div align="right">Sales Agent Monthly Comp (8%):</td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum14" readonly ></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum24" readonly ></td>
</TR>
<TR>
<td height="30"><div align="right">Sales Agent Total Comp (8%):</td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum15" readonly ></td>
<TD div align="center"><input style="font-size:12px;text-align:center;border:none" name="sum25" readonly ></td>
</TR>
</table>
</form> 
```

Javascript：

```
function updatesum() {

document.form.sum14.value = ((((((document.form.sum1.value -0)*(document.form.sum2.value -0)*300))/12)/2)*.08);
document.form.sum24.value = ((((((document.form.sum1.value -0)*(document.form.sum2.value -0)*400))/12)/2)*.08);
document.form.sum15.value = (((((((document.form.sum1.value -0)*(document.form.sum2.value -0)*300))/12)/2)*.08)*12);
document.form.sum25.value = (((((((document.form.sum1.value -0)*(document.form.sum2.value -0)*400))/12)/2)*.08)*12);
document.form.sum16.value = 300;
document.form.sum26.value = 400;
document.form.sum17.value = ((document.form.sum1.value -0)*(document.form.sum2.value -0)*300);
document.form.sum27.value = ((document.form.sum1.value -0)*(document.form.sum2.value -0)*400);
document.form.sum18.value = (((document.form.sum1.value -0)*(document.form.sum2.value -0)*300)/12);
document.form.sum28.value = (((document.form.sum1.value -0)*(document.form.sum2.value -0)*400)/12);
document.form.sum19.value = ((((document.form.sum1.value -0)*(document.form.sum2.value -0)*300)/12)/2);
document.form.sum29.value = ((((document.form.sum1.value -0)*(document.form.sum2.value -0)*400)/12)/2);
}

//--></script>

<script type="text/javascript"><!--
function CurrencyFormatted()
{
    var i = parseFloat(amount);
    if(isNaN(i)) { i = 0.00; }
    var minus = '';
    if(i < 0) { minus = '-'; }
    i = Math.abs(i);
    i = parseInt((i + .005) * 100);
    i = i / 100;
    s = new String(i);
    if(s.indexOf('.') < 0) { s += '.00'; }
    if(s.indexOf('.') == (s.length - 2)) { s += '0'; }
    s = minus + s;
    return s;
}
//--></script>
<script type="text/javascript"><!--
function CommaFormatted()
{
    var delimiter = ","; // replace comma if desired
    var a = amount.split('.',2)
    var d = a[1];
    var i = parseInt(a[0]);
    if(isNaN(i)) { return ''; }
    var minus = '';
    if(i < 0) { minus = '-'; }
    i = Math.abs(i);
    var n = new String(i);
    var a = [];
    while(n.length > 3)
    {
        var nn = n.substr(n.length-3);
        a.unshift(nn);
        n = n.substr(0,n.length-3);
    }
    if(n.length > 0) { a.unshift(n); }
    n = a.join(delimiter);
    if(d.length < 1) { amount = n; }
    else { amount = n + '.' + d; }
    amount = minus + amount;
    return amount;
}

//--></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:00:31.480

您的函数有一个未定义的`amount`变量。大概他们只是因错误而崩溃。

首先，您需要从`onChange`侦听器中删除这些函数调用。

其次，更改函数以获取未格式化的值并返回格式化的值

```
function CurrencyFormatted(amount) { //<-- notice the method parameter
    var i = parseFloat(amount);
    if(isNaN(i)) { i = 0.00; }
    var minus = '';
    if(i < 0) { minus = '-'; }
    i = Math.abs(i);
    i = parseInt((i + .005) * 100);
    i = i / 100;
    s = new String(i);
    if(s.indexOf('.') < 0) { s += '.00'; }
    if(s.indexOf('.') == (s.length - 2)) { s += '0'; }
    s = minus + s;
    return s;
} 
```

现在将您的每个集合调用更改`updatesum`为首先格式化值

```
var sum14 = ((((((document.form.sum1.value -0)*(document.form.sum2.value -0)*300))/12)/2)*.08);
var formattedSum14 = CommaFormatted(CurrencyFormatted(sum14));
document.form.sum14.value = sum14; 
```

# algorithm - 简单移动平均线求和/偏移问题

> ID：16155521
> 
> 赞同：0
> 
> 时间：2013-04-22T19:50:41.100
> 
> 标签：algorithm, basic, moving-average, embedded-control

我写了一个简单的移动平均值，其中温度的移动窗口读取为 0 到 10V 之间的电压。

该算法似乎可以正常工作，但是，它有一个问题，即根据首先填充窗口的温度，移动平均值对于不接近该值的任何值都有偏移。例如，用 temp 运行这个程序。插入室温的传感器产生 4.4V 或 21.3 C。不过，如果我拔下温度。传感器电压降至 1.4V，但移动平均值保持在 1.6V。当我增加窗口大小时，这个偏移量会变小。即使对于小窗口尺寸，如何消除这个偏移量，例如。20 ?

```
REM SMA Num Must be greater than 1
#DEFINE SMANUM 20
PROGRAM
'Program 3 - Simple Moving Average Test
CLEAR
DIM SA(1)
DIM SA0(SMANUM) : REM Moving Average Window as Array
DIM LV1
DIM SV2
LV0 = 0 : REM Counter
SV0 = 0 : REM Average
SV1 = 0 : REM Sum
WHILE(1)
    SA0(LV0 MOD SMANUM) = PLPROBETEMP : REM add Temperature to head of window
    SV1 = SV1 + SA0(LV0 MOD SMANUM) : REM add new value to sum
    IF(LV0 >= (SMANUM)) : REM check if we have min num of values
        SV1 = SV1 - SA0((LV0+1) MOD SMANUM) : REM remove oldest value from sum
        SV0 = SV1 / SMANUM : REM calc moving average
        PRINT "Avg: " ; SV0 , " Converted: " ; SV0 * 21.875 - 75
    ENDIF
    LV0 = LV0 + 1 : REM increment counter
WEND
ENDP 
```

（注意这是 Parker 用 ACROBASIC 为 ACR9000 编写的）

输出 - 已连接温度传感器

```
Raw: 4.43115    Avg: 4.41926     Converted: 21.6713125
Raw: 4.43115    Avg: 4.41938     Converted: 21.6739375
Raw: 4.43359    Avg: 4.41963     Converted: 21.67940625
Raw: 4.43359    Avg: 4.41987     Converted: 21.68465625
Raw: 4.43359    Avg: 4.42012     Converted: 21.690125
Raw: 4.43359    Avg: 4.42036     Converted: 21.695375
Raw: 4.43359    Avg: 4.42061     Converted: 21.70084375 
```

...在程序运行时移除温度传感器

```
Raw: 1.40625    Avg: 1.55712     Converted: -40.938
Raw: 1.40381    Avg: 1.55700     Converted: -40.940625
Raw: 1.40625    Avg: 1.55699     Converted: -40.94084375
Raw: 1.40625    Avg: 1.55699     Converted: -40.94084375
Raw: 1.40381    Avg: 1.55686     Converted: -40.9436875
Raw: 1.40381    Avg: 1.55674     Converted: -40.9463125
Raw: 1.40625    Avg: 1.55661     Converted: -40.94915625 
```

移除传感器后，原始平均值和移动平均值之间会出现明显的偏移。

偏移量也以相反的顺序发生：

输出 - 移除温度传感器后开始程序

```
Raw: 1.40381    Avg: 1.40550     Converted: -44.2546875
Raw: 1.40625    Avg: 1.40550     Converted: -44.2546875
Raw: 1.40625    Avg: 1.40549     Converted: -44.25490625
Raw: 1.40625    Avg: 1.40549     Converted: -44.25490625
Raw: 1.40625    Avg: 1.40548     Converted: -44.255125
Raw: 1.40625    Avg: 1.40548     Converted: -44.255125 
```

...在程序运行时连接温度传感器

```
Raw: 4.43848    Avg: 4.28554     Converted: 18.7461875
Raw: 4.43848    Avg: 4.28554     Converted: 18.7461875
Raw: 4.43848    Avg: 4.28554     Converted: 18.7461875
Raw: 4.43848    Avg: 4.28554     Converted: 18.7461875
Raw: 4.43848    Avg: 4.28554     Converted: 18.7461875
Raw: 4.43359    Avg: 4.28530     Converted: 18.7409375 
```

附加传感器后，原始平均值和移动平均值之间再次出现明显的偏移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:06:28.190

问题似乎是从总和中减去的值实际上并不是数组中最旧的值——事实上，最旧的值被`WHILE`循环第一行中的新值覆盖。这是从总和中减去的第二旧值。

编辑根据 OP 的建议，将 Average 和 Sum 变量更改为 64 位浮点，以解决随时间推移的精度损失。

确保首先减去最旧的值（一旦数组已满）给出预期的答案：

```
PROGRAM
'Program 3 - Simple Moving Average Test
CLEAR
DIM SA(1)
DIM SA0(SMANUM) : REM Moving Average Window as Array
DIM LV1
DIM DV2
LV0 = 0 : REM Counter
DV0 = 0 : REM Average
DV1 = 0 : REM Sum
WHILE(1)
    IF(LV0 >= (SMANUM)) : REM check if we have min num of values
        DV1 = DV1 - SA0(LV0 MOD SMANUM) : REM remove oldest value from sum
    ENDIF
    SA0(LV0 MOD SMANUM) = PLPROBETEMP : REM add Temperature to head of window
    DV1 = DV1 + SA0(LV0 MOD SMANUM) : REM add new value to sum
    IF(LV0 >= (SMANUM)) : REM check if we have min num of values
        DV0 = DV1 / SMANUM : REM calc moving average
        PRINT "Avg: " ; DV0 , " Converted: " ; DV0 * 21.875 - 75
    ENDIF
    LV0 = LV0 + 1 : REM increment counter
WEND 
```

我没有正在运行的 BASIC 环境，但我在 Python 中对此进行了测试，并得到了与您的版本等效的代码的相同错误输出，以及与我在上面插入的版本等效的代码的预期输出。

# knockout.js - 绑定的可观察数组更改后表不刷新

> ID：16155527
> 
> 赞同：1
> 
> 时间：2013-04-22T19:50:55.013
> 
> 标签：knockout.js, breeze, single-page-application, durandal, ko.observablearray

我被困住了，希望能得到一些帮助！

我的 ViewModel 上有一个 create 方法，它调用了一个轻而易举的 CreateEntity 方法来将新项目添加到 Office 类型的可观察数组中。这一切都很好，可观察数组的长度也相应增加 - 但是！

出于某种奇怪的原因，表格行没有相应地刷新-我做错了什么？？？

这是表格标记：

* * *

```
<table class="table table-striped table-bordered table-condensed" data-bind='visible: offices().length > 0'>
            <thead>
                <tr>
                    <td class="thead">Office Name</td>
                    <td class="thead">Support Tel.</td>
                    <td class="thead">Support Email</td>
                    <td class="thead">Support Fax</td>
                    <td class="thead">Ftp URL</td>
                    <td class="thead" />
                </tr>
            </thead>
            <tbody data-bind='foreach: offices'>
                <tr class="">
                    <td>
                        <input data-bind='value: officeName' />
                    </td>
                    <td>
                        <input data-bind='value: supportNo' />
                    </td>
                    <td>
                        <input data-bind='value: supportEmail' />
                    </td>
                    <td>
                        <input data-bind='value: supportFax' />
                    </td>
                    <td>
                        <input data-bind='value: supportFtp' />
                    </td>
                    <td>
                        <div class="button-bar">
                            <button class="btn btn-danger"
                                data-bind="click: deleteOffice, disable: hasChanges">
                                Delete
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table> 
```

这是我的视图模型代码

```
define(['services/officesEntityService',
        'durandal/plugins/router',
        'durandal/system',
        'durandal/app',
        'services/logger'],
    function (officesEntityService, router, system, app, logger) {

        var offices = ko.observableArray();
        var isSaving = ko.observable(false);
        var isDeleting = ko.observable(false);

        var activate = function () {
            return officesEntityService.getOffices(offices);
        };

       ...

        var addOffice = function () {
            offices.push(officesEntityService.createOffice());
        }

        ...

        var vm = {
            offices: offices,
            isSaving: isSaving,
            isDeleting:isDeleting,
            activate: activate,
            goBack: goBack,
            hasChanges: hasChanges,
            cancel: cancel,
            canSave: canSave,
            save: save,
            canAdd:canAdd,
            addOffice:addOffice,
            deleteOffice: deleteOffice,
            canDeactivate: canDeactivate,            
            title: 'Offices Administration'
        };
        return vm;
    }); 
```

最后，我的 Breeze Data Service 公开了这个在 VM 中使用的函数，用于将新办公室推送到 observable 数组中：

```
var createOffice = function () {
            return manager.createEntity('Office', { officeId: jQuery.Guid.New(), officeName: 'New Office'});
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:25:33.130

发现问题...

```
 <td>
     <div class="button-bar">
         <button class="btn btn-danger"
                 data-bind="click: deleteOffice, disable: hasChanges">Delete
         </button>
     </div>
 </td> 
```

我更改了按钮标签`<a href>`，应用了相同的样式并修复了问题！

# php - 如果在 db 表中找到某些内容，php/mysql 将对其进行更新

> ID：16155529
> 
> 赞同：0
> 
> 时间：2013-04-22T19:51:09.467
> 
> 标签：php, mysql, codeigniter

我正在尝试使以下内容正常工作。我的 else 工作正常，但我在 if 部分遇到了问题。它所做的是删除该行并将 0 插入该`hottest_cat`行。它应该从 插入值`$dd`。关于我做错了什么的任何想法？

```
public function change_category() {
        $dd = $this->input->post('dd');
        $sql = $this->db->get('default_hottest_cat');
        if ($sql->num_rows() > 0) {
            $row = $sql->row(); 
                $old = $row->hottest_cat;
                // Stuff is found in this table. Needs to be deleted first, then inserted.
                $this->db->delete('default_hottest_cat', array('hottest_cat' => $old));
                $this->db->insert('default_hottest_cat', array('hottest_cat' => $dd));
        } else {
            // Nothing is found in this table. Needs only to be inserted.
            $this->db->insert('default_hottest_cat', array('hottest_cat' => $dd));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:02:14.400

您的问题与我回答的问题非常相似。请检查此以获取更多信息 [如何检查 id 是否已存在 - codeigniter](https://stackoverflow.com/questions/16125524/how-to-check-if-id-already-exists-codeigniter/16125882?noredirect=1#comment23034152_16125882)

逻辑是

```
1.Select "the database table" with the value you had posted.(search)
2.Check the count of result_row(if found >0 , if not found =0)
3.If not found  'insert', if found 'update',( in your case delete) 
```

模型

```
<?php
    class Cars_model extends CI_Model
    {   
        function __construct()
        {
            parent:: __construct();
            $this->load->database();
        }

         function check()
         {
            $query=null; //emptying in case 

            $dd= $_POST['dd'];    //getting from post value

            $query = $this->db->get_where('default_hottest_cat', array('dd' => $dd)); ၊၊၊။။//making selection
            $count= $query->num_rows();    //counting result from query

        if ($count === 0)  // data is not present
        {  
               $data = array(
                 'dd' => $dd
            );
           $this->db->insert('default_hottest_cat', $data); 
        }
           else //data is present
          {
               $this->db->delete('default_hottest_cat', array('dd'=>$dd));
           }
         }     
    }

?> 
```

# list - 两个列表的算术 Prolog

> ID：16155537
> 
> 赞同：2
> 
> 时间：2013-04-22T19:51:39.023
> 
> 标签：list, prolog

所以我有一个硬件问题，我已经解决了几天，我被困在最后一部分。在 Prolog 中，我应该编写一个函数，它接受两个列表 ((x1, x2, ..., xn), (y1, y2, ...yn) ) 并找到两者之间的距离。输出是对列表进行的数学运算的结果。公式：sqrt((x1-y1) *(x1-y1) + (x2-y2)* (x2-y2) + … + (xn-yn)*(xn-yn)) 这是我目前所拥有的：

```
distance([],[], 0).
distance([Ha|Ta],[Hb|Tb], Sum) :-
   distance(Ta,Tb, Rest),
   Sum is sqrt( (Ha-Hb)*(Ha-Hb)) + Rest. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:20:58.873

它很近。在我的脑海中，只需将平方 ( `distance_aux`) 相加，然后返回累积和的平方根：

```
distance(L1, L2, D) :-
        distance_aux(L1, L2, SQSUM),
        D is sqrt(SQSUM).

distance_aux([],[],0).
distance_aux([Ha|Ta],[Hb|Tb], Sum) :-
   distance_aux(Ta,Tb, Rest),
   Sum is (Ha-Hb)*(Ha-Hb) + Rest. 
```

您也可以添加简化规则`distance([], [], 0).`，尽管这不是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:21:40.513

Prolog 有*列表*，而不是数组。

您的代码没有实现显示的公式，因为`sqrt`必须在产品总和*之后*计算。在下面的代码中，我还引入了一个累加器，使循环*尾递归*（更高效）。

```
distance(Xs, Ys, Dist) :-
  distance(Xs, Ys, 0, Dist).

distance([], [], Acc, Dist) :- 
    Dist is sqrt(Acc).
distance([X|Xs], [Y|Ys], Acc, Dist) :-
    Sum is (Y-X)*(Y-X) + Acc,
    distance(Xs, Ys, Sum, Dist). 
```

根据您的 Prolog 库，代码可能更简单：

```
distance(Xs, Ys, Dist) :-
    foldl(distpoint, Xs, Ys, 0, Sq),
    Dist is sqrt(Sq).
distpoint(X, Y, S, D) :- D is S+(Y-X)*(Y-X). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:21:44.640

您给出的公式对整个总和进行平方，而不是对每对夫妇进行平方 - 这就是您在代码中所做的。使用辅助解决了这个问题：

```
distance_sum([], [], 0).
distance_sum([Ha|Ta], [Hb|Tb], Sum) :-
   distance_sum(Ta, Tb, Rest),
   Sum is ((Ha-Hb) * (Ha-Hb)) + Rest.

distance(A, B, Sum) :- distance_sum(A, B, DSum), Sum is sqrt(DSum). 
```

所以一个例子是：

```
distance([1,2,3], [4,5,6], Sum).
Sum = 5.196152422706632. 
```

在职的：

```
sqrt( (1-4)*(1-4) + (2-5)*(2-5) + (3-6)*(3-6) )
sqrt( 3*3 + 3*3 + 3*3 )
sqrt( 27 )
5.19615 
```

# ruby-on-rails - 按轮胎/弹性搜索中的整个字段值分组

> ID：16155540
> 
> 赞同：0
> 
> 时间：2013-04-22T19:51:47.563
> 
> 标签：ruby-on-rails, search, full-text-search, elasticsearch

我正在使用轮胎 ruby​​gem 连接到 ElasticSearch。如何根据特定字段的值返回构面？

例如，我有一个 field `areas`，我想将前 10 个区域显示为过滤器选项：

**领域**

*   上东区 22
*   西村 15
*   苏活区 8
*   ETC...

```
def self.search(params={})
        Tire.search(page: 1 || params[:page], per_page: 10, load: true) 做
          # 设置查询
          查询做
            布尔值
              必须 { string params[:query], default_operator: "AND" } if params[:query].present？
              必须 { range :price, { gte: (params[:min_price] || 0), lte: params[:max_price] } } 如果 params[:max_price].present？
            结尾
          结尾
          # 要返回的构面
          # 这是我卡住的地方：
          方面的“区域”做
            术语 [:area_name]，大小：10
          结尾
       结尾
结尾

```

刻面块只返回：

```
{"areas"=>{"_type"=>"terms", "missing"=>5754, "total"=>0, "other"=>0, "terms"=>[]}} 
```

即使所有记录都具有区域名称的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:01:53.253

分面是从查询返回的文档中计算出来的，因此如果您没有得到任何命中，则不会计算分面。您的方面定义不正确，您应该将字段名称作为符号或字符串传递，请参阅[https://github.com/karmi/tire/blob/master/test/integration/facets_test.rb#L16](https://github.com/karmi/tire/blob/master/test/integration/facets_test.rb#L16)。

# angularjs - 在AngularJS的ng-repeat指令中动态显示模板？

> ID：16155542
> 
> 赞同：11
> 
> 时间：2013-04-22T19:51:49.107
> 
> 标签：angularjs

我正在尝试根据当前项目动态显示 ng-repeat 指令中的几个模板之一。

我的 JSON 数据如下所示：

```
data: {
    groups: [
        {
            name: "Group 1",                
            sections: [
                { name: "Section A" },
                { name: "Section B" }
            ]
        },
        {
            name: "Group 2",                
            sections: [
                { name: "Section A" },
                { name: "Section B" }
            ]
        }
    ]
} 
```

我的目标是动态呈现数据树，每个组包含多个部分。这些组都将具有相同的模板，但每个部分都应该有自己的模板，基于名称字段。

假设顶级 HTML 是：

```
<div ng-repeat="group in groups">
    {{ group.name }}
    <div ng-repeat="section in sections">
        <!-- Dynamic section template used -->
    </div>
</div> 
```

理想情况下，每个部分还需要有自己的范围数据和与之关联的控制器。我很幸运地用 Knockout 构建了这种类型的系统，但我试图理解 Angular 的做事方式。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T19:59:23.457

你可以这样做：

```
<div ng-repeat="group in groups">
    {{ group.name }}
    <div ng-repeat="section in sections" ng-include="getIncludeFile(section)">
        <!-- Dynamic section template used -->
    </div>
</div> 
```

然后在你的控制器中：

```
$scope.getIncludeFile = function(section) {
    // Make this more dynamic, but you get the idea
    switch (section) {
        case "Section A":
            return 'partials/sectiona.html';
        case "Section B":
            return 'partials/sectionb.html';
    }
} 
```

然后你的 sectiona.html 可能看起来像这样（有一个特定于该文件的控制器）：

```
<div ng-controller="SectionAController">
    <!-- HTML in here, and can bind straight to your SectionAController -->
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:51:15.187

在过去的一个月里，有一个检查到 angular 以支持指令中的动态模板，但是我无法找到关于它的使用的很多信息。这是参考。 [https://github.com/angular/angular.js/pull/1849](https://github.com/angular/angular.js/pull/1849)

尽管这仍然使用相同的 nginclude，但它都封装在两个指令中：

演示： [http ://plnkr.co/edit/4DIlHMNlHQ8Wm9XHNycH?p=preview](http://plnkr.co/edit/4DIlHMNlHQ8Wm9XHNycH?p=preview)

HTML：

```
<groups-control groupdata="groups"></groups-control> 
```

控制器：

```
app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';
  var json = {data: {
    groups: [
        {
            name: "Group 1",                
            sections: [
                { name: "Section A" },
                { name: "Section B" }
            ]
        },
        {
            name: "Group 2",                
            sections: [
                { name: "Section A" },
                { name: "Section B" }
            ]
        }
    ]
  }};
  $scope.groups = json.data.groups;

}); 
```

指令分为两个：

```
app.directive('groupsControl', function(){
    return {
      restrict: 'E',

      replace: true,
      transclude: false,
      scope: { items:'=groupdata'},

      template: '<div ng-repeat="group in items">' +
                  '{{ group.name }}' +
                  '<section-control sections="group.sections" />'+

              '</div>',
      // The linking function will add behavior to the template
      link: function(scope, element, attrs) {

      }
    }
  }).directive('sectionControl', function(){
    return {
      restrict: 'E',

      replace: true,
      transclude: false,
      scope: { items:'=sections'},

      template: '<div ng-repeat="section in items" ng-include="getIncludeFile(section)">'+
                '</div>',

      link: function(scope, element, attrs) {
        scope.getIncludeFile = function(section) {
            return section.name.toLowerCase().replace('section ','') + ".html";
        }

      }
    }
  }); 
```

我实际上希望看到有人根据一些范围数据使用 templateUrl 的函数发布答案。

# kohana-mangodb - MangoDB：选择喜欢的地方

> ID：16155547
> 
> 赞同：0
> 
> 时间：2013-04-22T19:52:27.613
> 
> 标签：kohana-mangodb

我只是在试用 Kohana MongoDB ORM：MangoDB。我试图弄清楚如何做一个`where like`.

```
$query['city'] = $this->request->query('location');
$results = Mango::factory('salon')
    ->load(array(
        'limit' => null,
        'criteria' => $query
    )); 
```

我想将其更改为执行以下操作：

```
SELECT * FROM salon WHERE city LIKE '%London%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:00:42.917

MongoDB 支持正则表达式：

`db.collection.find( { city: /*London*/i } );`

请参阅此处的文档：http: [//docs.mongodb.org/manual/reference/operator/regex/](http://docs.mongodb.org/manual/reference/operator/regex/)

# python - 相当于 Ipython 笔记本中的 raw_input

> ID：16155552
> 
> 赞同：9
> 
> 时间：2013-04-22T19:53:03.547
> 
> 标签：python, input, ipython

我只是在搞乱 Ipython 笔记本，我打算创建一个战舰游戏......不幸的是，我需要在代码中使用如下代码来制作这样的游戏：

```
move = raw_input("Where would you like to attack? ") 
```

Ipython 笔记本不允许 raw_input...那么我怎么能从其中一位玩家那里获得输入呢？我四处搜寻，我找不到任何直接答案，例如不，你不能或是的，这就是方法。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-04T11:40:56.350

IPython 2 现在支持“raw_input”，IPython 3 支持“input”。请注意，“输入”存在于 IPython 2 中，但它与 IPython 3 中的不同！相反，它相当于 eval(input())。

（这不是 IPython 的特殊性，它只是从 Python 2/3 继承的行为）

如果你想在笔记本中携带一些东西，只需写在它的开头：

```
try:
    input = raw_input
except NameError: #Python 3
    pass 
```

...然后总是使用`input`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T23:41:50.397

raw_input 将在 IPython 1.0 的笔记本中工作，等待[这个拉取请求](https://github.com/ipython/ipython/pull/3089)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T15:54:27.070

利用

```
import tkSimpleDialog

#askstring(Title_WIndow, mensage)

move = tkSimpleDialog.askstring("Title Window","Where would you like to attack? ")

tkSimpleDialog.mainloop(0) #close window after input. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T19:59:44.727

我做了一些研究，发现了这一点。你可以试试下面的代码，因为我不知道如何测试它。

```
import tkSimpleDialog

move = tkSimpleDialog.askstring("Where would you like to attack? ") 
```

还有一个类似的线程： [Ipython raw_input work around?](https://stackoverflow.com/questions/14667144/ipython-raw-input-work-around)

此外，尝试使用 jQueryUI 对话框的 IPython 笔记本的 raw_input 解决方法示例

[https://github.com/minrk/ipython_extensions/blob/master/nbinput.py](https://github.com/minrk/ipython_extensions/blob/master/nbinput.py)

不知道为什么一种语言会使输入过于复杂

# c# - 使用c#将表格数据存储在数据表中

> ID：16155553
> 
> 赞同：0
> 
> 时间：2013-04-22T19:53:03.857
> 
> 标签：c#, sorting, dictionary, datatable, store

我在 c# 中有一些表格数据，有大约 100 K(100000) 条记录，我必须存储在内存中。除了表格格式之外，存储这些数据的最佳方法是什么，记住我已经过滤掉了基于某些条件的结果（比如 dt.select("field1=1 and...) ，像 SQL 表一样对结果集进行排序.

请建议任何其他方式来检索数据。字典是另一种方式，但基于字段条件，如果使用字典或任何其他集合，如何检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:21:48.127

假设您追求速度并降低内存消耗，请尝试以下操作：

1.  创建一个模型类，其中包含源表中每一列的属性。这是你的实体。
2.  从源表中读取（如果它来自数据库，请使用 a `DataReader`）。逐条读取数据记录，并为每条记录创建一个实体。在读取字符串类型的每个字段的过程中，您可以稍微优化一下：
    *   优化速度：读取字符串并直接放入实体的属性中。
    *   内存优化：读取字符串，`String.Intern`在其上使用并放入属性中。
3.  将所有这些实体存储在一个集合中。在这里你有两个选择：
    *   使用 a`List<Entity>`来存储它。您可以在列表和实体上使用 LINQ 来查询您的集合。这在性能上相当慢，但却是内存的最佳解决方案。
    *   如果您事先知道要使用哪些查询/标准，请使用一个字典作为一组标准。例如。如果您有属性“FirstName”和“LastName”，请制作一个字典，将您的实体存储为一个值，并存储`Tuple<string, string>`FirstName 和 LastName 的值。现在查询这些值非常快。对于排序，使用`SortedDictionary`. 如果键有重复项，请创建一个像这样的字典：`Dictionary<Tuple<string, string>, List<Entity>>`它将存储具有相同匹配的名字和姓氏的所有记录。我知道这个解决方案需要更多的编码，但速度非常快。

当然，您可以保留`DataTable`解决方案。如果内存是您唯一关心的问题，请尝试制作一个包含所有字符串的`DataReader`-wrapper 。`Intern`将您的包装器包裹在原件周围，`DataReader`并使用它来创建/填充`DataTable`.

# entity-framework - bool 的实体框架条件将活动和非活动分为不工作的类

> ID：16155558
> 
> 赞同：0
> 
> 时间：2013-04-22T19:53:33.953
> 
> 标签：entity-framework, entity-framework-5

我正在尝试执行以下操作：将一个类->申请者映射到实体框架 5 中的 2 个子类->ActiveApps 和 InactiveApps。申请者中的字段是映射到布尔值 (IsActive) 的 BIt；我将来自申请人的 ActiveApps 和来自申请人的 InactiveApps 子类化。

我对他们两个都设置了条件：

IsActive = 真

IsActive =假

我尝试移动 IsActive 列，将其删除，分别更改为 =1 或 0。

我不断收到各种错误消息（尽管它仍然可以编译）。

有谁知道如何为布尔值设置条件而不会在构建时实际出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:57:33.390

我可以解决这个问题，但它对于实际使用来说太难看了。如果您将任何新实体添加到 EDMX，那么它就会变得混乱。

你做什么：

设置条件 BoolField=0

如果没有，则将标量条件项的默认值添加到 Schema 部分

从子类的概念模型中删除条件列

从父级的 EntityTypeMapping 中删除列

基本的带回家的信息：恕我直言，EF 5 的黄金时段还没有准备好。你最好只使用视图而不是继承。

# xpages - 重复控件内的动态绑定

> ID：16155563
> 
> 赞同：4
> 
> 时间：2013-04-22T19:53:54.933
> 
> 标签：xpages

在采购订单模块中，我们需要根据采购订单的来源选择方法、竞争类型和总成本提出某些问题。这些问题可能会随着时间的推移以及在数据库的不同实例之间发生变化。

所以我有一个包含问题的视图，这样我就可以动态地将问题添加到我的 XPage 中，而无需更改代码。每个问题的答案将存储在一个字段中。因此，包含问题的文档有一个名为 FieldName 的字段，用于提供将使用的字段名称。不幸的是，我没有运气将这些动态字段绑定到文档。

```
<xp:this.data>
    <xp:dominoView var="competitionQuestionView"
        viewName="CompetitionQuestions">
    </xp:dominoView>
</xp:this.data>
<xp:repeat id="repeat2" rows="30" var="rowData" style="width:700px"
    value="#{competitionQuestionView}">
    <xp:label id="label1">
        <xp:this.value><![CDATA[#{javascript:rowData.getColumnValue("Question");}]]></xp:this.value>
    </xp:label>
    <xp:inputText id="inputText1">
        <xp:this.rendered><![CDATA[#{javascript:rowData.getColumnValue("FieldType") == "Text Box"; }]]></xp:this.rendered>
        <xp:this.value><![CDATA[#{javascript:poDoc[rowData.getColumnValue ("FieldName")];}]]></xp:this.value>
    </xp:inputText>
</xp:repeat> 
```

我尝试了各种方法来做到这一点，包括制作一个 dynamicInputText 自定义控件来传递字段名称，但没有运气。我得到的最接近的是当我使用这个时：

```
<xp:this.value>
<![CDATA[#{javascript:tmp = rowData.getColumnValue ("FieldName");'#{poDoc.'+tmp+'}';}]]>
</xp:this.value> 
```

这给了我类似*#{poDoc.justification}*的东西，这是我想传递给“绑定”的东西，但它最终显示为文本值。

我确实尝试使用 $ 来计算加载值，但我猜测它不起作用，因为我的（和 rowData）视图在加载时不可用。当我想使用部分刷新时，这最终会出现问题，因为我无论如何都想显示哪些字段的标准有所更新。

其他问题的一些答案看起来很有希望，但没有提供代码，所以我无法弄清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T20:24:54.753

在幕后，所有数据源都使用这些方法`getValue`并`setValue`（分别​​）读取和写入数据。对于 Domino 文档数据源，表达式`#{currentDocument.fieldName}`在运行时转换为`currentDocument.getValue('fieldName')`或`currentDocument.setValue('fieldName', postedValue)`，具体取决于当前操作是读取还是写入。

如果您将其他可编辑组件的 value 属性设置为 SSJS 值绑定，则它无法执行此自动翻译......所以它只是将每个操作视为读取。

换句话说，要使读/写工作，它必须是“无前缀”表达式。

有几种方法可以处理这个问题，但最简单的方法是使用数据上下文将 SSJS 表达式映射到单个变量。数据上下文可以附加到视图根或面板，因此在您的示例中，您希望将重复内容包装在面板中：

```
<xp:repeat id="repeat2" rows="30" var="rowData" style="width:700px"
    value="#{competitionQuestionView}">
    <xp:panel>
        <xp:this.dataContexts>
            <xp:dataContext var="fieldName">
                <xp:this.value><![CDATA[#{javascript:rowData.getColumnValue ("FieldName");}]]></xp:this.value>
            </xp:dataContext>
        </xp:this.dataContexts>
        <xp:label id="label1">
            <xp:this.value><![CDATA[#{javascript:rowData.getColumnValue("Question");}]]>       </xp:this.value>
        </xp:label>
        <xp:inputText id="inputText1" value="#{poDoc[fieldName]}">
            <xp:this.rendered><![CDATA[#{javascript:rowData.getColumnValue("FieldType") == "Text Box"; }]]></xp:this.rendered>
        </xp:inputText>
    </xp:panel>
</xp:repeat> 
```

因此，对于重复的每个成员，变量`fieldName`将成为该行的列值。然后在输入组件的 value 属性中，使用数组语法（而不是通常的点语法），因为我们希望使用变量来指定字段名称，而不是硬编码名称。

但是，理论上，您应该能够完全跳过数据上下文，只需将以下内容设置为字段的值表达式：

`#{poDoc[rowData.FieldName]}`

在默认（“无前缀”）EL 解析器的上下文中，应该返回与在 SSJS 表达式的上下文中返回的`rowData.FieldName`值完全相同的值。`rowData.getColumnValue("FieldName")`

最后，我建议阅读[此表达式语言教程](http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html)，以熟悉您可以在核心 EL 中执行的所有操作，而无需借助 SSJS。

# wordpress - 插件文件中的路径错误

> ID：16155565
> 
> 赞同：0
> 
> 时间：2013-04-22T19:54:02.067
> 
> 标签：wordpress, plugins

我正在运行最新版本的 WordPress (3.5.1)，使用 Strato 的 hostet，从昨天开始，我的一些插件没有获得正确的文件路径。

更新：这**不是**多站点！

所有文件仍在服务器上，自周五以来未更改或更新（此时该站点正常运行，没有问题）。问题是插件正在查看某种看起来像这样的内部路径：`website/wp-content/plugins/xxx/xxx/xx/xx/123456789/htdocs/website/wp-content/plugins/akismet/akismet.css`所以我得到的只是错误 404（未找到）

我找不到问题所在，也没有收到任何 PHP 错误或类似的错误；只有路径被破坏了......插件甚至可以工作，但没有图像，css和脚本！

因此，我已经停用了所有插件，但是一旦我再次激活它们，我就会遇到同样的问题。

最后我已经联系了提供商，但他们根本无法提供帮助，因为这似乎是 WordPress 中的一个问题。

更新：我已经完全删除了所有插件，但即使我现在下载并激活一个新插件，路径也会如上所述被破坏......

UPDATE2：错误的路径如下所示：

```
domain.com/wp-content/plugins/mnt/web1/a1/12/123456789/htdocs/
/website/wp-content/plugins/akismet/akismet.css 
```

而不是`domain.com/wp-content/plugins/akismet/akismet.css` （实际上路径的第二个版本正在工作，但**所有**插件都在调用第一个版本，即使是全新安装的）

UPDATE3：抱歉，我无法详细说明，因为我不知道出了什么问题，所以我从另一个角度尝试一下：除了插件之外，一切都运行良好。插件甚至显示在前端，但没有任何 CSS、JavaScript 或图像。同样的事情也发生在后端。我可以看到所有插件并管理（安装、编辑、配置……）它们，但没有样式。设计中的一切似乎都称为错误的道路。这样做时，路径的第一部分和最后一部分都可以，但在中间有一些数字通常不应该显示在前端路径中，因为它们是 Strato 服务器根目录的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T22:07:41.850

看来你的`WP_CONTENT_URL`不正确。

这在 ./wp-includes/default-constants.php 中定义：

```
 define( 'WP_CONTENT_URL', get_option('siteurl') . '/wp-content'); 
```

因此，请检查您的设置 > 常规 > WordPress 地址（URL）

您也可以尝试`WP_CONTENT_URL`在 wp-config.php 中定义正确的：

```
 define( 'WP_CONTENT_URL', 'http://www.yourdomain.com/wp-content'); 
```

当上述内容无助于检查您的 .htaccess 时。也许 wp-content/ 被重写为完整路径。

# c# - 编写 DataSet 扩展时无法访问 DataRow 构造函数？

> ID：16155567
> 
> 赞同：6
> 
> 时间：2013-04-22T19:54:33.090
> 
> 标签：c#, extension-methods, system.data

我正在尝试编写几个扩展来转换`UniDataSets`和`UniRecords`转换`DataSet`，`DataRow`但是当我尝试编译时出现以下错误。

> 'System.Data.DataRow.DataRow(System.Data.DataRowBuilder)' 由于其保护级别而无法访问

有什么办法可以解决这个问题，还是我应该放弃这种方法并以不同的方式来解决这个问题？

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Data;
    using IBMU2.UODOTNET;

    namespace Extentions
    {
        public static class UniDataExtentions
        {
            public static System.Data.DataSet ImportUniDataSet(this System.Data.DataSet dataSet, IBMU2.UODOTNET.UniDataSet uniDataSet)
            {
                foreach (UniRecord uniRecord in uniDataSet)
                {
                    DataRow dataRow = new DataRow();
                    dataRow.ImportUniRecord(uniRecord);
                    dataSet.Tables[0].ImportRow(dataRow);
                }

                return dataSet;
            }

            public static void ImportUniRecord(this System.Data.DataRow dataRow, IBMU2.UODOTNET.UniRecord uniRecord)
            {
                int fieldCount = uniRecord.Record.Dcount();

                // ADD COLUMS
                dataRow.Table.Columns.AddRange(new DataColumn[fieldCount]);

                // ADD ROW
                for (int x = 1; x < fieldCount; x++)
                {
                    string stringValue = uniRecord.Record.Extract(x).StringValue;
                    dataRow[x] = stringValue;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T20:00:56.897

不管是在扩展方法中，还是在任何方法中。构造`DataRow`函数不可公开访问。您需要使用该`DataTable.NewRow()`方法创建一个新的`DataRow`.

它将使用数据表中的模式信息来创建与其匹配的行。如果您只是尝试自己使用构造函数，则对象将不知道应该使用什么模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T17:24:10.330

我尝试了一种更简单的方法，但是它适用于多行，也可以应用于单行：

```
//Declare a variable for multiple rows 
DataRow[] rows = null;

//get some data in a DataTable named table

//Select specific data from DataTable named table
rows = table.Select("column = 'ColumnValue'");

//Read the value in a variable from the row
string ColumnValue = rows[0]["column"].ToString(); 
```

希望这可以帮助...

# c# - Greg Young 的 Fluent Interface 是如何工作的？

> ID：16155570
> 
> 赞同：0
> 
> 时间：2013-04-22T19:54:37.393
> 
> 标签：c#, design-patterns, builder, fluent-interface, method-chaining

我正在尝试阅读这篇文章：[http ://codebetter.com/gregyoung/2007/12/05/a-use-for-extension-methods/](http://codebetter.com/gregyoung/2007/12/05/a-use-for-extension-methods/)

到目前为止，我一直很好：

```
Now that I have these I can decorate the Builder with extension methods like:

public static CostBuilder Cost(this Builder s)
{
    return new CostBuilder();
} 
```

我在哪里粘贴这段代码？

编辑：每弗拉德的回答

我将这段代码卡在了 Builder 和 Create 类所在的位置

```
public static partial class BuilderExtensions
{
} 
```

然后对于需要添加构建器的任何命名空间，我将其粘贴在同一类文件中的构建器类下方：

```
public static partial class BuilderExtensions
{
    public static CostBuilder Cost(this Builder s)
    {
        return new CostBuilder();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:00:42.823

扩展方法必须放在静态类中。

```
public static class BuilderExtensions {
    public static CostBuilder Cost(this Builder s) {
        return new CostBuilder();
    }
} 
```

您可以更改声明中的`public`关键字以使扩展方法对您的 API 的使用者不可见。`BuilderExtensions``internal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:59:52.353

根据[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)，`Extension methods`可以定义为“在非嵌套、非泛型静态类中”。

在这种特殊情况下，您可以将其添加到静态`BuilderUtilities`类中。

# javascript - 节点级图式遍历可视化？

> ID：16155577
> 
> 赞同：0
> 
> 时间：2013-04-22T19:55:06.907
> 
> 标签：javascript, visualization, javascript-framework, data-visualization, graph-traversal

我正在寻找一个可以对图进行节点级遍历的 JavaScript 库。

我能找到的最相似的东西（帮助解释我想要什么）是[ThinkMap](http://www.thinkmap.com)，它由[visualthesaurus](http://www.visualthesaurus.com)使用。

基本上从单个圆形节点（最好是 a `<table>`）开始，我想显示有限数量的最近邻居。

单击最近邻居应重新构建以新节点为中心的图形，并查询其 JSON 源以获取新的最近邻居。

**是否有任何开源 JavaScript 库或框架具有类似功能的示例？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:55:50.940

[这个 D3 示例](http://mbostock.github.io/d3/talk/20111116/force-collapsible.html)对您有帮助吗？

# java - 转换“JSONArray 无法转换为 JSONObject 错误”时出现异常

> ID：16155578
> 
> 赞同：0
> 
> 时间：2013-04-22T19:55:08.110
> 
> 标签：java, android, json

我有那个 JSON 响应

```
 {"as_of":"2013-04-22T19:50:41Z","trends":[{"events":null,
            "query":"%23RhymeATweepsName","url":"http:\/\/twitter.com\/search?
            q=%23RhymeATweepsName","promoted_content":null,
            "name":"#RhymeATweepsName"},                
            {"events":null,"query":"%23EarthDayPK","url":
            "http:\/\/twitter.com\/search?
            =%23EarthDayPK","promoted_content":null,"name":
            "#EarthDayPK"}],"locations":
            [{"woeid":*******,"name":"********"}],"created_at":"2013-04-22T19:38:16Z"} 
```

我正在用以下代码解析它

```
 jArray = new JSONArray(result);
                JSONObject post = null;
                for (int ii = 0; ii < jArray.length(); ii++) {
                    post = jArray.getJSONObject(ii);
                     String name = post.getJSONObject("trends").getString("name") + "\n";
                }
            } 
```

但它抛出异常“JSONArray 无法转换为 JSONObject 错误”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:58:39.337

如您的 JSON 所示，`trends`不是 a `JSONObject`，而是 a `JSONArray`：

```
"trends":[
    {
        "events":null,
        "query":"%23RhymeATweepsName",
        "url":"http:\/\/twitter.com\/search? q=%23RhymeATweepsName",
        "promoted_content":null,
        "name":"#RhymeATweepsName"
    },
    {
        "events":null,
        "query":"%23EarthDayPK",
        "url":"http:\/\/twitter.com\/search? =%23EarthDayPK",
        "promoted_content":null,
        "name":"#EarthDayPK"
    }
] 
```

你应该像这样解析它：

```
String name = post.getJSONArray("trends").getJSONObject(0).getString("name");
//                                        or iterate... ^^ 
```

# outlook - Outlook 电子邮件 - Html 表格单元格的背景颜色不起作用？：-/

> ID：16155579
> 
> 赞同：2
> 
> 时间：2013-04-22T19:55:13.720
> 
> 标签：outlook, outlook-2007, outlook-2010

我应该使用什么 html 脚本来使表格的单元格背景颜色在 MS-Outlook 2007 和 2010 中有效？

```
<table>
 <tr>
  <td style="background-color:#ffff00">Background color</td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:56:58.867

查看此链接以了解 Outlook 2007 中支持的 HTML 和 CSS 标记：

[http://msdn.microsoft.com/en-us/library/aa338201%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/aa338201%28v=office.12%29.aspx)

MS 还在上面的 URL 中提供了适用于 Outlook 2007 的 HTML/CSS 验证工具。这至少可以为您提供一种测试方法。

当谈到 HTML 电子邮件时，我发现“少即是多”——简单的布局，简单的技术。由于每个电子邮件客户端都会有所不同，因此“简化”它是保证最广泛覆盖范围的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T16:00:56.487

我有同样的问题......我发布我的答案以防其他人发现这篇文章。

我发现这个工具是一个很好的解决方案（应该适用于所有电子邮件客户端）： [http ://backgrounds.cm/](http://backgrounds.cm/)

# django - 使用 Django 和 Elastic beantalk 实现并行任务的最佳方法是什么？

> ID：16155583
> 
> 赞同：3
> 
> 时间：2013-04-22T19:55:55.147
> 
> 标签：django, scheduled-tasks, celery, amazon-elastic-beanstalk, amazon-sqs

我一直在尝试用 django 实现 celery，用 SQS 实现弹性 beantalk，但我仍然不知道应该如何在后台启动工作人员，看来我需要在 EB 之外创建一个 AMI。我什至走的是正确的道路吗？有没有更好的方法来处理并行任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T16:29:56.660

**更新：** 我找到了一个更简单、更稳定的替代解决方案。请参阅我在此问题中的回答：[您如何使用 AWS Elastic Beanstalk 运行工作程序？](https://stackoverflow.com/questions/14761468/)

我只需要为我正在从事的项目弄清楚这一点。这需要一些修补，但最终解决方案很容易实施。`files:`您可以使用ebextension 挂钩中的指令将三个文件“动态”添加到服务器。这三个文件是：

1.  启动守护进程的脚本（位于 /etc/init.d/）
2.  一个配置文件，配置守护进程启动脚本，位于 /etc/default/
3.  将环境变量从您的应用程序复制到 celeryd 环境并启动服务的 shell 脚本（部署后）

启动脚本可以是存储库中的默认脚本，因此它直接来自 github。

您的项目必须采用该配置。您需要将自己的应用程序名称添加到`CELERY_APP`设置中，并且可以通过设置将其他参数传递给工作人员`CELERYD_OPTS`（例如，可以在此处设置并发值）。

然后，您还需要将项目的环境变量传递给工作守护程序，因为它需要与主应用程序相同的环境变量。一个例子是 celery 工作人员需要能够连接到 SQS 和可能的 S3 的 AWS 密钥。您可以通过简单地将环境变量从当前应用程序附加到配置文件来做到这一点：

```
cat /opt/python/current/env | tee -a /etc/default/celeryd 
```

最后应该启动芹菜工人。这一步需要在代码库部署到服务器之后进行，因此需要在“发布”部署后激活。您可以通过使用未记录的部署后挂钩来做到这一点。任何 shell 文件`/opt/elasticbeanstalk/hooks/appdeploy/post/`都将由 elasticbeanstalk 部署后执行。因此，您可以将`service celeryd restart`命令添加到该文件夹​​中的脚本文件中。为方便起见，我将环境变量的复制和启动命令放在一个文件中。

请注意，您不能`services:`直接使用该指令来启动守护程序，因为这将尝试在代码库部署到服务器之前启动 celeryd 工作程序，因此这将不起作用（因此是“发布”部署脚本）。

好的，所有这些放在一起，唯一需要的是`./ebextensions/celery.config`在您的代码库的主目录中创建一个包含以下内容的文件（当然采用您的代码库）：

```
files:
  "/etc/init.d/celeryd":
    mode: "000755"
    owner: root
    group: root
    source: https://raw2.github.com/celery/celery/22ae169f570f77ae70eab03346f3d25236a62cf5/extra/generic-init.d/celeryd

  "/etc/default/celeryd":
    mode: "000755"
    owner: root
    group: root
    content: |
      CELERYD_NODES="worker1"
      CELERY_BIN="/opt/python/run/venv/bin/celery"
      CELERY_APP="yourappname"
      CELERYD_CHDIR="/opt/python/current/app"
      CELERYD_OPTS="--time-limit=30000"
      CELERYD_LOG_FILE="/var/log/celery/%N.log"
      CELERYD_PID_FILE="/var/run/celery/%N.pid"
      CELERYD_USER="ec2-user"
      CELERYD_GROUP="ec2-user"
      CELERY_CREATE_DIRS=1

  "/opt/elasticbeanstalk/hooks/appdeploy/post/myapp_restart_celeryd.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      # Copy env vars to celeryd and restart service
      su -c "cat /opt/python/current/env | tee -a /etc/default/celeryd" $EB_CONFIG_APP_USER
      su -c "service celeryd restart" $EB_CONFIG_APP_USER

services: 
  sysvinit:
    celeryd:
      enabled: true
      ensureRunning: false 
```

希望这可以帮助。

# jquery - 使用 JQuery 将对象转换为字符串

> ID：16155584
> 
> 赞同：0
> 
> 时间：2013-04-22T19:56:08.763
> 
> 标签：jquery, string, object

我正在使用提供以下数据/值对象的 API：

```
Object {left: "704.4026794075746px", top: "171.54992155622406px"} 
```

我需要能够获取左侧和顶部坐标以用于 jquery 的 css 方法。

我会将此对象转换为字符串然后解析字符串吗？我将如何在 jquery 的 css 或 animate 方法中使用对象内的数据？

抱歉没有上下文，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:57:56.923

您只需将该对象传递给 jQuery 的`.css`函数。

```
$('selector').css(cssObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:59:43.460

如果对象位于名为 的变量中`someObject`，则可以按以下方式访问属性：

```
someObject.left 
```

和

```
someObject.top 
```

您可以致电我们`css()`：

```
$('selector').css("left", someObject.left); 
```

或者，您可以像 Neal 在他的回答中显示的那样传递整个对象。

# c++ - 我可以将具有非常量值类型的映射转换为具有常量值类型的映射吗？

> ID：16155585
> 
> 赞同：2
> 
> 时间：2013-04-22T19:56:09.490
> 
> 标签：c++, stl

我有以下内容：

```
map<int, StructType> map;
const map<int, StructType>& GetMap() { return map; } 
```

我想按照以下方式做一些事情：

```
const map<int, const StructType>& GetConstMap() { return map; } 
```

有什么办法可以将这种特性添加`const`到地图的值类型中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:44:50.600

的接口`std::map`被设计为`const map<K,T>`有效地具有 const 值类型，从不公开对其元素的非常量访问。

因此，您不能通过`const map`引用添加、删除或修改元素。

所以：

```
struct X
{
    map<int, StructType> m;

    const map<int, StructType>& GetConstMap() const { return m; }
} 
```

是你想要的。

# regex - 正则表达式/记事本++ 从 HTML 页面中删除除链接之外的所有内容？

> ID：16155586
> 
> 赞同：0
> 
> 时间：2013-04-22T19:56:10.497
> 
> 标签：regex, notepad++

我有一长页的 HTML 代码。洒在代码中的是各种形式的链接

```
 <a href="/whatever.com">Whatever</a> 
```

我需要什么正则表达式才能在 Notepad++ 中搜索|替换以去除整个 HTML 页面，只留下一个独立的链接列表，如下所示：

```
 whatever.com
 whichever.com
 whoever.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T02:11:06.430

使用以下内容：

寻找：

```
^[^"]+.([^"]+).* 
```

代替：

```
$1 
```

要过滤标题，

寻找：

```
</?[^>]*. 
```

代替：

```
empty string 
```

# matlab - Matlab：从 .csv 文件中读取

> ID：16155589
> 
> 赞同：1
> 
> 时间：2013-04-22T19:56:21.873
> 
> 标签：matlab

我正在尝试从 .csv 文件中导入一些数据，我已经搜索了解决方案，但似乎没有人能解决我的问题。我的 .csv 只是一列数字，但是当我尝试使用 csvread('myfile.csv') 读取它时，它说它无法从字符串转换。当我在 matlab 中双击 .csv 文件时，我可以看到 .csv 中的每个数字都有这个方面：

“996.47”

所以每个数字都在双逗号之间，无论我做什么，我都无法得到它们之间的数字。我也在尝试打开文件并使用 textscan 但我找不到办法。非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:04:58.473

您可以尝试以下解决方法：

```
V = dlmread('myfile.csv','"');
v = V(:,2) 
```

根据您的描述，您有一列格式为“996.47”的值。第一行创建了一个矩阵，其中列由 '"' 分隔 - 您将获得三列，其中中间的列填充您的值。第二行提取中间列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:02:02.023

怎么用

```
importdata('yourfile.csv') 
```

如果您只对数据感兴趣，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:38:18.247

如果您想要一个不需要处理索引的更通用的解决方案，您可以使用 MATLAB 的内置函数[importdata](http://www.mathworks.com/help/matlab/ref/importdata.html)。

```
x = importdata('yourfile.csv'); % reads in the file as text surrounded by double quotes
x = cellfun(@str2num,strrep(v,'"','')); % removes the double quotes and changes text to numbers 
```

# linux - Bash 脚本：不需要的输出

> ID：16155591
> 
> 赞同：0
> 
> 时间：2013-04-22T19:56:44.683
> 
> 标签：linux, bash, scripting

我有这个简单的 bash 脚本：我在传入参数的每个文件上运行 ns 模拟器，其中最后一个参数是要搜索的文本字符串。

```
#!/bin/bash

nsloc="/home/ashish/ns-allinone-2.35/ns-2.35/ns"
temp="temp12345ashish.temp"

j=1

for file in "$@"
do
        if [ $j -lt $# ]
        then
                let j=$j+1

                `$nsloc $file > $temp 2>&1`

                if grep -l ${BASH_ARGV[0]} $temp
                then
                        echo "$file Successful"

                fi

        fi
done 
```

我期望：

```
 file1.tcl Successful 
```

我正进入（状态：

```
 temp12345ashish.temp
   file1.tcl Successful 
```

当我自己在终端上运行模拟器命令时，我没有得到输出指向的文件名。

我没有从第一行输出的打印位置得到。请解释一下。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:15:19.917

请参阅`man grep`，并具体查看该`-l`选项的说明。

在您的脚本（上图）中，您使用`-l`的是 grep，因此 grep 会告诉您（按照说明）匹配发生的文件名。

如果您不想看到文件名，请不要使用`-l`，或者`-q`也使用它。例如：

```
grep -ql ${BASH_ARGV[0]} $temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:08:44.287

只需使 grep 静音：

```
 if grep -l ${BASH_ARGV[0]} $temp &> /dev/null 
```

# javascript - JavaScript中二进制字符串的负数

> ID：16155592
> 
> 赞同：61
> 
> 时间：2013-04-22T19:56:47.187
> 
> 标签：javascript, numbers, tostring

任何人都知道为什么javascript[`Number.toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)函数不能正确表示负数？

```
//If you try
(-3).toString(2); //shows "-11"
// but if you fake a bit shift operation it works as expected
(-3 >>> 0).toString(2); // print "11111111111111111111111111111101" 
```

我真的很好奇为什么它不能正常工作或者它以这种方式工作的原因是什么？我已经搜索过它，但没有找到任何有帮助的东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-06-07T15:11:44.850

## 简短的回答：

1.  该`toString()`函数采用十进制，将其转换为二进制并添加“-”符号。

2.  零填充右移将其操作数转换为两个补码格式的有符号 32 位整数。

## 更详细的答案：

**问题一：**

```
//If you try
(-3).toString(2); //show "-11" 
```

它在函数中[`.toString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString#Description)。当您通过以下方式输出数字时`.toString()`：

> **句法**
> 
> numObj.toString([基数])
> 
> **如果 numObj 为负，则保留符号。**即使基数为 2 也是如此；返回的字符串是 numObj 的正二进制表示，前面带有 - 号，而不是 numObj 的二进制补码。

它采用十进制，将其转换为二进制并添加“-”号。

1.  以 10 为底的“3”转换为以 2 为底的为“11”
2.  添加一个符号给我们“-11”

**问题2：**

```
// but if you fake a bit shift operation it works as expected
        (-3 >>> 0).toString(2); // print "11111111111111111111111111111101" 
```

零填充右移将其操作数转换为[带符号的 32 位整数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers)。该操作的结果始终是一个无符号的 32 位整数。

> 所有位运算符的操作数都转换为二进制补码格式的有符号 32 位整数。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-22T19:59:27.940

-3 >>> 0（右逻辑移位）将其参数强制转换为无符号整数，这就是为什么您会得到 -3 的 32 位二进制补码表示。

[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

[http://en.wikipedia.org/wiki/Logical_shift](http://en.wikipedia.org/wiki/Logical_shift)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-22T20:01:36.057

```
var binary = (-3 >>> 0).toString(2); // coerced to uint32

console.log(binary);

console.log(parseInt(binary, 2) >> 0); // to int32 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/D3MsQ/)

输出是

```
11111111111111111111111111111101
-3 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-28T14:03:21.803

`.toString()`旨在返回字符串表示中数字的符号。请参阅[EcmaScript 2015，第 7.1.12.1 节](https://www.ecma-international.org/ecma-262/6.0/#sec-tostring-applied-to-the-number-type)：

> 3.  如果*m*小于零，则返回字符串“-”和 ToString(−<em>m) 的字符串连接。

当基数作为参数传递时，此规则没有什么不同，这可以从[第 20.1.3.6 节](https://www.ecma-international.org/ecma-262/6.0/#sec-number.prototype.tostring)得出结论：

> 9.  *使用radixNumber*指定的基数返回此 Number 值的字符串表示形式。[...] 该算法应该是 7.1.12.1 中规定的算法的概括。

一旦理解了这一点，令人惊讶的是为什么它对`-3 >>> 0`.

但*这种*行为实际上与 无关`.toString(2)`，因为在调用它之前值已经不同：

```
console.log (-3 >>> 0); // 4294967293
```

这是`>>>`操作员行为方式的结果。

（在撰写本文时）有关[mdn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers)的信息并不完全正确，这也无济于事。它说：

> 所有位运算符的操作数都转换为二进制补码格式的有符号 32 位整数。

但这不适用于*所有*按位运算符。运算符是规则的`>>>`一个例外。[从EcmaScript 2015 第 12.5.8.1 节](http://www.ecma-international.org/ecma-262/6.0/#sec-unsigned-right-shift-operator-runtime-semantics-evaluation)中指定的评估过程可以清楚地看出这一点：

> 7.  令*lnum*为 ToUint32( *lval* )。

ToUint32操作有一个步骤，[将](http://www.ecma-international.org/ecma-262/6.0/#sec-touint32)操作数映射到无符号 32 位范围：

> 5.  让*int32bit*为*int* modulo 2 ^(32)。

当您将上述模运算（不要与 JavaScript 的运算符[混淆](https://stackoverflow.com/a/4467624/5459839)`%`）应用于示例值 -3 时，您确实会得到 4294967293。

由于 -3 和 4294967293 显然不是同一个数字，因此`(-3).toString(2)`与`(4294967293).toString(2)`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-04T09:19:10.287

在这里总结几点，如果其他答案有点混乱：

*   我们要得到的是二进制表示的负数的字符串表示；这意味着字符串应该显示一个带符号的二进制数（使用 2 的补码）
*   表达式`(-3 >>> 0).toString(2)`，我们称它为 A，可以完成工作；但我们想知道它为什么以及如何工作
*   如果我们使用`var num = -3; num.toString(-3)`我们会得到`-11`，这只是数字 3 的无符号二进制表示，前面有一个负号，这不是我们想要的
*   表达式 A 的工作方式如下：

**1)`(-3 >>> 0)`**

该`>>>`操作采用左操作数 (-3)，它是一个有符号整数，并将位 0 ​​向左移动（因此位不变），以及与这些不变位对应的无符号数。

`-3 >>> 0`有符号数 -3 的位序列与无符号数 4294967293 的位序列相同，如果我们简单地输入REPL ，这就是节点给我们的。

**2)`(-3 >>> 0).toString`**

现在，如果我们调用`toString`这个无符号数字，我们将只得到数字位的字符串表示，它与 -3 的位序列相同。

我们实际上所做的是说“嘿 toString，当我告诉您打印出无符号整数的位时，您的行为很正常，所以由于我想打印出有符号整数，所以我只需将其转换为无符号整数，然后你帮我打印出来。”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-14T05:33:06.877

[大安的回答](https://stackoverflow.com/a/37683133/2701130)很好地解释了这一点。

`toString(2)`并没有真正将数字转换为二进制补码，而是将数字简单地转换为正二进制形式，同时保留它的符号。

例子

```
Assume the given input is -15,
1\. negative sign will be preserved
2\. `15` in binary is 1111, therefore (-15).toString(2) gives output
-1111 (this is not in 2's complement!) 
```

我们知道在 32 位中 -15 的 2 的补码是
`11111111 11111111 11111111 11110001`

因此，为了获得 (-15) 的二进制形式，我们实际上可以使用无符号右移将其转换为无符号 32 位整数`>>>`，然后将其传递给以`toString(2)`打印出二进制形式。这就是我们这样做的原因`(-15 >>> 0).toString(2)`，它将为我们`11111111111111111111111111110001`提供 2 的补码中 -15 的正确二进制表示。

# r - 在 R 中使用 rgl 绘制半透明球体

> ID：16155593
> 
> 赞同：3
> 
> 时间：2013-04-22T19:56:55.203
> 
> 标签：r, plot, geometry, transparency, rgl

我有一组数据，看起来像：

```
 x   y   z
1   1   2   1
2   3   5   7
3   -3  2   4
4   -2  1   1 
```

所以每一行都记录了 3-D 空间中的点坐标。我想将所有点绘制为点，除了一个点，比如第 15 号作为半透明球体，我可以设置半径。然后我可以从图中看到数据中的哪些点包含在球体中。我现在正在使用 RGL 包并执行了以下操作：

```
> open3d()
> plot3d(readin,col=3,type="p")
> plot3d(readin[15,],col=2,add=T,type="s",radius=0.1) 
```

所以第一个绘图命令将整个集合绘制为散点图，第二个绘图命令选择数据的第 15 行并将其绘制为球体并将其添加到前一个画布中。我只是想知道我是否可以使球体半透明，以便我可以看到球体中包含哪些点，这意味着这些点非常接近我选择的点。

RGL 有没有办法做到这一点，或者你可以为我提供另一种方法来完成这项任务？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T20:51:09.483

我认为您正在寻找的是论点`alpha`。

### 例子

```
df <- data.frame(x=c(1,3,-3,-2), y=c(2,5,2,1),z=c(1,7,4,1))

library(rgl)
open3d()
plot3d(df,col=3,type="p", radius=0.5)
plot3d(df,col=rgb(1,0,0.3),alpha=0.5, add=T,type="s",radius=1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/sOlsN.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:51:05.500

您可以使用 spheres3d 的 alpha 参数绘制透明球体。您可以旋转绘图以将框线移动到球体后面以证明它是透明的。

```
 spheres3d(dat[4,],col=rgb(1,0,0), alpha=0.9)  # transparent red. 
```

（我试图用 alpha 参数来做到这一点，`rgb`但它失败了。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:54:08.287

如果您只想找出哪些点在点 15 的某个半径内，那么您可以计算从每个点到点 15 的欧几里得距离，并查看其中哪些距离小于半径。不需要绘图（尽管您可以将这些点绘制为不同的颜色以突出显示它们。该`dist`函数是计算距离的一种方法，或者自己编程很简单。

# clojure - Clojure：我的 flatten 实现有什么问题？

> ID：16155597
> 
> 赞同：3
> 
> 时间：2013-04-22T19:57:04.273
> 
> 标签：clojure, functional-programming

我今天一直在解决[4Clojure上的问题，但在](http://4clojure.com)[问题 28](http://www.4clojure.com/problem/28)上遇到了麻烦，实现了 flatten。

我的代码有几个明确的问题。

```
(fn [coll]
  ((fn flt [coll res]
    (if (empty? coll)
        res
        (if (seq? (first coll))
            (flt (into (first coll) (rest coll)) res)
            (flt (rest coll) (cons (first coll) res))))) coll (empty coll))) 
```

我可以就如何思考几个问题提出一些建议。

1.  如何确保我没有更改结果列表的顺序？`cons`并且`conj`两者都在添加元素最有效的地方添加元素（在列表的开头，在向量的末尾等），所以我看不出在使用泛型时我应该如何控制它序列。

2.  如何处理不同类型的嵌套序列？例如， will 的输入`'(1 2 [3 4])`将输出`([3 4] 2 1)`，而 will 的输入`[1 2 '(3 4)]`将输出`(4 3 2 1)`

3.  我什至是从“正确”的角度来解决这个问题吗？我应该使用带有累加器的递归内部函数来做到这一点，还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T08:56:29.123

您应该尽可能多地尝试使用 HOF（高阶函数）：它可以更清楚地传达您的意图，并且可以避免引入微妙的低级错误。

```
(defn flatten [coll]
  (if (sequential? coll)
    (mapcat flatten coll)
    (list coll))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:10:37.653

关于您关于列表和向量的问题。正如您在测试中看到的那样，输出是列表。只要做出正确的抽象。幸运的是，clojure 已经有了一个，称为**sequence**。

您需要的只是**首先**，**休息**和一些递归解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:40:32.353

一种可能的方法：

```
(defn flatten [[f & r]]
  (if (nil? f)
    '()
    (if (sequential? f)
      (concat (flatten f) (flatten r))
      (cons f (flatten r))))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-19T20:27:27.910

以下是如何以尾调用优化的方式，在单次迭代中，并尽可能使用最少的 Clojure.core 代码：

```
#(loop [s % o [] r % l 0]
   (cond
    (and (empty? s) (= 0 l))
    o
    (empty? s)
    (recur r
           o
           r
           (dec l))
    (sequential? (first s))
    (recur (first s)
           o
           (if (= 0 l)
             (rest s)
             r)
           (inc l))
    :else
    (recur (rest s)
           (conj o (first s))
           r
           l))) 
```

# c - 使用 C 实现队列中的分段错误

> ID：16155604
> 
> 赞同：0
> 
> 时间：2013-04-22T19:57:47.220
> 
> 标签：c, segmentation-fault, queue, implementation

我已经在 C 中实现了一个简单的队列系统。但是我遇到了函数 append 的问题。这不是每次都发生，只是几次，但我找不到共同点。

gdb 说分段错误是由线路引起的，`while (*h){`但我认为没关系。

以下是功能：

```
int pop (int *h){
    int ret = *h, i;

    for (i = 0; i < 52; i++){
        if (!*(h+i)){
            *(h+i-1) = 0;
            break;
        }
        else{
            *(h+i-1) = *(h+i);
        }
    }   
    return ret;
}

void append(int *h, int i){
    while (*h){
        ++h;
    }   
    *h = i;
} 
```

非常感谢。

注意：队列大小是固定的，因此进出它的值的数量是固定的，因此问题不在于超出范围。

***编辑***

我已经修好了。以下是工作的功能：

```
int pop (int *h){
    int ret = *h, i;

    for (i = 1; i < 52; i++){
        if (!h[i]){
            h[i-1] = 0;
            break;
        }
        else{
            h[i-1] = h[i];
        }
    }   
    return ret;
}

void append(int *h, int i){
    int j;

    for (j = 0; j<52; j++){
        if (!h[j]) break;
    }   
    h[j] = i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:06:46.897

看在上帝的份上，使用数组表示法`[]`而不是指针解引用`*()`。在这里，您的代码具有正确的符号，问题出在哪里就很明显了。

```
int pop (int *h){
  int ret = *h, i;

  for (i = 0; i < 52; i++){    <--- Change to i=1
    if (!h[i]){                                                     
        h[i-1] = 0;        <------ Buffer underflow when h[0] == 0  
        break;                                                      
    }
    else{
        h[i-1] = h[i];     <------ Buffer underflow when h[0] != 0
    }
  }   
  return ret;
}   

void append(int *h, int i){   Where's the buffer overflow check ????
  while (*h){
    ++h;
  }   
  *h = i;
} 
```

您是否还使用 0 值初始化了数组？此外，是否真的希望您的堆栈/队列不能包含 0 值？

编辑：这里是更正的版本

```
int pop (int *h)
{
  int ret = h[0], i = 1;
  do {
    h[i-1] = h[i];
  } while(h[i] && i<52);
  return ret;
}   

void append(int *h, int value)
{
int i;
  for(i=0; i<52; i++) {
    if(!h[i])
      break;
  }
  if(i<52)
    h[i] = value;
  else
    fprintf(stderr, "Array is full\n");
} 
```

# css - 将图像定位到背景中

> ID：16155605
> 
> 赞同：0
> 
> 时间：2013-04-22T19:57:50.983
> 
> 标签：css, image, twitter-bootstrap, positioning, z-index

我正在为我的女朋友开发一个网站。但我坚持定位标志。

这是我正在谈论的网站：

> [http://xntriek-test.s3-website-eu-west-1.amazonaws.com/](http://xntriek-test.s3-website-eu-west-1.amazonaws.com/)

我尝试使用 z-indexes 但不起作用。我还尝试为身体设置背景图像。但是后来我限制了图像的大小。我正在使用 Twitter bootstrap 将这个东西放在一起。

目前这是我用于徽标的类：

```
.logo{
  position: absolute;
  top: 25px;
  left: 25px;
  height: 45%;
  width: 30%;
  z-index: 1;
} 
```

目前，我将图像定位在主要内容旁边的跨度中。但是因为我使用的是 position: absolute ，所以如果我说的话，这不会有什么不同。

如果任何人有任何想法我可以如何解决这个问题，也许是一种不同的方法，那么我现在正在做。欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:11:03.387

您需要按照以下内容修改您的 CSS：

```
<div class="span6 offset3" style="position: relative; z-index: 1"> 
```

`z-index`影响定位元素，所以只需添加`position: relative`到您感兴趣的范围内。

我会创建一个特殊的类“z-wrap”并修改样式表。

```
<div class="span6 offset3 z-wrap"> 
```

在 CSS 样式表中：

```
.z-wrap {position: relative; z-index: 1} 
```

参考：[https ://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index)

**注意**您可能需要根据您在徽标容器中设置的任何 z-index 值来调整 z-index 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:08:29.660

首先，您使用 css 扭曲徽标，如果您希望图像具有响应性，请将其放置在响应元素中，放置这个绝对值并让图像调整它的大小。

```
#logoContainer {
 position:absolute;
 top:25px;
 left:25px;
 width:30%;
 z-index:-1;
}     

img.logo{
 width:100%;
 height:auto;
} 
```

您的 html 应如下所示：

```
<div id="logoContainer">
 <img src="yoursrc/logo.gif" alt="The Logo" class="logo" />
</div> 
```

把它放在你的身体标签打开之后，而不是在其他一些元素中。通过将它放在其他元素中，徽标会继承它们的 z-index，您只能影响它在父级内部的 z 定位，而不是在整个页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:09:04.983

使用 z-index 属性时要记住的一件事：

只有**使用其“位置”属性**（相对、绝对或固定）放置的元素会受到“z-index”的影响。

所以如果你想解决你的问题，要么把你的标志作为背景图片，要么在内容的 CSS 中使用**位置**。

# php - PHP PDO - 一个 PDO Prepare 中的多个插入不会捕获错误

> ID：16155606
> 
> 赞同：-2
> 
> 时间：2013-04-22T19:57:52.590
> 
> 标签：php, mysql, pdo

我在一个 PDO 准备语句中传递多个 INSERT 语句并且执行工作；但是，如果任何插入失败，则 execute() 始终返回 TRUE，并且永远不会调用 catch()。

```
$query = '
INSERT INTO resources SET
    resource_type_id = :audio_resource_type_id
    , resource_status_id = :resource_status_id
    , is_hosted = :is_hosted
    , category_id = :category_id
    , serve_url = :audio_serve_url
    , title = :title;

SET @audio_id = LAST_INSERT_ID();

INSERT INTO resources SET
    resource_type_id = :thumbnail_resource_type_id
    , resource_status_id = :resource_status_id
    , category_id = :category_id
    , serve_url = :thumbnail_serve_url
    , parent_resource_id = @audio_id;';

if ($audio_duration) {
    $query .= '     
    INSERT INTO audio_duration SET
    audio_id = @audio_id
    , duration_seconds = :audio_duration';
}

try {
    $sth = $dbi->dbh->prepare($query);
    $sth->bindParam('audio_resource_type_id', $this->resource_types['audio']);
    $sth->bindParam('thumbnail_resource_type_id', $this->resource_types['THUMBNAIL']);
    $sth->bindParam('resource_status_id', $resource_status_id);
    $sth->bindParam('category_id', $this->category_id);
    $sth->bindParam('audio_serve_url', $audio_serve_url);
    $sth->bindParam('thumbnail_serve_url', $thumbnail_serve_url);
    $sth->bindParam('title', $title);
    $sth->bindParam('audio_duration', $audio_duration);

    $sth->execute();

} catch (PDOException $e) {
    print "Error!: " . $e->getMessage();
    log($e->getMessage());
    alert($e->getMessage());
    return FALSE;
} 
```

感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:03:17.263

只想指出这一点。。

要阻止 PDO 静默失败，您可以在 PDO 连接上设置错误模式。

```
$dbh = new PDO();
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

`PDO::ERRMODE_WARNING`如果你想要错误但仍然继续，还有。

# c# - 使用 Sqlite 数据库填充包含 DateTime 列的数据集

> ID：16155608
> 
> 赞同：2
> 
> 时间：2013-04-22T19:57:58.773
> 
> 标签：c#, sqlite, datetime

我正在开发一个使用 SQLite 数据库的 C# WPF 项目。我正在尝试从 sqlite 数据库中的表中检索数据并添加到数据集中，以便可以将数据集添加到数据网格的项目源中。其中一列是 DateTime 列，但我收到以下错误：

```
String was not recognized as a valid DateTime. 
```

下面是我如何检索数据

```
private DataSet getAlarmsForSqlite()
        {
            DataSet ds = new DataSet();
            try
            {
                using (ConnectSQLiteDatabase db = new ConnectSQLiteDatabase(dbPassword))
                {
                    string query = "SELECT * FROM alarms ORDER BY date";
                    SQLiteDataAdapter da = new SQLiteDataAdapter(query, db.conn);
                    da.Fill(ds);
                }

            }
            catch (SQLiteException ex)
            {
                Console.WriteLine("Failed to get alarms. Sqlite Error: {0}", ex.Message);
                return null;
            }
            return ds;
        } 
```

下面是表的创建语句

```
CREATE TABLE `alarms` (`id` int(11) NOT NULL, `date` datetime NOT NULL,
`type` varchar(50) NOT NULL,
`message` mediumtext NOT NULL, 
`level` varchar(45) NOT NULL, 
`page` varchar(500) NOT NULL, 
`acknowledged` char(1) DEFAULT '0', PRIMARY KEY (`id`)) 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:15:19.820

试试这个方法

```
select *  from alarms order  by date(date) DESC 
```

请参阅[文档](http://www.sqlite.org/lang_datefunc.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:15:34.063

这里有一些关于这个问题的讨论；[sqlite 抛出“字符串未被识别为有效日期时间”](https://stackoverflow.com/questions/11414399/sqlite-throwing-a-string-not-recognized-as-a-valid-datetime)

显然 SQLite 日期时间到 C# DateTime 序列化映射并不完全有效。对我来说，听起来日期时间会以字符串的形式返回，因此您需要`DateTime.Parse()`在代码中执行此操作。在该问题的一个答案中，它表明日期时间还需要转换为 nvarchar 才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T22:14:00.453

这是两件事之一：

*   表中的数据实际上是 SQLite 无法转换为日期时间的格式。为获得最佳结果，请使用 ISO8601 日期格式“yyyy-MM-dd HH:mm:ss.FFFFFFF”。它需要在将数据写入数据库之前进行转换，但在将数据读回数据集时会进行透明处理。

*   查询中的 ORDER BY 项由于某种原因阻止 SQLiteDataAdapter 识别列的正确类型。即使您按其他列排序，结果也是一样的。为避免此问题，请删除排序术语（然后将正确识别列数据类型）并在填充后对 DataSet 进行排序。

编辑：在查看了 Ramesh 的建议后，当使用“日期”功能和 Order By 时，我的第二点中概述的行为不再发生。

# jquery - jQuery 隐藏和显示功能不适用于 AJAX 调用

> ID：16155609
> 
> 赞同：0
> 
> 时间：2013-04-22T19:58:02.610
> 
> 标签：jquery, html, ajax, jquery-ui

想要在处理 ajax 调用时显示加载程序。但是隐藏和显示在运行时不起作用。在调试模式下没问题。我试图在 ajax 上设置超时，但没有结果。

```
function Rate() {
    $("#rate_navigation").hide();
    $("#rate_loader").show();

    $.ajax({
        type: "POST",
        url: "url",
        data: "data",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (msg) {
            $("#comment_result").html(msg.d);
        },
        error: AjaxCallError
    });

    $("#rate_loader").hide();
    $("#rate_navigation").show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:00:37.647

`beforeSend`和`complete`。

见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
function Rate() {

    $.ajax({
        type: "POST",
        url: "url",
        data: "data",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        beforeSend: function () {
            $("#rate_navigation").hide();
            $("#rate_loader").show();
        },
        complete: function () {
            $("#rate_loader").hide();
            $("#rate_navigation").show();
        },
        success: function (msg) {
            $("#comment_result").html(msg.d);
        },
        error: AjaxCallError
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:01:08.150

将这些放入您的成功回调中：

```
success: function (msg) {
        $("#rate_loader").hide();
        $("#rate_navigation").show();
        $("#comment_result").html(msg.d);
    },
    error: AjaxCallError
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:01:09.343

将取消隐藏条件放在成功内

```
function Rate() {
$("#rate_navigation").hide();
$("#rate_loader").show();

$.ajax({
    type: "POST",
    url: "url",
    data: "data",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function (msg) {
        $("#comment_result").html(msg.d);

        $("#rate_loader").hide();
        $("#rate_navigation").show();
    },
    error: AjaxCallError
});

} 
```

# java - java servlet如何确认客户端收到响应

> ID：16155611
> 
> 赞同：3
> 
> 时间：2013-04-22T19:58:13.517
> 
> 标签：java, servlets, tcp

我有一个处理来自客户端的 HTTP GET 请求的 java servlet。处理完请求后，它会发回 HTTP 200 OK，响应中包含几百字节的数据。

有一个特定的错误情况，即客户端几乎在发送响应的同时与网络断开连接。数据由servlet写入输出流，输出流被flush，时序是flush输出流的时候，server不知道client没有连接。（连接被客户端和服务器之间的某个点突然切断，因此客户端没有机会正确关闭 TCP 连接 - 服务器看不到 TCP RST。）

问题是，servlet 有没有办法检测到这种情况？我已经检查了两件事：

1.  我没有在 servlet 中抛出任何异常。我希望这种情况会导致 IOException ，但这似乎没有发生。
2.  我在用于写入客户端的 PrintWriter 上调用 PrintWriter.checkError()，即使发生此错误情况，它也会返回 false（无错误）。

据我所知，服务器没有办法知道这种情况发生。但在我看来，这应该是可能的，因为缺乏来自客户端 TCP 堆栈的确认。但也许这并没有暴露给 servlet。

不确定是否重要，但我使用的是 Tomcat 7.0.26。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:20:17.787

它不能。响应可能完全由容器缓冲，并且仅在您的 Servlet 代码退出后写入。

您不得在您的应用程序中建立对接收响应的客户端的任何依赖。这称为幂等性：查一下。

# xcode - 找不到与应用程序标识符匹配的有效配置文件

> ID：16155613
> 
> 赞同：12
> 
> 时间：2013-04-22T19:58:33.117
> 
> 标签：xcode, device, provisioning, portal

以前有人问过这个问题，但是以前问题的答案并没有解决我的问题。

我正在尝试从斯坦福 iTunes U 课程中构建一个名为 (CalculatorBrain) 的简单 Hello World 应用程序。我可以在模拟器中很好地运行它，但我想在我的 iPhone 4S 上运行它。

我通过 Windows 机器上的 iTunes 同步我的 iPhone 4S。一直有。想我应该列出这个细节。

无论如何，回到我的 Macbook（Mountain Lion）。我正在运行最新的 XCode 4.6.2 (4H1003)，我相信我的 iPhone 也是最新的 6.1.3。

我去了 Apple 开发者页面上的 Provisioning Portal。我加了我的4S。我称它为 JohnSmith，并给它电话 UDID。

在 XCode 中，我打开了 Organizer，Devices 默认高亮显示。我将密码放入我的 iPhone，然后将其插入我的 Macbook。设备找到我的 iPhone。如果我单击配置文件并尝试“将设备添加到配置门户”，我会收到“此团队中已存在带有编号的设备”。伟大的。我知道它肯定是添加的。到目前为止所有的好消息。

在我的 Hello World 应用程序 CalculatorBrain-Info.plist 中，我的 Bundle Identifier 是“com.JohnSmith.CalculatorBrain”。捆绑显示名称为“${PRODUCT_NAME}”，可执行文件为“${EXECUTABLE_NAME}”（如果重要）。

在导航器中，如果我突出显示我的项目，并调出构建设置，在代码签名身份下，我会得到选项...

不要签署代码

自动配置文件选择器 - iPhone 开发人员 - iPhone 分发

没有配置文件的身份 - iPhone 开发人员：John Smith (R............K) - iPhone 分发：John Smith (Y............5)

其他...

我已经尝试了所有这些。我假设我应该使用 iPhone 开发人员：John Smith one……但它说这是一个没有配置文件的身份。

这里发生了什么？我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-23T00:13:22.163

根据您的描述，听起来缺少的元素是您需要返回“证书、标识符和配置文件”工具，为您的 HelloWorld 应用程序的 AppID 生成一个开发配置文件，然后在您的开发中安装该配置文件机器。概括地说，这由以下步骤组成：

1.  在 Xcode 中找到您的项目的 AppID。
2.  验证您是否已在“证书、标识符和配置文件”中设置了该 AppID。
3.  为该 AppId、您的开发证书和一个或多个注册的测试设备创建一个开发供应配置文件。
4.  在 Xcode 中下载并安装 Provisioning Profile。
5.  使用此配置文件和链接代码签名身份将您的项目配置为代码签名。
6.  构建到设备！

您提到的“代码签名身份”构建配置项在很大程度上取决于您的项目设置以及开发机器上可用的配置文件。我最近回答了一个相关的问题[“什么是代码签名身份？”](https://stackoverflow.com/questions/15996468/what-are-code-signing-identities/16070915#16070915 "什么是代码签名身份？") 这可能有助于查看代码签名正在使用的信息以及如何检查您的开发机器设置是否能够对您的项目进行代码签名。

...现在，关于更具体的 HOWTO 来帮助解决您的代码签名问题：

**定位项目的AppID**

AppID 唯一地定义了 iOS 生态系统中的应用程序，并且是您在开始一个新的 Xcode 项目时首先创建的东西之一。您需要在“证书、标识符和配置文件”工具中注册此 AppID 以开始配置。

![Xcode AppId 设置](https://i.stack.imgur.com/5mbBi.png)

1.  在 Project Navigator (CMD+1) 中，单击您的项目名称（可能是“CalculatorBrain”）。这将显示项目的设置。
2.  选择 [您的项目名称] > 摘要选项卡，如上面的屏幕剪辑所示 (MyiOSApplication)。
3.  您的 iOS AppID 显示在“Bundle Identifier”字段中。获取此字符串的副本，接下来您将需要它。

**验证（或设置）AppID**

1.  导航到[http://developer.apple.com/ios](http://developer.apple.com/ios)并访问“证书、标识符和配置文件”工具。
2.  登录后，选择“标识符”。
3.  检查您在上一节中找到的 AppID 是否存在于 App Identifiers 列表中。如果是，请记下 App ID 名称并跳到下一部分，否则...
4.  单击右上角的“添加”（加号）按钮，为该 App ID 提供一个名称（可以是任何您想要的名称，只要它没有特殊字符即可。）
5.  滚动到页面底部，然后将上一部分中的 App ID 副本粘贴到“Bundle ID”字段中。在“显式应用程序 ID”下。
6.  点击“继续”。

请注意，AppID 在整个 iOS 生态系统中必须是唯一的——如果您选择的 AppID 已在使用中，您可能会收到错误消息。如果是这样，请将您的 'Bundle ID' 更改为唯一的 - 只需确保更新 Xcode 项目中的 'Bundle ID' 设置以匹配您选择的任何内容。

**创建开发供应配置文件**

现在已注册 App ID，您现在可以创建将您的 App ID、开发证书和测试设备 ID 链接在一起的开发供应配置文件。

1.  在“证书、身份、配置文件”工具中，导航到“供应配置文件”。
2.  单击右上角的“添加”（加号）按钮。
3.  在“选择类型”步骤中选择“iOS App Development”，然后单击“继续”。
4.  从 App ID 下拉列表中选择您的 App ID，然后单击“继续”。
5.  选中您的开发证书旁边的框，然后单击“继续”。
6.  选中您要授权安装此应用的测试设备旁边的框，然后单击“继续”。
7.  键入配置文件名称（再次省略特殊字符），然后单击“生成”。

**下载并安装配置文件**

生成配置文件后，该工具将为您提供一个链接以供您下载

1.  单击“下载”链接下载配置文件。
2.  将 Provisioning Profile 从您的下载位置拖放到 Xcode Dock 图标上或双击打开它。

**配置代码签名身份**

听起来您已经知道它的位置，但以防万一：

1.  在 Project Navigator (CMD+1) 中，单击您的项目名称（可能是“CalculatorBrain”）。这将显示项目的设置。
2.  选择 [您的项目名称] > 构建设置选项卡。
3.  滚动到“代码签名身份”项。

理论上，您希望使用“自动配置文件选择器”选项，该选项将尝试将您的 AppID 与已安装的配置文件匹配，但您也可以滚动列表并选择 Bundle ID/AppId 到 iOS 证书的特定映射。

此外，我自己的 Xcode 似乎并不总是能赶上对新安装的配置文件的更改——目前尚不清楚这是否只是我自己的 Xcode 安装的一个怪癖，或者 Xcode 中是否存在错误。无论哪种方式，退出并重新启动 Xcode 似乎都会触发配置文件的重新索引/刷新。

无论如何，选择与您的 AppId/BundleId 和开发人员证书匹配的选项。

假设问题是缺少/不完整/过期的配置文件，那么这应该可以帮助您启动和运行。如果没有，我们将不得不深入研究可能会妨碍您的代码签名操作的其他潜在设置或证书问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-26T15:09:32.403

我遇到了非常相似的问题，尝试了这些代码签名的所有选项，而我的实际解决方案是：-重新启动 Xcode-转到“Window->Organizer”-然后“编辑器”和-“从开发人员门户刷新”然后我只需在“运行”和“停止”按钮旁边将“设置活动方案”设置为“iPhone (Petri)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-17T07:58:49.130

请确保选中目标而不是项目。

![确保选择了目标](https://i.stack.imgur.com/7w8NS.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-18T14:19:00.020

![在此处输入图像描述](https://i.stack.imgur.com/abOpn.png)在我的情况下，设备有 3 个同名的配置文件。在开发过程中，我多次更新配置文件，每次将新的更新配置文件添加到设备时，都不会删除旧配置文件。因此，xcode 搜索了当时错误的第一个配置文件，并在我的脸上抛出了错误。那你该怎么办：

1.  打开“设备”窗口（Cmd + Shif + 2）
2.  搜索您的设备并选择它
3.  在左下角按下“设置”按钮
4.  按“配置文件”
5.  搜索重复项。我找到了 3 项同名的配置文件
6.  删除了除最新的以外的所有内容

# ios - 将参数传递给选择器操作

> ID：16155616
> 
> 赞同：11
> 
> 时间：2013-04-22T19:58:41.277
> 
> 标签：ios, objective-c, string, parameters, selector

我处于一种我认为我接近解决的情况，但也许不是。

我有一个自定义表格视图单元格的表格视图。

目前每个 tableviewcell 有 3 个 uibuttons，访问它们并赋予它们功能是没有问题的。

我遇到问题的 3 个按钮之一。该按钮将用户从当前导航控制器推送到 webview 控制器，但我希望 webview 控制器成为当前 tableview 单元格所持有的 http 地址。

这是我正在使用的代码的一小部分。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Identifier";

    SearchTableCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"SearchTableCell" owner:nil options:nil];
        //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:reuseIdentifier];
        for(id currentObject in topLevelObjects)
        {
            if([currentObject isKindOfClass:[SearchTableCell class]])
            {
                cell = (SearchTableCell *)currentObject;
                break;
            }
        }
    }

    Player *event = [_party.events objectAtIndex:indexPath.row];
    cell.EventTitle.text = event.name;
    cell.EventDescription.text = event.description;
    cell.EventStartTime.text = event.start_date;
    cell.EventEndTime.text = event.end_date;
    cell.EventTicketURL = event.ticketURL;

    NSString *string = event.ticketURL;

    [cell.buyTicketOutlet addTarget:self action:@selector(pushToTicketURL:string) forControlEvents:UIControlEventTouchUpInside];
    //[cell.AddEventOutlet addTarget:self action:@selector(:) forControlEvents:UIControlEventTouchUpInside];
    //cell.textLabel.numberOfLines = 2;
    return cell;
}

- (void) pushToTicketURL:(NSString *)string
{

    UIViewController *webViewController = [[UIViewController alloc] init];
    webViewController.title = @"Tickets";
    UIWebView *uiWebView = [[UIWebView alloc] initWithFrame: CGRectMake(0,0,320,370)];

    [uiWebView loadRequest:[NSURLRequest requestWithURL: [NSURL URLWithString:string]]];

    [webViewController.view addSubview:uiWebView];
    [uiWebView release];

    [self.navigationController pushViewController:webViewController animated:YES];
    NSLog(@"Button pressed");
} 
```

我已经看过一些关于同一问题的其他评论，但就像我说的，我只需要将一个参数传递给选择器，我知道这是不可能的，但是我还有什么其他方法可以解决这个问题？

也许我的问题措辞不好：/。

任何帮助都会很棒:)

编辑：我理解`[cell.buyTicketOutlet addTarget:self action:@selector(pushToTicketURL:string) forControlEvents:UIControlEventTouchUpInside];`给出错误。但是我可以用什么代码来做我想做的事情？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T20:03:12.673

虽然您不能将 URL 直接传递给选择器，但您可以传递按钮本身。所以我的建议是根据您的单元格行标记按钮并创建如下操作：

```
void goToAddress: (id) sender {
   UIButton *button = (UIButton*) sender;
   if (button.tag == ..) {
   ...
  }
} 
```

然后，在该方法中，您可以从单元格中“查找” URL，其编号等于按钮的标记。

除此之外，我相当确定在按钮的选择器中传递自定义参数或多个参数是不可能的。如果我错了，请纠正我。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T20:00:53.147

`:`如果您需要传递一个参数，则只需要在将参数传递给选择器时。

```
[cell.buyTicketOutlet addTarget:self action:@selector(pushToTicketURL:) forControlEvents:UIControlEventTouchUpInside]; 
```

基本上`:`意味着您将争论传递给选择器，并且在接收端您可以使用对象定义您的选择器方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T20:52:42.253

参考 fDmitry 的回复，

这是我用来解释他的完整代码。它非常有效:)。感谢 Omar Abdelhafith，他的链接帮助了我，感谢 fDmitry 让我走上正轨 :)

```
-(void)pushToTicketURL:(id)sender{
    UIButton *button = (UIButton*)sender;
    UIView *view = button.superview; //Cell contentView
    SearchTableCell *cell = (SearchTableCell *)view.superview;
    NSLog(@"%@",cell.EventTitle.text); //Cell Text

    UIViewController *webViewController = [[UIViewController alloc] init];
    webViewController.title = cell.EventTitle.text;
    [webViewController.title sizeWithFont:10];
    UIWebView *uiWebView = [[UIWebView alloc] initWithFrame: CGRectMake(0,0,320,370)];

    [uiWebView loadRequest:[NSURLRequest requestWithURL: [NSURL URLWithString:cell.EventTicketURL]]];

    [webViewController.view addSubview:uiWebView];
    [uiWebView release];

    [self.navigationController pushViewController:webViewController animated:YES];
} 
```

这段代码对我帮助很大，希望它能帮助遇到同样问题的其他人:)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:43:37.040

@fDmitry 的方法还不错，但是现代 ObjC 中有更好的方法。使用关联对象，您可以将任意对象（即您的 URL）附加到其他对象（即您的按钮）。您可以向发件人（按钮）询问 URL 并对其进行处理。这是一种方法：

```
// Create a category. The "MY" is just a prefix for your namespace
@interface UIButton (MYURLAdditions)
@property (nonatomic, readwrite, strong) NSURL *MYURL;
@end

// Add the information with a associated object

#import <objc/runtime.h>
@implementation (MYURLAdditions)

static char MYURLKey;
- (NSURL *)MYURL {
  return objc_getAssociatedObject(self, &MYURLKey);
}

- (void)setMYURL:(NSURL *)URL {
  objc_setAssociatedObject(obj, &MYURLKey, URL, OBJC_ASSOCIATION_RETAIN);
} 
```

这样，在导入您的类别后，您可以调用`[button setMYURL:]`以设置按钮上的 URL。然后，您可以`[sender MYURL]`在 IBAction 中使用它来获取它。

# .htaccess - htaccess 重写以删除查询参数

> ID：16155620
> 
> 赞同：0
> 
> 时间：2013-04-22T19:58:56.863
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我一直在尝试通过上一个关于 SO 的问题找到解决方案，但是在使用它们时我遇到了错误。如何制作这个 url：`/viewpost.php?postid=81`就像`/viewpost/81`在 url 中一样，这样当`/viewpost/81`输入时，它会显示的内容`/viewpost.php?postid=81`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:21:15.890

您必须捕获该数字并将该数字附加为查询字符串的一部分

```
RewriteRule ^viewpost/(\d+)$ /viewpost.php?postid=$1 [L] 
```

# sql-server - 在 SQL Server FOR XML 中选择没有列标题的 xml 行

> ID：16155624
> 
> 赞同：2
> 
> 时间：2013-04-22T19:59:09.290
> 
> 标签：sql-server, xpath, sql-server-2008-r2

在 SQL Server 2008 R2 中，我有一个包含有效 XML 节点行（一列，xml 类型）的表，如下所示：

```
create table #t (x xml not null);
insert into #t
values ('<service><value1>stuff</value1><value2>more stuff</value2></service>')
, ('<service><value1>I am a different row</value1><value2>more stuff</value2></service>'); 
```

我想将这些选择到一个 XML blob 中：

```
<services>
  <service>. . .</service>
  <service>. . .</service>
</services> 
```

我正在使用 FOR XML PATH 来尝试这个，但它将列标题“x”作为“服务”节点周围的节点嵌入。

```
select x
from #t
for XML PATH(''), ROOT('services') 
```

这会产生：

```
<services>
  <x><service>. . .</service></x>
  <x><service>. . .</service></x>
</services> 
```

我怎样才能摆脱“x”节点？

我尝试选择 x 作为“”并选择 x 作为“。” 但这些是保留字，查询错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:24:48.840

这个怎么样？

```
 select x.query('*')
 from   #t
 for xml path(''), root('services') 
```

# java - 无法通过localhost连接Mysql

> ID：16155625
> 
> 赞同：0
> 
> 时间：2013-04-22T19:59:14.990
> 
> 标签：java, mysql, bash, ubuntu, jdbc

我的 java prog 正在编译和执行

```
 mysqlCon = (Connection) DriverManager.getConnection("jdbc:mysql://10.129.70.44:3306/test", "root", "root"); 
```

但是当我输入

```
mysqlCon = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root"); 
```

它正在衰落

给出以下错误：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1121)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:355)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2479)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2516)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2301)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:222)
    at just.main(just.java:17)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at java.net.Socket.connect(Socket.java:495)
    at java.net.Socket.<init>(Socket.java:392)
    at java.net.Socket.<init>(Socket.java:235)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:305)
    ... 15 more 
```

同样，当我在 Ubuntu 12.04 终端中执行 **$mysql -hlocalhost -u root -p**时，它连接到 mysql>

但是当我输入**$telnet localhost 3306**时，我收到以下错误：

```
Trying 127.0.0.1...
telnet: Unable to connect to remote host: Connection refused 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:08:16.513

您需要从 localhost 授予所有 root 权限。

`GRANT ALL ON *.* TO 'root'@'localhost'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:14:04.590

您是否尝试过 127.0.0.1 而不是 Localhost？

附注：如果您有任何 mysql 客户端，请先尝试那里。可能您可以先尝试从命令提示符连接。如果它有效，那么你可以使用它。

# haskell - lambdabot 建议加入，但它不起作用

> ID：16155629
> 
> 赞同：4
> 
> 时间：2013-04-22T19:59:23.783
> 
> 标签：haskell, join, monads, higher-order-functions, lambdabot

这是一个将参数应用于给定函数两次的高阶函数：

```
dapp :: (a -> a -> a) -> a -> a
dapp = \f x -> f x x

ghci> dapp (*) 5
25 
```

我们可以缩短它吗？让我们问一下 lambdabot：

```
lambdabot> @pl \f x -> f x x
join 
```

万岁！让我们试一试：

```
import Control.Monad (join)

dapp :: (a -> a -> a) -> a -> a
dapp = join 
```

但它不起作用:(

```
No instance for (Monad ((->) a))
  arising from a use of `join'
Possible fix: add an instance declaration for (Monad ((->) a))
In the expression: join
In an equation for `dapp': dapp = join 
```

为什么会这样？我进口错了`join`吗？`join`我在 Hoogle 上找不到另一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T22:04:18.790

[直到](http://www.haskell.org/haskellwiki/Orphan_instance)[最近](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Monad-Instances.html)，`Functor`和的`Monad`实例`(->) r`都是.`Control.Monad.Instances`

但是，从`base-4.6.0.0`(GHC 7.6.1) 开始，这些实例已移至 Prelude 并且（现在为空）`Control.Monad.Instances` [已弃用](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Control-Monad-Instances.html)。

因此，要使用这些实例，请导入`Control.Monad.Instances`或升级您的 GHC。

# linux - Nagios 中长时间运行的服务检查

> ID：16155631
> 
> 赞同：0
> 
> 时间：2013-04-22T19:59:32.867
> 
> 标签：linux, nagios

我在 Nagios Exchange 站点上找到了一项服务检查，它适用于小型目录，但不适用于需要超过 30 或 60 秒才能完成的大型目录。

[http://exchange.nagios.org/directory/Plugins/Uncategorized/Operating-Systems/Linux/CheckDirSize/details](http://exchange.nagios.org/directory/Plugins/Uncategorized/Operating-Systems/Linux/CheckDirSize/details)

我遇到的问题是我需要配置一个服务检查，Nagios 可以每天运行一次，但会保持打开 1440 分钟（一天）。目录列表很大，需要很多小时才能完成（最多 20 小时）。

这是我的服务检查（每天检查，使用 nrpe 时，超时为 86400 秒，也是一天）。但是由于某种原因，即使我可以看到 du -sk 在 ps -ef | 的命令行上运行 grep du，Nagios 报告“（服务检查超时）”：

```
define service {
    use                             generic-service,srv-pnp
    host_name                       IMAGEServer1
    service_description             Images
    check_command                   check_nrpe!check_dirsize -t 86400
    check_interval                  1440
    } 
```

在我的 linux 服务器上的 nrpe.cfg 文件中，我也有这两个指令：

```
command_timeout=86400
connection_timeout=86400 
```

如何让 Nagios 完成检查而不超时？我的印象是我上面的指令是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T01:04:02.117

超时的是`check_nrpe`本地的命令（默认超时为 2 分钟）。您可以编辑其命令定义以使用长超时。

或者，您可能希望将此作为对 IMAGEServer1 的被动检查，作为 cron 作业运行。

# visual-studio-2012 - 如何使用 MsDeploy 为 iisApp Provider 设置部署路径？

> ID：16155632
> 
> 赞同：3
> 
> 时间：2013-04-22T19:59:37.943
> 
> 标签：visual-studio-2012, msbuild, msdeploy

我正在为我的 Web 应用程序创建 Web 部署包 zip 文件

我发现我可以通过在我的站点打包过程中包含一个 pubxml 并在构建过程中使用 PublishProfile 属性来指定该配置文件来指定应用程序的站点名称。

pubxml 包含`<DeployIisAppPath>WebSiteName</DeployIisAppPath>`在其中并创建站点名称，如 IIS 管理屏幕中所示。

当网站部署到尚未安装此应用程序的服务器时，我想指定网站磁盘上的位置。

我可以使用什么属性来执行此操作？我看到我可以使用 -replace 参数，如下所示：使用[msdeploy 创建包时为提供程序 iisApp 指定不同的路径，](https://stackoverflow.com/questions/6617373/specify-different-path-for-provider-iisapp-when-creating-package-with-msdeploy) 但我希望在我的 pubxml 中设置该值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:20:41.810

你有两个选择：

1.  选中“包括 IIS 设置...”复选框。当您执行此操作时，一个文本框将亮起，标题为“目标服务器上 Web 应用程序的物理路径”。使用为此生成的参数的值，您可以修改目标应用程序路径。
2.  您的另一个选择是直接使用 msdeploy.exe 并使用“apphostconfig”提供程序而不是 iisApp 提供程序重新创建包，然后参数化目标服务器上的应用程序路径。

# sql - sql中的“with [alias] as”是什么？

> ID：16155639
> 
> 赞同：2
> 
> 时间：2013-04-22T20:00:03.990
> 
> 标签：sql, sql-server, select

所以我在工作中遇到了以下内容，我可以立即知道它的**用途，**但我想找到它的任何文档并且在网上找不到任何东西！

```
with details as
(
    select *,
    row_number() over (order by CREATED_DATE) as [Row]
    from
    (
        select top 10 * from MyTable
    ) t
)
select *
from details
where [Row] > @lowLimit and [Row] < @highLimit 
```

这在我看来就像它的分页功能。但是，我不确切知道我在 sql 语法中查看的结构。有谁认识这种语法，你能指出我可以在哪里阅读更多关于它的信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T20:01:56.110

这是一个[常见的表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)。这些用作单个查询的临时结果集。以下查询将它们视为视图。你可以用它们做一些简洁的事情，比如递归！

以下是链接中对其功能的简要说明：

*   创建[递归](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)查询。
*   在不需要一般使用视图时替换视图；也就是说，您不必将定义存储在元数据中。
*   启用按从标量子选择派生的列或非确定性或具有外部访问权限的函数进行分组。
*   在同一语句中多次引用结果表。

关于分号，请查看[此](https://stackoverflow.com/questions/6938060/sql-server-common-table-expression-why-semicolon)答案以获得一个非常有用的提示 - 为什么您应该始终在 CTE 前加上分号。

# python - 搜索文件python

> ID：16155641
> 
> 赞同：2
> 
> 时间：2013-04-22T20:00:09.100
> 
> 标签：python

**使用此代码，我希望它搜索名称为 sh 的所有文件，例如 sh.c、sh.txt、sh.cpp 等。但是除非我编写lookfor=sh.txt**或**lookfor=sh.pdf**而不是，否则此代码不会搜索在下面的代码中**查找=sh 。**因此，我希望通过编写**lookfor=sh**来搜索所有名为 sh 的文件。请帮助。

```
import os
from os.path import join
lookfor = "sh"
for root, dirs, files in os.walk('C:\\'):
    if lookfor in files:
          print "found: %s" % join(root, lookfor)
          break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:08:06.813

尝试全局：

```
import glob
print glob.glob('sh.*') #this will give you all sh.* files in the current dir 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:05:54.730

代替：

```
if lookfor in files: 
```

和：

```
for filename in files:
    if filename.rsplit('.', 1)[0] == lookfor: 
```

* * *

什么`filename.rsplit('.', 1)[0]`是删除点后找到的文件的最右边部分（== 扩展名）。如果文件中有几个点，我们将其余的保留在文件名中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:07:12.860

线

```
if lookfor in files: 
```

表示如果列表`files`包含`lookfor`.

但是，您希望测试应该是找到的文件名以给定的字符串*开头*并以`.`.

此外，您希望确定真实的文件名。

所以你的代码应该是

```
import os
from os.path import join, splitext
lookfor = "sh"
found = None
for root, dirs, files in os.walk('C:\\'):
    for file in files: # test them one after the other
        if splitext(filename)[0] == lookfor:
            found = join(root, file)
            print "found: %s" % found
            break
    if found: break 
```

这甚至可以改进，因为我不喜欢打破外`for`循环的方式。

也许你想把它作为一个函数：

```
def look(lookfor, where):
    import os
    from os.path import join, splitext
    for root, dirs, files in os.walk(where):
        for file in files: # test them one after the other
            if splitext(filename)[0] == lookfor:
                found = join(root, file)
                return found

found = look("sh", "C:\\")
if found is not None:
    print "found: %s" % found 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:08:07.570

大概您想搜索以*sh*作为其*basename*的文件。（名称中不包括路径和扩展名的部分。）您可以使用模块中的`filter`函数来执行此操作。`fnmatch`

```
import os
from os.path import join
import fnmatch
lookfor = "sh.*"
for root, dirs, files in os.walk('C:\\'):
    for found in fnmatch.filter(files, lookfor):
        print "found: %s" % join(root, found) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T20:07:18.353

```
import os
from os.path import join
lookfor = "sh."
for root, dirs, files in os.walk('C:\\'):
    for filename in files: 
      if filename.startswith(lookfor):
           print "found: %s" % join(root, filename) 
```

您可能还想阅读 fnmatch 和 glob 的文档。

# .htaccess - htaccess 用于根页面/但不是子目录或子域

> ID：16155643
> 
> 赞同：0
> 
> 时间：2013-04-22T20:00:14.760
> 
> 标签：.htaccess, mod-rewrite

试图只为驻留在根目录中的页面重写 URL 字符串，删除页面扩展以用于装饰性原因。例如：

www.site.com/page.html ==> www.site.com/page www.site.com/about.html ==> www.site.com/about

当前使用此代码：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^([^.]+\.com) [NC]
RewriteRule (.*) http://www.%1/$1 [R=301,L] 
```

但是，我不希望规则修改子目录或子域。例如我也有：

clientA.site.com（映射到 www.site.com/clientA），我不需要保持不变。现在它正在将该页面 (client.site.com/index.html) 发送到未找到的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:30:42.163

您的规则不会影响子域。必须有其他规则导致`404`未找到响应。

如果您想限制对根页面的请求，您可以通过在请求 URL 路径中排除斜杠来使用适当的模式指定它

```
# exclude directories
RewriteCond %{REQUEST_FILENAME} !-d
# allow top level request URLs only
RewriteRule ^[^/]*$ http://www.%1/$0 [R,L] 
```

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

# iphone - iOS 应用内注册或电话订阅

> ID：16155645
> 
> 赞同：-1
> 
> 时间：2013-04-22T20:00:21.950
> 
> 标签：iphone, ios

我想显示一个电话号码，并且可以在我的应用程序上点击，用户可以在其中调用以订阅我的服务。

我知道 App Store 指南提到了使用外部浏览器，但没有提到任何关于“电话输入”订阅的内容。

有谁知道我的提议是否被允许？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:04:09.933

根据我的经验，Apple 的指导方针不是很灵活。他们做最后的决定，漏洞不是他们会宽容的。我会倾向于他们不允许你正在尝试的东西。我不会将其作为您应用程序的核心组件。

# jquery - 为什么我不能使用 JQuery 更改未排序列表中所有 li 元素的样式？

> ID：16155646
> 
> 赞同：0
> 
> 时间：2013-04-22T20:00:22.243
> 
> 标签：jquery, css, styles, padding

我尝试更改列表中每个项目的顶部填充，但它根本没有影响它们，我想在使用的浏览器是 Internet Explorer 时这样做。我尝试了以下方法：

```
if (navigator.userAgent.indexOf('.NET') !== -1) {
    $('#eventTicker li').css('padding-top', '10px');
} 
```

这是在 JQuery 中更改另一个元素内的元素样式的正确方法吗？如果是这样，为什么它不影响列表项？

这就是我的列表 HTML 的样子：

```
 <div id="eventTickerDiv">
            <ul id="eventTicker">
            </ul>
            <div id="hideTickerDiv"></div>
        </div> 
```

这是一个列表项的样子：

```
<li>Date - 2013/04/22, 16:58:32,<br/> Device - DEM002,<br/> Acceleration - 203.34,<br/> Intensity - 21</li> 
```

我尝试设置样式更改的功能如下：

```
function initializeEventTicker() {
    isTickerShown = true;
    //this animates the div that contains the list
    $('#eventTickerDiv').gx
        (
            {
                'height': '95%',
            },
            1000,

            'Linear',
            function (el) {

            }
        );
    if (navigator.userAgent.indexOf('.NET') !== -1) {
        $('#eventTicker li').css('padding-right', '10');
    }
    // this initiates an animation for the list to make it look like it's looping it's contents
    $('#eventTicker').totemticker({
        row_height: '160px',
        next: null,
        previous: null,
        stop: null,
        start: null,
        mousestop: true,
        speed: 800,
        interval : 2000
    });
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:27:51.097

也许您应该发布更多 HTML 或仔细检查您的 ID 名称。我使用了您提供的 ID 名称，并且使此功能正常工作……即使在 IE 中！

您编写的代码`$('#eventTicker li').css('padding-top', '10px');`看起来完全正确。

参见示例@：

# [JSFIDDLE](http://jsfiddle.net/SpYk3/Zvd3C/)

```
$("#selChange").on("change", function(e) {
    $('#eventTicker li').css('padding-top', $(this).val());
}); 
```

要仔细检查您的选择是否触发：

```
if (navigator.userAgent.indexOf('.NET') !== -1) {
    // $('#eventTicker li').css('padding-top', '10px'); change this line to:
    console.log("Get Li Length:\t", $('#eventTicker li').css('padding-top', '10px').length);
    // if you ever see a "0" in the console, then this select is missfiring
} 
```

## 如果这是一个“时间”问题：

```
//  Test if this is a timing issue by placing what's in your IF statement in a Timer, 
//    If it fires this way, then you know the issue is simple:
//      Your li's are not being added to DOM till AFTER the IF statement is fired, 
//      in which case you may want to rethink "where" you call the IF statement
if (navigator.userAgent.indexOf('.NET') !== -1) {
    setTimeout(function() { $('#eventTicker li').css('padding-top', '10px'); }, 2000);
    // This timer is set at 2 seconds (2000 in param there) and should give PLENTY of time to KNOW the LI's are Loaded in the DOM
    // If this works, for a temp solution (till you find better place for if statement)
    //    you could lower the time from 2000 to 100 and probably get same result without interference to your page as is
} 
```

# java - 如何更改 JTree 中的“根”目录名称？

> ID：16155649
> 
> 赞同：0
> 
> 时间：2013-04-22T20:00:28.560
> 
> 标签：java, swing, jtree

我有一个简单的 JTree 实现：

```
tree1 = new JTree(LibObj.collectionToStringArray(LibObj.books));
tree1.setRootVisible(true);
scrollPane2 = new JScrollPane(tree1);
scrollPane2.setPreferredSize(new Dimension(350, 300));
panel.add(scrollPane2); 
```

LibObj.collectionToStringArray(LibObj.books) 是另一个类中的一个方法，它接受一个集合并将其转换为字符串数组

一切都按预期显示，但根目录名为“Root”。如何更改名称？（我希望它被称为书籍）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:06:42.663

使用构造函数 JTree(TreeNode node) 将使您有机会创建自己的根节点。

像这样：

```
DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode("Root node name");
for( String book : booksArray ) {
    DefaultMutableTreeNode bookNode = new DefaultMutableTreeNode(book);
    rootNode.add(bookNode);
}

tree1 = new JTree(rootNode);
tree1.setRootVisible(true);
[...] 
```

# java - 将双精度数值转换为文本

> ID：16155650
> 
> 赞同：1
> 
> 时间：2013-04-22T20:00:29.373
> 
> 标签：java, string, double, joptionpane

在我的代码循环中的以下 if 语句中，如果给定的 oldsalary[i] 不符合这些准则，我想将 oldsalary[i] 的先前数值恢复为“错误”。但是我希望它保留为 oldsalary[i]，因为稍后我将在我的代码中显示所有 oldsalary[i]。

所以基本上当所有 oldsalary[i] 都显示在另一个循环中时，我希望能够看到“错误”，所以它知道该值有问题。

我知道我拥有它的方式是完全错误的，我只是这样说才有意义。对不起，如果它没有任何意义。

```
if(oldsalary[i] < 25000 || oldsalary[i] > 1000000){

      JOptionPane.showMessageDialog(null, userinput[i]+"'s salary is not within 
      necessary limit.\n Must be between $25,000 and $1,000,000\. \n If salary is 
      correct, empolyee is not eligible for a salary increase.");

      double oldsalary[i] = "Error";

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:05:52.253

您不能将数值*和*错误指示符存储在一个`double`值中。

最好的办法是将薪水包装为一个对象，该对象同时包含薪水值和指示错误条件的布尔值：

```
class Salary {
    private double value;
    private boolean error = false;
    ... constructor, getters and setters
} 
```

并更新您的代码以改用该对象。IE

```
if(oldsalary[i].getValue() < 25000 || oldsalary[i].getValue() > 1000000) {
    oldsalary[i].setError(true);
    ...
} 
```

所以以后你可以做

```
if (oldsalary[i].isError()) {
    // display error message
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:05:50.560

您可以使用一个额外的列表来存储未通过您的需求测试的索引。

```
List<Integer> invalidIndices = new ArrayList<>();
for (...){

if(oldsalary[i] < 25000 || oldsalary[i] > 1000000){

      JOptionPane.showMessageDialog(null, userinput[i]+"'s salary is not within 
      necessary limit.\n Must be between $25,000 and $1,000,000\. \n If salary is 
      correct, empolyee is not eligible for a salary increase.");

      invalidIndices.add(i);
}
} 
```

# sql - Oracle 没有返回昨天一小时的任何数据

> ID：16155653
> 
> 赞同：1
> 
> 时间：2013-04-22T20:00:35.063
> 
> 标签：sql, oracle

我有以下查询：

```
SELECT d_dtm,
       BTS_ID,
       CASE WHEN D_DTM = (D_DTM-24/24)
            THEN sum(V_ATT_CNT)
       END AS "LASTATT",

       sum(V_ATT_CNT) as "V_ATT_CNT",

       CASE WHEN D_DTM = D_DTM
            THEN sum(V_ATT_CNT)
       END AS "ATT"

 FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI

WHERE to_date(D_DTM, 'DD/MM/yyyy') >=
      (SELECT TO_DATE(max(D_DTM),'DD/MM/YYYY') 
         FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI)-2

GROUP BY d_dtm,
        BTS_ID

HAVING CASE WHEN D_DTM = (D_DTM-24/24)
           THEN sum(V_ATT_CNT)                
       END > 0 
```

但由于“有”子句，它没有返回任何结果。我知道它应该返回结果，因为我想要它做的只是在一列中有当前时间段的 V_ATT，而在第二列中，有 24 小时前的 V_ATT。我检查了数据，我应该得到结果，但似乎无法弄清楚为什么这不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T13:46:06.770

我使用 with 语句和两个查询重新编写了查询。工作得很快，给了我正确的结果。

```
 WITH FRST
        AS (  SELECT D_DTM,
                     BSM_NM,
                     SUM (V_ATT_CNT) AS "V_ATT_CNT",
                     SUM (V_CUST_BLK_CNT) AS "V_CUST_BLK_CNT",
                     SUM (V_DRP_CALL_CNT) AS "V_DRP_CALL_CNT",
                     SUM (D_ATT_CNT) AS "D_ATT_CNT",
                     SUM (D_CUST_BLK_CNT) AS "D_CUST_BLK_CNT",
                     SUM (D_DRP_CALL_CNT) AS "D_DRP_CALL_CNT"
                FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI
               WHERE D_DTM >=
                        (SELECT MAX (D_DTM) - NUMTODSINTERVAL (12, 'HOUR')
                           FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI)
            GROUP BY D_DTM, BSM_NM),
        LST
        AS (  SELECT D_DTM,
                     BSM_NM,
                     SUM (V_ATT_CNT) AS "V_ATT_CNT",
                     SUM (V_CUST_BLK_CNT) AS "V_CUST_BLK_CNT",
                     SUM (V_DRP_CALL_CNT) AS "V_DRP_CALL_CNT",
                     SUM (D_ATT_CNT) AS "D_ATT_CNT",
                     SUM (D_CUST_BLK_CNT) AS "D_CUST_BLK_CNT",
                     SUM (D_DRP_CALL_CNT) AS "D_DRP_CALL_CNT"
                FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI
               WHERE D_DTM >=
                        (SELECT MAX (D_DTM) - NUMTODSINTERVAL (48, 'HOUR')
                           FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI)
            GROUP BY D_DTM, BSM_NM),
        EVDOLST
        AS (  SELECT D_DTM,
                     BSM_NM,
                     SUM (ATT_CNT) AS "ATT_CNT",
                     SUM (CUST_BLK_CNT) AS "CUST_BLK_CNT",
                     SUM (DRP_CALL_CNT) AS "DRP_CALL_CNT"
                FROM DMSN.DS3R_FH_EVDO_FA_LVL_KPI
               WHERE D_DTM >=
                        (SELECT MAX (D_DTM) - NUMTODSINTERVAL (48, 'HOUR')
                           FROM DMSN.DS3R_FH_EVDO_FA_LVL_KPI)
            GROUP BY D_DTM, BSM_NM),
        EVDOFRST
        AS (  SELECT D_DTM,
                     BSM_NM,
                     SUM (ATT_CNT) AS "ATT_CNT",
                     SUM (CUST_BLK_CNT) AS "CUST_BLK_CNT",
                     SUM (DRP_CALL_CNT) AS "DRP_CALL_CNT"
                FROM DMSN.DS3R_FH_EVDO_FA_LVL_KPI
               WHERE D_DTM >=
                        (SELECT MAX (D_DTM) - NUMTODSINTERVAL (12, 'HOUR')
                           FROM DMSN.DS3R_FH_EVDO_FA_LVL_KPI)
            GROUP BY D_DTM, BSM_NM)
   SELECT t1.D_DTM,
          t1.BSM_NM,
          t2.V_ATT_CNT AS "LASTV_ATTCNT",
          t2.V_CUST_BLK_CNT AS "LASTV_BLKCNT",
          t2.V_DRP_CALL_CNT AS "LASTV_DRPCNT",
          t1.V_ATT_CNT AS "V_ATT_CNT",
          t1.V_CUST_BLK_CNT AS "V_CUST_BLK_CNT",
          t1.V_DRP_CALL_CNT AS "V_DRP_CALL_CNT",
          t2.D_ATT_CNT AS "LASTD_ATTCNT",
          t2.D_CUST_BLK_CNT AS "LASTD_BLKCNT",
          t2.D_DRP_CALL_CNT AS "LASTD_DRPCNT",
          t1.D_ATT_CNT AS "D_ATT_CNT",
          t1.D_CUST_BLK_CNT AS "D_CUST_BLK_CNT",
          t1.D_DRP_CALL_CNT AS "D_DRP_CALL_CNT",
          t3.ATT_CNT AS "EVDO_ATTCNT",
          t3.CUST_BLK_CNT AS "EVDO_BLKCNT",
          t3.DRP_CALL_CNT AS "EVDO_DRPCNT",
          t4.ATT_CNT AS "EVDO_LASTATTCNT",
          t4.CUST_BLK_CNT AS "EVDO_LASTBLKCNT",
          t4.DRP_CALL_CNT AS "EVDO_LASTDRPCNT"
     FROM FRST t1
          INNER JOIN LST t2
             ON     t1.BSM_NM = t2.BSM_NM
                AND t1.D_DTM - NUMTODSINTERVAL (24, 'HOUR') = t2.D_DTM
          LEFT OUTER JOIN EVDOLST t4
             ON     t1.BSM_NM = t4.BSM_NM
                AND t1.D_DTM - NUMTODSINTERVAL (24, 'HOUR') = t4.D_DTM
          LEFT OUTER JOIN EVDOFRST t3
             ON t1.BSM_NM = t3.BSM_NM AND t1.D_DTM = t3.D_DTM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:17:03.893

如果您对 D_DTM 进行小计（分组依据），则每个日期都会得到一行。*如果您想比较同一行*中的两个日期，您需要执行以下两项操作之一：子查询或像滞后/领先这样的窗口函数。

我想这就是你要找的：

```
SELECT d_dtm,
   BTS_ID,
   lag(sum(V_ATT_CNT), 1) over (partition by bts_id order by d_dtm) 
      AS "LASTATT",
   sum(V_ATT_CNT) as "V_ATT_CNT"

 FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI

  WHERE to_date(D_DTM, 'DD/MM/yyyy') >=
     (SELECT TO_DATE(max(D_DTM),'DD/MM/YYYY') 
         FROM DMSN.DS3R_FH_1XRTT_FA_LVL_KPI)-2

 GROUP BY d_dtm,
    BTS_ID 
```

请注意，`partition by`滞后/超过中的列是列的*子集*`group by`。

# javascript - JavaScript switch 语句 1-100

> ID：16155656
> 
> 赞同：1
> 
> 时间：2013-04-22T20:00:43.777
> 
> 标签：javascript, switch-statement

我正在尝试编写一个 JavaScript 开关，用户在其中输入一个 1-100 的数字，他们会根据该数字的范围收到一条消息。这是我到目前为止所写的。

我这样做是为了介绍编程课程，我不完全理解如何让它工作，我的问题是我不知道如何显示一个范围，即：1-25，

```
 <script>
    var number =  prompt("Enter 1-100");
    switch(number)
    {
    case 1-25:
      document.write("1-25");
      break;
    case 26-50;
      document.write("26-50");
      break;
    case 51-100:
      document.write("51-75");
      break;
    case "4":
      document.write("76-100");
      break;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T20:06:47.573

只是用一点数学来解决它可能是一种更好的方法：

```
var number  = prompt("Enter 1-100"),
    message = ['1-25', '26-50', '51-75', '76-100'];

document.write(message[Math.ceil(number/25)-1]) 
```

[**小提琴**](http://jsfiddle.net/RMZ7u/)

将返回的数字除以 25，四舍五入到最接近的整数，得到 1,2,3 ... 等，并且由于数组索引从零开始，因此减去 1。

**编辑：**

如果你***必须***做一个开关，你最好还是用一点数学，而不是写一百个`case`：

```
var number = prompt("Enter 1-100");
    number = Math.ceil(number / 25 );

switch(number) {
    case 1:
      document.write("1-25");
      break;
    case 2:
      document.write("26-50");
      break;
    case 3:
      document.write("51-75");
      break;
    case 4:
      document.write("76-100");
      break;
} 
```

[**小提琴**](http://jsfiddle.net/wWXNd/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T20:27:45.933

您可以像这样使用带有 switch 的条件：

```
var number = prompt("Enter 1-100");
switch (true) {
    case number >= 1 && number <= 25:
        alert("1-25");
        break;
    case number >= 26 && number <= 50:
        alert("26-50");
        break;
    case number >= 51 && number <= 75:
        alert("51-75");
        break;
    case number >= 76 && number <= 100:
        alert("76-100");
        break;
} 
```

[http://jsfiddle.net/dfsq/T3zJR/](http://jsfiddle.net/dfsq/T3zJR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:16:51.893

这是一种表格驱动的方法，允许您在表格中添加更多项目而无需编写更多代码。它还增加了范围检查。

```
<script>
    var breaks = [0, 25, 50, 75, 100];
    var number = parseInt(prompt("Enter 1-100"), 10);
    var inRange = false;
    if (number) {
        for (var i = 1; i < breaks.length; i++) {
            if (number <= breaks[i]) {
                document.write((breaks[i-1] + 1) + "-" + breaks[i]);
                inRange = true;
                break;
            }
        }
    }
    if (!inRange) {
        document.write("Number not in range 1-100");
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:27:19.523

您需要一个**值**来匹配一个案例，或者一个开关比 if elses 需要更长的时间......

您可以在切换之前获得范围-

```
var number = prompt("Enter 1-100", '');
var s= (function(){
    switch(Math.floor((--number)/25)){
        case 0: return "1-25";
        case 1: return "26-50";
        case 2: return "51-75";
        default: return "76-100";
    }
})();
alert(s); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T20:18:42.083

您不能在 switch 语句中使用范围。要检查一个值是否包含在一个范围内，您需要与下限和上限进行比较：

```
number = parseInt(number, 10);
if (number >= 1 && number <= 25)
    document.write("1-25");
else if (number >= 26 && number <= 50)
    document.write("26-50");
else if (number >= 51 && number <= 75)
    document.write("51-75");
else if (number >= 75 && number <= 100:
    document.write("76-100");
else
    document.write(number+" is not a valid number between 1 and 100"); 
```

当然，随着 if-else 数量的增加，您应该寻找替代方案。算法解决方案将是最简单的（除以 25 并四舍五入以找到包含该数字的 25 倍区间）：

```
number = parseInt(number, 10);
var range = Math.floor((number-1)/25);
if (range >= 0 && range < 4)
    document.write( (1+range*25) + "-" + (1+range)*25); 
```

如果您不能使用它（例如由于不稳定的间隔），那么在间隔边界数组上的 for 循环（甚至是二进制搜索）将是可行的方法（如 @jfriend00 所示）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T20:30:46.163

如果你想要 25 的简单范围，你可以这样做：

```
if (number < 1 || number > 100)
    document.write("out of range");
else {
    var low = Math.floor(number / 25) * 25 + 1;
    var high = low + 24;

    document.write(low + "-" + high);
} 
```

# c++ - 在模板类 C++ 中使用函数指针

> ID：16155662
> 
> 赞同：1
> 
> 时间：2013-04-22T20:01:06.273
> 
> 标签：c++, templates, c++11, function-pointers

我正在使用一个解析数据的模板类。每行数据都需要调用两个函数之一来处理数据。这个决定是在构造解析器时确定的，并且取决于传递给构造函数的变量。我认为为此使用函数指针会很有用，这样我就可以在构造函数中使用一个 if 语句并将正确的函数分配给将在程序主体中使用的函数指针。我遇到了一个我无法弄清楚的错误，我很好奇我是否在这种情况下正确使用了函数指针。

```
template<class T1, class T2>
class MyClass{
    protected:
        void (*pDoSomething)(std::string,std::string,std::string);
        void functionOne(std::string,std::string,std::string);
        void functionTwo(std::string,std::string,std::string);
    public:
        MyClass(bool option);
        void parseData();
};

templace<class T1, class T2>
MyClass<T1,T2,>::MyClass(bool option){
    if (option) pDoSomething = &functionOne;
    else pDoSomething = &functionTwo;
}

template<class T1, class T2>
void MyClass<T1,T2>::parseData(){
    /* . . . */
    while(dataToParse){
        *pDoSomething(string1, string2, string3);
    }
    /* . . . */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:06:36.560

像这样改变它：

```
template<class T1, class T2>
class MyClass
{
    typedef void (MyClass::*ptmf)(std::string, std::string, std::string);

    ptmf the_function;

    explicit MyClass(bool b)
    : the_function(b ? &MyClass::functionOne : &MyClass::functionTwo)
    { }

    void parse_data()
    {
        (this->*the_function)(s1, s2, s3);
    }

    // ...
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:14:47.693

该错误很可能来自使用函数指针指向成员函数。类中的函数和普通函数之间存在相当大的差异。您正在将类函数分配给普通函数指针。当您考虑所有成员函数都将隐藏`this`指针作为其第一个参数时，差异就出现了。

要么将函数更改为在类之外（或者如果函数不需要任何类的变量、基数或`this`指针，则使用静态函数）或将函数指针更改为类成员函数指针。指向接受字符串的 MyClass 函数的指针将如下所示。

```
void (MyClass::*fptr)(std::string str); 
```

因为类函数指针需要一个隐藏`this`指针，所以函数指针的调用也会发生变化。要调用 fptr 指向的函数，您可以使用`->*`or `.*`c++ 运算符。因此，要使用 MyClass 的指针调用它`this`，您可以这样做：

```
std::string aString;
(this->*fptr)(aString); 
```

我不完全确定，但也许可以用虚函数来做你希望做的事情？这可以通过拥有两个单独的类和一个指向两者之一的实例的指针来实现。这两个类都派生自一个具有纯虚函数的类，该纯虚函数与您在此处分配的函数相同。这是比使用函数指针更简洁的解决方案。我会对此进行研究，因为如果您使用函数指针寻找动态行为，您可能会发现它很有用。

这是一个关于函数指针基础的很好的教程：

[http://www.learncpp.com/cpp-tutorial/78-function-pointers/](http://www.learncpp.com/cpp-tutorial/78-function-pointers/)

# dependency-injection - 匕首编译中的意外键

> ID：16155667
> 
> 赞同：1
> 
> 时间：2013-04-22T20:01:14.200
> 
> 标签：dependency-injection, dagger

我从匕首收到以下错误：

```
[ERROR] error on execute: java.lang.IllegalArgumentException: Unexpected key: ca.nanometrics.apollo.instrument.configuration.ResourceOwnerController<> 
```

我相信这是因为我有一个没有可注入依赖项的类 - 它有一个空的公共构造函数（带有@Inject），也没有任何东西可以注入成员。我这样做是为了不必为它声明@Provides。请注意，带有@Inject 的类是上面错误消息中列出的类的子类：

```
public class ResourceOwnerControllerHelios extends ResourceOwnerController<ResourceOwnerFactoryHelios>
{

  @Inject
  public ResourceOwnerControllerHelios()
  {
    // do nothing
  } 
```

这是匕首中的错误，还是我遗漏了什么？

如果我删除 @Inject 并且仍然不将 @Provides 添加到模块中，它当然根本不起作用，因为 dagger 在所有依赖项上都需要 @Inject 或 @Provides。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:30:25.130

Oi - 这看起来像是碰到了对泛型的错误处理。:/ 也许在 github 上提出问题。您正在做的事情应该有效 - 即将 @Inject 添加到无参数公共构造函数中。我相信 Dagger 正在尝试爬上继承层次结构，而不是处理父级中的泛型。我们应该处理这个案子。

# php - Facebook Graph API 位置搜索类型

> ID：16155669
> 
> 赞同：0
> 
> 时间：2013-04-22T20:01:18.853
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

嗨，提前谢谢你，

我目前正在尝试在 PHP 中向 Facebook Graph Api 发送搜索请求，每次我向 API 发送请求时，它都会返回一个空数组。

[使用位于此处](https://developers.facebook.com/docs/reference/api/search/)的 facebook 开发人员页面上的示例将我的请求发送到 Graph Api

我的参数如下。Param ( [access_token] => "这是一个有效的访问令牌，我删除它以在论坛上发布。", [type] => location, [center] => 45.33,36.210, [distance] => 2000)

请求的路径如下：[https://graph.facebook.com/search](https://graph.facebook.com/search) 使用 Get 方法。

但我的结果总是一样的，它是一个空数组。

此功能是否已损坏，不在服务中，或者我是否以错误的格式发送 lat long。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:35:03.503

Facebook 对检索指定位置的帖子设置了限制。只有在以下情况下，您才能返回查询结果：

*   您或朋友撰写了该帖子
*   您或朋友在帖子中被标记。

有关更多详细信息，请参见此处：[https ://developers.facebook.com/docs/reference/fql/location_post/](https://developers.facebook.com/docs/reference/fql/location_post/)

# php - 为什么 url 中的双引号会转义到 php 中？

> ID：16155671
> 
> 赞同：0
> 
> 时间：2013-04-22T20:01:23.270
> 
> 标签：php, url

我正在获取 url `test.php?value=%22hello%22`，当我打印出它显示的值时，`\"hello\"`它`$_REQUEST['value'][0]`是`\`. 为什么？我该如何（正确地）解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:03:43.677

最可能的原因是您打开了[魔术引号。](http://php.net/manual/en/security.magicquotes.php)你应该：

*   升级到 PHP 5.4*或*
*   在您的 PHP 配置文件中[禁用它们](http://www.php.net/manual/en/security.magicquotes.disabling.php)*或*
*   在您的 Apache 配置中禁用它们（相同的链接）*或*
*   （最后的手段）测试它们是否已打开，然后运行[`stripslashes`](http://php.net/stripslashes)输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:27:30.890

如果你不能保证环境允许重新配置，你可以使用这个可重用的代码递归地挖掘 $_GET、$_POST 数组并用带斜杠清理它们：

```
class de_slasher {

    function recursive_stripslashes($a) {
        $b = array();
        foreach( $a as $k => $v ) {
            $k = stripslashes($k);
            if( is_array($v) ) {
                $b[$k] = $this->recursive_stripslashes($v);
            } else {
                $b[$k] = stripslashes($v);
            }
        }
        return($b);
    }

    function check_and_fix_magic_quotes( &$array ) {
        if( get_magic_quotes_gpc() ) {
            $array = $this->recursive_stripslashes( $array );
        }
    }

    function __construct( $auto = false ) {
        if( $auto === true ) {
            $this->check_and_fix_magic_quotes( $_POST );
            $this->check_and_fix_magic_quotes( $_GET );
        }
    }
} 
```

要使用，只需包含该类，并调用`$slasher = new de_slasher(true);`以自动清理 $_GET 和 $_POST。仅当魔术引号设置打开时才会发生这种情况。如果您在没有“true”参数的情况下实例化类，那么您可以选择性地深度过滤任何数组：

```
$my_array = array( "name" => "Herbert\'s Apple" );
$slasher = new de_slasher();
$slasher->check_and_fix_magic_quotes( $my_array ); 
```

# android - 在 Android 中的活动之间转移价值不起作用

> ID：16155680
> 
> 赞同：0
> 
> 时间：2013-04-22T20:01:50.013
> 
> 标签：android

我正在尝试通过温度转换生成一个有效的值，然后将此值传输到另一个活动中的空白文本框中，但代码似乎不起作用。这是两部分 - 它来自的一个和它需要去的一个......

```
public class MainActivity extends Activity {
  private EditText text;

       @Override
        public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);
        text = (EditText)findViewById(R.id.MainActivityText);

      final EditText et = (EditText) findViewById(R.id.MainActivityText);
      Button b = (Button) findViewById(R.id.Button01);
      b.setOnClickListener(new View.OnClickListener() {
          public void onClick(View view) {
              Intent myIntent = new Intent(view.getContext(), SecondScreen.class);
              startActivityForResult(myIntent, 0);

         Intent intent=new Intent(MainActivity.this, SecondScreen.class);
         intent.putExtra("value", et.getText().toString());
         startActivity(intent);
          }
      });
      }

      @SuppressLint("NewApi")
     public class SecondScreen extends Activity {

      /** Called when the activity is first created. */
       public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.secondscreen);

        TextView nameView=(TextView) findViewById(R.id.SecondScreenText);
        nameView.setText(getIntent().getExtras().getString("Value"));

        Button next = (Button) findViewById(R.id.Button02);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }

          });
      }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:04:18.757

一行中有一个错字：

```
nameView.setText(getIntent().getExtras().getString("Value")); 
```

更改`Value`为`value`

# operating-system - 多个堆栈和堆放在虚拟内存中的什么位置？

> ID：16155690
> 
> 赞同：6
> 
> 时间：2013-04-22T20:02:26.647
> 
> 标签：operating-system, heap-memory, virtual-memory, stack-memory

我正在编写一个内核并且需要（并且想要）将多个堆栈和堆放入虚拟内存中，但我无法弄清楚如何有效地放置它们。普通程序是如何做到的？

堆栈和堆是如何（或在哪里）放置到 32 位系统提供的有限虚拟内存中的，以便它们拥有尽可能多的增长空间？

例如，当一个普通程序加载到内存中时，其地址空间的布局可能如下所示：

```
[  Code  Data  BSS  Heap->  ...  <-Stack  ] 
```

在这种情况下，堆可以增长到虚拟内存允许的大小（例如，直到堆栈），我相信这就是堆对大多数程序的工作方式。没有预定义的上限。

许多程序都有共享库，它们放在虚拟地址空间的某个地方。然后是具有多个堆栈的多线程程序，每个线程一个堆栈。.NET 程序有[多个堆](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S1)，所有堆都必须能够以一种或另一种方式增长。

如果不对所有堆和堆栈的大小设置预定义限制，我只是看不出这是如何合理有效地完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T01:20:16.930

我假设你已经完成了内核中的基础知识，一个用于页面错误的陷阱处理程序，可以将虚拟内存页面映射到 RAM。再上一层，您需要一个虚拟内存地址空间管理器，用户模式代码可以从中请求地址空间。选择一个可以防止过多碎片的段粒度，64KB（16 页）是一个不错的数字。允许用户模式代码保留空间和提交空间。用于跟踪段状态的 4GB/64KB = 64K x 2 位的简单位图可以完成工作。页面错误陷阱处理程序还需要查阅此位图以了解页面请求是否有效。

堆栈是固定大小的 VM 分配，通常为 1 兆字节。一个线程通常只需要少数几页，具体取决于函数嵌套级别，因此保留 1MB 并仅提交前几页。当线程嵌套更深时，它将触发页面错误，内核可以简单地将额外的页面映射到 RAM 以允许线程继续。您需要将底部的几页标记为特殊页面，当这些页面出现错误时，您声明该网站的名称。

堆管理器最重要的工作是防止碎片。最好的方法是创建一个按大小对堆请求进行分区的后备列表。小于 8 字节的所有内容都来自第一个段列表。从第二个到 8 到 16，从第三个到 16 到 32，等等。随着你的上升，增加桶的大小。您必须使用存储桶大小来获得最佳平衡。非常大的分配直接来自 VM 地址管理器。

第一次命中后备列表中的条目时，您分配一个新的 VM 段。您使用链表将段细分为更小的块。当这样的分配被释放时，您将该块添加到空闲块列表中。无论程序请求如何，所有块都具有相同的大小，因此不会有任何碎片。当段被完全使用并且没有空闲块可用时，您分配一个新段。当一个段只包含空闲块时，您可以将其返回给 VM 管理器。

此方案允许您创建任意数量的堆栈和堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:12:58.173

简而言之，由于您的系统资源始终是有限的，因此您不可能无限。

内存管理总是由几个层组成，每个层都有其明确定义的职责。从程序的角度来看，应用程序级管理器是可见的，它通常只关心它自己的单个分配堆。如果需要，上一层可以处理从（它的）一个全局堆中创建多个堆并将它们分配给子程序（每个子程序都有自己的内存管理器）。高于它可能是它使用的标准`malloc()`/`free()`高于那些处理页面和每个进程的实际内存分配的操作系统（它基本上不仅关心多个堆，而且通常甚至不关心用户级堆）。

内存管理成本很高，陷入内核也是如此。将两者结合起来可能会对性能造成严重影响，因此从应用程序的角度来看，实际的堆管理实际上是在用户空间（C 运行时库）中实现的，以提高性能（以及其他暂时超出范围的原因） ）。

在加载共享（DLL）库时，如果它是在程序启动时加载的，那么它当然很可能会加载到 CODE/DATA/etc 中，因此不会发生堆碎片。另一方面，如果它是在运行时加载的，除了用完堆空间之外几乎没有其他机会。当然，静态库只是简单地链接到 CODE/DATA/BSS/etc 部分。

归根结底，您需要对堆和堆栈施加限制，以使它们不太可能溢出，但您可以分配其他的。如果一个人需要超过这个限制，你可以

*   错误终止应用程序
*   让内存管理器为该堆栈/堆分配/调整大小/移动内存块，然后很可能对堆（它自己的级别）进行碎片整理；这就是为什么`free()`通常表现不佳的原因。

考虑到一个相当大的，`call`平均每个 1KB 堆栈帧（如果应用程序开发人员没有经验，可能会发生），10MB 堆栈对于 10240 个嵌套`call`-s 就足够了。顺便说一句，除此之外，每个线程几乎不需要多个堆栈和堆。

# sql - AVG(DATEDIFF(d,Table1.date1,MIN(Table2.date1))) T-SQL

> ID：16155694
> 
> 赞同：0
> 
> 时间：2013-04-22T20:02:42.127
> 
> 标签：sql, tsql, aggregate-functions, average

我正在尝试创建一个报告以提供来自 SQL Server 数据库的数据。我有 3 张我感兴趣的表格，客户、推荐人、约会。客户可以有 1.* 推荐，推荐可以有 0.* 预约。

在我的报告中，我想显示从收到推荐到第一次约会的平均时间。

我在我的存储过程中尝试上述方法，但收到“无法对包含聚合或子查询的表达式执行聚合函数”。

有没有一种巧妙的方法可以在没有您能想到的子查询的情况下使其工作？

**编辑**下面的粗略表结构。

**客户** ClientID INT IIDENTITY (pk) Forename VARCHAR(50) Surname VARCHAR(50) DOB DATETIME

**Referral** ReferralID INT IDENTITY (pk) ClientID INT (fk) ReferralRequestReceivedDate DATETIME OrgaisationAreaId INT (fk)

**Appointment** AppintmentID INT IDENTITY (pk) ReferralId INT(fk) AppointmentDate DATETIME AttendanceTypeId INT (fk) AppointmentTypeID INT (fk)

**AttendanceTypes** AttendanceTypeID INT IDENTITY (pk) 名称 VARCHAR(50)

**AppointmentTypes** AppointmentTypeID INT IDENTITY (pk) 名称 VARCHAR(50)

**OrganisationArea** OrgaisationAreaId INT IDENTITY(pk) 名称 VARCHAR(50)

我现有的 proc 有按年龄和出勤类型出席的约会计数，如下所示......

```
SELECT OA.Name, 
COUNT(CASE WHEN AppointmentTypeId IN(1,3) 
               AND AppointmentDate BETWEEN '27 Jan 2013' AND '13 Apr 2013' 
               THEN AppointmentId END) AS AppsBooked,
AVG(DATEDIFF(d, ReferralRequestReceivedDate, MIN(A.AppointmentDate))) 
AS AvgAllocationWaitTime

FROM OrganisationAreas OA
LEFT OUTER JOIN Clients C
    ON OA.OrganisationAreaId = C.OrganisationAreaId
LEFT OUTER JOIN IaptReferrals R 
    ON C.ClientId = R.ClientId
LEFT OUTER JOIN IaptAppointments A
    ON R.IaptReferralId = A.Referral_IaptReferralId

GROUP BY OA.OrganisationAreaId, OA.Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:43:43.507

如果不使用子查询或 cte，我想不出办法。但如果你对子查询没问题，试试这个

```
SELECT OA.Name, 
COUNT(CASE WHEN 
            AppointmentTypeId IN(1,3) AND AppointmentDate BETWEEN '27 Jan 2013' AND '13 Apr 2013' THEN AppointmentId 
      END) AS AppsBooked,
AVG(DATEDIFF(d, ReferralRequestReceivedDate, sq.MinAppointmentDate)) AS AvgAllocationWaitTime
FROM OrganisationAreas OA
LEFT OUTER JOIN
(
    SELECT  C.OrganisationAreaId, MIN(A.AppointmentDate) MinAppointmentDate 
    FROM IaptAppointments A
    LEFT OUTER JOIN IaptReferrals R ON R.IaptReferralId = A.Referral_IaptReferralId
    LEFT OUTER JOIN Clients C ON C.ClientId = R.ClientId 
    GROUP BY C.OrganisationAreaId
) sq ON sq.OrganisationAreaId = OA.OrganisationAreaId
GROUP BY OA.OrganisationAreaId, OA.Name 
```

或 cte 版本：

```
;WITH cte AS 
(
    SELECT C.OrganisationAreaId, MIN(A.AppointmentDate) MinAppointmentDate 
    FROM IaptAppointments A
    LEFT OUTER JOIN IaptReferrals R ON R.IaptReferralId = A.Referral_IaptReferralId
    LEFT OUTER JOIN Clients C ON C.ClientId = R.ClientId
    GROUP BY C.OrganisationAreaId
)
SELECT OA.Name, 
COUNT(CASE WHEN 
            AppointmentTypeId IN(1,3) AND AppointmentDate BETWEEN '27 Jan 2013' AND '13 Apr 2013' THEN AppointmentId 
      END) AS AppsBooked,
AVG(DATEDIFF(d, ReferralRequestReceivedDate, cte.MinAppointmentDate)) AS AvgAllocationWaitTime
FROM OrganisationAreas OA
LEFT OUTER JOIN cte ON cte.OrganisationAreaId = OA.OrganisationAreaId
GROUP BY OA.OrganisationAreaId, OA.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:58:16.950

你有这个：

```
SELECT OA.Name, 
COUNT(CASE WHEN AppointmentTypeId IN(1,3) 
               AND AppointmentDate BETWEEN '27 Jan 2013' AND '13 Apr 2013' 
               THEN AppointmentId END) AS AppsBooked,
AVG(DATEDIFF(d, ReferralRequestReceivedDate, MIN(A.AppointmentDate))) 
AS AvgAllocationWaitTime

FROM OrganisationAreas OA
LEFT OUTER JOIN Clients C
    ON OA.OrganisationAreaId = C.OrganisationAreaId
LEFT OUTER JOIN IaptReferrals R 
    ON C.ClientId = R.ClientId
LEFT OUTER JOIN IaptAppointments A
    ON R.IaptReferralId = A.Referral_IaptReferralId

GROUP BY OA.OrganisationAreaId, OA.Name 
```

让我们看看如何改进它。首先，如果您想要推荐日期和第一次约会之间的平均时间，您需要内部联接，而不是外部联接。其次，您有一个没有 else 条件的 case 构造。第三，您对已预订的约会有所了解，这似乎无关紧要。最后，您收到错误语法的错误消息。

要修复最后一个错误，请将最小约会日期移至子查询。这将使您的查询如下所示：

```
select oa.name
, avg(datediff(d, ReferralRequestReceivedDate, MinAppointmentDate)) 
AvgAllocationWaitTime

from OrganisationAreas oa 
JOIN Clients C
    ON OA.OrganisationAreaId = C.OrganisationAreaId
JOIN IaptReferrals R 
    ON C.ClientId = R.ClientId
join (
select referral_iaptReferralId refid
, min(appointmentdate) MinAppointmentDate
from IaptAppointments
where clause goes here
group by referral_iaptReferralId
) temp on refid = r.iaptReferralId

where clause goes here 
```

保持这个基本结构。如果您还想要约会计数，请尽量保持简单。

# c++ - c++ 通过引用传递 const 值

> ID：16155699
> 
> 赞同：1
> 
> 时间：2013-04-22T20:02:50.737
> 
> 标签：c++, stl, constants

我在课堂上有这样的方法。

```
 Word Sentence::parse_word(std::string &word) {
 } 
```

一切正常。经过一番考虑，我得出的结论是不好。因为在这个方法里面，`std::string word`没有改变。
所以最好通过它，`const std::string &word`以使该方法的使用更加明显和清晰。

此外，拥有这种签名的方法我不可能像这样称呼它`parse_word(string("some_text))`-

所以我决定将签名更改为：

```
Word Sentence::parse_word( const string &word) {
    string::iterator iter1= word.begin();
    iter1=find( word.begin(),word.end(),'/');
      /*some other code */
  } 
```

即，我不会在此方法中更改该字符串。
我知道我在这里使用像 find 这样的方法来接受非恒定值，但最好将字符串作为 const 传递！

并且因为它被怀疑它不能被编译： ![在此处输入图像描述](https://i.stack.imgur.com/Gozvu.png)

我想知道，我尝试做的一切都好吗？
以及如何将 const 字符串转换为字符串？（我尝试使用 C 风格的强制转换或 const_cast - 没有成功）。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T20:04:05.717

您应该使用 a`const_iterator`而不是`iterator`，因为您是`begin()`通过对 的引用来调用的`const`：

```
string::const_iterator iter1 = word.begin();
//      ^^^^^^ 
```

与标准容器的接口一致，[`std::string`定义了`begin()`成员函数](http://en.cppreference.com/w/cpp/string/basic_string/begin)的两个重载：一个返回 a 的非`const`限定函数`std::string::iterator`和一个返回 a 的`const`限定函数`const_iterator`。

由于您`begin()`通过对 的引用进行调用`const`，因此选择了返回 a 的后一个重载`const_iterator`（非`const`一个显然不可行）。

这就是为什么编译器会拒绝编译上面的例子。在 C++11 中，您可以通过使用来避免这种麻烦`auto`：

```
auto iter1 = word.begin(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T20:04:59.313

如果您将 a`const string`或引用传递给`const string`，则需要使用 a `const_iterator`：

```
string::const_iterator iter1= word.begin(); 
```

# macos - OSX 上独立应用程序的 Web 服务器

> ID：16155702
> 
> 赞同：0
> 
> 时间：2013-04-22T20:02:55.590
> 
> 标签：macos, web-applications, web

我正在开发一个用于分析大型数据集（音频文件、模式匹配等）的应用程序。该软件必须作为独立应用程序开箱即用，即无需任何互联网连接。这在 Java 中当然是可行的。

但是，Web 前端将使我们的生活变得更加轻松，因为我们必须显示大量包含图形的结构化表格。使用 html 很容易实现这一点。此外，html 比 JAVA GUI 组件灵活得多，即，允许以后适应。此外，对于内部使用，我们可以将软件作为服务器硬件上的普通 Web 应用程序运行——因此该软件更具可扩展性。因此，我正在考虑编写一个 Web 应用程序。

现在，我知道某些 Web 框架带有集成的独立 Web 服务器。例如，django 有一个集成的网络服务器用于开发/测试目的。但是，它不是多线程的。

你知道任何适合我用例的独立网络服务器（在 OSX 上运行）吗？他们应该在 localhost 上运行开箱即用的监听并提供 wsgi/fcgi。

捆绑例如预配置的 Apache 有多难？维护问题怎么办？

非常感谢您对此问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:08:32.623

OS X 自带 Apache[开箱即用](http://osxdaily.com/2012/09/02/start-apache-web-server-mac-os-x/)。这只是配置它的问题。

另一个选择是 Ruby on Rails，它很容易在 OS X 上安装，因为 Ruby 也预装了。

# c# - 寻找将 DotNetOpenAuth 与 WebAPI 结合使用的示例

> ID：16155704
> 
> 赞同：5
> 
> 时间：2013-04-22T20:03:04.557
> 
> 标签：c#, dotnetopenauth

我正在尝试保护我的 WebAPI 项目，并且想使用 DotNotOpenAuth，但我找不到任何高质量的示例或教程。我已经尝试在 GitHub 上获取 DNOA 源代码附带的示例，但似乎无法让它们正确运行。从头开始使用 DNOA 对 google/twitter/facebook 进行身份验证，这将是非常棒的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:19:14.957

DotNetOpenAuth 托管在 github 上。这意味着您不仅会找到示例，还会找到源代码和其他有趣的东西

[https://github.com/DotNetOpenAuth/DotNetOpenAuth](https://github.com/DotNetOpenAuth/DotNetOpenAuth)

在谈到示例和 Web API 时，只有一个示例项目：

OAuth2ProtectedWebApi [https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples/OpenIdProviderMvc](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples/OpenIdProviderMvc)

您还可以在那里找到 ASP.NET MVC 示例。它将很有用，因为 ASP.NET MVC 与 Web API 非常相似。

当您有更多问题时，作为您的答案和讨论的来源，请尝试考虑 DotNetOpenAuth 组：

[https://groups.google.com/forum/?fromgroups#!forum/dotnetopenid](https://groups.google.com/forum/?fromgroups#!forum/dotnetopenid)

# perl - 父母和@ISA有什么区别？

> ID：16155712
> 
> 赞同：3
> 
> 时间：2013-04-22T20:03:22.920
> 
> 标签：perl, inheritance

父母和@ISA都在做同样的工作，相应地使用父母和@ISA。

```
package Baz;
    use parent qw(Foo Bar); 
```

或者

```
package Baz;
    BEGIN 
    {
        require Foo;
        require Bar;
        push @ISA, qw(Foo Bar);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T20:10:37.023

`use parent`只是在一个语句中执行 a`require`并将包名称推送到的一种简洁方法。`@ISA`它发生在编译时，而不是`our @ISA = qw/ Foo Bar /`在运行时完成的简单操作，这意味着您只需对包名称进行一次编码，这可能会减少错误。如果包试图从同名包继承，它也会引发警告，这将是无用的，并且可能导致无限继承循环。

简而言之，`use parent`这是一种更简洁、更简单的方法来让一切都变得正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T20:11:05.467

[`parent`](http://search.cpan.org/perldoc?parent)是语法糖，用于设置包的`@ISA`变量并在编译时自动加载其超类。正如[`parent`文档](http://search.cpan.org/perldoc?parent)所述，OP 中的两个代码块之间没有功能差异。

# scala - 如何在 Scala 中计算泊松数

> ID：16155714
> 
> 赞同：0
> 
> 时间：2013-04-22T20:03:25.060
> 
> 标签：scala, statistics

没有标准库函数可以做到这一点。我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:48:23.110

Scala Breeze，[http:](http://www.scalanlp.org/) //www.scalanlp.org/ 在其 stats.distributions 包中有一个 Poisson 类。

```
case class Poisson(mean: Double)(implicit rand: RandBasis = Rand) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:03:25.060

我将[这个答案](https://stackoverflow.com/questions/280797/calculate-poisson-probability-percentage-in-python)翻译成 Scala：

```
def recursive_poisson_helper(m:Long, r:Long, p:Double, i:Long):Double = {
  if (r == i) {
    p
  } else {
    recursive_poisson_helper(m, r, (p * m) / (i + 1), i + 1)
  }
}

def efficient_poisson(m:Long, r:Long): Double = {
  val p = math.exp(-m)
  recursive_poisson_helper(m, r, p, 0)
} 
```

# alm - HP ALM 同步器 TFS 2010 映射工作项

> ID：16155724
> 
> 赞同：0
> 
> 时间：2013-04-22T20:04:16.007
> 
> 标签：alm

这个错误是什么意思...？？

EndpointParams：端点参数检查失败。原因：文件夹工作项验证失败。验证在适配器的 dat 文件夹中正确配置了文件夹工作项、名称字段和描述字段。

任何想法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T18:52:01.927

在 HP ALM Synchronizer 中，在链接配置的高级选项卡中，您应该能够设置端点参数。检查您是否为所有参数设置了一个值。[请参阅HP ALM Synchronizer 用户指南](http://update.external.hp.com/qualitycenter/qc110/sync/almsynchronizer/HP-ALM-Sync-UserGuide.pdf)
的第 75 页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T02:43:29.757

感谢您使用 HP ALM 同步器。要在需求同步时使用 TFS 和 ALM，有时您希望将层次结构复制到另一个端点。所以我们在 TFS 适配器上提供了文件夹同步。

要使用此功能，我们需要了解我们会将 TFS 中的工作项识别为 ALM 中的文件夹。例如，您可以将工作项“组”设置为文件夹。

编辑**HP ALM Synchronizer\adapters\dat\TFS\adapter.properties** 取消注释文件夹项目，指定要映射到文件夹的工作时间：tfs.adapter.folder.work.item=Group

指定您希望将此工作项的哪个属性映射到 ALM 文件夹名称和描述： **tfs.adapter.folder.field.name=Title**

**tfs.adapter.folder.field.description=描述**

并重启服务。

然后我们还需要将您想要同步的所有需求放在 TFS 中的“组”下（通过使用 TFS 中的链接功能）。

最后，您在 TFS 中的组将成为 ALM 中的文件夹，并且所有子项将保留 ALM 中的层次结构。

希望这有帮助。

# algorithm - 枚举所有偏序

> ID：16155726
> 
> 赞同：8
> 
> 时间：2013-04-22T20:04:20.723
> 
> 标签：algorithm, math, discrete-mathematics, poset

如何有效地枚举有限集上的所有偏序？

我想检查是否存在具有指定属性的部分订单。为了检查这一点，我将用蛮力枚举小型有限集上所有可能的偏序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T23:32:53.730

为了使您的项目实用，它们必须是非常小的有限集。

具有 n 个标记元素的标记后置集的数量是 Sloane 序列[A001035](http://oeis.org/A001035)，其值直到 n=18 是已知的：

```
0 1
1 1
2 3
3 19
4 219
5 4231
6 130023
7 6129859
8 431723379
9 44511042511
10 6611065248783
11 1396281677105899
12 414864951055853499
13 171850728381587059351
14 98484324257128207032183
15 77567171020440688353049939
16 83480529785490157813844256579
17 122152541250295322862941281269151
18 241939392597201176602897820148085023 
```

序列[A000112](http://oeis.org/A000112)是未标记的序列的数量；不出所料，这些数字较小，但仍迅速增长而遥不可及。他们似乎只知道 n=16；第[16]页是 4483130665195087。

Gunnar Brinkman 和 Brendan McKay 的论文中有一个算法，列在上面链接的 OEIS A000112 页面上的参考资料中。这项工作是在 2002 年完成的，使用了大约 200 个工作站，计算 4483130665195087 个大小为 16 的未标记数据集大约需要 30 个机器年（参考机器是 1 GHz Pentium III）。今天，它可以做得更快，但 p [17]的值大概要大两个十进制数量级。

# punbb - 将 PunBB 登录系统与我网站的其他部分集成

> ID：16155728
> 
> 赞同：0
> 
> 时间：2013-04-22T20:04:30.367
> 
> 标签：punbb

首先，我认为这是可能的，如果我错了，请纠正我。我现在在我的网站上有一个简单的登录/注册系统，但是在安装 PunBB 讨论板时决定删除它。我更喜欢PunBB的登录，所以我想知道是否可以通过PunBB登录到该站点。他们是这个的扩展吗？或者你知道任何有用的资源可以帮助我实现这个吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:05:45.520

毫无疑问，PunBB 使用某种 cookie 或哈希来确定用户是否登录。只需在您自己的页面中使用该 cookie 或哈希来确定当您不在 PunBB 页面时谁登录了。

可能有一个包含文件可以用于此目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:09:59.887

有关在您网站的其他部分实现 PunBB 功能的信息以及数据库架构的详细信息，请参阅[此页面。](http://punbb.informer.com/docs/dev.html#integration)

# apache - 将网站配置为私有且页面为公共

> ID：16155730
> 
> 赞同：0
> 
> 时间：2013-04-22T20:04:46.820
> 
> 标签：apache

我在驻留在公共 IP 中的 Web 服务器中使用 Apache。我希望能够限制整个站点对本地网络的访问，但一个文件除外。
例如：

```
<Directory "/var/www/mysite">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order Deny,Allow
    Deny from all
    Allow from 192.168.1.1/24
</Directory> 
```

将仅限该 IP 范围内的人访问我的网站。但是，文件*myfile.html*也位于该目录中，我希望它公开可见。也许：

```
<File "/var/www/mysite/myfile.html">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</File> 
```

所以我的问题是：标签是在`<File>`标签内部`<Directory>`还是在其他地方？即使*myfile.html*位于仅对一系列 IP 可见的目录中，它是否会公开可见？上面的配置看起来对吗？（我是 apache noob）有没有更好的方法（也许是防火墙）？

感谢您的意见。

# javascript - 从具有数组命名输入的表单中获取值数组

> ID：16155731
> 
> 赞同：0
> 
> 时间：2013-04-22T20:04:49.950
> 
> 标签：javascript, jquery, forms

我有一个在复杂产品页面上生成的表单，它有助于编辑产品及其变体。手动更改后，我必须从生成的表单中获取所有输入并将其放回原始输入中。

为了保持智能，如果不是简单的话，我想以“数组”样式命名所有生成的输入。提交表单后，有没有办法用 js/jquery 轻松“制作”一个关联的 javascript 数组？又名，我想要：

```
inputValues = { 
  546is_article_id_4644 : { public_price : 20.02, provider_price : 14.90},
  car_id_size : { name : { old: "Sizee", new: "Size" } }
} 
```

HTML + JS

```
<input type="text" name="f[article_id][public_price]"   class="f_in" value="20.02" />
<input type="text" name="f[article_id][provider_price]" class="f_in" value="14.99" />

<input type="hidden" name="f[car_id][name][old]" class="f_in" value="the old name" />
<input type="text"   name="f[car_id][name][new]" class="f_in" value="the new name" />
<a href="#" id="f_submit" />Test form</a>

$('#f_submit').click(function() {
  f_inputs = $(':input.f_in');
  // what to do ... ? 
}); 
```

# mysql - 当出现在多个类别中时，从 wordpress 获取帖子会返回相同的结果

> ID：16155732
> 
> 赞同：0
> 
> 时间：2013-04-22T20:04:50.940
> 
> 标签：mysql, wordpress, distinct

在网站的主页中，我需要返回博客的最后 3 篇文章，这些文章是用 wordpress 创建的。

我有这个代码：

```
SELECT p.post_title, p.post_date, p.post_content, wpr.object_id, dt_blog_terms.name,        dt_blog_terms.slug
FROM dt_blog_terms
INNER JOIN dt_blog_term_taxonomy ON dt_blog_terms.term_id = dt_blog_term_taxonomy.term_id
INNER JOIN dt_blog_term_relationships wpr ON wpr.term_taxonomy_id = dt_blog_term_taxonomy.term_taxonomy_id
 INNER JOIN dt_blog_posts p ON p.ID = wpr.object_id
 WHERE taxonomy = 'category'
 AND p.post_type = 'post'
 AND p.post_status = 'publish'
 AND slug != 'notizie-notifiche'
 ORDER BY `post_date` DESC
 LIMIT 3 
```

如您所见，我有一个要排除的分类（notizie-notifiche）。这个 sql 字符串有效，但是当帖子有多个类别时我会遇到问题。在这种情况下，每个类别都返回一次，而我只想显示一次。

任何想法？我以为我可以使用 DISTINCT，但它似乎不适用于这种 SELECT 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:40:58.010

我可以告诉你你需要做什么，但我不能修改查询来完成它。您在问题中使用了“类别”一词，但数据中没有该名称的字段。

您需要在所需级别聚合数据，然后包含一个`having`子句。以下`group by`可能会解决您的问题：

```
group by p.id
having sum(case when slug = 'notizie-notifiche' then 1 else 0 end) = 0 
```

# stable-marriage - 什么是稳定匹配？

> ID：16155739
> 
> 赞同：0
> 
> 时间：2013-04-22T20:05:18.280
> 
> 标签：stable-marriage

所以我的问题是指什么是“稳定匹配”？我知道稳定婚姻问题，所有解决方案似乎都表明您以“稳定匹配”结束。但我不确定这实际上意味着什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:07:17.270

我会盯着 wiki 中的[.gif 文件](http://en.wikipedia.org/wiki/File%3aGale-Shapley.gif)，因为它实际上是对机制的一个很好的解释。

在稳定匹配中，我们保证将两组（男人和女人、儿童和玩具、人和度假胜地等）中的所有元素与另一组中的元素放在一对中，并且该对是“最佳可用匹配”

我们确定什么是“最佳可用匹配”的方式是假设集合中的每个元素都对他们对相反集合元素的偏好进行了排名。目标是满足每个人的喜好。坚持婚姻问题，想象每个男人都有一个女性排名，每个女人都有一个男性排名。目标是将它们匹配在一起，以确保每个人都尽可能获得名单上最高的人。

请记住，这需要几个步骤（或回合）才能自行解决。在婚姻的例子中要记住的另一件事是每一方只能做一件事。所以在我们的例子中，女性接受，男性提议。此外，该提案不具有约束力。这意味着如果在第一轮中，一个女人从她最想要的第二个男人那里得到一个提议，而在下一轮她从她的第一名男人那里得到一个提议，她可以拒绝第二个并接受第一个。wiki说得比我好...

> 算法完成后，Alice 和 Bob 不可能比他们当前的合作伙伴更喜欢对方。如果 Bob 更喜欢 Alice 而不是他现在的搭档，那么他一定是在向现在的搭档求婚之前向 Alice 求婚的。如果爱丽丝接受了他的求婚，但最终没有嫁给他，那么她一定是为了一个她更喜欢的人抛弃了他，因此她并不喜欢鲍勃而不是她现在的伴侣。如果爱丽丝拒绝了他的提议，那么她已经和比鲍勃更喜欢的人在一起了。

基本上，没有人会在婚姻中受到影响，因为在有限的选择范围内，这对是对彼此的最高偏好。

# javascript - 以数字方式对主干中的集合进行排序

> ID：16155744
> 
> 赞同：0
> 
> 时间：2013-04-22T20:05:38.197
> 
> 标签：javascript, sorting, backbone.js

所以我正在对这样的项目进行排序：

```
sorted_items = new Backbone.Collection items.sortBy((item) ->
  return item.get("position")
) 
```

其中 items 已经是一个集合。但我希望 sorted_items 按字段位置排序，字段位置可以是 1-1000 之间的数字。我知道主干按字母顺序排序，所以现在它的排序如下：1、10、11、12、13、14、15、16、17、18、19、2、20...等

而不是 1, 2, 3, 4... 等

现在有没有一种简单的方法可以做到这一点，还是我必须在每个位置之前都贴零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:09:40.663

听起来位置正在返回一个字符串。您可以更改数据源以将位置设为整数或在排序函数中使用 parseInt：

```
return parseInt(item.get("position"), 10) 
```

# php - PHP将下拉值保存到mysql

> ID：16155754
> 
> 赞同：0
> 
> 时间：2013-04-22T20:06:00.680
> 
> 标签：php, html, mysql, forms

首先让我说，我是新手，我的代码对于那些知道自己在做什么的人来说可能是可笑的......

我正在尝试从我的 mysql 数据库中检索数据并在匹配的下拉列表中显示信息。我有这部分使用一些丑陋的基本代码。

```
$url = $_SERVER["REQUEST_URI"];
$url_path = parse_url($url, PHP_URL_PATH);
$devid = pathinfo($url_path, PATHINFO_BASENAME);

$con = mysqli_connect("localhost","xxxxxx","xxxxxx","xxxxxxxx");
  //Run a query
  $result = mysqli_query($con,"SELECT type FROM `xxxxx`.`xxxxxx` WHERE device_id='$devid'");

$pulldown1 = '<select name="extension_type">';

while($row = mysqli_fetch_array($result))
{
if($row['type'] == "Unlimited")
{
$pulldown1 .= "<option selected value=\"Unlimited\">Unlimited Extension</option>
<option value=\"Metered\">Metered Extension</option>
<option value=\"Virtual\">Virtual Extension</option>
\n";
}
if($row['type'] == "Metered"){
$pulldown1 .= "<option selected value=\"Metered\">Metered Extension</option>
<option value=\"Unlimited\">Unlimited Extension</option>
<option value=\"Virtual\">Virtual Extension</option>
\n";
}
if($row['type'] == "Virtual"){
$pulldown1 .= "<option selected value=\"Virtual\">Virtual Extension</option>
<option value=\"Unlimited\">Unlimited Extension</option>
<option value=\"Metered\">Metered Extension</option>
\n";
}

}
$pulldown1 .= '</select>';

echo $pulldown1;

mysqli_close($con); 
```

现在我希望能够更改值并让它保存相应的值并更新数据库中的该列。这就是我卡住的地方。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:14:27.203

当Select Box具有更改其值时，您可以使用jQuery发送AJAX POST请求。反过来，这可以更新您的 mysql 数据库条目。如果这是您想要的事情，请告诉我，我将通过代码示例进一步扩展我的答案。

JS 代码示例

```
$("select").change(function () {
    // Send ajax request
    $.ajax
    ({
       type: "POST",
       url: "/change-value.php",
       dataType: 'json',
       data: { location: $(this).val() },
       cache: false,
       success: function(data)
       {
       }
    });

}); 
```

// PHP change-value.php 示例

```
<?php

// Get the changed value
$value = $_POST['value'];

// Code to update you mysql database entry would go here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:25:16.043

从 php.net 上的 PHP 文档修改：

```
<?php
if ( !empty($_POST['extension_type']) )
{
   // Your MySQL connection code should be at the top of the script.
   $query = "UPDATE `xxxxx` SET `extension_type` = ? WHERE `[your_id_field_here]` = ?";
   /* Prepared statement, stage 1: prepare */
   if ( !($stmt = $mysqli->prepare($query) ) {
       echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
   }
   /* Prepared statement, stage 2: bind and execute */
   if ( !$stmt->bind_param("s", $_POST['extension_type']) || !$stmt->bind_param("i", intval($id)) ) {
       echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
   }
   if ( !$stmt->execute() ) {
       echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
   }
}
?> 
```

正如@Simon Carlson 所指出的，您还需要考虑 SQL 注入。如果您有一组扩展类型列表，您可以通过检查 $_POST 值与已知有效值来改进上面的代码。

# javascript - Treeview 升级到 KendoUI 2013.1.319 后抛出异常

> ID：16155760
> 
> 赞同：0
> 
> 时间：2013-04-22T20:06:35.677
> 
> 标签：javascript, kendo-ui, kendo-treeview, kendo-asp.net-mvc

升级到最新版本的 KendoUI 后，我遇到了 KendoUI Treeview 的问题。

示例代码：

```
<script type="text/javascript">
var node1, node2;
function onSelect(e) {
    node1 = e.node;
    addViews();
}

function addViews() {
if (node1 != null) {
   var treeview1 = $("#TreeAvailable").data("kendoTreeView");
   var treeview2 = $("#TreeSelected").data("kendoTreeView");
   treeview1.remove(node1);      // *JavaScript Error as soon I remove the node*
}
} 
```

在 kendo.web.min.js 中调用*treeview1.remove(node1)*后，我收到 JavaScript 错误“无法获取未定义或空引用的属性‘集’” 。

调试器停止在：

```
return arguments.length?(n=e(n,r).closest(P),r.find(".k-state-selected").each
(function(){vare=i.dataItem(this);e.set("selected",!1),delete e.selected}) 
```

最新版本的 KendoUI 发生了哪些变化？我该如何解决？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:02:17.477

问题是您正在尝试删除正在选择的节点。删除节点后，KendoUI 仍会继续执行操作并尝试选择您删除的节点（它不再存在）。

您应该调用`preventDefault`如下：

```
function onSelect(e) {
    node1 = e.node;
    addViews();
    e.preventDefault();
} 
```

不要让KendoUI做事。

# java - java - 如何在java中查找链表中元素的索引之一是否为零

> ID：16155764
> 
> 赞同：1
> 
> 时间：2013-04-22T20:06:45.987
> 
> 标签：java, linked-list

我有一个链接列表。一个项目可能位于该列表的多个索引处（例如索引 0、索引 3 和索引 5）。如何查找这些索引之一是否为索引 0；我需要它，因为我使用一些公式来计算一些值，如果项目的一个位置是索引 0，则公式是不同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T20:08:22.813

您可以检查第一个元素是您想要的对象

```
if (list != null && list.size() > 0 && list.get(0).equals(element)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T20:07:59.830

您可以使用`get`列表上的`equals`方法和项目上的方法

```
list.get(0).equals(myItem); 
```

通常你不想`get(int)`在 a上使用，`LinkedList`因为它是一个 order n 遍历。但索引 0 将始终位于最前面，并且是一个非常短的遍历。:)

# c# - Microsoft Ajax 工具包参考

> ID：16155769
> 
> 赞同：2
> 
> 时间：2013-04-22T20:06:52.563
> 
> 标签：c#, asp.net, visual-studio-2010

我下载并安装了 Microsoft 提供的 Ajax Toolkit 到我的 Visual Studio 副本中。我正在尝试遵循使用控件的在线示例，但遇到了以下差异。我已经安装了工具包，可以通过工具箱访问它。我添加了对这个特定项目的引用 ![在此处输入图像描述](https://i.stack.imgur.com/V6oJy.png)

但是当我从工具包中拖放 AutoCompleteExtender 控件时，我看到了一些不同的 ASP。我看到类似的东西

```
<asp:AutoCompleteExtender> 
```

但是我看到的所有示例都显示了类似的语法，`<ajaxToolkit:AutoCompleteExtender>` 但是当我尝试使用该语法时，我收到警告“无法识别的标记前缀或设备过滤器“ajaxToolkit”。
证明 ToolKit 已安装

![在此处输入图像描述](https://i.stack.imgur.com/iDLqy.png)

这里有什么不同？Intellisense 无法识别 ajaxToolkit 标记，即使在为 AjaxToolkit 命名空间中的所有内容添加 using 语句后，我仍然会收到无法识别标记的警告消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:31:44.147

标签名称的这一部分是前缀，您（或库）将其设置在您放置控件的页面上，或者在 web.config 上作为全局设置。

在页面顶部，但在第一个声明行的下方：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" 
    TagPrefix="ajaxToolkit" %> 
```

使其成为全球性的`web.config`并且不需要在每个页面上添加它：

```
<pages >
  <controls>
    <add namespace="AjaxControlToolkit" assembly="AjaxControlToolkit" tagPrefix="ajaxToolkit" />
  </controls>
</pages> 
```

如果您在这两个示例中看到我已将您在示例中看到的那个设置为 TagPrefix。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:31:00.230

您所遵循的示例可能是在 Ajax Toolkit 不是 ASP.NET 的一部分时编写的，因此您必须手动将引用添加到您的项目中（在 web.config 中），并且通常它们是以您的方式添加的'd 使用以 You 开头的标签，`<ajaxToolkit:`可以将其更改为任何类型的前缀。

现在它是 ASP.NET 的一部分，您不需要创建单独的引用（它可能是自动添加的），因此它们使用了普通的`<asp:`标记前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T01:24:45.453

您可能在 ASP.net 安装中使用了错误版本的工具包。

我发现我必须确保我使用的是正确版本的 ASP.net。我试图在我的网站的 ASP.net 2 版本中使用 3.5 AjaxToolKit DLL。

我只是把这条线放在我的 ASPX 页面的顶部，从那以后就很好了。

```
<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
    Namespace="System.Web.UI" TagPrefix="asp" %> 
```

# jquery - 仅单击一次按钮（js）

> ID：16155775
> 
> 赞同：6
> 
> 时间：2013-04-22T20:07:19.673
> 
> 标签：jquery, onclick, click

我查看了 stackoverflow 和其他网站，但找不到我正在寻找的答案。

我有一个按钮，我希望用户只能点击一次。这是我的 javascript/jquery 触发点击事件。但是我怎样才能强制它只被点击一次呢？

```
 $(document).ready(function () {
     //var $new_total = $('#gtotal').val();

     $('#a_is_valid').click(function () {
         if ($('#code_promo').val() == 'theCode') {
             $('#gtotal').val($('#gtotal').val() - ($('#gtotal').val() - (($('#gtotal').val() * .75))));
         }
     })
 }) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T20:10:23.160

使用 jQuery 的[`.one()`](http://api.jquery.com/one/)功能。

```
$('#a_is_valid').one('click', function(){
    if ($('#code_promo').val() == 'theCode')
    {$('#gtotal').val($('#gtotal').val()-($('#gtotal').val()-(($('#gtotal').val()*.75))));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T20:10:10.907

你可以使用 jquery`[.one()](http://api.jquery.com/one/)` 这将确保点击事件只发生一次。

`[Demo](http://jsfiddle.net/qtEHE/)`

```
$('#a_is_valid').one('click', function(){

        if ($('#code_promo').val() == 'theCode')
        {
          var gtot = $('#gtotal').val();
          $('#gtotal').val(gtot -(gtot -(gtot *.75)));
        }
 }); 
```

另一种方法是使用`[on()](http://api.jquery.com/on/)`和`[off()](http://api.jquery.com/off/)`

```
$('#a_is_valid').on('click', handleClick);

function handleClick() {
    var gtot = $('#gtotal').val();
    $(this).off('click');
    if ($('#code_promo').val() == 'theCode') {
        $('#gtotal').val( gtot - (gtot-(gtot * 0.75)) );
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T20:10:37.653

为什么不使用[`.one()`](http://api.jquery.com/one/)代替`.click()`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-24T20:34:44.807

使用现代 JS！

```
const button = document.getElementById("a_is_valid");
button.addEventListener("click", function() {
    // Add one-time callback
}, {once : true}); 
```

您也可以禁用该按钮：

```
button.disabled = true; 
```

[文档](https://developers.google.com/web/updates/2016/10/addeventlistener-once),[可以使用](http://caniuse.com/#feat=once-event-listener)

# python - 使用 Twisted 的数据库代理

> ID：16155776
> 
> 赞同：1
> 
> 时间：2013-04-22T20:07:19.867
> 
> 标签：python, twisted

我完全新鲜和菜鸟，因为你可以在 Twisted 上。我选择了一个数据库代理作为我的最终项目。这个想法是，有一个 mysql 作为数据库。一个扭曲的代理在客户端和数据库之间运行。代理通过其 XMLRPC 向客户端发出 UPDATE、SELECT、INSERT 等方法。而且，代理中的方法本身会访问数据库并获取数据。而且，我也在考虑代理上的一些缓存机制。那么，有没有人对这个项目有所了解？chaching 如何在扭曲中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:21:22.363

当您使用 XML-RPC 时，您必须编写简单的 Twisted Web 应用程序来处理 XML-RPC 调用。缓存有很多可能性：过期、存储在磁盘上、失效等。你可以从简单的 dict 开始存储查询并发现它的局限性。

# objective-c - NSString 在源 NSMutableString 的“消隐”后不保持值

> ID：16155778
> 
> 赞同：0
> 
> 时间：2013-04-22T20:07:27.670
> 
> 标签：objective-c, c, nsstring, nsmutablestring

这是一个比实际问题更理论的问题；

假设我有两个字符串，一个是正常的，一个是可变的，如果我这样做：

```
NSMutableString *prova = [[NSMutableString alloc] init];
NSString *prova2 = [[NSString alloc] init];
[prova appendFormat:@"%@",@"CIAO"];
prova2 = prova;
NSLog(@"String: %@",prova);
NSLog(@"String2: %@",prova2);
[prova setString:@""];
NSLog(@"-String: %@",prova);
NSLog(@"-String2: %@",prova2); 
```

那么结果是：

```
2013-04-22 22:01:53.604 CodeTest[6974:303] String: CIAO
2013-04-22 22:01:53.605 CodeTest[6974:303] String2: CIAO
2013-04-22 22:01:53.605 CodeTest[6974:303] -String: 
2013-04-22 22:01:53.606 CodeTest[6974:303] -String2: 
```

为什么它会这样？我只是想找出答案，因为我以前在使用 python、php 或 C++ 编程时从未遇到过这样的事情（我想我从未遇到过像 Obj-c 中这么多不同的数据类型：P）

谢谢

以防万一有人想知道如何在这里克服它是我用来将值分配给字符串而不在“消隐”之后丢失它的正确代码（代替prova2 = prova）：

```
prova2 = [NSString stringWithString:prova]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:13:25.203

请记住，`NSString`和`NSMutableString`变量是指针。这意味着当您分配时，`prova2 = prova`您实际上正在更改`prova2`指向`prova`，并且您分配的值`prova2`丢失了。

因此，当您将空字符串分配给`prova`两个变量时，都指向`@""`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:14:06.283

```
prova2 = prova; 
```

这不会将字符串 in 的内容分配给`prova`字符串 in `prova2`，它只是`prova2`指向与 相同的对象`prova`，从而有效地泄漏了`prova2`曾经指向的字符串。所以即使`prova2`被声明为 a `NSString*`，它现在指向 a `NSMutableString`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:15:55.737

除了 Richard Brown 的出色回应之外，这就是您想要为期望的行为做的事情：

```
[prova2 setString: prova]; 
```

代替

```
prova2 = prova; 
```

# javascript - JQuery 命名空间/代码表现得很有趣

> ID：16155779
> 
> 赞同：0
> 
> 时间：2013-04-22T20:07:29.900
> 
> 标签：javascript, jquery

首先，[这是我的 jsfiddle](http://jsfiddle.net/7v8Xx/)。

我有两个点击监听器。一个在`Next`按钮上，一个在`Back`按钮上。按钮上的侦听`Back`器效果很好，但按钮上的侦听器效果不佳`Next`，尽管它们位于同一代码区域。

有问题的代码行是：

```
wizard.goTo($('#wizard-pages span[class="selected"]').next().index()); 
```

奇怪的是，如果我运行：

```
$('#wizard-pages span[class="selected"]').next().index(); 
```

我得到了正确的索引值。另外，如果我跑步，

```
wizard.goTo(x); 
```

（x 是任何数字）。我得到了正确的页面。

只有当它们结合在一起时，它才会起作用。

我也尝试过将参数设为变量，然后将其传递，但​​我得到了相同的结果。我还尝试将 ( `+1`) 添加到索引中，而不是`.next()`在它之前调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:10:00.027

这是一个更新的小提琴：http: [//jsfiddle.net/7v8Xx/1/](http://jsfiddle.net/7v8Xx/1/)

你在这条线上走得不够远：

```
wizard.goTo($('#wizard-pages span[class="selected"]').next().index()); 
```

将 1 添加到索引！

```
wizard.goTo($('#wizard-pages span[class="selected"]').next().index()+1); 
```

# sql - 在 SQL 中解析子字段

> ID：16155781
> 
> 赞同：0
> 
> 时间：2013-04-22T20:07:37.327
> 
> 标签：sql, oracle

我有下表

```
DRIVER_GID              DRIVER_REFNUM_QUAL_GID  

SDL2/C001.100000        SDL2.486900 CURRENT DISTRICT 
SDL2/C001.100000        SDL2.486900 PERMANENT DISTRICT 
SDL2/C001.100000000     SDL2.486900 CURRENT DISTRICT  
SDL2/C001.100000000     SDL2.486900 PERMANENT DISTRICT 
SDL2.600119036          SDL2.436001 CURRENT DISTRICT  
SDL2.600119036          SDL2.436001 PERMANENT DISTRICT 
```

我需要提取字符串“SDL2”之后的数值。来自 DRIVER_REFNUM_QUAL_GID 列。谁能推荐一个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:47:17.830

使用`regexp_substr`功能**`ORACLE`**：

```
select regexp_substr(DRIVER_REFNUM_QUAL_GID, '[[:digit:]]{6}') from YOURTABLE 
```

这将从您的表格的 DRIVER_REFNUM_QUAL_GID 列中提取相邻的 6 位数字。

如果您希望提取句点之后的所有数字，请使用以下代码：

```
select regexp_substr(DRIVER_REFNUM_QUAL_GID, '(\.)([[:digit:]]+)',1,1,'i',2) from YOURTABLE 
```

要消除`NULLS`，可以使用`NVL`函数。

例如，

```
select NVL(regexp_substr(DRIVER_REFNUM_QUAL_GID, '(\.)([[:digit:]]+)',1,1,'i',2),999999) from YOURTABLE 
```

所以，如果`regexp_substr`函数`NULL`的结果是 ，结果就是`999999`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:23:15.083

考虑到您只需要数字，`SDL2.`并且考虑到位数最多可以达到 20 位，您可以使用类似的东西 -

`select REGEXP_SUBSTR('SDL2.486900 CURRENT DISTRICT', '[[:digit:]]{2,20}') numval from dual;`

您可以编辑号码`20`以满足您的需要。

所以它看起来像 -

`select REGEXP_SUBSTR(DRIVER_REFNUM_QUAL_GID,'[[:digit:]]{2,20}') from your_table;`

# c++ - 如何解决由于将 .lib 文件添加到 Visual Studio 中的 C++ 项目而导致的 LINK 错误？

> ID：16155783
> 
> 赞同：0
> 
> 时间：2013-04-22T20:07:40.667
> 
> 标签：c++, c

我用 Visual Studio Pro 2012 创建了一个新的 c++ 项目。

我尝试添加 C 语言`1ib`文件，但出现一些**LINK**错误，例如：

`Error 2 error LNK2019: unresolved external symbol _av_malloc@4 referenced in function _video_encode_example@4 D:\C-Sharp\C++ Compiling\ConsoleApplication7\ConsoleApplication7\example.obj ConsoleApplication7`

就我而言，我去了**“项目名称”**中的**“属性”**，然后到顶部，在 **附加依赖**项中我确实**编辑**并添加了所有文件：**`Solution Explorer``Linker > Input`****`.lib`******

 ******```
avcodec.lib
avdevice.lib
avfilter.lib
avformat.lib
avutil.lib 
```

我需要添加更多丢失的 .lib 文件吗？我又看了一遍，这些是我仅有的 .lib 文件。

我没有更改链接器中的任何其他内容。在 VC++ 中，我将包含目录更改为：`D:\C-Sharp\C++ Compiling\ConsoleApplication4\ConsoleApplication1\include`

在`include`目录中，每个目录中都有一些目录以及一些头文件。

引用目录和库目录都改成同一个目录：'D:\c++dev\ffmpeg-20130418-git-ee94362-win64-dev\lib'。这个目录里面有`Lib`文件，有文件，`DEF`还有一些`A`文件。

我该如何解决这些错误？

** 我在 google 中搜索我试图将 SubSystem 更改为 Console，但它没有帮助。** 我已经有了主要功能：

```
#include "stdafx.h"
#include "targetver.h"

int _tmain(int argc, _TCHAR* argv[])
{

    return 0;
} 
```

我有 8 个 LINK 错误，错误号 9 是：

错误 10 error LNK1120: 8 unresolved externals D:\C-Sharp\C++ Compiling\ConsoleApplication7\Debug\ConsoleApplication7.exe 1 1 ConsoleApplication7

我还能做些什么来解决这个问题？

** 编辑 **

将项目目标更改为 x64 现在我只有两个链接错误：

错误 2 错误 LNK2019：未解析的外部符号 avcodec_open 在函数 video_encode_example D:\C-Sharp\C++ Compiling\ConsoleApplication7\ConsoleApplication7\example.obj ConsoleApplication7 中引用

和

错误 3 error LNK1120: 1 unresolved externals D:\C-Sharp\C++ Compiling\ConsoleApplication7\x64\Debug\ConsoleApplication7.exe 1 1 ConsoleApplication7

试图双击它们但没有。我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:37:43.243

我刚刚在您的问题中发现您正在使用 ffmpeg 库。

如果要将这些链接到 C++ 项目中，则必须确保将`#include`语句包装在一个`extern "C"`块中，如下所示：

```
extern "C"
{
    #include "avformat.h"   // etc. etc.
} 
```

这将通过确保导出的函数名称在导入时没有损坏来修复链接错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:17:57.237

尝试在以下位置包含 *.lib 文件的路径：

**链接器**->**常规**->**附加库目录********

# javascript - Highchart JS 设置最小 Y 轴从 0 到 1

> ID：16155786
> 
> 赞同：0
> 
> 时间：2013-04-22T20:08:02.107
> 
> 标签：javascript, highcharts

我尝试将 Y 轴的最小值设置为 1，如我的 js fiddle 所示：http: [//jsfiddle.net/e2XPx/](http://jsfiddle.net/e2XPx/)

任何人都知道如何使 0 值默认为 1 吗？

```
$(function () {
    $('#container0').highcharts({
        chart: {
            type: 'line'
        },
        title: {
            text: 'Keyword: test'
        },
        xAxis: {
            categories:['04-14-2013','04-15-2013','04-16-2013','04-17-2013','04-18-2013','04-19-2013','04-20-2013']
        },
        yAxis: {
            allowDecimals: false,
            min: 1,

            title: {
                text: 'Number'

            },
            reversed: true
        },
        series: [{
            name: 'test',
            data:   [1,4,5,2,6,7,8]
        }],
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:55:59.710

您可以使用 tickPostitions：[http](http://api.highcharts.com/highcharts#yAxis.tickPositions) : //api.highcharts.com/highcharts#yAxis.tickPositions 或 tickPositioner [http://api.highcharts.com/highcharts#yAxis.tickPositioner](http://api.highcharts.com/highcharts#yAxis.tickPositioner)

# linux - 在 RPM 规范文件中使用 Jenkins BUILD NUMBER

> ID：16155792
> 
> 赞同：8
> 
> 时间：2013-04-22T20:08:19.653
> 
> 标签：linux, jenkins, rpm, rpmbuild, rpm-spec

```
Name:                   My Software
Version:                1.0.5
Release:                1
Summary:                This is my software 
```

不确定是否有人以前尝试过或者是否容易，但是：

规范文件有两个唯一的版本指示符：

*   版本（指定软件版本）
*   发布（它指定了包的编号——如果你构建了一个 RPM，它就坏了，然后再构建一个，你就增加了“发布”号。

我想知道是否有人尝试过或知道如何使用 Jenkins $BUILD_NUMBER 变量来动态更改`Release`数字，从而在`Release`每次新的成功构建完成时增加数字......？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T21:36:34.137

已经很长时间了……谢天谢地，我没有基于 rpm 的系统，所以我无法对此进行测试。

您可以`rpmbuild`在命令行上传递参数

```
rpmbuild --define="version ${env.BUILD_NUMBER}" 
```

发布规范的片段和您用于构建 rpm 的脚本会很有帮助。您不希望您的构建脚本编辑规范文件，我假设它是从某些源代码控制中提取出来的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T14:27:06.620

我一直使用 Jenkins 内部版本号作为“发布”并通过[fpm](https://github.com/jordansissel/fpm)打包。

将 fpm 与 Jenkins 提供的一些全局变量结合起来

```
# $BUILD_ID - The current build id, such as "2005-08-22_23-59-59" (YYYY-MM-DD_hh-mm-ss)
# $BUILD_NUMBER - The current build number, such as "153"
# $BUILD_TAG - String of jenkins-${JOB_NAME}-${BUILD_NUMBER}. Convenient to put into a resource file, a jar file, etc for easier identification. 
```

下面的示例命令中有一些模糊的变量，但这`$BUILD_NUMBER`是我在此处用于*发布*的变量（fpm 将其称为*迭代*）。

```
fpm_out=$(fpm -a all -n $real_pkg_name -v $version -t rpm -s dir --iteration $BUILD_NUMBER ./*) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-04T13:28:25.450

在我的 Jenkins 设置中，我决定完全绕过关于 RPM 版本编号的内部版本号。相反，我使用自制脚本来生成并跟踪正在生成的各种版本。

在我的规范文件中：

```
Version:    %{_iv_pkg_version}
Release:    %{_iv_pkg_release}%{?dist} 
```

在 Jenkins 构建脚本中：

```
# Just initialising some variables, and retrieving the release number.
package="$JOB_NAME"
# We use setuptools, so we can query the package version like so.
# Use other means to suit your needs.
pkg_version="$(python setup.py --version)"
pkg_release="$(rpm-release-number.py "$package" "$pkg_version")"

# Creating the src.rpm (ignore the spec file variables)
rpmbuild --define "_iv_pkg_version $pkg_version" \
    --define "_iv_pkg_release $pkg_release" \
    -bs "path/to/my/file.spec"

# Use mock to build the package in a clean chroot
mock -r epel-6-x86_64 --define "_iv_pkg_version $pkg_version" \
    --define "_iv_pkg_release $pkg_release" \
    "path/to/my/file.src.rpm" 
```

`rpm-release-number.py`是一个简单的脚本，用于维护基于文件的数据库（JSON 格式，便于维护）。它可以处理同时运行，所以不用担心，但如果你有构建从属服务器，它就行不通（据我所知，我不使用它们，所以无法测试）。[您可以在此处](https://blog.wedrop.it/jenkins/2014/02/01/jenkins-rpm-versioning.html)找到源代码和文档。

结果是我得到了以下包版本控制方案：

```
# Build the same version 3 times
foo-1.1-1
foo-1.1-2
foo-1.1-3
# Increment the version number, and build twice
foo-1.2-1
foo-1.2-2 
```

PS：请注意，Jenkins 构建脚本只是一个示例，创建 rpmbuild 目录结构和检索 .src.rpm 和 .spec 文件名背后的逻辑有点复杂。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-13T19:55:54.050

考虑到规范文件可能是第 3 方，我更喜欢对 Release 字段进行预构建 sed-patching：

```
sed -i 's/^Release:\(\s*\)\(.*\)$/Release:\1%{?_build_num:%{_build_num}.}%{expand:\2}/g' ./path/to/spec
rpmbuild --define '_build_num $BUILD_NUM' -ba ./path/to/spec 
```

这里`%{expand:...}`的宏用于处理宏定义的版本号，如 Mageia 规范中的版本号：

```
Release: %mkrel 1 
```

结果字段将是：

```
Release: %{?_build_num:%{_build_num}.}%{expand:%mkrel 1} 
```

宏的条件扩展`_build_num`使规范仍然可用于本地构建。即如果 SRPM 也由构建系统准备。但它可以简化为：

```
sed -i 's/^Release:\(\s*\)\(.*\)$/Release:\1'$BUILD_NUM'.%{expand:\2}/g' ./path/to/spec
rpmbuild -ba ./path/to/spec 
```

# ruby - 遍历页面对象的所有元素

> ID：16155795
> 
> 赞同：2
> 
> 时间：2013-04-22T20:08:26.290
> 
> 标签：ruby, page-object-gem

我有一个搜索过滤器。我需要能够检查页面上的所有字段是否都存在并包含值（如果它们是选择框）。

我已经使用 MethodFinder gem 成功地做到了这一点，但我想知道是否有任何方法只使用 PageObject gem。

```
require 'methodfinder'

class BasicSearchFilter
  include PageObject

  text_field(:facility_name, :id => "facility-name")
  text_field(:queue, :id => "queue")
  select_list(:from, :id => "from")
  button(:continue, :id => "continue")

  def get_search_filter_elements
    methods = MethodFinder.find_in_class_or_module('BasicSearchFilter', '.*_element$')
    elements = []
    methods.each do |method|
      elements << send(method)
    end
  end
end 
```

我已经成功使用了上述方法，但现在我无法使用我想做的页面对象方法。我希望能够以某种方式提供有效“元素”列表，这只是元素的 PageObject 版本。

**编辑**：所以事实证明正在发生一些非常可疑的事情。我有一个 RSpec 测试从上面的类中获取字段。它看起来像这样：

```
it "the basic filter dropdowns should not contain duplicate values" 
  on_page(BasicSearchFilter).get_search_filter_elements.each do |element|
    if element.tag_name == "select"
      p element
      puts "a select tag #{element}"
    end
  end
end 
```

现在根据文档， your_element_element 命令应该返回 watir 元素。这发生了一次。第二个 put 以某种方式变回 PageObject 对象。我现在根本不知道发生了什么。这是上面的一些输出。

```
#<Watir::Select:0x4c6bdfa4 located=true selector={:id=>"facility-name", :tag_name=>"select"}>
a select tag #<PageObject::Elements::SelectList:0x3101538> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T04:42:04.547

**获取所有元素**

虽然 page-object-gem 没有获取所有元素的方法，但您可以使用纯 Ruby 来完成。以下将为您提供与当前方法相同的结果（假设 MethodFinder 按预期工作）。

```
 def get_search_filter_elements
    element_methods = self.class.instance_methods(false).find_all{ |m| m =~ /_element$/ }
    elements = element_methods.collect{ |m| self.send(m) }
  end 
```

**迭代元素**

`get_search_filter_elements`像您一样完成对返回的元素的迭代。但是，关于您的观察，有几件事。

该`your_element_element`方法返回 PageObject 元素（不是 Watir 元素）。这可以通过输出返回的元素的类来看出：

```
page.get_search_filter_elements.each{ |e| puts e.class }
#=> PageObject::Elements::TextField
#=> PageObject::Elements::TextField
#=> PageObject::Elements::SelectList
#=> PageObject::Elements::Button 
```

具有 Watir 元素和 PageObject 元素的输出不是因为该元素已更改类型。它始终是 PageObject 元素。输出改变是因为你做了`p`vs `puts`。当你`p`是一个对象时，`.inspect`方法被输出，而当你`puts`是一个对象时，`.to_s`方法被输出。给定 PageObject 元素的编写方式，`.to_s`提供有关 PageObject 元素的信息，而`.inspect`提供有关本机元素（即 Watir 或 Selenium）的信息。

```
page.queue_element.to_s
#=> <PageObject::Elements::TextField:0x3851ca0>

page.queue_element.inspect
#=> #<Watir::TextField:0x1d58cb4 located=false selector={:id=>\"queue\", :tag_name=>\"input or textarea\", :type=>\"(any text type)\"}> 
```

**转换为本机元素**

如果您确实想要遍历 Watir 元素（即您想要调用 PageObject 不支持的方法），您可以使用该`element`方法。例如，以下将元素迭代为 Watir 元素：

```
page.get_search_filter_elements.each{ |e| puts e.element.class }
#=> Watir::TextField
#=> Watir::TextField
#=> Watir::Select
#=> Watir::Button 
```

# ios - setBadgeValue 在 AppDelegate.m 中不起作用（故事板）

> ID：16155798
> 
> 赞同：2
> 
> 时间：2013-04-22T20:08:32.023
> 
> 标签：ios, xcode, tabbar, appdelegate, badge

在我的 AppDelegate `didFinishLaunchingWithOptions`BOOL 我调用这个方法：

```
UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"Storyboard3Inch" bundle:nil];

UITabBarController *tabBarController = [iPhone35Storyboard instantiateViewControllerWithIdentifier:@"tabBarController"];
[[tabBarController.tabBar.items objectAtIndex:1] setBadgeValue:@"2"]; 
```

我想现在，在 App Launch 期间，会设置一个徽章。但是没有显示徽章！

Storyboard ID 设置为@TabBarViewController。

而且我也尝试过`instantiateInitialViewController`而不是`instantiateViewControllerWithIdentifier:@"tabBarController"`.

有人可以帮忙吗？

# java - 类型不匹配：无法从 StringBuilder 转换为 String

> ID：16155800
> 
> 赞同：27
> 
> 时间：2013-04-22T20:08:35.733
> 
> 标签：java, android

此方法返回给定 URL 的来源。

```
private static String getUrlSource(String url) {
    try {
        URL localUrl = null;
        localUrl = new URL(url);
        URLConnection conn = localUrl.openConnection();
        BufferedReader reader = new BufferedReader(
            new InputStreamReader(conn.getInputStream()));
        String line = "";
        String html;
        StringBuilder ma = new StringBuilder();
        while ((line = reader.readLine()) != null) {
            ma.append(line);
        }
        return ma;
    } catch (Exception e) {
        Log.e("ERR",e.getMessage());
    }
} 
```

它给了我这个错误：

```
Type mismatch: cannot convert from StringBuilder to String 
```

还有两个选择：

1.  `Change the return type to StringBuilder.` 但我希望它返回一个字符串。
2.  `Change type of ma to String.` 更改 String 后没有 append() 方法。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-22T20:09:30.807

只需使用

```
return ma.toString(); 
```

代替

```
return ma; 
```

`ma.toString()`返回 StringBuilder 的字符串表示形式。

有关详细信息，请参阅[StringBuilder#toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#toString())

正如 Valeri Atamaniouk 在评论中建议的那样，您还应该在`catch`块中返回一些内容，否则您将收到编译器错误`missing return statement`，因此编辑

```
} catch (Exception e) {
    Log.e("ERR",e.getMessage());
} 
```

到

```
} catch (Exception e) {
    Log.e("ERR",e.getMessage());
    return null; //or maybe return another string
} 
```

会是个好主意。

* * *

**编辑**

正如 Esailija 所建议的，我们在这段代码中有三个反模式

```
} catch (Exception e) {           //You should catch the specific exception
    Log.e("ERR",e.getMessage());  //Don't log the exception, throw it and let the caller handle it
    return null;                  //Don't return null if it is unnecessary
} 
```

所以我认为最好做这样的事情：

```
private static String getUrlSource(String url) throws MalformedURLException, IOException {
    URL localUrl = null;
    localUrl = new URL(url);
    URLConnection conn = localUrl.openConnection();
    BufferedReader reader = new BufferedReader(
            new InputStreamReader(conn.getInputStream()));
    String line = "";
    String html;
    StringBuilder ma = new StringBuilder();
    while ((line = reader.readLine()) != null) {
        ma.append(line);
    }
    return ma.toString();
} 
```

然后，当你调用它时：

```
try {
    String urlSource = getUrlSource("http://www.google.com");
    //process your url source
} catch (MalformedURLException ex) {
    //your url is wrong, do some stuff here
} catch (IOException ex) {
    //I/O operations were interrupted, do some stuff here
} 
```

检查这些链接以获取有关 Java 反模式的更多详细信息：

*   [Java 反模式](http://www.odi.ch/prog/design/newbies.php)
*   [编程反模式](http://www.javacodegeeks.com/2011/10/programming-antipatterns.html)
*   [Java 应用程序中的反模式简介](http://www.devx.com/Java/Article/29162)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-24T06:47:41.537

我在将 StringBuilder 转换为 String 时遇到了同样的问题，我使用了上述观点，但这并没有给出正确的解决方案。使用上面的代码输出是这样的

```
 String out=ma.toString();
// out=[Ljava.lang.String;@41e633e0 
```

之后我找到了正确的解决方案。想像这样创建一个插入 StringBuilder 的新字符串。

```
String out=new String(ma); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-14T10:44:38.627

尝试

**返回 ma.toString();** 因为您不能直接将 stringbuilder 变量存储到字符串变量中。

# java - Java 等待和 notifyAll：IllegalMonitorStateException

> ID：16155802
> 
> 赞同：0
> 
> 时间：2013-04-22T20:08:43.943
> 
> 标签：java, multithreading, thread-safety, synchronize

我是 Java 新手（和 RoR 开发人员）。

我有一个简单的程序。球是共享的 amont 球员。球应传给随机球员。

好的，代码如下：

```
class Ball  {
    private int currentPlayer;

    public void setCurrentPlayer( int currentPlayer, int fromWho ) {
        this.currentPlayer = currentPlayer;
        System.out.println( "Ball:setCurrentPlayer " + fromWho + " ---> " + currentPlayer );
    }

    public int getCurrentPlayer() {
        return currentPlayer;
    }
}

class Player implements Runnable {
    private int myID;
    private Ball ball;
    private int playersCount;
    java.util.Random rnd;

    public Player(int id, Ball ball, int playersCount) {
        myID = id;
        this.ball = ball;
        this.playersCount = playersCount;
        rnd = new java.util.Random( id );
    }

    public void run() {
        int nextPlayer;
        while (true) {
            synchronized (ball) {
                if ( ball.getCurrentPlayer() == myID ) {
                    nextPlayer = rnd.nextInt(playersCount);
                    System.out.println( "Player nr. " + myID + " ---> " + nextPlayer );
                    ball.setCurrentPlayer( nextPlayer, myID );
                    ball.notifyAll();
                }  else {
                    try {
                        wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }
    }
}

class Start {
    public static void main( String[] argv ) throws Exception {
        Ball p = new Ball();
        System.out.println("MAIN: ball will be in player: " + p.getCurrentPlayer());

        final int playersCount = 5;

        for ( int i = 0; i < playersCount; i++ ) {
            ( new Thread( new Player( i, p, playersCount ) ) ).start();
        }

        while ( true ) {
            Thread.sleep( 500 );
            System.out.println( "MAIN: ball is in player : " + p.getCurrentPlayer() );
        }
    }
} 
```

但它不起作用。我得到例外：`IllegalMonitorStateException`。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:12:17.330

您正在等待`this`监视器而没有对其进行同步；你需要`ball`等待

# c# - 如何循环通过图像 src

> ID：16155805
> 
> 赞同：2
> 
> 时间：2013-04-22T20:08:51.567
> 
> 标签：c#, asp.net, webforms

我已将图片名称加载到 aspx 上的数据表中，但这是将它们放在页面上的最佳方式....

```
 private void LoadPics()
{

    Image1.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[0]["name"].ToString();
    Label1.Text = MyClass.dtprop.Rows[0]["name"].ToString();
    Image2.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[1]["name"].ToString();
    Label2.Text = MyClass.dtprop.Rows[1]["name"].ToString();
    Image3.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[2]["name"].ToString();
    Label3.Text = MyClass.dtprop.Rows[2]["name"].ToString();
    Image4.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[3]["name"].ToString();
    Label4.Text = MyClass.dtprop.Rows[3]["name"].ToString();
    Image5.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[4]["name"].ToString();
    Label5.Text = MyClass.dtprop.Rows[4]["name"].ToString();
    Image6.ImageUrl = @"~\Pictures\" + MyClass.dtprop.Rows[5]["name"].ToString();
    Label6.Text = MyClass.dtprop.Rows[5]["name"].ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:12:26.817

您可以尝试使用此代码，基于`OfType operator linq`

```
var controls = this.Controls.OfType<Image>();
foreach(var item in controls)
{
  ....
} 
```

如果您希望将它们添加到页面，您可以使用`PlaceHolder control`

```
Ph.Contols.Add(yourImage); 
```

您在目标页面中设置 PlaceHolder

```
<asp:PlaceHolder id ="Ph" runat="server"/> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder%28v=vs.80%29.aspx)

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bb360913.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bb360913.aspx)

另一种解决方案：您也可以在您的和定义上使用`GridView control,`绑定此控件`DataTable``template field`

```
...
<asp:TemplateField>
<ItemTemplate>
<asp:Image id="img" runat="server"/>
</ItemTemplate>
</asp:TemplateField>
... 
```

# semantics - 创建自己的属性以使用带有 RDFa Lite 的 Schema.org？

> ID：16155806
> 
> 赞同：1
> 
> 时间：2013-04-22T20:08:59.177
> 
> 标签：semantics, schema.org, vocabulary, rdfa

所以我使用 RDFa Lite 和词汇 Schema.org 将语义放在我的页面上，但我遇到了一个问题。我把它放在一个足球运动员身上。我得到了球员号码、球员位置等信息？我如何用 Schema.org 定义这些？

所以我的代码看起来像这样

```
<div class="indhold"  vocab="http://schema.org/" typeof="Person">

    <h2>Spiller - <span property="name" >Morten Jensen</span></h2>
    <img property="image" src="http://e2.365dm.com/12/06/660x350/YannMvila_2775667.jpg" alt="Morten Jensen billede" class="spiller" />
    <p><b>Navn:</b> <span property="name">Morten Jensen</span></p>
    <p><b>Fødselsdag:</b> <span property="birthDate">1989-12-12</span></p>
    <p><b>Hold:</b> <span property="memberOf"><span typeof="Organisation" property="name"><a href="hold.php?id=1">FC København</a></span></span></p>
    <p><b>Spillernr.:</b> <span property="playerNumber">2</span></p>
    <p><b>Position:</b> <span property="playerPosition">Målmand</span></p>
    <p><b>Beskrivelse:</b><br/>
    <span property="description">Denne spiller startede i en meget tidlig alder, men var fast besluttet på at blive en kæmpe stjerne! Om få år spåes han en kæmpe fremtidig indenfor dansk fodbold!     </span>
    </p>

</div> 
```

我试过谷歌，但我不太确定你可以创建这样的属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:33:34.250

要扩展 schema.org 以支持自定义属性，您通常必须找到一个更通用的类型或属性，它是自定义术语的超集。对于 playerNumber 和 playerPosition，我想不出 schema.org 中与这两个自定义术语相关的任何属性。您可能会使用“描述”，即使它非常通用，例如： property="description/playerNumber" property="description/playerPosition"

无论如何，这不应阻止您在 RDFa lite 中发布您的内容。如果您不确定如何处理 playerNumber 和 playerPosition，您也可以将它们排除在外，而不为它们添加 RDFa Lite。您不必为页面的每个项目都添加注释，以后随时可以改进。

[您也可以在http://lists.w3.org/Archives/Public/public-vocabs/](http://lists.w3.org/Archives/Public/public-vocabs/)上提问，这是 scgem 的官方邮件列表

顺便说一句，您的标记的其余部分看起来不错。只需确保将 typeof="Organization" 移动到具有 property="memberOf" 的 span 中，因为您正在定义一个新的实体组织实体，它应该与创建它的属性位于同一 HTML 元素中。此外，在 schema.org 中，Organization 用美国英语拼写，带有“z”。

# html - 浮动垂直对齐的 div 之类的列？

> ID：16155811
> 
> 赞同：2
> 
> 时间：2013-04-22T20:09:10.933
> 
> 标签：html, css

我有一个“容器” div，它将停靠在页面的左侧，并且始终距离顶部、左侧和底部 10px。在那个 div 里面会有 10 个小的“内部”div，它们是垂直排列的。容器应始终足够宽以容纳所有内部 div。

事情是这样的......每当容器 div 不能将所有内部 div 保存在单个列中时（例如当用户降低浏览器高度时），我希望内部 div 扩展到一个新的“列”（但仍然留在容器 div 内）。换句话说，容器 div 将根据需要水平扩展，因此不会出现垂直滚动条。

例如，如果浏览器的高度只下降到 div 7，那么它应该看起来像这样......

```
1      8
2      9
3      10
4
5
6
7 
```

这是我到目前为止所拥有的 jsFiddle ......

[http://jsfiddle.net/ymESU/](http://jsfiddle.net/ymESU/)

这是代码...

```
<!DOCTYPE html>
<html>

<head>

<style>
    #container {position: absolute; top: 10px; left: 10px; bottom: 10px; border: 1px solid black; padding: 5px; } 
    .innerBoxes {display: block; width: 100px; height: 100px; background: red; margin: 5px; padding: 10px; color: white;}
</style>

</head>

<body>

<div id="container">
  <div class='innerBoxes'>1</div>
  <div class='innerBoxes'>2</div>
  <div class='innerBoxes'>3</div>
  <div class='innerBoxes'>4</div>
  <div class='innerBoxes'>5</div>
  <div class='innerBoxes'>6</div>
  <div class='innerBoxes'>7</div>
  <div class='innerBoxes'>8</div>
  <div class='innerBoxes'>9</div>
  <div class='innerBoxes'>10</div>
</div>

</body>
</html> 
```

我缺少什么来实现这一点？

仅供参考-对于这个特定的项目，它只需要在现代版本的 Chrome 上工作，所以如果最好的解决方案需要 CSS3，没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:27:42.343

如果您的浏览器要求只有 Chrome，那么您可以继续使用 CSS3 列。使用内联块而不是浮点数：

```
#container {position: absolute; 
    top: 10px; left: 10px; bottom: 10px; 
    border: 1px solid black; padding: 5px; 
   -webkit-column-width:120px; -moz-column-width:120px;
  } 
.innerBoxes {
    display: inline-block; 
    width: 100px; 
    height: 100px; 
    background: red; 
    margin: 5px; 
    padding: 10px; 
    color: white;
} 
```

它在这里工作：http: [//jsfiddle.net/GHMb8/2/](http://jsfiddle.net/GHMb8/2/)

**如果添加`-moz-column-width:120px;`（新小提琴） ，**更新也适用于 Firefox****

# iis-7 - Kentico Page not Found URL 捕获了虚拟 CSS 处理程序，弄乱了 UI

> ID：16155813
> 
> 赞同：0
> 
> 时间：2013-04-22T20:09:20.447
> 
> 标签：iis-7, web-config, kentico

我们使用 CSS Handler 来组合和缩小我们的网站。这是 web.config 中的设置

```
<css>  
      <add key="virtualPathPrefix" value="~/ctvresources/css/" />
      <add key="handlerVirtualPath" value="~/cssHandler.aspx" />
</css> 
```

这是我的 Kentico 中未找到页面 URL 的结构。 ![在此处输入图像描述](https://i.stack.imgur.com/Lah7j.jpg)

因此，所有 404 错误都由它正确处理，这很棒。

**但是，问题是页面未找到 URL 也捕获 /cssHandler.aspx，即使它是虚拟路径。**它正在生成 404 错误，因此 CssHandler.aspx 无法加载任何 css 文件，它会弄乱视觉效果。

有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:58:33.423

想通了，您必须在 URL 和 SEO 下排除 URL

# search - 按目录搜索模糊文件？

> ID：16155814
> 
> 赞同：8
> 
> 时间：2013-04-22T20:09:22.280
> 
> 标签：search, intellij-idea, rubymine, fuzzy-search

我正在尝试使用 RubyMine，但有一个功能一直在扼杀我的工作效率。我一直在 Sublime 中使用它。

假设我的视图文件夹中有一百个 index.html.haml 文件。在 Sublime Text 2 中，我可以`/app/views/orders/index.html.haml`通过按 Cmd+t、输入“订单索引”并按 Enter 进行搜索。

但是到目前为止，在 RubyMine 中，您不能键入 order，因为目录不包含在搜索索引中。您可以键入“index.html.haml”，但随后我会看到所有索引视图，并且订单在 #80 左右下降。

我也非常喜欢能够键入文件名的一部分，例如每个匹配文件的第一个字母。Sublime Text 2 和 PeepOpen 让你轻松做到这一点；我很想在 RubyMine 中使用它。

TL：博士；**您可以在 RubyMine / IntelliJ 中按目录搜索文件吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-11T18:30:39.273

我在 RubyMine 中使用“到处搜索”功能。

这里[http://mrhaki.blogspot.ru/2014/02/search-for-anything-with-search.html](http://mrhaki.blogspot.ru/2014/02/search-for-anything-with-search.html)描述。

# mysql - Perl - DBI - MySQL - 更新后获取行 ID 的简单方法？

> ID：16155820
> 
> 赞同：0
> 
> 时间：2013-04-22T20:09:49.763
> 
> 标签：mysql, perl, dbi

有没有一种简单的方法来获取受 DBI 更新语句影响的行的 ID？在这种特殊情况下，它将始终为 0 行或 1 行。我不希望不得不再次重做查询的选择部分来获取数据，因为这有点昂贵。

我必须先进行更新，否则我会在选择和更新之间引入竞争时间条件的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:07:47.880

您可能想阅读这个[相关的 SO 主题](https://stackoverflow.com/questions/15034136/select-updated-rows-in-mysql/15034351#15034351)（我已链接到[@Erwin Brandstetter](https://stackoverflow.com/users/939860/erwin-brandstetter)的答案）——这是我一直处理它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:29:36.173

根据您的数据库引擎，您可能拥有一个`SELECT ... FOR UPDATE`设施。你应该用这个来

*   `SELECT ... FOR UPDATE`您要更新的记录

*   从记录中保存`ID`，并`UPDATE`使用`ID`而不是原始条件进行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:25:26.793

关于 SELECT ... FOR UPDATE的[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-locking-reads.html)可以帮助您处理事务。

# c# - 如何为 Visual C# 2008 Express 添加 Asp.net 模板

> ID：16155827
> 
> 赞同：0
> 
> 时间：2013-04-22T20:10:01.500
> 
> 标签：c#, asp.net

我有 Visual C# 2008 Express，我想为 Web 创建一个应用程序。从我的在线研究中，我了解到我需要 Asp.Net，但这些模板不可用。我找到了一个 MS 下载，但它适用于两者，我不想卸载我已经拥有的东西。将其添加到我已有的内容中的正确方法是什么？

# c# - 读取每行 2 个多行文本框

> ID：16155831
> 
> 赞同：3
> 
> 时间：2013-04-22T20:10:12.307
> 
> 标签：c#

有没有办法读取2个多行文本框的每一行？在`textBox1`我有一个多行字符串，其中包含使用以下代码的压缩文件列表：

```
DirectoryInfo getExpandDLL = new DirectoryInfo(showExpandPath);
FileInfo[] expandDLL = getExpandDLL.GetFiles("*.dl_");
foreach (FileInfo listExpandDLL in expandDLL)
{
    textBox1.AppendText(listExpandDLL + Environment.NewLine);
} 
```

目前我的部分代码是这样的：

```
textBox2.Text = textBox1.Text.Replace("dl_", "dll");
string cmdLine = textDir.Text + "\\" + textBox1.Text + " " + textDir.Text + "\\" + textBox2.Text;
Process process = new Process();
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Normal;
startInfo.FileName = "expand.exe";
startInfo.UseShellExecute = true;
startInfo.Arguments = cmdLine.Replace(Environment.NewLine, string.Empty);
process.StartInfo = startInfo;
process.Start();
process.WaitForExit(); 
```

上面的代码在 textBox1 中取压缩文件的名称并在 textBox2 中重命名它，然后运行 ​​expand.exe 来展开压缩文件。代码基本上给出了expand.exe下面的命令作为例子：

```
c:\users\nigel\desktop\file.dl_ c:\users\nigel\desktop\file.dll 
```

如果文件夹在 textBox1 中仅包含一行文本，则效果很好。对于多行文本，命令基本上是：

```
c:\users\nigel\desktop\loadsoffiles.dl_ etc and doesnt work! 
```

有没有办法读取textBox1的每一行，更改字符串并将其放入textBox2然后将命令传递给expand.exe？

```
string cmdLine = textDir.Text + "\\" + lineOFtextBox1 + " " + textDir.Text + "\\" + lineOftextBox2; 
```

编辑：为了清楚起见：TextBox1 包含：

*   somefile.dl_
*   someMore.dl_
*   甚至更多.dl_

作为一条多线。我的代码采用该多行文本并将其放入 textBox2 中，因此它包含：

*   一些文件.dll
*   someMore.dll
*   更多.dll

有没有办法读取每一行/获取 textBox1 和 textBox2 的每一行并用它做“东西”？

谢谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T20:37:07.587

您需要做的是遍历字符串数组，而不是使用单个字符串。请注意，TextBox 有一个“Lines”属性，可以为您提供已拆分为数组的行

```
foreach(string line in textBox1.Lines)
{
    //your code, but working with 'line' - one at a time

} 
```

所以我认为你的完整解决方案是：

```
foreach (string line in textBox1.Lines)
{
    string cmdLine = textDir.Text + "\\" + line + " " + textDir.Text + "\\" + line.Replace("dl_", "dll");
    var process = new Process
        {
            StartInfo = new ProcessStartInfo
                {
                    FileName = "expand.exe",
                    Arguments = cmdLine.Replace(Environment.NewLine, string.Empty),
                    WindowStyle = ProcessWindowStyle.Normal,
                    UseShellExecute = true
                }
        };
    process.Start();
    process.WaitForExit();
} 
```

请注意，我们正在为您的文本框中的每一行启动一个进程，我认为这是正确的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:12:57.490

第一次谷歌点击告诉我们以下内容：

```
string txt = TextBox1.Text;
string[] lst = txt.Split(new Char[] { '\n', '\r' }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:30:41.030

您可以尝试使用此代码

```
string a = txtMulti.Text;

string[] delimiter = {Environment.NewLine};

string[] b = a.Split(delimiter, StringSplitOptions.None); 
```

# c - 由空格分隔的两个字符串自动连接

> ID：16155834
> 
> 赞同：5
> 
> 时间：2013-04-22T20:10:22.470
> 
> 标签：c

我刚刚发现了一些非常有趣的东西，它是由我的错字引入的。这是一个非常简单的代码脚本示例：

```
printf("A" "B"); 
```

结果将是

```
$> AB 
```

有人可以解释这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T20:13:08.950

作为 C 标准的一部分，将彼此相邻的字符串文字连接起来：

对于 C（引用 C99，但 C11 在 6.4.5p5 中有类似的东西）：

> （C99，6.4.5p5）“在翻译阶段 6，由任何相邻字符序列和相同前缀的字符串文字标记指定的多字节字符序列连接成单个多字节字符序列。”

C++ 有类似的标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T20:13:53.390

这是标准行为，在将很长的字符串常量拆分为多行时非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:13:03.013

这是字符串连接，是 C 标准的一部分。任何两个或多个连续的字符串文字组合成一个。

# process - 在 Windows 中监视某个进程的 CPU 内核使用情况

> ID：16155850
> 
> 赞同：1
> 
> 时间：2013-04-22T20:11:07.557
> 
> 标签：process, cpu-usage, core, resource-monitor

我正在尝试监视一个特殊进程，以查看每个 CPU 内核需要多少处理能力。我知道如何通过任务管理器对所有进程执行此操作，但不适用于单个进程。我想知道是否有任何合适的软件来实现这一点。我已经尝试过 Process Monitor 和其他一些软件，但它们都没有给出某个进程的每个核心报告。

# sql-server - SSIS包性能增强

> ID：16155856
> 
> 赞同：1
> 
> 时间：2013-04-22T20:11:38.773
> 
> 标签：sql-server, sql-server-2008-r2, ssis

我有一个日志表，我打算从我的事务数据库导入到我的报告数据库。

该表的列如下：

```
Id,Varchar1 , Varchar2, Time1, Time2 
```

XML 结构存储在 Varchar1 和 varchar2 中

我正在使用具有 OLEDB 源和目标的 SSIS 包和数据流任务。

表中有接近 600000 条记录，并且需要很长时间才能传输。

到目前为止，我在 OLEDB 源中尝试的查询是：

1)`select Id, XML1, XML2, Time1, Time2 where Time > 'XXXX' and Time2 < 'XXXX'`

将 Varchar 转换为 xml 2)

```
select Id, CONVERT(XML,CONVERT(NVARCHAR(max),Varchar1, 0)), CONVERT(XML,CONVERT(NVARCHAR(max),Varchar2, 0))
, Time1, Time2 where Time > 'XXXX' and Time2 < 'XXXX' 
```

这两个查询都花了我很长时间。

有没有人有更好的解决方案/方法来完成我的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:20:11.757

您能否确定是从源数据库检索数据还是将数据写入目标数据库导致延迟？

如果您在目标表上有触发器或索引，这可能是延迟的一部分。您可能希望在导入过程中禁用它们。

这将是一次性传输还是您会重复传输相似数量的记录？

# php - 如何向 Silverstripe CMS 管理员添加另一个页面

> ID：16155858
> 
> 赞同：2
> 
> 时间：2013-04-22T20:11:50.910
> 
> 标签：php, content-management-system, silverstripe

我一直在查看[本教程](http://www.silverstriperesources.com/articles/creating-a-totally-custom-page-in-the-admin-area/)，将一个简单的页面添加到 Silverstripe (3.0.5) 的管理区域，但在 apache 日志中出现分段错误错误。

我认为问题在于“customHelp.php”中的“index”方法 - 当我将“index”重命名为其他名称时，我没有崩溃，并且在管理菜单中出现了一个条目，但是当我单击它时显然没有显示任何内容.

这是我的“customHelp.php”的内容 - 有人可以指出我正确的方向吗？

```
<?php

class customHelp extends LeftAndMain { 

    static $url_segment = "customHelp"; 
    static $menu_title = "Site Help";     
    static $allowed_actions = array ('customHelp'); 

    public function index() { 
        return $this->renderWith('customHelp'); 
    }     

    public function init() { 
        parent::init(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:49:03.620

I guess the tutorial is not correct or outdated.

I tried it here and got the error:

```
Declaration of customHelp::index() should be compatible with that of LeftAndMain::index() 
```

So making it compatible for overiding with:

```
public function index($request) { 
    return $this->renderWith('customHelp'); 
} 
```

made it work here.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T15:09:15.357

可能不相关，但您应该在类名中使用正确的命名约定，即使指南另有建议：

类应以大写字母[http://doc.silverstripe.org/framework/en/trunk/misc/coding-conventions](http://doc.silverstripe.org/framework/en/trunk/misc/coding-conventions)开头，文件名应遵循此。

在将文件提供为区分大小写的服务器上运行时，您可能会遇到问题。

编辑：

只是打我，索引问题可能是由未刷新的模板缓存引起的：在站点上运行 ?flush=all 。

# wpf - 重用情节提要

> ID：16155864
> 
> 赞同：1
> 
> 时间：2013-04-22T20:12:10.657
> 
> 标签：wpf, silverlight, storyboard, expression-blend

我正在自学如何使用 Blend[一些 MS 课程](http://www.microsoft.com/design/toolbox/school/)。我正在经历的一个项目是一个计算器，其中计算器键是使用下面的 xaml 定义的，每个都有自己的故事板来动画键的按下和释放。

每个键的图像都是在 Photoshop 或类似软件中创建的，最终结果是下面漂亮的计算器。

问题：

1.  是否可以定义一次故事板并为每个“键”重用它？如何？
2.  是否可以将每个键变成一个按钮？如何？

干杯，
贝里尔

# 示例计算器键

```
 <Canvas x:Name="plus" Height="75" HorizontalAlignment="Right" Margin="0,362,485,0" VerticalAlignment="Top" Width="111" Clip="M60.612606,3.8724005 C57.263493,4.7858224 6.0270014,29.143972 5.1136127,30.361849 C4.2002244,31.579754 4.895596,32.797173 5.8089843,34.31953 C6.722373,35.841862 43.258041,68.419128 45.389259,69.94146 C47.520477,71.463791 47.520477,71.159058 50.260643,70.245667 C53.000813,69.332275 104.15021,40.713028 104.45465,39.495182 C104.75909,38.277306 104.75952,37.059433 103.54169,35.841587 C102.32386,34.623711 64.291183,3.7548122 62.439445,3.7270708 C60.571468,3.6990852 60.612606,3.8724005 60.612606,3.8724005 z">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseLeftButtonDown">
                    <im:ControlStoryboardAction Storyboard="{StaticResource PlusPress}"/>
                </i:EventTrigger>
                <i:EventTrigger EventName="MouseLeftButtonUp">
                    <im:ControlStoryboardAction Storyboard="{StaticResource PlusRelease}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <Image x:Name="image14" Height="75" Width="111" Source="images/plus.png" Stretch="Fill" RenderTransformOrigin="0.5,0.5">
                <Image.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Image.RenderTransform>
            </Image>
        </Canvas> 
```

# 样本故事板

```
 <Storyboard x:Name="PlusPress">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="image14" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
            <EasingDoubleKeyFrame KeyTime="00:00:00.2000000" Value="7">
                <EasingDoubleKeyFrame.EasingFunction>
                    <CircleEase EasingMode="EaseInOut"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Name="PlusRelease">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="image14" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)">
            <EasingDoubleKeyFrame KeyTime="00:00:00.2000000" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard> 
```

![在此处输入图像描述](https://i.stack.imgur.com/pyuXA.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:02:13.373

下一步是学习如何对[按钮进行模板化](http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx)。之后，您可以使用“按下”和“正常”状态之间的过渡效果。

# 编辑 1

例子 ：

您必须根据使用情况调整这些样式（图像而不是文本等）。在经过此片段后的 Blend 中，右键单击一个按钮，**编辑模板 > 编辑当前...**

或在资源面板中：右键单击 CalcButtonStyle**编辑**您可以在此模式下更改默认属性（背景颜色、边距等）。如果您想更改模板：在对象和时间轴面板上，右键单击“<> 样式”**编辑模板> 编辑当前...** 您可以在状态面板中看到不同的状态（正常、按下等）。

```
 <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                <StackPanel.Resources>
                    <!-- The main calc button style -->
                    <Style TargetType="Button"  x:Key="CalcButtonStyle">
                        <Setter Property="FontFamily" Value="Arial Black" />
                        <Setter Property="Background" Value="Black" />
                            <Setter Property="BorderBrush">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FF838383" Offset="0"/>
                                        <GradientStop Color="#FF393939" Offset="0.375"/>
                                        <GradientStop Color="#FF293037" Offset="0.375"/>
                                        <GradientStop Color="Black" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                        <Setter Property="Foreground" Value="#FFFFFFFF"/>
                        <Setter Property="Padding" Value="3"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Grid>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualStateGroup.Transitions>
                                                    <VisualTransition GeneratedDuration="0:0:0.255"/>
                                                </VisualStateGroup.Transitions>
                                                <VisualState x:Name="Normal" />
                                                <VisualState x:Name="MouseOver"/>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="BackgroundPressed" d:IsOptimized="True"/>
                                                        <DoubleAnimation Duration="0" To="0.8" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentPresenter" d:IsOptimized="True"/>
                                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="contentPresenter" d:IsOptimized="True">
                                                            <DoubleAnimation.EasingFunction>
                                                                <BackEase EasingMode="EaseInOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="contentPresenter" d:IsOptimized="True">
                                                            <DoubleAnimation.EasingFunction>
                                                                <BackEase EasingMode="EaseInOut"/>
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Disabled">
                                                <Storyboard>
                                                    <DoubleAnimation Duration="0" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To=".55"/>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                        <VisualStateGroup x:Name="FocusStates">
                                            <VisualState x:Name="Focused"/>
                                            <VisualState x:Name="Unfocused" />
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Border x:Name="Background" IsHitTestVisible="False" BorderThickness="1" CornerRadius="3" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"/>
                                    <Border x:Name="BackgroundPressed" IsHitTestVisible="False" BorderThickness="1" CornerRadius="3" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" Opacity="0" RenderTransformOrigin="0.5,0.5" >
                                        <Border.RenderTransform>
                                            <CompositeTransform ScaleY="-1"/>
                                        </Border.RenderTransform>
                                    </Border>
                                    <ContentPresenter
                                          x:Name="contentPresenter"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="{TemplateBinding Padding}" RenderTransformOrigin="0.5,0.5">
                                        <ContentPresenter.RenderTransform>
                                            <CompositeTransform/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                    <Rectangle x:Name="DisabledVisualElement" RadiusX="3" RadiusY="3" Fill="#FFFFFFFF" Opacity="0" IsHitTestVisible="false" />
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <!-- Define CalcButtonStyle as default style for all buttons -->
                <Style TargetType="Button" BasedOn="{StaticResource CalcButtonStyle}" />
                <!-- Override style for Gray buttons -->
                <Style x:Key="CalcGrayButtonStyle" TargetType="Button" BasedOn="{StaticResource CalcButtonStyle}">
                    <Setter Property="Background" Value="Gray" />
                    <Setter Property="BorderBrush">
                        <Setter.Value>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FF999999" Offset="0"/>
                                <GradientStop Color="#FF4B4B4B" Offset="0.375"/>
                                <GradientStop Color="#FF41464B" Offset="0.375"/>
                                <GradientStop Color="#FF373737" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Style>
            </StackPanel.Resources>
            <Button Content="7" Width="22" Height="22"  Margin="2"/>
            <Button Content="8" Width="22" Height="22" Margin="2" />
            <Button Content="9" Width="22" Height="22" Margin="2" />
            <Button Content="-" Width="22" Height="22" Margin="2" Style="{StaticResource CalcGrayButtonStyle}" />
        </StackPanel> 
```

# 编辑 2

在您的情况下，模板可能如下所示：

**警告：**我删除了视觉状态“鼠标悬停、禁用、聚焦等”。我只是保持按下状态。

```
<UserControl.Resources>
        <Style TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.255"/>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver"/>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="7" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="contentPresenter" d:IsOptimized="True">
                                                <DoubleAnimation.EasingFunction>
                                                    <BackEase EasingMode="EaseInOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                            <DoubleAnimation Duration="0" To="7" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="contentPresenter" d:IsOptimized="True">
                                                <DoubleAnimation.EasingFunction>
                                                    <BackEase EasingMode="EaseInOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="Unfocused"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" RenderTransformOrigin="0.5,0.5">
                                <ContentPresenter.RenderTransform>
                                    <CompositeTransform/>
                                </ContentPresenter.RenderTransform>
                            </ContentPresenter>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Canvas x:Name="plus" Height="75" HorizontalAlignment="Right" Margin="0,362,485,0" VerticalAlignment="Top" Width="111" Clip="M60.612606,3.8724005 C57.263493,4.7858224 6.0270014,29.143972 5.1136127,30.361849 C4.2002244,31.579754 4.895596,32.797173 5.8089843,34.31953 C6.722373,35.841862 43.258041,68.419128 45.389259,69.94146 C47.520477,71.463791 47.520477,71.159058 50.260643,70.245667 C53.000813,69.332275 104.15021,40.713028 104.45465,39.495182 C104.75909,38.277306 104.75952,37.059433 103.54169,35.841587 C102.32386,34.623711 64.291183,3.7548122 62.439445,3.7270708 C60.571468,3.6990852 60.612606,3.8724005 60.612606,3.8724005 z">
            <Button>
                <Image x:Name="image14" Height="75" Width="111" Source="icon-twitter-footer.png" Stretch="Fill" RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>
            </Button>
        </Canvas>
    </Grid> 
```

# java - 从 Jar 文件中获取 Java 接口的当前状态

> ID：16155867
> 
> 赞同：0
> 
> 时间：2013-04-22T20:12:21.040
> 
> 标签：java, jar

这可能是一个奇怪的要求，但我要问它。

我有一个用 Java 编写的开源软件。我为一个项目修改了它。

该软件允许我在其界面上放置一些元素并将这些元素链接在一起。我修改了代码以添加一些额外的元素。编译后，软件会生成一个可执行的 .jar 文件。

该软件仅提供与某个服务器同步的选项，但我无权访问该服务器。此外，该软件不提供任何保存选项来保存界面的当前状态。

我的问题是：有没有办法找到和/或保存界面的当前状态？喜欢将当前状态保存在临时文件夹中的选项？

我尝试实现自己的保存选项方法，但是软件很大，有很多类。所有的类都专用于服务器同步。因此，这是一个很难解决的问题。

谢谢！

# java - 制作Java包时java.lang.NoClassDefFoundError

> ID：16155868
> 
> 赞同：1
> 
> 时间：2013-04-22T20:12:24.003
> 
> 标签：java, packages

我不完全是 Java 的初学者，但我不知道这里发生了什么。当我尝试编译以下代码时：

```
package controls;

import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class RButton  {
    public RButton() {

    }
} 
```

我收到以下错误：

```
java.lang.NoClassDefFoundError: RButton (wrong name: controls/RButton) 
```

RButton.java 文件位于目录“项目文件夹\ribbon\controls\”中。在功能区文件夹中，我已经能够成功地将`package ribbon;`源文件放在那里。我不明白我在这里做错了什么。有什么帮助吗？

**编辑：**问题出在我与 Sublime Text for Java 源文件一起使用的批处理文件上。JCreator 编译运行没有问题。谢谢您的帮助。尽管！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:14:16.690

位于`controls`文件夹中的类的包名称应为`ribbon.controls`. 文件夹结构由包命名和层次结构一对一匹配。

所以在`ribbon`文件夹中，你把`package ribbon`. 在`ribbon/controls`文件夹中，您将`package ribbon.controls`. 在`ribbon/controls/foo`您使用的文件夹`package ribbon.controls.foo`中，等等。

# php - 从具有多行的嵌套查询中获取选择

> ID：16155870
> 
> 赞同：0
> 
> 时间：2013-04-22T20:12:29.067
> 
> 标签：php, mysql, nested-queries

下面是给定的表格。

```
----------------------------------
| area   |  country  |   date     |  
----------------------------------
| a1     |     c1    | 13-01-2013 | 
----------------------------------
| a2     |     c2    | 06-01-2013 | 
----------------------------------
| a3     |     c1    | 12-01-2013 | 
----------------------------------
| a4     |     c2    | 10-01-2013 | 
----------------------------------
| a5     |     c3    | 13-01-2013 | 
----------------------------------
| a1     |     c1    | 13-01-2013 | 
----------------------------------
| a2     |     c2    | 06-01-2013 | 
----------------------------------
| a3     |     c1    | 12-01-2013 | 
----------------------------------
| a4     |     c2    | 10-01-2013 | 
----------------------------------
| a5     |     c3    | 13-01-2013 | 
```

我希望我的查询能够跟随。

“显示在 2 个给定日期之间多次出现该地区的国家/地区的名称。”

我尝试了以下查询，但它给了我一个错误。> #1242 - 子查询返回多于 1 行

```
SELECT country
FROM table
WHERE area = (
SELECT area
FROM table
WHERE dateandtime > ' 13-01-2013'
AND dateandtime < '20-01-2013'
GROUP BY area
HAVING count(DISTINCT date) > 1 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:16:34.063

要将值与值列表进行比较，您需要使用`IN`. 我还进行了一些更改以修复您的语法。

```
SELECT country
FROM table
WHERE area IN (
SELECT area
FROM table
WHERE dateandtime > ' 13-01-2013'
AND dateandtime < '20-01-2013'
GROUP BY area, country, `date`
HAVING count(date) > 1 )
); 
```

我相信查询也可以简化为：

```
SELECT country
FROM table
GROUP BY area, country, `date`
HAVING count(date) > 1
AND dateandtime BETWEEN '14-01-2013' AND '19-01-2013'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:16:56.000

如果你想要一个国家，不要选择一个地区：

```
SELECT DISTINCT country
FROM (
   SELECT country
   FROM table
   WHERE dateandtime > ' 13-01-2013'
   AND dateandtime < '20-01-2013'
   GROUP BY area
   HAVING count(DISTINCT date) > 1
) areas; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:24:15.840

你可能会找这个

```
 SELECT country
    FROM table1

    WHERE date between ' 13-01-2013' AND  '20-01-2013'

    GROUP BY country
    HAVING count(date) > 1 ; 
```

[**在这里演示**](http://sqlfiddle.com/#!2/aa1c1)

# .net - 在VB.NET中调用hide方法后我可以使用backgroundWorker吗

> ID：16155871
> 
> 赞同：1
> 
> 时间：2013-04-22T20:12:29.567
> 
> 标签：.net, vb.net, sqlite, backgroundworker, vb.net-2010

我有一个关于后台工作人员的简单问题。我从未使用过它，所以我不知道它是如何工作的。我正在使用 VB.NET express 2010。我只想在表单的 backgroundWorker 中进行数据库监控。

以下是我想要实现的几件事。

1.  使用 select 语句监控 SQLite DB 文件。
2.  从数据库中提取数据并将它们放入变量中。
3.  比较具有特定条件的值，如果匹配，则将值传递给另一个表单并调用它。
4.  继续监控。
5.  我希望后台工作人员在`form.hide()`调用表单的方法时执行此操作。

请给出您宝贵的答复，如果我不是正确的方法，请建议另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:09:27.330

隐藏表单不会停止后台工作者——实际上关闭表单不会停止它——表单会等待后台工作者的 isBusy 属性报告 false 后再继续。

* * *

**更新以回应新评论**

您可能最好使用计时器并将其他工作卸载到新线程，请参见下面的示例。如果操作尚未完成，`If _worker is nothing`则将停止重新启动操作。请务必`_worker = nothing`在流程结束时进行设置，以使其正常工作。

此外，我刚刚快速输入了此内容，它可能无法开箱即用，但应该为您提供一个起点。

```
Imports System.Threading

Public Class Form1

    Dim _worker As Thread

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        Timer1.Interval = 10000
        'interval in milliseconds so 1000ms = 1 second / above 10000 = 10 seconds

        Timer1.Enabled = True
        Timer1.Start()

    End Sub

    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        StartWorkerThread()
    End Sub

    Private Sub StartWorkerThread()

        If _worker Is Nothing Then
            _worker = New Thread(AddressOf myWorker)
            _worker.Start()

        End If

    End Sub

    Private Sub myWorker()
        'do your work here...use an event or a delate to fire another sub/function on the main thread if required

            'when finished
            _worker = nothing
            'Important! This will allow the operation to be started again on the timer tick
        End Sub

    End Class 
```

# java - 正则表达式：查找字符串和数字

> ID：16155873
> 
> 赞同：1
> 
> 时间：2013-04-22T20:12:36.700
> 
> 标签：java

我的 toString 有一个包含字符串 printet 行的文件，如下所示：

> [名称：*值*][年龄：*值*][cpr编号：*值*][组： *值*][活动：*值*][平均成绩：*浮动值*]

我有一个带有读取方法的类，它读取文件并将每一行作为 ArrayList 中的对象返回。

现在回到我的主类，我试图查看列表中的每个对象，这就是我卡住的地方。我正在尝试查找平均等级高于 4 的对象。有人可以帮我正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:29:26.810

您可以使用正则表达式解析每个`String`并将键-> 值对放入`Map`. 如果需要，这将允许您访问其他值。

您需要做的就是，在循环中，从 the 中获取密钥`Map`并将其解析为 a`float`并检查它的值

```
public static void main(String[] args) throws ParseException {
    final String[] strings = new String[]{
        "[Name: Bob][age: 27][cprNumber: 1234][group: A][Active: true][Average Grade: 4.1]",
        "[Name: Alice][age: 17][cprNumber: 4321][group: A][Active: true][Average Grade: 4.5]",
        "[Name: James][age: 33][cprNumber: 2134][group: B][Active: true][Average Grade: 2.2]",
        "[Name: Frank][age: 23][cprNumber: 3124][group: B][Active: false][Average Grade: 3.1]"
    };
    final Pattern pattern = Pattern.compile("\\[([^:]++):\\s([^]]++)]");
    final Collection<Float> grades = new LinkedList<Float>();
    for (final String string : strings) {
        final Map<String, String> map = new HashMap<>();
        final Matcher matcher = pattern.matcher(string);
        while (matcher.find()) {
            final String key = matcher.group(1).trim();
            final String value = matcher.group(2).trim();
            map.put(key, value);
        }
        System.out.println(map);
        final float grade = Float.parseFloat(map.get("Average Grade"));
        if (grade > 4) {
            grades.add(grade);
        }
    }
} 
```

输出：

```
{Name=Bob, Active=true, cprNumber=1234, age=27, Average Grade=4.1, group=A}
{Name=Alice, Active=true, cprNumber=4321, age=17, Average Grade=4.5, group=A}
{Name=James, Active=true, cprNumber=2134, age=33, Average Grade=2.2, group=B}
{Name=Frank, Active=false, cprNumber=3124, age=23, Average Grade=3.1, group=B}
[4.1, 4.5] 
```

这个例子有 a`String[]`但使用 a`List`不会有任何区别。

您可以创建一个`Object`来保存该值 - 这将是一种更面向对象的方法。

**编辑**

这是一个使用`spilt`. 它的硬编码要多得多-

```
public static void main(String[] args) throws ParseException {
    final String[] strings = new String[]{
        "[Name: Bob][age: 27][cprNumber: 1234][group: A][Active: true][Average Grade: 4.1]",
        "[Name: Alice][age: 17][cprNumber: 4321][group: A][Active: true][Average Grade: 4.5]",
        "[Name: James][age: 33][cprNumber: 2134][group: B][Active: true][Average Grade: 2.2]",
        "[Name: Frank][age: 23][cprNumber: 3124][group: B][Active: false][Average Grade: 3.1]"
    };
    final Collection<Float> grades = new LinkedList<Float>();
    for (final String string : strings) {
        final String[] values = string.split("[\\[\\]]+|:");
        final float gpa = Float.parseFloat(values[12].trim());
        if (gpa > 4) {
            grades.add(gpa);
        }
    }
    System.out.println(grades);
} 
```

输出是一样的：

```
[4.1, 4.5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:35:56.723

正则表达式不适合数字计算/比较。

如果您的问题中的双引号确实存在于您的文件中。对于您的示例，您可以只获得一行，这将为您提供浮点数（在字符串中）。

```
row.split("\\"")[1]; 
```

然后你可以检查上面的值`>4`，你可能需要先将其转换为数字。

如果你可以使用第三部分库，番石榴有一个很好的`filter()`功能，你可以看看。

**编辑**

如果双引号不在您的文件中，您仍然可以使用`split()`

```
String[] arr=row.split("(: |])");
arr[arr.length-1] //this is the float 
```

例如：

```
final String[] arr = "[Name: value][age: value][cprNumber: value][group: value][Active: value][Average Grade: 4343.0]".split("(: |])");
    System.out.println(arr[arr.length - 1]); 
```

输出：

```
4343.0 
```

# python - 获取窗口内容到文本文件

> ID：16155874
> 
> 赞同：2
> 
> 时间：2013-04-22T20:12:46.027
> 
> 标签：python, python-2.7, sendkeys, pywinauto

我正在尝试使用`HwndWrapper.Texts()`所谓的“返回此控件的每个项目的文本”，但它只返回“战斗计划设置对话框”的磁贴，为什么会发生这种情况？

代码是这样的：

```
prog=application.Application()
prog.connect_(path=r'D:\Thesis\Euroscope\Euroscope.exe')
w_handle = pywinauto.findwindows.find_windows(title=u'Fight plan setting dialog', class_name='#32770')[0]
window = prog.window_(handle=w_handle)
c=prog.Fightplansettingsdialog.Texts() 
```

这是我试图从中复制的窗口屏幕：

[http://imageshack.us/photo/my-images/802/newpicturewe.png/](http://imageshack.us/photo/my-images/802/newpicturewe.png/)

我花了一个下午阅读 pywinauto 文档，但我无法找到一种方法将像以前一样的窗口内容放入文本文件中（除了单击并使用 TypeKeys 复制每个项目，`DoubleClick()`然后`Ctrl+C`使用太长的 TypeKeys ）。有任何想法吗？

编辑：另外，我发现`PrintControlIdentifiers`不能轻易保存到字符串文件中。当我要求 c 时，执行 c=prog.PrintControlIdentifiers() 返回 None。有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:14:35.723

您可以通过遍历所有子项来获取窗口中的所有文本。

```
all_texts = []
for child in window.Children():
  all_texts.extend(child.Texts())
all_texts = filter(lambda t:t, all_texts) # clear empty texts 
```

顺便说一句，窗口似乎应该被称为“飞行计划......”:-)

PS。我很乐意帮助虚拟控制器！

英国HH-MDN91

# firefox - canvas.drawWindow 不是函数

> ID：16155876
> 
> 赞同：2
> 
> 时间：2013-04-22T20:12:50.910
> 
> 标签：firefox, canvas, image-capture

我正在努力将 iFrame 的内容添加到画布，以便将其保存为图像。我在 FF 中收到“canvas.drawWindow 不是函数”错误。

我了解这仅适用于 Chrome 权限 - 如何启用 chrome 权限或如何避免该错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T20:15:12.677

[drawWindow()](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D#drawWindow%28%29)是属于[CanvasRenderingContext2D](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D)的方法，而不是[HTMLCanvasElement](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement) (canvas) 本身。根据文档，“要获取 [上下文] 对象，请在画布上调用 getContext()，提供“2d”作为参数”

例子：

```
var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d');
ctx.drawWindow(...); 
```

# c# - 如何从 nib 中修复此“在托管对象上调用选择器 ... 已被 GC'ed”，其中包含未使用的自定义 UITableViewCell？

> ID：16155880
> 
> 赞同：2
> 
> 时间：2013-04-22T20:13:01.073
> 
> 标签：c#, uitableview, xamarin.ios

我有一个示例项目，我在其中创建了一个库存表视图，最终将使用一系列自定义表视图单元格。表视图的 nib 包含定义了自定义控制器 (TrackingViewController) 的视图，该控制器本身包含一个表视图作为子视图。笔尖还包含一个自定义 UITableViewCell，我有一天会在表格中使用它。但是现在自定义单元格没有在任何地方引用或使用；它只存在于笔尖内。

当应用程序尝试引用自定义视图控制器的视图（即 TrackingViewController 实例的 View 属性）时，应用程序崩溃并显示消息“System.Exception: Selector 从objective-c 在类型为 Empty1.SendDataRowCell ( 0xCFE4900) 已被 GC 处理”。我没有实例化可以调用任何选择器的 SendDataRowCell 类的任何实例，所以我不理解这条消息。我没有将对任何自定义单元对象的引用传递给 Objective-C，因为我从未创建过一个。我什至还没有为表设置 UITableViewSource 实例。

这是我在界面生成器中的 nib 文件的屏幕截图：http: [//i.imgur.com/wb5zDlp.png](http://i.stack.imgur.com/dLqz7.png)

这是一个包含示例项目的所有代码的要点，在该示例项目中，我能够在每次应用程序启动时始终如一地重现问题。请注意，这不是一个功能齐全的应用程序，也不打算这样做；它只是为了证明这个问题而存在。 [https://gist.github.com/cscibri/5437899](https://gist.github.com/cscibri/5437899)

我在 Windows 7 x64 上的 Visual Studio 2012 中构建这个项目，我使用的是 Xamarin Studio 版本 4.0.4（构建 2），单点触控版本是 6.2.3.0（8d98f5e）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:43:55.773

您需要在您的 SendDataRowCell 类中创建一个采用 IntPtr 的构造函数：

```
SendDataRowCell (IntPtr handle)
    : base (handle)
{
} 
```

这是 iOS 实例化 SendDataRowCell 实例时将使用的构造函数。

# sql - 有什么方法可以转换字符串模式，如下图所示？

> ID：16155882
> 
> 赞同：0
> 
> 时间：2013-04-22T20:13:08.027
> 
> 标签：sql, regex, perl, sas

![在此处输入图像描述](https://i.stack.imgur.com/0F74c.jpg)

尝试将上表中的“当前”模式转换为数据集中的“将其转换为”模式...示例显示在接下来的 2 列中，每个列....我尝试了不同的方法，但我无法获得要求输出......这是获取输入数据的代码......

```
 data Current;
Input Currently :$40.;
Datalines;
HiKumar"^TM1()^",test
HiKumar"^TM2()^"
HiKumar^TM3()^HiKumar
HiKumar^f(‘VARNAME’).any(‘#’)^
HiKumar^f(‘VARNAME’)^
HiKumar^f(‘VARNAME’).get()==’#’^
HiKumar^f(‘VARNAME’)==’#’^
HiKumar^f(‘VARNAME’).toNumber()^
HiKumar^f(‘VARNAME’).toString()^
HiKumar^f(‘VARNAME’).toString().toLowerCase()^
HiKumar^f(‘VARNAME’).toString().toUpperCase()^
HiKumar^f(‘IFCONDITION’)?’THENTEXT’:’ELSETEXT’^
HiKumar<br>
HiKumar<br/>
HiKumar<br />
HiKumar^MobileHeader()^
HiKumar^MobileFooter()^
HiKumar<u>
HiKumar</u>
HiKumar&nbsp
;
run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:45:46.817

我会使用正则表达式。你需要几个；这是一个开始。（引号字符可能会被 Web 浏览器和/或 SAS 弄乱，所以我建议手动替换它们，而不是信任复制/粘贴，如果它们一开始不起作用）。这仅标识第四行，但可以为其他行构造类似的正则表达式（有些您应该能够用于多行）。

```
data want;
set current;
rx_1 = prxparse("/\^f\(‘(\w*?)’\)\^/");
rc_1 = prxmatch(rx_1,currently);
if rc_1 ne 0 then have = prxposn(rx_1,1,currently);
run; 
```

# java - 为简单的子弹获取motionX和motionY

> ID：16155884
> 
> 赞同：0
> 
> 时间：2013-04-22T20:13:12.370
> 
> 标签：java, math

一个简单的问题，我如何找到角度motionX和motionY（每个刻度添加到射弹x和y）到达一个点。我在 x 和 y 中有起点，在 x 和 y 中有目标点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:01:48.827

向量形式：

```
displacementVec = (targetPoint - startPoint).normalized() * bulletSpeedPerFrame 
```

如果需要，这也将为您提供 3d。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:57:14.723

很简单：

```
double motionX = (double)(endX - startX)/ticksToGetBulletAcross;
double motionY = (double)(endY - startY)/ticksToGetBulletAcross;
double angleInRadians = Math.atan(motiony/motionX);
double angleInDegrees = Math.toDegrees(Math.atan(motiony/motionX)); 
```

小心舍入错误！

# c++ - 使用 pugixml 解析 XML 的正确方法

> ID：16155888
> 
> 赞同：3
> 
> 时间：2013-04-22T20:13:25.220
> 
> 标签：c++, xml, xml-parsing, pugixml

我有一个需要解析的 XML 文件，我正在努力`PugiXML`解析所有元素和属性。

我有以下 XML 文件：

```
 <?xml version = '1.0' encoding = 'UTF-8'?>
    <PanelList DefaultTheme="konami" >
            <Panel xpos="0" ypos="0" width="800" height="600" imagepath="./%THEME%/background_uga_large.png" name="AttractMode0" >
                <GameViewport xpos="0" ypos="0" width="630" height="526" name="gameviewport"/>
                <ValueLabel xpos="120" ypos="550" width="448" height="30" fontsize="18" color="white" text="Please, insert your card" name="StatusAttract" errorimagepath="./%THEME%/panel_top_error.png" pageattpendingpath="./%THEME%/panel_top_att.png" drinkpendingpath="./%THEME%/panel_top_drink.png" onclick="ShowPanel(special_panel999)" />
                <StreamingImage xpos="637" ypos="3" width="160" height="120" volume="0" text="udp:@:9001" name="attract1" />
                <Image xpos="637" ypos="130" width="160" height="390" imagepath="http://n2web/images/attract-uga.gif" />
                <FunctionButton xpos="6" ypos="534" width="68" height="60" imagepath="./%THEME%/button_shrink.png" clickimagepath="./%THEME%/button_shrink_down.png" name="window" onclick="ShowPanel(AttractModeSmall)"/>
                <FunctionButton xpos="650" ypos="534" width="68" height="60" imagepath="./%THEME%/button_attendantstart_up.png" clickimagepath="./%THEME%/button_attendantstart_down.png" name="pageattstart" onclick="PageAttendantRequest" enable="MW_ONLINE == TRUE"/>
                <FunctionButton xpos="725" ypos="534" width="68" height="60" imagepath="./%THEME%/button_drinkstart_up.png" clickimagepath="./%THEME%/button_drinkstart_down.png" name="drinkstart" onclick="DrinkRequest" enable="MW_ONLINE == TRUE"/>
            </Panel>

            <Panel xpos="0" ypos="0" width="800" height="600" imagepath="./%THEME%/background_uga_large.png" name="AttractMode1" >
                <GameViewport xpos="0" ypos="0" width="630" height="526" name="gameviewport"/>
                <ValueLabel xpos="120" ypos="550" width="448" height="30" fontsize="18" color="white" text="Please, insert your card" name="StatusAttract" errorimagepath="./%THEME%/panel_top_error.png" pageattpendingpath="./%THEME%/panel_top_att.png" drinkpendingpath="./%THEME%/panel_top_drink.png" onclick="ShowPanel(special_panel999)" />
                <StreamingImage xpos="637" ypos="3" width="160" height="120" volume="0" text="udp:@:9001" name="attract1" />
                <Image xpos="637" ypos="130" width="160" height="390" imagepath="http://n2web/images/attract-uga.gif" />
                <FunctionButton xpos="6" ypos="534" width="68" height="60" imagepath="./%THEME%/button_shrink.png" clickimagepath="./%THEME%/button_shrink_down.png" name="window" onclick="ShowPanel(AttractModeSmall)"/>
                <FunctionButton xpos="650" ypos="534" width="68" height="60" imagepath="./%THEME%/button_attendantstart_up.png" clickimagepath="./%THEME%/button_attendantstart_down.png" name="pageattstart" onclick="PageAttendantRequest" enable="MW_ONLINE == TRUE"/>
                <FunctionButton xpos="725" ypos="534" width="68" height="60" imagepath="./%THEME%/button_drinkstart_up.png" clickimagepath="./%THEME%/button_drinkstart_down.png" name="drinkstart" onclick="DrinkRequest" enable="MW_ONLINE == TRUE"/>
            </Panel>    
</PanelList> 
```

使用以下代码，我可以获得两个“面板”对象中的每一个的属性。

```
#include "pugixml.hpp"
#include <iostream>

int main()
{
    pugi::xml_document doc;
    if (!doc.load_file("allpanels.xml")) return -1;

    pugi::xml_node panels = doc.child("PanelList");

    std::cout << panels.name() << std::endl;

    for (pugi::xml_node panel = panels.first_child(); panel; panel = panel.next_sibling())
    {
        std::cout << panel.name() << std::endl;

        for (pugi::xml_attribute attr = panel.first_attribute(); attr; attr = attr.next_attribute())
        {
            std::cout << " " << attr.name() << "=" << attr.value() << std::endl;
        }
        std::cout << std::endl;
    }
    std::cout << std::endl;
} 
```

输出如下：

```
jrnVM gtkSign $ ./gtkSign 
PanelList
Panel
 xpos=0
 ypos=0
 width=800
 height=600
 imagepath=./%THEME%/background_uga_large.png
 name=AttractMode0

Panel
 xpos=0
 ypos=0
 width=800
 height=600
 imagepath=./%THEME%/background_uga_large.png
 name=AttractMode1 
```

我可以看到我正在获取两个“面板”对象中的每一个的属性，但不是每个对象的元素。文件中的每个“面板”对象都有不同的元素，所以我不能遍历树来寻找特定的元素或属性。

**问题是：**如何修改代码，以便可以遍历所有“面板”对象并获取每个对象的所有信息？

任何帮助将不胜感激。

**编辑：**

在“约翰”的帮助下，我想出了这个解决方案。谢谢约翰。

```
#include "pugixml.hpp"
#include <iostream>
#include <sstream>

int main()
{
    pugi::xml_document doc;
    std::string namePanel;

    if (!doc.load_file("allpanels.xml")) return -1;

    pugi::xml_node panels = doc.child("PanelList");

    std::cout << panels.name() << std::endl;

    for (pugi::xml_node panel = panels.first_child(); panel; panel = panel.next_sibling())
    {
        //We found a "Panel" -- print it's attributes
        for (pugi::xml_attribute attr = panel.first_attribute(); attr; attr = attr.next_attribute())
        {
            std::cout << " " << attr.name() << "=" << attr.value() << std::endl;

            std::string attrName = attr.name();
            if( !attrName.compare("name") )
            {
                namePanel = attr.value();
            }
        }
        std::cout << std::endl;

        std::cout << "Panel: "  << namePanel << std::endl;
        //Now print all elements and attributes of current "Panel"
        for (pugi::xml_node child = panel.first_child(); child; child = child.next_sibling())
        {
            std::cout << child.name() << std::endl;     // get element name
            // iterate through all attributes
            for (pugi::xml_attribute attr = child.first_attribute(); attr; attr = attr.next_attribute())
            {
                std::cout << " " << attr.name() << "=" << attr.value() << std::endl;
            }
            std::cout << std::endl;
        }
    }
    std::cout << std::endl;
} 
```

**编辑：**上述方法有效，但我不禁认为有一种更好的方法涉及单个循环。

# python - Clear 和 exit_fullscreen 似乎不起作用

> ID：16155897
> 
> 赞同：5
> 
> 时间：2013-04-22T20:14:23.880
> 
> 标签：python, python-blessings

我已经开始玩弄祝福了——到目前为止，我非常喜欢它，因为它确实让事情变得更容易了。但是我试图清除屏幕但没有成功......`enter_fullscreen`似乎可以工作，因为这会“清除”它 - 但`exit_fullscreen`不会让我回到原来的视图。

```
term = blessings.Terminal()
term.enter_fullscreen

with term.location():
    print(term.move(0,(term.width/2)-7) + term.bold_green("Test Test Test"))
    print(term.move(5,(term.width/2)-7) + term.bold_red("Test Test Test"))

time.sleep(5)
term.clear
term.exit_fullscreen 
```

这工作除了清楚，`exit_fullscreen`似乎。没有错误消息或任何东西，它似乎没有做任何事情。

有谁知道它是如何工作的？

编辑：都不是

```
term.clear 
```

也不

```
term.clear() 
```

似乎工作...

编辑2：

我几乎可以做到这一点，结果与上面相同。它进行着色和放置，但不进行清除或其他任何操作。

```
term = blessings.Terminal()

with term.location():
    print(term.move(0,(term.width/2)-7) + term.bold_green("Test Test Test"))
    print(term.move(5,(term.width/2)-7) + term.bold_red("Test Test Test")) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-05T16:22:48.813

就像 Blessings 公开的所有其他功能一样，您必须对`print`它们产生任何影响。幕后发生的事情是您的终端仿真器正在“侦听”某些序列，然后它通过采取诸如切换全屏模式或切换全屏模式之类的操作来响应。因此，就您而言，说`print term.enter_fullscreen`应该可以解决问题。如果您还有其他问题，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T08:00:07.330

当我阅读您的问题（我自己也面临同样的问题）时，我意识到我忘记了所有`term.some_formatting()`调用都返回了一个值，然后您必须打印该值。clear 函数仅返回适当的转义序列。

如果您添加： `print(term.clear())` 当您希望它被清除时，它应该可以工作。

此外，我遇到了 ex_fullscreen 的问题，所以我使用了全屏的包装样式调用：

```
with term.fullscreen():
    a_function_or_some_code() 
```

退出代码块后，您应该会返回到之前的状态。

# git - 同步 Google 代码和 GitHub

> ID：16155900
> 
> 赞同：1
> 
> 时间：2013-04-22T20:14:29.117
> 
> 标签：git, github, google-code

我在 GitHub 上有一个已经建立的 Git 存储库。现在，我想将同一个存储库镜像到 Google Code 上。要么，要么我希望 Google 代码的“源”选项卡消失或指向 GitHub。由于这似乎不可能，我如何同步两个存储库？如果第一个 Git 存储库已经建立，所有其他答案都没有涵盖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:29:49.487

假设您已经为 Github 设置了一个名为*origin*的远程（如果您按照 Github 的说明进行操作），您可以为 Google 代码添加第二个 URL：

```
git remote set-url --add origin https://project.googlecode.com/git 
```

现在，当您`git push`访问该遥控器时，您将自动同时推送到 Github 和 Google Code。这可能是让它们保持同步的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:28:42.123

只需从一个位置、Google 代码或 github 克隆 git 存储库。然后将遥控器添加到另一个仓库

```
git remote add google git://...google code clone url 
```

然后只需使用`git push google`和`git push origin`

# ios - 从 iOS 设备流式传输到 Wowza 服务器的最简单方法是什么？

> ID：16155902
> 
> 赞同：3
> 
> 时间：2013-04-22T20:14:34.470
> 
> 标签：ios, udp, rtsp, rtmp, wowza

我曾尝试使用 LiVu 和 Broadcast Me，但它与我正在尝试做的事情并不顺利。我需要将音频/视频从 iPhone 实时传输到我们的服务器（同时在本地保存）。

我试图实现一个 RTSP UDP 流，但事实证明它比我们最初想象的更具挑战性。RTSP/UDP 是首选，但无论何时将流及时发送到服务器都可以。

任何建议或框架建议都会有帮助。已经看过 iOS-RTMP-Library 但它太贵了，我们现在无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T10:40:33.677

我不知道您的预算，但您可以查看[ANGL 库](http://angl.tv/lib/)，它在 RTMP 上对我们来说效果很好。

# templates - 将数据绑定到 javascript 模板 (jQuery mobile)

> ID：16155911
> 
> 赞同：0
> 
> 时间：2013-04-22T20:15:10.223
> 
> 标签：templates, jquery-mobile, asp.net-mvc-4

首先，我试图将静态数据显示到列表视图中。代码是这样的：

```
<ul id="accessList">

</ul>

<script>

    var dataTest = [{"abc":"123"}, {"abc":"456"}];

    (function () {
        $(document).bind("pageinit", function () {
            $("#accessList").html($("#accessTemplate").render(dataTest)).listview();
        }());

    }());

</script>

<script id="accessTemplate" type="text/x-jsrender">

    <li>
        <div>{{:abc}}</div>
    </li>
</script> 
```

但它给了我以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'render' 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:46:36.543

我在 jQuery Mobile 之前添加了 jsrender 脚本，就像 Scott 建议的那样。

# android - Android - 如何有“下划线”？

> ID：16155913
> 
> 赞同：2
> 
> 时间：2013-04-22T20:15:15.180
> 
> 标签：android

我怎样才能做到这一点（或类似的东西）？寻找一些将成为元素宽度的“下划线”。正在考虑一个drawable，但我不太确定这将如何与拉伸一起工作，而不是什么。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/VU0vi.png)

**编辑**

制作了一个新的 XML 文件并将其包含在每个标题下，效果很好。

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <View
        android:id="@+id/layout_underline"
        android:layout_width="match_parent"
        android:layout_height="3dip"
        android:background="@color/layout_underline" />

</merge> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:17:31.990

创建一个 9-patch 图像并将其设置为 TextViews 的背景。

这是 9-patch 资源页面：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:42:17.073

您可以通过在 XML 中创建视图来获取它，如下所示：

```
 <View 
      android:layout_width="fill_parent"      
      android:layout_height="2dp" /> 
```

您可以根据需要对其进行自定义，

希望能帮到你

# android - Android 如何从 SQLite 游标查询中获取返回值字符串并在 Edittext 中显示？

> ID：16155914
> 
> 赞同：1
> 
> 时间：2013-04-22T20:15:16.880
> 
> 标签：android, sqlite, cursor, android-edittext

当我运行 SQLite 游标查询时，它无法在编辑文本中显示结果字符串。

它失败并显示 Logcat 消息：

```
java.lang.RuntimeException: Unable to start activity
android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
```

如何从光标中获取查询结果值字符串并在edittext中显示？

```
public class Books extends Activity implements OnClickListener {

 private BooksData books;

 @Override
   protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.books);

        books = new BooksData(this);

        }

        SQLiteDatabase db1 = books.getReadableDatabase();

        SEARCH_TERM = "math";

        EditText edittext = (EditText) findViewById(R.id.edittext1);

        // Get the value from TITLE when the TOPIC value is specified, ie such as "math".

        Cursor cursor_2 = db1.query(TABLE_NAME, new String[] {"_id", "TOPIC", "TITLE"}, "TOPIC = ?", new String[]{ ""+SEARCH_TERM+"" }, null, null, null, null);

        String TEMP_DATA = cursor_2.getString(2);

        edittext.setText(TEMP_DATA);

books.close();
cursor_2.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:18:24.120

您需要先移动到光标中的第一条记录，然后才能从中提取数据。

```
Cursor cursor_2 = db1.query(TABLE_NAME, new String[] {"_id", "TOPIC", "TITLE"}, "TOPIC = ?", new String[]{ ""+SEARCH_TERM+"" }, null, null, null, null);

if (cursor_2 == null)
   return;

try{
   if (cursor_2.moveToFirst()) // Here we try to move to the first record
        edittext.setText(cursor_2.getString(2)); // Only assign string value if we moved to first record
}finally { 
   cursor_2.close();
} 
```

# javascript - edgePreload.js 与 jQuery.ScrollTo 冲突

> ID：16155918
> 
> 赞同：0
> 
> 时间：2013-04-22T20:15:40.923
> 
> 标签：javascript, jquery, adobe-edge

我在我的网页上使用 Edge animate 作为标题。我正在尝试使用 Ariel Flesler 提供的 jQuery.ScrollTo 插件将幻灯片效果从一个页面合并到另一个页面。问题是当我包括

```
 <script type="text/javascript" charset="utf-8" src="spolightest_edgePreload.js"></script> 
```

幻灯片效果停止工作。我已将其范围缩小到此文件，因此我知道这是导致问题的原因。有人处理过这个问题吗？有谁知道在网页中实现幻灯片效果的更好方法。此处包含大量的 javascript，因此这是我正在尝试使其工作的网站。您可以在那里查看脚本。

www.premierentertainmentevents.com

我尝试以不同的顺序调用 javascript 文件，包括来自谷歌的托管 jquery 库，在边缘预加载文件中包含 jqueryscroll.js。

我不知所措。有些东西与其他东西冲突，我不知道是什么。

任何想法都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:58:09.053

我可以从您的页面中看到的一件事是脚本包含的顺序现在不正确。

您在 adobe edge 包含之后包含 jquery，以便在控制台中我可以看到错误：

```
Uncaught ReferenceError: jQuery is not defined /spolightest_edge.js:2
Uncaught ReferenceError: jQuery is not defined spolightest_edgeActions.js:8 
```

我知道您尝试了不同的方法，但请在其他任何内容之上包含 jquery，以便我可以查看是否发生其他错误。

# python - 在 Python 中使用 fping 获取 ping 时间

> ID：16155921
> 
> 赞同：1
> 
> 时间：2013-04-22T20:15:49.393
> 
> 标签：python, network-programming, ping, icmp

我有一个 IP 列表（从 Python Scapy 中的跟踪路由生成），我需要发送 3 个 ping 来测量每个跃点的平均时间。我的第一个方法是使用套接字构建 ICMP 请求并测量响应时间。但是在 ping 多个主机时它是不准确且缓慢的。我确实尝试使用正常的 Linux ping，但是`for i`在等待响应时我的循环被阻塞了，显然我希望同时发送所有 ping 请求。

所以我正在寻找一种`fping`在 Linux 中使用的方法，我给出一个 IP 列表，然后让它完成构建数据包的工作。但我不确定如何将参数列表传递给 shell 命令或将数据返回到数组中以在完成后进行进一步处理。

任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:24:19.540

我不太了解`fping`，但是像这样的东西......

```
import subprocess

CMD = ['fping', 'param1', 'param2']

result = subprocess.check_output(CMD) 
```

...将运行，并在进程终止后将`fping param1 param2`输出作为字符串放入`result`变量中。`fping`

您可以将输出拆分为带有`result.splitlines()`.

这是一个快速的单行示例，`ping`用于获取到 localhost 的三个 ping 时间...

```
>>> [line.rpartition('=')[-1] for line in subprocess.check_output(['ping', '-c', '3', 'localhost']).splitlines()[1:-4]]
['0.028 ms', '0.023 ms', '0.025 ms'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-14T14:38:17.823

以下函数解析`fping`的输出并返回一个字典，其中包含每个主机的可用性：

```
import subprocess
from typing import List, Dict

def ping(hosts: List[str], timeout: int = 500) -> Dict[str, bool]:
    command = ["fping", "-t", str(timeout)] + hosts
    proc    = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    parse   = lambda stream: [
        line.split(" ")
        for line
        in stream.read().decode("UTF-8").split("\n")
        if len(line) != 0
    ]
    lines = parse(proc.stdout) + parse(proc.stderr)
    return {p[0]: p[-1] == "alive" for p in lines if p[1] == 'is'}

print(ping(["google.com", "asdfasdfasdf1234.com", "stackoverflow.com"]))
# {'google.com': True, 'stackoverflow.com': True, 'asdfasdfasdf1234.com:': False} 
```

# node.js - 尝试从维基百科获取图像并在 node.js 中提供它

> ID：16155924
> 
> 赞同：0
> 
> 时间：2013-04-22T20:15:57.640
> 
> 标签：node.js

我正在尝试在 node.js 中创建一个网络服务器，它从 Wikipedia 下载图像并将其服务器放在页面上。我无法让它工作。我将我的代码粘贴在一个在线沙箱中：[http](http://runnable.com/UXWTyD3pTQ1RAADe) ://runnable.com/UXWTyD3pTQ1RAADe 。

这是我的代码：

```
var http = require('http');
var fs = require('fs');

var fd = fs.open('name.jpeg', 'r+');

var options = {
    host:'upload.wikimedia.org',
    port:80,
    path:'/wikipedia/commons/1/15/Jagdschloss_Granitz_4.jpg'
};

var server = http.createServer(function(req, res){
    res.writeHead(200, ['Content-Type', 'text/html']);
    http.get(options,function(res) {
      res.on('data', function (chunk) {
        fs.write(fd, chunk, 0, chunk.length, 0, null);
      });
      res.on('end',function(){
        fd.end();
        res.send("<img src='name.jpeg'></img>");
        res.end();
      });
    });
}); 
```

server.listen(process.env.OPENSHIFT_NODEJS_PORT, process.env.OPENSHIFT_NODEJS_IP);

我不断遇到：

> 节点服务器.js

跑步...

```
fs.js:415                                                                                    
  binding.write(fd, buffer, offset, length, position, wrapper);                              
          ^                                                                                  
TypeError: Bad argument                                                                      
    at Object.fs.write (fs.js:415:11)                                                        
    at IncomingMessage.<anonymous> (server.js:18:12)                                         
    at IncomingMessage.EventEmitter.emit (events.js:96:17)                                   
    at IncomingMessage._emitData (http.js:359:10)                                            
    at HTTPParser.parserOnBody [as onBody] (http.js:123:21)                                  
    at Socket.socketOnData [as ondata] (http.js:1485:20)                                     
    at TCP.onread (net.js:404:27) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:16:52.277

工作代码 - 保存图像文件：

```
/**Try to get an image from Wikipedia and return it**/

var http = require('http');
var fs = require('fs');

var options = {
  host:'upload.wikimedia.org',
  port:80,
  path:'/wikipedia/commons/1/15/Jagdschloss_Granitz_4.jpg'
};

var server = http.createServer(function(req, res){
  res.writeHead(200, ['Content-Type', 'text/html']);
  http.get(options,function(imgRes) {
    imgRes.pipe(fs.createWriteStream('name.jpeg'));
    res.end("<html><img src='name.jpeg'></img></html>");
  });
});

server.listen(process.env.OPENSHIFT_NODEJS_PORT, process.env.OPENSHIFT_NODEJS_IP); 
```

您还需要 node-static ( [http://www.sitepoint.com/serving-static-files-with-node-js/](http://www.sitepoint.com/serving-static-files-with-node-js/) ) 来提供静态文件`name.jpeg`。

***但另一种方法是手动完成：***

```
var http = require('http');
var fs = require('fs');

var options = {
  host:'upload.wikimedia.org',
  port:80,
  path:'/wikipedia/commons/1/15/Jagdschloss_Granitz_4.jpg'
};

var server = http.createServer(function(req, res){
  if(req.url == '/name.jpeg') {
    res.writeHead(200, ['Content-Type', 'image/jpg']);
    try {
      var imgData = fs.readFileSync('name.jpeg');
      res.end(fs.readFileSync('name.jpeg'));
    } catch(err) {
      res.end();
    }
  }
  else {
    res.writeHead(200, ['Content-Type', 'text/html']);
    http.get(options,function(imgRes) {
      imgRes.pipe(fs.createWriteStream('name.jpeg'));
      res.end("<html><img src='name.jpeg'></img></html>");
    });
  }
});

server.listen(process.env.OPENSHIFT_NODEJS_PORT, process.env.OPENSHIFT_NODEJS_IP); 
```

# asp.net-mvc - 如何从 ApiControler 获取图像

> ID：16155925
> 
> 赞同：-1
> 
> 时间：2013-04-22T20:15:57.790
> 
> 标签：asp.net-mvc, image, asp.net-web-api

我创建了一个模型和一个视图，并使用简单的 GameController 从模型中显示了一些需要的数据。

现在我正在搜索（没有找到任何有用的东西）如何获取 9 张图像并使用 ApiController（9 张可用于拼图的图像）在页面中显示它们并修改 GameController 返回的页面，而不加载整个页。

这个想法是我想从 ApiController 调用该方法 9 次，并在网格/表格或某处显示图像。

我可以举一个例子来说明如何做到这一点，因为我没有在谷歌上找到相关的东西，而且有知识的人可以很快地做到这一点。

如果有什么不清楚的，就问吧。

谢谢，加布里埃尔萨斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:49:12.427

[这里](http://forums.asp.net/t/1822496.aspx/1)有一个例子：

```
public HttpResponseMessage GetImage()
{
    HttpResponseMessage response = new HttpResponseMessage();
    response.Content = new StreamContent(new FileStream(@"path to image")); // this file stream will be closed by lower layers of web api for you once the response is completed.
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("image/png");

    return response;
} 
```

# javascript - 加载其他内容后 jQuery 无法正常工作

> ID：16155928
> 
> 赞同：1
> 
> 时间：2013-04-22T20:16:03.857
> 
> 标签：javascript, jquery, document-ready

我对javascript很陌生，但我在我的网站上使用它。上周我发现了一个通过 jQuery 将其他内容加载到我的页面的脚本。一切都很好，直到我注意到我的其他脚本因此而停止工作。例如，我有一个绑定复选框的脚本：

```
<script>
$(document).ready(
    function() {
        $('.class_of_checkbox').click(
            function() {
                if(this.checked == true) {
                    $(".class_of other_checkbox").attr('checked', this.checked);
                }
            }
        );
    }
);
</script> 
```

它是内联代码。我读过它可能是由函数 ready() 引起的，该函数仅在加载 DOM 时触发，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:20:56.787

使用 ajax 加载的动态元素需要委托的事件处理程序：

```
$(document).ready(function() {
    $(document).on('change', '.class_of_checkbox', function() {
        if (this.checked) 
          $(".class_of other_checkbox").prop('checked', this.checked);
    });
}); 
```

将第二个替换`document`为最近的非动态父级，`prop()`用于属性，并使用`change`事件来捕获复选框状态的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:20:24.497

当 ajax 调用完成时，使用 $.ajaxComplete 重新绑定您的操作

[http://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

```
$(document).ajaxComplete(function() {
    $('.class_of_checkbox').click(
        function() {
            if(this.checked == true) {
                $(".class_of other_checkbox").attr('checked', this.checked);
            }
        }
    );
}); 
```

# android - Android + Scala + 库项目：NoClassDefFound

> ID：16155930
> 
> 赞同：1
> 
> 时间：2013-04-22T20:16:08.183
> 
> 标签：android, eclipse, scala, noclassdeffounderror, multiple-projects

我有一个与下面的 SO 问题类似的问题，但使用 scala 作为我选择的语言：

[自 sdk 工具更新 17 以来，Android 项目在 Eclipse 中引用“普通”java 项目](https://stackoverflow.com/questions/9889572/android-project-referencing-normal-java-project-in-eclipse-since-sdk-tools-upd)

基本上，如果我使用 java 设置了一个常规的 android 项目，一个常规的 java 库项目和一个“胶水”android 库项目，如上面链接中所述，一切正常，我可以使用我引用的常规 java 项目中的代码。

但是，如果我尝试使用 scala 项目重复相同的过程，我会在启动时收到 noclassdeffound 异常。（如果我将代码从常规引用的项目移动到主 android 项目中，错误就会消失并且一切正常。）

关于寻找什么的任何提示？任何人都在成功地做同样的事情吗？

# php - 如果表单验证失败，请不要提交表单

> ID：16155931
> 
> 赞同：1
> 
> 时间：2013-04-22T20:16:11.010
> 
> 标签：php, javascript, dom

我写

```
<form action='test.php' method='post'>
.............
<submit onclick='validate();'></submit>
</form>

function valiadte(){
  if(true){
      var form = getElementByID(........);
      form.submit();
  }
  else alert('error');
} 
```

但如果失败，它仍然会转到 test.php。如果失败，我如何避免它转到 test.php，或者我可以将一些消息传递给 test.php？

提前谢谢。

原始源代码：

```
 <form id="tabS" method="post" action="stdRegister.php">
                    <label>Account</label>
                    <input id="stdAccount" name="account" type="text" value="" class="input-xlarge" onblur="validateAccountAndID(this,document.getElementById('stdAccountHelp'));">
                    <span class="help-block" id="stdAccountHelp"></span>
                    <label>Password</label>
                    <input id="stdPassword" name="password" type="password" value="" class="input-xlarge" onblur="validatePassword(this,document.getElementById('stdPasswordHelp'));">
                    <span class="help-block" id="stdPasswordHelp"></span>
                    <label>Name</label>
                    <input id="stdName" name="name" type="text" value="" class="input-xlarge" onblur="validateName(this,document.getElementById('stdNameHelp'));">
                    <span class="help-block" id="stdNameHelp"></span>
                    <label>IDNumber</label>
                    <input id="stdID" name="idNumber" type="text" value="" class="input-xlarge" onblur="validateAccountAndID(this,document.getElementById('stdIDHelp'));">
                    <span class="help-block" id="stdIDHelp"></span>
                    <label>Department</label>
                    <select id="stdDepartment" name="department">
                        <?php
                            while ($row = $result->fetch_assoc()){
                                    echo"<option>";
                                    echo $row['department'];
                                    echo"</option>";
                        }
                        ?>
                    </select>
                    <label>Grade</label>
                    <select id="stdGrade" name="grade">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                    </select>
                    <div>
                        <button class="btn btn-primary" onclick="submitStudetForm();">Create Account</button>
                    </div>
                    <span class="help-block" id="stdRegisterHelp"></span>
                </form>

function submitStudentForm(){
    var form = document.getElementById('tabP');
    if(
        validateAccountAndID(document.getElementById('stdAccount'),document.getElementById('stdAccountHelp')) 
        && validatePassword(document.getElementById('stdPassword'),document.getElementById('stdPasswordHelp')) 
        && validateName(document.getElementById('stdName'),document.getElementById('stdNameHelp')) 
        && validateAccountAndID(document.getElementById('stdID'),document.getElementById('stdIDHelp')) ){
       form.submit();
       alert("success");
    }
    else {
        alert("Something wrong in the form. Please check again!");
        return false;
        //window.location.href='index.php';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:18:01.727

只要有机箱里的功能`return false`。`else`

```
function validate(){
  if(true){
      return true;
  }
  else {
       alert('error');
      return false;
  }
} 
```

你会将你的 html 更改为：

```
<input type="submit" value="Submit" onsubmit="validate()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:17:53.380

使用它来停止表单提交：

```
else {
  alert('error');
  return false;
} 
```

顺便说一句，您的函数名称是“valiadte”而不是“validate”。

# node.js - 使用 node.js 将输出重定向到日志文件

> ID：16155932
> 
> 赞同：30
> 
> 时间：2013-04-22T20:16:15.017
> 
> 标签：node.js

我有一个子进程，我在 node.js 中使用如下。我不想将输出重定向到控制台，而是将输出放在正在运行的机器上某个位置的日志文件中（并且应该适用于 windows 和 mac）。

下面的代码是我正在使用的，我想将文件输出到日志文件中。在这里需要做哪些改变？谢谢！

我的代码：

```
var spawn = require('child_process').spawn,
    ls    = spawn('ls', ['-lh', '/usr']);

ls.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

ls.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

ls.on('close', function (code) {
  console.log('child process exited with code ' + code);
}); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-22T21:17:41.843

这是使用流记录到文件的示例。

```
var logStream = fs.createWriteStream('./logFile.log', {flags: 'a'});

var spawn = require('child_process').spawn,
    ls    = spawn('ls', ['-lh', '/usr']);

ls.stdout.pipe(logStream);
ls.stderr.pipe(logStream);

ls.on('close', function (code) {
  console.log('child process exited with code ' + code);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-11-12T07:36:56.450

有两种方法可以实现这一点，一种是使用

```
let logConsoleStream = fs.createWriteStream('./logConsoleFile.log', {flags: 'a'});
let logErrorStream = fs.createWriteStream('./logErrorFile.log', {flags: 'a'}); 
```

并使用此重定向所有日志或错误

```
ls.stdout.pipe(logConsoleStream );  // redirect stdout/logs only
ls.stderr.pipe(logErrorStream );    // redirect error logs only 
```

`generalhenry`通过分离日志文件，您将拥有单独的错误日志和控制台日志文件，这与上面共享的完全相同

**在命令行的帮助下实现这一目标的第二种方法**

当您从命令行执行节点应用程序时

```
node app/src/index.js 
```

您可以在此处指定要从该应用程序重定向日志和错误的位置

使用命令行有三个流重定向命令

```
`>`     It will redirect your only stdout or logs to the specified path
`2>`    It will redirect your errors logs to the specified path
`2>&1 ` It will redirect all your stdout and stderr to a single file 
```

示例：您将如何使用这些命令

```
node app/src/index.js > ./logsOnly.txt
node app/src/index.js 2> ./ErrorsOnly.txt
node app/src/index.js 2>&1 ./consoleLogsAndErrors.txt 
```

我希望以后来的人会觉得这很有帮助

如果我做错了方式，请告诉我这将对我和其他人有所帮助谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T13:58:50.977

如果您运行 JS 脚本，`forever`那么您可以选择将日志文件定义为参数，该参数将处理您的所有 console.log 消息。更不用说让你的 nodejs 应用程序永久运行的好处了。

或者试试这个：

```
sudo forever start myapp.js 2>&1 /home/someuser/myapp/myapp.log 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-24T09:59:08.927

永久使用以下选项

永远开始 -o out.log -e err.log server.js

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-04-26T07:59:35.587

最佳答案在评论中，并在前面的问题中提到：stackoverflow.com/questions/2496710/nodejs-write-to-file

如下：

```
var fs = require('fs');
fs.writeFile("/tmp/test", "Hey there!", function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 
```

# java - Java：子类类及其子类（都超出我的范围）同时

> ID：16155933
> 
> 赞同：0
> 
> 时间：2013-04-22T20:16:23.157
> 
> 标签：java, subclass, extends, repeat

给定两个类，一个子类另一个，都超出了我的范围，所以我对它们没有任何影响，例如。

```
public class Bla {
}

public class SubBla extends Bla {
} 
```

如何在不重复代码或限制 SubBla 的特殊功能的情况下创建 Bla 和 SubBla 的自定义子类？

编辑：所以我不必：

```
public class MyBla extends Bla {
    public void someOverriddenMethodOfBla()
    {
        super.someOverriddenMethodOfBla();
        // do something custom
    }
}

public class MySubBla extends SubBla {

    // repeated code: this should do the same as MyBla's customized method
    public void someOverriddenMethodOfBla()
    {
        super.someOverriddenMethodOfBla();
        // do the same custom stuff as in MyBla's method
    }

} 
```

编辑 2，稍微清理一下：

假设我需要 Activity 和 ListActivity 这两个 android 类，它们是 Activity 的子类。现在我想在 onCreate 方法中**添加****相同**的自定义。如何在不重复代码的情况下完成此操作？

 **谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:23:26.153

如果我理解正确，您正在尝试绕过`SubBla`的实现，并`Bla`直接从`SubBla`. 您要做的基本上是 call `super.super`，这在 Java 中是做不到的

[这里](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java)有一个很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:53:53.143

实际上继承的目的是你重用代码。在 java 中只存在公共继承，这意味着方法的可访问性将保持相同的槽继承。

如果您执行 MyBla extends Bla，则来自 Bla 的所有公共方法在 MyBla 类中仍然可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:49:41.413

考虑到您的 Android 示例`Activity`，`ListActivity`子类`ListActivity`为`CustomListActivity`. 在`CustomListActivity`添加您的`onCreate()`. 现在而不是在您的应用程序中使用`Activity`或`ListActivity`使用`CustomListActivity`。**

# mysql - MySql - 拥有与在哪里

> ID：16155937
> 
> 赞同：40
> 
> 时间：2013-04-22T20:16:34.637
> 
> 标签：mysql

这两个查询有什么区别？

```
SELECT f.name, 
       u.name, 
       u.id 
FROM   families f 
       JOIN units u 
         ON f.unit_id = u.id 
HAVING u.id IN( 43, 413, 22 ) 
```

和：

```
SELECT f.name, 
       u.name, 
       u.id 
FROM   families f 
       JOIN units u 
         ON f.unit_id = u.id 
WHERE  u.id IN( 43, 413, 22 ) 
```

这两个查询的结果完全相同。那么区别在哪里呢？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-22T20:20:44.533

`WHERE`用于选择正在处理的原始表中的数据。

`HAVING`用于过滤查询生成的结果集中的数据。`SELECT`这意味着它可以在子句中引用聚合值和别名。

例如，可以写：

```
SELECT t1.val - t2.val diff
FROM t1 JOIN t2 ON (some expression)
HAVING diff > 10 
```

这不起作用，`WHERE`因为`diff`它是别名，而不是原始表列之一。你可以改写：

```
SELECT t1.val - t2.val diff
FROM t1 JOIN t2 ON (some expression)
WHERE t1.val - t2.val > 10 
```

但随后它可能必须将所有减法执行两次：一次用于选择，另一次用于生成结果集。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-04-22T20:24:40.633

sql中的have子句和where子句的区别在于where子句不能与聚合一起使用，但have子句可以。一种思考方式是，have 子句是 where 子句的附加过滤器。

哪个更好：[点击](https://www.essentialsql.com/what-is-the-difference-between-where-and-having-clauses/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-22T20:17:55.147

**在这些查询中，什么都没有。**但是如果你使用 a`GROUP BY`你会看到不同。如果您要使用 a`GROUP BY`将`HAVING`应用于组，而`WHERE`将应用于`SELECT`数据分组之前。

# xslt - node() 的显式版本是什么

> ID：16155940
> 
> 赞同：1
> 
> 时间：2013-04-22T20:16:40.470
> 
> 标签：xslt, xpath, xslt-1.0, xmlnode, apply-templates

是众所周知的 XSLT 1.0 标识模板

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

同义词

```
<xsl:template match="/|@*|*|processing-instruction()|comment()|text()">
  <xsl:copy>
    <xsl:apply-templates select="@*|*|processing-instruction()|comment()|text()"/>
  </xsl:copy>
</xsl:template> 
```

即 node() 在 match 语句中包含 / 而在 select 语句中不包含 / 是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:33:14.667

节点测试没有不同的`node()`行为，具体取决于它是在 a`match`还是在`select`属性中。身份模板的扩展版本如下：

```
<xsl:template match="@*|*|processing-instruction()|comment()|text()">
  <xsl:copy>
    <xsl:apply-templates select="@*|*|processing-instruction()|comment()|text()"/>
  </xsl:copy>
</xsl:template> 
```

`node()`node-test 匹配*任何*节点，但是当它没有给出明确的轴时，它`child::`默认在轴上。所以模式`match="node()"`不匹配文档根或属性，因为它们不在任何节点的子轴上。

您可以观察到标识模板与根节点不匹配，因为它没有输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="yes"/>

    <xsl:template match="@* | node()">
      <xsl:if test="count(. | /) = 1">
        <xsl:text>Root Matched!</xsl:text>
      </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

这会输出“根匹配！”：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="yes"/>

    <xsl:template match="@* | node() | /">
      <xsl:if test="count(. | /) = 1">
        <xsl:text>Root Matched!</xsl:text>
      </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

您可以通过在任何具有属性的文档上运行此测试来验证`node()`测试是否适用于根节点和属性：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="node()">
    <xsl:apply-templates select="@* | node()" />
  </xsl:template>

  <xsl:template match="/">
    <xsl:if test="self::node()">
      node() matches the root!
    </xsl:if>
    <xsl:apply-templates select="@* | node()" />
  </xsl:template>

  <xsl:template match="@*">
    <xsl:if test="self::node()">
      node() matches an attribute!
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

这是另一种观察`node()`测试是否适用于根节点的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes"/>

  <xsl:template match="/*">
    <xsl:value-of select="concat('The root element has ', count(ancestor::node()), 
                                 ' ancestor node, which is the root node.')"/>
  </xsl:template>
</xsl:stylesheet> 
```

# java - 在 Android 中创建自定义按钮类

> ID：16155941
> 
> 赞同：2
> 
> 时间：2013-04-22T20:16:46.363
> 
> 标签：java, android, android-emulator, custom-controls

我正在尝试为我的 android 应用程序创建自定义按钮类

```
public class TicTacButton extends Button 
```

我已经在内部设置了所有构造函数`TicTacButton`并创建了自定义方法和属性。在我的主要活动中，我尝试将按钮初始化为

```
TicTacButton btn = (TicTacButton) findViewById(R.id.button1); 
```

我得到一个

> java.castClassException。android.widget.Button 不能转换为 com.example.tictactoetitan.TicTacButton

我尝试将我的 xml 文件更改为

```
<TicTacButton
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/button1"
        android:layout_toRightOf="@+id/button1" /> 
```

它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:43:08.200

Using the full package name in the XML file fixed it.

```
<com.example.tictactoetitan.TicTacButton
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/button1"
        android:layout_toRightOf="@+id/button1" /> 
```

# iphone - youtube api v3 对 iOS 视频的评论

> ID：16155947
> 
> 赞同：0
> 
> 时间：2013-04-22T20:17:03.330
> 
> 标签：iphone, ios, objective-c, youtube-api

我正在 iPhone 上开发一个仅查看我的频道的应用程序，我需要对视频发表评论。我使用了 youtube-api v2.0，它总是以错误响应。我在 V3.0 中搜索了一个评论 API，但没有结果。任何人都可以查看以下代码，我可能实现了一些错误，否则请告诉我如何开发它。

```
 -(IBAction)commentClicked:(id)sender{
    NSString *urlStr=@"http://gdata.youtube.com/feeds/mobile/videos/W_KEuea8eIw/comments";
    NSURL *url = [NSURL URLWithString:urlStr];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    NSString *xmlString = @"<?xml version=\"1.0\" encoding=\"UTF-8\"?><entry xmlns=\"http://www.w3.org/2005/Atom\"xmlns:yt=\"http://gdata.youtube.com/schemas/2007;\"><content>This is a crazy video</content></entry/>";
        [ request setHTTPMethod: @"POST" ];
        [request setValue:@"application/atom+xml" forHTTPHeaderField:@"Content-Type"];
         [request setHTTPBody:[xmlString dataUsingEncoding:NSUTF8StringEncoding]];
        [request setValue:@"2.1" forHTTPHeaderField:@"GData-Version"];
        [request setValue:[NSString stringWithFormat:@"key=%@",kSampleDeveloperKey] forHTTPHeaderField:@"X-GData-Key"];
    [request setValue:[NSString stringWithFormat:@"Bearer %@",self.auth.accessToken] forHTTPHeaderField:@"Authorization"];
    NSURLResponse *response;
    NSError *err;
    NSData*returnData=[ NSURLConnection sendSynchronousRequest: request returningResponse:&response error:&err];
    NSString *content = [NSString stringWithUTF8String:[returnData bytes]];
    NSLog(@"responseData: %@", content);
} 
```

这是响应数据

```
 <errors xmlns='http://schemas.google.com/g/2005'>
    <error>
<domain>GData</domain>
<code>ParseException</code>
<internalReason>Element type "entry" must be followed by either attribute specifications, "&gt;" or "/&gt;".</internalReason>
</error>
</errors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:21:06.673

XML 字符串的最后一部分为`</entry/>`，这不是有效的结束标记。你想要`</entry>`。

# java - 如何在按年龄和击球率组织的数组中排序和显示值

> ID：16155953
> 
> 赞同：0
> 
> 时间：2013-04-22T20:17:29.843
> 
> 标签：java, arrays, sorting, bubble-sort

我正在尝试制作一个程序，让用户将 10 名球员的信息（姓名、年龄、位置和击球率）输入数组。输入记录后，程序应检查每个球员的信息，并仅显示年龄在 25 岁以下且平均击球次数为 0.280 或更高的球员的统计数据。显示按年龄排序的符合条件的球员。

这是代码的问题部分...问题是即使您输入了球员的数据，它也不会显示 25 岁以下且 battAvrg 为 0.280 或更高的球员的统计数据。也许冒泡排序不起作用？任何人都可以帮忙吗？

```
 public static void displayDrafts ()
{
    {

        c.clear ();
        c.print ("Display of possible draft choices.");
        int smallest, i, j, tempage;
        String tempname;
        double tempAvrg;
        for (i = 1 ; i <= 10 ; i++)
        {
            smallest = i;

            for (j = i ; j <= 10 ; j++)
            {
                if (age [j] < age [smallest])
                    smallest = j;
            }
            tempage = age [i];
            tempAvrg = battAvrg [i];
            age [i] = age [smallest];
            battAvrg [i] = battAvrg [smallest];
            age [smallest] = tempage;
            battAvrg [smallest] = tempAvrg;
        }
        for (x = 1 ; x <= 10 ; x++)
        {
            if (age [x] < 25 && battAvrg [x] >= 0.280) 
            {
                c.println ("Name: " + name [x]);
                c.println ("Age: " + age [x]); 
                c.println ("Position: " + position [x]);
                c.println ("Batting Average " + battAvrg [x]);
            }
        }
    }
} 
```

# ajax - 动态添加类别 YII

> ID：16155962
> 
> 赞同：0
> 
> 时间：2013-04-22T20:18:10.307
> 
> 标签：ajax, forms, yii, submit

我有一个表单，用户可以创建一篇文章并从 dropDownList 中选择一个类别，选择类别用户需要在类别菜单中创建它。

现在我想在 dropDownList 附近添加按钮，在用户单击添加的位置打开一个弹出窗口，使用 AJAX 我需要执行 POST，然后从 Article 表单中更新 dropDownList。

用 Yii 做这件事的最好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:33:51.870

该网站提供了一个非常好的简单弹出联系表教程：

> [http://www.html-form-guide.com/contact-form/simple-modal-popup-contact-form.html](http://www.html-form-guide.com/contact-form/simple-modal-popup-contact-form.html)

使用 AJAX 的依赖 dropDownList 的简单解决方案：

> [http://www.yiiframework.com/wiki/429/an-easy-solution-for-dependent-dropdownlist-using-ajax/](http://www.yiiframework.com/wiki/429/an-easy-solution-for-dependent-dropdownlist-using-ajax/)

# c# - EF 代码优先迁移：SetInitializer 和 Initialize

> ID：16155968
> 
> 赞同：0
> 
> 时间：2013-04-22T20:18:28.533
> 
> 标签：c#, .net, entity-framework, code-first

我正在研究代码优先迁移，我正在尝试使用基于代码的迁移（Automatedmigration=false）。我现在能做的是：

-运行启用迁移

-添加迁移初始

- 使用“更新数据库”运行迁移（创建迁移历史表）

- 更改我的模型

- 执行添加迁移“changesInMyModel”

现在我想做的是能够自动运行我所有的迁移。使用类似的东西：

```
[Test] 
public void UpdateDataModel()
{
 Database.SetInitializer(
 new MigrateDatabaseToLatestVersion<MyContext, MyConfiguration>());
 var dc = new MyContext();
 dc.Database.Initialize(true);
} 
```

执行测试并转到数据库后，我看不到任何更改。我能做些什么？欢迎提出建议！

更新：Myconfiguration 类使用 Automatedmigration=false。

MyConfiguration 类是公共的并且在其父项目之外可见。

我没有在 app.config 中使用任何配置，因为我使用的是源代码中的 Database.SetInitializer。

在运行我的测试之前创建了 MigrationHistory

从包管理器控制台运行更新数据库，迁移运行良好。

更新：我正在运行以下示例的修改版本（使用基于代码的迁移）：http: [//msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)，但问题仍然存在。- 启用迁移 - 添加迁移 - 尝试 SetInitializer 和 Initialize 但没有任何反应。

更新：-当 Automatedmigration=true 时，SetInitializer 和 Initialize 工作正常，模型中的更改与数据库同步。- 使用下面的代码有效。

```
new DbMigrator(new Configuration()).Update(); What should be the difference? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T17:16:54.217

并且只是根据我们在线程中的评论进行更新......

**这解决了问题**- 但坦率地**说，我仍然不确定为什么会这样**:)

> 尝试**`EnableAutomaticMigrations`**开/关只是为了检查。尝试放置 try-catch 以确保没有错误。并尝试直接运行 DbMigrator **`new DbMigrator(new Configuration()).Update()`**–

...以及其他评论

> 迁移应该使用或不使用该标志。而 DbMigrator 正是该初始化程序所做的。似乎没有区别 - 这是源代码（不是相同的 EF 版本 - 但我认为它是相同的） - [MigrateDatabaseToLatestVersion](https://github.com/mono/entityframework/blob/master/src/EntityFramework/MigrateDatabaseToLatestVersion%60.cs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:44:46.050

我的猜测是您应该尝试将下面的代码`protected void Application_Start()`放在`Global.asax.cs`. 这样，您的数据库连接将始终在其他所有操作之前被初始化。

```
if (!WebSecurity.Initialized)
            WebSecurity.InitializeDatabaseConnection("DefaultConnection", 
           "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

也许这个[Pro Asp.Net Mvc 4](http://www.amazon.ca/gp/product/1430242361/ref=s9_simh_gw_p14_d1_i1?pf_rd_m=A3DWYIK6Y9EEQB&pf_rd_s=center-2&pf_rd_r=0GT0AEF53271XFH1Z88N&pf_rd_t=101&pf_rd_p=1375923922&pf_rd_i=915398)将帮助您设置您的测试项目。还有一个[MVC 3 版本](http://www.amazon.ca/Pro-ASP-NET-MVC-Framework-Third/dp/1430234040/ref=sr_1_1?s=books&ie=UTF8&qid=1366682340&sr=1-1&keywords=MVC%203)，但他们几乎会说同样的话。他们建议使用[Moq Library](https://www.nuget.org/packages/moq)，它过去对我有帮助。

# java - 如何包含 jpcap 库？

> ID：16155969
> 
> 赞同：0
> 
> 时间：2013-04-22T20:18:31.900
> 
> 标签：java, eclipse, netbeans, jpcap

如何在 Windows 7（64 位）中安装的 Netbeans 或 Eclipse 上包含**jpcap库**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T22:21:22.283

不幸的是，没有 64 位版本的 JpCap（最后一次更新是在 2007 年）。您可以使用适用于 32 位和 64 位版本的 jnetpcap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:24:04.330

通过右键单击项目或项目的任何类文件，然后将 jar 添加到您的工作项目中，然后 **Buildpath -> Configure Buildpath -> Libraries -> Add External Jars** -> find the location of jar

# ios - iOS 5 和 6 在 ARC 下释放 malloc-ed 内存

> ID：16155975
> 
> 赞同：0
> 
> 时间：2013-04-22T20:18:51.593
> 
> 标签：ios, objective-c, memory, malloc, automatic-ref-counting

如何在 ARC 下释放 Objective-C 中动态分配的内存？

`dynamically`我的意思是分配`malloc`给某些 ivar 的内存。

`dealloc`并且`viewDidUnload`不再被调用，至少在我的测试中。

那么当不再需要视图控制器时，何时以及如何开始释放内存呢？

我所做的是创建一个名为`Releasable`（我从 C# 中偷来的想法）的协议，它具有单一方法`-(void) release`。当不再需要对象时，这将由一些外部代理调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T20:22:37.303

`dealloc`在 ARC 下仍然被称为。您只是没有明确调用`[super dealloc]`. 如果`dealloc`没有被调用，那么某些东西仍然具有对对象实例的引用。在您的项目上运行分析器，看看会发生什么。

`viewDidUnload`在 iOS 5 下仍然调用，但在 iOS 6 下不调用。

添加您的协议和您的`release`方法是完全没有必要的。

# bash - 在while循环中将变量重置为NULL

> ID：16155977
> 
> 赞同：1
> 
> 时间：2013-04-22T20:19:05.997
> 
> 标签：bash

我一直有一个问题让我把头发扯掉。我确信答案很简单，但到目前为止它已经避开了我。从逻辑上讲，这就是我想要做的：

检查文件系统是否有特定类型的挂载
针对这些挂载运行命令以获取 up/down
状态 如果状态为 up，请检查日志文件的 1000 行是否有字符串“slow response”
如果找到，请设置标志为 1 并退出循环
如果不是，则将标志设置为 0 并获取下一行直到完成
如果状态为关闭，将标志设置为 0 并移动 continue
echo $flag

不幸的是，这个脚本只返回 NULL。我觉得这很奇怪，因为当我在分配后立即插入一个 echo $flag 时，它会回显正确的输出。此代码中的某处被重置为 NULL，我无法找到它。有什么想法吗？作为附加信息，如果我在分配后插入回显语句，我已检查以确保 $status、$i 和 $line 的值显示正确的输出。

```
#!/bin/bash
LOGDIR=/var/log/ceph/

df|grep osd|sed 's/.*\///'|while read i;do
   status=`ceph osd dump|grep -w "$i"|awk '{print $2}'`
   if [ $status == "up" ]; then
      tail -1000 $LOGDIR/ceph-$i.log|while read line;do
          if echo $line|grep -q "slow response";then
             let flag=1
             break
          else
             let flag=0
             continue
          fi
       done
elif [ $status == "down" ];then
       let flag=0
    fi
    echo $flag
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:24:45.243

这看起来像一个[Bash FAQ](http://www.faqs.org/faqs/unix-faq/shell/bash/)，尤其是 E4)*如果我将命令的输出通过管道传输到`read variable`，为什么在读取命令完成时输出不显示在 $variable 中？*

从技术上讲，管道和循环是在子 shell 中创建的，并且像 Unix 中的任何程序一样，环境是向下传递的，但环境中的变化永远不会被传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:28:51.603

[看到这个以获得完整的解释](http://linuxshellaccount.blogspot.nl/2008/08/using-bash-to-feed-command-output-to.html)

```
while read i;
  do something;
done < <(df|grep osd|sed 's/.*\///') 
```

# python - 如何检查列表中的两个数字是否相同

> ID：16155993
> 
> 赞同：6
> 
> 时间：2013-04-22T20:20:10.307
> 
> 标签：python

我很好奇如何检查列表中的 2 个数字是否相同。例如，

```
myList=[1,7,9,3,1,2,8] 
```

**在这种情况下，“1”在“myList”中重复。**

我将如何制作一个程序来检查列表中的两个数字是否相同（重复）。尝试使用循环以便我可以理解，因为我还没有学习复杂的功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T20:22:40.950

使用[`collections.Counter`](http://docs.python.org/3.3/library/collections.html#collections.Counter)：

```
from collections import Counter

myList = [1, 7, 9, 3, 1, 2, 8]
counter = Counter(myList)
print(counter) # prints 'Counter({1: 2, 2: 1, 3: 1, 7: 1, 8: 1, 9: 1})' 
```

有了`Collections.Counter`，您就知道源列表中的每个元素重复了多少次`myList`。

之后，您可以使用一个简单[`list comprehension`](http://docs.python.org/3.3/tutorial/datastructures.html#list-comprehensions)的方法来了解哪些元素是重复的：

```
result = [i for i, j in counter.items() if j > 1]
print(result) # prints '[1]' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T20:21:58.980

如果你想使用循环，你必须使用你已经见过的一个列表或一组数字。然后，在循环时，您将与`in`操作员一起检查该号码是否已被看到。

```
seen = []
for number in myList:
    if number in seen:
        print "Number repeated!"
    else:
        seen.append(number) 
```

`set`不允许重复，因此它非常适合这种算法。如评论中所述，检查元素是否在集合中的时间复杂度对于平均情况（O（1））是恒定的，因此如果您有很多数字，这会更有效。

```
seen = set()
for number in myList:
    if number in seen:
        print "Number repeated!"
    seen.add(number) # won't duplicate 
```

我想说最pythonic的方法是使用`collections.Counter`，但其他答案已经涵盖了这一点。[要使用内置函数，您可以使用生成器表达式](http://docs.python.org/2/reference/expressions.html#generator-expressions)生成一组出现多次的数字，并且`set`.

```
In [39]: seen = set()

In [40]: print list(set(x for x in myList if x in seen or seen.add(x)))
[1] 
```

在这里，表达式将遍历所有值，如果它们已经被看到，则将它们`myList`添加到`set`调用中。`seen`最终，它将结果集转换为列表并打印内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T20:22:40.267

您可以使用内置`set()`功能将列表转换为集合，集合不能有重复项。因此，如果 Set 和 List 的大小不同，则您的 List 有重复项。

```
if len(myList) != len(set(myList)):
    print "duplicates" 
```

这假设您不关心重复项是什么，您只想知道是否存在 1 个或多个重复项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:22:27.583

您可以将列表转换为一组

```
myset = set(mylist) 
```

并检查长度是否不同。如果是这样，那就有重复了。

这是因为如果几个元素相等，一个集合只包含每个元素一次——就像数学意义上的集合一样。

如果您不需要知道*哪个*号码重复，这是最简单的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T20:26:24.020

```
myList=[1,7,9,3,1,2,8]
counts = {elem:myList.count(elem) for elem in set(myList)}
for i in counts:
    if counts[i] > 1:
       print '{} occurs more than once'.format(i) 
```

如果您不想使用字典理解：

```
myList=[1,7,9,3,1,2,8]
counts = {}
for elem in set(myList):
    counts[elem] = myList.count(elem)
    if counts[elem] > 1:
        print '{} occurs more than once'.format(i) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T20:31:57.927

也许不是最容易理解的，但这就是我的做法。

```
seen = set()
duplicated = [t for t in my_list if t in seen or seen.add(t)] 
```

它相当于（并且更容易理解）

```
duplicated = []
seen = set()
for elem in my_list:
    if elem in seen:
        duplicated.append(elem)
    else:
        seen.add(elem) 
```

# perl - Perl：从对象模型中获取 innerHTML，而不是“源”

> ID：16155997
> 
> 赞同：0
> 
> 时间：2013-04-22T20:20:22.983
> 
> 标签：perl, innerhtml

我正在使用 Perl 处理网页[`IO::All`](https://metacpan.org/module/IO%3a%3aAll)和`io($url)`功能。

我正在处理的页面表面上具有格式良好的 URL。例如

```
http://www.forbes.com/billionaires/list/#page:15_sort:0_direction:asc_search:_filter:All%20industries_filter:All%20countries_filter:All%20states 
```

注意`#page:15_`

当我查看源或打印出源返回 fromm 时`io()`，我看到出现在网站第 1 页上的名称，例如，

```
<!-- Start: list_row -->
<tr>
  <td class="rank">1</td>
  <td class="company">
    <a href="/profile/carlos-slim-helu/">
      <img src="http://i.forbesimg.com/media/lists/people/carlos-slim-helu_50x50.jpg" alt="">
      <h3>Carlos Slim Helu & family</h3>
    </a>
  </td>
  <td class="worth">$73 B</td>
  <td>73</td>
  <td>telecom</td>
  <td>Mexico</td>
</tr> 
```

但是，如果我在浏览器的开发人员工具中打开页面并查看对象模型，我会在列表中看到我希望在第 15 页上看到的人的条目，例如，

```
<TR>
  <TD class=rank>1342</TD>
  <TD class=company><A href="/profile/park-hyeon-joo/">
    <IMG alt="" src="http://i.forbesimg.com/media/lists/people/park-hyeon-joo_50x50.jpg"> 
    <H3>Park Hyeon-Joo</H3></A>
  </TD>
  <TD class=worth>$1 B</TD>
  <TD>54</TD>
  <TD>Mirae</TD>
  <TD>South Korea</TD>
</TR> 
```

我可以让 Perl 打开页面*并*给我正确的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:53:36.907

我做了一点点四处逛逛。表的数据实际上是从这个 url 加载的：`http://www.forbes.com/ajax/load_list/?type=person&uri=billionaires&year=2013`

根据您实际尝试完成的任务，获取并解析它可能更容易（它是 JSON 格式的）。