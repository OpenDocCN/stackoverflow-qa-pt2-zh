# StackOverflow 问答 15613000-15613999

# matlab - matlab为每个箱线图创建标题

> ID：15613000
> 
> 赞同：0
> 
> 时间：2013-03-25T10:45:35.100
> 
> 标签：matlab

这里有一个问题：

我有一个箱线图，但没有简单的方法来命名每个小盒子。这是一个例子：

```
boxplot(rand(10,3)) 
```

将绘制 3 个这样的框，但每个框的标题是 1、2、3，我需要一些更有意义的东西。

我有一个[想法](http://www.mathworks.com/help/stats/boxplot.html)，如何实现它，

```
load carsmall
boxplot(MPG,Origin) 
```

但这需要重组我的数据并创建带有标题的附加列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:01:53.217

做

```
boxplot(rand(10,3), 'labels', {'a','b','c'}) 
```

做你需要的？

# .htaccess - htaccess 快速移动，从 pagefor.local/USERNAME 到 pagefor/USERNAME.local

> ID：15613003
> 
> 赞同：1
> 
> 时间：2013-03-25T10:45:50.710
> 
> 标签：.htaccess, mod-rewrite, mamp

大家早，

我花了周日试图重写域无济于事。我正在使用 MAMP，并使用以下内容更改了我的 Hosts 文件夹和 MAMP httpd.conf：

主机文件的补充：

```
127.0.0.1   apagefor.local 
```

添加到 httpd.conf 文件：

```
<VirtualHost *>
    ServerName pagefor.local
    DocumentRoot /Applications/MAMP/htdocs/pagefor
</VirtualHost> 
```

这让我摆脱了讨厌的 localhost:8888/pagefor/ ，只需使用一个不错的本地 url 就`pagefor.local`可以完美地工作。但是现在我尝试尝试在域之后直接放置用户名来进行 htaccess 重写。允许我执行以下操作：

改变这个：

```
pagefor.local/LEE 
```

对此：

```
pagefor/LEE.local 
```

那我累了怎么办？好吧，我认为我可以执行以下操作（在 .htaccess 中）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST}  ^`pagefor.local` [NC]
RewriteRule ^pagefor.local/([A-Za-z0-9-.]+)  `http://pagefor/$1.local` 
```

我仍在尝试锻炼如何做到这一点，如果有人能告诉我我要去哪里......如果我走在正确的道路上（双关语:)）谢谢。

**更新**

感谢 anubhava ，我已设法将 url 从更改`http://pagefor.local/lee`为感谢。`http://pagefor/lee.local`我唯一的争论是我最初将所有内容都放在了控制整个应用程序的 index.php 文件中......所以是否可以执行以下操作：

```
RewriteCond %{HTTP_HOST}              ^pagefor\.local$ [NC]
RewriteRule ^([A-Za-z0-9-.]+)$   http://pagefor/$1.local [NC,L] 
```

然后使用以下行将 $1 放入我的 index.php 中：

```
RewriteRule ^([A-Za-z0-9-.]+).local$    index.php?url=$1 [NC,L] 
```

因此，当 Url 为 pagefor/lee.local 时，它位于以下 index.php?url=lee 上。我厌倦了上述但它没有成功。我希望我在解决这个问题的正确轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:51:34.723

试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^pagefor\.local$ [NC]
RewriteRule ^([A-Za-z0-9-.]+)$ http://pagefor/$1.local [L,R] 
```

# javascript - 如何从 html 加载 js.erb

> ID：15613004
> 
> 赞同：0
> 
> 时间：2013-03-25T10:45:51.117
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

又一天，又一个晚上，我在 JS 和 JQuery 上敲了敲头。

我想通过 HTML 调用一个页面（并在标题中显示路由），但让它也加载一个 js.erb 脚本。或者，我想远程调用 js.erb 脚本，但还要更改 http 标头以指示新路由。

我想要这个是因为：a）我想学习，这让我很沮丧 b）目前，当用户刷新时，他的当前页面没有出现，而是远程 => true 调用的那个页面；；返回到他不记得的页面会让用户感到困惑。

我正在实现 JQuery.pageless 插件。我远程调用用户/显示页面，这就是我的 show.js.erb 文件中的内容：

```
$(function(){
$("#container").html("<%= escape_javascript(render '/users/show') %>");
        $('#relationship_list').pageless({ totalPages: "<%= @reviews.count %>"/5+1
                       , url: '/reviews'
                       , params: {id: "<%= params[:id] %>"}
                       , loaderMsg: "loading"
                       });
}); 
```

现在这段代码是 A-OK。它在从 show.js.erb 远程调用时工作。问题是我想通过 html 而不是远程加载“用户显示”页面。这意味着该脚本不会被加载。我需要找到另一种不显眼的方式来加载它。

我想重申：代码中没有错误。

希望有人可以提供帮助。另请注意：有人写过使用 gon gem 来解决这个问题。不适合我——我真的很想在没有宝石的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:19:24.287

听起来您的页面加载通过远程调用工作（我假设单击链接或按钮后发出 AJAX GET 请求），它工作正常，但地址栏中的 URL 没有更新？

您正在寻找[HTML5 pushState() 方法](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。

像这样更新你的 show.js.erb 文件：

```
$("#container").html("<%= escape_javascript(render '/users/show') %>");

history.pushState(null, "Page Title", "<%= user_path(@user) %>"); 
```

# php - PHPmailer - 没有收到已读回执

> ID：15613005
> 
> 赞同：1
> 
> 时间：2013-03-25T10:45:52.303
> 
> 标签：php, phpmailer

我正在使用 PHPmailer（简单邮件）发送电子邮件。我添加了标题，因为我想要一份 emal 的已读回执。这是我的代码。

```
define(ADMINMAIL, 'test1@gmail.com');

try{
    $mail  = new PHPMailer(); 
    $ConfirmReadingTo = 'kendreparesh@gmail.com';

    $msPriority = 1;
    $mail->AddAddress('xyz@gmail.com', 'Mr XYZ');

    $mail->AddCustomHeader( 'X-pmrqc: 1' );
    $mail->AddReplyTo(ADMINMAIL,"Admin");
    $mail->SetFrom(ADMINMAIL, 'Admin');

    $mail->FromName = "Support Team<".ADMINMAIL.">";
    $mail->AddCustomHeader("X-MSMail-Priority: $msPriority" );
    $mail->AddCustomHeader("Priority: $msPriority" );
    $mail->addCustomHeader("Return-Receipt-To: $ConfirmReadingTo");
    $mail->addCustomHeader("X-Confirm-Reading-To: $ConfirmReadingTo");
    $mail->addCustomHeader("Disposition-notification-to: $ConfirmReadingTo");
    $mail->ConfirmReadingTo = 'kendreparesh@gmail.com';
    $mail->WordWrap = 200;
    $mail->Encoding = "8bit";
    $mail->CharSet = 'UTF-8';
    $mail->IsHTML(true);

    $mail->Subject = "Subject line ";
    $mail->MsgHTML("This is email body");
    $mail->Send(); 

} catch (Exception $e) {
    echo "<br/>".$e->getMessage(); //Boring error messages from anything else!
} 
```

如果你能看到我已经尝试过请求已读回执，但没有运气:(

还有一件事，以我公司地址为目标的电子邮件从未收到，甚至在垃圾邮件或垃圾邮件文件夹中也没有。

请指教，我该怎么办？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-26T17:40:07.577

```
$mail->addCustomHeader("Disposition-Notification-To: $ConfirmReadingTo"); 
```

为我工作！注意大写字母

# java - 从内部类访问和修改属性的理论

> ID：15613009
> 
> 赞同：2
> 
> 时间：2013-03-25T10:46:08.087
> 
> 标签：java, android

我有一个 java (android) 问题。我有一个类（A 类）及其属性，并且我在 A 类中创建了私有类（B 类和 C 类）。B 类和 C 类是 AsyncTask .. 我不知道这是否重要。

我可以从 B 和 C 读取 ClassA 的属性，但是，如果我从 B 或 C 修改属性 A 会发生什么？我认为这些更改不是永久的，这对我来说很奇怪，因为我可以访问它们......所以，如果我希望这些更改是永久的，我必须从 ClassB 做类似的事情，,, classA.atrributeA = atributeA ;

我不知道是因为我正在使用 AsyncTask，还是这是正常行为。我认为我的概念有一些问题......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:06:31.793

> 我认为这些变化不是永久性的

这是不正确的。从嵌套类对`A`实例属性所做的更改与以其他方式进行的更改没有什么不同。

如果它们*看起来*不像您期望的那样工作，那么嵌套类实例可能属于与`A`您正在查看的实例不同的实例。但那是猜测。

无论如何，如果您有一些具体的“意外行为”，您将需要对其进行描述……并且最好提供 SSCCE……如果您希望我们提供解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:11:20.367

它会起作用的。这是一个示例：[https ://stackoverflow.com/a/5770638/1127492](https://stackoverflow.com/a/5770638/1127492)

真正的问题是，是否要从内部类和外部类修改这些属性。我建议不要这样做，因为如果两个编写者同时修改同一个属性，会导致意想不到的结果。这就是为什么 Eclipse 中有一个首选项来限制这种访问。

# c# - DataContractSerializer 不适用于 MVC DBContext 对象

> ID：15613011
> 
> 赞同：0
> 
> 时间：2013-03-25T10:46:09.913
> 
> 标签：c#, asp.net-mvc, serialization

我正在尝试将实现 DbContext 的对象写入文件，但是我无法让 DataContractSerializer 工作。我正在查看有关该主题的帖子[http://www.riggshill.com/home/node/24](http://www.riggshill.com/home/node/24)但我收到了一个错误：

`Error 10 'System.Runtime.Serialization.DataContractSerializer' does not contain a definition for 'Serialize' and no extension method 'Serialize' accepting a first argument of type 'System.Runtime.Serialization.DataContractSerializer' could be found (are you missing a using directive or an assembly reference?)`

我的班级如下所示：

```
public class ManagementDbContext : DbContext
{
    public DbSet<RemoteHost> RemoteHosts {get;set;}
    public DbSet<DataSource> DataSources { get; set; }

    public override int SaveChanges()
    {

        using (FileStream fs = File.OpenWrite("ManagementData.xml"))
        {
            XmlDictionaryWriter writer = XmlDictionaryWriter.CreateTextWriter(fs, Encoding.UTF8);
            DataContractSerializer srlz = new DataContractSerializer(typeof(ManagementDbContext));
            srlz.Serialize(writer, this);
            writer.Close(); // ensure it's properly flushed
        }
        return base.SaveChanges();
    }
} 
```

编辑：

好的，事实证明我遵循的示例代码很糟糕，而且我有错误。该行`srlz.Serialize(writer,this)`应该`srlz.WriteObject(writer,this)` 如此处所示[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx) 此外，我无法序列化 DbContext 的实现，并且缺少类上的 [Serializable] 和 [DataContract] 属性，以及 Daniil 指出的成员上的 [DataMember()]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:55:47.730

首先 - 您需要在 ManagementDbContext 中使用[Serializable](http://msdn.microsoft.com/en-us/library/system.serializableattribute%28v=vs.110%29.aspx)和[DataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)属性。其次，您无法序列化您的对象，因为[DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)未标记任何属性。

[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)基础知识

# r - 日期间隔和数据操作

> ID：15613021
> 
> 赞同：3
> 
> 时间：2013-03-25T10:46:50.087
> 
> 标签：r

我是 R 的新用户，我有点卡住了，我的数据如下所示：

```
dates        temp
01/31/2011    40
01/30/2011    34
01/29/2011    30
01/28/2011    52
01/27/2011    39
01/26/2011    37
...
01/01/2011    31 
```

我只想将温度控制在 40 度以下，并注明开始和结束的日期以及持续多少天，例如：

```
from         to           days
01/29/2011   01/30/2011     2
01/26/2011   01/27/2011     2 
```

我尝试了 difftime 但它没有用，也许它可以使用一个功能。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:05:23.117

我会做这样的事情。我会`data.table`在这里使用。

```
df <- read.table(header=TRUE, text="dates        temp
01/31/2011    40
01/30/2011    34
01/29/2011    30
01/28/2011    52
01/27/2011    39
01/26/2011    37", stringsAsFactors=FALSE)

require(data.table)
dt <- data.table(df)
dt <- dt[, `:=`(date.form = as.Date(dates, format="%m/%d/%Y"), 
          id = cumsum(as.numeric(temp >= 40)))][temp < 40]
dt[, list(from=min(date.form), to=max(date.form), count=.N), by=id]

#    id       from         to count
# 1:  1 2011-01-29 2011-01-30     2
# 2:  2 2011-01-26 2011-01-27     2 
```

这个想法是首先创建一个列，该`dates`列首先转换为`Date`格式。然后，另一列`id`找到 where 的位置`temp >= 40`并使用它来创建在 two 范围内的值组`temp>=40`。也就是说，如果你有`c(40, 34, 30, 52, 39, 37)`，那么你会想要`c(1,1,1,2,2,2)`。也就是说， 到 values 之间的所有内容都`>= 40`必须属于同一组（34, 30 -> 1 和 39, 37 -> 2）。这样做之后，我会删除`temp >= 40`条目。

然后，您可以按此组拆分，然后取`min`and `max`（`length(.)`默认存储在 中`.N`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T11:42:03.350

不像 Arun 那样优雅，`data.table`但这里有`base`解决方案

```
DF <- read.table(text = "dates        temp\n01/31/2011    40\n01/30/2011    34\n01/29/2011    30\n01/28/2011    52\n01/27/2011    39\n01/26/2011    37", 
    header = TRUE, stringsAsFactors = FALSE)

DF$dates <- as.POSIXct(DF$dates, format = "%m/%d/%Y")
DF <- DF[order(DF$dates), ]
DF$ID <- cumsum(DF$temp >= 40)
DF2 <- DF[DF$temp < 40, ]

# Explanation split : split DF2 by DF2$ID 
# lapply : apply function on each list element given by split
# rbind : bind all the data together

do.call(rbind, lapply(split(DF2, DF2$ID), function(x) 
            data.frame(from = min(x$dates),  
                       to = max(x$dates), 
                       count = length(x$dates))))
##         from         to count
## 0 2011-01-26 2011-01-27     2
## 1 2011-01-29 2011-01-30     2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T15:53:59.290

首先读入数据。 `read.zoo`在一行中处理许多细节，包括将数据重新排序为升序并将日期转换为`"Date"`类。如果`z`是生成的动物园对象，则`coredata(z)`给出温度并`time(z)`给出日期。

```
Lines <- "
dates        temp
01/31/2011    40
01/30/2011    34
01/29/2011    30
01/28/2011    52
01/27/2011    39
01/26/2011    37
"

library(zoo)
z <- read.zoo(text = Lines, header = TRUE, format = "%m/%d/%Y") 
```

所有这一切的症结在于使用`rle`哪些计算`lengths`以及`values`我们可以从中推导出所有数量：

```
tt <- time(z)
with(rle(coredata(z) < 40), {
   to <- cumsum(lengths)[values]
   lengths <- lengths[values]
   from <- to - lengths + 1
   data.frame(from = tt[from], to = tt[to], days = lengths)
}) 
```

使用显示的输入数据的前 6 行，我们得到：

```
 from          to   days
1 2011-01-26 2011-01-27      2
2 2011-01-29 2011-01-30      2 
```

# javascript - 在单击某些事件时动态更改列表框选项

> ID：15613023
> 
> 赞同：-4
> 
> 时间：2013-03-25T10:46:57.630
> 
> 标签：javascript, jquery

```
<x:select id="FileType" width="210px">
        <x:option value="JPG">JPG</x:option>
        <x:option value="PNG">PNG</x:option>
        <x:option value="PDF">PDF</x:option>
        <x:option value="TIF">TIF</x:option>
        <x:option value="BMP">BMP</x:option>
</x:select> 
```

现在单击某个按钮，我想更改它的选项，因为它正在这样做。

```
function fun(){
    $("#FileType").outerHTML = '<x:select  name="FileType" id="FileType"><x:option selected="true" value="JPG">JPG</x:option><x:option value="PNG">PNG</x:option><x:option value="PDF">PDF</x:option><x:option value="TIF">TIF</x:option><x:option value="BMP">BMP</x:option></x:select>';
} 
```

但是`$("#FileType").outerHTML`不工作，如果我提醒`($("#FileType").outerHTML)`它给我`undefined`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:53:56.930

代替

```
function fun(){
    $("#FileType").outerHTML = '<x:select  name="FileType" id="FileType"><x:option selected="true" value="JPG">JPG</x:option><x:option value="PNG">PNG</x:option><x:option value="PDF">PDF</x:option><x:option value="TIF">TIF</x:option><x:option value="BMP">BMP</x:option></x:select>';
} 
```

尝试这个：

```
function fun(){
    $("#FileType")[0].outerHTML = '<x:select  name="FileType" id="FileType"><x:option selected="true" value="JPG">JPG</x:option><x:option value="PNG">PNG</x:option><x:option value="PDF">PDF</x:option><x:option value="TIF">TIF</x:option><x:option value="BMP">BMP</x:option></x:select>';
} 
```

注意`[0]`选择器后面指定找到的第一个元素。

[jsFiddle在这里](http://jsfiddle.net/k4Pb7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:54:25.850

jQuery 没有 outerHTML 方法，因此您试图在 jQuery 集合上调用 DOM 方法 - 这就是您得到未定义结果的原因。

您需要按照`$("#FileType").parent().html()`,`$("#FileType").replaceWith()`或`$("#FileType").get(0).outerHTML`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:57:34.670

尝试这个：

```
function fun(){
    $("#FileType option").remove();
    $("#FileType").append('<option selected="true" value="JPG">JPG</option><option value="PNG">PNG</option><option value="PDF">PDF</option><option value="TIF">TIF</option><option value="BMP">BMP</option>');
} 
```

# c# - Target 始终是一个实体还是可以是 EntityReference？

> ID：15613026
> 
> 赞同：4
> 
> 时间：2013-03-25T10:47:16.120
> 
> 标签：c#, plugins, dynamics-crm-2011

我发现在我的一些代码中，我有以下语法来保护插件免受 FUBARing 的影响。看在上帝的份上，我不记得为什么我将析取条件设置为*EntityReference*。

*Context.InputParameters["Target"]*是每个*EntityReference*吗？

```
bool goodToGo 
  = Context.InputParameters.Contains("Target")
    && Context.PrimaryEntityName == "email";
    && (
      Context.InputParameters["Target"] is Entity
      || Context.InputParameters["Target"] is EntityReference); 
```

除了Entity之外*还有***什么**？

 ** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T11:00:04.410

Target 也可以是 EntityReference，来自 MSDN：

> 请注意，并非所有请求都包含 Entity 类型的 Target 属性，因此您必须查看每个单独的请求或响应。例如，DeleteRequest 确实有一个 Target 属性，但它的类型是 EntityReference。

[了解传递给插件的数据上下文](http://msdn.microsoft.com/en-us/library/gg309673.aspx#bkmk_inputandoutput)

因此，根据插件的逻辑，您可能还需要检查*EntityReference*的属性类型。*

# node.js - Nodejs：如何根据标题拒绝 https 帖子

> ID：15613032
> 
> 赞同：1
> 
> 时间：2013-03-25T10:47:37.647
> 
> 标签：node.js

在接受通常非常大（几 MB）的 HTTPS 发布请求的 node.js 服务器中，我们希望能够在服务器接受整个请求之前开始处理请求。

例如，如果一个大胖体的请求到达，我们想查看它的路径并根据它决定是否终止/拒绝它，而不必等待整个请求到达（并支付接收该请求的 IO 成本）肥胖的身体）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:50:44.713

You could try the the Connect Limit middleware:

[https://github.com/senchalabs/connect/blob/master/lib/middleware/limit.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/limit.js)

or, implement your own solution in a similar way by checking req.headers[content-length], etc..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:56:47.243

根据实验，Node.js 似乎只`request`在解析 HTTP 标头后触发事件。`data`这意味着在我们开始监听事件之前就有机会检查标题。

因此，解决方案似乎是在读取任何数据之前检查标头，并可能在此时拒绝请求。如果此时我们不拒绝，我们会在数据缓冲区到达时开始累积数据缓冲区，如果它们超过限制（因此与报告的内容长度冲突），我们还有另一个机会通过调用`response.end()`.

# android - Android 4.2.2 - GMail 应用程序不在意图选择器中

> ID：15613033
> 
> 赞同：0
> 
> 时间：2013-03-25T10:47:43.817
> 
> 标签：android, android-intent, gmail

我尝试使用带有 android 4.2.2 的 Galaxy nexus 发送电子邮件，但我错过了选择器中的 googlemail 应用程序。其他所有应用程序都可用。Nexus 7 也有同样的问题。

我读了一些关于错误的东西，googlemail 应用程序不适用于附件，但我将代码减少到最低限度并且 gmail 应用程序仍然丢失。

```
Intent mailer = new Intent(Intent.ACTION_SEND);
mailer.setType("text/plain");
startActivity(Intent.createChooser(mailer, "pls show gmail")); 
```

也尝试使用“message/rfc822”作为类型，但同样的问题：没有可用的 gmail 应用程序。

在 android 4.0.x 和带有 cyanogen mod 和 android 4.2.2 的设备上尝试了相同的代码，一切正常。

谁能帮我？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:33:36.477

这适用于我的 Nexus 7

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
String aEmailList[] = { "myname@gmail.com" };
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "my subject");
emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, myMessage);
startActivity(emailIntent); 
```

# python - 真正的 Python 随机百分比

> ID：15613041
> 
> 赞同：7
> 
> 时间：2013-03-25T10:48:09.323
> 
> 标签：python, random

我不明白我在真正的 python 书中找到的这种语法，并希望我能弄清楚。

```
from __future__ import division
from random import random

total_A_wins = 0
total_B_wins = 0

trials = 100000
for trial in range(0, trials):
    A_win = 0
    B_win = 0
    if random() < .87: # 1st region
        A_win += 1
    else:
        B_win += 1
    # determine overall election outcome
    if A_win > B_win:
        total_A_wins += 1
    else:
        total_B_wins += 1

print "Probability A wins:", total_A_wins/trials
print "Probability B wins:", total_B_wins/trials 
```

所以在练习中他们说 A 有 87% 的机会获胜。但是 random () < .87 如何定义 A 将获得 87% 呢？

当我读到它时，它说：如果随机数小于 0.87

这是我希望澄清的，因为随机小于 0.87 对我来说没有意义。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T10:50:55.160

的返回值`random.random()`在 [0.0, 1.0) 范围内均匀分布（因此从 0.0 包括在内到 1.0 不包括在内），因此它有相同的机会达到该范围内的任何值。

这意味着 87% 的时间，选择低于 0.87 的值。

如果您将其更改为 的测试`random() < 1.0`，则该测试将*始终*通过100% 的时间。如果您将其更改为`random() < 0.0`，它永远不会通过，所以 0% 的时间。并且由于分布是均匀的，`random() < 0.5`将是`True`一半的时间，因为将选择范围 [0.5, 1.0) 中的另一半时间值。

您可以将其视为掷骰子；100% 的时间，你会用标准的 6 面骰子掷出小于 7 的值。0% 的时间你会掷出一个 < 1 的值，50% 的时间你会掷出一个 < 4 的值（1、2 或 3），以及 66.67% 的时间你会掷出一个小于 5 的值（所以你所有卷的 2/3）。`random.random()`返回值的范围比 6 个不同的值要大得多*。*

# android - 多活动蓝牙连接连接android

> ID：15613047
> 
> 赞同：1
> 
> 时间：2013-03-25T10:48:24.380
> 
> 标签：android, bluetooth

是否可以将 android 移动蓝牙与多个蓝牙设备连接。而且我需要同时激活所有连接并且也可以同时传输数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:40:18.447

是的。您最多可以将手机与 7 台设备连接（理论上）。它们形成一个以手机为主的“微微网”。

如果电话启动与前两个设备的连接，那么它很可能是主设备（根据需要）。

如果您发现连接一两个以上的设备时遇到问题，那么您应该启动您的手机，然后运行“hcitool”来确定哪些是从属设备，哪些是主控设备。

想想看，Nexus 设备在 4.2 中刚刚获得了一个新的蓝牙堆栈，我不知道它是否支持 hcitool。如果没有，希望他们创造了一个替代方案。

# c# - asp.net SoundPlayer 不从服务器播放

> ID：15613049
> 
> 赞同：1
> 
> 时间：2013-03-25T10:48:29.183
> 
> 标签：c#, asp.net, iis, soundplayer

为了检查 SoundPlayer 是否会播放波形文件，我做了最简单的测试。从本地机器上工作得很好，一旦站点在 IIS 上，它就不会播放声音（或给出任何错误）。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Media;

public partial class Default2 : System.Web.UI.Page
{   public SoundPlayer spWave;
    protected void Page_Load(object sender, EventArgs e)
    {

        spWave = new SoundPlayer("\\\\server\\site\\wavetest.wav");
        spWave.Play();
    }
} 
```

我还需要添加到 .aspx 文件中以使其正常工作吗？

或者有没有更简单的方法来播放非常短的波形文件，而不在页面上显示任何媒体控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:00:14.253

SoundPlayer 不是一个 aspx 控件，您应该找到一个可以播放您的 wav 文件并将其放在您的 aspx 页面上的 web 控件。现在，每次页面加载时，您都会在 iis 中的 Web 服务器上播放 wav。

您可以从这里开始在网页上寻找播放 wav 文件：[google: wav aspx](https://www.google.com/#hl=en&sclient=psy-ab&q=wav+aspx&oq=wav+aspx&gs_l=hp.3...3239.8053.0.8299.10.9.1.0.0.0.189.813.7j2.9.0...0.0...1c.1.7.psy-ab.G8T1tD3prbo&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.44158598,d.Yms&fp=ee10efb483f174ba&biw=1032&bih=561)

# php - 在php中重新格式化日期值的问题

> ID：15613050
> 
> 赞同：0
> 
> 时间：2013-03-25T10:48:29.970
> 
> 标签：php, date, datetime

我在重新格式化日期值以将其放回数据库时遇到重大问题。当用户使用 jquery 日期选择器选择日期时，它以一种易于阅读的方式显示它，然后我尝试重新格式化它以将其放入 mysql 数据库中。

如果我回显 $weddingdate 的发布值，我会得到以下格式：

2013 年 3 月 14 日星期四

所以......我正在接受并使用以下内容重新格式化它：

```
if (isset($_POST['weddingdate'])) {$weddingdate = $_POST['weddingdate'];}else {$weddingdate = '';}

$date = DateTime::createFromFormat("D F d, Y", $weddingdate);
$processedweddingdate = $date->format("Y-m-d"); 
```

问题是如果我回显 $date 我什么都得不到？，如果我取消注释第二行我得到致命错误：调用 C:\easyphp\www\twinfocus\ 中非对象上的成员函数 format()在第 15 行提交编辑日历

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:50:06.303

将日期转换为字符串`strtotime`并用于`date`更改格式...

尝试这个

```
<?php
$weddingdate=$_POST['weddingdate'];
$finaldate=date('Y-m-d',strtotime($weddingdate));
echo $finaldate; 
```

# android - 从 Google Play 中删除应用程序名称后的数字 1

> ID：15613055
> 
> 赞同：0
> 
> 时间：2013-03-25T10:48:38.237
> 
> 标签：android, google-play

我已将我的 android android 应用程序上传到 Google Play。该应用程序已上传，但我没有密钥库和电子邮件 ID，因此我无法更新或删除应用程序。然后我更改了包名称并在 Google 市场上上传应用程序。但是出现了一些问题，默认情况下在应用程序名称中最后添加 1。我不明白 1 是从哪里来的。请建议我从 Google Play 商店中删除应用程序名称后的数字 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:51:23.620

[您可以从Developer Console](https://play.google.com/apps/publish/v2/)更改应用程序的标题。它在那里看起来正确但在 Play 商店中看起来不正确？

# android - 如何在两个活动之间划分屏幕以显示菜单？

> ID：15613056
> 
> 赞同：2
> 
> 时间：2013-03-25T10:48:42.127
> 
> 标签：android, android-activity, transition

我正在尝试模拟我最近在某些应用程序中看到的效果。想象一个常规的活动 A，但是当用户按下一个按钮时，例如一个新的活动 B 从左侧进入，将 A 移动到右侧。它填充了所有高度，但占宽度的 90%。

所以在屏幕中我们有 90%，从左边开始，活动 B，在屏幕的最后 10% 中，我们有前 10% 的 A。

例如，这对于显示菜单很有用。怎么做到呢？

是那些不同的活动还是它是用一个`ViewFlipper`或类似的东西制作的？我找不到这个确切的例子，但我可以在许多应用程序中看到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:55:20.213

你可以看看下面的例子..

[安卓滑动菜单演示](https://github.com/gitgrimbo/android-sliding-menu-demo)

![在此处输入图像描述](../Images/e86c75c23051db29172030fb9ace2f0d.png)

# javascript - 未捕获的类型错误：无法读取 null 的属性“样式”

> ID：15613058
> 
> 赞同：0
> 
> 时间：2013-03-25T10:48:47.690
> 
> 标签：javascript

我有这个从 XML 文件中读取坐标的函数，当它在窗口中松散时，该函数可以正常工作。但是当我把它放在一个函数中时，我得到了错误。`Cannot read property 'style' of null.`在第 127 行。

第 127 行是

```
document.getElementById(id).style.top=Ynod; 
```

有任何想法吗 ？

```
var main = (function () {

    var id=Math.floor((Math.random()*1000000)+1);

    document.getElementById("add-new-sticker-btn").addEventListener("click", function(){
        id += 1;
        console.log(id);
        add_sticker(""); /**"" removes undefined "*/

        var xmlhttp;
        xmlhttp=new XMLHttpRequest();
        xmlhttp.open("POST","/project2/php/insert.php",true); /*Search way... JS to javaScript*/
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send("textBoxID="+id);
    });

    function run() {
        readXml();
    }

    function readXml() {
        var xmlhttp;
        xmlhttp = new XMLHttpRequest();
        xmlhttp.open("get", 'xml/stickers.xml', false);
        xmlhttp.send();
        var myXML = xmlhttp.responseXML;
        stickers = myXML.getElementsByTagName("sticker");

        for (i = 0; i < stickers.length; i++) {
            var idNod = (stickers[i].getElementsByTagName("id")[0].childNodes[0].nodeValue); /*Get the ID*/
            var id = idNod;
            var textNod = (stickers[i].getElementsByTagName("text")[0].childNodes[0].nodeValue); /* Text*/
            add_sticker(textNod); /*Call creator function*/

            var Xnod = (stickers[i].getElementsByTagName("x")[0].childNodes[0].nodeValue) + 'px'; /*Get the x position Add PX for pixel*/
            var Ynod = (stickers[i].getElementsByTagName("y")[0].childNodes[0].nodeValue) + 'px'; /*Get the y position*/
            var Znod = (stickers[i].getElementsByTagName("z")[0].childNodes[0].nodeValue); /*Get the y position*/
            console.log(Ynod) // Gives correct Y and X
            console.log(Xnod)

            document.getElementById(id).style.top = Ynod;
            document.getElementById(id).style.left = Xnod;
            document.getElementById(id).style.zIndex = Znod;
        }
    }

    window.addEventListener("load", run);
    return {};
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:56:10.977

idNod 未定义，请确保贴纸中有元素并尝试将贴纸[i].getElementsByTagName("id")[0].childNodes 打印到控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:18:35.957

Okej 我自己发现了问题。我正在调用一个全局变量 var`id = idNod;` 如果我将 更改`var id = idNod;`为只有`id=idNod` 一切正常 :)

# url - HTTPS 网址无效

> ID：15613060
> 
> 赞同：0
> 
> 时间：2013-03-25T10:48:55.597
> 
> 标签：url, facebook-apps

我创建了一个要在页面选项卡中使用的应用程序。我将它托管在我的服务器上，该服务器具有关联的 SSL 协议。但是，https url 没有通常的命名（您可以在下面看到它）：

[https://secure395.websitewelcome.com/~rexdot/discoverylocker/](https://secure395.websitewelcome.com/~rexdot/discoverylocker/)

FB有什么理由不接受这个吗？我确定这是 https url，它是从我的服务器支持中提供的。而且我也确定该应用程序在那里并且可以正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T21:08:46.903

根据hostgator，唯一的解决方案是为您自己的SSL付费。我已经使用其他托管服务和经销商帐户，以前从未遇到过这个问题。事实上，这些应用程序在其他公司的共享 SSL 证书上运行良好。

因此，hostgator 不可行的一个重要原因是......他们共享的 SSL 是针对已被标记为垃圾邮件的 websitewelcome.com。

# python - 基于多列过滤文本文件

> ID：15613066
> 
> 赞同：1
> 
> 时间：2013-03-25T10:49:25.110
> 
> 标签：python

我有一个在正常编程意义上是微不足道的问题，但如果可能的话，我想找到另一种解决方案来使用一些 python 技巧来做到这一点。

我有一个文本文件如下：

```
A1 1 5 g1_0 10
A1 6 8 g2_0 13
A1 9 12 g3 18
A1 15 24 g4 2
A1 25 27 g5 5
A1 30 33 g1_1 20
A1 44 67 g10 19
A1 69 77 g9 19
A1 80 99 g6 19
A1 153 166 g2_1 19 
```

我想做的是按以下方式过滤文本文件：当我在第 4 列中有“_0”或“_1”或“_2”时，我想检查第 5 列。如果第 5 列的数字最高，我想用“_”删除所有其他人，只保留得分较高的人。

PS：对于第 4 列的每个值，我想保留得分最高的那个。例如，在这种情况下，这些值将保持不变，这不是全部比较，而是具有“_0”“_1”的每一对或三元组"_2" 应该单独比较最高分：

```
A1 9 12 g3 18
A1 15 24 g4 2
A1 25 27 g5 5
A1 30 33 g1_1 20
A1 44 67 g10 19
A1 69 77 g9 19
A1 80 99 g6 19
A1 153 166 g2_1 19 
```

有没有办法做到这一点而不循环很多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:18:19.423

```
import numpy as np
nk=np.genfromtxt('input.txt', dtype=None)
result1={}
for x in nk:
    result1.setdefault(x[3].split('_')[0],[]).append(x[4])
for x in nk:
    if x[4]==max(result1[x[3].split('_')[0]]):print x 
```

输出：

```
('A1', 9, 12, 'g3', 18)
('A1', 15, 24, 'g4', 2)
('A1', 25, 27, 'g5', 5)
('A1', 30, 33, 'g1_1', 20)
('A1', 44, 67, 'g10', 19)
('A1', 69, 77, 'g9', 19)
('A1', 80, 99, 'g6', 19)
('A1', 153, 166, 'g2_1', 19) 
```

# ms-access - Microsoft Access：如何获取行的创建日期？

> ID：15613067
> 
> 赞同：1
> 
> 时间：2013-03-25T10:49:25.703
> 
> 标签：ms-access, timestamp, row, creation

我有一个 7 年前创建的访问数据库。

不幸的是，表格没有时间戳列:(

**有什么方法可以知道特定表中每一行的创建日期吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:50:18.913

除非您有自己创建的时间戳，否则无法找到此信息。

你有可能有一些旧的备份吗？这可能有助于缩小范围。

# php - 使用 PHP/MYSQL 备份整个数据库

> ID：15613070
> 
> 赞同：-1
> 
> 时间：2013-03-25T10:49:38.803
> 
> 标签：php, mysql, backup

我正在尝试执行 php/mysql 备份

我从表单页面接收值，然后使用“选择表”命令，将这些值保存在数组中。

之后我做了一个“for”循环来备份每个表：

```
<?php

$dbname = $_POST['txt_db_name'];
$tbname = $_POST['txt_tb_name'];

$ligacao=mysql_connect('localhost','root','')
or die ('Problemas na ligação ao Servidor de MySQL');

$res = mysql_query("SHOW TABLES FROM pessoal");

$tables = array();

mysql_select_db($dbname,$ligacao);

while($row = mysql_fetch_array($res, MYSQL_NUM)) {
$tables[] = "$row[0]";
}

$length = count($tables);

for ($i = 0; $i < $length; $i++) {
$query=
"SELECT * INTO OUTFILE 'pessoa_Out.txt'".
"FIELDS TERMINATED BY ',' ".
"ENCLOSED BY '\"'".
"LINES TERMINATED BY '#'".
"FROM $tables[$i]";

 $resultado = mysql_query($query,$ligacao);

 }

 mysql_close();

 if ($resultado) 
 $msg ='Sucesso na Exportaçao da Database '.$dbname.' ';
 else
 $msg ='Erro Impossivel Exportar a Database '.$tbname.' ';

 ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:50:51.163

不要这样做——你正在重新发明现有的工具！

Invoke[`mysqldump`](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)是专门为此目的而设计的。

有了适当的权限，您可以使用 PHP`system`或`exec`调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:58:29.070

首先，我同意应该使用 mysqldump 的说法。但是根据您的评论，您只需要使用 php/mysql 来完成教育（或其他）目的，这里是脚本（是的，它重新发明了轮子）。请注意，您应该在上传此文件的文件夹中创建一个备份目录，并允许 Web 服务器对其进行写入：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors',1);
ini_set('memory_limit','1500M');
set_time_limit(0);

backup_tables('localhost','user','xxxxxxx','xxxxxxxxxx');

/* backup the db OR just a table */
function backup_tables($host,$user,$pass,$name,$tables = '*')
{
  //save file
  $handle = gzopen(getcwd() . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . 'db-backup-'.time().'.sql.gz','w9');

  $link = mysql_connect($host,$user,$pass);
  mysql_select_db($name,$link);

  //get all of the tables
  if($tables == '*')
  {
    $tables = array();
    $result = mysql_query('SHOW TABLES');
    while($row = mysql_fetch_row($result))
    {
      $tables[] = $row[0];
    }
  }
  else
  {
    $tables = is_array($tables) ? $tables : explode(',',$tables);
  }

  //cycle through
  foreach($tables as $table)
  {
    $result = mysql_query('SELECT * FROM '.$table);
    $num_fields = mysql_num_fields($result);

    $return = 'DROP TABLE IF EXISTS '.$table.';';
    $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
    $return .= "\n\n".$row2[1].";\n\n";
    gzwrite($handle,$return);
    for ($i = 0; $i < $num_fields; $i++) 
    {
      while($row = mysql_fetch_row($result))
      {
        $return = 'INSERT INTO '.$table.' VALUES(';
        for($j=0; $j<$num_fields; $j++) 
        {
          $row[$j] = addslashes($row[$j]);
          $row[$j] = str_replace("\n","\\n",$row[$j]);
          if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }
          if ($j<($num_fields-1)) { $return.= ','; }
        }

        $return.= ");\n";
        gzwrite($handle,$return);
      }
    }
    $return ="\n\n\n";
    gzwrite($handle,$return);
  }

  gzclose($handle);
} 
```

# outlook - 在 Microsoft Dynamics CRM 2011 中自定义营销活动表单？

> ID：15613073
> 
> 赞同：0
> 
> 时间：2013-03-25T10:49:45.677
> 
> 标签：outlook, dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我需要**在 Microsoft Dynamis CRM 中自定义活动表格**。在此表格中我需要自定义会计年度的日历。它显示**mm/dd/yyy**格式..我需要自定义**MM/YYYY** Fromat。如何执行此操作？

![在此处输入图像描述](../Images/489649444ca0857891273e2987d2d671.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:31:23.493

这只是为了那个领域？日期时间的格式基于用户选项。如果仅适用于该领域，请参阅此[答案](https://stackoverflow.com/questions/7274115/crm-2011-set-datetime-field-from-string-with-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:38:17.290

我怀疑日期时间字段的格式是根据系统设置（从 CRM 或用户计算机中选择的）。不知道除此之外它是否可编辑。今天晚些时候我会看看它。

如果无法自定义单个字段的日期格式，您可以使用三个选项（按控制顺序和实施工作量的递增顺序列出）。

1.  根据您的意愿设置系统设置。
2.  添加自定义字段并控制其中的外观。
3.  创建一个行为完全如您所愿的 Web 资源。

# android - 如何设置默认日历铃声？

> ID：15613075
> 
> 赞同：1
> 
> 时间：2013-03-25T10:49:50.193
> 
> 标签：android

如何为日历事件中的闹钟设置默认旋律？

我只找到了为通知设置默认旋律的方法：

```
RingtoneManager.setActualDefaultRingtoneUri(
                        SetSongDialogActivity.this,
                        RingtoneManager.TYPE_NOTIFICATION,
                        Uri.parse(songUrlStr)); 
```

# mysql - BLOG系统SQL汇总查询问题

> ID：15613078
> 
> 赞同：0
> 
> 时间：2013-03-25T10:49:53.580
> 
> 标签：mysql, sql, join, categories

好吧，我放弃了，这个问题已经超出了我的想象，我正在寻求帮助。

在 MySQL 数据库中，我有一个类别和一个帖子表，就像标准的博客系统一样：

```
tblCategories (intID (PK), strTitle)
tblAreas (intID (PK), strName)
tblPosts (intID (PK), intCategoryID (FK), strTitle, htmlText) 
```

然后我有几个博客支持表：

```
tblExternalLinks (intID (PK), intPostID (FK), strTitle, urlLink)
tblComments (intID (PK), intPostID (FK), strComment)
tblImages (intID (PK), intPostID (FK), urlImage)
tblLocations (intID (PK), intPostID (FK), intAreaID (FK), urlImage) 
```

1.  我想要一个附加到类别变量的所有帖子的列表（我们只是在伪 php 代码中说）$intCatID，并且它的位置具有某个区域变量 $intAreaID。这个 SQL 应该是这样的：

    ```
    SELECT tblPosts.* from tblPosts 
    INNER JOIN tblLocations ON tblLocations.intPostID=tblPosts.intID 
    WHERE intCategoryID=$intCatID AND intAreaID=$intAreaID GROUP BY tblPosts.intID; 
    ```

    有人可以让我知道这是否正确吗？我不确定 GROUP BY 部分。

2.  我想要相同的列表，但这次是支持表中所有其他附加记录的计数：

    ```
    SELECT tblPosts.*, intExternalLinksCount, intCommentsCount, intImagesCount, intLocationsCount ... 
    ```

    我的第一个猜测是使用嵌套表或连接检索计数，这可能会使查询变得非常大。我也想知道什么是更快的性能。这些东西是我头疼的地方。

并高度赞赏答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:34:26.113

只是因为我很想收到批评性的反馈，所以我想出了这个（非常非常丑陋的）查询：

```
SELECT 
tblPosts.*, 
tblTempLocations.intLocationsCount, 
tblTempLinks.intLinksCount, 
tblTempImages.intImagesCount, 
tblTempComments.intCommentsCount,
tblTempNearest.fltNearestLocationAngle
FROM tblAdverts 
LEFT JOIN 
 (SELECT intPostID, count(*) as intLocationsCount 
  FROM tblLocations 
  GROUP BY intPostID)
 tblTempLocations ON tblPosts.intID=tblTempLocations.intPostID
LEFT JOIN 
 (SELECT intPostID, count(*) as intLinksCount 
  FROM tblLinks 
  GROUP BY intPostID)
 tblTempLinks ON tblPosts.intID=tblTempLinks.intPostID
LEFT JOIN 
 (SELECT intPostID, count(*) as intImagesCount
  FROM tblImages
  GROUP BY intPostID)
 tblTempImages ON tblPosts.intID=tblTempImages.intPostID
LEFT JOIN 
 (SELECT intPostID, count(*) as intReviewsCount 
  FROM tblComments
  GROUP BY intPostID)
 tblTempComments ON tblPosts.intID=tblTempComments.intPostID
LEFT JOIN
 (SELECT intPostID, 
  MIN(SQRT(POWER((fltLatitude - $fltCurrentLatitude), 2) + POWER((fltLongitude - $fltCurrentLongitude),2))) AS fltNearestLocationAngle 
  FROM tblLocations 
  GROUP BY intPostID) 
 tblTempNearest ON tblPosts.intID=tblTempNearest.intPostID
INNER JOIN tblLocations ON tblPosts.intID=tblLocations.intPostID
WHERE tblLocations.intLocationID=$intAreaID  AND tblPosts.strTitle LIKE '%$strPartialTitle%' AND tblAdverts.intCategoryID=$intCatID
GROUP BY tblAdverts.intID 
```

# css - 在 IE 浏览器中选择标签的选项之间添加空格

> ID：15613081
> 
> 赞同：0
> 
> 时间：2013-03-25T10:49:58.780
> 
> 标签：css, select, option

我想在 IE 浏览器中选择元素的 2 个选项之间添加一个空格。我的代码在 Firefox 和 Chrome 中工作，使用我为 select 元素编写的 CSS。但是，这些样式不适用于 IE。这是**选择**元素的 CSS，如下所示：

```
.branchDropdown { border: 1px solid #999999; width: 155px; } 
```

对于**选项**元素：

```
.branchDropdown option { cursor: pointer; margin-top: 10px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:59:23.107

您不能`<option>`在 Internet Explorer 中为大多数属性的元素设置样式。它们继承了 Windows 操作系统的样式，但背景和字体颜色除外。这是来自 MSDN 页面的引用`<option>`：

> 除了 background-color 和 color 之外，通过样式对象为选项元素应用的样式设置将被忽略。此外，直接应用于单个选项的样式设置会覆盖应用于整个包含选择元素的样式设置。
> 
> [http://msdn.microsoft.com/en-us/library/ie/ms535877(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms535877(v=vs.85).aspx)

要创建一致的外观，您唯一的其他选择是使用 JavaScript 呈现自定义元素，以替换页面上的默认选择元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:00:12.077

`option`元素中的`select`元素不能通过 CSS 直接访问，您需要一个 javascript 替换来以这种方式自定义选择元素。请参阅这个有趣的[博客条目](http://css-tricks.com/dropdown-default-styling/)。另一种 js 替代品是[select2](http://ivaynberg.github.com/select2/)。

# javascript - CKEditor Walker 仅获取选择

> ID：15613082
> 
> 赞同：1
> 
> 时间：2013-03-25T10:50:00.503
> 
> 标签：javascript, ckeditor

我正在尝试在按退格键时包装选择。Now the key press part is already working but now i'm trying to wrap the selection within a span.. also when there are block elements within the selection. 但我注意到在 CKEDITOR 4 中，walker 获得了完整的元素，而不是仅选择的部分。

[http://docs.ckeditor.com/#!/api/CKEDITOR.dom.walker](http://docs.ckeditor.com/#!/api/CKEDITOR.dom.walker)上的文档另有说明，它说它会破坏元素以显示块边界，但为什么它不工作呢？

到目前为止我的代码：

```
var walker = new CKEDITOR.dom.walker( editor.getSelection().getRanges()[0] ), node;
walker.evaluator = function(node){
    node = "<span name='wasSelected'>" + node.getText()+ "</span>";
    return true;
};
walker.checkBackward(); 
```

注意：这是试图回答我之前发布的一个问题：[CKEditor Inline selection wrapping](https://stackoverflow.com/questions/15568732/ckeditor-inline-selection-wrapping)

这个问题现在有一个解决方案，但我仍然想知道为什么它不做 api sais 的事情。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:33:49.667

嗯...我猜文档是错误的。我创建了一张票，我会尽快调查：[https ://dev.ckeditor.com/ticket/10261](https://dev.ckeditor.com/ticket/10261)

无论如何，AFAIK walker**不会**在包含节点的片段上调用评估器。**它在每个输入**的节点上调用评估器。我还没有发现任何可以在其代码中更改 DOM 的东西。

# r - 应用、合并、列名、Data.frame

> ID：15613083
> 
> 赞同：1
> 
> 时间：2013-03-25T10:50:01.610
> 
> 标签：r

这是我的数据，包装在 data.frame 中，

```
rt5.5 <- c(0, 7, 1, 2, 2, 2, 1, 1) #LC trace % area
rt6.3 <- c(0, 16, 12, 20, 16, 20, 13, 15) #LC trace % area
rt8.4 <- c(0, 26, 55, 56, 63, 61, 70, 70) #LC trace % area
rt9.4 <- c(88, 42, 20, 11, 8, 6, 5, 3) #LC trace % area
rt22.7 <- c(8, 6, 7, 6, 7, 6, 7, 6) #LC trace % area
LCtraces <- data.frame(rt5.5, rt6.3, rt8.4, rt9.4,rt22.7,
                       row.names = c("A", "B", "C", "D", "E", "F", "G", "H"))
total.area <- apply(LCtraces,1, sum)
LCtraces <-  merge(LCtraces,total.area, by="row.names")
colnames(LCtraces) [7] <- "Total Area"
rm(rt5.5, rt6.3, rt8.4, rt9.4, rt22.7, total.area) #tidy 
```

当我构建 data.frame 时，我想将各行的总数相加：为此，我使用了 apply 函数，然后我使用 row.names 将结果向量与 data.frame 合并。然后我输入我想要的列名。

我所做的工作但缺乏优雅，有人可以提出任何改进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:51:57.747

使用`rowSums`和`transform`：

```
LCtraces <- transform(LCtraces, total.area = rowSums(LCtraces)) 
```

等效地，使用`within`：

```
LCtraces <- within(LCtraces, "Total Area" <- rowSums(LCtraces)) 
```

# ftp - 将文件下载到特定目标文件夹

> ID：15613088
> 
> 赞同：0
> 
> 时间：2013-03-25T10:50:14.890
> 
> 标签：ftp, wget

我在我的 Windows PC 中使用 wget 从 ftp 服务器下载文件。但它会将文件下载到 wget.exe 所在的文件夹中。但我希望它将文件下载到另一个文件夹。它是如何完成的？（我看到了一些我猜想只在 linux 中有效的链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:55:32.917

@WINMAN 请查看以下主题以获取您的查询，我希望这可能会对您有所帮助

[如何使用 wget 指定位置？](https://stackoverflow.com/questions/1078524/wget-how-to-specify-the-location-with-wget)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:55:47.907

```
−P prefix
−−directory−prefix=prefix
Set directory prefix to prefix. The directory prefix is the directory where all other files and subdirectories
will be saved to, i.e. the top of the retrieval tree. The default is . (the current directory). 
```

取自 PDF，随文档一起提供：http: [//gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)

所有其他命令行参数也在 pdf 中，因此您应该查看它。

# paypal - 是否还有其他人在使用 PayPal 沙盒时遇到问题？每次尝试使用时都会收到消息 4003 错误页面

> ID：15613089
> 
> 赞同：0
> 
> 时间：2013-03-25T10:50:17.473
> 
> 标签：paypal, paypal-sandbox

正确的。所以这是一个奇怪的问题，但我找不到任何建议我可以做任何修复的地方，而且 PayPal 没有回应我的支持请求。

上周我更新到新版本的 PayPal Developer。这很好，我可以用它进行沙盒测试。请注意，情况就是这样——它正在工作。

星期五，它刚刚停止工作。我现在已经在四种不同的设备上进行了尝试，清除了所有的 cookie、缓存和其他所有内容。我在三个不同的台式机上使用了通过蜂窝连接和 Firefox、Chrome 和 Opera 的移动设备。每次我尝试付款时都会收到以下消息。我已经完成了它所建议的一切以及更多。

此消息在登录开发人员沙箱并尝试通过 PayPal 支付标准加密 Web 支付按钮进行支付后显示。

> 如果您正在购物或汇款，我们建议您在 30 分钟后检查您的 PayPal 帐户和电子邮件以获取交易确认信息。
> 
> 如果您从其他网站来到此页面，请返回该网站（不要使用浏览器的后退按钮）并重新开始您的活动。
> 
> 如果您来自 PayPal 网站，请单击左上角的 PayPal 徽标返回我们的主页并重新开始您的活动。您可能需要重新登录。
> 
> **很抱歉，我们遇到了暂时的困难。请稍后再试。如果在付款时发生此错误，请在重新付款前检查您的帐户概览以避免重复付款。**
> 
> **对于某些浏览器，可以通过清除或删除 cookie 来解决此问题。**
> 
> **消息 4003**

这不是完整的消息，但完整的消息以几种不同的语言重复了粗体文本。

现在，这似乎是一个沙盒问题，因为我的实时代码运行良好，但是我有一个项目我无法在没有测试的情况下发布，而且我无法测试它。有没有人有任何想法？

我可以接受暂时的困难，但是从星期五早上（所以 72 小时前）开始就是这样，我还没有收到 PayPal 的任何回复（尽管他们承诺 24 小时退货）。

当然，更好的问题可能是“还有其他人有这个问题吗？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:33:11.287

解决。PayPal 在告诉我我已经设法切换了两个变量时最无济于事 - 因此出现了问题。

给自己和其他开发者的注意事项：如果您在向 PayPal 发送某些东西时遇到问题并且您认为它应该可以工作，请尝试在没有加密的情况下使用它。一旦我没有发送加密数据包，PayPal 的系统就非常愿意告诉我这个问题。

# android - 问题水平/垂直布局Android App

> ID：15613091
> 
> 赞同：1
> 
> 时间：2013-03-25T10:50:18.460
> 
> 标签：android

我正在尝试编写我的第一个 android 应用程序。我读了很多书，但布局有问题。两个xml都有什么问题？为了更好的理解，我做了一张图：![图片](../Images/725bf772574ffd11e5b30fda7bc93121.png)

我的 main.xml 的 XML

```
 <?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"

android:layout_height="wrap_content"

android:orientation="vertical" >

<ImageView

    android:id="@+id/imageView1"

    android:layout_width="wrap_content"

    android:layout_height="wrap_content"

    android:layout_weight="2.5"

    android:contentDescription="@string/upload"

    android:scaleType="fitCenter"

    android:visibility="visible" />

<LinearLayout

    android:layout_width="match_parent"

    android:layout_height="0dp"

    android:layout_weight="4"

    android:gravity="center"

    android:orientation="vertical" >

    <Button

        android:id="@+id/btnShoot"

        android:layout_width="match_parent"

        android:layout_height="wrap_content"

        android:layout_gravity="center"

        android:layout_marginLeft="50dp"

        android:layout_marginRight="50dp"

        android:text="@string/shoot_again" />

</LinearLayout>
</LinearLayout> 
```

对于文件夹布局土地中的 main.xml，如果我切换到横向模式应用程序崩溃：

```
 <?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"

android:layout_height="wrap_content"

android:orientation="horizontal" >

<Button

    android:id="@+id/btnShoot"

    android:layout_width="match_parent"

    android:layout_height="wrap_content"

    android:layout_gravity="center"

    android:layout_marginLeft="50dp"

    android:layout_marginRight="50dp"

    android:text="@string/shoot" />

<ImageView

    android:id="@+id/imageView1"

    android:layout_width="wrap_content"

    android:layout_height="wrap_content"

    android:contentDescription="@string/upload"

    android:scaleType="fitCenter"

    android:visibility="visible" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:03:57.020

好吧，看看你的XML，有几个问题：

肖像 XML：

```
< ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="2.5" 
```

在这里，你已经设置了体重和身高——`LinearLayout`你不能同时拥有这两者。要么你自己设置高度，要么给它一个高度`0dp`和一个重量，然后让`LinearLayout`指定高度。至于为什么要旋转，图片本身可能会在你的资源中旋转。

水平 XML：

*   你的根`LinearLayout`仍然需要有一个`vertical`方向
*   您的 ImageView 需要在您的 Button 上方声明

发生的事情是a）它是水平的，b）你的按钮首先被放置，并且c）你的按钮有一个`android:layout_width="match_parent"`，这意味着`ImageView`没有地方可以放置，因为你的按钮已经占据了屏幕上的所有空间（你能明白为什么会这样吗？）

进行这些更改，然后酌情更新您的问题，因为我认为您的问题将会改变

# jquery - 使用 jquery/ajax 发布数据

> ID：15613096
> 
> 赞同：0
> 
> 时间：2013-03-25T10:50:32.790
> 
> 标签：jquery, ajax

当我发布（提交）数据时，我试图从我的表单中检索数据。但是我对 ajax 和 jquery 有一些无知。

今天，我的代码如下所示：

```
$(function() {
    $(".apply_up").submit(function(e){    
        $.post("controller/ajax.php", function(data) {
            alert("Data Loaded: " + data);
        }); 
    });
}); 
```

这是我的 HTML：

```
<form name="Apply" class="apply_up" method="Post">
    <input type="image" src="img/t_up.png" id="ajax" name="t_up" value="1 ">
</form> 
```

我想拿起价值=“1”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:53:41.303

您需要访问该值，然后将其传递：

```
$(".apply_up").submit(function(e){    
    var the_val = $('#ajax').val();
    $.post("controller/ajax.php", { 'value': the_val }, function(data) {
        alert("Data Loaded: " + data);
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:02:35.650

试试这个：

```
 $(".apply_up").submit(function(e){  
    e.preventDefault();
    var imgVal = $('#ajax').val();  
    $.post("controller/ajax.php", {value : imgVal}, function(data) {
        alert("Data Loaded: " + data.value);
    }, "json"); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:00:59.070

大多数表格的正确解决方案：

**HTML**

```
<form action="controller/ajax.php" name="Apply" class="apply_up" method="Post">
    <input type="image" src="img/t_up.png" id="ajax" name="t_up" value="1 ">
</form> 
```

**JS**

```
$(".apply_up").on('submit', function(e){
    e.preventDefault();

    var formAction = this.action,
        formData = $(this).serialize();

    $.post(formAction, formData, function(data) {
       alert("Data Loaded: " + data);
    }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:00:14.340

并使用 serialize().. 如果您的表单中有很多字段

**html**

```
<form name="Apply" id="apply" class="apply_up" method="Post">
... 
```

**jQuery**

```
$(".apply_up").submit(function(e){    
   $.post("controller/ajax.php",$(this).serialize(), function(data) {
   ...

  //OR
    $.post("controller/ajax.php",$("#apply").serialize(), function(data) {
        alert("Data Loaded: " + data);
    }); 
}); 
```

# python - 将 Python 2.x 文件（如对象）移植到 Python 3

> ID：15613106
> 
> 赞同：1
> 
> 时间：2013-03-25T10:50:58.410
> 
> 标签：python, file, python-3.x, io, porting

我正在努力改进 Python 3.X 对[PyFilesystem](https://code.google.com/p/pyfilesystem/)的支持。它是文件系统的抽象。每个文件系统对象都有一个 open 方法，该方法返回一个类似文件的对象。

我面临的问题是 open 方法适用`open`于 Python 2.X，但我希望它能够像`io.open`返回多个二进制或文本模式流之一一样工作。

我可以使用的是一种获取 Python 2.X 类文件对象的方法，并返回一个适当的 io 流对象，该对象读取/写入底层文件类对象（但如果需要处理缓冲/unicode 等）。

我在想类似以下的事情：

```
def make_stream(file_object, mode, buffering, encoding):
    # return a io instance 
```

我看不到任何直接使用 stdlib 的方法。但它让我觉得 io 模块必须在后台做一些事情，因为它是一个提供缓冲/unicode 功能的软件层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:55:46.920

Python 2 也包含相同的[`io`库](http://docs.python.org/2/library/io.html)。

用于`from io import open`跨 Python 版本工作。

然后，您的 API 应该提供一个`open()`等效的（称为`open()`or `make_stream()`），它使用`io`类库来提供相同的功能。

您需要做的就是创建一个实现[`io.RawIOBase`ABC](http://docs.python.org/3/library/io.html#io.RawIOBase)的类，然后根据*需要使用库提供的**其他*类来添加缓冲和文本处理：

 *```
import io

class MyFileObjectWrapper(io.RawIOBase):
    def __init__(self, *args):
        # do what needs done

    def close(self):
        if not self.closed:
            # close the underlying file
        self.closed = True

    # ... etc for what is needed (e.g. def read(self, maxbytes=None), etc.

def open(fileobj, mode='r', buffering=-1, encoding=None, errors=None, newline=None):
    # Mode parsing and validation adapted from the io/_iomodule.c module
    reading, writing, appending, updating = False
    text, binary, universal = False

    for c in mode:
        if c == 'r':
            reading = True;
            continue
        if c == 'w':
            writing = True;
            continue
        if c == 'a':
            appending = True;
            continue
        if c == '+':
            updating = True;
            continue
        if c == 't':
            text = True;
            continue
        if c == 'b':
            binary = True;
            continue
        if c == 'U':
            universal = reading = True;
            continue
        raise ValueError('invalid mode: {!r}'.format(mode))

    rawmode = []
    if reading:   rawmode.append('r')
    if writing:   rawmode.append('w')
    if appending: rawmode.append('a')
    if updating:  rawmode.append('+')
    rawmode = ''.join(rawmode)

    if universal and (writing or appending):
        raise ValueError("can't use U and writing mode at once")

    if text and binary) {
        raise ValueError("can't have text and binary mode at once")

    if reading + writing + appending > 1:
        raise ValueError("must have exactly one of read/write/append mode")

    if binary
        if encoding is not None:
            raise ValueError("binary mode doesn't take an encoding argument")
        if errors is not None:
            raise ValueError("binary mode doesn't take an errors argument")
        if newline is not None:
            raise ValueError("binary mode doesn't take a newline argument")

    raw = MyFileObjectWrapper(fileobj)

    if buffering == 1:
        buffering = -1
        line_buffering = True
    else:
        line_buffering = False

    if buffering < 0:
        buffering = SOME_SUITABLE_DEFAULT

    if not buffering
        if not binary:
            raise ValueError("can't have unbuffered text I/O")

        return raw

    if updating:
        buffered_class = io.BufferedRandom
    elif writing or appending:
        buffered_class = io.BufferedWriter
    elif reading:
        buffered_class = io.BufferedReader

    buffer = buffered_class(raw, buffering)

    if binary:
        return buffer

    return io.TextIOWrapper(buffer, encoding, errors, newline, line_buffering) 
```

上面的代码大部分是从[`Modules/_io/_iomodule.c` `io_open`函数](http://hg.python.org/cpython/file/2.7/Modules/_io/_iomodule.c#l290)改编而来的，但是将原始文件对象替换为ABC的`MyFileObjectWrapper`子类。`io.RawIOBase`*

# c++ - Log4Cxx 作为静态构建的一部分

> ID：15613126
> 
> 赞同：1
> 
> 时间：2013-03-25T10:52:18.010
> 
> 标签：c++, log4cxx

嗨，我正在对 Log4Cxx 进行一些初步调查，它似乎是一个动态库。我想知道是否可以将它用作静态构建的一部分。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-10T17:18:00.467

log4cxx 包有一个静态库和动态库。链接程序时使用`-l:liblog4cxx.a`（注意全名）而不是通常`-llog4cxx`的。

# asp.net - 如何在 GridView 中使单元格或行可单击

> ID：15613127
> 
> 赞同：0
> 
> 时间：2013-03-25T10:52:18.437
> 
> 标签：asp.net, vb.net

如果有人可以修改以下代码以使 GridView 变得可点击，我会很高兴。问题是有问题的代码在我的 Windows 应用程序中的 DataGridView 的 CellMouseClick 事件下完美运行，但它在 Web 应用程序中不起作用，因为其中没有这样的事件。那么，在什么情况下可以使它成为可点击的呢？

```
 Try
        dr = Nothing
        Dim str As String
        str = GridView1.SelectedValue(0).Value
        cmd = New SqlCommand("Select* from ProgramDetails.Subjects where SubjectCode='" & str & "'", cn)
        dr = cmd.ExecuteReader
        While (dr.Read)
            txtIdNumber.Text = dr(0)
            txtSubjectCode.Text = dr(1)
            txtSubjectName.Text = dr(2)
            If dr(3) = "Core" Then
                rbnCore.Checked = True
            Else
                rbnElective.Checked = True
            End If
            txtUserId.Text = dr(4)
            txtPassword.Text = dr(5)
        End While
        dr.Close()
        btnSave.Enabled = False
    Catch ex As Exception
    End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:50:37.103

You can define `LinkButton` on `ItemTemplate` of your `Gridview`

```
<asp:TemplateField>
<ItemTemplate>
<asp:LinkButton ID="lkb" CommandName="YourCommand" runat="server" Text="Sample"></asp:LinkButton>
</ItemTemplate>
</asp:TemplateField> 
```

link : [http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

sample

```
 <asp:gridview id="ContactsGridView" 
              autogeneratecolumns="false"
              onrowcommand="GridView_RowCommand"
              runat="server">
              <columns>
                 <asp:TemplateField>
                    <ItemTemplate>
                        <asp:LinkButton ID="lkb" CommandName="YourCommand" runat="server" Text="Sample"></asp:LinkButton>
                    </ItemTemplate>
                  </asp:TemplateField>
              </columns>
            </asp:gridview>

void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
 // If multiple buttons are used in a GridView control, use the
 // CommandName property to determine which button was clicked.
 if(e.CommandName=="YourCommand")
 {
      ...
 }
} 
```

# c++ - 如何从opencv获取Mat图像的亮度？

> ID：15613128
> 
> 赞同：3
> 
> 时间：2013-03-25T10:52:21.920
> 
> 标签：c++, ios, opencv, image-processing, luminance

我正在使用 C++ 中的 OpenCV 在 iOS 上进行图像处理。有时环境光不够，图像无法正确处理。我没有找到任何合适的方法来检测环境光，因此尝试检测图像的亮度。

[这个答案](https://stackoverflow.com/a/4876528/453428)建议使用 YUV 格式的亮度值或 Y。因此，在将图像转换为 YUV 格式后，我按照[这个答案](https://stackoverflow.com/a/7903042/453428)从 Mat 图像中访问像素信息。

```
- (void)processImage:(Mat&)image
{    
    Mat frame_yuv;
    cvtColor( image, frame_yuv, CV_BGR2YUV );

    uint8_t* pixelPtr = (uint8_t*)frame_yuv.data;
    int cn = frame_yuv.channels();
    for(int i = 0; i < frame_yuv.rows; i+=50)
    {
        for(int j = 0; j < frame_yuv.cols; j += 50)
        {
            Scalar_<uint8_t> yuvPixel;
            yuvPixel.val[0] = pixelPtr[i*frame_yuv.cols*cn + j*cn + 0]; // Y
            yuvPixel.val[1] = pixelPtr[i*frame_yuv.cols*cn + j*cn + 1]; // U
            yuvPixel.val[2] = pixelPtr[i*frame_yuv.cols*cn + j*cn + 2]; // V

            // do something with YUV values...
            std::cout << "Y: " << yuvPixel.val[0] << endl;
            std::cout << "U: " << yuvPixel.val[1] << endl;
            std::cout << "V: " << yuvPixel.val[2] << endl;
        }
    }
} 
```

这里有一些日志行，其中包含一些对我来说很奇怪的结果，“Y”、“U”或“V”的值在我的理解中不应该这么多。请告诉我我错过了什么或做错了什么？非常感谢。

```
Y: P
U: \204
V: \206
Y: Q
U: \201
V: \207
Y: K
U: \205
V: \211
Y: H
U: \203
V: \210
Y: G
U: \202
V: \210
Y: H
U: \201
V: \210
Y: H
U: \202
V: \211
Y: \326
U: \200
V: \204
Y: \377
U: \200
V: \200
Y: \377
U: \200
V: \200
Y: \377
U: \200
V: \200
Y: \376
U: |
V: \201
Y: \313
U: x
V: \210
Y: \231
U: ~
V: \204
Y: \214
U: ~
V: \204
Y: \205
U: |
V: \204
Y: \221
U: 
V: \202 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-09T19:33:06.767

这是您可以非常简单地做到这一点的方法，对我有用！

也发布在 PasteBin 上： [https ://pastebin.com/tA1R8Qtm](https://pastebin.com/tA1R8Qtm)

```
// -----------------------------------------------------
// ---------- FIND AVG LUMINENCE OF FRAME --------------
// -----------------------------------------------------

// Assuming you have a cv::Mat to start with called "input_mat"
cv::Mat grayMat; 
cv::cvtColor(input_mat, grayMat, CV_BGR2GRAY);

int Totalintensity = 0;
for (int i=0; i < grayMat.rows; ++i){
    for (int j=0; j < grayMat.cols; ++j){
        Totalintensity += (int)grayMat.at<uchar>(i, j);
    }
}

// Find avg lum of frame
float avgLum = 0;
avgLum = Totalintensity/(grayMat.rows * grayMat.cols); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:36:55.673

您的日志输出的原因是您的像素值是 type `uint8_t`，当您尝试将其输出到控制台时，它将被解释为`unsigned char`（至少在 iOS 上）。所以日志输出就是那个像素值所代表的字符。要输出相应的数值，请将值转换为 an `int`，如下所示：

```
std::cout << "Y: " << (int)yuvPixel.val[0] << std::endl;
std::cout << "U: " << (int)yuvPixel.val[1] << std::endl;
std::cout << "V: " << (int)yuvPixel.val[2] << std::endl; 
```

此外，您发布的代码三次输出相同的元素，并且`bgrPixel`未定义。我也纠正了这个片段中的这些错误。

如果您只对亮度信息感兴趣，则可以调用

```
cv::cvtColor(image, frame_yuv, CV_BGR2GRAY); 
```

它与 YUV 的 Y 通道进行相同的颜色转换，但效率更高。

# java - Netty 简单通道处理程序断开连接被阻止

> ID：15613129
> 
> 赞同：5
> 
> 时间：2013-03-25T10:52:22.450
> 
> 标签：java, netty

我的 Netty 频道处理程序`channelClosed ()`被阻止，而在`messageReceived()`.
我用于`OrderedMemoryAwareThreadPoolExecutor`同步消息。
被`channelClosed()`低优先级线程处理。？

您能否介绍一下netty中的线程优先级。谢谢

```
 objChannelPipeline.addLast("ipFilter", objCustomIPFilterHandler);
    objChannelPipeline.addLast("idleHandler", new IdleStateHandler(timer,5,5, 0));
    objChannelPipeline.addLast("loggingHandler", objLoggingHandler);        
    objChannelPipeline.addLast("frameDecoder",
            new DelimiterBasedFrameDecoder(Integer.MAX_VALUE, false, ChannelBuffers.copiedBuffer("\n\n".getBytes(CharsetUtil.UTF_8))));
    objChannelPipeline.addLast("messageDecoder", new CustomMessageDecoder());
    objChannelPipeline.addLast("groupOrder", executionHandler);
    objChannelPipeline.addLast("ProtocolMultiplexer", CustomHandler); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:15:06.657

我猜这是因为您正在使用`OrderedMemoryAwareThreadPoolExecutor`，在这种情况下，事件将按照它们发生的顺序执行。因此`messageReceived()`将始终执行 before `channelClose()`。

因此，如果您收到 3 条消息，然后通道关闭，则将`messageReceived`执行前 3 次，之后仅`channelClose()`执行。

如果您使用`MemoryAwareThreadPoolExecutor`than 在这种情况下`channelClose`可以在之前被调用，`messageReceived()`因为这里事件的执行是没有顺序的。

希望这可以帮助 ！！

# jquery - jqPlot 不使用日期绘图

> ID：15613134
> 
> 赞同：0
> 
> 时间：2013-03-25T10:52:36.903
> 
> 标签：jquery, jqplot

我尝试使用 jqu Plot 绘制趋势线图：

```
$(document).ready(function ()
    {
        var line1 = [['2012-01-01', 578.55], ['2012-01-02', 566.5], ['2012-01-03', 480.88], ['2012-01-04', 509.84]];

        var plot1 = $.jqplot('TrendChart', [line1], {
            title: 'Data Point Highlighting',
            axes: {
                xaxis: { renderer: $.jqplot.DateAxisRenderer, tickOptions: { formatString: '%b&nbsp;%#d'} },
                yaxis: { tickOptions: { formatString: '$%.2f' } }
            },
            highlighter: { show: true, sizeAdjust: 7.5 },
            cursor: { show: false }
        });
    }); 
```

该页面加载了一个图表，但没有与相应的值一致......我做错了什么这几乎是文档中的确切示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:02:15.100

不要忘记包含 jqplot.dateAxisRenderer.js 插件

# html - 带有 HTML 控件的 Flash/HTML5 播放器？

> ID：15613137
> 
> 赞同：1
> 
> 时间：2013-03-25T10:52:44.987
> 
> 标签：html, flash, web, video-player

我正在寻找可以处理 MP4、H263、MP3/MP4A/OGG、WEBM、OGGV 和.. FLV 的播放器。它应该只在 chrome 上运行，因此它支持 html5 格式。我尝试了 video.js，但它不播放 FLV。有没有可以处理所有格式的播放器（尤其是免费的）？我宁愿只改变一个 html 的皮肤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:58:30.933

有很多可用的播放器，但我想有一些支持所有提到的扩展..

这里是其中的一些

[http://www.longtailvideo.com/support/jw-player/28836/media-format-support/](http://www.longtailvideo.com/support/jw-player/28836/media-format-support/)

[http://www.hdflvplayer.net/blog/html5-support-availed-for-hd-flv-player/](http://www.hdflvplayer.net/blog/html5-support-availed-for-hd-flv-player/)

这将帮助您了解一些支持的格式..

[https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)

希望能帮助到你..

# sql - 从 SQL 查询中了解经度和纬度方程中的距离关系

> ID：15613138
> 
> 赞同：0
> 
> 时间：2013-03-25T10:52:46.690
> 
> 标签：sql, geolocation

在我没有开发的 PHP 程序中，我可以通过表单输入与给定美国邮政编码（以英里为单位的半径）的距离，从中进行邻近搜索。

我们以北卡罗来纳州加斯托尼亚市为例，其邮政编码为 28054，半径为 10 英里。

PHP 代码动态生成 SQL 查询。在达到这一点之前，它会在幕后进行计算并给出这些值：

```
:minlat (Float) 35.084832880851
:maxlat (Float) 35.374297119149
:minlon (Float) -81.305653802747
:maxlon (Float) -80.951286197253 
```

它也给出了这个距离：

```
:distance (Float) 16093.47 
```

鉴于我在表单中输入的距离，我无法查看或操作生成这些值的代码。但是，我可以覆盖每个计算变量的值。

我理解`:minlat`and `:minlon`，它是我邮政编码的中心点。我不明白的是，它与和`:distance`有什么关系？`:maxlat``:maxlon`

`:distance`以 10 英里的形式开始的测量是什么类型的？

显然`:distance`添加`:maxlat`或`:maxlon`没有任何意义。

我最终想要做的是取一个`:minlat`and `:minlon`，我有一个点数据库，然后搜索某个`:distance`.

所以，如果我想搜索 20 英里，那将是 :distance 32186 ish，但这对 maxlat 和 maxlon 有何影响？

如果您对整个 SQL 查询感兴趣，它是：

```
SELECT node.title AS node_title, 
       node.nid AS nid, 
       node.created AS node_created, 
       'node' AS field_data_field_item_photos_node_entity_type,
       (COALESCE(ACOS(0.81684734668492*COS(RADIANS(location.latitude))*(0.15421945466762*COS(RADIANS(location.longitude)) + -0.9880366186544*SIN(RADIANS(location.longitude))) + 0.57685389156511*SIN(RADIANS(location.latitude))), 0.00000)*6370997.0816549) AS location_distance
FROM 
  {node} node
  LEFT JOIN {location_instance} location_instance ON node.vid = location_instance.vid
  LEFT JOIN {location} location ON location_instance.lid = location.lid
WHERE (( (node.status = '1') 
         AND (location.latitude > '35.084832880851' 
              AND location.latitude < '35.374297119149' 
              AND location.longitude > '-81.305653802747' 
              AND location.longitude < '-80.951286197253')
         AND ((COALESCE(ACOS(0.81684734668492*COS(RADIANS(location.latitude))*(0.15421945466762*COS(RADIANS(location.longitude)) + -0.9880366186544*SIN(RADIANS(location.longitude))) + 0.57685389156511*SIN(RADIANS(location.latitude))), 0.00000)*6370997.0816549) < '16093.47') )) 
```

表结构

```
+-----------+----------------+------+-----+-------- --+--------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+-----------+----------------+------+-----+-------- --+--------+
| 拉链 | varchar(16) | 否 | 穆尔 | 0 | |
| 城市| varchar(30) | 否 | | | |
| 状态 | varchar(30) | 否 | | | |
| 纬度 | 十进制(10,6) | 否 | 穆尔 | 0.000000 | |
| 经度 | 十进制(10,6) | 否 | 穆尔 | 0.000000 | |
| 时区 | 小整数(4) | 否 | | 0 | |
| dst | 小整数(4) | 否 | | 0 | |
| 国家 | 字符(2) | 否 | 穆尔 | | |
+-----------+----------------+------+-----+-------- --+--------+

```

# javascript - 在屏幕上移动图像

> ID：15613140
> 
> 赞同：4
> 
> 时间：2013-03-25T10:52:48.813
> 
> 标签：javascript

我是 html5 的初学者，并且在一个简单的程序中面临这个问题，可以在屏幕上移动图像。它是一个简单的 pacman 程序，我在其中使用了两个图像。一个是张着嘴的吃豆人，另一个是闭着嘴的吃豆人。当我试图将它移过屏幕向右移动时，它必须返回到初始位置。它尝试了很多方法，但都没有奏效。它每一步只移动一次，下一步它是静止的。如果有人可以解决这个问题，那将非常有帮助

```
<html>
<head>
<SCRIPT>
    var timer = setInterval(Run,500);
    flag = 1;
    function Run(){
    img1 = document.getElementById("PacMan");
    var init=0;
    var x = 0; 
    var dest_x = 800;  
    var interval = 10; 
    if(x<dest_x) 
        x = x + interval; 
        img1.style.left = x+"px";
    if (x+interval < dest_x)
        img1.style.left = init+"px";
    if(flag ==1){
        img1.src = "PacMan2.png";
        flag=0;

    }
    else {
        img1.src = "PacMan1.png";
        flag=1;
    }
    }
</SCRIPT>
</head>
<body>

<img id="PacMan" src = "PacMan1.png" onClick=clearInterval(timer)
 style="position:absolute"> </img>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:57:50.013

尝试移动

```
var init=0;
var x = 0;
var dest_x = 800;
var interval = 10; 
```

之前`function Run(){`。

现在你用初始数据覆盖结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:56:12.987

```
 var timer = setInterval("Run()",500); 
```

你错过了一些逗号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:11:17.367

尝试读取当前 pacMan 位置

```
var x = img1.offsetLeft; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T10:55:40.560

在我看来，您必须使用[Canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Basic_animations?redirectlocale=en-US&redirectslug=Canvas_tutorial/Basic_animations)（查看 MDN 上的示例）和 JavaScript 来完成此操作。

# ms-access - SSIS 访问提供程序

> ID：15613143
> 
> 赞同：0
> 
> 时间：2013-03-25T10:53:14.577
> 
> 标签：ms-access, ssis

我正在 Microsoft Visual Studio Ultimate 2012 试用版上构建 SSIS 包以导入访问数据库，但在创建连接字符串时，我无法从下拉列表中看到正确的提供程序（Microsoft Office 12.0 Access Database Engine OLE DB 提供程序） . 我下载了 AccessDatabaseEngine_x64，因为安装的 MS Office 是 64 位的，我仍然看不到我正在寻找的这个提供程序。我正在 Windows Server 2012 64 位机器上构建这个 SSIS 包。

我需要知道我应该怎么做才能看到这个提供者。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:27:49.130

好的。这主要是假设，但适用于数据库驱动程序。如果这是不正确的，我将很快被否决。

我假设您的 Microsoft Visual Studio Ultimate 2012 版本是 32 位应用程序，因此您看不到 64 位驱动程序。

无论您安装的是哪种类型的 Office，它都会创建一个输出文件，并且该文件没有“位”-即，无论您的 Office 应用程序是 32 位还是 64 位，都会生成相同的文件。

您只需要将您的 SSIS 运行时与您的驱动程序相匹配。因此，如果您的 SSIS 包将以 64 位运行，则需要 64 位驱动程序才能访问 Office 文件。

如果它将以 32 位运行，则需要 32 位驱动程序。

通常你只需安装两个版本，在 32 位上开发并在 64 位或 32 位上运行。

# ruby-on-rails - 我可以使用 DigitalOcean 来托管社交应用程序吗？

> ID：15613145
> 
> 赞同：-5
> 
> 时间：2013-03-25T10:53:18.373
> 
> 标签：ruby-on-rails, hosting, cloud

我正在使用 Ruby on Rails 创建一个用于照片共享的社交应用程序（非常简单）。我使用一些 Rails 依赖项和 MySQL 作为数据库。我还需要使用我已经购买的自定义域。

我有些疑惑：

*   如果我的应用程序需要快速扩展，DigitalOcean 是否足够？

*   我可以访问允许我安装和更改 Rails 方面的 shell 吗？

*   我可以完全访问 MySQL，包括备份和其他东西吗？

*   初学者应用程序有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T16:26:05.220

有两种方法可以选择像 Heroku 这样的 PaaS 提供商，或者像 DigitalOcean 这样的 IaaS 提供商。

### 即服务

对运行应用程序的实际架构的可见性较低，更容易扩展，但成本更高。此外，当您的可见性较低时，您就不会专注于微调代码和使用简单的架构选择来提高性能而不增加复杂性。

### 即服务即服务

您对所有事情负责，这意味着您将需要花费更多时间进行初始设置并找出一些新事物；但是你会更好地了解你的应用程序如何与硬件交互，以及你需要调整哪些元素来扩展。

### 用于扩展的基本 IaaS 设置

您可以提前猜测您网站的哪个部分将最难扩展时间；但归根结底，无论您计划多少，最终都会遇到瓶颈。因此，您可以采取一些简单的步骤，这些步骤会在您遇到性能障碍时延迟，并且在您这样做时更容易扩展：

1.  **专用数据库实例**- 从一开始就将您的数据库服务器移至其自己的虚拟机。数据库服务器、缓存服务器和应用服务器的工作负载不同，它们在处理单个特定任务时得到最佳优化。您还可以将 VM 的所有资源用于 DB。

2.  **Nginx 负载均衡器**- 现在您的数据库位于单独的服务器上，您可以创建传统的应用程序/Web 服务器。我建议您创建两个 Web 服务器并创建一个 Nginx 负载均衡器，可以将负载分散到这些机器上。这是更多的配置，但是当您添加服务器 #3、#4、#N 时，这是一个简单的配置更改。

3.  **缓存！**- 缓存一切！它可能很简单，例如使用在您的数据库之前查询的 memcache，或者它可以为您网站上最常点击的 URL 或部分创建缓存页面，但缓存将显着改善您的加载时间，并让您提供更多的点击更少的服务器为您节省现金。

4.  **对象存储/内容**- 如果您有大量内容组件，您应该从一开始就使用像 Amazon 的 S3 这样的对象存储。通过从一开始就将其集成到您的应用程序中，您以后不需要重新构建它。这将花费您更多的钱，但您还需要考虑您无需管理多个卷并处理出现的一些扩展问题而让自己头疼的问题。

5.  **配置管理：Puppet/Chef** - 现在您有几种不同类型的服务器：DB、Web/App、负载均衡器、缓存 - 使用 Puppet 或 Chef 来设置它们是个好主意。同样，您将有一个学习曲线，但这意味着当您需要将 N+1 服务器添加到特定实例类型时，您需要 2 分钟，而不是 2 小时。

当然还有很多其他的考虑因素，但是您从一开始就采取的前瞻性步骤越多，您的扩展之路就越容易。无论您采取多少步骤，您仍然会遇到扩展问题，因此在 MVP 精益启动方法中平衡这一点很重要，这样您就不必花费数月时间来构建完美的基础架构设置，因为没有牵引力，它不会如果您拥有所有服务器，这很重要，因为它们不会受到大量流量的影响。

这篇文章背后的基本思想是，您的主要问题是 PaaS 与 IaaS，如果您走 IaaS 路线，DigitalOcean（因为我是联合创始人）是一个不错的选择，但最终您与 IaaS 提供商的最大胜利将是围绕做一个在设置应用程序时做出一些明智的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:07:18.060

听起来您的应用程序可以在 Digitalocean VPS 上运行。

*   当您需要更多资源时，您可以扩展您的 Digitalocean VPS。（[https://www.digitalocean.com/features](https://www.digitalocean.com/features)）
*   您将拥有对您的 VPS 的 root 访问权限。所以你可以自己安装 Rails 并改变你想要的一切。
*   是的。
*   也许支持 Ruby 的共享托管环境将满足您的需求。

# input - 输入地址并显示谷歌街景位置

> ID：15613148
> 
> 赞同：1
> 
> 时间：2013-03-25T10:53:23.577
> 
> 标签：input, maps, google-street-view

我试图让人们“绕过”传统的谷歌地图，并在输入地址后立即显示街景位置。（我不想与地图街景小人或标记等进行任何交互 - 只需输入地址并显示街景）。

任何帮助将非常感激。

下面是我一直在尝试破解以产生这些结果的代码。但我是新手，有点困惑。

```
var map;
  var berkeley = new google.maps.LatLng(-29.859515,30.998577);
  var sv = new google.maps.StreetViewService();

  var panorama;

  function initialize() {

    panorama = new google.maps.StreetViewPanorama(document.getElementById('pano'));

    // Set up the map
    var mapOptions = {
      center: berkeley,
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      streetViewControl: false
    };
    map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);

         var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);

    autocomplete.bindTo('bounds', map);

    var infowindow = new google.maps.InfoWindow();
    var marker = new google.maps.Marker({
      map: map
    });

    google.maps.event.addListener(autocomplete, 'place_changed', function() {

      infowindow.close();
      marker.setVisible(false);
      input.className = '';
      var place = autocomplete.getPlace();
      if (!place.geometry) {
        // Inform the user that the place was not found and return.
        input.className = 'notfound';
        return;
      }

      // If the place has a geometry, then present it on a map.
      if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
      } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);  // Why 17? Because it looks good.
      }

    //edit the doing var <!-- Edit this for auto marking to affect street view --> 

      var markerPanoID = data.location.pano;
        // Set the Pano to use the passed panoID
        panorama.setPano(markerPanoID);
        panorama.setPov({
          heading: 270,
          pitch: 0
        });
        panorama.setVisible(true);

      var address = '';
      if (place.address_components) {
        address = [
          (place.address_components[0] && place.address_components[0].short_name || ''),
          (place.address_components[1] && place.address_components[1].short_name || ''),
          (place.address_components[2] && place.address_components[2].short_name || '')
        ].join(' ');
      }

      infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
      infowindow.open(map, marker);
    });

    // getPanoramaByLocation will return the nearest pano when the
    // given radius is 50 meters or less.
    google.maps.event.addListener(map, 'click', function(event) {
        sv.getPanoramaByLocation(event.latLng, 50, processSVData);
    });

  }

  function processSVData(data, status) {
    if (status == google.maps.StreetViewStatus.OK) {
      var marker = new google.maps.Marker({
        position: data.location.latLng,
        map: map,
        title: data.location.description
      });

      panorama.setPano(data.location.pano);
      panorama.setPov({
        heading: 270,
        pitch: 0
      });
      panorama.setVisible(true);

      google.maps.event.addListener(marker, 'click', function() {

        var markerPanoID = data.location.pano;
        // Set the Pano to use the passed panoID
        panorama.setPano(markerPanoID);
        panorama.setPov({
          heading: 270,
          pitch: 0
        });
        panorama.setVisible(true);
      });
      } else {
      alert('Street View data not found for this location.');
    }
  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:06:44.850

以下链接可能会回答您的问题。其描述：

*   如何从地址输入中获取谷歌地图标记和街景。
*   它还计算视角/偏航角，以便您面对正确的街景角度。

说明：[http ://www.jaycodesign.co.nz/js/using-google-maps-to-show-a-streetview-of-a-house-based-on-an-address/](http://www.jaycodesign.co.nz/js/using-google-maps-to-show-a-streetview-of-a-house-based-on-an-address/)

演示：[http ://www.jaycodesign.co.nz/wp-content/uploads/demos/StreetView/](http://www.jaycodesign.co.nz/wp-content/uploads/demos/StreetView/)

**更新如上链接已损坏**。考虑以下 SO 问题和答案：[使用 Google Maps API 根据地址显示房屋的街景](https://stackoverflow.com/questions/24625013/use-google-maps-api-to-display-street-view-of-a-house-based-on-an-address)

我没有测试过它，但它更流行。

# php - 当变量不存在时如何避免php中未定义的变量？

> ID：15613151
> 
> 赞同：0
> 
> 时间：2013-03-25T10:53:31.657
> 
> 标签：php, wordpress, variables, undefined

我只在非常基本的东西上接触 php。

但我总是喜欢在制作 wordpress 主题时避免错误/通知。

我在下面有一个简单的函数来列出我的分类术语。

```
$tax = 'dealer-communications';
$terms = get_terms($tax);
$count = count($terms);
if ( $count > 0 ){
    echo '<li class="nav-header">Dealer communications</li>';
    foreach ( $terms as $term ) {
        if (get_queried_object()->slug == $term->slug) $active = 'class="active"';
        echo '<li '.$active.'><a href="'.get_term_link($term->slug, $tax).'">' . $term->name . '</a></li>';
    }
} 
```

如您所见，我有一个`$active`变量。

当 my不匹配时，此`active`变量未定义`get_queried_object()->slug``$term->slug`

如何避免我的活动变量未定义。所以它被定义但为空。

他们唯一能让我的大脑解决问题的方法就是这样做......

```
$active = null;
if (get_queried_object()->slug == $term->slug) $active = 'class="active"'; 
```

或者...

```
if (get_queried_object()->slug == $term->slug) {
    $active = 'class="active"';
} else {
    $active = '';
} 
```

这是最有效的方法还是有替代的 php 方法？

非常感谢乔希

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:00:32.567

没有替代 php 方法，但为了便于阅读，您不应在`if`块中声明/初始化变量，例如：

```
foreach ( $terms as $term ) {
    $active = '';
    if (get_queried_object()->slug == $term->slug) $active = 'class="active"';
    echo '<li '.$active.'><a href="'.get_term_link($term->slug, $tax).'">' . $term->name . '</a></li>';
} 
```

您还可以使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)（但不是真正可读）：

```
$active = (get_queried_object()->slug == $term->slug) ? 'class="active"' : ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:58:56.437

根据我的经验，第二种方法更常见。您当然可以使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php)来缩短它，类似于：

```
$active = (get_queried_object()->slug == $term->slug) ? 'class="active"' : '';
//       if ^                                            ^ do this        ^ else do this 
```

不过，有些人认为这更令人困惑。我想这归结为个人喜好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T10:59:16.910

您也可以使用三元运算符，因为它有点短：

```
$active = ( get_queried_object()->slug == $term->slug ? 'class="active"' : '' ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T10:56:00.997

第二个将是更有效的方法：

```
if (get_queried_object()->slug == $term->slug) {
    $active = 'class="active"';
} else {
    $active = '';
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T10:57:15.810

第二种选择是最好的方法，因为它确保变量值在每个循环中实际发生变化，否则前一个循环的值可能会影响当前循环。

例如，您获得一个活动的 LI，将 $active 设置为正确的值，一切正常。但是，在下一个循环步骤中，LI 不应该处于活动状态，但是因为您没有清除先前的分配，所以 $active 变量仍会将此 LI 设置为活动状态。

编辑： PHP 范围不像 javascript 范围那样工作，对此答案的一些评论似乎需要这个澄清：

```
$test = array(
  array("name"=>"Is inactive", "active"=>false),
  array("name"=>"Is active", "active"=>true),
  array("name"=>"Is caught by problem", "active"=>false)
);

foreach ($test as $example ){
  if ($example["active"]) $active = true;

  if ($active) {
    echo $example["name"]." was parsed as ACTIVE\n";
  } else {
    echo $example["name"]." was parsed as INACTIVE\n";
  }
} 
```

输出一个通知（因为 $active 在循环的第一步未定义）和以下文本：

```
Is inactive was parsed as INACTIVE
Is active was parsed as ACTIVE
Is caught by problem was parsed as ACTIVE <--- Problem 
```

# c# - 如何在 WCF 通信中从服务主机访问服务

> ID：15613160
> 
> 赞同：0
> 
> 时间：2013-03-25T10:54:03.303
> 
> 标签：c#, wcf, wsdualhttpbinding

我有许多客户端，使用 WCF wsDualHttpBinding 进行通信，它们正在访问主机，询问信息。必须搜索此信息，这意味着无法在同一线程中给出答案。

该问题看起来与以下内容相同： [如何在 WCF 服务和主机应用程序之间进行通信？](https://stackoverflow.com/questions/4679946/how-to-communicate-between-wcf-service-and-host-application)

只有我不能使用 Singleton 构造函数，而必须使用主机的 Typeof(..) 构造函数，因为我可以拥有更多客户端。但是服务主机如何访问客户端发送正确的答案呢？

问候，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:05:07.653

开箱即用的 WCF 双工通信无法工作是否有原因？

这是一个定义和示例：http: [//msdn.microsoft.com/en-us/library/ms731064.aspx](http://msdn.microsoft.com/en-us/library/ms731064.aspx)

# java - 打开没有 Auto_Openening 的工作簿

> ID：15613163
> 
> 赞同：4
> 
> 时间：2013-03-25T10:54:14.520
> 
> 标签：java, excel, vb6, jacob, vba

> 我如何在没有使用 Jacob 运行 Auto_Open 的情况下打开工作簿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:50:54.683

尝试这个：

```
excel.setProperty("EnableEvents", new Variant(false)); 
```

# unity3d - 连接到播放器的地板

> ID：15613165
> 
> 赞同：0
> 
> 时间：2013-03-25T10:54:23.973
> 
> 标签：unity3d, physics

我在 Unity 中工作，并且在播放器的 x、z 坐标上附加了一个地板，因此我不需要将地板加载到瓷砖中。地板总是平整的。

但是我注意到当玩家（或任何其他物体）在地板上移动时，速度会增加，因为地板实际上也在移动。

我的地板是运动学刚体，没有应用物理材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:15:01.020

我将飞机的物理材质设置为没有摩擦，角色没有平台，这似乎可以工作。

# java - 使用 Gradle 从另一个项目运行 JUnit 测试？

> ID：15613177
> 
> 赞同：2
> 
> 时间：2013-03-25T10:54:55.613
> 
> 标签：java, junit, gradle

**问题：**是否可以运行位于一个 Gradle 项目中的 JUnit 测试，并且依赖于另一个项目？

**背景**

考虑这个多项目设置：

```
product_1_configuration_with_tests/
feature_a_with_tests/
feature_b_with_tests/
common_integration_tests/ 
```

*   为简单起见，产品项目依赖于其他三个项目。不存在其他依赖项。
*   `common_integration_tests`包含所有产品通用的集成测试，*必须*在产品的上下文（类路径/依赖项）中运行。
*   `common_integration_tests`不能对任何其他项目有任何依赖关系。
*   常见集成测试的行为因运行时类路径上的内容而异。

如何运行这种常见的集成测试？

**尝试**

理想情况下，我希望在产品项目中定义测试任务。我尝试在套件中包含集成测试：

```
// In product_1_configuration_with_tests/build.gradle
task integrationTest(type: Test) {
  include '**/MyIntegrationTest.class'
} 
```

由于测试任务没有找到驻留在另一个模块中的测试，因此不执行任何测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:25:02.083

要么将集成测试源声明为项目的单独源集`product_1_configuration_with_tests`（放弃`common_integration_tests`项目），要么声明来自`common_integration_tests`on的依赖项`product_1_configuration_with_tests`。在新建项目中，前者是更可取的方法，但后者也可以。其他解决方案不必要地复杂。

> common_integration_tests 不能对任何其他项目有任何依赖关系。

为什么？

# registry - Inno Setup - 使用通配符注册表项设置 DefaultDir？

> ID：15613178
> 
> 赞同：4
> 
> 时间：2013-03-25T10:54:56.967
> 
> 标签：registry, inno-setup, wildcard

我最近开始使用 Inno Setup 来尝试创建一个简单的 .exe 安装程序来修改游戏。

我已经让安装程序在大多数情况下工作正常，但目前它有点基本。我真正希望安装程序做的是自动找到该 mod 设计的游戏的安装目录（战争黎明 - 黑暗十字军东征），因此用户无需手动浏览它。

我读过 Inno 安装程序可以根据注册表项设置 DefaultDir。然而，虽然“目标”游戏确实创建了一个包含其安装目录的注册表项，但该游戏可以通过数字方式（通过 Steam）或物理方式购买，它会根据所购买的格式创建不同的注册表项。我的 mod 与任何一种格式，但如果有多个可能的注册表项格式，我不知道如何设置 DefaultDir。

是否有某种“通配符”功能可以从其注册表项中返回游戏的安装目录，而无需输入准确的完整注册表项值（即某种注册表通配符）？或者搜索它可能具有的两个可能值，然后如果它没有找到则默认为 {src} ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:44:04.843

除了在`[Code]`别处使用 as 回答之外，您还可以嵌套注册表常量：

```
DefaultDirName={reg:HKLM,Software\Vendor1\Application,InstallPath|{reg:HKLM,Software\Vendor2\Application,InstallPath|{pf}\DefaultInstallPath}} 
```

这将使用 Vendor1 的路径（如果存在）；如果失败，它将尝试 Vendor2 的路径，并且只有当它无法找到其中任何一个时，它才会回退到某个默认值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T11:03:54.417

您可以通过该部分分配[`DefaultDirName`](http://jrsoftware.org/ishelp/topic_setup_defaultdirname.htm)指令的值。[`[Code]`](http://jrsoftware.org/ishelp/topic_scriptcreating.htm)例如，以下伪脚本显示了如何在注册表中查询两个字符串值并将找到的第一个返回给[`DefaultDirName`](http://jrsoftware.org/ishelp/topic_setup_defaultdirname.htm)指令。如果没有找到查询的注册表值，则返回默认常量值：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={code:GetDirName}

[Code]
function GetDirName(Value: string): string;
var          
  InstallPath: string;
begin
  // initialize default path, which will be returned when the following registry
  // key queries fail due to missing keys or for some different reason
  Result := '{pf}\Default Dir Name';
  // query the first registry value; if this succeeds, return the obtained value
  if RegQueryStringValue(HKLM, 'Software\Vendor\Application', 'First Key', InstallPath) then
    Result := InstallPath
  // otherwise the first registry key query failed, so...
  else
  // query the second registry value; if it succeeds, return the obtained value
  if RegQueryStringValue(HKLM, 'Software\Vendor\Application', 'Second Key', InstallPath) then
    Result := InstallPath;
end; 
```

# php - 删除数组键而不删除键值

> ID：15613185
> 
> 赞同：0
> 
> 时间：2013-03-25T10:55:25.147
> 
> 标签：php, arrays

谁能告诉我如何在不删除键值的情况下从数组中删除数组键。例如：

这是我的价值：

```
$arr = array("1"=>2,"2"=>5,"3"=>10); 
```

我想要的是：

```
$arr = array(2,5,10); 
```

如果两者相等，如何分配默认键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:56:45.337

使用[`array_values`](http://php.net/array_values)功能：

```
$arr = array_values($arr); 
```

从[文档](http://php.net/array_values)中：

> `array_values()`返回输入数组中的所有值并以数字方式索引数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:01:02.067

您可以将 array_value() 用于您的目的。

```
$arr           = array("1"=>2,"2"=>5,"3"=>10);
$array_values  = array_values($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:57:52.773

请使用此功能

```
$arr = array_values($arr); 
```

# mysql - MySQL groupwise MAX() 返回意外结果

> ID：15613187
> 
> 赞同：4
> 
> 时间：2013-03-25T10:55:31.213
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

**表：贷款**

```
Loan_no     Amount        SSS_no              Loan_date

7           700.00        0104849222          2010-01-03 
8           200.00        0104849222          2010-02-28
9           300.00        0119611199          2010-11-18
10          150.00        3317131410          2012-11-28
11          600.00        0104849222          2011-01-03
14          175.00        3317131410          2012-12-05
15          260.00        3317131410          2013-02-08
16          230.00        0104849222          2013-03-06
17          265.00        0119611199          2011-04-30
18          455.00        3317131410          2013-03-10 
```

* * *

**期望的结果：**

我想检索每个人提供的最新贷款（由他们的 SSS 编号标识）。结果应如下所示：

```
Loan_no           Amount                SSS_no                Loan_date

16                230.00              0104849222              2013-03-06
17                265.00              0119611199              2011-04-30
18                455.00              3317131410              2013-03-10 
```

* * *

**使用的查询#1：**

`SELECT * FROM loan GROUP BY SSS_no ORDER BY Loan_date DESC`

MYSQL 结果

```
Loan_no             Amount              SSS_no                  Loan_date

10                  150.00            3317131410                2012-11-28
9                   300.00            0119611199                2010-11-18
7                   700.00            0104849222                2010-01-03 
```

* * *

**使用的查询#2：**

`SELECT Loan_no, Amount, SSS_no, max(Loan_date) FROM loan GROUP BY SSS_no`

MYSQL 结果

```
Loan_no            Amount                SSS_no                Loan_date

7                  700.00                0104849222            2013-03-06
9                  300.00                0119611199            2011-04-30
10                 150.00                3317131410            2013-03-10 
```

有人可以帮我解决我的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:14:18.287

[MySQL 参考](http://dev.mysql.com/doc/refman/5.6/en/example-maximum-column-group-row.html)建议了几种解决此问题的方法。最简单的是子查询：

```
SELECT *
FROM   loan l1
WHERE  loan_date=(SELECT MAX(l2.loan_date)
              FROM loan l2
              WHERE l1.sss_no = l2.sss_no); 
```

鉴于[这种类型的子查询可能性能不佳](http://dev.mysql.com/doc/refman/5.6/en/correlated-subqueries.html)，他们还建议使用`JOIN`（基本上是 Mahmoud Gamal 的答案）：

```
SELECT l1.loan_no, l1.amount, l1.sss_no, l1.loan_date
FROM loan l1
JOIN (
  SELECT loan_no, MAX(loan_date) AS loan_date
  FROM loan
  GROUP BY sss_no) AS l2
  ON l1.loan_date = l2.loan_date AND l1.sss_no = l2.sss_no; 
```

第三种选择是：

```
SELECT l1.loan_no, l1.amount, l1.sss_no, l1.loan_date
FROM loan l1
LEFT JOIN loan l2 ON l1.sss_no = l2.sss_no AND l1.loan_date < l2.loan_date
WHERE l2.sss_no IS NULL; 
```

工作的`LEFT JOIN`基础是，当`l1.loan_date`处于最大值时，有后面`l2.loan_date`，所以 l2 行值将为 NULL。

所有这些都应该具有相同的输出，但性能可能不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:58:45.873

试试这个：

```
SELECT l1.*
FROM loan AS l1
INNER JOIN
(
   SELECT SSS_no, MAX(Loan_date) LatestDate
   FROM loan
   GROUP BY SSS_no
) AS l2  ON l1.SSS_no    = l2.SSS_no 
        AND l1.loan_date = l2.LatestDate; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/709939/1)

这会给你：

```
| LOAN_NO | AMOUNT |     SSS_NO |  LOAN_DATE |
----------------------------------------------
|      16 |    230 |  104849222 | 2013-03-06 |
|      17 |    265 |  119611199 | 2011-04-30 |
|      18 |    455 | 3317131410 | 2013-03-10 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:21:17.913

您得到意外结果的原因是因为您`GROUP BY`仅在列表中的一列上使用 a`SELECT`并且您没有在所有列上使用任何聚合函数。

MySQL 对该函数使用了扩展，`GROUP BY`当您不这样做`GROUP BY`或聚合`SELECT`列表中的所有项目时，可能会导致意外结果。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

您可以确保返回正确结果的唯一方法是更改​​您的查询以`GROUP BY`正确聚合。

所以你可以使用类似的东西：

```
select l1.loan_no,
  l1.amount,
  l1.SSS_no,
  l1.loan_date
from loan l1
inner join
(
  select SSS_no, max(loan_date) Loan_date
  from loan
  group by SSS_no
) l2
  on l1.SSS_no = l2.SSS_no
  and l1.loan_date = l2.loan_date 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/709939/15)

这实现了一个子查询来获取`max(loan_date)`for each `SSS_no`。`SSS_no`然后，此子查询会在 the和 max上连接回您的表，`loan_date`这将保证您为每个`SSS_no`.

# python - 我可以重构这个使用属性装饰器的简单回调模式吗？

> ID：15613192
> 
> 赞同：0
> 
> 时间：2013-03-25T10:55:41.713
> 
> 标签：python, properties, callback, decorator, python-decorators

我刚刚开始掌握 Python 中的装饰器，并使用以下简单模式使用它们向某些实例变量添加回调：

```
class A(object):
    def __init__(self):
        self._var = 0
        self.var_callbacks = []

    @property
    def var(self):
        return self._var

    @var.setter
    def var(self, x):
        self._var = x
        for f in self.var_callbacks:
            f(x) 
```

属性装饰器是一种简洁的方式，它允许我在必要时引入回调而不更改类接口。但是，在第三个或第四个变量之后，它使代码有点重复。

有没有办法将此模式重构为以下内容：

```
class A(object):
    def __init__(self):
        self.var = 0
        enable_callback(self, 'var', 'var_callbacks') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:16:03.690

您需要在类上设置属性（因为它是一个描述符），因此`enable_callback`在初始化程序中使用调用是行不通的。

您可以使用类装饰器从模式设置属性：

```
def callback_properties(callbacks_attribute, *names):
    def create_callback_property(name):
        def getter(self):
            return getattr(self, '_' + name)
        def setter(self, value):
            setattr(self, '_' + name, value)
            for f in getattr(self, callbacks_attribute):
                f(value)
        return property(getter, setter)

    def add_callback_properties(cls):
        for name in names:
            setattr(cls, name, create_callback_property(name)

        return cls

    return add_callback_properties 
```

然后将其用作：

```
@add_callback_properties('var_callbacks', 'var1', 'var2')
class A(object):
    # everything else 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:04:14.023

看看[Python 描述符协议](http://docs.python.org/2/howto/descriptor.html)。本质上，您可以定义一个类来处理属性的获取、设置和删除。因此，您可以定义一个描述符，在设置属性时运行您的回调。

描述符是常规类，可以参数化。因此，您可以实现一个描述符，该描述符将目标变量作为其构造函数。类似于以下内容：

```
class A(object):
    var = CallbackDescriptor('var')
    foo = CallbackDescriptor('foo') 
```

# c# - 单击按钮将对象保存到数据库

> ID：15613206
> 
> 赞同：0
> 
> 时间：2013-03-25T10:56:16.437
> 
> 标签：c#, asp.net

所以我有一个事件，当您单击一个按钮时，我想向我的数据库发送一个`int`、和。现在它将从我的网络表单中获取“公司”和“DayNumber”的输入。我想将 my的值作为 WeatherRain 的布尔值和日期的输入。您应该能够选择日期，而不仅仅是从“现在”开始。我不知道完成这项工作的最佳方法是什么，我确实有大约 100 个不同的字段可供用户输入。`string``datetime``bool``CheckBox01`

```
protected void btnTryck_Click(object sender, EventArgs e)
{
    Dagbok bok = DagbokFactory.CreateNew();

    bok.Company = String.Format(TextBox1.Text);
    bok.DayNumber = Convert.ToInt32(TextBox19.Text);
    bok.WeatherRain = false;
    bok.Date = DateTime.Now;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:05:08.500

为了从您`CheckBox01`使用它的[Checked](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkbox.checked.aspx)属性中获取布尔值。

```
bok.WeatherRain = CheckBox01.Checked; 
```

至于日期问题，我建议使用`DateTimePicker`控件让用户选择日期并使用[Value](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.value.aspx)属性获取其值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:08:39.170

为此使用 Checkbox 的选中属性，如下所示：

```
protected void btnTryck_Click(object sender, EventArgs e)
{
    Dagbok bok = DagbokFactory.CreateNew();

    bok.Company = String.Format(TextBox1.Text);
    bok.DayNumber = Convert.ToInt32(TextBox19.Text);
    bok.WeatherRain = CheckBox01.Checked;
    bok.Date = DateTime.Now;
} 
```

# javascript - 有没有办法使用角度路由自动滚动到 ng-repeat 中的数据

> ID：15613207
> 
> 赞同：1
> 
> 时间：2013-03-25T10:56:16.813
> 
> 标签：javascript, angularjs

我希望能够使用像锚标记这样的路线。

例如，假设我有一个包含产品列表的类别页面。

我希望将路线设置`....../category/shoes`到页面顶部，

并`....../category/shoes/air-max`滚动到在 ng-repeat 块中动态加载的同一页面上的鞋子。

本质上，页面应该模拟静态页面的行为，其中：

*   `/shoes.html`将转到页面顶部
*   `/shoes.html/#air-max`会去锚点

不同之处在于它是一个角度应用程序并且数据是动态加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:38:48.783

您可以在您的 ng-repeat 指令中使用[$index](http://docs.angularjs.org/api/ng.directive%3angRepeat)，以便每个项目作为唯一索引。

```
<ul ng-repeat="item in array">
  <li id="{{$index}}><li>
</ul> 
```

# java - 如何进行不区分大小写的字符串替换

> ID：15613209
> 
> 赞同：7
> 
> 时间：2013-03-25T10:56:22.557
> 
> 标签：java, android, android-emulator

嗨朋友我正在创建一个应用程序。
我想在 an 中找到一个特定的词，`ArrayList`我必须
用另一个词替换它。我使用了下面的代码。它区分大小写，
但我想让它不区分大小写。

```
 FillintheBlank.class: 

          public class FillintheBlank extends Activity {
        static ArrayList<String> multiword=new ArrayList<String>();

 static ArrayList<String> multimeaning=new ArrayList<String>();

public void setNoTitle() {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
} 
 float screenHeight,screenWidth,screendensity;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setNoTitle();
     getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
     DisplayMetrics displaymetrics = new DisplayMetrics();
     getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
     screenHeight = displaymetrics.heightPixels;
     screenWidth = displaymetrics.widthPixels;
     screendensity = displaymetrics.densityDpi;
    setContentView(R.layout.fillinblanknew);

             multiword.add("radha");
             multiword.add("RAdHA");
              multiword.add("latha");
                multiword.add("mammu");

              s.o.p(""+multiword);
            // output:radha,RADHA,latha,mamu

          multimeaning.add(multiword.getString().replace(radha,"sai"));
        s.o.p(""+multimeaning);
     // output: sai,RADHA,latha,mamu

 }
  } 
```

例如：无论“radha”中的字母是什么大小写，我都需要将“radha”替换为“sai”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T11:03:22.580

可以使用正则表达式。只需在字符串之前添加 (?i) 即可忽略大小写。

例如：

> multiword.getString().replaceAll ("(?i)radha", "sai");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-10T22:17:04.027

您可以在字符串前面使用 "(?i)" 模式来忽略大小写。

```
public class StringReplace {

    public static void main(String[] args) {
        System.out.println(replaceString("This is a FISH", "IS"));
    }

    public static String replaceString(String first, String second) {
          return first.replaceAll("(?i)"+ second, "");
    }
} 
```

上面的代码将返回“Th a FH”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-18T07:31:20.637

使用**apache commons lang3 - v3.5 或更高版本**的 StringUtils （因此您不必担心正则表达式解析）：

```
StringUtils.replaceIgnoreCase(text, searchString, replacement); 
```

或者：

```
StringUtils.replaceOnceIgnoreCase(text, searchString, replacement); 
```

如果您使用 maven，请添加此依赖项（我使用的是 3.6 版）：

```
<!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 -->
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.6</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-25T11:00:38.960

您可以使用`equalsIgnoreCase(string)`String 类中的方法来实现您的目的。

# actionscript-3 - 在 as3 中播放来自 bytearray 的声音

> ID：15613216
> 
> 赞同：0
> 
> 时间：2013-03-25T10:56:50.370
> 
> 标签：actionscript-3, apache-flex, audio

我正在使用麦克风类录制声音。完成记录后，我得到一个字节数组。

现在我想使用这个字节数组来播放声音。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:12:17.927

[请参阅本手册](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html)

简而言之，让麦克风生成 44.1 kHz 样本（单声道），在您自己的样本数据过程中复制它们，并将它们存储在您的`Sound`对象中。44kHz 是强制性的，因为它总是以 44.1kHz 的声音播放。重采样是将单声道声音变成立体声，因为在 Flash 中不能有单声道声音。

# magento - 为什么 magento 使用其他产品的 url 密钥进行 url 重写

> ID：15613222
> 
> 赞同：1
> 
> 时间：2013-03-25T10:57:23.620
> 
> 标签：magento, url-rewriting, magento-1.7

我正在使用`magento 1.7`. 我面临着奇怪的问题。`magento`使用错误的 url 密钥制作带有随机数的重复产品 url 请附上我的截图

我也清空表格`rewrite_urls`并重新索引网址，但我仍然得到错误的网址。请帮我解决这个问题。如果您无法查看有问题的图片，请点击[管理面板中的](https://www.diigo.com/item/image/3se7l/hdve?size=o)[重复产品网址](https://www.diigo.com/item/image/3se7l/qu5h)和产品链接

![重复的产品网址](../Images/8890d9ff6521c1a45b09ffde83c5d7d3.png),![实际产品](../Images/e7cd289866e2192ca19475ac2bfb6056.png)

让我用例子来理解你

就像我有一个名为“example”的产品，并且 url 键是“example”，Url 将是

```
www.example.com/example 
```

现在我创建了新产品“xyz 和 url 键是”xyz“和 url 应该是

```
www.example.com/xyz 
```

但magento生成网址

```
www.example.com/example-123 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:01:50.323

这似乎是 1.7 中的一个错误。如果您有多个具有与可配置产品相​​同的 url 键的简单产品（例如，所有名称都相同），那么 magento 总是在每个索引进程上创建一个新的 url 重写。例子：

第一个索引：

*   myproducturl（配置产品）
*   myproducturl-id（附加了 id 的简单产品，到目前为止一切顺利）

第二个指标：

*   myproducturl（配置产品）
*   myproducturl-randomnumber（带有随机数的简单产品，不好）
*   myproducturl-id --> myproducturl-randomnumber (重写到新的 url)

并且在每个新的索引过程中都会重复最后一步，因此总是会生成一个新的随机 url 键。如果 magento 会检查，带有该产品 id 的 url 键已经存在，这应该没问题。

几个月后，您将拥有一个非常大的 url_rewrite 表，因为不会删除任何内容，并且在每次运行时，将为每个具有相同 url 键的产品创建至少 1 条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T19:38:43.897

通过截断表“core_url_rewrites”（我确保先复制）然后重新索引它，我能够消除 URL 末尾的额外数字。

# makefile - 使用目录作为模式删除中间文件？

> ID：15613229
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:02.577
> 
> 标签：makefile

我有以下 Makefile：

```
cells.csv: 
        echo cellA >  cells.csv
        echo cellB >> cells.csv
        echo cellC >> cells.csv
        echo cellD >> cells.csv
        mkdir -p cellA
        mkdir -p cellB
        mkdir -p cellC
        mkdir -p cellD

%/cell_gen: cells.csv
        echo '$@ generated' >  $@

%/cell_gds: %/cell_gen
        cat   $(@D)/cell_gen  >  $@
        echo  $@_GDS          >> $@ 
```

这个想法是分两步生成“单元格”（称为 [cell]_gen 和 [cell]_gds），而单元格列表在 make 开始时是未知的。
在这里：目标“cells.csv”是人类可读的（只是回声），但在一般情况下，我期望一些复杂的东西，它本身就是前面步骤的结果......等等......：不可读。

'cell' 的每一步都应该存储在名为 [cell] 的目录中。

我不明白为什么在这种情况下，如果我要求“制作 cellA/cell_gds”，那么看起来这些步骤都已执行：我得到了 csv 文件，然后得到了 cellA/cell_gds。
...但我无法解释为什么我没有得到 cellA/cell_gen ？
...尽管我可以在 make 执行期间看到“echo 'cellA/cell_gen generated' > cellA/cell_gen”，
我真的在 cellA/cell_gds 中得到了“cellA/cell_gen generated”
有人知道为什么没有文件 cellA/cell_gen 吗？
谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:09:32.577

该文件`cellA/cell_gen`是一个[中间文件](http://www.gnu.org/software/make/manual/make.html#Chained-Rules)；你没有明确要求它，Make推断它作为模式规则链的一部分是必要的。因此，默认情况下，一旦“真实”目标`cellA/cell_gds`完成，Make 将删除它。

为了防止这种情况，只需添加该行

```
.PRECIOUS: %/cell_gen 
```

# android - Androidplot : '\n' 不能在 Titlewidget 中解释

> ID：15613231
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:07.417
> 
> 标签：android, androidplot

我正在使用[AndroidPlot](http://androidplot.com/)绘制图表。

我想在标题小部件中显示 X 和 Y 比例并在右上角显示位置。我已定位但无法解释 setTitle() 字符串参数中的新行。它改为显示 ASCII 字符。有没有其他方法来定义绘图图的比例。

我试过这个：

```
Paint dPaint = new Paint();
dPaint.setColor(Color.BLACK);
mySimpleXYPlot.getTitleWidget().setPadding(0, 0, 0, 0);
mySimpleXYPlot.getTitleWidget().setBackgroundPaint(bgPaint);
mySimpleXYPlot.getTitleWidget().setLabelPaint(txtPaint);
mySimpleXYPlot.getTitleWidget().setSize(new SizeMetrics(50, SizeLayoutType.ABSOLUTE, 120, SizeLayoutType.ABSOLUTE));
mySimpleXYPlot.position(mySimpleXYPlot.getTitleWidget(), 80, XLayoutStyle.ABSOLUTE_FROM_RIGHT, 15, YLayoutStyle.ABSOLUTE_FROM_TOP, AnchorPosition.RIGHT_TOP);
mySimpleXYPlot.setTitle("X axis: 5mm= 0.2 sec\n Y axis: 5mm= 0.5 mV "); 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:32:30.320

这不是一个解决方案，只是一个替代方案。

我管理的标题没有“换行符”，即带有以下语句的单行并定位到图形的右上角。

```
mySimpleXYPlot.setClippingEnabled(false); 
```

即使您的文本超出了标题小部件的大小，这也会使您的完整文本可见。

# visual-studio-lightswitch - LightSwitch 屏幕数据更改事件

> ID：15613233
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:11.687
> 
> 标签：visual-studio-lightswitch

我正在测试一个 HTML 客户端项目，我有一个主屏幕来列出所有项目，现在我正在尝试添加一个标签来显示使用数据项本地属性的项目总数，它第一次工作，但是如果我添加或删除项目，它不会刷新计数，我找不到任何屏幕事件或查询事件来处理这个问题。下面是我当前的代码，它只在第一次工作：

```
myapp.Main.created = function (screen) {
// Write code here.

myapp.activeDataWorkspace.ApplicationData.OrdersForUser().execute().then(function (results) {
    var TotalCountOfOrders = CountOrders(results);
    screen.TotalOrdersForCurrentUser = TotalCountOfOrders.toString();
}); 
```

};

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T00:29:47.710

```
myapp.BrowseCustomersByCountry.created = function (screen) {
    screen.Customers.addChangeListener("state", function () {
        if (screen.Customers.state === msls.VisualCollection.State.idle) {
            screen.CustomersCount = screen.Customers.data.length;
        }
    });
}; 
```

# c# - 动态属性上的动态 linq

> ID：15613234
> 
> 赞同：2
> 
> 时间：2013-03-25T10:58:12.637
> 
> 标签：c#, linq, dynamic

谁能帮我这个：

我收集了具有动态（ExpandoObject）属性的 poco 对象，该属性需要成为动态 linq 中字符串条件的一部分

前任。

```
public class Test
{
   public int Id {get;set;}
   dynamic DynamicProperty {get;set;}
} 
```

动态属性 ( `ExpandoObject`) 有一个属性 (`Id`和`Name`)

我如何使用动态 Linq 过滤测试对象的集合，（应该如何看起来像字符串 where 条件？）：

```
IList<Test> testList;

testList.AsQueryable()
        .Where("DynamicProperty.Id == 2 or DynamicProperty.Name == "test"") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:26:47.463

thanx 伙计们，但我的 where 条件必须是一个字符串，它将在动态 where 子句中使用，就像我发布的示例一样。复杂属性 (DynamicProperty) 是未知类型，必须像示例中一样在过滤器中使用。我使用了 ExpandoObject 但上面的语法有问题`(.Where("DynamicProperty.Id == 2 or DynamicProperty.Name == "test""))`。因为字符串结构必须是这样的 `.Where("DynamicProperty["Id"] == 2 or DynamicProperty["Name"] == "test""))`，并且因为 Expando 具有`IDictionary<string, object>`结构，所以所有值都必须是显式转换，最终过滤器是：`.Where(Convert.ToInt32("DynamicProperty["Id"]) == 2 or DynamicProperty["Name"].ToString() == "test""))`这是一个比第一个更复杂的过滤器。

如何解决问题，使字符串过滤器像上面的例子

```
"DynamicProperty.Id == 2 or DynamicProperty.Name == "test"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:32:00.157

[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)提供了一个小型可重用库，支持字符串谓词（和查询语言）来构建动态 LINQ 语句。

[下载链接](http://www.scottgu.com/blogposts/dynquery/dynamiclinqcsharp.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:57:35.650

在同一个 IQueryable 上链接 Wheres 以构建完整的表达式树，然后可以使用 ToList 来实现：

```
IList<string> testList = new List<string>() {"One", "Two", "Three", "Four", "Five"};

var filteredList = testList.AsQueryable().Where((s) => s.Length <= 4);
filteredList = filteredList.Where((s) => s[0].Equals('F'));

var results = filteredList.ToList(); 
```

# c# - 如果行中有char值，如何对行求和

> ID：15613235
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:12.977
> 
> 标签：c#, asp.net, mysql, sql, sql-server

我有一个像这样的考勤表

```
user_name     |   Col  |   col2   |   Col3  |  Col4 + other columns.

person1       |  a     |  3       | 76      | 56  etc.    ---------> sum of row

person2       |  6     |  72      | a       | 13  etc.    ---------> sum of row 
```

其中'a'表示不存在，所以我需要添加一行中的所有列并显示在最后一列中，即在'total'中，这样'a'应该被忽略并且应该添加一行中剩余列的总和并显示在最后一列的行中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:08:48.857

我建议你使用 NULL 而不是 'a' 但如果你使用 MySql 你可以使用这样的东西：

```
SELECT
  user_name, Col, col2, Col3, Col4, Col1+Col2+Col3+Col4
FROM
  yourtable
WHERE 'a' IN (Col, Col2, Col3, Col4) 
```

请[在此处](http://sqlfiddle.com/#!2/46229/2)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:20:54.350

**在mysql**中试试这个

 **```
 SELECT
      user_name, Col, col2, Col3, Col4, Col+Col2+Col3+Col4 as sum
     FROM
      yourtable 
```

这个在**sql server**

```
 SELECT
 user_name, Col, col2, Col3, Col4 ,
 case when col = 'a'
            then cast(col2 as int ) + cast(col3 as int ) +cast(col4 as int )
 when col2 = 'a'
            then cast(col as int ) + cast(col3 as int ) +cast(col4 as int )
 when col3 = 'a'
            then cast(col as int ) + cast(col2 as int ) +cast(col4 as int )
 when col4 = 'a'
            then cast(col as int ) + cast(col2 as int ) +cast(col3 as int )
else  cast(col as int )+ cast(col2 as int ) + cast(col3 as int ) +cast(col4 as int)     
 end    as sum_all

 FROM
  yourtable

 group by user_name , col , col2, col3,col4 
```

[**在这里演示**](http://sqlfiddle.com/#!3/5cc04/34)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:46:51.203

在 MSSQL 中这有效：

```
SELECT
  user_name, Col, col2, Col3, Col4, 
  CAST(REPLACE(Col, 'a', '0') AS INT)+
  CAST(REPLACE(Col2, 'a', '0') AS INT)+
  CAST(REPLACE(Col3, 'a', '0') AS INT)+
  CAST(REPLACE(Col4, 'a', '0') AS INT)
FROM
  yourtable 
```

请[在此处查看小提琴](http://sqlfiddle.com/#!3/46229/46/0)

除了 REPLACE，您还可以使用 CASE 语句。**

# node.js - 具有架构分离的运行器和渲染器的 Node 游戏库

> ID：15613238
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:16.870
> 
> 标签：node.js, socket.io, 2d-games

我正在用 Node.js 构建一个简单的游戏。我使用 socket.io 进行设备之间的通信。

我希望节点服务器处理所有游戏逻辑；碰撞检测，分数等。

然后节点（socket.io）服务器应该向客户端发送一些显示信息；玩家位置、得分、地图大小等。

客户端还应该能够向服务器发送导航命令，例如向上和向下。它可能还需要碰撞检测来避免你试图走出地图等，那时我们不需要发送导航数据。

我的问题是，有没有处理这种逻辑的库？我知道有一些用于 JS 的游戏库，但据我所知，它们用于处理逻辑和渲染，而不是在 Node 服务器上使用。

![我认为它如何工作](../Images/5f16fe683adfb72f53a048beb95816df.png)

我之前使用[Crafty](http://craftyjs.com/)进行渲染和逻辑。我在想我会和[Raphaël](http://raphaeljs.com/)一起画这个游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:02:06.750

你可以试试[GameClosure](http://www.gameclosure.com/)的 SDK吗？我的理解是它有很多这样的东西可用，虽然我自己没有使用过。

也就是说，只在服务器上做所有事情的想法有点奇怪。游戏的性能和响应能力将变得非常依赖于玩家与服务器的连接。在多人游戏服务器中已经实施了多年的其他方案，这是一种客户端计算，服务器确保客户端正确执行该计算。这一切都需要在服务器端完成吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T08:24:26.157

我找到[了 BonsaiJS](http://bonsaijs.org/)。
这是一个不错的 Ghapic 库，具有架构上分离的运行器和渲染器。

# android - 某些设备上的 Android ComponentInfo ClassNotFoundException

> ID：15613240
> 
> 赞同：0
> 
> 时间：2013-03-25T10:58:20.380
> 
> 标签：android

请帮助了解奇怪的应用程序行为。在生产中的几乎所有设备中一切正常，我正在使用 ACRA 收集崩溃报告。但这是我从 Alpha GTR 设备中得到的：

```
ComponentInfo{com.xxxxxxxxxxx /com.xxxxxxxxxxx.xxxxActivity}: java.lang.ClassNotFoundException: com.xxxxxxxxxxx.xxxxActivity
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2108)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2211)
at android.app.ActivityThread.access$600(ActivityThread.java:149)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1300)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:153)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:821)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
at dalvik.system.NativeStart.main(Native Method) 
Caused by: java.lang.ClassNotFoundException: com.xxxxxxxxxxx.xxxxActivity
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2099)
... 11 more   
java.lang.ClassNotFoundException: com.xxxxxxxxxxx.xxxxActivity
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2099)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2211)
at android.app.ActivityThread.access$600(ActivityThread.java:149)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1300)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:153)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:821)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
at dalvik.system.NativeStart.main(Native Method) 
```

所以应用程序无法以奇怪的异常启动。我已经检查了有关它的 SO 问题，只是将库添加为[无法实例化活动......由 ClassNotFoundException 引起的](https://stackoverflow.com/questions/6325826/unable-to-instantiate-activity-caused-by-classnotfoundexception)在这里没有帮助。可能是某些特定于设备的异常吗？我的应用程序使用相机、谷歌地图和 GPS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:02:53.667

也许您必须先检查设备是否支持 GPS 或相机？

```
LocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

# php - 基于 API 的 Web 应用程序坏的或未来的想法

> ID：15613253
> 
> 赞同：1
> 
> 时间：2013-03-25T10:59:18.390
> 
> 标签：php, api, web-applications

基于 api 的 webapp 是否比经典 webapp 更好。让我告诉你一个例子，假设我需要创建一个用户驱动和基于图像上传和共享的网站。

Will API 将有助于使其快速并使其更加灵活。

由于文件的 JSON 数据也必须由前端应用程序和其他工作来解析。这会使前端更慢或更笨重。

我知道可以使用 API 制作多平台应用程序，但我仍然缺乏一些知识，以及基于 API 工作的 WEBAPP 是什么以及如何工作。并且是基于 API 的 webapp 真的有必要还是未来的未来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:58:50.420

我个人更喜欢api。

如果您的 Web 应用程序使用 ajax 来保存数据，那么无论如何您都必须创建 api。

这是一个例子：用户填写表格并按保存，如果您使用ajax保存表格，您基本上需要实现一个api。所以最好提前考虑一下。

一旦你有了一个 json api，你也可以在其他应用程序和平台（比如 ios 或 android）中使用它。

# jsf - 如何在数据表过滤器中显示水印？

> ID：15613254
> 
> 赞同：2
> 
> 时间：2013-03-25T10:59:20.823
> 
> 标签：jsf, filter, primefaces

我有一个`<p:column>`带过滤器的。我想用水印显示它。这是我尝试过的：

```
<p:column id="carType" filterBy="#{car.carType}" >
    <h:outputText value="#{car.carType}" />
    <p:watermark forElement="carType"
                 value="Car Type"/>
</p:column> 
```

然而，这并没有出现。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:02:53.213

尝试这个

```
 <h:form id="parametersListForm">      

    <p:dataTable id="parameteresList" value="#{parameterController.lstParameter}"
                 var="parameters" styleClass="tnt-main-table"> 

    <p:column id="columnRefType" filterBy="#{parameters.beRefType}" >
        <h:outputText value="#{parameters.beRefType}" />
        <p:watermark forElement="parametersListForm:parameteresList:columnRefType:filter"
                     value="#{msgs['parameters.beRefType.label']}"/>  
        </p:column>
     </p:dataTable>              
</h:form> 
```

[也看到这个](https://stackoverflow.com/questions/14522576/how-to-show-water-mark-in-filter-in-primefaces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T12:16:45.287

我遇到了同样的问题，在阅读了关于`p:watermark`我决定我不喜欢给出过滤器的完整路径之后。我在`p:dataTable`定义下添加了以下代码段：

```
<script type="text/javascript">
    $('input.ui-column-filter').attr('placeholder','#{msgs['filter_placeholder']}"');
</script> 
```

当然，它会丰富 ALL 表中的 ALL 列过滤器，但是您始终可以将数据表 id 附加到查询...

# c# - Asp.net 自定义服务器控件：何时以及如何检索隐藏字段的值以提供属性？

> ID：15613256
> 
> 赞同：1
> 
> 时间：2013-03-25T10:59:26.250
> 
> 标签：c#, asp.net

我正在尝试开发一个自定义 ASP.Net 服务器控件，它可以在客户端进行操作。要在回发后保存更改，有一个隐藏字段。在 OnLoad 事件中，我检索了写入属性的值，但似乎为时已晚，因为控件已经构建。我知道我可以操纵 PreRender 事件上的控件，但对我来说似乎有更好的方法来处理这个问题。任何人的想法？

```
public class Control : CompositeControl {

  private bool mProperty;
  private HiddenField hiddenField;

  public virtual bool Property {
    get {
      return mProperty;
    }
    set {
      mProperty = value;
    }
  }
  protected override void CreateChildControls() {
    Controls.Clear();
    CreateControlHierarchy();
    ClearChildViewState();
  }
  protected virtual void CreateControlHierarchy() {
    CreateHiddenField();
    CreateContent();
  }

  protected virtual void CreateHiddenField() {
    hiddenField = new HiddenField();
    hiddenField.ID = "hiddenField";
    hiddenField.Value = Property.ToString().ToLower();
    Controls.Add(hiddenField);
  }  
  protected virtual void CreateContent() {
    contentPanel = new Panel();
    contentPanel.ID = "content";
    contentPanel.Vsiible = Property;
    Controls.Add(contentPanel);
  }
  protected override void OnLoad(EventArgs e) {
    base.OnLoad(e);
    if(Page.IsPostback) {
      Property = Convert.ToBoolean(Page.Request.Form[hiddenField.UniqueId]);
    }
  }
} 
```

**编辑可能的解决方案：**

我摆脱了 OnLoad 事件并像这样编辑了属性：

```
public virtual bool Property { 
  get { 
    if (Page.IsPostBack) {
      EnsureChildControls();
      return Convert.ToBoolean(Page.Request.Form[hiddenField.UniqueID]);
    }
    return mProperty; 
  }
  set { 
    mProperty = value;
  }
} 
```

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:20:34.030

通过为隐藏字段实现 ValueChanged EventHandler 并编辑属性的设置器以处理所有依赖项，我实现了我想做的事情。

```
public class Control : CompositeControl {

  private bool mProperty;
  private HiddenField hiddenField;

  public virtual bool Property {
    get {
      return mProperty;
    }
    set {
      mProperty = value;
      if (contentPanel != null) contentPanel.Visible = value;
      if (hiddenField != null && hiddenField.Value != value.ToString().ToLower()) hiddenField.Value = value.ToString().ToLower();
    }
  }
  protected override void CreateChildControls() {
    Controls.Clear();
    CreateControlHierarchy();
    ClearChildViewState();
  }
  protected virtual void CreateControlHierarchy() {
    CreateHiddenField();
    CreateContent();
  }

  protected virtual void CreateHiddenField() {
    hiddenField = new HiddenField();
    hiddenField.ID = "hiddenField";
    hiddenField.Value = Property.ToString().ToLower();
    hiddenField.ValueChanged += hiddenField_ValueChanged;
    Controls.Add(hiddenField);
  }  
  protected virtual void CreateContent() {
    contentPanel = new Panel();
    contentPanel.ID = "content";
    contentPanel.Vsiible = Property;
    Controls.Add(contentPanel);
  }
  void hiddenField_ValueChanged(object sender, EventArgs e) {
    Property = Convert.ToBoolean(hiddenField.Value);
  }
  protected override void OnInit(EventArgs e) {
    EnsureChildControls();
    base.OnInit(e);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:16:35.003

一种建议是在属性和控件上都设置回发值，因为该属性仅在创建控件时使用。

```
 protected override void OnLoad(EventArgs e) {
    base.OnLoad(e);
    if(Page.IsPostback) {
      if(hiddenField != null)
         hiddenField.Value = Page.Request.Form[hiddenField.UniqueId].ToString();

      Property = Convert.ToBoolean(Page.Request.Form[hiddenField.UniqueId].ToString());    
    }
  } 
```

# javascript - Ext.AbstractManager.register(): 向这个管理器注册重复的 id "btnLogout"

> ID：15613258
> 
> 赞同：1
> 
> 时间：2013-03-25T10:59:33.113
> 
> 标签：javascript, extjs, extjs4.1, extjs-mvc

我做了一个常见的视图，所有页面都需要这个视图。因此，无论我需要什么，我都将这种视图称为 xtype 。在这个通用视图中有一些由 id 值定义的组件。

根据要求取决于页面，我需要从常见视图中隐藏一些按钮再次需要显示。这些活动将取决于页面。虽然第一个启动时间屏幕会出现。一旦我导航到另一个页面，它将显示 **Ext.AbstractManager.register(): Registering duplicate id "btnLogout" with this manager 之**类的错误。

如果我将组件 id 值更改为名称值或 itemId 值。然后它会很好地导航，但问题是无法隐藏和显示按钮，因为显示未定义的 sysntax 是 var a = Ext.getCmp('btnBackID'); console.log(a);，它将是未定义的。一旦组件作为对象返回，我就可以隐藏显示功能。

谁能告诉我如何解决这个问题，否则给我替代方法来实现。非常感谢。谢谢你。我在下面给出了我的代码

**共同观点**

```
Ext.define('abc.view.GlobalNavigationView', {
    extend:'Ext.panel.Panel',
    alias:'widget.globalNavigationView',
    id:'globalNavigationId',
     layout: {
         type: 'vbox',
         align:'stretch'
     },
    items:
        [
            {
                xtype: 'toolbar',
                layout: 'hbox',
                flex: 1,
                items:
                    [
                        {
                            xtype: 'button',
                            flex: .1,
                            text: 'Back',
                            id: 'btnBackID',                    
                        },                        

                        {
                            xtype: 'button',
                            flex:.1,
                            id: 'btnSave',
                            cls: 'saveCls'
                        },
                        {
                            xtype: 'button',
                            flex:.1,
                            id: 'btnEmail',
                            text: 'Email'
                        },
                        {
                            xtype: 'button',
                            flex:.1,
                            id: 'btnPrint',
                            text: 'Print'
                        },
                        {
                            xtype: 'button',
                            flex:.1,
                            itemId: 'btnFilter',
                            text: 'Filter'
                        },
                        {
                            xtype: 'button',
                            flex:.1,
                            id: 'btnLogout',
                            cls: 'logoutCls'
                        }
                    ]
            }

        ]
}); 
```

**主页查看1**

```
Ext.define('GulfMark.view.WeeklyHomeView1', {
     extend:'Ext.panel.Panel',
     alias:'widget.weeklyfcastView',
     id:'weeklyfcastId',
        layout: 'fit',
        items:
        [
           {
                xtype: 'globalNavigationView',
                id: 'globalNavigationWeekly1',
                flex: 1,
                docked:"top",
                scrollable:false
            },
            {
                my componets of this view
                .........................
            }

        ]
}); 
```

**主页查看2**

```
Ext.define('GulfMark.view.WeeklyHomeView1', {
     extend:'Ext.panel.Panel',
     alias:'widget.weeklyfcastView',
     id:'weeklyfcastId',
        layout: 'fit',
        items:
        [
           {
                xtype: 'globalNavigationView',
                id: 'globalNavigationWeekly2',
                flex: 1,
                docked:"top",
                scrollable:false
            },
            {
               my componets of this view
                -----------------------
            }

        ]
}); 
```

**控制器代码：**

```
 init:function(){

        this.control({
            'globalNavigationView ':{
                click:this.onbtnBackClick,
                render: this.onbtnBackrender,
            },            
            'weeklyfcastView':{
                show:this.onShowweeklyfcastView,
                render:this.onRenderweeklyfcastView
            }
        });
    },

   onShowweeklyfcastView: function(){       

        var btnFilter = Ext.getCmp('btnFilter');
        console.log(btnFilter); // if i used components id to name or itemId, here will show undefined
        btnFilter.setHidden(true);  
        //btnFilter .hide();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T23:34:59.417

如果您的视图不是单例，则不能为其组件提供 ID - ID 必须是唯一的，否则您会收到`duplicate id`错误消息。

您真正需要的是对您尝试显示/隐藏按钮的视图的一些参考。当你有那个参考时，你可以使用[down](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-method-down)方法来找到你的按钮。例如：

```
var iPanel = // Create new panel here.
iPanel.down('button[text="Email"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T21:46:37.020

此代码在 EXTJS 6 中适用于同一视图中的**多个按钮，具有相同的****itemId**（不是 id - ids 将引发错误，如上所述）

看法：

```
 {
                xtype : 'button',
                text : 'Save and Come Back Button 1',
                itemId : 'saveAndComeBackButton',
                handler : 'saveAndComeBack'
            },
            {
                xtype : 'button',
                text : 'Save and Come Back Button 2',
                itemId : 'saveAndComeBackButton',
                handler : 'saveAndComeBack'
            }, 
```

控制器：

```
this.__setButtons('#saveAndComeBackButton','disable');

__setButtons: function (buttonItemId,state) {

    Ext.Array.forEach(
        Ext.ComponentQuery.query(buttonItemId),
        function (button){
            if (state === 'enable'){
                button.enable();
            }else{
                button.disable();
            }
        }
    );

} 
```

# c# - 在任何框架中运行 NET 2.0 应用程序

> ID：15613260
> 
> 赞同：3
> 
> 时间：2013-03-25T10:59:37.880
> 
> 标签：c#, .net

假设我希望我的 NET 2.0 exe 同时运行：

*   仅安装了 NET 2.0 的 XP
*   仅安装了 NET 4.0 的 XP（或未启用 NET 2.0 的 Windows 8）

一种解决方案是创建一个 MyProgram.exe.config 文件，我写这个实体

```
<supportedRuntime version="v4.0.30319"/>
<supportedRuntime version="v2.0.50727"/> 
```

是否可以在 exe 中嵌入这些条目（或 MyProgram.exe.config）？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:07:24.110

A`.NET .exe`被称为`assembly`. 除了程序数据之外，它还包含有关您的程序的元信息，因此`CLR`可以使用它，因此您可以执行诸如`reflection`.
你可以在程序集中提供信息，但恐怕你不能那么容易地做你想做的事。您需要`.exe`检查已安装的版本`.NET`并最终对其做出反应。

此外，您一定不要忘记，在创建程序集时，您指定`.NET`-targetframework，即 .NET 3.5、.NET 4.0 等。因此，.NET 2.0 的程序集无论如何都将在 .NET 4.0 上运行，因为向下 -兼容性。

请参阅[此处](http://msdn.microsoft.com/en-us/library/hk5f40ct%28v=vs.90%29.aspx)了解`assemblies`它们的使用方式和使用方式，以及查看[-class](http://msdn.microsoft.com/en-us/library/system.reflection.assembly%28v=vs.90%29.aspx)`System.Reflection.Assembly`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:29:06.433

使用哪个运行时的决定是在您自己的代码加载之前完成的。这意味着您无法将`supportedRuntime`元素有意义地嵌入到您自己的代码中。

但是，您通常不必这样做。假设您可以将*所有*项目（包括您需要引用的所有第三方项目）设置为足够低的目标框架，它们也将在任何更高的框架上执行。最好与您在构建时使用的相同。

如果您使用混合模式程序集 (C++/CLI)，可能会出现一些潜在问题之一。请参阅[这篇文章](https://stackoverflow.com/questions/3750253/set-net-4-uselegacyv2runtimeactivationpolicy-during-runtime)，了解如何在不需要`.exe.config`文件的情况下处理它，假设您的可执行文件不是混合模式程序集，但它使用的一些 DLL 是。

# list - 在 sharepoint 2010 中自定义公告列表

> ID：15613263
> 
> 赞同：0
> 
> 时间：2013-03-25T10:59:47.707
> 
> 标签：list, sharepoint, sharepoint-2010, shared-libraries, web-parts

我正在尝试将自定义公告列表添加到此列表中我的 SharePoint 网站的主页中，列表上将有 7 列，但我现在面临的挑战是如何仅显示 7 列中的 3 列只有当用户单击添加新公告或单击列表本身时，才会显示站点和其他列。请任何人都可以给我一个如何实现这一目标的想法。

例如：假设我自定义了一个公告列表以包含列：管理、运营、资产、财务、人力资源、QHSE 和技术，并通过 Web 部件将其添加到我的 SharePoint 页面上，我怎样才能使其仅显示 7 列中的 3 列像管理，运营，资产，而其他列只有在用户点击添加新公告或直接进入列表本身时才会看到。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:43:42.693

当您创建 SharePoint 列表的新视图时，它实质上会创建一个新的 .aspx 页面，其中包含根据您的定义自定义的视图。这可以从 SharePoint 列表的 Web 界面轻松地为标准视图完成。这是 Le_Freddo 的建议，应该适用于创建自定义视图，但不适用于创建自定义编辑页面。

为此，我相信您需要使用 SharePoint Designer。在 SharePoint Designer 中打开该网站，然后在“FolderList”中的“列表”下找到您正在处理的列表。您将看到 4 个页面，AllItems、DispForm、EditForm 和 NewForm。制作 EditForm 的副本（在修改之前），然后打开 EditForm 以对其进行更改。您可以在页面中添加或删除字段。通过这种方式，您可以自定义编辑表单以显示所有字段或仅显示子集。

您还可以使用此方法自定义其他视图（删除您不希望用户看到的列）。

完成后，您可以通过设置列表的属性（右键单击文件夹中的列表查看，选择属性，然后“支持文件”选项卡将包含指向为这些操作配置的页面的链接）。

祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:59:24.280

要仅显示 3 列，请创建一个视图并在 Web 部件选项中进行设置。

# solr - 是否可以在 solr 中进行这种查询

> ID：15613265
> 
> 赞同：0
> 
> 时间：2013-03-25T11:00:03.800
> 
> 标签：solr

我在 solr 中有一个列 - 类型字符串，其值类似于“JOHN JACKON”、“JAKE SMITH”、“JOHNATAN JAMESON”

是否有可能告诉 solr 当我输入 J 时首先获得这些 J 次比另一个多的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:39:24.990

您可以使用 solr.EdgeNGramFilterFactory。您可以将 minGramSize 设置为 1。

此 FilterFactory 在查询期间匹配索引中特定术语的前缀子字符串（或后缀子字符串，如果 side="back"）非常有用。

参考：[http ://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)

所以对于你上面的例子，

对于 JOHN JACKSON，它将存储：

J，乔，约翰，约翰，J，JA，江淮，杰克，杰克，杰克逊

对于杰克史密斯：

j, JA, JAK, 杰克, S, SM, SMI, SMIT, 史密斯

现在当有人搜索 J 时，第一个文档（john jackson）将获得更高的分数，因为 J 在索引中是两倍。

# c# - 如何在 C# 中扩展静态类

> ID：15613272
> 
> 赞同：1
> 
> 时间：2013-03-25T11:00:15.787
> 
> 标签：c#, unit-testing, inheritance, static

我正在使用 Microsoft 的 Visual Studio 单元测试框架（该项目因此我必须这样做）。我非常想念一些更高级的断言，比如`AreElementsEqual`你在`MBUnit`.

我想做它们。

由于该类是静态的，因此我不能从它继承（创建一个`SuperAssert`），也不能添加扩展方法（因为它们是静态方法）。

我不想简单地创建另一个类并期望消费者使用这两个不同的类。我怎样才能扩大班级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:01:36.590

你不能。您将不得不创建一个新的。

或者你可以创建一个现有的包，比如[Fluent Assertions](http://nuget.org/packages/FluentAssertions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:07:34.683

由于该类是静态的，因此您不能像您说的那样使用扩展方法向该类“添加”更多方法。

您可以在合理范围内做的最接近的事情如下：

```
public static class AssertExtensions
{
    public static void SuperAssert(bool expression)
    {
        // etc...
    }
} 
```

如果您正在制作一个工具库，要求用户使用另一个类应该不是问题。

如果您仍然担心，为什么不为您的测试创建一个基类并让用户使用其中的方法进行断言？

例如：

```
public class TestBase
{
    protected void AreEqual(object obj1, object obj2)
    {
        Assert.AreEqual(obj1, obj2); // etc...
    }

    protected void SuperAssert(bool expression)
    {
        // etc...
    }
} 
```

# wordpress - WordPress 完整帖子显示

> ID：15613276
> 
> 赞同：0
> 
> 时间：2013-03-25T11:00:39.360
> 
> 标签：wordpress

当我在 wordpress 上发布内容时，它会显示完整的帖子。我想隐藏完整的帖子并显示一些行。因此，用户单击阅读更多链接，将显示完整的帖子。请任何想法或插件。

我的网站： http: [//mlmpublicnews.com/](http://mlmpublicnews.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:07:04.327

安装[自动阅读更多生成器](http://wordpress.org/extend/plugins/auto-read-more-generator/)。它将隐藏第一张图片或第一段之后的所有内容，直到点击链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:06:27.513

使用 the_excerpt() 而不是 the_content()

```
<?php
    if ( have_posts() ) while ( have_posts() ) : the_post();
         the_excerpt();
     endwhile;
?> 
```

[阅读更多](http://codex.wordpress.org/Function_Reference/the_excerpt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:08:49.527

请通过一些示例查看这些内容。可以派上用场。。

[http://codex.wordpress.org/Customizing_the_Read_More](http://codex.wordpress.org/Customizing_the_Read_More)

[http://www.wikihow.com/Add-Read-More-to-Wordpress](http://www.wikihow.com/Add-Read-More-to-Wordpress)

希望能帮助到你..

# c# - 日期时间格式异常

> ID：15613287
> 
> 赞同：0
> 
> 时间：2013-03-25T11:01:12.953
> 
> 标签：c#

我正在尝试转换

```
string date = "31.03.2013" 
```

到一个`DateTime`。这是我的代码：

```
Convert.ToDateTime(date,CultureInfo.InvariantCulture); 
```

我收到格式异常。

根据[http://msdn.microsoft.com/en-us/library/vstudio/cc165448.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc165448.aspx)它应该可以工作。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:02:51.450

不变区域性基于`en-US`，其中`.`不是日期分隔符。

您需要使用正确的区域性，例如`fr-FR`，它确实`.`用作日期分隔符。

您还可以使用`DateTime.ParseExact`或`DateTime.TryParseExact`使用确切的格式字符串。

```
Convert.ToDateTime("31.03.2013", CultureInfo.GetCultureInfo("fr-FR")) 
```

或者

```
DateTime.ParseExact("31.03.2013",
                    "dd.MM.yyyy",
                    CultureInfo.InvariantCulture) 
```

将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:05:12.860

怎么样

```
DateTime.ParseExact(date,"dd.MM.yyyy",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:05:25.210

您可以尝试使用 DateTime.ParseExact 方法。它应该为您解决问题。

```
DateTime.ParseExact("31.03.2013", "dd.MM.yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:07:00.703

使用此代码 -

```
DateTime.ParseExact(date, "dd.MM.yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:11:17.207

[你可以用DateTime.TryParseExact](http://msdn.microsoft.com/en-IN/library/system.datetime.tryparseexact.aspx)试试这个：

```
string date = "31.03.2013";
DateTime dateConverted;
DateTime.TryParseExact(date, new string[] { "dd.MM.yyyy" }, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out dateConverted);
Console.WriteLine(dateConverted); 
```

# c# - 将条件应用于从 SQL Server 表中读取的可编辑列

> ID：15613289
> 
> 赞同：1
> 
> 时间：2013-03-25T11:01:14.667
> 
> 标签：c#, sql, sql-server

我的目标是为最终用户提供一个可编辑的表格，但编辑将仅限于几个不同的值，一个下拉列表。

目前，我有这段代码几乎可以满足我的要求，但会创建一个新列，而不是将标准应用于现有列。

```
var data = new List<ValueHolder>();
            data.Add(new ValueHolder("EMPTY"));
            data.Add(new ValueHolder("FULL"));
            ////..................

            var column = new DataGridViewComboBoxColumn();
            column.DataSource = data;
            column.ValueMember = "Name";
            column.DisplayMember = "Name";

            dataGridView1.Columns.Add(column); 
```

我试图申请一个我已经在阅读的现有专栏，但我无法获得正确的语法，也无法通过网络搜索将其打开。任何指针都会很棒。

**编辑**

让自己更清楚；

我有一个 C# 表 - 从 sql server 表生成。

我希望数据可以通过下拉菜单进行编辑，例如

```
var data = new List<ValueHolder>();
        data.Add(new ValueHolder("EMPTY"));
        data.Add(new ValueHolder("FULL")); 
```

如何将此列表条件应用于表中的列？

# php - 在评论中添加表情符号但不起作用

> ID：15613291
> 
> 赞同：0
> 
> 时间：2013-03-25T11:01:17.723
> 
> 标签：php

我一直在尝试在评论中添加表情符号，但它不起作用，我不知道为什么。

```
Parse error: syntax error, unexpected T_STRING in /home/content/---------------------------/cdn/postdisplay.php on line 1 
```

我包含并加载以显示评论的完整 php。

```
<?php
function smiliess($text) {
        $smilies = array(
            '>:('        =>  '<img src="image/icon/angry.png" alt="angry" class="icon_smile1" />',
            '(angry)'    =>  '<img src="image/icon/angry.png" alt="angry" class="icon_smile2" />',
            '(Angry)'    =>  '<img src="image/icon/angry.png" alt="angry" class="icon_smile3" />',
            '(ANGRY)'    =>  '<img src="image/icon/angry.png" alt="angry" class="icon_smile4" />',
            'B|'         =>  '<img src="image/icon/cool.png" alt="cool" class="icon_smile5" />',
            '(cool)'     =>  '<img src="image/icon/cool.png" alt="cool" class="icon_smile6" />',
            '(Cool)'     =>  '<img src="image/icon/cool.png" alt="cool" class="icon_smile7" />',
            '(COOL)'     =>  '<img src="image/icon/cool.png" alt="cool" class="icon_smile8" />',    
            // more smiley
        );  
    foreach ($smilies as $search => $replace)
        $text = preg_replace("#(?<=\s|^)" . preg_quote($search) . "#", $replace, $text);
    return $text;
}
$CheckQuery = mysql_query("SELECT * FROM t_comment WHERE got='$user->id' ORDER BY `id` DESC LIMIT 0 , 20");
while($row = mysql_fetch_assoc($CheckQuery))
{
    $toolsp = new UserTools();
    $post = $toolsp->get($row['send_id']);  
    $yourText = $row['content'];
    $yourdisplay = smiliess( $yourText );
    echo '<div class="mycomment">
        <div id="postpic">
            <img id="profile_pic" width="50px" height="150px" src="' . $post->image . '" class="" />
        </div>
        <div class="mycommentpost">                     
            <a class="postername" href="profile.php?userID=' . $post->id . '">' . $post->fname . ' ' . $post->lname . ': </a><br />
            ' . $yourdisplay . '
        </div>
    </div>';
}
?> 
```

当我从 php 中删除表情符号代码时，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:04:40.217

您`$smilies`在声明数组时调用了数组，但在 foreach 循环中将其调用为`$smiles`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:04:48.993

你在`;`这里删除它

```
while($row = mysql_fetch_assoc($CheckQuery));
                                            ^ 
```

并更改您的查询

```
$CheckQuery = mysql_query("SELECT * FROM t_comment WHERE got='" . $user->id . "' ORDER BY `id` DESC LIMIT 0 , 20"); 
```

# ajax - 春季延迟结果

> ID：15613296
> 
> 赞同：0
> 
> 时间：2013-03-25T11:01:28.003
> 
> 标签：ajax, eclipse, spring-mvc

我是spring的新手，想对网站实施长轮询，以便在所有客户都可以使用时立即显示管理消息，我在google上搜索了几个小时，只能发现deferredresult（spring 3.2）可以用来实现它。我的问题是我如何使用 deferredresult 实现长轮询，如果有人可以向我推荐这样的教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T23:01:59.693

另一种选择是使用 AsyncContext。这将使初始 GET 请求保持“打开”状态，并使您能够发送多条消息作为响应的一部分，这与 DeferredResult 不同，它只允许发送一条响应消息。这是一个[很好的链接](http://www.softwareengineeringsolutions.com/blogs/2010/08/13/asynchronous-servlets-in-servlet-spec-3-0/)，解释了如何！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:27:19.003

[直出马口](http://blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/)。

您有两个基本选项：选项 1 是 Callable ，其中 Callable 返回 String 视图名称（您也可以使用 @ResponseBody 或其他一些正常的 Spring 返回类型，如 ModelAndView，但我从未调查过）。

选项二是返回DeferredResult，类似于Callable。除非您可以将其传递给单独的线程并在那里填写结果。同样，不确定您是否可以返回 ModelAndView 或使用 @ResponseBody 返回 XML/JSON，但我相信您可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T22:12:24.470

关于背景的简短介绍`DeferredResult`：您的控制器最终是由 servlet 容器（就此而言，假设服务器容器是 Tomcat）工作线程执行的函数。您的服务流程以 Tomcat 开始，以 Tomcat 结束。Tomcat从客户端获取请求，持有连接，最终返回响应给客户端。您的代码（控制器或 servlet）位于中间的某个位置。

考虑这个流程：

1.  Tomcat 获取客户端请求。
2.  Tomcat 执行你的控制器。
3.  释放 Tomcat 线程但保持客户端连接（不返回响应）并在不同线程上运行繁重的处理。
4.  当您的繁重处理完成后，使用其响应更新 Tomcat 并将其返回给客户端（通过 Tomcat）。

因为 servlet（你的代码）和 servlet 容器（Tomcat）是不同的实体，所以为了允许这个流程（释放 tomcat 线程但保持客户端连接），我们需要在[他们的合同](https://docs.oracle.com/javaee/7/api/javax/servlet/package-summary.html)中提供这种支持，包，在[Servlet](https://docs.oracle.com/javaee/7/tutorial/servlets012.htm)`javax.servlet`中引入[3.0](https://docs.oracle.com/javaee/7/tutorial/servlets012.htm) . 当控制器的返回值为`DeferredResult`or时，Spring MVC 使用这个新的 Servlet 3.0 功能`Callable`，尽管它们是两个不同的东西。`Callable`是一个**接口**，它是 的一部分`java.util`，它是对`Runnable`接口的改进。`DeferredResult`是一个**类**由 Spring 设计，允许更多选项（我将描述）用于 Spring MVC 中的异步请求处理，并且此类仅保存结果（如其名称所暗示的那样），而您的`Callable`实现保存异步代码。所以这意味着你可以在你的控制器中使用这两者，运行你的异步代码`Callable`并将结果设置在 中`DeferredResult`，这将是控制器的返回值。那么通过使用`DeferredResult`作为返回值而不是 Callable 会得到什么？`DeferredResult`具有内置回调，如`onError`,`onTimeout`和`onCompletion`. 它使错误处理变得非常容易。此外，由于它只是结果容器，您可以选择任何线程（或线程池）在您的异步代码上运行。使用 Callable，您没有这个选择。

[在这里](https://github.com/elirandav/aviato/tree/master/src/main/java/com/example/aviato)，您可以找到我使用两个选项创建的简单工作示例，`Callable`并且`DeferredResult`.

# android - 单线程上的媒体播放器

> ID：15613315
> 
> 赞同：1
> 
> 时间：2013-03-25T11:02:37.570
> 
> 标签：android, multithreading, android-mediaplayer

我正在实现一个游戏，我想使用一个且只有一个 MediaPlayer 实例，它在与 UI 不同的线程中运行。每个音频文件都被发送到一个 FIFO 队列，如果没有文件正在播放，或者队列中的前一个文件播放完，就会立即播放。我已经实现了一个单例类来支持这一点，如下所示：

```
public class ThePlayer {
private static ThePlayer instance = null;
private Context context;
Thread playerThread;
BlockingQueue<Integer> listIDs = new LinkedBlockingQueue<Integer>();
MediaPlayer player;
Integer playID; 

private ThePlayer() {
    player = null;
    playerThread = new Thread(new Runnable() {
        //Object locker = new Object();
        public void run() {
            while (true) {
                try {
                    playID = listIDs.take(); // blocks if list empty
                    Log.d(this.getClass().getName(), "Took ID 0x" + Integer.toHexString(playID));
                    player = MediaPlayer.create(context, playID); 
                    player.setOnCompletionListener(
                            new MediaPlayer.OnCompletionListener() {
                                public void onCompletion(MediaPlayer mp) {
                                        mp.release();
                                        mp = null;
                                        synchronized (playerThread) {
                                            Log.d(this.getClass().getName(), "Finished playing 0x"+Integer.toHexString(playID));
                                            playerThread.interrupt();
                                        }
                                }
                            });
                    player.start();
                    Log.d(this.getClass().getName(), "Started playing 0x"+Integer.toHexString(playID));
                    synchronized (this) {
                        Log.d(this.getClass().getName(), "Now wait to finish");
                        wait(); // until finished playing
                    }                       
                } catch (InterruptedException ie) {
                    Log.d(getClass().getName(), "Player thread wait interrupted");
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    });
    playerThread.setName("PlayerThread");
    playerThread.start();
}

public static ThePlayer getInstance()
{
    if(instance == null)
    {
        instance = new ThePlayer();
    }
    return instance;
}

public void play(Context _ctx, int id) {
    context = _ctx;
    listIDs.add(id);
    Log.d(this.getClass().getName(), "Added ID 0x" + Integer.toHexString(id));
}

public void stop() {
    //TODO: implement
} 
```

}

一般来说，这很好用，但一个特定的文件无法以不一致的方式播放。换句话说，在大多数情况下，它不播放，但偶尔会播放。所有日志条目都表明文件已排队，MediaPlayer 已分配并启动，并且 onCompletion 函数已被调用。绝不会抛出异常。这发生在摩托罗拉 Defy+ 手机和各种模拟器配置上。它不会发生在我的三星 Galaxy Tab II 10.1 上，我猜测这是功能更强大的硬件的功能，或者可能是更高级的 Android 版本。

# php - 从 URL 中去除文件扩展名

> ID：15613316
> 
> 赞同：1
> 
> 时间：2013-03-25T11:02:37.883
> 
> 标签：php, .htaccess

我试图弄清楚如何从 url 中删除文件扩展名。我想更改 www.website.com/index.php 以显示 www.website.com/index。

我一直在努力让它发挥作用

```
RewriteRule ^about$ about.php [L] 
```

当我将此代码插入 htaccess 文件时，它所做的只是扭曲我的网站，实际上它看起来像是删除了 css，很奇怪..

我在 wamp 服务器上本地运行我的网站。

关于如何让它发挥作用的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:06:01.583

这很可能是您使用相对路径链接样式表的结果。例子：

```
<link rel="stylesheet" type="text/css" href="css/style.css" /> 
```

当您访问 时`http://example.com/about/`，网络浏览器正在寻找样式表：`http://example.com/about/css/style.css`。

要解决此问题，请使用从您的 Web 根目录开始的绝对路径：

```
<link rel="stylesheet" type="text/css" href="/css/style.css" /> 
```

注意：您可能还必须为图像使用绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:06:13.480

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

尝试将这些行添加到站点根目录中的 .htacess

# sql - SQL 查询中的 DB2 400 客户端 IP 地址函数

> ID：15613319
> 
> 赞同：0
> 
> 时间：2013-03-25T11:02:51.343
> 
> 标签：sql, ibm-midrange, db2-400

DB2 400 中是否有返回客户端 IP 地址的 SQL 函数？执行查询的客户端的 IP 地址

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:51:45.133

创建将调用系统 API 的用户定义函数。

使用[检索作业信息 (QUSRJOBI) API](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fapis%2Fqusrjobi.htm)，尤其是对于 DB2 服务器作业，它可以告诉您 SQL 是否正在“服务器”作业中运行，如果是，那么客户端 IPv4 或 IPv6 地址是什么。请参阅给出的 API 链接中的 JOBI0900 格式下的注释。如果使用 IPv4，您可以将 QUSRJOBI 格式的 JOBI0600 用于 5250 类型的交互式作业。

如果您有交互式工作并且正在使用 IPv6，您可能需要[Retrieve Device Description (QDCRDEVD) API](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/QDCRDEVD.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:14:26.110

没有保存客户端 IP 地址的现有[特殊寄存器](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzspecreg.htm)。您可以创建一个存储过程来调用作业 API 来获取该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:13:15.753

不。

如果 SQL 是从交互式作业运行的，您可以编写一个存储过程来调用[QDCRDEVD](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/QDCRDEVD.htm)并以这种方式获取 IP 地址。如果这不符合您的需求，也许您可​​以分享业务问题的性质。可能有不同的方法来解决这个问题。

# ruby - 如何使用 ruby 中的查询读取 excel 值？

> ID：15613326
> 
> 赞同：0
> 
> 时间：2013-03-25T11:02:58.627
> 
> 标签：ruby, excel

我需要使用查询读取带有 Ruby 的 Excel 工作表（.xls）值。红宝石中有没有可用的宝石来做到这一点？如果是这样，请帮助我。

任何关于此的提示或建议都会很棒。

谢谢安托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:19:05.700

您可以使用 Sequel 和 OLEDB 读取 Excel 文件：

```
require 'sequel'
Encoding.default_external = 'utf-8' #needed for umlauts in excel

def read_excel(source)
  source = File.expand_path(source) #Full path needed

  db = Sequel.ado(:conn_string=>"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=#{source};Extended Properties=Excel 8.0;")
  # Excel 2000 (for table names, use a dollar after the sheet name, e.g. Sheet1$)
  p db.test_connection

  dataset = db[:'Tabelle1$']
  p dataset
  dataset.each{|row|
    puts row
  }
end #test_read

read_excel('my_spreadsheet.xls') 
```

您应该知道选项卡的名称（在我的示例中为*Tabelle1*）

* * *

这里的“真正”解决方案不是 Sequel，而是 ADO 接口。我不熟悉其他 ORM，所以我可能无法真正帮助您。但是您可以检查例如活动记录。

有提示，如何通过 ADO连接[MS-Access](http://rubyonwindows.blogspot.de/2007/06/using-ruby-ado-to-work-with-ms-access.html)或[sqlserver ，有些使用](http://rubyonwindows.blogspot.de/2007/03/ruby-ado-and-sqlserver.html)[ActiveRecord](http://piao-tech.blogspot.de/2008/02/using-activerecord-with-microsoft-sql.html)。如果在我的 Sequel 示例中将连接字符串替换为 Excel 字符串，则可以使用其他 ORM。

您也可以尝试通过 ODBC 连接读取 Excel 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:07:59.333

`spreadsheet`使用gem从excel文件中读取数据

```
require 'spreadsheet'
doc = Spreadsheet.open('simple.xls')
sheet = doc.worksheet(0)  # list number, first list is 0 and so on...

val = sheet2[r,c] # read particular cell from list 0, r for row, c for column 
```

[那里有一些信息](http://cheind.wordpress.com/2009/12/16/ruby-spreadsheets/)。
网络上的更多信息，只需使用谷歌。

# collada - Collada动画节点，如何将旋转写成四元数

> ID：15613327
> 
> 赞同：1
> 
> 时间：2013-03-25T11:03:01.447
> 
> 标签：collada

我需要将 collada 文件中的欧拉旋转重写为四元数。我无法找出四元数表示的样子。谁能给我指出这样一个动画节点的样子？（我只需要知道 Collada 怎么写，计算不是问题）

具有欧拉表示的样本：

```
 <animation>
            <source id="ID72">
                <float_array id="ID73" count="2">0 0.4</float_array>
                <technique_common>
                    <accessor count="2" source="#ID73">
                        <param name="TIME" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID74">
                <Name_array id="ID75" count="2">LINEAR LINEAR</Name_array>
                <technique_common>
                    <accessor count="2" source="#ID75">
                        <param name="INTERPOLATION" type="Name"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID80">
                <float_array id="ID81" count="2">0 -60</float_array>
                <technique_common>
                    <accessor count="2" source="#ID81">
                        <param name="ANGLE" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <sampler id="ID82">
                <input semantic="INPUT" source="#ID72"/>
                <input semantic="INTERPOLATION" source="#ID74"/>
                <input semantic="OUTPUT" source="#ID80"/>
            </sampler>
            <channel source="#ID82" target="ID38/rotateY.ANGLE"/>
        </animation>
        <animation>
            <source id="ID83">
                <float_array id="ID84" count="2">0 0.4</float_array>
                <technique_common>
                    <accessor count="2" source="#ID84">
                        <param name="TIME" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID85">
                <Name_array id="ID86" count="2">LINEAR LINEAR</Name_array>
                <technique_common>
                    <accessor count="2" source="#ID86">
                        <param name="INTERPOLATION" type="Name"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID91">
                <float_array id="ID92" count="2">0 -40</float_array>
                <technique_common>
                    <accessor count="2" source="#ID92">
                        <param name="ANGLE" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <sampler id="ID93">
                <input semantic="INPUT" source="#ID83"/>
                <input semantic="INTERPOLATION" source="#ID85"/>
                <input semantic="OUTPUT" source="#ID91"/>
            </sampler>
            <channel source="#ID93" target="ID38/rotateX.ANGLE"/>
        </animation>
        <animation>
            <source id="ID94">
                <float_array id="ID95" count="2">0 0.4</float_array>
                <technique_common>
                    <accessor count="2" source="#ID95">
                        <param name="TIME" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID96">
                <Name_array id="ID97" count="2">LINEAR LINEAR</Name_array>
                <technique_common>
                    <accessor count="2" source="#ID97">
                        <param name="INTERPOLATION" type="Name"/>
                    </accessor>
                </technique_common>
            </source>
            <source id="ID102">
                <float_array id="ID103" count="2">-0 -0</float_array>
                <technique_common>
                    <accessor count="2" source="#ID103">
                        <param name="ANGLE" type="float"/>
                    </accessor>
                </technique_common>
            </source>
            <sampler id="ID104">
                <input semantic="INPUT" source="#ID94"/>
                <input semantic="INTERPOLATION" source="#ID96"/>
                <input semantic="OUTPUT" source="#ID102"/>
            </sampler>
            <channel source="#ID104" target="ID38/rotateZ.ANGLE"/>
        </animation> 
```

# r - 使用 caret 包找到 GBM 的最佳参数

> ID：15613332
> 
> 赞同：13
> 
> 时间：2013-03-25T11:03:17.627
> 
> 标签：r, optimization, r-caret, gbm

我正在使用 R GBM 包来增强对一些尺寸为 10,000 X 932 的生物数据进行回归，我想知道 GBM 包的最佳参数设置是什么，尤其是（n.trees、shrinkage、interaction.depth 和 n.trees、shrinkage、interaction.depth 和 n. minobsinnode) 网上搜索的时候发现R上的CARET包可以找到这样的参数设置。但是，我很难将 Caret 包与 GBM 包一起使用，所以我只想知道如何使用 caret 来找到前面提到的参数的最佳组合？我知道这似乎是一个非常典型的问题，但是我阅读了插入符号手册并且仍然难以将插入符号与 gbm 集成，特别是因为我对这两个软件包都很陌生

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-06-06T01:20:40.400

不确定你是否找到了你要找的东西，但我发现其中一些表格没有什么帮助。

如果您使用的是 caret 包，下面描述了所需的参数： > getModelInfo()$gbm$parameters

他是运行 GBM 的一些经验法则：

1.  interaction.depth 为 1，在大多数数据集上似乎足够了，但在少数数据集上，我发现针对最大值的奇数倍测试结果会得到更好的结果。我看到的这个参数的最大值是 floor(sqrt(NCOL(training)))。
2.  Shrinkage：数字越小，预测值越好，需要的树越多，计算成本也越高。使用诸如 shrinkage = shrinkage = seq(.0005, .05,.0005) 之类的数据测试一小部分数据的值有助于定义理想值。
3.  n.minobsinnode：默认为 10，一般我不会弄乱它。我已经在小数据集上尝试了 c(5,10,15,20)，但并没有真正看到计算成本的足够回报。
4.  n.trees：收缩越小，你应该拥有的树越多。从 n.trees = (0:50)*50 开始并进行相应调整。

使用 caret 包的示例设置：

```
getModelInfo()$gbm$parameters
library(parallel)
library(doMC)
registerDoMC(cores = 20)
# Max shrinkage for gbm
nl = nrow(training)
max(0.01, 0.1*min(1, nl/10000))
# Max Value for interaction.depth
floor(sqrt(NCOL(training)))
gbmGrid <-  expand.grid(interaction.depth = c(1, 3, 6, 9, 10),
                    n.trees = (0:50)*50, 
                    shrinkage = seq(.0005, .05,.0005),
                    n.minobsinnode = 10) # you can also put something        like c(5, 10, 15, 20)

fitControl <- trainControl(method = "repeatedcv",
                       repeats = 5,
                       preProcOptions = list(thresh = 0.95),
                       ## Estimate class probabilities
                       classProbs = TRUE,
                       ## Evaluate performance using
                       ## the following function
                       summaryFunction = twoClassSummary)

# Method + Date + distribution
set.seed(1)
system.time(GBM0604ada <- train(Outcome ~ ., data = training,
            distribution = "adaboost",
            method = "gbm", bag.fraction = 0.5,
            nTrain = round(nrow(training) *.75),
            trControl = fitControl,
            verbose = TRUE,
            tuneGrid = gbmGrid,
            ## Specify which metric to optimize
            metric = "ROC")) 
```

事情可能会根据您的数据（例如分布）而改变，但我发现关键是使用 gbmgrid 直到您获得所需的结果。现在的设置需要很长时间才能运行，因此请根据您的机器进行修改，时间允许。为了给你一个计算的大致范围，我在具有 64GB 内存的 Mac PRO 12 内核上运行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-26T08:35:10.693

此链接有一个具体示例（第 10 页） - [http://www.jstatsoft.org/v28/i05/paper](http://www.jstatsoft.org/v28/i05/paper)

基本上，应该首先为超参数（如 n.trees、interaction.depth 和 shrinkage）创建一个候选值网格。然后像往常一样调用通用 train 函数。

# ruby-on-rails - 如何通过使用 page.should have_content 从数据库获取数据的黄瓜测试用例

> ID：15613341
> 
> 赞同：0
> 
> 时间：2013-03-25T11:03:44.830
> 
> 标签：ruby-on-rails, cucumber

我收到以下错误：

```
expected there to be text "D87F1B373E528ECBE040D10A044A2E9A" in "Pending Forms to be completed Patient Medication Last Updated Prescription Id" (RSpec::Expectations::ExpectationNotMetError)
  ./features/step_definitions/get_pending_forms.rb:10:in `/^I should see formId as "([^"]*)"$/'
  features/get_pending_forms.feature:5:in `And I should see formId as "D87F1B373E528ECBE040D10A044A2E9A"'

Feature: List all pending forms in json
  Scenario: get pending forms
    Given I visits the get pending forms page with token "121cb4c8e9c5133b4046db3e81f91c0d03f4735949daf6e1c129d613531f3954"
    Then I should see pending forms with location_id "1234567890"
    And I should see formId as "D87F1B373E528ECBE040D10A044A2E9A"
    And I should see formCount as "5" 
```

步骤定义：

```
Given /^I visits the get pending forms page with token "([^"]*)"$/ do |token|
  visit display_pending_forms_path(:authorization => "121cb4c8e9c5133b4046db3e81f91c0d03f4735949daf6e1c129d613531f3954")
end

Then /^I should see pending forms with location_id "([^"]*)"$/ do |location|
  #page.should have_content(location)
end

And /^I should see formId as "([^"]*)"$/ do |formId|
  page.should have_content(formId)
end

And /^I should see formCount as "([^"]*)"$/ do |formCount|
  page.should have_content(formCount)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:57:19.817

在数据库中有一些记录。它工作正常..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:25:02.650

当您测试 HTML 元素时，您应该使用 have_css 而不是 have_content：

```
page.should have_css("#form_id") 
```

有关详细信息，请参阅[Capybara 文档](http://rdoc.info/github/jnicklas/capybara)。

# php - php函数将结果保存在数组中

> ID：15613343
> 
> 赞同：0
> 
> 时间：2013-03-25T11:03:53.060
> 
> 标签：php, arrays, function

你好，我想创建带有返回数据的函数，例如，当我有函数广告时，我想让它每次都显示我需要的内容，我有表 id、sub_id、名称、日期，并且我想创建函数我可以每次打印我需要的东西我想要

```
<?php
    function advert($data){

    $id = $_GET['id'];
    $query = mysql_query("SELECT *FROM advertisement WHERE id = $id");
    while($row = mysql_fetch_assoc($query)){
        $data = array(
        'id'        => $row['id']
        );
    }
    return $data;
}
    echo  advert($data['id']);
    ?> 
```

但是我每次的结果都是空的，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:36:22.243

这段简短的代码有很多缺陷，唯一的好建议是获得一些初学者教程。但我会努力解释一些事情。希望它会有所帮助。

第一步是行`function advert($data)`，您将参数传递`$data`给方法。现在稍后您将`$data`在返回字段中使用相同的变量。我猜你试图让函数知道你想填充什么变量，但这不是必需的。

如果我正确理解您要做什么，我会传入`$id`参数。然后，您可以使用此函数根据您提供的 ID 获取数组，并且它不必总是来自查询字符串（尽管它可以）。

```
function advert($id) {

} 
```

现在我们有了基础设置，我们想从数据库中获取信息。您的代码可以工作，但它也容易受到 SQL 注入的攻击。由于这本身就是一个主题，我建议您使用谷歌查找有关该主题的信息。现在我只想说你需要验证用户输入。在这种情况下，您需要一个 ID，我假设它是数字的，因此请确保它是数字的。我还假设你有一个整数 ID，这样就可以了。

```
function advert($id) {
  if (!is_int($id))
    return "possible SQL injection.";
} 
```

然后我再做一个假设，那就是 ID 是唯一的，您只希望返回 1 个结果。因为只有一个结果，所以我们可以`LIMIT`在查询中使用选项，不需要`while`循环。

还要记住，`mysql_`函数已被弃用，不应再使用。尝试切换到`mysqli`或`PDO`。但是现在，我将只使用您的代码。

仅将 ID 添加到`$data`数组中似乎没有用，但我想您了解如何从 SQL 表中添加其他列。

```
function advert($id) {
  if (!is_int($id))
    return "possible SQL injection.";

  $query = mysql_query("SELECT * FROM advertisement WHERE id = $id LIMIT 1");
  $row = mysql_fetch_assoc($query);

  $data = array(
    'id' => $row['id']
  );

  return $data; 
} 
```

为了不调用这个方法，我们可以像这样使用 GET 参数。请注意，回显数组很可能不会给您想要的结果。我会将结果存储在一个变量中，然后继续使用它。

```
$ad = advert($_GET['id']);

if (!is_array($ad)) {
  echo $ad; //for sql injection message
} else {
  print_r($ad) //to show array content
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:16:33.490

您是否想在返回结果中显示特定列的值，例如如果您作为 Id 传递，您只想返回 Id 列数据。循环遍历行数组的所有键并与传入的列名称匹配，您可以获得值并打破循环。

检查此链接：[php & mysql - 遍历单行的列并将值传递到数组](https://stackoverflow.com/questions/8523529/php-mysql-loop-through-columns-of-a-single-row-and-passing-values-into-array)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T11:07:49.163

尝试这个：

```
<?php
function advert($id){
$data= array();
//$id = $_GET['id'];
$query = mysql_query("SELECT *FROM advertisement WHERE id = $id");
while($row = mysql_fetch_assoc($query)){
     array_push($data,$row['id']);
}
return $data;
}
var_dump($data);
//echo  advert($data['id']);
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T11:06:27.580

您已经将 ID 作为函数参数传递。`*`还要在和之间放置空格`FROM`。

所以如下使用它。

```
$query = mysql_query("SELECT * FROM advertisement WHERE id = '".$data."'"); 
```

**或者**

```
function advert($id)
{
    $query = mysql_query("SELECT * FROM advertisement WHERE id = '".$id."'");
    $data = array();
    while($row = mysql_fetch_assoc($query))
    {
        $data[] = $row;
    }
    return $data;
} 
```

不要使用`mysql_*`，因为它已被弃用，而是使用`PDO`或`MYSQLI_*`

# java - 如何使用弹簧表单发送表单值？

> ID：15613344
> 
> 赞同：1
> 
> 时间：2013-03-25T11:03:53.977
> 
> 标签：java, jquery, spring, jsp

在我的 login.jsp 中有以下代码..

```
 <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<fieldset id="signin_menu">
    <form:form action="login/processLogin" modelAttribute="LOGIN">
        -----
    </form:form>
</fieldset> 
```

我的 LoginForm 有用户名、密码和 setter 和 getter。当点击提交按钮表单值时...

但是当我们点击`Forgot Password?`链接表单值不来时听到空值来..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:07:29.147

您需要提交表单以获取表单值

```
$('.submit_forgotPassword').click(function(e){
    e.preventDefault();
    var frm = $(this).parents('form');
    frm.attr('action', 'login/forgotPassword');
    frm.submit();
}); 
```

# javascript - 如何禁用下载

> ID：15613347
> 
> 赞同：1
> 
> 时间：2013-03-25T11:03:54.657
> 
> 标签：javascript, flash

我完全按照[http://pixelgraphics.us/downloadify/test.html](http://pixelgraphics.us/downloadify/test.html)中的说明使用 Downloadify， 并使用 id="downloadify" 的段落元素，但我想有条件地禁用 downloadify 按钮。

如何拨打禁用电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:12:58.443

似乎 Downloadify 有`disable`方法，因此可能会对您有所帮助。

```
var downloadify = $("#downloadify").downloadify( options );
downloadify.disable();
// to enable again
downloadify.enable(); 
```

来源在[Github](https://github.com/dcneiner/Downloadify/blob/master/src/downloadify.js#L135)。

# jquery - 重新调整大小不会按时引入滚动条

> ID：15613348
> 
> 赞同：0
> 
> 时间：2013-03-25T11:03:55.390
> 
> 标签：jquery, jscrollpane

我不明白为什么我的垂直滚动条不显示，直到我将容器的大小调整为小于其高度减去 horz 滚动条高度....

我做错了什么还是这是一个错误？

谢谢

![我现在希望看到一个垂直滚动条！](../Images/91332f3c0516715ac7e97ec6fee9edec.png)

![现在介绍垂直滚动......！](../Images/3b266d8ae5470d96e58f8ce049a23fff.png)

使用此代码：

```
<script>

        $(document).ready(function () {

            var settings = {
                showArrows: false
            };

            $('.myContainer').jScrollPane(settings);

            var api = $('.myContainer').data('jsp');

            var throttleTimeout;
            $(window).bind(
                'resize',
                function () {
                    if ($.browser.msie) {
                        // IE fires multiple resize events while you are dragging the browser window which
                        // causes it to crash if you try to update the scrollpane on every one. So we need
                        // to throttle it to fire a maximum of once every 50 milliseconds...
                        if (!throttleTimeout) {
                            throttleTimeout = setTimeout(
                                function () {
                                    api.reinitialise();
                                    throttleTimeout = null;
                                },
                                50
                            );
                        }
                    } else {
                        api.reinitialise();
                    }
                }
            );

        });

    </script> 
```

# c++ - 释放二维数组时删除不匹配

> ID：15613358
> 
> 赞同：1
> 
> 时间：2013-03-25T11:04:30.053
> 
> 标签：c++, memory-leaks, destructor

我已经盯着这个有一段时间了，我不明白为什么它会失败。我有一个 CMatrix 类，实现一个二维矩阵，如下所示：

```
class CMatrix {
public:
    CMatrix(int height, int width);
    ~CMatrix();
    // more stuff here
private:
    void deleteData();
    void allocData(int height, int width);

    int rows, cols;
    double** data;
};

CMatrix::CMatrix(int height, int width) {
    allocData(height, width);
}

CMatrix::~CMatrix() {
    deleteData();
} 
```

它工作正常，直到我试图摧毁它。有两种方法负责分配和释放，定义如下：

```
void CMatrix::allocData(int height, int width) {
    this->rows = height;
    this->cols = width;

    data = new double*[rows];
    for (int i = 0; i < rows; i++) {
        data[i] = new double[cols];
        for (int j = 0; j < cols; j++)
            data[i][j] = 0;
    }
}

void CMatrix::deleteData() {
    for (int i = 0; i < rows; i++) {
        delete data[i];
    }
    delete [] data;
} 
```

这个简单的`main`代码会导致它发生故障：

```
int main(int argc, char** 

    CMatrix a(2, 3);
    a[0][0] = 1;
    a[0][1] = 2;
    a[0][2] = 3;
    a[1][0] = 4;
    a[1][1] = 5;
    a[1][2] = 6;

    return 0;
} 
```

valgrind 说：

```
==21005== Mismatched free() / delete / delete []
==21005==    at 0x4C2A44B: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==21005==    by 0x402B5C: CMatrix::deleteData() (main.cpp:375)
==21005==    by 0x401731: CMatrix::~CMatrix() (main.cpp:138)
==21005==    by 0x402F5D: main (main.cpp:598)
==21005==  Address 0x5a06090 is 0 bytes inside a block of size 24 alloc'd
==21005==    at 0x4C2AAA4: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==21005==    by 0x402A84: CMatrix::allocData(int, int) (main.cpp:366)
==21005==    by 0x4015FB: CMatrix::CMatrix(int, int) (main.cpp:123)
==21005==    by 0x402D63: main (main.cpp:415) 
```

在方法`deleteData()`和中打印此消息`i=0`。`i`对于其他s 和 delete[]，它什么也没说。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:05:46.313

您需要`delete[]`在每一行上使用，因为它们被分配了`new[]`：

```
for (int i = 0; i < rows; i++) {
    delete[] data[i];
} 
```

请注意，`[i]`末尾的 是数组下标，与 . 无关`delete[]`。想一想：

```
for (int i = 0; i < rows; i++) {
    double* p = data[i];
    delete[] p;
} 
```

由于`p`指向动态分配数组中的第一个元素，因此必须对其进行`delete[]`编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:29:49.660

除了先前确定`delete[]`与`delete`问题的答案之外，请注意，您还应该为您的类定义一个复制构造*函数*（或声明它们以禁止复制语义），因为您直接管理您的原始资源（即动态分配的内存）班级。有关详细信息，请参阅[三法则。](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)*`operator=`*`CMatrix``private`

或者您可以简单地使用*直接资源管理器*，`std::vector`而不是使用`new[]`. 您还可以定义嵌套向量来构建 2D 矩阵，例如在`vector<vector<double>>`. 这样，`std::vector`将正确地自动进行内存分配、清理和复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:43:57.623

您的删除功能不会删除您为每行中的列分配的内存块

代码应该是这样的

```
void CMatrix::deleteData() {
    for (int i = 0; i < rows; i++) {
        delete[] data[i];
    }
    delete [] data;
} 
```

# java - 如何在谷歌应用引擎中一次提供多个 blobstore 文件？

> ID：15613362
> 
> 赞同：0
> 
> 时间：2013-03-25T11:04:42.273
> 
> 标签：java, google-app-engine, blobstore

我知道如何提供单个 blobstore 文件，我使用了以下代码片段：

```
BlobKey blobKey = new BlobKey(key);
response.setContentType("mime");
response.setHeader("Content-Disposition", "attachment;filename=" + fileName);
blobstoreService.serve(blobKey, response); 
```

但我想一次下载多个文件。IE。请求处理程序将一次提供多个文件。我使用了这段代码但没有用

```
for (String key : blobKeyCollection) {
BlobKey blobKey = new BlobKey(key);
response.setContentType("mime");
response.setHeader("Content-Disposition", "attachment;filename=" + fileName);
blobstoreService.serve(blobKey, response);
} 
```

它只响应一个文件，而不是提供多个文件。所以，我想知道如何实现这一点

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:19:44.453

浏览器不支持多文件下载 -[唯一的选择是将文件压缩在一起并下载 zip](https://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request)。

为此，您可以使用[Files API](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)读取多个文件并将[它们压缩](http://www.javaworld.com/community/node/8362)。

# ios - 在 ios 应用程序中添加分析工具

> ID：15613365
> 
> 赞同：1
> 
> 时间：2013-03-25T11:04:54.050
> 
> 标签：ios, objective-c, google-analytics, analytics, flurry

我想在我的 iPhone 应用程序中添加分析工具。我找到了[Google Analytics](http://www.google.com/analytics/)、[Asking Point](http://www.askingpoint.com/)和[Flurry](http://www.flurry.com/)。

现在哪个是最好的分析工具，为什么？还是有其他可用的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:29:52.637

我使用flurry，他们有一个很棒的平台并且很容易集成。Flurry 似乎也更专注于移动设备。大多数人使用flurry，但我认为有些人开始转向谷歌分析，虽然我没有亲自使用过它们，但他们的重点不仅仅是移动，而且他们非常擅长处理网页。

Flurry 可以让您跟踪任何事件。缺点是报告时间，有时可能是几个小时，而且下载量似乎每天都在更新。

我会使用这两个星期，看看你更喜欢哪一个。它可能会归结为您的喜好。

# sql-server - 在 SharePoint 上显示报告

> ID：15613368
> 
> 赞同：0
> 
> 时间：2013-03-25T11:05:04.447
> 
> 标签：sql-server, sharepoint

首先，我必须说我是新手。我是 ICT & Business 的三年级学生，也是一家国际公司的实习生。我的任务是在公司的 Intranet (SharePoint) 上创建报告服务。

该公司希望在 Intranet 上有一个部分，只有经理可以访问。为了给您一个想法，假设其中一位经理想要这样的报告：

“显示 2012 年至 2013 年间工作的男性实习生的姓名”。

假设 Intranet 上的界面将如下图所示。

[http://i.imgur.com/eBZXP8t.jpg](http://i.imgur.com/eBZXP8t.jpg)

经理填写必填字段并按下按钮后；1.SharePoint 将创建查询，2.SharePoint 将请求存储在 SQL Server 中的数据，3.SQL Server 将数据发送到 SharePoint，4.SharePoint 将创建 Excel文件。

为了实现这样的报告系统，你建议我从哪里开始以及如何开始？任何链接、指南等都会非常感激。即使是一般性的回应也会帮助我理解基础知识。

注意：我们的 IT 部门将处理 SharePoint 和 SQL 服务器之间的连接。我不必担心。我只需要了解如何在 Sharepoint 上创建一个查询，该查询将连接到 SQL 服务器并请求数据并将其显示在 SharePoint（或本例中的 Excel）上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:25:45.960

如果您还没有，则需要使用 SharePoint Designer。在 SharePoint 中创建一个新网站。您需要管理权限以防止非管理人员访问新站点。在 SP Designer 中打开新站点。调出数据源库（数据视图 > 管理数据源）。在那里你可以'连接到数据库......'。那里我帮不了你。为此，您将需要数据库连接字符串，并且您必须设计一个获取一组超级实习生的查询（以您的示例为例）。然后，您可以使用过滤器来提取特定的实习生。这也需要您进行一些探索。您也许可以使用表单元素自定义 SQL 查询，但我以前从未见过这样做过。通常，数据库连接会下拉数据表，并由页面上的 Web 部件使用。

希望这至少能让你开始......

# mysql - 关于 text 和 varchar 的磁盘空间差异

> ID：15613369
> 
> 赞同：0
> 
> 时间：2013-03-25T11:05:05.550
> 
> 标签：mysql, database

这两个字段存在一些磁盘空间差异： TEXT 和 VARCHAR ？

我需要使用一个字段来存储 URL，但我的主机支持最多 333 个字符的 varchar。

这是我的桌子：

```
 CREATE TABLE IF NOT EXISTS `urls` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `n_id` int unsigned NOT NULL DEFAULT '0',
  `first_citizen_id` int unsigned NOT NULL DEFAULT '0',
  `title_citizen` varchar(128) NOT NULL,
  `title_source` varchar(255) NOT NULL,
  `link` varchar(333) NOT NULL DEFAULT '',
  `link_image` varchar(333) NOT NULL DEFAULT '',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `link` (`link`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:26:17.327

从[数据类型存储要求](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html#idp52565952)一章：

> 在下表中，M 表示非二进制字符串类型的声明列长度（以字符为单位）和二进制字符串类型的字节。L 表示给定字符串值的实际长度（以字节为单位）。
> 
> `VARCHAR(M), VARBINARY(M)` 如果列值需要 0 – 255 个字节，则 L + 1 个字节，如果值可能需要超过 255 个字节，则 L + 2 个字节
> 
> `BLOB, TEXT` L + 2 个字节，其中 L < 2 ^(16)

无论如何，我很确定您的托管服务不会限制任何事情。您可能有一个包含许多大列的表，并且刚刚达到[最大行大小](http://dev.mysql.com/doc/refman/5.5/en/column-count-limit.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:59:04.407

是的，文本是指向包含它和其他类型的 Blob（二进制大对象）的系统表的指针。所以你有指针的开销，每个非空文本字段有 4 或 8 个字节。

# three.js - 如何删除 CubeGeometry 的一部分？

> ID：15613371
> 
> 赞同：1
> 
> 时间：2013-03-25T11:05:08.947
> 
> 标签：three.js, physics, csg

目前我正在使用 ThreeCSG/CSG 从一个更大的立方体中减去一个小立方体。这很好用，但只是它的外观不会改变实际的几何形状。因此，当在另一个立方体上使用 PhysiJS（物理引擎）时，它不会掉进洞里，而是像往常一样。[点击演示](http://gamingspire.com/game/test2.php)。

有什么办法可以真正从 CubeGeometry 中删除一个部分，以便对象可以落入其中 - 不仅仅是为了显示目的？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:24:46.657

ThreeCSG 确实改变了几何，我指的是 Three.js 意义上的几何——顶点、面等的集合。我认为你的意思是 ThreeCSG 不会改变对象*的基于物理的属性*。

根据[https://github.com/chandlerprall/Physijs/wiki/Basic-Shapes](https://github.com/chandlerprall/Physijs/wiki/Basic-Shapes)，您似乎必须使用它，`Physijs.ConcaveMesh`因为它“匹配您拥有的任何凹面几何形状，即任意网格”，它是唯一一个具有支持非凸物理对象的变化。

# android - 在 SQLite 错误中插入多行（错误代码 = 1）

> ID：15613377
> 
> 赞同：2
> 
> 时间：2013-03-25T11:05:36.100
> 
> 标签：android, android-sqlite, bulkinsert

在 SQLite Android 中执行以下查询时出现错误

```
sDataBase.execSQL(query); 
```

> 插入联系人（ID，FirstName，LastName，PhoneNumber，EmailId，Status）值（'ae0caa6a-8ff6-d63f-0253-110b20ac2127'，'xxx'，'xxx'，'9008987887'，'xxx@gmail.com'， '是'),('9afab56e-a18a-47f2-fd62-35c78d8e0d94','yyy','yyy','7890988909','yyy@gmail.com','是'),('378d757a-ee60-07a4 -e8bc-396b402c3270','zzz','zzz','9000898454','zzz@gmail.com','是')

**注意：这在 SQLServer 中执行良好，在 Android SQLite 中出现错误。**

```
Error: sqlite returned: error code = 1, msg = near ",": syntax error, db=/data/data/myapp.contactmanager/databases/webview.db 
```

**编辑 1：我在值之间添加了空格，但仍然出现错误**

```
insert into Contacts(ID, FirstName, LastName, PhoneNumber, EmailId,Status) values
('ae0caa6a-8ff6-d63f-0253-110b20ac2127', 'xxx', 'xxx','9008987887', 'xxx@gmail.com', 'Yes'), 
('9afab56e-a18a-47f2-fd62-35c78d8e0d94', 'yyy', 'yyy', '7890988909', 'yyy@gmail.com', 'Yes'), 
('378d757a-ee60-07a4-e8bc-396b402c3270', 'zzz', 'zzz', '9000898454', 'zzz@gmail.com', 'Yes') 
```

**编辑 2：使用[是否可以在 SQLite 数据库中一次插入多行来更改查询？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)还是行不通**

```
INSERT INTO Contacts 
SELECT 'ae0caa6a-8ff6-d63f-0253-110b20ac2127' AS ID, 'xxx' AS FirstName, 'xxx' AS LastName, '9008987887' AS PhoneNumber, 'xxx@gmail.com' AS EmailId, 'Yes' AS Status, 
UNION SELECT '9afab56e-a18a-47f2-fd62-35c78d8e0d94', 'yyy', 'yyy', '7890988909', 'yyy@gmail.com', 'Yes' 
UNION SELECT '378d757a-ee60-07a4-e8bc-396b402c3270', 'zzz', 'zzz', '9000898454', 'zzz@gmail.com', 'Yes' 
```

**编辑 3：**我在编辑 2.End of Sync 状态中犯了一个小错误`before UNION i have included comma`，所以我得到了一个错误。现在删除并且**工作正常**。

```
INSERT INTO Contacts 
SELECT 'ae0caa6a-8ff6-d63f-0253-110b20ac2127' AS ID, 'xxx' AS FirstName, 'xxx' AS LastName, '9008987887' AS PhoneNumber, 'xxx@gmail.com' AS EmailId, 'Yes' AS Status 
UNION SELECT '9afab56e-a18a-47f2-fd62-35c78d8e0d94', 'yyy', 'yyy', '7890988909', 'yyy@gmail.com', 'Yes' 
UNION SELECT '378d757a-ee60-07a4-e8bc-396b402c3270', 'zzz', 'zzz', '9000898454', 'zzz@gmail.com', 'Yes' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:27:14.503

> 在 SQLite 错误中插入多行

我真的不喜欢你的做法。它是如此的硬核，看起来像意大利面条代码。而且你的方法永远不会奏效，因为**一个插入只能有一个值**。所以你做错了。要使用`API insert()`它直接为插入而设计的方法呢？

另外，从速度性能和安全性的角度来看，我也建议您使用`TRANSACTION`。但是，让我们专门为您编写一些代码。

```
public void insertMultiple(List<Contact> contacts) {
    Contact c = null;
    ContentValues values = new ContentValues();
    try {
        if (db != null) {
            db.beginTransaction();
            for (Contact c: contacts) {
                values.put(SQLConstants.FIRSTNAME, c.getFirstName());
                values.put(SQLConstants.LASTNAME, c.getLastName());
                ...
                db.insertOrThrow("Contacts", SQLConstants.FIRSTNAME, values);
                values.clear();
            }
            db.setTransactionSuccessful();
        }
    }
    finally {
        if (db != null && db.inTransaction()) {
            db.endTransaction();
        }
    }
} 
```

## 笔记：

正如我注意到你有一个名为**Constacts**的表，所以我建议你创建**自己的对象联系人**，它将代表你在应用层上的表，其中对象的属性等于表中的列。我建议您使用这种方法，因为：

*   这不是 spagetthi 代码
*   它相当快
*   它更安全

## 最后提出几点建议：

`execSQL()`还不错，但我通常只在创建`SQLiteOpenHelper`子类来创建、删除和更改表时才使用它。有一个用法很合适。但是，对您的主要建议是：

*   每次插入、更新、删除事务的使用总是非常好的做法，因为除了提高速度性能（尤其是插入大量行时）之外，您使用数据库的工作更加安全。

[**仅供参考：**当我在 SQLite 中插入 1000、10 000、100 000 行时，我做了一些测试，我可以告诉你插入 100 000 行只用了**55,346**秒。在没有事务的情况下插入 1 000 行甚至**需要 73,398**秒。]

*   每次您从一个或多个表中选择、插入、更新时，都使用**占位符**，即参数化语句而不是硬编码。有了它，您的查询将变得更安全、更快、更易于阅读。在加入的情况下，总是使用 join 子句。你可以选择是最好的。

## 更新：

这是您的代码：

```
insert into Contacts(ID, FirstName, LastName, PhoneNumber, EmailId, Status) 
select 'someId' as ID, 'xxx' as FirstName, 'xxx' as LastName , '9008987887' as PhoneNumber , 'xxx@gmail.com' as EmaiId, 'Yes' as Status
union all select 'someId', 'xxx', 'xxx', '9008987887', 'xxx@gmail.com', 'Yes'
union all select 'someId', 'xxx', 'xxx', '9008987887', 'xxx@gmail.com', 'Yes' 
```

## 更新 2：

正如@Korniltsev Anatoly 在 SQLite 中指出的那样，有一个约束`SQLITE_MAX_COMPOUND_SELECT`意味着您一次不能使用超过 500 个联合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T07:12:49.183

除了@Sajmon 的回答：

值得一提的是，sqlite 有一个限制 - **SQLITE_MAX_COMPOUND_SELECT**在几乎所有设备上都为**500**或更大。这意味着您一次不能使用超过 500 个联合。如果您使用更多 - 您的 sql 查询可能会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:17:45.667

这不是在 SQLite 中插入多行的方式。有关详细信息，请参阅[此帖子](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)。

如果我是您，请使用该问题答案中的语法，或者，如果您也希望能够一次插入一行，只需执行一个标准`INSERT INTO db (one, two) VALUES (one, two)`并为您插入的每一行执行一次。由你决定！

# ruby - Ruby Rmagick：自动裁剪/“修剪”图像的过多（白色）空间

> ID：15613382
> 
> 赞同：1
> 
> 时间：2013-03-25T11:05:53.710
> 
> 标签：ruby, imagemagick, rmagick, imgkit

我正在使用 IMGkit ( [https://github.com/csquared/IMGKit](https://github.com/csquared/IMGKit) ) 拍摄 HTML 文档的“屏幕截图”。背景*始终*为白色 (#ffffff)。

IMGkit 正在拍摄 1200 x 1000 像素大的“屏幕截图”，由于 HTML 文档的实际内容可能非常小，我最终可能会得到很多空白。

Rmagick 中是否有内置功能可以自动裁剪/修剪这些过多的空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:02:23.187

解决方案是 RMagick 的修剪方法。

例子

```
require "rubygems"
require "RMagick"
require "imgkit"

include Magick

kit  = IMGKit.new('http://localhost/test.html')
blob = kit.to_img(:png)

img = Magick::Image.from_blob(blob).first
img.trim!

File.open("test.png", "w") { |f| f << img.to_blob } 
```

# php - SugarCRM 联系人模块中的自动填充办公电话

> ID：15613383
> 
> 赞同：2
> 
> 时间：2013-03-25T11:05:59.330
> 
> 标签：php, sugarcrm

谁能告诉我，当我们选择帐户名称时，如何让办公电话自动填写联系人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T20:53:59.880

它应该自动执行此操作。查看`/modules/Contacts/metadata/editviewdefs.php`，您应该会看到以下内容。

```
 array (
        'name' => 'account_name',
        'displayParams' =>
        array (
          'key' => 'billing',
          'copy' => 'primary',
          'billingKey' => 'primary',
          'additionalFields' =>
          array (
            'phone_office' => 'phone_work',
          ),
        ), 
```

# jquery - 淡出当前元素并淡入具有相同类的兄弟元素

> ID：15613386
> 
> 赞同：2
> 
> 时间：2013-03-25T11:06:05.000
> 
> 标签：jquery

我有以下无法编辑的标记，因为它是由我无权访问的服务器生成的。服务器使用“contentBox”类加载所有 div，但是它只显示第一个（其他三个`display: none;`添加了“”）。

我想添加一个ID为'switchButton'的div，这样当它被点击时它会淡出第一个'contentBox' div，然后淡入第二个'contentBox' div等（所以再次按下它，隐藏第二个，显示第三个 div）。

我需要它循环，所以如果它被按下 4 次，它会回到第一个框。

```
<div id="switchButton">Click Me</div>

    <div class="contentBox">Server side generated content</div>
    <div class="contentBox">Server side generated content</div>
    <div class="contentBox">Server side generated content</div>
    <div class="contentBox">Server side generated content</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:12:28.213

`**[LIVE DEMO](http://jsbin.com/avogad/3/edit)**`

```
var c = 0;                          // counter
var n = $('.contentBox').length;    // number of elements

// now using " ++c % n " you can loop your elements
// targeting the EQuivalent one using .eq() method. (0 indexed)
// % is called "reminder" or Modulo (AKA Modulus)   

$('#switchButton').click(function(){ 
  $('.contentBox').stop().eq( ++c%n ).fadeTo(500,1).siblings('.contentBox').fadeTo(500,0); 
}); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)
[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)
[http://api.jquery.com/eq/](http://api.jquery.com/eq/)
[http:// /api.jquery.com/fadeto/](http://api.jquery.com/fadeto/)

`[Modulo playground](http://jsbin.com/otesub/1/edit)`

# c# - 我在哪里可以找到与 Dolphin 6100 设备交互的 Honeywell 库？

> ID：15613387
> 
> 赞同：2
> 
> 时间：2013-03-25T11:06:06.853
> 
> 标签：c#, visual-studio, windows-ce, smart-device

我必须为 Honeywell Dolphin 6100 创建一个应用程序；带有条码扫描仪的移动计算机，使用类似 Windows CE 5.0 的操作系统。

但是我找不到相关的库来使与条形码扫描仪和键盘的交互成为可能。

有谁知道任何可以帮助找到这些库的链接，并且可能是一些与该设备一起使用的教程？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:01:53.083

使用网络搜索引擎对“Dolphin 6100 SDK”进行的简单搜索作为第一个结果（使用 Google 和 Bing）[出现在该设备的 Honeywell 页面上](http://www.honeywellaidc.com/en-US/Pages/Product.aspx?category=&cat=&pid=Dolphin6100&rank=&=)。单击该页面上的“软件”选项卡会在最顶部显示 SDK v1.03 的列表。

# php - 缩短按位方程

> ID：15613397
> 
> 赞同：-2
> 
> 时间：2013-03-25T11:06:47.710
> 
> 标签：php, bitwise-operators, xor, assignment-operator

类似于如何缩短加号和减号：

```
$x = $x + 5; 
```

变成

```
$x += 5; 
```

你能用位运算符做类似的事情吗？例如，在应用 XOR 时，以下内容是否有效？

```
$x = $x ^ 1; 
```

变成

```
$x ^= 1; 
```

测试了这个简单的脚本后，它似乎可以工作，但是使用它是否正确，或者我在这里偏离了轨道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:14:27.563

是的，这是正确的。

来自[http://www.php.net/manual/en/language.operators.assignment.php](http://www.php.net/manual/en/language.operators.assignment.php)（第一条评论）

```
See the Arithmetic Operators page (http://www.php.net/manual/en/language.operators.arithmetic.php)
Assignment    Same as:
$a += $b      $a = $a + $b    Addition
$a -= $b      $a = $a - $b    Subtraction
$a *= $b      $a = $a * $b    Multiplication
$a /= $b      $a = $a / $b    Division
$a %= $b      $a = $a % $b    Modulus

See the String Operators page(http://www.php.net/manual/en/language.operators.string.php)
$a .= $b      $a = $a . $b       Concatenate

See the Bitwise Operators page (http://www.php.net/manual/en/language.operators.bitwise.php)
$a &= $b      $a = $a & $b     Bitwise And
$a |= $b      $a = $a | $b     Bitwise Or
$a ^= $b      $a = $a ^ $b     Bitwise Xor
$a <<= $b     $a = $a << $b    Left shift
$a >>= $b     $a = $a >> $b    Right shift 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:13:48.887

**[是的，它在赋值运算符页面的评论](http://www.php.net/manual/en/language.operators.assignment.php#40084)**中提到

> ```
> Assignment    Same as:
> $a += $b     $a = $a + $b    Addition
> $a -= $b     $a = $a - $b     Subtraction
> $a *= $b     $a = $a * $b     Multiplication
> $a /= $b     $a = $a / $b    Division
> $a %= $b     $a = $a % $b    Modulus
> 
> See the String Operators page(http://www.php.net/manual/en/language.operators.string.php)
> $a .= $b     $a = $a . $b       Concatenate
> 
> See the Bitwise Operators page (http://www.php.net/manual/en/language.operators.bitwise.php)
> $a &= $b     $a = $a & $b     Bitwise And
> $a |= $b     $a = $a | $b      Bitwise Or
> $a ^= $b     $a = $a ^ $b       Bitwise Xor
> $a <<= $b     $a = $a << $b     Left shift
> $a >>= $b     $a = $a >> $b      Right shift 
> ```

# ios - 在 IOS 应用上显示应用服务器排行榜

> ID：15613401
> 
> 赞同：0
> 
> 时间：2013-03-25T11:06:57.147
> 
> 标签：ios, cocos2d-iphone

我有一个 cocos2d 应用程序和一个存储在我的 php/mysql 服务器中的排行榜。该应用程序通过 ASIHTTPRequest 与服务器通信。

在表格中的应用程序内显示排行榜数据的最佳方式是什么？（例如 UIWebView、UITableView 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:31:43.843

使用 ASIHTTPRequest 从服务器下拉排行榜数据并使用“UITableViewController”显示该数据。这是我能想到的最好的方式。

# vim - 如何在不离开当前选项卡且不切换编辑模式的情况下在新选项卡中打开文件或缓冲区？

> ID：15613406
> 
> 赞同：2
> 
> 时间：2013-03-25T11:07:07.033
> 
> 标签：vim

必须有一种方法可以在后台打开一个新标签，而无需离开当前标签，但我只是在文档中找不到它。

场景：用户 Bob 处理文件：`foo.txt`. 外部程序定期更新文件`bar.txt`。*然后它会在 Bob 的 vim 会话的背景*中打开一个新选项卡，而不会强制 Bob 从他当前`foo.txt`在*前台*选项卡中的编辑切换。

所有`tab*`命令似乎都没有完成这项工作。我错过了什么？

您可以说我正在寻找与 : 等价的东西`tabnew_in_background_leave_edit_mode_as_is()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:58:51.513

您可以使用

```
$ vim --servername BOB --remote-tab +":tabprevious" filename 
```

***编辑***

Vim 没有在后台打开选项卡的命令。这就是为什么我们需要`:tabprevious`技巧来打开新标签并立即返回上一个标签。缺点是我们不再处于插入模式。

幸运的是，我们有`gi`正常模式映射，用于返回上次退出的插入模式。该命令有效，在这里：

```
$ vim --servername BOB --remote-tab +":tabprevious" filename && vim --servername BOB --remote-send "gi" 
```

在 shell 脚本中包含和概括它听起来并不复杂。

这是第二种方法，使用相同的成分，但组合方式不同：

```
$ vim --servername BOB --remote-send "<Esc>:tabe filename | tabprevious<CR>gi" 
```

基本上，我们退出插入模式，做我们的“标签”业务，然后回到我们原来的位置。而且我们还有另一个缺点：这种方法与插入模式相关联，因此即使我们之前不存在，我们最终也会进入插入模式。

不幸的是，我没有看到不涉及编写函数的干净方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T03:03:01.383

当光标位于目录列表中的文件名上时按 SHIFT + t 会在后台选项卡中打开文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:18:09.547

你检查了`--remote-tab`吗？还是我误解了你的问题？

在 vim 中，输入`:h remote-tab`

```
 --remote-tab         Like --remote but open each file in a new
                tabpage. 
```

所以你可以尝试：（假设你已经有一个名为“SVR”的vim“服务器”）：

```
vim --servername SVR --remote-tab foo.txt 
```

将在vim 实例`foo.txt`的选项卡中打开`SVR`

# java - 使用 Java 限制用户访问 Web 应用程序中的多个页面

> ID：15613407
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:07:07.863
> 
> 标签：java

在我们基于 Java 的 Web 应用程序中，我们有角色和用户的概念。基本上我们的页面中有很多链接，这些链接可以根据分配给用户的角色来访问。角色和用户相关信息存储在数据库中。

在用户登录期间，我们查询数据库，获取所有相关角色并仅显示分配给他的角色的链接。所以用户只能看到他有权访问的链接。

这种方式非常有效。但是每次用户登录时，程序都会从​​数据库中检查他的角色级别。这是数据库的负担。请建议我们防止访问 Web 应用程序中的多个链接的另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:13:38.517

2个选项：

1）当他第一次通过身份验证时将用户角色放入会话中，并在他每次尝试访问功能时访问会话

2) 使用 a`Map<String, List<Role>>`作为缓存并访问此映射而不是数据库来验证用户。地图的键可以是用户名。当用户登录时，将用户添加到地图中。当用户注销或会话到期时，从地图中删除。Spring Security 使用[Ehcache](http://ehcache.org/)进行缓存，因此您也可以这样做。

```
public void doLogin(HttpSevletRequest request) {
  String username = request.getParameter("username");
  String password = request.getParameter("password");
  User user = service.authenticate(username, password);
  HttpSession session = request.getSession();
  session.setAttribute("roles", user.getRoles());
}

public void save(HttpServletRequest request) {
  List<Role> roles = request.getSession().getAttribute("roles");
  for(Role role : roles) {
     if(role.getName()=="save") {
        service.save();
        break;
     }
  }
} 
```

添加了一个简单的示例。对于缓存，它将是一个类似的，除了而不是会话使用 Map。

# asp.net-mvc-4 - RazorPDF 在构建服务器上不起作用

> ID：15613413
> 
> 赞同：1
> 
> 时间：2013-03-25T11:07:25.853
> 
> 标签：asp.net-mvc-4, itextsharp, nuget-package, sql-server-2008r2-express

我正在创建一个使用 RazorPDF nuget 包来创建 PDF 文档的应用程序。在本地开发电脑上使用它时一切正常，但是当我在服务器上部署时，我总是得到标准错误：“错误。处理您的请求时发生错误。”

我是否需要更改项目中的属性以使 nuget 包在服务器上工作，除了正常的部署方式或有任何人有这方面的经验吗？

# ios - UISplitViewController 在按钮单击主视图时推送多个详细视图 iPad

> ID：15613418
> 
> 赞同：0
> 
> 时间：2013-03-25T11:07:30.400
> 
> 标签：ios, ipad, uisplitviewcontroller

我有主视图控制器，它由几个按钮而不是 tableview 组成。我想在不同的按钮点击时打开不同的细节视图。

我在下面列出了代码，但这没有显示任何更改。

```
 - (IBAction)NewEntryBtn:(UIButton *)sender 
{

    NSLog(@"new entry btn");
    [self.appdelegate.splitViewController viewWillDisappear:YES];
    NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:[[self.appdelegate.splitViewController.viewControllers objectAtIndex:1]viewControllers]];
    [viewControllerArray removeLastObject];

    self.secondVC=[[SecondDetailViewController alloc] init];
    [viewControllerArray addObject:self.secondVC];
    self.appdelegate.splitViewController.delegate = self.secondVC;

    [[self.appdelegate.splitViewController.viewControllers objectAtIndex:1] setViewControllers:viewControllerArray animated:NO];    

    [self.appdelegate.splitViewController viewWillAppear:YES];
}

- (IBAction)EditBtn:(UIButton *)sender 
{
   [self.appdelegate.splitViewController viewWillDisappear:YES];
    NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:[[self.appdelegate.splitViewController.viewControllers objectAtIndex:1]viewControllers]];
    [viewControllerArray removeLastObject];

    self.secondVC=[[SecondDetailViewController alloc] init];
    [viewControllerArray addObject:self.secondVC];
    self.appdelegate.splitViewController.delegate = self.secondVC;

    [[self.appdelegate.splitViewController.viewControllers objectAtIndex:1] setViewControllers:viewControllerArray animated:NO];    

    [self.appdelegate.splitViewController viewWillAppear:YES];
} 
```

有人可以建议更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T06:30:41.500

Well, you can do this by only one method.
First set `tag` to all the buttons and add reference of all the buttons to single method.

```
- (IBAction)btnClicked:(id)sender
{
    int btnNo = ((UIControl *) sender).tag;
    NSLog(@"Button Clicked - %d", btnNo);
    if (btnNo == 1)
     {
     // Navigate to first detail view controller
     }
    else if (btnNo == 2)
     {
     // Navigate to second detail view controller
     }
    .
    . 
    and so on.
} 
```

# windows - vbscript 使用 IE 错误发送 GET 请求

> ID：15613422
> 
> 赞同：0
> 
> 时间：2013-03-25T11:07:46.403
> 
> 标签：windows, vbscript

我有下面的 vbscript，它需要发送一个 GET 请求，然后注销当前用户。这个想法是用这个脚本替换默认的“注销”开始菜单项。

当我使用 cscript 运行它时，它会在第 9 行引发错误，

```
HTTPGet = IE.document.documentelement.outerhtml 
```

我不明白出了什么问题。也许我应该在注销用户之前等待收到响应，但是由于上面的行似乎不起作用，我立即注销。

```
TOKEN = "xxxxx"
Set IE = CreateObject("InternetExplorer.Application")
IE.visible = 0
IE.navigate "https://something.com/?action=create&token=" & TOKEN
Do While IE.Busy
   WScript.Sleep 200  ' see the above notice of change
   Exit Do                  ' prevents script host from going crazy waiting for IE
loop
HTTPGet = IE.document.documentelement.outerhtml
IE.quit
Set IE = Nothing

'WScript.Echo HTTPGet   'good for debugging. shows what you got back.

Dim objShell
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "C:\WINDOWS\system32\shutdown.exe -l" 
```

如果重要的话，这仅适用于带有 IE 8 的 Windows XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:13:22.227

试试这个代码：

```
Set IE = CreateObject("InternetExplorer.Application")
IE.visible = 0
IE.navigate "https://host/?a=" & TOKEN
i = 1
Do While (IE.readyState <> 4)
   WScript.Sleep 1000  ' see the above notice of change
   i = i + 1
   If (i > 10) Then
      Exit Do
   End If
loop
HTTPGet = IE.document.documentElement.outerHTML
IE.Quit()
Set IE = Nothing 
```

# html - 溢出：隐藏内容向右推送

> ID：15613426
> 
> 赞同：3
> 
> 时间：2013-03-25T11:07:52.400
> 
> 标签：html, css

我正在做一个小网站。

问题是：

我有一个设置高度和宽度的文章标签：

```
.main-content-wrapper article { color: white; margin: auto; overflow: hidden; }
.main-content-wrapper article { width: 980px; height: 457px; font-size: 20px; } 
```

在 Firefox 和 safari 中，`overflow: hidden`设置时，整篇文章被推到右侧。

与`overflow: hidden`： ![溢出：隐藏](../Images/70c5905af2f2264b869beb8ad2c82446.png)

没有`overflow: hidden`： ![在此处输入图像描述](../Images/af3e9ea4c642e80e6a71670ecab2959e.png)

有谁知道为什么？在chrome，ie10和opera中就可以了。

链接：*链接已删除*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:21:19.347

如果我们看一下您的标记：

```
<div class="row">
    <div class="content-menu-wrapper">
        <nav id="content-menu">
            <ul>
                <li><a href="./article.html">HVA ER OUTPUT?</a></li>
                <li><a href="./article.html">HVOR ER OUTPUT?</a></li>
                <li><a href="./article.html">NÅR ER OUTPUT?</a></li>
            </ul>
        </nav> <!-- end content-menu -->
    </div> <!-- end content-menu-wrapper -->
</div>

<div class="row">
    <div class="main-content-wrapper">
        <article>
            <p>I love pudding jelly bear claw I love cookie 
               croissant pie.......</p>
        </article>
    </div> <!-- main-content-wrapper -->
</div> 
```

在第一行，你有你的`content-menu`，它有浮动元素 ( `<li>`)，这会导致行的宽度折叠。结果，具有内容 ( `<article>`) 的以下元素将流向菜单的右侧。

您可以通过在 CSS 中添加以下规则来解决此问题：

```
.content-menu-wrapper {
    background: url("../images/menu_background.png") repeat-x scroll 0% 0% transparent;
    overflow: auto:
} 
```

将`overflow: auto`处理折叠的宽度，您的布局将起作用。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/NEJKj/](http://jsfiddle.net/audetwebdesign/NEJKj/)

**跨浏览器评论**
Firefox 处理浮动的方式似乎与 Chrome、IE、Safari/windows、Opera 略有不同。其他人可能对此有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:39:42.760

尝试添加

```
float:left;  /* if you want to float this to left side */
margin: 0px auto; /* if you want to center it horizontaly */ 
```

对不起，你为什么要使用 2 行和相同的选择器？:)

# c# - 无法在 Visual Studio 2010 中打开解决方案文件

> ID：15613427
> 
> 赞同：3
> 
> 时间：2013-03-25T11:07:54.997
> 
> 标签：c#, .net, mongodb

**场景：**我开始在 C# 和 MongoDB 上进行开发。我刚刚下载了一个很好的[演示项目](http://www.codeproject.com/Articles/273145/Using-MongoDB-with-the-Official-Csharp-Driver)。

以下是该`.sln`文件的内容：

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "IntroMongo", "IntroMongo\IntroMongo.csproj", "{9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}"
EndProject
Global
    GlobalSection(SolutionConfigurationPlatforms) = preSolution
        Debug|Any CPU = Debug|Any CPU
        Release|Any CPU = Release|Any CPU
    EndGlobalSection
    GlobalSection(ProjectConfigurationPlatforms) = postSolution
        {9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
        {9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}.Debug|Any CPU.Build.0 = Debug|Any CPU
        {9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}.Release|Any CPU.ActiveCfg = Release|Any CPU
        {9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}.Release|Any CPU.Build.0 = Release|Any CPU
    EndGlobalSection
    GlobalSection(SolutionProperties) = preSolution
        HideSolutionNode = FALSE
    EndGlobalSection
EndGlobal 
```

**问题：**无法在 Visual Studio 2010 中打开解决方案

它抛出以下错误消息：

```
One or more projects in the solution were not loaded correctly.
Please see the Output Window for details. 
```

**了解信息：**
一些进一步的研究，我发现以下内容：
[已知项目类型指南列表](http://www.mztools.com/Articles/2008/MZ2008017.aspx)。
我的`.sln`文件包含：

```
Visual Studio 2010
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "AddNumbers", "AddNumbers.csproj", "{2C81C5BB-E3B0-457E-BC02-73C76634CCD6}" 
```

链接显示：

```
Project Type     Description    Project Type Guid<br>
Windows (C#)    {FAE04EC0-301F-11D3-BF4B-00C04F79EFBC} 
```

所以它是 Windows C#

输出窗口显示如下：

```
D:\IntroMongo\IntroMongo\IntroMongo.csproj : error  : The project file 'D:\IntroMongo\IntroMongo\IntroMongo.csproj' cannot be opened.

The project type is not supported by this installation. 
```

**问题：**如何在 Visual Studio 2010 的 Windows 7 64 位机器上打开和运行项目？

提前谢谢。

* * *

**根据评论更新：**
*.csproj 包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>
    </ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{9D4B1119-A3EA-4B82-8979-4C1B6BDB56B0}</ProjectGuid>
    <ProjectTypeGuids>{E53F8FEA-EAE0-44A6-8774-FFD645390401};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>IntroMongo</RootNamespace>
    <AssemblyName>IntroMongo</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <MvcBuildViews>false</MvcBuildViews>
    <UseIISExpress>false</UseIISExpress>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="EntityFramework">
      <HintPath>..\packages\EntityFramework.4.1.10331.0\lib\EntityFramework.dll</HintPath>
    </Reference>
    <Reference Include="MongoDB.Bson, Version=1.2.0.4274, Culture=neutral, PublicKeyToken=f686731cfb9cc103, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>bin\MongoDB.Bson.dll</HintPath>
    </Reference>
    <Reference Include="MongoDB.Driver, Version=1.2.0.4274, Culture=neutral, PublicKeyToken=f686731cfb9cc103, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>bin\MongoDB.Driver.dll</HintPath>
    </Reference>
    <Reference Include="System.Data.Entity" />
    <Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <Reference Include="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <Reference Include="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Web.DynamicData" />
    <Reference Include="System.Web.Entity" />
    <Reference Include="System.Web.ApplicationServices" />
    <Reference Include="System.ComponentModel.DataAnnotations" />
    <Reference Include="System.Core" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Web" />
    <Reference Include="System.Web.Extensions" />
    <Reference Include="System.Web.Abstractions" />
    <Reference Include="System.Web.Routing" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Configuration" />
    <Reference Include="System.Web.Services" />
    <Reference Include="System.EnterpriseServices" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Controllers\RemarkController.cs" />
    <Compile Include="Controllers\UserController.cs" />
    <Compile Include="Global.asax.cs">
      <DependentUpon>Global.asax</DependentUpon>
    </Compile>
    <Compile Include="Models\MongoWrapper.cs" />
    <Compile Include="Models\Remark.cs" />
    <Compile Include="Models\User.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="Content\themes\base\images\ui-bg_flat_0_aaaaaa_40x100.png" />
    <Content Include="Content\themes\base\images\ui-bg_flat_75_ffffff_40x100.png" />
    <Content Include="Content\themes\base\images\ui-bg_glass_55_fbf9ee_1x400.png" />
    <Content Include="Content\themes\base\images\ui-bg_glass_65_ffffff_1x400.png" />
    <Content Include="Content\themes\base\images\ui-bg_glass_75_dadada_1x400.png" />
    <Content Include="Content\themes\base\images\ui-bg_glass_75_e6e6e6_1x400.png" />
    <Content Include="Content\themes\base\images\ui-bg_glass_95_fef1ec_1x400.png" />
    <Content Include="Content\themes\base\images\ui-bg_highlight-soft_75_cccccc_1x100.png" />
    <Content Include="Content\themes\base\images\ui-icons_222222_256x240.png" />
    <Content Include="Content\themes\base\images\ui-icons_2e83ff_256x240.png" />
    <Content Include="Content\themes\base\images\ui-icons_454545_256x240.png" />
    <Content Include="Content\themes\base\images\ui-icons_888888_256x240.png" />
    <Content Include="Content\themes\base\images\ui-icons_cd0a0a_256x240.png" />
    <Content Include="Content\themes\base\jquery.ui.accordion.css" />
    <Content Include="Content\themes\base\jquery.ui.all.css" />
    <Content Include="Content\themes\base\jquery.ui.autocomplete.css" />
    <Content Include="Content\themes\base\jquery.ui.base.css" />
    <Content Include="Content\themes\base\jquery.ui.button.css" />
    <Content Include="Content\themes\base\jquery.ui.core.css" />
    <Content Include="Content\themes\base\jquery.ui.datepicker.css" />
    <Content Include="Content\themes\base\jquery.ui.dialog.css" />
    <Content Include="Content\themes\base\jquery.ui.progressbar.css" />
    <Content Include="Content\themes\base\jquery.ui.resizable.css" />
    <Content Include="Content\themes\base\jquery.ui.selectable.css" />
    <Content Include="Content\themes\base\jquery.ui.slider.css" />
    <Content Include="Content\themes\base\jquery.ui.tabs.css" />
    <Content Include="Content\themes\base\jquery.ui.theme.css" />
    <Content Include="Global.asax" />
    <Content Include="Content\Site.css" />
    <Content Include="Scripts\jquery-1.5.1-vsdoc.js" />
    <Content Include="Scripts\jquery-1.5.1.js" />
    <Content Include="Scripts\jquery-1.5.1.min.js" />
    <Content Include="Scripts\jquery-ui-1.8.11.js" />
    <Content Include="Scripts\jquery-ui-1.8.11.min.js" />
    <Content Include="Scripts\jquery.validate-vsdoc.js" />
    <Content Include="Scripts\jquery.validate.js" />
    <Content Include="Scripts\jquery.validate.min.js" />
    <Content Include="Scripts\modernizr-1.7.js" />
    <Content Include="Scripts\modernizr-1.7.min.js" />
    <Content Include="Web.config" />
    <Content Include="Web.Debug.config">
      <DependentUpon>Web.config</DependentUpon>
    </Content>
    <Content Include="Web.Release.config">
      <DependentUpon>Web.config</DependentUpon>
    </Content>
    <Content Include="Scripts\jquery.unobtrusive-ajax.js" />
    <Content Include="Scripts\jquery.unobtrusive-ajax.min.js" />
    <Content Include="Scripts\jquery.validate.unobtrusive.js" />
    <Content Include="Scripts\jquery.validate.unobtrusive.min.js" />
    <Content Include="Scripts\MicrosoftAjax.js" />
    <Content Include="Scripts\MicrosoftAjax.debug.js" />
    <Content Include="Scripts\MicrosoftMvcAjax.js" />
    <Content Include="Scripts\MicrosoftMvcAjax.debug.js" />
    <Content Include="Scripts\MicrosoftMvcValidation.js" />
    <Content Include="Scripts\MicrosoftMvcValidation.debug.js" />
    <Content Include="Views\Web.config" />
    <Content Include="Views\_ViewStart.cshtml" />
    <Content Include="Views\Shared\Error.cshtml" />
    <Content Include="Views\Shared\_Layout.cshtml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="Views\Remark\Index.cshtml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="packages.config" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="Views\User\Index.cshtml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="Views\User\New.cshtml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="Views\User\Edit.cshtml" />
  </ItemGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target> -->
  <Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
  </Target>
  <ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{349c5851-65df-11da-9384-00065b846f21}">
        <WebProjectProperties>
          <UseIIS>False</UseIIS>
          <AutoAssignPort>True</AutoAssignPort>
          <DevelopmentServerPort>3228</DevelopmentServerPort>
          <DevelopmentServerVPath>/</DevelopmentServerVPath>
          <IISUrl>
          </IISUrl>
          <NTLMAuthentication>False</NTLMAuthentication>
          <UseCustomServer>False</UseCustomServer>
          <CustomServerUrl>
          </CustomServerUrl>
          <SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile>
        </WebProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions>
</Project> 
```

* * *

**Visual Studio 版本详细信息**：

```
Microsoft Visual Studio 2010
Version 10.0.40219.1 SP1Rel
Microsoft .NET Framework
Version 4.0.30319 SP1Rel

Installed Version: Professional

Microsoft Visual Basic 2010   01018-532-2002102-70881
Microsoft Visual Basic 2010

Microsoft Visual C# 2010   01018-532-2002102-70881
Microsoft Visual C# 2010

Microsoft Visual F# 2010   01018-532-2002102-70881
Microsoft Visual F# 2010

Microsoft Visual Studio 2010 Team Explorer   01018-532-2002102-70881
Microsoft Visual Studio 2010 Team Explorer

Microsoft Visual Web Developer 2010   01018-532-2002102-70881
Microsoft Visual Web Developer 2010

Crystal Reports Templates for Microsoft Visual Studio 2010   
Crystal Reports Templates for Microsoft Visual Studio 2010

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2529927)   KB2529927
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2529927.

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2548139)   KB2548139
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2548139.

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2549864)   KB2549864
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2549864.

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2565057)   KB2565057
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2565057.

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2635973)   KB2635973
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2635973.

Hotfix for Microsoft Visual Studio 2010 Professional - ENU (KB2736182)   KB2736182
This hotfix is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this hotfix will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2736182.

Indent Guides   12.1
Indent Guides

Adds visual guides at each indentation level.

Microsoft Visual Studio 2010 Professional - ENU Service Pack 1 (KB983509)   KB983509
This service pack is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this service pack will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/983509.

MySQL Connector/Net   6.5.4
Data design and management tools for MySQL.  Copyright © 2007-2011 Oracle, Inc.

Security Update for Microsoft Visual Studio 2010 Professional - ENU (KB2645410)   KB2645410
This security update is for Microsoft Visual Studio 2010 Professional - ENU.
If you later install a more recent service pack, this security update will be uninstalled automatically.
For more information, visit http://support.microsoft.com/kb/2645410. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:13:21.420

从您的更新来看，该项目似乎是一个`MVC`项目。你有这个安装吗？

如果没有，请从这里安装：[http ://www.asp.net/mvc/mvc3](http://www.asp.net/mvc/mvc3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:15:22.763

原项目是用VS2012创建的，从格式版本来看，2010年打开一个2012项目需要VS2010 SP1，你有没有安装VS2010 SP1？

# objective-c - 如何通过两点Xcode绘制步行路线

> ID：15613428
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:02.957
> 
> 标签：objective-c, xcode, routes, cllocation, polyline

如何通过两点（起点和终点）绘制步行路线。我不会使用折线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:48:05.443

请查看以下教程[在两点之间绘制路线](http://sugartin.info/2011/10/12/drawing-route-on-google-map-mkmapview/)还查看[Apple 的 BreadCrumb 示例，](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010048-Intro-DontLinkElementID_2)希望对您有所帮助！

你不能在你的应用程序中使用谷歌方向。您可以这样做的唯一方法是将它们发送到谷歌地图应用程序，如下所示：

```
- (void)getDirections {
CLLocationCoordinate2D start = { (startLatitude), (startLongitude) };
CLLocationCoordinate2D end = { (endLatitude), (endLongitude) };

NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f&dirflg=w", start.latitude, start.longitude, end.latitude, end.longitude];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]]; 
```

}

# php - MySQL 存储：归档数据的最佳方式

> ID：15613431
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:12.590
> 
> 标签：php, mysql

我是 SQL 领域的新手。因此，我有一个工作问题的方式。

每周，我都会通过 pHp 代码从我的 MySQL 数据库中的 Excel 电子表格发送数据。这已经在起作用了。因此，我有一个可以更新的表。

实际上，我正在我的数据库中发送特定基础的价格。如下存档我的数据的最佳方法是什么。

在我的数据库中，我有以下结构：

```
tabe t_index
Label = VARCHAR(255)
Price = float
Date = date() 
```

假设我上周在我的数据库上发送了我的数据，因此我存储了：

```
Stock A
102.85
2013-03-18 
```

今天，我想发送相同的新价格`Stock A`，`103.54`但我想存档并保留`102.85`价格，以便能够在两个价格之间获得一些回报或任何东西。

我应该如何进行？

我希望我的问题不会太混乱...谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:16:49.540

这样做的一种方法是，创建一个 UPDATE 触发器，将旧值插入另一个表中。因此，当您更新现有条目时，旧数据将被复制/存档到另一个表中。

```
CREATE TABLE t_index_archive (
Label VARCHAR(255),
Price float,
Date datetime); 
```

现在在您现有的表上创建一个触发器

```
DROP TRIGGER IF EXISTS archive_t_index;
DELIMITER $$
CREATE DEFINER = CURRENT_USER TRIGGER archive_t_index BEFORE UPDATE ON t_index
     FOR EACH ROW BEGIN 
          INSERT INTO t_index_archive VALUES (OLD.Label, OLD.Price, OLD.Date);
     END;
$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:21:26.123

您可以添加另一列名为`is_active`ENUM 类型的值`active,inactive`

默认情况下`is_active`的值将是`'active'`

当您在数据库中输入新条目时，只需更新旧条目`is_active`，`'inactive'`然后添加新条目

使用 where 子句查询获取新数据`WHERE is_active='active'`

# r - 是否有相当于 Knitr 中的 \Sinput{} 命令？

> ID：15613432
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:14.323
> 
> 标签：r, knitr

如何在我的 Rnw 文件中插入格式化为 \begin{Sinput} ... \end{Sinput} 的单个 R 命令（例如，summary()）？

# excel - Excel 时间计算仅基于一列？

> ID：15613434
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:30.577
> 
> 标签：excel, time

我有一个有时间列的 excel 表。我想计算总时间。excel 列如下所示：

时间：

2:14:53、2:15:53、2:16:53、2:19:53、2:29:53、2:41:53、2:59:53

现在我想在不添加任何额外列或其他内容的情况下计算总时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:18:12.487

如果时间是时间戳并且您只对第一个和最后一个条目之间的增量感兴趣，只需使用`=A7-A1`- 这将返回增量。如果它跨越多天并且您只对“手表上”的增量感兴趣，请使用`=MOD(A7-A1,1)`. 请注意，有时结果可能会显示为正常的数值（在此示例中`0.03125`，而不是`0:45:00`）。在这种情况下，只需将格式更改为时间。

如果您正在谈论单圈时间并且想要总结它们，您可以简单地使用`SUM`公式来执行此操作：`=SUM(A1:A7)`将返回总时间。

这是您的示例： ![在此处输入图像描述](../Images/c4f06d5dc4754f731ebcfa76040d564f.png)

# linq - 实体框架中的递归选择

> ID：15613435
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:31.823
> 
> 标签：linq, entity-framework, recursion

我有一个类 Activity 可以有几个与之关联的活动（列表）。如果选择了一个父活动，如何使用 Fluent API 配置我的类以加载所有其他子活动？这是我的活动域类：

```
public class Activity : ProjectBase
{
    private string activityType;

    public string ActivityType
    {
        get { return activityType; }
        set { activityType = value; }
    }

    private string catagory;

    public string Catagory
    {
        get { return catagory; }
        set { catagory = value; }
    }

    private string priority;

    public string Priority
    {
        get { return priority; }
        set { priority = value; }
    }

    public Activity()
        :base()
    {

    }
} 
```

ProjectBase 声明了 List 属性。我的数据库是按照每个层次结构的表生成的，并且 Activity 的表似乎可以很好地递归生成。任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:59:46.030

我所要做的就是将 virtual 放在列表中，它带来了所有相关记录：

```
 private List<Activity> activities = new List<Activity>();

    public virtual List<Activity> Activities
    {
        get { return activities; }
        set { activities = value; }
    } 
```

感谢人们的帮助！

# facebook - Facebook php sdk - 未显示信息

> ID：15613438
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:36.863
> 
> 标签：facebook, login

我从 github（developers.facebook.com 提供的链接）下载了 php sdk。我在根目录上传了 src 文件夹。现在，我粘贴了代码并将 appId 和 secret 替换为我的。但是页面显示服务器错误。以下是我的代码：-

```
<?php
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<title>php-sdk</title>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

    <h3>Public profile of Naitik</h3>
    <img src="https://graph.facebook.com/naitik/picture">
    <?php echo $naitik['name']; ?>
  </body>
</html> 
```

请帮我。我非常需要一些帮助。除了 app id 和 secret 之外，我找不到任何错误，也没有修改代码的任何部分。facebook.php 文件仅在 src 文件夹中。[你可以在http://beta.jokesnfunnypics.com/login](http://beta.jokesnfunnypics.com/login)找到我的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:16:09.177

问题可能是您缺少 php Curl 扩展

Facebook PHP SDK 使用 Curl 发送请求。

所以首先你需要检查你的服务器上是否安装了 CURL 扩展

像这样

```
function _isCurl(){
    return function_exists('curl_version');
} 
```

如果不安装它，那么一切都会工作

# php - 在下一页显示组合框的文本

> ID：15613442
> 
> 赞同：0
> 
> 时间：2013-03-25T11:08:47.727
> 
> 标签：php, combobox

如何在我已经完成的另一页中显示组合框的文本，任何人都可以引导我找到正确的答案

```
<select style="width:155px" name="subcategory" id="Ultra" onchange="run()">  <!--Call    run() function-->
<option value="0">Select</option>
<option value="<?=$oneYearOn?>">Employee</option>
<option value="<?=$oneYearOn1?>">Temporary</option>
</select>
<?php
$oneYearOn = date('Y-m-d',strtotime(date("Y-m-d", mktime()) . " + 7300 day"));
//echo $oneYearOn;
$oneYearOn1=date('Y-m-d',strtotime(date("Y-m-d", mktime()) . " + 40day"));
//echo $oneYearOn1;
?>
<td>Expiry date</td>
                    <td><input name="expirydate" type="text" id="srt"><br></td>
 function run() {
 document.getElementById("srt").value = document.getElementById("Ultra").value;
}

function up() {

//if (document.getElementById("srt").value != "") {
    var dop = document.getElementById("srt").value;
//}
pop(dop);

}

function pop(val) {
alert(val);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:13:25.027

```
 <form action="destinationpage.php" method="get/post">
 <select style="width:155px" name="subcategory" id="Ultra" onchange="run()">  <!--Call      run() function-->
<option value="0">Select</option>
<option value="<?=$oneYearOn?>">Employee</option>
<option value="<?=$oneYearOn1?>">Temporary</option>
</select>
</form>
 function run() {
 document.getElementById("srt").value = document.getElementById("Ultra").value;
}

function up() {

//if (document.getElementById("srt").value != "") {
   var dop = document.getElementById("srt").value;
//}
pop(dop);

  }

function pop(val) {
alert(val);
 } 
```

在另一页

```
<?php

echo $_POST['subcategory']; //or
echo $_GET['subcategory'];
?> 
```

或者你也可以使用会话变量来存储和检索..

# sql - MS Access：在更新中使用 dense_rank

> ID：15613450
> 
> 赞同：1
> 
> 时间：2013-03-25T11:09:15.613
> 
> 标签：sql, ms-access, sql-update, dense-rank

我有一个排名表，包含不同等级的分数：

```
(R)  Rankname:  string, name of the rank
(ID) PlayerID:  foreign key(int)
(S)  Score:     integer, higher score means higher endrank
(P)  Position:  integer, representing the location in the rank 
```

更新前：

```
 R    ID   S    P
'a'   0    5   "undefined"
'a'   1   10   "undefined"
'a'   2   15   "undefined"
'b'   0    5   "undefined"
'b'   1   10   "undefined"
'b'   2   10   "undefined"
'b'   3   15   "undefined" 
```

更新后：

```
'a'   0    5    3
'a'   1   10    2
'a'   2   15    1
'b'   0    5    3
'b'   1   10    2
'b'   2   10    2
'b'   3   15    1 
```

我试图进行一个使用`UPDATE`as well的查询，`DENSE_RANK`但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:38:31.213

这取决于创建查询以计算不同记录，在示例中，此查询称为 qry。要更新您的表格，您可以说：

```
UPDATE MyTable 
SET MyTable.P = 
  DCount("*","qry","s<=" & [MyTable].[s] & " and r=""" & [MyTable].[r] & """"); 
```

还有一点需要注意，这是qry：

```
SELECT DISTINCT z.r, z.s
FROM MyTable AS z; 
```

MyTable 是别名。

# python - django session.objects.filter 给出静态数据

> ID：15613451
> 
> 赞同：1
> 
> 时间：2013-03-25T11:09:17.637
> 
> 标签：python, django

我已经调试了半天了......有人有想法吗？

我写了一个 python 脚本来监控活动会话，发现这个：

```
sessions = Session.objects.filter(expire_date__gte=datetime.now())
for session in sessions:
    data = session.get_decoded()
    id = data.get('_auth_user_id', None)
    ses = session.session_key
    if id:
        name = User.objects.get(id=id) 
```

给出了很好的清单...好的。但是——如果用户注销或登录，上面的代码不会反映更改。它只是不断重复原始的、过时的列表。

有缓存问题吗？不要想——禁用memcached，没有变化。尝试了基于文件和内存缓存的会话存储——奇怪的结果：上面的代码似乎读取了基于 db 的会话存储。

所以，我怀疑 1.4.3 的初始化是不正确的——因为似乎有各种初始化环境的方法。我相信1.4。不需要将环境变量 DJANGO_SETTINGS_MODULE 设置为应用程序。

接下来，如果这不能解决..必须使用基于文件的会话存储并轮询目录..这似乎是实时的并且正在运行:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:11:07.020

您的问题是由事务隔离引起的。默认情况下，与数据库的每个连接都在事务中运行。通常，这相当于一个视图，事务中间件负责打开和关闭事务。在独立脚本中，您需要[自己管理它](https://docs.djangoproject.com/en/1.5/topics/db/transactions/)。

# php - 尽管进行了配置，NginX 在 60 秒后仍发出 HTTP 499 错误。（PHP 和 AWS）

> ID：15613452
> 
> 赞同：57
> 
> 时间：2013-03-25T11:09:17.960
> 
> 标签：php, http, nginx, amazon-web-services

上周末，我注意到我的一个中型 AWS 实例存在问题，如果请求花费超过 60 秒，Nginx 总是返回 HTTP 499 响应。被请求的页面是一个 PHP 脚本

我花了几天时间试图找到答案，并尝试了我在互联网上可以找到的所有内容，包括 Stack Overflow 上的几个条目，但没有任何效果。

我试过修改 PHP 设置、PHP-FPM 设置和 Nginx 设置。你可以看到我周五在 NginX 论坛上提出的一个问题（[http://forum.nginx.org/read.php?9,237692](http://forum.nginx.org/read.php?9,237692)）虽然没有收到任何回复，所以我希望我能找到一个在我被迫搬回 Apache 之前在这里回答，我知道它可以正常工作。

这**与**其他条目中报告的 HTTP 500 错误不同。

我已经能够使用 PHP 5.4.11 复制一个新的 NginX 微型 AWS 实例的问题。

为了帮助任何希望看到实际问题的人，我将带您完成我为最新的 Micro 测试服务器运行的设置。

您需要使用 AMI ami-c1aaabb5 启动一个新的 AWS Micro 实例（因此它是免费的）

这个 PasteBin 条目具有完整的设置，可以运行以镜像我的测试环境。最后你只需要在 NginX 配置中更改*example.com*

[http://pastebin.com/WQX4AqEU](http://pastebin.com/WQX4AqEU)

设置完成后，您只需要创建我正在测试的示例 PHP 文件，该文件是

```
<?php
sleep(70);
die( 'Hello World' );
?> 
```

将其保存到 webroot 中，然后进行测试。如果您使用 php 或 php-cgi 从命令行运行脚本，它将起作用。如果您通过网页访问脚本并跟踪访问日志*/var/log/nginx/example.access.log*，您会注意到您在 60 秒后收到 HTTP 1.1 499 响应。

现在您可以看到超时了，​​我将通过我对 PHP 和 NginX 所做的一些配置更改来尝试解决这个问题。对于 PHP，我将创建几个配置文件，以便可以轻松禁用它们

**更新 PHP FPM 配置以包含外部配置文件**

```
sudo echo '
include=/usr/local/php/php-fpm.d/*.conf
' >> /usr/local/php/etc/php-fpm.conf 
```

**创建一个新的 PHP-FPM 配置以覆盖请求超时**

```
sudo echo '[www]
request_terminate_timeout = 120s
request_slowlog_timeout = 60s
slowlog = /var/log/php-fpm-slow.log ' >
/usr/local/php/php-fpm.d/timeouts.conf 
```

**更改一些全局设置以确保紧急重启间隔为 2 分钟**

```
# Create a global tweaks
sudo echo '[global]
error_log = /var/log/php-fpm.log
emergency_restart_threshold = 10
emergency_restart_interval = 2m
process_control_timeout = 10s
' > /usr/local/php/php-fpm.d/global-tweaks.conf 
```

接下来，我们将更改一些 PHP.INI 设置，再次使用单独的文件

```
# Log PHP Errors
sudo echo '[PHP]
log_errors = on
error_log = /var/log/php.log
' > /usr/local/php/conf.d/errors.ini

sudo echo '[PHP]
post_max_size=32M
upload_max_filesize=32M
max_execution_time = 360
default_socket_timeout = 360
mysql.connect_timeout = 360
max_input_time = 360
' > /usr/local/php/conf.d/filesize.ini 
```

如您所见，这将套接字超时时间增加到 3 分钟，并有助于记录错误。

最后，我将编辑一些 NginX 设置以增加超时的那一侧

首先我编辑文件*/etc/nginx/nginx.conf*并将其添加到 http 指令 fastcgi_read_timeout 300;

接下来，我编辑我们之前创建的文件*/etc/nginx/sites-enabled/example*（请参阅 pastebin 条目）并将以下设置添加到**服务器**指令中

```
client_max_body_size    200;
client_header_timeout   360;
client_body_timeout     360;
fastcgi_read_timeout    360;
keepalive_timeout       360;
proxy_ignore_client_abort on;
send_timeout            360;
lingering_timeout       360; 
```

最后，我将以下内容添加到服务器目录的*location ~ .php$*部分

```
fastcgi_read_timeout 360;
fastcgi_send_timeout 360;
fastcgi_connect_timeout 1200; 
```

在重试脚本之前，启动 nginx 和 php-fpm 以确保新设置已被拾取。然后我尝试访问该页面，但仍然在 NginX example.error.log 中收到 HTTP/1.1 499 条目。

那么，我哪里错了？当我将 PHP 的最大执行时间设置为 2 分钟时，这仅适用于 apache。

我可以看到通过从 Web 可访问页面运行**phpinfo()**已获取 PHP 设置。我只是不明白，我实际上认为增加了太多，因为它应该只需要在 server->location 指令中更改 PHP 的*max_execution_time*、*default_socket_timeout*以及 NginX 的*fastcgi_read_timeout 。*

## 更新 1

进行了一些进一步的测试以表明问题不在于客户端正在死去，我已将测试文件修改为

```
<?php
file_put_contents('/www/log.log', 'My first data');
sleep(70);
file_put_contents('/www/log.log','The sleep has passed');
die('Hello World after sleep');
?> 
```

如果我从网页运行脚本，那么我可以看到文件的内容被设置为第一个字符串。60 秒后，错误出现在 NginX 日志中。10 秒后，文件内容变为第二个字符串，证明 PHP 正在完成该过程。

## 更新 2

设置**fastcgi_ignore_client_abort ；**确实将响应从 HTTP 499 更改为 HTTP 200，但仍然没有任何内容返回给最终客户端。

## 更新 3

将 Apache 和 PHP (5.3.10) 直接安装到盒子上（使用 apt），然后增加执行时间，问题似乎也发生在 Apache 上。症状与现在的 NginX 相同，是 HTTP200 响应，但实际客户端连接提前超时。

我也开始注意到，在 NginX 日志中，如果我使用 Firefox 进行测试，它会发出双重请求（就像这个[PHP 脚本在超过 60 秒时执行两次](https://stackoverflow.com/questions/13261327/php-script-executes-twice-when-longer-than-60-seconds)）。虽然这似乎是客户端在脚本失败时请求

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-25T17:37:28.930

问题的原因是 AWS 上的弹性负载均衡器。默认情况下，它们会在 60 秒不活动后超时，这就是导致问题的原因。

所以不是 NginX、PHP-FPM 或 PHP，而是负载均衡器。

要解决此问题，只需进入 ELB“描述”选项卡，滚动到底部，然后单击“空闲超时：60 秒”值旁边的“（编辑）”链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T16:13:34.693

我想我会留下我的两分钱。首先，问题与 php 无关（仍然可能与 php 相关，php 总是让我感到惊讶：P）。这是肯定的。它主要是由代理到自身的服务器引起的，更具体地说是主机名/别名问题，在您的情况下，它可能是负载均衡器正在请求 nginx，而 nginx 正在回调负载均衡器并且它一直这样。

我在nginx 作为负载均衡器和 apache 作为 webserver/proxy 时遇到过**类似的问题**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T10:18:12.677

实际上我在一台服务器上遇到了同样的问题，我发现在 nginx 配置更改后我没有重新启动 nginx 服务器，所以每次点击 nginx url 我都会收到 499 http 响应。nginx 重新启动后，它开始使用 http 200 响应正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-18T14:18:18.887

就我而言 - nginx 正在向 AWS ALB 发送请求并获得 499 状态码的超时。

解决方案是添加这一行：

`proxy_next_upstream off;`

在当前版本的 nginx 中，默认值是`proxy_next_upstream error timeout;`- 这意味着在超时时它会尝试下一个“服务器” - 在 ALB 的情况下，它是已解析 ips 列表中的下一个 IP。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T14:18:58.610

您需要找到问题所在的位置。我不知道确切的答案，但让我们试着找到它。

我们这里有 3 个元素：nginx、php-fpm、php。正如你所说，apache下的相同php设置是可以的。是不是一样的设置？您是否在同一操作系统/主机/等上尝试使用 apache 而不是 nginx？

如果我们看到，那个 php 不是可疑的，那么我们有两个可疑的：nginx 和 php-fpm。

要排除 nginx：尝试在 ruby​​ 上设置相同的“系统”。请参阅[https://github.com/garex/puppet-module-nginx](https://github.com/garex/puppet-module-nginx)以了解安装最简单的 ruby​​ 设置。或者使用谷歌（可能会更好）。

我的主要嫌疑人是 php-fpm。

尝试使用以下设置：

*   php-fpm 的 request_terminate_timeout
*   nginx`s fastcgi_ignore_client_abort

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-04-04T07:24:11.677

不知道是否有其他人遇到过这个问题，但对我来说，它发生在我`/`在实例 url 末尾加上一个之后。这给出了**499**错误，只有在我删除之后`/`，它给了我 200 并且一切顺利。

# java - Android 流式传输 MSMPEG-4 V3 视频

> ID：15613453
> 
> 赞同：1
> 
> 时间：2013-03-25T11:09:20.417
> 
> 标签：java, android, video, stream

我有一个摄像头，可以流式传输 application/x-mplayer2 类型的视频，格式：MSMPEG-4 V3 Video。当我尝试使用 android 打开流时，它会引发错误：“抱歉，无法播放此视频。”。我尝试用这个流式传输：

```
private void playVideo() {
            try {
                final String path = "http://82.140.132.217:8001";
                System.out.println("path --> "+path);
                Log.v(TAG, "path: " + path);
                if (path == null || path.length() == 0) {
                    Toast.makeText(MainActivity.this, "File URL/path is empty",
                            Toast.LENGTH_LONG).show();

                } else {
                    // If the path has not changed, just start the media player
                    if (path.equals(current) && mVideoView != null) {
                        mVideoView.start();
                        mVideoView.requestFocus();
                        return;
                    }
                    current = path;
                    System.out.println("Current path --> "+path);
                    mVideoView.setVideoPath(getDataSource(path));
                    mVideoView.start();
                    mVideoView.requestFocus();

                    System.out.println("end try in play");

                } 
            } catch (Exception e) {
                Log.e(TAG, "error: " + e.getMessage(), e);
                if (mVideoView != null) {
                    mVideoView.stopPlayback();
                }
            }
        } 
```

如何流式传输此类视频？或者有什么方法可以将视频流转换为另一种类型？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:53:48.890

`application/x-mplayer2`不是视频格式，这里是 android 支持的视频格式和流的列表**[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)**。一旦您知道相机的实际格式和流类型，如果它不是兼容格式，您可以使用[FFMPEG](https://github.com/tito/ffmpeg-android "FFMPEG")转换该流。

# javascript - 如何检测 DOM 节点插入？

> ID：15613454
> 
> 赞同：0
> 
> 时间：2013-03-25T11:09:23.703
> 
> 标签：javascript, jquery, dom, onchange

我需要检测 DOM 更改（尤其是在添加 DOM 元素时）。
这样可以在 Chrome、Firefox、IE9+ 中调用方法

假设我们有一个动态添加 li 的按钮，如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>
<input id="btn" type="submit" value="Add Item"> 
<ul/>
<script type="text/javascript">
    $("#btn").click(function(){
        $("<li />").html("item").appendTo("ul");
    })
</script> 
```

我需要类似的东西来检测 li 添加例如：

```
onDomChange(function(){ 
    alert("DOM changed !");
}); 
```

我已经实现了这个解决方案：http: [//jsfiddle.net/Lcybj/](http://jsfiddle.net/Lcybj/)
但它只适用于 Chrome。

**如何实现在 3 个浏览器上工作的解决方案？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:11:47.267

有一些事件，但我认为并非所有浏览器都支持它们。看看这个（行突变）：[WIKI DOM EVENTS](http://en.wikipedia.org/wiki/DOM_events#Common.2FW3C_events)

# templates - 如何向 Ember 模板添加视图以便注入其控制器

> ID：15613458
> 
> 赞同：0
> 
> 时间：2013-03-25T11:09:41.453
> 
> 标签：templates, dependency-injection, controller, ember.js, handlebars.js

我正在使用以下内容向模板添加视图：

```
{{view NewsCMS.NewsItemView itemBinding="news_item" class="news-item" }} 
```

**似乎 Ember 不会自动注入它的控制器，那么我应该如何将控制器注入到这个视图中呢？**

我设置了一个控制器：

```
NewsCMS.NewsItemController = Ember.ObjectController.extend({

  someAction: function() {
    console.log("CLICKED");
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:36:09.630

使用 {{render}} 助手而不是 {{view}} 助手来自动设置控制器上下文：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib /helpers/render.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/helpers/render.js)

# visual-studio-2010 - 添加 Web 部件时出错

> ID：15613462
> 
> 赞同：0
> 
> 时间：2013-03-25T11:09:50.853
> 
> 标签：visual-studio-2010, sharepoint-2010, visual-studio-2012, web-parts, sharepoint-2013

我正在使用 VS2012 在 Sharepoint 2013 中开发一个 webpart。在这个 webpart 中，我使用了我创建的自定义 dll。库框架是 4.0，可视化 webpart 框架是 4.5。

问题是当我在 sharepoint 页面中添加 webpart 时，出现以下错误：

```
Could not load file or assembly 'RulesDll, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d2371e81bc184aa5' or one of its dependencies. The system cannot find the file specified 
```

在谷歌搜索我发现了很多解决这个问题的解决方案

*   使用两种方法将库添加到 GAC。

    (1) gacutil -i RulesDll.dll

    （2）使用包--->VS2012解决方案资源管理器中的高级选项

![在此处输入图像描述](../Images/bc95ec329f412cef689b0fa8ed0ce23d.png)

当我在 VS 命令提示符下运行 gacutil -l RulesDll 时，一切正常：

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:
  RulesDll, Version=1.0.0.0, Culture=neutral, PublicKeyToken=d2371e81bc184aa5,    processorArchitecture=x86 
```

项目数 = 1

所以图书馆在GAC 中。

*   将库添加到 web.config 中的保存控件

但没有任何效果。有人知道为什么无法在共享点页面中添加我自己的 Web 部件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:31:14.527

一旦您的程序集在 GAC 中并且您尝试在页面上添加 Web 部件，您会遇到什么错误？

检查您的应用程序的 web.config，尤其是 SafeControls 部分，应该有对您的程序集的引用。

[http://technet.microsoft.com/en-us/library/cc261736.aspx](http://technet.microsoft.com/en-us/library/cc261736.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:01:13.230

终于找到错误了。所有库都必须部署在 x64 中

# macos - Qt 字体 OS X 和 FontBook

> ID：15613466
> 
> 赞同：3
> 
> 时间：2013-03-25T11:10:11.317
> 
> 标签：macos, qt, fonts

我在使用 Qt 库时注意到了这个问题，但老实说，我发现这是一个全球性的 OS X 问题。我有一个音乐字体，比如经典的 Petrucci.ttf 或 Marl.ttf...当我使用 QPainter::drawText() 函数放置字符时，我只能看到标准字母。

使用亚洲字体或其他符号字体也会发生这种情况。在 Windows 上编译的相同 Qt 代码可以以正确的方式呈现字体。因此，例如，字母“a”是一个音符或一个停顿，或一个谱号......

在 Mac 中，字母“a”仍然是“a”。

奇怪的是，如果我在 Font Book 中打开字体，字体会正确呈现。所以我也尝试在 OpenOffice、Pages 或 TextEdit 上使用它。Always on Mac 符号字体正常呈现，键入的字母仍然是字母。

你有什么建议吗？？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:22:44.597

好的，我找到的一个答案是检查整个字体图并获取感兴趣范围的 unicode 值。例如，我使用的字体是 0xf021-0xf0fb，所以，你可以画一个像这样的非文本符号：

```
char c = 0xf021;
QString str = QString( QChar( c ) ); 
painter.drawText( 10, 10, str ); 
```

# java - 注销 Servlet 中的会话无效

> ID：15613469
> 
> 赞同：13
> 
> 时间：2013-03-25T11:10:47.440
> 
> 标签：java, jsp, servlets

```
HttpSession session  = request.getSession();
try
{      
    session.removeAttribute("logonSessData");
    session.invalidate();                               
    String pageToForward = request.getContextPath();
    response.sendRedirect(pageToForward);           
}
catch (Exception sqle)
{
    System.out.println("error UserValidateServlet message : " + sqle.getMessage());
    System.out.println("error UserValidateServlet exception : " + sqle);
} 
```

`doPost`在注销 servlet 中，我在和`doGet`方法中编写了上面的代码。注销后它会显示登录屏幕，然后如果我按下返回按钮，它会显示注销前的前一个屏幕，然后如果我点击任何页面，它会显示“HTTP Status 500”，现在如果我按下`F5`它就会加热登录 Servlet 并获得完全访问权限用户。

如何停止此问题显示使用后退按钮注销后`F5`用户无法使用任何页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:18:30.173

你在做什么是好的。浏览器正在缓存以前的页面，当您单击返回按钮时，它会转到上一个缓存的页面。

您需要添加不允许浏览器缓存页面的缓存标头。

```
Cache-Control: no-cache 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T11:24:25.603

1）当您单击浏览器上的后退按钮时，由于浏览器缓存，您将获得上一页。

2）当您在支持后单击任何页面时，您将获得状态 500，因为由于会话对象已经无效而出现空指针异常。

3）当您刷新新请求将发送到您的 servlet 或 JSP 时，您正在调用`request.getSession();`方法，该方法正在为您创建新的会话对象。

因此，您将再次获得对所有页面的完全访问权限。

为避免此问题，您可以按照以下步骤操作。

1）在应用程序中创建一个servlet Ex：`LoginCheckerServlet`

2）对于上面的 servlet 给出 url 模式 /*

3）所以servlet将对所有请求执行

4）现在`LoginCheckerServlet`检查请求参数中的用户名和密码

5）如果他们来了，请执行登录检查操作并显示欢迎页面

6）如果用户名密码不来，有两种含义

```
 i)user is already logged in 

    ii)user is trying to access your app illegally 
```

7）现在调用`request.getSession(false);`将为您提供会话对象的方法是该用户已经存在会话，因此您可以重定向到信任用户的欢迎页面。

8)`request.getSession(false);`如果此用户不存在会话，将为您提供 null 值。

9）如果你在请求参数中没有得到用户名和密码，并且`request.getSession(false);`给你空值意味着用户试图在没有登录的情况下访问你的应用程序，现在你可以愉快地显示被禁止的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:24:46.033

在每个 servlet 中，检查 Session 是否为空。如果 session 不为空，那么只做请求处理，否则重定向到登录页面。

```
HttpSession session  = request.getSession();

if(Session !=null)
{
try
{      
    // acutal servlet actions

}else
{

  // redirect to login page

 } 
```

如果您在上面的代码中为会话添加空检查，那也很好。

```
HttpSession session  = request.getSession();
if(session !=null)
try
{      
    session.removeAttribute("logonSessData");
    session.invalidate();                               
    String pageToForward = request.getContextPath();
    response.sendRedirect(pageToForward);           }
catch (Exception sqle)
{
    System.out.println("error UserValidateServlet message : " + sqle.getMessage());
    System.out.println("error UserValidateServlet exception : " + sqle);
}
}else
{
  //session already null/ expired
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-25T11:16:36.303

您需要做的是将会话设置为基于会话的属性。

`request.getSession().setAttribute("sess",request.getSession());`

使用它与当前会话进行比较。如果此比较失败，则重定向到登录页面。这应该在每个页面中完成。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-06-13T12:28:36.033

这将创建一个新会话

```
HttpSession ss = request.getSession(true); //creates a new session.
  if(ss.isNew()){
    ss.invalidate();  //this clears the session
    ss = request.getSession(true); // creates a new session 
    } 
```

# excel - 包含 COUNTIFS 的宏在移动到另一台计算机时返回 0

> ID：15613470
> 
> 赞同：1
> 
> 时间：2013-03-25T11:11:02.503
> 
> 标签：excel, vba

下面是一个示例代码，当将其复制到另一台具有相同版本 excel 的计算机时，我得到了零。

```
i = Application.WorksheetFunction.CountIfs(.Range(.Cells(2, resolve_date), .Cells(lastrow, resolve_date)), ">=" & date1, _
      .Range(.Cells(2, resolve_date), .Cells(lastrow, resolve_date)), "<=" & date2, .Range(.Cells(2, Planned_release), .Cells(lastrow, Planned_release)), rel) 
```

在我编码的计算机上运行时相同，它返回非零值（预期），这可能是什么原因？

# java - Solr：搜索结果不一致

> ID：15613472
> 
> 赞同：4
> 
> 时间：2013-03-25T11:11:09.677
> 
> 标签：java, solr, solrj, lucene

我在 Solr 中遇到特定关键字的搜索结果不一致。

行为：

例如，关键字是“音乐”，并有 3 个包含此关键字的索引文档。

[使用 URL“ http://abc.xyz.com:8983/solr/core3/select/?q=music](http://abc.xyz.com:8983/solr/core3/select/?q=music) ”使用此关键字执行搜索，当我们再次点击它时它将给出单个文档，它将返回所有三个索引文档。我们再次点击它将返回单个文档。这就是不一致的行为如何持续发生。

我无法想到是什么导致了这个问题。

是 Solr 缓存吗？它与其他 Solr 配置有关吗？

Solr 版本：3.6.1

来自 solrconfig.xml 的重要配置

```
<requestHandler name="/select" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="echoParams">explicit</str>
        <int name="rows">50</int>
        <str name="df">keywords</str>
    </lst>
</requestHandler>
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">db-data-config-xsl.xml</str>
    </lst>  
</requestHandler>

<filterCache class="solr.FastLRUCache" size="512" initialSize="512" autowarmCount="0"/>
<queryResultCache class="solr.LRUCache" size="512" initialSize="512" autowarmCount="0"/> 
```

架构.xml

```
 </analyzer>
    </fieldType>
    <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="date" class="solr.TrieDateField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="text" class="solr.TextField" positionIncrementGap="100">

        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.SnowballPorterFilterFactory" language="English"/>
        </analyzer>
    </fieldType>
    <fieldType name="shingleString" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
        <analyzer type="index">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>

            <filter class="solr.PositionFilterFactory" />
        </analyzer>
    </fieldType>
    <fieldType name="facet_tex" class="solr.TextField" sortMissingLast="true" omitNorms="true">
        <analyzer>

            <tokenizer class="solr.KeywordTokenizerFactory"/>   
            <filter class="solr.LowerCaseFilterFactory" />
            <!-- The TrimFilter removes any leading or trailing whitespace -->
            <filter class="solr.TrimFilterFactory" />        
            <!--filter class="solr.PatternReplaceFilterFactory"  pattern="([^a-z])" replacement="" replace="all"   /-->
        </analyzer>
    </fieldType>

    <fieldType name="facet_comma" class="solr.TextField" sortMissingLast="true" omitNorms="true">
        <analyzer>
            <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>

            <filter class="solr.LowerCaseFilterFactory" />
            <!-- The TrimFilter removes any leading or trailing whitespace -->
            <filter class="solr.TrimFilterFactory" />   
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>             
            <!--filter class="solr.PatternReplaceFilterFactory"  pattern="([^a-z])" replacement="" replace="all"   /-->
        </analyzer>
    </fieldType>

        <fieldType name="text_auto" class="solr.TextField">
            <analyzer>
                <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>
                <filter class="solr.LowerCaseFilterFactory"/>
                <filter class="solr.TrimFilterFactory" />  
                <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="25" side="front" />
            </analyzer>
        </fieldType>

    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />

            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>
    <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="," replacement=" "/>

            <tokenizer class="solr.WhitespaceTokenizerFactory"/>

            <filter class="solr.LowerCaseFilterFactory"/>

        </analyzer>
        <analyzer type="query">
            <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="," replacement=" "/>

            <tokenizer class="solr.WhitespaceTokenizerFactory"/>

            <filter class="solr.LowerCaseFilterFactory"/>

        </analyzer>
    </fieldType>
    <fieldType name="text_en_comma" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">

            <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="," replacement=" "/>

            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.TrimFilterFactory" />

            <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true" />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>

        </analyzer>
        <analyzer type="query">

            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"                />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>

        </analyzer>
    </fieldType>

    <fieldType name="alphaOnlySort" class="solr.TextField" sortMissingLast="true" omitNorms="true">
        <analyzer>
            <tokenizer class="solr.KeywordTokenizerFactory"/>

            <filter class="solr.LowerCaseFilterFactory" />

            <filter class="solr.TrimFilterFactory" />

            <filter class="solr.PatternReplaceFilterFactory"
            pattern="([^a-z])" replacement="" replace="all"/>
        </analyzer>
    </fieldType>
    <fieldType name="text_en_suggest" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
        <analyzer type="index">
            <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>
            <filter class="solr.TrimFilterFactory" />
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true" />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>
            <filter class="solr.TrimFilterFactory" />
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
        </analyzer>
    </fieldType>
</types>

<fields>   

    <field name="section"     type="string"    indexed="true"  stored="true"  multiValued="false" /> 
    <field name="url"    type="string"    indexed="false"  stored="true"  multiValued="false" /> 
    <field name="title"    type="string"    indexed="true"  stored="true"  multiValued="false" /> 
    <field name="description"     type="string"    indexed="true"  stored="true"  multiValued="false" /> 
    <field name="keywords"     type="text_en_comma"    indexed="true"  stored="true"  multiValued="true" /> 
    <field name="category"    type="facet_comma"    indexed="true"  stored="true"  multiValued="false" />  
    <field name="robots"    type="string"    indexed="true"  stored="true"  multiValued="false" />  
    <field name="keywords_suggest"     type="text_en_suggest"    indexed="true"  stored="true"  multiValued="true" /> 

</fields>

<copyField source="keywords" dest="keywords_suggest"/>

<uniqueKey>title</uniqueKey>

<defaultSearchField>keywords</defaultSearchField>

<solrQueryParser defaultOperator="AND"/> 
```

如果有人可以指导将不胜感激。

谢谢， 巴韦什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:40:01.167

检查你的参数[timeAllowed](http://wiki.apache.org/solr/CommonQueryParameters#timeAllowed)，它可以在 solrconfix.xml 的一些处理程序中描述

还有问题：你的索引有多大？文档如何，最好查看您的 solrconfix.xml 和 scheme.xml 文件。

# c# - IIS/SQL Server 连接错误

> ID：15613473
> 
> 赞同：27
> 
> 时间：2013-03-25T11:11:11.303
> 
> 标签：c#, asp.net, sql-server-2008, iis

我正在做一个示例代码，但遇到了一个非常奇怪的行为，我正在尝试使用此连接字符串连接到 SQL Server

```
"Data Source=" + ServerName + "." + DomainName  + ";Initial Catalog="+DBName+";Integrated Security = false;Persist Security Info=false;User ID=sa;Password=" & Mypassword & ";Connection Timeout=90" 
```

显然我没有使用 Windows 集成身份验证或 (SSPI)，当我在 Web 应用程序上使用它时，我收到此错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

请注意，我创建了一个 .Net 应用程序，该应用程序使用相同的连接字符串，并从 IIS 所在的计算机运行，并且工作正常。

以下是我已完成的步骤：

1.  我检查了打开它的 SQL 客户端配置并启用了协议 tcp 和命名管道。

2.  我在 IIS 上进行了模拟并使用了 Windows 身份验证，并确保 IIS 使用与我相同的凭据工作。

3.  我使用 Wireshark 来查看 wut 是两个连接之间的区别，我无法理解输出，但是从 IIS 看来，它总是尝试使用 Windows 身份验证，尽管我已经清楚地制作了字符串，使其不使用 Windows身份验证基本上会发生在连接开始时的一些协商，这两个应用程序“not_defined_in_RFC4178@please_ignore”似乎相同，然后 IIS 总是转到 NTLMSSP，指出我的用户除了通过用户名外无权访问数据库和密码，因此与 IIS 的协商失败，而它通常从应用程序成功。

我的问题是如何解决这个问题，我假设有一些配置要求 IIS 中的任何 SQL 客户端都使用 Windows 身份验证，但我不知道在哪里或如何禁用它

我注意到我没有使用`web.config`SQL Server 连接字符串的配置，这个问题发生在 IIS7 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-25T13:24:24.280

这是我要检查的第一件事：

1.  验证应用程序池用户有权访问网络资源

    *   由于您声明它在您登录机​​器​​时有效，请尝试将应用程序池用户更改为您登录机器​​的用户。
2.  检查您是否在 web.config 中启用了模拟。如果这样做，请确保该用户可以访问网络资源。

3.  尝试更改连接字符串以使用 IP 地址（作为测试）。如果这样可以解决问题，则可能是某种 DNS 问题。

    *   确保在 IP 地址末尾包含 ,1433
    *   `Network Library=DBMSSOCN`在您的连接字符串中设置。（有关详细信息，请参阅 ConnectionStrings.com 上的这篇[文章。）](http://connectionstrings.com/Articles/Show/define-sql-server-network-protocol)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T11:59:02.297

如果您已按上述方式输入了准确的连接字符串，请检查将连接字符串中的**&**周围的**密码**更改为**+**。

上面写的连接字符串根本不是有效的字符串，因为据我所知，字符串可以使用**+**而不是在 C# 中使用**&连接另一个字符串。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-28T12:08:33.737

除了其他人指出的内容之外，我唯一一次回忆起专门针对“命名管道”参考的错误消息是基于 SQL-Server 的设置方式。

为了确认，我进入了我的 SQL Server 配置管理器版本。然后，查看“SQL Native Client 11.0 配置”（以防万一，为 32 位和 64 位都做了）并打开显示“客户端协议”。其中显示了共享内存、TCP/IP 和命名管道的选项。确保您的“命名管道”协议已启用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-30T07:00:38.110

**首先检查这个：**

确保您的 sql server 接受远程连接

Sql Server 实例->属性->连接->允许更多连接。

**在第二步执行此步骤：**

尝试在 VS 中使用 Server Explorer 窗格建立连接：

1) 打开服务器资源管理器。

2）右键单击“数据连接”并选择“添加连接”

3) 在随后的对话框中，选择您的数据源和数据库，指定安全信息，然后按“测试连接”按钮。

4）当连接正常时，按“确定”

5) 在 Server Explorer 窗格中突出显示您的数据库，然后查看 Properties 窗格。将显示一个连接字符串的工作示例，您可以将其复制并粘贴到您的应用程序或配置文件中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-29T01:00:18.027

您提到 SQL Server 在另一台机器上。您应该确保该计算机上的 SQL Server Browser 服务正在运行。

您将在 Windows 服务管理控制台（以及其他位置）中找到它。

此外，您必须确保防火墙中的 UDP 端口 1434 已打开。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-31T16:05:45.597

让我们检查解决此错误的步骤。

1) SQL Server 应该已启动并正在运行。2) 在 SQL Server 配置中启用 TCP/IP 3) 在 Windows 防火墙中打开端口 4) 启用远程连接 5) 启用 SQL Server Browser 服务 6) 在防火墙中创建 sqlbrowser.exe 的异常 7) 重新创建别名

[来源在这里](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

希望能帮助到你

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-25T11:20:39.977

检查 ServerName、DomainName、DBName 和 MyPassword 的值。他们是对的吗？？它们是如何分布的？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-31T12:04:36.500

可能是客户端系统无法识别 SQL 服务器

因为由于sql server网络不可用而发生错误，也可能是网络故障的一些错误

# c# - 将包含数组类型的字典添加到字典

> ID：15613479
> 
> 赞同：1
> 
> 时间：2013-03-25T11:11:43.313
> 
> 标签：c#, arrays, generics, dictionary

我在将具有 Vector2 数组作为其值类型的字典放入作为类属性的字典时遇到问题：

```
Dictionary<string, Dictionary<string, Vector2[]>> foo = new Dictionary<string, Dictionary<string, Vector2[]>>();  // OK
foo.Add("bar", new Dictionary<string, Vector2[]>()); // OK

fooAttribute.add("bar", new Dictionary<string, Vector2[]>()); // NOT OK 
```

属性声明为：

```
protected Dictionary<string, Dictionary<string, Vector2[]>> fooAttribute; 
```

它适用于局部变量，但对于属性失败并出现以下错误：

> 错误 CS1061：类型`System.Collections.Generic.Dictionary<string,System.Collections.Generic.Dictionary<string,UnityEngine.Vector2[]>>' does not contain a definition for`add' 并且找不到扩展方法`add' of type`System.Collections.Generic.Dictionary>'（您是否缺少 using 指令或程序集引用？）（CS1061）（Assembly-CSharp）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:13:11.063

您必须使用`Add`而不是`add`. C# 区分大小写。

# c# - 尝试泛化身份验证（包括更改参数）

> ID：15613482
> 
> 赞同：1
> 
> 时间：2013-03-25T11:11:53.337
> 
> 标签：c#, asp.net-mvc, process

在我们的 MVC 项目中，我们试图使一切尽可能通用。

因此，我们希望拥有一个涵盖我们所有方法的身份验证类/方法。

例如：以下代码是一个 MVC 类，可以从客户端调用

```
public class Test
{
    public void Test()
    {
    } 

    public int Test2(int i)
    {
         return i
    }

    public void Test3(string i)
    {
    }
} 
```

我们 Web 服务的客户可以使用服务引用来访问 Test()、Test2() 和 Test3()。

现在我正在寻找一个类、模型、接口或任何其他我可以用来改变对方法的访问（当前使用`[PrincipalPermission]`属性）以及改变参数值的东西。

例子：

客户 A 来电`Test2(150)`

类/方法检查客户 A 是否有权访问`Test2`. 类/方法验证用户，但注意到用户无权访问`150`. 他只能访问`100`. 所以类/方法将参数设置为`100`并让它跟随它的旅程。

客户 B 级`Test()`

类/方法检查客户 B 是否有权访问`Test`. 验证后显示用户无权访问，因此引发 SecurityException。

我的问题：

在什么类、接口、属性或任何东西中我能最好地做到这一点？

（ps。作为示例，我只使用了身份验证和参数处理，但我们计划在这个阶段做更多的事情。）

**编辑**

我注意到大多数（如果不是全部）假设我正在使用 actionResults。所以我想声明这是在一个网络服务中使用的，我们为我们的客户提供来自我们数据库的信息。在向我们的 Web 服务发出请求期间，我们绝不会接触到 ActionResult。（至少，不是我们的客户）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:31:15.660

身份验证也可以通过一个方面来完成。面向方面的范例旨在尊重那些所谓*的横切关注点*。以“老式”OO方式实现的横切关注点使您的业务逻辑更难阅读（如上面尼克的示例）甚至更难理解，因为它们不会为您的代码带来任何“直接”好处：

```
public ActionResult YourAction(int id) {
  if (!CustomerCanAccess(id)) {
    return new HttpUnauthorizedResult();
  }

  /* the rest of your code */
} 
```

你在这里唯一想要的就是`/* the rest of your code */`，仅此而已。

例如，日志记录、异常处理、缓存和授权之类的东西可以作为一个方面来实现，因此可以在一个点上进行维护。

[PostSharp](http://www.postsharp.net/)是面向方面的 C# 框架的示例。使用 PostSharp，您可以创建自定义方面，然后注释您的方法（就像您对`PrincipalPermissionAttribute`. PostSharp 将在编译期间将您的方面代码*编织*到您的代码中。通过使用 PostSharp 方面，可以挂钩到方法调用来验证调用用户、更改方法参数或抛出自定义异常（有关如何实现的简要说明，请参阅[此博客文章）。](http://www.agile-code.com/blog/aop-method-interception-in-postsharp-with-onmethodboundaryaspect/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:39:45.677

没有处理这种情况的内置属性。

我发现通常最好只做这样的事情：

```
public ActionResult YourAction(int id) {
  if (!CustomerCanAccess(id)) {
    return new HttpUnauthorizedResult();
  }

  /* the rest of your code */
} 
```

这很简单，也很容易扩展。我想你会发现在很多情况下这就是你所需要的。它还使您的安全断言保持可测试性。您可以编写一个简单地调用该方法的单元测试（没有任何 MVC 管道），并检查调用者是否被授权。

请注意，如果您使用的是 ASP.Net Forms 身份验证，您可能还需要添加：

```
Response.SuppressFormsAuthenticationRedirect = true; 
```

如果您不希望用户在尝试访问未经授权的资源时被重定向到登录页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:58:08.767

我相信你没有得到足够好的答案的原因是因为你的问题有一些模棱两可。首先，您说您有一个从客户端调用的 MVC 类，但您说没有 ActionResults。因此，如果您使用的是 asp.net mvc 框架、web api、wcf 服务或soap (asmx) web 服务，您最好澄清一下。如果我的假设是正确的并且您使用的是 asp.net mvc 框架，那么您如何在不使用操作结果的情况下定义 Web 服务以及您的客户端如何“调用”该服务。我并不是说这是不可能的，或者您可能所做的事情是错误的，但更清晰（和代码）会有所帮助。

如果您使用的是 asp.net mvc3，我的建议是对其进行设计，以便您使用控制器和操作来创建您的 Web 服务。您需要做的就是在操作结果中返回 Json、xml 或您的客户期望的任何其他内容。

如果你这样做了，那么我建议你在一个类中实现你的业务逻辑，就像你在你的问题中发布的那样。此类不应了解您的身份验证或访问级别要求，并且应仅专注于实现所需的业务逻辑并产生正确的结果。

然后，您可以为您的操作方法编写一个自定义操作过滤器，该过滤器可以检查操作参数并确定调用者是否经过身份验证并被授权实际访问该方法。请参阅[此处](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3customactionfilters.aspx)了解如何编写自定义操作过滤器。

如果您认为这听起来像您想要的并且我的假设是正确的，请告诉我，我很乐意发布一些代码来捕获我上面描述的内容。如果我偏离了主题，请澄清问题，我们可能离提出解决方案更近了一步。

ps 您需要的是 AOP 的“思维方式”。PostSharp 作为一个 AOP 工具很棒，但我怀疑 postsharp 在这里能为你做的任何事情是你无法通过稍微不同的架构和正确使用 asp.net mvc 的特性来实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:48:12.693

我不确定我是否理解您的问题，但看起来模型活页夹可以提供帮助。

您的模型绑定器可以注入一个接口，该接口负责确定用户是否有权访问某个方法，并且如果需要，它可以更改作为参数提供的值。

实现 interface 的 ValueProviders`IValueProvider`也可能对您的情况有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T13:44:19.050

首先，简单说一下，那个`your own methods are probably the most appropriate place to handle input values (adjust/discard) - and with the addition of Authorize and custom filter actions you can get most done, and the 'MVC way'`。您也可以采用“OO 方式”并拥有您的`ITest`接口、调度程序等（您可以获得更多编译器支持——但它更加耦合）。但是，让我们假设您需要更复杂的东西......

我还假设你`Test`是一个控制器——即使不是，它也可以成为“管道”的一部分（或通过模仿 MVC 所做的），并且考虑到 MVC ......

> 一种明显的解决方案是通过 [ActionFilterAttribute 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx) （如 Authorize 等）应用过滤器或操作过滤器 - 通过创建您自己的自定义属性和覆盖`OnActionExecuting`等。

虽然这很好，但它不会有太大帮助，`parameters manipulation`因为您必须指定“不合适”的代码 - 或者以某种方式为每个属性注入委托、lambda 表达式。

它基本上`an interceptor`是您需要的某种类型 - 它允许您附加自己的处理。我做过类似的事情——但是这个人在解释和实施解决方案方面做得很好——所以我建议不要重复大部分内容，而是建议通读一遍。

[具有拦截器模式的 ASP.NET MVC 控制器操作（我认为是 Amar）](http://www.codeproject.com/Articles/469251/ASP-NET-MVC-controller-action-with-Interceptor-pat)

这样做是将现有的 MVC 机制用于过滤器 - 但它通过不同的“接口”公开它 - 我认为处理输入要容易得多。基本上，你会做的是......

```
[ActionInterceptor(InterceptionOrder.Before, typeof(TestController), "Test1")]
public void OnTest1(InterceptorParasDictionary<string, object> paras, object result) 
```

参数和更改被传播，你有`context`一个排序，所以你可以终止进一步的执行 - 或者让这两种方法完成它们的工作等。

> 同样有趣的是整个模式——这是一种 IOC——你在另一个类/控制器中定义拦截代码——所以不是“装饰”你自己的测试方法——属性和大部分工作都放在外面。

要更改您的参数，您可以执行以下操作...

```
// I'd create/wrap my own User and make this w/ more support interfaces etc.
if (paras.Count > 0 && Context.User...) 
{
    (paras["id"] as int) = 100;
} 
```

而且我猜您可以根据自己的情况进一步更改实现。

这只是一个粗略的设计 - 我不知道那里的代码是否已准备好用于生产（它适用于 MVC3，但如果不一样，情况也相似），但它足够简单（当解释时）并且应该可以通过一些小的调整来正常工作你的身边。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T12:59:55.557

以下是我如何让我的生活变得更简单。

1.  永远不要使用简单的值作为动作参数。始终创建一个代表动作参数的类。即使只有一个值。我发现我通常最终能够重用这个类。
2.  确保这个类的所有属性都是可以为空的（这可以防止您遇到自动填写的默认值（整数为 0））并且定义了允许的范围（这可以确保您不必担心负数）
3.  一旦你有一个代表你的论点的类，把一个验证器扔到一个属性上就变得微不足道了。

问题是你没有传递一个毫无意义的int。它有一个用途，可以是产品编号、帐号等。创建一个将其作为属性的类（例如，具有称为“id”的单个字段的 AccountIdentifier 类）。然后您所要做的就是创建一个 [CurrentUsedCanAccessAccountId] 属性并将其放在该属性上。

您的控制器所要做的就是检查 ModelState.IsValid 是否已经完成。

有更优雅的解决方案，例如向方法添加操作过滤器，该过滤器将根据用户是否有权访问参数的特定值自动重定向，但这会很好用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T17:11:51.183

首先通过从 ActionFilterAttribute (system.web.mvc) 继承来创建一个属性，然后覆盖 OnActionExecuting 方法并检查用户是否有权限

这个例子

```
 public class CheckLoginAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (!Membership.IslogedIn)
        {
            filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary
                                {
                                   { "area",""},
                                   { "action", "login" },
                                   { "controller", "user" },
                                   { "redirecturl",filterContext.RequestContext.HttpContext.Request.RawUrl}
                               });
        }
    }
} 
```

然后，将此属性用于您需要检查用户权限的每种方法

```
public class Test
{
    [ChecklLogin]
    public void Test()
    {
    } 
    [ChecklLogin]
    public int Test2(int i)
    {
         return i
    }
    [ChecklLogin]
    public void Test3(string i)
    {
    }
} 
```

# ember.js - 如何在 Ember 中制作单页菜单？

> ID：15613485
> 
> 赞同：5
> 
> 时间：2013-03-25T11:12:03.590
> 
> 标签：ember.js, ember-router

我想知道如何使用 Ember在[这个网站上制作菜单？](http://happycog.com/)

该页面分为不同的部分，我们可以滚动到每个部分，单击菜单使页面滚动到想要的部分。

我不确定我是否应该在路由器中为这种行为设置不同的路由，我猜不是这样，因为当我们更改路由时，视图会从 DOM 中删除。
那么，我应该如何建立每个部分的锚链接？

最好的解决方案会在我们滚动页面时自动更新路由，但任何处理链接和 URL 识别的解决方案都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:10:30.790

有些人可能会反对，但 Ember 对于您展示的网站登录页面来说可能有点过分了。Ember 更适用于需要连接多个视图和数据的强大 Web 应用程序。

首先，如果您[查看他们的脚本](http://happycog.com/a/j/functions.js)，他们正在使用 jQuery 将`body`' 的`scrollTop`位置设置为相应的 div 并设置`window.location.hash`为`hash`菜单元素的 ' `href`，这也恰好是滚动到的`<section/>`ID `body`：

```
$(document).on('click', '#nav a, .clients-capabilities a', function(){
    var target = $(this);
    var hash = this.hash;
    var destination = $(hash).offset().top;

    stopAnimatedScroll();

    $('#nav li').removeClass('on');
    target.parent().addClass('on');

     $('html, body').stop().animate({ 
        scrollTop: destination
    }, 400, function() { window.location.hash = hash; });
    return false;
}); 
```

其次，他们没有做任何特殊的事情来加载到页面加载的特定位置。如果您使用哈希加载 Web 上的任何页面，浏览器将查找具有该 ID 的元素并在该位置加载。例如，[http](http://emberjs.com/#download) ://emberjs.com/#download 。

即使您仍然想为此使用 Ember，您最终可能会使用从`/`路由加载的单个视图执行类似的操作，因此在您的网站成为一个成熟的 Web 应用程序之前，我什至不会担心 Ember。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T22:00:49.587

`*:`尝试在要处理这种情况的页面上的路由器中使用catch all 模式。

所以可以说索引将作为一个页面工作，您必须能够自动滚动到 url 中的某些元素。

您还可以通过链接从索引页面访问**帖子**和**关于子页面。**

然后...

```
App.Router.map(function() {
  this.route('about');
  this.route('posts');
  this.route('index',{path:'*:'});

}); 
```

因此，如果您有一个 id="elementToScrollTo" 的元素，那么 url /#elementToScrollTo 将加载索引页面并滚动到该元素。

请参阅[如何在 Ember.js 中处理“没有匹配的路由”并显示 404 页面？](https://stackoverflow.com/questions/14548594/how-to-handle-no-route-matched-in-ember-js-and-show-404-page)还有一些其他的方法来解决这个问题。

我希望这可以帮助你。

# javascript - 如何在 html5 中使用现有的 sqlite 数据库

> ID：15613487
> 
> 赞同：6
> 
> 时间：2013-03-25T11:12:05.573
> 
> 标签：javascript, html, sqlite

我已经使用 sqlite 浏览器创建了一个 sqlite 数据库文件。我有一个文件“sample.sqlite”，现在我想知道如何在 javascript 中导入这个文件并使用 sqlite 文件中的数据。我一直在使用下面提到的脚本

```
var db;

try {
    if (window.openDatabase) {
        db = openDatabase("sample.sqlite", "1.0", "HTML5 Database API example", 200000);
        if (!db)
            alert("Error Failed to open the database, check version");
    } else
        alert("Error Not supported? Not gonna happen");
} catch(err) {} 
```

通过使用此代码，我无法从 sqlite 文件中获取数据。请建议我如何进行。我已经看到一些网站提到了创建表的步骤，通过在 java 脚本本身中编写代码来插入数据。但我不'不知道这样做我想导入现有的 sqlite 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:30:41.103

不允许 Web 应用访问计算机上的任意文件。

您可以从您的 JavaScript 代码所在的同一服务器下载一些数据，但将 SQL 命令嵌入代码中创建数据库会更容易、更快捷。（使用`.dump`命令`sqlite3`行工具的命令来获取这些 SQL 命令。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:38:30.730

对于 Safari 浏览器：

在您的 HTML5 中创建虚拟数据库。

之后从提到的位置复制数据库文件名。

**\Application Data\Apple Computer\Safari\Databases{您的域名}{数据库文件名}**

用较新的文件名替换您的数据库文件名。并粘贴到上述位置。

打开您的 HTML5 页面，我希望它工作良好。

# sql - SQL 中的迭代求和

> ID：15613488
> 
> 赞同：5
> 
> 时间：2013-03-25T11:12:15.263
> 
> 标签：sql, postgresql, zabbix

我在 Zabbix DB 中有每分钟加载到它的值。我需要一个查询来计算不同日期的每小时总计，例如在 2013 年 3 月 20 日以下，我会有一行 0:00 包含时间 >= 0:00 和 < 1:00 等值的总和。然后我会在凌晨 1 点到 2 点等之间再写一行。我正在使用下面的查询，但我必须不断更改时间。我正在寻找的是一个查询，它将在一天中的每个小时内为我生成 24 行。请帮忙。

```
SELECT 
    SUM(CASE WHEN itemid = 23661
        THEN value ELSE 0 END) Hits 
    FROM history_uint WHERE 
        clock >= EXTRACT(EPOCH FROM TIMESTAMP '2013-03-24 00:00:00')
         AND clock < EXTRACT(EPOCH FROM TIMESTAMP '2013-03-24 01:00:00') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:37:20.690

您是否尝试过按小时对结果进行分组？

```
SELECT DATEPART(HOUR, timestamp) [HOUR]
, SUM(CASE WHEN itemid = 23661 THEN value ELSE 0 END) hits 
FROM history_uint
WHERE clock >= EXTRACT(EPOCH FROM timestamp '2013-03-24')
  AND clock < EXTRACT(EPOCH FROM timestamp '2013-03-25')
GROUP BY DATEPART(HOUR, timestamp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:10:55.077

就像是：

```
select '2013-03-20'::date + delta * '1 hour'::interval
from generate_series(0,23) g(delta) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:43:06.307

```
select
    date_trunc('hour', clock) "hour",
    sum((itemid = 23661)::integer) hits 
from history_uint
group by 1
order by 1 
```

或填满所有时间：

```
select
    s.hour, count(itemid = 23661 or null) hits 
from
    (
        select date_trunc('hour', clock) "hour", itemid
        from history_uint
    ) h
    right join (
        select date_trunc('hour', d) "hour"
        from generate_series (
            (select min(clock::date)),
            (select max(clock)::date + 1) - interval '1 hour',
            '1 hour'
        ) s(d)
    ) s on s.hour = h.hour
group by 1
order by 1 
```

# c# - 如何用c#实现mosquitto推送通知

> ID：15613492
> 
> 赞同：0
> 
> 时间：2013-03-25T11:12:27.593
> 
> 标签：c#, .net, mqtt

我已经搜索了很长时间，但我还没有找到任何有用的东西。我正在尝试实现 Mosquitto-C#-Client。随着 Mosquitto V1.0 的发布，在[http://mosquitto.org/js/mosquitto-1.0.js](http://mosquitto.org/js/mosquitto-1.0.js)上发布了一个 javascript/websocket-client。但我不知道如何用 C# 以正确的方式实现这一点。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:31:50.373

不是完全重复询问如何使用 MQTT，而是从某个地方开始，这是这样一个**[问题](https://stackoverflow.com/questions/6635440/c-sharp-client-library-for-subscribing-publishing-mqtt-really-small-message-bro)**，接受的答案指向一些 C# 资源，包括 Mosquitto。

# android - Android ViewPager 错误

> ID：15613494
> 
> 赞同：0
> 
> 时间：2013-03-25T11:12:34.693
> 
> 标签：android, android-viewpager

我对这段代码有疑问：

```
package com.app.BoomBase;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.ViewPager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(2);
}

private class MyPagerAdapter extends PagerAdapter {
    public int getCount() {
        return 3;
}

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) 
        {
        case 1:
                resId = R.layout.beginner;
                break;
        case 2: 
                resId = R.layout.activity_main;
                break;
       case 3:
                resId = R.layout.advanced;
                break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
}
@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}
@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
}
@Override
public Parcelable saveState() {
    return null;
}
}
} 
```

和 XML 文件：

主要的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<android.support.v4.view.ViewPager
    android:id="@+id/ViewPager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />

 </LinearLayout> 
```

中间：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/main_background"
android:orientation="vertical" >

</LinearLayout> 
```

初学者：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background" >

<ImageButton
    android:id="@+id/ibWeather"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="68dp"
    android:layout_marginTop="42dp"
    android:background="@null"
    android:src="@drawable/weather_zero_transparrent" />

</RelativeLayout> 
```

和先进的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="@drawable/background"> 
```

问题是我不断收到这样的错误：

```
E/MessageQueue-JNI(20322): Exception in MessageQueue callback: handleReceiveCallback

E/MessageQueue-JNI(20322): android.content.res.Resources$NotFoundException: Resource ID #0x1

E/MessageQueue-JNI(20322):  at android.content.res.Resources.getValue(Resources.java:1026)

E/MessageQueue-JNI(20322):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2131)

E/MessageQueue-JNI(20322):  at android.content.res.Resources.getLayout(Resources.java:865)

E/MessageQueue-JNI(20322):  at android.view.LayoutInflater.inflate(LayoutInflater.java:394)

E/MessageQueue-JNI(20322):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

E/MessageQueue-JNI(20322):  at com.app.BoomBase.MainActivity$MyPagerAdapter.instantiateItem(MainActivity.java:47)

E/MessageQueue-JNI(20322):  at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:800)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager.populate(ViewPager.java:961)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager.populate(ViewPager.java:880)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager$3.run(ViewPager.java:238)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1696)

E/MessageQueue-JNI(20322):  at android.support.v4.view.ViewPager.onInterceptTouchEvent(ViewPager.java:1829)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2060)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2119)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2119)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2119)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2418)

E/MessageQueue-JNI(20322):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2119)

E/MessageQueue-JNI(20322):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2139)

E/MessageQueue-JNI(20322):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1476)

E/MessageQueue-JNI(20322):  at android.app.Activity.dispatchTouchEvent(Activity.java:2487)

E/MessageQueue-JNI(20322):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2087)

E/MessageQueue-JNI(20322):  at android.view.View.dispatchPointerEvent(View.java:7535)

E/MessageQueue-JNI(20322):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3415)

E/MessageQueue-JNI(20322):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3347)

E/MessageQueue-JNI(20322):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4456)

E/MessageQueue-JNI(20322):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4434)

E/MessageQueue-JNI(20322):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4538)

E/MessageQueue-JNI(20322):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)

E/MessageQueue-JNI(20322):  at android.os.MessageQueue.nativePollOnce(Native Method)

E/MessageQueue-JNI(20322):  at android.os.MessageQueue.next(MessageQueue.java:125)

E/MessageQueue-JNI(20322):  at android.os.Looper.loop(Looper.java:124)

E/MessageQueue-JNI(20322):  at android.app.ActivityThread.main(ActivityThread.java:4921)

E/MessageQueue-JNI(20322):  at java.lang.reflect.Method.invokeNative(Native Method)

E/MessageQueue-JNI(20322):  at java.lang.reflect.Method.invoke(Method.java:511)

E/MessageQueue-JNI(20322):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)

E/MessageQueue-JNI(20322):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)

E/MessageQueue-JNI(20322):  at dalvik.system.NativeStart.main(Native Method) 
```

仅当我尝试向左滑动时才会发生此错误。

谁能帮我 ？我迷路了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:16:34.880

count == 3 --> 位置：0、1、2 ...在您的开关盒上，您有 1、2 和 3...

删除 3 并添加 case 0。;-)

因为你的计数是：

```
public int getCount() {
    return 3;
} 
```

那么你的开关盒必须是这样的：

```
int resId = 0;
    switch (position) 
    {
    case 0:
            resId = R.layout.beginner;
            break;
    case 1: 
            resId = R.layout.activity_main;
            break;
   case 2:
            resId = R.layout.advanced;
            break;
    } 
```

# ember.js - Ember.js RC1 - 动态添加资源/在稍后阶段

> ID：15613500
> 
> 赞同：1
> 
> 时间：2013-03-25T11:12:52.703
> 
> 标签：ember.js

在我们的框架中，我们有一个插件机制。从 Ember.js v1.0.0-pre2 迁移到 RC1 意味着像这样设置路由映射：

```
App.Router.map(function() {
    this.resource('contacts', function() {
        this.resource('contact', function() {
        });
    });
}); 
```

但是假设我们有一个`Posts`模块，它需要以下内容：

```
App.Router.map(function() {
    this.resource('posts');
}); 
```

由于我事先不知道将呈现哪些路线，我该如何建立这个映射？

并非所有插件都对所有用户可用，因此路由映射是相当动态的。在 pre2 版本中，路由是在控制器中定义的，并且仅在包含插件的控制器时才反映。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:35:06.400

Discourse 有某种动态的路线构建，但我不知道您是否可以稍后添加它们：

`buildRoutes`在这里定义：

[https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/discourse_route.js](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/discourse_route.js)

`buildRoutes`在这里使用：

[https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/application_routes.js](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/application_routes.js)

# php - 如果密钥存在于 php 中，则更新 postgresql

> ID：15613502
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:12:57.990
> 
> 标签：php, postgresql, pdo

我将我的 php 应用程序转换为使用 postgresql 而不是 mysql。

在我使用 PDO 使用此功能之前：

```
$stmt = $db->prepare("INSERT INTO $table(id,name,info) VALUES(:id,:name,:info) ON DUPLICATE KEY UPDATE name=:name,info=:info");
$stmt->execute(array(':id' => $id, ':name' => $name, :info' => $info)); 
```

如果密钥不存在，它会创建一个新条目，否则它会更新该条目。

怎么可能用 postgresql 做同样的事情？

我读过一些文章，但没有人清楚我必须做什么。我需要为此编写触发器或规则吗？

或者如果条目/ID存在，我是否在php中写一个检查，并确定它是否应该更新或创建新的？

我正在使用 postgres 9.1.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:32:25.340

[http://en.wikipedia.org/wiki/Upsert](http://en.wikipedia.org/wiki/Upsert)

您可以通过准备运行合并命令，然后执行它。

我想这应该工作

# php - WordpressBundle 并记住我

> ID：15613504
> 
> 赞同：1
> 
> 时间：2013-03-25T11:12:59.797
> 
> 标签：php, symfony

对于我们的应用程序，我们将 Symfony2 与[WordpressBundle](https://github.com/kayue/WordpressBundle)结合使用。我正在尝试启用 Symfony2 remember_me 功能，但无论我尝试什么，都会导致以下错误：

`RuntimeException: You must configure at least one remember-me aware listener (such as form-login) for each firewall that has remember-me enabled.`

security.yml 中的防火墙如下所示，但我仍然收到上述错误。我已经发布了[一个问题](https://github.com/kayue/WordpressBundle/issues/19)，其中也包含相关问题。

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    main:
        pattern:    ^/
        anonymous:  ~
        remember_me:
            key: "%secret%"
            lifetime: 604800
            always_remember_me: true 
        form_login:
            login_path:       /login
            check_path:       /login_check
            remember_me:      true
        logout:
            path:   /logout
            target: /
        wordpress_cookie: false
        wordpress_form_login:
            remember_me:      true
            remember_me_parameter: _remember_me 
```

# ruby-on-rails - 一个 Rails 应用程序在多个域上的单点登录

> ID：15613507
> 
> 赞同：1
> 
> 时间：2013-03-25T11:13:11.007
> 
> 标签：ruby-on-rails, single-sign-on

我们有一个在一个基本域上运行的应用程序。应用程序解析流量的来源，这意味着我们有多个域（www.example.com、www.something.com...），但本质上它是一个应用程序。其中一个控制器解析域名。

我们面临的问题是单点登录。如何为将添加的所有现有和未来域创建 SSO。我们需要在用户登录一个域时，自动登录所有域。有一些常见的做法来解决这个问题吗？

欢迎任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:45:00.120

为会话存储选择了一个中心位置，例如活动记录或 memcached。在所有应用程序中设置相同的会话机密。我已经实现了这个..它工作得很好。

# php - 里面的php复选框

> ID：15613510
> 
> 赞同：1
> 
> 时间：2013-03-25T11:13:17.447
> 
> 标签：php

嘿伙计们，我需要下拉列表中的一些复选框，这些复选框允许选择多个复选框，然后将其保存到数据库中。

我不知道如何以及从哪里开始。任何人请帮帮我？？？

```
 <optgroup label="Rooms">
                    <option value="option_1"> 1</option>
                    <option value="option_2"> 2</option>
                    <option value="option_3"> 3</option>
                    <option value="option_4"> 4</option>
                    <option value="option_5"> 5</option>
                    <option value="option_6"> Modren</option>
                    <option value="option_7">Semi Modren</option>

                </optgroup>
            </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:15:30.637

嗨，你可以通过使用 jquery 插件来做到这一点。

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:21:49.307

我希望您使用的是像 jQuery 或类似的 Javascript 库。这样，您可以轻松地使用将标准 HTML 多选转换为带有选择框的下拉列表的库，如下例所示：

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

从那里您可以像往常一样进行表单提交。例如：

```
<form method="POST" action="somefile.php">
    <select id="example" name="example[]" multiple="multiple">
        <option value="1">Option 1</option>
        <option value="2">Option 2</option>
        <option value="3">Option 3</option>
        <option value="4">Option 4</option>
        <option value="5">Option 5</option>
    </select>
</form>

<script>
    $("#example").multiselect();
</script> 
```

（请注意`name`is`example[]`而不仅仅是`example`）

然后在 PHP 中，您可以像这样遍历选中的复选框：

```
if ( $_SERVER['REQUEST_METHOD'] == 'POST' )
{
    foreach ( $_POST['example'] as $index => $value )
    {
        echo $value . '<br />';
    }
} 
```

# c - Valgrind 内存泄漏指向本地时间

> ID：15613511
> 
> 赞同：3
> 
> 时间：2013-03-25T11:13:21.110
> 
> 标签：c, macos, memory-leaks, valgrind

我有这个代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/time.h>
#include <sys/resource.h>

double get_time()
{
    struct timeval t;
    struct timezone tzp;
    gettimeofday(&t, &tzp);
    return t.tv_sec + t.tv_usec*1e-6;
}

#define LL_APPEND(what, where, type) { \
    what->next = NULL; \
    what->prev = NULL; \
    if(!where) { \
        where = what; \
    } else { \
        type current = where; \
        while(current->next != NULL) \
            current = current->next; \
        current->next = what; \
        what->prev = current; \
    } \
}

struct edge {
    struct node *from;
    struct node *to;
    char *label;
};

struct edge_list {
    struct edge *edge;
    struct edge_list *prev;
    struct edge_list *next;
};

struct graph {
    struct node_list *nodes;
    struct edge_list *edges;
    int nodes_count;
    int edges_count;
};

struct node {
    char *name;
    struct edge_list *in;
    struct edge_list *out;
    struct graph *graph;
};

struct node_list {
    struct node *node;
    struct node_list *prev;
    struct node_list *next;
};

struct graph *graph_create_empty() {
    struct graph *graph = malloc(sizeof(struct graph));

    graph->nodes = NULL;
    graph->edges = NULL;
    graph->nodes_count = 0;
    graph->edges_count = 0;

    return graph;
}

void edge_destroy(struct edge *edge) {
    free(edge->label);
    free(edge);
}

void node_destroy(struct node *node) {
    struct edge_list *tmp_edge, *edge;

    edge = node->in;
    while(edge != NULL) {
        tmp_edge = edge;
        edge     = edge->next;
        free(tmp_edge);
    }

    edge = node->out;
    while(edge != NULL) {
        tmp_edge = edge;
        edge     = edge->next;
        free(tmp_edge);
    }

    free(node->name);
    free(node);
}

void graph_destroy(struct graph *graph) {
    struct edge_list *tmp_edge, *edge;
    edge = graph->edges;
    while(edge != NULL) {
        tmp_edge = edge;
        edge     = edge->next;
        edge_destroy(tmp_edge->edge);
        free(tmp_edge);
    }

    struct node_list *tmp_node, *node;
    node = graph->nodes;
    while(node != NULL) {
        tmp_node = node;
        node     = node->next;
        node_destroy(tmp_node->node);
        free(tmp_node);
    }

    free(graph);
}

void graph_add_edge(struct graph *graph, struct edge *edge) {
    struct edge_list *new_edge = malloc(sizeof(struct edge_list));
    new_edge->edge = edge;

    LL_APPEND(new_edge, graph->edges, struct edge_list *);
    graph->edges_count++;
}

void graph_add_node(struct graph *graph, struct node *node) {
    node->graph = graph;

    struct node_list *new_node = malloc(sizeof(struct node_list));
    new_node->node = node;

    LL_APPEND(new_node, graph->nodes, struct node_list *);
    graph->nodes_count++;
}

struct node *node_create(const char *name, struct graph *graph) {
    struct node *node = malloc(sizeof(struct node));

    node->name = malloc(strlen(name)+1);
    strcpy(node->name, name);

    node->in  = NULL;
    node->out = NULL;

    if(graph)
        graph_add_node(graph, node);

    return node;
}

void node_add_edge(struct node *node, struct edge *edge) {
    struct edge_list *new_edge = malloc(sizeof(struct edge_list));

    if(node == edge->to) {
        LL_APPEND(new_edge, node->out, struct edge_list *);
    } else {
        LL_APPEND(new_edge, node->in, struct edge_list *);
    }
}

void node_connect(const char *label, struct node *from, struct node *to) {
    if(from->graph != to->graph || from->graph == NULL) 
        return;

    struct edge *edge = malloc(sizeof(struct edge));

    edge->label = malloc(strlen(label)+1);
    strcpy(edge->label, label);

    edge->from = from;
    edge->to   = to;

    graph_add_edge(from->graph, edge);
    node_add_edge(from,         edge);
    node_add_edge(to,           edge);
}

int main(int argc, char *argv[]) {
    double start = get_time();

    for(int i = 0; i < 100000; i++) {
        struct graph *graph = graph_create_empty();

        // Create the nodes
        struct node *useful_demand_heat = node_create("useful_demand_heat", graph);
        struct node *useful_demand_elec = node_create("useful_demand_elec", graph);

        struct node *space_heater_coal  = node_create("space_heater_coal", graph);
        struct node *space_heater_gas   = node_create("space_heater_gas", graph);
        struct node *space_heater_oil   = node_create("space_heater_oil", graph);
        struct node *space_heater_chp   = node_create("space_heater_chp", graph);
        struct node *space_heater_elec  = node_create("space_heater_elec", graph);

        struct node *final_demand_coal  = node_create("final_demand_coal", graph);
        struct node *final_demand_gas  = node_create("final_demand_gas", graph);
        struct node *final_demand_oil  = node_create("final_demand_oil", graph);
        struct node *final_demand_elec  = node_create("final_demand_elec", graph);

        struct node *lv_network = node_create("lv_network", graph);
        struct node *mv_network = node_create("mv_network", graph);
        struct node *hv_network = node_create("hv_network", graph);

        struct node *coal_plant = node_create("coal_plant", graph);
        struct node *elec_import = node_create("elec_import", graph);

        // Edges
        node_connect("electricity", elec_import, hv_network);
        node_connect("electricity", coal_plant, hv_network);

        node_connect("electricity", hv_network, mv_network);
        node_connect("electricity", mv_network, lv_network);
        node_connect("electricity", lv_network, final_demand_elec);

        node_connect("electricity", final_demand_elec, space_heater_elec);
        node_connect("coal", final_demand_coal, space_heater_coal);
        node_connect("gas", final_demand_gas, space_heater_gas);
        node_connect("gas", final_demand_gas, space_heater_chp);
        node_connect("oil", final_demand_oil, space_heater_oil);

        node_connect("heat", space_heater_coal, useful_demand_heat);
        node_connect("heat", space_heater_gas, useful_demand_heat);
        node_connect("heat", space_heater_oil, useful_demand_heat);
        node_connect("heat", space_heater_chp, useful_demand_heat);

        node_connect("electricity", space_heater_chp, useful_demand_elec);
        node_connect("electricity", space_heater_elec, useful_demand_elec);
        graph_destroy(graph);
    }

    double finish = get_time();
    printf("Took %.5f ms to run\n", (finish - start));
} 
```

当我对它运行 valgrind 时，我收到以下警告：

```
==44508== Memcheck, a memory error detector
==44508== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==44508== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==44508== Command: ./graph
==44508== 
==44508== WARNING: Support on MacOS 10.8 is experimental and mostly broken.
==44508== WARNING: Expect incorrect results, assertions and crashes.
==44508== WARNING: In particular, Memcheck on 32-bit programs will fail to
==44508== WARNING: detect any errors associated with heap-allocated data.
==44508== 
--44508-- ./graph:
--44508-- dSYM directory is missing; consider using --dsymutil=yes
Took 22.74883 ms to run
Done.
==44508== 
==44508== HEAP SUMMARY:
==44508==     in use at exit: 74,666 bytes in 365 blocks
==44508==   total heap usage: 12,900,518 allocs, 12,900,153 frees, 284,078,620 bytes allocated
==44508== 
==44508== 16 bytes in 1 blocks are definitely lost in loss record 7 of 88
==44508==    at 0x54D7: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x373381: recursive_mutex_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x372025: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508==    by 0x7FFF5FC13377: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC13761: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC1006D: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0FFC3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0FEB9: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC01F9D: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC05B03: dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**, unsigned long*) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC01396: dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*) (in /usr/lib/dyld)
==44508== 
==44508== 32 bytes in 1 blocks are possibly lost in loss record 24 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3756EA: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x37546C: NXCreateHashTableFromZone (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374788: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508==    by 0x37204C: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508==    by 0x7FFF5FC13377: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508== 
==44508== 64 bytes in 2 blocks are possibly lost in loss record 36 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3756EA: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x385324: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374E9C: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508==    by 0x37204C: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508==    by 0x7FFF5FC13377: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508== 
==44508== 64 bytes in 2 blocks are possibly lost in loss record 37 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3756EA: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3757F6: _NXHashRehashToCapacity (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x375748: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x385324: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374E9C: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508==    by 0x37204C: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508== 
==44508== 64 bytes in 1 blocks are definitely lost in loss record 38 of 88
==44508==    at 0x54D7: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3733CF: recursive_mutex_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x372025: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508==    by 0x7FFF5FC13377: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC13761: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC1006D: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0FFC3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0FEB9: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC01F9D: dyld::initializeMainExecutable() (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC05B03: dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**, unsigned long*) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC01396: dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*) (in /usr/lib/dyld)
==44508== 
==44508== 72 (24 direct, 48 indirect) bytes in 1 blocks are definitely lost in loss record 39 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3796D2: _objc_fetch_pthread_data (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x382C4D: _fetchInitializingClassList(signed char) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x379181: _class_initialize (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x379137: _class_initialize (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x379137: _class_initialize (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x379137: _class_initialize (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3790F2: prepareForMethodLookup (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x378EEE: lookUpMethod (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3772FB: objc_msgSend (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x2DEE87: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==44508==    by 0xBB2C: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508== 
==44508== 96 bytes in 3 blocks are possibly lost in loss record 43 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3756EA: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x38533D: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3845D0: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374E9C: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508==    by 0x37204C: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508== 
==44508== 96 bytes in 3 blocks are possibly lost in loss record 44 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3756EA: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3757F6: _NXHashRehashToCapacity (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x375748: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x38533D: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3845D0: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374E9C: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508== 
==44508== 120 bytes in 5 blocks are possibly lost in loss record 47 of 88
==44508==    at 0x5A95: malloc_zone_calloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x37566D: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3757F6: _NXHashRehashToCapacity (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x375748: NXHashInsert (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x38533D: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3845D0: realizeClass(class_t*) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x374E9C: _read_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739EB: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508== 
...
==44508== 8,192 bytes in 8 blocks are definitely lost in loss record 86 of 88
==44508==    at 0x54D7: malloc_zone_malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x3745AE: objc::DenseMap<objc_object*, unsigned long, true, objc::DenseMapInfo<objc_object*>, objc::DenseMapInfo<unsigned long> >::init(unsigned int) (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x37455A: arr_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3739DF: map_images_nolock (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x3734F3: map_images (in /usr/lib/libobjc.A.dylib)
==44508==    by 0x7FFF5FC04936: dyld::notifyBatchPartial(dyld_image_states, bool, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC0467C: dyld::registerImageStateBatchChangeHandler(dyld_image_states, char const* (*)(dyld_image_states, unsigned int, dyld_image_info const*)) (in /usr/lib/dyld)
==44508==    by 0x83ED9: dyld_register_image_state_change_handler (in /usr/lib/system/libdyld.dylib)
==44508==    by 0x37204C: _objc_init (in /usr/lib/libobjc.A.dylib)
==44508==    by 0xBB27: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==44508==    by 0x7FFF5FC13377: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508==    by 0x7FFF5FC13761: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==44508== 
==44508== 10,808 bytes in 1 blocks are possibly lost in loss record 87 of 88
==44508==    at 0x5237: malloc (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==44508==    by 0x101745: tzsetwall_basic (in /usr/lib/system/libsystem_c.dylib)
==44508==    by 0x103043: localtime (in /usr/lib/system/libsystem_c.dylib)
==44508==    by 0xFB52C: gettimeofday (in /usr/lib/system/libsystem_c.dylib)
==44508==    by 0x1000017A0: main (in ./graph)
==44508== 
==44508== LEAK SUMMARY:
==44508==    definitely lost: 9,729 bytes in 16 blocks
==44508==    indirectly lost: 1,236 bytes in 7 blocks
==44508==      possibly lost: 15,749 bytes in 68 blocks
==44508==    still reachable: 47,952 bytes in 274 blocks
==44508==         suppressed: 0 bytes in 0 blocks
==44508== Reachable blocks (those to which a pointer was found) are not shown.
==44508== To see them, rerun with: --leak-check=full --show-reachable=yes
==44508== 
==44508== For counts of detected and suppressed errors, rerun with: -v
==44508== ERROR SUMMARY: 22 errors from 22 contexts (suppressed: 0 from 0) 
```

他们没有指向我的代码，但我仍然有漏洞。我应该担心吗？

（此外，非常感谢任何关于我做错了什么或改进我的代码风格的指针（看看我在那里做了什么？）！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:36:33.820

您使用的是最新最好的 Valgrind 3.8.1。对 OSX 10.8 的支持在不到完整版本（3.8.0）之前引入，正如[valgrind 的新闻页面所说](http://valgrind.org/docs/manual/dist.news.html)：

> 最初支持 MacOSX 10.8，但目前不能用于严肃的工作。

3.8.0 版本也`Reduced noise (false positive) level on MacOSX 10.6/10.7`有，但 10.8 没有这样的运气。[我强烈建议在valgrind 下载页面](http://valgrind.org/downloads/)上查看当前版本，您也可以从那里订阅最新版本的通知（这应该会为 Mac OSX10.8 带来更好的支持）

**注意：** valgrind 3.7.0 增加了对 OSX 10.7 的支持，所以你可能只需要等待 3.9 出来就可以得到更好的支持。

就“可能的内存泄漏”而言，您始终可以使用[`--show-possibly-lost=no`](http://valgrind.org/docs/manual/faq.html#faq.deflost)标志来抑制这些警告，并且现在对 valgrind 为您提供的所有内容持保留态度。

我指给你看的最后一页说：

> “可能丢失”意味着您的程序正在泄漏内存，除非您正在使用可能导致它们指向已分配块中间的指针做不寻常的事情；请参阅用户手册了解一些可能的原因。

在新版本的 valgrind 出现更好地支持 OSX 10.8 之前，我强烈建议将 Oracle 的 VirtualBox 与一些 Linux 发行版一起使用，您可以在其中运行您的代码，而且这一切都是免费的，甚至还有[一个 OSX 10.8 版本](http://www.oracle.com/technetwork/server-storage/virtualbox/downloads/index.html)。当我在我的 Linux virtualbox 上运行您的程序时，我没有看到任何错误报告，（请记住，我有一个稍旧的版本）所以很有可能您只是看到误报：

```
mike@mike-VirtualBox:~/C$ valgrind ./a.out
==12465== Memcheck, a memory error detector
==12465== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==12465== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==12465== Command: ./a.out
==12465== 
Took 43.77033 ms to run
==12465== 
==12465== HEAP SUMMARY:
==12465==     in use at exit: 0 bytes in 0 blocks
==12465==   total heap usage: 12,900,000 allocs, 12,900,000 frees, 284,000,000 bytes allocated
==12465== 
==12465== All heap blocks were freed -- no leaks are possible
==12465== 
==12465== For counts of detected and suppressed errors, rerun with: -v
==12465== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2)
mike@mike-VirtualBox:~/C$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:30:17.577

我一般你应该最担心的`definitely lost`，它真的取决于图书馆。`Possibly lost`有时*表示*内存丢失，但实际上没有，如果您有复杂的数据类型并使用指针“嵌套”、强制转换和指针传递，则可能会发生这种情况。

另一点是，如果您正在使用图像并且问题在于图像分配或取消分配中，很多字节（可能）会丢失，因此您应该担心，因为这可能会很快积累并耗尽您的内存，具体取决于如何你经常这样做。

另一方面，有些库需要您调用`*_init`函数，它设置了一些全局变量并且从不清理它们。那是相当无害的。

你可以让 valgrind 将这些与所谓的 supression-files 混合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:41:13.297

> 我应该担心吗？

您是否应该担心 valgrind 在您的系统上无法正常工作？并不真地; 还有其他内存分析器可以在您的系统上正常工作。

您是否应该担心您的程序会泄漏内存？好吧，除非您使用正常工作的内存分析器对其进行测试，否则您将无法确定。

> ...任何指针...至于我是否做错了什么...

是的，你做错了什么...... Valgrind 告诉你它在你的操作系统上大部分都被破坏了，但是你已经绕过了任何合理的程序员会采取的*所有选项，然后在这里提出问题：*

1.  获得一个稳定的内存分析器（与您的操作系统兼容）而不是一个不稳定的，并使用该分析器验证泄漏（例如，[`/usr/bin/leaks`和`/usr/bin/malloc_history`](https://stackoverflow.com/questions/7490825/valgrind-like-tool-on-mac-os-10-7-lion)，或“ [XCode Instruments](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/ManagingMemory/Articles/FindingLeaks.html) ”）。
2.  如果这不可用，请在虚拟机中安装 Linux 或 FreeBSD 并在那里运行 valgrind，它将是稳定的。

如果您的问题有这两种选择之一的输出，则它不会显示该警告，也可能不会显示损坏/令人困惑的输出。也许这表明您的程序*没有泄漏*，在这种情况下，您可以少一点担心，因为您的程序不太可能因泄漏内存而受到指责。也许这表明您的程序*在函数 xxx 中泄漏了内存，在函数中分配*，在这种情况下，您可以不用担心，因为*您可以自己诊断和修复这些泄漏*！

# android-ndk - 如何允许android登录共享库？

> ID：15613513
> 
> 赞同：0
> 
> 时间：2013-03-25T11:13:22.620
> 
> 标签：android-ndk, android-logcat

我正在为 android 应用程序编译一个 3rd 方 c 库作为共享库。我想将 android 日志记录添加到 c 库的源代码中，这样我就可以看到调用了哪些方法，使用了哪些参数。但我不能让它工作。我尝试了以下方法：

1.  为 c 库添加 -llog 到 Android.mk

    LOCAL_CFLAGS := := ... -llog

2.  将头文件添加到我要记录的源文件 abc.c

    #include <android/log.h>

3.  添加行

    __android_log_print(ANDROID_LOG_DEBUG, "MyApp", "这是方法 X");

错误：__android_log_print 无法识别。

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:17:01.400

`__android_log_print``printf`在第三个之后接受可变参数，类似参数。利用

```
__android_log_write(ANDROID_LOG_DEBUG, "MyApp", "This is method X"); 
```

相反，对于没有额外参数的日志记录。

编辑： -llog 是链接器标志，而不是编译器标志。消除

```
LOCAL_CFLAGS := := ... -llog 
```

而是写

```
LOCAL_LDLIBS := -llog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T09:58:34.467

如果你使用带有 gradle 的 Android Studio，它会忽略 Android.mk。将此添加到您的 build.gradle 文件中：

```
android {
  defaultConfig {
    ndk {
        moduleName "your_module_name"
        ldLibs "log"
    }
}
} 
```

# java - 最终引用的优化如何在 java 中工作？

> ID：15613523
> 
> 赞同：8
> 
> 时间：2013-03-25T11:13:48.073
> 
> 标签：java, optimization, compilation

我一直试图弄清楚 Java 优化的所有内容，并发现了一些有趣的东西。

**第一种情况：原始类型编译时优化**

```
public class Clazz {
    public static void main(String args[]) {
        final int i = 300;
        new Clazz() {
            void foo() {
                System.out.println(i);
            }
        }.foo();
    }
} 
```

编译后（我`jd-gui-0.3.5.windows`用来反编译二进制文件）它看起来像：

```
public class Clazz {
    public static void main(String[] args) {
        int i = 300;
        new Clazz() {
            void foo() {
                System.out.println(300);
            }
        }.foo();
    }
} 
```

正如预期的那样，不是吗？`i`编译后被替换为它的值（内联优化）。所以，我希望在用它的包装器替换原始类型后看到类似的东西，但是......

**第二种情况：非原始类型编译时优化**

```
public class Clazz {
    public static void main(String args[]) {
        final Integer i = 300; // replaced int with Integer
        new Clazz() {
            void foo() {
                System.out.println(i);
            }
        }.foo();
    }
} 
```

编译后：

```
public class Clazz {
    public static void main(String[] args) {
        Integer i = Integer.valueOf(300);
        new Clazz() {
            void foo() {
                System.out.println(Clazz.this);
            }
        }.foo();
    }
} 
```

## 问题：

`Clazz.this`在这种情况下是什么？我知道，它是对封闭实例的引用`Clazz`，但在这种情况下它不应该工作！我需要打印`i`，但编译器建议我打印`Clazz.this`而不是它，它可以工作！问题是什么？是否`jd-gui`反编译不正确或者我错过了一些关于 Java 编译和优化的东西？

**升级版：**

内容`Class$1`：

```
class Clazz$1 extends Clazz {
    Clazz$1(Integer paramInteger) {}

    void foo() {
        System.out.println(this.val$i);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T11:17:05.690

> 是否`jd-gui`反编译不正确或者我错过了一些关于 Java 编译和优化的东西？

`jd-gui`正在错误地反编译代码。

在我的 JVM 上，匿名类的反汇编代码如下所示：

```
class Clazz$1 extends Clazz {
  Clazz$1(java.lang.Integer);
    Code:
       0: aload_0       
       1: aload_1       
       2: putfield      #10                 // Field val$i:Ljava/lang/Integer;
       5: aload_0       
       6: invokespecial #12                 // Method Clazz."<init>":()V
       9: return        

  void foo();
    Code:
       0: getstatic     #20                 // Field java/lang/System.out:Ljava/io/PrintStream;
       3: aload_0       
       4: getfield      #10                 // Field val$i:Ljava/lang/Integer;
       7: invokevirtual #26                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V
      10: return        
} 
```

如您所见，一个副本`i`存储在匿名类中，在字段中调用`val$i`（名称是特定于实现的）。

正是这个字段，您的反编译器似乎错误地呈现为`Clazz.this`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T11:22:11.750

您可以简单地看一下字节码 ( `javap -c Clazz$1.class`)。

与`int i = 300`：

```
void foo();
   0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
   3: sipush        300
   6: invokevirtual #3                  // Method java/io/PrintStream.println:(I)V
   9: return 
```

与`Integer i = 300`：

```
void foo();
   0: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;
   3: aload_0
   4: getfield      #1                  // Field val$i:Ljava/lang/Integer;
   7: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/Object;)V
  10: return 
```

所以`int`是内联的，但`Integer`不是。

* * *

另外为了记录，这是我从 jd-gui (3.0.5) 得到的：

```
public static void main(String[] args) {
  Integer i = Integer.valueOf(300);
  new Clazz() {
    void foo() {
      System.out.println(this.val$i);
    }
  }
  .foo();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:25:40.547

它应该是一种最接近的方法，它`jd-gui`错过了解释对象在被调用`Integer`时如何将其值装箱。`System.out.println`反编译算法本身必须假定对这个`Integer`对象最重要的引用是什么，它会选择`Clazz.this`.

# javascript - Back Button 在 Safari/FF/Android 和 IOS 5(Iphone/Ipod) 中不执行任何页面脚本？

> ID：15613526
> 
> 赞同：4
> 
> 时间：2013-03-25T11:14:01.640
> 
> 标签：javascript, android, jquery, iphone, ios

我有一个页面，它依赖于页面加载的脚本（脚本内部和外部）。当页面加载时，一切都很好。但是当用户单击返回按钮时，Safari、FF/IOS 5(Iphone/Ipad/Ipod) 和 Andriod 中没有执行脚本？它在大多数现代浏览器（Chrome/IE）中运行良好

添加此行将解决除 Ipod/Iphone 之外的大多数浏览器中的问题。如何在 Ipod/Iphone 中解决这个问题？

```
window.onunload = function () { }; 
```

我发现我需要使用，

```
 window.onpageshow = function (event) {
        if (event.persisted) {
            //Do my work which i need to do in initialization
        }
    }; 
```

# c++ - C++；如何在命名空间中使用全局令牌

> ID：15613528
> 
> 赞同：0
> 
> 时间：2013-03-25T11:14:03.987
> 
> 标签：c++, macros, enums, namespaces

我正在扩展定义全局 TRUE 和 FALSE 令牌的现有组件。我的扩展是在一个新的命名空间“new_namespace”中定义一个枚举“new_enum”，它的值是 TRUE 和 FALSE。由于命名空间冲突，编译器无法编译它。

```
#define FALSE (0)
#define TRUE (1)

namespace new_namespace {
  class new_class {
  public :
  enum new_enum {
    TRUE = (0),
    FALSE = (1)
  };
  };
} 
```

我希望这会得到支持......我错过了什么。

此致

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T11:17:50.993

宏由预处理器处理，它（顾名思义）在编译器之前运行。它所做的是*将宏“调用”替换*为宏正文中的文本。所以你`enum`在预处理器步骤之后的样子，以及实际编译器看到的，是：

```
enum new_enum {
    (1) = (0),
    (0) = (1)
}; 
```

这不是合法的 C++，也是编译器抱怨的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:44:24.300

Joachim 已正确识别出您的问题，因此我不会重复答案。但我想评论如何解决它。确实没有理由将这些标记作为定义，我强烈建议像这样替换它们：

```
const bool TRUE = true;
const bool FALSE = false; 
```

这可能会导致类型问题，尽管它们很可能会通过隐式转换优雅地进行。如果您确实看到输入问题，请尝试以下操作：

```
const int TRUE = 1;
const int FALSE = 0; 
```

无论哪种方式，这些常量都将遵守正常的范围规则并且不再冲突。

# java - jsoup 巨大的html下载

> ID：15613536
> 
> 赞同：0
> 
> 时间：2013-03-25T11:14:34.263
> 
> 标签：java, jsoup

我正在尝试下载一个 HTML 文件，它实际上是一个大约 6000 行的表格，所以我编写了这段代码

```
 Document _DOM=Jsoup.connect(_EXACT1_URL)
            .cookies(_COOCKIES)
            .timeout(70000)
            .userAgent("Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0")
            .get(); 
```

当我尝试解析我的文档（_DOM）并计算行时，我得到的只是 1127 行我尝试将文档字符串写入文件（page.html）然后解析，我得到相同的结果，文件大小是大约（1.2 Mb）当我使用我的浏览器（Firefox）下载它时，实际大小是（6 Mb）我像这样增加了JVM堆大小内存

```
java -Xms32m -Xmx500 -jar myJarFile.jar, unfortunately, get the same result. 
```

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T04:36:08.147

我相信你需要设置[maxBodySize(int)](http://jsoup.org/apidocs/org/jsoup/Connection.Request.html#maxBodySize%28int%29)。默认大小为 1mb。

例如：

```
Document _DOM = Jsoup.connect(_EXACT1_URL)
               .cookies(_COOCKIES)
               .timeout(70000)
               .maxBodySize(1024*1024*10) // Size in Bytes - 10 MB 
               .userAgent("Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0")
               .get(); 
```

# php - 如何使用 ajax 提交单选输入选择？

> ID：15613539
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:15:02.740
> 
> 标签：php, jquery, ajax, forms, radio-group

我已经在`myform.php`具有单选组输入类型的模板上创建了表单，并且值更新为`onchange="javascript:document.post.submit()"';`. 因此，每当我更改选择时，值都会随着页面刷新而更新。有什么方法可以让我在不使用 ajax 刷新页面的情况下更新我的选择？

```
 <?php
          $foods = array('pasta', 'burger', 'pizza','popcorn');

            foreach ($foods as $food) {
            echo  '<input name="my_favorite_food" type="radio"   onchange="javascript:document.post.submit()"';
            $option = 'id=" ' .$food . '"';
            $option = 'value="' . $food . '"';

            if ($food == $my_favorite_food) $option .= 'checked="checked"';
            $option .= '>';
            $option .= '<label for=" '.$food .' ">' . $food .'  ';
            $option .=  '</label>';
            echo $option;
              }
         ?>

       <div id ="block">
        <?php 

        if ($my_favorite_food == "pasta") : ?>

          <h2>your favorite food is pasta</h2>
           <p> my pasta recipe......   </p>

        <?php endif;?>

        if ($my_favorite_food == "burger") : ?>

          <h2>your favorite food is burger</h2>
           <p> my burger recipe......   </p>

        <?php endif;?>

        if ($my_favorite_food == "pizza") : ?>

          <h2>your favorite food is pizza</h2>
           <p> my pizza recipe......   </p>

        <?php endif;?>

        if ($my_favorite_food == "popcorn") : ?>

          <h2>your favorite food is popcorn</h2>
           <p> my popcorn recipe......   </p>

        <?php endif;?>
<div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:20:20.930

为所有选项生成 HTML，并有条件地隐藏 ( `style="display:none"`) 当前未选中的选项。（生成的）HTML 看起来像这样：

```
<input type="radio" value="burger" name="favourite_food" class="favourite"/> Burger
<input type="radio" value="popcorn" name="favourite_food" class="favourite"/> Popcorn
...

<div id="burger" class="favourite-display">
    <h2>your favorite food is burger</h2>
    <p> my burger recipe...</p>
</div>
... 
```

然后是 jQuery：

```
$(document).ready(function() {
    $('.favourite').on('change', function(event) {
        $('.favourite-display').hide();
        $('#' + this.value).show();
    });
}); 
```

不需要每次都实际提交表单（使用或不使用 AJAX）来控制显示的部分。

# hibernate - hibernate sessionfactory如何管理会话？

> ID：15613540
> 
> 赞同：5
> 
> 时间：2013-03-25T11:15:05.237
> 
> 标签：hibernate, session, connection, sessionfactory

我刚刚得到了 Hibernate Session 和 Connection 之间的关系。但是现在，我又得到一个问题：hibernate sessionfactory 是如何管理会话的？在以下代码段中：DAO 类的 save() 方法：

```
Session session = sessionFactory.openSession();
   Transaction tx=null;
   tx=session.beginTransaction(); 
   session.save(transientInstance);
   session.flush();
   tx.commit(); 
```

当我们调用 时`sessionFactory.openSession()`，它会创建一个新的会话附加到当前线程（通过 ThreadLocal），这个会话也附加到一个 JDBC 连接，但是，正如你所看到的，我们不需要关闭会话（session.关闭（）），既不是连接。那么，Hibernate 会话的生命周期是什么，在什么情况下会关闭呢？自动地？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T11:38:43.697

我推荐这种`getCurrentSession`方法，因为只有使用这种方法，您才有可能确保会话将从休眠状态关闭

[配置 J2EE 当前会话。](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-j2ee-currentsession)

如果您使用该`openSession`方法，您必须自行关闭会话。在我开始使用休眠后，我认为我使用哪种方法并不重要，因为所有会话都会自动关闭......我错了。我从休眠 [SessionStatistics](https://docs.jboss.org/hibernate/core/3.3/api/org/hibernate/stat/SessionStatistics.html)的 SessionStatistics 发现打开的会话已经打开并且从未关闭。

在我将所有呼叫更改为`getCurrentSession`and之后`impl`。Session-per-request 模式打开的会话将在工作后关闭。

[交易基础](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-basics-apptx)。

# javascript - clearTimeout() 不起作用

> ID：15613544
> 
> 赞同：0
> 
> 时间：2013-03-25T11:15:11.060
> 
> 标签：javascript, iframe

我有一个带有加载**“2.html”的 iframe 的文档****“1.html ”**

 **在这两个 html 上，我都有以下代码：

```
window.onload=function(){
    window.top.sesion_timer = setTimeout(function(){
       window.top.f_cerrar_sesion();
    },2000);
    //si tocas tecla o clickeas reseteas contador
    window.addEventListener('keydown',function(){   window.top.f_reset_sesion();    },false);
    window.addEventListener('click',function(){     window.top.f_reset_sesion();    },false);
} 
```

在父文档中，我也有以下代码：

```
var sesion_timer;
function f_reset_sesion(){
    clearTimeout(sesion_timer);
    sesion_timer=setTimeout(f_cerrar_sesion,2000);

}
function f_cerrar_sesion(){
     alert("cerrar");
} 
```

当我单击文档或 iframe 时，超时重新加载但间隔未清除，因此最终调用函数 f_cerrar_sesion，不会发生的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:53:12.953

我终于找到了问题所在。

我必须首先检查文档是否是添加超时的绝对父文档，否则它将为每个 iframe 添加一个超时，因此最终代码将是这样的：

```
window.onload=function(){
    //start the timeout if is the absolute parent
    if(window.top===window.self) {
        window.top.sesion_timer = window.top.setTimeout(function(){ window.top.f_cerrar_sesion();   },1200000);
    }
    //if keydown or click we reset the timeout calling f_reset_sesion(), where the timeout is
    window.addEventListener('keydown',function(){   window.top.f_reset_sesion();    },false);
    window.addEventListener('click',function(){     window.top.f_reset_sesion();    },false);
} 
```**

# jquery - 如何提取php返回的json数据并显示在列表中

> ID：15613547
> 
> 赞同：0
> 
> 时间：2013-03-25T11:15:22.950
> 
> 标签：jquery, ajax, json, forms

我有一个简单的 jquery ajax 表单提交。在提交我的 php 脚本回显的 json_decode($result)

这是我的 ajax 脚本

```
<script>
            $("#ajaxquery").live( "submit" , function(){
            // Intercept the form submission
            var formdata = $(this).serialize(); // Serialize all form data

            // Post data to your PHP processing script
            $.get( "getdata.php", formdata, function( data ) {
                // Act upon the data returned, setting it to #success <div>
                $("#success").html ( data );
            });

            return false; // Prevent the form from actually submitting
        });
    </script> 
```

问题是数据以 json 格式显示。

目前我的输出是这样的：

```
[{"id":4,"comments":1,"likes":15,"books":3,"name":"steve"}] 
```

如何在列表中显示数据：-

```
<ul>
    <li>id</li>
    <li>name</li>
<ul> 
```

或者有没有办法在变量中获取这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:03:17.167

您的成功方法可能如下所示。作为该方法的属性的数据应该已经是适当的 json 对象

```
success : function(data) {
            if (data[0].status === 'DONE') {
                console.log('Done');
            } else if (data[0].status === 'IN_PROGRESS') {
                console.log('In progress');
            } 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:20:11.917

你可能需要 json_decode()

请参阅[http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP) 和[http://php.net/manual/de/function.json-decode.php](http://php.net/manual/de/function.json-decode.php)

# javascript - knockoutjs 选择数据绑定绑定给出了意外的结果

> ID：15613549
> 
> 赞同：0
> 
> 时间：2013-03-25T11:15:28.797
> 
> 标签：javascript, knockout.js

我刚开始使用knockoutjs。我尝试将选择选项值与敲除数据绑定属性绑定。但我无法将数组值作为不同的选项。它将填充为 coma separetd。我附上了我尝试过的示例代码。我希望其他一些人也会面临同样的奇怪错误。

```
self.availableStates = new Array(); 
for (var i=0;i<self.allStates.length;i++)
{
if (self.allStates[i]['name'] != null)
self.availableStates.push(self.allStates[i]['name'])
}
self.availableStates = ko.observableArray([self.availableStates]); 
```

**预期结果：**

```
<select id="drpDwnLst" data-bind="options: availableStates">
    <option value="">State4</option>
    <option value="">State3</option>
    <option value="">State2</option>
    <option value="">State1</option>
</select> 
```

**实际结果**

```
<select id="drpDwnLst" data-bind="options: availableStates">
    <option value="">State4,State3,State2,State1</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:19:09.700

您在输出中看到的是调用`toString()`数组的效果。

你得到这个结果是因为你 `availableStates` **已经是一个数组**，所以你不需要再次将它包装到一个数组中`[]`

所以你只需要写：

```
self.availableStates = ko.observableArray(self.availableStates); 
```

虽然你如何覆盖你的`self.availableStates`定义很奇怪......

# math - 如何在javascript中近似浮点数的平方根

> ID：15613553
> 
> 赞同：2
> 
> 时间：2013-03-25T11:15:37.747
> 
> 标签：math

我想近似这个函数的平方根。数学.sqrt(float); 结果应该是另一个浮点数，该点后的小数位数最大为 6 或 7。使用标准 Math.sqrt(float) 我得到一个非常大的数字，例如 0.343423409554534598959，这对我来说太多了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:18:19.510

如果您只想获得更小且更易于管理的数字，则可以使用以下`toFixed`方法：

```
var x = 0.343423409554534598959;
console.log( x.toFixed(3) )
// outputs 0.343 
```

如果您无法忍受计算整个平方根的想法并且只是将精度数字扔掉，您可以使用近似方法。但请注意，过早优化是万恶之源；而 KISS 成语与此相反。

这是Heron的方法：

```
function sqrt(num) {
  // Create an initial guess by simply dividing by 3.
  var lastGuess, guess = num / 3;

  // Loop until a good enough approximation is found.
  do {
    lastGuess = guess;  // store the previous guess

    // find a new guess by averaging the old one with
    // the original number divided by the old guess.
    guess = (num / guess + guess) / 2;

  // Loop again if the product isn't close enough to
  // the original number.
  } while(Math.abs(lastGuess - guess) > 5e-15);

  return guess;  // return the approximate square root
}; 
```

[更重要的是，从这个 Wikipedia page](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots)实现一个应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:42:32.553

我们可以通过使用四舍五入平方根

```
(double)Math.round(float * Math.pow(10,r)) /Math.pow(10,r); 
```

其中，`r`是我们要在点之后打印的数字。

**试试这样的程序**

```
 float f = 0.123f;   
    double d = Math.sqrt(f);
    d = (double)Math.round(d * Math.pow(10,5)) /Math.pow(10,5); 
    System.out.println(d); 
```

输出：0.35071

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:20:36.807

浏览stackoverflow 前段时间我发现了这段代码，接近所需的精度（这段代码不是我的，我只是^C^V-ed）

```
function round (value, precision, mode)
{
    precision |= 0; // making sure precision is integer
    var m = Math.pow(10, precision);
    value *= m;
    var sgn = (value > 0) | - (value < 0); // sign of the number
    var isHalf = value % 1 === 0.5 * sgn;
    var f = Math.floor(value);

    if (isHalf)
        switch (mode) {
            case 'PHP_ROUND_HALF_DOWN':
                value = f + (sgn < 0); // rounds .5 toward zero
                break;
            case 'PHP_ROUND_HALF_EVEN':
                value = f + (f % 2 * sgn); // rouds .5 towards the next even integer
                break;
            case 'PHP_ROUND_HALF_ODD':
                value = f + !(f % 2); // rounds .5 towards the next odd integer
                break;
            default:
                value = f + (sgn > 0); // rounds .5 away from zero
        }

    return (isHalf ? value : Math.round(value)) / m;
} 
```

# coffeescript - 如何将 CoffeeScript 与 yeoman webapp 生成器和 require.js 一起使用？

> ID：15613554
> 
> 赞同：1
> 
> 时间：2013-03-25T11:15:39.850
> 
> 标签：coffeescript, requirejs, yeoman

从 yeoman pre1.0 更新到最新的 1.0.0beta3 后，我对 yeoman 感到越来越沮丧。

在 pre1.0 中开箱即用的功能不再起作用，并且很难找到文档。认为你应该让事情变得更容易，而不是更难 - sry。

我的目标很简单：我想使用 require.js 和咖啡文件创建一个基于主干的应用程序。所以我在生成的目录下创建了一个目录`scripts`结构`yo webapp`。

这些子目录中的每个咖啡文件都被咖啡任务忽略。即使在 Gruntfile.js 中添加子目录搜索后，它也不起作用。

有没有我可以花几个小时挖掘的文档？感受一下，使用带有自定义构建过程的中间人会更快。可悲的是，这与我认为的 yeoman 最初的目标相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:29:03.140

抱歉，yeoman 让您感到沮丧，我们正在努力为您提供最好的体验。

我们更新了 Yeoman[主干生成器](https://github.com/yeoman/generator-backbone)以支持[RequireJS](https://github.com/yeoman/generator-backbone/pull/22)。但是**RequireJS 仍然不支持 CoffeeScript**。

我们正在努力解决这个问题，一旦完成就会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:53:49.307

我花了很多时间试图让 requirejs 与 coffeescript 一起工作。它在运行 grunt 服务器时效果很好，但是在运行 grunt 时 requirejs 抱怨无法找到正确的 js 文件。我能够对我的 Gruntfile 进行一些更改以使其正常工作。我在这里发布了代码

[https://github.com/yeoman/yeoman/issues/956#issuecomment-16556615](https://github.com/yeoman/yeoman/issues/956#issuecomment-16556615)

希望这可以帮助！

# microsoft-metro - 如何在winjs listview中突出显示图像最新图像...？

> ID：15613555
> 
> 赞同：0
> 
> 时间：2013-03-25T11:15:47.580
> 
> 标签：microsoft-metro, winjs

## 如何在winjs listview中突出显示图像最新图像

我正在开发一个 winJS 应用程序。我需要在 winJS 列表视图中突出显示最新图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:38:18.353

您可以使用选择器实现此目的`CSS3`：

```
.win-listview img:last-child {
    /* highlight style */
} 
```

在 JS 中选择和修改：

```
var listview = document.querySelector('.win-listview');
var firstChild = listview.firstChild();
// Perform any needed action to firstChild 
```

# android - 使用 phonegap 插件显示原生 android 活动

> ID：15613558
> 
> 赞同：2
> 
> 时间：2013-03-25T11:16:01.000
> 
> 标签：android, cordova

我是 android 新手，正在寻找一种使用 phonegap 插件启动原生 android 活动的方法，但我没有得到任何东西。有几个但不符合我的要求。我已经构建了一个插件来与phonegap和本机android（[http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)）进行通信，但只是显示消息。

我曾尝试“意图”展示一项新活动，但它不起作用。以下是启动“搜索联系人”的成功代码。但是我想开始一项活动 - 由我创建，例如“TestActivity”。就像，我将在我的 html 页面中单击一个按钮，然后它将带我进入一个新活动。

可能吗？

任何人都可以帮助我！

```
@Override
public PluginResult execute(String action, JSONArray data, String callbackId) {
    Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!"); 
    //only perform the action if it is the one that should be invoked 
    startContactActivity();
    PluginResult mPlugin = new PluginResult(PluginResult.Status.NO_RESULT);
    mPlugin.setKeepCallback(true);
    return mPlugin;
}

public void startContactActivity() {
    Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    this.ctx.startActivityForResult((Plugin) this, intent, PICK_CONTACT);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:13:24.263

最后我解决了这个问题。

```
@Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {
        startPhotoEditActivity();
        PluginResult mPlugin = new PluginResult(PluginResult.Status.NO_RESULT);
        return mPlugin;
    }

    public void startPhotoEditActivity() {
        Intent myIntent = new Intent(ctx.getContext(), PreviewToAddEffect.class);       
        myIntent.putExtra("picUri", resultType);
        myIntent.putExtra("source", "gallery");
                ctx.startActivity(myIntent);
    } 
```

# javascript - 如何选择所有选择了特定值的下拉列表？

> ID：15613563
> 
> 赞同：1
> 
> 时间：2013-03-25T11:16:13.767
> 
> 标签：javascript, jquery, html, jquery-selectors

我不知道这是否可能，但是是否有一种简洁的方法可以选择页面上选择了特定值的所有下拉菜单。

例如，我有许多相同的下拉菜单（id 除外），如下所示：

```
<select class="whatever">
  <option value="1">one</option>
  <option value="2">too</option>
  <option value="3">fwee</option>
</select> 
```

我希望能够做这样的事情：

```
$(".whatever:2") 
```

它将仅选择那些具有选择值为 2 的选项的下拉列表

所有相关代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    function go()
    {
        alert($(".whatever input[value='2']").length);
    }
</script>
<select class="whatever" id="a">
  <option value="1">one</option>
  <option value="2">too</option>
  <option value="3">fwee</option>
</select>
<select class="whatever" id="b">
  <option value="1">one</option>
  <option value="2">too</option>
  <option value="3">fwee</option>
</select>
<select class="whatever" id="c">
  <option value="1">one</option>
  <option value="2">too</option>
  <option value="3">fwee</option>
</select>
<input type="button" onclick="go();" value="go" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:17:35.267

您可以通过 选择它`input[value=value]`。这是使用您的测试用例的示例：

`$(".whatever input[value=2]")`

以上仅选择类中值为 2 的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:01:32.753

我认为这应该涵盖您需要的内容：

```
$(document).ready(function() {
    jQuery("#btn").on('click',function(){
  $('select').filter(function() {
            return $(this).val()==='2';
  }).each(function(){
  console.log($(this).attr("id"))
  })   
    });

}); 
```

[http://jsfiddle.net/kMb3p/](http://jsfiddle.net/kMb3p/)

我在那里添加了 console.log，所以你可以看到它返回了正确选择元素的 id。这可以根据你需要做什么来改变:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:18:55.403

```
$("input[value='specificvalue']") 
```

你可以像上面那样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T10:47:12.100

如果你只想数数

```
<script type="text/javascript">
    function go()
    {
        alert($("select.whatever option[value='2']:selected").length);
    }
</script> 
```

如果您想选择所有具有选定值 2 的下拉列表（用于更改其值或其他任何内容）

```
<script type="text/javascript">
    function go()
    {
        var allDropdowns = $("select.whatever option[value='2']:selected").parent();
    }
</script> 
```

# ruby - Ruby从字符串中删除第一个单词

> ID：15613566
> 
> 赞同：15
> 
> 时间：2013-03-25T11:16:28.430
> 
> 标签：ruby, string

我很难找到解决方案。如何从字符串中删除第一个单词，如下面的字符串。

```
 "i am going to school"

     "he is going to school"

     "she is going to school" 

     "they are going to school" 
```

所以字符串可以是任何字符串，并且不知道第一个单词的确切长度。但只想删除第一个单词。

结果应该如下所示

```
 "am going to school"

     "is going to school"

     "is going to school" 

     "are going to school" 
```

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T11:18:56.593

```
"i am going to school".split(' ')[1..-1].join(' ')

=> "am going to school" 
```

您可以在 ruby​​ 的数组中双向使用，因此 -1 是最后一个元素。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-25T11:25:39.367

`'she is going to school'[/(?<=\s).*/] => "is going to school"`

这使用了 Ruby 的正向后视锚：

> (?<=pat) - 肯定的后向断言：确保前面的字符匹配 pat，但不包括匹配文本中的那些字符

因此，该模式会查找一个空格字符，后跟一个由任意字符组成的字符串。由于重复（例如，“*”）是贪婪的，它选择最长的匹配字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:22:02.810

使用正则表达式

```
str = "i am going to school"
puts str.gsub(/^(\w\s+)(.*)/, '\2')

=> "am going to school" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:29:34.833

对每个字符串执行此操作：

```
string.sub(/\s*[\w']+\s+/, "") 
```

# c# - 使用来自多个 Windows 服务的信息

> ID：15613567
> 
> 赞同：1
> 
> 时间：2013-03-25T11:16:32.193
> 
> 标签：c#, wcf, windows-services, monitoring, nettcpbinding

**如何使用来自多个 WINDOWS 服务的信息 **

*   我有一台中央管理员机器和 40 台其他类似客户端的行为，我需要做的是**：**
    **1-**在每个客户端的机器上安装 Windows 服务以获取他们的信息*

    *   ： IP地址
    *   ： MAC地址
    *   ： 主机名
    *   ：上传速率（用于互联网连接）
    *   : 下载速率（互联网连接）

    **2-**能力：

    *   :切断连接
    *   :限制带宽

* * *

**PS：**这是我去年的项目，所以解决它非常重要，我想

* * *

**我做了什么 ：**

```
 public string         addip ()           
         {
             var hostEntry = Dns.GetHostEntry(Dns.GetHostName());
             string x =(from addr in hostEntry.AddressList where addr.AddressFamily.ToString() == "InterNetwork" select addr.ToString()).FirstOrDefault() ;

             return x; 
         }
    public string         hostname ()        
          {
             string x = System.Net.Dns.GetHostName() ;

             return x;  
          }
    public string         downlo ()          
          {
              List<NetworkInterface> nics = NetworkInterface.GetAllNetworkInterfaces().Where(network => network.NetworkInterfaceType == NetworkInterfaceType.Ethernet).ToList();
              NetworkInterface nic = nics[0];
              IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics();
              int bytesReceivedSpeed = (int)(interfaceStats.BytesReceived - double.Parse(BytesReceived)) / 1024;
              BytesReceived = interfaceStats.BytesReceived.ToString();
              string x = (bytesReceivedSpeed.ToString() + " KB/s") ;

           return x;   
         }
    public string         uplo ()            
      {
              List<NetworkInterface> nics = NetworkInterface.GetAllNetworkInterfaces().Where(network => network.NetworkInterfaceType == NetworkInterfaceType.Ethernet).ToList();
              NetworkInterface nic = nics[0];
              IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics();
              int bytesSentSpeed = (int)(interfaceStats.BytesSent - double.Parse(BytesSent)) / 1024;
              BytesSent = interfaceStats.BytesSent.ToString();
              string x = (bytesSentSpeed.ToString()+ " KB/s") ;

              return x;  
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:09:47.743

仍然是一个重要的问题。如果是我这样做。

*   我会创建一个 Windows 服务。
*   添加一个侦听端口，您需要选择一个。
*   设置它接收和接收命令、GetData、GetIP、CutConnection 等。
*   也许还有一个 UDP 端口，因此它可以响应那里的任何人广播。
*   你需要想出命令短语，
*   和回应。就我个人而言，我会说它是通用的，比如一个 xml 片段。

    然后我会写一个点头应用来证明这一点。并尝试选择您的 40 台机器、不同的 Windows 版本、网络的不同部分等。然后我将开始在监视器/控制器上工作。

一点一点地攻击它，添加功能。这不应该那么难，尽管尝试正确命名您的对象。我知道学术类型不会提供任何东西，但是当您尝试这样做并迷失是否下载时，您会迷失方向，获取速度，响应 getspeed 消息，发送 getspeed 消息并等待响应。让它们显示在 UI 中...

你攻击这个的顺序取决于你。但是一点一点的学习。只需敲开一个什么都不做的windows服务。做一个点对点聊天应用程序来玩 WCF。编写一个小命令解析器。

如果是我，我会做的第一件事是客户端发送一个 UDP 广播，另一个响应它，然后建立一个带有响应程序应用程序的机器列表。然后我会将后者变成服务，但重点是构建工作模块，然后将它们连接在一起。不要将名称错误的晦涩函数混杂在一起，然后尝试使其正常工作。

保持简单开始。例如，您可以使用线程和并行化。提示先让它工作。您不需要 WCF 或服务来执行此操作。那将是废话。但是由调度程序启动的一个小 exe，读取和写入共享，就可以完成这项工作。

构建模块，证明它们。编写 noddy 服务和应用程序，只是建立一个机器列表，响应端口上的消息会教你很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:42:05.067

我认为您需要查看此链接→ [https://fr.wikipedia.org/wiki/Simple_Network_Management_Protocol](https://fr.wikipedia.org/wiki/Simple_Network_Management_Protocol)

这是一个监控应用程序吗？如果是这样，为什么您不只是基于开源项目（例如 Nagios Core，它基于 C → [http://www.nagios.org/download/core/thanks?t=1364211633](http://www.nagios.org/download/core/thanks?t=1364211633)）编写您的应用程序

祝你好运

# unit-testing - Microsoft Fakes 生成器无法加载 PCL .dll

> ID：15613574
> 
> 赞同：1
> 
> 时间：2013-03-25T11:16:48.770
> 
> 标签：unit-testing, windows-store-apps, microsoft-fakes

为了支持在 Windows Store MVVM 应用程序中进行测试，我将 Models 和 ViewModels 拆分为单独的 PCL，仅针对 Windows Store 和 .NET 4.5。我有一个 .NET 4.5 单元测试项目，它引用了 Model/ViewModel PCL 并让它生成该 .dll 的假程序集

这一切都很好，直到我尝试构建项目，此时单元测试库无法在输出中构建：

```
framework assembly path: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\PublicAssemblies
output path: C:\Project\Project.UnitTest\FakesAssemblies
intermediate path: C:\Project\Project.UnitTest\obj\Release\Fakes
Fakes: 1 (1 .fakes files)
    Fakes\Project.Portable.fakes
fakes tool: C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Fakes\fakes.x86.exe
Microsoft Fakes v11.0.51106.1 - .NET v4.0.30319
Copyright (c) Microsoft Corporation 2007-2010\. All rights reserved.

fakes
  code : assembly C:\Project\Project.Portable\bin\Release\Project.Portable.dll failed to load properly
fakes generator 1 errors, 0 warnings
result: error while loading the assembly (-1005 - 0xfffffc13)
Microsoft Fakes v11.0.51106.1 - .NET v4.0.30319
Copyright (c) Microsoft Corporation 2007-2010\. All rights reserved.

fakes
code : assembly C:\Project\Project.Portable\bin\Release\Project.Portable.dll failed to load properly
fakes generator 1 errors, 0 warnings 
```

如果我从命令行对项目手动运行 fakes 生成器，它会成功。

我见过一些有不同问题的人在构建中生成假货，也可以通过命令行来完成，但失败不同。我可以直接引用 fakes .dll 而不是在构建中生成它，并确保每次项目更改时我都手动生成它，但这对我来说似乎是最后的手段。

# python - CSV 模块，Python：列表索引超出范围

> ID：15613576
> 
> 赞同：0
> 
> 时间：2013-03-25T11:16:50.690
> 
> 标签：python, csv, import, module

因此，我尝试使用 Python 中的 CSV 模块从两个 excel 文件中的某些列中获取数据。我是编程新手，所以可能犯了一个非常愚蠢的错误，请多多包涵...

这是它的外观：

```
import sys
import csv

##functions

resultsdir = "/blah"

filename1=sys.argv[1]
filename2=sys.argv[2]
out = open(sys.argv[3],"w") 

#filename1,filename2 = "blub", "blub2"

reader1 = csv.reader(open(resultsdir+"/"+filename1+".csv"), delimiter= '\t')
reader2 = csv.reader(open(resultsdir+"/"+filename2+".csv"), delimiter= '\t')

fields1 = reader1.next()
fields2 = reader2.next()

CNVs1 = dict()
CNVs2 = dict() 
```

现在我想从两个 excel 文件的 3 列中获取数据，这就是我所做的：

```
for row in reader1:
    start = row[4] #start being the title of the 5th column, this is probably where I went wrong...
    end = row[5]
    BF = float(row[9])
    CNVs1[chr].append([int(start),int(end),BF]) 
```

对于 reader2 也是如此。当我运行它时，我收到以下错误消息：

```
start = row[4]
list index out of range 
```

我不知道在这种情况下这意味着什么，正如我所说，我是新手，所以它可能非常简单。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-11T12:01:30.067

尝试使用**Pandas**的`read_csv`函数并明确指定您将要使用的列。例如，

```
import pandas as pd

# some code

reader1 = pd.read_csv('excelfile.csv', usecols=[4,5,6])
reader1 = reader1.values.tolist()

# Now you can access the elements in the list reader1

for row in reader1:
    print(row) 
```

您选择如何修改这完全是您的选择。
此外，如果要指定一系列列的范围，则还可以像这样使用`range`函数`usecols`：
`usecols=range(4,7)`其中列从第 4 列开始，在第 6 列结束（不考虑第 7 列）。
您始终可以在线找到使用**Pandas**的文档和示例。这是一个很棒的图书馆。
我不确定您是否需要其他建议，但我会说使用`defaultdict`而不是代码中的内置`dict()`函数。

# javascript - 用 require.js 实现 jQuery 的正确方法

> ID：15613577
> 
> 赞同：29
> 
> 时间：2013-03-25T11:16:52.457
> 
> 标签：javascript, jquery, requirejs, amd

我正在使用 require.js 和 jQuery 的当前稳定版本，我目前正在包括这样的 jQuery

```
requirejs.config({
paths: {
    'jQuery': 'vendor/jquery',
}
});

require(['jQuery'], function(jQuery) {
    log(jQuery); // working
}); 
```

我没有得到的是我真的不需要明确地归还 jQuery，因为它仍然可以工作（也在其他模块中）：

```
require(['jQuery'], function( // nothing here ) {
    log(jQuery); // working
}); 
```

现在我不确定这是否是正确的做法，也是因为使用 $ 美元符号来引用 jQuery 不起作用！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-26T23:55:52.683

我看到的关键点：

1.  与 RequireJS 一起使用时，jQuery 将自己注册为名为“jquery”的模块（全部小写）。在您的示例中，您试图将其用作“jQuery”，这有点混淆，因为这也是它在加载时注册的全局函数的名称（参见第 2 点）。
2.  默认情况下，jQuery 使用全局函数“$”和“jQuery”注册自己，即使与 AMD/RequireJS 一起使用也是如此。如果要关闭此行为，则必须调用 noConflict 函数。
3.  您可以在 noConflict 调用中包装 RequireJS 对 jQuery 的引用，如下例所示。据我所知，当您没有其他需要全局 $ 或 jQuery 的模块时，这是推荐的方法：

    ```
    requirejs.config({
        paths: {
            'jquery': 'vendor/jquery',
        }
    });

    define('jquery-private', ['jquery'], function (jq) {
        return jq.noConflict( true );
    });

    require(['jquery-private'], function(jq) {
        console.log(jq);      // working
        console.log($);       // undefined
        console.log(jQuery);  // undefined
    }); 
    ```

另请参阅[我在此问题](https://stackoverflow.com/questions/15574500/stop-global-jquery-with-plugin-in-requirejs/15577738#15577738)中关于如何映射其他模块以使用私有（无冲突）版本的回答。

有关更多背景信息，请参阅 jQuery 源代码中的这些行，它们是我上面描述的所有内容的原因：

```
 // Expose jQuery to the global object
    window.jQuery = window.$ = jQuery;

    // Expose jQuery as an AMD module, but only for AMD loaders that
    // understand the issues with loading multiple versions of jQuery
    // in a page that all might call define(). The loader will indicate
    // they have special allowances for multiple jQuery versions by
    // specifying define.amd.jQuery = true. Register as a named module,
    // since jQuery can be concatenated with other files that may use define,
    // but not use a proper concatenation script that understands anonymous
    // AMD modules. A named AMD is safest and most robust way to register.
    // Lowercase jquery is used because AMD module names are derived from
    // file names, and jQuery is normally delivered in a lowercase file name.
    // Do this after creating the global so that if an AMD module wants to call
    // noConflict to hide this version of jQuery, it will work.
    if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
        define( "jquery", [], function () { return jQuery; } );
    } 
```

**更新：** RequireJS 站点的[使用 jQuery 部分](http://www.requirejs.org/docs/jquery.html)已更新以反映上述信息。另请参阅[此答案](https://stackoverflow.com/questions/17615594/using-private-jquery-with-requirejs-issue-after-optimisation/17625765#17625765)以了解包括优化器的分步操作。只是想再次强调，这种 noConflict 方法仅在您的**所有**插件都兼容 AMD 时才有效。

# crystal-reports - 访问选项 .dbf 文件水晶报告

> ID：15613579
> 
> 赞同：0
> 
> 时间：2013-03-25T11:16:59.477
> 
> 标签：crystal-reports, dbf

我希望可以就以下通过水晶访问 .dbf 的选项提供一些意见？（优点、缺点、示例或替代方法）

从我迄今为止的测试来看，似乎有几种访问 .dbf 文件的选项，其中一些似乎在速度、索引或链接选项方面受到限制。

笔记：

*   多个表，每个表都有一个唯一的 .dbf 文件

*   一对一和多对一关系

*   一些可用的索引文件 .idx 文件

表（比如）stock.dbf、sales.dbf、customers.dbf

* * *

方法 - 使用数据资源管理器
1.（我们使用过的最常用的方法）查找数据库文件。
2\. ODBC --> Visual FoxPro 表 --> Path_of_folder
3\. 将 .dbf 表导入 SQL --> 直接通过数据库访问
4\. 我还认为可以通过 SQL 直接选择文件或创建 sql文件的视图。就像是：

```
select * from OPENROWSET('MICROSOFT.JET.OLEDB.4.0','dBase IV;
HDR=NO;IMEX=2 DATABASE=Path_of_folder','select * from
stock.dbf OUTER JOIN sales.dbf') 
```

或者

```
Select * from openrowset('VFPOLEDB','Path_of_folder\Stock.dbf';
'';'','select * from stock') 
```

* * *

结果测试：

方法一

*   无法创建没有索引的关系链接
*   仅在索引字段上的链接
*   似乎只链接多对一（sales.dbf 到 stock.dbf）而不是一对多（stock.dbf 到 sales.dbf）。[如果说库存商品没有销售因此从未出现在报告中，这将成为一个问题]

方法二

*   不允许添加索引
*   将允许左或右外部关节
*   未经证实，这是在使用多个表时正确扫描（我怀疑不是）

方法三

*   原始 .dbf 文件需要定期更新 & 导入需要数小时

方法四

*   只是一个理论，可以通过查看 .dbf 文件来压缩数据（希望能加快进程）

* * *

谢谢乙

系统说明：Crystal Reports 8.5 sp3（我们尝试过，Crystal XI 使用这些文件并发现数据库扫描问题）
数据库：早期版本的 .dbf 文件（我听说它们类似于 dBase 文件）

# audio - Spotify 使用什么音频格式以及它们如何将文件传输到移动设备？

> ID：15613581
> 
> 赞同：2
> 
> 时间：2013-03-25T11:17:01.730
> 
> 标签：audio, spotify

这个问题纯粹是出于好奇。

我注意到，当我将手机与我的 Spotify 播放列表同步时，音乐的传输速度非常快，我没有进行基准测试或其他什么，但感觉比下载 20 个左右的 mp3 快几倍。

他们是怎么做到的？它是某种特殊的音频格式吗？或者他们在传输时以某种方式压缩数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:39:19.923

这不是一个真正的编程问题，但我会咬一口。

Spotify 为其移动客户端使用 OGG 音频。根据您为离线同步选择的质量，它可以是 96、160 或 320 kbit/sec，在大小上与等效的 MP3 比特率并没有太大区别。然而，Spotify 客户端和后端确实有一个非常优化的网络堆栈，所以你*可能*会看到这一点，但如果考虑到绝大多数网络堆栈提供的延迟优势足以产生明显的效果，我会感到惊讶时间花在实际下载曲目而不是请求它上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T12:50:04.450

有趣的是，Spotify 使用 OGG 流式传输音乐，但无法播放本地 OGG 文件。

[http://community.spotify.com/t5/Spotify-Ideas/Local-file-support-OGG-Vorbis/idi-p/5451](http://community.spotify.com/t5/Spotify-Ideas/Local-file-support-OGG-Vorbis/idi-p/5451)

# c# - created 事件被触发 文件尚未完成写入

> ID：15613582
> 
> 赞同：1
> 
> 时间：2013-03-25T11:17:02.880
> 
> 标签：c#

![在此处输入图像描述](../Images/19072bcceb507a7c6ad97f381d2ddf81.png)我正在尝试实现一个文件观察器，如果创建了文件，它将引发一个事件。创建事件触发的问题 文件未完成写入。文件仍在使用中，创建事件在文件创建完成之前触发。

# ios - 使用 NSFetchedResultsControllerDelegate 隐藏第一行

> ID：15613583
> 
> 赞同：0
> 
> 时间：2013-03-25T11:17:04.963
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller, uitableview

请帮帮我。我有一个简单的核心数据模型，其中包含一个名为 Turn 的 ManagedObject，具有一个 NSDate 值 updatedAt 和一个名为“gameId”的属性。构造 NSFetchedResultsController 真的很困难，因为我不能在里面放一个简单的谓词。将 fetchOffset 设置为 1 不起作用，因为 NSFetchedResultsController 不会为此烦恼。此外，仅将 numberOfRowsInSection 减少 1 会带来很多问题，因为 NSFetchedResultsControllerDelegate 内置了很多检查，并且会引发错误。

这个问题的简单解决方案是什么？

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:39:59.003

你可以用这样的东西隐藏它：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row==0) {
        return 0;
    }
    return 80;
 } 
```

# iphone - 如何在iPhone中获得最接近的更大整数值

> ID：15613585
> 
> 赞同：1
> 
> 时间：2013-03-25T11:17:11.473
> 
> 标签：iphone, ios

我的 iPhone 应用程序中有一些与数学相关的代码。我有一些方程式如下。

```
int tempVal = 56/50;
NSLog(@"%d", tempVal); 
```

输出
`2013-03-25 16:29:36.749 TestApp[1467:c07] 1`

实际上`56/50 = 1.12`，我`tempVal`是整数，这就是为什么我的结果是 1。

但我想要更接近更大的价值然后结果。我的意思是我想`2`作为我的输出。我不能以编程方式在`tempVal`like
`tempVal+1`or `tempVal = tempVal + 1`or something中进行增量。

有没有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:23:44.900

这是执行此操作的方法（假设您想`tempVal`保持 int 而不是 float）：

```
int tempVal = ceil((float)56/50);

NSLog(@"%d", tempVal); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:23:58.310

与 apply相同的规则`C`：56 和 50 是整数，因此 56/50 是一个除数`integer`。`Integer`除法会截断，因此 56/50 会产生整数 1。如果您正在`float`取值，那么它可以正常工作。

```
float tempVal = 56.0/50.0;
    NSLog(@"%f", ceil(tempVal)); 
```

或者

```
float tempVal =(float) 56/50;
    NSLog(@"%f", ceil(tempVal)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:20:58.007

您可以简单地使用`%`模数运算符来检查它们是否是答案中的分数，并根据该检查增加。

```
int tempVal = 56/50;
if ((56 % 50) > 0){
     tempVal ++;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:26:14.770

关于什么

```
int firstValue = ...;
int secondValue = ...;

int result = (firstValue + (secondValue - 1)) / (secondValue); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:25:38.677

`int tempVal = (56 + (50 - 1)) / 50;`

更一般地（对于正值）： `int result = (value + (divisor - 1)) / divisor;`

非常基本的向上舍入。应该在每个程序员的工具箱中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-25T11:24:57.320

只需使用`ceil()`：

```
int tempVal =  ceil((float)56/50); 
```

# web-services - 向网站输入数据

> ID：15613586
> 
> 赞同：1
> 
> 时间：2013-03-25T11:17:24.280
> 
> 标签：web-services, javafx-2

我正在做一个几个月前的项目。我需要让它更加用户友好。该程序现在所做的是呈现一个加载站点并用户登录的小网络窗口。我现在想做的是能够要求用户给我他/她的登录信息，然后发送它从代码到网站，然后“按下”提交。使用户不必等待网页呈现，界面更加人性化。

我知道我可以使用 Jetty 来做到这一点，但问题是我使用 NetBeans 并且无法迁移项目。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:18:02.643

您可以使用 javascript 输入必要的值并提交表单，以便在页面加载时从 java 执行 javascript，您可以这样做：

```
webview.getEngine().getLoadWorker().stateProperty().addListener(new ChangeListener<State>() {
    public void changed(ObservableValue<? extends State> ov, State oldState, State newState)
    {
        if (ov.getValue() == State.SUCCEEDED)
        {
            webview.getEngine().executeScript("... javascript to submit the form goes here ...");
        }
    }
}); 
```

# c# - global.asax 日志

> ID：15613587
> 
> 赞同：0
> 
> 时间：2013-03-25T11:17:24.523
> 
> 标签：c#, asp.net-mvc, global-asax, nlog

我正在尝试记录 Web 应用程序的结束（使用 nlog），并尝试在 Global.asax Application_End() 中进行。不幸的是，应用程序域不再可用，并且 nlog 无法检测到应用程序名称。在 Application_End() 之前是否触发了特定事件，我可以从内部使用日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T23:03:07.563

也许您可以使用[HttpApplication.Dispose](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.dispose%28v=vs.100%29.aspx)方法。

如[IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述中](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)所述，该`Dispose`方法在之前被调用`Application_End`。

我知道这适用于 IIS 5.0 和 6.0，但正如 IIS 7.0 的[ASP.NET 应用程序生命周期概述中](http://msdn.microsoft.com/en-us/library/bb470252%28v=vs.100%29.aspx#GlobalAsax)所述，它与 IIS 7.0 相同。

# python - Python：包含 3 个项目的字典

> ID：15613589
> 
> 赞同：0
> 
> 时间：2013-03-25T11:17:27.307
> 
> 标签：python, text, hash

我有一个包含 3 列的文件：

```
ArabicWord POS EnglishTranslation 
```

这是阿拉伯语单词，它的邮政标签和该阿拉伯语单词的英文翻译。所以一个阿拉伯语单词可能会根据不同的词性标签有不同的翻译。现在我想将此文件存储在 Python 中的哈希中。但我的问题是每列的实体可能不止一次出现（没有一个是唯一的）。存储此文件的一种方法是连接第一列和第二列以创建一个唯一实体（特定标签的每个阿拉伯语单词只允许有一个翻译），但由于我需要散列来进一步处理，这种方式会减慢进程. 还有其他方法吗？

*更新：* 第一种方法适用于存储文件。但我现在的问题是如何使用这些元组。我可以通过简单的 dict[0], dict[1] 访问阿拉伯语单词及其 pos 标签，但我怎样才能访问英文翻译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:41:50.180

根据您对问题的评论，我会使用字典词典：

定义数据结构：

```
>>> words = { 'ArabicWord' : { 'POS1' : 'EnglishTranslation1' } }
>>> words['ArabicWord']['POS2'] = 'EnglishTranslation2'
>>> words
{'ArabicWord': {'POS2': 'EnglishTranslation2', 'POS1': 'EnglishTranslation1'}} 
```

查找特定阿拉伯语单词的所有 POS 标签：

```
>>> words['ArabicWord'].keys()
['POS2', 'POS1'] 
```

查找特定 ArabicWord/POS 标签组合的英文翻译：

```
>>> words['ArabicWord']['POS1']
'EnglishTranslation1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:59:05.827

我建议使用内存中的[sqlite](http://docs.python.org/2/library/sqlite3.html)数据库。这将允许您继续将数据作为三个不同的列处理，并且可以轻松获取所需的任何数据。

# caching - Nginx FastCGI缓存VS清漆？

> ID：15613591
> 
> 赞同：5
> 
> 时间：2013-03-25T11:17:34.890
> 
> 标签：caching, nginx, fastcgi, varnish, php

我目前正在开发一个高性能、高负载的 Web 应用程序。

我目前正在为 PHP-FPM、APC（操作码缓存）运行带有 FastCGI 的 nginx，但它也是一个新功能；FastCGI 缓存。FastCGI 缓存允许我缓存动态内容（如 php 页面），这极大地加快了应用程序的速度。

我有一个问题。我应该坚持使用 FastCGI 缓存，还是 Varnish“更好”（更快）？我只在速度和并发方面寻找纯粹的性能。到目前为止，我对 FastCGI 非常满意，但我在网上阅读了数千篇文章，都说 Varnish 很好。

然而，[根据这个 benchmark/article](http://todsul.com/nginx-varnish)，对于许多并发用户来说，Varnish 似乎是一个糟糕的选择。真的是这样吗？

我很好奇你以前在这方面的经历，请分享你的想法！由于 FastCGI 缓存相当新，我很难用它和 Varnish 找到基准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:52:44.033

我不会完全相信在`Apache Bench`. 与多次请求单个页面相比，它在实时高负载下的不同场景。`Varnish`还不错，你应该知道如何正确配置它。最好看看如何`Varnish and Nginx`处理/清除缓存。但是，我相信`Nginx Microcache`它是超快的。但同样，你`Hardware and OS`也起着至关重要的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:19:54.527

用 AB 做简单的测试没问题。但是 varnish 配置缺少任何影响性能和线程的守护程序设置 - 因此无法说您是否可以从链接的基准测试中说出任何内容。

我在普通机器上运行 15k req/s 峰值的清漆。投入使用之前的基准测试显示负载非常低，为 50k req/s。如果您以 8k 的速度降落，则您的配置中出现了严重错误（或者如果您什么也没做）。

如果你谷歌一下 varnish 配置，你也会看到许多有经验的人都在谈论处理 2-300k req/s。

# jquery - 在jQuery中用另一种颜色替换特定颜色

> ID：15613594
> 
> 赞同：1
> 
> 时间：2013-03-25T11:17:38.447
> 
> 标签：jquery

我在我的网站上有以下颜色作为主题颜色：

```
#0088cc; 
```

如何通过更改 body 类在整个 DOM/网页中应用它的每个元素上用另一种颜色替换这种颜色？

例如。

```
if ($('body').hassClass('black')){
   replace all #0088cc with #000;
} 
```

颜色代表所有不同的 html 颜色：边框、背景、文本颜色等

**更新：**

我看到每个人都没有正确理解这个问题：

我有颜色#0088cc 作为我的主要主题颜色。现在正文中的各种元素都有这种颜色作为文本颜色、背景颜色、边框颜色。所以我想用一种新颜色替换身体的子元素（所有为某物定义了该颜色的元素）内的每种颜色，这样我就改变了整个主题......

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:20:30.803

```
if ($('body').hassClass('black')){

$(this).css("background","#000"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:26:20.603

你可以使用这个 jquery css 切换器插件来拥有不同的主题。 [http://www.kelvinluck.com/assets/jquery/styleswitch/toggle.html](http://www.kelvinluck.com/assets/jquery/styleswitch/toggle.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:48:54.740

```
 var hexDigits = new Array
            ("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"); 

    //Function to convert hex format to a rgb color
    function rgb2hex(rgb) {
     rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
     return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
    }

    function hex(x) {
      return isNaN(x) ? "00" : hexDigits[(x - x % 16) / 16] + hexDigits[x % 16];
     }
    $(document).ready(function(){
if ($('body').hassClass('black')){
        $("*").each(function(){
         if(rgb2hex($(this).css("color")) == "#0088cc")
                  $(this).css("color","black");
        });}
    });

Here the demo on jsFiddle http://jsfiddle.net/fAMAu/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:35:44.873

无需单独添加所有这些 css 属性，您可以将所有这些属性合并到一个 css 类中，然后使用 addClass() 方法添加该类（如果需要，请使用 removeClass()）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:19:28.500

下面的代码会将所有具有黑色类的元素的颜色设置为黑色。但是，您可以在 CSS 中设置它，而不是对元素应用另一种颜色

```
 $.fn.replaceCss = function(properties,find,replaceWith, normalize) {
    find = normalize ? normalize(find) : find;
    return this.each(function(){
      var prop,
          self = $(this), 
          css = self.css(properties);

      for(prop in css){
         if(css.hasOwnProperty(prop)){
           val = normalize ? normalize(css[prop]) : css[prop]
           if(val == find){
             css[prop] = replaceWith;
           }
         }
      }
      self.css(css);
      return this;
    });
   }; 
```

然后你可以这样称呼它

```
$('.black').replaceCss(['color','background-color','another-color-property'],
                       "#0088cc",
                       "#000"); 
```

但是颜色可能会以多种格式返回，因此您可能需要先对其进行标准化

```
 $('.black').replaceCss(['color','background-color','another-color-property'],
                       "#0088cc",
                       "#000",
                       function(val){
                          val = val.replace(/\s/g,"");
                          return val == "rgb(0,136,204)" ? "#0088cc" : val
                       }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T11:19:37.547

```
 if ($('body').hasClass('black')){ //hope it is a standard hasClass method

      $(this).css("background","#000"); //replace all #0088cc with #000;

      //or for foreground
      $(this).css("color","#000"); //replace all #0088cc with #000;
    } 
```

# android - 输入“tap”命令缺失（Android 终端模拟器）

> ID：15613598
> 
> 赞同：1
> 
> 时间：2013-03-25T11:17:51.180
> 
> 标签：android, input, terminal, emulation, tap

我的 Android 终端模拟器控制台中缺少命令“tap”，但我的朋友有。我需要做什么？

我安装了 Android 4.0.3、Root Rights、Busybox

[http://img842.imageshack.us/img842/6206/20130325115232.png](http://img842.imageshack.us/img842/6206/20130325115232.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:47:05.820

我有同样的问题（虽然我有 Android 2.3.7）并且谷歌搜索只会把我带到这里。

经过一番研究（查看`input`-script，实际上只启动类`com.android.commands.input.Input`）我发现“tap”事件首先在android 4.1.1中可用。

请参阅：[Input.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/com/android/commands/input/Input.java)，如果您浏览到一个版本，您将看到差异。

似乎只需替换 Input-class 就可以很容易地在旧版本中使用该功能，前提是我知道一种简单的方法来做到这一点:) （尽管我不知道这一代中是否使用了其他 API的点击事件，例如`injectPointerEvent`，在旧版本中可用。）

PS：我希望你是抵抗组织的一员，否则我可能会后悔帮助你:)

# mysql - SSIS：如何过滤具有 1 个或多个空列的行并确定哪些是列？

> ID：15613600
> 
> 赞同：0
> 
> 时间：2013-03-25T11:17:56.663
> 
> 标签：mysql, ssis

我希望有人可以帮助我。我正在从excel中提取并使用SSIS加载到ole数据库中。在它进入数据库之前，我必须过滤掉具有无效列和空列的行，并将这些有错误的行存储在另一个数据库中以防出错。

这是我的 TransactionRecord Excel 中的数据：

```
CustID  TransactionDate TransactionTime AmountSpent
123     1/2/2011        10:30           $1 
(null)  3/4/2012       (null)           $8 
789     3/4/2011        12:00           $7 
698     (null)          11:23           $5 
```

*(null) 表示 excel 中的空字段。

目前，这是我在 SSIS 所做的

TransactionRecord.xlsx ---> Conditional Split --(Case 1:filter rows with null)--> ErrorDB
                                                                      --(默认输出)---> TransactionDB

我只能在以下条件下过滤掉具有空值的行：
ISNULL(CustID) || ISNULL(交易日期) || ISNULL(事务时间) || ISNULL（已花费金额）

但是，使用这种方法，我无法识别哪些是具有空值的列。我正在考虑在 ErrorDB 中有一个 ErrorMsg 列，它将说明哪些是需要更改的列。

错误数据库：

```
CustID  TransactionDate   TransactionTime   AmountSpent   ErrorMsg
null    3/4/2012          null              $8            CustIDNull, TimeNull
698     null              11:23             $5            DateNull 
```

我尝试使用“派生列”转换来添加新的 ErrorMsg 列，但是，我无法确定哪些列有错误。

有没有更好的方法来提取这些错误列并将它们存储在数据库中？

（无法发布图片，因为我是 stackoverflow 的新手，因此没有足够的声誉点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:03:36.407

如果您希望您的 ErrorMsg 列包含发现的第一列错误，则将以下内容添加到派生列中：

```
ISNULL(CustID) ? "CustID Error" : 
  ISNULL(TransactionDate) ? "TransactionDate Error" :
    ISNULL(TransactionTime) ? "TransactionTime Error" : 
      ISNULL(AmountSpent) ? "AmountSpent Error" : "Unknown Error" 
```

如果您想要列错误列表，请使用以下内容：

```
LTRIM((ISNULL(CustID) ? "CustID " : "") +
(ISNULL(TransactionDate) ? "TransactionDate " : "") +
(ISNULL(TransactionTime) ? "TransactionTime " : "") +
(ISNULL(AmountSpent) ? "AmountSpent" : "")) 
```

或者，通过脚本组件转换发送您的错误，然后您可以将其设置为每个错误列写出一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:07:12.680

1.  使用多播转换从主数据流中分离出来
2.  使用异步脚本组件循环遍历所有列并为具有空值的每一行/列写入一个新行
3.  将生成的数据流写入您的 ErrorDB

此脚本的代码将类似于：

```
' Loop through all columns and create field elements
For Each column As IDTSInputColumn100 In Me.ComponentMetaData.InputCollection(0).InputColumnCollection

'Get Column Name
sColumnName = column.Name

' Get column value, will catch if null 
Try

    'Clean up column name (VB/SSIS will do this when processing columns so we need to ask for the value using cleaned up column name)
    sColumnNameClean = column.Name.Trim().Replace(" ", "").Replace(".", "").Replace(":", "").Replace("-", "")

    'Get column value
    sColValue = rowType.GetProperty(sColumnNameClean).GetValue(Row, Nothing).ToString()

Catch

    'Add reference to function to create row here, referencing sColumnName

End Try

Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T15:46:19.800

我使用您的数据创建了一个 Excel 2010 文件。

然后我创建了两个表：

```
CREATE TABLE [123XLSX] (
    [CustID] INT  NOT NULL,
    [TransactionDate] datetime NOT NULL,
    [TransactionTime] datetime NOT NULL,
    [AmountSpent] money NOT NULL
)

CREATE TABLE [123XLSXError] (
    [CustID] VARCHAR(50) NULL,
    [TransactionDate]  VARCHAR(50) NULL,
    [TransactionTime]  VARCHAR(50) NULL,
    [AmountSpent]  VARCHAR(50) NULL,
    [ErrorCode] int,
    [ErrorColumn] int
) 
```

现在，将您的 Excel 源连接到 OleDB Dest（表 123XLSX]。从这个目标，将错误输出发送到另一个 OLEDB Dest（表 123XLSXError）。

结果：

```
 SELECT * FROM [dbo].[123XLSX]
  SELECT * FROM [dbo].[123XLSXError]

CustID TransactionDate         TransactionTime         AmountSpent
------ ----------------------- ----------------------- ------------
123    2011-01-02 00:00:00.000 1899-12-30 10:30:00.000 1.00
789    2011-03-04 00:00:00.000 1899-12-30 12:00:00.000 7.00

CustID TransactionDate          TransactionTime         AmountSpent ErrorCode  ErrorColumn
------------------------------  -----------             ----------- ----------
NULL   2012-03-04 00:00:00      NULL                     8           -1071607683 41
698    NULL                     1899-12-30 11:23:00      5           -1071607683 42 
```

虽然这不是确切的解决方案，但它会为您提供出错的行及其字段值。

如果你想进一步完善这个结果，这里有几个很好的例子。如果您需要帮助，请告诉我们。

[https://naseermuhammed.wordpress.com/tips-tricks/getting-error-column-name-in-ssis/](https://naseermuhammed.wordpress.com/tips-tricks/getting-error-column-name-in-ssis/)

[http://dougbert.com/blog/post/Adding-the-error-column-name-to-an-error-output.aspx](http://dougbert.com/blog/post/Adding-the-error-column-name-to-an-error-output.aspx)

# iphone - iphone应用禁用UITextField上的键盘

> ID：15613614
> 
> 赞同：-2
> 
> 时间：2013-03-25T11:18:37.853
> 
> 标签：iphone, objective-c, keyboard, uitextfield

APP开发新手，遇到问题。当我创建我的文本然后用户点击键盘出现的文本时，如何禁用键盘出现？

你能帮助我吗？

这是我的 UITextField 文本代码：

```
UITextField *textField1 = [[UITextField alloc] initWithFrame:CGRectMake(108, 31, 105, 22)];
[contentView addSubview:textField1];
textField1.alpha = 1.0;
textField1.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleBottomMargin;
textField1.text = @"my talent";
textField1.borderStyle = UITextBorderStyleNone;
textField1.textAlignment = UITextAlignmentCenter;
textField1.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;
textField1.textColor = [UIColor colorWithRed:0.6 green:0.6 blue:0.6 alpha:1.0];
textField1.font = [UIFont fontWithName:@"Helvetica" size:17.0];
[textField1 release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:43:37.797

你可以写在你的 UIViewController

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    return NO;
} 
```

但是如果你只想显示文本，你应该使用 UILabel。你真的想用它做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:21:13.753

`UITextField`用于输入文本，如果您只想显示文本，请使用`UILabel`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T05:14:49.620

首先设置委托，然后使用下面的方法

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  return NO;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:24:04.753

尝试这个

```
textField1.userInteractionEnabled = TRUE; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T11:48:12.770

你可以使用这个代码

```
textField1.userInteractionEnabled = FALSE; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T11:34:22.220

或者你可以使用`textField1.enabled = NO;`

# php - PHP SQL查询密码必须等于列名才有效，不是实际值？

> ID：15613615
> 
> 赞同：3
> 
> 时间：2013-03-25T11:18:37.980
> 
> 标签：php, html, sql, mamp

我有一个有点奇怪的问题，我真的不知道为什么会这样。首先，我尝试使用运行良好的 php 访问数据库。它可以毫无故障地访问它（检查），所以我很确定它的那个区域是正确的。

我正在使用 php 代码访问查询：

```
mysqli_query($database, "SELECT * FROM user WHERE username = $username AND password =     $password"); 
```

它正在访问数据库：

![数据库定义](../Images/c9edeab3bbb00deb4a6126e000862846.png)

所以这就是问题所在。我正在尝试使用用户名和密码登录。如果我输入了错误的用户名，它会选择它并拒绝它，所以用户名部分没有任何问题。但是，如果我使用正确的用户名和密码，它仍然会因为密码而拒绝它。但是，如果我使用正确的用户名和密码“密码”（与列名相同，我已经尝试使用不同的列名，效果相同），只要用户名正确，它就可以工作。

以前我使用 echo 来确保我输入的用户和密码都被接收到了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:20:47.757

改变

`mysqli_query($database, "SELECT * FROM user WHERE username = $username AND password = $password");`

至：

`mysqli_query($database, "SELECT * FROM user WHERE username = '$username' AND password = '$password'");`

即在你的字符串周围加上引号。

你可能实际上从数据库中得到了一个错误……所以你也应该检查一下。

**编辑：**还请注意@MarcelKorpel 关于 SQL 注入的评论/警告。我上面的解决方案更正了您的语法错误。Marcel 的警告纠正了您的方法中的错误；-) 关键是，如果`$username`or`$password`字符串没有经过清理，最终用户可以（例如）输入 SQL 代码，从而有效地将您的查询字符串更改为（由您）无意的内容这可能是（可能是）恶意的。

# javascript - 完整 Node.js 网站的组成部分

> ID：15613617
> 
> 赞同：1
> 
> 时间：2013-03-25T11:18:52.827
> 
> 标签：javascript, node.js, model-view-controller, nosql, sails.js

几周以来，我对 Node.js 进行了大量研究。我可以看到 Node.js 非常强大，但我在制作一个功能齐全的网站时有一些不足之处。

**我知道的：**

*   Node.js 有很好的框架，例如 Express、Sails、Meteor、Compound、Tower 等。
*   Nosql 数据库更适合 Node.js。我发现 MongoDB 和 Mongoose 模块比其他模块更胜一筹。

**我想念什么并问：**

Node.js 框架具有 Handlebars、ejs 等模板引擎。如果我是对的，您可以像这样传递数据……但这是否足够？

我真的不了解 Node.js 网站的前端部分。可以说我正在将 express 与 mongodb 数据库一起使用。我需要前端的 javascript MVC 框架吗？如果我不知道什么是应用程序骨架？

有人可以向我解释一个完整的 Node.js 网站的成分以及使用什么、在哪里使用列表吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:46:32.597

这个问题可能很快就会被关闭，因为它是模棱两可的，但这里有一些提示：

> Node.js 框架具有 Handlebars、ejs 等模板引擎。如果我是对的，您可以像这样传递数据……但这是否足够？

这取决于您的应用程序。这对某些人来说已经足够了，但对其他人来说还不够。

> 我真的不了解 Node.js 网站的前端部分。可以说我正在将 express 与 mongodb 数据库一起使用。我需要前端的 javascript MVC 框架吗？如果我不知道什么是应用程序骨架？

前端部分与您使用任何其他后端语言（例如 Ruby、PHP、.NET）相同。前端没有任何本质上的不同，只是因为您在后端使用了 Node.js——结尾。

经常看到人们使用 Node.js 做更多“实时”网站，因为一些库（如 Socket.io）使它变得如此简单，但这仅适用于您正在做实时网站（是吗？）

> 有人可以向我解释一个完整的 Node.js 网站的成分以及使用什么、在哪里使用列表吗？

*没有一份可以使用的成分清单*。您可以根据自己的需要混合搭配。

如果我是你，我会从简单的开始。选择一小组库/模块，端到端构建您的应用程序，感受它，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:11:04.620

> 我真的不了解 Node.js 网站的前端部分。可以说我正在将 express 与 mongodb 数据库一起使用。我需要前端的 javascript MVC 框架吗？如果我不知道什么是应用程序骨架？

我假设你有一些 Web 开发背景。

*   当您使用 PHP/Python/Rails/Whatever 编写网站时，您是否需要 JavaScript MVC 框架？

Node.js 是服务器端技术，因此适用于所有其他服务器端技术的规则几乎相同。

# celery - Celery：分布式环境中活动任务的单个实例

> ID：15613618
> 
> 赞同：0
> 
> 时间：2013-03-25T11:18:55.300
> 
> 标签：celery, distributed-computing

我有一个要求，我的应用程序提交某种任务。该任务由客户提交。为了确保他们最终不会提交太多任务，每次他们提交任务时，我都会检查正在运行的进程以及它们是否由同一个客户端提交。如果是这样，则不会提交任务。我想为这类任务水平扩展。因此，我将让多个工作人员在不同的机器上运行，以确保更高的可用性，但是我想确保只有一个任务实例正在被主动处理，并且该任务应该在同一个客户端提交的另一个实例被处理之前完成.

例如，如果提交的任务的年表是 -

```
Client 1 submits t1 
Client 1 submits t2 
Client 2 submits t3 
```

如果`t1`仍在处理中并且如果一个工人被释放，那么它应该拿起`t3`而不是`t2`。

我怎么解决这个问题？速率限制不是一个选项，因为我不知道这些任务需要多长时间。

谢谢，

# sql-server - 通过 TADOConnection 连接到 SQL Server db

> ID：15613620
> 
> 赞同：0
> 
> 时间：2013-03-25T11:18:56.857
> 
> 标签：sql-server, delphi

我的数据库位于通过 VPN 隧道连接到的服务器上。当我尝试通过 SQL Server Management Studio 连接时，没有问题。当我尝试连接此 Delphi 组件时，我收到以下消息：

> 用户登录失败。用户未与受信任的 SQL 连接关联。

虽然在我的连接字符串中我有用户名和密码。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:40:22.697

您应该首先配置您的 MSSQL，更改安全模式。默认情况下它是“仅限 Windows”。将其更改为“Windows 和 SQL 服务器”。这样您就可以使用用户名和密码进行连接。否则，您应该登录到域服务器以生成 SSPI 上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:10:17.847

您的问题不足以充满信心地回答，但强制您的 ADO 连接字符串使用 Windows 身份验证：

> 网络库=DBMSSOCN；集成安全=SSPI；用户 ID=; 密码=; 提供者=SQLOLEDB.1；初始目录=您的数据库名称；数据源=您的服务器名称

**SSPI**用于可信连接 - 使用执行进程的当前安全身份。（登录的用户凭据）

**DBMSSOCN**用于 TCPIP

# uml - Bouml 向类图中的类批量添加操作

> ID：15613622
> 
> 赞同：1
> 
> 时间：2013-03-25T11:19:00.373
> 
> 标签：uml

我正在使用软件 BOUML 进行 uml 建模。我的班级有大约 30 种方法。无论如何，是否可以在类图中批量添加操作（例如，从列表或文件中），而不是在这个工具中一个一个地添加操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:40:20.783

Bouml 允许复制操作（或其他元素），您也有一个条目来重新定义继承的操作

你说“来自列表或文件”这是否意味着你有定义你的类的源文件？如果是，您可以使用反向/往返设置/更新您的模型，假设源语言当然具有反向/往返

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:44:40.383

我不是 BOUML 专家，但我很确定您应该能够扩展它以定义自己的导入或简单地导入一些 XMI 文件或反转一些 Java 或 C++ 代码。

问候，

# ajax - 使用 iframe 进行“长时间轮询”而不会导致浏览器闪烁

> ID：15613623
> 
> 赞同：3
> 
> 时间：2013-03-25T11:19:03.297
> 
> 标签：ajax, internet-explorer, iframe, long-polling

我需要检查命令是否写入 txt 文件，以便更新我的网络浏览器中的 3D 窗口。这就是所谓的**“推送”**技术或**长轮询**来通知客户端。由于浏览器**必须是**Internet Explorer，所以我有点受限。

我想出了一个使用隐藏 iframe 的解决方案，该 iframe 调用每秒重新加载的 php 脚本来检查 txt 文件。

```
<iframe noresize scrolling="no" frameborder="0" name="loader" src="loader.php"> 
```

loader.php 基本上是这样做的：

```
//check txt and get commands
<body onLoad="window.setInterval('location.reload()',1000);"></body> 
```

我看到的唯一问题是网络浏览器中的重新加载按钮每秒都会闪烁。虽然窗口没有闪烁，只是按钮，我还是觉得有点烦。

这个问题有没有更好的解决方案，仍然兼容IE？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:52:26.253

最后，经过多次尝试，我设法使它工作，我认为这是最佳标准解决方案：**长轮询 ajax 解决方案**。由于这给 IE7 带来了很多问题，我将在下面粘贴我的代码。

首先是我的 PHP 文件，它读取一个 txt 并用文本回显一个 JSON。

```
<?php
$commandFile = fopen("./command.txt","r");

fseek($commandFile, 0);
$command = fscanf($commandFile, "%s\n"); //reads the command
fclose($commandFile);

if($command[0] != "")
{
  $commandFile = fopen("./command.txt","w"); //delete first line
  fclose(commandFile);    
  echo json_encode($command[0]);  
}
?> 
```

现在，HTML 主页需要一种机制来递归调用一个函数，该函数启动这个 PHP 文件并检查答案。我的功能是这样的。

```
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<script type="text/javascript">
function longPolling()
{
    $.ajaxSetup({ cache: false }); //This line is THE KEY to work under Internet Explorer
    $.ajax({                
        type: "GET",
            url: "loader.php",
        dataType: 'json',
        async: true,

        success: function(response){                                
            if(response!=""){
                sendCommand(response);  //could be any other function           
            }
            //longPolling();
            setTimeout(longPolling,1000);
                },
        error: function(){
            //longPolling();            
            setTimeout(longPolling,1000);
        }

           });
    };

$(document).ready(function(){   /*waits till the whole page loads*/
    longPolling(); /*start the initial request*/
});
</script> 
</body> 
```

# java - 扫描仪永远不会关闭

> ID：15613626
> 
> 赞同：29
> 
> 时间：2013-03-25T11:19:08.090
> 
> 标签：java, java.util.scanner, resource-leak

我正在开发一款游戏，但我的扫描仪遇到了一个小问题。我得到了一个从未关闭的资源泄漏扫描器。

但我认为我的扫描仪之前没有关闭它就可以工作。但现在不是了。任何人都可以在这里帮助我吗？

```
import java.util.Scanner;

public class Main {

    public static final boolean CHEAT = true;

    public static void main(String[] args) {

        Scanner scanner = new Scanner(System.in);
        int amountOfPlayers;
        do {
            System.out.print("Select the amount of players (1/2): ");
            while (!scanner.hasNextInt()) {
                System.out.println("That's not a number!");
                scanner.next(); // this is important!
        }

        amountOfPlayers = scanner.nextInt();
        while ((amountOfPlayers <= 0) || (amountOfPlayers > 2));
        System.out.println("You've selected " + amountOfPlayers+" player(s)."); 
    }
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-25T11:21:38.147

我假设您使用的是 java 7，因此您会收到编译器警告，当您不关闭资源时，您通常应该在 finally 块中关闭您的扫描仪。

```
Scanner scanner = null;
try {
    scanner = new Scanner(System.in);
    //rest of the code
}
finally {
    if(scanner!=null)
        scanner.close();
} 
```

甚至更好：使用新的[**Try with resource 语句**](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)：

```
try(Scanner scanner = new Scanner(System.in)){
    //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-28T09:42:52.947

根据 Scanner 的 Javadoc，当您调用它的 close 方法时，它会关闭流。一般来说，创建资源的代码也负责关闭它。System.in 不是由您的代码实例化的，而是由 VM 实例化的。所以在这种情况下，不关闭扫描仪是安全的，忽略警告并添加注释为什么你忽略它。如果需要，VM 将负责关闭它。

（题外话：用“数字”这个词代替“数量”更适合一些玩家。英语不是我的母语（我是荷兰语），我曾经犯过完全相同的错误。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-22T07:30:46.930

这是java用于扫描仪的一些更好的用法

```
try(Scanner sc = new Scanner(System.in)) {

    //Use sc as you need

} catch (Exception e) {

        //  handle exception

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:27:04.463

尝试这个

```
Scanner scanner = new Scanner(System.in);
int amountOfPlayers;
do {
    System.out.print("Select the amount of players (1/2): ");
    while (!scanner.hasNextInt()) {
        System.out.println("That's not a number!");
        scanner.next(); // this is important!
    }

    amountOfPlayers = scanner.nextInt();
} while ((amountOfPlayers <= 0) || (amountOfPlayers > 2));
if(scanner != null) {
    scanner.close();
}
System.out.println("You've selected " + amountOfPlayers+" player(s)."); 
```

# javascript - Chrome 对 CSS 的处理相当特别

> ID：15613629
> 
> 赞同：2
> 
> 时间：2013-03-25T11:19:11.060
> 
> 标签：javascript, jquery, css, html

我有这个 CSS 布局，它在 Firefox/Opera 甚至 Safari 中都可以正常工作，但在 Chrome 中的行为略有不同。

我有通常的：

```
* { margin: 0; padding: 0; }

html, body { height: 100%; }

div#container {
    min-height: 100%;
    width: 1000px;      /* giving the page a fixed width */
    margin: 0 auto;     /* centering the page */
    position: relative; /* making the footer stop when it meets the content */
} 
```

现在，一切正常，除非我在 Chrome 中刷新页面。在所有其他浏览器中，当我刷新页面时，内容会自行调整，并且（如果页面的高度不小于内容的最小高度）我不必向下滚动即可查看整个页面。在 Chrome 中，当我刷新页面时，页面变得比屏幕大，我必须向下滚动才能看到所有内容。请注意，内容不应该是问题，因为它不超过主要部分的高度。

HTML 布局基本上是：

```
<body>
    <div id="container">

        <header>stuff...</header>

        <section id="page_content">stuff...</section>

        <footer>stuff...</footer>
    </div>
</body> 
```

而且，如果它可以帮助，主要内容的 CSS 是：

```
section#page_content {
    height: 100%;       /* pay attention: height is actually handled */
    min-height: 400px;  /* by the jQuery code, which resizes it dynamically */
    max-height: 1000px;
    width: 802px;
    margin: 0 auto;
    display: block;
    overflow: auto;
} 
```

每次调整页面大小**和**加载页面时都会调用此 JS 函数：

```
function resizeMainSection() {
    var finalHeight = $(window).height()
        - $('footer#page_footer').outerHeight(true)
        - $('header#page_header').outerHeight(true) // a simple div to stop the footer from going over the content when resizing
        - $('div#footer_stopper').outerHeight(true);
    var mainSection = $('section#page_content');

    if (finalHeight < mainSection.css('min-height')
        || finalHeight > mainSection.css('max-height')) return;
    $(mainSection).height(finalHeight);
} 
```

可能的原因是什么？

### 编辑

我注意到只有当我**刷新**页面时（通过`Cmd`+`R`或通过刷新按钮）我才会遇到这个问题。如果我将相同的 URL 重新插入浏览器并单击`Enter`布局样式正确。因此，正如评论中有人建议的那样，这可能是缓存问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T11:07:59.423

我认为更好的脚本是将结尾从

```
if (finalHeight < mainSection.css('min-height')
    || finalHeight > mainSection.css('max-height')) return;
$(mainSection).height(finalHeight); 
```

至：

```
if (finalHeight < mainSection.css('min-height') 
    finalHeight = mainSection.css('min-height');
if (finalHeight > mainSection.css('max-height')
    finalHeight = mainSection.css('max-height');
$(mainSection).height(finalHeight); 
```

也就是说，高度是一个受最小值和最大值约束的值。如果计算值低于最小值，则适当的操作是将其设置为最小值，而不是退出脚本

# php - php jquery数据表加载问题

> ID：15613631
> 
> 赞同：0
> 
> 时间：2013-03-25T11:19:19.580
> 
> 标签：php, jquery, datatable

我有一个包含 15000 个数据的表。打开页面时，它会波动很多次。即它首先加载整个数据。然后只有它应用分页。我已经设置了每页 500 条记录。但是页面加载非常糟糕。是否可以先只加载 500 条记录而不是加载整个数据。

请让我知道你的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:22:24.200

你在做什么是错误的。您要做的就是为此使用 AJAX。DataTables 开箱即用地支持 AJAX。

[http://www.datatables.net/examples/data_sources/ajax.html](http://www.datatables.net/examples/data_sources/ajax.html)

[http://www.datatables.net/release-datatables/examples/data_sources/ajax.html](http://www.datatables.net/release-datatables/examples/data_sources/ajax.html)

第一次加载你想要的数据。然后，当使用请求获取更多数据时，通过 AJAX 请求获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:23:11.867

也许您应该尝试延迟加载。要配置它，你应该参考这个链接： [http ://datatables.net/usage/server-side](http://datatables.net/usage/server-side)

如果您使用延迟加载，记录会在需要时进行初始化。

希望这可以帮助

# javascript - jQuery each() 函数

> ID：15613632
> 
> 赞同：5
> 
> 时间：2013-03-25T11:19:25.513
> 
> 标签：javascript, jquery

给定列表

```
<ul>
    <li>aaa</li>
    <li>sss</li>
    <li>ddd</li>
</ul> 
```

js代码：

```
$(document).ready( function () {

    $("ul li").each( function () {

          $("ul").empty();

          alert( $(this).text() );        

    });

}); 
```

此代码正常返回每个元素，为什么？为什么列表在第一次迭代时没有被清除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T11:21:52.993

无序列表确实在您的第一次迭代中被清除，但列表项仍然由您创建的 jQuery 对象引用`$("ul li")`。

它们可能不再是 DOM 的一部分，但它们仍然存在于内存中，您仍然可以访问和操作它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:24:32.937

该`.each()`函数创建了一个闭包：**这就是闭包的全部意义所在。**

当该行`$("ul").empty();`执行时，它会清除对列表的引用，但因为同一个列表也被 引用`this`，所以列表仍然存在，只是不再被引用`$("ul li")`。

# batch-file - 如何防止 Robocopy 处理空的顶级目录？

> ID：15613641
> 
> 赞同：6
> 
> 时间：2013-03-25T11:19:59.553
> 
> 标签：batch-file, robocopy

有没有办法利用 Robocopy，这样如果对空的顶级目录调用它就不会复制它？

我正在使用 Robocopy 识别文件和目录，然后在脚本中压缩 - 无法使用标准 Windows 归档功能压缩空目录。

我知道 /s 开关可以防止复制空子目录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T14:38:26.740

如果您在`robocopy /s`没有开关的情况下使用该命令`/e`，则它不会复制任何空文件夹。看来您正在使用，`robocopy /s /e`因为您遇到了空的顶级文件夹的问题。如果您也不想要任何空的子文件夹，则只需省略`/e`开关，不会在目标中创建空文件夹。如果您需要复制空的子文件夹，那么您就无法避免同时复制空的顶级文件夹。但是，您可以像这样轻松删除空的顶级文件夹：

```
robocopy C:\Source\Dir X:\Dest\Dir /s /e
cd /d X:\Dest\Dir
for /d %%i in (*.*) do rd "%%i" > nul 2>&1 
```

该`cd`命令更改为目标驱动器和文件夹，然后该`for`命令尝试删除所有顶级文件夹。只有那些为空的才会被删除。隐藏输出和错误，`> nul 2>&1`因为非空文件夹将显示错误消息，可以忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T11:50:33.810

Robocopy /S 只能解决问题，我注意到，当您运行命令时，如果您在完成之前查看目标文件夹，您可能会看到一些空文件夹，但一旦该过程完成，它们就会消失。

# joomla - 根据需要更改站点 URL 的 joomla 脚本

> ID：15613645
> 
> 赞同：0
> 
> 时间：2013-03-25T11:20:16.393
> 
> 标签：joomla, joomla2.5, router

是否有任何 joomla 2.5 脚本可以根据需要更改站点的 URL。

`http://www.test.com/index.php?com_test`

至

`http://www.test.com/test.html`

没有任何扩展。

如果可能的话，我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:11:40.603

我认为您的问题可以在这个问题中得到回答： [URL rewriting in joomla](https://stackoverflow.com/questions/2620939/url-rewriting-in-joomla)

Joomla 具有重写 url 的内置功能，但您需要激活它：

在全局配置中，有几个用于 url 重写的设置，然后您需要将 Joomla 安装根文件夹中的 htaccess.txt 文件重命名为 htaccess。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:36:32.050

如果您正在开发自己的扩展，则需要创建自己的路由器。这是一个很好的起点[http://docs.joomla.org/Supporting_SEF_URLs_in_your_component](http://docs.joomla.org/Supporting_SEF_URLs_in_your_component)也看看其他扩展是如何做到的（com_contact）。

# ruby-on-rails - 如何在 Ruby on Rails 中连接到 MySQL？

> ID：15613646
> 
> 赞同：15
> 
> 时间：2013-03-25T11:20:20.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是 Ruby on Rails 的新手。我已经阅读[了本教程](http://railsforzombies.org/levels/1#)，听起来很简单。

但是我怎样才能连接到我的数据库（MySQL）或者 Rails 使用什么？在php中我会使用...

```
mysql_connect("...","...","...");
mysql_select_db("..."); 
```

我搜索了谷歌，找不到任何有用的提示。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-25T11:28:04.330

查看配置文件`config/database.yml`

您需要在那里设置您的配置。以下是生产环境的示例：

```
production: 
   adapter: mysql2
   encoding: utf8 
   database: example 
   pool: 10 
   username: example 
   password: secure 
   socket: /var/run/mysqld/mysqld.sock 
   reconnect: true 
```

除此之外，您还必须添加`gem 'mysql2'`Gemfile 并运行`bundle install`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T11:24:25.227

您不必手动执行这些操作，请查看： http: [//guides.rubyonrails.org/configuring.html#configuring-a-database](http://guides.rubyonrails.org/configuring.html#configuring-a-database)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-12T21:01:13.253

我的`config/database.yml`文件内容：

```
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# Install MySql gem if not already there.
# Below command installs some pre-requisites for the installation:
#   sudo apt-get install libmysqlclient-dev mysql-client
# After above, this to finish gem installation:
#   gem install mysql2
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html

development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: YOUR_DATABASE_HERE
  pool: 5
  username: root
  password: root 
```

正如配置上面的评论所说，您可能需要先通过终端安装 mysql2 gem。安装完成后，执行`bundle install`and `rake db:migrate`，然后也可以通过phpmyadmin访问数据库。

一个小时前，我刚刚偶然发现了这个问题，距离提出这个问题已有 2 年多。虽然我知道这已经很晚了，并且肯定 OP 已经解决了这个问题，但是为了像我这样可能会来这里寻求解决方案的其他初学者用户，我想在这里写我的解决方案。希望能帮助到你。

# php - 怎么把2147483647改成原来的手机号

> ID：15613658
> 
> 赞同：-6
> 
> 时间：2013-03-25T11:20:42.567
> 
> 标签：php, mysql, phpmyadmin

在我的具有注册表的数据库中，用户可以在我们的项目中注册，我们可以插入所有值...对于具有手机号码的注册表单，因此在手机号码的数据库中，我将数据类型指定为 int(24)，因此手机号码保存为 2147483647 ....所以然后我更改为 bigint(datatype) 然后现在我可以将手机号码保存为原始号码...这里的问题是之前更改数据类型的手机号码没有更改为原始号码我应该如何获得原始号码数字请给出一个想法或 senario 来做这个过程....我应该如何获得原始数字。(2147483647 至 9999999999)...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:22:38.177

你不能。您没有将原始数据存储在任何地方，因此它会丢失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T11:26:43.057

您无法恢复原始数据。

原因是有符号整数的最大值是`2147483647`。即使您指定`INT(24)`了这并不意味着您可以存储 24 的长度，因为最大允许值为`2147483647`. `24`in声明的含义是填充零的长度，只有在列上启用`INT`时才适用。`ZEROFILL`但是长度仍然不能达到`24`字符。

如果您已将原始数据另存为`9152667253`，它将被截断为 的最大值`2147483647`。

# django - 页面刷新会增加 Django 中的请求大小、CPU 时间和上下文切换。为什么会这样？

> ID：15613660
> 
> 赞同：0
> 
> 时间：2013-03-25T11:20:46.287
> 
> 标签：django

这是我[在处理上一个问题时](https://stackoverflow.com/questions/15609982/having-problems-with-django-context-processors)调试我的博客应用程序后观察到的。

链接：[Django 上下文处理器有问题](https://stackoverflow.com/questions/15609982/having-problems-with-django-context-processors)

在调试我的博客应用程序时，我发现如果我刷新一次页面，它就会正常响应。但是当我刷新它三次或更多次时，它会给我带来**大量****请求大小、CPU 时间和自愿/非自愿上下文切换**的错误。最终给我留下了我仍然担心的**无法分配内存错误。**

我猜在服务器端，当我多次加载页面时，处理请求并没有停止。因此，我得到了**数以千计**的上下文切换和大量的总 CPU 时间错误。

*基本上它就像一个非常小规模的 DDoS 攻击。如果大规模应用，我的应用程序肯定会崩溃。*

有什么方法可以设计我的博客应用程序，使其一次只响应一个请求？或者我的问题还有其他可能的解决方案吗？

# javascript - 分组骨干模型更改

> ID：15613664
> 
> 赞同：0
> 
> 时间：2013-03-25T11:20:57.383
> 
> 标签：javascript, backbone.js

在 Backbone 中，我想对模型进行多次更改，然后只在最后触发一次事件处理程序（以重绘屏幕）。这可能吗？就像是：

```
model.set("attr1",val1);
model.set("attr2",val2);
model.change(); 
```

或者：

```
model.attr1 = val1;
model.attr2 = val2;
model.change(); 
```

曾经有一个`model.change()`方法，但被删除了，引用了更改日志：*“Model#change 方法已被删除，因为延迟属性更改不再可用*”

我不知道“延迟属性更改”之前是如何工作的，但是移除这个能力似乎是倒退了一步？

现在有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:43:53.243

您可以一次设置多个值

```
 model.set({attr1: val1, attr2 : val2}); 
```

或查看静音选项。

```
model.set({attr1: val1, attr2 : val2}, {silent:true}) 
```

您可以在[这里找到一些解决方案](https://stackoverflow.com/questions/6178369/resolving-model-in-backbone-js-call-set-with-silenttrue-and-trigger-attribu)

# drupal - 页面加载成功后Drupal白屏

> ID：15613669
> 
> 赞同：0
> 
> 时间：2013-03-25T11:21:22.677
> 
> 标签：drupal, wsod

管理部分工作正常。问题是当用户加载首页时，它被成功下载（所有资源的状态为 200），然后以某种方式呈现（我可以在几毫秒内看到布局和内容），但随后它“切换”到 about:blank - 一个空白页。

如果我将站点置于维护模式，“维护页面”也会被重定向到空白。

Drupal 的版本是最新的 7.22，我也没有成功应用“Allow Insecure Derivatives”修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:11:16.263

我解决了这个问题。在检查了 Drupal 文档[http://drupal.org/node/158043](http://drupal.org/node/158043)关于“WSOD”的大多数解决方案后，我划掉了许多选项。

不过，问题出在自定义 Drupal 主题中，更准确地说是在上一个链接中未提及的 javascript 文件中。删除用于某种用户跟踪的部分后，页面开始正常工作。

# c - GCC 别名检查 w/Restrict 指针

> ID：15613670
> 
> 赞同：35
> 
> 时间：2013-03-25T11:21:23.697
> 
> 标签：c, optimization, gcc, strict-aliasing

考虑以下两个片段：

```
#define ALIGN_BYTES 32
#define ASSUME_ALIGNED(x) x = __builtin_assume_aligned(x, ALIGN_BYTES)

void fn0(const float *restrict a0, const float *restrict a1,
         float *restrict b, int n)
{
    ASSUME_ALIGNED(a0); ASSUME_ALIGNED(a1); ASSUME_ALIGNED(b);

    for (int i = 0; i < n; ++i)
        b[i] = a0[i] + a1[i];
}

void fn1(const float *restrict *restrict a, float *restrict b, int n)
{
    ASSUME_ALIGNED(a[0]); ASSUME_ALIGNED(a[1]); ASSUME_ALIGNED(b);

    for (int i = 0; i < n; ++i)
        b[i] = a[0][i] + a[1][i];
} 
```

当我编译该函数时，`gcc-4.7.2 -Ofast -march=native -std=c99 -ftree-vectorizer-verbose=5 -S test.c -Wall`我发现 GCC 为第二个函数插入了别名检查。

我怎样才能防止这种情况，使得生成的程序集与 for`fn1`的程序集相同`fn0`？（当参数的数量从 3 个增加到 30 个时，参数传递方法 ( `fn0`) 变得很麻烦，并且该`fn1`方法中的别名检查数量变得荒谬。）

*组装（x86-64，支持 AVX 的芯片）；在 .LFB10 处混叠杂物*

```
fn0:
.LFB9:
    .cfi_startproc
    testl   %ecx, %ecx
    jle .L1
    movl    %ecx, %r10d
    shrl    $3, %r10d
    leal    0(,%r10,8), %r9d
    testl   %r9d, %r9d
    je  .L8
    cmpl    $7, %ecx
    jbe .L8
    xorl    %eax, %eax
    xorl    %r8d, %r8d
    .p2align 4,,10
    .p2align 3
.L4:
    vmovaps (%rsi,%rax), %ymm0
    addl    $1, %r8d
    vaddps  (%rdi,%rax), %ymm0, %ymm0
    vmovaps %ymm0, (%rdx,%rax)
    addq    $32, %rax
    cmpl    %r8d, %r10d
    ja  .L4
    cmpl    %r9d, %ecx
    je  .L1
.L3:
    movslq  %r9d, %rax
    salq    $2, %rax
    addq    %rax, %rdi
    addq    %rax, %rsi
    addq    %rax, %rdx
    xorl    %eax, %eax
    .p2align 4,,10
    .p2align 3
.L6:
    vmovss  (%rsi,%rax,4), %xmm0
    vaddss  (%rdi,%rax,4), %xmm0, %xmm0
    vmovss  %xmm0, (%rdx,%rax,4)
    addq    $1, %rax
    leal    (%r9,%rax), %r8d
    cmpl    %r8d, %ecx
    jg  .L6
.L1:
    vzeroupper
    ret
.L8:
    xorl    %r9d, %r9d
    jmp .L3
    .cfi_endproc
.LFE9:
    .size   fn0, .-fn0
    .p2align 4,,15
    .globl  fn1
    .type   fn1, @function
fn1:
.LFB10:
    .cfi_startproc
    testq   %rdx, %rdx
    movq    (%rdi), %r8
    movq    8(%rdi), %r9
    je  .L12
    leaq    32(%rsi), %rdi
    movq    %rdx, %r10
    leaq    32(%r8), %r11
    shrq    $3, %r10
    cmpq    %rdi, %r8
    leaq    0(,%r10,8), %rax
    setae   %cl
    cmpq    %r11, %rsi
    setae   %r11b
    orl %r11d, %ecx
    cmpq    %rdi, %r9
    leaq    32(%r9), %r11
    setae   %dil
    cmpq    %r11, %rsi
    setae   %r11b
    orl %r11d, %edi
    andl    %edi, %ecx
    cmpq    $7, %rdx
    seta    %dil
    testb   %dil, %cl
    je  .L19
    testq   %rax, %rax
    je  .L19
    xorl    %ecx, %ecx
    xorl    %edi, %edi
    .p2align 4,,10
    .p2align 3
.L15:
    vmovaps (%r9,%rcx), %ymm0
    addq    $1, %rdi
    vaddps  (%r8,%rcx), %ymm0, %ymm0
    vmovaps %ymm0, (%rsi,%rcx)
    addq    $32, %rcx
    cmpq    %rdi, %r10
    ja  .L15
    cmpq    %rax, %rdx
    je  .L12
    .p2align 4,,10
    .p2align 3
.L20:
    vmovss  (%r9,%rax,4), %xmm0
    vaddss  (%r8,%rax,4), %xmm0, %xmm0
    vmovss  %xmm0, (%rsi,%rax,4)
    addq    $1, %rax
    cmpq    %rax, %rdx
    ja  .L20
.L12:
    vzeroupper
    ret
.L19:
    xorl    %eax, %eax
    jmp .L20
    .cfi_endproc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T12:13:51.107

可以告诉编译器停止检查别名：

请添加行：

```
#pragma GCC ivdep 
```

就在您要矢量化的循环前面，如果您需要更多信息，请阅读：

[https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Loop-Specific-Pragmas.html](https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Loop-Specific-Pragmas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T08:02:51.647

Well, what about the flag

```
-fno-strict-aliasing 
```

?

As I understood you right you just want to know how to turn this checks off? If thats all, this parameter to gcc commandline should be helping you.

**EDIT:**

In addition to your comment: isn't it forbidden to use const type restrict pointers?

this is from ISO/IEC 9899 (6.7.3.1 Formal definition of restrict):

1.

> Let D be a declaration of an ordinary identifier that provides a means of designating an object P as a restrict-qualified pointer to type T.

4.

> During each execution of B, let L be any lvalue that has &L based on P. If L is used to access the value of the object X that it designates, and X is also modified (by any means), then the following requirements apply: T shall not be const-qualified. Every other lvalue used to access the value of X shall also have its address based on P. Every access that modifies X shall be considered also to modify P, for the purposes of this subclause. If P is assigned the value of a pointer expression E that is based on another restricted pointer object P2, associated with block B2, then either the execution of B2 shall begin before the execution of B, or the execution of B2 shall end prior to the assignment. If these requirements are not met, then the behavior is undefined.

And a much more interesting point, same as with register is this one:

6.

> A translator is free to ignore any or all aliasing implications of uses of restrict.

So if you can't find a command parameter which forces gcc to do so, its probably not possible, because from the standard it doesn't have to give the option to do so.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:33:41.070

这有帮助吗？

```
void fn1(const float **restrict a, float *restrict b, int n)
{
    const float * restrict a0 = a[0];
    const float * restrict a1 = a[1];

    ASSUME_ALIGNED(a0); ASSUME_ALIGNED(a1); ASSUME_ALIGNED(b);

    for (int i = 0; i < n; ++i)
        b[i] = a0[i] + a1[i];
} 
```

编辑：第二次尝试:)。来自[http://locklessinc.com/articles/vectorize/的信息](http://locklessinc.com/articles/vectorize/)

`gcc --fast-math ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T21:50:42.347

我提前道歉，因为我无法在我的机器上使用 GCC 4.7 重现结果，但有两种可能的解决方案。

1.  使用 typedef`* restrict * restrict`正确组合。根据开发 LLVM 编译器的前同事的说法，这是`typedef`在 C 中表现得像预处理器的唯一例外，它的存在是为了允许您想要的抗锯齿行为。

    我在下面尝试了这个，但我不确定我是否成功。请仔细检查我的尝试。

2.  [使用将限制限定符与 C99 可变长度数组 (VLA) 一起使用](https://stackoverflow.com/questions/29089150/using-restrict-qualifier-with-c99-variable-length-arrays-vlas)的答案中描述的语法。

    我在下面尝试了这个，但我不确定我是否成功。请仔细检查我的尝试。

这是我用来执行实验的代码，但我无法最终确定我的任何一个建议是否按预期工作。

```
#define ALIGN_BYTES 32
#define ASSUME_ALIGNED(x) x = __builtin_assume_aligned(x, ALIGN_BYTES)

void fn0(const float *restrict a0, const float *restrict a1,
         float *restrict b, int n)
{
    ASSUME_ALIGNED(a0); ASSUME_ALIGNED(a1); ASSUME_ALIGNED(b);

    for (int i = 0; i < n; ++i)
        b[i] = a0[i] + a1[i];
}

#if defined(ARRAY_RESTRICT)
void fn1(const float *restrict a[restrict], float * restrict b, int n)
#elif defined(TYPEDEF_SOLUTION)
typedef float * restrict frp;
void fn1(const frp *restrict a, float *restrict b, int n)
#else
void fn1(const float *restrict *restrict a, float *restrict b, int n)
#endif
{
    //ASSUME_ALIGNED(a[0]); ASSUME_ALIGNED(a[1]); ASSUME_ALIGNED(b);

    for (int i = 0; i < n; ++i)
        b[i] = a[0][i] + a[1][i];
} 
```

再次，我为这个答案半生不熟的性质道歉。请不要因为尝试但没有成功而对我投反对票。

# php - 使用 AJAX 调用将数组发送到 PHP 脚本

> ID：15613671
> 
> 赞同：0
> 
> 时间：2013-03-25T11:21:25.613
> 
> 标签：php, javascript, ajax, arrays

我对 ajax 很陌生，我无法解决这个问题，也找不到其他讨论它的话题。我要做的是用ajax 将一个数组发送到一个php 脚本。
该数组是一个关联数组*[index][value]*。问题是，一旦我将数组发送到 php，它看起来就像一个单维数组。换句话说，一个例子：
如果数组是：["apple", "pear", "orange"]
应该是：array[0] 打印 "apple"

但是在 php 中，该数组仅包含一个元素，即所有字符串的串联。因此，如果我打印 array[1]，我将获得“p”、array[4]“e”等。
我该如何解决？

预先感谢您的帮助。

`var items = new Array();`

代码 AJAX 脚本：

```
 $.ajax({

      type: "POST",
      url: "calculate.php",

      data: "items=" + items, 
      dataType: "html",

      success: function(msg)
      {
        var response = jQuery.parseJSON(msg);
        $('#second_results').html(response.output); 
      },
      error: function()
      {
        alert("Failed"); 
      }
    }); 
```

PHP：

`$items = $_REQUEST["items"];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:30:58.020

你在这里有几个选择。其中，我介绍了其中的 2 个。

1)

逗号分隔参数并在逗号处拆分。

```
// ...
data: "items=" + item1 + "," + item2 + "," item3,
// ...

$items = explode(',', $_REQUEST['items']); 
```

2)

使用另一种表示法：

```
// ...
data: "items[0]=" + item1 + "&items[1]=" + item2 + "&items[2]=" + item3,
// ...

$items = $_REQUEST['items']; 
```

虽然我也没有测试过，但它应该可以正常工作。:)

您也可能想看看：[Parse query string into an array](https://stackoverflow.com/questions/5397726/parse-query-string-into-an-array) to let php handle the correct conversions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:36:54.197

这里还有多种方法：[将数组传递给 $.ajax() 中的 ajax 请求](https://stackoverflow.com/questions/8890524/pass-array-to-ajax-request-in-ajax)。这里还有一个很好的注释示例[http://www.islandsmooth.com/2010/04/send-and-receive-json-data-using-ajax-jquery-and-php/](http://www.islandsmooth.com/2010/04/send-and-receive-json-data-using-ajax-jquery-and-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:38:30.983

在 ajax 调用的数据中传递这个：

```
 var a = {};
        a["key1"] = "val1";
        a["key2"] = "val2";
        a["key3"] = "val3";
$.ajax({

  type: "POST",
  url: "calculate.php",

  data: a ,
  dataType: "html",

  success: function(msg)
  {
    var response = jQuery.parseJSON(msg);
    $('#second_results').html(response.output); 
  },
  error: function()
  {
    alert("Failed"); 
  }
}); 
```

在 PHP 方面：

```
 if($_SERVER["REQUEST_METHOD"]=="POST")
{
   foreach($_POST as $key=> $val){
   echo $key."and".$val;
   }
    die();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T11:39:16.990

```
$.ajax({

  type: "POST",
  url: "calculate.php",

  data: {items:items}, 
  dataType: "html",

  success: function(msg)
  {
    //your code if call succeeds
  },
  error: function()
  {
    //alert("Failed"); 
  }
}); 
```

请注意，您用来传递数组的方式不正确，请去掉 + 和 = 符号并使用 : 代替，希望对您有所帮助！

# android - 跨 API 的 TimerTask 和 AsyncTask 实现

> ID：15613673
> 
> 赞同：0
> 
> 时间：2013-03-25T11:21:30.197
> 
> 标签：android, android-asynctask, timertask

我发现 AsyncTask 和 TimerTask 在不同的 API 版本中表现不同。

这是我的设置： TimerTask 设置为每隔一段时间触发一次。有一个服务，它的方法在 TimerTask 触发时被调用。该方法为一些后台处理实例化一个 AsyncTask。请注意，AsyncTask 不会触及 UI。

以上所有方法在 Android API 16 和 17 上都可以正常工作，但在较低级别的 API 上会失败，并出现标准的“无法创建处理程序... Looper.prepare()”错误，例如在此处说明[Start AsyncTask in TimerTask](https://stackoverflow.com/questions/10496744)

我通过将我的 AsyncTask 更改为 Runnable，然后在服务的方法中手动启动一个新线程来解决这个问题。但是，我想知道自 16 版以来 API 发生了什么变化？Looper.prepare() 现在实际上是在 TimerTask 线程中调用的吗？如果是这样，是否有一种简单的方法可以在我的代码中实现相同的东西，以便我可以继续使用 TimerTask（Runnable 解决方案在很多方面都不是最佳的，因为我可能会决定稍后从 AsyncTask 更新 UI）。

谢谢，

韦利科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:40:38.253

问题可能是您没有`AsyncTask`在 UI 线程中创建第一个，这将影响随后创建的所有 AsyncTask。看看这个问题 - [onPostExecute not being called in AsyncTask (Handler runtime exception)](https://stackoverflow.com/questions/4280330/onpostexecute-not-being-called-in-asynctask-handler-runtime-exception)

解决方法是从 Application 类加载 AsyncTask。

较低级别 API 上的 AsyncTask 行为也有所不同。异步任务真正在较低级别的 API 中同时运行，而不是在较高级别的 API 中一次运行一个任务。这可能是一个促成因素。

仅当您需要进行 UI 更新时才需要 Async 任务。这就是类的前/后操作的目的。如果没有 UI 更新，使用 Runnable 是完全可以的。只需确保 Runnables 在完成处理后不会闲逛。

您可以使用@Atrix1987 建议的警报，但我只在调度时间超过 15 分钟时使用它们（这对您来说可能仍然适用）。我已经在另一个问题中解释了原因 - [Scheduling recurring task in Android](https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:29:44.827

我建议使用[警报服务](https://stackoverflow.com/questions/8321443/how-to-start-service-using-alarm-manager-in-android)来安排动作，并使用[意图服务](http://developer.android.com/reference/android/app/IntentService.html)来完成它们。由于您不需要触摸 UI，它使事情变得更容易。

# html - 浏览器未显示正确的字体

> ID：15613677
> 
> 赞同：1
> 
> 时间：2013-03-25T11:21:38.193
> 
> 标签：html, css, fonts

我的 CSS 文件中有这段代码，但浏览器不显示字体：

```
@font-face {
    font-family: 'font';
    src: url("fonts/FS_Metal.ttf");
}

.menu_head {
    width: 100%;
    position: relative;
    height: 30px;
    font-family: 'font';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:30:33.193

这应该是跨浏览器

```
@font-face {
    font-family: 'your_font';
    src: url('../font/your_font.eot');
    src: url('../font/your_font.eot') format('embedded-opentype'),
         url('../font/your_font.woff') format('woff'),
         url('../font/your_font.ttf') format('truetype'),
         url('../font/your_font.svg#your_font') format('svg');
}

.menu_head {font-family:'your_font',serif;} 
```

我正在使用[http://convertfonts.com/](http://convertfonts.com/) ...它将为您完成所有工作

还要检查字体文件的路径是否正确

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:32:40.230

这是由于`src: url("fonts/FS_Metal.ttf");`这条线。您需要确保相对路径正确。或者，您可以使用绝对路径。

假设你的目录结构如下：

目录结构：

```
index.html
css/
js/
fonts/ 
```

### 使用相对路径在您的 css 文件中执行以下操作：

```
@font-face {
    font-family: 'font';
    src: url("../fonts/FS_Metal.ttf");
} 
```

### 使用绝对路径执行此操作

```
@font-face {
    font-family: 'font';
    src: url("http://yoursite.com/fonts/FS_Metal.ttf");
} 
```

我还建议您查看[Google Webfonts API](http://www.google.com/webfonts)

# php - 我如何获得最终数组？

> ID：15613679
> 
> 赞同：2
> 
> 时间：2013-03-25T11:21:48.983
> 
> 标签：php, arrays, sorting

我在这里有一个数组：

```
$array = array(
                    array('t'=>'t1','v'=>'001'),
                    array('t'=>'t2','v'=>'002'),
                    array('t'=>'t3','v'=>'003'),
                    array('t'=>'t1','v'=>'004'),
                    array('t'=>'t4','v'=>'005'),
                    array('t'=>'t2','v'=>'006'),
                    array('t'=>'t5','v'=>'007'),
                    array('t'=>'t3','v'=>'008'),
            ); 
```

我想要的最后一个数组是这样的：

```
array(
    't1' => array('v'=>array(001,004)),
    't2' => array('v'=>002),
    't3' => array('v'=>array(003,008)),
    't4' => array('v'=>005),
    't5' => array('v'=>006),
    't6' => array('v'=>007)
) 
```

有什么方法可以使用 php 数组操作函数实现最终数组？我不想使用任何循环（for 或 foreach）。尝试使用 usort() 但无处可去

这是我调用用户定义函数的排序代码：

```
public function sort($a,$b)
{   
    $const = array();
    $temp1 = array();
    $temp2 = array();
    //echo $a['t'].":".$a['v'] . " - " . $b['t'].":".$b['v']. "<br/>";
    if($a['t'] == $b['t']){
        $temp1[$a['t']] = array($a['v'],$b['v']);
        //$const = $temp1;          
    }else{
        if(!array_key_exists($a['t'],$temp1) && !array_key_exists($b['t'],$temp1)){
            $temp2[$a['t']] = array($a['v']);
            $temp2[$b['t']] = array($b['v']);
        }
    }

    $result = array_merge($temp1, $temp2);

    print_r($result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:30:44.210

```
$array = array(
    array('t'=>'t1','v'=>'001'),
    array('t'=>'t2','v'=>'002'),
    array('t'=>'t3','v'=>'003'),
    array('t'=>'t1','v'=>'004'),
    array('t'=>'t4','v'=>'005'),
    array('t'=>'t2','v'=>'006'),
    array('t'=>'t5','v'=>'007'),
    array('t'=>'t3','v'=>'008'),
);

$res   = array();
foreach($array as $val){
   $res[$val['t']]['v'][] = $val['v'];
}

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [t1] => Array
        (
            [v] => Array
                (
                    [0] => 001
                    [1] => 004
                )

        )

    [t2] => Array
        (
            [v] => Array
                (
                    [0] => 002
                    [1] => 006
                )

        )

    [t3] => Array
        (
            [v] => Array
                (
                    [0] => 003
                    [1] => 008
                )

        )

    [t4] => Array
        (
            [v] => Array
                (
                    [0] => 005
                )

        )

    [t5] => Array
        (
            [v] => Array
                (
                    [0] => 007
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:32:44.657

尝试：

```
$input  = array( /* your data */ );
$output = array();

foreach ( $input as $value ) {
  $t = $value['t'];
  $v = $value['v'];

  if ( !isset($output[$t]) ) {
    $output[$t] = array('v' => $v);
  } else if ( is_array($output[$t]['v']) ) {
    $output[$t]['v'][] = $v;
  } else {
    $output[$t]['v'] = array($output[$t]['v'], $v);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:37:46.627

```
<?php
$array = array(
                array('t'=>'t1','v'=>'001'),
                array('t'=>'t2','v'=>'002'),
                array('t'=>'t3','v'=>'003'),
                array('t'=>'t1','v'=>'004'),
                array('t'=>'t4','v'=>'005'),
                array('t'=>'t2','v'=>'006'),
                array('t'=>'t5','v'=>'007'),
                array('t'=>'t3','v'=>'008'),
        );

  foreach ($array as $key => $row) {
$t[$key] = $row['t'];
$v[$key] = $row['v'];
}
  array_multisort($v, SORT_ASC, $array);

$reqArray = array();
foreach($array  as $value)
{
  $reqArray[$value['t']]['v'][] = $value['v'];
}

print_r($reqArray);

?> 
```

# php - Symfony2 中的异常处理

> ID：15613683
> 
> 赞同：-4
> 
> 时间：2013-03-25T11:21:59.153
> 
> 标签：php, symfony, exception-handling

在这种情况下如何在 symfony2 中手动处理异常：

```
class Foo {

    // ..

    public function __toString()
    {
        try {
            $this->render();
        }
        catch (\Exception $e)
        {
            // log $e
            // handle $e - display 500 error page in prod mode
        }
    }
} 
```

重定向？但是如何。

**编辑**

到目前为止，我的解决方案是调度异常事件，并且它有效。

```
$dispatcher->dispatch(KernelEvents::EXCEPTION, $event) 
```

但我需要创建一个事件。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:07:42.020

您还可以定义自己的异常控制器并执行所需的行为。

检查[如何自定义错误页面](http://symfony.com/doc/current/cookbook/controller/error_pages.html)和[配置：exception_controller](http://symfony.com/doc/current/reference/configuration/twig.html#config-twig-exception-controller)

**UPD**

创建事件侦听器是捕获异常的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T15:26:05.973

我们还可以根据 HTTP 状态（返回）代码自定义特定的 TWIG 错误模板。例如，创建一个 app/Resources/TwigBundle/views/Exception/error404.html.twig 模板来显示 404（找不到页面）错误的特殊页面。

或者，我们也可以自定义[exceptionController](http://symfony.com/doc/current/reference/configuration/twig.html#config-twig-exception-controller)。

# linux-kernel - vsdo 和 vsyscall 的区别

> ID：15613687
> 
> 赞同：4
> 
> 时间：2013-03-25T11:22:09.977
> 
> 标签：linux-kernel, x86, system-calls

我试图了解 Linux 用来调用系统调用的机制。特别是，我很难理解 VSDO 机制。它可以用来调用所有系统调用吗？进程内存中的vsdo页面和vsyscall页面有什么区别？他们总是在那里吗？

例如使用 cat /proc/self/maps ：

```
7fff32938000-7fff32939000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

最好的，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-13T08:31:44.440

vsyscall和*vDSO*段是用于加速 Linux 中某些系统调用的两种机制*。*例如，`gettimeoftheday`通常通过这种机制调用。引入的第一个机制是*vsyscall*，它是作为一种执行特定系统调用的方式而添加的，这些调用不需要任何真正的特权级别即可运行，以减少系统调用开销。按照前面的例子，所有`gettimeofday`需要做的就是读取内核的当前时间。有些应用程序`gettimeofday`经常调用（例如生成时间戳），以至于它们甚至关心一点点开销。为了解决这个问题，内核将一个页面映射到用户空间，该页面包含当前时间和快速`gettimeofday`实现（即只是一个读取保存到*vsyscall*中的时间的函数）。使用这种虚拟系统调用，C 库可以提供一个快速的`gettimeofday`，它没有经典系统调用模型`INT 0x80`或`SYSCALL`.

但是，这种*vsyscall*机制有一些局限性：分配的内存很小，只允许 4 个系统调用，而且更重要和严重的是，*vsyscall*页面在每个进程中被静态分配到相同的地址，因为*vsyscall*页面的位置是确定在内核 ABI 中。vsyscall 的这种静态分配损害了 Linux 常用的内存空间随机化所带来的好处。攻击者在利用堆栈溢出破坏应用程序后，可以从*vsyscall调用系统调用*带有任意参数的页面。他所需要的只是系统调用的地址，因为它是静态分配的，所以很容易预测（如果您尝试再次运行您的命令，即使使用不同的应用程序，您会注意到*vsyscall*的地址没有改变）。最好删除或至少随机化 vsyscall 页面的位置以阻止此类攻击。不幸的是，应用程序依赖于该页面的存在和确切地址，因此无能为力。

此安全问题已通过将所有系统调用指令替换为特定陷阱指令解决。尝试调用*vsyscall*页面的应用程序将陷入内核，然后内核将在内核空间中模拟所需的虚拟系统调用。结果是一个内核系统调用模拟了一个虚拟系统调用，它被放在那里是为了避免内核系统调用。结果是一个*vsyscall*需要更长的时间来执行，但至关重要的是，它不会破坏现有的 ABI。在任何情况下，只有在应用程序尝试使用*vsyscall*页面而不是*vDSO*时才会看到减速。*vDSO* _*提供与 vsyscall 相同的功能，同时克服其局限性。vDSO（虚拟动态链接共享对象）是在用户空间分配的内存区域，它以安全的方式在用户空间公开一些内核功能。引入此功能是为了解决由`vsyscall`. vDSO 是动态分配的，可以解决安全问题，并且可以有超过 4 个系统调用。vDSO链接是通过 glibc 库提供的*。*链接器将链接 glibc *vDSO*功能，前提是此类例程具有随附的*vDSO*版本，例如`gettimeofday`. 当您的程序执行时，如果您的内核不支持*vDSO*，则会进行传统的系统调用。*

 *学分和有用的链接：

*   [很棒的教程，如何创建自己的 vDSO](http://www.linuxjournal.com/content/creating-vdso-colonels-other-chicken?page=0,0)。
*   [vsyscall 和 vDSO，不错的文章](http://lwn.net/Articles/446528/)
*   [有用的文章和链接](http://davisdoesdownunder.blogspot.ie/2011/02/linux-syscall-vsyscall-and-vdso-oh-my.html)
*   [什么是 linux-gate.so.1？](http://www.trilithium.com/johan/2005/08/linux-gate/)*

# windows-phone-7 - MVVM EventToCommand 参数为 NULL

> ID：15613688
> 
> 赞同：2
> 
> 时间：2013-03-25T11:22:10.213
> 
> 标签：windows-phone-7, mvvm, mvvm-light

我在 Windows Phone 7.1 中使用 MVVM Light Toolkit

ViewModel 的一部分：

```
public RelayCommand<object> ChangeVATCommand
        {
            get
            {
                return _changeVATCommand
                    ?? (_changeVATCommand = new RelayCommand<object>(
                                          (vat) =>
                                          {

                                          }));
            }
        } 
```

Xaml 的一部分：

```
 <toolkit:ListPicker  ItemsSource="{Binding VATs}" x:Name="VATs" SelectedIndex="0"  DisplayMemberPath="Name">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectionChanged">
                <cmd:EventToCommand Command="{Binding ChangeVATCommand, Mode=OneWay}"
                                    CommandParameter="{Binding Path=SelectedItem, ElementName=VATs}"
                />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </toolkit:ListPicker> 
```

当命令运行时，传递给 lambda 的增值税为空。如果我在 xaml CommandParameter 中将“{Binding ElementName=VATs}”设置为“{Binding ElementName=VATs}”，则 lambda 中的增值税具有具有正确属性 SelectedItem 对象（非空）的 ListPicker。

## 这是一个错误还是我做错了什么？

更新

概括：

1.  CommandParameter="{Binding Path=SelectedItem, ElementName=VATs}" - 我有 NULL

2.  CommandParameter="{Binding Path=SelectedIndex, ElementName=VATs}" - 工作正常！我有选定大桶的索引

3.  CommandParameter="{Binding ,ElementName=VATs}" - 工作正常！我有 ListPicker 和正确的选定项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:49:56.903

我宁愿建议将 ListPicker 的 SelectedItem 绑定到您的 VM 上的属性的双向绑定。然后从命令中，您可以轻松访问此属性。

如果您选择此解决方案，您可能甚至不需要命令，您可以直接从 VM 中的 SelectedItem 属性中触发您的计算。

干杯劳伦特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:35:34.883

不久前我遇到了类似的问题，解决方案是指示相应的VM：

```
<toolkit:ListPicker  ItemsSource="{Binding VATs}" x:Name="VATs" SelectedIndex="0"  DisplayMemberPath="Name">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command="{Binding Path=ViewModelName.ChangeVATCommand, Source={StaticResource Locator}, Mode=OneWay}"
                                CommandParameter="{Binding Path=SelectedItem, ElementName=VATs}"
            />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</toolkit:ListPicker> 
```

请注意，现在绑定引用 ViewModel 并使用 Locator 作为源。

# magento-1.7 - 在 Magento 中设置 CMS 页面的发布日期

> ID：15613692
> 
> 赞同：1
> 
> 时间：2013-03-25T11:22:23.913
> 
> 标签：magento-1.7

我希望我的主页每天都改变。是否可以设置magento主页每天更改的日期？我希望一周中的每一天都发布一个不同的主页。这可能吗？我正在使用社区版 1.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:56:48.800

Magento OOB 没有这样的功能。

但这当然是可能的。检查[http://www.magentocommerce.com/magento-connect/](http://www.magentocommerce.com/magento-connect/)以查看此类扩展是否已经存在。或者只是开发您自己的自定义扩展。

# c# - Android 应用程序太大，链接禁用功能

> ID：15613694
> 
> 赞同：7
> 
> 时间：2013-03-25T11:22:32.237
> 
> 标签：c#, xamarin.android, release, mvvmcross

我已经完成了我的应用程序，现在我正在尝试构建 .apk 并在我的手机上对其进行测试（无需调试，处于发布模式）。

将链接设置为“**无**”一切正常。这里的问题是，该应用程序太大 - 它的***20MB***和那是垃圾。

* * *

我读过那篇关于链接的文章： [点击这里](http://docs.xamarin.com/guides/android/advanced_topics/linking)

所以我尝试了“ **Sdk Assemblies Only** ”和“ **Sdk and User Assemblies** ”。第二个选项（两个程序集）直接失败，我什至看不到我的应用程序的第一个屏幕（登录）。

将链接设置为“**仅 Sdk 程序**集”我能够来到第一个屏幕（登录屏幕）。该应用程序也是***6.73MB***什么更好，更符合条件。

我现在面临的问题是，当我单击第一个屏幕上的“登录”按钮时，*什么也没有发生*（通常它会将我重定向到下一个活动）。

按钮绑定到命令：

```
public IMvxCommand LoginCommand
{
    get
    {
         return new MvxRelayCommand(DoLogin);
    }
}

private void DoLogin()
{
     //Do Stuff
} 
```

在 DoLogin() 中放置断点 - 表明它永远不会进入。

好吧，我该如何解决这个问题？似乎由于某种原因禁用了 mvvmcross 的功能？

我的主要目标是减小应用程序的大小。

* * *

如果重要的话，来自 .csproj 的必要部分

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
<DebugType>pdbonly</DebugType>
<Optimize>true</Optimize>
<OutputPath>bin\Release\</OutputPath>
<DefineConstants>TRACE</DefineConstants>
<ErrorReport>prompt</ErrorReport>
<WarningLevel>4</WarningLevel>
<AndroidUseSharedRuntime>False</AndroidUseSharedRuntime>
<AndroidLinkMode>SdkOnly</AndroidLinkMode>
<AndroidLinkSkip />
<EmbedAssembliesIntoApk>True</EmbedAssembliesIntoApk> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:57:22.593

对于 MvvmCross，我一般`SDK Assemblies`只使用。

然后解决方法链接器因 MvvmCross 失败（以及一般 MonoTouch/MonoDroid 问题）然后我添加`LinkerPleaseInclude`类型文件来欺骗链接器。

一个示例文件是：

```
public class LinkerIncludePlease
{
    private void IncludeClick(View view)
    {
        view.Click += (s, e) => { };
    }

    private void IncludeVisibility(View view)
    {
        view.Visibility = view.Visibility + 1;
    }

    private void IncludeRelativeLayout(RelativeLayout relative)
    {
        relative.Visibility = ViewStates.Visible;
    }
} 
```

来自：[https ://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20TwitterSearch/TwitterSearch.UI.Droid/LinkerIncludePlease.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20TwitterSearch/TwitterSearch.UI.Droid/LinkerIncludePlease.cs)

不得不这样做很烦人......但这不会花很长时间 - 大多数应用程序实际上并没有绑定到许多不同的属性/事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T09:17:12.783

我将 progressBar 包含方法更改为

```
 public void Include(ProgressBar progressBar)
    {
        progressBar.Visibility = progressBar.Visibility;
    } 
```

它奏效了。我删除了所有其他人，他们都开始工作。我假设这是有效的，因为它正在测试 ProgressBar Visibility 属性的 getter 和 setter。

如果这不是这个工作的正确原因，有人可以添加评论，所以我们都可以理解如何在未来解决这些问题

# wordpress - 使用 ADDTHIS 在我的 Google+ 页面上分享内容

> ID：15613698
> 
> 赞同：2
> 
> 时间：2013-03-25T11:22:52.287
> 
> 标签：wordpress, google-plus, addthis

我正在尝试使用 addthis 在我的 google+ 页面上直接发布一些 Wordpress 文章，但它总是将它们发布在我的 Google 个人资料中。

我只能添加评论，删除摘录和照片，并选择我的共享列表，但我无法选择要发布的位置![在 g+ 页面上分享](../Images/146d2bfc94ba22dc1e656bc5d5cd4f0c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:53:38.437

在[addthis 支持论坛](http://support.addthis.com/customer/portal/questions/576638-google-share-buttons-don-t-share-to-google-pages)中，他们说这是不可能的：

> 不幸的是，这是 Google+ 按钮的限制，而不是 AddThis。我们还不知道有任何方法可以分享到 Google+ 企业页面。

我这样做的方法是复制我要分享的文章的 URL 链接，然后转到我的 Google+ 页面并将该链接粘贴到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:06:44.923

您应该使用经批准的第三方解决方案向 Google+ 信息页发帖。[请参阅http://www.google.com/+/business/3rdpartytools.html](http://www.google.com/+/business/3rdpartytools.html)上的列表

# c# - CSharp 虚方法和参数

> ID：15613699
> 
> 赞同：2
> 
> 时间：2013-03-25T11:22:55.717
> 
> 标签：c#, parameters, virtual, overriding

```
public abstract class State
{
public virtual Enter(/* THIS NEED A PARAMETER */)
{
// an empty method
}
}

public class PlayerState : State
{
public override Enter(Player pl)
{
// method implementation
}
}

public class GoalkeeperState : State
{
public override Enter(Goalkeeper gk)
{
// method implementation
}
}

//EXAMPLE OF USE
public State globalState;
globalState.Enter(owner);
// OWNER CAN BE PLAYER OR GOALKEEPER 
```

我知道虚拟方法和覆盖方法需要具有相同的“打印”。所以这里有一个设计缺陷。这样的事情也是可能的。我怎样才能做到这一点 ？你会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:24:33.690

您可以在此处使用泛型：

```
public abstract class State<T>
{
    public virtual Enter(T item)
    {
        // an empty method
    }
}

public class PlayerState : State<Player>
{
    public override Enter(Player pl)
    {
        // method implementation
    }
}

public class GoalkeeperState : State<Goalkeeper>
{
    public override Enter(Goalkeeper gk)
    {
        // method implementation
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:27:13.247

你可以定义

```
public override Enter(State pl) 
```

或者，但我不确定我是否理解您想要正确执行的操作，如下所示：

```
public class Player
{
    public virtual Enter() {}
}

public class GoalKeeper : Player
{
    public override Enter() {}
}

public class State
{
    public List<Player> players {get; private set;}

    public State() { players = new List<Player(); }
} 
```

# javascript - 无法正确序列化 JavaScript 对象

> ID：15613700
> 
> 赞同：1
> 
> 时间：2013-03-25T11:22:55.767
> 
> 标签：javascript, serialization

```
var o = { param1: "value1", param2: "value2" }
console.log(o);
console.log(escape(o)); 
```

首`console.log`秀`Object { param1: "value1", param2: "value2" }`，

第二：`%5Bobject%20Object%5D (i.e. [object Object])`

如何在没有任何插件的情况下正确序列化对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:24:10.410

[**使用JSON**](https://developer.mozilla.org/en-US/docs/JSON)序列化更容易：

```
var serialized = JSON.stringify(o);
// "{"param1":"value1","param2":"value2"}" 
```

**您可以在MDN**阅读有关浏览器兼容性的信息： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON#Browser_compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON#Browser_compatibility)

# python - 解析平滑视频清单文件？

> ID：15613706
> 
> 赞同：1
> 
> 时间：2013-03-25T11:23:36.847
> 
> 标签：python, silverlight, stream, smooth, smooth-streaming-player

有没有人解析过平滑视频（Silverlight）清单文件？

我可以获取它，我只需要一点帮助来理解格式。我希望我的 python 脚本下载一个块来测试流是否正常工作。

我将其视为以下部分： `<c d="62680000" />` 是块ID吗？

我如何根据 URl 字段计算出获取它们的路径，如下所示： `Url="QualityLevels({bitrate})/Fragments(video={start time})/WowzaSessions(421420850).ismv">`

我已经为 Apple HLS 进行了相同的测试，尽管它的格式更简单。

这种格式有什么帮助吗？MS似乎没有太多关于获得这个的文档，它都集中在使用浏览器中现有的播放器控件上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:51:04.620

块定义应包含块编号和持续时间，您可以使用它们来计算请求的开始时间。在您的示例中，似乎缺少块编号，尽管您可以通过它们在清单中出现的顺序来推断它们。

如果您访问[Smooth Streaming Sample](http://www.iis.net/media/experiencesmoothstreaming)站点并使用 fiddler 捕获请求，您将能够看到它请求的清单以及清单与下载的块之间的关系。

在这种情况下，清单 url`http://mediadl.microsoft.com/mediadl/iisnet/smoothmedia/Experience/BigBuckBunny_720p.ism/Manifest`给出了一个视频流，其中包含 8 个不同质量的轨道和块定义，每个轨道都附加了一个数字和持续时间。播放器根据前一个块的总持续时间计算每个连续块的开始时间，并通过将`Url`流定义中的属性附加到 .ism url 的末尾来请求它。

在这个请求的情况下，`http://mediadl.microsoft.com/mediadl/iisnet/smoothmedia/Experience/BigBuckBunny_720p.ism/QualityLevels(2040000)/Fragments(video=360000000)` 我们可以通过将开始时间除以块持续时间来确定请求的特定块（360000000/20000000=18）

# maven - Maven Profiles Jar 问题

> ID：15613715
> 
> 赞同：0
> 
> 时间：2013-03-25T11:24:12.910
> 
> 标签：maven, profiles

我有 dev/XYZ.properties 文件，我正在使用 maven -P dev install 构建一个 jar 文件。如何将属性文件放在 child.jar/META-INF/XYZ.properties 文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:03:52.490

您必须为您的个人资料执行`maven-resources-plugin:copy-resources`目标`dev`并将其与适当的阶段绑定（`process-resources`对我来说似乎是最好的阶段）。以下是如何定义您的个人资料`dev`：

```
<profile>
  <id>dev</id>
  ...
  <build>
     <plugins>
        <plugin>
           <artifactId>maven-resources-plugin</artifactId>
           <version>2.6</version>
           <executions>
             <execution>
               <id>copy-resources</id>
               <phase>process-resources</phase>
               <goals>
                 <goal>copy-resources</goal>
               </goals>
               <configuration>
                  <outputDirectory>${basedir}/target/classes/META-INF</outputDirectory>
                  <resources>          
                    <resource>
                       <directory>${basedir}/dev</directory>
                       <includes>
                         <include>XYZ.properties</include>
                       </includes>
                    </resource>
                   </resources>              
               </configuration>            
            </execution>
         </executions>
     </plugin>
   </plugins>
</build> 
```

# oop - 不映射到任何域实体的类

> ID：15613716
> 
> 赞同：1
> 
> 时间：2013-03-25T11:24:20.883
> 
> 标签：oop

在 OOP 中，将应用程序域中不明确的实体转换为类的过程的名称是什么？我有那个词，但我忘记了，谷歌也没有帮助。例如，“策略模式”中的策略，它似乎不是一个类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:55:26.607

找到了！我还是要记住这个知识的来源，但是这里是 [http://en.wikipedia.org/wiki/Reification_(computer_science)](http://en.wikipedia.org/wiki/Reification_(computer_science))

# c# - 使用 DataServiceQuery 选择多个表

> ID：15613720
> 
> 赞同：0
> 
> 时间：2013-03-25T11:24:35.193
> 
> 标签：c#, asp.net, windows-runtime, wcf-data-services, ado.net-entity-data-model

我正在使用 WCF 数据服务和 ASP.NET 主机，其中我有一个用于配方数据库的实体数据模型。实体“Recipe”连接到“Ingredient”，“Ingredient”连接到“Unit”。在我的客户端（Windows 8 RT 应用程序）中，我试图查询服务以获取配方中的所有成分，以及与成分关联的单位。

私人 R.juliemrEntities 数据；

私有 DataServiceCollection 配方；

var query = (DataServiceQuery)data.Recipes.Expand("Ingredients");

通过这个查询，我得到了食谱及其成分，但我无法扩展到第三张表，或者通过成分获取单位。

有谁知道我如何编写一个查询，让我同时掌握食谱、它们的成分和每种成分的单位？帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:07:45.020

对于“双重展开”，使用类似这样的东西。对 expand 的第二次调用包含到第三个实体的类似路径的字符串。

```
data.Recipes.Expand("Ingredients").Expand("Ingredients/Unit"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T15:49:10.683

如果您查看[http://www.odata.org/documentation/odata-version-3-0/odata-version-3-0-core-protocol](http://www.odata.org/documentation/odata-version-3-0/odata-version-3-0-core-protocol) 10.2.3.1.3 $expand 系统查询选项。您会发现 $expand=Ingredients/Unit 表示同时扩展成分和每种成分的单位。

所以你只能使用一个展开

```
data.Recipes.Expand("Ingredients/Unit"); 
```

# java - Spring 的嵌入式 H2 数据源和 DB_CLOSE_ON_EXIT

> ID：15613722
> 
> 赞同：42
> 
> 时间：2013-03-25T11:24:43.660
> 
> 标签：java, spring, h2

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-25T12:15:08.690

在 JDBC url [jdbc:h2:~/test;DB_CLOSE_ON_EXIT=FALSE中指定参数](http://www.h2database.com/html/features.html#do_not_close_on_exit)

对于内存测试数据库，我建议您添加`DB_CLOSE_DELAY=-1`，如下所示：

```
jdbc:h2:mem:alm;MODE=Oracle;DB_CLOSE_DELAY=-1 
```

添加 JDBC 连接 url 以`embedded-dababase`将其更改为：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
    <property name="driverClass" value="org.h2.Driver"/>
    <property name="url" value="jdbc:h2:mem:test;MODE=Oracle;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE"/>
    <property name="username" value="sa"/>
    <property name="password" value=""/>
</bean>

<jdbc:initialize-database data-source="dataSource" ignore-failures="DROPS">
    <jdbc:script location="classpath:schema_h2.sql" />
 </jdbc:initialize-database> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-27T09:43:37.073

我遇到了与 Michael Piefel 相同的问题，并尝试实施 Michail Nikolaev 解释的解决方案。但它没有工作，不知何故spring-batch，然后，元数据JOB_ *表在哪里。因此，由于`spring-jdbc`我的应用程序使用的版本是 3.0.5 并且增加了`spring-framework`一个与`dwr`（我在我的应用程序中使用它）冲突的版本，它是`geo`基于 spring 的本地化，`dwr`并且`gmaps api`. 我下载了该`spring-jdbc 4.0.3`版本并从中获取默认情况下`H2EmbeddedDatabaseConfigurer.class`拥有的人`DB_CLOSE_ON_EXIT=FALSE`并将其替换为`spring-jdbc 3.0.5`Release 中的那个并在 war 文件中部署它并且它可以工作，关闭`VM`并没有引起内存数据库的关闭.

如果像我这样的其他人无法实施其他解决方案，希望这个不寻常的解决方案会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T12:47:11.267

我遇到了同样的问题，但这是因为我忘记在我的一个实体上添加注释 @Entity。我添加它，它现在可以工作了！我希望这可以帮助别人。

# java - 包装渲染属性时未在复合组件上调用 encodeAll()

> ID：15613725
> 
> 赞同：1
> 
> 时间：2013-03-25T11:24:46.880
> 
> 标签：java, jsf, jsf-2, composite-component

当我做：

```
<h:form>
    <ui:repeat ...>
        <ui:fragment rendered="#{xyz.type eq 1}"
           <h:inputText value="#{xyz}"/>
        </ui:frament>

        <ui:fragment rendered="#{xyz.type eq 2}"
           <my:component value="#{xyz}"/>
        </ui:frament>
    <ui:repeat />
</h:form> 
```

`encodeAll()`不会被调用，`my:component`因此不会显示现有值。

如果我执行以下操作

```
 <ui:repeat ...>
        <ui:fragment rendered="#{xyz.type eq 1}"
           <h:inputText value="#{xyz}"/>
        </ui:frament>

        <ui:fragment rendered="#{xyz.type eq 2}"
           <h:form>
               <my:component value="#{xyz}"/>
           </h:form>
        </ui:frament>
    <ui:repeat /> 
```

后一个例子当然是没用的，因为我想要动态输入。现有（默认）组件作为 datepicker，inputtext，... 功能正常，只有我的组件不显示现有值（encodeAll 未调用）。

我还尝试了 h:datatable 组件而不是 ui:repeat （虽然不知道为什么），结果相同。

```
INFO: Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/webclient'
INFO: Running on PrimeFaces 3.5
INFO: Running on PrimeFaces Extensions 0.6.3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:40:29.980

我无法根据给定的代码重现您的问题，但是当我将它包装在 PrimeFaces 组件中时，我可以重现它。例如，何时`<ui:fragment>`替换为`<p:panel>`（不带`rendered`！）。这是由于 PrimeFaces`CoreRenderer`没有调用方法，而是单独调用`UIComponent#encodeAll()`。`renderChildren()``encodeBegin()``encodeChildren()``encodeEnd()`

如果您执行工作`encodeBegin()`而不是`encodeAll()`，那么它应该可以工作。我已经相应地更新了我的复合组件文章。

# python - 处理来自 urllib2 的异常并在 Python 中进行机械化

> ID：15613733
> 
> 赞同：1
> 
> 时间：2013-03-25T11:25:30.297
> 
> 标签：python, exception-handling, mechanize-python

我是使用异常处理的新手。我正在使用 mechanize 模块来抓取几个网站。我的程序经常失败，因为连接速度慢并且请求超时。我希望能够在每次尝试之间延迟 30 秒后重试网站（例如超时）最多 5 次。

我查看了[这个](https://stackoverflow.com/questions/13816633/python-mechanize-to-check-if-a-server-is-available)stackoverflow 答案，可以看到如何处理各种异常。我也看到（虽然它看起来很笨拙）我如何将尝试/异常放在一个while循环中来控制5次尝试......但我不明白如何跳出循环，或者在连接时“继续”成功并且没有抛出异常。

```
from mechanize import Browser
import time

b = Browser()
tried=0
while tried < 5:
  try:
    r=b.open('http://www.google.com/foobar')
  except (mechanize.HTTPError,mechanize.URLError) as e:
    if isinstance(e,mechanize.HTTPError):
      print e.code
      tried += 1
      sleep(30)
      if tried > 4:
        exit()
    else:
      print e.reason.args
      tried += 1
      sleep(30)
      if tried > 4:
        exit()

print "How can I get to here after the first successful b.open() attempt????" 
```

我将不胜感激有关（1）如何在成功打开时跳出循环，以及（2）如何使整个块不那么笨拙/更优雅的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:42:04.470

您的第一个问题可以通过以下方式完成`break`：

```
while tried < 5:
  try:
    r=b.open('http://www.google.com/foobar')
    break
  except #etc... 
```

然而，真正的问题是你真的想要：这就是所谓的“意大利面条代码”：如果你试图通过程序绘制执行图，它看起来就像一盘意大利面条。

您遇到的真正（恕我直言）问题是您退出 while 循环的逻辑有缺陷。与其在多次尝试后尝试停止（这种情况永远不会发生，因为您已经退出了），而是循环直到您获得连接：

```
#imports etc

tried=0
connected = False
while not Connected:
    try:
        r = b.open('http://www.google.com/foobar')
        connected = true # if line above fails, this is never executed
    except mechanize.HTTPError as e:
        print e.code            
        tried += 1        
        if tried > 4:
            exit() 
        sleep(30)

    except mechanize.URLError as e:
        print e.reason.args            
        tried += 1
        if tried > 4:
            exit()        
        sleep(30)

 #Do stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:32:40.157

在任何一种情况下，您都不必在 except 块中重复操作。

```
from mechanize import Browser
import time

b = Browser()
tried=0
while True:
  try:
    r=b.open('http://www.google.com/foobar')
  except (mechanize.HTTPError,mechanize.URLError) as e:
      tried += 1
    if isinstance(e,mechanize.HTTPError):
      print e.code
    else:
      print e.reason.args
    if tried > 4:
      exit()
    sleep(30)
    continue
  break 
```

此外，您可以`while not r:`根据`Browser.open`返回的内容使用。

编辑：[roadierich](https://stackoverflow.com/users/1894317/roadierich)展示了一种更优雅的方式

```
try:
  doSomething()
  break
except:
  ... 
```

因为错误会跳到 except 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:28:14.983

对于您的第一个问题，您只需要打破循环的“break”关键字。

对于第二个问题，一个“尝试”可以有多个“除外”子句，用于不同类型的异常。这取代了您的 isinstance() 检查，并使您的代码更清晰。

# php - 如何保护通过 CKEditor 提交的数据

> ID：15613742
> 
> 赞同：3
> 
> 时间：2013-03-25T11:26:02.687
> 
> 标签：php, security, ckeditor

我在我的网站中使用 CKEditor 让用户发表他们的评论。CKEditor 有很多按钮来撰写评论。假设如果用户将他的评论设为粗体和斜体，例如

***`This is comment`***

CKEditor 将输出以下 html

```
<i><strong>This is comment</strong></i> 
```

现在，如果我将这个 html 存储在 mysql 数据库中并按原样输出到网页上，而不用 htmlspecialchars() 包装，那么评论将在页面上显示为粗体和斜体，这就是我想要的。

但另一方面，如果我用 htmlspecialchars() 包装评论并将其显示在网页上，它将显示为

```
<i><strong>This is comment</strong></i> 
```

但我不想这样显示，我想要用户格式化。但是如果我不使用 htmlspecialchars() 包裹它，它是有风险的，它可能会导致 XSS 攻击和其他安全风险。

我怎样才能实现这两个目的（1）。保留用户格式 (2)。同时保护 HTML 内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:38:10.980

您需要制定一个您希望允许用户包含哪些元素和属性的白名单（例如，允许`<strong>`但不允许`<script>`；允许`<a href>`但不允许`<div onmouseover>`），然后通过解析输入来强制执行它，删除所有不适合的元素和属性您的模式，并将结果序列化回 HTML。

这是一项艰巨的工作，无法使用一些简单的正则表达式或`strip_tags`（即使它确实满足您的需求，这也不是 XSS 的适当解决方案）。建议您使用现有的库来执行此操作 - [HTML Purifier](http://htmlpurifier.org/)就是用于 PHP 的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:41:33.597

`strip_tags`函数具有允许或禁止标签的选项。使用 php.net 获取有关条形标签的更多参考。您必须去除不需要或不允许的标签。如果你不这样做，那么它也可能会被 javascripts 破坏。

`htmlspecialchars`在存储时使用，`htmlspecialchars_decode`在显示时使用。这将帮助您保持用户格式化内容的格式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:56:14.253

我想你正在寻找`strip_tags`。它将从字符串中删除所有 html 和 php 标签，并且只允许给定的标签，如`<strong><i>`etc

```
<?php 
$str = "<i><strong>this is a comment<strong></i><script>here is script</script>";
echo $str = strip_tags($str,"<i><strong>");
 ?> 
```

[strip_tags 的 php.net 文档](http://www.php.net/manual/en/function.strip-tags.php "strip_tags")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T06:51:17.873

在将其打印回屏幕之前使用它：

```
 function html_escape($raw_input)
        {
            return htmlspecialchars($raw_input, ENT_QUOTES | ENT_HTML401, 'UTF-8');     
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:29:49.953

我想到了两个选择。首先，您可以删除所有 HTML 并使用 BB 代码解析器来允许用户发布 BB 标签，而不是 HTML - [http://php.net/manual/en/book.bbcode.php](http://php.net/manual/en/book.bbcode.php)

其次，您可以去除除少数标签之外的所有 HTML。我不知道有任何解析器可以亲自执行此操作，但是我之前已经在网站上看到过它（墨菲定律我现在找不到）。您应该能够通过足够复杂的 RegEx 替换检查来实现这一点。

# c++ - 数据实际上是如何隐藏在一个类中的？

> ID：15613743
> 
> 赞同：0
> 
> 时间：2013-03-25T11:26:06.133
> 
> 标签：c++, oop

```
 class student
 { 
  private :
     int rollno;
     char name[20];
  public:
     void change_stud()
     { cout<<"enter new roll no:";
       cin>>rollno;
       cout<<" new name ";
       cin.getline(name,20);
     }
    void show_student()
      { cout<<rollno<<"  "<<name;}
 } 
```

现在，请解释当我们可以从任何外部函数示例中看到或更改类的成员`roolno`和隐藏成员时`name``main()`

```
int main()
{
  student s1;
  s1.change_stud();
  s1.show_student();
} 
```

类中数据隐藏和抽象的基本含义是什么？即使我们实际上可以访问类的私有成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:30:38.283

请检查这个 - [http://www.parashift.com/c++-faq/encap-is-for-code-not-people.html](http://www.parashift.com/c++-faq/encap-is-for-code-not-people.html)

我认为您误解了隐藏或封装的含义。这是为了防止意外修改私有成员 - 你只能通过使用公共函数来做到这一点。它不是该成员完全不可访问。它也不是一种保护秘密的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:31:27.200

是的，您可以调用 change_student() 从外部更改值。但是外部函数仍然不能直接访问变量，对吧？您的学生班级仍然管理变量。如果外部类使用非法参数调用函数，Student 类仍然可以拦截这些函数调用，并确保其状态保持逻辑。

数据隐藏还意味着您不需要知道变量的确切名称或在更改变量时需要采取的任何额外步骤。例如，假设您有另一个变量，该变量取决于学生更改的次数。

```
void change_student()
     { cout<<"enter new roll no:";
       cin>>rollno;
       cout<<" new name ";
       cin.getline(name,20);
        numberOfTimesChanged++;
     } 
```

封装和数据隐藏确保外部类不必处理类的内部工作。这些事情将由您的班级自己处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:30:27.640

数据封装或数据隐藏是通过`interface`在对象上指定一个对象来控制其数据的操作方式来实现的。
你`call a method`在一个对象上传递一个值给它。如果值为 ，即超出对象处理的范围，则对象可以拒绝接受该值并抛出异常。

你正在做的是在你的对象上调用方法，你**不是**直接改变 `private members`，编译器会禁止这个。

请参阅[`C++-FAQ`](http://www.parashift.com/c++-faq/classes-and-objects.html)有关此特定主题的内容。

# menuitem - 自定义菜单项保存在哪里？

> ID：15613746
> 
> 赞同：1
> 
> 时间：2013-03-25T11:26:19.227
> 
> 标签：menuitem, spss

我在 SPSS 中创建了几个自定义菜单项来访问几个自定义创建的 SPSS 脚本和语法。

为了避免在每台机器上重新创建所有菜单项。是否有一个文件在创建时保存这些菜单，可以复制并传输到其他机器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:19:55.587

SPSS Statistics 有两种不同的自定义菜单机制。如果您使用查看>菜单编辑器，自定义存储在注册表中（在 Windows 上）。注册表项是特定于版本的，并且此结构可能因版本而异。

对于由自定义对话框生成器创建的对话框（及其菜单项），片段存储在 ext\lib 目录下。默认是在Statistics安装目录下，但可以根据用户SPSS_CDIALOGS_PATH环境变量的设置在别处，也可以在APPDATA区域。自定义对话框存储为属性文件和与对话框同名的 xml 文件。该对话框可能还有一个 htm 帮助文件。如果对话框被翻译，则属性和 htm 文件的本地化版本将存储在同一位置。

启动时，Statistics 会搜索这些目录并将相关菜单项添加到显示中。

# wordpress - 通过 post meta 在 wordpress 中进行自定义查询搜索

> ID：15613750
> 
> 赞同：0
> 
> 时间：2013-03-25T11:26:27.717
> 
> 标签：wordpress, search

我正在 wordpress 中进行自定义搜索，我想通过从自定义元键中搜索来找到我的自定义类型文章。

此代码按自定义类型过滤帖子，但按自定义元过滤所有帖子，未显示任何结果！

```
function filtri_di_ricerca( $query ) {
    if ( is_admin() || ! $query->is_main_query() )
        return;

    if (is_home())
    {
        $query->set('post_type', 'post_annunci');  
        $query->set('posts_per_page', 1000);

        $meta_query = array();

        // Only check these form fields
        $fields = array( 'annuncio_contratto', 'annuncio_categorie', 'annuncio_tipologia', 'annuncio_citta', 'annuncio_prezzo');
        foreach( $fields as $field ) {
            if( $_GET[$field] != '' ) {
                // We have something to match, otherwise ignore the field...
                $meta_query[] = array(
                    'key' => $field,
                    'value' => $_GET[$field], 
                    'compare' => '='
                );
            }
        }
        $meta_query['relation'] = 'AND';

        $query->set('meta_query',$meta_query);
    }

    return;
}
add_action( 'pre_get_posts', 'filtri_di_ricerca'); 
```

搜索地址为：

```
http://example.com/?annuncio_contratto=Vendita&annuncio_categorie=Residenziale&annuncio_tipologia=Appartamento&annuncio_citta=NewYork 
```

调试：

```
echo "<pre>"; print_r($wp_query->query_vars); echo "</pre>"; 
```

结果：

```
Array
(
    [error] => 
    [m] => 0
    [p] => 0
    [post_parent] => 
    [subpost] => 
    [subpost_id] => 
    [attachment] => 
    [attachment_id] => 0
    [name] => 
    [static] => 
    [pagename] => 
    [page_id] => 0
    [second] => 
    [minute] => 
    [hour] => 
    [day] => 0
    [monthnum] => 0
    [year] => 0
    [w] => 0
    [category_name] => 
    [tag] => 
    [cat] => 
    [tag_id] => 
    [author_name] => 
    [feed] => 
    [tb] => 
    [paged] => 0
    [comments_popup] => 
    [meta_key] => 
    [meta_value] => 
    [preview] => 
    [s] => 
    [sentence] => 
    [fields] => 
    [menu_order] => 
    [category__in] => Array
        (
        )

    [category__not_in] => Array
        (
        )

    [category__and] => Array
        (
        )

    [post__in] => Array
        (
        )

    [post__not_in] => Array
        (
        )

    [tag__in] => Array
        (
        )

    [tag__not_in] => Array
        (
        )

    [tag__and] => Array
        (
        )

    [tag_slug__in] => Array
        (
        )

    [tag_slug__and] => Array
        (
        )

    [post_type] => post_annunci
    [posts_per_page] => 1000
    [meta_query] => Array
        (
            [0] => Array
                (
                    [key] => annuncio_contratto
                    [value] => Vendita
                    [compare] => =
                )

            [1] => Array
                (
                    [key] => annuncio_categorie
                    [value] => Residenziale
                    [compare] => =
                )

            [2] => Array
                (
                    [key] => annuncio_tipologia
                    [value] => Appartamento
                    [compare] => =
                )

            [3] => Array
                (
                    [key] => annuncio_citta
                    [value] => Pesaro
                    [compare] => =
                )

            [relation] => AND
        )

    [ignore_sticky_posts] => 
    [suppress_filters] => 
    [cache_results] => 1
    [update_post_term_cache] => 1
    [update_post_meta_cache] => 1
    [nopaging] => 
    [comments_per_page] => 50
    [no_found_rows] => 
    [order] => DESC
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:30:12.080

```
function filtri_di_ricerca( $query ) {
    if ( is_admin() || ! $query->is_main_query() )
        return;

    if (is_home())
    {
       $query->set('post_type', 'post_annunci');  // added
       $query->set('posts_per_page', 1000);  //added
       $meta_query = array();  //edited

        // Only check these form fields
        $fields = array( 'annuncio_contratto', 'annuncio_categorie', 'annuncio_tipologia', 'annuncio_citta', 'annuncio_prezzo');

        foreach( $fields as $field ) {
           if( isset($_GET[$field]) and $_GET[$field] != '' ) {     // ADDED isset()
               // We have something to match, otherwise ignore the field...
               $meta_query[] = array(
                   'key' => $field,
                   'value' => $_GET[$field], 
                   'compare' => '=',    // CHANGED
               );
           }
       }
       $meta_query['relation'] = 'AND';   // ADDED

    $query->set('meta_query',$meta_query);
    }

    return;
}
add_action( 'pre_get_posts', 'filtri_di_ricerca'); 
```

# 编辑

当您将主查询数据和元查询数据放在同一个篮子中时，您出错了。

# c++ - 包含指向对象的指针的 STL 堆

> ID：15613757
> 
> 赞同：5
> 
> 时间：2013-03-25T11:26:49.933
> 
> 标签：c++, data-structures, stl

我有一个`std::list<MyObject*> objectList`容器需要在以下场景中进行排序和维护：

*   每个对象都有一个提供成本的特定字段（例如浮点值）。该成本值用于比较两个对象，就好像它们是浮点数一样
*   集合必须是有序的（升序），并且必须快速找到新插入元素的正确位置。
*   可以删除最低元素（就成本而言），也可以*更新*几个任意定位元素的成本。然后必须尽可能快地重新排序列表，利用其已经排序的特性。

我可以使用任何其他 stl 容器/机制来允许三个行为属性吗？它非常类似于堆，我认为 using`make_heap`可能是对列表进行排序的好方法。我需要一个指针容器，因为还有其他几个依赖这些指针的数据结构。

那么如何选择一个更好的容器，它也对指针友好并允许通过查看指向类型的比较运算符进行排序？

*澄清*：我需要一个最适合场景的 stl 容器，并且可以成功地包装指针或引用。（例如，我简要地读到`std::set`容器可能是一个很好的候选者，但我没有使用它的经验）。

当前的实现，基于以下答案：

```
struct SHafleEdgeComparatorFunctor
    {
        bool operator()(SHEEdge* lhs, SHEEdge* rhs)
        {
            return (*lhs) < rhs;
        }
    };

std::multiset<SHEEdge*, SHafleEdgeComparatorFunctor>    m_edges; 
```

当然，`SHEEdge`数据结构有一个重载的运算符：

```
bool operator<(SHEEdge* rhs) 
    {
        return this->GetCollapseError() < rhs->GetCollapseError();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:58:53.277

我确实会使用`std::set`. 您的要求中的棘手之处是更新现有元素。

A`std::set`总是排序的。您必须使用有用的比较运算符将指针包装在一个类中，或者您必须将比较谓词传递给集合。

然后你会自动得到 sorted 属性，你会得到恒定时间删除最低元素。

您还可以更新日志复杂性的成本值：只需从集合中删除对象并重新添加它。这将与排序容器一样快。

在集合中插入和删除速度很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:36:17.827

我将开始使用**智能指针**而`shared_ptr`不是*原始*指针（原始指针很好，例如，如果它们正在*观察*指针，例如作为函数参数传递的指针，但是当您具有*所有权*语义时，例如在这种情况下，最好使用智能指针）。

然后，我将从`std::vector`一个容器开始。

所以，试着做吧`vector<shared_ptr<MyObject>>`。

您可以比较它的性能来衡量它`list<shared_ptr<MyObject>>`。

（还要注意，它`std::list`比 具有更多的开销`std::vector`，因为它是一个基于节点的容器，并且每个节点都有一些开销；而是`std::vector`分配一个连续的内存块来存储其数据，在这种情况下是`shared_ptr`s; 所以`std::vector`也更多“缓存-友好的”等）

总的来说，`std::vector`它提供了非常好的性能，作为“*首选*”容器是一个不错的选择。在任何情况下，您的里程可能会非常多，最好的办法是**衡量**性能（速度），以便更好地了解您的特定情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:49:52.833

如果我正确理解您的要求，那么您正在寻找要使用的正确容器。

Indeed`std::set`似乎是您想要做的事情的正确容器，但这取决于所有用例

*   您是否需要 O(1) 访问元素？
*   成本最高的操作是什么？

`std::set`使用键对元素进行排序并且不允许重复（如果您想要重复，请查看`std::multiset`）。添加元素时，它会自动插入到正确的位置。通常，您不想使用原始指针作为键，因为对象可以为空。

另一种选择可能是使用 a `std::vector<std::shared_ptr>>`，正如@MikePro 所说，将指针放在智能指针中是一个好习惯，以防止必须手动删除它们（并避免在发生异常时发生任何内存泄漏）。如果您使用向量，则必须使用诸如`std::sort`,`std::find`出现在`<algorithm>`header 或`std::vector::insert`.

通常，此图像有助于找到您的容器。它并不完美（因为您必须比显示的内容多了解一点），但它通常可以很好地完成工作：

![标准容器选择](../Images/8949bb6e321970788c7927386933e5aa.png)

# gwt - 使用 GXT3 MPV 请求工厂登录

> ID：15613760
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:26:59.027
> 
> 标签：gwt, mvp, gxt, requestfactory

我有一个带有 sencha gxt 3 的项目，但我不知道如何进行身份验证（登录）

请你，如果你能帮我举一些例子。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:07:48.327

看看春天的安全。 [http://www.javacodegeeks.com/2010/12/securing-gwt-apps-with-spring-security.html#](http://www.javacodegeeks.com/2010/12/securing-gwt-apps-with-spring-security.html#)

1.  对于身份验证，您需要一个登录表单。
2.  使用 SSL 保护传输。
3.  将凭据发送到服务器。
4.  使用一些散列算法加密密码。
5.  将凭据保存在某种形式的数据库中。

    *   [http://www.jasypt.org/howtoencryptuserpasswords.html](http://www.jasypt.org/howtoencryptuserpasswords.html)

    *   [http://jerryorr.blogspot.ie/2012/05/secure-password-storage-lots-of-donts.html#example](http://jerryorr.blogspot.ie/2012/05/secure-password-storage-lots-of-donts.html#example)

考虑使用 MVP 模式。正如 MVP 流程从一个视图到另一个视图的变化一样，它可以很容易地限制用户在没有任何适当权限的情况下访问网站的特定部分。

# concurrency - 具有调用限制的单线程 ScheduledThreadPoolExecutor

> ID：15613765
> 
> 赞同：0
> 
> 时间：2013-03-25T11:27:14.733
> 
> 标签：concurrency, timertask, scheduledexecutorservice

我想利用 java.util.concurrent.Executors 来解雇一些跑步者。问题是我想按固定次数发射它。将这些跑步者称为固定费率很重要。

对我来说，使用 Executors#newSingleThreadScheduledExecutor 就足够了，所以我想知道为什么这是不可能的......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:53:16.730

我试图用 TimerTask 来解决这个问题，但效果相同。问题是如何有效、优雅和安全地 - 在一定数量的调用后关闭 TimerTask、ScheduledExecutorService ...

# angularjs - angularjs：将焦点设置在指令内先前隐藏的输入元素上

> ID：15613773
> 
> 赞同：12
> 
> 时间：2013-03-25T11:27:42.900
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

[这是一个简化的plunk来说明问题](http://plnkr.co/edit/uLHP5BBYV6TWIA5An82E?p=preview)

我得到了一个角度指令，它在可视化之前编译了一些 html 代码。在 html 中，只有当`scope.isEditShown`is时才会显示隐藏的输入`true`：

`<input ng-show='isEditShown' type='text' value='{{content.name}}' class='title_edit'/>`

`scope.titleChange`调用函数时会出现输入。这个函数（绑定到一个 ng-dblclick 指令）只是将 true 设置为`scope.isEditShown`并尝试`focus()`在输入元素上调用 jQuery 的方法（之前存储在链接器函数的作用域中`scope.input = $("input:text", ae);`：

```
scope.isEditShown = true;
scope.input.focus(); 
```

简而言之，我想在双击某物时可视化先前隐藏的输入，并立即获得焦点。需要立即获得焦点，因为输入在失去焦点时被隐藏（我希望用户能够立即编辑输入内容。当用户点击离开时，输入被隐藏）。

问题是我似乎无法以编程方式将焦点放在输入元素上。经过实验，我发现在`scope.isEditShown = true;`执行时，输入还不可见（= angular js在DOM中没有显示），并且将焦点设置`scope.input.focus();`为隐藏的输入没有任何作用。当输入元素最终显示出来时，它是没有焦点的。

做我想做的事的角度方式是什么？我什么时候可以确定我的输入会显示出来，什么时候可以`focus()`有效地调用它？注意：如果我`scope.$apply()`在关注输入之前使用，我会得到`$apply already in progress`异常。如果我进行安全申请，将不会给予关注。见[plunkr](http://plnkr.co/edit/uLHP5BBYV6TWIA5An82E?p=preview)。

（ps：我真的很想了解，所以我不会使用自动为我做的伴随库）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T15:35:11.490

当您对某些数据绑定变量进行更改并且需要等待相应的渲染发生时，您需要使用著名的`setTimeout`0（或者在 Angular 中的`$timeout`服务）。

这是一个 plunkr，展示了如何做到这一点。

[http://plnkr.co/edit/N9P7XHzQqJbQsnqNHDLm?p=preview](http://plnkr.co/edit/N9P7XHzQqJbQsnqNHDLm?p=preview)

# jquery - 按下左箭头时 Jquery 滑块出现问题

> ID：15613774
> 
> 赞同：1
> 
> 时间：2013-03-25T11:27:45.480
> 
> 标签：jquery, slider

我在制作滑块时遇到了麻烦，当你按下右手箭头时它工作正常，但是当我按下左手按钮时，它完全弄乱了脚本。

我想知道是否有人可以查看我的代码，看看是否有任何明显的问题。因为我从另一个站点获取了代码，所以它可以正常工作。

我这里有一个链接：

[http://emopreview.co.uk/STIHL/12113081/video.html](http://emopreview.co.uk/STIHL/12113081/video.html)

而 Jquery 是：

```
$(document).ready(function() {
var nav = $('#wrapper .slider').css('overflow', 'hidden').children('ul'),
sliding = false,
ul = $('#wrapper .slider ul'),
count = $('#wrapper .slider ul li').length,
width = count * 178;    

$('#wrapper .slider ul').width(width);

    function slideLeft() {
        if(sliding){
            return false;
        }
        sliding = true;
        ul.animate({
            left: '0'
        }, 1000, function(){
            sliding = false;
        });
    }
    function moveLeft() {
        $('#wrapper .slider ul li:first').insertBefore($('#wrapper .slider ul li:last'));
        ul.css("left", "-178px");
    }

    function slideRight() {
        if(sliding){
            return false;
        }
        sliding = true;
        ul.animate({
            left: '-=178'
        }, 1000, function() {
            sliding = false;

            $('#wrapper .slider ul li:first').appendTo(ul);
            ul.css("left", "0");
        });
    }
    var autoSlide;
    autoSlide = setInterval(function() {
        slideRight();
    }, 3000);

    $('#wrapper .slider_container').mouseenter(function() {
        clearInterval(autoSlide);
    }).mouseleave(function() {
        autoSlide = setInterval(function() {
            slideRight();
        }, 3000);
    });
    $('#slider-nav').show();

    $('#slider-nav .right_arrow').click(slideRight);

    $('#slider-nav .left_arrow').click(function() {
        moveLeft();
        slideLeft();
    });
 }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:56:39.913

像这样更改您的代码：

```
 function slideLeft() {
        if(sliding){
            return false;
        }
        sliding = true;
        ul.animate({
            left: ''
        }, 1000, function(){
            sliding = false;
            ul.css("left","0px");
        });
    }
    function moveLeft() {
        ul.css("left", "-178px");           
        $('#wrapper .slider ul li:last').insertBefore($('#wrapper .slider ul li:first'));
    } 
```

**两个问题**：

*   即使您打算向左移动，您也将第一个移动`li`到了 的末尾。`ul`
*   你的动画和绝对定位是错误的。

# c# - 从列表中选择行 在哪里匹配

> ID：15613776
> 
> 赞同：1
> 
> 时间：2013-03-25T11:27:50.873
> 
> 标签：c#, string, list, search

我有以下`List<string>`

`List<string> RFD = new List<string>(File.ReadAllLines("FDIASNC"));`

它正在读取的文件有这个：

`000821031300000000080
001921031300000000080
004221031300000000080
008121031300000000080
009321031300000000080
011221031300000000080
012221031300000000080
0128200313010000330790000033
207721031300000000080`

所以我想要的是找到一个匹配并选择这一行，例如，如果我想读取“0128”的行，它将手动为 RFD[7]，但我想搜索该行并输出该行进行操作。 .. 任何想法？

谢谢你。

**编辑**

我一发帖就找到了，我是个笨蛋呵呵……谢谢你的回答，10分钟后我会选择一个作为正确的:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:30:53.787

您可以使用 LINQ 进行搜索：

```
var line = File.ReadAllLines("FDIASNC")
               .FirstOrDefault(line => line.StartWith("0128"));

if (line != null)
{
    //Do something with this line
} 
```

你不需要创建一个`List<string>`因为`ReadAllLines`返回`IEnumerable<string>`

如果您的文件很大，您可能会考虑使用延迟执行，[`ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)而不是将所有行加载到内存中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:33:47.423

尝试这个：

```
string line = RFD.FirstOrDefault(line => line.StartsWith("0128")); 
```

如果开头没有 0128 行，则该行为空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:31:13.900

像这样的东西？

```
using System.Linq;

// later in your program...

foreach (string match in RFD.Where(l => l.StartsWith("0128"))) {
    Console.WriteLine(match);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:31:01.543

```
 RFD.Where(r=>r.Contains("0128")).FirstOrDefault() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T11:31:05.397

如果您想准确选择符合您条件的一行，请使用`First`或`Single`LINQ 扩展方法。例如：

```
string str = RFD.First(line => line.StartWith("0128")); 
```

返回`0128200313010000330790000033`字符串

# linq - 任何条件的休眠查询

> ID：15613778
> 
> 赞同：0
> 
> 时间：2013-03-25T11:27:54.067
> 
> 标签：linq, nhibernate

我有像这样的表结构

```
Product {List<Cost> Costs}

Cost{List<Invoice> Invoices, Product product}

Invoice{bool isIncluded} 
```

需要查询以获取所有具有任何成本但不包含任何发票的产品（isIncluded=false for all）

我试过类似的东西：

```
Product pro= null;
Product p = null;

        var costQuery = QueryOver.Of<Cost>()
            .JoinAlias(c => c.Product, () => p)
            .Where(() => p.Id == pro.Id)                
            .WhereNot(c=>c.Invoices.Any(i=>i.IsIncluded))
            .Select(c => c.Id);

        var query = CurrentSession.QueryOver<Product>(() => pro)                
                                  .WithSubquery.WhereExists(costQuery); 
```

在查询错误中使用“任何”：

> 无法识别的方法调用：System.Linq.Enumerable:Boolean Any[Invoice](System.Collections.Generic.IEnumerable `1[Trigger.StageGate.Services‌​.BusinessEntities.Invoice], System.Func`2[Trigger.StageGate.Services.BusinessEntities.Invoice,System.Boolean‌​])

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:27:12.683

try:

```
var costQuery = QueryOver.Of<Cost>()
        .JoinAlias(c => c.Product, () => p)
        .Where(() => p.Id == pro.Id)            
        .JoinQueryOver<Invoice>(c => c.Invoices)
        .WhereNot(i => i.IsIncluded)    
        .Select(c => c.Id); 
```

# xcode - 如何构建命令行实用程序

> ID：15613779
> 
> 赞同：1
> 
> 时间：2013-03-25T11:27:56.017
> 
> 标签：xcode, macos, cocoa, frameworks

我有一个包含命令行实用程序的框架。此应用程序由第三方应用程序调用以执行某些任务。如果没有这个实用程序，我就无法四处走动。

我已经编写了代码并将 .m 文件添加到我的项目中。我为它创建了一个 Core Foundation 类型的新目标。我将正确的文件添加到 Build Phases 下的 Compile Sources 部分。但由于某种原因，Xcode 没有构建我的实用程序。每当我构建框架并展开 Products 组时，命令行实用程序都会显示为红色。

如何强制 Xcode 构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:45:20.460

不确定我是否理解正确。

您有一个带有实用程序的框架，并且您想将该实用程序包含在您的边界中？比您可能需要将该实用程序添加到“构建阶段”的“复制文件”部分

或者您想在您的项目中构建实用程序？
比您可能需要将“命令行工具”目标添加到您的项目中。
**编辑**：要链接两个目标，只需将依赖目标添加到主目标的“构建阶段”的“目标依赖”部分。

# jquery - 动态加载选项卡下的页面

> ID：15613780
> 
> 赞同：1
> 
> 时间：2013-03-25T11:27:58.413
> 
> 标签：jquery, ajax, tabs

我正在使用“[使用 jQuery 插件的选项卡（通过 ajax 的内容）。](http://jqueryui.com/tabs/#ajax) ”

当我单击选项卡时，根据给定的 URL 选择页面加载其内容。

我想要的是：
我想在同一个选项卡下显示另一个页面并删除当前页面的内容。

简而言之，如何在不刷新或重定向包含选项卡结构的主页的情况下从选项卡下加载的内容页面重定向到另一个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:36:09.400

我认为最简单的方法是使您的 ajax PHP 脚本动态化。您可以更改从 AJAX 调用返回的数据以满足您的需要。

然后，您可以使用该`refresh`方法刷新选项卡上的内容，这些内容现在应该与您的 AJAX 脚本不同：

$( ".selector" ).tabs( "refresh" );

如文档中所述：http: [//api.jqueryui.com/tabs/#method-refresh](http://api.jqueryui.com/tabs/#method-refresh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:47:20.043

假设这是您的 div：

```
<div id="content"> </div> 
```

发送ajax

在将获取您的 ajax 请求的页面中，您可以执行

```
if(isset($_POST['getContent')){
    $_POST['getContent'] = file_get_contents('getContent.php');    
    echo $_POST['getContent'];
}
$.ajax({
    type:'POST',
    URL : 'page that will give you your reposne',
    data : {
        getContent : 'getContent'
    },
    success:function(data){
        if(data){
            $('#content').html(data);
        }
    }
}); 
```

file_get_contents('getContent.php') 以字符串形式返回文件的内容，因此如果它是有效文件，则应该没有问题。

# php - 计算等待时间的简单时间函数

> ID：15613783
> 
> 赞同：0
> 
> 时间：2013-03-25T11:28:06.670
> 
> 标签：php, datetime, timestamp

我正在尝试使用 PHP 计算一个简单的时间函数来计算患者的等待时间。到达时间作为 TIMESTAMP 成功输入到患者表中；这是一段代码；

```
// validate arrival time 

$date_time=date('Y-m-d H:i:sa');

clock time
date_default_timezone_set('Europe/London');
$the_time1 = date('G:ia'); 
```

等待时间将是（时钟时间 - 到达时间）

但是，这在我的代码中不起作用！

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

date_default_timezone_set('Europe/London');
$the_time1 = date('G:ia');
$date_time=date('Y-m-d H:i:sa');

echo Waiting_time($the_time1, $date_time); 

function waiting_time ( $the_time1, $date_time) {

$time_diff =  ( $the_time1, $date_time); {
$days      = floor( $time_diff / 86400 ); // 60 * 60 * 24 = number of seconds in a day
$time_diff -= $days * 86400;
$hours      = floor( $time_diff / 3600 ); // 60 * 60 = number of seconds in a hour
$time_diff -= $hours * 3600;
$mins       = floor( $time_diff / 60 ); // 60 = number of seconds in a minute

return( $days . ' days, ' . $hours . ' hours, ' . $mins . ' minutes' );

}

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting Time</th>
</tr>";

}
  echo "<tr>
  <td>" . $row[0] . "</td>
  <td>" . $row[1] . "</td>
  <td>" . $row[2] . "</td>
  <td>" . $row[3] . "</td>
  <td>" . $row[4] . "</td>
  <td>" . $row[5] . "</td>
  <td>" . $waitTime . "</td>
  </tr>";
  }
echo "</table>";
mysqli_close($conn);
?> 
```

编辑;

我现在已将代码更改为此；

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_Time as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

date_default_timezone_set('Europe/London');

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting_Time</th>
</tr>";

 while ($row = $result->fetch_object()){

  echo "<tr>
  <td>" . $row->PatientID . "</td>
  <td>" . $row->Forename . "</td>
  <td>" . $row->Surname . "</td>
  <td>" . $row->Gender . "</td>
  <td>" . $row->Illness . "</td>
  <td>" . $row->Priority . "</td>
  <td>" . $row->Waiting_Time . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

现在显示数据如下；

```
PatientID Forename Surname Gender Illness     Priority Waiting_Time 
249       Sara     Kearns  F      Immediate   high     2013-03-20 22:18:01 
```

我需要以小时为单位显示的等待时间，例如 1:15:23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:31:43.307

在 sql 查询中执行此操作，因为您已经在 DB 中有到达时间

```
$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_Time, TIMEDIFF(Arrival_time,NOW()) as Waiting_Time FROM Patient"; 
```

同样在您上面的示例中，您唯一比较现在时间和现在时间的时间从未实际与数据库中的 Arrival_Time 进行比较

**您的代码的示例修改版本**

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_Time , TIMEDIFF(Arrival_time,NOW()) as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

date_default_timezone_set('Europe/London');

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting Time</th>
</tr>";

 while ($row = $result->fetch_object()){

  echo "<tr>
  <td>" . $row[0] . "</td>
  <td>" . $row[1] . "</td>
  <td>" . $row[2] . "</td>
  <td>" . $row[3] . "</td>
  <td>" . $row[4] . "</td>
  <td>" . $row[5] . "</td>
  <td>" . $row[7] . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

# ide - 设置 xamarin 工作室以使用 PCL 和 MVVMCross

> ID：15613790
> 
> 赞同：9
> 
> 时间：2013-03-25T11:28:37.370
> 
> 标签：ide, mvvmcross, portable-class-library, xamarin-studio

我真的很喜欢 Xamarin Studio，我正在寻找一个模板解决方案来开始使用 MvvmCross 开发跨设备应用程序。

但我找不到如何设置项目以使用 PCL 和 MvvmCross 与 Xamarin Studio。

如果有人可以给我一个链接，我可以在其中找到制作它的教程，那就太棒了。

我很高兴通过提供反馈并提供一些关于如何开始使用 Xamarin Studio、PCL MvvmCross 和摆脱 Visual Studio 的教程来为这个社区做出贡献：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T20:42:52.080

正如@duDE 的回答所指出的，对于在 Xamarin2.0 之前的世界中在 PC 上的 Visual Studio 中工作，http://slodge.blogspot.de/2012/12/cross-platform-winrt 上有非常详细的[说明-monodroid.html](http://slodge.blogspot.de/2012/12/cross-platform-winrt-monodroid.html)

随着上个月 Xamarin 2.0 的各种版本的发布，这些类型的指令变得越来越难以保持更新......这种情况可能会持续一段时间，因为 Xamarin 目前正在添加：

*   .Net 4.5 (Mono 3) 支持
*   异步/等待支持
*   PCL 支持

这项工作正在紧急完成，但没有任何官方目标日期 - 所以恐怕没有任何简单的方法可以预测 Alpha、Beta 或最终可用性的日期。

* * *

对于当前的 OSX 设置，我认为您可以使用：

*   当前的 XamarinStudio/MonoDevelop - 4.0.2
*   当前**稳定**的Xamarin.iOS/MonoTouch 和 Xamarin.Android/MonoDroid -**不要**使用*Aplha*通道

对于当前的 PC 设置，我认为您**不能**使用 Xamarin.iOS，但您**可以**使用：

*   VS2010 或 VS2012
*   当前**稳定**的Xamarin.Android/MonoDroid -**不要**使用*Aplha*频道
*   只需进行一些更改：
    *   您需要添加两个受支持的框架 xml 文件——一个用于 Android，一个用于 MonoTouch——你可以在[http://slodge.blogspot.co.uk/2013/03/xamarinios-with-mvvmcross-in-vs2012.html](http://slodge.blogspot.co.uk/2013/03/xamarinios-with-mvvmcross-in-vs2012.html)

* * *

有关构建和运行事物的讨论，请不要使用 StackOverflow - 而是使用以下之一：

*   [http://forums.xamarin.com/discussion/1549/pcls-and-mvvmcross-in-the-new-tools#latest](http://forums.xamarin.com/discussion/1549/pcls-and-mvvmcross-in-the-new-tools#latest)

作为备份，您也可以尝试[https://jabbr.net/#/rooms/mvvmcross](https://jabbr.net/#/rooms/mvvmcross)

* * *

甚至不要考虑尝试构建 MvvmCross 应用程序 - 在 Xamarin 的免费版本上 - 对于我尝试构建的任何应用程序来说，它的限制都太低了。

* * *

如果您正在寻找一些启动应用程序模板，请使用：[https ://github.com/slodge/MvvmCross-Templates](https://github.com/slodge/MvvmCross-Templates)

如果您正在寻找一些预构建的二进制文件，请使用以下文件夹之一：[https](https://github.com/slodge/MvvmCross-Binaries) ://github.com/slodge/MvvmCross-Binaries - 请注意，在 Mac 上构建的可移植库不能移植到 PC（反之亦然） - 他们将“很快”但还没有。

* * *

很抱歉，我们没有一个更整洁、完整的解决方案……我们已经为将 PCL 侵入 Xamarin 而奋斗了一年。然而，好消息是这场战斗很快就会结束，我们都可以继续使用这些应用程序了 :)

* * *

我保证这个答案会在一周内过时......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-18T13:15:44.680

Xamarin.Studio 4.2 允许您创建 PCL 项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:34:42.787

看看这篇文章：[http ://slodge.blogspot.de/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.de/2012/12/cross-platform-winrt-monodroid.html)

许多关于使用 PCL 的信息以及一些关于 MVVMCross 的特殊信息

# jsf - RichFaces rich：collapsibleSubTable 不通过 ajax 加载结果

> ID：15613793
> 
> 赞同：0
> 
> 时间：2013-03-25T11:29:00.143
> 
> 标签：jsf, jsf-2, richfaces

我正在尝试通过参数化的 ajax 方法调用填充rich:collapsalbeSubTable。

The aim is to display a list of customers, when a customer is selected an ajax call has to be made to load the contract list to fill the sub table.

```
<rich:dataTable value="#{searchController.results}" var="customer">

    <rich:column colspan="2">
        <rich:collapsibleSubTableToggler for="contractSubTable" />
        <h:outputText value="#{customer.name}" />
    </rich:column>

    <rich:collapsibleSubTable
        value="#{searchController.getFirstTenContracts(customer.partnerId)}"
        var="contract" id="contractSubTable" expanded="false"
        expandMode="ajax">

        <rich:column>
            <h:outputText value="#{contract.contractId}" />
        </rich:column>
        <rich:column>
            <h:outputText value="#{contract.contractDesc}" />
        </rich:column>

    </rich:collapsibleSubTable>

</rich:dataTable> 
```

但是，这会导致以下异常：

```
javax.servlet.ServletException: javax.el.ELResolver.invoke(Ljavax/el/ELContext;Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object;
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:221)
    de.hglv.ebusiness.core.presentation.listener.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:79)

root cause 

java.lang.NoSuchMethodError: javax.el.ELResolver.invoke(Ljavax/el/ELContext;Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object;
    com.sun.el.parser.AstValue.getValue(AstValue.java:111)
    com.sun.el.parser.AstValue.getValue(AstValue.java:163)
    com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
    org.apache.myfaces.view.facelets.el.ContextAwareTagValueExpression.getValue(ContextAwareTagValueExpression.java:94)
    javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:246)
    org.richfaces.component.UISequence.getValue(UISequence.java:175)
    org.richfaces.component.UISequence.createExtendedDataModel(UISequence.java:109)
    org.richfaces.component.UIDataTableBase.createExtendedDataModel(UIDataTableBase.java:231)
    org.richfaces.component.UIDataAdaptor.getExtendedDataModel(UIDataAdaptor.java:459)
    org.richfaces.component.UIDataAdaptor.getRowCount(UIDataAdaptor.java:506)
    org.richfaces.renderkit.AbstractTableRenderer.encodeTableRows(AbstractTableRenderer.java:131)
    org.richfaces.renderkit.AbstractTableRenderer.doEncodeChildren(AbstractTableRenderer.java:195)
    org.richfaces.renderkit.RendererBase.encodeChildren(RendererBase.java:157)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:508)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:674)
    org.richfaces.renderkit.DataTableRenderer.encodeRow(DataTableRenderer.java:229)
    org.richfaces.renderkit.AbstractRowsRenderer.process(AbstractRowsRenderer.java:80)
    org.ajax4jsf.model.SequenceDataModel.walk(SequenceDataModel.java:65)
    org.richfaces.component.UIDataAdaptor.walk(UIDataAdaptor.java:796)
    org.richfaces.renderkit.AbstractRowsRenderer.encodeRows(AbstractRowsRenderer.java:90)
    org.richfaces.renderkit.AbstractRowsRenderer.processRows(AbstractRowsRenderer.java:103)
    org.richfaces.renderkit.AbstractTableRenderer.encodeTableRows(AbstractTableRenderer.java:141)
    org.richfaces.renderkit.AbstractTableRenderer.doEncodeChildren(AbstractTableRenderer.java:195)
    org.richfaces.renderkit.RendererBase.encodeChildren(RendererBase.java:157)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:508)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:674)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:681)
    org.richfaces.renderkit.RendererBase.renderChildren(RendererBase.java:276)
    org.richfaces.renderkit.html.PanelRenderer.encodeEnd(PanelRenderer.java:181)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:539)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:685)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:681)
    org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1695)
    org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:281)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
    org.apache.myfaces.tomahawk.application.ResourceViewHandlerWrapper.renderView(ResourceViewHandlerWrapper.java:93)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
    org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:90)
    org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
    de.hglv.ebusiness.core.presentation.listener.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:79)

)
    de.hglv.ebusiness.core.presentation.listener.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:79) 
```

控制器方法的签名是：

```
public List<Contract> getFirstTenContracts(Object partnerId) 
```

如果我的方法有问题，有人可以帮我解决这个问题或指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:13:23.427

`java.lang.NoSuchMethodError`给出了问题：

您的方法签名有一个类型的参数，`Object`并且您正在传递我认为是`int`. 即使在普通的旧 java 中，这也会导致编译失败。

只需更改方法签名即可

# ios - NSFileCoordinator 在沙盒 Mac App Store 应用程序中正确使用 sqlite 日志文件

> ID：15613794
> 
> 赞同：6
> 
> 时间：2013-03-25T11:29:02.767
> 
> 标签：ios, objective-c, cocoa, sqlite, nsfilecoordinator

由于 sqlite 执行事务的方式（使用 wal 或日志文件），我在将我的 sqlite 代码移植到 App Store 时遇到了很多麻烦。Apple文档的相关部分是：

> 您的应用需要能够打开或保存多个具有相同名称和不同扩展名的相关文件（例如，自动打开与电影文件同名的字幕文件，或允许 SQLite 日志文件）。要访问该辅助文件，请创建一个符合 NSFilePresenter 协议的类。该对象应提供主文件的 URL 作为其 primaryPresentedItemURL 属性，并应提供辅助文件的 URL 作为其presentedItemURL 属性。用户打开主文件后，你的文件展示器对象应该调用 NSFileCoordinator 类的 addFilePresenter: 类方法来注册自己。

Apple DTS 为我提供了以下代码：

```
- (void)openSQLiteFileAtURL:(NSURL *)fileURL { 
    NSFileCoordinator *fc = [[NSFileCoordinator alloc] initWithFilePresenter:nil];
    [fc coordinateReadingItemAtURL:fileURL options:0 error:NULL byAccessor:^(NSURL *newURL) {
        sqlite3 *db = NULL;
        char *zErrMsg = 0;

        [SQLiteRelatedItemPresenter addPresentersForURL:newURL];

        int rc = sqlite3_open_v2([[newURL path] fileSystemRepresentation], &db, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL);

        NSLog(@"open %@ = %d", [newURL path], rc);

        rc = sqlite3_exec(db, "CREATE TABLE foo (col1 INTEGER);", callback, 0, &zErrMsg);
        if( rc!=SQLITE_OK ){
            NSLog(@"SQL error: %s\n", zErrMsg);
            sqlite3_free(zErrMsg);
        }

        // more sqlite code here

        sqlite3_close(db);

        }];
        return;
} 
```

其中 SQLiteRelatedItemPresenter 是：

```
@interface SQLiteRelatedItemPresenter : NSObject <NSFilePresenter>
{
    NSURL *primaryPresentedItemURL;
    NSURL *presentedItemURL;
}

static NSOperationQueue *_presentedItemOperationQueue;

@implementation SQLiteRelatedItemPresenter

+ (void) initialize {
    [super initialize];
    if (_presentedItemOperationQueue == nil) {
        _presentedItemOperationQueue = [[NSOperationQueue alloc] init];
    }
}

+ (void)addPresentersForURL:(NSURL *)databaseURL {
    SQLiteRelatedItemPresenter *p1, *p2, *p3, *p4;

    p1 =[[SQLiteRelatedItemPresenter alloc] initWithFileURL:databaseURL prefix:nil suffix:@"-wal"];
    [NSFileCoordinator addFilePresenter:p1];
    p2 = [[SQLiteRelatedItemPresenter alloc] initWithFileURL:databaseURL prefix:nil suffix:@"-shm"];
    [NSFileCoordinator addFilePresenter:p2];
    p3 = [[SQLiteRelatedItemPresenter alloc] initWithFileURL:databaseURL prefix:nil suffix:@"-journal"];
    [NSFileCoordinator addFilePresenter:p3];
    p4 = [[SQLiteRelatedItemPresenter alloc] initWithFileURL:databaseURL prefix:@"." suffix:@"-conch"];
    [NSFileCoordinator addFilePresenter:p4];

    // +filePresenters will only return once the asynchronously added file presenters are done being registered
    [NSFileCoordinator filePresenters];
}

- initWithFileURL:(NSURL *)fileURL prefix:(NSString *)prefix suffix:(NSString *)suffix {
    self = [super init];
    if (self) {
        primaryPresentedItemURL = fileURL;
        NSString *path = [fileURL path];
        if (prefix) {
            NSString *name = [path lastPathComponent];
            NSString *dir = [path stringByDeletingLastPathComponent];
            path = [dir stringByAppendingPathComponent:[prefix stringByAppendingString:name]];
        }
        if (suffix) {
            path = [path stringByAppendingString:suffix];
        }
        presentedItemURL = [NSURL fileURLWithPath:path];
    }
    return self;
}

- (NSURL *)presentedItemURL {
    return presentedItemURL;
}

- (NSOperationQueue *)presentedItemOperationQueue {
    return _presentedItemOperationQueue;
}

- (NSURL *)primaryPresentedItemURL {
    return primaryPresentedItemURL;
} 
```

这个特定的示例适用于所有在 openSQLiteFileAtURL 方法中执行的 sqlite 操作。如果我尝试将逻辑划分为子方法，我会遇到很多麻烦，例如：

```
- openSQLiteFileAtURL:(NSURL *)databaseURL; // just open the db
- executeSQLStatement:(NSString *)sql; //perform read/write operations into the sqlite db previously opened in the openSQLiteFileAtURL method
- closeSQLite(); //close db method. 
```

似乎 addPresentersForURL 应该只被调用一次（在 openSQLiteFileAtURL 中），但由于沙盒权限错误，我无法拥有一个正常工作的应用程序......有什么帮助吗？

# .htaccess - htaccess：打开和关闭特定网址的 https？

> ID：15613798
> 
> 赞同：0
> 
> 时间：2013-03-25T11:29:30.497
> 
> 标签：.htaccess, mod-rewrite, https, expressionengine

我正在尝试配置一些条件重定向，我想要的是：

```
http://www.example.com/login
http://www.example.com/login/*
http://www.example.com/login/account
http://www.example.com/login/account/*
https://www.example.com/account
https://www.example.com/account/* 
```

我的问题是当前的 .htaccess 规则强制`/login/account`在 https 下运行，所以我得到了这个：

```
http://www.example.com/login
http://www.example.com/login/*
https://www.example.com/login/account
https://www.example.com/login/account/*
https://www.example.com/account
https://www.example.com/account/* 
```

这是目前的规则：

```
<Files .htaccess>
 order allow,deny
 deny from all
</Files>

<IfModule mod_rewrite.c> 
RewriteEngine On 

RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ - [E=site_url:http://www.example.com]
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ - [E=site_url:https://www.example.com]

RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} /account
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L]

RewriteCond %{SERVER_PORT} 443
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(/account) 
RewriteRule ^(.*)$ http://www.example.com/$1 [R,L] 
```

我想问题出在`RewriteCond %{REQUEST_URI} !(/account)`规则上。我尝试了许多变体并到处搜索，但没有找到任何与我想做的匹配的东西。

所以只是为了澄清下面的`/account`一切都必须是https，其他一切都应该是http。

对于信息，这是一个表达式引擎站点，因此这些不是物理文件或目录，而是动态生成的 url。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:51:10.093

尝试这个...

```
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} /account
RewriteCond %{REQUEST_URI} !(login/account)
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L]

RewriteCond %{SERVER_PORT} 443
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(/account) 
RewriteCond %{REQUEST_URI} (login/account)
RewriteRule ^(.*)$ http://www.example.com/$1 [R,L] 
```

HTTPS/HTTP 的 ExpressionEngine 具体示例： [https ://expressionengine.stackexchange.com/questions/7601/adding-a-htaccess-redirect-to-https-that-plays-nicely-with-existing-ee-htacces/7659# 7659](https://expressionengine.stackexchange.com/questions/7601/adding-a-htaccess-redirect-to-https-that-plays-nicely-with-existing-ee-htacces/7659#7659)

# ios - 为框架内的崩溃符号化崩溃日志

> ID：15613803
> 
> 赞同：1
> 
> 时间：2013-03-25T11:29:41.203
> 
> 标签：ios, frameworks, crash-reports, symbolicatecrash

[在此链接](http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/)的帮助下，我创建了一个自定义框架，其中包含框架中的所有代码。我在一个新项目中使用了这个框架，代码运行良好，没有任何问题。但是，问题在于应用程序何时崩溃。崩溃报告只是说应用程序在 main 中崩溃了。我只是想知道是否有任何方法可以将我指向坠机的确切位置？IE; 如果崩溃来自框架内，我需要它指向框架内的位置。

**编辑：崩溃报告**

```
Incident Identifier: 6999FFB7-03EC-4A22-B34D-40CD3184AC55
CrashReporter Key:   c6f615ecd88296b5453f757cbd24cc39211bf01c
Hardware Model:      iPad2,1
Process:         testFramework [11504]
Path:            /var/mobile/Applications/59004FF6-D0F2-4370-B516-036D02EC223F/testFramework.app/testFramework
Identifier:      testFramework
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  debugserver [11502]

Date/Time:       2013-03-25 17:16:14.597 +0530
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3246c29e 0x323aa000 + 795294
1   libobjc.A.dylib                 0x3a2c597a 0x3a2bd000 + 35194
2   CoreFoundation                  0x323b7b70 0x323aa000 + 56176
3   testFramework                   0x000e63de 0xe5000 + 5086
4   UIKit                           0x34293590 0x34271000 + 140688
5   UIKit                           0x342d3d74 0x34271000 + 404852
6   UIKit                           0x342cfae8 0x34271000 + 387816
7   UIKit                           0x343111e4 0x34271000 + 655844
8   testFramework                   0x000e6318 0xe5000 + 4888
9   UIKit                           0x342d4ad4 0x34271000 + 408276
10  UIKit                           0x342d465e 0x34271000 + 407134
11  UIKit                           0x342cc846 0x34271000 + 374854
12  UIKit                           0x34274c34 0x34271000 + 15412
13  UIKit                           0x342746c8 0x34271000 + 14024
14  UIKit                           0x34274116 0x34271000 + 12566
15  GraphicsServices                0x35f6859e 0x35f62000 + 26014
16  CoreFoundation                  0x3244167e 0x323aa000 + 620158
17  CoreFoundation                  0x32440ee4 0x323aa000 + 618212
18  CoreFoundation                  0x3243fcb2 0x323aa000 + 613554
19  CoreFoundation                  0x323b2eb8 0x323aa000 + 36536
20  CoreFoundation                  0x323b2d44 0x323aa000 + 36164
21  UIKit                           0x342cb480 0x34271000 + 369792
22  UIKit                           0x342c82fc 0x34271000 + 357116
23  testFramework                   0x000e6156 0xe5000 + 4438
24  libdyld.dylib                   0x3a6fcb1c 0x3a6fb000 + 6940

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3a7c3350 0x3a7b2000 + 70480
1   libsystem_c.dylib               0x3a73a11e 0x3a70b000 + 192798
2   libsystem_c.dylib               0x3a77696e 0x3a70b000 + 440686
3   libc++abi.dylib                 0x39d14d4a 0x39d11000 + 15690
4   libc++abi.dylib                 0x39d11ff4 0x39d11000 + 4084
5   libobjc.A.dylib                 0x3a2c5a74 0x3a2bd000 + 35444
6   libc++abi.dylib                 0x39d12078 0x39d11000 + 4216
7   libc++abi.dylib                 0x39d12110 0x39d11000 + 4368
8   libc++abi.dylib                 0x39d13594 0x39d11000 + 9620
9   libobjc.A.dylib                 0x3a2c59cc 0x3a2bd000 + 35276
10  CoreFoundation                  0x323b2f1c 0x323aa000 + 36636
11  CoreFoundation                  0x323b2d44 0x323aa000 + 36164
12  UIKit                           0x342cb480 0x34271000 + 369792
13  UIKit                           0x342c82fc 0x34271000 + 357116
14  testFramework                   0x000e6156 0xe5000 + 4438
15  libdyld.dylib                   0x3a6fcb1c 0x3a6fb000 + 6940

Thread 1:
0   libsystem_kernel.dylib          0x3a7c3d98 0x3a7b2000 + 73112
1   libsystem_c.dylib               0x3a711cf6 0x3a70b000 + 27894
2   libsystem_c.dylib               0x3a711a12 0x3a70b000 + 27154
3   libsystem_c.dylib               0x3a7118a0 0x3a70b000 + 26784

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3a7b3648 0x3a7b2000 + 5704
1   libdispatch.dylib               0x3a6e3974 0x3a6db000 + 35188
2   libdispatch.dylib               0x3a6e3654 0x3a6db000 + 34388

Thread 3:
0   libsystem_kernel.dylib          0x3a7c3d98 0x3a7b2000 + 73112
1   libsystem_c.dylib               0x3a711cf6 0x3a70b000 + 27894
2   libsystem_c.dylib               0x3a711a12 0x3a70b000 + 27154
3   libsystem_c.dylib               0x3a7118a0 0x3a70b000 + 26784

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3a7b2eb4 0x3a7b2000 + 3764
1   libsystem_kernel.dylib          0x3a7b3048 0x3a7b2000 + 4168
2   CoreFoundation                  0x32441040 0x323aa000 + 618560
3   CoreFoundation                  0x3243fd9e 0x323aa000 + 613790
4   CoreFoundation                  0x323b2eb8 0x323aa000 + 36536
5   CoreFoundation                  0x323b2d44 0x323aa000 + 36164
6   WebCore                         0x38379500 0x3836f000 + 42240
7   libsystem_c.dylib               0x3a71c30e 0x3a70b000 + 70414
8   libsystem_c.dylib               0x3a71c1d4 0x3a70b000 + 70100

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3c2aa534
    r4: 0x00000006    r5: 0x3c2aab88      r6: 0x1c5338d4      r7: 0x2fd1b9b4
    r8: 0x1c5338b0    r9: 0x00000300     r10: 0x346eaaa8     r11: 0x3acebd2c
    ip: 0x00000148    sp: 0x2fd1b9a8      lr: 0x3a73a123      pc: 0x3a7c3350
  cpsr: 0x00000010

Binary Images:
   0xe5000 -    0xe6fff +testFramework armv7  <69d86a20d0a4385491aac6ed4668865c> /var/mobile/Applications/59004FF6-D0F2-4370-B516-036D02EC223F/testFramework.app/testFramework
0x2fe33000 - 0x2fe53fff  dyld armv7  <454baf45f9a831aa88e1ea4447c58d4e> /usr/lib/dyld
0x31674000 - 0x31674fff  Accelerate armv7  <b68ff92e404931f3bcb6361720f77724> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x31675000 - 0x317b3fff  vImage armv7  <30522b92940d3dd184c8e46780594048> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x317b4000 - 0x31897fff  libBLAS.dylib armv7  <d8edada1cea133458ca779e34a3a7f88> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x31898000 - 0x31b4dfff  libLAPACK.dylib armv7  <9e08aead79d13043bab622402a270fba> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x31b4e000 - 0x31ba7fff  libvDSP.dylib armv7  <09e2a5e3e9203950890ba57592523132> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31ba8000 - 0x31bb9fff  libvMisc.dylib armv7  <7b7d4ccc9f2b364cb0da4251e745545d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x31bba000 - 0x31bbafff  vecLib armv7  <a7751c047dcc35ba8885212e1938b93f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x320c1000 - 0x32186fff  CFNetwork armv7  <4771a5e4f9b83bceb252f0f3d166aaca> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x32187000 - 0x321ddfff  CoreAudio armv7  <5d534dbf76ff30f4a628f25f56c5f26a> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x323aa000 - 0x324dcfff  CoreFoundation armv7  <fcb8d4e838543bcb9a52c9f232b8b4eb> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x324dd000 - 0x32615fff  CoreGraphics armv7  <81e213f810a034d4ba411f9b505da2a6> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x32617000 - 0x32652fff  libCGFreetype.A.dylib armv7  <a5d20b80ab1532d8831027a66d2d9eb5> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x32836000 - 0x32851fff  libRIP.A.dylib armv7  <ec1487f9bdb93597a3f8d434406ad9bf> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x32852000 - 0x32907fff  CoreImage armv7  <6ae4ae2461313e3f84c6a8102d5b1b0e> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x32995000 - 0x329fafff  CoreMedia armv7  <8592bdc268b83b8886acfc1fdab649ed> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x32a84000 - 0x32adafff  CoreTelephony armv7  <c5a2e59bb15d35b8a8e356e129b78b5e> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x32adb000 - 0x32b3dfff  CoreText armv7  <e135debbc8f937299f4986fc3e9459e3> /System/Library/Frameworks/CoreText.framework/CoreText
0x32b3e000 - 0x32b4dfff  CoreVideo armv7  <00f18bb26e663da9ae251a6ec36a19ec> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32cd2000 - 0x32e95fff  Foundation armv7  <0179934581d13346aa7583165108b95c> /System/Library/Frameworks/Foundation.framework/Foundation
0x33050000 - 0x33099fff  IOKit armv7  <a98ba9fefc7333e4a5a9169198848c62> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x3309a000 - 0x33272fff  ImageIO armv7  <b5ce84bb074d3de4b07b55da9fd8bfd1> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x33789000 - 0x337e2fff  MobileCoreServices armv7  <77da8a9e7f813f5baf37eaa4a87fae84> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x338d1000 - 0x338d8fff  OpenGLES armv7  <f2ede6b206f336de82cc38619692e762> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x338da000 - 0x338dafff  libCVMSPluginSupport.dylib armv7  <2506af1c983f3f09ac69aca44f67e863> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x338de000 - 0x338e0fff  libCoreVMClient.dylib armv7  <af6ff28dce6031baaa850ccc79e5699b> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x338e1000 - 0x338e5fff  libGFXShared.dylib armv7  <a6ac1673a088379aa512ba5cac301f5b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x338e6000 - 0x33923fff  libGLImage.dylib armv7  <b8b8f3a1bfd0345e86aa0c2952534949> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x3401e000 - 0x34133fff  QuartzCore armv7  <c086b6e6cd9d341399bcc3675c82f1fe> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x34182000 - 0x341b0fff  Security armv7  <fbc24f15bd9e37539cdd6e3576bde938> /System/Library/Frameworks/Security.framework/Security
0x3422f000 - 0x3426efff  SystemConfiguration armv7  <410d69b356e533d6a1d538cf33059634> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x34271000 - 0x347c5fff  UIKit armv7  <e138ca6a809b399691d933dd3d58d00e> /System/Library/Frameworks/UIKit.framework/UIKit
0x347c6000 - 0x34804fff  VideoToolbox armv7  <d2e8067306d9346ab4a448f10f336894> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x34ae5000 - 0x34ae8fff  AggregateDictionary armv7  <a2170ad876f13ef1b944547913d05af2> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x34f14000 - 0x34f4ffff  AppSupport armv7  <921794b7d82a3558a0eb860979be199c> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x34fc2000 - 0x34fcbfff  AssetsLibraryServices armv7  <de7ca29cd47433cd8eca9c04102f5508> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34fe5000 - 0x34ffcfff  BackBoardServices armv7  <585cc62d83c530ee82988de940c1e161> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x35006000 - 0x3502afff  Bom armv7  <b5315d733e123a0781683efdc734064b> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x35260000 - 0x35265fff  CommonUtilities armv7  <f8fea9ee6ca236b0a7fa6c00eb8a0d24> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x3552b000 - 0x3552cfff  CoreSurface armv7  <6065f7e040e93d6ea2837e929592cc30> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x35599000 - 0x3559efff  CrashReporterSupport armv7  <03ee46e3ca3f3920a7174e62096723fb> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x357c5000 - 0x357defff  DictionaryServices armv7  <84669055e3e63d6ab56b8fe7b0476aaa> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x35851000 - 0x35c64fff  FaceCoreLight armv7  <43de0b31da3b39e4acf85ec2c8d5c65c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x35e5c000 - 0x35e68fff  GenerationalStorage armv7  <d77ad2367fff37d485480aa39df7d325> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x35f62000 - 0x35f6dfff  GraphicsServices armv7  <d4b7fd6509753bff9525fef374ddc359> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x36259000 - 0x362a5fff  IMFoundation armv7  <797535fc363c3f818bcd1424251393bf> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x362ac000 - 0x362adfff  IOAccelerator armv7  <9655464326203d258d3d0fc7e94651e2> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x362ae000 - 0x362b3fff  IOMobileFramebuffer armv7  <f38c374982a931d5a47458dd3c34ac59> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x362b4000 - 0x362b8fff  IOSurface armv7  <a55bf03c35de3fd9b56dce82083c3d10> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x36302000 - 0x364a8fff  JavaScriptCore armv7  <a5780997f4b738659172f40877c9a7d9> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x367a3000 - 0x367d0fff  MobileAsset armv7  <3a9e6258ae1230f5b12f1638b09cb974> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x36815000 - 0x36818fff  MobileInstallation armv7  <c63e4b1ae40635cd9c6a7de851c80d10> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x36819000 - 0x3681ffff  MobileKeyBag armv7  <35882c57076334aeb0641969a9b69ff3> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x3687c000 - 0x3687ffff  MobileSystemServices armv7  <10b4eee2739c353183ac2cfe4e39a443> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x3716c000 - 0x37191fff  OpenCL armv7  <5bf059a9deb632678d70099f14f51b82> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x377a5000 - 0x377cdfff  PrintKit armv7  <3f0b9c58a458358eb506858e8ff9e1fe> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x377ce000 - 0x37842fff  ProofReader armv7  <9cb25467554637bcb268ba30527d3c0f> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37987000 - 0x37998fff  SpringBoardServices armv7  <e2571f80a0ad3dc580c69794457bd887> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x37b02000 - 0x37b04fff  TCC armv7  <d5bef30a5bda315194173b862975f9fb> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x37b23000 - 0x37b30fff  TelephonyUtilities armv7  <803d7a92439238ee942086999c481eb6> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x37fb3000 - 0x38053fff  UIFoundation armv7  <9a464526e26634bc834537e5ac3abf1f> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x3834f000 - 0x3836efff  WebBookmarks armv7  <77b65bc9c87b367ebea9a5b7984b13a5> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x3836f000 - 0x38c9efff  WebCore armv7  <ce52fd40ccc236c4b86c020beabb1bb0> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x38c9f000 - 0x38d7cfff  WebKit armv7  <dee20c7689bc3e029172b488d8c5f772> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x38e27000 - 0x38e2efff  XPCObjects armv7  <723fe314ab95381cbfa69a0000005692> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x39b3e000 - 0x39b44fff  libAccessibility.dylib armv7  <f40705b5e9c43ce3b1f185fe690b9ac8> /usr/lib/libAccessibility.dylib
0x39b45000 - 0x39b5bfff  libCRFSuite.dylib armv7  <5a8a3d18a1ff3c97bd773705fef2d81c> /usr/lib/libCRFSuite.dylib
0x39b73000 - 0x39b7ffff  libMobileGestalt.dylib armv7  <ea41737238273d73b173ec09358d7b62> /usr/lib/libMobileGestalt.dylib
0x39b91000 - 0x39b91fff  libSystem.B.dylib armv7  <7aeeab280f7e361e9986d962d0fa5281> /usr/lib/libSystem.B.dylib
0x39caf000 - 0x39cbbfff  libbsm.0.dylib armv7  <3870b1c8b1783b788bd51da1a04eae6e> /usr/lib/libbsm.0.dylib
0x39cbc000 - 0x39cc5fff  libbz2.1.0.dylib armv7  <b04d27fa0f2d31d8bd0745f8aa0d7f67> /usr/lib/libbz2.1.0.dylib
0x39cc6000 - 0x39d10fff  libc++.1.dylib armv7  <ceb9fb64fb203d3a94063a9db6590ca4> /usr/lib/libc++.1.dylib
0x39d11000 - 0x39d24fff  libc++abi.dylib armv7  <4b8520bc534231ae97ce146e076bc7bf> /usr/lib/libc++abi.dylib
0x39d55000 - 0x39e42fff  libiconv.2.dylib armv7  <ac23bb84e91e35418c9a2fb4792658b2> /usr/lib/libiconv.2.dylib
0x39e43000 - 0x39f8cfff  libicucore.A.dylib armv7  <da9d04cc6f6d3825aa52636342ef1e04> /usr/lib/libicucore.A.dylib
0x39f94000 - 0x39f94fff  liblangid.dylib armv7  <a10d8f96815d35e0a1d2c7b998a941f3> /usr/lib/liblangid.dylib
0x39f97000 - 0x39f9efff  liblockdown.dylib armv7  <996afbc31d8b3f2a907be2427509a4c8> /usr/lib/liblockdown.dylib
0x3a2bd000 - 0x3a3bbfff  libobjc.A.dylib armv7  <79e5d714945834e4b2587abfc6c7269c> /usr/lib/libobjc.A.dylib
0x3a47f000 - 0x3a494fff  libresolv.9.dylib armv7  <3ee61a04a99b322e97e179bc03c46cf1> /usr/lib/libresolv.9.dylib
0x3a4b9000 - 0x3a53efff  libsqlite3.dylib armv7  <cbefd01867b93d2a869a534825a1414c> /usr/lib/libsqlite3.dylib
0x3a53f000 - 0x3a58afff  libstdc++.6.dylib armv7  <e3154b06ac5d360c948111abfb2bc339> /usr/lib/libstdc++.6.dylib
0x3a58b000 - 0x3a5b1fff  libtidy.A.dylib armv7  <c43990ee3a5e389aacf288c3615a50dc> /usr/lib/libtidy.A.dylib
0x3a5b5000 - 0x3a662fff  libxml2.2.dylib armv7  <28dcf6ee713b387ebb763d11d4b3cd37> /usr/lib/libxml2.2.dylib
0x3a663000 - 0x3a683fff  libxslt.1.dylib armv7  <d327d9e0f43333568abda8d83558c8a9> /usr/lib/libxslt.1.dylib
0x3a684000 - 0x3a690fff  libz.1.dylib armv7  <3ea49513bc023326be68e35324c11d0e> /usr/lib/libz.1.dylib
0x3a691000 - 0x3a694fff  libcache.dylib armv7  <91862e82d5063531b4fb4da9a19e5365> /usr/lib/system/libcache.dylib
0x3a695000 - 0x3a69bfff  libcommonCrypto.dylib armv7  <d9e66574881739e8b25c3ae087a9f409> /usr/lib/system/libcommonCrypto.dylib
0x3a69c000 - 0x3a69efff  libcompiler_rt.dylib armv7  <6ac449c92d743640a23d9d1ebe0b48a9> /usr/lib/system/libcompiler_rt.dylib
0x3a69f000 - 0x3a6a4fff  libcopyfile.dylib armv7  <87bcae8743ab35c8a070ac95b7d57acb> /usr/lib/system/libcopyfile.dylib
0x3a6a5000 - 0x3a6dafff  libcorecrypto.dylib armv7  <04b464137fc2304b84eeed1a5418f4a8> /usr/lib/system/libcorecrypto.dylib
0x3a6db000 - 0x3a6f8fff  libdispatch.dylib armv7  <9323bb560d4e3a3fb41efdc78bd0cf94> /usr/lib/system/libdispatch.dylib
0x3a6f9000 - 0x3a6fafff  libdnsinfo.dylib armv7  <c25502085c833181b2a12cf525cffde6> /usr/lib/system/libdnsinfo.dylib
0x3a6fb000 - 0x3a6fcfff  libdyld.dylib armv7  <82229500ed4132ecbe012e0774e5fc4a> /usr/lib/system/libdyld.dylib
0x3a6fd000 - 0x3a6fdfff  libkeymgr.dylib armv7  <e19c865e73e2352bbc8022033e953f22> /usr/lib/system/libkeymgr.dylib
0x3a6fe000 - 0x3a703fff  liblaunch.dylib armv7  <c8bedc36bc3d3b55b91b12ebb1240968> /usr/lib/system/liblaunch.dylib
0x3a704000 - 0x3a707fff  libmacho.dylib armv7  <965ab939e24935e7a3a65981574a7745> /usr/lib/system/libmacho.dylib
0x3a708000 - 0x3a709fff  libremovefile.dylib armv7  <295706037a5238b4aa145df7b9354a0e> /usr/lib/system/libremovefile.dylib
0x3a70a000 - 0x3a70afff  libsystem_blocks.dylib armv7  <50a01a02f573317fbd21e1070b0afc7d> /usr/lib/system/libsystem_blocks.dylib
0x3a70b000 - 0x3a791fff  libsystem_c.dylib armv7  <cacc68d271e53338b7780c26f651b767> /usr/lib/system/libsystem_c.dylib
0x3a792000 - 0x3a798fff  libsystem_dnssd.dylib armv7  <6c5ac17133a1366aaeea5dc38dceaf1f> /usr/lib/system/libsystem_dnssd.dylib
0x3a799000 - 0x3a7b1fff  libsystem_info.dylib armv7  <5a4a4c9da868317db7f17cb616eb32d1> /usr/lib/system/libsystem_info.dylib
0x3a7b2000 - 0x3a7c8fff  libsystem_kernel.dylib armv7  <8e995919df713a8783f23e7f6649bf09> /usr/lib/system/libsystem_kernel.dylib
0x3a7c9000 - 0x3a7e5fff  libsystem_m.dylib armv7  <036ea0321da038e8b69a0c4413da00fe> /usr/lib/system/libsystem_m.dylib
0x3a7e6000 - 0x3a7f4fff  libsystem_network.dylib armv7  <afc167a2e9be3dd6851da8deaf42bafd> /usr/lib/system/libsystem_network.dylib
0x3a7f5000 - 0x3a7fcfff  libsystem_notify.dylib armv7  <c1d71aa978383c51a9ba2b32782d6cc6> /usr/lib/system/libsystem_notify.dylib
0x3a7fd000 - 0x3a7fefff  libsystem_sandbox.dylib armv7  <45bb99d46408351a9c61b5326032adea> /usr/lib/system/libsystem_sandbox.dylib
0x3a7ff000 - 0x3a7fffff  libunwind.dylib armv7  <df8f1d90cbb837cc92d5901fab94e6ca> /usr/lib/system/libunwind.dylib
0x3a800000 - 0x3a815fff  libxpc.dylib armv7  <7f983066ea4c3c119f3e2344a04fef6e> /usr/lib/system/libxpc.dylib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:52:09.283

这是由异常引起的崩溃。由于异常被重新抛出到另一个运行循环中，主线程 0 将始终只显示`main.m`. 因此，发生崩溃的真实位置随后显示在`Last Exception Backtrace`.

您当然需要对粘贴的崩溃报告进行符号化，然后在其中查看详细信息。

一个提示：您不应该**从**伪造框架中使用的静态库中删除调试符号。否则，崩溃报告将永远不会显示发生崩溃的代码行。

检查静态库目标是否具有以下构建设置（在您的应用中应该相同）：

*   在复制期间去除调试符号：否
*   带链接产品：否
*   部署后处理：否
*   生成调试符号：是

# c++ - C ++ QLineEdit：setmaxlength（）用于字节数而不是字符数？

> ID：15613805
> 
> 赞同：2
> 
> 时间：2013-03-25T11:29:44.457
> 
> 标签：c++, qt, qlineedit

我的应用程序中有一个 QLineEdit，我应该能够在其中输入最多 10 字节的英文字符，在输入日文字符时，如果字符是 2 字节，我应该只能输入 5 个日文字符，如果是日文字符是一个1字节的字符，我应该可以输入10个日文字符。请帮我解决一下这个。

我尝试使用

```
QLineEdit::setMaxLength(10) 
```

但它只适用于英文字符，但不适用于日文字符。

任何想法/建议？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:52:23.117

请注意，用于字符的字节数完全取决于您使用哪种编码来存储它。 `QString`所有字符使用 2 个字节，但可能您对特定编码感兴趣，例如 UTF-8。我建议您不要使用`setMaxLength`您需要创建一个`QValidator`子类来实现您的特定验证规则并将其设置在您的行编辑中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T05:20:26.730

我解决了我的问题如下：

在 LineEdit 插槽中：

```
 void ABC::on_abc_cmd_task_tableWidget_linedit_cellChanged(QString str)
 {
    QLineEdit *edit = qobject_cast<QLineEdit *>(sender());

    if(edit)
    {
        QByteArray chkDataSize;
        chkDataSize.clear();
        chkDataSize.append(str);
        int dSize = chkDataSize.size();

        qDebug() << "total Bytes in text = " << dSize;
        qDebug() << "Max length before = " << edit->maxLength();

        if (dSize == edit->maxLength())
        {
             edit->setMaxLength(str.size());
        }

        qDebug() << "Max length after = " << edit->maxLength();

      }

 } 
```

用俄语字符/日语字符等进行了很好的测试。

# django - WrongBackend at /login/error/ 不正确的身份验证服务“错误”

> ID：15613806
> 
> 赞同：3
> 
> 时间：2013-03-25T11:29:45.767
> 
> 标签：django, mongoengine, django-socialauth

我正在尝试通过 BitBucket、Github、LinkedIn 实现社交媒体身份验证，并且在 /login/error/ 处收到错误 WrongBackend，LinkedIn 和 Bitbucket 和 QueryDict 的身份验证服务“错误”：{u'error': [u'用于 Github 的 redirect_uri_mismatch']}。

我使用 MongoEngine 作为数据库存储

这是 Bitbucket 的回溯（与 LinkedIn 类似）

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/login/error/

Django Version: 1.4.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'blogapp',
 'social_auth')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/social_auth/decorators.py" in wrapper
  29\.                 raise WrongBackend(backend)

Exception Type: WrongBackend at /login/error/
Exception Value: Incorrect authentication service "error" 
```

我在异常“/usr/local/lib/python2.7/dist-packages/social_auth/decorators.py”的位置添加了一个跟踪，并得到了以下[跟踪](http://paste.kde.org/706616/)。任何人都可以让我知道我要去哪里错了吗？这非常令人沮丧。

我的应用程序具有以下[设置](http://paste.kde.org/706622/)

在所有服务中，我已将我的应用程序 url 注册为 localhost:8000 并将回调 url 注册为 localhost:8000/callback/

[编辑]

我创建了一个答案中提到的 sqlite3 表，它创建了一些表。但问题依然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:32:55.363

编辑：我之前关于使用 sqlite3 db 的回应是基于错误的假设。看看这里的代码是怎么回事

1.  您正在注释掉 LOGIN_ERROR_URL。在这种情况下，工作流程会将我带到 Linked 并引发您提到的错误。
2.  当您取消注释此行并尝试时，您可以看到它会将您重定向到登录错误回调。

所以我的猜测是你需要取消注释这一行，在你注册了 Linked In 应用程序的域上部署这个代码并在那里测试它。（我想问题的一部分是你像我一样在 Localhost 上测试它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:12:09.113

我认为您的问题是回调 URL。您告诉那些服务它是 localhost:8000/callback，但 django-social-auth 以以下形式提供它的回调：/complete/（例如，/complete/github）。它不是所有这些后端的一个 URL。

# hibernate - 负载平衡tomcats中的休眠自动增量？

> ID：15613815
> 
> 赞同：0
> 
> 时间：2013-03-25T11:30:04.097
> 
> 标签：hibernate, tomcat, load-balancing, auto-increment

我在 3 个负载平衡的 Tomcat 中部署了使用 Hibernate 的 Web 应用程序

我经常收到以下异常

```
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253)
at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:92)
at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:87)
at org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:222)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2224)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2660)
at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:56)
at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:250)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:234)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:141)
at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
at com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInterceptor.intercept(SessionTransactionInjectorInterceptor.java:181)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

引起：java.sql.BatchUpdateException：在 com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1666) 的 com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java) 的键 'PRIMARY' 的重复条目 '145985' :1082) 在 com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723) 在 org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48) 在 org.hibernate.jdbc.AbstractBatcher。 executeBatch(AbstractBatcher.java:246) ... 还有 38 个

我使用了以下配置

```
@Id
@GenericGenerator(name = "generator", strategy = "increment")
@GeneratedValue(generator = "generator")
@Basic(optional = false)
@Column(name = "address_id", nullable = false)
private Long addressId; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:51:19.077

[IncrementGenerator](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/id/IncrementGenerator.java)不是集群安全的，如源代码中所述。它通过第一次读取最大 id 值并在内存中保持递增来工作。在您的情况下，假设一开始，最大值为 10。3 个节点的 IncrementGenerator 可能将该值读取为 10，并将 11 分配为每个节点中创建的实例的 id。

始终依靠您的数据库 id 生成机制来保证集群安全。

# sql-server - 在 SQL Server 2008 R2 开始调试时发生错误，错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。(mscorlib)

> ID：15613817
> 
> 赞同：8
> 
> 时间：2013-03-25T11:30:11.660
> 
> 标签：sql-server, debugging, sql-server-2008r2-express

我正在使用 SQL Server 2008 R2 Express，当我从客户端 PC 使用 SQL Server 调试功能时，会发生此错误：

> 对象“sp_enable_sql_debug”、数据库“mssqlsystemresource”、模式“sys”的执行权限被拒绝。（Microsoft SQL Server，错误：229）

我的用户名是“HALI”，分配给我的权限是“public”和“db_Owner”，

现在在这个错误之后，我已经分配了所有可用的权限。以及所有服务器角色。

现在这个时候我收到了新的错误信息，

> 对 COM 组件的调用已返回错误 HRESULT E_FAIL。(mscorlib)

现在解决这个错误的方法是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-26T02:23:08.250

我不确定禁用防火墙是否足够。如果用户具有系统管理员权限并且仍然收到此错误，则意味着客户端无法在调试模式下连接到服务器。检查此 TCP 和 UDP 端口是否正确打开。

[SQL远程调试配置](http://blogs.msdn.com/b/billramo/archive/2009/04/11/transact-sql-debugger-for-sql-server-2008-part-2.aspx)

**编辑：1**

我相信你一定也用谷歌搜索了很多，并试图找出错误消息。到目前为止，我发现您提到的 OP 中的错误具有误导性，并且从该错误中，我们无法判断到底是什么错误或下一步该看什么。但是正如您在评论中回复的那样，在进行更改以启用远程调试器之后；提到的错误更清楚，我觉得适当的许可仍然是一个问题。到目前为止，您可能还尝试过很多其他建议，但如果您还没有这样做，让我们再试一次：

**在我提到的其中一条评论中，您尝试使用 windows 用户登录。**

现在保留您已经对 TCP 端口、防火墙异常等进行的设置……在上面的链接中进行了说明。你有安装数据库服务器的 Windows 2012 服务器。和 Windows 8 Prof，您有 DB 客户端并通过 SSMS 连接。**现在我相信两台机器都在同一个域中。**假设域 XYZ。您必须在服务器上登录 Windows，假设它是“XYZ\HALI”，您可以使用它登录到 Windows 服务器。登录并确保登录也存在于具有系统管理员权限的 SQL SERVER 中。由于客户端机器也在同一个域中，请确保您已使用相同的用户“XYZ\HALI”登录到客户端机器。现在启动 SSMS 并选择 windows 身份验证而不是 SQL SERVER 身份验证。现在尝试开始调试 T-SQL 代码。

if client and server machines are not in the same domain then we have to register server name on client machine as Linked Server, impersonate the login/user as local and then try the debugging.

**Edit:2**

![Login to SSMS using Windows Authentication](../Images/f74a8eeddfb10cef35d1c4cc377f4011.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-15T13:12:32.567

我在生成 SQL 2012 脚本并在 SQL 2008 R2 数据库中运行它后遇到了这个问题。

经过一番研究，我发现我的目标 SQL 2008 R2 运行在 32 位操作系统上，它支持最大 2GB 的文件。所以我将脚本保存为 C:\myScript.sql 并通过以下步骤在命令提示符下成功执行它：

1.  打开命令提示符窗口。

2.  在命令提示符窗口中，键入：

    ```
    sqlcmd -S myServer\instanceName –U yourUserName –P yourPassword -i C:\myScript.sql 
    ```

    `myServer\instanceName`实例名称在哪里。提供 SQL Server 登录的用户名和密码，最后提供指示的文件路径。

3.  按 Enter。

参考：

*   [sqlcmd 实用程序 | 微软文档](https://docs.microsoft.com/en-us/sql/tools/sqlcmd-utility?view=sql-server-2017)

*   [使用 sqlcmd 实用程序 | 微软文档](https://docs.microsoft.com/en-us/sql/relational-databases/scripting/sqlcmd-use-the-utility?view=sql-server-2017)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:36:01.210

几次我遇到这个错误，它总是与防火墙有关。您是在远程服务器上工作，还是在本地计算机上工作？（顺便说一句，分配所有可能的角色时要小心。其中一些是您绝对不想要的。SQL 调试所需的角色是系统管理员 - 尝试禁用您检查的其余角色并仅分配该角色。）

调试过程总是很痛苦。[这篇 ASP.NET 帖子](http://www.asp.net/web-forms/tutorials/data-access/advanced-data-access-scenarios/debugging-stored-procedures-vb)不久前帮助了我。

# objective-c - 表视图部分

> ID：15613824
> 
> 赞同：0
> 
> 时间：2013-03-25T11:30:30.490
> 
> 标签：objective-c, arrays, uitableview, sections

我有一个`NSArray`包含一个键列表，这个数组来自一个.plist。

此时我将这个数组写在 a 中`UITableView`，但这不是排序和分段的。我想对这个数组进行排序，并希望在这个数组中有节，`UITableView`它以这个数组中每个字符的第一个字符开头。

例如： Sectionname: "A" Celltext: "Ahorn"

我希望你能明白。我现在的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

NSArray * sections = [temp allValues];

NSUInteger *tablesections = [sections count];

return tablesections;

} 
```

和：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath 

    NSArray * values = [temp allValues];

[EingabeListe addObjectsFromArray:values];

char szDecryptetKey[256];
sleep(0.5);

NSString *cellValue = [values objectAtIndex:indexPath.row];
const char *cString = [cellValue cStringUsingEncoding:NSASCIIStringEncoding];

DecryptKey(cString, szDecryptetKey);

NSString *pnssDecryptetKey = [NSString stringWithFormat:@"%s",szDecryptetKey];

cell.textLabel.font = [UIFont systemFontOfSize:11.0];
cell.textLabel.text = pnssDecryptetKey;

return cell; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:14.597

我可能不会把它留在一个数组中。我会把它放在一个`NSDictionary`字母表中的每个字母都是一个桶，用于字母表的每个第一个字母（和一个部分）。然后获取单个部分的内容就像在字典中查找您想要的第一个字母一样简单。

首先按字母顺序对数组进行排序。这个问题被问了很多次，但这里有[一个答案](https://stackoverflow.com/questions/1351182/how-to-sort-a-nsarray-alphabetically)

接下来，遍历数组并根据第一个字母将其添加到字典中。字典中的每个“值”都是一个数组，而不仅仅是一个项目。因此，当您第一次遇到一个字母（比如“g”）时，您将在字典中创建“g”键并添加一个 NSMutable 数组作为值。

作为旁注，我没有添加代码，因为这听起来像是一项家庭作业（当然我可能是错的）。虽然我想帮忙，但我不想为你做这件事。也就是说，如果不清楚或者您需要更多帮助，我很乐意提供）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:14:01.070

嗨谢谢它工作得很好。但我只能看到我的 .plist 的第一个字符。

我认为错误的行是这一行：

```
NSString *cellValue = [values objectAtIndex:indexPath.row]; 
```

但这是我的代码：

```
[super viewDidLoad];
self.EingabeListe = [NSMutableArray arrayWithCapacity:20];
NSIndexPath *indexPath = 0;

alphabet = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",
            @"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",@"123",nil];

datasource = [[NSMutableDictionary alloc]initWithCapacity:[alphabet count]];

int m = 1;
int n = 0;
NSArray * values = [temp allValues];
int c = [values count];

//

char szDecryptetKey[256];
sleep(0.5);

while (m != 0) {
    if ( n == c){
        m = 0;
    }else{
        NSString *cellValue = [values objectAtIndex:indexPath.row];
        const char *cString = [cellValue cStringUsingEncoding:NSASCIIStringEncoding];

        NSString *pnssDecryptetKey = [NSString stringWithFormat:@"%s",szDecryptetKey];

        [EingabeListe addObject:pnssDecryptetKey];
        pnssDecryptetKey = 0;
    }
    n++;

}

for(int i = 0; i<[alphabet count]; i ++)
{
    NSArray *filteredArray = [EingabeListe filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF BEGINSWITH[C] %@", [alphabet objectAtIndex:i]]];
    if([filteredArray count]>0)
        [datasource setObject:[filteredArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)] forKey:[alphabet objectAtIndex:i]]; // Dictionary containing sorted array of data with key as alphabets

}
} 
```

在我的 .plist 中有一些测试键和值，如下所示：

值键 sqq hi zzz eg egg bb

但在 my.plist 我只能看到： sqq sqq sqq

为什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:00:34.360

我通常为这类应用程序使用免费的 Sensible TableView 框架。您实际上只是将数组扔到框架中，它会自动为您排序和创建所有部分。应该花几分钟来实施，所以我建议检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:41:38.727

为此，您需要在代码中进行修改；我会解释。

脚步：

1.  初始化字母数组并根据字母过滤使用源数组。
2.  现在 dataSource 字典包含按字母过滤的源数据数组。
3.  现在部分的数量将没有。字典中的数组。
4.  从数据源字典中加载每个部分的数据源数组。

初始化字母数组和数据源数组：

```
 alphabet = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",
                                    @"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];

  dataSource = [[NSMutableDictionary alloc]initWithCapacity:[alphabet count]];

  sourceArray = [NSArray arrayWithObjects:@"Azz",@"ax",@"aje",@"B",@"C",@"Ca",@"D",@"DD",@"E",@"EE",@"F",@"G",@"F", nil]; 
```

过滤源数组并将数据添加到字典中，键值作为字母：

```
for(int i = 0; i<[alphabet count]; i ++)
 {
 NSArray *filteredArray = [sourceArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF BEGINSWITH[C] %@", [alphabet objectAtIndex:i]]];
  if([filteredArray count]>0)
   dataSource setObject:[filteredArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)] forKey:[alphabet objectAtIndex:i]]; // Dictionary containing sorted array of data with key as alphabets

} 
```

并且您需要自定义节数和行数委托方法。查看示例代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return [[dataSource allKeys] count];
}

      - (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:(NSInteger)section 
{
                return [[dataSource allKeys] objectAtIndex:section]; 
} 
```

整个源代码：

```
 - (void)viewDidLoad
        {
            [super viewDidLoad];

            alphabet = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",
                        @"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];

            dataSource = [[NSMutableDictionary alloc]initWithCapacity:[alphabet count]];

            sourceArray = [NSArray arrayWithObjects:@"Azz",@"ax",@"aje",@"B",@"C",@"Ca",@"D",@"DD",@"E",@"EE",@"F",@"G",@"F", nil];

            for(int i = 0; i<[alphabet count]; i ++)
            {
                NSArray *filteredArray = [sourceArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF BEGINSWITH[C] %@", [alphabet objectAtIndex:i]]];
                if([filteredArray count]>0)
                    [dataSource setObject:[filteredArray sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)] forKey:[alphabet objectAtIndex:i]]; // Dictionary containing sorted array of data with key as alphabets

            }
            NSLog(@"Filtered Array %@", dataSource);

        }

        #pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return [[dataSource allKeys] count];
}

      - (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:(NSInteger)section 
{
                return [[dataSource allKeys] objectAtIndex:section]; 
}

        - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
        {

            return [[dataSource objectForKey:[[dataSource allKeys] objectAtIndex:section]] count];

        }

        - (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
        {

            return 20;
        }
        - (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath
        {
            return NO;
        }

        - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {

            originalSource = [dataSource objectForKey:[[dataSource allKeys] objectAtIndex:indexPath.section]];

            static NSString *CellIdentifier = @"Cell";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil) {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            }
            cell.textLabel.text = [NSString stringWithFormat:@"%@",[originalSource objectAtIndex:indexPath.row]];
            return cell;

        }

        #pragma mark - Table view delegate

        - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
        {

        } 
```

输出将是这样的：

![在此处输入图像描述](../Images/865ea0e90a3d589eb809251052f7cf25.png)

# php - 将变量从php传回jquery？

> ID：15613827
> 
> 赞同：0
> 
> 时间：2013-03-25T11:30:40.700
> 
> 标签：php, jquery, html

我正在尝试将我的登录页面转换为使用 html 并使用 jquery 和 php 来获取和处理结果，原因是如果我想与我的项目一起使用移动设备，那么我就快到了。

我遇到的问题是将变量从 php 传递回 jquery 以同时显示。

我的示例 index.html

```
<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Auth Demo 2</title>
    <script src="jquery/jquery-1.7.2.min.js"></script>
    <script src="main.js"></script>
</head>

<body onload="handleLogin()">

        <form id="loginForm">

            <label for="email">Email:</label>
            <input type="text" name="email" id="email" value="" placeholder="email" />

            <label for="password">Password:</label>
            <input type="password" name="password" id="password" value="" placeholder="Password" />

        <input type="submit" value="Login" id="submitButton">
        </form>

</body>
</html> 
```

main.js

```
 function handleLogin(){

        var form = $("#loginForm");
        var u = $("#email", form).val();
        var p = $("#password", form).val();

        if(u!= '' && p!= '') {
             $.post("http://www.mysite.co.uk/login.php",{ 
                        email:$('#email', form).val(),
                        password:$('#password', form).val(),
                        rand:Math.random() 
                      } ,function(data)
                          {
                             if(data=='yes') //if correct login detail
                             {
                                 alert( "Request success: ");
                             }
                             else
                             {  
                                  //add reason in alert box here
                                  alert ("failed reason")
                              }
                   });
        } else {
                    alert( "Username/password empty");
               }
         return false;//not to post the  form physically

     } 
```

登录.php

```
<?//get the posted values
require_once("../backend/functions.php");
dbconn(true);

if ($_POST["email"] && $_POST["password"]) {
    $password = passhash($_POST["password"]);

    if (!empty($_POST["email"]) && !empty($_POST["password"])) {
        $res = SQL_Query_exec("SELECT id, password, secret, status, enabled FROM users WHERE email = " . sqlesc($_POST["email"]) . "");
        $row = mysql_fetch_assoc($res);

        if ( ! $row || $row["password"] != $password )
            $message = "Wrong password";
        elseif ($row["status"] == "pending")
            $message = "Account Pending";
        elseif ($row["enabled"] == "no")
            $message = "Account Suspened";
    } else
        $message = "No Username/password added";

    if (!$message){
        logincookie($row["id"], $row["password"], $row["secret"]);
        if (!empty($_POST["returnto"])) {
            header("Refresh: 0; url=" . $_POST["returnto"]);
            die();
        }
        else {
            echo  "yes";
            die();
        }
    }else{
        echo $message;
    }
}

logoutcookie(); 
```

正如您所看到的，登录失败时有各种原因我想传回警报框。解决这个问题的最好方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:35:16.953

只是提醒数据

```
 if(data=='yes') //if correct login detail
  {
      alert( "Request success: ");
  } 
  else{
        alert (data)
   } 
```

但是我建议以 JSON 格式获取响应.....

```
if(u!= '' && p!= '') {
     $.post("http://www.mysite.co.uk/login.php",{ 
               email:$('#email', form).val(),
               password:$('#password', form).val(),
               rand:Math.random() 
         } ,function(data)
             {
                if(data=='yes') //if correct login detail
                {
                    alert( "Request success: ");
                }
                else
                {                                                      //add reason in alert box here
                    alert (data)
                 }
           });

  } else {
         alert( "Username/password empty");
  }

     return false;//not to post the  form physically
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:35:30.380

尝试使用 JSON；

```
JSON.stringify(your_object, null, 2); 
```

用这个在 PHP 中捕获 POST 以获取数组：[http ://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

```
$data = json_decode($_POST); 
```

当 PHP 完成后，回显数组数据的编码 JSON 字符串：[http ://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

```
echo json_encode($return_data); 
```

在 jQuery 中，用于测试；

```
console.log(data);
console.log(data.yes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:11:45.797

```
function handleLogin(){

    var form = $("#loginForm");
    var u = $("#email", form).val();
    var p = $("#password", form).val();

    if(u!= '' && p!= '') {

        jQuery.ajax({
             type: "POST", 
             url: "http://www.mysite.co.uk/login.php", 
             data: 'username='+u+'&password='+p+'&rand='+Math.random(),
             complete: function(data){

                 if(data.responseText == 'yes'){
                    alert( "Request success: ");
                 }else{
                    alert( "failed: ");
                 }

         });

    } else {

        alert( "Username/password empty"); 

    }

     return false;//not to post the  form physically

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:34:16.050

最好的方法是使用 $.ajax() 并使用“XML”类型。然后让 login.php 返回一个 XML 文件，其中包含您需要的任何参数（用户 ID、错误消息（如果有）、用户名等）。然后，您可以使用 jQuery 解析 XML 文件以立即使用这些变量。无论如何，在后端处理错误更安全。

# ios - 从辅助视图控制器更新图像

> ID：15613837
> 
> 赞同：0
> 
> 时间：2013-03-25T11:31:10.807
> 
> 标签：ios, objective-c, xcode, uibutton

我需要从弹出视图控制器更新主视图控制器上的图像。

该按钮在主视图（EraViewController）上称为“Feature2btn”，但是当我在弹出视图控制器上尝试以下代码时，它不起作用。

它需要立即更新，因为主视图仍在后台显示并且不会重新加载，因此更改需要直接由弹出视图上的操作引起。

```
- (IBAction)purchase:(id)sender {
 HomeController = [[EraViewController alloc] initWithNibName:@"EraViewController" bundle:nil];
    UIImage *image = [UIImage imageNamed:@"ico_plan.png"];
    [(EraViewController*)HomeController setFeature2Btn:[feature2Btn setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:53:39.087

有（至少）两种方法可以做到这一点：

1.  您使用一个控制器监听而另一个控制器在适当的时间发送的通知。
2.  您创建一个委托协议，第一个控制器实现，第二个调用。

委托人有点复杂，但通常被认为是好的风格。通知也不错，但“优雅”稍差。我将在此处描述基于通知的通知，因为它似乎适合您的情况，并且还允许通过在多个地方注册通知来对购买做出反应。

在要更新图像的控制器中，在以下位置注册通知`viewDidAppear:`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateImage:) name:@"UpdateImageNotification" object:nil]; 
```

实现`updateImage:`方法：

```
-(void)updateImage:(NSNotification*)note
{
    NSString* newImageName = note.userInfo[@"imageFileKey"];
    // ... update UI with the new image
} 
```

还要确保在视图消失时取消注册该通知：

```
-(void)viewWillDisappear:(BOOL)animated
{
     [[NSNotificationCenter defaultCenter] removeObserver:self];
     [super viewWillDisappear:animated];
} 
```

在另一个触发更新的控制器中，在适当的位置触发通知：

```
-(IBAction)purchase:(id)sender
{
    // ...

    NSDictionary* userInfo = @{@"imageFileKey" : newImageName};
    [[NSNotificationCenter defaultCenter]
                postNotificationName:@"UpdateImageNotification"
                              object:self userInfo:userInfo];
    // ...
} 
```

通知上下文中的`object`参数用于指定是否要通过*任何*对象或仅通过非常特定的实例来收听通知。在许多情况下，实际实例并不相关，但您只需通过名称来识别通知（如本例中的“UpdateImageNotification”）。

该`userInfo`词典旨在携带您需要随通知提供的任何信息。这就是为什么我介绍了一个与新图像名称相关联的键“imageFileKey”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:06:01.930

我认为你犯了一个小错误。但在继续之前，我只想确认以下是否是场景。如果我错了，请纠正我 1\. 您有 mainViewController/HomeViewController（EraViewController 类型），您想在其中更新图像 2\. 在 mainViewController 上，您有一个弹出屏幕，其中编写了上述代码。该代码旨在更改 mainViewController/HomeViewController 上的按钮图像

如果以上是这种情况，那么我建议以下解决方案。

**你犯的错误**

您正在上面发布的代码中创建 EraViewController 的新对象并更改图像。根据 OOPS 概念，将创建该控制器的新实例（在屏幕上不可见的第二个实例），并且您正在该实例中应用新图像。现在，由于该实例根本不可见，您会感觉到屏幕没有更新。

**解决方案**

这个问题至少有 3 个解决方案 1\. 一个解决方案是 Daniel Schneller 给出的答案（可能稍作修改） 2\. 通过代表来实现这一点。- 您必须在 PopViewController 中编写协议，并且必须在 HomeViewController/mainViewController 中实现它。- 随着图像的变化，在 PopViewController 中，必须使用委托和协议方法通知 mainViewController。- 这样 mainViewController 将收到通知并执行协议方法。在该方法中，您应该有一个代码来更新按钮上的图像。3.（不建议这样做，因为这不是一个好的设计）您已经维护了在屏幕上可见的实际 viewController 的实例（在变量中，比如说 homeViewController）。

```
- (IBAction)purchase:(id)sender {
    UIImage *image = [UIImage imageNamed:@"ico_plan.png"];
    [(EraViewController*)homeViewController setFeature2Btn:[feature2Btn setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
 } 
```

希望这有帮助。

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T11:40:08.877

尝试这个，

```
 - (IBAction)purchase:(id)sender 
 {
       [[NSNotificationCenter defaultCenter] postNotificationName:@"updateimage"        object:imageName];
  } 
```

在主视图控制器中

```
-(void)viewDidLoad

{
 [[NSNotificationCenter defaultCenter] removeObserver:self];
 [[NSNotificationCenter defaultCenter] addObserver:self    selector:@selector(updateiimage:) name:@"updateimage" object:nil];

 }

- (void) updateiimage:(NSNotification *)notification
{
  NSString * text =[notification object];
   //update Image
 } 
```

# jquery - html5shiv 与 jquery 灯箱冲突？

> ID：15613839
> 
> 赞同：1
> 
> 时间：2013-03-25T11:31:19.460
> 
> 标签：jquery, html, lightbox, html5shiv

我希望在我失去理智之前有人可以帮助我.....我有一个 html5 网站并包含 html5shiv，但是 - 在 IE8 中 - 当我这样做时，它与灯箱冲突并且图像不显示。谢谢。

这是我的

```
<!DOCTYPE html>
<head>
<!-- META DATA -->
<meta charset="utf-8" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<meta name="keywords" content="....." />
<meta name="description" content="....." />

<link href='http://fonts.googleapis.com/css?family=Neucha' rel='stylesheet' type='text/css'/>
<link rel="stylesheet" type="text/css" href="styles/main.css"/>
<link href="styles/lightbox.css" rel="stylesheet" />

<!--[if lt IE 9]>
<script src="dist/html5shiv.js">

</script>
<![endif]-->

<script src="scripts/jquery-1.7.2.min.js"></script>
<script src="scripts/lightbox.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>

<script src="scripts/backarrow.js"></script>
<script src="scripts/smoothscroll.js"></script>

<title>.......</title>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:09:24.217

我认为问题不在于 html5shiv - 问题在于您包含两个单独的 jQuery 副本.... v 1.7.1，然后再往下两行包含 v1.4.3。

这两个 jQuery 版本*肯定会*相互冲突，并且几乎肯定会破坏您的网站，但它很容易在不同浏览器之间工作，并且您看到的确切效果将取决于首先加载哪个版本。

如果 html5shiv 有效果，那是因为它被包含在两个 jquery 版本之前。这将在加载时将浏览器和您的服务器捆绑一会儿，这可能会导致它影响 jquery 的两个副本加载的顺序。（这很可能是因为两个 jQuery 副本来自不同的来源）

解决方案：完全删除 jQuery 1.4.3 行，并坚持使用较新版本的 jQuery。（当您使用它时，这可能是您将其他 jQuery 包括升级到 1.8 或 1.9 的机会）

# django - 从一个视图使用两个模板

> ID：15613843
> 
> 赞同：3
> 
> 时间：2013-03-25T11:31:26.307
> 
> 标签：django, django-views

我试图以两种方式从视图中呈现内容：html 和 csv 下载。我能够做到这一点的唯一方法是使用 2 个不同的视图，一个用于 html 演示，一个用于 csv。这重复了我的代码，我正在寻找一个更优雅的解决方案。有什么建议么？

这是示例代码：

```
# views.py

[...]

def member_list(request):
    member_list = Member.objects.all()

    return render_to_response("member_list.html",
                          {'member_list':member_list)

def member_csv_list(request):
    member_list = Member.objects.all()

    csv_list = HttpResponse(content_type='text/csv')
    csv_list['Content-Disposition'] = 'attachment; filename="member_list.csv"'
    writer = csv.writer(csv_list)
    writer.writerow(['Name', 'Member Type', 'Rooms'])
    for member in member_list:
        fields = [member.name, member.member_type, member.room]
        writer.writerow(fields)

    return member_list 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:37:50.083

您可以在 url 中使用参数并实现类似的视图

```
def myview(request) :

    type = request.GET.get('type', 'html')

    # do processing
    if type == 'html':
        # return html
    else if type == 'csv':
        # return csv 
```

如果您访问这样的 url `http://yourserver/myview?type=csv`，它将呈现视图的 csv 部分。访问url 时`http://yourserver/myview`，它将返回视图的 html 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T08:15:05.817

罗汉的回答绝对是正确的范式。有关此主题的出色教程式介绍，请参阅。[Django 中的多个模板](http://www.packtpub.com/article/multiple-templates-in-django)。

这里有一些引述（所有功劳归于 Scott Newman）。

> 例如，要提供文章的可打印版本，我们可以将 ?printable 添加到 URL 的末尾。
> 
> 为了让它工作，我们将在我们的视图中添加一个额外的步骤来检查这个变量的 URL。如果存在，我们将加载一个打印机友好的模板文件。如果它不存在，我们将加载正常的模板文件。

```
def detail(request, pid):
    '''
    Accepts a press release ID and returns the detail page
    '''
    p = get_object_or_404(PressRelease, id=pid)

    if request.GET.has_key('printable'):
        template_file = 'press/detail_printable.html'
    else:
        template_file = 'press/detail.html'

    t = loader.get_template(template_file)
    c = Context({'press': p})
    return HttpResponse(t.render(c)) 
```

他继续*按域名进行**模板覆盖*和不同模板。这一切都很棒。

# java - JTable 鼠标侦听器无法正常工作

> ID：15613846
> 
> 赞同：4
> 
> 时间：2013-03-25T11:31:40.417
> 
> 标签：java, swing, concurrency, jtable, mouselistener

我的 JTable (jtblLot) 鼠标单击事件有时不会触发。主要是频繁点击

下面是鼠标点击事件的代码

```
 private void jtblLot_MouseClicked(java.awt.event.MouseEvent evt) {       

    int row = jtblLot.rowAtPoint(evt.getPoint()), currId = 0;
    int col = 3;

    lotId = jtblLot.getValueAt(row, col).toString();
    if (jtblLot.getValueAt(row, 1) != null) {
    sizeGrp_up = jtblLot.getValueAt(row, 1).toString();
    } else {
    sizeGrp_up = "0";
    }

    if (jtblLot.getValueAt(row, 4) != null) {
    if (jtblLot.getValueAt(row, 4).toString().compareTo("") !=0)
    {
    currId = Integer.parseInt(jtblLot.getValueAt(row, 4).toString()) - 1;
    }
    } else {
    sizeGrp_up = "0";
    }

    cmbCurrency.setSelectedIndex(currId);
    jlblLotId.setText(lotId);

    // Sets Model For Another JTable(jtblLGP) In My Form Get Data From DB
    getLotGradePriceData();

    //On Click I get The Focus To The Clicked Cell
    int col_ = jtblLot.columnAtPoint(evt.getPoint());
    jtblLot.setCellSelectionEnabled(true);
    jtblLot.changeSelection(row, col_, false, false);
    jtblLot.scrollRectToVisible(new Rectangle(jtblLot.getCellRect(row, col_, true)));

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:35:32.873

如果您需要处理每次点击，我建议您处理`mouseReleased`而不是`mouseClicked`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:48:55.080

```
// Sets Model For Another JTable(jtblLGP) In My Form Get Data From DB
getLotGradePriceData(); 
```

*   [以这种方式更新 Swing GUI 不是一个好主意](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，你会阻塞 EDT，直到 JDBC 事件结束，

*   使用`Runnable#Thread`（所有输出到 Swing GUI，必须将其 XxxModel 包装到`invokeLater`）或`SwingWorker`作为此作业的工人线程，

*   使用[ListSelectioListener](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)作为最简单的方法

*   也许还有一些其他问题，为了更好地帮助尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，使用局部变量而不是 JDBC 事件

# c# - 如何使用 IAMVideoProcAmp 设置相机的亮度？

> ID：15613847
> 
> 赞同：0
> 
> 时间：2013-03-25T11:31:40.640
> 
> 标签：c#, webcam, directshow.net

我正在尝试使用 IAMVideoProcAmp (directshow.net C#) 为微软相机 (lifecam studio) 设置亮度。我从[这里](http://www.dailycode.info/Blog/post/2009/02/05/DirectShow-how-to-adjust-properties-of-a-Webcam.aspx)参考解决方案。此解决方案使用 IAMVideoProcAmp 设置相机的亮度。在我通过调用连接到设备后

`DsDevice.GetDevicesOfCat(FilterCategory.VideoInputDevice);`

我设置相机的亮度。但是当我调用 IAMVideoProcAmp 的 Set() 函数时，它似乎不起作用

```
int Set(
          VideoProcAmpProperty Property, // VideoProcAmpProperty
          int lValue,          // Value to set
          VideoProcAmpFlags Flags  // VideoProcAmp_Flags_* 
       ); 
```

我尝试为此功能设置各种有效值，但对相机没有影响。我可以通过函数获取相机亮度属性的最大/最小/默认值：

```
int GetRange(
            VideoProcAmpProperty Property,         // Which property to query
            out int pMin,          // Range minimum
            out int pMax,          // Range maxumum
            out int pSteppingDelta,// Step size
            out int pDefault,      // Default value
            out VideoProcAmpFlags pCapsFlags     // VideoProcAmpFlags
            ); 
```

它给了我 max = 255，min = 30，default = 133，pCapsFlags = manual。

我还使用了微软的lifecam软件来调整亮度，它立即对相机产生影响。但是亮度的最大值/最小值是最大值 = 2.5，最小值 = -2.5 请告诉我设置相机亮度的方法以及为什么我得到的最大值/最小值与属性页上的值不同？

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:32:50.723

最后我发现这`IAMVideoProcAmp::Set`是行不通的，因为 Microsoft lifecam 软件。该软件随相机驱动程序的安装一起安装。这个软件的 TrueColor 功能是这个问题的关键，当我从这个软件打开 TrueColor 时，我就不能再用`IAMVideoProcAmp::Set`我的应用程序来调整亮度了。只需卸载 Microsoft lifecam，它就可以按我的意愿工作。希望这些信息能帮助有人遇到同样的问题。

# javascript - 很长的字符串属性会使 Firebase 停滞

> ID：15613851
> 
> 赞同：0
> 
> 时间：2013-03-25T11:31:50.713
> 
> 标签：javascript, firebase

我已经以 base64 格式（字符串长度约为 100k~150k 字符）存储在 Firebase 图像中，并且它运行了好几天。昨天和今天停止工作，即使存储的数据相同。我在使用 Firebase 数据视图时也遇到了问题（它在 90% 的情况下都会停止刷新）。有人有同样的问题吗？

# php - 从字符串中获取电子邮件 ID

> ID：15613853
> 
> 赞同：0
> 
> 时间：2013-03-25T11:31:59.237
> 
> 标签：php

我的数组包含格式如下的字符串：

```
a@hotmail.com Entry ID: 12321
b@hotmail.com Entry ID: 12322 Entry ID: 12323
c@hotmail.com Entry ID: 12324 Entry ID: 12325 Entry ID: 12326
d@hotmail.com Entry ID: 12327 Entry ID: 12328
e@hotmail.com Entry ID: 12329 Entry ID: 123210 
```

我只想从每个字符串中获取电子邮件地址并推送到一个数组中。

我试过[http://www.webdeveloper.com/forum/showthread.php?200875-extract-email-from-string-text-%28patterns%29](http://www.webdeveloper.com/forum/showthread.php?200875-extract-email-from-string-text-%28patterns%29)

**以及来自 Stackoverflow 的许多其他人，但浏览器在echo/print_r**上显示空白屏幕

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:35:40.767

您可以[`explode()`](http://php.net/manual/en/function.explode.php)将字符串由空格和[`array_shit()`](http://php.net/manual/en/function.array-shift.php)第一个元素组成。就像是：

```
$emailAddresses = array();
foreach($strings as $string) {
   $emailAddresses[] = array_shift(explode(' ', $string));
} 
```

除非绝对必要，否则避免使用 RegEx。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:36:59.427

如果字符串总是以电子邮件地址开头。你可以这样工作：

```
foreach($emailArray as $value){ 
  $email = explode(" ",$value)[0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:36:27.757

> 我在这里做一个假设，对于每一行，电子邮件和其他数据之间的分隔符是一致的——一个空格。

只需使用[explode()](http://php.net/manual/en/function.explode.php)函数将每个元素拆分为一个空格，并获取结果拆分的第一个元素。那将是电子邮件。

```
foreach($arr as $key => $value){
  $parts = explode(" ",$value);
  $email = $parts[0];
} 
```

### [这是一个现场演示](http://sandbox.onlinephpfunctions.com/code/bcbe073bd9275dd6cc2b77617ca7cea4dae40659)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:35:07.447

你需要使用`regex`.

```
preg_match_all("/[\._a-zA-Z0-9-]+@[\._a-zA-Z0-9-]+/i", $string, $matches);
print_r($matches[0]); 
```

**输出**

```
Array
(
    [0] => a@hotmail.com
    [1] => b@hotmail.com
    [2] => c@hotmail.com
    [3] => d@hotmail.com
    [4] => e@hotmail.com
) 
```**

# iphone - 保留从 4 开始的计数

> ID：15613858
> 
> 赞同：0
> 
> 时间：2013-03-25T11:32:25.450
> 
> 标签：iphone, objective-c, ios5, ios6, memory-leaks

在以下代码中

```
 NSURL *file = [[NSURL alloc] initFileURLWithPath: [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:soundName]];
     //        NSData *data = [NSData dataWithContentsOfURL:file];
     myExampleSound1 =[[AVAudioPlayer alloc] initWithContentsOfURL:file error:nil];
     myExampleSound1.volume=0.9;
     [myExampleSound1 prepareToPlay];
     myExampleSound1.delegate = self;
     [myExampleSound1 play];
     [soundsArray addObject:myExampleSound1];

     NSLog(@"RETAIN COUNT BEFORE RELEASE file = %d, myExampleSound1=%d, soundsArray=%d", [file retainCount],[myExampleSound1 retainCount], [soundsArray retainCount]);
     [file release];
     NSLog(@"RETAIN COUNT AFTER RELEASE file = %d, myExampleSound1=%d, soundsArray=%d", [file retainCount],[myExampleSound1 retainCount], [soundsArray retainCount]); 
```

我正在打印文件的保留计数在发布前为 4，在发布后为 3。提前致谢

# android - 定义作物的大小

> ID：15613860
> 
> 赞同：0
> 
> 时间：2013-03-25T11:32:27.093
> 
> 标签：android, crop

我想裁剪图像。但是我遇到了一个问题：

如何定义裁剪的默认大小。我想在出现裁剪的矩形时定义它的大小和位置。

问候

瓦佐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:38:02.143

使用 Intent add Aspect Ratio 添加 outputX 和 outputY 参数

```
 Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");
    intent.setData(mImageCaptureUri);

    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 250);
    intent.putExtra("scale", true);
    intent.putExtra("return-data", true);
    startActivityForResult(i, CROP_FROM_CAMERA); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:35:45.267

使用下面的代码

您也可以使用此链接作为参考

单击[使用矩形裁剪图像](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/)！

```
 int targetWidth = 100;
      int targetHeight = 100;
      Bitmap targetBitmap = Bitmap.createBitmap(
   targetWidth, targetHeight,Bitmap.Config.ARGB_8888);
  Canvas canvas = new Canvas(targetBitmap);
 Path path = new Path();
    path.addRect(rectf, Path.Direction.CW);
     canvas.clipPath(path);
     canvas.drawBitmap( sourceBitmap,
       new Rect(0, 0, sourceBitmap.getWidth(), sourceBitmap.getHeight()),
     new Rect(0, 0, targetWidth, targetHeight), null);
    ImageView imageView = (ImageView)findViewById(R.id.my_image_view);
   imageView.setImageBitmap(targetBitmap); 
```

# html - Bootstrap 渲染不一致

> ID：15613861
> 
> 赞同：1
> 
> 时间：2013-03-25T11:32:35.653
> 
> 标签：html, css, google-chrome, firefox, twitter-bootstrap

使用 Bootstrap 时，Chrome（正确）和 Firefox（错误）之间的渲染不一致。[这是我的代码（在这里](http://jsfiddle.net/zzxRC/)小提琴）：

```
<div class='container'>
    <form class='form-horizontal well span6 offset3'>
        <label class='control-label'>Testy</label>
        <div class='controls'>
            <select></select>
        </div>
    </form>
    <legend>Hello!</legend>
</div> 
```

不一致的原因是什么？如何修复 Firefox 渲染以使其与 Chrome 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:57:02.373

这似乎是 Firefox 和 Chrome 呈现`fieldset`标签的方式，至少对于您引用的 Bootstrap 的非响应版本。为了消除变量，我删除了对 Bootstrap 的引用并链接到[bootstrapcdn.com 的版本](http://bootstrapcdn.com)，这似乎解决了问题。

如果不出意外，您总是可以在`fieldset`标签中添加一些 CSS，以确保它在所有现代浏览器中呈现相同。

~~字段集 { 清除：两者；}~~

**更新：**看起来我没有注意，我已经更新了这个答案以反映`legend`标签上的 CSS，而不是`fieldset`. [JSFiddle 这里](http://jsfiddle.net/NGewr/)。

`legend { clear: both; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:35:24.417

图例标签应放置在表单标签内，并且还应在其周围放置一个字段集标签。

请参阅 Bootstrap 中的此示例：

```
<form>
<fieldset>
<legend>Legend</legend>
<label>Label name</label>
<input type="text" placeholder="Type something…">
<span class="help-block">Example block-level help text here.</span>
<label class="checkbox">
<input type="checkbox"> Check me out
</label>
<button type="submit" class="btn">Submit</button>
</fieldset>
</form> 
```

对于您的代码，它将是：

```
<div class='container'>
 <form class='form-horizontal well span6 offset3'>
  <fieldset>
   <label class='control-label'>Testy</label>
   <div class='controls'>
    <select></select>
   </div>
   <legend>Hello!</legend>
  </fieldset>
 </form>
</div> 
```

# c# - 将空元素添加到列表

> ID：15613863
> 
> 赞同：4
> 
> 时间：2013-03-25T11:32:40.487
> 
> 标签：c#, linq, entity-framework

我有清单：

```
var Filials = Db.FILIALS.AsEnumerable().Where(x => x.PREFIX > 0).Select(x => new { Name = string.Format("{0} {1}", x.PREFIX, x.NAME), FilialId = (Guid?)x.FILIALID }).OrderBy(x => x.Name).ToList(); 
```

我需要在这个列表中添加空元素。我尝试这个变体：

```
var lst = new[] { new { Name = string.Empty, FilialId = (Guid?)null } }.ToList();
var Filials = Db.FILIALS.AsEnumerable().Where(x => x.PREFIX > 0).Select(x => new { Name = string.Format("{0} {1}", x.PREFIX, x.NAME), FilialId = (Guid?)x.FILIALID }).OrderBy(x => x.Name).ToList();
lst = lst.Union(Filials); 
```

但得到错误：

> 无法将 System.Collection.Generic.IEnumerable 类型隐式转换为 System.Collection.Generic.List

在最后一行。

将元素添加到列表的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:34:29.383

您需要在声明的行中`ToList()`替换为.`AsEnumerable()``lst`

问题是它`lst`是 type`List<anonymous type>`但`Union`返回`IEnumerable<anonymous type>`。`IEnumerable<T>`不能将 分配给 类型的变量`List<T>`。

使用生成类型`AsEnumerable()`的`lst`变量`IEnumerable<anonymous type>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T11:34:57.367

更改最后一行以**使用 AddRange 方法**：

```
var lst = new[] { new { Name = string.Empty, FilialId = (Guid?)null } }.ToList();
var Filials = Db.FILIALS.AsEnumerable().Where(x => x.PREFIX > 0).Select(x => new { Name = string.Format("{0} {1}", x.PREFIX, x.NAME), FilialId = (Guid?)x.FILIALID }).OrderBy(x => x.Name).ToList();
lst.AddRange(Filials); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T11:38:44.400

试试[AddRange()](http://msdn.microsoft.com/en-gb/library/z883w3dc.aspx)方法，它`IEnumerable<T>`不是你的类型，而是`FirstList<T>.Union(SecondList<T>)`.

```
lst.AddRange(yourIEnumerable); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:34:27.580

怎么样：

```
Filials.Add(new { Name = string.Empty, FilialId = (Guid?)null }) 
```

# marionette - 模块之间的共享集合

> ID：15613868
> 
> 赞同：5
> 
> 时间：2013-03-25T11:32:57.137
> 
> 标签：marionette

# 问题。

我有一组需要共享相同集合的模块。

集合需要在模块启动之前准备好。

我不确定如何以最干净的方式解决这个问题，我意识到这可能因项目而异，但这里有一些想法。

## 在启动之前加载集合。

这是我想到的第一件事，只需在我调用“App.start()”之前加载集合。

然后我可以让它在全局范围内访问（不确定我喜欢这个。）。

## 延迟子模块启动直到加载。

如果我构建应用程序使其具有主模块，则负责启动所有子模块。

然后我可以在启动任何子模块之前预加载所有重要数据，并确保它已准备好。

然后也许可以通过主模块 API 访问它。

我不知道这是不是糟糕的设计，我对木偶的经验有限。

## 我现在怎么样了。

Atm 我选择在“App.start()”之前加载集合，这很有意义，我也在预加载我的模板。

我引入了一个名为“CollectionManager”的“静态”对象，它充当我的收藏的代理/访问点。并将在全球范围内可用。

### 应用设置：

```
// Templates that should be ready on start up
var arrTemplatesPaths = [...]; 

// Collections that i need to be ready and shared between modules.     
var arrSharedCollections = [
  {id:"groups", collection: GroupCollection}
];

// Preloading the vital data.
$.when.apply(null, [
  Templates.fetch(arrTemplatesPaths),  
  CollectionManager.fetch(arrSharedCollections)
])
.then(function(){
    App.start();
}) 
```

### 使用权：

然后需要访问集合的模块可以调用 CollectionManager.get(id)

```
var collection = CollectionManager.get("groups"); //@return Backbone.Collection 
```

这提供了一些结构，但我不确定我是否喜欢它。

## 更新

因此，在 Marionette 文档中挖掘了一下之后，我注意到了[Marionette.RequestResponse](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.requestresponse.md)。

这提供了一种从模块内请求数据的干净方式，在我的方法上创建了一个抽象级别，以一种令人讨厌的方式耦合事物。

所以我在应用程序中添加了这一行：

```
App.reqres.addHandler("getCollection", function (id) {
    return CollectionManager.get(id);
}) 
```

然后从模块中我以这种方式访问​​集合：

```
var collection = App.request("getCollection", "groups") 
```

我更喜欢这种方式，而不是直接从模块中访问 CollectionManager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T13:45:24.973

关于在显示视图之前或之后加载集合/模型的主题，我发现最好的方法是在 Marionette 控制器中获取模型/集合，然后显示视图，在获取模型/集合后传递它。看起来像这样：

控制器（或路由器）

```
showUser: function(id) {
   var userModel = new UserModel({id: id});
   userModel.fetch().then(function() {
      mainRegion.show(new UserView({model: userModel}));
   });
} 
```

# java - java中的聚合

> ID：15613871
> 
> 赞同：0
> 
> 时间：2013-03-25T11:33:08.783
> 
> 标签：java, aggregate-functions

我有以下代码

文件 a.java

```
class ABC {
    public void printing(DEF def, GHI ghi)
    {
        def.test();
        ghi.test2();
    }
}

class DEF {
    public void test()
    {
        System.out.println("as");
    }
}

class GHI {
    public void test2()
    {
        System.out.println("dsfg");
    }
} 
```

然后我有另一个文件，我们称它为文件 b.java，如何从文件 b.java 上的类 DEF 和 GHI 创建对象？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:38:25.517

尝试以下

```
a a1 = new a();
DEF = a1.new DEF();
GHI = a1.new GHI(); 
```

或者

```
DEF def  = new a().new DEF();
GHI ghi = new a().new GHI(); 
```

如果它是相同的，这将正常工作`package`，如果不是你应该`import`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:40:43.360

使用导入语句。

如果两个文件都在同一个包中，则无需导入任何内容。如果两者都在不同的包中，请对包使用 import 语句。例子：

如果 a.java 在*com.demo*包中，则在`import com.demo.*;`b.java中使用

顺便说一句，如果您使用的是 Netbeans 或 eclipse，则无需执行任何操作，IDE 会自动将这些类导入到您的 b.java 中。

然后你可以为你想要的类创建对象。

**编辑**

**更新 2**

例子：

```
DEF def= new DEF();
GHI ghi= new GHI(); 
```

现在您可以使用这两个类的方法。

```
def.test();
ghi.test(); 
```

# ios - iOS 中多部分表单数据请求的库

> ID：15613873
> 
> 赞同：0
> 
> 时间：2013-03-25T11:33:11.653
> 
> 标签：ios, post, file-upload, multipartform-data

我正在尝试将图像上传到具有多部分表单数据的服务器。我正在尝试使用 NSURLConnection 和 NSMutableURLRequest。但我无法让它工作。然后我遇到了 ASIHTTPRequest 及其对多部分表单请求的支持。但我知道它不再被维护。有谁知道我可以使用的类似库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:34:54.247

您可以开始使用 AFNetworking。这是一个很棒的图书馆：

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

# java - 默认分辨率低于我设备的实际分辨率

> ID：15613874
> 
> 赞同：0
> 
> 时间：2013-03-25T11:33:15.053
> 
> 标签：java, android

我用过

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
cube.height=metrics.heightPixels;
cube.width=metrics.widthPixels; 
```

获得我的显示器的高度和宽度，但我的索尼 xperia p 设备是 qhd 显示器的分辨率很低。从这个函数我只能得到 height=569 px 和 width=320 px 我不明白为什么这显示得更低。我认为这给了我虚拟分辨率而不是真实分辨率。我使用简单的视图和 ondraw 方法来绘制画布。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:54:26.763

也许你应该尝试这样的事情：

```
Display display = getWindowManager().getDefaultDisplay();     
Method mGetRawH = Display.class.getMethod("getRawHeight");
Method mGetRawW = Display.class.getMethod("getRawWidth");
int rawWidth = (Integer) mGetRawW.invoke(display);
int rawHeight = (Integer) mGetRawH.invoke(display); 
```

[正如这个问题](https://stackoverflow.com/questions/10991194/android-displaymetrics-returns-incorrect-screen-size-in-pixels-on-ics)的网站所引用的那样。

# java - 删除字符串末尾的逗号

> ID：15613885
> 
> 赞同：-3
> 
> 时间：2013-03-25T11:34:04.440
> 
> 标签：java

我正在尝试将 HashSet 转换为逗号分隔的分隔字符串但问题是，我在字符串末尾也得到了一个额外的逗号，如图所示。请告诉我如何删除 String 末尾的多余逗号。

```
import java.util.HashSet;
import java.util.Set;

public class Test {

    private static Set<String> symbolsSet = new HashSet<String>();

    static {

        symbolsSet.add("Q1!GO1");
        symbolsSet.add("Q2!GO2");
        symbolsSet.add("Q3!GO3");

    }

    public static void main(String args[]) {
        String[] a = symbolsSet.toArray(new String[0]);
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < a.length; i++) {
            sb.append(a[i] + ",");
        }
        System.out.println(sb.toString());

    }

} 
```

输出 ：

```
Q3!GOO3,Q2!GO2,Q1!GO1, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:36:14.420

尝试：

```
for (int i = 0; i < a.length; i++) {
    if ( i > 0 ) {
        sb.append(",");
    }
    sb.append(a[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T11:36:21.940

这样做

```
for (int i = 0; i < a.length - 1; i++) {
    sb.append(a[i] + ",");
}

sb.append(a[a.length - 1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T11:42:29.680

```
StringBuffer sb = new StringBuffer();
String separator = "";
for (int i = 0; i < a.length; i++) {
    sb.append(separator).append(a[i]);
    separator = ",";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T11:35:57.290

有很多方法可以做到这一点，下面是一个使用正则表达式的解决方案`String#replaceAll()`

```
String s= "abc,";
s = s.replaceAll(",$", ""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T11:39:00.887

在您给定的场景中`String.lastIndexOf`，方法非常有用。

```
String withComma= sb.toString();
String strWithoutLastComma = withComma.substring(0,withComma.lastIndexOf(","));
System.out.println(strWithoutLastComma); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T11:37:31.293

```
public static void main(String args[]) {
    String[] a = symbolsSet.toArray(new String[0]);
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < a.length-1; i++) {
        //append until the last with comma
        sb.append(a[i] + ",");
    }
    //append the last without comma
    sb.append(a[a.length-1]);
    System.out.println(sb.toString());

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T11:38:08.473

尝试这个 ：

```
 for (int i = 0; i < a.length; i++) {
        if(i == a.length - 1) {
             sb.append(a[i]);  // Last element. Dont append comma to it
        } else {
        sb.append(a[i] + ","); // Append comma to it. Not a last element
        }
    }
    System.out.println(sb.toString()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-25T11:52:29.770

您可以发展自己的`Separator`课程：

```
public class SimpleSeparator<T> {
  private final String sepString;
  boolean first = true;

  public SimpleSeparator(final String sep) {
    this.sepString = sep;
  }

  public String sep() {
    // Return empty string first and then the separator on every subsequent invocation.
    if (first) {
      first = false;
      return "";
    }
    return sepString;
  }

  public static void main(String[] args) {
    SimpleSeparator sep = new SimpleSeparator(",");
    System.out.print("[");
    for ( int i = 0; i < 10; i++ ) {
      System.out.print(sep.sep()+i);
    }
    System.out.print("]");
  }

} 
```

使用分离数组、集合、迭代器、可迭代对象等的静态方法，你可以对这个类做更多的事情。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-25T11:39:01.523

```
public static void main(String args[])
{
    String[] a = symbolsSet.toArray(new String[0]);

    StringBuffer sb = new StringBuffer();

    for (int i = 0; i < a.length; i++)
    {
        sb.append(a[i] + ",");
    }

    System.out.println(sb.toString().substring(0, sb.toString().length - 1));

} 
```

或者

```
public static void main(String args[])
{
    String[] a = symbolsSet.toArray(new String[0]);

    StringBuffer sb = new StringBuffer();

    for (int i = 0; i < a.length; i++)
    {
        sb.append(a[i]);

        if(a != a.length - 1)
        {
            sb.append(",");
        }
    }

    System.out.println(sb.toString());
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-25T11:35:54.400

```
 String str = sb.toString().substring(0, sb.toString().length()-1); 
```

或仅在不是最后一个元素时附加

```
 for (int i = 0; i < a.length; i++) {
    if ( i > 0 ) {
        sb.append(",");
    }
    sb.append(a[i]);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-25T11:44:31.317

尝试这个，

```
for (int i = 0; i < a.length-1; i++) {
      if(a.length-1!=i)
            sb.append(a[i] + ",");
      else
      {
            sb.append(a[i]);
            break;
      }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-25T11:47:00.777

试试这个

```
for (int i = 0; i < a.length; i++) {
    if(i == a.length - 1 )
    {
        sb.append(a[i]);
    } else {
        sb.append(a[i] + ",");
    }
} 
```

# javascript - javascript浏览器关闭

> ID：15613891
> 
> 赞同：0
> 
> 时间：2013-03-25T11:34:20.020
> 
> 标签：javascript

我有一个关于浏览器关闭检测的问题。我的 asp.net 应用程序当用户突然关闭浏览器时我需要调用一个注销服务，它将登录状态从真更新为假，我这样做如下

```
function Logout() {
            var Userid = $("#hdnfuid").val();
            var branch = $("#hdnfbranch").val();
            var service = LogoutService.Logout(Userid + "," + branch, SucceededCallback);
            //alert(service);
        }
        function SucceededCallback(result) {
        }

var isClose = false; ;
        //this code will handle the F5 or Ctrl+F5 key
        //need to handle more cases like ctrl+R whose codes are not listed here
        document.onkeydown = checkKeycode
        function checkKeycode(e) {
            var keycode;
            if (window.event)
                keycode = window.event.keyCode;
            else if (e)
                keycode = e.which;
            if (keycode == 116) {
                isClose = true;
            }
        }

function somefunction() {
            isClose = true;
        }
        function doUnload() {
            if (!isClose) {                
                var selection = confirm('window is closing');
                if (selection == true)
                {var x=confirm("closing browser");
                  if(x==true)Logout();
                  else
                    return false;}
                else {
                    return false;
                }                    
            } 
```

但问题是，在这种情况下，当我单击确认框的取消时，浏览器也会关闭。我还需要在 global.asax 的 session_end 事件上调用相同的服务，请建议我这样做的方式。}

但问题是

# sql - oracle中的流水线函数

> ID：15613893
> 
> 赞同：0
> 
> 时间：2013-03-25T11:34:22.800
> 
> 标签：sql, oracle11g

我在 Oracle 中创建了一个流水线函数。我需要使用这个函数来获取表格格式的列值；为此我写了这个查询：

```
 SELECT * 
   FROM TABLE (
               parse_comma_delimited(
                                      ( SELECT SOURCE_COLUMNS 
                                          FROM BW_SUPERMERGE_RULES 
                                         WHERE RULE_NAME = 'SQL2CUB' 
                                      ), ',')
                                    )
               ); 
```

但我收到以下错误：

> ORA-00933: SQL 命令未正确结束
> 00933\. 00000 - “SQL 命令未正确结束”

有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:39:50.683

我认为您的括号不正确匹配，我已经编辑了代码

```
SELECT * 
  FROM TABLE (parse_comma_delimited (SELECT SOURCE_COLUMNS 
                                     FROM BW_SUPERMERGE_RULES 
                                     WHERE RULE_NAME = 'SQL2CUB', ',')); 
```

基本上这类错误是针对语法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:03:00.177

我认为这会奏效；如果你的函数 parse_comma_delimited 是正确的。

```
    选择 *
              从表（
    parse_comma_delimited(
    （选择 SOURCE_COLUMNS  
        FROM BW_SUPERMERGE_RULES  
       WHERE RULE_NAME = 'SQL2CUB'
    ), ',')
   );

```

# c# - 如何读取字节和字符串的混合文件

> ID：15613898
> 
> 赞同：4
> 
> 时间：2013-03-25T11:34:36.680
> 
> 标签：c#, .net, binary, byte, streamreader

我有一个包含很多字符串行和部分字节编码数据的混合文件。例子：

```
--Begin Attach
Content-Info: /Format=TIF
Content-Description: 30085949.tif (TIF File)
Content-Transfer-Encoding: binary; Length=220096
II*II* Îh  ÿÿÿÿÿÿü³küìpsMg›Êq™Æ™Ôd™‡–h7ÃAøAú áùõ=6?Eã½/ô|û ƒú7z:>„Çÿý&lt;þ¯úýúßj?å¿þÇéöûþ“«ÿ¾ÁøKøÈ%ŠdOÿÞÈ<,Wþ‡ÿ·ƒïüúCÿß%Ï$sŸÿÃÿ÷‡þåiò>GÈù#ä|‘ò:#ä|Š":#¢:;ˆèŽˆèÊ¤V‘ÑÑÑÑÑÑÑÑÑçIþ×o(¿zHDDDDDFp'.Ñ:ˆR:aAràÁ¬LˆÈù!ÿÿï[ÿ¯Äàiƒ"VƒDÇ)Ê6PáÈê$9C”9C†‡CD¡pE@¦œÖ{i~Úý¯kköDœ4ÉU”8`ƒt!l2G
--End Attach-- 
```

我尝试使用流式阅读器读取文件：

```
string[] lines = System.IO.File.ReadAllLines(@"C:\Users\Davide\Desktop\20041230000D.xmm") 
```

我逐行读取文件，当行等于“Content-Transfer-Encoding: binary; Length=220096”时，我读取以下所有行并写入“文件名”（在本例中为 30085949.tif）文件。但我正在读取字符串，而不是字节数据并且结果文件已损坏（现在我尝试使用 tiff 文件）。对我有什么建议吗？

**解决方案** 感谢您的回复。我采用了这个解决方案：我构建了一个 LineReader 扩展 BinaryReader：

```
 public class LineReader : BinaryReader
    {
        public LineReader(Stream stream, Encoding encoding)
            : base(stream, encoding)
        {

        }

        public int currentPos;
        private StringBuilder stringBuffer;

        public string ReadLine()
        {
            currentPos = 0;

            char[] buf = new char[1];

            stringBuffer = new StringBuilder();
            bool lineEndFound = false;

            while (base.Read(buf, 0, 1) > 0)
            {
                currentPos++;
                if (buf[0] == Microsoft.VisualBasic.Strings.ChrW(10))
                {
                    lineEndFound = true;
                }
                else
                {                   
                    stringBuffer.Append(buf[0]);                    
                }
                if (lineEndFound)
                {
                    return stringBuffer.ToString();
                }

            }
            return stringBuffer.ToString();

        }

    } 
```

其中*Microsoft.VisualBasic.Strings.ChrW(10)*是换行符。当我解析我的文件时：

```
 using (LineReader b = new LineReader(File.OpenRead(path), Encoding.Default))
    {
        int pos = 0;
        int length = (int)b.BaseStream.Length;
        while (pos < length)
        {
            string line = b.ReadLine();
            pos += (b.currentPos);

            if (!beginNextPart)
            {
                if (line.StartsWith(BEGINATTACH))
                {
                    beginNextPart = true;

                }
            }
            else
            {
                if (line.StartsWith(ENDATTACH))
                {
                    beginNextPart = false;
                }
                else
                {
                    if (line.StartsWith("Content-Transfer-Encoding: binary; Length="))
                    {
                        attachLength = Convert.ToInt32(line.Replace("Content-Transfer-Encoding: binary; Length=", ""));
                        byte[] attachData = b.ReadBytes(attachLength);
                        pos += (attachLength);
                        ByteArrayToFile(@"C:\users\davide\desktop\files.tif", attachData);
                    }
                }
            }
        }
    } 
```

我从文件中读取了一个字节长度，然后读取了以下 n 个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:13:48.610

您的问题是 StreamReader 假定它是唯一读取文件的内容，因此它会提前读取。最好的办法是将文件读取为二进制文件并使用适当的文本编码从您自己的缓冲区中检索字符串数据。

由于显然您不介意将整个文件读入内存，因此您可以从以下内容开始：

```
byte[] buf = System.IO.File.ReadAllBytes(@"C:\Users\Davide\Desktop\20041230000D.xmm"); 
```

然后假设您对文本数据使用 UTF-8：

```
int offset = 0;
int binaryLength = 0;
while (binaryLength == 0 && offset < buf.Length) {
    var eolIdx = Array.IndexOf(offset, 13); // In a UTF-8 stream, byte 13 always represents newline
    string line = System.Text.Encoding.UTF8.GetString(buf, offset, eolIdx - offset - 1);

    // Process your line appropriately here, and set binaryLength if you expect binary data to follow

    offset = eolIdx + 1;
}

// You don't necessarily need to copy binary data out, but just to show where it is:
var binary = new byte[binaryLength];
Buffer.BlockCopy(buf, offset, binary, 0, binaryLength); 
```

`line.TrimEnd('\r')`如果您期望 Window 样式的行结尾，您可能还想做一个,。

# c# - 更改目录中所有文件的扩展名

> ID：15613900
> 
> 赞同：0
> 
> 时间：2013-03-25T11:34:46.133
> 
> 标签：c#, directory, filenames

我没有收到错误，但扩展名没有更改。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string filename;
            string[] filePaths = Directory.GetFiles(@"c:\Users\Desktop\test\");
            Console.WriteLine("Directory consists of " + filePaths.Length + " files.");
            foreach(string myfile in filePaths)
                filename = Path.ChangeExtension(myfile, ".txt");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T11:37:35.923

`Path.ChangeExtension`只返回一个带有新扩展名的字符串，它不会重命名文件本身。

您需要使用`System.IO.File.Move(oldName, newName)`重命名实际文件，如下所示：

```
foreach (string myfile in filePaths)
{
    filename = Path.ChangeExtension(myfile, ".txt");
    System.IO.File.Move(myfile, filename);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:37:23.527

Ì如果您想更改文件的扩展名，请调用`File.Move()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:36:22.380

这只会更改路径的扩展名，而不是文件的扩展名。

原因：由于 ChangeExtension 被称为`Path.ChangeExtension`. 对于文件，使用`System.IO. File`Class 及其方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T11:36:44.900

方法 ChangeExtension的[文档](http://msdn.microsoft.com/en-us/library/system.io.path.changeextension.aspx)说：

更改路径字符串的扩展名。

它并没有说它改变了文件的扩展名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T11:43:42.017

我认为这是大致等效（正确）的代码：

```
 DirectoryInfo di = new DirectoryInfo(@"c:\Users\Desktop\test\");
        foreach (FileInfo fi in di.GetFiles())
        {
            fi.MoveTo(fi.Name.Substring(0, fi.Name.Length - fi.Extension.Length - 1) + ".txt"); // "test.bat" 8 - 3 - 1 = 4 "test" + ".txt" = "test.txt"
        }
        Console.WriteLine("Directory consists of " + di.GetFiles().Length + " files.");
        Console.ReadLine(); 
```

# java - 尝试将视图映射到休眠实体时出错

> ID：15613902
> 
> 赞同：0
> 
> 时间：2013-03-25T11:34:52.287
> 
> 标签：java, hibernate

我创建了一个视图。

```
CREATE VIEW VW_LOSA_APP_PENDING AS
SELECT distinct app.APP_REF_NO, app.APP_STATUS, app.APP_DT, app.ATTEND_STAFF,
                app.ATTEND_BRANCH, app.PRODUCT_TYPE APP_PRODUCT_TYPE, 
                cust.CUST_ID, cust.APP_JOINT_T, cust.ID1_TYPE, cust.ID1, 
                cust.ID2_TYPE, cust.ID2, cust.FIRST_NAME, cust.LAST_NAME, 
                cust.FULL_NAME, cust.FULL_NAME_CAP, cust.DOB, fac.FACILITY_NO,
                fac.PRODUCT_TYPE FAC_PRODUCT_TYPE, fac.PRODUCT_CODE, 
                fac.MAIN_PROD_IND, fac.AMT_APPLIED
   FROM 
        LOSA_APP app 
   LEFT JOIN 
       LOSA_CUST cust 
   ON
       cust.APP_REF_NO = app.APP_REF_NO
   LEFT JOIN 
       LOSA_FACILITIES fac 
   ON
       fac.APP_REF_NO = app.APP_REF_NO
   LEFT JOIN 
       OS_CURRENTSTEP STEP 
   ON
       STEP.REF_ID = app.APP_REF_NO
   WHERE (app.APP_STATUS ='P' OR app.APP_STATUS ='T' OR 
         ((app.APP_STATUS='R' OR app.APP_STATUS='S') AND STEP.STEP_NAME='011')); 
```

现在我正在尝试将此视图映射到休眠文件。但我收到错误

![在此处输入图像描述](../Images/2973724004ccbf414eda0c58286ccb65.png)

在这里我如何定义我的映射

```
<hibernate-mapping default-lazy="false">
<class name="com.thetasp.losa.data.VwLosaAppPending" table="VW_LOSA_APP_PENDING" optimistic-lock="version">     

    <property name="appRefNo" type="java.lang.String" column="APP_REF_NO" not-null="true" length="20" />
    <property name="appStatus" type="java.lang.String" column="APP_STATUS" length="20" />
    <property name="appDt" type="java.sql.Timestamp" column="APP_DT" not-null="true" length="23" />
    <property name="attendStaff" type="int" column="ATTEND_STAFF" not-null="true" length="10" />
    <property name="attendBranch" type="int" column="ATTEND_BRANCH" not-null="true" length="10" />
    <property name="appProductType" type="java.lang.String" column="APP_PRODUCT_TYPE" length="10" />
    <property name="custId" type="java.lang.String" column="CUST_ID" length="20" />
    <property name="appJointT" type="java.lang.String" column="APP_JOINT_T" length="10" />
    <property name="id1Type" type="java.lang.String" column="ID1_TYPE" length="1" />
    <property name="id1" type="java.lang.String" column="ID1" length="20" />
    <property name="id2Type" type="java.lang.String" column="ID2_TYPE" length="1" />
    <property name="id2" type="java.lang.String" column="ID2" length="20" />
    <property name="firstName" type="java.lang.String" column="FIRST_NAME" length="100" />
    <property name="lastName" type="java.lang.String" column="LAST_NAME" length="100" />
    <property name="fullName" type="java.lang.String" column="FULL_NAME" length="250" />
    <property name="fullNameCap" type="java.lang.String" column="FULL_NAME_CAP" length="250" />
    <property name="dob" type="java.sql.Date" column="DOB" length="23" />
    <property name="facilityNo" type="java.lang.Long" column="FACILITY_NO" />
    <property name="facProductType" type="java.lang.String" column="FAC_PRODUCT_TYPE" length="10" />
    <property name="productCode" type="java.lang.String" column="PRODUCT_CODE" length="20" />
    <property name="mainProdInd" type="java.lang.String" column="MAIN_PROD_IND" length="1" />
    <property name="amtApplied" column="AMT_APPLIED" length="18">
        <type name="com.thetasp.common.hibernate.support.ParameterizedDoubleType" />
    </property>

</class> 
```

我在线上遇到错误

```
<class name="com.thetasp.losa.data.VwLosaAppPending" table="VW_LOSA_APP_PENDING" optimistic-lock="version"> 
```

为什么我收到此错误？我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:54:20.947

消息是：

```
The content of element type "class" must match "([...], (id, composite-id), [...]) 
```

您的类定义中没有任何 id 或 composite-id 元素。

# mustache - PHP 小胡子。隐式迭代器：如何获取当前值的键（数字 php 数组）

> ID：15613903
> 
> 赞同：7
> 
> 时间：2013-03-25T11:34:52.990
> 
> 标签：mustache, mustache.php

如果我有这样的 php 数组：

```
 $a = array (
    99 => 'Something1',
    184 => 'Something2',
 ); 
```

键提供重要信息 - 它可以是一些常量值、ID 等

那么如何从模板中获取当前元素的密钥。例如：

```
{{#data}}

{.} - it is current value, but I need key also.

{{/data}} 
```

在我们的系统中，这类数组太多了，以前重新解析它们很不舒服。有什么更好的解决方案？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T15:58:51.277

不可能在 Mustache 中迭代关联数组，因为 Mustache 将其视为“散列”而不是可迭代列表。即使您可以遍历列表，您也无法访问密钥。

为此，您必须准备数据。在将数据传递到 Mustache 之前，您可以使用 foreach 循环来执行此操作，或者您可以通过将数组包装在“Presenter”中来执行此操作。这样的事情应该可以解决问题：

```
<?php

class IteratorPresenter implements IteratorAggregate
{
    private $values;

    public function __construct($values)
    {
        if (!is_array($values) && !$values instanceof Traversable) {
            throw new InvalidArgumentException('IteratorPresenter requires an array or Traversable object');
        }

        $this->values = $values;
    }

    public function getIterator()
    {
        $values = array();
        foreach ($this->values as $key => $val) {
            $values[$key] = array(
                'key'   => $key,
                'value' => $val,
                'first' => false,
                'last'  => false,
            );
        }

        $keys = array_keys($values);

        if (!empty($keys)) {
            $values[reset($keys)]['first'] = true;
            $values[end($keys)]['last']    = true;
        }

        return new ArrayIterator($values);
    }
} 
```

然后只需将您的数组包装在 Presenter 中：

```
$view['data'] = new IteratorPresenter($view['data']); 
```

您现在可以在迭代数据时访问键和值：

```
{{# data }}
    {{ key }}: {{ value }}
{{/ data }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-26T00:17:49.497

我喜欢小胡子。在学习的过程中，我发现了这个问题，并认为它需要一个合适的答案。

```
$this->keyValueArray = Array(
    "key1" => "val1",
    "key2" => "val2",
    "key3" => "val3"
);

$tempArray = array();
foreach($this->keyValueArray as $key=>$val){
    $tempArray[] = Array("keyName" => $key, "valName" => $val);
}

$this->mustacheReadyData = ArrayIterator($tempArray); 
```

然后你可以像这样在你的模板中使用它：

```
{{#mustacheReadyData}}
    Key: {{keyName}} Value: {{valName}}
{{/mustacheReadyData}} 
```

通过在 foreach 循环中添加更多值，这可以比 Key/Val 进一步扩展。

# javascript - Javascript棋盘游戏：寻找优化

> ID：15613911
> 
> 赞同：1
> 
> 时间：2013-03-25T11:35:16.677
> 
> 标签：javascript, android, optimization

我正在为 android 开发一个 html/javascript 游戏。这是一个棋盘游戏，它执行以下操作。它有不同颜色的瓷砖，用户可以在板上放置一个瓷砖（以编程方式选择）。如果我们得到 4 个或更多相同颜色/形状的图块，我们会获得一些分数，这些图块将消失。移除的图块上方的图块将替换它们，新的图块将添加到空白处。下图显示了它是如何工作的（这只是一个例子，真正的电路板可以有不同的尺寸）：

![在此处输入图像描述](../Images/a0dc33f57f3b1f7025012b6bc7f2b812.png)

Tiles 是`<img>`其 id 存储在一个数组中的元素，我用它来检查匹配和替换。

这一切都很好，但是一旦将新瓷砖添加到棋盘上，我需要检查整个棋盘以检查新匹配是否可用。我在这里需要一些建议，因为检查整个董事会可能真的很慢。有没有办法可以有效地做到这一点？这是我想做的事情： ![在此处输入图像描述](../Images/3e8b430ed5f3e0ec66a36dad675f3013.png)

鉴于前面的示例，我考虑只检查红色区域中的元素，即只检查已移动或添加的元素。如果瓷砖垂直移动，它会很有效，因为我只需要检查移动/添加的瓷砖，它就会给我新的匹配。但是如果我水平移除瓷砖可能会出现问题，因为如果这些瓷砖在底部，我将不得不检查整个板并且我面临同样的问题。

任何意见或建议将不胜感激。

注意：我没有添加任何代码，因为它只是检查给定图块的行和列并查找匹配项。但如果需要我可以提供。

编辑：在任何人反对之前，我想通知我刚刚将此问题添加到游戏开发部分，因为我在这里没有收到任何答案:)。

编辑：添加我的代码

```
function initializeBoard(){
    //items is an array which contains tiles/images names
    for(var i=0; i < totalItems; i++)
        board[i+1] = Math.floor(Math.random() * (items.length - 1)) + 1;
    for(var i=0; i < totalItems; i++)
    {
        if( !(i % numberShapesXAxis) )
            document.write("<BR>");

        document.write("<img src=\"images/"+ items[board[i+1]]+ ".gif\" style = \"border:0; height:"+ itemSize+ "px; width:"+ itemSize+ "px;\"  name=\"t", i+1,"\" onclick = \"replaceAndCheck(", i+1, ")\"><\/a>");
   }
}
//so basically  board contains image ids. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:50:47.863

移动石头时检查是否有新匹配如何。因此，当石头 x 向下移动时，您检查 X 的新位置是否创建匹配。这样你就可以创建一种递归的方法。

# mongodb - 无法从 Meteor 访问 MongoDB

> ID：15613912
> 
> 赞同：1
> 
> 时间：2013-03-25T11:35:20.323
> 
> 标签：mongodb, meteor

我正在使用 MeteorJS，我发现每当我尝试访问 MongoDB 记录的属性时，我都会在控制台中得到以下转储
`Exception from Deps recompute: TypeError: Cannot call method 'firstNode' of undefined` `at Object.Spark.renderToRange (http://localhost:2000/packages/spark/spark.js? 14a6d0456c829f0ae6b6b21c3d85c12b51d07167:545:25)` `at null._func (http://localhost:2000/packages/spark/spark.js?14a6d0456c829f0ae6b6b21c3d85c12b51d07167:866:13)` `at _.extend._compute (http://localhost:2000/packages/deps/deps.js?00c1c175771f1d01cbad3013d682a68610670394:126:14)` `at _.extend._recompute (http://localhost:2000/packages/deps/deps.js?00c1c175771f1d01cbad3013d682a68610670394:139:16)` `at _.extend.flush (http://localhost:2000/packages/deps/deps.js?00c1c175771f1d01cbad3013d682a68610670394:222:16) logging.js:41`

这是代码粘贴[http://fpaste.org/7OC2/](http://fpaste.org/7OC2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:58:21.687

当流星完成订阅并从服务器获取数据时，在很短的时间内，集合是空的。

所以这个查询：

```
var result = QoD.findOne({week: Session.get('currentWeek')}); 
```

还不会有任何结果。如果没有任何结果，您只需要处理这种情况：

```
if(result) Session.set('allResponses', result.responses); 
```

# jsp - 安装 JSTL 导致 org.xml.sax.SAXParseException: Content is not allowed in prolog

> ID：15613918
> 
> 赞同：2
> 
> 时间：2013-03-25T11:35:33.183
> 
> 标签：jsp, jstl

在我的应用程序中，我使用的是 JSTL。但是当我在 Tomcat 中部署我的应用程序时，我遇到了错误。

```
SEVERE: Parse Fatal Error at line 1 column 1: Content is not allowed in prolog.
org.xml.sax.SAXParseException: Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1414)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1039)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:515)
    at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:328)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:243)
    at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:540)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Mar 25, 2013 3:36:55 PM org.apache.catalina.startup.TldConfig tldScanWebXml
WARNING: Failed to process TLD with path [http://java.sun.com/jstl/core] and URI [/WEB-INF/lib/jstl-1.2.jar]
java.io.IOException: org.xml.sax.SAXParseException: Content is not allowed in prolog.
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:518)
    at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:328)
    at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:243)
    at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:540)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:174)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:388)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1414)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1039)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:515)
    ... 14 more 
```

我的 web.xml 有以下条目：

```
<jsp-config>
    <taglib>
        <taglib-uri>http://java.sun.com/jstl/core</taglib-uri>
        <taglib-location>/WEB-INF/lib/jstl-1.2.jar</taglib-location>
    </taglib>
</jsp-config> 
```

在 jsp 中，我有以下页面/taglib 声明：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>` 
```

此异常是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:52:39.237

从 web.xml 中删除以下内容

```
<taglib>
    <taglib-uri>http://java.sun.com/jstl/core</taglib-uri>
    <taglib-location>/WEB-INF/lib/jstl-1.2.jar</taglib-location>
</taglib> 
```

自 Servlet 2.0 规范以来，您不再需要它。此外，**taglib-location**用于指定 *.tld 文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:43:50.450

此错误消息始终是由开始元素中的无效 XML 内容引起的。例如，超小点“.” 在 XML 元素的开头。

[看这里](http://www.mkyong.com/java/sax-error-content-is-not-allowed-in-prolog/)

# .net - Office.Interop 是否向后兼容？

> ID：15613926
> 
> 赞同：4
> 
> 时间：2013-03-25T11:35:51.150
> 
> 标签：.net, visual-studio-2010, c#-4.0, com-interop, excel-interop

引用**Office.Interop 14.0**是否允许我自动化 Office 2003、2007 和 2010？

我之所以问，是因为我无法为不同的 Interop 版本引用多个指令（而且我无法再下载旧 Office 的路径以检查其兼容性）。

（Office.Interop 12.0 在我的应用程序中对 Office 2010 失败。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:54:53.370

是的*但是*...

您必须小心不要使用您所针对的 office 版本不支持的 API 功能，否则您会收到一些非常奇怪的内存访问异常。

我正在使用 Interop 12 来定位 Outlook 2007 和 2010，没有太多问题。

# xml - intellij IDEA 插件：理解 LineMarkerProvider 和 ReferenceContributor 的问题

> ID：15613936
> 
> 赞同：2
> 
> 时间：2013-03-25T11:36:21.750
> 
> 标签：xml, plugins, navigation, intellij-idea

我正在开发一个 IDEA 插件，它应该提供不同 XML 文件之间以及 XML 和 Java 源之间的导航。它有点类似于 Spring 支持。

待支持的 XML 标签有一个 <name> 子标签（与 Spring 中的 id 属性相反），引用就像 spring: ref="..." 导航到 Java 源代码将是稍后的步骤。xml 文件还有一个命名约定以支持新插件：*-definitions.xml

目前，我陷入了第一步：LineMarkerProvider 和 ReferenceContributor。

我使用“自定义语言支持”示例作为起点。但是因为我没有自定义语言而是想扩展 xml 功能，所以我删除了词法分析器、解析器、文件工厂等......并且只包含了 LineMarkerProvider 和 ReferenceContributor。

所以我现在所拥有的是：

*   类 DefinitionsReference 扩展 PsiReferenceBase
*   类 DefinitionsUtil（类似于 SimplePsiImplUtil）
*   类 DefinitionsLineMarkerProvider 扩展了 RelatedItemLineMarkerProvider
*   类 DefinitionsReferenceContributor 扩展 PsiReferenceContributor

我在 plugin.xml 中注册了 LineMarkerProvider (language=XML) 和 ReferenceContributor，并添加了一些日志输出来验证它们是否被调用以及结果是否为空。

尽管 ReferenceContributor.PsiReferenceProvider.getReferencesByElement() 以及 DefinitionsReference.multiResolve() 和 reslove() 确实返回了一些非空结果，并且 LineMarkerProvider.collectNavigationMarkers() 确实找到了一些要标记的地方，但我既没有得到导航栏图标也不能从 ref= 导航到相应的标签。它说“找不到要前往的声明”。

似乎我错过了一些重要的细节。

我应该首先寻找什么？

还是完全错误的方法？

**编辑：**

这是要支持的 XML 文件之一：

```
<?xml version="1.0" ?>
<event-definitions>
  <data-source-definition>
    <name>event.eventDataSource</name>
    <class>...</class>
  </data-source-definition>

  <plugin-definition>
    <name>event.taskPlugin</name>
    <class>...</class>
    <title>...</title>

    <data-source ref="event.eventDataSource">
      <property>eventDataSource</property>
    </data-source>
    <data-source ref="personDataSource"/> <!-- defined in other XML file -->
    ... more data-sources ...
  </plugin-definition>

  <editor-definition>
    <name>event.admin.Editor</name>
    <editor>...</editor>
    <title>...</title>
    <editor-view>...</editor-view>

    <data-source ref="event.eventDataSource"/>
    <data-source ref="personDataSource"/> <!-- defined in other XML file -->
    ... more data-sources ...

    <plugin ref="event.taskPlugin">
      ...
    </plugin>
    <plugin ref="assignment.ratingPlugin"> <!-- defined in other XML file -->
      ...
    </plugin>
    ... more plugins ...
  </editor-definition>
</event-definitions> 
```

这是我的参考贡献者：

```
public class DefinitionsReferenceContributor extends PsiReferenceContributor {
    @Override
    public void registerReferenceProviders(PsiReferenceRegistrar registrar) {
        registrar.registerReferenceProvider(PlatformPatterns.psiElement(XmlTag.class),
                new PsiReferenceProvider() {
                    @NotNull
                    @Override
                    public PsiReference[] getReferencesByElement(@NotNull PsiElement element, @NotNull ProcessingContext context) {
                        XmlTag tag = (XmlTag) element;
                        final String localName = tag.getLocalName();
                        if ("name".equals(localName)) {
                            final PsiReference[] psiReferences = DefinitionsUtil.matchTag((XmlTag) element);
                            return psiReferences;
                        } else {
                            return new PsiReference[0];
                        }
                    }
                });
    }
} 
```

我的 LineMarkerProvider：

```
public class DefinitionsLineMarkerProvider extends RelatedItemLineMarkerProvider {

    @Override
    protected void collectNavigationMarkers(@NotNull PsiElement element, Collection<? super RelatedItemLineMarkerInfo> result) {
        if (element instanceof XmlTag) {
            XmlTag tag = (XmlTag) element;
            final String localName = tag.getLocalName();
            if ("name".equals(localName)) {
                final Project project = element.getProject();
                final String tagName = DefinitionsUtil.getTagName(tag);
                if (tagName != null) {
                    final List<XmlTag> matchingTags = DefinitionsUtil.findMatchingReferences(project, tagName);
                    if (matchingTags.size() > 0) {
                      NavigationGutterIconBuilder<PsiElement> builder =
                              NavigationGutterIconBuilder.create(SmotiveDefinitionsIcons.FILE).
                                      setTargets(matchingTags).
                                      setTooltipText("Navigate to a sMOTIVE Definition");
                      result.add(builder.createLineMarkerInfo(element));
                    }
                }
            } else {
                final String ref = DefinitionsUtil.getRefValue(tag);
                if (ref != null) {
                    final Project project = element.getProject();
                    final List<XmlTag> matchingTags = DefinitionsUtil.findMatchingTags(project, ref);
                    if (matchingTags.size() > 0) {
                        NavigationGutterIconBuilder<PsiElement> builder =
                              NavigationGutterIconBuilder.create(SmotiveDefinitionsIcons.FILE).
                                    setTargets(matchingTags).
                                    setTooltipText("Navigate to a sMOTIVE Definition");
                        result.add(builder.createLineMarkerInfo(element));
                    }
                }
            }
        }
    }
} 
```

最后，我的 plugin.xml 的扩展部分：

```
<extensions defaultExtensionNs="com.intellij">
    <codeInsight.lineMarkerProvider language="XML" implementationClass="de.smotive.tools.navigation.definitions.DefinitionsLineMarkerProvider"/>
    <psi.referenceContributor implementation="de.smotive.tools.navigation.definitions.DefinitionsReferenceContributor"/>
</extensions> 
```

我省略了 DefinitionsUtil 因为它的大小。如果发现解决方案需要它，我稍后会添加它。

# msbuild - 自定义操作二进制更改时重建 WiX？

> ID：15613942
> 
> 赞同：2
> 
> 时间：2013-03-25T11:36:28.057
> 
> 标签：msbuild, wix

我有一个手工制作的 MSBuild 脚本，用于构建我的基于 WiX 的安装程序。安装程序包含一个自定义操作 DLL 作为`<Binary>`元素。MSBuild 认为 MSI 在此 DLL 更改时仍然是最新的，尽管当我更改属于组件的其他文件时它会正确重建。有什么方法可以告诉 Light 任务查看其他依赖项吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:27:07.113

`ProjectReference`从您的到您的自定义操作项目创建一个`.wixproj`，MSBuild 将正确检测依赖关系，并应导致安装程序项目再次构建。此外，WiX v3.6+ 改进了重建检查，因此请确保您也使用新版本的 WiX 工具集。如果您仍然看到问题，则可能是 WiX 工具集中的一个错误，可以很好地修复。

# ruby-on-rails - Rails 将方法应用于模型中的所有整数

> ID：15613943
> 
> 赞同：0
> 
> 时间：2013-03-25T11:36:30.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想将所有整数与视图中调用的 1,25 相乘。

有没有一种聪明的方法可以做到这一点，而不必创建一个辅助方法并将其应用于视图中的所有整数？

例子：

```
class Product < ActiveRecord::Base
  attr_protected :id
    #pesudo code
    def integer
    this * 1.25
    end

end 
```

如果可以在控制器中做到这一点最好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:47:28.167

例如，如果您的`Product`模型有一个`value`属性，只需编写一个类方法，然后您就可以在任何地方为该类型的任何对象调用它。

```
class Product < ActiveRecord::Base
  value_with_weight weight
    value*weight
  end
end 
```

然后使用`@product.value_with_weight(1.25)`例如，无论你想要什么..

编辑：你实际上要求的声音就像你想在你的特定模型的范围内覆盖 Integer 类，这是实现这一目标的一种非常可怕的方式。然而，听起来有点像Ruby 2.0 中的[Refinements](http://www.rubyinside.com/ruby-refinements-an-overview-of-a-new-proposed-ruby-feature-3978.html)

# jquery - phonegap 加载变量 url

> ID：15613944
> 
> 赞同：0
> 
> 时间：2013-03-25T11:36:38.480
> 
> 标签：jquery, html, cordova, jquery-mobile

我正在使用phonegap。我需要根据输入加载外部网站。输入数据作为上一页的对象传递，然后组合生成 url。URL 将存储在变量 $link 中。然后`load()`用来获取网站。但是，将 url 变量放入`load()`. 我该如何解决？

```
$(document).on( "pagebeforeshow", "#page1", function( e ) {
            var word2 = passDataObject1;
            var method2 = passDataObject2;
            var location2 = passDataObject3;
            switch(location2)
            {
            case "Entire_Collection":
                location2="%29+";
            break;
            case "Reference_Collection":
                location2="%29+c%3A4";
            break;
            }

            var $link = 'http://....'+method2+word2+location2+'.....';
            $('#result1').load($link);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:28:18.960

将变量声明为`var link = 'http://....'+method2+word2+location2+'.....';` 没有`$`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:00:27.463

通过将您的域“www.yourdomain.com”添加到白名单文件来检查！

找到@[如何将外部服务器列入白名单：Phonegap](https://stackoverflow.com/questions/8899608/what-is-the-state-of-whitelisting-in-phonegap-1-3-0)

这允许所有域，希望这会有所帮助。

# ios - 如何使用 JSON 从 ios 应用程序发送和接收数据

> ID：15613946
> 
> 赞同：-2
> 
> 时间：2013-03-25T11:36:52.427
> 
> 标签：ios, json, nsjsonserialization

嗨，我对 iOS 编程不是很熟悉，我正在制作一个与 web (php) 交互的应用程序。

我需要知道如何使用 JSON 从 Web 发送和接收数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:37:54.773

您可以使用 AFNetworking 库，以便将您的应用程序与 Web 服务器通信。

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

阅读图书馆的文档，你会得到一切。

# highcharts - Highcharts：动态更改单个列宽以突出显示一个样本

> ID：15613954
> 
> 赞同：3
> 
> 时间：2013-03-25T11:37:10.483
> 
> 标签：highcharts

在 Highcharts 柱形图中，我们想通过将其列画得更宽一点来突出显示一个值/样本……但这似乎不可能，是吗？

`pointWidth`只影响整个系列。

也许我可以覆盖第二个系列，但恕我直言，这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:07:56.843

您还可以使用数据属性并修改宽度。

[http://jsfiddle.net/cDvmy/2/](http://jsfiddle.net/cDvmy/2/)

```
 chart.series[0].data[0].graphic.attr({
            width:50
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:54:06.593

我看不出有任何方法可以用当前的 API 做到这一点。作为一个同样*不好的解决方案*，您可以在绘制绘图后调整 SVG：

```
// make fifth bar of first series wider
var bar = $($('.highcharts-series').children()[4]);
bar.attr('width',parseInt(bar.attr('width'))+20);
bar.attr('x',parseInt(bar.attr('x'))-10); // keep it centered 
```

[在这里](http://jsfiddle.net/ffw87/)拉小提琴。

# cluster-computing - 远程集群上的过时 NFS 文件句柄问题

> ID：15613955
> 
> 赞同：1
> 
> 时间：2013-03-25T11:37:23.707
> 
> 标签：cluster-computing, nfs, nsfilehandle, gnu-parallel

[我需要使用一个名为ngspice](http://ngspice.sourceforge.net/)的工具运行一堆模拟，并且由于我想运行一百万个模拟，我将它们分布在一组机器上（主机+从机开始，每个机器有 12 个内核）。

这是命令： `ngspice deck_1.sp`; `ngspice deck_2.sp`ETC。，

第 1 步：使用 python 脚本生成这些 sp 文件。

第 2 步：Python 调用[GNU 并行](http://www.gnu.org/software/parallel/)在主/从之间分发 sp 文件并使用 ngspice 运行模拟

第 3 步：我对结果进行后处理（python 脚本）。

我一次只生成和处理 1000 个文件以节省磁盘空间。所以上面的步骤 1 到 3 循环重复，直到模拟一百万个文件。

现在，我的问题是：

当我第一次执行循环时，我没有问题。这些文件分布在主/从之间，直到 1000 次模拟完成。当循环第二次开始时，我清除了现有的 sp 文件并重新生成它们（步骤 1）。现在，当我出于某种奇怪的原因执行步骤 2 时，没有检测到某些文件。经过一些调试，对于在步骤 1 中创建的某些 sp 文件，我得到的错误是“过时的 NFS 文件句柄”和“没有这样的文件或目录 deck_21.sp”等。

我暂停了我的 python 脚本并`ls`在目录中执行了一个“”，我看到这些文件确实存在，但就像错误指出的那样，这是因为过时的 NFS 文件句柄。[此链接](http://www.opusvl.com/tech-talk/38-tech-talk/135-resolving-stale-nfs-file-handle-issues-on-linux.html)建议我重新安装客户端等，但我登录到我没有管理员权限安装的机器。有没有办法解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:50:35.317

不，您需要管理员权限才能解决此问题。

# javascript - 在 JavaScript 中解析 .msg 文件

> ID：15613957
> 
> 赞同：13
> 
> 时间：2013-03-25T11:37:27.267
> 
> 标签：javascript, jquery, outlook, eml, msg

有谁知道任何将读取/解析 microsoft .msg 文件的 JavaScript 库。我正在编写一个系统，该系统需要查看器显示已存储在服务器上的 .msg 文件。将来我可能也必须做 .eml。我没有使用 .net 框架或 ASP。该项目仅是 HTML/CSS/Javascript+JQuery。

我只需要提取收件人/发件人的电子邮件地址、主题、附件（文件名而不是实际文件）、正文（文本和 html）、发送日期等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-21T05:40:38.290

msg.reader库似乎可以完成这项工作[。](https://github.com/ykarpovich/msg.reader)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:49:19.467

您将需要一个 MSG 和/或 EML 转换器库。我过去曾成功使用过[Mailbee.NET](http://www.afterlogic.com/mailbee-net/outlook-converter)，但[Aspose](http://www.aspose.com/docs/display/emailnet/Converting+Outlook+Message+File+%28MSG%29+to+TIFF+Image)或任何其他商业库应该也能正常工作。当然，您始终可以[按照规范编写自己的 MSG 解析器](http://msdn.microsoft.com/en-us/library/cc463912%28v=exchg.80%29.aspx)，但您不是更愿意专注于您的 Web 解决方案吗？

一旦你有了这个库 - 只需将它包装在一个服务外观中并在 JS 中构建 AJAX 请求，以检索模型数据以使用你的 UI 框架显示。您将需要一些服务器页面处理程序来处理这些动态 AJAX 请求 - node.js、ASPX、JSP、PHP 等。

*作为旁注 - 将整个 MSG 拉到客户端只是为了检索部分元数据是非常低效的。考虑一个带有 50MB 附件的 MSG - 如果您只需要文件名 - 您的应用程序将无用/缓慢，直到它下载所有 50MB。我不认为浏览器（或用户）会喜欢这样。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-05T19:48:17.507

我相信纯 JS 是不可能的，但在服务器端的节点和 linux 的帮助下，[我们可以](https://stackoverflow.com/questions/47125889/outlook-html-msg-format-from-javascript)。

如果 nodemailer 和/或[msg.reader](https://github.com/ykarpovich/msg.reader/issues/5)库可以支持 msg 格式的 HTML 电子邮件，那就太好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:45:15.897

您还可以使用 Redemption 及其[RDOSession.GetMessageFromMsgFile](http://www.dimastr.com/redemption/rdosession.htm)方法。它可以在 JavaScript（仅限 IE）、Java（通过 COM 桥）和任何 .Net 语言中访问。

# c# - 如何在一个 .dat 文件中归档多种类型的文件

> ID：15613965
> 
> 赞同：0
> 
> 时间：2013-03-25T11:37:51.587
> 
> 标签：c#, .net, winforms

我需要开发一个应用程序来存储**会议文件**。

**此应用程序不应使用数据库**。最初，数据应存档在单个文件中，例如**DAT**。必须具备存储**图像**、**视频**和**音频**的能力。所有这些都增加了**安全**方法，如果可能的话，还需要**加密**。

任何人都知道告诉我开发这种存储或示例的技术吗？

任何帮助都将受到欢迎。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:40:36.513

一种技术 - ZIP，包括压缩、安全和加密，并且可以包含几乎任何类型的多个文件。

额外的好处，你可以重命名`file.zip`为`file.dat`！

查看 DotNetZip 以获取基于 .NET 的压缩库 - [http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

# algorithm - 分布式数据的并行十大算法

> ID：15613966
> 
> 赞同：19
> 
> 时间：2013-03-25T11:37:52.380
> 
> 标签：algorithm, language-agnostic, parallel-processing, distributed-computing

这是一道面试题。假设有几台计算机，每台计算机都保存一个非常大的访问 URL 日志文件。查找*前十个*访问量最大的 URL。

例如：假设只有 3 台计算机，我们需要*前两个*访问量最大的 URL。

```
计算机 A：url1、url2、url1、url3
计算机 B：url4、url2、url1、url1
计算机 C：url3、url4、url1、url3

url1 在所有日志中出现 5 次
网址2 2
网址3 3
网址4 2

所以答案是 url1, url3

```

日志文件太大而无法放入 RAM 并通过网络复制它们。据我了解，使计算并行并使用所有给定的计算机也很重要。

你会怎么解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T13:15:47.487

这是一个非常标准的问题，有一个众所周知的解决方案。您只需按 URL 对每台计算机上的日志文件进行排序，然后通过“主”计算机上大小为 k（您想要的项目数）的优先级队列将它们合并。这种技术自 1960 年代就已经存在，并且至今仍以[MapReduce](http://en.wikipedia.org/wiki/MapReduce)的形式使用（尽管稍作修改） 。

在每台计算机上，从日志文件中提取 URL 和计数，然后按 URL 排序。由于日志文件大于内存，因此您需要进行磁盘合并。这需要读取日志文件的一块，按 URL 排序，将块写入磁盘。读取下一个块、排序、写入磁盘等。在某些时候，您有 M 个日志文件块，每个块都已排序。然后，您可以进行 M 路合并。但是，不是将项目写入磁盘，而是按排序顺序（即按 URL 排序）将它们呈现给“主”。

每台机器都会对自己的日志进行排序。

“主”计算机合并来自不同计算机的数据并进行前 K 个选择。这实际上是两个问题，但可以合二为一。

master 创建两个优先级队列：一个用于合并，一个用于前 K 选择。第一个大小为 N，其中 N 是它合并数据的计算机数量。第二个是大小 K：您要选择的项目数。我为此使用了最小堆，因为它既简单又相当快。

要设置合并队列，请初始化队列并从每台“工作”计算机中获取第一项。在下面的伪代码中，“从合并队列中获取最低项目”是指从合并队列中获取根项目，然后从提供该项目的任何工作计算机中获取下一个项目。因此，如果队列包含`[1, 2, 3]`，并且项目来自计算机 B、C、A（按此顺序），那么获取最低项目将意味着从计算机 B 获取下一个项目并将其添加到优先级队列中。

然后，master 执行以下操作：

```
working = get lowest item from merge queue
while (items left to merge)
{
    temp = get lowest item from merge queue
    while (temp.url == working.url)
    {
        working.count += temp.count
        temp = get lowest item from merge queue
    }
    // Now have merged counts for one url.
    if (topK.Count < desired_count)
    {
        // topK queue doesn't have enough items yet.
        // so add this one.
        topK.Add(working);
    }
    else if (topK.Peek().count < working.count)
    {
        // the count for this url is larger
        // than the smallest item on the heap
        // replace smallest on the heap with this one
        topK.RemoveRoot()
        topK.Add(working)
    }
    working = temp;
}
// Here you need to check the last item:
if (topK.Peek().count < working.count)
{
    // the count for this url is larger
    // than the smallest item on the heap
    // replace smallest on the heap with this one
    topK.RemoveRoot()
    topK.Add(working)
} 
```

此时，`topK`队列中包含计数最高的 K 个项目。

因此，每台计算机都必须进行归并排序，即 O(n log n)，其中`n`是该计算机日志中的项目数。主服务器上的合并是 O(n)，其中`n`是来自各个计算机的所有项目的总和。挑选前 k 个项目是 O(n log k)，其中`n`是*唯一*url 的数量。

当然，这些排序是并行完成的，每台计算机都准备自己的排序列表。但是排序的“合并”部分是在主计算机合并的同时完成的，所以有一些协调，所有机器都在那个阶段参与。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T16:13:28.147

鉴于日志文件的规模和问题的一般性质，这是一个很难解决的问题。我不认为所有情况都有一种最佳算法。这取决于日志文件内容的性质。例如，采取极端情况，即所有 URL 在所有日志文件中都是唯一的。在那种情况下，基本上任何解决方案都需要很长时间才能得出这个结论（如果它甚至达到那么远......），甚至没有答案，因为没有前十名。

我没有可以呈现的无懈可击的算法，但我会探索一种解决方案，它使用 URL 的哈希值直方图，而不是 URL 本身。这些直方图可以通过一次性文件读取来计算，因此它可以处理任意大小的日志文件。在伪代码中，我会选择这样的东西：

*   使用具有有限目标空间（例如 10,000，注意预计会发生冲突的哈希值）的哈希函数来计算日志文件中每个项目的哈希值，并计算每个 has 值出现的次数。将生成的直方图传达给服务器（尽管也可以通过将结果多播到每个其他节点来完全避免中央服务器——但我将在这里坚持使用更明显的服务器方法）
*   服务器应合并直方图并将结果传回。根据 URL 的分布，可能已经有许多清晰可见的峰值，其中包含访问次数最多的 URL。
*   然后，每个节点都应该关注直方图中的峰值。它应该再次通过其日志文件，使用额外的哈希函数（同样具有有限的目标空间）为那些在其中一个峰值中具有其第一个哈希值的 URL（要关注的峰值数量）计算新的哈希直方图on 将是算法中要调整的参数，具体取决于 URL 的分布），并使​​用新的哈希值计算第二个直方图。结果应该传送到服务器。
*   服务器应再次合并结果并分析新直方图与原始直方图。根据清晰可见的峰值，它可能已经能够得出关于前十个 URL 的两个哈希值的结论。或者它可能必须指示机器使用第二个散列函数计算更多的散列值，并且可能在那之后通过另一个散列函数进行第三遍散列计算。这必须继续，直到可以从直方图的集体组得出结论，峰值 URL 的哈希值是什么，然后节点可以从中识别不同的 URL。

请注意，这种机制需要对算法和散列函数的几个方面进行调整和优化。它还需要服务器编排，以便随时进行哪些计算。当无法得出结论时，可能还需要设置一些界限以便得出结论，换句话说，当 URL 哈希值的“频谱”太平而无法继续计算时。

但是，如果 URL 中有明确的分布，这种方法应该可以很好地工作。我怀疑，实际上，这个问题只在这种情况下才有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:50:31.480

假设以下条件为真：

*   您需要 m 个主机的前 n 个 url。
*   您不能将文件存储在 RAM 中
*   有一个主节点

我会采取以下方法：

每个节点读取文件的一部分（即 MAX 个 url，其中 MAX 可以是，比如说 1000 个 url）并保存一个数组 arr[MAX]={url,hits}。

当一个节点从文件中读取了 MAX 个 urls 时，它会将列表发送到主节点，并重新开始读取，直到再次达到 MAX 个 urls。

当一个节点到达 EOF 时，他将剩余的 url 列表和一个 EOF 标志发送到主节点。

当主节点收到一个 url 列表时，它会将它与它的最后一个 url 列表进行比较，并生成一个新的、更新的。

当主节点从每个节点接收到EOF标志并完成读取他自己的文件时，他的列表的最后一个版本的前n个url就是我们正在寻找的那些。

~~或者~~

一种不同的方法可以让 master 不再做所有的工作：

每个节点读取它的文件并存储一个与上面相同的数组，一直读取到 EOF。

EOF时，节点会将列表的第一个url和命中数发送给m​​aster。

~~当 master 收集到每个节点的第一个 url 和命中数时，它会生成一个列表。如果主节点的 url 少于 n 个，它将要求节点发送第二个，依此类推。直到 master 对 n 个 url 进行排序。~~

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T12:45:40.010

预处理：每个计算机系统处理完整的日志文件并准备唯一 URL 列表并对其进行计数。

获取热门 URL：

1.  计算每个计算机系统的 URL 计数
2.  中央系统的整理过程（虚拟）
    *   按 DESC 顺序（即从最顶部开始）将带有计数的 URL 一个一个发送到中央处理单元
    *   在中央系统整理传入的 URL 详细信息
    *   重复直到来自传入 URL 的所有计数的总和小于主列表中第十个 URL 的计数。**绝对确定的重要一步**

PS：您将拥有跨系统的前十个 URL，不一定按此顺序。要获得实际订单，您可以**反向排序**。对于前十名的给定 URL，从 dist-computers 获得单独的计数并形成最终订单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-12T02:40:55.307

在每个节点上计算 URL 的出现次数。然后使用分片功能将 url 分发到另一个拥有 URL 密钥的节点。现在每个节点都有唯一的键。然后在每个节点上再次减少以获取 URL 的出现次数，然后找到前 N 个 URL。最后只发送前 N 个 url 到主节点，主节点将在 K*N 项中找到前 N 个 URls，其中 K 是节点数。

```
Eg: K=3
N1 - > url1,url2,url3,url1,url2
N2 - > url2,url4,url1,url5,url2
N3 - > url1,url4,url3,url1,url3 
```

第 1 步：计算每个节点中每个 url 的出现次数。

```
 N1 -> (url1,2),(url2,2),(url3,1)
 N2 -> (url4,1),(url2,2),(url5,1),(url1,1)
 N3 -> (url1,2),(url3,2),(url4,1) 
```

第二步：分片使用哈希函数（为简单起见，设为url数%K）

```
 N1 -> (url1,2),(url1,1),(url1,2),(url4,1),(url4,1)
 N2 -> (url2,2),(url2,2),(url5,1)
 N3 -> (url3,2),(url3,1) 
```

步骤4：再次查找节点内每个键的出现次数。

```
N1 -> (url1,5),(url4,2)
N2 -> (url2,4),(url5,1)
N3 -> (url3,3) 
```

第 5 步：仅将前 N 个发送给 master。令 N=1

```
Master -> (url1,5),(url2,4),(url3,3) 
```

对结果进行排序并获得前 1 项，即 url1

第 1 步称为 map 侧缩减，这样做是为了避免在第 2 步中发生巨大的 shuffle。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T12:31:28.493

下面的描述是解决方案的想法。它不是伪代码。
考虑您有一系列系统。
1.for each A: Collections(systems)
1.1）在每台计算机上运行一个守护进程A，探测日志文件的变化。
1.2) 当发现变化时，唤醒 AnalyzerThreadA
1.3) 如果 AnalyzerThreadA 使用一些正则表达式找到 URL，则使用 count++ 更新 localHashMapA。
（键 = URL，值 = 计数）。
2) 将localHashMapA 的前十个条目推送到将运行AnalyzeAll 守护程序的ComputerA。

上述步骤将是每个系统的最后一步，它将前十个条目推送到主系统，例如：computerA。

3) 在computerA 中运行的AnalyzeAll 将解析URL 的masterHashMap 中的重复项和更新计数。

4) 从 masterHashMap 打印 topTen。

# android - 如何检查应用程序或 WebView 是否具有在 Android 中调用插件的适当权限？

> ID：15613973
> 
> 赞同：1
> 
> 时间：2013-03-25T11:38:03.397
> 
> 标签：android, webview, android-ndk, npapi, browser-plugin

我`netscape-based(NPAPI)` `plugin`在 apk 中打包了一个 .so 文件。`plugin`如果他们的网页具有所需的`MIME`类型，则各种 WebView 可能会调用它。

但是，我也希望`restrict`插件的使用仅限于那些有权这样做的人。我如何在插件端检查这个？

我已经尝试实现`AndroidManifest.xml` `<permissions>`and`<uses-permissions>`并且它似乎根本没有执行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:12:10.063

`<uses-permissions>`AndroidManifest.xml 中的内容是让您的应用能够访问系统或其他应用的 API。

`<permissions>`是让您的应用程序限制目标应用程序通过您自己的应用程序访问 API（接收器操作...）。

如果您询问如何不让其他应用程序使用您的 .so 文件。那我告诉你，没必要。在 Android 中，每个应用程序都是沙盒化的。其他应用程序无法使用您的库 .so 文件。

如果您询问如何让您的应用程序中的某些 WebView 使用该库而不让其他人使用该库，那么我会说这`permission`不是您想要的。你为什么不只是有一个属性来指示 webview 是否需要插件。

# opengl - freeglut 与 glew 的区别？

> ID：15613978
> 
> 赞同：46
> 
> 时间：2013-03-25T11:38:17.843
> 
> 标签：opengl, glew, freeglut, glfw

我最近开始学习 OpenGL (> 3.3) 并且我注意到很多示例和教程都使用了 freeglut 和 glew，但根本没有真正解释它们的区别。在谷歌搜索和阅读广告后，我发现最好的描述是这个[OpenGL 相关的工具包和 API](http://www.opengl.org/wiki/Related_toolkits_and_APIs#Context.2FWindow_Toolkits)，但发现它缺乏。我什至读过关于 SO 的标签信息。

作为 OpenGL 的新手，我仍在尝试掌握不同的概念。我已经到了创建一个使用 glew、创建上下文（在 windows 上，VS2010 上）和绘制真正基本形状的基本程序的阶段，所有这些都不需要明确包含 freeglut。所以我不明白为什么我需要它。

所以我的问题是，有什么**区别**：
-freeglut
-glew
-(& glfw)
一个人能做什么**而另一个人不能**？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-25T15:21:13.450

OpenGL Extension Wrangler ( **GLEW** ) 用于访问现代 OpenGL API 函数（版本 3.2 到最新版本）。如果我们使用旧版本的 OpenGL，那么我们可以简单地访问 OpenGL 函数，包括 as `#include <GL/gl.h>`。但是在现代 OpenGL 中， API 函数是在运行时确定的，而不是在编译时确定的。GLEW 将处理 OpenGL API 的运行时加载。关于 GLEW，请参见[此处](https://stackoverflow.com/tags/glew/info)

**GLFW**或**freeglut**将允许我们创建一个窗口，并以跨平台的方式接收鼠标和键盘输入。OpenGL 不处理窗口创建或输入，所以我们必须使用这些库来处理窗口、键盘、鼠标、操纵杆、输入和其他用途。

**GLFW**和**freeglut**是我们的替代品，我们可以根据需要选择任何一种，但**GLEW**与它们不同，它用于 OpenGL API 的运行时加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:50:10.660

我在我的大学里用它们来做一些工作。

[GLEW](http://glew.sourceforge.net/)是一个“跨平台开源 C/C++ 扩展加载库”（来自其网站），而[freeglut](http://freeglut.sourceforge.net/)是一个窗口管理器，它取代了默认的 OpenGL Utility Toolkit (GLUT) 库。

因此，如您所见，两者都有不同的目的。使用 freeglut 的重点是它仍然被维护，而默认的 GLUT 不是，所以如果你想要错误修复和新功能，你应该使用它:)

# jquery - 我需要一个输出 :not("a") 在 li 标签内

> ID：15613981
> 
> 赞同：2
> 
> 时间：2013-03-25T11:38:24.100
> 
> 标签：jquery

```
<ul class="header">
    <li class="header-text">Head1</li>
    <li class="header-text"><a href="#">line11</a></li>
    <li class="header-text"><a href="#">line12</a></li>
    <li class="header-text"><a href="#">line13</a></li>
    <li class="header-text"><a href="#">line14</a></li>
    <li class="header-text"><a href="#">line15</a></li>
<ul>
<ul class="header">
    <li class="header-text">Head2</li>
    <li class="header-text"><a href="#">line21</a></li>
    <li class="header-text"><a href="#">line22</a></li>
    <li class="header-text"><a href="#">line23</a></li>
    <li class="header-text"><a href="#">line24</a></li>
    <li class="header-text"><a href="#">line25</a></li>
<ul> 
```

单击“ul”时，我需要输出为“Head1”或“Head2”，仅此而已

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:41:57.737

如果我没记错的话，你想要`li`哪个没有`a`孩子。

所以使用`:not`和`:has`

```
$('li:not(:has(a))') 
```

**`UL`点击_**

```
$('ul').on('click',function(){
   var li_wihtout_a = $(this).find('li:not(:has(a))');
   console.log(li_wihtout_a);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:43:17.823

如果您只想获取第一个孩子的文本，这很容易。

[jsFiddle](http://jsfiddle.net/E5wj5/1/)

**JS**

```
$('.header').click(function () {
    alert(this.children[0].innerHTML);
}); 
```

我还注意到您没有`<ul>`正确关闭标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:48:59.953

使用`.closest()`和`:eq()`
[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)
[http://api.jquery.com/closest/很简单](http://api.jquery.com/closest/)

`**[LIVE DEMO](http://jsbin.com/apepah/2/edit)**`

```
$('.header li a').click(function( e ) {

  e.preventDefault(); // prevent default browser action on anchors
  var desiredText = $(this).closest('.header').find('li:eq(0)').text();
  alert( desiredText );

} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:39:19.717

如果您的标记是一致的并且如上所述，则使用 :first 选择器

# angularjs - angularjs 指令上的 ng-click 属性

> ID：15613992
> 
> 赞同：20
> 
> 时间：2013-03-25T11:38:55.643
> 
> 标签：angularjs, angularjs-directive

我认为在开箱即用的指令上使用众所周知的角度属性应该很容易。

例如，如果我的指令的名称是 myDirective 我想这样使用它：

```
<div ng-controller="myController">
   <my-directive ng-click="doSomething()"><my-directive>
</div> 
```

而不需要像下面的示例中那样定义自定义点击属性 (onClick)

```
<div ng-controller="myController">
   <my-directive on-click="doSomething()"><my-directive>
</div> 
```

似乎 ng-click 可以工作，但是您也需要在指令标签上指定 ng-controller ，这是我不想要的。我想在周围的 div 上定义控制器

是否可以在指令上使用 ng-click 以及在父 html 元素上定义的控制器？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-25T11:41:16.040

这是更新的代码。也许这就是你要找的。

html:

```
<div data-ng-app="myApp">
    <div data-ng-controller="MyController">
        <my-directive data-ng-click="myFirstFunction('Hallo')"></my-directive>
        <my-directive data-ng-click="mySecondFunction('Hi')"></my-directive>
    </div>
</div> 
```

角度：

```
var app = angular.module('myApp', []);

app.directive('myDirective', function(){
    return {
        restrict: 'EA',
        replace: true,
        scope: {
            eventHandler: '&ngClick'
        },
        template: '<div id="holder"><button data-ng-click="eventHandler()">Call own function</button></div>'
    };
});

app.controller('MyController', ['$scope', function($scope) {
    $scope.myFirstFunction = function(msg) {
         alert(msg + '!!! first function call!');   
    };
    $scope.mySecondFunction = function(msg) {
         alert(msg + '!!! second function call!');   
    };
}]); 
```

**编辑**

检查我在 jsFiddler 中制作的解决方案是您正在寻找的吗？

[http://jsfiddle.net/migontech/3QRDt/1/](http://jsfiddle.net/migontech/3QRDt/1/)

# c# - 将 2 个 foreach 循环减少到一个 linq 查询中

> ID：15613999
> 
> 赞同：3
> 
> 时间：2013-03-25T11:39:07.140
> 
> 标签：c#, linq, loops

有什么办法可以将以下代码简化为 Linq 形式？

```
foreach (var current in currentWhiteListApps)
{
    var exists = false;

    foreach (var whiteList in clientSideWhiteLists)
    {
       if (current.appID.Equals(whiteList.appID))
       {
           exists = true;
       }
    }
    if (!exists)
    {
        deleteList.Add(current);
    }
} 
```

我能想到的只有：

```
currentWhiteListApps.Select(x => {
    var any = clientSideWhiteLists.Where(y => y.appID.Equals(x.appID));
    if (any.Any())
        deleteList.AddRange(any.ToArray());
    return x;
}); 
```

**Reason For LINQ**
`LINQ`比嵌套的 foreach 循环更具可读性，并且需要更少的代码。所以这就是我想要它的原因`LINQ`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:42:06.663

```
var deleteList = currentWhiteListApps.Where(x =>
                     clientSideWhiteLists.All(y => !x.appID.Equals(y.appID)))
                                     .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:43:24.123

```
var deleteList = currentWhiteListApps.Except(clientSideWhiteLists).ToList(); 
```

此解决方案假定两个集合都包含相同类型的元素，并且此类型已覆盖比较 appID 的 Equals()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:41:25.430

```
var validIds = new HashSet<int>(clientSideWhiteLists.Select(x => x.appId));
var deleteList = currentWhiteListApps.Where(x => !validIds.Contains(x.appId)).ToList(); 
```