# StackOverflow 问答 12956000-12956999

# grid - 如何检查是否在网格中选择了多行

> ID：12956002
> 
> 赞同：1
> 
> 时间：2012-10-18T13:36:23.850
> 
> 标签：grid, axapta, multi-select, x++

如何检查是否在网格中选择了多行？

在 Dynamics Ax 中，如果选择了多个记录，则有一个禁用按钮的多选属性，是否存在“相反”？

意味着仅在选择了多个记录时才激活按钮，我如何通过代码执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:01:28.017

除非存在这种属性，否则您似乎有两件事：

1.  检查是否选择了多行
2.  每次选择更改时检查它

## 检查多项选择

看看[axaptapedia ：多个网格选择](http://www.axaptapedia.com/index.php?title=Multiple_grid_selections)以计算所选记录。

## 检查选择的变化

查看 InventTable 的表单，其中的按钮被激活，具体取决于选择是否为 bom。

表单处理按钮激活的方法`setBOMRouteEnabled`是从数据源的方法调用的`active`。

遵循此模型，您可以检查选择更改时的多项选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-04T20:12:52.603

检测这种情况的最佳方法是这样的：

```
FormDataSource  fds = salesTable.dataSource();

if (fds.recordsMarked().lastIndex() > 1)
    info("Multiple records selected");
else
    info("1 or 0 records selected"); 
```

# c# - WebMatrix razor C# WebSecurity 登录但 Web.Security.IsAuthenticated 不返回正确检查

> ID：12956010
> 
> 赞同：2
> 
> 时间：2012-10-18T13:36:33.073
> 
> 标签：c#, authentication, razor, login, webmatrix

我有一个快速的问题。在我的代码中，我有这个：

```
if(!(username.IsEmpty() || password.IsEmpty()))
    {
        if (WebSecurity.UserExists(username) && WebSecurity.GetPasswordFailuresSinceLastSuccess(username) > 4 && WebSecurity.GetLastPasswordFailureDate(username).AddSeconds(120) > DateTime.UtcNow) 
        {
            Session["gActionMessage"] = "You're account has been locked due to too many failed login attempts. " +
                                            "Please try again in 2 minutes.";
            Session["gActionMessageDisplayed"] = "not";
            Response.Redirect("~/");
            return;
        }

        if(WebSecurity.Login(username, password, false))
        {
            errorMessage = "";
        }
    }

    if (!WebSecurity.IsAuthenticated)
    {
        errorMessage = "You are no longer logged in. Please supply your username and password credentials along with the rest of the form data.";
    } 
```

当我尝试使用此代码时（登录后的检查实际上是在 if(IsPost) 内，这样我就可以在使用发布的数据之前检查用户是否仍然登录。当它失败时检查“if(! WebSecurity.IsAuthenticated)”第一次打开页面的一小部分，询问登录信息。一旦重新进入并重新发布，检查会读取“用户名”和“密码”的值并尝试重新登录他们进来。它就是这样做的，但是在他们应该“登录”之后直接通过“if（！WebSecurity.IsAuthenticated）”分支并执行其内容。我是否正在检查“if（！WebSecurity.IsAuthenticated） ” 很快？页面是否必须在一个人真正被认为经过身份验证之前完成加载？

我似乎无法确定为什么会发生这种情况，也无法在研究中找到任何帮助。

谢谢大家，任何帮助！

更新：

我已经发布了出现在上面代码下方的代码，如下：

```
if((Roles.IsUserInRole((WebSecurity.CurrentUserName), "Locked")) || (Roles.IsUserInRole((WebSecurity.CurrentUserName), "AdminLocked")))
    {
        Session["gActionMessage"] = "Your account is locked. ";
        Session["gActionMessage"] += "Please contact an administrator and ask that your account be approved.";
        Session["gActionMessageDisplayed"] = "not";
        Response.Redirect("~/");
    }
}
}

@RenderPage("~/Shared/HeaderLayout.cshtml")

        <div>
            <span><button type="button" class="btn" onclick="location.href='/IntroPage.cshtml'">Main Page</button></span><span class="heading">Lookup Entry</span><span><button type="button" class="btn" onclick="javascript:document.getElementById('searchForm').submit()">Search</button></span></br></br>
            <span style="font-size: 3em; color: #808080;">________________________________________________</span></br></br></br>
        </div>

        <div id="FormHolder">
            <form id="searchForm" class="searchForm" method="post" action="">
        @{
            if (errorMessage != "")
            {
                <div class="errorMessageWrapper"><span style="font-style: italic; font-weight: 700;">ERROR:</span><br/>@errorMessage<br/><br/>
                    @if(!WebSecurity.IsAuthenticated && success==false)
                    {
                        <table class="accInterfaceTable">
                            <tr>
                                <td class="accInterfaceLabelCell">
                                    <label for="username">Email:</label>
                                </td>
                                <td class="accInterfaceInputCell">
                                    <input type="text" id="username" name="username" /><br/><br/>
                                </td>
                            </tr>
                            <tr>
                                <td class="accInterfaceLabelCell">
                                    <label for="password">Password:</label>
                                </td>
                                <td>
                                    <input type="password" id="password" name="password" /><br/><br/>
                                </td>
                            </tr>
                        </table><br/><br/>
                        <input type="hidden" id="hiddenLoginSubmit" name="hiddenLoginSubmit" value="" />
                        <input type="submit" class="btn" value="Log In" />
                    }
                </div><br/>
            }
        }
                <table class="searchTable">
                    <tr>
                        <th>Search Field<br/><br/></th>
                        <th></th>
                        <th>Search Condition<br/><br/></th>
                        <th></th>
                        <th>Search Parameter<br/><br/></th>
                    </tr> 
```

这下面还有更多的html，但它只是一个多余的html表单。

更新2：

好吧，我从来没有找到为什么在明确的“if(WebSecurity.Login(username, password, false))”分支执行后直接执行“if(!WebSecurity.IsAuthenticated)”分支的原因，但是我能够将一个单独的本地布尔变量与逻辑联系起来，现在一切正常（我检查以确保它始终检查，除非只是使用上面的分支登录，并检查以确保它确实登录等） .

如果有人能告诉我为什么会发生这种情况，以利于我（以及其他任何遇到此页面并遇到类似问题的人）的教育，我将很乐意接受答案。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:49:50.353

我记得在 MSDN 或某个地方阅读过，WebSecurity.IsAuthenticated 在页面完全加载之前不起作用。这意味着如果您在页面中登录用户并且在您检查 IsAuthenticated 的同一代码流中，它将不会返回 True。要使 IsAuthenticated 为 True，必须重新加载页面或使用更好的做法；这是在登录成功后立即将用户重定向到另一个安全页面，并在该页面中检查 IsAuthenticated。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T02:32:09.557

检查您的 webconfig，您必须启用表单身份验证：

在里面添加以下代码段

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="3600" />
    </authentication> 
```

如果它在您的 webconfig 中，请注释掉：

```
<!--<modules>
      <remove name="FormsAuthentication" />
</modules>--> 
```

现在你可以检查

WebSecurity.CurrentUserName, WebSecurity.CurrentUserId and , WebSecurity.IsAuthenticated flags;

# azure - 是否可以通过编程方式访问 Azure 计费信息？

> ID：12956013
> 
> 赞同：0
> 
> 时间：2012-10-18T13:36:37.547
> 
> 标签：azure

是否可以通过编程方式访问 Azure 计费信息？

我知道您可以下载 .csv 文件，但这不符合我的要求。我真的很想要一个 API 来访问当前的实时计费数据。

我找不到任何东西，但我看到一些应用程序表明它可以做到这一点 - [http://www.youtube.com/watch?v=ETs-NgnZV_U](http://www.youtube.com/watch?v=ETs-NgnZV_U)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-01T21:07:22.907

Azure 现在确实提供了以编程方式检索资源使用情况和定价数据的方法：[https ://weblogs.asp.net/scottgu/new-azure-billing-apis-available](https://weblogs.asp.net/scottgu/new-azure-billing-apis-available)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:50:25.587

目前不是。Quest 工具从网页 afaik 的 HTML 中抓取数据

# android - 在 Android 中启动默认音乐应用并播放文件

> ID：12956015
> 
> 赞同：0
> 
> 时间：2012-10-18T13:36:39.107
> 
> 标签：android, url, android-mediaplayer

我有应用程序，其中有媒体文件的 url。我希望我能启动音乐和视频应用程序并播放文件。

有没有机会这样做。我不想编写自己的媒体播放器应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:54:08.523

使用媒体文件的路径创建一个 ACTION_VIEW 意图，并包含您要播放的媒体类型。

```
String audioPath = "path/to/audio.mp3";

Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);

// set the data and type, for movies this would be video/*
intent.setDataAndType(Uri.parse(audioPath), "audio/*");
getContext().startActivity(intent); 
```

您不必设置类型，但我建议您这样做。设置类型会将活动限制为知道如何处理给定类型的活动。

# plone - 在注册表单过程中如何登录用户

> ID：12956017
> 
> 赞同：2
> 
> 时间：2012-10-18T13:36:45.313
> 
> 标签：plone

客户要求创建一个一步表单：注册+登录；

我已经配置 plone 让用户选择密码，所以在数据级别我们应该能够实现这一点。

现在在代码级别，我不知道应该使用哪个 API 来“登录”用户，同时拥有用户名和密码。

默认情况下，Plone 在注册后显示两个屏幕，然后才拥有网站：

*   报名表格
*   带有登录按钮的成功页面
*   成功登录页面。
*   必须在网站上移动自己有会员

我想把它缩短到：

*   报名表格
*   重定向到仪表板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:29:39.733

您可以在用户文件夹上使用该`updateCredentials()`方法；`acl_users`它会调用正确的插件，从而在默认的 Plone 设置中为用户设置一个 cookie：

```
users = getToolByName(self.context, 'acl_users')
users.updateCredentials(self.request, self.request.response, username, password) 
```

该方法需要请求、响应、用户名和密码参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:48:12.810

自定义 portal_skins/plone_login/registered 并将重定向插入到仪表板。

# .net - 如何跟踪 DbQuery 参数值

> ID：12956021
> 
> 赞同：1
> 
> 时间：2012-10-18T13:36:58.757
> 
> 标签：.net, entity-framework, dbcontext

我们正在使用 qry.ToString 跟踪生成的 SQL。我们如何也可以跟踪参数值。

DbQuery（与 ObjectQuery 不同）没有 Parameters 属性。

使用 SqlProfiler 不是一种选择。我们正在生产中使用 log4net 进行跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:30:27.947

有关使用反射的解决方法，请参阅[Access to DbQuery parameters for logging](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/91c7fb6d-d1b8-4a7f-aec9-16336dbd619b/)。我[在 CodePlex 提出了功能请求](http://entityframework.codeplex.com/workitem/619)

# c# - 为未来安排 Facebook 帖子

> ID：12956025
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:16.110
> 
> 标签：c#, asp.net, facebook

我正在开发一个应用程序，我们可以通过它安排我们未来的帖子，并将在预定时间自动发布到 Facebook。

当我使用我的 Web 应用程序登录到 Facebook 时，我可以发帖，但我不知道当我没有登录到 Facebook 时，我将如何在预定时间发帖。

facebook 将如何识别该帖子应该张贴在我的墙上而不是其他人的墙上。谁能帮我。

我正在为我的应用程序使用 c#、asp.net。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:42:54.763

您使用 Facebook API 创建一个 facebook 应用程序，然后将该应用程序添加到您的帐户中，使其能够发布到您的墙上。

然后只需让应用程序检查包含您预先编写的内容的数据库，以及何时发布内容。

查看入门指南：http: [//developers.facebook.com/docs/](http://developers.facebook.com/docs/)

如果不止一个人使用该应用程序，那么将在分配给每个用户的数据库中保存一个公共令牌，Facebook 将对其进行身份验证，以查看该令牌/应用程序是否有权发布到该特定用户墙。

# android - 活动没有响应

> ID：12956026
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:22.003
> 
> 标签：android, android-activity

我的应用程序运行良好突然停止工作，每当我尝试运行它时，它都会在错误日志中显示这一点，请填写您的经验

我正在使用http post客户端从Web服务中获取响应，到目前为止它工作正常，它有一些突然的影响，最初我认为我的不良互联网连接正在影响，但它似乎也在良好的网络连接中徘徊

```
10-18 19:06:21.554: D/AndroidRuntime(311): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
10-18 19:06:21.554: D/AndroidRuntime(311): CheckJNI is ON
10-18 19:06:21.653: D/AndroidRuntime(311): --- registering native functions ---
10-18 19:06:22.073: D/AndroidRuntime(311): Shutting down VM
10-18 19:06:22.073: D/dalvikvm(311): Debugger has detached; object registry had 1 entries
10-18 19:06:22.083: I/AndroidRuntime(311): NOTE: attach of thread 'Binder Thread #3' failed
10-18 19:06:22.423: D/AndroidRuntime(319): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
10-18 19:06:22.423: D/AndroidRuntime(319): CheckJNI is ON
10-18 19:06:22.523: D/AndroidRuntime(319): --- registering native functions ---
10-18 19:06:22.943: I/ActivityManager(58): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.gt_google_svn/.Auth }
10-18 19:06:22.953: D/AndroidRuntime(319): Shutting down VM
10-18 19:06:22.953: D/dalvikvm(319): Debugger has detached; object registry had 1 entries
10-18 19:06:22.963: I/AndroidRuntime(319): NOTE: attach of thread 'Binder Thread #3' failed
10-18 19:06:44.220: W/WindowManager(58): Key dispatching timed out sending to com.gt_google_svn/com.gt_google_svn.Auth
10-18 19:06:44.220: W/WindowManager(58): Previous dispatch state: null
10-18 19:06:44.224: W/WindowManager(58): Current dispatch state: {{null to Window{45080188 com.gt_google_svn/com.gt_google_svn.Auth paused=false} @ 1350567404223 lw=Window{45080188 com.gt_google_svn/com.gt_google_svn.Auth paused=false} lb=android.os.BinderProxy@4500e0f8 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{45080188 com.gt_google_svn/com.gt_google_svn.Auth paused=false}}}
10-18 19:06:44.244: I/Process(58): Sending signal. PID: 301 SIG: 3
10-18 19:06:44.244: I/dalvikvm(301): threadid=3: reacting to signal 3
10-18 19:06:44.284: I/dalvikvm(301): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.284: I/Process(58): Sending signal. PID: 58 SIG: 3
10-18 19:06:44.284: I/dalvikvm(58): threadid=3: reacting to signal 3
10-18 19:06:44.324: I/dalvikvm(58): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.324: I/Process(58): Sending signal. PID: 124 SIG: 3
10-18 19:06:44.324: I/dalvikvm(124): threadid=3: reacting to signal 3
10-18 19:06:44.334: I/dalvikvm(124): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.334: I/Process(58): Sending signal. PID: 285 SIG: 3
10-18 19:06:44.334: I/dalvikvm(285): threadid=3: reacting to signal 3
10-18 19:06:44.345: I/dalvikvm(285): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.345: I/Process(58): Sending signal. PID: 256 SIG: 3
10-18 19:06:44.345: I/dalvikvm(256): threadid=3: reacting to signal 3
10-18 19:06:44.354: I/dalvikvm(256): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.354: I/Process(58): Sending signal. PID: 195 SIG: 3
10-18 19:06:44.354: I/dalvikvm(195): threadid=3: reacting to signal 3
10-18 19:06:44.364: I/dalvikvm(195): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.364: I/Process(58): Sending signal. PID: 201 SIG: 3
10-18 19:06:44.364: I/dalvikvm(201): threadid=3: reacting to signal 3
10-18 19:06:44.374: I/dalvikvm(201): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.374: I/Process(58): Sending signal. PID: 253 SIG: 3
10-18 19:06:44.374: I/dalvikvm(253): threadid=3: reacting to signal 3
10-18 19:06:44.384: I/dalvikvm(253): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.384: I/Process(58): Sending signal. PID: 108 SIG: 3
10-18 19:06:44.384: I/dalvikvm(108): threadid=3: reacting to signal 3
10-18 19:06:44.404: I/dalvikvm(108): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.404: I/Process(58): Sending signal. PID: 112 SIG: 3
10-18 19:06:44.404: I/dalvikvm(112): threadid=3: reacting to signal 3
10-18 19:06:44.424: I/dalvikvm(112): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.424: I/Process(58): Sending signal. PID: 207 SIG: 3
10-18 19:06:44.424: I/dalvikvm(207): threadid=3: reacting to signal 3
10-18 19:06:44.434: I/dalvikvm(207): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.434: I/Process(58): Sending signal. PID: 160 SIG: 3
10-18 19:06:44.434: I/dalvikvm(160): threadid=3: reacting to signal 3
10-18 19:06:44.464: I/dalvikvm(160): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.464: I/Process(58): Sending signal. PID: 175 SIG: 3
10-18 19:06:44.464: I/dalvikvm(175): threadid=3: reacting to signal 3
10-18 19:06:44.474: I/dalvikvm(175): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.474: I/Process(58): Sending signal. PID: 216 SIG: 3
10-18 19:06:44.484: I/dalvikvm(216): threadid=3: reacting to signal 3
10-18 19:06:44.494: I/dalvikvm(216): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.494: I/Process(58): Sending signal. PID: 269 SIG: 3
10-18 19:06:44.494: I/dalvikvm(269): threadid=3: reacting to signal 3
10-18 19:06:44.504: I/dalvikvm(269): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.504: I/Process(58): Sending signal. PID: 232 SIG: 3
10-18 19:06:44.504: I/dalvikvm(232): threadid=3: reacting to signal 3
10-18 19:06:44.515: I/dalvikvm(232): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.515: I/Process(58): Sending signal. PID: 144 SIG: 3
10-18 19:06:44.515: I/dalvikvm(144): threadid=3: reacting to signal 3
10-18 19:06:44.534: I/dalvikvm(144): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.534: I/Process(58): Sending signal. PID: 125 SIG: 3
10-18 19:06:44.534: I/dalvikvm(125): threadid=3: reacting to signal 3
10-18 19:06:44.544: I/dalvikvm(125): Wrote stack traces to '/data/anr/traces.txt'
10-18 19:06:44.574: E/ActivityManager(58): ANR in com.gt_google_svn (com.gt_google_svn/.Auth)
10-18 19:06:44.574: E/ActivityManager(58): Reason: keyDispatchingTimedOut
10-18 19:06:44.574: E/ActivityManager(58): Load: 0.59 / 0.48 / 0.2
10-18 19:06:44.574: E/ActivityManager(58): CPU usage from 44545ms to 18ms ago:
10-18 19:06:44.574: E/ActivityManager(58):   system_server: 2% = 1% user + 0% kernel / faults: 119 minor 4 major
10-18 19:06:44.574: E/ActivityManager(58):   adbd: 0% = 0% user + 0% kernel / faults: 28 minor
10-18 19:06:44.574: E/ActivityManager(58):   m.android.phone: 0% = 0% user + 0% kernel / faults: 156 minor
10-18 19:06:44.574: E/ActivityManager(58):   m.gt_google_svn: 0% = 0% user + 0% kernel / faults: 27 minor 6 major
10-18 19:06:44.574: E/ActivityManager(58):   qemud: 0% = 0% user + 0% kernel
10-18 19:06:44.574: E/ActivityManager(58):   re-initialized>: 0% = 0% user + 0% kernel / faults: 146 minor 1 major
10-18 19:06:44.574: E/ActivityManager(58):   events/0: 0% = 0% user + 0% kernel
10-18 19:06:44.574: E/ActivityManager(58):   putmethod.latin: 0% = 0% user + 0% kernel / faults: 172 minor 1 major
10-18 19:06:44.574: E/ActivityManager(58):   ndroid.launcher: 0% = 0% user + 0% kernel / faults: 39 minor
10-18 19:06:44.574: E/ActivityManager(58):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 109 minor
10-18 19:06:44.574: E/ActivityManager(58):   roid.alarmclock: 0% = 0% user + 0% kernel / faults: 77 minor
10-18 19:06:44.574: E/ActivityManager(58):   android.protips: 0% = 0% user + 0% kernel / faults: 76 minor
10-18 19:06:44.574: E/ActivityManager(58):   .quicksearchbox: 0% = 0% user + 0% kernel / faults: 323 minor
10-18 19:06:44.574: E/ActivityManager(58):   d.process.media: 0% = 0% user + 0% kernel / faults: 268 minor
10-18 19:06:44.574: E/ActivityManager(58):   com.android.mms: 0% = 0% user + 0% kernel / faults: 92 minor 1 major
10-18 19:06:44.574: E/ActivityManager(58):   id.defcontainer: 0% = 0% user + 0% kernel / faults: 78 minor
10-18 19:06:44.574: E/ActivityManager(58):   s:FriendService: 0% = 0% user + 0% kernel / faults: 77 minor
10-18 19:06:44.574: E/ActivityManager(58):   m.android.email: 0% = 0% user + 0% kernel / faults: 98 minor
10-18 19:06:44.574: E/ActivityManager(58):   com.svox.pico: 0% = 0% user + 0% kernel / faults: 26 minor
10-18 19:06:44.574: E/ActivityManager(58): TOTAL: 8% = 5% user + 2% kernel + 0% softirq
10-18 19:06:44.604: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.624: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.624: W/WindowManager(58): No window to dispatch pointer action 0
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 0
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 0
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 0
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 0
10-18 19:06:44.634: W/WindowManager(58): No window to dispatch pointer action 1
10-18 19:06:44.734: W/KeyCharacterMap(58): No keyboard for id 0
10-18 19:06:44.734: W/KeyCharacterMap(58): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-18 19:06:45.014: I/ARMAssembler(58): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x3250d0:0x32518c] in 326428 ns 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:45:57.430

使用 AsyncTask 并从您的 UI 线程中移除您长时间运行的任务。阅读下面的帖子以获取更多具体信息

[http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)

[http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# javascript - 为缩略图创建活动状态

> ID：12956027
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:23.760
> 
> 标签：javascript, jquery, navigation, image-gallery

我在我的网站上使用全屏图片库，但是我正在尝试设置缩略图的样式，以使我能够真正浏览不同的图像。缩略图是使用 JS 文件生成的。我设法将它们设置为具有正常和悬停状态的三角形。

我的问题，我想为此添加一个 ACTIVE ，当显示某些图像时显示一个黑色三角形。我怎样才能做到这一点？

**JS文件**

```
<script type="text/javascript">
    var slider;
    var images = [
        "images/productie/1.jpg",
        "images/productie/2.jpg",
        "images/productie/3.jpg",
        "images/productie/4.jpg",
        "images/productie/5.jpg"
    ];
    var index = 0;
    var transitionSpeed = 500;
    var imageIntervals = 5000;
    var startIntervals;
    var intervalSetTime;
    var contentOpen = false;

    $(document).ready(function(){

        slider = $('#slider1').bxSlider({
            mode: 'fade',
            controls: false,
            pause: imageIntervals
        });

        for (i=0;i<=images.length - 1;i++){
            $('#thumb-container').append('<a href="javascript:goToContent('+ i +')"><img src="'+ images[i] +'?size=thumb" alt="Image '+ i +'" /></a>');
        }

        $(function() {

            $.preload(images, {
                init: function(loaded, total) {
                    $("#indicator").html("<img src='images/load.gif' />");          
                },

                loaded_all: function(loaded, total) { 
                    $('#indicator').fadeOut('slow', function() {
                        $('#left-side').fadeIn('slow');
                        $('#thumb-container').fadeIn('slow');

                        $.backstretch(images[index], {speed: transitionSpeed});

                        startIntervals = function (){
                            intervalSetTime = setInterval(function() {
                            index = (index >= images.length - 1) ? 0 : index + 1;
                            $.backstretch(images[index]);
                            slider.goToNextSlide()
                        }, imageIntervals)};

                        startIntervals();                   
                    });
                }
            });
        });
    });

    function goToContent(slideNum){
        clearInterval(intervalSetTime);
        index = slideNum;
        $.backstretch(images[index]);
        slider.goToSlide(slideNum);
        if (contentOpen == false){
            startIntervals();
        }
    };

    function showContent(){
        $('.content-bg').fadeIn('slow');
        clearInterval(intervalSetTime);
        contentOpen = true;
    };
    function closeContent(){
        $('.content-bg').fadeOut('slow');
        startIntervals();
        contentOpen = false;
    };
    </script> 
```

**CSS**

```
#thumb-container{
    display:none;
}

#thumb-container img{
    float:left;
    border:0;
    width: 0; 
    height: 0;
    margin:2px;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
    border-left: 20px solid  #fff;
}

#thumb-container img:hover{
    float:left;
    border:0;
    width: 0; 
    height: 0;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
    border-left: 20px solid  #000;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:26:06.010

在对问题的最后澄清评论中，我相信您应该`displayed`使用 JavaScript 从缩略图中添加和删除相应的 CSS 类（例如）。并将最后一个规则选择器修改为：

```
#thumb-container img:hover, #thumb-container img.displayed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:00:02.407

**Shefqet Avdullau**回答了问题

 ***Javascript*

```
var slider;
var images = [
    "IMAGES LINK",
    "IMAGES LINK",
    "IMAGES LINK"
];
var index = 0;
var transitionSpeed = 500;
var imageIntervals = 5000;
var startIntervals;
var intervalSetTime;
var contentOpen = false;

$(document).ready(function(){

    slider = $('#slider1').bxSlider({
        mode: 'fade',
        controls: false,
        pause: imageIntervals
    });

    for (i=0;i<=images.length - 1;i++){
        $('#thumb-container').append('<a href="javascript:goToContent('+ i +')"><img src="'+ images[i] +'?size=thumb" alt="Image '+ i +'" /></a>');
    }

    $(function() {

        $.preload(images, {
            init: function(loaded, total) {
                $("#indicator").html("<img src='images/load.gif' />");            
            },

            loaded_all: function(loaded, total) {
                $('#indicator').fadeOut('slow', function() {
                    $('#left-side').fadeIn('slow');
                    $('#thumb-container').fadeIn('slow');

                    /* added by Shefqet Avdullau */
                    $('#thumb-container a').removeClass('current_anchor').eq(index).addClass('current_anchor');
                    $.backstretch(images[index], {speed: transitionSpeed});

                    startIntervals = function (){
                        intervalSetTime = setInterval(function() {
                        index = (index >= images.length - 1) ? 0 : index + 1;

                        /* added by me */
                        $('#thumb-container a').removeClass('current_anchor').eq(index).addClass('current_anchor');

                        $.backstretch(images[index]);
                        slider.goToNextSlide()
                    }, imageIntervals)};

                    startIntervals();                    
                });
            }
        });
    });
});

function goToContent(slideNum){
    clearInterval(intervalSetTime);
    index = slideNum;
    /* added by Shefqet Avdullau */
    $('#thumb-container a').removeClass('current_anchor').eq(index).addClass('current_anchor');

    $.backstretch(images[index]);
    slider.goToSlide(slideNum);
    if (contentOpen == false){
        startIntervals();
    }
};

function showContent(){
    $('.content-bg').fadeIn('slow');
    clearInterval(intervalSetTime);
    contentOpen = true;
};
function closeContent(){
    $('.content-bg').fadeOut('slow');
    startIntervals();
    contentOpen = false;
}; 
```

*CSS*

```
/* THUMB SECTION */

#thumb-container{
    display:none;
}

#thumb-container img{
    float:left;
    border:0;
    width: 0;
    height: 0;
    margin:2px;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
    border-left: 20px solid  #fff;
}

/* added by Shefqet Avdullau */

#thumb-container a.current_anchor img,

#thumb-container img:hover,
#thumb-container img.displayed {
    float:left;
    border:0;
    width: 0;
    height: 0;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;
    border-left: 20px solid  #6bcade;
} 
```**

# java - 使用“keepalive”连接从 RESTful Web 服务轮询数据

> ID：12956030
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:31.983
> 
> 标签：java, android, http, rest

我正在开发一个从宁静的网络服务中获取数据的安卓应用程序。

我正在考虑实现这一点的最佳方法，我的代码正在运行，但我确信它可以被优化。这是我当前的代码状态：我正在使用调度程序从服务调用 restResource。不好的部分是在每个请求上打开和关闭连接。（其余资源保留实时数据（我必须每秒获取一次），当它为空时，它返回一个空数组）

```
 httpResponse = client.execute(request);
        responseCode = httpResponse.getStatusLine().getStatusCode();
        message = httpResponse.getStatusLine().getReasonPhrase();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();

            response = convertStreamToString(instream);

            instream.close();
        } 
```

如何利用响应返回的keepalive标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:50:41.407

我在使用长轮询之前已经这样做了，在这种轮询中，我的 RESTful 调用会阻塞，直到出现超时或需要回复。无论哪种方式，调用客户端都会在任一响应（超时或有效）时再次调用 RESTful 服务。

我不确定您如何使用 keepalive 标头，但看起来您要做的就是发送它，然后简单地保持连接打开。在您的服务器端 java 代码中，您将获得响应的输出缓冲区并开始向下发送内容。在客户端，获取输入缓冲区（不知道这在 Android 中是如何发生的，但我的印象是它的 Java 代码，所以有很多方法可以做到这一点）并开始阅读。在某些时候，我认为您需要强制关闭连接，只是因为您不想无限期地保持打开状态。

再说一次，我从来没有这样尝试过，所以我不知道。另外，我不确定这是否违反了 RESTful 服务的一些潜规则。我从来没有读过任何与这种方法相矛盾的东西。

# ios - 在目标 c 示例中处理异常

> ID：12956033
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:37:37.700
> 
> 标签：ios, ios4, xcode4, objective-c-blocks

> **可能重复：**
> [如何在 iOS 中捕获异常？](https://stackoverflow.com/questions/8584687/how-to-catch-exception-in-ios)

如何在 Xcode 中实现 try catch 异常处理以处理标准异常操作，例如数字除以零。可以提供一些示例....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:39:33.657

```
@try {
    ...
}
@catch (CustomException *ce) {   // 1
    ...
}
@catch (NSException *ne) {       // 2
    // Perform processing necessary at this level.
    ...

}
@catch (id ue) {
    ...
}
@finally {                       // 3
    // Perform processing necessary whether an exception occurred or not.
    ...
} 
```

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocExceptionHandling.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocExceptionHandling.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:42:00.510

在 Objective-c 中，Try/catch 似乎不受欢迎。通常一个 NSError 参数是通过引用传递的。有关示例代码，请参阅[本教程](http://www.cimgf.com/2008/04/04/cocoa-tutorial-using-nserror-to-great-effect/)。

# c# - 将具有 3 级的嵌套 foreach 循环转换为具有 n 级的递归

> ID：12956034
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:41.303
> 
> 标签：c#, recursion

我想将以下代码转换为处理 3 个以上的 foreach 级别。

```
internal static void CreateLevel(LevelObject levelObject)
{
   foreach(LevelObject l1 in levelObject.LevelObjects)
   {
      foreach(LevelObject l2 in l1.LevelObjects)
      {
         foreach(LevelObject l3 in l2.LevelObjects)
         {
            AddEntities(l3);
         }
         AddEntities(l2);
      }
      AddEntities(l1);
   }
} 
```

每个 LevelObject 都有一个子级对象集合、一个实体集合和一个父级对象。我需要它来将对象结构转换为过滤器。任何人都知道如何转换它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:40:32.283

最简单的方法是递归：

```
internal static void CreateLevel(LevelObject levelObject) {
    foreach (var l in levelObject.LevelObjects) {
        CreateLevel(l);
        AddEntities(l);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:41:58.473

使用您的代码...

```
internal static void CreateLevel(LevelObject levelObject)
{
   foreach(LevelObject l1 in levelObject.LevelObjects)
   {
      CreateLevel(l1.LevelObjects);
      AddEntities(l1);
   }
} 
```

将实现相同的目标

# java - GSSException：[..] 不支持/启用具有 HMAC SHA1-96 的加密类型 AES256CTS 模式

> ID：12956037
> 
> 赞同：5
> 
> 时间：2012-10-18T13:37:45.173
> 
> 标签：java, aes, kerberos

在将我们的域用户设置为支持 Kerberos 令牌（Windows Server 2008R2）的 AES 加密后，在 Web 应用程序服务器端，我们得到以下异常：

> GSSException：在 GSS-API 级别未指定故障（机制级别：不支持/启用具有 HMAC SHA1-96 的加密类型 AES256CTS 模式）

奇怪的是我们有 Java 6 (1.6.0_27) ，这意味着应该支持 AES，根据这个文档：[http ://docs.oracle.com/javase/6/docs/technotes/guides/security/jgss/jgss-特征.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jgss/jgss-features.html)

我们的 Web 应用程序或 Java 或第三方缺少什么想法？我们正在使用 Spring 安全性 Kerberos 扩展（只需进行最少的代码修改以适应我们当前的 Spring 2.x 版本和额外的身份验证要求）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T13:52:33.810

**编辑**（2017-05-06）：即将推出的 JDK 版本将包含此内容。只需要设置一个配置参数，请参阅[JDK-8157561](http://bugs.java.com/view_bug.do?bug_id=JDK-8157561)。

点击此[链接 - Java SE 下载](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，向下滚动并下载适用于您的特定 JDK 版本的 Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files，然后按照本教程中标题为：[5.4.2 的过程进行操作。Kerberos 和无限强度策略](https://cwiki.apache.org/confluence/display/DIRxSRVx11/5.4.2.+Kerberos+and+Unlimited+Strength+Policy)。

基本步骤如下：

1.  找到 JDK 的安全目录（下面显示 Unix）：

    ```
    $ locate 'jre/lib/security' | grep 'lib/security$'
    /usr/java/jdk1.7.0_17/jre/lib/security
    /usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre/lib/security
    /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/security
    /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre/lib/security 
    ```

2.  注意到上述情况，我们需要将下载的 JCE .jar 文件添加到`/usr/java/jdk1.7.0_17/jre/lib/security`.

3.  JCE .zip 文件包括以下内容（显示 JDK 1.7 的 JCE）：

    ```
    $ ls -l UnlimitedJCEPolicy
    total 16
    -rw-rw-r-- 1 root root 2500 May 31  2011 local_policy.jar
    -rw-r--r-- 1 root root 7289 May 31  2011 README.txt
    -rw-rw-r-- 1 root root 2487 May 31  2011 US_export_policy.jar 
    ```

4.  这些是与 JDK 捆绑在一起的版本（同样是 1.7）：

    ```
    $ ls -l /usr/java/jdk1.7.0_17/jre/lib/security/*.jar
    -rw-r--r--. 1 root root 2865 Mar  1  2013 /usr/java/jdk1.7.0_17/jre/lib/security/local_policy.jar
    -rw-r--r--. 1 root root 2397 Mar  1  2013 /usr/java/jdk1.7.0_17/jre/lib/security/US_export_policy.jar 
    ```

5.  我们需要将它们移开并用 JCE .zip 文件中包含的版本替换它们。我通常会执行以下操作：

    ```
    $ pushd /usr/java/jdk1.7.0_17/jre/lib/security/
    /usr/java/jdk1.7.0_17/jre/lib/security ~

    $ mkdir limited
    $ mv *.jar limited/

    $ cp ~/UnlimitedJCEPolicy/*.jar .
    $ ls -l *.jar
    -rw-r--r-- 1 root root 2500 Jun 25 12:50 local_policy.jar
    -rw-r--r-- 1 root root 2487 Jun 25 12:50 US_export_policy.jar 
    ```

6.  重新启动任何使用 JDK（Tomcat 等）的程序。

# powershell - 通过电子邮件发送 powershell 输出

> ID：12956040
> 
> 赞同：0
> 
> 时间：2012-10-18T13:37:55.200
> 
> 标签：powershell

我有一个 powershell 脚本，用于`Write-Output`显示每个循环的结果。我需要通过电子邮件发送输出，之前使用 VB 执行此操作`sendemail.exe`，如下所示

```
cscript //nologo script.vbs 2>&1 | sendEmail.exe -t mail@blah.co.uk -u "subject blah" -f mail@blah.co.uk -s smtpserver1.mail.co.uk 
```

我无法使用 powershell 进行此操作，因为当我运行我的 .ps1 脚本时，它会将输出写入当前控制台并且不会将其通过管道传输到 sendemail.exe 应用程序。我需要不同的 cmdlet 还是将电子邮件功能写入脚本更简单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:47:08.977

根本不要将 sendmail.exe 与 PowerShell 一起使用。在 PowerShell 2.0 及更高版本中，在脚本本身中使用[Send-MailMessage 。](http://technet.microsoft.com/library/hh849925.aspx)将您的“输出”捕获到一个变量以与`-Body`参数一起传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:46:32.483

如果您在 powershell v2 或 v3 中，为什么不使用这个本机 cmdlet？

[`send-mailmessage`](http://technet.microsoft.com/en-us/library/hh849925.aspx)

# android - Android Actionbar + FragmentActivity

> ID：12956045
> 
> 赞同：3
> 
> 时间：2012-10-18T13:38:12.500
> 
> 标签：android

在我的应用程序中，我有标签，但现在我需要添加 Sherlock Actionbar 我知道我需要使用扩展 SherlockActivity 但早期我有 FragmentActivity 如何修复它？

```
public class MainActivity extends SherlockActivity { 
```

现在我在这里有错误，因为我没有 FragmentActivity。

```
mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager()); 
```

错误：

```
The method getSupportFragmentManager() is undefined for the type MainActivity 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T13:44:16.327

我`SherlockFragmentActivity`相信，你可以从那里扩展

# asp.net-mvc-4 - ServiceStack WSDL 不包括所有类型

> ID：12956046
> 
> 赞同：3
> 
> 时间：2012-10-18T13:38:16.010
> 
> 标签：asp.net-mvc-4, wsdl, servicestack

我在我的 MVC 应用程序中创建了一个 Web 服务。所有合约都使用相同的命名空间。`AssemblyInfo.cs`还映射`ContractNameSpace`with `ClrNameSpace`。

生成的 WSDL 没有定义我的合同类型。

这是我使用 ServiceStack 的第二个项目。然而，结果是不同的。为了让 ServiceStack 正确生成 WSDL，合约是否必须驻留在不同的程序集中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:21:25.707

该问题已在最新的 ServiceStack 版本中得到修复：[https ://github.com/ServiceStack/ServiceStack/issues/306](https://github.com/ServiceStack/ServiceStack/issues/306)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:53:36.587

确保您没有使用像 WCFStorm 这样的狡猾工具。即使使用当前的 ServiceStack 版本，我也遇到了同样的问题。我切换到soapUI，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T23:12:01.220

WSDL 和 XSD 中的类型由您的服务中使用的请求 + 响应 DTO 确定，即它们需要被您的服务使用才能包含在内。

还要确保通读[SOAP 限制](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)以确保没有遗漏任何内容。

如果您仍然认为这是一个问题，请通过显示问题的 gist 或 pull-request 提交一个独立的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T21:14:44.143

您的问题与我遇到的问题相同[，](https://stackoverflow.com/questions/13609219/response-and-dto-objects-missing-from-xsd)因此我将在此处发布我的解决方案：

我已经下载了源代码并自己进行了一些调查。我不确定此更改有多近，但似乎为了将您的 DTO 和响应对象包含在 wsdl 中，您需要添加一个查询字符串，如“？includeAllTypes = true”。

我还使用了 ServiceStack BasicAuthProvider 设置，它导致 AssignRoles 和 UnAssignRoles 自动添加到服务中。这些调用的请求和响应对象仍然无法进入 wsdl 并导致“添加服务引用”失败。幸运的是，我们没有使用它们，所以如果我能找到另一个配置设置来删除它们，它们应该都能正常工作。

# visual-studio - 块开发服务器窗口

> ID：12956053
> 
> 赞同：0
> 
> 时间：2012-10-18T13:38:22.140
> 
> 标签：visual-studio, visual-studio-2012, webdev.webserver

有什么办法可以避免开发服务器的窗口吗？（不停止或避免运行开发服务器，只是窗口）。

在 Visual Studio 2010（及之前）中，它仅在开发服务器启动时出现。现在，在 Visual Studio 2012 中，每次项目启动时都会打开它，无论开发服务器是否已经启动并且您是否已将其关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:49:12.140

我发现我可以使用 IIS Express 运行项目。当我们希望能够访问从其他 PC 运行的项目时，它也会使我们的生活更轻松。

在 Visual Studio 2012 中，它已经安装（实际上是在其中启动的项目的默认设置）。使用 Visual Studio 2010 可以安装它（[见帖子](https://stackoverflow.com/questions/3355138/developing-in-visual-studio-2010-with-the-new-iis-express-web-server)）。

# openlayers - OpenLayers 发送 GET 请求 onSelect 获取特征图像，降低性能

> ID：12956056
> 
> 赞同：0
> 
> 时间：2012-10-18T13:38:42.983
> 
> 标签：openlayers

我的代码工作得非常好，除了每次我单击/悬停在“标记”上时，openLayer 都会尝试从我的本地服务器检索一些图像（.png）。这是我的代码，没有直接指定图片。我不确定要覆盖什么来禁止这种行为：

这是我得到“onSelect”的错误：

```
GET http://localhost:8888/img/cloud-popup-relative.png 404 (Not Found) 
```

这是我的代码。我希望有人可以提供帮助，因为重复的 GET 请求会破坏性能！

```
var lonlat = convertProjectionToSphere(location);
    console.log(lonlat);
    var pointFeatures = [];

    var pointGeometry = new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat);
    var pointFeature = new OpenLayers.Feature.Vector(
        pointGeometry,
        null,
        {
            pointRadius: 16,
            fillOpacity: 0.7,
            externalGraphic:'img/mapIcons/Multi-Wave-test.png'
        });
    pointFeatures.push(pointFeature);

    // Add features to the layer
    var pointLayer = map.getLayer('Vectors');
    pointLayer.addFeatures(pointFeatures);

    // Add select feature control required to trigger events on the vector layer.
    var selectControl = new OpenLayers.Control.SelectFeature(pointLayer, {
        hover: true,
        onSelect: function(feature) { // last point in my code from the stack trace
            var layer = feature.layer;
            feature.style.fillOpacity = 1;
            feature.style.pointRadius = 20;
            //layer.drawFeature(feature);
            var content =   '<div style="background-color:white;"><strong>Feature:</strong>'+
                            '<br/>' + feature.id +
                            '<br/><br/><strong>Location:</strong>'+
                            '<br/>' + feature.geometry +'</div>';
            var popup = new OpenLayers.Popup.FramedCloud(
                            feature.id+"_popup",
                            feature.geometry.getBounds().
                            getCenterLonLat(),
                            new OpenLayers.Size(250, 100),
                            content,
                            null,   // anchor
                            true,   // closeBox exists
                            null); //closeBoxCallback
            feature.popup = popup;
            map.addPopup(popup);
        },
        onUnselect: function(feature) {
            var layer = feature.layer;
            feature.style.fillOpacity = 1;
            feature.style.pointRadius = 16;
            feature.renderIntent = null;
            layer.drawFeature(feature);
            map.removePopup(feature.popup);
        }
    });
    map.addControl(selectControl);
    selectControl.activate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:53:50.927

您正在使用“ [FramedCloud](http://dev.openlayers.org/docs/files/OpenLayers/Popup/FramedCloud-js.html) ”弹出窗口。OpenLayers 想要加载的图像是该弹出窗口的边界。图像包含在 OpenLayers-distribution 附带的“img”文件夹中。您可以通过 OpenLayers.ImgPath 更改图像文件夹的路径。这是一个[链接](http://dev.openlayers.org/docs/files/OpenLayers-js.html#OpenLayers.ImgPath)。或者，您可以使用更简单的弹出样式，例如锚定。我认为它不使用图像作为框架。

# java - 焦点丢失后未调用 JavaFX onInputMethodTextChanged

> ID：12956061
> 
> 赞同：5
> 
> 时间：2012-10-18T13:38:56.027
> 
> 标签：java, javafx-2, javafx

我在 mi fxml 文件中得到了类似的东西：

```
<TextField fx:id="id" onInputMethodTextChanged="#foo" prefWidth="200.0" promptText="" /> 
```

但是当我运行它时，我 TAB 或鼠标移出 TextField 控件并且没有任何反应（“foo”没有被调用）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:04:59.773

的`onInputMethodTextChanged`属性仅在平台支持的`TextField`情况下才适用。`ConditionalFeature.INPUT_METHOD`要检查这个尝试

```
Platform.isSupported(ConditionalFeature.INPUT_METHOD) 
```

如果您在用户专注于文本字段时尝试做一些工作，请尝试

```
textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
    @Override
    public void changed(ObservableValue<? extends Boolean> observable, Boolean oldValue, Boolean newValue) {
        if(!newValue) {
            System.out.println("Focusing out from textfield");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T11:15:31.187

我遇到了同样的问题，即使是 Platform.isSupported(ConditionalFeature.INPUT_METHOD) == true

我用 setOnInputMethodTextChanged 设置的事件处理程序没有触发。

我担心使用 TextField.textProperty.addListener(ChangeListener listener) 因为 ChangeListener.change() 本身并不能让您轻松访问触发事件的源节点。

我使用以下方法解决了问题：

```
final TextField field = new TextField("field");
field.textProperty.addListener(new ChangeListener() {

 public void changed(ObservableValue observable, Object oldValue, Object newValue) {

   dosomethingwith(field);

}

}); 
```

将字段声明为“最终”允许我访问 ChangeListener.changed() 中更改事件的源节点

# haskell - 功能依赖与类型族

> ID：12956063
> 
> 赞同：3
> 
> 时间：2012-10-18T13:39:00.787
> 
> 标签：haskell, functional-dependencies, type-families

我正在开发一个用于运行人工生命实验的框架，并且我正在尝试使用类型族而不是函数依赖项。类型族似乎是 Haskellers 中的首选方法，但我遇到了一种情况，函数依赖似乎更合适。我错过了一个技巧吗？这是使用类型族的设计。（此代码编译正常。）

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

import Control.Monad.State (StateT)

class Agent a where
  agentId :: a -> String
  liveALittle :: Universe u => a -> StateT u IO a
  -- plus other functions

class Universe u where
  type MyAgent u :: *
  withAgent :: (MyAgent u -> StateT u IO (MyAgent u)) -> 
    String -> StateT u IO ()
  -- plus other functions

data SimpleUniverse = SimpleUniverse
  {
    mainDir :: FilePath
    -- plus other fields
  }

defaultWithAgent :: (MyAgent u -> StateT u IO (MyAgent u)) -> String -> 
  StateT u IO ()
defaultWithAgent = undefined -- stub

-- plus default implementations for other functions

--
-- In order to use my framework, the user will need to create a typeclass
-- that implements the Agent class...
--

data Bug = Bug String deriving (Show, Eq)

instance Agent Bug where
  agentId (Bug s) = s
  liveALittle bug = return bug -- stub

--
-- .. and they'll also need to make SimpleUniverse an instance of Universe
-- for their agent type.
--

instance Universe SimpleUniverse where
  type MyAgent SimpleUniverse = Bug
  withAgent = defaultWithAgent     -- boilerplate
  -- plus similar boilerplate for other functions 
```

有没有办法避免强迫我的用户编写最后两行样板文件？与下面使用fundeps 的版本相比，这似乎让我的用户更简单。（UndecideableInstances 的使用可能是一个危险信号。）（此代码也可以编译。）

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies, FlexibleInstances,
    UndecidableInstances #-}

import Control.Monad.State (StateT)

class Agent a where
  agentId :: a -> String
  liveALittle :: Universe u a => a -> StateT u IO a
  -- plus other functions

class Universe u a | u -> a where
  withAgent :: Agent a => (a -> StateT u IO a) -> String -> StateT u IO ()
  -- plus other functions

data SimpleUniverse = SimpleUniverse
  {
    mainDir :: FilePath
    -- plus other fields
  }

instance Universe SimpleUniverse a where
  withAgent = undefined -- stub
  -- plus implementations for other functions

--
-- In order to use my framework, the user will need to create a typeclass
-- that implements the Agent class...
--

data Bug = Bug String deriving (Show, Eq)

instance Agent Bug where
  agentId (Bug s) = s
  liveALittle bug = return bug -- stub

--
-- And now my users only have to write stuff like...
--

u :: SimpleUniverse
u = SimpleUniverse "mydir" 
```

编辑：在试图展示一个简单的例子时，我省略了我设计的部分动机。

Universe 类扮演的#1 角色是序列化和反序列化代理，所以我认为它必须与 Agent 类相关联。它也有`readAgent`和`writeAgent`功能。但是，我想确保用户在修改后不会意外忘记编写代理，因此我没有导出这些函数，而是提供了一个`withAgent`处理所有事情的函数。该`withAgent`函数有两个参数：一个在代理上运行的函数，以及在其上运行程序的代理的名称（唯一 ID）。它读取包含该代理的文件，运行程序，然后将更新的代理写回到文件中。（我可以改为导出 readAgent 和 writeAgent 函数。）

还有一个`Daemon`类负责为每个代理分配公平的 CPU 份额。因此，在守护进程的主循环中，它会在 Universe 中查询当前的代理列表。然后，对于每个代理，它调用`withAgent`函数来运行该`liveAlittle`代理的程序。守护进程不关心代理是什么类型。

该函数还有另一个用户`withAgent`：代理本身。在智能体的`liveALittle`函数内部，它可能会在宇宙中查询一个智能体列表，以便找到一个可能的交配伙伴。它将调用该`withAgent`函数来运行某种交配函数。显然，一个代理只能与同一物种（类型类）的另一个代理交配。

编辑：这是我想我会使用的解决方案。不是类型族或函数依赖项，但现在我必须做一些事情，以便编译器知道`liveALittle`要调用哪个。我这样做的方法是让用户提供正确`liveALittle`的参数。

```
{-# LANGUAGE DeriveGeneric #-}

import Control.Monad.State (StateT)
import Data.Serialize (Serialize)
import GHC.Generics (Generic)

class Agent a where
  agentId :: a -> String
  liveALittle :: Universe u => a -> StateT u IO a
  -- plus other functions

class Universe u where
  -- Given the name of an agent, read it from a file, and let it run.
  withAgent :: (Agent a, Serialize a) => 
    (a -> StateT u IO a) -> String -> StateT u IO ()
  -- plus other functions

-- This method will be called by a daemon
daemonTask :: (Universe u, Agent a, Serialize a) => 
  (a -> StateT u IO a) -> StateT u IO ()
daemonTask letAgentLiveALittle = do
  -- do some stuff
  withAgent letAgentLiveALittle "a"
  -- do some other stuff

data SimpleUniverse = SimpleUniverse
  {
    mainDir :: FilePath
    -- plus other fields
  }

instance Universe SimpleUniverse where
  withAgent = undefined -- stub
  -- plus implementations for other functions

--
-- And now my users only have to write stuff like...
--

data Bug = Bug String deriving (Show, Eq, Generic)

instance Serialize Bug

instance Agent Bug where
  agentId (Bug s) = s
  liveALittle bug = return bug -- stub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T18:15:26.547

## 类型族与具有功能依赖性的多参数类型类

要回答标题中的问题，函数依赖往往是相当违反直觉的，所以让它们工作更让人头疼。类型族更容易使用，对函数式程序员来说也更直观，我建议你总是先尝试使用它们（除非你绝对需要额外的类型参数来创建你无法控制的其他类的实例）。

就您而言，我不确定您是否也需要，我相信这就是您遇到问题的原因。

## 你的 Universe 类和实例是怎么说的？

两个类定义都将用户绑定到使用每个 Universe 一次，而他们可能希望重用具有不同代理类型的 Universe。

让我们看看你的 Universe 实例中发生了什么：

*   Type Families：你通过编写大量样板来创建一个实例，只是重用一组标准的函数。这表明您不需要知道 MyAgent 的特定类型来处理它。任何功能似乎都没有代理上下文。嗯。
*   功能依赖：您使用`instance Universe SimpleUniverse a where...`并神奇地`Agent Bug`为您提供了一个工作宇宙。那是因为您的实例声明使用了类型`a`，所以在等式的匹配端，没有使用任何关于`a`.

这让我怀疑你不需要将宇宙和代理如此紧密地联系起来。建议1：是否可以有两个独立但链接的类：

```
class Universe u where
   withAgents :: Agents a => (a -> StateT u IO a) -> String -> StateT u IO () 
```

在这里，您是说 Universe 必须接受*任何*代理类型，而不是一种*特定的*代理类型。正如您所指出的，我已将 Agent 重命名为 Agents 以向用户建议他们使用它来表示联合类型中的*所有代理类型。*

```
class Agents a where
   agentId :: a -> String
   liveALittle :: Universe u => a -> StateT u IO a 
```

在这里，您是说 Agents 类型必须能够与任何类型的 Universe 交互。

## 宇宙的本质

您觉得可以编写默认声明的事实，例如

```
defaultWithAgent :: (MyAgent u -> StateT u IO (MyAgent u)) -> String -> StateT u IO () 
```

或声明一个不使用任何有关 Bug 的信息的实例：

```
instance Universe SimpleUniverse a where
    withAgent = ... 
```

建议您可以`withAgent`在不参考类型`u`或`a`.

建议 2：您可以完全放弃 Universe 类，转而使用 TheUniverse 类型，因此您可以定义

```
withAgent :: (Agents a => a -> StateT TheUniverse IO a) -> String -> StateT TheUniverse IO () 
```

我不相信这会适合你，或者......

建议 3：完全放弃 Universe 类限制，`withAgent`使用*任何*类型。

```
withAgent :: (Agents a => a -> StateT u IO a) -> String -> StateT u IO () 
```

如果不知道您还需要什么其他功能，很难说什么是最好的，但希望其中之一可能会有所帮助。我只提出建议 2 和 3，因为您似乎在说默认定义总是有效的。也许实际上有些函数需要在 Universe 类中，因为它们使用的是 Universe 的结构，而不是 Agents 的内部细节。也许其他人属于代理，因为尽管他们使用 Universe，但他们只使用类函数，而不是内部细节。无论如何，我们有：

## 总体建议：

仔细考虑功能需要的代理或 Universe 的详细程度。如果两者兼而有之，也许您可​​以重构为两个单独的辅助函数，因此没有函数需要知道 Universe 和代理的内部运作。这样，您就不需要具有两种类型的类型类。不需要 TypeFamilies 或 FunDeps。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T16:58:28.137

我认为你把事情复杂化了。支持宇宙中的每一种演员并不复杂，它不*那么**复杂*。

像这样写你的`Universe`类：

```
class Universe u where
  withAgent :: Agent a => (a -> StateT u IO a) -> String -> StateT u IO () 
```

请注意，您不必使用函数依赖项或多参数类型类，因为`a`不必在类头中引入范围；它被纳入范围`Agent a => ...`。这本质上也是您在功能依赖版本中所做的事情，因为即使您使用`u a | u -> a`，它`a`实际上并没有在类主体中使用；相反，`Agent a => ...`阴影是外部的`a`。

# c# - Unity MVC3 控制器构造函数问题

> ID：12956065
> 
> 赞同：3
> 
> 时间：2012-10-18T13:39:21.197
> 
> 标签：c#, asp.net-mvc-3, unity-container

> **可能重复：**
> [Unity IOC 容器以及如何解析同一接口的不同实例](https://stackoverflow.com/questions/2343532/unity-ioc-container-and-how-to-resolve-different-instances-of-the-same-interface)

我有一个控制器构造函数，它有两个实现下面所示的相同接口的参数。我曾尝试在 Unity 中注册这些类型，如下所示，但我遇到了问题。

***控制器构造函数***

```
public ControlController(IAdapter daveAdapter, IAdapter bobAdapter)
{
        DaveAdapter = daveAdapter;
        BobAdapter = bobAdapter;
} 
```

***统一注册***

```
 container
.RegisterType<IAdapter, DaveAdapter>()
.RegisterType<IAdapter, BobAdapter>() 
```

构造控制器时，两个适配器都被解析为 DaveAdapter，而不是一个 Dave 和一个 Bob。如何告诉 unity 区分两个适配器，以便控制器具有每种类型的适配器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:47:23.733

您可以在注册控制器中使用`InjectionConstructor`和 对象：`ResolvedParameter`

```
.RegisterType<IAdapter, DaveAdapter>()
.RegisterType<IAdapter, BobAdapter>("Bob")

.RegisterType<ControlController, ControlController>(
    new InjectionConstructor(
      new ResolvedParameter<IAdapter>(),
      new ResolvedParameter<IAdapter>("Bob")
)) 
```

# html - CSS 缓入全屏

> ID：12956066
> 
> 赞同：0
> 
> 时间：2012-10-18T13:39:22.190
> 
> 标签：html, css

我有一个包含图像的大小的黑色背景 div。

```
 <div id="Banner">
  <img onclick="expand();" src="hola.jpg">
  </div>

  #Banner {
    position:relative;
    height:50px;
    width:50px;
    margin:0 auto;
    background-color:#000000;
    -webkit-transition: all 0.5s ease-in-out 0.5s;
    -moz-transition: all 0.5s ease-in-out 0.5s;
    -o-transition: all 0.5s ease-in-out 0.5s;
    transition: all 0.5s ease-in-out 0.5s;
  }

<script type="text/javascript">
  function expand(){
    document.getElementById('Banner').style['height'] = '250';
    document.getElementById('Banner').style['width'] = '250';
  }
</script> 
```

所以当用户点击图片时，div 会转换为 250、250。

我的问题是，我希望它过渡到全屏。以下 javascript 函数确实扩展到全屏，但没有出现过渡效果。我需要从没有 jquery 的 javascript 代码中完成。

```
 function expand(){
    document.getElementById('Banner').style['position'] = 'absolute';
    document.getElementById('Banner').style['height'] = '100%';
    document.getElementById('Banner').style['width'] = '100%';
    document.getElementById('Banner').style['top'] = '0';
    document.getElementById('Banner').style['left'] = '0';
  } 
```

请指教。

**更新：解决方案**

下面的 Roger 提供了另一种解决方案。如果文档已经滚动并且是另一个地方，这会引起注意。将 div 扩展到整个浏览器屏幕。

```
sz=getSize();        //function returns screen width and height in pixels
currentWidth=200;
currentHeight=200;
scalex=sz.W/currentWidth;
scaley=sz.H/currentHeight;
transx=0-((document.getElementById("Banner").offsetLeft+(currentWidth/2))-(sz.W/2))+document.body.scrollLeft;
transy=0-((document.getElementById("Banner").offsetTop+(cuttentHeight/2))-(sz.H/2))+document.body.scrollTop;
transx = transx.toString();
transy = transy.toString();
document.getElementById("Banner").style['-webkit-transform'] = 'translate('+transx+'px,'+transy+'px) scale('+scalex+','+scaley+')'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:45:26.823

如果，当您指的是全屏时，您指的是实际的浏览器**内部**可用空间，您可以使用此[链接](http://www.javascripter.net/faq/browserw.htm)中的提示来获取值并在分配宽度和高度时使用它们而不是 100%。

让我知道它是否有帮助。

**添加**

链接中的代码以防丢失：

```
function getSize() {
    if (document.body && document.body.offsetWidth) {
       winW = document.body.offsetWidth;
       winH = document.body.offsetHeight;
    }
    if (document.compatMode=='CSS1Compat' &&
        document.documentElement &&
        document.documentElement.offsetWidth ) {
       winW = document.documentElement.offsetWidth;
       winH = document.documentElement.offsetHeight;
    }
    if (window.innerWidth && window.innerHeight) {
       winW = window.innerWidth;
       winH = window.innerHeight;
    }

    return { W: winW, H: winH }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:25:34.170

如果过渡效果是指动画，则必须在希望动画的时间划分对属性的更改；记住：动画及时发生。如果你只是设置

```
document.getElementById('Banner').style['width'] = '100%'; 
```

它将立即执行，您需要在 Y 毫秒内从 X% 到 100%；例如

```
function changeWidth(){
    var initialWidth = document.getElementById('Banner').style['width'];
    var stepValue = (CALCULATE_YOUR_FULL_WIDTH - currentWith)/1000;

    var animate = function(){
        var element = document.getElementById('Banner');
        element.style['width'] = element.style['width'] + stepValue;
    }

    setInterval(animate, 1);
} 
```

我希望你明白这个想法，我没有测试它，所以我不能确定它是否有效。

```
 function changeWidth(){
        var initialWidth = 200;
        var stepValue = (1000 - initialWidth)/1000;

        var currentSize = initialWidth;
        var animate = function(){
            currentSize = currentSize + stepValue;
            var element = document.getElementById('Banner');
            element.style['width'] = (currentSize + stepValue)*1 + 'px';
        };

        setInterval(animate, 1);
    }; 
```

这行得通，您将不得不从它开始工作，因为它只是丑陋：P，请阅读使之成为此功能的 jquery 函数，以了解它是如何做到的，这是一个好的开始。

**编辑**

好吧，我最终做到了。

[http://jsfiddle.net/HJwPF/](http://jsfiddle.net/HJwPF/)

# sql - 带有列表参数和 in 子句的 Postgres 函数

> ID：12956069
> 
> 赞同：13
> 
> 时间：2012-10-18T13:39:31.317
> 
> 标签：sql, function, postgresql, plpgsql

如何创建一个函数，该函数将整数 [] 参数作为参数，并在循环中使用此参数执行带有 IN 子句的查询。在循环中我想执行下一个选择和这个查询的结果我想返回。

像这样的东西：

```
CREATE OR REPLACE FUNCTION function_which_i_want(my_argument integer[]) RETURNS my_schema_and_table[] AS
$BODY$
DECLARE
result my_schema_and_table[];
BEGIN
FOR l IN SELECT * FROM table2 WHERE id in (my_argument) LOOP
SELECT * FROM my_schema_and_table;
END LOOP;
END;
... 
```

我想在循环中获得每个选择的联合。一个巨大的联合结果。这可能吗？请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T18:44:55.717

### PL/pgSQL 函数

填补您问题中的空白，它可能如下所示：

```
CREATE OR REPLACE FUNCTION func1(_arr integer[])
  RETURNS SETOF target_table LANGUAGE plpgsql AS
$func$
DECLARE
    l record;
BEGIN

FOR l IN
    SELECT *
    FROM   lookup_table
    WHERE  some_id = ANY(_arr)
LOOP
    RETURN QUERY
    SELECT *
    FROM   target_table
    WHERE  link_id = l.link_id;
END LOOP;

END
$func$; 
```

*   如果要返回结果，`SELECT * FROM my_schema_and_table;`则必须以不同的方式处理整个函数。将其声明为[`RETURNS SETOF target_table`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)

*   假设您实际上想要 a `SET`of rows from your `target_table`，而不是数组？

*   [`IN`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-IN)将构造重写为[`= ANY(_arr)`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-ANY-SOME). 这就是直接使用数组参数的方式。在内部，PostgreSQL 将 IN 表达式重写为`= ANY()`反正。测试`EXPLAIN ANALYZE`一下自己看看。
    *或者*使用结构 with[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)并加入到结果表中，如[@Clodoaldo 演示](https://stackoverflow.com/a/12956551/939860)。使用长数组会更快。

### 简化为普通 SQL 函数

以上仍然是毫无意义的人为。简化为执行相同操作的 SQL 函数：

```
CREATE OR REPLACE FUNCTION func2(_arr integer[])
  RETURNS SETOF target_table LANGUAGE sql AS
$func$
SELECT t.*
FROM   (SELECT unnest($1) AS some_id) x
JOIN   lookup_table l USING (some_id) 
JOIN   target_table t USING (link_id); -- assuming both tables have link_id
$func$ 
```

称呼：

```
SELECT * FROM func2('{21,31}'::int[]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:04:51.903

```
CREATE OR REPLACE FUNCTION function_which_i_want(my_argument integer[])
RETURNS my_schema_and_table[] AS
$BODY$
DECLARE
result my_schema_and_table[];
BEGIN

for l in 
    select t.*
    from
        table2 t
        inner join
        unnest(my_argument) m(id) on m.id = t.id
loop
    SELECT * FROM my_schema_and_table;
END LOOP;
END; 
```

# javascript - 用图像显示警报？

> ID：12956074
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:39:36.853
> 
> 标签：javascript, android, ios, cordova

我知道如何使用 phonegap 显示自定义警报。我想给它添加一张图片。我可以这样做吗？

我的目标是一个加载对话框，带有一些文本和一个progressbar.gif。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:44:34.887

只需使用加载对话框和progressbar.gif在屏幕中间创建一个隐藏的div，然后您只需使用javascript显示或隐藏它。

如果您想要本机警报，这是不可能的

# nstableview - 如何自定义一个 NSTableView 行 draggingImage？

> ID：12956076
> 
> 赞同：4
> 
> 时间：2012-10-18T13:39:38.743
> 
> 标签：nstableview

目前，当我从 NSTableView 中拖出一行时，该行中的文本是半透明的。相反，我想显示一个代表这一行的半透明图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T11:18:02.263

我建议覆盖`-[NSTableView dragImageForRowsWithIndexes:tableColumns:event:offset:]`（从 OS X 10.4 开始可用）或（从 OS X 10.7 开始可用，用于新的基于视图的表视图）的`draggingImageComponents`属性。`NSTableCellView`

# ruby-on-rails - Rails 部署 101

> ID：12956078
> 
> 赞同：1
> 
> 时间：2012-10-18T13:39:45.910
> 
> 标签：ruby-on-rails, ruby, deployment, heroku, capistrano

我即将部署我的第一个 Rails 应用程序。我被困住了，因为我不知道我到底需要做什么。我知道 Heroku、AWS、Capistrano 等，但不知道它们的具体用途以及它们的好处。

我有点知道一些事情，但由于我没有接受过正规培训并且边走边学，因此所有事情都很模糊和模棱两可。所以基本上我需要有人来解释一下 Rails 部署的大体结构。

像这样的：'要让任何应用程序在 Web 上运行，您需要以下组件......使该组件与 Rails 一起工作的方法如下。替代品是这些。这些都是优点和缺点。没有太多细节，而是一般和全面的 101 指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:23:20.907

您可能会感到困惑的原因是有很多方法可以做到这一点。:D

Heroku 为基本部署提供了最简单的解决方案之一。你不需要 capistrano，只需要 git。（他们提供了一个工具集来协助）。只需 git push heroku master。同样不错的是，heroku 上的简单部署是免费的；您可以在实际需要时支付更多电量。

但是，如果您需要一些 heroku 无法提供的额外功能，则必须在其他地方托管，例如私有虚拟主机。

Capistrano 是一组帮助构建部署环境的方法，有点像 rake 任务。它以非常有条理的方式执行此操作，并允许轻松回滚。您定义主机、它们的角色，然后配方使用 ssh 和 scp 来设置环境。（服务器还必须准备好通过乘客等方式接受 Rails 应用程序）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:20:16.260

Rails 和 Ruby 世界非常嘈杂，所以我理解您的困惑。

归根结底，您需要在**服务器上安装您的 rails****应用程序**。

 **现在，即使是术语*服务器*也可能有点混乱，因为它通常与

1.  远程机器
2.  处理 HTTP 请求的程序。（例如您在计算机上开发并键入**rails s时启动的****webrick 或 Thin**）

 **在您的情况下，您实际上想要一台远程计算机（连接到网络），该计算机正在运行一个称为服务器的程序来处理 HTTP 请求并将这些转发到您的应用程序，这反过来会产生一个请求......

**Heroku**会帮你解决这个问题。（但是 Heroku 增加了几层抽象。所以它不像你有一台计算机坐在 heroku 办公室的某个地方，为你的应用程序服务。） Heroku 使用 git 和 rails 设置起来非常简单。最后，将您的应用程序发送到“远程服务器”所需要做的就是一个简单的**git push。**

阅读[https://devcenter.heroku.com/上的初学者文章](https://devcenter.heroku.com/)

我现在也建议：忘记**Capistrano**。

哦，您可以将**AWS（或者可能是 S3）**视为某种外部硬盘驱动器，您的应用程序可以使用它来存储更​​大的数据（如图像、视频等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T02:21:23.987

我有一个部署指南，其中包含一个支持 Nginx + RVM + Unicorn 的良好 shell 脚本：[deploy_rails](https://github.com/tangramor/deploy_rails)****

# php - 将 utf-8 编码的参数从 PHP 传递给 casper JS

> ID：12956079
> 
> 赞同：1
> 
> 时间：2012-10-18T13:39:47.213
> 
> 标签：php, shell, ubuntu, encoding, casperjs

通过 PHP shell_exec 函数，我使用此代码将“référencement”字作为参数传递

```
shell_exec('casperjs test.js --word='.escapeshellarg('référencement')); 
```

但是在 casperjs 中，当我记录它时，我得到了一些奇怪的字符。在 php 中一切正常。如何在 casperjs 中设置字符集 utf8？或者你如何看待解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:23:27.103

这是我想出的工作代码。

```
shell_exec('LANG=en_US.utf-8; casperjs test.js --word='.escapeshellarg('référencement')); 
```

# wcf - 传出消息的身份检查失败。远程端点的预期 DNS 身份是 XXX

> ID：12956080
> 
> 赞同：6
> 
> 时间：2012-10-18T13:39:51.363
> 
> 标签：wcf, certificate, wif, saml

我遇到了通过证书进行身份验证的 WCF 服务的问题。我得到的错误是外发消息的身份检查失败。远程端点的预期 DNS 身份是 xxx....

我看过很多关于这个的帖子，他们都说将 dns 设置为证书的名称/主题。

```
<identity>
                    <dns value="WcfServer" />
                </identity> 
```

我已经尝试过了，但它不起作用，我还能做什么？

卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T19:57:21.690

DNS 名称应与证书的通用名称 (CN) 匹配。

请参阅其他类似的线程。 [为什么 WCF 会抱怨身份检查失败？](https://stackoverflow.com/questions/1629715/why-does-wcf-complain-over-identity-check-failure)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:04:54.007

您可以检查服务的 WSDL 文件。它会在元素下向您显示服务所期望的身份。例如，像这样，

```
<wsdl:service name="CalculatorService">
  <wsdl:port name="WSHttpBinding_ICalculator_Windows"
    binding="tns:WSHttpBinding_ICalculator_Windows">
    <soap12:address 
      location=
      "http://localhost:8003/servicemodelsamples/service/upnidentity" />
    <wsa10:EndpointReference>
      <wsa10:Address>
        http://localhost:8003/servicemodelsamples/service/upnidentity
      </wsa10:Address>
      <Identity  
        xmlns="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity">
        <Upn>username@contoso.com</Upn>
      </Identity>
    </wsa10:EndpointReference>
  </wsdl:port>
</wsdl:service> 
```

根据服务选择的身份，您可以在客户端端点中设置它。

HTH，阿米特

# c++ - 在 Gtkmm 中创建自定义 IconFactory

> ID：12956081
> 
> 赞同：1
> 
> 时间：2012-10-18T13:39:52.743
> 
> 标签：c++, linux, gtkmm

我有一个小应用程序，我想在其中创建一些按钮、工具栏等，但我不想使用预先存在的 GTK 图标主题，我想创建自己的。所以我寻找教程之类的，但事实证明，网上讨论得并不好。所以我尝试自己做一些事情：

头文件：

```
#include <gtkmm.h>
#include <string>
#include <iostream>
#include <errno.h>

class IconFactoryBuilder
{
public:
    IconFactoryBuilder();

    ~IconFactoryBuilder();

    void RegisterNewIcons(std::string pPath);

private:

    Glib::RefPtr<Gtk::IconFactory> mCustomFactory;
}; 
```

cp文件：

```
#include <IconFactoryBuilder.h>

IconFactoryBuilder::IconFactoryBuilder() {
    mCustomFactory = Gtk::IconFactory::create();
}

IconFactoryBuilder::~IconFactoryBuilder() {
}

void IconFactoryBuilder::RegisterNewIcons(std::string pPath) {

    Glib::RefPtr<Gtk::IconSet> iconSet = Gtk::IconSet::create();
    Gtk::IconSource someSource;
    try{
        Gtk::Image  *someImage=Gtk::manage(new Gtk::Image(pPath+"appbar.at.png"));
        someImage->set_pixel_size(Gtk::IconSize(48));
        someSource.set_pixbuf(someImage->get_pixbuf());
        someSource.set_size(Gtk::ICON_SIZE_DIALOG);
        someSource.set_size_wildcarded();
    }
    catch(const Glib::Exception &ex) {
        std::cerr << "An error occurred while opening the icon file!" << strerror(errno) << std::endl;
    }
    catch(...) {
        std::cerr << "Unknown Error!" << std::endl;
    }
    iconSet->add_source(someSource);
    const Gtk::StockID somestock("MyNewIcon");
    Gtk::Stock::add(Gtk::StockItem(somestock, "somelabel"));
    mCustomFactory->add(somestock, iconSet);
    mCustomFactory->add_default();
} 
```

但是现在我很困惑，因为我真的不知道如何调用我创建的这个新图标。我也不知道上面写的代码是否足以真正找到图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:25:13.713

你创建了一个图标工厂...*工厂*？

;-)

您的问题的严肃答案是您不需要`Gtk::IconFactory`. 不幸的是，GTK 2 文档并没有告诉您这是不必要的。您需要的是[freedesktop.org 标准图标命名规范](http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html)。创建您的图标，给它们起简单的名称，根据那里描述的目录结构进行组织，将其安装到适当的位置，当您创建`Pixbuf`或`Image`使用这些`...from_icon_name()`功能时，您的图标将“正常工作”。（[例如`Gtk::Image::set_from_icon_name()`](http://developer.gnome.org/gtkmm/unstable/classGtk_1_1Image.html#a69bb4a5ee7299f6b373edc95989bf4f4)：）

以下是 Gnome 开发人员 wiki 中关于如何提供自己的图标的页面：http: [//developer.gnome.org/integration-guide/stable/icons.html.en](http://developer.gnome.org/integration-guide/stable/icons.html.en)

这是我写的关于安装自定义图标的教程中的一个页面：http: [//ptomato.name/advanced-gtk-techniques/html/desktop-file.html](http://ptomato.name/advanced-gtk-techniques/html/desktop-file.html)

# python - 在 python 中没有本地浏览器的 Google Analytics API 访问

> ID：12956086
> 
> 赞同：12
> 
> 时间：2012-10-18T13:40:05.593
> 
> 标签：python, oauth-2.0, google-analytics-api

我想使用 Python 查询 Google Analytics API 以定期从我的 Analytics 帐户下载数据并将数据存储在本地数据库中。我基本上遵循[基本教程](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)中给出的步骤。在此过程中，我正在使用[适用于 Python 的 Google 客户端 API 库。](https://code.google.com/p/google-api-python-client/)

到目前为止，当我在本地开发机器（Mac）上运行它时，我的脚本运行良好。当我启动脚本时，我的浏览器会打开，并提示我授予从应用程序访问我的 Analytics 数据的权限。之后，我可以根据需要运行我的脚本并访问我的数据。

在我的服务器（Ubuntu，只有终端可用）上，`w3m`浏览器打开，但我无法从那里访问我的 Google 帐户。我只能退出`w3m`并终止程序`Ctrl-C`。有如下错误消息：

> 您的浏览器已打开访问：
> 
> [https://accounts.google.com/o/oauth2/auth?scope=some_long_url&access_type=offline](https://accounts.google.com/o/oauth2/auth?scope=some_long_url&access_type=offline)
> 
> 如果您的浏览器在另一台机器上，则退出并使用命令行参数重新运行此应用程序
> 
> --noauth_local_webserver

但是，当我使用参数运行我的脚本时`--noauth_local_webserver`，我得到了相同的结果 -`w3m`打开并且我无法进行身份验证。

我怎样才能让它`--noauth_local_webserver`工作？我还有另一种方法可以在同一台机器上没有本地浏览器的情况下进行身份验证吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:00:00.330

当您使用 时`FLAGS = gflags.FLAGS`，您实际上需要将命令行参数传递给`FLAGS`（这也可能会或可能不会让我绊倒:)）。有关如何执行此操作的以分析为中心的示例，请参见[此处（下面的代码，因为链接往往会在一段时间后消失）。](http://code.google.com/p/google-api-python-client/source/browse/samples/analytics/sample_utils.py#91)一般的想法是将`argv`参数传递给`FLAGS`变量，然后其他模块可以使用该变量。

```
# From samples/analytics/sample_utils.py in the google-api-python-client source

def process_flags(argv):
  """Uses the command-line flags to set the logging level.

  Args:
    argv: List of command line arguments passed to the python script.
  """

  # Let the gflags module process the command-line arguments.
  try:
    argv = FLAGS(argv)
  except gflags.FlagsError, e:
    print '%s\nUsage: %s ARGS\n%s' % (e, argv[0], FLAGS)
    sys.exit(1)

  # Set the logging according to the command-line flag.
  logging.getLogger().setLevel(getattr(logging, FLAGS.logging_level)) 
```

此外，事实证明我们并不孤单！您可以跟踪[此错误](http://code.google.com/p/google-api-python-client/issues/detail?id=207)以查看何时添加文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T18:31:17.237

您还可以将 GA 用作服务 API：[https](https://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/service-py) ://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/service-py 这工作得很好。只需记住使用 openssl $openssl pkcs12 -in client_secrets.p12 -nodes -nocerts > client_secrets.pem 将 p12 转换为未加密的 PEM 文件，当您从谷歌开发人员控制台下载 P12 时，会打印出导入密码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T07:20:35.833

我遇到了同样的问题，并设法通过 SSH 连接到我的服务器来解决它。例子：

```
ssh -L 8080:127.0.0.1:8080 <server-name> 
```

然后我通过 SSH 运行我的脚本。当我看到 URL ( [https://accounts.google.com/o/oauth2/auth?scope=some_long_url&access_type=offline](https://accounts.google.com/o/oauth2/auth?scope=some_long_url&access_type=offline) ) 时，我复制并粘贴到我机器上的浏览器中以完成身份验证流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T13:40:18.440

我在我的 PC 上运行它，得到一个 token.json，然后将令牌复制到服务器上的主文件夹中（想想脚本的工作目录），它就解决了。如果您使用相同的令牌，则无需身份验证

# php - 如何从mysql中的两个表中选择两列

> ID：12956089
> 
> 赞同：0
> 
> 时间：2012-10-18T13:40:15.217
> 
> 标签：php, mysql

> 我正在尝试执行此查询，但出现错误“未定义索引：lname”。我想从表 a 的一列（fname）中计算行并从其他表 b 中选择列（lname）。所以请帮助我。

```
 $result = mysql_query("SELECT COUNT(fname),lname FROM a,b");
    while ($row = mysql_fetch_array($result))
    {
      echo "<tr><td>";
      echo $row['lname'];
      echo "</td>";
      echo "<td>";
      echo $row['COUNT(fname)'];
      echo "</td></tr>";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:55:44.587

如果您仍然收到错误，您可以尝试分别获取两者：

```
$result = mysql_query("SELECT COUNT(fname) FROM a");
while ($row = mysql_fetch_array($result))
  {
    echo "<tr><td>";
    echo $row['COUNT(fname)'];
    echo "</td></tr>";

  }

$result1 = mysql_query("SELECT lname FROM b");
while ($row = mysql_fetch_array($result1))
    {
      echo "<tr><td>";
      echo $row['lname'];
      echo "</td></tr>";
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:41:59.223

您需要使用别名。用这个：

```
$result = mysql_query("SELECT COUNT(fname) AS countfname,lname FROM a,b");
while ($row = mysql_fetch_array($result))
{
  echo "<tr><td>";
  echo $row['lname'];
  echo "</td>";
  echo "<td>";
  echo $row['countfname'];
  echo "</td></tr>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:51:13.907

试试这个代码：

```
$result = mysql_query("SELECT COUNT(a.fname) as fname,b.lname as lname FROM a,b");
while ($row = mysql_fetch_array($result))
{
  echo "<tr><td>";
  echo $row['lname'];
  echo "</td>";
  echo "<td>";
  echo $row['COUNT(fname)'];
  echo "</td></tr>";
} 
```

# qt - 在 mac os x 上构建 Qt 应用程序以进行部署

> ID：12956090
> 
> 赞同：1
> 
> 时间：2012-10-18T13:40:16.450
> 
> 标签：qt

我正在使用 Qt 4.8.3 在 mac os x 10.7.2 上构建 Qt 应用程序以进行部署。运行 otool -L Test.app 后，我的应用程序是“Test.app”，它给出的路径如下。

```
QtGui.framework/Versions/4/QtGui 
QtCore.framework/Versions/4/QtCore 
```

我已将两个 QtGui.framework 和 QtCore.framework 复制到 Test.app

然后我使用了以下命令

```
install_name_tool -id @executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore
Test.app/Contents/Frameworks/QtCore.framework/Versions/4/QtCore

install_name_tool -id @executable_path/../Frameworks/QtGui.framework/Versions/4/QtGui
Test.app/Contents/Frameworks/QtGui.framework/Versions/4/QtGui. 
```

然后像这样使用更改命令

```
install_name_tool -change /Library/Frameworks/QtCore.framework/Versions/4/QtCore
@executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore
Test.app/Contents/MacOs/Test

install_name_tool -change /Library/Frameworks/QtGui.framework/Versions/4/QtGui
@executable_path/../Frameworks/QtGui.framework/Versions/4/QtGui
Test.app/Contents/MacOs/Test 
```

之后，如果我将 otool -L Test.app 仍然提供以前的路径。

运行命令时是否有任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:09:45.830

不要手动操作。`macdeployqt`使用Qt自带的工具：http: [//qt-project.org/doc/qt-4.8/deployment-mac.html#the-mac-deployment-tool](http://qt-project.org/doc/qt-4.8/deployment-mac.html#the-mac-deployment-tool)

# php - MVC - 如果对象模型中的查询获取所有需要的数据，子对象可以没有模型吗？

> ID：12956099
> 
> 赞同：2
> 
> 时间：2012-10-18T13:40:32.670
> 
> 标签：php, mysql, model-view-controller

考虑 web 应用程序的以下部分：一堵包含未知数量块的墙，这些块本身包含未知数量的盒子。

我的方法（但仅在纸上，抱歉没有代码）将创建 a `class wall`、 a`class block`和 a `class box`。（墙包含块包含框）。（每个块和每个框可能有不同的参数值）

在我的数据库中，我有关于墙、块和单独表格中的盒子的信息。然而，只需一个大的（但经过优化的）查询，我就可以获取我需要的所有数据。（每个盒子都有其父块的 id）。如果我错了，请纠正我，但减少查询数量并更多地依赖 php 东西似乎是提高速度的正确方法。

基于此，我想知道：遵循 MVC 模式/结构，是否应该`block`也`box`有一个模型，即使我的墙模型中的查询已经获取了所有需要的信息？或者这不是正确的方法吗？

谢谢！

# html - 刷新时更改 div 背景颜色

> ID：12956101
> 
> 赞同：-2
> 
> 时间：2012-10-18T13:40:52.363
> 
> 标签：html, colors, refresh

我正在研究登陆页面的概念。而且我想在每次刷新时更改 Div 的背景颜色（使用 jQuery）。而且我尝试了很多东西，但没有奏效。

我对 Javascript 并没有真正的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:45:27.617

试试这个 jQuery :)

```
$(document).ready(function() {
    $('#mydivid').css("background-color", getRandomColor());
}

function getRandomColor() { 
    var letters = '0123456789ABCDEF'.split(''); 
    var color = '#'; 
    for (var i = 0; i < 6; i++ ) { 
        color += letters[Math.round(Math.random() * 15)]; 
    } 
    return color; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:59:00.877

如建议的那样，您可以在每次重新加载时使用随机颜色。如果要确保颜色发生变化，可以使用`localStorage`或`sessionStorage`记住以前的值。

例子：

```
$(function(){
  var prevColorId = sessionStorage.getKey("colorID"); //undefined if not present
  var colorList = ["lightRed", "lightGreen", "lightBlue" /*, ...*/];
  var nextColorId = prevColorId+1; //NaN if prevColorId undefined
  if(colorList[nextColorId]===undefined){
    nextColorId=0;
  }
  sessionStorage.setKey("colorID");
  $("#myRainbowDiv").css({background: colorList[nextColorId]});
} 
```

# eclipse - Ant 从 MyEclipse 运行时未使用“默认”JRE

> ID：12956108
> 
> 赞同：0
> 
> 时间：2012-10-18T13:41:18.397
> 
> 标签：eclipse, ant, myeclipse

我是一名承包商，他们使用 MyEclipse 10.0 和 Ant 进行构建。自从我使用 Ant 作为构建工具以来已经有很长时间了，因为我主要使用 Maven 已经有一段时间了。

它们的源代码被分成多个项目，每个项目都链接回一个公共项目，该项目具有一个由每个项目的 build.xml 导入的公共 build.xml。ant 脚本用于对应用程序进行 WAR，并使用 WebLogic 的基于 java 的部署工具在本地和其测试环境中进行部署。他们使用的是 WebLogic 9.2，据我阅读，它与 JDK 1.6 及更高版本存在问题。我在 Preferences->Installed JREs 中将 1.5 JDK/JRE 设置为 MyEclipse 中的默认值。

对于所有项目，当我从 Eclipse 中启动 Ant 目标时，它在我设置为默认值的 1.5 JDK/JRE 下运行。但是对于这个项目，它似乎坚持在作为 MyEclipse 10 的一部分提供的 1.6 JDK 下运行。如果我右键单击 Ant 视图/选项卡中的 Ant 构建并查看运行配置的属性（右键单击, Run As->External Tool Configuration...)，选择的 JRE 显示 1.5 JDK/JRE。但是，当我运行它时，它仍然在 1.6 JDK 下运行。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:50:44.287

事实证明，尽管 Eclipse 将 JDK 设置为 1.5，但事实并非如此。我进入运行方式->外部工具...，将其设置为 1.6，保存，然后将其设置回 1.5...噗！现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:29:10.837

在 Ant 文件中搜索字符串[`fork`](http://ant.apache.org/manual/Tasks/java.html)。可能是其中一个 Ant 任务本身启动了一个新的 VM。

# version-control - TFS 生成类似 VSS 的报告用于源代码控制

> ID：12956133
> 
> 赞同：0
> 
> 时间：2012-10-18T13:42:56.513
> 
> 标签：version-control, tfs

在[VSS](http://en.wikipedia.org/wiki/Microsoft_Visual_SourceSafe)中，可以生成当前文件夹的子文件的完整列表。这可以通过选择`Tools`->来完成`Files Report`，它可以输出到打印机、文件或剪贴板。

[TFS](http://en.wikipedia.org/wiki/Team_Foundation_Server)中是否存在用于源代码控制文件列表（**非**工作项、错误等）的类似功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:57:46.647

首先启动 Visual Studio 命令提示符。将文件夹更改为您的源文件夹。然后写这个：

```
tf.exe dir -r 
```

您可以在此处阅读有关 MSDN 上 tf.exe 的更多信息：[Tf 命令行实用程序命令](http://msdn.microsoft.com/en-us/library/z51z7zy0%28v=vs.100%29.aspx)

# php - 传递函数参数

> ID：12956142
> 
> 赞同：0
> 
> 时间：2012-10-18T13:43:23.077
> 
> 标签：php, function, foreach

我有一个`foreach`如下所示的声明：

```
foreach ($term['terms'] as $term_single) {
    $term_object = get_term_by('name', $term_single, $tax_name);

    switch ($term['tax_name']) {
        case has_action( "basey_taxonomy_search_teaser_{$tax_name}" ) :
            do_action( "basey_taxonomy_search_teaser_{$tax_name}",$term_object, $term_single );
        break;

        default:
            echo basey_taxonomy_search_teaser_default($term_object,$term_single);
        break;
    }
} 
```

所以，在这个范围内，我有`$term_object`和`$term_single`变量要传递给`basey_taxonomy_search_teasr_default()`函数。奇怪的是，如果我在另一个位置执行以下操作：

```
function basey_taxonomy_search_teaser_default($term_object,$term_single) {

    ob_start();

    do_action('basey_taxonomy_teaser_before');
    echo '<article id="tax-' . $term_object->term_id . '" class="' . $term_object->taxonomy . '">';
    echo '<a href="';
    echo get_term_link($term_object);
    echo '">';
    echo $term_single;
    echo '</a>';
    echo '</article>';
    do_action('basey_taxonomy_teaser_after');

    $display = apply_filters('basey_taxonomy_teaser_default_view', ob_get_clean());
    return $display;
} 
```

它在我的本地主机上工作得很好，但是在服务器上在线时，它会返回错误，`$term_object`并且`$term_single`未定义。如果我希望函数定义使用初始调用中的值，有没有更好的方法呢？再次有点困惑为什么它会在本地主机（MAMP）上工作，但在服务器上，它会出错。除了它是一个 php.ini 问题（我认为这是更基本的编程实践）之外，看看我做错了什么以及我的假设是否与通过函数传递值有关。谢谢！

# 更新

`var_dump($term_object)`紧接着`$term_object = get_term_by('name', $term_single, $tax_name);`：

本地主机给了我：

```
object(stdClass)#181 (10) { ["term_id"]=> string(3) "127" ["name"]=> string(4) "Base" ["slug"]=> string(4) "base" ["term_group"]=> string(1) "0" ["term_order"]=> string(1) "0" ["term_taxonomy_id"]=> string(3) "130" ["taxonomy"]=> string(18) "profile_categories" ["description"]=> string(4) "Base" ["parent"]=> string(1) "0" ["count"]=> string(1) "2" } 
```

实时服务器给了我：

```
bool(false) 
```

呸，很郁闷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:47:50.260

我猜你遇到的数据库不同，$term_single 为空，导致 $term_object 为空，当你调用函数并尝试使用你要死的对象时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:01:02.327

听起来您正在搜索的术语在实时服务器上不存在。

# jquery - 响应式 Jquery 菜单 - 当屏幕增加时它可以工作，但当它减少时它不会

> ID：12956143
> 
> 赞同：0
> 
> 时间：2012-10-18T13:43:26.243
> 
> 标签：jquery, menu

我在使用响应式菜单时遇到了问题：当浏览器大小大于 800 像素时，这是一个典型的下拉菜单，其中通过**悬停**打开子菜单，但是当大小小于 800 像素时，通过单击（对于手机）打开子菜单。

问题是当我以 100% 缩放打开页面时，它可以正常工作（悬停），但是当我放大（小于 800 像素）时，我的效果加倍：悬停也可以单击。如何“关闭”悬停效果并仅单击。希望这段代码能解释一切：

```
function checkResize() {
    var ww = $(window).width();
    if ( ww < 800) {
        $('#main-menu-list li').on('click', function() {
            if ($(this).length>0) {
                $(this).children('ul').toggle();
            }
        });
    } else {
        $('#main-menu-list li').hover(function() {
                $(this).children('ul').fadeIn();
            },  
            function() {
                $(this).children('ul').fadeOut(200);
            }
        );
    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:36:43.633

假设您的`checkResize`方法被多次调用，您应该在添加新的事件侦听器之前删除事件侦听器。例如删除所有`click`, `mouseenter`(hover in) 和`mouseleave`(hover out) 监听器：

```
function checkResize() {
    $('#main-menu-list li').off('click mouseenter mouseleave');
    ... 
```

这应该让您有点击或悬停行为。

# android - 在 TableLayout 中动态居中 ImageView

> ID：12956144
> 
> 赞同：-3
> 
> 时间：2012-10-18T13:43:26.790
> 
> 标签：android, center, tablerow, dynamically-generated, android-tablelayout

我正在制作一个动态制作表格的应用程序。每个tablerow包括3个ImageViews和一个TextView，用textview没有任何问题，我简单地使用textview.setGravity(Gravity.Center_Vertical)，但是ImageViews有问题。如何使它们居中（垂直和水平）？

这是显示我想要实现的目标的图片：![在此处输入图像描述](../Images/c75935f87aab9950a2ab162836a66eab.png)

这是将所有内容都添加到 TableLayout 的类：

```
public class Obiekt {
    int moje;
    TableRow tr = new TableRow(MainActivity.this);
    ImageView iv = new ImageView(MainActivity.this);
    ImageView sett = new ImageView(MainActivity.this);
    ImageView rin = new ImageView(MainActivity.this);

    public Obiekt(int obraz, int obraz2, int obraz3, int dzwiek, String tekst) {
        moje = sound.load(MainActivity.this, dzwiek, 1);
        iv.setImageResource(obraz);
        //iv.setLayoutParams(rowparams);
        tr.addView(iv);
        // TEXTVIEW settings
        TextView tv = new TextView(MainActivity.this);
        tv.setText(tekst);
        tv.setTypeface(tf);
        tv.setTextSize(rozmiar);
        tv.setGravity(Gravity.CENTER_VERTICAL);
        tv.setGravity(Gravity.CENTER_HORIZONTAL);
        tv.setTextColor(Color.parseColor("#FFFFFF"));
        tr.addView(tv);
        // ImageView RIGHT
        sett.setImageResource(obraz2);
        tr.addView(sett);
        // ImageView RING
        rin.setImageResource(obraz3);
        tr.addView(rin);
        //tr.setLayoutParams(rowparams1);
        tl.addView(tr);
        View wiew = new View(MainActivity.this);
        wiew.setBackgroundResource(R.drawable.divide);
        tl.addView(wiew);
        tv.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                play();
            }
        });
    }

    public void hide() {
        tr.setVisibility(10);
    }

    public void size() {
        iv.getLayoutParams().height=rozmiar;
        iv.getLayoutParams().width=rozmiar;
        sett.getLayoutParams().width=rozmiar;
        sett.getLayoutParams().height=rozmiar;
        rin.getLayoutParams().height=rozmiar;
        rin.getLayoutParams().width=rozmiar;
    }

    public void play() {
        sound.play(moje, 1, 1, 0, 0, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T10:32:12.443

将您的图像视图“SCALE TYPE”设置为 FitXY，例如您的图像视图是 imageView 而不是 imageView.setScaleType(ScaleType.FIT_XY);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:06:27.400

试试这样

```
ImageView imgView=new ImageView(this);
imgView.setImageResource(R.drawable.yourimage);
imgView.setScaleType(ImageView.ScaleType.FIT_XY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:59:58.570

您是否尝试过添加`ImageView`内部 a `RelativeLayout`？

将 设置为`RelativeLayout`与`LayoutParams`您要在其中绘制的空间（单元格的完整大小）匹配，然后在将 添加`ImageView`到时`RelativeLayout`，将其添加`RelativeLayout.center_in_parent`

# c# - DockPanel Suite - DockContent 可见性

> ID：12956147
> 
> 赞同：0
> 
> 时间：2012-10-18T13:43:37.930
> 
> 标签：c#, winforms, dockpanel-suite

一个表单包含一个 DockPanel 和一个 DockContent 实例，该实例具有 DockState=DockState.DockBottomAutoHide 并且它充当记录器视图 - 就像 Visual Studio 的错误列表面板。因此，当将日志记录事件添加到日志列表时，DockPanel - 如果不可见 - 以下列方式显示：

```
{
  loggerList.AddLogEvent(event);
  loggerContentPanel.Show();
}; 
```

但如果用户已经可以看到 loggerContentPanel，则 Show 方法会使面板“闪烁”。如果对用户可见，是否有任何方法可以使用 DockState = DockState.DockBottomAutoHide 获取 DockContent 的状态？IsHidden 或 Visible 属性没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:49:46.417

编辑：好的......我发现，当面板隐藏时，属性“IsActivated”为假，而在显示时为真。

# javascript - Jquery隐藏/显示滚动动画

> ID：12956151
> 
> 赞同：2
> 
> 时间：2012-10-18T13:44:14.060
> 
> 标签：javascript, jquery, html, css, ajax

当我单击任何年份列（2012、2011、2010 等）时，它会显示每年的内容并隐藏其他年份。

问题是当我点击（例如 2011 年专栏）时，动画会同时完成所有效果，让用户感到困惑，我想我必须用动画步骤来做，但我一直没能找到jQuery 解决方案。

这是我的代码：

```
/* Scroll Function */
function scrollto(position){
    $('html, body').stop().animate({
        scrollLeft: position
    }, 1000);
}

/* Calendar Scroll */
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    $(".contenido_calendario").hide();
    $(this).next(".contenido_calendario").toggle('slow');
    scrollto($(this).offset().left - 352)
}); 
```

我曾尝试通过使用 .queue() 来修复效果，但它不起作用，我不知道它的代码是否也写得很好：

```
$(".sub_section_title").click( function(e) {
    e.preventDefault();
    $(".contenido_calendario").hide();
    $(".contenido_calendario").queue(function() {
        scrollto($(this).offset().left - 352);
        $(this).dequeue();
    });
    $(".contenido_calendario").queue(function() {
        $(this).next(".contenido_calendario").toggle('slow')
    $(this).dequeue();
    });
}); 
```

动画应该是：单击 2011 > 向左滚动 2011 列（隐藏 2012 内容） > 显示内容动画

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:47:38.057

您想利用 jQuery 动画的回调功能。例如，对于[hide ，您可以执行以下操作：](http://api.jquery.com/hide/)

```
var outerContainer = $(this);
$(".contenido_calendario").hide(500, function() {
    outerContainer.next(".contenido_calendario").toggle('slow', function() {
        scrollto(outerContainer.offset().left - 352);
    });
}); 
```

这将确保动画在前一个完成时运行。

# android - 自动向 Android 客户端提供证书

> ID：12956164
> 
> 赞同：6
> 
> 时间：2012-10-18T13:45:02.920
> 
> 标签：android, certificate, mdm

我正在研究应该支持各种平台的大型移动设备管理 MDM 解决方案，但当然主要是 iOS 和 Android 3.x 以后的版本。

我们需要提供证书以允许访问 VPN、Exchange 和 Wifi 等服务。这在 iOS 上很容易做到，因为他们的 MDM api 允许配置证书，所以所有 MDM 供应商都可以将这些配置到他们的 iPhone 和 iPad 上。

这是（至少来自我的研究）但是另一个关于 Android 的故事，在通用的谷歌 Android MDM API 中显然没有这样的功能来配置和安装证书。因此，唯一支持这一点的 MDM 供应商是那些可以访问供应商特定 API 的供应商，例如三星、HTC、摩托罗拉等。

*   确实没有在所有 Android 设备上安装证书的通用方法，还是仅针对 MDM 特定功能（API 调用）是这种情况？我已经看过这篇文章：[如何在 Android 中使用 p12 证书（客户端证书）](https://stackoverflow.com/questions/8311295/how-to-use-p12-certificates-in-android-client-certificates)

*   任何关于如何将 Exchange、VPN 和 Wifi 等不同企业服务的证书自动交付给 Android 客户端（3.x 及更高版本）的建议都将非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-13T15:40:14.660

您可以使用此 API 使用设备管理组件安装证书： [https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#installCaCert(android.content.ComponentName,%20byte[])](https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#installCaCert(android.content.ComponentName,%20byte[])) 。

# image - 使用 curl 通过终端下载站点图像

> ID：12956165
> 
> 赞同：0
> 
> 时间：2012-10-18T13:45:03.433
> 
> 标签：image, shell, curl, download

我正在尝试将大量图像从网站下载到我的 Mac 上。我可以使用 DownloadThemAll、SiteSucker 等下载较小的图像，但它们的挖掘不够深入。所以我不得不跳进终端，这有点超出我的舒适区，我的技能有点生疏。

我试过下面的脚本：

```
curl -O http://www.domain.co.uk/system/images/[1-1000]/original/*.jpg 
```

该脚本有效，我可以看到终端正在下载图像文件，但是我遇到的问题是文件被 *.jpg 覆盖并且没有按顺序生成它们，例如 1.jpg、2.jpg、3.jpg 等甚至是他们原来的名字。原始 jpg 名称使用随机数字/字母（例如 LIC0145_websource.jpg），这就是我尝试用 *.jpg 对其进行补充的原因。我想知道我缺少哪段代码来告诉终端下载这些图像。

我也厌倦了调用下面的 shell 脚本，但遇到了“意外的文件结尾”

```
#!/bin/bash
for i in `seq 1 1000`;
do
input=http://www.domain.co.uk/system/images/$i/original/*.jpg
output=$i.jpg
#   echo $input, $output
curl --output $output --remote-name $input
done 
```

我认为 curl 选项可能仍然是一个更好的选择，但如果有人有任何修复或其他解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T13:58:25.183

你可以做这样的事情`wget`（我知道那不是`curl`）：

```
wget --no-parent --accept=jpg,jpeg,htm,html --mirror  http://somedomain/ 
```

然后CD到目录并发出

```
find ./ \( -iname '*.htm' -o -iname '*.html' \) -exec rm {} \; 
```

# javascript - 记住 extjs 4 复选框的状态

> ID：12956166
> 
> 赞同：1
> 
> 时间：2012-10-18T13:45:06.133
> 
> 标签：javascript, extjs4.1

在我的表单面板中，我添加了一个复选框，设置：

```
stateful: true,
stateId: 'loginPanelRemeberMe' 
```

然后，在发送表单之前，我保存状态调用：

```
this.saveState() 
```

在面板上。所有其他组件都会保存它们的状态，当我重新加载页面时，它们会调用以前的状态，但复选框总是以未选中状态开始。有没有办法强制保存价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T12:38:20.823

这对我有用：

在您的应用程序启动函数（或控制器初始化函数）中，添加以下内容：

```
if( Ext.supports.LocalStorage )
{
    Ext.state.Manager.setProvider(new Ext.state.LocalStorageProvider());
}
else
{
    Ext.state.Manager.setProvider(new Ext.state.CookieProvider());
} 
```

然后在视图中定义您的复选框并覆盖 getState 和 applyState 函数：

```
{
    xtype: 'checkboxfield',
    getState: function() {
        return { "checked": this.getValue() };
    },
    applyState: function(state) {
        this.setValue( state.checked );
    },
    stateEvents: [
        'change'
    ],
    stateId: 'myCheckBox',
    stateful: true,
    id: 'myCheckBox',
} 
```

经测试可与 ExtJS 4.2 和 6.5.x 一起使用。

**Sencha Architect 用户注意事项：** 如果您将视图定义为初始视图，`Ext.create('YourApp.view.MainPanel')`则 Sencha Architect 会在您的启动功能顶部自动添加一个隐藏的 Ext.create 行。这将产生在您的状态提供者可以初始化**之前实例化您的视图的不良影响，因此您的字段 applyState 函数将永远不会被调用。**

**解决方案：**取消将您的视图标记为初始视图，并在初始化状态提供程序**后手动添加 Ext.create 行。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:03:00.313

我找到的解决方案是：我覆盖了面板的状态功能，并添加了一个复选框状态字段。//复选框状态的管理 rememberMe: false,

```
getState: function() {
    var state = this.callParent();
    state = this.addPropertyToState(state, 'rememberMe', this.rememberMe);
    return state;
},

applyState: function(state) {
    this.callParent(state);
    this.getComponent('checkRememberMe').setValue(state.rememberMe);
}, 
```

在提交表单的方法中，我添加了以下行：

```
//Manage state
var checkRememberMe = this.getComponent('checkRememberMe'); 
if(checkRememberMe.getValue() == true){
    this.rememberMe = checkRememberMe.getValue();
    this.saveState();
} 
```

# windows - “该系统找不到指定的路径。” 尝试使用 asadmin 启动 GlassFish 时出现错误消息

> ID：12956167
> 
> 赞同：20
> 
> 时间：2012-10-18T13:45:07.027
> 
> 标签：windows, glassfish, asadmin

我尝试按照[The Java EE 6 Tutorial](http://docs.oracle.com/javaee/6/tutorial/doc/javaeetutorial6.pdf)并使用以下命令启动 GlassFish。但我收到一条错误消息。如何解决这个问题？

```
C:\glassfish3\bin>asadmin start-domain --verbose
The system cannot find the path specified. 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T11:29:44.267

1.  转到`asenv.bat`配置目录中的文件

2.  删除线`set AS_JAVA="C:/Program Files(x86)/Java/"`
3.  重试`asadmin`。

这次会成功的！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T14:25:24.200

`glassfish3\glassfish\config\asenv.bat`我按照 domain1 not configured 中的描述通过编辑修复了这个问题[——系统找不到指定的路径](https://web.archive.org/web/20151019210741/http://java.net/jira/browse/GLASSFISH-16155)

然后我收到一个错误，因为不存在域，这已通过按照[Oracle Glassfish“没有域”问题修复解决方案](http://blog.sina.com.cn/s/blog_6bccf0360100yu0d.html)`glassfish3\bin\asadmin.bat`中的描述进行编辑来解决

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-25T18:28:42.770

嗨，我面临同样的问题。我可以通过以下步骤解决相同的问题：

转到 \glassfish\config（注意：在我的情况下，它是 c:\glassfish3\glassfish\config）

现在在记事本中打开 asenv.bat。

使 AS_JAVA 的值与 JAVA_HOME 环境变量相同。

现在打开命令提示符并转到 bin 文件夹并运行 asadmin start-domain domain1。

如果您收到不存在域的错误，请通过以下链接创建新域：http: [//docs.oracle.com/cd/E19776-01/820-4497/create-domain-1/index.html](http://docs.oracle.com/cd/E19776-01/820-4497/create-domain-1/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:07:37.917

在使用 64 位 Windows 7 安装 Java EE（包括 GlassFish）时出现此错误。作为参考，将最新的相同 Java EE 安装到我的 64 位 Linux 运行良好，我可以看到它是如何设置默认域的。

即使我在“C:\Program Files\Java\ jdk1.7.0_10\bin"。

asadmin.bat 首先运行“%~dp0..\glassfish\config\asenv.bat”，然后研究如果猜测 java 在哪里。这有点奇怪，几乎在我的配置中，但我无法很好地解决这个问题

`%JAVA% -jar "%~dp0..\glassfish\modules\admin-cli.jar" %*`

我可以手动设置 %JAVA% 正确，但如何设置更好的校正？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-28T13:59:39.790

在以下位置设置正确的 Java 路径：

```
<glassfish_home>\glassfish\config\osgi.properties 
```

例如

```
set AS_JAVA=C:\Program Files\Java\jdk1.7.0_80 
```

注意：请按照 Oracle glassfish 的[发行说明](https://docs.oracle.com/cd/E26576_01/doc.312/e24939/toc.htm)了解受支持的 JDK

# python - Python：如何使用 setuptools 连接到受保护的 svn 存储库

> ID：12956168
> 
> 赞同：4
> 
> 时间：2012-10-18T13:45:07.727
> 
> 标签：python, svn, setuptools

我正在尝试配置 setuptools.setup 脚本。PyPI 包工作正常，但我无法从我的 svn 存储库安装“mypackage”模块。我得到错误：

*找不到“myotherpackage”的索引页（可能拼写错误？）*

*   我是否忘记了有关 dependency_links 参数的重要内容？
*   提供的参数（见下文）是否正常？

# 安装程序.py

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from setuptools import setup, find_packages
version = '2.5'

setup(name='myotherpackage',
      description='My main package called myotherpackage',
      packages=find_packages(),
      version=version,
      zip_safe=False,
      include_package_data=True,
      install_requires=['nose','tweepy','myotherpackage'],
      dependency_links=['https://code.myrep.net/svn/experimenta/user/myotherpackage/'],
      test_suite='nose.collector', 
      test_require = 'nose',
      ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T22:01:18.327

`#egg=myotherpackage`我认为您需要在dependency_links url的末尾添加一些信息（ ），如下所示：

```
dependency_links=['https://code.myrep.net/svn/experimenta/user/myotherpackage/#egg=myotherpackage'], 
```

这是为了让 setuptools 知道它正在下载什么。

我用您的文件的修改版本进行了尝试，将您的 svn 链接替换为我在 Internet 上找到的链接：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from setuptools import setup, find_packages
version = '2.5'

setup(name='myotherpackage',
      description='My main package called myotherpackage',
      packages=find_packages(),
      version=version,
      zip_safe=False,
      include_package_data=True,
      install_requires=['nose','tweepy','setuptools-dev06'],
      # works
      dependency_links=['http://svn.python.org/projects/sandbox/branches/setuptools-0.6/#egg=setuptools-dev06'],
      # doesn't work
      #dependency_links=['http://svn.python.org/projects/sandbox/branches/setuptools-0.6/'],
      test_suite='nose.collector',
      test_require = 'nose',
      ) 
```

这对我有用。当我用`#egg=setuptools-dev06`注释掉该行并取消注释以 / 结尾的行时，这不起作用。

# php - Javascript页面加载重定向父框架

> ID：12956178
> 
> 赞同：0
> 
> 时间：2012-10-18T13:45:27.197
> 
> 标签：php, javascript, redirect, iframe, parent

我有一个用户登录的 iframe 弹出窗口。问题是，当他们登录时，重定向会在 iframe 内加载页面而不是父元素。

我知道我需要在某处插入此代码才能使这项工作：

```
window.top.location.href = "http://www.site.com"; 
```

重定向单元的代码如下：

```
function login_redirect( $redirect_to, $request, $user ) {
    global $theme_my_login;

    // Determine the correct referer
    if ( !$http_referer = wp_get_original_referer() )
        $http_referer = wp_get_referer();

    // Remove some arguments that may be present and shouldn't be
    $http_referer = remove_query_arg( array( 'instance', 'action', 'checkemail', 'error', 'loggedout', 'registered', 'redirect_to', 'updated', 'key', '_wpnonce', 'reauth' ), $http_referer );

    // Make sure $user object exists and is a WP_User instance
    if ( !is_wp_error( $user ) && is_a( $user, 'WP_User' ) ) {
        if ( is_multisite() && empty( $user->roles ) ) {
            $user->roles = array( 'subscriber' );
        }
        $redirection = array( 'login_type' => 'default' );
        foreach ( (array) $user->roles as $role ) {
            if ( $theme_my_login->options->get_option( array( 'redirection', $role ) ) ) {
                $redirection = $theme_my_login->options->get_option( array( 'redirection', $role ) );
                break;
            }
        }
        if ( 'referer' == $redirection['login_type'] ) {
            // Send 'em back to the referer
            $redirect_to = $http_referer;
        } elseif ( 'custom' == $redirection['login_type'] ) {
            // Send 'em to the specified URL
            $redirect_to = $redirection['login_url'];
            // Allow a few user specific variables
            $replace = array( '%user_id%' => $user->ID, '%user_login%' => $user->user_login );
            $redirect_to = str_replace( array_keys( $replace ), array_values( $replace ), $redirect_to );
        }
    }

    // If a redirect is requested, it takes precedence
    if ( !empty( $request ) && admin_url() != $request && admin_url( 'profile.php' ) != $request )
        $redirect_to = $request;

    // Make sure $redirect_to isn't empty
    if ( empty( $redirect_to ) )
        $redirect_to = get_option( 'home' );

    return $redirect_to;
} 
```

# zend-framework2 - 如何在 ZendFramwork2 的实体类中使用服务管理器？

> ID：12956180
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:45:31.030
> 
> 标签：zend-framework2, servicemanager

如何在 ZendFramwork2 的实体类中使用服务管理器？我就是不明白。

Upd：我创建用户实体类并创建方法，该方法从数据库加载有关它的附加数据。如果我有 serviceManager 的实例，我可以通过表类加载这些数据。但我无法得到这个实例。

在控制器中，我使用此代码

```
public function getNewsTable()
{
    if (!$this->newsTable)
    {
        $sm = $this->getServiceLocator();
        $this->newsTable = $sm->get('Application\Model\NewsTable');
    }
    return $this->newsTable;
} 
```

在我使用的插件中

```
 public function getServiceManager()
{
    return $this->serviceManager->getServiceLocator();
}
public function setServiceManager(ServiceManager $serviceManager)
{
    $this->serviceManager = $serviceManager;
} 
```

但是在实体类中它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:37:31.143

实体类需要实现“ServiceLocatorAware”接口，由服务定位器获取。

# facebook-fql - 从不工作的朋友那里获取最新照片

> ID：12956181
> 
> 赞同：0
> 
> 时间：2012-10-18T13:45:32.453
> 
> 标签：facebook-fql, photo

我尝试使用此处描述的方法获取朋友的最新照片： [FQL - 我可以获取本周发布的朋友的照片](http://facebook.stackoverflow.com/questions/6515533/fql-can-i-get-photos-of-my-friends-posted-this-week)

起初它似乎工作正常，但后来我注意到我朋友的一些照片没有被提取，即使他们有更高的时间戳（照片是按照片 FQL 表中的创建字段排序*的*）*......*之后一些调试我注意到问题出在

 *```
SELECT aid FROM album WHERE owner IN 
  (SELECT uid2 FROM friend WHERE uid1=me() 
```

如果我传递了我朋友的 ID 的简短列表，他们将被正确排序，但是当我传递完整列表时，并非所有朋友都包含在查询结果中......

任何想法为什么这不起作用？在“SELECT XXX FROM YYY WHERE ZZZ IN (?)”查询中可以传递多少个值是否有任何限制？

提前感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:28:00.790

限制似乎是 FQL 查询的任何部分返回的大约 5000 条记录。

假设您的朋友少于 5000 个，您可以通过修改查询以检查`modified_major`列以仅返回在感兴趣期间添加了照片的相册来减少返回的相册数量。您可以交替查看该`modified`列以返回任何专辑修改。

此外，它看起来`aid`并且`pid`正在被弃用。新的开发应该使用`object_id`最大的兼容性。

因此，要获取自 2012-10-01 以来更新过照片的所有相册，您可以使用以下查询：

```
SELECT object_id FROM album WHERE owner IN 
  (SELECT uid2 FROM friend WHERE uid1=me()) AND modified_major > 1349049600 
```

在您的外部查询中更改`aid`为`album_object_id`和`pid``object_id`*

# r - 如何通过公共 ID 从大型数据集中提取行，并采用这些行的方法并制作具有这些 ID 的列

> ID：12956185
> 
> 赞同：3
> 
> 时间：2012-10-18T13:45:49.737
> 
> 标签：r, data.table, plyr

我知道这是一个非常愚蠢的问题，但我无法解决它，这就是为什么要问...我如何从公共 ID 的大型数据集中提取行并利用这些行的方法并制作具有这些 ID 的列作为行名。例如

```
IDs Var2    
Ae4 2       
Ae4 4
Ae4 6
Bc3 3   
Bc3 5   
Ad2 8
Ad2 7

OutPut
Var(x)
Ae4 4
Bc3 4
Ad2 7.5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T14:17:38.720

如果你有一个大的data.frame，你可以使用`data.table`

一些替代`ddply`是`aggregate`和`data.table`

```
set.seed(001)
dat <- data.frame(ID = rep(LETTERS[1:5], each = 20), value = runif(1e6))

library(data.table)
DT <- data.table(dat)
DT[, mean(value), by=list(ID)]  # data.table approach

aggregate(.~ID, data=dat, mean) # aggregate (R Base function) approach

library(rbenchmark) # comparing performance
benchmark(DT[, mean(value), by=list(ID)],                 # data.table approach
          aggregate(.~ID, data=dat, mean),                # aggregate  approach
          ddply(dat, .(ID), summarize, mn = mean(value)), # ddply approach (Paul Hiemstra's answer)
          columns=c("test", "replications", "elapsed", "relative"),
          order='relative',
          replications=1)

                                            test replications elapsed relative
1               DT[, mean(value), by = list(ID)]            1    0.14    1.000
3 ddply(dat, .(ID), summarize, mn = mean(value))            1    0.58    4.143
2            aggregate(. ~ ID, data = dat, mean)            1    3.59   25.643 
```

如您所见，最快的是`data.table`方法。

# 编辑

有一个 R 基础方法甚至比 更快`data.table`，让我们看看：

```
 unlist(lapply(split(dat$value, dat$ID), mean)) # another R Base approach

    benchmark(DT[, mean(value), by=list(ID)],                 # data.table approach
              aggregate(.~ID, data=dat, mean),                # aggregate  approach
              ddply(dat, .(ID), summarize, mn = mean(value)), # ddply approach (Paul Hiemstra's answer)
              unlist(lapply(split(dat$value, dat$ID), mean)), # lapply, split approach
              columns=c("test", "replications", "elapsed", "relative"),
              order='relative',
              replications=1)
                                            test replications elapsed relative
4 unlist(lapply(split(dat$value, dat$ID), mean))            1    0.06    1.000
1               DT[, mean(value), by = list(ID)]            1    0.10    1.667
3 ddply(dat, .(ID), summarize, mn = mean(value))            1    0.56    9.333
2            aggregate(. ~ ID, data = dat, mean)            1    3.28   54.667 
```

Venables 和 Ripley (2000, pag.37) 建议组合`unlist`,`lapply`和`split`比仅使用更快`sapply`，在这个特定示例中它甚至比`data.table`

参考：

Venables, WN 和 Ripley, BD (2000)。S 编程。施普林格。统计和计算 ISBN 0-387-98966-8（alk.paper）

# 扩大规模（Matthew Dowle 编辑）

**更多组**

```
dat <- data.frame(ID = as.character(as.hexmode(1:2000)), value = runif(1e6))
DT <- as.data.table(dat)
benchmark(
  DT[, mean(value), by=ID],
  aggregate(.~ID, data=dat, mean),
  ddply(dat, .(ID), summarize, mn = mean(value)),
  unlist(lapply(split(dat$value, dat$ID), mean)),
columns=c("test", "replications", "elapsed", "relative"),
order='relative',
replications=3)
                                            test replications elapsed relative
1                     DT[, mean(value), by = ID]            3    0.33    1.000
4 unlist(lapply(split(dat$value, dat$ID), mean))            3    0.41    1.242
2            aggregate(. ~ ID, data = dat, mean)            3    7.69   23.303
3 ddply(dat, .(ID), summarize, mn = mean(value))            3   17.08   51.758 
```

**更多行**

```
dat <- data.frame(ID = as.character(as.hexmode(1:2000)), value = runif(1e7))
DT <- as.data.table(dat)
benchmark(
  DT[, mean(value), by=ID],
  aggregate(.~ID, data=dat, mean),
  ddply(dat, .(ID), summarize, mn = mean(value)),
  unlist(lapply(split(dat$value, dat$ID), mean)),
columns=c("test", "replications", "elapsed", "relative"),
order='relative',
replications=3)
                                            test replications elapsed relative
1                     DT[, mean(value), by = ID]            3    3.18    1.000
4 unlist(lapply(split(dat$value, dat$ID), mean))            3    4.26    1.340
2            aggregate(. ~ ID, data = dat, mean)            3   90.28   28.390
3 ddply(dat, .(ID), summarize, mn = mean(value))            3  268.86   84.547 
```

**先设置一个键**

```
system.time(setkey(DT,ID))
   user  system elapsed 
   0.71    0.03    0.75 
object.size(dat)
152.7 Mb              # Quite small. Easy for a 32bit PC with 2GB RAM.
object.size(DT)
152.7 Mb
benchmark(
  DT[, mean(value), by=ID],
  aggregate(.~ID, data=dat, mean),
  ddply(dat, .(ID), summarize, mn = mean(value)),
  unlist(lapply(split(dat$value, dat$ID), mean)),
columns=c("test", "replications", "elapsed", "relative"),
order='relative',
replications=3)
                                            test replications elapsed relative
1                     DT[, mean(value), by = ID]            3    0.95    1.000
4 unlist(lapply(split(dat$value, dat$ID), mean))            3    4.08    4.295
2            aggregate(. ~ ID, data = dat, mean)            3   91.76   96.589
3 ddply(dat, .(ID), summarize, mn = mean(value))            3  265.15  279.105 
```

**更多行**

```
dat <- data.frame(ID = rep(1:2000,each=50000), value = runif(1e8))
DT <- as.data.table(dat)
system.time(setkey(DT,ID))
   user  system elapsed 
   2.10    0.25    2.34 
object.size(dat)
   1.1 Gb             # Comfortable for a 64bit PC with 8GB RAM
object.size(DT)
   1.1 Gb
benchmark(
  DT[, mean(value), by=ID],                 
  unlist(lapply(split(dat$value, dat$ID), mean)),
columns=c("test", "replications", "elapsed", "relative"),
order='relative',
replications=3)
                                            test replications elapsed relative
1                     DT[, mean(value), by = ID]            3    7.30    1.000
2 unlist(lapply(split(dat$value, dat$ID), mean))            3  184.83   25.319 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:49:58.910

`plyr`使用以下功能可以轻松完成此类事情`ddply`：

```
dat = data.frame(ID = rep(LETTERS[1:5], each = 20), value = runif(100))
> head(dat)
  ID      value
1  A 0.45800889
2  A 0.11221072
3  A 0.58833532
4  A 0.70056704
5  A 0.08337996
6  A 0.05195357

ddply(dat, .(ID), summarize, mn = mean(value))
  ID        mn
1  A 0.4960083
2  B 0.5809681
3  C 0.4512388
4  D 0.5079790
5  E 0.5397708 
```

如果您的数据集很大，和/或唯一的数量`ID`很大，您可以使用`data.table`. 有关. [_](http://www.jstatsoft.org/v40/i01) _`plyr`

# php - 数组到字符串转换错误，需要先爆炸再内爆

> ID：12956194
> 
> 赞同：2
> 
> 时间：2012-10-18T13:46:16.370
> 
> 标签：php, mysql, arrays, explode, implode

我想分解一个数组，读取每个值并将它们打印回数组中......

我不明白我哪里错了。请帮助我..这是我的代码..

我收到一个数组到字符串的转换错误

```
$query="SELECT categories FROM shops";
$result = mysql_query($query);  
while($column = mysql_fetch_assoc($result)){
    $categories=explode(",",$column['categories']);
    foreach($categories as $value){
        $new_query="SELECT name from categories where id='$value'";
        $name = mysql_query($new_query);    
        $name_column= mysql_fetch_assoc($name);
        array_push($shops_list,$name_column);

    }
}
echo implode(",",$shops_list); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:51:40.520

`$shop_list`未定义，在此行中使用之前`array_push($shops_list,$name_column);`。而且，这条线

```
 array_push($shops_list,$name_column); 
```

需要，因为您需要提及 key `name`，

```
 array_push($shops_list,$name_column['name']); //or better
    $shop_list[] = $name_column['name']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:49:32.623

几个问题：

```
$name_column = mysql_fetch_assoc($name);
$name_column = $name_column['name']; 
```

`name_column`是一个数组。

`shops_list`永远不会被初始化。

您应该使用`[]`而不是`array_push`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:57:57.693

其他人对此嗤之以鼻，但是当您对 $name_column 进行数组推送时，由于 $name_column 是一个数组，您最终会得到：

```
Array
(
    [0] => Array
        (
            [name] => boo
        )
) 
```

显然，对此进行内爆是行不通的。

话虽如此，您真正需要做的不是将类别映射作为逗号分隔的字符串保存在数据库中。标准数据库架构要求您使用映射表。

*   餐桌店
*   表类别
*   具有 shop_id 和 category_id 的表 shop_category_map

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:05:23.887

使用[group_concat](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)检索值。得到结果后，直接使用它们进行搜索。像

```
$result_array = explode(",",$row['category']);

    foreach($result_array as $ra)
    {
    //sql command. fetch here.
    $new_query="SELECT name from categories where id='$value'";
    $name = mysql_query($new_query);    
    $name_column= mysql_fetch_assoc($name);
    $shops_list[] = $name_column;
    } 
```

尝试其他寻求更好的解决方案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-04T12:07:09.490

// 分解一个数组，然后分解直到数组的特定索引

```
$a = '192.168.3.250';
$b = explode('.',$a);
$ar = array();

for($i=0;$i<=2;$i++)
{
   array_push($ar,$b[$i]);
}

$C = implode($ar,'.');
print_r($C); 
```

# c# - 在asp.net中运行cmd

> ID：12956195
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:22.250
> 
> 标签：c#, asp.net, cmd

我想在 asp.net 应用程序中运行 cmd。这是我的代码：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
process.StartInfo.FileName = "cmd";
process.StartInfo.Arguments = "cd C:\\";
process.Start(); 
```

该程序启动 cmd.exe，但我看到的不是“C：>”：

```
C:\program Files\Common Files\Microsoft Shared\Devserver\10.0> 
```

有人可以告诉我我在代码中做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:51:22.763

`Arguments`用作被调用应用程序的参数，因此它与`cmd "cd c:\"`开始菜单下的运行提示中的参数相同。

在这种情况下，我认为您想要的是以下内容（而不是`Arguments`行）...

```
process.StartInfo.WorkingDirectory = "c:\\"; 
```

# vb.net - 在 Ram 中创建太大的 BMP 文件产生参数异常

> ID：12956201
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:29.150
> 
> 标签：vb.net, bitmap, argumentexception

我的代码：

```
Dim bmp_ As New Bitmap(width, height)

' here is for-loop to fill up bitmap   ( bmp_.SetPixel(x, y, Color.White) )

bmp_.Save("D:\test.bmp", ImageFormat.Bmp) 
```

这适用于小文件，但如果我尝试这个：

```
Dim bmp_ As New Bitmap(30000, 30000) 
```

..然后，我在那条线上得到了 ArgumentException。

**问题：有什么办法，如何创建这么大的bmp文件？**

谢谢

编辑：如果位图是 1000000 x 1000000 怎么办？**是否可以在硬盘上创建 BMP 文件并按顺序附加数据？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:10:45.347

如果您使用的是 VS 2010，您可以尝试通过将这些行添加到 Visual Studio 中的“构建后事件”部分来增加 VB 可用的内存量：

```
call "$(DevEnvDir)..\..\vc\vcvarsall.bat" x86
"$(DevEnvDir)..\..\vc\bin\EditBin.exe" "$(TargetPath)"  /LARGEADDRESSAWARE 
```

这里更详细地解释了这个过程：

[http://blogs.msdn.com/b/calvin_hsia/archive/2010/09/27/10068359.aspx](http://blogs.msdn.com/b/calvin_hsia/archive/2010/09/27/10068359.aspx)

# extjs - 选项卡内的手风琴布局，边框布局内的区域在调整区域大小时为我提供滑块。仅在 Chrome 中发生。

> ID：12956202
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:29.663
> 
> 标签：extjs

我正在使用 Ext JS 4 开始使用 Ext，并且在 Google Chrome 上运行时出现了奇怪的行为。我有一个布局合适的视口。在其中，我有一个带有边框布局的面板。它有南部地区、西部地区和中部地区。西部地区有一个标签面板，在第一个标签内我有一个手风琴面板。

问题是当我折叠面板或减小西部区域的大小时，在 Chrome 中我会得到邪恶的滑块。在 Firefox 上它工作得很好，它只发生在 Chrome 中。当我在标签 2（没有手风琴面板的那个）上时，它不会发生。知道可能是什么问题吗？

这些是描述问题的图片：http: [//imgur.com/a/vgbcE](http://imgur.com/a/vgbcE)
这是源代码：

```
Ext.application({
    name: 'HelloExt',
    launch: function() 
    {
        var viewPort = Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            renderTo: 'layout'
        });

        var mainLayout = Ext.create('Ext.panel.Panel', {
            width: 'auto',
            layout: 'border',
            title : 'Gis Web',
            collapasible: true,
            defaults: {
                split: true,
                border: false,
                collapsible: true,
                manageOverflow: 2
            },
            items: [
                {
                    region: 'center',
                    collapsible: false,
                    id: 'center-panel',
                    border: true
                },
                {
                    id: 'south-panel',
                    region: 'south',
                    height: 100
                },
                {
                    id: 'west-panel',
                    region: 'west',
                    width: 200,
                    layout: 'fit'
                }
            ]
        });

        var accordionPanel = Ext.create('Ext.panel.Panel', {
            id: 'accordion-panel',
            layout: 'accordion',
            tabBar: {
                plain: true
            },
            border: false,
            items: [
                {
                    id: 'accordion-1',
                    title: '1'
                },
                {
                    title: '2'
                }
            ]
        });

        var tabPanel = Ext.createWidget('tabpanel', {
            activeTab: 0,
            defaults: {
                autoScroll: true,
                border: false
            },
            layout: 'fit',
            items: [
                {
                    id: 'tab-1',
                    title: 'Tab 1',
                    layout: 'fit'
                },
                {
                    layout: 'fit',
                    title: 'Tab 2'
                }
            ]
        });

        Ext.getCmp('tab-1').add(accordionPanel);

        var panel = Ext.getCmp('west-panel');
        panel.add(tabPanel);
        viewPort.add(mainLayout);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:56:21.300

试试这个西面板：

```
 {
                    id: 'west-panel',
                    region: 'west',
                    width: 200,
                    title: 'west panel',
                    xtype: 'tabpanel',
                    activeTab: 0,
                    defaults: {
                        //autoscroll removed !!! 
                        //autoScroll: true,
                        border: false
                    },
                    items: [
                        {
                            id: 'tab-1',
                            title: 'Tab 1',
                            layout: 'fit'
                        },
                        {
                            layout: 'fit',
                            title: 'Tab 2'
                        }
                    ]

                } 
```

# javascript - 使用地理编码器定位地址不提供任何结果

> ID：12956207
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:44.357
> 
> 标签：javascript, google-maps

我正在实施 Google 地图 V3，我有一个功能可以通过提供地址（例如“5415 E High St. Suite 460, Phoenix, AZ, 85054”）并通过地理编码器搜索来搜索位置，但它没有为我提供任何结果。下面是我的代码片段。我在 bing 中搜索了相同的地址，它为我提供了正确的位置。

```
var geocoder;
    geocoder = new google.maps.Geocoder();
    var address = document.getElementById('txtLocation').value;
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            marker = new google.maps.Marker({
                map: map,
                zoom: 15,
                position: results[0].geometry.location,
                dragable: true
            }); 
```

请让我知道我哪里出错了，我应该怎么做才能获得正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:37:07.203

确保关闭大括号和函数调用。当我将您的示例转换为有效的 JavaScript 时，我可以毫无问题地让它工作：

```
var geocoder = new google.maps.Geocoder();
var address = document.getElementById('txtLocation').value;

geocoder.geocode({ 
  'address': address 
}, function (results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    marker = new google.maps.Marker({
      map: map,
      zoom: 15,
      position: results[0].geometry.location,
      dragable: true
    });
  }
}); 
```

[你可以在这个 jsbin](http://jsbin.com/iducuk/1/edit)上看到它的实际效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:22:18.930

该位置对我有用，这是显示它的页面的链接：

[例子](http://www.geocodezip.com/v3_example_geo2.asp?zoom=17&type=m&addr1=5415%20E%20High%20St.%20Suite%20460,%20Phoenix,%20AZ,%2085054&geocode=1)

# c# - 受保护的内部成员

> ID：12956209
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:53.420
> 
> 标签：c#, .net

> **可能重复：**
> [“受保护”和“受保护内部”有什么区别？](https://stackoverflow.com/questions/585859/what-is-the-difference-between-protected-and-protected-internal)

关于宣布成员受内部保护的真正含义，我看到了很多争议。

在这种情况下，成员的访问修饰符是“受保护的或内部的”还是“受保护的和内部的”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:48:47.947

[文档](http://msdn.microsoft.com/en-us/library/ms173121.aspx)清楚地表明它是“受保护的或内部的” 。

也就是说 - 在程序集和任何子类型中都可以访问成员。

> **protected internal** 类型或成员可以被声明它的程序集中的任何代码访问，也可以从另一个程序集中的派生类中访问。来自另一个程序集的访问必须在派生自声明受保护内部元素的类的类声明中进行，并且必须通过派生类类型的实例进行。

# actionscript-3 - 是否可以在 html 页面上拖动 flex 组件？

> ID：12956210
> 
> 赞同：0
> 
> 时间：2012-10-18T13:46:57.527
> 
> 标签：actionscript-3, apache-flex

我想知道是否可以在应用程序中存在的 iframe 上拖动 flex 组件，例如该组件是可拖动的图像。

我观察到，每当我这样做时，图像都会在 iframe 后面而不是在 iframe 上。

有任何想法吗？

# c++ - gltranslatef 未应用 Delta zeta

> ID：12956214
> 
> 赞同：1
> 
> 时间：2012-10-18T13:47:14.640
> 
> 标签：c++, opengl, glut

该程序应该模拟一个行星围绕另一个行星旋转。
我使用gltranslatef让行星绕着更大的行星移动，但问题是行星应该在更大的行星上空时隐藏，因为dz是-0.5。
但是如果我测试这个程序，我总是看到红色星球在蓝色星球之上。
我还有一个问题：行星旋转太快，我该如何减慢它？

```
#include <OpenGL/OpenGL.h>
#include <GLUT/GLUT.h>
#include "utility.h"

GLfloat dx=0.0;
GLfloat dz=-0.5;
bool plus=true;

void init()
{
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glLoadIdentity();
    glOrtho(-1, 1, -1, 1, -1, 1);
    glEnable(GLUT_DEPTH);
}

void render()
{
    glClearColor(BLACK);
    glClear(GL_COLOR_BUFFER_BIT);
    glColor4f(BLUE);
    glutWireSphere(0.25, 100, 100);
    glPushMatrix();
    glLoadIdentity();
    glTranslatef(-0.5+dx, 0.0, -dz);
    glColor4f(RED);
    glutWireSphere(0.05, 100, 100);
    glPopMatrix();
    glFlush();
}

void idle()
{
    if(plus)
    {
        dx+=0.05;
    }
    else
    {
        dx-=0.05;
    }
    if(dx>=1.0)
    {
        dx=0.5;
        plus=false;
    }
    else if(dx<=-0.0)
    {
        dx=0.0;
        plus=true;
    }
    glutPostRedisplay();
}

int main(int argc, const char * argv[])
{
    glutInit(&argc, (char**)argv);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(150, 150);
    glutInitWindowPosition(0, 0);
    glutCreateWindow("Simple");
    glutIdleFunc(idle);
    init();
    glutDisplayFunc(render);
    glutMainLoop();
    return 0;
} 
```

我还不太明白 idle 函数是如何工作的，为什么它会被调用这么多次？我不能选择调用空闲函数的时间间隔吗？

更多信息：RED 和 BLUE 是 RGB 浮点数，在 utility.h 头文件中定义。
plus 是一个布尔值，用于知道我是否必须减少或增加 dx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:35:39.920

试一试：

```
#include <GL/glut.h>

double GetSeconds()
{
    return glutGet(GLUT_ELAPSED_TIME) / 1000.0f;
}

void render()
{
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3ub(0,0,255);
    glutWireSphere(0.25, 100, 100);

    glPushMatrix();
    glLoadIdentity();

    static double prv = GetSeconds();
    double cur = GetSeconds();
    double delta = cur - prv;
    prv = cur;

    const float DEG_PER_SEC = 60.0f;
    static float angle = 0.0f;
    angle += DEG_PER_SEC * delta;
    while( angle > 360 ) angle -= 360;

    glPushMatrix();
    glRotatef( angle, 0, 1, 0 );
    glTranslatef( 0.5, 0, 0);
    glColor3ub(255,0,0);
    glutWireSphere(0.05, 100, 100);
    glPopMatrix();

    glutSwapBuffers();
}

void reshape(int w, int h)
{
    glViewport(0,0,w,h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-1, 1, -1, 1, -1, 1);
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main(int argc, const char * argv[])
{
    glutInit(&argc, (char**)argv);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(150, 150);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glutCreateWindow("Simple");
    glutReshapeFunc(reshape);
    glutTimerFunc(0, timer, 0);
    glutDisplayFunc(render);

    glEnable( GL_DEPTH_TEST );

    glutMainLoop();
    return 0;
} 
```

重要部分：

*   显式`glMatrixMode()`调用

*   *之前*打电话`glutInitDisplayMode()` *`glutCreateWindow()`*

**   双缓冲需要`glutSwapBuffers()`

    *   通过清除深度缓冲区`GL_DEPTH_BUFFER_BIT`

    *   `glEnable( GL_DEPTH_TEST )`

    *   `glRotatef()`用于行星旋转

    *   基于定时器的动画*

# c# - 在 Web 服务中将文件夹从一个位置移动到另一个位置

> ID：12956216
> 
> 赞同：0
> 
> 时间：2012-10-18T13:47:20.907
> 
> 标签：c#, web-services

我有一个 Web 服务，可以在文件夹 (C:\Incoming) 中查找文件并将它们通过电子邮件发送到指定的电子邮件地址。我希望能够移动该文件夹，一旦它被邮寄到另一个文件夹 (C:\Processed)。

我尝试在下面使用此代码，但它不起作用。

```
 string SourceFile = "C:\\Incoming\\" + "" + Year + "" + Month + "" + Day + "";
 string destinationFile = "C:\\Processed" + "" + Year + "" + Month + "" + Day + ""; 
 System.IO.File.Move(SourceFile , destinationFile); 
```

我收到一条错误消息，提示找不到源文件。我已经验证它确实存在并且我可以访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:50:57.947

您正在移动文件夹而不是文件，您需要遍历文件以逐一复制。

```
string Source = "C:\\Incoming\\" + "" + Year + "" + Month + "" + Day + "";
string destination = "C:\\Processed" + "" + Year + "" + Month + "" + Day + "";
DirectoryInfo di = new DirectoryInfo(Source);
FileInfo[] fileList = di.GetFiles(".*.");
int count = 0;
foreach (FileInfo fi in fileList)
{
    System.IO.File.Move(Source+"\\"+fi.Name , destinationFile+"\\"+fi.Name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:51:49.710

使用`String.Format`一次，第二次使用`System.IO.File.Exists()`以确保文件在那里。

```
string SourceFile = String.Format("C:\\Incoming\\{0}{1}{2}",Year,Month,Day);
 string destinationFile = String.Format("C:\\Processed\\{0}{1}{2}",Year,Month,Day);

 if (System.IO.File.Exists(SourceFile) {
     System.IO.File.Move(SourceFile , destinationFile);
 } 
```

# spring-mvc - 如何在 Spring MVC 中为不同环境设置不同的上下文配置文件

> ID：12956225
> 
> 赞同：0
> 
> 时间：2012-10-18T13:47:53.607
> 
> 标签：spring-mvc, jdbctemplate, applicationcontext

在我的本地机器上，我正在使用某个数据库（sql server）进行开发，但是，当我部署到开发环境时，我们正在运行 mysql。因此，每次部署之前，我都必须更改配置文件中的某些属性。与数据源相关的属性：

```
<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://127.0.0.1:3306/mydb" />
    <property name="username" value="myuname" />
    <property name="password" value="mypwd"/>   
</bean> 
```

spring mvc 中有没有办法为不同的环境提供不同的配置文件？如果是这样，我将如何为正确的环境触发正确的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:40:46.930

```
spring mvc to have different config files for different environments? 
```

我们将数据库连接设置存储在 tomcat 的属性文件中，然后每个 tomcat 安装都有自己特定的数据库连接。例如，本地开发盒连接到本地数据库服务器，UAT 服务器连接到 UAT ... 等等。

然后在应用程序上下文中我们有：

```
<context:property-placeholder location="file:${catalina.home}/conf/database_UAT.properties"
                                  ignore-unresolvable="true"/> 
```

因此，应用程序的部署位置决定了它的数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:37:28.340

我认为仅针对此要求使用不同的配置文件并不是一个好主意。您应该使用两个不同的集合在属性文件中外部化数据库配置，一个用于开发，第二个用于生产。然后在配置文件中使用spring EL来决定使用哪一个。

有关详细信息，请参阅 spring EL[文档](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#expressions-beandef)

# c# - 从 MEF 插件中读取 AppSettings

> ID：12956226
> 
> 赞同：3
> 
> 时间：2012-10-18T13:48:01.597
> 
> 标签：c#, app-config, mef, configurationmanager

我想`ConfigurationManager.AppSettings`从拥有自己`app.config`文件的 MEF 插件访问对象中的值。

但是，加载插件后，文件中的密钥`app.config`不存在。`AppSettings`加载插件的应用程序的密钥仍然存在。

我注意到使用`Settings.settings`文件允许通过文件进行这种行为，`app.config`因此必须以某种方式加载文件。

我的插件看起来像：

```
[Export(IPlugin)]
public class Plugin
{
    public Plugin()
    {
        // reads successfully from app.config via Settings object
        var value1 = Settings.Default["Key1"];

        // returns null from app.config via ConfigurationManager
        var value1 = ConfigurationManager.AppSettings["Key2"]
    }
} 
```

`app.config`看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="..." >
      <section name="Plugin.Settings" type="..." />
    </sectionGroup>
  </configSections>

  <appSettings>
    <add key="Key2" value="Fails" />
  </appSettings>

  <applicationSettings>
    <Plugin.Settings>
      <setting name="Key1" serializeAs="String">
        <value>Works</value>
      </setting>
    </Plugin.Settings>
  </applicationSettings>
</configuration> 
```

我可以手动加载`app.config`文件：

```
var config = ConfigurationManager.OpenExeConfiguration("Plugin.dll");
var value = AppSettings.Settings["Key2"].Value 
```

但这似乎更像是一种解决方法而不是解决方案。

有没有办法`<appSettings>`从插件内部直接访问 MEF 插件？如果没有，有什么推荐的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T09:11:03.950

默认情况下，ConfigurationManager 为入口程序集加载 .config，即启动当前执行进程的程序集。

正确的方法是这样的：

```
[Export(IPlugin)]
public class Plugin
{
    public Plugin()
    {
        var config = ConfigurationManager.OpenExeConfiguration(Assembly.GetExecutingAssembly().Location);
        var value = config.AppSettings.Settings["Key2"].Value;
    }
} 
```

这将使插件自动打开它所编译的 DLL 的 .config，并从那里获取值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:26:43.677

我建议您使用像 Unity 这样的依赖注入工具，以便为您的插件提供所需的配置。通过这种方式，您的插件将不再需要引用 System.Configuration.dll。

# html - 奇怪的深色边框：在 Firefox 中的 css 箭头之后

> ID：12956228
> 
> 赞同：8
> 
> 时间：2012-10-18T13:48:04.747
> 
> 标签：html, css, firefox, pseudo-element

为了在纯 CSS 中为我​​的工具提示制作一个箭头，我在 Firefox 中遇到了一个问题：

![在此处输入图像描述](../Images/c89a8e9b2ebf2f69a32c9e2c45d90ef8.png)

我试图找到导致 Firefox 中黑色边框的原因，但没有成功。

这是[一个 jsfiddle](http://jsfiddle.net/6Wdey/)和一个正在运行的代码片段，演示了这个问题：

```
.tooltip {
    position:relative;z-index:1;
    display:inline-block;padding-right:10px;
}
.tooltip .info {
    position:absolute;left:100%;top:-7px;
    display:block;padding:7px;border:1px solid #cccccc;
    background:#fff;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    -webkit-box-shadow:  1px 1px 8px 0px rgba(0, 0, 0, .2);
    box-shadow:  1px 1px 8px 0px rgba(0, 0, 0, .2);
}
.tooltip .info img {float:left;}
.tooltip:after {
    content: '';
    position:absolute;top:0;left:100%;
    display:block;
    width:0;
    height:0;
    margin-left:-13px;
    border:0 solid transparent;
    border-right-color:#cccccc;
    color:#ccc;
}
.tooltip .info:after {
    content: '';
    position:absolute;top:7px;left:-12px;z-index:10;
    display:block;
    width:0;
    height:0;
    border:transparent solid 6px;
    border-right-color:#fff;
    color:#ccc;
}
```

```
<a class="tooltip">Test for tooltip<span class="info">My tootip information</span></a>
```

第二[个演示](http://jsfiddle.net/6Wdey/1/)演示了背景透明是根本原因，因为用颜色替换透明会导致 Chrome 和 Firefox 中的渲染相同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T14:17:23.207

### 2015年编辑

现在它可以同时使用`RGBa`and `transparent`; 显然，该错误已解决（可能是顺便说一句，因为它仍处于状态 NEW ，而不是处于 FIXED 状态）。

如果它仍然发生在您身上，您可能正在运行旧的 FireFox 版本（当前版本是 38.0.5），您可以使用答案中的解决方法来解决问题。

* * *

它是

> [**错误 646053**](https://bugzilla.mozilla.org/show_bug.cgi?id=646053) - 角落处的深色对角线与透明边框相邻

解决方法是使用[`RGBa`](https://css-tricks.com/rgba-browser-support/)而不是`transparent`：

```
/* old */
border: transparent solid 6px;
border-right-color: #fff;

/* new */
border: rgba(255,255,255,0) solid 6px;
border-right-color: #fff; 
```

# jquery - 带有选择/组合框的 jQuery ATTR 函数

> ID：12956229
> 
> 赞同：1
> 
> 时间：2012-10-18T13:48:09.193
> 
> 标签：jquery, select, input, attr

我正在尝试在我的表单上获取表单字段的类型，但它似乎不适用于组合框

输入有效，但不是选择，并且清楚地显示为“select-one”

![属性](../Images/667096375e5aa3c1ce5795cc507946c0.png)

```
<select id="test">
    <option value=1>1</option>
</select>

<input type="text" id="test2">

<hr>type of select:
<div id="a"></div>
<hr>type of input
<div id="b"></div>

var f = $('#test').attr('type');
$('#a').html(f);
var f = $('#test2').attr('type');
$('#b').html(f);​ 
```

我错过了什么吗？或者这是一个错误？

见：http: [//jsfiddle.net/TZjE5/1/](http://jsfiddle.net/TZjE5/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:50:03.470

切换到[**`.prop`**](http://api.jquery.com/prop/)而不是`.attr`

```
var f = $('#test').prop('type');
$('#a').html(f);

type of select: select-one 
```

# ios - 后台任务有时在模拟器上失败/在设备上总是失败

> ID：12956231
> 
> 赞同：0
> 
> 时间：2012-10-18T13:48:15.793
> 
> 标签：ios

如果用户更改了与推送通知相关的设置，我将在 -applicationDidEnterBackground 中启动一个后台任务，将数据上传到我的服务器。当用户更改设置时，我将静态 BOOL 设置为 YES，并且仅在应用程序进入后台时发送更改。我将结束任务的 a 块传递给方法，因此当到达 connectionDidFinishLoading 时，它会调用它并结束任务。

它在模拟器上大部分时间都有效，但在实际设备上无效。

相关代码：

```
self.bgTask = [application beginBackgroundTaskWithExpirationHandler:^
 {
     [application endBackgroundTask:self.bgTask];
     self.bgTask = UIBackgroundTaskInvalid;
 }];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^
   {
       [PushInfo checkDirty:^{
           NSLog(@"push info sent");
           [application endBackgroundTask:self.bgTask];
           self.bgTask = UIBackgroundTaskInvalid;
       }];
   });
...
// in PushInfo.m :
typedef void (^VoidBlock)();
static BOOL dirty;

+ (void) checkDirty:(VoidBlock)endBlock
{
    if(dirty)
    {
        PushInfo *pi = [[PushInfo alloc] init];
        NSLog(@"sending pushinfo");             // This code is always reached
        [pi setEndBlock:endBlock];
        [pi updatePushInfo];
    }
    else
        endBlock();
}

- (void) updatePushInfo
{
   ...
   // Create a NSURLConnection to send the data
   ...
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  ...
  NSLog(@"sent push info");
  dirty = NO;
  if(endBlock)
  {
    endBlock();
  }
} 
```

我错过了什么吗？编辑：即使它确实将信息发送到模拟器上的服务器，由于某种原因，静态变量仍然是 YES ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:05:14.257

~~尝试将您的代码移动到：~~

~~-(void) applicationWillResignActive:(UIApplication *)application~~

~~我相信将它放在 applicationDidEnterBackground 中为时已晚。~~

检查了文档，你是对的，在 applicationDidEnterBackground 中应该没问题。

另一个建议，尝试在 dispatch_async 块内移动 beginBackgroundTaskWithExpirationHandler 。它*可能*必须在同一个线程中启动，但在文档中没有明确说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:51:22.647

结束使用 +sendSynchronousRequest:returningResponse:error:

# ios - 我可以通过 iTunes Connect 发布对以前版本的 iOS 应用程序的错误修复吗？

> ID：12956234
> 
> 赞同：1
> 
> 时间：2012-10-18T13:48:17.180
> 
> 标签：ios, app-store-connect

情况如下：我刚刚发布了我的应用程序的次要版本 (3.5.3)，它仍然支持 iPhone 3G (iOS 4.2)，但我很快将发布需要 iOS 4.3 及更高版本的主要版本 (4.0)，所以 iPhone从 4.0 起将不再支持 3G。

我想知道我是否可以通过发布更新来继续支持 3.5.x 版本，例如 3.5.4 - iTunes Connect 是否会理解这是 3.5.3 的增量版本，因此不会提供给那些在 4.0 上的？它是否理解 4.0 将始终 > 3.x？还是一次只能激活一个版本？好像是这样...

如果后者是真的，那么我猜想办法是提交 2 个新版本——3.5.4 和 4.0.1——并在 3.5.4 之后立即发布 4.0.1。

有没有人有这样做的经验？如果可能的话，我显然想避免这种情况，但如果出现严重问题，我不想让我的 3G 客户陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:52:17.120

除非您将新的 4.3 版本完全作为不同的应用程序提交（即不是对原始应用程序的升级）。

如果您将 4,3 应用程序作为更新提交，则旧应用程序将被覆盖，并且无法为其提供旧版支持。

尚未更新到 4.3 或使用旧硬件的用户在更新其操作系统或硬件之前不会收到您的应用已更新的通知。

我还认为，如果您确实尝试提交同一应用程序的两个不同版本，只有小的功能更改和操作系统要求之间存在区别，那么其中一个将被拒绝。

# c++ - 指向不同返回类型和签名的函数的指针映射

> ID：12956235
> 
> 赞同：4
> 
> 时间：2012-10-18T13:48:19.590
> 
> 标签：c++, boost, c++11, boost-asio, function-pointers

我正在寻找一种通过字符串输入调用不同函数的方法。

我有一个映射，它将每个唯一字符串与一个函数指针和一个查找函数联系起来，以搜索映射并在找到时返回一个指针。

现在的诀窍是，我需要一种方法来存储和返回指向函数的指针，这些函数至少具有不同的返回类型，如果可能的话，还具有不同的签名。

用法是：

从网络套接字获取字符串输入 -> 查找并执行找到的函数 -> 将结果直接推回套接字以进行序列化和发送，而不关心实际发生了什么。

这是可行的吗？如果没有，人们将如何处理这项任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:06:18.543

这可以通过一些样板代码以不同的方式完成。如果签名的数量足够小，您可以保存多个函数指针向量（每个函数类型一个），然后是一个映射，该映射将函数名称与类型标识符（用于选择向量）和向量中的位置进行映射。

第二个选项是存储一个`boost::variant`（同样，如果签名集很小）。您需要提供一个访问者对象来评估函数（针对存储的每个函数类型）并产生结果。类型由类型管理，`boost::variant`因此不需要将类型标签存储在地图中。

您还可以使用完全类型擦除并将确定要调用的函数类型的标记和`boost::any`存储函数指针的对象存储在映射中。您可以使用类型信息来检索指针并执行函数，但您必须手动处理`switch`基于函数类型的函数。

另一方面，最简单的方法是编写具有固定接口的适配器。然后只需将指向适配器的指针存储在映射中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:45:09.247

虽然您不能存储*不同的*函数指针，但您可以存储包含这些函数的对象。

```
#include <iostream>
#include <cmath>
#include <map>
#include <string>
using namespace std;

class Functor{
public:
    template<class T>
    void operator()(T data){}
};
template<class T>
class BaseFunctor : public Functor{
public:
    virtual void CallFunction(T data){ }
};
class FunctionPointer1 : public BaseFunctor<void *>{
public:
    void doFunction1(){
        cout << "Do Function 1"<<endl;
    }
    template<class T>
    void CallFunction(T data){ doFunction1(); }
    template<class T>
    void operator()(T data){ this->CallFunction(data); }
};

class FunctionPointer2 : public BaseFunctor<int>{
public:
    void doFunction2(int variable){ cout << "Do function 2 with integer variable" << variable <<endl; }
    template<class T>
    void CallFunction(T data) { doFunction2(data);} 
    template<class T>
    void operator()(T data){ this->CallFunction(data); }
};

class FunctionPerformer{
    private:
       map<string,Functor> functions;
    public:
       FunctionPerformer(){
         //init your map.
            FunctionPointer1 function1;
        FunctionPointer2 function2;
            //-- follows
        functions["Function1"] = function1;
        functions["Functions2"] = function2;
            //-- follows
       }
       Functor getFunctionFromString(string str){
                return functions[str]
       }
};
int main(int argc, char *argv[])
{
    map<string,Functor> functions;
    FunctionPerformer performer;

    Functor func1, func2; // to hold return values from perfomer()
    FunctionPointer1 *fn1; // to casting and execute the functions
    FunctionPointer2 *fn2; // to casting and execute the functions
    func1 = performer.getFunctionFromString("Function1");//get data
    func2 = performer.getFunctionFromString("Function2");

    //following two lines to cast the object and run the methods
    fn1 = reinterpret_cast<FunctionPointer1 *>(&func1);
    (*fn1)(NULL);

    //following two lines to cast the object and run the methods
    fn2 = reinterpret_cast<FunctionPointer2 *>(&func2);
    (*fn2)(10);

    system("Pause");
    return 0;
} 
```

我认为编辑的部分使它更清晰？这段代码可以稍微优化一下。玩弄它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T22:55:12.580

这在带有可变参数模板的 C++11 中是可行的。[在https://stackoverflow.com/a/33837343/1496826](https://stackoverflow.com/a/33837343/1496826)检查我的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:50:21.180

不，这真的不可行，如果你想做这样的事情，你需要一种真正的解释语言。一旦签名不是恒定的，那么你需要更多的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:33:46.737

您可以存储负责桥接不匹配的适配器，而不是存储函数指针本身，因为它们彼此差异太大而无法容纳到相同的数据结构中。这是类型擦除的一种形式。一个例子：

```
// Imaginary important resources
blaz_type get_blaz();
qux_type get_qux();

// The functions we'd like to put in our map
int foo(blaz_type);
std::string bar(qux_type);

using context_type = std::tuple<blaz_type, qux_type>;
using callback_type = std::function<void(context_type, socket_type&)>;

using std::get;
std::map<std::string, callback_type> callbacks = {
    {
        "foo"
         , [](context_type context, socket_type& out)
           { marshall(out, foo(get<0>(std::move(context)))); }
    }
    , {
        "bar"
        , [](context_type context, socket_type& out)
          { marshall(out, bar(get<1>(std::move(context)))); }
    }
}; 
```

在此示例中，适配器不是有状态的，因此您实际上可以将`void (*)(context_type, socket_type&)`其用作`callback_type`.

请注意，这种设计有点脆弱，因为`context_type`需要了解存储的回调可能需要的*每种参数。*如果稍后您需要存储需要一种新参数的回调，则需要修改`context_type`——如果您改进上述设计，*不*使用像`0`和`1`作为参数这样的幻数，`std::get`您可以省去一些麻烦（尤其是在从`context_type`) 中删除类型的相反情况。如果所有回调都采用相同的参数，这不是问题，在这种情况下，您可以`context_type`完全放弃自己并将这些参数直接传递给回调。

[LWS 上的演示](http://liveworkspace.org/code/ec17918ba9bd68aafc16e8df99a3e363)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T14:00:40.223

如何让所有这些函数具有相同的签名？您可以使所有返回类型都实现一个接口，或者使用集合、类、联合或结构。论据也一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T14:13:06.897

你不能使用专业化和模板来解决这个问题吗？

```
template <class T>
T FooBar(void * params);

template<> int FooBar<int>( void * params ); 

template<> char FooBar<char>( void * params ); 
```

# html - 应用程序缓存错误事件：资源提取失败 (-1)

> ID：12956237
> 
> 赞同：8
> 
> 时间：2012-10-18T13:48:21.500
> 
> 标签：html, google-chrome, video, cache-manifest, html5-appcache

我正在尝试`mp4`在本地应用程序缓存中存储一​​个视频文件（相当小〜 2.5MB）。

清单看起来像：

```
CACHE MANIFEST
viddy.mp4 
```

Chrome (22.0.1229.94 m) 将在控制台中记录以下内容：

```
Creating Application Cache with manifest http://example.net/cache.manifest
Application Cache Checking event
Application Cache Downloading event
Application Cache Progress event (0 of 1) http://example.net/viddy.mp4
Application Cache Error event: Resource fetch failed (-1) http://example.net/viddy.mp4 
```

当我单击错误旁边的链接时，它可以很好地打开文件。

我的清单以正确的 MIME 类型提供（我使用的是 HTML5 样板`.htaccess`文件）并且提供了视频`Content-Type:video/mp4`

我的文件是不是太大了？我完全能够以这种方式缓存 1MB 图像，所以我认为文件大小应该不是问题？桌面和 iPad 上的 Safari 确实可以很好地缓存视频。

备注：我已经看到**[了这个问题](https://stackoverflow.com/questions/5727306/html5-offline-application-cache-error-event-manifest-fetch-failed-1)**，但它没有涵盖我的问题，因为解决方案似乎与 Python 相关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-26T21:12:11.227

Chrome 不允许以隐身模式存储数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T20:52:47.440

我遇到了类似的问题，这就是我解决它的方法。在这种情况下，Chrome 不会提供任何有关错误的有用信息。我试图在 Safari 中加载相同的页面（Mac，但 Windows 应该也可以），并且我得到了描述，指定资源的响应返回 302（重定向）并且 HTML5 应用程序缓存无法处理它。

在您的情况下，它可能是相同的，但我建议您启用嗅探器并查看您从资源中获得的响应。如果它与 200 不同 - 你发现了问题。

PS 我已经缓存了高达 32 MB 的文件，没有任何问题。

# linux - 如何为 ARM 构建 X11（X 窗口系统）

> ID：12956238
> 
> 赞同：2
> 
> 时间：2012-10-18T13:48:26.823
> 
> 标签：linux, x11, opensuse, xorg

如何在 Open-SUSE 中为 ARM CPU 构建 X11（X 窗口系统）？
我使用 cross-arm-linux-gnueabi-gcc 构建内核

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:52:07.137

你最好使用一个框架。检查[openebedded](http://www.openembedded.org/wiki/Main_Page)或[yocto](http://www.yoctoproject.org/)或[buildroot](http://buildroot.uclibc.org/)。

我个人使用 openembedded，我永远不会手动编译 X。

# android - Android中是否可以有多个活动输入法？

> ID：12956240
> 
> 赞同：4
> 
> 时间：2012-10-18T13:48:31.907
> 
> 标签：android, ime

情况是：我有一个可以读取微芯片代码的蓝牙设备。我创建了一个 IME 应用程序，它接收该代码并将其写入当前活动的 TextView。

但是为了工作，我必须选择我开发的 IME 作为默认键盘。但是，如果我这样做，用户将不再能够使用他的默认键盘进行常规输入。（来自蓝牙设备的输入将仅用于位于网页中的表单中的 1 或 2 个字段。）

（非根）Android 设备是否有可能能够收听两种不同的输入法（除了在我自己的 IME 中实际创建键盘 UI）？

# wpf - WPF Datagrid IsReadOnly 属性错误

> ID：12956243
> 
> 赞同：0
> 
> 时间：2012-10-18T13:48:46.183
> 
> 标签：wpf

我在 WPF 中定义了数据网格，但我无法在 DataGridTextColumn 和 DataGrid 中设置 IsReadOnly 属性

```
 <dg:DataGrid  SelectionUnit="FullRow"    ColumnHeaderStyle="{StaticResource ColumnHeaderStyleByGiri}"  ItemsSource="{Binding QueuedTradesCollection}"  Margin="20"                  
    AlternationCount="2" RowStyle="{StaticResource RowStyle}"

                 VerticalGridLinesBrush="#FFADD8E6" 

                 HorizontalGridLinesBrush="#FFADD8E6" AutoGenerateColumns="False"
    Grid.RowSpan="1" x:Name="grdvw_trades" CellStyle="{StaticResource CellStyle}">

<dg:DataGridTextColumn IsReadOnly="true"     Header="Notional/PairOffAmount"   Width="120" ElementStyle="{StaticResource RightAlignStyle}" SortMemberPath="Notional"  DataFieldBinding="{Binding Notional,StringFormat={}{0:C}}"/> 
```

我收到以下错误消息“无法设置属性 'DataGridColumn.IsReadOnly'，因为它没有可访问的设置访问器”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:30:13.023

我使用 WPF TOOLKIT 2008，IsReadonly 属性仅存在于 WPF Datagrid 中。

# magento - 打开简单产品时转发到可配置产品

> ID：12956249
> 
> 赞同：2
> 
> 时间：2012-10-18T13:49:11.720
> 
> 标签：magento

我有一个 Magento 商店，里面有 2 种简单的产品

*   大红杯
*   大蓝杯

和可配置的产品

*   大杯

分配了那些杯子。

红杯和蓝杯在搜索中可见。

如果用户点击这些简单产品之一，则应打开可配置产品，但应预先选择正确的颜色。

我知道一个简单的产品可以分配给多个可配置产品，因此如果找到两个匹配的可配置产品并且只取第一个，我会记录一个异常。

我想我必须抓住目录/产品/视图的预调度事件，并以某种方式用可配置的产品替换简单的产品。

我现在如何预先配置正确的简单产品？

有没有一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:08:18.073

我找到了一个解决方案：

1.  注册观察员`controller_action_predispatch_catalog_product_view`
2.  检查我们是否有一个简单的产品，其父产品是可配置的产品
3.  创建一个包含简单产品配置数据的数组
4.  将此数据传递给`Mage::helper('catalog/product_view')->prepareAndRender()`（第三个参数）
5.  `FLAG_NO_DISPATCH`通过设置on the front action停止调度

完整代码可在[github 上的 Mestroma_ForwardToConfigurable 模块中](https://github.com/Mestrona/Mestrona_ForwardToConfigurable)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:51:00.937

如果简单产品满足某些要求，一种想法是重定向到可配置产品：

*   将新属性“should_redirect_to_parent”设置为 True（可选）
*   至少有一个父产品（为此，我让你点击 Alex 的链接）

ps：如果您不想进行父产品查找，您可以添加一个新属性，如“redirect_sku”或“redirect_product_id”，以便直接对该产品进行重定向

对于重定向，您应该使用事件`catalog_controller_product_init_after`，如果前两个条件匹配，您将用户重定向到可配置产品。

ps：为了性能优化，您可以改用，`catalog_controller_product_init_before`这将节省一个庞大且无用的 Product::load() 但它需要您构建自定义 SQL 查询来搜索父产品

告诉您是否需要一些代码示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T12:52:09.990

要在可配置产品中预选简单产品，简单产品的地址应如下所示，例如：

> **`/mona-pullover-hoodlie.html#143=167&93=53`**

在哪里

`/mona-pullover-hoodlie.html`- 可配置的产品 URL

`143`, `93`- 属性 ID

`167`, `53`- 选项 ID。

为了更改简单产品的 URL，您可以创建一个[Plugin (Interceptor)](https://devdocs.magento.com/guides/v2.4/extension-dev-guide/plugins.html%5D) for **`Magento\Catalog\Model\Product::getProductUrl()`**，在哪里生成 URL，如上例所示。

使用上面示例中的 URL 参数选择产品已经在 Magento 中实现了开箱即用。

* * *

我`VCT Simple Product URl`在 Magento Marketplace 上制作了一个模块，如果有多个，则选择第一个可配置产品来解决这个问题。

# ruby-on-rails-3 - Rails 服务器没有启动？

> ID：12956250
> 
> 赞同：0
> 
> 时间：2012-10-18T13:49:15.123
> 
> 标签：ruby-on-rails-3

我已经成功安装了 rails 3.2.8，ruby 1.9.3，gems 也更新了。在 myapp 文件夹中输入 rails server 命令时，会显示以下错误

←[31mCould not find gem 'jquery-rails (>= 0) x86-mingw32' in the gems available on this machine.←[0m ←[33m运行`bundle install`安装缺失的gem。←[0m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:07:54.557

在启动 Rails 服务器之前，您是否通过在控制台中使用 `gem install jquery-rails` 或运行命令安装了相应的 gem？`bundle install`

# c# - 通过 .NET (C#) 发布 Google Plus 帖子

> ID：12956251
> 
> 赞同：1
> 
> 时间：2012-10-18T13:49:18.287
> 
> 标签：c#, .net, google-plus

美好的一天。

有没有人有一个工作示例如何通过 .NET (C#) 制作 Google Plus 帖子。

我已经尝试过 google 和 stackoverflow 搜索，但没有找到解决方案。

我成功获得帖子：

```
 public void Post(string text)
    {
        PlusService plus = new PlusService {Key = "MYVERYSECRETKEY"};

        ActivitiesResource ar = new ActivitiesResource(plus, null);

        ActivitiesResource.ListRequest list = ar.List("108055870103885325249", new ActivitiesResource.Collection());
        ActivityFeed feed = list.Fetch();

        string activityKey = "";
        foreach (var a in feed.Items)
            if (a.Url == "https://plus.google.com/108055870103885325249/posts/EtvvUgn8eKz")
            {
                activityKey = a.Id;
                break;
            }

        ActivitiesResource.GetRequest get = ar.Get(activityKey);
        Activity act = get.Fetch();
        var sb = new System.Text.StringBuilder();
        sb.AppendLine("Title: " + act.Title);
        sb.AppendLine("URL:" + act.Url);
        sb.AppendLine("Published:" + act.Published);
        sb.AppendLine("By:" + act.Actor.DisplayName);
        sb.AppendLine("Annotation:" + act.Annotation);
        sb.AppendLine("Content:" + act.Object.Content);
        sb.AppendLine("Type:" + act.Object.ObjectType);
        sb.AppendLine("# of +1s:" + act.Object.Plusoners.TotalItems);
        sb.AppendLine("# of reshares:" + act.Object.Resharers.TotalItems);
    } 
```

但我找不到任何发帖的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:06:11.667

目前，Google+ API 不允许将帖子写入用户的活动流。您可以使用[Google+ REST API 中的 moment.insert 方法将](https://developers.google.com/+/api/latest/moments)[应用活动](https://developers.google.com/+/features/app-activities)写入用户的个人资料，用户可以选择是公开分享还是分享到他们的圈子。

[您可以通过 POST 到moment.insert](https://developers.google.com/+/api/latest/moments/insert)端点以与 .NET 中的其他 REST API 类似的方式使用 REST API 。

此功能现在可用于请求`https://www.googleapis.com/auth/plus.login`范围并指定应用想要 在[Google+ 登录按钮](https://developers.google.com/+/web/signin/#button_attr_requestvisibleactions)中或直接在 OAuth 查询参数中写入参数[的时刻类型的应用。](https://developers.google.com/+/api/moment-types)`request_visible_actions`

# c# - 如何告诉 VS2010 在我的清单中包含文件以进行发布？

> ID：12956252
> 
> 赞同：3
> 
> 时间：2012-10-18T13:49:18.290
> 
> 标签：c#, visual-studio-2010, clickonce, manifest

我有一个通过 ClickOne 机制发布的应用程序。我遇到的问题是它没有发布我的`NLog.config`文件，这是我的应用程序运行所必需的。我已经浏览了`Application Files`屏幕，但我不认为`NLog.config`这是一个可供选择的选项。我的`NLog.config`文件有一个内置操作`Content`并设置为复制到输出目录。如果重要，该`NLog.config`文件位于我正在发布的项目中引用的另一个项目中。

我知道我可以使用 MAGE 基本上扫描我的发布目录并让它更新我的清单，但我正在寻找一种自动执行此操作的方法。

我有哪些选择？

### 可能的解决方案

一种解决方案是通过代码而不是 XML 配置 NLog。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:10:40.457

我也使用这个很棒的工具，我也有一个单击一次程序：在解决方案资源管理器中，单击您的 nlog.config。在属性窗口中，将 Build Action 作为内容。

确保您看到项目属性窗口的“应用程序文件”。

瞧！

# php - 打印到纸上选定的数据

> ID：12956254
> 
> 赞同：3
> 
> 时间：2012-10-18T13:49:19.880
> 
> 标签：php, mysql

我有一个数据库（image1）并使用 PHPMaker 创建了图形界面（image2）。我想要的是在页面底部添加一个按钮，该按钮将打印所选字段中的所选数据（image3）。

谁能告诉我该怎么做？
我必须使用 php 代码还是 javascript？

![在此处输入图像描述](../Images/ba836cb1639a65ff29e465b7978aae46.png) ![在此处输入图像描述](../Images/36a8077866010161aa375b94566c45a0.png) ![在此处输入图像描述](../Images/2d086c5ba8b39fdd84334308550f81fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:51:48.027

只需通过回显以下内容添加打印链接即可在页面上创建“打印”链接

```
echo "<a href='#' onclick='javascript:window.print();'>Print Page</a>"; 
```

单击按钮将使浏览器向用户显示默认的打印对话框。

# linux - 如何从 python 脚本暂停 bash 脚本？

> ID：12956259
> 
> 赞同：3
> 
> 时间：2012-10-18T13:49:29.987
> 
> 标签：linux, subprocess

我想从 python 脚本暂停 bash 脚本，步骤如下所示：

1.  我从 python script reader.py 开始 script writer.sh。

2.  当 writer.sh 输出第三行时，我希望使用`reader.py`.

3.  我想使用一些命令恢复 writer.sh 的执行`reader.py`。

这是这两个脚本，问题是`writer.sh`在执行 sleep 命令时不会暂停`reader.py`。`writer.sh`所以我的问题是，当它输出字符串“third”时如何暂停？确切地说（这是我工作中的实际问题）我想`writer.sh`停下来，因为`reader.py`停止读取`writer.sh`.

`reader.py`：

```
import subprocess
from time import sleep

print 'One line at a time:'
proc = subprocess.Popen('./writer.sh', 
                        shell=False,
                        stdout=subprocess.PIPE,
                        )
try:                        
    for i in range(4):
        output = proc.stdout.readline()
        print output.rstrip()
        if i == 2:
            print "sleeping"
            sleep(200000000000000)
except KeyboardInterrupt:
    remainder = proc.communicate()[0]
    print "remainder:"
    print remainder 
```

`writer.sh`：

```
#!/bin/sh

echo first;
echo second;
echo third;
echo fourth;
echo fith;

touch end_file; 
```

相关问题是，如果 script1 输出文本行，例如`script1 | script2`，并且 script2 在读取第三行输入后暂停，是否会在 Linux 上使用管道暂停 script1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:56:24.010

要*暂停*bash 脚本，您可以将`SIGSTOP`信号发送到`PID`.

如果你想让它*恢复*，你可以发送`SIGCONT`信号。

您可以使用`pid = proc.pid`.

看`man 7 signal`

# python - 为 openkinect 安装 python 包装器时出错

> ID：12956263
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:49:49.617
> 
> 标签：python, openkinect

我试图在 Ubuntu 12.04 上为 OpenKinect 安装 python 包装器，但我不能因为这个错误：

```
$ sudo apt-get install python2.7-dev 
python2.7-dev : Depends: libexpat1-dev but it is not going to be installed
                 Depends: libssl-dev but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

Python 包装器需要以下依赖项：

1.  赛通
2.  python-dev（上面的错误）
3.  python-numpy

我已经查看了这篇[文章](https://askubuntu.com/questions/59563/how-to-install-a-different-version-of-python-dev)，但它对我不起作用

如何安装 python-dev？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:01:28.960

标记更新部分的所有复选框并重新加载源。

![在此处输入图像描述](../Images/adf3088b8d0549e96dd7b0a359ea6563.png)

# ios - 在越狱手机中运行应用程序

> ID：12956268
> 
> 赞同：-2
> 
> 时间：2012-10-18T13:50:03.057
> 
> 标签：ios, xcode, jailbreak

这可能是一个简单而愚蠢的问题，但我是为苹果开发的新手，对此感到抱歉。我用最新的 xcode 构建的应用程序会在越狱手机和普通手机上运行吗？为了能够为普通和越狱的 iphone 开发应用程序，我应该知道什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:56:02.533

如果您使用您的配置文件对应用程序进行代码设计，它们将在越狱设备上运行。

顺便说一句，IAP 和 Game Center 在这些设备上的沙盒模式下无法正常工作（这不会影响 Appstore 中的分布式构建）。

# typescript - 在 TypeScript 中创建非匿名 AMD 模块

> ID：12956270
> 
> 赞同：10
> 
> 时间：2012-10-18T13:50:06.070
> 
> 标签：typescript

有没有办法在 Typescript 中创建非匿名 AMD 模块。当我定义这样的模块时：

```
export module Bootstrapper {
  export function run() {
    var i = 0;
  }
} 
```

生成代码是：

```
define(["require", "exports"], function(require, exports) {
  (function (Bootstrapper) {
    function run() {
        var i = 0;
    }
    Bootstrapper.run = run;
  })(exports.Bootstrapper || (exports.Bootstrapper = {}));
}) 
```

如何定义这样的非匿名模块：

```
define('bootstrapper', ["require", "exports"], function(require, exports) {
  (function (Bootstrapper) {
    function run() {
        var i = 0;
    }
    Bootstrapper.run = run;
  })(exports.Bootstrapper || (exports.Bootstrapper = {}));
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-19T00:22:49.100

[此功能最近通过此拉取请求](https://github.com/Microsoft/TypeScript/pull/1158)添加到 TypeScript 主分支。声明 AMD 模块名称带有以下参考注释：

`/// <amd-module name='MyModuleName'/>`

将生成以下 JavaScript：

`define("MyModuleName", ["require", "exports"], function (require, exports) { ... }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:22:46.780

正如您在第 1202 行的文件[emiter.ts](http://typescript.codeplex.com/SourceControl/changeset/view/1d80dfedbf80#src%2fcompiler%2femitter.ts)中看到的（搜索`" var dependencyList = "`），它没有实现。

你可以在 codeplex 上打开一个关于它的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T22:19:12.177

从 TS 0.9.x 开始，无法命名 AMD 模块。TS 编译器只会生成格式为的定义语句

```
define( ['dep1', 'dep2', ..., 'depN'], function( __dep1__, __dep2__, ..., __depN__ ) {... } ); 
```

TS 论坛上的讨论：[https ://typescript.codeplex.com/discussions/451454](https://typescript.codeplex.com/discussions/451454)

# codeigniter - codeigniter 中的预控制器挂钩

> ID：12956273
> 
> 赞同：2
> 
> 时间：2012-10-18T13:50:08.290
> 
> 标签：codeigniter, hook

我在我的项目中使用预控制器挂钩 codeigniter

描述：我们使用子域概念和三个模板（主题）。例如：我的网站是 xyz.com。这是有一个第一个模板。

这个 xyz 网站的一些商业注册。例如。abc（商业）。我们创建 abc.xyz.com。abc 选择 2 个模板。浏览器中的 abc.xyz.com 需要显示第二个模板。它没有显示第二个模板。它只显示第一个模板。

当我们多次单击站点上的任何链接时，模板 2 被设置为 abc.xyz.com 链接。

我正在使用代码点火器。加载会话，自动加载文件中的数据库。

我使用预控制器挂钩来检查 url 是 xyz 还是任何子域 abc.xyz.com 在挂钩中，如果 url 是子域之一，我正在设置模板。

但是当 abc.xyz.com 在浏览器中时，模板没有显示。当我为某些点击刷新 url 或单击任何标题链接时，它显示了商业 abc 的实际模板。

请帮助我解决此问题或为我提供一些解决方案。

```
<?php
class Subdomain_check extends CI_Controller{
public function __construct(){
    parent::__construct();
    $this->CI =& get_instance();

    if (!isset($this->CI->session))
    {
    $this->CI->load->library('session');
    }

}
function checking()
{

$subdomain_arr = explode('.', $_SERVER['HTTP_HOST']); //creates the various parts

if($subdomain_arr[0] == 'www')
{
    $subdomain_name = $subdomain_arr[1]; //2ND Part            
}
else
{
    $subdomain_name = $subdomain_arr[0]; // FIRST Part                      
}        

header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");   
header ("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header ("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache"); 

if( $subdomain_name != 'xyz' )
{
    $where = array();
    $where['subdomain_name'] = $subdomain_name;
    $where['status'] = 1;
    $this->db->from('subdomain_map');
    $this->db->where($where); 
    $query = $this->db->get();         
    if($query->num_rows() < 1)
    {
    header('Location:http://xyz.com/index.php?/error');
    }   
    else
    {
    $result = $query->row_array();
    $this->CI->session->set_userdata('subdomain_id',$result['subdomain_id']);
    $this->CI->session->set_userdata('subdomain_name',$result['subdomain_name']);
    $org_id = gat_organisationid_using_subdomainid($result['subdomain_id']);
    $this->CI->session->set_userdata('organisation_id', $org_id);

    if($org_id)
    {
    $templ_id = get_templid_using_organisationid($org_id);
    $org_logo = get_organisation_logo($org_id);
    }  

    if($templ_id){
    if($this->session->userdata('pinlogin'))
    $this->CI->session->set_userdata('template_set', 4);
    else
    $this->CI->session->set_userdata('template_set', $templ_id);               
    }

    if($org_logo)
    $this->CI->session->set_userdata('org_logo', $org_logo);              
    }           
}
else
{
    $this->CI->session->unset_userdata('subdomain_id');
    $this->CI->session->unset_userdata('subdomain_name');
    if( $this->CI->session->userdata('user_id') && $this->CI->session->userdata('user_category')<=2 )
    {
    $this->CI->session->unset_userdata('organisation_id');
    $this->CI->session->unset_userdata('org_logo');
    }
}    
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:05:46.600

这是支持每个子域的自定义主题所需的基本检查

```
// Gets the current subdomain
$url = 'http://' . $_SERVER['HTTP_HOST'];
$parsedUrl = parse_url($url);
$host = explode('.', $parsedUrl['host']);

// store $host[0], which will contain subdomain or sitename if no subdomain exists
$subdomain = $host[0];   

// check for subdomain
if ($subdomain !== 'localhost' OR $subdomain !== 'mysite')
{
    // there is a subdomain, lets check that its valid
    // simplified get_where using activerecord
    $query = $this->db->get_where('subdomain_map', array('subdomain_name' => $subdomain, 'status' => 1));

    // num_rows will return 1 if there was a valid subdomain selected
    $valid = $query->num_rows() === 1 ? true : false;

    if($valid)
    {
         // set theme, user_data, etc. for subdomain.
    }
    else
    {
        // get user out of here with redirect
        header('Location: http://' . $_SERVER['HTTP_HOST'] . '/error');
        exit();
    }
} 
```

请注意，当使用带有 codeigniter 的子域时，您应该将 config > base_url 设置为以下内容：

`$config['base_url'] = 'http://' . $_SERVER['HTTP_HOST'] . '/poasty/poasty-starterkit/';`

这将确保诸如 site_url() 和其他 CI 助手之类的东西仍然有效。

通读您的代码，我可能会建议使用更多 Codeigniters 内置功能，例如您的`__construct`函数有很多不必要的代码：

**原始代码**

```
public function __construct(){
    parent::__construct();

    /**
    * CI already exists 
    * since this controller extends CI_controller, there is already and instance of CI available as $this.
    $this->CI =& get_instance();
    */

    /**
    * duplicate check, CI checks if library is loaded
    * and will ignore if loaded already
    if (!isset($this->CI->session))
    {
        $this->CI->load->library('session');
    }
    */

    $this->CI->load->library('session');

} 
```

**针对 Codeigniter 进行了优化**

```
public function __construct()
{
    parent::__construct();
    $this->CI->load->library('session');
} 
```

我建议阅读 Codeigniter user_guide 以更好地了解 codeigniter 可以做什么。@see [http://codeigniter.com/user_guide/](http://codeigniter.com/user_guide/)

我希望这个对你有用！

# php - Zend Form 2 可以与 Zend Framework 1 一起使用吗？

> ID：12956276
> 
> 赞同：3
> 
> 时间：2012-10-18T13:50:14.340
> 
> 标签：php, zend-framework, zend-form, zend-framework2

我尝试将新框架的 Form 文件夹与 Zend Framework 1 中的文件夹交换，但没有成功。

我还尝试将 ZF1 指向库新的 Form 2.0 文件夹，但我也无法让它工作。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T10:11:11.693

可以将 ZF2 组件与 ZF1 一起使用，并且在大多数情况下相对简单。

首先，您需要将 zf2 克隆到您的库路径中，因此 cd 到`library`并键入：-

```
git clone https://github.com/zendframework/zf2.git Zf2 
```

这将在库下创建一个 Zf2 文件夹。

我们现在需要告诉自动加载器如何找到 zf2 文件。在您的引导程序中添加以下内容：-

```
protected function _initZf2()
{
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->pushAutoloader(new App_Loader_Autoloader_Zf2(), 'Zend');
} 
```

然后我们创建自动加载器。我有一个名为 App_ 的命名空间，它包含在 application.ini 中，其中包含以下行：-

```
autoloadernamespaces[] = "App_" 
```

我在 App/Loader/Autoloader/Zf2.php 中创建了自动加载器：-

```
class App_Loader_Autoloader_Zf2 implements Zend_Loader_Autoloader_Interface
{
    public function autoload($class)
    {
        if(strstr($class, '\\')){
            $zf2Class = explode('\\', $class);
            $path = 'Zf2/library/' . implode('/', $zf2Class) . '.php';
            include_once $path;
        }
    }
} 
```

现在 zf1 在出现正确的命名空间时知道在哪里可以找到 zf2 类。我们可以创建一个表单，例如 Application/Forms/Zf2.php :-

```
use Zend\Form\Form;
use Zend\Form\Element;
use Zend\Form\Element\Text;

class Application_Form_Zf2 extends Form

{
    public function prepareElements()
    {
        $this->add(array(
            'name' => 'name',
            'options' => array(
                'label' => 'Your name',
            ),
            'attributes' => array(
                'type'  => 'text',
            ),
        ));
    }
} 
```

现在，在您的控制器中，您可以实例化 zf2 表单：-

```
$this->view->form = new Application_Form_Zf2();
$this->view->form->prepareElements(); 
```

由于我们使用的是 ZF1 视图，我们不会自动访问用于呈现 ZF2 表单的[视图助手](http://framework.zend.com/manual/2.0/en/modules/zend.form.view.helpers.html)，因此我们必须在需要时在视图中显式实例化它们：-

```
$form = $this->form;
$formHelper = new \Zend\Form\View\Helper\Form();
$formText = new \Zend\Form\View\Helper\FormText();
$formLabel = new \Zend\Form\View\Helper\FormLabel();
echo $formHelper->openTag($form);
echo $formLabel($form->get('name'));
echo $formText($form->get('name'));
echo $formHelper->closeTag($form); 
```

这将输出以下 HTML：-

```
<form action="" method="POST">
    <label for="name">Your name</label>
    <input name="name" type="text" value="">
</form> 
```

这种方法使您可以对表单的输出进行大量控制，我建议将我放在上面 phtml 文件中的一些代码隐藏在 ZF1 视图助手中。

# c++ - 如何实现两个功能相同的接口

> ID：12956281
> 
> 赞同：1
> 
> 时间：2012-10-18T13:50:31.810
> 
> 标签：c++, interface, abstract-class, implementation

> **可能重复：**
> [具有相同名称的 C++ 虚拟覆盖函数](https://stackoverflow.com/questions/3150310/c-virtual-override-functions-with-same-name)

我有一个类，它必须用相同的方法实现两个接口。例如：

```
class IInterface1
{
public:
    virtual void Method() = 0;
};

class IInterface2
{
public:
    virtual void Method() = 0;
};

class Implementation : public IInterface1, IInterface2
{
    // ???
}; 
```

这可能吗？如果是，在 .h 和 .cpp 文件中使用的确切语法是什么。

笔记。我可以通过两个实现 IInterface1 和 IInterface2 的帮助类来做到这一点。但是我很好奇是否可以直接做。

# apache-camel - 骆驼＃路线步骤与内存/性能

> ID：12956283
> 
> 赞同：3
> 
> 时间：2012-10-18T13:50:35.700
> 
> 标签：apache-camel

这可能是一个愚蠢的问题，但是说我有一个非常重要的信息，我想用 Camel 处理。我的路线中的步数将如何影响内存使用？骆驼是否会为路由中的每个步骤深度复制我的消息有效负载，即使 DSL 步骤仅从消息中读取，或者它是否在这里做了一些聪明的事情？

保持路由向下并在“hughe” bean 中处理大型消息是否更好？

这是一个示例路由，它执行各种操作，但不更改有效负载。

```
from("foo:bar")
  .log(..)
  .setProperty(..)
  .setHeader(..)
  .log(..)
  .choice()
    .when(simple(... ) ) 
      .log(..)
      .to(..)
    .when(simple(..))
      .log(..)
      .to(..)
  .end() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:42:02.587

据我了解，对于这样一个简单的流水线路线，会创建一个包含主体的 Exchange，并沿着路线中的每一步传递。其他 EIP 确实会导致 Exchange 被复制（如多播、窃听等）......

同样，如果您在与外部资源交互的过程中有步骤，这可能导致不必要的主体的任何类型的复制/克隆/转换/序列化，那么您可以使用诸如[声明检查模式](http://camel.apache.org/claim-check.html)之类的东西来减少这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T08:03:03.383

通过在步骤中复制或重新创建消息对象的路线，骆驼交换是相同的。身体只是被引用了。所以通常你不应该有问题。

这是由每个骆驼处理器单独处理的。所以一些处理器可能会复制身体。通常这是处理器真正在身体上工作的情况。所以在这种情况下是无法避免的。

# google-maps - onclick 隐藏/显示谷歌地图标记

> ID：12956284
> 
> 赞同：0
> 
> 时间：2012-10-18T13:50:36.337
> 
> 标签：google-maps, google-maps-markers

我将有几个标记（现在我只做两个，直到我得到结构）并且我希望能够点击打开标记信息框的外部链接，但是当一个标记的信息框打开另一个关闭。我还希望能够隐藏和显示标记。因此，当按下一个按钮时，它会隐藏第一个标记，当按下另一个按钮时，它会显示第一个并隐藏第二个。

现在我的地图是这样设置的，我不确定从这里去哪里以及如何切换可见性设置和信息气泡。

```
var LOC_850 = new google.maps.LatLng(42.326435,-71.149499);

var mapOptions = {
  zoom: 16,
  center: LOC_850,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

var CONTENT_850 = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
    'south west of the nearest large town, Alice Springs; 450&#160;km '+
    'Heritage Site.</p>'+
    '</div>';

var INFO_850 = new google.maps.InfoWindow({
    content: CONTENT_850
});
var BTN_850 = 'CONTAINER_850';
var MARKER_850 = new google.maps.Marker({
    position: LOC_850,
    map: map,
    title: 'Hello World!'
});
google.maps.event.addListener(MARKER_850, 'click', function() {
  INFO_850.open(map,MARKER_850);
});
google.maps.event.addDomListener(document.getElementById(BTN_850), 'click', function() {
  INFO_850.open(map,MARKER_850);
});

var LOC_850_60bus_out = new google.maps.LatLng(42.326822,-71.150157);
var CONTENT_850_60bus_out = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h1 id="firstHeading" class="firstHeading">DIFFERENT</h1>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
    'south west of the nearest large town, Alice Springs; 450&#160;km '+
    'Heritage Site.</p>'+
    '</div>';

var INFO_850_60bus_out = new google.maps.InfoWindow({
    content: CONTENT_850_60bus_out
});
var BTN_850_60bus_out = 'CONTAINER_850_60bus_out';
var MARKER_850_60bus_out = new google.maps.Marker({
    position: LOC_850_60bus_out,
    map: map,
    title: 'Hello World!'
});
google.maps.event.addListener(MARKER_850_60bus_out, 'click', function() {
  INFO_850_60bus_out.open(map,MARKER_850_60bus_out);
});
google.maps.event.addDomListener(document.getElementById(BTN_850_60bus_out), 'click', 
function() {
  INFO_850_60bus_out.open(map,MARKER_850_60bus_out);
});

}

function loadScript() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
    'callback=initialize';
document.body.appendChild(script);
}

window.onload = loadScript;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:25:35.900

参见 [this example "categories" map(http://www.geocodezip.com/v3_MW_example_categories.html) （翻译自[Mike Williams 的 v2 教程示例](http://econym.org.uk/gmap/categories.htm)

我有

*   （我称之为）v2 信息窗口功能（单个信息窗口）
*   隐藏/显示标记类别的复选框。

# ruby-on-rails-3 - ActiveRecord 关联上的装饰器模式和类型不匹配

> ID：12956285
> 
> 赞同：2
> 
> 时间：2012-10-18T13:50:36.777
> 
> 标签：ruby-on-rails-3, activerecord, decorator

我正在使用装饰器类为我的模型添加一些功能。我只希望这些信息用于处理某些值，但不希望将任何内容保存到数据库中。

我有我的装饰类，比如：

```
class Deco

   def initialize o
     @target = o
   end
   def method_missing method, *args, &block
     @target.send(method, *args, &block)
   end
   #my extra methods
end 
```

我像这样使用它：

```
deco_model = Deco.new(model) 
```

这里的问题是当我想将它`deco_mode`与另一个相关联时，我得到一个类型不匹配错误，这是有道理的，但是如果我将以下方法添加到我的装饰器类中：

```
def class
   @target.class
end 
```

我仍然遇到同样的错误，但它说：Model(#aaaaaa) 预期，得到 Model(#aaaaa) 是的，“模型”将是我的模型的类，并且对象 id 在两种情况下都是相同的.. .所以如果对象ID相同，为什么我仍然得到异常？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:15:05.933

原来我还必须覆盖`is_a?`里面使用的方法`ActiveRecord::Associaions::Association`

做完之后：

```
def is_a? klass
  @target.class.object_id == klass.object_id
end 
```

不再抛出异常。

# sql-server - SQL Server 的最佳插入/更新批处理

> ID：12956286
> 
> 赞同：1
> 
> 时间：2012-10-18T13:50:38.770
> 
> 标签：sql-server, performance, sql-server-2008, tsql, insert

我正在从 c# 代码大批量进行频繁的插入和更新，我需要尽快完成，请帮助我找到加快此过程的所有方法。

1.  `StringBuilder`使用, 单独的语句构建命令文本`;`
2.  不要使用`String.Format`or `StringBuilder.AppendFormat`，它比多次`StringBuilder.Append`调用更慢
3.  重用`SqlCommand`和`SqlConnection`
4.  不要使用`SqlParameter`s（限制批量大小）
5.  使用`insert into table values(..),values(..),values(..)`语法（每条语句 1000 行）
6.  使用尽可能少的索引和约束
7.  尽可能使用简单的恢复模式
8.  ?

以下是帮助更新上述列表的问题

1.  每个命令（每次`ExecuteNonQuery()`调用）的最佳语句数是多少？
2.  在同一批次中进行插入和更新是好还是分开执行更好？

tcp 正在接收我的数据，因此请不要建议任何涉及从文件或外部表读取数据的批量插入命令。

插入/更新语句率约为 10/3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:16:10.443

使用表值参数。当使用大量行时，它们可以很好地扩展，并且您可以获得接近 BCP 级别的性能。我在博客中介绍了一种从 C# 方面使该过程变得非常简单的[方法](http://www.atlantis-interactive.co.uk/blog/post/2011/05/21/A-generic-list-for-passing-table-valued-parameters-to-SQL-Server.aspx)。您需要了解的所有其他信息都在 MSDN 站点[上](http://msdn.microsoft.com/en-us/library/bb675163.aspx)。通过这种方式，您将获得*更好的性能，而不是围绕正常的 SQL 批处理进行一些小的调整。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:24:07.230

从 SQLServer2008 开始，TableParameters 是可行的方法。看这篇文章（第四步）

[http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/](http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/)

我将其与并行化插入过程相结合。认为这也有帮助，但必须检查;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:13:59.783

使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)到临时表中，然后使用[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)SQL 命令合并数据。

# c# - 在调用`Invoke`时避免`ObjectDisposedException`

> ID：12956288
> 
> 赞同：5
> 
> 时间：2012-10-18T13:50:49.877
> 
> 标签：c#, .net, winforms, multithreading, invoke

我有两种形式，一种是`MainForm`，第二种是`DebugForm`。MainForm 有一个按钮，可以像这样设置和显示 DebugForm，并将引用传递给已经打开的 SerialPort：

```
private DebugForm DebugForm; //Field
private void menuToolsDebugger_Click(object sender, EventArgs e)
{
    if (DebugForm != null)
    {
        DebugForm.BringToFront();
        return;
    }

    DebugForm = new DebugForm(Connection);

    DebugForm.Closed += delegate
    {
        WindowState = FormWindowState.Normal;
        DebugForm = null;
    };

    DebugForm.Show();
} 
```

在 DebugForm 中，我附加了一个方法来处理`DataReceived`串行端口连接的事件（在 DebugForm 的构造函数中）：

```
public DebugForm(SerialPort connection)
{
    InitializeComponent();
    Connection = connection;
    Connection.DataReceived += Connection_DataReceived;
} 
```

然后在`Connection_DataReceived`方法中，我在 DebugForm 中更新了一个 TextBox，即使用 Invoke 进行更新：

```
private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
{           
    _buffer = Connection.ReadExisting();
    Invoke(new EventHandler(AddReceivedPacketToTextBox));
} 
```

但我有一个问题。一旦我关闭 DebugForm，它就会`ObjectDisposedException`在`Invoke(new EventHandler(AddReceivedPacketToTextBox));`Line 上抛出一个。

我怎样才能解决这个问题？欢迎任何提示/帮助！

**更新**

我发现如果我在按钮事件 click 中删除事件，并在该按钮单击中关闭表单，一切都很好，我的调试表单毫无例外地被关闭......多么奇怪！

```
private void button1_Click(object sender, EventArgs e)
{
    Connection.DataReceived -= Connection_DebugDataReceived;
    this.Close();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:25:13.543

关闭表单会处理 Form 对象，但不能强制删除其他类对其的引用。当您为事件注册表单时，您基本上是将表单对象的引用提供给事件的源（本`SerialPort`例中的实例）。

这意味着，即使您的表单已关闭，事件源（您的`SerialPort`对象）仍在向表单实例发送事件，并且处理这些事件的代码仍在运行。那么问题是，当这段代码尝试更新已处理的表单（设置其标题、更新其控件、调用`Invoke`等）时，您将收到此异常。

因此，您需要做的是确保在您的表单关闭时取消注册该事件。这就像检测表单正在关闭并取消注册`Connection_DataReceived`事件处理程序一样简单。您可以通过覆盖该`OnFormClosing`方法并在其中取消注册事件来方便地检测表单正在关闭：

```
protected override OnFormClosing(FormClosingEventArgs args)
{
    Connection.DataReceived -= Connection_DataReceived;
} 
```

我还建议将事件*注册*移动到方法的覆盖，`OnLoad`否则它可能会在表单完全构造之前接收事件，这可能会导致混乱的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:47:58.510

您尚未显示该`AddReceivedPacketToTextBox`方法的代码。

您可以尝试在该方法中检查已处理的表单：

```
private void AddReceivedPacketToTextBox(object sender, EventArgs e)
{
    if (this.IsDisposed) return;

    ...
} 
```

在关闭表单时分离`DataReceived`事件处理程序可能是一个好主意，但这还不够：仍然存在竞争条件，这意味着您`AddReceivedPacketToTextBox`可以在表单关闭/处置后调用。序列将类似于：

*   工作线程：触发 DataReceived 事件，Connection_DataReceived 开始执行
*   UI 线程：表单关闭并释放，DataReceived 事件分离。
*   工作线程：调用 Invoke
*   UI 线程：在处理表单时执行 AddReceivedPacketToTextBox。

> 我发现如果我在按钮事件 click 中删除事件，并在该按钮单击中关闭表单，一切都很好，我的调试表单毫无例外地被关闭......多么奇怪！

这并不奇怪。多线程错误（“Heisenbugs”）是与时间相关的，像这样的小变化会影响时间。但这不是一个强大的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:30:45.637

这个问题可以通过添加一个计时器来解决：

```
 bool formClosing = false;
    private void Connection_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
      if (formClosing) return;
      _buffer = Connection.ReadExisting();
      Invoke(new EventHandler(AddReceivedPacketToTextBox));
    }
    protected override void OnFormClosing(FormClosingEventArgs e)
    {
      base.OnFormClosing(e);
      if (formClosing) return;
      e.Cancel = true;
      Timer tmr = new Timer();
      tmr.Tick += Tmr_Tick;
      tmr.Start();
      formClosing = true;
    }
    void Tmr_Tick(object sender, EventArgs e)
    {
      ((Timer)sender).Stop();
      this.Close();
    } 
```

感谢[MSDN的 JohnWein](http://social.msdn.microsoft.com/Forums/en/winforms/thread/cd2f052c-b245-4df7-a935-d0b1be943cf3)

# c - 二维数组动态内存分配崩溃

> ID：12956290
> 
> 赞同：1
> 
> 时间：2012-10-18T13:50:59.100
> 
> 标签：c, calloc, dynamic-allocation

> **可能重复：**
> [如何在 C 中正确设置、访问和释放多维数组？](https://stackoverflow.com/questions/12462615/how-do-i-correctly-set-up-access-and-free-a-multidimensional-array-in-c)

我正在尝试使用 calloc 为 2D 数组动态分配内存。列固定为 2，因此只有动态行。

这是我一直在尝试的：

```
unsigned int **pts, rows;
int main()
{
    //some code

    pts = (unsigned int **)calloc(2*rows, sizeof (unsigned int **));
}

//The code to access the array :
for(k=1;k<=i;k++)
{
    printf("\nX%d=",k);
    scanf("%d",&pts[k][0]);
    printf("\nY%d=",k);
    scanf("%d",&pts[k][1]);
} 
```

但问题是，在访问数组时，程序崩溃了。我正在使用带有 MinGW GCC 的 Eclipse。

请让我知道是否需要在此处放置更多数据或告诉我如何处理此问题，因为这是我的第一篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:58:47.010

都铎王朝的答案是正确的解决方案。但是为了更深入地了解您的代码错误的原因......

您的代码实际上在做的只是分配一个长度为 2 * 行的数组，该数组指向指向 int 类型的指针。

您要创建的是这样的：

```
an array of int** -> int* -> int
                          -> int
                          -> int
                          -> ...more
                  -> int* -> int
                          -> int
                          -> int
                          -> ...more
                  -> int* -> int
                          -> int
                          -> int
                          -> ...more
                  -> ...more 
```

您实际创建的是这样的：

```
an array of int** -> int* -> nothing (null address)
                  -> int* -> nothing...
                  -> ...more 
```

然后，您尝试将 int 分配给您的*int* **数组中的零初始化*int * 之一所指向的**空*地址之一（您会看到，calloc 已确保您的所有*int* * 都为零）

 ***当你试图执行

```
scanf("%d",&pts[k][0]); 
```

pts[k] 指的是*int* ** 数组中的第 (k - 1) 个元素，但如上所示，尽管您的代码确实为该元素分配了空间，但它已将其初始化为零。所以，这个 pts[k] 指向 NULL。所以 scanf 已经获得了一个基于与 NULL 地址的零偏移量的地址......现在你应该清楚这是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:55:02.347

这是执行此操作的方法：

```
pts = (unsigned int **)calloc(rows, sizeof (unsigned int *));
for(int i = 0; i < rows; i++) {
    pts[i] = (unsigned int *)calloc(2, sizeof (unsigned int));
} 
```***

# php - PHP在objective-c中返回不同

> ID：12956297
> 
> 赞同：0
> 
> 时间：2012-10-18T13:51:25.157
> 
> 标签：php, objective-c, ios

在 php 这一行

```
 for($i = 0; $i < strlen($string); $i++){
        $keychar = substr($key, ($i % strlen($key))-1,1);
        echo $keychar;
    }
returns `70684292517 ` 
```

如果我在objective-c中做这个等价物，它会返回一个完全不同的值。

```
 for (int i = 0; i < string.length; i++) {
        NSString *_keychar = [key substringWithRange:NSMakeRange((i % key.length)-1,1)];
//The fix
NSString *_keychar = [key substringWithRange:NSMakeRange(((i % key.length) ? (i % key.length) : (key.length) )-1,1)];
        NSLog(@"%@",_keychar);
    }

    returns `068429251` 
```

那么，为什么 obj-c 代码不返回与 php 相同的值（应该如何）？我究竟做错了什么？字符串的长度为 11，键的值为 0684292517

固定的

# android - Android：为按钮设置自定义渐变

> ID：12956305
> 
> 赞同：0
> 
> 时间：2012-10-18T13:51:48.020
> 
> 标签：android

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">    
    <solid android:color="#EAEAEA"/>    

    <corners android:bottomLeftRadius="5dip"
                android:topRightRadius="5dip"
                android:topLeftRadius="5dip"
                android:bottomRightRadius="5dip"
    />
</shape> 
```

如何将`gradient image`我的按钮设置为背景。我看到一个属性渐变，但看不到其中包含背景的任何属性。

**注意**：我是非常新的 Android 开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:56:52.013

我不确定您向我们展示的 XML 与渐变有什么关系。您可以在文件`drawable`夹中的 XML 文件中定义渐变：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient 
        android:startColor="#FFFFFFFF" 
        android:endColor="#FFD9D9D9"
        android:angle="270"
     />
    <corners android:bottomLeftRadius="5dip"
             android:topRightRadius="5dip"
             android:topLeftRadius="5dip"
             android:bottomRightRadius="5dip"
    />
</shape> 
```

（例如，将其另存为`my_gradient.xml`）

然后在您的布局 xml 文件中，您可以拥有：

```
<Button android:id="@+id/ButtonStart"
    android:layout_width="100dp" android:layout_height="wrap_content"
    android:background="@drawable/my_gradient"
    android:textColor="@color/white" android:textSize="14sp"
    android:textStyle="bold" android:text="@string/game_start"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:55:50.680

您应该在 XML 中定义渐变或使用图像（包括圆角）。您不能轻松地将 XML 形状与图像混合在一起（至少，因为您是初学者，我建议您先使用简单的东西）。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="#474946"
        android:endColor="#181818"
        android:angle="270"/>
    <corners android:radius="5dp" />
</shape> 
```

然后您可以使用`android:background="@drawable/bg_custom_button"`

您应该了解九个补丁，它们允许您为您的背景定义可拉伸的图像，并且当设计不适用于 XML 时，它们可以帮助您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:59:31.823

您的形状方向正确，但您可以使用渐变而不是实体

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">    
     <gradient
        android:angle="270"
        android:endColor="@color/gradient_bottom"
        android:startColor="@color/gradient_top" />    

    <corners android:bottomLeftRadius="5dip"
            android:topRightRadius="5dip"
            android:topLeftRadius="5dip"
            android:bottomRightRadius="5dip"
    />
</shape> 
```

假设上述形状保存为 gradient_background.xml 并且您将其保存在可绘制文件夹中（它应该在哪里）。您现在可以将此可绘制对象用作按钮的背景

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/gradient_background"
    android:text="Button" /> 
```

# css - How can I create a GWT layout which has a fixed header and footer that allows a scroll pane center to automatically size?

> ID：12956311
> 
> 赞同：1
> 
> 时间：2012-10-18T13:51:56.227
> 
> 标签：css, gwt, layout, docklayoutpanel

I have a design in mind which I'm struggling to convert to a GWT layout.

Basically I need a header and footer which have a fixed pixel height and full browser width, the snag is they must both always be visible to the user.

I've been playing around with the DockLayoutPanel with north and south panels and then adding a scroll panel to the center, this works great when I use Unit.PCT but I need to fix the north and south panels so that they are always a set height in pixels but still allow the center scroll panel to automatically fill the gap between the two.

A picture is worth a thousand words so I drafted up this quickly:

[draft design](http://jamiestreet.co.uk/dropbox/stackoverflow_problem.png)

If you have any ideas how this could be solved I'd be very grateful to hear from you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:06:34.513

```
final DockLayoutPanel dPanel = new DockLayoutPanel(Unit.PX);

dPanel.addNorth(new FlowPanel(), 48);
dPanel.addSouth(new FlowPanel(), 48);

final Panel centerPanel = new FlowPanel();

for (int i = 0; i < 100; i ++)
  centerPanel.add(new Label("Lorem ipsum"));

dPanel.add(new ScrollPanel(centerPanel));

RootLayoutPanel.get().add(dPanel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:58:07.093

Maybe it's a little bit off topic, BUT, I would suggest for you to use this if it is still not too late and if you have the freedom to choose a design: [http://gwtbootstrap.github.com/](http://gwtbootstrap.github.com/) Twitter Bootstrap looks nice and it is easy to use, and the kind folks at gwt-bootstrap have ported it into GWT in a way that you can use it in a similar fashion to using standard GWT components. This thing has really simplified our design/layouting problems.

# php - simplexml_load_string 警告

> ID：12956318
> 
> 赞同：1
> 
> 时间：2012-10-18T13:52:16.340
> 
> 标签：php, simplexml, libxml2

我正在使用`simplexml_load_string`php 的函数将 xml 字符串转换为可用于未来处理的对象。

我这样编码：

```
simplexml_load_string( $strXml, NULL, LIBXML_NOWARNING ); 
```

给出警告信息但正确执行。

好像我这样编码：

```
simplexml_load_string( $strXml, NULL, LIBXML_ERR_NONE ); 
```

未能执行服务。

我已经尝试过`LIBXML_ERR_NONE`, `LIBXML_ERR_ERROR`。

有什么方法可以获取对象但没有警告消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-04T16:17:58.697

这对我有用。

```
simplexml_load_string($strXml, 'SimpleXMLElement', LIBXML_NOWARNING | LIBXML_NOERROR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-09T19:52:51.740

[您可以通过调用libxml_use_internal_errors](https://secure.php.net/manual/en/function.libxml-use-internal-errors.php)来抑制这些错误。

```
libxml_use_internal_errors (true);
$xml = simplexml_load_string($user_input);
if (!$xml) {
    $xml_errors = libxml_get_errors();
    foreach ($xml_errors as $err) {
        var_dump($err);
    }
    libxml_clear_errors();
} 
```

您可能还想查看[libxml_get_errors](https://secure.php.net/manual/en/function.libxml-get-errors.php)和[libxml_clear_errors](https://secure.php.net/manual/en/function.libxml-clear-errors.php)

# android - 如何在 Android 上“预览布局”xml 文件？

> ID：12956320
> 
> 赞同：3
> 
> 时间：2012-10-18T13:52:24.247
> 
> 标签：android, android-layout, adt, eclipse-adt

我正在创建一堆布局文件，并想大致预览它们在 Android 上的外观。有没有办法做到这一点？如果是这样，最好的方法是什么？

现在，我每次都必须启动设备并导航到 Activity 才能看到布局。此外，Eclipse 的预览看起来并不理想，因为它不能正确显示内容（这是最好的吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:54:40.410

您可以创建一个虚拟活动，并将意图 MAIN 设置为它。

当您想测试该活动的外观时，只需将 onCreate 上的 setLayout 设置为您要测试的 xml，您就会看到它。

我也不信任 Eclipse 预览版，而且 AVD 真的很慢，所以我附加了一个 android 设备并使用一个虚拟活动来测试布局

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:13:19.550

[您可以在http://www.droiddraw.org/](http://www.droiddraw.org/)使用该实用程序。

只需在输出窗口中复制并粘贴您的布局 xml，然后单击“加载”。这是双向的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:54:57.243

除了在真实设备或模拟器中运行之外，Eclipse 的预览版是它所获得的最好的。确保在预览屏幕中设置正确的屏幕大小和 API 版本选项；这有时会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:20:10.087

您可以像这样创建一个活动：

```
//add the imports

public class TestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Ask for a full screen window
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);
    }

    /* (non-Javadoc)
     * @see android.app.Activity#onStart()
     */
    @Override
    protected void onStart() {

        // TODO Auto-generated method stub
        super.onStart();
        // Get the info about the screen

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

更改`activity_main`布局，您可以测试任何布局，点击`Graphical Layout`您的`xml`.

如果您不信任`Eclipse`-preview 并且想要避免慢速`Android emulator`，请尝试启用`Virtualization`（英特尔处理器）。您必须安装软件包`Intel x86 Emulator Accelerator (HAXM)`和`Intel x86` `System-Image`. 接下来，您可以`AVD`使用该系统映像创建一个，模拟器将加速。

否则，如果您没有功能强大的虚拟化处理器，我很抱歉，但您必须信任 Eclipse 预览版；）

再见！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:06:05.807

在 xml 文件的以下行中添加为 ListView 的参数：

**工具：listitem="@layout/my_custom_list_item"**

其中 my_custom_list_item 是您要用作列表项的布局。

# xml - 在 for-each 中添加到 XSL 变量

> ID：12956326
> 
> 赞同：1
> 
> 时间：2012-10-18T13:52:41.270
> 
> 标签：xml, xslt, xslt-2.0, xpath-2.0

我希望在每次迭代 for-each 时将变量的值附加到自身，问题是我不确定如何去做。这是我目前拥有的：

```
<xsl:variable name="lineQty" select="0" />
<xsl:for-each select="/*/*/*/*/*/xsales:CustInvoiceTrans">
  <xsl:value-of select="$lineQty + (xsales:LineNum * xsales:Qty)" />
</xsl:for-each>
<test>
  <xsl:value-of select="$lineQty" />
</test> 
```

这只是输出 0

## 编辑

我将其更改为以下内容：

```
<xsl:variable name="lineQty">
  <xsl:for-each select="/*/*/*/*/*/xsales:CustInvoiceTrans">
    <xsl:value-of select="xsales:LineNum * xsales:Qty" />
  </xsl:for-each>
</xsl:variable> 
```

但这输出`12345`. 这样做的原因是它完成了 1x1、2x1、3x1、4x1、5x1，因为我的 5 行每行的数量都是 1。所以现在需要做的就是将这些值相加，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:34:59.827

您使用的是 XSLT 2.0 吗？如果是这样，试试这个：

```
 <xsl:variable name="seq" as="xs:double*">
        <xsl:for-each select="/*/*/*/*/*/xsales:CustInvoiceTrans">
            <xsl:sequence select="xs:double(xsales:LineNum) *  xs:double(xsales:Qty)"/>
        </xsl:for-each>
    </xsl:variable>
    <test>
        <xsl:value-of select="sum($seq)"/>
    </test> 
```

编辑

@Markus 建议使用更短的版本：

```
 <test>
        <xsl:value-of select="sum(/*/*/*/*/*/xsales:CustInvoiceTrans/(xs:double(xsales:LineNum) * xs:double(xsales:Qty)))" />
    </test> 
```

谢谢 ：）

# perl - Perl 解析文本文件

> ID：12956328
> 
> 赞同：-3
> 
> 时间：2012-10-18T13:52:53.673
> 
> 标签：perl, file, validation, parsing

在这里，我正在编写一个解析文件的 perl 程序，它包含多行，在每一行中它有三个字段：名称、字节大小和用户。

任何验证文件的示例代码？例如，如果我想通过参数检查给定文件是否为验证文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:05:10.620

如果这是 CSV 文件，请使用 CSV 解析器，例如。 [http://perlmeme.org/tutorials/parsing_csv.html](http://perlmeme.org/tutorials/parsing_csv.html)

# ruby-on-rails - 如何允许具有管理员角色的用户编辑其他用户的角色？

> ID：12956329
> 
> 赞同：0
> 
> 时间：2012-10-18T13:52:53.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, roles

我使用设计进行身份验证，只有管理员可以创建用户。

我使用 cancan 在用户创建期间为用户分配角色。

我希望管理员查看所有用户角色，并且**管理员应该能够编辑用户的角色。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:37:33.933

查看[https://github.com/marklocklear/devise_multi_tentant](https://github.com/marklocklear/devise_multi_tentant)。在能力.rb 我有...

```
class Ability
  include CanCan::Ability

  def initialize(user)
    can :manage, :all if user.role == "admin"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:42:37.707

1.  您可以为用户模型添加角色属性。然后，当用户进入管理仪表板时，您可以检查用户的角色。如果用户不是管理员，则重定向到另一个页面（使用`before_filter :function`）

2.  但是，您可以使用 gem`cancan`代替手动执行所有操作，它非常流行且易于使用！您可以在此处找到文档：[GitHub](https://github.com/ryanb/cancan) 或在 rails cast [episodes 192](http://railscasts.com/episodes/192-authorization-with-cancan)

基本上，它将创建一个能力模型，您将为用户声明权限，一个样本能力类

```
class Ability

  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.admin?
      can :update, User
    end
 end
end 
```

之后，您可以为用户在操作、控制器或视图中授权，如示例[见此链接](https://github.com/ryanb/cancan/wiki/Checking-Abilities)

PS：对不起，如果我的英语太糟糕了，谢谢:)

# c# - WinForms 中的 MVP 导航

> ID：12956332
> 
> 赞同：3
> 
> 时间：2012-10-18T13:53:20.567
> 
> 标签：c#, design-patterns, mvp

一直在学习 MVP，并尝试在 WinForms 中使用它编写测试应用程序。我正在努力寻找一个解释清楚的示例，说明如何在我的表单/视图之间导航。例如，程序启动，我想显示一个登录对话框，如果登录成功则进入我的主视图。目前，我的 Main 方法如下所示：

```
static void Main()
{
   var loginView = Injector.Resolve<ILoginView>();
   if (loginView.DoLogin() != LoginResult.OK) return;
   var mainView = Injector.Resolve<IMainView>();
   Application.Run(mainView); // won't work as mainView isn't a form
} 
```

Injector 对象只是一个 IoC 工具（目前是 StructureMap）的包装器。问题是，我读过我不应该通过 Injector 手动创建实例，因为它们应该通过构造函数注入来完成。

我已经设法做到了这一点，但在导航方面却没有。我想不出一种优雅的方式来浏览我的观点，并且想知道这里是否有人可以对此有所了解？我已经阅读了一些关于应用程序控制器的内容，但没有找到一个可以清楚地展示它的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:38:18.880

关于导航问题：

> 我已经设法做到了这一点，但在导航方面却没有。我想不出一种优雅的方式来浏览我的观点，并且想知道这里是否有人可以对此有所了解？我已经阅读了一些关于应用程序控制器的内容，但没有找到一个可以清楚地展示它的示例。

下面是我使用的构造的简化版本。请注意，调用该`NavigateTo`方法时会自动调用 setup 和 tear down 挂钩。另外，对@AlexBurtsev +1，因为他的回答暗示了这种相同的方法。

```
// Presenter can and should offer common services for the
// subclasses 
abstract class Presenter
{

   public void Display()
   {
      OnDisplay();
   }

   public void Dismiss()   
   {
      OnDismiss();
   }

   protected virtual OnDisplay() // hook for subclass
   {   
   }

   protected virtual OnDismiss() // hook for subclass
   {   
   }

   private NavigationManager _navMgr;

   internal NavigationMgr NavigationManager
   {   
      get
      {
         return _navMgr;
      }
      set
      {
         _navMgr = value;
      }

   }

}

// NavigationManager is used to transition (or navigate) 
// between views
class NavigationManager
{

   Presenter _current;

   // use this override if your Presenter are non-persistent (transient)
   public void NavigateTo(Type nextPresenterType, object args)
   {   
      Presenter nextPresenter = Activator.CreateInstance(nextPresenterType);   
      NavigateTo(nextPresenter);   
   }

   // use this override if your Presenter are persistent (long-lived)
   public void NavigateTo(Presenter nextPresenter, object args)
   {
      if (_current != null)
      {
         _current.Dismiss()
         _current.NavigationMgr = null;
         _current = null;
      }

      if (nextPresenter != null)
      {
         _current = nextPresenter;
         _current.NavigationMgr = this;
         _current.Display(args);
      }         
   }

}

class MainMenuPresenter : Presenter
{

   private IMainMenuView _mainMenuView = null;

   // OnDisplay is your startup hook
   protected override void OnDisplay()
   {
      // get your view from where ever (injection, etc)
      _mainMenuView = GetView();      

      // configure your view
      _mainMenuView.Title = GetMainTitleInCurrentLanguage();
      // etc      
      // etc

      // listen for relevent events from the view
      _mainMenuView.NewWorkOrderSelected += new EventHandler(MainMenuView_NewWorkOrderSelected);

      // display to the user
      _mainMenuView.Show();
   }

   protected override void OnDismiss()
   {
      // cleanup
      _mainMenuView.NewWorkOrderSelected -= new EventHandler(MainMenuView_NewWorkOrderSelected);
      _mainMenuView.Close();
      _mainMenuView = null;
   }

   // respond to the various view events
   private void MainMenuView_NewWorkOrderSelected(object src, EventArgs e)
   {
      // example of transitioning to a new view here...
      NavigationMgr.NavigateTo(NewWorkOrderPresenter, null);            
   }

}

class NewWorkOrderPresenter : Presenter
{

   protected override void OnDisplay()
   {
      // get the view, configure it, listen for its events, and show it
   }

   protected override void OnDismiss()
   {
      // unlisten for events and release the view
   }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:40:46.100

好久没用过WinForms了，试着回答一下。我会使用与 WPF Prism 相同的策略。

关于 MainView 和 Application.Run：创建一个主区域（根窗体），里面有一个空容器，里面可以容纳 UserControl（我忘了确切的类名），然后当你需要切换根视图时，你做 RootView.SetView(UserControl view)它将执行诸如 Form.Clear()、Form.AddChild(view) 之类的操作。

关于导航和使用容器：您可以创建一个导航服务：INavigationService，您可以使用 INavigationService.NavigateView(String(or Type) viewName, params object[] additionalData) 等方法将其注入构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:06:08.200

您可以在 mainView 中插入一个返回实际表单的方法。然后您可以调用

```
Mainview:IMainView 
{
        Form GetView()
        {
              //return new Form();
        }
 } 
```

在 Main 你可以调用，

```
Application.Run(mainView.GetView()) 
```

# python - 以全精度打印 numpy.float64

> ID：12956333
> 
> 赞同：30
> 
> 时间：2012-10-18T13:53:22.423
> 
> 标签：python, numpy

将 numpy.float64 打印和转换为字符串的正确/可接受的方法是什么？我注意到只是使用`print`或`str()`会失去一些精度。但是，`repr`保持完整的精度。例如：

```
>>> import numpy
>>> print numpy.float64('6374.345407799015')
6374.3454078
>>> print repr(numpy.float64('6374.345407799015'))
6374.3454077990154 
```

1.  我假设只是调用 print 变成调用`str()`float64 对象。那么`__str__()`对于 numpy.float64 是否使用类似的东西实现`'%s' % (float(self))`或以某种方式使用 Python 的内置函数强制转换 float64 `float()`？我试图快速查看 numpy 的源代码，但并不是很明显发生了什么。

2.  我一直认为`repr()`应该返回可用于`eval()`重新创建对象的有效 Python 代码。这是公认的约定吗？幸运的是，在这种情况下，numpy 不遵循这个约定，因为`repr()`只返回原始数字作为字符串而不是类似`"numpy.float64('6374.345407799015')"`.

所以，这一切都让我感到困惑。将 numpy.float64 转换为字符串和/或打印它同时保证您始终具有相同的完整精度的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-06-13T13:35:04.340

该`astype`方法效果很好：

```
>>> numpy.float64('6374.345407799015').astype(str)
'6374.345407799015' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T14:00:57.953

查看[numpy.set_printoptions](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)。具体来说，

```
numpy.set_printoptions(precision=15) 
```

# c# - 道路网络的 L 系统如何修改？

> ID：12956334
> 
> 赞同：7
> 
> 时间：2012-10-18T13:53:21.673
> 
> 标签：c#, xna-4.0, procedural-generation

问候每一个人！

我目前正在研究道路网络的程序生成，并偶然发现了 L 系统算法。根据我从有关该主题的各种科学论文以及有关该主题的其他论文中的理解，该算法被更改为使用“全局目标和局部约束”，其中修改所采用的路径以适应输入值，例如地形和人口密度。现在我理解了那部分，或者至少理解了整体概念，但是我应该如何修改算法呢？

现在我有一个字符串，它根据一组规则在时间步长上进行修改。然后我分析字符串并在遍历字符时移动和转动，渲染结果并在屏幕上获得漂亮的图案。

现在，要创建主要道路网络，我是否仍应使用带有规则集的基本公理，然后应用约束？如果是这样，一套好的起始值和规则会是什么？

还是我应该用约束和全局目标替换基本规则集？如果是这样，原来的 L 系统算法还剩下什么？

非常感谢任何帮助，并且作为记录，我在 C# 和 XNA 中执行此操作，尽管我认为这更多是在理论层面上。

谢谢你的时间，

卡尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T07:38:12.907

所以，上周我一直在谷歌搜索、阅读和理解更多内容，我找到了解决问题的方法，我认为我可以分享。我发现这篇精彩的博客文章基本上为我理顺了一切：

[http://www.newton64.ca/blog/?p=747#7472](http://www.newton64.ca/blog/?p=747#7472)

该帖子基于此处创建的另一篇博文：

[http://mollyrocket.com/forums/viewtopic.php?t=730&sid=a9a2628b059a727cbde67309757ed178](http://mollyrocket.com/forums/viewtopic.php?t=730&sid=a9a2628b059a727cbde67309757ed178)

现在，就 L 系统而言，我不太确定这种方法是否真的是 L 系统了。当然，构建网络的迭代过程有相似之处。在 L 系统中，字符串随着迭代而增长，并且使用“[”或“]”创建分支（至少在我见过的情况下），并且在我现在采用的方法中，我正在使用 while 循环和优先级队列几乎是一样的。

我还想指出，我并不完全理解“描述”如何使用 L 系统生成道路网络的论文，所以我的推理可能有点偏离这里。但是除了算法命名和边界之外，我找到了一个适合我的解决方案，这对现在来说很好。

快乐编码！

卡尔

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T14:20:28.430

我是上述博客文章的作者——很高兴你发现它有用！我从来没有完成过*Spare Parts*的工作——如果不出意外，我将不得不[更改名称](https://www.ea.com/spare-parts)——但你让我再次考虑它。

当然，我描述的算法可能不再是 L 系统了。不过，重要的是，我认为它在功能上几乎是等效的。在编程方面，我是一个实证主义者，所以如果它有效，请编译它！

**编辑**：我已经删除了我的旧网站，但我在[这里](http://newton64.github.io/blog/2010-05-17-spare-parts.html)重新创建了帖子。希望它仍然有帮助！

# jquery - jQuery：需要在鼠标移出时隐藏两个“显示”的元素

> ID：12956336
> 
> 赞同：0
> 
> 时间：2012-10-18T13:53:27.507
> 
> 标签：jquery, jquery-ui-datepicker

我有一个带有标准 jQuery/suckerfish 样式菜单的 Drupal 站点，我对其进行了修改以使最终的顶级 LI 通过 jQuery 具有一些特殊功能。具体来说，在鼠标悬停时，它会显示一个具有预订功能的选项卡。单击日期输入字段时，jQuery UI 日期选择器将激活。我需要此预订选项卡*和*日历以保持活动状态，只要它们处于焦点/悬停/鼠标悬停状态。

#reservations-tab div 中包含的 HTML 在这里： http: [//pastebin.com/BPp4vS0R](http://pastebin.com/BPp4vS0R)

我没有直接把它放在这篇文章中，因为它很长。

jQuery：

```
$(document).ready(function(){  
 // Add div for reservations to display beneath "Stay" link when hovered.
  $('#reservations-tab').hide();
  $('.menulinkstay' || '#reservations-tab').mouseenter(function(){
    $('#reservations-tab').show().fadeTo(400, 1);
  });
  $('.menulinkstay' && '#reservations-tab').mouseleave(function(){
    $('#reservations-tab').stop().fadeTo(400, 0);
  });
  // Datepicker & Datepicker div hide
  $('.datepicker-input .field').datepicker();
  $('#reservations-datepicker-checkin .widget-icon').click(function() {
      $('#reservations-datepicker-checkin .datepicker-input  .field').datepicker('show');
}), $('#reservations-datepicker-checkout .widget-icon').click(function() {
  $('#reservations-datepicker-checkout .datepicker-input .field').datepicker('show');
});
}); 
```

我尝试添加`&& '#ui-datepicker-div'`到第一个 .mouseleave 函数；在 datepicker 调用的“显示”部分之后，我还尝试了多种变体，将其作为独立的代码行。我尝试过使用 .hover、.mouseover 和 .mouseleave。

在所有情况下，我都可以将其移至#reservations-tab 正确淡入的位置，并且 datepicker 可以工作，但是 A.）当 UI Datepicker 获得焦点时，#reservations-tab div 消失，或者 B.）UI Datepicker 出现并按预期工作，但#reservations-tab 不会消失，将鼠标完全移出该区域。

非常感谢您的任何/所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:27:37.083

OK one solution I've used for similar problems in the past. Basically **If** you can structure your HTML like so:

```
<div id="reservations-widget">
 <!--widget code-->
</div>
<div class="mainDiv">

</div> 
```

then you can structure your jQuery like:

```
$(document).ready(function(){  
 // Add div for reservations to display beneath "Stay" link when hovered.
  $('#reservations-tab').hide();
  $('.menulinkstay' || '#reservations-tab').mouseenter(function(){
    $('#reservations-tab').show().fadeTo(400, 1);
  });
  $('div.mainDiv').hover(function(){
    $('#reservations-tab').stop().fadeTo(400, 0);
  });
  // Datepicker & Datepicker div hide
  $('.datepicker-input .field').datepicker();
  $('#reservations-datepicker-checkin .widget-icon').click(function() {
      $('#reservations-datepicker-checkin .datepicker-input  .field').datepicker('show');
}), $('#reservations-datepicker-checkout .widget-icon').click(function() {
  $('#reservations-datepicker-checkout .datepicker-input .field').datepicker('show');
});
}); 
```

So now rather then the mouse leave function being fired whenever you hover over the datepicker, providing both your datapicker and hover overs our outside of `mainDiv` they should stay visible.

When the user leaves the drop down "area" they should enter your main div, thus firing the hover event on this and hiding your menus.

Hope that's explained satisfactory and helps.

# sql - 在 SQL Navigator 查询中定义函数

> ID：12956337
> 
> 赞同：4
> 
> 时间：2012-10-18T13:53:27.897
> 
> 标签：sql, oracle

我想从一段 SQL 代码中提取一个函数，该代码在一个查询中多次使用。我正在寻找类似于以下（由我发明）语法的功能：

```
with f(x) as (return x+1)
select f(thing1), f(thing2), f(thing3) from things 
```

在示例中，thing1、thing2、thing3 是表“things”中的整数列。另外，想象一下 f 比加一函数更复杂。

如何在查询中定义函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:07:49.777

在查询的子句中声明函数`WITH`是不可能的，但根据 OOW 提供的信息，它将是 12c 版本。因此，现在您需要创建一个函数作为模式对象，无论它是独立函数还是包的一部分。例如：

```
create or replace function F(p_p in number)
return number
is
begin
  return p_p + 1;
end; 
```

然后在查询中调用它，确保作为参数传递给函数的列的数据类型与函数的参数具有相同的数据类型：

```
select f(col1)
     , f(col2)
     , ...
     , f(coln)
  from your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:22:17.427

您是否正在尝试为动态表和表的列构建一个函数，我会做一些这样的代码吗？而且您不能在查询的 WITH 子句中声明函数。

```
 SELECT f ( tablename,columnname1 ),
           f ( tablename,columnname2 ),
           ........
    FROM   tablename;

    Create or replace function f (tableName varchar2,ColumnName varchar2)
    Return somethingHere
    Is
        varTableName varchar2(200);
        varColumnName varchar2(200);
        varValue integer;
        t_cid           INTEGER;
        t_command       VARCHAR2(200);
    Begin
        --Get tableName
        varTableName := tableName ;
        --Get columnName
        varColumnName := ColumnName ;
        t_command := 'SELECT ' || varColumnName ||' FROM ' || varTableName;
        --Here execute dynamic sql statement
        DBMS_SQL.PARSE
        DBMS_SQL.DEFINE_COLUMN
           DBMS_SQL.EXECUTE
        --fatch row values into varValue
        DBMS_SQL.COLUMN_VALUE (..,..,varValue);
        --then do your x+1 magic here
        varValue := varValue+1
        --then output  your value.
    End; 
```

# rsa - 如何使用带有 SHA1 和 ISO9796-2 方案 2 的 RSA 与 Bouncy Castle 签署？

> ID：12956339
> 
> 赞同：1
> 
> 时间：2012-10-18T13:53:29.130
> 
> 标签：rsa, digital-signature, sha1, bouncycastle

我需要使用 RSA 和 ISO9796-2 方案 2 填充对文本的 SHA1 哈希进行签名

最初我只使用带有 RSA 的 SHA1 这样做：

```
public static byte[] signer(byte[] data, PrivateKey key) throws Exception {
    Signature signer = Signature.getInstance("SHA1WithRSA", "BC");
    signer.initSign(key);
    signer.update(data);
    return signer.sign();
} 
```

我应该如何修改功能？用另一个可以满足我需要的方案替换“SHA1WithRSA”很容易，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:39:53.387

我用这段代码解决了这个问题：

```
public static byte[] signer(byte[] data, PrivateKey key) throws Exception {
    Signature signer = Signature.getInstance("SHA1withRSA/ISO9796-2", "BC");
    signer.initSign(key);
    signer.update(data);
    return signer.sign();
} 
```

**SHA1withRSA/ISO9796-2**可以解决问题。

我很感谢 bouncy castle 邮件列表中的 David 的回答。

# javascript - 另一个试图在dojo上注册带有id的小部件

> ID：12956342
> 
> 赞同：1
> 
> 时间：2012-10-18T13:53:34.170
> 
> 标签：javascript, dojo

我有一个问题：我正在从控制器打开一个基于模板的视图，但我收到了这个错误。此错误的原因可能是什么？

控制器：

```
define([ 
    "dojo/_base/declare", "dojo/_base/lang", 

    "models/RestStorage", 
    "views/userPage/UserPage" 
], function (declare, lang, RestStorage, UserPage) { 
    return declare(null, { 
        systemUser:"", 

        constructor:function (options) { 
            lang.mixin(this, options); 
            this.model = new RestStorage(); 
        }, 
        init:function () { 
            this.view = new UserPage({model:this.model}, "container"); 
        } 
    }); 
}); 
```

看法：

```
define([ 
    "dojo/_base/declare", "dojo/_base/lang", "dojo/Evented", 

    "dijit/_WidgetBase", "dijit/_TemplatedMixin", "dijit/_WidgetsInTemplateMixin", "dojo/text!./user-page.html", 

    "dojox/mvc/Group", "dojox/mvc/Repeat", "dojox/mvc/Output" , "dijit/form/Button" 
], function (declare, lang, Evented, _WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin, template) { 
        return declare([_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin, Evented], { 
            templateString:template, 
            model:null, 

            constructor:function (options) { 
                lang.mixin(this, options); 
            } 
       }); 
    } 
); 
```

和模板：

```
<section id="userPage">
    <header id="userPageHeader">
    </header>
    <section id="userPageContent">
        <p data-dojo-type="dojox/mvc/Group" data-dojo-props="ref: this.model">
            Current count: <br/>
            Max count: 
        </p>
    </section>
    <footer id="userPageFooter">
    </footer>
</section> 
```

更新：这是我的 index.html 和 app.js：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MNSolution</title>
    <link rel="stylesheet" href="resources/js/lib/dijit/themes/claro/claro.css" media="screen"/>
    <link rel="stylesheet" href="resources/css/main.css"/>
    <script>
        var dojoConfig = {
            async:true,
            baseUrl:"resources/js/",
            packages:[
                {name:"dojo", location:"lib/dojo" },
                {name:"dijit", location:"lib/dijit" },
                {name:"dojox", location:"lib/dojox" },
                {name:"app", location:"app", main:"app" },
                {name:"controllers", location:"app/controllers"},
                {name:"views", location:"app/views"},
                {name:"models", location:"app/models"}
            ],
            has:{
                "dojo-debug-messages":true
            },
            isDebug:true,
            parseOnLoad:true,
            deps:[ "dojo/parser", "app/app" ]
        }
    </script>
    <script src="resources/js/lib/dojo/dojo.js"></script>
    <script>
        require(["dojo/parser", "app/app"], function (parser, App) {
            parser.parse();
            var application = new App();

        });
    </script>
</head>
<body class="claro">
<div id="container"></div>
</body>
</html>

define([
//    Base modules
    "dojo/_base/declare", "dojo/_base/lang",
//    login and user page controllers
    "controllers/LoginController", "controllers/UserPageController",
//    ready!
    "dojo/ready"
], function (declare, lang, LoginController, UserPageController) {
    return declare("app", null, {
        loginController:null,
        userPageController:null,

        constructor:function () {
            this.loginController = new LoginController();

            if (!this._checkAuth()) {
                this.loginController.init();
                this.loginController.on("loginSuccess", lang.hitch(this, function () {
                    this._loginSuccess();
                }));
            } else {
                this._loginSuccess();
            }
        },
        _checkAuth:function () {
//TODO check auth
            return true;
        },
        _loginSuccess:function () {
            this.userPageController = new UserPageController({});
            this.userPageController.init();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:05:04.433

我注意到您在模板中设置了一些*id*属性。这样做通常是不好的形式，因为当您在页面上多次使用小部件时，它可能会导致重复的 ID。这可能会导致您在标题中描述的重复 ID 错误。

如果您将 ids 用于 css 样式，那么您可能可以使用类属性来解决这个问题。如果它们用于在您的代码中引用，请使用*data-dojo-attach-point*。

**data-dojo-attach-point：**这会将其附加到的 dom 节点分配给解析模板的对象中的属性。（注意：您使用的是*dijit/_WidgetsInTemplateMixin*，如果节点是要解析的小部件，则属性将分配给小部件而不是它的 dom 节点）。

例如：

```
<section data-dojo-attach-point="userPage">
    <header data-dojo-attach-point="userPageHeader">
    </header>
    <section data-dojo-attach-point="userPageContent">
        <p data-dojo-type="dojox/mvc/Group" data-dojo-props="ref: this.model">
            Current count: <br/>
            Max count: 
        </p>
    </section>
    <footer data-dojo-attach-point="userPageFooter">
    </footer>
</section> 
```

这会将外部**<section>**节点分配给小部件内的**this.userPage**，**this.userPageHeader**将引用**<header>**等。

# javascript - 嵌入式 Vimeo 视频中的章节链接

> ID：12956343
> 
> 赞同：2
> 
> 时间：2012-10-18T13:53:37.507
> 
> 标签：javascript, vimeo

尝试获取链接以映射到嵌入式 Vimeo 视频中的不同点，例如章节标记。

我正在使用他们的 API，它适用于我拥有的第一个链接，但不适用于第二个链接。

[JSFiddle 链接](http://jsfiddle.net/33cEe/2/)15 秒链接工作正常，30 秒链接没有问题。

我知道这可能与 setupChapterLinks() 函数中的这一行有关：

```
var links = container.querySelector('ul.chapterLinks'), 
```

它只会返回它找到的第一个项目（15 秒），而忽略其余的。

有什么想法我做的不对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:49:48.483

您的问题是您没有遍历您查询的链接列表。结果是只有第一个链接附加了事件。这是一个示例，说明您将如何对所有这些执行此操作（一个 setupChapterLinks 方法来替换您当前的方法）：

```
function setupChapterLinks() {
    var links = container.querySelector('ul.chapterLinks'),
    seekLinks = links.querySelectorAll('.seek');
    for (var i = 0, length = seekLinks.length; i < length; i++) 
    {
        link = seekLinks[i];
        // Call seekTo when seek link clicked
        addEvent(link, 'click', function() {
            var seekVal = this.name;
            froogaloop.api('seekTo', seekVal);
        }, false);
    }

} 
```

# objective-c - 向 UIMapView 添加更多注释

> ID：12956345
> 
> 赞同：1
> 
> 时间：2012-10-18T13:53:48.497
> 
> 标签：objective-c, ios, xcode, annotations, mkannotation

我想在我的地图视图中添加更多注释。我正在使用一个`Annotation`有方法的类`addAnnotation`。`UIViewController`当我想添加新注释时，我会调用此方法。

但由于某种原因，只显示我最后添加的注释。

**注释.h**

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface Annotation : NSObject {
CLLocationCoordinate2D cooridnate;
NSString *title;
NSString *subtitle;
}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@property (nonatomic, retain) NSMutableArray *locations;

-(void)addAnnotation: (NSString *)initTitle : (NSString *)initSubtitle : (CLLocationCoordinate2D) initCoordinate;

@end 
```

**注释.m**

```
#import "Annotation.h"

@implementation Annotation

@synthesize coordinate, title, subtitle, locations;

-(void)addAnnotation: (NSString *)initTitle : (NSString *)initSubtitle : (CLLocationCoordinate2D) initCoordinate {

locations = [[NSMutableArray alloc] init];

self.coordinate = initCoordinate;
self.title = [NSString stringWithFormat:@"%@", initTitle];
self.subtitle = [NSString stringWithFormat:@"%@", initSubtitle];

[locations addObject:self]; // add all my anotations with location to an array

}

@end 
```

**我的 UIViewController 中的方法**

```
#import "MapViewController.h"

@interface MapViewController ()

@end

@implementation MapViewController

@synthesize mapView;

#pragma mark - ViewController methods

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

[self initMapView];
ann = [[Annotation alloc] init]; // making place in memory
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - UIMapController methods

- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView {
[self createAnnotations];
}

-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

if ([annotation isKindOfClass:[MKUserLocation class]]) {
    //If annotation = user position ==> DON'T CHANGE
    return nil;
}

MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
MyPin.pinColor = MKPinAnnotationColorRed;

UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[advertButton addTarget:self action:@selector(showInfo:) forControlEvents:UIControlEventTouchUpInside];

MyPin.rightCalloutAccessoryView = advertButton;
MyPin.draggable = NO;
MyPin.highlighted = NO;
MyPin.animatesDrop= FALSE;
MyPin.canShowCallout = YES;

return MyPin;
}

#pragma mark - MY Methods

-(void) initMapView {
[mapView setMapType:MKMapTypeStandard]; // standaard maptype
[mapView setScrollEnabled:YES];
[mapView setZoomEnabled:YES];
[mapView setDelegate:self]; // gegevens van de map terugsturen naar deze viewController en de gebruiker
[mapView setShowsUserLocation:YES];
[self focusWorld];
}

-(void) createAnnotations {
[self initSomeExamples];
[self.mapView addAnnotations: ann.locations];

}

-(void) focusWorld {
MKCoordinateRegion worldRegion = MKCoordinateRegionForMapRect(MKMapRectWorld); // regio instellen op World
mapView.region = worldRegion; // regio doorgeven naar onze mapView
}

-(void) initSomeExamples {

// Washington
l1.latitude = 38.892102;
l1.longitude = -77.029953;

// Antwerp
l2.latitude = 51.219787;
l2.longitude = 4.411011;

// Egypt
l3.latitude = 29.993002;
l3.longitude = 31.157227;

// Brazil
l4.latitude = -22.900846;
l4.longitude = -43.212662;

[ann addAnnotation:@"America has a new President !" :@"Washington DC" :l1]; // call method to add an annotation with these parameters
[ann addAnnotation:@"Revolutionary app by Belgium student" :@"Antwerp" :l2];
[ann addAnnotation:@"The new Arabic revolution" :@"Egypt, Tahir square" :l3];
[ann addAnnotation:@"World Championchip football" :@"Rio de Janeiro" :l4];

}

#pragma mark - ACTIONS

-(void)showInfo:(id)sender {
NSLog(@"Show info");
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:19:50.687

您不需要位置 @property 和 - addAnnotation: 方法。一个 MKAnnotation 对象代表一个位置。

我的建议是相应地修改 Annotation 类，以及符合并创建与您想要注释的位置数量一样多的对象。

从 Annotation.h/m 中删除位置 @property 和 -addAnnotation: 方法

**注释.h**

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface Annotation : NSObject <MKAnnotation> {
CLLocationCoordinate2D coordinate;
NSString *title;
NSString *subtitle;
}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

-(id) initWithTitle: (NSString *)initTitle : (NSString *)initSubtitle : (CLLocationCoordinate2D) initCoordinate; 

@end 
```

**注释.m**

```
#import "Annotation.h"

@implementation Annotation

@synthesize coordinate, title, subtitle;

-(id) initWithTitle: (NSString *)initTitle : (NSString *)initSubtitle : (CLLocationCoordinate2D) initCoordinate {
    self = [super init];
    if ( self ) {
        self.coordinate = initCoordinate;
        self.title = [NSString stringWithFormat:@"%@", initTitle];
        self.subtitle = [NSString stringWithFormat:@"%@", initSubtitle];
    }
    return self; // correction appreciated.
}

@end 
```

**视图控制器中的一些方法发生了变化**

```
-(void) initSomeExamples {

// Washington
l1.latitude = 38.892102;
l1.longitude = -77.029953;

// Antwerp
l2.latitude = 51.219787;
l2.longitude = 4.411011;

// Egypt
l3.latitude = 29.993002;
l3.longitude = 31.157227;

// Brazil
l4.latitude = -22.900846;
l4.longitude = -43.212662;

NSArray *annotations = @[
[[Annotation alloc] initWithTitle:@"America has a new President !" :@"Washington DC" :l1],
[[Annotation alloc] initWithTitle:@"Revolutionary app by Belgium student" :@"Antwerp" :l2],
[[Annotation alloc] initWithTitle:@"The new Arabic revolution" :@"Egypt, Tahir square" :l3],
[[Annotation alloc] initWithTitle:@"World Championchip football" :@"Rio de Janeiro" :l4] ];

// Adding 4 annotation objects
[self.mapView addAnnotations:annotations];

}

-(void) createAnnotations {
    [self initSomeExamples];
    // Annotations are added in -initSomeExamples method.
} 
```

# c# - XAML 中的绑定问题

> ID：12956349
> 
> 赞同：0
> 
> 时间：2012-10-18T13:53:54.743
> 
> 标签：c#, wpf

我正在尝试构建一个`UserControl`，但我无法让我的绑定工作。我知道我错过了一些东西，但我无法弄清楚它是什么。我没有得到任何`BindingExpressions`

XAML

```
<UserControl x:Class="WpfApplication3.NumericUpDown"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfApplication3">
<Grid>
    <StackPanel>
        <TextBox Text="{Binding NumericUpDownText, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type local:NumericUpDown}}}" LostFocus="PART_NumericUpDown_LostFocus">
            <TextBox.Resources>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding AnyNumericErrors, RelativeSource={RelativeSource AncestorType={x:Type local:NumericUpDown}, AncestorLevel=1}}" Value="false">
                            <Setter Property="Background" Value="Blue" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding AnyNumericErrors, RelativeSource={RelativeSource AncestorType={x:Type local:NumericUpDown}, AncestorLevel=1}}" Value="true">
                            <Setter Property="Background" Value="Red" />
                            <Setter Property="ToolTip" Value="There is an error" />
                        </DataTrigger>
                    </Style.Triggers>

                    <EventSetter Event="LostFocus" Handler="PART_NumericUpDown_LostFocus" />
                </Style>
            </TextBox.Resources>
            <TextBox.Template>
                <ControlTemplate>
                    <Border Background="{TemplateBinding Background}"
                              BorderBrush="{TemplateBinding BorderBrush}"
                              BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <ScrollViewer x:Name="PART_ContentHost" 
                                              Grid.Column="0" />

                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <RepeatButton x:Name="PART_IncreaseButton"
                                              Click="PART_IncreaseButton_Click" 
                                              Content="UP"  />
                                <RepeatButton x:Name="PART_DecreaseButton"
                                              Grid.Row="1"
                                              Click="PART_DecreaseButton_Click"
                                              Content="Down"/>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </TextBox.Template>
        </TextBox>
    </StackPanel>
</Grid> 
```

C# 代码背后

```
namespace WpfApplication3
{
    /// <summary>
    /// Interaction logic for NumericUpDown.xaml
    /// </summary>
    public partial class NumericUpDown : UserControl
    {
    public NumericUpDown()
    {
        InitializeComponent();
        //AnyNumericErrors = true;
    }

    private String _NumericUpDownText;
    public String NumericUpDownText
    {
        get { return _NumericUpDownText; }
        set
        {
            _NumericUpDownText = value;
            NotifyPropertyChanged("NumericUpDownText");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private void PART_NumericUpDown_LostFocus(object sender, RoutedEventArgs e)
    {
        CheckForErrors();   
    }

    public void CheckForErrors()
    {
        try
        {
            int value = Int32.Parse(NumericUpDownText);
            AnyNumericErrors = false;
        }
        catch (FormatException)
        {
            Debug.WriteLine("error");
            AnyNumericErrors = true;
        }
    }

    private Boolean m_AnyNumericErrors;
    public Boolean AnyNumericErrors
    {
        get 
        {
            return m_AnyNumericErrors; 
        }
        set
        {
            m_AnyNumericErrors = value;
            NotifyPropertyChanged("AnyNumericErrors");
        }
    }

    #region DP

    public Int32 LowerBound
    {
        get;
        set;
    }

    public static readonly DependencyProperty LowerBoundProperty = DependencyProperty.Register("LowerBound", typeof(Int32), typeof(NumericUpDown));

    #endregion

    private void PART_IncreaseButton_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            Int32 value = Int32.Parse(NumericUpDownText);
            value++;
            NumericUpDownText = value.ToString();
        }
        catch (Exception)
        {
            AnyNumericErrors = true;
        }
    }

    private void PART_DecreaseButton_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            Int32 value = Int32.Parse(NumericUpDownText);
            value--;
            NumericUpDownText = value.ToString();
        }
        catch (Exception)
        {
            AnyNumericErrors = true;
        }
    }
}
} 
```

编辑

主要问题是 DataTriggers 不工作......在开始时，文本框是蓝色的，但永远不会改变。当我按下向上/向下以增加/减少值时，事件被调用，但 UI 中的值没有改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:42:15.707

您应该使用 DependencyProperties，例如：

```
public bool AnyNumericErrors
{
  get { return (bool)GetValue(AnyNumericErrorsProperty); }
  set { SetValue(AnyNumericErrorsProperty, value); }
}

// Using a DependencyProperty as the backing store for AnyNumericErrors.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty AnyNumericErrorsProperty =
    DependencyProperty.Register("AnyNumericErrors", typeof(bool), typeof(NumericUpDown), new UIPropertyMetadata(false)); 
```

如果这还不够，请删除祖先搜索的级别限制。

# google-apps-script - 如何使用 doPost(request) 访问应用脚本中的 post 请求正文

> ID：12956354
> 
> 赞同：9
> 
> 时间：2012-10-18T13:54:14.370
> 
> 标签：google-apps-script

我需要访问 Google App Script 中发布请求的原始正文。我看到有类似的东西

```
function doPost(request) {
  request.contentLength
} 
```

这实际上返回请求正文的原始内容的正确长度。所以我认为必须有一些东西来获得完整的身体，例如作为一个字符串。

我不希望访问可能使用 post 传输的表单字段参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-04-05T06:32:40.967

我知道这个问题已经过时了，但是很多事情都发生了变化，谷歌现在已经提供了这个问题。您可以通过以下方式轻松访问 POST 请求的正文`doPost(e)`：

```
e.postData.contents 
```

如果要解析传入的 JSON，请使用以下命令：

```
JSON.parse(e.postData.contents) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-08T17:33:08.467

从[2013 年 5 月 9 日的发行说明中](https://developers.google.com/apps-script/release_notes?hl=en)，使用**request.postData.getDataAsString()**：

```
function doPost(request) {
    var jsonString = request.postData.getDataAsString();
    var jsonData = JSON.parse(jsonString);
    sheet.appendRow([ 'Data1:' , jsonData.Data1 ]); // Just an example
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T02:39:26.470

我认为目前无法访问 POST 正文，例如实现 REST 服务。我为此提交了[增强请求](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2158)；如果您偶然发现了这个，请随时为它加注星标以对该问题进行投票。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:02:20.460

您可以通过从参数创建 Blob 来访问帖子的原始正文。然后，您可以在 Blob 对象上调用各种方法，例如 getBytes() 或 getDataAsString()。[此处](https://developers.google.com/apps-script/class_blob?hl=en)列出了这些功能。

```
function doPost(event) {
  var contentBlob = event.parameter.thefile;
  var contentAsString = contentBlob.getDataAsString();
  var bytes = contentBlob.getBytes();
  // do something with the contents ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-19T19:54:29.373

这也应该有效。

```
function doPost(e) {

  if(typeof e !== 'undefined')
    Logger.log(e.parameter);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T17:47:26.553

根据您尝试执行的操作的性质以及您对发布请求发起的控制权，您可能能够与 Drive API 集成。如果帖子数据可以作为文件（例如包含原始 JSON 数据）发送到用户的云端硬盘帐户，那么您的脚本就可以找到该文件，加载其内容，对它进行任何您需要的操作（例如，将其放入电子表格中)，并且可以选择删除云端硬盘文件。当然，这假设您可以控制发布请求的发送方式。工作流程可能涉及：

1.  客户将带有数据的发布请求发送到用户的云端硬盘帐户（标签或名称文件以便以后轻松识别）
2.  驱动器文件创建完成后，客户端使用参数“method=consumeData”等向您的脚本发送请求
3.  您的脚本使用 DocList 服务检查用户的云端硬盘帐户并检索为您的脚本上传的所有文件

我还没有尝试过，但应该可以！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T15:55:45.687

找出您有权访问的所有内容的最简单方法是打印出请求对象。

```
function doPost(request) {
  Logger.log(request); 
} 
```

然后对脚本的 URL 进行 POST 以查看日志内容

# sql - 对数据库进行 jpa 查询后的转换错误

> ID：12956356
> 
> 赞同：0
> 
> 时间：2012-10-18T13:54:19.627
> 
> 标签：sql, jpa, eclipselink, glassfish-3

此查询提供了一个数组 ob 对象，而不是返回 Tracking 对象。

在日志中我看到： java.lang.ClassCastException: [Ljava.lang.Object; 无法转换为 com.quoka.qis.ads.web.tracking.Tracking

```
@NamedNativeQuery(
name = "Tracking.findByNo", 
query = "select * " +
    "from inet.TRACKING t " +
    "where t.prditmNO = ?1"
)

TypedQuery<Tracking> q = em.createNamedQuery("Tracking.findByNo", Tracking.class);
q.setParameter(1, adno);
List<Tracking> list = q.getResultList();
return list.isEmpty()?null:list.get(0); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:59:19.100

您使用**本机**查询。您应该使用**JPA**查询。

```
 @NamedQuery( name = "Tracking.findByNo",  
              query = "select t " + 
                      "from Tracking t " +
                      "where t.prditmNO = ?1" ) 
```

# compiler-construction - 如何在 lex 和 yacc 中读取多行输入？

> ID：12956358
> 
> 赞同：2
> 
> 时间：2012-10-18T13:54:24.697
> 
> 标签：compiler-construction, yacc, lex

我希望输出为：

```
a=3   mov a,3
a=fs  mov b,fs
b=32  mov b,32 
```

用于生成 3 地址中间代码的程序 - 为词法分析编写的 lex 文件从命令行读取输入并传递标记：

```
%{
#include "y.tab.h"
#include "string.h"
#include <math.h>
%}
%%
[a-zA-Z]+ { yylval.var=(char *)malloc(sizeof(char *));
          strcpy(yylval.var,yytext);
         return ID;}
"="       return EQUALS;
[0-9]+    {yylval.num=atoi(yytext);return DIGIT;}

%% 
```

对应的yacc文件：

```
%{

#include "stdio.h"

#include "string.h"

int yywrap()
{
return 1;
}
%}

%union
{char *var;
 int num;
}

%token <var> ID 
%token <num> EQUALS DIGIT

%%
start : line 

line : ID EQUALS DIGIT {printf("MOV %s, %d\n",$1, $3);}
     | ID EQUALS ID    {printf("MOV %s, %s\n",$1, $3);}
     ;

%%

main()

{

yyparse();

return 0;

}

int yyerror(char *s)

{
fprintf(stderr,"%s\n",s);

} 
```

运行上述代码的输出（在 lex 和 yacc 之间链接之后）：

```
dsa=32                
MOV dsa, 32                // 3 address code generated

ds=342                     // but does not parse this line why??
syntax error 
```

如何获得所需格式的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T18:17:37.653

你的语法只读一个`line`

也许你想要：

```
start : line
      | start line
      ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:16:16.260

不清楚你想要什么。你想要一个调用`yyparse`来解析多行（直到你得到一个EOF）？如果是这样，rici 的答案就是你想要的。或者你想`yyparse`解析一行并返回，之后你可以再次调用它来解析另一行？如果这就是你想要的，你需要让你的词法分析器识别换行符并为它们返回一个 EOF：

```
[\n]    return -1; 
```

但是，使用您当前的语法，这会给您空白行的语法错误，这可能是您想要的，也可能不是您想要的。

# c - 无法在while循环中通过指针传递值

> ID：12956359
> 
> 赞同：0
> 
> 时间：2012-10-18T13:54:31.457
> 
> 标签：c, pointers, while-loop

我知道您可以通过指针间接传递值：您指定将某个地址（指针）处的值（*）分配为等于某物（例如字符）。

```
// This works: I can pass char indirectly via pointers    
// by saying "value at char pointer line equals c1 or c2"

char c1 = 'a';
char c2 = 'b';
char* line;

*line = c1;    
*(line+1) = c2; 
```

我可以使用上面的 *(line+1) 向右滑动内存空间。但是，当我循环它时，这会失败（如下）：

```
// Output: "Process returned -1073741819 (0xC0000005)"    
// Why?   

char c;    
char* line1;    
int i = 0;

while ((c = getchar()) != EOF){
    *(line1+i) = c;    
    i++;    
} 
```

输出：“进程返回 -1073741819 (0xC0000005)”

当我尝试在 while 循环中迭代时，为什么无法通过指针间接传递值？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:58:12.840

1.  您无法为 line1 赋值，因为您从未对其进行初始化。
2.  您正在访问不应该使用 line+i 的内存

也许你想要这样的东西：

```
char c;

char array[100];   // Allocate space for 100 chars

char* line1 = array;    // Pointer to allocated memory block

int i = 0;

while ((c = getchar()) != EOF)

{

    *(line1+i) = c;

    i++;
    // Exit when i == 100
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:57:56.447

您永远不会为 line1 分配地址，即将它指向某处或分配它指向的缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:00:20.490

如果您没有正确初始化 line1，那么它就无法工作。

尝试`char line1[500];`而不是`char* line1;`- 仅用于测试；如果输入超过 500 个字符，它仍然会崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:20:41.797

Line1 没有用任何东西初始化。它指向的地址是未定义的。

在 C（或 C++）中，当您将变量声明为指针类型时，不会自动为该变量分配有效地址。像这样的东西。

```
DataType *a_certain_ptr; 
```

你认为 a_certain_ptr 包含什么？另一个例子可能会给你一个提示。

```
int a_certain_number;    // this line is in some function. 
```

a_certain_number 的值是多少？

不难看出 a_certain_number 可以是任何东西，它是未初始化的，因此它的值是未定义的。它可以等于 1、-1 或 15033 等。

同样适用于 a_certain_ptr。现在这个变量，因为你不初始化它，可以包含任何值。它可以是 1、-1、353210，甚至可能是指向堆栈中某处的有效地址...

所以稍后当你试图执行

```
*(line1+i) = c; 
```

您指的是由**i*sizeof(char)**字节偏​​移的无效地址，它仍然无效....

# javascript - 将指示符添加到所需的表单字段

> ID：12956366
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:55:02.397
> 
> 标签：javascript, extjs

在 ExtJs 4.0.2 中用于所需字段指示，我使用以下代码：

```
Ext.override(Ext.layout.Layout, {
  renderItem: function(item, target, position) {
  if (item && item.isFieldLabelable && !item.rendered && item.fieldLabel &&   item.allowBlank == false) {
     item.fieldLabel += ' <span class="req" style="color:red">*</span>';
   }
  this.callOverridden(arguments);
 }
 }); 
```

但在 ExtJs 4.1 中，这段代码不起作用。有什么改变？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:12:03.713

签出 4.1.x 中的新标签标记更改[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-afterLabelTextTpl](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-cfg-afterLabelTextTpl)您不需要覆盖了。

# asp.net - RouteConfig 未在 VS2012 中声明错误消息

> ID：12956367
> 
> 赞同：1
> 
> 时间：2012-10-18T13:55:02.830
> 
> 标签：asp.net, vb.net, visual-studio, url-routing

我正在VS2012 中试用[FriendlyUrls](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)。我使用自述文件和 Hanselman 的帖子作为指南。我在 Application Start 中添加了以下内容，但 VS 告诉我 RouteConfig 未声明。

```
RouteConfig.RegisterRoutes(RouteTable.Routes) 
```

我用谷歌搜索但没有找到答案。我已经导入了 system.web.routing。如何更正此错误消息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:31:14.073

我解决了。从包管理器控制台安装 FriendlyUrls 包时，即使项目是 VBNet 项目，也会在 App_Start 中创建一个 RouteConfig.cs 文件。因此，只需创建等效的 vbnet 文件，错误就会消失。

# xml - 如何创建没有元素名称的 XSD 选项

> ID：12956369
> 
> 赞同：1
> 
> 时间：2012-10-18T13:55:23.917
> 
> 标签：xml, xsd

我正在为我的 XML 架构而苦苦挣扎，盯着屏幕也无济于事。我尝试为其创建架构的 XML 如下所示：

```
<root>
   <command>FOO|BAR|BLOOP</command>
   <parameters>
       <param1>val</param1>
       <param2>val</param2>
   </parameters>
<root> 
```

根据命令值是 = FOO、BAR 还是 BLOOP，参数标签中需要有一组不同的参数，并且它可能为空。定义了某个命令需要出现的参数集，并且某些命令名称具有相同的参数集。

我所做的是为每个命令创建一个类型，一个用于 FOO，一个用于 BAR，一个用于 BLOOP，在这些类型中我可以放置它们使用的参数。

但是，当我执行以下操作时：

```
<xs:element name="root">
  <xs:complexType>
    <xs:element name="myCommand" type="myCommandType"/>
  </xs:complexType>
</xs:element> 
```

这会为每个命令类型创建一个具有名称的特殊元素，而实际上我只是希望根元素之间的部分由该命令所需的任何内容填充。

关于解决此问题的最佳方法的任何线索？

为每个命令创建一个模式会更好，还是可以将它们全部放在同一个模式中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:09:31.503

首先，一般来说，您不能`<parameters>`根据另一个（标签）的内容来更改一个标签（标签）的类型。`<command>`可能有丑陋和复杂的方法来做到这一点，但我会推荐一个简单的解决方案。

如果可以的话，你应该将你的 XML 重组为这样的：

```
<root>
  <foo-command>
    <param1>val</param1>
    <param2>val</param2>
    <param3>val</param3>
  </foo-command>
</root> 
```

使用 Schema 很容易做到这一点：将 的内容定义`<root>`为您的命令的选择，并为每个命令创建一个包含参数定义的复杂类型。

这是它的样子：

```
<element name="root">
    <complexType>
        <choice>
            <element name="foo-command" type="tns:foo-command-type"/>
            <element name="bar-command" type="tns:bar-command-type"/>
            ...
        </choice>
    </complexType>
</element>

<complexType name="foo-command-type">
    <sequence>
        <element name="param1" type="boolean"/>
        <element name="param2" type="int"/>
        ...
    </sequence>
</complexType>
<complexType name="bar-command-type">
    ...
</complexType>
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:06:13.073

该问题通常以“共现约束”的名义出现，并且 XSD 1.0 的一个众所周知的限制是没有简单的解决方案。

在 XSD 1.1 中有一个称为“条件类型分配”的新功能，它完全可以满足您的需求。XSD 1.1 目前在 Xerces 和 Saxon 中实现。

# javascript - 如何将项目从一个列表移动到另一个列表？

> ID：12956373
> 
> 赞同：0
> 
> 时间：2012-10-18T13:55:38.880
> 
> 标签：javascript, jquery, jquery-mobile

我是一个试图学习如何构建 jQuery Mobile 应用程序的新手，我有一个项目列表，我想将这些项目随机排列到不同页面上的不同列表中。我已经能够弄清楚如何使用删除一个

```
$('document').ready(function() {
    $('.theListItem .red').click(function() {
        var $toRemove = $(this).closest('div[data-theme="a"]')

        $toRemove.animate({
            height: 0
        }, 500, function() {
            // This is the callback.
            $toRemove.remove();
        });

        return false;
    });
}); 
```

但是，如果我想移动整个项目，例如

```
<div data-role="collapsible" data-collapsed="false" data-theme="a">
    <h3>Section 1</h3>
<div data-role="controlgroup"  data-type="horizontal">
<a href="categorize.html" data-role="button">Yes</a>
<a href="index.html" data-role="button">No</a>
<a href="index.html" data-role="button">Maybe</a>
</div> 
```

到具有完全相同功能的不同列表，你会建议我怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:05:33.983

我认为最好的方法是动态地从 JavaScript 对象中绘制列表。具体来说，如果您有两个列表 A 和 B，您可能有一个字符串数组来表示每个列表。每次在列表之间移动项目时，您只需对两个数组执行操作，然后从这些数组中重新绘制列表。

我希望这有帮助！

# buildroot - 在我的源代码中访问 CONFIG_ 宏

> ID：12956375
> 
> 赞同：1
> 
> 时间：2012-10-18T13:55:49.400
> 
> 标签：buildroot

我正在使用 buildroot 创建一个 Linux 内核模块来执行交叉编译。我创建了一个 Config.in 文件来创建一些可选位，如下所示：

```
config BR2_PACKAGE_MYPACKAGE_OPTION1
    bool "Option 1" 
```

在我的源代码中，我将拥有：

```
#ifdef CONFIG_BR2_PACKAGE_MYPACKAGE_OPTION1
#error Testing if symbol defined 
#endif 
```

这不起作用，从 menuconfig 检查选项时，编译时未定义符号。该符号确实出现在顶级 .config 文件中。

我猜想 mypackage.mk 将有权访问该符号，并且确实如此。我尝试将这些添加到 .mk 文件中，但尽管 TARGET_CFLAGS 和 EXTRA_CFLAGS 都被语句更改（通过 @echo 命令确认），但它们不会传递给编译器。

```
ifeq ($(BR2_PACKAGE_MYPACKAGE_OPTION1),y)
    TARGET_CFLAGS += -DCONFIG_BR2_PACKAGE_MYPACKAGE_OPTION1
endif

ifeq ($(BR2_PACKAGE_MYPACKAGE_OPTION1),y)
    EXTRA_CFLAGS += -DCONFIG_BR2_PACKAGE_MYPACKAGE_OPTION1
endif 
```

如何访问源代码中的配置符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:16:01.287

我想出了一个可能的答案：

将你感兴趣的传递给 mypackage.mk 文件中的 $(MAKE) 调用，然后你可以将它们传递给你的包 Makefile/Kbuild 文件中的编译器。

# android - 根据屏幕大小限制应用下载（Android - Titanium Studio）

> ID：12956376
> 
> 赞同：0
> 
> 时间：2012-10-18T13:55:49.663
> 
> 标签：android, titanium

我在 iPhone 中创建了一个应用程序，它工作正常，因为所有 iPhone 的屏幕尺寸都相同。

现在我使用 Titanium studio 为 Android 创建了相同的应用程序。

该应用程序在 Galaxy S3（和 Nexus 7）中运行良好，但我担心如果我想限制其他 Android 设备使用我的应用程序怎么办？

我该怎么做呢？任何的意见都将会有帮助。

**注意：**我在模拟器中使用的屏幕尺寸`WXGA720`和`WVGA800`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:57:35.413

在清单中添加这个（只添加你想要的兼容屏幕）：

```
<manifest ... >
    <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens>
    ...
    <application ... >
        ...
    <application>
</manifest> 
```

# c++ - 如何在不使用 bitset 的情况下知道 C++ 中的位状态？

> ID：12956378
> 
> 赞同：1
> 
> 时间：2012-10-18T13:55:54.977
> 
> 标签：c++, c, bit-manipulation

我正在尝试了解 char 上不同位的状态

假设我有：

```
char a = 11 //00001011 in binary 
```

如何检索当前为 0 的第 5 位并将其转换为 bool 变量？我该如何设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:57:35.010

您可以使用一些位运算符：

```
bool fifthBitSet = a & 0x10; 
```

或者，更一般地说：

```
bool nThBitSet = a & ( 0x1 << n ); 
```

错过了设置部分：

```
a |= 0x1 << n; // set n'th bit 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:20:10.143

正如您所指出的：

```
char a = 11 // == 00001011 in binary 
```

既然你说`bit number 5`现在很清楚，让我们*定义位的位置，因为你正在谈论它们：

```
pos       8  7  6  5  4  3  2  1
value    [0][0][0][0][1][0][1][1] 
```

您想测试第 5 位，这意味着您需要一个访问第五位的掩码，这里有一些掩码：

```
your number: 00001011
0x1  mask:   00000001
0x2  mask:   00000010
0x4  mask:   00000100
0x8  mask:   00001000
0x10 mask:   00010000  <-- So that's the one we want, the 5th bit 
```

要设置您的位，您需要按位或 (|)

```
a |= 0x10; //   00001011
           // | 00010000  because 1 | anything = 1
           // ----------
           //   00011011  The value is set! 
```

要测试位，我们可以使用按位与 (&)

```
bool something = a & 0x10; //   00001011
                           // & 00010000  because only 1 & 1 = 1
                           // ----------
                           //   00000000  something will be 0 (false) 
```

* * *

*有人指出，这是一个基于 1 的索引，而不是更典型的基于 0 的索引。这是真的。根据描述，我选择将问题解读为“第 5 位”，这意味着基于典型（人类）对 8 位中的 1、2、3、4 等进行计数。

如果您更愿意使用基于 0 的索引，这没问题，只需将相同的逻辑“移位”一位，基于 0 的索引中“第 5”位的掩码是`0x20`

在谈论位时，最好注意哪个是最低有效位，并且基于 0 或 1 是完全清楚的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:57:37.833

您可以使用位掩码测试位：

```
a & 0b00010000 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T13:57:46.227

从 0 开始计数是最右边的位：

要测试它：

```
int b = 5;

bool n = a & (1 << b); 
```

设置（或清除）位`b`：

```
if (n) {  // set
    a |= (1 << b);     // RHS only has bit 'b' set
} else {  // clear
    a &= ~(1 << b);    // RHS has every bit _except_ bit 'b' set
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T14:02:55.250

您提到*第 5 位*，我相信您正在查看第 5 个最低有效位。

您还询问了如何在特定位置*设置位。*为此，请使用按位 OR - `|`：

```
a = a | 0x10; 
```

正如已经回答的那样，使用按位 AND - 测试该位`&`：

```
bool isSet = a & 0x10; 
```

通常你会使用一个位置标志，比如`0x10`，但是使用位移给出的概括非常有用，特别是如果你将它们包装到一个函数中：

```
int pos = 5;

// set bit 5:
a = a | (0x1 << pos);

// test bit 5:
bool isSet = a & (0x1 << pos); 
```

有关更多信息，关于按位运算的[维基百科文章](http://en.wikipedia.org/wiki/Bitwise_operation)非常好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T14:01:17.007

好吧，您可以使用这组函数来获取和设置位状态，我想：

```
bool getBit(int data, int bitNumber) {
  int flag = 1 << bitNumber - 1;
  return (bool)(data & flag);
}

void setBit(int& data, int bitNumber) {
  int flag = 1 << bitNumber - 1;
  data |= flag;  
}

...
int main() {
  int a = 11;
  cout << getBit(a, 5); // false
  setBit(a, 5);
  cout << getBit(a, 5); // true
} 
```

我仍然想知道为什么您需要使用它，而不是位集。)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-30T09:02:23.737

您可以使用按位 AND 来了解状态。

```
unsigned int number = 11; 
```

AND 与您要单独检查的位位置设置的值的数字，其余位为 0。

假设我想检查位 0，那么

```
if(a&0x00000001)
   puts(" 01h bit position   is 1")
else
   puts(" 01h bit position   is 0") 
```

# service - AngularJS - 调用查询（）后立即获取数据

> ID：12956380
> 
> 赞同：3
> 
> 时间：2012-10-18T13:55:58.880
> 
> 标签：service, controller, angularjs

我有一个服务

```
angular.module('AigServices', ['ngResource']).factory('aiguilleurs', function($resource){

var service = $resource('app/data/EpargneATermeRachetableCELI.json', {}, {
    query: {method:'GET', params:{}, isArray:true}});

return service;  }); 
```

在我的控制器中，当我打电话时`aiguilleurs.query()`，我收到了结构，但没有像文档中所说的那样数据。我想有数据很快我打电话给`query()`. 任何想法？我环顾四周，没有发现任何东西。所以控制器代码如下（`$scope.listeAiguilleurs[0]`始终未定义）：

```
$scope.listeAiguilleurs = aiguilleurs.query();   
var questionEnCours = null;

if ($scope.listeAiguilleurs[0] != null) {
    questionEnCours = $scope.listeAiguilleurs[0].questions[$scope.noQuestionEnCours-1];
}
$scope.questionEnCours = questionEnCours; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:12:45.237

那是因为查询返回一个`promise`. 您可以[在此处](http://docs.angularjs.org/api/ng.%24q)阅读更多相关信息。[您必须将回调传递给该函数（在此处](http://docs.angularjs.org/api/ngResource.%24resource)查看信用卡资源示例）。尝试这个：

```
$scope.listeAiguilleurs = aiguilleurs.query(function () {   
    var questionEnCours = null;

    if ($scope.listeAiguilleurs[0] != null) {
        questionEnCours = $scope.listeAiguilleurs[0].questions[$scope.noQuestionEnCours-1];
    }
    $scope.questionEnCours = questionEnCours;
}); 
```

# django - Django 重定向到带有变量的模板

> ID：12956388
> 
> 赞同：0
> 
> 时间：2012-10-18T13:56:10.297
> 
> 标签：django, redirect, django-templates

我是 django 的初学者，我做了一个注册系统。当用户注册新用户时，他将被引导回登录页面模板，其中包含`message`添加新用户的变量。

我读过建议`HttpResponseRedirect`在成功`POST`请求后使用。`render`所以据我所知，我不能使用。

那么如何实现这一点`HttpResponseRedirect`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:59:23.560

[我相信您可以使用消息](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)框架来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:59:39.893

使用[消息框架](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/)，它将消息存储在会话中。

# eclipse - 在 Eclipse 中映射多个常春藤文件

> ID：12956393
> 
> 赞同：1
> 
> 时间：2012-10-18T13:56:20.113
> 
> 标签：eclipse, ant, ivy, ant-contrib

我目前正在使用 Ivy 更改我的 Eclipse 构建路径。

我还通过加载 2 个检索我的依赖项的 Ivy 文件成功修改了我的 ANT 构建：

在我的 portlet 构建文件中，我专门调用了所有 portlet 的公共依赖项，这使我无法在每个 Portlet 项目中指定相同的库：

```
 <if>
        <available file="${rpm.homedir}/Builder/ivy_portlet.xml" />
        <then>
            <echo message="Getting runtime portlet dependencies using Ivy project's configuration" />
            <ivy:resolve file="${rpm.homedir}/Builder/ivy_portlet.xml"/>
            <ivy:retrieve pattern="${project.lib.dir}/[conf]/[artifact]-[revision](-[classifier]).[ext]" file="${rpm.homedir}/Builder/ivy_portlet.xml"/>
        </then>
        <else>
            <fail message=" file ${rpm.homedir}/Builder/ivy_portlet.xml not found in the builded project." />
        </else>
    </if> 
```

这是我所有项目的 build.xml 片段中的代码：

```
<target name="get-dependencies">
    <if>
        <available file="${basedir}/ivy.xml" />
        <then>
            <echo message="Getting deps using Ivy project's configuration" />
            <ivy:resolve file="${basedir}/ivy.xml"/>
            <ivy:retrieve pattern="${project.lib.dir}/[conf]/[artifact]-[revision](-[classifier]).[ext]" file="${basedir}/ivy.xml"/>
        </then>
        <else>
            <fail message=" file ${basedir}/ivy.xml not found in the builded project." />
        </else>
    </if>
</target> 
```

ANT 一切正常。

如何使用 IvyIDE 插件设置位于另一个项目中的通用 Ivy 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:30:16.080

使用常春藤扩展[http://ant.apache.org/ivy/history/latest-milestone/ivyfile/extends.html](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/extends.html)

马克说过，不要制造问题，然后尝试解决它。您可以使用 extends 来使用其他 ivy-portlet.xml [它本身位于模块中] 与 extendType="depenencies"

每个项目使用一个，IvyDE 和 ivy 文档将在您身边。尝试机动，你会发现自己一个人。

# qt - Qt 中的错误：使用带有线程的 Qnetwork 访问管理器时出现“不是这样的插槽”

> ID：12956396
> 
> 赞同：0
> 
> 时间：2012-10-18T13:56:28.973
> 
> 标签：qt, signals-slots, qthread, qnetworkaccessmanager

我在 QThread 中使用 QNetworkAccessManager 时遇到麻烦。相同的功能在不使用线程的情况下也能正常工作。我目前只使用一个线程，我还需要添加更多线程。

它会触发错误消息：“Object::connect: No such slot QThread::replyFinished(QNetworkrReply*)”

头文件代码（NewThread.h）为：

```
class NewThread: public QThread
{
    public slots:
         void replyFinished(QNetworkReply* reply);

    protected:
         void run();

    private: 

};

The source code file(NewThread.cpp ):

void NewThread::replyFinished(QNetworkReply *net_reply)
{
    QByteArray data = net_reply->readAll();
    QString str(data);    
}

void NewThread::run()
{

QNetworkAccessManager *manager;
        manager = new QNetworkAccessManager ();
        QNetworkRequest req;
        req.setUrl(QUrl("My url"));

        QByteArray postData;

        postData.append("some data string");

        req.setHeader(QNetworkRequest::ContentTypeHeader, "application/x-www-form-urlencoded");

        manager->setCookieJar(new QNetworkCookieJar(manager));
        //Define the Request-url:
        connect (manager, SIGNAL(finished(QNetworkReply *)), this, SLOT(replyFinish (QNetworkReply  *)));
        //Send the request:
        manager->post(req, postData);
}

void NewThread::replyFinish(QNetworkReply *reply)
{
     QString answer = QString::fromUtf8(reply->readAll());
     qDebug () << answer;
} 
```

我正在另一个类中创建一个 NewThread 类的对象，如下所示：

```
NewThread thread1;
thread1.start(); 
```

我想知道为什么相同的代码在没有线程而不是线程的情况下工作。我处境艰难，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:41:15.203

在您的头文件中，您声明**了replyFinished**

```
public slots:
         void replyFinished(QNetworkReply* reply); 
```

但是，在您的源文件中，您连接到**replyFinish**

```
connect (manager, SIGNAL(finished(QNetworkReply *)), this, SLOT(replyFinish (QNetworkReply  *))); 
```

QObject::connect 找不到**replyFinish**，因为它只是一个方法，而不是槽。请连接到正确的插槽名称。

正如其他人所说，您需要`Q_OBJECT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:11:50.860

不要忘记，如果信号来自单独的线程，您需要启动捕获信号的线程的事件循环。阅读[QThread](http://doc.qt.digia.com/qt/qthread.html)的详细描述。不要忘记 Q_OBJECT 宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:17:35.790

您需要在类声明中添加 Q_OBJECT 宏

然后你需要用Qt的“moc”工具对头文件进行预处理，并将生成的cpp文件添加到你的项目中。

一旦您将所有内容构建在一起，它应该可以正常工作

# c++ - 当我们尝试使用和不使用虚函数访问向下转换的指针时发生了什么

> ID：12956399
> 
> 赞同：1
> 
> 时间：2012-10-18T13:56:36.357
> 
> 标签：c++, inheritance, casting, virtual

首先是2个代码：

```
#include<iostream>
using namespace std;

class A{
  public:
     virtual void  f()
    {
      cout<<"A"<<endl;
    }
};
class B: public A{
  public:
    virtual void  f()
    {
      cout<<"B"<<endl;
    }
};
int main()
{
  A* pa=new A();
  B* pb=new B();
  A* upCastpa= static_cast<A*>(pb);
  B* downCastpb=static_cast<B*>(pa);
  upCastpa->f();
  downCastpb->f();
  return 1;
} 
```

一个显示器

```
B
A 
```

因此，我认为真正重要的是指针指向的对象。但是，如果我像这样删除虚拟表单 A::f()；

```
#include<iostream>
using namespace std;

class A{
  public:
     void  f()
    {
      cout<<"A"<<endl;
    }
};
class B: public A{
  public:
    virtual void  f()
    {
      cout<<"B"<<endl;
    }
};
int main()
{
  A* pa=new A();
  B* pb=new B();
  A* upCastpa= static_cast<A*>(pb);
  B* downCastpb=static_cast<B*>(pa);
  upCastpa->f();
  downCastpb->f();
  return 1;
} 
```

代码会显示一个“停止” 发生了什么？如果重要的是指针指向的对象。

它假设显示 A B 而不是损坏。

发生了什么？

我非常感谢任何建议或指导。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:08:43.510

不管有无`virtual`功能：

```
A* pa=new A(); 
B* downCastpb=static_cast<B*>(pa); 
```

导致**未定义的行为**。

当您使用`static_cast`将对象强制转换为它不是的类型时，它会导致未定义的行为。一旦你的代码产生了未定义的行为，尝试为观察到的输出寻找推理是没有用的。编译器可以自由地显示任何行为、崩溃、奇怪的结果或绝对正常的工作代码。您完全受编译器的支配。

**参考：**

**C++11 标准 5.2.9 [expr.static.cast]**

> 如果从“pointer to ”到“pointer”的有效标准转换，“ pointer to *cv1* ”类型的纯右值`B`，其中`B`是类类型，可以转换为“pointer to *cv2* `D` ”类型的纯右值，其中`D`是从 派生的类如果" 存在，则 cv2 与*cv1*具有相同的 cv 限定或大于*cv1*的 cv 限定，并且 既不是 的虚拟基类，也不是 的虚拟基类的基类。空指针值转换为目标类型的空指针值。如果类型为“指向*cv1*的指针”的纯右值`B``D``B`**`B``D``D` *`B``B``D`，结果指针指向类型的封闭对象`D`。否则，强制**转换的结果是 undefined**。***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:04:18.037

通过删除第一个`virtual`，您可以有效地防止它进入 vtable。这意味着 class`A`的 vtable 现在是空的。但是，因为类`B`确实有一个虚函数，所以它的 vtable 中有一个条目。

因此，当您将 an 向下转换`A*`为 a `B*`，然后`f`通过它调用时，调用将`f`在空 vtable 中查找函数。没有找到它，它会抱怨代码损坏。

实际上，在一般情况下，您的示例 1 也不起作用。它在这种特殊情况下起作用的原因是 vtable for`A`和`B`完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:03:02.957

这就是多态性。您应该写入`virtual void f()`基类 A 并写入`void f()`继承类 B***

# msbuild - 升级到 .NET Framework 4.5 后，配置文件转换停止工作

> ID：12956400
> 
> 赞同：2
> 
> 时间：2012-10-18T13:56:47.273
> 
> 标签：msbuild, configuration-files, .net-4.5, slowcheetah

将我们的解决方案升级到 .NET Framework 4.5 后，我们的配置文件转换停止工作。

我还问了一个可能与此相关的问题，但仍然是一个单独的问题，[在将解决方案升级到 .NET 框架 4.5 后，日常部署停止工作](https://stackoverflow.com/questions/12955967/after-upgrading-solution-to-net-framework-4-5-the-daily-deploy-stopped-working)。

我也有另一种部署方式，如下所示。

```
<MSBuild
                Projects="$(SolutionRoot)\My.Web\My.Web.csproj"
                Properties=
                "OutDir=$(OutDirPath)\My.WindowsService\;Configuration=Dev;DebugType=pdbonly;Optimize=true"
                ContinueOnError="False"
                />

<Exec Command="&quot;$(MsDeployExePath)&quot; -verb:sync -source:contentPath=&quot;$(OutDirPath)\My.WindowsService&quot;                 
              -dest:contentPath=&quot;E:\dev.mywindowsservice&quot;,computername=https://10.xxx.xxx.xxx:8172/MsDeploy.axd,username=UserName,password=Password,authtype=Basic -allowUntrusted=True"
              ContinueOnError="false" /> 
```

这在 .NET Framework 升级之前一直有效，并且仍将应用程序部署到正确的位置。

但是，配置文件的转换，使用 SlowCheetah，不再起作用。

因为我们现在使用的是 VS2012，所以我也升级了 SlowCheetah 程序集。

就像我的其他情况一样，它似乎与 MSBuild 有关，但我无法真正找出问题所在。

转换确实在 VS2012 中工作，无论是在我们构建解决方案时还是在右键单击“预览转换”时。

任何人都遇到过同样的问题并且知道该怎么做？

# xcode - 等待应用程序启动超时

> ID：12956402
> 
> 赞同：0
> 
> 时间：2012-10-18T13:56:51.990
> 
> 标签：xcode, build

> **可能重复：**
> [Xcode 4.4 错误 - 等待应用程序启动超时](https://stackoverflow.com/questions/11683308/xcode-4-4-error-timed-out-waiting-for-app-to-launch)

我正在 Release 中构建一个应用程序，并在 iPhone 4s 上运行。

当我点击运行时，一切正常，我的应用程序甚至可以在 iPhone 上运行。

但是一两秒后，我的应用程序仍在运行时，我收到了来自 Xcode 的错误：“等待应用程序启动超时”。

这很奇怪，我想避免这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:59:38.380

您是否在 AppDelegate 中加载了太多东西？请注意这一点，因为当您向 AppStore 提交应用程序时，如果该应用程序花费太多时间启动，他们将拒绝您的应用程序。检查此链接[超时等待应用程序启动](https://stackoverflow.com/questions/11683308/xcode-4-4-error-timed-out-waiting-for-app-to-launch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:05:32.077

在表明您的应用程序已加载之前，您的启动时间过长。您是异步启动代码，还是嵌入对以下内容的调用：

```
[window makeKeyAndVisible]; 
```

在开始您的长期操作之前。

# php - 如何从地图外部使用谷歌地图 v3 中的自定义平移控件

> ID：12956405
> 
> 赞同：6
> 
> 时间：2012-10-18T13:57:05.917
> 
> 标签：php

我正在使用谷歌地图 v3 api，我想要自定义意味着我想在地图之外重新定位平移控件![我正在使用谷歌地图 v3 api，我想自定义](../Images/1fa7ed431722c6e6a56d5f14651b2e09.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:17:37.840

我认为使用 css 可以解决 1\. Position:absolute; 2\. 顶部：-30px；3\. zindex:999;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T05:18:06.963

`google maps api`简单地说，如果没有任何功能可以做到这一点，你不能在 css / javascript中做到这一点，所以只是在谷歌地图中忘记了这一点，为什么你不应该尝试像这个[mapbox这样的其他地图提供商](http://www.mapbox.com)

# sql - 列中的空值违反非空约束

> ID：12956409
> 
> 赞同：1
> 
> 时间：2012-10-18T13:57:20.597
> 
> 标签：sql, hibernate, postgresql

我在“kladr_full_name”列中有 sql 错误空值违反了非空约束。

执行数据库中的表到 wich 请求：

```
СREATE TABLE kladr.kladr_name
(
  kladr_code character varying(255) NOT NULL,
  kladr_city_name character varying(121),
  kladr_full_name character varying(487) NOT NULL,
  kladr_index character varying(6),
  kladr_name character varying(100) NOT NULL,
  kladr_naspunkt_name character varying(121),
  kladr_rayon_name character varying(121),
  kladr_region_name character varying(121),
  kladr_socr character varying(20),
  CONSTRAINT kladr_name_pkey PRIMARY KEY (kladr_code )
)
WITH (
  OIDS=FALSE
);
ALTER TABLE kladr.kladr_name
  OWNER TO postgres; 
```

请求分贝：

```
 INSERT INTO kladr.kladr_name 
            (kladr_code, 
             kladr_name, 
             kladr_socr, 
             kladr_index, 
             kladr_region_name, 
             kladr_rayon_name, 
             kladr_city_name, 
             kladr_naspunkt_name, 
             kladr_full_name) 
SELECT kladr_code, 
       Upper(kladr_name)                 kladr_name, 
       kladr_socr, 
       kladr_index, 
       (SELECT k1.kladr_socr 
               ||' ' 
               ||k1.kladr_name 
        FROM   kladr.kladr_tmp k1 
        WHERE  k1.kladr_region = k.kladr_region 
               AND k1.kladr_rayon = '000' 
               AND k1.kladr_city = '000' 
               AND k1.kladr_nas_punkt = '000' 
               AND k1.kladr_mod = '00' 
               AND k1.kladr_status = '0')kladr_region_name, 
       (SELECT k1.kladr_socr 
               ||' ' 
               ||k1.kladr_name 
        FROM   kladr.kladr_tmp k1 
        WHERE  k1.kladr_region = k.kladr_region 
               AND k1.kladr_rayon = k.kladr_rayon 
               AND k1.kladr_rayon <> '000' 
               AND k1.kladr_city = '000' 
               AND k1.kladr_nas_punkt = '000' 
               AND k1.kladr_name = '00') kladr_rayon_name, 
       (SELECT k1.kladr_socr 
               ||' ' 
               ||k1.kladr_name 
        FROM   kladr.kladr_tmp k1 
        WHERE  k1.kladr_region = k.kladr_region 
               AND k1.kladr_rayon = k.kladr_rayon 
               AND k1.kladr_city = k.kladr_city 
               AND k1.kladr_city <> '000' 
               AND k1.kladr_nas_punkt = '000' 
               AND k1.kladr_mod = '00')  kladr_city_name, 
       (SELECT k1.kladr_socr 
               ||' ' 
               ||k1.kladr_name 
        FROM   kladr.kladr_tmp k1 
        WHERE  k1.kladr_region = k.kladr_region 
               AND k1.kladr_rayon = k.kladr_rayon 
               AND k1.kladr_city = k.kladr_city 
               AND k1.kladr_nas_punkt = k.kladr_nas_punkt 
               AND k1.kladr_nas_punkt <> '000' 
               AND k1.kladr_mod = '00')  kladr_naspunkt_name, 
       (SELECT k1.kladr_socr 
               ||' ' 
               ||k1.kladr_name 
        FROM   kladr.kladr_tmp k1 
        WHERE  k1.kladr_region = k.kladr_region 
               AND k1.kladr_rayon = '000' 
               AND k1.kladr_city = '000' 
               AND k1.kladr_nas_punkt = '000' 
               AND k1.kladr_mod = '00' 
               AND k1.kladr_status = '0') 
       ||' ' 
       ||(SELECT k1.kladr_socr 
                 ||' ' 
                 ||k1.kladr_name 
          FROM   kladr.kladr_tmp k1 
          WHERE  k1.kladr_region = k.kladr_region 
                 AND k1.kladr_rayon = k.kladr_rayon 
                 AND k1.kladr_rayon <> '000' 
                 AND k1.kladr_city = '000' 
                 AND k1.kladr_nas_punkt = '000' 
                 AND k1.kladr_mod = '00') 
       ||' ' 
       ||(SELECT k1.kladr_socr 
                 ||' ' 
                 ||k1.kladr_name 
          FROM   kladr.kladr_tmp k1 
          WHERE  k1.kladr_region = k.kladr_region 
                 AND k1.kladr_rayon = k.kladr_rayon 
                 AND k1.kladr_city = k.kladr_city 
                 AND k1.kladr_city <> '000' 
                 AND k1.kladr_nas_punkt = '000' 
                 AND k1.kladr_mod = '00') 
       ||' ' 
       ||(SELECT k1.kladr_socr 
                 ||' ' 
                 ||k1.kladr_name 
          FROM   kladr.kladr_tmp k1 
          WHERE  k1.kladr_region = k.kladr_region 
                 AND k1.kladr_rayon = k.kladr_rayon 
                 AND k1.kladr_city = k.kladr_city 
                 AND k1.kladr_nas_punkt = k.kladr_nas_punkt 
                 AND k1.kladr_nas_punkt <> '000' 
                 AND k1.kladr_mod = '00')kladr_full_name 
FROM   kladr.kladr_tmp k 
WHERE  k.kladr_mod = '00' 
```

数据库 postgreSql。jpa省休眠。这可能是什么原因？

现在的问题是，如果某些子查询返回 null，如何修改此查询以在 postgres 中工作（在它在 oracle db 中工作之前）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:07:00.840

在 PostgreSQL 中，如果它的任何一个`a || b`参数`NULL`是`NULL`. 因此，如果这些子查询中的*任何*一个未能找到记录，您的`INSERT`语句将尝试插入`NULL`。您需要分别尝试这些子查询中的每一个，并查看哪个子查询没有给您记录（或给您一个记录）。`kladr_full_name`*`NULL`*

 ** * *

**编辑添加**以响应 OP 评论：在 Oracle 中，没有零长度字符串的概念，因为它们被转换为`NULL`（因此，例如，`'' = ''`不是真的，而是`'' IS NULL`）。通常转换是单向的`LENGTH('') IS NULL`——但在`||`运算符的情况下，它会转换`NULL`回零长度字符串，`'ab' || NULL || 'cd'`例如`'abcd'`. PostgreSQL 不会自动进行这种转换，因为它*确实*区别于`''`，`NULL`但您可以：

*   通过使用`COALESCE`函数显式执行此转换（记录在[PostgreSQL 9.2 手册的 §9.17 “条件表达式”中](http://www.postgresql.org/docs/9.2/static/functions-conditional.html)）：`COALESCE(NULL, '')`计算结果为`''`; 或者
*   使用`CONCAT`函数（记录在[PostgreSQL 9.2 手册的 §9.4 “字符串函数和运算符”中](http://www.postgresql.org/docs/9.2/static/functions-string.html)）而不是`||`运算符。该`CONCAT`函数只是跳过任何`NULL`参数，因此`CONCAT('ab', NULL, 'cd')`计算结果为`'abcd'`. 但是，此功能仅从 PostgreSQL 9.x 开始可用，因此如果您使用的是 PostgreSQL 8.x 或更早版本，则需要使用该`COALESCE`方法。*

# c# - 从 excel 数据验证中删除帮助按钮

> ID：12956415
> 
> 赞同：1
> 
> 时间：2012-10-18T13:57:33.827
> 
> 标签：c#, visual-studio-2008, vsto, excel-2007

我想从数据验证中删除帮助按钮。在 excel 2003 数据验证中，此按钮不存在，但现在我想将其从 excel 2007 数据验证错误中删除。请不要问为什么要删除帮助按钮。

我的项目类型是visual studio 2008的excel模板。

![Excel 2007数据验证错误的SS](../Images/0f0d88df00e1e9d0af7b0c2bcc4611a9.png)

**编辑**

除了 Worksheet_Change 之外，还有其他方法可以完成这件事吗？我认为这可能会降低性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:46:24.193

如果您使用的是内置数据验证，则无法删除帮助按钮。建议您简单地使用帮助按钮，因为唯一已知的解决方法是重新创建 Excel 的内置功能非常耗时。

您需要创建一个自定义 msgbox 来侦听 Worksheet Change 并检查值。[这是一个基本上取自](http://www.howtogeek.com/forum/topic/excel-error-alert-window-on-data-validation#post-270371)这里的 VBA 示例：

```
Private Sub Worksheet_Change(ByVal Target As Range)
dim msg as string
dim Style as string
dim Title as string
dim Response as long
'Update Cells to be the actuall range you want to validate
If Intersect(Target, Cells(1, 2)) Then
    If Cells(1, 2).Value <> "whatever" Then
        msg = "Value must be LT 1"
        Style = vbRetryCancel + vbCritical
        Title = "Mt Error"
        Response = MsgBox(msg, Style, Title)
    End If
End If
End Sub 
```

# php - 与邮件服务器的连接失败

> ID：12956428
> 
> 赞同：0
> 
> 时间：2012-10-18T13:58:09.907
> 
> 标签：php, email

我正在尝试发送大量电子邮件..所有密件抄送..我尝试了我在谷歌上可以找到的所有内容..似乎没有任何工作...我也检查了我的 php.ini 文件并根据我的设置进行了设置在谷歌上找到...

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25 
```

我的标题中有错误，我的 php 文件的一部分在下面......任何帮助将不胜感激..

```
$to = "";
$header = "From:me@gmail.com\r\n";

//Compiling BCC list
for($i=0; $i<$count; $i++)
{
    if($i == 0)
        $header .= $emailContacts[$i];
    else
        $header .= ",".$emailContacts[$i];
}

if(mail($to, $subject, $message, $header))
    echo "MAIL pass";
else
    echo "MAIL fail"; 
```

错误：

> 警告：mail()：无法在“localhost”端口 25 连接到邮件服务器，请验证您的“SMTP”和“smtp_port”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:07:09.900

您需要在计算机上安装 SMTP 服务器，或使用外部 SMTP 服务器。您可以使用 Gmail，但它们相当有限，我建议使用专门针对该领域的服务，例如[Sendgrid](http://sendgrid.com)、[Mailjet](http://mailjet.com)或[Postmarkapp](http://postmarkapp.com)

作为一个很大的附带好处，这些人将确保您获得最大的可交付性（不要以垃圾邮件告终）

**免责声明**：我为 Mailjet 工作

# web-services - 如何使用 SOAPUI 实现异步测试

> ID：12956429
> 
> 赞同：1
> 
> 时间：2012-10-18T13:58:10.990
> 
> 标签：web-services, asynchronous, soapui, routes, asynchronous-postback

（对不起我的请求的长度）

我用来实现异步测试的当前技术：1\. ssh 到我们的服务器 ex) svr.server.com（位于数据中心的其他地方） 2\. 创建一个 v.host myname.server.com 3\. 使用一些脚本来制作 curl向 svr.server.com（来自同一个 svr.server.com）的请求（xml 作为 post） 注意：请求 xml 将有一个回调 url（它只是我的 v.host 地址），服务器将使用它来回调带有响应 xml

我所拥有的：我的公司中有 my.testbox.com，可以向 svr.server.com（位于数据中心的其他地方）发出请求，但服务器不知道如何返回我的盒子。（这就是为什么我使用上面提到的“当前技术”，因为没有路线）（我知道我需要添加路线，但不确定在哪里以及如何 - 这可能是一个不同的话题）

现在，我想成为：能够将我的所有请求 [xml as POST]（从我的办公室）发送到服务器，而无需等待（异步）对 svr.server.com（位于数据中心的其他位置）和服务器的响应应该能够用 xml 回复。

我将对响应 xml 执行各种断言。

有人可以让我知道这是否可以使用 SOAPUI 或 SOAPUI pro 吗？如果“是”，如何？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:07:28.830

是的，soapUI 可以同时启动多个请求并等待自定义时间量的响应，然后断言有关响应的不同内容。您要实现的实际上称为负载测试。有关更多信息，请参见网址：http: [//www.soapui.org/Load-Testing/simulating-different-types-of-load.html](http://www.soapui.org/Load-Testing/simulating-different-types-of-load.html)

PS：我不知道您的网络相关问题（反向DNS？）。这似乎不是您可以使用soapUI 解决的问题。

# json.net - Json 和解析 C#

> ID：12956433
> 
> 赞同：5
> 
> 时间：2012-10-18T13:58:26.397
> 
> 标签：json.net

我需要你的帮助。我是 C# 新手，所以我将不胜感激！所以我做了一个程序来解析一个 json 文件并将其放入一个对象中。我的程序如下所示：

```
var path = (@"C:\sim\input7.json");
using (StreamReader reader = File.OpenText(path))
{
   JObject SimData = JObject.Parse(reader.ReadLine());
   Console.WriteLine("Object ID: " + SimData["_id"]);
   Console.WriteLine("ID: " + SimData["id"]);
   Console.WriteLine("Day: " + SimData["day"]);
   Console.WriteLine("Value: " + SimData["value"]); 
```

首先，我在我的 json 文件中只使用了一行，它工作正常。现在我有多行，例如：

```
{ "_id" : "_id1" , "id" : "100", "day" : "5", "value" : "90.38", "time" : "000000" }
{ "_id" : "_id2", "id" : 100, "day" : 5, "value" : 89.79000000000001, "time" : "000100" } 
```

我的问题是，例如，如果我想要`Console.WriteLine();`每个值该怎么办！

我尝试了几件事，但无法解决这个问题。我有相同的输入文件。我现在试过了：

```
using (StreamReader reader = new StreamReader(path))
                 {
                    string line;
                    while ((line = reader.ReadLine()) != null)
                     {
                        list.Add(line);
                        JObject SD = JObject.Parse(line);
                        Console.WriteLine(SD["day"]);
                     }
              } 
```

只想为每一行写出“价值”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T09:12:40.650

你可能想要一个合适的 json 文件，它会更容易阅读（也更干净）：

```
{ "_id" : "_id1" , "id" : "100", "day" : "5", "value" : "90.38", "time" : "000000" }
{ "_id" : "_id2", "id" : 100, "day" : 5, "value" : 89.79000000000001, "time" : "000100" } 
```

这不是 json

```
[{ "_id" : "_id1" , "id" : "100", "day" : "5", "value" : "90.38", "time" : "000000" },
{ "_id" : "_id2", "id" : 100, "day" : 5, "value" : 89.79000000000001, "time" : "000100" }] 
```

这是一个 json 数组。

如果您可以拥有此 json 文件，那么您可以使用`Json.Net`为您正在解析的对象创建一个类将其作为列表轻松读取：

```
public class IdObject
{
    public string _id { get; set; }
    public int id { get; set; }
    public int day { get; set; }
    public int value { get; set; }
    public int time { get; set; }
} 
```

然后 ：

```
List<IdObject> list = JsonConvert.DeserializeObject<List<IdObject>>(jsonString);
Console.WriteLine(list[0]._id); 
```

*结果：_id1*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:09:29.377

分别解析每个 JSON 文件：

```
foreach(DirectoryInfo directoryInfo in new DirectoryInfo(@"C:\sim\").getDirectories());
{
   using (StreamReader reader = File.OpenText(directoryInfo.FullName))
{
   JObject SimData = JObject.Parse(reader.ReadLine());
   Console.WriteLine("Object ID: " + SimData["_id"]);
   Console.WriteLine("ID: " + SimData["id"]);
   Console.WriteLine("Day: " + SimData["day"]);
   Console.WriteLine("Value: " + SimData["value"]);
}
} 
```

# fancybox - fancybox 可以在一台服务器上运行，但不能在另一台服务器上运行

> ID：12956434
> 
> 赞同：2
> 
> 时间：2012-10-18T13:58:26.163
> 
> 标签：fancybox, lightbox

我已将我的网站上传到由两家不同公司托管的两台不同服务器。

此版本由 Newtek Technology Services 托管：

[http://urbanresearchtheater.com/esr2012/r_paintings.htm](http://urbanresearchtheater.com/esr2012/r_paintings.htm)

此版本由 Midphase 托管：

[http://www.espatzrabinowitz.com/newsite2012/r_paintings.htm](http://www.espatzrabinowitz.com/newsite2012/r_paintings.htm)

第一个站点运行良好，但在第二个站点上，fancybox 什么也没做！编码和一切都完全一样，所以我认为Midphase主机上一定有问题。也许某些东西没有打开或安装正确。我不知道。有没有人遇到过这个并且可以建议我如何在第二个站点上解决这个问题？

谢谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:51:36.157

在第二个链接（您在 Midphase 的新主机）中，您所有的 fancybox 文件都返回一个`404`错误，这意味着文件不在您所说的位置，例如：

[http://www.espatzrabinowitz.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.0](http://www.espatzrabinowitz.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.0)

....不存在所以或者你修改了`path`或者你只是忘记上传`/fancybox/source/`目录中的fancybox文件

**更新**：找到他们！！！

[http://www.espatzrabinowitz.com/newsite2012/fancybox/source/jquery.fancybox.pack.js?v=2.1.0](http://www.espatzrabinowitz.com/newsite2012/fancybox/source/jquery.fancybox.pack.js?v=2.1.0)

...所以你的正确目录/路径（从根目录）是`/newsite2012/fancybox/source/`

# android - Android：限制/限制下载管理器

> ID：12956436
> 
> 赞同：2
> 
> 时间：2012-10-18T13:58:34.763
> 
> 标签：android, android-download-manager

我对 android 很陌生，但似乎有两种主要方法可以在 android 中下载文件，下载管理器和此方法：

```
byte data[] = new byte[1024];
long total = 0;
int count;
while ((count = input.read(data)) != -1) {
    total += count;
    // publishing the progress....
    publishProgress((int) (total * 100 / fileLength));
    output.write(data, 0, count);
} 
```

我需要能够在应用程序端限制下载（大文件，低带宽），有没有办法在任何一种方法中做到这一点（最好在下载管理器中）？如果我`data[]`从`[1024]`to减少`[512]`，那会通过一次取更小的块来完成吗？

谢谢。

# javascript - 在 JavaScript 中访问 MongoDB 集合值

> ID：12956438
> 
> 赞同：14
> 
> 时间：2012-10-18T13:58:42.763
> 
> 标签：javascript, mongodb, meteor

我是 Meteor 的新手，尤其是 MongoDB。

关于这个问题，我在谷歌上搜索了很多，但没有发现与此相关的内容。

所以有一个包含两个集合的应用程序：`EventsCollection`和`RacesCollection`运行在 Meteor 服务器上。

有`RacesCollection`许多记录，例如：

```
RacesCollection.insert({raceId:"r1", eventId:"e1", raceName:"Moto race 1", status:"statusDetail", mode:"modeDetail"});
RacesCollection.insert({raceId:"r2", eventId:"e1", raceName:"Moto race 2", status:"statusDetail", mode:"modeDetail"}); 
```

这是包含行的结果集合`eventId = e1`

```
var race = RacesCollection.find({eventId: "e1"}); 
```

现在我想做的是简单地访问`race`javascript 中的字段，例如`race.raceId`, `race.raceName`。如何实施？是否有任何获取特定数据字段的 getter 方法？

以及如何遍历多行`race`以防它包含行数？

任何建议都会被采纳。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-06-04T11:33:03.913

使用 ForEach ：

```
db.databaseName.find(
  {
    field:"valueofField"
  }
).forEach(function(obj){
    print(obj.fieldname)
}) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T14:25:58.163

MongoDB 的`find()`方法返回所谓的“光标”。[在 javascript 中，您可以像在这些文档](http://www.mongodb.org/display/DOCS/Queries+and+Cursors)中一样遍历光标，并使用标准 javascript 属性访问来访问文档的字段。

例如（未经测试的代码，但这是想法）：

```
var raceCursor = RacesCollection.find({eventId: "e1"});
var race;
while ( raceCursor.hasNext() ) {
    race = raceCursor.next();
    console.log( race.raceName );
} 
```

由于 Meteor 是纯 javascript，它还支持使用`forEach()`来遍历光标的文档，如[本例所示](http://docs.meteor.com/#foreach)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-16T23:25:06.253

我只是遇到了同样的问题，而 hasNext() 对我不起作用。

相反，Meteor 提供了[fetch()](http://docs.meteor.com/#fetch)来将游标转换为 javascript 数组。所以你可以使用：

```
var raceCursor = RacesCollection.find({eventId: "e1"});
var races = raceCursor.fetch();
for (var i=0; i<races.length; i++) {
    console.log( races[i].raceName );
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-02T15:31:02.770

Sekai 的答案有效，但是，它是从 MongoDB 的角度编写的。从 Meteor JavaScript 助手，使用问题中使用的变量，它看起来像：

```
RacesCollection.find(
   {eventId: "e1"}
).forEach(function(race){
   console.log( race.raceName );
}; 
```

# php - 如何正确地将php数组分配给javascript数组

> ID：12956444
> 
> 赞同：2
> 
> 时间：2012-10-18T13:58:53.983
> 
> 标签：php, javascript, mysql, arrays

1）在javascript所在的头部，我有以下内容

```
var chartData =[];
...

// generate some random data which I need to change to php array
generateChartData();
...

chart.dataProvider = chartData;
...

function generateChartData() {

            var firstDate = new Date();
            firstDate.setDate(firstDate.getDate() - 100);

            for (var i = 0; i < 100; i++) {
                var newDate = new Date(firstDate);
                newDate.setDate(newDate.getDate() + i);

                var PROCNT = Math.round(Math.random() * 4) + 100;
                var FAT = Math.round(Math.random() * 8) + 100;
                var CHOCDF = Math.round(Math.random() * 1) + 80;
                var glucose = Math.round(Math.random() * 1) + 110;
                var albumine = Math.round(Math.random() * 2) + 102;
                var creatinine = Math.round(Math.random() * 3) + 70;
                var Na = Math.round(Math.random() * 6) + 103;
                var K = Math.round(Math.random() * 4) + 110;
                var Ca = Math.round(Math.random() * 2) + 83;

                chartData.push({
                   date: newDate,
                   Protein: PROCNT,
                    Fats: FAT,
                    Carbo: CHOCDF,
                    Glucose: glucose,
                    Albumine: albumine,
                    Creatinine: creatinine,
                    Sodium: Na,
                    Potasium: K,
                    Calcium: Ca
                });
            }
        } 
```

这适用于这个随机数据，它以正确的方式显示，但我需要在儿子加入后使用某些 mysql 查询来制作图形，所以

2）在某些用户操作后，在我的 php 程序上，我有以下内容：

```
while ($row = mysql_fetch_row($result)) {

             $date=$row[1];
             $PROCNT=$row[2];
             $FAT=$row[3];
             $CHOCDF=$row[4];
             $glucose=$row[5];
             $albumine=$row[6];
             $creatinine=$row[7];
             $Na=$row[8];
             $K=$row[9];
             $Ca=$row[10];

             $new=array_splice($row,1,-10);

             $chartData_1 = implode(', ', $new); 

$pass="date: $date, Protein: $PROCNT, Fats: $FAT, "
                    ."Carbo: $CHOCDF, "
                    ."Glucose: $glucose, "
                    ."Albumine: $albumine, "
                    ."Creatinine: $creatinine, "
                    ."Sodium: $Na, "
                    ."Potasium: $K, "
                    ."Calcium: $Ca";

         $json = json_encode($pass); 
                  echo $json; 
```

...然后我刷新屏幕和我拥有的数据网格...获取新网格和图形

3）所以我的 $json 看起来不错：

```
"date: 2012-10-10, Protein: 10.6532, Fats: 45.5899, Carbo: 6.83007, Glucose: 120, Albumine: 3.9, Creatinine: 1.2, Sodium: 15, Potasium: 22, Calcium: 21" 
```

4) 我需要在哪里将 $json 分配给 javascripot chartData 数组以及如何分配？

我已经尝试了我在 inet 上找到的所有内容，但可以让它工作，我不明白我做错了什么。我不是程序员，所以清楚的解释将更加感激。

我的程序进行查询，显示网格，并在网格之后显示图形。我们等待用户的一些操作，所以在某些选择上，我们进行步骤 2 中的其他查询并在图形上显示结果，所以第一次图形没有数据，但是在网格显示和用户操作之后，我们尝试在javascript上填充chartData数组并显示图形，但是“如何以及在哪里将这样的php数组发送到javascript以显示图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:19:08.613

为什么不使用（示例）将数组直接编码为json

```
$myKeys = array('date', 'Protein', 'Carbo' /*, ... */);
$myValues = array(date('m/d/Y'), 25.3, 32 /*, ... */);
$myData = array_combine($myKeys, $myValues);

$json = json_encode($myData);
echo $json; // {"date":"10\/18\/2012","Protein":25.3,"Carbo":32} 
```

一种快速集成方法：

```
 <?php
    // your code that generate $result
    ?>

    <script type="text/javascript">

    /* ... your js ... */

    function generateChartData() {

    /* ... */

    <?php
    // a part of php to fill chartData
    while ($row = mysql_fetch_row($result)) {             

        // build data from $row 
        $json = json_encode($data);
        echo "chartData.push($json)\n";
    }
    ?>
    /* ... end of generateChartData... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T10:28:37.477

```
<script type="text/javascript">
   var yourarray = <?php echo json_encode($php_array); ?>;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:00:49.050

用 php解析你的`JSon`，并为你的 json 中的每个元素将它添加到你的`javascript array`：

```
var array = new Array(<?= $element1; ?>, <?= $element2; ?>); 
```

# android - 从线性布局获取位图时为空指针

> ID：12956445
> 
> 赞同：1
> 
> 时间：2012-10-18T13:58:55.087
> 
> 标签：android

我正在尝试将线性布局转换为位图。但它给出了一个空指针异常。我的代码是。

位图为空。因为我没有得到“不为空”的吐司。为什么我将位图设为空。我尝试了许多类似的问题，但那里的代码相同。

```
public class Receipt extends Activity {

    public Bitmap bitmap;
    LinearLayout layout;
    private String fileName;
    private File file;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.receipt);
        ImageView iv = (ImageView) findViewById(R.id.Ivsignature);
        iv.setImageBitmap(Signature.sign);

        layout = (LinearLayout) findViewById(R.id.Llreceipt);
        layout.setDrawingCacheEnabled(true);
        layout.buildDrawingCache();
        bitmap = layout.getDrawingCache(true);

        if (bitmap != null)
            Toast.makeText(getApplicationContext(), "not null",
                    Toast.LENGTH_LONG).show();
        String myPath = Environment.getExternalStorageDirectory()
                + "/signature_image";
        File myDir = new File(myPath);
        try {
            myDir.mkdirs();
        } catch (Exception e) {
        }

        String fname = fileName + "gwg" + ".jpg";
        file = new File(myDir, fname);
        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream(file);
            bitmap.compress(CompressFormat.JPEG, 100, fos);
            Toast.makeText(getApplicationContext(), "File saved",
                    Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), String.valueOf(e),
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:12:32.820

您可以将视图绘制到使用位图实例化的画布上，以便将视图写入位图。绘制到该画布后，位图将包含视图。

确保在您的视图布局并实际具有宽度和高度后调用下面的函数

```
public Bitmap createBitmapForView(View view)
{
    int width = view.getWidth();
    int height = view.getHeight();

    // create a bitmap the size of the view
    Bitmap screenShot = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

    // create a canvas with the bitmap
    Canvas canvas = new Canvas(screenShot);

    // draw the view to the canvas
    view.draw(canvas);

    // now your bitmap contains the view
    return screenShot;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:00:38.193

您不能在 onCreate 中执行此操作，因为尚未绘制视图。您可以在活动中使用 ViewTreeObserver 或覆盖 onAttachedToWindow()。

[http://developer.android.com/reference/android/view/ViewTreeObserver.html](http://developer.android.com/reference/android/view/ViewTreeObserver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:04:30.787

```
package com.example.snapshotlayout;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.graphics.Bitmap;
import android.view.View.MeasureSpec;
import android.widget.ImageView;
import android.widget.TextView;

public class SnapshotActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_snapshot);

    //initializing layouts
    TextView textView = (TextView)findViewById(R.id.textView);
    ImageView snapImage = (ImageView)findViewById(R.id.imageView);
    textView.setDrawingCacheEnabled(true);

    //specifying the dimensions of view
    textView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
          MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

    textView.layout(0, 0, textView.getMeasuredWidth(), textView.getMeasuredHeight()); 

    textView.buildDrawingCache(true);
    Bitmap b = Bitmap.createBitmap(textView.getDrawingCache());
    textView.setDrawingCacheEnabled(false); // clear drawing cache

    snapImage.setImageBitmap(b);   

    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    b.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

    //create a new file in sdcard name it as "testimage.jpg"
    File fileImage = new File(Environment.getExternalStorageDirectory()
                            + File.separator + "testimage.jpg");

    //write the bytes in file
    FileOutputStream fo = null;
    try {
        fileImage.createNewFile();
        fo = new FileOutputStream(fileImage);
        fo.write(bytes.toByteArray());
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

这是xml文件的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:id="@+id/snapLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<TextView
    android:id="@+id/textView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Take snapshot of this layout"/>
<ImageButton  
    android:id="@+id/imageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

</LinearLayout> 
```

取自 [http://hoodaandroid.blogspot.in/2012/09/taking-snapshot-or-screen-capture-of.html](http://hoodaandroid.blogspot.in/2012/09/taking-snapshot-or-screen-capture-of.html)

# java - 阻止 SSLSocket 直到握手完成？

> ID：12956449
> 
> 赞同：4
> 
> 时间：2012-10-18T13:59:04.047
> 
> 标签：java, android, ssl

有没有办法让 SSLSocket 等到握手完成而不使用 addHandshakeListener() 方法？我希望它在完成握手之前阻止。

编辑：再澄清一点：最初使用常规（非 SSL）套接字（这是必需的，因为必须在实际握手发生之前将包发送到服务器）。[使用SslSocketFactory.createSocket](http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLSocketFactory.html#createSocket%28java.net.Socket,%20java.lang.String,%20int,%20boolean%29)将此套接字“转换”为 SSLSocket 。我的问题是，现在是否有办法同步握手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T21:48:29.103

SSLSocket.startHandshake() 是第一次开始对等方之间的握手时的同步调用，它将阻塞调用线程，直到握手完成：

```
... ...

// initial handshake between peers, don't need Listener:
sslSocket.startHandshake(); // <- this will block the calling thread.
// handshake is completed at this point

... ... 
```

[这在Android API](http://developer.android.com/reference/javax/net/ssl/SSLSocket.html#startHandshake%28%29)中没有完整记录，请参阅原始[Java API](http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLSocket.html#startHandshake%28%29)以获取完整的 javadoc：

> 在此连接上启动 SSL 握手。常见原因包括需要使用新的加密密钥、更改密码套件或启动新会话。要强制完成重新身份验证，当前会话可能会在开始此握手之前失效。
> 
> 如果数据已在连接上发送，则在此握手期间继续传输。当握手完成时，这将通过一个事件发出信号。**此方法对于连接上的初始握手是同步的，并在协商的握手完成时返回。**某些协议可能不支持现有套接字上的多次握手，并可能引发 IOException。

如果您在对等点之间多次操作握手，情况会变得非常复杂，在某些情况下（当您需要侦听器时）可能是异步调用，请查看此在线文档[Java 中的基础网络以](http://books.google.co.nz/books?id=l6f1jTB_XCYC&pg=PA148&lpg=PA148&dq=startHandshake%20synchronous%20call&source=bl&ots=8AcjVCj3eG&sig=PBCzDUXYn5Cpfmp_qlQiTuWeHgc&hl=en&sa=X&ei=CD6QUJyxFNGRiQfHzIHwDw&ved=0CCoQ6AEwAg#v=onepage&q=startHandshake%20synchronous%20call&f=false)获取更多详细信息。

# c# - 如何用另一个 XDocument 中的元素替换一个 XDocument 中的元素？

> ID：12956454
> 
> 赞同：0
> 
> 时间：2012-10-18T13:59:14.103
> 
> 标签：c#, xml, linq-to-xml

我有一个包含许多数据项的 XDocument。

我有另一个 XDocument，其中包含非常小的数据项集合。较小文档中的数据项在匹配路径处具有较大文档中的对应元素。

我想要做的是循环遍历较小的文档，并且对于我发现的每个元素，我都想更新较大的文档，以便将其对应的值替换为较小文档的值。

例如，较大的文档：

```
<Rootelement>
  <Desktop>
    <A>
      <El1 label="original blah" />
    </A>
  </Desktop>
  <Desktop>
    <B>
      <El2 />
    </B>
  </Desktop>
  <Desktop>
    <C>
      <El3 label="I'm the label" tooltip="I'm the tooltip" />
    </C>
  </Desktop>
</Rootelement> 
```

较小的文档：

```
<Rootelement>
  <Desktop>
    <C>
      <El3 label="The NEW Label" tooltip="The NEW Tooltip" />
    </C>
  </Desktop>
</Rootelement> 
```

我想获取路径`Rootelement/Desktop/C/El3`中的元素，并将较大文档中相同路径的元素替换为较小文档中的元素，因此大文档变为：

```
<Rootelement>
  <Desktop>
    <A>
      <El1 label="original blah" />
    </A>
  </Desktop>
  <Desktop>
    <B>
      <El2 />
    </B>
  </Desktop>
  <Desktop>
    <C>
      <El3 label="The NEW Label" tooltip="The NEW Tooltip" />
    </C>
  </Desktop>
</Rootelement> 
```

对我来说最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:07:37.880

```
var xDocBig = XDocument.Parse(xmlBig);
var xDocSmall = XDocument.Parse(xmlSmall);

var eBig = xDocBig.XPathSelectElement("/Rootelement/Desktop/C");
var eSmall = xDocSmall.XPathSelectElement("/Rootelement/Desktop/C");

eBig.ReplaceWith(eSmall);

var newXml = xDocBig.ToString(); 
```

# html - 带有子菜单的简单菜单不起作用

> ID：12956458
> 
> 赞同：0
> 
> 时间：2012-10-18T13:59:23.043
> 
> 标签：html, css, html-lists

我正在尝试使用仅使用 HTML 和 CSS（无 javascript）的子菜单创建一个非常简单的菜单。现在我有这个代码：

```
<ul id="main_ul>
    <li id="hover_1">Item 1
    <ul id="submenu_1>
    <li>Subitem 1</li>
    <li>Subitem 2</li>
    </ul>
    </li>
    <li id="hover_2">Item 2
    <ul id="submenu_2>
    <li>Subitem 3</li>
    <li>Subitem 4</li>
    </ul>
    </li>
</ul> 
```

这是CSS：

```
#main_ul li
{
    display:inline;
}

#submenu_1
{
    visibility:hidden;
}

#submenu_2
{
    visibility:hidden;
}

#hover_1:hover #submenu_1
{
    visibility:visible;
}

#hover_2:hover #submenu_2
{
    visibility:visible;
} 
```

没有代码中的子菜单，该`display:inline;`属性可以正常工作，但是代码中的子菜单会中断。我希望普通菜单项目 1 和 2 位于同一行，即使那里有子菜单。我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:17:18.537

有了这个CSS，它就可以工作了

```
#main_ul li
{
    display:inline;
    position:relative;
}

#submenu_1, #submenu_2
{
    display:none;
    position:absolute;
    left:0;
    width:100px;
}

#hover_1:hover #submenu_1, #hover_2:hover #submenu_2
{
    display:block;
} 
```

# c++ - QSqlDatabase::addDatabase() 检查主机是否存在

> ID：12956466
> 
> 赞同：1
> 
> 时间：2012-10-18T13:59:40.640
> 
> 标签：c++, mysql, sqlite, qt4, ip-address

目前我正在开发一个使用 qt 框架从 mysql 服务器或 sqlite3 文件中读取特定数据库的 C++ 应用程序。我有显示数据的主 UI 和连接数据库的登录对话框。

对话框检查文件名是否有效和 sqlite3 数据库，现在我需要检查给定的 IP 地址，否则程序会被阻止。

是否可以检查网络中的 IP 地址是否存在，或者检查服务器是否可用？

# mysql - 为什么 SELECT 失败但表存在？

> ID：12956469
> 
> 赞同：0
> 
> 时间：2012-10-18T13:59:57.040
> 
> 标签：mysql, pdo

如果我创建一个新表，我无法使用 PDO 从中选择一些东西。MySQL Workbench 让我 SELECT 一些东西，旧表运行良好，但正如我所说，我不能从新表中选择一些东西，与旧的工作表具有完全相同的设置（例如 InnoDB、UTF-8）。

这是我日志中的一个示例错误消息：

```
[Thu Oct 18 12:34:56 2012] [error] [client 12.345.678.90] PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[42S02]: Base table or view not found: 1146 Table 'database.tablename' doesn't exist' in /var/www/project/file.php:928
Stack trace:
#0 /var/www/project/file.php(928): PDOStatement->execute(Array)
#1 /var/www/project/file.php(946): Interact->addSomething(Array)
#2 /var/www/project/index.php(22): Interact->handleAction(Array)
#3 {main}
thrown in /var/www/project/file.php on line 928, referer:
(12:34:56) user: http://user.domain.com/?longthingy=wakenmgwjakngpwjani 
```

有没有人有类似的经历或想法如何解决这个烂摊子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:07:17.880

太笨了，无法识别我用 mysql-administrator 连接到我们的旧服务器。

# mysql - MySQL中具有字段连接的多个表的完全外连接

> ID：12956470
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:59:58.363
> 
> 标签：mysql, sql, join, concatenation

我有四张桌子：`acting`, `writing`, `film`,`tech`

```
email         | skill
-----------------------
foo@bar.com   | acting
foo1@bar.com  | acting
foo2@bar.com  | acting
...           | ...

email         | skill
-----------------------
foo@bar.com   | writing
foo7@bar.com  | writing
foo8@bar.com  | writing
...           | ...

email         | skill
-----------------------
foo4@bar.com  | film
foo9@bar.com  | film
foo12@bar.com | film
...           | ...

email         | skill
-----------------------
foo3@bar.com  | tech
foo4@bar.com  | tech
foo7@bar.com  | tech
...           | ... 
```

我想创建一个新表`skills`，以便包含每个电子邮件地址，并且将与每个地址相关的技能连接到技能字段中。

```
email         | skill
-----------------------
foo@bar.com   | acting, writing
foo1@bar.com  | writing, film
foo2@bar.com  | acting, film, tech
...           | ... 
```

我已经通过联合进行了完整的外部连接，但我似乎无法正确处理。

更新：我意识到这些表的设计有多糟糕。我正在使用上述表格从 frankenstein 旧 CRM 迁移数据，我需要在新表中用逗号分隔值，以便将它们导入新的 CRM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:02:53.570

```
SELECT email, GROUP_CONCAT(skill ORDER BY skill) skill
FROM
(
    SELECT email, skill FROM acting
    UNION
    SELECT email, skill FROM writing
    UNION
    SELECT email, skill FROM film
    UNION
    SELECT email, skill FROM tech
) x
GROUP BY email 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/acc09/3)

# android - 如何在 Android 中访问未读短信？

> ID：12956472
> 
> 赞同：0
> 
> 时间：2012-10-18T14:00:03.370
> 
> 标签：android, email, sms, jakarta-mail, android-contentresolver

我可以从这里读取 Android 中的短信：-

```
 phonesms = new ArrayList<String>();    
        ContentResolver cr = getContentResolver();                                                                  
    Uri uriSMSURI = Uri.parse("content://sms/inbox");
Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
    startManagingCursor(cur);
    if (cur.moveToFirst()) {
        for (int i = 0; i < cur.getCount(); i++) {
            try {
 String smsbody = cur.getString(cur.getColumnIndexOrThrow("body")).toString();
 phonesms.add(smsbody);

            } catch (Exception e) {

            } 
```

现在**的问题是我想**在一段时间内通过电子邮件自动访问未读短信并发送未读短信。

我可以通过两种方法通过电子邮件发送短信：- 1\. 通过 Intent 2.Java Mail Api

但是**如何在固定时间段内通过电子邮件自动发送未读短信。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:05:31.160

获取未读短信：

```
Cursor cur = getContentResolver().query(uriSMSURI, null, "read = 0", null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:18:11.910

您可以使用 cur.getString(cur.getColumnIndexOrThrow("status") 来确定它是否已读。或者您可以将它们包含在查询本身中以仅过滤掉未读的消息。

```
 while (cur.moveToNext()) {
               String address = cur.getString(cur.getColumnIndex("address"));
               String body = cur.getString(cur.getColumnIndexOrThrow("body"));
        int status = cur.getString(cur.getColumnIndexOrThrow("status"));
        if(status == SmsManager.STATUS_ON_ICC_UNREAD ) {
        //do whatever you want
        }

          } 
```

# c - 将文本文件读入 C 中的数据结构

> ID：12956477
> 
> 赞同：2
> 
> 时间：2012-10-18T14:00:35.760
> 
> 标签：c, data-structures, file-io

> **可能重复：**
> [C，从文件读入结构](https://stackoverflow.com/questions/11280523/c-reading-from-file-into-structure)

我需要阅读一个大文本文件，然后为邮件列表填充数据结构。

数据结构如下：

```
typedef struct mentry {
    char *surname;
    int house_number;
    char *postcode;
    char *full_address;
} MEntry; 
```

文本文件格式为：

```
Bloggs, Joe  
1 Street Name, City  
M53 3JK  
Surname, Firstname  
University of Nowhere, City  
G44 3GB 
```

等等

我的数据结构构造函数：

```
/* me_get returns the next file entry, or NULL if end of file*/
MEntry *me_get(FILE *fd); 
```

它返回一个指向包含邮件列表条目的 MEntry 结构的指针。

到目前为止，我只设法逐行读取文件。

```
#define MAXLINE 1024

int main(){
    char line[MAXLINE];
    FILE *fp = fopen("S.txt","r");

    while(fgets(line,MAXLINE,fp))
        {
        printf("%s %d",line,linecount);
    }

    fclose(fp);
    return 0;
} 
```

我目前的主要问题是我不知道如何分割我的行以便我可以正确地填充我的数据结构。我想知道使用 fgetc 一次读取一个字符是否比读取整行然后尝试拆分它更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:54:26.943

可能你应该使用**strtok**

```
#include <stdio.h>
#include <string.h>

int main ()
{
    char str[] ="Elizarraras, Salvador, UG";
    char *token = NULL;
    int n_tokens = 0;

    printf ("Get tokens from string \"%s\"\n",str);
    printf("%s\n", "*********************************************");

   // Split the string into tokens delimited by spaces and commas
   token = strtok (str," ,");
   while (token != NULL)
   {
       printf("%s\n", token);
       // Different call
       token = strtok (NULL, " ,");
       n_tokens++;
   }

  return 0;
} 
```

**输出：**

```
Get tokens from string "Elizarraras, Salvador, UG"

*********************************************
Elizarraras

Salvador

UG 
```

有一篇关于这个主题的有趣文章，[Finding Tokens in a String](http://www.gnu.org/software/libc/manual/html_node/Finding-Tokens-in-a-String.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:54:04.873

在您的示例中，第二个地址没有任何`house_number`.

这意味着您不能依赖数据格式来盲目地读取文件。

你别无选择，只能读取数据然后解析它。

如果地址在指定之前有 2 行文本，则可能会发生其他问题`postcode`。

你是唯一知道你的输入文件有多可靠的人，因此必须应用什么规则来解析它而不会出错。

关于该方法，我将逐行读取文件并通过解析每一行文本来即时解释它，直到`postcode`找到每条记录（因为这似乎是您的记录结束标记）。

解析意味着在`line[]`阅读时查看字符并对数据进行分类（即：逗号是名字/姓氏的分隔符，街道号码是数字，邮政编码遵循某种格式等）。

这将需要一些工作，但这是可行的。根据口味，您知道我不会冒险涉足 RegEx 领域（而 C 有一个专用的运行时库）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:40:03.597

我会这样做：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

// It is easyer for the memory allocator to have all in the struct
// It is a bit more wasteful on memory though if you set those too large
#define MAX_SURNAME_LENGTH 32
#define MAX_POSTCODE_LENGTH 32
#define MAX_FULL_ADDRESS_LENGTH (256 - MAX_SURNAME_LENGTH - MAX_POSTCODE_LENGTH - sizeof(int))

typedef struct mentry {
    char surname[MAX_SURNAME_LENGTH];
    char postcode[MAX_POSTCODE_LENGTH];
    int house_number;
    char full_address[MAX_FULL_ADDRESS_LENGTH];
} MEntry;

MEntry *me_get(FILE *fp) {
    MEntry *mentry = calloc(sizeof(MEntry), 1);

    // get name
    char * name = fgets(mentry->surname, sizeof(mentry->surname), fp);
    if (!name) { //failure
        free(mentry);
        return NULL;
    }

    char * comma = strchr(name, ','); // find the first comma appearance
    if (comma) *comma = '\0'; // If name has a comma in it, terminate the string there

    char * address = fgets(mentry->full_address, sizeof(mentry->full_address), fp);
    if (!address) { //failure
        free(mentry);
        return NULL;
    }

    char * restaddress;
    int housenumber = strtol(address, &restaddress, 10);

    if (restaddress != address) // there was a valid number at the start of address
        mentry->house_number = housenumber;

    char * postcode = fgets(mentry->postcode, sizeof(mentry->postcode), fp);
    if (!postcode) { //failure
        free(mentry);
        return NULL;
    }

    return mentry;
}

int main() {
    FILE *fp = fopen("S.txt","r");

    MEntry *mentry;
    while ((mentry = me_get(fp))) {
        // do something useful with mentry
    }

    fclose(fp);
    return 0;
} 
```

# liferay - 如何使用 liferay 6.1.1 远程发布博客 portlet 条目，而在实时应用程序上没有状态 DRAFT？

> ID：12956482
> 
> 赞同：0
> 
> 时间：2012-10-18T14:00:47.837
> 
> 标签：liferay, blogs, liferay-6

我已经使用 liferay 6.1.1 设置了 2 台机器，并且正在尝试远程发布博客 portlet 条目。我在控制面板 -> 站点设置 -> 高级中所做的设置是正确的，因为我设法将条目发布到我认为是“实时实例”的机器上，但它最终处于草稿状态。

如何执行远程发布以使博客条目保持“已发布”状态，因为它位于我正在发布的机器上（而不是处于草稿状态）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:41:09.287

这不是生命线问题。我发现登台和实时应用程序的服务器日期不同步。一旦我为两台服务器设置了相同的日期，一切都会完美运行。

# katta - 分布式集群上的 Katta 安装

> ID：12956485
> 
> 赞同：0
> 
> 时间：2012-10-18T14:00:55.010
> 
> 标签：katta

有人知道如何在分布式 hadoop 集群上安装 katta 吗？我正在尝试设置它，但它无法识别我配置的任何节点。

这是日志的摘录

`2012-10-18 18:53:32,673 INFO net.sf.katta.protocol.upgrade.UpgradeRegistry:52 - version of distribution 0.6.4 2012-10-18 18:53:32,673 INFO net.sf.katta.protocol.upgrade.UpgradeRegistry:53 - version of cluster 0.6.4 2012-10-18 18:53:32,679 INFO net.sf.katta.master.Master:118 - datanode2_bf6a0029-b1dd-4462-85a7-64ddfc89988d became master with 1 waiting master operations 2012-10-18 18:53:32,680 INFO net.sf.katta.master.Master:161 - start managing nodes... 2012-10-18 18:53:32,701 INFO net.sf.katta.master.Master:189 - found following nodes connected: [] 2012-10-18 18:53:32,703 INFO net.sf.katta.master.OperatorThread:68 - starting... 2012-10-18 18:53:32,705 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms. 2012-10-18 18:53:37,706 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms. 2012-10-18 18:53:42,707 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms. 2012-10-18 18:53:47,709 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms. 2012-10-18 18:53:52,710 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms. 2012-10-18 18:53:57,712 INFO net.sf.katta.master.OperatorThread:150 - SAFE MODE: No nodes available or state unstable within the last 20000 ms.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:09:42.590

看看[http://katta.sourceforge.net/documentation/install-and-configure-katta](http://katta.sourceforge.net/documentation/install-and-configure-katta) Esp。重要的是 conf/masters、conf/nodes 和 zookeeper 设置！

HTH约翰内斯

# linux - GDB 不会在一个文件之外介入函数

> ID：12956486
> 
> 赞同：0
> 
> 时间：2012-10-18T14:00:56.070
> 
> 标签：linux, debugging, gdb

我尝试使用`gdb`和`step`功能调试我的程序。只要函数在同一个文件中，一切都可以正常工作。

但是如果函数在外面，gdb 会跳过它。

我该如何解决？

笔记：

*   `-ggdb`我用选项编译
*   我正在使用`GNU gdb Red Hat Linux (6.7-1rh)`
    （如果可能，出现在 gdb 的 startfrequence 中）

例子：

```
#include "foo2.h"  // contains function foo2

void foo(void){ printf("hello"); }

void main (void){

  foo();    // debuggable -> jump into possible
  foo2();   // not debuggable 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:25:11.843

使用 gdb 调试应用程序时，请使用 si (stepi) 而不是 ni (nexti)。si 将进入其他函数，ni 停留在当前函数内。查看[http://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html#Continuing-and-Stepping](http://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html#Continuing-and-Stepping)的文档了解更多信息（^F 表示 nexti 或 stepi）。

# hadoop - Hadoop：NoSuchMethodException

> ID：12956488
> 
> 赞同：3
> 
> 时间：2012-10-18T14:00:57.863
> 
> 标签：hadoop

这是一项工作，它连接了两个关系，

```
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.*;
import org.apache.hadoop.contrib.utils.join.*;
import java.io.*;

public class TwoByTwo extends Configured implements Tool
{
    public static class MapClass extends DataJoinMapperBase
    {
        protected Text generateInputTag( String inputFile)
        {
            String datasource = inputFile.split( "\\.")[ 0];
            return new Text( datasource);
        }//end generateInputTag

        protected Text generateGroupKey( TaggedMapOutput aRecord)
        {
            String line =  ( ( Text) aRecord.getData()).toString();
            //between two relations there may be more than one common attributes
            //so group key has to include all these common attributes. Common
            //attributes begin with an '_'( underscore).
            String[] tokens = line.split(",");
            String groupKey = "";
            for( String s : tokens)
            {
                if( s.charAt( 0) == '_')
                {
                    groupKey = groupKey + s;
                }
            }
            return new Text( groupKey);
        }//end generateGroupKey

        protected TaggedMapOutput generateTaggedMapOutput( Object value)
        {
            TaggedWritable retv = new TaggedWritable( ( Text) value);
            retv.setTag( this.inputTag);
            return retv;
        }//end TaggedMapOutput
    }//end MapClass

    public static class Reduce extends DataJoinReducerBase
    {
        protected TaggedMapOutput combine( Object[] tags, Object[] values)
        {
            if( tags.length < 2)
            {
                return null;
            }
            String joinedStr = "";
            for( int i = 0; i < values.length; i++)
            {
                if( i > 0)
                {
                    joinedStr += ",";
                }
                TaggedWritable tw = ( TaggedWritable) values[ i];
                String line = ( ( Text) tw.getData()).toString();
                String[] tokens = line.split( ",", 2);
                joinedStr += tokens[ 1];
            }
            TaggedWritable retv = new TaggedWritable( new Text( joinedStr));
            retv.setTag( ( Text) tags[ 0]);
            return retv;
        }//end TaggedMapOutput
    }//end Reduce

    public static class TaggedWritable extends TaggedMapOutput
    {
        private Writable data;

        public TaggedWritable( Writable data)
        {
            this.tag = new Text( "");
            this.data = data;
        }//end TaggedWritable

        public Writable getData()
        {
            return data;
        }//end getData

        public void write( DataOutput out) throws IOException
        {
            this.tag.write( out);
            this.data.write( out);
        }//end write

        public void readFields( DataInput in) throws IOException
        {
            this.tag.readFields( in);
            this.data.readFields( in);      
        }//end readFields
    }//end TaggedWritable

    public int run( String[] args) throws Exception
    {
        Configuration conf = getConf();

        JobConf job = new JobConf( conf, TwoByTwo.class);

        Path in  = new Path( "relations/");
        Path out = new Path( "relout/");
        FileInputFormat.setInputPaths( job, in);
        FileOutputFormat.setOutputPath( job, out);

        job.setJobName( "TwoByTwo");
        job.setMapperClass( MapClass.class);
        job.setReducerClass( Reduce.class);

        job.setInputFormat( TextInputFormat.class);
        job.setOutputFormat( TextOutputFormat.class);
        job.setOutputKeyClass( Text.class);
        job.setOutputValueClass( TaggedWritable.class);
        job.set("mapred.textoutputformat.separator", ",");

        JobClient.runJob( job);
        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        int res = ToolRunner.run( new Configuration(), new TwoByTwo(), args);

        System.exit( res);
    }//end main
} 
```

当我运行这项工作时，

```
bin/hadoop jar /home/hduser/TwoByTwo.jar TwoByTwo -libjars /usr/local/hadoop/contrib/datajoin/hadoop-datajoin-1.0.3.jar 
```

MapClass 运行正常。当Reduce在运行一段时间后运行时，我得到这个NoSuchMethodException

```
12/10/18 16:38:17 INFO mapred.JobClient:  map 100% reduce 27%
12/10/18 16:38:19 INFO mapred.JobClient: Task Id : attempt_201210181416_0013_r_000000_0, Status : FAILED
java.lang.RuntimeException: java.lang.NoSuchMethodException: TwoByTwo$TaggedWritable.<init>()
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
    at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:62)
    at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:40)
    at org.apache.hadoop.mapred.Task$ValuesIterator.readNextValue(Task.java:1271)
    at org.apache.hadoop.mapred.Task$ValuesIterator.next(Task.java:1211)
    at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.moveToNext(ReduceTask.java:249)
    at org.apache.hadoop.mapred.ReduceTask$ReduceValuesIterator.next(ReduceTask.java:245)
    at org.apache.hadoop.contrib.utils.join.DataJoinReducerBase.regroup(DataJoinReducerBase.java:106)
    at org.apache.hadoop.contrib.utils.join.DataJoinReducerBase.reduce(DataJoinReducerBase.java:129)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:519)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.NoSuchMethodException: TwoByTwo$TaggedWritable.<init>()
    at java.lang.Class.getConstructor0(Class.java:2721)
    at java.lang.Class.getDeclaredConstructor(Class.java:2002)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:109)
    ... 15 more 
```

我对嵌套类 TaggedWritable 有疑问。为什么我在reduce端而不是map端对这个类有问题？如何解决此错误？两个关系的约束对误差起什么作用？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:27:02.920

类`TaggedWritable`没有空的构造函数，因此在应该读取序列化数据的减少阶段，应用程序会失败，因为无法`TaggedWritable`通过反射创建类型化的键。您应该添加一个空的构造函数。

您的映射阶段成功完成，因为在映射阶段您的映射器`TaggedWritable`自己创建了类型化的键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:38:52.183

此代码解决了问题并给出了预期的结果。就是从[这里](https://stackoverflow.com/questions/10201500/hadoop-reduce-side-join-using-datajoin)，

```
public static class TaggedWritable extends TaggedMapOutput
{
    private Writable data;

    public TaggedWritable()
    {
        this.tag = new Text();
    }//end empty( taking no parameters) constructor TaggedWritable

    public TaggedWritable( Writable data)
    {
        this.tag = new Text( "");
        this.data = data;
    }//end constructor TaggedWritable

    public Writable getData()
    {
        return data;
    }//end getData

    public void setData( Writable data)
    {
        this.data = data;
    }//end setData

    public void write( DataOutput out) throws IOException
    {
        this.tag.write( out);
        out.writeUTF( this.data.getClass().getName());
        this.data.write( out);
    }//end write

    public void readFields( DataInput in) throws IOException
    {
        this.tag.readFields( in);
        String dataClz = in.readUTF();
        try
        {
            //try - catch is needed because the " error: unreported exception
            //ClassNotFoundException; must be caught or declared to be thrown"
            //is "raised" from compiler
            if( this.data == null || !this.data.getClass().getName().equals( dataClz))
            {
                //this line of code "raises" the compile error mentioned above
                this.data = (Writable) ReflectionUtils.newInstance( Class.forName( dataClz), null);
            }
            this.data.readFields( in);
        }
        catch( ClassNotFoundException cnfe)
        {
            System.out.println( "Problem in TaggedWritable class, method readFields.");
        }
    }//end readFields
}//end TaggedWritable 
```

正如 rystsov 上面所说，需要一个空（不带参数）构造函数。这解决了问题，

```
NoSuchMethodException. 
```

然后发生另一个错误，

```
NullPointerException, 
```

在 readFields 中，在行

```
this.data.readFields( in); 
```

这解决了，用上面的方式编写 readFields，其中 null 值被正确处理。

# wxwidgets - 避免使用 wxFormBuilder 调整窗口大小

> ID：12956490
> 
> 赞同：0
> 
> 时间：2012-10-18T14:00:58.877
> 
> 标签：wxwidgets, wxformbuilder

在 Windows 7 下使用 wxFormBuilder，有没有办法将我的主 wxFrame 设置为固定大小以避免调整大小？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:26:28.533

我不知道如何专门用 wxFB 来做，但你需要`wxRESIZE_BORDER`从你的框架中删除样式。由于默认情况下使用它，您可能需要明确指定要使用的标志，例如`wxDEFAULT_FRAME_STYLE & ~(wxRESIZE_BORDER | wxMAXIMIZE_BOX)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T06:02:47.333

是的，您可以通过简单地在 size 属性中指定框架大小并在最大值和最小值中提供相同的框架大小来避免 wxFormBuilder 中的 wxFrame 调整大小，这将阻止窗口调整大小。

# svn - 你可以移动 svn 路径并让历史“跟随”移动吗？

> ID：12956494
> 
> 赞同：5
> 
> 时间：2012-10-18T14:01:24.733
> 
> 标签：svn

我认为这可能是 SVN 故意不允许的，但我无法从搜索中得到明确的答案。

我想知道是否可以将 SVN 存储库中的路径移动到新位置，并以这样一种方式移动历史记录，即存储库的行为就像内容一直存在于这个新位置一样。svn rename/mv 的行为是将内容移动到当前和未来修订的新路径，但以前的修订仍然指向旧位置。

如前所述，我可以看到这从本质上破坏了存储库历史的有效性（并且需要重写以前的修订版），但它似乎也可能是其他用户一直在寻找的东西，因此可能是可能的。如果我理解正确，这可以通过 rebase 在 git 中实现。

更新：

看来，如果我使用 svnadmin dump 转储 repo 内容并使用 svndumpfilter 过滤到两个单独的转储中，然后将这些转储加载到不同的位置，则新位置仍将包含旧存储库路径中附加的任何前导路径。为了说明，如果我的仓库“/trunk/PathA”中有一条路径，并且我想将它移动到“/trunk/PathB”，并且我按照[此处](https://stackoverflow.com/a/11598608/761095)找到的方法进行移动，它看起来会进入“/主干/PathB/主干/PathA”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:09:36.250

您可以在加载之前编辑转储文件以更改路径。这是一个执行此操作的 perl 脚本。[SVN-DumpReloc](http://search.cpan.org/~salva/SVN-DumpReloc-0.02/bin/svn-dump-reloc)

# api - YouTube API - 用户帐户已关闭

> ID：12956495
> 
> 赞同：2
> 
> 时间：2012-10-18T14:01:41.187
> 
> 标签：api, youtube, channels

我想问一下为什么以下频道不能通过 API 使用。

[http://www.youtube.com/visalus](http://www.youtube.com/visalus)
[http://www.youtube.com/user/visalus](http://www.youtube.com/user/visalus)

[http://www.youtube.com/etisalat](http://www.youtube.com/etisalat)
[http://www.youtube.com/user/etisalat](http://www.youtube.com/user/etisalat)

频道（Visalus、Etisalat）上部可在 2 个不同的网址上使用。但是，当我尝试在 API 上提出以下请求时：

```
http://gdata.youtube.com/feeds/mobile/users/visalus?alt=json&v=2 
```

它以以下错误结束：

```
<?xml version="1.0" encoding="UTF-8"?>
<errors xmlns="http://schemas.google.com/g/2005">
  <error>
    <domain>GData</domain>
    <code>ServiceForbiddenException</code>
    <internalReason>User account closed</internalReason>
  </error>
</errors> 
```

我的问题是为什么会出现这个错误？这些频道显然存在，并且有视频。还是我在问糟糕的 API 端点？

感谢您的任何帮助

R。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:04:27.457

当我访问这些 YouTube 网址时，他们在我的浏览器中给了我同样的错误“用户帐户已关闭”。你确定这些是活动帐户，因为我找不到它们吗？因为我认为这就是您无法获取信息的问题..

**编辑：**以下帐户确实存在：

[http://gdata.youtube.com/feeds/mobile/users/visalusvideo?alt=json&v=2](http://gdata.youtube.com/feeds/mobile/users/visalusvideo?alt=json&v=2)

# freebase - 来自 Freebase 的 Google-Refine/add 列：约束似乎不起作用

> ID：12956498
> 
> 赞同：1
> 
> 时间：2012-10-18T14:01:47.943
> 
> 标签：freebase, openrefine

我有一列与 Freebase 调和的城镇。现在我想从 Freebase 创建一个包含人口的新列。我在约束中添加了“人口»数字”列

{"year>":"2006", "year<":"2012", "sort":"-year", "limit":1 }

为了获得最新的号码（见[http://code.google.com/p/google-refine/issues/detail?id=92#c5](http://code.google.com/p/google-refine/issues/detail?id=92#c5)）。取而代之的是，我得到了 10 个数字，就好像没有考虑约束一样。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:30:50.333

Google Refine 现在更名为 OpenRefine，问题跟踪器已移至 Github。

约束不适用于嵌套属性。如果您将操作一分为二，首先添加一个`Population`带有约束的列，然后处理该新列，添加一个`number`列，您将能够获得所需的数据。

这是新问题跟踪器（yippee！）中报告的第一个错误，请参阅它以获取更多详细信息：[https ://github.com/OpenRefine/OpenRefine/issues/631](https://github.com/OpenRefine/OpenRefine/issues/631)

# windows - Inno Setup 似乎没有写入 64 位机器上的注册表

> ID：12956499
> 
> 赞同：9
> 
> 时间：2012-10-18T14:01:50.547
> 
> 标签：windows, registry, installation, inno-setup

我有一个非常简单的 Inno Setup 脚本，其中包含此`[Registry]`部分：

```
[Registry]
Root: HKLM; Subkey: SOFTWARE; Flags: createvalueifdoesntexist; ValueType: string; ValueName: ABC; ValueData: abc 
```

但是，当我检查`HKLM\SOFTWARE`子项时，没有任何附加值。

我在和 Pascal 脚本下尝试了不同的子键`HKLM\SOFTWARE`，但 Inno Setup 只是拒绝创建新的子键或值。

我正在运行 64 位 Windows 7，UAC 已关闭。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T15:40:13.180

终于解决了。

Inno Setup 在 64 位机器上以 32 位运行，因此 HKLM 对应于 HKLM\Wow6432Node。

在这种情况下，我需要添加对 IsWin64 的检查并使用 HKLM64。我认为语法应该是：

`Root: HKLM64; ... <Subkey, Flags, etc.> ... Check: IsWin64`

# jquery - 如何传递数据和数据字符串？

> ID：12956501
> 
> 赞同：1
> 
> 时间：2012-10-18T14:01:58.857
> 
> 标签：jquery

如何使用 datastring 传递变量similar_id？分开。

```
var id=$(this).attr("id");       
var name=$(this).attr("name");       
var similar_id=$(this).attr("similar_id");    
var dataString = 'id='+ id + '&name='+ name;

$.ajax
({
type: "POST",
url: "conf.php",
data: dataString,         <---
cache: false,
success: function(html)
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:03:11.607

只需使用数据*对象*而不是字符串。

这将有助于克服传递和编码参数的许多问题。

```
$.ajax({
    type: "POST",
    url: "conf.php",
    data: {
        id: id,
        name: name,
        similar_id: similar_id
    },
    cache: false,
    ...
}); 
```

# java - Java合并arraylist很慢

> ID：12956503
> 
> 赞同：0
> 
> 时间：2012-10-18T14:02:12.230
> 
> 标签：java, performance, arraylist

所以我有一个在 2PC 上启动的应用程序。每个实例在服务器模式下启动一个 HSQLDB。

我试图获得不同产品的销售。

所以我查询本地数据库并用产品名称和销售数量填充一个数组列表。

然后我在另一台 PC 上的另一个数据库上执行相同的查询。

对于 1 个产品，我有两行（每行对应一个数据库）。在这里，结果是错误的，但执行时间还可以。

为了解决这个问题，我做了以下事情：

```
ResultSet rs2 = state2.executeQuery(produitsQuery);
while (rs2.next()) {
   for (int i = 0; i < produits.size(); i++) {
       obj = ((Object[]) produits.get(i));
       idpdt = (Integer) obj[1];

       if (idpdt == rs2.getInt(1)) {
           nb = (Integer) obj[3];
           valo = (Double) obj[4];

           nb += rs2.getDouble(4);
           valo += rs2.getDouble(5);
           produits.set(i, new Object[]{
               rs2.getString("famille"),
               rs2.getInt("id_pdt"),
               rs2.getString("nom_pdt"),
               nb,
               valo,
               s2.getString("sous_famille")});
           k = 1;
       }
    }
    if (k == 0) 
        produits.add(new Object[]{
            rs2.getString("famille"),
            rs2.getInt("id_pdt"),
            rs2.getString("nom_pdt"),
            rs2.getInt("nb"),
            rs2.getDouble("valo"),
            rs2.getString("sous_famille")});

} 
```

结果是完美的，但执行时间非常慢，这是一个问题。我认为这是因为我在结果集的每一行循环了整个数组列表。

我可以使用哪些其他解决方案来缩短执行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:05:15.240

为什么不将您的第一个结果集放入一个`HashMap`, 键上`idpdt`（因为这是您索引的内容）？HashMap 将提供 O(1) 查找，而不是 O(n)。

您的代码如下所示：

```
while (r2.next()) {
   Object[] result = map.get(rs2.getInt(1));
   if (result != null) {
      ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:07:29.487

而是将数据放在一个集合中，关闭产品（或产品 ID）。然后，您从一种产品到另一种产品的查找将是 o(1)，基本上只花费一个周期。如果需要对数据进行排序，您可以在运行结束时对生成的合并集进行排序，方法是将集合放入 List 并在其上使用 Collections.sort()。我认为这将大大改善两个结果集的合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:08:30.630

如果您确定每个产品都将在两个数据库中，那么您可以`ORDER BY product_id`在查询中添加一个，然后同时遍历两个结果集：

```
while (rs1.next() &&rs2.next()) {

// your code here. No need to loop again.
// .............. 
} 
```

# jquery - dialogClass 未应用给定的样式类

> ID：12956504
> 
> 赞同：1
> 
> 时间：2012-10-18T14:02:16.770
> 
> 标签：jquery, css

`Jquery Dialog`我在我的 xhtml 页面中使用了 2 个框。有 2 个链接，当用户点击这些链接时，每个链接都会呈现一个不同的`Dialog`框。不同`Dialog`的盒子在感觉观感上是不同的。由于两者都引用 jquery-ui-rev.css 在该文件中所做的任何 CSS 更改`.css`，因此它将应用于两个`Dialog`框。

![附上来自 Chrome 网络开发人员的图片以供参考](../Images/4ca266cb8e1cb31c83067268e8fc542e.png)

所以，我尝试使用`dialogClass`. 我申请`dialogClass`了其中一个`Dialog`盒子，而另一个则保持原样。

我想出了下面的代码并部署了它。

```
$j("#dialog").dialog({
    dialogClass: 'ui-dialog',
      ....

<head>
<style type="text/css">
 .ui-dialog
{
padding: none;
overflow: hidden;
position: absolute;
width: 100px;
left: 100px;
top: 100px;
}
</style>
</head> 
```

但是，`ui-dialog`我在这里写的类并没有覆盖标准`ui-dialog`类`jquery-ui-rev.css`。然后，我也尝试为`ui-dialog`. 即，我重命名`ui-dialog`为`my-dialog`. 即使那样`my-dialog`也没有申请`Dialog`盒子。它仍然来自标准的 CSS 类`ui-dialog`。

然后，我也尝试了下面的代码

```
$j("#dialog").addClass('my-dialog').dialog({ 
```

这也不能覆盖标准`ui-dialog`类。

PS 注意：我已重命名`jquery-ui-rev.css`为`jquery-ui-curretpacks.css`. `jquery-ui-currentpacks.css`包含的确切内容`jquery-ui-rev.css`

**@Dipaks**我已经尝试过您提到的解决方案。代码如下，

```
$('.ui-dialog').addClass('new-ui-dialog');
$j("#dialog").dialog({
    dialogClass: 'new-ui-dialog',
.... 
```

但是，正如我在新图像中所附的那样，可以看出虽然 ui-dialog 正在被 new-ui-dialog 取代，但 css 属性仍然取自 ui-dialog。

我也尝试了没有 dialogClass，如下所示，$j("#dialog").dialog({ .....

```
<style type="text/css">
.new-ui-dialog
{
 //my new css
}
</style> 
```

![在此处输入图像描述](../Images/52efac638eca15d1018d5ac5809c9d11.png)

我在这里附上第三张图片。在这个 SS 中，new-ui-dialog 属性仍然被覆盖。![图3](../Images/2ae1bbb74deff47cfbb151aa550a218e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:07:53.037

`.ui-dialog`正在为元素添加**内联**css。如果您想覆盖这些样式，请执行此操作 -

```
$('.ui-dialog').addClass('new-ui-dialog'); 
```

CSS -

```
.new-ui-dialog { color: red !important; } 
```

# c# - 检查列表框计数是否更改

> ID：12956505
> 
> 赞同：0
> 
> 时间：2012-10-18T14:02:22.060
> 
> 标签：c#, javascript, asp.net

我在 asp:wizard 中有两个列表框“在第 2 步中，在它之前和之后有一个步骤。通过使用一些代码，我将一些项目从第一个列表框带到第二个我想检查第二个的计数是否变了。我能做什么？

这是我的列表框代码

```
<asp:ListBox ID="registerCompCats" runat="server" CssClass="ListBox1"
  ClientIDMode="Static" DataTextField="value" DataValueField="key" Rows="5"  
  size="5" style="width:135px; size:5px;" SelectionMode="Multiple" ></asp:ListBox>

<img id="addCat" src="images/buttons/btn_addCat.jpg" title="Add Category"/>

<asp:ListBox ID="registerCompAcats" runat="server" CssClass="ListBox2"
  ClientIDMode="Static" DataTextField="value" DataValueField="key" Rows="5" 
  size="5" style="width:135px; size:5px; margin-top: 0px;" SelectionMode="Multiple"></asp:ListBox> 
```

此代码运行良好并移动项目，但完成向导后第二个列表框为空。我可以做什么？

**编辑**

这是将数据从 listbox1 获取到 listbox2 的 java 脚本代码

```
 $('#addCat').click(function () {
            $(".ListBox1 > option:selected").appendTo(".ListBox2");
            sortlist(".ListBox1 > option");
            sortlist(".ListBox2 > option");
            selectAll();
        }); 
```

这就是检查项目并将它们添加到另一个列表的代码

```
for (int i = 0; i < rc.CategoriesIDs.Count; i++)
        {
            var foundcat = registerCompCats.Items.FindByValue(rc.CategoriesIDs[i].ToString());
            if (foundcat != null)
            {
                registerCompAcats.Items.Add(foundcat);
                registerCompCats.Items.Remove(foundcat);
            }
        } 
```

如果您需要任何其他代码，我可以将其发布

# git-merge - 如何将 Meld 设置为 git mergetool

> ID：12956509
> 
> 赞同：109
> 
> 时间：2012-10-18T14:02:47.317
> 
> 标签：git-merge, meld

我已经设置：

```
git config --global merge.tool meld
git config --global mergetool.meld.path c:/Progra~2/meld/bin/ 
```

在“git mergetool”上它写道：

```
Hit return to start merge resolution tool (meld):
The merge tool meld is not available as 'c:/Progra~2/meld/bin/' 
```

我也试过：

*   /c/程序~2/meld/bin/
*   "/c/程序文件 (x86)/meld/bin/"
*   "c:/程序文件 (x86)/meld/bin/"

结果是一样的。

当我去 C:/Program files (x86)/meld/bin/ 并运行

```
python meld 
```

工具运行。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-18T14:57:45.687

You could use complete unix paths like:

```
PATH=$PATH:/c/python26
git config --global merge.tool meld
git config --global mergetool.meld.path /c/Program files (x86)/meld/bin/meld 
```

This is what is described in "[How to get meld working with git on Windows](http://blog.nerdbank.net/2011/10/how-to-get-meld-working-with-git-on.html)"

Or you can adopt the wrapper approach described in "[Use Meld with Git on Windows](http://lfont.blog.jit.su/use-meld-with-git-on-windows/)"

```
# set up Meld as the default gui diff tool
$ git config --global  diff.guitool meld

# set the path to Meld
$ git config --global mergetool.meld.path C:/meld-1.6.0/Bin/meld.sh 
```

With a script `meld.sh`:

```
#!/bin/env bash
C:/Python27/pythonw.exe C:/meld-1.6.0/bin/meld $@ 
```

* * *

[abergmeier](https://stackoverflow.com/users/725937/abergmeier) mentions [in the comments](https://stackoverflow.com/questions/12956509/how-to-set-meld-as-git-mergetool/12957641?noredirect=1#comment36610790_12957641):

> I had to do:

```
git config --global merge.tool meld
git config --global mergetool.meld.path /c/Program files (x86)/Meld/meld/meldc.exe 
```

> Note that meldc.exe was especially created to be invoked on Windows via console. Thus meld.exe will not work properly.

* * *

[CenterOrbit](https://stackoverflow.com/users/663058/centerorbit) mentions in [the comments](https://stackoverflow.com/questions/12956509/how-to-set-meld-as-git-mergetool/12957641#comment48946391_12957641) for Mac OS to install [homebrew](http://brew.sh/), and then:

```
brew cask install meld
git config --global merge.tool meld
git config --global  diff.guitool meld 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-15T07:40:50.480

这在 Windows 8.1 和 Windows 10 上对我有用。

```
git config --global mergetool.meld.path "/c/Program Files (x86)/meld/meld.exe" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-27T10:20:05.410

融合 3.14.0

```
[merge]
    tool = meld
[mergetool "meld"]
    path = C:/Program Files (x86)/Meld/Meld.exe
    cmd = \"C:/Program Files (x86)/Meld/Meld.exe\" --diff \"$BASE\" \"$LOCAL\" \"$REMOTE\" --output \"$MERGED\" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-01T19:08:16.280

我认为这`mergetool.meld.path`应该直接指向 meld 可执行文件。因此，您想要的命令是：

```
git config --global mergetool.meld.path c:/Progra~2/meld/bin/meld 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-24T05:15:18.937

这里没有其他答案对我有用，可能来自尝试所有这些答案的组合。我能够调整[这个公认的答案](https://stackoverflow.com/questions/4957630/how-do-you-merge-in-git-on-windows)来与 meld 一起工作。这现在适用于 git 1.9.4、meld 3.14.0 和 windows 8.1。

编辑 ~/.gitconfig 看起来像：

```
[diff]
    tool = meld
    guitool = meld
[mergetool "meld"]
    path = c:/Program Files (x86)/Meld/Meld.exe
[difftool "meld"]
    path = c:/Program Files (x86)/Meld/Meld.exe 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-05T11:13:47.177

安装它[http://meldmerge.org/](http://meldmerge.org/)后， 我不得不告诉 git 它在哪里：

```
git config --global merge.tool meld
git config --global diff.tool meld
git config --global mergetool.meld.path “C:\Program Files (x86)\Meld\meld.exe” 
```

这似乎奏效了。使用“git difftool”或“git mergetool”进行合并和比较</p>

如果有人在启动后遇到诸如 Meld 崩溃之类的问题（python 的问题指示），那么您需要将 Meld/lib 设置为您的系统环境变量，如下所示 `C:\Program Files (x86)\Meld\lib`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-10T19:10:44.133

为了让 meld 在 Windows 上为我工作，需要进行一些排列。这是我当前的 .gitconfig：

```
[merge]
    conflictstyle = diff3
    tool = meld
[mergetool "meld"]
    cmd = \"C:\\Program Files (x86)\\Meld\\Meld.exe\" --auto-merge \"$LOCAL\" \"$BASE\" \"$REMOTE\" --output \"$MERGED\" 
```

Linux：

```
[merge]
    conflictstyle = diff3
    tool = meld
[mergetool "meld"]
    cmd = meld --auto-merge $LOCAL $BASE $REMOTE --output=$MERGED --diff $BASE $LOCAL --diff $BASE $REMOTE 
```

我相信添加`conflictstyle = diff3`会更改内联文本以在输出文件中包含 BASE 内容，然后再融合到它，这可能会给它一个良好的开端。没有把握。

> 现在，由于我已经注意到 Meld 支持三向合并，因此还有另一种选择。当设置“diff3” git 冲突样式时，Meld 在显示 BASE 内容的行上打印“(??)”。[资源](https://lukas.zapletalovi.com/2012/09/three-way-git-merging-with-meld.html)

一些我非常喜欢的融合命令行功能：

*   `--auto-merge`在为您选择正确的东西方面做得很好（它不是防弹的，但我认为节省的时间值得任何风险）。

*   您可以在同一命令中添加额外的差异窗口。例如：

    `--diff $BASE $LOCAL --diff $BASE $REMOTE`

    将添加两个带有本地和传入补丁差异的选项卡。这些对于从 3 向视图中单独查看以查看每个分支中与基础的单独差异非常有用。不过，我无法在 Windows 上使用它。

*   某些版本的 meld 允许您使用`--label`. 在 git 将传递给 meld 的文件的名称修复为包括本地/基本/远程之前，这一点更为重要。

*   的顺序`--diff`会影响标签顺序。我在一些将附加差异放在首位的旧版本中遇到了麻烦，而主要的 3 路差异则更频繁地使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-21T05:00:43.270

git config --global merge.tool 融合 git config --global mergetool.meld.path c:/Progra~2/meld/Meld/

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-07T09:31:31.143

*对于**windows**，添加meld的路径如下：*

```
 git config --global mergetool.meld.path C:\\Meld_run\\Meld.exe 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-29T09:44:29.757

在 C:\Users\username 的 .gitconfig 文件中添加以下行，解决了我在 Windows 10 中的 3.20.3 问题。

```
[user]
    name = doe
    email = doe@john.com
[core]
longpaths = true
[diff]
    tool = meld
[difftool "meld"]
    path=C:/Program Files/Meld/Meld.exe
[difftool]
    prompt = false
[merge]
    tool = meld
[mergetool "meld"]
    path=C:/Program Files/Meld/Meld.exe
[mergetool]
    prompt = false
    KeepBackup = false 
```

# jquery - jQuery .on() 函数 - 高级选择器用作“选择器”参数？

> ID：12956513
> 
> 赞同：0
> 
> 时间：2012-10-18T14:02:52.797
> 
> 标签：jquery, button, iframe, selector, bind

我正在使用 [.on()](http://api.jquery.com/on/)函数在位于框架中的按钮上绑定事件。因为按钮可以在将来呈现，所以我使用以下语法：

```
$('#myIframe').contents().on('click','.myButton img[src="/myImage.gif"]',function(){

}); 
```

但是我遇到的一个大问题是我通过其类和源属性值选择按钮，如下所示：

```
$('.myButton img[src="/myImage.gif"]').parent() 
```

如何在 on.xml 中添加这个“parent()”部分。功能“选择器”参数？有可能吗？

请注意，我无法将框架的内容更改为将 id 添加到按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:05:01.487

这是不可能的`.parent()`，但是可以使用`:has()`

```
'.myButton:has(img[src="/myImage.gif"])' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:12:56.927

您可以使用 parent 作为选择器：

[http://api.jquery.com/parent-selector/](http://api.jquery.com/parent-selector/)

所以你的选择器是：

```
$('.myButton img[src="/myImage.gif"]:parent') 
```

# excel - F# Excel UsedRange 未定义

> ID：12956517
> 
> 赞同：0
> 
> 时间：2012-10-18T14:03:06.493
> 
> 标签：excel, f#, vsto, office-interop

错误：“未定义字段、构造函数或成员‘UsedRange’”。

代码摘录：

```
open Microsoft.Office.Interop.Excel
open Microsoft.Office.Tools.Excel // Onorio's excellent suggestion didn't fix code until this line was added.
// Once the above line was added, Onorio's suggestion worked,
// but now F# says "The field, constructor or member 'EntireColumn' is not defined".

let xl = ApplicationClass()
xl.Workbooks.OpenText(...
let wb = xl.Workbooks.Item(1)
let ws = wb.ActiveSheet :?> Worksheet // Per Onorio's suggestion.

ws.UsedRange.EntireColumn.AutoFit()
// "The field, constructor or member 'EntireColumn' is not defined".

// Here's another example of UsedRange now working,
// but Properties and Methods of UsedRange not working:
// (uniqueID is simply a Boolean set earlier based on ini file values)
if uniqueID then
   xl.Range("A1").EntireColumn.Insert() |> ignore
   xl.Range("A1").Value <- "UniqueID"
   xl.Range("A2").Value <- 1
   xl.Range("A2").AutoFill(xl.Range("A2:A" + ws.UsedRange.Rows.Count),
                           XlAutoFillType.xlFillSeries) |> ignore
// Here it's "The field, constructor or member 'Rows' is not defined". 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:48:36.127

尝试添加这个：

```
let wb = xl.Workbooks.Item(1)
let actSheet = wb.ActiveSheet :?> Worksheet  //downcast obj to Worksheet
actSheet.UsedRange.EntireColumn.AutoFit() 
```

`wb.ActiveSheet`返回一个“obj”，您需要将其向下转换为工作表，以便该`UsedRange`方法正确解析。

# android - 自定义视图终止我自己的工作线程

> ID：12956519
> 
> 赞同：0
> 
> 时间：2012-10-18T14:03:12.347
> 
> 标签：android, multithreading, view

我有自己的名为**TimerControl**的类，它扩展了**android.view.View**。在**TimerControl**中，我生成了一个应该继续工作的工作线程，因此当 View 所属的 Activity 仍然存在时。（即 onStop 尚未在父 Activity 上调用）我不想编写逻辑来杀死 Activity 类中的线程，因为我希望 View 像其他视图一样工作，您不必管理类似的东西从活动。*如何确定 View 的父 Activity 是否已销毁？*（来自自定义视图本身）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:05:24.230

您添加一个回调，通过它您将让您的视图知道父 Activity 已调用 onPause() 并且视图也应该进入“暂停”模式。

当活动收到 onResume() 回调时取消暂停。

# c# - 排序和连接两个不同类型的列表

> ID：12956523
> 
> 赞同：0
> 
> 时间：2012-10-18T14:03:34.803
> 
> 标签：c#, linq

我的数据库中有两个非常相似的表（tblCar 和 tblPlane）。它们具有相同的列，只有 tblCar 以 car_ 开头，而 tblPlane 以 pl_ 开头。即car_id、pl_id等。

我从表中获取行并将它们连接起来：

```
var cars = (from x in db.tblCar select x).ToList();
var planes = (from x in db.tblPlane select x).ToList();
var result = cars.Cast<object>().Concat(planes.Cast<object>()); 
```

它工作正常。

但是，两个表都有一个更新日期列：cat_update 和 pl_update。它的类型是 DateTime，我需要按此列对结果列表进行排序，最新的在前。

属性名称不同时如何排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:07:05.170

```
var orderedResult = cars.Cast<object>().Concat(planes.Cast<object>())
    .OrderBy(o => o is Car? ((Car)o).car_date : ((Plane)o).pl_date); 
```

但这不是很安全。如果您的表具有相同的列，为什么不能所有值都在同一列中，用一个位字段告诉您它是汽车还是飞机？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:19:04.153

您是否考虑过为 Car 和 Plane 创建一个父类型，比如可以强制转换为的 Vehicle 类？您的车辆类别中的一个字段将是 _date。所以代码看起来像这样：

```
var orderedResults = cars.Cast<Vehicle>().Concat(planes.Cast<Vehicle>())
       .OrderBy(v => v._date); 
```

通过这种方式，您可以保留编译时类型安全性并具有更合乎逻辑的类型层次结构，因为两个表中的所有列都是相同的，您应该没有任何困难将它们表示为车辆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:24:47.023

你可以这样做：

```
private class VehicleHolder
{
    public DateTime Date { get; set;}
    public object Vehicle { get;set; }
}

//...

var cars = (from x in db.tblCar 
            select new VehicleHolder() { Date = x.car_date, Vehicle = x }).ToList();
var planes = (from x in db.tblPlane 
              select new VehicleHolder() { Date = x.pl_date, Vehicle = x }).ToList();

var result = cars.Concat(planes).OrderBy(v => v.Date).Select(v => v.Vehicle); 
```

但我同意 Chris 的观点：共同的父类型会更干净。

# ruby-on-rails - 使用 Ruby 脚本修改 csv 文件

> ID：12956524
> 
> 赞同：0
> 
> 时间：2012-10-18T14:03:43.250
> 
> 标签：ruby-on-rails, csv, export-to-csv

我有一个转换为 .csv 的 .xlsx 文件。我需要编写一个脚本来修改这个文件（更改/重命名列等）如何打开这个 .csv 文件并从脚本中保存它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:33:33.473

据我所知，您不能对 CSV 文件进行内联修改。您将不得不通过另一个文件输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:28:41.623

打开 csv 文件，就像使用标准 File api 在 ruby​​ 中打开任何其他文件一样

```
csv_file = File.open('data.csv', 'r') 
```

手动解析它或使用 FasterCSV 之类的库。进行修改，写回文件并关闭。csv 文件本身并没有什么特别之处，使用它就像使用 ruby​​ 中的任何文件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:28:52.763

您应该可以使用 CSV 库（或在 ruby​​ 世界中使用 gem）。因此，安装 gem，您的代码将如下所示：

```
FasterCSV.foreach("path/to/file.csv") do |row|
  # use row here...
end 
```

[http://fastercsv.rubyforge.org/](http://fastercsv.rubyforge.org/)

# java - 用骆驼读取文件中的对象？

> ID：12956531
> 
> 赞同：1
> 
> 时间：2012-10-18T14:04:04.450
> 
> 标签：java, apache-camel, objectinputstream

我有一个**包含 java objects 的文件**，用以下代码编写：

```
 from(somewhere).process(new Processor() {

          @Override
          public void process(final Exchange exchange) {
              ...
              ByteArrayOutputStream bos = new ByteArrayOutputStream();
              ObjectOutput out = new ObjectOutputStream(bos);
              out.writeObject(myObject);
              exchange.getOut().setBody(bos.toByteArray());
          }
     }).to("file://pathFile"); 
```

现在，**我想快速阅读它们**。我不知道我该怎么做，就像我猜的下面的代码。

```
from("file://pathFile").convertBodyTo(String.class)

.split(body().tokenize("???")) // How can I tokenize my file ?

.streaming().threads(2)

.process(new Processor() {

      @Override
      public void process(final Exchange exchange) {
        String filePath = (String) exchange.getIn().getHeader(Exchange.FILE_PATH);
        File file = new File(filePath);
        MyObject myObject = null;
        try {
          FileInputStream fis = new FileInputStream(file);
          InputStream buffer = new BufferedInputStream(fis);
          ObjectInput input = new ObjectInputStream(buffer);

          Object obj = null;
          while ((obj = input.readObject()) != null) {
              // Do something
              myObject = obj;
          }

        } catch (Exception e) {
            ...
        } finally {
          ...
        }
        exchange.getIn().setBody(myObject);
      }
}).to(somewhere); 
```

**编辑：**我编辑我阅读对象的方式。该代码仍然存在问题，我们无法附加到 ObjectOutputStream。这将破坏流。这个问题有一个解决方案[here]。我们只能写一次流头。

但如果我这样做，我将无法使用多个线程拆分和读取我的文件。**那么我可以在 ObjectOutputStream 标头上拆分或访问我的文件吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:15:09.157

您只是使用 将其转换为 String `convertBodyTo(String.class)`，因此正文中有一个 String 而不是 InputStream ....

# sublimetext2 - 崇高文本中的正则表达式用于更改 [0-9]th

> ID：12956533
> 
> 赞同：0
> 
> 时间：2012-10-18T14:04:07.207
> 
> 标签：sublimetext2

在我的几个页面中，我想改变所有

```
43th 
12th 
```

在 UTF-8 代码中

```
43&th;
12&th; 
```

如何使用正则表达式在 sublime text 2 中做到这一点？

提前致谢

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:20:03.587

要查找元素，您可以使用如下正则表达式：

```
([0-9][0-9])th 
```

然后替换为：

```
$1&th; 
```

![在此处输入图像描述](../Images/d2b2e24f30c3ad94890d1aebf7bbe545.png)

# xml - xmllint 捕获错误代码

> ID：12956534
> 
> 赞同：1
> 
> 时间：2012-10-18T14:04:08.367
> 
> 标签：xml, linux, error-handling, xmllint

我正在使用`xmllint`Linux 命令（[xmllint 描述](http://xmlsoft.org/xmllint.html)），我想捕获错误代码以在脚本中使用它。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:06:27.383

你可以这样做：

```
if xmllint --xpath '/my/path' file.xml; then
    echo "success"
else
    echo >&2 "error"
    exit 1
fi 
```

**如果你没有`--xpath`switch**：

```
file=/path/to/file
xpath='/foo/bar'
result="$(echo "cat $xpath" | xmllint --shell "$file")"

if [ $(echo "$result" | wc -l) -gt 2 ]; then
    echo "success"
else
    echo >&2 "error"
    exit 1
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T09:59:22.383

或者，如果您有要验证 xml 文件的架构，您可以这样做： xmllint --noout --schema your_xsd_file your_xml_file 2>myxmlval.out

myxmlval.out 将是一个文件，用于捕获来自 xmllint 模式验证的错误

# c++ - windows中atoi和atol的区别

> ID：12956541
> 
> 赞同：1
> 
> 时间：2012-10-18T14:04:30.233
> 
> 标签：c++, visual-c++

我们向其提供源代码的一位客户说，通过将 int 更改为 long 并将 atoi 更改为 atol，他们会得到我们程序的不同结果。但据我了解，Windows 上的 int 和 long 具有相同的 4 字节大小和相同的最小/最大值。以同样的类比，我希望 atoi 和 atol 产生相同的输出，并且通过我们的测试，它们确实如此。

我不知道的那些命令有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:20:47.597

在非错误情况下，函数都定义为等价于

```
strtol(nptr, (char **)NULL, 10) 
```

唯一的区别是`atoi`将返回值转换为`int`.

在错误情况下（当字符串表示超出类型范围的值时）可能会有不同的行为，因为两者的行为都是未定义的。但我会感到惊讶。即使`atoi`和`atol`不是通过调用实现的`strtol`，它们也可能是由相同的代码或非常相似的代码实现的。

我个人会要求客户向我展示确切的代码。也许他们不只是替换`int`->`long`和`atoi`->`atol`他们声称。如果这就是他们所做的全部更改（但他们所做的与您进行测试时的假设略有不同），那么他们可能已经在您的代码中发现了错误的症状。

# android - Android中的Xml解析，Null异常

> ID：12956543
> 
> 赞同：0
> 
> 时间：2012-10-18T14:04:33.433
> 
> 标签：android, xpath, xml-parsing

我有一个这样的 xml

```
<Quiz>
<Inhalt Frage="test" number="1" />
<Inhalt Frage ="test2" number=2"/> 
</Quiz> 
```

现在，在android中我想以这种方式解析这个xml，结果显示数字2的“Frage”的内容。我试图以这种方式解析它，但我总是得到一个nullexception错误：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expr= xpath.compile("//Frage[@number=2]/text()");

Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
einga= nodes.item(0).getNodeName(); 
```

如果有人可以帮助我，那就太好了。谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:06:42.163

您正在尝试从节点 Frage 中选择属性编号为 2 的文本。您熟悉 Xpath 表达式吗？试试这个链接：[http ://w3schools.com/xpath/xpath_syntax.asp](http://w3schools.com/xpath/xpath_syntax.asp)

试试看：`"//Inhalt[@number='2']/@Frage"`。你会得到 test2

# php - XPath - 在特定标签后全选

> ID：12956546
> 
> 赞同：4
> 
> 时间：2012-10-18T14:04:43.773
> 
> 标签：php, xpath

我试图在一个标签之后将 HTML 放入字符串中`h1`，直到下一个`h1`标签，然后继续。

例如，这里是 HTML：

```
<h1>Heading</h1>
<p>Paragraph</p>
<ul>
  <li>List item</li>
  <li>List item</li>
</ul>
<p>Paragraph</p>
<h1>Heading 2</h1>
<ul>
  <li>List item</li>
  <li>List item</li>
</ul>
<p>Paragraph<img /></p> 
```

从这里我试图创建这个数组：

```
array(
  0 => '<p>Paragraph</p><ul><li>List item</li><li>List item</li></ul><p>Paragraph</p>',
  1 => '<ul><li>List item</li><li>List item</li></ul><p>Paragraph<img /></p>'
) 
```

什么是 XPath 查询以选择`h1`标记之后的所有内容，直到下一个，等等？

任何帮助或建议表示赞赏。

更新：

我最终想要实现的是，使用 PHP，创建这种格式的数组：

```
array(
  'headings' => array(
      1 => '<h1>Heading</h1>',
      2 => '<h1>Heading 2</h1>'
  ),
  'content'  => array(
      1 => '<p>Paragraph</p><ul><li>List item</li><li>List item</li></ul><p>Paragraph</p>',
      2 => '<ul><li>List item</li><li>List item</li></ul><p>Paragraph<img /></p>'
  )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:32:44.500

这是一种快速的方法。

假设您的代码位于`$code`：

```
$code = <<<'CODE'
<h1>Heading</h1>
<p>Paragraph</p>
<ul>
  <li>List item</li>
  <li>List item</li>
</ul>
<p>Paragraph</p>
<h1>Heading 2</h1>
<ul>
  <li>List item</li>
  <li>List item</li>
</ul>
<p>Paragraph<img /></p>
CODE; 
```

**解决方案：**

```
// Content array...
$content = array_map(
    function ($element) {
        return preg_replace('/\>\s+\</', '><', $element);
    },
    preg_split('/\<h1\>[^\<]*\<\/h1\>/', $code)
);
array_shift($content);

// Headings array...
preg_match_all('/\<h1\>[^\<]*\<\/h1\>/', $code, $matches);
$headings = $matches[0];

// Result
$result = array(
    'headings' => $headings,
    'content'  => $content,
);
print_r($result); 
```

**输出：**

```
Array
(
    [headings] => Array
        (
            [0] => <h1>Heading</h1>
            [1] => <h1>Heading 2</h1>
        )

    [content] => Array
        (
            [0] =>  <p>Paragraph</p><ul><li>List item</li><li>List item</li></ul><p>Paragraph</p>
            [1] =>  <ul><li>List item</li><li>List item</li></ul><p>Paragraph<img /></p>
        )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:07:26.330

我是这样做的:)

```
$html = '<h1>Heading</h1><p>Paragraph</p><ul><li>List item</li><li>List item</li></ul><p>Paragraph</p><h1>Heading 2</h1><ul><li>List item</li><li>List item</li></ul><p>Paragraph<img /></p>';

$dom_document = new DOMDocument();

$dom_document->loadHTML($html);
$dom_document->preserveWhiteSpace = false;

//use DOMXpath to navigate the html with the DOM
$dom_xpath = new DOMXpath($dom_document);

$elements = $dom_xpath->query("/html/body/*");

if (!is_null($elements)) {
    $i = 0;
    foreach ($elements as $element) {
        if ($element->nodeName == 'h1') {
            $i++;
            $array['headings'][$i] = $dom_document->saveHtml($element);
            continue;
        } else {
            $array['content'][$i] .= $dom_document->saveHtml($element);
        }
    }
}

var_dump($array); 
```

注意：如果您使用的是 PHP 5.2，请替换：

```
$array['headings'][$i] = $dom_document->saveHtml($element); 
```

和

```
$array['content'][$i] .= $dom_document->saveHtml($element); 
```

和：

```
$array['headings'][$i] = $dom_document->saveXml($element);
$array['content'][$i] .= $dom_document->saveXml($element); 
```

# java - 为什么线程在 Android 上会泄漏？

> ID：12956549
> 
> 赞同：6
> 
> 时间：2012-10-18T14:04:48.173
> 
> 标签：java, android, multithreading, garbage-collection

我一直在我们的 Android 应用程序中注意到，每次我们退出到主屏幕时，我们都会将堆大小（泄漏）增加 ByteArrayOutputStream 的数量。我能够管理的最好的方法是添加

```
this.mByteArrayOutputStream = null; 
```

在*run()*结束时防止堆大小不断增加。如果有人能启发我，我将不胜感激。我写了下面的例子来说明这个问题。

## MainActivity.java

```
public class MainActivity extends Activity {
    private Controller mController;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onStart() {
        super.onStart();

        this.mController = new Controller();
        mController.connect();
    }

    @Override
    protected void onStop() {
        super.onStop();

        mController.quit();
    }
} 
```

## 控制器.java

```
public class Controller {
    public volatile ReaderThread mThread;

    public Controller() {
        super();
    }

    public void connect() {
        mThread = new ReaderThread("ReaderThread");
        mThread.start();
    }

    public void quit() {
        mThread.quit();
    }

    public static class ReaderThread extends Thread {
        private volatile boolean isProcessing;
        private ByteArrayOutputStream mByteArrayOutputStream;

        public ReaderThread(String threadName) {
            super(threadName);  
        }

        @Override
        public void run() {
            this.isProcessing = true;

            Log.d(getClass().getCanonicalName(), "START");
            this.mByteArrayOutputStream = new ByteArrayOutputStream(2048000);

            int i = 0;
            while (isProcessing) {
                Log.d(getClass().getCanonicalName(), "Iteration: " + i++);
                mByteArrayOutputStream.write(1);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                }
            }

            try {
                mByteArrayOutputStream.reset();
                mByteArrayOutputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

            Log.d(getClass().getCanonicalName(), "STOP");
        }

        public void quit() {
            this.isProcessing = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T14:58:16.633

Threads are immune to GC because they're [garbage collection roots](https://stackoverflow.com/a/2423293/357055). So, it's likely that the JVM is keeping your `ReaderThread` in memory, along with its allocations for member variables, thus creating the leak.

Nulling out the `ByteArrayOutputStream`, as you've noted, would make its buffered data (but not the `ReaderThread` itself) available for GC.

**EDIT**:

After some sleuthing, we learned that [the Android debugger was causing the perceived leak](http://developer.android.com/tools/debugging/index.html):

> The VM guarantees that any object the debugger is aware of is not garbage collected until after the debugger disconnects. **This can result in a buildup of objects over time while the debugger is connected**. For example, if the debugger sees a running thread, the associated Thread object is not garbage collected even after the thread terminates.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T09:39:56.940

从[Android 调试](http://developer.android.com/tools/debugging/index.html)页面：

> 调试器和垃圾收集器目前松散地集成在一起。VM 保证调试器知道的任何对象在调试器断开连接之前不会被垃圾收集。当调试器连接时，这可能会导致对象随着时间的推移而堆积。例如，如果调试器看到一个正在运行的线程，则即使在线程终止后，关联的 Thread 对象也不会被垃圾回收。

这会降低 DDMS 堆监控的价值，您不觉得吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T16:42:06.180

这个问题很有趣。我看了看它并设法获得了一个没有泄漏的工作解决方案。我用它们的原子对应物替换了 volatile 变量。我还使用了 AsyncTask 而不是 Thread。这似乎成功了。没有更多的泄漏。

**代码**

```
class Controller {
    public ReaderThread mThread;
    private AtomicBoolean isProcessing = new AtomicBoolean(false);
    public Controller() {
        super();
    }

    public void connect() {
        ReaderThread readerThread = new ReaderThread("ReaderThread",isProcessing);
        readerThread.execute(new Integer[0]);
    }

    public void quit() {
        isProcessing.set(false);
    }

    public static class ReaderThread extends AsyncTask<Integer, Integer, Integer> {
        private AtomicBoolean isProcessing;
        private ByteArrayOutputStream mByteArrayOutputStream;

        public ReaderThread(String threadName, AtomicBoolean state) {
            this.isProcessing = state;
        }

        public void run() {
            this.isProcessing.set(true);

            Log.d(getClass().getCanonicalName(), "START");
            this.mByteArrayOutputStream = new ByteArrayOutputStream(2048000);

            int i = 0;
            while (isProcessing.get()) {
                Log.d(getClass().getCanonicalName(), "Iteration: " + i++);
                mByteArrayOutputStream.write(1);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                }
            }

            try {
                mByteArrayOutputStream.reset();
                mByteArrayOutputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

            Log.d(getClass().getCanonicalName(), "STOP");
        }

        public void quit() {
            this.isProcessing.set(false);
        }

        @Override
        protected Integer doInBackground(Integer... params)
        {
            run();
            return null;
        }
    }
} 
```

这是两个代码示例在几次往返主屏幕后的比较。您可以在第一个上看到 byte[] 泄漏。

![Hprof 解决方案比较](../Images/3cab4f67ff4147919f6883279644981a.png)

至于为什么会发生这种情况，~~google 建议您使用 AsyncTask 或 Service 进行异步操作。我记得他们的一个视频明确建议反对 Threads。进行演示的人警告过副作用。我想这是其中之一？我可以清楚地看到，当活动恢复活力时存在泄漏，但没有解释为什么会发生所述泄漏（至少在 JVM 上。我不知道 dalvik VM 的内部结构以及何时发生认为线程已完全停止）。我尝试了弱引用/将控制器归零/等，但这些方法都没有奏效。~~

请参阅此答案以了解为什么报告此泄漏 - [https://stackoverflow.com/a/12971464/830964](https://stackoverflow.com/a/12971464/830964)。这是一个误报。

我能够摆脱 BAOS 占用的内存，而无需通过异步任务明确地将其清空。它也应该适用于其他变量。让我知道这是否可以为您解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:16:44.093

根据您显示使用的代码，该`ByteArrayOutputStream`实例仅在`ReaderThread`实例泄漏时才会泄漏。只有当线程仍在运行，或者在某处仍有可访问的引用时，才会发生这种情况。

专注于弄清楚实例是*如何*`ReaderThread`泄漏的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T19:14:35.040

我有一个类似的问题，我通过将线程归零来解决它。

我已经在模拟器（SDK 16）中尝试了您的代码更改`quit()`方法如下：

```
public void quit() { 
    mThread.quit(); 
    mThread = null;  // add this line
} 
```

我已经在 DDMS 中检查了泄漏有效地停止了。移除线，泄漏返回。

--已编辑--

我也在使用 SDK 10 的真实设备中尝试过这个，我将结果放在下面。

您是否在测试代码或完整代码中尝试过线程归零？它接缝测试代码，在将线程归零后不会泄漏，无论是在真实设备中还是在模拟器中。

初始启动后的屏幕截图（分配 7.2MB / 已使用：4.6MB）：

![步骤1](../Images/7d90c150c1e7456c7806c9b0b0c7bc85.png)

几次重启后的屏幕截图（分配 7.2MB / 使用：4.6MB）：

![第2步](../Images/b83fd338014c9e077f8194bde1a4ddea.png)

几次非常快速的重启后的屏幕截图，以及旋转设备服务时间（分配 13.2MB / 使用：4.6MB）：

![第三步](../Images/e970b1d1fcee5c0218239f35f31c9eff.png)

尽管在最后一个屏幕中分配的内存明显高于初始内存，但分配的内存仍为 4.6MB，因此没有泄漏。

# version-control - 寻找一个允许使用 X.509 证书签名的版本控制系统

> ID：12956554
> 
> 赞同：1
> 
> 时间：2012-10-18T14:04:59.360
> 
> 标签：version-control, dvcs, digital-signature, x509, pkcs#11

我正在寻找一个（分布式）版本控制系统，它允许我使用 X.509 证书签署提交。我所知道的允许我将数字签名应用于提交的系统（如 git、bazaar、mercurial）仅适用于 GnuPG。

我感兴趣的另一件事是使用硬件令牌（通过 PKCS#11 库）来签署我的提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:12:56.960

Mercurial 与[CommitsigsExtension](http://mercurial.selenic.com/wiki/CommitsigsExtension)：

> 将 GnuPG 和**OpenSSL 签名**直接嵌入变更集中

# c++ - 完全禁用 QScrollArea 中的水平滚动，而不仅仅是条

> ID：12956560
> 
> 赞同：7
> 
> 时间：2012-10-18T14:05:11.263
> 
> 标签：c++, qt, user-interface, scroll

在 Qt 中，我有一个 QScrollArea ，其中包含一些可以垂直滚动的内容，但绝不应该允许水平滚动。即使我禁用了 H 滚动条的显示，具有支持水平运动的滚轮（或触摸板）的鼠标也会使其左右移动一点。

现在，这可能部分是布局问题……但实际上屏幕上没有任何内容。这可能是一种逃避，但有没有办法从后面“锁定”滚动区域，可以水平移动？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-09-13T08:49:54.740

```
scrollArea->verticalScrollBar()->setEnabled(false);
scrollArea->horizontalScrollBar()->setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:15:42.833

对于您，`QScrollArea`您需要过滤方法或重载方法。`QEvent::Wheel``eventFilter``wheelEvent(QWheelEvent* event)`

另一种方法是创建仅继承自`QWidget`with 重载的小部件`eventFilter`并将其过滤器应用于您的滚动区域：

```
scrollArea->viewport()->installEventFilter(someFilterWidget); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:11:45.977

您是否尝试设置滚动条策略？

myScrollArea->setHorizo​​ntalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

[http://qt-project.org/doc/qt-4.8/qabstractscrollarea.html#horizo​​ntalScrollBarPolicy-prop](http://qt-project.org/doc/qt-4.8/qabstractscrollarea.html#horizontalScrollBarPolicy-prop)

# c# - CRM 2011 linq 和保存的查询

> ID：12956563
> 
> 赞同：0
> 
> 时间：2012-10-18T14:05:22.110
> 
> 标签：c#, linq, dynamics-crm-2011

是否可以将 CRM 2011 View (savedquery) 与 linq 一起使用？我的意思是我可以做这样的事情：

```
IEnumerable<Opportunity> GetOpportunites(CrmOrganizationServiceContext context, string viewName, Guid customerId)
{
    var view = context.CreateQuery<SavedQuery>().FirstOrDefault(q => q.Name == viewName);
    if(view!=null)
       return from Opportunity op in view
           where op.CustomerId.Id == customerId
           select op;
           return new List<Opportunity>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:29:04.580

它肯定不会。正如 Servy 建议的那样，尝试一下，你就会明白为什么。

`SavedQuery`有两个定义视图的属性—— `FetchXml`（底层查询）和`LayoutXml`（UI 中返回的列）。换句话说，它不会返回视图在 UI 中返回的*数据*，而是*定义*数据在 UI 中的返回方式。

枚举您期望从视图返回的记录的最简单的方法是`FetchRequest`直接使用 a。您必须将条件作为 XML 节点动态插入到`FetchXml`.

您还可以解析 XML 过滤器集，然后将其转换为适当的 Linq，但这显然更具挑战性，也许是不必要的。

第三种方法是在系统中创建一个静态视图，作为条件，您将客户设置为等于某个任意客户，然后在 XML 字符串中动态更改客户 ID。

# c# - 双向隐式转换？

> ID：12956567
> 
> 赞同：0
> 
> 时间：2012-10-18T14:05:26.737
> 
> 标签：c#

据我了解`Foo`，当将类型传递给期望 int 的方法时，我可以将其自动转换为 int。我也可以做另一个方向吗？即有一个 int 隐式转换为`Foo`并且这个*定义也在 foo 中*？

我的理解可能不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:09:08.403

你可以。

```
class Foo
{
    public Foo(int value)
    { 
        this.Value = value; 
    }

    public int Value { get; set; }

    // ImplicitSample -> int
    public static implicit operator int(Foo input)
    {
        return input.Value;
    }

    //  string -> ImplicitSample
    public static implicit operator Foo(int input)
    {
        return new Foo(input);
    }
} 
```

本文中的示例将更好地展示它，然后我可以解释：http: [//msdn.microsoft.com/en-us/library/z5z9kes2.aspx](http://msdn.microsoft.com/en-us/library/z5z9kes2.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:08:54.740

是的你可以。

```
public class Foo
{
    public int Value { get; set; }

    public static implicit operator int(Foo foo)
    {
        return foo.Value;
    }
    public static implicit operator Foo(int value)
    {
        return new Foo() { Value = value };
    }
} 
```

# c# - Mono 2.6.4 使用什么版本的 C#？

> ID：12956576
> 
> 赞同：2
> 
> 时间：2012-10-18T14:05:48.177
> 
> 标签：c#, mono, unity3d

也许（希望）我遗漏了一些明显的东西，但是我无法从 Mono 站点看到哪个版本的 C# 用于任何特定版本的 Mono，作为 C# 新手，我不确定如何自己直接找到.

我的具体问题是：Mono 2.6.4 使用什么版本的 C#？（我对那个版本感兴趣的原因是它似乎是当前版本的 Unity 3D 使用的 Mono 变体的基本版本。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T14:09:28.577

[发行说明](http://www.mono-project.com/Release_Notes_Mono_2.6.4#C.23_Language)有这样的说法：

> 如果 Mono 2.6.1 配置了预览模式，您还可以提前访问 Mono 的 C# 4.0 实现。此实现现在作为 dmcs 命令的一部分提供。
> 
> C# 4.0 命名参数和可选参数已完全实现。

因此，为了安全起见，请保留 C# 3.0 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:10:10.037

[从这个](http://www.mono-project.com/Release_Notes_Mono_2.6.4)看起来似乎使用4.0

# regex - 正则表达式正好匹配两个冒号

> ID：12956578
> 
> 赞同：1
> 
> 时间：2012-10-18T14:05:56.003
> 
> 标签：regex

我有这些字符串，我想返回正则表达式确认这些模式。

```
NS::varible.child // OK
variable.child // OK
NS:variable.child // NO MATCH
::variablename.child // OK
:variablename.child // NO MATCH
_variablename.child.x // OK
5variablename.child.x // NO MATCH 
```

我希望没有 -> 运算符和模板<> 的 C++ 变量名匹配

我想出了这个正则表达式。

```
[a-z\_:{2,2}A-Z][a-z\_A-Z0-9\.:{2,2}]* 
```

`:{2,2}`似乎没有做我想做的事。它也接受一个冒号。

如何准确检查两个冒号？匹配 C++ 变量结构的正则表达式是否更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:13:30.557

选项之一：

```
/^((::)?[_a-zA-Z.]+)+$/ 
```

[在Rubular](http://rubular.com/r/DO2zJipQE8)上在线玩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:11:22.350

^(\w+|::)(::|.)\w+.\w+

试试看。您可以按字面意思使用“::”来匹配两个“:”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:08:29.550

就像@Wiseguy 说的你不能在字符类（`[` `]`）中使用特殊字符。正确的解决方案是使用分组在您的文字和字符类之间交替：

```
([a-zA-Z]|::) 
```

**编辑：更全面的解释**

如果你考虑一个字符类，它只是一种编写组的特殊方式：

```
(a|b|c|d|e|f|g) 
```

等同于：

```
[a-g] 
```

因此，通过使用一组额外的字符，您将获得相同的效果。

# cakephp - cakePHP 资源（js、css、img）没有从主题文件夹中加载

> ID：12956579
> 
> 赞同：0
> 
> 时间：2012-10-18T14:06:00.343
> 
> 标签：cakephp, themes

**我做了什么**

`$this->Html->css('default')`我在位于的 index.ctp 中编写了这段代码

> /Views/Themed/{主题名称}/layout/index.ctp

该代码尝试访问位于的 default.css

> /Views/Themed/{主题名称}/webroot/css/default.css

**发生了什么**

当页面 index.ctp 被渲染时，翻译`$this->Html->css('default')`为

> /cakePHP/css/default.css

**我期望发生的事情**

但它必须是

> /cakePHP/theme/{主题名称}/css/default.css

上述问题出现在LAMP中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:09:26.983

你是在告诉蛋糕使用你的主题吗？

```
// controller
public $theme = 'theme_name';

//action
$this->theme = 'theme_name'; 
```

# python - 合并（附加）来自不同应用的 GAE 数据存储

> ID：12956582
> 
> 赞同：1
> 
> 时间：2012-10-18T14:06:08.830
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有 2 个基本相同的不同应用程序，但由于 GAE 计费问题，我不得不设置第二个应用程序。

我想将第一个应用程序的数据存储数据与第二个应用程序数据存储合并。通过合并，我只想附加 2 个数据存储。帮助/可视化

应用程序1：

1.  某型号
2.  另一个型号

应用 2：

1.  某型号
2.  另一个模型

我希望应用程序 2 的数据存储是应用程序 2 和应用程序 1 的总和。我在应用程序引擎管理页面上看到将数据从一个应用程序传输到另一个应用程序的唯一方法将覆盖目标目标数据......我不想覆盖。谢谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:11:56.617

[您可以使用批量下载](https://developers.google.com/appengine/docs/python/tools/uploadingdata)器以 CSV 格式下载要合并的模型，使用一些脚本将它们合并并再次上传到应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:27:44.887

您可以在 App2 中使用 UrlFetch 从 App1 请求您需要的所有数据并对其进行处理以创建合并结果。在 App1 中使用 JSON 为数据交换服务和序列化实体（使用游标）非常容易。

# applescript - 在 AppleScript 中，我试图从网站上获取一条信息并让它在对话框中弹出

> ID：12956583
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:06:11.950
> 
> 标签：applescript

更具体地说，此信息：[http ://colejohnsoncreative.com/personal/ai/currentdegree.php](http://colejohnsoncreative.com/personal/ai/currentdegree.php)

我想提取该数字（我所在城市的当前温度）并将其显示在对话框中，或者让我的计算机说出它。我想要这样的东西：

**说**“它是*currentDegree* ”

，然后会说当前温度。

我被告知要使用*curl*，但我似乎找不到太多关于此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:32:12.210

您可以使用`curl`Unix 命令下载您的网页，如下所示：

```
property theURL : "http://colejohnsoncreative.com/personal/ai/currentdegree.php"

set theValue to do shell script "curl " & theURL
display dialog theValue buttons {"OK"} default button "OK" 
```

# javascript - 平板电脑中的Phonegap Android“navigator.notification.activitystart()”

> ID：12956585
> 
> 赞同：3
> 
> 时间：2012-10-18T14:06:16.813
> 
> 标签：javascript, android, jquery, cordova, phonegap-plugins

在我的 Android 应用程序中，我使用 Phonegap 的`navigator.notification.activitystart()`事件来显示`Activity`指示器。它在 Android 手机和平板电脑上运行良好，但问题是当我触摸平板电脑的屏幕时，即使加载未完成，加载程序也会消失。

当我使用 触摸屏幕时，如何防止加载指示消失`javascript/jquery`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:38:23.040

不确定您是否可以单独使用 javascript 更改该实现。PhoneGap 的工作方式是它将在原生 Android 代码中创建一个对象 ProgressDialog。我认为问题在于它在其构造函数中将 ProgressDialog 设置为可取消。如果您进入cordova源代码，您可以更改它，它应该为您的特定问题创建一个修复程序。

Notification.java 第 250-255 行的源代码将第二个 true 更改为 false

```
Notification.this.spinnerDialog = ProgressDialog.show(cordova.getActivity(), title, message, true, true/*change this to false*/,
                        new DialogInterface.OnCancelListener() {
                            public void onCancel(DialogInterface dialog) {
                                Notification.this.spinnerDialog = null;
                            }
                        });
            } 
```

# jquery-ui - jQuery UI Tooltip 小部件的最大宽度

> ID：12956586
> 
> 赞同：24
> 
> 时间：2012-10-18T14:06:17.763
> 
> 标签：jquery-ui, jquery-ui-tooltip

我使用 jQuery UI 的新[工具提示](http://jqueryui.com/tooltip/)，并且无法弄清楚如何设置工具提示的最大宽度。我想应该用*position*来完成，但是怎么做呢？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-18T14:57:31.540

根据[Senni 的回复](https://stackoverflow.com/a/12956850/2430549)，我在一个单独的 CSS 文件中添加了以下内容：

```
div.ui-tooltip {
    max-width: 400px;
} 
```

旁注：确保您的单独 CSS在 ui-css*之后*跟随，否则将不起作用。否则，您也可以使用`!important`- 标记。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-25T18:11:52.953

如果订阅 Tooltip 的 open 事件，可以在代码中更新样式：

```
$(".selector").tooltip({
    open: function (event, ui) {
        ui.tooltip.css("max-width", "400px");
    }
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-26T08:50:26.580

在脚本中：

```
$(elm).tooltip({tooltipClass: "my-tooltip-styling" }); 
```

在 CSS 中：

```
.my-tooltip-styling {
      max-width: 600px;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-02T20:12:51.340

**您可以使用tooltipClass**参数指定一个额外的 CSS 类，而不是直接修改或覆盖 jQuery UI CSS 类：

**工具提示初始化**

```
 $(function() {
    $( document ).tooltip({
      items: "tr.dataRow",
      tooltipClass: "toolTipDetails",  //This param here is used to define the extra style class 
      content: function() {
        var element = $( this );

            var details = j$("#test").clone();
            return details.html();

      }
    });
  }); 
```

然后您将创建该样式类。您需要在 jQuery UI CSS 文件之后导入这个 CSS 文件。

**示例 CSS 样式**

默认情况下，此处的此类将使模态宽度为 1200px，如果超出此范围，则添加水平滚动。

```
<style> 
  .toolTipDetails {
    width:  1200px;
    max-width: 1200px;
    overflow:auto;
  } 

</style> 
```

*旁注：通常不建议使用`!important`标签，但在这种情况下可以使用它来确保`CSS`呈现预期的内容。*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-24T16:05:35.087

[正如jQuery UI api](http://api.jqueryui.com/tooltip/#theming)所指出的，你能做的最好的就是以这种方式覆盖类**ui-tooltip**和**ui-tooltip-content**：

```
.ui-tooltip
{
    /* tooltip container box */
    max-width: your value !important;
}
.ui-tooltip-content
{
    /* tooltip content */
    max-width: your value !important;
} 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-18T14:21:16.410

也许你可以在js中设置这样的宽度

```
$("#IDOfToolTip").attr("style", "max-width:30px"); 
```

或者

```
$("#IDOfToolTip").css("max-width", "30px"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-21T15:12:23.340

```
 .ui-tooltip{
      max-width: 800px !important;
      width: auto !important;
      overflow:auto !important;
      }
  .ui-tooltip-content{
      background-color: #fdf8ef;
      } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-10T12:51:07.070

```
div.ui-工具提示{
宽度：210px；//如果适合内容在特定浏览器中不起作用
宽度：适合内容；
}
```

# c++ - 通常的非限定查找和依赖于参数的名称查找（ADL）

> ID：12956600
> 
> 赞同：0
> 
> 时间：2012-10-18T14:07:04.697
> 
> 标签：c++, argument-dependent-lookup, name-lookup

对于不合格的名称查找，“通常不合格的查找”和“依赖于参数的名称查找”（ADL），我在标准中找不到哪个先发生？

同样，由于两者都试图向重载候选集添加一些东西，但顺序似乎并不重要。但是仍然很高兴知道哪个先发生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:28:17.020

哪个先出现并不重要，不是吗？名称查找会生成一组可能的名称。

> **3.4 名称查找**
> 如果名称查找发现名称是函数名称，则名称查找可以将多个声明与名称相关联；据说这些声明形成了一**组**重载函数。

该标准明确表示“设置”。作为一个数学结构，集合 {1,2,3} 与 {2,3,1} 和 {3,2,1} 相同。顺序无所谓。重要的是何时发生重载解决方案和应用程序访问规则。这里的标准非常明确。再次从介绍段落引用到 3.4：

> 在名称查找成功后进行重载解析。仅在名称查找和函数重载解析成功后才考虑访问规则。

# http - 使搜索 URL 搜索引擎友好：哈希 -> 什么？

> ID：12956602
> 
> 赞同：1
> 
> 时间：2012-10-18T14:07:06.207
> 
> 标签：http, url-rewriting, web, seo

我正在为客户开发航班搜索引擎，目前 URL 如下所示（*ad* = 目的地机场，*ao* = 始发机场，此处未指定日期和乘客人数）：

[http://example.com/#ad=S%C3%A3o+Paulo+-+Todos+os+aeroportos+(SAO),+Brasil&ao=累西腓+-+Guararapes+Intl+(REC),+Brasil](http://example.com/#ad=S%C3%A3o+Paulo+-+Todos+os+aeroportos+(SAO),+Brasil&ao=Recife+-+Guararapes+Intl+(REC),+Brasil)

我的客户希望使搜索页面对搜索引擎更友好 (SEO)。这个想法是巴西人正在寻找从 SAO 到 REC 的航班，例如谷歌应该有更高的机会找到那个特定的航班搜索引擎。

第一步可能是用查询字符串 (?) 替换片段标识符 (#)。服务器然后动态生成可以在没有 JavaScript 的情况下查看的漂亮文本内容（搜索结果仍将通过 XHR 加载）。在我看来，这很有意义。

现在，为了使 URL 对搜索引擎更友好：

*   (A) 我的客户建议在 URL 中添加额外的关键字，例如：

    [http://example.com?flights+to+Porto+Alegre&S%C3%A3o+Paulo+-+Todos+os+aeroportos+(SAO),+Brasil&ao=Recife+-+Guararapes+Intl+(REC),+Brasil](http://example.com?flights+to+Porto+Alegre&S%C3%A3o+Paulo+-+Todos+os+aeroportos+(SAO),+Brasil&ao=Recife+-+Guararapes+Intl+(REC),+Brasil)

*   (B) 我建议添加一个 slug 来代替，它可以很容易地国际化，而且对人类来说也很容易阅读。例子：

    [http://example.com/pt_BR?ad=REC&ao=SAO/voos_de_Sao_Paulo_para_Recife](http://example.com/pt_BR?ad=REC&ao=SAO/voos_de_Sao_Paulo_para_Recife)

*   (C) 或者，也许没有 slug（但 - 由于可解析性 - 仅适用于有限的参数集，其缺点是限制用户共享 URL）：

    [http://example.com/pt_BR/voos_de_Sao_Paulo_(SAO)_para_Recife_(REC](http://example.com/pt_BR/voos_de_Sao_Paulo_(SAO)_para_Recife_(REC) )

你有什么建议？任何类似用例的好 URL 示例？

话虽如此：我知道来自高排名页面的链接仍然是最重要的排名衡量标准。最后，我想知道所有这些复杂性是否真的值得付出努力。当我查看 Google 自己的搜索页面时，它们相当简单。例如，正如我的客户想要的那样，H1 标签中没有搜索查询的摘要。当然，谷歌不会搜索自己...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:25:04.200

*   不要使用`_`（下划线）来分隔单词。[谷歌解释](http://www.youtube.com/watch?v=AQcSFsQyct8) `hello_world`为一个词，但解释`hello-world`为两个词。
*   不要将*人类可读*的关键字放在查询字符串中（在 之后`?`）。而是让它成为一个普通的 URL`http://example.com/pt_BR/search/voos-de-Sao-Paulo-(SAO)-para-Recife-(REC)`

我会选择类似的东西：`http://example.com/pt_BR/2012-10-28/voos-de-Sao-Paulo-(SAO)-para-Recife-(REC)`

# css - 在图像和列表样式类型设置为无的列表项中缩进文本

> ID：12956603
> 
> 赞同：1
> 
> 时间：2012-10-18T14:07:07.330
> 
> 标签：css, text, alignment

[我的问题与此](https://stackoverflow.com/questions/3963735/indent-list-items-with-floating-image-problem)类似，但我的无序列表`img`在s 内。`li`

以下是我的标记。（将其视为评论的 UI，如在 Facebook 或 G+ 中，评论文本和用户的个人资料图片缩略图并排显示）

```
<ul class="comments">
    <li><img src="thumb.jpg" class="user-img" />Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
    <li><img src="thumb.jpg" class="user-img" />Aliquam tincidunt mauris eu risus.</li>
    <li><img src="thumb.jpg" class="user-img" />Morbi in sem quis dui placerat ornare. Pellentesque odio nisi, euismod in, pharetra a, ultricies in, diam. Sed arcu. Cras consequat. Morbi in sem quis dui placerat ornare. Pellentesque odio nisi, euismod in, pharetra a, ultricies in, diam. Sed arcu. Cras consequat.</li>
    <li><img src="thumb.jpg" class="user-img" />Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
</ul> 
```

以下是相同的CSS。

```
.comments {
    list-style-type: none;
    clear: both;
}

.comments li {
    padding: 3px;
    font-size: 12px;
}

.comments li img {
    margin-right: 10px;
} 
```

我得到的结果如下：

![丑陋的列表文本缩进](../Images/be3c1e739af3b43a04a95556eaceeccc.png)

因为很明显，当文本不适合宽度时，它会低于我不想要的图像。如何保持对齐而不是在缩略图下方流动？

**笔记：**

用于列表项的图像不打算用作`list-style-image`，这是原型设计，每个图像将不同`li`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:09:54.087

您可以使用：

```
.comments
{
list-style-image:url('thumb.jpg');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:20:59.133

如果每个 li 的缩略图图像不同，请使用[此演示](http://jsfiddle.net/taZnM/1/)

如果所有 li 的缩略图图像都相同。做这个 -

```
.comments li {
    background: url(thumb.jpg) no-repeat left top;
    padding: 0 0 10px 50px;
    font-size: 12px; min-height: 44px; /*thumb image height*/
} 
```

# javascript - 如何在手机中检查手机 Web 应用程序的 html 代码兼容性

> ID：12956604
> 
> 赞同：2
> 
> 时间：2012-10-18T14:07:09.900
> 
> 标签：javascript, jquery, html

我想创建一个`HTML/Javascript`与手机上的网络浏览器兼容的网页，即使早期版本的手机仍在流通。网页将使用选择列表、按钮、链接和`Javascript`一些非常基本的变量。

1.  我可以实现`JQuery`以启用更丰富的用户界面吗？
2.  它的性能在预期的早期设备上是否可以接受。
3.  我可以为内容考虑的最安全的 HTML/Javascript/JQuery Mobile 版本（兼容性）是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:15:27.240

1.  是的。考虑一些移动框架（您的 jquery-mobile 示例很棒）
2.  这真的取决于你打算做什么。大动画甚至不会运行 -[***检查这里***](http://jquerymobile.com/gbs/)
3.  如果您指望 Windows mobile 6.X 等旧平台中的默认浏览器，那么无论您使用什么版本，您都很难期望您的网页看起来不错。那些浏览器真的很讨厌 html/javascript/CSS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:16:59.863

当我告诉你即使是 jQuery Mobile 在旧手机（即智能手机之前）上速度非常慢时，我可以根据经验说话。如果您打算以此类设备为目标，则需要使一切尽可能简单，尤其是因为它们没有触摸屏，因此您必须使用方向箭头进行导航...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:20:42.703

您需要定义旧手机的含义。

有很多旧手机不支持 JavaScript，所以如果你想支持它们，你不能使用 JavaScript - 句号。

如果您只想支持至少支持 JavaScript 的手机，请使用 jQuery。请注意，jQuery Mobile 针对支持触摸的设备进行了优化，主要用于此类目的。

如果我是你，我会简单地使用纯 JavaScript 并将交互性限制为简单的内容切换等，并摆脱任何动画。

# c# - lambda 表达式是委托吗？

> ID：12956606
> 
> 赞同：3
> 
> 时间：2012-10-18T14:07:18.140
> 
> 标签：c#

我不能直接传递一个 lambda

```
form.Invoke(() => AMethod(form)); 
```

因为奇怪的是 lambda 不是委托类型（根据编译器错误）。我似乎记得 Jon Skeet 的 .NET 4.0 书中的不同信息。在[MSDN](http://msdn.microsoft.com/en-us/library/bb397687.aspx)上它说：

> lambda 表达式是一个匿名函数，可用于**创建** **委托**或表达式树类型

```
 public static void Main()
    {
        Form form = new Form();                                
        form.Show();
        form.Invoke(() => AMethod(form));
        Application.Run();

        Console.Read();
    }

    public static void AMethod(Form form)
    {
        form.SendToBack();
    }
} 
```

然而，这里我们收到一个编译器错误：

> *无法将 lambda 表达式转换为类型“System.Delegate”，因为它不是委托类型。*

Lambda 应该是匿名代表的语法糖。那么这里的故事是什么？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:11:03.853

Lambda 本身不是代表。但是，就像您引用的文本一样，它们可用于创建代表：

```
form.Invoke(new Action(() => AMethod(form))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:11:36.073

是的，lambdas 用于创建委托，但它们本身不是委托。这里的主要问题是 lambda 没有签名，它们的参数列表和返回类型是根据它们所在的上下文确定的。当您将 lambda 放置在需要特定定义的委托实例的地方时，编译器就会知道什么签名 lambda 必须匹配才能有效。

`Invoke`另一方面，它不采用某些特定的委托类型，它采用一个`Delegate`没有任何签名的实例。您需要将您的 lambda 包装在`new SomeActualDelegateType(...)`(`Action`是这里某些委托的常见选择，但不是唯一的选择) 以赋予它一个实际的签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:13:32.583

尝试创建动作：`form.Invoke(new Action(() => MyMethod(form)));`

# c++ - 在没有 chrono 的 Windows 上使用 C++ 获取以纳秒为单位的时间

> ID：12956608
> 
> 赞同：1
> 
> 时间：2012-10-18T14:07:21.773
> 
> 标签：c++, boost, time, chrono

> **可能重复：**
> [Windows C++ 纳秒计时？](https://stackoverflow.com/questions/10019824/windows-c-nanosecond-timing)

我想测量一个函数的执行时间。但是我使用旧的 C++（我的意思是我不能使用 chrono）而且我在 Windows 上。我找不到任何可以满足我需要的代码片段。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:11:48.673

在 Windows 上，您可以选择使用[高性能计数器](http://frank.mtsu.edu/~csjudy/directX/HighPerformanceTimer.html)来获得高分辨率计时。即使是非常旧的 Windows 安装和旧编译器也应该支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:17:55.113

看一下[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx) Elapsed time 可以在 ticks 中获得，并且您知道每秒的 ticks 数。由于 CPU 速度可能会发生变化，因此它在较长的时间间隔内可能不可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:19:18.670

您可以使用 QueryPerformanceCounter

```
LARGE_INTEGER liFrequency = {0};

// Get the Frequency
if(QueryPerformanceFrequency(&liFrequency))
{

    // Start Timing
    LARGE_INTEGER liStart = {0};
    if(QueryPerformanceCounter(&liStart))           
    {
        // Do Stuff

        // Get Time spent...
        LARGE_INTEGER liStop = {0};
        if(QueryPerformanceCounter(&liStop))    
        {               
            LONGLONG llMilliseconds = (LONGLONG)((liStop.QuadPart - liStart.QuadPart) * 1000.0 / liFrequency.QuadPart);
            printf("time ellapsed ms:%lld\n", llMilliseconds);
        }
    }       
} 
```

# compiler-construction - 使用 Load 命令编译 Matlab 文件

> ID：12956613
> 
> 赞同：1
> 
> 时间：2012-10-18T14:07:30.157
> 
> 标签：compiler-construction, command, matlab-load

我是 Matlab 编译器的新手。我有一个带有按钮的简单 GUI，当它被按下时它会调用一个 m 函数（myfunction.m）。该函数只返回一个数字，然后显示一个消息框。如果我编译为：

```
mcc -m myfile.m 
```

一切正常。但如果我添加到 myfunction.m 这段代码：

```
load mydata.mat 
```

编译的文件不起作用，如果我单击按钮，则不会出现消息框。使用matlab编译时应该如何处理load命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:20:38.570

尝试这个：

```
wd = cd % Gets the current directory

load([wd '\filename']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:27:34.560

在 Matlab 中，我经常使用以下命令定位路径`which`：

```
tmp = which('myfile');
t2 = fileparts(tmp);
data_with_path = fullfile(t2,'mydata.mat'); 
```

不确定它在编译时是否有效。

# actionscript-3 - 无法访问我的班级的公共属性

> ID：12956616
> 
> 赞同：0
> 
> 时间：2012-10-18T14:07:44.160
> 
> 标签：actionscript-3, class, custom-component

我还在学习面向对象的编程......

我制作了自己的简单按钮类来执行水平按钮列表。我工作正常，但是...

```
package as3Classes {

import flash.display.Graphics;
import flash.display.Sprite;
import flash.display.MovieClip;
import flash.events.Event;
import flash.text.TextField;
import flash.events.MouseEvent;
import fl.motion.MotionEvent;
import flash.text.TextFormat;

public class simpleButton extends MovieClip {

    //var nome:String = new String();
    var sub:Sprite = new Sprite();
    public var realce:Sprite = new Sprite();
    public var titulo:String;

    public function simpleButton(nomeId:String, texto:String) {
        this.name = nomeId;
        this.titulo = texto;
        this.useHandCursor = true;
        this.buttonMode = true;
        this.mouseChildren = false;
        var txtf:TextFormat = new TextFormat();
        txtf.font = "Arial";
        var txt:TextField = new TextField();
        txt.wordWrap = false;
        txt.multiline = false;
        txt.text = texto;
        txt.setTextFormat(txtf);
        txt.width = txt.textWidth+4;
        txt.height = 22;
        txt.x = 4;
        txt.y = 2;
        txt.cacheAsBitmap = true;
        var fundo:Sprite = new Sprite();
        fundo.graphics.beginFill(0xCCCCCC);
        fundo.graphics.drawRect(0, 0, txt.width+8, 22);
        fundo.graphics.endFill();
        //var realce:Sprite = new Sprite();
        this.realce.graphics.beginFill(0x00CC00);
        this.realce.graphics.drawRect(0, 0, txt.width+8, 22);
        this.realce.graphics.endFill();
        this.sub.graphics.beginFill(0xFF0000);
        this.sub.graphics.drawRect(0, 0, txt.width+8, 2);
        this.sub.graphics.endFill();
        this.addChild(fundo);
        this.addChild(this.realce);
        this.addChild(this.sub);
        this.addChild(txt);
        this.sub.alpha = 0;
        this.sub.y = 22;
        this.addEventListener(MouseEvent.MOUSE_OVER, mouseover);
        this.addEventListener(MouseEvent.MOUSE_OUT, mouseout);
    }

    private function mouseover(e:MouseEvent){
        sub.alpha = 1;
    }
    private function mouseout(e:MouseEvent){
        sub.alpha = 0;
    }

} 
```

}

...当我尝试访问“titulo”或将“realce”设置为 alpha=1（以将其显示为单击时）它返回未定义。我只能设置或读取继承的属性，如名称、字母等。我的概念错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:52:28.050

是的！我找到了避免这个问题的方法：因为（因为它接缝）我无法通过显示对象列表访问“simpleButton”的内部公共对象，所以我在主类的根目录中创建了一个私有对象（btns：Object） （随处可见）并在添加时同时添加 simpleButtons。名称相同，所以我可以通过 btns 更改 realce.alpha，它会反映在显示中。

这很奇怪，因为 e.target 指向孩子而不是对象本身！

如果有人知道更好的方法，请告诉我。

# python - Python字典键错误

> ID：12956621
> 
> 赞同：0
> 
> 时间：2012-10-18T14:07:52.887
> 
> 标签：python, dictionary, filenames

我正在尝试运行一个 python 程序，该程序可以从一个文件中运行一个字典，其中包含一个单词列表，每个单词都有一个分数和标准差。我的程序如下所示：

```
theFile = open('word-happiness.csv', 'r')

theFile.close()

def make_happiness_table(filename):
   ''' make_happiness_table: string -> dict
       creates a dictionary of happiness scores from the given file '''

return {}

make_happiness_table("word-happiness.csv")

table = make_happiness_table("word-happiness.csv")
(score, stddev) = table['hunger']
print("the score for 'hunger' is %f" % score) 
```

我的文件中有“饥饿”一词，但是当我运行该程序以获取“饥饿”并返回其给定分数和标准偏差时，我得到：

```
(score, stddev) = table['hunger']
KeyError: 'hunger' 
```

即使字典中有“饥饿”，我怎么会得到一个关键错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:21:53.323

`"hunger"`不在字典中（这就是`KeyError`告诉你的）。问题可能是你的`make_happiness_table`功能。我不知道你是否发布了完整的代码，但这并不重要。在函数结束时，无论函数内部发生了什么，都返回一个*空字典*( )。`{}`

您可能想在该函数中打开文件，创建字典并返回它。例如，如果您的 csv 文件只有 2 列（用逗号分隔），您可以这样做：

```
def make_happiness_table(filename):
    with open(filename) as f:
         d = dict( line.split(',') for line in f )
         #Alternative if you find it more easy to understand
         #d = {}
         #for line in f:
         #    key,value = line.split(',')
         #    d[key] = value
    return d 
```

# unicode - 为什么 SAP 中透明表的字符字段在数据库级别（DB2）大 3 倍？

> ID：12956623
> 
> 赞同：3
> 
> 时间：2012-10-18T14:07:56.540
> 
> 标签：unicode, db2, sap

我使用一个附加了 IBM DB2 数据库的 SAP 系统。我在 SAP 系统中创建了一个透明表，然后检查了它在数据库级别的外观。事实证明，字符字段 ( `CHAR`, `DATS`, `CUKY`, `NUMC`) 的长度是 中指定的长度的三倍`SE11`。例如类型的`CLIENT`字段`MANDT`具有类型`VARCHAR(9)`。

由于 SAP 是 Unicode 系统，我可以理解将长度乘以 2。但是乘以3？有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:37:06.567

这种效果不依赖于所使用的 DBMS（我在基于 Oracle 的系统上看到了同样的效果）。这确实是一个 unicode/NUC 问题：在 NUC 系统上，客户端字段是 a `VARCHAR2(3)`，在其他相同软件组件的 unicode 系统上，它是 a `VARCHAR2(9)`。我只能猜测这是由于使用了一些[CESU-8](http://en.wikipedia.org/wiki/CESU-8)变体。

# oracle11g - oracle函数和游标使用动态表名

> ID：12956627
> 
> 赞同：0
> 
> 时间：2012-10-18T14:08:20.790
> 
> 标签：oracle11g

在我的 oracle 数据库中，我想创建一个带有游标的函数或过程，它将使用动态表名。这是我的代码。

```
CREATE OR REPLACE Function Findposition ( model_in IN varchar2,model_id IN number) RETURN number IS cnumber number;
TYPE c1 IS REF CURSOR;
c2 c1;
BEGIN
open c2 FOR 'SELECT id,ROW_NUMBER() OVER ( ORDER BY id) AS rownumber FROM '||model_in;
FOR employee_rec in c2
LOOP
    IF employee_rec.id=model_id then
    cnumber :=employee_rec.rownumber;
    end if;
END LOOP;
close c2;
RETURN cnumber;
END; 
```

帮我解决这个问题。IN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:28:02.287

*   不需要`c1`为弱类型引用游标声明类型。你可以只使用`SYS_REFCURSOR`类型。
*   您不能像这样混合隐式和显式游标调用。如果你要去`OPEN`一个游标，你必须`FETCH`从它循环中，你必须`CLOSE`它。你不能`OPEN`和`CLOSE`它然后在一个隐式游标循环中从中获取。
*   您必须声明一个变量（或多个变量）才能将数据提取到其中。我声明了一个记录类型和该记录的一个实例，但您可以轻松地声明两个局部变量并`FETCH`进入这些变量。
*   `ROWID`是一个保留字，所以我`ROWPOS`改用了。

把它们放在一起，你可以写出类似的东西

```
SQL> ed
Wrote file afiedt.buf

  1  CREATE OR REPLACE Function Findposition (
  2      model_in IN varchar2,
  3      model_id IN number)
  4    RETURN number
  5  IS
  6    cnumber number;
  7    c2      sys_refcursor;
  8    type result_rec is record (
  9      id      number,
 10      rowpos  number
 11    );
 12    l_result_rec result_rec;
 13  BEGIN
 14    open c2 FOR 'SELECT id,ROW_NUMBER() OVER ( ORDER BY id) AS rowpos FROM '||model_in;
 15    loop
 16      fetch c2 into l_result_rec;
 17      exit when c2%notfound;
 18      IF l_result_rec.id=model_id
 19      then
 20        cnumber :=l_result_rec.rowpos;
 21      end if;
 22    END LOOP;
 23    close c2;
 24    RETURN cnumber;
 25* END;
SQL> /

Function created. 
```

我相信这会返回您期望的结果

```
SQL> create table foo( id number );

Table created.

SQL> insert into foo
  2    select level * 2
  3      from dual
  4   connect by level <= 10;

10 rows created.

SQL> select findposition( 'FOO', 8 )
  2    from dual;

FINDPOSITION('FOO',8)
---------------------
                    4 
```

请注意，从效率的角度来看，最好将其编写为单个 SQL 语句，而不是每次都打开游标并从表中获取每一行。如果您确定要使用游标，则希望在找到感兴趣的行后退出游标，而不是继续从表中获取每一行。

从代码清晰的角度来看，您的许多变量名称和数据类型似乎很奇怪。您的参数名称似乎选择不当 - 例如，我不希望`model_in`成为输入表的名称。声明一个名为的游标`c2`也是有问题的，因为它非常不具描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:35:14.523

您可以这样做，使用动态查询时不需要循环

```
CREATE OR REPLACE Function Findposition(model_in IN varchar2,model_id IN number) 
RETURN number IS 
cnumber number;
TYPE c1 IS REF CURSOR;
c2 c1;
BEGIN
open c2 FOR 'SELECT rownumber 
             FROM (
            SELECT id,ROW_NUMBER() OVER ( ORDER BY id) AS rownumber 
            FROM '||model_in || ' 
                  ) WHERE id = ' || model_id;

FETCH c2 INTO cnumber;
close c2;

return cnumber;
END; 
```

# facebook - Facebook 登录按钮不会以多语言重新呈现

> ID：12956628
> 
> 赞同：2
> 
> 时间：2012-10-18T14:08:22.683
> 
> 标签：facebook, facebook-login, hebrew

我们的网站使用英语和希伯来语。在英语中，Facebook 连接按钮正在正确呈现，但在希伯来语中，第一次 FLogin 按钮以英语而不是在希伯来语中出现，并且所有区域设置都已正确设置。按钮的位置在希伯来语站点中也没有正确格式化。请帮我解决这个问题。

谢谢！

要将 FB 按钮更改为所需的语言，我进行了以下设置：

我正在使用 XFBML，并将 JavaScript SDK 加载到您站点的适当语言环境中。例如，如果我们的网站是西班牙语，请参考以下脚本：//connect.facebook.net/es_LA/all.js

对于希伯来语：//connect.facebook.net/he_IL/all.js

此处提供所有语言环境[https://www.facebook.com/translations/FacebookLocales.xml](https://www.facebook.com/translations/FacebookLocales.xml) 您可以检查您的语言环境

我在 fb 连接代码中使用了相同的方式：但在某些情况下，FB API 仍然为我们提供了错误的结果。以下是我使用的代码：

```
<?php if ($facebookInvite) {  
   $lang = &JFactory::getLanguage();
   $currentLang =  $lang->get('tag'); // Now $currentlang has the locale of the   language selected
?>

// Now I pass $currentlang to "connect.facebook.net/locale_of_current_lang/all.js"    Please see below

<script src="http://connect.facebook.net/<?php echo $currentLang; ?>/all.js" type="text/javascript"></script>
<script type="text/javascript">
joms.jQuery(document).ready(function(){
function init(){
    FB.init({appId: '<?php echo $config->get('fbconnectkey');?>', status: false, cookie: true, xfbml: true});

}

if(window.FB) {
    init();
} else {
    window.fbAsyncInit = init;
} 
```

});

```
</script>

<fb:login-button  onlogin="joms.connect.update();" scope="read_stream,publish_stream,offline_access,email,user_birthday,status_update,user_status"><?php echo JText::_('COM_COMMUNITY_SIGN_IN_WITH_FACEBOOK');?></fb:login-button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:46:26.183

如果用户登录 Facebook，登录插件将始终以用户（而非站点）配置的区域设置的语言显示。这就是当您将用户的语言环境切换为希伯来语时它会发生变化的原因。

如果用户**未登录**，登录插件将使用加载的 js-sdk 的语言环境：

```
http://connect.facebook.net/LOCALE/all.js 
```

# javascript - FB.getLoginStatus 在删除权限后显示我已连接？

> ID：12956631
> 
> 赞同：1
> 
> 时间：2012-10-18T14:08:24.577
> 
> 标签：javascript, facebook, facebook-javascript-sdk

**我的代码的精简版：**

```
$('#de-auth_button').click(function(){
  FB.api('/me/permissions', 'delete', function (response) {
    console.log(response); // true
    FB.getLoginStatus(function (response) {
      console.log(response.status); // connected
    });
  });
}); 
```

评论表示在登录并具有应用程序权限时单击此按钮的结果 ( `connected`)。

第二次单击按钮会为第一次提供错误消息（需要访问令牌），`console.log`并为第二次提供响应`not_authorized`（这是我单击后要完成的操作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:44:28.300

获取登录状态的结果被缓存——如果你想要它“实时”，你必须`force`在调用`FB.getLoginStatus`方法时使用参数，见[https://developers.facebook.com/docs/reference/javascript/FB .getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

# javascript - 在 Google 地球插件 API 中将事件附加到 groundOverlay

> ID：12956636
> 
> 赞同：1
> 
> 时间：2012-10-18T14:08:39.830
> 
> 标签：javascript, google-earth-plugin

我正在尝试使用以下代码将鼠标事件附加到 groundOverlay 功能：

```
 var groundOverlay = ge.createGroundOverlay('');
        var icon = ge.createIcon('');
        icon.setHref("http://www.google.com/logos/earthday08.gif");
        groundOverlay.setIcon(icon);
        var latLonBox = ge.createLatLonBox('');
        latLonBox.setBox(48.80, 48.75, -121.77, -121.85, 0);
        groundOverlay.setLatLonBox(latLonBox);
        ge.getFeatures().appendChild(groundOverlay);    

          google.earth.addEventListener(groundOverlay, 'click', function(e) { 
                    e.preventDefault();
                    console.log("hello"); 
                    }); 
```

但是单击没有显示任何结果。任何想法为什么？

谢谢！账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T16:00:32.740

这是一个错误，您发布的代码是完全正确的。

该`KmlGroundOverlay`对象确实继承自 ，`GEEventEmitter`因此它具有标准`KmlMouseEvents`; mousedown、mouseup、mousemove 等

您可以在这里清楚地看到：[https ://developers.google.com/earth/documentation/reference/interface_kml_ground_overlay-members](https://developers.google.com/earth/documentation/reference/interface_kml_ground_overlay-members)

出于某种原因，事件只是不会触发。这里有一个错误报告（我相信覆盖问题已合并到其中......） [https://code.google.com/p/earth-api-samples/issues/detail?id=123](https://code.google.com/p/earth-api-samples/issues/detail?id=123)

正如@lifeIsGood 在他的回答中所说，最好的解决方法是在 GroundOverlay 下放置一个具有相同几何形状的透明多边形。`0`然而，至少以编程方式将不透明度设置为 并不是一个好主意。[不透明度是实验性](http://earth-api-samples.googlecode.com/svn/trunk/examples/opacity.html)的，目前如果你`0`为一个对象设置它，那么`KmlMouseEvents`通常不会为那个对象触发。我相信插件在完全透明的情况下有效地从事件链中删除了该功能。无论如何，为了防止这种情况将不透明度设置为`.1`而不是`0`

处理多边形上的事件的更好方法是将 GroundOverlay 传递回处理程序。这样，在引发事件时，您可以在处理程序中同时引用 GroundOverlay 和事件数据，而无需任何全局变量或唯一 ID。例如

```
// attach the event to the transparent polygon discussed
google.earth.addEventListener(polygon, 'click', function(e) {
  handler(overlay, e)
});

// handle the event.
// sender is the overlay
// event is the real KmlMouseEvent from the polygon.
function handler(sender, event) {
  console.log(sender.getType());  //KmlGroundOverlay
  console.log(event.getTarget().getType());  //KmlPolygon
}; 
```

[我在这里做了一个工作示例。](http://jsfiddle.net/fraser/2bUXQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T16:00:28.150

由于 KmlGroundOverlays 尚未生成鼠标事件，另一种解决方法是从地球接收鼠标事件，然后确定鼠标是否在覆盖范围内（“命中测试”）。下面是使用 mouseMove 事件执行此操作的代码的起点。它生成两个重叠的覆盖（一个旋转）并将鼠标下的覆盖带到表面（通过操纵drawingOrder）。

它在自己的结构中维护有关叠加层的信息（而不是遍历 KML，这可能是可能的）。

我无法找到从 GE 获取旋转叠加层顶点位置的方法，因此旋转是在代码中使用笛卡尔近似值完成的。此代码可能会在极点或边界或大多边形上中断。

一旦知道顶点，在鼠标移动上运行的命中测试基于[如何确定 2D 点是否在多边形内？](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)

因此，此代码说明了以下方面的起始想法：

*   如何从叠加层合成鼠标事件（一种解决方法，直到 KML 叠加层可以生成鼠标事件）
*   如何近似旋转叠加层的顶点（找到叠加层的位置）
*   对叠加层进行命中测试（来自上述参考）
*   使用 drawOrder 在鼠标悬停时将重叠的叠加层带到表面

[在http://jsfiddle.net/pudkg/](http://jsfiddle.net/pudkg/)有一个演示

这是代码和html：

```
<!DOCTYPE html>

<html>
<head>

<script type="text/javascript" src="https://www.google.com/jsapi"> </script>

<script type="text/javascript">
var ge;
var overlays = [];   // record information about overlays (filled by 'addOverlay')
var drawOrder = 0;   // drawOrder value of topmost overlay
google.load("earth", "1");

function Point (lat, lon) {
  this.lat = lat;
  this.lon = lon;
}

function Overlay (groundOverlay, points, drawOrder) {
  this.overlay = groundOverlay;  // KML object
  this.points = points;          // array of Points (vertices of overlay)
  this.drawOrder = drawOrder;    // integer, higest displayed topmost
}
Overlay.prototype.hitTest = function (lat, lon) {   // return true if lat/lon is within overlay
    // Based upon https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test
    var isInside = false;
    var minLon = this.points[0].lon, maxLon = this.points[0].lon;
    var minLat = this.points[0].lat, maxLat = this.points[0].lat;
    for (var n = 1; n < this.points.length; n++) {
      var q = this.points[n];
      minLon = Math.min(q.lon, minLon);
      maxLon = Math.max(q.lon, maxLon);
      minLat = Math.min(q.lat, minLat);
      maxLat = Math.max(q.lat, maxLat);
    }
    if (lon < minLon || lon > maxLon || lat < minLat || lat > maxLat)
      return false;

    var i = 0, j = this.points.length - 1;
    for (i, j; i < this.points.length; j = i++)
      if ( (this.points[i].lat > lat) != (this.points[j].lat > lat) &&
          lon < (this.points[j].lon - this.points[i].lon) * (lat - this.points[i].lat) /
          (this.points[j].lat - this.points[i].lat) + this.points[i].lon )
        isInside = !isInside;
    return isInside;
  }

function init() {
  google.earth.createInstance('map3d', initCB, failureCB);
}

function initCB(e) {
  ge = e;
  ge.getWindow().setVisibility(true);

  var lat = 37.204193;
  var lon = -112.934429;
  var dlat = 0.003;
  var dlon = 0.005;
  var offset = 0.004;

  var la = ge.createLookAt('');  // position camera
  la.set(lat, lon, 0, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 30, 2000);
  ge.getView().setAbstractView(la);

  for (var i = 0; i < 2; i++)  // generate two overlays, overlapping; second one rotated
    addOverlay('http://www.google.com/logos/earthday08.gif',
        lat + dlat + offset*i, lat - dlat + offset*i,
        lon + dlon + offset*i, lon - dlon + offset*i, 30*i);
  // KML overlays can't (yet) generate mouse events, so look for events from globe
  google.earth.addEventListener(ge.getGlobe(), 'mousemove', function(event) {
    var lat = event.getLatitude();
    var lon = event.getLongitude();
    // show that a move event was received:
    document.getElementById('logMove').innerHTML = event.getLatitude();
    topmost = -1, zMax = 0;  // find topmost overlay
    for (var i = overlays.length - 1; i >= 0; i--)
      if (overlays[i].hitTest(lat, lon)) {  // if mouse is within overlays[i]
        document.getElementById('logHit').innerHTML = i + '; ' + overlays[i].drawOrder;
        if (overlays[i].drawOrder > zMax) {  // if this overlay is higher than any previous
          topmost = i;
          zMax = overlays[i].drawOrder;
        }
      }
    if ((topmost >= 0) && (overlays[topmost].drawOrder < drawOrder)) {
      // if in an overlay and it is buried, make it top-most
      overlays[topmost].overlay.setDrawOrder(++drawOrder);
      overlays[topmost].drawOrder = drawOrder;  // update local structure
    }
    document.getElementById('logOver').innerHTML = topmost + '; ' + zMax;
  });
}

function addOverlay(url, north, south, east, west, rotation) {
  var groundOverlay = ge.createGroundOverlay('');  // create overlay
  var icon = ge.createIcon('');
  icon.setHref(url);
  groundOverlay.setIcon(icon);
  var latLonBox = ge.createLatLonBox('');
  latLonBox.setBox(north, south, east, west, rotation);
  groundOverlay.setLatLonBox(latLonBox);
  groundOverlay.setDrawOrder(++drawOrder);
  ge.getFeatures().appendChild(groundOverlay);
  var points = [];  // figure out lat/lon of the corners of the overlay
  var sinTheta = Math.sin(rotation * Math.PI / 180.0);
  var cosTheta = Math.cos(rotation * Math.PI / 180.0);
  // rotation is about the center of the overlay; find midpoint:
  var midPoint = new Point((north + south) / 2, (west + east) / 2);
  // To do cartesian rotation, need to consider that the distance between
  // units of longitude diminish as one goes north, to zero at pole:
  var cosLat = Math.cos(midPoint.lat * Math.PI / 180.0);  // longitude compression factor
  west = (west - midPoint.lon) * cosLat, east = (east - midPoint.lon) * cosLat;
  north -= midPoint.lat, south -= midPoint.lat;
  // use cartesian rotation (good enough approximation for UI away from pole, boundaries)
  // after rotation, restore (expand) longitudes by compression factor
  points.push(new Point(midPoint.lat + west * sinTheta + north * cosTheta,
      midPoint.lon + (west * cosTheta - north * sinTheta) / cosLat));
  points.push(new Point(midPoint.lat + east * sinTheta + north * cosTheta,
      midPoint.lon + (east * cosTheta - north * sinTheta) / cosLat));
  points.push(new Point(midPoint.lat + east * sinTheta + south * cosTheta,
      midPoint.lon + (east * cosTheta - south * sinTheta) / cosLat));
  points.push(new Point(midPoint.lat + west * sinTheta + south * cosTheta,
      midPoint.lon + (west * cosTheta - south * sinTheta) / cosLat));
  overlays.push(new Overlay(groundOverlay, points, drawOrder));
}

function failureCB(errorCode) {
  alert("GE init fail");
}

google.setOnLoadCallback(init);
</script>
</head>

<body>

<div id=map3d style='height: 400px; width: 600px'></div>
<p>Mouse over the two overlays.  The one under the mouse should come to surface.</p>
<p>Latitude of mouse: <span id=logMove></span></p>
<p>Index of last overlay hit; its drawOrder: <span id=logHit></span></p>
<p>Index of topmost overlay; max drawOrder: <span id=logOver></span></p>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:38:06.907

你正试图做太多太快。首先，您需要将事件监听器添加到 GE Plugin

所以更换

```
google.earth.addEventListener(groundOverlay, 'click', function(e) { 
```

和

```
google.earth.addEventListener(ge.getGlobe(), 'click', function(e) { 
```

有时最好使用`ge.getWindow()`或`ge.getView()`取决于你在做什么

编辑：评论指出错误后

与其检测对 的点击`GroundOverlay`，不如创建一个`Polygon`覆盖完全相同的地形并检测对它的点击。

创建时`Polygon`，我会使其“不可见”，但将不透明度设置为零。然后就像我之前的回答一样，在确定是否被点击时使用 unique_id

将 unique_id 设置为多边形：在 KML 中，它看起来像这样

```
<Placemark id="unique_id">
<name>Polygon Name</name>
<styleUrl>....</styleUrl>
<Polygon>
  .....
</Polygon>
</Placemark> 
```

然后在 eventListener 中使用这种函数

```
 var obj = e.getTarget();
         if (obj.getType() == 'KmlPlacemark') {
         e.preventDefault();
         var placemark = obj;
         var placemark_id = placemark.getId();
              if (placemark_id == 'unique_id') {
              console.log("hello");
              }
    } 
```

我知道你可以通过`Polygon`这种方式检测到点击，所以这个想法应该适用于`GroundOverlays`. 不过我还没有测试过。如果您遇到问题，我建议将 的 设置为`<drawOrder>`高于`Polygon`的 a`<drawOrder>`的数字`GroundOverlay`

希望这有效！

# php - require_once 在 PHP 中不起作用

> ID：12956639
> 
> 赞同：-2
> 
> 时间：2012-10-18T14:08:52.730
> 
> 标签：php

如果我尝试在浏览器中打开这个简单的文件：

```
<?php

require_once 'classes/settings.php';

class Mysql {

    private $conn;

    function __construct() {

        $this->conn = new mysqli (DB_SERVER,DB_USER,DB_PASSWORD,DB_MEMBER) or die('There was a problem connecting to the database.');
        if ($this->conn->connect_errno) {
echo "Failed to connect to MySQL: (" . $this->conn->connect_errno . ") " . $this->conn->connect_error;
}
 //echo $mysqli->host_info . "\n";
    }

    function verify_Username_and_Pass($un, $pwd) {

        $query = "SELECT *
        FROM users
        WHERE username = ? AND password = ?
        LIMIT 1";

        if($stmt = $this->conn->prepare($query)) {

            $stmt->bind_param('ss',$un,$pwd);
            $stmt->execute();

            if($stmt->fetch()) {    
                $stmt->close();
                return true;
            }
        }
    }
}
 ?> 
```

我收到此警告错误：

```
Warning: require_once(classes/settings.php): failed to open stream: No such file or 
directory in /var/www/classes/Mysql.php on line 3 Fatal error: require_once(): Failed 
opening required 'classes/settings.php' (include_path='.:/usr/share/php:/usr/share/pear') 
in /var/www/classes/Mysql.php on line 3 
```

我不明白为什么，文件`setting.php`在那个文件夹里，那么问题出在哪里？

* * *

**编辑**：

如果我对另一个文件执行相同的操作，例如：

```
<?php 
require_once 'classes/settings.php';

 $host = "localhost";
 $user = "root";
 $pass = "pass";

 $databaseName = "membership";
 $tableName = "users";

 //--------------------------------------------------------------------------
 // 1) Connect to mysql database
 //--------------------------------------------------------------------------

 $con = mysql_connect($host,$user,$pass);
 $dbs = mysql_select_db($databaseName, $con);

 //--------------------------------------------------------------------------
 // 2) Query database for data
 //--------------------------------------------------------------------------
 $result = mysql_query("SELECT * FROM $tableName");            //query
 $array = mysql_fetch_row($result);                          //fetch result    

 //--------------------------------------------------------------------------
 // 3) echo result as json 
 //--------------------------------------------------------------------------
 echo json_encode($array);

?> 
```

这样，它可以正常工作，我不明白为什么文件和路径是正确的，因为在第二段代码中所有工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:11:59.547

您的脚本`var/www/classes/Mysql.php`已经*在*classes 目录中。您包含的文件位于同一目录中。删除`classes/`并使用：

```
require_once 'settings.php'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:12:01.690

由于您已经在 classes 文件夹中，因此您有两个选择

第一种选择是使用相对路径

`require_once 'settings.php';`

第二种选择是使用绝对路径

`require_once $_SERVER['DOCUMENT_ROOT'] . '/classes/settings.php'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:14:59.330

尝试使用`$_SERVER['DOCUMENT_ROOT']`

```
require_once ($_SERVER['DOCUMENT_ROOT'] . '/classes/settings.php'); 
```

# c++ - 如何更改捕获音频文件格式

> ID：12956640
> 
> 赞同：2
> 
> 时间：2012-10-18T14:08:53.530
> 
> 标签：c++, audio, format, capture

我正在使用 embarcadero c++；如何编辑捕获文件格式我需要制作 mp3 文件。

默认它使 ~2sec wma 文件的大小 ~ 331KB

# c# - C#中字符串到日期时间的转换

> ID：12956641
> 
> 赞同：1
> 
> 时间：2012-10-18T14:08:59.987
> 
> 标签：c#, sql, datetime

我想将字符串转换为日期时间。我收到一个错误`This is not a valid datetime`。

我要转换的字符串和代码如下。

```
string date1 = "9/13/2012 5:26:06 PM";
TimePart = DateTime.ParseExact(date1, "M/d/yyyy HH:mm:ss tt", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:10:10.713

我认为它应该`M/dd/yyyy h:mm:ss tt`在您的格式参数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:12:19.817

看起来你的格式是真的`M/d/yyyy h:mm:ss tt`。区别是`h`（12 小时制，只有所需的位数）而不是`HH`（24 小时制，前导 0 填充到 2 位数字）。

如果输入格式完全不同，您应该使用[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/6fw7727c.aspx)它，这样您就不必告诉它确切的格式。 `ParseExact`更快，并且要求它匹配指定的格式，这在您的演员阵容中可能更可取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:14:28.393

您需要使用小写`h`：

```
DateTime TimePart = DateTime.ParseExact(
                                date1,
                                "M/d/yyyy h:mm:ss tt",
                                CultureInfo.InvariantCulture);

Console.WriteLine(TimePart); // 09/13/2012 17:26:06 
```

大写“H”是 24 小时制，小写“h”是 12 小时制，带 AM/PM。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T14:14:31.257

您应该使用小写字母`h`表示 12 小时制（因为您有一个`AM/PM`指示符）。

此外，您应该只使用 one `h`，因为您没有`0`时间的前导，并且`hh`期望它。

一个有效的格式字符串：

```
"M/d/yyyy h:mm:ss tt" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T14:11:03.100

看起来与`HH`“5”不匹配。试试`h`。

# javascript - javascript正则表达式不适用于免费网络服务

> ID：12956643
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:09:13.933
> 
> 标签：javascript, regex

我有以下代码，我想开发一个像 rubular.com 这样的网络服务，但我不知道确切的正则表达式命令；

当使用 print_r 查看时，我希望像 php 一样返回结果，就像数组结构一样

应用程序也可在：[https ://github.com/WILL-I-AM/RegEx/blob/master/RegEx.php](https://github.com/WILL-I-AM/RegEx/blob/master/RegEx.php)

这是它破裂的地方，因为它不返回 preg_match_all

```
var regex = new RegExp(document.getElementById('regex').value, document.getElementById('regex_params').value);
    var result = regex.exec(document.getElementById('string').value); 
```

我如何在 php 中返回 preg_match_all 的结果？

应用代码：

```
<html>
<head>
<title>RegEx</title>
<script type="text/javascript">
function timeout_trigger() {
    document.getElementById('result').innerHTML = document.getElementById('regex').value + ' ' + document.getElementById('regex_params').value + ' ' + document.getElementById('string').value;
    var regex = new RegExp(document.getElementById('regex').value, document.getElementById('regex_params').value);
    var result = regex.exec(document.getElementById('string').value);
    document.getElementById('result').innerHTML = result;
}
document.onkeyup = KeyCheck;
function KeyCheck()
{
 if((document.getElementById('regex').value!='')&&(document.getElementById('regex_params').value!='')&&(document.getElementById('string').value!=''))
 {
  setTimeout('timeout_trigger()', 1000);
 }
 else document.getElementById('result').innerHTML = "null";
}
</script>
<style type="text/css">
table
{
background-color:#eeeeee;
}
input
{
height:40px;
padding:5px 5px 5px 5px;
background-color:#000000;
border:1px solid #ffffff;
color:#ffffff;
}
textarea
{
background-color:#000000;
border:1px solid #ffffff;
color:#ffffff;
padding:5px 5px 5px 5px;
}
</style>
</head>
<body bgcolor="#000000">
<table align="center" valign="top" width="1000px" cellpadding="5px" cellspacing="5pc" border="0" bgcolor="#ffffff">
<tr>
<td colspan="4">Your regular expression:</td>
</tr>
<tr>
<td width="5px"><b>/</b></td>
<td><input type="text" name="regex" id="regex" size="135" /></td>
<td width="5px"><b>/</b></td>
<td width="20px"><input type="text" name="regex_params" id="regex_params" size="5" /></td>
</tr>
<tr>
<td colspan="2">Your text string:</td>
<td colspan="2">Match result:</td>
</tr>
<tr>
<td colspan="2" valign="top"><textarea name="string" id="string" rows="10" cols="40"></textarea></td>
<td colspan="2" valign="top"><div id="result"></div></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:19:47.633

在 JavaScript 中匹配正则表达式只会返回第一个匹配项，但会返回所有子模式。

如果添加`g`标志，那么它将返回所有匹配项，但只有整个匹配文本和子模式会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:24:41.843

如果您正在搜索与 PHP 等效的 javascript [`preg_match_all($pattern, $subject, &$matches)`](http://php.net/manual/en/function.preg-match-all.php)，请使用[`.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)：

```
matches = subject.match(pattern); 
```

where`pattern`是带有*全局*标志的[正则表达式。](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T15:45:47.767

以下将给出与 rubular 相同的输出，它总是在 firefox 中添加 g 选项（全局）不知道其他浏览器

```
function timeout_trigger() {
    document.getElementById('result').innerHTML = 
        document.getElementById('regex').value + ' ' + 
        document.getElementById('regex_params').value + ' ' + 
        document.getElementById('string').value;
    var regex = new RegExp(document.getElementById('regex').value, 
        "g" + document.getElementById('regex_params').value);
    var groups=new Array();
    var matchCounter=1;
    var result=document.getElementById('string').value.replace(regex,
        function(a){
            var foundMatch=false;
            var argcount=1;
            var tmp=new Array();
            while(argcount<arguments.length-2){
                foundMatch=true;
                tmp[tmp.length]=argcount;
                tmp[tmp.length]=":";
                tmp[tmp.length]=arguments[argcount];
                tmp[tmp.length]="<br />";
                argcount++;
            }
            if(foundMatch){
                groups[groups.length]="Match " + matchCounter +":<br />"+
                tmp.join("");
                matchCounter++;
            }
            return "<font style='background-color:#ff0000'>" + a + "</font>";
        });
    document.getElementById('result').innerHTML = result + "<br />" + 
        groups.join("");
} 
```*

# java - Hibernate Criteria API 的问题（析取和合取）

> ID：12956645
> 
> 赞同：2
> 
> 时间：2012-10-18T14:09:21.457
> 
> 标签：java, hibernate, criteria-api

我在使用`Conjunction`s 和`Disjunction`s 时遇到问题。我的程序从 ui 接收任意数量的过滤器元素（每个表示 a `Criterion`），并打算将它们链接在一起作为`AND`or `OR`。

因此，例如，我可以有 3 个这样的元素（我`Criterion`用字母表示 a）：

```
a OR b AND c 
```

我的代码如下所示：

```
 // ...
    Criteria rootCriteria = createCriteria(entityClass);
    Conjunction conjunction = Restrictions.conjunction();
    Disjunction disjunction = Restrictions.disjunction();
    boolean isFirst = true;
    for (InternalFilterElement element : elements) {
        if (isFirst) {
            isFirst = false;
            rootCriteria.add(createCriterion(element.getFilterRelation(), element.getValue()));
        } else if (InternalFilterOperand.AND.equals(element.getInternalFilterOperand())) {
            addCriterionToJunction(conjunction, element);
        } else {
            addCriterionToJunction(disjunction, element);
        }
    }
    rootCriteria.add(disjunction);
    rootCriteria.add(conjunction);
    // ... 
```

我的问题是我总是得到`a AND b AND c`一些不必要的括号。

***我真正想知道的是我是否使用了错误的工具来完成这项任务？我如何混合`AND`和`OR`运营商？***

**编辑**

`InternalFilterOperand`基本上是一个`enum`包含`OR`和`AND`

`addCriterionToJunction`只需根据关系 (<, >, ...) 和值添加 a`Criterion`即可。`Junction`它没有任何副作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:11:39.557

通过使用以下代码，您可以在 Hibernate 中混合使用 AND 和 OR 运算符：

```
 Criteria rootCriteria = createCriteria(entityClass);
    rootCriteria.add(Restrictions.or(
            Restrictions.eq("a","a"),
            Restrictions.and(
                    Restrictions.eq("b","b"),
                    Restrictions.eq("c","c")
            )
    )); 
```

此示例产生以下输出：a=a OR b=b AND c=c 不带括号，您会得到合取和析取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:24:00.497

你让它变得比必要的更难。为什么不只使用以下内容：

```
Junction junction = 
    InternalFilterOperand.AND.equals(element.getInternalFilterOperand()) ? 
        Restrictions.conjunction() : 
        Restrictions.disjunction();
for (InternalFilterElement element : elements) {
    addCriterionToJunction(junction, element);
}
rootCriteria.add(junction); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T14:47:01.650

我几乎相信`InternalFilterOperand`您的设置不正确，`elements`因为其他一切看起来都正确。

请打印/调试`element.getInternalFilterOperand()`循环中的值作为第一个语句以验证和更正。

**编辑：**尝试`conjunction/disjunction`直接在`rootCriteria`

```
for (InternalFilterElement element : elements) {
  if (isFirst) {
      isFirst = false;
      rootCriteria.add(
                 createCriterion(element.getFilterRelation(), element.getValue()));
  }else if (InternalFilterOperand.AND.equals(element.getInternalFilterOperand())){
        //add debugg/sys out: adding conjunction
        System.out.println("adding conjunction");
        rootCriteria.add(Restrictions.conjunction().add(element));
  } else {
        //add debugg/sys out: adding disjunction
        System.out.println("adding disjunction");
        rootCriteria.add(Restrictions.disjunction().add(element));
  }
} 
```

# c# - 为使用 eap、apm 模式和 async/await 的长同步操作创建包装器

> ID：12956650
> 
> 赞同：1
> 
> 时间：2012-10-18T14:09:32.710
> 
> 标签：c#, task-parallel-library, async-await

假设我有一项服务将进行长时间、昂贵的同步操作，即

```
class ExclamationMarkService
{
    public string GetData(string param)
    {
        Thread.Sleep(5000);
        return param + "!";
    } 
} 
```

要通过 EAP 模式将其包装为异步，我可以这样做：

```
class ExclamationMarkServiceEAP
{
    public delegate void GetDataHandler(string data);
    public event GetDataHandler GetDataCompleted; 

    public void GetDataWorker(object param)
    {  
            var service = new ExclamationMarkService();
            string data = service.GetData((string)param); 

            if (GetDataCompleted != null)
            {
                GetDataCompleted(data);
            }
    }

    public void GetData(string param)
    {
        var thread = new Thread(GetDataWorker) {IsBackground = true};
        thread.Start(param);
    }
} 
```

与新的 async/await 运算符类似的事情可以通过这种方式完成：

```
class ExclamationMarkServiceTaskAsync
{
    public async Task<string> GetDataAsync(string param)
    {
        var service = new ExclamationMarkService();
        return await Task.Run(() => service.GetData(param));
    }
} 
```

用法：

```
 public static void CallExclamationMarkServiceEAP()
        {
            var service = new ExclamationMarkServiceEAP();
            service.GetDataCompleted += service_GetDataCompleted;
            service.GetData("hello EAP");
        }

        static void service_GetDataCompleted(string data)
        {
            Console.WriteLine(data);
        }

        public static async void CallExclamationMarkServiceTaskAsync()
        {
            var service = new ExclamationMarkServiceTaskAsync();
            var data = await service.GetDataAsync("hello TaskAsync");
            Console.WriteLine(data);
        }

        static void Main(string[] args)
        {
            CallExclamationMarkServiceEAP();
            CallExclamationMarkServiceTaskAsync();
            Console.Read();
        } 
```

在这两种情况下，我都设法将工作转移到后台。在 EAP 的情况下，通过显式启动一个线程。对于 async/await 版本，使用 Task.Run。

问题：

*   我的 ExclamationMarkService 的 APM 实现会是什么样子？
*   给定 EAP 和 APM 版本，如何使用 Task 类的现有方法（Task.Factory.StartNew / Task.Factory.FromAsync 等）来包装它们，以便它们可以与 async/await 关键字一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:13:45.103

不受 IO 限制的长时间运行的同步操作不属于 ThreadPool。在 ThreadPool 中运行此类操作会使您面临饥饿的风险，在这种情况下，线程池无法以足够快的速度启动线程来响应依赖它的许多其他 API 的需求。

如果您想运行一些冗长的东西，请在您自己的线程上运行它，如果需要在某些 UI 中显示，请小心将结果编组回正确的上下文。

因此，您的第一种方法似乎更合适。

另一方面，TPL 提供了提示任务长时间运行的机会，并允许系统决定运行它的最佳位置。它很简单：

```
Task.Factory.StartNew(someSyncAction, TaskCreationOptions.LongRunning) 
```

`StartNew`返回一个任务。你可以等待它。

# ruby-on-rails - 乘客记录和 STDOUT

> ID：12956651
> 
> 赞同：1
> 
> 时间：2012-10-18T14:09:35.840
> 
> 标签：ruby-on-rails, passenger

在开发 Rails 应用程序时，我通常将`thin`其用于我的开发环境。我喜欢`thin`，因为日志不是直接在 STDOUT 上输出，而是写在`log/{development,production}.log`.

有时我只是在控制器的操作中插入一个`p <some object>`，只是为了快速查看某个对象并调试我的代码。我知道我可以使用 rails loggin api，但我不想在每个请求都获得 1000 多条登录行时这样做。

在我过去使用瘦的生产服务器上（我将 apache 配置为我的`thin`实例的代理）。在该`log`目录中`thin`创建了一个名为的文件`thin.log`，您可以在其中看到`thin`STDOUT 输出。

但是在新的生产服务器中，我开始在我的生产环境中使用Passenger。`log/production.log`已创建，我可以一直看到日志。但我真正想做的是在某个地方看到 Passaneger 的 STDOUT 输出，得到类似的东西`log/passenger.log`（就像`thins`那样）。

我已经在谷歌上搜索过这个，但我在那里找不到任何有用的东西。有没有办法可以存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:08:05.303

似乎没有人知道这是否可能，我在[这里](http://bigtablet.wordpress.com/2009/06/17/redirect-stdout-and-stderr-to-log-in-passenger/)找到了适合我的东西。

# javascript - “？”是什么意思？和“：”符号在一行java代码中是什么意思？

> ID：12956652
> 
> 赞同：-1
> 
> 时间：2012-10-18T14:09:46.760
> 
> 标签：javascript, processing

> **可能重复：**
> [什么是问号“？” 和冒号“:”运算符用于？](https://stackoverflow.com/questions/10336899/what-is-a-question-mark-and-colon-operator-used-for)
> [java代码中的问号](https://stackoverflow.com/questions/12434021/question-mark-in-java-code)

我正在为 RBG 到 HSV 转换器编写代码。我有这条线：

```
var d = (r==minRGB) ? g-b : ((b==minRGB) ? r-g : b-r); 
```

我真的不明白什么是“？” “：”在这里表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:12:14.777

这是创建条件的简短方法：

```
 Condition ? Statment1 : Statement2; 
```

方法

```
 If (Condition) {Statement1} else {Statement2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:10:18.773

这在java中称为三元运算符。

基于 [java教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

> 另一个条件运算符是 ?:，它可以被认为是 if-then-else 语句的简写（在本课的控制流语句部分讨论）。该运算符也称为三元运算符，因为它使用三个操作数。

如果第一个表达式的结果为真，则将第二个操作数赋值为值，否则将第三个操作数赋值为值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:11:47.253

它的`Ternary Operator`：

```
C = condition? A : B 
```

相当于

```
 if (condition){
  C=  A;
 } else{
   C=  B;
 } 
```

它还支持嵌套 ie `C = condition1? A : condition2?D:E`，相当于

```
 if (condition1){
   C=  A;
 } else if (condition2){
   C=  D;
 } else{
   C= E;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:11:47.457

它的意思是

```
if (r==minRGB)
  d = g-b
else
  if(b==minRGB)
     d=r-g
  else
    d=b-r 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:11:11.283

它被称为**`ternary operator`(?:)** :-

```
System.out.println(condition? value1 : value2); 
```

上面的表达式计算如下： -

```
if (condition) {
    System.out.println(value1); 
} else {
    System.out.println(value2);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T14:11:48.020

在基于 c 的语言中，这意味着： ? ：

基本上，它是 if-else 的简写。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T14:12:27.083

它的工作原理类似于 if 而不是 else

```
if (r==minRGB)
    d = g-b;
}else{
    if  (b==minRGB)
    {
        d = r-g;
    }else{
        d = b-r;
    }
} 
```

# python - Scrapy ：根据下载图像的 url 从下载的图像中创建文件夹结构

> ID：12956653
> 
> 赞同：4
> 
> 时间：2012-10-18T14:09:47.130
> 
> 标签：python, scrapy

我有一组定义网站结构的链接。从这些链接下载图像时，我想同时将下载的图像放置在类似于网站结构的文件夹结构中，而不仅仅是重命名它（如[Scrapy image download how to use custom filename](https://stackoverflow.com/questions/6194041/scrapy-image-download-how-to-use-custom-filename)中回答的那样）

我的代码是这样的：

```
class MyImagesPipeline(ImagesPipeline):
    """Custom image pipeline to rename images as they are being downloaded"""
    page_url=None
    def image_key(self, url):
        page_url=self.page_url
        image_guid = url.split('/')[-1]
        return '%s/%s/%s' % (page_url,image_guid.split('_')[0],image_guid)

    def get_media_requests(self, item, info):
        #http://store.abc.com/b/n/s/m
        os.system('mkdir '+item['sku'][0].encode('ascii','ignore'))
        self.page_url = urlparse(item['start_url']).path #I store the parent page's url in start_url Field
        for image_url in item['image_urls']:
            yield Request(image_url) 
```

它创建了所需的文件夹结构，但是当我深入文件夹时，我发现文件已错放在文件夹中。

我怀疑它正在发生，因为“get_media_requests”和“image_key”函数可能正在异步执行，因此“page_url”的值在“image_key”函数使用之前会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:26:47.360

`self`您绝对正确，异步 Item 处理可以防止在管道中使用类变量。您必须将路径存储在每个请求中并覆盖更多方法（未经测试）：

```
def image_key(self, url, page_url):
    image_guid = url.split('/')[-1]
    return '%s/%s/%s' % (page_url, image_guid.split('_')[0], image_guid)

def get_media_requests(self, item, info):
    for image_url in item['image_urls']:
        yield Request(image_url, meta=dict(page_url=urlparse(item['start_url']).path))

def get_images(self, response, request, info):
    key = self.image_key(request.url, request.meta.get('page_url'))
    ...

def media_to_download(self, request, info):
    ...
    key = self.image_key(request.url, request.meta.get('page_url'))
    ...

def media_downloaded(self, response, request, info):
    ...
    try:
        key = self.image_key(request.url, request.meta.get('page_url'))
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-06T20:05:52.830

这个scrapy管道扩展提供了一种将下载的文件存储到文件夹树中的简单方法。

你必须安装它：

```
pip install scrapy_folder_tree 
```

然后，在您的配置中添加管道：

```
ITEM_PIPELINES = {
    'scrapy_folder_tree.ImagesHashTreePipeline': 300
} 
```

免责声明：我是[scrapy-folder-tree的作者](https://github.com/sp1thas/scrapy-folder-tree)

# dataset - Extent allocation in sequential data sets

> ID：12956657
> 
> 赞同：5
> 
> 时间：2012-10-18T14:10:08.713
> 
> 标签：dataset, mainframe, jcl

I am new to mainframe world and trying to work it up but unable to get one thing that how are extents allocated in data sets.

And please can someone explain it using an example or answer this question

Suppose there is a sequential data sets where primary and secondary are both allocated 1 track. How many times can this data set request for extent ? Is the extent allotted to both primary and secondary or only secondary?

And one last question

How does setting or not setting guaranteed space attribute in storage class effects the no of extents that can be requested ?

Thank You

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:02:38.977

**Sequential Data Allocation**

A sequential data set with primary and secondary of 1 track each will be able to have 16 extents if it is allocated with one volume

```
//stepname EXEC PGM=IEFBR14  
//ddname   DD   DSN=dataset,
//     DISP=(NEW,CATLG),   
//     UNIT=SYSALLDA,SPACE=(TRK,(1,1))
/* 
```

The above will allocate a dataset that can be 16 tracks big if extend by being written too.

If you replace SYSALLDA with (SYSALLDA,2) it will be able to use 2 volumes so can be 32 tracks of size across 2 volumes

The number of volumes can be overridden by the DATACLASS which can be assigned to an SMS managed datasets

**Guaranteed space**

Guaranteed space allows you to specify the actual volumes that a dataset will be allocated on when the allocation is SMS controlled, normally SMS will pick the volumes based on the ACS routines

The below jcl will allocate dataset on volume VOL001 if storage class has the DCGSPAC attribute

```
//stepname EXEC PGM=IEFBR14  
//ddname   DD   DSN=dataset,
//     DISP=(NEW,CATLG),vol=ser=VOl001,   
//     STORCLAS=GSPACE,
//     UNIT=SYSALLDA,SPACE=(TRK,(1,1))
/* 
```

Normally the SMS routines are coded so that only specific users or jobs are allowed to use storage classes with Guaranteed Space

[Explanation of Storage Class](http://www.lascon.co.uk/zOS-DFSMS-Storage-Class.php)

# ruby-on-rails - 控制器对延迟作业的操作

> ID：12956661
> 
> 赞同：8
> 
> 时间：2012-10-18T14:10:11.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, background-process

我正在上传一个制表符分隔的文档并在控制器中进行处理。一切正常，但处理大文件可能需要一些时间。我想把它移到一个delay_job，我在我的应用程序的其他地方工作，但由于它在控制器中，不能以同样的方式调用。

该表单调用 process_file 操作，该操作又调用 salesupload 操作。我应该如何把它变成后台工作？

```
class SalesController < ApplicationController

  def salesupload(file)
    uploaded_io = file.read
    numrows = "uploaded_io.size"
    FasterCSV.parse(uploaded_io, {:headers => true, :col_sep =>"\t"}).each do |row_data|
        full, upc, _discard, isrc = row_data[26].match(/^([^_]+)(_(.+))?/).to_a
          new_record = AppleSale.new(
              'provider' =>  row_data[0],
              'provider_country' => row_data[1],
              'vendor_identifier' => row_data[2]
          )
      new_record.save
    end
  end

    def process_file
        file = params[:apple_sale][:tsv_file]
        salesupload(file)
    end

end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T14:22:34.570

我发现当我必须这样做时，控制器中定义的方法必须是类方法。我不记得为什么会这样，我认为这与有一个更明确的接收器有关。所以我要做的就是让 salesupload 方法成为一个类方法，然后调用`.delay`它。

```
def self.salesupload(files)
  # code
end

def process_file
  file = params[:apple_sale][:tsv_file]
  SalesController.delay.salesupload(file)
  head :no_content
end 
```

你应该很高兴去！我还`process_file`通过 AJAX 调用了我的原始方法（在本例中），然后我附加了`head :no_content`它以便它返回一些东西而不需要重定向或任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-09T00:06:56.323

我写了一个名为[delayed_action](https://github.com/mvcodeclub/delayed_action)的gem来做到这一点。

在这种情况下，你会写 `delayed_action [:sales_upload]`

就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:28:01.187

我想您应该将此代码移动到模型或单独的类中（例如在 lib 文件夹中）。但这只是组织和最佳实践的问题。

关于在后台运行此代码，您有很多选择。如果你想使用delayed_job，我想你应该观看这个截屏视频： [http ://railscasts.com/episodes/171-delayed-job](http://railscasts.com/episodes/171-delayed-job)

但基本上，在设置延迟作业后，您只需使用 send_later(:process_file) 之类的东西来告诉在后台运行该项目。这非常简单，您的命令和数据结构将保存在数据库表中，稍后一个单独的进程可以执行它。我想在观看 railscast 之后，您会得到答案；）

# python - 如何在 python 脚本中将文本文件转换为 pdf 文件？

> ID：12956662
> 
> 赞同：2
> 
> 时间：2012-10-18T14:10:12.013
> 
> 标签：python, pdf, text

我有一个报告文本文件，它是由我的 python 脚本创建的。我想从 python 脚本中提到的文本文件创建 pdf 文件。搜索后，我遇到了 reportlab 库，但在同一库的教程中，它显示创建具有手动编写内容的 pdf。但是我想将我的文本文件转换为 pdf 文件。

有没有其他选择，任何脚本？

先感谢您。

# java - 创建带有文本悬停的 Eclipse 插件

> ID：12956666
> 
> 赞同：3
> 
> 时间：2012-10-18T14:10:20.837
> 
> 标签：java, eclipse-plugin

我想做一个`Eclipse plugin`（文本编辑器）。我会“阅读”光标下的文本并显示取决于文本的动态生成悬停。现在我遇到的问题是我不知道如何阅读文本并“添加”悬停。

这是我的第一次`Eclipse Plugin`，所以我很高兴我能得到每一个小费。

编辑：

我想将它集成到默认`Eclipse` `Java`编辑器中。我曾尝试`plugin`使用编辑器模板创建一个新模板，但我认为这是错误的方法。

最后编辑：

PKeidel 的答案正是我正在寻找的:)

谢谢 PKeidel

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:52:38.230

您的错是您创建了一个全新的编辑器，而不是现有 Java 编辑器的插件。插件将通过 激活`extension points`。在你的情况下，你必须使用`org.eclipse.jdt.ui.javaEditorTextHovers` [更多](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_jdt_ui_javaEditorTextHovers.html)......

```
<plugin>
   <extension
         point="org.eclipse.jdt.ui.javaEditorTextHovers">
      <hover
            activate="true"
            class="path.to_your.hoverclass"
            id="id.path.to_your.hoverclass">
      </hover>
   </extension>

</plugin> 
```

class 参数保存您的 Class 的路径`implements IJavaEditorTextHover`。

```
public class LangHover implements IJavaEditorTextHover
{
    @Override
    public String getHoverInfo(ITextViewer textviewer, IRegion region)
    {
         if(youWantToShowAOwnHover)
           return "Your own hover Text goes here"";
         return null; // Shows the default Hover (Java Docs)
    }
} 
```

应该这样做;-)

# javascript - 如何防止网站中笨拙的文本选择行为

> ID：12956667
> 
> 赞同：2
> 
> 时间：2012-10-18T14:10:23.637
> 
> 标签：javascript, html, web

我注意到在某些网站中，文本选择的行为有些笨拙：用户单击并按住左键，然后将其移向他/她要选择的文本的方向，然后将整个文本部分放在运动的另一侧被选中。

这不是到处都会发生的事情，而且很难描述，所以我将提供一个例子。我发现这篇[非常酷的文章](http://sltaylor.co.uk/blog/ignoring-internal-rewrites-in-htaccess/)。检查它的最后一行：

```
ENV:REDIRECT_STATUS is my new best friend. 
```

如果我单击该行的左侧，并向右拖动一点（例如，直到`:`），我希望`ENV:`选择该行的部分。相反，被选中的是这一行的剩余部分 ( `REDIRECT_STATUS is my new best friend.`)**加上每个评论和侧边栏！**我使用的是 Firefox 15.0.1，但已经注意到 Chrome 和 Internet Explorer 中的这种行为。

所以我想知道的是，为什么会发生这种情况，以及需要做些什么来防止这种故障。

PS：请原谅我在这个问题上不清楚；我发现这个问题真的很难用语言来描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:33:18.033

这一切都与 HTML 标记和 CSS 有关。浏览器倾向于以与在 HTML 中出现的顺序相同的顺序选择文本。添加像 Tim Down 建议的填充可以帮助用户选择文本，因为它在文本选择中提供了一点误差。

# javascript - 如何在 node.js 中获取所有 memcached 数据？

> ID：12956669
> 
> 赞同：2
> 
> 时间：2012-10-18T14:10:33.110
> 
> 标签：javascript, node.js, memcached, express

首先，我的目的是当用户关闭浏览器时，用户会话数据应该过期。现在的问题是，我的服务器需要 memcached 才能正常工作。因此，我想从已关闭浏览器的 memcached 中删除该特定用户会话。我不想清除所有 memcached，以便剩余用户的会话仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:16:37.723

在 Memcached 中，除非您想使用[一些解决方法](http://www.darkcoding.net/software/memcached-list-all-keys/)，否则无法列出特定命名空间中的所有键，我不建议您在生产中使用。

一种替代方法是将所有与用户相关的 Memcached 键存储在一个集合中（也存储在 memcached 中）。设置密钥是使用用户 id 生成的，因此您始终可以提前知道它的值，并且可以轻松检索它。

用户会话结束后，您可以获取包含用户密钥列表的项目，然后删除每个密钥。请记住，包含密钥列表的密钥的到期时间应大于任何特定于项目的项目。

另外值得一提的是，[Redis](http://redis.io/)默认支持 key 迭代和 set，你可以配置它像 Memcached 一样工作。你可能想试一试。

# mysql - mysql有非对称加密能力吗？

> ID：12956674
> 
> 赞同：4
> 
> 时间：2012-10-18T14:10:47.897
> 
> 标签：mysql, encryption, public-key-encryption, private-key, encryption-asymmetric

我的问题很简单 - MySQL 中是否有用于非对称（公钥/私钥）加密的内置功能，如 AES_ENCRYPT / AES_DECRYPT？

可悲的是，我只找到涉及 PHP（在 php 中加密它）的答案，以及类似的东西。我想把它保存在 MySQL 中，因为整个应用程序逻辑都是由程序处理的——我想通过引入外部语言来解决这个问题来避免破坏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:09:16.203

MySQL 中没有 RSA 加密功能。这是一个奇怪的用例，所以 MySQL 的人可能认为不适合实现它

您必须在应用程序层执行 RSA 操作，并将结果传递到您的程序中，除非您想自己在 MySQL 中实现 RSA（我真的一点建议都没有）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T21:11:46.127

你可以做的是这样的；使用他们的 pub/priv 密钥在多个用户之间创建一个共享密钥，然后使用该共享密钥作为 AES 对称密钥来解锁 mysql 中的数据。

这意味着您可以方便地利用 mysql 的内置 AES 加密功能，同时仍然保持安全数据，因为您永远不会知道共享的秘密。

例如： ![爱丽丝/鲍勃共享秘密/彩色油漆](../Images/2508967c69fb06049b928e021aae1e25.png)

您也可以尝试[在此处阅读此输入链接描述](http://maths.straylight.co.uk/edb_files/crypto_colloquium.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T06:27:53.723

我非常同意@Peter Elliott。但作为答案的一部分，我想补充一点，MySQL Enterprise Encryption 提供了这种设施，例如：

MySQL Enterprise Encryption 为 DBA 和开发人员提供了他们所需的工具：

*   非对称公钥加密 (RSA) 非对称私钥
*   解密 (RSA) 生成公钥/私钥 (RSA, DSA, DH) 导出
*   来自公钥和私钥对 (DH) 的对称密钥数字签名
*   数据（RSA、DSA）验证数据签名（RSA、DSA）验证数据
*   真实性（RSA、DSA）

有关更多信息，您可以访问[MySQL Enterprise Encryption](https://www.mysql.com/products/enterprise/encryption.html)，希望对您有所帮助。

# macos - Mac 应用程序，NSDocument 窗口未出现在窗口菜单中

> ID：12956676
> 
> 赞同：2
> 
> 时间：2012-10-18T14:10:57.567
> 
> 标签：macos, nswindow, nsdocument, mac-app-store, nsmenuitem

我继续在另一个人制作的应用程序上工作。它在相关部分看起来与您在启动新项目时获得的基于标准 NSDocument 窗口的应用程序相同（其中 Window 菜单正常工作，即 NSDocument 出现在 Window 菜单中，标题为 Untitled）。

但是在这个应用程序中，窗口菜单或应用程序似乎发生了一些事情，这以某种方式断开了这种自动行为与 NSDocument 的连接。

需要相当大量的工作才能将这个完成、提交和后来（被审阅者）拒绝的应用程序放到一个新项目中。

我正在寻找经验丰富的 Mac 应用程序开发人员：

***NSDocument 需要满足哪些要求/依赖项才能正常显示在 Window 菜单中？***

我检查了`MyDocument.h/.m`（它们是标准存根，几乎没有变化），以及属性和插座/代表`MyDocument.xib`，`MainMenu.xib`（*似乎*没有丢失）和`-Info.plist`（与新项目应用程序的相同）。**我对 XCode 和 Cocoa Touch 有经验，但对 Cocoa 还没有。**

如果您能帮助我克服最后一个障碍，我愿意检查并编写测试代码并提供快速反馈:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T20:57:00.597

我刚刚遇到了同样的问题，并通过创建对窗口的引用来解决它，并在加载笔尖时显示窗口：

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];
    [window makeKeyAndOrderFront: self];
} 
```

我仍然不知道问题的原因。如果尝试后它不起作用，请尝试调试它。您可能会发现真正的原因，例如窗口可能已经被释放，因为没有任何强引用（甚至在 NSApp 中也没有）。

# qt - Qt 模型/视图架构的实现 - 使用文件夹分隔文件？

> ID：12956681
> 
> 赞同：1
> 
> 时间：2012-10-18T14:11:09.393
> 
> 标签：qt, model-view

我正在做关于 Qt/OML 移动应用程序项目的最后一年项目。我被要求在上面使用架构，因为我选择了 Qt，所以我使用模型/视图和委托。

以前我只使用 ASP.NET 的三层架构，我将数据库类文件（数据层）、业务逻辑文件（应用程序层）和表示层文件分成 3 个文件夹。

在 Qt 中怎么样？我必须分离那些模型、视图和委托文件吗？在[这里的示例](http://get.qt.nokia.com/developerguides/qtquicksymbian/ProgrammingQtQuick4SymbianHarmattanDevices.pdf)中，我看到委托文件被分开，而模型和视图放在一个文件中（main.qml）。

# jsf - JSF / PrimeFaces 从以主从方式排列的两个 p:dataTables 中选择两行失败，请求范围

> ID：12956683
> 
> 赞同：1
> 
> 时间：2012-10-18T14:11:14.130
> 
> 标签：jsf, primefaces

我偶然发现了一个**JSF** / **PrimeFaces**问题，尽管我设法通过更改支持 bean 的范围来使其工作，但我仍然想了解为什么它在第一种情况下失败。因此，这是一个重现该行为的缩小示例：

我们有一个非常简单的**xhtml**页面，它在一个表单中显示两个**p:dataTables**，一个在另一个之下。顶部**p:dataTable**显示数字，第二个显示除数。所以我们有一个经典的主从视图。一个按钮允许我们更新页面，因此当从顶部表格中选择一个新数字时，我们可以在底部表格中查看其除数：

```
<h:form id="NUMBERS-form">
    <p:dataTable id="dt1" var="item" value="#{numbersController.divisorSets}"
                 rowKey="#{item}" rows="10" selection="#{numbersController.selectedDivisorSet}"
                 selectionMode="single">
        <p:column>
            #{item}
        </p:column>
    </p:dataTable>

    <p:dataTable id="dt2" var="item" value="#{numbersController.divisors}"
                 rowKey="#{item}" rows="10" selection="#{numbersController.selectedDivisor}"
                 selectionMode="single">
        <p:column id>
            #{item}
        </p:column>
    </p:dataTable>
    <p:commandButton id="Update"     ajax="true" update=":NUMBERS-form"
                     action="#{numbersController.foo}" value="update"/>
</h:form> 
```

支持 bean 定义了两个只读集合：一个用于*DivisorSets*（即我们要查找其除数的数字），另一个用于当前所选数字的除数。它还有两个字段和属性获取器/设置器，用于当前选定的数字和该数字的当前选定除数：

```
@ManagedBean
@ViewScoped // if this is toggled to @RequestScoped it stops working
public class NumbersController implements Serializable {
    private static final Logger l = Logger.getLogger(NumbersController.class.getName());

    public List<DivisorSet> getDivisorSets() {
        List<DivisorSet> retValue = new ArrayList<DivisorSet>();
        for (int i = 10 ; i < 20 ; i++)
            retValue.add( new DivisorSet(i) );
        return retValue;
    }

    public List<Integer> getDivisors() {
        if (selectedDivisorSet != null)
            return selectedDivisorSet.getDivisors();
        else return null;
    }

    private DivisorSet    selectedDivisorSet;
    // getter and setter ...

    private Integer   selectedDivisor;
    // getter and setter ...

    public String foo() { return null; }
} 
```

首次加载页面时，仅填充顶部的**p:dataTable 。**当顶部表格的一行被选中并按下**p:commandButton**时，该数字的除数将在底部**p:dataTable**上获取。到目前为止，一切都很好。问题来了：当从顶部表中选择一行并且从底部表中选择一行并按下**p:commandButton**时，我在设置器中的日志记录消息显示：

1.  当支持 bean 的范围设置为**查看**两个选定的数字时，在**更新模型值**阶段设置正确
2.  当 backing bean 的范围设置为**Request** only the selected number from the top table 正确设置时，**selectedDivisor**字段（与底部**p:dataTable**链接）的设置器携带值 0 （或 null 在其他我用不同的类尝试过的例子）。

请注意，在这个简单的示例中没有业务逻辑需要从底部的**p:dataTable**中选择一个数字——这只是我在真实上下文中遇到的同一问题的缩小版本。任何人都可以解释 JSF 生命周期中导致在视图为**RequestScoped**（而不是成功的**ViewScoped**）时未正确设置底部表格选定值的步骤吗？

# sml - 在标准 ML 中，如何捕获“错误：未绑定的变量或构造函数：foo”之类的异常？

> ID：12956684
> 
> 赞同：4
> 
> 时间：2012-10-18T14:11:14.100
> 
> 标签：sml, ml

我有一个新手问题：在标准 ML 中，您如何捕获“错误：未绑定的变量或构造函数：foo”之类的异常？

我尝试使用以下程序来做到这一点：

```
(foo())
handle Error msg => (); 
```

但 REPL 抱怨：“错误：非构造函数应用于模式中的参数：错误”

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:03:11.850

首先它是`handle Error => ...`（或`handle error => ...`或`handle TheSpecificExceptionIWantToCatch => ...`），而不是`handle Error msg => ...`。您只能编写`handle Foo msg => ...`if`Foo`是带有一个参数的构造函数，正如错误消息所暗示的那样，`Error`它不是。

其次“未绑定变量”是编译错误，不是异常，所以无法捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-02T04:55:55.643

只是添加到现有的答案。我注意到 Chao 试图根据它收到的尝试执行代码的消息来“捕捉”一个错误。REPL 中的真正异常消息在该行之后立即报告`val it = () : unit`，表明它发生在解释阶段之后。此外，在新泽西 v110.76 解释器的标准 ML 中，它在执行时出现如下消息：

`uncaught exception ExceptionName raised at: filename.sml:linei.columni-linej.columnj`

因此，如果没有看到这些明确的消息，应该*会*发出警报，即没有引发异常，没有双关语的意思。由于问题是如何捕获异常而不是错误，因此我认为必须简要解释异常的机制：

1.  在代码中的某处，在将使用它的词法范围内，必须定义异常绑定： `exception MyException`或`exception MyException2 of String`
2.  在表达式中的某处发现了一个值得中断正常控制流的情况，因此使用以下原语来做到这一点： `raise MyException`或`raise (MyException2("Error in foo"))`
3.  可以使用句柄表达式捕获流的异常中断，该句柄表达式在异常构造函数上使用模式匹配并提交和替代表达式进行评估。在这种情况下，表达式`e1`引发异常并且处理程序返回表达式 e2：`e1 handle MyException => e2`

有关如何为复杂函数编写干净优雅的异常处理程序以及恢复执行（如果需要）的更多详细信息，请阅读[Robert Harper 的在线注释 Programming in Standard ML 的这一页](https://www.cs.cmu.edu/~rwh/introsml/core/exceptions.htm)

# networking - TCP的重传规则是什么？

> ID：12956685
> 
> 赞同：56
> 
> 时间：2012-10-18T14:11:18.293
> 
> 标签：networking, tcp

关于 TCP的[Wikipedia 文章](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)指出传输 TCP 段的 IP 数据包有时会丢失，并且 TCP“请求重新传输丢失的数据”。

请求重传丢失数据的具体规则是什么？以什么时间频率执行重传请求？数字有上限吗？当 IP 数据包丢失时，客户端是否有功能向服务器指示忘记整个 TCP 段丢失的部分？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-18T14:17:11.427

**请求重传丢失数据的具体规则是什么？**

接收方不请求重传。发送方等待发送给客户端的字节范围的 ACK，如果未收到，则在特定时间间隔后重新发送数据包。这是[**ARQ**](http://en.wikipedia.org/wiki/Automatic_repeat_request)（自动重复请求）。有几种实现方式。

```
Stop-and-wait ARQ
Go-Back-N ARQ
Selective Repeat ARQ 
```

在[**RFC 3366**](http://tools.ietf.org/rfc/rfc3366.txt)中有详细说明。

**以什么时间频率执行重传请求？**

标准不强制执行重传次数和尝试次数。它由不同的操作系统以不同的方式实现，但方法是固定的。（也许是指纹操作系统的一种方法？）

超时是根据 RTT（往返时间）时间来衡量的。但这并不是经常需要的，因为当接收到**3 个重复的 ACK**时会启动快速重传。

**数字有上限吗？**

就在这里。经过一定次数的重试后，主机被认为“宕机”，发送方放弃并断开 TCP 连接。

**当 IP 数据包丢失时，客户端是否有功能向服务器指示忘记整个 TCP 段丢失的部分？**

关键是可靠的通信。如果您希望客户端忘记某些部分，那么您一开始就不会使用 TCP。（也许是UDP？）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T14:18:10.667

没有固定的重传时间。简单的实现会估计 RTT（往返时间），如果在 2 倍的时间内没有收到发送数据的 ACK，那么它们会重新发送。

然后，他们将等待时间*加倍*，如果再次没有回复，则再次重新发送。冲洗。重复。

更复杂的系统可以更好地估计 ACK 应该花费多长时间，并准确猜测哪些数据已经丢失。

底线是对于何时重新传输没有硬性规定。这取决于实施。 *所有*重传都是由发送者根据接收者没有响应而单独触发的。

TCP**从不**丢弃数据，所以不，没有办法表明服务器应该忘记某个段。

# asp.net-mvc - MVC Ajax Begin Form 保存然后在视图中使用保存后返回的ID

> ID：12956690
> 
> 赞同：0
> 
> 时间：2012-10-18T14:11:32.857
> 
> 标签：asp.net-mvc, razor

我有一个包含两个实体（用外键链接）的模型，每个实体都有自己的选项卡，使用局部视图呈现。每个选项卡也有自己的 Ajax 表单。当我在第一个选项卡中保存实体时，我现在有了要返回到两个部分视图的实体的 ID，以便能够保存第二个实体或保存对第一个实体的更新。我无法将此值返回给视图。

该模型：

```
public class Entity1
{ 
    int ID1  { get; set; }
    [Some attributes]
    string field1 { get; set; }
}
public class Entity2
{ 
    int ID2  { get; set; }
    [Some attributes]
    string field2 { get; set; }
}
public class MyModel
{ 
    Entity1 entity1 = new Entity1()
    Entity2 entity2 = new Entity2()
} 
```

控制器：

```
public class MyController : Controller
{
[HttpGet]
public ActionResult Index()
{
    var model = new MyModel();
    model.entity1.ID1 = 0;
    model.entity2.ID2 = 0;
    return PartialView(model);
}

[HttpPost]
public ActionResult Index(MyModel model)
{
    SaveMyModel(model)
    // have tried ModelState.Clear(); here
    return PartialView(model);
}
} 
```

最后是两个部分视图之一

```
@model MyModel
@using (Ajax.BeginForm("Index", "Home",
        new AjaxOptions
        {
            HttpMethod = "POST"
        }
        ))
    {
    @Html.LabelFor(m => m.Entity1.field1)
    @Html.EditorFor(m => m.Entity1.field1)
    @Html.HiddenFor(m => m.Entity1.ID1)
    <div class="form-actions">
        <button type="submit">
        Next section</button>
    </div>
    } 
```

我的保存函数根据 ID1 的值插入或更新。

问题是 ID1 的值始终保持为零，并且隐藏字段在返回时不会刷新。我尝试单步执行剃刀刷新，并且正确的 ID 被发送到视图。

以上是一个简化，但它确实封装了问题。

先感谢您。

## 更新

如果出现以下情况，我可以让它工作：

*   我的模型中只有一个实体
*   我`ModelState.Clear();`在保存之前添加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:17:19.693

如果您打算在 POST 控制器操作中修改它，则需要从 ModelState 中删除该值：

```
ModelState.Remove("Entity1.ID1"); 
```

这样，您无需使用 ModelState.Clear 清除整个 ModelState，而只需清除您实际修改的值。这样，Html 助手将从您的模型中选择值，而不是 ModelState 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T14:58:39.237

我在我的项目中遇到了同样的问题。我解决它的唯一方法是在 id 为 0 时不包含它。这样当它回来时，id 被替换了。因此，在您的示例中，您将执行以下操作：

```
@model MyModel
@using (Ajax.BeginForm("Index", "Home",
        new AjaxOptions
        {
            HttpMethod = "POST"
        }
        ))
    {
    @Html.LabelFor(m => m.Entity1.field1)
    @Html.EditorFor(m => m.Entity1.field1)
    @if(Model.Entity1.ID1 !=0){
         Html.HiddenFor(m => m.Entity1.ID1)
    }
    <div class="form-actions">
        <button type="submit">
        Next section</button>
    </div>
    } 
```

# xml-parsing - 从批处理脚本解析 XML 时出现意外字符

> ID：12956694
> 
> 赞同：0
> 
> 时间：2012-10-18T14:11:35.203
> 
> 标签：xml-parsing, cmd, batch-file

当我尝试从批处理脚本解析 XML 时出现此错误

```
 error : 
 < was unexpected at this time. 
```

xml:

```
<driver type=".dbdriver">
        <attributes>localhost;1521;XE;false</attributes>
        <driverType>Oracle thin</driverType>
      </driver>
      <password>7ECE6B7E7D2AF514C55BAE8B3A6B51E7</password>
      <user>JR</user> 
```

批处理脚本：

```
for /f "tokens=3 delims=><" %%j in ('type %SETTINGSPATH% ^| find "<user>"') do set user=%%j 
```

这段代码应该从 XML 中读取用户值，它只是“JR”，在某些机器上我得到了这个值；但有些机器没有显示此值并显示此错误。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:04:03.447

用批处理解析 XML 通常是有问题的并且总是有风险的。一个有效的 XML 文档可以通过多种方式合法地重新格式化，这会破坏您的解析器。但是如果你真的想继续使用批处理...

`<`当您的 IN() 子句中有未转义和未引用的字符时，会出现该错误消息。已经引用了`"<user>"`，所以通常不应该是一个问题。问题必须源于`%SETTINGSPATH%`. 该值必须具有 unquoted 和 unscaped `<`，或者该值中必须有奇数个引号。奇数个引号将导致`<user>`不再被引用。

唯一的另一种可能性是您没有向我们展示您的所有代码，并且错误发生在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:25:40.223

这永远不会可靠地工作。原因是您尝试使用错误的工具处理 Xml。Xml 文档有无数个具有相同语义含义的文本表示。因此，此处的空格或新行不会改变文档的语义，但会破坏您的脚本，即使将输入作为 Xml 处理的所有工具将继续正常工作。在可以使用 Xml 功能的地方使用 PowerShell 或 vbscript/jscript，否则您将始终遇到此类问题，因为您不应该使用刷子来驱动螺丝。

# google-drive-api - 检索文件所有者权限的电子邮件地址？（应用程序域）

> ID：12956698
> 
> 赞同：1
> 
> 时间：2012-10-18T14:11:46.740
> 
> 标签：google-drive-api

我拥有某个文件的所有者权限。我不想在域中共享此文件。为此需要冒充楼主。为了模拟用户，我使用了一个服务帐户，但我仍然需要一个 ServiceAccountUser。serviceAccountUser 是所有者的电子邮件地址。

我可以从权限中读取所有者姓名，但我不知道如何获取他的电子邮件地址。有人建议我使用配置文件 API 来收集这些信息，但我想知道是否没有办法使用驱动器 api 来做到这一点。

如何检索文件所有者权限的电子邮件地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:58:27.627

在 Google 希望更改它之前，您无法使用 Drive API 做到这一点。

您将不得不使用旧的 Document List API 及其 AclFeed 来检索用户的电子邮件

# php - 如何从mysql中的两个不同表中选择两列

> ID：12956707
> 
> 赞同：0
> 
> 时间：2012-10-18T14:12:02.743
> 
> 标签：php, mysql

> **可能重复：**
> [如何从mysql中的两个表中选择两列](https://stackoverflow.com/questions/12956089/how-to-select-two-columns-from-two-tables-in-mysql)

我正在尝试执行此查询，但我得到了不同的输出。我想从一个`column(grade`）中计算行并从其他中`table grading`选择 。`column(level)``table info`

```
for($i=1; $i<9; $i++)
{
$result = mysql_query("SELECT COUNT(grade),level FROM grading,info WHERE grade = $i");
 while ($row = mysql_fetch_array($result))
 {

    echo "<tr><td>";
    echo $row['level'];
    echo "</td>";
    echo "<td>";
    echo  $row['COUNT(grade)'];
    echo "</td></tr>";
 }
} 
```

我的数据库：

```
 level   grade          

        A       1
        B       2
        C       6
        D       3
        E       4
        F       5
        G       6
        H       8 
```

我的输出：

```
 level   grade     
        A       8
        B       8
        C       8
        D       8
        E       8
        F       16
        G       0
        H       8 
```

但这是错误的，我想计算有多少学生有成绩 `1,2,3,4,5,6`，但输出显示其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:34:28.127

我不确定我是否理解您想要的，但如果我认为您正在寻找的内容是正确的，请尝试：

```
select grade, count(*) from students group by grade; 
```

`GROUP BY`将该列压缩为仅不同的值，并允许您通过计数返回有多少行被“分组”到该不同的值中。

更多信息在这里：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:22:35.397

我认为，您必须使用 JOIN [http://en.wikipedia.org/wiki/Join_(SQL](http://en.wikipedia.org/wiki/Join_(SQL) ) 而不是 FROM table1、table2。

# jquery-mobile - jquery移动分组按钮和输入框

> ID：12956712
> 
> 赞同：2
> 
> 时间：2012-10-18T14:12:24.137
> 
> 标签：jquery-mobile

在 JQuery Mobile 中，我试图用中间的输入框对按钮进行分组。下面是我的代码

```
<div data-role="controlgroup" data-type="horizontal">
        <a href="#" data-role="button">Yes</a>
        <input type="text"  value="0" min="0" max="20" size="2"  />
        <a href="#" data-role="button">Maybe</a>
    </div> 
```

这是[结果](http://imgur.com/Sgil9)

任何想法都会很棒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:32:20.650

单选按钮需要一个激进的 display:inline !important; ... 这是一个包含 2 行、一个普通按钮和一个迷你按钮的列表。

希望能帮助到你。 [http://jsfiddle.net/den232/5mVv8/](http://jsfiddle.net/den232/5mVv8/)

```
 .floatleft {
    float:left;
 }
.floatright {
    float:right;
 }
.forceinline{  /* Prevent fieldcontain from doing a BLOCK thing */
    display:inline !important;
}
.textwidth {  /* limit width of input fields */
    width:80px;
}
.closespacing { /* controls spacing between elements */
    margin:0px 5px 0px 0px;
 }
.bigselect {   /* centers select with big buttons */
    padding: 0px;
    margin:2px 5px 0px 0px;
 }
.biginputheight {   /* matches text input height to big buttons */
    padding-top:10px !important;
    padding-bottom:12px !important;
}
.miniinputheight { /* matches text input height to minibuttons */
    padding-top:5px !important;
    padding-bottom:5px !important;
}

<div data-role="page" class="type-home"> 
```

```
<ul data-role="listview">
  <li  data-role="fieldcontain">first LI line</li>
  <li  data-role="fieldcontain">

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal">
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">A1</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">B1</label>
        </fieldset>
      </div>
    </div>

    <div  class='floatleft textwidth'>
      <input type="text" placeholder="left" class='biginputheight'></input>
    </div>  

  </li>
  <li  data-role="fieldcontain">

    <div data-role="fieldcontain" class= 'forceinline'>
      <div class='floatleft closespacing'>    
        <fieldset data-role="controlgroup" data-type="horizontal" data-mini='true'>
          <input type="radio" name="radio-view" id="radio-view-a" value="aa"  />
          <label for="radio-view-a">AA</label>
          <input type="radio" name="radio-view" id="radio-view-b" value="bb"  />
          <label for="radio-view-b">BB</label>
        </fieldset>
      </div>
    </div>

    <div  class='floatleft textwidth'>
      <input type="text" placeholder="e2" class='miniinputheight'></input>
    </div>  

     <div class='floatright closespacing'>
      <div  class='floatright textwidth'>
        <input type="text" placeholder="e3" class='miniinputheight'></input>
      </div>  
    </div>
  </li>
  <li  data-role="fieldcontain">last LI line</li>

</ul><!-- /listview --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:34:52.603

默认情况下，按钮占据视口的整个宽度。尝试使用 data-inline 属性来改变它。

[http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-inline.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-inline.html)

您还需要一些 css 才能使输入看起来正确。以下似乎对我有用。您可能需要根据您的目的调整宽度。

```
input.ui-input-text {
    float: left;
    position: relative;
    display: inline-block;
    width: 50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-16T04:25:52.613

该解决方案对我有用，并希望它可以帮助其他寻求相同的人。

```
.controlgroup-textinput{
    padding-top:.22em;
    padding-bottom:.22em;
}
```

```
<fieldset data-role="controlgroup" data-type="horizontal" data-mini="false">
    <a href="#" data-role="button">Yes</a>
    <input type="text"  value="0" min="0" max="20" size="2" data-wrapper-class="controlgroup-textinput ui-btn" />
    <a href="#" data-role="button">Maybe</a>
</fieldset>
```

# maven - Spring Roo 的 Data on Demand 和 maven-run 集成测试存在问题

> ID：12956723
> 
> 赞同：1
> 
> 时间：2012-10-18T14:13:02.990
> 
> 标签：maven, integration-testing, aop, aspectj, spring-roo

我使用 Spring Roo，并**依赖 Roo 的按需数据进行集成测试**。

我最近意识到，**当我从 Maven 运行它们时，在 Eclipse 中顺利运行的相同集成测试会中断**。

问题似乎来自 Spring Roo 的按需数据。例如，我收到诸如...之类的错误

> testFindPlisByMultiFieldWithNothingSet(trc.suivi.core.repository.PliRepositoryTest)：预期：<10> 但为：<0>

...对于以下测试...

```
@Test
public void testFindPlisByMultiFieldWithNothingSet() {
    PliDataOnDemand dod = new PliDataOnDemand();
    dod.init();
    PliQueryInfo pliQueryInfo = new PliQueryInfo();
    List<Pli> plis = pliRepository.findPlisByMultiField(pliQueryInfo, null, null, null, null);
    assertEquals(10, plis.size());
} 
```

...表示**`dod.init()`没有填充我的内存数据库**...

仅供参考，PliDataOnDemand 是我们的一个名为 Pli 的实体的按需数据类。

有人可以帮忙吗？

编辑：

从命令行：**我运行“mvn test”**

来自 eclipse：**我刚刚从 eclipse 菜单中运行了测试**

Maven版本：**3.0.4**

编辑2：

aspectJ maven 插件的输出：

```
[INFO] 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java:8) is annotated with @Component type annotation from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:26)
[INFO] 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java:8) is annotated with @Configurable type annotation from 'trc.suivi.core.domain.PliDataOnDemand_Roo_Configurable' (PliDataOnDemand_Roo_Configurable.aj:11)
[INFO] Extending interface set for type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) to include 'org.springframework.beans.factory.aspectj.ConfigurableObject' (AnnotationBeanConfigurerAspect.aj)
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped field from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'java.util.Random trc.suivi.core.domain.PliDataOnDemand.rnd')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped field from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'java.util.List<trc.suivi.core.domain.Pli> trc.suivi.core.domain.PliDataOnDemand.data')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped field from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'trc.suivi.core.domain.UtilisateurDataOnDemand trc.suivi.core.domain.PliDataOnDemand.utilisateurDataOnDemand')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'trc.suivi.core.domain.Pli trc.suivi.core.domain.PliDataOnDemand.getNewTransientPli(int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setDateAnnulation(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setDateCreation(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setDateModification(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setDateReception(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setFDV(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setIdentifiant(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setNbPlisFDVEstime(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setNumeroPli(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setPaiement(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setStatut(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.setTypePli(trc.suivi.core.domain.Pli, int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'trc.suivi.core.domain.Pli trc.suivi.core.domain.PliDataOnDemand.getSpecificPli(int)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'trc.suivi.core.domain.Pli trc.suivi.core.domain.PliDataOnDemand.getRandomPli()')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'boolean trc.suivi.core.domain.PliDataOnDemand.modifyPli(trc.suivi.core.domain.Pli)')
[INFO] Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java) has intertyped method from 'trc.suivi.core.domain.PliDataOnDemand_Roo_DataOnDemand' (PliDataOnDemand_Roo_DataOnDemand.aj:'void trc.suivi.core.domain.PliDataOnDemand.init()')
[INFO] Join point 'initialization(void org.springframework.beans.factory.aspectj.ConfigurableObject.<init>())' in Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java:8) advised by before advice from 'org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect' (spring-aspects-3.1.1.RELEASE.jar!AbstractDependencyInjectionAspect.class:78(from AbstractDependencyInjectionAspect.aj)) [with runtime test]
[INFO] Join point 'initialization(void org.springframework.beans.factory.aspectj.ConfigurableObject.<init>())' in Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java:8) advised by afterReturning advice from 'org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect' (spring-aspects-3.1.1.RELEASE.jar!AbstractDependencyInjectionAspect.class:87(from AbstractDependencyInjectionAspect.aj)) [with runtime test]
[INFO] Join point 'initialization(void trc.suivi.core.domain.PliDataOnDemand.<init>())' in Type 'trc.suivi.core.domain.PliDataOnDemand' (PliDataOnDemand.java:8) advised by afterReturning advice from 'org.springframework.beans.factory.aspectj.AnnotationBeanConfigurerAspect' (spring-aspects-3.1.1.RELEASE.jar!AbstractDependencyInjectionAspect.class:87(from AbstractDependencyInjectionAspect.aj)) [with runtime test] 
```

编辑 3：

我明白了：

```
 testFindPlisByMultiFieldWithIdentifiantSet(trc.suivi.core.repository.PliRepositoryTest): Unable to find trc.suivi.core.domain.Utilisateur with id 1; nested exception is javax.persistence.EntityNotFoundException: Unable to find trc.suivi.core.domain.Utilisateur with id 1 
```

对于以下测试：

```
@Test
public void testFindPlisByMultiFieldWithIdentifiantSet() {
    PliDataOnDemand dod = new PliDataOnDemand();
    Pli pli = dod.getSpecificPli(0);
    pli.setIdentifiant("theIdentifiant");
    pliRepository.save(pli);
    PliQueryInfo pliQueryInfo = new PliQueryInfo();
    pliQueryInfo.setIdentifiant("theIdentifiant");
    List<Pli> plis = pliRepository.findPlisByMultiField(pliQueryInfo, null, null, "identifiant", "desc");
    assertEquals(1, plis.size());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-22T15:29:42.953

这是将依赖 jar 暴露给 maven 和 aspectj weaver 的方法：

```
<project>
  ...
  <dependencies>
    ...
    <dependency>
      <groupId>org.aspectj</groupId>
      <artifactId>aspectjrt</artifactId>
      <version>1.7.3</version>
    </dependency>

     <dependency>
      <groupId>org.agroup</groupId>
      <artifactId>to-weave</artifactId>
      <version>1.0</version>
    </dependency>

    <dependency>
      <groupId>org.anothergroup</groupId>
      <artifactId>gen</artifactId>
      <version>1.0</version>
    </dependency>
    ...
  </dependencies>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.5</version>
        <configuration>
          <weaveDependencies>
            <weaveDependency>
              <groupId>org.agroup</groupId>
              <artifactId>to-weave</artifactId>
            </weaveDependency>
            <weaveDependency>
              <groupId>org.anothergroup</groupId>
              <artifactId>gen</artifactId>
            </weaveDependency>
          </weaveDependencies>
        </configuration>
        <executions>
          <execution>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
  <build>
  ...
</project> 
```

来源：[aspectj-maven-plugin](http://mojohaus.org/aspectj-maven-plugin/examples/weaveJars.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T11:26:20.093

为什么要`dod.init()`自己打电话？您可以按需自动连接数据。并且不要忘记用`@RunWith(SpringJUnit4ClassRunner.class)`.

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext.xml")
@Transactional
public class PliTest {

  @Autowired
  private PliDataOnDemand dod;

  // your tests
} 
```

**更新**
看到你的 Maven 输出我会说`aspect`编织有问题。从您的输出`has intertyped method from`和`this affected type is not exposed to the weaver`.

**更新 2**从 [http://www.eclipse.org/articles/Article-Introducing-AJDT/article.html](http://www.eclipse.org/articles/Article-Introducing-AJDT/article.html)
阅读。尝试使用或参数 [http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html#weaveDependencies](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html#weaveDependencies)进行配置。`Managing multiple projects``aspectj-maven-plugin``weaveDependencies``weaveDirectories`

# c# - BarTender 错误：在 Asp.Net 中检索具有 CLSID 的组件的 COM 类工厂

> ID：12956725
> 
> 赞同：3
> 
> 时间：2012-10-18T14:13:08.153
> 
> 标签：c#, asp.net, iis, regedit

![在此处输入图像描述](../Images/29815842a4da92ba52d8de02cc51c285.png)

我从首选项屏幕上的 Com 选项卡中选择了 BarTender，并将 BarTender 添加到我的项目中。

![在此处输入图像描述](../Images/6a0f46c553a67bb386e99803227dd71c.png)

![在此处输入图像描述](../Images/d610f3f7df56a4fe64e5fd64d7c671d1.png)

当我在本地计算机上使用`Ctrl`+执行项目时，我可以顺利打印条形码。`F5`

![在此处输入图像描述](../Images/3ced2cefc498268c8c0d88e1ca1d5254.png)

但是当我在 wwwroot 下发布我的项目时，出现如下错误，

![在此处输入图像描述](../Images/3d448e3e3ae9949443ad582af951189e.png)

此外，我将项目平台设置为“x86 – x64 Any Cpu”，但没有任何改变。

PS：由于我没有足够的积分，我将截图作为链接提供。非常遗憾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:10:49.353

它是一个 EXE 服务器，因此看起来您需要向 COM 类授予本地启动和本地激活权限，以获得您的网站运行的身份。您可以使用 DCOMCnfg.exe 执行此操作。查看应用程序池标识并确保它具有适当的权限。测试问题的一个好方法是将其设置为“每个人”。如果可行，那肯定是您的问题，但不要将其设置为“每个人”。一旦您证明这是问题所在，您将需要正确设置激活、启动和可能的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:43:28.707

这是由于库本身的安全设置。我对 Excel 和 Illustrator COM 也有同样的问题。

即使这是 Excel，[此站点也会指导您](http://www.cnblogs.com/pfs1314/archive/2011/12/02/2272470.html)设置安全性和权限。

**更新：**

如果您找不到该库，那么它可能是 32 位库；这些并不总是显示在 64 位控制台中（假设您正在运行 64 位..） - 如果是这样，您需要启动 32 位 DCOMCONFIG。有关如何启动 32 位版本的信息，请参见[此处的页面底部。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678426%28v=vs.85%29.aspx)

# ruby-on-rails - Active Admin 中的自定义表单

> ID：12956727
> 
> 赞同：4
> 
> 时间：2012-10-18T14:13:20.387
> 
> 标签：ruby-on-rails, activeadmin

我正在 Active Admin 0.5 中创建自定义表单。我已经注册了一个页面并通过 DSL 创建了一个表单：

```
ActiveAdmin.register_page 'Planning', :namespace => :pos_admin do

  content :title => proc{ I18n.t("active_admin.dashboard") } do

    form do |f|
      f.input :type => :text
      f.input :type => :submit
    end

  end
end 
```

问题是，在提交表单时，我得到一个空的 Params 哈希。并且表单标签不包含真实性令牌。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-04T06:29:41.227

一个旧帖子，但对于任何偶然发现这个问题的人来说，答案是添加

```
f.input :name => 'authenticity_token', :type => :hidden, :value => form_authenticity_token.to_s 
```

到表格。这会将身份验证令牌传递回 ActiveAdmin，以便它可以确认没有发生伪造。您的会话被终止，您被带回登录屏幕，因为 ActiveAdmin 认为您正在尝试伪造提交。

您的表单现在应该如下所示

```
form do |f|
  f.input :name => 'authenticity_token', :type => :hidden, :value => form_authenticity_token.to_s
  f.input :type => :text
  f.input :type => :submit
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:33:12.087

我使用带有 AA 表单的下一个语法（使用 f.inputs do block）你还必须使用对象的属性名称作为输入

```
 form do |f|
   f.inputs do
     f.input :property_name,  :type => :text
   end
   f.actions
  end 
```

希望它会有所帮助！

# windows-8 - 控制 Windows 8 Metro 开始菜单

> ID：12956730
> 
> 赞同：0
> 
> 时间：2012-10-18T14:13:29.937
> 
> 标签：windows-8, microsoft-metro

如果我想开发一个可以控制 Windows 8 Metro Menu 的应用程序或服务（添加磁贴、删除磁贴、排列磁贴等）。

现在有这样的东西吗？如果我应该从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:58:07.837

不好意思，朋友。我很清楚你想要什么。但不是。

# asp.net - 图像的 URL 重写

> ID：12956734
> 
> 赞同：3
> 
> 时间：2012-10-18T14:13:34.857
> 
> 标签：asp.net, .net, url-rewriting, rewritepath

我试图弄清楚如何使用 Application_BeginRequest 为网站上的图像启用短 URL。

目前，要打开图像，我必须使用完整的 URL，如下所示：

```
http://mywebsite.com/ViewImage.aspx?album=123&id=456 
```

我希望可以使用短 URL 访问图像：

```
http://mywebsite.com/123/456 
```

ViewImage.aspx 从数据库中动态检索图像。

假设我应该使用 RewritePath 方法。但具体如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:46:42.727

@Ivo 的答案可能是最简单的，但我个人更喜欢避免安装额外的模块。

如果您使用的是 IIS7（Windows 7/Server 2008 或更高版本），您可以使用请求处理程序（`.ashx`文件），然后将各种 Url 映射到它们...

有关设置的教程，请参见[http://www.dotnetperls.com/ashx 。](http://www.dotnetperls.com/ashx)

完成一项工作后，您可以检查该`Request`对象以确定确切使用的 Url 并以您喜欢的任何方式提取参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:19:47.370

您可以通过 URL 重写来完成此操作[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)您在 web.config 中创建规则以将 url 映射到文件。

例如，我们使用此图像规则将版本 url 映射到真实图像。您可以为您的网址创建一些类似的东西。在 IIS 中，您可以在安装模块时测试您的规则

```
 <rule name="rewriteImgRule" stopProcessing="true">
      <match url="^v[0-9\.]+/img/(.*)$" />
      <action type="Rewrite" url="/img/{R:1}" />
    </rule> 
```

# ios - 没有已知的选择器混淆类方法

> ID：12956735
> 
> 赞同：3
> 
> 时间：2012-10-18T14:13:42.870
> 
> 标签：ios, ios5, core-data, automatic-ref-counting

我知道这是一个新手问题，但我很困惑。我应该如何从另一个类调用类方法，还是不应该？

这是我的`ClassA`和`CoreDataHelper`：

```
#import <Foundation/Foundation.h>

@interface ClassA : NSObject {

}

@property (nonatomic, retain) NSString * sessionId;
@property (nonatomic, retain) NSString * token;
@property (nonatomic, retain) NSString * userid;

+ (void) pullOfflineDataWithContext:(NSManagedObjectContext *)managedObjectContext ;
@end

#import "ClassA.h"
#import "CoreDataHelper.h"

@implementation ClassA

+ (void) pullOfflineDataWithContext:(NSManagedObjectContext *)managedObjectContext  {

    // get Contacts, Accounts, Meetings into Core Data

     bool asd =[CoreDataHelper insertAllObjectsForEntity:@"Contact" andContext:managedObjectContext initCoreData:jsonDict];

}
@end

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface CoreDataHelper : NSObject

//For inserting objects
+(BOOL)insertAllObjectsForEntity:(NSString*)entityName andContext:(NSManagedObjectContext *)managedObjectContext;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:29:28.987

您正在以正确的方式从另一个类方法调用一个类方法，只是方法签名与声明的不同；

```
bool asd =[CoreDataHelper insertAllObjectsForEntity:@"Contact" 
                                         andContext:managedObjectContext 
                                       initCoreData:jsonDict]; 
```

+insertAllObjectsForEntity:andContext: 的声明没有上面调用代码中的最后一个

```
+(BOOL)insertAllObjectsForEntity:(NSString*)entityName 
                      andContext:(NSManagedObjectContext *)managedObjectContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:27:39.733

像：

```
[ClassName method]; 
```

代替：

```
[instance method]; 
```

在您的示例中将是：

```
[ClassA pullOfflineDataWithContext]; 
```

# objective-c - 在 XIB 文件中定义的 UIButton 未实例化

> ID：12956740
> 
> 赞同：0
> 
> 时间：2012-10-18T14:13:56.250
> 
> 标签：objective-c, ios

我创建了这个视图控制器，它有一个 XIB 文件，并包含一个`UIButton`. 我分配并初始化控制器，并将视图添加到超级视图：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.vc = [[MyViewController alloc]init];
    [self.view addSubview:self.vc.view];
    CGRect frame;
    frame.size.height = 200;
    frame.size.width = 200;
    frame.origin.x = 100;
    frame.origin.y = 100;
    self.vc.view.frame = frame;
    [vc setText:@"123"];
} 
```

当我运行它时，`UIButton`没有显示。当我调试它并在控制器的`viewDidLoad`or中放置断点时`viewDidAppear`，`UIButton`总是未实例化（内存地址 00000000）；

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:17:41.933

您`MyViewController`应该使用 XIB 文件进行初始化：

```
...
self.vc = [[MyViewController alloc] @"MyViewController" bundle:nil];
... 
```

# postgresql - Postgres如何检查用户是否具有CREATEDB权限？

> ID：12956743
> 
> 赞同：2
> 
> 时间：2012-10-18T14:14:05.897
> 
> 标签：postgresql

我需要检查特定用户是否有权在 Postgres 中创建数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:51:46.850

试试这个：

```
select rolcreatedb
from pg_authid 
where rolname = 'your user name' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:24:37.817

有一些数据库功能可以为您做到这一点，例如：
`has_database_privilege(user, database, privilege)`

请参阅此处：[http](http://www.postgresql.org/docs/8.3/static/functions-info.html) ://www.postgresql.org/docs/8.3/static/functions-info.html获取函数列表，此处：[http ://www.postgresql.org/docs/8.3/static/ddl- priv.html](http://www.postgresql.org/docs/8.3/static/ddl-priv.html)用于测试的权限。

hth

# wpf - 如何让 DataGrid 填充 TabItem

> ID：12956749
> 
> 赞同：1
> 
> 时间：2012-10-18T14:14:36.537
> 
> 标签：wpf, layout, datagrid, tabcontrol, tabitem

我有以下布局

```
<DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="10">
        ...
    </StackPanel>
    <TabControl>
        <TabItem Header="Summary">
            <DataGrid   ItemsSource="{Binding SummaryData}"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        IsReadOnly="True"
                        HeadersVisibility="Column"
                        CanUserSortColumns="False" />
        </TabItem>
        ...
    </TabControl>
</DockPanel> 
```

如果没有 DataGrid，TabControl 和 TabItems 会完美地填充容器的其余部分，但是当我添加 DataGrid 时，它会拉伸所有内容以显示所有行和列。

编辑：更清晰

我希望 DataGrid 垂直和水平拉伸以填充 TabItem。如果它需要更多空间，我想让 DataGrid 的滚动条出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:41:50.147

我得到了以下做我想做的事。

```
<TabItem Header="Summary" >
    <Grid x:Name="SummaryGrid">
        <DataGrid Height="{Binding ElementName=SummaryGrid, Path=ActualHeight}"
                  ItemsSource="{Binding SummaryData}"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  HeadersVisibility="Column"
                  CanUserSortColumns="False" />
    </Grid>
</TabItem> 
```

它一直有效，直到我更改父面板的大小。`ActualHeight`没有更新。不过现在已经足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:24:09.157

这是您正在寻找的那种行为吗？

```
<DockPanel>
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="10">
        <TextBox Text="tttt" />
    </StackPanel>
    <TabControl VerticalAlignment="Top" HorizontalAlignment="Left">
        <TabItem Header="Summary">
            <DataGrid CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      CanUserSortColumns="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Column 1" Binding="{Binding}"></DataGridTextColumn>
                </DataGrid.Columns>
                <sys:String>Entry</sys:String>
            </DataGrid>
        </TabItem>
    </TabControl>
</DockPanel> 
```

通过设置这些对齐方式，您将使 DataGrid 伸展到 TabItem 中的可用空间。但我不确定这正是您正在寻找的。

您可以使用**VerticalAlignment**和**Horizo​​ntalAlignment**来获得您所需要的。（将其设置为 Top/Left/Stretch 以仅获取 TabItem 或 DataGrid 或两者都以您想要的方式拉伸）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-06T19:06:22.667

接受的答案是一种解决方法......

选项卡控件将与任何选项卡项一起*在其容器内展开。*通过将网格作为其容器并指定要`*`调整大小的行/列（在窗口内扩展），这将向下渗透到数据网格。

```
<Grid>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="15"/>
    <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="15"/>
</Grid.ColumnDefinitions>
<Grid.RowDefinitions>
    <RowDefinition Height="15"/>            
    <RowDefinition Height="*"/>
    <RowDefinition Height="10"/> 
    <RowDefinition Height="100"/> 
    <RowDefinition Height="15"/>
</Grid.RowDefinitions>

<TabControl Name="tabOperations" 
            Grid.Row="1"
            Grid.Column="1"
            TabStripPlacement="Top" 
            Margin="0,0,0,4"
            >
    <TabItem Header="Provider Accounts" >
        <DataGrid AutoGenerateColumns="True"
                IsReadOnly="True"
                ItemsSource="{Binding ProviderAccounts}"/>
        </TabItem>
    </TabControl>
<GridSplitter Grid.Row="2"
                Height="3"
                Grid.Column="1"
                HorizontalAlignment="Stretch" />

<TextBox Grid.Row="3" Grid.Column="1"
            TextWrapping="Wrap" Text="{Binding Status}"
            Margin="0,4,0,0"
            /> 
```

因此，无论主窗口的大小如何，它都会跨越。

[![水平尺寸](../Images/c3afe4cab129ee1f796a75f020178433.png)](https://i.stack.imgur.com/qCjNE.png) [![垂直尺寸](../Images/26f3a72631b15dab1e89f43faee14deb.png)](https://i.stack.imgur.com/GShUU.png)

# javascript - 如何在 IE8 的 javascript 中选择 DOM 节点？

> ID：12956752
> 
> 赞同：1
> 
> 时间：2012-10-18T14:14:50.500
> 
> 标签：javascript, internet-explorer-8

有谁知道如何在 javascript 中选择 IE8 中的节点（元素）？不使用第三方库是首选。

在 IE9 中你可以这样做：

```
var sel = window.getSelection();
sel.removeAllRanges();
var range = document.createRange();
range.selectNode(node);
sel.addRange(range); 
```

如何在 IE8 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:30:33.547

这是我使用的代码，它应该可以全面工作：

```
 var sel, range;
    if(window.getSelection && document.createRange) {
        range = document.createRange();
        range.selectNodeContents(node);
        sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);

    } else if(document.body.createTextRange) {
        range = document.body.createTextRange();
        range.moveToElementText(node);
        range.select();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:24:19.780

对于较旧的 IE，它是这样的，提供`node`的是一个元素：

```
var range = document.body.createTextRange();
range.moveToElementText(node);
range.select(); 
```

有关完整的跨浏览器解决方案，请参阅

[https://stackoverflow.com/a/2044793/96100](https://stackoverflow.com/a/2044793/96100)

# objective-c - 初始化不返回自我

> ID：12956754
> 
> 赞同：0
> 
> 时间：2012-10-18T14:14:55.023
> 
> 标签：objective-c, xcode, initialization

我有我的默认初始化程序：

```
- (id)init
{
    if ((self = [super init]))
    {   
    }

    return self;
} 
```

我只在我的班级中包含了这个方法来跟踪它是否正在执行它的工作，据我所知，它是。

Self 正在设置中，在控制台中我可以看到 self 的内存地址不是 0x0000000。例如，这是我刚刚尝试运行的控制台：

```
self    IssueManager *  0x08383ad0 
```

但是，当方法将 self 返回到此方法时：

```
- (id)initWithNibName:(NSString *)nibNameOrNil
               bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

        if (self)
            self.issueManager                           = [[IssueManager alloc] init];

        return self;
    } 
```

self.issueManager 仍然是一个空指针：

```
_issueManager   IssueManager *  0x00000000 
```

我不知道为什么会这样，但会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:20:41.733

而不是使用：

```
self.issueManager 
```

尝试：

```
issueManager = [[IssueManager alloc] init]; 
```

请记住，使用点表示法只是使用@property 和@synthesize 提供的访问器/设置器方法。在您的 init 方法中，您不应使用访问器/设置器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:24:37.990

我不会在其中使用访问器`-init*`（阅读此内容：[为什么我不应该在 init/dealloc 中使用 Objective C 2.0 访问器？](https://stackoverflow.com/questions/192721/why-shouldnt-i-use-objective-c-2-0-accessors-in-init-dealloc)）

苹果也对此发表了声明。

尝试改为：

```
_issueManager = [[IssueManager alloc] init]; 
```

# perl - perl 日期操作

> ID：12956755
> 
> 赞同：0
> 
> 时间：2012-10-18T14:14:55.890
> 
> 标签：perl, date, date-math

我在 perl 中有一项任务，我需要执行“some_code”，但前提是日期从现在算起超过 24 小时。我正在尝试下面的代码，但它似乎不起作用。

```
sub function {

  use Date::Manip::Date
  use Date::Parse
  use Date::Format;

  my $yesterday = time() - 60*60*24;
  my $x = shift;
  my $env = shift;

  $env->{some_code} = 1 if $x < $yesterday;

 return $x;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:35:49.393

你可以很容易地做到这一点，只使用核心功能。

```
#!/usr/bin/perl                                                                                   

use strict;

my $new_time   = 1350570164; # 2012-10-18 14:22:44
my $older_time = 1350450164; # 2012-10-17 05:02:44

printf "time in sec: %d older that 24 hours: %d\n", $new_time, is_time_older_24($new_time);
printf "time in sec: %d older than 24 hours: %d\n", $older_time, is_time_older_24($older_time);

sub is_time_older_24 {
    my $given_time = shift;

    my $yesterday_time = time() - 60 * 60 * 24;
    return $given_time <= $yesterday_time
            ? 1
            : 0;
} 
```

输出：

```
time in sec: 1350570164 older that 24 hours: 0
time in sec: 1350450164 older than 24 hours: 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:25:43.920

```
#! /usr/bin/env perl
use Modern::Perl;
use Data::Dumper;
use DateTime;

my $now = DateTime->new( 
                    year => 2012, month => 10, day => 18, 
                    hour => 17, minute => 30, 
                    time_zone => 'UTC'
                );
# my $now = DateTime->now(time_zone => 'UTC');

my $last_run = DateTime->new(
                    year => 2012, month => 10, day => 17, 
                    hour => 19, minute => 30, 
                    time_zone => 'UTC'
                );

my $duration= $now->subtract_datetime($last_run);
say "hours: " . $duration->hours; 
```

**结果：**

```
hours: 22 
```

**也可以看看：**

*   [https://metacpan.org/module/DateTime](https://metacpan.org/module/DateTime)
*   [https://metacpan.org/module/DateTime::Duration](https://metacpan.org/module/DateTime::Duration)
*   [https://metacpan.org/module/DateTime::Format::Duration](https://metacpan.org/module/DateTime::Format::Duration)

# twitter - 如何获取twitter当前用户的性别

> ID：12956757
> 
> 赞同：6
> 
> 时间：2012-10-18T14:14:57.363
> 
> 标签：twitter, twitter-anywhere

我已经查看了推特文档@anywhere 我可以使用用户对象属性但在用户数据中我没有找到性别属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:39:32.213

当您创建一个 twitter 帐户时，它从不询问性别，因此您无法通过 API 获取它。

你需要某种人工智能来确定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T09:18:29.380

人口统计数据（例如API`gender`和`age`不可用） - 并不总是合适的，因为 Twitter 帐户可以代表许多事情，不仅限于活着或死去的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-18T21:16:14.543

最新答案@2016

您仍然无法获得 twitter 用户的性别，但您可以通过一些可行的 api 来推断它。

有关所有合理且经过测试的解决方案，请参阅 node-cheat [gender_by_name](https://github.com/zishon89us/node-cheat/blob/master/random/small_tasks/gender_by_name.js)。

# java - 如何查看 JNI 本地引用表？

> ID：12956759
> 
> 赞同：7
> 
> 时间：2012-10-18T14:14:59.213
> 
> 标签：java, android, android-ndk, java-native-interface

有什么方法可以查看 JNI 本地引用表的内容吗？

如果在溢出时发生崩溃，我可以通过 android LogCat 看到它，并且有很多关于引用对象、唯一实例等的信息，这有助于捕获潜在的内存泄漏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:19:03.917

请参考**CheckJNI**。

它可以捕获许多常见错误。对于 ICS CheckJNI，如果`debuggable="true"`在您的`Manifest.xml`.

谢谢

# spring - Spring SimpleThreadScope 不支持析构回调

> ID：12956776
> 
> 赞同：2
> 
> 时间：2012-10-18T14:16:23.683
> 
> 标签：spring, maven, webdriver, selenium-webdriver

我想运行并行硒测试（使用 webriver 和 Spring JUnit 运行器）。Webdriver 是一个带有自定义线程作用域的 spring bean。但我收到以下警告`SimpleThreadScope does not support descruction callbacks`所以浏览器没有关闭。知道如何关闭它们（更准确地说是调用 quit 方法）？

弹簧配置

```
<bean id="threadScope" class="org.springframework.context.support.SimpleThreadScope" />

<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
           <map>
               <entry key="thread" value-ref="threadScope" />
           </map>
       </property>
</bean>

<bean id="webDriver" class="org.openqa.selenium.remote.RemoteWebDriver" scope="thread" destroy-method="quit">
    <constructor-arg name="remoteAddress" value="http://localhost:4444/wd/hub" />
    <constructor-arg name="desiredCapabilities" ref="browserAgent" />
</bean> 
```

行家配置

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <configuration>
        <includes>
            <include>**/*Test.class</include>
        </includes>
        <reportsDirectory>${basedir}/target/surefire-reports</reportsDirectory>
        <parallel>classes</parallel>
        <threadCount>2</threadCount>
        <perCoreThreadCount>false</perCoreThreadCount>
    </configuration>
</plugin> 
```

这篇文章[http://www.springbyexample.org/examples/custom-thread-scope-module-code-example.html](http://www.springbyexample.org/examples/custom-thread-scope-module-code-example.html)建议自定义线程实现。但是使用任何 JUnit 运行器的 Runnable 扩展点类型在哪里？

```
public class ThreadScopeRunnable implements Runnable {

    protected Runnable target = null;

    /**
     * Constructor
     */
    public ThreadScopeRunnable(Runnable target) {
        this.target = target;
    }

    /**
     * Runs <code>Runnable</code> target and 
     * then afterword processes thread scope 
     * destruction callbacks.
     */
    public final void run() {
        try {
            target.run();
        } finally {
            ThreadScopeContextHolder.currentThreadScopeAttributes().clear();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:38:51.270

这里有一个解决方法，不是完美的解决方案，因为它会阻止浏览器直到所有测试结束。

您必须创建一个线程范围 bean 的寄存器来处理它们的销毁。

```
public class BeanRegister {

    private Set<CustomWebDriver> beans= new HashSet<CustomWebDriver>();

    public void register(CustomWebDriver bean) {
        beans.add(bean);
    }

    @PreDestroy
    public void clean() {
        for (CustomWebDriver bean : beans) {
            bean.quit();
        }
    }

} 
```

将其配置为单例。

```
<bean class="BeanRegister" /> 
```

您必须编写一个扩展 RemoteWebDriver 的类。

```
public class CustomWebDriver extends RemoteWebDriver {

    @Autowired
    private BeanRegister beanRegister;

    @PreConstruct
    public void init() {
        beanRegister.register(this);
    }

} 
```

就是这样。

# coldfusion - Ext.data.jSonP Sencha API 与 Coldfusion

> ID：12956778
> 
> 赞同：0
> 
> 时间：2012-10-18T14:16:33.260
> 
> 标签：coldfusion, sencha-touch, sencha-touch-2, coldfusion-9, coldfusion-10

我正在尝试从我的服务器获取一个 JSon。我这样调用 API：

```
Ext.data.JsonP.request({
        url: 'http://dev.mysite.com/temp.cfm',
        callbackKey: 'callback',
        timeout: 40000,
        params: {
            format: 'json'
        },
        success: function(result, request) {
            // Get the weather data from the json object result
            var weather = result; console.log('Succ');
        },
        failure: function(result, request) {
            // Get the weather data from the json object result
            var weather = result; console.log('Fail');
        },
        callback: function(result, request) {
            // Get the weather data from the json object result
            var weather = result; console.log('CallB');
        }
    }); 
```

我使用 Coldfusion 作为服务器端。所以，我只是这样做：

```
<cfreturn '#url.callback#({\"LOGINSTATUS\":\"fail\"})'> 
```

这将返回以下字符串：

```
Ext.data.JsonP.callback1({\"LOGINSTATUS\":\"fail\"}) 
```

但我的请求总是超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:11:49.457

我无法弄清楚真正的问题是什么。我刚刚尝试在服务器端使用 cfm 文件而不是 cfc，一切都开始工作了。

如果有人可以解释为什么会发生这种情况，我会接受该解释作为正确答案。

感谢 DmitryB 和 Sharondio 抽出时间帮助我修复它。我真的很感谢你的帮助。

# iphone - didUpdateToLocation 未在我的设备中使用 iOS 4 调用...？

> ID：12956782
> 
> 赞同：0
> 
> 时间：2012-10-18T14:16:38.667
> 
> 标签：iphone, gps, cllocationmanager, ios4, didfailwitherror

我尝试了很多很多并搜索了大多数帖子，所有帖子都有相同的答案。但我已经采取了使用定位服务所需的所有东西。我的应用程序正确获取位置并在模拟器 5.1 中调用*了 didUpdateToLocationon 。*但是当我用模拟器 4.3 尝试相同的代码时，它给了我“**服务器不接受客户端注册 68** ”。当我尝试在我的设备上使用 OS 4.3.5 调试相同的代码时，它总是进入*didFailWithError*。任何人都可以遇到我过去 2 天以来遇到的同样问题。现在我真的很沮丧，因为我已经做了同样的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:31:18.980

这只是设备的故障，有一些问题我刚刚关闭了设备，现在当我在其中运行我的应用程序时，没有任何代码更改。它工作正常。3 天后只是浪费我的时间来发布和搜索所有内容。

所以，我的建议是，如果有人遇到同样的问题，比如你试图找到位置并且它进入“didFailWithError”。只需重新启动您的设备。

# php - 将项目添加到 Magento 的购物车时，如何动态自定义项目的选项？

> ID：12956785
> 
> 赞同：2
> 
> 时间：2012-10-18T14:16:47.223
> 
> 标签：php, sql, magento

这几天我一直在为这个问题苦苦挣扎。我继承了一个建立在 Magento 上的网站。这个网站销售的产品都可以定制，每个产品都是按订单生产的。当客户想要将特定徽标添加到产品中，然后选择他们想要缝合徽标的线色时，就会出现我的问题。最多有 15 个徽标可用，每个徽标都有自己的一组可用线色。假设客户选择了 logo #6，然后从 logo #6 的可用颜色中选择一个线程并将其添加到购物车。当项目被引用时，它会在购物车中显示“线程颜色 6”以获取线程选项。这很好，订单处理正确。但是，当您在管理员端查看订单时，它将显示所有线色选项，包括他们选择的线色选项。
线色 1：无线
线色 2：无线
线色 3：无线
线色 4：无线
线色 5：线色名称
线色 6：无线

如上所述，订单处理正确在查看订单时让客户服务部门感到困惑。

所以我试图做的是找到设置了值的线色，然后将它的标签更改为像“线色”这样的通用标签，然后从报价中动态删除所有其他线色选项。我在[这里找到了一个可能的解决方案](https://stackoverflow.com/questions/9334115/magento-change-custom-option-value-before-adding-it-to-cart/9344336#9344336)，并且 Vinai 在解释代码方面做得很好。我已经尝试过了，甚至逐行逐行执行，我知道它正在根据需要添加和删除选项。但是，当我在调试后删除任何 die() 语句时，会出现 SQL 错误。下面是我的配置、观察者和 SQL 错误。

### 配置文件

```
<events>
    <checkout_cart_product_add_after>
            <observers>
                    <customoptions>
                        <type>singleton</type>
                        <class>Lmc_Threadcolor_Model_Product_Observer</class>
                        <method>checkoutCartProductAddAfter</method>
                    </customoptions>
            </observers>
    </checkout_cart_product_add_after>
    <sales_convert_quote_item_to_order_item>
            <observers>
                    <customoptions>
                        <type>singleton</type>
                        <class>Lmc_Threadcolor_Model_Product_Observer</class>
                        <method>salesConvertQuoteItemToOrderItem</method>
                    </customoptions>
            </observers>
    </sales_convert_quote_item_to_order_item>
</events> 
```

### 观察者.php

```
public function salesConvertQuoteItemToOrderItem(Varien_Event_Observer $observer)
{
        $quoteItem = $observer->getItem();
        if ($additionalOptions = $quoteItem->getOptionByCode('additional_options')) 
        {
            $orderItem = $observer->getOrderItem();
            $options = $orderItem->getProductOptions();
            $options['additional_options'] = unserialize($additionalOptions->getValue());
            $orderItem->setProductOptions($options);
        }
}

public function checkoutCartProductAddAfter(Varien_Event_Observer $observer)
{
    $item = $observer->getQuoteItem();
    $infoArr = array();

    if ($info = $item->getProduct()->getCustomOption('info_buyRequest')) 
    {
        $infoArr = unserialize($info->getValue());
    }

    // Set additional options in case of a reorder
    if ($infoArr && isset($infoArr['additional_options']))
    {
        // An additional options array is set on the buy request - this is a reorder
        $item->addOption(array(
            'code' => 'additional_options',
            'value' => serialize($infoArr['additional_options'])
        ));
        return;
    }

    $options = Mage::helper('catalog/product_configuration')->getCustomOptions($item);

    foreach ($options as $option)
    {
        // The only way to identify a custom option without
        // hardcoding ID's is the label :-(
        // But manipulating options this way is hackish anyway

        if(preg_match('/select thread color/', strtolower($option['label'])) && strtolower($option['value']) != 'no thread')
        {
            $optId = $option['option_id'];

            // Add replacement custom option with modified value
            $additionalOptions = array(array(
                'code' => 'lmc_custom_thread',
                'label' => 'Thread Color',
                'value' => $option['value'],
                'print_value' => $option['print_value'],
                'option_id' => $option['option_id'],
                'option_type' => $option['option_type'],
                'custom_view' => '',
                'image_path' => $option['image_path'],
            ));
            $item->addOption(array(
                'code' => 'additional_options',
                'value' => serialize($additionalOptions),
            ));

            // Update info_buyRequest to reflect changes
            if ($infoArr &&isset($infoArr['options']) && isset($infoArr['options'][$optId]))
            {
                // Remove real custom option
                unset($infoArr['options'][$optId]);

                // Add replacement additional option for reorder (see above)
                $infoArr['additional_options'] = $additionalOptions;

                $info->setValue(serialize($infoArr));
                $item->addOption($info);
            }

            // Remove real custom option id from option_ids list
            if ($optionIdsOption = $item->getProduct()->getCustomOption('option_ids'))
            {

                $optionIds = explode(',', $optionIdsOption->getValue());
                if (false !== ($idx = array_search($optId, $optionIds)))
                {
                    unset($optionIds[$idx]);
                    $optionIdsOption->setValue(implode(',', $optionIds));
                    $item->addOption($optionIdsOption);
                }
            }

            // Remove real custom option
            $item->removeOption('option_' . $optId);
        }
    }
} 
```

### SQL 错误

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':1:{i:0;a:8:{s:4:"code";s:17:"lmc_custom_thread";s:5:"label";s:12:"Thread Color"' at line 1

Trace:
#0 /var/www/html/lib/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#2 /var/www/html/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT * FROM `...', Array)
#3 /var/www/html/lib/Varien/Db/Adapter/Pdo/Mysql.php(333): Zend_Db_Adapter_Pdo_Abstract->query('SELECT * FROM `...', Array)
#4 /var/www/html/lib/Zend/Db/Adapter/Abstract.php(753): Varien_Db_Adapter_Pdo_Mysql->query('SELECT * FROM `...', Array)
#5 /var/www/html/app/code/local/Mage/Sales/Model/Quote/Item.php(281): Zend_Db_Adapter_Abstract->fetchRow('SELECT * FROM `...')
#6 /var/www/html/app/code/local/Deg/Sales/Model/Quote/Item.php(17): Mage_Sales_Model_Quote_Item->setProduct(Object(Mage_Catalog_Model_Product))
#7 /var/www/html/app/code/core/Mage/Sales/Model/Mysql4/Quote/Item/Collection.php(224): Deg_Sales_Model_Quote_Item->setProduct(Object(Mage_Catalog_Model_Product))
#8 /var/www/html/app/code/core/Mage/Sales/Model/Mysql4/Quote/Item/Collection.php(136): Mage_Sales_Model_Mysql4_Quote_Item_Collection->_assignProducts()
#9 /var/www/html/lib/Varien/Data/Collection/Db.php(632): Mage_Sales_Model_Mysql4_Quote_Item_Collection->_afterLoad()
#10 /var/www/html/lib/Varien/Data/Collection.php(729): Varien_Data_Collection_Db->load()
#11 /var/www/html/app/code/core/Mage/Sales/Model/Quote.php(589): Varien_Data_Collection->getIterator()
#12 /var/www/html/app/code/core/Mage/Sales/Model/Quote.php(620): Mage_Sales_Model_Quote->getAllItems()
#13 /var/www/html/app/code/core/Mage/Checkout/Model/Cart.php(123): Mage_Sales_Model_Quote->hasItems()
#14 /var/www/html/app/code/core/Mage/Checkout/controllers/CartController.php(123): Mage_Checkout_Model_Cart->init()
#15 /var/www/html/app/code/core/Mage/Core/Controller/Varien/Action.php(418): Mage_Checkout_CartController->indexAction()
#16 /var/www/html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action->dispatch('index')
#17 /var/www/html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#18 /var/www/html/app/code/core/Mage/Core/Model/App.php(340): Mage_Core_Controller_Varien_Front->dispatch()
#19 /var/www/html/app/Mage.php(627): Mage_Core_Model_App->run(Array)
#20 /var/www/html/index.php(80): Mage::run('', 'store')
#21 {main} 
```

任何帮助将不胜感激。谢谢你。

# django - 如何缩略图静态文件？

> ID：12956788
> 
> 赞同：12
> 
> 时间：2012-10-18T14:17:10.053
> 
> 标签：django, django-templates, sorl-thumbnail

我想用 sorl 缩略图调整我的静态文件的大小，但它不起作用

这是我的代码

```
{% if not new.photo %}

{% with path="{{STATIC_URL}}/images/empty-news.jpg" %}
{% thumbnail path "80x80" crop="center" as im %}
<a href="#" class="image"><img alt="" src="{{im.url}}" class="frame2"></a>
{% endthumbnail %}
{% endwith %}

{% else %}
{% thumbnail new.photo "80x80" crop="center" as im %}
<a href="{% url news_detail new.slug %}" class="image">
<img alt="" src="{{im.url}}" class="frame2"></a>
{% endthumbnail %}
{% endif %} 
```

如果我有图像，它会显示图像，但是当我没有图像时，我不能使用默认图像，因为缩略图不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-29T16:38:02.613

对我有用的丑陋选项，传递您通常传递给`static`模板标签的路径（请注意，它假定 http 协议，因此可以改进）：

```
{% with 'http://'|add:request.get_host|add:STATIC_URL|add:image_path as path %}
    {% thumbnail path "720x306" crop="center" as im %}
      <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
    {% endthumbnail %}
{% endwith %} 
```

这是通过建立静态图像的绝对路径来工作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T02:28:07.617

以下将起作用

```
{% with STATIC_URL|add:"/images/empty-news.jpg" as path %}
    {% thumbnail path "80x80" crop="center" as im %}
        <a href="#" class="image">
            <img alt="" src="{{im.url}}" class="frame2"></a>
    {% endthumbnail %}
{% endwith %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T14:42:50.763

老实说……这看起来不错；这意味着您的设置中可能存在一些简单的错误。

**可能的错误设置：** 您如何在设置中定义 STATIC_URL？`True`另外，DEBUG 的值是多少（如果您在本地开发，请确保将其设置为）？正如@goliney 指出的那样，您的路径可能一团糟。尝试拉出缩略图块，并将图像的 src 设置为`{{ STATIC_URL }}/images/empty-news.jpg`并在尝试制作缩略图之前验证它是否有效。

**忘记加载缩略图：**确保在对块`{% load thumbnail %}`的任何引用之前放入模板。`{% thumbnail %}`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T16:30:28.960

我自己也在解决同样的问题。看来，如果您想在模板中使用 STATIC_URL，您需要确保传递给缩略图标签的路径是绝对的（将路径视为外部路径。）

显然，相对路径仅适用于 MEDIA_ROOT 中的图像，似乎是为来自模型的图像设计的。

作为测试，请尝试输入完整的 http 路径。

请参阅： [http ://sorl-thumbnail.readthedocs.org/en/latest/examples.html](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-02T00:32:52.063

为了掩盖更多的丑陋，我制作了一个自定义过滤器，在 settings.py 中使用了一个常量 `SITE_URL`：

`settings.py`

```
[...]
SITE_URL = "google.it"
[...] 
```

`templatetags/staticthumb.py`

```
from django.conf import settings

from django import template

register = template.Library()

@register.filter()
def static_url(value):
    return ''.join(["http://", settings.SITE_URL, settings.STATIC_URL, value]) 
```

然后在模板中使用它：

```
{% load thumbnail staticthumb %}

{% with image_path|static_url as path %}
   {% thumbnail path "720x306" crop="center" as im %}
      <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
   {% endthumbnail %}
{% endwith %} 
```

# iphone - iOS - Localizable.strings - 不工作 - 更新到 4.5.1 后

> ID：12956792
> 
> 赞同：0
> 
> 时间：2012-10-18T14:17:18.867
> 
> 标签：iphone, ios, xcode, localization

目前我只使用一种语言，但我想使用 Localizable.strings 为将来的应用程序做准备。更新到 后`Xcode 4.5.1`，我的 Localizable.strings 不会复制到应用程序 - degugger/builder 中没有引用。我只在我的应用程序中看到这样的“OK_Button”。

我使用文件夹：**de.lproj** 文件：Localizable.strings - 在按钮上检查目标和语言所有其他文件。起初一切看起来都很好。

**但是：** 如果我查看副本包，我的 4 个文件（Storybord iPhone+ iPad、plist、Localizable.strings）以红色列出。

*我清理了，重新启动了 MAC，清理了模拟器等……但对我没有任何作用。*

怎么了？什么不见​​了？任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:52:26.873

检查您的字符串文件是否为 UTF-16 (iOS) 和 Unix 换行符。还要确保您的字符串都正确完成，通常使用非弯引号和分号“like this”；

# magento - 安装新的 Magento 扩展需要注销/登录，否则您会在管理页面中得到 404

> ID：12956794
> 
> 赞同：2
> 
> 时间：2012-10-18T14:17:32.247
> 
> 标签：magento

两个不同的人告诉我，以下是 Magento 的一个已知问题：

> 安装新扩展时，管理员尝试访问扩展的配置，并获得 404 页面。解决此问题的方法是注销然后登录到他的管理面板。

*   在设计扩展时有没有办法解决这个问题？
*   有关于此的未解决问题吗？

这是[我发现的一页](http://opensclub.org/forums/topic/magento-extension-configuration-page-shows-404-error/)讨论这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T14:33:43.807

发生这种情况是因为当您登录管理面板时，magento 会读取 ACL 规则并将它们写入会话。当您安装新模块时，您定义了会话中未列出的新 ACL 规则。

当您从 magento connect 安装模块时，您有“清除会话”按钮来强制更新。

在模块中，您可以使用类似

```
$session = $adminuser = Mage::getSingleton('admin/session');
/* @var $adminuser Mage_Admin_Model_User */
$adminuser = $session->getUser();
$adminuser->setReloadAclFlag(true);

$session->refreshAcl(); 
```

您还可以查看[此](https://github.com/ikonoshirt/reloadAcl)扩展程序如何将“重新加载 Acl”按钮添加到管理面板。

# grails - 缓存资源插件不起作用？

> ID：12956799
> 
> 赞同：1
> 
> 时间：2012-10-18T14:17:52.213
> 
> 标签：grails

我在我的 Grails 项目中使用缓存资源插件，但每次我用 F5 刷新页面时，它都会使用 http 响应代码 200 而不是 304 重新加载资源。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:46:11.880

通过覆盖*cached-resources-1.0*和*cache-headers-1.1.5*插件中的一些方法解决了这个问题。

看看他的插件。
请注意*缓存头*插件中的 CacheHeadersService ，void **cache** **(response, Map args)**方法，而不是我添加动态**void cache(req,response, Map args)**方法（请参见下面的类），它查看请求标头并发送如果资源被浏览器缓存，则为 304。 还有*缓存资源*插件中的**HashAndCacheResourceMapper**，方法**def map(resource, config)**我重写以使用我的 ne 方法 ************缓存头服务**。

在 BootStrap 中运行方法**void cacheResources(GrailsApplication application)**将更改应用到您的项目。**********

 ******```
class CustomCachedResourcesProcessor {

public static void cacheResources(GrailsApplication application){
    addMethodsToMapResources(application)
    application.mainContext.grailsResourceProcessor.reloadAll()
}

private static void addMethodsToMapResources(GrailsApplication application){
    addCacheMethod()
    application.getClassForName("org.grails.plugin.cachedresources.HashAndCacheResourceMapper").metaClass.map{resource, config->
        if (log.debugEnabled) {
            log.debug "Hashing resources to unique names..."
        }

        resource.processedFile = renameToHashOfContents(resource.processedFile, resource.processedFileExtension)
        resource.updateActualUrlFromProcessedFile()

        // Do all the horrible cache header stuff
        resource.requestProcessors << { req, resp ->
            if (log.debugEnabled) {
                log.debug "Setting caching headers on ${req.requestURI}"
            }
            cacheHeadersService.cache(req,resp, [neverExpires: true, shared: true])
        }
    }
}

private static void addCacheMethod(){
    CacheHeadersService.metaClass.cache{request,response, Map args->
        if (!enabled) {
            return
        }
        def store = args.store
        def share = args.shared
        def validFor = args.validFor
        def validUntil = args.validUntil
        def neverExpires = args.neverExpires
        def requiresAuth = args.auth

        def now = new Date()

        def expiresOn
        def maxage
        if (validFor != null) {
            expiresOn = new Date(now.time + validFor*1000L)
            maxage = Math.max(0, validFor)
        } else if (validUntil != null) {
            expiresOn = validUntil
            maxage = Math.round( Math.max(0, validUntil.time-now.time) / 1000L)
        } else if (neverExpires) {
            // HTTP 1.1 spec says SHOULD NOT set more than 1 yr in future
            // @todo Investigate if impls of servletresponse.setDateHeader() are using efficient threadlocals,
            // and if so change to use those
            expiresOn = now + 365
            maxage = Math.round( Math.max(0, expiresOn.time-now.time) / 1000L)
        }

        def cacheControl = []

        // Now set the headers
        if ((store != null) && !store) {
            cacheControl << 'no-store'
        }

        // Always set private if no explicit share - help grails devs by defaulting to safest
        if (share) {
            cacheControl << 'public'
            // Note, for authentication sites we still need to add no-cache to force verification
            // to which the app can return "not modified" if it handles etag/lastmod
            if (requiresAuth) {
                cacheControl <<  'no-cache'
            }
        } else {
            cacheControl << 'private'
        }

        if (maxage != null) {
            if (share) {
                cacheControl << "s-maxage=$maxage"
            }
            // Always set max-age anyway, even if shared. Browsers may not pick up on s-maxage
            cacheControl << "max-age=$maxage"
        }

        if (cacheControl) {
            response.setHeader('Cache-Control', cacheControl.join(', '))
        }

        if (expiresOn != null) {
            response.setDateHeader('Expires', expiresOn.time)
        }

        def possibleTags = request.getHeader('If-None-Match')
        def modifiedDate = -1
        try {
            modifiedDate = request.getDateHeader('If-Modified-Since')
        } catch (IllegalArgumentException iae) {
            log.error ("Couldn't parse If-Modified-Since header", iae)
        }

        def lastModChanged = false

        if (possibleTags || (modifiedDate != -1)) {
            if (modifiedDate != -1) {
                def compareDate = new Date(modifiedDate)
                if (compareDate > now) {
                    lastModChanged = true
                }
            }

            if (!lastModChanged) {
                response.sendError(304) // Not modified
                return false
            }
        }

        // Always set last modified for courtesy and older clients,
        // only if not already set by application (load balancers need identical lastmods)
        if (!response.containsHeader('Last-Modified')) {
            lastModified(response, now)
        }
    }
  }
} 
```

让我知道您对此有何看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:50:55.347

我添加了相同的代码，但没有工作。我正在使用 Grails 2.1.4 Groovy 2.0.4 apache-tomcat-7.0.37 jdk 1.7 Windows 7

在 Config.groovy

```
// changed
grails.resources.modules = {
    'core' {
        defaultBundle 'core-ui'
        resource url: '/css/cisco_base.css', attrs: [ media: 'screen' ]
        resource url: '/css/cl.min.css', attrs: [ media: 'screen' ]
        resource url: '/css/errors.css', attrs: [ media: 'screen' ]
        resource url: '/css/jquery.multiselect.css', attrs: [ media: 'screen' ]
        resource url: '/css/main.css', attrs: [ media: 'screen' ]
        resource url: '/css/masterbrand.min.css', attrs: [ media: 'screen' ]
        resource url: '/css/mcd.min.css', attrs: [ media: 'screen' ]
        resource url: '/css/mobile.css', attrs: [ media: 'screen' ]
        resource url: '/css/Sampleapp.css', attrs: [ media: 'screen' ]
        resource url: '/css/style.css', attrs: [ media: 'screen' ]
        resource url: '/css/table.css', attrs: [ media: 'screen' ]
        wrapper: { s -> "<!--[if lt IE 8]>$s<![endif]-->"

        }
        //resource url: '/css/all.css', attrs: [ media: 'screen' ]
        //resource url: '/css/lt7.css', attrs: [ media: 'screen' ],
    }

    'ui' {
        defaultBundle 'core-ui'
        resource url: '/js/SampleApp.js', disposition: 'head'
    }
}
// changed 
```

我得到了你的代码（上面）并放在 src/groovy/com.sample.resources 中。

```
I am testing like this,
1\.  With my changes I am creating a war file with maven package.
2\.  Deploying in tomcat.
3\.  Open browser and login  to SampleGrailsApp(just open few pages in SampleGrailsApp).
4\.  After, changing some code(in SampleApp.js, i added alert() method to every function in that file) in  js/css files in  tomcat/webapps/SampleGrailsApp folder.
5\.  Check those changes are reflecting or not in browser.
   I checked by -- opening the SampleApp in another tab  -- Not reflecting changes.
                -- Clean the browser cache  -- Not reflecting changes.
                -- Close all browsers and opened new browser  -- Not reflecting changes. 
```******

# php - PHP检查查询是否返回任何错误

> ID：12956800
> 
> 赞同：0
> 
> 时间：2012-10-18T14:17:53.500
> 
> 标签：php, mysql

我一直在思考这个问题，我想看看查询是否有任何结果，如果它没有返回任何结果，我想做点什么。

PHP：

```
<?php
session_start();
$host = "localhost";
$user = "root";
$passw = "";
$con = mysql_connect($host, $user, $passw);

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
$json = $_REQUEST['json'];
$json = stripslashes($json);
$jsonobj = json_decode($json);

$me = $jsonobj -> me;
$other = $jsonobj -> other;
mysql_select_db("tinyspace", $con);
$result = mysql_query("SELECT * FROM friends WHERE (user_id = '" .$me. "' AND user_id2 = '" .$other. "') OR (user_id2 = '" .$me. "' AND user_id1 = '" .$other. "')");

if(mysql_num_rows($result) > 0)
{

} 
```

但是，if 语句一直给我带来问题。
有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:21:33.017

只是为了确定，您命名了多少列`userid`？用户ID，用户ID1，用户ID2？你的意思`user_id1`是代替`user_id`下面的行吗？

```
$result = mysql_query("SELECT * FROM friends WHERE (user_id = '" .$me. "' AND user_id2 = '" .$other. "') OR (user_id2 = '" .$me. "' AND user_id1 = '" .$other. "')"); 
```

如果是这样，也许这就是您没有获取任何结果的原因。

**编辑：**

```
$result = mysql_query("SELECT * FROM friends WHERE (user_id1 = '" .$me. "' AND user_id2 = '" .$other. "') OR (user_id2 = '" .$me. "' AND user_id1 = '" .$other. "')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:21:18.580

你应该试试

```
<?php 
if($result == false){
   //what you want to do if the query returns nothing
}else{
   //handle the result
} 
```

对于那些认为我的答案不正确或与所问内容相反的人，请非常仔细地从头开始阅读问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:23:54.210

`mysql_num_rows()`可以用于检查您是否有结果，并且应该在您的示例中工作..

但是，如果您的调用 `mysql_num_rows()`没有按预期工作（即始终为假），则几乎总是归结为查询问题。 `mysql_num_rows()`需要一个结果资源，如果您的查询有问题，mysql_query 将返回 false。

您可以将 mysql_query() 调用修改为

```
mysql_query("sql here") or die(mysql_error()); 
```

如果错误出在查询中，那应该会让您知道。一旦您检查了查询是否按预期工作，您的 mysql_num_rows() 将开始正常运行。

此外，不推荐使用 mysql_ 函数，您应该查看 Prepared Statements [http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:25:27.173

```
$result = mysql_query("SELECT * FROM `friends` WHERE (`user_id1` = '" .$me. "' AND `user_id2` = '" .$other. "') OR (`user_id2` = '" .$me. "' AND `user_id1` = '" .$other. "')"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T14:31:19.873

简单地回答您的问题，虽然您的代码似乎可能容易受到攻击，但它应该按照您的意图行事。这是我在连接类中使用的

```
public function makeQuery(){
 if($result = mysqli_query($this->link, $this->sql)){
     if(mysqli_num_rows($result) != 0){
         while($r = mysqli_fetch_array($result)){
             $return[] = $r;
         }
         mysqli_free_result($result);
         return $return;
     }else{
         return 0;
     }
 }else{
     // db error here
 } 
```

}

这假设您为 $sql 和 $link 提供了一些值......但是您可以检查整数返回或数组返回。如果它是一个整数 (0)，它没有行，一个数组将是返回的行。如果有错误，它将落入错误逻辑（在这种情况下，我给自己发了一封电子邮件）。

# visual-studio - 从多台计算机进行 Web 部署

> ID：12956803
> 
> 赞同：6
> 
> 时间：2012-10-18T14:18:04.887
> 
> 标签：visual-studio, git, iis-7.5, microsoft-web-deploy

我在多台计算机上的网站上工作，我的工作和我的家用电脑。源代码保存在 git 存储库下。我使用 Web Deploy 将网站发布到公共服务器上的 IIS。一切正常，我可以从两台计算机上发布，并且可以*正常工作*。

问题是，当我从一台 PC 部署，然后转到另一台，从 git 获取最新更改，进行更多更改，然后再次部署时，它会重新部署整个网站，而不是仅部署已更改的文件 - 原样如果我从本段的第一句话中取出“然后转到另一个，从 git 获取最新更改”步骤会发生什么。

我可以做什么，我可以在我的 git 存储库中包含哪些文件（我排除所有`packages`,`bin`和`obj`目录），或者我可以执行哪些额外的配置来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:08:09.790

在您的公共服务器上添加一个存储库，推送到该服务器，然后从那里部署。推送将是最小的，git 对 deltas 的效果非常好。

# c++ - 用户输入字符串的验证器

> ID：12956807
> 
> 赞同：0
> 
> 时间：2012-10-18T14:18:19.890
> 
> 标签：c++, validation

嘿，当我要求用户输入名称时，我想阻止用户输入整数。我已经为整数和字符实现了这一点。谁能帮我调整我的代码以适应字符串。

```
int getNum()
{
    int num;
    std::cout << "\nWhat is your age? ";
    while (!(std::cin >> num))
    {
        // reset the status of the stream
        std::cin.clear();
        // ignore remaining characters in the stream
        std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
        std::cout << "Enter an *integer*: ";
    }
    std::cout << "You entered: " << num << std::endl;
    return num;
}

char getChar(string q)
{
    char input;
    do
    {
        cout << q.c_str() << endl;
        cin >> input;
    }
    while(!isalpha(input));
    return input;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:26:01.563

如果您打算使用 std:string，那么您可以使用它来查找输入的字符串是否有任何数字：

```
if (std::string::npos != s.find_first_of("0123456789"))
{
  std::cout << "digit(s)found!" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:34:51.917

```
string q = "This is a test123";

for(string::iterator i = q.begin(); i != q.end(); i++)
{
    if((*i < 'A' || *i > 'z') && (*i != ' '))
    {
        return false;
    }
} 
```

如果您允许空格和其他字符，这也是一种选择。

编辑：更新以检查单个字符：

```
char c;
bool finished = false;
printf("Please enter your sex, M/F?\n");
while(!finished)
{
    cin >> c;
    if(!(c == 'm' || c == 'M' || c== 'f' || c=='F'))
    {
        printf("Please try again...\n");
    }
    else
    {
        finished = true;
    }
} 
```

请注意，当按下 Enter 时，c 只是逐个字符地输入，在此之前不会发生换行。

# android - DDMS 和 os 显示关于我的应用程序的不同内存信息

> ID：12956808
> 
> 赞同：5
> 
> 时间：2012-10-18T14:18:29.173
> 
> 标签：android, memory-leaks, ddms

我正在与 ddms 一起寻找内存泄漏和其他错误。跟踪内存时，我看到堆大小为 30MB。

但是当我转到设备并检查应用程序管理器中的内存时，我看到 70 MB。

正常吗？这是什么原因？

设备 : Samsun Galaxy GT9300

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:29:28.037

是的，这是正常的，DDMS 仅显示正在运行的应用程序内存。您还可以尝试其他工具，例如内存分析器工具 (MAT)。您会看到与 DDMS 的最佳结果比较。

[这是链接](http://android-developers.blogspot.in/2011/03/memory-analysis-for-android.html)。

# c++ - 与可能导致缓冲区溢出的函数一起使用时，是否应该比其他变量更仔细地检查外部变量？

> ID：12956810
> 
> 赞同：0
> 
> 时间：2012-10-18T14:19:01.080
> 
> 标签：c++, extern, buffer-overflow

我只是想知道是否将 extern 变量视为源缓冲区并将其作为参数传递给 strcpy() 或任何其他可能导致缓冲区溢出的函数与传递给它的参数一样不安全并且可能导致缓冲区溢出来自具有高于缓冲区大小的指定限制的 fgets() 函数。

是否应该特别注意这些外部变量，或者是否应该将它们与任何其他变量区别对待？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:20:52.277

`extern`仅定义变量的**链接**它不会以任何其他方式更改变量。

> **是否安全？**

它与任何其他变量一样安全/不安全，被声明的变量`extern`没有任何影响。
使用`strcpy`本身就是不安全的，可能会导致缓冲区溢出。
在 C++ 中，更好的选择是使用`std::string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:22:43.953

假设您完全控制变量的使用，那么它与任何其他“全局”甚至局部变量一样“安全”。如果您无法控制变量的使用及其创建方式（例如，其他人提供了您要链接的模块）并且您不知道他们的编码实践，那么明智的做法是多处理变量而不是通常的怀疑。

不过，一般来说，当然最好使用接受目标缓冲区长度的“安全” strcpy 函数之一，即使您完全控制变量的使用也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:22:56.567

传递任何参数`strcpy`是不安全的，并且可能导致缓冲区溢出。`extern`与这个事实无关。智者使用`std::string`（或支持 Unicode 的变体），但从不使用`char*`或其中`strcpy`任何一个。

# reporting-services - ssrs 用于两个矩阵的列表中的两个数据集

> ID：12956814
> 
> 赞同：0
> 
> 时间：2012-10-18T14:19:04.803
> 
> 标签：reporting-services

在 SSRS 2005 中，我有一个包含两个矩阵和两个数据集的报告。该报告在运行不同参数时运行良好。

现在我被要求修改报告并在“全部”参数中放置另一个选项，这将检索所有参数的结果，一旦提取到 Excel，它将根据每个参数结果在 Excel 中创建不同的工作表。

出于上述目的，我使用了一个列表，因此每个参数结果都在一个页面上，但问题是当我在列表中添加两个矩阵时，第二个矩阵仅检索第一个数据集的值，因为列名相似。我可以使用 First(Fields!Site.Value,"Second DataSet") 提供第二个数据集的第二个矩阵值，但它显然只从第二个数据集中获取第一个值。

我想知道是否无论如何我可以在一个列表中使用两个数据集，而第二个数据集会获取所有值而不仅仅是第一个值。

或者有没有更好的方法在 SSRS 中实现上述目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:03:32.667

1) 从此表达式中删除 First：First(Fields!Site.Value,"Second DataSet")

2) 你的表达式应该只有 =Fields!Site.Value。无需提供数据集名称“Second DataSet”。

# sql - 在 SQL 中计算给定月份的工作日

> ID：12956815
> 
> 赞同：0
> 
> 时间：2012-10-18T14:19:05.367
> 
> 标签：sql, date-arithmetic

我需要找出给定月份的第一个/第二个/第三个/第四个/最后一个工作日。
我还需要周末来安排复发。

我可以找到第一个工作日：

```
SELECT CASE Dayofweek('2012-11-04') 
         WHEN 1 THEN Date_add('2012-11-04', INTERVAL 1 DAY) 
         WHEN 7 THEN Date_add('2012-11-04', INTERVAL 2 DAY) 
         ELSE '2012-11-04' 
       END AS dateStart 
```

同样，我需要获得第二个三分之一，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:26:35.650

On SQL Server, `DATEPART(dw, your_date)` will tell you if it is a weekend. Usually 1 means saturday and 7 means sunday but it can change depending of the server configuration. Read about the datepart function to understand how it works

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:50:17.867

in MySQL:

```
CREATE TABLE calendar
(
  date date not null,
  isBus bit
);
ALTER TABLE calendar
ADD CONSTRAINT PK_calendar
PRIMARY KEY(date);

INSERT INTO calendar VALUES ('2012-10-01', 1);
INSERT INTO calendar VALUES ('2012-10-02', 1);
INSERT INTO calendar VALUES ('2012-10-03', 1);
INSERT INTO calendar VALUES ('2012-10-04', 1);
INSERT INTO calendar VALUES ('2012-10-05', 1);
INSERT INTO calendar VALUES ('2012-10-06', 0);
INSERT INTO calendar VALUES ('2012-10-07', 0);
INSERT INTO calendar VALUES ('2012-10-08', 1);
INSERT INTO calendar VALUES ('2012-10-09', 1);
INSERT INTO calendar VALUES ('2012-10-10', 1);
INSERT INTO calendar VALUES ('2012-10-11', 1);
INSERT INTO calendar VALUES ('2012-10-12', 1);
INSERT INTO calendar VALUES ('2012-10-13', 0);
INSERT INTO calendar VALUES ('2012-10-14', 0);
INSERT INTO calendar VALUES ('2012-10-15', 1);
INSERT INTO calendar VALUES ('2012-10-16', 1);
INSERT INTO calendar VALUES ('2012-10-17', 1);
INSERT INTO calendar VALUES ('2012-10-18', 1);
INSERT INTO calendar VALUES ('2012-10-19', 1);
INSERT INTO calendar VALUES ('2012-10-20', 0);
INSERT INTO calendar VALUES ('2012-10-21', 0);
INSERT INTO calendar VALUES ('2012-10-22', 1);
INSERT INTO calendar VALUES ('2012-10-23', 1);
INSERT INTO calendar VALUES ('2012-10-24', 1);
INSERT INTO calendar VALUES ('2012-10-25', 1);
INSERT INTO calendar VALUES ('2012-10-26', 1);
INSERT INTO calendar VALUES ('2012-10-27', 0);
INSERT INTO calendar VALUES ('2012-10-28', 0);
INSERT INTO calendar VALUES ('2012-10-29', 1);
INSERT INTO calendar VALUES ('2012-10-30', 1);
INSERT INTO calendar VALUES ('2012-10-31', 1);
INSERT INTO calendar VALUES ('2012-11-01', 1);
INSERT INTO calendar VALUES ('2012-11-02', 1);
INSERT INTO calendar VALUES ('2012-11-03', 0);
INSERT INTO calendar VALUES ('2012-11-04', 0);
INSERT INTO calendar VALUES ('2012-11-05', 1);
INSERT INTO calendar VALUES ('2012-11-06', 1);
INSERT INTO calendar VALUES ('2012-11-07', 1);
INSERT INTO calendar VALUES ('2012-11-08', 1);
INSERT INTO calendar VALUES ('2012-11-09', 1);
INSERT INTO calendar VALUES ('2012-11-10', 0);
INSERT INTO calendar VALUES ('2012-11-11', 0);
INSERT INTO calendar VALUES ('2012-11-12', 1);
INSERT INTO calendar VALUES ('2012-11-13', 1);
INSERT INTO calendar VALUES ('2012-11-14', 1);
INSERT INTO calendar VALUES ('2012-11-15', 1);
INSERT INTO calendar VALUES ('2012-11-16', 1);
INSERT INTO calendar VALUES ('2012-11-17', 0);
INSERT INTO calendar VALUES ('2012-11-18', 0);
INSERT INTO calendar VALUES ('2012-11-19', 1);
INSERT INTO calendar VALUES ('2012-11-20', 1);
INSERT INTO calendar VALUES ('2012-11-21', 1);
INSERT INTO calendar VALUES ('2012-11-22', 1);
INSERT INTO calendar VALUES ('2012-11-23', 1);
INSERT INTO calendar VALUES ('2012-11-24', 0);
INSERT INTO calendar VALUES ('2012-11-25', 0);
INSERT INTO calendar VALUES ('2012-11-26', 1);
INSERT INTO calendar VALUES ('2012-11-27', 1);
INSERT INTO calendar VALUES ('2012-11-28', 1);
INSERT INTO calendar VALUES ('2012-11-29', 1);
INSERT INTO calendar VALUES ('2012-11-30', 1); 
```

then to get all Thursdays (5) in October:

```
select @rowid:=@rowid+1, calendar.* from calendar, (SELECT @rowid:=0) as init 
where dayofweek(date) = 5
and month(date) = 10
order by date; 
```

to get the 2nd Thursday in October:

```
select * from
(select @rowid:=@rowid+1 as seqNo, calendar.* from calendar, (SELECT @rowid:=0) as init 
where dayofweek(date) = 5
and month(date) = 10
order by date) x
where seqNo = 2; 
```

# algorithm - 算法：具有约束 max-min<=diff 的随机分布

> ID：12956827
> 
> 赞同：1
> 
> 时间：2012-10-18T14:19:48.917
> 
> 标签：algorithm

我想**随机**`n balls`放入，但有约束`m buckets`

 **```
ballCountMax-ballCountMin <= diff
ballCountMax-ballCountMin as random as possible 
```

和

```
Input: 
  ballCount: n
  bucketCount: m 
  allowedDiff: diff

Output: 
  ballCount distribution for buckets 
```

有没有好的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:31:05.667

要分配球，只需沿着这条线走，询问一个随机数 [0, 1) 如果它小于 1/（剩余的总桶数）将一个球放入垃圾箱并移动到下一个垃圾箱。如果在此结束时，您仍然有球剩余，请评估垃圾箱之间的差异，如果垃圾箱之间的距离与允许的距离一样远，则忽略本次通过的最大垃圾箱。通过找到最小值并忽略任何球来执行此操作，而不是`minimum+difference-1`重复此过程，直到您分发完所有球。

该算法的复杂性取决于球的数量 (n) 和桶的数量 (m)。它的复杂度为`O(mn)`.

我们可以通过意识到每个桶必须包含一定的最小数量的球来显着加快这一速度，例如有 5 个桶和 10 个球，相差 2 每个桶必须至少有 1 个球。因此，在执行主算法之前，我们可以通过将球“预先放置”到每个桶中来节省一半的运行时间。

要计算可预先放置的球的数量，我们只需将球的数量除以桶的数量，`n/m`然后取它的地板和天花板，这样`a = ceiling(n/m)`和`b = floor(n/m)`

现在`b`应该是每个桶 iff 可能的最小球数`a-b = diff`。如果等式最初不是真的，有很多方法可以解决这个问题，例如

```
while(a-b<diff){
  ++a;
  --b;
} 
```

请注意，在所有情况下，此方法都会返回不正确的结果，因此添加一个`a-b = diff`必要的检查。

因此，我们可以预先放置`b`球。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:37:40.013

最简单的方法是生成和测试循环：

```
do {
    distribute_balls_at_random();
} while (constraint_not_satisfied()) 
```

可能还有其他更有效的方法，但这将是最容易编码的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:08:22.110

以下是`O(n)`算法`diff <= 1`：

*   使用[Modern Fisher-Yates shuffle 洗球](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)
*   现在使用简单的除法散列`h(k) = k mod m`将 n 个球分配到 m 个桶中

如果`diff`，则为 0，`n mod m == 0`否则为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:16:05.330

```
function do(int n, int m, int diff){
      buckets = array of size m with initial values = 0
      while(n-- > 0){
          int limit = 1000;
          while(limit > 0){
              int idx = random number from 0 to m
              buckets[idx]+=1
              int min = min_element(buckets)
              int max = max_element(buckets)
              if(buckets[max] - buckets[min] <= diff) break
              buckets[idx]-=1
              limit--
          }
          if(limit == 0){
              int min = min_element(buckets)
              buckets[min]++;
              int max = max_element(buckets)
              if(buckets[max] - buckets[min) > diff)
                  return false; //there is no valid distribution
          }

      }
      print buckets
      return true
} 
```

limit 是您可以根据需要调整的参数。更大的值确保更多的随机性，更少的值确保更好的性能。您可以尝试许多测试用例并得出最适合您的值。**

# c# - CellFormating 获取当前行

> ID：12956833
> 
> 赞同：0
> 
> 时间：2012-10-18T14:20:11.483
> 
> 标签：c#, visual-studio-2010, datagridview, cell-formatting

我正在使用 DataGridView CellFormating 来格式化指定的单元格。我正在尝试的代码：

```
 private void dgwPart_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (this.arts.Type == ArtType.Pak)
        {
            if (dgwPart.Columns[e.ColumnIndex].Name == "Discount")
                e.Value = "";
        }
    } 
```

问题是它改变了所有列的值，但我只希望它改变指定行的值。我该如何管理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:42:34.273

您可以使用 e.CurrentCell 来查找它是否是您想要的行，例如：

```
 If (dvImages.CurrentCell.RowIndex == 10)
    { 
        Debug.WriteLine("Do something")
    }

    If ((int)(dvImages.CurrentCell.Value) = 100)
    {
       ...
    } 
```

***这些应该在单元格格式内，在您检查列之后。你可能需要检查语法，我只是从我的标题中输入的。

# c# - 事件未触发

> ID：12956837
> 
> 赞同：0
> 
> 时间：2012-10-18T14:20:32.643
> 
> 标签：c#

有人可以解释这段代码有什么问题吗？当我打电话给 mco 时，此事件不会触发。

```
 private ModiconComunications.ModiconComObject withEventsField_mco = new ModiconComunications.ModiconComObject();
    private ModiconComunications.ModiconComObject mco
    {
        get { return withEventsField_mco; }
        set
        {
            if (withEventsField_mco != null)
            {
                withEventsField_mco.GetDataReturn -= mco_GetDataReturn;
            }
            withEventsField_mco = value;
            if (withEventsField_mco != null)
            {
                withEventsField_mco.GetDataReturn += mco_GetDataReturn;
            }
        }
    } 
```

当我调用以下行时，它应该触发事件 mco_GetDataReturn，但是它不会。我做错了什么？

```
 mco.GetData(ModiconComunications.ModiconComObject.GetDataType.READ_MODICON_HREGS, 11421, 9, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:23:46.433

好吧，您首先使用EventsField_mco，它是由这一行创建的：

```
private ModiconComunications.ModiconComObject withEventsField_mco = new ModiconComunications.ModiconComObject(); 
```

没有连接它的事件处理程序。除非你在构造函数中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:27:12.887

多一点代码会有所帮助。

您使用新对象初始化 withEventsField_mco。但是，由于您没有在 mco 属性上使用设置器，因此不会连接任何事件。

试试这个来测试这个原因：

```
McocontainingObject.mco = new ModiconComunications.ModiconComObject();
mco.GetData(ModiconComunications.ModiconComObject.GetDataType.READ_MODICON_HREGS, 11421, 9, 0); 
```

或在您的构造函数中

```
class McoContainer{
   private ModiconComunications.ModiconComObject withEventsField_mco;

   public McoContainer(){
      this.mco = new ModiconComunications.ModiconComObject();
   }

   public ModiconComunications.ModiconComObject mco{
      get{...}
      set{...}
   }
} 
```

# java - 如何在pdf上打印bufferedImage

> ID：12956844
> 
> 赞同：6
> 
> 时间：2012-10-18T14:20:49.380
> 
> 标签：java, swing, pdf, graphics, itext

我正在处理 pdf 报告应用程序。使用

itext 5.3.3.jar jdk 1.6

我正在尝试在 pdf 上打印 JTable。我正确获得了 JTable 图像，但无法获得 pdf 格式的图像。无论如何我可以在pdf上打印BufferedImage。我为此使用了以下代码：-

如果可能的话，尝试在 pdf 上写一个 bufferedImage。

```
private static void print(BufferedImage bi,JTable table) { 
    Document document = new Document(PageSize.A4.rotate()); 
    try { 
      PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("F:/jTable.pdf")); 

      document.open(); 
      PdfContentByte cb = writer.getDirectContent(); 
      PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight()); 
      Image image = Image.getInstance(bi , null); 
      image.scaleToFit(table.getWidth(), table.getHeight()); 
      table.addNotify();
      table.validate();
      Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight()); 
      table.print(g2);
      pdfTemplate.addImage(image); 
      /*g2.setColor(Color.BLACK); 
      g2.drawRect(x-2, y-2, table.getWidth()+2, table.getHeight()+2);*/ 
      //table.print(g2); 

      cb.addTemplate(pdfTemplate, 0,20); 

    } catch (Exception e) { 
      System.err.println(e.getMessage()); 
    } 
    document.close(); 
  } 
```

但它向我展示了如下内容： -

图像必须具有绝对定位。线程“主”com.itextpdf.text.exceptions.IllegalPdfSyntaxException 中的异常：不平衡的保存/恢复状态运算符。在 com.itextpdf.text.pdf.PdfContentByte.sanityCheck(PdfContentByte.java:3083) 在 com.itextpdf.text.pdf.PdfContentByte.toPdf(PdfContentByte.java:248) 在 com.itextpdf.text.pdf.PdfFormXObject.( PdfFormXObject.java:88) 在 com.itextpdf.text.pdf.PdfTemplate.getFormXObject(PdfTemplate.java:247) 在 com.itextpdf.text.pdf.PdfWriter.addXFormsToBody(PdfWriter.java:1293) 在 com.itextpdf.text .pdf.PdfWriter.addSharedObjectsToBody(PdfWriter.java:1304) 在 com.itextpdf.text.pdf.PdfWriter.close(PdfWriter.java:1209) 在 com.itextpdf.text.pdf.PdfDocument.close(PdfDocument.java:768 ) 在 com.swing.data 的 com.itextpdf.text.Document.close(Document.java:398)。

以下是测试代码：-

```
package com.swing.data;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.JTableHeader;

import com.itextpdf.text.Document;
import com.itextpdf.text.Image;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfTemplate;
import com.itextpdf.text.pdf.PdfWriter;

class TableImage {
    BufferedImage bi = null;
    public static void main(String[] args) throws Exception {
        Object[][] data = {
            {"Hari", new Integer(23), new Double(78.23), (true)},
            {"James", new Integer(23), new Double(47.64), (false)},
            {"Sally", new Integer(22), new Double(84.81), (true)}
        };
        String[] columns = {"Name", "Age", "GPA", "Pass"};
        JTable table = new JTable(data, columns);
        JScrollPane scroll = new JScrollPane(table);
        JPanel p = new JPanel(new BorderLayout());
        p.add(scroll, BorderLayout.CENTER);
        JOptionPane.showMessageDialog(null, p);
        JTableHeader h = table.getTableHeader();
        int x = table.getWidth();
        int y = table.getHeight();
        table.setIntercellSpacing(new Dimension(0,0));
        table.setDefaultRenderer(Object.class, new ColumnAlignmentRenderer(table.getDefaultRenderer(Object.class)));
        BufferedImage bi = new BufferedImage(
                x, y, BufferedImage.TYPE_INT_RGB);
        Graphics g = bi.createGraphics();
        Graphics2D g2 = (Graphics2D) g;
        table.paint(g2);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
        print(bi,table);
        //createPdf(true,table);
    }
   private static void print(BufferedImage bi,JTable table) { 
        Document document = new Document(PageSize.A4.rotate()); 
        try { 
          PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("F:/jTable.pdf")); 

          document.open(); 
          PdfContentByte cb = writer.getDirectContent(); 
          PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight()); 
          Image image = Image.getInstance(bi , null); 
          image.scaleToFit(table.getWidth(), table.getHeight()); 
          table.addNotify();
          table.validate();
          Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight()); 
          table.print(g2);
          pdfTemplate.addImage(image); 
          /*g2.setColor(Color.BLACK); 
          g2.drawRect(x-2, y-2, table.getWidth()+2, table.getHeight()+2);*/ 
          //table.print(g2); 

          cb.addTemplate(pdfTemplate, 0,20); 

        } catch (Exception e) { 
          System.err.println(e.getMessage()); 
        } 
        document.close(); 
      } 
     private TableImage() {
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-01T15:15:38.723

您可以简单地从[java.awt.image.BufferedImage创建](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)[com.itextpdf.text.Image](https://www.itextsupport.com/apidocs/iText5/5.5.13/com/itextpdf/text/Image.html)，然后使用标准 iText 方法渲染它：

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import javax.imageio.ImageIO;
import com.itextpdf.text.Image;

BufferedImage bufferedImage = ...
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(bufferedImage, "png", baos);
Image iTextImage = Image.getInstance(baos.toByteArray()); 
```

有关更多详细信息，请参阅[iText 图像示例](https://itextpdf.com/en/resources/examples/itext-5-legacy/adding-image-existing-file)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T14:03:57.093

我找到了一个解决方案：

```
 Document document = new Document();

        PdfWriter writer = PdfWriter.getInstance(document,
                               new FileOutputStream("Image.pdf"));
        document.open();

        PdfContentByte pdfCB = new PdfContentByte(writer);
        Image image = Image.getInstance(pdfCB, bufferedImage, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:28:37.597

我找到[了这个](http://stderr.org/doc/libitext-java-doc/www/tutorial/ch10.html)。似乎解释了如何进行绝对定位。我猜你需要这样做。

# xquery - 短语搜索和使用搜索突出显示：Marklogic 中的搜索

> ID：12956849
> 
> 赞同：1
> 
> 时间：2012-10-18T14:21:12.840
> 
> 标签：xquery, marklogic

我想用 search:search 搜索一个短语并突出显示该短语（而不是单个单词）。例如，如果我正在搜索 search:search("leasecoral") 那么以下输出将出现：-

```
<search:match path="fn:doc("abc.xml")/*:text>testing <search:highlight>Lease</search:highlight><search:highlight>CORAL</search:highlight></search:match> 
```

它分别突出租赁和珊瑚。但我希望它像一个短语一样突出“Lease Coral”。有没有办法得到这个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:21:14.783

答案在[http://docs.marklogic.com/guide/search-dev/search-api#id_44520](http://docs.marklogic.com/guide/search-dev/search-api#id_44520)

> “任何短语” 双引号内的任何内容都被视为短语。该示例匹配具有短语“任何短语”（不带双引号）的文档。

您可以使用以下方法进行试验`search:parse`：

```
import module namespace search = "http://marklogic.com/appservices/search"
  at "/MarkLogic/appservices/search/search.xqy";

search:parse('high time')
=>
<cts:and-query strength="20" qtextjoin="" qtextgroup="( )" xmlns:cts="http://marklogic.com/cts">
  <cts:word-query qtextref="cts:text">
    <cts:text>high</cts:text>
  </cts:word-query>
  <cts:word-query qtextref="cts:text">
    <cts:text>time</cts:text>
  </cts:word-query>
</cts:and-query> 
```

这是两个单词查询词的 AND。现在试试这个：

```
import module namespace search = "http://marklogic.com/appservices/search"
  at "/MarkLogic/appservices/search/search.xqy";

search:parse('"high time"')
=>
<cts:word-query qtextpre="&quot;" qtextref="cts:text" qtextpost="&quot;" xmlns:cts="http://marklogic.com/cts">
  <cts:text>high time</cts:text>
</cts:word-query> 
```

这是一个简单的单词查询术语——但文本是一个短语，这就是你想要的。注意嵌套的引号。

# string - 如何在 Node.js 中将 buffer.toString() 输出与另一个字符串连接起来

> ID：12956853
> 
> 赞同：0
> 
> 时间：2012-10-18T14:21:30.530
> 
> 标签：string, node.js, sockets, buffer

我正在使用一个简单的套接字脚本来建立到我的战地英雄服务器的 rcon 连接。我需要从返回的数据中获取种子，然后将其与密码连接起来，以用于创建我需要的登录哈希。但是字符串不会与普通的字符串方法连接。如果我单独输出字符串，它们会显示得很好，但它们根本不会组合，所以我可以散列它们。

```
var net = require('net');
var crypto = require('crypto');
var md5sum = crypto.createHash('md5');

var HOST = '<ip address>', PORT = <port>,
PASSWORD = '<password>';
var client = new net.Socket();
client.connect(PORT, HOST, function() {
    console.log('CONNECTED TO: ' + HOST + ':' + PORT);
});

client.on('data', function(data) {
    console.log(data.toString());
    response = data.toString();
    if (data.toString().slice(0,10) == "### Digest") {
        var seed = response.slice(17); 
        auth = seed.concat(PASSWORD);
        console.log('auth: '+auth);
        hash = require('crypto').createHash('md5').update(auth).digest("hex");
        console.log(hash);
        //client.write('login '+hash+' \n');
    }
    //client.destroy();
});

client.on('close', function() {
    //do something on close
});

client.on('error', function(err) {
    console.log(err);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:33:30.883

我找到了一个适合我的解决方案。不确定我是否结束了，但我决定将两个字符串都传递给新的缓冲区。然后我将它们传递给一个数组来组合它们。（耸耸肩）我认为会的。有更好的解决方案吗？

```
var net = require('net');
var crypto = require('crypto');
var md5sum = crypto.createHash('md5');

var HOST = '<ip address>', PORT = <port>,
PASSWORD = '<password>';
var client = new net.Socket();
client.connect(PORT, HOST, function() {
    console.log('CONNECTED TO: ' + HOST + ':' + PORT);
});

client.on('data', function(data) {
    console.log(data.toString());
    response = data.toString();
    if (data.toString().slice(0,10) == "### Digest") {
        var a = new Buffer(response.slice(17));
        var b = new Buffer(PASSWORD);
        var auth = new Array();
        auth += a.toString().replace(/\n/g,'');
        auth += b.toString();
        hash = require('crypto').createHash('md5').update(auth).digest("hex");
        client.write('login '+hash+' \n');
    }
    //client.destroy();
});

client.on('close', function() {
    //do something on close
});

client.on('error', function(err) {
    console.log(err);
}); 
```

# c# - 如何从此图表中删除 X 轴标签？

> ID：12956855
> 
> 赞同：0
> 
> 时间：2012-10-18T14:21:36.467
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

保持简洁，并且我希望删除标签或至少从我的 X-Axis 修改它们：

![在此处输入图像描述](../Images/88329f5e2c5500513c6d8f53c19e2887.png)

我似乎正在使用这个库的修改版本，它允许我使用一些通常在 wp7 中不起作用的工具。

```
xmlns:charting="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit" 
```

这是截至目前的 LineSeries 定义：

```
<charting:Chart x:Name="chart" Title="Humidity Readings" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Foreground="#FF3C58C8">
    <chartingToolkit:LineSeries x:Name="HumidityGraph" Title="Humidity" BorderThickness="2"  ItemsSource="{Binding Data}" IndependentValuePath="Time" DependentValuePath="Measurement"/>
</charting:Chart> 
```

为了回应**chridam**，我尝试实施他的建议 - 没有成功。

```
 <charting:Chart x:Name="chart" Title="Humidity Readings" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Foreground="#FF3C58C8">
                <charting:Chart.LegendStyle>
                    <Style TargetType="visualizationToolkit:Legend">
                        <Setter Property="Width" Value="0"/>
                        <Setter Property="Height" Value="0"/>
                    </Style>

                </charting:Chart.LegendStyle>
                <!--there doesn't seem to be an AxisLabelStyle that I can create a style in.-->

                    <Style x:Key="EmptyStyle" TargetType="charting:NumericAxisLabel">
                        <Setter Property="StringFormat" Value="" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="charting:NumericAxisLabel">
                                    <TextBlock />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                <chartingToolkit:LineSeries x:Name="HumidityGraph" Title="Humidity" BorderThickness="2"  ItemsSource="{Binding Data}" IndependentValuePath="Time" DependentValuePath="Measurement" TransitionDuration="0:1:1.5" FontSize="18.667">
                    <charting:LinearAxis AxisLabelStyle="{StaticResource EmptyStyle}" Orientation="X" ShowGridLines="True"/>
                </chartingToolkit:LineSeries>
            </charting:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:22:10.863

尝试为 Axis Label 指定一种将`StringFormat`属性值设置为空的样式

```
<chartingToolkit:CategoryAxis> 
   <chartingToolkit:CategoryAxis.AxisLabelStyle> 
      <Style TargetType="AxisLabel"> 
         <Setter Property="StringFormat" Value=""></Setter> 
      </Style> 
   </chartingToolkit:CategoryAxis.AxisLabelStyle> 
</chartingToolkit:CategoryAxis> 
```

**更新：** 另一种选择是应用样式模板

```
<Style x:Key="EmptyStyle" TargetType="charting:NumericAxisLabel"> 
    <Setter Property="StringFormat" Value="" /> 
    <Setter Property="Template"> 
        <Setter.Value> 
            <ControlTemplate TargetType="charting:NumericAxisLabel"> 
                <TextBlock /> 
            </ControlTemplate> 
        </Setter.Value> 
    </Setter> 
</Style> 
```

对此：

```
<charting:LineSeries.DependentRangeAxis>    
        <charting:LinearAxis AxisLabelStyle="{StaticResource EmptyStyle}"    
            Orientation="X"    
            ShowGridLines="True"/>    
</charting:LineSeries.DependentRangeAxis> 
```

有关设置图表样式的更多资源，[样式化 Silverlight 图表](http://www.codeproject.com/Articles/32880/Styling-a-Silverlight-Chart)

# java - 带有列标题的 Primefaces 订单列表

> ID：12956861
> 
> 赞同：1
> 
> 时间：2012-10-18T14:22:03.860
> 
> 标签：java, jsf-2, primefaces

是否可以使用列标题创建 ap:orderlist？我试图将它编码为带有 columnGroups、rows、columns 的 dataTable ，但这没有呈现。

在我的 orderList 中，我想显示 6 列数据并希望用户看到每一列的一个标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:08:15.883

This might not be perfect, but it's how I managed to display some headers for an `orderList`. You just need to adjust the `css` rules, to have the header for example aligned left and whatever you want.

```
<p:orderList styleClass="your-orderlist" value="#{controller.fields}" var="field"
iconOnly="true" effect="clip" itemValue="#{field}" converter="#{fieldConverter}">
    <f:facet name="caption">
        <div class="your-orderlist-header" style="width: 33%;">Field Name</div>
        <div class="your-orderlist-header" style="width: 33%;">Value</div>
        <div class="your-orderlist-header" style="width: 33%;">Type</div>
    <div style="clear: both;" />
    </f:facet>

   <p:column styleClass="your-orderlist-row" style="width:33%;">
       <h:outputText value="#{field.fieldName}" />
   </p:column>
   <p:column styleClass="your-orderlist-row" style="width:33%;">
       <h:outputText value="#{field.value}" />
   </p:column>
   <p:column styleClass="your-orderlist-row" style="width:33%;">
       <h:outputText value="#{field.type}" />
   </p:column>
</p:orderList> 
```

# javascript - IE9 中的回车替换

> ID：12956876
> 
> 赞同：0
> 
> 时间：2012-10-18T14:23:06.540
> 
> 标签：javascript, regex, xml-parsing, internet-explorer-9

我试图在 a 中显示一些数据，`<div>`而 IE9 没有保留多个回车符。这在 Chrome 中可以正常工作，但在 IE9 中不行（它只添加了`<br/>`）这是代码：

```
$.get(url,function(xml){
  $("record",xml).each(function(){
    var profile= $("profile",this).text().replace(/\r\n|\r|\n/g,'~').replace(/~~/g,'<\/p>&nbsp;<p>').replace(/~/g,'<br/>');
    profileRpt += profile
  });
}); 
```

对此的思考过程是标准化，然后添加`<p>`双回车和`<br>`单回车。

我也尝试过简单的替换，

```
var points= $("points",this).text().replace(/\n\r?/g, '<br />'); 
```

再次，这在 Chrome 中运行良好，但在 IE9 中却不行。

有谁知道我可以让它在 IE9 中工作的方法吗？谢谢！！

**更新** 因此，在 IE 中使用时，jQuery 似乎是罪魁祸首，因为它会在任何替换功能之前折叠换行符。

正如我在上面所做的那样，任何人都可以帮助使用从 xml 响应中检索数据的替代（非 jQuery）方法吗？一种可以保留换行符的方法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:27:50.733

Try this:

```
function unifyLineFeeds = function(str) {
    return str.replace("\r\n", "\n").replace("\r", "\n");
} 
```

You can then use this function to output text as HTML following way:

```
// `text` var contains text with line ununified line feed characters.
text = unifyLineFeeds(text);

var lines = text.split("\n"),
    count = lines.length,
    lastIndex = count - 1;

var container = document.getElementById('someContainerToShowFormattedText');

for (var i = 0; i < count; i++) {
    container.appendChild(document.createTextNode(lines[i]));

    if (i < lastIndex) {
        container.appendChild(document.createElement('br'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:37:54.693

```
var points = $("points", this).text().replace(/\r+/g, '').replace(/\n/g, '<br>'); 
```

# javascript - 茉莉花在没有迹象的情况下留下破折号

> ID：12956878
> 
> 赞同：0
> 
> 时间：2012-10-18T14:23:07.737
> 
> 标签：javascript, jasmine

我遇到了茉莉花未执行测试的问题。好吧，它们没有出现在测试的文本描述列表中，只是表示测试应该运行的无用的破折号图像。我正在运行整个测试套件，并且有 12 / 2000 个测试无缘无故地没有运行。

有没有办法将测试的实际名称与图标相关联？我想知道他们来自哪里，目前没有任何迹象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:54:56.683

好的！找到了！

好吧，我从隔离测试开始，我很快意识到我正在设置测试套件`this.id = 123`，这破坏了很多东西。因此，如果您必须跟踪测试的 id，请确保更好地命名它。

# activemq - 在主/从模式下使用带有 JDBC 的 ActiveMQ 会排除使用日志吗？

> ID：12956882
> 
> 赞同：0
> 
> 时间：2012-10-18T14:23:18.523
> 
> 标签：activemq

我的团队希望将我们的 ActiveMQ 队列分布在多个代理之间以实现高可用性。在三种受支持的主从设置（纯、共享文件系统、JDBC）中，我们正在考虑共享文件系统和 JDBC。

我在 ActiveMQ 文档中看到相互矛盾的陈述。JDBC 主从设置能否使用 ActiveMQ 的高性能日志？

在[此页面上](http://activemq.apache.org/masterslave.html)，ActiveMQ 声称

> 它不能使用高性能期刊。

在[这个页面上](http://activemq.apache.org/persistence.html)，ActiveMQ 建议这两者实际上可以一起使用：

> 对于长期持久性，我们建议将 JDBC 与我们的高性能日志结合使用。

任何人都可以阐明这种明显的冲突吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:49:35.673

您不应该将日志与 JDBC 主/从一起使用，因为不会复制日志。master 的日志中任何尚未批量提交到 jdbc 存储的消息都将被隔离，直到重新启动。即：日志对从站不可见。

# twitter-bootstrap - Google Charts 和 Twitter Bootstrap 选项卡

> ID：12956886
> 
> 赞同：8
> 
> 时间：2012-10-18T14:23:36.910
> 
> 标签：twitter-bootstrap, google-visualization

我正在使用 Twitter Bootstrap 框架的网页中通过 Google Chart Tools 创建图表。显示了三种类型的图表 - 饼图、折线图和柱形图，每种都在单独的选项卡中。图表数据通过 Ajax 接收。

通过 Ajax 接收数据后，图表立即显示良好。但是，如果我移动到另一个选项卡，即另一个图表，然后返回到第一个选项卡，图表中的标签会错误地重新对齐。

此处包括显示问题的图像，在选项卡更改之前和之后： ![选项卡更改前的图表](../Images/99a49a52a3b4b70bd493a6f4603a5d06.png) ![选项卡更改后的图表](../Images/a4641cb28f59facbefe17d023e2cbd41.png)

折线图和柱形图也会出现此问题。

但是，如果我更改窗口然后返回，或者如果我隐藏然后重新显示图表，则不会出现问题。仅当我更改选项卡时才会发生。

选项卡的标记如下：

```
 <div class="charts-div" style="text-align: center">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab-pie" data-toggle="tab">Pie</a></li>
                <li><a href="#tab-line" data-toggle="tab">Line</a></li>
                <li><a href="#tab-column" data-toggle="tab">Columns</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab-pie">
                    <div class="chart pie-chart" id="pie-prt"></div>
                </div>
                <div class="tab-pane" id="tab-line">
                    <div class="chart line-chart" id="line-prt"></div>
                </div>
                <div class="tab-pane" id="tab-column">
                    <div class="chart column-chart" id="column-prt"></div>
                </div>
            </div>

    </div> 
```

在 Chrome 22、IE9 和 Firefox 12 中检查。结果是一样的。我没有为选项卡更改或选项卡焦点事件编程额外的代码/事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T19:31:32.147

正如 mohitp 所指出的，davidkonrad 的解决方案存在一些缺点。如果您仍然希望图表在绘制后仍能正常工作（即工具提示），那么您将不得不使用 Javascript 重新绘制图表。

给定 David 的示例（减去虚拟位移代码）只需将带有选项和数据表的图表变量完整地移动到全局范围并再次调用 draw 方法，您可以在此处查看此示例：[redraw-google-chart](https://stackoverflow.com/questions/9354704/redraw-google-chart)

以 David 的示例为例，一旦您在全局范围内获得图表和图表信息，您需要将以下内容绑定到选项卡的显示事件，如下所示：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
    chart.draw(data, options);
  }) 
```

在我自己的应用程序中，我根据服务器端 json 请求绘制图表，并且在某些情况下，我可能在单个页面上有许多图表，因此我将图表和图表信息附加到可以重新处理的全局范围数组中客户端根据需要多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:53:19.480

[是的，使用您的标记和https://google-developers.appspot.com/chart/interactive/docs/quick_start](https://google-developers.appspot.com/chart/interactive/docs/quick_start)上的饼图示例非常容易复制（nix/各种浏览器）

在将文本绘制到隐藏选项卡时，API 似乎扩展了 SVG 的中间中心。但是我找到了解决方法：将图表/线条/条绘制到虚拟元素并立即将它们移动到选项卡容器。

上面更改的图表示例：

```
function drawChart(id) {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows([
      ['Mushrooms', 3],
      ['Onions', 1],
      ['Olives', 2],
      ['Zucchini', 1],
      ['Pepperoni', 2]
    ]);
    var options = {'title':'How Much Pizza I Ate Last Night',
                   'width':400,
                   'height':300};

    var chart = new google.visualization.PieChart(document.getElementById('dummy'));
    chart.draw(data, options);
    $('#dummy').children().remove().appendTo('#'+id);
  } 
```

在代码中的某处添加

```
<div id="dummy"></div> 
```

绘制图表（通过 dummy 到你的 .. `class="chart xxx" id="xxx-prt"`）

```
<script type="text/javascript">
$(document).ready(function() {
    drawChart('pie-prt');
    drawChart('line-prt');
    drawChart('column-prt');
});
</script> 
```

然后图表在不同的选项卡上以相同的方式呈现，这是一个小提琴[http://jsfiddle.net/sjW6Z/](http://jsfiddle.net/sjW6Z/)证明它确实有效:)

# oracle - 在 Oracle apex_util.json_from_sql 中与顶点项目之间使用

> ID：12956887
> 
> 赞同：0
> 
> 时间：2012-10-18T14:23:36.913
> 
> 标签：oracle, plsql, oracle-apex

当我们尝试在两个数字之间找到一个值时，有人知道如何在应用程序进程中使用 apex_util.json_from_sql 中的 apex 项吗？我的查询就像下面的这个：

```
SELECT  
ID , locn_x lat, locn_y lon
FROM database where locn_x between :P1_SEBOUNDLAT and :P1_NWBOUNDLAT 
```

但它没有返回任何结果。Apex 项目 :P1_SEBOUNDLAT 和 :P1_NWBOUNDLAT 有一个值，因为我显示它，我尝试在数据库中进行查询并给我结果。似乎：没有 = 成为此查询中的问题。因为当我尝试查询

```
where locn_x > :P1_SEBOUNDLAT 
```

它给了我一个错误

请有人给我一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:30:11.073

根据您的评论，您正在执行此操作：

```
APEX_UTIL.JSON_FROM_SQL(
  'SELECT ID ,locn_x lat, locn_y lon FROM table where locn_x between '
|| wwv_flow.g_x05
|| ' and '
|| wwv_flow.g_x03
|| )'); 
```

由于最后一位缺少引号（'），因此出现“缺少表达式”错误：

```
|| ')'); 
```

# fortran - Fortran“错误：数组表达式的形状不符合。”

> ID：12956888
> 
> 赞同：0
> 
> 时间：2012-10-18T14:23:40.003
> 
> 标签：fortran

我知道有人问过类似的问题。它说错误可能来自尝试将数组分配给标量。正如它所说，我一次又一次地检查了我的程序，但我真的没有发现我的程序有任何问题。

具体的错误信息是：

> D:\src\fortran\Kramers\kramers.f90(54) ：错误：数组表达式的形状不符合。[Y2] y2(1)=sqrt(2.0d0*T)*[h*omega(2)-h1*omega(3)+h1*h*omega(4)-h1*h1*omega(6)+& ----------------^
> D:\src\fortran\Kramers\kramers.f90(65) ：错误：数组表达式的形状不符合。[Y2] y2(2)=sqrt(2.0d0*T)*[omega(1)-h*omega(2)+h*h*omega(3)-h1*h*omega(4)+h1*h1 *omega(6)+& ----------------^
> 执行 df.exe 时出错。
> 
> kramers.obj - 2 个错误，0 个警告

这是我的程序中导致错误的部分：

```
real*8 :: y(2),y2(2),omega(10),V4

real*8 :: h,h1,T,ngt

real*8,external :: V,V1,V2,V3

y2(1) = sqrt(2.0d0*T)*[h*omega(2) - h1*omega(3) + h1*h*omega(4) - h1*h1*omega(6) + &
    (-h1*h*omega(4) + 2.0d0*h1*h1*omega(6))*V2(y(1)) - h1*h1*y(2)*omega(10)*V3(y(1))]

y2(2) = sqrt(2.0d0*T)*[omega(1) - h*omega(2) + h*h*omega(3) - h1*h*omega(4) + h1*h1*omega(6) + &
    (-h*h*omega(3) + 2*h1*h*omega(4) - 3*h1*h1*omega(6))*V2(y(1)) + &
    (-h1*h*y(2)*omega(5) + h1*h1*y(2)*omega(7) + h1*h1*y(2)*omega(8) + h1*h1*y(2)*omega(10))*V3(y(1)) + &
    h1*h1*V2(y(1))*V2(y(1))*omega(6) + h1*h1*V1(y(1))*V3(y(1))*omega(8) - 0.5d0*h1*h1*V4*y(2)*y(2)] - h1*h*T*V3(y(1))*ngt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:34:58.197

您使用方括号`[]`表示数组构造函数。你必须使用普通的`()`。

# mongodb - 维基百科对 Map Reduce 的 reduce 的解释不正确吗？

> ID：12956892
> 
> 赞同：5
> 
> 时间：2012-10-18T14:23:49.160
> 
> 标签：mongodb, mapreduce

[MongoDB](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction)对reduce阶段的解释说：

> map/reduce 引擎可以迭代调用 reduce 函数；因此，这些函数必须是幂等的。

这就是我一直理解 reduce 在一般 map reduce 环境中工作的方式。在这里，您可以通过减少每台机器上的值来对 N 台机器上的值求和，然后将这些输出发送到另一个减速器。

[维基百科说](http://en.wikipedia.org/wiki/MapReduce)：

> 框架为排序顺序中的每个唯一键调用一次应用程序的 Reduce 函数。Reduce 可以遍历与该键关联的值并产生零个或多个输出。

在这里，您需要将所有值（使用相同的键）移动到同一台机器上进行求和。将数据移动到函数似乎与 map reduce 应该做的相反。

维基百科的描述是否过于具体？还是 MongoDB 破坏了 map-reduce？（或者我在这里错过了什么？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:35:02.870

这就是[Google 描述](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/mapreduce-osdi04.pdf)原始 Map Reduce 框架的方式：

> ## 2 编程模型
> 
> [...]
> 
> 中间值通过迭代器提供给用户的 reduce 函数。这使我们能够处理太大而无法放入内存的值列表。

然后：

> ## 3 实施
> 
> [...]
> 
> `6.`reduce 工作程序遍历已排序的中间数据，并且对于遇到的每个唯一中间键，它将键和相应的一组中间值传递给用户的 Reduce 函数。

所以只有一次调用`Reduce`. 通过在本地使用特殊的*组合器*函数来解决移动大量小的中间对的问题：

> ## 4.3 合路器功能
> 
> 在某些情况下，每个映射任务生成的中间键存在大量重复 [...] 我们允许用户指定一个可选`Combiner`函数，该函数在通过网络发送此数据之前对其进行部分合并。
> 
> 该`Combiner`函数在每台执行地图任务的机器上执行。通常使用相同的代码来实现组合器和归约函数。[...]
> 
> 部分合并显着加快了某些类型的 MapReduce 操作。

# TL;博士

Wikipedia 遵循最初的 MapReduce 设计，MongoDB 设计者采取了稍微不同的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T15:11:39.400

根据[谷歌 MapReduce 论文](http://research.google.com/archive/mapreduce.html)

> 当reduce worker 读取所有中间数据时，它会按中间键对其进行排序，以便将所有出现的相同键组合在一起。

[MongoDB文档](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction)说

> map/reduce 引擎可以迭代调用 reduce 函数；因此，这些函数必须是幂等的。

因此，对于 Google 论文中定义的 MapReduce，一旦特定键的数据传输到化简器，化简就会开始处理键/值对。但是，正如 Tomasz 提到的，MongoDB 似乎以稍微不同的方式实现 MapReduce。

在 Google 提出的 MapReduce 中，Map 或 Reduce 任务将处理 KV 对，但在 MongoDB 实现中，Map 和 Reduce 任务将同时处理 KV 对。MongoDB 方法可能效率不高，因为节点没有得到有效使用，并且集群中的 Map 和 Reduce 插槽可能已满并且可能无法运行新作业。

Hadoop 中的问题是，尽管 reducers 任务在 map 完成处理数据之前不会处理 KV 对，但可以在 mapper 完成处理之前生成 reducers 任务。参数“mapreduce.job.reduce.slowstart.completedmaps”设置为“0.05”，[描述](http://hadoop.apache.org/docs/r0.23.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml)为“在为作业安排reduce之前应该完成的作业中映射数量的分数”。

> 在这里，您需要将所有值（使用相同的键）移动到同一台机器上进行求和。将数据移动到函数似乎与 map reduce 应该做的相反。

此外，数据局部性被考虑用于 map 任务而不是 reduce 任务。对于 reduce 任务，数据必须从不同节点上的不同映射器移动到 reducer 以进行聚合。

只是我的2c。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T09:09:26.080

TLDR : reduce (mongo) 就像组合器，而 finalize(mongo) 几乎就像 reducer，只是它只需要一个键/值。如果您需要将所有数据放在 reduce (hadoop) 函数中，请将其与 reduce (mongo) 聚合到一个大数组中，然后将其传递给 finalize。在输出值中使用某种标志来执行此操作。

我就是这样做的，我认为它会吸收大量数据，但我不知道使用 mongodb mapreduce 的任何其他方法:(（但我对它不是很有经验）

# awk - 使用 AWK 操作 CSV 文件

> ID：12956893
> 
> 赞同：1
> 
> 时间：2012-10-18T14:23:52.970
> 
> 标签：awk

我是新来的`awk`，我被要求格式化以下`csv`文件（其中每一行代表一天，每个小时都有值）

```
3244,3138,3068,3083,3231,3624,3932,4018,4095,4195,4260,4328,4400,4431,4423,4418,4377,4331,4367,4354,4220,3919,3647,3415
3280,3187,3142,3165,3353,3772,4093,4126,4151,4180,4146,4141,4111,4071,4009,3942,3902,3871,3997,4005,3838,3657,3492,3332 
```

.... 等等 5 天，在 7 个不同的文件中，格式如下：

```
4    UC.DB                                  
*************************                               
*                               
***************************                         
*                                       
7 UC_SYSTEM_SCHED,2;0,2;1,2;2,2;3,2;4,2;5,2;6,2;7,2;8,2;9,2;10,2;11,2;12,2;13,2;14,2;15,2;16,2;17,2;18,2;19,2;20,2;21,2;22,2;23
1,3244,3138,3068,3083,3231,3624,3932,4018,4095,4195,4260,4328,4400,4431,4423,4418,4377,4331,4367,4354,4220,3919,3647,3415   
 0                                      
*                               
 0                                      
0 
```

目的是从一个`CSV`包含 7 个不同行的文件中创建 7 个具有这种格式的不同文件。如您所见，前 7 行对于创建的所有 7 个文件都是相同的（第 8 行中的“1”和第 9、10、11、12 行也将保持不变）。唯一的区别是每天导入的数据。

这是我到目前为止所尝试的：

```
awk -F "," NR==1'{printf "4, UC.DB\n***************\n*\n***************\n*\n7,UC_SYSTEM_SCHED,2;0,2;1,2;2,2;3,2;4,2;5,2;6,2;7,2;8,2;9,2;10,2;11,2;12,2;13,2;14,2;15,2;16,2;17,2;18,2;19,2;20,2;21,2;22,2;23\n1,"}''NR==1'UC_Load_Data.csv > awk.file 
```

它适用于前 8 行，但是当我尝试添加最后 4 行时，我不断收到错误消息。

我知道这可能没有多大意义，而且理解起来令人困惑，但是，我非常感谢您的时间，希望您能帮助我。谢谢..！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:40:45.943

你的语法是错误的。您的：

```
awk -F "," NR==1'{printf "..."}''NR==1'UC_Load_Data.csv 
```

在有效的 awk 语法中（并假设尾随 NR==1 是一个错字）将是：

```
awk -F "," 'NR==1{printf "...\n"}' UC_Load_Data.csv 
```

我认为你想要的是这样的：

```
awk -F "," '
   BEGIN { hdr="4, UC.DB\n******"\n*\n*******\n*\n7,UC_SYSTEM_SCHED,2;0,2;...23\n" }
   { print hdr NR "," $0 > "file_" NR }
' UC_Load_Data.csv 
```

# sqlite - Flex：如何将 S:list 中的 Sqlist 查询绑定到 S:Textarea

> ID：12956899
> 
> 赞同：5
> 
> 时间：2012-10-18T14:24:04.570
> 
> 标签：sqlite, apache-flex, actionscript, flex4.5, flexbuilder

在 flex builder 4.6 中，我试图绑定来自 am sql 查询的数据，显示在`<s:List>`带有项目渲染器的`<s:Textarea>`

## 我的代码如下：

```
<s:List id="listapagar" x="304" y="276" width="330" height="42" borderVisible="false"
        color="#FF0000" dataProvider="{dataProvider}" enabled="false" fontSize="22"
        fontStyle="italic" fontWeight="bold" labelField="nome" textAlign="center"
        textDecoration="underline">
    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
            <s:TextArea id="apagar" width="330" height="42" text="R$ {data.valorapagar}" />      
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:List> 
```

* * *

在这里，我的 sql 通过以下方式显示`<s:list>`：

```
protected function buttonX():void
        {
            var sqlConnection:SQLConnection = new SQLConnection();
            sqlConnection.open(File.applicationDirectory.resolvePath("testeDb.sqlite"));

            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = "SELECT * FROM comandatual order by numerodatransacao desc limit 1 ";
            stmt.execute();

            dataProvider = new ArrayCollection(stmt.getResult().data);
        } 
```

* * *

之后，我尝试获取 s:TextArea id="apagar" 显示的结果并与另一个文本区域绑定，以执行简单的减法计算，如下所示：

* * *

```
<fx:Binding source="apagar.text" destination="restroco.text"/> 
```

* * *

```
<fx:Model id="Calculos" >

        <Calculos>
            <!-- Perform a calculation. -->
            <a>{(Number(restroco.text)) - 3}</a>
            </Calculos>
    </fx:Model> 
```

* * *

但是此时，flex返回一个不能让我前进的错误：

> 1120：访问未定义的属性 apagar。弹性问题

* * *

所以，我被卡住了，如果有人想查看我的完整代码，他们在这里：

[http://freetexthost.com/srxslotf1x](http://freetexthost.com/srxslotf1x)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T18:27:24.840

正如@RIAStar 解释的那样，您`fx:Model`无法访问`apagar`. 除了建议的解决方案，您还可以使用`IndexChangeEvent`：

```
<fx:Script>
    <![CDATA[
        import spark.events.IndexChangeEvent;

        private var apagarNum:Number = NaN;

        protected function selectionChangedHandler(event:IndexChangeEvent):void
        {
            apagarNum = Number(listapagar.selectedItem.valorapagar);
        }

    ]]>
</fx:Script>

<fx:Model id="Calculos" >
    <Calculos>
        <!-- Perform a calculation. -->
        <c>{(Number(restroco.text)) - 3}</c>
        <!-- calcular com valor a pagar -->
        <d>{apagarNum - 3}</d>
    </Calculos>
</fx:Model>

<s:List id="listapagar" change="selectionChangedHandler(event)" ...> 
```

# c++ - 两个类中的循环依赖 - 代码无法编译

> ID：12956900
> 
> 赞同：0
> 
> 时间：2012-10-18T14:24:06.130
> 
> 标签：c++, g++, dependencies, header-files, circular-dependency

所以，我正在尝试用 C++ 开发一个非常简单的游戏（我一直使用 C#，我只是在深入研究 C++），并且想复制我用 C# 制作的简单（尽管设计不佳）的组件实体系统。

此代码不能使用带有 C++11 标准的 g++ 进行编译。

我该如何解决？我必须更改设计，还是有解决方法？

* * *

[格式良好的馅饼： http](http://pastie.org/5078993) ://pastie.org/5078993

* * *

**Eclipse 错误日志**

```
Description Resource    Path    Location    Type
Invalid arguments '
Candidates are:
void push_back(Component * const &)
'   Entity.cpp  /TestEntity line 15 Semantic Error
Invalid arguments '
Candidates are:
__gnu_cxx::__normal_iterator<Component * *,std::vector<Component *,std::allocator<Component *>>> erase(__gnu_cxx::__normal_iterator<Component * *,std::vector<Component *,std::allocator<Component *>>>)
__gnu_cxx::__normal_iterator<Component * *,std::vector<Component *,std::allocator<Component *>>> erase(__gnu_cxx::__normal_iterator<Component * *,std::vector<Component *,std::allocator<Component *>>>, __gnu_cxx::__normal_iterator<Component * *,std::vector<Component *,std::allocator<Component *>>>)
'   Entity.cpp  /TestEntity line 19 Semantic Error
Method 'update' could not be resolved   Entity.cpp  /TestEntity line 22 Semantic Error
Invalid arguments '
Candidates are:
#0 remove(#0, #0, const #1 &)
'   Entity.cpp  /TestEntity line 19 Semantic Error 
```

* * *

**组件.h**

```
#ifndef COMPONENT_H_
#define COMPONENT_H_

class Entity;

class Component {
private:
    Entity* parentPtr;

public:
    virtual void init();
    virtual void update();
    virtual ~Component();
    void setParent(Entity* mParentPtr);
};

#endif /* COMPONENT_H_ */ 
```

* * *

**组件.cpp**

```
#include "Component.h"

void Component::setParent(Entity* mParentPtr) { parentPtr = mParentPtr; } 
```

* * *

**实体.h**

```
#ifndef ENTITY_H_
#define ENTITY_H_

#include "Component.h"

class Entity {
private:
    std::vector<Component*> componentPtrs;

public:
    ~Entity();
    void addComponent(Component* mComponentPtr);
    void delComponent(Component* mComponentPtr);
    void update();
};

#endif /* ENTITY_H_ */ 
```

* * *

**实体.cpp**

```
#include <iostream>
#include <vector>
#include <list>
#include <string>
#include <sstream>
#include <algorithm>

#include "Entity.h"
#include "Component.h"

Entity::~Entity() {
    for (auto &componentPtr : componentPtrs) delete componentPtr;
}
void Entity::addComponent(Component* mComponentPtr) {
    componentPtrs.push_back(mComponentPtr);
    mComponentPtr->setParent(this);
}
void Entity::delComponent(Component* mComponentPtr) {
    componentPtrs.erase(remove(componentPtrs.begin(), componentPtrs.end(), mComponentPtr), componentPtrs.end());
    delete mComponentPtr;
}
void Entity::update() { for (auto &componentPtr : componentPtrs) componentPtr->update(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:59:03.587

事实证明，实际上不存在循环依赖问题，代码编译链接正常。“错误”实际上只是 Eclipse 过分热心的代码分析报告——在命令行上分别编译每个 .cpp 文件

```
g++ -c thatfile.cpp 
```

不会产生编译错误，并且可以一次性编译和链接

```
g++ Entity.cpp Component.cpp 
```

产生一个工作可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:27:29.470

您必须包含`Entity.h`在`component.cpp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:45:41.963

是否有可能，问题不是循环包含，而是代码本身？例如：“无法解析方法'更新'”给你一个提示，你必须定义`Component::update`方法，与-方法相同`Component::init`，因为它们不是纯虚拟的。尝试先删除此错误，然后查看是否有帮助

**更新：** 所以...我测试了你的代码。不是用 eclipse，而是用 Visual Studio 2008。我`for (auto...`用 "normal" 替换了这些东西`for (std::vector<Component*>::iterator...`，因为这在这个版本的 VS 中不可用。正如我可以说的，没有循环依赖，但你忘记了`#include <vector>`Entity.h 文件。并且缺少这些虚拟函数的定义，但是您说您已经添加了它们，所以忘记了；）

# eclipse - 如何在 Ant batchtest 中引用所有 junit 测试

> ID：12956902
> 
> 赞同：1
> 
> 时间：2012-10-18T14:24:09.000
> 
> 标签：eclipse, ant, junit

我们正在使用 ant 来运行我们所有的 JUnitTest。我们的批处理测试看起来像：

```
<batchtest todir="${test.reports}">
    <!-- First fork -->
    <fileset dir="${build.out.dir}/plugins/plugin1/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/plugin2/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/plugin3/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/plugin4/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/plugin5/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/plugin6/test" includes="**/*Test.java" />
    <fileset dir="${build.out.dir}/plugins/util/test" includes="**/*Test.java" />
</batchtest> 
```

这样做的问题是，如果有人添加新插件并忘记在此处添加文件集，则测试将无法运行。所以我试着写这样的东西：

```
<batchtest todir="${test.reports}">
    <!-- First fork -->
    <fileset dir="${build.out.dir}/plugins" includes="**/test/**/*Test.java" />
</batchtest> 
```

但是运行它时所有测试都失败了。我得到

```
java.lang.ClassNotFoundException: build.test.com.something.something.something.something.something.something.somethngTest
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186) 
```

任何想法？

# .net - 在.Net中处理与时区有关的日期时间的最佳方法

> ID：12956904
> 
> 赞同：4
> 
> 时间：2012-10-18T14:24:35.480
> 
> 标签：.net, sql-server, timezone, timezone-offset

我最近在 .net 中的时区感知 Web 应用程序中一直在搞乱时区。我提出了以下处理时区的解决方案。

**我的解决方案是：**

*   让用户配置文件存储他们所在的时区。
*   在 Web 服务器上进行与 UTC 的所有转换。
*   将数据库中的日期存储为 UTC。

**我的问题是：**

1.  你们认为这是.net 中最好的方法吗？
2.  在 UTC 中使用 datetime2 是否足够好，或者我应该将客户时间与偏移量存储在数据库中（基本上是 10-10-2012 4:00:00 vs 10-10-2012 00:00:00 4:00）？
3.  顺便说一句，你们中的一些人可能会注意到，虽然跨 DST 的跳转是在服务器代码中处理的，但将偏移量传递给 DB 上的 SP 等将无法正确处理 DST。对此有什么想法吗？

**这是时间转换的示例代码。**

```
 private TimeZoneInfo GetTimeZoneInfo()
    {
        var timeZone = TimeZoneDropdown.SelectedValue;

        switch (timeZone)
        {
            case "Eastern":
                return TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
            case "Central":
                return TimeZoneInfo.FindSystemTimeZoneById("Central Standard Time");
            case "Mountain":
                return TimeZoneInfo.FindSystemTimeZoneById("Mountain Standard Time");
            case "Pacific":
                return TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
            case "Alaskan":
                return TimeZoneInfo.FindSystemTimeZoneById("Alaskan Standard Time");
        }

        return TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
    }

    public DateTime ConvertLocalDateTimeToUtc(DateTime dateTime)
    {
        var timeZone = GetTimeZoneInfo();

        return TimeZoneInfo.ConvertTimeToUtc(DateTime.SpecifyKind(dateTime, DateTimeKind.Unspecified), timeZone);
    }

    public DateTime ConvertUtcToLocalDateTime(DateTime dateTime)
    {
        var timeZone = GetTimeZoneInfo();

        return TimeZoneInfo.ConvertTimeFromUtc(DateTime.SpecifyKind(dateTime, DateTimeKind.Utc), timeZone);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T19:34:15.763

您当前的方法没有*错*，但是您可以通过跟踪偏移量做得更好。

当您谈论偏移时，您似乎将它们与时区相关联。但是要意识到大多数时区有两种不同的偏移量，一种是标准时间，一种是日光时间。两者的 Microsoft 时区 ID 在字符串中仍有“标准”，因此这可能是混淆的一部分。但是`TimeZoneInfo`您正在使用的确实是在跟踪标准偏移量和日光偏移量。

您需要将偏移量与每个单独的日期和时间相关联。您可以使用`DateTimeOffset`.Net 中的类和`datetimeoffset`SQL Server 中的数据类型来做到这一点。

如果您始终如一地使用这些，那么与 UTC 相互转换的需求就消失了。

# facebook - 自定义好友邀请对话框

> ID：12956907
> 
> 赞同：0
> 
> 时间：2012-10-18T14:24:41.453
> 
> 标签：facebook, facebook-javascript-sdk

这很简单，有没有办法为应用邀请自定义 Facebook 好友多选对话框？我们谈论的是前端设计，而不是附加功能。

我的直观理解表明很难更改 JS SDK 中的现有代码，也许我需要一个可扩展的副项目来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:45:23.103

简短回答=是

对话框本身不是您可以更改的，但您可以以任何您喜欢的方式形成您的多朋友选择。

这是 Facebook 的示例 [自定义多朋友选择器示例](http://developers.facebook.com/docs/guides/games/custom-muti-friend-selector/)

# xml - 将txt文件转换为xml文件的脚本

> ID：12956909
> 
> 赞同：-2
> 
> 时间：2012-10-18T14:24:41.903
> 
> 标签：xml, text, matrix

如何转换一组具有如下数据的 txt 文件：

0.6613 0.4688 2.0165 1.0241 0.9544 1.8286 2.6666 2.6174 3.8877 1.4787 3.6946 2.7957 0.3338 0.3695 3.0863 1.1152 1.2474 0.3390 3.9634 4.0457 4.0211 3.8732 3.8479 4.0380 3.8116 3.7662 3.7878 3.7849 3.7670 3.7846 3.7931 3.8043 3.7668 3.8029 3.7851 3.8063 3.8167 3.8181 3.8012 3.8309 3.8331 3.8307 3.8467 3.8280 3.8547 3.8504 3.8394 3.8515 3.8658 3.8679 3.8691 3.8740 3.8735 3.8794 3.8782 3.9109 3.8806 3.8791 3.8723 3.8733 3.8651 3.8850 3.8900 3.8621 3.8876 3.8836 3.8860 3.8856 3.8808 3.8902 3.8878 3.8799 3.8753 3.8724 3.8796 3.8830 3.8848 3.8857 3.8882 3.8884 3.8919 3.8893 3.8836 3.8694 3.8718 3.8673 3.8906 3.8956 3.8735 3.8794 3.8782

成一个 xml 文件？

编辑：我正在使用 Matlab 和 Visual c++ express 在 Windows 7 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:35:53.470

假设您的语言（或编辑器，如果它是一次性的）支持它，您可以使用类似于以下的正则表达式...

搜索：

```
(\d+\.?\d+) 
```

代替：

```
<node>\1</node> 
```

# windows - isZoomed() 功能在我的客户端代码中不起作用

> ID：12956912
> 
> 赞同：1
> 
> 时间：2012-10-18T14:24:51.407
> 
> 标签：windows, winapi, win32-process

我想知道我的客户端应用程序是否最大化了 mstsc(RDP) 窗口。所以我正在使用：

IsZoomed（mstsc 的句柄）；但即使我最大化窗口，我总是得到零作为返回值？

我该如何解决这个问题...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:39:38.530

`IsZoomed`检测窗口是否在`WS_MAXIMIZED`意义上最大化，这意味着它有一个带有最大化按钮的标题栏。但是全屏应用程序不能那样工作，这就是为什么`IsZoomed`总是报告“它没有通过标题栏最大化”。您将不得不使用一些替代检测机制，例如查看窗口尺寸。

# javascript - livesearchgridpanel上的分页工具栏问题

> ID：12956914
> 
> 赞同：1
> 
> 时间：2012-10-18T14:24:58.813
> 
> 标签：javascript, html, extjs4.1, livesearch

我正在尝试在我的 livesearchgridpanel 上设置一个分页工具栏。我通过 Httpproxy 获取数据，所以这是我的商店：

```
tempStore = new Ext.data.Store
    ({
        groupField     : default_groupby_s,
        model          : 'reportWorkspace',
        allowFunctions : true,
        autoSync       : false,
        pageSize       : 20,
        autoLoad       : true,
        remoteSort     : false,
        proxy          : new Ext.data.HttpProxy
        ({
            url           : url_s,
            actionMethods : 
            {
                read : 'POST'
            },
            reader        : 
            {
                type            : 'json',
                root            : 'workspace_report',
                successProperty : 'success'
            }
        })
    });
return tempStore ;
} 
```

这是我的分页工具栏，它将包含在我的 LivesearchgridPanel 中：

```
{
    xtype: 'pagingtoolbar',
    store: tempStore ,   
    dock: 'bottom',
    pageSize:20,
    displayInfo: true
} 
```

问题是分页工具栏正确显示页面，但在我的网格的情况下，它同时显示所有数据（在每一页中）。是否可以在自动加载参数中不设置任何起点或限制的情况下做到这一点？我只想下载我所有的数据，然后用页面正确显示

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:15:41.393

我看到几个不一致的地方：

1.  LiveGrid 根本不是为分页而构建的，而是作为它的替代方案。
2.  ExtJS 4.1x 不再使用 HTTP 代理类，而是使用 type: 'ajax' 代理配置。
3.  如果要对数据进行分页，则需要对其进行远程排序，否则将没有意义。
4.  您必须确保您的网格面板和您的分页工具栏引用同一个商店实例。网格面板中的常见配置是：

.

```
this.dockedItems = [
        {
            xtype:'pagingtoolbar',
            store:this.store, // same store GridPanel is using
            dock:'bottom',
            displayInfo:true
        }
    ]; 
```

# c# - 可空枚举的扩展方法

> ID：12956916
> 
> 赞同：15
> 
> 时间：2012-10-18T14:25:07.570
> 
> 标签：c#, .net, compiler-construction, enums, nullable

我正在尝试为可空枚举编写*扩展方法*。
就像这个例子：

```
// ItemType is an enum
ItemType? item;
...

item.GetDescription(); 
```

所以我写了这个方法，由于某种我不明白的原因无法编译：

```
public static string GetDescription(this Enum? theEnum)
{
    if (theEnum == null)
        return string.Empty;

    return GetDescriptionAttribute(theEnum);
} 
```

我收到以下错误`Enum?`：

> 只有不可为空的值类型可以是 system.nullable 的基础

为什么？枚举不能有值`null`！

**更新：**

*如果有很多枚举，`ItemType`这只是其中一个示例。*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T14:31:09.533

`System.Enum`是 a `class`，所以只需删除 the `?`，这应该可以工作。

（通过“这应该工作”，我的意思是如果你传入一个 null-valued `ItemType?`，你会`null` `Enum`在方法中得到一个。）

```
public static string GetDescription(this Enum theEnum)
{
    if (theEnum == null)
        return string.Empty;
    return GetDescriptionAttribute(theEnum);
}
enum Test { blah }

Test? q = null;
q.GetDescription(); // => theEnum parameter is null
q = Test.blah;
q.GetDescription(); // => theEnum parameter is Test.blah 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:36:39.623

您可以简单地使您的扩展方法通用：

```
public static string GetDescription<T>(this T? theEnum) where T : struct
{ 
    if (!typeof(T).IsEnum)
        throw new Exception("Must be an enum.");

    if (theEnum == null) 
        return string.Empty; 

    return GetDescriptionAttribute(theEnum); 
} 
```

不幸的是，您不能`System.Enum`在通用约束中使用，因此扩展方法将显示所有可为空的值（因此需要额外检查）。

**编辑：** C# 7.3 引入了新的泛型约束，现在允许将泛型参数限制为枚举，如下所示：

```
public static string GetDescription<T>(this T? theEnum) where T : Enum
{ 
    if (theEnum == null) 
        return string.Empty; 

    return GetDescriptionAttribute(theEnum); 
} 
```

感谢@JeppeStigNielsen 指出这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T14:28:39.063

您应该在方法签名中使用实际的枚举类型：

```
public static string GetDescription(this ItemType? theEnum) 
```

`System.ValueType`并且`System.Enum`不被视为值类型（仅从它们派生的类型），因此它们是可为空的（并且您不要将它们指定为可为空的）。尝试一下：

```
// No errors!
ValueType v = null;
Enum e = null; 
```

你也可以试试这个签名：

```
public static string GetDescription<T>(this T? theEnum) where T: struct 
```

不过，这也允许`struct`s，这可能不是您想要的。我想我记得一些库添加了`enum`编译后的类型约束（C# 不允许它）。只需要找到它...

**编辑**：找到它：

[http://code.google.com/p/unconstrained-melody/](http://code.google.com/p/unconstrained-melody/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:28:18.563

也许更好的是为您的枚举添加额外的价值并将其称为 null :)

# mysql - SET 运算符在 mysql 中的使用。解释？

> ID：12956919
> 
> 赞同：1
> 
> 时间：2012-10-18T14:25:19.933
> 
> 标签：mysql

好吧，我看到没有第一行，第二个查询将不起作用。但我不明白为什么。为什么没有 SET 就不能工作？集合是什么意思？

```
$query = "update messages set $name=$name+1 where id='$idd'";
$db->setQuery( $query );
$db->query( $query ) or die('blogai');

$query2 = "select up,down from messages where id='$idd'";
$db->setQuery( $query2 );
$db->query( $query2 ) or die('blogai'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:28:11.527

在数据库查询编辑器中检查您的 sql 请求：

```
select up,down from messages where id='yourValue' 
```

# .net - 流容器垂直对齐 VB.NET

> ID：12956922
> 
> 赞同：1
> 
> 时间：2012-10-18T14:25:23.810
> 
> 标签：.net, vb.net, winforms, alignment

我有一个`Label`随着程序运行而变化的长度（文本被修改）。我正在尝试将 this`Label`和`PictureBox`. 为此，我确实将它们放入了`FlowLayoutPanel`.

那么问题是这两个元素没有垂直对齐：它们具有不同的高度。

我没有找到*VerticalAlign*属性，`FlowLayoutPanel`也没有设法修改我的高度`Label`（更改字体大小不是一种选择）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:43:56.613

我不是 100% 清楚你想要完成什么，但我相信我找到了一种方法来让这与你想要的方式保持一致。

1.  使用 a `TableLayoutPanel`，使其成为 2 列 1 行。
2.  `Label`在左侧单元格中添加一个，将其设置为*Dock: Fill*。还要设置*TextAlign: MiddleLeft*。
3.  `PictureBox`在右侧单元格中添加一个。将*Anchor*设置为*None*。

这应该给你一个左侧的标签和`PictureBox`右侧的一个始终垂直居中的标签。`TableLayoutPanel`根据您的需要修改的属性。

# html - django 模板

> ID：12956926
> 
> 赞同：1
> 
> 时间：2012-10-18T14:25:36.333
> 
> 标签：html, django

我有一个下拉列表

在我的模板中，

```
 <form name="languages" method="post">
        <select id="langSelect" onchange="showDiv(this.value);">
           <option>en (default)</option>
           {% for ele in comments.languages.all %}
               <option>{{ele.lang}}</option>
           {% endfor %}
        </select>
        <div><a  onclick="getIndex()">Submit</a></div>

    </form> 
```

Javascript：

```
function getIndex(){
    var x = document.getElementById("langSelect").selectedIndex;            
} 
```

在 html 中：

{{obj.comments.all.index.value}}

如何从 getIndex() 获取 index 的值并将其传递回 django 模板

obj.comments[index].value 和 index = getIndex()

{{obj.comments.all.index.value}}？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:41:17.720

检查[此链接](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)，您可以使用 forloop.counter0 并完全删除 getIndex() javascript函数

我不知道你到底需要什么，但你可以做类似的事情

```
{{ c.comments.all.index.text forloop.counter0 }} 
```

又名：将 forloop.counter0 值传递给您需要的值

nb：我对 {{c.comments.all.index.text}} 一无所知，所以也许我的语法不起作用，您必须使其适应您的实际用例

# python - 访问 csv 标头空白和不区分大小写

> ID：12956930
> 
> 赞同：1
> 
> 时间：2012-10-18T14:26:08.973
> 
> 标签：python, csv, python-3.x

我正在覆盖如下`csv.Dictreader.fieldnames`属性，以读取 csv 文件中的所有标题，不带空格且为小写。

```
import csv
class MyDictReader(csv.DictReader):

    @property
    def fieldnames(self):
        return [field.strip().lower() for field in super(MyDictReader, self).fieldnames] 
```

现在我的问题是，如何自动访问字段名`strip()`和`lower()`查询？

这就是我如何手动操作：

```
csvDict = MyDictReader(open('csv-file.csv', 'rU'))

for lineDict in csvDict:
    query = ' Column_A'.strip().lower()
    print(lineDict[query]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:42:03.557

根据 Pedro Romano 的建议，我编写了以下示例。

```
import csv

class DictReaderInsensitive(csv.DictReader):
    # This class overrides the csv.fieldnames property.
    # All fieldnames are without white space and in lower case

    @property
    def fieldnames(self):
        return [field.strip().lower() for field in super(DictReaderInsensitive, self).fieldnames]

    def __next__(self):
        # get the result from the original __next__, but store it in DictInsensitive

        dInsensitive = DictInsensitive()
        dOriginal = super(DictReaderInsensitive, self).__next__()

        # store all pairs from the old dict in the new, custom one
        for key, value in dOriginal.items():
            dInsensitive[key] = value

        return dInsensitive

class DictInsensitive(dict):
    # This class overrides the __getitem__ method to automatically strip() and lower() the input key

    def __getitem__(self, key):
        return dict.__getitem__(self, key.strip().lower()) 
```

对于包含标头的文件，例如

*   “列_A”
*   “列_A”
*   “列_A”
*   “列_A”
*   ...

您可以像这样访问列：

```
csvDict = DictReaderInsensitive(open('csv-file.csv', 'rU'))

for lineDict in csvDict:
    print(lineDict[' Column_A']) # or
    print(lineDict['Column_A']) # or
    print(lineDict[' column_a']) # all returns the same 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:41:13.393

您必须分两步完成：

1.  使用将 应用于其参数的方法创建您的`dict`专业化。`__getitem__``.strip().lower()``key`
2.  覆盖`__next__`您的`MyDictReader`专用类以返回使用`csv.DictReader`超类`__next__`方法返回的字典初始化的特殊字典之一。

# active-directory - did I mess up with multiple certificates?

> ID：12956931
> 
> 赞同：0
> 
> 时间：2012-10-18T14:26:09.473
> 
> 标签：active-directory, certificate, alfresco

I'm quite confused :S

scenario: I m trying to add a certificate to my domain serverName. com. I create a active directory sercer (DC) with ad.servername. com and cms.servername. com for Alfresco page.

and as far as I know, because it's alfresco bundle, it already has a tomcat with java and a Alfresco certificate configured (expire 2112).

then i generated my own .cer with microsoft certificate services with "servername. com" and imported to my java keystore (alfresco/java/jre/lib/security/cacert) expires 2014

later I decide to try a free trial third-party CA startssl. com and I generated for "servername. com" but they asked me to put an alternative, so I put cms.servername.com and I also imported to my alfresco/java key store (expire 2013)

now, whenever I put `https://servername:8443/myApp` or `https://cms.servername:8443` browser shows using Alfresco certificate. did I mess up with certificates or java or something is just selecting the older expiring date certificate to use?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:41:54.317

嗨，您是否将正确的证书和密钥等放在正确的目录中？

像 alf_data/keystore 和在 tomcat 配置中的 8443 指向 alfresco 键。

# html - 当父元素为 display:none 时显示 HTML 子元素

> ID：12956937
> 
> 赞同：59
> 
> 时间：2012-10-18T14:26:41.390
> 
> 标签：html, css

当其父元素为 display: none 时，是否有任何机制来显示子元素？

这种情况是隐藏选项卡上的验证错误。我想显示错误消息，即使该字段是隐藏的。

一个真正简化的 JSFiddle 是这里[http://jsfiddle.net/vLYnk/](http://jsfiddle.net/vLYnk/)

标记：

```
<ul>
    <li>One</li>
    <li class="hide">
        Two
        <ul>
            <li class="reshow">Re Show Me</li>
            <li>Inner 2</li>
        </ul>
    </li>
    <li>Three</li>
</ul> 
```

CSS：

```
.hide {display: none}
.reshow {display: block !important; position: fixed; top: 0; left: 0;} 
```

我猜这是不可能的，因为孩子没有上下文，但以防万一？？？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-18T14:27:59.283

不，这是不可能的。`display:none`隐藏元素，因此不会显示任何子元素。

**编辑：**

`display`如果您能够从 using 切换到，这可能与您想要的一致`visibility`。

```
.hide {visibility: hidden;}
.reshow {visibility: visible;} 
```

使用此方法，您可以隐藏父元素的内容，但显示`<li>`您想要的特定内容。唯一需要注意的是父标记仍将占用屏幕空间。只是不会显示给用户。这可能会也可能不会破坏您正在寻找的布局。

[http://jsfiddle.net/vLYnk/2/](http://jsfiddle.net/vLYnk/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T14:28:22.340

不，这是不可能的。您可以将子元素移出其隐藏的父元素并将其插入标记中的其他位置（例如通过 JavaScript）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-07T16:05:53.167

对于特定情况，您可以使用它：

```
.hidden-container *{display:none;}
.hidden-container .show-again{display:block} 
```

这将继续`.hidden-container`显示，但除了`.show-again`容器之外的所有内容都将显示属性设置为`none`.

[jsFiddle](http://jsfiddle.net/Amens/jyKSu/)

编辑：

请注意，它将重置子元素中的所有显示属性，`.hidden-container`如果在其样式之后声明。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T14:38:32.150

您可以代替使用 display: none; 隐藏你的元素通过位置移出视口：相对/绝对；左：-9999em；比给可见的孩子一个位置：相对；左：9999em；

此解决方案的缺点是，如果您使用 position: absolute，“重新显示”的元素将不在元素流中。（不占用它需要的空间并且不向下推以下元素）或者在使用位置时占用比实际需要的空间更多的空间：相对。

[http://jsfiddle.net/vLYnk/3/](http://jsfiddle.net/vLYnk/3/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-09T19:23:58.357

只需添加 .hide：

```
font-size: 0;
margin: 0;
padding: 0; 
```

它不会像 display none 一样占用空间

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T14:32:03.790

```
$('body').append($('.reshow').clone(true)); 
```

# javascript - YUI3 Datatable - 行格式和选择

> ID：12956939
> 
> 赞同：1
> 
> 时间：2012-10-18T14:26:43.903
> 
> 标签：javascript, json, yui, yui3, yui-datatable

我有一个在这里工作的例子 - [http://jsfiddle.net/BM3kX/5](http://jsfiddle.net/BM3kX/5)

它有一段由 YUI 数据表使用的 JSON。我对此有一些疑问。

1.  JSON 有一个 'imageURI' 属性，我需要从中渲染图像 [16x16] 以及同一单元格中的 'showName' 属性。此外，表格可以有多行，以便有效地在每一行上呈现图像。

2.  当我点击一行时，表格应该提醒我选择的记录。但是这里有一个转折——我需要的数据与用于渲染它的 JSON 完全相同。（即使我没有在表中的任何地方使用它，我也应该获得“类型”属性。）

我怎样才能满足上述要求？任何解决方案或可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:25:21.190

1）在那里你无能为力。我假设每个记录的图像都不同，因此除了以适当的大小发送图像而不是让客户端调整它们的大小之外，没有太多需要优化的地方。如果图像是某种代表状态的图标，我建议您以某种方式发送状态编码并让浏览器决定如何表示它，但如果它们是人的图片，您只需要让浏览器处理与他们一起尽其所能。

2）很容易从模型中重构出点击行的原始数据。您不需要为该行保留 JSON 的副本，您可以随时将其转换为 JSON（毕竟，模型有一个 toJSON 方法可以让这变得简单）。表中每条记录的模型可以保存比表中显示的信息更多的信息。column 属性告诉数据表显示什么，数据源存储什么。使用 getRecord 访问底层模型并对其进行 JSON 编码。如果该类型最初存在，即使您不显示它，它仍然存在。

# caching - RSS Feed Generator caching Using varnish

> ID：12956941
> 
> 赞同：1
> 
> 时间：2012-10-18T14:26:52.373
> 
> 标签：caching, rss, varnish

I want to write an RSS feed generator application.

I want to know if varnish or similar caching solution can be used for caching the RSS feed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:26:52.773

是的，使用 Varnish 缓存 RSS 提要应用程序会非常有效。

只需从您的应用程序发送通常的“Cache-Control: max-age=XXX”响应标头，Varnish 就会在此期间愉快地缓存它。

我看到一些 RSS 客户端向 RSS 提要发送一个“?forceupdate=”GET 参数。根据您的流量水平和要求，您可能需要做一些请求 URL 清理来处理：

```
sub vcl_recv {
    if (req.url ~ "/rss/") {
        # remove any GET arguments to increase cache hit rate
        set req.url = regsub(req.url, "\?.*$", "");
    }
} 
```

# angularjs - How to prevent controller reloading when using ng-switch

> ID：12956945
> 
> 赞同：4
> 
> 时间：2012-10-18T14:26:57.893
> 
> 标签：angularjs, ng-switch

In this example, using ng-switch, I'm able to switch between different views. Each view is assigned a controller.

I've put a quick sample online here : [http://jsfiddle.net/FBHjZ/1/](http://jsfiddle.net/FBHjZ/1/)

It looks like the controller is reinstanciated everytime I switch views : If you enter a val in the input field, go to home and switch back to settings, the value is lost.

How can I prevent this? Basically, what I want is to keep state from previous views when I switch between views.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:23:55.443

无法阻止现有`ngSwitch`控制器重新实例化控制器并重新创建新范围。如[文档](http://docs.angularjs.org/api/ng.directive:ngSwitch)中所述，该指令正在创建一个新范围并实际创建/销毁相应的 DOM 元素。

如果您的目标是保留状态，只需将其放入父范围之一，请检查此 jsFiddle：http: [//jsfiddle.net/FBHjZ/2/](http://jsfiddle.net/FBHjZ/2/)

另一种方法是使用共享模型的服务。

# sql-server - Configuration for SSIS server and database server

> ID：12956948
> 
> 赞同：0
> 
> 时间：2012-10-18T14:27:02.623
> 
> 标签：sql-server, ssis, server-configuration

My current environment is: 3 servers, one for source database, one for destination database and one for IS packages. Now I need to adjust the configurations, like CPU, Memory for each server .

I do believe that running IS packages will consume a lot of resources because of large data volume. However, I do not know which server needs to be configured with more power for IS packages. That is, which server's resource will be mostly used when IS is running?

Also, I need to setup SQL agent for daily ETL processing, then which DB server I should use, the source or destination one?

I'm new to IS deployment,thanks for any advice!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:13:40.227

数据将从源服务器读取并写入目标服务器，因此您需要快速的 IO 子系统。理想情况下是 RAID 10。此外，如果您的数据在源服务器上的多个磁盘上拆分，则更多的内核将实现更多的并行性。这在目标上并不重要，因为插入通常是单线程的。

运行 SSIS 的服务器需要大量内存，因为数据流缓冲区将位于此服务器上（假设您在此处运行服务器代理），并且您需要在这三个服务器之间建立快速网络连接。

服务器代理应该在 ETL 服务器上，否则 SSIS 将消耗服务器代理所在机器上的资源，因此可能会在读取或写入时与 SQL Server 争夺线程。

# jquery - bxslider IE Issues , Images stacked vertically

> ID：12956949
> 
> 赞同：0
> 
> 时间：2012-10-18T14:27:08.053
> 
> 标签：jquery, internet-explorer, slideshow, bxslider

I am currently re creating my portfolio page , It is a work in progress... On my home page I have a bxslider from bxslider.com , it works in all other browsers but on IE , it has no transitions and just simply stacks the images on top of each other...

The page can be viewed [here](http://www.jn-design.co.uk/redesign2)

CSS as follows:

```
#slides
{
width:100%;
height:400px;
margin-top:150px;
background-image:url('low_contrast_linen.png');
background-repeat:repeat;
z-index:-3;
border-bottom: 4px solid #ff7373;   
}

#slideshowwrap
{
 margin:0 auto;
 width:900px;
 height:250px;
 margin-top: 50px;
 z-index:-3;    
 }

#slider1
{
 width:1300px;
 height:300px;
 position: fixed;
} 
```

HTML as follows:

```
<div id="slides">
    Slideshow goes here (Full Width)
    <div id="slideshowwrap">
        <div id="slider1">
            <div> <img src="slideone.png" alt="slide one"/> </div>
            <div><img src="slidetwo.png" alt="slide two"/></div>
            <div> <img src="slidethree.png" alt="slide three" /> </div>
            <div><img src="slidefour.png" alt="slide four"/></div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:53:53.207

在您的根服务器文件夹上创建一个新的 javascript 文件并将其命名为 bxSlider.min.js 。复制/粘贴[https://raw.github.com/wandoledzep/bxslider/master/jquery.bxSlider.min.js的内容](https://raw.github.com/wandoledzep/bxslider/master/jquery.bxSlider.min.js)

在您的代码中替换：

```
 <script src="https://raw.github.com/wandoledzep/bxslider/master/jquery.bxSlider.min.js" type="text/javascript"></script> 
```

通过（假设您将新创建的脚本文件与 index.html 放在同一文件夹中）：

```
<script src="bxSlider.min.js" type="text/javascript"></script> 
```

现在看看发生了什么...

# xpath - XPATH selections containing some strings but not others

> ID：12956950
> 
> 赞同：3
> 
> 时间：2012-10-18T14:27:08.077
> 
> 标签：xpath

I have the following XPATH that selects elements containing certain strings ("video" or "color" or "black and white"). The issue I am having is that one of the elements that is selected contains a string "video reprints" and although it's correct, I do not want this particular element selected. I thought I could specify NOT in the XPATH as in the following...

`//div/A[contains(., 'video') or contains(., 'color') or contains(., 'black and white') and (not (contains(., 'reprint')))]`

Any thoughts on how I can remove any selection that contains the string "reprints" from the selections above?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:35:13.183

这是一个优先问题。只需将所有 or-ed 条件包装到括号中：

```
[( ... or ... or ...) and (not(...))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:36:02.993

真的只是因为你有括号的方式，所以这会起作用：

```
//div/A[(contains(., 'video') or contains(., 'color') or contains(., 'black and white')) and not(contains(., 'reprints'))] 
```

# java - 如何使用构造函数进行 java 静态数组初始化？

> ID：12956954
> 
> 赞同：4
> 
> 时间：2012-10-18T14:27:14.807
> 
> 标签：java, arrays, oop, static

我有以下类，下面列出了数组的静态字段。您能否告诉/解释我如何创建构造函数来初始化所有数组并将其传递给公共静态 void BookInfo 方法。任何帮助是极大的赞赏！

```
 public class BookInfo {

    // Global arrays accessible by all methods
public static String[] isbnInfo = {

        "978-0060014018",
        "978-0449221431",
        "978-0545132060",
        "978-0312474881",
        "978-0547745527"

      };

public static String[] bookTitleInfo = {

            "The Greatest Stories",
            "The Novel",
            "Smile",
            "The Bedford Introduction to Drama",
            "AWOL on the Appalachian Trail"

           };

public static String[] authorInfo = {

         "Rick Beyer",
         "James A. Michener",
         "Raina Telgemeier",
         "Lee A. Jacobus",
         "David Miller"

        };

public static String[] publisherInfo = {

            "HerperResource",
            "Fawcett",
            "Graphix",
            "Bedford St. Martins",
            "Mariner Books"

            };

public static String[] dateAddedInfo = {

            "05/18/2003", 
            "07/07/1992", 
            "02/01/2010", 
            "09/05/2008", 
            "11/01/2011"

            };

public static int[] qtyOnHandInfo = {7, 5, 10, 2, 8};

public static double[] wholesaleInfo = {12.91, 7.99, 6.09, 54.99, 10.17};

public static double[] retailInfo = {18.99, 3.84, 4.90, 88.30, 14.95};

public static void BookInfo() {

    System.out.println("             Serendipity Booksellers");
    System.out.println("                Book Information\n");       

    for(int i = 0; i < isbnInfo.length; i++){

        System.out.println("ISBN: " + isbnInfo[i]);
        System.out.println("Title: " + bookTitleInfo[i]);
        System.out.println("Author: " + authorInfo[i]);
        System.out.println("Publisher: " + publisherInfo[i]);
        System.out.println("Date Added: " + dateAddedInfo[i]);
        System.out.println("Quantity-On-Hand: " + qtyOnHandInfo[i]);
        System.out.println("Wholesale Cost: $ " + wholesaleInfo[i]);
        System.out.println("Retail Price: $ " + retailInfo[i]);
        System.out.println();

         }
            }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T14:30:24.510

您要做的是使用`static`块。在运行任何其他代码*之前*`static`初始化数据。仅在实例化对象时调用，并且**每次**实例化该类型的对象时都会调用它们，并且在应用程序运行时初始化一次。*`constructor`**`static`***

 ***```
public static final String[] ISBN_INFO; 

static 
{ 

    BookInfo.ISBN_INFO = {
    "978-0060014018",
    "978-0449221431",
    "978-0545132060",
    "978-0312474881",
    "978-0547745527" }; 

  // do the same thing with the other blocks

} 
```

`static`制作变量也是一个好主意`final`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:31:26.493

可以在声明或静态块中初始化数组，无需为此使用构造函数。例如：

```
private static String[] array = {"a", "b", "c"}; 
```

或者像这样：

```
private static String[] array;
static {
    array = new String[] {"a", "b", "c"};
} 
```

实际上，在构造函数中初始化它可能会*出错*，每次调用构造函数创建新实例时，不应更改静态成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:28:38.317

静态变量在类加载时加载到内存中。而当时只有他们`initialized`。您不需要在构造函数中初始化它们。

但是，您可以使用`static initializer block`来初始化它们。

```
private static int[] arr;
static {
    // initialize your arrays here in static initializer block.
     arr = new int[5];
     arr[0] = 5; arr[1] = 10; ... so on
} 
```

`Static initializer`块在类加载期间执行一次。它负责初始化类的静态变量。

此外，静态变量在类的所有实例之间共享。因此，您通过一个实例对它们所做的任何更改都将反映在所有实例中。因此，让它们在构造函数中初始化是没有意义的。***

# objective-c - Lattix with Understand for C++/Objective-C: API library missing error (Mac OSX)

> ID：12956955
> 
> 赞同：1
> 
> 时间：2012-10-18T14:27:16.520
> 
> 标签：objective-c, ios, lattix

I'd like to use lattix to analyse objective-c code (http://www.lattix.com/node/114). Computer is a macbook with osx 10.7.4.

Lattix version is 7.8 (newest). I am not sure which understand version to use, newest would be 3.0 build 635, but I have the same problem with understand 3.0 and 2.6 anyway.

Understand works fine (version 2.6 or 3.0), I can create a new understand project for an iOS objective-c project and name it *.udb. Analysis within understand also work fine.

The problem is when I try to import it into lattix: In lattix I do: File -> new project -> profiles: all -> choose Module Type C/C++ (Understand) and add the udb file. When creating a new project now I get this error: "Error opening data ... Understand API library missing. Please install Understand."

Also tried understand 3.0 same problem. Has someone got these two tools working on a mac and maybe had a similar issue?

Or does s.o. maybe has an alternative to lattix?

Big thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:35:32.020

您发布的链接在第三段中回答了您的问题：

> 请确保使用有效许可证在您的计算机上安装了适用于 C++ 的理解。在 Windows 上，请确保路径包含目录（通常为 C:\Program Files\STI\bin\pc-win32）。**在 Linux 上，请将环境变量 STI_HOME 设置为“理解安装”的顶部**。

我发现的一位[日本指南](http://www.techmatrix.co.jp/quality/lattix/faq_old.html)说

> [对于 Linux]
> 
> 安装好Understand 2.0后，请将{Understand 2.0安装目录}/scitools$设置为STI_HOME系统环境变量。
> 
> 启动(${Lattix安装目录}/Lattix/bin/ldm.sh) Lattix。

可能对理解 3.0 也有帮助

# c++ - Get time stamp via Boost.Chrono in resolution of nanoseconds

> ID：12956956
> 
> 赞同：0
> 
> 时间：2012-10-18T14:27:20.267
> 
> 标签：c++, boost, timestamp, chrono

Does boost chrono provides time stamp with nanoseconds resolution?? If yes how to get the time stamp?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:39:44.477

纳秒级分辨率？你想在哪个硬件上运行你的程序？在我的电脑上，我的性能计数器的频率约为。4 Mhz，所以一个滴答持续 250 ns。

[正如这里所回答的](https://stackoverflow.com/questions/9100439/boostchrono-nanoseconde-windows7)，boost chrono 可以为您提供纳秒级的分辨率，但您无法确定测量的准确性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:23:07.477

为了使用 boost chrono 轻松获取不同测量的时间戳，您可以使用[boost CPU Timers](http://www.boost.org/doc/libs/1_51_0/libs/timer/doc/cpu_timers.html)。本网站还提供了有关计时器精度的表格。

要在您的特定硬件上自行测量分辨率，请使用 boost 的[cpu_timer_info.cpp](http://www.boost.org/doc/libs/1_51_0/libs/timer/test/cpu_timer_info.cpp)。

# python - Print diff of Python dictionaries

> ID：12956957
> 
> 赞同：9
> 
> 时间：2012-10-18T14:27:27.920
> 
> 标签：python

I want to take two dictionaries and print a diff of them. This diff should include the differences in keys AND values. I've created this little snippet to achieve the results using built-in code in the `unittest` module. However, it's a nasty hack since I have to subclass `unittest.TestCase` and provide a `runtest()` method for it to work. In addition, this code will cause the application to error out since it will raise an `AssertError` when there are differences. All I really want is to print the diff.

```
import unittest
class tmp(unittest.TestCase):
    def __init__(self):
         # Show full diff of objects (dicts could be HUGE and output truncated)
        self.maxDiff = None
    def runTest():
        pass
_ = tmp()
_.assertDictEqual(d1, d2) 
```

I was hoping to use the `difflib` module, but it looks to only work for strings. Is there some way to work around this and still use `difflib`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-20T18:10:04.593

改编自 cpython 源代码：

[https://github.com/python/cpython/blob/01fd68752e2d2d0a5f90ae8944ca35df0a5ddeaa/Lib/unittest/case.py#L1091](https://github.com/python/cpython/blob/01fd68752e2d2d0a5f90ae8944ca35df0a5ddeaa/Lib/unittest/case.py#L1091)

```
import difflib
import pprint

def compare_dicts(d1, d2):
    return ('\n' + '\n'.join(difflib.ndiff(
                   pprint.pformat(d1).splitlines(),
                   pprint.pformat(d2).splitlines()))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T14:50:34.630

You can use difflib, but the use unittest method seems more appropriate to me. But if you wanted to use difflib. Let's say say the following are the two dicts.

```
In [50]: dict1
Out[50]: {1: True, 2: False}

In [51]: dict2
Out[51]: {1: False, 2: True} 
```

You may need to convert them to strings (or list of strings) and then go about using difflib as a normal business.

```
In [43]: a = '\n'.join(['%s:%s' % (key, value) for (key, value) in sorted(dict1.items())])
In [44]: b = '\n'.join(['%s:%s' % (key, value) for (key, value) in sorted(dict2.items())])
In [45]: print a
1:True
2:False
In [46]: print b
1:False
2:True
In [47]: for diffs in difflib.unified_diff(a.splitlines(), b.splitlines(), fromfile='dict1', tofile='dict2'):
    print diffs 
```

THe output would be:

```
--- dict1

+++ dict2

@@ -1,2 +1,2 @@

-1:True
-2:False
+1:False
+2:True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T14:30:15.943

您可以`.items()`与集合一起使用来执行以下操作：

```
>>> d = dict((i,i) for i in range(10))
>>> d2 = dict((i,i) for i in range(1,11))
>>>
>>> set(d.items()) - set(d2.items())
set([(0, 0)])
>>>
>>> set(d2.items()) - set(d.items())
set([(10, 10)])
>>>
>>> set(d2.items()) ^ set(d.items())  #symmetric difference
set([(0, 0), (10, 10)])
>>> set(d2.items()).symmetric_difference(d.items())  #only need to actually create 1 set
set([(0, 0), (10, 10)]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T11:00:56.410

[我找到了一个名为datadiff](https://pypi.python.org/pypi/datadiff/1.1.4)的库（没有很好的文档记录），它给出了 python 中可散列数据结构的差异。您可以使用 pip 或 easy_install 安装它。试试看！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T15:00:26.733

使用[@mgilson 的解决方案](https://stackoverflow.com/a/12957021/1561176)并更进一步，以便 OP 请求使用`unittest`模块。

```
def test_dict_diff(self):
    dict_diff = list(set(self.dict_A.items()).symmetric_difference(set(self.dict_B.items()))))
    fail_message = "too many differences:\nThe differences:\n" +
                   "%s" % "\n".join(dict_diff)
    self.assertTrue((len(dict_diff) < self.maxDiff), fail_message) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T14:36:17.910

请参阅[Python 配方以创建两个字典的差异（作为字典）](http://code.activestate.com/recipes/576644-diff-two-dictionaries/)。你能描述一下输出应该是什么样子（请附上一个例子）？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-02T14:21:07.173

查看[https://github.com/inveniosoftware/dictdiffer](https://github.com/inveniosoftware/dictdiffer)

```
print list(diff(
    {2014: [
        dict(month=6, category=None, sum=672.00),
        dict(month=6, category=1, sum=-8954.00),
        dict(month=7, category=None, sum=7475.17),
        dict(month=7, category=1, sum=-11745.00),
        dict(month=8, category=None, sum=-12140.00),
        dict(month=8, category=1, sum=-11812.00),
        dict(month=9, category=None, sum=-31719.41),
        dict(month=9, category=1, sum=-11663.00),
    ]},

    {2014: [
       dict(month=6, category=None, sum=672.00),
       dict(month=6, category=1, sum=-8954.00),
       dict(month=7, category=None, sum=7475.17),
       dict(month=7, category=1, sum=-11745.00),
       dict(month=8, category=None, sum=-12141.00),
       dict(month=8, category=1, sum=-11812.00),
       dict(month=9, category=None, sum=-31719.41),
       dict(month=9, category=1, sum=-11663.00),
    ]})) 
```

给出了我认为非常棒的输出：

```
[('change', ['2014', 4, 'sum'], (-12140.0, -12141.0))] 
```

即它给出了发生的事情：一个值“改变”，路径“['2014'，4，'sum']”，它从-12140.0变为-12141.0。

# c++ - FStream reading a binary file written with Delphi's binary writer

> ID：12956967
> 
> 赞同：4
> 
> 时间：2012-10-18T14:27:52.793
> 
> 标签：c++, delphi, delphi-xe2

im creating a dll in MS Visual Studio 2010 Express which loads a binary data file (*.mgr extension -> used exclusively in my company's applications) using fstream library in C++. The file is created with an app developed by someone else in my company who is using Delphi. He says the first 15 bytes should be some characters which indicate the date the file was created and some other stuff like version of the app:

"XXXX 2012".

The result after loading with fstream (in binary mode) and writing another file with fstream (string mode) is as follows:

"[] X X X X 2 0 1 2"

The first char is an unknown char (rectangle) then there are spaces between each char. Finally it is 31 bytes wide. 15 for actual chars + 15 for white spaces + 1 for the rect char = 31.

Some other information: I'm using C++, the app developer is using Delphi. Im using fstream. he is using BW.Write() function. (BW == Binary Writer?) He uses Windows 7 whilst i use Windows XP Professional.

Can you make a diagnosis of the problem?

Thanks in advance

**First Edit**: I'm adding c++ code that loads those first bytes.

Firstly he is using Delphi XE2 from embarcadero Rad Studio XE2.

From what i know PChar is a null-terminated string consisting of widechars (since delphi 2009) which are 2 bytes wide as opposed to normal chars (one byte). So basically he's saving words instead of bytes.

here is the code loading the mgr:

```
wchar_t header[15];
DXFLIBRARY_API void loadMGR(const char* szFileName, const char* szOutput)
{
fstream file;
file.open( szFileName, ios::binary | ios::in );
if(file.is_open()) 
{
    file.read(reinterpret_cast<char*>(header),sizeof(header));
}
file.close();

//zapis

fstream saveFile;
saveFile.open( szOutput, ios::out );
if(saveFile.is_open())
{
    saveFile.write(reinterpret_cast<const char*>(header),sizeof(header));
}
saveFile.close(); 
} 
```

Header contains 15 wchar_t's so we get 30 bytes. Still after investigating i have no idea how to convert.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T14:29:22.680

似乎很清楚，数据在 8 位文本编码和 16 位编码之间被破坏的过程中的某个地方。虚假的第一个字符几乎可以肯定是 UTF-16 BOM。

一种可能的解释是 Delphi 开发人员正在将 UTF-16 编码文本写入文件。并且大概您期望 8 位编码。

另一种解释是 Delphi 代码正确地写出 8 位文本，但是您的代码正在修改它。也许您的读/写代码正在这样做。

在 Delphi 程序的文件输出上使用十六进制编辑器来缩小发生重整的确切位置。

在问题中没有任何代码的情况下，很难比这更具体。

# firebird - Firebird install conflict with Interbase

> ID：12956968
> 
> 赞同：3
> 
> 时间：2012-10-18T14:27:56.897
> 
> 标签：firebird, interbase

Are there conflicts created if Firebird is installed to a system that already has Interbase installed. I see some mention of using the same Ports, additions to the Path, and a common program name in ISQL.exe as the command processor. I see references to FB version 1.5 documentation to resolve these, is there more updated information? Has this not been changed in current releases? If Firebird (current version) is simply installed, will Interbase installations then have problems and need work to get them working again?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:38:14.497

1.您需要在conf中修改firebird的端口部分，以便每个端口都有不同的端口

2.当您询问是否要复制旧版 gds32 dll 时，您需要取消选中它以进行 firebird 安装设置，这样它只会安装在自己的文件夹中，而不是系统上

[http://ibexpert.net/ibe/uploads/Doc/dmiles469.gif](http://ibexpert.net/ibe/uploads/Doc/dmiles469.gif)

ISQL.exe 问题可以通过修改 PATH 在命令行中解决，因此您可以在此处添加 Firebird 安装路径

# php - How to deal with multiple scripts in a single page web application

> ID：12956969
> 
> 赞同：4
> 
> 时间：2012-10-18T14:27:56.243
> 
> 标签：php, javascript, jquery

Am new to Web development and i started an application where i have index.php with a menu and a div called #content and i load all the different pages in to the div #content using load(); I need to load the respective java script files along with the files that are being loaded in to the div #content.

Issue: Here in the HTML's that is loaded in to the div, i have some similar class names and id's so when i click on any menu item and perform some action there and go to another menu item and perform same action i get the script of previous menu item is being executed!

Is there a better way to load scripts into the div on the menu item click and on click of another menu item remove the previous scripts and load a fresh scripts from the current menu item clicked?

Script i use to load the div #content:

```
$('.nav-button').on('click', function(e){
e.preventDefault();
$('#content').load('../scripts/loader.php');
$('#content').load($(this).attr('href'));
}); 
```

sample1.php page i load in to the div on menu-item1 clicked:

```
<div id='datagrid'>
<input></input>
<input></input>
<input></input>
</div>
<script type='text/javascript' src='scripts/menu-item1/data_script.js'></script> 
```

sample2.php page i load in to the div on menu-item2 clicked:

```
<div id='datagrid'>
<input></input>
<input></input>
<input></input>
</div>
<script type='text/javascript' src='scripts/menu-item2/data_script.js'></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:08:38.513

另一种加载脚本的方法：

```
var script = document.createElement("script");
script.type = "text/javascript";
script.src = src;
script.onload = callback_function;

document.getElementsById("#scriptContainer")[0].appendChild(script); 
```

关于删除现有脚本：

尝试将脚本加载到某个容器中，当您想要替换它们时，只需清除容器内容并加载新脚本。

您也可以尝试使用 requirejs 进行延迟加载。[这里的例子](http://inside.godaddy.com/lazy-loading-optimal-user-experience/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:10:34.293

加载并执行脚本后，除非您自己整理代码，否则即使您删除/删除原始脚本标签，您仍然会保留该代码的残余。以下几点应该会有所帮助：

1.  每当您在 js 中创建/导入结构时，请确保您已编写了取消导入/销毁功能。
2.  不要依赖通过`.innerHTML`或插入的脚本标签`$().html()`- 较旧的浏览器不尊重它们，这可能会导致意外结果 - 即脚本标签被忽略，或者在较旧的 Internet Explorer 的情况下，试图从错误的位置加载。
3.  而是按照**开发人员**的建议进行操作，并以编程方式构建您的脚本标签。
4.  显然，如果您想让每个 ajax 脚本返回它的关联脚本标签，那么**＃3很棘手。**
5.  因此，不要使用您的 ajax 请求返回纯 HTML，而是返回一个包含 HTML 和需要加载的脚本路径列表的 JSON 对象。
6.  如果您确保每个加载的脚本都通过一个特别命名的对象公开其所有方法，那么您可以在下次加载下一个脚本时删除该对象。

下面是说明性代码，有更复杂*（更好）*的方法来处理这个*（即避免在窗口上存储对象）*，另外下面的代码可以在很多地方进行改进——它应该只是为了让你了解什么你可以做，以及如何考虑它。

还应该注意，在全局`window`对象上存储对象时，您应该使用比`one`,`two`或`three`;)更多的唯一名称

### 标记：

```
<ul class="menu">
  <li><a href="one.html" data-namespace="one">One Link</a></li>
  <li><a href="two.html" data-namespace="two">Two Link</a></li>
  <li><a href="three.html" data-namespace="three">Three Link</a></li>
</ul>
<div id="content">
  ...
</div> 
```

### javascript:

```
/// create a wrapping scope so that our variables can be local
/// to our internal code, but not mess around with the global space.
(function(){

  /// create a remembered lastID var that can store what item was loaded
  var lastID;

  /// an addScripts function that takes a string namespace (can be anything
  /// as long as it obeys usual javascript variable naming rules), and an
  /// array of script URIs.
  var addScripts = function(namespace, scripts){
    var s,i;
    for( i=0; i<scripts.length; i++ ){
      s = $('<script />')
            /// attach our src attribute with the right script path
            .attr('src', scripts[i])
            /// add our namespace as a class to help find script tag later
            .addClass(namespace); 
      /// add to the head of the document
      $('head').append(s);
    }
  }

  /// removeScripts works based on using the namespace we passed
  /// when adding scripts as a classname to find the script tags.
  /// remember removing the tags doesn't remove the executed code.
  var removeScripts = function(namespace){
    /// in order to tidy our code we should include a function
    /// to tidy up.
    if ( window[namespace] && window[namespace].tidyup ) {
      window[namespace].tidyup();
    }
    /// remove the tag to keep the markup neat
    $('script.'+namespace).remove();
  }

  /// a typical click handler applied to the a tags
  $('.menu a').click(function(){

    /// if we have a lastID remove what was before.
    if ( lastID ) {
      removeScripts(lastID);
    }

    /// get our useful info from the link
    var target = $('#content');
    var url = $(this).attr('href');
    /// grab out our "namespace" this will be used to tie the scripts
    /// together with the collection object in the loaded javascript.
    var namespace = $(this).attr('data-namespace');

    /// trigger an ajax request that fetches our json data
    /// from the server.
    $.ajax('loader.php',{dataType:'json',data:{url:url}})
      .done(function(data){
        /// once we have that data, add the html to the page
        target.html( data.html );
        /// and then add the scripts
        addScripts( id, data.scripts || [] );
      });

    /// store the last id so we know what to remove next time
    lastID = id;

  });

})(); 
```

### 加载器.php：

```
<?php

  /// create a library of what scripts belong to what page
  $scripts = array(
    'one.html' => array('scripts/js/one.js'),
    'two.html' => array('scripts/js/two.js'),
    'three.html' => array('scripts/js/three.js'),
  );

  /// because `$_GET[url]` can be affected by outside influence
  /// make sure you check it's value before using it.
  switch( ($file = basename($_GET['url'])) ){
    case 'one.html':
    case 'two.html':
    case 'three.html':
      $json = (object) null;
      if ( file_exists($file) ) {
        $json->html = file_get_contents($file);
      }
      if ( isset($scripts[$file]) ) {
        $json->scripts = $scripts[$file];
      }
      header('content-type: application/json');
      /// json_encode should handle escaping all your html correctly
      /// so that it reaches your javascript in one correct piece.
      echo json_encode($json);
    break;
  }

?> 
```

### json（由上述 php 返回）：

```
{
  "html": "<div class=\"random-content\">This can be anything</div>",
  "scripts": ["scripts/js/one.js"]
} 
```

### 示例 js 包括 - 即（one.js）

```
/// create our collection object named with the same namespace that
/// appears in the data-namespace attribute in the markup.
window.one = {};

window.one.someMethodThatMightBeUsedByLoadedContent = function(){
  /// this function has been kept specifically as part of the 'one'
  /// object because it needs to be globally accessible by the html
  /// that has been injected into the page. by keeping it as part
  /// of a named object, removing it is rather simple. (see tidyup).
}

window.one.tidyup = function(){
  /// this is the most simplistic way of tidying up a property. Depending
  /// on the complexity of your javascript there are other things you should
  /// keep in mind. If you have any large custom object structures it is best
  /// to traverse these structures key by key and remove each element. Things
  /// to read up on would be 'Javascript memory leaks', 'javascript closures' 
  /// and 'garbage collection'. It is also best to keep in mind you can only
  /// nullify variables i.e. `var abc; abc = null;` -- you can not `delete abc`
  /// this is not a problem for properties i.e. `obj.prop = 123;` and is why
  /// it is best to use them for code you wish to tidy up later.
  delete window.one;
}

$(function(){
  /// trigger off whatever code you need onload
  /// this construction will never been kept by the
  /// javascript runtime as it is entirely anonymous 
  /// so you don't need to be worry about tidying it up.
}); 
```

上面的代码是手动输入的，因此可能会出现错误，但它应该说明一种实现整洁加载系统的方法，该系统可以在每次加载时正确整理。

# architecture - 用于 AKKA 演员框架？

> ID：12956972
> 
> 赞同：2
> 
> 时间：2012-10-18T14:28:00.803
> 
> 标签：architecture, akka, distributed-computing, actor

> **可能重复：**
> [Akka 的良好用例](https://stackoverflow.com/questions/4493001/good-use-case-for-akka)

我理解为什么使用 AKKA 演员框架来解决[令人尴尬的并行](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-java.html)问题是有意义的。

那些不涉及大量计算并且根本不需要并行化但仍然高度分布的问题呢？例如，数以千计的分布式客户端可以增加或减少特定计数器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:55:52.353

除了明显的可分布性和可扩展性论点之外，还有其他方面对演员来说非常好。

*   Actor 模型允许消息传递和错误处理之间的完全解耦；这两者在传统的 OO 中紧密结合在一起。当你调用一个方法时，你会得到返回值，但你还必须处理所有可能的错误。当您向参与者发送消息时，您只会得到响应，而所有失败都由参与者的主管处理。

*   另一件好事是改进的封装：在“普通”OO 中，您通常会看到太多的东西暴露在一个对象上，如果没有，您仍然可以使用反射。Akka Actor 是完全封装的（除非您通过发送“this”引用来作弊），除了 Actor 本身之外，没有人会弄乱状态。

*   与前一点联系起来，消息接收是参与者行为的唯一入口点这一事实使得它们比普通的 OO 代码更容易推理，其中每个公共（或受保护的）方法都可以用作入口。您不需要这些调用是并发的，以便错过计划外的交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T17:21:42.460

Actors 是一种计算模型，它适用于分布和并发（以及最终的并行性）（由于隔离和消息传递）。因此，如果您在一台机器上只有 1 个执行线程，或者在数千台机器上只有数千个执行线程，则可以使用 Actor。

# java - 第二次访问时会话变量为空

> ID：12956976
> 
> 赞同：1
> 
> 时间：2012-10-18T14:28:11.647
> 
> 标签：java, jsp, session, servlets

我是这个论坛的新手。我正在设计一个 JSP-Servlet 应用程序并使用会话变量来存储对象。问题是，当我第二次访问会话变量时，它返回 null。这是我的应用程序的流程-

我有一个带有多个链接按钮的 jsp 页面。当用户单击任何按钮时，将使用相应的参数调用一个 servlet。例如，如果单击 button1，则传递 1，如果单击 button2，则传递 2，依此类推。

Servlet 从之前已经创建的会话变量中获取一个数组列表，并根据请求的参数从数组列表中获取数据，处理它并将响应发送到另一个 jsp 说 jsp2。

jsp2 也有类似的链接按钮，应该执行相同的任务。当从 jsp2 调用同一个 Servlet 时，或者即使页面被刷新，这次 session 变量为 null。

在 session-config 标记下的 web.xml 文件中，我将超时设置为 -1，以便会话永不过期。

```
<session-config>
      <session-timeout>-1</session-timeout> 
   </session-config> 
```

在 servlet 中，我将会话变量作为 -

```
HttpSession session = request.getSession(false);

ArrayList<String> list = new ArrayList<String>();
list = (ArrayList<String>)session.getAttribute("mylist"); 
```

当第二次调用 servlet 时，或者即使页面被刷新，列表也为空。我放了几行来检查会话是否有效 - 它第二次打印。

```
if(!request.isRequestedSessionIdValid()) {
 System.out.println("Session is Expired !!");
} 
```

和`session.getAttribute("mylist")`回报`NullPointerException`。

我确信我没有`session.invalidate()`偶然使用任何地方来结束会话。我不明白出了什么问题..有人可以解释一下吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:33:42.640

您需要`getSession(true)`第一次尝试使用 或`getSession()`. 如果会话不存在，则 False 参数将不会返回会话。只有第一次您需要在`getSession`通话中提供真实信息。

```
HttpSession session = request.getSession(true); 
```

根据 servlet 规范，

> **HttpSession getSession（布尔创建）**
> 
> 返回与此请求关联的当前 HttpSession，或者，如果没有当前会话并且 create 为 true，则返回一个新会话。
> 
> 如果 create 为 false 并且请求没有有效的 HttpSession，则此方法返回 null。
> 
> 为确保正确维护会话，您必须在提交响应之前调用此方法。如果容器正在使用 cookie 来维护会话完整性，并且在提交响应时被要求创建新会话，则会引发 IllegalStateException。

**编辑 - 来自会话 ID 的会话**

```
 HttpSessionContext sc=request.getSession().getSessionContext();
    HttpSession session=sc.getSession(session_id); 
```

注意 - 由于安全原因，现在不推荐使用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:19:49.517

尝试将响应发送到其他一些 jsp 页面，看看您是否能够从那里访问会话变量。如果是，那么您当前的 jsp 中存在问题。当然，会话肯定会在某处过期，否则 request.getSession() 肯定会返回先前创建的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:29:48.563

将 timeout 设置为`0`，而不是`-1`如果您想要无限的会话时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:33:42.277

您需要在某处设置属性，然后才能检索它：

```
session.setAttribute("mylist", list); 
```

# c - CHOLMOD 稀疏矩阵 Cholesky 分解：不正确的因素？

> ID：12956980
> 
> 赞同：1
> 
> 时间：2012-10-18T14:28:24.300
> 
> 标签：c, sparse-matrix, hessian-matrix, suitesparse

我一直在使用 CHOLMOD 分解矩阵 A 并求解系统 Ax = b，因为 A 是 Hessian 矩阵（打印在下面）和 b = [1, 1, 1] 由`cholmod_ones`函数创建。

不幸的是，x 的解决方案是不正确的（应该是 [1.5, 2.0, 1.5]）并且确认我然后将 A 和 x 相乘并没有得到 [1, 1, 1]。我不太明白我做错了什么。

此外，我查看了因素，矩阵元素的值也没有意义。

**输出**

```
Hessian:
   2.000   -1.000    0.000 
  -1.000    2.000   -1.000 
   0.000   -1.000    2.000 
Solution:
   2.500    0.000    0.000 
   3.500    0.000    0.000 
   2.500    0.000    0.000 
B vector:
   1.500    0.000    0.000 
   2.000    0.000    0.000 
   1.500    0.000    0.000 
```

**代码**

`iterate_hessian()`是一个外部函数，它返回读入 CHOLMOD hessian 矩阵的双精度数。

代码的入口点`cholesky_determinant`是用一个参数调用的，该参数给出（方形）矩阵的维数。

```
#include <cholmod.h>
#include <string.h>

// Function prototype that gives the next value of the Hessian
double iterate_hessian();

cholmod_sparse *cholmod_hessian(double *hessian, size_t dimension, cholmod_common *common) {
  // This function assigns the Hessian matrix from OPTIM to a dense matrix for CHOLMOD to use.
  // Allocate a dense cholmod matrix of appropriate size
  cholmod_triplet *triplet_hessian;
  triplet_hessian = cholmod_allocate_triplet(dimension, dimension, dimension*dimension, 0, CHOLMOD_REAL, common);
  // Loop through values of hessian and assign their row/column index and values to triplet_hessian.
  size_t loop;
  for (loop = 0; loop < (dimension * dimension); loop++) {
    if (hessian[loop] == 0) {
      continue;
    }
    ((int*)triplet_hessian->i)[triplet_hessian->nnz] = loop / dimension;
    ((int*)triplet_hessian->j)[triplet_hessian->nnz] = loop % dimension;
    ((double*)triplet_hessian->x)[triplet_hessian->nnz] = hessian[loop];
    triplet_hessian->nnz++;
  }
  // Convert the triplet to a sparse matrix and return.
  cholmod_sparse *sparse_hessian;
  sparse_hessian = cholmod_triplet_to_sparse(triplet_hessian, (dimension * dimension), common);
  return sparse_hessian;
}

void print_matrix(cholmod_dense *matrix, size_t dimension) {
  // matrix->x is a void pointer, so first copy it to a double pointer
  // of an appropriate size
  double *y = malloc(sizeof(matrix->x));
  y = matrix->x;
  // Loop variables
  size_t i, j;
  // Row
  for(i = 0; i < dimension; i++) {
  // Column
    for(j = 0; j < dimension; j++) {
      printf("% 8.3f ", y[i + j * dimension]);
    }
    printf("\n");
  }
}

cholmod_dense *factorized(cholmod_sparse *sparse_hessian, cholmod_common *common) {
  cholmod_factor *factor;
  factor = cholmod_analyze(sparse_hessian, common);
  cholmod_factorize(sparse_hessian, factor, common);
  cholmod_dense *b, *x;
  b = cholmod_ones(sparse_hessian->nrow, 1, sparse_hessian->xtype, common);
  x = cholmod_solve(CHOLMOD_LDLt, factor, b, common);
  cholmod_free_factor(&factor, common);
  // Return the solution, x
  return x;
}   

double cholesky_determinant(int *dimension) {
  // Declare variables
  double determinant;
  cholmod_sparse *A;
  cholmod_dense *B, *Y;
  cholmod_common common;
  // Start CHOLMOD
  cholmod_start (&common);
  // Allocate storage for the hessian (we want to copy it)
  double *hessian = malloc(*dimension * *dimension * sizeof(hessian)); 
  // Get the hessian from OPTIM
  int i = 0;
  for (i = 0; i < (*dimension * *dimension); i++) {
    hessian[i] = iterate_hessian();
  }
  A = cholmod_hessian(hessian, *dimension, &common);
  printf("Hessian:\n");
  print_matrix(cholmod_sparse_to_dense(A, &common), *dimension);
  B = factorized(A, &common);
  printf("Solution:\n");
  print_matrix(B, *dimension);
  double alpha[] = {1, 0};
  double beta[] = {0, 0};
  Y = cholmod_allocate_dense(*dimension, 1, *dimension, CHOLMOD_REAL, &common);
  cholmod_sdmult(A, 0, alpha, beta, B, Y, &common);
  printf("B vector:\n");
  print_matrix(Y, *dimension);
  determinant = 0.0;
  // Free up memory and finish CHOLMOD
  cholmod_free_sparse (&A, &common);
  cholmod_free_dense (&B, &common);
  cholmod_finish (&common);           
  return determinant;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:20:50.620

事实证明，我没有为我的稀疏矩阵正确设置 stype。stype 决定了对称性（从而决定了对 的调用的后续行为`cholmod_factorize`）。它实际上是分解和求解 AA'。

# keyword - 从荷兰语短文本中提取关键字

> ID：12956982
> 
> 赞同：3
> 
> 时间：2012-10-18T14:28:31.193
> 
> 标签：keyword, text-processing, extraction, text-mining, linguistics

我想从简短的荷兰语文本中提取关键字。是否有此 API 或我可以使用的某个库。

如果这些不适用于荷兰语，任何有关如何自己提取它们的提示也将不胜感激。我已经通过词性标注器和词形还原器运行文本自己尝试过。但从那时起，我发现很难提取出像样的关键字。TF-IDF 没有用，因为文本太短而无法获得好的结果。

我更喜欢 Java，但也非常欢迎任何其他语言实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:11:02.830

这是我使用 RapidMiner 进行文本挖掘的视频系列。它展示了如何轻松获得 TF-IDF 等：

[http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-loading.html](http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-loading.html)

# java - URLConnection.getInputStream() : 连接超时

> ID：12956991
> 
> 赞同：2
> 
> 时间：2012-10-18T14:28:48.470
> 
> 标签：java, http, networking, timeout, connection

我使用[Sun 的 java 教程中的代码](http://java.sun.com/docs/books/tutorial/networking/urls/readingWriting.html)

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL yahoo = new URL("http://www.yahoo.com/");
        URLConnection yc = yahoo.openConnection();
        BufferedReader in = new BufferedReader(
                                new InputStreamReader(
                                yc.getInputStream()));
        String inputLine;

        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

[堆栈跟踪与连接超时](https://stackoverflow.com/questions/5907037/connection-timed-out-why)相同。[为什么？](https://stackoverflow.com/questions/5907037/connection-timed-out-why)

我怀疑这可能是防火墙的问题，但是

1.  ping 到 google.com 没问题
2.  它在浏览器中工作
3.  对于我提供的每个 URL，这种方法都失败了
4.  我在其他程序中使用 DJ WebBrowser 组件，它可以作为浏览器使用

**我该如何调查有关此问题的更多信息？我可以知道运行代码时将使用哪些端口号吗？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:10:06.360

找到您公司使用的代理并将其设置在您的程序中。引用 [1] 中的代码

```
//Set the http proxy to webcache.mydomain.com:8080

System.setProperty("http.proxyHost", "webcache.mydomain.com");
System.setPropery("http.proxyPort", "8080");

// Next connection will be through proxy.
URL url = new URL("http://java.sun.com/");
InputStream in = url.openStream();

// Now, let's 'unset' the proxy.
System.setProperty("http.proxyHost", null);

// From now on http connections will be done directly. 
```

[1] - [http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T15:38:06.960

还有一个 HttpURLConnection 在某些情况下可能会更好。它似乎没有以相同的方式断开连接。

```
URL url = new URL(address); 
HttpURLConnection conn = (HttpURLConnection)url.openConnection();
conn.setConnectTimeout(callTimeout); 
```

等等。

# php - 使用过滤器设计自定义查询生成器

> ID：12956993
> 
> 赞同：0
> 
> 时间：2012-10-18T14:28:55.370
> 
> 标签：php, mysql, zend-framework

让我先解释一下这个问题，然后再解释一下我对这个问题的一些解决方案。（肯定会遇到很多人，但我不知道如何用干净的代码解决它）

Q：有一个mysql数据库，想根据多个和/或where条件进行查询。例如，其中 column1 = 3 和 column2 不像“ab%”

一个简单的解决方案（因为我正在使用 php zend 查询生成器）

```
if(column1)
$query->where(conditions);
if(column2)
$query->where(conditions);
.
.
.
if(columnn)
$query->join(some params)
      ->where(conditions); 
```

或者第二种方式

创建多个函数并通过它们传递数据。

哪个是更好的实现？有没有相同的文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:44:25.350

您的`where`子句应如下所示：

```
where
    (:p1 is null or col1 = :p1)
    or (
        (:p2 is null or col2 = :p2)
        and
        (:p3 is null or col3 like '%:p3')
    ) 
```

是`:p`参数。如果未给出该参数，则将其作为`null`.

# ios - PKCS#7 使用 NodeJS 解包数据有效负载？

> ID：12956995
> 
> 赞同：5
> 
> 时间：2012-10-18T14:29:02.280
> 
> 标签：ios, node.js, encryption, cryptography, pkcs#7

我正在为 iOS 开发 MDM NodeJS 服务器。在 Apple 文档中，给出了以下 ruby​​ 代码：

```
 p7sign = OpenSSL::PKCS7::PKCS7.new(req.body)
  store = OpenSSL::X509::Store.new
  p7sign.verify(nil, store, nil, OpenSSL::PKCS7::NOVERIFY)
  signers = p7sign.signers 
```

NodeJS 中的等价物是什么？这个想法是访问`p7sign.data`包含一个 xml plist。

这是否可以使用任何一个`crypto`或外部节点库（`ursa`等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T19:34:03.803

一个不错的选择是使用 child_process 直接调用 openssl。我这样做是为了验证 iOS .mobileprovision 文件。

```
$ openssl smime -verify -in FILE -inform der 
```

openssl 命令必须是苹果提供的（不是来自端口或自制软件），以便它可以在钥匙串中找到签名证书和 CA。

我自己没有尝试过，但是 node-forge 库包含许多加密算法的实现。

[https://npmjs.org/package/node-forge#pkcs7](https://npmjs.org/package/node-forge#pkcs7)