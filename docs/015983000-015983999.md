# StackOverflow 问答 15983000-15983999

# ruby - 如何在一次操作中将字符串拆分为数组，但仅当该行包含给定模式时？

> ID：15983001
> 
> 赞同：0
> 
> 时间：2013-04-13T00:51:17.663
> 
> 标签：ruby, regex, arrays, string-matching

我必须匹配文件中的一行并捕获行内容。该行如下：

```
key:value key:value abc:123 
```

我有一段代码根据行内容处理文件中的不同行。上面的行可以通过行中出现的键“abc”来识别。我需要一个执行以下操作的正则表达式

1.  检查行中是否存在“abc”
2.  如果存在“abc”，则以数组的形式获取内容

我可以单独做这些

```
#gives me an array of the key,value pairs
array = line.scan(/\w+:\d+/) 
#matches "abc:value" but does not give me the other keys
/.*(abc:\d+)/.match(line) 
```

寻找一种方法在一次操作中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:04:41.587

怎么样：

```
array = line.scan(/\w+:\d+/) if line[/abc:\d+/] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:47:54.290

## 不要把事情复杂化

正则表达式，尤其是一个单一的整体表达式，并不是解决所有问题的方法。即使有*可能*，过于复杂的表达式也不会使您的代码更具可读性或可维护性。除非你的雇主对每一行代码都向*你*收费，否则不要害怕使用多行代码来表达一个概念。

## 使用条件表达式

您可以在语句中使用条件表达式在一行内进行匹配。例如：

```
line = 'key:value key:value abc:123'
line.scan /(\S+:\S+)/ if line =~ /abc:/
# => [["key:value"], ["key:value"], ["abc:123"]] 
```

*如果它首先匹配if*语句中的条件，这只会将该行拆分为一个匹配数组。但是，请注意，您基本上仍然在进行两个正则表达式匹配。

如果您试图避免执行两个正则表达式匹配，可能是出于在紧密循环内的性能原因，您可以使用字符串模式匹配作为您的条件执行类似的操作。例如：

```
line = 'key:value key:value abc:123'
line.scan /(\S+:\S+)/ if line.include? 'abc:'
# => [["key:value"], ["key:value"], ["abc:123"]] 
```

结果是一样的，但是[String#scan](http://ruby-doc.org/core-2.0/String.html#method-i-scan)使用正则表达式匹配，而条件使用[String#include?](http://ruby-doc.org/core-2.0/String.html#method-i-include-3F) . 后者*可能*更快。

# javascript - NodeJS 模块 - 填充数组变成空对象。为什么？

> ID：15983002
> 
> 赞同：3
> 
> 时间：2013-04-13T00:51:21.240
> 
> 标签：javascript, arrays, node.js, object

我有一个导出配置对象的模块：

```
module.exports = {
    music : {
        catalog : {
            mysql : {
                requiredFields : {
                    foo : [1,2,3],
                    trackQuery : [
                        {
                            table : 'tracks',
                            alias : 't',
                            foo   : [1,2,3],
                            fields : [
                                'id',
                                'name',
                                'duration'
                            ]
                        },
                        {
                            table : 'artists',
                            alias : 'a',
                            fields : [
                                'id',
                                'name'
                            ]
                        }
                    ]
                }
            }
        }
    }
} 
```

数组在`fields`运行时变成空对象。

**我这样确认**：

```
var conf = require('musicConfig');
console.log ("requiredFields = %j", conf.music.catalog.mysql.requiredFields); 
```

...**输出这个**：

```
requiredFields = ["foo":[1,2,3],"trackQuery":[{"table":"tracks","alias":"t","foo":{},"fields":{}},{"table":"artists","alias":"a","fields":{}}]] 
```

如你看到的：

```
conf.music.catalog.mysql.requiredFields.foo                 // [1,2,3]
conf.music.catalog.mysql.requiredFields.trackQuery[0].foo   // {}  <-- WTF
conf.music.catalog.mysql.requiredFields.trackQuery[0].table // "tracks" 
```

知道发生了什么吗？是的，我可以将`fields`数组移动到更高级别的命名空间，它会起作用——实际上是向前迈了一步。如果我将它直接放在它的下方`requiredFields`，它将保持填充状态，但这不是一个理想的解决方案。

我在[这里](http://jsfiddle.net/7TgJj/)确认它不是 ECMAScript 错误，也不是我的对象结构，因为它按预期工作。

我在 Ubuntu 上运行 Node **0.10.3**，具有以下依赖项：

```
"dependencies" : {
    "express"    : "3.1.0",
    "redis"      : "0.8.2",
    "jade"       : "0.28.2",
    "mysql"      : "2.0.0-alpha7",
    "mongodb"    : "*",
    "config"     : "0.4.22"
} 
```

我认为可能是那个[配置模块](https://github.com/lorenwest/node-config)，但即使我绕过它，问题仍然存在。

### 更新

这是来自：`console.log(util.inspect(config.music.catalog.mysql.requiredFields.trackQuery[0], { showHidden: true, depth: null }));` -- 虽然它并没有太大帮助的输出。我正在寻找更多有用的标志，欢迎提出建议。

```
{ table: [Getter/Setter],
  alias: [Getter/Setter],
  foo: [Getter/Setter],
  fields: [Getter/Setter],
  [__watchers]:
   { table:
      [ { [Function]
          [length]: 0,
          [name]: '',
          [arguments]: null,
          [caller]: null,
          [prototype]: { [constructor]: [Circular] } },
        [length]: 1 ],
     alias:
      [ { [Function]
          [length]: 0,
          [name]: '',
          [arguments]: null,
          [caller]: null,
          [prototype]: { [constructor]: [Circular] } },
        [length]: 1 ],
     foo:
      [ { [Function]
          [length]: 0,
          [name]: '',
          [arguments]: null,
          [caller]: null,
          [prototype]: { [constructor]: [Circular] } },
        [length]: 1 ],
     fields:
      [ { [Function]
          [length]: 0,
          [name]: '',
          [arguments]: null,
          [caller]: null,
          [prototype]: { [constructor]: [Circular] } },
        [length]: 1 ] },
  [__propertyValues]:
   { table: [ 'tracks', [length]: 1 ],
     alias: [ 't', [length]: 1 ],
     foo: [ { [__watchers]: {}, [__propertyValues]: {} }, [length]: 1 ],
     fields: [ { [__watchers]: {}, [__propertyValues]: {} }, [length]: 1 ] } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:16:13.293

我可以在使用模块读取文件时重现问题`config`，所以我认为您没有正确绕过它。

此外，当我增加`DEFAULT_CLONE_DEPTH`时`config/lib/config.js`（它似乎无法从外部配置，但我对它不是很熟悉），它可以工作：

```
> console.log(conf.music.catalog.mysql.requiredFields.trackQuery[0].foo)
[ [Getter/Setter], [Getter/Setter], [Getter/Setter] ] 
```

# python - 如何处理影响彼此内容的 wxPython TextCtrls

> ID：15983005
> 
> 赞同：0
> 
> 时间：2013-04-13T00:51:47.227
> 
> 标签：python, events, wxpython, textctrl

我正在尝试在 wxPython 中构建一个 GUI。我有两个 TextCtrls。假设它们是`first_index_input`和`last_index_input`，它们分别控制`model.f_i`和`model.l_i`。有一个条件：为了正确执行模型，model.f_i 必须 <= model.l_i。因此 的内容`first_index_input`应该是 <= `last_index_input`。

所以我想要做的是修复它，以便：1）如果用户输入的值`first_index_input`大于`last_index_input`（在先前的用例中建立的）中的值，那么`last_index_input`两者`model.l_i`都将设置为等于新的`first_index_input`. 2) 如果用户输入的 a`last_index_input`小于`first_index_input`，则将`last_index_input`再次更正并设置为等于`first_index_input`。

那么这有什么难的呢？这是要关闭什么事件的问题。假设`first_index_input`有内容“145”并且我（正确地）想要`last_index_input`输入 10324。如果这个小部件关闭 wx.EVT_TEXT 事件，那么它不会等待我输入“10324”。一旦它看到“1”（即第一个数字），它就会吓坏并说：“不！那小于`first_index_input`”并“纠正”我的打字。另一方面，我可以通过关闭 wx.EVT_TEXT_ENTER 命令来摆脱这种情况，*只要我记得在输入我的值后按回车*并且我从不记得按回车，所以一切正常，所以我确信我的用户也不会。

还有另一种方法可以做到这一点吗？也许还有其他可用的事件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:36:34.717

我会将 EVT_TEXT 与 wx.Timer 一起使用。这里的想法是监控自用户上次在第二个控件中键入内容以来的时间。因此，您的起始值将为零 (self.start_value)，并且每次 EVT_TEXT 触发时，您都将重置该值并重新启动计时器。当 EVT_TIMER 事件被触发时，它将增加起始值。您必须在计时器的事件处理程序中放置一个“if”语句，以检查起始值是否大于 X 秒。如果是，则检查第一个输入是否小于第二个输入并采取相应措施。确保停止计时器，因为它是一个正在运行的计时器对象，当您关闭它时可能会挂起应用程序。

这是关于计时器的链接：http: [//www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)

# c++ - 防止在父级被 GC 时删除嵌套的 C++ 结构

> ID：15983008
> 
> 赞同：0
> 
> 时间：2013-04-13T00:52:34.477
> 
> 标签：c++, python, swig

这是我遇到的问题的一个非常简单的例子。struct Foo 包含包含一个 int 的 struct Bar。如果 Foo 被垃圾回收，那么它的内部 Bar 也会被删除，即使仍然有对该 bar 的引用。

**Python代码**

```
import example

def get_bar():
    foo = example.Foo()
    foo.bar.x = 10
    bar = foo.bar
    print("before {}".format(bar.x))
    return foo.bar # foo (and bar) are deleted when this returns

bar = get_bar()
print("after {}".format(bar.x)) 
```

**输出**

```
> before 10
> after 39656152 
```

我已经从 C++ 代码中删除了所有指针和引用，希望 SWIG 使用相同的值语义，但它仍在内部将事物转换为 Foo* 和 Bar*。我想我的问题是，如何说服 SWIG 在 _wrap_Foo_bar_get 中制作 bar 的副本？

下面的示例代码：

**例子.h**

```
struct Bar {
  int x;
};
struct Foo {
  Bar bar;
}; 
```

**例子.i**

```
%module "example"
%{
  #include "example.h"
%}
%include "example.h" 
```

**CMakeLists.txt**

```
FIND_PACKAGE(SWIG REQUIRED)
INCLUDE(${SWIG_USE_FILE})

FIND_PACKAGE(PythonLibs)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH} .)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

SET(CMAKE_SWIG_FLAGS "")

SET_SOURCE_FILES_PROPERTIES(example.i PROPERTIES CPLUSPLUS ON)
SET_SOURCE_FILES_PROPERTIES(example.i PROPERTIES SWIG_FLAGS "-includeall")
SWIG_ADD_MODULE(example python example.i example.h)
SWIG_LINK_LIBRARIES(example ${PYTHON_LIBRARIES}) 
```

这是生成的 SWIG 方法，它获取对 bar 的引用，而不是它的值：

```
SWIGINTERN PyObject *_wrap_Foo_bar_get(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {
  PyObject *resultobj = 0;
  Foo *arg1 = (Foo *) 0 ;
  void *argp1 = 0 ;
  int res1 = 0 ;
  PyObject * obj0 = 0 ;
  Bar *result = 0 ;

  if (!PyArg_ParseTuple(args,(char *)"O:Foo_bar_get",&obj0)) SWIG_fail;
  res1 = SWIG_ConvertPtr(obj0, &argp1,SWIGTYPE_p_Foo, 0 |  0 );
  if (!SWIG_IsOK(res1)) {
    SWIG_exception_fail(SWIG_ArgError(res1), "in method '" "Foo_bar_get" "', argument " "1"" of type '" "Foo *""'"); 
  }
  arg1 = reinterpret_cast< Foo * >(argp1);
  result = (Bar *)& ((arg1)->bar);
  resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_Bar, 0 |  0 );
  return resultobj;
fail:
  return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:34:50.703

SWIG（和 Boost Python）通过在具有非常不同数据模型的语言之间进行交互，正在打一场艰苦的战斗。通过期望那些 SWIG 包装的对象的行为与其他 Python 对象完全一样，您正在使这场战斗变得更加艰难（无法取胜）。他们不这样做，因为他们做不到。C++ 和 Python 数据模型完全不同。

在 C++ 中，`Bar`嵌入在类中的实例是对象`Foo`的组成部分`Foo`。该嵌入`Bar`对象占用的内存是包含该对象的整体内存的一部分`Foo`。当`foo`超出范围并被破坏时，`foo.bar`必须超出范围并与它的包含对象一起被破坏。你`foo.bar`是不可分离的`foo`。这两个对象具有相同的寿命。

在 Python 中情况并非如此。包含子对象的 Python 对象不包含 C++ 意义上的子对象。包含对象和包含对象的内存是不同的且不重叠的。相反，包含对象具有对包含的子对象的引用。这使得 Python 中的这些子对象可以与包含它们的对象分离。只需获取对该子对象的单独引用引用，瞧！，包含对象和包含对象具有不同的生命周期。

解决此问题的一种方法是在 C++ 代码中使用智能指针。SWIG 在某种程度上确实支持这些。解决这个问题的另一种方法是永远不要让它抬起丑陋的脑袋。积极处理隐藏在您向 SWIG 公开的代码中的数据。`Bar`如果嵌入在该对象中`Foo`的对象被正确隐藏，则永远不会出现问题。使用成员函数，而不是成员数据，你会做得更好。

最后一句话：解决这个问题还有另一种有点笨拙的方法，那就是使用`thisown`属性。如果你`foo.thisown = 0`在你的 Python 函数中设置，`get_bar`你就不会遇到这个问题。但是，您可能会发生泄漏。

# vb.net - VB：当我更改内部列表时，List(Of List(Of String)) 不断更改外部列表的内容？

> ID：15983009
> 
> 赞同：2
> 
> 时间：2013-04-13T00:53:12.137
> 
> 标签：vb.net, list

我正在用 VB 编写一个程序，我需要制作一个列表列表（我已经想出了如何做到这一点）。问题是，外部列表将需要不同数量的元素，具体取决于程序中其他地方的其他变量。

我已经循环了这段代码：

```
 Dim rep As Long = 1023
    Dim items As List(Of String)
    items.Add("First Entry")
    items.Add("Second Entry")
    items.Add("Third Entry")
    items.Add("Fourth Entry")

    '(sake of argument, these are the variables
    'that will be changing vastly earlier
    'in the program, I put them in this way to simplify
    'this part of my code and still have it work)

    Dim myList As New List(Of List(Of String))
    Dim tempList As New List(Of String)

    For index = 1 To Len(rep.ToString)
        tempList.Add(items(CInt(Mid(rep.ToString, index, 1))))
    Next

    myList.Add(tempList)
    tempList.Clear() 
```

我的问题是最后一部分；每次我把tempList添加到myList中都可以，但是当我清除tempList时，它也会清除myList中tempList的版本。

myList 的计数为 1，但在我清除 tempList 后，其中的列表计数为 0。而且我必须清除 tempList，因为我一遍又一遍地循环这部分代码，次数不定。

有没有解决的办法？我是一个可怕的菜鸟吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:59:13.050

您`tempList`每次都使用相同的，而不是制作一个新的。

您可能需要执行以下操作：

```
myList.Add(tempList)
tempList = new List(Of String) ' Create a new List(Of T), don't reuse... 
```

# javascript - onClick 复制文本字段值到下拉字段

> ID：15983012
> 
> 赞同：1
> 
> 时间：2013-04-13T00:53:38.010
> 
> 标签：javascript, dom-events

我一直在研究如何将文本字段值复制到下拉菜单中，并且只看到了如何完成相反的操作。有人可以帮我调整此代码，以便将运输城市值（文本字段）复制到计费城市（下拉菜单）吗？

```
 <html>
    <head>
    <title>Untitled Document</title>
    </head>

    <body>
    <P>
    <script type="text/javascript">
    <!--
    function FillBilling(f) {
      if(f.billingtoo.checked == true) {
      f.billingname.value = f.shippingname.value;
      f.billingcity.value = f.shippingcity.value;
      }
    }
    // -->
    </script>
    <TABLE BORDER=1><TR><TD BGCOLOR="eeeeee">
    <b>Mailing Address</b>
    <br><br>
    <form>
    Name:
    <input type="text" name="shippingname">
    <br>
    City:
    <input type="text" name="shippingcity">
    <br>
    <input type="checkbox" name="billingtoo" onclick="FillBilling(this.form)">
    <em>Check this box if Billing Address and Mailing Address are the same.</em>
    <P>
    <b>Billing Address</b>
    <br><br>
    Name:
    <input type="text" name="billingname">
    <br>
    City:
    <select name="billingcity">
    <option value="City 1">City 1</option>
    <option value="City 2">City 2</option>
    <option value="City 3">City 3</option>
    </select>
    </form>
    </TD></TR></TABLE>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:09:46.780

这有点乱，但这是我对你似乎想要的东西的尝试：

```
function FillBilling(f) {
    if (f.billingtoo.checked === true && f.shippingcity.value) {
        f.billingname.value = f.shippingname.value;

        var found = false;
        for (var i = 0; i < f.billingcity.options.length; i++) {
            if (f.billingcity.options[i].value.toLowerCase() === f.shippingcity.value.toLowerCase()) {
                f.billingcity.selectedIndex = i;
                found = true;
                break;
            }
        }
        if (!found) {
            var extraOption = f.billingcity.getAttribute("data-extra-option");
            if (extraOption) {
                f.billingcity.options[f.billingcity.options.length - 1].text = f.shippingcity.value;
                f.billingcity.options[f.billingcity.options.length - 1].value = f.shippingcity.value;
            } else {
                var newOption = new Option(f.shippingcity.value, f.shippingcity.value);
                f.billingcity.setAttribute("data-extra-option", "true");
                f.billingcity.appendChild(newOption);
                f.billingcity.selectedIndex = f.billingcity.options.length - 1;
            }
        } else {
            if (f.billingcity.getAttribute("data-extra-option")) {
                f.billingcity.removeChild(f.billingcity.options[f.billingcity.options.length - 1]);
                f.billingcity.selectedIndex = 0;
            }
        }
    } else {
        if (f.billingcity.getAttribute("data-extra-option")) {
            f.billingcity.removeChild(f.billingcity.options[f.billingcity.options.length - 1]);
            f.billingcity.selectedIndex = 0;
        }
    }
} 
```

**演示：http:** [//jsfiddle.net/J8YrU/1/](http://jsfiddle.net/J8YrU/1/)

现在，这个函数在被点击的复选框和正在更改的 Shipping City 文本框值时都被调用。

这个函数的作用是：

*   如果在文本框中键入的文本与现有的下拉选项匹配，它会选择该值
*   如果在文本框中输入的文本与现有的下拉选项不匹配，它将在用户输入的末尾附加一个新选项，然后选择它
*   如果在文本框中键入的文本与现有的下拉选项不匹配，但已经添加了一个新的自定义选项（来自最后一个项目符号），它只会更新其文本/值。

所以测试一下，试试这些东西：

*   在文本框中输入“City 3”
*   在文本框中输入“asdf”
*   在文本框中输入“asdf3”
*   在文本框中输入“城市 2”

您可以在尝试每件事后检查下拉列表的状态，看看它发生了什么。此外，您也可以随时切换复选框以进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:31:58.040

我建议包括 jquery，然后做这样的事情：

```
function FillBilling(f) {
  if(f.billingtoo.checked == true) {
    var $firstCity = $('select option:first-child');
    $firstCity.attr('text', f.shippingcity.value);
    $firstCity.attr('value', f.shippingcity.value);
  } 
```

这应该将选择的第一个选项更新为用户输入的城市

同样正如另一个用户所建议的那样，最好给选择一些 id（例如 selectIdentificator），然后像这样更新上面的代码

```
var $firstCity = $('#selectIdentificator option:first-child'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:56:01.573

您需要有效地使用 ID 和 document.getElementById 以便在单击按钮时获取正确的表单元素并重新分配 dropbox/select 中的值。

```
<html>
<head>
<title>Untitled Document</title>
</head>

<body>
<P>
<script type="text/javascript">
<!--
function FillBilling(f) {
  if(f.billingtoo.checked == true) {

  document.getElementById("billingname").value = document.getElementById("shippingname").value;

  var optn = document.createElement("OPTION");
  optn.text = document.getElementById("shippingcity").value;;
  optn.value = document.getElementById("shippingcity").value;;;
  document.getElementById("billingcity").options.add(optn);
  }
}
// -->
</script>
<TABLE BORDER=1><TR><TD BGCOLOR="eeeeee">
<b>Mailing Address</b>
<br><br>
<form>
Name:
<input type="text" name="shippingname" id="shippingname">
<br>
City:
<input type="text" name="shippingcity" id="shippingcity">
<br>
<input type="checkbox" name="billingtoo" onclick="FillBilling(this.form)">
<em>Check this box if Billing Address and Mailing Address are the same.</em>
<P>
<b>Billing Address</b>
<br><br>
Name:
<input type="text" name="billingname" id="billingname">
<br>
City:
<select id="billingcity" name="billingcity">
<option value="City 1">City 1</option>
<option value="City 2">City 2</option>
<option value="City 3">City 3</option>
</select>
</form>
</TD></TR></TABLE>
</body>
</html> 
```

为了更改选择值而不是添加，您将使用：

```
document.getElementById("billingcity").value=document.getElementById("shippingcity").value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T01:08:59.907

要将值添加到选择元素，您需要添加具有适当文本和值属性的选项元素。所以你可能会这样做：

```
var select = f.billingcity;

// Create a new option element, passing values for the text and value proprties
var option = new Option(f.shippingcity.value, f.shippingcity.value);

// Append the option to the select
select.appendChild(option);

// Make the new option the selected option
option.selected = true; 
```

# svn - Redmine 不访问 VisualSVN 存储库

> ID：15983013
> 
> 赞同：1
> 
> 时间：2013-04-13T00:53:57.347
> 
> 标签：svn, redmine, visualsvn-server, bitnami

我正在尝试继续使用 VisualSVN Server，因为它运行良好并且具有漂亮的管理 UI。

使用 TortoiseSVN，我可以使用 URL 正确地从中签出`http://myhost:90/svn/HikariKrumo/`

但我不能让 Redmine 做同样的事情。如果我使用相同的 URL 并转到存储库页面，我会收到错误消息`The entry or revision was not found in the repository.`

VisualSVN 服务器不支持`svn://`协议。Redmine 应该支持 SVN over HTTP(s)，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T09:37:48.983

在 redmine 中的存储库设置中，您必须输入您已在本地磁盘上签出的本地存储库的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:56:17.937

您是否配置了 Redmine 存储库以使用`http://myhost:90/repository-name`？Redmine 使用“svn”命令在存储库中获取所需的信息。您可以尝试从 BitNami Redmine 命令行签出您的存储库吗？

```
Start -> Program Files -> BitNami Redmine -> Use Redmine

> svn checkout http://myhost:90/repository-name 
```

请注意，您也应该在 URL 中指定存储库名称。我希望它有所帮助。

# php - 使用 wkhtmltopdf 将当前页面打印为 pdf

> ID：15983018
> 
> 赞同：2
> 
> 时间：2013-04-13T00:54:29.993
> 
> 标签：php, webkit, wkhtmltopdf

最近安装的 wkhtmltopdf。试图以当前状态捕获整个页面，但是，下面的方法似乎导航到该页面的初始状态，而没有用户输入的所有输入字段。

PHP

```
shell_exec('wkhtmltopdf http://localhost/www/bolt/invoice.php invoice.pdf'); 
```

我想知道是否有人知道`wkhtmltopdf`捕获页面当前状态的实现，包括在文本字段中输入的任何文本？

我很感激任何建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:57:46.820

wkhtmltopdf 独立于您当前的浏览会话访问页面。如果你这样点击它，你会得到任何人第一次访问你的页面时会看到的内容。可能您想要做的是使用输出缓冲区保存当前页面，然后在保存的页面上运行 wkhtmltopdf。这是一些示例代码：

子.php

```
<?php
$documentTemplate = file_get_contents ("template.html");
foreach ($_POST as $key => $postVar)
{
    $documentTemplate = 
    preg_replace ("/name=\"$key\"/", "value=\"$postVar\"", $documentTemplate);
}
file_put_contents ("out.html", $documentTemplate);
shell_exec ("wkhtmltopdf out.html test.pdf");
?> 
```

模板.php

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <h1>This is a page</h1>
    <form action="sub.php" method="post" accept-charset="utf-8">
        My Test Field:
        <input type="text" name="test_field" value="">
        <input type="submit" value = "submit">
    </form>
</body>
</html> 
```

从长远来看，您可能应该有一些两个页面都会使用的基本模板，并且一个在您的输入字段中有一些标记，例如 value='%valueOfThisVariable%' ，当您将字段呈现给用户时，您可以将其替换为空白，并在创建要写入 pdf 的页面时填写用户数据。现在它只是通过并将所有 name='this_name' 替换为 value='this_name->value'。

# ruby-on-rails - 在我从循环外部检查之前，循环内的 Rails 乐观锁定更新似乎有效

> ID：15983019
> 
> 赞同：1
> 
> 时间：2013-04-13T00:54:35.050
> 
> 标签：ruby-on-rails, optimistic-locking

我在 Rails 模型上使用乐观锁定。在循环内部，我更新并保存了这个模型（或者，更确切地说，这个模型的许多实例）。

从循环内部，我输出“之前”和“之后”值，并且该字段似乎已正确更新。但是之后，当我通过 ID 找到模型时，我看到该字段没有更新。谁能发现我的错误？

```
class Usage::LeadDistributionWeight < ActiveRecord::Base
  attr_accessible :agent_id, :tag_value_id, :weight, :premium_limit, :countdown, :lock_version, :tag_value

  def increment_countdown!
    self.countdown = self.countdown + self.weight
    save
  rescue ActiveRecord::StaleObjectError
    attempts_to_crement_countdown ||= 0
    attempts_to_crement_countdown += 1
    self.increment_countdown! unless attempts_to_crement_countdown > 5
    false
  end

  def self.increment_countdowns parent_id, lead_type_id
    if lead_type_id.present?
      joins(:agent)
      .where("#{reflect_on_association(:agent).table_name}.parent_id = ?", parent_id)
      .where(tag_value_id:lead_type_id)
      .all(readonly:false).each { |weight|
        prev = weight.countdown
        if weight.increment_countdown!
          puts "#{prev} differs from #{weight.countdown}"
        else
          puts "no difference!"
        end
      }
    end
  end
end 
```

# java - 如何检查三个字符是否相等以及它们是否相等？

> ID：15983024
> 
> 赞同：0
> 
> 时间：2013-04-13T00:55:11.520
> 
> 标签：java

嗨，我对 java 有点陌生，我想弄清楚如何确定三个字符是否相等。如果它们确实彼此相等，我想弄清楚它们相等。我该怎么做？我没有任何有助于解决此问题的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T01:00:51.447

**这不是智能/动态解决方案，但有效：**

```
char a = 'a';
char b = 'b';
char c = 'a'; 

if(a == c && b == c) {
    System.out.println("All chars are same");
} else {
    if(a == b) System.out.println("a equals b");
    if(a == c) System.out.println("a equals c");
    if(b == a) System.out.println("b equals a");
    if(b == c) System.out.println("b equals c");
    if(c == a) System.out.println("c equals a");
    if(c == b) System.out.println("c equals b");
} 
```

> *输出：*
> 
> a 等于 c
> c 等于 a

**动态方式：**

```
char[] chars = {'a', 'b', 'a'};

for (int i = 0; i < chars.length; i++) {
    char char1 = chars[i];

    for (int i2 = 0; i2 < chars.length; i2++) {
        char char2 = chars[i2];

        if (i != i2) {
            if (char1 == char2) {
                System.out.println(char1 + " equals " + char2);
            } else {
                System.out.println(char1 + " not equals " + char2);
            }
        }
    }
} 
```

> *输出：*
> 
> a 不等于 b
> a 等于 a
> b 不等于 a
> b 不等于 a
> a 等于 a a
> a 不等于 b

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:01:17.663

您使用测试字符的相等性`==`

```
 char c1 = ...
  char c2 = ...
  if (c1 == c2) {
      System.out.println("they are equal");
  } 
```

`&&`您可以使用and`||`运算符（“and”和“or”）将其扩展到多个测试

```
 if (c1 == c2 && c2 == c3) {
      System.out.println("they are all equal");
  } 
```

至于“弄清楚它们等于[to]”......最明显的解释是你想打印出字符的值

```
 if (c1 == c2 && c2 == c3) {
      System.out.println("All three characters are '" + c1 + "'");
      System.out.println("The Unicode codepoint is " + ((int) c1));
  } 
```

最后一行将字符转换为整数并打印出来（十进制）。如果您尝试检查的字符不可打印，您可以这样做。此外，在某些情况下，两个或多个不同的 Unicode 代码点¹在显示时无法区分。

（现在，如果您询问 1 个字符串...答案会非常不同。您不应该使用 比较任何类型的字符串`==`。您应该使用`String.equals`...）

* * *

^(1 - 实际上，*代码点*不是正确的术语。A`char`通常表示一个 Unicode 代码点，但在某些情况下，一个代码点需要两个`char`值……一个代理对。有一个更准确的术语来说明 a`char`是什么，但目前我没有想到它。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T00:59:07.520

```
char c1 = 'a';
char c2 = 'b';
char c3 = 'c';

// are all 3 equal?
if(c1 == c2 && c2 == c3) {
    // print out what the char is
    System.out.println("The characters all equal and is " + c1);
} 
```

# javascript - 为什么我需要在'stack'之后添加[exponent - 1]？

> ID：15983027
> 
> 赞同：0
> 
> 时间：2013-04-13T00:55:43.030
> 
> 标签：javascript

我目前正在学习 Javascript 中的递归函数，并且在大多数情况下我了解递归是什么以及如何使用它，但我有一个问题：为什么我需要“为什么我需要在'之后添加 [exponent - 1]堆'？” 这是代码：

```
var stack = [];

// Here is our recursive function
function power(base, exponent) {
    // Base case 
    if ( exponent === 0 ) {
        return 1;
    }
    // Recursive case
    else {
        //Why do I need [exponent - 1]?
        **stack[exponent - 1] = base * power(base, exponent - 1)**;
        return stack[exponent - 1];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:58:16.717

你真的不需要它，试试：

```
var stack = [];

function power(base, exponent) {
    // Base case 
    if ( exponent === 0 ) {
        return 1;
    }
    // Recursive case
    else {
        //[exponent] instead of [exponent - 1]
        stack[exponent] = base * power(base, exponent - 1);
        return stack[exponent];
    }
} 
```

但是，堆栈会有一个未定义的索引，因此您可以尝试

```
var stack = [];

function power(base, exponent) {
    // Base case 
    if ( exponent === 0 ) {
       stack[0] = 1;
    }
    // Recursive case
    else {
        //[exponent] instead of [exponent - 1]
        stack[exponent] = base * power(base, exponent - 1);
    }
    return stack[exponent];
}
alert(power(2,3));
alert(stack);
// stack is now [1, 2, 4, 8] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:44:33.927

这是因为

```
power(any_number, 0) = 1, (constant)

stack[0] = power(any_number, 0) = 1,
stack[1] = any_number * stack[0],
stack[2] = any_number * stack[1],
stack[3] = any_number * stack[2],
... 
```

这就是 power() 函数在数学中的工作原理。数到零的幂 (n^0) = 1，接下来每个幂在幂之前乘以基数一倍。

你明白？

**编辑**

回答您的评论，您几乎从您所写的内容中理解了。

就像这样：

```
n^0 = 1
n^1 = n * n^0 = n * 1
n^2 = n * n^1 = n * n * 1
n^3 = n * n^2 = n * n * n * 1
n^4 = n * n^3 = n * n * n * n * 1
... 
```

每个下一个都是`n * previous`（//递归案例）

除了 n^0 始终等于 1 并结束此函数外。（// 基本情况）

现在更清楚了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T18:39:18.670

数组从 索引`[0, length - 1]`。如果我们没有减去 0，那么 的第一个元素`stack`将为空。`exponent`在这种情况下将始终大于 0 `else`。

# ios - ios 应用程序的背景在测试时未加载

> ID：15983031
> 
> 赞同：1
> 
> 时间：2013-04-13T00:56:04.277
> 
> 标签：ios, xcode, background

我有我的第一个应用程序，但背景不会加载，但只有当我在我的 Ipod 上测试它时才会加载。当我在模拟器上测试它时，它工作正常。应用程序加载，但背景是黑色的。

它给了我一个错误，但该错误不会阻止应用程序编译和运行。这是错误： ![在此处输入图像描述](https://i.stack.imgur.com/ZVbfH.png)

这些文件都是png的，它们都在正确的位置。

这是我实现背景 ![在此处输入图像描述](https://i.stack.imgur.com/6etIz.png) 的方式：文件都在那里，如下所示：![在此处输入图像描述](https://i.stack.imgur.com/mCyRN.png) 有谁知道为什么这样做？我真的很想发布应用程序，但必须先解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:06:29.897

该文件必须与您的呼叫相同。您的通话中有 default.png，文件名有 Default.png。它只在设备上很重要。

在模拟器中没关系。

# php - getJSON (JSONP) 没有任何反应

> ID：15983032
> 
> 赞同：0
> 
> 时间：2013-04-13T00:56:04.467
> 
> 标签：php, jquery, json, jsonp

我在域 example1.com 上有一个有效的 JSON 文件。它只是一个带有标题的 PHP 文件（'Content-type: application/json; charset=utf-8'）。此页面上的 JSON 是有效的。

我正在尝试解析另一个域上的 JSON。这是脚本：

```
$(function() {
    $.getJSON('www.example1.com?callback=?', function(data) {
        alert("lol")
    });
}); 
```

为什么警报不起作用？似乎回调从未启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:13:38.793

必须将 http:// 放在 url 中。

[http://www.example1.com?callback=](http://www.example1.com?callback=) ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:25:21.690

我认为从你得到的那个网址来看，json 很糟糕。

它有回声“{}”吗？

或 echo json_encode($something) ？

它需要返回一个空的 json，或者一些 json

# hadoop - hdfs在哪里？

> ID：15983033
> 
> 赞同：-3
> 
> 时间：2013-04-13T00:56:08.573
> 
> 标签：hadoop, hdfs

我已经在我的机器上安装了 hadoop（单节点）。如何与 hdfs 交互？

我认为使用 hadoop fs mkdir 创建目录会使该目录中的所有内容都在 hdfs 中，但我可以使用普通的 linux 命令交互写入该目录。也许我完全误解了文件系统的工作原理，但我认为它只是附加的，只能使用它的 api 访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:27:41.810

Hadoop有三种安装方式：

1.  分布式模式（集群）
2.  伪分布式模式（单节点）
3.  本地模式（单节点）

在前两种模式下安装 HDFS。但在第三种模式下，HDFS 不存在，而是模拟的。您可以调用“$hadoop fs -ls”之类的命令，但它适用于您的本地文件系统，而不适用于 hdfs。

此外，HDFS 不是功能齐全的文件系统。要与之交互，您应该在视图中使用命令：

*   **hadoop fs -ls**
*   **hadoop fs -mkdir** your_directory
*   **hadoop fs -cat** your_file

等等

HDFS 不能挂载到你的 linux 文件系统（至少没有额外的软件），并且支持有限的命令。您也不能使用“cp”命令将文件放入 hdfs。你应该使用

**hadoop fs -put** local_file_or_directory

要将文件从 hdfs 复制到本地文件系统，您应该使用：

**hadoop fs - 获取** *文件名*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:55:21.283

HDFS 是操作系统文件系统之上的一个文件系统，每个文件系统都在自己的命名空间中运行。因此，HDFS 命名空间在 OS 命名空间和 . 使用 hadoop fs[命令](http://hadoop.apache.org/docs/r1.1.2/file_system_shell.html)与 HDFS 命名空间进行交互。

元数据（文件夹、每个文件夹中的文件、文件夹到块的映射）存储在 NameNode 的 fsImage 中。[离线图像查看器](http://archive.cloudera.com/cdh/3/hadoop/hdfs_imageviewer.html)可用于查看 NameNode 上 fsImage 文件的内容。

# java - 以编程方式调用 PHP 页面并需要客户端 Javascript 来执行

> ID：15983036
> 
> 赞同：0
> 
> 时间：2013-04-13T00:57:11.107
> 
> 标签：java, php, javascript, ajax, obsolete

我有一个 PHP 页面，它通过 GET 获取一个变量，然后根据该变量从数据库中提取一些信息。一旦完成服务器端的工作，就会有一些 javascript 运行并获取提供的数据，并使用 3rd 方 API 创建一个 .png 图像，然后使用对另一个 PHP 页面的 AJAX POST 调用将该图像保存到我的服务器。

这一切都很好，但我现在想做的是自动执行对该 PHP 页面的一些调用。也就是说，假设我有 100 个这样的变量要通过，我想，最好是在 Java 中使用 for 循环，依次调用带有每个变量的 PHP 页面。

问题是客户端的javascript。它不会`URLConnection`在 Java 中以简单的方式执行。似乎我需要某种浏览器复制器或某种方式让 java 像在浏览器中调用 PHP 一样？

或者，我可以用第三个 PHP 页面代替 Java 作为控制器，但我面临着让 javascript 执行的同样问题。

我错过了一些简单的事情吗？这个设置是不可能的吗？如果可能的话，我真的更喜欢用 Java 将它折叠到我已经运行的其他代码中。

* * *

让我尝试添加更多细节，而不会过多地陷入困境。有一个 PHP 文件`getData.php`通过 GET 获取 ID 号。所以我称之为`./getData.php?id=someId`

该 PHP 文件获取 ID，转到我的数据库并检索一些数据并将其粘贴到 HTML 源中。然后，一旦页面完成，我在其中有一些 javascript`getData.php`来检索该数据，将其格式化为 DataTable 并将其传递给 Google Visualization API 以制作 SVG 图表。

然后我有更多运行的 JS 获取该 SVG 对象，将其转换为 Canvas 对象，从中获取 base64 图像数据，最后使用以下数组发布到 saveTo.php：

```
{'id' : id, 'data' : imgData} 
```

`saveTo.php`只需接收该 POST 数据，根据 id 在我的服务器上创建一个文件并将 imgData 粘贴到其中。最终结果是我可以将一个 ID 传递给`getData.php`并最终得到一个可视化图表的保存图像，我希望根据与该 ID 相关联的数据库中的数据制作该图表。

这一切都是手工工作的。但是我有大约 1,000 个这些 ID，我想拥有它，以便每天早上运行整个过程，以便我可以根据昨天的数据更新图像。

* * *

我应该提到我确实尝试使用 3rd 方工具包 HtmlUnit ( [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) ) 但只是不断收到这些错误：

`com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl notify WARNING: Obsolete content type encountered: 'text/javascript'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:30:03.557

更多的搜索并找到正确的关键字来尝试最终将我带到了 Selenium，这正是我所寻找的。

[http://docs.seleniumhq.org/projects/webdriver/](http://docs.seleniumhq.org/projects/webdriver/)

# java - opencv4android中的filter2d

> ID：15983041
> 
> 赞同：3
> 
> 时间：2013-04-13T00:57:46.690
> 
> 标签：java, android, opencv

我正在尝试使用 filter2d 在 opencv4android 中编写一个简单的代码。但是在目标垫中调用函数“filter2d”后，我得到零（它没有正确运行该函数）。

结果应该是：

```
 0.3750    0.5000    0.5000    0.5000    0.3750
       0         0         0         0         0
       0         0         0         0         0
       0         0         0         0         0
 -0.3750   -0.5000   -0.5000   -0.5000   -0.3750 
```

我尝试更改源和内核的深度/类型，但没有帮助。

这是我的代码：

```
 Mat sourceMat = new Mat(5, 5, CvType.CV_32F);
    Mat convMat = new Mat(3, 3, CvType.CV_32F);
    Mat destMat = Mat.zeros(5, 5, CvType.CV_32F);

    sourceMat.put(0,0,1);
    sourceMat.put(0,1,1);
    sourceMat.put(0,2,1);
    sourceMat.put(0,3,1);
    sourceMat.put(0,4,1);
    sourceMat.put(1,0,1);
    sourceMat.put(1,1,1);
    sourceMat.put(1,2,1);
    sourceMat.put(1,3,1);
    sourceMat.put(1,4,1);
    sourceMat.put(2,0,1);
    sourceMat.put(2,1,1);
    sourceMat.put(2,2,1);
    sourceMat.put(2,3,1);
    sourceMat.put(2,4,1);
    sourceMat.put(3,0,1);
    sourceMat.put(3,1,1);
    sourceMat.put(3,2,1);
    sourceMat.put(3,3,1);
    sourceMat.put(3,4,1);
    sourceMat.put(4,0,1);
    sourceMat.put(4,1,1);
    sourceMat.put(4,2,1);
    sourceMat.put(4,3,1);
    sourceMat.put(4,4,1);

    convMat.put(0,0, 0.125);
    convMat.put(0,1, 0.5);
    convMat.put(0,2, 0.125);
    convMat.put(1,0, 0);
    convMat.put(1,1, 0);
    convMat.put(1,2, 0);
    convMat.put(2,0, -0.125);
    convMat.put(2,1, -0.5);
    convMat.put(2,2, -0.125);

    Imgproc.filter2D(sourceMat, destMat, sourceMat.depth(), convMat); 
```

谁能告诉我这里有什么问题？有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:05:50.290

这里没有错。OpenCV 结果对于 filter2d 函数中使用的默认边界处理模式是正确的。

您需要设置最后一个`borderType`参数以`Imgproc.BORDER_CONSTANT`获得预期的结果。

# objective-c - Objective-C NSNumber numberWithLongLong 创建整数

> ID：15983048
> 
> 赞同：3
> 
> 时间：2013-04-13T00:59:20.930
> 
> 标签：objective-c, xcode, nsnumber, long-long

当我尝试使用大于 -2 且小于 13 的数字的 numberWithLongLong 创建 NSNumber 时，它会返回一个转换为 (int) 的数字。

如果我在跨过我的线路后查看 Xcode 调试器，我会看到这一点。

`NSNumber* numberA = [NSNumber numberWithLongLong:-2]; //Debugger shows as (long)-2
NSNumber* numberB = [NSNumber numberWithLongLong:-1]; //Debugger shows as (int)-1
NSNumber* numberC = [NSNumber numberWithLongLong:12]; //Debugger shows as (int)12
NSNumber* numberD = [NSNumber numberWithLongLong:13]; //Debugger shows as (long)13` 

为了把我的问题放在上下文中，我使用一个 long long 值作为一个纪元日期，我最终将使用 BSON 序列化并通过线路发送到 Web 服务。Web 服务要求日期为 java Long。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:41:57.757

您已经发现 NSNumber（实际上，它的 CFNumber 对应物）有一个用于 -1 到 12 之间的整数的缓存。看一下`CFNumberCreate`函数，[`CFNumber.c`](http://www.opensource.apple.com/source/CF/CF-744.12/CFNumber.c)看看它是如何工作的。

看起来您可以通过将自己的分配器传递给[`CFNumberCreate`](https://developer.apple.com/library/etc/redirect/xcode/ios/cc8a92/documentation/CoreFoundation/Reference/CFNumberRef/Reference/reference.html#//apple_ref/c/func/CFNumberCreate). 您需要查看[`CFAllocator`](https://developer.apple.com/library/etc/redirect/xcode/ios/cc8a92/documentation/CoreFoundation/Reference/CFAllocatorRef/Reference/reference.html#//apple_ref/c/func/CFAllocatorCreate)文档。

但请注意，`CFNumberCreate`手册是这样说的：

> 创建新对象`theType`时，不一定要保留该参数。`CFNumber`

因此，即使您绕过缓存，您也可能无法取回`objCType`is `q`（这意味着`long long`）的对象。看起来当前的实现将返回`q`，但在未来的版本中可能会改变。

`NSNumber`如果您需要保证`objCType`返回，您可以编写自己的子类`q`。阅读[*NSNumber 类参考*](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/doc/uid/20000178-DontLinkElementID_1)[中的“子类化注释”](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSNumber_Class/Reference/Reference.html#//apple_ref/doc/uid/20000178-DontLinkElementID_1)*。*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T03:06:02.317

您可以毫无顾虑地使用您的网络服务。

`NSNumber`将数值（原始类型）包装为对象。如何`NSNumber`存储该值并不是您真正关心的问题（但有一种方法可以找到它），它是一种*不透明*的类型。然而`NSNumber`，它确实维护了用于创建它的类型的内部记录，因此它的`compare:`方法可以遵循 C 规则来精确地比较不同类型的值。

对于*整数类型*，在数学意义上，您返回的*整数值*将与您创建的整数值完全相同`NSNumber`。`NSNumber`您可以使用 a创建一个`short`并将其值读回为 a `long long`，即使表示不同，数学值也将相同。

因此，您可以将积分日期值存储为 an `NSNumber`，当您将其读取为 a 时，`long long`您将获得正确的值。无需担心如何`NSNumber`在内部表示它，实际上这可能会在未来发生变化。

*（至少有一种实现`NSNumber`可以将值存储为 128 位整数，这有助于确保有符号和无符号整数的正确语义。我还强调了整数类型，就像实数的变幻莫测一样，谈论数学精确性有点没有实际意义。）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T01:17:08.423

等待。我想我知道你在问什么。试试这种方式：

```
NSNumber* numberA = [NSNumber numberWithLongLong:-2LL];
NSNumber* numberB = [NSNumber numberWithLongLong:-1LL];
NSNumber* numberC = [NSNumber numberWithLongLong:12LL];
NSNumber* numberD = [NSNumber numberWithLongLong:13LL]; 
```

顺便说一句：常量的类型是什么无关紧要，它会`long long`在传递给时被强制转换为`[NSNumber numberWithLongLong:]`

* * *

**更新**

根据@robmayoff 的回答，我认为 NSNumber 对您来说并不可靠。你是如何包装你的 BSON 的？有没有办法使用 NSValue 而不是 NSNumber？*

# nginx - 重启 nginx: nginxnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)

> ID：15983050
> 
> 赞同：5
> 
> 时间：2013-04-13T00:59:41.040
> 
> 标签：nginx, bind, pid

当我尝试使用 sudo /etc/init.d/nginx restart 重新启动 nginx 时，我收到了来自主题的消息。

我发现原因很可能是脚本不知道如何停止守护进程，因为启动时未创建 pid 文件（/var/run/nginx.pid）。

我在两台不同的服务器上安装了两个...一个是从源代码编译的，另一个是带有 phusion 乘客的。

我试过这个命令：

```
start-stop-daemon --start --quiet --pidfile /var/run/nginx.pid --exec /usr/sbin/nginx -- -c /etc/nginx/nginx.conf 
```

在两台机器上，在一台机器上创建 pid 文件，而在另一台机器上则没有 - 在那台机器上，路径有点不同（但我认为这不相关）：

```
start-stop-daemon --start --quiet --pidfile /var/run/nginx.pid --exec /opt/nginx/sbin/nginx -- -c /opt/nginx/conf/nginx.conf 
```

该过程开始并且没有写入pid......

我在Debian...

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T01:08:31.713

解决方法是在 nginx.conf 中取消注释这一行：

```
pid        /var/run/nginx.pid; 
```

看起来不同的安装方式不同，但正确的做法是取消注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-13T23:15:08.033

我可以通过运行以下 fuser 命令来解决此问题

$ sudo fuser -k 80/tcp

这会杀死正在使用端口 80 的任何进程。希望没有搞砸其他任何事情。

这归功于： [https ://goo.gl/6oc0xD](https://goo.gl/6oc0xD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T06:20:04.770

```
$ sudo nginx -t 
```

要查看所有进程，有时您没有完全权限

# java - 从用户输入中读取数学表达式

> ID：15983053
> 
> 赞同：3
> 
> 时间：2013-04-13T00:59:57.483
> 
> 标签：java, input

我需要能够读取用户输入并将其分开以供以后使用。用户可以输入整数或小数和一个运算，我不知道如何读入。

用户输入的一个示例是`4/8 – 3/12`or`3 + 2/3`或`12/16 * 4`or `-2/3 / 64/96`。

现在我正在使用这样的东西：

```
public class FractionApp 
{
public static void main(String[] args){
    Scanner s = new Scanner(System.in);
    int[] fraction = new int[5];
    String input;
    String operation;
    System.out.println("Enter the expression: ");
    input = s.next();
    StringTokenizer st = new StringTokenizer (input, "/" + " ");
    fraction[0] = Integer.parseInt(st.nextToken());
    fraction[1] = Integer.parseInt(st.nextToken());
    operation = st.nextToken();
    fraction[2] = Integer.parseInt(st.nextToken());
    fraction[3] = Integer.parseInt(st.nextToken());

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:17:36.803

实现[正则表达式](https://en.wikipedia.org/wiki/Regular_expression)的威力。

您应该使用`Scanner.nextLine()`来获取输入到控制台的完整行。在`String`您从`Scanner`.

```
public class Test
{
    public static void main(String... args)
    {
        Scanner s = new Scanner(System.in);
        System.out.println("Enter the expression: ");
        String input = s.nextLine();
        String regex = "(?<=[-+*/()])|(?=[-+*/()])";
        System.out.println(Arrays.toString(input.split(regex)));
        s.close();
    }
} 
```

* * *

**试运行**：

输入：`1.5+4.2*(5+2)/10-4`

输出：`[1.5, +, 4.2, *, (, 5, +, 2, ), /, 10, -, 4]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:16:49.663

应该按照[Tim Bender](https://stackoverflow.com/users/122207/tim-bender)的建议阅读用户输入`nextLine();`。然后不知不觉地，一旦您检索到，`input`您需要在进行任何计算之前对数据进行*预处理，以便分离收集的信息。*`Split`

```
 /**
     * Start the program
     * @param args
     */
    public static void main(String[] args) {
        String inputMessage = null;
        System.out.println("Enter the expression: ");
        //start a scanner
        Scanner in = new Scanner(System.in);
        //store the expression scanned
        inputMessage = in.nextLine();
        //close the scanner
        in.close();
        //if the input has been scanned
        if (inputMessage != null) {

            //do something

        } //close if
    } // close main 
```

我认为找出每个内容的最简单方法是`input`将其与`regular expression`. 否则，您也可以尝试使用一大组`if conditions`或使用 a `grammar parser`（但这很乏味）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:12:40.477

试试`Scanner.nextLine`这个会读到用户按下“输入”时的点。虽然它让您通过自己的解析方法拆分返回的字符串。有点打败了使用`Scanner`.

# android - 旋转时从错误的资源文件夹中提取的可绘制对象

> ID：15983058
> 
> 赞同：4
> 
> 时间：2013-04-13T01:01:20.770
> 
> 标签：android, rotation, android-activity, android-resources, android-drawable

把我的头发拉在这里。因此，我正在使用具有多种类型的可绘制对象的应用程序，并且它们的结构如下：

```
res/
    //Portrait resources
    drawable-mdpi/
    drawable-hdpi/
    drawable-xhdpi/

    //Landscape resources
    drawable-land-mdpi/
    drawable-land-hdpi/
    drawable-land-xhdpi/ 
```

**编辑**我什至尝试将特定于肖像的可绘制对象放在`drawable-port-mdpi`等下，结果相同。

而且我有一个自定义`View`，用于在运行时拉入可绘制对象。这是一个精简的示例，但这是我遇到问题的地方：

```
public class CustomView extends FrameLayout {
    private ImageView mBackgroundView;

    public CustomView (Context context) {
        super(context);
        initialize();
    }

    public CustomView (Context context, AttributeSet attrs) {
        super(context, attrs);
        initialize();
    }

    public CustomView (Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initialize();
    }

    private void initialize () {
        mBackgroundView = new ImageView(getContext());
        mBackgroundView.setImageResource(R.drawable.my_resource);
        addView(mBackgroundView, wrapContent());
    }

    private LayoutParams wrapContent () {
        return new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    }
} 
```

我希望当我旋转到横向时（让我先澄清一下，我**没有**`configChanges`在清单中处理这个`Activity`）并且`View`重新创建了这个，`mBackgroundView`应该得到可绘制的`drawable-land-xhdpi`. 相反，当我向后旋转时，我应该将 drawable 放入`drawable-xhdpi`.

现在这就是奇怪的地方。我可以确认所有可绘制对象都在那里并被检测到，就**好像我在横向启动应用程序一样，我得到了正确的横向可绘制对象**。然而，在旋转时，风景画仍然存在，我没有得到肖像画。相反，**如果我以纵向启动，我会被纵向绘制。**

当我以编程方式获取资源时，是否应该处理一些特殊情况以“重置”资源或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:05:41.580

所以我已经弄清楚问题出在哪里，老实说，我不确定这是我的误解还是Android中的错误。我不认为将其添加为问题的一部分（回头看，我应该有），但我的可绘制对象是一个可绘制的图层列表，其中两个图像相互堆叠（一个阴影，一个阴影上方的图像）：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android>
    <item>
        <bitmap android:src="@drawable/shadow"/>
    </item>

    <item>
        <bitmap android:src="@drawable/image" android:gravity="top|center_horizontal"/>
    </item>
</layer-list> 
```

似乎这只被解析*一次*（我假设它被重用了效率）但它永远不会返回并使用新配置的可绘制对象重建层列表。

我改为使用两个对齐的 ImageViews 而不是一个可绘制的图层列表，一切都很好。

# gnuplot - 在 gnuplot 中使用单独的 y 轴时，如何将零固定在同一位置？

> ID：15983063
> 
> 赞同：2
> 
> 时间：2013-04-13T01:01:48.797
> 
> 标签：gnuplot

我有一个数据文件，第 1 列作为自变量，第 2 列和第 3 列作为因变量。我想使用这样的东西在不同的 y 轴上绘制变量 2 和 3：

```
plot "file.out" u 1:2 axes x1y1, "file.out" u 1:3 axes x1y2 
```

当我这样做时，两个轴的“0”相互偏移。如何在不明确设置`yrange`两个量对称的情况下将一个 y 轴的零固定到另一个 y 轴的零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-18T16:59:14.987

可以从版本 5 中使用`set link`. 但是它不会自动调整比率，因此您只能自己计算它们

```
stat "file.out" u 1:2
MAX1=abs(STATS_max_y)
MIN1=-abs(STATS_min_y)
stat "file.out" u 1:3
MAX2=abs(STATS_max_y)
MIN2=-abs(STATS_min_y)
min(a,b)=(a<b)?a:b
set link y2 via min(MAX1/MAX2,MIN1/MIN2)*y inverse y/min(MAX1/MAX2,MIN1/MIN2)
plot "file.out" u 1:2 axes x1y1, "file.out" u 1:3 axes x1y2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:50:02.693

不幸的是，您不能（至少一般情况下不能）。如果 yrange 在 0 上下具有相同的百分比，它应该可以工作，例如：

```
set yrange [-5:10]
set y2range [-10:20] 
```

但是，如果您不想这样做，那么我不知道是否有更好的解决方案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-18T21:02:35.380

这是一个无需链接轴即可工作的解决方案，因此它甚至适用于 gnuplot 4.4（2010 年的版本）。虽然，它不需要`stats`但作为一个缺点，它需要重新绘制数据以获得 y2 轴的正确缩放。

**代码：**

```
### aligning zero on y1- and y2-axes
reset

set ytics nomirror
set y2tics nomirror
set xzeroaxis
set key top left

plot \
    sin(x) axes x1y1 w l, \
    cos(x)-0.5 axes x1y2 w l

R0 = -GPVAL_Y_MIN/(GPVAL_Y_MAX-GPVAL_Y_MIN)
y2_min_new  = abs(GPVAL_Y2_MIN)>abs(GPVAL_Y2_MAX) ? GPVAL_Y2_MIN : R0*GPVAL_Y2_MAX/(R0-1)
y2_max_new = abs(GPVAL_Y2_MAX)>abs(GPVAL_Y2_MIN) ? GPVAL_Y2_MAX : (R0-1)*GPVAL_Y2_MIN/R0

set y2range[y2_min_new:y2_max_new]
replot
### end of code 
```

**结果：**

[![在此处输入图像描述](https://i.stack.imgur.com/Vn6Nc.png)](https://i.stack.imgur.com/Vn6Nc.png)

# iphone - 在 xCode 中将文件添加到子项目

> ID：15983065
> 
> 赞同：0
> 
> 时间：2013-04-13T01:02:05.440
> 
> 标签：iphone, xcode, uiview, uiviewcontroller

我在 xCode 的一个项目中有一个项目。我正在创建一个新的 MyView.h、MyView.m 和 MyView.xib。当我将 MyView.m 和 MyView.xib 放在外部项目中时，我可以从内部项目中加载视图，如下所示：

```
 MyView *myView = [[MyView alloc] initWithFrame:CGRectMake(0, 0, 320, 60)];
    [[[UIApplication sharedApplication] keyWindow] addSubview:myView]; 
```

但是，当我在内部项目中移动 MyView.m 和 MyView.xib 文件时，出现链接错误：

```
Undefined symbols for architecture armv7:  "_OBJC_CLASS_$_MyView", referenced from: ... 
```

我希望能够将 MyView.m 放在子项目中，因为它的 ViewController 在子项目中，当它在子项目之外时，当我尝试将 IBActions 从 MyView 连接到 MyView 的 ViewController 时，我会遇到相同的链接错误。

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:10:37.113

超级项目需要在“Link Binary with Libraries”中的“Build Phases”下列出子项目。此外，确保 MyView.m 文件是子项目的构建集的一部分。

# android - Android：ListView选择xml定义后保持蓝色背景

> ID：15983067
> 
> 赞同：0
> 
> 时间：2013-04-13T01:02:27.583
> 
> 标签：android, listview, styles

我对这个问题的答案感到困惑。

我在 values-14/styles.xml 中有以下内容

```
<resources>

<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" />

 <style name="ListTheme" parent="AppTheme">
    <item name="android:activatedBackgroundIndicator">@drawable/br_listitem</item>
</style>

</resources> 
```

然后我在我的可绘制目录 br_listitem.xml 中定义了

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:drawable="@color/SlateBlue" android:state_activated="true"/>

</selector> 
```

最后在我的 listitem.xml 文件中

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="wrap_content"   
   android:layout_width="600dp"
   android:gravity="left|center"   
   android:paddingBottom="10dp"
   android:paddingTop="10dp"
   android:paddingLeft="5dp"
   style="@style/ListTheme"
   android:background="?android:attr/activatedBackgroundIndicator"> 
```

按下时我得到浅橙色，然后是浅绿色。激活的背景有效，但它没有使用我的颜色......

谢谢 ！~ 杰

根据评论，我做了以下更改。我将样式从 LinearLayout 中拉出，并将其放在我的列表视图中，如下所示：

```
 <ListView 
    style="@style/ListTheme"
    android:id="@+id/XYZList" 
    android:layout_height="600dp"
    android:layout_width="600dp"
    android:layout_column="0"
    android:layout_columnSpan="2"
    android:layout_gravity="center|top"
    android:layout_row="2"
    android:layout_rowSpan="10"     
    android:focusable="true"
    android:choiceMode="multipleChoice"
    android:background="#80D0D0D0"
    >
</ListView> 
```

# r - 我的电脑上运行的是哪个版本的 R？

> ID：15983069
> 
> 赞同：49
> 
> 时间：2013-04-13T01:02:44.747
> 
> 标签：r, version, built-in

我的电脑上有两个R目录：
一个是`/home/R-2.15.2`，一个是`/home/R-2.15.1`，
当我输入时`R`，我可以启动R，现在我想知道运行的是哪个R：2.15.1还是2.15.2？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-13T01:06:45.930

2021 年 5 月 20 日更新：

应该是`R.version`现在

* * *

~~除了@Piotr Jaszkowski，`R.Version()`也应该做这项工作~~

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-13T01:06:13.867

在第一行运行`R --version`有关版本的信息。

编辑：如果你问这个问题，那么我敢打赌 R 不是从这些目录中运行的。检查 $PATH 环境变量以获取查找二进制文件的位置和顺序的信息。

编辑2：使用`type`shell命令查找给定命令的二进制存储位置，`-a`对于所有路径，`-f`对于散列的路径（基本上：最近使用）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-04-13T01:12:49.940

内置`version`将显示这一点。

```
> version
               _                            
platform       x86_64-apple-darwin9.8.0     
...
version.string R version 2.15.2 (2012-10-26) 
```

`version`是一个有 14 个项目的命名列表，你真的只想看看：

```
> version[['version.string']]
               _                            
[1] "R version 2.15.2 (2012-10-26)" 
```

事实上**，如果你只想要版本字符串**：

```
> strsplit(version[['version.string']], ' ')[[1]][3]
[1] "2.15.2" 
```

键入`builtins()`以查看所有内置函数。

POSTSCRIPT：结果`version`和 `R.version`（由[nathaninmac](https://stackoverflow.com/users/549040/nathaninmac)提到）是同一事物的别名。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-13T06:23:59.583

尝试`sessionInfo()`

在 R 版本旁边，它还返回已加载包的版本等。

[http://stat.ethz.ch/R-manual/R-patched/library/utils/html/sessionInfo.html](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/sessionInfo.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-25T06:52:02.430

这也可以解决问题

```
paste0(R.Version()[c("major","minor")], collapse = ".") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T09:04:00.933

您可以键入使用 R 二进制文件的“哪个 R”

或键入 R 并查看类似下面的内容，这应该会告诉您哪个版本。

" R 版本 2.15.1 (2012-06-22) -- "Roasted Marshmallows" 版权所有 (C) 2012 The R Foundation for Statistical Computing .. .. "

# delphi - cxGrid 隐藏列

> ID：15983071
> 
> 赞同：0
> 
> 时间：2013-04-13T01:02:55.113
> 
> 标签：delphi, devexpress, delphi-xe2, delphi-7

如何在代码中隐藏/显示 cxGrid 列？我试过：`cxGrid2dbtableview1.Columns[mycolumnname].Visible :=False;` 但它似乎并不适用。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:35:18.570

如果要通过字段名识别列

```
var
 C:TcxGridDBColumn;
begin
 C := View.GetColumnByFieldName('cx1');
 if Assigned(C) then C.Visible := not C.Visible;    
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:48:13.323

Columns 集合按整数索引，而不是按列名。相反，尝试`cxGrid2dbtableview1.Columns[mycolumnname.index].Visible :=False;`

另一种方式是直接设置列对象的Visible属性，`cxGrid1Column1.Visible := False;`

对于在运行时创建的列，请使用 Ken 的答案。

# c# - 如何将请求路由到页面控制器以获取 ASP.NET MVC 4 中不存在的路由

> ID：15983081
> 
> 赞同：1
> 
> 时间：2013-04-13T01:05:15.413
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

对于未映射到控制器或操作的路由，如何将请求路由到默认 PageController？但是对于匹配控制器或操作的路由，它们的行为是否正常，使用 ASP.NET MVC？

基本上我有一个我开发的 CMS 后端，我需要能够检查路由，查看它是否与存储在数据库中的页面的路由匹配，如果是，则将请求转发到默认的 PageController，它处理从数据库加载页面内容。还有 CORE 页面，它们确实定义了自己的控制器和操作，如果您输入的路由与数据库中的页面路由不匹配，我需要它恢复到 ASP.NET MVC 的默认行为并查看对于 {controller}/{action}。

我已经在网上搜索和搜索，没有太多运气找到我能做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:17:10.170

设置你的路由，让现有控制器和动作的路由优先，然后有一个映射到你的 PageController 的包罗万象：

```
 // More specific routes go here

    routes.MapRoute(
        null,                                              
        "{controller}/{action}/{id}",                           // URL with parameters
        new { action = "Index", id = UrlParameter.Optional },   // Don't put a default for controller here
        // You need to constrain this rule to all of your controllers, so replace "ControllerA" with an actual controller name, etc
        new { controller = "ControllerA|ControllerB|ControllerC" } 
    );

    routes.MapRoute(
        null,
        "{*path}",
        new { controller = "Page", action = "Index" }
    ); 
```

任何与第一条规则不匹配的内容以及您在它之前放置的任何规则都将回退到您的页面控制器，路径在`path`您的索引操作方法的参数中。

# symfony - 显示特定路线而不是错误页面（404） - Symfony2

> ID：15983082
> 
> 赞同：11
> 
> 时间：2013-04-13T01:05:22.330
> 
> 标签：symfony

我只想显示 /sitemap 页面，而不是错误页面 / 404。当然我不想要重定向，我仍然想要设置 404 HTTP 响应标头。

这可能吗？我只能看到如何在 Twig 中设置模板。

我绝对不想要重定向。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-13T15:46:25.737

As shown in [the Symfony Cookbook](http://symfony.com/doc/current/cookbook/controller/error_pages.html) you can override error pages in two ways:

*   Overriding the templates
*   Using a custom exception controller

If you only want to show the `/sitemap` route on a 404 (`HttpNotFoundException`) exception you could override the Twig exception template by creating a new template in `app/Resources/TwigBundle/views/Exception/error404.html.twig`.

Another way that is not shown in the cookbook is using an event listener. When the kernel encounters an exception, a [`kernel.exception`](http://symfony.com/doc/2.0/book/internals.html#kernel-exception-event) event is dispatched. By default, this exception is caught by the exception listening provided by Twig. You can [create your own event listener](http://symfony.com/doc/master/cookbook/service_container/event_listener.html) which listens for the `kernel.exception` event and renders a page:

```
<?php
use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Component\HttpFoundation\Response;

public function onKernelException(GetResponseForExceptionEvent $event)
{
    if ($event->getException() instanceof NotFoundHttpException) {
        $response = $this->templating->renderResponse(/* sitemap */);

        $event->setResponse($response)
    }
} 
```

(I haven't tested this code, so you should try it yourself! And you have to inject the templating service into the event listener yourself, of course).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T08:40:29.170

我有一个由几个 Symfony3 包组成的简单 Web 应用程序，所有这些包都扩展了 BaseController。我也有一个 AdminBundle。为了显示每个不存在的 url 的给定页面，我破解了（并简化了）原始的 ExceptionController.php（来自 TwigBundle）：

```
<?php

namespace MyApp\AdminBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use MyApp\Controller\BaseController;

use Symfony\Component\Debug\Exception\FlattenException;
use Symfony\Component\HttpKernel\Log\DebugLoggerInterface;

class ExceptionController extends BaseController
{
    /**
     * Converts an Exception to a Response.
     *
     * @param Request              $request   The request
     * @param FlattenException     $exception A FlattenException instance
     * @param DebugLoggerInterface $logger    A DebugLoggerInterface instance
     *
     * @return Response
     * @throws \InvalidArgumentException When the exception template does not exist
     */
    public function showAction(Request $request, FlattenException $exception, DebugLoggerInterface $logger = null)
    {
        $currentContent = $this->getAndCleanOutputBuffering($request->headers->get('X-Php-Ob-Level', -1));
        $code = $exception->getStatusCode();
        return $this->render('MyappAdminBundle:Admin:error.html.twig',
            array(
                'status_code' => $code,
                'status_text' => isset(Response::$statusTexts[$code]) ? Response::$statusTexts[$code] : '',
                'exception' => $exception,
                'logger' => $logger,
                'currentContent' => $currentContent,
            )
        );
    }

    /**
     * @param int $startObLevel
     *
     * @return string
     */
    protected function getAndCleanOutputBuffering($startObLevel)
    {
        if (ob_get_level() <= $startObLevel) {
            return '';
        }

        Response::closeOutputBuffers($startObLevel + 1, true);

        return ob_get_clean();
    }
} 
```

我根据自己的喜好定义我的错误模板。

我需要在 config.yml 中添加以下行

```
twig:
    exception_controller: MyappAdminBundle:Exception:show 
```

ps 我确信我的代码可以改进，但它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-06T23:31:37.207

最简单的方法是创建这个文件：

*   Symfony 3：`/app/Resources/TwigBundle/views/Exception/error404.html.twig`
*   Symfony 4：`/templates/bundles/TwigBundle/Exception/error404.html.twig`

...并将这一行复制到其中：

```
{{ render(controller('App\\Controller\\HomepageController::index')) }} 
```

而已。这将显示带有 404 状态代码的主页。它只在`prod`环境中工作（清除缓存！），因为在`dev`和`test`Symfony 中总是显示它的异常页面。

参考：

*   [https://symfony.com/doc/current/controller/error_pages.html#overriding-the-default-error-templates](https://symfony.com/doc/current/controller/error_pages.html#overriding-the-default-error-templates)
*   [https://symfony.com/doc/current/template/embedding_controllers.html](https://symfony.com/doc/current/templating/embedding_controllers.html)
*   [https://symfony.com/doc/current/controller/error_pages.html#testing-error-pages-during-development](https://symfony.com/doc/current/controller/error_pages.html#testing-error-pages-during-development)

# algorithm - 生成具有最大度数的所有节点的路径的无向图的算法？

> ID：15983084
> 
> 赞同：4
> 
> 时间：2013-04-13T01:06:11.027
> 
> 标签：algorithm, graph, graph-algorithm

我正在尝试生成一个无向图，其中每个节点都有与之关联的最大度数。也就是说，如果一个节点的最大度数为 2，则它最多可以连接两个节点（允许连接的节点，但不允许为 0）。我的问题是我正在尝试生成一个可以从一个节点到另一个节点的图。目前，我可以让节点“随机”相互连接，但问题是它可以创建分割图，即如果你有 10 个节点，那么有时会不经意地形成每个 5 个节点的两个图。如果有人知道有效的解决方案，我很想听听！

编辑：假设我有一个包含十个节点的图，并且我指定最大度数为 2。在这种情况下，这是可取的：

![理想的图表](https://i.stack.imgur.com/guLtL.png)

而这是我试图避免的：

![不良图](https://i.stack.imgur.com/IKEOA.png)

两个图的每个节点的最大度数均为 2，但在第二张图像中，不可能选择任意节点并能够到达任何其他任意节点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:27:55.217

这个问题在图论中是一个非常有名的问题，可以在多项式时间内求解，我忘记了它的名字（可能是“根据其度数序列找到一个图”）。[无论如何，Király 的解决方案是一个很好的方法，这里](http://gilleain.blogspot.ca/2012/07/kiralys-method-for-generating-all.html)比我解释得更好。该算法解决了满足给定度数序列的精确图，但它应该很容易修改为您更松散的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:27:58.883

显而易见的解决方案是将其构建为 N 路树——如果最大度数为 2，则最终得到一棵二叉树。

为了使其无向，您不仅有指向“子”节点的指针，还有指向“父”节点的反向指针。至少据推测，那个不计入节点的度数（如果是这样，你的度数为二基本上最终成为一个双向链接的线性列表而不是一棵树）。

编辑：澄清后，似乎后者确实如此。尽管它们的*绘制*方式不同（链接指向不同的方向），但显示所需结果的第一张图片在拓扑上只是一个线性链表。如上所述，由于您想要一个无向图，因此它最终成为一个双向链表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:50:17.497

听起来您已经知道图表应该是什么样子了，所以我相信您是否可以使用深度优先搜索方法。尽管可以使用呼吸优先搜索来避免递归。

例如，如果您有节点 1-5，并且 k=2，那么您可以通过从节点 1 开始构建图，然后简单地随机选择一个未访问的节点。像这样：

```
1 [Start at 1]
1-2 [expand 2, add edge(1,2) to graph]
1-2-3 [expand 3, add edge(2,3) to graph]
1-2-3-4 [expand 4, add edge(3,4) to graph]
1-2-3-4-5 [expand 5, add edge(4,5) to graph]
1-2-3-4-5-1 [expand 1, add edge(5,1) to graph] (this step may or may not be done) 
```

如果一条边从未被使用过两次，那么 p 条路径将导致总体度数为 p*2，起始节点和结束节点的度数取决于路径是否真的是一条路径。为了避免重复工作，可能更容易将顶点标记为整数 1 到 N，然后创建边，使得每个顶点 v 连接到编号为 (v+j) mod (N+1) 的顶点，其中 j和 (N+1) 互[质](http://en.wikipedia.org/wiki/Relatively_prime)< N-1。最后一点让事情变得有点问题，因为如果 N 不是素数，则从 1 到 N 的共素数的数量可能会受到限制。这意味着对于某些值不存在解决方案，至少以新的哈密顿路径/旅行的形式存在。但是，如果您忽略互质方面并简单地将 j 设为从 1 到 p 的整数，然后遍历每个顶点并创建边（而不是使用路径方法），您可以使所有顶点的度数为 k，其中k 是一个偶数 >= 2。这在 O(N*k) 中是可以实现的，尽管如果使用互质法，它可能会被推回 O(N^2)。

因此，如果从 1 开始，j=2，k=4 的路径将如下所示：

```
1 [Start at 1]
1-3 [expand 3, add edge(1,3) to graph]
1-3-5 [expand 5, add edge(3,5) to graph]
1-3-5-2 [expand 2, add edge(5,2) to graph]
1-3-5-2-4 [expand 4, add edge(2,4) to graph]
1-3-5-2-4-1 [expand 1, add edge(4,1) to graph] (this step may or may not be done) 
```

由于 |V| = 5 和 k = 4，得到的边形成一个完整的图，这是预期的。由于 2 和 5 是互质数，因此它也可以解决。

获得奇数学位有点困难。首先获得度数 k-1，然后以这样的方式添加边缘，从而获得整体奇数度。似乎很容易接近（有一个或两个例外）为奇数度的所有边，但对于奇数个顶点似乎不可能或至少非常困难，并且需要仔细选择具有偶数个顶点的边. 其中的部分，不容易放入算法中。但是，它可以通过简单地选择两个未使用的顶点并在它们之间创建一条边来近似，这样顶点不会被使用两次，并且边不会被使用两次。

# javascript - 使用 javascript 更改 css 定位

> ID：15983090
> 
> 赞同：0
> 
> 时间：2013-04-13T01:06:54.107
> 
> 标签：javascript, css, css-position

这段代码按我的预期完美运行，但问题是当我刷新页面时 t_con 保持绝对值，这应该是固定的，当我将窗口大小调整为小于 980 像素时，它就像我需要的那样是绝对值，如果我再次调整大小超过 980 像素它修复了。

我需要它从一开始就保持固定。我不知道为什么一开始它是绝对的。

代码

```
<div id="t_con">
<div id="t">

</div>
</div> 
```

CSS 代码

```
#t_con{
width:100%;
position:absolute;
top:0;
}
#t{
margin:0px auto 0 auto;
background-color:#976398;
width:980px;
height:30px;
} 
```

Javascript代码

```
window.onresize = function(){
var pos = window.outerWidth < 980 ? 'absolute' : 'fixed';
document.getElementById('t_con').style.position = pos;
}window.onresize=function(){
var header=document.getElementById('t');
var window_width = document.body.offsetWidth;
if(window_width < 980){
header.style.position="absolute";
}else{
header.style.position="fixed";
}
} 
```

谁能告诉我在这里做错了什么。我不想为此使用 jQuery。所以请不要建议它。我不喜欢 jQuery 的原因是它已经占用了 90kb 加上我们试图执行的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T01:12:19.497

```
window.onresize = function(){
    var pos = window.outerWidth < 980 ? 'absolute' : 'fixed';
    document.getElementById('t_con').style.position = pos;
} 
```

[**小提琴**](http://jsfiddle.net/wULZk/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:12:33.910

```
window.onresize=function(){
var header=document.getElementByID('t_con');
var window_width = document.body.offsetWidth;
if(window_width < 980){
    header.style.position="absolute";
}else{
    header.style.position="fixed";
}
} 
```

# django - Django验证错误没有提供异常

> ID：15983091
> 
> 赞同：0
> 
> 时间：2013-04-13T01:07:00.030
> 
> 标签：django, validation, exception

我正在通过 jquery 向我的后端发帖。我先看看是否已经做出了承诺。如果没有，我创建一个。

```
@csrf_exempt
def pledgeReceive(request):
fname = request.POST.get('fname', '')
lname = request.POST.get('lname', '')
participantName = request.POST.get('participantName', '')
participantID = request.POST.get('participantID', '')
ppl = request.POST.get('ppl', '')
maxi = request.POST.get('maxi', '')

sponsor = fname + ' ' + lname
participant_obj = Participant.objects.get(pk = participantID)

try:
    pledge = Pledge.objects.get(sponsor = sponsor, participant = participant_obj, pledge_amount = ppl, max_pledge_amount = maxi, datetime = datetime.now())
except Pledge.DoesNotExist:
    pledge = Pledge(sponsor = sponsor, participant = participant_obj, pledge_amount = ppl, max_pledge_amount = maxi, datetime = datetime.now())
    pledge.save()

response = HttpResponse()
response.content = serialized_obj = serializers.serialize('json', [ pledge, ])
response['Content-Type'] = 'application/json'
return response 
```

我收到 500 内部服务器错误。使用以下回溯：

```
ValidationError at /pledgeReceive/
No exception supplied
    Traceback:
File "/home/vtrelayc/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/vtrelayc/lib/python2.6/site-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/home/vtrelayc/projects/relay/relayapp/views.py" in pledgeReceive
  461\.  pledge.save()
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/sql/compiler.py" in execute_sql
  911\.         for sql, params in self.as_sql():
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/sql/compiler.py" in as_sql
  872\.                 for obj in self.query.objs
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/fields/__init__.py" in get_db_prep_save
  873\.         return connection.ops.value_to_db_decimal(self.to_python(value),
File "/home/vtrelayc/lib/python2.6/site-packages/django/db/models/fields/__init__.py" in to_python
  850\.             raise exceptions.ValidationError(msg)

Exception Type: ValidationError at /pledgeReceive/ 
```

虽然我提供了一个例外`except Pledge.DoesNotExist:`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:23:18.010

为什么不直接使用`get_or_create`？这是您尝试做的事情的捷径。

```
pledge, created = Pledge.objects.get_or_create(sponsor = sponsor, participant = participant_obj, pledge_amount = ppl, max_pledge_amount = maxi, datetime = datetime.now()) 
```

现在您有了一个`pledge`对象和一个布尔值 ，`created`它可以让您知道该对象是创建还是获取。

除此之外，错误可能是由于您只是获取 GET 参数而没有将它们转换为`Pledge`对象期望的类型。即使您的大多数字段可能不期望字符串，它们也会作为字符串传递。也许使用表单（因为它内置验证/类型转换）或手动将您的 GET 参数转换为正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:19:13.910

`ValidationError``form.is_valid()`当数据未通过表单或模型字段验证但由于您未使用或任何验证您的输入值的验证器时，将引发异常，这将导致`No Exception Supplied`. 甚至您`Pledge.DoesNotExist`也无法捕捉到错误，因为它只检查查询的给定参数何时找不到对象。

根据您的代码，我发现无效值。

```
ppl = request.POST.get('ppl', '')
maxi = request.POST.get('maxi', '') 
```

如果我没记错的话，上面的代码会传递一个整数。但是您不知道您传递的是字符串而不是int。肯定是，

```
ppl = int(request.POST.get('ppl', 0))
maxi = int(request.POST.get('maxi', 0)) 
```

我不知道您的模型代码模式，如果您传递外键或日期的值，您还必须检查，因为它们非常敏感。您不必担心 CharField，因为除非需要，他们可以处理它。但我建议你使用`form`，如果你不能处理这个错误。

# sql - 如何正确使用别名

> ID：15983098
> 
> 赞同：0
> 
> 时间：2013-04-13T01:09:12.887
> 
> 标签：sql, sql-server-2008

我正在尝试使用别名 OriginalCost 和 QuantityDiscount 进行一些计算。我了解您只能在 GROUP BY、HAVING 或 ORDER BY 中使用别名，但我不确定如何正确使用。我收到此代码的错误是

> 第 9 行无效的列名“QuantityDiscount”。

```
SELECT  Orders.Orderid, Inventory.partid, Description, Qty, (Inventory.price) AS UnitPrice, 
        (OrderItems.Qty * Inventory.price) AS OriginalCost, 
        CASE 
            WHEN OrderItems.Qty >= 5 THEN (OriginalCost) * .05)
            WHEN OrderItems.Qty >= 10 THEN (OriginalCost) * .10)
            ELSE 0
        END AS QuantityDiscount,
        SUM(OriginalCost  - QuantityDiscount) AS FinalCost
FROM Orders
JOIN OrderItems ON OrderItems.orderid = OrderItems.orderid
JOIN Inventory ON ORDERITEMS.partid = Inventory.partid
ORDER BY QTY DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:15:36.157

因此，您可以通过以下方式定义别名：

```
SELECT Alias = TableAlias.Field         --prefixed to a field
       ,TableAlias.Field as OtherAlias  --at the end of a field
FROM Table TableAlias                   --on a table
--then use by anything that is caculated after that part in the order of operations.
ORDER BY Alias; 
```

然后您可以在定义它们的区域之后使用它们。

SQL 操作顺序：

1.  FROM 子句
2.  WHERE 子句
3.  GROUP BY 子句
4.  HAVING 子句
5.  选择子句
6.  ORDER BY 子句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:18:13.917

您没有提供任何示例数据，因此未经测试：

```
SELECT 
  t.OrderID,
  t.PartID,
  t.Description,
  t.Qty,
  t.UnitPrice,
  t.OriginalCost,
  t.QuantityDiscount,
  SUM(t.OriginalCost - t.QuantityDiscount) AS FinalCost
FROM (
    SELECT  
      Orders.Orderid, 
      Inventory.partid, 
      Description, 
      Qty, 
      (Inventory.price) AS UnitPrice, 
      (OrderItems.Qty * Inventory.price) AS OriginalCost, 
      CASE 
        WHEN OrderItems.Qty >= 5 THEN (OrderItems.Qty * Inventory.Price) * .05)
        WHEN OrderItems.Qty >= 10 THEN (OrderItems.Qty * Inventory.Price) * .10)
        ELSE 0
      END AS QuantityDiscount
    FROM 
      Orders
    JOIN 
      OrderItems ON OrderItems.orderid = OrderItems.orderid
    JOIN 
      Inventory ON ORDERITEMS.partid = Inventory.partid
) AS t
ORDER BY QTY DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:11:56.613

您不能使用在同一个 select 语句中定义的别名。您将不得不使用子查询或表表达式。

像这样的东西（代码未经测试，只是为了给你一个想法）

```
SELECT * 
        ,SUM(t2.OriginalCost - t2.QuantityDiscount) AS FinalCost
FROM
  ( SELECT * 
           ,CASE WHEN t1.Qty >= 5 THEN (t1.OriginalCost * .05) WHEN t1.Qty >= 10 THEN (t1.OriginalCost * .10) ELSE 0 END AS QuantityDiscount
    FROM
          ( SELECT Orders.Orderid,
                   Inventory.partid,
                   Description,
                   Qty,
                   (Inventory.price) AS UnitPrice,
                   (OrderItems.Qty * Inventory.price) AS OriginalCost
           FROM Orders
           JOIN OrderItems ON OrderItems.orderid = OrderItems.orderid
           JOIN Inventory ON ORDERITEMS.partid = Inventory.partid 
           ) AS t1 

  ) AS t2
ORDER BY QTY DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T02:17:55.607

试试这个：

```
SELECT
  Orderid,
  partid,
  Description,
  Qty,
  UnitPrice,
  OriginalCost,
  QuantityDiscount,
  OriginalCost  - QuantityDiscount AS FinalCost
FROM (
  SELECT  
    Orders.Orderid, Inventory.partid, Description, Qty, 
    Inventory.price AS UnitPrice, 
    (OrderItems.Qty * Inventory.price) AS OriginalCost, 
    CASE 
       WHEN OrderItems.Qty >= 5 THEN (OriginalCost) * .05)
       WHEN OrderItems.Qty >= 10 THEN (OriginalCost) * .10)
       ELSE 0
    END AS QuantityDiscount
  FROM Orders
) T
JOIN OrderItems ON OrderItems.orderid = OrderItems.orderid
JOIN Inventory ON ORDERITEMS.partid = Inventory.partid
ORDER BY QTY DESC 
```

如果此时您仍需要 amy 聚合，请将另一个查询包装为子查询。

# php - 在 PHP 中处理内存密集型、长任务的最佳方法

> ID：15983106
> 
> 赞同：1
> 
> 时间：2013-04-13T01:11:00.217
> 
> 标签：php, memory-management, cron, daemon

我发送了一个 APNS 通知服务器，理论上它每天会向大约**50,000**到**100,000 个**用户发送处理后的通知（基于与 iOS 应用程序相关联的网络应用程序的用户数量）。

通知会在 2 点左右发出，但它必须单独发送给每个用户（使用 Urban Airship），并且由**cron 作业**上的**curl**触发。

 **它遍历每个用户，并且必须使用 HTML 刮板（确切地说是 simple_html_dom），*每个用户大约需要***5-10 秒** ，并且显然*非常占用内存*。一个简单的 GET 请求不可能是这样做的正确方法，事实上我肯定它会失败。在 cron 作业中处理这种长时间的、内存密集型任务的最佳方法是什么？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:26:31.893

如果您将重用相同的变量或设置变量您将不再使用 null 您将不会耗尽内存。只是不要一次加载所有数据并将其释放（设置为空）或在处理后替换为新数据。

并确保您无法提高您的任务 5-10 秒的速度听起来真的很长。****

# c# - 如何捕获麦克风缓冲区

> ID：15983112
> 
> 赞同：0
> 
> 时间：2013-04-13T01:11:33.653
> 
> 标签：c#, silverlight, windows-phone-7, audio

我正在使用 VOIP chatterbox 应用程序作为参考代码。我正在尝试在 C# 中获取捕获的音频数据，以便我可以发送到网络。在后端项目 Server.h 中有一个方法可以提供可在 UI 中使用的 callController 对象。我尝试添加将给我音频控制器对象的方法，但应用程序崩溃说访问冲突执行位置 0x6BE27618。

或者是否有任何其他方法可用于在 c# 代码中获取麦克风数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:40:47.463

这实际上取决于您尝试在其中使用它的上下文。对于标准应用程序，有一种抽象的方法可以通过[Coding4Fun Toolkit](http://coding4fun.codeplex.com/)执行此操作。使用[MicrophoneRecorder](http://coding4fun.codeplex.com/SourceControl/changeset/view/79022#1425409)类。它归结为：

```
MicrophoneRecorder recorder = new MicrophoneRecorder();
recorder.Start();
// Do something - e.g. wait
recorder.Stop();
byte[] capture = recorder.Buffer; 
```

# android - 在 Android 中将 OnValueChange 实现为 NumberPicker

> ID：15983120
> 
> 赞同：6
> 
> 时间：2013-04-13T01:13:34.570
> 
> 标签：android, valuechangelistener, numberpicker

我正在尝试将 onValueChangeListener 添加到我在 android 4.2.2 中的号码选择器 (np1) 中。

这是我到目前为止所拥有的

```
public class main extends Activity  {
ViewFlipper vf = null;
HttpClient client = null;
private ArrayList<String> captionList = new ArrayList<String>();
ListView lv = null;
private String custid = null;
ImageView iv = null;
private int vfloginview = 0;
private int vflistview = 0;
private boolean vfsentinal = false;
NumberPicker np1 = null;
TextView totalcost = null;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mystuffmobile);
    vf = (ViewFlipper) findViewById(R.id.vf);
    client = new DefaultHttpClient();
    lv = (ListView) findViewById(R.id.lv);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    np1 = (NumberPicker) findViewById(R.id.np1);
    np1.setMinValue(1);
    np1.setMaxValue(400);
    //np1.setOnValueChangedListener;    
    //np1.setOnValueChangedListener(onValueChange);

} 
```

* * *

尝试测试它的功能我一直在使用这个

```
public void onValueChange (NumberPicker np1, int oldVal, int newVal) {
    Log.v("NumberPicker", np1.getValue() +"");
} 
```

有谁知道一种简单的方法来实现这个监听器，而无需我的主要活动实现 NumberPicker.OnValueChangeListener？

*注意：我反对让我的主要活动实现 NumberPicker.OnValueChangeListener 的唯一原因是因为我必须将 main 设置为 abstract 并且我的应用程序将无法运行。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T01:18:12.580

您将像按钮上的单击侦听器一样执行此操作。

```
np1.setOnValueChangedListener(new OnValueChangeListener() {
    @Override
    public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
        // do something here
    }
}); 
```

一个完整的工作示例可以在这里找到：[http ://samplecodez.com/android/numberpicker.php](http://samplecodez.com/android/numberpicker.php)

一些风格点...

*   Main 应该大写，最好让它像 MainActivity 那样更具描述性。
*   仅在必要时使用字段。我猜您并没有在 onCreate() 之外使用大多数这些变量，因此请改为使用局部变量。
*   TextView totalCost 是您最好的命名变量 :) 考虑使用详细名称。当您在很长一段时间内第一次回顾这段代码时，您会在 6 个月后感谢自己。
*   没有魔法值（或字符串）！为您的最小值和最大值创建一个常量，这些值应该是您的字段的私有静态最终 int。
*   在 Eclipse 中，设置首选项中的 java 保存操作以在您保存时自动格式化所有代码行。

当然，这些都不会让你的代码运行得更好，但它肯定会更容易阅读。

# python - 如何从 sqlite3 python 中的子键中检索父键中的特定数据字段？

> ID：15983121
> 
> 赞同：0
> 
> 时间：2013-04-13T01:13:40.227
> 
> 标签：python, sqlite

如何从 sqlite3 python 中的子键中检索父键中的特定数据字段？

```
CREATE TABLE artist(
artistid    INTEGER PRIMARY KEY, 
artistname  TEXT
);

CREATE TABLE track(
trackid     INTEGER PRIMARY KEY,
trackname   TEXT, 
artistid INTEGER
FOREIGN KEY(artistid) REFERENCES artist(artistid)
);

track.execute('''SELECT artisid, trackname FROM track WHERE artistid = 1''') 
```

所以假设现在我已经执行了轨道表，我得到了 artisid 和 trackname，我也想检索 artisname 并将它放在两者之间，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:11:38.180

如果你已经有了艺术家 ID，你可以做一个简单的`SELECT`：

```
SELECT artistname FROM artist WHERE artistid = ? 
```

如果要在同一查询中检索名称，则必须连接两个表：

```
SELECT artist.artistid,
       artist.artistname,
       track.trackname
FROM track JOIN artist ON track.artistid = artist.artistid
WHERE artist.artistid = ? 
```

# apache - Ubuntu 10.04 为 apache 更新 openssl

> ID：15983124
> 
> 赞同：1
> 
> 时间：2013-04-13T01:14:04.843
> 
> 标签：apache, ubuntu, openssl, upgrade

我公司的网站位于 EC2 实例上。操作系统是 ubuntu 10.04。目前我们正在使用通过 apt-get 安装的软件包。我们有 apache 2.2.14 和 openssl 0.9.8k。经过一些安全审核后，我被告知要更新 openssl 的版本。0.9.8 行的 openssl 最新版本是 0.9.8y。它与 apache 2.2.14 兼容吗？如果是这样，仅升级 openssl 是否容易或至少可以？我在某个地方读到它，有些人只是建议升级整个操作系统。任何意见 ？

我确实尝试通过下载 tarball 来升级

httpd-2.2.24 + openssl 0.9.8y

我将它们都安装在

```
/usr/local/apache2
/usr/local/ssl 
```

我配置了 apache

```
./configure --enable-modules=all --enable-mods-shared="all ssl" \
--with-ssl=/usr/local/ssl/ --enable-ssl 
```

/usr/local/ssl/bin/openssl 确实显示 0.9.8y 但我的网络服务显示 apache 2.2.24 + openssl 0.9.8k 知道如何解决吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:20:21.613

```
$ ldd /usr/local/apache2/bin/httpd 
```

> ```
>  ...
>   libssl.so.0.9.8 => /lib/libssl.so.0.9.8
>   libcrypto.so.0.9.8 => /lib/libcrypto.so.0.9.8
>   ... 
> ```

libssl.so.0.9.8 仍然由加载程序在 /lib/ 系统目录中找到，而不是 /usr/local/ssl。所以你需要在运行httpd之前设置LD_LIBRARY_PATH：

```
$ export LD_LIBRARY_PATH=/usr/local/ssl/lib && /usr/local/apache2/bin/httpd 
```

有关apache 和 openssl 之间兼容性的更多信息，另请参阅[此文档。](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html)有关openssl 0.9.8k 和 0.9.8y 的二进制兼容性的信息，请参阅[此表。](http://upstream-tracker.org/versions/openssl.html)

[![在此处输入图像描述](https://i.stack.imgur.com/dBtWq.jpg)](https://i.stack.imgur.com/dBtWq.jpg)

# android - 从eclipse运行后如何从我的手机关闭android应用程序

> ID：15983129
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:15:19.537
> 
> 标签：android, eclipse

我正在尝试学习android开发，但是通过手机运行我的应用程序后它运行良好，但我无法关闭它。它甚至不会在我的手机设置中的应用程序下显示为正在运行的应用程序。它没有出现在我手机上的任何地方，但它正在运行。eclipse中似乎没有任何停止按钮。

如何干净地关闭手机/eclipse上的应用程序，以便继续编辑并重新运行它？

我唯一能想到的就是拔掉 USB 电缆，但我害怕破坏东西。亚行感觉已经够脆弱了。

我在这个网站上搜索了一些答案，但他们似乎在谈论完全不同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:17:11.560

按住 home 键，直到出现正在运行的应用程序列表。然后把它刷掉:)

如果您真的有兴趣让应用程序完全消失，那么有一个名为 DevDrawer ( [https://play.google.com/store/apps/details?id=com.owentech.DevDrawer](https://play.google.com/store/apps/details?id=com.owentech.DevDrawer) ) 的 FANTASTIC 应用程序可以让您放置您当前正在开发的应用程序的包名称。当我告诉你它会为你节省很多时间时，请相信我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:19:30.540

您可以使用[DDMS](http://developer.android.com/tools/debugging/ddms.html)。在左上角窗口的列表中选择代表您的应用程序的进程，然后单击停止按钮您将在上方看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:21:52.517

此外，如果您只是在更改代码后重新安装该应用程序，它应该会重新运行……即使您在手机上打开了该应用程序！

# linux - wget spider 返回所有 URL 两次——错误在哪里？

> ID：15983130
> 
> 赞同：0
> 
> 时间：2013-04-13T01:15:25.537
> 
> 标签：linux, bash, scripting, wget

我正在寻找一个脚本来为站点地图创建一个 URL 列表并找到了这个：

```
wget --spider --force-html -r -l1 http://sld.tld 2>&1 \
  | grep '^--' | awk '{ print $3 }' \
  | grep -v '\.\(css\|js\|png\|gif\|jpg\|ico\|txt\)$' \
  > urllist.txt 
```

结果是：

```
http://sld.tld/
http://sld.tld/
http://sld.tld/home.html
http://sld.tld/home.html
http://sld.tld/news.html
http://sld.tld/news.html
... 
```

每个 URL 条目都会保存两次。应该如何更改脚本来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:55:25.120

如果您在使用`--spider`标志时查看 wget 的输出，它看起来像：

```
Spider mode enabled. Check if remote file exists.
--2013-04-12 22:01:03--  http://www.google.com/intl/en/about/products/
Connecting to www.google.com|173.194.75.103|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Remote file exists and could contain links to other resources -- retrieving.

--2013-04-12 22:01:03--  http://www.google.com/intl/en/about/products/
Reusing existing connection to www.google.com:80.
HTTP request sent, awaiting response... 200 OK 
```

它检查链接是否存在（因此打印出 a `--`），然后必须下载它以查找其他链接（因此是第二个`--`）。这就是为什么在您使用`--spider`.

将其与没有进行比较`--spider`：

```
Location: http://www.google.com/intl/en/about/products/ [following]
--2013-04-12 22:00:49--  http://www.google.com/intl/en/about/products/
Reusing existing connection to www.google.com:80. 
```

因此，您只会得到以 . 开头的一行`--`。

您可以删除该`--spider`标志，但您仍然可以得到重复。如果您真的不想要任何重复项，`| sort | uniq`请在命令中添加：

```
wget --spider --force-html -r -l1 http://sld.tld 2>&1 \
  | grep '^--' | awk '{ print $3 }' \
  | grep -v '\.\(css\|js\|png\|gif\|jpg\|ico\|txt\)$' \
  | sort | uniq > urllist.txt 
```

# command-line - For / f 中的 delims 选项可以是字符串吗？

> ID：15983135
> 
> 赞同：0
> 
> 时间：2013-04-13T01:16:30.023
> 
> 标签：command-line, for-loop

我的代码如下：

for /F "tokens=1,2 delims=%0.3%" %%i in ("double a = 0.3;") do (

设置 a=%%i

设置 b=%%j

)

我想要 a = "double a = " 和 b =;" 但这段代码无济于事。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:41:20.393

您发布的代码根本不起作用。

```
for /F "tokens=1,2 delims=%0.3%" %%i in ("double a = 0.3;") do ( 
```

将`%0`被替换为`yourbatchfilename`and 由于 `%" %`在环境中没有设置值，它将被替换为 [nothing] 产生

```
for /F "tokens=1,2 delims=yourbatchfilename.3i in ("double a = 0.3;") do ( 
```

不出所料，这是一个语法错误。

```
@ECHO OFF
SETLOCAL
for /F "tokens=1,2 delims=3.0" %%i in ("double a = 0.3;") do (
set a=%%i
set b=%%j
)
ECHO first way  :a=%a%+ b=%b%+

ENDLOCAL
SETLOCAL
SET "astring=double a = 0.3;"
SET "aseparator=0.3"
SET "arotorapes=3.0"
for /F "tokens=1,2 delims=%arotorapes%" %%i in ("double a = 0.3;") do (
SET a=%%i
)
CALL SET b=%%astring:*%aseparator%=%%

ECHO second way :a=%a%+ b=%b%+

ENDLOCAL
SETLOCAL
SET "astring=double a = 0.3;"
SET "aseparator=0.3"
CALL SET b=%%astring:*%aseparator%=%%
SET "c=%b%%aseparator%"
SET "a=%astring%"
:loop
IF DEFINED c SET c=%c:~0,-1%&SET a=%a:~0,-1%&GOTO loop

ECHO third way  :a=%a%+ b=%b%+ 
```

在第一种方法中，我更改了字符的顺序，以证明子句的`=`和之间`"`的任何字符的任何序列都`delims`可以作为 SINGLE 分隔符。代码通过失败而“工作”。

在第二种方法中，设置的`a`工作方式相同。没有更多信息，真的无法判断这是否足够。`b`是通过专门替换源字符串中的所有字符来设置的，直到并包括带有 [nothing] 的分隔符

在第三种方法中，同样的操作建立`b`，然后`b`和分隔符连接起来。系统地删除原始原始字符串和连接字符串副本末尾的字符。当连接的版本变为空时，您已从原始版本中删除了分隔符和附录，将原始字符串的部分保留在分隔符处。

# c++ - C++ If 语句错误：预期的 ';' '{' 标记之前

> ID：15983146
> 
> 赞同：1
> 
> 时间：2013-04-13T01:18:35.227
> 
> 标签：c++, if-statement

我写这个是为了好玩：

```
#include <iostream>
#include <cstdlib>
using namespace std;

int Arsenal = rand()%3;
int Norwich = rand()%3;

int main () {
  if (Arsenal > Norwich) {
    cout << "Arsenal win the three points, they are in the Top Four";
    return 0;
  } else if (Arsenal == Norwich) {
    cout << "The game was a draw, both teams gained a point";
    return 0;
  } else (Norwich > Arsenal) {
      cout << "Norwich won, Arsenal lost";
      return 0;
    }
} 
```

我试图用 g++ 编译它，但我得到了这个错误：

```
arsenalNorwich.cpp: In function, 'int main'
arsenalNorwich.cpp:15:30: error: expected ';' before '{' token 
```

我不知道我做错了什么，我学校的 CS 导师也不知道。虽然只是为了好玩，但它让我发疯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T01:20:47.470

你在这里错过了一个`if`：

```
 else if (Norwich > Arsenal)
  ///^^^if missing 
```

同时，也不好放

```
 int Arsenal = rand()%3;
 int Norwich = rand()%3; 
```

之前`main`。另一点是你应该在调用之前先设置随机种子`rand()`。

您`if-else`可以简化如下：

```
if (Arsenal > Norwich) {
   cout << "Arsenal win the three points, they are in the Top Four";
} else if (Arsenal == Norwich) {
   cout << "The game was a draw, both teams gained a point";
} else { //^^^no need to compare values again since it must be Norwich > Arsenal
         //when execution reaches this point
   cout << "Norwich won, Arsenal lost";
}
return 0; 
```

# actionscript-3 - 类包中的 Action Script 3.0 鼠标事件

> ID：15983147
> 
> 赞同：1
> 
> 时间：2013-04-13T01:18:56.947
> 
> 标签：actionscript-3, flash, action, flash-cs5.5

在类中使用鼠标单击事件时遇到问题，我是动作脚本的绝对初学者。

我想要的是，如果我单击 btn_MClick 按钮，它应该运行脚本，但是每次单击它时，我都会收到错误消息，表明 btn_MClick 未定义。

btn_MClick 在舞台上，如果 btn_MClick 带有实例名称

```
public class gunShip1 extends MovieClip
{
    var moveCount = 0;

    public function gunShip1()
    {
        stage.addEventListener(KeyboardEvent.KEY_DOWN, moveGunShip1);
        stage.addEventListener(KeyboardEvent.KEY_DOWN, ShootGunShip1)
                    btn_MClick.addEventListener(MouseEvent.MOUSE_DOWN.KEY_DOWN,   ShootGunShip1);;

    }

function ShootGunShip1(evt: MouseEvent)
{

            var s_Bullet:survBullet = new survBullet();
            var stagePos:Point = this.localToGlobal (new    Point(this.width / 2-10, this.height));;
            s_Bullet.x = stagePos.x;
            s_Bullet.y = stagePos.y;

            parent.addChild(s_Bullet);
            //play sound
            var gun_sound:ricochetshot = new ricochetshot();
            gun_sound.play();
        }
} 
```

拜托，我完全不知道该怎么做，不知何故，感觉整个过程都是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:40:27.137

您的类`gunShip1`没有 property `btn_MClick`， the`root`或 document 类有。

基本上发生的事情是您已将按钮放在舞台上，这使其成为属于根容器的实例。目前，您正试图将按钮称为`gunShip1`.

您在这里真正应该做的是让按钮单击单独管理`gunShip1`，并让单独的代码调用`gunShip1`. 例如，你可以在你的文档类中有这个：

```
public class Game extends MovieClip
{

    private var _ship:gunShip1;

    public function Game()
    {
        _ship = new gunShip1();

        // The Document Class will have reference to objects on the stage.
        btn_MClick.addEventListener(MouseEvent.CLICK, _click);
    }

    private function _click(e:MouseEvent):void
    {
        _ship.shoot();
    }

} 
```

然后你更新的`shoot`方法在`gunShip1`：

```
public function shoot():void
{
    var s_Bullet:survBullet = new survBullet();
    var stagePos:Point = this.localToGlobal (new Point(this.width / 2 - 10, this.height));
    s_Bullet.x = stagePos.x;
    s_Bullet.y = stagePos.y;
    parent.addChild(s_Bullet);

    var gun_sound:ricochetshot = new ricochetshot();
    gun_sound.play();
} 
```

这个想法是`gunShip1`不应该负责处理用户输入（鼠标，键盘等）。相反，它应该是一个单独的类，通知`gunShip1`它应该做某事。

# flash - QWebView 窗口关闭时声音不会停止（加载 youtube 视频）

> ID：15983148
> 
> 赞同：1
> 
> 时间：2013-04-13T01:19:10.707
> 
> 标签：flash, qt, webkit, pyqt, qtwebkit

我通过以下代码使用 QWebView 加载 youtube 视频，当视频播放时我关闭 QWebView 窗口，但即使 QWebView 窗口关闭，我仍然可以听到该视频的声音，所以有什么方法可以通过QWebView 窗口关闭时的代码？

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

import sys

app = QApplication(sys.argv)

view = QWebView()

view.resize(1230,760)
view.settings().setAttribute(QWebSettings.PluginsEnabled, True)

view.load(QUrl("http://www.youtube.com/v/nKIu9yen5nc")) #
#
view.show()

sys.exit(app.exec_()) 
```

# java - 覆盖和重载 Java

> ID：15983149
> 
> 赞同：-2
> 
> 时间：2013-04-13T01:19:13.847
> 
> 标签：java, methods, overloading, overriding

我有两个问题。我试图理解覆盖和重载

我们可以在不继承另一个类的情况下覆盖方法吗？为什么？

我们可以在不继承另一个类的情况下进行方法重载吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:22:02.327

> 我们可以在不继承另一个类的情况下覆盖方法吗？为什么？

不，覆盖意味着您*覆盖*超类中的方法。

> 我们可以在不继承另一个类的情况下进行方法重载吗？为什么？

是的。重载的方法可以出现在同一个类中，但具有不同的签名。

你读过[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:22:50.113

第一个问题不。覆盖方法意味着您继承了父调用，并且正在用您在子类中定义的方法替换它的方法实现。如果没有父方法，则不能覆盖父方法。

对第二个问题是。重载意味着您​​有多个具有相同名称的方法，但您给它们不同的签名（参数），这样它们就不会相互冲突。这与面向对象编程无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:23:29.193

**我们可以在不继承另一个类的情况下覆盖方法吗？为什么？**

不，因为覆盖本身意味着覆盖行为（继承类的方法）

**我们可以在不继承另一个类的情况下进行方法重载吗？为什么？**

是（重载意味着提供同名但不同签名的方法）

我建议您详细了解 oops 概念（包括多态性）作为其 java 语言的基础

这是您正在寻找的

[覆盖和重载](http://www.techtamasha.com/method-overriding-and-overloading-in-java/66)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-06T07:38:43.927

1.  覆盖意味着您正在处理两种方法：一种在超类中，另一种在子类中。所以，我们可以说覆盖只存在于继承类型的问题中。

2.  重载意味着我们在同一个类中有两个具有相同名称的方法，但这两个方法的参数类型和参数数量不同。

我希望，这很有用。再会！

# matlab - 如何“矢量化”这个操作？

> ID：15983151
> 
> 赞同：0
> 
> 时间：2013-04-13T01:19:19.177
> 
> 标签：matlab, vectorization

我有按矩阵调用它的矩阵样本大小`m`的数据。`n x n``n``m*n``P`

我还有一个函数 call if `f`，它对一个固定的向量进行操作，调用 it`v`和`n x n`矩阵并返回一个实数。

我想通过对中的每个矩阵进行操作来创建一个`1 x m`实数向量，称之为。`d``f``v``n x n``P`

所以，举例来说，`n = 3`我`m = 6`想要：

```
d(1) = f(v,P(:,1:3)), d(2) = f(v,P(:,4:6)), . . ., d(6) = f(v,P(:,16:18)) 
```

我怎样才能做到这一点而不做一个循环？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:07:48.617

在不知道您的`f`功能做什么的情况下，我只能建议使用 ARRAYFUN 的伪矢量化解决方案：

```
d = arrayfun( @(x) f(v,P(:,x:x+2)), n-2:3:n*m ); 
```

它以与简单循环几乎相同的速度运行（我认为它的代码更清晰）：

```
d = zeros(1,m);
for k = 1:m
    d(k) = f(v,P(:,n*k-2:n*k));
end 
```

# sql - 如何找出 Postgres 中的 TEXT 字段有多大？

> ID：15983152
> 
> 赞同：7
> 
> 时间：2013-04-13T01:19:27.060
> 
> 标签：sql, xml, postgresql, compression, zip

我在 Postgres 的 TEXT 字段中存储了一些大型 XML 文档，并试图找出 TOAST 压缩它们的效率。我有一个 2.2mb 的 XML 文档，可以压缩到 51kb，所以我想了解 TOAST 的压缩率与它的匹配程度如何才能最终决定我将如何随着时间的推移归档这些文档。

Postgres 中是否有一个函数可以让我像这样识别特定列和行的 TOAST 压缩大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T01:44:19.690

你想要`pg_column_size`TOASTed 大小，unasted`octet_length`大小。`pg_column_size`位于[文档的系统管理功能部分](http://www.postgresql.org/docs/current/static/functions-admin.html)。有关更多详细信息，请参阅文档和[此问题](https://stackoverflow.com/q/13304572/398670)。

例子：

```
craig=> CREATE TABLE toastdemo(x text);
CREATE TABLE
craig=> insert into toastdemo(x) select * from  repeat('abcdef',1000);
INSERT 0 1
craig=> select pg_column_size(x), pg_column_size(repeat('abcdef',1000)) FROM toastdemo;
 pg_column_size | pg_column_size 
----------------+----------------
             84 |           6004
(1 row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:02:29.843

您实际上可以检查文件：

```
SELECT oid AS table_name, reltoastrelid AS toast_tbl_name
FROM   pg_class
WHERE  oid = 'mytbl'::regclass 
```

这会生成表的 OID 和与之关联的 toast 表（如果存在）。它们用作数据目录中文件系统中的文件名。你可以去看看他们。在您的数据目录中：

```
find . -name '216738' 
```

[这是手册中有关压缩技术](http://www.postgresql.org/docs/current/interactive/storage-toast.html)的引述：

> 使用的压缩技术是 LZ 压缩技术系列中相当简单且非常快速的成员。详情请参阅 `src/backend/utils/adt/pg_lzcompress.c`。

# jquery - 使用 jQuery freezeframe 时创建可打印的图像

> ID：15983155
> 
> 赞同：0
> 
> 时间：2013-04-13T01:19:47.450
> 
> 标签：jquery, html, css

Chris Antonellis 的 Freezeframe 插件允许您使用以下命令在鼠标悬停时为 gif 设置动画：

```
< img src="image.gif" freezeframe /> 
```

在此处查看他网站上的示例，并[在](http://freezeframe.chrisantonellis.com/documentation/)[此处](http://freezeframe.chrisantonellis.com/)查看文档。

不幸的是，当使用此插件时，网站的打印版本无法显示图像（当网站上嵌入动画 gif 时，通常会在打印页面上弹出静态版本）。有没有办法可以修复它以使其正确打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:25:48.227

您可以使用媒体类型为网站的打印版本设置特定样式。

```
@media print {
    /* CSS styles here will only affect the website when it is printed. */
} 
```

当您打印动画 gif 时，它只会显示动画的第一帧。如果您想创建动画 gif 的单独“快照”图像，以便更好地控制将在打印版本上看到的内容，您可以在页面上嵌入另一个图像。

对于您的特定需求，最好将每个图像包装在一个`div`基于媒体类型应用的特定 CSS 中。以下代码将允许您在您的网站上为常规访问者显示动画 gif，并允许您为打印版本指定单独的图像显示。

```
<style>
.print-image {
  display:none;
}

@media print {
    .screen-image {
        display:none;
     }
      .print-image {
        display:block;
      }
}
</style>

<!-- Content within the .screen-image element will be displayed to normal visitors -->
<div class="screen-image">
    <img src="http://placehold.it/450x250" />
    <p>Image for normal viewing.</p>
</div>

<!-- Content within the .print-image element will be displayed when website is printed -->
<div class="print-image">
    <img src="http://placehold.it/450x250" />
    <p>Image for print view.</p>
</div> 
```

这是一个JSFiddle！[http://jsfiddle.net/gU57Y/](http://jsfiddle.net/gU57Y/) - 通过按 CTRL+P 并测试打印视图来测试它。

如果您想了解有关基于媒体类型应用样式的更多信息 - 您可以在[W3.org的](http://W3.org)[媒体类型页面](http://www.w3.org/TR/CSS2/media.html)上了解更多信息。

# php - MathJax html 呈现为 pdf

> ID：15983157
> 
> 赞同：4
> 
> 时间：2013-04-13T01:20:01.990
> 
> 标签：php, pdf, converter, dompdf, mathjax

我正在尝试制作一个在线测验应用程序，其中将向用户展示一个包含文本、图像和数学方程式的测验。我还希望用户能够打印该测验。我正在使用 MathJax 来显示方程。

如果测验只包含文本和图像但没有数学方程式，我可以使用 DomPdf 将测验 HTML 转换为 PDF 并让用户打印它。

但是，我如何才能创建一个既包含测验中 HTML 标记的内容又包含 MathJax 呈现的测验的数学方程式的 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:27:17.650

根据这篇文章： http: [//sourceforge.net/projects/mathjax/forums/forum/948700/topic/3819537](http://sourceforge.net/projects/mathjax/forums/forum/948700/topic/3819537) wkhtmltopdf 如果您强制延迟 javascript 渲染，可以转换 mathjax。我刚刚和这里的一个人谈完了： [使用 wkhtmltopdf 将当前页面打印到 pdf](https://stackoverflow.com/questions/15983018/printing-the-current-page-to-pdf-using-wkhtmltopdf/15983040#15983040) 关于如何使用 wkhtmltopdf 从 php 获取保存到 pdf 的页面。如果你把这两件事放在一起，我想你可以得到你想要的。

# asp.net-mvc - 从同一台机器上的 Windows 服务请求基于身份验证保护的 url

> ID：15983158
> 
> 赞同：0
> 
> 时间：2013-04-13T01:20:08.790
> 
> 标签：asp.net-mvc, asp.net-mvc-3, windows-services, forms-authentication

我有一个使用表单身份验证的 MVC3 网站。在同一台服务器上是 Windows 服务。

两者共享同一个数据库（包括标准的 asp.net 成员表），并且它们还共享代码到服务层。

我需要 Windows 服务能够模拟任何会员用户，然后以该用户的身份调用网站上的 url。我没有亲自调用 url，它是通过将 URL 输出转换为 PDF 的组件调用的。

我没有密码，因为它们在数据库中进行了哈希处理，所以我需要的是能够获得一个有效的 aspxauth cookie 并将其与我的请求一起发送。

到目前为止，我还没有快乐过。制作的每个 PDF 都只是我的登录屏幕的副本。

是否可以从 Windows 服务生成有效票证，网站将接受该票证并像该用户实际完成登录过程一样行事？

谢谢。

# c# - 如何获取 CookieContainer 的所有 Cookie？

> ID：15983166
> 
> 赞同：28
> 
> 时间：2013-04-13T01:21:29.157
> 
> 标签：c#, .net, cookiecontainer

我想使用 Newtonsoft.Json 将 CookieContainer 导出到 JSON，但不幸的是 CookieContainer 没有枚举器或其他东西，所以我无法循环遍历它......

**编辑：**使用我发布的解决方案，它将是这样的：

```
private static void Main(string[] args)
{
    CookieContainer cookieContainer = new CookieContainer();
    cookieContainer.Add(new Cookie("name1", "value1", "/", ".testdomain1.com"));
    cookieContainer.Add(new Cookie("name2", "value1", "/path1/", ".testdomain1.com"));
    cookieContainer.Add(new Cookie("name2", "value1", "/path1/path2/", ".testdomain1.com"));
    cookieContainer.Add(new Cookie("name1", "value1", "/", ".testdomain2.com"));
    cookieContainer.Add(new Cookie("name2", "value1", "/path1/", ".testdomain2.com"));
    cookieContainer.Add(new Cookie("name2", "value1", "/path1/path2/", ".testdomain2.com"));

    CookieCollection cookies = GetAllCookies(cookieContainer);

    Console.WriteLine(JsonConvert.SerializeObject(cookies, Formatting.Indented));
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-13T18:01:03.017

使用反射的解决方案：

```
public static CookieCollection GetAllCookies(CookieContainer cookieJar)
{
    CookieCollection cookieCollection = new CookieCollection();

    Hashtable table = (Hashtable) cookieJar.GetType().InvokeMember("m_domainTable",
                                                                    BindingFlags.NonPublic |
                                                                    BindingFlags.GetField |
                                                                    BindingFlags.Instance,
                                                                    null,
                                                                    cookieJar,
                                                                    new object[] {});

    foreach (var tableKey in table.Keys)
    {
        String str_tableKey = (string) tableKey;

        if (str_tableKey[0] == '.')
        {
            str_tableKey = str_tableKey.Substring(1);
        }

        SortedList list = (SortedList) table[tableKey].GetType().InvokeMember("m_list",
                                                                    BindingFlags.NonPublic |
                                                                    BindingFlags.GetField |
                                                                    BindingFlags.Instance,
                                                                    null,
                                                                    table[tableKey],
                                                                    new object[] { });

        foreach (var listKey in list.Keys)
        {
            String url = "https://" + str_tableKey + (string) listKey;
            cookieCollection.Add(cookieJar.GetCookies(new Uri(url)));
        }
    }

    return cookieCollection;
} 
```

* * *

#### .NET 6 更新

最后，.NET 6 发布并引入了`CookieContainer.GetAllCookies()`提取`CookieCollection`-[文档链接](https://docs.microsoft.com/en-us/dotnet/api/system.net.cookiecontainer.getallcookies?view=net-6.0)的方法。

```
public System.Net.CookieCollection GetAllCookies(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-08-09T03:42:46.257

无论协议是什么，此方法都将确保获取所有 cookie：

```
public static IEnumerable<Cookie> GetAllCookies(this CookieContainer c)
{
    Hashtable k = (Hashtable)c.GetType().GetField("m_domainTable", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(c);
    foreach (DictionaryEntry element in k)
    {
        SortedList l = (SortedList)element.Value.GetType().GetField("m_list", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(element.Value);
        foreach (var e in l)
        {
            var cl = (CookieCollection)((DictionaryEntry)e).Value;
            foreach (Cookie fc in cl)
            {
                yield return fc;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-06T15:10:38.290

第一个答案不适用于便携式项目。所以这里的选项2，也使用反射

```
using System.Linq;
using System.Collections;
using System.Reflection;
using System.Net;

    public static CookieCollection GetAllCookies(this CookieContainer container)
    {
        var allCookies = new CookieCollection();
        var domainTableField = container.GetType().GetRuntimeFields().FirstOrDefault(x => x.Name == "m_domainTable");            
        var domains = (IDictionary)domainTableField.GetValue(container);

        foreach (var val in domains.Values)
        {
            var type = val.GetType().GetRuntimeFields().First(x => x.Name == "m_list");
            var values = (IDictionary)type.GetValue(val);
            foreach (CookieCollection cookies in values.Values)
            {
                allCookies.Add(cookies);                    
            }
        }          
        return allCookies;
    } 
```

1）我也试过

```
var domainTableField = container.GetType().GetRuntimeField("m_domainTable"); 
```

但它返回空值。

2）您可以遍历 domain.Keys 并对所有键使用 container.GetCookies() 。但是我遇到了问题，因为 GetCookies 需要 Uri 而不是我所有的键都匹配 Uri 模式。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-01-25T14:12:39.483

使用[CookieContainer.GetCookies 方法](https://msdn.microsoft.com/en-us/library/system.net.cookiecontainer.getcookies%28v=vs.110%29.aspx)

```
CookieCollection cookies = cookieContainer.GetCookies(new Uri(url)); 
```

`url`您网站的网址在哪里。

就我而言，正如其他答案中所建议的那样，我无法使用反射。但是，我确实知道要查询的网站的 URL。我认为容器不会盲目地返回所有 cookie 而是按 URL 返回它们甚至是合乎逻辑的，因为 cookie 始终属于特定的 URL，并且不能在与它们关联的域的上下文之外使用。

# inkscape - 如何选择从 Google Draw 导入 Inkscape 的 SVG 中的所有对象？

> ID：15983167
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:21:40.330
> 
> 标签：inkscape

如何选择从 Google Draw 导入 Inkscape 的 SVG 中的所有对象？

当我尝试单独选择所有对象时，我可以将每个对象导出为单独的图像（导出为位图），它只会选择整个导入的 SVG。

我希望能够将单个图像作为图层导入 Photoshop，因为我们无法直接编辑 SVG。

文件：

[https://www.sugarsync.com/pf/D7908924_855_863732581](https://www.sugarsync.com/pf/D7908924_855_863732581) [http://bayfiles.com/file/NVHz/rhWuQr/Exported_from_Google_Draw.svg](http://bayfiles.com/file/NVHz/rhWuQr/Exported_from_Google_Draw.svg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:10:49.473

这是因为对象是分组的。通过选择组并转到`Object > Ungroup`（或者右键单击并选择`Ungroup`或使用`Shift+Ctrl+G`）来取消组合它们。

# javascript - 将表单数据加载到字符串然后加载到 localStorage 的最佳方法是什么？

> ID：15983170
> 
> 赞同：0
> 
> 时间：2013-04-13T01:21:57.550
> 
> 标签：javascript, jquery

这是将表单数据加载到字符串然后加载到的最佳方式`localStorage`吗？

我自己想出了这个，我不擅长编程。它可以满足我的需要，但我不确定它是否是防弹代码？

```
<script>
    var sg = document.getElementById("selectedGateway");
    var sd = document.getElementById("selectedDestination");
    var dm = document.getElementById("departureMonth");
    var dd = document.getElementById("departureDay");
    var dy = document.getElementById("departureYear");
    var rm = document.getElementById("returnMonth");
    var rd = document.getElementById("returnDay");
    var ry = document.getElementById("returnYear");
    var ad = document.getElementById("adults");
    var ch = document.getElementById("option2");

    $("#searchRequestForm").submit(function() {
        var string = 'From: ' + sg.value + ' \nTo: ' + sd.value + ' \nDeparture: ' + dm.value + '/' + dd.value + '/' + dy.value + ' \nReturn: ' + rm.value + '/' + rd.value + '/' + ry.value + ' \nNumber of adults: ' + ad.value + ' \nNumber of children: ' + ch.value;
        localStorage.setItem("string", string);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:24:37.933

我会使用类似下面的东西，这样我就可以处理一个对象及其属性，而不是一个大字符串。请注意，除了 jQuery 选择器之外，这是纯 JavaScript。

**演示：http:** [//jsfiddle.net/grTWc/1/](http://jsfiddle.net/grTWc/1/)

```
var data = {
    sg: $("#selectedGateway").val(),
    sd: $("#selectedDestination").val()

    // items here
};

localStorage.setItem("mykey", JSON.stringify(data)); 
```

要检索数据：

```
var data = JSON.parse(localStorage["mykey"]);
alert(data.sg); 
```

也可以看看：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)
*   [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:33:48.823

我更喜欢表驱动的方法，所以没有重复的代码（[DRY](http://en.wikipedia.org/wiki/Don%27t_Repeat_Yourself)）：

```
var ids = [
    "selectedGateway", "From: ", 
    "selectedDestination", "\nTo :",
    "departureMonth", "\nDeparture: ", 
    "departureDay", "/",
    "departureYear", "/",
    "returnMonth", " \nReturn: ",
    "returnDay", "/",
    "returnYear",  "/",
    "adults", " \nNumber of adults: ",
    "option2", " \nNumber of children: "];

var submitStr = "";
for (var i = 0; i < ids.length; i+=2) {
    submitStr += ids[i+1] + document.getElementById(ids[i]).value;
}
localStorage.setItem("string", submitStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:25:57.347

您可以定义一个如下所示的函数来直接通过 id 获取值，这样在构建字符串时会更简单。

```
function form(id) {
    return document.getElementById(id).value;
} 
```

# python - 使用 lambda 从开头删除列表条目

> ID：15983172
> 
> 赞同：1
> 
> 时间：2013-04-13T01:22:12.767
> 
> 标签：python, python-2.7

我有来自网站的面包屑，我想用 lambda 表达式从头开始删除所有“主页”条目。

就像是：

```
lambda v: v[1:] if v and v[0] == 'Home' else v 
```

但我想删除倍数，而不仅仅是第一个，而且只是从头开始，这样：

```
['Home', 'Home', 'Home and Garden', 'Home', 'Kitchen'] 
```

变成：

```
['Home and Garden', 'Home', 'Kitchen'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T01:24:03.823

也许这就是你想要的`lambda`：

```
>>> F = lambda v: F(v[1:]) if v and v[0] == 'Home' else v
>>> L = ['Home', 'Home', 'Home and Garden', 'Home', 'Kitchen']
>>> F(L)
['Home and Garden', 'Home', 'Kitchen'] 
```

然而，这将是低效的，Python 已经为此提供了工具：

```
>>> from itertools import dropwhile
>>> L = ['Home', 'Home', 'Home and Garden', 'Home', 'Kitchen']
>>> list(dropwhile(lambda x: x == 'Home', L))
['Home and Garden', 'Home', 'Kitchen'] 
```

或者：

```
>>> from functools import partial
>>> from operator import eq
>>> from itertools import dropwhile
>>> L = ['Home', 'Home', 'Home and Garden', 'Home', 'Kitchen']
>>> list(dropwhile(partial(eq, "Home"), L))
['Home and Garden', 'Home', 'Kitchen'] 
```

哪个应该更快，bur 需要更多的导入

# jquery-mobile - 我的 BB 应用程序没有从 google feed api 检索数据

> ID：15983180
> 
> 赞同：1
> 
> 时间：2013-04-13T01:23:56.900
> 
> 标签：jquery-mobile, blackberry-simulator, blackberry-webworks, google-feed-api

我使用 jQuery Mobile 开发了一个应用程序。编译后，我在 BB 模拟器上进行了测试，但无法显示提要的数据。我如何配置我的 config.xml 文件来实现这一点。下面是我当前的 config.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" xmlns:rim="http://www.blackberry.com/ns/widgets" version="1.0.0" rim:header="RIM-Widget: rim/widget">
    <name>on the Go!</name>
    <description>Get latest information on the Go!</description>
    <content src="index.html" rim:allowInvokeParams="true"/>
    <author href="" rim:copyright="Copyright 2013" email="josiahaccounts@gmail.com" xml:lang="en" its:dir="rtl" >Josiah Gerald</author>
    <access uri="http://ajax.googleapis.com" subdomains="true" >
        <feature id="blackberry.invoke.BrowserArguments" />
        <feature id="blackberry.app" />
    </access>
    <rim:loadingScreen 
        backgroundColor="#FFFFFF"
        backgroundImage="images/news.png"
        foregroundImage="theme/images/ajax-loader.gif"
        onRemotePageLoad="true"
        onLocalPageLoad="true"
        onFirstLaunch="true">
        <rim:transitionEffect type="fadeIn" duration="300" />
    </rim:loadingScreen>
    <content src="index.html" />
    <rim:cache disableAllCache="true" />
    <rim:connection timeout="60000">
        <id>TCP_WIFI</id>
        <id>MDS</id>
        <id>BIS-B</id>
        <id>TCP_CELLULAR</id>
        <id>WAP2</id>
        <id>WAP</id>
    </rim:connection>
    <license>(c) 2013 www.mobilenizer.com</license>
    <icon src="images/icon.png" />
</widget> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:27:34.693

我终于让它工作了。

这是解决方案：

```
<access uri="http://ajax.googleapis.com" subdomains="true" />
    <feature id="blackberry.invoke" />
    <feature id="blackberry.app" required="true" version="1.0.0">
        <param name="websecurity" value="disable" />
    </feature> 
```

因此，我没有将功能嵌套在访问权限内，而是将其分开。

# python - 愚蠢的例子，但类型错误？

> ID：15983184
> 
> 赞同：2
> 
> 时间：2013-04-13T01:24:35.467
> 
> 标签：python, class, error-handling

```
class Cat(object):
    def __init__(self,run,fast):
        self.run=run
        self.fast=fast

    def skip(self,to,store):
        return 'Cat'

class Dog(Cat):
    def __init_(self,run, fast,tongue):
        Cat.__init__(self,run,fast)
        self.tongue=tongue

    def skip(self,to,store,happier):
        return 'Doggy'
class Parent(object):
    def __init__(self,velocity):
        self.velocity=velocity

"""
velocity is a list of speeds or something. But it can 
be from dogs or cats. Fast is a single number
"""
class Owner(Parent):
    def __init__(self,smile):
        Parent.__init__(self,velocity)
        self.smile=smile
        self.jumper=[]

    def update(self):
        # velocity is a list of instances of cats and dog
        for number in self.velocity:
            if isinstance(number,Dog):
                number.skip(to,store,happier)
                self.jumper.append(number)
            if isinstance(number,Cat):
                 number.skip(to,store)
                self.jumper.append(number) 
```

不断出现的问题是说我在 if 实例更新方法中使用了第一个 if 语句，它不断给我一个类型错误，它说我只需要为 skip 而不是三个参数。但是我知道因为它在块中，所以我必须拥有的实例是 dog，它需要三个参数。为什么会不断出现这种类型的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:46:31.897

您没有向我们展示您收到的实际错误消息，但我假设您误解了它，它实际上是说您只将*两个*参数传递给一个需要*三个*. 具体来说，我希望问题不在于这个代码块：

```
if isinstance(number,Dog):
    number.skip(to,store,happier)
    self.jumper.append(number) 
```

但紧随其后的是：

```
if isinstance(number,Cat):
    number.skip(to,store)
    self.jumper.append(number) 
```

因为`Dog`是 的子类`Cat`，所以 的任何实例`Dog`也是 的实例`Cat`。因此，如果`number`是 a `Dog`，第一个代码块将成功运行，然后，因为您使用`if`而不是`elif`，第二个代码块将尝试执行，Python 将尝试调用`.skip(to, store)`，`Dog`这不起作用, 因为`Dog`'s`skip`需要三个参数。

从这个人为的示例中不清楚您首先要做什么，但我怀疑您问题的最佳解决方案是将第二个简单地更改`if`为 an `elif`，这样`Dog`s 就不会被视为非`Dog` `Cat`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:45:33.967

您在这里得到的是一个派生类，它使用不同的签名（形式参数列表）覆盖基类方法。您可以在此处阅读有关此内容的一些信息：

[Python：子类可以重载继承的方法吗？](https://stackoverflow.com/questions/2398666/python-can-subclasses-overload-inherited-methods)

也许您不应该在两个类中使用相同的方法名称，因为这两种方法实际上不能互换。`*args`或者，您可以通过将额外参数作为or使它们可互换，`**kwargs`在基类中不需要这些额外参数，而是在派生类中使用它们。像这样的东西：

```
class Cat(object):
    def skip(self,to,store,*args):
        return 'Cat'

class Dog(Cat):
    def skip(self,to,store,happier):
        return 'Doggy' 
```

现在，任何一个类都可以使用三个参数（加上 self）调用其方法。

# c# - C# 将 base64 字符串发送到 php

> ID：15983185
> 
> 赞同：1
> 
> 时间：2013-04-13T01:24:35.453
> 
> 标签：c#, php, base64

我正在尝试通过 base64 字符串将图像数据从 C# 发送到 PHP：

```
try
{
    using (WebClient client = new WebClient())
    {
        client.Headers.Add("Content-Type", "binary/octet-stream");
        Textt.Text = "sending data";
        string result = await Task.Run(() => client.UploadString(url, "POST", data));
        //String result1 = System.Text.Encoding.UTF8.GetString(result, 0, result.Length);
        Textt.Text = result;
    }
} 
```

我收到此 Web 异常：“远程服务器返回错误：(413) 请求实体太大。”

我这样做是因为我有很多网络空间的免费 PHP 托管，而且我的 ASP.net MVC 应用程序将通过 PHP 脚本将文件上传到 PHP 主机。

有什么建议么？

# ios - iOS：如何显示从 JSON 动态呈现的内容列表？

> ID：15983187
> 
> 赞同：1
> 
> 时间：2013-04-13T01:25:16.033
> 
> 标签：ios, objective-c, json, cocoa-touch

就像动态填充的 Twitter 时间线一样，我需要使用来自获取的 JSON 元数据（img url 和文本描述）的内容列表填充我的主屏幕

它应该看起来像这样。

```
+---------+-----------------------+
| image1  | Text description..... |
+---------+-----------------------+
| image2  | Text description..... |
+---------+-----------------------+
| image3  | Text description..... |
+---------+-----------------------+
| image4  | Text description..... |
+---------+-----------------------+
...
+---------+-----------------------+
| image10 | Text description..... |
+---------+-----------------------+ 
```

我刚开始在 iOS 上进行 GUI 开发，似乎找不到任何有关在 iOS 设备上显示动态内容的有用信息。我将非常感谢有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:37:22.120

使用 UITableViewController。将 JSON 加载到字典（或您正在使用的任何数据结构）中，然后以这种方式显示数据。控制器将处理为数据结构中的每个条目创建每个单元格。

这是一个教程。

[http://www.youtube.com/watch?v=8VR2LiE2F5M](http://www.youtube.com/watch?v=8VR2LiE2F5M)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:38:25.627

最好缓存 JSON 响应以确保最佳 UI 性能。您可以使用[JSONKit](https://github.com/johnezang/JSONKit)之类的东西将结果解析为包含每个图像 url 和文本描述的项目的字典。然后，您可以将字典写入磁盘并稍后再读回。您也可以简单地将 JSON 本身写入文件并将其读回或使用[Core Data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。如果您决定涉足 Core Data，我个人建议添加[Magical Record](https://github.com/magicalpanda/MagicalRecord)以使生活更轻松。您可能正在调用 RESTful API 来获取 JSON。在这种情况下，[RESTKit](http://restkit.org/)也非常有用。 [Ray Wenderlich](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)有一个很好的介绍。

这可能不是“快速而肮脏”的方法......但根据我的经验......这些东西的结合有助于让事情变得更好。

# java - Cassandra 客户端 Java API

> ID：15983190
> 
> 赞同：49
> 
> 时间：2013-04-13T01:25:25.017
> 
> 标签：java, cassandra, hector, astyanax, pelops

我最近开始使用 Cassandra 数据库。现在我正在评估`Cassandra client`我们应该继续前进的过程。

我在 stackoverflow 上看到过各种关于 Cassandra 使用哪个客户端的帖子，但没有一个给出非常明确的答案。

我的团队要求我对此进行一些研究，并在 Java 中`pros and cons`为每一个提出一些建议。`Cassandra Client API’s`

正如我所提到的，我最近参与其中，`Cassandra`所以不太了解为什么某些人会选择`Pelops client`以及为什么某些人会与`Astyanax`其他一些客户一起去。

我了解每个 Cassandra 客户端的简要情况，我的意思是我能够完成这项工作并开始读取和写入 Cassandra 数据库。

以下是我目前掌握的信息。

**卡桑德拉·阿皮斯**

*   *Hector (Production-Ready)*
    最稳定的 Java API，为黄金时段做好准备。

*   *Astyanax (The Up and Comer)*
    来自 Netflix 的一个干净的 Java API。它不像赫克托那样广泛使用，但它很坚固。

*   *Kundera (The NoSQL ORM)*
    JPA 兼容，当您想通过对象与 Cassandra 交互时，这很方便。
    这在某种程度上限制了您，因为您将无法拥有动态数量的列/名称等。但它确实允许您通过 ORM 移植，或将存储集中到 Cassandra 上以用于更传统的用途。

*   *Pelops*
    我只简单地使用过 Pelops。这是一个直截了当的 API，但似乎没有它背后的动力。

*   *PlayORM（没有约束的 ORM？）*
    我刚刚听说过这个。看起来它试图通过引入 JQL 来解决传统的基于 JPA 的 ORM 和 NoSQL 之间的阻抗不匹配。看起来很有希望。

*   *Thrift (Avoid Me!)*
    这是“低级”API。

以下是我们在决定时的优先事项`Cassandra Client`-

*   首要任务是：低延迟开销、异步 API 和生产环境的可靠性/稳定性。
    （例如，可以在包装客户端的 DAL 中拥有更加用户友好的 API）。
*   连接池和分区感知是其他一些不错的功能。
*   能够检测到添加的任何新节点。
*   良好的支持（正如下面的院长所指出的）

任何人都可以提供一些想法吗？每个人的任何利弊以及`Cassandra Client`哪些客户可以满足我的要求也将有很大帮助。

我相信，主要是我将围绕`Astyanax client or New Datastax client that uses Binary protocol`我猜想基于我到目前为止的研究。但是没有特定的信息来支持我的研究并将其呈现给我的团队。

Astyanax 客户端和 New Datastax 客户端（使用新的二进制协议）之间的任何比较都会有很大帮助。

这将对我的研究有很大帮助，并且会从过去使用过不同客户的不同人那里获得很多关于这方面的知识。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-13T19:00:59.713

Thrift 正变得更像是一个遗留 API：

> 首先，您应该知道 Thrift API 不会获得新功能；它的存在是为了向后兼容，不推荐用于新项目。
> -[**保罗**](https://stackoverflow.com/a/15708149/1159472)

所以我会避免使用基于 Thrift 的 API（thrift 只是为了向后兼容而保留）。

如果您确实需要使用基于节俭的 API，我会选择 Astyanax。Astyanax 非常易于使用（与其他节俭 API 相比，但我个人的经验是 Datastax 的驱动程序更容易）。

所以你应该看看[Datastax 的](http://www.datastax.com/dev/blog/binary-protocol)API（[和 GitHub repo](https://github.com/datastax/java-driver)）？我不确定是否有任何已编译的 API 版本可供下载，但您可以使用 Maven 轻松构建它。此外，如果您查看 GitHub 存储库的提交日志，它会经历非常频繁的更新。

该驱动程序仅适用于 CQL3 并且是异步的，但请注意 Cassandra 1.2 是最早受支持的版本。

**性能**
Astyanax 是基于节俭的，Datastax 的驱动是二进制协议。以下是我可以在 thrift 和 CQL 之间找到的最新[基准](https://issues.apache.org/jira/browse/CASSANDRA-3634)（注意这些肯定已经过时了）。但公平地说，这些基准中显示的性能上的微小差异并不重要。

**异步支持**
Datastax 的**[异步](http://www.datastax.com/dev/blog/binary-protocol)**支持明显优于 Astyanax（Netflix[尝试实现](https://github.com/Netflix/astyanax/issues/10)它但决定不实现）。

**文档**
我真的不能反对[Netflix 的 wiki](https://github.com/Netflix/astyanax/wiki)。该文档非常好，并且更新相当频繁。他们的 wiki 包含代码示例，如果您需要查看工作中的代码，可以在源代码中找到测试。我很难找到 Datastax 驱动程序的任何文档，但是在 GitHub 存储库中提供了测试，因此这是一个起点。

也看看[这个答案](https://stackoverflow.com/questions/15701263/advantages-of-using-cql-over-thrift)（好吧..反正不是我的答案）它研究了 Thrift 和 CQL 的一些优点/缺点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-19T06:13:33.753

我会推荐 Cassandra [http://www.datastax.com](http://www.datastax.com)的 Datastax java 驱动程序。

对于类似 JPA 的支持，请尝试我的映射工具。 [http://valchkou.com/cassandra-driver-mapping.html](http://valchkou.com/cassandra-driver-mapping.html)

注释驱动 没有映射文件，没有脚本，没有配置文件。不需要 DDL 脚本。Schema 自动与实体定义同步。

使用示例：

```
 Entity entity = new Entity();
   mappingSession.save(entity);
   entity = mappingSession.get(Entity.class, id);
   mappingSession.delete(entity); 
```

在 Maven 中央可用

```
 <dependency>
      <groupId>com.valchkou.datastax</groupId>
      <artifactId>cassandra-driver-mapping</artifactId>          
    </dependency> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T17:42:48.010

我也会添加体面的支持。我们一直在堆栈溢出时发布 playORM 的答案；）。它也即将开始支持 mongodb（工作已接近完成），因此任何客户端都可以在 mongodb 或 cassandra 上运行。它有自己的查询语言，因此这个端口工作得很好。当你真的需要速度时，你也总是可以访问原始的 astyanax 界面。

此外，您关于 asynch...thrift 的注释以前不支持 asynch，因此在生成 thrift 代码时也没有客户端支持。由于情况发生了变化，我不知道有哪个客户端添加了异步内容。

我知道 hbase 虽然有一个异步客户端。无论如何，只是想我会加上我的 2 美分，以防它有一点帮助。

编辑：我最近在 cassandra-thrift 生成的源代码中，对于使用 send 和 recv() 方法的异步开发来说，它不是一个很好的 api，但你不知道何时调用 recv 方法。cassandra 用户列表上的 Aaron morton 有一个关于如何真正做到这一点的博客，但它一点也不干净……必须从 thrift 深处抓住选择器并做一些事情，这样你才能知道何时调用 recv 方法。 .相当讨厌的东西。

后来，迪恩

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T11:47:56.417

我直接使用了 Hector、Astyanax 和 Thrift。我还使用了 Python 客户端 PyCassa。

我发现重要且与众不同的功能是：

*   API 的易用性
*   复合柱支撑
*   连接池
*   潜伏
*   文档

主要问题之一是使类型正确。您希望能够传入 longs、Strings、byte[] 等。Hector 和 Astyanax 都通过使用 Serializer 对象来解决这个问题。在 Astyanax 中，您将它们指定在链的较高位置，因此您不必经常指定它们。在 Hector 中，如果您更改架构，语法通常非常笨拙且难以适应。

由于 Python 具有动态类型，因此在 PyCassa 中处理它要容易得多。由于它不是你的选择，我不会多说，但我发现它最容易使用（到目前为止）但也很慢。

复合柱支持在 Hector 中非常令人困惑。Astyanax 有注释可以大大简化这一点。

据我所知，Hector 和 Astyanax 的连接池是相同的。两者都将避免被击落的主机并发现添加到环中的新主机。这两个特性对可靠性和可维护性都至关重要。Pelops 似乎具有这些功能，但我从未尝试过。

Astyanax 和 Hector 之间的一个关键区别是延迟优化。Astyanax 能够将读取和写入请求路由到副本节点，从而可能避免额外的网络跃点。这可以将延迟减少几毫秒。

最后看一下，Astyanax 的文档很差，但现在似乎有了很大的改进。

我今天能看到的 Hector 的唯一优势是它的使用范围更广，因此错误可能更少。但是 Astyanax 有更好的功能集。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-02T18:14:18.823

我有与 Valchkou 类似的建议。DataStax java CQL驱动，很不错。我尝试了 astyanax、kundera 和 buffalosw 的 playorm。Astyanax 的级别非常低，而且有些复杂。Kundara 和 playorm 是用于 nosql 数据库的通用 ORM，设置和入门都很复杂。

Datastax api 与 JDBC 驱动程序非常相似，您必须在 DAO 中嵌入 CQL 语句并编写几行代码来加载和保存实体。为了解决这个问题，我编写了一个名为 cassandra-jom 的 java 对象映射器，它围绕 datastax cql 驱动程序构建。Cassandra-jom 注释与 JPA/Hibernate 注释非常相似，甚至可以从您的对象模型创建/更新您的列族模式。它易于使用且可靠，可用于我的其他实时 Web 应用程序。在其 github 页面上查看。

[https://github.com/w3cloud/cassandra-jom](https://github.com/w3cloud/cassandra-jom)

# javascript - jQuery动画div不工作

> ID：15983201
> 
> 赞同：0
> 
> 时间：2013-04-13T01:27:10.007
> 
> 标签：javascript, jquery, css, jquery-animate

我有这个 jsFiddle：http:
[//jsfiddle.net/uM68j/](http://jsfiddle.net/uM68j/)

当我单击其中一个链接时，该栏应滑动到顶部，但它所做的只是跳到顶部，而不是动画。我怎样才能让它动画？

我认为实际上是CSS导致了这种情况：

JS：

```
$(".nav-bar div, .nav-bar div a").click(function () {
    $(".nav-bar").animate({
        top: "0"
    }, "fast");
    return false;
}); 
```

CSS：

```
.nav-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: #ededed;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:31:13.700

您尚未`top`在 CSS 中设置值，因此您正在从`auto`to动画`0`，这不起作用。但是，您确实设置了一个`bottom`值，所以改为动画：

```
$(".nav-bar div, .nav-bar div a").click(function () {
    $(".nav-bar").animate({
        bottom: $(window).height() - 100
    }, "fast");
    return false;
}); 
```

[**小提琴**](http://jsfiddle.net/uM68j/1/)

# python - webapp2：自动重新加载代码更改

> ID：15983203
> 
> 赞同：1
> 
> 时间：2013-04-13T01:27:22.803
> 
> 标签：python, django, google-app-engine, webapp2

我正在使用 webapp2 进行 Web 开发。在我的开发环境中，如何让它自动重新加载代码更改？我正在使用`httpserver.serve(app, host='127.0.0.1', port='8008')`，但每次更改代码时，我都需要停止服务器并重新启动它。

我已经将 webapp2 与 Google 提供的 Google App Engine 启动器一起使用，并且每次进行更改时都不需要重新启动它。他们是怎么做到的呢？他们是否监视文件系统更改并`reload`在发生更改时调用模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-23T22:08:16.247

事实证明，谷歌提供的谷歌应用引擎启动器是从 Django 框架中借用自动重载代码，特别是这个：[https ://github.com/django/django/blob/master/django/utils/autoreload.py](https://github.com/django/django/blob/master/django/utils/autoreload.py)

搜索了 Stackoverflow 并有一些相关的问题提供了答案： [如何在文件更改时自动重新加载 Django？](https://stackoverflow.com/questions/19094720/how-to-automatically-reload-django-when-files-change) 它又链接到这个模块，该模块能够检测和重新加载更改的代码：[https ://github.com/tjwalch/django-livereload-server](https://github.com/tjwalch/django-livereload-server)

如果有人想详细了解我是如何做到的。

在我的启动器中：

```
import autoreloader,thread
thread.start_new_thread(autoreloader.reloader_thread, ())
...
app = webapp2.WSGIApplication(...)
def main():
    from paste import httpserver
    httpserver.serve(app, ...) 
```

自动重载器.py：

```
import sys,os,time,logging

RUN_RELOADER = True

logger = logging.getLogger(__name__)

whitelist = ['webapp2', 'paste', 'logging']

# this code is from autoreloader
_mtimes = {}
_win = (sys.platform == "win32")
_error_files = []
_cached_modules = set()
_cached_filenames = []

def gen_filenames(only_new=False):
    global _cached_modules, _cached_filenames
    module_values = set(sys.modules.values())
    _cached_filenames = clean_files(_cached_filenames)
    if _cached_modules == module_values:
        # No changes in module list, short-circuit the function
        if only_new:
            return []
        else:
            return _cached_filenames + clean_files(_error_files)

    new_modules = module_values - _cached_modules
    new_filenames = clean_files(
        [filename.__file__ for filename in new_modules
         if hasattr(filename, '__file__')])

    _cached_modules = _cached_modules.union(new_modules)
    _cached_filenames += new_filenames
    if only_new:
        return new_filenames + clean_files(_error_files)
    else:
        return _cached_filenames + clean_files(_error_files)

def clean_files(filelist):
    filenames = []
    for filename in filelist:
        if not filename:
            continue
        if filename.endswith(".pyc") or filename.endswith(".pyo"):
            filename = filename[:-1]
        if filename.endswith("$py.class"):
            filename = filename[:-9] + ".py"
        if os.path.exists(filename):
            filenames.append(filename)
    return filenames

# this code is modified from autoreloader
def check_code_changed():
    global _mtimes, _win
    for filename in gen_filenames():
        stat = os.stat(filename)
        mtime = stat.st_mtime
        if _win:
            mtime -= stat.st_ctime
        if filename not in _mtimes:
            _mtimes[filename] = mtime
            continue
        if mtime != _mtimes[filename]:
            _mtimes = {}
            try:
                del _error_files[_error_files.index(filename)]
            except ValueError:
                pass
            mname = filename.split('/')[-1].split('.')[0]
            logger.info('CHANGED %s, RELOADING %s' % (filename,mname))
            try:
                reload(sys.modules[mname])
            except:
                pass

    return False

def reloader_thread():
    while RUN_RELOADER:
        check_code_changed()
        time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-25T12:05:11.303

粘贴有自己的自动重新加载功能（可能在提供原始答案时它不存在）..

```
app = webapp2.WSGIApplication(...)
def main():
    from paste import httpserver, reload
    reload.install()
    httpserver.serve(app, ...) 
```

然后使用 Paste 提供的 shell 脚本启动你的服务器：

```
err=3
while test "$err" -eq 3 ; do
    python server.py
    err="$?"
done 
```

现在，每次您在项目中编辑文件时，服务器都会自动重新加载。

参考文档：

*   [https://github.com/cdent/paste/blob/master/paste/reloader.py](https://github.com/cdent/paste/blob/master/paste/reloader.py)
*   [https://pythonpaste.readthedocs.io/en/latest/modules/reloader.html](https://pythonpaste.readthedocs.io/en/latest/modules/reloader.html)

# ruby - 使用 strong_parameters 序列化数组

> ID：15983208
> 
> 赞同：10
> 
> 时间：2013-04-13T01:28:38.560
> 
> 标签：ruby, ruby-on-rails-4, strong-parameters

我正在尝试使用 strong_parameters gem 保存一个数组。但是我对表单如何发送我的数组有疑问。参数如下所示：

```
> params[:circuit] 
=> {"title"=>"Some title", ..., "viewable_tasks"=>{"0"=>"woop", "1"=>"dee", ...}} 
```

我的`circuit_params`功能看起来像：

```
def circuit_params
  params.require(:circuit).permit(:title, :id, viewable_tasks: { }, ... )
end 
```

我似乎无法获得允许我的参数工作的语法。我在控制台中得到的是：

```
> circuit_params
=> {"title"=>"implement plug-and-play mindshare",
 "viewable_tasks"=>{"0"=>nil, "1"=>nil, "2"=>nil}, ... 
```

在我的模型中，我有：

```
class Circuit < ActiveRecord::Base
   serialize :viewable_tasks, Array
   ...
end 
```

我注意到我可以让它与我调用的属性一起正常工作`accepts_nested_attributes_for`，所以这可能与它有关。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-04T02:29:38.893

我只是遇到了同样的问题，这是正确的语法：

```
def circuit_params
  params.require(:circuit).permit(:title, :id, {:viewable_tasks => []}, ... )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T22:23:15.770

序列化项目必须在许可参数的末尾。以我的经验（我不知道为什么），您不能在序列化的项目之后输入另一个未序列化的项目......尝试让我们知道。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T16:49:44.463

尝试使用这个：

```
def circuit_params
  params.require(:circuit).permit(:title, :id, viewable_tasks:[], ... )
end 
```

# paypal - 验证/捕获链式支付 (PayPal)

> ID：15983210
> 
> 赞同：1
> 
> 时间：2013-04-13T01:29:15.267
> 
> 标签：paypal, authorization, capture, paypal-adaptive-payments

背景：

我们经营一家将生产者和消费者联系在一起的公司。消费者请求生产者创建某些对象。生产者必须确认他们可用并且能够生产对象。我们使用链式支付收取服务费。我们（公司）是主要的，而生产者是次要的。

问题：

如果生产者无法进行生产，会发生什么？生产者可以“拒绝”付款并自动退款给消费者吗？

方法 - 身份验证/捕获：

我们可以使用 Auth/Capture 在 48 小时窗口内暂时保留消费者的资金。在这 48 小时内，制作人必须（通过按钮）确认他们是否可以完成任务。通过单击该按钮，Paypal 必须自动执行/拒绝付款。这可能吗？我对在 Paypal 环境之外有一个按钮以在 Paypal API 中启动交易的主题感到困惑。另请注意，如果 Producer 未在 48 小时内回复，则必须自动拒绝付款。

真的很难过 - 希望你们能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T01:13:54.190

我认为您要为此使用的是预先批准的付款。您将使用 Preapproval API 为付款人生成预批准配置文件。然后，当发生付款需要发生的所有事情时，您可以使用带有预批准代码的 Pay API 来相应地提交付款。

# javascript - 带有背景颜色动画的 Jquery 计数器

> ID：15983211
> 
> 赞同：0
> 
> 时间：2013-04-13T01:29:18.880
> 
> 标签：javascript, jquery, html, css

我有一个从 0 计数到指定数字的计数器 - 我认为这很完美。随着数字的增加，div 高度的背景颜色也应该向上动画到计数器的该百分比。

所以 50% Counter 应该为 div 高度的 50% 的绿色背景设置动画——所有这些都同时同步和相同的速度，同时停止和启动。

我在这里有我的小提琴代码 - 但我知道它不能完美地工作并且代码有点分开。 [http://jsfiddle.net/QGNKt/3/](http://jsfiddle.net/QGNKt/3/)

有人可以指导我清理一下吗？我在写轨道上吗？润色 JSFiddle 代码的帮助会很有帮助。我知道我可以使用我没有的代码来处理它 - 但代码似乎分开了 - 也许我现在拥有的会做 - 大声笑

```
<head>
    <style type='text/css'>
        #container {
            position: relative;
            overflow: hidden;
            height: 50px;
            width: 50px;
        }

        #green {
            height: 500px;
            width: 50px;
            background: #090;
            position: absolute;
            top: 50px;
            left: 0;
        }
    </style>

    <script type='text/javascript'>//<![CDATA[ 
        $(window).load(function () {
            function createCounter(elementId, start, end, totalTime, callback) {
                var jTarget = jQuery("#" + elementId);
                var interval = totalTime / (end - start);
                var intervalId;
                var current = start;
                var f = function () {
                    jTarget.text(current);
                    if (current == end) {
                        clearInterval(intervalId);
                        if (callback) {
                            callback();
                        }
                    }
                    ++current;
                }
                intervalId = setInterval(f, interval);
                f();
            }
            jQuery(document).ready(function () {
                createCounter("counterTarget", 0, 50, 2000, function () {
                    //alert("finished")
                })
            })
            //]]>

            $(document).ready(function () {

                $('#green').animate({
                    top: 30
                }, 2300, function () {
                    //$('#button').val('down');
                });
            });
        });//]]>  

    </script>
</head>
<body>
    <h1 style="font-size: 135px" id="counterTarget"></h1>
    <h1 class="f-l">%</h1>

    <div id="container" style="border: Red solid 1px;">
        <div id="green"></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:49:04.567

我已经整理了你的代码并整理了一下。您是否尝试过为进度条等使用预制解决方案？看看[`Twitter Bootstrap`](http://twitter.github.com/bootstrap)。

小提琴：http: [//jsfiddle.net/BenedictLewis/QGNKt/6/](http://jsfiddle.net/BenedictLewis/QGNKt/6/)

# java - 如何在 Android 应用程序中显示文本？

> ID：15983213
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:29:24.237
> 
> 标签：java, android, parsing

我的一个课程有一个项目，让我们创建了一个圣经搜索程序。我们的项目有一个开放式的最后部分，允许我们做一些事情来改进我们的项目。我想让它成为一个android应用程序，但我不太了解android gui。我在 Eclipse 图形布局中有一个输入字段和按钮，但我不知道如何将按钮链接到方法。另外，我将如何显示结果？在我有一个 Jeditor 窗格之前，我使用 html 将每个结果的表格一起解析。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:36:21.807

您将像这样将代码绑定到 XML...

```
public class YourActivity extends Activity {

    TextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.idOfYourMainLayoutFile);
        textView = (TextView) findViewById(R.id.idOfYourTextViewInXML); 
        Button button = (Button) findViewById(R.id.idOfYourButtonInXML);
        button.setOnClickListener(new View.onClickListener() {
            @Override
            onClick(View v) {
                textView.setText("some bible verse");
                // ... do something when the button is clicked
            }
        });
        // other code in onCreate()
    }
} 
```

# ember.js - 将 CollectionView 绑定到 ArrayController

> ID：15983217
> 
> 赞同：1
> 
> 时间：2013-04-13T01:29:39.813
> 
> 标签：ember.js

我有一个简单的 ember 数据模型，称为任务。当我路由到 时`/tasks`，我可以遍历每个任务以通过我的 TasksController、模板和自动生成的视图创建所有任务的列表：

```
{{#each task in filteredContent}}
  {{ partial "taskItem" }}
{{/each}} 
```

`filteredContent`是查看内容的属性和提供`App.Task.find()`.

这很好用，但现在我想在我的任务列表中添加更多功能，即通过 jQuery 的可排序插件进行拖放排序。由于我想封装显示任务的逻辑，所以我创建了一个 TasksListController：

```
App.TasksListController = Ember.ArrayController.extend {
  needs: ['tasks']
  contentBinding: 'controllers.tasks.filteredContent'
} 
```

一个任务列表视图：

```
App.TasksListView = Ember.CollectionView.extend {
  tagName: 'ul'
  classNames: ['tasks-list']
  itemViewClass: App.TasksListItemView

  didInsertElement: ->
    this._super();
    this.$().sortable().disableSelection();
} 
```

和一个TasksListItemView：

```
App.TasksListItemView = Ember.View.extend {
  templateName: 'tasks-list-item'
  classNames: ['task-item']
} 
```

如果我`console.log this.get 'controller.firstObject'`在`didInsertElement`方法中插入，输出是正确的，但`{{render tasks-list}}`在 Tasks 模板中（如果我理解正确，在 TasksController 下操作）似乎总是没有内容。我遇到了一些使用 CollectionView 的例子，但它们似乎是 RC1 之前的，并建议做类似的事情`{{view 'App.TasksListView' contentBinding=filteredContent'}}`（这似乎也不起作用）。

在这种情况下，使用`render`or `view`helper 是否合适？这是解决这个问题的正确方法，还是有更好的 Ember 模式可以遵循？

我正在使用 Ember.js RC2 和 ember-data DS.FixtureAdapter（修订版 12）。[http://jsfiddle.net/superlou/sUUXj/](http://jsfiddle.net/superlou/sUUXj/)提供了一个简化的小提琴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T23:31:36.793

结果是相对简单的。CollectionView 不会自动从控制器继承内容，因此必须修改视图以包含：

```
App.TasksListView = Ember.CollectionView.extend {
    contentBinding: 'controller'
    ... 
```

然后可以在模板中访问内容，如下所示：

```
{{#linkTo task view.content}}
    {{#with view.content}}
        <div class="task-item">
            {{name}}
        </div>
    {{/with}}
{{/linkTo}} 
```

非常感谢[Ember Discuss](http://discuss.emberjs.com/t/binding-collectionview-to-an-arraycontroller/940/6)的 panoptic 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T18:46:21.273

我写了一个 jsbin 来展示如何轻松实现它。

[http://emberjs.jsbin.com/yideji/2/edit](http://emberjs.jsbin.com/yideji/2/edit)

```
App.TasksListView = Ember.CollectionView.extend({
  itemViewClass: App.TasksListItemView,

  // A `CollectionView` expects its data in the `content`
  // property. But the route will set the `controller` on the view, not the `content`.
  // Using bindings allows to make that transparent to the developer.
  contentBinding: 'controller'
}); 
```

您可以添加的好处是在您的`item`视图中：

```
App. TasksListItemView = Ember.View.extend({      
  // A view applys its `context` to the template. The `context` is usually its `controller`.
  // In the case of an item of a `CollectionView`, `context` isn't set, but `content` is.
  // So we just bind `context` to `content` so we don't have to write `view.content.myValue`
  // but `myValue` in the template
  contextBinding: 'content'
}) 
```

添加这将允许您简化模板：

```
{{#linkTo task this}}
    <div class="task-item">
        {{name}}
    </div>
{{/linkTo}} 
```

# objective-c - Objective C，手码申请表？可能的？

> ID：15983220
> 
> 赞同：0
> 
> 时间：2013-04-13T01:30:25.770
> 
> 标签：objective-c, user-interface

所以我正在学习Objective C，并使用Mac Xcode 编译器。来自 Java，我习惯于手动编写 JFrame，而不是使用表单编辑器。我喜欢 Xcode 中的编辑器等等，但想知道是否有办法将代码按钮和文本框交给应用程序“表单”？从什么样的项目开始？你会从某种 FormClass 开始吗？如果是这样，如何设置interface.header。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:43:59.523

Objective C 中没有 Form 的概念。正如对您问题的评论中提到的，它是关于 View Controllers/Views 的。

是的，可以手动编码按钮和文本框。您需要在类的实现文件中执行此操作。我假设您知道 Objective C 的 .h 和 .m 是什么。

所以，要编写一个按钮，你可以这样写：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
         action:@selector(aMethod:)  //Method you want to call when a user taps your button
         forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Sample Button" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[view addSubview:button]; 
```

最终，在对按钮进行编码后，将其作为子视图添加到主视图中。请注意，Objective C 支持嵌套视图。因此，您可以在视图中添加一个进一步包含子视图的视图。

# javascript - 我怎么知道点击了多少次？

> ID：15983221
> 
> 赞同：-2
> 
> 时间：2013-04-13T01:30:29.850
> 
> 标签：javascript, jquery

我正在尝试听被点击 x 次的东西。

我怎样才能做到这一点？

页面上将有两个元素，我将监听这两个元素的点击。

我试图用伪代码做的是这样的：

```
$(document).ready(function(){
    $('#element1').click(function(){
       //do something to confirm click
    });
    $('#element2').click(function(){
        //do something to confirm click of element 2
    });

    if(element1.numberOfTimesClicked() == 2)
        //do something
    if(element2.numberOfTimesClicked() == 4)
        //do something
}); 
```

当我输入上面的内容时，我意识到我将如何做到这一点是有一个计数器变量并在每次点击时增加它，然后将计数器变量的值与一个数字进行比较。

这是一个好方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T01:32:03.797

```
var counter = 0;
$('#element1').click(function(){
   counter++;
}); 
```

# algorithm - 用于替换无限流中出现的令牌的有效算法

> ID：15983225
> 
> 赞同：1
> 
> 时间：2013-04-13T01:31:46.837
> 
> 标签：algorithm, stream, hashmap, hashtable

给定一个字符串映射，如下所示：

```
{'ABC': 'BCD', 'key': 'book',........} 
```

以及无限的文本流，例如：

```
"Sally had a key and a book with the ABC..." 
```

用对应的值替换与字符串映射中的键匹配的每个标记的有效算法是什么？

输出：

```
"Sally had a book and a book with the BCD..." 
```

除了简单地拆分传入的标记并查询字符串映射是否包含（O（1）操作）之外，还有什么更好的方法吗？

代码将驻留在网络服务器上——用户获得转换输出的速度越快越好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:14:28.457

[如果您使用Aho-Corasick 字符串匹配算法](https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，则无需将文本拆分为标记即可执行此操作。只需让叶节点上的输出状态返回替换字符串。

这可能比将文本拆分为标记更快，因为您不必管理字符串。它逐个字符。您必须测试比使用哈希表查找快多少。这也比简单的哈希表查找更难实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:19:42.300

我猜您实际上是在寻找某种高级语言（node.js？python？）的有效解决方案；一般来说，如果您使用这种语言，建议您使用该语言本机支持的数据结构，这将是 Python 中的字典和 Javascript 中的对象。你可能已经知道了。

如果您使用较低级别的语言编写此代码，您可能希望选择一种优化，它不涉及为每个单词不必要地构造字符串对象，假设绝大多数单词不会受到替换的影响。一种方法是使用逐个字符的散列算法，并在您读取输入字符时计算它，每次开始一个新单词时都会重置。当您到达单词的末尾时，您可以检查`O(1)`某个目标是否具有该哈希值的平均时间。如果没有，请继续阅读。只要保留当前单词，就可以定期将输入缓冲区刷新到输出。

如果目标很长（可能不是这种情况），您可以通过存储目标字符串的前缀（或某些前缀）的哈希值来避免保留当前单词。然后，当您的输入缓冲区用尽时，您可以检查当前哈希值是否与适当长度的前缀之一的哈希值匹配。偶尔检查一下这种形式也可以解决基于故意创建哈希冲突的 DoS 攻击（尽管在您的情况下，这不是什么大问题；攻击者所能做的就是强迫您对每个单词进行全文比较; 他们无法将自己的单词添加到哈希表中。）

但是，如果我用 C 之类的低级语言编写此代码，我可能会将目标词放入 trie，并跟踪每个输入字符的 trie。只要在 trie 中没有匹配，就可以刷新到当前单词的末尾；这很可能在所有不匹配的单词中很早就发生，甚至可能在它们的第一个字符上发生。尽管 trie 通常需要比散列映射更多的存储空间（甚至可能需要比 BST 更多的存储空间），但也有存储压缩技术（如果您可以提前设置数据结构）并且能够提前停止检查单词可能是赢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T01:52:14.870

好吧，您正在寻找的算法至少与您正在阅读的令牌数量是线性的（因为充其量您将对流中的每个令牌执行恒定数量的操作），所以有'那里不会有任何改进，因为我假设您的输入流中没有特殊的冗余或模式（我们可以滥用它们来提高效率）。

至于映射，最有效的解决方案可能是映射键上的二叉搜索树——对于 n 个项目的映射，我们只需将每个标记与 log n 个不同的键进行比较。

如果对你的问题没有任何进一步的限制，我怀疑你会得到比这更有效的方法——m 个令牌和 n 个键值对的映射的最坏情况复杂度 O(m log n)。

这很不错，但不是很棒；如此重要的问题：有什么方法可以利用您的数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T14:47:17.677

其他人提到了二进制搜索和哈希映射。我怀疑有一个稍微快一点的方法，因为你不关心内存使用的效率。对您要查找的数据进行桶排序并与之进行比较。这应该会加快比较速度——而不是散列完整的输入然后匹配，它总是在寻找一个完全匹配的。

鉴于地图，`{ABC, ABD, DEF, GH}`您的数据结构看起来像......

```
pos:                     1                   2
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6   <-- slot 26 is reserved for 
val: A 0 0 D 0 0 G 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0       "end of map token"
     |     |     |
     B     E     H   <-- sub buckets don't show all buckets as in the top level, but they
    / \    |     |       are all there.
   C   D   F     END
  /    |    \
END   END   END 
```

扩展您接受的完整字符集，或每个字节 255 个可能的值。然后，当您获得输入时，您可以测试每个字符。

示例 1：

```
Input: ABC
    1: look up location 'Z' - 'A' = 0
    2: is there anything in this bucket? yes
    3: look in sub-buckets.  
    4: Is there anything in the 'Z'- 'B' bucket? yes
    5: look in sub buckets.
    6: Is there anything in the 'Z' - 'C' bucket? yes
    7: look in sub-buckets
    8: reached end of input token.  Is end of map bucket is marked? yes
    9: match found 
```

示例 2：

```
Input: ABCD  (input token longer than closest match in map)
    1: look up location 'Z' - 'A' = 0
    2: is there anything in this bucket? yes
    3: look in sub-buckets.  
    4: Is there anything in the 'Z'- 'B' bucket? yes
    5: look in sub buckets.
    6: Is there anything in the 'Z' - 'C' bucket? yes
    7: look in sub-buckets
    8: Is there anything in the 'Z' - 'D' bucket? no
    9: match not found 
```

示例 3：

```
Input: ABE
    1: look up location 'Z' - 'A' = 0
    2: is there anything in this bucket? yes
    3: look in sub-buckets.  
    4: Is there anything in the 'Z'- 'B' bucket? yes
    5: look in sub buckets.
    6: Is there anything in the 'Z' - 'E' bucket? no
    7: match found 
```

# c# - Dialing a network service number like #100*3# by AT Command

> ID：15983230
> 
> 赞同：0
> 
> 时间：2013-04-13T01:32:04.557
> 
> 标签：c#, at-command

How to dial a network service number like #100*3# by AT Command? And what is the correct syntax in C# because when I try to dial it, the application considers it as a phone number and I hear a message that means that I can't dial this number.

Note: the code is successfully running and I can successfully dial any phone number but the problem is in the network service numbers.

I tried the following code:

```
sp.WriteLine("AT+CUSD=1,#"+100+"*3#,15"+Environment.NewLine ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:43:33.840

The correct syntax for the `AT+CUSD` command is specified in [27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm):

```
AT+CUSD=[<n>[,<str>[,<dcs>]]] 
```

and the `<str>` parameter is a string which **must** be enclosed in double quotes. From [V.250](http://www.itu.int/rec/T-REC-V.250-200307-I/en):

> String constants shall be bounded at the beginning and end by the double-quote character

So your code should be

```
sp.WriteLine("AT+CUSD=1,\"#100*3#\",15\r"); 
```

Update: You should never use Environment.NewLine to terminate the command line, it should just be `\r` always.

# java - 使用来自 JComboBox 的计算更新 JTextField

> ID：15983231
> 
> 赞同：0
> 
> 时间：2013-04-13T01:32:17.213
> 
> 标签：java, swing, jtextfield, jcombobox

`JTextField`在我的代码中，一旦有人单击任一组合框中的选项，我就会尝试在总价格计算中发布。我不想要名称，即“意大利辣香肠”，而是实际的总计算。现在我必须单击文本框并按 Enter 更新数据。

如何`JTextField`使用计算更新`JComboBox`？

```
import java.awt.* ;

import javax.swing.* ;
import java.awt.event.* ;

 class JPizza extends JFrame implements ActionListener
 {
    private static final long serialVersionUID = 1L;

    public static void main(String[] args)
        {
            JPizza myFrame = new JPizza();
            myFrame.setVisible(true);
        }

    private static final int WIDTH = 250;
    private static final int HEIGHT = 300;
    private static final int X_ORIGIN = 200;
    private static final int Y_ORIGIN = 100;

      private static final double smallPizzaPrice = 7.00;
      private static final double mediumPizzaPrice = 9.00;
      private static final double largePizzaPrice = 11.00;
      private static final double extraLargePizzaPrice = 14.00;
      private static final int smallPizzaSize = 0;
      private static final int mediumPizzaSize = 1;
      private static final int largePizzaSize = 2;
      private static final int extraLargeSize = 3;

      private static final double cheese = 0.0, pepperoni = 1.00, peppers = 1.00, sausage = 1.00, olives = 1.00;
      private static final int cheesePlace = 0, pepperoniPlace = 1, peppersPlace = 2, sausagePlace = 3, olivesPlace = 4;

      int states = 0 ;
      double totalPrice = 0.0;   
      double pizzaSizePrice = smallPizzaPrice ;
      double toppingPrice = 0.0;

    //Toppings & Panel
    JComboBox<String> pizzaTopping;
    JPanel comboboxPanel2;

    //Pizza Size & Panel
    JComboBox<String> pizzaSize;
    JPanel comboboxPanel;

    //Price Display Field and Panel
    JTextField calculate;
    JPanel messagePanel;

    public JPizza()
    {
        super("Tower of Pizza");      

        JLabel title = new JLabel("Tower of Pizza");
        add(title);

        pizzaSize = new JComboBox<String>();
        pizzaSize.addItem( "Small" );
        pizzaSize.addItem( "Medium" );
        pizzaSize.addItem( "Large" );
        pizzaSize.addItem( "Extra Large" );
        pizzaSize.setSelectedIndex(0);
        pizzaSize.addActionListener(this);

        pizzaTopping = new JComboBox<String>();
        pizzaTopping.addItem( "Cheese" );
        pizzaTopping.addItem( "Pepperoni" );
        pizzaTopping.addItem( "Peppers" );
        pizzaTopping.addItem( "Sausage" );
        pizzaTopping.addItem( "Olives" );
        pizzaTopping.setSelectedIndex(0);
        pizzaTopping.addActionListener(this);

        calculate = new JTextField(10);   
        calculate.addActionListener(this); 

        Container contentPane = getContentPane();
        GridLayout contentpaneLayout = new GridLayout(5,0,10,10);
        contentPane.setLayout(contentpaneLayout);

        comboboxPanel = new JPanel();
        GridLayout comboboxPanelLayout = new GridLayout(2,0);
        comboboxPanel.setLayout(comboboxPanelLayout);
        comboboxPanel.add(pizzaSize);
        contentPane.add(comboboxPanel);

        comboboxPanel2 = new JPanel();
        GridLayout comboboxPanelLayout1 = new GridLayout(2,0);
        comboboxPanel2.setLayout(comboboxPanelLayout1);
        comboboxPanel2.add(pizzaTopping);
        contentPane.add(comboboxPanel2);

        messagePanel = new JPanel();
        GridLayout messagePanelLayout = new GridLayout(2,0);
        messagePanel.setLayout(messagePanelLayout);
        messagePanel.add(calculate);
        contentPane.add(messagePanel);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(X_ORIGIN, Y_ORIGIN, WIDTH, HEIGHT);
        setResizable(false);
    }

    public void actionPerformed(ActionEvent e)
    {            
        Object source = e.getSource();

                 int pizzaSiz = (int)pizzaSize.getSelectedIndex();  

                 if (source == calculate){

                 if (pizzaSiz == smallPizzaSize){                  
                    pizzaSizePrice = smallPizzaPrice;                   
                  }
                 else if (pizzaSiz == mediumPizzaSize){
                      pizzaSizePrice = mediumPizzaPrice ;

                  }
                 else if (pizzaSiz == largePizzaSize){
                      pizzaSizePrice =  largePizzaPrice;
                  }
                 else if (pizzaSiz == extraLargeSize){
                     pizzaSizePrice =  extraLargePizzaPrice;
                  }

                 int pizzaTop = (int)pizzaTopping.getSelectedIndex(); 

                 if(pizzaTop == cheesePlace ){
                     toppingPrice = cheese;
                 }
                 else if(pizzaTop == pepperoniPlace){
                     toppingPrice = pepperoni;
                 }
                 else if(pizzaTop == peppersPlace){
                     toppingPrice = peppers;
                 }
                 else if(pizzaTop == sausagePlace){
                     toppingPrice = sausage;
                 }
                 else if(pizzaTop == olivesPlace){
                     toppingPrice = olives;      
                 }

                 totalPrice = pizzaSizePrice;  
                 totalPrice +=toppingPrice;
                 calculate.setText("Total Price: $" + totalPrice);             
             }

    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:36:03.007

您通过限制 actionPerformed 对 if 测试的作用来故意限制您的代码：

```
if (source == calculate){ 
```

摆脱它，该方法将在调用 actionPerformed 时进行计算。在尝试计算之前，您最好确保两个组合框都有有效的选择。您可以通过获取组合框的选定索引并测试它们是否 >= 0（不是 -1）来测试它们。

# javascript - 在页面打开时运行 Javascript

> ID：15983237
> 
> 赞同：2
> 
> 时间：2013-04-13T01:34:16.473
> 
> 标签：javascript, html, onload

我有一个小问题，我想在页面打开后立即运行 javascript，但它对我不起作用。在我尝试过的许多论坛和教程中，他们建议在我的情况下使用 onload 函数：

```
<body onload="loadPage()"> 
```

所以我的脚本被称为 loadPage，但是它不起作用......而不是打开其中一个页面（if 语句中的链接，else if 语句） - 只有一个空白页面。任何帮助都非常感谢！

```
<%@ include file="header.jsp" %> 
<%@ page import="java.sql.*" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>
<%@ page import="java.util.ArrayList" language="java" %>
<%@ page import="java.text.MessageFormat" language="java" %>
<%@ page import="java.util.List" language="java" %>
<%@ page import="java.util.ArrayList" %>

<%
    String place = request.getParameter("place");
%>
<html>
<head>
<script type="text/javascript">
function loadPage() 
{
    if( <%=place%> == "birr")
    {
       window.open("http://localhost:82/IrishClimateData/Birr.jsp");
    }

    ...more else if statemens here...   

    else if( <%=place%> == "Shannonairport")
    {
       window.open("http://localhost:82/IrishClimateData/Shannon airport.jsp");
    }
}
</script>
</head>
<body onload="loadPage()">  
</body>
</html> 
```

我尝试了不同的选项并执行了以下操作：

```
var placeName = "<%=place%>";
if( placeName == "birr") 
```

我还必须补充；在函数结束时。我认为 apache tomcat 实际上会将它指向我 - 就像通常那样，但它没有......无论如何感谢所有人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:21:45.653

删除服务器端代码并​​简化 loadPage 函数后，它看起来会运行良好。这是一个活生生的例子：http: [//jsbin.com/ozetah/2/ ?place=birr](http://jsbin.com/ozetah/2/?place=birr)

实时示例代码：

```
<html>
<head>
<script type="text/javascript">
function loadPage() {
  // code to replicate server side capture of GET parameter
  var place = /place=(.*?)(?:$|&)/.exec(document.location.search);
  if( place.length >1 ) { place = place[1]; }

  if( place == "birr") {
    window.open("http://localhost:82/IrishClimateData/Birr.jsp");
  } else if( place == "Shannonairport") {
    window.open("http://localhost:82/IrishClimateData/Shannon airport.jsp");
  } else {
    alert('place param of "'+place+'" doesn\'t match');
  }
}
</script>
</head>
<body onload="loadPage()">  
</body>
</html> 
```

由于所有这些都有效并且您在代码中没有看到任何错误，因此我将检查 html 输出以确保您的服务器端代码输出您所期望的。您可以取出所有服务器端代码并​​重新开始添加片段，看看是什么破坏了它。

# asp.net-mvc - 使用局部视图时忽略原始模型声明？

> ID：15983240
> 
> 赞同：0
> 
> 时间：2013-04-13T01:35:05.253
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4

我的每个视图都需要一个导航栏，该导航栏位于名为 _NavigationPartial 的局部视图中。此部分视图使用

```
@model IEnumerable<ProOptInteractive.Models.ProductCategory> 
```

并且此导航栏需要它才能运行。但是，在我的某些视图中，我声明了其他模型，它们覆盖了局部视图中的模型，并且在尝试在浏览器中打开这些视图时给了我一个错误：

```
@model ProOptInteractive.Models.ProductCategory <!-- this is incompatible! -->

@Html.Partial("_NavigationPartial") 
```

如何设置局部视图以忽略视图中的原始模型声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:05:46.683

您应该使用允许您将模型传递给它的重载。如果我没记错的话 Html.Partial 会将父模型传递给局部视图。如果你这样做`@Html.Partial("_NavigationPartial", new[]{Model})`应该满足你对 IEnumerable 模型的部分要求。

您不能让视图忘记它的模型类型，您唯一能做的就是确保将正确的模型类型传递给它。

# chef-infra - 在 Vagrant 配置期间重新启动 VM

> ID：15983241
> 
> 赞同：4
> 
> 时间：2013-04-13T01:35:36.380
> 
> 标签：chef-infra, vagrant

我正在尝试设置 vagrant + chef 配置。其中一项配置操作要求我更改服务器上的语言环境。当我更改语言环境时，我必须重新启动 VM 或重新登录才能生效。知道在 Vagrant 中是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T15:38:34.727

我写了一个简单的provisioner来做到这一点。

[https://gist.github.com/ukabu/6780121](https://gist.github.com/ukabu/6780121)

这适用于 Windows Guest 和 VirtualBox 提供程序（可以很容易地适应其他操作系统或提供程序）。

有了它，您可以：

```
config.vm.provision :chef_solo do |chef|
  # run list for stuff that needs to be done before a reboot
end
config.vm.provision :reboot
config.vm.provision :chef_solo do |chef|
  # run list for stuff that needs to be done after a reboot
end 
```

# jquery - 简单的 Wordpress AJAX 分页

> ID：15983244
> 
> 赞同：7
> 
> 时间：2013-04-13T01:36:13.007
> 
> 标签：jquery, ajax, wordpress, pagination

我正在使用下面的循环 + jQuery 加载下一组页面，它在第一次单击时起作用，但是当加载下一页并单击“较新的帖子”时，它会重新加载整个页面。有任何想法吗？

```
<div id="content">
    <?php
$new_query = new WP_Query();
$new_query->query('post_type=post&showposts=1'.'&paged='.$paged);
?>

<?php while ($new_query->have_posts()) : $new_query->the_post(); ?>
<?php the_title(); ?>

<?php endwhile; ?>
    <div id="pagination">
    <?php next_posts_link('&laquo; Older Entries', $new_query->max_num_pages) ?>
    <?php previous_posts_link('Newer Entries &raquo;') ?>
    </div>
</div><!-- #content -->

<script>
$('#pagination a').on('click', function(event){
event.preventDefault();
var link = $(this).attr('href'); //Get the href attribute
$('#content').fadeOut(500, function(){ });//fade out the content area
$('#content').load(link + ' #content', function() { });
$('#content').fadeIn(500, function(){ });//fade in the content area

});
</script> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T01:43:10.807

您正在使用 jQuery 的`load()`方法插入内容，这是 的快捷方式`$.ajax`，它当然会动态插入内容。

动态内容需要将事件委托给非动态父级，这是 jQuery 轻松实现的`on()`

```
jQuery(function($) {
    $('#content').on('click', '#pagination a', function(e){
        e.preventDefault();
        var link = $(this).attr('href');
        $('#content').fadeOut(500, function(){
            $(this).load(link + ' #content', function() {
                $(this).fadeIn(500);
            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-12T21:38:16.933

我使用了 adeneo 的解决方案，并进行了一些小的调整。

1.  我的分页在我想要加载的容器之外~~，所以我对分页内容执行了单独的调用~~。根据评论，我更新了代码以进行单个 Ajax 调用，过滤返回的数据以检索和更新所需的元素。
2.  我的分页包含所有链接，即使是当前页面。如果单击的元素是活动页面，则执行 Ajax 请求是没有意义的，因此我添加了逻辑以仅针对其父列表项元素没有`.disabled`该类的分页链接。
3.  每次我加载新内容时页面都会跳转，因为它使用了淡出/入（`display: none;`在不透明度动画完成后设置）。相反，我手动为不透明度设置动画，这限制了高度波动的量。

这是更新的代码：

```
$('#content').on('click', '#pagination :not(.disabled) a', function(e){
    e.preventDefault();
    var link = $(this).attr('href');
    $.post( link, function( data ) {
        var content = $(data).filter('#content');
        var pagination = $(data).filter('#pagination');
        $('#pagination').html(pagination.html());
        $('#content').animate(
            {opacity: 0},
            500, 
            function(){
                $(this).html(content.html()).animate(
                    {opacity: 1},
                    500
                );
            }
        );
    });
}); 
```

# java - 如何返回数组项的数量？为什么不幸停止了？

> ID：15983250
> 
> 赞同：0
> 
> 时间：2013-04-13T01:36:51.337
> 
> 标签：java, android, arrays, textview

我正在尝试在 TextView 中返回多个数组元素。当我运行它时，应用程序在 android 中不幸停止了。编码不好还是需要添加一些代码？我只添加下面的代码。我不编辑或编程其他人。就像这个 New Project>Android Appliac..Pro..> Next >next... 然后我只在下面编辑了 onCreate 函数。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout layout = new LinearLayout(this);
    String[] btn = { "Google", "Yahoo", "Twitter" };
    TextView txt=new TextView(this);
    txt.setText(btn.length);
    layout.addView(txt);
    setContentView(layout);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:41:02.990

这个：

```
 txt.setText(btn.length) 
```

`btn.length`返回一个整数。这是试图将文本值设置为您可能没有的字符串资源。尝试：

```
 txt.setText("" + btn.length) 
```

# gwt - GWT - 向 HighCharts 添加一个按钮

> ID：15983251
> 
> 赞同：0
> 
> 时间：2013-04-13T01:36:57.543
> 
> 标签：gwt, highcharts, gwt-highcharts

快速提问。

是否可以在图表的某处添加一个简单的按钮（最好是在图例的底部）在 HighCharts 中以某种方式做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:59:49.870

I'm not sure how to to this in GWT wrapper, but in Highcharts, you can create buttons using renderer, see in source code:

```
/**
 * Create a button with preset states
 * @param {String} text
 * @param {Number} x
 * @param {Number} y
 * @param {Function} callback
 * @param {Object} normalState
 * @param {Object} hoverState
 * @param {Object} pressedState
 */
button: function(...) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:12:48.377

我找不到它的确切 api。然而，Highchart Demo 在图表的右上角显示了一个下拉菜单。您需要在他们的源代码中进行调查并尝试您的解决方案。

![在此处输入图像描述](https://i.stack.imgur.com/QH7hP.png)

# node.js - Node.JS web worker 内存泄漏？

> ID：15983254
> 
> 赞同：0
> 
> 时间：2013-04-13T01:37:51.433
> 
> 标签：node.js, memory-leaks, web-worker

我有一个 Node.JS 应用程序，它产生了许多 Web Worker。

我看到看起来像是缓慢的内存泄漏，但我不认为这是我的代码。即使我完全注释掉代码，并且我只有一个接受消息并且不返回任何内容的 web worker，内存泄漏仍然会发生！

问题似乎是我正在发送大消息。通常它们是 1MB 或更多的 JSON。最终，Workers 从 6MB 膨胀到了 25MB，我不确定它是否会止步于此。

这是 Node.JS 网络工作者的一个已知问题吗？有解决方法吗？

工作人员通过池抽象进行管理。我应该不时杀死它们并产生新的吗？

编辑：我在想可能是我使用的特定池库[backgrounder](https://github.com/jolira/backgrounder)。不过，代码中没有明显的罪魁祸首。

# c - C中的动态大小数组

> ID：15983255
> 
> 赞同：0
> 
> 时间：2013-04-13T01:37:57.377
> 
> 标签：c

因此，如果我有类似于此的动态（IE 通过 for 循环迭代）...

```
for (i=0; i <= SCREENWIDTH; i++)
{
} 
```

我想创建一个大小为 SCREENWIDTH 的数组并向其中添加条目。有没有办法我可以做到这一点？

所以PSUEDO明智的是......

```
int[SCREENWIDTH] e = {1,2,....SCREENWIDTH}
for (i=0; i <= SCREENWIDTH; i++)
{
  e[i]= i;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:50:55.243

你可以这样做：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
   int SCREENWIDTH = 80 ;
   int *arr = (int *)malloc( sizeof(int) * SCREENWIDTH ) ;

   if( NULL != arr )
   {
      for( int i = 0; i < SCREENWIDTH; ++i )
      {
         arr[i] = i ;
      }

      for( int i = 0; i < SCREENWIDTH; ++i )
      {
         printf( "%d, ", arr[i]) ;
      }
      printf("\n") ;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:55:19.583

在 C 中，您可以使用 malloc 创建动态数组。你的例子：

```
int * e = (int*)malloc(SCREENWIDTH*sizeof(int)); 
```

一旦以这种方式动态分配内存。您可以做的下一个想法是使用循环初始化数组。

您访问循环的方式有误。在 C 中，索引从 0 开始到 n-1。

示例：在您的情况下，您只能从 e[0] 访问到 e[SCREENWIDTH-1]。

因此，请通过使 i < 屏幕宽度来更正您的循环。所以，这将是

```
int *e =  (int*)malloc(SCREENWIDTH*sizeof(int));
for (i=0; i < SCREENWIDTH; i++)
{
  e[i]= i;
} 
```

# c - 一个函数的多个定义，这里先定义

> ID：15983256
> 
> 赞同：2
> 
> 时间：2013-04-13T01:37:59.353
> 
> 标签：c, definition

我正在为一个大学项目开发​​扫描仪/解析器，我遇到了这个错误：

> stack.c 91：'[stack.c 中的所有函数]'的多重定义
> stack.c 91：首先在这里定义

由于某种原因，我似乎无法弄清楚编译器似乎在告诉我我已经在同一个地方多次定义了同一个函数。

我得到了一些框架代码和一个生成文件，因此我完全自己编写的文件（stack.c、stack.h）和其余代码之间肯定存在某种不正确的通信。

*   生成文件：http: [//pastebin.com/0Tx1Wixg](http://pastebin.com/0Tx1Wixg)
*   symtab.c：[http ://pastebin.com/M5gg0b3n](http://pastebin.com/M5gg0b3n)
*   symtab.h：[http ://pastebin.com/NvkZdWTy](http://pastebin.com/NvkZdWTy)
*   stack.h：[http ://pastebin.com/qT8fXEK0](http://pastebin.com/qT8fXEK0)
*   stack.c：[http ://pastebin.com/FfPa06ys](http://pastebin.com/FfPa06ys)

我已经在#includes 周围移动并弄乱了一个多小时的makefile，并且遇到了越来越多的问题。这个应该怎么设置？

`stack.c`和`stack.h`是我写的小文件，用于`symtab.c`和`symtab.h`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T02:15:14.703

在`symtab.h`，您正在`#include`获取源文件`stack.c`。不要那样做，多重定义问题应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:02:17.300

我终于得到了（看似）工作的东西。作为 user315052，我从 .h 文件中删除了所有 #include，并将它们放入 .c 文件中。然后我从 symtab.h 收到关于在 stack.h 中定义的类型的错误，所以我在 symtab.h 中 #included stack.h 并且它现在似乎可以工作（或至少可以编译）。

# java - javax.net.ssl.SSLException：无法识别的 SSL 消息，明文连接

> ID：15983260
> 
> 赞同：11
> 
> 时间：2013-04-13T01:39:00.130
> 
> 标签：java, spring, jakarta-mail

我正在尝试从 spring 应用程序发送邮件。我已经包含了所有的 jar 文件，但它显示了这个异常：

```
javax.mail.MessagingException: Exception reading response;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at com.sun.mail.smtp.SMTPTransport.readServerResponse(SMTPTransport.java:1611)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1369)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)
    at javax.mail.Service.connect(Service.java:310)
    at javax.mail.Service.connect(Service.java:169)
    at javax.mail.Service.connect(Service.java:118)
    at javax.mail.Transport.send0(Transport.java:188)
    at javax.mail.Transport.send(Transport.java:118)
    at org.symb.leavemanagement.mail.SampleMail.sentMail(SampleMail.java:65)
    at org.symb.leavemanagement.controller.AdminController.processRegistratingUser(AdminController.java:196)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:541)
    at sun.security.ssl.InputRecord.read(InputRecord.java:374)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1294)
    at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:848)
    at sun.security.ssl.AppInputStream.read(AppInputStream.java:102)
    at com.sun.mail.util.TraceInputStream.read(TraceInputStream.java:110)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
    at com.sun.mail.util.LineInputStream.readLine(LineInputStream.java:88)
    at com.sun.mail.smtp.SMTPTransport.readServerResponse(SMTPTransport.java:1589)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-14T22:08:12.200

您正在尝试与非 SSL 端点建立 SSL 连接。如果你改变它应该工作。

我发现大多数关于将电子邮件与 Outlook/Thunderbird/etc 集成的教程都将 SSL/TSL 称为非 SSL 连接。一般来说，我在那里发现（这可以改变，但这是常态）只有 smtp 端口 465 是 SSL。587 是 TSL（无 SSL），25 是普通的。

# php - 使用 php 将项目添加到 json

> ID：15983264
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:39:36.460
> 
> 标签：php, json

我很困惑，无法将新对象正确添加到 json 对象：

```
$old_json = json_decode(file_get_contents("file.json"), true);

$new_json = ' { "1" : "111", "2" : "222" } ';
$old_json[] = $new_json;

file_put_contents("file.json", stripslashes(json_encode($old_json))); 
```

它将用新记录替换旧记录，但我只想添加新记录。我希望它编写具有以下内容的新 json 文件：

```
[{"a":"aaa","b","bbb"},{"1":"111","2":"222"}] 
```

请告诉我如何获得正确的结果。另外请告诉我如何在 json_decode() 之后访问新的 json 对象

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:54:08.413

当使用[json_decode](http://php.net/manual/en/function.json-decode.php)`json`将字符串从转换为 a时，此过程会生成. 简而言之，您不想添加到对象中*（**[这就是为什么](https://stackoverflow.com/questions/2652659/add-properties-to-stdclass-object-from-another-object)**）*。尽管您可以[操纵](https://stackoverflow.com/questions/4497221/how-can-we-manipulate-std-class-in-php)然后重现一个新对象。`php variable``stdClass Object``stdClass Object``json`

# version-control - GitHub 多个存储库与多个环境的分支

> ID：15983268
> 
> 赞同：4
> 
> 时间：2013-04-13T01:40:51.930
> 
> 标签：version-control, github, branch, git-branch, repository

这可能是一个非常初学者的问题，但我正在启动环境中的大型生产网站上工作。我最近才开始使用 Heroku、Github 和 Ruby on Rails，因为与仅在本地进行更改和上传到服务器相比，我正在寻找更多的灵活性和版本控制。

我的问题可能非常明显，是我应该为每个环境（开发、测试、登台、生产等）使用不同的存储库，还是只使用一个主存储库和分支来处理新功能。

我最初的想法是创建多个存储库。例如，如果我添加一个新功能，比如图像上传器，我会使用开发存储库中的代码。进行更改，并在提交过程中将其上传以跟踪小的更改。一旦我在本地对其进行了测试，我想将它上传到测试存储库，其中包含一个列出添加的功能的提交（例如“添加图像上传器到帐户页面”）。

我的想法是，这将允许在开发环境中对提交进行微观管理，而测试环境的提交将更专注于错误修复等。

这在我看来是有道理的，因为当您在环境中向上移动时，您会删除无关的提交并专注于每个环境所需的内容。不过，我也可以看到如何通过分支来实现这一点，所以我正在寻找一些关于如何处理的建议。利弊，个人例子等。

我看到了其他几个相关的问题，但似乎没有一个涉及到我的同样担忧。

提前致谢！

-马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:18:10.653

*对分布式*VCS使用不同的存储库是有意义的，我在以下内容中提到了发布方面（推/拉）：

*   “[您如何在 git 中跨多个部署环境将更改分开和隔离？](https://stackoverflow.com/a/13653253/6309) ”
*   “[不在 Git 中的 master 分支上工作的原因](https://stackoverflow.com/a/5715044/6309)”

管理不同环境的一个困难方面是每个环境可以包含*不同值的***配置文件**。

 *为此，我推荐[content fiter 驱动程序](https://stackoverflow.com/a/7858611/6309)：

![内容过滤器](https://i.stack.imgur.com/69iOP.png)

这有助于生成包含当前值的实际配置文件，具体取决于当前的部署环境。*

# c# - C#/XNA 在不同的 GameStates 中停止歌曲

> ID：15983270
> 
> 赞同：1
> 
> 时间：2013-04-13T01:41:03.977
> 
> 标签：c#, audio, menu, xna-4.0, states

我正在尝试在菜单状态下播放音乐，但在切换到游戏状态后会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T14:47:19.537

MediaPlayer 类具有 Play() 和 Stop() 方法。这里是 MSDN 链接：

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.play.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.play.aspx) [http://msdn.microsoft.com/en-us/library/microsoft.xna.framework .media.mediaplayer.stop.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.stop.aspx)

如果我没记错的话，你可以这样做：

```
// Variable declaration
Song menu_song;
Song game_song;
bool isInMenu; //I'll use this instead of the gamestate as example

//In the LoadContent method:
//remember to add the song to your project. In this case is in 
//a folder called "music"
 Content.Load<Song>("music/menuSongName"); 
 Content.Load<Song>("music/gameSongName"); 

//In Update method:

if (isInMenu) 
{
MediaPlayer.Stop(); //Stop the current audio...
MediaPlayer.Play(menu_song); //...and start playing the next.
}
else
{
MediaPlayer.Stop(); //Stop the current audio
MediaPlayer.Play(game_song); //...and start playing the next.
} 
```

我没有检查这个代码，如果你有什么问题，请告诉我，我会检查它。=) 游戏状态也是如此，我想你会知道如何根据你的需要调整这段代码。

# android - 将 Android EditText 格式化为特定模式

> ID：15983271
> 
> 赞同：2
> 
> 时间：2013-04-13T01:41:30.383
> 
> 标签：android, android-edittext

我需要用户根据这个特定的模式在 EditText 中输入文本：

123.456-7890-123.456

用户可以输入任意数量的整数，所以他们也可以输入 123.456-7

我不希望用户输入。或 - 只是数字，如输入掩码。

数字键盘也应该只显示。

我已经广泛搜索了 StackOverflow，并看到了使用 InputFilter、ChangedListener、TextWatcher 的示例，但没有找到与我正在尝试做的事情相似的任何事情。我已经尝试过我发现的各种实现，但我在使用这些方面缺乏经验，所以我可能忽略了一些东西。

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:06:56.210

在多次尝试实现 InputFilter 或正则表达式失败后，我选择了更直接的方法：

```
public void onTextChanged(CharSequence s, int start, int before, int count) { 
    String a = "";
    String str = id.getText().toString(); 
    String replaced = str.replaceAll(Pattern.quote("."),""); 
    replaced = replaced.replaceAll(Pattern.quote("-"),"");
                char[] id_char = replaced.toCharArray();
                int id_len = replaced.length();
    for(int i = 0; i < id_len; i++) {
                    if(i == 2 || i == 12) {
                        a += id_char[i] + ".";                      
                    }
                    else if (i == 5 || i == 9) {
                        a += id_char[i] + "-";
                    }
                    else a += id_char[i];
                }
    id.removeTextChangedListener(this);
    id.setText(a);
    if(before > 0) id.setSelection(start);
    else id.setSelection(a.length());
    id.addTextChangedListener(this); 
```

}

我不知道这是否是最好的方法，但它确实有效。我还没有解决的一个问题是如何在用户删除或插入数字后处理光标位置。如果用户将光标插入 EditText 中的某处并输入新数字，则光标会跳到 EditText 的末尾。我希望光标停留在它所在的位置。另一个问题是，如果用户在 EditText 数字中插入光标并退格以删除数字，则第一个键输入不起作用，而在第二个键上输入了数字。我只能猜测这与焦点有关吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:49:00.560

您将不得不使用 TextWatcher 和正则表达式模式匹配器来完成您想要做的事情。

这个答案应该会有所帮助：[Android AutoCompleteTextView with Regular Expression？](https://stackoverflow.com/questions/5691356/android-autocompletetextview-with-regular-expression/5692742#5692742)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:53:43.280

您可以创建自己的实现[`InputFilter`](https://developer.android.com/reference/android/text/InputFilter.html). 然后您将按如下方式应用它：

```
MyInputFilter filter = new MyInputFilter(...);
editText.setFilters(new InputFilter[]{filter}); 
```

有关 InputFilter 的工作原理，请参阅文档，然后参阅 Android 中使用的一些 InputFilter 的源代码，了解如何实现它们的一些想法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-04-25T09:45:23.760

使用这个：[https](https://github.com/alobov/SimpleMaskWatcher) ://github.com/alobov/SimpleMaskWatcher 。

只需为这个观察者设置你的面具（###.###-####-###.###）。它会自动添加特殊符号，并且不会检查您的输入字符串是否完整。`android:inputType="number"`但是显示数字键盘，您必须自己处理`EditText`.

# python - Python有同步吗？

> ID：15983272
> 
> 赞同：15
> 
> 时间：2013-04-13T01:41:39.167
> 
> 标签：python, linux, sync

[同步手册页](http://linux.die.net/man/2/sync)说：

> sync() 导致对文件元数据和数据的所有缓冲修改写入底层文件系统。

Python 是否有要求执行此操作？

PS不是[fsync](http://docs.python.org/2/library/os.html#os.fsync)，我明白了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-13T01:52:44.313

Python 3.3 有 os.sync，请参阅[文档](http://docs.python.org/3/library/os.html#os.sync)。[消息来源](http://hg.python.org/releasing/3.3.1/file/8e5812b35480/Modules/posixmodule.c#l3062)证实这是同一件事。

对于 Python 2，您可以对系统进行[外部调用](http://docs.python.org/3/library/subprocess.html)：

```
from subprocess import check_call
check_call(['sync']) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-13T02:52:08.467

如前所述，Python 3.3 在 Python 2.x 上有调用，因为它是一个简单的系统调用，不需要来回传递数据，您可以使用 ctypes 进行调用：

```
>>> import ctypes
>>> libc = ctypes.CDLL("libc.so.6")
>>> libc.sync()
0 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-14T17:11:37.147

结合这[两个](https://stackoverflow.com/a/15983348/2015768) [答案](https://stackoverflow.com/a/15983693/2015768)，我在模块顶部使用以下内容：

```
if hasattr(os, 'sync'):
    sync = os.sync
else:
    import ctypes
    libc = ctypes.CDLL("libc.so.6")
    def sync():
        libc.sync() 
```

# image - 从图像中删除对象

> ID：15983274
> 
> 赞同：0
> 
> 时间：2013-04-13T01:41:47.417
> 
> 标签：image, image-processing

我有几千张来自我们供应商的图片。他们是穿着时尚服装的模特。我只需要拍摄图像中的衣服部分并丢弃其余部分并使它们成为透明背景。所有图像都有一种颜色背景，但它们的颜色不同。目前我们手动执行以下步骤，如果有办法自动执行此操作或有办法更快地执行手动过程，我需要建议和帮助。我们使用 Gimps 和 script-fu 来自动化这个过程的某些部分（见下面的步骤），但剩下的手动部分仍然非常耗时。是否有任何工具或任何编程语言或脚本可以使这个过程更快？

这就是我们现在正在做的方式：

1.  我们使用 Gimps script-fu 批量运行来使所有图像背景透明。
2.  手动将每个图像一张一张地加载到 Gimps 中
3.  Via Free select 拍下，我们在衣服周围做标记
4.  移除标记的衣服区域之外的所有东西
5.  将图像导出并保存为 png 格式。
6.  批量运行 script-fu 自动裁剪所有图像

我还没有找到自动执行第 3 步的方法（代码或脚本）。有谁知道这是否可能？如果不是，是否有任何工具可以将步骤 4-6 组合到一个控制键中，从而减少击键和更快地完成这些图像的方法？

* * *

谢谢你的建议。这就是我想让我的第 3 步和第 4 步自动化的想法。您认为这种方法是否可行。有没有更好的处理方法？

通过我们的批处理作业，所有图像都将具有透明背景。所以现在的想法是移除身体部分。

1.  自动裁剪所有图像，使头部和脚部成为图像的最顶部和最底部。
2.  编写一个 PHP 程序以从皮肤的数据库颜色列表中检测皮肤颜色。
3.  然后转到图像的每个像素并检测皮肤颜色的开始位置。
4.  从图像的最上面开始，第一个有肤色的像素必须是头部或颈部。我删除了起始第一个像素上方的所有内容，因此如果图像具有全头模型，我将能够摆脱毛发。下面的任何东西都可能是脸和脖子，我将用透明背景替换颜色。我仍然不知道如何去除左右两侧的头发。
5.  从图像底部逐像素搜索，直到匹配肤色。我删除了从该像素到页面底部的所有内容。这样我也可以摆脱鞋子的零件。6.用透明背景替换剩余的皮肤部分。

问题是手有时会盖住衣服，我不知道如何处理。也许如果相邻像素不是透明背景，则不要理会该部分。

我也不知道如何处理可能与皮肤颜色相同的衣服（连衣裙或衬衫）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:26:44.607

步骤 3 可以是半自动的。也就是说，以这样一种方式完成，它需要的人工交互比您当前使用的要少得多。我从你的问题中得到了印象，你不是程序员。[因此，我将向您介绍一个名为Power Stroke](http://www.digitalfilmtools.com/powerstroke/)的特定现成工具。它插入非免费工具。可能有一个 GIMP 等价物。我不知道。

# javascript - JavaScript 中的 $$ 函数是什么？

> ID：15983275
> 
> 赞同：-3
> 
> 时间：2013-04-13T01:41:53.610
> 
> 标签：javascript

JavaScript 中的 $$ 函数是什么或它来自什么库？

我遇到的示例代码：

```
$$('input_id') 
```

我找不到有关此功能的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:59:46.813

如果您在 Chrome 中，它`$$`默认在控制台中作为包装器提供

```
document.querySelectorAll(...) 
```

`$$`然而，它本身并没有什么特殊价值，它完全取决于运行 javascript 的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:00:02.023

该`$$`函数可以是任何函数。这是一个有效的名称，唯一正确的方法来确定`$$`它的来源，是找到它在 JavaScript 代码中的设置位置。

也就是说，[Prototype](http://prototypejs.org/)和[MooTools](http://mootools.net/)是通用库，它们将`$$`变量用于实用函数。

*找到*设置功能的一种方法`$$`是使用调试控制台（`F12`在大多数浏览器中）打印出来`$$.toString()`。这将生成函数体，可用于确定函数的设置位置。

此外，如果身体是类似的东西：

```
function () {
    [native code]
} 
```

然后您可能正在查看由浏览器实现的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T01:54:45.000

Matt Ball 在他的评论中发布了答案，但这里有更多细节。

您引用的代码很可能使用了[Prototype JavaScript library](http://prototypejs.org/)提供的[$$](http://api.prototypejs.org/dom/dollar-dollar/)函数。Prototype.js 是一个类似于 jQuery 的 JavaScript 库，它提供了许多类似的函数来与 DOM 交互、执行 AJAX 请求等。

# c# - 使用格式化将富文本框的数据存储到数据库中

> ID：15983278
> 
> 赞同：15
> 
> 时间：2013-04-13T01:42:15.220
> 
> 标签：c#, mysql, wpf, database, richtextbox

我是 wpf 的新手，我想将富文本框的数据及其格式（斜体、彩色、粗体..）存储到数据库（Mysql）中。目前当我保存数据时，格式被忽略。此外，当我将其从数据库加载回富文本框时，它会在同一行中显示所有文本。期待您的帮助和建议！

```
public void save()
    {  

        MySqlConnection conn = new MySqlConnection(connString);
        MySqlCommand command = conn.CreateCommand();      
        string richText = new TextRange(rt1.Document.ContentStart,  rt1.Document.ContentEnd).Text;

        string s = WebUtility.HtmlEncode(richText); 
        command.Parameters.AddWithValue("@s", s);           
        command.CommandText = "insert into proc_tra (procedures) values (@s)";
        conn.Open();
        command.ExecuteNonQuery();
        conn.Close();
    }

public void load()

    {   MySqlConnection conn = new MySqlConnection(connString);
        MySqlCommand command = conn.CreateCommand();
        command.CommandText = "select * from proc_tra where id_pt=4";
        rt1.Document.Blocks.Clear();            
        conn.Open();            
        MySqlDataReader dr;
        dr = command.ExecuteReader();
        string k="";           
        while (dr.Read())
        {              
            k += dr["procedures"].ToString();
        }
        var p = new Paragraph();
        var run = new Run();
        run.Text = WebUtility.HtmlDecode(k);
        p.Inlines.Add(run);
        rt1.Document.Blocks.Add(p);
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-13T03:13:37.913

要获取将保存在数据库中的格式化文本：

```
string rtfText; //string to save to db
TextRange tr = new TextRange(richTextBox.Document.ContentStart, richTextBox.Document.ContentEnd);
using (MemoryStream ms = new MemoryStream())
{
    tr.Save(ms, DataFormats.Rtf);
    rtfText = Encoding.ASCII.GetString(ms.ToArray());
} 
```

要恢复从数据库检索到的格式化文本：

```
string rtfText= ... //string from db
byte[] byteArray = Encoding.ASCII.GetBytes(rtfText);
using (MemoryStream ms = new MemoryStream(byteArray))
{
    TextRange tr = new TextRange(richTextBox.Document.ContentStart, richTextBox.Document.ContentEnd);
    tr.Load(ms, DataFormats.Rtf);
} 
```

您也可以改用 XAML 格式，在加载保存时使用 DataFormats.XAML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:56:10.033

尝试这样的事情：

```
RichTextBox richTextBox = new RichTextBox();
string richText = new TextRange(richTextBox.Document.ContentStart, richTextBox.Document.ContentEnd).Text; 
```

然后，当要将其保存到 MySQL 时，您可以像这样构建查询：

```
string query = "INSERT INTO blah VALUES ('" + HTTPUtility.HtmlEncode(richText) +  "'); 
```

这将确保您的内容保持正确格式。

最后，当您执行选择以将内容加载回 RichTextBox 时，获取并使用您获得的字符串：

```
HTTPUtility.HtmlDecode(selectedDataFromMySQL); 
```

或者，更完整地说：

```
richTextBox.Document.Blocks.Clear();
richTextBox.Document.Blocks.Add(new Paragraph(HTTPUtility.HtmlDecode(selectedDataFromMySQL); 
```

虽然我自己已经有一段时间没有这样做了，但我相信 WPF 和包含 Text 属性的控件有一个扩展，因此它也可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T13:47:18.563

对于 WinForm 应用程序，使用richTextBox1.rtf，而不是richTextBox.Text

# casting - 在 Go 中将 int 转换为 rune

> ID：15983279
> 
> 赞同：10
> 
> 时间：2013-04-13T01:42:21.497
> 
> 标签：casting, go, type-conversion, rune

假设我有一个表示有效 unicode 代码点的 int64 变量（或其他整数大小），并且我想在 Go 中将其转换为符文，我该怎么办？

在 CI 中会使用类型转换，例如：

```
c = (char) i;  // 7 bit ascii only 
```

但是在 Go 中，类型断言不起作用：

```
c, err = rune.( i) 
```

建议？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-13T01:44:06.980

你只是想要`rune(i)`。铸造是通过`type(x)`.

类型断言是不同的。当您需要从不太具体的类型（如`interface{}`）转换为更具体的类型时，您可以使用类型断言。此外，在编译时检查强制转换，其中类型断言发生在运行时。

以下是使用类型断言的方法：

```
var (
    x interface{}
    y int
    z string
)
x = 3

// x is now essentially boxed. Its type is interface{}, but it contains an int.
// This is somewhat analogous to the Object type in other languages
// (though not exactly).

y = x.(int)    // succeeds
z = x.(string) // compiles, but fails at runtime 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T04:08:28.910

在 Go 中，您想要进行转换。

> [转换](http://golang.org/ref/spec#Conversions)
> 
> 转换是形式的表达式`T(x)`where `T`is a type 并且 `x`是可以转换为 type 的表达式`T`。
> 
> ```
> Conversion = Type "(" Expression ")" . 
> ```
> 
> 在以下任何一种情况下，非常量值`x`都可以转换为类型：`T`
> 
> *   `x`可分配给`T`。
> *   `x`的类型并且`T`具有相同的基础类型。
> *   `x`的类型和`T`是未命名的指针类型，它们的指针基类型具有相同的基础类型。
> *   `x`的类型，并且`T`都是整数或浮点类型。
> *   `x`的类型 和`T`都是复杂类型。
> *   `x`是整数或具有类型`[]byte`或`[]rune`并且`T`是字符串类型。
> *   `x`是一个字符串并且`T`是`[]byte`或`[]rune`。

您想将`x`, of type `int`,`int32`或`int64`, to `T`of type转换为 type`rune`的别名`int32`。`x`的类型 和`T`都是整数类型。

因此，`T(x)`被允许并被写入`rune(x)`，例如，`c = rune(i)`。

# ios - 如何阅读一个 IOS App 项目

> ID：15983281
> 
> 赞同：0
> 
> 时间：2013-04-13T01:42:27.320
> 
> 标签：ios, objective-c

学习Objective-C和IOS 5开发大概两个月了，找了一些开源的IOS App项目，现在想看那些源代码，但是开始的时候不知道怎么开始看，可以任何人都给我一些建议，让我知道如何有效地阅读。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:47:22.757

从 AppDelegate 和 RootViewController 开始（通过启动应用程序并注意首先加载的内容来检查 rootviewController）。如果找不到项目的 RootViewController，请添加如下简单的一行：

```
 NSLog(@"I am in View 1"); 
```

在每个班级中，看看哪个首先被调用。然后，在找到第一个控制器后，按照那里的代码查看调用了什么以及响应什么。

我建议从一个简单的开源项目开始，而不是阅读一些复杂的东西，比如 Cocos 2D 游戏。例如，从 Apple 在开发人员文档中提供的示例代码开始 - 使用多个视图控制器、表格视图代码等。

**编辑**：简单的解决方案 - 如果故事板在您正在查看的开源项目中使用，请遵循故事板。否则，请参阅上文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:52:54.213

我将从查看布局开始`Storyboard`（在 iOS 5 中，这已成为大多数人设计 UI 的正常和首选方式）。查看初始场景，然后使用身份检查器查看子类`ViewController`是什么。查看那个 VC 的代码，看看发生了什么。运行应用程序以查看执行的流程与`Storyboard`设计相比如何。

# javascript - 大多数表单javascript使用ID而不是NAME的原因

> ID：15983282
> 
> 赞同：5
> 
> 时间：2013-04-13T01:42:28.147
> 
> 标签：javascript, html

**有人可以了解为什么使用NAME**与表单元素进行交互已经过时并`document.getElementById`接管的历史/原因。

历史上究竟发生了什么促使这种变化和转变。

最后，是否发生了转变，或者两者仍然是推荐的做事方式？

```
Document.getElementById vs  document.form.name 
```

根据一些论坛讨论，并非所有浏览器都识别 document.form.name。是这样吗？看：

```
"I've been told in the past that you should not use "document.form_name.element_name" compared to "document.getElementById()", as the first is not recognized by all browsers. " 
```

*   来自：[http ://forums.devshed.com/javascript-development-115/document-getelementbyid-vs-document-form-name-element-432059.html](http://forums.devshed.com/javascript-development-115/document-getelementbyid-vs-document-form-name-element-432059.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:46:23.743

该属性`NAME`不一定是唯一的。例如，单选按钮按具有相同的名称进行分组。调用`getElementByName`将返回集合中的所有按钮。`ID`是独一无二的。因此，要回答您的问题，每个人都有自己的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:09:55.193

`name`当作为`document.forms[name].element[name]`. IE 5.5、Firefox 0.8、Opera 5、Navigator 4 等都支持它。它已经过时了，因为 jQuery 的简单性让人忘记了它。

但是如果一个`input`元素与对象上的一个属性同名`form`，那么访问它可能不起作用：例如，

```
<form name="hi" action="/go"><input name="action" value="world"> 
```

应该`document.hi.action`给你“/go”还是“[Input value=world]”？

# php - 在表单中使用 enctype="multipart/form-data" 时页面无法显示错误

> ID：15983283
> 
> 赞同：0
> 
> 时间：2013-04-13T01:42:31.073
> 
> 标签：php, forms, multipartform-data, enctype

我今天发现 IE 和 Firefox 都给我一个错误，当我尝试使用基本表单（由 PHP 处理）向我的网站添加文章时，页面无法显示。一周前它还在工作，但我严重怀疑服务器管理员更改了 PHP 版本，因为我的代码没有任何变化。代码是：

```
<form action="?do=manage&act=article&action=edit&id='.$id.'&submit=true" enctype="multipart/form-data" method="post">
//several lines of code - inputs...
</form> 
```

当我删除该`enctype="multipart/form-data"`部分时，它可以正常工作，只是无法再上传文件。这也是一个问题，因为我需要在文章中添加文件，而且这个问题也出现在我必须上传文件的相册中。

enctype 部分可能是问题所在吗？有没有人遇到过这个问题？

以下是有关服务器的一些信息： PHP API：20100412 Apache 版本：Apache/2.2.17 (Linux/SUSE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T21:21:42.613

I've contacted my hosting provider and they resolved the issue. The problem was in configuration of the server. They updated the PHP version from 5.4.x to 5.5.x and forgot to change the config file to the way it was. So there was no file upload allowed and that's why my page was unable to load.

I hope this helps someone else with similar problem :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:49:06.603

1.  您*可能* 关闭了错误报告

2.  破坏页面的错误*可能是*您的表单操作没有按照您认为的方式工作。

.

```
<form action="?do=manage&act=article&action=edit&id='.$id.'&submit=true" enctype="multipart/form-data" method="post"> 
```

应该

```
<form action="?do=manage&act=article&action=edit&id=<?= $id; ?>&submit=true" enctype="multipart/form-data" method="post"> 
```

# overriding - 重写构造函数

> ID：15983284
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:42:55.823
> 
> 标签：overriding

这是一个简单的问题。我在笔记本、书籍和互联网上研究过这个问题，但找不到答案

为什么我们要通过添加参数来覆盖默认构造函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:48:23.807

您将为类创建一个构造函数，以便在创建后立即根据任何其他条件操作其成员变量。我的印象是你实际上并不知道构造函数是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:52:01.167

许多语言（如 C++/C#/Java）在类中没有明确定义时会自动创建默认的无参数构造函数。

当您在带或不带参数的类中创建构造函数时，编译器通常会停止创建默认的自动生成的构造函数（取决于语言规范）。这是在假设您有一些非默认初始化而不是自动生成的初始化可能不会在您期望的状态下创建对象时完成的。

由于使用带参数的构造函数是创建对象的自然方式，因此本质上会导致“删除”默认自动生成的构造函数，该构造函数可能可以称为“覆盖默认构造函数”。

# python - ListField 上的 WTForms 验证错误

> ID：15983292
> 
> 赞同：0
> 
> 时间：2013-04-13T01:44:00.073
> 
> 标签：python, validation, wtforms, flask-wtforms

我收到以下错误

ValidationError：ValidationError（值必须是['AL'，'CT'，'DE'，'FL'......'WY']之一：['state']）

但是当我在我的模型中时，我似乎无法弄清楚为什么它会验证该字段；

```
class User(mongoengine.Document): 

    username = mongoengine.StringField(unique=True, max_length=30, required=True,verbose_name="Pick a Username") 
    state = mongoengine.ListField(required=False, verbose_name="State", choices=[('AL' , 'Alabama'), ('AK' , 'Alaska') ,('AZ' , 'Arizona'), ('AR' , 'Arkansas') ,('CA' , 'California'), ('CO' , 'Colorado') ,('CT' , 'Connecticut'), ('DE' , 'Delaware') ,('FL' , 'Florida')...('WY' , 'Wyoming')]) 

user_form = model_form(User, exclude=['password','name','address','address2','zipcode','state']) 
signup_form = model_form(User, exclude=['name','address','address2','zipcode','state']) 
```

我很茫然，因为我虽然起初 require=false 意味着它会被忽略，其次 exclude 也让我认为它应该被忽略。为什么这个验证错误仍然发生（除了我没有在表格中填写它的事实）？有关更多上下文，可以在此处找到完整的 model.py 和 app.py

[https://github.com/markbreneman/TroubleShooting/tree/master/SecondNatureWebsite](https://github.com/markbreneman/TroubleShooting/tree/master/SecondNatureWebsite)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:01:06.397

`required=False`表示用户没有义务在该字段中输入至少 1 个数据。可能输入表单中的选项与字段的预定义选项不匹配。

# compilation - Monodevelop 源码编译错误

> ID：15983298
> 
> 赞同：0
> 
> 时间：2013-04-13T01:45:26.677
> 
> 标签：compilation, monodevelop

我正在尝试下载 Monodevelop 并编译源代码。以下是我得到的错误

```
{
/home/shankar/Development/Monodevelop/main/Main.sln: error : Could not find the project file '/home/shankar/Development/Monodevelop/main/external/Newtonsoft.Json/Src/Newtonsoft.Json/Newtonsoft.Json.csproj'
/home/shankar/Development/Monodevelop/main/Main.sln: error : Could not find the project file '/home/shankar/Development/Monodevelop/main/external/ikvm/reflect/IKVM.Reflection.csproj'
/home/shankar/Development/Monodevelop/main/Main.sln: error : Could not find the project file '/home/shankar/Development/Monodevelop/main/external/xwt/Xwt/Xwt.csproj'
/home/shankar/Development/Monodevelop/main/Main.sln: error : Could not find the project file '/home/shankar/Development/Monodevelop/main/external/xwt/Xwt.Gtk/Xwt.Gtk.csproj'
} 
```

我看到没有找到所有外部依赖项。我使用“git clone”来克隆项目。是否有特定的 git 选项来下载外部依赖项，或者我应该单独下载每个项目进行编译？

谢谢你的帮助

尚卡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:33:40.227

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

MonoDevelop 使用了几个子模块，您还需要下载并检查它们。

# mysql - 远程连接mysql，允许*

> ID：15983304
> 
> 赞同：1
> 
> 时间：2013-04-13T01:46:06.853
> 
> 标签：mysql

我已经看到了以下用途：

```
[mysqld]
bind-address    = 255.112.324.12 
```

允许远程访问单个 IP。我将如何允许从 mysql 远程访问所有 IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:09:49.850

如果您想为所有IP允许它，那么我认为您根本不需要`bind-address`？尝试将其注释掉

```
#bind-address    = 255.112.324.12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:19:16.750

将绑定地址从 localhost, `127.0.0.1`, 更改为`0.0.0.0`：

```
# /etc/mysql/my.cnf
bind-address            = 0.0.0.0 
```

# php - 如何使用php将结果发送到表单？

> ID：15983309
> 
> 赞同：1
> 
> 时间：2013-04-13T01:46:33.573
> 
> 标签：php, insert

我对 PHP 很陌生，但它是很棒的语言 :)

我创建了简单的数学计算脚本，它根据变量从表单中获取输入并执行简单的计算。我希望结果以另一种形式显示，而不是简单地显示在页面底部。

```
<html>
<body>
<p>Simple PHP script for cloning calculations</p>
<form name="form1" method="post" action="">
<p>
<label for="vector_lenght">La taille du vecteur (kb)</label>
<input type="text" name="vector_lenght" id="vector_lenght">
</p>
<p>
<label for="insert_lenght">La taille de l'insert (kb)</label>
<input type="text" name="insert_lenght" id="insert_lenght">
</p>
<p>
<label for="conc_insert">La concentration de l'insert</label>
<input type="text" name="conc_insert" id="conc_insert">
</p>
<p>
<input type="submit" name="ratio_calc" id="ratio_calc" value="Calculer">
</p>
<p>
<label for="ratio">Le ratio à utiliser</label>
<input type="text" name="ratio" id="ratio">
</p>
<p>
<label for="ratio_1">ratio 1:1</label>
<input type="text" name="ratio_1" id="ratio_1">
<br>
<label for="ratio_3">ratio 1:3</label>
<input type="text" name="ratio_3" id="ratio_3">
<br>
<label for="ratio_5">ratio 1:5</label>
<input type="text" name="ratio_5" id="ratio_5">
</p>
</form>

<?php

if($_POST['ratio_calc']!=''){ 
define("conc_vector", 100);
$vector_lenght = $_POST['vector_lenght']; 
$insert_lenght = $_POST['insert_lenght'];
$conc_insert = $_POST['conc_insert'];
$result = (conc_vector * $insert_lenght) / $vector_lenght; 
echo "<h1>$result</h1>"; 
} 

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:00:11.667

在您的开始表单标签中，“action”属性指定了哪个文件应该接收您提交表单时创建的 HTTP 请求。因为它现在的值是一个空字符串，并且脚本默认将数据发布回当前脚本。

（我假设这种其他形式在不同的页面中 - 如果没有，请跳到最后一个代码片段）

因此，创建另一个 PHP 脚本来表示您希望包含结果的页面，并将新脚本的名称作为“action”属性的值。在新脚本中，您可以通过 $_POST[] 超全局检索表单发送的值（与您在发布的代码中的方式相同）。

如果新页面名为 resultPage.php（并且与您发布的脚本位于同一目录中），您的表单标签应如下所示：

```
<form name="form1" method="post" action="resultPage.php"> 
```

如果您希望数据显示在新页面的表单中，请执行以下操作：

```
<input type="text" value="<?php echo $_POST['conc_insert'] ?>"> 
```

# c++ - c++: BOOST_ASIO 服务器回复不符合预期？

> ID：15983311
> 
> 赞同：0
> 
> 时间：2013-04-13T01:47:18.090
> 
> 标签：c++, client-server, boost-asio, output, reply

基本上我有一个客户端，我向服务器发送一个 10 字节的字符串，`hellohello`并且在服务器内我希望回复会`0123456789`返回给客户端，但我会`hellohello`再次收到？我将 tcp_server.cpp 中的第 58 行更改为`char data_`，`char data_out`因为我认为这是发送数据包数据的地方？我很确定会被调用，但由于某种原因，事情并没有像我想象的那样工作。

这是服务器输出，

```
handle read: bytes_transferred10
10
handle write:
0123456789
handle read: bytes_transferred0 
```

我也想知道为什么又`handle read: bytes_transferred0`被叫了？

这是客户端输出，

```
Enter message: hellohello
Reply is: hellohello

Process returned 0 (0x0)   execution time : 6.484 s
Press any key to continue. 
```

这是 tcp_server.cpp

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

class session
{
public:
  session(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket& socket()
  {
    return socket_;
  }

  void start()
  {
          socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
          boost::asio::placeholders::error,
          boost::asio::placeholders::bytes_transferred));
  }
void read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred);

private:
  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
      std::cout<<"handle read: bytes_transferred"<<bytes_transferred<<std::endl;
    if (!error)
    {
          read_handler(error, bytes_transferred);
          boost::asio::async_write(socket_,
          boost::asio::buffer(data_, bytes_transferred),
          boost::bind(&session::handle_write, this,
          boost::asio::placeholders::error));
    }
    else
    {
      delete this;
    }
  }

  void handle_write(const boost::system::error_code& error)
  {
      std::cout<<"handle write: "<<std::endl;
      data_out = {'0','1','2','3','4','5','6','7','8','9'};
    if (!error)
    {
            std::cout<<data_out<<std::endl;

            socket_.async_read_some(boost::asio::buffer(data_out, max_length),
            boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    }
    else
    {
      delete this;
    }
  }

  tcp::socket socket_;
  enum { max_length = 1024 };
  char data_[max_length];
  char data_out[max_length];
};
void session::read_handler(const boost::system::error_code& ec, std::size_t bytes_transferred)
{
      std::cout<<bytes_transferred<<std::endl;
}

class server
{
public:
  server(boost::asio::io_service& io_service, short port)
    : io_service_(io_service),
      acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
  {
    start_accept();
  }

private:
  void start_accept()
  {
    session* new_session = new session(io_service_);
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session* new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }
    else
    {
      delete new_session;
    }

    start_accept();
  }

  boost::asio::io_service& io_service_;
  tcp::acceptor acceptor_;
};

int main()
{
  try
  {
    boost::asio::io_service io_service;
    server s(io_service, 4000);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

tcp_client.cpp

```
#include <cstdlib>
#include <cstring>
#include <iostream>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

enum { max_length = 1024 };

int main(int argc, char* argv[])
{
  try
  {

    boost::asio::io_service io_service;

    tcp::resolver resolver(io_service);
    tcp::resolver::query query(tcp::v4(), "127.0.0.1", "4000");
    tcp::resolver::iterator iterator = resolver.resolve(query);

    tcp::socket s(io_service);
    s.connect(*iterator);

    using namespace std; // For strlen.
    std::cout << "Enter message: ";
    char request[max_length];
    std::cin.getline(request, max_length);
    size_t request_length = strlen(request);
    boost::asio::write(s, boost::asio::buffer(request, request_length));

    char reply[max_length];
    size_t reply_length = boost::asio::read(s,boost::asio::buffer(reply, request_length));
    std::cout << "Reply is: ";
    std::cout.write(reply, reply_length);
    std::cout << "\n";
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:31:20.070

你的评论

> 我认为递归调用`handle_read()`？`handle_write()`

接近但不完全正确，因为这里没有递归。该[文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_stream_socket/async_write_some.html)很好地解释了这一点：

> 无论异步操作是否立即完成，**都不会在此函数中调用**处理程序。处理程序的调用将以等同于 using 的方式执行`boost::asio::io_service::post()`。

增加重点是我的。与递归相比，最好将这些概念视为链接，因为一个操作（例如）`async_write()`是在另一个操作的处理程序中启动的，例如`async_read()`. 确切的细节取决于使用的协议。

如果您希望服务器将字符串 0123456789 发送到客户端，请在调用之前填充缓冲区`async_write()`。

# javascript - 打印 div 的内容

> ID：15983313
> 
> 赞同：0
> 
> 时间：2013-04-13T01:47:29.600
> 
> 标签：javascript, jquery, css, html, printing

如何使用 Javascript 或 Jquery 打印特定 div 的内容？我知道你可以使用`window.print();`，但这会打印整个页面。

如果需要提及的话，我希望打印的 div 也有一个垂直滚动。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T03:35:35.840

我用它来完成您要求的工作：[http ://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)

# java - 从模型中删除所有元素后更新 JList(AbstractListModel)

> ID：15983314
> 
> 赞同：1
> 
> 时间：2013-04-13T01:47:32.750
> 
> 标签：java, swing, jlist, defaultlistmodel

我有一个 JList，其中每个元素都包含一些特殊数据。所以我为 JList 实现了 AbstractListModel。

当列表中有一个或多个元素时，一切都很好。

但是，在以下场景中不起作用：

*   Jlist 已经用一些元素实例化了。
*   我需要从列表中删除所有元素。
*   我在模型中没有可访问的 JList 对象（组件），因此无法调用 repaint()。

我不能调用 AbstractListModel 的 fire***() 方法，因为它会抛出 OutOfIndexException。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:54:14.130

你说：

> 因为我正在调用 fireContentsChanged(this, 0,0)..它将在列表中查找不存在的第 0 个元素。我知道原因，但不知道解决方案。

`fireContentsChanged(...)`移除物品时不要打电话。`fireIntervalRemoved(...)`改为打电话。`repaint()`另外顺便说一句，在这种情况下你永远不必打电话。更改模型的状态，然后通过调用适当的`fireXXX(...)`方法通知模型的侦听器是应该做的一切。

# plugins - notepad++ 6.2.3 有没有功能列表插件

> ID：15983315
> 
> 赞同：18
> 
> 时间：2013-04-13T01:47:34.577
> 
> 标签：plugins, notepad++

Notepad++ 6.2.3 有功能列表插件吗？

我在 Npp 5.8 中使用过 TagsView 插件和功能列表插件，插件有时会丢失我定义的一些功能。当打开 TagsView 侧边栏时，它总是`VARIABLE`首先显示我不想显示的。我发现函数列表插件不适合 Npp 6.2.3。

有没有人修改函数列表插件（或任何其他插件）以适应 6.2.3？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-26T07:02:13.420

我使用 sourcecookifier，它看起来不错，除了不显示 perl 的可用列表:-(

[http://sourceforge.net/projects/sourcecookifier/](http://sourceforge.net/projects/sourcecookifier/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-16T18:04:53.903

Notepad++ 的函数列表插件必须手动安装。

使用FunctionList插件v2.1和Notepad++ v5.9及以上，安装步骤如下：

1.  [从http://sourceforge.net/projects/npp-plugins/files/](http://sourceforge.net/projects/npp-plugins/files/)下载 Function List 插件
2.  解压FunctionList插件，复制文件如下：
    *   **FunctionList.dll**复制到
        *   XP、Vista 或 Win7 32 位：C:\Program Files\Notepad++\plugins
        *   Vista 或 Win7 64 位：C:\Program Files (x86)\Notepad++\plugins
    *   **C++.flb**和**Gmod Lua.bmp**复制到
        *   XP、Vista 或 Win7 32 位：C:\Program Files\Notepad++\plugins\Config
        *   Vista 或 Win7 64 位：C:\Program Files (x86)\Notepad++\plugins\Config
    *   **FunctionListRules.xml**复制到：
        *   XP：C:\Documents and Settings\[用户名]\Application Data\Notepad++\plugins\config
        *   Vista 或 Win7：C:\Users\[用户名]\AppData\Roaming\Notepad++\plugins\config
        *   注意： install.txt 说使用您的 %APPDATA% 路径。通过在 Windows 开始->运行或开始->开始搜索框中键入 %APPDATA% 可以轻松找到您的 %APPDATA% 路径。
3.  启动 Notepad++，**Function List**插件菜单现在应该出现在 Menu: **Plugins** –> **功能列表**

[**请点击此处获取详情**](http://chrisjakeway.wordpress.com/2009/10/26/install-functionlist-plug-in-for-notepad/)

# clojure - 接下来在clojure中休息

> ID：15983316
> 
> 赞同：3
> 
> 时间：2013-04-13T01:47:47.250
> 
> 标签：clojure, functional-programming

我正在阅读clojure中关于**rest** vs **next的解释。**据我了解，它分解为`next`评估/实现序列的尾部，知道它是否应该返回`nil`，同时`rest`总是返回序列，所以它更懒惰。

但是，我不明白的是：这两个函数都需要知道尾部是否有东西。如果什么都没有，一个会返回`nil`，另一个会返回`()`。

所以基本上，他们都需要检查/评估剩下的东西。甚至导致`rest`返回`()`，例如需要知道它不会返回`(2)`。

所以甚至`rest`需要做评估。

但解释却恰恰相反。那只`next`做那个评估，但`rest`不做，因此更懒惰。

谁能解释一下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T03:18:34.450

```
user> (def test-seq (lazy-cat [1] [(do (print "Hi!") 2)]))
#'user/test-seq
user> (def rest-test (rest test-seq))
#'user/rest-test
user> (def next-test (next test-seq))
Hi!
#'user/next-test 
```

如果`rest`需要评估一个元素，您会看到“嗨！” 我打电话后打印出来`(rest test-seq)`。显然，`rest`不需要为了工作做评估。

原因是`rest`不返回 () 或 (2) 或类似的东西；每次调用它时它都会返回一个未计算的惰性序列，并且只有在稍后对该序列进行评估时才会回答是否有任何要返回的问题。

# ruby-on-rails - 在活动记录信誉系统 gem 中获取评估值

> ID：15983319
> 
> 赞同：0
> 
> 时间：2013-04-13T01:48:22.017
> 
> 标签：ruby-on-rails, gem

我有一个系统，我正在使用 twitter active-record-reputation-system gem ( [https://github.com/twitter/activerecord-reputation-system/](https://github.com/twitter/activerecord-reputation-system/) ) 我有这样的东西：

```
class Something
  has_reputation  :rating,     source: :user,  aggregated_by: :average
end 
```

用户可以用 1 到 5 的值进行投票。

现在，我想向用户显示他对该对象的当前评分值。我搜索了 gem，但找不到向用户显示他给出的评分的方法，只是评分的平均值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T07:24:27.573

试图做这件事，我在[https://github.com/twitter/activerecord-reputation-system/issues/30中找到了以下内容](https://github.com/twitter/activerecord-reputation-system/issues/30)

```
this_something.evaluations('rating').where(source_type: user.class.name, source_id: user.id) 
```

这基本上相当于为方法指定一个范围，该`evaluations`方法返回所有评估记录。

# html - 在 Opera 中堆叠 HTML 无序列表

> ID：15983321
> 
> 赞同：2
> 
> 时间：2013-04-13T01:48:50.533
> 
> 标签：html, css

我在[此网页上](http://mybbwebhost.com)“精美托管”标题下的两个无序列表遇到问题。形成图像列表的两个列表的代码是：

```
<ul>
    <li><div class="image"><img src="images/icon_staff.png" alt=""></div>Knowledgeable Support</li>
    <li><div class="image"><img src="images/icon_backups.png" alt=""></div>Remote Backups</li>
    <li><div class="image"><img src="images/icon_infinity.png" alt=""></div>Hundreds of Features</li>
</ul>

<ul>
    <li><div class="image"><img src="images/icon_security.png" alt=""></div>Secure Servers and Datacenter</li>
    <li><div class="image"><img src="images/icon_gears.png" alt=""></div>Web Software Auto Installer</li>
    <li><div class="image"><img src="images/icon_price.png" alt=""></div>Competitive Pricing</li>
</ul> 
```

CSS：

```
#box2 ul {
    margin: 5px 0 0 0;
    padding: 0;
}

#box2 li {
    list-style: none;
    float: left;
    margin: 15px 5px 0 0;
    font-size: 11px;
    width: 80px;
    text-align: center;
} 
```

现在，这在除 Opera 之外的所有浏览器中都能完美运行。在 Opera 中，这两个列表是相邻的，好像是一个列表，不堆叠，导致盒子太大，打乱了整个设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:41:35.017

如果您为您添加 265px 的宽度 #box2 它将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:58:05.853

您还需要浮动两个 UL：

```
#box2 ul {
    float:left;
    margin: 5px 0 0 0;
    padding: 0;
} 
```

# html - 为什么导航的框阴影没有显示？

> ID：15983325
> 
> 赞同：2
> 
> 时间：2013-04-13T01:49:23.287
> 
> 标签：html, css

我想让标题的导航有一个盒子阴影。然而，盒子阴影似乎被我放在它下面的旋转木马隐藏了。我放置了#carousel 的所有子项的 z-index，但 box-shadow 仍然没有出现。

（页面片段）![在此处输入图像描述](https://i.stack.imgur.com/E1HbP.jpg)

这是当我将 #carousel 向下推时发生的情况，当我给它 margin-top: 40px;

（另一个页面片段）![在此处输入图像描述](https://i.stack.imgur.com/DFcJA.jpg)

**HTML**

```
<header>

                <nav>

                    <div class="container">

                        <h1><a href="#"><img src="images/logo.png" alt="" id="logo"></a></h1>
                        <h1 id="NHS"><a href="#">Newport High School</a></h1>

                        <ul id="nav">
                            <li><a href="#">Home</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Students</a></li>
                            <li><a href="#">Parents</a></li>
                            <li><a href="#">Activities & Atletics</a></li>
                            <li><a href="#">Resources</a></li>
                        </ul>

                    </div><!--container---> 

                </nav>

            </header><div id="carousel">                        
                <div class="inner">
                    <ul>
                        <li><img src="images/example-slide-1.jpg" alt="Fish"></li>
                        <li><img src="images/example-slide-2.jpg" alt="Elephant"></li>
                        <li><img src="images/example-slide-3.jpg" alt="Giraffe"></li>
                        <li><img src="images/example-slide-4.jpg" alt="Fish"></li>
                    </ul>
                </div>                                      
            </div> 
```

**CSS**

```
/* - - - header - - - */

header {
    background: rgb(30,27,27); /* Old browsers */

    background: -moz-linear-gradient(top,  rgba(30,27,27,1) 0%, rgba(2,2,2,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(30,27,27,1)), color-stop(100%,rgba(2,2,2,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(30,27,27,1) 0%,rgba(2,2,2,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(30,27,27,1) 0%,rgba(2,2,2,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(30,27,27,1) 0%,rgba(2,2,2,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(30,27,27,1) 0%,rgba(2,2,2,1) 100%);  

    box-shadow:           0px 3px 15px rgba(50, 50, 50, .7);
        -webkit-box-shadow: 0px 3px 15px rgba(50, 50, 50, .7);
        -moz-box-shadow:    0px 3px 15px rgba(50, 50, 50, .7);

    z-index: 1000;

} 

    header h1, header li {
        float: left;
    }

    header a {
        color: #A1A1A1 ;
        font-family: arial, helvetica, verana, sans-serif;
    }

        header a:hover {
            color: #A1A1A1;
            text-decoration: none;
        }

#logo {
    width: 50px;
}

#NHS {
    margin: 1.8% 0 0 2%;
    font-size: 1.2em;
    text-transform: uppercase;
}

    #NHS a {
        color: #F6F6F6;
        letter-spacing: 2px;
    }

#nav {
    float: right;
    margin: 3% 0 0 0;

}

    #nav li {
        margin-right: 20px;
        padding: 0;
    }

    #nav li:last-of-type {
        margin-right: 0px;
    }

        #nav a {
         font-size: .8em;
         text-transform: uppercase;
         padding-top: 3px;
         font-weight: 400;
        }

        #nav a:hover {
            border-top: 1px dotted #C41D0E;
        }

/* - - - carousel - - - */

#carousel {
    margin: 40px 0 0 0;
    width: 100%;
    overflow: hidden;
    z-index: -999;
}

    #carousel .inner {
        box-sizing: border-box;
        margin-left: -50px;
        z-index: -5000;
    }

        #carousel ul {
            width: 60000px;
            height: 480px;
            z-index: -5000;
        }

            #carousel li {
                height: 480px;
                float: left;
                overflow: hidden;
                z-index: -5000;
            }

                #carousel img {
                    text-align: center;
                    width: 1375px;
                    height: auto;
                    z-index: -5000;
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T03:38:52.283

请记住`z-index`仅适用于定位元素。因此，您的轮播和标题都需要有一个`position`值`static`，然后您可以为标题指定更高`z-index`的值。这种方式`box-shadow`将正确显示在轮播上方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T09:53:31.600

您只需要添加`position:relative`到标题。旋转木马不需要`z-index`改动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:15:33.907

尝试将 !important 添加到您的影子盒中。我认为这应该有效。

```
box-shadow:           0px 3px 15px rgba(50, 50, 50, .7) !important;
    -webkit-box-shadow: 0px 3px 15px rgba(50, 50, 50, .7) !important;
    -moz-box-shadow:    0px 3px 15px rgba(50, 50, 50, .7) !important; 
```

# java - 我收到错误错误：预期为“.class”

> ID：15983326
> 
> 赞同：0
> 
> 时间：2013-04-13T01:49:28.577
> 
> 标签：java, class, methods, compiler-errors, arguments

我对 Java 比较陌生，所以我决定制作这个程序，因为开始学习如何使用方法似乎是一项足够简单的任务。无论如何，这是我现在的程序。

```
 import javax.swing.JOptionPane;
    public class smallAverage{
    public smallAverage getsmall() {

            String sd1 = JOptionPane.showInputDialog("What is the first number?");
    double sdx = Double.parseDouble (sd1);
            String sd2 = JOptionPane.showInputDialog("What is the second number?");
    double sdy = Double.parseDouble (sd2);
            String sd3 = JOptionPane.showInputDialog("What is the third number?");
    double sdz = Double.parseDouble (sd3);

            return double sdx;
    return double sdy;
    return double sdz;
    }

    public smallAverage getavg() {

            String ad1 = JOptionPane.showInputDialog("What is the first number");
    double adx = Double.parseDouble (ad1);
            String ad2 = JOptionPane.showInputDialog("What is the second number");
    double ady = Double.parseDouble (ad2);
            String ad3 = JOptionPane.showInputDialog("What is the third number");
    double adz = Double.parseDouble (ad3);

            return double adx;
    return double ady;
    return double adz;
    }

     public smallAverage work() {
    double small = Math.min(sdx, sdy, sdz);
    double avg = (adx + ady + adz) / 3;

            System.out.println("The smallest of "+ sdx+ sdy+ sdz+ " is " + small + ", and the average of"+ adx+ ady+ adz+ " is "+ avg+ ".");
    }
    } 
```

这里发生的实际数学对我来说真的没有任何意义，它是我想学习的代码的工作方式。我尝试过用许多不同的方式重写这段代码，但这似乎是最接近正确的。我只是不知道为什么它不起作用。当我尝试通过终端编译时，我得到了这个：

```
 smallAverage.java:12: error: '.class' expected
                    return double sdx;
                                  ^
    smallAverage.java:13: error: '.class' expected
            return double sdy;
                          ^
    smallAverage.java:14: error: '.class' expected
            return double sdz;
                          ^
    smallAverage.java:27: error: '.class' expected
                    return double adx;
                                  ^
    smallAverage.java:28: error: '.class' expected
            return double ady;
                          ^
    smallAverage.java:29: error: '.class' expected
            return double adz;
                          ^
    6 errors 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:51:03.187

当您返回时，您不再需要输入说明符：

```
 return double adx;
 return double ady;
 return double adz; 
```

应该

```
 return adx;
 return ady;
 return adz; 
```

其他三个同样的错误。

同时。

```
public smallAverage getsmall() 
```

是错误的，因为您没有从该函数返回类对象。如果没有任何不同的数据路径，您不能将 3 个 return 语句放在一个彼此靠近的函数中。例如：

```
 return adx;
 return ady;  //two return statements below will never be reached.
 return adz; 
```

这些是基本错误，您可能需要查看一些基本的 Java 教程：[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:53:46.677

你只需要做即

```
return sdx; 
```

因为类型不是必需的，因为您在声明 sdx 时已经定义了。

建议使用 Eclipse 之类的 IDE，因为它甚至不运行程序就指出编译错误。对发展很有帮助

# c# - Ninject 3 如何影响对象的生命周期？

> ID：15983327
> 
> 赞同：3
> 
> 时间：2013-04-13T01:49:33.303
> 
> 标签：c#, ninject

在我使用 Ninject 重构我的 DI 项目之前，我有一个简单的测试类和一个简单的方法：

```
 public void TestImport()
    {
        var functionality = new ImportFunctionality();
        functionality.Execute();
    } 
```

当我运行这个“应用程序”（只是一个用于集成测试我的库的沙盒 WPF 客户端应用程序）时，我显示了“主”窗口并单击该窗口上的一个称为此`TestImport`方法的按钮，该方法执行然后我可以测试和调试我的代码，然后当主窗口关闭时，应用程序就死在那里，VS 将退出调试模式。正常的东西。

然后我重构了整个事情，并在代码中使用 Ninject、工厂和接口实现了依赖注入；该`TestImport`方法现在看起来像这样：

```
 public void TestImport()
    {
        using (var kernel = new StandardKernel())
        {
            kernel.Load<SecurityNinjectModule>();
            kernel.Load<HelpersNinjectModule>();
            kernel.Load<ImportFunctionalityNinjectModule>();

            var functionality = kernel.Get<IImportFunctionality>();
            functionality.Execute();
        }
    } 
```

现在，当我运行 WPF 沙盒/测试应用程序时，一切正常，这很好，除了“主”窗口关闭时，*应用程序不再退出并且 Visual Studio 仍处于调试模式*。我添加了调用以`Dispose()`希望修复它，但没有运气；将它包装在一个`using`块中也不能解决它。

*如果我在没有*单击按钮运行方法的情况下运行沙箱`TestImport`，然后关闭主窗口，应用程序将正常关闭。

这将我引向 Ninject 内核对象。`Dispose()`尽管有电话，它会以某种方式保留其资源吗？那么如何正确关闭运行 Ninject 3.0 的应用程序呢？

**编辑** 如果我打开调试/窗口/线程窗口，我会看到所有实例化的线程要么处于睡眠状态，要么“处于睡眠状态，等待或加入”，如果不是“不可用”；一个名为 的线程`.NET System Events`正在休眠、等待或加入；主线程是“管理到本机转换”以及一个名为的线程`vshost.RunParkingWindow`- 这就是我得到的地方[为什么我的 WPF 应用程序在显示 WinForms 对话框后不能正确关闭？](https://stackoverflow.com/questions/7349068/why-wont-my-wpf-application-close-property-after-it-displays-a-winforms-dialog). 答案似乎可行，因为它被接受，但正如@BahriGungor 所说“*使用 System.Environment.Exit 很像使用炸药制作门，因为你不想遵循出口标志*”。它没有说明*为什么会这样*。

有趣的是，它不会始终如一地发生：有时我可以中断并单步执行代码，当我“F5”恢复，然后关闭主窗口时，它确实会正常关闭。这是怎么回事？

**编辑 2** 该功能会显示一个`FileDialog`，如果该对话框未返回 Excel 工作簿的文件名，则不会显示导入窗口。我把它缩小到这个：

*   如果显示导入视图，无论在关闭主应用程序窗口后如何关闭 VS 都会正确退出调试模式。
*   如果导入视图未显示（即`FileDialog`不返回任何可编辑的内容），则 VS在关闭主应用程序窗口后**不会退出调试模式。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:39:36.583

您的 DI 应该有一个[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)，其中 99% 的 DI 代码都在其中。工厂应该是依赖注入的 1%。对于[WPF，即 onStartup 方法](https://stackoverflow.com/questions/9079530/where-is-the-composition-root-in-a-wpf-mdi-application)。

此外，我在您的代码中没有看到您指定 DI 的生命周期管理部分的任何地方。如果您没有指定生命周期管理，`Bind<Samurai>().ToSelf().InSingletonScope();`那么您可能没有得到生命周期管理和处置。[这是有关 ninject 范围的信息](https://github.com/ninject/ninject/wiki/Object-Scopes)。

你说你在途中添加了一个调用来处理某个地方，但是如果你设置了没有弱引用的事件侦听器，则可能会[出现内存泄漏](http://diditwith.net/2007/03/23/SolvingTheProblemWithEventsWeakEventHandlers.aspx)导致缺乏处理。

最后，您是否遵循链接`System.Environment.Exit`问题的其他答案？ **检查调试器中的 Application.Current.Windows 集合以找到有问题的窗口。** [https://stackoverflow.com/a/7349650/57883](https://stackoverflow.com/a/7349650/57883)

您是否尝试过使用其他 win 表单对话框或仅使用一个来查看它是否可重现？

# javascript - html5 音频在搜索时崩溃

> ID：15983329
> 
> 赞同：0
> 
> 时间：2013-04-13T01:49:54.807
> 
> 标签：javascript, asp.net, ajax, html, audio

我有一个 ASP.NET 应用程序，我想使用该标签来播放音乐。在代码隐藏中我写了这个元素

```
<audio controls preload src='PATH/TO/FILE'></audio> 
```

成文字。问题是当我在当前位置后面的位置单击搜索栏时播放器崩溃。

没有错误消息或任何其他响应。它只是停止工作。我必须重新加载页面才能让它再次工作。

向前寻找对于小文件来说效果很好。对于较大的文件（大约 2:00 分钟的歌曲），控件会变灰，直到我再次单击起始位置附近的搜索栏为止。

当我创建一个只有这个音频标签的简单 HTML 文件时，搜索工作。

我正在使用 Chrome v. 26。

我不知道为什么这在 ASP.NET 应用程序中不起作用......

下一个问题是我不能使用 soundmanager2 oder jPlayer 之类的东西。我以前使用过soundmanager2，但我遇到了很多问题。

在上面的测试中，我只使用了一个带有音频标签的声音文件，但在最终状态下会有几个播放器。

声音文件是动态创建的，播放器也是如此，这发生在 ajax 中。我每次都必须重新创建 soundmanager2 对象，并且出现了几个问题。

所以我希望有人可能知道为什么音频标签在 ASP.NET 应用程序中不能正常工作，或者给我一个提示，告诉我如何在一个页面上实现多个音频播放器，每个 ajax 都会动态变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:39:40.570

我终于找到了... [这篇文章](https://stackoverflow.com/questions/3306127/issue-with-html5-audio-control-in-visual-studio-2010-and-asp-net-mvc)帮助了我

问题是声音文件的路径在本地主机上。在我将其上传到服务器并使用该 URL 后，它就可以工作了。

我认为它与简单的 HTML 测试文件一起工作的原因是因为我在那里使用了 wavfile 的绝对路径。

# android - 动态更改通过服务器控制的内容/布局/流

> ID：15983330
> 
> 赞同：0
> 
> 时间：2013-04-13T01:49:54.727
> 
> 标签：android, android-layout, dynamic-controls, dynamic-content

我是android开发的新手，我们有一个非常具体的要求。我们需要即时更改应用程序的内容/布局/流程。例如，我们有一个由一些图像、文本区域和文本框组成的布局。可能会有将文本区域更改为文本框的请求。

我们考虑了这一点，并正在考虑为 apk 提供一个包含所有这些更改的 json/xml。

我的问题是是否可以再次动态重新绘制对象并更改内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:25:16.953

是的，这是可能的。您可以动态设计必须在 Activity UI 屏幕中显示的内容。如果您觉得只有 2 或 3 个不同的 UI 屏幕会被重复使用，那么您可以为这些屏幕创建 XML，您可以在渲染前在 Activity 类的 OnCreate() 中更改它们的标签。LayoutInflater 类在这里会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:50:04.980

当您使用[活动](http://developer.android.com/guide/components/activities.html)和[片段](http://developer.android.com/guide/components/fragments.html)设计 Android 应用程序时，您的 XML 布局定义始终是静态的。如果您想要一个真正的动态布局结构，您应该使用带有指向某个 URL 的 HTML 内容的[Web 视图。](http://developer.android.com/reference/android/webkit/WebView.html)

正如 Rahul 所说，另一种方法是管理“默认情况”。对我来说，这是设计 Android 应用程序的标准方式。

动态内容（值）可以通过对服务器的简单 http 调用来完成，您可以获得视图的值。

导航可以通过切换[Intents](http://developer.android.com/reference/android/content/Intent.html)来处理，但是，在大多数情况下，您必须将这些 Intent 与 UI 元素（如按钮）相关联，并且 ¿ 如果您的布局随时间变化，您如何做到这一点？

我认为，对于您的问题，WebView 可能是一个非常简单的解决方案。

# java - 我的配置文件 struts.xml 是否正确？

> ID：15983333
> 
> 赞同：1
> 
> 时间：2013-04-13T01:50:33.703
> 
> 标签：java, configuration, struts2, struts-action, struts2-interceptors

我想知道这个文件是否正确，因为我不太了解拦截器。

**struts.xml：**

```
<struts>
    <interceptors>
 <interceptor-stack name="storeStack"> 
    <interceptor-ref name="defaultStack"/> 
    <interceptor-ref name="store"> 
        <param name="operationMode">STORE</param> 
    </interceptor-ref> 
</interceptor-stack>
            <interceptor-stack name="retrieveStack"> 
                <interceptor-ref name="defaultStack"/> 
                <interceptor-ref name="store">   
                </interceptor-ref> 
            </interceptor-stack>
        </interceptors>
        <action name="index">
            <result>/JSPs/eleve/view.jsp</result>
        </action>
        <action name="ajoutereleves" class="com.injaz.struts2.actions.NavigateAction" method="navigateToAjouterEleveJsp">
            <result name="ajoutereleves">/JSPs/eleve/addeleve.jsp</result>
        </action>
        <action name="listereleves" class="com.injaz.struts2.actions.NavigateAction" method="navigateToListerElevesJsp">
            <result name="listereleves">/JSPs/eleve/showseleves.jsp</result>
        </action>
        <action name="manageeleves" class="com.injaz.struts2.actions.NavigateAction" method="navigateToUpdateElevesJsp">
            <result name="manageeleves">/JSPs/eleve/manageeleves.jsp</result>
        </action>
         <action name="ajoutereleverecord" class="com.injaz.struts2.actions.AddEleveAction" method="execute">

                <interceptor-ref name="defaultStack"/> 
                <interceptor-ref name="store"/>  
            <result name="success">/JSPs/eleve/addeleve.jsp</result>        
            <result name="error">/JSPs/eleve/addeleve.jsp</result>
        </action>
         <action name="updateeleve" class="com.injaz.struts2.actions.UpdateEleveAction" method="execute"> 
            <result type="json">
                <param name="contentType">text/html</param>
            </result>
        </action>
         <action name="getupdateeleve" class="com.injaz.struts2.actions.EditEleveAction" method="getEleveObject">
            <interceptor-ref name="storeStack" /> 
            <result name="success">/JSPs/eleve/editeleve.jsp</result>
            <result name="error">/JSPs/eleve/editeleve.jsp</result>
        </action>
        <action name="eleveTable" method="getEleveTable" 
                class="com.injaz.struts2.actions.EleveJsonTable">
            <result type="json">
                <param name="contentType">text/html</param>
            </result>
        </action>       
        <action name="validateEleve" class="com.injaz.struts2.validator.EleveValidator" method="validateEleveNom">
        <result type="json">
        <param name="contentType">text/html</param>
        </result>
        </action>   
    </package>
</struts> 
```

我正在使用 Struts 2.3.1 获取更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:26:15.293

不，你`struts.xml`的不正确。拦截器在动作执行之前被调用。它就像一个为请求提供服务的管道。他们每个人都一个接一个地调用。当最后一个拦截器处理完毕时，动作被执行。在操作配置中或通过注释配置要调用的拦截器。有关拦截器的详细说明，请参阅[文档](https://struts.apache.org/core-developers/interceptors)。

重要的是在堆栈上调用拦截器的顺序。有一个`defaultStack`拦截器被收集和适当排序的地方。如果您将自定义拦截器的引用添加到堆栈或操作，它应该遵守它放置的顺序。

xml 配置文件应符合 DTD。

# java - 遍历 ResultSet 时出现 JDBC 异常“ResultSet 关闭后不允许操作”

> ID：15983347
> 
> 赞同：0
> 
> 时间：2013-04-13T01:52:42.623
> 
> 标签：java, mysql, sqlite, resultset, bukkit

我对这段代码有疑问：

```
ResultSet dane = statement.executeQuery("SELECT * FROM ProWarns WHERE blahblah = '" + cel + "'");

while (dane.next()) {
    // some code (only get some string from result)
    if (TimeEnd <= EndTime) {
        statement.executeUpdate(
            "DELETE FROM ProWarns WHERE id = '" + id + "'"); //and error

        statement.executeUpdate(
            "UPDATE ProWarnsPlayers SET num = '" + NewV + "'" WHERE Pl = '"+ tar + "'");
    }
} 
```

错误：java.sql.SQLException：ResultSet 关闭后不允许操作。错误在哪里，我该如何解决？

PS：

我包括我的 DB 类的[Pastebin ，以防它有帮助。](http://pastebin.com/8U7qKq2U)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:59:14.030

对象缓存其结果集，因此当`Statement`您在 for 循环中执行其他操作时，原始结果集会“重置”。当您调用`dane.next`. 从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

选项？使用另一个`Statement`对象来执行内部查询。

# javascript - 输入文本时使文本输入字段的宽度扩大

> ID：15983352
> 
> 赞同：0
> 
> 时间：2013-04-13T01:53:24.497
> 
> 标签：javascript, jquery

我正在尝试拥有一个仅足以处理一个字符的文本输入字段。但是当输入一个字符时，它会向左和向右增长，所以现在它可以容纳 2 个字符。然后，当键入第二个字符时，它会再次增长，以便它可以容纳 3 个字符。

只要用户输入输入，这种情况就会一直持续下去。

这如何在 javascript / jQuery 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:11:55.993

这是一个很好的问题，但没有简单的方法首先你需要在文本输入的 css 中设置最大宽度，

在女巫之后你可以像这样使用一些jQuery

```
$("#input_id").keyup(function(){
    $("body").append("<div id=\"remove_me\">"+$(this).val()+"</div>");
    var width = $("#remove_me").width()+30;
    $(this).animate({"width":width});
    $("#remove_me").remove();
}); 
```

# eclipse - Eclipse运行显示每次都不一样

> ID：15983354
> 
> 赞同：-1
> 
> 时间：2013-04-13T01:53:41.783
> 
> 标签：eclipse

我真的很生气，因为我知道一个问题，但事实并非如此！每次在 Eclipse 中运行我当前的项目，每次的显示都不一样！我的意思是，我运行它一次，它只显示了我的三个组件。我再次运行它，它显示更多。我再次运行它，它显示三个等等。到底发生了什么。这是我在主字符串 args 中运行的代码：

```
 JFrame frame = new JFrame("Survey");
    frame.setSize(500, 500);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel panel = new JPanel(new GridBagLayout());
    panel.setBackground(Color.GRAY);
    frame.add(panel, BorderLayout.NORTH);
    GridBagConstraints c = new GridBagConstraints();

    JLabel label1 = new JLabel("First name:");
    c.gridx = 0;
    c.gridy = 0;
    c.insets = new Insets(5, 5, 5, 5);
    panel.add(label1, c);

    JLabel label2 = new JLabel("Last name:");
    c.gridx = 0;
    c.gridy = 1;
    panel.add(label2, c);

    JTextField text1 = new JTextField(10);
    c.gridx = 1;
    c.gridy = 0;
    panel.add(text1, c);

    JTextField text2 = new JTextField(10);
    c.gridx = 1;
    c.gridy = 1;
    panel.add(text2, c);

    JLabel label3 = new JLabel("What is your favorite sport:");
    c.gridx = 0;
    c.gridy = 2;
    c.gridwidth = 2;
    panel.add(label3, c);

    String[] combobox = {"Basketball", "Soccor", "Other"};
    JComboBox cbx = new JComboBox(combobox);
    cbx.setPreferredSize(new Dimension(150, 20));
    c.gridx = 0;
    c.gridy = 3;
    panel.add(cbx, c);

    JLabel label4 = new JLabel("Comments about yourself:");
    c.gridx = 0;
    c.gridy = 4;
    panel.add(label4, c);

    JTextArea area = new JTextArea();
    area.setPreferredSize(new Dimension(185, 100));
    c.gridx = 0;
    c.gridy = 5;
    c.gridheight = 5;
    panel.add(area, c);

    JButton submit = new JButton("Submit");
    submit.setPreferredSize(new Dimension(20, 20));
    c.gridx = 0;
    c.gridy = 6;
    panel.add(submit, c); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:45:40.863

根本不需要重新验证。**确保您在 EDT 线程上正确创建组件**，您将不再有此类问题。查看以下文章[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

# php - 使用 jquery ajax 删除记录但再次加载表

> ID：15983357
> 
> 赞同：1
> 
> 时间：2013-04-13T01:53:46.317
> 
> 标签：php, jquery

我正在使用 jQuery 和 Ajax 删除记录。我编写的代码删除了一条记录，但再次加载了 HTML 表，这意味着我想避免页面刷新。

这是我的代码：

**评论.php**

```
<script type="text/javascript">
$(document).ready(function(){
    function loadList(){
        $.ajax({
            url: "load_list.php",
            cache: false,
            success : function(html){
                $(".name_list").html(html);
            }
        });
    }
    loadList();

    $("#Submit").click(function() {
        if($(":text").val().length==0)
            {
               // $(this).next().html("Field needs filling");
               $(":text").after('<span class="errorkeyup">Field cannot be empty</span>');
                //return false;
                success = false;
            }
            else
            {
                var name=$("#name").val();
                var message=$("#message").val();
                $.ajax({
                  type:"post",
                   url:"save_list.php",
                   data:"name="+name+"&message="+message,                             
                  success:function(data){
                 loadList();                                
                 } 
                }); 
                return false;
            }
    });
    $(".delete_button").on("click", function(){
        //this deletes the row clicked on with an alert and then reloads the list
        var id = $(this).attr("id");
        /*var x=window.confirm("Are you sure you want to delete this item?")
        if (x==true){*/
            $.ajax({
                type: "POST",
                url: "delete.php",
                data: "id="+ id,
                success: function(){
                    loadList();
                }
            });
       // }
        return false;
    });

});
</script>
</head>

<body>
<div id="form">

<form method="post" name="form" action="">
<div id="content">
 Name :    <input type="text" name="name" id="name" />
               </br>
               Message : <input type="text" name="message" id="message" />
               </br>
               </div>
<input type="button" value="Submit" id="Submit">

</form>
</div>
<div class="name_list"></div>

</body> 
```

**加载列表.php**

```
<?php
include('connection.php');
$sqlnew = 'Select * from login order by id ASC';
    $res = mysql_query($sqlnew);
    echo'<table border="1">';
    echo'<tr>';
    echo'<td>SrNo.</td>';
    echo '<td>Name:</td>';
    echo '<td>Message:</td>';
    echo '<td>Delete</td>';
    echo'</tr>';
    $i=1;
    while($row = mysql_fetch_array($res))
    {
        echo '<tr>';
        echo'<td>'.$i.'</td>';
        echo'<td>'.$row['username'].'</td>';
        echo '<td>'.$row['message'].'</td>';
        echo"<td>
          <a id='".$row['id']."' href=delete.php?id=".$row['id']."&type=Delete class=delete_button>Delete</a></td>";
        echo"<td>
          <a id='".$row['id']."' href=comment.php?id=".$row['id']."&type=edit class=edit_button>Edit</a></td>";         
        echo '</tr>';
        $i++;

    }
    echo'</table>';

?> 
```

**删除.php**

```
<?php
include('connection.php');

  if(isset($_REQUEST["id"]))
  {
  $cmd=mysql_query("delete from login where id=" .$_REQUEST["id"] .";");
   header("location: comment.php");
  }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:11:43.817

当你`$.ajax()`调用 for`$('.delete_button')`时，你不应该在那里调用你的`loadList()`函数，因为那是重新加载表的原因，而你应该只删除从表中删除的一个条目。

也许您可以使用类似于此的内容将其删除，放置在删除按钮成功回调中：

```
$.ajax({
    type: "POST",
    url: "delete.php",
    data: "id="+ id,
    success: function()
    {
        $(this).parent().parent().remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:30:17.033

```
<?php
include('connection.php');

  if(isset($_REQUEST["id"]))
  {
  $cmd=mysql_query("delete from login where id=" .$_REQUEST["id"] .";");
   header("location: comment.php");
  }

?> 
```

在此代码中删除行

```
header("location: comment.php"); 
```

最终代码是，

```
<?php
include('connection.php');

  if(isset($_REQUEST["id"]))
  {
   $cmd=mysql_query("delete from login where id=" .$_REQUEST["id"] .";");
   echo '1';
  } else {
   echo '0';
  }

  exit;
?> 
```

在删除函数中，执行删除查询后，需要回显“1”或“0”。让我们说回声'1'；成功删除时，删除不成功时回显“0”。因此，基于 1 或 0，您可以从表中删除那些已删除的行，

$(".delete_button").on("click", function(){ //这会删除带有警报单击的行，然后重新加载列表 var obj = $(this); var id = obj.attr(" ID”）;

```
 /*var x=window.confirm("Are you sure you want to delete this item?")
    if (x==true){*/
        $.ajax({
            type: "POST",
            url: "delete.php",
            data: "id="+ id,
            success: function(response){
                if(response == '1') {
                      obj.parent.remove();
                }
            }
        });
   // }
    return false;
}); 
```

# powershell - 如何将驱动器号映射到 PowerShell 中的本地路径？

> ID：15983359
> 
> 赞同：6
> 
> 时间：2013-04-13T01:54:00.010
> 
> 标签：powershell

在 PowerShell 中，是否可以将驱动器号映射到本地路径？

所以例如映射`x:\`到`c:\myfolder1\myfolder2\`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T02:04:18.100

你可以使用[`subst`](http://technet.microsoft.com/en-us/library/bb491006.aspx)：

> `subst x: c:\myfolder1\myfolder2\`

或[`New-PSDrive`](http://technet.microsoft.com/en-us/library/hh849829.aspx)：

> `New-PSDrive -Name x -PSProvider FileSystem -Root c:\myfolder1\myfolder2\`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-03T23:47:14.847

以下语句也将起作用（并且它仅使用本机 powershell cmdlet）：

```
New-PsDrive -Name [DRIVELETTER] -PSProvider filesystem -Root "\\localhost\C$\[PATH]" -Persist 
```

# r - R 与原始编号 +1 重复的行名

> ID：15983362
> 
> 赞同：0
> 
> 时间：2013-04-13T01:54:12.867
> 
> 标签：r, dataframe

问题是：我正在对一些数据集进行模拟和预测，基本上问题是在对 10k 折进行交叉验证时，它会随机抽取 10% 的原始数据，但是当将结果放入整个数据帧时，合并它们时，我会得到额外的 1 或 2 或 ..。

我的例子很糟糕，所以我从另一篇文章中借用它：[R 中的 rbind 给出了一个奇怪的行名](https://stackoverflow.com/questions/5524140/rbind-in-r-gives-a-weird-rowname)

```
 > tt1[2,]
         date  close emp pred
 2 1982-03-24 112.97  -1    1

 > tt2[2,]
         date  close emp pred
 2 1982-03-25 113.21   1    1 
```

问题：

```
 > rbind(tt1[2,],tt2[2,])
          date  close emp pred
 2  1982-03-24 112.97  -1    1
 21 1982-03-25 113.21   1    1 
```

我想要的是：

```
 > rbind(tt1[2,],tt2[2,])
          date  close emp pred
 2  1982-03-24 112.97  -1    1
 2  1982-03-25 113.21   1    1 
```

任何帮助都会很棒，谢谢大家。

最好的，K

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:08:26.743

此示例使用最初发布的数据：

```
data_1 <- structure(list(ID = 1:3, GPA = c(3, 3.5, 4)), .Names = c("ID", 
"GPA"), class = "data.frame", row.names = c("1", "2", "3"))
data_2 <- structure(list(ID = 3:5, GPA = c(3.1, 3.2, 3.3)), .Names = c("ID", 
"GPA"), class = "data.frame", row.names = c("3", "4", "5")) 
```

`ID`（忽略列与行名一致的事实。）

您可以捕获原始行名称（如果需要，稍后应用它们）：

```
rbind(cbind(rn=rownames(data_1), data_1), cbind(rn=rownames(data_2), data_2))
##    rn ID GPA
## 1   1  1 3.0
## 2   2  2 3.5
## 3   3  3 4.0
## 31  3  3 3.1
## 4   4  4 3.2
## 5   5  5 3.3 
```

这可以通过几种方式进行参数化。这是一个：

```
d <- list(data_1, data_2)
do.call(rbind, lapply(d, function(x) cbind(rn=rownames(x), x)))
##    rn ID GPA
## 1   1  1 3.0
## 2   2  2 3.5
## 3   3  3 4.0
## 31  3  3 3.1
## 4   4  4 3.2
## 5   5  5 3.3 
```

# java - org.hibernate.exception.DataException 虽然被捕获

> ID：15983371
> 
> 赞同：1
> 
> 时间：2013-04-13T01:55:21.970
> 
> 标签：java, hibernate, exception

我正在使用带有对象“Cliente”的Hibernate（hibernate3.jar），如下所示：

```
public class Cliente {
    private nombre;
    ...
    //set and get
} 
```

“名词”属性映射为：

```
<property name="nombre" type="string">
    <column name="nombre" length="30" not-null="true" />
</property> 
```

正如你在上面看到的，有一个字符长度限制 squals to `30`。事情变得复杂了......我正在尝试用长名称更新名称以强制出错：

```
Session session = HibernateUtil.getSessionFactory().openSession();
Transaction tx = session.beginTransaction();

try{
    cliente.setNombre(textField.getText()); //here
    session.update(cliente);
    tx.commit();
    list.repaint();
} catch (org.hibernate.exception.DataException e) {
    JOptionPane.showMessageDialog(null, "Data entered too long");
    session.getTransaction().rollback();
} finally {
    session.close();
} 
```

当名称超过允许的限制时，`org.hibernate.exception.DataException`会抛出此异常（作为调试器的详细信息，它位于以下行`x.commit();`：

```
SEVERE: Data truncation: Data too long for column 'nombre' at row 1
Hibernate: update gimnasiobd.cliente set nombre=? where idCliente=?
abr 12, 2013 7:40:07 PM org.hibernate.event.def.AbstractFlushingEventListener performExecutions
SEVERE: Could not synchronize database state with session
org.hibernate.exception.DataException: Could not execute JDBC batch update 
```

这里有什么问题？好吧...虽然捕获了异常（显示了 JOPtion），但控制台中显示了异常，就好像捕获不起作用一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:59:11.827

为列名 nombre 提供较大的长度。例如

```
<column name="nombre" length="200" not-null="true" /> 
```

或删除长度属性。它将根据您的数据库供应商自动为 String 定义最大值

请参阅下面的链接

[解决方案1](https://stackoverflow.com/questions/7509769/how-to-increase-length-of-a-string-in-mysql-while-mapping-using-jpa)

另请参阅下面的链接

```
https://stackoverflow.com/questions/1281188/text-field-using-hibernate-annotation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:07:48.273

用另一个 try-catch包围`rollback()`它，看看它是否是异常的原因

```
catch (org.hibernate.exception.DataException e) {
    JOptionPane.showMessageDialog(null, "Data entered too long");
    try {
        session.getTransaction().rollback();
    } catch (HibernateException ex) {}
} 
```

我无法从文档中确定回滚为什么会引发 DataException，但 javadoc 指出回滚可以引发 HibernateException，它是 DataException 的超类。

# java-me - J2ME 益智游戏

> ID：15983375
> 
> 赞同：0
> 
> 时间：2013-04-13T01:55:42.550
> 
> 标签：java-me, puzzle

我正在创建一个类似于 Gift Quest 的游戏，我必须交换元素，检查垂直和水平重复元素，然后删除重复的元素（如果 3 个元素在一行或一列中相同，则删除这些元素并填充新元素）

```
int [][] Board = new int[5][5]; 
```

我有一个整数数组作为我的板，我为每个礼物定义了一个特定的整数值，例如巧克力 = 1、糖果 = 2 等

```
for(int i=0;i<5;i++)
{
     for(int j=0;j<5;j++)
     {
         Board[i][j] = rand.nextInt(5);
     }
} 
```

我也完成了交换部分，现在我想检查电路板是否在一行和一列中是否有超过 3 次相同的元素。如果是，则将数组中的那个位置留空。所以我可以填充它。

有人可以帮我检查一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:01:54.467

```
int counter = 0; 
int currentTile = 0;
for(int i=0;i<5;i++)
    {
         for(int j=0;j<5;j++)
         {
              if(Board[i,j] == currentTile)
                 Counter++;
              if(Counter == 3)
                 DoStuff(); //Yay 3 in a row!
              currentTile = Board[i,j];

         }
counter = 0;
    } 
```

做同样的事情，但交换 x 轴的循环

# ios - 在选项卡中的 ViewDidLoad 之前指定委托

> ID：15983376
> 
> 赞同：0
> 
> 时间：2013-04-13T01:55:46.230
> 
> 标签：ios, delegates, uitabcontroller

所以，我跟着这个教程：[http ://enroyed.com/ios/how-to-pass-data-between-ios-tab-bars-using-delegate/](http://enroyed.com/ios/how-to-pass-data-between-ios-tab-bars-using-delegate/)

本教程最重要的部分：

```
- (void)viewDidLoad
{
[super viewDidLoad];
   SecondViewController *svc = [self.tabBarController.viewControllers objectAtIndex:1];
svc.delegate = self; //important !! otherwise delegation will not work !
} 
```

问题是即使我把它放在“viewWillLoad”中，它仍然会迫使我在它初始化之前点击我的标签。在单击选项卡之前如何指定它？

**编辑**

我有一个三标签项目。我在链接中使用了该教程，将数据从选项卡 1 传递到选项卡 2。传递的数据是从选项卡 1 上的 web 视图到选项卡 2 上的 url 的 url。当我单击第一个选项卡上的链接时，url 会通过。

数据确实通过了，但前提是我先物理单击第二个选项卡，然后单击返回第一个选项卡并单击链接。

因此，在我看来，我上面的代码只有在我实际单击第二个选项卡时才会运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:33:01.290

您的问题是 - 直到您实际转到选项卡项目 2 之前，`secondViewController`它还没有完全初始化，因此没有数据可以从 vc2 传输到 vc1。特别是，`secondViewController`的视图还没有加载，所以它的滑块还没有任何值，也没有滑块，所以也没有 IBAction 方法可以调用来触发委托方法。实际上，由于数据传输仅在 VC2 中移动滑块时触发，因此很明显，在您*转到*vc2*并移动滑块*之前，什么都不会发生。

您链接到的示例使用委托模式，这似乎是处理您的问题的一种相当糟糕的方法。委托模式最适合在委托人（拥有）和被委托人（所有者）之间存在层次关系的场景......并非总是如此，但最常见。在标签栏控制器中，这些关系更像是标签栏控制器本身的亲属关系。

你没有在你的问题中提供足够的细节来说明你想要达到的目标，但你需要考虑这一点：

当 tabBarController 加载时，它的所有子视图控制器都被*初始化*，但它们的视图没有*加载*。

这意味着这些方法确实被调用：

```
//if loading from a xib or in code
- (id) initWithNibName:bundle

//if loading from a storyboard
- (id) initWithCoder:
- (void) awakeFromNib 
```

但是视图加载方法（`viewDidLoad`等`viewWillAppear`）不会被调用，因为除非您实际打开相关选项卡，否则视图不会被加载。

您可以通过将初始化变量放入 viewController2（在其中一种`init`方法中）并通过 vc1 中的属性语法访问该变量来解决此问题。但是，您不妨直接将初始化值放入 vc1。您需要仔细考虑每个 vc 是如何相互依赖的，如何解耦这种依赖关系，或许还需要考虑如何设置两个 vc 都可以根据需要访问的独立数据源。这可能是一个模型类，或`NSUserDefault`s，或你的属性`appDelegate`......只是许多可能的解决方案中的几个。

# html - 静态标题不起作用：主题森林网站模板

> ID：15983377
> 
> 赞同：-2
> 
> 时间：2013-04-13T01:55:50.027
> 
> 标签：html, css, menu, static, header

我从这里购买了一个网站 HTML5 模板：http: [//themeforest.net/item/porto-responsive-html5-template/full_screen_preview/4106987](http://themeforest.net/item/porto-responsive-html5-template/full_screen_preview/4106987)

但是，在上传 logo.png 后，静态标题不起作用。您可以[在此处](http://themeforest.net/item/porto-responsive-html5-template/full_screen_preview/4106987)从演示站点中看到，当您滚动时，标题会保留。但是，它似乎在我的网站（marketbot.net）上出现了故障。它根本没有响应！我必须添加/替换/删除什么代码？我所做的只是上传 logo.png 并且标题不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:11:58.787

**见主题论坛**

[http://www.crivos.com/forums/](http://www.crivos.com/forums/)

导航栏固定

[http://www.crivos.com/forums/topic/navbar-fixed/](http://www.crivos.com/forums/topic/navbar-fixed/)

更改主页徽标

[http://www.crivos.com/forums/topic/changeing-logo-on-home-page/](http://www.crivos.com/forums/topic/changing-logo-on-home-page/)

# symfony - 在 FOSUserBundle 上记录注册时间和登录时间

> ID：15983378
> 
> 赞同：2
> 
> 时间：2013-04-13T01:56:07.343
> 
> 标签：symfony, fosuserbundle

FOS用户包

我想在用户注册时在用户表上记录 createdAt、UpdateAt、loginAt 等数据。

我在想的是我应该把这些绳子放在哪里。

我可以找到类似的参考

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md)

它说覆盖 /src/Acme/UserBundle/Controller/RegistrationController.php

```
class RegistrationController extends BaseController
{
    public function registerAction()
    {
        $form = $this->container->get('fos_user.registration.form');
        $formHandler = $this->container->get('fos_user.registration.form.handler');
        $confirmationEnabled = $this->container->getParameter('fos_user.registration.confirmation.enabled');

        $process = $formHandler->process($confirmationEnabled);
        if ($process) {
            $user = $form->getData();

            /*****************************************************
             * Add new functionality (e.g. log the registration) *
             *****************************************************/
            $this->container->get('logger')->info(
                sprintf('New user registration: %s', $user)
            );

            if ($confirmationEnabled) {
                $this->container->get('session')->set('fos_user_send_confirmation_email/email', $user->getEmail());
                $route = 'fos_user_registration_check_email';
            } else {
                $this->authenticateUser($user);
                $route = 'fos_user_registration_confirmed';
            }

            $this->setFlash('fos_user_success', 'registration.flash.user_created');
            $url = $this->container->get('router')->generate($route);

            return new RedirectResponse($url);
        }

        return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:register.html.'.$this->getEngine(), array(
            'form' => $form->createView(),
        )); 
```

但我不知道如何使用 formdata 将数据插入表中

像

```
$post = $form->getData();
$post->setCreatedAt(new \DateTime()); 
$post->setUpdatedAt(new \DateTime());
$em = $this->getDoctrine()->getEntityManager();
$em->persist($post);
$em->flush(); 
```

我是 symfony2 的新手。我想我仍然碰到 symfony2 的基本逻辑。谢谢你的好意回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T19:46:04.763

我解决了这个问题。

我添加了 HasLifecycleCallbacks 和两个函数 prePersist,preUpdate

在 Acme/UserBundle/Entity/User.php

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 *
 * @ORM\HasLifecycleCallbacks 
 *
 */
class User extends BaseUser
{

     /**
     * @ORM\PrePersist()
     * 
     */

    public function prePersist()
    {
        $this->createdAt = new \DateTime;
        $this->updatedAt = new \DateTime;
    }

    /**
     * Hook on pre-update operations
     * @ORM\PreUpdate()
     */
    public function preUpdate()
    {
        $this->updatedAt = new \DateTime;
    } 
```

感谢您观看和帮助我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:18:05.060

如果您想将数据保留在数据库中，请让您的`User`类扩展`FOS\UserBundle\Entity\User`该类。之后，您将能够在其中添加其他实体字段。

看看这里了解如何扩展该类：[https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T22:09:04.430

您可以安装[**StofDoctrineExtensionsBundle**](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst)并使用**Timestampable**功能。

然后，在您的 User 实体类中，您可以添加：

```
/**
 * @ORM\Column(type="datetime")
 * @Gedmo\Timestampable(on="create")
 */
protected $createdAt;

/**
 * @ORM\Column(type="datetime", nullable=true)
 * @Gedmo\Timestampable(on="update")
 */
protected $updatedAt; 
```

不要忘记`use Gedmo\Mapping\Annotation as Gedmo;`在顶部添加以使注释起作用。

这正是您使用 prePersist 和 preUpdate 手动执行的操作，但它节省了几行代码并使代码更整洁。

# php - 如何使用 PHP 从本地服务器显示记事本/文本文件的文件名

> ID：15983380
> 
> 赞同：-3
> 
> 时间：2013-04-13T01:57:06.777
> 
> 标签：php, html

我在文档根目录中存储了一个记事本/文本文件。我没有将文件保存在数据库中。请告诉我如何获取文件的文件名并按顺序显示文件。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:02:43.423

您是否尝试过类似`file_get_contents`功能的东西？听起来你想做这样的事情[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php) 如果你想显示文件的内容，你可以这样调用：

```
$file = file_get_contents('/people.txt', FILE_USE_INCLUDE_PATH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:02:27.357

这段代码

```
<?php
if ($directory = opendir('/')) { // if the dir can be opened
    while (false !== ($filename = readdir($directory))) {
        echo "$filename\n"; //printing file names
    }
    closedir($directory);
}
?> 
```

*（来自[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)）*

将显示文件的无序列表。显示它已订购。您可以将其放入数组中，然后对其进行排序。

但是，如果您有一个包含文件名的文本文件，请使用`file_get_contents`（*[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)*），将其放入数组中，然后也对其进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T02:04:11.523

```
<?php
$txtFiles = glob("*.txt")
?>

<html>
 <ul>
  <?php foreach ( $txtFiles as $fileName ) { ?>
  <li><?php echo $filename ?></li>
  <?php } ?>
 </ul>
</html> 
```

检查[http://php.net/glob](http://php.net/glob)

# python - 根据链接从网站中提取图像

> ID：15983388
> 
> 赞同：0
> 
> 时间：2013-04-13T01:58:07.007
> 
> 标签：python, html, python-2.7, beautifulsoup

我目前有代码可以使用 BeautifulSoup 库在 html 文档中提取所有图像标签。我想知道 Python 中是否有一种方法可以通过图像标签中链接元素指向的图像以编程方式将图像本地下载到您的计算机。这是我获取网页中所有图像标签的代码。

```
import urllib2
from bs4 import BeautifulSoup

#Retrieve object containing website information
page = urllib2.urlopen("http://google.com")
soup = BeautifulSoup(page)
#Pull image tags
print soup.findAll('img') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:17:25.980

您需要做的就是解析 img 标签以找到 url 并使用 urllib.urlretrieve 之类的东西下载它。

# java - 无法识别 java 文件中的“import org.junit.Assert”

> ID：15983406
> 
> 赞同：1
> 
> 时间：2013-04-13T02:00:38.123
> 
> 标签：java

我有这个问题，我无法理解为什么它不存在。

基本上，当我编译以下命令时：

```
C:\Users\Bill\My Documents\Antbook\ch04> javac -d build\test test\org\example\antbook\junit\SimpleTest.java 
```

它给了我一个错误说：“java:4 错误：包 org.junit 不存在”，与第 5 行相同。另外，在第 9 行，它找不到“@Test”。

继承人，代码：

```
package org.example.antbook.junit; 

//import JUnit4 classes:
import static org.junit.Assert.*;
import org.junit.Test;

public class SimpleTest
{
    @Test    
    public void testSomething() 
    {
        assertTrue("MULTIPLICATION???", 4 == (2 * 2));
    }
} 
```

任何人都可以提出任何建议吗？我是否打算将包含 Junit 类的 jar 文件复制到目录中？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:15:22.657

最好的方法是把它放在你的库（即 jar 文件）的专用文件夹中，并在你`javac`在命令行上执行时将该目录包含在类路径中。在这种情况下，如果您只使用一个 jar 文件`junit-4.11.jar`，那么这将起作用。

```
C:\Users\Bill\My Documents\Antbook\ch04> javac -cp yourLibDir\junit-4.11.jar -d build\test test\org\example\antbook\junit\SimpleTest.java 
```

如果您有更多 jar 文件，请使用 a`*`将所有 jar 文件包含在类路径上的目录中：

```
 javac -cp yourLibDir\* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:03:08.297

您需要在 lib 文件夹下添加 junit-latestversion.jar 并将其包含在您的类路径中

这是从命令行添加类路径的方法

java -cp jar1:jar2:jar3:dir1:. 你好世界

这是链接

```
http://stackoverflow.com/questions/2096283/including-jars-in-classpath-on-commandline-javac-or-apt 
```

# coldfusion - Coldfusion 10 sessionTimeout 不起作用

> ID：15983410
> 
> 赞同：1
> 
> 时间：2013-04-13T02:01:38.163
> 
> 标签：coldfusion, session-timeout, coldfusion-10, application.cfc

我创建了以下 Application.cfc 并且除了一件事之外一切正常。我试图让 Application.cfc 在一段时间不活动后注销。但是，我的任何努力`ApplicationTimeout`都`SessionTimeout`没有奏效。

有人有建议吗？

谢谢你

```
<cfcomponent> 
<cfset This.name = "AndWhat"> 
<cfset This.sessionManagement="True"> 
<cfset This.loginstorage="session"> 
<cfset This.datasource = "database">
<cfset This.ormenabled = "true">
<cfset This.applicationTimeout = createTimeSpan( 0, 0, 1, 0 )>
<cfset This.sessionTimeout = createTimeSpan( 0, 0, 1, 0)>

<cffunction name="onRequestStart" access="remote" > 
    <cfif IsDefined("Form.logout")> 
        <cflogout> 
    </cfif> 
    <cflogin >
        <cfif NOT IsDefined("cflogin")> 
            <cfinclude template="loguser.cfm"> 
            <cfabort> 
        <cfelse> 
            <cfif cflogin.name IS "" OR cflogin.password IS ""> 
                <cfoutput> 
                    <script type="text/javascript">
                        alert("Um, Really?! Please supply a valid username and password!");
                    </script>
                </cfoutput> 
                <cfinclude template="loguser.cfm"> 
                <cfabort> 
            <cfelse > 
                 <cfquery name="myNewLoginQuery" dataSource="database"> 
                    SELECT username, password, policy
                    FROM people 
                    WHERE 
                    username = '#cflogin.name#' 
                    AND password = '#cflogin.password#' 
                </cfquery> 
                <cfif loginQuery.policy NEQ ""> 
                    <cfloginuser name="#cflogin.name#" Password = "#cflogin.password#"> 
                <cfelse> 
                    <cfoutput> 
                        <script type="text/javascript">
                            alert("Um, Really?! Please supply a valid username and password!");
                        </script>
                    </cfoutput>     
                    <cfinclude template="loguser.cfm"> 
                    <cfabort> 
                </cfif> 
            </cfif>     
        </cfif> 

    </cflogin>
</cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T11:05:48.973

尝试将属性**idletimeout**添加到**cflogin**标记。将 idletimeout 的值设置为 sessionTimeout 的值。您可以在此处查看**cflogin的文档：** [http ://help.adobe.com/livedocs/coldfusion/8/htmldocs/help.html?content=Tags_j-l_07.html](http://help.adobe.com/livedocs/coldfusion/8/htmldocs/help.html?content=Tags_j-l_07.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T03:26:43.387

我遇到了类似的问题。但是你永远不应该在没有 cfqueryparam 标签的情况下使用用户提供的数据运行 cfquery。您要求在没有它的情况下进行 SQL 注入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T05:23:36.983

需要使用 CreateTimeSpan 变量为 sessionTimeout 变量生成时间戳。

# c# - 如何将我的单声道程序添加到启动中？

> ID：15983413
> 
> 赞同：1
> 
> 时间：2013-04-13T02:02:18.487
> 
> 标签：c#, ubuntu, mono, amazon-ec2

我对 Ubuntu 很陌生。我在 EC2 上部署了一个单声道应用程序。目前我`mono folder/app.exe`用来启动程序。系统重新启动时如何运行？

提前致谢。

**更新：-**除了以下答案，我已将文件夹移至`/opt`. 否则会抛出 library not found 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:02:31.043

我建议使用暴发户。例子：

/etc/init/app.exe.conf

```
description "My Mono app"

start on runlevel [2345]
stop on runlevel [016]

setuid nobody
setgid nogroup
respawn
console log

exec /path/to/app.exe 
```

它将以nobody 用户身份运行您的应用程序，如果它崩溃则重新启动它并将所有输出记录到/var/log/upstart/app.exe.log。要手动启动和停止它，您可以使用“start app.exe”和“stop app.exe”。您当然可以将配置文件命名为其他名称，例如 myapp.conf。有关更多信息，请参阅新贵网站：http: [//upstart.ubuntu.com/](http://upstart.ubuntu.com/)

# php - 在表单中识别 MySQL ID

> ID：15983420
> 
> 赞同：1
> 
> 时间：2013-04-13T02:02:44.860
> 
> 标签：php, mysql, forms, identify

使用以下代码：

```
<?php
print"<form name='delete' action="" method='POST'>
<input type='text' name='ID' value=".$info['ID'].">
<input type='submit' value='Delete Car' onclick='deleteRecord(); return false;'>
</form>";
?> 
```

给我以下错误消息，这反过来又不会让我加载页面：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in (etc)... 
```

它旨在从用户输入中获取 MySQL 记录的 ID。

那有什么问题？我有另一个文件可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:20:36.863

看`<form name='delete' action=""`。我认为问题在于双引号。将其更改为`<form name='delete' action=''`，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:24:15.337

使用此代码：

```
<form name="delete" action="" method="POST">
    <!-- Use php echo instead of print -->
    <input type="text" name="id" value="<?php echo $info['ID'] ?>">
    <!-- Try not to use inline javascript -->
    <button type="submit" onClick="deleteRecord(); return false"></button>
</form> 
```

在`action=""`搞乱你的php的引号中，所以我建议不要用php打印html标签。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:07:23.253

也许附近某处缺少 PHP 结束标记？如在`?>`

或者只是文件中某处的语法错误。

# python - 查找排名最高的值

> ID：15983425
> 
> 赞同：1
> 
> 时间：2013-04-13T02:03:09.050
> 
> 标签：python

我有类别

```
Rank   Fruits:      Vegetable:    Years:
1      Apple        Lettuce       1900-1909      
2      Pineapple    Carrot        1900-1909
3      Orange       Potato        1900-1909
4      Banana       Beans         1900-1909
 Rank   Fruits:      Vegetable:    Years:
 1      Banana       Carrot        1910-1919      
 2      Orange       Potato        1910-1919
 3      Apple        Beans         1910-1919
 4      Pineapple    Lettuce       1910-1919 
```

这是我上面给出的数据。我想找出香蕉什么时候最受欢迎（也就是排名最接近 1 的时候）。我还需要找出胡萝卜最流行的时间。

例如，我需要它来显示 Carrot 的结果是 1910-1919，而 Banana 的结果是 1910-1919。

我已经搞砸了几个小时。我曾尝试将它们放入集合并使用键和值对其进行配置，但我所做的一切都没有奏效。我非常感谢您的帮助。谢谢！

```
def getHighRank(data):
    nameSet=()
    nameList=[]
    for names in data:
        nameList.append[1]
        nameList.append[2] 
```

这就是我到目前为止所拥有的。我尝试将水果和蔬菜放入一个列表中。我正在考虑将其转换为一组，但我对现在该做什么一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:50:17.970

```
>>> d = {}
>>> with open('test.txt') as f:
        print f.read() # shows the file structure

Rank   Fruits:      Vegetable:    Years:
1      Apple        Lettuce       1900-1909      
2      Pineapple    Carrot        1900-1909
3      Orange       Potato        1900-1909
4      Banana       Beans         1900-1909
Rank   Fruits:      Vegetable:    Years:
1      Banana       Carrot        1910-1919      
2      Orange       Potato        1910-1919
3      Apple        Beans         1910-1919
4      Pineapple    Lettuce       1910-1919
>>> with open('test.txt') as f:
        for line in f:
            try:
                rank, fruit, vegetable, year = line.split()
                for k in (fruit, vegetable): # for both the fruit and veg
                    t = (rank, year) # tuple of rank and year
                    d[k] = min(d.get(k, t), t) # set it to the min (rank, year)
            except: # skip headers
                pass

>>> d['Apple'] # fast lookup
('1', '1900-1909')
>>> d['Apple'][1]
'1900-1909'
>>> d['Carrot'][1]
'1910-1919'
>>> d['Banana'][1]
'1910-1919' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:38:25.743

以下是您如何获得`"Carrot"`. 您应该能够从那里继续：

```
with open('filename') as f:
    print min(row.split() for row in f if row[:1].isdigit() 
                                       and 'Carrot' in row)[3]
# prints: 1910-1919 
```

# perl - 检测子进程环境变量变化

> ID：15983426
> 
> 赞同：1
> 
> 时间：2013-04-13T02:03:12.987
> 
> 标签：perl, environment-variables, system-calls

我正在运行来自 Perl 的系统命令的动态列表。有时，这些命令是对环境变量进行（临时/进程中）修改的脚本。例如，考虑这个简单的脚本（目前是为 Windows 制作的）：

`Script-A-pl:`

```
use strict;
use warnings;
use feature ':5.16';

$ENV{NEW_VAR} = 'this is new var';
say "Script-A.pl can read the new var: ", `echo %NEW_VAR%`; 
```

`Output: Script-A.pl can read the new var: this is new var`

现在想象一下`Parent.pl`，我需要调用from ，`Script-A.pl`然后调用`Script-B.pl`，这取决于环境变量`NEW_VAR`。所以这就是它们的执行方式：

`Parent.pl:`

```
use strict;
use warnings;
use feature ':5.16';

my @commands = ('perl Script-A.pl', 'perl Script-B.pl');

for my $i (@commands) {
    system($i);
} 
```

除了`Script-A.pl`无法看到由`Script-B.pl`.

我尝试了不同的方法来调用脚本，即使 IPC::Open3 打开一个 shell 并在那里一个一个地运行命令列表，但这也不起作用。

有没有办法可以从 Parent.pl 使这些更改对后续系统调用可见？

感谢您的评论！

弗朗西斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:32:28.237

`%ENV`代表*您的 Perl 脚本*的系统环境，而不是永久的系统环境。对其所做的更改仅适用于您的脚本进程（以及任何子进程）。由于您使用 调用所有脚本`system`，因此每个脚本的更改仅在该脚本的持续时间内持续进行。

要克服这个问题，请尝试在同一进程而不是不同进程中运行所有 Perl 脚本。

```
my @commands = ('Script-A.pl', 'Script-B.pl', 'echo "some other command"');

for my $cmd (@commands) {
    if ($cmd =~ /\.pl$/)
    {
        do $cmd;
    }
    else
    {
        system($cmd);
    }
} 
```

`do <FILE>`是一种包含另一个 Perl 脚本中的代码并运行它的简单方法。它确保您的所有脚本都在同一个进程中，因此更改`%ENV`将在您的主脚本中持续存在。

`do <FILE>`为每个文件提供一个单独的词法变量空间，因此您不必担心声明的变量会`my`在文件之间发生冲突。但是，它们确实共享相同的全局变量空间，因此在以这种方式运行时，表现不佳的脚本（例如设置特殊变量，例如`$/`不使用`local`）可能会弄乱其他脚本的行为。使用此方法时，您需要检查一切是否正常。

另一个问题是，上面的代码假设 Perl 脚本没有参数。如果他们有争论，那是行不通的。但是，您可以解决此问题：

```
my @commands = ('Script-A.pl arg1 arg2');

for my $cmd (@commands) {
    if ($cmd =~ /\.pl\b\s*(.*)$/)
    {
        local @ARGV = split ' ', $1;
        do $cmd;
    }
    else
    {
        system($cmd);
    }
} 
```

给每个脚本一个本地副本`@ARGV`使它看起来像是用参数调用它。此代码仅适用于简单参数（无空格，无 shell 魔术）。

# wpf - 如何声明“日期”类型的变量？不是“日期时间？”

> ID：15983427
> 
> 赞同：1
> 
> 时间：2013-04-13T02:03:18.343
> 
> 标签：wpf

我创建了患者表格，用户可能会或可能不会输入患者的出生日期。我使用的控件是 Date Picker 并将其绑定到 PatientDateOfBirth 但是当我尝试访问 PatientDateOfBirth.HasValue 时，它​​给了我 null。

财产

```
public DateTime? PatientDateOfBirth
    {
        get
        {
            if (_patientDateOfBirth.HasValue)
                return _patientDateOfBirth.Value;
            else
                return null;
        }
        set
        {
            _patientDateOfBirth = value;
            OnPropertyChanged("PatientDateOfBirth");
        }
    } 
```

XAML

```
<DatePicker x:Name="dPPatDOB" Text="{Binding Path=Model.PatientDateOfBirth, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Height="25" Grid.Column="1" Grid.Row="3" Margin="12,11,98,29"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:43:03.717

没有`Date`你必须使用`DateTime`的类型并忽略时间

该`PatientDateOfBirth`属性返回 null 因为您正在使用`Text`Property

```
<DatePicker x:Name="dPPatDOB" SelectedDate="{Binding Path=Model.PatientDateOfBirth, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Height="25" Grid.Column="1" Grid.Row="3" Margin="12,11,98,29"/> 
```

注意：`SelectedDate`不使用属性`Text`

# ruby - 在 ruby 中对 2 个字符串执行按位异或

> ID：15983428
> 
> 赞同：1
> 
> 时间：2013-04-13T02:03:20.347
> 
> 标签：ruby, bit-manipulation, xor

我正在尝试对 ruby​​ 中的两个键字符串执行按位异或：

键1：0123456789abcdeffedcba9876543210
键2：00000000000000000000000000000000

有人可以告诉我如何做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T04:57:45.233

[解压](http://www.ruby-doc.org/core-2.0/String.html#method-i-unpack)成字节，压缩在一起，映射异或，重新[打包](http://www.ruby-doc.org/core-2.0/Array.html#method-i-pack)。

```
s1='0123456789abcdeffedcba9876543210'
s2='00000000000000000000000000000000'
xored = s1.unpack('C*').zip(s2.unpack('C*')).map{ |a,b| a ^ b }.pack('C*')
# => "\x00\x01\x02\x03\x04\x05\x06\a\b\tQRSTUVVUTSRQ\t\b\a\x06\x05\x04\x03\x02\x01\x00" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:47:01.423

> 有人可以告诉我该怎么做吗？

Ruby 中的 XOR 运算符是`^`. 它可以用作按位和布尔值，具体取决于它的参数（请记住，它`^`是一个运算符*和*一个方法`.^(x)`）。在默认类`String`中 is 不存在，但您可以轻松地自己实现它：

```
class String

    # converts to array of chars
    def to_a
        ret = []
        self.each_char do |c|
            ret.push c
        end
        return ret
    end

    # given two numeric strings,
    # returns the bitwise xor string
    def ^(s)
        aa = self.to_a
        ab = s.to_a
        lc = (aa.count < ab.count) ? aa.count : ab.count
        ret = ""
        lc.times do |i|
            x = aa[i].to_i ^ ab[i].to_i
            ret = ret + x.to_s
        end
        return ret
    end

end 
```

这只是一个示例，尚未经过测试。

* * *

> 如果我要在执行按位异或之前将每个字节转换为二进制。我该怎么做？

好吧，你想看看[String#bytes](http://ruby-doc.org/core-2.0/String.html#method-i-bytes)或[String#each_byte](http://ruby-doc.org/core-2.0/String.html#method-i-each_byte)并用这些方法来实现上面的代码。

# flash - 从客户端自定义 Flash

> ID：15983430
> 
> 赞同：0
> 
> 时间：2013-04-13T02:03:48.790
> 
> 标签：flash, actionscript, flash-builder

有什么方法可以从客户端自定义 Flash 吗？例如，使用浏览器的插件允许输入 actionscript 。有可能（或其他任何建议）吗？看起来像greasemonkey（插件firefox）它可以使用javascript和jquery自定义网页显示

我在玩一个网页游戏类型的MMORPG，培养角色的水平非常困难并且需要时间，我需要一个自动程序来做到这一点。
谢谢阅读 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:10:52.823

这是很难做到的。下载 Flash 文件 (SWF)，并且不存在我所知道的用于在顶部编写附加操作的插件或插件（就像您使用 greesemonkey 一样）。

我可以想到以下选项：

1.  下载 SWF（或从临时 Internet 值获取）并反编译 Flash。然后插入您的恶意代码/逆向工程，重新编译，然后尝试直接从您的计算机上运行 SWF 文件。
2.  使用程序直接访问和修改内存中的游戏变量以破解它。
3.  使用某种自动化应用程序来编写类似于那些 WOW 机器人的特定动作。
4.  执行数据包嗅探和可能的解密，以对通信协议进行逆向工程并上传虚假结果。
5.  利用机器视觉和算法来控制鼠标，以便制作适合您的应用程序 - 请参阅：[http ://active.tutsplus.com/tutorials/workflow/how-to-build-a-python-bot-that-可以玩网络游戏/](http://active.tutsplus.com/tutorials/workflow/how-to-build-a-python-bot-that-can-play-web-games/)

# android - Android以编程方式创建四个重量分布均匀的按钮

> ID：15983438
> 
> 赞同：0
> 
> 时间：2013-04-13T02:04:40.133
> 
> 标签：android

我在让我的程序以相同宽度并排正确显示 4 个按钮时遇到重大问题。我尝试了一堆组合，并在 StackOverflow 搜索解决方案上花费了一个多小时，但其中任何一个都没有运气。如何在垂直界面的同一行中使这四个按钮都具有相同的高度？

这是我到目前为止没有运气的情况。按钮太大、太小或从宽度 0 起被隐藏。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));
        layout.setWeightSum(1);

        Button redButton = new Button(this);
        redButton.setText("Red");
        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
                0,
                LayoutParams.WRAP_CONTENT, 
                0.25f);
        redButton.setWidth(0);
        redButton.setLayoutParams(p);
        layout.addView(redButton);

        Button greenButton = new Button(this);
        greenButton.setText("Green");
        greenButton.setLayoutParams(p);
        greenButton.setWidth(0);
        layout.addView(greenButton);

        Button blueButton = new Button(this);
        blueButton.setText("Blue");
        blueButton.setLayoutParams(p);
        blueButton.setWidth(0);
        layout.addView(blueButton);

        Button yellowButton = new Button(this);
        yellowButton.setText("Yellow");
        yellowButton.setLayoutParams(p);
        yellowButton.setWidth(0);
        layout.addView(yellowButton);

        setContentView(layout);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:22:06.413

使用以下方法获取设备屏幕的分辨率怎么样：

```
Display d = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int screen_width = d.getWidth();
int screen_height = d.getHeight(); 
```

然后说如果你想要 4 个按钮，每个按钮在屏幕上都具有相同的宽度，从你的例子中调用`greenButton.setWidth(screen_width/4);`

并为您的每个按钮执行此操作...在任何尺寸的屏幕分辨率上都具有相同的宽度，所有这些都是动态完成的！

# java - 使用“canvas = Holder.lockCanvas();”时，canvas 为空，Android Java

> ID：15983440
> 
> 赞同：0
> 
> 时间：2013-04-13T02:04:55.993
> 
> 标签：java, android, null, java-canvas

我刚刚回到android java，并按照我之前制作的模板制作了一个快速游戏（成功）。当试图定义我的“画布”时 Holder.lockCanvas(); 正在返回一个“null”值（我认为命令本身可能会失败）。我已经通过执行以下操作检查表面是否有效：

```
 if (!ourHolder.getSurface().isValid())
                continue; 
```

如果需要，其余代码在下面，问题在底部附近，在类运行中。

```
 package creo.novus.tetris;

 import java.util.Random;
 import creo.novus.tetris.R;

 import android.app.Activity;
 import android.content.Context;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.Paint;
 import android.os.Bundle;
 import android.view.MotionEvent;
 import android.view.SurfaceHolder;
 import android.view.SurfaceView;
 import android.view.View;
 import android.view.View.OnTouchListener;

 public class Main_game extends Activity implements OnTouchListener {

float touch_x, touch_y, screen_height, screen_width, game_height;
boolean once = true;

Bitmap left_pressed, left_unpressed, right_pressed, right_unpressed,
        rotate_pressed, rotate_unpressed;

Canvas canvas;
Random generator = new Random();

GameView TetView;

int score;
float left_x;
float left_y;
float right_y;
float right_x;
float rotate_y;
float rotate_x;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    TetView = new GameView(this);
    TetView.setOnTouchListener(this);

    left_unpressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.left_unpressed);
    left_pressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.left_pressed);
    right_unpressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.right_unpressed);
    right_pressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.right_pressed);
    rotate_unpressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.rotate_unpressed);
    rotate_pressed = BitmapFactory.decodeResource(getResources(),
            R.drawable.rotate_pressed);

    setContentView(TetView);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    TetView.resume();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    TetView.pause();
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    touch_x = event.getX();
    touch_y = event.getY();

    return true;
}

public class GameView extends SurfaceView implements Runnable {

    SurfaceHolder ourHolder;
    Thread gameThread = null;
    boolean isRunning = false;
    Thread tetThread = null;

    public GameView(Context context) {
        super(context);

        gameThread = new Thread(this);
        tetThread = new Thread(this);
        ourHolder = getHolder();
    }

    public void pause() {
        isRunning = false;
        while (true) {
            try {
                gameThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        gameThread = null;
        tetThread = null;
    }

    public void resume() {

        gameThread.start();
        tetThread.start();
        isRunning = true;
    }

    public void run() {

        // TODO Auto-generated method stub

        while (isRunning) {
            if (!ourHolder.getSurface().isValid())
                continue;

            canvas = ourHolder.lockCanvas();
            canvas.drawRGB(137, 137, 137);

            if (once) {
                // Initialization
                Paint myPaint = new Paint();
                myPaint.setColor(Color.BLACK);
                myPaint.setStyle(Paint.Style.FILL);
                myPaint.setTextSize(12);

                screen_height = canvas.getHeight();
                screen_width = canvas.getWidth();

                game_height = (screen_height / 6) * 5;

                int button_height = (int) (screen_height - game_height);

                rotate_x = (screen_width / 4);
                rotate_y = ((screen_height / 6) * 5);

                right_x = (screen_width / 4) * 3;
                right_y = rotate_y;

                left_x = 0;
                left_y = rotate_y;

                Bitmap.createScaledBitmap(left_pressed,
                        (int) (screen_width / 4), button_height, true);
                Bitmap.createScaledBitmap(left_unpressed,
                        (int) (screen_width / 4), button_height, true);
                Bitmap.createScaledBitmap(right_pressed,
                        (int) (screen_width / 4), button_height, true);
                Bitmap.createScaledBitmap(right_unpressed,
                        (int) (screen_width / 4), button_height, true);
                Bitmap.createScaledBitmap(rotate_pressed,
                        (int) (screen_width / 2), button_height, true);
                Bitmap.createScaledBitmap(rotate_unpressed,
                        (int) (screen_width / 2), button_height, true);

                once = false;
            }

            if (touch_y >= rotate_y) {
                if (touch_x < rotate_x) {

                    canvas.drawBitmap(left_pressed, left_x, left_y, null);

                    canvas.drawBitmap(rotate_unpressed, rotate_x, rotate_y, null);

                    canvas.drawBitmap(right_unpressed, right_x, right_y, null);

                }else if(touch_x < right_x){

                    canvas.drawBitmap(left_unpressed, left_x, left_y, null);

                    canvas.drawBitmap(rotate_pressed, rotate_x, rotate_y, null);

                    canvas.drawBitmap(right_unpressed, right_x, right_y, null);

                }else{

                    canvas.drawBitmap(left_unpressed, left_x, left_y, null);

                    canvas.drawBitmap(rotate_unpressed, rotate_x, rotate_y, null);

                    canvas.drawBitmap(right_pressed, right_x, right_y, null);

                }

            }

        }
    }

}

} 
```

任何帮助将不胜感激，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:51:55.710

我发现了错误，程序在第一个周期没有失败，第二个周期失败了。这样做的原因是我没有在循环结束时解锁画布（我还没有到那部分）。对于所有遇到相同问题的人，解锁命令是`nameofholder.unlockCanvasAndPost(nameofcanvas);`

# ruby-on-rails - Rails“assign_attributes”未分配嵌套模型

> ID：15983443
> 
> 赞同：6
> 
> 时间：2013-04-13T02:05:53.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, nested-attributes

我有两个具有以下结构的模型：

```
class Wallet < ActiveRecord::Base
  include ActiveModel::Validations
  has_one :credit_card
  accepts_nested_attributes_for :credit_card

  validates :credit_card, :presence => true
  validates_associated :credit_card
  ...
end

class CreditCard < ActiveRecord::Base
  include ActiveModel::Validations
  belongs_to :wallet

  validates :card_number, :presence => true
  validates :expiration_date, :presence => true
  ...
end 
```

我正在使用 RSpec 测试我的应用程序的功能，我注意到一些奇怪的东西。如果我创建一个属性不符合嵌套模型验证条件的哈希（例如具有 nil card_number），然后尝试进行`update_attributes`调用，那么我在 Wallet 对象中返回的内容包含无效的 CreditCard 嵌套模型和相应的错误。这是正确的、预期的行为。

如果我采用相同的 Hash 并运行`assign_attributes`，然后`save`（这就是 update_attributes 应该做的所有事情，那么我会返回一个无效的 Wallet 对象，其中包含一个完全为零的嵌套对象。为什么会这样？我怎样才能更新所有嵌套的对象属性值并检查错误而不保存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:34:17.510

首先 - 你不需要，`include ActiveModel::Validations`因为它们带有`ActiveRecord::Base`.

第二 - 是的在内部`update_attributes`使用`assign_attributes`，所以基本上它应该按预期工作。

如果您没有任何`attr_accessible`, `attr_protected`,`with/without_protection`选项，我假设您正在创建正确的哈希

```
{'credit_card_attributes' => {'card_number' => ''}} 
```

那么它看起来像是rails中的某种错误。但同时我也只是检查了一下，似乎它工作正常。

除此之外，如果您只想检查验证而不在测试中保存对象，那么只需运行

```
Wallet.new(hash_with_attributes).valid? 
```

它应该返回正确的钱包对象，其中包含嵌套的 credit_card 和错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-08T23:50:13.677

在我看来，Strong Params（Rails 4 功能）可能正在剥离嵌套属性，并且由于没有它们您的验证失败，您将被重定向回编辑页面并出现错误，并且您的信用卡 nested_attributes 现在为零。

也许这会有所帮助。[https://stackoverflow.com/a/17532811/793330](https://stackoverflow.com/a/17532811/793330)

save 和 update_attributes 也不是一回事。Save 将保存整个对象，而 update 只会更改您传递给它的已更改的项目。有细微的差别，但还是有差别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:54:58.090

据我了解，assign_attributes 跳过了安全检查。

[在 Rails 3 中，= 和 assign_attributes 有区别吗？](https://stackoverflow.com/questions/11854593/in-rails-3-is-there-a-difference-between-and-assign-attributes)

# web2py - 字段在 Web2py 视图中并排

> ID：15983444
> 
> 赞同：0
> 
> 时间：2013-04-13T02:05:55.583
> 
> 标签：web2py

我在 web2py 中使用字段，我搜索是否有一个并排的字段（输入）而不是一个在另一个之下。例如

有没有一种方法可以将它们并排放置，而不是电子邮件上方的作者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:22:24.063

`SQLFORM()`接受一个`formstyle`参数来指定不同的表单布局，但您的案例需要自定义布局。为此，请参阅[http://web2py.com/books/default/chapter/29/07?search=formstyle#Custom-forms](http://web2py.com/books/default/chapter/29/07?search=formstyle#Custom-forms)。

# python - 如何从现有文件创建两个列表并将它们相互比较？

> ID：15983447
> 
> 赞同：0
> 
> 时间：2013-04-13T02:06:34.743
> 
> 标签：python, list, python-3.x, dictionary

所以我有一个文件，它分为四个不同的类别：Level、Char1、Char2 和 Years 它看起来像这样：（文件在等处继续）

```
Level     Char1   Char2   Years

1         Leon    Chris   1990-1999
2         Mario   Luigi   1990-1999
3         Peach   Cloud   1990-1999
4         Leon    Chris   2000-2009
5         Ghost   Garen   2000-2009
6         Mario   Vincent 2000-2009
etc...   etc...   etc..   etc... 
```

我想比较 Char1 和 Char2 并打印出现在 1990-1999 年但不在 2000-2009 年的名称，因此它会打印

```
These names are going away:
Luigi Peach Cloud etc... 
```

我认为您需要将它们放入列表或字典文件中，但我不知道如何将 char1 和 char2 分开并将它们与年份进行比较。对此的任何帮助都将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:42:35.893

这种“哪些名字在这个组而不在这个组”是“集合”的工作。然后 Python 已在内部实现——因此，您只需按日期列对数据进行分组，并使用集合“减法”——这与“该集合中不包含在其他集合中的元素”相同来获得结果。

假设您只有两个已编码的数据组，这就是您所需要的：

```
from collections import defaultdict

data = defaultdict(set)

with open("myfilename") as file_:
   for line in file_:
      line = line.split()
      if len(line) == 4 and line[0].isdigit():
          data[line[3]].add(line[1])
          data[line[3]].add(line[2])
   print ("These characters are going away:")
   print (" ".join(data["1990-1999"] - data["2000-2009"])) 
```

“defaultdict”是一种 Python 的精妙之处，在这种情况下，只需在 for 循环中为我们节省 2 行代码 - 没有它，就必须添加：

```
if line[3] not in data:
    data[line[3]] = set() 
```

到上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:48:13.143

```
>>> import csv
>>> with open('test.csv') as f:
        print f.read()

Level,Char1,Char2,Years
1,Leon,Chris,1990-1999
2,Mario,Luigi,1990-1999
3,Peach,Cloud,1990-1999
4,Leon,Chris,2000-2009
5,Ghost,Garen,2000-2009
6,Mario,Vincent,2000-2009
>>> with open('test.csv') as f:
        r = csv.reader(f)
        next(r, None) # skip header

        names = set()
        for level, char1, char2, years in r:
            if years == "1990-1999":
                names += {char1, char2}
            else: # 2000 - 2009
                names -= {char1, char2}
        print "These names are going away"
        print " ".join(names)

These names are going away
Peach Luigi Cloud 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:02:13.837

我发现像这样的文件的一个有用模式是将数据读入一个字典，该字典以第一行的标题项为索引。使用这种方法，解决方案（从 读取逗号分隔的数据文件`stdin`）如下所示：

```
import sys

data = {}
hdrLabel = sys.stdin.readline().rstrip().split(",")
for header in hdrLabel:
    data[header] = []

for line in sys.stdin:
    for (i,item) in enumerate(line.rstrip().split(",")):
        data[hdrLabel[i]].append(item)

def getCharSet(cols,yrRange):
    s = set()
    for c in cols:
        s = s | {data[c][i] for i in range(len(data[c])) 
            if data["Years"][i] == yrRange}
    return s

set19 = getCharSet(["Char1","Char2"],"1990-1999")
set20 = getCharSet(["Char1","Char2"],"2000-2009")
print (set19-set20) 
```

这种方法的优点是它允许在读入数据后进行许多不同的数据操作，而不必担心列号是否正确等。

# jquery - 'this' 在 JS 函数中返回与预期不同的对象

> ID：15983452
> 
> 赞同：0
> 
> 时间：2013-04-13T02:07:55.287
> 
> 标签：jquery

我有一个非常简单的选择框：

```
<select multiple="multiple" name="Condiments">
  <option selected="selected">Mustard</option>
  <option selected="selected">Ketchup</option>
</select> 
```

我正在使用 jQuery UI MultiSelect Widget 让它更漂亮一点：

[https://github.com/ehynds/jquery-ui-multiselect-widget](https://github.com/ehynds/jquery-ui-multiselect-widget)

具体来说，我试图在初始化小部件时*动态设置其中一个选项。*当我这样做时：

```
$("select").multiselect({
  selectedText: function(numChecked, numTotal, checkedItems){
    return "Foo";
  }
}); 
```

它正确地将 selectedText 选项设置为“Foo”但是当我这样做时：

```
$("select").multiselect({
  selectedText: function(numChecked, numTotal, checkedItems){
    return $(this).attr("name");
  }
}); 
```

它认为 $(this) 是 DOM 中其他地方的跨度。

如果页面上只有一个选择，这很好，但是有多个我需要一种方法来为每个选择设置此选项。有没有一种明显的方法可以从 $(this) 到当前的选择元素？还是解决相同一般问题的明显替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:31:37.613

我认为在`selectedText`回调中，是为元素`this`检测多选功能的 JavaScript 对象。`<select>`它有一个`element`属性，即包装`<select>`元素的 jQuery 对象。

因此，您应该使用：

```
$("select").multiselect({
    selectedText: function(numChecked, numTotal, checkedItems){
        return this.element.attr("name");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:35:35.233

在需要从元素实例传递特定数据或属性但未内置在插件中的多个元素上初始化插件的常用方法是使用以下方法循环元素集合`each`：

```
$('select').each(function(){
   /* "this" will be instance of "select"*/
  /* prep data needed before initialiizing plugin*/

   var name= this.name;
   /* initialize plugin for current instance of element*/
   $(this).multiselect({
      selectedText: function(numChecked, numTotal, checkedItems){
        /* variable declared above*/
         return name;
       }
    });

}); 
```

我不知道特定的插件，或者`this`回调中的内容，但是使用显示的方法没有必要知道，因为实例已经在`each`循环中被隔离

**编辑。**我写这篇文章时没有考虑插件是用于`<select>`元素的。不知道你为什么要`name`被退回..对于任何选择的选项都是一样的

# javascript - 直接在 HTML 中将 JS 绑定到 HTML DOM 事件？

> ID：15983455
> 
> 赞同：1
> 
> 时间：2013-04-13T02:08:16.290
> 
> 标签：javascript, requirejs

之前我问过一个关于在页面中嵌入 JS 的问题，而不是将其定位在头部或正文的末尾，[将 Javascript 嵌入到文档的正文中？](https://stackoverflow.com/questions/15966929/embed-javascript-in-the-body-of-the-document).

我现在的问题是，将 JS 绑定到 HTML DOM 事件的最佳方式是什么？我可以：

*   等到文档加载完毕，然后运行一个脚本，将函数绑定到所需元素上的所需事件；或者
*   在我编写 HTML 时将函数直接绑定到 DOM 元素

在某些情况下，我意识到我别无选择，但在简单的情况下，我倾向于选择第二种选择。例如，这是我想初始化我的自动搜索栏的方式：

```
<input id="auto-search" value="Search for person by name" onfocus="this.value=null"/> 
```

这感觉很自然，但缺点是我的 JS 现在分布在我的 HTML 中，而不是很好地隐藏在单个文件中。你做什么工作？

作为一个长期的方法，我喜欢 RequireJS 的想法，但我还没有准备好去研究它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:27:07.473

不像这样内联事件处理程序的一个主要原因是它不能很好地与 jQuery 之类的库一起工作。jQuery 在事件处理方面做了很多很棒的事情；例如，它们标准化了在您的事件处理程序中传递的事件对象，因此无论您的用户使用哪种浏览器，它看起来都是一样的。其他具有事件处理功能的主要库也做类似的事情。

如果您将事件“内联”与 on* 属性挂钩，jQuery（或您使用的任何库）将不会意识到它们，因此将无法规范化事件对象或轻松为您解除绑定事件。

更广泛地说，将 Javascript 保存在 Javascript 文件中具有普遍的好处。并非所有这些都适用于这么小的东西，但作为一般做法，我认为大多数开发人员会建议不要使用 on* 属性。

# javascript - 为什么我的 HTML 文件有时只能正确加载？

> ID：15983457
> 
> 赞同：1
> 
> 时间：2013-04-13T02:08:31.117
> 
> 标签：javascript, html

我正在尝试使用原始 HTML/javascript 制作一个小网页。这是我的 HTML 文件的全部当前内容：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My website</title>
        <style>
        * {
           margin: 0px;
           padding: 0px;
        }

        div.banner-light {
            background-color:#9090d0;
            position: absolute;
            left:0px;
        }

        div.banner-dark {
            background-color:#8080e0;
            position: absolute;
            left:0px;
        }
        </style>
    </head>

    <body onload="javascript:onLoadBody()">

    <script>
        function onLoadBody() {
            var curHeight = 0;
            for (var i = 1; i < 25; i++) {
                document.getElementById("stat" + i.toString()).style.top = curHeight.toString() + "px";
                document.getElementById("stat" + i.toString()).style.width = (screen.availWidth * 0.15).toString() + "px";
                document.getElementById("stat" + i.toString()).style.height = ((window.innerHeight - curHeight) / (25 - i)).toString() + "px";

                curHeight += ((window.innerHeight - curHeight) / (25 - i));
            }
        }

        function clickDiv(id) {
            document.getElementById("stat" + id).innerHTML = "Clicked";
        }
    </script>

    <div id='stat1' class="banner-light" onclick="javascript:clickDiv(1)"><center>1</center></div>
    <div id='stat2' class="banner-dark" onclick="javascript:clickDiv(2)"><center>2</center></div>
    <div id='stat3' class="banner-light" onclick="javascript:clickDiv(3)"><center>3</center></div>
    <div id='stat4' class="banner-dark" onclick="javascript:clickDiv(4)"><center>4</center></div>
    <div id='stat5' class="banner-light" onclick="javascript:clickDiv(5)"><center>5</center></div>
    <div id='stat6' class="banner-dark" onclick="javascript:clickDiv(6)"><center>6</center></div>
    <div id='stat7' class="banner-light" onclick="javascript:clickDiv(7)"><center>7</center></div>
    <div id='stat8' class="banner-dark" onclick="javascript:clickDiv(8)"><center>8</center></div>
    <div id='stat9' class="banner-light" onclick="javascript:clickDiv(9)"><center>9</center></div>
    <div id='stat10' class="banner-dark" onclick="javascript:clickDiv(10)"><center>10</center></div>
    <div id='stat11' class="banner-light" onclick="javascript:clickDiv(11)"><center>11</center></div>
    <div id='stat12' class="banner-dark" onclick="javascript:clickDiv(12)"><center>12</center></div>
    <div id='stat13' class="banner-light" onclick="javascript:clickDiv(13)"><center>13</center></div>
    <div id='stat14' class="banner-dark" onclick="javascript:clickDiv(14)"><center>14</center></div>
    <div id='stat15' class="banner-light" onclick="javascript:clickDiv(15)"><center>15</center></div>
    <div id='stat16' class="banner-dark" onclick="javascript:clickDiv(16)"><center>16</center></div>
    <div id='stat17' class="banner-light" onclick="javascript:clickDiv(17)"><center>17</center></div>
    <div id='stat18' class="banner-dark" onclick="javascript:clickDiv(18)"><center>18</center></div>
    <div id='stat19' class="banner-light" onclick="javascript:clickDiv(19)"><center>19</center></div>
    <div id='stat20' class="banner-dark" onclick="javascript:clickDiv(20)"><center>20</center></div>
    <div id='stat21' class="banner-light" onclick="javascript:clickDiv(21)"><center>21</center></div>
    <div id='stat22' class="banner-dark" onclick="javascript:clickDiv(22)"><center>22</center></div>
    <div id='stat23' class="banner-light" onclick="javascript:clickDiv(23)"><center>23</center></div>
    <div id='stat24' class="banner-dark" onclick="javascript:clickDiv(24)"><center>24</center></div>

    </body>
</html> 
```

奇怪的是，当我尝试在浏览器中查看这个文件时，它有时会完全按照我的意愿加载 - 页面左侧的数字 1 到 24 具有交替背景。但是，在 5 次中大约有 4 次，所有数字都会聚集在左上角，这表明错误（自己尝试一下）。

奇怪的是，你可以打开这个精确的文件 10 次而不用编辑它，而且它只会在几个实例中正常工作。我什至不认为这是可能的，但这肯定与我作为程序员所知道的一切背道而驰。如果您知道任何可能导致此问题的原因，请告诉我。顺便说一句，请原谅我可能做得不好的任何事情，因为我还很新并且自学了这一点。

**编辑：在弄乱了一些关于我的 HTML、JS 和 CSS 顺序的建议解决方案之后，我意识到上面的代码是多么令人费解：我没有使用 onload，而是将 div 的样式宽度和高度设置为百分比。总之谢谢大家！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:22:57.583

尝试将`script`标签（和内容）移动到所有 div 的**下方**，就在`body`标签末尾之前。这样可以确保在调用函数时创建 DOM 元素。似乎那里肯定会发生一些事情。您还应该考虑删除您的内联事件定义。

这是一个[jsfiddle 示例，其中在正文底部定义了脚本](http://jsfiddle.net/cRNVz/)

这是一个[jsfiddle 示例 onLoad](http://jsfiddle.net/cRNVz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:28:42.797

你不应该以你的方式做事。拥有绝对元素会将它们放在屏幕上，但它们在物理上不会占用空间。这就像在一杯水中扔一个立方体。水位会上升。当立方体是“绝对的”时，它不会那样。因此，您必须使 div 相对，然后它们将按照您想要的方式堆叠在一起。

```
 * {
        margin: 0px;
        padding: 0px;
    }
    div {
        height: 20px;
        position: relative;
    }
    div.banner-light {
        background-color: #9090d0;
        left: 0px;
    }
    div.banner-dark {
        background-color: #8080e0;
        left: 0px;
    }

  window.onload = function () {

      var curHeight = window.innerHeight;
      console.log(curHeight);
      for (var i = 1; i < 25; i++) {
          document.getElementById("stat" + i.toString()).style.width = (screen.availWidth * 0.15).toString() + "px";
          document.getElementById("stat" + i.toString()).style.height = (curHeight / (25 - 1)).toString() + "px";

      }

  }

  function clickDiv(id) {
      document.getElementById("stat" + id).innerHTML = "Clicked";
  } 
```

让你的 div 相对，只控制它们的宽度。

**编辑 - 使高度适应屏幕高度：**

为了使 div 的高度适应屏幕高度，你的数学有点错误。您应该读取窗口的高度，然后将其除以 24。

我已经适应了上面的代码以及小提琴。

[http://jsfiddle.net/djwave28/Ap4Sq/5/](http://jsfiddle.net/djwave28/Ap4Sq/5/)

请注意，人们会在调整窗口大小时遇到​​问题。字体大小也不适应。所以这个解决方案是否真的有用取决于你。这也是一个解决调整大小的小提琴。

调整大小：http: [//jsfiddle.net/djwave28/Ap4Sq/6/](http://jsfiddle.net/djwave28/Ap4Sq/6/)

另请注意，通过为您的 div 提供类似的类，您可以使事情变得更聪明。您可以添加更多的类，而不仅仅是一个。IE`<div class="class1 class2 class3"></div>`

还有一个甚至可以调整字体大小：http: [//jsfiddle.net/Ap4Sq/8/](http://jsfiddle.net/Ap4Sq/8/)

# javascript - 在不使用 iframe 的情况下保持相同的外观

> ID：15983470
> 
> 赞同：0
> 
> 时间：2013-04-13T02:11:32.727
> 
> 标签：javascript, html, css, iframe

我有这个代码集，它都可以正常工作，但是我想知道是否有一种更简洁的方法来执行相同的外观，纯粹使用 css 和 Javascript 而不使用 iframe（但我破解了这个以获得我想要的外观，至少在最新chrome 和 ff 版本）。

基本上，iframe 是一个带有一堆图像的长表格行，我有一个按钮，鼠标悬停时可以滚动 iframe 以显示更多图像这里是一个演示和下面的重要代码片段

html页面：

```
 <html><body>
 <iframe id="recent" height="450px" width="100%" seamless; scrolling="no" src="http://ec2-23-22-226-163.compute-1.amazonaws.com/dframe.php">
 <p>Your browser does not support iframes.</p>
 </iframe>
 <input type='button' class='btn_slide' onmouseover='make_scroll()' />
 </body></html> 
```

使用这个 CSS（在按钮上）

```
input.btn_slide {
display: block;
position: absolute;
z-index: 15;
right: 0px;
top: 80px;
background-image: url(http://www.iconsdb.com/icons/preview/gray/arrow-33-xx$
background-color: transparent; /* make the button transparent */
background-repeat: no-repeat;  /* make the background image appear only onc$
background-position: 0px 0px;  /* equivalent to 'top left' */
border: none;
height: 250px;           /* make this the size of your image */
width: 200px;
} 
```

然后这个javascript：

```
 function scroll()
 {
    window.scrollBy(250,0); // horizontal and vertical scroll increments
    scrolldelay = setTimeout('scroll()', 1000); // scrolls every 100 millis$
 }
 function make_scroll()
 {
    document.getElementById('recent').contentWindow.scroll();
 } 
```

现在我担心的是我计划在一个页面上拥有 10 个左右的 iframe，这意味着为一个访问过的页面提供服务生产仍然不理想）所以我想知道是否有一种方法可以在不使用仅使用 css 和 javascript 的 iframe 的情况下保持相同的外观？是或否或我该如何去做将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:26:29.390

[http://codepen.io/anon/pen/qywuz](http://codepen.io/anon/pen/qywuz)

请为所有神圣的爱，不要为此使用 iframe，您可以使用 div、a float left 和 margin 轻松做到这一点。

我推荐这个插件用于滑块

[http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/)

它基本上为你做了一切。

请验证您的代码。

iframe 用于非常具体的任务，这不是其中之一。

此外，仅当您有实际表格或时事通讯时才使用表格。

# html - 图片链接和悬停在 ie 中不起作用

> ID：15983476
> 
> 赞同：0
> 
> 时间：2013-04-13T02:11:58.830
> 
> 标签：html, css, internet-explorer, hyperlink

我正在尝试使用图像创建导航菜单。即使 Chrome 和 Firefox 没有问题，这些*链接*在 IE9 中也不起作用。悬停效果也不起作用。

看看我在[www.sabourinpaulwedding.ca上得到了什么](http://www.sabourinpaulwedding.ca)

提前致谢。吉尔斯

HTML 是左侧的垂直导航栏和右侧的内容 div。

```
<div>
  <ul class="nav">
    <li class="welcome"><a class="selected" href="#"></a></li>
    <li class="ceremony"><a href="ceremony.html"></a></li>
    <li class="reception"><a href="reception.html"></a></li>
    <li class="accommodations"><a href="accommodations.html"></a></li>
    <li class="registry"><a href="registry.html"></a></li>
  </ul>
</div>
<div class="content">
  <p>Welcome to the digital home of the future Mr. and Mrs. Paul.</p>
  <p>&nbsp;</p>
</div> 
```

CSS 使用图像来显示悬停的链接和选定的链接。似乎 IE 无法访问导航栏，因为顶部有一个“不可见”的 div。我玩了导航栏的 z-index。那没有用。

```
ul.nav
{
    list-style-type: none;
    padding: 0;
    margin: 0;
    float: left;
    z-index: 20;
}

ul.nav a
{
    border: 0px solid #cccccc;
    display: block;
    height: 0px;
    padding-top: 72px;
    width: 265px;
    overflow: hidden;
}

/* Welcome Button */
.nav li.welcome a { background:url('images/welcome_en_normal.png') no-repeat; background-position:0px 0px; }
.nav li.welcome a:hover { background:url('images/welcome_en_hover.png') no-repeat; background-position:0px 0px; }
.nav li.welcome a.selected { background:url('images/welcome_en_selected.png') no-repeat; background-position:0px 0px; }

/* Ceremony Button */
.nav li.ceremony a { background:url('images/ceremony_en_normal.png') no-repeat; background-position:0px 0px; }
.nav li.ceremony a:hover { background:url('images/ceremony_en_hover.png') no-repeat; background-position:0px 0px; }
.nav li.ceremony a.selected { background:url('images/ceremony_en_selected.png') no-repeat; background-position:0px 0px; } 
```

虽然有效的是从内容方面删除所有 p 标签......但我确实需要一些内容（显然）。问题不在于 css .p 选择器，因为如果我删除其中的所有内容，链接仍然无法工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:18:44.283

这可能是因为标签是空的试试这个标记

```
<ul class="nav">
    <li class="welcome"><a href="#" class="selected">Welcome</a></li>
    <li class="ceremony"><a href="ceremony.html">Ceremony</a></li>
    <li class="reception"><a href="reception.html">Reception</a></li>
    <li class="accommodations"><a href="accommodations.html">Accomodations</a></li>
    <li class="registry"><a href="registry.html">Registry</a></li>
  </ul> 
```

和 CSS

```
ul.nav a {
    border: 0 solid #CCCCCC;
    display: block;
    height:0;
    padding-top: 72px;
    width: 265px;
    overflow:hidden;
} 
```

具有对 SEO 友好的副作用作为奖励

# grammar - 为什么 s--> ^ 和 A --> a ？在上下文无关语法中

> ID：15983477
> 
> 赞同：1
> 
> 时间：2013-04-13T02:12:00.680
> 
> 标签：grammar, context-free-grammar

我一直在阅读：[“创建上下文无关语法的提示”](https://stackoverflow.com/questions/15126824/tips-for-creating-context-free-grammar/15130451#15130451)帖子以用于学习目的，我几乎理解了这个概念，但我不太明白以下内容。

如果我们有：

> L = {a ^m b ^n | m >= n}。

我明白这一点：

```
S --> B
B --> aBb
A  --> aA 
```

但我不明白的是添加到这些特定值末尾的概念，例如：

```
S --> B | ^
B --> aBb | A
A  --> aA | a 
```

为什么我们在这些行的末尾添加**^** (null)、**A**和**a ？**他们做什么，我们为什么需要他们？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:46:29.997

您需要它们能够构造语言中的字符串`L`。

`B --> aBb | A`意味着如果你有一个非终结符`B`，它可以被替换为`aBb` *或* `A`。（大写字母代表非终结符，小写字母代表终结符）。

我们来看看语法：

```
S --> B | ^
B --> aBb | A
A  --> aA | a 
```

**为什么我们有一个`| ^`？**您需要它能够生成空字符串。空字符串显然是语言的一部分，`L`因为它包含相等数量的`a`s 和`b`s。

**为什么我们有`| A`？**为了能够使用规则`A`。现在您可以替换`B`为，`A` 以便您可以插入`aA`或`a`。您需要此规则才能生成`a`s 多于`b`s 的字符串。

**为什么我们有`| a`？**能够在*不*`A`添加需要替换的新非终结符的情况下替换为。`a`

 *当我查看此语法时，我会说您需要更改`A --> aA | a`为`A --> aA | a | ^`能够生成具有等量`a`s 和`b`s 的字符串。（因此您可以`A`用空字符串（或 null）替换，而不必添加额外的`a`）

假设您要生成字符串`aaabb`：

```
S       //You start with S
B       //Rule: S --> B
aBb     //Rule: B --> aBb
aaBbb   //Rule: B --> aBb
aaAbb   //Rule: B --> A
aaabb   //Rule: A --> a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:23:23.030

额外的 ^,A 和 a 的需要是为了完成语法集。

因此**A --> aA**负责 [aa, aaa, aaaa, ...]

**一个--> aA | a**照顾 [a, aa, aaa, aaaa, ...]

**B --> aBb**负责 [ab, aabb, aaabbb, ...]

所以，B --> aBb | A 应该照顾 [a, ab, aa, aab, aaa, aaab, aabb, ...]

唯一缺少的是**^**

**所以现在用S --> B |**完成语法。**^** [^, a, aa, ab, aaa, aab, aaaa, aaab, aabb, ...]

如您所见，不可能从前半部分生成后半部分，但它也是语法的一个子集。所以，为了完成语法，第二部分也是至关重要的。查看维基百科文章以获得更清晰的示例。

[http://en.wikipedia.org/wiki/Context-free_grammar](http://en.wikipedia.org/wiki/Context-free_grammar)*

# ember.js - DS.FixtureAdapter 是否支持侧载？

> ID：15983479
> 
> 赞同：5
> 
> 时间：2013-04-13T02:12:29.617
> 
> 标签：ember.js, ember-data

我正在使用 DS.FixtureAdapter 并且无法使用 DS.belongsTo 获取相关条目

```
App.User = DS.Model.extend({
    login: DS.attr('string'),
    profile: DS.belongsTo('App.Profile')
});

App.Profile = DS.Model.extend({
    fullname: DS.attr('string'),
    address: DS.attr('string'),
    user: DS.belongsTo('App.User')
});

App.Router.map(function() {
    this.resource('user', { path: ':user_id' });
});

App.UserRoute = Ember.Route.extend({
  model: function(params) {
    return App.User.find(params.user_id)
  }
}); 
```

它只是 Rest Adapter 的一个功能吗？

**更新**

夹具数据是这样的：

像这样的东西：

```
App.User.FIXTURES = [
    {
      id: 1,
      login: "marlus",
      profile: 1
    }
];

App.Profile.FIXTURES = [
    {
      id: 1,
      fullname: "Marlus Araujo",
      address: "Rio",
      user: 1
    }
]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T10:25:46.803

尝试：

```
return this.get('store').find('App.User', params.user_id); 
```

此外，这可能会有所帮助：[http ://emberjs.com/guides/models/finding-a-record/](http://emberjs.com/guides/models/finding-a-record/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T06:52:41.363

最新版本的 Ember Data (1.0.0-beta4) 具有用于使用夹具适配器配置模型的新语法。

```
App.UserAdapter = DS.FixtureAdapter.extend();

App.User.FIXTURES = [{
    id: 1, firstName: 'Bob', lastName: 'Roberts'
}];

App.UsersRoute = Ember.Route.extend({
    model: function() {
        return this.store.find('user');
    }
});

App.UserRoute = Ember.Route.extend({
    model: function() {
        return this.store.find('user', params.user_id);
    }
}); 
```

# emacs - 行范围内的组织模式总和值

> ID：15983481
> 
> 赞同：7
> 
> 时间：2013-04-13T02:13:38.087
> 
> 标签：emacs, org-mode

最好用代码解释：

```
|                |  a |   b |  c |      d | row-total |
|----------------+----+-----+----+--------+-----------|
| check-sum      |  4 |   5 |  7 |   1000 |           |
|----------------+----+-----+----+--------+-----------|
|                |  1 |   2 |  2 |      1 |           |
|                |  3 |   4 |  5 |      6 |           |
|----------------+----+-----+----+--------+-----------|
| calculated-sum | ok | (1) | ok | (-993) |           |
|----------------+----+-----+----+--------+-----------|
#+TBLFM: @>$<<..$>>='(let ((sum (apply '+ '(@II..@-1))) (expected @2)) (if (= sum expected) "ok" (format "(%s)" (- sum expected))));N 
```

我有一个摘要行（@5）工作正常。我想让最后一列（在行@2..@4 中）对每一行中的值求和。我该如何表达？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T05:12:11.380

解决了。我的 org-mode 表知识有一些基本的空白

```
|                |  a |   b |  c |      d | row-total |
|----------------+----+-----+----+--------+-----------|
| check-sum      |  4 |   5 |  7 |   1000 |      1016 |
|----------------+----+-----+----+--------+-----------|
|                |  1 |   2 |  2 |      1 |         6 |
|                |  3 |   4 |  5 |      6 |        18 |
|----------------+----+-----+----+--------+-----------|
| calculated-sum | ok | (1) | ok | (-993) |           |
|----------------+----+-----+----+--------+-----------|
,#+TBLFM: @>$<<..$>>='(let ((sum (apply '+ '(@II..@-1))) (expected @2)) (if (= sum expected) "ok" (format "(%s)" (- sum expected))));N::@2$>..@4$>=vsum($2..$5) 
```

这个[作为电子表格教程](http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.html)的组织很有帮助。

# sql - 这个 SQL 语句在语法上有什么问题吗？

> ID：15983485
> 
> 赞同：0
> 
> 时间：2013-04-13T02:14:24.983
> 
> 标签：sql, syntax, sqlite

当我尝试在 mysqlite3 中运行此查询时，我不断收到错误消息：

```
SELECT Region_DESC, AgeGroup, Population
(select REGION, sum(POPULATION) as Population, '0-15' AS AgeGroup
from STATS
Where Age between 0 and 15
group by REGION
union
Select REGION, SUM(POPULATION) as Population, '16-30' As AgeGroup
from STATUS
Where Age between 16 and 30
group by REGION) s
join REGION on REGION_CD = REGION 
```

我收到以下错误：错误：“SELECT”附近：语法错误

语法方面的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:17:05.477

你在`FROM`“人口”这个词之后就不见了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:17:51.040

你的查询是错误的。你基本上有：

```
SELECT something
(select somethingelse FROM somethingelsetable) s
join REGION on REGION_CD = REGION 
```

我猜你在括号之前缺少 FROM ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:16:46.097

不正确的查询 ... 第一行中缺少 From 子句。

# c - C 编程“掷骰子”游戏

> ID：15983487
> 
> 赞同：2
> 
> 时间：2013-04-13T02:14:39.373
> 
> 标签：c, random, numbers, generator

我正在为我的 C 编程课程做一个学习任务，我被要求做以下事情：

> **任务 2\. 废话。**
> 
> 在掷骰子游戏中，“及格线”赌注如下进行。使用两个六面骰子，掷骰子的第一轮骰子称为“Come out Roll”。出局数为 7 或 11 时下注立即赢，出局数为 2、3 或 12 时下注。如果出局数为 4、5、6、8、9 或 10，则这个数字变成了“重点”。玩家继续掷骰子，直到掷出 7 点或点数。如果点数先滚动，则玩家赢得赌注。如果玩家先掷出 7，则玩家输。
> 
> 编写一个使用上述规则玩掷骰子游戏的程序，以便在没有人工输入的情况下模拟游戏。程序不应要求下注，而应只计算玩家是否会赢或输。创建一个模拟掷两个骰子并返回总和的函数。添加一个循环，使程序可以玩 10,000 场比赛。
> 
> 添加计数器来计算玩家赢了多少次，以及玩家输了多少次。在10,000 场比赛结束时，计算获胜的概率，即Wins / (Wins + Losses) 并输出该值。从长远来看，谁会赢得最多的掷骰子游戏，你还是房子？

这是我到目前为止所写的：

```
# include <stdio.h>
# include <stdlib.h>
# include <time.h>

// Craps Program
// Written by Kane Charles
// Lab 2 - Task 2

// 7 or 11 indicates instant win
// 2, 3 or 12 indicates instant los
// 4, 5, 6, 8, 9, 10 on first roll becomes "the point"
// keep rolling dice until either 7 or "the point is rolled"
//      if "the point" is rolled the player wins
//      if 7 is rolled then the player loses

    int wins = 0, losses = 0;
    int r, i;
    int N = 1, M = 12;
    int randomgenerator();

main(void){

    /* initialize random seed: */
  srand (time(NULL));
  /* generate random number 10,000 times: */
  for(i=0; i < 10000 ; i++){
     int r = randomgenerator();
     if (r == 7 || r == 11) {
        wins++;
     }
     else if (r == 2 || r == 3 || r == 12) {
        losses++;
     }
     else if (r == 4 || r == 5 || r == 6 || r == 8 || r == 9 || r == 10) {
        int point = r;
        int temproll;
        int *tr = &temproll;
        do
        {
             *tr = randomgenerator();

        }while (temproll != 7 || temproll != point);

        if (temproll == 7) {
            losses++;
        }
        else if (temproll == point) {
            wins++;
        }
     }
  }
    printf("Wins\n");
    printf("%d",&wins);
    printf("\nLosses\n");
    printf("%d",&losses);
}

int randomgenerator(){
    r = M + rand() / (RAND_MAX / (N - M + 1) + 1);
    return r;
} 
```

该程序始终以：

```
Wins:
0.000000
Losses:
0.000000 
```

而它应该显示（在 10000 次中）程序赢了多少次，输了多少次。有人能帮我解决这个问题吗？我怀疑我可能需要使用指针而不是`wins++`and`losses++`以便全局保存分数。

请记住，我对这方面很陌生，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T02:17:20.680

`if`例如，我在您的陈述中看到了一个主要问题`main`：

```
if (r = 7 || 11) 
```

您使用的是`=`赋值而不是`==`相等。下一个问题是您似乎对如何`||`工作有误解。看起来您想检查是否`r`是`7`或`11`实际上是：

```
if( (r == 7) || (r == 11) ) 
```

你也在`temproll`你的`do`循环中创建一个本地：

```
 int temproll;
 do
 {
      int temproll = randomgenerator();
      ^^^^^^^^^^^^
 }while (temproll != 7 || point); 
```

这意味着`do`一旦您离开，您在循环中生成的值就会丢失，后续`if`语句将检查未定义的值。据我所知，你可能是`while`这样的：

```
 while (temproll != 7 && temproll != r ); 
```

这意味着 while `temproll`is not`7`和 it is not `r`。

最后打印出的输赢也需要修正：

```
printf("%lf",&wins);
printf("%lf",&losses); 
```

`lf`格式是 for`double`并且您使用的是地址而`wins`不是值，它应该是：

```
printf("%d",wins);
printf("%d",losses); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:19:07.347

你的代码中有一堆逻辑错误

```
 if (r == 7 || r ==11) {
    //^^^^should be logical equal not assignment and r== cannot be skipped for 11
    wins++;
 }
 else if (r = 2 || 3 || 12) {
  //similar error as above
    losses++;
 }
 else if (r = 4 || 5 || 6 || 8 || 9 || 10) {
  //similar error as above
    int point = r;
    int temproll;
    do
    {
         int temproll = randomgenerator();

    }while (temproll != 7 || point); //^^same error here

    if (temproll = 7) {
        //^^should be temproll ==7
        losses++;
    }
    else if (temproll = point) {
        //similar error
        wins++;
    } 
```

更新后，这里有一个问题：

```
 int temproll;
    //remove line below
    //int *tr = &temproll;
    do
    {
         //*tr = randomgenerator();
         //replace this line with:
         temproll = randomgenerator();

    }while (temproll != 7 || temproll != point); 
```

输赢的打印语句有错误：

```
 printf("%d",&wins);
 //^^^^^^^^^^^remove &
 printf("\nLosses\n");
   printf("%d",&losses);
  ///^^^^^^^^^same thing, remove & 
```

您当前的代码将永远不会结束，因为您在这里有死循环：

```
 else if (r == 4 || r == 5 || r == 6 || r == 8 || r == 9 || r == 10) {
    int point = r;  //so r cannot be 7, otherwise, will not enter this if block
    int temproll;
    int *tr = &temproll;
    do
    {
         *tr = randomgenerator();

    }while (temproll != 7 || temproll != point);
    //you will need temproll ==7 and temproll ==point to exit this loop
    //this means point ==7\. however, pointer can never be 7\. dead loop, keep running...
 } 
```

# search - emacs ff-find-other-file 和 ff-search-directories 不是递归的

> ID：15983493
> 
> 赞同：3
> 
> 时间：2013-04-13T02:15:50.457
> 
> 标签：search, emacs, recursion, directory, subdirectory

我们可以让 ff-find-other-file 在 ff-search-directories 中列出的目录中递归搜索吗？

它不仅会在 /usr/include 中搜索，还会在 /usr/include/llvm 中进行搜索。或者同样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T20:59:36.277

我已将此功能添加到我的`.emacs`文件中：

```
(defun get-all-subdirectories(dir-list)
  "Returns a list of all recursive subdirectories of dir-list, 
   ignoring directories with names that start with . (dot)"
  (split-string 
   (shell-command-to-string 
     (concat "find " 
             (mapconcat 'identity dir-list " ")
             " -type d -not -regex \".*/\\\..*\"")))) 
```

而且，在我的`c-mode-common-hook`，我有这个：

```
(setq ff-search-directories (get-all-subdirectories (list "dirA" "dirB"))) 
```

这假设您`find`的`PATH`. 如果您使用的是 Windows，您可以在此处获取副本：http `find`: [//unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)

如果您有许多目录要递归通过，则运行需要一点时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T05:00:14.237

`/*`在要搜索子目录的目录之后添加一个。如此设置`ff-search-directories`，使其包含`"/usr/include/*"`.

# sql - 为防止插入的sqlite数据库创建触发器

> ID：15983495
> 
> 赞同：14
> 
> 时间：2013-04-13T02:16:36.850
> 
> 标签：sql, database, triggers, sqlite

我正在尝试为代表学校的 sqlite 数据库创建触发器。我有一个名为 Administrators 的表，其架构如下：

```
CREATE TABLE Administrators(
ssn INT CHECK(ssn > 100000000),
lName CHAR(20),
fName CHAR(10),
gender CHAR(1) CHECK(gender IN('F','M')),
dob DATE,
address CHAR(100),
phone INT CHECK(phone > 1000000000),
role CHAR(20) CHECK(role IN('Principal','Vice Principal','Dean')),
PRIMARY KEY(ssn)
); 
```

我想确保只有一位校长。我已经尝试了所有我能想到的方法，并且在触发器的各个位置不断出现错误。我试过的最后一个说“IF”附近有一个错误

```
sqlite> CREATE TRIGGER onePres
   ...> BEFORE INSERT ON Administrators
   ...> BEGIN
   ...> IF (EXISTS (SELECT * FROM Administration WHERE role = 'Principal'))
   ...> BEGIN
   ...> ROLLBACK TRANSACTION;
   ...> RETURN
   ...> END;
   ...> END; 
```

谁能帮我弄清楚我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T08:27:15.277

请参阅[触发器文档](http://www.sqlite.org/lang_createtrigger.html)；您只能在触发器中使用`SELECT`、`INSERT`、`UPDATE`和`DELETE`语句。

要引发错误，请使用`RAISE`a 内部的函数`SELECT`：

```
CREATE TRIGGER onePres
BEFORE INSERT ON Administrators
FOR EACH ROW
WHEN NEW.role = 'Principal'
BEGIN
    SELECT RAISE(ABORT, 'There can be only one.')
    WHERE EXISTS (SELECT 1
                  FROM Administrators
                  WHERE role = 'Principal');
END; 
```

（您还需要检查`UPDATE`s。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T21:14:51.533

一种简单的方法是，如果存在任何作为主体的人，您可以首先检查数据库，然后执行必要的操作

为这种微不足道的任务编写触发器是一种矫枉过正

# c - 循环遍历并将数据分配给结构成员的宏错误地将结构成员识别为指针

> ID：15983496
> 
> 赞同：3
> 
> 时间：2013-04-13T02:16:59.577
> 
> 标签：c, macros, struct, cycle, type-conversion

我的问题是 atoi 将字符串的十六进制内存地址转换为十进制，而不是字符串中包含的内容。它在宏期间执行此操作。当宏定义使其成为 int 时，为什么将 struct->member 解释为指针？伪代码如下：

```
if (struct.member == int)? struct.member = atoi(data) : struct.member = data; 
```

程序这一部分的目的是从包含结构属性信息的 .csv 文件中检索数据。我可以接受一个“id”并将每个单元格字符串存储到一个字符串数组（csvRowSplit）中。

但是，然后我想将数组的内容传输到包含不同数据类型的结构（我想用来检索玩家保存的属性、攻击方法、商店物品等的方法）。硬编码很容易：

```
opponent->att = atoi(csvSplitRow[0]);
opponent->= atoi(csvSplitRow[1]);
opponent->hitpoints = atoi(csvSplitRow[2]);
opponent->description = csvSplitRow[3]); 
```

然而，这会导致更多的结构成员变得混乱，并且不是很灵活或可重现。

我已经定义了一个宏来循环遍历结构的元素，并将 csvSplitRow[] 与变量配对，如果需要，可以使用 atoi 进行转换。

```
#define X_FIELDS \
    X(char*, description, "%s") \
    X(int, xpreward, "%d") \
    X(int, att, "%d") \
    /* ... */
    X(int, crit, "%d")

typedef struct
{
    #define X(type, name, format) type name;
        X_FIELDS
    #undef
}

void update_opp(char** csvSplitRow, opp* opponent)
{
    int i = 0;
    #define X(type, name, format) \
        if (strcmp(format, "%d") == 0) \          // if an int, convert it
            opponent->name = atoi(csvSplitRow[i]); \
        else \                                    // otherwise put it straight in
            opponent->name = csvSplitRow[i]; \
        i++;
    X_FIELDS
    #undef X
} 
```

直接分配给字符串成员的工作（即没有转换），但 atoi 导致将十六进制内存地址转换为整数，而不是它指向的字符串。

```
// before conversion
csvRowSplit[1] == 0x501150 "20"

// practice
atoi(csvRowSplit[1]) == 20

// after conversion and storing in struct int member
opponent->xpreward = atoi(csvSplitRow[1]);
opponent->xpreward == 5247312           // the decimal equivalent of 0x501150 
```

我不知道我现在能做什么，除了每次我想将解析的 csv 行与结构匹配时硬编码。请帮忙！

编辑：我使用 -Werror 得到一个编译时错误：

```
error: assignment makes integer from pointer without a cast [-Werror] 
```

错误在 update_opp 函数的宏中。但是，我知道它不是指针，因为我之前将它定义为 int ？那它为什么不承认呢？我不能施放它，那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:49:56.110

您的问题出在以下代码中：

```
#define X(type, name, format) \
    if (strcmp(format, "%d") == 0) \          // if an int, convert it
        opponent->name = atoi(csvSplitRow[i]); \
    else \                                    // otherwise put it straight in
        opponent->name = csvSplitRow[i]; \
    i++; 
```

对于任何给定的属性名称（`att`例如），您会得到：

```
 if (strcmp("%d", "%d") == 0)
        opponent->att = atoi(csvSplitRow[i]);
    else
        opponent->att = csvSplitRow[i];
    i++; 
```

除了它都在一条线上。但是，关键是您要么将`int`(from `atoi()`) 分配给字符串，要么`int`在每次调用中将字符串分配给 an，而这两者中的一个是错误的。代码在优化之前必须是正确的。

怎么修？这很棘手。我想我可能会使用这样的东西：

```
#include <stdlib.h>

#define CVT_INT(str)    atoi(str)
#define CVT_STR(str)    str

#define X_FIELDS \
    X(char*, description, "%s", CVT_STR) \
    X(int, xpreward, "%d", CVT_INT) \
    X(int, att, "%d", CVT_INT) \
    /* ... */ \
    X(int, crit, "%d", CVT_INT)

typedef struct opp
{
#define X(type, name, format, converter) type name;
    X_FIELDS
#undef X
} opp;

extern void update_opp(char** csvSplitRow, opp* opponent);

void update_opp(char** csvSplitRow, opp* opponent)
{
    int i = 0;

#define X(type, name, format, converter) \
    opponent->name = converter(csvSplitRow[i++]);

    X_FIELDS

#undef X
} 
```

这在非常严格的编译器标志下编译而没有警告：

```
gcc -pedantic -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition -c xm.c 
```

当需要做其他事情时，可以重新定义`CVT_INT`and宏。`CVT_STR`

* * *

代码的替代版本更广泛地利用`CVT_INT`和`CVT_STR`（重命名为`X_INT`和）：`X_STR`

```
#include <stdlib.h>

#define X_FIELDS \
    X(X_STR, description) \
    X(X_INT, xpreward) \
    X(X_INT, att) \
    /* ... */ \
    X(X_INT, crit)

typedef struct opp
{
#define X_INT char *
#define X_STR int
#define X(code, name) code name;
    X_FIELDS
#undef X
#undef X_INT
#undef X_STR
} opp;

extern void update_opp(char** csvSplitRow, opp* opponent);

void update_opp(char** csvSplitRow, opp* opponent)
{
    int i = 0;

#define X_INT(str)    atoi(str)
#define X_STR(str)    str
#define X(converter, name) \
    opponent->name =  converter(csvSplitRow[i++]);

    X_FIELDS

#undef X
#undef X_INT
#undef X_STR
} 
```

我不是 100% 相信这会更好，因为有多个`#define`和`#undef`操作，但它在某些方面几乎是最小的（例如，它不需要`"%d"`vs`"%s"`字段 - 至少在显示的代码中不需要）。

# java - 读取文本文件时出现 ArrayIndexOutOfBoundsException

> ID：15983497
> 
> 赞同：1
> 
> 时间：2013-04-13T02:16:59.463
> 
> 标签：java, io

我可以使用扫描仪读取文件。当返回类型为 void 时，我可以读取数据并将其打印到控制台，但是，随后它会立即引发 ArrayOutOfBoundsException。理想情况下，我想作为字符串数组返回，但是，我只得到一个 ArrayOutOfBoundsException。在这两种情况下，异常都会在 Cancers[j] = input.nextLine() 处引发。我已经确保数组的大小是正确的。当我不对它的大小进行硬编码时，编译器会在同一行抛出 NullPointerException（这是有道理的，因为未声明数组的大小）。

我需要该方法返回一个字符串数组，因为我必须对其进行额外的操作。

```
public String[] readCancer() {
       cancers = new String[21];
    int j = 0;
        try {
        input = new Scanner(myData);
        String result;
        while(input.hasNext()) {

            ++j;
            cancers[j] = input.nextLine();
            //System.out.println(cancers[j]);
         }

    } catch (FileNotFoundException fnfx) {
        JOptionPane.showMessageDialog(null, "Txt file could not be found");
    }
   return cancers;
} 
```

我尝试以稍微不同的方式重写该方法，但我得到了同样的错误，只是这次是在 output[i] = result;

```
public String[] readCancers() {
    FileInputStream fis;
    DataInputStream dis;
    BufferedReader br;
    InputStreamReader isr;
    String result;
    String[] output = new String[21];
    int i = 0;
    try {
        fis = new FileInputStream(myData);
        dis = new DataInputStream(fis);
        isr = new InputStreamReader(dis);
        br = new BufferedReader(isr);
        while((result = br.readLine()) != null) {
            ++i;
            output[i] = result;
        }
    } catch (FileNotFoundException fnfx) {
        fnfx.printStackTrace();
    } catch (IOException iox) {
        iox.printStackTrace();
    }
    return output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:41:40.107

很难知道你的文件有多少元素，但我假设你有 21 个元素，所以你需要一个 21 个元素的数组。您已经声明了一个包含 21 个元素的数组，但代码如下：

```
 ++j; 
```

意思如下：

```
 j = j+1; 
```

然后你使用 j 向你的数组添加一个元素，这会导致你完全跳过 j = 0 并且第 21 个项目试图放置在数组的第 22 个元素上，这是超出范围的。你可能想要的是这样的：

```
 cancers[j];
 j++; 
```

或者：

```
 cancers[j++]; 
```

这样你就不会越界了。如果您有超过 21 个项目，那么我建议您增加数组大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:46:19.420

作为您问题的评论者：它可能是一个错误的类型错误，因为您跳过了第一个数组元素。但是一旦你有一个固定大小的数组要读入，你必须在任何情况下在 while 循环中绑定检查 i 或 j 的值：`while(input.hasNext() && j < 20)`或`while((result = br.readLine()) != null && i < 21)`. 然后在循环检查是否会有任何额外的输入之后，这可能表明错误，你必须处理它。

# php - 如果 .txt 文件的一行中存在一个单词，PHP 会更改整行

> ID：15983498
> 
> 赞同：1
> 
> 时间：2013-04-13T02:17:02.043
> 
> 标签：php

我`preg_replace`用来在文本文件的一行中搜索单词匹配。如果找到，我想替换整行。我目前的问题是到目前为止我所尝试的只是替换了确切的单词而不是整行。

**PHP**

```
 $database = "1.txt";
  $id = "OFFENSIVEWORD1";
  $str = file_get_contents($database);
  $str = preg_replace("/\b".$id."\b/","********",$str);
  $fp = fopen($database,'w');
  fwrite($fp,$str);
  fclose($fp); 
```

**1.TXT文件**

```
LOVING YOU MY FRIEND etc.
OFFENSIVEWORD1 YOU MY FRIEND etc.
OFFENSIVEWORD2 YOU MY FRIEND etc.
OFFENSIVEWORD3 YOU MY FRIEND etc. 
```

**预期输出**

```
LOVING YOU MY FRIEND etc.
********
OFFENSIVEWORD2 YOU MY FRIEND etc.
OFFENSIVEWORD3 YOU MY FRIEND etc. 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T02:28:45.173

你需要改变

```
$str = preg_replace("/\b".$id."\b/","********",$str); 
```

至

```
$str = preg_replace("/\b" . $id . "\b.*\n/ui", "********\n", $str); 
```

让它工作。注意不同操作系统之间*换行符的区别。*

## 更新

或更好地使用

```
$str = preg_replace("/.*\b" . $id . "\b.*\n/ui", "********\n", $str); 
```

以防您的冒犯词不在行首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:50:07.823

这也应该这样做（这是经过测试并且有效的）：

```
<?PHP

$str = "
hello this is PROFANE 1
clean statement";

$lines = explode('
', $str);
$newfile = '';
foreach($lines as $line) {
  // ** change PROFANE 1 and PROFANE 2 obviously to real profane words to filter out
  if (stripos($line, 'PROFANE 1') !== false || stripos($line, 'PROFANE 2') !== false) {
    $line = preg_replace("/./", "*", $line);
  }
  $newfile .= '
' . $line;

}

echo "<pre>" . $newfile . "</pre>";

?> 
```

# ruby-on-rails - Rails Routes - 来自 Gems 的动态 - 无法修改冻结的字符串

> ID：15983503
> 
> 赞同：0
> 
> 时间：2013-04-13T02:17:26.230
> 
> 标签：ruby-on-rails, ruby, load, routes, gem

我有一个 Rails 应用程序（Rails 3.2.9/Ruby 1.9.3），它由几个小部分组成（曾经是一个大的单个应用程序，但我有必要将其拆分为组件）。

现在我已经有了应用程序的几个部分，作为宝石加载到主应用程序中。

我正在尝试动态地将路由加载到应用程序的各个部分，我也尝试防止 URL-Hacking，这就是为什么我想动态创建所有可用路由并将 controller#action 部分放入这样的 SHA1 字符串中：

```
get   "/#{controller+action as SHA!}/:id", :controller => c_name, :action => ac 
```

我的一个组件中的整个代码如下所示（在 routes.rb 中）：

```
 Rails.application.routes.draw do
    BootLog.info "loading -> Smartconcepts#Concept routes"  
    SmartconceptsConcept::SmartconceptsConceptEngine::LOADED_CONTROLLERS.each do |c_name|
      c_controller = c_name.camelize

      c_name = c_name.gsub("_controller", "")

      hex_name = Digest::SHA1.hexdigest(c_name)
      real_controller_actions = c_controller.constantize.action_methods

      BootLog.info " -- register: #{c_name} as:     #{hex_name}"
      BootLog.info " --- #{real_controller_actions.size} actions"

      # Default
      get   "/#{hex_name}/:action(.:id)", :controller => c_name
      post  "/#{hex_name}/:action(.:id)", :controller => c_name

      real_controller_actions.each do |ac|

        a_hex_name = Digest::SHA1.hexdigest((ac+c_name))

        BootLog.info " ----  #{c_name}##{ac} as:      #{a_hex_name}"

        get   "/#{a_hex_name}/:id", :controller => c_name, :action => ac
        post  "/#{a_hex_name}/:id", :controller => c_name, :action => ac
      end  

    end 

  end 
```

所以...

```
SmartconceptsConcept::SmartconceptsConceptEngine::LOADED_CONTROLLERS 
```

从我的引擎加载非常好，加载 action_methods 也可以正常工作。

```
rake routes 
```

完全显示了我的期望，但是在浏览器中加载页面时，我得到了

```
RuntimeError (can't modify frozen String): 
```

这显然是由我的方式加载路线引起的？

我该怎么做才能让它工作（禁用类缓存没有解决它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:42:25.357

加载控制器动作名称的问题。

使用 .dup 终于做到了。

```
real_controller_actions = c_controller.constantize.action_methods
#...
real_controller_actions.each do |ac|
    a_hex_name = Digest::SHA1.hexdigest((ac.dup+c_name))
end 
```

# java - 双向链表 - 删除和添加

> ID：15983511
> 
> 赞同：1
> 
> 时间：2013-04-13T02:18:33.733
> 
> 标签：java, doubly-linked-list

这是一个课堂实验室，我在其中尝试将添加、删除等添加到双向链表中。我拥有我认为正确的东西。如果对象不是列表的开头或结尾，我无法弄清楚如何删除它。我对 add 方法有类似的问题。非常感谢任何关于从这里去哪里的建议以及对我当前代码的评论。

```
public class Double<T extends Comparable<T>> implements ListInterface<T> {

protected DLLNode<T> front; //Front of list
protected DLLNode<T> rear; //Rear of list
protected DLLNode<T> curPosition; //Current spot for iteration
protected int numElements; //Number of elements in list

public Double() {
    front = null;
    rear = null;
    curPosition = null;
    numElements = 0;
}

protected DLLNode<T> find(T target) {
    //While the list is not empty and the target is not equal to the current element
    //curr will move down the list. If curr becomes null then return null.
    //If it finds the element, return it.
    DLLNode<T> curr;
    curr = front;
    T currInfo = curr.getInfo();
    while(curr != null && currInfo.compareTo(target) != 0) {    
        curr = (DLLNode<T>)curr.getLink();      
    }
    if (curr == null) {
        return null;
    }
    else {
        return curr;
    }           
}

public int size() { 
    //Return number of elements in the list 
    return numElements;     
}

public boolean contains(T element) {
    //Does the list contain the given element?
    //Return true if so, false otherwise.
    if (find(element) == null) {
        return false;
    }
    else {
        return true;
    }
}

public boolean remove(T element) {
    //While the list is not empty, curr will move down. If the element can not
    //be found, then return false. Else remove the element.
    DLLNode<T> curr;
    curr = front;
    T currInfo = curr.getInfo();
    while(curr != null) {   
        curr = (DLLNode<T>)curr.getLink();      
    }
    if (find(element) == null) {
        return false;
    }
    else {
        if (curr == null) {
            curr = curr.getBack();
            curr = rear;
        }
        else if (curr == front) {
            curr = (DLLNode<T>)curr.getLink();
            curr = front;
        }
        else if (curr == rear) {
            curr = curr.getBack();
            curr = rear;
        }
        else {

        }
    return true;
    }
}   

public T get(T element) {
    //Return the info of the find method.
    if (find(element) == null) {
        return null;
    }
    else {
        return find(element).getInfo();
    }

}

//public String toString() {

//}

public void reset() {
    //Reset the iteration back to front
    curPosition = front;        
}

public T getNext() {
    //Return the info of the next element in the list
    DLLNode<T> curr;
    curr = front;
    //while (curr != null) {
        //curr = (DLLNode<T>)curr.getLink();
    //}
    if ((DLLNode<T>)curr.getLink() == null) {
        return null;
    }   
    else {
        curr = (DLLNode<T>)curr.getLink();
        return curr.getInfo();
    }       
}

public void resetBack() {

}

public T getPrevious() {
    //Return the previous element in the list
    DLLNode<T> curr;
    curr = front;
    if ((DLLNode<T>)curr.getLink() == null) {
        return null;
    }
    else if((DLLNode<T>)curr.getBack() == null) {
        return null;
    }
    else {
        curr = curr.getBack();
        return curr.getInfo();
    }
}

public void add(T element) {
    //PreCondition: Assume the element is NOT already in the list
    //AND that the list is not full!
    DLLNode<T> curr;                
    DLLNode<T>  newNode = (DLLNode<T>)element;
    curr = front;
    if (curr == null) {
        front = (DLLNode<T>)element;
    }
    else {

    }

  }
} 
```

这是最终的目标主要功能：

```
public static void main(String[] args){

 Double<String> d = new Double<String>();
 d.add("Hello");
 d.add("Arthur");
 d.add("Goodbye");
 d.add("Zoo");
 d.add("Computer Science");
 d.add("Mathematics");
 d.add("Testing");

 System.out.println(d);

 System.out.println( "Contains -Hello- " + d.contains("Hello"));
 System.out.println("Contains -Spring- " + d.contains("Spring"));
 System.out.println("size: " + d.size());
 d.resetBack();
 for (int i = 0; i < d.size(); i++){
    String item = (String)d.getPrevious();
    System.out.println(item);
  } //good stopping point
 d.remove("Zoo");
 d.remove("Arthur");
 d.remove("Testing"); 
 System.out.println("size: " + d.size()); 
 System.out.println(d);
 d.remove("Goodbye");
 d.remove("Hello");
 System.out.println(d);
 d.remove ("Computer Science");
 d.remove("Mathematics");
 System.out.println(d);}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:27:33.630

我不知道你的`DLLNode`班级是什么样的，但它可能看起来像

```
class DLLNode {
    DLLNode next;
    DLLNode prev;
} 
```

要删除一个节点，逻辑是

```
next.prev = prev;
prev.next = next; 
```

要在节点`newNode`之后添加节点，逻辑是

```
newNode.prev = this;
newNode.next = next;
next = newNode; 
```

我没有做任何空指针检查，这取决于你。

# c++ - 我的析构函数堆栈溢出

> ID：15983513
> 
> 赞同：0
> 
> 时间：2013-04-13T02:18:44.970
> 
> 标签：c++, parsing, constructor, linked-list

这是我关于堆栈溢出的第一篇文章。我正在创建一个程序来按字母顺序将文本解析为链表，并跟踪每个单词的计数。程序运行良好（我的意思是 15 分钟，这显然很慢，并且没有使用强大的数据结构），直到我的程序返回并尝试解构动态分配的内存。有人可以帮助确定我可能需要调整哪些代码以避免溢出我的堆栈吗？

```
template <class T>
void WordList<T>::destroyWord(WordList<T> *node)
{
    WordList<T>* nodeD = NULL;
    for(; node != NULL; )
    {
        if(node == NULL)
            return;
        else if(node->mNext != NULL)
        {
            nodeD = node;
            node = node->mNext;
        }
        else    
        {           
           // We have found the node to delete.
           //destroyWord(node->mNext);
          if( node->mNext == NULL )
          {
               if( nodeD != NULL )
               {
                   nodeD->mNext = NULL;
                   delete nodeD;
                }
                else
                {
                    node = NULL;
                }
          }
          nodeD = NULL;
       }
    }

    // **********************************
    // Delete the node at the root.
    //delete node;
    return;
} 
```

这是我修改后的代码，谢谢大家！....

```
 template <class T>
    void WordList<T>::destroyWord(WordList<T> *node)
    {
        node = node->mRootNode->mNext;
        static WordList<T>* ptr = node;
        for(; node != NULL && node->mNext != NULL; )
        {
            ptr = node->mNext;
            delete (char*)node;
            node = ptr;
        }
        delete (char*)ptr;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:36:18.670

我敢打赌：你的析构函数很可能会调用`destroyWord`. 我们可以看到`destroyWord`有一个`delete nodeD;`声明。`nodeD`是 的 类型`WordList<T>`，因此这将导致对 的析构函数调用`WordList<T>`，并且`delete nodeD;`正如我们所见，它具有 a 。有我们的无限递归。

# c# - 在 ASP.NET 之外的 web.config 文件中使用 RsaProtectedConfigurationProvider 解密加密

> ID：15983520
> 
> 赞同：2
> 
> 时间：2013-04-13T02:19:38.840
> 
> 标签：c#, asp.net, .net, encryption, web-config

对于我的 .NET Windows 服务，我需要为我自己的 ASP.NET Web 应用程序解析 web.config 文件。我用来`XmlTextReader`进行解析，效果很好，除非我需要解密使用工具和[此方法使用](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)[RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)加密的 web.config 部分。这是我需要解密的数据库连接字符串部分的示例：`aspnet_regiis`

```
<connectionStrings configProtectionProvider="RsaProtectedConfigurationProvider">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
        xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>Rsa Key</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>B702tRDVHJjC3CYXt7I0ucCDjdht/Vyk/DdUhwQyt7vepSD85dwCP8ox9Y1BUdjajFeTFfFBsGypbli5HPGRYamQdrVkPo07bBBXNT5H02qxREguGUU4iDtV1Xp8BLVZjQMV4ZgP6Wbctw2xRvPC7GvKHLI4fUN/Je5LmutsijA=</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>ME+XJA2TAj3QN3yT4pJq3sRArC0i7Cz3Da71BkaRe9QNfuVuUjcv0jeGUN4wDdOAZ7LPq6UpVrpirY3kQcALDvPJ5nKxk++Mw75rjtIO8eh2goTY9rCK6zanfzaDshFy7IqItpvs/y2kmij25nM3ury6uO0hCf0UbEL1mbT2jXDqvcrHZUobO1Ef6bygBZ/8HpU+VfF9CTCob/BBE9zUkK37EQhcduwsnzBvDblYbF/Rd+F4lxAkZnecGLfCZjOzJB4xH1a0vvWtPR7zNwL/7I0uHzQjyMdWrkBnotMjoR70R7NELBotCogWO0MBimncKigdR3dTTdrCd72a7UJ4LMlEQaZXGIJp4PIg6qVDHII=</CipherValue>
      </CipherData>
    </EncryptedData>
  </connectionStrings> 
```

所以我的问题是如何使用 C# 解密它并拥有上面的文本？

PS。我在特定的 ASP.NET Web 应用程序之外执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:35:10.317

试试这个：

```
string section = "connectionStrings";

Configuration config = WebConfigurationManager.OpenWebConfiguration(Request.ApplicationPath);
ConfigurationSection configSection = config.GetSection(section);

if (configSection.SectionInformation.IsProtected)
{
     configSect.SectionInformation.UnprotectSection();
     config.Save();
} 
```

您也可以选择以类似的方式加密您的连接字符串。

# android - 如何学习和使用OpenGL ES 2.0？我只是不明白-严重的Qn。

> ID：15983521
> 
> 赞同：22
> 
> 时间：2013-04-13T02:19:45.100
> 
> 标签：android, opengl-es, matrix, opengl-es-2.0, game-engine

这是一个严肃的问题，在这一点上，我“卡”在理解它和根本不理解之间。我对阅读不同资源的时间感到非常困惑，并希望有人能指出我正确的方向。

我正在使用 Android 平台，直到现在我已经使用了`Canvas`, some `OpenGL ES 1.0`，但主要是通过引擎或已经构建的代码来尝试理解它。

我的目标是真正理解`OpenGL ES 2.0`。我不想直接进入复杂的东西并从简单的东西开始，但我就是不知道如何去做。我可以得到一个正方形，我可以设置一个相机和矩阵；说实话，我真的不了解整个矩阵系统以及它是如何工作的，如果我是对的，它是一个*固定功能管道*，你不需要更改，`OpenGL ES 1.0`但现在它是一个*可编程管道*，你可以必须自己设置。

我不知道如何使用坐标系，我知道原点是设备的中心，每转一圈到边缘是 1，所以从中心到左边它是负 1。

然而，有一些方法可以使它成为一个不同的坐标系，也许只是使用比例或乘法矩阵来将坐标设置为我习惯于从`Canvas`.

基本上我需要帮助的是我如何从这里取得进展？我觉得好像我到了某个地方，但我仍然无处可去。

我真的需要一些关于如何正确使用的建议`OpenGL ES 2.0`，现在我计划做的只是一个简单的 2D 游戏，也可能是横向滚动，所以我将不得不弄乱相机矩阵。

感谢您的宝贵时间，我将不胜感激任何帮助。

*我对变换矩阵不太感兴趣，因为我认为 2D 游戏不会真正使用它，也许只有当我镜像角色的精灵时，它看起来好像他正朝着不同的方向行走，但我很确定这可以通过改变坐标和宽度来简化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T01:25:10.593

那里缺乏像样的 openGL ES 2.0 Android / Java 特定教程，但它们就在某个地方。

看看这个，应该对你有帮助:-)

[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

对于使用 OGL 制作 2d 游戏，您基本上会忽略 z 轴而只使用 x 和 y。一开始会让人困惑，但坚持下去。

祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-20T07:58:23.660

您可以使用Prateek Mehta 的[这](http://www.apress.com/9781430250531) [本书](https://rads.stackoverflow.com/amzn/click/com/1430250534)。一切都用非常简单的术语来解释。有利于理解基础知识`OpenGL ES 2.0`和`GLSL`编程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T03:33:28.813

我在 Khronos Group 网站上找到了这个网站：

[Khronos 资源和一些示例代码，您可以](http://www.khronos.org/opengles/resources)[在此处](https://code.google.com/p/opengles-book-samples/source/checkout)为 android 下载

Zeus 网站有 25 个 OpenGL ES 2.0 代码，我认为它像 glut 教程的副本，但用于 ES 2.0。

我希望这可以简化事情，我正在尝试学习 OpenGL ES 2.0，您将来可能会在 2.0 上看到我的许多帖子（提问），只是为了让您知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-21T07:40:24.530

我发现[这个扩展的在线教程](http://www.arcsynthesis.org/gltut/)非常棒，不仅适用于 OpenGL 细节，而且适用于底层图形概念，这当然是困难的部分。非常清楚地展示了您通常会关注的不同坐标空间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-07T14:54:27.693

我发现这个免费课程非常有趣。它是关于 WebGL 的，但它根本不是特定于它（我认为他们只是使用它，因为它简化了学习体验，因为你不需要设置任何东西）。讲师给出了很好的例子，并详细解释了这些概念背后的数学原理。

[https://www.udacity.com/course/cs291](https://www.udacity.com/course/cs291)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-29T07:08:55.763

这是一条漫长的道路，但朝着同一个目标可能会有不同的道路。其他海报已经描述了一些，但我相信通往`GLES2`知识的最佳途径在于在建模程序中建模某些东西（`blender`...）和在您的移动设备或台式计算机上重现相同结果之间的交互。只需在建模程序中建模某些东西，例如地形、海洋表面……，可能不如专业建模者那样漂亮，然后用`GLES2`. 也许听起来很难，但根据我的经验，这是最好的方法。为了帮助您做到这一点，请在此处提问`SO`，阅读书籍，tuts，...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-13T12:15:51.330

我是 OpenGL 的新手，在搜索教程时我发现这个网站为我提供了很大的帮助[一个真正的 Open GL ES 2.0 2D](http://androidblog.reindustries.com/a-real-open-gl-es-2-0-2d-tutorial-part-1/)
也检查

```
A real Open GL ES 2.0 2D tutorial part 1: Rendering a triangle
A real Open GL ES 2.0 2D tutorial part 2: Rendering an Images
A real Open GL ES 2.0 2D tutorial part 3: Handling Input
A real Open GL ES 2.0 2D tutorial part 4: Transforming Images
A real Open GL ES 2.0 2D tutorial part 5: Knowing the OpenGL texture system
A real Open GL ES 2.0 2D tutorial part 6: Screens and dimensions
A real Open GL ES 2.0 2D tutorial part 7: Texture Atlas
A real Open GL ES 2.0 2D tutorial part 8: Rendering Text 
```

希望这个网站对大家有帮助。
上面的其他网站也很有帮助。
也检查一下。

# node.js - MongoDB关系查询

> ID：15983524
> 
> 赞同：5
> 
> 时间：2013-04-13T02:20:20.273
> 
> 标签：node.js, mongodb

我是 mongo 的新手，仍然试图将我的头从 mySQL 方法上移开并将其潜入 mongo，所以一些事情仍然模糊我应该怎么做，我希望你们能给我一些启发.

让我解释一下这个问题。我正在使用 nodeJS 和 mongodb 本机。

假设我有一组用户（我使用更简单的 _id 来说明，我知道它是一个 objectID，但只是为了示例而考虑）

```
{
     _id: 1,
     name: 'John',
     likes: ['2','3','4'] 
},
{
     _id: 2,
     name: 'Michelle'
     likes: ['1','4']
},
{
     name: 'Sabrina'
     _id: 3,
     likes: []
},
{
     name: 'Simone'
     _id: 4,
     likes: ['1','2', '3']
} 
```

请注意，John 喜欢 Michell、Sabrina 和 Simone，Michelle 喜欢 John 和 Simone，Sabrina 不喜欢任何人，而 Simone 喜欢 John、Michelle 和 Sabrina。

我如何对 John 进行查询，以根据他的一系列喜欢找出谁也喜欢他？如果 id = 1，我需要返回 Michelle 的东西，如果 id = 4 则返回 John 和 Michelle。只有我正在获取的 id 是其他用户喜欢的。

让我试着简化一下。

我需要找到约翰并查看他所有的喜欢并检查 id 2 喜欢我吗？是的 id 3 喜欢我吗？不

返回[约翰]；

或者找西蒙妮并查看她所有的喜欢并检查 id 1 喜欢我吗？是的 id 2 喜欢我吗？是的 id 3 喜欢我吗？不

返回 [约翰，米歇尔]

任何帮助将不胜感激:)谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T02:37:57.603

开始了：

像这样的东西应该使用 nodejs 中的 mongodb-native 驱动程序来解决问题：

```
var people = db.collection("users");
people.findOne({name: "John"}, function(err, result)
  if(err) throw err; //..or however you want to handle an error.
  people.find({_id: {$in: result.likes}, likes:result._id}).toArray(function(err, others)
    {
    if(err) throw err; //...again, your call how to handle a potential error.
    //finds all people who are in likes array AND have Johns ID in their likes array.
    });
  }); 
```

基本上，首先您检索 John 的记录。接下来，您使用他的 likes 数组来检索所有具有匹配 id 的用户 :)

请注意，这可以通过选择仅检索 John 的喜欢字段来稍微优化，如下所示：

```
people.findOne({name: "John"}, {"likes": 1}, function(err, result)
  {
  //.....
  }); 
```

另请注意，如果 likes 数组特别大，您可能希望一次检索一个值，而不是使用该方法一次检索所有值`.toArray()`，而是使用从 find() 返回的游标并一次处理一个项目，如在：

```
//....
var cursor = people.find({_id: {$in: result.likes}, likes:result._id});
cursor.each(function(err, item)
    {
    if(err) throw err; //...
    if(item != null)
    //do stuff with each person returned given likes array
    });
//.... 
```

恐怕我还没有测试过上面的内容，如果我犯了任何错误，请见谅！

我发现 mongo-native node.js 驱动程序的手册非常宝贵；它很好地涵盖了大多数事情（尽管有些代码似乎比其他位“旧”一些）：

[http://mongodb.github.io/node-mongodb-native/api-articles/nodekoarticle1.html](http://mongodb.github.io/node-mongodb-native/api-articles/nodekoarticle1.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T02:56:00.663

它必须在两个查询中完成（因为 Mongo 是非关系型的）。第一个查询是找到那个人（我相信你已经想出了如何做到这一点）。第二个会回答谁喜欢他/她。

```
var userId = 1;
people.findOne({ _id: userId }, { likes: 1 }, function (err, person) {
    if (err)
        throw err; // <-- obviously handle the error better than this

    people.find({ _id: { $in: person.likes }, likes: userId }).toArray(
        function (err, likers) {
            //now you have your list of people who liked the user back
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T03:42:32.443

使用您的文档结构将需要两次。

但是，通常在使用像 mongo 这样的 nosql 数据库时，应该进行非规范化。而不是避免重复数据，在 mongo 中重复是好的和标准的做法。

尝试：

```
{
     _id: 1,
     name: 'John',
     likes: ['2','3','4'],
     liked_by: ['2''4'] 
},
{
     _id: 2,
     name: 'Michelle',
     likes: ['1','4'],
     liked_by: ['1''4'] 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-10T10:29:25.700

您现在可以使用 $lookup：

用法：

```
{
   $lookup:
     {
       from: <collection to join>,
       localField: <field from the input documents>,
       foreignField: <field from the documents of the "from" collection>,
       as: <output array field>
     }
} 
```

[https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)

# c++ - 在 C++ 窗口菜单中显示日语、中文、Viatnamese 等

> ID：15983526
> 
> 赞同：0
> 
> 时间：2013-04-13T02:20:40.707
> 
> 标签：c++, menu, special-characters

我正在制作一个可以在按下后显示不同语言的程序，但是当我在菜单中制作 LPSTR 以显示日文选项时，它不会显示日文字符。它只是显示“？？？”。

这是我的程序的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/umpxj.png)

这是不起作用的代码：

我试过这个：

```
 AppendMenu(win32LANGUAGE,MF_STRING,NULL,"日本人"); 
```

和这个：

```
 wchar_t jap = "日本人"; 
        AppendMenu(win32LANGUAGE,MF_STRING,NULL,(LPSTR)jap); 
```

我被困住了。我不知道为什么它不会显示日文字符。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:36:36.630

如果您的编译器没有在 AppendMenu 上抛出错误，那么您可能还没有定义`UNICODE`宏，请尝试使用`AppendMenuW`, 将`jap`（应该是 a `wchar_t const*`）设置为`L"日本語"`，并且不要强制转换它。

# ti-basic - 转换为 DMS 时如何“修复”小数点？

> ID：15983528
> 
> 赞同：1
> 
> 时间：2013-04-13T02:21:10.053
> 
> 标签：ti-basic

在 TI-Basic 中，有一个`Fix`功能可以限制显示的小数位数。例如，`Fix 2`将仅显示 2 个十进制数字。但是，当我尝试将数字转换为度-分-秒表示法时，有时会得到比“固定”十进制数字更多的数字。例如，

```
1.12345678901
Float
Disp Ans►DMS
Fix 2
Disp Ans►DMS
Float
Disp Ans
Fix 2
Disp Ans 
```

显示

```
1°7'24.444"
1°7'24.444"
1.123456789
1.12 
```

正常的小数按预期运行。但是，我希望第二行显示`1°7'24.44`. 这可能吗？还是我必须以某种方式将其转换为字符串并在之后修剪？（请记住，由于显示限制，我想缩短小数点；我想在它旁边显示文本而不重叠）。

额外信息：TI-84+ Silver Ed'n，操作系统版本 2.55 w/MathPrint

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:42:00.857

`►DMS`将在小数点后显示 0 到 3 位，仅取决于小数的长度。`Fix`以编程方式或通过设置的命令`MODE`不会影响这一点。

将 DMS 格式的数字存储在变量中将撤消 DMS 格式，并且不能将其存储在字符串中。

我的建议是将度数、分钟数和秒数隔离在单独的变量中，并从那里使用它们。这样一来，他们也都会受到`Fix`命令的影响。

# javascript - Twitter Widget 未在 Joomla 2.5 中显示

> ID：15983530
> 
> 赞同：1
> 
> 时间：2013-04-13T02:21:29.170
> 
> 标签：javascript, joomla, twitter, joomla2.5

我的 Twitter 小部件在 Joomla 2.5 中不显示。我从 Joomla 的全局配置中的（超级用户）黑名单中删除了*脚本*，并在 JCE 编辑器中允许了 JavaScript（配置文件默认配置文件 -> 编辑器参数 -> 高级）。我不确定还能尝试什么。

**以下是超级用户自定义黑名单的过滤标签：**

> applet, body, bgsound, base, basefont, embed, frame, frameset, head, html, id, ilayer, layer, link, meta, name, object, style, title, xml

**这是 Twitter 小部件：**

```
<a class="twitter-timeline"     
href="https://twitter.com/myname/favorites" data-widget
-id="myid">Favorite Tweets by @myname</a>

<script>!function(d,s,id){
    var js,fjs=d.getElementsByTagName(s)

[0],p=/^http:/.test(d.location)?'http':'https';if(!

d.getElementById(id)){js=d.createElement

(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.

parentNode.insertBefore(js,fjs);}}(document,"script","twitter-

wjs");</script> 
```

**编辑**

这就是显示的全部内容：

> @myname 最喜欢的推文

# javascript - 在 javascript 中处理 uint8_t

> ID：15983531
> 
> 赞同：0
> 
> 时间：2013-04-13T02:21:42.477
> 
> 标签：javascript, type-conversion, uint8t

G'day 人民，

我正在使用 MavLink 获取 GPS 信息。其中一种消息类型是 GPS_STATUS，MavLink 使用一系列 uint8_t[20] 对其进行描述。

如果我运行以下代码：

```
console.log(' sat prn: ' + message.satellite_prn);
console.log(' sat prn: ' + JSON.stringify(message.satellite_prn));
console.log(' sat prn: ' + JSON.stringify(new Uint8Array(message.satellite_prn))); 
```

我得到以下输出：

```
 sat prn: <weird charcaters...>
 sat prn: "\u0002\u0005\n\f\u000f\u0012\u0015\u0019\u001a\u001b\u001d\u001e\u001f\u0000\u0000\u0000\u0000"
 sat prn: {"BYTES_PER_ELEMENT":1,"buffer":{"byteLength":0},"length":0,"byteOffset":0,"byteLength":0} 
```

所以显然它不起作用。我需要一种方法来获取每个元素的 int 值。

我发现这个[https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays?redirectlocale=en-US&redirectslug=JavaScript_typed_arrays](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays?redirectlocale=en-US&redirectslug=JavaScript_typed_arrays)

这让我觉得我可以做到以下几点：

```
satellite_prn = Array.apply([], new Uint8Array(message.satellite_prn));
satellite_prn.length === 20;
satellite_prn.constructor === Array; 
```

但是当我通过 JSON 对其进行字符串化时，它会报告 []，我认为这是一个空数组。

有谁知道我该怎么做？我知道数据是一个由 20 个无符号 8 位整数组成的数组。我只需要知道如何访问或解析它们。

注意：我使用的是 node.js，但这不应该影响我正在做的事情。这就是我使用 console.log 的原因，因为它在 node.js 中很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:13:00.523

您的代码有两个问题：

1.  `message.satellite_prn`是字符串而不是数组
2.  `Unit8Array`需要加载`.set`

* * *

要从 中获取数字数组`message.satellite_prn`，请执行以下操作：

```
var array = message.satellite_prn.map(function(c) { return c.charCodeAt(0) }) 
```

要加载`ArrayBuffer`，请执行以下操作：

```
var buffer = new ArrayBuffer(array.length);
var uint8View = new Uint8Array(buffer);
uint8View.set(array); 
```

理想情况下，您不需要遍历字符串。如果您从 XMLHttpRequest 的最新实现（例如[xhr2](https://npmjs.org/package/xhr2) ）获取数据，您可以设置：

```
responseType = "arraybuffer" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:20:03.883

看起来问题是我对如何在 javascript 中处理二进制数据的理解。我发现我可以通过 charCodeAt() 执行以下操作以获取以 10 为底的数据。

以下是允许我遍历 20 个无符号 8 位整数并将每个值作为小数的代码：

```
for(var i = 0, l = message.satellite_prn.length; i < l; i++) {
    console.log(' Satellite ' + i + ', id: ' +
        parseInt(message.satellite_prn.charCodeAt(i), 10)
    );
} 
```

我怀疑可能有一个函数允许我将二进制数据转换为数组，但由于未知原因，Uint8Array 似乎对我不起作用。然而，上面确实如此。

# database - 在 Cygwin 上以用户身份安装 PostgreSQL

> ID：15983538
> 
> 赞同：1
> 
> 时间：2013-04-13T02:23:21.600
> 
> 标签：database, postgresql, cygwin, database-connection, database-server

我正在尝试按照 cygwin 软件包安装中给出的说明以用户身份在 Cygwin 上安装 PostgreSQL：

```
cygrunsrv -S cygserver
initdb -D /usr/share/postgresql/data
pg_ctl start -D /usr/share/postgresql/data -l /var/log/postgresql.log
createdb
psql 
```

完成第三步后，我在终端中得到以下输出，

```
$ postgres -D /usr/share/postgresql/data
LOG:  database system was shut down at 2013-04-12 19:04:33 PDT
LOG:  autovacuum launcher started
LOG:  database system is ready to accept connections 
```

在那之后，我不确定该怎么做，因为我再也看不到命令​​行（“$”符号）。当谈到数据库时，我是一个完整的初学者，所以有什么“傻瓜”指针适合我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:28:06.373

如果`pg_ctl -D /usr/share/postgresql/data -l /path/to/write/log/to start`您希望服务器启动并在后台运行，请使用它。

我强烈建议阅读 PostgreSQL 教程和手册，其中详细介绍了这一点。

# moles - Microsoft.Moles.vshost 已停止工作

> ID：15983541
> 
> 赞同：1
> 
> 时间：2013-04-13T02:23:44.100
> 
> 标签：moles

我有一堆用 C# 编写的单元测试，它们使用 moles 来模拟串行端口类。我正在使用 Visual Studio 2008。直到今天我重新运行测试时，这一切都运行良好......一旦它尝试创建一个 MSerialPort 对象，就会弹出警告框，并显示消息“Microsoft. Moles.VsHost 已停止工作”。我试过重新安装痣等，但不知道还能尝试什么或在哪里可以找到更多信息。测试本身都没有改变，所以它必须是 .net 运行时之类的东西。我正在使用.net 3.5。还有其他人遇到这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:04:24.950

发现了问题……关于安全更新 KB2742599（.NET 3.5 的安全更新）的一些东西破坏了痣。我卸载了这个更新，重新启动了电脑，一切又正常了。我正在使用 Windows 7 SP1、x86。

# objective-c - 将 NSNumber 插入 NSMutableArray

> ID：15983542
> 
> 赞同：0
> 
> 时间：2013-04-13T02:23:48.650
> 
> 标签：objective-c

allTiles 是一个 NSMutuableArray，声明的容量为 9。接下来，循环插入 9 个 NSNull 对象，方法名为`resetArray`. 我有一个名为 addToArray 的方法，它接受一个 NSNumber 和在其中插入值的索引。

在另一个类中，我有`int currentTileValue = [self getTileValue];`一个返回 tile 值的类。该值既是数组中的数字，也是索引。每当我尝试添加到数组时，它都会崩溃，但没有说明原因。

```
allTiles = [[NSMutableArray alloc] initWithCapacity:9];
[self resetArray:allTiles];

- (void) resetArray:(NSMutableArray*) array {
for (int i = 0; i < 9; i++) {
    [array insertObject:[NSNull null] atIndex:i];
}
}

- (void) addToArray:(NSNumber*)value :(int)index {
[allTiles insertObject: value atIndex:index];
}
//Different class
//Here is where I am trying to insert into the array.
[(BoxView *)self.superview addToArray:(NSNumber*)currentTileValue :currentTileValue]; 
```

什么会导致这崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:41:47.357

你说那`currentTitleValue`是一个`int`. 鉴于此，您需要更改此行：

```
[(BoxView *)self.superview addToArray:(NSNumber*)currentTileValue :currentTileValue]; 
```

至：

```
[(BoxView *)self.superview addToArray:@(currentTileValue) :currentTileValue]; 
```

您不能将 an`int`转换为`NSNumber`指针。你需要转换它。

另外，你的`addToArray`方法不正确。由于您使用 9 个对象预先填充数组`NSNull`，因此您需要调用`replaceObjectAtIndex:withObject:`，而不是`insertObject:atIndex`（假设您始终只需要 9 个值）：

```
[allTiles replaceObjectAtIndex:index withObject:value]; 
```

您还应该将您的`addToArray::`方法重命名为更好的名称：

```
- (void)addToArray:(NSNumber*)value index:(int)index { 
```

# c# - ASP.NET 和 C# 重定向

> ID：15983545
> 
> 赞同：20
> 
> 时间：2013-04-13T02:23:58.517
> 
> 标签：c#, asp.net, redirect

我正在为学校做一个项目，这是一个额外的学分部分。我有一个使用母版页在 VS 2010 中启动的项目，我想做的是获得一个“提交”按钮，将人们重定向到“MyAccounts.aspx”页面。我当前的按钮 ASP 部分代码如下所示：

`<asp:Button ID="btnTransfer" runat="server" Text="Submit"/>`

我尝试添加`OnClick`选项以及`OnClientClick`选项。我还将此代码添加到 Site.Master.cs 文件以及 Transfer.aspx.cs 文件中：

```
protected void btnTransfer_Click(object sender, EventArgs e)
{
    Response.Redirect(Page.ResolveClientUrl("/MyAccounts.aspx"));
} 
```

当我运行它并在浏览器中查看项目时，整个过程运行良好，但是当我单击“提交”按钮时，它只是刷新了当前页面，并没有正确重定向到 MyAccounts 页面。有人对我有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T02:35:17.663

你做的几乎是正确的，你只是没有把正确的部分放在一起。在 Transfer.aspx 上，您的按钮应该是：

```
<asp:Button ID="btnTransfer" OnClick="btnTransfer_Click" runat="server" Text="Submit"/> 
```

并且您背后的代码应该像@KendrickLamar 所说的那样：

```
protected void btnTransfer_Click(object sender, EventArgs e)
{
    Response.Redirect("~/MyAccounts.aspx");
} 
```

该`OnClick`事件告诉它在用户单击按钮时在回发时执行什么。这是在 Transfer.aspx 的代码隐藏中，而不是站点主控。

# php - 处理树数组的最佳方法

> ID：15983547
> 
> 赞同：0
> 
> 时间：2013-04-13T02:25:01.110
> 
> 标签：php, arrays, cakephp, tree

我有一个来自 cakephp 2.0 树行为的树数组，我需要将它分成多个级别，这样我就可以为每个级别构建一个选择器。下面是一个数组示例：

```
Array
(
    [25] => Global
    [26] => _Region1
    [29] => __Pais1
    [41] => ___Distrito1
    [42] => ___Distrito2
    [30] => __Pais2
    [43] => ___Distrito1
    [44] => ___Distrito2
    [31] => __Pais3
    [45] => ___Distrito1
    [32] => __Pais4
    [46] => ___Distrito1
    [27] => _Region2
    [33] => __Pais1
    [47] => ___Distrito1
    [34] => __Pais2
    [48] => ___Distrito1
    [35] => __Pais3
    [36] => __Pais4
    [28] => _Region3
    [37] => __Pais1
    [38] => __Pais2
    [39] => __Pais3
    [40] => __Pais4
) 
```

现在我需要为全局创建一个选择，为 region1 创建另一个选择，为 pais1 创建另一个选择，为 disctrito1 创建另一个选择

问题是我可以使用 ids 来生成它，因为这将由用户更改。

操作此数组的最佳方法是什么，以便它为数组的每个级别构建一个选择。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T09:56:47.560

您可以通过 将树作为嵌套数组获取`find('threaded')`。这将为您提供树中的每个项目，并带有一个包含所有子节点作为数组的“子”键；

[检索您的数据 - find('threaded')](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

然而，如所指出的，因为内容将被用户修改，所以树的深度可能会改变。为了适应这些变化，您需要使用*“递归函数”*循环遍历树，无论其深度如何

样机代码：

```
echo $this->MyTreeHelper->buildTreeDropDowns($treeData);

class MyTreeHelper extends AppHelper {

    public function buildTreeDropDowns($treeData)
    {
         $output = '';

         foreach($treeData as $item) {
              $output .= createAdropDown($item);

              if (!empty($item['children'])) {
                   $output .= $this->buildTreeDropDowns($item['children']);
              }
         }
         return $output;
    }
} 
```

# jquery - 谷歌浏览器 jQuery ajax 加载

> ID：15983550
> 
> 赞同：0
> 
> 时间：2013-04-13T02:25:44.363
> 
> 标签：jquery, ajax, google-chrome

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="jquery-1.9.1.js" type="text/javascript">
</script>
 <link rel="stylesheet" href="jQuery_hide.css" />
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    $("#div1").load("no.txt",function(responseTxt,statusTxt,xhr){
      if(statusTxt=="success")
        alert("External content loaded successfully!");
      if(statusTxt=="error")
        alert("Error: "+xhr.status+": "+xhr.statusText);
    });
  });
});
</script>
<title>jQuery</title>
</head>
<body>
<div id="div1">Content goes here!</div>
<button id="click">Load</button>
</body>
</html> 
```

所以我写了上面的简单代码来测试jQuery ajax方法`load()`，它在Chrome中不起作用。实际上，它返回一个 404 错误。然而，这段代码在 Firefox、IE 和 Safari 中有效！如果您问我使用的是 Chrome 26。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T21:32:31.603

我有同样的问题。作为一种解决方法，我发现 .get 函数运行良好。

```
$.get(_url, pars, function(data) {
     $( '#ajaxReplaceMe' ).html( data );
}); 
```

其中 ajaxReplaceMe 是您希望加载内容的（比如说）div 元素的 id。

# numpy - 将方程的 txt 文件格式化为相同的格式，然后在 Python 中对其进行操作以进行线性代数计算

> ID：15983553
> 
> 赞同：2
> 
> 时间：2013-04-13T02:26:26.427
> 
> 标签：numpy, formatting, matplotlib, linear-algebra, python-3.2

我正在寻找一种在 Python 3.2 中转换方程的通用方法。我最近才开始玩弄它，偶然发现了一些我的旧 MATLAB 作业。我可以在 MATLAB 中计算这个，但 pylab 对我来说仍然有点神秘。

因此，我有一个方程文本文件，我试图将其转换为相同形式的 A x = b，然后在 PYLAB 中解决一些与它们相关的线性代数问题。

文本文件“equations.txt”包含以下格式的线性方程组：

```
-38 y1  +  35 y2  +  31 y3  = -3047

11 y1  + -13 y2  + -34 y3  = 784

34 y1  + -21 y2  +  19 y3  = 2949 
```

等等

该文件包含四组方程的方程，每组具有不同数量的变量。每组方程都具有所示的精确形式（上面的 3 个示例），每组之间有一个空行。

我想编写一个程序来读取文件中的所有方程组，将方程组转换为矩阵方程 `A x = b`，并求解向量的方程组`x`。

我的方法非常“MATLABy”，这是一个问题，因为我希望能够编写一个可以解决所有变量的程序。

我尝试将单个方程式读取为文本行，去掉末尾的回车符，并在`=`符号处分割线，因为我们知道分割中的第二个元素是等式的右侧，进入向量`b`。

拆分中的第一个元素是您必须获取`A`矩阵中的系数的部分。如果你在空白处分割它`' '`，你会得到一个类似的列表

```
['-38', 'y1', '+', '35', 'y2', '+', '31', 'y3'] 
```

现在请注意，您可以提取每个第三个元素并获取进入矩阵的系数`A`。
部分答案是：

```
y1 = 90; c2 = 28; x4 = 41; z100 = 59 
```

我试图操纵它们给我`y1, ..., y3`第一个方程组的解的条目总和，`c1, ..., c6`第二个方程组的解的条目总和，解的条目`x1, ..., x13`总和第三个方程组，以及`z1, ..., z100`第四个方程组解的条目总和。

就像，我说过 - 我可以在 MATLAB 中做到这一点，但不能在 Python 中做到这一点，所以我可能以错误的方式处理这个问题，但这是我目前所拥有的：

```
import pylab
f = open('equations.txt', 'r')

L=f.readlines()

list_final = []

for line in L:
line_l = line.rstrip()
list_l = line_l.split(";")
list_l = filter(None, list_l)

for expression in list_l: 
```

并以

```
f.close() 
```

这只是我尝试将方程格式化为所有看起来相同的尝试。我意识到这不是很多，但我真的希望有人可以开始我的工作，因为即使我知道一些 python，我通常不会将它用于数学，因为我有 MATLAB。

我认为这对我们中的许多有 MATLAB 经验但没有 pylab 的人来说可能很有用。你会如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:23:20.457

对于您的示例格式，很容易通过以下方式处理它`numpy.loadtxt()`：

```
import numpy as np
data = np.loadtxt("equations.txt", dtype=str)[:, ::3].astype(np.float)
a = data[:, :-1]
b = data[:, -1]
x = np.linalg.solve(a, b) 
```

步骤是：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:17:55.747

另一种可能对非结构化输入更健壮的方法是使用 Python 符号数学包 ( [sympy](http://sympy.org) ) 和一些解析技巧的组合。这可以缩放到以任意顺序编写的方程中的变量。

尽管 sympy 有一些解析工具（您的输入在外观上与 Mathematica 非常接近），但该`sympy.parsing.mathematica`模块似乎无法处理某些输入（尤其是前导减号）。

```
import sympy
from sympy.parsing.sympy_parser import parse_expr
import re

def text_to_equations(text):
    lines = text.split('\n')
    lines = [line.split('=') for line in lines]
    eqns = []
    for lhs, rhs in lines:
        # clobber all the spaces
        lhs = lhs.replace(' ','')
        # *assume* that a number followed by a letter is an
        # implicit multiplication
        lhs = re.sub(r'(\d)([a-z])', r'\g<1>*\g<2>', lhs)
        eqns.append( (parse_expr(lhs), parse_expr(rhs)) )
    return eqns

def get_all_symbols(eqns):
    symbs = set()
    for lhs, rhs in eqns:
        for sym in lhs.atoms(sympy.Symbol):
            symbs.add(sym)
    return symbs

def text_to_eqn_matrix(text):
    eqns = text_to_equations(text)
    symbs = get_all_symbols(eqns)
    n = len(eqns)
    m = len(symbs)
    A = numpy.zeros((m, n))
    b = numpy.zeros((m, 1))
    for i, (lhs, rhs) in enumerate(eqns):
        d = lhs.as_coefficients_dict()
        b[i] = int(rhs)
        for j, s in enumerate(symbs):
            A[i, j] = d[s]
    x = sympy.Matrix([list(symbs)]).T
    return sympy.Matrix(A), x, sympy.Matrix(b)

s = '''-38 y1  +  35 y2  +  31 y3  = -3047
11 y1  + -13 y2  + -34 y3  = 784
34 y1  + -21 y2  +  19 y3  = 2949'''
A, x, b = text_to_eqn_matrix(s)
print A
print x
print b 
```

# fortran95 - (1) 处的不可分类语句，Fortran90 错误

> ID：15983554
> 
> 赞同：0
> 
> 时间：2013-04-13T02:26:29.083
> 
> 标签：fortran95

当我尝试编译时，我不断收到此错误。我不太确定问题是什么。我不是最擅长编码，因此，调试不是我的强项。任何想法是什么导致错误？

```
PROGRAM Atmospheric_Reflection
    IMPLICIT NONE

    REAL*8:: Wavelength = 0.200D-6, WaveNumber = 0.0, pi = 3.14159265, Length(1:71) = 0, Number(1:71) = 0, IndexOfRe(1:71) = 0
    INTEGER:: i = 0

    !Calculate the wave number for wavelengths varying from 0.2 micrometers to 1.6 micrometers  in increments of 0.02 micrometers
    i = 1

    DO WHILE (Wavelength <= 1.600D-6)
        WaveNumber = 1/Wavelength
        Length(i) = Wavelength
        Number(i) = WaveNumber
        IndexOfRe(i) = 1 + (((5791817.0/(238.0185 - WaveNumber**2))+(167909.0/(57.362-WaveNumber**2))))D-8
        Wavelength = Wavelength + 0.02D-6

        i = i+1
    END DO
END PROGRAM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:41:44.880

可能是这条线末端的 D-8

```
IndexOfRe(i) = 1 + (((5791817.0/(238.0185 - WaveNumber**2))+(167909.0/(57.362-WaveNumber**2))))D-8 
```

# joomla - 在 joomla 中处理复杂页面布局的最佳方法

> ID：15983556
> 
> 赞同：0
> 
> 时间：2013-04-13T02:26:32.447
> 
> 标签：joomla

我必须为客户转换一个静态站点，并且它必须保留现有的布局。

幸运的是，大多数页面不必是可编辑的，因此对于那些我打算或多或少使用现有的 html 的页面。

我面临的挑战是，对于许多确实需要可编辑的页面，内容是按列排列的（2、3，有时是混合的）

这个（[http://globalstrategies.org/index.php/give/hope-partners](http://globalstrategies.org/index.php/give/hope-partners)）就是这样一个页面的例子，你可以在网站上看到其他布局相对复杂的页面。

我曾想过创建一个 jce 样式表，它至少会以合理的方式在编辑器中布局页面（有点像响应式网站，通过将列一个接一个地堆叠），但我担心我的客户可能会不小心删除创建更详细结构的周围类/div。

我对 Joomla 非常熟悉，并且已经建立了很多站点，但是我没有使用 cck 工具，并且希望在这种情况下不必这样做，尽管现在也许是学习的时候了。

欢迎任何意见/建议！

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T09:37:55.333

也许 ContentBuilder 可以在你的情况下做，它相当容易并且创建超级简单的代码，我已经用它完成了类似的任务。您为用户提供 3 个字段（每列一个）并为其显示创建布局。

另一种选择可能更简单：您可以在 com_content/article 的模板覆盖中覆盖页面功能的使用，指示用户最多插入 2 个分页符，并根据需要使用分页符构建布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:10:17.467

如果您的网站升级到 Joomla 3，您可以使用内置的 Bootsrap 进行布局。
您可以在以下页面中找到更多信息：http: [//twitter.github.io/bootstrap/scaffolding.html#gridSystem](http://twitter.github.io/bootstrap/scaffolding.html#gridSystem)

# java - iOS 上的 Java 小程序

> ID：15983557
> 
> 赞同：0
> 
> 时间：2013-04-13T02:26:58.293
> 
> 标签：java, ios, mobile, applet, oracle-adf

我知道这两者互相憎恨，但我对使用 Oracle ADF Mobile 在 iOS 设备上运行 Java 进行了一些研究。我正在尝试开发一种在 iOS 应用程序中运行 Java 小程序的方法。我看到的演示和教程在实现这一点方面没有多大用处，我被困住了。

有谁知道这是否可能，已经完成，或者我可以查看一个开源示例来提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:56:33.113

我不相信它会起作用，但是您可以尝试在 ADF Mobile 中的 amx 文件中添加一个小程序，看看是否有问题，因为 oracle 放在 iOS 上的 VM 与所需的 VM 确实不同小程序有效运行！！！

# javascript - 如何判断输入字段中何时输入了字符？

> ID：15983558
> 
> 赞同：3
> 
> 时间：2013-04-13T02:27:09.377
> 
> 标签：javascript, jquery

假设我有一个带有代码 id ( #code ) 的输入字段。

如何判断何时使用 javascript 或 jQuery 在其中输入了新字符？

这是手动输入文本或由 javascript / jQuery 完成的时候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:29:19.037

使用 Change 函数跟踪文本框输入中的任何更改。`Change event will be triggered only if you focus out of the text box`

```
$('#idoftextbox').change(function(){
    //do something
}); 
```

如果您想在用户输入内容时进行检测，那么您需要使用 KeyPress

```
$('#idoftextbox').keypress(function(event) {
  if ( event.which == 13 )  { //This will give you the key code
     event.preventDefault();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:31:07.847

**编辑**

仅在现代浏览器中，您可以使用“*输入*”事件。在大多数情况下，更改事件可能会对所有浏览器有所帮助，下面定义了 jQuery 和 JS 示例。如前所述，更改事件只会在输入失去焦点时触发，因此您必须使用多种技术组合来覆盖所有基础，包括以给定的时间间隔检查字段值。可以在这里找到涵盖所有场景的详尽解释： [Detecting input change in jQuery?](https://stackoverflow.com/questions/6458840/on-input-change-event)

jQuery：

```
 $('#code').on('change', function(e){
    //do something 
    }); 
```

Javascript

```
document.getElementById('code').addEventListener('change', function(e){
//do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T06:18:21.267

This will trigger on every keypress.

**Using Javascript:**

```
document.getElementById('id').addEventListener('input',function(e){
        console.log("Print Hello World");
         //do something else
        }); 
```

# opengl - 如何在 emacs 启动时自动加载 cl- opengl 和 lispbuilder-sdl-image？

> ID：15983561
> 
> 赞同：0
> 
> 时间：2013-04-13T02:27:28.310
> 
> 标签：opengl, emacs, sdl, slime, sbcl

如何在 emacs 启动时自动加载 cl-​​opengl 和 lispbuilder-sdl-image？现在我必须在启动时在 emacs 中加载这些命令以使用 cl-opengl 和图像： (asdf:load-system :cl-opengl) (asdf:load-system :cl-glu) (asdf:load-系统：cl-glut) (asdf:load-system :cl-glut-examples) (asdf:load-system :lispbuilder-sdl-image)

因为当我输入 .emacs 时，我收到下面的错误消息，并且 emacs 以白色界面（通常为黑色）开头：Symbol 的函数定义为 void：asdf:load-systemSymbol 的函数定义为 void：asdf:load-system

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T03:45:08.860

Emacs 不运行普通的 lisp。如果您想做的是在启动 common lisp 时加载它们，请检查您的发行版文档。在 sbcl 的情况下，只需将表达式放在主目录中的文件 .sbclrc 中。虽然我建议使用 quicklisp 为您获取软件包。所以 ql:quickload 而不是 asdf:load-system

# java - JAVA中的`type a[]`和`type[] a`有什么区别

> ID：15983562
> 
> 赞同：0
> 
> 时间：2013-04-13T02:27:30.217
> 
> 标签：java, arrays

我绑了以下，好像没什么区别

```
import java.math.BigInteger;
import java.util.Random;
import java.util.Scanner;

public class Main {

    /**
     * @param args
     */

    final static int MAXN = 100005;

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int n = 100;
        BigInteger[] a = new BigInteger[n];
        BigInteger b[] = new BigInteger[n];
        for (int i = 0;i < n;i++){
            a[i] = BigInteger.valueOf(i);
        }
        b = a;
        for (int i = 0;i < n;i++){
            b[i] = BigInteger.ZERO;
        }
        if (a == b){
            for (int i = 0;i < n;i++){
                System.out.println(a[i]);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:52:45.583

它仅用于声明... 例如：类型 a[], b 这里只有 a 是数组，当您声明像 type[] a,b 两者都是数组... 同样对于所有类型... type[] a,b [] 这里 b 是二维数组...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:52:46.380

正如@Hovercraft Full Of Eels 所提到的，它们都是等价的。

T a[] 和 T[] a 是相同的。

Java 从使用 T a[] 表示法的 C 派生其语法。然而，使用不会拆分类型信息的 T[] a 更“正确”。这在使用具有类型推断的语言（Scala、C# 和可能的 Java 8）时特别明显。在这种情况下，你会使用类似的东西

```
var a = <some expression which returns a T[]> 
```

# java - Java Jersey 使用 GET 来返回 JSON，它只返回一些字段而不是全部

> ID：15983563
> 
> 赞同：3
> 
> 时间：2013-04-13T02:27:33.263
> 
> 标签：java, json, get, jersey, jackson

是否有人知道使用 Jersey 的 GET 方法返回仅返回实体的某些字段而不是全部字段的 JSON 的方法？有谁知道使用 Jersey 的 GET 方法返回只返回实体的某些字段而不是全部的 JSON 的方法？例如，在下面的课程中，我想接收（使用 POST）'name' 和 'confidential' 的值，返回时购买（使用 GET）我只需要 'name' 值，而不是 'confidential'。

```
@Entity
@Table(name = "a")
@XmlRootElement
@JsonIgnoreProperties({"confifentialInfo"})
public class A extends B implements Serializable {
    private String name;
    @Basic(optional = false)
    private String confifentialInfo;
    // more fields, getters and setters
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:19:57.200

如果您使用的是 Jackson，则可以使用注解[@JsonIgnore](http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)进行方法

> 类似于 javax.xml.bind.annotation.XmlTransient 的标记注解，指示被注解的方法将被基于自省的序列化和反序列化功能忽略。也就是说，它不应被视为“getter”、“setter”或“creator”。

和[@JsonIgnoreProperties](http://jackson.codehaus.org/1.4.0/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html)用于属性

> 可用于抑制属性序列化（序列化期间）或忽略 JSON 属性读取处理（反序列化期间）的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:39:23.380

如果您使用的是[JAXB](http://jersey.java.net/nonav/documentation/latest/json.html#json.jaxb.approach.section)方法，您可以标记字段`@XmlTransient`以省略它们。如果您使用 POJO 映射或只想为某些请求排除字段，则应使用[低级 JSON API](http://jersey.java.net/nonav/documentation/latest/json.html#json.low.level.approach.section)构造 JSON 。

# php - 访问 JSON 对象属性

> ID：15983572
> 
> 赞同：1
> 
> 时间：2013-04-13T02:28:58.600
> 
> 标签：php, javascript, ajax, json

这些是我的 JSON 对象。

```
({
"0":"http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F86040788&amp",
"1":"http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F87126537&amp",
"2":"http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F84915833&amp",
"3":"http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F87317484&amp",
"4":"http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F86548283&amp"
}) 
```

我使用 Ajax 获取它们，这就是我获取它们的方式：

`data[0]`到`data[4]`.

为什么`data.1`等不工作？我不明白为什么我可以访问这样的对象`data[0]`，因为它们不是数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:35:06.643

> 为什么 data.1 等不起作用？

那是因为`data.1`根据 Javascript 的语法是无效的语法。打开浏览器控制台并尝试：

```
var obj = {};
obj[0] = "test";
obj.0; //SyntaxError: Unexpected number 
```

* * *

> 我不明白为什么我可以访问像这个数据 [0] 这样的对象，因为它们不是数组。

In javascript, arrays and map/dictionary/association array are the same thing. You can access by either `object[key]` syntax or `object.key` syntax. Only restriction is that it should be parseable by the parser (it should be an identifier), otherwise it would fail -- like the case you have. Another example:

```
var obj = {"test-data":1, "test": 2};
obj["test"]           // 2
obj.test              // 2
obj["test-data"];     // 1
obj.test-data         //ReferenceError: data is not defined
      //^ is a <MINUS> character, parsed as (obj.test - data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:31:01.823

[使用对象：对象和属性](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Objects_and_properties)

> 对象属性名称可以是任何有效的 JavaScript 字符串，也可以是可以转换为字符串的任何内容，包括空字符串。**但是，任何不是有效 JavaScript 标识符的属性名称（例如，具有空格或破折号或以数字开头的属性名称）只能使用方括号表示法访问。**当要动态确定属性名称时（当直到运行时才确定属性名称时），此表示法也非常有用。示例如下：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:19:04.963

因为 json var name 不能从数字开始

# javascript - JavaScript 代码解释: (e && e.target) || (window.event && window.event.srcElement)

> ID：15983575
> 
> 赞同：0
> 
> 时间：2013-04-13T02:29:12.473
> 
> 标签：javascript, html, object, nodes

我制作了一个简单 HTML 页面的 JavaScript 选项卡视图。我已经通过节点使用 JavaScript 为标题标签添加了 onClick 函数。onClick 函数执行一个名为**showTab的函数，将****this**作为参数传递。我知道**这**是**[object window]**。

标题标签onClick函数设置如下图：

```
node.onclick = function() { showTab(this); }; 
```

showTab 函数如下：

```
function showTab(e) 
{ 
    var node = (e && e.target) || (window.event && window.event.srcElement); 
    alert(node.innerHTML); 
} 
```

一切正常，当我单击其中一个标题时，会出现一条带有其 innerHTML 的警报。

但是，我确实使用了谷歌的一些帮助来实现这一点。我想要一些帮助来理解这条线的确切含义：

```
var node = (e && e.target) || (window.event && window.event.srcElement); 
```

我做了自己的研究，发现它可以被认为是 C# 中的发送者。

但我想彻底了解它是如何工作的，它指的是什么，以及它如何知道哪个节点正在调用 showTab 函数，因为有 3 个标题标签执行相同的功能，都没有 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:11:14.287

啊，处理事件和浏览器的乐趣。

Trident 引擎（Internet explorer 和其他基于该引擎的引擎）处理事件的方式与大多数（全部？）其他浏览器不同。

```
<html>
<head>
    <title>Test</title>
</head>

<body>
    <button id="test_button">Click me</button>

<script>
// UGLY, UGLY, UGLY... don't really use this
var button = document.getElementById("test_button");
if (window.attachEvent) {
    button.attachEvent("onclick", showTab);
} else {
    button.addEventListener("click", showTab);
}

function showTab(e) 
{

    // Most browsers pass the event as 'e'
    // Microsoft puts the event in window.event
    // Either way, event will now point to the object we want.
    var event = e || window.event;

    // Once again, the different browsers handle the `target` property differently.
    // Target should now point to the right event.
    var target = event.target || event.srcElement;

    alert(target.innerHTML); 
}
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:14:54.467

这一行：

```
var node = (e && e.target) || (window.event && window.event.srcElement); 
```

相当于这个逻辑：

```
var node;
if (e && e.target) {
    node = e.target;
} else if (window.event && window.event.srcElement) {
    node = window.event.srcElement;
} else {
    node = undefined;
} 
```

这段代码的目的是处理旧版本的 IE 不将事件结构传递给事件处理程序的事实。相反，它存储在全局变量中`window.event`，并且事件目标也存储在事件的差异属性中。

做这样的事情更常见（我认为更具可读性）：

```
function showTab(e) { 
    // get the event data structure into e
    e = e || window.event;

    // get the source of the event
    var node = e.target || e.srcElement;
    alert(node.innerHTML); 
} 
```

实际上，任何体面的项目都应该使用库函数来抽象事件处理程序中的差异，这样特定于浏览器的代码只需要在项目中的一个位置，或者使用像 jQuery 这样的预构建库来处理这类事情。这是一个跨浏览器事件处理程序：

```
// refined add event cross browser
function addEvent(elem, event, fn) {
    if (typeof elem === "string") {
        elem = document.getElementById(elem);
    }

    function listenHandler(e) {
        var ret = fn.apply(this, arguments);
        if (ret === false) {
            e.stopPropagation();
            e.preventDefault();
        }
        return(ret);
    }

    function attachHandler() {
        // older versions of IE
        // set the this pointer same as addEventListener when fn is called
        // make sure the event is passed to the fn also so that works the same too
        // normalize the target of the event
        window.event.target = window.event.srcElement;
        var ret = fn.call(elem, window.event);   
        if (ret === false) {
            window.event.returnValue = false;
            window.event.cancelBubble = true;
        }
        return(ret);
    }

    if (elem.addEventListener) {
        elem.addEventListener(event, listenHandler, false);
    } else {
        elem.attachEvent("on" + event, attachHandler);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T02:38:14.020

它正在获取被点击的 dom 元素，要么是 e.target 用于标准兼容的浏览器，要么是 window.event.srcElement（对于较新的 IE，可能是 e.srcElement 而不是）

见：[http ://www.quirksmode.org/js/events_properties.html](http://www.quirksmode.org/js/events_properties.html)

# r - c++ 函数中的变量范围通过 R 和 sourceCpp 调用

> ID：15983580
> 
> 赞同：2
> 
> 时间：2013-04-13T02:31:18.313
> 
> 标签：r, scope, rcpp

我在 R 中有一个嵌套在另一个函数中的函数。由于更深的函数有点慢，我决定使用 sourceCpp 来交换一些已编译的代码。但是，该内部函数使用外部函数中定义的变量。在 RI 使用环境中。什么是 C++ 类比？我必须使用 extern 关键字吗？像这样的东西会起作用吗？

```
#include <Rcpp.h>

using namespace Rcpp;

// [[Rcpp::export]]
arma::mat myFunc(arma::mat a, arma::mat b){
  extern arma::mat c;
  return a + b + c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:13:04.467

您可以通过 Rcpp 将 R 环境向下传递给 C++；并且示例存在于文档、此处和其他地方。然而，只是随机地在那里扔一个 C++ `extern`，确实可以访问一个环境。

# javascript - if then 语句允许我根据 a、b 或 c，选择第 4 个选项的价格

> ID：15983583
> 
> 赞同：0
> 
> 时间：2013-04-13T02:32:22.207
> 
> 标签：javascript

```
<input type="checkbox" name="KingBed" id="KingBed" />
<input type="checkbox" name="queenbed" id="queenbed" />
<input type="checkbox" name="FullBed" id="FullBed" />
<input type="checkbox" name="headboard" id="headboard" />

check = document.getElementById("headboard").checked;
if(check) { maxTotal += 25 /*PRICE*/; minTotal += 17/*PRICE*/; } 
```

I am looking for an if then statement that if bed1 is chosen, then when headboard is chosen, it will issue one set of prices, but if queenbed, and so forth is chosen, it will list another price.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:52:36.210

我认为你应该采取不同的方向：

```
<div>
    <h1>Buy a new bed now!</h1>
    <p>
        <label for="size">Size</label><br />
        <select id="size">
            <option value="twin">Twin</option>
            <option value="full">Full</option>
            <option value="queen">Queen</option>
            <option value="king">King</option>
        </select>
    </p>
    <p>
        <label for="headBoard">Head Board</label><br />
        <select id="headBoard">
            <option value="none">None</option>
            <option value="modelA">Model A</option>
            <option value="modelB">Model B</option>
            <option value="modelC">Model C</option>
        </select>
    </p>
    <p>
        <input type="button" onclick="buy()" value="Buy!" />
    </p>
</div> 
```

然后包含以下 JavaScript

```
var pricing = {
    size: {
        twin: 100,
        full: 200,
        queen: 300,
        king: 400
    },
    headBoard: {
        none: 0,
        modelA: 100,
        modelB: 200,
        modelC: 300
    }
};

function buy() {
    var sizeSelection = document.getElementById("size").value,
        headBoardSelection = document.getElementById("headBoard").value,
        sizePrice = pricing.size[sizeSelection],
        headBoardPrice = pricing.headBoard[headBoardSelection],
        grandTotal = sizePrice + headBoardPrice;
    alert("Grand Total: $" + grandTotal.toFixed(2));
} 
```

# android - Blobstore createUploadUrl() 将不可验证的 URL 返回到 Android

> ID：15983584
> 
> 赞同：2
> 
> 时间：2013-04-13T02:32:52.910
> 
> 标签：android, google-app-engine, blobstore, google-cloud-endpoints

升级 SDK 并重新生成端点后，我的 App Engine 实例突然变得有趣起来。createUploadUrl() 返回格式为 URL

**https://[版本].my-app.appspot.com**

它在文档中提到了这一点

> 请注意，2013 年 4 月，Google 将停止为在 appspot.com 上托管的双通配符域（即.appspot.com）颁发 SSL 证书*。*如果您依赖此类 URL 对您的应用程序进行 HTTPS 访问，请更改任何应用程序逻辑以使用“-dot-”而不是“.”。例如，要访问应用程序“myapp”的版本“1”，请使用“ `https://1-dot-myapp.appspot.com`”而不是“ `https://1.myapp.appspot.com`.”。如果您继续使用“ `https://1.myapp.appspot.com`”，则证书将不匹配，这将导致任何期望 URL 和证书完全匹配的 User-Agent 出错。

我需要改变什么吗？我认为这种变化会自动发生。

我尝试在代码中更改 URL，这会导致它 POST 但上传处理程序 Servlet 永远不会被调用。如果我尝试在不进行更改的情况下对其进行 POST，则 Android 会引发 Hostname was not verifyed 错误。

# html - 链接到不断变化的链接

> ID：15983586
> 
> 赞同：0
> 
> 时间：2013-04-13T02:33:35.283
> 
> 标签：html

有没有办法链接到链接每周更改的页面？

例子：

*   site.com/4-1-13_page

*   site.com/4-8-13_page

*   site.com/4-15-13_page

*   site.com/4-22-13_page

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:36:14.533

如果您使用的是 PHP 等服务器端语言，则可以[根据当前日期生成链接](http://php.net/manual/en/function.date.php)。例如：

```
$day = intval(date('j'));
// Normalize to the start of a week
if ($day % 7 > 0) {
    $day -= (%day % 7);
}
$month = date('n');
$year = date('y');
$link = "site.com/" . $day . "-" . $month . "-" . $year . "_page"; 
```

如果您提供静态页面，您可以使用 Javascript 执行相同的操作，但这取决于用户系统时钟是否准确。一个简单的实现：

```
var date = new Date();
var day = date.getDate() - date.getDay(); // getDay() returns an
                                          //   integer in the range 0-6
var month = date.getMonth() + 1; // getMonth() returns in range 0-11
var year = date.getFullYear().toString().slice(2); // getFullYear() returns 
                                                   //   a 4-digit year
var link = "site.com/" + day + "-" + month + "-" + year + "_page"; 
```

在调整此代码时，您很可能需要解决一些极端情况，但这应该足以让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:41:09.137

如果使用 PHP：

```
<?php
    $startingDate = strtotime('2013-04-01');
    echo '<a href="site.com/' . date('n-j-y', $startingDate) . '_page">Link text</a>';
?> 
```

如果使用 JavaScript：

```
var startingDate = new Date(2013, 4, 1);
var day = startingDate.getDate();
var month = startingDate.getMonth() + 1;
var year = startingDate.getFullYear().toString().substr(2, 2);
document.write('<a href="site.com/' + month + '-' + day + '-' + year + '_page">Link text</a>'); 
```

# python - 模板 django-simple-captcha？图像和输入字段之间的换行符

> ID：15983590
> 
> 赞同：1
> 
> 时间：2013-04-13T02:34:00.627
> 
> 标签：python, django, web

我有 django-simple-captcha 工作，但我很好奇如何在模板中指定图像出现的位置。现在我有。

```
<div class="fieldWrapper">
    <label for="id_captcha">Captcha:</label><br>
    {{ form.captcha }}{{ form.captcha.errors }}
</div> 
```

这会导致验证码图像和表单彼此相邻，但我想要的是让它们用`<br>`标签分隔。我知道我可以通过修改我的 python 路径中的 django-simple-captcha 源来做到这一点，但我想要一种更简单的方法来做到这一点，以防万一我在我的任何其他项目中使用它。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T09:46:05.907

解决它的一种方法是修改您的设置并编写：

```
CAPTCHA_OUTPUT_FORMAT = u'%(hidden_field)s%(text_field)s<br>%(image)s' 
```

您还可以更改字段输出的顺序。

# java - 递归回溯的问题

> ID：15983591
> 
> 赞同：0
> 
> 时间：2013-04-13T02:34:40.113
> 
> 标签：java, algorithm, sudoku

我正在尝试在 Java 中实现回溯算法，以解决数独问题。

我 95% 确定问题出在解决方法中，但我包括了两种辅助方法以防万一。

我正在做的一些奇怪的事情只是由于要求/方便，比如拼图的硬编码初始值。我确定问题出在我的解决方法的底部附近，但我无法弄清楚......

我目前的问题是：在处理第一行并找到可能有效的值排列之后，我的程序就放弃了。如果我取消注释打印“ROW IS DONE”的行，它将在一行之后打印，并且不再给出输出。为什么在第一排之后就放弃了？关于我的实施还有什么我应该担心的吗

编辑：我做了很多改变。它越来越近了。如果我在 EXHAUST 为真时打印，我会得到一个拼图，除了最后一行之外，每一行都已解决。看起来它在解决/几乎解决它之后正在撤消所有内容。我感觉它可能已经到了完全解决难题的地步，但我没有在正确的时间传回 TRUE……我现在做错了什么？

```
import java.util.ArrayList;

class Model
{
    ArrayList<View> views = new ArrayList<View>();
    int[][] grid = 
            {
              {5,3,0,0,7,0,0,0,0},
              {6,0,0,1,9,5,0,0,0},
              {0,9,8,0,0,0,0,6,0},
              {8,0,0,0,6,0,0,0,3},
              {4,0,0,8,0,3,0,0,1},
              {7,0,0,0,2,0,0,0,6},
              {0,6,0,0,0,0,2,8,0},
              {0,0,0,4,1,9,0,0,5},
              {0,0,0,0,8,0,0,7,9}
            };

    /**
     * Method solve
     * 
     * Uses a backtracking algorithm to solve the puzzle.
     */
    public boolean solve(int row, int col) //mutator
    {   
        if(exhaust(row,col)) {printGrid(); return true;}
        int rownext = row;
        int colnext = col+1;
        if(colnext>8)
        {
            colnext = 0;
            rownext++;
        }           
        if(grid[row][col] != 0) solve(rownext,colnext);
        else //is == 0
        {
            for(int num = 1; num <= 9; num++)
            {   
                if(!conflict(row,col,num)) //try a non-conflicting number   
                {
                    grid[row][col] = num;
                    if(solve(rownext,colnext)) return true;                     
                    grid[row][col] = 0;
                }
            }
        }
        return false;       

    }
    /**
     * Method exhaust
     * 
     * Iteratively searches the rest of the puzzle for empty space
     * using the parameters as the starting point.
     *
     * @return true if no 0's are found
     * @return false if a 0 is found
     */
    public boolean exhaust(int row, int col)
    {
        for(int i = row; i <= 8; i++)
        {
            for(int j = col; j <= 8; j++)
            {
                if(grid[i][j] == 0) return false;
            }
        }
        System.out.printf("Exhausted.\n");
        return true;
    }

    /**
     * Method conflict
     * 
     * Checks if the choice in question is valid by looking to see
     * if the choice has already been made in the same row or col,
     * or block. 
     *
     * @return true if there IS a conflict
     * @return false if there is NOT a conflict
     */
    public boolean conflict(int row, int col, int num)
    {
        for(int j = 0; j <= 8; j++)
        {
            if(grid[row][j] == num) {
                return true;
            }
        }   
        for(int i = 0; i <= 8; i++)
        {
            if(grid[i][col] == num) {
                return true;
            }
        }           

        int rowstart = 0;
        if(row>=3) rowstart = 3;
        if(row>=6) rowstart = 6;

        int colstart = 0;
        if(col>=3) colstart = 3;
        if(col>=6) colstart = 6;                    

        for(int r = rowstart; r <= (rowstart + 2); r++)
        {
            for(int c = colstart; c <= (colstart + 2); c++)
            {
                if(grid[r][c] == num) {
                    return true;
                }   
            }   
        }       
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:50:24.757

想象一下，您正在顺利地前进，一行一行地前进，并且没有后退。你的下一个职位是`solve(1,1);`。跟踪代码时请注意 rownext。你应该很快看到问题。如果您不回溯，rownext 应保持其值至少为 1。

# postgresql - 查询加入结果似乎不正确

> ID：15983592
> 
> 赞同：0
> 
> 时间：2013-04-13T02:34:50.113
> 
> 标签：postgresql, left-join

我不知道这里发生了什么。也许我已经盯着这段代码太久了。

我的查询如下：

```
CREATE VIEW v_sku_best_before AS
  SELECT
    sw.sku_id,
    sw.sku_warehouse_id  "A",
    sbb.sku_warehouse_id "B",
    sbb.best_before,
    sbb.quantity
  FROM SKU_WAREHOUSE sw
    LEFT OUTER JOIN SKU_BEST_BEFORE sbb
      ON sbb.sku_warehouse_id = sw.warehouse_id
  ORDER BY sbb.best_before 
```

如果有帮助，我可以发布表定义，但我不确定它会不会。可以说这`SKU_WAREHOUSE.sku_warehouse_id`是一个身份列，并且`SKU_BEST_BEFORE.sku_warehouse_id`是使用该身份作为外键的子项。

这是我运行查询时的结果：

```
+--------+-----+----+-------------+----------+
| sku_id |  A  | B  | best_before | quantity |
+--------+-----+----+-------------+----------+
|  20251 | 643 | 11 | <<null>>    |      140 |
+--------+-----+----+-------------+----------+
(1 row) 
```

连接指定`sku_warehouse_id`列必须相等，但是当我从每个表中提取 ID（标记为`A`and `B`）时，它们是不同的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:36:52.523

也许只是`sw.sku_warehouse_id`代替`sw.warehouse_id`？

# javascript - Javascript结果与css不一样

> ID：15983597
> 
> 赞同：0
> 
> 时间：2013-04-13T02:35:19.047
> 
> 标签：javascript, css

这段代码按我的预期完美运行，但问题是当我刷新页面时 t_con 保持绝对值，这应该是固定的，当我将窗口大小调整为小于 980 像素时，它就像我需要的那样，如果我再次调整大小超过 980 像素它修复了。

我需要它从一开始就保持固定。我不知道为什么一开始它是绝对的。

代码

```
<div id="t_con">
    <div id="t">

    </div>
</div> 
```

CSS 代码

```
#t_con {
    width: 100%;
    position: absolute;
    top: 0;
}
#t {
    margin: 0px auto 0 auto;
    background-color: #976398;
    width: 980px;
    height: 30px;
} 
```

Javascript代码

```
window.onresize = function(){
    var header = document.getElementById('t');
    var window_width = document.body.offsetWidth;
    if(window_width < 980) {
        header.style.position = "absolute";
    } else {
        header.style.position = "fixed";
    }
} 
```

谁能告诉我在这里做错了什么？我不想为此使用 jQuery。所以请不要建议。我不喜欢 jQuery 的原因是它已经占用了 90kb 加上我们试图执行的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:43:34.943

你设置`window.onresize`了两次，所以你的第一个函数永远不会被调用。

尝试：

```
window.onresize = function(){               
    document.getElementById('t_con').style.position = window.outerWidth < 980 ? 'absolute' : 'fixed';
    document.getElementById('t').style.position = document.body.offsetWidth < 980 ? 'absolute' : 'fixed';
} 
```

# android - 在android中单击时将ProgressBar设置为VISIBLE

> ID：15983601
> 
> 赞同：0
> 
> 时间：2013-04-13T02:36:10.387
> 
> 标签：android, xml

当单击登录按钮时，我试图让我的 ProgressBar 变为可见。这是我的活动 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/txtView_UserName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:hint="@string/login_username_hint">

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/txtView_Password"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtView_UserName"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:hint="@string/login_password_hint"
    android:inputType="textPassword" />

<Button
    android:id="@+id/button_LogIn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/txtView_UserName"
    android:layout_below="@+id/txtView_Password"
    android:layout_marginTop="10dp"
    android:onClick="logIn"
    android:text="@string/login_button" />

<CheckBox
    android:id="@+id/checkbox_RememberPassword"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/txtView_Password"
    android:layout_below="@+id/button_Login"
    android:layout_marginTop="15dp"
    android:text="@string/remember_my_password" />

<CheckBox
    android:id="@+id/checkbox_LogMeInAutomatically"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkbox_RememberPassword"
    android:layout_below="@+id/checkbox_RememberPassword"
    android:layout_marginTop="-5dp"
    android:text="@string/log_me_in_automatically" />

<ProgressBar
    android:id="@+id/progressBar_LogIn"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/checkbox_LogMeInAutomatically"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="30dp"
    android:visibility="invisible" />

<TextView
    android:id="@+id/txtView_Version"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="18dp"
    android:text="@string/version_number" />

</RelativeLayout> 
```

这是我试图在代码中将其更改为 VISIBLE 的地方。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ProgressBar;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

//Get Views and Buttons
 EditText txt_Username = (EditText) findViewById(R.id.txtView_UserName);
 EditText txt_Password = (EditText) findViewById(R.id.txtView_Password);
 Button btn_LogIn = (Button) findViewById(R.id.button_LogIn);
 CheckBox chkbox_RememberMyPassword = (CheckBox) findViewById(R.id.checkbox_RememberPassword);
 CheckBox chkbox_LogMeInAutomatically = (CheckBox) findViewById(R.id.checkbox_LogMeInAutomatically);
 ProgressBar progressbar_LogIn = (ProgressBar) findViewById(R.id.progressBar_LogIn);    

public void logIn() {
    progressbar_LogIn.setVisibility(0);
}

} 
```

该程序在没有呈现我的 Activity 视图的情况下崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:38:18.857

我有一种感觉，因为您有一个用于登录的 onClick，但登录不采用视图参数。尝试以编程方式设置按钮的 onclick，而不是使用 xml。

编辑：尝试改变

```
public void logIn() {
progressbar_LogIn.setVisibility(0); 
```

}

至

```
public void logIn(View v) {
progressbar_LogIn.setVisibility(0); 
```

}

或以编程方式设置它

```
btn_LogIn.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            //CODE GOES HERE
        }
    }); 
```

进一步编辑：

还注意到没有 onCreateView 的迹象，因此请确保所有视图代码都在 onCreate 之内，或者至少在 onCreate 之内：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
} 
```

# assembly - ATMega 48P 为两个带 FPWM 定时器的直流电机供电，组装时不是 C

> ID：15983603
> 
> 赞同：0
> 
> 时间：2013-04-13T02:36:17.713
> 
> 标签：assembly, avr, atmega

所以我正在尝试完成我的实验室任务，并通过将我的引脚设置为脉冲来不断遇到这个问题。我想在 PWM 模式下使用两个定时器来生成正弦波来驱动我的电机。我需要让计时器一次闪烁一个端口'（OCR * A）'，然后在另一个'（OCR * B）'再次闪烁并将计数器重置为零。

我不太在意端口上的哪个引脚闪烁，只要我可以控制 OCR*A 和 OCR*B 之间的差异，例如，我可以在一个中获得 70% 的功率，在另一个中获得 30% 的功率。我想要两个定时器，所以我有独立的电机控制，但如果我可以用一个定时器来做也可以，只要电机可以设置为不同的占空比。

最后一个问题，我所有的代码都必须是汇编代码。我不希望你为我编写代码，但我一遍又一遍地阅读我的手册，并且对我如何将计时器设置错误感到困惑。

这是我到目前为止的代码。我的代码编写方式我认为它应该闪烁 OCR2A 和 OCR0A 但我不确定。请让我知道并再次感谢您。

```
 .INCLUDE <m48Pdef.inc>; Include in program 

    .CSEG; Start code segment. 

    .ORG 0x0000

RJMP MAIN

    MAIN:
LDI R16, LOW(RAMEND)
OUT SPL, R16
LDI R16, HIGH(RAMEND)
OUT SPH, R16

SBI DDRD, 3     ; set correct pins to read and write
SBI DDRD, 2
SBI DDRD, 1
SBI DDRD, 0
SBI DDRB, 3     ; set correct pins to read and write
SBI DDRB, 2
SBI DDRB, 1
SBI DDRB, 0

CLR R16
CLR R17
CLI ;clear global interrupts

LDI R16, 0b01000011 
STS 0xB0, R16
LDI R16, 0b00001011 
STS 0xB1, R16

CLI

LDI R17, 0b01000011 
STS 0x44, R17
LDI R17, 0b00001011 
STS 0x45, R17

LDI R19, 7
LDI R18, 3

SEI

    LOOP:

RCALL DelayA
STS OCR2A, R18
STS OCR0A, R18
STS OCR2B, R19
STS OCR0B, R19
LDI R20, 0xFF
LDI R22, 0x00
LDI R23, 0x00
RCALL DelayA
RJMP LOOP       ;repeats loop to keep the output going

    DelayA:
CP r20, r22 ;standard double nested delay loop
BREQ RELOOP
NOP
NOP
NOP
Dec r20
ldi r21, 0xFF
RJMP DelayB

    DelayB:
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
CP r21, r22
BREQ DelayA
Dec r21
RJMP DelayB

    RELOOP:
RET 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:17:12.823

我不是 ARV 组装方面的专家，但以下是我看到的问题：

*   您正在`STS`尝试将数据加载到定时器寄存器中，但您需要使用的是`OUT`指令。`STS`是“直接存储到 SRAM”：定时器控制寄存器是......好吧......寄存器，并通过`out`指令加载。`TIMER1`数据表第 114 页上有一个装配示例。
*   在设置 reneral 用途寄存器中的位并将它们加载到定时器控制寄存器之前，您可能希望确保寄存器中不包含任何内容。例如，使用该`LDI`指令。可能有更好的方法将寄存器归零，所以谷歌（就像我说的，我在 AVR 汇编中没有太多编程）
*   一般来说，请阅读数据表：我在您所做的事情中没有看到任何 PWM 设置说明。

要让 PWM 在 AVR 上工作，您需要担心的寄存器是：

*   加载`TCCR_A`设置要连接到定时器的引脚的位。例如，`COM0A_`位允许`OC0A`自动对引脚进行 PWM，而`COM0B_`位允许对引脚`OC0B`进行 PWM（数据表第 104-105 页）。
*   两者`TCCR_A`和都`TCCR_B`必须`WGM__`正确设置位以指定波形生成模式。您很可能需要一种快速 PWM 模式。
*   `TCCR_B`还通过预分频器`CS__`位指定 PWM 的频率。频率将是 CPU 时钟速度除以某个因子（预分频器值为 1 为最快）。有关 TIMER0，请参见数据表第 108 页。
*   最后`OCR_A`和寄存器分别设置和引脚`OCR_B`的占空比。在非反相 PWM 模式下，相应的引脚设置为 BOTTOM，然后在（定时器计数器）达到/中的值时清零。因此，如果您在定时器 0 上进行快速 PWM 并在非反相模式下连接到定时器输出（位已设置，位已清零），则 in的值将为您提供 25% 的引脚占空比（如果您的定时器预分频器位大于（0=定时器停止）且小于（位指定外部时钟源）。`OC_A``OC_B``TCNT``OC_A``OC_B``OC0A``COM0A1``COM0A0``TCCR0A``0x3F``OCR01``OC0A``0``0x06``0x06``0x07``CS0_`
*   您不需要中断或溢出。假设您正确设置了上述寄存器，ATmega 将为您进行 PWM。

# java - 为什么不使用这种更简单的 Java 图形实现？

> ID：15983605
> 
> 赞同：1
> 
> 时间：2013-04-13T02:36:23.240
> 
> 标签：java, swing, graphics, awt

我一直在阅读 Java 图形，所有指南似乎都指向更复杂的图形在 Java 中的实现；阅读了一些关于 repaint() 的内容，我想出了这部分代码，这似乎适用于我测试过的那一点 -

```
import javax.swing.*;
import java.awt.*;

public class Boids extends JFrame{

     public Boids(){
        setSize(400,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);   
     }

     public static void main(String[] a){
        Boids boids = new Boids();
        while(true) {
            boids.repaint();
        }
     }

     public void paint(Graphics g){
        // The code for Boids
     }
} 
```

我的问题是；这段代码在某种程度上是坏的吗？它会在路上伤害我吗？如果没有，为什么不使用它，因为它看起来比我见过的其他版本的代码更简单、更短。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T02:38:57.223

*   您的评论表明您可能在该`paint(...)`方法中有程序逻辑，这是永远不应该做的事情，因为您无法完全控制何时或是否会调用它。
*   您编写的代码对动画循环没有时间控制。
*   您的代码可能会违反 Swing 线程规则。
*   您是直接在 JFrame 中绘图，这也应该尽量避免，因为这有可能会混淆 JFrame 的许多职责。而是在 JComponent 或 JPanel 的 paintComponent 方法中绘制。

我不记得这是谁说的，也许是 HL Menken，但它有点像，“对于每一个复杂的问题，都有一个清晰、简单和错误的解决方案。”

# opengl - OpenGL纹理倾斜

> ID：15983607
> 
> 赞同：7
> 
> 时间：2013-04-13T02:36:42.863
> 
> 标签：opengl, textures

当我在 OpenGL 中加载纹理并且`GL_ALPHA`每个像素有一个 ( ) 或三个分量 ( `GL_RGB`) 时，纹理看起来是倾斜的。是什么导致这种情况发生？

作为附加细节，关系宽度/高度似乎会影响。例如，1366x768(683/384) 的图像出现倾斜，而 1920x1080(16/9) 的图像被正确映射。

![倾斜图像](https://i.stack.imgur.com/78DuF.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T05:37:57.603

这可能是填充/对齐问题。

默认情况下，GL 期望将像素行填充为 4 字节的倍数。具有 1 字节或 3 字节宽像素的 1366 宽纹理自然不会是 4 字节对齐的。

可能的解决方法是：

*   告诉 GL 你的纹理是如何打包的，使用（例如）`glPixelStorei(GL_UNPACK_ALIGNMENT, 1);`
*   更改纹理的尺寸，以便填充匹配而不更改任何内容
*   更改纹理的加载，使填充与 GL 期望的一致

# google-app-engine - Google App Engine 比特币挖矿

> ID：15983609
> 
> 赞同：-1
> 
> 时间：2013-04-13T02:37:42.573
> 
> 标签：google-app-engine, bitcoin

[https://bitcointalk.org/index.php?topic=2745.0](https://bitcointalk.org/index.php?topic=2745.0)

我看到了这个，它是一个死线程。我正在尝试实现这一点，但 eclipse 有问题。

```
The App Engine SDK JAR appengine-endpoints.jar is missing in the WEB-INF/lib directory  lib /gaeminer-master/war/WEB-INF    Unknown Google App Engine Problem    
The App Engine SDK JAR appengine-jsr107cache-1.7.7.jar is missing in the WEB-INF/lib directory  lib /gaeminer-master/war/WEB-INF    Unknown Google App Engine Problem    
The App Engine SDK JAR appengine-api-labs.jar is missing in the WEB-INF/lib directory   lib /gaeminer-master/war/WEB-INF    Unknown Google App Engine Problem    
The App Engine SDK JAR appengine-api-1.0-sdk-1.7.7.jar is missing in the WEB-INF/lib directory  lib /gaeminer-master/war/WEB-INF    Unknown Google App Engine Problem    
The App Engine SDK JAR datanucleus-appengine-1.0.10.final.jar is missing in the WEB-INF/lib directory   lib /gaeminer-master/war/WEB-INF    Unknown Google App Engine Problem 
```

我该如何解决？

为了这个项目，我花了几个小时把头撞到桌子上。顺便说一句，是的，我知道 CPU 挖矿赚不了多少钱，我只是想看看这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:34:48.123

我遇到了类似的问题，并在错误（标记选项卡）上按右键解决了它-> 快速修复-> 将 lib 与 JDK 库同步。试试看，告诉我它是否对你有帮助 =)

# php - 您甚至不再需要数据库安全性了吗？

> ID：15983616
> 
> 赞同：4
> 
> 时间：2013-04-13T02:38:21.987
> 
> 标签：php, mysql, pdo

这是一个针对 PDO 准备语句的安全问题。使用 PDO 我知道 sql 注入的风险几乎是不可能的，并且该类会为您处理所有这些。使用它们 mysql_* 堆栈后，我总觉得好像我没有很好地处理安全问题。我通常习惯于编写数百行代码来处理安全问题，而现在我实际上只是在编写查询。

除了数据库中字符串的长度之外，我必须担心 PDO 语句是否真的存在任何安全威胁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:18:12.683

**肯定是的。**

事实上，原生准备语句仅适用于简单的教科书案例。
意味着您仍然需要为任何复杂的情况编写一些“数百行”。我在[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中对此类案例做了一个小摘要。主要缺点是

*   没有标识符的占位符。您必须像在旧的良好 mysql_* 代码中一样手动格式化和注入它们。
*   *没有数组*的占位符。意味着您仍然必须手动编写一些代码，然后将其注入查询中 - 因此，仍有可能陷入一些麻烦。

因此，即使在 PDO 上，您也需要更高级别的抽象。一个常见的解决方案是使用每个现代框架都提供的某种*查询构建器。*

但我个人讨厌查询构建器，因为它们在我看来过于臃肿，假装替换整个 SQL 但显然失败了。所以，当我可以使用纯 SQL 时，我不明白为什么要使用用 PHP 编写的 SQL。为此，我创建了一个抽象库，以纠正本机准备语句的所有缺点[safeMysql](https://github.com/colshrapnel/safemysql#safemysql)。它为您需要的所有内容提供占位符，因此使查询比 PDO 更安全，但它使应用程序代码大大缩短。

使用 safeMysql 意味着您**确实**可以“直接写查询”：

```
$sql  = "SELECT * FROM articles WHERE id IN(?a) ORDER BY ?n LIMIT ?i"
$data = $db->getAll($sql, $ids,$_GET['order'], $limit);

$sql  = "INSERT INTO stats SET pid=?i,ip=inet_aton(?s),?u ON DUPLICATE KEY UPDATE ?u";
$db->query($sql, $pid, $ip, $data, $data); 
```

只需将这些 2 行代码与您需要使用原始 PDO 编写的代码量进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:21:47.843

我认为“sql 注入攻击”的答案非常接近肯定。 [mysqli 准备好的语句和 mysqli_real_escape_string](https://stackoverflow.com/questions/3101307/mysqli-prepared-statements-and-mysqli-real-escape-string)

还有许多其他类型的攻击，但至少您的所有值都被转义了。

依靠 PDO 来“修复”您的安全性就像依靠编译器来查找错误一样。

# arrays - 在屏幕上随机生成图像，我如何让它在一定数量后循环

> ID：15983617
> 
> 赞同：0
> 
> 时间：2013-04-13T02:38:26.487
> 
> 标签：arrays, random, timer, addchild

所以我正在创建一个项目，对于背景，我希望星星随机出现并从屏幕上消失。

我让星星随机出现，但它们只是停留在屏幕上，最终用星星填满整个屏幕。我希望它开始删除 1 颗星并在屏幕上有 100 颗星时添加另一颗星。甚至一开始屏幕上有 100 颗星，而计时器每次都会删除并添加 1 颗星。

所以我在舞台上随机添加 mystar，只需要删除 1 个，同时添加它们，这样它们就不会完全覆盖我的屏幕。

```
var myTimer:Timer = new Timer(2,0 );
var randNum = Math.round( 500 + Math.random() * 4000 );
myTimer.addEventListener(TimerEvent.TIMER, fasttimerListener);

function fasttimerListener (e:TimerEvent):void{

var timerObj:Timer = e.target as Timer;
randNum = Math.round( Math.random() * 100 );
timerObj.delay = randNum;

var mystar:smallstar = new smallstar();
mystar.x = Math.random() * stage.stageWidth;
mystar.y = Math.random() * stage.stageHeight;
addChild(mystar);

}

myTimer.start(); 
```

请帮忙，我想我可能不得不使用一个数组？但不擅长 as3。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:40:04.993

这是我在尝试解决您的问题后提出的代码，是的，我使用了 Array：

```
var myTimer:Timer = new Timer(2,0 );
var randNum = Math.round( 500 + Math.random() * 4000 );

var starsCount:int = 100; //stars number in stage  

var st:int=0; //star inde number in Array

//---------------------------------------------------------------
//creating an Array of 100 mc stars
//---------------------------------------------------------------
var starsArray:Array=[];  //Array of movieclips smallstar

//using for loop to create 100 stars and put them in Array
for(var star:int=0; star<starsCount; star++){ 
    var mystar:smallstar = new smallstar();

    //puts mc smallstar on Array
    starsArray.push(mystar);
}

myTimer.addEventListener(TimerEvent.TIMER, fasttimerListener);

function fasttimerListener (e:TimerEvent):void{

var timerObj:Timer = e.target as Timer;
randNum = Math.round( Math.random() * 100 );
timerObj.delay = randNum;

starsArray[st].x = Math.random() * stage.stageWidth;
starsArray[st].y = Math.random() * stage.stageHeight;
addChild(starsArray[st]);
st++; //changing star index on array

//doesnt let st to be bigger than Array length
if (st>=starsArray.length) st = 0; 
}

myTimer.start(); 
```

希望能帮助到你。

# jdbc - 如何使用自定义 JDBC 驱动程序运行 Sqoop？

> ID：15983618
> 
> 赞同：2
> 
> 时间：2013-04-13T02:38:46.530
> 
> 标签：jdbc, hadoop, oracle11g, hdfs, sqoop

如果我为 oracle Thin 提供 (--connect/--user/--password)，我可以在不提供 --driver 参数的情况下运行 Sqoop。

但是我需要使用我的项目中使用的自定义 JDBC 驱动程序（它正确实现 java.sql.Driver 接口）而不是 oracle.jdbc.OracleDriver 来运行它。

我无法通过简单地用`--driver`参数证明它来让它工作。[这个建议](http://sqoop.apache.org/docs/1.4.3/SqoopUserGuide.html#_oracle_ora_00933_error_sql_command_not_properly_ended)根本没有帮助。

**如何将 Sqoop 与自定义数据库访问驱动程序一起使用？** 如何克服我得到的错误？

**如果它与连接管理器有关，有人可以告诉我应该指定哪个连接管理器吗？**

谢谢！

这是我真正想做的事情：

```
./sqoop.sh import \
    --fs $HDFS --jt $JT \
    --connect <cutom-connection-string> --username username --password password \
    --table SYS.ALL_TABLES --split-by TABLE_NAME --target-dir /temp/try/110 --verbose \
    --driver xx.xx.xx.MyDriver 
```

我收到一个错误：

> 错误 manager.SqlManager：错误执行语句：java.sql.SQLException：ORA-00933：SQL 命令未正确结束

更多错误信息：

```
DEBUG tool.BaseSqoopTool: Enabled debug logging.
WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
DEBUG sqoop.ConnFactory: Loaded manager factory: com.cloudera.sqoop.manager.DefaultManagerFactory
WARN sqoop.ConnFactory: Parameter --driver is set to an explicit driver however appropriate connection manager is not being set (via --connection-manager). Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly which connection manager should be used next time.
INFO manager.SqlManager: Using default fetchSize of 1000
INFO tool.CodeGenTool: Beginning code generation
INFO xx.xx.xx.MyDriver: xx.xx.xx.MyDriver registered successfully.
DEBUG manager.SqlManager: No connection paramenters specified. Using regular API for making connection.
INFO xx.xx.xx.MyDriver: Returning database connection
DEBUG manager.SqlManager: Using fetchSize for next query: 1000
INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM SYS.ALL_TABLES AS t WHERE 1=0
ERROR manager.SqlManager: Error executing statement: java.sql.SQLException: ORA-00933: SQL command not properly ended

java.sql.SQLException: ORA-00933: SQL command not properly ended 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:40:56.013

您的自定义 JDBC 驱动程序使用正确。问题似乎出在正在使用的通用 jdbc 连接器中，并且似乎产生了无效查询。您可能还需要通过用您的自定义驱动程序替换驱动程序来分叉内置[Oracle 连接器。](https://github.com/apache/sqoop/blob/trunk/src/java/org/apache/sqoop/manager/OracleManager.java#L110)

雅尔切克

# javascript - 页面加载时谷歌语音搜索

> ID：15983619
> 
> 赞同：14
> 
> 时间：2013-04-13T02:38:50.223
> 
> 标签：javascript, jquery, html, speech-recognition

首先，我正在尝试创建一个我不希望永远工作的临时解决方案。如果你愿意，只是一个实验！

我有以下运行！我想要做的是在页面加载时启动语音搜索。任何想法让这个工作！注意：您需要 chrome 浏览器才能看到麦克风输入。

[http://jsfiddle.net/dirtyd77/99amf/](http://jsfiddle.net/dirtyd77/99amf/)

```
<html>
<head>
<style>

#mike {
font-size: 25px;
width: 25px;
height: 25px;
cursor:pointer;
border: none;
position: absolute;
margin-left: 5px;
outline: none;
background: transparent;
}
#txt {
height: 150px;
width: 150px;
}
</style>

<script>
var mike = document.getElementById('mike');
mike.onfocus = mike.blur;
mike.onwebkitspeechchange = function(e) {
console.log(e); // SpeechInputEvent
document.getElementById('txt').value = mike.value;  
};
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T16:56:57.320

不幸的是，这是不可能的。最重要的原因是它会[**侵犯隐私/安全隐患**](http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html#security)。用户必须***自愿***选择被记录（在这种情况下，通过鼠标单击）。如果可以模拟事件并且用户不知道他们正在被记录，则可能会产生严重的法律后果。希望这可以帮助！

* * *

***更新：***

这是来自有关以下内容的[文档](http://www.w3.org/2005/Incubator/htmlspeech/2010/10/google-api-draft.html#security)`Speech Input`：

> 为了最大限度地减少用户无意中让网页在他们不知情的情况下录制语音的可能性，如果网页失去了对另一个窗口或同一用户代理中另一个选项卡的输入焦点，实现必须中止活动的语音输入会话。

以下是同[一份文件](http://www.w3.org/2005/Incubator/htmlspeech/2010/10/google-api-draft.html#security)中的担忧：

> 1) 从安全角度来看，口述密码输入可能存在问题，但由用户决定是否要说出他们的密码。
> 
> 2) 语音输入可能被用于窃听用户。恶意网页可以使用诸如隐藏输入元素或以其他方式使用户相信它已停止录制语音而继续这样做的技巧。他们还可以潜在地设置输入元素的样式以显示为其他内容并诱使用户单击它们。可以在[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)中查看文件输入元素样式的示例。上述建议旨在降低此类攻击的风险。

另外，根据[html5rocks.com 的这篇文章](http://updates.html5rocks.com/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API)：

> 第一次使用语音识别时，Chrome 需要询问用户使用麦克风的权限，在这种情况下，只有在用户允许时才会触发 onstart。

考虑到这一点，如果不是几乎不可能的话，在未经用户同意的情况下实施事件将***非常困难***`onload`，因为 Google 已采取措施防止`malicious webpages`. 谷歌还阻止用户[模拟点击事件](https://code.google.com/p/html5rocks/issues/detail?id=594)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T17:14:00.190

在尝试了一堆东西和研究之后，我发现：

> 您不能以编程方式激活语音输入。这是为了防止滥用。 [https://code.google.com/p/html5rocks/issues/detail?id=594](https://code.google.com/p/html5rocks/issues/detail?id=594)

那是从谷歌。

想尽办法让 jFiddle 工作。使用了一堆 jquery 函数，尝试了目标来模拟点击，一些第三方的东西——看起来他们已经得到了很好的保护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:28:40.820

您是否尝试过这种方法：

[x-webkit-speech：onwebkitspeechchange 不保留值](https://stackoverflow.com/questions/10602736/x-webkit-speech-onwebkitspeechchange-not-resting-the-value)

如果您查看示例，他们完全通过

```
onwebkitspeechchange="webkitSpeechChange(this);" 
```

我想您需要将其添加到您的代码中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-07T23:36:30.723

您可以使用不需要单击按钮即可激活的 webkitSpeechRecognition。然后只需将您捕获的任何文本引导到输入中。

webkitSpeechRecognition 会提示用户授权站点使用麦克风，但只要该权限存在，它就可以在页面加载后立即开始监听用户输入。确保您的站点使用 HTTPS，以便浏览器只向用户请求一次权限并记住它。

您可能还想查看[annyang](https://www.talater.com/annyang/)，这是一个 JavaScript 库，可以让处理语音识别变得超级简单。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-13T03:24:11.783

首先想到的是使用 jQuery。这里有一点方法：

```
$(document).ready(function(){
  startMikeInput();
} 
```

当页面加载完成时，这将启动您的麦克风输入。您还需要在脚本标签中引用 jQuery。使用外部 js 文件也可能会有所帮助。

# java - 如何循环按钮？

> ID：15983623
> 
> 赞同：0
> 
> 时间：2013-04-13T02:39:08.567
> 
> 标签：java, android, arrays, for-loop, android-button

我正在尝试显示按钮。但是下面的代码不起作用。不幸的是，应用程序已停止。需要额外的代码吗？

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout layout = new LinearLayout(this);
    String[] values = { "GOogle", "Yahoo", "Twi" };
    Button[] b = new Button[values.length];
    for (int i = 1; i <= values.length; i++) {
        b[i].setText(values[i]);
        layout.addView(b[i]);
    }
    setContentView(layout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:42:42.320

`Button`在您尝试调用`setText`这将导致 NPE之前，您的数组元素不会被实例化。尝试这个

```
for (int i=0; i < b.length; i++) {
   b[i] = new Button(this); // create Button programmatically
} 
```

此外，在 Java 中，数组是从零开始的，请替换

```
for (int i = 1; i <= values.length; i++) { 
```

和

```
for (int i = 0; i < values.length; i++) { 
```

*编辑：*在这种情况下，您的`b`和`values` *恰好*是相同的长度，因此您可以将 2 个循环集成在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:25:00.577

LinearLayout 布局 = (LinearLayout) findViewById(R.id.liner);

```
 String[] values = { "GOogle", "Yahoo", "Twi" };

    for (int i = 0; i < values.length; i++) {
        Button button = new Button(this);
        button.setText(values[i]);
        layout.addView(button);
    } 
```

# android - 如何从Android调用蹩脚的可执行文件？

> ID：15983625
> 
> 赞同：0
> 
> 时间：2013-04-13T02:39:30.003
> 
> 标签：android, mp3, lame

我为 Windows 下载了 LAME。它有两个文件，一个是`lame_enc.dll`，另一个是`lame.exe`。

我想将 MP3 文件从 320kbs 转换为 128kbs。

在 Windows 中，我使用命令行：`C:\Lame\lame.exe --preset cbr 128 "320.mp3" "128.mp3"`- 效果很好。我的问题是如何`lame.exe`从我的 Android 项目中调用？我必须采取哪些步骤来实现这一目标？

谢谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:42:27.430

您不能只“从 Android 运行蹩脚的可执行文件”，因为 Android 不运行 Windows 的可执行文件。类比，如果不转换它们/使用模拟器/等，您将无法在 Windows 中运行 MacOS 应用程序。

我建议你在这份工作中使用不同于 LAME 的东西——我没有使用过任何这样的东西，所以我现在不能向你推荐任何东西。

**编辑**

看来你也可以轻松移植 LAME for Android - [Lame MP3 Encoder compile for Android](https://stackoverflow.com/questions/8632835/lame-mp3-encoder-compile-for-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:00:38.917

您不能在 Android 中调用 Windows 可执行文件，因为它们具有不同的架构。很容易理解，如果您没有任何转换或模拟软件，则无法在 Windows 上运行 apk 文件。

您可以使用 ffmpeg、lame 等扩展库来更改 mp3 文件的比特率。您可以访问此链接以在 Android 中构建共享库：

[http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI](http://developer.samsung.com/android/technical-docs/Porting-and-using-LAME-MP3-on-Android-with-JNI)

# .net - 使用 Viewbox、Canvas 和拖放项目调整大小

> ID：15983627
> 
> 赞同：1
> 
> 时间：2013-04-13T02:40:00.797
> 
> 标签：.net, wpf, wpf-controls, viewbox

我希望我的应用程序有一个`Canvas`覆盖背景`Image`。将包含可以通过拖放重新定位（设置、 ）的`Canvas`对象（`TextBlocks`等） 。`Top``Left`

应用程序需要有一些大小调整选项：`None`、`Fill`、`Uniform`。或者用户可以设置特定的维度。

当调整这些大小选项时`Canvas`，`Image`、 和所有子对象都需要重新调整大小，以便所有内容都能正确“缩放”。换句话说，除了背景`Image`缩放之外，拖放项目还需要正确重新定位。

我开始使用 Viewbox 作为“容器”控件，一切似乎都可以“缩放”，将 Stretch 属性设置为 None、Fill、Uniform 选项。

```
<Viewbox x:Name="Viewbox">
   <Grid>
      <Image x:Name="Image" Stretch="Fill" Source="Background.bmp" />
      <Canvas x:Name="Canvas" Background="Transparent">
         <TextBlock Text="Test1" Background="Gray" Canvas.Top="170" Canvas.Left="50" />
         <TextBlock Text="Test2" Background="Gray" Canvas.Top="225" Canvas.Left="80" />
         <TextBlock Text="Test3" Background="Gray" Canvas.Top="170" Canvas.Left="150" />
      </Canvas>
   </Grid>
</Viewbox>

private void StretchModeComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
   this.Viewbox.Stretch = (Stretch)this.StretchModeComboBox.SelectedValue;
} 
```

为了实现特定的尺寸大小，我天真地更改了 Canvas、Image 和 Viewbox 上的尺寸。这里的问题是拖放对象没有正确重新定位。它们保持原来的顶部、左侧设置，这是不正确的。

```
private void ResizeButton_Click(object sender, RoutedEventArgs e)
{
   this.Viewbox.Stretch = Stretch.None;

   this.Viewbox.Height = this.Canvas.Height = this.Image.Height = Convert.ToDouble(this.HeightTextBox.Text);
   this.Viewbox.Width = this.Canvas.Width = this.Image.Width = Convert.ToDouble(this.WidthTextBox.Text);
} 
```

为了实现特定的尺寸功能，我想我需要使用 ScaleTransform 来模拟高度/宽度的变化？这听起来像是正确的方法吗？这样，当用户输入特定尺寸时，一切都会缩放。

如何将特定尺寸（高度/宽度）转换为参数以传递给比例变换？

这是具有默认大小选项的应用程序（注意带有灰色背景的 TextBlocks - Test1、Test2、Test3）

![在此处输入图像描述](https://i.stack.imgur.com/eQAFN.png)

这是设置了 Fill 选项的应用程序（再次注意 TextBlocks 仍然存在）。

![在此处输入图像描述](https://i.stack.imgur.com/OIElB.png)

最后，这是设置了特定尺寸 (1000 x 1000) 的应用程序（请注意，TextBlocks 保持其原始的顶部和左侧设置）。这不是我想要发生的。我希望它们相对于它们的原点重新定位。

![在此处输入图像描述](https://i.stack.imgur.com/cdvOg.png)

# windows - Windows Qt 应用程序的 GUI 样式

> ID：15983628
> 
> 赞同：0
> 
> 时间：2013-04-13T02:40:06.460
> 
> 标签：windows, qt, user-interface, mfc, wxwidgets

如何在 Windows 应用程序的对话框中使用彩色按钮和圆角实现这种外观和感觉？

我不认为它可以使用 MFC 完成，wxWidgets 或 Qt 有帮助吗？或任何其他平台？![在此处输入图像描述](https://i.stack.imgur.com/i3fmY.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:53:17.900

您可以设计任何您追求的外观和感觉`QSS`。你为什么不看看 Qt 文档？有很多可用的示例和指导。

*   [样式表示例](http://qt-project.org/doc/qt-5.0/qtwidgets/stylesheet-examples.html)
*   [样式表参考](http://qt-project.org/doc/qt-5.0/qtwidgets/stylesheet-reference.html)
*   [样式表语法](http://qt-project.org/doc/qt-5.0/qtwidgets/stylesheet-syntax.html)
*   [使用样式表自定义 Qt 小部件](http://qt-project.org/doc/qt-5.0/qtwidgets/stylesheet-customizing.html)

但有时，您需要覆盖控件才能实现目标。就像在[这个问题](https://stackoverflow.com/questions/13655018/specific-qpushbutton-style)中一样。但我认为您需要的外观可以通过`QSS`单独实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:47:50.450

It is easy to achieve such a look and feel with **any** GUI framework.

Choose the framework you are most comfortable with, RTFM, roll up your sleeves and get started.

On any framework you will find methods to draw bitmaps of any color and shape and to handle mouse clicks on them. What more do you need?

This is what GUI frameworks DO! They also provide a default set of widgets for the bone lazy and the conventional. You aren't one of those people. are you?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T02:47:33.460

在不同平台上实现相同 UI 的最简单和最快的方法是使用 Qt 在 QML 中实现它。与根据底层平台样式自动设置样式的小部件不同，QML 完全独立于平台。您可能可以使用 CSS 设置常规小部件的样式，甚至可以使用任意 UI API 手动重新实现绘图，但这不会那么容易。

# javascript - 在 Rails 中正确使用/包含 javascript

> ID：15983632
> 
> 赞同：0
> 
> 时间：2013-04-13T02:41:04.017
> 
> 标签：javascript, ruby-on-rails, html

我是我的 application.js 文件，我有：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

这是否意味着我的应用正在导入 jquery？我对这到底在做什么有点困惑。在我的 gemfile 中，我有`gem 'jquery-rails'`.

在我看来，我有以下几点：

```
 <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %> 
```

我相信“javascript_include_tag 'application'”包含“//= require...”行，对吗？

现在，如果我想添加一个“jquery 插件”，特别是导航栏的 hcSticky，说明说要包括`<script type="text/javascript" src="jquery.hcsticky.js"></script>`“在我`<script type="text/javascript" src="jquery.js"></script>`的 .没有任何地方吗？文档似乎说 javascript_include_tag 将为我做这件事，但我无法确切地说出它在做什么。伙计，要学的东西太多了，要弄清楚的东西太多了。非常尊重所有了解一切的人这项技术。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:51:09.143

**包括jquery吗？**

这`//= require jquery`将包括 jquery-rails 插件中的 jquery.js 文件。所以你的 html 中已经包含了 jquery。

如果您对此有疑问，请在您的应用程序中打开一个页面（在开发模式下运行）并查看 html 源代码，您将看到其中包含的所有 javascript。（在生产模式下，出于性能原因，所有的 javascript 文件都将被连接并缩小到一个文件 application.js 中。）

**如何添加特定的新 jquery 插件？**

下载 js 文件（jquery.sticky.js）。将它放在 /app/assets/js 文件夹中。您`//=require_tree .`将包含 /app/assets/js 及其子文件夹中的所有文件。因此，您的新插件将自动包含在内。

# sass - :hover 的 Sass 嵌套不起作用

> ID：15983639
> 
> 赞同：444
> 
> 时间：2013-04-13T02:42:34.283
> 
> 标签：sass, css-selectors

我已经编写了这段代码，但它不起作用。我的问题是什么？

```
.class {
    margin:20px;
    :hover {
        color:yellow;
    }
 } 
```

* * *

## 回答 #1

> 赞同：999
> 
> 时间：2013-04-13T02:44:48.903

为了在嵌套时将选择器连接在一起，您需要使用父选择器 ( `&`)：

```
.class {
    margin:20px;
    &:hover {
        color:yellow;
    }
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-04-13T02:48:19.630

当您浏览生成的 CSS 时，您可以轻松地调试这些东西。在这种情况下，转换后的伪选择器必须附加到类。事实并非如此。利用 ”＆”。

[http://sass-lang.com/documentation/file.SASS_REFERENCE.html#parent-selector](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#parent-selector)

```
.class {
    margin:20px;
    &:hover {
        color:yellow;
    }
} 
```

# ruby - Homebrew (Mac)：无法安装 libksba 或依赖项 libgpg-error

> ID：15983641
> 
> 赞同：2
> 
> 时间：2013-04-13T02:42:41.263
> 
> 标签：ruby, macos, rvm, homebrew

我正在使用 Ruby on Rails 设置新的 Mac 进行开发。我已经正确安装了 XCode（包括命令行工具）、Homebrew 和 RVM。但是，当我尝试通过 RVM 安装 2.0.0 Ruby 版本时，我一直不得不安装 libksba，它会尝试安装依赖项 libgpg-error。日志告诉我它正在下载文件，但它从不做任何事情。我已经让它运行了 30 分钟，但仍然没有做任何事情。该文件应该是几百 KB，所以它不是很大......下面是我正在运行的代码：

```
$ brew install libksba
==> Installing libksba dependency: libgpg-error
==> Downloading ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.11.tar.bz 
```

这只会坐在那里，什么也不做。是否有另一个存储库，我可以从中下载文件并手动安装它？由于简单的依赖错误而无法开发是令人沮丧的。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:52:33.457

这些是与`libksba`和相关的公式`libpgp-error`：[Homebrew Libksba Formula](https://github.com/mxcl/homebrew/blob/master/Library/Formula/libksba.rb)和[Homebrew Libgpg-Error](https://github.com/mxcl/homebrew/blob/master/Library/Formula/libgpg-error.rb)。尝试首先更新`Homebrew`，因为日志中显示的版本与 repo 中的版本之间的差异告诉我已经过时：

```
brew update
brew install libksba 
```

如果这不起作用，那么您可以从这里下载它：

```
 url 'ftp://ftp.gnupg.org/gcrypt/libksba/libksba-1.3.0.tar.bz2'
  url 'ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.11.tar.bz2'
  mirror 'http://www.mirrorservice.org/sites/ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.11.tar.gz' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:42:28.430

所以我发现了问题；我的网络正在通过阻止 FTP 的第二个路由器运行。我跳过了第二个路由器并连接到主路由器并且`brew install libksba`工作得很好。归功于 fmendez，他提供了一个镜像链接，引导我检查 FTP 的路由器端口。

对于其他提出此问题的人，上述说明确实适用于手动下载和安装公式。我还建议查看[Homebrew Tips n Tricks](https://github.com/mxcl/homebrew/wiki/Tips-N%27-Tricks)以获得有关运行哪些命令的更多帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-13T02:53:09.240

您可以尝试以下步骤（参考[此处](https://stackoverflow.com/questions/9879629/how-do-i-install-libksba-on-mac-osx)）

```
cd /usr/local/src

curl -O ftp://ftp.gnupg.org/gcrypt/libgpg-error/libgpg-error-1.9.tar.gz
tar -xvf libgpg-error-1.9.tar.gz
cd libgpg-error-1.9/
./configure
make
make install

cd ..
curl -O ftp://ftp.gnupg.org/gcrypt/libksba/libksba-1.2.0.tar.bz2
tar -xvf libksba-1.2.0.tar.bz2
cd libksba-1.2.0/
./configure
make
make install 
```

# c# - 新实例化数组的长度解析为 0 还是 null？

> ID：15983650
> 
> 赞同：0
> 
> 时间：2013-04-13T02:44:13.070
> 
> 标签：c#, arrays

家庭作业：我在以下代码中获取和索引越界。这是一个刽子手游戏，我正在跟踪我在`char`数组中猜到的字母。

这是我所做的假设：

1.  在调用方法中，我有一个未填充的数组 ( ) 作为参数`char[] displayGuesses = new char[26];`传递给下面的方法。`char[] usedLetters`
2.  字母猜测的第一次迭代，数组将为空。
3.  它的长度将为0。
4.  `usedLetters[0]`我用`letterGuessed`参数填充。
5.  下一次我猜，数组的长度将是 1，所以`usedLetters[1]`会被填充......等等。

    ```
    public char[] trackUsedLetters(char letterGuessed, char[] usedLetters)
    {
        int letterIndex = usedLetters.Length;
        usedLetters[letterIndex] = letterGuessed;  
        return usedLetters;
    } 
    ```

我认为可能发生了几件事。

1.  当我尝试`usedLetters`在第一次运行时获取长度时，空数组不返回零，而是返回 null。繁荣。越界。
2.  传递一个由 26 个成员定义的空白数组存在一些问题......？但我不确定这个问题会是什么，所以我不知道谷歌搜索什么会产生相关结果。
3.  我可能有范围问题；尽管使用循环，但我发现[此链接指向Java 的类似问题。](https://stackoverflow.com/questions/13553014/java-null-pointer-on-newly-created-array-with-user-defined-length)`for`我*不太*明白 Java 用户想要什么，但其中一些问题听起来很熟悉。

我需要第二双眼睛来看待这个问题，并为我指出解决这个问题的正确方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:21:26.227

根据c#规范：（强调我的）

> **1.8 数组**
> 
> 数组类型是引用类型，数组变量的声明只是为数组实例的引用留出空间。**实际的数组实例是在运行时使用 new 运算符动态创建的。新操作指定新数组实例的长度，然后在实例的生命周期内固定**。数组元素的索引范围从 0 到 Length - 1。new**运算符会自动将数组元素初始化为其默认值**，例如，对于所有数值类型，默认值为零，对于所有引用类型，默认值为 null。

将 char 数据类型默认为 '\0' 的[默认值](http://msdn.microsoft.com/en-us/library/83fhsxwc%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:49:12.913

看起来你想要`List<char>`那种可以增长（with `Add`）的方法。

数组具有固定大小，并且以下代码（您在示例中拥有）将**始终**抛出超出范围异常，因为您正在访问数组中最后一个元素之后的元素。

```
usedLetters[usedLetters.Length] = 'c'; 
```

有关数组长度的更多详细信息：

```
// newArray - array of 0 chars. newArray.Length is 0
var newArray = new char[0]; 

// nullArray not created, nullArray.Length will throw NullReferenceExcetption
char[] nullArray = null; 

// defaultArray = array of 26 characters, each value 0.
// defaultArray.Length is 26;
char[] defaultArray = new char[26]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T00:13:54.577

当您定义一个新数组，但不手动初始化其中的项目时，它将自动使用数组包含的任何类型的默认值进行初始化。在您的情况下，您正在创建一个字符数组。char 的默认值为 '\0' 或空字符。

这意味着数组永远不会真正“空”。如果你定义一个有 26 个槽的数组，它总是有这个长度，除非你创建一个新数组。

# ios - iOS 6 UIActivityViewController - 如何用本地语言呈现共享操作表？

> ID：15983651
> 
> 赞同：4
> 
> 时间：2013-04-13T02:44:13.457
> 
> 标签：ios, ios6, localization, social, uiactivityviewcontroller

如何将弹出分享面板上的“邮件”、“微博”、“复制”、“取消”等内置标签更改为本地语言？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-11T12:03:33.823

“在Info.plist中添加“可以混合本地化资源”并将其值设置为“是”。” 也解决了我的问题！谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-14T18:34:23.690

我的应用程序有 1 种语言俄语，所以它可以帮助我：在 Info.plist 例如添加键“本地化本地开发区域”=“ru”（您的语言环境）

# c# - 程序在后台运行时检测击键

> ID：15983656
> 
> 赞同：0
> 
> 时间：2013-04-13T02:45:27.417
> 
> 标签：c#, visual-studio-2010, background, keystrokes

我正在尝试使用 Visual Studio 创建一个小型 C# 程序，该程序在我的 Minecraft 服务器上模拟 Afk 怪物研磨的“自动开火”或“连续单击”。

该程序工作，或当程序处于“前台”时工作。我可以使用选定的按钮组合 (Ctrl+Alt+Z) 启动和停止处理自动单击的线程。

但是当程序在后台（和前台的游戏）时，我无法启动/停止自动点击。该程序根本不注册按钮组合。

如何让程序在后台注册按钮组合？

# php - 获取基于多个主题标签的 Twitter 提要

> ID：15983657
> 
> 赞同：0
> 
> 时间：2013-04-13T02:45:33.760
> 
> 标签：php, javascript, sockets, twitter

我正在尝试构建一个基于多个主题标签**实时**显示 Twitter 提要的 Web 应用程序。像 TweeterWall 之类的东西。
我一直在谷歌搜索，但是 API 太多，我有点困惑。

我的设置是一个标准的共享主机`PHP`和`MySQL`.

**我的问题**：哪种方法最适合我的环境？
我应该使用 Streaming API、Search API、Sockets 还是 Javascript `setInterval()`……我真的不知道……

感谢您的回答。
- 干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:16:31.540

在 GitHub 上查看[这个项目。](https://github.com/zkniebel/jquery-twitter-feed)不要被标题弄糊涂了——自从 Twitter 的 API 更新到 1.1 后它已经更新了。

页面上的 jQuery 插件已被重新用作渲染引擎，即它有助于渲染您的提要。

然而，重要的部分是在“服务器端示例和设置”目录中。去那里，阅读 SETUP_INSTRUCTIONS 文档，并使用“Plug_and_Play/Ready_PHP.php”文件中的代码作为您的起点。

如果您按照 SETUP_INSTRUCTIONS 文档中的说明进行操作，则只需将 Twitter 中的密钥连同 Twitter 句柄复制并粘贴到文件中，它就会为您呈现时间线。

请注意，您必须更新代码以呈现多个时间线，并且必须使用 AJAX 或其他一些解决方案来更新时间线，以模拟实时。

在这方面，请注意不要打破利率上限。如果您只为两个 Twitter 句柄呈现时间线，则只能每 6 秒更新一次（最佳情况）。为此，您必须使用单独的 Web 服务来执行请求，然后从您的网页查询该服务。

PS我是该项目的作者，所以如果您需要任何帮助，请告诉我。祝你好运！:)

# html - CSS 优先级是如何工作的？

> ID：15983673
> 
> 赞同：3
> 
> 时间：2013-04-13T02:49:12.567
> 
> 标签：html, css

假设我有以下 HTML：

```
<span id="id1" class="class1 class2">This is a test</span> 
```

如果`#id1`,`.class1`并且`.class2`都有不同的互斥 CSS 规则集，那么哪一个获胜？我一直在测试一个示例，在一种情况下，它正在选择（我认为）CSS 文件底部列出的那个，但在另一种情况下，它似乎是不确定的。

在这种情况下是否有特定规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T02:57:52.600

[CSS](http://www.w3.org/TR/CSS21/cascade.html)中级联的基本原则是你有一个元素，以及适用于同一个元素的一个或多个 CSS 规则（因为元素匹配它们的选择器）。在此过程中，计算所有适用的样式，解决（或级联）任何冲突，然后应用。

如果规则和它们的声明是互斥的，那么它们中的任何一个*本身*都不会“胜过”其他任何一个，因为没有要解决的冲突，因此也没有什么可以覆盖的。例如，如果您有以下规则：

```
#id1 {
    color: red;
}

.class1 {
    border-width: 1px;
}

.class2 {
    border-style: dashed;
} 
```

然后您的元素将具有红色文本和 1 像素厚的红色虚线边框。没有冲突，所以它们都将有效结合。（请注意，由于[特殊行为](https://stackoverflow.com/questions/8663510/set-css-border-color-to-text-color/8663547#8663547)，边框是红色的。）

[jsFiddle 预览](http://jsfiddle.net/BoltClock/7nC8e)

只有当您在多个规则中声明了相同的属性时，选择器特异性和级联才会相关，因为您需要覆盖该相同属性的值。在这种情况下，如前所述，ID 优先于类，并且从上到下应用同样特定的规则；阅读[选择器特异性](http://www.w3.org/TR/selectors/#specificity)。

例如，如果您有以下规则：

```
#id1 {
    color: red;
}

.class1 {
    text-decoration: underline;
    color: green;
}

.class2 {
    text-decoration: none;
    color: blue;
} 
```

然后你的元素将有没有装饰的红色文本，因为

*   中的`color`值`#id1`覆盖两个类中的值，并且

*   中的`text-decoration`值`.class2`覆盖 中的值`.class1`。

[jsFiddle 预览](http://jsfiddle.net/BoltClock/7nC8e/1)

请记住，所有这些都必须适用于同一个元素。如果你有一个只有一个 ID 的父级，一个只有一个类的子级，那么这些都不适用，因为你正在处理完全独立的元素。取而代之的是继承，我在上面链接到的文档中也介绍了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:51:32.003

CSS 从上往下读，所以 class2 会赢！

**更多信息** [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:55:00.700

ID 将优先于类。

如果一个元素具有多次使用 ID 定义的相同样式，则后者将优先于前者，除非您正在使用`!important`

* * *

CSS的优先顺序如下：

**1** . ！重要的

**2** . 在 HTML 元素中定义的内联样式

**3** . 在头部定义的内部样式

**4** . 外部样式表，它是一个工作表的链接 ( `<link rel="stylesheet" type="text/css" href="style.css" />`)

**5** . 浏览器默认

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T04:32:32.863

这很容易——更接近更精致的赢（就像生活一样）

IE

然后得到了一张白纸：

从课堂开始 - 应用那些（又名 class1、class2）

但你知道那个人（id）

然后应用那个..

所以（如果有一个“赢家”） id 赢了

除非标签有`style`它的属性——那会赢

# cocos2d-iphone - 如何在 cocos2d 中跟踪时间

> ID：15983675
> 
> 赞同：-1
> 
> 时间：2013-04-13T02:49:17.447
> 
> 标签：cocos2d-iphone, timestamp

我有一个游戏，从右边向左边的玩家射击坏人。

我希望我的敌人的生成速度随着游戏时间的增加而变得更快。

我`timeOfStart = CACurrentMediaTime();`在 init 和`NSLog(@"time is %d", timeOfStart + dt);`update 方法中设置了一个 double 。

但我得到的值如下：

```
time is 1581741008
time is 863073232
time is -1024003120
time is -1390701616
time is 14971856 
```

为什么我得到大值，然后更小，然后是负值！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:35:33.300

CACurrentMediaTime() 返回双精度值。

所以

```
NSLog(@"time is %f", timeOfStart + dt); 
```

您可以通过两种方式跟踪时间：

1.  使用 NSTimeInterval

    ```
    //Declare it as member variable in .h file
    NSTimeInterval      mLastSpeedUpdateTime;

    //In .m init method
    mLastSpeedUpdateTime = [NSDate timeIntervalSinceReferenceDate];

    //In update method
    NSTimeInterval interval = [NSDate timeIntervalSinceReferenceDate];

    float diff = (interval - mLastSpeedUpdateTime);

    if(  diff > 5.0f ) //5second
    {
         //here update game speed.
         mLastSpeedUpdateTime = [NSDate timeIntervalSinceReferenceDate];
    } 
    ```

2.  手动跟踪时间：

    ```
     //Declare this in .h
       float                mTimeInSec;

    .m init method
    mTimeInSec = 0.0f;

       -(void)tick:(ccTime)dt
        {
             mTimeInSec +=0.1f;

              //update gamespeed for every 10sec or on ur needs
              if(mTimeInSec>=10.0f)
              {
                //update game speed
                mTimeInSec = 0.0f;
              }  
        } 
    ```

# java - 我的 GUI 窗口不显示任何内容

> ID：15983676
> 
> 赞同：0
> 
> 时间：2013-04-13T02:49:28.973
> 
> 标签：java, swing, user-interface, jframe

我正在尝试使用网格布局来制作 GUI 窗口。我添加了我的所有组件并编译，但是当它运行时它不显示任何内容。我正在尝试制作一个像这样分组和堆叠的简单布局。

```
{introduction message}
{time label
time input text}
{gravity label
gravity input text}
{answer label
answer text box}
{calculate button clear button} 
```

这是我的代码

```
import javax.swing.*;
import java.awt.*; 

public class TurnerRandyFallingGUI  extends JFrame
{   
final int WINDOW_HEIGHT=500;
final int WINDOW_WIDTH=500;

public TurnerRandyFallingGUI()
{
    setTitle("Falling Distance Calculator");

    setSize(WINDOW_WIDTH,WINDOW_HEIGHT);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setLayout(new GridLayout(1, 5));

    //labels
    JLabel introMessage = new JLabel("Welcome to the Falling distance"+
                                       "calculator");
    JLabel timeLabel = new JLabel("Please enter the amount of time "+
                "in seconds the object was falling.");
    JLabel gravityLabel = new JLabel("Enter the amount of gravity being "+
                    "forced onto the object");
    JLabel answerLabel = new JLabel("Answer");

    //text fields
    JTextField fTime = new JTextField(10);
    JTextField gForce = new JTextField(10);
    JTextField answerT = new JTextField(10);

    //buttons
    JButton calculate = new JButton("Calculate");
    JButton clr = new JButton("clear");

    //panels
    JPanel introP = new JPanel();
    JPanel timeP = new JPanel();
    JPanel gravityP = new JPanel();
    JPanel answerP = new JPanel();
    JPanel buttonsP = new JPanel();

    //adding to the panels
    //intro panel
    introP.add(introMessage);
    //time panel
    timeP.add(timeLabel);
    timeP.add(fTime);
    //gravity panel
    gravityP.add(gravityLabel);
    gravityP.add(gForce);
    //answer panel
    answerP.add(answerLabel);
    answerP.add(answerT);
    //button panel
    buttonsP.add(calculate);
    buttonsP.add(clr);

    setVisible(true);
}
    public static void main(String[] args)
    {
        new TurnerRandyFallingGUI();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T07:41:15.127

您的 JFrame 中没有任何内容。这就是原因

```
import javax.swing.*;
import java.awt.*; 

public class TurnerRandyFallingGUI  extends JFrame
{   
final int WINDOW_HEIGHT=500;
final int WINDOW_WIDTH=500;

public TurnerRandyFallingGUI()
{

    //labels
    JLabel introMessage = new JLabel("Welcome to the Falling distance"+
                                       "calculator");
    JLabel timeLabel = new JLabel("Please enter the amount of time "+
                "in seconds the object was falling.");
    JLabel gravityLabel = new JLabel("Enter the amount of gravity being "+
                    "forced onto the object");
    JLabel answerLabel = new JLabel("Answer");

    //text fields
    JTextField fTime = new JTextField(10);
    JTextField gForce = new JTextField(10);
    JTextField answerT = new JTextField(10);

    //buttons
    JButton calculate = new JButton("Calculate");
    JButton clr = new JButton("clear");

    //panels
    JPanel introP = new JPanel();
    JPanel timeP = new JPanel();
    JPanel gravityP = new JPanel();
    JPanel answerP = new JPanel();
    JPanel buttonsP = new JPanel();

    //adding to the panels
    //intro panel
    introP.add(introMessage);
    //time panel
    timeP.add(timeLabel);
    timeP.add(fTime);
    //gravity panel
    gravityP.add(gravityLabel);
    gravityP.add(gForce);
    //answer panel
    answerP.add(answerLabel);
    answerP.add(answerT);
    //button panel
    buttonsP.add(calculate);
    buttonsP.add(clr);

    setLayout(new GridLayout(5, 1));

    this.add(introP);
    this.add(timeP);
    this.add(gravityP);
    this.add(answerP);
    this.add(buttonsP);

 setTitle("Falling Distance Calculator");

    this.pack();

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    setVisible(true);
    this.validate();
}
    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TurnerRandyFallingGUI();
            }
        });

    }
} 
```

考虑以下

*   在 GridLayout 中，第一个参数是**Rows**，第二个是**columns**
*   永远不要手动设置 JFrame 的大小。使用`pack()`方法决定大小
*   用于`SwingUtilities.InvokeLater()`在另一个线程中运行 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:50:19.403

您没有向上面的类扩展的 JFrame 添加任何内容。您需要将组件添加到其层次结构最终通向顶层窗口的容器中，`this`如果您愿意的话。换句话说，您在上面的代码中没有`add(someComponent)`或功能相似的`this.add(someComponent)`方法调用。

*   考虑将所有 JPanel 添加到单个 JPanel
*   考虑通过调用将 JPanel 添加到作为您的类的 JFrame 实例中`add(thatJPanel)`。
*   更好的做法是不扩展 JFrame，只在需要时创建一个，但这可能会成为另一个讨论的主题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T02:54:43.980

在`setVisible (true)`语句之前添加以下语句：

```
add (introP);
add (timeP);
add (gravityP);
add (answerP);
add (buttonsP); 
```

# arrays - 试图在 cocos2d 中向屏幕添加一组精灵？

> ID：15983677
> 
> 赞同：-1
> 
> 时间：2013-04-13T02:49:40.073
> 
> 标签：arrays, cocos2d-iphone, sprite, ccsprite

我正在尝试在屏幕上添加一系列浆果并让它们向左移动。它引用了一个包含级别的 plist。我改编自 Ray Winderlich Space Game 教程。屏幕上没有显示任何精灵。：/

```
-(void)updatePinkBerries:(ccTime)dt
{
    CGSize winSize = [CCDirector sharedDirector].winSize;

//    if (levelManager.gameState != GameStateNormal)
//        return;
//    
//    if (![levelManager boolForProp:@"SpawnAsteroids"])
//        return;

    double curTime = CACurrentMediaTime();

    if (curTime > nextPinkBerrySpawn)
    {
        // Figure out the next time to spawn a berry
        float spawnSecsLow = [levelManager floatForProp:@"ASpawnSecsLow"];
        float spawnSecsHigh = [levelManager floatForProp:@"ASpawnSecsHigh"];

        float randSecs = randomValueBetween(spawnSecsLow, spawnSecsHigh);
        nextPinkBerrySpawn = randSecs + curTime;

        float randY = randomValueBetween(0.0, winSize.height);

        float moveDurationLow = [levelManager floatForProp:@"AMoveDurationLow"];
        float moveDurationHigh = [levelManager floatForProp:@"AMoveDurationHigh"];
        float randDuration = randomValueBetween(moveDurationLow, moveDurationHigh);

        // Create a new berry sprite
        CCSprite *pinkBerry = [pinkBerries nextSprite];
        [pinkBerry stopAllActions];
        pinkBerry.visible = YES;

        // Set its position to be offscreen to the right
        pinkBerry.position = ccp(winSize.width + pinkBerry.contentSize.width/2, randY);

        // Move it offscreen to the left, and when it's done, call removeNode
        [pinkBerry runAction:
         [CCSequence actions:
          [CCMoveBy actionWithDuration:randDuration position:ccp(-winSize.width- pinkBerry.contentSize.width, 0)],
          [CCCallFuncN actionWithTarget:self selector:@selector(invisNode:)], nil]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:42:10.550

检查 nextPinkBerrySpawn 是否是它应该是的。如果 curTime 不大于 nextPinkBerrySpawn 那么它不会产生任何东西。SGSK 的代码适应性很强，如果一切设置正确，您应该能够正常运行它

# javascript - 尝试将字母附加到输入中的文本

> ID：15983683
> 
> 赞同：1
> 
> 时间：2013-04-13T02:50:50.560
> 
> 标签：javascript, jquery

我有一个使用 disabled 属性禁用的文本输入，但是我在单击某些类时添加了输入。

在点击类 I (.I) 时，我在输入中的现有文本（如果有）中添加一个字母 I。

单击类 O (.O) 时，我在输入中的现有文本（如果有）中添加一个字母 O。

但是，当我单击类时似乎没有发生任何事情。

这是我的代码：

```
 $('.I').click(function(){
        $('#code').text($('#code').text()+"I");
    });
    $('.O').click(function(){
        $('#code').text($('#code').text()+"O");
    }); 
```

这是一个 JSFiddel 复制问题：http: [//jsfiddle.net/q3xBY/](http://jsfiddle.net/q3xBY/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T02:59:07.047

要获取和设置输入元素的值，您应该使用`.val()`而不是`.text()`.

```
$('.I').click(function(){
    $('#code').val($('#code').val()+"I");
});
$('.O').click(function(){
    $('#code').val($('#code').val()+"O");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:14:10.663

您可以为所有按钮提供相同的类，而不是像这样对每次点击进行硬编码：

```
<button class="I button">I</button>
<button class="O button">O</button> 
```

然后你可以应用 jQuery 来实现你所描述的：

```
$('.button').click(function(event) {
    var text = $(this).text();
    $('input:text').val(function(index, val) {
        return val + text;
    });
}); 
```

`**[Updated Demo](http://jsfiddle.net/q3xBY/3/)**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:15:50.950

正如 John S 所说 - 你会想要使用`.val()`而不是`.text()`. 如果您在一个页面上有多个实例并且您不想重复自己，我提供了一个解决方案。

`#foo`是单击文本输入修饰符时要更改的文本输入。`ul[data-change]`可以是修饰符的容器，并具有一个属性`data-change`来指定`input`修饰符将针对的页面上的哪个元素。每个`a`修饰符元素都有一个`data-value`属性，该属性指定将添加到目标`input`on的内容`mouseclick`。

HTML：

```
<input type="text" id="foo" value="" disabled="disabled" />
<ul data-change="#foo">
    <li><button id="i" data-value="i">i</button></li>
    <li><button id="a" data-value="a">a</button></li>
</ul> 
```

JS：

```
$('[data-change] button').on('click', function(){
    var target = $(this).closest('[data-change]').data('change');
   $(target).val( $(target).val() + $(this).data('value') );
}); 
```

这是一个小提琴：http: [//jsfiddle.net/vpC6D/1/](http://jsfiddle.net/vpC6D/1/)

# php - 在 paypal Express 结账期间清除会话

> ID：15983684
> 
> 赞同：1
> 
> 时间：2013-04-13T02:51:02.700
> 
> 标签：php, html, paypal, express-checkout

我目前正在开发一个使用 Paypals 快速结帐系统的 E-Comm 网站。快速结帐系统工作正常，我发送付款金额，用户登录以确认运输详细信息，然后返回我确认并完成付款的页面。我遇到的主要问题是我在会话中保存了用户名（电子邮件）。一旦用户单击使用贝宝结帐并确认他/她的贝宝帐户，我的会话就被清除了。所以我无法记录谁购买了哪些商品（除非我使用用户的 paypals 电子邮件地址，该地址可能与用户在我的网站上使用的不同）。

所以我的问题是，有什么方法可以在整个确认操作中保留会话状态？还是有其他方法可以保留用户信息？这是一个记录在案的问题吗（我在任何地方都没有看到）？

如果需要更多详细信息，请告诉我。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:12:06.690

不，一旦用户离开您的域，会话将终止。

相反，您可以在用户离开您的站点之前将电子邮件地址存储在表格中，并将插入记录的 ID 传递给贝宝。由于此 ID 是一个自定义字段，一旦用户完成付款，它将在回调 url 中返回。您可以从 URL 获取 ID 并从数据库中检索相应的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:28:06.393

即使您的 PHP 会话没有终止（它关闭的原因可能不同），在用户离开 PayPal 和返回之间依赖会话未修改仍然不是一个好主意。考虑一个有多个标签的用户，在完成快速结账之前，他们开始在另一个标签中浏览您的网站。

相反，将所有对结帐完成很重要的内容存储在数据库中，并通过[CUSTOM](http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html#2825815)或[INVNUM](http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html#2825844)参数在 Express Checkout 过程中传递唯一标识符。这些将通过结帐过程进行处理。一旦回调返回到您的站点，您就可以非常轻松地识别数据库中它所指的“未完成”订单并将其标记为“已付款”。

# linux - Linux 内核中的 subsys_initcall 有什么作用？

> ID：15983685
> 
> 赞同：2
> 
> 时间：2013-04-13T02:51:03.667
> 
> 标签：linux, linux-kernel, linux-device-driver

我在 Linux 内核的 devfreq.c 文件中遇到了这一行`subsys_initcall(devfreq_init);`。我只是想知道它何时被实际调用以及它的作用。

# php - hostgator cron 工作不工作

> ID：15983688
> 
> 赞同：2
> 
> 时间：2013-04-13T02:51:20.480
> 
> 标签：php, cron, cpanel

我在使我的 cron 工作正常工作时遇到问题，

这是我的 php 文件中唯一的代码：

发送报告.php

```
mail("someone@somewhere.com", "test email", "test message"); 
```

这是 cpanel 中的 cron 作业：

```
0 10 * * 1,2,3,4,5,6 php /home/username/public_html/foldername/sendreport.php 
```

我正在使用hostgator。

cron 作业应该从星期一、星期二、星期三、星期四、星期五和星期六的每个上午 10 点运行，但似乎它不起作用。

我想知道我这样做是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-14T06:27:55.410

这与您的代码无关。Hostgator 阻止 cronjobs 比每 15 分钟更频繁地运行一次。（是的，我知道这已经差不多一岁了——它是为未来的人准备的）

> Cron 作业限制
> 
> 共享和经销商
> 
> 您可能不会比每 15 分钟更频繁地运行一次 cron 作业。

参考： http: [//support.hostgator.com/articles/cpanel/what-are-cron-jobs](http://support.hostgator.com/articles/cpanel/what-are-cron-jobs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T19:34:46.210

补充贾斯汀所说的话。根据[这篇](http://support.hostgator.com/articles/cpanel/what-are-cron-jobs)分享的文章，经销商最多只能每 15 分钟触发一次。

# java - 在 Java 中使用 break/continue 退出 try 块

> ID：15983691
> 
> 赞同：3
> 
> 时间：2013-04-13T02:51:47.873
> 
> 标签：java

在 Java 文档中，我正在阅读：finally 块总是在 try 块退出时执行。这样可以确保即使发生意外异常也会执行 finally 块。但 finally 不仅仅对异常处理有用——它允许程序员避免清理代码意外地被 return、continue 或 break 绕过。

你什么时候会退出 try 块并中断或继续？我能想到的唯一场景是您在 try 块内运行循环，然后使用 break/continue 退出，但这应该只是退出循环而不是 try 块本身，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T03:01:11.750

> 你什么时候会退出 try 块并中断或继续？

当你有一个`try` *内部*循环时；例如

```
 for (Cat cat : cattery) {
     try {
          cat.removeFromCage();
          cat.healthCheck();
          if (cat.isPedigree()) {
              continue;
          }
          cat.spey();
     } finally {
          cat.putBackInCage();
     }
 } 
```

好的......所以有更优雅的方式来编写“代码”......但这只是一个例子。

> 我能想到的唯一场景是您在 try 块内运行循环，然后使用 break/continue 退出，但这应该只是退出循环而不是 try 块本身，对吗？

没错。

* * *

FWIW，任何涉及打破 try 块或从 catch 或 finally 或任何其他“边缘情况”事物返回的代码都应该被简化。JLS 清楚地指定了在这些场景中会发生什么……但这并不意味着您应该在实际程序中使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T03:08:56.987

Java 有标签。并且标签通常与 break 和 continue 运算符一起使用。所以，代码：

```
outer: for (int i=0; i < 1; i++){
  for (int j = 0; j < 1; j++) { 
    System.out.println("j:"+j);
    continue outer;
  }
  System.out.println("i:"+i);
} 
```

将只打印“j:0”

而且因为 break 和 continue 是“标记的”，所以您可以在循环块内使用“try”语句，在该块内您可以尝试调用“continue”或“break outer_loop”。但是，正如您在引文中所描述的那样，“finally”语句会阻止该退出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T03:01:12.320

对于一个完全人为的例子：

```
import java.io.*;

public class Foo {
    public static void main(String[] args) throws IOException {
        for (int i = 0; i < 10; i++) {
            File file = new File("file-" + i);
            FileWriter out = null;
            try {
                out = new FileWriter(file);
                if (file.exists()) return;
                out.write("Number " + i);
                if (i % 2 == 0) continue;
                else if (i % 3 == 0) break;
            } catch (IOException e) {
                throw new RuntimeException(e);
            } finally {
                out.close();
            }
        }
    }
} 
```

您可能希望在 try 中返回、中断或继续（或抛出异常），这是非常自然的。在这个例子中，如果 finally 不能保证执行，你就会有资源泄漏。

是的，这个特殊的问题是通过[JDK7 中的 try-with-resource](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)解决的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T03:01:18.217

是的，`break`/`continue`应该只影响循环，而不是//`try`块。该文档只是指出，在尝试处理异常时很容易意外遗漏（不执行）清理代码块，尤其是那些改变流程的偷偷摸摸的 s 和s！`catch``finally``break``continue`

[finally 块应该始终被执行](https://stackoverflow.com/questions/65035/does-finally-always-execute-in-java)，除非`System.exit()`被调用或 JVM 崩溃！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-30T18:53:52.513

是的，使用**break 语句**，我们可以在**label**的帮助下***退出 try 块***，而**无需使用 loop**。

 ****```
tryLabel:
        try {
            if(true)
                break tryLabel;
            System.out.println("try");
        }catch(Exception e) {
            System.out.println("catch");
            e.printStackTrace();
        }finally{
            System.out.println("finally");
        } 
```****

# java - 使用 charAt 的 Java 中的“字符串索引超出范围”错误消 息

> ID：15983694
> 
> 赞同：0
> 
> 时间：2013-04-13T02:52:16.617
> 
> 标签：java, exception, char, runtime-error, indexoutofboundsexception

最近，在编码时，我遇到了以下错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: 
                     String index out of range: 0
at java.lang.String.charAt(String.java:686)
at TestAssign2.main(TestAssign2.java:119) 
```

当我将行添加`firstLetter=userName.charAt(0);`到代码中时会出现错误，并且程序会在用户输入所有询问的值后显示错误消息。在输入此行之前，一切正常。

```
while(uProgStart.equals(PROGSTART))
        {

            System.out.println("What is your name?");
            userName=sc.nextLine();
            junk = sc.nextLine();

            System.out.println("What is the year of your birth?");
            birthYear = sc.nextInt();
            junk = sc.nextLine();

            System.out.println("What is the date of your birth? (dd.mm)");
            birthDDMM = sc.nextDouble();
            junk = sc.nextLine();

            day=(int)birthDDMM;

            month=(int)Math.round(100*birthDDMM)%100;

                //Begins calculation of Dss Score
                if(birthYear%CYCLE_LENGTH!=SNAKE_YEAR)
                    {
                        DssScore=DssScore+1;
                    }

                if(month<SPRING_BEGINNING||month>SPRING_END)

                    {
                        DssScore=DssScore+2;
                    }

     firstLetter=userName.charAt(0);            
            if(firstLetter==(LOWER_S)||firstLetter==(UPPER_S))
                {
                    DssScore=DssScore+4;
                } 
```

该行的想法是查看用户输入的名称是否以字母“s”或“S”开头。

所有变量都已声明，我只是为了保持这篇文章简洁而没有包括它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:09:54.117

我认为您错误地按了 Enter 键而没有机会输入任何输入，并且它强制用户名变量为空。我像上面提到的那样重现了这个错误。有时当你处理 时`scanner`，它会发生这样的事情。

因此，在您的代码中，`username`在执行任何操作之前检查是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:14:15.190

您可能希望使用`if`它来确保下一行确实存在。

像这样的东西：

```
if(sc.hasNextLine()) {
   userName = sc.nextLine()
} else {
  System.out.println("OMG... Where is my line?")
} 
```

这很可能不能很好地解决您的问题，但根据我们掌握的有限信息，很难提出更好的建议。

真正的问题很可能在您的逻辑中的其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T02:58:12.280

在 charAt调用之前`sc.nextLine()`进行分配`userName`的调用可能会返回一个空字符串（例如，如果您扫描一个空行）。

# java - 嵌入然后从java档案中提取后可执行的shell脚本仍然可以执行吗？

> ID：15983695
> 
> 赞同：2
> 
> 时间：2013-04-13T02:52:23.973
> 
> 标签：java, shell, jar

我有一个包含一些可执行脚本文件的应用程序。而且我知道我们将在其上部署应用程序的目标机器具有 java.util. 因此，我将应用程序打包在 java 存档中，并使用“jar xf jarFileName”在目标机器上提取。但可执行脚本不再可执行。是的，我们可以运行“chmod _x scriptName”。但是脚本是否可以在从 jar 文件中提取而无需用户干预的情况下执行？我已经读过：[这个相关的问题](https://stackoverflow.com/questions/6603807/executing-a-shell-script-inside-a-jar-file-how-to-extract)，但这并不是为了保持可执行性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:10:16.647

好吧，JAR 文件实际上是一个 ZIP 文件，所以这个问题涵盖了您要问的大部分内容：[使用 JDK 5 api 从 zip 文件中提取时维护文件权限](https://stackoverflow.com/questions/1050560/maintain-file-permissions-when-extracting-from-a-zip-file-using-jdk-5-api)

问题是像执行位这样的东西是特定于操作系统的，并且在使它们在不同的操作系统上工作时存在各种各样的问题。“执行”位也不例外。一个典型的（外部）ZIP 文件提取器应该能够处理这个问题（以相关信息首先在 ZIP 文件中为模！）。但是，当您以编程方式提取 ZIP / JAR 文件时这样做会涉及取消选择“额外数据”字节数组......我认为。我不知道该`jar`命令的作用...尽管您可以查看源代码，如果您是游戏...

如果您知道要提取的文件/脚本*应该*是可执行的，我建议您只需修改您的提取过程以在提取后适当地设置执行位。在 Java 7 中，您可以使用新的 NIO 文件属性 API 来做这件事。或者在`chmod`外部运行。您也可以尝试使用`unzip`实用程序而不是`jar`...进行提取，尽管这假设平台已`unzip`安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:21:34.840

如果您想在 Windows 以及 OS X 等 unix 上进行部署，可以免费获得 DOS/Windows 版本的标准实用程序，例如 chmod。您很可能可以将它们与您的应用程序一起分发，并设置路径，以便当且仅当没有可用的本机版本时，安装脚本才能找到您的 Windows chmod.exe，就像在 unix 系统上那样。当然，您必须在不同的系统上进行足够的测试，以确保在某些不寻常的情况下这不会失败。

# python - Python PLY - 跳过生产规则

> ID：15983707
> 
> 赞同：1
> 
> 时间：2013-04-13T02:53:24.643
> 
> 标签：python, yacc, ply

使用 PLY 时，是否可以跳过给定生产规则？（就像 lex 允许使用 obj.lexer.skip(1) 跳过某些标记一样）

例如：

```
def p_variable(p):
    'variable : identifier'
    if variabledict.getitem(p[1]) == None:
        p.parser.skip(1)  # <<
    else:
        p[0] = p[1] 
```

如何才能做到这一点？

# c++ - 循环写入文件时遇到问题

> ID：15983716
> 
> 赞同：4
> 
> 时间：2013-04-13T02:56:01.267
> 
> 标签：c++

我在让这个程序正常工作时遇到问题。程序询问一个问题，然后将该问题写入文件。然后它会询问您是否要输入另一个问题。如果您点击“1”，它将循环并要求您输入另一个问题。该程序本身运行和关闭没有任何问题。问题是无论我输入多少问题，它只会将第一个问题写入文件。其余的被空行替换。如果我关闭程序并重新运行它，它将再次只写一行。我确定 cin.ignore 与它有关，但我不知道如何解决它。请帮忙。

```
#include <iostream>
#include <fstream>
#include <limits>
#include <string>

using namespace std;

int main ()
{
string question;
int x;

ofstream a_file("test.txt",ios::app);
    do
    {
        cout<<"Enter a question:\n\n";
        getline(cin,question);
        a_file<<question<<"\n";
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        cout<<"Would you like to enter another question?\n";
        cout<<"1 for yes. 2 for no: ";
        cin>>x;

    }
    while (x!=2);

a_file.close();
cout<<"\nYour submition has been saved. Have a nice day!\n";
cout<<"Press enter to close the program.";
cin.ignore();
cin.get();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:14:59.197

与您的代码相关的问题在这里：

```
 cin.ignore(numeric_limits<streamsize>::max(), '\n'); 
```

将忽略整行。然后，当您尝试使用`getline`获取下一行时，您在 while 循环中什么也得不到。

您可以按如下方式解决此问题：（Pablo 指出的编辑）

```
do
{
    if (question.length() >0)
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
    cin.clear(); 
    cout<<"Enter a question:\n\n";
    getline(cin,question);
    a_file<<question<<"\n";
    cout<<"Would you like to enter another question?\n";
    cout<<"1 for yes. 2 for no: ";
    cin>>x;
}while (x!=2); 
```

我试过这个修复将 gcc 4.5.3，它按预期工作得很好。应该存在更优雅的修复。

# c# - KeyedCollection 是否仅在 Key 确定其中项目的相等性时才表示？

> ID：15983720
> 
> 赞同：2
> 
> 时间：2013-04-13T02:56:34.337
> 
> 标签：c#, semantics, equality, keyedcollection

我认为这是我们经常遇到的问题。

```
class Person
{
    public string place;
    public string name;

    public Person(string place, string name)
    {
        this.place = place;
        this.name = name;
    }

    public bool Equals(Person other)
    {
        if (ReferenceEquals(null, other))
            return false;

        return name == other.name;
    }

    public override bool Equals(object obj)
    {
        return Equals(obj as Person);
    }

    public override int GetHashCode()
    {
        return name.GetHashCode();
    }

    public override string ToString()
    {
        return place + " - " + name;
    }
} 
```

说我有这门课。我可以实现`KeyedCollection`这样的：

```
class Collection : KeyedCollection<string, Person>
{
    protected override string GetKeyForItem(Person item)
    {
        return item.place;
    }
} 
```

这里的情况是默认`Equals`值基于`name`，`Person`但在我的情况下，我正在创建一个自定义`collection`，`Person`每个`place`. 换句话说`place`将是独一无二的`collection`。

```
Person p1 = new Person("Paris", "Paul");
Person p2 = new Person("Dubai", "Ali");

var collection = new Collection { p1, p2 };
var p3 = new Person("Paris", "Jean");
if (!collection.Contains(p3))
    collection.Add(p3);   // explosion 
```

我明白这个问题。`Contains(Person)`重载是进行基于值的`Collection<T>.Contains(T)`线性搜索，同时`Add(Person)`将值添加到内部字典中，这可能导致重复键异常。在这里，如果平等是基于`place`，这个问题就不会存在。

我可以提供一个解决方法：

```
class Collection : KeyedCollection<string, Person>
{
    protected override string GetKeyForItem(Person item)
    {
        return item.place;
    }

    new public bool Contains(Person item)
    {
        return this.Contains(GetKeyForItem(item));
    }
} 
```

但这又意味着如果我做一个将军

```
var p3 = new Person("Paris", "Jean");
bool b = collection.Contains(p3); //true 
```

返回`true`，但实际上`Jean`还不存在`collection`。所以我的问题是，只有`KeyedCollection<K, T>`当`Equals`仅基于? 我的问题在语义方面很少。**我不是在寻求解决方案，但只是知道是否对何时****有意义有一般的理解？**我从文档中找不到与此主题相关的任何内容。`K``T`**`KeyedCollection`**

## 更新：

我发现这里提到的确切问题[http://bytes.com/topic/net/answers/633980-framework-bug-keyedcollection-t](http://bytes.com/topic/net/answers/633980-framework-bug-keyedcollection-t)

提问者向 MS 提交了错误报告。引用他的话（2007 年 4 月 18 日）：

> 我将此作为错误提交给 Microsoft，他们已经验证并接受了它。这是问题 ID 271542，可以在[此处](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=271542)跟踪：
> 
> “我们已经在 WinXP pro SP2 和 VSTS2005 SP1 上重现了这个错误，我们正在将此错误发送给 Visual Studio 产品团队中的适当小组进行分类和解决。”

虽然我不认为这是一个错误，但这肯定是一个烦恼。但只是想知道 MS 一开始是如何接受这个错误的（*预计现在找不到该页面*）。Imo，它只是考虑不周的继承模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T03:38:19.813

询问收藏似乎有两件事是有意义的：

*   是否包含住在巴黎的名叫 Jean***的****人*，以及

*   是否包含***一个****住在巴黎的人*。

[KeyedCollection<TKey, TItem> 类](http://msdn.microsoft.com/en-us/library/ms132438.aspx)提供了两种方法来询问这些问题：

*   [Contains(TItem) 方法](http://msdn.microsoft.com/en-us/library/ms132407.aspx)，以及

*   包含[（TKey）方法](http://msdn.microsoft.com/en-us/library/ms132452.aspx)。

***住在巴黎的叫 Jean的**人和住在巴黎的叫 Paul****的****人*( [Person.Equals](http://msdn.microsoft.com/en-us/library/ms131190.aspx) )不是同一个人。但是如果有***一个****人住在巴黎*，那么按照你们的规定，不可能有***另一个****人住在巴黎*。

所以基本上你必须在添加新人之前向集合询问正确的问题：

```
if (!collection.Contains(p3.place))
    collection.Add(p3); 
```

* * *

为方便起见，您可以向类中添加一个 TryAdd 方法，如果**该**人已成功添加，或者如果集合中已经**有一个**人居住在同一个地方，则该方法返回：

```
public bool TryAdd(Person person)
{
    if (Contains(GetKeyForItem(person)))
        return false;
    Add(person);
    return true;
} 
```

# typescript - Typescript 版本是否向后兼容？

> ID：15983724
> 
> 赞同：9
> 
> 时间：2013-04-13T02:57:46.263
> 
> 标签：typescript

我已经在未来的 TS 版本中编写的当前 TS 代码是否会有重大更改？我现在使用的是 0.8.3 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:04:47.763

是的（当然，取决于你写的内容）。TypeScript 使用[语义版本控制](http://semver.org/)；在宣布 1.0 版本之前，可能会发生重大更改。例如，用于的语法`enum`将在 0.8.3 和 0.9.0 之间变化，并且在 0.9 和 1.0 之间可能会有更多变化，尽管这些变化将保持在绝对最小值。但是，在 1.0 之后，您可以期待零破坏性更改（出于实际目的 - 不能保证由于错误而“意外”编译的退化代码将保持不变）。

我们将一些拥有非常大代码库的团队从 0.8.3 迁移到 0.9.0 的经验是，大多数 0.8.3 后的“重大”更改只是代码中已修复的错误，而这些错误是您意想不到的首先编译。在任何类型系统中，对于“错误”到底是什么存在一些分歧，但根据 0.8.3 规范合法的代码几乎肯定会在 0.9 中工作。

# iphone - 当我的手指移动时如何填充图像的透明区域

> ID：15983726
> 
> 赞同：6
> 
> 时间：2013-04-13T02:58:03.293
> 
> 标签：iphone, ios, objective-c, uiimageview, brushes

我想用画笔绘制透明区域，但我的代码工作得不是很好。我想有人可以在这里帮助我。我的代码：

```
// Handles the start of a touch

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGRect bounds = [self bounds];
    UITouch *touch = [[event touchesForView:self] anyObject];

    if (![image isPointTransparent:[touch locationInView:self]]
       || ![image isPointTransparent:[touch previousLocationInView:self]]) 
    {
        return;
    }

firstTouch = YES;

    // Convert touch point from UIView referential to OpenGL one (upside-down flip)

location = [touch locationInView:self];
location.y = bounds.size.height - location.y;
}

// Handles the continuation of a touch.

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{  
    CGRect bounds = [self bounds];
    UITouch *touch = [[event touchesForView:self] anyObject];

    if (![image isPointTransparent:[touch locationInView:self]] 
        || ![image isPointTransparent:[touch previousLocationInView:self]]) 
    {
        return;
    }

// Convert touch point from UIView referential to OpenGL one (upside-down flip)
if (firstTouch) 
    {
    firstTouch = NO;
        previousLocation = [touch previousLocationInView:self];
    previousLocation.y = bounds.size.height - previousLocation.y;
} 
    else 
    {
    location = [touch locationInView:self];
    location.y = bounds.size.height - location.y;
    previousLocation = [touch previousLocationInView:self];
    previousLocation.y = bounds.size.height - previousLocation.y;
}

// Render the stroke
[self renderLineFromPoint:previousLocation toPoint:location];
}

// Handles the end of a touch event when the touch is a tap.

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGRect bounds = [self bounds];
    UITouch *touch = [[event touchesForView:self] anyObject];

    if (![image isPointTransparent:[touch locationInView:self]] || ![image isPointTransparent:[touch previousLocationInView:self]]) 
    {  
        return;
    }

    if (firstTouch) 
    {
       firstTouch = NO;
       previousLocation = [touch previousLocationInView:self];
       previousLocation.y = bounds.size.height - previousLocation.y;
       [self renderLineFromPoint:previousLocation toPoint:location];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:51:18.427

要知道的重要一点是，您应该`drawRect:`在`UIView`. 因此`renderLineFromPoint:toPoint:`，您代码中的方法应该只是构建一个行数组并告诉视图每次重绘，如下所示：

```
- (void)renderLineFromPoint:(CGPoint)from toPoint:(CGPoint)to
{
  [lines addObject:[Line lineFrom:from to:to]];
  [self setNeedsDisplay];
} 
```

这假设您有一个具有 2 个`CGPoint`属性的 Line 类。你`drawRect:`可能看起来像这样：

```
- (void)drawRect:(CGRect)rect
{
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextSetRGBStrokeColor(context, 0.0f, 0.0f, 0.0f, 1.0f);
  for (Line *line in lines) {
    CGContextMoveToPoint(context, line.from.x, line.from.y);
    CGContextAddLineToPoint(context, line.to.x, line.to.y);
    CGContextStrokePath(context);
  }
} 
```

如果您这样做（没有 OpenGL），则无需翻转 y 轴。

唯一剩下的就是实现该`isPointTransparent:`方法。从您的代码中很难知道这应该如何工作。

# ruby-on-rails - Rails 3，在控制器中更改或填写提交的表单值

> ID：15983728
> 
> 赞同：2
> 
> 时间：2013-04-13T02:58:28.040
> 
> 标签：ruby-on-rails, ruby, form-submit, before-save

我有两个独立的“组件”模型、联系人和文章。联系人有多种类型（生产商、出口商等）。

在新的文章表单中，我有一个带有联系人（id 和标题）的下拉选择器，并且希望将选定的**值和文本**存储在文章表中。

在新文章表单视图中：

```
<%= f.select :producer_id, options_for_select(producers, @article.producer_id) %> 
```

这有效并`producer_id`存储在文章表中。

这对我来说很清楚和合乎逻辑，但在某些情况下，我还需要将所选联系人的标题存储在`producer_title`.

我已经阅读了许多不同的选项，例如“在模型中执行，保存前”或“在控制器中执行”，并且我已经在控制器中完成了。

文章控制器（仅更新的一部分）：

```
#cont_name is producer title from Contacts
def update
  params[:article][:producer_title] = Contact.where(id: params[:article][:producer_id]).pluck(:cont_name).first 
end 
```

这行得通，但它是解决这个问题的最佳实践方法吗？

另外，如果我更改要使用的部件，为什么我不能让它工作`params[producer_id]`：`id: params[:producer_id]`？

最好的问候和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:08:08.703

像下面这样的东西怎么样：

```
def edit
  @article = Article.find(params[:id])
  @producers = Contact.where(type: "producer") # or however you distinguish between producers and other contacts
end 
```

然后在您的表单中将其更改为：

```
f.select :producer_id, options_from_collection_for_select(@producers, "cont_name")
# you might need to do (@producers, "cont_name", "cont_name"), can't quite remember 
```

然后你的更新操作会简单得多：

```
def update
  @article = Article.find(params[:id])
  if @article.update_attributes(params[:article])
    ...
  else
    ...
  end
end 
```

`:id => params[:producer_id]`不起作用的原因是这`params`是一个嵌套的哈希，所以类似于：

```
params = { :article => { :producer_id => 34, :title => "Cool Article" }, :another_key => { :key => :value } } 
```

所以要访问`producer_id`你首先必须检索`article`哈希，否则它只会查看第一组键，其中包括`article`和`another_key`在上面的示例中，但不包括`producer_id`.

# html - 如何将容器放在扩展的 div 上？

> ID：15983729
> 
> 赞同：1
> 
> 时间：2013-04-13T02:58:39.760
> 
> 标签：html, css

这最好用图片来描述！带有 asldskd 的盒子，我想成为红色区域所在的位置。我想在黑色区域放置一个徽标，然后将单独的内容放入绿色区域。我基本上想要黑色和绿色的扩展，但我希望内容位于 900px 容器内。

这就是我现在所拥有的。我尝试使用 z-index 来做到这一点。有没有办法强制将黑绿色条放在 900px 容器之外，还是我需要将容器保持在它下面？

```
<div id="header"> laksjdf</div>
<div id="subheader"> alskdjf</div>

<div id="container">
asdf
</div> 
```

这是CSS：

```
#header {
width:100%;
height:70px;
background-color:black;
position:relative;
z-index:0;
 }

#subheader {
width:100%;
height:25px;
background-color:green;
position:relative;
z-index:1;
 } 

#container {
width:900px;
margin:0 auto;
border:1px solid black;
position:relative;
z-index:1;
 } 
```

![在此处输入图像描述](https://i.stack.imgur.com/pCVZP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:05:54.133

给你，我为你做了一个密码笔，告诉我你想要什么

[http://codepen.io/anon/pen/yHzxd](http://codepen.io/anon/pen/yHzxd)

# xcode - 使用第三方框架分发 mac 应用程序 (Xcode 4)

> ID：15983730
> 
> 赞同：3
> 
> 时间：2013-04-13T02:58:45.217
> 
> 标签：xcode, frameworks, osx-lion, allegro5

在过去的两天里，我做了很多研究，仅在这个网站上，我就必须阅读至少 20 个成功回答的问题。没有一个解决方案似乎对我有用。我在我的应用程序中使用了五个框架，并且在我的计算机上运行它没有问题。当我尝试在另一台计算机上运行应用程序时，加载库时出现错误。

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
dyld: launch, loading dependent libraries

Dyld Error Message:
  Library not loaded: /Users/USER/*/Allegro-5.0.framework/Versions/5.0.7/Allegro-5.0
  Referenced from: /Volumes/VOLUME/Pong.app/Contents/MacOS/../Frameworks/AllegroMain-5.0.framework/AllegroMain-5.0
  Reason: image not found 
```

我已经完成了这些步骤：

*   我有一个复制文件构建阶段，将框架复制到应用程序包中
*   我使用 install_name_tool 将安装路径更改为 @executable_path/../Frameworks
*   我已将 @executable_path/../Frameworks 设置为运行路径搜索路径
*   框架链接到我的程序

看起来 dyld 成功加载了第一个框架（Allegro-5.0），但在尝试加载第二个框架（AllegroMain-5.0）时认为它没有成功

附加信息：

*   当前运行 OSX 10.7.5
*   Xcode 4.6 版

我的应用程序包的内容文件夹如下所示： [Contents Screenshot](http://i912.photobucket.com/albums/ac326/xlightningz/Xcode/ScreenShot2013-04-12at72813PM.png)

我的链接二进制文件与库和复制文件构建阶段： [Xcode screenshot](http://i912.photobucket.com/albums/ac326/xlightningz/Xcode/ScreenShot2013-04-12at72338PM.png)

我不确定我对错误原因的看法是正确的。我已经在 allegro.cc 寻求帮助，但基本上被告知他们无法帮助我解决特定于框架的问题。我真的很感激任何帮助解决这个问题！

编辑

我不确定这是否重要，但我想了更多，我的标题搜索路径可能有问题。为了让应用程序运行，我必须为每个框架创建一个新的标头搜索路径。我目前设置了这五个单独的标题搜索路径：

```
 /Library/Frameworks/Allegro-5.0.framework/Versions/Current/Headers
 /Library/Frameworks/AllegroMain-5.0.framework/Versions/Current/Headers
 /Library/Frameworks/AllegroDialog-5.0.framework/Versions/Current/Headers
 /Library/Frameworks/AllegroFont-5.0.framework/Versions/Current/Headers
 /Library/Frameworks/AllegroTTF-5.0.framework/Versions/Current/Headers 
```

我不确定运行路径搜索路径究竟是如何工作的；它会允许代码找到我的标题吗？错误消息似乎与此问题无关，但这是我想到的另一个想法。

更新 4/14

我所做的事情搞砸了，因为我什至在我的电脑上也开始出现奇怪的行为。我重新安装了框架，但出现了一个新错误。

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
dyld: launch, loading dependent libraries

Dyld Error Message:
  Library not loaded: /opt/local/lib/libfreetype.6.dylib
  Referenced from: /Volumes/VOLUME/Pong.app/Contents/MacOS/../Frameworks/AllegroTTF-5.0.framework/Versions/5.0.10/AllegroTTF-5.0
  Reason: image not found 
```

我的问题现在更笼统了：如果我将 libfreetype 与我的应用程序捆绑在一起，我如何告诉框架在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:12:49.307

啊哈，我的应用程序现在可以在其他计算机上运行！以下是我为解决我的问题而采取的步骤。

*   尝试更改框架的 install_name，但我对自己在做什么并没有清楚的了解，所以我一定搞砸了。
*   重新安装所有框架以获得一个干净的开始。
*   这一次，我非常小心地更改了每个框架的 install_name 使用

sudo install_name_tool -id [install_name] [path/to/framework]

*   至此，所有的framework都加载成功了，但是还是尝试在/opt/local/lib下找到自己的依赖
*   我将依赖项添加到复制文件构建阶段，以便将它们包含在应用程序包中
*   最后，我再次使用安装名称工具来更改依赖项的搜索路径。

sudo install_name_tool -change [/old/path/to/library] [/new/path/to/library] [path/to/dependent/framework]

例如：对于导致我最初问题中最后一个错误的 libfreetype.6.dylib 依赖项，我使用了以下终端命令。

sudo install_name_tool -change /opt/local/lib/libfreetype.6.dylib @executable_path/../Frameworks/libfreetype.6.dylib /Library/Frameworks/AllegroTTF-5.0.framework/Versions/5.0.10/AllegroTTF-5.0

* * *

据我了解，我的大多数问题都是由于我试图盲目地遵循在回答类似但*略有*不同的问题时给出的终端命令。

实际上，阅读一些文档被证明是弄清楚这一点的关键，而且我现在对框架和库的工作原理的了解比在尝试分发我的应用程序之前要多得多。

谢谢你，堆栈溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:26:01.707

您需要更改交叉引用其他框架的框架中的安装路径。

在这种情况下，您需要将 AllegroMain-5.0.framework 中“/Users/USER/*/Allegro-5.0.framework/Versions/5.0.7/Allegro-5.0”的安装路径更改为“@executable_path/../Frameworks/ Allegro-5.0.framework/Versions/5.0.7/Allegro-5.0”。

我在使用 Qt 打包应用程序构建时遇到了类似的问题。

示例：QtGui.framework 引用 QtCore.framework。

```
name_tool="/Applications/Xcode.app/Contents/Developer/usr/bin/install_Name_tool"
cd "$APPNAME.app/Contents"

$name_tool -change /Users/USERNAME/QtSDK/Desktop/Qt/474/gcc/lib/QtCore.framework/Versions/4/QtCore @executable_path/../Frameworks/QtCore.framework/Versions/4/QtCore ./Frameworks/QtGui.framework/Versions/4/QtGui 
```

# ios - 如何将关闭按钮添加到 UIModalPresentationPageSheet 中显示的模态视图角？

> ID：15983731
> 
> 赞同：4
> 
> 时间：2013-04-13T02:58:47.917
> 
> 标签：ios, objective-c, uiview, modal-dialog

`UIModalPresentationPageSheet`我想在视图的一角添加一个浮动关闭 (x) 按钮。效果如下图：

![在此处输入图像描述](https://i.stack.imgur.com/QCRWg.png)

但是将它添加到父视图会使其出现在页面表后面（并且也无法点击）并将其添加到页面表会使其部分隐藏，因为它不在视图区域之外。

有没有更好的解决方案？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T12:44:21.660

您可以尝试将其添加到最顶层的应用程序窗口：

```
 add.modalPresentationStyle = UIModalPresentationPageSheet;
    [self presentViewController:add animated:YES completion:^{
        [[[[UIApplication sharedApplication] windows] lastObject] addSubview:button];
    }]; 
```

这应该为您提供正确的视图，以允许按钮出现在模式顶部并接收触摸事件。

- 编辑 -

要定位按钮，您可以尝试以下操作：

```
self.modalPresentationStyle = UIModalPresentationFormSheet;
add.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:pvc animated:YES completion:^{
    CGRect parentView = pvc.view.superview.frame;
    CGRect buttonFrame = button.frame;
    buttonFrame.origin = CGPointMake(parentView.origin.x - buttonFrame.size.width/2.0f, parentView.origin.y - buttonFrame.size.height/2.0f);

    [button setFrame:buttonFrame];
    [[[[UIApplication sharedApplication] windows] lastObject] addSubview:button];
}]; 
```

这将获得已呈现的 modalView 的框架。然后，您可以将按钮的原点设置为偏移并设置调整后的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:41:29.270

看看这是否有效：

myPresentedView.clipsToBounds = 否；

这将允许按钮在其视图之外绘制自身。这样做的一个缺点是触摸不会超出视图边界，因此请尽量不要将按钮设置得太远。

# rewrite - Ionics Isapi 重写过滤器 - 特殊规则？在网址中

> ID：15983736
> 
> 赞同：1
> 
> 时间：2013-04-13T02:59:23.267
> 
> 标签：rewrite, iirf

我对离子重写过滤器相对较新，我试图配置我的规则集以允许为我的应用程序添加额外的动态规则。我目前为我的应用程序的商店部分定义了以下规则。

```
RewriteRule ^/shop/(.*)/pages/(.*) /index.cfm?go=shop.products&content=$1&CurrentPage=$2 
RewriteRule ^/shop/(.*)/pages/(.*)/ /index.cfm?go=shop.products&content=$1&CurrentPage=$2 

RewriteRule ^/shop/(.*)$ /index.cfm?go=shop.products&content=$1 
RewriteRule ^/shop /index.cfm?go=shop.products 
RewriteRule ^/products.cfm  /index.cfm?go=shop.products 
RewriteRule ^/details.cfm   /index.cfm?go=shop.products 
```

服务提供商说我们不允许传入额外的跟踪变量，除非它们以 & 符号作为前缀。

URL 如下所示。

```
www.domainname.com/shop/category-of-products 
www.dimainname.com/shop/ 
```

使用它们的附加变量，它们必须执行以下操作

```
www.domainname.com/shop/category-of-products&additional-query-strings 
www.dimainname.com/shop/&additional-query-strings 
```

他们需要做的是

```
www.domainname.com/shop/category-of-products?additional-query-strings 
www.dimainname.com/shop/?additional-query-strings 
```

我需要做什么才能允许额外的？被引用

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T19:46:54.660

您可以尝试更改重写的正则表达式以允许*任何*查询字符串参数可选。

例如：

`RewriteRule ^/shop/(.*)$ /index.cfm?go=shop.products&content=$1`

变成

`RewriteRule ^/shop/(.*)(\?.*)?$ /index.cfm?go=shop.products&content=$1`

附加`(\?.*)?`项使表达式匹配问号和后面的所有内容为 0 或 1 次。

我现在无法测试它，但我认为您甚至可能需要通过`?`在星号后添加一个来使第一个匹配组不贪心：

`RewriteRule ^/shop/(.*?)(\?.*)?$ /index.cfm?go=shop.products&content=$1`

顺便说一句：这会在您的正则表达式中添加三个问号，每个问号都有不同的含义 - 使前面的运算符不贪婪，匹配文字问号，并匹配前面的表达式 0 或 1 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:43:51.470

您也许可以利用 $args 变量。

尝试添加 &$args？在您重写的 URL 的末尾。这 ？最后确保 Nginx 不会自动再次添加查询字符串。

例如

```
RewriteRule ^/shop/(.*)$ /index.cfm?go=shop.products&content=$1&$args? 
```

# salesforce - 将迷你页面布局添加到相关列表

> ID：15983738
> 
> 赞同：1
> 
> 时间：2013-04-13T02:59:44.820
> 
> 标签：salesforce

是否可以将迷你页面布局添加到相关列表中？例如，在机会上的机会行项目相关列表上，当用户悬停产品时，我希望有一个迷你页面布局显示。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:09:00.943

我不知道它是否可以通过配置获得。可能它没有发生，因为：

*   与 rel 一起。当您将鼠标悬停在其名称上时，列表会在页面顶部弹出，这可能意味着一些混乱的 JS/CSS 问题
*   它要求您悬停的链接具有唯一 ID = Salesforce 记录 ID。如果您在 Opp Line Items 上有超过 1 个产品，`document.getElementById()`则总是会返回第一个链接

调用的函数非常易于使用：

```
<a href="/{!acc.Id}"
    id="{!acc.Id}"
    onblur="LookupHoverDetail.getHover('{!acc.Id}').hide();"
    onfocus="LookupHoverDetail.getHover('{!acc.Id}', '/{!acc.Id}/m?retURL=%2F{!acc.Id}&isAjaxRequest=1').show();"
    onmouseout="LookupHoverDetail.getHover('{!acc.Id}').hide();"
    onmouseover="LookupHoverDetail.getHover('{!acc.Id}', '/{!acc.Id}/m?retURL=%2F{!acc.Id}&isAjaxRequest=1').show();">
    {!acc.Name}
</a> 
```

他们确实要求 Id 是记录的 Id，但仅此而已（如果您想使用 VF`<apex:outputLink>`等会出现问题，因为 id 不能是动态的，它会增长到`page:block:section:table:row:0:accId`.

所以 - 如果你真的需要这个功能，我怀疑你必须以某种方式在侧边栏中注入 javascript，以便使用这些悬停功能“装饰”Opp Line Item 链接。而且您可能必须覆盖标准函数/调用您自己的版本，例如，它们会在具有“oppLineItemId_productId”（这将是唯一的）但显示来自 Product2 的数据的项目上显示气球。

例如，可以在此处找到这些功能：[https ://salesforce.stackexchange.com/questions/1707/mini-page-layout-css-in-visualforce-page](https://salesforce.stackexchange.com/questions/1707/mini-page-layout-css-in-visualforce-page)

# python - 从随机颜色的线条中计算红线

> ID：15983740
> 
> 赞同：1
> 
> 时间：2013-04-13T03:00:23.523
> 
> 标签：python, random, count, turtle-graphics

所以如果我有一个颜色列表：

`colors = ['red', 'blue', 'green']`

我用它们随机给线条上色。有没有可能计算一共有多少条红线？我知道如果每条线都有固定的颜色会更容易计算，但如果没有，我将如何计算呢？

```
colors = ['red', 'blue', 'green']
def lines(xcoord, ycoord):
    import random
    global colors
    penup()  
    goto(xcoord, ycoord)  
    pensize(3)  
    pendown()  
    color(random.choice(colors))  
    forward(100)  
    right(randint(0,360))
    penup()
for _ in range(3):
    lines(randint(min_xcoord, max_xcoord), \
        randint(min_ycoord, max_ycoord)) 
```

所以我想在绘制完成后找出总共有多少条红线，比如说3条线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:25:24.917

假设您正在使用类似于此的代码：

```
from turtle import *
from random import choice
accuracy=64
colors = ['red', 'blue', 'green']
dist=400/accuracy
turn=360/accuracy
color_times = dict(zip(colors, [0, 0, 0])) # {'red':0, 'blue':0', 'green':0}
for j in range(5):
    my_color = choice(colors)
    color(my_color)
    color_times[my_color] += 1
    down()
    for i in range(0,360,turn):
        fd(dist)
        left(turn)
    up()
    fd(25)
mainloop()
print '{}:{}\n {}:{}\n {}:{}'.format('red', color_times['red'], 'blue', color_times['blue', 'green', color_times['green']) 
```

根据您的行代码：

更改`color(random.choice(colors))`为：

```
my_color = random.choice(colors)
color(my_color)
color_times[my_color] += 1 # you have to initialize color_times before the loop 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T03:13:53.897

第一种方法：您可以创建一个数组列表并在其中插入和删除颜色，然后当您想计算时，只需计算数组的红色字段，

第二种方法：创建数组 list(key,value) 并插入您在数组键中使用的颜色，并将每种颜色的计数放入 value

```
colors[
        red=>0,
        blue=>0,
        green=>0
      ] 
```

我希望这会有所帮助。

# c++ - 使用 C++ 迭代二维向量

> ID：15983745
> 
> 赞同：1
> 
> 时间：2013-04-13T03:01:53.657
> 
> 标签：c++, vector

多年来我没有使用 C/C++，我正在尝试复习基础知识，但我遇到了迭代 3D 向量的问题：

```
#include        <string>
#include        <vector>
#include        <iterator>

int                                             main() {
  std::vector< std::vector<std::string> >       container;
  std::vector<std::string>                      table;
  std::string                                   line;

  for (int container_it = 0; container_it < 2; container_it++) {
    for (int table_it = 0;  table_it < 5 ; table_it++) {
      line = "TEST";
      table.push_back(line);
    }
    container.push_back(table);
  }

  for (std::vector< std::vector<std::string> >::iterator container_it = container.begin(); container_it != container.end(); container_it++)
    for (std::vector<std::string>::iterator it = (*container_it)->begin(); it != (*container_it)->end(); it++)
      std::cout << *it << std::endl;
} 
```

我得到错误：

```
base operand of ‘->’ has non-pointer type ‘std::vector<std::basic_string<char> >’
base operand of ‘->’ has non-pointer type ‘std::vector<std::basic_string<char> >’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:07:08.307

我同意 chris，我在这里只看到 2 个维度，并且代码有一些语法错误，但它看起来像这一行：

```
for (std::vector<std::string>::iterator it = (*container_it)->begin(); it != (*container_it)->end(); it++) 
```

应该：

```
for (std::vector<std::string>::iterator it = (*container_it).begin(); it != (*container_it).end(); it++) 
```

或更简单地说：

```
for (std::vector<std::string>::iterator it = container_it->begin(); it != container_it->end(); it++) 
```

# graph-algorithm - 为什么 Bellman-Ford 的这种实现不起作用？

> ID：15983747
> 
> 赞同：1
> 
> 时间：2013-04-13T03:02:14.747
> 
> 标签：graph-algorithm, bellman-ford

下面的示例包含一个负循环，但程序似乎没有找到它。有人可以指出什么是错的吗？如果存在负循环，它应该打印出一个负循环，但程序没有做预期的事情。

```
#include <iostream>

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>

#include <math.h>

using namespace std;

// a structure to represent a weighted edge in graph
struct Edge
{
    int src, dest, weight;
};

// a structure to represent a connected, directed and weighted graph
struct Graph
{
    // V-> Number of vertices, E-> Number of edges
    int V, E;

    // graph is represented as an array of edges.
    struct Edge* edge;
};

// Creates a graph with V vertices and E edges
struct Graph* createGraph(int V, int E)
{
    struct Graph* graph = (struct Graph*) malloc( sizeof(struct Graph) );
    graph->V = V;
    graph->E = E;

    graph->edge = (struct Edge*) malloc( graph->E * sizeof( struct Edge ) );

    return graph;
}

// A utility function used to print the solution
void printArr(int dist[], int n)
{
    printf("Vertex   Distance from Source\n");
    for (int i = 0; i < n; ++i)
        printf("%d \t\t %d\n", i, dist[i]);
}

// The main function that finds shortest distances from src to all other
// vertices using Bellman-Ford algorithm.  The function also detects negative
// weight cycle
void BellmanFord(struct Graph* graph, int src)
{
    int V = graph->V;
    int E = graph->E;
    int dist[V];

    // Step 1: Initialize distances from src to all other vertices as INFINITE
    for (int i = 0; i < V; i++)
        dist[i]   = INT_MAX;
    dist[src] = 0;

    // Step 2: Relax all edges |V| - 1 times. A simple shortest path from src
    // to any other vertex can have at-most |V| - 1 edges
    for (int i = 1; i <= V-1; i++)
    {
        for (int j = 0; j < E; j++)
        {
            int u = graph->edge[j].src;
            int v = graph->edge[j].dest;
            int weight = graph->edge[j].weight;
            if (dist[u] + weight < dist[v])
                dist[v] = dist[u] + weight;
        }
    }

    // Step 3: check for negative-weight cycles.  The above step guarantees
    // shortest distances if graph doesn't contain negative weight cycle.
    // If we get a shorter path, then there is a cycle.
    for (int i = 0; i < E; i++)
    {
        int u = graph->edge[i].src;
        int v = graph->edge[i].dest;
        int weight = graph->edge[i].weight;
        if (dist[u] + weight < dist[v])
            printf("Graph contains negative weight cycle");
    }

    printArr(dist, V);

    return;
}

void CurrencyArbExample()
{
 /* Let us create the graph given in above example */
int V = 3;  // Number of vertices in graph
int E = 6;  // Number of edges in graph
struct Graph* graph = createGraph(V, E);

enum Nodes
{
  USD,
  EUR,
  GBP
};

double USDEUR = .8;
double EURGBP = .8;
double GBPUSD = 1.7;

double logUSDEUR = log(USDEUR);
double logEURGBP = log(EURGBP);
double logGBPUSD = log(GBPUSD);

double logOneOverUSDEUR = log(1.0 / USDEUR);
double logOneOverEURGBP = log(1.0 / EURGBP);
double logOneOverGBPUSD = log(1.0 / GBPUSD);

std::cout << logUSDEUR << " " << logEURGBP << " " << logGBPUSD << " "
          << logOneOverUSDEUR << " " << logOneOverEURGBP << " " << logOneOverGBPUSD
          << std::endl;

//("usd", "euro") : log(1/usd_euro),
//("euro", "gbp") : log(1/euro_gbp),
//("gbp", "usd") : log(1/gbp_usd),
//("euro", "usd") : log(usd_euro),
//("gbp", "euro") : log(euro_gbp),
//("usd", "gbp") : log(gbp_usd)

graph->edge[0].src = USD;
graph->edge[0].dest = EUR;
graph->edge[0].weight = logOneOverUSDEUR;

graph->edge[1].src = EUR;
graph->edge[1].dest = GBP;
graph->edge[1].weight = logOneOverEURGBP;

graph->edge[2].src = GBP;
graph->edge[2].dest = USD;
graph->edge[2].weight = logOneOverGBPUSD;

graph->edge[3].src = EUR;
graph->edge[3].dest = USD;
graph->edge[3].weight = logUSDEUR;

graph->edge[4].src = GBP;
graph->edge[4].dest = EUR;
graph->edge[4].weight = logEURGBP;

graph->edge[5].src = USD;
graph->edge[5].dest = GBP;
graph->edge[5].weight = logGBPUSD;

BellmanFord(graph, 0);
}

// Driver program to test above functions
int main()
{
    CurrencyArbExample();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:12:31.117

your `weight` attribute of struct `Edge` is of type `int` while you assign `double` values, namely the computed logarithms of exchanges rates.

turn on the warnings of your compiler, you should receive type narrowing warnings (at least).

# mysql - 一个字段中的两个条件以获得一个结果

> ID：15983750
> 
> 赞同：0
> 
> 时间：2013-04-13T03:02:32.447
> 
> 标签：mysql, sql, select, pervasive-sql

我想在与列相同的字段上获得两个条件的结果。数据库有两个不同的货币记录，一个`USD`和另一个`TRY`在表的同一字段中。所以，当我们得到对应于美元的 TRY 结果时，我想得到一个结果，即一一找到两种货币行并将 TRY 汇率除以美元。

我想在这段代码中添加我试图在这里获取的脚本：

```
SELECT e.Gk_2, f.ad, sum(g.sf_miktar) as Qty
from Stok00 e  
LEFT OUTER JOIN Gecoust f on e.Gk_2 = f.kod 
left outer join stok29t g on e.kod = g.kod
where e.kod like 'SAC SIL%' and f.Evrakno = 'STKGK2' 
group by e.GK_2, f.ad 
```

例子：

```
(Select sum(stock29.amount) from stock29 where stock29.rate = 'USD')
(Select sum(stock29.amount / 1.8) from stock29 where stock29.rate = 'TRY') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:30:38.623

如果我理解正确，那么您的查询应该如下所示（我只是在您的查询中添加一个字段，假设它有效）：

```
SELECT e.Gk_2, f.ad, sum(g.sf_miktar) as Qty,
SUM(CASE WHEN stocks29.rate = 'USD' THEN stocks29.amount
         WHEN stocks29.rate = 'TRY' THEN stocks29.amount / 1.8 END) As Amount
from Stok00 e  
LEFT OUTER JOIN Gecoust f on e.Gk_2 = f.kod 
left outer join stok29t g on e.kod = g.kod
where e.kod like 'SAC SIL%' and f.Evrakno = 'STKGK2' 
group by e.GK_2, f.ad 
```

我还假设既不`stocks29.rate`是也`stocks29.amount`不会是`NULL`。如果不是这种情况，那么它们应该被`ISNULL()`适当地包装在函数中。

# jquery - 如何将带有番茄酱错误的标签放在前面？

> ID：15983751
> 
> 赞同：0
> 
> 时间：2013-04-13T03:03:03.927
> 
> 标签：jquery, forms, validation, tabs

我在引导用户个人资料页面上使用番茄酱验证。有多个选项卡。编辑辅助选项卡并单击保存时，主选项卡上可能会出现番茄酱错误。但是它们没有显示，因为正在显示辅助选项卡。

有没有人想出如何将带有错误的标签放在前面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:22:02.390

`.active`使用 Bootstrap，您可以通过向其父`.tab-pane`元素添加一个类来将选项卡带到“最前面” 。

# string - 如何使用 lex 扫描多行输入

> ID：15983752
> 
> 赞同：0
> 
> 时间：2013-04-13T03:03:08.453
> 
> 标签：string, long-integer, lex

在文件中保存长行的标准方法是将它们分成较短的子行，并以反斜杠字符结束除最后一行之外的每个子行。

我想创建 lex/flex 规则来扫描这些行。如何告诉扫描仪首先读取并连接它们，然后才尝试将规则应用于“长”字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:10:14.563

You'd best redefine the `input` macro to remove any occurrences of backslash-newline from the input stream. So in a sense you put a preprocessor to the tokenizer.

# rubygems - 无法生成 rails 控制器：mysql2/client.rb:44:in `connect'：用户 'root'@'localhost' 的访问被拒绝（使用密码：否）（Mysql2::Error）

> ID：15983754
> 
> 赞同：1
> 
> 时间：2013-04-13T03:03:40.740
> 
> 标签：rubygems, ruby-on-rails-3.2, mysql2

我是 RoR 的新手，尽管他们警告我不要使用 OSX 来设置我的应用程序（因为这些问题），但我在这里。运行 OS X 10.82，我尝试了一切以成功捆绑所有软件包并保持一切一致，即 Homebrew、RVM、gem 更新、捆绑程序等

我的问题似乎专门针对 MySQL 和 mysql2。我用 Rails 应用程序不运行 mysql 尝试了一些其他的东西，从来没有遇到过任何这些问题。

> /.rvm/gems/ruby-2.0.0-p0/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': 拒绝用户 'root'@'localhost' 访问（使用密码：否）（Mysql2::Error）

我确实可以访问`mysql -u root -p`

这与安装过程中做或不做有关：“sudo commands”吗？

*   红宝石 2.0.0p0 [x86_64-darwin12.2.0]
*   导轨 3.2.13
*   mysql Ver 14.14 Distrib 5.6.10，适用于 osx10.8 (x86_64)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:26:15.357

此后，我输入了应用程序特定的 database.yml 文件，该文件默认配置为使用 MySQL root 用户，但未分配密码。

- 这是 DATABASE.YML 的样子

*   mysql。建议使用 4.1 和 5.0 版本。

*   安装MYSQL驱动

*   宝石安装mysql2

*   确保在您的 Gemfile 中定义了 MySQL gem

-#宝石'mysql2'

-#

-# 并确保使用新式密码散列：

-# [http://dev.mysql.com/doc/refman/5.0/en/old-client.html](http://dev.mysql.com/doc/refman/5.0/en/old-client.html)

发展：

适配器：mysql2

编码：utf8

重新连接：假

数据库：simple_cms

游泳池：5

用户名：root

密码：addmypasswordhere（请不要对空格敏感。“密码：”后只能有一个空格

套接字：/tmp/mysql.sock

我不确定这是否完全解决了问题，因为对我来说它修复了这个错误，但现在我看到了其他人：

现在，当我执行 $ rails generate （这应该只是一个帮助菜单）时，我得到以下信息（这可能是它自己的问题）：

/.rvm/gems/ruby-1.9.3-p392/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': 未知数据库 'simple_cms_development' (Mysql2::Error)

更新：

一般来说，我使用 Lynda.com 教程做这个 simple_cms。关键是，似乎在 2010 年（制作教程时）您可以使用命令 $ rails generate 而无需创建或配置数据库。我之所以这么说是因为一旦我按照教程进行操作（在忽略了我遇到的问题之后）。本教程将指导您创建上述 simple_cms_development 数据库并在 database.yml 文件中设置用户和密码信息。

完成后，我可以运行 $ rails generate 命令，甚至可以毫无问题地创建迁移。

因此，在经历了很多麻烦之后，在我看来，这一切都与在调用我讨论过的 rails 命令之前设置开发数据库的明显“新要求”有关，因为它会调用该数据库，这会给你和错误即使您只是创建一个不需要数据库准备好的控制器。我认为这是教程所做的假设。

如果您对此问题有任何其他意见，请告诉我。

# html - 使用常规 HTML 输入表单而不是 Bootstrap 样式

> ID：15983756
> 
> 赞同：0
> 
> 时间：2013-04-13T03:04:24.543
> 
> 标签：html, css, twitter-bootstrap

我想在 1 页上有 2 个表格。一种形式是 Bootstrap 样式的形式 ( [this](http://i.imgur.com/Jc3985l.png) )，另一种是没有任何样式的常规 HTML 形式 ( [this](http://i.imgur.com/uTZlpq1.png) )。

如果我现在尝试这样做，每次我使用输入标签时，它都会自动使用 Bootstrap 的样式作为输入。如何“取消”样式以使其使用常规 HTML 样式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:01:27.793

解决它。刚刚将样式表顶部的几十个“input”类重命名为“input.styled”，并在 HTML 中使用了以下内容：

```
<div class="input-append">
    <input class="styled" style="width:300px" id="appendedInputButton" type="text" placeholder="Search...">
    <button class="btn" type="button"><i class="icon-search"></i></button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:46:08.907

找到`<form>`和`<input>`in的引导样式`bootstrap.css`，将其复制到您自己的 css 类中，例如`.bootstrap-form { /* css goes here */}`，然后在引导文件中将其注释掉。

然后你就可以使用默认表单了；

```
<form>
<input type="text" name="firstname"><br />
<input type="text" name="lastname">
</form> 
```

以及使用的引导形式；

```
<form class="bootstrap-form">
<input class="bootstrap-input" type="text" name="firstname"><br />
<input class="bootstrap-input" type="text" name="lastname">
</form> 
```

# android - 在 viewpager 中显示 25 张图像会导致 android 中大屏幕出现内存不足错误

> ID：15983759
> 
> 赞同：0
> 
> 时间：2013-04-13T03:04:57.843
> 
> 标签：android, bitmap, out-of-memory

我正在开发以横向模式显示动物图像的应用程序。我必须以大约 70% 的屏幕尺寸显示它。我在所有 4 个文件夹中有所有 4 个不同尺寸的图像。所以我的 hdpi 文件夹包含的图像大小是 480 x 420。这个文件夹中没有图像超过 25Kb。而且我必须使用 viewpager 显示大约 25 - 30 张图像。但是对于更大的屏幕，它会出现内存不足的错误。什么是解决方案？我所有的图像都是本地的，这意味着我没有从服务器下载任何图像。我也使用了 bitmapfactory 方法，但它仍然给出了内存不足的错误。请给我解决方案。

# foreign-keys - 如何防止反序列化期间运行一段代码？

> ID：15983765
> 
> 赞同：0
> 
> 时间：2013-04-13T03:07:20.663
> 
> 标签：foreign-keys, deserialization, code-first, postsharp

我有以下代码利用 PostSharp 在设置其导航属性（用 ForeignKeyAttribute 标记）时自动设置属性（外键）。

反序列化大量实体时代码非常慢，所以我想知道是否有任何方法可以阻止代码在反序列化期间运行。

代码中仍有一些漏洞，我仍在处理它，但我首先在断开连接的环境中使用实体框架代码，并且没有 dbcontext 为我处理这个问题。

```
[Serializable]
public class ForeignKeySynchronisationAttribute : LocationInterceptionAspect
{
    public override void OnSetValue(LocationInterceptionArgs args)
    {
        try
        {
            var foreignKeyIdSet = false;
            var entity = args.Instance;
            var propertyInfo = args.Location.PropertyInfo;

            if (typeof(BaseEntity).IsAssignableFrom(propertyInfo.PropertyType))
            {
                // First look for metadata defined ForeignKeyAttribute
                var metadata =
                    entity.GetType()
                          .GetCustomAttributes(typeof(MetadataTypeAttribute), true)
                          .OfType<MetadataTypeAttribute>()
                          .FirstOrDefault();

                if (metadata != null)
                {
                    var metadataProperty = metadata.MetadataClassType.GetProperty(propertyInfo.PropertyType.Name);

                    if (metadataProperty != null)
                    {
                        var foreignKeyAttribute = metadataProperty.GetCustomAttributes<ForeignKeyAttribute>().First();

                        if (foreignKeyAttribute != null)
                        {
                            var foreignKeyIdPropertyInfo = entity.GetType().GetProperty(foreignKeyAttribute.Name);

                            foreignKeyIdPropertyInfo.SetValue(entity, ((BaseEntity)args.Value).PrimaryKey);
                            foreignKeyIdSet = true;
                        }
                    }
                }

                // Then look for normally defined ForeignKeyAttribute
                if (!foreignKeyIdSet)
                {
                    var foreignKeyAttribute = propertyInfo.GetCustomAttributes<ForeignKeyAttribute>().First();

                    if (foreignKeyAttribute != null)
                    {
                        var foreignKeyIdPropertyInfo = entity.GetType().GetProperty(foreignKeyAttribute.Name);
                        foreignKeyIdPropertyInfo.SetValue(entity, ((BaseEntity)args.Value).PrimaryKey);
                    }
                }
            }
        }
        catch (Exception)
        {
            throw;
        }
        finally
        {
            base.OnSetValue(args);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:05:41.797

请注意，我已经通过不同的方法完成了我所需要的。

干杯

克雷格

# java - 用对象填充数组列表，导致列表中的所有元素都相同

> ID：15983766
> 
> 赞同：0
> 
> 时间：2013-04-13T03:07:33.497
> 
> 标签：java

我试图用从代表点的文本文件中读取整数（每行两个整数）创建的对象填充 arrayList。我正在尝试循环执行此操作。ArrayList 似乎填满了，但是当我打印出来之后，每个索引中的所有元素都与添加到 ArrayList 的最后一个元素相同。这似乎与指向对象的每个 arrayList 索引有关（我的新手猜测）。我必须为每个 arrayList 条目创建一个唯一的对象吗？有没有一种简单的方法可以添加到此代码中来做到这一点？

```
public class Point2DDemo extends Point2D<Double>
{
    ArrayList<Point2DDemo> Points = new ArrayList<Point2DDemo>(7);

    /**
     * Constructor for objects of class Point2DDemo
     */
    public Point2DDemo()
    {

    }

    public Point2DDemo(double first, double second)
    {
        setFirst(first);
        setSecond(second);
    }

    public void putPair(double point1, double point2){
        this.setFirst(point1);
        this.setSecond(point2);
    }

    /**
     * 
     * 
     * @param  y   a sample parameter for a method
     * @return     the sum of x and y 
     */
    public void createList()
    {
        FileIO readFile = new FileIO();
        readFile.openInputFile();
        String pointLine = null;

        Point2DDemo newPoints = new Point2DDemo();

        StringTokenizer stringSplit = null;

        while(readFile.hasInputLine())
        {

           pointLine = readFile.readInputLine();
           stringSplit = new StringTokenizer(pointLine);

           double pointX = Double.parseDouble(stringSplit.nextToken());
           double pointY = Double.parseDouble(stringSplit.nextToken());

           newPoints.putPair(pointX, pointY);

           Points.add(newPoints);

        }
        for(int i = 0; i < Points.size(); i++)
         System.out.println(Points.get(i));

         readFile.closeInputFile();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:22:20.510

显然，您在整个代码中只有一个`Point2DDemo`对象。`newPoint`在您的 while 循环中，您正在用不同的值更改同一个 newPoint，它最终有一对值。

你应该把`Point2DDemo newPoints = new Point2DDemo();`INTO while 循环：

```
public void createList()
{
    FileIO readFile = new FileIO();
    readFile.openInputFile();
    String pointLine = null;

    StringTokenizer stringSplit = null;

    while(readFile.hasInputLine())
    {

       Point2DDemo newPoints = new Point2DDemo();
       pointLine = readFile.readInputLine();
       stringSplit = new StringTokenizer(pointLine);

       double pointX = Double.parseDouble(stringSplit.nextToken());
       double pointY = Double.parseDouble(stringSplit.nextToken());

       newPoints.putPair(pointX, pointY);

       Points.add(newPoints);

    }
    for(int i = 0; i < Points.size(); i++)
     System.out.println(Points.get(i));

     readFile.closeInputFile();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:23:24.953

您当前所做的只是重复设置单个 Point2DDemo 的值并将对它的多个引用添加到`ArrayList`.

要回答您的问题：是的，您需要为每组点创建一个新对象。

就像是：

```
Point2D point = new Point2D( xPoint, yPoint ); 
```

应该做。（这段代码不会像写的那样工作，但会让你朝着正确的方向前进。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:24:14.940

发生的情况是您将数组列表填充`references`到**同一个**对象。

在您的循环中，您需要为每次迭代创建**新的。** `newpoints`

这些方面的东西：

```
// Outside of the lopp
Pont2DDemo newpoints; 
```

 ````
// inside the loop
newpoints = new Point2DDemo();
newPoints.putPair(pointX, pointY);
Points.add(newPoints); 
````

# mysql - 从xcode中的mysql查询解析整数

> ID：15983768
> 
> 赞同：0
> 
> 时间：2013-04-13T03:08:29.653
> 
> 标签：mysql, objective-c, integer

我想按照下面的调用从 mysql 调用中获取一个整数，然后比较该值是 0 还是 1，我似乎对 NSSTRING 和 NURL 有问题...请帮助

当我将 mysql 设置为 value = 1 时，我仍然没有得到 NSLOG 的输出

```
 NSURL *database_flag_query;
 NSString *database_flag;

database_flag_query = [NSURL URLWithString: [NSString stringWithFormat: @"http://192.168.0.20/iqkradio_stream_ip.php"]];
database_flag = [NSString stringWithContentsOfURL:database_flag_query encoding:NSASCIIStringEncoding error:&error];

if([database_flag isEqualToString: @"1"])
{NSLog(@"flag = 1");} 
```

新代码

```
database_flag_query = [NSURL URLWithString:@"http://192.168.0.20/iqkradio_stream_ip.php"];
database_flag = [NSString stringWithContentsOfURL:database_flag_query encoding:NSASCIIStringEncoding error:&error];
NSLog(database_flag);
if([database_flag isEqualToString: @"1"])
{NSLog(@"flag is set");} 
```

这也是我的mysql查询

```
mysql_select_db("qkradio", $con);
$result = mysql_query("select flag from iqkradio" );
while($row = mysql_fetch_array($result)) {
echo $row['flag']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:02:15.133

根据评论，您在输出末尾添加了一些额外的空格/换行符。

您可以按如下方式对其进行修剪：

```
database_flag = [NSString stringWithContentsOfURL:database_flag_query encoding:NSASCIIStringEncoding error:&error];
if (database_flag) {
    database_flag = [database_flag stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSLog(@"database_flag = '%@'", database_flag);
    if ([database_flag isEqualToString: @"1"]) {
        NSLog(@"flag is set");
    }
} else {
    NSLog(@"Error: %@", error);
} 
```

# android - 我收到错误“消费者关闭输入通道”ES 1.1

> ID：15983770
> 
> 赞同：0
> 
> 时间：2013-04-13T03:08:45.313
> 
> 标签：android, runtime-error, opengl-es-1.1

我被这个错误难住了：

```
.MainActivity (server)' ~ Consumer closed input channel or 
an error occurred.  events=0x8 
```

项目编译并开始运行，我查看了其他人有此错误，有时当您的绘图超出可接受范围时似乎会发生此错误，但我在代码中找不到任何错误。

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.opengles.GL10;
import javax.microedition.khronos.opengles.GL11;

class Square {
public Square()
{
    float vertices[] =
    {
        -1.0f,  1.0f, 1.0f,
         1.0f,  1.0f, 1.0f,
         1.0f, -1.0f, 1.0f,
        -1.0f, -1.0f, 1.0f,

        -1.0f,  1.0f, -1.0f,
         1.0f,  1.0f, -1.0f,
         1.0f, -1.0f, -1.0f,
        -1.0f, -1.0f, -1.0f
    };

    byte maxColor = (byte)255;

    byte colors[] =
    {
        maxColor,        maxColor,       0,maxColor,
        0,       maxColor,maxColor,maxColor,
        0,              0,       0,maxColor,
        maxColor,       0,maxColor,maxColor,

        maxColor,       0,       0,maxColor,
        0,       maxColor,       0,maxColor,
        0,              0,maxColor,maxColor,
        0,              0,       0,maxColor,

    };

    //byte indices[] =
    //{
    //  0, 3, 1,
    //  0, 2, 3
    //};

    byte tfan1[] =
    {
        1,0,3,
        1,3,2,
        1,2,6,
        1,6,5,
        1,5,4,
        1,4,0
    };

    byte tfan2[] =
    {
        7,4,5,
        7,5,6,
        7,6,2,
        7,2,3,
        7,3,0,
        7,0,4
    };

    ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    mFVertexBuffer = vbb.asFloatBuffer();
    mFVertexBuffer.put(vertices);
    mFVertexBuffer.position(0);

    mColorBuffer = ByteBuffer.allocateDirect(colors.length);
    mColorBuffer.put(colors);
    mColorBuffer.position(0);

    mIndexBuffer = ByteBuffer.allocateDirect(tfan1.length);
    mIndexBuffer.put(tfan1);
    mIndexBuffer.position(0);

    mTfan2 = ByteBuffer.allocateDirect(tfan2.length);
    mTfan2.put(tfan2);
    mTfan2.position(0);
}

public void draw(GL10 gl)
{
    gl.glVertexPointer(3,  GL11.GL_FLOAT, 0, mFVertexBuffer);
    gl.glColorPointer(4,  GL11.GL_UNSIGNED_BYTE, 0, mColorBuffer);
    gl.glDrawElements(GL10.GL_TRIANGLE_FAN, 6*3, GL10.GL_UNSIGNED_BYTE, mTfan1);
    gl.glDrawElements(GL10.GL_TRIANGLE_FAN, 6*3, GL10.GL_UNSIGNED_BYTE, mTfan2);

    gl.glFrontFace(GL11.GL_CCW);
}

private FloatBuffer mFVertexBuffer;
private ByteBuffer mColorBuffer;
private ByteBuffer mIndexBuffer;
private ByteBuffer mTfan1;
private ByteBuffer mTfan2;

} 
```

然后这段代码：

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLSurfaceView;
import java.lang.Math;

public class SquareRenderer implements GLSurfaceView.Renderer 
{
public SquareRenderer(boolean useTranslucentBackground)
{
    mTranslucentBackground = useTranslucentBackground;
    mSquare = new Square();
}

public void onDrawFrame(GL10 gl)
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glClearColor(0.0f, 0.5f, 0.5f, 1.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glRotatef(mAngle,  0.0f,  1.0f,  0.0f);
    gl.glRotatef(mAngle,  1.0f,  0.0f,  0.0f);
    gl.glTranslatef(0.0f,(float)Math.sin(mTransY), -7.0f);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);

    mSquare.draw(gl);

    mTransY += 0.075f;
    mAngle +=  0.4;

}

@Override
public void onSurfaceChanged(GL10 gl, int width, int height) 
{
    gl.glViewport(0,0,width,height);

    float aspectRatio;
    float zNear = 0.1f;
    float zFar = 1000;
    float fieldOfView = 30.0f/57.3f;
    float size;

    gl.glEnable(GL10.GL_NORMALIZE);

    aspectRatio = (float)width/(float)height;
    // float ratio = (float) width / height;
    gl.glMatrixMode(GL10.GL_PROJECTION);

    size = zNear * (float)(Math.tan((double)(fieldOfView/2.0f)));

    gl.glFrustumf(-size, size, -size / aspectRatio, size / aspectRatio, zNear, zFar);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    // gl.glLoadIdentity();
    // gl.glFrustumf(-ratio, ratio, -1,1,1,10);
}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) 
{
    gl.glDisable(GL10.GL_DITHER);

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);

    if (mTranslucentBackground)
    {
        gl.glClearColor(0, 0, 0, 0);
    } else {
        gl.glClearColor(1, 1, 1, 1);
    }
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glEnable(GL10.GL_DEPTH_TEST);
}

private boolean mTranslucentBackground;
private Square mSquare;
private float mTransY;
private float mAngle;
} 
```

为了显示它，我使用了这个：

```
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.WindowManager;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    GLSurfaceView view = new GLSurfaceView(this);
    view.setRenderer(new SquareRenderer(true));
    setContentView(view);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T11:52:44.070

我发现它正在发生，因为我正在关闭模拟器，或者在程序运行之前它没有启动。

# php - php foreach 显示目录中的 img 和匹配的 txt 文件

> ID：15983771
> 
> 赞同：0
> 
> 时间：2013-04-13T03:08:56.200
> 
> 标签：php, foreach, filenames

我对PHP非常陌生。感谢您的耐心等待。

我有一个目录，其中包含大约 500 张图像并且还在不断增长，使用简单的 PHP 分解为页面，一次获取大约 20 张图像。

以前我使用下面的代码（一切正常）。它获取前 20 张图像并将它们显示在一个 600x300 像素的 DIV 中，其中一个徽标 DIV 固定在角落：

```
 $dir = 'photography/bnt/images/';
    $files = glob($dir.'*.jpg');
    for ($i=0; $i<=20; $i++)
    {
    $all = $files[$i];
    echo '<div class="sixbythree-image"><img src="'.$all.'" /><div class="sixbythree-logo"></div></div>';
    } 
```

我决定要为每个图像添加一个描述文件，并让它在徽标 DIV 旁边弹出。经过一番搜索，我找到[了这个答案](https://stackoverflow.com/questions/11231610/list-images01-png-and-descriptions01-txt-from-directory)并尝试按如下方式应用它：

```
 $dir = 'photography/bnt/images/';
    $files = glob($dir.'*.jpg');
    foreach (array_slice($files,0,20) as $all) {
    $filename = pathinfo($all, PATHINFO_FILENAME).'.htm';
    $description = file_exists($filename) ? file_get_contents($filename) : '';
    echo '<div class="sixbythree-image"><img src="'.$all.'" /><div class="sixbythree-logo"></div><div class="sixbythree-description">'.$description.'</div></div>';
    } 
```

图像显示正常，页面显示没有错误，但没有 .htm 文件（与图像命名相同）。我尝试了几种带有/不带扩展名的变体。什么都没有出现！我错过了什么？我究竟做错了什么？

如果这已被涵盖，我深表歉意，我可能对不同类型的解决方案不够熟悉，不知道要寻找什么。

太感谢了！

# functional-programming - 函数式编程类似于自修改代码吗？

> ID：15983777
> 
> 赞同：1
> 
> 时间：2013-04-13T03:09:39.960
> 
> 标签：functional-programming, self-modifying, purely-functional

似乎有时函数式程序中的代码接受其他代码（函数）作为参数并对其进行修改并将其返回以供执行。它似乎类似于自修改代码。这是否意味着函数式程序的紧凑性与允许极其紧凑的自修改程序的原因相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:36:02.987

Ernest Friedman-Hill 可能是正确的，这个问题不属于这里，但这里有一个答案：

我会说：不。

一种语言可以通过多种方式允许自修改代码。最灵活的方法是能够翻转内存中任意位置的任意位。（这是一个经典的故事：[梅尔的故事](http://catb.org/jargon/html/story-of-mel.html)。）但是自我修改的方法不需要表现出如此危险的自由。在 Common Lisp 中，很容易编写构建 Lisp 代码并对其进行评估的代码，但这一切都在 Lisp 的约束范围内，而且它不一定更紧凑。在 Java 中，您可以使用反射进行某些类型的“自我修改”，但这通常比常规 Java 使用更冗长。

另外，请记住，在某些类型的面向对象方法和函数式编程方法之间实际上有一条细线。两者都允许您将可执行的东西和数据打包在一起。OO 通过将方法附加到对象来做到这一点，而函数式语言通过使用闭包来捕获数据来做到这一点。因此，如果函数式语言是自修改的，那么 Java 也是。但是 Java 通常不被认为是一种自修改语言（反射除外），而且 Java 代码通常很冗长。（顺便说一下，Java 的设计者之一 Guy Steele 也是设计 Lisp 方言方案的人之一——一种比 Common Lisp 更纯粹的函数式语言——为了试验面向对象的编程！我相信这个想法是使用闭包构造不同的面向对象语言结构。）

警告：我已经有一段时间没有进行任何核心 Java 编程了，而且我可能不知道与这个问题相关的语言特性。

# php - 在php中用双反斜杠替换单反斜杠

> ID：15983782
> 
> 赞同：0
> 
> 时间：2013-04-13T03:10:56.790
> 
> 标签：php, backslash

我在 PHP 编程中遇到了一个奇怪的问题。在使用该`backtrace`函数获取 PHP 编译器正在使用的最后一个文件时。它会给我使用反斜杠的路径。我想将此字符串存储在数据库中，但 MySQL 会删除它们；我假设它在想我想逃离他们。

所以`C:\Path\To\Filename.php`最终会`C:PathToFileName.php`在数据库中。当我将这个问题发布到谷歌时，我发现许多其他人有同样的问题，但在许多不同的情况下。人们总是提出类似的建议：

```
$str = '\dada\dadda';
var_dump(str_replace('\', '\\', $str)); 
```

这样做的问题是，即使您将其放入某种循环中，您也只是不断将第一个替换`\`为`\\`. 所以它开始像`\`then `\\\`then `\\\\\`then etc... 直到它`\\\\\\\`用`\\\\\\\\\`这个巨大的字符串填充内存缓冲区。

如果其他人有，我对这个问题的解决方案是：

```
//$file = C:\Path\To\Filename.php

//Need to use \\ so it ends up being \
$fileArray = explode("\\", $file);

//take the first one off the array
$file = array_shift($fileArray);

//go thru the rest of the array and add \\\\ then the next folder
foreach($fileArray as $folder){
    $file .= "\\\\" . $folder;
}

echo $file
//This will give you C:\\Path\\To\\Filename.php 
```

因此，当它存储在数据库中时，它会显示为`C:\Path\To\Filename.php`.

如果其他人对此有更好的解决方案，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:34:47.923

您需要在`preg_replace`参数内“双重转义”它们（一次用于字符串，一次用于正则表达式引擎）：

```
$mystring = 'c:\windows\system32\drivers\etc\hosts';
$escaped = preg_replace('/\\\\/','\\\\\\\\',$mystring);

echo "New string is:  $escaped\n"; 
```

或者只有一次，如果你使用`str_replace`：

```
 $newstring = str_replace('\\','\\\\',$mystring);

 echo "str_replace : $newstring\n";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:28:18.057

```
mysql_real_escape_string('C:\Path\To\Filename.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T11:01:04.687

您可以使用正则表达式捕获组（）：

```
echo preg_replace('/([\\\])/', '${1}${1}', "\b is a metasequence");
// 3 backslahses

// outputs: \\b is a metasequence 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-27T04:29:09.640

愚蠢但对我有用。

```
$BS='\\\'; 
```

（你在 $BS 中放了一个双反斜杠，但实际上你只得到一个反斜杠。

```
$FullName = "C:".$BS.$BS."Path".$BS."To".$BS."FileName.php"; 
```

你应该得到 $FullName "C:\\Path\To\Filename.php"

# mysql - 使用 Wampserver 2.2 安装 Joomla 3.0

> ID：15983787
> 
> 赞同：0
> 
> 时间：2013-04-13T03:11:36.367
> 
> 标签：mysql, joomla

在将 XAMPP 用于开发目的几年后，我开始使用 Wamp。

我使用 phpMyAdmin 创建了一个名为“school”的数据库，创建了一个数据库用户“admin”和密码“admin”。

当我进入 Joomla 安装的第二页时，我输入了上述详细信息，包括主机名：Localhost，但收到一条错误消息“无法连接到数据库。连接器返回的编号：无法连接到 MySQL。”

我知道数据库一定有一些连接问题，但我正在摸索以找出它是什么。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T01:48:10.930

当您以管理员身份登录时，您可以从 phpMyAdmin 访问数据库吗？如果不是，您应该检查管理员的权限。授予管理员对该数据库的所有权限；默认的“使用”权限是不够的。如有必要，您可以在之后减少权限。

如果您可以从 phpMyAdmin 以管理员身份访问它，请在 phpMyAdmin 的权限页面上仔细检查管理员的主机是“localhost”，因为您告诉 Joomla。

安装 Joomla 时，还可以尝试将 MySQL 和 MySQLi 作为数据库类型。

# symfony-1.4 - 使用 symonfy 1.4 使用新标签打开生成的 pdf

> ID：15983789
> 
> 赞同：0
> 
> 时间：2013-04-13T03:11:49.890
> 
> 标签：symfony-1.4, tcpdf

我正在使用 symfony 1.4。我有申请清单。从那里我生成了一个 pdf 动作。生成后，我想用新标签或窗口打开 pdf。我怎么能那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:09:22.537

如果您想在单击链接后在新窗口/选项卡中显示生成的 PDF，请尝试：

```
<a href="<?php echo url_for('@your_action_route') ?>" target="_blank">PDF</a> 
```

或者

```
<?php echo link_to('PDF','@your_action_route',array('target' => '_blank')) ?> 
```

* * *

如果您想从操作中回显链接：

```
sfApplicationConfiguration::getActive()->loadHelpers(array('Url')); 
```

然后根据需要使用`link_to`或`url_for`（上面的示例）。

* * *

如果您想通过操作提供 PDF，而不是作为下载：

新建路由

```
pdf:
  url: /pdf/:filename.pdf/*
  param: { module: mymodule, action: show } 
```

然后在 mymodule/actions/actions.class.php 中创建这个动作：

```
 public function executeServepdf(sfWebRequest $request)
  {
    $this->setLayout(false);
    sfConfig::set('sf_web_debug', false);

    $pdf = sfConfig::get('sf_web_dir').
            DIRECTORY_SEPARATOR.
            'uploads'.
            DIRECTORY_SEPARATOR.
            $request->getParameter('filename').'.pdf';

    $this->forward404Unless(file_exists($pdf));

    $this->getResponse()->clearHttpHeaders();
    $this->getResponse()->setHttpHeader('Pragma: public', true);
    $this->getResponse()->setContentType('application/pdf');
    $this->getResponse()->sendHttpHeaders();
    $this->getResponse()->setContent(readfile($pdf));

    return sfView::NONE;
  } 
```

现在，如果您将 PDF 放入 web/uploads/your_file.pdf 目录并输入如下 URL：`http://yoursite/pdf/your_file.pdf` 您将直接在浏览器窗口中显示您的 PDF。

要将其作为新窗口/选项卡打开，请使用第一个示例中指出的元素`target="_blank"`属性。`<a>`

此外，也许这个网站会有所帮助：[http](http://www.symfony-zone.com/wordpress/2009/08/03/serving-pdf-files-through-symfony-controllers/) ://www.symfony-zone.com/wordpress/2009/08/03/serving-pdf-files-through-symfony-controllers/我使用了它的例子。

# java - 具有相同字段的多个表，约束失败错误

> ID：15983790
> 
> 赞同：0
> 
> 时间：2013-04-13T03:11:55.627
> 
> 标签：java, android, database, sqlite

我正在创建 3 个包含以下字段的表，问题是在表 2 和表 3 中插入​​数据时出现约束失败错误

```
 TABLE 1                                           TABLE 2

|_id| name | class | sec | roll|               |_id| class | sec | doa |

           TABLE 3
|_id | class| sec | roll | aop | doa | 
```

这是生成表格的代码

```
public static final String KEY_RID = "row_id";
public static final String KEY_NAME = "student_name";
public static final String KEY_ROLL = "student_roll";
public static final String KEY_SEC = "student_sect";
public static final String KEY_CLASS = "student_class";
public static final String KEY_DOA = "dayofattend";
public static final String KEY_AOP = "student_status";

private static final String DATABASE_NAME = "StudendtAttend";
private static final String DATABASE_TABLE = "AttendTable";
private static final String DATABASE_TABLE2 = "AttendDate";
private static final String DATABASE_TABLE3 = "AttendAop";

private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub

    }

    // Create Database
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_RID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_ROLL
                + " TEXT NOT NULL, " + KEY_NAME + " TEXT NOT NULL, "
                + KEY_CLASS + " TEXT NOT NULL, " + KEY_SEC
                + " TEXT NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE2 + " (" + KEY_RID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_CLASS
                + " TEXT NOT NULL, " + KEY_SEC + " TEXT NOT NULL, "
                + KEY_DOA + " TEXT NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE3 + " (" + KEY_RID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_CLASS
                + " TEXT NOT NULL, " + KEY_SEC + " TEXT NOT NULL, "
                + KEY_ROLL + " TEXT NOT NULL, " + KEY_DOA
                + " TEXT NOT NULL, " + KEY_AOP + " TEXT NOT NULL);");
    }

// Insert Values into DB
public long populateDB(String roll, String name, String sec, String clas) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_ROLL, roll);
    cv.put(KEY_NAME, name);
    cv.put(KEY_CLASS, clas);
    cv.put(KEY_SEC, sec);
    ourDatabase.insert(DATABASE_TABLE, null, cv);
    populateDB2(roll, name, sec, clas );
    return (0);

}
public long populateDB2(String roll, String name, String sec, String clas) {
    ContentValues cv1 = new ContentValues();
    cv1.put(KEY_CLASS, clas);
    cv1.put(KEY_SEC, sec);
    ourDatabase.insert(DATABASE_TABLE2, null, cv1);

    populateDB3(roll, name, sec, clas );
    return 0;

}
public long populateDB3(String roll, String name, String sec, String clas) {
    ContentValues cv2 = new ContentValues();
    cv2.put(KEY_ROLL, roll);
    cv2.put(KEY_CLASS, clas);
    cv2.put(KEY_SEC, sec);
    ourDatabase.insert(DATABASE_TABLE3, null, cv2);
    return(0);

} 
```

显然我做错了什么，我不太明白是什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:32:28.607

您声明所有列不为空，并且当您插入时，`populateDB2`您仅在 2 列中插入值，其他列则为空，因此约束失败。
还有为什么 3 个表，如果这些都是你的列，那么 1 个表就可以了。

# php - 更改表格列号

> ID：15983791
> 
> 赞同：0
> 
> 时间：2013-04-13T03:11:58.240
> 
> 标签：php, html, magento, html-table

我的 Magento 商店中有一些代码可以在 2 列表中动态显示类别。如何将此表更改为 1 列而不是 2 列？我似乎找不到更改列号的部分。

```
<table width="100%" >
<colgroup>
<?php
$wCol = (int)($gWidth / $colCount); 
$oneTdWidth = ($gWidth - $offset * ($colCount - 1)) / $colCount;
for ($i = 0; $i < $colCount; $i++) { ?>
    <col width="<?php echo $oneTdWidth; ?>">
<?php } ?>
</colgroup>
<tbody>
<?php  
$catIndex = 0;
foreach ($map as $type => $items) {
    foreach ($items as $row) {
        ?><tr><?php 
        foreach ($row as $item) {
            echo $this->renderArray($item, '<td rowspan="%rowspan%" colspan="%colspan%"">');
            switch ($item['type']) {
                case 1:
                    if (isset($cats[$catIndex])) {
                        $text = 'Shop';
                        $class = '';
                        $nameCat = $cats[$catIndex]->getName();
                        if (($colCount / $item['colspan']) >= 3) {
                            $text = '&nbsp;';
                            $class = ' shop-btn-min';
                            $nameCat = substr($cats[$catIndex]->getName(), 0, 35);
                            if (strlen($cats[$catIndex]->getName()) > 35) {
                                $nameCat .= '...';
                            }
                        }
                        //$tdWidth = (int)($oneTdWidth * $item['colspan'] + $offset * ($item['colspan'] - 1));
                        echo $this->renderBoutique(
                            $cats[$catIndex], 
                            '<div class="shop" style="background: url(%image_url%)>
                              <a href="%url%">
                                <div class="brandholder">
                                    <div class="title">
                                        <h2>' . $nameCat . '</h2><span class="count-down hasCountdown">Ends in</span>
                                        <span class="count-down"></span>
                                        <span class="cntdown-source" style="display: none;">%privatesale_date_end_left%</span> 
                                    </div>
                                    <div class="shop-btn'. $class . '">'.$text.'</div>
                                </div>
                              </a>
                            </div>'); 
                        $catIndex++; 
                    }
                    break;
                case 2:
                    $banner = Mage::helper('privatesales/list')->getActiveBanner($item, $type);
                    if ($banner) {
                        //$tdWidth = (int)($oneTdWidth * $item['colspan'] + $offset * ($item['colspan'] - 1));
                        echo $this->renderBanner(
                            $banner,
                            '<div class="shop" style="background:url(%image_url%); height: %image_height%px;"><a href="%href%"></a></div>'
                        );
                    }
                    break;
            } 
            echo '</td>';
        }
        ?></tr><?php 
    }
}
?>  
    <!-- FIXER -->
    <tr class="picha" style="visibility: hidden;">
    <?php 
    for ($i = 0; $i < $colCount; $i++) { ?>
        <td  class="no-repeat shop"></td>
    <?php } ?>
    </tr>       
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:12:26.387

正确的答案是

```
$colCount = 1 
```

# primefaces - 使用primepush在liferay中创建shoutbox（聊天室）

> ID：15983792
> 
> 赞同：0
> 
> 时间：2013-04-13T03:12:02.697
> 
> 标签：primefaces, liferay, liferay-6, chatroom

我想为我的社区创建一个喊话箱（或聊天室），那么有什么解决方案吗？

**演示图片：**

![在此处输入图像描述](https://i.stack.imgur.com/ZRxt5.png)

预先感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:34:52.267

提供了一个 PrimeFaces Ajax Push 演示 portlet，可以在 issue [FACES-1421](http://issues.liferay.com/browse/FACES-1421)中找到。它不演示聊天，但演示了聊天所需的 Ajax Push 机制。icefaces3 [-chat-portlet](http://www.liferay.com/community/liferay-projects/liferay-faces/demos#icefaces3-chat-portlet)将是开始开发此类 portlet 的好地方。

# linux - 如何建立双向 SSH 隧道

> ID：15983795
> 
> 赞同：22
> 
> 时间：2013-04-13T03:12:50.817
> 
> 标签：linux, ssh, remote-server, bidirectional, ssh-tunnel

是否可以通过 SSH 隧道执行以下操作...

1.  Host-1 与远程服务器建立 SSH 连接
2.  我希望登录远程服务器并在 Host-1 上通过 SSH 执行命令

Host-1 是我无法直接访问的设备。Host-1 设置为通过 cron 自动建立到远程服务器的 SSH 连接。在 Host-1 与远程服务器建立 SSH 连接的任何时候，我都希望登录到远程服务器以便通过 SSH 对 Host-1 执行维护。

如果可能的话，我正在寻找一个如何工作的例子。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-13T03:42:34.020

像这样：

```
host1$  ssh -N -R 8822:localhost:22 remote.host.com 
```

可选的 -N 表示“不执行命令”（有助于防止因放置远程 shell 而引起的事故。）

现在从远程，您可以像这样通过 SSH 连接到 host1：（远程端口 8822 转发到 host1，但仅在环回接口上。）

```
remote$ ssh -p 8822 localhost 
```

对于额外的信用，您可以将转发*导出*到全世界，允许任何人通过点击远程的端口 8822 来访问 host1。（注意额外的初始冒号）

```
host1$  ssh -N -R :8822:localhost:22 remote.host.com 
```

# ios - UIWebView 可以与应用程序交互（通信）吗？

> ID：15983797
> 
> 赞同：10
> 
> 时间：2013-04-13T03:13:10.287
> 
> 标签：ios, objective-c, cocoa-touch

我去使用 UIWebView 来显示动态内容，而不是使用 UI 元素在本地进行。是否可以通过简单地点击 UIWebView 内的链接来触发本机应用程序功能？示例：点击然后切换当前视图的链接？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-13T03:22:46.817

是的，这是可能的。在您的 html 中，您编写一个 JS 来加载一个带有虚假方案的 URL，例如

```
window.location = "request_for_action://anything/that/is/a/valid/url/can/go/here"; 
```

然后，在您的 iOS 代码中，为您的 webView 分配一个委托，并在您的委托中处理

```
webView:shouldLoadWithRequest:navigationType 
```

有类似的东西

```
if( [request.URL.scheme isEqualToString: @"request_for_action"] )
{
   // parse your custom URL to extract parameter, use URL parts or query string as you like
   return NO; // return NO, so webView won't actually try to load this fake request
} 
```

--

顺便说一句，你可以做另一种方式，让 iOS 代码通过使用调用 html 中的一些 JS 代码

```
NSString* returnValue = [self.webView stringByEvaluatingJavaScriptFromString: "someJSFunction()"]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T03:15:25.193

是的！当用户按下链接时，您会在 Web 视图的委托中听到它，然后可以做任何您想做的事情。强大的东西可以通过这种方式完成。

发送 Web 视图的委托`webView:shouldStartLoadWithRequest:navigationType:`。你分析发生了什么，并随心所欲地做出回应。为了防止 web 视图试图跟随链接（这可能完全是假的，毕竟），只需返回 NO。

在这个来自 TidBITS News 应用程序的示例中，我在网页中有一个链接，该链接使用了一个完全虚构的`play:`方案。我在委托中检测到这一点并播放：

```
- (BOOL)webView:(UIWebView *)webView
        shouldStartLoadWithRequest:(NSURLRequest *)r
        navigationType:(UIWebViewNavigationType)nt {
    if ([r.URL.scheme isEqualToString: @"play"]) {
        [self doPlay:nil];
        return NO;
    }
    if (nt == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:r.URL];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T03:15:59.023

实现`UIWebViewDelegate`方法`webView:shouldStartLoadWithRequest:navigationType:`。

根据需要处理 navigationType 和请求。

# javascript - 将对象转换为由字符串或 typeof(number[]) 给出的类型

> ID：15983801
> 
> 赞同：0
> 
> 时间：2013-04-13T03:13:45.423
> 
> 标签：javascript

我喜欢转换由字符串给出的类型，因为我想将一串数字转换为一个数字数组。

```
var myStringType = "number[]";
var myString = "0, 0, 0";

var myStringArray = myString.Split(","); <- these array need to be a array;
var myNumbersArray = ConvertToAnyByString(myStringArray, myStringType); 
```

如果上述方法不可行，我可以通过知道类型进行转换。是否有类似与 typeof(number[]) 比较的东西

***更新：我认为这是一个误解。我不知道哪种类型会传递给我的函数。我需要类型检查或通过字符串信息将其转换为哪种类型。并且没有办法在 javascript 中原生地做到这一点，因为没有 arrayOfStrings 类型，只有一个数组。但我可以制作一个辅助函数来手动执行此操作。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:21:10.303

好的。尝试这个 -

```
var str = '0,0,0';
var arr = str.split(','); // ['0', '0', '0']
var int_arr = arr.map(function(el) {return parseInt(el, 10);}); // [0, 0, 0] 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:34:11.273

根据您的评论，您可以执行以下操作（没有`.map`或 shim for `.map`）：

```
var str = '0,1,8';
var arr = str.split(','), L=arr.length;
          while(L--){arr[L]=Number(arr[L]);}
//now arr contains numbers. 
```

这`Number(arr[L]);`是“有效负载”，但您也可以使用（取决于您需要什么）：
`parseInt(arr[L]);`或者`parseFloat(arr[L]);`甚至`arr[L]*1;`只是`+arr[L];`
作为有效负载。它只是让你的船漂浮的东西。

测试：`alert(typeof arr[1]); // number`

* * *

但要真正回答您最初提出的问题*（将数组中的值转换为由字符串指定的不同类型）*，我提供了这个简单的示例来*说明*如何*做到*这一点：

```
var convertArrToAnyByString = function(arr,converTo,rad){
   var L = arr.length;
   rad = rad||10;  // optional, defaults to 10 as radix
   switch(converTo){
     case 'number':
        while(L--){arr[L] = Number(arr[L]);}
        break;
     case 'string':
        while(L--){arr[L] = arr[L].toString(rad);}
        break;
     default:
        arr=false;
   }
   return arr;
};

var str = '0,1,8';
var arr = str.split(','); 

// testing:
alert(typeof arr[1]);  //arr[1] should be string by default
arr=convertArrToAnyByString(arr,'number');
alert(typeof arr[1]);  // number
arr=convertArrToAnyByString(arr,'string');
alert(typeof arr[1]);  // string again
alert(arr[2]);         // still 8 
```

您可以通过添加类型甚至错误检查来轻松扩展此示例。

祝你好运！

# c++ - 什么是模板 成语？

> ID：15983802
> 
> 赞同：22
> 
> 时间：2013-04-13T03:13:47.730
> 
> 标签：c++, templates, idioms, typename, c++14

我正在阅读[这篇](http://www.meetingcpp.com/index.php/br/items/a-look-at-c14-and-beyond-papers-part-4.html)文章并试图了解[N3601](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3601.html)是关于什么的。它说这个成语在网络搜索中出现了很多，但我找不到任何东西。是什么

```
template<typename T, T t> 
```

成语，它解决了什么问题，它是如何使用的，什么是隐式模板参数，以及该提案旨在解决什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-13T03:28:51.463

正在解决的问题是从模板非类型参数中推断类型。

鉴于：

```
template<typename T> void foo(T);
template<typename T, T> void bar(); 
```

可以推导出`T`for `foo`（例如，`foo(10)`将导致`T`推导为 be `int`），但无法推导`T`for `bar`（`bar<10>()`将根本无法编译，您必须将其写为`bar<int,10>()`）。

[N3601](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3601.html)建议通过引入语法来解决这个问题：

```
template<using typename T, T> void bar(); 
```

这将允许`bar<10>()`编译并导致类型`T`被推断。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T03:29:58.633

论文介绍误导：成语其实是

```
 template <typename T, T t> 
```

它表示一个依赖于类型`T`和该类型值`t`的模板。这个符号有点重，因为在大多数情况下，类型可以从值本身推导出来。

例如

```
// the current definition notation
template <typename T, T t> void f() { t.f(); };

//// the proposed definition notation
//// the parameter t depends on an implicit typename parameter T
// template <using typename T, T t> void f() { t.f(); };

struct foo {
    void f(){ 
        // some computation
    }
};

foo bar;

int main(){
    // the current instantiation notation
    f<foo,bar>(); 
    //// the proposed instantiation notation 
    //// we know that bar is of type foo, so we don't need to specify it
    // f<bar>();
} 
```

该提议是关于引入一些“语法糖”以使符号更易于编写。

此外，上面给出的示例在其描述中是微不足道的（并且可能是错误的，因为模板参数需要是`constexpr`），但是本文描述了当前符号可能变得非常复杂的几种情况，从而降低了可读性和整体编程的易用性。

# r - `Rprofile`、`Renviron` 和 `Rprofile.site`、`Renviron.site` 有什么区别？

> ID：15983803
> 
> 赞同：17
> 
> 时间：2013-04-13T03:13:48.747
> 
> 标签：r

在我的电脑中：

1.  `Renviron`/etc/R中有三个文件 `Rprofile.site`，`Renviron.site`我在任何地方都找不到`Rprofile`。这是一个适当的状态吗？

2.  beetwen和`Rprofile`,有什么区别？ `Renviron``Rprofile.site``Renviron.site`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T20:37:58.477

该文件的名称是`.Rprofile`而不是`Rprofile`. 在 SO 中搜索 '[r] .rprofile' 并找到此答案后，我得到了此代码：[找到生成默认选项的“.Rprofile”文件](https://stackoverflow.com/questions/13735745/locate-the-rprofile-file-generating-default-options)

```
file.path(getwd(), ".Rprofile") 
[1] "/Users/davidwinsemius/.Rprofile" 
```

大多数操作系统将隐藏“点文件”/“系统文件”，除非您强制它们变得可见。

您将找到`?Startup`帮助页面中描述的各种文件。该`.Renviron`文件应该描述系统资源的设置和位置；从`?启动

> 站点或用户环境文件中的行应该是以 # 开头的注释行，或者格式为 name=value 的行。后者将环境变量名称设置为 value，覆盖现有值。

因此，键值对将用于将这些对推送到系统环境变量表中。`Rprofile.site`应该包含为网络上的每个人创建起始条件的代码，可能是共享选项，例如设置`stringsAsFactors=FALSE`，

...并`.Rprofile`包含单个用户设置和控制的代码，可能是用户定义的函数或要在启动时加载的包。

Josh 引用了 @flodel 的一个值得研究的答案：[找到生成默认选项的“.Rprofile”文件](https://stackoverflow.com/questions/13735745/locate-the-rprofile-file-generating-default-options/13736073#13736073)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-26T22:44:25.590

我发现[这篇文章](https://rviews.rstudio.com/2017/04/19/r-for-enterprise-understanding-r-s-startup/)对于回答 OP 的第二个问题很有用，“Rprofile、Renviron 和 Rprofile.site、Renviron.site 有什么区别？” 本质上，Rxxx.site 包含特定于站点（即当前计算机）的设置，而 .Rxxx 包含特定于项目或用户的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-09T21:59:38.460

我有一个类似于 OP 的问题 2 的问题，但特别关注 .Rprofile 和 Rprofile.site 文件之间的区别。

根据我收集到的内容`?Startup`以及关于 SO 的其他一些答案，这是我对这种差异的理解：

Rprofile.site 是站点范围的启动配置文件 - 它在 .Rprofile 之前被搜索并运行，它将覆盖基本包。.Rprofile 是一个用户启动配置文件，它在 Rprofile.site 之后被搜索和获取，并将内容加载到工作区中，而不是覆盖基本包。

我还发现[这里的答案](https://stackoverflow.com/questions/13735745/locate-the-rprofile-file-generating-default-options/13736073#13736073)有助于理解差异。

# java - jsf requiredMessage css

> ID：15983805
> 
> 赞同：1
> 
> 时间：2013-04-13T03:14:04.327
> 
> 标签：java, css, jsf, jsf-2

我想将样式应用于我的验证消息，因为到目前为止，它们默认为红色，并应用在页面的左下方。例如，当用户输入一个空的用户名字段时，会出现“用户名是必需的”消息，但它前面有一个项目符号并且它是红色的。我的一些输入字段上也有自定义验证器。

```
<h:panelGrid class="grid" columns="2" id="regPanel">
        <h:form>

            <h:outputLabel class="outputLabel" value="Username"/>
            <h:inputText class="inputText" id="userNameInputText"
                         value="#{regBean.userName}" required="true"
                         requiredMessage="Username is required"  >

            </h:inputText>  .... more form inputs with required fields

        </h:form>

    </h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:58:07.520

首先，您必须在要呈现消息的视图中放置`h:messages`或标记。`h:message`使用`h:messages`，页面的所有消息都呈现在一个中央列表中。`h:message`你可以像这样渲染连接到一个组件的消息：

```
<h:inputText id="long" value="#{bean.longValue}"/>
<h:message for="long"/> 
```

可以使用 和 上的各种属性更改`h:messages`样式`h:message`。有一些属性可以直接设置样式或为每个消息严重性（信息、警告、错误、致命）设置一个样式类。样式可以这样设置：

```
<h:message for="long" warnStyle="color: green" infoStyle="color: blue"
    errorClass="errorMsg" fatalClass="fatalMsg"/> 
```

样式类的“重用”没有标准方法。您必须将它们放在每个标签上而无需修改。但是有几种方法可以实现：

1.  为具有默认样式的消息构建复合组件
2.  替换消息组件的渲染器以支持默认样式
3.  使用 PrimeFaces 之类的组件库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:12:37.000

您可以使用消息，Primefaces 的咆哮。并且您可以获得 css 类的验证消息并覆盖它。例如：我更改了咆哮消息的 css：

```
<style type="text/css">
                .ui-growl-image.ui-growl-image-error{
                    background-image: none !important;
                    background-color: navy;
                }
            </style> 
```

演示： http: [//www.primefaces.org/showcase/ui/messages.jsf](http://www.primefaces.org/showcase/ui/messages.jsf)

如果使用 JSF 的默认消息，则必须为每个组件添加 css 类或创建自己的组件。

# c++ - 基于 OpenCV C++ 光流的分割代码抛出异常

> ID：15983811
> 
> 赞同：3
> 
> 时间：2013-04-13T03:14:38.823
> 
> 标签：c++, visual-studio-2010, exception, opencv, opticalflow

从 SO 答案之一，使用光流进行分割需要**密集的光流**。我修改[了这段代码](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/fback.cpp?rev=2271)。它使用[calcOpticalFlowFarneback](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html)函数来计算两个连续帧之间的密集流场。

根据[此处](https://stackoverflow.com/questions/15399541/optical-flow-based-segmentation)和[此处](https://stackoverflow.com/questions/10329340/opencv-how-to-track-objects-after-optical-flow)的 SO 答案，我尝试使用

> sqrt(位移_in_x^2 + 位移_in_y^2)
> 
> 该函数将位移返回为 CV_32FC2

这是我的代码：-

```
#include "stdafx.h"

#include "cv.h"
#include "highgui.h"
#include <iostream>

using namespace cv;
using namespace std;

void drawOptFlowMap(const Mat& flow, Mat& cflowmap, int step,
                    double scale, const Scalar& color)
{
    for(int y = 0; y < cflowmap.rows; y += step)
        for(int x = 0; x < cflowmap.cols; x += step)
        {
            const Point2f& fxy = flow.at<Point2f>(y, x);
            line(cflowmap, Point(x,y), Point(cvRound(x+fxy.x), cvRound(y+fxy.y)),
                 color);
            circle(cflowmap, Point(x,y), 2, color, -1);
        }
}

int main()
{
    VideoCapture cap("vip.avi");

    if( !cap.isOpened() )
        return -1;

    Mat prevgray, gray, flow, cflow, frame;
    double col = cap.get(CV_CAP_PROP_FRAME_WIDTH);
    double row = cap.get(CV_CAP_PROP_FRAME_HEIGHT);
    Mat flow_img = Mat::zeros(row,col,CV_8UC1);

    namedWindow("flow", 1);
   namedWindow("segmented",1);

   for(;;)
    {
        cap >> frame;
        cvtColor(frame, gray, CV_BGR2GRAY);

        if( prevgray.data )
        {
            calcOpticalFlowFarneback(prevgray, gray, flow, 0.5, 3, 15, 15, 5, 1.2, 0);
            cvtColor(prevgray, cflow, CV_GRAY2BGR);
            drawOptFlowMap(flow, cflow, 8, 1.5, CV_RGB(0, 255, 0));
            imshow("flow", cflow);
        }

        //This part I added to  compute Magnitude of flow
for(int i=0;i<gray.rows;i++)
    for(int j=0;j<gray.cols;j++)
        flow_img.at<uchar>(i,j)= cvRound(  sqrt ( pow (flow.at<Vec2f>(i,j)[0] ,2 )+ pow ( flow.at<Vec2f>(i,j)[1],2) ));

//threshold image
threshold(flow_img,flow_img,10,255,THRESH_BINARY); //some arbitrary thresh value 10

        imshow("segmented",flow_img);

        if(waitKey(30)>=0)
            break;

        std::swap(prevgray, gray);
    }
    return 0;
} 
```

我正在使用 Microsoft Visual C++ 2010 并且没有构建错误。但程序不会运行并抛出以下内容：

![构建错误](https://i.stack.imgur.com/opHga.jpg)

在控制台窗口中，我得到：

![c0nsole](https://i.stack.imgur.com/Vss5Q.jpg)

我不明白我在哪里犯了错误。谁能帮帮我。[这里](https://stackoverflow.com/questions/10915881/exception-thrown-for-cvcalcopticalflowhs-opencv/10916530#10916530)有类似的 SO 问题，答案是我使用的代码。我仍然遇到上述问题

**[你可以在这里](http://videobam.com/iBEAa)或[这里](http://www.youtube.com/watch?v=RhcMepj4vio)**找到我的输入视频****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:44:47.427

你确定线路`

```
const Point2f& fxy = flow.at<Point2f>(y, x); 
```

被允许？`Point2f`不是`cv::Mat`类文档中描述的类型之一。尝试使用`cv::Vec2f`as 模板参数。然后，您可以`Point2f`用结果填充变量。

下一个问题：在计算 8 位流大小的行中，使用`saturate_cast`运算符会更安全：

```
flow_img.at<uchar>(i,j)= cv::saturate_cast<uchar>(cvRound(  sqrt ( pow (flow.at<Vec2f>(i,j)[0] ,2 )+ pow ( flow.at<Vec2f>(i,j)[1],2) ))); 
```

还不确定它是否会导致您的程序不幸崩溃。

错误告诉您的是您正在使用错误的参数调用 OpenCV 函数。在调试模式下，在您的程序中一步一步地进行，以便我们知道是哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T17:06:55.497

代码行

```
std::swap(prevgray, gray); 
```

可能会导致问题，因为 std::swap 的行为是

```
c(a); a=b; b=c; 
```

并且以这种方式使用 = 运算符，它不会应用输入图像的深层副本。更好的使用

```
gray.copyTo(prevgray); 
```

为prevgray分配自己的内存。否则prevgray的数据指针指向gray的内容。**

# javascript - 尝试在变化时制作动画

> ID：15983816
> 
> 赞同：-1
> 
> 时间：2013-04-13T03:15:04.570
> 
> 标签：javascript, jquery

当调用 .change() 函数时，我试图为某些东西的宽度设置动画，但它似乎不起作用。

知道为什么吗？

这是我的代码：

```
$(document).ready(function(){
    $('#code').change(function(){
        //on change animate a width of +16px increase.
        $(this).animate({width: '+=16'});
    });
}); 
```

这是一个重新创建问题的 js fiddle：http: [//jsfiddle.net/BUSSX/](http://jsfiddle.net/BUSSX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:28:38.023

如果基于您之前的[问题](https://stackoverflow.com/questions/15983683/trying-to-append-letter-to-text-inside-input)HTML 标记：

```
<button class="I button">I</button>
<button class="O button">O</button>

<input id="code" type="text" disabled /> 
```

因此，如果要为文本框的宽度设置动画，则需要在单击按钮时对其进行动画处理：

```
$('.button').click(function(event) {
    var text = $(this).text();
    $('input:text').val(function(index, val) {
        return val + text;
    });
    $('#code').animate({width: '+=16'});
}); 
```

`**[Working Demo](http://jsfiddle.net/q3xBY/4/)**`

* * *

如果基于您的上述问题 HTML 标记，您需要使用`keyup`而不是在以下位置`change`包含 jQuery 库`jsFiddle`：

```
$(document).ready(function(){
    $('#code').keyup(function(){
        //on change animate a width of +16px increase.
        $(this).animate({width: '+=16'});
    });
}); 
```

`[Updated Demo](http://jsfiddle.net/BUSSX/10/)`

* * *

您只需要检查按下了哪个键：

```
$(document).ready(function(){
    $('#code').keyup(function(e){
        //on change animate a width of +16px increase.        
        if(e.keyCode == 8) { // Backspace pressed
            $(this).animate({width: '-=16'});
        } else {
            $(this).animate({width: '+=16'});
        }
    });
}); 
```

`**[Updated Demo](http://jsfiddle.net/BUSSX/27/)**`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:43:16.210

如果您真的想要输入控件的更改事件，那么这是我不久前编写的一个 jQuery 插件方法，它可以用于几乎所有可以更改输入控件内容的方式，包括拖放、复制/paste，打字等...如果存在的话，它会利用更新的事件来帮助解决这个问题，否则它会退回到侦听许多其他事件并查看数据是否已更改。

```
(function($) {

    var isIE = false;
    // conditional compilation which tells us if this is IE
    /*@cc_on
    isIE = true;
    @*/

    // Events to monitor if 'input' event is not supported
    // The boolean value is whether we have to 
    // re-check after the event with a setTimeout()
    var events = [
        "keyup", false,
        "blur", false,
        "focus", false,
        "drop", true,
        "change", false,
        "input", false,
        "textInput", false,
        "paste", true,
        "cut", true,
        "copy", true,
        "contextmenu", true
    ];
    // Test if the input event is supported
    // It's too buggy in IE so we never rely on it in IE
    if (!isIE) {
        var el = document.createElement("input");
        var gotInput = ("oninput" in el);
        if  (!gotInput) {
            el.setAttribute("oninput", 'return;');
            gotInput = typeof el["oninput"] == 'function';
        }
        el = null;
        // if 'input' event is supported, then use a smaller
        // set of events
        if (gotInput) {
            events = [
                "input", false,
                "textInput", false
            ];
        }
    }

    $.fn.userChange = function(fn, data) {
        function checkNotify(e, delay) {
            var self = this;
            var this$ = $(this);

            if (this.value !== this$.data("priorValue")) {
                this$.data("priorValue", this.value);
                fn.call(this, e, data);
            } else if (delay) {
                // The actual data change happens aftersome events
                // so we queue a check for after
                // We need a copy of e for setTimeout() because the real e
                // may be overwritten before the setTimeout() fires
                var eCopy = $.extend({}, e);
                setTimeout(function() {checkNotify.call(self, eCopy, false)}, 1);
            }
        }

        // hook up event handlers for each item in this jQuery object
        // and remember initial value
        this.each(function() {
            var this$ = $(this).data("priorValue", this.value);
            for (var i = 0; i < events.length; i+=2) {
                (function(i) {
                    this$.on(events[i], function(e) {
                        checkNotify.call(this, e, events[i+1]);
                    });
                })(i);
            }
        });
    }
})(jQuery); 
```

然后，您的代码将如下所示：

```
$(document).ready(function(){
    $('#code').userChange(function(){
        //on change animate a width of +16px increase.
        $(this).animate({width: '+=16'});
    });
}); 
```

在查看您的代码时，您将输入控件的宽度在每次更改时增加 16 像素。您可能应该查看控件中的字符数并基于此评估宽度的处理方法，因为如果用户按下退格键，这将使事情变得更广泛。我可能会做这样的事情，在添加内容时增加项目，但不会缩小它：

```
$(document).ready(function(){
    $('#code').userChange(function(){
        // on change animate width as chars are added
        // only grow it when the width needs to be larger than it is currently
        var item = $(this);
        var origWidth = item.data("initialWidth");
        var curWidth = item.width();
        if (!origWidth) {
            origWidth = curWidth;
            item.data("initialWidth", origWidth);
        }
        var newWidth = origWidth + (8 * item.val().length);
        if (newWidth > curWidth) {
            item.stop(true, true).animate({width: newWidth}, 500);
        }
    });

}); 
```

工作代码示例：http: [//jsfiddle.net/jfriend00/BEDcR/](http://jsfiddle.net/jfriend00/BEDcR/)

* * *

如果您希望 userChange 方法在您以编程方式设置值时执行`.val()`，那么您可以为此创建自己的方法：

```
$(document).ready(function(){
    function updateWidth() {
        // on change animate width as chars are added
        // only grow it when the width needs to be larger than it is currently
        var item = $(this);
        var origWidth = item.data("initialWidth");
        var curWidth = item.width();
        if (!origWidth) {
            origWidth = curWidth;
            item.data("initialWidth", origWidth);
        }
        var newWidth = origWidth + (8 * item.val().length);
        if (newWidth > curWidth) {
            item.stop(true, true).animate({width: newWidth}, 500);
        }
    }
    $('#code').userChange(updateWidth);

    $.fn.valNotify = function(value) {
        this.val(value);
        this.each(function() {
            updateWidth.call(this);
        });
        return this;
    }
}); 
```

然后，您可以使用它更改您的值，它也会自动调整大小：

```
$("#code").valNotify("foo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:33:26.543

你忘了加载 jQuery，在这里工作正常[http://jsfiddle.net/BUSSX/13/](http://jsfiddle.net/BUSSX/13/) - 你也需要这个`click`事件。或者甚至更好地使用该`keyup`事件，以便一旦输入内容，文本框的宽度就会增加 - [http://jsfiddle.net/BUSSX/15/](http://jsfiddle.net/BUSSX/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T07:06:56.700

IrfanM，而不是增加一个固定的数量，你可以考虑增加一个合适的数量，以适应​​输入的每个字符。

除非我把事情复杂化了（不是完全未知），否则这有点棘手。

在以下 jQuery 插件中：

*   每个文本输入字段都被赋予一个隐藏`<span>`的，其字体系列和字体大小与其各自的输入元素相同。
*   `<span>`每次输入字符时，这些元素通过接受其输入字段的整个文本的副本来充当“测量棒”。
*   然后使用加一宽`<span>`字符宽度的宽度来确定输入字段的宽度。

这是代码：

```
(function ($) {
    var pluginName = 'expandable';
    $.fn[pluginName] = function () {
        return this.each(function (i, input) {
            var $input = $(input);
            if (!$input.filter("input[type='text']").length) return true;

            // Common css directives affecting text width
            // May not be 100% comprehensive
            var css = {
                fontFamily: $input.css('fontFamily'),
                fontSize: $input.css('fontSize'),
                fontStyle: $input.css('fontStyle'),
                fontVariant: $input.css('fontVariant'),
                fontWeight: $input.css('fontWeight'),
                fontSizeAdjust: $input.css('fontSizeAdjust'),
                fontStretch: $input.css('fontStretch'),
                letterSpacing: $input.css('letterSpacing'),
                textTransform: $input.css('textTransform'),
                textWrap: 'none'
            };
            var $m = $("<span/>").text('M').insertAfter($input).css(css).text('M').hide();
            var data = {
                'm': $m,
                'w': $m.width()
            };
            $input.data(pluginName, data).keyup(function (e) {
                $this = $(this);
                var data = $this.data(pluginName);
                var w = data.m.html($this.val().replace(/\s/g, "&nbsp;")).width();
                $this.css({
                    'width': w + data.w
                });
            }).trigger('keyup');
        });
    };
})(jQuery);

$(document).ready(function () {
    $('input').expandable();
}); 
```

**[演示](http://jsfiddle.net/BUSSX/29/)**

这是有效的，因为`<span>`元素会自动扩展以适应其文本，而`<input type="text">`元素不会。这种方法的一个重要特点是不需要测试击键 - 该插件会自动响应字符删除，就像它响应字符笔划一样。

它适用于比例和等宽字体，甚至可以适当地响应剪切和粘贴。

唯一必要的预防措施是将空格转换为不间断空格，否则 HTML 会将多个空格呈现为元素`$nbsp;`中的单个空格。`<span>`

当然，如果您真的希望每次击键都精确地增长 16 像素，那么请坚持您已经拥有的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T07:11:42.187

你有一个糟糕的实施检查[http://jsfiddle.net/3dSZx/](http://jsfiddle.net/3dSZx/)你需要添加 jquery 到小提琴

## `JS`

```
$(document).ready(function(){
    $('#push').click(function(){
        //on change animate a width of +16px increase.
        $('#code').animate({ width: '+=16'});
    });    
}); 
```

# c# - 将类的属性链接到其他值？

> ID：15983824
> 
> 赞同：-1
> 
> 时间：2013-04-13T03:16:10.643
> 
> 标签：c#, design-patterns, language-agnostic

当使用一个类来表示一些外部获取的数据时，我经常发现需要将该类的属性链接到数据的属性。我最熟悉 Javascript，所以当这个出现时，我首先想到的是创建一个数组，其中包含一个对象上的属性名称和外部数据上的属性名称。

例如，如果数据是：

```
var jsonObj = {
    "aString": "this is a string value",
    "aNum": "44235",
    "aColor: "125,125,125"
} 
```

我可能会创建一个数组结构，例如：

```
var linker = [
    ["aString", "title", "string"],
    ["aNum", "userCount", "int"],
    ["aColor", "color", "color"]
] 
```

跟踪源属性名称、新对象上的属性名称以及值的类型。我很难在非高级语言（如 C#）中考虑类似的解决方案。想到了反射，但似乎没有正确的使用它的地方。

**如何在不执行以下操作的情况下将一组字符串与一组属性相关联？**：

```
obj.setTitle(data.getValue("aString"));
obj.setUserCount(data.getValue("aNum"));
obj.setColor(data.getValue("aColor"));
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:05:52.260

也许[dynamic](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx) / [ExpandoObject](http://msdn.microsoft.com/en-us/library/vstudio/system.dynamic.expandoobject.aspx)会让 C# 看起来对你更友好

即你可以设置/获取`dynamic`对象初始化的任何属性`ExpandoObject`

```
dynamic v = new System.Dynamic.ExpandoObject();
((IDictionary<String, Object>)v).Add("test", 3);
Console.Write(v.test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:55:11.693

C# 有 System.Runtime.Serialization.Json.DataContractJsonSerializer 类 [http://msdn.microsoft.com/en-us/library/bb410770.aspx](http://msdn.microsoft.com/en-us/library/bb410770.aspx)

或者你可以使用 Json.NET。这是 Json 解析器。因此，您可以使用动态类型。

[http://json.codeplex.com/](http://json.codeplex.com/)

我英语说的不好。如果我错了，我很抱歉。

# java - Java：捕获异常 - 未检查与已检查

> ID：15983826
> 
> 赞同：2
> 
> 时间：2013-04-13T03:16:28.587
> 
> 标签：java, exception, checked, illegalargumentexception, unchecked

我有一些代码将字符串（用户输入）拆分为一个数组，并将该数组的元素作为参数传递给一个方法。如果数组没有足够的元素，则会自动抛出 ArrayIndexOutOfBoundsException。但是，这是一个未经检查的异常，由于这是用户输入不正确的问题，我可以改为事先检查此条件并抛出一个检查异常。

所以，我有几个问题：

1.  处理未经检查的异常或抛出已检查的异常会更好吗？
2.  如果我确实抛出了一个检查异常，我应该使用 IllegalArgumentException 吗？我的理解是它适用于非法参数类型，而不是非法数量的参数。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:20:25.453

已检查异常是编译器强制您处理的异常，而未检查异常则不是这种情况。现在，根据您的问题，您的代码应该以一种方式编写，以免出现任何情况，从而引发未经检查的异常（例如：-空指针异常，ArrayIndexOutOfBoundsException）。

如果您的代码抛出未经检查的异常，则代码中存在问题。正如您在您的案例中指出的那样，输入数据不正确，那么理想情况下，您应该对输入进行验证，无论其是否是预期的，并给出错误消息，因此不需要将未经检查的异常转换为已检查的异常

因此，在理想世界中，无需将未经检查的异常转换为已检查的异常。是的，如果有特定情况，我们可以在技术上做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T03:20:35.527

> 处理未经检查的异常或抛出已检查的异常会更好吗？

最好抛出一个检查异常，表明用户输入有问题。应保留未经检查的异常以指示不更改代码就无法恢复的*编程问题；*用户输入不是这些问题之一。

> 如果我确实抛出了一个检查异常，我应该使用 IllegalArgumentException 吗？我的理解是它适用于非法参数类型，而不是非法数量的参数。

如果您的设计约束允许您使用特定于应用程序的异常，请针对无效用户输入的情况设计一种。这将使使用您的 API 的代码看起来更明确地了解它所期望的异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T03:21:29.197

如果您有办法重新提示用户正确输入，即如果有处理异常的合乎逻辑的方法，那么就这样做。如果您期望调用堆栈更远的人来处理异常，那么抛出一个检查异常。如果您只是放弃，那么让未经检查的异常通过（或将其重新打包在一个信息更丰富的 RuntimeException 中，以便最终捕获它的任何记录器）。这是针对所有例外情况的一般建议。（此外，不要记录异常并重新抛出它 - 要么记录它，要么重新抛出它，而不是两者兼而有之。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-13T03:33:55.257

```
Would it be better form to handle the unchecked exception or throw a checked one? 
```

最好在尝试处理输入之前验证输入，如果输入无效，请用户再试一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T03:29:55.583

基本上，当您决定处理运行时异常时，在您的情况下，ArrayIndexBoundofExcepgtion，您可能会继续进行而不会突然中断应用程序。

因此，如果您的数组没有足够的数据，该做什么或不做什么是您的业务决策。如果它确实影响了业务数据流，最好处理一个已检查的异常，以便您可以清理您的输入数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-13T03:31:54.427

> 处理未经检查的异常或抛出已检查的异常会更好吗？

抛出未经检查的异常。你总是可以赶上`RuntimeException`并继续前进。然后我又偏向于未经检查的异常，因为我不喜欢*所有*检查的异常。

> 如果我确实抛出了一个检查异常，我应该使用 IllegalArgumentException 吗？

是的，它应该按照下面的 javadoc 报价进行。如果您想传达更具体的内容，您可以创建自己的检查异常。这取决于您的设计。

> 抛出以指示方法已传递了非法或不适当的参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-13T03:52:19.257

我建议避免检查异常。有关一些支持论点，请参见以下内容：

*   [检查的异常可能有它们的位置，但它不在 Java 中](http://james-iry.blogspot.com/2012/02/checked-exceptions-might-have-their.html)
*   [为什么休眠将 HibernateException 更改为 RuntimeException（未选中）](https://stackoverflow.com/a/4609881/2197460)

您是定义自己的类扩展`RuntimeException`并抛出它还是简单地允许`ArrayIndexOutOfBoundsException`抛出它取决于上下文。一般来说，后者就足够了。

# size - 如何规范我的网站的查看方式？

> ID：15983827
> 
> 赞同：0
> 
> 时间：2013-04-13T03:16:30.250
> 
> 标签：size, screen-orientation

我正在开发我的网站，但我遇到了一个小问题。在我的电脑上我可以看到我想要的网站，但是当我在我的笔记本上看到时，内容非常正确！在我的电脑上是正常的。我有网站给你看。这是葡萄牙语，因为我是巴西人。但是请看一下源代码。或者更好，我会为你传递代码。右边内容的 CLASS 是：content-inner-jogo-destaque 这是代码：CSS：

```
.content-inner-jogo-destaque
{
position:absolute;
top:15px;
right:15px;
width:200px;
background-color: #ffffff;
padding: 10px 10px;
-webkit-box-shadow: inset 0 0 10px #1f325d;
-o-box-shadow: inset 0 0 10px #1f325d;
-moz-box-shadow: inset 0 0 10px #1f325d;
-ms-box-shadow: inset 0 0 10px #1f325d;
box-shadow: inset 0 0 10px #1f325d;
border-left: 3px solid #eeeeee;
border-right: 3px solid #eeeeee;
border-bottom: 3px solid #eeeeee;
border-top: 3px solid #eeeeee;
} 
```

HTML：

```
<body>
<div class='content-inner-jogo-destaque'>
<p>Jogo da semana:</p>
<a href="testando"><img src="imagens/semana1.jpg" title="Clique para ir para a 
p&aacute;gina do jogo da semana" style="width:200px"/></a>
<font size="3"><font face="verdana,geneva">Dragon Ball Z Budo<font size="3">kai Tenkaichi 3</font></font></font>
</div>
</body> 
```

好吧，这里是网站：[www.ganggames.p.ht](http://www.ganggames.p.ht) 请看看，如果有什么问题告诉我。我可以使用 CSS 来更改网站的像素吗？还是元标记？你能帮助我吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:45:50.717

我有 3 件事要给你：

**1）**我认为您的内容显示在页面右侧的主要原因是因为您的内容设置为“位置：绝对”，然后您告诉它与页面右侧保持 15px 的距离。这意味着无论您的屏幕有多大或多小，DIV 总是距离页面右侧 15px。

如果将所有内容包装在具有设定宽度的 DIV 中，则可以保留当前拥有的代码：

```
<head>
    <style>#wrapper {width: 'whatever-your-content-width-is';}</style>
</head>
<body>
    <div id="wrapper">
        <!--ALL OF YOUR CONTENT-->
    </div>
</body> 
```

如果您愿意，您现在还可以整齐地将所有内容居中*（可选）*：

```
<style>body {text-align: center;}</style> 
```

**2)**对于跨设备兼容性，帮助查看问题的标准是此元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

可以在这里找到对该标签的进一步研究： [https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

**3)**仔细检查您所有的身体、头部、脚部等标签！它们没有正确执行。

希望这有帮助！

# java - 使用Jsoup以正确格式从网页中提取相对链接

> ID：15983833
> 
> 赞同：0
> 
> 时间：2013-04-13T03:17:32.727
> 
> 标签：java, html, html-parsing, jsoup

我已经解析了一个网页的外链，我将使用 Jsoup 再次解析它。但问题是，链接的形式是：`../../../pincode/india/andaman-and-nicobar- islands/`. 在这种形式下，我无法解析它们。所以我`link.attr("abs:href")`在stackoverflow的其他帖子的帮助下转换为绝对url。

我解析的第一个网页的网址是：`http://www.mapsofindia.com/pincode/india/`. 我解析后得到的绝对网址是`http://www.mapsofindia.com/../pincode/india/andaman-and-nicobar-islands/`. 但我无法使用 Jsoup 进一步解析它们。因此，当我执行以下语句时：

`Jsoup.parse("http://www.mapsofindia.com/../pincode/india/andaman-and-nicobar-islands/");`

它给出 HTTP 400 错误，即错误请求。所以我认为网址有问题。所以任何人都可以帮我解决上述问题，以正确的方式获取网址，以便我可以进一步解析它们。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:22:05.627

请测试这两件事：

1.  尝试使用`link.absUrl("href")`而不是`link.attr("abs:href")`
2.  检查基本 uri（调用`baseUri()`您的元素或文档）

顺便提一句。你最好`connect()`对这件事使用方法：

```
Document doc = Jsoup.connect("http://<your url here>").get(); 
```

# javascript - 按下按键时禁用 Nintendo 3DS 滚动功能

> ID：15983839
> 
> 赞同：0
> 
> 时间：2013-04-13T03:18:42.843
> 
> 标签：javascript, jquery, css, dom, scroll

我一直在尝试在 Nintendo 3DS 游戏系统的网络浏览器中运行的网页中构建一个可移动的 div。基本上，当我使用 + 控制板（对应于常规键盘箭头键的键码）时，div 会在页面周围滑动。不幸的是，由于我的页面尺寸太大而无法直接放入 3DS 视口中，因此浏览器自动滚动的速度比我的 div 移动到视图中的速度要快。我想出了各种技术`overflow: hidden;`，`position: fixed;`并且

```
 $(document).keydown(function(event){
        event.preventDefault();
        //call my function to move the div around
    }); 
```

不过，3DS 浏览器实际上并没有使用传统的“滚动条”。无论如何它只是滚动。而且它的`position: fixed;`支持很差。

有没有人对如何阻止页面滚动但允许 div 移动（并在 div 到达视口边缘时滚动一点以显示更多页面）有任何建议？

这是我在 stackOverflow 上的第一篇文章。感谢您的任何想法！！！

**编辑：**您可以在此处查看代码：[Cloud9 IDE 链接](https://c9.io/epicaleb/demo-project)并在此处执行操作：[DEMO 链接](https://c9.io/epicaleb/demo-project/workspace/html/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:27:12.277

是的，我在所有移动设备上都有这个问题。
对我来说，处理移动设备上固定位置的最佳方法是从页面中完全删除滚动功能并使用 JavaScript 模拟它，然后在新的滚动事件上更改位置。
而且，你可以制作一个不可移动的页面，只滚动你需要的部分，这样你的元素就不会移动了。

```
html,body {
    overflow: hidden
}

#divID {
    overflow: auto; // if you want just vertical scroll overflow-y: auto;
} 
```

# html - 图像在 div 中重叠

> ID：15983843
> 
> 赞同：-3
> 
> 时间：2013-04-13T03:18:51.523
> 
> 标签：html, css

嗨，我正在添加一张图片，但它总是重叠。

我希望 div 在内部 div 被调整大小时自动调整大小 例如当一个人上传图像时，它会在该图片上调整大小，使其适合 div 框

![在此处输入图像描述](https://i.stack.imgur.com/jWakz.png)

```
<div class="MainBox">

    <div class="FirstChildBox">
                <div class="imageBox">
                        <img src="textimage2.jpg"/>
                </div>
                <div class="rateImage">
                    <div class="arrowupdownrate">
                        <div class="upArrow"><img src="up_down.png" /> </div>
                        <div class="rateNumber"><a>112320</a></div>
                        <div class="downArrow"><img src="red_down.png" /></div>
                    </div>
                </div>
                <div class="infoOfImage">
                        <div class="textImage"> 
                                <a href="#">Just a picture
                                </a>
                        </div>
                <div class="Thumbsups">
                    <div class="textparagraph"><p>asdasd</p></div>
                     <div class="fb-like" data-href="http://teamfirstdragon.com/" data-send="true" data-width="450" data-show-faces="false"></div>
                    <div class="fb-comments" data-href="http://teamfirstdragon.com/" data-width="450" data-num-posts="4"></div>
                </div>

        </div>
    </div>

<style>
.MainBox {
    margin:0px auto;
    border:1px solid #f00;
    width:900px;

}
    .MainBox .FirstChildBox {
        margin:10px;
        height:240px;
        width:880px;
    }
        .MainBox .FirstChildBox .rateImage {
            float:left;

            margin-left:5px;
            margin-right:5px;
            width:65px;
            height:239px
        }
            .MainBox .FirstChildBox .rateImage .arrowupdownrate {
                margin-top:40px;

            }
                .MainBox .FirstChildBox .rateImage .arrowupdownrate .upArrow {
                            margin-left:7px;
                            cursor:pointer;
                 }
                 .MainBox .FirstChildBox .rateImage .arrowupdownrate .rateNumber {
                         margin:5px;
                         width:52px;
                         height:20px;
                         text-align:center;
                 }
                    .MainBox .FirstChildBox .rateImage .arrowupdownrate .rateNumber a {
                        font-family:'Comic Sans MS',Arial,Calibri;
                    }
                 .MainBox .FirstChildBox .rateImage .arrowupdownrate .downArrow {
                        margin-left:7px;
                        margin-top:10px;
                        cursor:pointer;
                 }
        .MainBox .FirstChildBox .imageBox {
            float:left;
            width:350px;
        }
        .MainBox .FirstChildBox .imageBox img {
            width:350px;
        }
        .MainBox .FirstChildBox .infoOfImage {
            float:right;
        }
            .MainBox .FirstChildBox .infoOfImage .Thumbsups {
                border:1px solid #ff6a00; 
                width:450px;
                height:204px
            }
                .MainBox .FirstChildBox .infoOfImage .Thumbsups .fb-comments {
                    position:relative;
                }
                .MainBox .FirstChildBox .infoOfImage .Thumbsups .fb-like {
                    position:relative;

                }
            .MainBox .FirstChildBox .infoOfImage .textImage {
                text-align:center;
                width:450px;

            }

        .MainBox .FirstChildBox .infoOfImage .textImage a {
            position:relative;
            font-family: 'Comic Sans MS',Calibri,'Times New Roman';
            text-decoration:none;
            font-size:25px;
            font-weight:bold
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:23:52.143

尝试将以下内容添加到 CSS

```
.imageBox { height: 100%; }
.imageBox img { height: 100%; } 
```

这将导致`.imageBox`元素的高度是它的父元素的 100%，并且`img`元素中的元素`div.imageBox`也会适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:25:35.463

你试过身高：自动；在 .MainBox 类中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:29:47.517

您的第一个子框有一个固定的高度，我必须在包装器的末尾添加一个 clear:both 以检测高度（您也可以使用 clear fix hack）

[http://codepen.io/anon/pen/eGlfa](http://codepen.io/anon/pen/eGlfa)

# postgresql - 在 Cygwin 上以用户身份安装 PostgreSQL，数据库服务器设置

> ID：15983846
> 
> 赞同：0
> 
> 时间：2013-04-13T03:19:29.100
> 
> 标签：postgresql, cygwin, database-connection, relational-database, database-server

我正在尝试以用户身份在 Cygwin 上安装 PostgreSQL，但在执行 pg_ctl 命令后，我陷入了必须创建数据库服务器的部分，它只是打印“服务器启动”并无限期地在前台运行，这是我正在谈论的图片：

[http://postimg.org/image/oh7ucgt9h/](http://postimg.org/image/oh7ucgt9h/)

我通常是数据库的初学者，所以任何指针都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T04:56:40.733

您可能正在挂起分配共享内存。请改用本机 Windows 版本。管理起来要容易得多。

但是，如果您坚持，请在运行 PostgreSQL 之前确保 ipc-daemon 正在运行。这可能会解决您的问题。

你可以运行：

```
ipc-daemon --install-as-service
net start ipc-daemon 
```

这应该这样做。

# python - 如何将文件中的特定行添加到 Python 中的 List 中？

> ID：15983847
> 
> 赞同：-1
> 
> 时间：2013-04-13T03:19:33.473
> 
> 标签：python, list, readline

我有一个输入文件：

```
3
PPP
TTT
QPQ

TQT
QTT
PQP

QQQ
TXT
PRP 
```

我想阅读这个文件并将这些案例分组到适当的`boards`. 要阅读`Count`（板数），我有代码：

```
board = []
count =''    
def readcount():
        fp = open("input.txt")
        for i, line in enumerate(fp):
            if i == 0:
                count = int(line)
                break
        fp.close() 
```

但我不知道如何将这些块解析为列表：

```
TQT
QTT
PQP 
```

我尝试使用

```
def readboard():
    fp = open('input.txt')
    for c in (1, count): # To Run loop to total no. of boards available
        for k in (c+1, c+3): #To group the boards into board[]
            board[c].append(fp.readlines) 
```

但它的方式是错误的。我知道 List 的基础知识，但在这里我无法解析文件。

这些板在第 2 到 4 行、第 6 到 8 行等。如何让他们进入`Lists`？我想将这些解析成`Count`，`Boards`以便我可以进一步处理它们？

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:52:56.577

我不知道我是否理解你想要的结果。我*想*你想要一个列表列表。假设您希望板是：[[data,data,data],[data,data,data],[data,data,data]]，那么您需要定义如何解析您的输入文件......特别是：

*   第 1 行是计数
*   每行输入数据
*   板由空白分隔。

如果是这种情况，这应该正确解析您的文件：

```
board = []
count = 0 
currentBoard = 0 

fp = open('input.txt')
for i,line in enumerate(fp.readlines()):
    if i == 0:
        count = int(i)
        board.append([])
    else:
        if len(line[:-1]) == 0:
            currentBoard += 1
            board.append([])
        else: #this has board data
            board[currentBoard].append(line[:-1])
fp.close()
import pprint
pprint.pprint(board) 
```

如果我的假设是错误的，那么可以对其进行修改以适应。就个人而言，我会使用字典（或有序字典）并从 len(boards) 获取计数：

```
from collections import OrderedDict
currentBoard = 0
board = {}
board[currentBoard] = []

fp = open('input.txt')
lines = fp.readlines()
fp.close()

for line in lines[1:]:
    if len(line[:-1]) == 0:
        currentBoard += 1
        board[currentBoard] = []
    else:
        board[currentBoard].append(line[:-1])

count = len(board)
print(count)
import pprint
pprint.pprint(board) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:33:49.303

如果您只想获取特定的行号并将它们放入列表中：

```
line_nums = [3, 4, 5, 1]
fp = open('input.txt')
[line if i in line_nums for i, line in enumerate(fp)]
fp.close() 
```

# sql - 'in（select ...）'语句的多个变量？

> ID：15983848
> 
> 赞同：-2
> 
> 时间：2013-04-13T03:20:00.990
> 
> 标签：sql, oracle, select, group-by

我想做这样的事情：

```
选择值 1、值 2、值 3、值 4、计数（1）
来自我的表
其中 value1、value2、value3、value4 在
    （从 mytable 中选择 value1、value2、value3、value4
     其中 record_no = 1 和 value5 = 'foobar')
按值1、值2、值3、值4分组
计数（1）> 4；

```

也就是说，我想为在至少一个记录上具有特定属性的所有 1-4 组找到值 1-4，并且我只想要具有四个以上记录的组。

**更新澄清**

```
从 mytable 中选择 *；

```

会给你类似的东西

```
value1 value2 value3 value4 record_no value5 更多列
------ ------ ------ ------ --------- ------ ------------ ------
aaa bbb ccc ddd 1 foobar
aaa bbb ccc ddd 2 abcdef
aaa bbb ccc ddd 3 zzzzzz
aaa bbb ccc ddd 4 barfoo
aaa bbb ccc ddd 5 dsnmatr
a1 b1 c1 d1 1 foobar
a1 b1 c1 d1 2 foobar
a2 b2 c2 d2 1 barfoo
a2 b2 c2 d2 2 巴富

```

我想找到 value1、value2、value3、value4 的值对于 value1、value2、value3、value4 的所有组，记录 1 具有 'foobar' 作为其 value5，并且组大小> 4。

例如它应该返回

```
值1 值2 值3 值4
------ ------ ------ ------  
aaa bbb ccc ddd
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T04:18:27.157

你一开始就非常接近。这部分是问题：

```
where value1, value2, value3, value4 in 
```

您必须将`value1, value2, value3, value4`其视为一个集合，因此只需像这样在它们周围加上括号：

```
where (value1, value2, value3, value4) in 
```

这是整个查询；从您的帖子中唯一改变的是括号：

```
select value1, value2, value3, value4, count(1)
from mytable
where (value1, value2, value3, value4) in
    (select value1, value2, value3, value4
    from mytable
    where record_no = 1 and value5 = 'foobar')
group by value1, value2, value3, value4
having count(1) > 4; 
```

[这里](http://www.sqlfiddle.com/#!4/5d81b/2)有一个 SQL Fiddle 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T06:50:47.900

你可以这样做

```
select  value1, value2, value3, value4, count(*)
from    mytable
group by value1, value2, value3, value4
having  count(*) > 4 
and     sum(decode(record_no , 1 , 1 , 0)) = 1
and     sum(decode(value5 , 'foobar' , 1 , 0) = 1; 
```

这是解码的一个小技巧。它应该可以正常工作。

出于教育目的，如果您不需要子查询中的实际数据（这是您的情况），最好始终使用`EXISTS`. 在你的例子中，它会是

```
select value1, value2, value3, value4, count(*)
from mytable
where exists 
    (select 1 
     from   mytable b
     where  b.record_no = 1 
     and    b.value5 = 'foobar'
     and    b.value1 = a.value1
     and    b.value2 = a.value2 
     and    b.value3 = a.value3
     and    b.value4 = a.value4
     )
group by value1, value2, value3, value4
having count(1) > 4; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:52:15.153

当使用多个变量时，我经常将项目与一些不出现的字符连接在一起，所以

```
where value1 + '|' + value2 + '|' + value3 in (
    select value1 + '|' + value2 + '|' + value3 from ... 
```

如果我有三个字段。只有当所有的值都相同并达到结果时，平等才会成立。

# algorithm - 有人可以给我一个梯度下降的概述吗？

> ID：15983868
> 
> 赞同：-3
> 
> 时间：2013-04-13T03:22:42.530
> 
> 标签：algorithm

我只是想知道是否是这种情况？直观的定义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:29:27.510

梯度下降是一种寻找某个多维函数的最小值/最大值的方法。为简单起见，想象一下寻找山顶。在这种情况下，我们正在寻找 3 个维度（经度、纬度、高度）的最大值（高度）。函数是山的表面，有两个输入（经度、纬度）和一个输出（高度）。

如果你必须使用梯度下降，你会这样做：

1.  在当前位置计算每个方向的坡度
2.  向最陡的正倾斜方向移动一小段距离
3.  如果达到收敛，则停止。否则，返回步骤 1。

收敛意味着如果你继续，结果不会有显着变化。上述指令可以推广到任意数量的维度。

要在任何语言中实现梯度下降，您需要设置一个循环，并实现上述步骤。无论您使用哪种语言，它都是一样的。这是一个关于梯度下降的好视频，其中包含一些伪代码（与 Python 没有什么不同）：http: //youtu.be/5u4G23_OohI?t= [26m34s](http://youtu.be/5u4G23_OohI?t=26m34s)。

# java - 在Java中我需要运行一个本地方法（下面的代码）

> ID：15983869
> 
> 赞同：-2
> 
> 时间：2013-04-13T03:22:47.053
> 
> 标签：java, class, methods

嘿，我一直在尝试让 main 运行这些方法，但我不记得该怎么做。到目前为止，这是一个简单的程序，因为我 15 分钟前才开始使用它。

`

```
import java.awt.Robot;
import javax.swing.JFrame;
import java.lang.*;
import java.io.*;
public class sweetRevenge {

public static void main(String[] args) {
//call local static classes browserjacker and wallpaperjacker
   start(browserJacker(1));

   } 

   public static void browserJacker(int i)throws IOException{
 try
 { 
//include bad things along with self made video of hacking linked to youtube
 Process p=Runtime.getRuntime().exec("cmd /c start http://www.google.com"); 
 } 
 catch(IOException e1) {System.out.println(e1);} 

 }
 public static void wallpaperJacker (String args []) throws IOException {
Process p=Runtime.getRuntime().exec("cmd /c start");
  }} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:40:21.180

```
since your method is throwing an exception so the place where you will call it MUST have an exception handling mechanism, and your code needs to be modified.

import java.awt.Robot;
import javax.swing.JFrame;
import java.lang.*;
import java.io.*;
public class sweetRevenge {

public static void main(String[] args) {
//call local static classes browserjacker and wallpaperjacker

   try{
     browserJacker(); // will start method browserJacker
     // since the method is static so it can be easily accessed from static method
   }catch{IOException ex}{
   }

} 

public static void browserJacker()throws IOException{
   //include bad things along with self made video of hacking linked to youtube
   Process p=Runtime.getRuntime().exec("cmd /c start http://www.google.com"); 
}

 public static void wallpaperJacker () throws IOException {
   Process p=Runtime.getRuntime().exec("cmd /c start");
     }
} 
```

# multithreading - 用户级线程和内核支持的线程之间的区别？

> ID：15983872
> 
> 赞同：88
> 
> 时间：2013-04-13T03:23:30.670
> 
> 标签：multithreading, process, operating-system, theory

我一直在浏览基于这个主题的一些笔记，虽然我对线程有一般的了解，但我并不确定*用户级线程和内核级线程之间的区别*。

我知道进程基本上是由多个线程或单个线程组成的，但是这些线程是前面提到的两种类型吗？

据我了解，内核支持的线程可以访问内核以进行系统调用和其他用户级线程不可用的用途。

那么，用户级线程是否只是程序员创建的线程，然后利用内核支持的线程来执行由于其状态而无法正常执行的操作？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-04-13T04:10:34.290

**编辑：这个问题有点令人困惑，所以我以两种不同的方式回答它。**

# 操作系统级线程与绿色线程

为了清楚起见，我通常说“操作系统级线程”或“本机线程”而不是“内核级线程”（我在下面的原始答案中与“内核线程”混淆了。）操作系统级线程由创建和管理操作系统。大多数语言都支持它们。（C、最近的 Java 等）它们非常难以使用，因为您 100% 负责防止出现问题。在某些语言中，即使是本机数据结构（例如哈希或字典）也会在没有额外锁定代码的情况下破坏。

与操作系统线程相反的是由您的语言管理的[绿色线程。](http://en.wikipedia.org/wiki/Green_thread)这些线程根据语言被赋予不同的名称（C 中的协程、Go 中的 goroutine、Ruby 中的纤维等）。这些线程只存在于您的语言中，而不存在于您的操作系统中。因为语言选择上下文切换（即在语句末尾），它可以防止大量微妙的竞争条件（例如看到部分复制的结构，或者需要锁定大多数数据结构）。程序员看到“阻塞”调用（即`data = file.read()`），但语言将其转换为对操作系统的异步调用。然后该语言允许*其他*绿色线程在等待结果时运行。

绿色线程对程序员来说要简单得多，但它们的性能各不相同：如果你有很多线程，绿色线程对于 CPU 和 RAM 都可能更好。另一方面，大多数绿色线程语言不能利用多核。（您甚至不能再购买单核计算机或手机了！）。一个糟糕的库可以通过阻塞操作系统调用来停止整个语言。

两全其美的是每个 CPU 有一个 OS 线程，以及许多神奇地移动到 OS 线程上的绿色线程。Go 和 Erlang 等语言可以做到这一点。

> 系统调用和其他用户级线程不可用的用途

这只是对了一半。是的，如果你自己调用操作系统（即做一些阻塞的事情），你很容易引起问题。但是语言通常有替换，所以你甚至不会注意到。这些替换确实调用了内核，只是与您想象的略有不同。

* * *

# 内核线程与用户线程

**编辑：这是我最初的答案，但它是关于用户空间线程与仅​​内核线程的，这（事后看来）可能不是问题。**

用户线程和内核线程完全相同。（您可以通过查看 /proc/ 看到内核线程也在那里。）

用户线程是执行用户空间代码的线程。但它可以随时调用内核空间。它仍然被认为是一个“用户”线程，即使它以更高的安全级别执行内核代码。

内核线程是仅运行内核代码且与用户空间进程无关的线程。这些类似于“UNIX 守护程序”，只是它们是仅内核的守护程序。所以你可以说内核是一个多线程程序。例如，有一个用于交换的内核线程。这会强制所有交换问题“序列化”到单个流中。

如果用户线程需要某些东西，它会调用内核，从而将该线程标记为休眠。稍后，交换线程找到数据，因此将用户线程标记为可运行。再后来，“用户线程”从内核返回到用户空间，就好像什么都没发生一样。

事实上，*所有*线程都从内核空间开始，因为 clone() 操作发生在内核空间。（在你可以“返回”到用户空间中的新进程之前，还有很多内核会计要做。）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-12-19T07:23:56.007

在进行比较之前，让我们先了解一下线程是什么。线程是独立进程域中的轻量级进程。它们是必需的，因为流程繁重，消耗大量资源，更重要的是，

> 两个独立的进程不能共享一个内存空间。

假设您打开一个文本编辑器。它是一个在内存中执行的独立进程，具有单独的可寻址位置。在此过程中您将需要许多资源，例如插入图形、拼写检查等。为这些功能中的每一个创建单独的过程并在内存中独立维护它们是不可行的。为了避免这种情况，

> 可以在一个进程中创建多个线程，这些线程可以共享一个公共的内存空间，在一个进程中独立存在。

现在，回到你的问题，一次一个。

> 我不太确定用户级线程和内核级线程之间的区别。

线程根据执行域大致分为*用户级线程*和*内核级线程。*也有 *一个或多个用户线程映射到一个或多个内核线程*的情况。

**- 用户级线程**

用户级线程主要位于应用程序级别，应用程序创建这些线程以维持其在主存储器中的执行。除非需要，否则这些线程与内核线程隔离工作。

这些更容易创建，因为它们不必引用许多寄存器，并且上下文切换比内核级线程快得多。

用户级线程，大多会导致应用程序级的变化，内核级线程继续按照自己的节奏执行。

**- 内核级线程**

这些线程大多独立于正在进行的进程，由操作系统执行。

操作系统需要这些线程来执行内存管理、进程管理等任务。

由于这些线程维护、执行和报告操作系统所需的进程；内核级线程的创建和管理成本更高，并且这些线程的上下文切换很慢。

大多数内核级线程不能被用户级线程抢占。

```
MS DOS written for Intel 8088 didn't have dual mode of operation. Thus, a user level process had the ability to corrupt the entire operating system. 
```

**- 映射到内核线程的用户级线程**

这也许是最有趣的部分。许多用户级线程映射到内核级线程，后者又与内核通信。

一些突出的映射是：

> 一对一

当一个用户级线程只映射到一个内核线程时。

优点：每个用户线程映射到一个内核线程。即使其中一个用户线程发出阻塞系统调用，其他进程也不受影响。

缺点：每个用户线程都需要一个内核线程进行交互，并且内核线程的创建和管理成本很高。

> 多对一

当许多用户线程映射到一个内核线程时。

优点：不需要多个内核线程，因为类似的用户线程可以映射到一个内核线程。

缺点：即使一个用户线程发出阻塞系统调用，映射到该内核线程的所有其他用户线程都被阻塞。

此外，由于内核一次只能处理一个内核线程，因此无法实现良好的并发性。

> 多对多

当许多用户线程映射到相等或更少数量的内核线程时。程序员决定将多少用户线程映射到多少内核线程。一些用户线程可能只映射到一个内核线程。

优点：实现了很高的并发性。程序员可以决定一些可能发出阻塞系统调用的潜在危险线程，并将它们与一对一映射一起放置。

缺点：内核线程的数量，如果不慎决定会减慢系统速度。

你问题的另一部分：

> 内核支持的线程可以访问内核以进行系统调用和其他用户级线程不可用的用途。
> 
> 那么，用户级线程是否只是程序员创建的线程，然后利用内核支持的线程来执行由于其状态而无法正常执行的操作？

部分正确。几乎所有内核线程都可以访问系统调用和其他关键中断，因为内核线程负责执行操作系统的进程。用户线程将无法访问其中一些关键功能。例如，文本编辑器永远无法触发能够更改进程物理地址的线程。但是如果需要，用户线程可以映射到内核线程并发出一些它不能作为独立实体执行的系统调用。然后，内核线程将此系统调用映射到内核，并在认为合适的情况下执行操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T05:53:53.773

一些开发环境或语言会添加自己的线程之类的特性，这是为了利用环境的一些知识而编写的，例如，GUI 环境可以实现一些线程功能，这些功能在每个事件循环上的用户线程之间切换。

游戏库可能有一些类似于角色的线程行为。有时，类似用户线程的行为可以以不同的方式实现，例如我经常使用可可，它有一个计时器机制，每 x 秒执行一次你的代码，使用几分之一秒，它就像一个线程。Ruby 有一个类似于协作线程的 yield 特性。用户线程的优点是它们可以在更可预测的时间切换。对于内核线程，每次线程再次启动时，它都需要加载它正在处理的任何数据，这可能需要时间，对于用户线程，您可以在完成处理某些数据时切换，因此不需要重新加载。

我没有遇到过看起来与内核线程相同的用户线程，只有像计时器这样的线程机制，尽管我在较旧的教科书中读过它们，所以我想知道它们是否是过去更流行但与真正的多线程操作系统（现代 Windows 和 Mac OS X）和更强大的硬件的兴起我想知道它们是否已经失宠。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-16T17:57:32.797

### 用户线程

1.  该库提供对线程创建、调度和管理的支持，而内核不提供支持。
2.  内核不知道用户级线程的创建和调度是在用户空间中完成的，无需内核干预。
3.  用户级线程通常可以快速创建和管理，但是它们也有缺点。
4.  如果内核是单线程的，那么任何执行阻塞系统调用的用户级线程都会导致整个进程阻塞，即使其他线程可以在应用程序中运行。
5.  用户线程库包括 POSIX Pthreads、Mach C-threads 和 Solaris 2 UI-threads。

### 内核线程

1.  内核在内核空间中执行线程创建、调度和管理。
2.  内核线程的创建和管理通常比用户线程慢。
3.  如果线程执行阻塞系统调用，内核正在管理线程。
4.  在多处理器环境中，内核可以在不同的处理器上调度线程。5.包括Windows NT、Windows 2000、Solaris 2、BeOS和Tru64 UNIX（原Digital UN1X）——支持内核线程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-16T08:03:54.100

从这里引用：

[**内核级线程**](http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh's%20files/User%20and%20Kernel%20Level%20Threads.html)

为了使并发更便宜，进程的执行方面被分离到线程中。因此，操作系统现在管理线程和进程。所有线程操作都在内核中实现，操作系统调度系统中的所有线程。操作系统管理的线程称为内核级线程或轻量级进程。NT：线程 Solaris：轻量级进程 (LWP)。

在这种方法中，内核知道并管理线程。在这种情况下不需要运行时系统。内核有一个线程表来跟踪系统中的所有线程，而不是每个进程中的线程表。此外，内核还维护着传统的进程表来跟踪进程。操作系统内核提供系统调用来创建和管理线程。

好处：

因为内核对所有线程有充分的了解，调度程序可能决定给拥有大量线程的进程比拥有少量线程的进程更多的时间。内核级线程特别适用于经常阻塞的应用程序。

缺点：

内核级线程缓慢且效率低下。例如，线程操作比用户级线程慢数百倍。由于内核必须管理和调度线程和进程。每个线程都需要一个完整的线程控制块 (TCB) 来维护有关线程的信息。因此，存在大量开销并增加了内核复杂性。

用户级线程

内核级线程使并发比进程便宜得多，因为分配和初始化的状态要少得多。但是，对于细粒度的并发，内核级线程仍然承受着过多的开销。线程操作仍然需要系统调用。理想情况下，我们要求线程操作与过程调用一样快。内核级线程必须是通用的，以支持所有程序员、语言、运行时等的需求。对于这种细粒度的并发，我们仍然需要“更便宜”的线程。为了使线程既便宜又快速，它们需要在用户级别实现。用户级线程完全由运行时系统（用户级库）管理。内核对用户级线程一无所知，并像单线程进程一样管理它们。用户级线程小而快，每个线程由一台 PC 表示，寄存器、堆栈和小线程控制块。创建一个新线程、在线程之间切换和同步线程都是通过过程调用完成的。即没有内核参与。用户级线程比内核级线程快一百倍。

好处：

这种技术最明显的优点是用户级线程包可以在不支持线程的操作系统上实现。用户级线程不需要修改操作系统。简单表示：每个线程都由一个 PC、寄存器、堆栈和一个小控制块简单表示，所有这些都存储在用户进程地址空间中。简单管理：简单来说就是创建线程、线程间切换和线程间同步都可以在没有内核干预的情况下完成。快速高效：线程切换并不比过程调用贵多少。

缺点：

用户级线程并不是一个完美的解决方案，就像其他一切一样，它们是一种权衡。由于用户级线程对操作系统不可见，因此它们与操作系统的集成度不高。因此，Os 可能会做出糟糕的决定，例如用空闲线程调度进程、阻塞其线程发起 I/O 的进程，即使该进程有其他线程可以运行，以及用持有锁的线程取消调度进程。解决这个问题需要内核和用户级线程管理器之间的通信。线程和操作系统内核之间缺乏协调。因此，无论进程内有 1 个线程还是 1000 个线程，整个进程都获得一个时间片。由每个线程将控制权交给其他线程。用户级线程需要非阻塞系统调用，即 多线程内核。否则，即使进程中还有可运行的线程，整个进程也会在内核中阻塞。例如，如果一个线程导致页面错误，则进程阻塞。

# xcode - NSURLConnection 响应未完成

> ID：15983873
> 
> 赞同：1
> 
> 时间：2013-04-13T03:23:33.673
> 
> 标签：xcode, nsurlconnection, nsjsonserialization

我正在使用 NSURLConnection 调用请求 JSON 数据的服务器。

出于某种原因，我得到了部分回复。如果我通过浏览器点击网址，则响应正确。奇怪的是它只在某个时候发生。所以我很难调试这个问题。

然后当因为响应不完整时，我收到以下错误： *错误域 = NSCocoaErrorDomain 代码 = 3840“操作无法完成。（可可错误 3840。）”（字符 0 周围的值无效。） UserInfo = 0xa4634a0 {NSDebugDescription =字符 0 周围的值无效。} { NSDebugDescription = "字符 0 周围的值无效。"; }*

我想这也可能是服务器本身的问题。这是我的代码：

```
-(void) getShareHistory:(NSString *)range paging:(NSInteger *)page{
     NSString *post = [NSString stringWithFormat:@"range=%@&paging=%@",
                      range,
                      [NSString stringWithFormat:@"%ld",(long)page]];
     NSString *url = [NSString stringWithFormat:@"http://www/domai.com/handle_share_links.php?action=history"];
     NSData *post_data = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
     NSString *postLength = [NSString stringWithFormat:@"%d", [post_data length]];
     NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
     [request setCachePolicy:NSURLRequestUseProtocolCachePolicy];
     [request setURL:[NSURL URLWithString:url]];
     [request setHTTPMethod:@"POST"];
     [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
     [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
     [request setHTTPBody:post_data];

     self.shareHistoryConn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)response{
     NSString *strData = [[NSString alloc]initWithData:response encoding:NSASCIIStringEncoding];
     NSLog(@"response %@",strData);
     NSError *jsonParsingError = nil;
     if(connection == self.shareHistoryConn)
     {
        NSArray *data = [NSJSONSerialization JSONObjectWithData:response options:NSJSONReadingAllowFragments error:&jsonParsingError];
    if(!jsonParsingError)
    {
        [[self delegate] onGetShareHistorySuccess:data];
    }else{
        [[self delegate] onGetShareHistoryFailed:jsonParsingError];
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:25:33.627

你看到的是正常行为。`didReceiveData`可以调用任意次数。继续积累数据直到获得`connectionDidFinishLoading`.

标准的委托结构是这样的：

```
- (void) connection:(NSURLConnection *)connection
        didReceiveResponse:(NSURLResponse *)response {
    // connection is starting, clear buffer
    [self.receivedData setLength:0];
}

- (void) connection:(NSURLConnection *)connection
        didReceiveData:(NSData *)data {
    // data is arriving, add it to the buffer
    [self.receivedData appendData:data];
}

- (void)connection:(NSURLConnection*)connection
        didFailWithError:(NSError *)error {
    // something went wrong, clean up interface as needed
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // all done, we are ready to rock and roll
    // do something with self.receivedData
} 
```

始终实现所有四个委托方法。

# android - 如何获取专辑的 MusicBrainz ID

> ID：15983877
> 
> 赞同：3
> 
> 时间：2013-04-13T03:24:02.357
> 
> 标签：android, musicbrainz

我想使用[CoverArtArchiveClient](https://github.com/lastfm/coverartarchive-api)从 MusicBrainz 加载专辑图像，但它需要 MusicBrainz ID ( [MBID](http://musicbrainz.org/doc/MusicBrainz_Identifier) )。有人可以提供有关如何获取特定专辑的 MBID 的信息吗？代码示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:20:11.670

The details depend a lot on what representation you have of "a particular album".

In general MusicBrainz provides a web service (in XML and json format) where you can [search](http://musicbrainz.org/doc/Development/XML_Web_Service/Version_2/Search) for MusicBrainz entities, which will also give you the MBID. You want to get the MBID of release entities.

Since you seem to be developing on Android in Java you might be interested in [musicbrainzws2-java](http://code.google.com/p/musicbrainzws2-java/) the Java binding of the Web Service.

There are [other language bindings/libraries](http://musicbrainz.org/doc/Development/XML_Web_Service/Version_2#Libraries_to_use_the_Web_Service) available for the current version (WS/2 = "NGS") of the web service and you always have the option to use the web service directly.

If you have the album available in the form of tagged audio files, then you should try to extract the tags, since sometimes MBIDs are already available in the files and you don't have to search on MusicBrainz.

EDIT:
[SO how-to-get-album-image-using-musicbrainz](https://stackoverflow.com/questions/13453678/how-to-get-album-image-using-musicbrainz]) has an answer that tells how to use the web service directly. The MusicBrainz web service can also return links/urls to coverart directly (as described in that answer). So you save another call to the CoverArtArchive.

# node.js - 无法连接到本地主机：使用 CasperJS 进行 ExpressJS 应用程序测试套件

> ID：15983878
> 
> 赞同：3
> 
> 时间：2013-04-13T03:24:11.383
> 
> 标签：node.js, express, phantomjs, casperjs

在使用 CasperJS 为基于 ExpressJS 的 Web 应用程序创建功能测试套件时，我似乎遇到了一个非常基本的问题。我似乎无法连接到 t

我创建了一个准系统 Express 应用程序来使用 Express 可执行文件进行测试，例如`express myapp`. 我用`node app.js`.

下面是测试脚本，我要做的只是连接到我的 Express 页面并检查标题，应该是“Express”。

```
var casper = require("casper").create({
        logLevel: "debug"
});

casper.start("localhost:3000/")

casper.then(function() {
        this.test.assertTitle("Express", "Express homepage title is the one expected");
});
casper.run(function() {
        this.exit();
}); 
```

当我尝试连接时`localhost`，如上所述，这是我收到的错误消息。casper 似乎找不到标题。

```
FAIL Express homepage title is the one expected
#    type: assertTitle
#    subject: ""
#    expected: "Express" 
```

如果我更改为尝试连接到我的服务器的外部域，例如`casper.start("http://mydomain.com:3000/")`，那么测试通过。

```
PASS Express homepage title is the one expected 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-07T15:02:58.823

如果你确定你在 localhost 的 3000 端口上，我会试试这个：

```
casper.start("http://localhost:3000") 
```

# python - 确定 Python 的实际内存使用情况

> ID：15983882
> 
> 赞同：1
> 
> 时间：2013-04-13T03:24:35.063
> 
> 标签：python, windows, memory-profiling

我目前正在尝试调试我的 Python 程序的内存使用情况（在带有 CPython 2.7 的 Windows 上）。但不幸的是，我什至找不到任何方法来可靠地测量它当前使用的内存量。

我一直在使用任务管理器/资源监视器来测量进程内存，但这似乎只对确定峰值内存消耗有用。很多时候，即使在相关对象被垃圾回收之后很长时间，Python 也不会减少提交或工作集。

有没有办法找出 Python 实际使用了多少内存，或者如果没有，强制它释放未使用的内存？我不想使用任何需要重新编译interperter的东西。

证明它没有释放未使用内存的行为示例：

```
(after some calculations)   # 290k
gc.collect()                # still 290k
x = range(9999999)          # 444k
del x                       # 405k
gc.collect()                # 40k 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T04:05:16.047

> 有什么方法可以找出 Python 实际使用了多少内存，

不是来自 Python 内部。

您可以使用[*sys.getsizeof*](http://docs.python.org/3/library/sys.html#sys.getsizeof)大致了解每个对象的内存使用情况，但是它不会捕获总内存使用情况、过度分配、碎片、未使用但未释放回操作系统的内存。

[*有一个名为Pymler*](http://honhosted.org/Pympler/index.html)的第三方工具可以帮助进行内存分析。此外，还有一个称为[Guppy](http://guppy-pe.sourceforge.net/)的编程环境，用于对象和堆内存大小调整、分析和分析。还有一个类似的项目叫做[PySizer](http://pysizer.8325.org/) ，它带有一个用于 Python 代码的内存使用分析器。

> 还是失败了，迫使它释放未使用的内存？

没有用于强制释放内存的公共 API。

# android - 如何创建 Apple 应用商店或 Google Play 的网址以实际打开应用商店？

> ID：15983886
> 
> 赞同：11
> 
> 时间：2013-04-13T03:25:39.900
> 
> 标签：android, html, ios, mobile

我有一个网站，其中包含将人们发送到应用商店和谷歌播放以下载我的应用的链接。

但是常规链接只是转到该网站。我该如何更改它，以便如果人们在移动设备上，该链接会为他们打开应用商店或谷歌播放？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T03:37:32.457

对于 Android 应用程序，您可以直接链接到 Google Play 商店。Android 操作系统会在用户点击链接后立即提示用户是要在浏览器中打开链接还是在 Google Play 商店应用程序中打开链接。任何[http://play.google.com?id=](http://play.google.com?id=) * 链接都会在 Android 设备上以这种方式提示用户。

如果您有 Android 手机，只需[通过此链接尝试一下 Android 版 Facebook 应用程序](https://play.google.com/store/apps/details?id=com.facebook.katana)

对于 iPhone，请查看[此答案](https://stackoverflow.com/a/2337601/815679)，该答案对于您想要做的事情非常完整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-28T08:58:32.360

我使用[了 onelink.to](http://onelink.to)，到目前为止它运行良好，它也生成了一个二维码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-16T10:38:10.923

您可以使用[http://toSto.re](http://toSto.re)将人们重定向到正确的应用商店或您的网站，具体取决于用户设置的用户代理。

像 toSto.re/dawawas 这样的 URL 可以在那里轻松配置。

# java - 是否可以使用图形对图像进行悬停效果？

> ID：15983887
> 
> 赞同：0
> 
> 时间：2013-04-13T03:25:52.947
> 
> 标签：java, swing, graphics

我正在尝试使用图形在 Swing 中的多个图像上制作悬停效果，我知道这可以通过使用 CSS 来完成，但在 Java 中制作这种效果时感到困惑，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:31:58.440

是的，完全有可能做到这一点。

假设您有一个`JPanel`带有图像的图像，每次用户将鼠标悬停在它上面时您都想更改它。代码将是这样的：

```
JPanel panel = new JPanel(); // create a JPanel
this.setupGI(panel); // prepare your background
panel.addMouseListener(new MouseHandler());  // add a listener
this.getContentPane.add(panel); // add it to JApplet / JFrame 
```

`MouseHandler`这是在您的自定义处理程序类 中添加侦听器。

```
class MouseHandler extends java.awt.event.MouseAdapter{
  @Override public void mouseEntered(MouseEvent e){
    // your logic here
  }
  @Override public void mouseExited(MouseEvent e){
    //
  }
} 
```

现在，`MouseHandler`班级将如何访问`JPanel`，这取决于您。通常，我将处理程序类设为子类，以便它可以访问封闭类的所有方法和字段。或者，您可以创建 getter 和 setter 方法。它是由你决定。

更多信息：http: [//docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:30:43.780

将 MouseListener 与事件 mouseEntered 和 mouseExited 一起使用。

# jquery - 使用 Jquery 删除文本

> ID：15983888
> 
> 赞同：1
> 
> 时间：2013-04-13T03:26:05.073
> 
> 标签：jquery, css, dom, html

我正在使用以下代码隐藏某些文本（2009、2010、2011、2012、2013），使其不显示在 div 中：

```
<script type="text/javascript">
$(function ($) {
var el = $("#right_side");
//replace(/word to remove/ig, "");  
el.html(el.html().replace(/\(2009\)/ig, ""));
el.html(el.html().replace(/\(2010\)/ig, ""));
el.html(el.html().replace(/\(2011\)/ig, ""));
el.html(el.html().replace(/\(2012\)/ig, ""));
el.html(el.html().replace(/\(2013\)/ig, ""));
});
</script> 
```

首先，我如何压缩这段代码，以便我只使用 1 el.html 等。

其次，如何在加载 DOM 之前先触发此代码？目前，在代码启动之前，我可以在一两秒内看到不需要的文本。这种延迟也会导致 adsense 广告消失。我将这段代码直接放在 JQUERY 之后的 HEAD 中，这是第一个加载的。

[我在这里](http://www.trailerstars.com)有一个活生生的例子。查看右侧栏中的“最新预告片”部分，了解代码的目标位置。

对此的任何帮助将不胜感激。

多谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:29:31.777

您可以尝试使用正则表达式 - `el.html(el.html().replace(/(20[\d\d]{2})/ig, '')`。也许有包含隐藏文本的容器或`visibility: none`. 仅当替换完成后，才将其放回视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:30:01.940

尝试

```
el.html(el.html().replace(/\(2009|2010|2011|2012|2013\)/ig, "")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:31:24.373

```
$(function ($) {
var el = $("#right_side");
//replace(/word to remove/ig, "");  
CleanUp(el,2009);
CleanUp(el,2010);

...
...
});
function CleanUp(el,value)
{
el.html(el.html().replace('/\(' + value + '\)/ig', ""));

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T03:32:53.817

要替换以 20 开头并以两位数结尾的任何内容，您可以使用以下内容。如果这是在标题中加载的，则必须等待 DOM 加载。

```
el.html=el.html().replace(/\(20\d\d\)/g, ''); 
```

如果你宁愿它是一个真正的 OR，你可以继续重复......

```
el.html=el.html().replace(/\((2009|2010|2011|2012|2013)\)/g, ''); 
```

编辑：显然，这个库可用于在为某些浏览器加载时修改 DOM，可以设置回调以替换正确的 CSS 类 - [https://github.com/jamesallardice/Progressive.js](https://github.com/jamesallardice/Progressive.js)

# javascript - 动态 google-code-prettify 不起作用

> ID：15983894
> 
> 赞同：10
> 
> 时间：2013-04-13T03:27:46.617
> 
> 标签：javascript, google-code-prettify

按钮是否可以调用会“美化”动态的函数`<code><pre>`？我无法让它工作。

页面加载后，初始`<code>`值是美化的（？），但是当我更改它并在之后调用 prettyPrint() 时，它不再起作用。

示例：http: [//jsfiddle.net/uwBjD/2/](http://jsfiddle.net/uwBjD/2/)

编辑：对不起，我使用的是本地 prettify.js。更新了一下，还是遇到了同样的错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-13T03:52:39.217

显然，在代码美化之后，添加了一个额外的类，即`prettyprinted`. 任何具有类的东西`prettyprinted`都不会被重新美化。您需要在调用函数之前删除该类：

```
$('input[type=button]').click( function() {
    $("#jsExample").text("    var user = 'private'; //Do NOT store your API Key on a script.")
        .parent().removeClass("prettyprinted");

   prettyPrint();
}); 
```

[http://jsfiddle.net/uwBjD/3/](http://jsfiddle.net/uwBjD/3/)

# wcf - WCF 终结点部署错误

> ID：15983906
> 
> 赞同：0
> 
> 时间：2013-04-13T03:29:59.307
> 
> 标签：wcf, endpoint

我创建了 2 个 WCF 端点，服务端点驻留在桌面应用程序上（IP 地址为 10.8.20.175）；客户端端点驻留在 Web 托管的应用程序上。

这是服务端点配置

```
<services>
  <service behaviorConfiguration="NotificationServiceBehavior"
    name="NotificationService">
    <endpoint address="" binding="netTcpBinding" contract="INotificationService" />
    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:3337/NotificationService" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

这是客户端端点配置

```
<system.serviceModel>
<client>
  <endpoint address="net.tcp://10.8.20.175:3337/NotificationService"
    binding="netTcpBinding" contract="INotificationService"
    name="NetTcpBinding_INotificationService" />
</client>
<bindings>
  <netTcpBinding>
    <binding sendTimeout="00:10:00" maxReceivedMessageSize="1000000" name="NetTcpBinding_INotificationService"/>
  </netTcpBinding>
</bindings>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

请注意，在端点地址中，我放置了服务端点的实际 IP 地址。当我在 localhost 上测试服务端点和客户端端点之间的通信时，该地址是 localhost:3337 并且通信良好。现在，当我部署端点时，出现以下错误：

套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:10:00”。

System.Net.Sockets.SocketException：远程主机在 System.ServiceModel.Channels 的 System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) 处强行关闭了现有连接。 SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean close)

日志说连接被远程主机强行关闭，这意味着客户端端点实际发送了请求并且它到达了服务端点？在这一点上我很困惑。我不确定客户端端点是否可以到达服务端点。

顺便说一句，从客户端端点机器，我可以 ping 服务端点的机器，也可以在端口 3337 上远程登录到远程机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:27:59.940

以我的经验，这表明您的服务已被客户联系并激活。然而，在通话过程中发生了一些事情，导致该服务的回复被终止。

最好的检查方法是为您的服务打开[WCF 跟踪](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)。这应该有助于您更好地了解服务器端正在发生的事情。

# togglebutton - 切换按钮不起作用

> ID：15983912
> 
> 赞同：0
> 
> 时间：2013-04-13T03:30:27.963
> 
> 标签：togglebutton, jquery

我的切换按钮工作正常，但我对代码的另一部分进行了一些调整，现在它已经停止工作。同一面板中的重置按钮也可以正常工作。这就是我正在做的-

```
$(document.getElementById('light')).toggle(function () {
        $(document.getElementById('grid ')).css('backgroundColor ', '#000000');
        $(document.getElementByClassName('circle')).css('borderColor', '# FFFF99 ');
    }, function () {
        $(document.getElementById('grid ')).css('backgroundColor ', '#c0c0c0 ');
        $(document.getElementByClassName('circle ')).css('borderColor ', '#FAEBD7 ');
    }); 
```

这是jsfiddle：http: [//jsfiddle.net/riamirchi/yhb9A/84/](http://jsfiddle.net/riamirchi/yhb9A/84/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:38:56.977

虽然我不明白什么是工具按钮代表你我对你的代码的那部分做了一些改进：

```
$('#light').toggle(function () {
    $('#grid ').css('backgroundColor ', '#000000');
    $('.circle').css('borderColor', '# FFFF99 ');
}, function () {
    $('#grid ').css('backgroundColor ', '#C0C0C0 ');
    $('.circle ').css('borderColor ', '#FAEBD7 ');
});

$('#reset').click(function () {
    $('#grid').css('backgroundColor ', '#C0C0C0');
    $('.circle').each(function () {
        $(this).css('backgroundColor', '#C0C0C0');
    });
}); 
```

[http://jsfiddle.net/yhb9A/87/](http://jsfiddle.net/yhb9A/87/)

# eclipse-plugin - Eclipse 插件“在此文件位置打开资源管理器”用于包资源管理器

> ID：15983913
> 
> 赞同：14
> 
> 时间：2013-04-13T03:30:30.283
> 
> 标签：eclipse-plugin

是否有任何插件可以让我在 Windows 资源管理器中打开我在包资源管理器中选择的文件？
我正在包资源管理器的右键菜单中寻找一个额外的菜单选项。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-22T08:20:42.490

从[Eclipse 4.4 (Luna)](https://www.eclipse.org/eclipse/news/4.4/eclipse-news-part1.php)开始，上下文菜单中有一个*Show in System Explorer*命令可用。

[![在此处输入图像描述](https://i.stack.imgur.com/evsrp.png)](https://i.stack.imgur.com/evsrp.png)

还可以通过Linux /Windows 和macOS访问*Show In菜单。*`Alt+Shift+W``Alt+Cmd+W`

虽然有一个适用于大多数情况的默认设置，但可以在*General > Workspace*首选项页面上配置启动系统资源管理器的命令。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-13T03:41:14.733

嗯...看起来我们都有这个问题。你可以使用[这个](http://marketplace.eclipse.org/content/pextools)插件来做到这一点，还有更多......

对不起自我广告......但我认为这就是你要找的！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-05T14:48:12.627

我已经使用[StartExplorer](http://marketplace.eclipse.org/node/641101)好几年了。它易于使用，是最新的，并且可以简单地完成您对它的期望。你可以通过安装它

```
Help > Eclipse Marketplace... 
```

用法：

[![示例用法](https://i.stack.imgur.com/wVdxpm.png)](https://i.stack.imgur.com/wVdxp.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T06:32:13.450

如果您可以在没有上下文菜单的情况下生活，您甚至可以在没有任何其他插件的情况下获得它，只需[在活动选择上使用启动配置](http://www.eclipsezone.com/eclipse/forums/t77655.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T03:42:26.987

我不确定是否有直接的方法，但是您可以做的是右键单击文件/文件夹，转到属性，然后复制“位置”并将该字符串放入空白的资源管理器窗口。

所以，

右键--> 属性--> 位置--> ctrl-c

打开资源管理器窗口 --> ctrl-v --> 转到按钮

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-10T19:34:47.047

您可能想看看[http://marketplace.eclipse.org/content/eexplorer](http://marketplace.eclipse.org/content/eexplorer)

*   使 Windows 资源管理器保持同步，无需通过上下文菜单手动同步
*   更少的资源管理器窗口 -> 更少的混乱
*   弹出本地资源管理器的可能性
*   键盘快捷键

:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-19T17:00:01.627

这是一个简单的插件，只有 shell 和文件资源管理器

[http://marketplace.eclipse.org/content/open-here-eclipse](http://marketplace.eclipse.org/content/open-here-eclipse)

# vb.net - VB.NET将行数据添加到List（Of T）类型的公共类/公共字段对象引用未设置为对象的实例

> ID：15983929
> 
> 赞同：0
> 
> 时间：2013-04-13T03:33:52.357
> 
> 标签：vb.net, class, public, generic-list

我正在尝试将行添加到具有公共字段的公共类中并且出现错误：对象引用未设置为对象的实例

```
 Public Class EmailRecipient
        EmailAddress As String = ""
        FullName As String = ""
    End Class

    Public Class EmailDetails
        Public FromEmail As String = ""
        Public ToEmails As List(Of Emails) = nothing  
    End Class

    Public Sub SetEmailDetails
        'Populate EmailRecipient Class
        Dim er As New EmailRecipient
        er.EmailAddress = "rodney@norespect.com"
        er.FullName = "Rodney Dangerfield"

        'Populate EmailDetails Class
         Dim ed As New EmailDetails
         ed.FromEmail = "sender@danger.com"   'This works fine
         ed.ToEmails.Add(er)                  'Here error happens
    End Sub 
```

我猜我需要先创建一个 EmailRecipient 类的实例，然后才能向其中添加项目。

不知道如何使用公共类中的公共字段来做到这一点？

这是艰难的一天。我今天早上起床，穿上一件衬衫，一个纽扣掉了下来。我拿起公文包，把手掉了。我害怕去洗手间。

谢谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:01:23.923

> 我猜我需要创建一个 EmailRecipient 类的实例

您已经有一个 EmailRecipient 类的实例。那是你的 er 变量。您实际上有两个错误。首先，您将 ToEmails 显式设置为 Nothing：

> 公开 ToEmails 作为列表（电子邮件）= 无

这意味着您的 ToEmails 变量是空引用。它还没有一个实际的对象。

第二个问题是你不应该得到那个 excpetion，因为这甚至不应该编译。您将 ToEmails 定义为 List(Of Emails)，但尝试向其中添加“EmailRecepient”类型的对象。那应该是编译器错误。如果不是，您需要重新打开 Option Strict 或 Option Infer。

因此，您真正需要的是 List(Of EmailRecipient) 类型的实例。像这样修复错误的代码行：

```
Public ToEmails As New List(Of EmailRecipient) 
```

# python - Google Drive API 编写一个新的驱动器文件，它不是驱动器“查看器”类型

> ID：15983934
> 
> 赞同：1
> 
> 时间：2013-04-13T03:34:19.483
> 
> 标签：python, file-upload, google-drive-api, google-docs-api

我开始使用 GooG Drive API。我已经成功完成了 quickstart.py 教程/示例。都好。

显示在我的云端硬盘中的文件作为云端硬盘“查看器”文件打开，而不是我需要的可编辑文件。我猜它的 MIMEtype，但文档是一个 .txt 文件，所以我不确定它应该设置为什么。那么我如何将它写为驱动器可编辑文件类型？？？

谢谢

达沃

```
media_body = MediaFileUpload(FILENAME, mimetype='text/plain', resumable=True)
body = {
  'title': 'My document',
  'description': 'A test document',
  'mimeType': 'text/plain'
}

file = drive_service.files().insert(body=body, media_body=media_body).execute()
pprint.pprint(file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:31:35.627

您正在以 txt 格式上传文件，这是任何 Google 编辑器都无法编辑的格式。

您应该将文件转换为相应的原生 Google 格式，以使其在 Drive 默认查看器中可编辑：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

要在上传期间启用转换，您必须`convert=True`在插入请求中设置：

```
file = drive_service.files().insert(body=body, media_body=media_body, convert=True).execute() 
```

# javascript - 如何在 Rails 应用程序中显示 d3.js 圆包图？

> ID：15983935
> 
> 赞同：0
> 
> 时间：2013-04-13T03:34:42.593
> 
> 标签：javascript, json, ruby-on-rails-3, d3.js, circle-pack

我一直在努力做到这一点：[http](http://bl.ocks.org/mbostock/4063269#flare.json) : //bl.ocks.org/mbostock/4063269#flare.json 示例在我的示例 Rails 应用程序中工作以了解 d3.js。但是，我很难让它发挥作用。

我将以下代码放入我的 index.html.erb 文件中：

```
<script type="text/javascript">

    var diameter = 960,
            format = d3.format(",d"),
            color = d3.scale.category20c();

    var bubble = d3.layout.pack()
            .sort(null)
            .size([diameter, diameter])
            .padding(1.5);

    var svg = d3.select("body").append("svg")
            .attr("width", diameter)
            .attr("height", diameter)
            .attr("class", "bubble");

    d3.json("assets/data/flare.json", function(error, root) {
        var node = svg.selectAll(".node")
                .data(bubble.nodes(classes(root))
                .filter(function(d) { return !d.children; }))
                .enter().append("g")
                .attr("class", "node")
                .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

        node.append("title")
                .text(function(d) { return d.className + ": " + format(d.value); });

        node.append("circle")
                .attr("r", function(d) { return d.r; })
                .style("fill", function(d) { return color(d.packageName); });

        node.append("text")
                .attr("dy", ".3em")
                .style("text-anchor", "middle")
                .text(function(d) { return d.className.substring(0, d.r / 3); });
    });

    // Returns a flattened hierarchy containing all leaf nodes under the root.
    function classes(root) {
        var classes = [];

        function recurse(name, node) {
            if (node.children) node.children.forEach(function(child) { recurse(node.name, child); });
            else classes.push({packageName: name, className: node.name, value: node.size});
        }

        recurse(null, root);
        return {children: classes};
    }

    d3.select(self.frameElement).style("height", diameter + "px");

</script> 
```

我将flare.json 文件放在我的app/assets/data 目录中。但是，似乎 javascript 无法从该位置加载flare.json 文件。我只是不确定如何使这项工作:(如何指定 json 文件的位置，以便 javascript 可以加载它并且代码可以工作？任何建议都会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T20:04:10.830

我没有通过 d3.json 加载 json 文件，而是将其内容呈现在 javascript 文件上并使用变量来存储它。

```
var root = <%= render partial: 'controller_view/flare.json', formats: [:json] %>; 
```

# android - 如何在视图寻呼机中获取 sqlite 行 ID

> ID：15983939
> 
> 赞同：0
> 
> 时间：2013-04-13T03:35:11.693
> 
> 标签：android, sqlite, android-viewpager

我创建了一个带有 textview 的视图寻呼机，它从 SQLITE 数据库加载文本。单击删除按钮时，我想删除此页面，但无法获取 sqlite 行的 ID。

```
public void onPageSelected(int position) {

            page = position;

        } 
```

上面的代码返回幻灯片的位置，即 0、1、2、3 等，但不是 sqlite 行 id。有什么方法可以获取与此 textview 关联的 id。

# c# - 将文本转换为 HTML 的数字字符引用

> ID：15983941
> 
> 赞同：0
> 
> 时间：2013-04-13T03:35:26.603
> 
> 标签：c#, html, unicode

我需要在 C# 中将中文转换为 Unicode，类似于[此转换器](http://www.chinese-tools.com/tools/converter-unicode.html)。例如

```
"大家好" -> "&#22823;&#23478;&#22909;" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:19:56.693

```
string input = "大家好";

StringBuilder sb = new StringBuilder();

for (int i = 0; i < input.Length; i += char.IsSurrogatePair(input, i) ? 2 : 1)
{
    int codepoint = char.ConvertToUtf32(input, i);
    sb.Append('&').Append('#').Append(codepoint).Append(';');
}

var result = sb.ToString();
// result == "&#22823;&#23478;&#22909;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:25:13.453

*char*类中有一个函数可以将 char（我猜是 unicode）转换为 utf-16 litera 值，我认为它可能会对您有所帮助

```
public static int ConvertToUtf32(string s, int index) 
```

进一步参考参见[http://msdn.microsoft.com/en-us/library/z2ys180b.aspx](http://msdn.microsoft.com/en-us/library/z2ys180b.aspx)

# javascript - 为什么我的地图没有在 jQuery 选项卡中呈现？

> ID：15983947
> 
> 赞同：6
> 
> 时间：2013-04-13T03:36:17.557
> 
> 标签：javascript, jquery, google-maps

如果我在默认隐藏的选项卡中呈现地图，然后导航到该选项卡（使其可见），则地图无法正确呈现。但是当我刷新页面时，地图会正确呈现。

**问题** ![地图图像未正确渲染。](https://i.stack.imgur.com/3Koj7.jpg)

**谷歌地图的Javascript**

```
var map;
function initialize() {
    var latlng = new google.maps.LatLng(serLat, serLang); // - 34.397, 150.644);
    var myOptions = {
        zoom: 10,

        width: 1270,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"), myOptions);
    var marker = new google.maps.Marker
    (
        {
            position: new google.maps.LatLng(serLat, serLang),
            map: map,
            width: 1270,
            title: 'Click'
        }
    );
    //        var infowindow = new google.maps.InfoWindow({
    //            content: cntnt
    //        });
    //        google.maps.event.addListener(marker, 'click', function() {
    //            // Calling the open method of the infoWindow 
    //            infowindow.open(map, marker);
    //        });
}
window.onload = initialize; 
```

**Jquery 选项卡的 URL** [http://quickerbook.imobisoft.eu/App_Themes/js/jquery.tabify.js](http://quickerbook.imobisoft.eu/App_Themes/js/jquery.tabify.js)

**标签的 HTML**

```
<ul id="tabs-hd">
    <li class="active"><a href="#tab1">Tab One</a></li>
    <li><a href="#tab2">Tab Two</a></li>
    <li><a href="#tab3">Tab for Google Map</a></li>
</ul>

<div id="tab1">Content for tab one...</div>
<div id="tab2">Content for tab two...</div>
<div id="tab3"><div id="map"></div></div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-13T08:51:12.730

您需要做两件事：

1.  当您显示隐藏的选项卡时，请确保您正确调整地图所在的容器 DIV 的大小。

2.  要么等到 DIV 可见并调整大小，然后再在其中创建地图，要么在 DIV 可见并调整大小后，向地图发送调整大小消息：

`google.maps.event.trigger( map, 'resize' );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-06T16:47:56.567

我所做的只是在 div 元素的样式中添加一个高度，然后地图开始出现。

> ```
> <div class="event-details" style="height:500px;" id="map_canvas">
> 
> </div> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T09:49:58.767

嗨，我有同样的问题，你要点击你的 Tab 按钮，然后你必须打电话`initialize()`；看看我在做什么我在每个标签的点击属性上设置了这个功能

```
function ChangeTabs(e){
   $('#tabs-1').hide();
   $('#tabs-2').hide();
   $('#tabs-3').hide();
   $('#tabs-4').hide();

   var a = $.browser;
    if (a.msie)
    {
        $(e.srcElement.hash).show();
        if(e.srcElement.hash=='#tabs-3')
            initialize();
    }
    else
    {
       $(e.currentTarget.hash).show();
       if(e.currentTarget.hash=="#tabs-3")
            initialize();
    } 
```

# linux - vim 弄乱了颜色和窗口

> ID：15983951
> 
> 赞同：0
> 
> 时间：2013-04-13T03:36:46.507
> 
> 标签：linux, vim

看来我的vim遇到了问题，它无法识别自己的文件类型，当我编辑〜/ .vimrc时，当我设置'syntax on'时语法没有突出显示，但是当我编辑.c文件时，它有语法高亮。另一个问题是，当我编辑 ~/.vimrc 时，我的 VIM 似乎在 shell 中运行，我什至可以滚动到我以前的命令！当我编辑其他文件类型时，它没有问题。这是屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/aL2aN.png)

# javascript - 实时评论部分

> ID：15983952
> 
> 赞同：-1
> 
> 时间：2013-04-13T03:37:26.253
> 
> 标签：javascript, jquery, ajax, comments, live-streaming

嗨，我使用了这个 php 代码：

```
<?php
if (isset ($_GET['update']))
{
    echo $status;
    die ();
}
?> 
```

这个javascript：

```
<script type="text/javascript">
            $(document).ready (function () 
            {
                var updater = setTimeout (function () 
                {
                    $('div#center2').load ('index.php', 'update=true');
                }, 5000);
            });
            </script> 
```

这确实刷新了我的评论所在的部分，但它基本上删除了评论并且不发布任何评论，显示一个空白区域。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:26:15.857

制作一个`action.php`文件。

```
if (isset($_POST['action']) && $_POST['action'] == 'update_comments') {
     // echo all updated comments you want
} 
```

然后在 index.php 页面中像这样使用 jquery，

```
var updater = setTimeout (function () {
     $.post("action.php", {action:'update_comments'}, function(data) {
          $('div#center2').html(data);
     }
}, 5000); 
```

这里，在 jquery 第二行，`action.php`是`action.php`文件的 url。该文件可用于许多其他类似的功能，只需向其添加更多 if 循环和操作名称。

# javascript - 传递变量追加

> ID：15983954
> 
> 赞同：0
> 
> 时间：2013-04-13T03:37:39.427
> 
> 标签：javascript, jquery, variables

在主页上，JS 将从新闻页面中抓取最多三个新闻故事，并将显示链接到完整故事的缩写版本。我遇到的问题是我试图连接的变量之一没有按预期进行。

主页：

```
<div id="news-autoloader">

</div> 
```

新闻页面：

```
<h3 id="news1">News Item 1</h3>

<p>Lorem ipsum dolor sit amet...</p>

<h3 id="news2">News Item 2</h3>

<p>Lorem ipsum dolor sit amet...</p>

// more or less of the same news items 
```

新闻页面可能没有项目，但我们将捕获最多三个，首先是标题，然后是 h3 标题后面的第一个 p 的 n 个字符（宁愿捕获 n 个单词，但那是在解决此问题之后！）。

```
<script>
$.get('company-news.html',
    function(data){
        var news1 = $(data).find('#news1 + p');
        var news2 = $(data).find('#news2 + p');
        var news3 = $(data).find('#news3 + p');

// see how many news items there are (there's probably a more graceful way of doing this!):

    if (news1.html() == null){
        var items = 0;
    } else if (news2.html() == null){
        var items = 1;
    } else if (news3.html() == null){
        var items = 2;
    } else {
        var items = 3;
    }

    if (items == 0){
        $('#news-autoloader').append('<h3>No News.</h3>');
    } else {
        for (i=1; i<=items; i++){
            var abc = '#news' + i;
            var def = 'news' + i;
            var url   = 'a href="company-news.html#news' +i;

            $('#news-autoloader').append($(abc,data)).append('<p>' + def.html().substr(0, 175) + ' <' + url + '">More</a></p>');
        }
    }
}, 'html');
</script> 
```

一切正常 -`abc`在第一个附加中正确评估，但在我们的第二个附加中，变量`def`没有。

我想知道三件事：

1）我如何`def`在第二个附录中工作，

2）有没有更优雅的方法来查找新闻项目的数量，

3）我如何限制字数而不是字符（所以缩写的句子是完整的）。

蒂亚！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:49:44.190

您的问题是您调用`...def.html()....`并且`def`既不是 jQuery 对象也不是元素。相反， 的值`def`是`'news' + i`，其中`i`是迭代次数。

如果您的意图是从带有`id`of的元素中获取 HTML，`news`那么您需要将 的值更改`def`为`'#news' + i`，然后包装`def`成一个 jQuery 对象`$(def)`, 函数：

`...$(def).html()....`

**更新**

如果我再次误解了您，而您要做的是渲染变量`news1`,`news2`和`news3`，那么您应该将这些变量放入一个数组中。

不使用数组就不能从 JavaScript 中的字符串引用变量。

如果是这种情况，您更新的代码将如下所示：

```
<script>
$.get('company-news.html',
    function(data){
        var newsData = [];
        newsData["news1"] = $(data).find('#news1 + p');
        newsData["news2"] = $(data).find('#news2 + p');
        newsData["news3"] = $(data).find('#news3 + p');

// see how many news items there are (there's probably a more graceful way of doing this!):

    if (newsData["news1"].html() == null){
        var items = 0;
    } else if (newsData["news2"].html() == null){
        var items = 1;
    } else if (newsData["news3"].html() == null){
        var items = 2;
    } else {
        var items = 3;
    }

    if (items == 0){
        $('#news-autoloader').append('<h3>No News.</h3>');
    } else {
        for (i=1; i<=items; i++){
            var abc = '#news' + i;
            var def = 'news' + i;
            var url   = 'a href="company-news.html#news' +i;

            $('#news-autoloader').append($(abc,data)).append('<p>' + $(newsData[def]).html().substr(0, 175) + ' <' + url + '">More</a></p>');
        }
    }
}, 'html');
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T04:02:42.830

1 更改`def.html()`为`$(abc).html()`它还不是 JQuery 对象

2 您可以将每个新闻对象存储在一个数组中，然后遍历该数组以添加您的项目。

```
var newsItems = [];  
for(var i = 1; i < 4; i++){  
    var newsElem = $(data).find('#news' + i + ' + p');  
    if(newsElem.html() != null){  
        newsItems.push(newsElem);  
    }  
} 
```

3 根据 def 的内容，类似这样的方法可能会获得前 10 个单词。将`text()`去除 HTML 标签，因此如果您需要保留这些标签，则工作量会更大。

```
$(newsItems[i]).text().split(' ').slice(0,10); 
```

# apache-pig - Pig ORDER 命令失败

> ID：15983956
> 
> 赞同：0
> 
> 时间：2013-04-13T03:37:53.983
> 
> 标签：apache-pig, latin

我正在尝试分析 apache 日志，目标是找出所有用户代理及其使用百分比。当结果包含每个用户代理、计数和百分比时，以下程序可以正常工作。当尝试根据最常用的顺序进行排序时，程序在最后一行失败。有人可以帮忙吗？

```
logs = LOAD '$LOGS' USING ApacheCombinedLogLoader AS (remoteHost, hyphen, user, time, method, uri, protocol, statusCode, responseSize, referer, userAgent);

uarows = FOREACH logs GENERATE userAgent;
total = FOREACH (GROUP uarows ALL) GENERATE COUNT(uarows) as count;
dump total; 

gpuarows = GROUP uarows BY userAgent;
result = FOREACH gpuarows {
       subtotal = COUNT(uarows);
       GENERATE flatten(group) as ua, subtotal AS SUB_TOTAL, 100*(double)subtotal/(double)total.count AS percentage;
       };
orderresult = ORDER result BY SUB_TOTAL DESC;
dump orderresult; 
```

奇怪的是“转储结果”工作得很好，所以这是 ORDER 行造成了麻烦

错误：

```
013-04-13 11:33:09,976 [Thread-48] INFO  org.apache.hadoop.mapred.MapTask - data buffer = 79691776/99614720
2013-04-13 11:33:09,976 [Thread-48] INFO  org.apache.hadoop.mapred.MapTask - record buffer = 262144/327680
2013-04-13 11:33:09,995 [Thread-48] WARN  org.apache.hadoop.mapred.LocalJobRunner - job_local_0005
java.lang.RuntimeException: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/home/dliu/ApacheLogAnalysisWithPig/pigsample_1573648613_1365823989735
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.partitioners.WeightedRangePartitioner.setConf(WeightedRangePartitioner.java:157)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:677)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
Caused by: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/home/dliu/ApacheLogAnalysisWithPig/pigsample_1573648613_1365823989735
    at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:235)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigFileInputFormat.listStatus(PigFileInputFormat.java:37)
    at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:252)
    at org.apache.pig.impl.io.ReadToEndLoader.init(ReadToEndLoader.java:177)
    at org.apache.pig.impl.io.ReadToEndLoader.<init>(ReadToEndLoader.java:124)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.partitioners.WeightedRangePartitioner.setConf(WeightedRangePartitioner.java:131)
    ... 6 more
2013-04-13 11:33:10,276 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - HadoopJobId: job_local_0005
2013-04-13 11:33:10,276 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Processing aliases orderresult
2013-04-13 11:33:10,276 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - detailed locations: M: orderresult[16,14] C:  R: 
2013-04-13 11:33:15,286 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Ooops! Some job has failed! Specify -stop_on_failure if you want Pig to stop immediately on failure.
2013-04-13 11:33:15,286 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - job job_local_0005 has failed! Stop running all dependent jobs
2013-04-13 11:33:15,287 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete
2013-04-13 11:33:15,287 [main] ERROR org.apache.pig.tools.pigstats.PigStatsUtil - 1 map reduce job(s) failed!
2013-04-13 11:33:15,288 [main] INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics: 

HadoopVersion   PigVersion  UserId  StartedAt   FinishedAt  Features
1.0.4   0.11.0  dliu    2013-04-13 11:32:27 2013-04-13 11:33:15 GROUP_BY,ORDER_BY

Some jobs have failed! Stop running all dependent jobs

Job Stats (time in seconds):
JobId   Maps    Reduces MaxMapTime  MinMapTIme  AvgMapTime  MedianMapTime   MaxReduceTime   MinReduceTime   AvgReduceTime   MedianReducetime    Alias   Feature Outputs
job_local_0002  1   1   n/a n/a n/a n/a n/a n/a 1-18,logs,total,uarows  MULTI_QUERY,COMBINER    
job_local_0003  1   1   n/a n/a n/a n/a n/a n/a gpuarows,result GROUP_BY,COMBINER   
job_local_0004  1   1   n/a n/a n/a n/a n/a n/a orderresult SAMPLER 

Failed Jobs:
JobId   Alias   Feature Message Outputs
job_local_0005  orderresult ORDER_BY    Message: Job failed! Error - NA file:/tmp/temp265162785/tmp896004388,

Input(s):
Successfully read 0 records from: "file:///home/dliu/ApacheLogAnalysisWithPig/access.log"

Output(s):
Failed to produce result in "file:/tmp/temp265162785/tmp896004388"

Counters:
Total records written : 0
Total bytes written : 0
Spillable Memory Manager spill count : 0
Total bags proactively spilled: 0
Total records proactively spilled: 0

Job DAG:
job_local_0002  ->  job_local_0003,
job_local_0003  ->  job_local_0004,
job_local_0004  ->  job_local_0005,
job_local_0005

2013-04-13 11:33:15,291 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Some jobs have failed! Stop running all dependent jobs
2013-04-13 11:33:15,297 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias orderresult
Details at logfile: /home/dliu/ApacheLogAnalysisWithPig/pig_1365823931459.log 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T18:05:08.807

确保两件事：

1) 在本地模式下运行 pig: pig -x local 2) 设置 PIG_HOME 或 PIG_INSTALL 环境变量指向 pig 安装目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T23:18:13.670

请检查您是否还没有文件 /tmp/temp265162785/tmp896004388 您可以将相同的文件\目录用于不同的任务。

# java - Out.println() 在编程中

> ID：15983957
> 
> 赞同：0
> 
> 时间：2013-04-13T03:38:03.160
> 
> 标签：java, android, eclipse, gmt

我有两行要在我的主应用程序屏幕上打印。我试图将它们设置为一个变量以在主屏幕上打印。我放入Java文件的是：

```
public class TimeZoneConverter {

            public void main(String args[]) {

             //Date will return local time in Java  
             Date localTime = new Date(); 

             //creating DateFormat for converting time from local timezone to GMT
             SimpleDateFormat converter = new SimpleDateFormat("dd/MM/yyyy:HH:mm:ss");

             //getting GMT timezone, you can get any timezone e.g. UTC
             converter.setTimeZone(TimeZone.getTimeZone("GMT"));

             String1 = System.out.println("local time : " + localTime);;
             String2 = System.out.println("time in GMT : " + converter.format(localTime));

            }
        }

} 
```

它说字符串无法解析为变量。我将如何尝试将它放到我的主屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:39:51.273

> 我试图将它们设置为一个变量以在主屏幕上打印。

这就是您将它们提取到变量的方式。

```
String localTimeStr = "local time : " + localTime;
String gmtStr = "time in GMT : " + converter.format(localTime);
System.out.println(localTimeStr);
System.out.println(gmtStr); 
```

[System.out.println()](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#println%28%29)返回一个 void。你不能把它分配给任何东西。

[编辑]

由于您希望在 Android 屏幕上打印此内容，请使用[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)或查找文本视图并将[其设置为 text](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:41:03.497

> 它说字符串无法解析为变量。

那是因为你没有申报！具体来说，您试图分配给未声明的变量`String1`，`String2`因此 Java 编译器无法识别这些变量。

但即使您确实声明了它们，代码仍然无法正常工作。原因是那`println`是一种`void`方法；即它不返回任何东西。Java 语言不允许您将“无”分配给变量……因为它没有意义。

有关编写这些语句的正确方法，请参阅@Reimus 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:44:19.573

首先 `Syste.out.println()`不返回任何东西。这是一个空白。所以你必须这样说：

```
 System.out.println("local time : " + localTime);
 System.out.println("time in GMT : " + converter.format(localTime 
```

# r - 如何计算数据帧中每个时间段最后几行的平均值？

> ID：15983959
> 
> 赞同：1
> 
> 时间：2013-04-13T03:38:22.270
> 
> 标签：r, plyr

我收集了几个主题的数据，在一小时内每 15 秒一次，按时段划分。这是数据框的样子，时间是“Temps”，主题是“Sujet”，周期由“Palier”决定。

```
 data.frame':    2853 obs. of  22 variables:
 $ Temps         : Factor w/ 217 levels "00:15","00:30",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ Sujet         : int  1 1 1 1 1 1 1 1 1 1 ...
 $ Test          : Factor w/ 3 levels "VO2max","Tlim",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Palier        : int  1 1 1 1 1 1 1 1 1 1 ...
 $ RPE           : int  8 8 8 8 8 8 8 8 8 8 ...
 $ Rmec          : num  39.1 27.5 23.3 21.5 20.3 21.7 20.5 20.7 20.2 20.1 ... 
```

这里是data.frame的一瞥：

```
 Temps Sujet   Test Palier RPE Rmec Pmec Pchim Fr   Vt    VE  FeO2 FeCO2  VO2 VCO2  RER  HR VO2rel     VE.VO2    VE.VCO2
1 00:15     1 VO2max      1   8 39.1  185 473.6 19 1854 34.60 16.24  4.48 1353 1268 0.94 121   17.6 0.02557280 0.02728707
2 00:30     1 VO2max      1   8 27.5  185 672.4 17 2602 44.30 15.77  4.78 1921 1731 0.90 124   25.0 0.02306091 0.02559214
3 00:45     1 VO2max      1   8 23.3  185 794.5 18 2793 50.83 15.63  4.85 2270 2015 0.89 131   29.6 0.02239207 0.02522581
4 01:00     1 VO2max      1   8 21.5  185 860.3 20 2756 55.76 15.68  4.88 2458 2224 0.90 137   32.0 0.02268511 0.02507194
5 01:15     1 VO2max      1   8 20.3  185 909.3 23 2709 61.26 15.84  4.88 2598 2446 0.94 139   33.8 0.02357968 0.02504497
6 01:30     1 VO2max      1   8 21.7  185 853.7 21 2899 59.85 16.00  4.89 2439 2395 0.98 140   31.8 0.02453875 0.02498956 
```

每个“Palier”持续约 5 分钟，有 5 到 10 个“Palier”。对于每个主题和“Palier”，我需要计算所有变量最后 2 分钟的平均值。我还没有用 dcast() 或 ddply() 弄明白，但我是新手！

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:46:57.597

如果你把它变成一个`data.table`（你必须安装），你可以这样做

```
library(data.table)
dt = as.data.table(d)  # assuming your existing data frame was called d
last.two.min = dt[, mean(tail(Rmec, 9)), by=Sujet] 
```

这假设您的原始数据框被调用`d`，并且您想要最后 9 个项目（因为它是每 15 秒 - 如果您想要从 58:15 到 60:00，您可能需要最后 8 个）。

我认为这`Rmec`是您想要获得平均值的变量。如果您想要获得多个平均值，您可以执行以下操作：

```
last.two.min = dt[, list(mean.Rmec=mean(tail(Rmec, 9)),
                        mean.RPE=mean(tail(RPE, 9))), by=Sujet] 
```

# jquery - 检查 jQuery Ajax 是否有响应

> ID：15983961
> 
> 赞同：0
> 
> 时间：2013-04-13T03:38:33.180
> 
> 标签：jquery, typeerror, hasownproperty

我使用 jQuery Ajax 函数在 WordPress 主题上安装一些演示数据。下面的这个脚本适用于我以前研究过的主题，但是现在由于某种原因我收到了错误

**`Uncaught TypeError: Cannot call method 'hasOwnProperty' of null`**

这是我正在使用的脚本

```
/* Install Dummy Data */
function install_dummy() {
    $('#install_dummy').click(function(){
    $.ajax({
            type: "post",
            url: $AjaxUrl,
            dataType: 'json',
            data: {action: "install_dummy", _ajax_nonce: $ajaxNonce},
            beforeSend: function() {
                $(".install_dummy_result").html('');
                $(".install_dummy_loading").css({display:""});
                $(".install_dummy_result").html("Importing dummy content...<br /> Please wait, this process can take up to a few minutes.");                    
            }, 
            success: function(response){ 
                var dummy_result = $(".install_dummy_result");
                if(typeof response != 'undefined')
                {
                    if(response.hasOwnProperty('status'))
                    {
                        switch(response.status)
                        {
                            case 'success':
                                    dummy_result.html('Dummy Data import was successfully completed');
                                break;
                            case 'error':
                                    dummy_result.html('<span style="color:#f00">'+response.data+'</span>');
                                break;
                            default:
                                break;
                        }

                    }
                }
                $(".install_dummy_loading").css({display:"none"});
            }
        }); 

    return false;
    });
}
install_dummy(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:10:00.497

```
if(typeof response != 'undefined') 
```

这意味着：“是否有一个名为'response'的变量？”。由于您将其作为函数参数接收，因此存在**/存在**一个名为`response`.

**变量的存在并不意味着它不能存在`null`**。在这里，`response`被定义/存在，但它是`null`. 当你说：

```
if(response.hasOwnProperty('status')) 
```

你尝试调用`hasOwnProperty`一个空值，因此你得到了那个异常。你必须这样做：

```
if (response !== null && response.hasOwnProperty(..)) { ... } 
```

# android - 如何从.apk文件中提取java文件

> ID：15983962
> 
> 赞同：1
> 
> 时间：2013-04-13T03:38:42.353
> 
> 标签：android, apk, bytecode, decompiling, dex2jar

不幸的是，我删除了我的 Android 源代码。尝试使用 dex2jar 和 baksmali 获取 jar，并使用 jd-gui 使用我的 .apk 文件获取 java 源文件。是的，我得到了文件，但我遇到的问题是，在 java 文件中的更多地方，代码是字节格式的。需要把它变成可读的格式才能让自己前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:44:33.027

反编译并不是一门完美的科学，而且您很少能取回您输入的确切 Java 代码。

当您编译代码时，会对其进行大量优化，如果您的目标是获取原始代码，这会使反编译变得更加困难。

充其量，你会得到很多很好的反编译代码，以及一些字节码。您应该能够根据在程序中的位置确定用什么 Java 代码替换该字节码​​，就像您编写原始代码一样。

对于大多数简单的应用程序，从头开始重写比反编译并尝试修复反编译的代码更容易。

tl; dr：不要忘记备份您的代码。曾经。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:05:35.367

一般来说，如果你的目标是恢复可读的源代码，那么像 JD-Gui 这样的东西是你最好的选择。但是对于失败的情况，您可以尝试[Krakatau](https://github.com/Storyyeller/Krakatau)，这是我编写的一个反编译器。

Krakatau 旨在能够反编译类文件，即使它们被混淆或不是从 Java 编译的。但是，结果的可读性不如 JD-Gui 之类的，因为它没有利用 Java 编译器留下的模式。它并不完美，但我认为绝对值得一试。

PS Krakatau 仅支持 JVM 字节码。您需要一种方法将其从 Android 转换回 Java 字节码，然后才能对其进行反编译。

# jquery - 单击父项时选择收音机

> ID：15983963
> 
> 赞同：1
> 
> 时间：2013-04-13T03:38:45.837
> 
> 标签：jquery, radio-button

我在表格中有这样的单选按钮

```
<form>
    <table class="table table-hover flights_table">
        <tr>
            <td>
                <input type="radio" class="flight" name="flight" />
            </td>
            <td>Fare type</td>
            <td>Price</td>
            <td>dep</td>
            <td>Arrival</td>
        </tr>
        <tr>
            <td>
                <input type="radio" class="flight" name="flight" />
            </td>
            <td>Fare type</td>
            <td>Price</td>
            <td>dep</td>
            <td>Arrival</td>
        </tr>
        <tr>
            <td>
                <input type="radio" class="flight" name="flight" />
            </td>
            <td>Fare type</td>
            <td>Price</td>
            <td>dep</td>
            <td>Arrival</td>
        </tr>
    </table>
</form> 
```

和 jQuery 代码

```
$('.flights_table tr').click(function (e) {
    //$('.flight').attr('checked', false);
    $(this).find('.flight').attr('checked', true);
}); 
```

目的是在单击它所在的行时选择一个收音机，它可以工作，但每个收音机只有一次。

例如，您选择第 1 个，然后单击第 2 个，如果您尝试再次选择第 1 个，则它不起作用。

我使用的解决方案被接受为在[这个问题](https://stackoverflow.com/questions/2192596/greater-area-for-radio-selection)中工作，但不再完美工作。

我也尝试使用 removeAttr 代替注释行相同的结果。

[http://jsfiddle.net/NsDnh/](http://jsfiddle.net/NsDnh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:53:43.500

尝试这个

```
 $('tr').click(function (e) {
 $(this).$(input:radio).prop('checked', true);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:48:21.697

问题是`attr()`与 jQuery 版本 1.9+ 的不兼容问题。

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法。

尝试使用[prop](http://api.jquery.com/prop/)代替：

```
 $('.flights_table tr').click(function (e) {
     //$('.flight').attr('checked', false);
     $(this).find('.flight').prop('checked', true);
 }); 
```

`**[Updated Demo](http://jsfiddle.net/NsDnh/1/)**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:52:10.830

试试下面的代码。

```
 $(this).find('.flight').prop('checked', true); 
```

**[jsFiddle](http://jsfiddle.net/NsDnh/2/)**

# android - 在 Android 应用中运行应用

> ID：15983969
> 
> 赞同：0
> 
> 时间：2013-04-13T03:39:36.167
> 
> 标签：android, smartphone

我正在创建一个应用程序，我希望在其中运行应用程序，例如网站上的 iframe。这可能吗？例如，我将打开我的应用程序，它将显示手机的图库，但在运行我的应用程序时，而不仅仅是打开图库应用程序，这将使我的应用程序最小化。我想要它就像一个 iframe，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:56:01.827

您不能在自己的应用程序中运行另一个应用程序。您可以执行以下两项中的任何一项

1.  通过发送意图消息启动另一个应用程序
2.  或在您自己的应用程序中类似地创建其他应用程序的功能。

根据您的问题，如果您需要创建画廊，那么为什么不在您的应用中创建自己的画廊？这将更容易和灵活

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T03:45:50.483

出于安全原因，您不能在您的应用程序中以 iframe 样式运行其他应用程序的活动，抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T01:23:55.317

是的，我相信如果存在一个通用数据框架，它可以为数据的存储和引用方式创建统一标准，那么应用程序就有可能跨平台运行。因此数据可以存在于云端，但可以通过独立于手机平台的每个应用程序进行引用。

# sql-server-2008-r2 - 使用 SELECT 语句返回的数据插入新行

> ID：15983971
> 
> 赞同：0
> 
> 时间：2013-04-13T03:39:50.810
> 
> 标签：sql-server-2008-r2, insert-into

我看过类似的帖子，但没有找到我的确切问题和答案。我要做的是使用来自变量的数据和来自 select 语句的数据更新表。

例如：

```
--THESE ARE THE VARIABLES I WANT TO USE IN INSERT

DECLARE @Key uniqueidentifier
DECLARE @Name varchar(200)

SET @Key = NEWID()
SET @Name = 'TestName'

--THIS IS A TEMP TABLE THAT I WANT TO SELECT FROM AND USE THE DATA FROM THERE AND    INSERT
SELECT * FROM #TempData AS td

--THE INSERT STATEMENT
INSERT INTO MyTable(CustomerKey, Name, City, State)
VALUES(@Key, @Name, td.City, td.State) 
```

现在对于`SELECT`声明，我将使用变量作为列名，例如：

```
SELECT @City = City, @State = State FROM #TempData 
```

但唯一的问题，或者说相当烦人的是，实际的临时表中很容易有 40 列。我真的不想声明 40 多个变量并将其分配给每一列。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:44:48.447

只是简单地做什么呢..

```
INSERT INTO MyTable(CustomerKey, Name, City, State)
SELECT @Key, @Name, City, State FROM #TempData
WHERE .... 
```

基本上，您可以将其扩展到 TempData 中的任意数量的列，而不必为其声明变量。

# c - 我想用 C 创建一个简单的汇编程序。我应该从哪里开始？

> ID：15983981
> 
> 赞同：12
> 
> 时间：2013-04-13T03:41:03.797
> 
> 标签：c, assembly, x86, x86-64, low-level

我最近一直试图让自己沉浸在汇编编程的世界中，最终目标是创建自己的编程语言。我希望我的第一个真正的项目是一个用 C 编写的简单汇编程序，它能够汇编 x86 机器语言的一小部分并创建一个 Windows 可执行文件。没有宏，没有链接器。只是组装。

在纸面上，这似乎很简单。汇编代码进来，机器代码出来。

但是当我想到所有的细节时，它突然变得非常令人生畏。操作系统需要什么约定？如何对齐数据并计算跳跃？可执行文件的内部是什么样的？

我感觉很失落。我找不到任何有关这方面的教程，并且查看流行汇编程序的源代码并没有启发性（不过，我愿意再试一次）。

我从这里去哪里？你会怎么做？有没有关于这个主题的好的教程或文献？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T04:50:08.163

我自己写了一些（汇编器和反汇编器），我不会从 x86 开始。如果您了解 x86 或任何其他指令集，您可以在短时间内（一个晚上/下午）学习并学习另一个指令集的语法，至少大部分是其中的一部分。编写汇编程序（或反汇编程序）的行为肯定会快速教会您一个指令集，并且您会比许多没有在该级别检查微码的经验丰富的汇编程序员更好地了解该指令集。msp430、pdp11 和 thumb（不是 thumb2 扩展）（或 mips 或 openrisc）都是不错的起点，指令不多，也不会过于复杂等。

我首先推荐一个反汇编器，然后是一个固定长度的指令集，比如 arm 或 thumb 或 mips 或 openrisc 等。如果没有，那么至少使用一个反汇编器（绝对选择一个你已经拥有汇编器、链接器和反汇编程序）并用铅笔和纸了解机器代码和汇编之间的关系，特别是分支，它们通常有一个或多个怪癖，例如程序计数器在添加偏移量时提前一两条指令，以获得另一位他们有时以整个指令而不是字节来衡量。

使用 C 程序蛮力解析文本以读取指令非常容易。一项更艰巨但可能具有教育意义的任务是使用 bison/flex 并学习该编程语言以允许这些工具创建（甚至更极端的蛮力）解析器，然后与您的代码接口以告诉您在哪里找到了什么。

汇编器本身非常简单，只需读取 ascii 并在机器代码中设置位。分支和其他 pc 相关指令有点痛苦，因为它们可能需要多次通过源/表才能完全解决。

```
 mov r0,r1
  mov r2 ,#1 
```

汇编程序开始解析一行的文本（定义为回车符 0xD 或换行符 0xA 之后的字节），丢弃空白（空格和制表符）直到你得到一些非空白，然后 strncmp 用已知的助记符。如果你点击一个然后解析该指令的可能组合，在上面的简单情况下，在 mov 跳过空白到非空白之后，也许你找到的第一件事必须是一个寄存器，然后是可选的空白，然后是逗号。删除空格和逗号并将其与字符串表进行比较，或者只是解析它。完成该寄存器后，然后越过找到逗号的位置，并说它是另一个寄存器或立即数。如果立即让我们说它必须有一个 # 符号，如果注册让我们说它必须以小写或大写开头' r'。在解析该寄存器或立即数之后，请确保该行上没有其他不应该出现在该行上的内容。为这个指令构建机器代码，或者至少尽可能多地构建机器代码，然后继续下一行。可能很繁琐但是解析ascii并不难...

至少，您将需要一个在创建时累积机器代码/数据的表/数组，以及一些将指令标记为不完整的方法，以及在未来通过时完成与 pc 相关的指令。您还需要一个表格/数组来收集您找到的标签以及找到的机器代码表中的地址/偏移量。以及在指令中用作目标/源的标签以及包含它们所使用的部分完整指令的表/数组中的偏移量。在第一遍之后，然后返回这些表，直到您将所有标签定义与用作源或目标的标签匹配，使用标签定义地址/偏移量来计算到相关指令的距离，然后完成创建该指令的机器代码。

下一步是允许多个源文件，如果你想允许的话。现在您必须拥有无法被汇编器解析的标签，因此您必须在输出中留下占位符并制作一些最长的跳转/分支指令的味道，因为您不知道目的地有多远，预计会更糟。然后是您选择创建/使用的输出文件格式，然后是最简单的链接器，但您必须记住为最终的 pc 相关指令填写机器代码，并不比汇编器中的难本身。

请注意，编写汇编程序不一定与创建编程语言然后为其编写编译器有关，不同的事情，不同的问题。实际上，如果您想制作一种新的编程语言，只需将现有的汇编程序用于现有的指令集。当然不是必需的，但大多数教学和教程都将使用 bison/flex 方法来编程语言，并且有许多大学课程讲义/资源可用于开始编译器类，您可以使用它们来帮助您开始然后修改添加您的语言功能的脚本。中后端是比前端更大的挑战。有很多关于这个主题的书籍和许多在线资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T04:23:00.637

您要查找的不是教程或源代码，而是*规范*。请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)

一旦你了解了可执行文件的规范，就可以编写一个程序来生成一个。您构建的可执行文件应该尽可能简单。一旦你掌握了这一点，你*就*可以编写一个简单的面向行的解析器，它读取指令名称和数字参数来生成一个代码块来插入到 exe 中。稍后您可以添加符号、分支、部分，无论您想要什么，这就是[http://www.davidsalomon.name/assem.advertis/asl.pdf](http://www.davidsalomon.name/assem.advertis/asl.pdf)之类的内容。

PS Carl Norum 在上面的评论中有一个很好的观点。如果您的目标是创建自己的编程语言，那么学习编写汇编程序是无关紧要的，也不是正确的开始方式（除非您要创建的语言是汇编语言）。已经有汇编器从汇编器源代码生成可执行文件，因此您的编译器可以生成汇编器源代码，您可以避免重新创建汇编器的工作......而且您应该这样做。或者你可以使用 LLVM 之类的东西，它可以解决编译器构建的许多其他令人生畏的问题。您实际编写自己的编程语言的可能性非常小，但是如果您从头开始并且没有必要，它们的可能性就会小得多。确定您的目标是什么，并使用可用的最佳工具来实现它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-13T04:45:53.400

你应该看看 LLVM，llvm 是一个模块化编译器后端，最流行的前端是用于编译 C/C++/Objective-C 的 Clang。LLVM 的好处是您可以选择编译器链中您感兴趣的部分并专注于该部分，而忽略所有其他部分。您想创建自己的语言，编写生成 LLVM 内部表示代码的解析器，并且免费获得所有中间层目标独立优化并编译到许多不同的目标。对某些奇异 CPU 的编译器感兴趣，编写一个编译器后端，它采用 LLVM 中间代码并生成您的汇编。对优化技术有一些想法，也许是自动线程，编写一个处理 LLVM 中间代码的中间层。LLVM 是库的集合，而不是像 GCC 那样的独立二进制文件，

# asp.net-mvc-3 - 在一处定义 Authorize 属性，以便与多个 ActionResult 一起使用？

> ID：15983984
> 
> 赞同：0
> 
> 时间：2013-04-13T03:41:28.803
> 
> 标签：asp.net-mvc-3, filter, authorize

我`Authorize`在控制器或动作上使用属性，例如：

```
[Authorize(Roles="admin,user", Users="user1,user2")]
public ActionResult LogOn(LogOnModel model, string returnUrl) {
    return view();
} 
```

`[Authorize(Roles="admin,user",Users="user1")]`但是，我必须在每个控制器或动作上这样定义它。

如何在一个地方/文件中定义它？

`RegisterGlobalFilters`会这样做吗？我不知道如何`[Authorize(Roles="*",Users="*")]`使用全局过滤器进行定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:47:08.303

尝试这个

创建一个新文件并在操作中使用此属性头

```
public class AuthorizeAttribute : FilterAttribute, IAuthorizationFilter
{
   private readonly RoleEnum[] _acceptedRoles;

public AuthorizeAttribute(params RoleEnum[] acceptedroles)
{
    _acceptedRoles = acceptedroles;
}

public AuthorizeAttribute(params bool[] allowAll)
{
    if (allowAll[0])
        _acceptedRoles = new RoleEnum[] { RoleEnum.Admin, RoleEnum.user};
}

public void OnAuthorization(AuthorizationContext filterContext)
{
    if (SessionHelper.UserInSession == null)//user not logged in
    {
        FormsAuthentication.SignOut();
        filterContext.Result =
             new RedirectToRouteResult(new System.Web.Routing.RouteValueDictionary {{ "controller", "Home" },
                                         { "action", "Index" },
                                         { "returnUrl",    filterContext.HttpContext.Request.RawUrl } });//send the user to login page with return url
        return;
    }
    if (!_acceptedRoles.Any(acceptedRole => SessionHelper.UserInSession.UserRoles.Any(currentRole => acceptedRole == currentRole.Role)))
        //allow if any of the user roles is among accepted roles. Else redirect to login page
        throw new UnauthorizedAccessException();

 }
} 
```

这也适用于返回 URL

[参考](https://stackoverflow.com/questions/15802503/asp-net-mvc-roles-and-security/15802655#15802655)

# python - 将 quantiz 函数转换为 python

> ID：15983986
> 
> 赞同：2
> 
> 时间：2013-04-13T03:42:18.090
> 
> 标签：python, matlab, signal-processing

如何将[MATLAB 的`quantiz`函数](http://www.mathworks.com/help/comm/ref/quantiz.html) （其中 xd 是 desimated 信号）转换为 python/scipy？

我正在尝试将我在 MATLAB 中开发的用于语音处理的算法实现到使用 python 和 scipy、numpy、pygtk 和 matplotlib 等库的软件包中，以便将算法转换为完整的包。

我正在使用 scipy 进行算法开发，但在 python 中找不到合适的函数来“量化信号”：

```
[I,xq] = quantiz(xd,1:step:1-step, -1:step:1); 
```

我怎么用python写这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T04:57:36.120

查看文档，这是一个非常简单的函数，在 Python 中很容易编写。我重命名了函数以添加缺少的“e”，因为这让我很烦。反正：

```
def quantize(signal, partitions, codebook):
    indices = []
    quanta = []
    for datum in signal:
        index = 0
        while index < len(partitions) and datum > partitions[index]:
            index += 1
        indices.append(index)
        quanta.append(codebook[index])
    return indices, quanta 
```

尝试使用文档中的示例：

```
>>> index, quants = quantize([3, 34, 84, 40, 23], range(10, 90, 10), range(10, 100, 10))
>>> index
[0, 3, 8, 3, 2]
>>> quants
[10, 40, 90, 40, 30] 
```

* * *

对于更高效但不太灵活的版本，我们可以绕过范围并仅使用数学：

```
from __future__ import division
import math

def opt_quantize(signal, num_quanta, partition_start, partition_step,
                 codebook_start, codebook_step):
    indices = []
    quanta = []
    for datum in signal:
        index = int(math.floor((datum - partition_start) / partition_step + 1))
        if index < 0:
            index = 0
        if index >= num_quanta:
            index = num_quanta - 1
        indices.append(index)
        quanta.append(codebook_start + codebook_step * index)
    return indices, quanta 
```

尝试使用文档中的示例：

```
>>> index, quants = opt_quantize([3, 34, 84, 40, 23], 9, 10, 10, 10, 10)
>>> index
[0, 3, 8, 4, 2]
>>> quants
[10, 40, 90, 50, 30] 
```

因此，在由于浮点错误导致数据恰好位于分区上的情况下，结果略有不同，但如果分区上没有任何内容，则它可以工作。

* * *

这样可以减少运行时间，其中 n 是信号的长度，m 是从 O(mn) 到 O(n) 的分区数。这应该会给您带来显着的性能提升。我们能做得更好吗？

**是的。**使用我们新的基于数学的方法，代码很容易矢量化，我们可以让 Numpy 完成艰苦的工作：

```
import numpy as np

def np_quantize(signal, num_quanta, partition_start, partition_step,
                codebook_start, codebook_step):
    signal = np.asarray(signal, dtype=float)
    indices = np.empty_like(signal, dtype=int)
    np.floor_divide((signal - partition_start + partition_step), \
                    partition_step, indices)
    np.clip(indices, 0, num_quanta - 1, indices)
    quanta = np.asarray(indices, dtype=float) * codebook_step + codebook_start
    return indices, quanta 
```

我偶然地对它进行了基准测试，而且似乎我的每一个优化*都让它变慢了*，所以要么我做错了可怕的事情，要么我没有测试足够大的数据来摊销常数。

```
~$ python -m timeit -s 'from quantize import orig_quantize' 'orig_quantize([-3, -2, -1, 0, 1, 2, 3], [-0.5, 0.5], [-1, 0, 1])'
100000 loops, best of 3: 8.58 usec per loop
~$ python -m timeit -s 'from quantize import opt_quantize' 'opt_quantize([-3, -2, -1, 0, 1, 2, 3], 3, -0.5, 1, -1, 1)'
100000 loops, best of 3: 10.8 usec per loop
~$ python -m timeit -s 'from quantize import np_quantize' 'np_quantize([-3, -2, -1, 0, 1, 2, 3], 3, -0.5, 1, -1, 1)'
10000 loops, best of 3: 57.4 usec per loop 
```

* * *

对于踢球，我尝试使用[Cython](http://www.cython.org/)和 Numpy：

```
cimport cython
cimport numpy as np

cdef extern from "math.h":
    float floorf(float)

@cython.boundscheck(False)
def cynp_quantize(np.ndarray[float, ndim=1] signal, int num_quanta,
                  float partition_start, float partition_step,
                  float codebook_start, float codebook_step):
    cdef int i
    cdef int index
    cdef np.ndarray[np.int_t, ndim=1] indices = np.empty_like(signal, dtype=int)
    cdef np.ndarray[float, ndim=1] quanta = np.empty_like(signal)
    for i in range(signal.shape[0]):
        index = <int>floorf((signal[i] - partition_start)
                            / partition_step + 1.0)
        if index < 0:
            index = 0
        if index >= num_quanta:
            index = num_quanta - 1
        indices[i] = index
        quanta[i] = codebook_start + index * codebook_step
    return indices, quanta 
```

据我所知，Cython 还实验性地支持 OpenMP，这可以让它用多个线程完成所有事情。不过，无论有没有线程，我都无法测试这个 Cython 解决方案的性能（我缺少编译结果所需的头文件）。

# paypal - Paypal NVP 退款

> ID：15983990
> 
> 赞同：0
> 
> 时间：2013-04-13T03:42:34.347
> 
> 标签：paypal, paypal-nvp

我正在尝试使用 paypal nvp 退款。

是否可以退还已全额支付且 txn_type= cart 的金额？

我收到错误 10009“无法退还此类交易”

# java - 不兼容的类型错误我无法弄清楚

> ID：15983995
> 
> 赞同：0
> 
> 时间：2013-04-13T03:44:03.840
> 
> 标签：java

好的，分离我的代码。现在，当我运行时，我只收到一个错误，如下所示：

```
Exception in thread "main" java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: InventoryPro2.MobilePhone
    at InventoryPro2.InventoryPro2.main(InventoryPro2.java:12)
Java Result: 1 
```

我从以前的回复中得到的是，我需要将 MobilePhone 类和 InventoryPro2 类移动到同一个项目中的单独的 .java 文件中。我错过了重点吗？正如我之前所说，我对此是全新的，在同时学习另一种编程语言的同时快速学习所有这些是很糟糕的。感谢您迄今为止的帮助，非常感谢。

```
 package InventoryPro2;

    public class InventoryPro2 {

        public static void main(String args[]) {
            MobilePhone MobilePhoneObject = new MobilePhone();
            MobilePhoneObject.MobilePhone();
            System.out.println("Mobile Phone Inventory");
            System.out.println();//skips a line

            MobilePhone[] Phones = new MobilePhone[5];

            Phones[0] = new MobilePhone(1, "Motorola", "Electronics", 98, 150.00);
            Phones[1] = new MobilePhone(2, "LG", "Electronics", 650, 199.99);
            Phones[2] = new MobilePhone(3, "Samsung", "Electronics", 125, 200.25);
            Phones[3] = new MobilePhone(4, "Nokia", "Electronics", 200, 100.05);
            Phones[4] = new MobilePhone(5, "IPhone", "Electronics", 138, 125.75);

            for (int count = 0; count < Phones.length-1; count++) {

                System.out.printf("Product Number:  %1f\n", Phones[count].getproductNumber());
                System.out.printf("Product Name:  %s\n", Phones[count].getname());
                System.out.printf("Units In Stock:  %.2f\n", Phones[count].getunitsInStock());
                System.out.printf("Unit Price: $%4.2f\n", Phones[count].getunitPrice());
                System.out.printf("Inventory Value:  $%4.2f\n", Phones[count].gettotalInv());
                System.out.println(); //blank line to seperate products

            }
        }
    }

package inventorypro2;

class MobilePhone { // Create class to store values

    private double productNumber; // Variables
    private String name;
    private String department;
    private double unitsInStock;
    private double unitPrice;

    public MobilePhone() {
        this(0.0, "", "", 0.0, 0.0);
    }

    public MobilePhone(double productNumber, String name, String department,
            double unitsInStock, double unitPrice) { //assign variables
        this.productNumber = productNumber;
        this.name = name;
        this.department = department;
        this.unitsInStock = unitsInStock;
        this.unitPrice = unitPrice;
    }

    public double getproductNumber() { // retrieve values
        return productNumber;
    }

    public String getname() {
        return name;
    }

    public String getdepartment() {
        return department;
    }

    public double getunitPrice() {
        return unitPrice;
    }

    public double getunitsInStock() {
        return unitsInStock;
    }

    public void setproductNumber(double productNumber) {
        this.productNumber = productNumber;
    }

    public void setname(String name) {
        this.name = name;
    }

    public void setdepartment(String department) {
        this.department = department;
    }

    public void setunitPrice(double unitPrice) {
        this.unitPrice = unitPrice;
    }

    public void setunitsInStock(double unitsInStock) {
        this.unitsInStock = unitsInStock;
    }

    public double gettotalInv() {
        return getunitPrice() * getunitsInStock();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:46:18.850

`Phones[0] = count + 1;`

左边不是整数，但右边是整数。

关于您最近的编辑，我建议每个文件放置一个类（并将它们公开）。

或者，创建一个内部类。但是文件应该有一个外部类（不必是这样的：[Java: Multiple class declarations in one file](https://stackoverflow.com/questions/2336692/java-multiple-class-declarations-in-one-file)），但我认为它会使事情变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:46:38.973

> 电话[0] = 计数 + 1；

你想在这里做什么？您正在将整数（`int`类型）分配给 MobilePhone（`MobilePhone`类型）！删除那条线，你会很高兴。

# objective-c - 将邮件发送到我自己的 webmail 服务而不显示邮件编写器视图

> ID：15983996
> 
> 赞同：0
> 
> 时间：2013-04-13T03:44:07.510
> 
> 标签：objective-c, xcode, webmail

我想在我的 IOS 应用程序中做一个反馈。因此，当用户输入他们的反馈时，邮件将被发送到我的网络邮件，而不向用户显示 iPhone 邮件编写器视图。我正在为我的网络邮件使用圆形立方体。

我真的不知道从哪里开始。任何可以帮助我的好心人。

这些答案并没有真正回答我的问题。与 API eBay 一样，支付交易完成后。一条消息将发送到服务器，告诉卖家用户正在购买此产品并已付款。我想知道消息是如何发送的。谢谢