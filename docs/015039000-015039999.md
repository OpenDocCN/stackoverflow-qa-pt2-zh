# StackOverflow 问答 15039000-15039999

# c++ - 使用背景减法检测和跟踪对象

> ID：15039005
> 
> 赞同：1
> 
> 时间：2013-02-23T09:25:29.687
> 
> 标签：c++, opencv

我正在从事一个涉及跟踪人类主体的视频处理项目。我有一个稳定的背景场景，每当主体进入画面时，都会有轻微的照明效果变化。我尝试使用 BackgroundSubtractorMOG2 但似乎效果不佳，然后我尝试使用这段代码：

```
cv::Mat temp;
cv::subtract(camFrame,backg,temp);
cv::threshold(temp,temp,25,255,cv::THRESH_BINARY_INV); 
```

camFrame 是来自相机的帧的灰度版本。backg 是已经捕获和存储的背景帧。但是这段代码似乎不能很好地提取前景主题，并且照明效果也显示为前景......如果有人可以提供一些建议以及一些代码，我会很高兴......

# python - 查找python列表之间的交集/差异

> ID：15039006
> 
> 赞同：10
> 
> 时间：2013-02-23T09:25:41.657
> 
> 标签：python, list, numpy

我有两个 python 列表：

```
a = [('when', 3), ('why', 4), ('throw', 9), ('send', 15), ('you', 1)]

b = ['the', 'when', 'send', 'we', 'us'] 
```

我需要从a中过滤掉所有与b中相似的元素。就像在这种情况下，我应该得到：

```
c = [('why', 4), ('throw', 9), ('you', 1)] 
```

最有效的方法应该是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T09:30:49.137

列表理解将起作用。

```
a = [('when', 3), ('why', 4), ('throw', 9), ('send', 15), ('you', 1)]
b = ['the', 'when', 'send', 'we', 'us']
filtered = [i for i in a if not i[0] in b]

>>>print(filtered)
[('why', 4), ('throw', 9), ('you', 1)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T09:28:40.310

列表理解应该起作用：

```
c = [item for item in a if item[0] not in b] 
```

或者使用字典理解：

```
d = dict(a)
c = {key: value for key in d.iteritems() if key not in b} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T11:11:48.747

`in`很好，但您至少应该使用集合`b`。如果您有 numpy，`np.in1d`当然也可以尝试，但如果它更快与否，您可能应该尝试。

```
# ruthless copy, but use the set...
b = set(b)
filtered = [i for i in a if not i[0] in b]

# with numpy (note if you create the array like this, you must already put
# the maximum string length, here 10), otherwise, just use an object array.
# its slower (likely not worth it), but safe.
a = np.array(a, dtype=[('key', 's10'), ('val', int)])
b = np.asarray(b)

mask = ~np.in1d(a['key'], b)
filtered = a[mask] 
```

集合也有方法`difference`等，这些在这里可能没用，但总的来说可能有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T10:37:49.277

由于这是用 标记的，因此这是一个使用列表理解基准测试`numpy`的 numpy 解决方案：[`numpy.in1d`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html)

```
In [1]: a = [('when', 3), ('why', 4), ('throw', 9), ('send', 15), ('you', 1)]

In [2]: b = ['the', 'when', 'send', 'we', 'us']

In [3]: a_ar = np.array(a, dtype=[('string','|S5'), ('number',float)])

In [4]: b_ar = np.array(b)

In [5]: %timeit filtered = [i for i in a if not i[0] in b]
1000000 loops, best of 3: 778 ns per loop

In [6]: %timeit filtered = a_ar[-np.in1d(a_ar['string'], b_ar)]
10000 loops, best of 3: 31.4 us per loop 
```

因此，对于 5 条记录，列表理解更快。

然而，对于大型数据集，numpy 解决方案的速度是列表理解的两倍：

```
In [7]: a = a * 1000

In [8]: a_ar = np.array(a, dtype=[('string','|S5'), ('number',float)])

In [9]: %timeit filtered = [i for i in a if not i[0] in b]
1000 loops, best of 3: 647 us per loop

In [10]: %timeit filtered = a_ar[-np.in1d(a_ar['string'], b_ar)]
1000 loops, best of 3: 302 us per loop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T09:30:42.093

试试这个 ：

```
a = [('when', 3), ('why', 4), ('throw', 9), ('send', 15), ('you', 1)]

b = ['the', 'when', 'send', 'we', 'us']

c=[]

for x in a:
    if x[0] not in b:
        c.append(x)
print c 
```

演示：http: [//ideone.com/zW7mzY](http://ideone.com/zW7mzY)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T11:11:09.157

**简单的方法**

```
a = [('when', 3), ('why', 4), ('throw', 9), ('send', 15), ('you', 1)]
b = ['the', 'when', 'send', 'we', 'us']
c=[] # a list to store the required tuples 
#compare the first element of each tuple in with an element in b
for i in a:
    if i[0] not in b:
        c.append(i)
print(c) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-23T09:33:23.707

使用过滤器：

```
c = filter(lambda (x, y): False if x in b else True, a) 
```

# xml - django-discover-runner 和 XML 报告？

> ID：15039013
> 
> 赞同：10
> 
> 时间：2013-02-23T09:26:30.080
> 
> 标签：xml, django, unit-testing

我有一个工作的 Django 应用程序，它已成功`unittest-xml-reporting`用于从我的单元测试中生成 XML 报告。

但是，该项目正在迅速发展，我想将我的测试分解为每个应用程序中的单独文件。因此，我安装了`django-discover-runner`它，它找到了我所有的测试文件并成功运行它们。

但是，`django-discover-runner`不会生成我需要的 XML 报告（对于 Bamboo）。

我发现了这个：

[http://www.stevetrefethen.com/blog/Publishing-Python-unit-test-results-in-Jenkins.aspx](http://www.stevetrefethen.com/blog/Publishing-Python-unit-test-results-in-Jenkins.aspx)

并尝试实施该建议（在我的每个 test.py 文件中），但没有生成 XML。

如何同时使用`django-discover-runner`并`unittest-xml-reporting`发现我的测试并生成 XML 报告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-21T22:06:20.243

自从提出这个问题以来，unittest-xml-reporting 项目[增加](https://github.com/xmlrunner/unittest-xml-reporting#django-support)了对新 Django`DiscoverRunner`类的支持。您可以在 Django 设置文件中设置测试运行程序：

```
TEST_RUNNER = 'xmlrunner.extra.djangotestrunner.XMLTestRunner' 
```

它将运行相同的测试`DiscoverRunner`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T03:39:44.693

所以事实证明，这个问题的解决方案比我预期的要容易得多。对于可能希望这样做的任何其他 n00bs：

`django-discover-runner`简短的回答是，我只是将由提供的两个测试运行器拼凑`unittest-xml-reporting`到一个自定义测试运行器中：

```
from django.conf import settings
from django.test.utils import setup_test_environment, teardown_test_environment
import xmlrunner
from django.core.exceptions import ImproperlyConfigured
from django.test import TestCase
from django.test.simple import DjangoTestSuiteRunner, reorder_suite
from django.utils.importlib import import_module

try:
    from django.utils.unittest import defaultTestLoader
except ImportError:
    try:
        from unittest2 import defaultTestLoader  # noqa
    except ImportError:
        raise ImproperlyConfigured("Couldn't import unittest2 default "
                               "test loader. Please use Django >= 1.3 "
                               "or go install the unittest2 library.")

### CUSTOM RUNNER NAME
class myTestRunner(DjangoTestSuiteRunner):
    ### THIS SECTION FROM UNITTESTS-XML-REPORTING
    def build_suite(self, test_labels, extra_tests=None, **kwargs):
        suite = None
        root = getattr(settings, 'TEST_DISCOVER_ROOT', '.')
        top_level = getattr(settings, 'TEST_DISCOVER_TOP_LEVEL', None)
        pattern = getattr(settings, 'TEST_DISCOVER_PATTERN', 'test*.py')

        if test_labels:
            suite = defaultTestLoader.loadTestsFromNames(test_labels)
            # if single named module has no tests, do discovery within it
            if not suite.countTestCases() and len(test_labels) == 1:
                suite = None
                root = import_module(test_labels[0]).__path__[0]

        if suite is None:
            suite = defaultTestLoader.discover(root,
                pattern=pattern, top_level_dir=top_level)

        if extra_tests:
            for test in extra_tests:
                suite.addTest(test)

        return reorder_suite(suite, (TestCase,))

    ###THIS SECTION FROM DJANGO-DISCOVER-RUNNER
    def run_tests(self, test_labels, extra_tests=None, **kwargs):
        """
        Run the unit tests for all the test labels in the provided list.
        Labels must be of the form:
         - app.TestClass.test_method
        Run a single specific test method
         - app.TestClass
        Run all the test methods in a given class
         - app
        Search for doctests and unittests in the named application.

        When looking for tests, the test runner will look in the models and
        tests modules for the application.

        A list of 'extra' tests may also be provided; these tests
        will be added to the test suite.

        Returns the number of tests that failed.
        """
        setup_test_environment()

        settings.DEBUG = False

        verbosity = getattr(settings, 'TEST_OUTPUT_VERBOSE', 1)
        if isinstance(verbosity, bool):
            verbosity = (1, 2)[verbosity]
        descriptions = getattr(settings, 'TEST_OUTPUT_DESCRIPTIONS', False)
        output = getattr(settings, 'TEST_OUTPUT_DIR', '.')

        suite = self.build_suite(test_labels, extra_tests)

        old_config = self.setup_databases()

        result = xmlrunner.XMLTestRunner(
            verbosity=verbosity, descriptions=descriptions,
            output=output).run(suite)

        self.teardown_databases(old_config)
        teardown_test_environment()

        return len(result.failures) + len(result.errors) 
```

这应该保存在项目中合适的地方。在您的测试设置文件（`test_settings.py`- 按照`django-discover-runner`说明）中，设置测试运行器：

```
TEST_RUNNER = '<your-django-project>.customTestRunner.myTestRunner' 
```

然后，您将使用（再次按照`django-discover-runner`说明）：

```
django-admin.py test --settings=myapp.test_settings 
```

这个解决方案允许我使用`django-discover-runner`' 的功能来发现我的项目中的所有测试文件 - 由`django-discover-runner`'`TEST_DISCOVER_PATTERN`选项指定 - 并且仍然按照 Bamboo 的要求输出 XML 报告。非常感谢原始代码的作者：

[django-discover-runner](https://github.com/jezdez/django-discover-runner)

[unittest-xml-报告](https://github.com/danielfm/unittest-xml-reporting)

# c# - 从缓冲流计算 MD5 哈希（BinaryReader 和使用缓冲区）

> ID：15039019
> 
> 赞同：0
> 
> 时间：2013-02-23T09:27:30.717
> 
> 标签：c#, buffer, md5, binaryreader

我需要从缓冲流 (BinaryReader) 计算 MD5 哈希。我可以计算缓冲区（字节）的 MD5 哈希，但是如何计算完整流的 MD5 哈希？

无法将整个数据加载到内存中！

# asp.net-mvc - 禁用链接

> ID：15039021
> 
> 赞同：0
> 
> 时间：2013-02-23T09:27:44.640
> 
> 标签：asp.net-mvc

net MVC & jquery 我需要禁用链接以防文本框中没有输入任何文本。有人可以帮我看看怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:34:13.217

```
$("#linkId").click(function(){ 
  e.preventDefault();
  if($("#textFieldId").val().length !== 0){
    window.location.href = $(this).attr("href");
  }
}); 
```

# twitter - 嵌入 Twitter Web Intent

> ID：15039023
> 
> 赞同：1
> 
> 时间：2013-02-23T09:27:54.923
> 
> 标签：twitter, tweets

是否可以在网页中嵌入 Twitter 网络意图？我正在开发一个弹出窗口太突兀的应用程序。

如果这是可能的，我将如何去做？

谢谢你的时间！

# c# - 将数据从子窗体传输到子窗体并从父窗体打开 child2

> ID：15039031
> 
> 赞同：0
> 
> 时间：2013-02-23T09:28:18.590
> 
> 标签：c#, windows, winforms

我能够将数据从 child1 传输到 child2 表单没有问题并从 child1 表单打开 child2。但是我需要从主菜单栏打开 child2 并在文本框中传输数据。数据没有到达 child2然后我从父窗体打开 child2。这是代码：Child1（军官登录）

```
public string s;

public string Param
{
   get { return s; }
   set { s = value; }
}

public void LoginMethod()
{

   try
   {

       OfficerBO user = new OfficerBO ();
       user.OfficerID = txtOfficerId.Text;
       user.Password = hs.PassHash(txtPassword.Text);

       if (user.Login())
       {
            s = user.LastName;           

            MessageBox.Show("You Loged in Successfully\n\n" + user.FirstName +
                " " + user.LastName ); 
            OnLoginSuccess(null, null);               

            // this.Hide();
            HolidayApp h = new HolidayApp(); 
            // Data gets transfered into Child2 (HolidayApp) form 
            //and dialog opens no problem
            h.ParamSet = Param;
            h.ShowDialog();
       }
       else
       {
            txtOfficerId.Text = "";
            txtPassword.Text = "";
            MessageBox.Show("Invalid details");
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error " + ex.Message);
    }
} 
```

Child2（假日应用程序）：

```
public string ParamSet
{
    get { return txtHolidaySurname.Text; }
    set { txtHolidaySurname.Text = value; }
}
public void HolidayApp_Load(object sender, EventArgs e)
{
    txtHolidaySurname.Text = ParamSet;
} 
```

我需要帮助：成功登录后，我需要从主菜单栏中打开 HolidayApp (Child2)，并在文本框中显示用户详细信息。请帮助或建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:36:58.740

如果我正确理解您的代码，那么您的财产`ParamSet`不会保留任何数据，而只是读取并设置`txtHolidaySurname.Text`

因此，如果在`Form_Load`文本框之后为空，则可能`txtHolidaySurname.Text`在`h.ParamSet=Param`.

尝试只保存一个名称，然后输入文本框`Form_Load`

```
private string sParam;
public string ParamSet
{
    get { return this.sParam;}
    set { this.sParam=value;}
} 
```

In`Form_Load`将是相同的代码....

# php - 正则表达式将多行字符串转换/规范化为单个字符串

> ID：15039032
> 
> 赞同：0
> 
> 时间：2013-02-23T09:28:20.930
> 
> 标签：php, preg-replace, multilinestring

输入是一个多行字符串，例如：

```
 table {
      border:0;
      border-spacing:0;
      border-collapse:collapse;
      margin-left:auto;                 // 'align:center' equivalent
      margin-right:auto;
    } 
```

输出是一个单行字符串，其中删除了“额外”空格和注释，例如：

```
 table { border:0; border-spacing:0; border-collapse:collapse; margin-left:auto;} 
```

使用 Perl 的一种方法是：

```
 #! perl -w
    use strict;

    my $css = <<CSS;
    table {
      border:0;
      border-spacing:0;
      border-collapse:collapse;
      margin-left:auto;                 // 'align:center' equivalent
      margin-right:auto;
    }
    CSS

    $css =~ s/\s{2,}/ /g;   # globally replace 2 or more whitespace with 1 space
    $css =~ s|\s+//.+\n||g; # globally replace C comment with empty string
    $css =~ s|\n||g;        # globally replace newline with empty string

    print $css; 
```

我尝试在 PHP 中做类似的事情，但它对输入没有*任何*作用：

```
 <?php

    define("CSS_TABLE",
    "table {
      border:0;
      border-spacing:0;
      border-collapse:collapse;
      margin-left:auto;              // 'align:center' equivalent
      margin-right:auto;
    }");

    $css = CSS_TABLE;

    preg_replace("/\s\s+/", ' ', $css);
    preg_replace("/\s+\/\/.+\n/", '', $css);
    preg_replace("/\n/", '', $css);

    echo("CSS-min: $css\n\n");
    ?> 
```

注意：“定义”不是问题，因为我还使用了“这里”文档——这两种方式都没有乐趣。我显示的是“定义”而不是“此处”文档（如 Perl 示例中），因为现有的 PHP 代码使用它（以及一大堆其他代码！）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:33:45.900

像这样试试。

首先你需要删除评论

```
define("CSS_TABLE",
    "table {
      border:0;
      border-spacing:0;
      border-collapse:collapse;
      margin-left:auto;              // 'align:center' equivalent
      margin-right:auto;
    }");

    $css = CSS_TABLE;

    $css = preg_replace("#;\s*//.*#m", ';', $css);
    $css = preg_replace("/\s{2,}/", ' ', $css);
    $css = preg_replace("/[\n\r]+/", '', $css);

    echo("CSS-min: $css\n\n"); 
```

结果是

```
CSS-min: table { border:0; border-spacing:0; border-collapse:collapse; margin-left:auto; margin-right:auto; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:41:09.543

尝试这个

```
define("CSS_TABLE",
"table {
  border:0;
  border-spacing:0;
  border-collapse:collapse;
  margin-left:auto;              // 'align:center' equivalent
  margin-right:auto;
}");

$css = CSS_TABLE;
$css = preg_replace("#//.*#", '', $css);
$css = preg_replace("/\\s/", ' ', $css);
$css = preg_replace("/\\s+/", ' ', $css);
echo("CSS-min: $css"); 
```

# r - 创建一个同事的 Windows 7 PC 集群以在 R 中进行并行处理？

> ID：15039039
> 
> 赞同：12
> 
> 时间：2013-02-23T09:29:16.540
> 
> 标签：r, parallel-processing, cluster-computing, mpi

我在 5 个不同国家/地区的 10 年每日债券价格数据中运行 R 中的 termtrc 收益率曲线分析包。这是高度计算密集型的，在标准 lapply 上每个国家/地区需要 3200 秒，如果我在我的 2009 i7 mac 上使用 foreach 和 %dopar%（带 doSNOW），使用所有 4 个内核（8 个带超线程），我得到这个850 秒。每次我添加一个国家（以计算国家间的利差）时，我都需要重新运行这个分析，我还有 19 个国家要去，未来还有更多的信贷收益率曲线。所花费的时间开始看起来像一个主要问题。顺便说一下，所讨论的 termstrc 分析函数是在 R 中访问的，但它是用 C 编写的。

现在，我们是一个 12 人的小公司（阅读预算有限），全部配备 8GB 内存，i7 电脑，其中至少有一半用于日常文字处理/电子邮件/浏览风格的任务，即使用 5%发挥他们的最大作用。它们都使用千兆（但不是 10 千兆）以太网进行联网。

我可以使用 MPI 对这些未充分利用的 PC 进行聚类并在它们之间运行我的 R 分析吗？网络会不会受影响？收益率曲线分析函数的每次迭代大约需要 1.2 秒，所以我假设如果并行处理的粒度是将整个函数迭代传递给每个集群节点，与千兆以太网延迟相比，1.2 秒应该是相当大的？

这可以做到吗？如何？对我的同事会有什么影响。当我对他们的机器征税时，他们可以继续阅读他们的电子邮件吗？

我注意到 Open MPI 似乎不再支持 Windows，而 MPICH 似乎支持。如果有的话，你会用哪个？

也许在每台 PC 上运行一个 Ubuntu 虚拟机？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T19:40:58.730

是的你可以。有很多方法。最简单的方法之一是使用[redis](http://redis.io)作为后端（就像`sudo apt-get install redis-server`在 Ubuntu 机器上调用一样简单；有传言说你也可以在 Windows 机器上使用 redis 后端）。

通过使用[doRedis](http://cran.r-project.org/package=doRedis)包，您可以*非常轻松地*在 redis 中的任务队列上排队作业，然后使用一个、两个、...空闲的工作人员来查询队列。最重要的是，您可以轻松混合操作系统，所以是的，您同事的 Windows 机器也符合条件。此外，您可以根据需要使用一个、两个、三个……客户端，并按比例放大或缩小。队列不知道也不关心，它只是提供工作。

[最重要的是， doRedis](http://cran.r-project.org/package=doRedis)中的小插图包含 Linux 和 Windows 客户端混合的工作示例，以使引导示例运行得更快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T10:38:48.270

也许不是您正在寻找的答案，但是 - 这是替代方案非常好以至于难以忽视的情况之一。

对于这些类型的计算问题，AWS 集群的成本*低得离谱*（我强调）。您只需为使用的内容付费。我可以向您保证，通过不花时间尝试将 12 台 Windows 机器转换为集群，您将节省资金（至少在机会成本方面）。出于您的目的，您甚至可以免费执行此操作。（IIRC，他们仍然在集群上提供免费的计算时间）

参考：

*   [使用 AWS 与 R 进行并行处理](https://stackoverflow.com/questions/7241244/using-aws-for-parallel-processing-with-r)
*   [http://blog.revolutionanalytics.com/2011/01/run-r-in-parallel-on-a-hadoop-cluster-with-aws-in-15-minutes.html](http://blog.revolutionanalytics.com/2011/01/run-r-in-parallel-on-a-hadoop-cluster-with-aws-in-15-minutes.html)
*   [http://code.google.com/p/segue/](http://code.google.com/p/segue/)
*   [http://www.vcasmo.com/video/drewconway/8468](http://www.vcasmo.com/video/drewconway/8468)
*   [http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)
*   [http://aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)

其中一些实例非常强大，您甚至可能不需要弄清楚如何在集群上设置您的工作（根据您当前的描述）。正如您从参考资料中看到的，成本低得离谱，每小时计算时间 1-4 美元不等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T22:59:21.417

那么 OpenCL 呢？

这将需要重写 C 代码，但会允许潜在的大幅加速。GPU具有强大的计算能力。

# eclipse - 为插件测试组织夹具首选项

> ID：15039040
> 
> 赞同：3
> 
> 时间：2013-02-23T09:29:21.733
> 
> 标签：eclipse, junit, eclipse-plugin

为了测试一个 Eclipse 应用程序，我编写了一个测试套件，它通过搜索存储在给定包的子文件夹中的测试项目，在运行时动态发现可用的测试用例，如下所示：

```
my.plugin
  src/      
  fixtures/ 
    p1/     
    p2/ 
```

每个夹具都是一个成熟的 Eclipse 项目。在运行时，我的套件会发现`p1`并`p2`为每个套件创建一个测试。然后每个测试在设置时将其夹具导入工作区，然后运行实际测试代码并在拆卸时删除夹具。到目前为止，这很好用，我只是转储另一个夹具来添加新测试。无需为新测试编写更多代码。耶！

我现在的问题是，所有这些都是针对具有默认首选项的干净工作区运行的。如果我的一些灯具需要特定的偏好设置才能有用怎么办？我不知何故需要为夹具提供这些自定义首选项，并确保将它们加载到夹具的测试设置中，并在拆卸时恢复默认的工作台首选项。在 Eclipse 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:00:25.633

如果您只想使用项目设置，那么解决方案很简单。只需在每个项目中创建一个 .settings 文件夹并填充相应的`org.foo.bundle.name.prefs`文件。

如果您想进行工作区设置，事情会变得更加复杂。我建议查看`org.osgi.service.prefs.Preferences`和`org.eclipse.core.runtime.preferences.IScopeContext`API。Eclipse 使用分层方法来提供首选项。您可以设置范围的层次结构，例如默认、工作区和项目范围。每个作用域都有一个或多个节点，每个节点都有一组键值对。

例如，您通常会查找首选项，例如特定项目中的源代码级编译器属性。以下是此过程的步骤：

1.  创建范围层次结构，通常根是默认的，然后是工作区，然后是项目。
2.  `org.eclipse.jdt.core`从底部范围获取节点。
3.  向节点询问与键关联的值。
4.  如果这个节点有值，则返回它，否则从下一个作用域转到该节点。
5.  如果没有一个范围包含该键，则返回一些默认值。

简单地完成这项工作而不使用内部 Eclipse API 的最佳选择是使用`org.eclipse.ui.texteditor.ChainedPreferenceStore`实例。您将创建要从中获取首选项的 IPreferenceStore 的查找层次结构，其中之一将是您创建的自定义 IPreferenceStore，它将为您的项目提供额外的首选项。

现在，您当然需要确保所有需要这些自定义首选项的地方都能够传入自定义的 ChainedPreferenceStore。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:23:56.370

我不确定这是否是最好的解决方案，但我会这样做：

让用户选择（在设置中）是否应该在干净的工作区中运行测试。如果没有，只需使用当前的，这样用户就可以在那里应用设置。我认为这是合理的，因为测试运行通常在与要测试的实际项目相同的工作空间中完成。

您可以通过调用来访问当前工作区`ResourcesPlugin.getWorkspace()`。

# node.js - 访问路由中的 app.js 变量但没有全局 express

> ID：15039045
> 
> 赞同：2
> 
> 时间：2013-02-23T09:29:54.647
> 
> 标签：node.js, express

这是我在 app.js 中的配置：

```
var express = require('express')
, routes = require('./routes')
, user = require('./routes/user')
, http = require('http')
, path = require('path')
, Server = mongo.Server
, Db = mongo.Db;
, mongo = require('mongodb');
, BSON = mongo.BSONPure;

var app = express();
var server = new Server('localhost', 27017, {auto_reconnect: true, });
var db = new Db('tasksdb', server); //i need to remove this "var" to access db in routes

db.open(function(err, db) {
if(!err) {
 console.log("Connected to 'tasksdb' database");
 db.collection('tasks', {safe:true}, function(err, collection) {
   if (err) {
     console.log("The 'tasks' collection doesn't exist. Creating it with sample data...");
     populateDB();
   }
 });
}
});

app.get('/', routes.index);
app.get('/tasks', routes.getAllTasks); 
```

在 routes/index.js 我有：

```
exports.index = function(req, res){
  res.render('index', { title: 'Express' });
};

exports.getAllTasks = function (req, res) {

db.collection( 'tasks', function ( err, collection ){ //this "db" is not accessible unless i remove "var" from db in app.js

    collection.find().toArray( function ( err, items ) {

        res.send(items);

    })

})
}; 
```

它当然不起作用，除非我从 app.js 中的“db”中删除“var”，然后它变成全局的，我可以在路由中访问它，但我不想在我的代码中使用全局变量，也不想移动控制器对 app.js 文件的操作。怎么解决？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T09:48:21.970

我不确定我是否理解。是不是`db`全局的（有或没有`var`）（对我来说它看起来像一个全局范围）？此外，你为什么不希望它是全球性的？这是使用全局变量的一个很好的例子。

但它不会在文件之间共享。您必须将其添加到导出中。试试这个：

**应用程序.js**

```
exports.db = db; 
```

**路线/index.js**

```
var db = require("app").db; 
```

另一种方法是`db`像这样添加到每个处理程序：

**应用程序.js**

```
app.use(function(req,res,next){
    req.db = db;
    next();
});
app.get('/', routes.index);
app.get('/tasks', routes.getAllTasks); 
```

那么它应该在任何路线上都可用`req.db`。

# java - 为什么给我看我放在txt中的最后一个对象

> ID：15039047
> 
> 赞同：-1
> 
> 时间：2013-02-23T09:30:13.493
> 
> 标签：java

我有一个大问题，当我点击查看我在 txt 中写入的所有对象时，我在一个 txt 文件中写入相同的对象帐户只显示最后一个以及我如何在 JOptionPane 中显示该帐户，第二个是我如何使帐户取nuber一，二，三……我写的每个帐户都从先例帐户中取一个数字加一。我相信解释清楚

```
 if( str.equals("Receipt") )
 {
      ObjectInputStream in = null;
      Account acc = null;
      try
      {
           in = new ObjectInputStream(new FileInputStream("Accounts.txt"));
           while( (acc = (Account) in.readObject()) !=null)
           {
                if (acc instanceof Account)
                     ((Account)acc).print();
                //acc.print();
           }
      }
      catch(EOFException ex)
      {
           System.out.println("End of file reached.");
      }
      catch(ClassNotFoundException ex)
      {
           System.out.println("Error casting");
           ex.printStackTrace();
      }
      catch(FileNotFoundException ex)
      {
           System.out.println("Error specified file does not exist");
           ex.printStackTrace();
      }
      catch(IOException ex)
      {
           System.out.println("Error with I/O processes");
           ex.printStackTrace();
      }
      finally
      {
           try
           {
                in.close();
           }
           catch(IOException ex)
           {
                System.out.println("Another IOException during the closing");
                ex.printStackTrace();
           }
      }
 } 
```

将对象写入文件的代码

```
Account ac=new Account(posoOfil,poso,ariLoga,aitiol,diafor); 
      ac.print();

      try{

      OutputStream file = new FileOutputStream("Accounts.txt");
      OutputStream buffer = new BufferedOutputStream( file );
      ObjectOutput output = new ObjectOutputStream( buffer );
      try{
        output.writeObject(ac);
        output.flush();

System.out.println("Object written to file");
      }
      finally{
        output.close();
      }
    }
      catch
(FileNotFoundException ex) {System.out.println("Error with specified file") ;
ex.printStackTrace();}

    catch(IOException ex){
      System.out.println("Cannot perform output.");
    }

      } 
```

和班级帐户

```
public class Account implements Serializable {

    private int arithmKat;
 // private Date date ;
    private int posoOfil;
    private int posoKat;
    private String ariLoga ;
    private String aitiol;
    private boolean diafor=false;

    public Account(int posoOfil, int posoKat,String ariLoga,String aitiol,boolean diafor){
    arithmKat++;
    this.posoOfil=posoOfil;
    this.posoKat=posoKat;
    this.ariLoga=ariLoga;
    this.aitiol=aitiol;
    this.diafor=diafor;

    }
    void print(){
    System.out.println(arithmKat+"  "+posoOfil+"  "+posoKat+"  "+diafor);}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:13:21.097

您只需将**一个**帐户写入文件。编写帐户的代码中根本没有循环。编写多个帐户的代码如下所示：

```
private void writeAccounts(List<Account> accounts) throws IOException {
    OutputStream file = new FileOutputStream("Accounts.txt");
    OutputStream buffer = new BufferedOutputStream(file);
    ObjectOutput output = new ObjectOutputStream(buffer);

    try {
        for (Account account : accounts) {        
            output.writeObject(account);
        }
        output.close();
    }
    finally {
        output.close();
    }
} 
```

# ios4 - SDWebImage 在 iOS 4.3 中不工作如何解决

> ID：15039055
> 
> 赞同：0
> 
> 时间：2013-02-23T09:31:17.547
> 
> 标签：ios4

我正在使用 SDWebImage 框架 3.0，但它在 iOS 4.3 中不起作用

如何在ios4.3中使用SDWebimage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T18:10:40.510

您可以改用 SDWebImage 框架 2.0，它适用于 iOS 4.3

# java - acceptAndOpen() 方法错误

> ID：15039057
> 
> 赞同：1
> 
> 时间：2013-02-23T09:31:40.960
> 
> 标签：java, bluetooth, service-discovery

我正在制作一个与蓝牙相关的应用程序来浏览互联网..服务器作为笔记本电脑/台式机，客户端作为手机..我需要在客户端和服务器之间建立连接..但是服务器的执行突然停止在该方法`acceptAndOpen()`..请帮助解决问题..这是它在服务器端停止的代码：

```
while (mServerState) {
    StreamConnection btConn = null;
    try {
        updateStatus("[server:] Now waiting for a client to connect");

        //here is the error
        btConn = (StreamConnection) btServerNotifier.acceptAndOpen();

        RemoteDevice dev = RemoteDevice.getRemoteDevice(btConn);

        System.out.println("Remote device address: " + dev.getBluetoothAddress());

        updateStatus("Remote device " + dev.getFriendlyName(true) + "connected");

    } catch (IOException ioe) {

    }
    if (btConn != null) {
        processConnection(btConn);
    }
} 
```

# php - 删除实体值时不删除搜索索引

> ID：15039058
> 
> 赞同：1
> 
> 时间：2013-02-23T09:31:48.397
> 
> 标签：php, doctrine, symfony-2.1

我正在使用 Symfony 2.1 构建的工作门户网站。我已经实现`ewz/EWZSearchBundle`了求职过程，如下所示：

```
/**
 * Displays a form to create a new Job entity.
 *
 * @Route("/new", name="job_new")
 * @Template("JobBundle:Job:new.html.twig")
 */
public function newAction(Request $request)
{
    $entity = new Job();
    $form   = $this->createForm(new JobType(), $entity);

    if('POST'===$request->getMethod()){
        $form->bind($request);

        if ($form->isValid()) {

            $entity->setOwner($this->getEmployer());

            $em = $this->getDoctrine()->getManager();
            $em->persist($entity);
            $em->flush();

            $location = $entity->getLocation();
            $loName = array();
            foreach ($location as $key => $loc) {
                $loName[] = $loc->getName();
            }

            $industry = $entity->getIndustry();
            $inName = array();
            foreach ($industry as $key => $ind) {
                $inName[] = $ind->getTitle();
                }
            $skills = $entity->getSkills();
            $skillName = array();
            foreach ($skills as $key => $skl) {
                $skillName[] = $skl->getTitle();
                }

            $education = $entity->getEducation();
            $educationName = array();
            foreach ($education as $key => $edu) {
                $educationName[] = $edu->getTitle();
                }

            $search = $this->get('ewz_search.lucene');

            $document = new Document();
            $document->addField(Field::keyword('key', $entity->getId()));
            $document->addField(Field::text('title', $entity->getTitle()));
            $document->addField(Field::text('url', $this->generateUrl('job_show', array('slug' => $entity->getSlug()))));
            $document->addField(Field::unstored('body', $entity->getDescription()));
            $document->addField(Field::text('location', implode(" ", $loName)));
            $document->addField(Field::text('industry', implode(" ", $inName)));
            $document->addField(Field::text('skills', implode(" ", $skillName)));
            $document->addField(Field::text('education', implode(" ", $educationName)));

            $search->addDocument($document);
            $search->updateIndex();

            return $this->redirect($this->generateUrl('job_show', array('slug' => $entity->getSlug())));
        }

    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

当候选人通过以下任何领域搜索工作时，它工作得非常好：位置、行业、技能或教育。但是我有两个问题：

1.  在这个过程中，对于每个领域（位置、技能、行业或教育），只有一个职位搜索适用，而我想要单独的搜索表单，例如在位置搜索中，只有位置字段匹配，而不匹配其他剩余字段。

2.  第二个问题是当雇主删除他的工作时，被删除工作的索引也会显示在搜索过程中，而在工作被删除后，被删除工作的索引也应该从搜索索引中删除。

我试图`job_delete`通过以下代码删除操作时间的搜索索引：

```
/**
 * Deletes a Job entity
 * @Route("/{slug}/delete", name="job_delete")
 * @Method("POST")
 */
public function deleteAction(Request $request, $slug)
{
    $em = $this->getDoctrine()->getManager();
            $entity = $em->getRepository('JobBundle:Job')
           ->findOneBy(array('slug' => $slug));

     if (!$entity) {
            throw $this->createNotFoundException('Unable to find Job entity.');
        }       

    $form = $this->createDeleteForm($entity->getSlug());
    $form->bind($request);       
    if ($form->isValid()) {

    $this->checkOwnerSecurity($entity); 

        $em->remove($entity);
        $em->flush();
        $search = $this->get('ewz_search.lucene');
        $index = $search->getIndex();
        $removePath = 'http://localhost/Jobtook/web/app_dev.php/employer/job/{slug}/delete';
        $hits = $index->find('job_delete' . $removePath);
        foreach ($hits as $hit) {
        $index->delete($hit->id);
        }
    }   

    return $this->redirect($this->generateUrl('job'));
}

private function createDeleteForm($slug)
{
    return $this->createFormBuilder(array('slug' => $slug))
        ->add('slug', 'hidden')
        ->getForm()
    ;
} 
```

但是通过这段代码，当我创建许多作业并只删除一个作业时，所有作业都会从搜索索引中删除，即使剩余的作业仍然存在于数据库中。我不知道我做错了什么。

# vbscript - 强制屏幕重绘

> ID：15039060
> 
> 赞同：0
> 
> 时间：2013-02-23T09:32:10.720
> 
> 标签：vbscript, wsh

我们刚买了一台新的 win 7 64 计算机，一个非常旧的程序在启动时无法正确显示 - 在我更改其窗口大小之前，它不会完全绘制自己。我想编写一个启动旧程序的小脚本程序，然后更改其大小（例如，最小化然后恢复或最大化然后恢复其窗口）或以其他方式强制程序重绘自身。

这样，用户可以单击程序图标，它会闪烁片刻并正确显示。

我试过了：

```
Dim objShell
Set objShell = WScript.CreateObject( "WScript.Shell" )
objShell.Run("""c:\Program Files (x86)\VideoLan\VLC\vlc.exe""")
objShell.SendKeys "% x"
objShell.SendKeys "% r"
Set objShell = Nothing 
```

基于[如何使用 vb 脚本最大化、恢复或最小化窗口？](https://stackoverflow.com/questions/3824284/how-can-i-maximize-restore-or-minimize-a-window-with-a-vb-script/3824818#3824818)这可以启动 vlc（测试程序，而不是问题程序），但没有改变它的大小。

编辑：运行后添加轻微延迟（wscript.sleep（200））解决了问题。我仍然想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:04:51.320

不确定这是否可行，但您可以尝试一下：

```
CreateObject("Shell.Application").Namespace(0).Self.InvokeVerb "R&efresh" 
```

上面调用了桌面的“刷新”，它可能也可能不会更新您的应用程序窗口。

# jsf - 如何保存 p:selectOneRadio 的值

> ID：15039063
> 
> 赞同：1
> 
> 时间：2013-02-23T09:32:32.210
> 
> 标签：jsf, primefaces

我有这个 selectOneRadio：

```
 <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">  

        <h:outputText value="Options: " />  
        <p:selectOneRadio id="options" value="#{formBean.number}">  
            <f:selectItem itemLabel="Option 1" itemValue="1" />  
            <f:selectItem itemLabel="Option 2" itemValue="2" />  
            <f:selectItem itemLabel="Option 3" itemValue="3" />  
        </p:selectOneRadio>  

    </h:panelGrid> 
```

如何在没有提交按钮的情况下保存 bean 中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:48:50.007

你可以在`<p:ajax />`里面使用`selectOneRadio`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T21:23:42.927

只需在 p:selectOneRadio 中添加一行

在您的情况下，它应该是这样的：

```
<p:ajax listener="#{formBean.setNumber(formBean.number)}"/> 
```

在这种情况下它对我有用：

```
 <p:selectOneRadio id="answer" value="#{test.selectedAnswer}"  layout="grid" columns="1"> 
            <f:selectItem itemValue="0" itemLabel="#{test.activeAnswers.get(0).getText()}" itemDisabled="#{progressBar.disabled}" />
            <f:selectItem itemValue="1" itemLabel="#{test.activeAnswers.get(1).getText()}" itemDisabled="#{progressBar.disabled}" />
            <f:selectItem itemValue="2" itemLabel="#{test.activeAnswers.get(2).getText()}" itemDisabled="#{progressBar.disabled}" />
            <f:selectItem itemValue="3" itemLabel="#{test.activeAnswers.get(3).getText()}" itemDisabled="#{progressBar.disabled}" />
            <p:ajax listener="#{test.setSelectedAnswer(test.selectedAnswer)}"/> 
        </p:selectOneRadio> 
```

# c - 传递给 printf() 的内容

> ID：15039064
> 
> 赞同：1
> 
> 时间：2013-02-23T09:32:32.803
> 
> 标签：c, printf

全部，

假设我有 2 个双精度值：

```
3.567
0.412 
```

我想将它们显示为：

```
3.567
 .412 
```

为了实现这一点，我应该将哪种格式传递给 printf()？该格式应处理这两种情况。

谢谢你。

# c - switch 语句和增量

> ID：15039068
> 
> 赞同：3
> 
> 时间：2013-02-23T09:32:49.963
> 
> 标签：c

我有以下代码：

```
int i = 1;
int j = 0;
switch (i++)
{
case 1: j += i;
case 2: j += i;
case 3: j += i;
break;
}
printf("%d %d",i, j); 
```

该`i++`表达式的计算结果`i`为 1，因为它是一个后自增运算符，因此将执行 case 1 中的语句，这意味着`j`计算结果为 2。然后，程序继续执行以下所有语句。由于 的值`i`不变，所以 的值也`j`不变。所以我希望输出是这样的，`2 2`但结果是`2 6`。谁能给我一个解释，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T09:35:07.250

> 由于 i 的值不会改变，因此 j 的值也不会改变。

不对。

`j += i`与 , 相同`j = j + i`，并且`i is 2`一次**在**`switch(..)`语句中。

这执行了**3 次**给你`6`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T09:38:29.483

关键是在处理案例语句之前评估“switch（i++）”。因此 i++ 会将 i 设置为 2。但是，由于 i++ 是后增量，因此它将计算为 1。因此将触发第一种情况。由于没有 break 语句，代码将通过所有三个导致 j==6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:46:45.670

j 将在 switch 块中增加三次。我将首先转到案例 1，因为 i 是后递增的。由于没有 break 语句，它将遍历所有 case 语句，从而给出值 6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T09:52:30.273

必须在每个 case 语句中添加一个 break 语句，以防止行为失败。您认为代码工作的方式如下：
1\. Switch 评估 i = 1。
2\. 将 i 递增到 2。
3\. 输入 switch 并执行 case 1。
4\. 退出 switch。
实际发生的方式：
1\. Switch 评估 i = 1。
2\. 将 i 递增到 2。
3\. 输入 switch 语句并执行案例 1。
4\. 失败并执行案例 2。
5\. 失败并执行案例 3。
6 . 退出switch语句。

对于您想要尝试的行为：
switch(i++)
{
case 1: j+=i;
休息;
... 对案例 2 和案例 3 执行相同操作
}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T10:19:22.880

如果你做了 j = i 而不是 j+= i，你所期望的答案就会出现。但是您使用的是 j+=i ，它转换为 j = j+i; 这意味着 j 在每一步中都会更新。

# asp.net - jQuery移动单选按钮选择

> ID：15039072
> 
> 赞同：1
> 
> 时间：2013-02-23T09:33:22.577
> 
> 标签：asp.net, jquery-mobile

我正在尝试实现一个里面有单选按钮的`horizontal control group`。`jquery mobile`我正在尝试`dynamically`从`code behind`.
这些单选按钮位于 for 循环中。

```
StringBuilder tileString = new StringBuilder(string.Empty);     

foreach (Product product in productsInCart)
        {               
            tileString.Append("<div><legend >Choose shipping type:</legend></div><br />");

            tileString.Append("<input type='radio' name='radio-choice-1' id='radio-choice-1' onclick='findPaymentMethod()' value='In Flight' checked='checked' />");

            tileString.Append("<label for='radio-choice-1'>In flight</label>");

            tileString.Append("<input type='radio' name='radio-choice-1' id='radio-choice-2' value='On Arrival' onclick='findPaymentMethod()' />");

            tileString.Append("<label for='radio-choice-2'>On Arrival</label>");                           
        } ` 
```

如您所见，第一个单选按钮上有一个属性。

```
checked='checked' 
```

但是，当它在 for 循环中运行时，只会检查 for 循环中的最后一个单选元素。谁能建议我代码有什么问题？或者我在这里错过了什么？

**编辑**： 添加生成的 HTML 字符串。

```
<div data-role='fieldcontain'>
            <fieldset data-role='controlgroup' data-type='horizontal' id='6' data-mini='true'>
              <div>
                <legend >Choose shipping type:</legend>
              </div>
              <br />
              <input type='radio' name='radio-choice-1' id='radio-choice-16'  value='In Flight' checked='checked'/>
              <label for='radio-choice-16'>In flight</label>
              <input type='radio' name='radio-choice-1' id='radio-choice-26' value='On Arrival'  />
              <label for='radio-choice-26'>On Arrival</label>
            </fieldset>
          </div>`

`<div data-role='fieldcontain'>
            <fieldset data-role='controlgroup' data-type='horizontal' id='1' data-mini='true'>
              <div>
                <legend >Choose shipping type:</legend>
              </div>
              <br />
              <input type='radio' name='radio-choice-1' id='radio-choice-11'  value='In Flight' checked='checked'/>
              <label for='radio-choice-11'>In flight</label>
              <input type='radio' name='radio-choice-1' id='radio-choice-21' value='On Arrival'  />
              <label for='radio-choice-21'>On Arrival</label>
            </fieldset>
          </div> 
```

只有 1 个单选元素在`fieldset`

[这是所需效果的图像](https://www.dropbox.com/s/vnqek52rs0j0y62/Stackoverflow.PNG)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:19:06.700

您的 name 属性（如 id one）必须是唯一的。

工作示例：http: [//jsfiddle.net/Gajotres/SBxVc/](http://jsfiddle.net/Gajotres/SBxVc/)

```
<div data-role='fieldcontain'>
     <fieldset data-role='controlgroup' data-type='horizontal' id='6' data-mini='true'>
         <div>
             <legend >Choose shipping type:</legend>
         </div>
         <br />
         <input type='radio' name='radio-choice-16' id='radio-choice-16'  value='In Flight' checked='checked'/>
         <label for='radio-choice-16'>In flight</label>
         <input type='radio' name='radio-choice-26' id='radio-choice-26' value='On Arrival'  />
         <label for='radio-choice-26'>On Arrival</label>
     </fieldset>
</div>

<div data-role='fieldcontain'>
    <fieldset data-role='controlgroup' data-type='horizontal' id='1' data-mini='true'>
        <div>
            <legend >Choose shipping type:</legend>
        </div>
        <br />
        <input type='radio' name='radio-choice-11' id='radio-choice-11'  value='In Flight' checked='checked'/>
        <label for='radio-choice-11'>In flight</label>
        <input type='radio' name='radio-choice-21' id='radio-choice-21' value='On Arrival'  />
        <label for='radio-choice-21'>On Arrival</label>
    </fieldset>
</div> 
```

# java - 在Java中绘制带有尖角的边界路径

> ID：15039074
> 
> 赞同：3
> 
> 时间：2013-02-23T09:33:25.820
> 
> 标签：java, swing, user-interface, drawing, java-2d

我正在开发一个在地图上显示 GPS 轨迹的应用程序。我想将轨道绘制为任意厚度的彩色路径。我发现这`GeneralPath`门课似乎在做我想做的事。但是，我希望彩色路径也有黑色边框。我找不到任何关于如何为路径添加边框的信息，所以我想出了一个快速的 hacky 解决方案，首先绘制一条粗黑色路径，然后在顶部绘制一条细彩色路径。

SSCCE：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.GeneralPath;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class PathBorder {
    private JFrame frame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    PathBorder window = new PathBorder();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public PathBorder() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            protected void paintComponent(Graphics g) {
                GeneralPath path;
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                g2d.setStroke(new BasicStroke(5.5f));
                g2d.setColor(Color.BLACK);
                path = new GeneralPath();
                path.moveTo(0, 0);
                path.lineTo(100, 100);
                path.lineTo(200, 100);
                path.lineTo(100, 80);
                g2d.draw(path);
                g2d.setStroke(new BasicStroke(3));
                g2d.setColor(Color.YELLOW);
                g2d.draw(path);
            }
        };
        frame.setBackground(Color.CYAN);
        frame.add(panel);
    }
} 
```

这是一张图片（取自 SSCCE）来突出我的问题。请看下面的红色圆圈，注意外部边框是如何有间隙的。我希望填补这个空白，以便边界是连续的。

![在此处输入图像描述](../Images/0e55c3fd6dd5ba9d238fd720d04f74bf.png)

以下是我的真实曲目应用程序的一些实际屏幕截图：

![在此处输入图像描述](../Images/c88c7255075c8e72ac3f0ca07e145d81.png)

如果你仔细观察赛道右下角的急弯，你会发现边界会短暂丢失……下面的详细图片让它更加清晰。

![在此处输入图像描述](../Images/f7093e390e36143ddc3f93a2898bf0ff.png)

我不确定如何解决这个问题，但我愿意接受建议，要么保持`GeneralPath`策略，要么完全使用不同的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T11:00:25.070

试验`cap`和`join`参数以获得更好的效果。例如

![路径边界](../Images/ddb2dd3c9dbd9eef9569f12218c1007f.png)

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.geom.GeneralPath;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class PathBorder {

    private JFrame frame;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    PathBorder window = new PathBorder();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public PathBorder() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {

            GeneralPath path;

            protected void paintComponent(Graphics g) {
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
                BasicStroke s = new BasicStroke(
                        5.5f, 
                        BasicStroke.CAP_ROUND, 
                        BasicStroke.JOIN_ROUND);
                g2d.setStroke(s);
                g2d.setColor(Color.BLACK);
                if (path==null) {
                    path = new GeneralPath();
                    path.moveTo(0, 0);
                    path.lineTo(100, 100);
                    path.lineTo(200, 100);
                    path.lineTo(100, 80);
                }
                g2d.draw(path);
                g2d.setStroke(new BasicStroke(3));
                g2d.setColor(Color.YELLOW);
                g2d.draw(path);
            }
        };
        frame.setBackground(Color.CYAN);
        frame.add(panel);
    }
} 
```

# c++ - uint8_t - 8 位保证

> ID：15039077
> 
> 赞同：1
> 
> 时间：2013-02-23T09:33:32.810
> 
> 标签：c++

如何以及在哪里保证 an`uint8_t`是 8 位？

深入研究 N3242 -“工作草案，C++ 编程语言标准”，第 18.4.1 节 < cstdint > 概要说 -

```
 `typedef unsigned integer type uint8_t; // optional` 
```

因此，本质上，完全不需要定义符合 C++ 标准的库`uint8_t`。

更新：可能只是在问，标准的哪一行说 uintN_t 类型是 N 位？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T09:51:05.710

从 C++：

> 18.4.1 标题概要
> 
> ... 标头定义了与 C 标准中的 7.18 相同的所有函数、类型和宏。...

从 C:

> 7.20.1.1 精确宽度整数类型
> 
> 1 typedef 名称 intN_t 指定一个有符号整数类型，其宽度为 N ，没有填充位，采用二进制补码表示。因此， int8_t 表示这种宽度正好为 8 位的有符号整数类型。
> 
> 2 typedef 名称 uintN_t 指定宽度为 N 且无填充位的无符号整数类型。因此，uint24_t 表示这种无符号整数类型，其宽度正好为 24 位。
> 
> 3 这些类型是可选的。但是，如果实现提供了宽度为 8、16、32 或 64 位的整数类型，没有填充位，并且（对于有符号类型）具有二进制补码表示，则它应定义相应的 typedef 名称。

* * *

> 因此，本质上，完全不需要符合 C++ 标准的库来定义 uint8_t。

正确的。`typedef`正如 Nikos 提到的（+1），当/如果不存在/声明时，您只需要一个替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T09:57:44.497

这些`<stdint.h>` 类型是参考 C99 标准定义的。

> **C99 草案 N869 §7.17.1.1/2**：
> “typedef 名称*N*指定宽度为*N*的无符号整数类型。因此， 表示宽度正好为 24 位的无符号整数类型。”**`uint`***`**_t**`*`**uint24_t**`**

 **如果一个类型由 定义`<stdint.h>`，那么它的关联宏也是如此，如果没有定义该类型，那么它的关联宏也不是，由 C99 §7.18/4 定义。

因此，您可以使用宏的存在与否（C99 §7.18.2.1 要求）来检查类型定义`UINT8_MAX`的存在与否。`uint8_t`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T09:36:14.133

`uint8_t`保证为 8 位宽。如果它不存在，那么显然你不能使用它。但如果它在那里，它是 8 位。不可能在哪里提供但不是 8 位。**

# ruby-on-rails - 通过 Ember.js 应用程序将图像上传到 Rails 服务器

> ID：15039083
> 
> 赞同：4
> 
> 时间：2013-02-23T09:33:55.160
> 
> 标签：ruby-on-rails, ember.js, paperclip

就像它在罐头上所说的那样，我正在尝试使用我的 Ember.js 应用程序将图像上传到使用 Paperclip 管理文件上传的 Rails 后端。我环顾四周，看不到任何简单的方法可以做到这一点，有人知道这里有一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:45:04.097

我最近遇到了类似的情况，事实证明文件上传有很多复杂性 - 设备是否支持它，您是否希望能够设置触发上传的输入样式等。

我们选择了 Jquery 文件上传：[https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我采取的方法是从浏览器直接上传到 S3，然后将 S3 返回的令牌设置为模型上的属性，然后将其保存到服务器。然后在服务器上，您启动了一个后台作业以从 S3 中提取该文件并将其放在应有的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:18:30.983

几个月前我写了一个相当简单的 ember.js 文件上传示例，展示了如何编写自定义视图 + 自定义适配器，允许您将多部分表单发布回服务器。我所做的示例是为 python / django 构建的，但概念应该适用

[https://github.com/toranb/ember-file-upload](https://github.com/toranb/ember-file-upload)

我最近将它升级到 RC1（就像 5 分钟前一样），它似乎仍然可以工作：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-23T15:06:49.840

现在有一个用于 Ember 的[Ember Uploader](https://github.com/benefitcloud/ember-uploader)插件。我现在只是在整合它。

我有几个问题要解决，但看起来很合法。可能比使用 jquery 文件上传的配置少。

# node.js - 我的 node.js 应用程序在我将其放在 nginx 后面后，在写入请求时随机收到未处理的“错误”事件

> ID：15039089
> 
> 赞同：1
> 
> 时间：2013-02-23T09:34:46.577
> 
> 标签：node.js, proxy, nginx, webserver, express

我在 Windows 2012 服务器上运行 node.js（0.8.20 和 0.9.10）。我已经运行了几个星期绝对没有任何问题。那是前面没有 Nginx(1.2.6)。前面的 nginx 配置如下：

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
worker_connections  1024;
}

http {
include       mime.types;
default_type  application/octet-stream;

#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                  '$status $body_bytes_sent "$http_referer" '
#                  '"$http_user_agent" "$http_x_forwarded_for"';

#access_log  logs/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

#gzip  on;

upstream dem2 {
    server 127.0.0.1:8080;
}

server {
    listen 80;
    server_name dem2.cz dem2;
    access_log /nginx-1.2.6/logs/dem2.log;
    location / {
        #proxy_pass http://127.0.0.1:8080/;
        proxy_pass http://dem2/;
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_redirect off;
    }
}   

server {
    listen 80;
    server_name localhost;

    location / {
        root   html;
        index  index.html index.htm;
    }

}

} 
```

根据请求，我在 Node.js 应用程序中随机收到此错误：

```
events.js:69
    throw arguments[1]; // Unhandled 'error' event
                   ^
Error: socket hang up
    at createHangUpError (http.js:1383:15)
    at ServerResponse.OutgoingMessage._writeRaw (http.js:499:26)
    at ServerResponse.OutgoingMessage._send (http.js:466:15)
    at ServerResponse.OutgoingMessage.end (http.js:911:18)
    at SendStream.notModified (C:\dem2cz_node_app\node_modules\express\node_modules\send\lib\send.js:223:7)
    at SendStream.send (C:\dem2cz_node_app\node_modules\express\node_modules\send\lib\send.js:353:17)
    at SendStream.pipe     (C:\dem2cz_node_app\node_modules\express\node_modules\send\lib\send.js:322:10)
    at Object.oncomplete (fs.js:93:15)

Process finished with exit code 1 
```

我怀疑我在 Nginx 中配置了一些错误，但我肯定不知道它可能是什么。有人可以建议吗？

如果你愿意，我也可以发布 node.js 代码，但这没什么花哨的，只是 100 行快速应用程序，用于提供 AngularJS 静态文件，并可选择在有机器人时提供在 PhantomJS 中生成的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:28:42.700

0.8.20 中有一个错误修复，它显着增加了您收到的“http 挂断”错误的数量。[他们在发行说明](http://blog.nodejs.org/2013/02/15/node-v0-8-20-stable/)中谈论它。正如@robertkelp 所说，这没什么好担心的，但是您应该捕获`error`http 服务器发出的事件以避免服务器崩溃。

# visual-studio-lightswitch - LightSwitch HTML：将添加/编辑屏幕显示为主屏幕

> ID：15039090
> 
> 赞同：1
> 
> 时间：2013-02-23T09:34:49.110
> 
> 标签：visual-studio-lightswitch, sharepoint-2013

我正在创建一个**LightSwitch HTML Application**，其中我希望添加/编辑屏幕作为主屏幕。我尝试设置为主屏幕，但我只得到只读控件。有任何想法吗？

感谢和问候，
阿伦库马尔 Asirvatham

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T06:02:25.787

您可以做的是编写一些 javascript 来添加新的 X，并在调用原本空白的主屏幕的 .created javscript 函数时运行它。

如果您想了解更多信息，请回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:55:53.500

我认为这是设计使然。如果您想在添加/编辑模式下打开表单，您可以按照以下步骤在表单顶部添加一个按钮：

1.  在添加按钮对话框中，选择选择现有方法选项

2.  从 Navigation 组合框中选择 showCreateNewEntity，其中 Entity 是附加到当前屏幕的实体

3.  在任务列表中，选择保存

    您可以在按钮属性窗口的 Tap Actions 中编辑这些设置

# c# - 如何在源代码中访问 HTML 控件

> ID：15039091
> 
> 赞同：0
> 
> 时间：2013-02-23T09:34:49.817
> 
> 标签：c#, asp.net

我的用户控件中有以下代码，我想通过访问来访问此列表中的每个控件

*   或标签。

    ```
     <div class="menubarbackground">
        <ul>
            <li id="first" class="heigfbtitle">
                <a href="#" id="firstM" class="teegin mft5">1 First Item</a>
            </li>              
        </ul>
    </div> 
    ```

    如何在后面的代码中实现代码来访问这些控件？

# c# - 在 LINQ 选择方法中使用 URL.Action

> ID：15039093
> 
> 赞同：2
> 
> 时间：2013-02-23T09:35:13.123
> 
> 标签：c#, asp.net-mvc, linq, url-action

我想创建一个包含列表项的视图模型，每个项目都将包含编辑和删除操作 URL，所以我有以下代码：

```
 public ActionResult Index()
        {
            AdministrationViewModel model = new AdministrationViewModel();
            using (var _context = new CamelotFaultManagementEntities())
            {
                model.FaultTypes = new ListViewModel()
                {
                    ListTitle = AdministrationStrings.FaultTypesAdministrationTab,
                    AddNewItemURL = "#",
                    AddNewItemButtonTitle = SharedStrings.Add + " " + SharedStrings.FaultType,
                    ListItems = _context.FaultTypes.Select(type => new ListItemViewModel() { 
                        ListItemID = type.FaultTypeID,
                        ListItemName = type.FaultTypeName,
                        ListItemDescription = type.FaultTypeDescription,
                        DeleteActionURL = @Url.Action("DeleteFaultType","Administration", new {FaultTypeID = type.FaultTypeID}),
                        EditActionURL = @Url.Action("EditFaultType", "Administration", new { FaultTypeID = type.FaultTypeID }),
                    }).ToList()
                };
            }
            return View("Administration",model);
        } 
```

问题是我在运行时收到错误

> LINQ to Entities 无法识别方法 'System.String Action(System.String, System.String, System.Object)' 方法，并且此方法无法转换为存储表达式。

任何克服这个问题的方法......我真的不想自己开始创建这些 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:39:11.857

你的问题在这里：

```
DeleteActionURL = @Url.Action("DeleteFaultType","Administration", /*...*/),
EditActionURL = @Url.Action("EditFaultType", "Administration", /*...*/) 
```

LINQ 尝试创建表达式树，该树将映射到 SQL 代码，但它不知道如何映射`Url.Action`. 解决此问题的一种方法是*将 Linq to Entities 更改*为 Linq to Objects，这可以使用`ToList()`实体上的方法来完成：

```
ListItems = _context.FaultTypes.ToList().Select(i => ...) 
```

# iphone - 在从 ios 的表视图中选择特定行期间将调用哪个方法

> ID：15039101
> 
> 赞同：-5
> 
> 时间：2013-02-23T09:36:48.557
> 
> 标签：iphone, ios, objective-c

`xib`表格视图包含 7 行，我必须在其中选择 1 行，然后使用一些全局数据控制传输到另一个文件。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:43:33.403

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T09:43:24.600

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

单击 tableview 中的某一行将调用此方法。

**编辑**：您可以在此方法中显示这样的警报

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!"
                                                      message:[NSString stringWithFormat:@"This is your UIAlertview message with row number %d.",indexPath.row];                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];
    [message release];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T10:13:09.490

```
NSMutableArray *mealArray = [[NSMutableArray alloc] init];

 - (void)viewDidLoad
 {   
      mealArray = [[NSMutableArray alloc]initWithObjects:@"Breakfast",@"Lunch",@"Dinner",@"Others", nil];
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
     cell.textLabel.text = [mealArray objectAtIndex:indexPath.row];
 }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
     newViewController *newVC = [[newViewController alloc] init];
     newVC.mealType = [mealArray objectAtIndex:indexPath.row];
     [self.navigationController pushViewController:newVC animated:YES];
 } 
```

# java - 用于创建流程图的 Java 开源 API

> ID：15039103
> 
> 赞同：2
> 
> 时间：2013-02-23T09:37:06.893
> 
> 标签：java, open-source, flowchart

是否有任何 Java 开源来创建流程图，而不是在 IDE 本身中，而是在基于 Web 的应用程序中，以便可以在浏览器上查看它们？这就像一个成本控制流程图，但基本上是一个流程图。

为了避免任何混淆，业务需求是允许用户创建流程图并将其保存到数据库中。我不希望创建源代码的 UML，反之亦然。

[这个stackoverflow问题](https://stackoverflow.com/questions/6877121/is-there-any-free-online-uml-modelling-tool)指向了正确的方向，但我需要能够让用户绘制然后将绘图/信息保存到数据库中。流程图是唯一需要的 UML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T16:10:22.147

如果它不需要“基于网络”，那么[yEd Graph Editor](http://www.yworks.com/en/products_yed_about.html "yEd 图表编辑器")可能是一个不错的选择。

yEd 是一个免费的桌面应用程序，可以手动或通过导入外部数据生成高质量的图表。

# asp.net - 有没有办法让片段缓存依赖于会话中存储的对象？

> ID：15039109
> 
> 赞同：1
> 
> 时间：2013-02-23T09:38:20.487
> 
> 标签：asp.net, caching, outputcache

我有一个用户控件，我想使用以下方法缓存它：

```
<%@ OutputCache Duration="10" VaryByParam="none" %> 
```

现在对于依赖关系，我希望这个缓存依赖于对象变量，我将它存储在会话中。
我希望在此对象值更改时清除此用户控件缓存。

谢谢

# javascript - HTMLDivElement 不切换

> ID：15039110
> 
> 赞同：0
> 
> 时间：2013-02-23T09:38:23.413
> 
> 标签：javascript, html, toggle

你会[在这里](http://nos.x10.mx/)找到我的页面。

我突然遇到的问题是，当您在单击文档后单击文档左下角的开始按钮并单击“媒体”时，菜单 div 将不会切换。

我已经尝试调试并查看 Chrome 中的 div，当我手动设置它的显示并检查 div（通过在控制台中输入“菜单”[它的变量]）时，它会显示更新后的显示，但实际页面未显示更改。

所以，一步一步： 1\. 单击开始按钮 2\. 单击“媒体”。3\. 观察和思考菜单 div 不会切换，即使你再次点击开始按钮

有任何想法吗？我认为这与我用来打开“窗口”的功能有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:31:11.543

您的问题是，通过使用`document.getElementById("screentop").innerHTML+=all;`您重新定义`screentop`了菜单的内容。要修复它，您只需`menu`在添加窗口后重新定义。

您的函数应如下所示：

```
function openWin(url,icon,title)
{
//...
var all="...";
document.getElementById("screentop").innerHTML+=all;
menu=document.getElementById("menu");
//...
} 
```

# javascript - 从外部文件读取数据

> ID：15039111
> 
> 赞同：0
> 
> 时间：2013-02-23T09:38:25.163
> 
> 标签：javascript, three.js

我对three.js和javascript都是新手，所以这可能是一个非常菜鸟的问题。

我在一个文件中有一个 json 对象列表，其中包含如下数据：

```
[
{ "x":x,"y":y,"z":z ,"r":r},
{ "x":x2,"y":y2,"z":z2 ,"r":r2},
{ "x":x3,"y":y3,"z":z 3,"r":r3}
] 
```

并在屏幕上渲染。

它正是这里的一个例子：http: [//mrdoob.github.com/three.js/examples/webgl_materials2.html](http://mrdoob.github.com/three.js/examples/webgl_materials2.html)

除了我从文件中读取的球体值？

我如何调整上面的例子，我从这个文件中读取值，而不是直接在 js 中硬编码这些值？

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:46:00.353

如果您只想将数据与应用程序逻辑分开，那么您无需创建 JSON 文件并通过 Ajax 加载它，您只需创建*另一个 JavaScript 文件*并将数据放入其中。

例如：

```
// myData.js
var myData = [
    { "x":x,"y":y,"z":z ,"r":r},
    { "x":x2,"y":y2,"z":z2 ,"r":r2},
    // ...
];

// --------------

// myApplication.js

// Here goes the three.js code and you can access the data here, for example
alert(myData[0].x); 
```

在您的 HTML 文件中，您必须首先包含数据文件，以便所有以下脚本都可以访问该`myData`变量：

```
<script src="myData.js"></script>
<script src="myApplication.js"></script>
<!-- this works to: -->
<script>
    alert(myData.length);
</script> 
```

* * *

如果您想或必须通过 Ajax 加载文件，请查看以下问题：[How do I load a JSON object from a file with ajax?](https://stackoverflow.com/questions/14388452/how-do-i-load-a-json-object-from-a-file-with-ajax) .

# google-app-engine - 删除和更改 google appengine 端点

> ID：15039116
> 
> 赞同：3
> 
> 时间：2013-02-23T09:38:58.377
> 
> 标签：google-app-engine, google-cloud-endpoints

我在 Google apengine 中创建了一个小项目，并且喜欢它，除了一件事：一旦完成，删除或更改端点似乎几乎是不可能的。无论 java 端点类中的代码如何更改，API 通常都保持不变。我试图删除完整的 API，但这也是不可能的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:34:41.073

# 回复：删除

它目前不受支持，但我们正在努力。

# 回复：API 更改

[Google APIs Explorer](https://developers.google.com/apis-explorer/) Web 应用程序会主动缓存，因此当您更新 API 服务器端以查看客户端中的更改时，您需要清除缓存或强制刷新。

# oracle - ORACLE：更新多列错误：无法将字符串更新为 NULL

> ID：15039118
> 
> 赞同：0
> 
> 时间：2013-02-23T09:39:16.940
> 
> 标签：oracle, sql-update, runtime-error, multiple-columns

我有一个简单的更新语句：

```
UPDATE table_1 t1 SET (t1.a, t1.b, t1.c) = 
 (SELECT t2.x, t2.y, t3.z 
  FROM table_2 t2, table_3 t3, table_4 t4
  WHERE 
  1 = 1
  AND t2.id = t3.id
  AND t2.id1 = t4.id1
  AND t2.name = t1.name
  ) WHERE EXISTS
(SELECT 1 FROM t2
 WHERE
 1 = 1
 AND t2.name = t1.name
) 
```

内部 SELECT 查询给了我结果。但是当我执行整个 UPDATE 查询时，它失败并出现错误：ORA-01407“无法将 (%s) 更新为 NULL” 它还表示无法将 t1.a 更新为 NULL。如果我在此更新查询中犯了任何错误，请告诉我。

请注意，我不能使用 MERGE 语句，因为 t2.name = t1.name 条件可能会给我来自表 t2 的多个条目。在这种情况下，合并语句可能会因错误而失败，无法获得稳定的行集。如果有任何其他更好的方法让我知道。

更新： t1.a 有 NOT NULL 约束。我的内部查询返回的结果没有 t2.x 为 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:28:59.573

我找到了出现该错误的原因。条件 t2.name = t1.name 我在表 table_1 中得到两行。对于第一行，我从内部选择查询中获得了 t2.x 值。第二排我没有。因此我得到了错误。我修改了我的查询如下：

```
UPDATE table_1 t1 SET (t1.a, t1.b, t1.c) = 
 (SELECT t2.x, t2.y, t3.z 
  FROM table_2 t2, table_3 t3, table_4 t4
  WHERE 
  1 = 1
  AND t2.id = t3.id
  AND t2.id1 = t4.id1
  AND t2.name = t1.name
  ) WHERE t1.id, t1.name IN
(SELECT t1.id, t1.name FROM table_2 t2, table_3 t3, table_4 t4
  WHERE 
  1 = 1
  AND t2.id = t3.id
  AND t2.id1 = t4.id1
  AND t2.name = t1.name
) 
```

希望它会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:27:22.530

问题可能是您在 SET 部分的 SQL 比在 EXITS 中的 SQL 更具选择性。如果是这样，请将您的存在更改为
`... EXISTS ( SELECT 1 from
FROM table_2 t2, table_3 t3, table_4 t4
WHERE
t2.id = t3.id
AND t2.id1 = t4.id1
AND t2.name = t1.name` 

* * *

此外，如果 a、b、c 被定义为非空值，则所有 x、y 或 z 列都不应为空值（如果 t1.a 不为空等，则所有 x 不应为空值）

# dev-c++ - 如何使用 Dev C++

> ID：15039119
> 
> 赞同：-6
> 
> 时间：2013-02-23T09:39:23.140
> 
> 标签：dev-c++

我是编程新手。但我知道 turbo C & 我可以使用它。但是如何在 Dev C++ 上工作呢？我的意思是1.如何编译和2.如何运行。我有 Windows，所以如果有人帮我举个合适的例子，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:57:09.903

开发 c++ 非常简单！做基本的，打开你的文件，使用菜单执行编译和运行！

但是，如果你现在开始一些新的东西，我建议你考虑使用 eclipse。最初几天并不容易，但长期收益是巨大的！

我想改进我的答案...我建议您应该考虑使用 eclipse。我仍然认为日食很棒。此外，我在使用旧版本的 dev c++ 时遇到了一些问题。在阅读了@Orwell 的评论（提供了我不知道的事实）后，我检查了新版本，我之前遇到的问题消失了。所以，dev c++ 的大局是它是一个运行良好且非常简单的程序。开始使用 eclipse 是有代价的！

例子：

```
#include <iostream>
using namespace std;

int fibonacci(int n){
    if(n==1)return 0;
    if(n==2)return 1;
    if(n>=3)return fibonacci(n-1)+fibonacci(n-2);
}

int main(){

   // 

   int n =10;
   cout << "The element of the Fibonacci series is " << fibonacci(n) << "\n";   

   return 0;
} 
```

# java - Spring Framework中使用**@Autowired**注解和接口声明的一些疑惑

> ID：15039120
> 
> 赞同：3
> 
> 时间：2013-02-23T09:39:26.723
> 
> 标签：java, spring, spring-mvc, annotations, autowired

**我是 Spring 框架的新手，我对@Autowired**注释和接口声明的使用有一些疑问。

参考这个例子：

[http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)

我知道@Autowired 注释可用于自动链接属性上的bean。

在前面的示例中，我有以下情况：

我有一个**ContactDAO**接口，它的实现类名为**ContactDAOImpl**

接下来在**ContactServiceImpl**类中有这个变量使用**@Autowired**注释：

```
@Autowired
private ContactDAO contactDAO; 
```

**我的第一个疑问与ContactDAO**是一个**接口**这一事实有关，那么我在接线什么？具体类型：**ContactDAOImpl** ? 如果是，是 Spring Framework 做的吗？

第二个疑问与**spring-servlet.xml**配置文件中没有**ContactDAO** orf **ContactAOImpl**类的 bean 定义有关......为什么？是因为**ContactDAOImpl**类使用@Repository**注释**进行了注释吗？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T09:49:35.537

> 我的第一个疑问与 ContactDAO 是一个接口这一事实有关，那么我在接线什么？具体类型： ContactDAOImpl ? 如果是，是 Spring Framework 做的吗？

只要只有一个匹配的实现，Spring 就会为您自动装配接口的实现。还有一种方法可以通过使用和命名实现来匹配来自多个候选者的单个实现到您的自动`@Qualifier`装配`@Autowired`。

> 第二个疑问与 spring-servlet.xml 配置文件中没有 ContactDAO orf ContactAOImpl 类的 bean 定义有关......为什么？是因为 ContactDAOImpl 类使用@Repository 注释进行了注释吗？

如果您在实现中使用注释 ( `@Component`, `@Repository`, `@Service`, `@Controller`) 进行配置，则无需在 xml 中显式定义 bean（尽管您也可以这样做）。

编辑：我的[这个](https://stackoverflow.com/questions/8862909/need-some-help-to-understand-anotations-spring-annotations/8884809#8884809)旧答案可能会更清楚地说明在 Spring 中使用注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T09:48:03.650

您的两个问题的答案是“是”和“是”。

实际上，您可能没有在服务中自动装配 ContactDAOImpl 的实例，而是代理的实例，它删除了 ContactDAOImpl 的实例。代理通常会处理事务、翻译异常等。

注释是声明 Spring bean的`@Repository`另一种（更简单）方式。只有当您在 Spring xml 文件中有一个元素告诉它发现带注释的 bean 时，它才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T09:50:36.797

Spring 将自动扫描您的所有类并找到所有带注释的类并注册它们，这在您的 Spring 配置中将告诉它这样做：

```
<context:component-scan base-package="my.base.package" /> 
```

因此，您无需`@Repository`在配置文件中声明您的。

在您问题的第一部分，这是[IOC 模式](http://en.wikipedia.org/wiki/Inversion_of_control)的取消固定；您的 Service 类只知道 DAO 的接口，这意味着它不依赖于实现。

在扫描过程中，Spring 会找到所有带注释的类，当您请求`@Autowired`then 时，它会尝试查找您已注释的类，该类是您要求具有 Autowired 的接口的实现者。

[查看有关Annotation Configuration](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html)的 Spring 文档。

# c# - 如何在 lambda 表达式参数中扩展谓词

> ID：15039121
> 
> 赞同：3
> 
> 时间：2013-02-23T09:39:38.860
> 
> 标签：c#, .net, linq, lambda, expression-trees

我想在我的方法中扩展表达式参数以添加我自己的过滤器。我正在尝试执行以下操作，但语法错误：

```
public static IList<MyPage> DoSomething<T>(Expression<Func<T, bool>> predicate)
{
    return DataStore().GetPages().Where(p => p.PublishDate < DateTime.Now && predicate)
} 
```

编译器抱怨在 Visual Studio 2012 中出现此错误：

> 错误 29 运算符“&&”不能应用于“ `bool`”和“ `System.Linq.Expressions.Expression<System.Func<T,bool>>`”类型的操作数

如果返回 as ，首先扩展谓词会更好然后反馈`.Where(predicate)`吗？你会怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T09:53:21.053

> 如果返回为 .Where(predicate)，首先扩展谓词会更好吗？你会怎么做？

是的，完全一样，如果我理解你的建议正确的话。您可以`.Where()`像这样链接：

```
public static IList<MyPage> DoSomething<T>(Expression<Func<T, bool>> predicate)
{
    return DataStore().GetPages().Where(p => p.PublishDate < DateTime.Now).Where(predicate);
} 
```

# android - 表格布局间距问题

> ID：15039122
> 
> 赞同：2
> 
> 时间：2013-02-23T09:39:47.243
> 
> 标签：android, xml, android-tablelayout

我有一个滚动视图表格布局。它有 2 列。其中一个（第一个）是描述，第二个是数量。我已经做到了，如果需要，第一列可以包装文本。我现在的问题是限制两列的宽度，使它们在屏幕中占 50-50%。第一列应该换行。我确实尝试使用 android:minWidth="215dp" ，但我不想在 xml 中硬编码我的值。

这是xml。任何帮助表示赞赏。

```
<ScrollView
    android:id="@+id/scroll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/footer"
    android:layout_below="@+id/tableheader"
    android:fillViewport="true"
    android:scrollbars="none" >

    <TableLayout
        android:id="@+id/dataTable"
        style="@style/SummaryTableLayout" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
              android:layout_height="fill_parent" >

        <TextView
            android:gravity="left"
            android:minWidth="215dp"
            />

        <TextView
            android:gravity="left"
            android:minWidth="215dp"
                    />

        </TableRow>
    </TableLayout>
</ScrollView> 
```

SummaryTableLayout 样式部分是

```
<style name="SummaryTableLayout" >
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:stretchColumns">0</item>
    <item name="android:shrinkColumns">0</item>
    <item name="android:layout_marginTop">10dp</item>
    <item name="android:layout_marginBottom">25dp</item>
    <item name="android:scrollbars">vertical</item>
    <item name="android:isScrollContainer">true</item>
    <item name="android:scrollbarAlwaysDrawVerticalTrack">true</item>
</style> 
```

编辑 ::: 这是我的 xml 之一。我有第二个 xml，其中表格布局有 4 列，我希望它们的间距也均匀，第一列有 WRAPPING。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:21:58.470

使用`layout_weigth`属性。这应该适合你：

```
<TableLayout
    android:id="@+id/dataTable"
    style="@style/SummaryTableLayout" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
          android:layout_height="fill_parent" >

    <TextView
        android:gravity="left"
        android:width="0px"
        android:layout_weight="0.5"/>

    <TextView
        android:gravity="left"
        android:width="0px"
        android:layout_weight="0.5"/>

    </TableRow>
</TableLayout> 
```

根据这里[的](https://stackoverflow.com/a/4059010/1108032)答案。`layout_weight`用于定义列的百分比。

**编辑**请注意我`layout_width`用`width`列替换，因为这似乎是在这种情况下使用的正确属性。

# mysql - MySQL | 如何获取每个类别的最新文章？

> ID：15039128
> 
> 赞同：1
> 
> 时间：2013-02-23T09:40:33.413
> 
> 标签：mysql

我正在使用 WordPress 为公司构建评分系统，我必须创建一个自定义查询，但在我的情况下不起作用。

[在这里](http://sqlfiddle.com/#!2/1f510/1)（[http://sqlfiddle.com/#!2/1f510/1](http://sqlfiddle.com/#!2/1f510/1)）我有我的真实数据的副本，因为它们在我的数据库中，以及我用来提取数据的查询。

如您所见，我得到了四行结果。每行对应一个类别，但问题是我从每个类别中获取最旧的帖子，而不是所需的最新帖子。

关于如何修改此查询以获取每个类别的最新帖子的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:52:40.313

```
SELECT ID AS PostID,
       post_title AS PostTitle,
       meta_value AS CategoryID,
       name AS CategoryName,
       post_date AS `Date`
  FROM (SELECT *
          FROM wp_posts AS p
               INNER JOIN wp_postmeta AS m
                  ON p.ID = m.post_id
               INNER JOIN wp_terms AS t
                  ON m.meta_value = t.term_id
         WHERE m.meta_key = 'matchdayTeamsCategory'
        ORDER BY p.post_date DESC) tmpView
GROUP BY CategoryName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:54:26.793

这是一种方法...

[http://sqlfiddle.com/#!2/1f510/34](http://sqlfiddle.com/#!2/1f510/34)

填充填充填充

# wpf - wpf 使用字符串操作将属性设置为静态资源

> ID：15039136
> 
> 赞同：1
> 
> 时间：2013-02-23T09:41:50.830
> 
> 标签：wpf, xaml, resources, label

我正在创建一个 WPF 应用程序。它有两个标签，它们使用相同的静态字符串资源，但有一些区别。例如，它有一个带有 key`string1`和 value的字符串资源`SuccessRate`。我希望第一个标签是`SuccessRate`，第二个`Label`是`SuccessRate(%)`。我用以下方式定义第一个标签：

```
<Label Content="{StaticResource string1}" /> 
```

我如何定义第二个`Label`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:11:10.387

您可以使用`ContentStringFormat`

```
<Label Content="{StaticResource string1}" ContentStringFormat="{}{0}(%)" ... /> 
```

请注意，格式以`{}`. 如果您的格式以开头，这只是必须存在的东西。`{`

`ContentStringFormat`您可以在[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat.aspx)上阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:16:01.707

您可以将`Content`第二个 Label 的 设置为[`TextBlock`](http://msdn.microsoft.com/en-us/library/ms617591.aspx)具有两个[`Run`](http://msdn.microsoft.com/en-us/library/ms522796.aspx)元素的 a：

```
<Label>
    <TextBlock>
        <Run Text="{StaticResource string1}"/>
        <Run Text="(%)"/>
    </TextBlock>
</Label> 
```

* * *

也许你只需要 TextBlocks 而不是 Labels ：

```
<TextBlock Text="{StaticResource string1}"/>
<TextBlock>
    <Run Text="{StaticResource string1}"/>
    <Run Text="(%)"/>
</TextBlock> 
```

# python - WindowsError：[错误 740] 请求的操作即使在禁用 UAC 后也需要提升

> ID：15039137
> 
> 赞同：4
> 
> 时间：2013-02-23T09:41:52.667
> 
> 标签：python, windows-8, uac, elevation

我已禁用 UAC 并在 python 中运行我的脚本。

```
command = "abcd.exe"
subprocess.Popen(command,stdout=subprocess.PIPE,stderr=subprocess.PIPE).communicate() 
```

此外，我将应用程序`abcd.exe`从其属性设置为以管理员身份运行。

然后我收到以下错误：

> WindowsError：[错误 740] 请求的操作需要提升

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-20T14:42:02.833

您可以尝试使用：

```
subprocess.call(["abcd.exe"], shell=True) 
```

基本上这里的重要部分是`shell=True`; 如果设置为**False**，那么您将收到以下错误。

> Windows 错误：[错误 740]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:02:57.587

我相信问题在于使用 subprocess.Popen。

我还认为您的问题已经在这里得到解答： [Request UAC elevation from within a Python script?](https://stackoverflow.com/questions/130763/request-uac-elevation-from-within-a-python-script)

# ios - 从 iOS 地图迁移到 Google 地图

> ID：15039139
> 
> 赞同：0
> 
> 时间：2013-02-23T09:41:57.730
> 
> 标签：ios, annotations, google-maps-sdk-ios

我在应用商店中有一个使用 iOS/Apple 地图的应用。现在有了 google maps sdk 1.1，我决定从 Apple maps 迁移到 Google maps。有没有一种简单的方法可以在不重写大部分代码的情况下做到这一点？

注意：我目前使用自定义类进行覆盖、图钉和地图设置。

先感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:26:44.967

不，没有简单的方法，你必须自己重写。

# php - PunBB 1.4 额外/附加配置文件字段

> ID：15039141
> 
> 赞同：1
> 
> 时间：2013-02-23T09:42:10.253
> 
> 标签：php, mysql, forum, punbb

我想在用户的个人资料中添加一个额外的字段，并且我希望该字段在注册表单中可见。

我启用了注册审批，所以这个字段必须先添加到用户的临时表中，然后在审批后复制到主“用户”表中，这样用户才会被注册。

如何插入额外的字段？

任何帮助都感激不尽！

# zend-framework2 - 像类一样命名可调用对象是什么意思？

> ID：15039144
> 
> 赞同：4
> 
> 时间：2013-02-23T09:42:39.833
> 
> 标签：zend-framework2

我将[通过 ZfcUser](https://github.com/ZF-Commons/ZfcUser)了解有关 Zend Framework 2 中模块的更多信息。在[Module.php 中](https://github.com/ZF-Commons/ZfcUser/blob/master/Module.php)，您可以看到

```
'invokables' => array(
  'ZfcUser\Authentication\Adapter\Db' => 'ZfcUser\Authentication\Adapter\Db',
  'ZfcUser\Authentication\Storage\Db' => 'ZfcUser\Authentication\Storage\Db',
  'ZfcUser\Form\Login'                => 'ZfcUser\Form\Login',
  'zfcuser_user_service'              => 'ZfcUser\Service\User',
  'zfcuser_register_form_hydrator'    => 'Zend\Stdlib\Hydrator\ClassMethods',
), 
```

现在，给类一个*真正的*缩写，比如“zfcuser_user_service”和它们的完全限定名有什么区别？我认为，没有技术差异，但也许有一个约定如何命名可调用对象，因为 ZF 依赖于它们，如何命名它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T22:19:38.150

与其他答案相反，我可以声明有一个*约定*，即尽可能使用完全[限定的类名](http://php.net/manual/en/language.namespaces.rules.php)作为服务名（以及服务是虚拟的和另一个类的实例的假类名）。

如果问题只是[`ZfcUser`](https://github.com/ZF-Commons/ZfcUser/tree/0.1.0/)它是如何做到的，我可以告诉你这`ZfcUser`不是最先进的（目前`0.1.*`）并且需要重写。你可以看看[`BjyAuthorize`](https://github.com/bjyoungblood/BjyAuthorize/blob/1.1.1/config/services.config.php)一个更好的例子。

我使用定义为服务的类的*FQCN （Fully Qualified Class Name），或者它实现的接口的**FQCN*，这有助于避免使用服务的用户使用接口中未指定的 API，而只是在实现类。

此外，请考虑使用`\`or`_`或小写或大写服务名称并没有真正的区别，因为一切都[在 service manager 中进行了规范化](https://github.com/zendframework/zf2/blob/release-2.1.3/library/Zend/ServiceManager/ServiceManager.php#L698-L712)。这基本上意味着`zfcuser_service_user`或`ZfcUser\Service\User`相同。

回顾一下，这是一个你可以遵循的好习惯：

```
'invokables' => array(
    // interface FQCN
    'Namespace\MyInterface' => 'Namespace\MyImplementation',

    // no interface available
    'Namespace\ClassName'   => 'Namespace\ClassName',

    // no interface nor own implementation available (similar to an alias)
    'Namespace\MyStuff'     => 'OtherNamespace\Stuff',
), 
```

这既容易记住，又允许您的服务的最终用户查找`Namespace\MyInterface`并找到他们正在寻找的内容。

如果可能的话，也将它用于工厂和从抽象类派生的服务，因为它使每个人都更容易记住事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:18:29.567

关于如何命名别名没有约定。你应该只给你的别名一个唯一的名字，这样你就不会与提供相同服务的其他模块发生命名冲突。我在我的项目中也使用了 FQCN，因为它 100% 避免了任何冲突，并且非常清楚您向服务经理请求哪个类。

最后，这一切都归结为个人品味，但我会尽量确认自己主要使用单一的命名策略，而不是混淆几种口味。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T13:41:03.577

没有约定，但我认为您应该考虑如何使用可调用对象。

例如，前三个依赖于一个名为的接口，`ServiceManagerAwareInterface`因此这些实例需要从其中出来`ServiceLocator`才能按预期运行。鉴于它们是完全限定的类名，我假设 ZfcUser 开发人员不会设想人们覆盖这些。

后两者是别名，因此如果开发人员想要覆盖这些可调用对象，这将是一项简单的任务。这方面的一个例子是开发人员选择扩展`ZfcUser\Service\User`以添加/修改功能，然后在他的模块的 invokables 中创建行：

```
'invokables' => array(
  'zfcuser_user_service' => 'MyModule\Service\ZfcUser',
), 
```

然后使用的任何代码`zfcuser_user_service`都会收到一个`MyModule\Service\ZfcUser`而不是`ZfcUser\Service\User`.

# java - eclipse jdt插件中获取键盘

> ID：15039151
> 
> 赞同：0
> 
> 时间：2013-02-23T09:43:10.380
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

我想在eclipse jdt的插件中获取键盘。例子：

当我按下“aaa”时，我的插件必须得到“aaa”。好？

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:33:01.897

Google for EventListener 教程或绘图画布等示例。您可以列出按键或鼠标移动/点击。

# android - 谷歌地图 android api v2 错误

> ID：15039156
> 
> 赞同：1
> 
> 时间：2013-02-23T09:43:51.997
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在开发一个应用程序。在涉及 google maps 的 SDK 17 上，但问题是当我使用**Google Maps v1 api key**时，地图工作正常，但是当我尝试使用**Google Maps android V2 api key**时，什么都没有显示（只出现 google maps 瓷砖）。我已经包含了谷歌播放服务库并搜索了所有可能的原因，但找不到一个。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:53:35.243

1) 转到 Google API 控制台[https://code.google.com/apis/console/#project:650847076763](https://code.google.com/apis/console/#project:650847076763)

```
2)In Services enable ‘Google Maps Android API v2’ and agree to the terms
3)In the left navigation bar, click API Access.
4)Click Create New Android Key.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:27:41.267

Google maps api V1 已被弃用，请改用 maps api V2。

文档页面： [https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

这是一个快速入门指南： [https ://docs.google.com/document/d/19xKLZTrY1l6Sgu-V_IVSDIRZrcThjwxDrlm9rNr0tzo/edit](https://docs.google.com/document/d/19xKLZTrY1l6Sgu-V_IVSDIRZrcThjwxDrlm9rNr0tzo/edit)

如果您在使用 MapFragment 或 google play 服务库时遇到问题，请访问此线程，它将为您提供帮助。 [https://docs.google.com/document/d/19xKLZTrY1l6Sgu-V_IVSDIRZrcThjwxDrlm9rNr0tzo/edit](https://docs.google.com/document/d/19xKLZTrY1l6Sgu-V_IVSDIRZrcThjwxDrlm9rNr0tzo/edit)

我也回答了你在这里遇到的相关问题。 [如何/错误声明 google-play-services-component](https://stackoverflow.com/questions/14991967/how-to-error-in-declaring-google-play-services-component/14992298#14992298)

快乐编码:)

# actionscript-3 - 如何通过两个（或三个）给定的角度绘制一个三角形，并在 actionscript 中的每个角处写上角度？

> ID：15039157
> 
> 赞同：-1
> 
> 时间：2013-02-23T09:43:53.390
> 
> 标签：actionscript-3, actionscript, geometry, actionscript-2, angle

我试图用谷歌搜索，但找不到解决方案。有一种方法可以绘制一个给定角度和两个长度的三角形。但我想用给定的两个角度绘制三角形。有人可以帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:01:15.323

三角形仅由 2 条边和它们之间的角度、3 条边或 1 条边以及包含该边的两个角度正确定义。使用三个角度只能定义一组三角形。第一个评论者说画一个像素，他在数学上是正确的，作为一个具有无限小边但有 3 个正确角度的三角形，将显示为一个点。因此，您需要至少定义一侧才能获得正确显示的三角形。

# java - 通过在表单中 输入值来获取选定的行表单数据库表

> ID：15039160
> 
> 赞同：-1
> 
> 时间：2013-02-23T09:44:25.727
> 
> 标签：java, servlets, jdbc

```
 PreparedStatement stmt=con.prepareStatement("select * from test where testname like '?%'");
        stmt.setString(1,keyword);
        rset=stmt.executeQuery();

        while(rset.next()){
            out.println(rset.getString(1));
            out.println(rset.getString(2));
            out.println(rset.getString(3));
            out.println(rset.getString(4));

        } 
```

我使用 tomcat 作为服务器，异常是：java.sql.SQLException: Parameter index out of range (1 > number of parameters, which is 0)。

在这里，我在表单中输入 testname，并使用 getParameter(); 方法将此值分配给字符串关键字。我想使用“喜欢”，以便我只能检索选定的测试名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:55:08.033

问号不能用引号引起来。尝试这个：

```
PreparedStatement stmt=con.prepareStatement(
    "select * from test where testname like concat(?, '%')"); 
```

或者，您可以这样做：

```
PreparedStatement stmt=con.prepareStatement(
    "select * from test where testname like ?");
stmt.setString(1,keyword + "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:06:49.690

你不能有一个**？**在报价中，它不起作用。一个简单的解决方法是在查询字符串中附加实际值。

```
String keyword = "parametervalue";
String query = "select * from test where testname like '" + keyword +"%'";
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T09:55:41.890

将您的查询更改为

```
PreparedStatement stmt=con.prepareStatement("select * from test where testname  LIKE '%' || ? || '%' "); 
```

[http://www.coderanch.com/t/502785/JDBC/databases/preparedstatement](http://www.coderanch.com/t/502785/JDBC/databases/preparedstatement)

# c - 什么是易于破解的 C 预处理器？

> ID：15039163
> 
> 赞同：5
> 
> 时间：2013-02-23T09:45:02.663
> 
> 标签：c, c-preprocessor

我想为 C 预处理器添加一个小功能，但为此，我需要一个易于理解且易于修改的功能。具体来说，我正在寻找以下标准：

*   小码
*   有据可查
*   易于修改
*   免费软件（我希望能够在不支付任何费用的情况下分发修改后的代码。）

我已经找到了[tcc](http://bellard.org/tcc/)，它包括一个预处理器并且相当小，但据我所知，缺乏关于如何实现预处理的良好文档。我是否应该尝试了解 tcc 是如何做到的，或者是否存在更合适的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:38:51.753

怎么样[http://www.blitzbasic.com/Community/posts.php?topic=20396](http://www.blitzbasic.com/Community/posts.php?topic=20396)或[http://mcpp.sourceforge.net/](http://mcpp.sourceforge.net/)

对我来说似乎很好！

# javascript - 如何解决不同脚本之间的不兼容问题？

> ID：15039164
> 
> 赞同：0
> 
> 时间：2013-02-23T09:45:02.883
> 
> 标签：javascript, google-fusion-tables

我正在尝试使用不同的脚本开发页面，例如 google 地方自动完成、带有复选框的查询（[https://developers.google.com/fusiontables/docs/samples/in](https://developers.google.com/fusiontables/docs/samples/in)）和放大一个地方（[http://www .geocodezip.com/v3_FusionTables_GViz_zoom2MarkerA.html](http://www.geocodezip.com/v3_FusionTables_GViz_zoom2MarkerA.html)）。

问题是，自动完成或复选框+缩放本身就可以正常工作，但是结合起来一切都错了！

我试图使代码错位并重新组装，但它不起作用，我不明白为什么。我是 Javascript 的初学者，所以我真的在测试和调整东西。

如果您有任何线索，非常感谢！

带有复选框+缩放的代码：

```
// Checkboxes
layer = new google.maps.FusionTablesLayer();
    filterMap(layer, FT_TableID, map);

    google.maps.event.addDomListener(document.getElementById('0'),
        'click', function() {
          filterMap(layer, FT_TableID, map);
    });   
    google.maps.event.addDomListener(document.getElementById('1'),
        'click', function() {
          filterMap(layer, FT_TableID, map);
    });

    google.maps.event.addDomListener(document.getElementById('2'),
        'click', function() {
          filterMap(layer, FT_TableID, map);
    });

    google.maps.event.addDomListener(document.getElementById('3'),
        'click', function() {
          filterMap(layer, FT_TableID, map);
    });

        google.maps.event.addDomListener(document.getElementById('4'),
    'click', function() {
      filterMap(layer, FT_TableID, map);
});
  }

  // Filter the map based on checkbox selection.
  function filterMap(layer, FT_TableID, map) {
    var where = generateWhere();

    if (where) {
      if (!layer.getMap()) {
        layer.setMap(map);
      }
      layer.setOptions({
        query: {
          select: 'Latitude',
          from: FT_TableID,
          where: where
        }
      });
    } else {
      layer.setMap(null);
    }
  }

  // Generate a where clause from the checkboxes. If no boxes
  // are checked, return an empty string.
  function generateWhere() {
    var filter = [];
    var stores = document.getElementsByName('note');
    for (var i = 0, note; note = stores[i]; i++) {
      if (note.checked) {
        var noteName = note.value.replace(/'/g, '\\\'');
        filter.push("'" + noteName + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "'coeurs' IN (" + filter.join(',') + ')';
    }
    return where;
  }

  google.maps.event.addDomListener(window, 'load', initialize);

///// end of checkboxes part

//////// zoom

            function changeQuery(term) {

              layer.setOptions({query:{select:'Latitude', /* was 'Latitude,Longitude', used to work... */

                                       from:FT_TableID,

                                       where:"'Nom' contains ignoring case '"+term + "'"
                                     //à la place de :   where:"Nom contains "+term

                                       }

             });

            // alert("query="+term);

            // zoom and center map on query results

              //set the query using the parameter

              var queryText = encodeURIComponent("SELECT 'Latitude', 'Longitude' FROM "+FT_TableID+" WHERE 'Nom' contains '"+term+"'");

            // does _not_ work  var queryText = encodeURIComponent("SELECT 'Latitude' FROM "+FT_TableID+" WHERE District = "+term);

              var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);

              //set the callback function

              query.send(zoomTo);

            }

            function zoomTo(response) {

            if (!response) {

              alert('no response');

              return;

            }

            if (response.isError()) {

              alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());

              return;

            } 

              FTresponse = response;

              //for more information on the response object, see the documentation

              //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse

              numRows = response.getDataTable().getNumberOfRows();

              numCols = response.getDataTable().getNumberOfColumns();

              var bounds2 = new google.maps.LatLngBounds();

              for(i = 0; i < numRows; i++) {

                  var point = new google.maps.LatLng(

                      parseFloat(response.getDataTable().getValue(i, 0)),

                      parseFloat(response.getDataTable().getValue(i, 1)));

                  bounds2.extend(point);

              }

              // zoom to the bounds

              map.fitBounds(bounds2);
             map.setZoom(18);

            } 
```

用于自动完成的代码：

```
var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input);
autocomplete.bindTo('bounds', map); 
var infowindow = new google.maps.InfoWindow();
var marker = new google.maps.Marker({
map: map
});
google.maps.event.addListener(autocomplete, 'place_changed', function() {
infowindow.close();
marker.setVisible(false);
input.className = '';
var place = autocomplete.getPlace();
if (!place.geometry) {
// Inform the user that the place was not found and return.
input.className = 'notfound';
return;
}

// If the place has a geometry, then present it on a map.
if (place.geometry.viewport) {
map.fitBounds(place.geometry.viewport);
} else {
map.setCenter(place.geometry.location);
map.setZoom(16);  // Why 17? Because it looks good.
}
var image = new google.maps.MarkerImage(
place.icon,
new google.maps.Size(O, 0),
new google.maps.Point(0, 0),
new google.maps.Point(17, 34),
new google.maps.Size(35, 35));
marker.setIcon(image);
marker.setPosition(place.geometry.location);

var address = '';
if (place.address_components) {
address = [
          (place.address_components[0] && place.address_components[0].short_name || ''),
          (place.address_components[1] && place.address_components[1].short_name || ''),
          (place.address_components[2] && place.address_components[2].short_name || '')
        ].join(' ');
      }

infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
infowindow.open(map, marker);
    });
}

// Sets a listener on a radio button to change the filter type on Places
// Autocomplete.
function setupClickListener(id, types) {
var radioButton = document.getElementById(id);
google.maps.event.addDomListener(radioButton, 'click', function() {
autocomplete.setTypes(types);
      });
    }

    setupClickListener('changetype-all', []);
    setupClickListener('changetype-establishment', ['establishment']);
    setupClickListener('changetype-geocode', ['geocode']);

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:00:24.957

有两个电话`initialize`：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

删除其中之一。

# java - 从字符串中提取操作数和运算符

> ID：15039166
> 
> 赞同：0
> 
> 时间：2013-02-23T09:45:32.637
> 
> 标签：java, data-structures

假设我有这个表达式`I10I20I-3++`应该给我 27。我似乎无法找到删除那些`I`的方法，或者它是否是字符串中的任何其他字母。此外，我必须想出一种方法来评估表达式。我尝试使用正则表达式，但没有运气：

```
public static String removeIs(String input)
{
    //String check = input.replaceAll("[^/+/-/*//^0-9/-]+", " ");
    String check = input.replaceAll("[^-+*/^0-9/-](?![^(]*\\))"," ");
    return check;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:11:22.343

查找任何非运算符非数字字符的表达式为：

`[^0-9+\-\*\/]`

您在 Q 下面的评论中说您正在编写计算器。请注意，您的字符串中有未知数量的数字和运算符，因此最好创建一个循环并遍历字符串并手动抓取数字和运算符以在您的计算器中使用，而不是使用正则表达式反向引用。顺便说一句：你为​​什么`I`用空格代替？字符串中的分隔符对您有什么影响吗？

很久以前，我创建了一个相当先进的基于正则表达式的 JS 代码解析器，从这次经验中我可以看出，创建一个用于一次解析所有内容的可怕表达式通常是个坏主意。

# magento - Amazon ec2 上的 Magento 和 var /common 文件目录

> ID：15039177
> 
> 赞同：1
> 
> 时间：2013-02-23T09:48:21.513
> 
> 标签：magento, amazon-s3, amazon-ec2, var

我想在 EC2 上安装一个中等的 Magento 安装。

我使用了负载均衡器、图像 CDN、RDS mysql。

但现在我必须选择保存 Magento 文件（`/app`和`/var`目录）的位置和方式。

我认为使用本地 EBS 文件系统更好，使用 GIT 更新代码没有任何问题。但是我的目录有问题`/var`，在这个目录中，我有一个包含许多 csv 的目录，用于与其他系统进行一些集成（使用 FTP 读取它）。

我如何管理这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:53:56.973

我正在研究如何做类似的事情，到目前为止，这是我正在探索的，但不会在很长一段时间内对其进行测试，也许它可以帮助你。

注册 Amazon S3。[在亚马逊](https://code.google.com/p/s3fs/wiki/FuseOverAmazon)上安装保险丝。为 S3 中的每个文件夹创建一个存储桶。将您的 /var 和 /media 以及任何其他目录映射到适当的存储桶。您显然不想存储 magento 所做的 xml 缓存，因为它可能会有点慢。您可以使用本地缓存 -ouse_cache=/tmp 挂载 s3，这可能会起作用。

如果你发现了什么，你应该报告。

# php - 使用 jquery 将特定值发布到特定 div

> ID：15039183
> 
> 赞同：1
> 
> 时间：2013-02-23T09:50:03.927
> 
> 标签：php, jquery

如何让 jquery 将值从特定跨度发布到 php，然后将值获取到特定 div？我想要这样的东西：单击类“更多”的跨度，将值从这个li发布到php，然后通过jquery获取id为“test”的div的值。

在这里，我有一个 php 给我的代码。如果需要，我可以为元素添加唯一的“id”。

```
 <li>
    <span class="word">one word</span>
    <span class="numb">1</span>

    <span class="more">more</span>
    <div id="test"></div>
 </li>
 <li>
    <span class="word">another word</span>
    <span class="numb">13</span>

    <span class="more">more</span>
    <div id="test"></div>
 </li> 
```

问题是使用这个 jquery 我只发布了第一个包含类“.word”的跨度，但我只想发布跨度所在的跨度而不是它。并再次将值获取到第一个 id 为“test”的 div，而是在单击 span 的 div 中。我的 jquery 代码是：

```
 $('.more').live("click",function() {

 var ID = $('.word').test();
 var DI = $('.numb').text();

      $.ajax({
           type:"POST",
           data: "value="+ ID + "&numb="+ DI,
           cache: false, 
           url: "more.php",
           success: function(msg){
                $('#test').html(msg).fadeIn('slow');
           }               
      });     
 }); 
```

通过添加`var ID = $(this).attr("id");`而不是 `var ID = $('.word').test();`jquery 和 php，`<span id="<?php echo $word; ?>" class="more">more</span>`我可以发布 word 的唯一值。但是其他值呢？主要问题是发布到跨度按钮“更多”所在的下一个div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:51:13.030

```
var ID = $('.word').test(); 
```

将其替换为

```
var ID = $('.word').text(); 
```

也请使用`.on`jQuery 函数而不是`.live`as`.live`已弃用。

**完整的 jQuery 代码**

```
$(function()
{
    $('.more').on("click",function()
    {
        var clickedDiv = $(this);
        var ID = clickedDiv.parent().find('.word').text();
        var DI = clickedDiv.parent().find('.numb').text();

        $.ajax(
        {
            type:"POST",
            data: "value="+ ID + "&numb="+ DI,
            cache: false, 
            url: "more.php",
            success: function(msg)
            {
                clickedDiv.find('div[custom_id="test"]').html(msg).fadeIn('slow');
            }               
        });     
    });
}); 
```

还有一件事不要重复相同`ID`的`DOM`。

**ID 必须是唯一的。**

为此我使用`<div custom_id = "test"></div>`

**更新的 HTML**

```
<li>
    <span class="word">one word</span>
    <span class="numb">1</span>

    <span class="more">more</span>
    <div custom_id = "test"></div>
</li>
<li>
    <span class="word">another word</span>
    <span class="numb">13</span>

    <span class="more">more</span>
    <div custom_id = "test"></div>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:02:08.287

如果您没有在 php 端做任何事情，即使没有 ajax 请求，这也可以解决。检查此代码：

在 html 中使用 class 而不是 id 制作 div 。

```
<li>
    <span class="word">one word</span>
    <span class="numb">1</span>

    <span class="more">more</span>
    <div class="test"></div>
 </li>
 <li>
    <span class="word">another word</span>
    <span class="numb">13</span>

    <span class="more">more</span>
    <div class="test"></div>
 </li> 
```

然后

```
$('.more').click(function (){

 var ID = $('.word').text();
 var DI = $('.numb').text();

 var Data = "value="+ ID + "&numb="+ DI;

 $(this).closest('.test').html(Data); // use anyone of them
 or 
 $(this).sibling('.test').html(Data); // use anyone of them

}); 
```

这将完美地工作。这是更新的代码

# android - Environment.getExternalStorageDirectory() 获取硬件存储

> ID：15039184
> 
> 赞同：3
> 
> 时间：2013-02-23T09:50:06.507
> 
> 标签：android, android-sdcard

我正在尝试通过 Environment.getExternalStorageDirectory() 从 SD 卡获取所有文件列表，但我从硬件存储中返回列表。我试过硬编码，但结果是一样的。知道是什么原因造成的吗？

我的代码

```
 String path = Environment.getExternalStorageDirectory().toString()+"/";
     Log.d("Files", "Path: " + path);
     File f = new File(path);        
     File file[] = f.listFiles();
     Log.d("Files", "Size: "+ file.length);
     for (int i=0; i < file.length; i++)
     {
         Log.d("Files", "FileName:" + file[i].getName());
     } 
```

返回

```
Path: /mnt/sdcard/
 Size: 21
FileName:LOST.DIR
 FileName:.android_secure
 FileName:Music
 FileName:Podcasts 
```

但我在 SD 卡中没有 Podcast 等。

一半的答案： Environment.getExternalStorageDirectory() 在某些情况下进入内存存储。如果我尝试 String path = "/mnt/external_sd/"; 然后它的工作。但在其他设备中，存储在其他目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T04:20:41.777

试试这个代码，

```
File filepath = Environment.getExternalStorageDirectory();

            File dir = new File(filepath.getAbsolutePath()
                    + "/Save PIP/");
            dir.mkdirs();

            File file = new File(dir, System.currentTimeMillis() + ".jpg");

           // Utils.showAlert("Image Saved to SD Card", "PIP Effect", "Ok", FrameActivity.this);

            if (file.exists()) file.delete();
            try {

                output = new FileOutputStream(file);
                bitmap_final.compress(Bitmap.CompressFormat.PNG, 100, output);
                output.flush();
                output.close();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

我希望它能帮助你。

# unity3d - 两个角色控制器之间的碰撞检测

> ID：15039185
> 
> 赞同：2
> 
> 时间：2013-02-23T09:50:25.493
> 
> 标签：unity3d, collision-detection

我是 Unity 和脚本的新手。我有两个玩家，他们都在使用角色控制器。我做过这件事

*   我已经使用了 onControllerColliderHit 函数。
*   我已经打印了这个gameobj.name这样的名字。
*   它将显示它击中的对象的名称

但问题是它通过了它。我希望它不能通过它，它的行为就像刚体一样。就像第二个玩家击中它时必须有力的效果一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T14:41:03.217

检查[文档](http://docs.unity3d.com/Documentation/Components/class-CharacterController.html)。CharacterController 没有`RigidBody`附加：

> 角色控制器主要用于不使用刚体物理的第三人称或第一人称玩家控制。

基本上`CharacterController`只是`Collisor`为了防止场景中角色和对象之间的竞争而设计的，但是当 2 之间发生碰撞时，它不会像您预期的那样工作`CharacterControllers`。

特别：

> 控制器不会自行对力做出反应，也不会自动将刚体推开。

[如OnControllerColliderHit](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnControllerColliderHit.html)文档中所示，您可以在发生这种情况时手动处理碰撞。例如，当角色控制器对象发生碰撞时，您可以将它们推开，因为您有移动方向：

```
Vector3 pushDir = new Vector3(hit.moveDirection.x, 0, hit.moveDirection.z);
transform.Translate (-pushDir * offset); 
```

# c# - 易失性与易失性读/写？

> ID：15039188
> 
> 赞同：30
> 
> 时间：2013-02-23T09:50:39.833
> 
> 标签：c#, multithreading, .net-4.0, volatile

我找不到*任何*VolatileRead/write (try...) 的例子，但仍然：

*我什么时候*应该使用`volatile`vs `VolatileRead`？

AFAIK 的全部目的`volatile`是创建*半*栅栏，因此：

*   对于*READ*操作，在当前操作之后的读/写（在其他线程上）不会在栅栏之前通过。因此 - 我们读取最新值。

**问题 #1**

那么为什么我需要`volatileRead`? 似乎`volatile`已经完成了这项工作。

另外 - 在 C# 中，**所有写入都是易失性的**（不像在 Java 中说的），无论你是写入一个`volatile`还是非易失性字段 - 所以我问：为什么我需要 `volatileWrite`?

**问题2**

这是实现`VolatileRead`：

```
[MethodImpl(MethodImplOptions.NoInlining)]
public static int VolatileRead(ref int address)
{
    int num = address;
    MemoryBarrier();
    return num;
} 
```

为什么`int num = address;`会有这条线？他们已经有了明确持有价值的地址参数。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-24T14:27:45.520

你永远不应该使用 Thread.VolatileRead/Write()。这是 .NET 1.1 中的设计错误，它使用了完整的内存屏障。这在 .NET 2.0 中已得到纠正，但他们无法再修复这些方法，不得不添加由 System.Threading.Volatile 类提供的新方法。这是 jitter 知道的一个类，它用适合特定处理器类型的版本*替换jit 时的方法。*

可通过参考源获得的 Volatile 类的源代码中的注释讲述了这个故事（已编辑以适应）：

```
// Methods for accessing memory with volatile semantics.  These are preferred over 
// Thread.VolatileRead and Thread.VolatileWrite, as these are implemented more
// efficiently.
//
// (We cannot change the implementations of Thread.VolatileRead/VolatileWrite 
// without breaking code that relies on their overly-strong ordering guarantees.)
//
// The actual implementations of these methods are typically supplied by the VM at 
// JIT-time, because C# does not allow us to express a volatile read/write from/to 
// a byref arg. See getILIntrinsicImplementationForVolatile() in jitinterface.cpp. 
```

是的，你很难找到它的用法示例。参考源是一个很好的指南，其中包含数兆字节的精心编写、测试和战痕累累的处理线程的 C# 代码。它使用 VolatileRead/Write 的次数：**零**。

坦率地说，.NET 内存模型与 CLR mm 和 C# mm 做出的相互矛盾的假设一团糟，最近才为 ARM 内核添加了新规则。*volatile*关键字的怪异语义对不同的架构意味着不同的事物，这就是一些证据。尽管对于内存模型较弱的处理器，您通常可以假设 C# 语言规范所说的内容是准确的。

请注意，Joe Duffy 已经放弃了[所有希望](http://joeduffyblog.com/2010/12/04/sayonara-volatile/)，并且完全不鼓励所有使用它。一般来说，假设您可以比语言和框架提供的原语做得更好是*非常不明智的。*Volatile 类的 Remarks 部分说明了这一点：

> 一般情况下，C# lock 语句、Visual Basic SyncLock 语句和 Monitor 类提供了同步访问数据的最简单和最不容易出错的方式，而 Lazy 类提供了一种无需直接使用即可编写惰性初始化代码的简单方式双重检查锁定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T10:25:38.820

当您需要对栅栏应用于代码的方式进行更细粒度的控制时，您可以使用`static` [Thread.VolatileRead](http://msdn.microsoft.com/en-us/library/system.threading.thread.volatileread%28loband%29.aspx)或[Thread.VolatileWrite](http://msdn.microsoft.com/en-us/library/system.threading.thread.volatilewrite.aspx)。

声明一个变量 volatile 意味着编译器不会缓存它的值并总是读取字段值，并且当执行写入时，编译器会立即写入分配的值。

[Thread.VolatileRead](http://msdn.microsoft.com/en-us/library/system.threading.thread.volatileread%28loband%29.aspx)和[Thread.VolatileWrite](http://msdn.microsoft.com/en-us/library/system.threading.thread.volatilewrite.aspx)这两种方法使您能够在不将变量声明为 volatile 的情况下进行更细粒度的控制，因为您可以决定何时执行 volatile 读取操作以及何时执行 volatile 写入，而不必读取 no缓存并在声明变量 volatile 时立即写入，因此简而言之，您拥有更多控制权和更多自由...

*`VolatileRead()`读取最新版本的内存地址，并`VolatileWrite()`写入该地址，使该地址可用于所有线程。对变量同时使用`VolatileRead()`并`VolatileWrite()`一致使用与将其标记为易失性具有相同的效果。*

看看[这篇博客文章](http://msmvps.com/blogs/luisabreu/archive/2009/07/06/multithreading-using-volatilexxx-instead-of-the-volatile-keyword.aspx)，它通过例子解释了差异......

> 为什么行 int num = address; 有没有 ？他们已经有了明确持有价值的地址参数。

这是一种防御性复制，可以避免外部的东西在我们在方法内部时更改值，整数值被复制到局部变量以避免外部意外更改。

## 笔记

*由于在**Visual Basic**中不存在 volatile 关键字，因此您只能选择使用一致的`VolatileRead()`静态`VolatileWrite()`方法来实现与**c#**中的 volatile 关键字相同的效果。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-23T10:41:14.523

> 为什么行 int num = address; 有没有 ？他们已经有了明确持有价值的地址参数。

`address`不是一个`int`。它是一个`int*`（所以它确实是一个地址）。该代码正在取消引用指针并将其复制到本地，以便在取消引用之后出现障碍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T22:44:54.820

详细说明 aleroot 的答案。

Volatile.Read 和 Volatile.Write 与 Royi Namir 的论点中的 volatile 修饰符相同。但是您可以明智地使用它们。

例如，如果您声明一个带有 volatile 修饰符的字段，那么对该字段的每次访问（无论是读操作还是写操作）都将从非空闲的 CPU 寄存器中读取，这在大多数情况下是不需要的，并且在以下情况下会造成不必要的性能损失字段甚至有很多读取操作。

想想你有私有单例变量被声明为 volatile 并在属性 getter 中返回的场景，一旦它被初始化，你就不需要从 CPU 寄存器中读取它的根，因此你可以使用 Volatile.Read / Write 直到它被创建，一旦创建，所有读取操作都可以像普通字段一样完成，否则会对性能造成很大影响。

而您可以根据需要使用 Volatile.Read 或 Volatile.Write。最好的用途是声明没有 volatile 修饰符的字段，并在需要时使用 Volatile.Read 或 Volatile.Write。

# kendo-ui - 相对位置 div 中的 Kendo UI TabStrip

> ID：15039189
> 
> 赞同：0
> 
> 时间：2013-02-23T09:50:49.183
> 
> 标签：kendo-ui

我在相对位置 div 中使用 TabStrip 时遇到了一些问题，如果我按以下方式使用它们，选项卡不会切换：

```
<div style="position: relative">
   <div style="padding: 100px 100px 100px 100px; position: absolute">
      <div id="myTabs">
            <ul>
                <li class="k-state-active">item1</li>
                <li>item2</li>
            </ul>
            <div>
                <input type="text" value="" class="k-textbox" style="width: 100px" />
            </div>
            <div>
                <input type="text" value="" class="k-textbox" style="width: 100px" />
            </div>
        </div>
   </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#myTabs").kendoTabStrip();
    }
</script> 
```

可能有人面临这样的问题，或者我的例子中有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:16:23.833

如果 document.ready 被删除，代码工作正常。请检查这个 JSFiddle：http: [//jsfiddle.net/Lu9Qf/20/](http://jsfiddle.net/Lu9Qf/20/)

```
<script type="text/javascript">

        $("#myTabs").kendoTabStrip();

</script> 
```

# zend-framework2 - 我如何根据价格范围从zend中的zend服务亚马逊搜索商品

> ID：15039193
> 
> 赞同：0
> 
> 时间：2013-02-23T09:51:23.210
> 
> 标签：zend-framework2

我想在 zend service amazon library 的价格范围内搜索项目，而我在关键字、标题而不是价格范围内进行产品搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:26:25.193

在大多数类别中，您可以使用 和 进行搜索`MinimumPrice`，`MaximumPrice`请参阅 Amazon [API 文档](http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/DG/UKSearchIndexParamForItemsearch.html)

# jquery - jQuery：如何停止定期运行的函数

> ID：15039195
> 
> 赞同：0
> 
> 时间：2013-02-23T09:51:43.837
> 
> 标签：jquery, ajax

我正在 Google App Engine 和 Python 上开发系统。以下 jQuery 代码用于定期更新时间。`content`jQuery Ajax将以下 HTML 代码插入到div 中：

HTML：

```
...
{{product.name}}: <br />
Bidding time is approaching: <div id="timeToBid{{product.randomNo}}">{{timeToBid}}</div>
...

$(document).ready(function() {
  function updateTime() {
    $.ajax({
      url: "/timeToBid?productId={{product.key.id}}",
      cache: false,
      success: function(returndata){
        $('#timeToBid{{product.randomNo}}').html(returndata);
      }
    });
    setTimeout(updateTime, 1000);
  }
  updateTime();
}); 
```

服务器端程序：

```
class TimetoBid(webapp2.RequestHandler):
    def get(self):
        productId = self.request.get('productId')
        product = Product.get_by_id(productId)
        time = str(datetime.datetime.now() - product.bidTime)
        self.response.out.write(message) 
```

但是，如果我单击页面中的其他按钮来更新`content`div，除非我刷新整个页面，否则 updateTime() 函数仍在运行。另外，由于该功能不会停止，如果我多次进入该页面，问题会在一秒钟内运行多次。`content`如果div 使用其他 HTML 代码更新，如何停止该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:04:55.623

将 的结果分配`setTimeout`给变量`timer`。更新内容 div 的代码可以调用`clearTimeout(timer)`.

更新

另一种选择是让`updateTime()`函数检查内容 div 是否已更改并停止运行。

```
var oldContent;
function removeTimeToBid(str) {
    return str.replace(/<div id="timeToBid.*?<\/div>/, '');
}
function updateTime() {
   var newContent = removeTimeToBid($("#content").html());
   if (newContent != oldContent) { return; }
   $.ajax({
      url: "/timeToBid?productId={{product.key.id}}",
      cache: false,
      success: function(returndata){
        $('#timeToBid{{product.randomNo}}').html(returndata);
      }
   });
   setTimeout(updateTime, 1000);
}

function startUpdatingTime() {
    oldContent = removeTimeToBid($("#content").html());
    updateTime();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:06:49.897

您应该使用 setInterval 而不是 setTimeout ：

```
$(document).ready(function() {

  //Define variable to enable or disable the refresh function
  window.doRefresh = true;

  function updateTime() {

    //Execute AJAX request only if it is allowed
    if(!window.doRefresh)
        return;

    $.ajax({
      url: "/timeToBid?productId={{product.key.id}}",
      cache: false,
      success: function(returndata){
        $('#timeToBid{{product.randomNo}}').html(returndata);
      }
    });
  }

  //Permits to execute updateTime every seconds until clearInterval is called
  var intervalHandle = setInterval(updateTime, 1000);

  $('#myDiv').click(function(){
      //Stop definitely the interval code execution using
      clearInterval(intervalHandle);

      //Or use a variable to disable refreshing
      window.doRefresh = false;

      //Do some stuff...

      //Then enable refreshing like this
      window.doRefresh = true;
  });

}); 
```

# c# - 同时编辑所有视觉工作室页面

> ID：15039196
> 
> 赞同：0
> 
> 时间：2013-02-23T09:51:45.447
> 
> 标签：c#

我有 30 个 Visual Studio 2010 Express 表单，我可以将控件添加到一个表单并将其复制到其他 29 个表单还是必须单独编辑它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:55:16.920

如果您想为所有表单提供单独的功能，那么您需要在每个表单中进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:18:01.367

没有“Visual Studio Express Forms”，所以我假设您的意思是来自 .NET Framework 的“Windows Forms”表单。

如果您手动创建了 30 个，那么您需要将您的主页按钮添加到所有 30 个。如果主页按钮总是在同一个位置并且总是做同样的事情，那么从[System.windows.Forms.Form](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)派生您自己的类并将按钮添加到您的基类可能会更容易。然后，您只需将所有创建的表单的基类（即普通的“表单”）替换为您自己的已包含主页按钮的表单派生类。

# mysql - 如何从文件中插入 MySQL 数据库？

> ID：15039197
> 
> 赞同：0
> 
> 时间：2013-02-23T09:51:52.283
> 
> 标签：mysql, database, jdbc

我的表有大约 190 个字段。其中**只有 30 个不能为 null**。并且要插入大约 7k 行。

我正在使用 JDBC。无论如何，是否可以在单个 INSERT 中直接从文本文件中输入所有这些内容，而不是执行 7k 次 INSERT 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:54:49.730

如果您想自己编写查询，可以使用`LOAD DATA INFILE`. 这是一种非常快速的文件导入方法。但是，该文件必须正确格式化。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# android - Android异步任务返回结果

> ID：15039199
> 
> 赞同：0
> 
> 时间：2013-02-23T09:52:16.653
> 
> 标签：android

我在我的主要活动中调用异步任务类：这里是代码

```
 public class MainActivity extends Activity implements AsyncResponse {

                    @Override
                    protected void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);
                        setContentView(R.layout.activity_main);

                        Connection connection=new Connection();
                        connection.execute();

                    }
        Here is my Connection class:
        class  Connection extends AsyncTask<String,String, Void>
        {
            public AsyncResponse delegate=null;
            String result = "";
             InputStream is=null;
            @Override
            protected Void doInBackground(String... params) {

                // TODO Auto-generated method stub
                /*ArrayList<NameValuePair> nameValuePairs = null;
                  int i=0;

                     String username=params[i].toString();
                     String password=params[i+1].toString();
                     String validation=params[i+2].toString();
                  nameValuePairs = new ArrayList<NameValuePair>();
                 nameValuePairs.add(new BasicNameValuePair("username",username));
                 nameValuePairs.add(new BasicNameValuePair("password",password));

               //  nameValuePairs.add(new BasicNameValuePair("username",));*/
                try{
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost("http://10.0.2.2/connection.php");
                      //  httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        HttpResponse response = httpclient.execute(httppost);
                        HttpEntity entity = response.getEntity();
                         is = entity.getContent();
                }catch(Exception e){
                        Log.e("log_tag", "Error in http connection "+e.toString());
                }

                try{
                        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                        StringBuilder sb = new StringBuilder();
                        String line = null;
                        while ((line = reader.readLine()) != null) {
                                sb.append(line + "\n");
                        }
                        is.close();

                        result=sb.toString();
                }catch(Exception e){
                        Log.e("log_tag", "Error converting result "+e.toString());
                }
                return null;
                // TODO Auto-generated method stub
                }
            protected void onPostExecute(Void v) {

             try{

                 JSONArray jArray = new JSONArray(result);

                 delegate.processFinish(jArray);

               //  labels2.add(password);

               //Returndata(labels2); 

             }

             catch(JSONException e){
                 Log.e("log_tag", "Error parsing data "+e.toString());
         }
        }

        } 
```

在执行后，我将 Jarray 发送到一个接口：并在我的主 Activity 中使用该接口：这是我的接口：

```
public interface AsyncResponse {

            void processFinish(JSONArray jArray);

        } 
```

并像这样使用它的主要活动：

```
 @Override
        public void processFinish(JSONArray jarray) {
            // TODO Auto-generated method stub
            try {
                for(int i=0;i<=jarray.length();i++)
                   {
                             JSONObject json_data;
                json_data = jarray.getJSONObject(i);
                String  username=json_data.getString("username");
                 String password=json_data.getString("password");
                 Toast.makeText(getBaseContext(),username+password,Toast.LENGTH_LONG).show();
            }

                 }
                catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:17:00.457

只是一个建议当您的 doInBackground 方法返回 String 时，onPostExecute 中的参数将具有 doInBackground 的返回值。您不必声明单独的字符串。往下看，

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected String doInBackground(URL... urls) {
         String someresult = "got from some operations";
         return someresult;
     }

     protected void onPostExecute(String result) {
         System.out.println("The resulting string from doInBackground is " + result);
     }
 } 
```

其次，您拥有的 Connection 课程，

```
public AsyncResponse delegate=null; 
```

您还没有初始化委托变量，它为空！！所以你有一个空指针异常。你永远不能在java中实例化一个接口。但是，您可以通过接口的类型来引用实现接口的对象。希望这可以帮助。

编辑：

如果你有一个由 B 类实现的接口，那么你可以`AsyncResponse test = new B();`像下面这样

```
public interface AsyncResponse 
{
}
public class B implements AsyncResponse 
{
}

public static void main(String[] args)
{
    AsyncResponse  test = new B();
} 
```

现在在 Android 中你不能实例化一个 Activity。而是引用该活动实例。我敢打赌你那里有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T03:48:40.413

我认为代码没有声明正在使用的接口。

在 MainActivity 类中应该声明下面的内容。

您创建的连接线程没有声明任何接口。

因此它将被声明为空值。

```
 public class MainActivity extends Activity implements AsyncResponse {

            Connection connection=new Connection(); // You shud declare on top

                @Override

                protected void onCreate(Bundle savedInstanceState) {

                    connection.delegate=this;

                    super.onCreate(savedInstanceState);

                    setContentView(R.layout.activity_main);

                    connection.execute();

                } 
```

# debugging - Excel VBA 返回行为怪异，跳回

> ID：15039200
> 
> 赞同：0
> 
> 时间：2013-02-23T09:52:20.257
> 
> 标签：debugging, vba, excel

```
Private Function GetLastSameRow(ByVal row, initialValue) As Integer
   .
   .
   .
   If (nextCell.Value = initialValue) Then
      GetLastSameRow = GetLastSameRow(row + 1, initialValue)
   End If
   MsgBox ("returning  : " & row)
   GetLastSameRow = row
End Function 
```

在它完成 if 语句之后，行为真的很奇怪。

我在上面运行了调试器，它是这样跳转的：

```
1\. End If                            '
2\. MsgBox ("returning  : " & row)    ' row value is 3
3\. GetLastSameRow = row              '
4\. MsgBox ("returning  : " & row)    ' row value is 2 ????????
5\. GetLastSameRow = row              ' 
```

所以基本上它想返回`correct`值，然后跳回并从蓝色中`End if`获取值。`correct-1`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T09:58:31.867

你写了一个递归函数！如果您使用调用堆栈，您会看到调试器将转到您的函数的不同实例。问题在于：

GetLastSameRow = GetLastSameRow（行 + 1，初始值）

它正在调用该函数的另一个实例。

# java - 我如何创建页眉和页脚视图与 android 中的每个活动保持相同

> ID：15039205
> 
> 赞同：0
> 
> 时间：2013-02-23T09:52:55.003
> 
> 标签：java, android, android-layout

我希望在所有活动中保持页眉和页脚相同，只需更改页眉和页脚之间的内容即可。下面的图片显示需要如何做这些事情。请帮忙谢谢。

![在此处输入图像描述](../Images/76b04fe2604f95fa25578f6d063858de.png)

![在此处输入图像描述](../Images/3e59c9b48f2619eb5a93b7e326de4a89.png)

![在此处输入图像描述](../Images/dd18ad0cc2b5d2086a2a3d58b66a5ef3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:07:15.250

只需对所有活动使用单一布局，如下所示，

```
 // Header Activity..

   <RelativeLayout>
        // items in header activity
   </RelativeLayout>

 // Footer Activity..

   <RelativeLayout>
        // items in footer activity
   </RelativeLayout>

// In all activity

    <include android:id=”@+id/header”
     android:layout_width=”fill_parent”
     android:layout_height=”fill_parent”
     layout=”@layout/header_layout”/>

     <RelativeLayout
        android:id="@+id/middle_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/header_layout"
        >
         // middle layout
        </RelativeLayout>

    <include android:id=”@+id/footer”
     android:layout_width=”fill_parent”
     android:layout_height=”fill_parent”
     layout=”@layout/footer_layout”/> 
```

# java - 关于日期格式

> ID：15039206
> 
> 赞同：0
> 
> 时间：2013-02-23T09:53:06.107
> 
> 标签：java, android, date

每当用户输入 dd 和 mm 值时，我都会尝试`'/'`在 dd 和 mm 之后自动附加日期分隔符，但问题是在附加日期分隔符后我无法删除分隔符，既不按退格键也不按删除

```
public void afterTextChanged(Editable s) 
{
    if(s.length() == 2)
    {
        lst_date = let_date.getText().toString();
        lst_date = lst_date.concat("/");
        let_date.setText(lst_date.toString());
        Log.v(TAG,"VAlue is s:"+ s.length() +" date:"+ lst_date);
        let_date.setSelection(let_date.length());
    }
    else if(s.length() == 5)
    {
        lst_date = let_date.getText().toString();
        lst_date = lst_date + "/";
        let_date.setText(lst_date);

        let_date.setText(lst_date.toString());
        Log.v(TAG,"VAlue is s:"+ s.length() +" date:"+ lst_date);

        let_date.setSelection(let_date.length());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:10:15.360

这是我的猜测。并不是说您不能删除“/”，而是在它刚被删除后立即通过您的方法添加回来。即，当您按下退格键时，它会删除“/”，然后`afterTextChanged()`被调用并看到 s.length() 是 2 或 5，从而将“/”添加回来。

# android - 开发具有共享核心的自定义 android 应用程序的最佳实践

> ID：15039207
> 
> 赞同：0
> 
> 时间：2013-02-23T09:53:09.697
> 
> 标签：android

我会尽力更好地解释我的问题。我们正在为目标客户开发业务应用程序。此应用程序具有一些非常特定于客户的功能，但核心应为其他客户重复使用。例如，所有客户的登录活动都是相同的，但客户 A 可以看到活动 A，客户 B 可以看到活动 B，依此类推……要显示的应用程序的哪些部分由日志返回的数据管理在。

我只想拥有一个项目，以便更好地维护它....但我的问题是：我为客户 A 创建应用程序，具有常见活动和自定义活动。我将此应用程序的包名称为 com.mybigapplication，apk 名称为 mybigapplication.apk 放在 Play 商店中。

客户A下载安装使用。

现在我有客户 B，我采用相同的项目，我将为客户 B 添加自定义活动，我想将应用程序放在 Play 商店中。

这是我的问题，如果我将应用程序具有相同的包和 apk 名称，客户 A 将无缘无故地更新应用程序......

我能怎么做 ？有没有办法解决这个问题？

请注意，我还没有在商店里放任何东西。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:03:52.617

一个简单的解决方案是创建 2 个具有不同包名称的独立项目。

然后编写一个shell脚本或其他东西，它只是定期将所有源文件从项目A的目录复制到项目B。

您必须小心不要复制可能会弄乱配置等的内容。您必须手动调整这些内容。比如manifest文件不能直接复制；您还必须手动将项目 A 中的任何活动、服务等添加到项目 B 的清单中。

另一种选择是使用共享代码创建一个[Android 库项目](http://developer.android.com/tools/projects/index.html#LibraryProjects)，并将其包含在两个项目中。[这是一个关于这个的教程](http://www.vogella.com/articles/AndroidLibraryProjects/article.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:04:44.560

可行的方法是将通用代码放入 Android 库项目中，客户 A 和客户 B 的专用应用程序将依赖该项目。所以你将在 Eclipse 中有 3 个项目：

*   共同（图书馆）
*   客户A (Android)
*   客户 B (Android)

Android 应用程序由 中的`package`属性唯一标识`AndroidManifest.xml`。这两个 android 项目可以（实际上必须）`package`在其清单中具有不同的属性，这就是升级一个应用程序不会影响另一个应用程序的方式。

有关库项目的更多详细信息，请参阅文档：http: [//developer.android.com/tools/projects/index.html#LibraryProjects](http://developer.android.com/tools/projects/index.html#LibraryProjects)

这篇文章也可能有帮助： [http ://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/](http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/)

# python - Arduino 到 python 串行读取拆分

> ID：15039211
> 
> 赞同：0
> 
> 时间：2013-02-23T09:53:24.480
> 
> 标签：python, serial-port, arduino, pyserial

嗨，我盯着外面看，已经破解了从 Python 向我的 Arduino 发送多位信息。我现在想将信息从我的 Arduino 发送到我看过可能示例的 python，但它们都发送以显示仅发送一行信息。

他就是我所坚持的。Arduino 发送一个起始编号 255，然后是一个 ID，然后是终端窗口上看起来像这样的信息。

```
255  start chr

1    ch ID

99   Value 
```

我想将这些拆分回python中的单独数组。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:57:55.197

最简单的方法是使用专用分隔符（例如逗号）并相应地拆分字符串。也就是说：编写代码的 Arduino 端，使 Python 端的解析变得容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T15:34:47.543

将 Arduino 项目打印到带有分隔符的行中，例如逗号，如下所示：

```
 Serial.print(VALUE 1);
  Serial.print((" , "));
  Serial.print(VALUE 2);
  Serial.print((" , "));    
  Serial.println(LAST VALUE); 
```

对最后一个值使用 println 会将所有先前的打印合并到一行中。使用 Arduino 串行监视器的结果如下：

```
VALUE 1 , VALUE 2 , LAST VALUE 
```

您可以轻松地在 python 中拆分值并为每个值分配一个变量，例如从数组中获取值：

```
SERIALDATA= sensorData.readline() #Read line of text from Arduino
DATASPLIT= SERIALDATA.split(' , ') #Splits the line of text into array of strings composed of each individual sensor data

pyVALUE1= DATASPLIT [0]
pyVALUE2= DATASPLIT [1]
pyFINALVAL= DATASPLIT [2] 
```

# apache - / 路由模式总是向我显示 Symfony 欢迎页面而不是我的控制器

> ID：15039212
> 
> 赞同：1
> 
> 时间：2013-02-23T09:53:26.497
> 
> 标签：apache, symfony, routes

我在我的路线中制作了一个“/”模式：

```
acme_store_index:
    pattern:  /
    defaults: { _controller: AcmeStoreBundle:Default:index} 
```

通过以下操作：

```
public function indexAction()
{
    $message = $this->getDoctrine()
    ->getRepository('AcmeStoreBundle:Message')
    ->findAll();

    return $this->render(
    'AcmeStoreBundle:Default:index.html.twig',
    array('message' => $message)
    );      
} 
```

我还在 Apache 中设置了一个虚拟主机，它将文件 app_dev.php 声明为 localhost 的索引页。（这样，当我进行 ajax 调用等时，我不必一直将它包含在我的 url 中）

为什么我的 / 路线被忽略了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:00:28.403

我自己发现了问题。。

在我的 AcmeDemoBundle 中声明了一个 / 路由：

```
_welcome:
    pattern:  /
    defaults: { _controller: AcmeDemoBundle:Welcome:index } 
```

在 /app/config/routing_dev.yml 文件中。我删除了它，我得到了自己的索引。

# r - 循环 Survdiff

> ID：15039217
> 
> 赞同：2
> 
> 时间：2013-02-23T09:54:07.193
> 
> 标签：r

相当简单的问题，但我的 R 知识不是很好。

**介绍**

我正在使用包 Survdiff。使用一次就可以了，但我想通过许多变量循环它。

例如：我有一个包含 43000 个变量和 177 个观察值的数据框。data.frame 也有 3 个初始变量；第一个只是一个身份号码，第二个是“时间”，第三个是“cens”。Survdiff 软件包需要时间和 cens。但由此可知，我们要循环遍历data.frame中的剩余变量，即Genedata[,4:43000]

到目前为止，我通常会使用 for 语句，但在 R 中我知道这可能比 apply 语句慢得多。

```
cols <- as.list( names(Genedata) ) #generate a list of column numbers
Geneset <- lapply(cols , function (x) { survdiff( Surv( Genedata$time, Genedata$cens=="1" ) ~ x , data = Genedata )$chisq } ) 
```

但是 - 我收到一个错误

```
"Error in model.frame.default(formula = Surv(Genedata$time, Genedata$cens ==  : 
  variable lengths differ (found for 'x')" 
```

**数据样本**（前 15 行和 8 列） -**注意：标题已溢出**

```
Accession   time    cens    A1BG.229819_at  A1BG_AS1.232462_s_at    A1CF.220951_s_at    A1CF.241547_at  A2LD1.232422_at
1   120 0   0   0   0   0   1
2   120 0   0   0   0   0   1
3   28.96   NA  1   0   0   0   1
4   119.21  0   0   0   0   0   1
5   59.53   0   0   1   0   0   1
6   68.81   1   0   0   0   0   1
7   82.29   0   0   0   0   0   1
8   110.82  0   0   0   0   0   1
9   65.88   NA  1   0   0   0   1
10  84.13   0   0   0   0   0   1
11  16.47   NA  0   0   0   0   1
12  89.75   0   0   0   1   1   1
13  76.07   0   0   0   0   0   1
14  67.82   0   0   0   0   0   1 
```

**问题**

1.  我不确定在这种情况下如何正确使用“应用”，因为该功能更复杂。

**更新1**

更改为 FUN=function(x).... 现在错误消失了。相反，我得到

```
dim(X) must have a positive length 
```

然而 dim(GeneMatrix) 返回正值...

**更新2**

更多调整后更新代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:23:45.980

好的，这就是我要做的。我假设`GeneData`是一个数据框。我不知道这对您的数据是否实用（考虑到它的大小）。

```
#Make some example data
df <- data.frame(id=1:100, time=rep(c(0,1),each=50), cens=sample(0:1,100,replace=T,prob=c(0.9,0.1)), X1=sample(0:1,100,replace=T),X2=sample(0:1,100,replace=T),X3=sample(0:1,100,replace=T))

#Melt data into long form (yours will be very long)
library(reshape2)
df.m <- melt(df, id.vars=names(df)[1:3],variable.name="gene")

#Use ddply (from plyr) to operate on each gene's data (I'm guessing they're genes)
library(plyr)    
GeneSet <- ddply(df.m, .(gene), function(x){
  a <- survdiff(Surv(time, cens=='1') ~ value,x)
  a$chisq
})
#> GeneSet
#  gene        V1
#1   X1 0.5041291
#2   X2 0.1222732
#3   X3 2.3488909 
```

先在几列上试一试。有人可能会为你申请工作，但我只是真正了解`reshape`和`plyr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T13:21:49.987

您应该阅读[apply](http://stat.ethz.ch/R-manual/R-devel/library/base/html/apply.html)的帮助页面。在这种情况下，您没有正确使用它。

它在数组的边距上应用一个函数，并且您没有提供数组或参数来声明边距（行/列）以无论如何都应用该函数。而是使用 list 和[lapply](http://stat.ethz.ch/R-manual/R-devel/library/base/html/lapply.html)。

另一个问题是您`function(x)`在 apply 中写入，但尝试使用`GeneMatrix[,i]`. 相反 GeneMatrix[,x] 应该可以工作。

所以试试

```
cols <- as.list( names(Genedata) )[-c(1:4)] #generate a list of column numbers
Geneset <- lapply( cols , function (x) { survdiff( Surv( time, cens=="1" ) ~ get(x) , data = Genedata )$chisq } ) 
```

希望有帮助。如果没有，请告诉我们。我将 Surv 的参数从 更改`time`为`GeneMatrix$time`，但我不确定您是否需要这样做。

# c - 使用来自子字符串的转换规则转换字符串

> ID：15039219
> 
> 赞同：0
> 
> 时间：2013-02-23T09:54:35.727
> 
> 标签：c, string

假设我有一个这样的字符串：`aaaaaa`

我有一个需要应用的转换，如下所示：`aa -> b`

我的问题是：

1.  我如何（单独）找到将转换规则应用于给定字符串中的每个子字符串的结果的所有子字符串。因此，例如，在我举个例子的情况下，我需要得到以下结果字符串：

    咩咩咩咩咩咩咩咩咩咩咩咩咩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:45:27.360

通过递增一个 char* 来单步执行该字符串。每次你在字符串中前进时，使用 strncmp 检查是否跟随想要的子字符串（例如 aa）。每次为真时，复制字符串并替换您在副本中查找的字符串：

```
// str is the string
// needle is what you want to replace
// replacement is what you want to replace the needle with
for (char *p = str; *p != '\0'; p++) {
  if (strncmp(p, needle, strlen(needle)) == 0) {
    char *str_ = malloc(strlen(str)+1+strlen(replacement)-strlen(needle));
    strcpy(str_, str);
    char *p_ = p - str + str_;
    memmove(p_+strlen(replacement), p_+strlen(needle), strlen(p_)+1-strlen(replacement));
    memcpy(p_, replacement, strlen(replacement));
    // do something with str_ here (and probably free it at some point)
  }
} 
```

# java - 用于显示和 CRUD 操作的实体类

> ID：15039220
> 
> 赞同：0
> 
> 时间：2013-02-23T09:54:38.037
> 
> 标签：java, spring, hibernate, jpa, jpa-2.0

我正在使用 Hibernate 4.1.0 和 JPA 2.0

我有一个如下的实体类

```
@Entity
@Table(name = "V_EMPLOYEES")
public class Employee {

        @Id
        @Column(name = "EMPLOYEENUMBER")
        private String employeeNumber;

        @Column(name = "EMPLOYEENAME")
        private String employeeName;

        @Column(name = "DEPARTMENT")
        private String dept; 
```

/* 上面的 getter 和 setter */

... ..

`@Table(name = "V_EMPLOYEES")`这`V_EMPLOYEES`是`view`我使用它`employeename`从我的查找表中获取并加入的地方`employeeno`。

我使用上面的方法在数据表中显示值并且效果很好。

当用户单击添加按钮和用户输入的弹出对话框时，我想创建一个新的员工记录`employeenumber`，等。`employeestatus``employeedepartment`

当我`view`在`Entity`课堂上使用 a 时，如果我想创建一个新的员工记录，我应该创建一个`view`可以更新的数据库还是创建一个`Entity`对表的新类引用`Employee`？如果我有不属于数据表的列用于查看目的，并且我想用于创建或更新记录怎么办？

对此的最佳方法和最佳实践是什么？

我`EntityManager`用于数据获取和持久化（插入、更新和删除）

任何帮助都是高度可观的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:34:19.407

鉴于这些要求，我将维护两个独立的实体，将公共字段推入映射的超类：

```
@MappedSuperclass
public abstract class AbstractEmployee {
    @Id
    @Column(name = "EMPLOYEENUMBER")
    private String employeeNumber;

    @Column(name = "EMPLOYEENAME")
    private String employeeName;

    @Column(name = "DEPARTMENT")
    private String dept;

    // Constructor, getters, setters
}

@Entity
@Table(name = "V_EMPLOYEES")
public class ReadOnlyEmployee extends AbstractEmployee {
}

@Entity
@Table(name = "EMPLOYEES")
public class Employee extends AbstractEmployee {
    // Extra mappings here
} 
```

# java - 如何使 HashMap 与自定义键类型一起正常工作？

> ID：15039222
> 
> 赞同：9
> 
> 时间：2013-02-23T09:54:48.580
> 
> 标签：java, types, hashmap, key

我认为我的问题很简单，但是我找不到解决方案，所以我决定在这里问。我需要的是`HashMap`用这样的自定义键类型制作一个：

```
HashMap<Pair<Integer, Integer>, StrategyPoint> myMap = new HashMap<Pair<Integer, Integer>, StrategyPoint> (); 
```

但是我在这里遗漏了一些东西，因为`HashMap`停止正常工作。首先，Key 变得不唯一，并且可以在`keySet`. 此外，包含键功能也不能像我想象的那样工作:)。

我显然错过了一些东西，更有可能我应该以某种方式定义一种方法来比较我`Pair`班级中的实例。但是，我尝试`compareTo`在`Pair`课堂上实现 Comparable with ，但它仍然不起作用。有什么建议么？

我的原始代码有点凌乱且不友好，所以我在这里做了一个例子来说明我的问题。

这是代码：

```
HashMap<Pair<Integer, Integer>, StrategyPoint> myMap = new HashMap<Pair<Integer, Integer>, StrategyPoint> ();
    Pair<Integer, Integer> myPair = new Pair<Integer, Integer>(2,2);
    StrategyPoint myPoint= new StrategyPoint(2, 2, 5, 5, false);
    myMap.put(myPair, myPoint);

    Pair<Integer, Integer> searcher = new Pair<Integer, Integer> (0,0);
    searcher.setFirst(2);
    searcher.setSecond(2);
    System.out.println(myMap.containsKey(searcher));
    System.out.println(myMap.containsKey(myPair)); 
```

执行的结果是：

```
false

true 
```

我已经对其进行了调试，并且搜索器实例已正确填充，但是似乎`HashMap`拒绝在其`keySet`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-23T09:56:36.967

您必须在课堂`equals`上正确实施。`hashCode``Pair`

使用`HashMap`这些方法来区分和散列密钥类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T10:00:10.143

您需要`equals`在类中覆盖`Pair`。这个方法的实现定义了两个对象如何`Pair`被认为是相等的。

并且每当您覆盖时，`equals`您必须始终覆盖`hashcode`.

以下是您覆盖`equals`但未覆盖时可能出现的问题`hashcode`（来自 Effective Java，第二版。）：

> 根据类的 equals 方法，两个不同的实例可能在逻辑上相等，但对于 Object 的 hashCode 方法，它们只是两个没有太多共同点的对象。因此 Object 的 hashCode 方法返回两个看似随机的数字，而不是合约要求的两个相等的数字。

因为两个逻辑上相等的实例的哈希码变得不相等，如果您尝试在集合中搜索一个时，您将最终查找错误的哈希桶，从而导致`null`.

有一套实现必须遵守的[规则。](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)`equals`另一组覆盖[规则](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)`hashcode`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T09:56:50.867

您的 Pair 类需要根据 Javadoc 中`hashCode()`为.`equals()``Object`

# iphone - iCloud 与自己的服务器（或在未来版本中从 iCloud 移动到自己的服务器）

> ID：15039225
> 
> 赞同：0
> 
> 时间：2013-02-23T09:55:00.107
> 
> 标签：iphone, ios, icloud

我正在创建一个应用程序（目前仅适用于 iPhone），它需要一种自动备份数据的方法，并让用户能够从不同的设备访问他们的数据。一段时间后数据可能会达到一致的大小，因为它还将包括照片等。

我目前正在考虑使用 iCloud 和使用我自己的服务器（带有登录/注册）来存储用户的数据。iCloud 显然更易于使用，因为我现在不需要实现任何网络应用程序。

以下是我的问题：

1.  由于内容大小会在一段时间后变大，这会导致 iCloud 出现任何问题吗？
2.  如果我暂时选择使用 iCloud，之后是否可以删除对 iCloud 的支持并改用我的服务器（不会丢失用户的数据 - 在此过程中将数据从 iPhone 应用程序和 iCloud 移动到服务器）？该应用程序也在使用 CoreData，所以我也想知道这是否会导致任何问题。
3.  这可能听起来很傻，但我还是会问：是否可以让 iCloud 也与 Android（或其他平台，如黑莓、Windows 等）设备一起使用？例如，如果我决定添加对 Android 的支持，我希望用户能够访问他们之前存储在 iCloud 中的数据。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:16:04.493

如果您只是在寻找可以在多个平台上使用的替代方案，请不要忘记[Dropbox](https://www.dropbox.com/developers/core/sdk)和[Google Drive](https://developers.google.com/drive/)。它们也很容易集成。

什么有意义取决于您的应用程序：

*   **您的用户是否只存储自己的数据并自行检索？**那么iCloud可能是更好的选择。特别是因为他们可以存储尽可能多的数据。
*   **数据是否需要在不同用户之间共享？**那么 iCloud 就不是一个解决方案，因为那是不可能的。但这仍然适用于 Dropbox 和 Google Drive。
*   **您是否要存储用户无法手动编辑/操作的数据？**那么拥有自己的 REST 接口的自己的 Web 服务器是最好的解决方案。

并且不要忘记，自己的 Web 服务在维护方面可能非常昂贵！特别是因为一旦您的应用程序交付给客户，您几乎无法再关闭它。也许你必须运行它几年！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:17:04.153

我认为使用自己的服务器会更好，原因如下：

1.  您不会像使用 iCloud 那样遇到存储限制
2.  由于 iCloud 不支持 Android、Blackberry（如果有人仍在使用）或 Windows，因此您可以灵活地支持使用不运行 iOS 的设备的用户
3.  当事情开始发展时，您将不必经历尝试从 iCloud 过渡到您自己的服务器的痛苦

了解 Rails 的人可以很快解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T17:46:06.550

为了解决您的问题：

> 由于内容大小会在一段时间后变大，这会导致 iCloud 出现任何问题吗？

iCloud 仅限于用户可用的空间。他们可以免费获得 5GB 或购买更多。这是他们所有 iCloud 应用程序加上他们的备份（如果有的话）的总可用空间。唯一的问题是，如果您存储大量数据，您可能会用完，这会给用户带来不便，因为它会影响他们的其他应用程序。

> 如果我暂时选择使用 iCloud，之后是否可以删除对 iCloud 的支持并改用我的服务器（不会丢失用户的数据 - 在此过程中将数据从 iPhone 应用程序和 iCloud 移动到服务器）？

您没有理由不能进行转换，应用程序会将数据从现有的 iCloud 商店复制到您自己的网站。

> 该应用程序也在使用 CoreData，所以我也想知道这是否会导致任何问题。

**是**的。在当前版本的 iOS 中，这几乎肯定会成为一个问题。Core Data 内置的 iCloud 支持存在重大问题。要了解事情是如何出错的，请查看我的 Openradar 条目[rdar://13119691](http://openradar.appspot.com/radar?id=2700401)和[rdar://13102447](http://openradar.appspot.com/radar?id=2626401)。

> 这可能听起来很傻，但我还是会问：是否可以让 iCloud 也与 Android（或其他平台，如黑莓、Windows 等）设备一起使用？例如，如果我决定添加对 Android 的支持，我希望用户能够访问他们之前存储在 iCloud 中的数据。

**没有**。Apple 完全没有兴趣进行这项工作。iCloud 是 Apple 独有的服务。

同步数据时您可能需要考虑的一些第三方选项：

*   [芥末同步](http://www.wasabisync.com)
*   [辛珀里姆](https://simperium.com)
*   [解析](https://parse.com)

# qt - 删除使用 qpainter 创建的 qwidget 中的椭圆

> ID：15039227
> 
> 赞同：1
> 
> 时间：2013-02-23T09:55:09.363
> 
> 标签：qt, qwidget, ellipse, qpainter

我在 QWidget 上有使用 QPainter 绘制的椭圆，有没有办法删除某个椭圆（在某个坐标处）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:06:14.863

下次不要画了。

在每个绘制事件上，paintEvent() 的实现“从头开始”绘制整个小部件或[QPaintEvent](http://qt-project.org/doc/qt-4.8/qpaintevent.html)中指定的矩形/区域。因此，每个paintEvent 都从一个空的画布开始，而不是从前一次绘制的内容开始。因此，如果您想擦除某些内容，则必须通过 update() 触发重绘，然后省略您不想绘制的元素。

```
void Speedometer::setSpeedLabelEnabled( bool enabled ) {
     if ( m_speedLabelEnabled == enabled )
         return;
     m_speedLabelEnabled = enabled;
     update(); // trigger repaint
}

void Speedometer::paintEvent( QPaintEvent* ) {
     QPainter p( this );
     if ( m_speedLabelEnabled ) {
         p.drawEllipse( ... );
         p.drawText( ..., m_currentSpeed, ... );
     }
} 
```

正如 Vinod Paul 所说： QGraphicsView 可能是一个不错的选择，以防您必须管理许多此类元素。

# php - HTML Menu，php，突出显示其子菜单项的第一项

> ID：15039230
> 
> 赞同：0
> 
> 时间：2013-02-23T09:55:48.853
> 
> 标签：php, html, arrays, function, menu

我正在寻找一种自动突出显示顶部菜单项的解决方案。

当前情况如下所示：我将默认菜单存储在 .txt 文件中：

```
<li><a href="index.php">HOME</a></li>
<li><a href="#">MENU_1</a>
  <ul>
    <li><a href="submenu_1.php">Submenu_1</a></li>
    <li><a href="submenu_2.php">Submenu_2</a></li>
  </ul>
</li>
<li><a href="#">MENU_2</a>
  <ul>
    <li><a href="#">Submenu_1</a>
      <ul>
        <li><a href="sub_submenu_1.php">Sub_Submenu_1</a></li>
        <li><a href="sub_submenu_2.php">Sub_Submenu_2</a></li>
      </ul>
    </li>
    <li><a href="#">Submenu_2</a></li>
  </ul>
</li>
<li><a href="menu_3.php">MENU_3</a></li>
<li><a href="menu_4.php">MENU_4</a></li> 
```

因此，当`submenu`、 或`sub_submenu`或任何项目是当前页面时，我需要`MENU_X`突出显示其最顶层的父项目（因为只有`MENU_X`项目在我的页面顶部栏上可见）。

我将 CSS 样式应用于`MENU_X`，所以当我设置顶部菜单时：

```
<li class="current"><a href="#">MENU_1</a> 
```

`.current`它由CSS 样式突出显示。

现在我正在寻找一个 PHP 脚本，它会做这样的事情（仅示例）：

```
<?php
$currentPage = $_SERVER["PHP_SELF"];
$url_parts = Explode('/', $currentPage);
$current_php_file = $url_parts[count($url_parts) - 1];

$raw_menu = file_get_contents("menu.txt");

$current_menu_item = '<li><a href="' . $current_php_file . '">'

$top_menuitem_of_current_page = someFunctionToFindOut(); //need some script to find out

$highlighted_menu_item = '<li class="current"><a href="' . $top_menuitem_of_current_page . '">';
$ready_menu = str_replace($top_menuitem_of_current_page, $highlighted_menu_item, $raw_menu);
echo $ready_menu;
?> 
```

上面的代码基本上可以解决问题，但我需要调用一些函数`someFunctionToFindOut()`来找出`$top_menuitem_of_current_page`.

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:44:25.410

由于没有人提供有效的解决方案，我想回答我的问题：

```
include("menu.php");

$current_page = basename($_SERVER['PHP_SELF']);

$menu = "";

function menu_to_array($array, $found) {
    foreach($array as $key => $element){
        if(!is_array($element)){
            if($element == $current_page && !$found){
                $found = true;
                $menu .= "<li class='current'><a href='$element'>$key</a></li>";
            }else{
                $menu .= "<li><a href='$element'>$key</a></li>";
            }
        }else{ 
            if(found_current_page_in($element) && !$found){
                $menu .= "<li class='current'><a href='#'>$key</a><ul>" . menu_to_array($element, true) . "</ul></li>";
            }else{
                $menu .= "<li><a href='#'>$key</a><ul>" . menu_to_array($element, false) . "</ul></li>";
            }
        }
    }
    return $menu; 
}

function found_current_page_in($elem){
    foreach($elem as $key => $element){
        if(!is_array($element)){
            if($element == $current_page){
                return true;
            }
        }else{
            if(found_current_page_in($element)){
                return true;
            }
        }
    }
    return false;
}

$highlighted_menu = menu_to_array($menu_array, false); 
```

还有**menu.php**文件（一个 php 数组，而不是存储在 .txt 文件中的平面文本）：

```
<?PHP

$menu_array = Array(
            'Main Page 1' => "page_1.php",
            'Main Page 2' => Array("Sub Page 1" => "sub_page_1.php", "Sub Page 2" => "sub_page_2.php"),
            'Main Page 3' => Array('Sub Page 1' => Array("Sub Sub Page 1" => "sub_sub_page_1.php", "Sub Sub Page 2" => "sub_sub_page_2.php"), 'Sub Page 2' => "#"),
            'Main Page 4' => "page_4.php"
        );

?> 
```

这工作得很好。它基本上是通过互联网找到的代码聚合的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:45:39.083

您可以改用 jQuery。所以，也许这个代码片段可以帮助你解决你的问题：

```
$(document).ready(function(){

    var pathname = window.location.pathname;
    var filename = pathname.substr(pathname.lastIndexOf("/") + 1);

    if( ! filename)
    {
        filename = "index.php";
    }

    $("ul.navigation > li > a").each(function(){

        if($(this).attr("href") == filename || $(this).next("ul").find("a[href='"+filename+"']").length > 0)
        {
            $(this).addClass("current");
        }

    });

}); 
```

# android - sdk 管理器没有加载，但设置了 eclipse，其他一切都很好

> ID：15039231
> 
> 赞同：3
> 
> 时间：2013-02-23T09:55:48.787
> 
> 标签：android, eclipse, sdk, bundle, adt

我最近格式化了我的电脑，现在当我尝试从 Android 开发者网站安装 ADT Bundle 时，我无法打开 SDK Manager.exe，它只会打开一个空白命令提示符并立即关闭。此外，当我尝试从 Eclipse 启动 SDK Manager 时，它显示“正在启动 Android SDK Manager”，显示进度条（移动），然后“初始化 ... SDK Manager 将启动”，但没有任何反应。

有人知道可能是什么问题吗？我从昨天开始就在尝试，我很绝望。

提前感谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T13:33:37.473

我的解决方案：

1.  修改这个文件 [SDK HOME]\tools\android.bat
2.  rem 检查我们在路径中有一个有效的 Java.exe。设置 java_exe="D:\Java\jre6\bin\java.exe"
3.  “D:\Java\jre6\bin\java.exe”在您的 java sdk 文件夹中并删除这两行：
4.  调用 lib\find_java.bat 如果未定义 java_exe goto :EOF
5.  重启IDE，OK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:59:51.743

转到 Preferences 然后 android 并指定 android sdk 的路径。这将解决您的问题。Adt 只是对 sdk 的位置感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:00:55.787

也许你对这个问题感兴趣[StackOverflow Question](https://stackoverflow.com/questions/15038643/android-bat-opens-sdk-manager-sdk-manager-exe-does-not/15038759#15038759)。我对他的建议是检查 adt 和 java 是否在同一个位系统上（32 位或 64 位）。也许会有一个答案可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T10:31:33.457

其他人报告的两个原因是

1) SDK 找不到 java 所以必须在系统的 PATH 上设置它和

2) 当 java 的路径名称中有空格时，人们会遇到问题

看到[这个 stackOverflow 问题](https://stackoverflow.com/questions/12686633/android-sdk-manager-will-not-run)。

也许你之前设置了路径，重新安装java之后在不同的位置，你需要重新设置环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-29T07:32:24.117

我面临着同样的问题。`system32`在将文件夹的路径添加到`PATH`环境变量中后，我得到了重新爱。

如果您仍然面临问题，请尝试此解决方案。

# qt - QStackedWidget 索引更新

> ID：15039232
> 
> 赞同：0
> 
> 时间：2013-02-23T09:56:17.763
> 
> 标签：qt

从 QStackedWidget 中删除小部件后，我想根据小部件的相应位置更新小部件的索引。可能我需要一个循环；请问我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:40:07.940

1) 当一个小部件被移除时，一个信号 -`widgetRemoved(int index)` 被发出。

2）通过使用该功能`count()`，您可以获得小部件的数量。

所以现在，您知道已删除小部件的索引和小部件的总数。使用这些信息来相应地使用该函数设置其他小部件的索引`setCurrentIndex(int index)`。

# vba - Mysql5 哈希生成器 VBA

> ID：15039234
> 
> 赞同：0
> 
> 时间：2013-02-23T09:56:33.657
> 
> 标签：vba, excel, hash, sha, mysql5

mysql5 算法是 SHA-1(SHA-1($pass)) 吗？

然后我尝试这个[http://vb.wikia.com/wiki/SHA-1.bas](http://vb.wikia.com/wiki/SHA-1.bas)脚本，`=SHA1HASH(SHA1HASH("test"))`我得到的功能`c4033bff94b567a190e33faa551f411caef444f2`但 Mysql5 哈希必须是`94BDCEBE19083CE2A1F959FD02F964C7AF4CFC29`

如何在 VBA 中将字符串转换为 Mysql5 哈希？

![在此处输入图像描述](../Images/ec7c5625402796c6962d69e9086d34bd.png)

我找到了为什么会这样，

因为 Sha1 以 Hex 提供，而 Mysql5 以二进制提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:30:55.520

看起来字符串`94BDCEBE19083CE2A1F959FD02F964C7AF4CFC29`是通过 MySQL 函数生成的`PASSWORD()`。

```
SELECT PASSWORD("test") /* *94BDCEBE19083CE2A1F959FD02F964C7AF4CFC29 */ 
```

正如 MySQL 文档所建议的那样，如果您需要在 excel 中维护所有哈希代码，则需要更改原始哈希过程以使用 SHA1 之类的东西。

来自 MySQL 文档：[http](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_password) *://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_password MySQL 服务器中的身份验证系统使用 PASSWORD() 函数；您不应该在自己的应用程序中使用它。为此，请考虑使用 MD5() 或 SHA1()。*

# c - 尝试从 C 连接到 postgres 的问题

> ID：15039237
> 
> 赞同：2
> 
> 时间：2013-02-23T09:56:46.670
> 
> 标签：c, postgresql, libpq

我正在尝试从 C 中创建与 libpq 的数据库连接。如果我使用 PQconnectdb 创建该连接，一切正常，但如果我使用 PQconnectdbParams 函数创建它，仅使用以不同方式存储的相同参数（请参阅[libpq 参考](http://www.postgresql.org/docs/9.1/static/libpq-connect.html)为此），我得到一个分段错误错误，没有任何其他消息。有人可以帮我解决这个问题吗？

你可以在下面看到我的代码：

```
 int main(int argc, char *argv[]) {
        char **keywords;
        char **values;
        char *line = malloc(50);
        char *prop, *tmp, *val;
        int i = 0, j = 0;
        FILE *creds = fopen("/path/to/file.props", "r");
        if (creds == NULL) {
           LOG("%s", "error: cannot open credentials file.\n");
           exit(1);
        }

        keywords = malloc(5 * sizeof(*keywords));
        values = malloc(5 * sizeof(*values));
        while (fgets(line, LINE_SIZE, creds) != NULL) {
                if (line[strlen(line) - 1] == '\n')
                        line[strlen(line) - 1] = '\0';
                prop = line;
                while(*(prop++) != '=') {
                        i++;
                }
                tmp = prop;
                prop = malloc(i + 1);
                strncpy(prop, line, i);
                prop[i] = '\0';
                keywords[j] = prop;
                val = malloc(strlen(line) - strlen(prop) + 1);
                strcpy(val, tmp);
                values[j++] = val;
                i = 0;
        }
printf("%s %s %s %s %s\n", keywords[0], keywords[1], keywords[2], keywords[3], keywords[4]); //that lines prints ok
printf("%s %s %s %s %s\n", values[0], values[1], values[2], values[3], values[4]); //
        PGconn *conn = PQconnectdbParams(keywords, values, 0);

        if (PQstatus(conn) != CONNECTION_OK) {

                fprintf(stderr, "Connection to database failed: %s", PQerrorMessage(conn));
                PQfinish(conn);
                exit(1);

        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T11:26:04.167

的文档`PQconnectdbParams`说：

> 此函数使用取自两个以 NULL 结尾的数组的参数打开一个新的数据库连接。

`keywords`但是在您的代码中， and`values`数组看起来**不是**以NULL 结尾的。它为 5 个参数分配 5 个指针，但它应该为 5 个参数分配 6 个指针加上一个 NULL 指针。

# rdf - Virtuoso 中如何使用表 RDF_PREFIX？

> ID：15039239
> 
> 赞同：3
> 
> 时间：2013-02-23T09:56:53.357
> 
> 标签：rdf, semantic-web, triplestore, virtuoso

Virtuoso 在`RDF_QUAD`表中存储 RDF 三元组。在此表中，IRI 存储为`IRI_ID`的数据类型，值存储在`RDF_IRI`表中。但我不明白`RDF_PREFIX`桌子的用途。是为了减少`RDF_IRI`table的使用空间吗？但是join是如何完成的呢？（该`RDF_PREFIX`表有一个整数键）。文档没有解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T01:47:58.283

对于上下文（诚然，这并没有解释为什么有两个表而不是一个），[文档](http://docs.openlinksw.com/virtuoso/rdfdatarepresentation.html)说：

> ```
> create table DB.DBA.RDF_PREFIX (
>   RP_NAME varchar primary key,
>   RP_ID int not null unique );
> create table DB.DBA.RDF_IRI (
>   RI_NAME varchar primary key,
>   RI_ID IRI_ID not null unique ); 
> ```
> 
> 这两个表存储了内部 IRI id 与其外部字符串形式之间的映射。内存驻留缓存包含最近使用的 IRI，以减少对该表的访问。函数 id_to_iri（在 id IRI_ID 中）通过其 ID 返回 IRI。函数 iri_to_id（在 iri varchar 中，在 may_create_new_id 中）返回给定字符串的 IRI_ID；如果该字符串之前未用作 IRI，则返回 NULL 或分配新 ID，具体取决于第二个参数。

请注意，`RP_ID`of`RDF_PREFIX`是一个`int`，而`RI_ID`of`RDF_IRI`是一个`IRI_ID`。即使它们都有`varchar`主键，它们映射这些名称的 ID 类型也不同。事实上，看起来即使 的主键`RDF_IRI`是 varchar，但它*与*`RDF_PREFIX`. 我认为下面的例子说明了这一点。[Example 1.5.44 How can I perform search for predicate values](http://docs.openlinksw.com/virtuoso/virtuosotipsandtricks.html#srchprd) from the documentation给出了一个使用示例。我没有足够的 SQL 来准确地说明该示例中*发生*了什么，但这可能是了解如何`RDF_PREFIX`使用的一个好的开始。这是该示例的一个片段：

```
 for ( SELECT RP_NAME, RP_ID 
        FROM RDF_PREFIX
        WHERE (RP_NAME >= path) AND (RP_NAME < path || chr(255)) ) do
    {
      declare fourbytes varchar;
      fourbytes := '----';
      fourbytes[0] := bit_shift (RP_ID, -24);
      fourbytes[1] := bit_and (bit_shift (RP_ID, -16), 255);
      fourbytes[2] := bit_and (bit_shift (RP_ID, -8), 255);
      fourbytes[3] := bit_and (RP_ID, 255);

      for ( SELECT RI_NAME, RI_ID from RDF_IRI
            WHERE (RI_NAME >= fourbytes) AND (RI_NAME < fourbytes || chr(255)) ) do
        {
          if (exists (SELECT TOP 1 1 FROM RDF_QUAD WHERE P=RI_ID))
            result (case when (dump_iri_ids) then RI_ID else RP_NAME || subseq (RI_NAME, 4) end);
        }
    } 
```

请注意，`varchar fourbytes`用于从中检索值的是通过对表格`RDF_IRI`进行位移来构造的。我不足以解释所有细节，但在我*看来*，它就像是. 在中，实际上看起来像一个 IRI，但's只是一个字节序列。`int``RDF_PREFIX`*`RDF_PREFIX``RDF_IRI``varchars``RDF_PREFIX``RP_NAME``RDF_IRI``RI_NAME`*

# graphics - 矢量与平面的夹角

> ID：15039242
> 
> 赞同：0
> 
> 时间：2013-02-23T09:57:22.443
> 
> 标签：graphics, 3d

矢量例如（2,3,5）与其在平面（xz）上的投影之间的角度在垂直平面（xy）和公共轴（x轴）上的投影之间是不同的，我不知道为什么那个，谁能给我解释一下...

![3d 尺寸](../Images/532e8ffd9dfc951bb418389970d70097.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:19:39.917

在平面 xz 上的投影是向量 (2,0,5)，在平面 xy 上的投影是 (2,3,0)。在任何情况下，投影都是由矩形三角形的基础给出的，其中原始向量是 hipotenusa。

# tsql - 加入表格的更好方法？

> ID：15039243
> 
> 赞同：1
> 
> 时间：2013-02-23T09:57:31.237
> 
> 标签：tsql, stored-procedures, join, views

我发布了我的搜索的简化版本，基本上是在**SQL 2008中加入多个表**

```
select * from t1 
inner join t2 on t1.id = t2.id
inner join t3 on t2.id = t3.id
inner join t4 on t3.id = t4.id 
inner join t5 on t4.id = t5.id 
```

我想知道是否有办法将此查询的一部分存储为对象。不是结果，而是查询逻辑。

假设我想重用

```
inner join t3 on t2.id = t3.id 
inner join t4 on t3.id = t4.id
inner join t5 on t4.id = t5.id 
```

在不同的查询中，例如

```
select * from t1
inner join t2 on t1.id = t2.id
inner join t_stored on t_stored.id = t3.id 
```

我正在考虑将 t_stored 定义为视图、函数或存储过程（两者都需要参数），但我不确定这会如何影响性能。无论最终会变得多么复杂，将其全部保存在主查询中是否更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:48:32.643

如您所知，MS SQL 性能完全取决于如何生成查询执行计划以及如何缓存它以便更好地命中执行上下文线程。通过创建视图重用连接的选项是一个不错的选择，但在匹配键之前您不会获得任何优势。

重复使用的问题仍然存在；视图是最好的选择，但如果您不需要，那么在结果集中和右聚集索引会受到重用查询的影响，性能会发生巨大变化。

我的个人经验表明，通过根据需要将所有这些表加入查询中可以实现最佳性能。因为它允许您对查询进行更多控制，只需将查询修改为具有 EXISTS 语句而不是使用 JOIN（如果您不希望结果集中有这些表字段。）

通过查看此[http://msdn.microsoft.com/en-us/library/ee343986(v=sql.100).aspx ，了解如何缓存计划](http://msdn.microsoft.com/en-us/library/ee343986(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:23:28.877

我认为您的问题没有明确的答案。不同的数据库有不同的优化。我的直觉是，假设您的示例代表加入（希望）正确索引的 FK 约束，它不应该产生影响还是没有实质性影响。
通过允许 DBMS 更好地缓存视图，为经常使用的数据创建视图甚至可以提高性能。
但是，如果没有实际尝试并查看这两个选项的执行计划，我无法确定，这可能是您应该做的。

# c - 字符串的 C Exta 值

> ID：15039244
> 
> 赞同：-3
> 
> 时间：2013-02-23T09:57:37.680
> 
> 标签：c

我正在尝试在 : :amf aa :amfe 之类的东西之间进行解析。但是添加了一些额外的值到字符串中。在代码中，一切都更加具体

```
char *aparse(char *str,char *a1,char *a2)
{
    char *aa;
    char *cr = strstr(str,a1);
    char *sr =  strstr(str,a2);
    int first = cr-str;
    int second =  sr-str;
    int ftag = first+5;
    int stag  = second-1;
    long wtag = stag-ftag;
    int i=0;

    aa =  malloc(wtag);

    for (i=0; i<wtag; i++)
    {
        aa[i] = str[ftag];

        ftag++;

    }

printf ("%s\n",aa);
return aa;
} 
```

这是我的解析器代码。

```
 char *aa = ":amf gosadaogle :amfe :fil doc :file";
char *music = aparse(aa,":amf",":amfe");
char *o = aparse(aa,":fil",":file"); 
```

这就是我调用函数的方式。但是其中一个字符串带有来自我不知道的地方的额外字符。它就像 o = doc 但音乐 = gosadaogle 。我制作了一个数组并且额外的值消失了。但是我想做malloc。我该如何解决

对不起，我想我不能清楚地告诉我我的问题

这将解释

我试图提取 :amf 和 :amfe 之间的值。而我用 aparse 提取一些添加到音乐或 o 变量中的额外字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:14:10.577

据我所知，我从未看到您正在向字符串添加零终止符。在 C 语言中，您必须在字符串的末尾放置一个 '\0' 来标记它的结束。（这也是为什么分配的字符串大小必须是字符数 + 1）。如果你没有这样的结束标记，你会在字符串之后得到随机垃圾。

我猜 wtag 的计算是计算结果字符串的长度，所以你遇到了缺少“+1”大小的问题。另一个问题是您正在`ftag`用“任意”数字“5”来抵消该值，而它应该取决于`strlen(a1)`.

我还想补充一些其他注意事项：

1.  您用来调用解析器的代码可能会警告您将 a 转换`const char *`为非常量值。这是因为`char *aparse(char *str,char *a1,char *a2)`使编译器认为您希望能够修改传递的字符串。您应该将其更改为，`char *aparse(const char *str, const char *a1, const char *a2)`因为您不会修改任何参数。
2.  您可以使用 strncpy() 来复制字符串，而不是自己编写复制函数，这将加快更长字符串的复制过程。还要注意在将字符串复制为 strncpy 后添加一个 '\0' 不一定会为您执行此操作。
3.  您应该检查是否返回`strstr`NULL，因为这可能发生在.`a1``a2``str`

# google-maps - google map API v3 仅显示部分地图，其他部分显示在调整窗口大小或拖动地图上

> ID：15039250
> 
> 赞同：-2
> 
> 时间：2013-02-23T09:58:39.860
> 
> 标签：google-maps, google-maps-api-3

我正在尝试将自定义地图添加到我的网站，这是我第一次使用 Google 地图 API V3

问题是只有部分地图出现在地图 div 内，并且地图的所有剩余部分都保持卸载状态，除非我重新调整浏览器的大小或拖动地图的可见部分开始正常加载。

这是HTML代码

```
 <div id="map_canvas" style="width:40%; height:1000px"></div> 
```

这是jquery代码

```
function initialize() {
            var latlng = new google.maps.LatLng(57.0442, 9.9116);
            var settings = {
                zoom: 15,
                center: latlng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                mapTypeId: google.maps.MapTypeId.ROADMAP};
            var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

            google.maps.event.addListener(map, 'idle', function() {
                google.maps.event.trigger(map, 'resize'); 

            }); 
```

您也可以通过以下测试链接联系我们[这里是链接](http://thesevenlayers.net/amak/html/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:11:14.633

由于地图最初是不可见的，因此您必须在地图显示时触发地图（或窗口）的调整大小事件。
这将强制 API 加载丢失的图块。

`$.animate()`末尾的回调`openSection()`应该是一个很好的地方。

# ruby-on-rails - Rails 和 kaminari 分页，如何在分页文本中使用集合的名称？

> ID：15039253
> 
> 赞同：0
> 
> 时间：2013-02-23T09:59:33.980
> 
> 标签：ruby-on-rails, collections, pagination, locale, kaminari

我在 Rails 项目中使用 kaminari 进行分页，效果很好。我也为它生成了视图和语言环境文件。

然而，我遇到的一个问题是使用在分页文本中分页的集合的名称。

例如，在博客文章中，我希望下一页链接显示“较早的博客文章”或在评论分页上，文本应显示“较早的评论”。

此标签的文本来自 kaminari 视图中包含此行的语言环境文件：

```
<%= link_to_unless current_page.last?, raw(t 'views.pagination.next'), url, :rel => 'next', :remote => remote, :class => "older" %> 
```

特别`raw(t 'views.pagination.next')`是来自 en.yml 语言环境文件的。那么如何在这个标签中为每个集合显示不同的文本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:24:29.697

您可以尝试以下方法

```
# locale
en:
  views:
    pagination:
      next: "Newer %{title}" 
```

然后在视图上，您​​可以使用

```
t('views.pagination.next', title: @comments.first.class.name.underscore.humanize.pluralize) 
```

# java - 这到底是做什么的 Class.forName("com.mysql.jdbc.Driver").newInstance();

> ID：15039265
> 
> 赞同：20
> 
> 时间：2013-02-23T10:01:43.333
> 
> 标签：java, mysql, database, class, jsp

在连接到 MySQL 数据库时，我执行以下步骤

```
Connection con = null;
Resultset rs = null;
Statement st = null;
Class.forName("com.mysql.jdbc.Driver").newInstance();
con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database","root","passwp"); 
```

其实我想知道`Class.forName("com.mysql.jdbc.Driver").newInstance();`语句是做什么的。

虽然这个类不在 mysql.jar 中。它现在在哪里？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-23T10:10:45.907

该类`Class`位于 java.lang 包中，因此它与 java 一起分发，并自动导入到每个类中。

该`forName()`方法所做的只是返回`Class`由类加载器加载的参数的对象。然后该`newInstance()`方法返回该类的一个新实例。

那么接下来发生的事情就是你调用 `Class.forName(...)` 它返回 com.mysql.jdbc.Driver.class。然后你调用`newInstance()`那个返回类实例的类，没有参数，所以它基本上是调用`new com.mysql.jdbc.Driver();`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T10:06:38.970

如果在类路径中找到它会初始化`"com.mysql.jdbc.Driver"`类，这意味着驱动程序已在 JDBC 驱动程序管理器中注册，因为注册过程在驱动程序类的静态初始化程序中......

您可以使用另一种方法来注册驱动程序：使用静态`DriverManager.registerDriver()`方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-21T06:08:31.887

引用[JDBC 规范](http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf?AuthParam=1495346465_4fc2c02537932b33d38b06a69cb8c3c3)，第 9 章，第 2 节：

> JDBC 驱动程序必须实现 Driver 接口，并且该实现必须包含一个静态初始化程序，该初始化程序将在驱动程序加载时被调用。这个初始化器向 DriverManager 注册一个新的自身实例。

并提供了一个示例代码`AcmeJdbcDriver`如下：

```
public class AcmeJdbcDriver implements java.sql.Driver {
    static {
        java.sql.DriverManager.registerDriver(newAcmeJdbcDriver());
    }
} 
```

根据 API 文档，当您调用[Class.forName(String className)时，会发生以下情况：](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.5)

> 调用 forName("X") 会导致初始化名为 X 的类。

其中初始化涉及要执行的静态块中的代码。

因此，基本上，您初始化 Driver 类，然后该类`java.sql.DriverManager`按照 JDBC 规范注册自己。

请注意，这不再需要。详细信息可以在[这里](https://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)找到。

> DriverManager 方法 getConnection 和 getDrivers 已得到增强，以支持 Java 标准版服务提供者机制。JDBC 4.0 驱动程序必须包含文件 META-INF/services/java.sql.Driver。此文件包含 java.sql.Driver 的 JDBC 驱动程序实现的名称。例如，要加载 my.sql.Driver 类，META-INF/services/java.sql.Driver 文件将包含以下条目：
> 
> ```
> my.sql.Driver 
> ```
> 
> 应用程序不再需要使用 Class.forName() 显式加载 JDBC 驱动程序。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-23T10:06:33.300

它将创建`com.mysql.jdbc.Driver`该类的一个新实例，因此调用静态初始化，该初始化将向 注册驱动程序，`DriverManager`因此您可以根据您在第二行中使用的 URL 创建 mysql 连接。

然而，该类应该在`mysql.jar`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-06T17:42:19.763

它创建 com.mysql.jdbc.Driver 类的新实例并注册驱动程序。

那么发生的情况是你调用 Class.forName("com.mysql.jdbc.Driver") 没有 'newInstance()' 它返回 com.mysql.jdbc.Driver 类并仅注册驱动程序

# github - 在 GitHub for Windows 中 revert this commit 和 roll back this commit 是什么意思？

> ID：15039271
> 
> 赞同：46
> 
> 时间：2013-02-23T10:02:24.627
> 
> 标签：github, rollback, revert, github-for-windows

Github for Windows 具有以下两个命令：

1.  `revert this commit`- 创建一个新的提交，恢复该提交的更改
2.  `rollback this commit`- 回滚此提交，将在此和后续提交中所做的所有更改保留在您的工作目录中

您能否解释一下这两个命令的确切含义以及如何使用它们。具体来说，我不明白第二个的目的是什么。对我来说完全是无稽之谈。

是否可以恢复到以前的提交检查它，如果我不喜欢它，回到最初的位置？

这个 gui 似乎只包含 git 系统的一小部分，但是使用它的正确工作流程是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-23T10:22:33.187

假设您的存储库中有一个文件，并且您有以下提交：

```
commit 1 : the file contains A
commit 2 : the file contains B
commit 3 : the file contains C 
```

如果您执行 revert on `commit 3`，您将在 repo 中有这个：

```
commit 1 : the file contains A
commit 2 : the file contains B
commit 3 : the file contains C
commit 4 : the file contains B 
```

并且您的工作副本中的文件也将包含 B。

如果你执行回滚，你会在 repo 中有这个：

```
commit 1 : the file contains A
commit 2 : the file contains B 
```

并且您的工作副本中的文件将保持不变。因此，该文件将包含 C。例如，它允许您修复一个小错误并再次提交。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-21T10:37:43.037

> 是否可以恢复到以前的提交检查它，如果我不喜欢它，回到最初的位置？

现在（2013 年 3 月），使用 GitHub for Windows，您可以撤消回滚，而无需键入任何 git 命令：

请参阅“ [Windows 版 GitHub 中的撤消按钮](https://github.com/blog/1441-undo-button-in-github-for-windows)”

> 我们添加**了对 Discards、Commits、Rollbacks 和 Merges 的 Undo 支持**：

![撤消按钮](../Images/31eafcaf4ee664466c8148274077b75d.png)

# vb.net-2010 - 在 VB.net 中将整个 .txt 文件复制并粘贴到 Excel 中

> ID：15039274
> 
> 赞同：0
> 
> 时间：2013-02-23T10:03:09.933
> 
> 标签：vb.net-2010

可能是一个愚蠢的问题，在 VBA 中我会手动完成并创建一个宏，但我不知道如何在 VB.net 中做到这一点，如果有办法让我知道那就太好了！

无论如何，我想在 VB.net 中做的相当于手动选择整个 .TXT 文件并将其粘贴到 Excel 工作表的第一个单元格中......我可以做的文件处理，我只是不知道进行复制和粘贴的最佳方式。

例如，我想我可以读取整个 .TXT 文件并将其逐行写入剪贴板，然后将剪贴板粘贴到 Excel 文件中，但我想这是非常低效的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:53:44.863

假设您可以准备一个空的 Excel 文件，其中只有一个名为“LEAGUE”的工作表。
在此工作表中，您在第一行中定义了以下值（每个值对应于每个单元格）

> TEAMNAME PL WDLFA 差异点

现在你可以写一个这样的伪代码，（需要一些测试）：

```
Dim results() = File.ReadAllLines("yourfile.txt")

Dim connectionString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;" + 
                       "Data Source={0};Extended Properties='Excel 12.0;" + 
                       "HDR=YES;IMEX=0'", "yourexcelfile.xlsx")

Using cn = new OleDbConnection(connectionString)
    cn.Open();
    Dim sqlCommand = new OleDbCommand("INSERT INTO [LEAGUE$] " + 
                         "(TEAMNAME,PL,W,D,L,F,A,Dif,Pts)" +
                         "VALUES(?,?,?,?,?,?,?,?,?)", cn)

    sqlCommand.Parameters.AddWithValue("@team", string.Empty)
    sqlCommand.Parameters.AddWithValue("@played", string.Empty)
    sqlCommand.Parameters.AddWithValue("@win", string.Empty)
    sqlCommand.Parameters.AddWithValue("@deu", string.Empty)
    sqlCommand.Parameters.AddWithValue("@los", string.Empty)
    sqlCommand.Parameters.AddWithValue("@f", string.Empty)
    sqlCommand.Parameters.AddWithValue("@a", string.Empty)
    sqlCommand.Parameters.AddWithValue("@dif", string.Empty)
    sqlCommand.Parameters.AddWithValue("@pts", string.Empty)

    For Each line in results
        Dim cells() = line.Split(ControlChars.Tab)
        sqlCommand.Parameters("@team").Value = cells(0)
        sqlCommand.Parameters("@played").Value = cells(1)
        sqlCommand.Parameters("@win").Value = cells(2)
        sqlCommand.Parameters("@deu").Value = cells(3)
        sqlCommand.Parameters("@los").Value = cells(4)
        sqlCommand.Parameters("@f").Value = cells(5)
        sqlCommand.Parameters("@a").Value = cells(6)
        sqlCommand.Parameters("@dif").Value = cells(7)
        sqlCommand.Parameters("@pts").Value = cells(8)
        sqlCommand.ExecuteNonQuery()
    Next
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:46:11.547

史蒂夫，这似乎有点复杂，虽然它可能比我理解的要多，但我使用了以下似乎工作正常......

```
 myNewTable = myFolder + "League Table S" + mySession + ".xlsx"

    Dim oExcel As Object
    Dim oBook As Object
    Dim oRow As Int16 = 0

    oExcel = CreateObject("Excel.Application")
    oBook = oExcel.Workbooks.Add

    'Read input .txt file line-by-line, Copy to Clipboard & Paste to Excel

    Using rdr As New System.IO.StreamReader(myNewTableTemp)
        Do While rdr.Peek() >= 0
            Dim InputLine As String = rdr.ReadLine
            oRow = oRow + 1
            System.Windows.Forms.Clipboard.SetDataObject(InputLine)
            oBook.Worksheets(1).Range("A" + oRow.ToString).Select()
            oBook.Worksheets(1).Paste()
        Loop
        rdr.Close()
    End Using

    oBook.SaveAs(myNewTable)
    oBook = Nothing
    oExcel.Quit()
    oExcel = Nothing 
```

# knockout.js - knockout.js - 在禁用/启用表单元素后更新模型

> ID：15039277
> 
> 赞同：0
> 
> 时间：2013-02-23T10:03:33.267
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我目前正在尝试使用 Knock out View 模型发布到 ajax 端点。

我正在为以下情况而苦苦挣扎；

*   我绑定了表单字段，一切都很好。

*   我的应用程序有一个场景，其中一些表单字段的`readonly`属性设置为 true（使用 jquery `$("#element).attr("readonly","true");`）

*   设置为只读后，模型与控件断开连接（模型项显示为空）。

我尝试在发布之前启用表单元素，然后在之后将它们设置为 null，但这不成功。

如何保持`readonly`控件绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:02:41.617

这工作正常。我找错地方了。

问题不在于 I Knockout 没有更新模型。问题是我使用 jQuery 单独更新字段，而不是模型。

我在做：

```
$("#fieldName").val("new value");
$("#fieldName").attr("readonly","true"); 
```

这并没有更新 Knockout 模型。我正在使用模型提交 ajax 请求，所以这是一个问题。

通过这样做，我没有问题：

```
viewModel.fieldName("new value);
$("#fieldName").attr("readonly","true"); 
```

感谢大家推动我重新以我应该的方式使用 mvvm。

# python - 将列表转换为 0-1.0 的索引和范围

> ID：15039283
> 
> 赞同：1
> 
> 时间：2013-02-23T10:04:05.927
> 
> 标签：python

编辑：我已经更新了图形以尝试解释我的目标。

![](../Images/f104a4d085a08459b5efc47c1369399c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T10:10:11.137

`new_list = range(len(old_list))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:06:51.217

注意：由于 list 是关键字，因此您不应命名变量列表。 `enumerate(oldlist)`是一个生成器，它从 oldlist 中生成索引元组和列表元素。此列表推导将产生索引的所有值并将它们存储在`newlist`. 如果您需要元素和索引，这是一个好方法。如果你有很多更大的列表，建议的 range(len(thelist)) 方法要快得多。

```
newlist = [i for i,_ in enumerate(oldlist)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:22:11.547

检查这个...

```
In [24]: value = [17, 18, 19, 0, 1]

In [25]: valueIndex = range(len(value))

In [26]: valueIndex
Out[26]: [0, 1, 2, 3, 4]

# Get the valueRemapped in float format
In [27]: valueRemapped = [float(x)/valueIndex[-1] if x > 0 else x for x in valueIndex]

In [28]: valueRemapped
Out[28]: [0, 0.25, 0.5, 0.75, 1.0]

# Zip the two lists
In [29]: tempresult = zip(value, valueRemapped)

In [30]: tempresult
Out[30]: [(17, 0), (18, 0.25), (19, 0.5), (0, 0.75), (1, 1.0)]

# Sort the lists based on value list
In [31]: tempresult.sort(key=operator.itemgetter(0))

In [32]: tempresult
Out[32]: [(0, 0.75), (1, 1.0), (17, 0), (18, 0.25), (19, 0.5)]

# print the corresponding data
In [33]: [x[1] for x in tempresult]
Out[33]: [0.75, 1.0, 0, 0.25, 0.5] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:15:44.190

```
In [11]: lst = [17,18,19,0,1]

In [12]: p = [i/(len(lst)-1.) for i in range(len(lst))]  # [0.0, 0.25, 0.5, 0.75, 1.0]

In [13]: [p[i] for i in sorted(range(len(lst)), key=lst.__getitem__)]
Out[13]: [0.75, 1.0, 0.0, 0.25, 0.5] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T11:16:16.697

我对我认为的问题的解释是：

```
value = [17, 18, 19, 0, 1]  
value_index = range(len(value))
value_remapped = map( lambda x : float(x) / 4.0, value_index)
paired = zip(value, value_remapped)
paired_sort = sorted(paired)

value_sort, value_remapped_sort = zip(*paired_sort)

print "value=", value
print "value_remapped=", value_remapped
print "paired=", paired
print "paired_sort=", paired_sort
print "value_sort=", value_sort
print "value_remapped_sort=", value_remapped_sort 
```

这使：

```
value= [17, 18, 19, 0, 1]
value_remapped= [0.0, 0.25, 0.5, 0.75, 1.0]
paired= [(17, 0.0), (18, 0.25), (19, 0.5), (0, 0.75), (1, 1.0)]
paired_sort= [(0, 0.75), (1, 1.0), (17, 0.0), (18, 0.25), (19, 0.5)]
value_sort= (0, 1, 17, 18, 19)
value_remapped_sort= (0.75, 1.0, 0.0, 0.25, 0.5) 
```

# haskell - Haskell Cabal QuickCheck 集成

> ID：15039285
> 
> 赞同：10
> 
> 时间：2013-02-23T10:04:22.753
> 
> 标签：haskell, cabal-install

我一直在尝试使用 cabal-install 作为一种构建方式，更重要的是，测试我的 haskell 项目，有点类似于 Maven 在 Java 项目中的使用方式，主要是因为它似乎也是一种很好的方式集成在 Jenkins 或者 ci 左右，从某种意义上来说似乎非常可靠，您不需要设置开发环境等来检查和确认代码是否正在编译和正确与否。

无论如何，我为此使用 QuickCheck 和 HUnit。在关于堆栈交换的另一篇文章 [中](https://stackoverflow.com/questions/11874601/how-to-use-hunit-and-cabal-to-do-automated-testing)，我发现了一种集成 HUnit 和 cabal 的好方法，方法是使用 Distribution.TestSuite.HUnit 中的函数 test 在我的测试模块中创建一个公开的测试数组。作品。

我尝试使用快速检查进行相同的设置，

```
 import qualified Distribution.TestSuite.QuickCheck2 as CabalQuickCheck

    alwaysFalseOneArg::Int->(Int,Int)
    alwaysFalseOneArg x = (x,x)

    quickCheckPropOneArg = \s->let (a,b)=alwaysFalseOneArg s  in a==b && a/=b

    cabalQCTest = CabalQuickCheck.test "test" quickCheckPropOneArg

    tests=cabalQCTest:[] 
```

我想看到这个测试失败。

我拥有的 cabal 文件与 HUnit 设置一起使用，HUnit 测试运行和失败或不失败，因为它们应该。但是，如果我使用相同的设置来执行快速检查测试，cabal 告诉我它确实找到了一个测试套件，但其中没有测试。[我也尝试了 Distribution.TestSuite.QuickCheck2网站](http://www.haskell.org/ghc/docs/7.0.4/html/libraries/Cabal/Distribution-TestSuite.html "地点")上提到的方法，但是他们似乎没有提到如何公开测试，我似乎也无法让它运行。我现在有点不知所措，我可以使用 quickcheck 本身而不是 cabal 运行这些快速检查测试，我希望能够快速验证我的所有测试和代码并在 Jenkins 左右使用它。有人有想法吗？

我试图提供我认为必要的所有信息，而不会过于复杂，所以我没有发布完整的 cabal 文件等等，如果有必要，我当然会这样做。我发现了很多类似的帖子，但其中大多数归结为使用除了 detail-0.9 之外的其他东西，这将是一个遗憾，因为它似乎与 HUnit 一起工作得很好，我想同时使用 HUnit 和 QuickCheck当然，以同样的方式，最好公开一个包含 HUnit 和 QuickCheck 测试的测试数组。

卡斯帕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T03:08:55.797

我同意[isturdy](https://stackoverflow.com/users/1839894/isturdy)的观点：我肯定会尝试`test-framework`+ `test-framework-quickcheck2`。查看如何在项目中一起使用它们的[示例。](https://github.com/fatuhoku/haskell-minecraft-tool/blob/master/test/TestMain.hs)注意名为 的属性`prop_*`。

您还可以查看项目`haskell-minecraft-tool`以查看测试输出的样子。运行测试

```
cabal configure --enable-tests && cabal build && cabal test 
```

查看`.cabal`此处的文件以了解需要哪些软件包。即这些是 `test-framework`, `test-framework-quickcheck2`, `QuickCheck`。

# javascript - 您如何跟踪点击通话移动设备？

> ID：15039286
> 
> 赞同：1
> 
> 时间：2013-02-23T10:04:24.703
> 
> 标签：javascript, ajax, mobile

您如何跟踪点击通话的移动点击？我可以将有关电话/来电者的哪些数据传递到我的跟踪系统？

# function - Matlab - 使用 .m 文件作为函数的输入

> ID：15039291
> 
> 赞同：1
> 
> 时间：2013-02-23T10:04:53.853
> 
> 标签：function, matlab, input

我正在尝试创建一个 matlab 函数，它可以接受任何 .m 文件并在其上运行输出测试，例如 tic toc。

基本上我想要一些类似的东西：

函数 [时间] = func (program.m)

抽动程序.m(); 时间 = toc;

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:07:53.450

看看 MATLAB 的 XUnit 测试框架，它可以做到这一点以及更多： http: [//www.mathworks.co.uk/matlabcentral/fileexchange/22846-matlab-xunit-test-framework](http://www.mathworks.co.uk/matlabcentral/fileexchange/22846-matlab-xunit-test-framework)

# css - 翻转时桌子的阴影？

> ID：15039294
> 
> 赞同：1
> 
> 时间：2013-02-23T10:04:55.767
> 
> 标签：css, shadow

我只需要在鼠标悬停时为表格（围绕其边界）提供阴影效果！

我可以为 DIV 做到这一点，但找不到为表格做到这一点的方法。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:14:53.497

```
table:hover {
    box-shadow: 3px 3px 10px #999;
} 
```

有关结果，请参见[http://jsfiddle.net/pavloschris/JbWmK/2/](http://jsfiddle.net/pavloschris/JbWmK/2/)。

如果这不起作用，您始终可以将表格包装在一个 div 中并将 box-shadow 应用于该表格。

编辑：这显然不适用于旧浏览器，但您可以为此使用前缀。

# matlab - 元胞数组操作matlab

> ID：15039296
> 
> 赞同：0
> 
> 时间：2013-02-23T10:05:33.050
> 
> 标签：matlab, matrix, cell-array

我需要最后一个单元格中的元素（比如第 k 个），它之前的单元格中没有出现，即第 (k-1) 个单元格，其中 k = 1,2,...,p。一个例子，k=2，r=2^(k+2)+2，n=2^(k)+1；

```
for i=1:k
    dt = 1:2^i:n;
     for j=1:2^(k-i)+1
       cd(j,:)= dt+ r*(j-1);
     end
   dd{i}=cd;
   clear cd
end 
```

dd{1} =[1 3 5; 11 13 15；21 23 25]
dd{2} = [1 5;21 25]

我希望从 dd{1} 中删除 dd{2} 中出现的所有条目，即

dd{1}= [3 11 13 15 23]。
dd{2}= [1 5;21 25]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:36:02.327

我认为您可以使用`setdiff`来实现您的目标（两个数组的差异）：

```
setdiff([1,2,3,4,5],[3,4])

ans =

     1     2     5 
```

# javascript - HTML 音频不在 Safari 上播放，但在所有其他浏览器上播放

> ID：15039297
> 
> 赞同：0
> 
> 时间：2013-02-23T10:05:44.480
> 
> 标签：javascript, jquery, html5-audio

我对 JavaScript 很陌生，我已经编写了播放 HTML 音频的代码。音频在 Chrome 和 Firefox 上播放良好，但在 Windows 上的 Safari 上播放不了。可能是什么问题？

抱歉，我不能在这里发布任何代码，因为工作性质要求如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:06:38.627

请检查您是否`Quick time player`已在 Windows 机器上安装。

# ios - 使用 iOS 6.1 模拟器和 XCode 4.6 进行测试

> ID：15039298
> 
> 赞同：1
> 
> 时间：2013-02-23T10:05:53.653
> 
> 标签：ios, xcode

我已经升级到使用 iOS 模拟器 6.1 的 XCode 4.6。

但是，出于某种原因，我想用 6.0 模拟器（以及 61.）测试我的应用程序。

我有办法指示 Xcode 使用模拟器 6.0 而不是 6.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T10:13:38.813

您只需要通过 Preferences > Downloads > Components 安装 iOS 6.0 Simulator：

![在此处输入图像描述](../Images/c22cea6aded35b36ae1111ba1c781b82.png)

然后从下拉菜单中选择设备：

![在此处输入图像描述](../Images/6bb0dc22e681e4c5253838cec795c617.png)

（从这个菜单中选择“更多模拟器...”将让您直接进入上述首选项窗口）。

然后使用`⌘`+运行`R`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T10:11:57.470

Xcode > 首选项 > 下载 > 组件

# c# - 抽象 Request 对象

> ID：15039299
> 
> 赞同：0
> 
> 时间：2013-02-23T10:06:02.787
> 
> 标签：c#, abstraction

我正在 MVC4 应用程序上运行一些基本的单元测试。在一个主要的控制器方法中，有一个对 Request.UserHostAddress 的调用。

但是，当我运行单元测试时，它会失败（对象空引用），我认为这是因为 Request 对象没有上下文。

在这种情况下，赌注是什么。我读了一个关于抽象 Request 对象的建议，但我不确定如何，或者这是否是最好的方法？

建议（和可能的解决方案）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:09:43.977

您应该能够`ControllerContext`在被测控制器上设置 。这包括`RequestContext`，这是您使用时使用的内容`Request.UserHostAddress`。然后你只需要传入一个 mocked `HttpRequestBase`。

# unix - 用于 Gzip 文件并将其移动到主目录的 Unix 命令

> ID：15039302
> 
> 赞同：2
> 
> 时间：2013-02-23T10:06:33.667
> 
> 标签：unix, command, gzip

下面的 Unix 命令用于获取最近 30 分钟修改文件的列表，这些文件运行良好。

```
touch -t 02231249.00 /tmp/last30min
find /mydirectory -type f -newer /tmp/last30min
rm /tmp/last30min 
```

有人可以向我提供 gzip 这些文件并将其移动到主目录或 tmp 目录的命令吗？

谢谢你的帮助！！！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:56:28.293

用空字符分隔的 find 命令的参数（如果文件名包含空格很重要）来`xargs`完成这项工作

```
find /mydirectory -type f -newer /tmp/last30min -print0 | xargs -0 -I{} sh -c 'gzip "{}"; mv "{}".gz ~' 
```

where`-I{}`告诉用输入行`xargs`替换`{}`命令中的 every，即 . 找到的当前文件`find`。

如果您使用的是 Z shell ( `zsh`)，它会更简单，一切都可以在 oneliner 中完成：

```
for i (/mydirectory/**/*(mm-30)) { gzip $i && mv $i.gz ~ } 
```

这里`**`递归搜索，`(mm-30)`意味着在最后 (-) 30 **m** **inutes**中修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:02:07.463

您的触摸命令无法正常工作，我检查了时间戳，它们在我的时区中用于以下日期：

```
$ touch -t 02231249.00 /tmp/last30min
$ perl -e'print scalar localtime((stat("/tmp/last30min"))[9])'
Sat Feb 23 12:49:00 2013jamie@jamie-Ideapad-Z570:~/temp$ 
```

我认为这个命令会满足你的要求

```
for f in `find . -mmin -30 -print`;do echo $f;gzip -c $f > $HOME/$f.gz;done 
```

# forms - jQuery select2genemuFormBundle 问题

> ID：15039309
> 
> 赞同：0
> 
> 时间：2013-02-23T10:06:55.013
> 
> 标签：forms, jquery, symfony-2.1, jquery-select2

我正在尝试按照此示例使用 select2 实现 ajax 调用： [https ://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/jquery/select2/ajax.md](https://github.com/genemu/GenemuFormBundle/blob/master/Resources/doc/jquery/select2/ajax.md)

这是我的代码：

```
 var $configs = {{ configs|json_encode|raw }};

    $field = $('#{{ id }}');
    $configs = $.extend($configs, {
        ajax: {
            id: function (friend) { return friend.username; },
            url: $field.data('url'),
            data: function (term, page) {
                return { q: term, page_limit: 10, page: page };
            },
            results: function (data, page) {
                var more = (page * 10) < data.total;
                return { results: data, more: more };
            }
        },
        formatResult: function (friend) {
            var markup = "<div class='friend-results-box'>";
            if (friend.avatar !== undefined) {
            markup += "<img width='60' height='75' src='" + friend.avatar + "'/>";
            }
            markup += "<h5>" + friend.username + "</h5>";
            markup += "<div class'clearfix'></div>";
            markup += "</div>";
            return markup;
        },
        initSelection : function (element, callback) {
            var elementText = $(element).attr('data-init-text'); // ?
            callback({"term":elementText});
        },
        formatSelection: function (friend) { return friend.username; },
        escapeMarkup: function (m) { return m; },
        dropdownCssClass: "dropdown-friends"
    });

    $field.select2($configs); 
```

现在我的问题是：

1.  当我的意图是从 json 中获取的值被定义为friend.username 时，值正在用 ID 填充
2.  页面重新加载后初始值没有显示在屏幕上（因为值被设置为 ID）并且 select2 没有选择它

任何提示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:29:50.107

你的 initSelection 函数有这个： callback({"term":elementText});

默认情况下 Select2 需要 {id:"someid", text:"sometext"}

最好从没有任何格式的简单开始，让它工作，然后让它看起来像你想要的。

# android - 如何检查文件是否存在？

> ID：15039311
> 
> 赞同：1
> 
> 时间：2013-02-23T10:07:03.463
> 
> 标签：android, android-file

```
String extra=imagepath.get(i).toString();
String extra2=imageid.get(i).toString();
String path = "/mnt/sdcard/Android/data/com.example.webdata/files/Download/" + extra2 + ".jpg";
File f = new File(path);
if(f.exists())
{ 
    //Toast.makeText(getApplicationContext(), "File already exists....",
    //  Toast.LENGTH_SHORT).show();

}
else
{
    downloadfile();
} 
```

我正在使用上面的代码来检查文件是否存在。我用一个文件检查过它，它工作正常，但是当我在有多个（100-200）图像的应用程序中使用它时，它总是开始下载文件，无论它们是否存在。还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:20:59.767

首先检查文件夹中有多少图像：-

```
File extStore = Environment.getExternalStorageDirectory();
File[] imageDirs = extStore.listFiles(filterForImageFolders); 
```

在上面你运行循环并检查你的条件之后： -

```
for(int i=0;i<list.length;i++)
{
     // ur condition
} 
```

# html - 保存 html 画布图像

> ID：15039316
> 
> 赞同：3
> 
> 时间：2013-02-23T10:08:06.330
> 
> 标签：html, button, canvas, save

我知道这个问题可能已经有了答案，但我还没有找到答案，而且我的项目有截止日期。

所以我制作了一个 html5 画布，我希望能够用一个（或多个）按钮做两件事。我希望用户能够通过单击保存按钮来保存他刚刚所做的事情，理想情况下我希望下载图像（而不是必须右键单击和“将图像另存为”。这就是我到目前为止已经能够做到）。我还希望保存图像（可能保存到数据库？或服务器？我不知道它是如何工作的），以便绘图的一部分（或全部，取决于代码的难度）之前已经完成，下次其他人登录时使用（不一定是同一人，同一个IP）。这可能吗？

我对代码和自学非常陌生，因此对代码的任何额外评论以帮助我理解都会受到额外的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T10:33:13.590

`toDataUrl`关于第一个任务，您可以使用对象支持的方法将画布内容导出到图像`canvas`。

```
var canvas = document.getElementById("canvas");
if (canvas.getContext) {
    var ctx = canvas.getContext("2d");                // Get the context for the canvas.
    var myImage = canvas.toDataURL("image/png");      // Get the data as an image.
}

var image = document.getElementById("image");  // Get the image object.
image.src = myImage; 
```

至于第二个任务，在将画布保存到图像后，您可以使用 ajax 调用将结果图像上传到数据库中。这是一个如何使用它的简单示例：

```
$.ajax({  
        url: "upload.php",  
        type: "POST",  
        data: formdata,  
        processData: false,  
        contentType: false,  
        success: function (res) {  
            document.getElementById("response").innerHTML = res;  
        }  
    }); 
```

有关完整示例，请参阅以下文章：

[http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

[http://coursesweb.net/ajax/upload-images](http://coursesweb.net/ajax/upload-images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:32:55.043

您可能需要使用 JavaScript 和 PHP。我对这两个方面都不精通，所以我无法帮助你，但你应该查看有关如何在你的网站上制作数据库的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:22:20.277

我想你可能有兴趣看看 html5 文件 api：

[http://updates.html5rocks.com/2012/08/Integrating-input-type-file-with-the-Filesystem-API](http://updates.html5rocks.com/2012/08/Integrating-input-type-file-with-the-Filesystem-API)

它将允许您在没有服务器端代码的情况下处理您的问题。

（Rq：这不会解决你所有的问题。）

# android - 定义尺寸为 5″ - 7″ 的屏幕布局

> ID：15039318
> 
> 赞同：0
> 
> 时间：2013-02-23T10:08:13.873
> 
> 标签：android, android-layout

我想专门为尺寸为 5 - 7 英寸的屏幕定义不同的布局。我怎样才能做到这一点？

例如：对于尺寸超过 7 英寸的屏幕，我在`layout-sw6000dp`文件夹中定义了布局。我怎样才能对 5 - 7 英寸的屏幕做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:14:13.820

将它们放在 layout-large 中，并使用 dp 作为尺寸单位。

大号定义为 4.5-7 英寸：

[http://developer.android.com/guide/practices/screens_support.html#range](http://developer.android.com/guide/practices/screens_support.html#range)

对于 >7 英寸的布局，您还可以从使用 layout-sw600dp 更改为 layout-xlarge。

# java - 如何在此代码中输入文件？

> ID：15039319
> 
> 赞同：0
> 
> 时间：2013-02-23T10:08:26.480
> 
> 标签：java, eclipse, file-io

我仍然是 Java 新手，我有这个代码。我不知道如何将输入文件传递给代码。我正在使用 Eclipse Juno。

```
 public static void main(String[] args) {
    In in = new In(args[0]);      // input file
    int N = in.readInt();         // N-by-N percolation system

    // turn on animation mode
    StdDraw.show(0);

    // repeatedly read in sites to open and draw resulting system
    Percolation perc = new Percolation(N);
    draw(perc, N);
    StdDraw.show(DELAY);
    while (!in.isEmpty()) {
        int i = in.readInt();
        int j = in.readInt();
        perc.open(i, j);
        draw(perc, N);
        StdDraw.show(DELAY);
    }
} 
```

每当我运行它时，我都会得到这个异常：

> 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：PercolationVisualizer.main 中的 0（PercolationVisualizer.java:42）

什么可能导致此异常？能否请您耐心解释一下代码中如何调用输入文件的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:16:38.363

请参阅[本指南](http://www.cs.colostate.edu/helpdocs/cmd.pdf)以向您的程序添加参数。或者，您可以直接在代码中指定文件名，而不是从 args 中读取它。

基本上，该指南指示用户进入 Run 菜单，然后“Run...”（在最近的 Eclipse 版本中实际上是“Run Configurations...”），为所需项目选择适当的运行配置，单击 Arguments 选项卡，并在“程序参数”部分输入参数（例如文件名），以空格分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T22:53:20.687

对于使用 IntelliJ 的用户，您可以通过 Run->Edit Configuration 设置程序参数。向下看窗口中间以找到“程序参数”字段。然后添加测试文件的路径并保存。

# django - 我可以从 2 个不同的 apache vhost 提供一个 django 应用程序吗？

> ID：15039321
> 
> 赞同：4
> 
> 时间：2013-02-23T10:08:34.927
> 
> 标签：django, apache, mod-wsgi, vhosts

我有一个 django 应用程序，目前可`dev.mydomain.com`在`clientsdomain.com`. 我在 Ubuntu 上，所以我会运行`a2dissite dev.mydomain.com`，然后`a2ensite clientsdomain.com`.

我的虚拟主机文件是相同的，除了服务器名称 -

```
<VirtualHost 8.8.8.4>
    ServerName dev.mydomain.com
    #....
</virtualHost> 
```

和

```
<VirtualHost 8.8.8.4>
    ServerName clientdomain.com
    #....
</virtualHost> 
```

（显然那不是我的IP地址）

我只是想知道在从实时 vhost 运行我的应用程序之前是否真的必须关闭 dev vhost。我可以同时运行它们吗？同时启动它们是否有任何风险（如果可能的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:11:55.183

每个 Django 应用程序都会为进入其对应的 VirtualHost 的请求提供服务。所以不，理论上它们可以并行运行。

但是，您不会详细了解您的设置。例如，它们是否由同一个数据库支持？在这种情况下，您确实意识到了问题所在，对吧？

# c++ - 系统（“暂停”）说明

> ID：15039322
> 
> 赞同：2
> 
> 时间：2013-02-23T10:08:41.993
> 
> 标签：c++, system, onpause

当我使用系统（“暂停”）时，屏幕上会出现一行“按任意键继续...”。

这很烦人，并且使读取输出变得非常麻烦。

有什么办法可以阻止这种情况发生吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T10:11:24.713

您的意思是要按任意键继续，但屏幕上不显示“按任意键继续”？试试这个`getchar();`，这将捕获从键盘输入的一个字符并继续。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T10:13:08.743

而不是使用平台相关`system("pause")`，您可以使用平台独立`std::cin.get()`，如果缓冲区弄乱了它，您可以使用：

```
std::cin.ignore(std::numeric_limits<std::streamsize>::max(),'\n') 
```

之前清除缓冲区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T10:11:32.537

假设您使用的是 Windows，请将`system("pause")`.`system("pause > NULL")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-30T05:22:17.917

首先，你不应该**使用**它`system("pause")`，因为它很危险。您的代码将无缘无故地调用外部系统过程；破解者可以找到一种方法将“暂停”命令替换为其他命令，从而使您的程序以您的用户权限调用其他程序。

也就是说，您可以避免将消息发送到`null`设备。

*   在 Windows 上：

    暂停 > 无

如果你想大胆地让这个糟糕的系统调用可移植，你可以使用：

*   在 Linux 上：

    echo 按任意键继续...；读 x

现在您可以对两者应用**OR**和**AND**（逻辑连接词）并进行在两个系统上都有效的系统调用：

```
void pause(void)
{
    system("echo Press any key to continue . . . && ( read x 2> nul; rm nul || pause > nul )");
    return;
} 
```

Linux 将创建一个名为“nul”的临时文件，因为它无法识别此关键字。linux 上的空设备是`/dev/null`，而不仅仅是`nul`. 之后，该命令将删除这个带有`rm nul`. 因此，如果您碰巧`nul`在同一目录中命名了一个文件，请注意此命令对您不利（还有另一个原因）。

此命令模仿原始命令。如果您想避免该消息，只需删除`echo Pres...`它的一部分。

* * *

奖金：

*   使用便携式清除终端屏幕`system`？（不，不要出于同样的原因这样做。它很危险。）但出于测试目的，您可以使用：

`system("cls||clear");`

* * *

避免`pause`。C 是一种语言，是最强大的语言之一。我确信有一种方法可以`pause`只使用 C（`getchar()`或`scanf()`例如）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T10:13:08.187

该行是`system("pause")`. 您可以尝试不同的方法，例如`getline(std::cin, variable)`或`cin.get()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-29T16:43:50.317

采用

```
system("pause>nul") 
```

它非常适合窗户！

# c++ - 如何将工具栏按钮连接到另一个小部件的插槽？

> ID：15039324
> 
> 赞同：0
> 
> 时间：2013-02-23T10:09:16.417
> 
> 标签：c++, gtk, gtkmm

我正在尝试一些 Glade 和 GTKmm 的教程。现在我有一个带有工具栏的主窗口。这是我的主菜单。每个工具栏按钮都应该触发小部件的“显示”和“隐藏”选项。在这种情况下，我有一个名为 Overview 的小部件。那么，如何将 Toolbarbutton 信号连接到概览小部件的功能（插槽）？

[这是我已经拥有的一些代码。](http://pastebin.com/gM18UfiY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:39:53.633

只需连接一个信号：

```
tbtnOverview->signal_clicked().connect(wndOverview, &Overview::Method_To_Fire); 
```

# node.js - MissingSchemaError：填充时尚未为模型“用户”注册模式

> ID：15039336
> 
> 赞同：2
> 
> 时间：2013-02-23T10:11:02.080
> 
> 标签：node.js, mongoose, populate

我为创建用户和关注者和关注者编写模型

```
 var UserSchema = new Schema({
created_at : { type: Date, default: Date.now }
, name : String
,   hashedPass : String
,   salt: String
,   email : Email
,   avatar : {type: String, default: "images/default_profile.png" }
,   statuses_count : Number
,   screen_name : String
,   location : String
,   about : String
,   followers: [{ type: ObjectId, ref: 'Users' }]
,   following: [{ type: ObjectId, ref: 'Users' }]
,   followers_count : Number
,   following_count : Number
}); 
```

并在用户中创建关注我做

```
UserSchema.statics.createFollowing = function(data, callback) {
    console.log("data: ", data);
    this.findOne({
        name : data.name
    }, function(err, docs) {
        if (err)
            callback("error " + err)
        else if (docs) {
            docs.following.push({"_id" : data.name_follow});                
            docs.save(function(err) {                       
                            if (err)
                                callback(err);
                            console.log("___cxxx_____", this);
                            mongoose.model('User').findOne({
                                    _id : docs._id
                                }).populate('following', 'name screen_name avatar').exec(function(err, docs) {
                                    if (err)
                                        callback(err);
                                    console.log('The creator is %s', docs.following)
                                    callback(docs);
                                });
                        }); 
        }
    });
} 
```

当我要求这样

```
http://localhost:3000/auth/createfollowing?callback=jQuery16104670869295950979_1361607659796&{"name":"testuser1","name_follow":"envatowebdev","token":"ece20af054339bb52d4feee9a05ab8cc401f8dec6b622b8df1e4c0d1789825bee8dd47f572cdc737a098a5be03044596","device":"xphone"}&_=1361607667778 
```

我就这样回来

```
 Mongoose: users.findOne({ _id: ObjectId("5128781fcb8c95909c00000e") }) { fields: undefined, safe: undefined }  

/data/workspace/node/serverjs/node_modules/mongoose/lib/utils.js:397
        throw err;
              ^
MissingSchemaError: Schema hasn't been registered for model "Users".
Use mongoose.model(name, schema)
    at NativeConnection.Connection.model (/data/workspace/node/serverjs/node_modules/mongoose/lib/connection.js:597:11)
    at model.populate [as _populate] (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:150:23)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:269:14)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at next (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:232:57)
    at init (/data/workspace/node/serverjs/node_modules/mongoose/lib/model.js:215:12) 
```

我不知道为什么会这样以及如何填充追随者和追随者。预先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T10:54:46.240

问题是这里模型是用户，但我分配了用户关注者：[{ type: ObjectId, ref: **'Users'** }]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T19:32:20.550

对于那些使用 MEAN.js 的人来说，@sepdau 是正确的，但您必须再添加一件事。例如，如果你想创建一个模型，它的字段是 Unicorns 数组，这将是正确的语法：

```
var StackOverflowSchema = new Schema({
    title: {
        type: String,
        default: 'StackOverflow',
        trim: true,
        required: 'Name cannot be blank'
    },
    unicorns: [{ type: Schema.ObjectId, ref: 'Unicorn' }]
}); 
```

# networking - Zigbee 网状网络

> ID：15039339
> 
> 赞同：1
> 
> 时间：2013-02-23T10:11:24.047
> 
> 标签：networking, zigbee

我正在为固定轨道上的跑步比赛申请。我正在研究可以使用哪些系统，以及使用包含 GPS/DGPS 模块和支持 Zigbee 的芯片的棒将位置传达给服务器的困难。

我已经研究过这个主题（在互联网上），但我想知道是否有人对在动态环境中使用 Zigbee 网状/星形拓扑有一些实用的建议/经验，这可以应用于这个用例。我也对使用网状拓扑非常感兴趣，其中数据通过不同的 Zigbee 模块传输（跳跃）到服务器。

跑步者拿着一根棍子；在赛道上跑来跑去，然后将棍子传递给下一个团队成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:09:26.973

我不是特别清楚你的目标。但我想说几句。

首先，使用 GPS/DGPS 测量哪支队伍到达终点线是不准确的。原始 GPS 数据的准确性很差（在 1 到 10 米范围内变化），GPS 模块的采样率也很低（比如每秒一次？）你如何准确地确定哪个团队首先到达终点线?

其次，使用移动 ZigBee 芯片进行实时通信是困难的。我假设你的棒有一个 ZigBee 终端设备。当它移动时（在您的情况下非常快），它必须动态地找到并与新的父路由器关联，这需要时间并且取决于无线环境，它可能涉及多次重试。所以你会想象一个数据包在 100 毫秒甚至 1 秒后才成功传送到另一端。如果您的手杖记录了团队到达终点线的确切时间，这可能不是问题。由于您在摇杆中有一个 GPS 模块，因此获得非常准确的时间没有问题。

# java - 是否可以在同一帧中打开一个新的 fxml 文件

> ID：15039344
> 
> 赞同：0
> 
> 时间：2013-02-23T10:11:51.620
> 
> 标签：java, javafx-2, javafx

我已经在锚窗格中创建了 fxml 文件，但是每次单击按钮时，我都会在新框架中获得下一个 fxml，我希望它在同一框架中打开

```
public void baropen(ActionEvent event) {
    // handle the event here
    BorderPane bp = new BorderPane();
    bp.setPadding(new Insets(10, 50, 50, 50));

    Stage stage = new Stage();
    Scene scene ;
    // scene= new Scene(root);
    scene = new Scene(bp);
    stage.setScene(scene);
    stage.show(); 
    try {
        new RecBar().start(stage);
    } catch (Exception ex) {
        Logger.getLogger(RecController.class.getName()).log(Level.SEVERE, null,ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T10:42:14.243

只需创建一个`Stage`，当您想用新的 fxml 替换舞台的内容时，将新的 fxml 加载到新的`Scene`并调用`stage.setScene`.

这是一个剧院的隐喻——想象你正在看一场戏剧——这是罗密欧与朱丽叶，大幕拉开，你看到了第一个场景（维罗纳的一个带有喷泉的广场）。稍后，窗帘拉下，小家伙们跑来跑去换东西，窗帘升起，你看到了一个新的场景（朱丽叶卧室的阳台）。场景变了，但舞台没有——只有一个舞台和多个场景。

# newline - 使用哪个行尾/换行符？

> ID：15039346
> 
> 赞同：2
> 
> 时间：2013-02-23T10:12:10.937
> 
> 标签：newline, line-endings, eol

网络上到处都是关于换行分裂历史的解释。但我找不到答案，世界是否最终同意一个标准来结束一条线。

给定一个在 linux 和 windows 机器上开发和使用的 Java 项目。哪个是源文件中换行符的最佳选择：cr 还是 crlf？

在已经存在的代码库中将所有 crlf 转换为 cr 是否有意义？也许与 SVN 到 Git 迁移一起执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:42:35.223

每个文件的 EOL 都是单独的

```
 | svn:eol-style |  Git attributes
For source code files --- native EOLs  |   native      |  !eol
For bash scripts --- LFs               |     LF        |  eol=lf
For bat scripts --- CRLFs              |    CRLF       |  eol=crlf
For binary files                       |  <not set>    |  -text 
```

[有关详细信息，请查看有关 EOL](http://blog.subgit.com/line-endings-handling-in-svn-git-and-subgit/)的这篇文章。

还可以查看 SVNKit 存储库 (git clone [http://svn.svnkit.com/git/svnkit](http://svn.svnkit.com/git/svnkit) ) 中的 .gitattributes 作为在 EOL 中良好使用 Git 属性的示例。

# mysql - symfony 学说实体数据库防止重复内容

> ID：15039348
> 
> 赞同：0
> 
> 时间：2013-02-23T10:12:27.763
> 
> 标签：mysql, symfony, doctrine, entity, duplicates

嗨，我从 DB 中选择了一些数据，但我看到有重复的内容......它不应该在那里！

所以我的问题很简单：

如何删除所有重复的内容？

+

我如何设置不会再次发生这种情况的键：

[http://www.upnito.sk/0/wcz6ffyacg5pr6kpzugd4wdt5rfps9nd.png](http://www.upnito.sk/0/wcz6ffyacg5pr6kpzugd4wdt5rfps9nd.png)

顺便说一句：可以有 37 25、37 38、37 37、37 40 ......只有不可能是图像情况。

谢谢！

# bittorrent - BitTorrent 协议中字节的含义

> ID：15039349
> 
> 赞同：3
> 
> 时间：2013-02-23T10:12:33.657
> 
> 标签：bittorrent

我将尝试编写简单的 BitTorrent 客户端。我当然读[http://wiki.theory.org/BitTorrentSpecification](http://wiki.theory.org/BitTorrentSpecification)。我首先分析两个客户之间的通信。我对两个字段的含义有疑问 - 以下十六进制转储中的粗体字体。

* * *

Deluge 向 rTorrent 发送的第一个数据包：

```
00000000 13 |。| - 协议名称长度 (1) - 0x13 = 19

00000000 42 69 74 54 6f 72 72 65 6e 74 20 70 72 6f 74 | BitTorrent 保护| - 协议名称 (19)
00000010 6f 63 6f 6c |ocol |

00000010 00 00 00 00 00 18 00 05 | ........ | - 保留的扩展字节 (8)

00000010 ab 20 ef 66 | . .f| - info_hash (20)
00000020 c8 ee de 47 99 a2 75 40 20 75 ee 7b c6 4e 2f dd |...G..u@ u.{.N/.|   

00000030 2d 44 45 31 33 33 30 2d 42 6c 78 37 6c 69 7a 7e |-DE1330-Blx7liz~| - peer_id (20)
00000040 4a 54 2e 6a |JT.j| 洪水 1.3.3

```

* * *

rTorrent 对 Deluge 的回答：

```
00000000 13 |。| - 协议名称长度 (1) - 0x13 = 19

00000000 42 69 74 54 6f 72 72 65 6e 74 20 70 72 6f 74 | BitTorrent 保护| - 协议名称 (19)
00000010 6f 63 6f 6c |ocol |

00000010 00 00 00 00 00 10 00 00 | ........ | - 保留的扩展字节 (8)

00000010 ab 20 ef 66 | . .f| - info_hash (20)
00000020 c8 ee de 47 99 a2 75 40 20 75 ee 7b c6 4e 2f dd |...G..u@ u.{.N/.|

00000030 2d 6c 74 30 43 39 30 2d b6 eb 22 ae 31 e3 89 90 |-lt0C90-..".1...| - peer_id (20)
00000040 2a 9b a9 |*... | libTorrent (rakshasa) 0.12.9

00000040 00 00 00 6e | ...n | - 消息长度？(4) - 0x6E = 110

00000040                            14 00                     | .. | - 某事 (2) - 消息 ID？

00000040 64 31 3a 65 69 30 | d1:ei0| - 编码字典（108）
00000050 65 31 3a 6d 64 31 31 3a 75 74 5f 6d 65 74 61 64 |e1:md11:ut_metad| {'e'：0，
00000060 61 74 61 69 32 65 36 3a 75 74 5f 70 65 78 69 31 |atai2e6:ut_pexi1| “元数据大小”：1702，
00000070 65 65 31 33 3a 6d 65 74 61 64 61 74 61 5f 73 69 |ee13:metadata_si| 'm': {'ut_metadata': 2, 'ut_pex': 1},
00000080 7a 65 69 31 37 30 32 65 31 3a 70 69 35 30 30 39 |zei1702e1:pi5009| 'reqq': 2048,
00000090 34 65 34 3a 72 65 71 71 69 32 30 34 38 65 31 3a |4e4:reqqi2048e1:| “p”：50094，
000000a0 76 31 37 3a 6c 69 62 54 6f 72 72 65 6e 74 20 30 |v17:libTorrent 0| 'v': 'libTorrent 0.12.9' }
000000b0 2e 31 32 2e 39 65 |.12.9e |        

000000b0                     00 00 00 0c 05                  | .....| - 某事 (5) - 校验和？

```

# html - ：悬停不工作

> ID：15039351
> 
> 赞同：3
> 
> 时间：2013-02-23T10:12:40.457
> 
> 标签：html, css, styles, hover

:hover 在应用于我的样式时不起作用：

[http://jsfiddle.net/E9DXJ/](http://jsfiddle.net/E9DXJ/)

```
<nav>
<div class="container">
    <div class="row-fluid center">
        <div id="navcontainerimg" class="span12 center">
            <img src="img/hs-header.png"/>
        </div>
        <div id="navcontainernav" class="span12 center">
            <span class="topleft">Our Story</span>
            <span class="topright">Awesome Support!</span>
            <span class="bottomleft">Read the Blog!</span>
            <span class="bottomright">Join Now</span>
        </div>
    </div>
</div> 
```

这些类可以在没有 :hover 的情况下设置样式，但是添加后它什么也不做。如果我在 chrome 中单击 :hover 样式显示，它将在那里显示，但不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T10:18:47.910

这是因为您`z-index`为容器设置了负数，因此 Chrome 基本上不会识别悬停事件。

将其更改为：

```
#navcontainernav    
{
    width: 720px;
    margin-left: 40px;
    height: 170px;
    top: -233px;
    border-radius: 8px;
    position: relative;
    z-index: 1;
} 
```

或任何其他正值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T10:23:34.103

更改#navcontainernav z-index：-5；到 z-index: 1;

这适用于所有浏览器

# meteor - 如何在 Meteor 中使用 NodeJS 模块？

> ID：15039352
> 
> 赞同：1
> 
> 时间：2013-02-23T10:12:56.300
> 
> 标签：meteor

在一个 NodeJS 应用程序中，我已经完成了一些模块，现在我想在 Meteor 中使用它们，我该怎么办？例如，有一个文件'hello.js'，内容：

```
require('url');// In here,require other modules
function sayHi(name){
       console.log("Hi "+ name);
}
exports.sayHi = sayHi; 
```

如何在流星中使用“say Hi”？

当我这样做时：

```
if (Meteor.isServer) {
       Meteor.startup(function () {
       var require = __meteor_bootstrap__.require;
       var index = require('./hello');
       hello.syaHi('Ec');})} 
```

错误是：

```
应用程序/index.js:1
要求（）;
^
ReferenceError：未定义要求
    在 app/index.js:1:1
    在/home/huyinghuan/workspace/NodeJs/myMeteorJS/testrequire/.meteor/local/build/server/server.js:113:21
    在 Array.forEach （本机）
    在 Function._.each._.forEach (/usr/lib/meteor/lib/node_modules/underscore/underscore.js:79:11)
    运行时（/home/huyinghuan/workspace/NodeJs/myMeteorJS/testrequire/.meteor/local/build/server/server.js:99:7）
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:56:35.187

我认为，您必须安装/复制您的模块`projectdir/.meteor/local/build/server/node_modules`，其中链接到`/usr/local/meteor/lib/node_modules`. 我用 node.js 模块尝试了这个`tracer`并且它有效。每次更新流星安装时，都必须将文件复制到此目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T14:45:01.240

此外，现在似乎`Npm.require()`是需要节点模块的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T00:13:10.283

更新，我必须将我的模块安装到 .meteor/local/build/programs/server/node_modules 以及使用 Npm.require。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-23T03:14:27.957

这是一个包，它使在 Meteor 中使用 NPM 包变得更加容易：

[https://github.com/meteorhacks/npm](https://github.com/meteorhacks/npm)

示例用法：

```
if (Meteor.isClient) {
  getGists = function getGists(user, callback) {
    Meteor.call('getGists', user, callback);
  }
}

if (Meteor.isServer) {
  Meteor.methods({
    'getGists': function getGists(user) {
      var GithubApi = Meteor.npmRequire('github');
      var github = new GithubApi({
          version: "3.0.0"
      });

      var gists = Async.runSync(function(done) {
        github.gists.getFromUser({user: 'arunoda'}, function(err, data) {
          done(null, data);
        });
      });

      return gists.result;
    }
  });
} 
```

# java - 启动新游戏 2.1 项目时出错

> ID：15039362
> 
> 赞同：8
> 
> 时间：2013-02-23T10:13:41.810
> 
> 标签：java, playframework-2.1

我正在使用 play framework 2.1.0，我使用命令 play new myfirstapp 创建了新项目，然后我选择了 2 个选项来创建简单的 java 项目，因此它创建了项目

现在，当我通过命令 play run 开始播放时，我得到以下输出

```
C:\development\application\firstApp\helloworld>play run
[info] Loading project definition from C:\development\application\firstApp\helloworld\project
[info] Set current project to helloworld (in build file:/C:/development/application/firstApp/helloworld/)

Cannot load the JNotify native library (C:\development\Play%20framework\repository\local\net.contentobjects.jnotify\jnotify\0.94\jars\jnotify.jar (The system cannot find the file specified))
Play will check file changes for each request, so expect degraded reloading performace.

--- (Running the application from SBT, auto-reloading is enabled) ---

[info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9000

(Server started, use Ctrl+D to stop and go back to the console...) 
```

现在，当我点击 localhost:9000 时，它在网络浏览器上给了我以下**异常**

请在此处找到图片：

![在此处输入图像描述](../Images/b127202d054945a6f2e8ab7731f2955b.png)

它已成为我走得更远的瓶颈，请帮助我解决这个问题。关于我的工作站的更多信息

*   它的 windows 8 64 位
*   JDK 7

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-23T13:38:38.660

您应该尝试将 Play 放在没有空格的路径中（C:\development\playframework）。

Play2 + windows + 空间不是好朋友 ;)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-16T20:59:09.937

通过转到开始菜单并写入来打开 IIS `IIS (INTERNET INFORMATION SERVICE)`，停止服务，然后刷新页面 (F5)。

# c++ - 泛化模型中的数据访问。避免宏的方法？

> ID：15039365
> 
> 赞同：0
> 
> 时间：2013-02-23T10:14:03.017
> 
> 标签：c++, qt, c++11, macros

我编写了一个 QAbstractItemModel 子类，它可以通过控制器访问处理任何数据。基本上 - 控制器是实际模板类派生的抽象接口。为了为控制器提供访问功能，我正在创建一系列基于 lambda 的 getter/setter，例如：

```
holder->AddGetter(QPair<int,int>(0,0),
                          [] (const Builtin* data)
{
    if(data)
        return QVariant(data->uml);
    else
        return QVariant();
}
);
holder->AddSetter(QPair<int,int>(0,0),
                          [] (Builtin* data, QVariant value)
{
    if(data)
        data->uml = value.toString();
}
);
holder->AddGetter(QPair<int,int>(1,0),
                              [] (const Builtin* data)
{
    if(data)
        return QVariant(data->cpp);
    else
        return QVariant();
}
);
holder->AddSetter(QPair<int,int>(1,0),
                          [] (Builtin* data, QVariant value)
{
    if(data)
        data->cpp= value.toString();
}
);
....
holder->AddGetter(QPair<int,int>(N,0),
                              [] (const Builtin* data)
.... 
```

这确实解决了泛化问题，但在代码中看起来*非常*丑陋且难以使用，所以我不得不创建一个宏：

```
#define ADD_STRING_GETSET(X,Y,Z)  \
X->AddGetter(QPair<int,int>(Y,0), \
[] (const Builtin* data) \
{ \
    if(data) \
        return QVariant(data->Z); \
    else \
        return QVariant(); \
} \
); \
X->AddSetter(QPair<int,int>(Y,0), \
[] (Builtin* data, QVariant value) \
{ \
    if(data) \
        data->Z = value.toString(); \
} \
); \ 
```

现在我可以写：

```
ADD_STRING_GETSET(holder, 0, firstParam);
....
ADD_STRING_GETSET(holder, N, NthParam); 
```

但是......好吧，这是一个宏......

有没有办法在没有宏的情况下解决原始方法的笨拙问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:23:34.900

您必须将指向成员函数或另一个 lambda 的指针传递给替换函数才能访问`NthParam`- 这同样丑陋。

我有一些非常相似的代码，我选择使用宏。它们通常不受欢迎，因为它们难以调试，容易出错，并且可能导致代码膨胀 - 但如果你高兴你的宏不会引发这些问题，那么它们在 C++ 中没有任何问题。

# linux - VirtualBox(Ubuntu) 与实际 Ubuntu 的比较

> ID：15039368
> 
> 赞同：0
> 
> 时间：2013-02-23T10:14:25.070
> 
> 标签：linux, virtualbox

我有带有 Ubuntu 的 Virtual Box 的 Window 7 OS。当我在虚拟框中执行代码时，需要 5.9 秒。当我在实际的 ubuntu 操作系统上执行相同的代码时，需要 2.9 秒。我检查了 CPU 信息。在 Virtual Box 中，它的 CPU 速度为 2968.448 MHZ，而在实际的 ubuntu 操作系统上，它的速度为 1600 MHz。

有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:22:36.910

Cpu 速度当然不是代码执行的全部。ubuntu 在不使用处理器时很有可能会对其进行降频以节省电池。

打开终端，粘贴这个然后回车

```
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq 
```

也许[这](http://www.deltalounge.net/wpress/2012/09/virtualbox-improve-virtual-machine-performance/)可以帮助您提高绩效。

# iphone - 从 iPhone 中的 UIDatePicker 显示工作日

> ID：15039370
> 
> 赞同：0
> 
> 时间：2013-02-23T10:14:55.063
> 
> 标签：iphone, ios, objective-c

我想从 UIDatePicker 以下格式显示选定的日期。这怎么可能？请帮帮我格式是：`Sat Feb 23 3:42 PM`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T14:46:48.527

这是您想要的输出的代码：

```
NSDate *chosen = [datePicker date];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE MMM dd hh:mm a"];

NSString *formated_date  = [formatter stringFromDate:chosen];

NSLog(@"formated date is : %@", formated_date]; 
```

您可以通过阅读以下链接更改日期格式：http: [//unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:23:14.747

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ;   
NSDateComponents *components = [gregorian components:unitFlags fromDate:yourPickerDate];
 NSInteger yourWeekDay = [components weekday]; 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T10:23:38.300

```
NSDateFomatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setFormat:@"DDD MMM dd mm:ss aa"];
NSString *dateString = [dateFormatter stringFromDate:date]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:53:33.980

我得到了它....

NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];

[dateFormat setDateFormat:@"EEE MMM dd hh:mm aa"];

NSLog(@"格式为：%@",[dateFormat stringFromDate:datePicker.date]);

# python - QUdpSocket pyqt qt

> ID：15039371
> 
> 赞同：1
> 
> 时间：2013-02-23T10:14:59.960
> 
> 标签：python, pyqt, pyqt4

嗨，希望有人可以帮助我，我正在编写一个小 gui，它将绘制通过 UDP 套接字发送的数据。我决定使用 PyQt 的 QUdpSocket 来实现这一点。我使用了示例代码（我用来测试我的服务器），然后剥离了 gui。

```
from PyQt4 import QtNetwork

class graphUDP(QtNetwork.QUdpSocket):

def __init__(self, parent=None):
    super(graphUDP, self).__init__(parent)

    self.udpSocket = QtNetwork.QUdpSocket(self)
    self.udpSocket.bind(8888)

    self.udpSocket.readyRead.connect(self.processPendingDatagrams)

    print "All ok line 20"

def processPendingDatagrams(self):
    print "line 23 All ok"

    while self.udpSocket.hasPendingDatagrams():
        datagram, host, port = self.udpSocket.readDatagram(self.udpSocket.pendingDatagramSize())

        print "All ok line 28"
        print datagram

if __name__ == '__main__':

import sys
graphRun = graphUDP()
graphRun 
```

我放入了一些调试行以查看发生了什么，看起来类被实例化但信号和插槽未连接以触发函数。我已经超出了我的深度并且在圈子里跑来跑去有任何想法/指针吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:59:54.507

为什么要扩展QUdpSocket，然后在你的构造函数中实例化一个新的QUdpSocket？这真的没有任何意义。

首先决定如何创建你的类以及如何实例化它。

除此之外，我看不出它为什么不起作用的任何问题。

此外，您在底部“主要”部分的对齐方式是错误的。通常 QT 要求您在使用任何其他 QT 类之前创建一个 QApplication。

# wordpress - 如何在 WordPress 中显示上一个和下一个链接

> ID：15039372
> 
> 赞同：0
> 
> 时间：2013-02-23T10:15:40.263
> 
> 标签：wordpress

下面是我动态获取帖子的示例代码。

```
<?php

    global $post;
    $args = array( 'numberposts' => 4 );
    $the_posts = get_posts( $args );

    foreach( $the_posts as $post ){ ?>

    //The Post Content Goes here...

?> 
```

上面的代码可以正常工作，但我的问题是，由于这不是默认的博客页面或类别，我如何使用 posts_nav_link() 以便我仍然可以访问其余页面？我尝试使用它，但除非当前页面是一个类别，否则它不起作用。希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:25:04.743

如果您在自定义帖子类型中给您分页。然后我认为你可以做的很简单，你必须使用像**wp-pagenavi**这样的 wordpress 插件，然后在管理面板的这个插件中添加你的自定义帖子类型，然后添加

```
<div class="pagination">
    <?php wp_pagenavi(); ?>
</div>

<?php

    global $post;
    $args = array( 'numberposts' => 4 );
    $the_posts = get_posts( $args );

    foreach( $the_posts as $post ){ ?>

    //The Post Content Goes here...

?>

<div class="pagination">
    <?php wp_pagenavi(); ?>
</div> 
```

**没有插件你可以这样使用**

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

$loop = new WP_Query( array( 'post_type' => 'post', 'posts_per_page' => 3, 'cat' => '-10, -72&paged=' . $paged) ); ?>

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

<li>
<a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_post_thumbnail(); ?> <?php the_title(); ?></a>
<span><?php the_time('d.m.y') ?></span>
</li>

<?php endwhile; ?>
</ul>
</div>
<?php posts_nav_link(' — ', __('&laquo; Previous Page'), __('Next Page &raquo;')); ?> 
```

# iphone - 调用 connectionDidFinishLoading 后更新视图控制器

> ID：15039374
> 
> 赞同：0
> 
> 时间：2013-02-23T10:15:55.323
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我正在尝试异步加载网页内容。一旦调用了 connectionDidFinishLoading 方法，我不确定如何更新视图控制器中的标签/其他内容。在下面的示例中，我只是尝试更新标签以显示内容已加载。我该怎么做？谢谢！

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeeded! Received %d bytes of data",[responseData
                                                   length]);
    NSString *txt = [[NSString alloc] initWithData:responseData encoding: 
    NSASCIIStringEncoding];

    label.text = @"DISPLAY THIS WHEN FINISHED";  
} 
```

有人告诉我让我的 viewController 成为 NSURLConnectionDelegate，然后从 viewDidLoad 运行 fetchData 方法，然后使用在 connectionDidFinishLoading 中获取数据时为我们获取数据的数据。有谁知道从哪里开始？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:46:15.457

正如 Ramy 正确指出的那样，您必须在主线程上更新您的 UI，然后：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
   NSLog(@"Succeeded! Received %d bytes of data",[responseData length]);
   NSString *txt = [[NSString alloc] initWithData:responseData 
                                         encoding: NSASCIIStringEncoding];

  NSString *text = @"DISPLAY THIS WHEN FINISHED";
  [label performSelectorOnMainThread:@selector(setText:) withObject:text waitUntilDone:NO]
} 
```

# actionscript-3 - flexUnit 纯 AS3 IntelliJ

> ID：15039375
> 
> 赞同：1
> 
> 时间：2013-02-23T10:15:56.617
> 
> 标签：actionscript-3, intellij-idea, flexunit, robotlegs, flexunit4

是否可以在 IntelliJ 中使用 FlexUnit 4.1，并将项目设置为 Pure AS3，这意味着没有 Flex Runner。

我得到的是一个错误

```
Error #1065: Variable mx.core::FlexVersion is not defined.
ReferenceError: Error #1065: Variable mx.core::FlexVersion is not defined. 
```

但是，如果我从模块设置中取消选中 Pure AS3，一切正常。我检查纯AS3的原因是我没有获得Flex完成，并且可能有我仍然不知道的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T20:09:01.583

我假设您的灵感是在 Hudson、Bamboo 或 TeamCity 等持续集成系统上运行它。

您需要一个窗口环境，但有一些解决方法可以提供一个。

查看这个 FlexUnit Wiki： [http ://docs.flexunit.org/index.php?title=Continuous_Integration_Support](http://docs.flexunit.org/index.php?title=Continuous_Integration_Support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T19:39:23.410

说得通。如果您使用纯 actionscript 选项，则有很多 flex 库会被遗漏。

您几乎错过了从 spark 和许多利用 mxml 方法到可视化方面的类可能想要的任何东西。

到目前为止，我猜您已经研究并找到了您丢失的类并包装了代码以不使用它们，但也许其他人抓住他们的眼睛会很高兴知道当您切换时 IntelliJ 排除的内容存在相当大的差异到“纯动作脚本”。

当然，AS3 文档不会真正涵盖该 AFAIK，因为其目的是您将同时使用 mxml 和 AS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T15:46:53.367

我在纯 AS3 环境中遇到了同样的问题。添加：

-define+=CONFIG::useFlexClasses,false

在模块的编译器选项中并注释掉可能导入的 flex 类对我有用。

mx.core.FlexVersion 可能会抛出错误，所以我只是将这些行注释掉。

# xaml - 当 Height 为 0 时，ScrollViewer 仍然可见

> ID：15039378
> 
> 赞同：1
> 
> 时间：2013-02-23T10:16:14.090
> 
> 标签：xaml, windows-phone-8

它很容易复制。只需创建一个新项目并粘贴以下代码：

```
<StackPanel Grid.Row="0" Name="Header" Height="0">
    <TextBlock Text="This text is hidden" />
    <ScrollViewer>
        <TextBlock Margin="2" TextWrapping="Wrap" FontSize="32" Text="This text isn't."/>
    </ScrollViewer>
</StackPanel> 
```

问题是 stact 面板高度为 0，因此内容应该是不可见的。
我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:53:14.380

听起来您正试图使 ScrollViewer 及其内容在 StackPanel 的高度变为零时消失。如果是这种情况，那么只需触发 StackPanel 的 SizeChanged 事件来处理何时应该显示或隐藏 Scrollviewer。

```
 private void Header_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        if (Header.Height.Equals(0))
        {
            scroller.Visibility = System.Windows.Visibility.Collapsed;
        }
        else
        {
            scroller.Visibility = System.Windows.Visibility.Visible;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:52:14.977

只是搞乱设置。
发现通过添加`CacheMode="BitmapCache"`工作`Stackpanel`。
谷歌搜索了一下，考虑到性能，似乎不建议这样做。
仍在寻找正确的答案；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:47:17.497

如果要使`StackPanel`不可见，请改为设置`Visibility`为 `Collapsed`。`ScrollViewer`或者您希望在某些情况下使不可见？

# python - 如果 RAM 不是问题，是逐行读取更快还是将所有内容读入 RAM 并访问它？- Python

> ID：15039380
> 
> 赞同：14
> 
> 时间：2013-02-23T10:16:46.517
> 
> 标签：python, performance, file-io, unicode, ram

如果 RAM 不是问题（我在服务器上接近 200GB），是逐行读取更快还是将所有内容读入 RAM 并访问它？每行将是一个大约 200-500 个 unicode 字符的字符串。每个文件有近 200 万行。

**逐行**

```
import codecs
for i in codecs.open('unicodefile','r','utf8'):
  print i 
```

**读入 RAM**

```
import codecs
for i in codecs.open('unicodefile','r','utf8').readlines():
  print i 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-23T10:52:20.050

我在一个~1MB 的字典单词文件上使用了 cProfile。我读了同一个文件 3 次。第一个读取整个文件，以将其存储在缓存中。这是简单的代码：

```
def first_read():
    codecs.open(file, 'r', 'utf8').readlines()

def line_by_line():
    for i in codecs.open(file, 'r', 'utf8'):
        pass

def at_once():
    for i in codecs.open(file, 'r', 'utf8').readlines():
        pass

first_read()
cProfile.run('line_by_line()')
cProfile.run('at_once()') 
```

结果如下：

**逐行：**

```
 366959 function calls in 1.762 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    1.762    1.762 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 codecs.py:322(__init__)
        1    0.000    0.000    0.000    0.000 codecs.py:395(__init__)
    14093    0.087    0.000    0.131    0.000 codecs.py:424(read)
    57448    0.285    0.000    0.566    0.000 codecs.py:503(readline)
    57448    0.444    0.000    1.010    0.000 codecs.py:612(next)
        1    0.000    0.000    0.000    0.000 codecs.py:651(__init__)
    57448    0.381    0.000    1.390    0.000 codecs.py:681(next)
        1    0.000    0.000    0.000    0.000 codecs.py:686(__iter__)
        1    0.000    0.000    0.000    0.000 codecs.py:841(open)
        1    0.372    0.372    1.762    1.762 test.py:9(line_by_line)
    13316    0.011    0.000    0.023    0.000 utf_8.py:15(decode)
        1    0.000    0.000    0.000    0.000 {_codecs.lookup}
    27385    0.027    0.000    0.027    0.000 {_codecs.utf_8_decode}
    98895    0.011    0.000    0.011    0.000 {len}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
    13316    0.099    0.000    0.122    0.000 {method 'endswith' of 'unicode' objects}
       27    0.000    0.000    0.000    0.000 {method 'join' of 'str' objects}
    14069    0.027    0.000    0.027    0.000 {method 'read' of 'file' objects}
    13504    0.020    0.000    0.020    0.000 {method 'splitlines' of 'unicode' objects}
        1    0.000    0.000    0.000    0.000 {open} 
```

**一次全部：**

```
 15 function calls in 0.023 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.023    0.023 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 codecs.py:322(__init__)
        1    0.000    0.000    0.000    0.000 codecs.py:395(__init__)
        1    0.000    0.000    0.003    0.003 codecs.py:424(read)
        1    0.000    0.000    0.014    0.014 codecs.py:576(readlines)
        1    0.000    0.000    0.000    0.000 codecs.py:651(__init__)
        1    0.000    0.000    0.014    0.014 codecs.py:677(readlines)
        1    0.000    0.000    0.000    0.000 codecs.py:841(open)
        1    0.009    0.009    0.023    0.023 test.py:13(at_once)
        1    0.000    0.000    0.000    0.000 {_codecs.lookup}
        1    0.003    0.003    0.003    0.003 {_codecs.utf_8_decode}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        1    0.001    0.001    0.001    0.001 {method 'read' of 'file' objects}
        1    0.010    0.010    0.010    0.010 {method 'splitlines' of 'unicode' objects}
        1    0.000    0.000    0.000    0.000 {open} 
```

从结果中可以看出，一次读取整个文件要快得多，但您会冒着文件中抛出 MemoryError 的风险太大。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T10:32:21.093

没有什么能阻止你在你的机器上测试这个。我创建了一个文件，每个文件有 1M 行，结果为

```
time python something.py > /dev/null 
```

是：

逐行：

```
real    0m4.878s
user    0m4.860s
sys     0m0.008s 
```

读入 RAM：

```
real    0m0.981s
user    0m0.828s
sys     0m0.148s 
```

尝试使用 2M 行，每行 300 个字符时出现 MemoryError，但以上表明读入 RAM 会更快。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T17:52:05.260

查看 OP 发布的示例代码，我认为对 Python 正在做什么存在误解。

IE：

“逐行阅读”

```
import codecs
for i in codecs.open('unicodefile','r','utf8'):
  print i 
```

上面看起来像是逐行读取。但是，Python 将此解释为“将尽可能多的文件读入内存，然后将每个文件作为一行处理”。所以实际上，上面的 for 循环将所有内容读入内存。

“读入 RAM”

```
import codecs
for i in codecs.open('unicodefile','r','utf8').readlines():
  print i 
```

我相信上面的内容实际上与上面的“逐行”示例相同。即，Python 将其全部读入内存。

如果您想逐行测试性能，则需要“readline()”而不是“readlines()”或未指定的 for 循环，这可能意味着“readlines()”。这在 StackOverflow 站点的其他地方都有说明。

要考虑的另一个方面是文件系统缓冲。如果您对同一个文件运行相同的代码，那么您将面临文件系统缓冲污染结果的风险。正如您所说，您有 200GB 的内存，足以缓冲足够的文件以影响运行结果。

您需要执行以下操作以确保测试结果干净：

1）将大文件从已知来源复制到新文件名。（文件系统必须不是 COW 文件系统。） 2）刷新文件系统缓存 3）对文件运行第一个测试。4) 删除文件 5) 将文件从源重新复制到另一个新文件名。6) 刷新文件系统缓存 7) 对新文件运行第二个测试。

这将为您提供更准确的文件加载时间测试。

如果您想一次将整个文件加载到内存中，filehandle.read(bytes to read) 是否可能提供一种更快的块读取文件内容的方法？

无论哪种情况，供参考：

[http://docs.python.org/2/tutorial/inputoutput.html](http://docs.python.org/2/tutorial/inputoutput.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:09:07.380

最好使用流处理（逐行）构建程序，在这种情况下，您可以处理大量数据。一般来说，最好实现读取，例如读取 100 行，然后处理它们，然后再加载 100 行。在低级别上，您只是使用大缓冲区并按大块读取原始文件。如果您将所有内容都加载到内存中-您可能会遇到@oseiskar 所写的内存错误

# java - Android 进度对话框不在中心，而是在底部

> ID：15039385
> 
> 赞同：0
> 
> 时间：2013-02-23T10:17:26.883
> 
> 标签：java, android, progressdialog, progress, gravity

我到处找了，一无所获！我需要将我的progressDialog 的位置设置在水平和垂直中心。但是当我通过命令行编译我的代码（我不使用 eclipse）时，会显示一条错误消息：“找不到符号 > Gravity ..”。我认为这是包含问题，我已经导入了无用文件的战利品，因为我不知道要导入什么。有人可以帮助我吗？这是代码：

```
package com.worfut.project;

import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.webkit.WebChromeClient;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.view.KeyEvent; 
import android.view.inputmethod.EditorInfo; 
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MenuInflater;
import android.content.Context;
import android.content.ContextWrapper;
import android.view.ContextThemeWrapper;
import android.widget.ShareActionProvider;
import android.widget.LinearLayout;
import android.view.Window;

public class MainActivity extends Activity {

WebView WorfutWeb;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();

    @Override
public boolean onCreateOptionsMenu(Menu menu) {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.menu, menu);
return true;
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);
                 final Activity activity = this;

    WorfutWeb = (WebView) findViewById(R.id.mainWebView);

    WorfutWeb.getSettings().setSupportZoom(false);
    WorfutWeb.getSettings().setBuiltInZoomControls(false);
    WorfutWeb.setBackgroundColor(Color.BLACK);

    WorfutWeb.setWebViewClient(new myWebClient());
    WorfutWeb.getSettings().setJavaScriptEnabled(true);
        // prepare for a progress bar dialog
        progressBar = new ProgressDialog(this, R.id.mainWebView);
        progressBar.setCancelable(true);
        progressBar.setIndeterminate(false);
        progressBar.getWindow().setGravity(Gravity.CENTER);
        progressBar.setMessage("Caricamento in corso..");
        progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();                                                

        WorfutWeb.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, final int progress)
            {
                activity.setProgress(progress * 100);
                progressBar.setProgress(progress);

                if(progress == 100)
                {
                    progressBar.dismiss();
                }

            }
        });
    WorfutWeb.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
   String html1 = "<html><body><br>";
   String html2 = "<div style='background: #007ac1; border: 2px solid lightblue; border-radius: 8px; padding: 4px;'>";
   String html3 = "<p style='font-weight: bolder;color: white;'><h2><u>Si &egrave; verificato un errore!</u></h3><br>";
   String html4 = "Possibili cause:<br><ul><li>";
   String html5 = "Non si dispone di una connessione Internet;</li><ul><li>Chiudere l'applicazione</li><li>Attivare la connessione Internet</li><li>Riavviare l'applicazione</li></ul><li>L'applicazione non risponde<ul><li>Chiudere e riaprire l'applicazione</li><li>Scriveteci sul Market Android</li></ul>";
   String html6 = "</li></ul></p><br><p align=right><font color=white><em>Worfut Staff.</em>&nbsp;</font></p></div></body></html>";
   String mime = "text/html";
   String encoding = "utf-8";
   view.loadData(html1+html2+html3+html4+html5+html6, mime, encoding);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });
    Animation fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fadein);
    WorfutWeb.startAnimation(fadeInAnimation);
    WorfutWeb.loadUrl("http://www.americantrip.altervista.org/try");

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {
    case R.id.menu_about:
WorfutWeb.loadUrl("http://americantrip.altervista.org/try/info.php"); 
// inside the menu button you don't need to call Super.loadUrl, LoadUrl its enough 
        return true;
    case R.id.menu_help:
WorfutWeb.loadUrl("http://americantrip.altervista.org/try/help.php"); 
// inside the menu button you don't need to call Super.loadUrl, LoadUrl its enough 
        return true;
    case R.id.menu_search:
WorfutWeb.loadUrl("http://americantrip.altervista.org/try/cerca.php"); 
        return true;
    case R.id.menu_exit:
       finish();
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void onResume() {  
   super.onResume();  
   if (WorfutWeb != null) {  
    WorfutWeb.resumeTimers();  
   }  
 }  

public void onPause() {  
   super.onPause();  
   if (WorfutWeb != null) {  
    WorfutWeb.pauseTimers();  
   }  
 }  

public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
        view.loadUrl(url);
        return true;

    }
    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);
        progressBar.dismiss();
    }
}

 // To handle "Back" kewy press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && WorfutWeb.canGoBack()) {
        WorfutWeb.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

这是布局文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="@drawable/sfondo" 
    android:gravity="center"> 
    > 
    <WebView android:id="@+id/mainWebView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" /> 
 </LinearLayout> 
```

有错误的部分是这样的：

```
 progressBar.getWindow().setGravity(Gravity.CENTER); 
```

我认为它是正确的，但也许我必须导入其他东西。谢谢你们。

PS 我已经看过[http://developer.android.com/reference/android/widget/LinearLayout.html#setGravity(int)](http://developer.android.com/reference/android/widget/LinearLayout.html#setGravity(int)) 并且我已经从那里获取了“import android.widget.LinearLayout”。好像是一样的，别跑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:26:03.540

尝试：

```
import android.view.Gravity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:17:31.207

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="@drawable/sfondo" 
    > 
    > 
    <WebView android:id="@+id/mainWebView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
         /> 
 </LinearLayout> 
```

修改了您的布局，我猜当您在中心声明布局时，进度不会在中心。无论如何，如果那对您没有帮助。最简单的方法是。

```
 FrameLayout.LayoutParams para=new FrameLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT );
                para.gravity = Gravity.CENTER;
                progressBar.setLayoutParams(para); 
```

它应该可以工作。如果这解决了您的问题，请接受答案，以便其他人可以使用它。干杯

# php - PHP根据不同的列改变行输出

> ID：15039386
> 
> 赞同：0
> 
> 时间：2013-02-23T10:17:27.933
> 
> 标签：php, row

我有一些通过 PHP/MySQL 输出的数据。它只是一个与某个字符串对应的汉字列表。

```
$i = 0;

while ($i <= $x) {
    echo "<div class=\"char-option\"><a href=\"character.php?char=" . $results[$i]['id']. "\">" . $results[$i]['mainchar'] . "</a></div>";
    $i++;
} 
```

我有另一行有一个角色排名，大约 20% 的角色有一个排名。我想：

1.  将等级最高的角色的类更改为“char-option char-common”。
2.  如果所有角色都没有排名，请不要更改职业。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:26:13.563

第 1 步：确定哪个角色的排名最高。

```
$high = -1, $hrank = 0;
for($i = 0; $i <= $x; ++$i) {
    if(isset($results[$i]['rank']) && $hrank < $results[$i]['rank']) {
        $high = $i;
        $hrank = $results[$i]['rank'];
    }
} 
```

步骤2：根据角色排名最高的信息，我们可以确定谁获得了普通班，谁获得了附加班。

```
for($i = 0; $i <= $x; ++$i) {
    $class = "char-option";   //Default class
    if($i == $high) $class .= " char-common"; //Adds the second class for the highest ranked character.
    echo "<div class=\"$class\"><a href=\"character.php?char=" . $results[$i]['id']. "\">" . $results[$i]['mainchar'] . "</a></div>";
} 
```

中的 -1`$high`确保类不会更改，除非列表中某处有排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:27:53.493

在结果中设置您的排名并以这种方式进行。

```
$i = 0;
while ($i <= $x) {
  if ($results[$i]['highest_ranking'] == 1) {
    $class = "char-option char-common";
  } else {
    $class = "char-option";
  }
  echo "<div class=\"$class\"><a href=\"character.php?char=" . $results[$i]['id'] . "\">" . $results[$i]['mainchar'] . "</a></div>";
  $i++;
} 
```

# android - FragmentActivity 在方向更改时崩溃（MainActivity 被视为 Fragment）

> ID：15039387
> 
> 赞同：0
> 
> 时间：2013-02-23T10:17:31.917
> 
> 标签：android, tabs, android-fragments, actionbarsherlock

我正在使用带有标签的 SherlockFragmentActivity。它第一次加载很好，但是当方向改变时，会出现以下错误：

```
java.lang.RuntimeException: Unable to start activity  
ComponentInfo{ext.domain.app/ext.domain.app.MainActivity}:
android.support.v4.app.Fragment$InstantiationException: Unable to instantiate 
fragment ext.domain.app.MainActivity$1: make sure class name exists, is public, 
and has an empty constructor that is public 
```

我一直在查看有关类似问题的帖子，但有一点不同：在此错误中，似乎 MainActivity 被视为片段（“无法实例化片段 ext.domain.MainActivity”），而不是使用的片段类提及。

给 MainActivity 一个空的构造函数没有帮助。我实际使用的 Fragments 称为 ArticleListFragment，它是一个带有空构造函数的公共类。

我在 Android 2.3 上运行应用程序，下面是代码（去掉了最不相关的细节，仍然抛出异常）：

MainActivity.java：

**（编辑：添加了 ArticleListFragment 的实例化，它是一个匿名内部类型。似乎如果我删除它，它确实有效。）**

```
public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {

    ActionBar actionBar;

    public MainActivity() {

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        // Create ActionBar
        actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Create Tabs
        String[] tabs = { 
                getString(R.string.tab1), 
                getString(R.string.tab2), 
                getString(R.string.tab3),
                getString(R.string.tab4)
        };

        for(String tabname : tabs) {
            ActionBar.Tab tab = actionBar.newTab();
            tab.setText(tabname);
            tab.setTabListener(this);
            actionBar.addTab(tab);
        }
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        switch(tab.getPosition()) {
        case 0:
            ArticleListFragment home = new ArticleListFragment() { 
                            public void onAttach(Activity activity) {
                                // This is some code to populate the Fragment with an HTTPRequest
                                super.onAttach(activity);
                                RequestParams paramsHome = RequestClient.getBasicRequestParams(activity);
                                populate("frontpage", paramsHome);
                            };
                        };
            ft.replace(R.id.contentframe, home);
            break;
        case 3:
            ArticleListFragment saved = new ArticleListFragment() { 
                            public void onAttach(Activity activity) {
                                // This is some code to populate the Fragment with an HTTPRequest
                                super.onAttach(activity);
                                RequestParams paramsSaved = RequestClient.getBasicRequestParams(activity);
                                populate("saved", paramsSaved);
                            };
                        };
            ft.replace(R.id.contentframe, saved);
            break;
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

文章列表片段.java：

```
public class ArticleListFragment extends SherlockFragment {
    public ArticleListFragment() {

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.fragment_articlelist, null);
        return layout;
    }
} 
```

任何想法为什么这段代码是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:38:27.463

完整的代码是`MainActivity`什么？它不是在抱怨试图实例化，`MainActivity`而是在抱怨.`$1``MainActivity`

# html - bootstrap-responsive 会覆盖我的 .container 宽度

> ID：15039390
> 
> 赞同：0
> 
> 时间：2013-02-23T10:17:58.233
> 
> 标签：html, css, twitter-bootstrap

我在使用 Twitter Bootstrap 的网站上遇到了一个恼人的“问题”。我有一个使用默认 .container 引导类的主容器，并且在我的自定义 css 文件中给了它一个特定的宽度。但是，当我将 bootstrap-responsive.css 文件包含到我的 HTML 文档中时，它似乎覆盖了我的容器的宽度。

这是我的 CSS 文件的顺序：

```
 <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"/> 
 <link rel="stylesheet" type="text/css" href="/css/Site.css"/>
 <link rel="stylesheet" href="/css/bootstrap-responsive.css"/> 
```

由于什么原因在响应式 css 文件中指定了宽度？有没有一种平滑的方法可以在不手动编辑 bootstrap-responsive.css 的情况下解决这个问题（我认为这不是一个好主意）

我需要 bootstrap-responsive.css 以使我的网站适合移动设备/平板电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:20:10.783

引导程序中的最小宽度是保持正确结构所必需的。另一方面，您可以简单地将您的 css 代码放在bootstrap 响应**之后**，这样您的规则将覆盖 bootstrap 的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:11:11.670

就个人而言，我倾向于在所有其他 CSS 文件之后加载我自己的自定义样式表。但是，您必须确保不要更改全局属性的任何默认值......或布局相关的属性，即：**.container**

通常，此类会被多次重复使用，并且可能会针对不同的设备和情况进行调整。所以，我建议在 bootstrap-responsive.css 中更改这些值，这是包含所有媒体查询的文件。

否则，您最终会覆盖您想要的响应能力，这可能会导致 CSS 属性出现 !important 异常。应该通过一切手段避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:09:05.253

使用 CSS 时，样式信息的最后一个实例具有优先权。例如，如果我链接到两个不同的样式表，如果有冲突，第二个将优先...

```
<link rel="stylesheet" type="text/css" href="bootstrap.css" />
<link rel="stylesheet" type="text/css" href="bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" href="style.css" /> 
```

在本例中，如果 .container 元素在 style.css 文件中发生变化，则 style.css 中的样式数据只有在发生冲突时才会优先考虑。这种效果类似于在单个 HTML 文档中同时拥有外部和内联 CSS。[这是一个 jsFiddle](http://jsfiddle.net/777a4/)来说明。在这里，您可以看到内联样式具有优先权，并使文本的颜色变为橙色，同时保持背景为黑色。

# java - PrimeFaces v3.5：在非 Ajax 调用中使用 RequestContext 不显示对话框

> ID：15039392
> 
> 赞同：1
> 
> 时间：2013-02-23T10:18:01.610
> 
> 标签：java, ajax, jsf-2, primefaces, dialog

在用户指南中，声明`RequestContext`将在 Ajax 和非 Ajax 调用上工作。但是，用户指南中的所有示例都使用 Ajax，就我而言，它不适用于非 Ajax 调用。

下面是一个测试页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Test page</title>
    </h:head>
    <h:body>
        <h:form >  

            <p:commandButton ajax="false" value="Non-Ajax" actionListener="#{mrBean.show}" />

            <p:commandButton value="Ajax" actionListener="#{mrBean.show}" />

        </h:form>

        <p:dialog modal="true" id="statusDialog" widgetVar="statusDlg" closable="false" >
            <h:outputText value="Helllooo" />
        </p:dialog>
    </h:body>
</html> 
```

这是托管bean：

```
@ManagedBean
@RequestScoped
public class MrBean {

    public void show() {
        System.out.println("SHOW DIALOG");
        RequestContext context = RequestContext.getCurrentInstance();
        context.execute("statusDlg.show();");
    }

} 
```

如果我单击该`Ajax`按钮，对话框将正确显示。但是，`Non-Ajax`按钮什么也没做。在这两种情况下，`SHOW DIALOG`消息都打印在控制台上。

如果您能告诉我如何解决这个问题，我将不胜感激:)。

此致，

詹姆斯·特兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:41:30.257

我必须让你失望，但`RequestContext`在非 AJAX 请求中可用但唯一有用的功能是`isAjaxRequest()`布尔返回值。在文档和 API 参考中，您可以看到所有其他方法都被告知它们用于 AJAX 请求。也适用于`execute()`方法：

> 当前 ajax 请求完成后执行 javascript。

过去，`RequestContext`根本不可用，现在它仅可用于将来可能用于非 AJAX 请求。另请参阅[此问题](http://code.google.com/p/primefaces/issues/detail?can=1&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary&sort=-id&id=4500)

# visual-studio-2010 - 在 VB 和 Access 中更新查询问题

> ID：15039394
> 
> 赞同：0
> 
> 时间：2013-02-23T10:18:09.493
> 
> 标签：visual-studio-2010, vb6, ms-access-2007

我正在尝试在 VB 的应用程序中实现更改密码模块。更新查询有一些问题

```
Private Sub cmdOK_Click()
Query = "Select * From Users Where LoginID='" & txtLoginID & "' and Password = '" & txtCuPassword & "'"
 Set reSet = myCon.Execute(Query)

If (Not reSet.BOF) And (Not reSet.EOF) Then
    Query1 = "UPDATE Users SET Password ='" & txtNewPassword & "' WHERE LoginID='" & txtLoginID & "'"
    Set reSet = myCon.Execute(Query1) 
```

执行时在 UPDATE 查询中抛出错误，作为语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:36:57.350

因此，如果您的代码在 txtNewPassword 字段中有一个单引号，那么您的查询最终会是这样的

```
Query = "UPDATE Users SET Password ='mypass'word' WHERE LoginID='123'" 
```

这当然是一个语法错误。

您可以尝试用一对单引号替换单引号

```
Query = "UPDATE Users SET [Password] ='" & Replace(txtNewPassword, "'", "''") & "' WHERE .... 
```

但请记住，此代码对 SQL 注入是开放的。如果在 VB6 中这样做并不容易，您也应该使用参数化查询。此外，正如 HansUp 在其评论中指出的那样，您需要`Password`用方括号将保留字括起来

[为什么我应该使用参数而不是将值放入我的 SQL 字符串](http://www.vbforums.com/showthread.php?548787-Database-Why-should-I-use-Parameters-instead-of-putting-values-into-my-SQL-string)

# iphone - 在 Safari 中加载 URL，但在 UIWebview 中不加载

> ID：15039398
> 
> 赞同：2
> 
> 时间：2013-02-23T10:18:38.747
> 
> 标签：iphone, ios, uiwebview

我面临一个奇怪的问题。当我尝试在 UIWebView 中加载该 url 时，我有一个 URL，它不加载 web 视图保持空白，但是当我尝试在 Safari 中加载相同的 url 时，它运行良好并显示页面。UIWebView 是否有任何限制，例如如果网页包含它不能加载任何特定类型的小部件。

预先感谢

```
UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
webView.delegate = self; 
NSURL *url = [NSURL URLWithString:@"myurl"]; 
NSURLRequest *req = [[NSURLRequest alloc]initWithURL:url];
[self.view addSubview:webView];
[webView loadRequest:req]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T15:06:23.103

Safari 和本地计算机上的 iOS 模拟器上的行为将是相同的。两者都使用系统偏好设置中配置的相同代理设置。

然而——这就是诀窍——每个都有自己独特的饼干店。要获得相同的行为，您应该首先重置 Safari 和模拟器。

这让我大吃一惊。我的 Safari URL 有效，因为我之前存储了 cookie 值，使服务器能够满足我的请求。在模拟器上，不存在此类 cookie，因此服务器无法响应。从表面上看，它似乎`UIWebView`只是不起作用。然而，事实并非如此

**底线：** ***重置两者并重试。***

# cakephp - Cakephp 在视图中查找计数分组

> ID：15039403
> 
> 赞同：-1
> 
> 时间：2013-02-23T10:19:30.610
> 
> 标签：cakephp, count, group-by, find

我有一个模型 Gameline 和控制器 GamelinesController 和数据库'gamelines'。我想运行这个查询

![在此处输入图像描述](../Images/77dba819193205cea1c4b70ee08c257d.png)

这意味着有一条记录属于 2013-02-18，有两条记录属于 2013-02-25。

之后如何循环属于视图中每个 g_time 字段的计数请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:41:56.747

对于使用 MySQL 函数的字段，例如`DATE()`. 您可以使用[虚拟字段](http://book.cakephp.org/2.0/en/models/virtual-fields.html)。在你的情况下，你会在你的 Gameline 模型中添加这样的东西：

```
public function __construct($id = false, $table = null, $ds = null) {
    parent::__construct($id, $table, $ds);
    $this->virtualFields = array(
        'date' => 'DATE(' . $this->alias . '.g_time)'
    );
} 
```

这样，格式化的日期将可用作虚拟字段`date`（如果您已经有一个这样的字段，请使用另一个名称）。

然后在您的`find()`操作中，获取新的虚拟`date`字段。为了将这些结果输出到您的视图，您可以简单地遍历您的结果集。假设您将`find()`结果存储在名为 的视图参数中`$data`，然后您将显示如下表格：

```
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody>
    <?php foreach ($data as $row): ?>
    <tr>
      <td><?php echo $row['Gameline']['date']; ?></td>
      <td><?php echo $row['Gameline']['count']; ?></td>
    </tr>
    <?php endforeach; ?>
  </tbody>
</table> 
```

# apache - 通过终端进行 redmine 的子域

> ID：15039411
> 
> 赞同：0
> 
> 时间：2013-02-23T10:21:02.683
> 
> 标签：apache, subdomain, redmine

我使用本教程在虚拟服务器（Ubuntu 10.04）上安装了 redmine： [安装指南](http://www.redmine.org/projects/redmine/wiki/HowTo_Install_Redmine_in_Ubuntu) 一切似乎都是正确的，我坚持的地方是如何使我的 redmine 安装可以从浏览器访问，或者换句话说，如何将子域添加到现有的。

虚拟服务器在以下位置可用：

```
lvps46-163-79-1.dedicated.hosteurope.de 
```

它指向一个标准的 htdocs 目录。(/var/www/vhosts/default/htdocs/)

我的 Redmine 安装在：/usr/share/redmine/

我尝试使用 plesk 设置一个子域，如 tut 中所写，但这失败了。终端是否有一种简单（初学者可以理解）的方式来使安装可用：

```
redmine.lvps46-163-79-117.dedicated.hosteurope.de 
```

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:48:59.333

只是为了完成这个。我按照 apache doku 的说明进行操作。不幸的是，我无法让虚拟主机工作。我现在在端口 3000 上使用 Mongrel 服务器，这对我有用。

# c# - MVVM CallerMemberName 和“魔术字符串”

> ID：15039415
> 
> 赞同：1
> 
> 时间：2013-02-23T10:21:37.397
> 
> 标签：c#, mvvm, inotifypropertychanged, idataerrorinfo, callermembername

新的 C# 5.0 版本引入了一些东西来摆脱 INotifyPropertyChanged 实现中的“魔术字符串”，例如：

```
OnPropertyChanged("CustomerName"); 
```

现在可以只写：

```
OnPropertyChanged(); 
```

由于方法定义中的 CallerMemberName ，这是可能的：

```
protected void OnPropertyChanged([CallerMemberName] string propertyName = null)
{ ... } 
```

它比“魔术字符串”方式更易于重构，并且比 lambda 表达式更快，但我想知道我们如何从一组访问器中多次调用 OnPropertyChanged。例如，如果我们想要这样的东西：

```
public int Width
{
    get
    {
        return width;
    }
    set
    {
        width = value;
        OnPropertyChanged("Width");
        OnPropertyChanged("Height");
    }
} 
```

我们如何使用 CallerMemberName 方式做到这一点并避免使用“魔术字符串”和 lambda 表达式？

我还想知道如何避免在 IDataError 信息中使用“魔术字符串”：

```
public string Error
        {
            get;
            private set;
        }

        public string this[string columnName]
        {
            get
            {
                if (columnName == "Name")
                {
                    if (String.IsNullOrWhiteSpace(Name))
                        Error = "Name cannot be null or empty.";
                    else
                        Error = null;
                }

                return Error;
            }
        } 
```

我是 MVVM 的新手，所以也许我忽略了一些处理“魔术字符串”的聪明方法，但是我做了一些研究，却一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T10:29:34.363

简单的答案是，你不能那样做。顾名思义`CallerMemberName`，它将包含调用者的姓名。
对于您想为`PropertyChanged`当前融资以外的其他融资的情况，您将不得不使用其中一种“旧”方式。

在`IDataErrorInfo`您还必须使用其中一种方式时，别无选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T12:16:41.857

我知道这个问题是关于 C# 5.0 的，但是如果人们仍然有这个性质的问题，请查看 c# 6.0。C# 6.0 有一个很好的方法来解决这个问题。查看 nameof 关键字。如果有人感兴趣，我写了一篇关于它的小帖子：[c# 6.0解决了魔术字符串问题](https://dannyvanderkraan.wordpress.com/2015/05/15/c-6-solves-magic-strings-problem/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-05T11:55:18.423

这将有所帮助：“一种魔法”毫不费力的 INotifyPropertyChanged

[http://visualstudiogallery.msdn.microsoft.com/d5cd6aa1-57a5-4aaa-a2be-969c6db7f88a](http://visualstudiogallery.msdn.microsoft.com/d5cd6aa1-57a5-4aaa-a2be-969c6db7f88a)

作为将其添加到一个属性的示例：

```
[Magic] 
public string Name { get { return _name; } set { _name = value; } } 
string _name; 
```

将其添加到所有类属性的另一个示例：

```
[Magic] 
public class MyViewModel: INotifyPropertyChanged 
{ 
  public string Name { get; set; } 
  public string LastName { get; set; } 
  ..... 
} 
```

# visual-studio-2010 - 如何比较 Visual Studio 2010 解决方案的 2 种构建配置？

> ID：15039420
> 
> 赞同：0
> 
> 时间：2013-02-23T10:22:21.750
> 
> 标签：visual-studio-2010, msbuild, projects-and-solutions, buildconfiguration

我在 Visual Studio 2010 中有一个巨大的解决方案（超过 30 个 F# 和 C# 项目）。刚才我遇到了在不同配置中构建解决方案的问题（例如，Release|AnyCPU 和 Debug|AnyCPU）。似乎，这个问题出在目标平台差异上。是否可以提取和比较解决方案的构建配置（如 XML、纯文本）？在配置管理器窗口中并未提供所有信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:41:41.607

您可以设置[MSBuildEmitSolution](http://threeisit.com/post/MSBuildEmitSolution.aspx)并比较生成的中间项目文件，然后通过[fileLogger](http://msdn.microsoft.com/en-us/library/vstudio/ms171470.aspx)或[tee将详细程度提高到](http://en.wikipedia.org/wiki/Tee_%28command%29)[诊断](http://msdn.microsoft.com/en-gb/library/vstudio/ms164311.aspx)和管道输出日志，并与[差异工具](http://winmerge.org/)进行比较或直接单[步](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)执行。

# c++ - 正则表达式：C++ 提取双引号内的文本

> ID：15039421
> 
> 赞同：2
> 
> 时间：2013-02-23T10:22:23.110
> 
> 标签：c++

我只想提取双引号内的那些单词。所以，如果内容是：

```
Would "you" like to have responses to your "questions" sent to you via email? 
```

答案必须是

1- 你 2- 问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:15:04.020

```
std::string str("test \"me too\" and \"I\" did it");
std::regex rgx("\"([^\"]*)\""); // will capture "me too"
std::regex_iterator current(str.begin(), str.end(), rgx);
std::regex_iterator end;
while (current != end)
    std::cout << *current++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:45:20.743

如果你真的想使用正则表达式，你可以这样做：

```
#include <regex>
#include <sstream>
#include <vector>
#include <iostream>

int main() {
    std::string str = R"d(Would "you" like to have responses to your "questions" sent to you via email?)d";
    std::regex rgx(R"(\"(\w+)\")");
    std::smatch match;
    std::string buffer;
    std::stringstream ss(str);
    std::vector<std::string> strings;
    //Split by whitespaces..
    while(ss >> buffer) 
        strings.push_back(buffer);
    for(auto& i : strings) {
        if(std::regex_match(i,match, rgx)) {
            std::ssub_match submatch = match[1];
            std::cout << submatch.str() << '\n';
        }
    }
} 
```

我认为只有 MSVC 和 Clang 应该支持，否则你可以[像这样使用 boost.regex](http://liveworkspace.org/code/uT6rz%242)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:38:20.517

使用[此答案](https://stackoverflow.com/questions/236129/splitting-a-string-in-c/236803#236803)`split()`中的函数，然后提取奇数项：

```
std::vector<std::string> itms = split("would \"you\" like \"questions\"?", '"');
for (std::vector<std::string>::iterator it = itms.begin() + 1; it != itms.end(); it += 2) {
    std::cout << *it << endl;
} 
```

# ios - 按钮状态不会循环更改

> ID：15039422
> 
> 赞同：2
> 
> 时间：2013-02-23T10:22:30.360
> 
> 标签：ios, loops, button, while-loop

在我的小应用程序中，用户单击“ON”按钮，然后我调用一个带有 while 循环的方法，并且应该出现“OFF”按钮，但是我的“OFF”按钮没有出现。

```
-(void) myMethod{

    while (_onButton.selected) {

        [self vibrate];
         NSLog(@"working");
    } 
}

- (IBAction)on:(id)sender {

    _offButton.hidden=NO;
    _offButton.selected=NO;
    _onButton.hidden=YES;
    _onButton.selected=YES;

       [self myMethod];

}

- (IBAction)off:(id)sender {

    _onButton.hidden=NO;
    _offButton.hidden=YES;
    _onButton.selected=NO;
    _offButton.selected=YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:27:14.770

这是一个无限循环伴侣。像这样更改while循环：

```
while (_onButton.selected) {

[self vibrate];
 NSLog(@"working");
_onButton.selected = NO;
} 
```

或 while (_onButton.selected) {

```
[self vibrate];
 NSLog(@"working");
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:28:37.953

当您使用此循环时：

```
while (_onButton.selected) {

    [self vibrate];
     NSLog(@"working");
} 
```

您不允许运行循环处理新事件，因此按钮将永远没有机会更改状态（因为它不会接收来自用户的触摸）。这是非常糟糕的，你不应该这样做。

而是通过使用在选择按钮时一直持续的声音委托方法继续振动（您没有显示如何执行振动，因此我无法在此处提供更多详细信息）。

**编辑**在 OP 发表评论后：

```
- (void)vibrate
{
    AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
} 
```

好的，AudioServices 提供了一个“完成程序”，通过`AudioServicesAddSystemSoundCompletion()`它可以让您在选择按钮时重放振动“声音”。使用这种机制而不是`while`循环。

# c# - php to unity 如何传递字节[] 或二进制数据？

> ID：15039428
> 
> 赞同：0
> 
> 时间：2013-02-23T10:23:19.640
> 
> 标签：c#, php, unity3d

我正在做一个 C# 统一项目。我有一些我想保存在 php 服务器上的对象。

所以首先我将它们序列化为 json，然后压缩它们并将它们上传到服务器，服务器将其保存在数据库中（作为二进制文件，字符串是否足够好？）。

现在我想取回统一的数据。php应该如何返回值？团结应该如何接受它？

我将处理解压缩和反序列化为 json。（对 json 使用 jsonfx 并使用本机用 c# 编写的 compress 方法）这部分工作正常。

我只需要能够在每个平台上接收相同的字节 []。

它应该看起来像这样

C# - 上传数据（伪 C#）//这部分效果很好

```
wwwform myform= new wwwform ()
byte[] mybytearr = ...
wwwform.addbinary ($mybytearr);
WWW myw=    new www (url,myform) 
```

C# - 获取数据（此处需要帮助）

```
WWW www = > new www (url,formdata)
myinput =www.text; 
```

PHP - 将数据发送回客户端（在这里需要帮助）......

```
$myvarbackfromthedb =.
echo $myoutput 
```

当 $myoutput 是二进制数据或字节 [] 时，我该怎么做？

谢谢你的帮助！

更新：

所以这样做的动机是保存压缩返回的字节[]。我最终将其移至base64字符串，然后将其作为字符串传递给php，然后作为字符串传递给数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:02:18.297

让我们从一些二进制数据开始：

```
$binary = file_get_contents('/tmp/foo'); 
```

或者可能出于测试目的：

```
$binary = join(array_map('chr', range(0, 127))); 
```

两者都是一些任意的二进制字符串。您可以使用以下命令从它们输出有效的 JSON 字符串：

```
echo json_encode(array('foo' => $binary)); 
```

这会给你这样的东西：

```
{"foo":"\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\b\t\n\u000b\f\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\"#$%&'()*+,-.\/0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"} 
```

这是该二进制数据的有效 JSON 表示。任何正在*解码*该数据的人都将获得二进制值。您可能希望更有效地对其进行编码，例如使用 Base 64 编码：

```
echo json_encode(array('foo' => base64_encode($binary))); 
```

这会给你：

```
{"foo":"AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn8="} 
```

现在接收器只需要再次解码它。在 PHP 中看起来像这样：

```
$data = json_decode($json, true);
$data['foo'] = base64_decode($data['foo']); 
```

# clojure - Clojure - 将协议默认实现与自定义实现混合

> ID：15039431
> 
> 赞同：11
> 
> 时间：2013-02-23T10:23:30.827
> 
> 标签：clojure, protocols

在 Clojure 中，我想要一个协议，其中一些方法具有默认实现，而另一些则具有自定义实现。第一个参考后一个进行配置。这是一个例子：

```
(defprotocol Saving
  (save [this] "saves to mongodb")
  (collection-name [this] "must return a string representing the associated MongoDB collection"))

;Default implementation

(extend-type Object
  Saving
  ; the `save` method is common for all, so it is actually implemened here
  (save [this] (mc/insert (collection-name [this]) this))
  ; this method is custom to every other type
  (collection-name [this] "no_collection"))

;Particular implementations

(defrecord User
  [login password]
  Saving
  (collection-name [this] "users"))

(defrecord NewsItem
  [text date]
  Saving
  (collection-name [this] "news_items")) 
```

但是，它不会以这种方式工作。即使调用`collection-name`or`User`实例`NewsItem`返回正确的集合字符串，调用`save`它们也会导致`AbstractMethodError`. 如何使用 Clojure 实现这个微不足道的 OO 形目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T11:56:53.387

使保存功能成为正常功能：

```
(defn save [obj] (mc/insert (collection-name obj) obj)) 
```

该协议应该只有`collection-name`

```
(defprotocol Saving
  (collection-name [this] "must return a string representing the associated MongoDB collection")) 
```

然后每个想要“保存”的对象都可以实现这个协议。

记住：OO 风格经常隐藏明显的简单事物 :)

# web-services - 从 bpel 调用 Metro Web 服务

> ID：15039435
> 
> 赞同：1
> 
> 时间：2013-02-23T10:23:48.323
> 
> 标签：web-services, cxf, bpel, java-metro-framework

我试图从 bpel 进程调用一个简单的 Web 服务（基于 Metro 堆栈，部署在 Tomcat 7 上），但我遇到了问题。

当我使用soapui 或其他类似工具测试此Web 服务时，一切正常。所以网络服务没问题。我认为bpel也是正确的。

bpel 进程运行在 bpel-g 中，也部署在同一个 tomcat 服务器上。所以我的问题是，是否可以从 bpel-g 引擎（基于 cfx 堆栈构建）调用（Metro）Web 服务。

如果不可能，我是否应该在 apache cxf 上构建我的 Web 服务，它会起作用吗？

编辑：所以，正如我所说，Web 服务在 tomcat 7 服务器的 Metro 堆栈上运行。bpel-g-5.3 部署在另一个 tomcat 服务器上。当我尝试从该进程调用 Web 服务时，我得到以下堆栈跟踪：

```
 org.activebpel.rt.AeException logError SEVERE: no protocol:
    java.net.MalformedURLException: no protocol:
    at java.net.URL.<init>(URL.java:567)
    at java.net.URL.<init>(URL.java:464)
    at java.net.URL.<init>(URL.java:413)
    at org.activebpel.rt.axis.bpel.AeAxisInvokeHandler.setTargetAddress    (AeAxisInvokeHandler.java:334) 
    org.activebpel.rt.axis.bpel.AeAxisInvokeHandler.createCall        (AeAxisInvokeHandler.java:177)
    ... 
```

我的bpel流程：

```
 <!-- SampleProcessFile BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Fri Mar 01 17:47:28 CET 2013 -->
<bpel:process name="SampleProcessFile"
         targetNamespace="http://Sample"
         suppressJoinFailure="yes"
         xmlns:tns="http://Sample"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns="http://server/">

    <!-- Import the client WSDL -->
    <bpel:import namespace="http://server/" location="http://localhost:8080/WebApplication10/NewWebService?wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import location="SampleProcessFileArtifacts.wsdl" namespace="http://Sample" 
            importType="http://schemas.xmlsoap.org/wsdl/" />

    <!-- ================================================================= -->         
    <!-- PARTNERLINKS                                                      -->
    <!-- List of services participating in this BPEL process               -->
    <!-- ================================================================= -->         
    <bpel:partnerLinks>
        <!-- The 'client' role represents the requester of this service. -->
        <bpel:partnerLink name="client"
                     partnerLinkType="tns:SampleProcessFile"
                     myRole="SampleProcessFileProvider"
                     />
        <bpel:partnerLink name="SamplePL" partnerLinkType="tns:SamplePLT" partnerRole="InBound"></bpel:partnerLink>
    </bpel:partnerLinks>

    <!-- ================================================================= -->         
    <!-- VARIABLES                                                         -->
    <!-- List of messages and XML documents used within this BPEL process  -->
    <!-- ================================================================= -->         
    <bpel:variables>
        <!-- Reference to the message passed as input during initiation -->
        <bpel:variable name="input"
                  messageType="tns:SampleProcessFileRequestMessage"/>

        <!-- 
          Reference to the message that will be returned to the requester
          -->
        <bpel:variable name="output"
                  messageType="tns:SampleProcessFileResponseMessage"/>
        <bpel:variable name="SamplePLResponse" messageType="ns:helloResponse"></bpel:variable>
        <bpel:variable name="SamplePLRequest" messageType="ns:hello"></bpel:variable>
    </bpel:variables>

    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->         
    <bpel:sequence name="main">

        <!-- Receive input from requester. 
             Note: This maps to operation defined in SampleProcessFile.wsdl 
             -->
        <bpel:receive name="receiveInput" partnerLink="client"
                 portType="tns:SampleProcessFile"
                 operation="process" variable="input"
                 createInstance="yes"/>

        <!-- Generate reply to synchronous request -->
        <bpel:assign validate="no" name="Assign">
            <bpel:copy>
                <bpel:from><bpel:literal><tns:hello xmlns:tns="http://server/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>name</name>
</tns:hello>
</bpel:literal></bpel:from>
                <bpel:to variable="SamplePLRequest" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="payload" variable="input">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:input]]></bpel:query>
                </bpel:from>
                <bpel:to part="parameters" variable="SamplePLRequest">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[name]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:invoke name="Invoke" partnerLink="SamplePL" operation="hello" portType="ns:NewWebService" inputVariable="SamplePLRequest" outputVariable="SamplePLResponse"></bpel:invoke>
        <bpel:assign validate="no" name="Assign1">
            <bpel:copy>
                <bpel:from><bpel:literal><tns:SampleProcessFileResponse xmlns:tns="http://Sample" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tns:result>tns:result</tns:result>
</tns:SampleProcessFileResponse>
</bpel:literal></bpel:from>
                <bpel:to variable="output" part="payload"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="SamplePLResponse">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[return]]></bpel:query>
                </bpel:from>
                <bpel:to part="payload" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>
        <bpel:reply name="replyOutput" 
               partnerLink="client"
               portType="tns:SampleProcessFile"
               operation="process" 
               variable="output"
               />
    </bpel:sequence>
</bpel:process> 
```

最后是 Web 服务的 wsdl：

```
<?xml version='1.0' encoding='UTF-8'?><!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2-hudson-740-. --><!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is JAX-WS RI 2.2-hudson-740-. --><definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://server/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://server/" name="NewWebService">
<types>
<xsd:schema>
<xsd:import namespace="http://server/" schemaLocation="http://localhost:8080/WebApplication10/NewWebService?xsd=1" />
</xsd:schema>
</types>
<message name="hello">
<part name="parameters" element="tns:hello" />
</message>
<message name="helloResponse">
<part name="parameters" element="tns:helloResponse" />
</message>
<portType name="NewWebService">
<operation name="hello">
<input wsam:Action="http://server/NewWebService/helloRequest" message="tns:hello" />
<output wsam:Action="http://server/NewWebService/helloResponse" message="tns:helloResponse" />
</operation>
</portType>
<binding name="NewWebServicePortBinding" type="tns:NewWebService">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
<operation name="hello">
<soap:operation soapAction="" />
<input>
<soap:body use="literal" />
</input>
<output>
<soap:body use="literal" />
</output>
</operation>
</binding>
<service name="NewWebService">
<port name="NewWebServicePort" binding="tns:NewWebServicePortBinding">
<soap:address location="http://localhost:8080/WebApplication10/NewWebService" />
</port>
</service>
</definitions> 
```

EDIT2：我尝试了相同的 bpel 进程，在 jboss 应用服务器上使用 riftsaw（基于 ODE 构建）和 cxf 堆栈及其工作调用相同的 Web 服务，因此进程和服务是正确的。我猜bpel-g 和metro 之间存在一些兼容性问题。

# objective-c - 在 iPhone 上访问麦克风和相机实时原始数据

> ID：15039436
> 
> 赞同：1
> 
> 时间：2013-02-23T10:23:54.917
> 
> 标签：objective-c, cocoa-touch, avcapturesession, audioqueue, remoteio

我需要从 iPhone 上的摄像头和麦克风访问实时原始数据。我搜索了几天，建议对音频使用“远程 IO”和“音频队列”，对视频使用 AVCaptureSession。由于我找不到从 AVCaptureSession 中提取原始音频信息的方法，我想知道是否可以同时使用 AVCaptureSession 或者我应该使用两种不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:35:53.393

您应该能够通过设置 AVCaptureAudioDataOutput 并将其添加到您的捕获会话中来从 AVCaptureSession 中提取音频。您可以通过设置 AVCaptureAudioDataOutput 对象的 audioSettings 属性来控制音频数据的格式。

[您可以在此处](http://developer.apple.com/library/ios/#samplecode/AVCaptureToAudioUnit/Introduction/Intro.html)找到一些 Apple 示例代码。

# android - 读取 Active Wifi 2.4 Ghz RFID 标签 android？

> ID：15039437
> 
> 赞同：2
> 
> 时间：2013-02-23T10:24:01.340
> 
> 标签：android, wifi, rfid

谁能告诉我是否可以在 Android 或 Java 智能手机中读取具有与 wifi 2.4 ghz 相同频段的新有源 RFID 标签？一些学习参考链接将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:39:18.813

抱歉不行。NFC（近场通信，Android 手机中用于读取 RFID 标签的设备）以 13.56Mhz 的频率运行。

NFC：http: [//developer.android.com/guide/topics/connectivity/nfc/index.html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

特定频率信息：[http ://en.wikipedia.org/wiki/Near_field_communication](http://en.wikipedia.org/wiki/Near_field_communication)

# telerik - RadTreeView 子节点检查节点是否已经存在

> ID：15039440
> 
> 赞同：0
> 
> 时间：2013-02-23T10:24:21.333
> 
> 标签：telerik

目前，rad 树视图返回重复的子节点。我如何实现，检查子节点是否已经存在。如果已经存在，则不要添加并继续循环。谢谢

私人无效BuildProjectTree（）{

```
 EntityCollection<ProjectEntity> collection = GetProjectData();

    treProjects.Nodes.Clear();

    ArrayList pgnodes = new ArrayList();
    RadTreeNode pnode = null;
    RadTreeNode snode = null;
    //MembershipUserCollection membershipCollection = new MembershipUserCollection();
    //membershipCollection = Membership.GetAllUsers();

    foreach (ProjectEntity p in collection)
    {
        pnode = null;
        foreach (RadTreeNode n in treProjects.GetAllNodes())
        {
            //bool nodeExist = false;

                if (n.Text.Trim() == p.TeamLeader.Trim().ToUpper())
                {
                     pnode = n;
                     break;

                }

        }
        if (pnode != null)
        {
            snode = null;
            foreach (RadTreeNode n in pnode.Nodes)
            {

                if (n.Value == p.ProjectSubGroup.ProjectGroup.Name)
                {
                    snode = n;
                    break;
                }
            }
            if (snode != null)
            {
                RadTreeNode projectnode = new RadTreeNode(p.ProjectTitle + " (" + p.ReferenceNumber + ")",
                                                          p.ProjectId.ToString(), BuildProjectNavigationUrl(p, false));

                snode.Nodes.Add(projectnode);
            }

        }
        else
        {

            RadTreeNode projectteamleadernode = new RadTreeNode(p.TeamLeader.Trim().ToUpper());

            RadTreeNode projectgroupnode = new RadTreeNode(p.ProjectSubGroup.ProjectGroup.Name, String.Empty);

            RadTreeNode projectnode = new RadTreeNode(p.ProjectTitle + " (" + p.ReferenceNumber + ")",
                                                     p.ProjectId.ToString(), BuildProjectNavigationUrl(p, false));

            projectgroupnode.Nodes.Add(projectnode);
            projectteamleadernode.Nodes.Add(projectgroupnode);

           pgnodes.Add(projectteamleadernode);

         }
    }

    foreach (RadTreeNode pg in pgnodes)
    {

        treProjects.Nodes.Add(pg);
    }
    //treProjects.ExpandAllNodes();
    treProjects.CollapseAllNodes();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:26:10.080

您提供的片段应该可以满足您的需求。在循环之前将 pnode 初始化为 null，并在循环终止后测试 pnode 的值。

如果这没有帮助，请提供用于添加节点的代码。

# html - 无法获得 Flowplayer 播放按钮

> ID：15039446
> 
> 赞同：0
> 
> 时间：2013-02-23T10:25:31.017
> 
> 标签：html, flowplayer

我正在使用版本 flowplayer 5.2.1 (html5) 并且一直在尝试让播放按钮与我现有的代码一起运行，可以在[http://bit.ly/XS2goD看到一个示例](http://bit.ly/XS2goD)

由于flowplayer支持是付费的，即使购买了license，我也没有其他地方可以问这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:17:37.173

只有流播放器 v5.3 提供您在控制栏上的播放按钮自定义。检查以下链接

[http://flowplayer.org/docs/skinning.html](http://flowplayer.org/docs/skinning.html)

# c++ - 在 C++ 中处理指针和向量

> ID：15039448
> 
> 赞同：0
> 
> 时间：2013-02-23T10:25:50.123
> 
> 标签：c++, pointers, vector, tree

我正在构建一棵树，其中的`node`类有两个指向子节点的指针。在构建树时，我使用节点向量进行操作，最终将它们指向彼此。我经常需要将它们从向量中弹出来维护链接过程的逻辑。不幸的是，如果我指向一个节点并将其从向量中弹出，则该对象被破坏（据我所知）。关于如何让我的指针指向正确的位置或更好的系统的任何想法？

编辑——如果有帮助，这里有一些细节：

我有一个节点向量数组：`Vector<node> nVec[3]`

对于我需要为我的程序进行的每一级解析，它将用节点填充这 3 个向量。然后，基于其他解析数据，我将系统地链接节点。为此，我填充了向量，并且在某个点我需要链接到`nVec[3].back()`from 某个节点`nVec[2]`并将其弹出，这样，如果我想再做一次，我就不会链接到同一个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:28:20.760

这取决于您如何将它们存储在`std::vector`. 如果你有一个`std::vector<node>`，那么是的，`node`当你从向量中删除它们时，存储在向量中的对象将被销毁。

但是，如果您有一个指针向量 ( `std::vector<node*>`) 并在将它们推入 ( ) 之前动态分配您的节点，`nodes.push_back(new node();)`它们将一直存在，直到您明确`delete`它们为止。但是，您稍后必须记住`delete`这些节点。要安全地使用动态分配，请使用智能指针向量，例如`std::vector<std::shared_ptr<node>>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:29:54.173

您应该存储指向已在您的对象的指针`vector`：

```
vector<Node> nodes;
nodes.push_back(Node(foo)); 
```

**不好**。_

```
vector<Node*> nodes;
nodes.push_back(new Node(foo)); 
```

很好，因为现在节点被分配到堆上并且从集合中删除时不会被破坏。

我建议您使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)(`unique_ptr`或`shared_ptr`) 来管理资源分配和释放，因为此时您可能最终会忘记您拥有多少对单个对象的引用。

# css - Dreamweaver - 使用正则表达式删除 CSS 元素

> ID：15039453
> 
> 赞同：0
> 
> 时间：2013-02-23T10:26:16.487
> 
> 标签：css, regex, dreamweaver, replace

我一直在尝试在 Dreamweaver 中进行一些简单的查找和替换，我知道这是可能的，但我就是无法获得正确的字符串组合。阅读了一些 Adob​​e 指南和其他教程，但它们似乎都没有任何意义。

本质上，我想去掉所有在我正在处理的打开的 css 文件中创建圆角的 css。css 文件包含对 -webkit-border-radius、-moz-border-radius、border-radius 的引用，但有许多不同的半径设置，例如 :4px 或 :4px 0 等。

所以我想找到 ((-webkit-border-radius:) + (ANY ALPHANUMERIC);) 并替换为空，以便它删除 -webkit-border-radius 的所有实例，无论使用了什么 px 值。

然后，我将使用相同的表达式并将 -webkit-border-radius 替换为 -moz-border-radius，然后仅替换为border-radius。

这应该是可能的，但无法解决。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:11:39.940

1.  将您的查找和替换窗口设置为正则表达式。
2.  将其粘贴到“查找”框中：`-webkit-border-radius:(.*);`
3.  清除您的“替换”框
4.  点击“全部替换”

您可以`(.*)`在两个字符串之间使用，它会找到您要查找的内容。

例如：`firstword(.*)lastword`。

# javascript - simplecart 支付成功

> ID：15039455
> 
> 赞同：0
> 
> 时间：2013-02-23T10:26:20.467
> 
> 标签：javascript, simplecart

如果简单的购物车结账成功，这是否意味着交易被验证为有效？

结帐：{类型：'PayPal'，电子邮件：'myemail'，成功：'success.html'，沙箱：true}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T13:32:41.450

```
success: 'success.html' 
```

这是用户在使用 Paypal 完成结帐后将看到的“返回 URL”。

您通常会将其链接到“谢谢”页面或您网站上的类似内容。如果您希望跟踪经过验证的付款/用户，那么您应该研究 IPN 以及它是如何工作的。[https://www.paypal.com/ipn](https://www.paypal.com/ipn)

# text - ImageMapster 文本叠加

> ID：15039457
> 
> 赞同：1
> 
> 时间：2013-02-23T10:26:35.660
> 
> 标签：text, canvas, map, overlay, imagemapster

ImageMapster中如何实现文字叠加？ImageMapster 似乎是一个非常流行的插件，我正在研究以确定是否在我的项目中使用它。在我要开发的应用程序中，百分比数字需要显示在地图上的选定区域。由于 ImageMapster 不支持此功能，我想知道其他人是如何做到的？什么是解决方法？我在论坛上读到，很少有人也在为在选定区域上写文字而苦苦挣扎。由于它使用画布，我们可以动态创建元素并显示在选定区域，可以吗？我不确定画布坐标和地图坐标是否相同。

此文本覆盖问题中的任何指针都会很棒。所以，我可以决定 ImageMapster :)

# .htaccess - CheckSpelling On 给出 XAMPP 服务器错误

> ID：15039458
> 
> 赞同：1
> 
> 时间：2013-02-23T10:26:38.673
> 
> 标签：.htaccess, xampp

Apache 错误日志：

```
[Sat Feb 23 02:19:46.233604 2013] [core:alert] [pid 6904:tid 1592] [client ::1:53186] C:/xampp/htdocs/me/.htaccess: Invalid command 'CheckCaseOnly', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/me/ 
```

.ht 访问：

```
RewriteEngine On

CheckCaseOnly On
CheckSpelling On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^profile/(.*)$ /me/profile.php?username=$1 [QSA,L]
RewriteRule ^(.*)$ /me/index.php?unikpage=$1 [QSA,L] 
```

这是一个服务器错误。我试图使 URL 区分大小写。它是如何完成的？

# c++ - 我使用指针分配一个动态字符数组，它得到运行时异常？

> ID：15039459
> 
> 赞同：0
> 
> 时间：2013-02-23T10:26:40.900
> 
> 标签：c++

我写了下面的代码，但是当我在内存中分配 word 时它变成了 NULL！以下代码的问题在哪里？我被迫在此写下为什么将精简版拆分为单词:(请提供任何帮助

```
void strSplit(const char *line, char *words[]){

    char *word = new char[81];
    int index = 0;
    int s = strlen(line);
    for(int i = 0; i < s; i++)
    {
        if(line[i] != ' ' && line[i] != ',' && line[i] != ';')
        {
            if(word == NULL)
            {
                strcpy(word, (line[i] + "\0"));
            }
            else 
            {
                strcat(word, (line[i] + "\0"));
            }
        }
        else
        {
            if(word != NULL){
                strcpy(words[index], word);
                puts(words[index]);
                index++;
                puts(word);
                word = NULL;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:28:33.677

```
if (word == NULL) {
    strcpy(word, stuff);
} 
```

这是自杀。

# assembly - 使用 SUB 指令时出现意外输出

> ID：15039461
> 
> 赞同：0
> 
> 时间：2013-02-23T10:26:47.030
> 
> 标签：assembly, x86, masm, subtraction

我正在 MASM 中编写一个程序来创建和减去三个 32 位整数。我的问题是，`9000`减去`30000`似乎会导致`27000`,`21000`预期的时间。来源如下：

```
TITLE Add and Subtract

; This program adds and subtracts 32-bit integers.

.386
.model flat,stdcall
.stack 4096
ExitProcess PROTO, dwExitCode:DWORD
DumpRegs PROTO

.code
main PROC

    mov eax,50000h          ; EAX = 50000h
    mov ebx,30000h          ; EBX = 30000h
    mov ecx,43h             ; ECX = 43h

    sub eax,10000h          ; EAX = 40000h
    sub ebx,9000h           ; EBX = 21000h
    sub ecx,1h              ; ECX = 42h

    call DumpRegs

    INVOKE ExitProcess,0
main ENDP
END main 
```

DumpRegs 结果如下：

![意外的结果](../Images/f5142b8232db0edcd25add133908e81a.png)

如图所示，`EBX`的值`00027000`是`0021000`预期的时间。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:30:27.730

您将十六进制数误认为十进制数。

`30000h`= `196608d`。

`9000h`= `36864d`。

`196608d`- `36864d`= `159744d`。

`30000h`- `9000h`= `27000h`= `159744d`。

# joomla - 用joomla上的绝对图像替换相对图像src

> ID：15039467
> 
> 赞同：0
> 
> 时间：2013-02-23T10:27:21.603
> 
> 标签：joomla, relative-path, str-replace, absolute-path

我需要邮寄一些存储在数据库中的 html 代码。

对于要显示的图像，我需要用绝对路径替换相对路径。

我有一个名为 $display 的变量，它保存 HTML。

为此，我尝试休耕：

```
$root=JURI::root();
 str_replace('src="/images', 'src="' . $root .'images', $display); 

var_dump($display);//for testing 
```

$display 似乎根本没有改变。

**更新 1**

我被建议将代码更改为：

```
$root=JURI::root();
$display = str_replace('src="/images', 'src="' . $root .'images', $display) 
```

我也试过

```
$display = str_replace('src="/images', 'src="' . $root .'images', $display); 
```

但是 - 两者都没有工作：[

它改变了

```
src="/images/joomla_black.gif" 
```

到

```
src="http://images/joomla_black.gif" 
```

没有完整的网址：[

有什么建议吗？

**更新 2**

添加了这个：

```
echo('non fixed:');
var_dump($display);

$root=JURI::root();
$display = str_replace('src="/images', 'src="' . $root .'images', $display);
//fix images in display to absolute paths for mailing

echo('fixed:');
var_dump($display); 
```

两个显示字符串在输出上看起来相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:51:48.383

`str_replace`将返回值，它不会改变`$display`变量，所以你需要做

`$display = str_replace('src="/images', 'src="' . $root .'images', $display);`

如果 joomla 位于子文件夹中，您发布的另一行将返回根域，我认为您不需要

# c++ - 在 CUDA 上生成决策树

> ID：15039472
> 
> 赞同：0
> 
> 时间：2013-02-23T10:27:54.987
> 
> 标签：c++, memory, cuda, binary-tree

我想在CUDA上生成一些决策树，下面我们有伪代码（代码很原始，只是为了理解我写的内容）：

```
class Node
{
public :
    Node* father;
    Node** sons;
    int countSons;

    __device__ __host__ Node(Node* father)
    {
        this->father = father;
        sons = NULL;
    }
};

__global__ void GenerateSons(Node** fathers, int countFathers*, Node** sons, int* countSons)
{
    int Thread_Index = (blockDim.x * blockIdx.x) + threadIdx.x;

    if(Thread_Index < *(countFathers))
    {
        Node* Thread_Father = fathers[Thread_Index];
        Node** Thread_Sons;
        int Thread_countSons;
        //Now we are creating new sons for our Thread_Father
        /*
        * Generating Thread_Sons for Thread_Father;
        */
        Thread_Father->sons = Thread_Sons; 
        Thread_Father->countSons = Thread_countSons;

        //Wait for others
            /*I added here __syncthreads because I want to count all generated sons
             by threads
            */
            *(countSons) += Thread_countSons;
        __syncthreads();

        //Get all generated sons from whole Block and copy to sons

        if(threadIdx.x == 0)
        {
            sons = new Node*[*(countSons)];
        }
        /*I added here __syncthreads because I want to allocated array for sons
            */
        __syncthreads();

        int Thread_Offset;
        /*
        * Get correct offset for actual thread
        */
        for(int i = 0; i < Thread_countSons; i++)
            sons[Thread_Offset + i] = Thread_Sons[i];
    }
}

void main ()
{
    Node* root = new Node();
    //transfer root to kernel by cudaMalloc and cudaMemcpy
    Node* root_d = root->transfer();

    Node** fathers_d;
    /*
    * preapre array with father root and copy him to kernel
    */

    int* countFathers, countSons;
    /*
    * preapre pointer of int for kernel and for countFathers set value 1
    */

    for(int i = 0; i < LevelTree; i++)
    {
        Node** sons = NULL;
        int threadsPerBlock = 256; 
        int blocksPerGrid = (*(countFathers)/*get count of fathers*/  + threadsPerBlock - 1) / threadsPerBlock;
        GenerateSons<<<blocksPerGrid , threadsPerBlock >>>(fathers_d, countFathers, sons, countSons);
        //Wait for end of kernel call
        cudaDeviceSynchronize();

        //replace
        fathers_d = sons;
        countFathers = countSons;
    }
} 
```

因此，它适用于 5 级（为检查器生成决策树），但在 6 级我有错误。在内核代码的某个地方，malloc 正在返回`NULL`，对我来说，这是一个信息，即 blockThreads 中的某些线程无法分配更多内存。我很确定我正在清理所有我不需要的对象，在调用内核的每一端。我想，我无法理解 CUDA 中使用内存的一些事实。如果我在线程的本地内存中创建对象并且内核结束了他的活动，那么在内核的第二次启动时，我可以看到内核第一次调用的节点是。所以我的问题是对象在哪里`Node`从第一次调用内核开始存储？它们是否存储在块中线程的本地内存中？因此，如果这是真的，那么在每次调用我的内核函数时，我会减少该线程的本地内存空间吗？

我正在使用带有计算能力 2.1、CUDA SDK 5.0、带有 NSight 3.0 的 Visual Studio 2010 Premium 的 GT 555m

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:38:40.163

好吧，

我发现，内核中`new`的`malloc`调用被分配在设备上的**全局内存**中。我也发现了这个

> 默认情况下，CUDA 创建一个 8MB 的堆。

[CUDA 应用程序设计和开发，第 128 页](http://books.google.pl/books?id=Y-XmJO2uwvMC&pg=PA128&lpg=PA128&dq=cudaLimitMallocHeapSize%20defalut&source=bl&ots=WiOsS2x7IU&sig=FfGUzVYY5trLB8OPZRzYvzYC8jk&hl=pl&sa=X&ei=ykcqUZqoJoHTswbZ84GwAw&ved=0CHwQ6AEwBg#v=onepage&q=cudaLimitMallocHeapSize%20defalut&f=false)

因此，我使用这种方法`cudaDeviceSetLimit(cudaLimitMallocHeapSize, 128*1024*1024);`将设备上的堆内存增加到 128Mb，并且程序正确生成了 6 级树（22110 个儿子），但实际上我得到了一些内存泄漏......我需要找到它。

# javascript - 预览未在按键上加载

> ID：15039473
> 
> 赞同：0
> 
> 时间：2013-02-23T10:28:04.550
> 
> 标签：javascript, jquery

我是 jQuery 的新手。

当我单击`add`按钮显示 textarea 并在 textarea 中输入要显示预览的数据时，我创建了类似的东西。

但预览不起作用

[http://jsfiddle.net/nGfh4/](http://jsfiddle.net/nGfh4/)

HTML：

```
<div id='TextBoxesGroup'>
    <div id="TextBoxDiv1">
        <label>Textbox #1 :</label>
        <input type='textbox' id='textbox1'>
    </div>
</div>
<div id="add_comment_box"></div>
<input type='button' value='Add Button' id='addButton'>
<input type='button' value='Cancel Button' id='canButton'> 
```

JavaScript：

```
$(document).ready(function () {

    var commentNode = $('#lp-comment');
    //$(' #live-preview-form textarea').bind('blur keyup',function()
    commentNode.keypress(function (event) {
        alert('test');;
        commentNode.text($('#comment').val());
        commentNode.html($('#lp-comment').html().replace(/\n/g, '<br />'));
    });

    $("#addButton").click(function () {

        // $('#add_comment_box').css('display','block');
        var newTextBoxDiv = $(document.createElement('div')).attr("id", 'form').hide();
        //   newTextBoxDiv.after().html('<label>Textbox # : </label> <input type="text" name="textbox" id="textbox" value="" >');
        newTextBoxDiv.after().html(
            '<div id="live-preview-form" class="lp-block">' +
            '<textarea name="comment" id="comment" class="input" rows="10"></textarea>' +
            '</div>' +
            '<div id="live-preview-display" class="lp-block">' +
            '<div id="lp-comment">' +
            '</div>');
        newTextBoxDiv.appendTo("#add_comment_box").slideDown();
        //   $("#TextBoxesGroup").append(newTextBoxDiv);
    });

    $("#canButton").click(function () {

        $('#form').slideUp(function () {
            $('#form').remove();
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:02:41.573

请参阅此[页面](http://api.jquery.com/keyup/)底部的演示。

在文本框中键入“键入内容”之外的内容时，会在**keyup**函数上触发处理程序。它还触发了按钮单击事件。

在**keyup**函数的处理程序中，您可以编写显示预览的逻辑。

# android - SQLite - 保存更改的最快方法

> ID：15039488
> 
> 赞同：1
> 
> 时间：2013-02-23T10:30:02.693
> 
> 标签：android, performance, sqlite

我正在使用本地 SQLite 数据库和通过 WebService 访问的在线数据库做 Android 应用程序。我需要让本地数据库充满来自在线数据库的当前数据。我可以在在线数据库中获取上次更改的日期和时间，但来自 WebService 的答案只给了我上次更改的时间。不是更改了哪些行/ids/...。那么更新本地数据的最佳方法是什么？我应该清空整个 SQLite 数据库并从在线数据库中插入数据吗？或者我应该为每一行执行 UPDATE 命令？还是有更好的方法来做到这一点？

我需要它来为此找到最快的解决方案。

谢谢你的帮助。

**编辑：**我无法更改在线数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:42:06.500

我的建议：
使用 last_update_date 在在线数据库表中设置一列
发送本地数据库的最后更新日期
返回在线数据库上之后更改的所有行。
更新或插入新记录。

编辑：在您的编辑声明您无法更改在线数据库之后，除了清理本地数据库并从头开始插入所有内容之外，我看不到其他方法......

# android - xmlns:android="http://schemas.android.com/apk/res/android" 这一行在线性布局中被标记为错误

> ID：15039495
> 
> 赞同：2
> 
> 时间：2013-02-23T10:31:11.683
> 
> 标签：android, xml, android-linearlayout

在我的 XML 文件中，我做了一些`LinearLayout`'s，由于某种原因，我在网上遇到了一个错误： `xmlns:android="http://schemas.android.com/apk/res/android"`。它标有红色（错误），错误日志显示：`"Unexpected namespace prefix "xmlns" found for tag LinearLayout"`

有人知道那是什么意思吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T10:41:23.990

1）仅在您拥有的最外层布局中使用它。指定一次就足够了。删除它的所有其他出现。

请参阅[为标签 LinearLayout 找到的意外命名空间前缀“xmlns”](https://stackoverflow.com/questions/14916638/unexpected-namespace-prefix-xmlns-found-for-tag-linearlayout)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-31T12:11:27.070

如果您正在使用 Eclipse，只需转到菜单上的项目，然后清理...错误修复：D

# java - 如何将参数值保存在 .property 文件中？

> ID：15039498
> 
> 赞同：0
> 
> 时间：2013-02-23T10:31:35.693
> 
> 标签：java, jquery, jsp, url, servlets

如何在jsp的.properties文件中保存参数值及其值，如键值对

**例如。**
网址： [http](http://www.xyz.com/login.jsp) ://www.xyz.com/login.jsp ？**fname=harry&lname=potter&occupation=actor**

.property 文件必须如下所示
**fname=harry
lname=potter
职业=actor** 

是否可以？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:06:47.157

那这个呢：

```
final String urlString = "http://www.xyz.com/login.jsp?fname=harry&lname=potter&occupation=actor";
final URL url;
try {
    url = new URL(urlString);
} catch (MalformedURLException ex) {
    throw new RuntimeException(ex);
}
final Properties properties = new Properties();
for (final String param : url.getQuery().split("\\&")) {
    final String[] splitParam = param.split("=");
    properties.setProperty(splitParam[0], splitParam[1]);
}
for (final String key : properties.stringPropertyNames()) {
    System.out.println("Key " + key + " has value " + properties.getProperty(key) + ".");
}
final FileOutputStream fileOutputStream;
try {
    fileOutputStream = new FileOutputStream(new File("My File"));
} catch (FileNotFoundException ex) {
    throw new RuntimeException(ex);
}
try {
    properties.store(fileOutputStream, "Properties from URL '" +urlString + "'.");
} catch(IOException ex) {
    throw new RuntimeException(ex);
} finally {
    try {
        fileOutputStream.close();
    } catch (IOException ex) {
        throw new RuntimeException(ex);
    }

} 
```

这将解析 URL 并将参数放入`Properties`对象中，然后将其写入文件。

请注意，如果您的 URL 字符串中有任何重复的键，它们将被覆盖，因此此方法将不起作用。在这种情况下，您可能想看看[Apache HttpComponents](http://hc.apache.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:03:28.547

检查`java.util.Properties.store(OutputStream, String)`和`java.util.Properties.store(Writer, String)`(Java 1.6)

# linux - 解释多线程程序的 Linux 时间命令结果 (%CPU > 100)

> ID：15039499
> 
> 赞同：1
> 
> 时间：2013-02-23T10:31:35.373
> 
> 标签：linux, time, benchmarking, blast

我想在我的服务器上对 BLAST 运行时间进行基准测试，所以我启动了该`time`命令。服务器有 16 个 CPU，我正在运行 BLAST 16 线程。在我进行分析时，可能还有其他应用程序并行运行。

输出如下：

```
184255.45user 458.23system 6:37:54elapsed 773%CPU (0avgtext+0avgdata 83504272maxresident)k
294680inputs+10029344outputs (1799major+149694417minor)pagefaults 0swaps 
```

将用户时间解释为 CPU 运行我的应用程序所花费的秒数，我得到的时间超过了总时间。我见过有人告诉我应该用 %CPU 来划分时间，但是我只得到了 3 分钟，这对于 BLAST 和我放入其中的大小的输入是不现实的。

我需要的信息是用户时间，但我不知道如何解释它。

对结果的解释有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-06T10:22:01.173

从手册页（并取自[此处](https://superuser.com/questions/338035/how-do-i-interpret-the-output-of-the-time-command)）：

> ```
> The default format is:
> 
>     %Uuser %Ssystem %Eelapsed %PCPU (%Xtext+%Ddata %Mmax)k
>     %Iinputs+%Ooutputs (%Fmajor+%Rminor)pagefaults %Wswaps 
> ```

因此，在用户空间中花费了*184255秒，在内核空间中花费了**458*秒，“实际”时间经过了*6 小时 37 分 54 秒。*

因此，正如 Dietrich Epp 在他的评论中指出的那样，看看经过的时间，他们匹配， 6: *37* :53是*397.8833*分钟。

 *[这是](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1)对时间差异的一个很好的解释`user/system/real(elapsed)`：

> Real 是挂钟时间 - 从通话开始到结束的时间。这是所有经过的时间，包括其他进程使用的时间片和进程阻塞的时间（例如，如果它正在等待 I/O 完成）。
> 
> 用户是进程内用户模式代码（内核外部）所花费的 CPU 时间量。这只是执行进程中使用的实际 CPU 时间。其他进程和进程阻塞的时间不计入此数字。
> 
> Sys 是进程内在内核中花费的 CPU 时间量。这意味着在内核中执行系统调用所花费的 CPU 时间，而不是仍在用户空间中运行的库代码。像“用户”一样，这只是进程使用的 CPU 时间。有关内核模式（也称为“主管”模式）和系统调用机制的简要说明，请参见下文。*

# c# - DirectX 中的网格渲染不正确

> ID：15039500
> 
> 赞同：1
> 
> 时间：2013-02-23T10:31:40.077
> 
> 标签：c#, 3d, directx, render

我对 DirectX 还是很陌生，但是我接近实现在 C# 中呈现特殊文件格式的目标。我有最后一个障碍。我已经编写了一些代码来将文件解析为网格对象。我这样做是为了允许渲染多个纹理。正如我之前所说，我对 DirectX 比较陌生，并且从未从头开始创建网格对象。我在互联网上看了很多，试图更好地了解如何从头开始创建一个。然而，关于这个主题的许多教程都没有处理子网格，甚至缺乏微软自己的文档。我遇到的问题是模型渲染不正确（见下文）。我真的不确定 AttributeRanges 的属性是否正确。或者我的索引整体不正确（渲染所有模型时）。 [![渲染问题的图像](../Images/c94c52512333b58155bd2836230fb743.png)](https://i.stack.imgur.com/LYejE.png)

我可以排除的一件事是我的数据的有效性。我 100% 确定我的数据是正确的。我的顶点位置、纹理映射和我的索引（对于每个单独模型的顶点数据更正）。如果我调整我的循环并只渲染第一个模型。这是我的结果。 [![第一个模型渲染](../Images/a43a5b1364724efae5da0f755460c809.png)](https://i.stack.imgur.com/2h03K.png)

这是我的代码。我知道这很乱：|

```
public void RenderModel(Model[] models,bool isTextured = false,bool wireFrame = false)
    {
 //Model object contains all vertex data and indices for that model
 //The indices do not hold any relation to other models.

  this.modelss = models;
    int vertexCount = 0;

        for (int currentModelID = 0; currentModelID < models.Length; currentModelID++)
        {
            Model model = models[currentModelID];

            vertexCount += model.renderDataSource.vertices.Length;

            AttributeRange range = new AttributeRange();
            range.AttributeId = currentModelID;
            range.FaceCount = model.getIndices().Length / 3;

            range.FaceStart = Indices.Count /3;
            range.VertexCount = model.getTexturedVertices().Length;
            range.VertexStart = vertices.Count;

           this.vertices.AddRange(model.getTexturedVertices());

            this.Indices.AddRange(model.getIndices());
            Console.WriteLine("ID: " + range.AttributeId + " FaceCount: " + range.FaceCount + " FaceStart: " + range.FaceStart + " vercount " + range.VertexCount + " verstart: " + range.VertexStart );

            attributeRanges.Add(range);

        }

           this.vertexBuffer = new VertexBuffer(typeof(CustomVertex.PositionNormalTextured),vertices.Count,
                              device, Usage.Dynamic | Usage.WriteOnly, CustomVertex.PositionNormalTextured.Format, Pool.Default);
            vertexBuffer.SetData(vertices.ToArray(), 0, LockFlags.None);
            getTextures();

        this.indexBuffer = new IndexBuffer(typeof(ushort), Indices.Count, device, Usage.WriteOnly, Pool.Default);
        indexBuffer.SetData(Indices.ToArray(), 0, LockFlags.None);

    int faces = Indices.Count /3;
    int verCount = vertices.Count;

         model3d = new Mesh(Indices.Count /3 , vertices.Count,     MeshFlags.SystemMemory,CustomVertex.PositionNormalTextured.Format, device);

          model3d.IndexBuffer.SetData(Indices.ToArray(), 0, LockFlags.None);
           model3d.VertexBuffer.SetData(vertices.ToArray(), 0, LockFlags.None);

           model3d.SetAttributeTable(attributeRanges.ToArray());
        Render(isTextured);

    }

 private void Render(bool isTextured)
    {
        float x = (float)Math.Cos(rot);
        float z = (float)Math.Sin(rot);
        device.BeginScene();
        setupLightingAndCamera();

        device.Transform.Projection = Matrix.PerspectiveFovLH((float)Math.PI / 4, this.Width / this.Height, 1f, 50f);
        device.Transform.View = Matrix.LookAtLH(new Vector3(x, 8, z), new Vector3(0, 0, 0), new Vector3(0, 1, 0));

            DrawMesh();
        device.EndScene();

    }

private void DrawMesh()
    {

        for (int i = 0; i < modelss.Length; i++)
        {
            Model model = modelss[i];

            material = new Material();

            material.Diffuse = Color.White;
            material.Specular = Color.LightGray;
            material.SpecularSharpness = 15.0F;
            device.Material = material;

   //Just obtains correct file from info in dictionaries
                device.SetTexture(0, textures[textureName[model.renderDataSource.shader]]);

            model3d.DrawSubset(i);

        }
    } 
```

最后是我的调试输出，可能会有所帮助。

```
 ID: 0 FaceCount: 22 FaceStart: 0 vercount 34 verstart: 0
   ID: 1 FaceCount: 16 FaceStart: 22 vercount 24 verstart: 34
   ID: 2 FaceCount: 16 FaceStart: 38 vercount 24 verstart: 58
   ID: 3 FaceCount: 16 FaceStart: 54 vercount 24 verstart: 82
   ID: 4 FaceCount: 446 FaceStart: 70 vercount 562 verstart: 106
   ID: 5 FaceCount: 1176 FaceStart: 516 vercount 900 verstart: 668
   ID: 6 FaceCount: 28 FaceStart: 1692 vercount 32 verstart: 1568
   ID: 7 FaceCount: 47 FaceStart: 1720 vercount 76 verstart: 1600
   ID: 8 FaceCount: 28 FaceStart: 1767 vercount 32 verstart: 1676
   ID: 9 FaceCount: 47 FaceStart: 1795 vercount 76 verstart: 1708
   ID: 10 FaceCount: 94 FaceStart: 1842 vercount 90 verstart: 1784 
```

任何形式的帮助，将不胜感激。谢谢你

# twitter-bootstrap - 如何从 yii 中的引导复选框按钮中获取价值？

> ID：15039502
> 
> 赞同：3
> 
> 时间：2013-02-23T10:31:45.563
> 
> 标签：twitter-bootstrap, checkbox, yii, yii-extensions

我正在使用 yii-bootstrap 扩展并想使用复选框按钮组。渲染它的功能没有问题，但我不知道如何读取哪个按钮被选中，哪个没有。是否有可能将每个复选框绑定到模型的属性？

这是我目前使用的（它实际上是来自 yii-bootstrap 网站的精确副本）：

```
<?php $this->widget('bootstrap.widgets.TbButtonGroup', array(
  'type' => 'primary',
  'toggle' => 'radio', // 'checkbox' or 'radio'
  'buttons' => array(
    array('label'=>'Left'),
    array('label'=>'Middle'),
    array('label'=>'Right'),
  ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:46:41.550

我需要这个按钮组来选择哪些详细信息应该用于在搜索中进行过滤。这就是为什么我的模型中有一些辅助属性（在这些示例中遵循命名约定）$leftSearch、$middleSearch 和 $rightSearch。

我希望按钮根据用户的选择保持推入或推出（否则会让人感到困惑，因为每次刷新后按钮都不会被按下，但搜索属性将存储在用户看不到的隐藏字段中）。我实现了使用

```
'active' => ($model->leftSearch)?true:false, 
```

另一件事是数据值，它会根据用户在提交页面之前选择的内容而有所不同。这是通过以下方式完成的：

```
'data-value' => ($model->leftSearch)?0:1, 
```

视图中的完整代码如下所示：

```
$this->widget('bootstrap.widgets.TbButtonGroup', array(
        'type' => 'primary',
        'toggle' => 'checkbox',
        'buttons' => array(
            array('label'=>'Left', 
                'active' => ($model->leftSearch)?true:false,
                'htmlOptions'=>array(
                    'data-field' => 'Model_leftSearch',
                    'data-value' => ($model->leftSearch)?0:1,
            ),),
            array('label'=>'Middle', 
                'active' => ($model->middleSearch)?true:false,
                'htmlOptions'=>array(
                    'data-field' => 'Model_middleSearch',
                    'data-value' => ($model->middleSearch)?0:1,
            ),),
            array('label'=>'Right', 
                'active' => ($model->rightSearch)?true:false,
                'htmlOptions'=>array(
                    'data-field' => 'Model_rightSearch',
                    'data-value' => ($model->rightSearch)?0:1,
            ),),
        ),
    ));
echo CHtml::activeHiddenField($model, 'leftSearch');
echo CHtml::activeHiddenField($model, 'middleSearch');
echo CHtml::activeHiddenField($model, 'rightSearch'); 
```

javascript与frostyterrier发布的完全相同

```
Yii::app()->clientScript->registerScript('buttonGroup', "
  $(function(){
   $('.btn-group a').click(function(){
    var fieldId = $(this).data('field');
    var value = $(this).data('value');
    $('#' + fieldId).val(value); 
   });
  });
", CClientScript::POS_END); 
```

关于 javascript 部分，我唯一不明白的是，它在插入到上面的视图中时可以工作，但如果包含在某些外部 .js 文件中则不起作用。我认为它与 POS_END 有关，但我不是 javascript 专家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:32:19.273

我检查了 TbButtonGroup 的来源，似乎没有办法将每个复选框绑定到一个属性。但是，您可以使用数据属性将每个按钮链接到表示模型属性的隐藏字段。这可能是下一个最接近的事情，也可能需要最少的代码。您可以这样做：

PHP：要求您将模型存储在名为 $model 的变量中。放置在表单标签内。确保已加载 jQuery。

```
$this->widget('bootstrap.widgets.TbButtonGroup', array(
  'type' => 'primary',
  'toggle' => 'radio', // 'checkbox' or 'radio'
  'buttons' => array(
    array('label'=>'Left', 'htmlOptions' => array(
        'data-field' => 'Model_left',
        'data-value' => 1,
    )),
    array('label'=>'Middle', 'htmlOptions' => array(
        'data-field' => 'Model_middle',
        'data-value' => 2,
    )),
    array('label'=>'Right', 'htmlOptions' => array(
        'data-field' => 'Model_right',
        'data-value' => 3,
    )),
  ),
));
echo CHtml::activeHiddenField($model, 'left');
echo CHtml::activeHiddenField($model, 'middle');
echo CHtml::activeHiddenField($model, 'right'); 
```

在上面的代码中，单词 Model 需要替换为您的模型名称，单词 left、middle、right 需要替换为您的模型属性。数据值需要设置为您希望每个按钮表示的值。

Javascript：

```
Yii::app()->clientScript->registerScript('buttonGroup', "
$(function(){
    $('.btn-group a').click(function(){
        var fieldId = $(this).data('field');
        var value = $(this).data('value');
        $('#' + fieldId).val(value);
    });
});
", CClientScript::POS_END); 
```

然后就可以正常提交表单了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T19:54:25.980

您可以为每个按钮设置 ID：

```
<?php $this->widget('bootstrap.widgets.TbButtonGroup', array(
  'type' => 'primary',
  'toggle' => 'radio', // 'checkbox' or 'radio'
  'buttons' => array(
    array('label'=>'Left', 'url' => '#', 'linkOptions'=>array('id' => 'btn_1')),
    array('label'=>'Middle', 'url' => '#', 'linkOptions'=>array('id' => 'btn_2')),
    array('label'=>'Right', 'url' => '#', 'linkOptions'=>array('id' => 'btn_3')),
  ),
)); ?> 
```

# browser - 当前在 Web 浏览器中对 websockets XMPP 客户端的支持是什么？

> ID：15039507
> 
> 赞同：0
> 
> 时间：2013-02-23T10:32:10.387
> 
> 标签：browser, websocket, xmpp, strophe

当前（2013 年春季）在 Web 浏览器中实现的 XMPP 客户端中对 WebSockets 技术的支持是什么？我已阅读可以在服务器上打开 WebSockets 模块（例如通过[此模块](http://blog.superfeedr.com/xmpp-over-websockets/)），但是如何从浏览器连接到它们？是否有任何现有的客户端或扩展？我对[Strophe.js](http://strophe.im/)特别感兴趣，因为到目前为止它提供了很好的工作——使用 BOSH。

# .net - 即使添加了引用，LinqPad Linq Include() 扩展方法也找不到

> ID：15039508
> 
> 赞同：24
> 
> 时间：2013-02-23T10:32:14.733
> 
> 标签：.net, entity-framework, linq, linqpad

我能做到

```
var result =  OAS_Questions.Count (oasq => oasq.Id!=0);
result.Dump(); 
```

乃至

```
var result =  OAS_Questions;
result.Dump(); 
```

但是当我尝试包含“问题”的子对象时，通过

```
var result =  OAS_Questions.Include("OAS_QuestionOptions");
result.Dump(); 
```

我看到以下错误

> “System.Data.Linq.Table”不包含“Include”的定义，并且找不到接受“System.Data.Linq.Table”类型的第一个参数的扩展方法“Include”（按 F4 添加使用指令或程序集参考）

我已经尝试添加对以下程序集引用的引用。

1.  系统代码
2.  系统数据
3.  系统.数据.实体
4.  System.Data.Linq
5.  System.Linq.Expressions
6.  System.Data.DataSetExtensions

但是在编写查询时扩展方法“Include()”仍然不可用，并且它给出了语法错误。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-07-25T08:27:39.553

如果您通过 LinqPad 使用 EF，那么更好的方法是使用`.Include`( [http://msdn.microsoft.com/en-us/library/gg671236%28VS.103%29.aspx](http://msdn.microsoft.com/en-us/library/gg671236%28VS.103%29.aspx) ) 的强类型版本，如下所示：

1.  打开你的 LinqPad 查询
2.  右键单击-> 查询属性
3.  添加引用`EntityFramework.dll`
4.  通过附加命名空间导入选项卡添加`System.Data.Entity`

然后你就有了智能感知并且可以使用.Include的强类型版本，例如：

```
var result =  OAS_Questions.Include(q => q.OAS_QuestionOptions); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-27T16:31:54.767

您需要使用 EntityFramework 项目的 DLL 中的 Typed DataContext (`ObjectContext`或`DbContext`)。您可以通过执行以下步骤来做到这一点：

1.  单击应用程序左上角的**添加连接链接。**
2.  在`Choose Data Context`向导中，选择该`Use a typed data context from your own assembly`选项。
3.  单击适合您的解决方案的 LINQPad 驱动程序选项（LINQ to SQL、EF 4.0 及更低版本或 EF 4.1 及更高版本），然后单击**Next**。
4.  单击`Browse`右上角并导航到然后选择您的 EF 项目程序集。
5.  选择实体数据模型，然后单击**OK**。
6.  指定和`Server`，然后单击**确定**。`Log on details``database`

 **您现在应该能够`.Include`在 LinqPad 中使用该语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-23T10:36:41.907

默认情况下，Linqpad 使用 Linq2Sql DataContext，它不允许您进行包含。

要获取包含扩展方法，请使用项目程序集 (EF4.x /EF5) 中的 Typed DataContext**

# cakephp - cakephp 从 2.2 版本升级到 2.3 版本涉及哪些步骤？

> ID：15039513
> 
> 赞同：12
> 
> 时间：2013-02-23T10:32:43.483
> 
> 标签：cakephp

我想将我的 CakePHP 应用程序从 2.2 版本升级到 2.3，我应该怎么做？

覆盖lib文件夹就够了吗？我检查了差异并注意到应用程序文件夹中也有更改，因此不清楚这些是否也需要更新。

迁移指南没有关于如何执行升级的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T10:45:09.803

像这样为“次要”升级更新 lib 文件夹通常就足够了。[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html)
中始终提供迁移时可以运行的更改/检查的完整列表。

# sql-server - 从具有多个输入的表中选择不同的 id

> ID：15039516
> 
> 赞同：-3
> 
> 时间：2013-02-23T10:33:02.353
> 
> 标签：sql-server, distinct

`PersonId`我的`People`桌子上有一个。

`PositionId`现在我已经根据名为and的表为这些 Person 分配了位置`PersonId`。该表的结构如下：-

```
CorporateTeam
PersonId    PositionId
1           1
2           2
2           3 
```

所以 PersonId 为 2 的人有多个职位。

现在我有另一个表`Skills`是基于`PositionId`

所以我想根据 PersonId 检索特定人的多种**不同****技能。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:57:47.723

```
create table Person (
    PersonId int
)

create table Position (
    PersionId int,
    PositionId int
)

create table Skill (
    PositionId int,
    SkillId int
)
GO

insert into Person values (1), (2)
insert into Position values (1, 1), (2, 2), (2, 3)
insert into Skill values (2, 1), (2, 2), (3, 3)
GO

select distinct s.SkillId
from Person p
inner join Position pos on p.PersonId = pos.PersionId
inner join Skill s on pos.PositionId = s.PositionId
where p.PersonId = 2 
```

# java - 如何动态地将元素添加到字符串数组？

> ID：15039519
> 
> 赞同：64
> 
> 时间：2013-02-23T10:33:23.363
> 
> 标签：java, arrays, string, arraylist

我想从 for 循环内部将动态数量的元素添加到字符串数组。

如何创建一个未定义长度的字符串数组？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-23T10:35:37.850

`Arrays`在 Java 中具有定义的大小，以后不能通过添加或删除元素来更改它（您可以[在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)阅读一些基础知识）。

相反，使用[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)：

```
ArrayList<String> mylist = new ArrayList<String>();
mylist.add(mystring); //this adds an element to the list. 
```

当然，如果您事先知道要在数组中放入多少个字符串，则可以创建一个该大小的数组并使用正确的位置设置元素：

```
String[] myarray = new String[numberofstrings];
myarray[23] = string24; //this sets the 24'th (first index is 0) element to string24. 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-23T11:23:35.510

使用字符串数组时，您必须在初始化时给出数组的大小

例如

```
String[] str = new String[10]; 
```

您可以使用索引 0-9 来存储值

```
str[0] = "value1"
str[1] = "value2"
str[2] = "value3"
str[3] = "value4"
str[4] = "value5"
str[5] = "value6"
str[6] = "value7"
str[7] = "value8"
str[8] = "value9"
str[9] = "value10" 
```

如果您使用的是字符串数组的 ArrayList instread，则可以在不初始化数组大小的情况下使用它 ArrayList str = new ArrayList();

您可以使用Arraylist的**add方法添加值**

```
str.add("Value1"); 
```

从arraylist中获取一个值，你可以使用**get**方法

```
String s = str.get(0); 
```

**按大小**方法查找项目总数

```
int nCount = str.size(); 
```

[从这里](http://developer.android.com/reference/java/util/ArrayList.html)阅读更多

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T10:40:47.753

您不能在字符串数组中添加超过其大小的添加项目，我建议您使用**ArrayList** 您可以在运行时在 arrayList 中动态添加项目，如果您觉得有任何问题可以自由询问

# jakarta-mail - 使用java mail api通知注册用户

> ID：15039520
> 
> 赞同：0
> 
> 时间：2013-02-23T10:33:32.440
> 
> 标签：jakarta-mail

实际上，我试图通过向他发送电子邮件并使用以下代码来通知在我的应用程序上注册的用户，但它不断地给出异常 java.lang.ClassFormatError 我怎样才能摆脱这个异常。这是异常和代码

例外：

```
 Exception in thread "main" java.lang.ClassFormatError: Absent Code attribute in      
 method that is not native or abstract in class file javax/mail/MessagingException

     at java.lang.ClassLoader.defineClass1(Native Method)
     at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
     at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
     at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
     at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
     at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
     at java.security.AccessController.doPrivileged(Native Method)
     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)

 Could not find the main class: SendMailTLS.  Program will exit. 
```

代码是：

```
 import java.util.Properties;

 import javax.mail.Message;
 import javax.mail.MessagingException;
 import javax.mail.PasswordAuthentication;
 import javax.mail.Session;
 import javax.mail.Transport;
 import javax.mail.internet.InternetAddress;
 import javax.mail.internet.MimeMessage;

 public class SendMailTLS {

     public static void main(String[] args) {

    final String username = "username@gmail.com";
    final String password = "password";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("from-email@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("to-email@gmail.com"));
        message.setSubject("Testing Subject");
        message.setText("Dear Mail Crawler,"
            + "\n\n No spam to my email, please!");

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
  }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:11:13.240

您的 CLASSPATH 中有 javaee.jar 或 j2ee.jar 吗？如果是这样，请摆脱它。

# vb.net - 使用 VB.NET 打印 MS Access 报告

> ID：15039523
> 
> 赞同：0
> 
> 时间：2013-02-23T10:34:04.640
> 
> 标签：vb.net, ms-access, printing, report

我到处研究如何使用 VB.NET 打印 MS Access 报告，但不幸的是，我找不到。也许有人可以在这里帮助我解决我的问题。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-17T23:30:30.757

不确定 VB.NET，但以下代码使用非常相似的 VBA。

而不是使用打开报告
`DoCmd.OpenReport "reportName", acViewPreview,,, acWindowNormal,`
（它以打印预览模式打开它，以便用户可以选择打印机并自己打印出来），使用：

`DoCmd.OpenReport "reportName", acViewNormal,,, acWindowNormal,`

这将使用计算机上安装的默认打印机打印报告。

或者，您可以使用`DoCmd.PrintOut()`命令 ( [https://msdn.microsoft.com/en-us/library/office/ff192667.aspx](https://msdn.microsoft.com/en-us/library/office/ff192667.aspx) )

# java - 如何使用接口声明 DAO 变量，但在 Spring Framework 中将具体实现放入其中？

> ID：15039524
> 
> 赞同：0
> 
> 时间：2013-02-23T10:34:07.633
> 
> 标签：java, spring, hibernate, spring-mvc, annotations

我正在研究如何将 Spring Framework 与 Hibernate 集成，对此我有一些疑问。

我开发了一个运行良好的个人示例，但我不确定该项目的架构。

所以我有一个名为**PersonDAO**的接口，我已经在我的 DAO 中声明了 CRUD 操作

然后我通过实现前一个接口的类**PersonDAOImpl**创建了该接口的具体实现。

然后我创建了以下主类来测试我的 dao 对象：

```
package org.andrea.myexample.HibernateOnSpring;

import org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl;
import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {

public static void main( String[] args ){

    ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
    System.out.println("Contesto recuperato: " + context);

    Person persona1 = new Person();

    persona1.setFirstname("Pippo");
    persona1.setLastname("Blabla");
    persona1.setPid(1);

    System.out.println("Creato persona1: " + persona1);

    PersonDAOImpl dao = (PersonDAOImpl) context.getBean("personDAOImpl");

    System.out.println("Creato dao object: " + dao);

    dao.addPerson(persona1);

    System.out.println("persona1 salvata nel database");

} 
```

}

DAO 运行良好，我的对象正确地保存在我的数据库中，但我有以下架构疑问：**如果我不使用它，为什么我有一个接口？**

最后，通过这种方式，我无法拥有接口并直接使用具体类......

我认为，在架构上，这太糟糕了......

我尝试更改我的**App.java**类并尝试以这种方式使用 DAO 对象：

```
PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl"); 
```

但不工作...

在本教程中：http: [//viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)

还有另一种情况，真正使用接口，女巫中有一个**ContactServiceImpl**类，我有使用**@Autowired**注释声明的**ContactDAO**变量：

 **```
@Autowired
private ContactDAO contactDAO; 
```

**ContactDAO**是一个 DAO**接口**，但 Spring 自动装配一个对象，它是它的实现**ContactDAOImpl**的一个实例（使用 @Repository 进行注释）

因此，使用 **@Autowired 注释，在这段代码中，我可以使用接口声明一个变量，但在这个变量中放入对它的具体实现的引用！！！

在我的项目中，我不使用注释 bean 配置机制，但我使用的是 XML 配置机制......但我认为在这种情况下我也可以做类似的事情......

我的项目 XML 配置文件已经声明了我的 bean，如下所示：

```
<bean id="personDAOImpl" class="org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl" >
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我该怎么做才能将我的 dao 变量声明为接口并将其具体实现放入其中？（仍然使用 XML 配置）

这是我使用时遇到的**堆栈跟踪错误：**

```
 PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl"); 
```

在我的 App.Java 测试类中

**信息：使用 Hibernate SessionFactory 的数据源 [org.apache.commons.dbcp.BasicDataSource@7363c839] 进行 HibernateTransactionManager Contesto recuperato：org.springframework.context.support.ClassPathXmlApplicationContext@591f5ff9：启动日期 [2013 年 2 月 23 日星期六 11:42:25 CET ]; 线程“main”Creato persona1 中的上下文 hierarchyException 的根：org.andrea.myexample.HibernateOnSpring.entity.Person@23653628 java.lang.ClassCastException：org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl$$EnhancerByCGLIB$$d46b3a86 不能投射到 org.andrea.myexample.HibernateOnSpring.App.main(App.java:27) 的 org.andrea.myexample.HibernateOnSpring.dao.PersonDAO**

Tnx安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:44:04.903

接口和具体实现的本质是保持多态性。在测试环境中，您可以使用不同的具体实现但相同的接口，而在开发模式下，可以将另一个实现放入 xml 配置中。您可以轻松地交换 xml 配置，而无需更改 java 代码，例如从开发环境交换到测试环境，或者其他测试人员将使用您的相同代码但具有不同的 xml 配置。

如果您要直接使用 xml 中的实现，那么您将失去多态性的力量，并且如果您必须切换到不同的实现，则需要更改 java 代码。

你的 PersonDAOImpl 必须实现 PersonDAO，例如

```
public class PersonDAOImpl implements PersonDAO 
```

XML 配置仅用于跨应用程序的依赖注入或单例 bean 实例，它与保留多态性没有任何关系。你要做的就是遵循java的接口实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:43:45.537

PersonDAOImpl 的代码在哪里？它必须实现 PersonDAO 接口**

# python - python中的os.open和os.fdopen有什么区别

> ID：15039528
> 
> 赞同：47
> 
> 时间：2013-02-23T10:34:31.847
> 
> 标签：python

我真的很困惑何时使用`os.open`以及何时使用`os.fdopen`

我正在做我所有的工作，`os.open`它没有任何问题，但我无法理解我们需要什么条件`file descriptors`以及所有其他功能，比如`dup`和`fsync`

是`file object`不同于`file descriptor`

我的意思是`f = os.open("file.txt",w)`

现在是文件对象还是文件描述符？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-23T10:49:43.517

您将内置`open()`功能与模块`os.open()`提供的功能混淆了`os`。它们完全不同；`os.open(filename, "w")`是无效的 Python（`os.open`接受整数标志作为其第二个参数），`open(filename, "w")`是。

简而言之，`open()`创建新的文件对象，`os.open()`创建操作系统级别的文件描述符，并从文件描述符中`os.fdopen()`创建文件对象。

文件描述符是用于处理由操作系统内核直接提供的文件的低级工具。文件描述符是一个小整数，用于标识内核为每个进程保存的打开文件表中的打开文件。许多系统调用接受文件描述符，但使用起来不方便，通常需要固定宽度的缓冲区、在某些条件下多次重试以及手动错误处理。

文件对象是包装文件描述符的 Python 类，以使处理文件更方便且不易出错。例如，它们提供错误处理、缓冲、逐行读取、字符集转换，并在垃圾收集时关闭。

回顾一下：

*   内置`open()`接受一个文件名并返回一个新的 Python 文件对象。这是您在大多数情况下所需要的。

*   `os.open()`接受一个文件名并返回一个新的文件描述符。该文件描述符可以传递给其他低级函数，例如`os.read()`and`os.write()`或 to `os.fdopen()`，如下所述。只有在编写依赖于操作系统的 API 的代码时才需要这个，例如使用`O_EXCL`标志来`open(2)`.

*   `os.fdopen()`接受一个现有的文件描述符——通常由 Unix 系统调用（例如`pipe()`or ）产生`dup()`，并围绕它构建一个 Python 文件对象。它有效地将文件描述符转换为完整的文件对象，这在与 C 代码或仅创建低级文件描述符的 API 交互时很有用。

可以通过组合（创建文件描述符）和（将其包装在文件对象中）`open`来模拟内置：`os.open()``os.fdopen()`

```
# functionally equivalent to open(filename, "r")
f = os.fdopen(os.open(filename, os.O_RDONLY)) 
```

# android - Android 应用内购买库存退回零产品

> ID：15039529
> 
> 赞同：0
> 
> 时间：2013-02-23T10:34:37.600
> 
> 标签：android, in-app-purchase

我正在关注 Android 应用内购买示例 (in-app-billing-v03) 并从设置和库存查询返回成功，我猜这意味着应用程序本身被正确识别。但是，即使我在应用程序的开发人员控制台中配置了两个，我也没有在库存中返回任何产品。

应用程序处于“草稿”状态（已上传 apk，在开发者控制台中完成商品详情和定价），应用内产品显示为“活动”。我配置了一个测试用户并且正在使用该帐户。

大约 24 小时前，我在开发人员控制台上配置了该应用程序，因此现在其他查询中提到的任何服务器延迟肯定都不是问题。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:02:06.200

呃，对不起，伙计们，库存当然会显示购买的物品，所以正确答案是 0。

但是，在使用被指定为测试帐户的帐户时，我在使用 getSkuDetails() 时也遇到了错误。这只能通过将开发者控制台上使用的主要 Google 帐户添加到测试设备来解决。

# android - 是否可以将触摸手势历史保存到 Android 中的图像中？

> ID：15039531
> 
> 赞同：1
> 
> 时间：2013-02-23T10:35:09.620
> 
> 标签：android, image, gesture

我想开发一个可以将触摸手势历史保存到Android平台上的图像的应用程序。

这是android开发者网站关于触摸手势历史的简要说明。

"History。通过调用MotionEvent方法getHistorySize()可以得到一个手势历史的大小。然后通过运动事件的getHistorical方法可以得到每个历史事件的位置、大小、时间、压力。History是“在渲染用户手指的轨迹时很有用，例如用于触摸绘图。有关详细信息，请参阅 MotionEvent 参考。”

来源：http: [//developer.android.com/training/gestures/movement.html](http://developer.android.com/training/gestures/movement.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:59:53.150

简短的回答：是的，这是可能的。引用的文档描述的是，当运动事件到达您的活动时，您可以获得这一事件的历史记录。这是因为在将它们传送到您的 Activity 之前可能会经过一段时间，并且 Android 会在此期间累积事件。每次收到 onTouch 时，您都需要提取此信息并将其存储在某种数据结构中。然后在您的 onDraw 方法中将其显示给用户。如果要将创建的位图图像写入文件，可以使用

```
Bitmap bm2 = createBitmap();
// Do the draw commands to the bitmap here
OutputStream stream = new FileOutputStream("/sdcard/test.jpg");
/* Write bitmap to file using JPEG and 80% quality hint for JPEG. */
bm2.compress(CompressFormat.JPEG, 80, stream); 
```

此代码来自此[stackOverflow 问题](https://stackoverflow.com/questions/4579647/how-to-save-a-jpeg-image-on-android-with-a-custom-quality-level)

# c# - 无法解决依赖项“html5shiv”

> ID：15039547
> 
> 赞同：-1
> 
> 时间：2013-02-23T10:36:46.307
> 
> 标签：c#, twitter-bootstrap, asp.net-mvc-4, nuget

请帮我解决这个错误：

```
PM> Install-Package twitter.bootstrap.mvc4.sample
Attempting to resolve dependency 'twitter.bootstrap.mvc4'.
Attempting to resolve dependency 'html5shiv'.
Install-Package : Unable to resolve dependency 'html5shiv'.
At line:1 char:16
+ Install-Package <<<<  twitter.bootstrap.mvc4.sample
+ CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
+ FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

我想离线安装**twitter.bootstrap.mvc4.samplen.nupkg** 。我在 vs2012 中将文件夹路径添加到 nuget 管理器。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:40:08.280

`Install-Package html5shiv`先试试跑

# c - 用 C 语言在 Mac OS X 上使用 libpcap 进行嗅探器

> ID：15039551
> 
> 赞同：5
> 
> 时间：2013-02-23T10:37:47.657
> 
> 标签：c, pcap, packet-sniffers

我试图创建自己的嗅探器（仅供娱乐），我在 Mac 上工作。我正在使用 libpcap，这是一个非常好的嗅探库。所以，我使用了这个简单的嗅探器，它嗅探了 5 个数据包：（它是用 C 编写的）

```
#include <pcap.h>
#include "hacking.h"

void pcap_fatal(const char *failed_in, const char *errbuf) {
     printf("Fatal Error in %s: %s\n", failed_in, errbuf);
     exit(1);
}

int main() {
    struct pcap_pkthdr header;
    const u_char *packet;
    char errbuf[PCAP_ERRBUF_SIZE];
    char *device;
    pcap_t *pcap_handle;
    int i;

device = pcap_lookupdev(errbuf);
if(device == NULL)
    pcap_fatal("pcap_lookupdev", errbuf);

printf("Sniffing on device %s\n", device);

pcap_handle = pcap_open_live(device, 4096, 1, 0, errbuf);
if(pcap_handle == NULL)
    pcap_fatal("pcap_open_live", errbuf);

for(i=0; i < 5; i++) {
    packet = pcap_next(pcap_handle, &header);
    printf("Got a %d byte packet\n", header.len);
    dump(packet, header.len);
}

pcap_close(pcap_handle);

} 
```

如果您想知道，是的，我从一本书（黑客：剥削的艺术）中摘录并稍作修改。问题是，如果我在 Linux 上运行它，它可以完美运行，没有问题。但是如果我在 Mac 上运行它，它就不起作用，也不会捕获任何数据包。

你们有人可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:59:38.170

如果您收到“pcap_lookupdev 中的致命错误”错误消息，那么问题出在 Sascha 所说的 - 您没有捕获数据包的权限。 *如果*您收到该消息，请尝试使用 运行程序`sudo`，或者尝试将 /dev/bpf* 设备的所有权更改为您（您需要使用`sudo`）。但是，您是在说“它在 'en0' 上嗅探”，所以大概是因为它正在打印“在设备 en0 上嗅探”，在这种情况下`pcap_lookupdev()`并没有失败。

如果您收到“pcap_open_live 中的致命错误”，这也*可能*是权限问题，但您几乎可以肯定不会因为那里的权限而收到错误，因为`pcap_lookupdev()`已经失败了。

如果您*没有*收到“Fatal Error in”错误消息，那么问题可能是，正如 Petesh 所指出的，您将 0 指定为超时。如果指定为 0 为超时，`pcap_loop()`, `pcap_dispatch()`, `pcap_next()`, 并且`pcap_next_ex()`可以无限期地等待，然后再将数据包提供给应用程序；在某些平台上，例如 Linux 和 Solaris，它不会无限期地等待，但在其他平台上，例如 *BSD 和 OS X，它可以无限期地等待。尝试超时1000，也就是一秒；例如，这就是 tcpdump 所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:37:30.587

除了Petesh：有关详细信息，请查看联机帮助页（终端中的“man pcap”）。

它指出：

> 在 BSD 下（包括 Mac OS X）：
> 
> ```
>  You must have read access to /dev/bpf* on systems that don't have a cloning
>           BPF device, or to /dev/bpf on systems that do.  On BSDs with a devfs  (this
>           includes  Mac OS X), this might involve more than just having somebody with
>           super-user access setting the ownership or permissions on the BPF devices -
>           it  might  involve  configuring  devfs  to set the ownership or permissions
>           every time the system is booted, if the system even supports  that;  if  it
>           doesn't  support  that,  you might have to find some other way to make that
>           happen at boot time. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T11:55:40.083

我在 10.8.4 测试了代码，并将参数 to_ms（读取超时）更改为某个非零值，然后开始接收数据包。

感谢您的基本代码。它节省了我的时间。

问候， 阿南德·乔贝

# java - 为什么在这种情况下使用 scala 并行性会降低性能？

> ID：15039552
> 
> 赞同：2
> 
> 时间：2013-02-23T10:37:47.817
> 
> 标签：java, scala

类 TestClassString 返回一个 java.util.List of Strings

TestViewPerformance 对象记录了调用TestViewController.iterateList 方法所花费的时间。

在 iterateList 中，当并行性被移除时，运行这个小程序所花费的时间至少快 100 毫秒：

mySeq.par 到 mySeq

我意识到这里有用于测量 scala 性能的基准测试工具：http: [//docs.scala-lang.org/overviews/parallel-collections/performance.html](http://docs.scala-lang.org/overviews/parallel-collections/performance.html)

但是我仍然希望这个程序使用基于当前毫秒时间的并行性运行得更快吗？.par 循环中的所有代码是否分布在多个内核上？

这是整个代码：

```
package testpackage

import java.util.Calendar

object TestViewPerformance {

  def main(args:Array[String]) = {

      val before = Calendar.getInstance().getTimeInMillis()

      val testViewController = new TestViewController();
      val testClassString : TestClassString = new TestClassString()

      val folderList = testClassString.getStringList()
      var buffer = new scala.collection.mutable.ListBuffer[String]
      val seq = scala.collection.JavaConversions.asScalaBuffer(folderList);

      /*
       * this method (iterateList) is where the parallelism occurs
       */
      testViewController.iterateList(seq)

      val after = Calendar.getInstance().getTimeInMillis()

      println(before)
      println(after)
      println(after-before)

  }

  class TestViewController {

      def iterateList(mySeq : Seq[String]) = {

        for (seqVal<- mySeq) {
            if(seqVal.equalsIgnoreCase("test")){            

            }
        }   
}

}

}

package testpackage;

import java.util.ArrayList;
import java.util.List;

public class TestClassString {

    public List<String> getStringList(){

        List<String> l = new ArrayList<String>();

        for(int i = 0; i < 1000000; ++i){
            String test = ""+Math.random();
            l.add(test);
        } 

        return l;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T11:16:44.367

因为您的基准测试正在测量线程切换和量子波动的开销。至少添加`Thread.sleep(1)`到您的循环中，看看会发生什么：

```
scala> val strings = (1 to 10000).map(_ + Math.random().toString)
strings: scala.collection.immutable.IndexedSeq[String] = Vector(10.8907863042670979, 20.2871957696184603, 30.20011325237932742, 40.7490949002788928, 50.5073228980632211...
scala> val time = System.currentTimeMillis; 
       | for (str <- strings.par) {Thread.sleep(1)}; 
       | System.currentTimeMillis - time
res0: Long = 1398

scala> val time = System.currentTimeMillis; 
       | for (str <- strings) {Thread.sleep(1)}; 
       | System.currentTimeMillis - time
res3: Long = 11129 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T10:44:04.480

这可能是因为每次迭代中的大部分时间都用于打印到`System.out`，这是一个同步操作，因此不可并行化。因此，启动线程、调度它们和同步它们所产生的成本使得并行迭代比顺序迭代慢。

# c++ - 可以将自旋锁与 O(1) 非内存连续代码一起使用吗？

> ID：15039555
> 
> 赞同：2
> 
> 时间：2013-02-23T10:38:21.250
> 
> 标签：c++, c, linux, gcc, spinlock

我在锁定代码部分使用*通常***O(1)**列表元素访问/删除的自旋锁（ *pthread ）。*

 ***我说*一般*是因为在 99.9% 的情况下，代码不会遍历列表（可能包含 1000 多个元素）。
该代码通常会根据列表元素*提示*指针仅提取一个元素，然后执行几个*if*分支来修改引用的*提示*元素；它仍然应该是对内存的非连续访问。

使用自旋锁是个好主意还是应该转向互斥锁？

我的目标是最大性能，在这种情况下不关心 CPU（过度）使用。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:43:01.230

在使用可重现的测试用例进行一些基准测试，在*pthread 互斥锁*和*自旋锁*实现之间切换之后，我可以说如果互斥锁使用更少的 CPU，*自旋锁*实现在处理队列外元素时的速度是两倍。

我相信正确的答案，考虑到处理列表的函数的**O(1)**性质以及这个（大部分）*恒定*时间*很小*的事实，有利于*自旋锁*选择与*互斥锁*。

因此，如果一个人想要实现最大性能，而不关心 CPU 浪费的周期，那么自旋锁比*互斥**锁*更可取，以防受保护的代码执行时间很短*（*并且更好的*常量*）。

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:29:01.480

通常，对于较短的关键部分（比如它只是更新列表指针的地方），自旋锁可能是首选。

几乎没有争用，自旋锁和互斥锁之间应该没有什么区别，因为非争用路径在后者中得到了高度优化。

当关键部分发生争用时，差异就出现了。当互斥锁被占用时，锁定它会阻塞线程并将其从调度程序运行队列中取出，当互斥锁最终被释放时，它会花费更长的时间来唤醒并锁定互斥锁，而自旋锁只会自旋以希望自旋锁即将发布。******

# google-app-engine - 在GAE中<->“CompositKey”查找的双向键？

> ID：15039557
> 
> 赞同：1
> 
> 时间：2013-02-23T10:38:35.333
> 
> 标签：google-app-engine, google-cloud-datastore, go

我正在 GAE 上写一个 Go 应用程序我有一个类型叫做`Connection{Token, ToAdress, FromAdress}`

我想将它存储在数据存储中，以便我可以通过 `GetConnectionByT(Token string)` 但也可以通过 `GetConnectionByA(FromAdress,ToAdress string)`

这样做的最佳方法是什么？现在我的 Connect 类型有两个不同`.key()`的功能，每次添加时我都会插入带有不同键的重复条目，但这感觉真的很不对:)

是`datastore.NewQuery("Connection").Filter`要走的路吗？接缝那个一键应该更快更便宜？但如果不是，我该如何过滤多个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:20:08.660

如果您查看[datastore.Query.Filter 的文档，](https://developers.google.com/appengine/docs/go/datastore/reference#Query.Filter)您会注意到多个过滤器是 ANDed 在一起的。所以你可以做这样的事情：

```
q := datastore.NewQuery("Connection").
    Filter("FromAddress =", a1).
    Filter("ToAddress =", a2).
    Order("-FromAddress") 
```

如果您有相关实体的密钥，那么是的，使用密钥可能会更快。但是，从您问题中的描述中很难分辨。

# android - 关于图像的 Android 应用程序优化

> ID：15039560
> 
> 赞同：0
> 
> 时间：2013-02-23T10:38:49.073
> 
> 标签：android, image, optimization

我正在处理的应用程序将有很多图像（每个列表项都有图像的列表视图、带有图像的网格视图、图像库），因此在可绘制文件夹中的开发结束时将有大约 1000 个或更多图像。现在我在可绘制文件夹中有大约 200 张图像。

将所有图像放在可绘制文件夹中是正确的还是添加它们的最佳方式？

图像用于：

*   网格视图

*   每个 Gridview 项的 ListView

*   每个 listView 项目的图库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:14:23.470

您可以将图像存储在 SD 卡上。存储在资源文件夹中会增加应用程序的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:11:38.853

您的 apk 在 google play 上不能超过 50 MB 这里是扩展包的链接

[http://support.google.com/googleplay/android-developer/answer/2481797?hl=en](http://support.google.com/googleplay/android-developer/answer/2481797?hl=en)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T09:27:38.990

如果您要处理大量图像，最好将它们保存在 assets 文件夹中。

drawable 文件夹用于存储图标和背景，在某些情况下您没有很多图像，i 可用于存储列表和网格的图像。这是因为可绘制对象上的图像已预先加载到内存中，因此如果您有很多高分辨率图像，它们可能会占用设备的所有 RAM 内存。

另一方面，assets 文件夹非常适合这种情况，因为图像存储为原始图像，当您想要使用它们时，您必须将它们构建为位图，因此您负责构建它们并在您使用它们时使用它们需要他们。

将图像存储在资产上还意味着您必须注意内存消耗，因为如果您加载包含大量高分辨率图像的列表或网格，无论如何您都会填满内存。我建议使用持有人制作您的列表和网格，因此只要项目未显示在屏幕上，它就不会存储在 ram 上。

如果您需要同时在屏幕上显示多个高分辨率图像，我建议使用 BitmapFactory.options.inSampleSize 构建它们。这允许您将大小参数传递给您将要构建的位图，因此您不会构建一个与将要存储它的容器的大小相比太大的位图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T09:53:58.977

Image from Resources loading faster (simply by ID).
But if you store 1000+ images, your app will be huge.
So my advice: keep images as zip on some web server, after user first install your app, you should download and unzip it to SD card folder.

# regex - Perl 正则表达式：如何匹配两个非数字之间有数字的字符串？

> ID：15039565
> 
> 赞同：0
> 
> 时间：2013-02-23T10:39:15.547
> 
> 标签：regex, string, perl

如何匹配在两个非数字之间有一个或多个数字的数组的字符串，并且字符串以数字结尾？假设我想打印出*不*匹配的字符串。我该怎么做？

这是我到目前为止所拥有的

```
my @array = ("OST3GIC2", "GRE1", "foo23eoo4","MAX13", "foo9fsa2");
foreach @array{
if !(grep /^+\D(+\d)+\D\d$/) {
print $_."\n";
} 
```

**期望的输出**

```
GRE1
MAX13 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T10:45:38.763

你可以寻找：

```
/\D\d+\D.*\d$/ 
```

*   `\D`非数字
*   `\d+`任意位数
*   `\D`非数字
*   `.*`任何事物
*   `\d`一个数字
*   `$`最后是字符串的结尾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:00:18.023

如果你想要直接不匹配，你可以使用

```
^\D+\d+$ 
```

如果你想要匹配，然后过滤掉，你可以使用

```
^\D*\d+\D+\d+$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T12:01:43.553

```
my @array = ("OST3GIC2", "GRE1", "foo23eoo4","MAX13", "foo9fsa2");

print(join("\n", grep { ! /^\D+\d+\D+\d+$/ } @array) . "\n"); 
```

意义

*   `!`反转正则表达式结果
*   `^\D\d+\D+\d+$`表示以任何非数字*开头*，然后是任何数字，然后是任何非数字，然后以数字*结尾*

（其中*任何*表示至少一个）

# java - 我需要使用 java 提取 .tar.Z 文件

> ID：15039566
> 
> 赞同：0
> 
> 时间：2013-02-23T10:39:15.740
> 
> 标签：java, gzip, extract, unzip, zipfile

有没有人用java编码来提取.tar.Z文件。

假设我有一个名为 home.tar.Z 的文件，我需要使用 java 代码提取这个文件，你能提供任何示例代码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:51:56.150

`.Z`扩展名不是扩展名，`gzip`它来自`compress`.

您可以从 Java 启动 shell 脚本，我会这样做，因为我不知道任何`compress`Java 库。对于 tar/gz，您可以使用 Plexus Archiver 或 Apache Commons VFS。

看

*   [如何在 Java 中提取 tar 文件？](https://stackoverflow.com/questions/315618/how-do-i-extract-a-tar-file-in-java)
*   [如何在 java 中压缩/解压缩 tar.gz 文件](https://stackoverflow.com/questions/7128171/how-to-compress-decompress-tar-gz-files-in-java)

遗憾的是，似乎没有任何库涵盖`.Z`文件，所以我认为这些链接对你来说是不可用的。

但是看看：

*   [如何使管道与 Runtime.exec() 一起工作？](https://stackoverflow.com/q/5928225/309483)

这允许您使用 shell 命令执行所有操作，这意味着您不必费心从 Java 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T15:10:14.823

帮助 OP 显然已经晚了，但对于后代，[Apache`commons-compress`](https://commons.apache.org/proper/commons-compress/)确实支持 *.Z。

例如

```
import org.apache.commons.compress.compressors.z.ZCompressorInputStream;

...

FileInputStream fin = new FileInputStream("/path/to/archive.something.Z");
BufferedInputStream in = new BufferedInputStream(fin);
ZCompressorInputStream zIn = new ZCompressorInputStream(in);

BufferedReader br = new BufferedReader(new InputStreamReader(zIn));

while (null != (content = br.readLine())) {
  System.out.println(content);
}
br.close(); 
```

# backbone.js - Backbone.js 和 Handlebars - 使用 grunt-contrib-handlebars

> ID：15039572
> 
> 赞同：2
> 
> 时间：2013-02-23T10:39:35.343
> 
> 标签：backbone.js, handlebars.js, gruntjs

我只是想知道是否有人在骨干项目中使用过这个插件。

我不想将我的所有脚本模板标签都放在一个索引文件中，而是希望将我的模板与需要它们的视图放在同一个目录中。

所以我希望我可以使用节点选项来要求本地模板并渲染到它，然后附加到我的索引文件上的#id（我将在最后整理）。

所以基本上我有我的车把模板 (template.hbs) 及其编译的 js (template.js) 以及我的主干视图 index.coffee。

```
public
   |_ coffee
      |_views
        |_card
           |_list
              index.coffee
              template.hbs
              template.js 
```

作为参考，我的 grunt 文件如下所示：

```
handlebars: {
      compile: {
        options: {
          namespace: 'MyApp.Templates',
          node: true
        },
        files: {
          "public/coffee/views/card/list/template.js": "public/coffee/views/card/list/template.hbs"
        }
      }
    }, 
```

在我的主干视图（index.coffee）中，我希望像这样需要车把模板：

```
class CardList extends Backbone.View
    template: require('./template')

    … 
    do some other shiz
    …

render: =>
    template = Handlebars.compile($(this.template).html())
    html = template
        model: this.model
    $(this.el).html(html) 
```

渲染它会在检查器中吐出这个错误：

```
Uncaught [object Object]

> template = handlebars.compile($(this.template).html()); 
```

我显然不知道我在做什么，所以我希望有人能阐明我如何正确使用这个插件。

我正在使用 grunt-contrib-handlebars v0.3.5

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:57:28.477

您可以通过[动态构建文件对象](http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically)来实现这一点。

也许是这样的，虽然我不确定是否`cwd`支持通配模式。我也不确定是否`dest`相对于`cwd`. 如果不是这种情况，这将不起作用，但值得一试。

```
handlebars: {
  dist: {
    options: {
      namespace: 'MyApp.Templates',
      node: true
    },
    // Glob for a directory of files, builds the files object, then map each
    // one to a new destination file.
    expand: true,
    cwd: './public/coffee/views/*',
    src: '**/*.hbs',
    dest: './',
    ext: '.js'
  }
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T16:04:57.660

查看您包含的 template.js 文件。grunt-comtrib-handlbars 应该已经为您将其预编译为 Javascript 函数，因此无需再调用 Handlebars.compile。您可以删除该 template = Handlebars.compile 行。

# css - 固定元素在特定高度可见

> ID：15039573
> 
> 赞同：1
> 
> 时间：2013-02-23T10:39:48.953
> 
> 标签：css, css-position

有没有办法在不使用 javascript 的情况下强制固定元素显示在特定高度？我有一个应该作为菜单的固定元素，但只有在网站的前 900px 向下滚动后才能看到，从那时起，它现在是一个简单的固定菜单：

```
#actual-menu{
    margin-top:50px;
    float: left;
    border: 1px solid #ccc;
    position: fixed;
    left:0;
    top:20px;
} 
```

但是，如果我离开“top：20px”，那么我会在滚动 900px 之前看到它，如果我将其设为 920px，那么我永远不会看到它。有没有办法让它“等待”直到用户在那里然后移动？（最好只有css）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:49:13.757

@Luis，试试这个

HTML

```
<div id="main">
    <div id="divmenu"></div>
</div> 
```

CSS

```
#main{
    width:100%;
    height:1500px;
    background:#CCC;
}
#divmenu{
    margin-top:50px;
    border: 1px solid #ccc;
    position:fixed;
    left:0;
    background:#000;
    width:0px;
    height:0px;
} 
```

jQuery

```
$(window).scroll(function(){
    if ($(this).scrollTop() > 900) {
        $('#divmenu').fadeIn('slow',function(){$(this).css({'width':'100px', 'height':'100px'});});
    } else {
        $('#divmenu').fadeOut('slow');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:13:11.983

也许如果你使用绝对？

```
 #actual-menu{
    margin-top:50px;
    border: 1px solid #ccc;
    position: absolute;
    left:0;
    top:920px;
} 
```

当然，这样它会向上滚动而不是弹出，并且也`top:920px`应该相应地更改为父元素......否则我建议使用Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T10:45:05.917

我不认为你可以用 CSS 做到这一点，但 jQuery 让它变得非常容易：

```
$(window).scroll(function(){
    if ($(this).scrollTop() > 900) {
        $('#divmenu').fadeIn('slow');
    } else {
        $('#divmenu').fadeOut('slow');
    }
}); 
```

# sql - 逐行减法

> ID：15039576
> 
> 赞同：0
> 
> 时间：2013-02-23T10:40:05.767
> 
> 标签：sql

我有两个视图，其中包含以下数据：

查看下限

```
6
13
19 
```

查看上行

```
3
9
14 
```

我想使用上面的两个视图生成这个结果

```
3
4
5 
```

即 6 - 3 = 3、13 -9 =4 和 19-14 =15。

我试过了

```
 Select l.val - u.val from lowbound l, upbound u; 
```

但这是它的结果

```
3
10
16
-3
4
10
-8
-1
5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:47:22.257

所以看起来你需要加入 view1 中的最低数字和 view2 中的最低数字，依此类推。如果您的 DBMS 支持`ROW_NUMBER`，您可以使用类似

```
WITH T1
     AS (SELECT V1.val,
                ROW_NUMBER() OVER (ORDER BY val) AS RN
         FROM   View1 V1),
     T2
     AS (SELECT V2.val,
                ROW_NUMBER() OVER (ORDER BY val) AS RN
         FROM   View2 V2)
SELECT T1.val - T2.val
FROM   T1
       JOIN T2
         ON T1.RN = T2.RN 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/ebf86/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T10:42:57.763

您需要一个存储过程，然后我正在使用 MSSQL 服务器

```
 BEGIN
 DECLARE lcursor CURSOR
 FOR SELECT * FROM l;
 DECLARE ucursor CURSOR
 FOR SELECT * FROM u;
 DECLARE @l INT;
 DECLARE @u INT;

 FETCH NEXT FROM lcursor 
 INTO @l
 FETCH NEXT FROM ucursor 
 INTO @u

 WHILE @@FETCH_STATUS = 0
 BEGIN
      PRINT @l - @u
      FETCH NEXT FROM lcursor 
      INTO @l
      FETCH NEXT FROM ucursor 
      INTO @u
END
CLOSE lcursor 
DEALLOCATE lcursor 
CLOSE ucursor 
DEALLOCATE ucursor 
END 
```

# iphone - 无法从 MPMediaItem（mp3 歌曲）转换为 NSData

> ID：15039578
> 
> 赞同：0
> 
> 时间：2013-02-23T10:40:09.097
> 
> 标签：iphone, ios, xcode, ios6

我试过以下代码：

这是我的 MPMediPickerController 委托方法：

```
- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection {

    // Dismiss the media item picker.
    [self dismissModalViewControllerAnimated: YES];

    NSLog(@"%@ %d",mediaItemCollection,mediaItemCollection.count);

    NSArray *newMediaItem= [mediaItemCollection items];

    MPMediaItem *item=[[newMediaItem objectAtIndex:0] retain];

    [self uploadMusicFile:item];
} 
```

这是我对 NSData 的自定义方法 MPMediaItem：

```
- (void) uploadMusicFile:(MPMediaItem *)song
{
    NSURL *url = [song valueForProperty: MPMediaItemPropertyAssetURL];

    AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL: url options:nil];

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset: songAsset
                                                                      presetName: AVAssetExportPresetPassthrough];

    exporter.outputFileType = @"public.mpeg-4";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *exportFile = [documentsDirectory stringByAppendingPathComponent:
                            @"exported.mp4"];

    NSURL *exportURL = [[NSURL fileURLWithPath:exportFile] retain];
    exporter.outputURL = exportURL;

    [exporter exportAsynchronouslyWithCompletionHandler:
     ^{
         NSData *data = [NSData dataWithContentsOfFile: [documentsDirectory
                                                         stringByAppendingPathComponent: @"exported.mp4"]];

            NSLog(@"%@",data);
     }];
} 
```

我在 NSlog 中得到“null”。

我也检查了这篇文章：

[如何将 nsdata 转换为 MPMediaitem 歌曲 iOS Sdk](https://stackoverflow.com/questions/10276484/how-to-convert-nsdata-to-mpmediaitem-song-ios-sdk)

但没有得到解决方案。

我正在使用 xcode 4.6 和 ios 6.1。

谁能告诉我这里有什么问题？

# rest - ASP.NET Web API 身份验证选项

> ID：15039589
> 
> 赞同：4
> 
> 时间：2013-02-23T10:41:32.360
> 
> 标签：rest, jquery, asp.net-mvc-4, asp.net-web-api

哪些选项可用于对要由来自另一个域的 JQuery 应用程序使用的 MVC3 Web API 应用程序进行身份验证？

以下是我迄今为止尝试过的限制/事情：-

*   我不想使用 OAuth；对于用户群有限的私人应用程序，我不能期望最终用户在现有提供商上拥有他们的帐户，并且没有实施我自己的空间
*   我已经有一个功能齐全的 HMAC-SHA256 实现，使用标头中传递的数据工作得很好；但这在 IE 中不起作用，因为 IE8/9 中的 CORS 已损坏并且不允许您发送标头
*   我需要跨域，因为消费应用程序与 API 位于不同的域中，但不能使用 jsonp，因为它不允许您使用标头
*   我想避免基于令牌（仅）的方法，因为这是可以重放的，并且由于有状态而违反了 REST

在这一点上，我接受了 HMAC-SHA256 方法，该方法使用 URL 或查询字符串/post 来提供散列和其他变量。

将这些变量放在 URL 中似乎很脏，将它们放在查询字符串/帖子中是一种痛苦。

我成功地使用了 JQuery $.ajaxSetup beforeSend 选项来生成哈希并将其附加到标头，但正如我所提到的，您不能在 IE8/9 中使用标头。

现在我不得不求助于 $.ajaxPrefilter，因为我无法更改 beforeSend 中的 ajax 数据，也不能仅扩展 $.ajaxSetup 中的数据，因为我需要根据 ajax 的类型动态计算哈希值询问。$.ajaxPrefilter 也是一个问题，因为没有干净/简单的方法可以以与方法无关的方式添加所需的变量......即它必须是 GET 的查询字符串和 POST 的表单数据

我一定遗漏了一些东西，因为我找不到一个解决方案：-a）支持跨域 a）在 MVC 和 JQuery 方面都不是大规模的黑客攻击 c）实际上是安全的 d）适用于 IE8/9

*必须*有人在那里正确地做这件事......

**编辑**

澄清一下，API 端的身份验证机制很好......无论我以哪种方式验证请求，我都会生成一个 GenericPrincipal 并在 API 中使用它（这个优点是另一篇文章，但它确实允许我使用MVC 中的*标准*授权机制，我更喜欢自己滚动......较少让我的 API 上的其他开发人员学习和维护）

问题主要在于将身份验证信息从客户端传输到 API：- - 它不能依赖服务器/API 状态。所以我不能在一次调用中传递用户名/密码，取回一个令牌，然后继续使用该令牌（对重放攻击开放） - 任何需要使用请求标头的东西都不存在，因为 IE 使用 XDR 而不是 XHR 像其他的浏览器，并且它不支持自定义标头（我知道 IE10 支持 XHR，但实际上我需要 IE8+ 支持） - 我想我无法生成 HMAC 并将其传递到 URL 中的某处（路径或查询字符串）但是这个似乎是一个 hack，因为我使用的部分请求不是为此而设计的——如果我使用路径，会有很多混乱的解析，因为至少我必须为每个请求传递一个用户名、时间戳和哈希；

尽管很糟糕，querystring/formdata 似乎是最好的选择；但是现在我必须弄清楚如何在每个请求上捕获这些。我可以使用 MessageHandler 或 Filter，但都没有提供方便的方式来访问表单数据。

我知道我可以自己编写所有解析和处理的东西（看起来我会的）但关键是我无法相信已经没有解决方案。就像我有（1）对 IE 的支持，（2）安全和（3）干净的代码，我只能选择两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:15:55.297

你的要求对我来说似乎有点不合理。你不可能同时拥有一切，你必须愿意放弃一些东西。几点说明：

*   OAuth 似乎是您想要的，至少有一些修改。您可以使用 Azure 的访问控制服务，这样您就不必实现自己的令牌提供程序。这样，您就“外包”了安全令牌提供程序的实施。最后我检查了 Azure ACS 是否仍然免费。当您查找 ACS 文档时会出现很多混乱，因为人们大多使用它来插入 Facebook 或 Google 等其他提供商，但您可以将其调整为仅作为您自己服务的令牌提供商。
*   你似乎很担心重放攻击。重放攻击几乎总是有可能的。我必须只听通过线路的数据并将其发送到您的服务器，即使是通过 SSL。无论如何，重放攻击都是您需要处理的事情。通常我所做的是跟踪即将到来的请求的缓存并将哈希签名添加到我的缓存中。如果我在 5 分钟内看到另一个具有相同哈希的请求，我会忽略它。为此，我添加了请求的时间戳（毫秒粒度）和 URL 的一些派生值作为我的哈希参数。这允许每毫秒从同一客户端对同一地址进行一次操作，而不会将请求标记为重放攻击。
*   你提到了 jQuery，如果你使用散列方法，这让我有点困惑。这意味着您实际上在客户端上有哈希算法和签名逻辑。这是一个严重的缺陷，因为只需检查 javascript，我现在就可以确切地知道如何签署请求并将其发送到您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:06:18.020

简单地说；在身份验证方面，ASP.NET WebAPI 并没有什么特别之处。

我可以说的是，如果您将它托管在 ASP.NET 中，您将获得 ASP.NET 对身份验证和授权的支持。如果您选择了自托管，则可以选择启用 WCF 绑定安全选项。

在 ASP.NET 中托管 WebAPI 时，您将有几个身份验证选项：

1.  基本认证
2.  表单身份验证 - 例如，从任何 ASP.Net 项目中，您可以启用 Authentication_JSON_AppService.axd 以进行表单身份验证
3.  Windows 身份验证 - HttpClient/WebHttpRequest/WebClient
4.  或者明确允许匿名访问您的 WebAPI 的方法

# sql - 使用嵌套查询：SQL

> ID：15039590
> 
> 赞同：1
> 
> 时间：2013-02-23T10:41:45.743
> 
> 标签：sql, oracle, multivalue

我正在尝试将以下数据存储在 visible_to 是多值属性的表中。

```
Wall_ID Facebook_ID Visible_To
W1      F1          F2,F3,F4
W2      F2          F1
W3      F3          F1
W4      F4          F1 
```

我正在尝试在 Oracle 上模仿 Facebook。我想找到可以查看其他墙最大数量的用户（此处：F1）。

我已经到了在 Oracle 11g 中使用 NESTED 表存储多值属性的地步。我是否必须取消嵌套表才能找到查询结果，还是有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:57:54.400

如果我理解您正在尝试正确执行的操作，那么这样的事情应该可以工作（请参阅[SQL Fiddle](http://sqlfiddle.com/#!4/6f1ce/13)）：

```
SELECT *
FROM (
  SELECT 
    f.wall_id
  , f.facebook_id
  , COUNT(t.COLUMN_VALUE) visible_to_count
  FROM facebook_data f
  CROSS JOIN TABLE(f.visible_to) t
  GROUP BY f.wall_id, f.facebook_id
  ORDER BY visible_to_count DESC
)
WHERE ROWNUM = 1 
```

**[结果](http://sqlfiddle.com/#!4/6f1ce/13/0)**：

```
| WALL_ID | FACEBOOK_ID | VISIBLE_TO_COUNT |
--------------------------------------------
|      W1 |          F1 |                3 | 
```

这只是展开嵌套表然后聚合，以便您可以计算值的数量。如果您可能存储重复值，或者在查询中引入基数，您可能还需要考虑将`DISTINCT`关键字添加到函数中。`COUNT()`

# mysql - 事件日历的 MySQL 表模式

> ID：15039598
> 
> 赞同：1
> 
> 时间：2013-02-23T10:42:24.757
> 
> 标签：mysql, performance, calendar

我最近一直在开发一个 PHP 应用程序，旨在帮助医生和患者取得联系，并为医生使用 FullCalendar 以便他可以管理他的事件。我的问题是：当我自己学习编码时，我还没有学会如何决定是否使用这个或那个 DB 组织。目前，该应用程序为每个命名的新订阅（仅限医生）创建一个新表，`event_[$doctor_id]`但我不得不承认我对拥有 3000 个用户的观点感到害怕！

我的需求是：

*   在其日期后的 2 年内为每个事件保留一个参考（但不一定在同一个 dB 表中）
*   小于 6 个月的事件需要在日历中显示
*   为避免错误，事件永远不会（几乎）从数据库中删除——它们只是被禁用以允许用户修复 2 周前的错误

我正在考虑对 2013 年 3 月发生的所有事件使用诸如“201303”之类的日期命名表，然后每个月使用一个机器人，它会以某种方式将最旧的信息（6 个月 + 旧）保存在特定表甚至文件中.

但由于这些更改可能需要我几个小时，我会感谢你们的一些建议！

# r - 延迟表达式评估而不使用 `quote`

> ID：15039599
> 
> 赞同：5
> 
> 时间：2013-02-23T10:42:53.343
> 
> 标签：r, lazy-evaluation

我创建了以下函数/示例作为在表格等中显示变量标签的通用方式：

```
#' Function to prettify the output of another function using a `var.labels` attribute
#' This is particularly useful in combination with read.dta et al.
#' @param dat A data.frame with attr `var.labels` giving descriptions of variables
#' @param expr An expression to evaluate with pretty var.labels
#' @return The result of the expression, with variable names replaced with their labels
#' @examples
#' testDF <- data.frame( a=seq(10),b=runif(10),c=rnorm(10) )
#' attr(testDF,"var.labels") <- c("Identifier","Important Data","Lies, Damn Lies, Statistics")
#' prettify( testDF, quote(str(dat)) )
prettify <- function( dat, expr ) {
  labels <- attr(dat,"var.labels")
  for(i in seq(ncol(dat))) colnames(dat)[i] <- labels[i]
  attr(dat,"var.labels") <- NULL
  eval( expr )
} 
```

但是，我宁愿用户不必引用传入的表达式。

`replicate`这样做，使用此代码：

```
eval.parent(substitute(function(...) expr)) 
```

然而，我不明白它是如何工作的，并且就像在没有理解的情况下尝试复制的典型情况一样，我尝试简单地复制此代码或修改它都失败了。

如何编写一个以未计算表达式作为输入的函数，而不要求用户输入`quote`他们的表达式？我认为答案将在很大程度上依赖于惰性评估。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T15:06:35.873

# 用评估和替代回答

我认为在这种情况下你只需要这样做`eval(substitute(expr))`。 `expr`是一个promise，我们既可以`expr`直接通过 using 获取promise的值，也可以通过 using 获取promise的内容`substitute`。有关详细信息，请参阅[http://cran.r-project.org/doc/manuals/R-lang.html#Promise-objects](http://cran.r-project.org/doc/manuals/R-lang.html#Promise-objects)。承诺的内容是 a `call`，所以我们只是`eval`为了得到新的结果。

```
prettify <- function( dat, expr ) {
  labels <- attr(dat,"var.labels")
  for(i in seq(ncol(dat))) colnames(dat)[i] <- labels[i]
  attr(dat,"var.labels") <- NULL
  eval(substitute(expr))
}

> prettify( testDF, str(dat))
'data.frame':   10 obs. of  3 variables:
 $ Identifier                 : int  1 2 3 4 5 6 7 8 9 10
 $ Important Data             : num  0.336 0.9479 0.1379 0.94 0.0484 ...
 $ Lies, Damn Lies, Statistics: num  1.398 0.654 0.268 -0.397 -0.41 ... 
```

在建议的编辑中，@user2103369 建议这`replicate`是不同的，因为它用于`sapply`获取多个评估，因此它需要一个函数而不是调用。

# 默认参数时的不同行为

有趣的是，根据参数是默认参数还是用户添加，promise 的行为会有所不同；见下文。我认为 SoDA 解决了这个问题，但我手边没有。此函数打印承诺的值，用 评估它`eval`，然后直接评估它。

```
foo <- function(a, b=a+1) {
  print(substitute(b))
  print(eval(substitute(b)))
  b
} 
```

当用户提供值时，直接评估它会导致错误。

```
> foo(a=2, b=a+1)
a + 1
[1] 3
Error in foo(a = 2, b = a + 1) : object 'a' not found 
```

但默认值有效。

```
> foo(a=2)
a + 1
[1] 3
[1] 3 
```

在建议的编辑中，@user2103369 表示默认参数在函数内部进行评估，而显式参数在调用框架中进行评估。所以在这种情况下，用户提供的值会失败，因为`a`在调用框架中不可见。

# 使用函数的另一种方法

但是，对我来说（尽管 OP 不同意；我将这部分留给该答案的未来读者），这感觉就像使用函数作为第二个参数更自然的情况，就像这样；一方面，这意味着用户不必知道它是`dat`在函数中调用的。

```
prettify <- function( dat, FUN ) {
  f <- match.fun(FUN)
  labels <- attr(dat,"var.labels")
  for(i in seq(ncol(dat))) colnames(dat)[i] <- labels[i]
  attr(dat,"var.labels") <- NULL
  f(dat)
} 
```

然后可以使用匿名函数调用它，我认为这正是您正在寻找的，除了用户也必须输入`function(x)`。

```
> prettify( testDF, function(x) str(x) )
'data.frame':   10 obs. of  3 variables:
 $ Identifier                 : int  1 2 3 4 5 6 7 8 9 10
 $ Important Data             : num  0.296 0.707 0.883 0.821 0.724 ...
 $ Lies, Damn Lies, Statistics: num  -1.1506 0.4846 -1.824 -0.397 0.0898 ... 
```

或者在简单的情况下，例如在您的示例中，仅使用函数的名称。

```
> prettify( testDF, str)
'data.frame':   10 obs. of  3 variables:
 $ Identifier                 : int  1 2 3 4 5 6 7 8 9 10
 $ Important Data             : num  0.296 0.707 0.883 0.821 0.724 ...
 $ Lies, Damn Lies, Statistics: num  -1.1506 0.4846 -1.824 -0.397 0.0898 ... 
```

# matlab - 如何提取序列矩阵元素？

> ID：15039604
> 
> 赞同：0
> 
> 时间：2013-02-23T10:43:25.160
> 
> 标签：matlab, loops, matrix

我有一个矩阵，如下所示：

```
A=[2;1;8;5;4;7] 
```

现在我需要将矩阵 A 提取为两部分：

```
newpoint=[2];
rest=[1;8;5;4;7]; 
```

然后再次应用循环以将第二列提取为新点：

```
newpoint=[1];
rest=[2;8;5;4;7]; 
```

再次应用循环以将第三列号作为新点：

```
newpoint=[8];
rest=[2;1;5;4;7]; 
```

取行序列中的数字，直到最后一行。有人可以帮忙吗。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:49:00.533

类似的事情可能会：

```
for i=1:length(A)    
    newpoint = A(i);
    if i==1
    rest = A(i+1:end);
    else
    if i== length(A);
    rest = A(1:end-1);
    else
    rest=A(1:i-1,i+1:end);

    ... stuff to do
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T14:17:42.300

我会去做这样的事情：

```
for i = 1:size(A,1)
    newpoint = A(i,1)
    rest = A;
    rest(i) = [];
    %# use rest and newpoint
end 
```

或者，如果您更喜欢将所有`rest`and保存`newpoint`在矩阵中：

```
newpoint = zeros(size(A,1),1);
rest = zeros(size(A,1)-1,size(A,1));
for i = 1:size(A,1)
    newpoint(i) = A(i,1);
    temp = A;
    temp(i) = [];
    rest(:,i) = temp;
end 
```

# java - 将精灵运动绑定到相机或场景（AndEngine）

> ID：15039614
> 
> 赞同：1
> 
> 时间：2013-02-23T10:44:18.930
> 
> 标签：java, android, andengine, collision

我正在使用 DigitalOnScreenControl 来移动玩家精灵。但问题是我的玩家精灵离开了模拟器屏幕。我希望玩家精灵被限制在特定范围内移动，并且当我的精灵继续移动时，相机也可以专注于玩家精灵。

我正在尝试这段代码：

```
public Scene onLoadScene() {

    // Auto-generated method stub
    this.mEngine.registerUpdateHandler(new FPSLogger());
    final Scene mScene=new Scene();
    mScene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

     final int centerX=(CAMERA_WIDTH-this.mPlayerTextureRegion.getWidth())/2;
     final int centerY=(CAMERA_HEIGHT-this.mPlayerTextureRegion.getHeight())/2;

     final Sprite player=new Sprite(centerX, centerY, this.mPlayerTextureRegion);

    this.mCamera.setChaseEntity(player);
     final PhysicsHandler physicsHandler=new PhysicsHandler(player);
     player.registerUpdateHandler(physicsHandler);

     mScene.attachChild(player);

     this.mDigitalOnScreenControl=new DigitalOnScreenControl(0,CAMERA_HEIGHT-mOnScreenControlBaseTextureRegion.getHeight(),this.mCamera,this.mOnScreenControlBaseTextureRegion,this.mOnScreenControlKnobTextureRegion,0.1f,new IOnScreenControlListener() {

        @Override
        public void onControlChange(BaseOnScreenControl pBaseOnScreenControl,
                float pValueX, float pValueY) {
            // TODO Auto-generated method stub
            physicsHandler.setVelocity(pValueX*100, pValueY*100);

        }
    });

     this.mDigitalOnScreenControl.getControlBase().setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
     this.mDigitalOnScreenControl.getControlBase().setAlpha(0.5f);
     this.mDigitalOnScreenControl.getControlBase().setScaleCenter(0, 128);
     this.mDigitalOnScreenControl.getControlBase().setScale(1.25f);
     this.mDigitalOnScreenControl.getControlKnob().setScale(1.25f);
     this.mDigitalOnScreenControl.refreshControlKnobPosition();

     mScene.setChildScene(this.mDigitalOnScreenControl);

    return mScene;
  } 
```

老实说，我是`andEngine`开发中的新手，请提前帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:57:33.547

## 将播放器绑定到相机

您要求的是一种碰撞处理形式。本质上，当您将播放器移出场景时，您希望将播放器移回场景中，并且您希望在移动播放器后立即执行此操作，因此场外位置永远不会被渲染。

让我们把我刚才说的分开。您将播放器移动到此处：

```
physicsHandler.setVelocity(pValueX*100, pValueY*100); 
```

使用physicsHandler 移动玩家是完全合理的，并且考虑到可变帧率，所以到目前为止，做得很好。现在，如果它们在场景之外，您希望将它们移回场景中。所以我们需要一种新方法。让我们在移动播放器后立即调用一个方法（我们将其称为“adjustToSceneBinding()”，这样你就有了：

```
physicsHandler.setVelocity(pValueX*100, pValueY*100);
adjustToSceneBinding(player); 
```

旁注，我宁愿在播放器上使用此方法（即 player.adjustToSceneBinding()），但您的播放器对象只是一个精灵。我建议您将其更改为扩展 sprite 的自定义对象，以便您可以在那里输入您自己的代码。无论如何，让我们创建 adjustToSceneBinding() 方法。

```
public boolean adjustToSceneBinding(Sprite player) {

    // Correct the X Boundaries.
    if (player.getX() < 0) {
        player.setX(0);
    } else if (player.getX() + player.getWidth() > CAMERA_WIDTH) {
        player.setX(CAMERA_WIDTH - player.getWidth());
    }
} 
```

看看我做了什么？如果玩家的 X 坐标小于零，则将它们移回零。如果玩家的 X PLUS 玩家的宽度大于相机宽度，则将它们移回相机宽度减去玩家宽度。不要忘记玩家 X 坐标代表精灵的左侧。这就是为什么我除了计算右侧的位置之外还要考虑宽度。

上面的代码只涉及左/右移动，但我将让你推断如何为 up down 做同样的事情。

## 而是将播放器绑定到地图大小

现在，我们到目前为止所做的实际上是针对地图“大小”不大于屏幕的情况。但通常你会想要一张比屏幕尺寸更大的地图和一个追逐玩家的摄像机。为此，只需替换上面的代码，其中我将 CAMERA_WIDTH 称为代表“地图”宽度的数字。换句话说，地图可以比相机大得多。如果您在此处使用更大的数字（例如，相机的宽度），并且您将相机设置为追逐玩家实体（就像您所做的那样），那么您将拥有一张地图，玩家可以在其中移动直到他们击中地图的边界。

希望这可以帮助！:)

# delphi - 如何避免在delphi的这个循环中出现内存不足错误？

> ID：15039620
> 
> 赞同：0
> 
> 时间：2013-02-23T10:44:52.983
> 
> 标签：delphi

我正在从文件列表框中加载文件。当filelistbox中的文件数较大时，程序提示“内存不足”。如何解决？

提前致谢。

**[已编辑]**

```
public
...
List: Tstringlist;
...

procedure TForm1.FormCreate(Sender: TObject);
begin
  List:=tstringlist.create;
  List.sorted:=true;
end;

procedure TForm1.processfile;
var
  i:integer;
begin
  if filelistbox1.Count =0 then exit;
  for i:=0 to filelistbox1.count-1 do // 10000 files in filelistbox1
  begin
    memo1.clear;
    memo1.lines.loadfromfile(DirectoryListBox1+'\'+
      filelistbox1.Items.Strings[i]);  
    Addinlist;
    List.savetofile(afile);  
  end;
end;

procedure TForm1.Addinlist;

var
  w1: string;
  p1: tperlregex;
begin
  List.clear;
  p1:=tperlregex.Create(nil) ;
  p1.Subject:=memo1.text;
  p1.regex:='\w+';
  while p1.MatchAgain do 
  begin
    w1:=p1.MatchedExpression;
    List.add(w1);
  end;
  freeandnil(p1);
end;

Windows task manager memory displays: (approxomate number)

file number reaches 10, used memory 402M
file number reaches 100, used memory 402M
file number reaches 500, used memory 408M
file number reaches 1000, used memory 412M
file number reaches 1600, used memory 432M
file number reaches 2200, used memory 460M
file number reaches 3000, used memory 500M
file number reaches 5500, used memory 650M // prompts "Out of memory", form1 freez 
```

这是在 Delphi 7 上。我的问题是：

```
Does List.clear method clean memory? 
Is there number limit to the items in stringlist?
Can you please let me know how to solve it? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:27:21.827

> List.clear 方法是否清理内存？

是的，`TStringList.Clear`方法释放由字符串分配的内存

> stringlist 中的项目是否有数量限制？

不，没有实际限制。

> 你能告诉我如何解决吗？

不，因为不可能说代码

```
List.clear;
...
...// parse each word in memo1;
List.add(eachwordinmemo1); 
```

泄漏与否。

# java - Spring MongoDB 进程/线程泄漏

> ID：15039625
> 
> 赞同：1
> 
> 时间：2013-02-23T10:45:11.650
> 
> 标签：java, spring, mongodb, tomcat

我有一个在 tomcat7 上运行的 Spring3 网络应用程序。 [http://www.mkyong.com/mongodb/spring-data-mongodb-hello-world-example/](http://www.mkyong.com/mongodb/spring-data-mongodb-hello-world-example/)，我按照本教程进行操作，然后我有一个每十秒运行一次的@Scheduled 方法。在此方法中，它使用 MongoOperations 打开一个 mongo 连接 mongoOperation = (MongoOperations)ctx.getBean("mongoTemplate");

我现在的问题是我不知道如何关闭连接，并且每十秒钟就会在 tomcat 中产生一个新的进程/线程。所以我想你可以想象这个问题。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:54:04.563

通过将 MongoOperations 替换为实现 MongoTemplate 然后在 MongoTemplate 上调用 mongoTemplate.getDb().getMongo().close();

# javascript - 在新匹配中使用 .match 输出

> ID：15039627
> 
> 赞同：0
> 
> 时间：2013-02-23T10:45:20.680
> 
> 标签：javascript, regex, variables

```
var myMatch1 
var myMatch2 
```

是 .match 的输出。匹配项以单词、单词、单词的形式出现

我想用

```
var newMatch1 = new RegExp(myMatch1, "gi"); 
var newMatch2 = new RegExp(myMatch2, "gi"); 

document.write(newMatch1.exec(newMatch2)); 
```

但是，这只会进行完全匹配。我真的希望`newMatch1`and`newMatch2`被表达（/word|word|word/gi），（即匹配*任何*找到的单词）。

我将如何编写 var newMatch 来做到这一点？

**编辑：** vars`myMatch1`并且`myMatch2`不是数组，它们实际上是从 URL 中找到的关键字匹配项。找到的任何匹配项都表示为`word1, word2, word3`。我需要在另一场比赛中使用这些比赛，因此使用 vars`newMatch1`和`newMatch2`. 我不想在`new RegExp`as中表达这些词`word1, word2, word2`，它们需要表达为`word1|word2|word3`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:22:41.387

您的问题很难理解，但您可以使用字符串连接和`RegExp`构造函数来构建您的正则表达式

```
 var re = new RegExp( myMatch1 + '|' + myMatch2, 'gi' );
 var newMatch = str.match( re ); 
```

# jquery - 在取消选中复选框并更新后，它们仍然会被选中。这是以下代码

> ID：15039633
> 
> 赞同：0
> 
> 时间：2013-02-23T10:45:53.673
> 
> 标签：jquery

```
$("#ulWizardTeamMembersList").find('#chk' + ContactInfo[0]).attr("checked", "checked");
countChecked('ulWizardTeamMembersList', 'TeamMembers');

$("#ulWizardContactsList").find('#chk' + ContactInfo[0]).attr("checked", "checked");
countChecked('ulWizardContactsList', 'Contacts'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:51:41.847

尝试使用：

```
whatever.prop('checked', true); 
```

“properties”和“attributes”之间有细微的差别，jQuery 的最新版本已经开始强制执行它。

见这里：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

在这里：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

希望有帮助！

# sorting - yii CGridView 初始排序

> ID：15039640
> 
> 赞同：3
> 
> 时间：2013-02-23T10:46:30.570
> 
> 标签：sorting, yii, cgridview

有什么方法可以设置 CGridView 的初始排序？我有一个数据库表，其中包含： id | 姓名 | 描述 | create_time ... 在我的 CGridView 中，我希望在没有 id 的情况下显示我的数据（这可以通过在 CGridView 中设置列​​来完成，但我想知道是否有任何其他方法可以从 dataProvider 中消除此字段）并且我想将我的数据按名称 ASC 排序。我怎么能这样做，因为它总是在 id 之后排序并且我无法为 CGridView 设置标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:34:01.367

您可以在模型中分别定义默认顺序`CActiveDataProvider`。以下代码段`SortMeColumn`默认按列排序。

```
public function search()
{
  $criteria = new CDbCriteria;
  $criteria->compare('ID', $this->ID, true);
  $criteria->compare('SortMeColumn', $this->SortMeColumn, true);

  return new CActiveDataProvider($this,
        array(
           'criteria' => $criteria,
           'sort' => array(
              'defaultOrder' => array(
                 'SortMeColumn' => CSort::SORT_DESC
              ),
           ),
        ));
} 
```

请参阅[CSort](http://www.yiiframework.com/doc/api/1.1/CSort#defaultOrder-detail)以供参考。

# wifi - 连接到路由器的设备的 Wi-fi 信号信息

> ID：15039644
> 
> 赞同：0
> 
> 时间：2013-02-23T10:47:38.853
> 
> 标签：wifi, signals, router

有没有办法访问连接到无线路由器的设备的信号信息？我在想也许路由器主页中提供了该信息，但我的 netgear 路由器只给了我所连接设备的 IP 和 MAC 地址。此外，如果我的路由器 (DGN2000) 无法做到这一点，您是否知道另一个提供此类信息的设备（即使它需要自定义固件来显示它）。

我想制作一个收集附加设备信号数据的应用程序，但我被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:00:40.270

所以我找到了解决方案。任何可以在 dd wrt 固件上运行的路由器都可以通过导航到“状态”然后在路由器页面中的“无线”访问该数据。另一个（也是昂贵的）解决方案是 Apple Airport 路由器，它通过机场实用程序提供数据。

# php - Explode twice doesn't index properly

> ID：15039645
> 
> 赞同：0
> 
> 时间：2013-02-23T10:47:44.330
> 
> 标签：php, explode

I'm using the Simple HTML DOM Parser to retrieve a specific div from a website. I remove the part of the div that I don't want by using explode(). I then want to explode the kept part into a new array, but for some reason it doesn't get indexed as intended.

Why doesn't my last row with "echo $content[0];" print "Overall" while "echo $content[5];" does, when Overall is the first string? How do I fix this?

```
<?php
    include_once('simple_html_dom.php');

    $html = file_get_html('http://services.runescape.com/m=hiscore_oldschool/hiscorepersonal.ws?user1=Pur');
    $content = $html->find('div[id=contentHiscores]', 0)->plaintext;
    echo $content;
    echo "<br><br><br><br>";

    $content = explode("SkillRankLevelXP", $content);
    $content = $content[1];
    echo $content;
    echo "<br><br><br><br>";

    $content = explode(" ", $content);
    echo $content[0];

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:05:43.457

Between SkillRankLevelXP and Overall, there are 6 spaces, though the browser only shows it as 1\. Use the "View Source" menu and you'll see what I mean.

You can use some RegEx to replace 2 or more spaces with just 1 space, and I think that will get you closer to what you want.

```
<?php
    include_once('simple_html_dom.php');

    $html = file_get_html('http://services.runescape.com/m=hiscore_oldschool/hiscorepersonal.ws?user1=Pur');
    $content = $html->find('div[id=contentHiscores]', 0)->plaintext;
    $content=preg_replace('/ {2,}/', ' ', trim($content));

    $content = explode('SkillRankLevelXP ', $content);
    $content = $content[1];

    $content = explode(' ', $content);
    print_r($content);
?> 
```

# facebook - FB：如何根据日期获取帖子计数

> ID：15039646
> 
> 赞同：0
> 
> 时间：2013-02-23T10:47:48.117
> 
> 标签：facebook, facebook-graph-api

我正在尝试进行一些统计，我需要通过 GraphApi 在特定日期计算 facebook 上的所有帖子（不仅是朋友的帖子）。任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:45:52.310

您只能使用 Graph API**搜索公共对象。**

[https://developers.facebook.com/docs/reference/api/search/](https://developers.facebook.com/docs/reference/api/search/)

这是您获取所有**最近**公开帖子的方式：

```
https://graph.facebook.com/search?q=*&type=post 
```

但！

> 帖子搜索不支持限制/偏移分页。

这意味着您将无法使用`since`和搜索给定日期的旧帖子`until`。

# asp.net-mvc - HttpPostedFileBase 未绑定到模型

> ID：15039648
> 
> 赞同：19
> 
> 时间：2013-02-23T10:47:55.670
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

这是我的视图模型

```
public class FaultTypeViewModel
{
    [HiddenInput(DisplayValue = false)]
    public int TypeID { get; set; }

    [Required(ErrorMessageResourceType = typeof(AdministrationStrings), ErrorMessageResourceName = "FaultTypeNameRequired")]
    [Display(ResourceType = typeof(AdministrationStrings), Name = "FaultTypeName")]
    public string TypeName { get; set; }

    [Display(ResourceType = typeof(AdministrationStrings), Name = "FaultTypeDescription")]
    [DataType(DataType.MultilineText)]
    public string TypeDescription { get; set; }

    [Display(ResourceType = typeof(AdministrationStrings), Name = "FaultTypeImageFile")]
    public HttpPostedFileBase TypeImageFile { get; set; }

    [HiddenInput(DisplayValue = false)]
    public string TypeImageURL { get; set; }
} 
```

请注意，我有一个“TypeImageFile”HttpPostedFileBase 我希望模型绑定器将该属性从表单绑定到模型传递给控制器​​但我只是不断收到 null。

这是视图中的相关代码：

```
@using (Html.BeginForm("AddFaultType","Administration", FormMethod.Post))
{

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×</button>
        <h3 id="myModalLabel">@SharedStrings.Add @SharedStrings.FaultType</h3>
    </div>
    <div class="modal-body">
        @Html.ValidationSummary(true)
        <div class="editor-label">
            @Html.LabelFor(model => model.TypeName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TypeName)
            @Html.ValidationMessageFor(model => model.TypeName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.TypeDescription)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TypeDescription)
            @Html.ValidationMessageFor(model => model.TypeDescription)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.TypeImageFile)
        </div>
        <div class="editor-field">
            <input type="file" name="TypeImageFile" id="TypeImageFile" />
        </div>
    </div>

    <div class="modal-footer">
        <input type="submit" value="@SharedStrings.Add" class="btn btn-primary" />
        @Html.ActionLink(SharedStrings.Cancel, "Index", "Administration", null, new { Class = "btn", data_dismiss = "modal", aria_hidden = "true" })
    </div>
} 
```

这是控制器：

```
 [HttpPost]
        public ActionResult AddFaultType(FaultTypeViewModel i_FaultToAdd)
        {
            var fileName = Path.GetFileName(i_FaultToAdd.TypeImageFile.FileName);
            var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
            i_FaultToAdd.TypeImageFile.SaveAs(path);

            return RedirectToAction("Index");
        } 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-23T17:56:47.187

如果您希望能够上传文件，请确保您已将`enctype`表单上的属性设置为表单上的属性：`multipart/form-data`

```
@using (Html.BeginForm("AddFaultType", "Administration", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-07T12:53:43.720

完成达林的回答：如果您希望能够上传文件，请确保您已将`enctype`表单上的属性设置为表单上：`multipart/form-data`

```
@using (Html.BeginForm("AddFaultType", "Administration", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    ...
} 
```

为确保您`<input>`作为模型的一部分传输到控制器，请使用 Html Helpers，`Id`如下`name`所示：

```
<input type="file" id="@Html.IdFor(x=>x.HttpPostedFileBase)" name="@Html.NameFor(x=>x.HttpPostedFileBase)" accept=".csv,.txt"/> 
```

在 MVC5 中工作对不起，我找不到 MVC3 中可用的助手的任何参考

# objective-c - 调用在 NSView 中绘制文本的方法时出错

> ID：15039649
> 
> 赞同：1
> 
> 时间：2013-02-23T10:47:58.943
> 
> 标签：objective-c, macos, nsview

下一个菜鸟问题是……我必须在我的视图中画出很多文本，并认为编写一种更容易的方法是个好主意。这段代码在我看来：

```
- (void)drawText: (NSString*) tdString : (NSString*) schrift : (unsigned char) r : (unsigned char) g : (unsigned char) b :
                (int) tsize : (int) xpos : (int) ypos;
{
NSPoint textPoint = NSMakePoint(xpos, ypos);
NSMutableDictionary *textAttrib = [[NSMutableDictionary alloc] init];
[textAttrib setObject:[NSFont fontWithName:schrift size:tsize] forKey:NSFontAttributeName];
[textAttrib setObject:[NSColor colorWithCalibratedRed:(r/255.0f) green:(g/255.0f) blue:(b/255.0f) alpha:1.0]forKey:NSForegroundColorAttributeName];
[tdString drawAtPoint:textPoint withAttributes:textAttrib];
}

- (void)drawBPM
{
NSString *bpmString = [NSString stringWithFormat:@"%d", bpm];
NSString *tbpmString = [NSString stringWithFormat:@"%d", mbpm];

if (bpm < 100){             drawText(bpmString,@"Helvetica Light", 140, 140, 140, 36, 100, 100);
}
if (bpm > 99 && bpm < 110){ drawText(bpmString,@"Helvetica Light", 140, 140, 140, 36, 100, 100);
}
if (bpm > 109 && bpm < 200){drawText(bpmString,@"Helvetica Light", 140, 140, 140, 36, 100, 100);
}
if (bpm > 199){             drawText(bpmString,@"Helvetica Light", 140, 140, 140, 36, 100, 100);
}
} 
```

在编辑器中，我收到警告“函数 'drawText' 的隐式声明在 C99 中无效”。运行时出现错误：“未找到架构 x86_64 链接器命令的符号失败，退出代码为 1”。很明显，这必须在之前问过，但我就是想不通。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:56:19.023

*警告“函数 'drawText' 的隐式声明*在 C99 中无效”是因为您尚未在`@interface`.

您还错误地定义了该方法，它应该是（换行符可选，但一个好主意）：

```
- (void)drawText:(NSString*)tdString
         schrift:(NSString*)schrift
               r:(unsigned char)r
               g:(unsigned char)g
               b:(unsigned char)b
           tsize:(int)tsize
            xpos:(int)xpos
            ypos:(int)ypos; 
```

（请注意，您应该使用`CGFloat`颜色和位置而不是整数）。

然后它需要作为一个Objective-C方法调用，而不是一个C方法：

```
[self drawText:bpmString
       schrift:@"Helvetica Light"
             r:140
             g:140
             b:140
         tsize:36
          xpos:100
          ypos:100]; 
```

最后，您是从内部调用这些方法，`[NSView drawRect:]`不是吗？

# java - 更改 JTextPane 的大小

> ID：15039652
> 
> 赞同：5
> 
> 时间：2013-02-23T10:48:15.443
> 
> 标签：java, swing, jtextarea, jtextpane, preferredsize

我是 Java 新手，刚刚在 StackOverflow: 中找到了这段代码[`ResizeTextArea`](https://stackoverflow.com/questions/9370561/enabling-scroll-bars-when-jtextarea-exceeds-certain-amount-of-lines/9383400#9383400)。

我想使用`JTextPane`而不是`JTextArea`. 在`JTextPane`中，没有`setRows()`改变行数的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T15:37:00.630

a 中各行的高度`StyledDocument`可以变化，因此限制 a 中的行的概念没有*用*`JTextPane`。您*可以*将滚动窗格视口的首选大小限制为主面板大小的某个有用部分，如下[所示](https://stackoverflow.com/a/14858272/230513)。

附录：正如@camickr 评论的那样，`getPreferredSize()`在`JScrollPane`. 我还更新了代码以将增长限制在当前大小的一小部分：¹ / [3]。

![图片](../Images/7e21db50252183faed963744a6a8483e.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.border.EmptyBorder;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

/**
 * @see https://stackoverflow.com/a/15042241/230513
 * @see https://stackoverflow.com/a/14858272/230513
 */
public class LimitTextPaneSize {

    private static final int SIZE = 200;
    private static final double LIMIT = 1 / 3d;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                display();
            }
        });
    }

    private static void display() {
        final JPanel mainPanel = new JPanel(new BorderLayout(5, 5));
        mainPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        JPanel topPanel = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(SIZE, SIZE);
            }
        };
        final JTextPane chatArea = new JTextPane();
        final JScrollPane scrollPane = new JScrollPane(chatArea){
            @Override
            public Dimension getPreferredSize() {
                Dimension d = super.getPreferredSize();
                int desired = (int) (mainPanel.getSize().height * LIMIT);
                int limit = Math.min(desired, d.height);
                return new Dimension(SIZE, limit);
            }
        };
        chatArea.getDocument().addDocumentListener(new DocumentListener() {
            @Override
            public void insertUpdate(DocumentEvent e) {
                updateSize();
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                updateSize();
            }

            @Override
            public void changedUpdate(DocumentEvent e) {
                updateSize();
            }

            private void updateSize() {
                mainPanel.revalidate();
            }
        });
        mainPanel.add(topPanel, BorderLayout.CENTER);
        mainPanel.add(scrollPane, BorderLayout.SOUTH);

        JFrame f = new JFrame("LimitTextPaneSize");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(mainPanel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# c++ - Dropbox、TeamViewer、RDP 等应用程序如何到达安装它们的计算机？

> ID：15039656
> 
> 赞同：2
> 
> 时间：2013-02-23T10:48:59.180
> 
> 标签：c++, objective-c, c, p2p

我知道（猜想）这是某种集中的点对点连接。但是，它是如何成立的呢？应用程序本身充当客户端和服务器。它们连接到某个中央服务器，用 IP、MAC 地址等数据填充用户节点并休息。但是然后呢？

1.  他们是否在用户计算机之间建立直接套接字连接？如果是，他们如何避开路由器？

2.  他们是否通过中央服务器传输数据？

我问的原因是我想构建一个远程桌面应用程序，它能够将屏幕视图实时流式传输到连接的客户端应用程序。我知道那里有很多，但 99% 都很慢。我知道接近实时是可能的，OnLive 做到了。以接近实时的速度工作的 2 个 RDC 是 LogMeIn Pro（我不想付费，因为我只需要付费包中的高清流）和 Radmin（仅限 Windows）。

我已准备好对其进行编码（在 C/C++/Objective-C 中），但我只是不知道如何设计它。

# css - 浮动 div 之间的间距均匀

> ID：15039657
> 
> 赞同：1
> 
> 时间：2013-02-23T10:48:59.737
> 
> 标签：css, css-float

我想均匀地浮动 3 个 div（或更一般地说）。我正在构建一个响应式主题（有点），我希望特定项目根据可用宽度进行相应调整。

现在是的，我可以从随机屏幕测量开始并计算“断点”（我通常会做的），但是有这么多设备，我试图看看我是否能以更智能的方式做出真正的弹性，对我来说，会成为更自动的东西。就像当一个人甚至与说`margin 0px auto;` 等对齐时......

例如。如果我有 1000px 宽的父 div，并且`div1`我想浮动在说，`div2`宽和“均匀”间距`div3`，id 可能会这样做。 `div4``240px`

```
div1{ float:left; max-width:XXX; min-width:XXX; margin-right:10px; }
div2{ float:left; max-width:XXX; min-width:XXX; margin-right:10px; }
div3{ float:left; max-width:XXX; min-width:XXX; margin-right:10px; }
div4{ float:right; max-width:XXX; min-width:XXX; } 
```

这将或多或少给我均匀的间距。如果我想适应不同的屏幕，我可能会做一个媒体查询和等等等等

然后 id 必须从数学开始，才能做出看起来均匀的断点。

有没有办法让浮动的 div 之间的间距保持甚至不受屏幕宽度的影响，而不必进入特定的数字？再举一个例子，就像一个`margin 0px auto;`例子一样？？？

以前可能有人问过，如果有，我很抱歉。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:08:48.543

如果您的标记看起来与此类似...

```
<div class="parent">
    <div>a</div>
    <div>b</div>
    <div>c</div>
    <div>c</div>
</div> 
```

Flexbox 可以很容易地做到这一点，您不需要对更窄的设备使用媒体查询。它只是为您重新分配可用空间。

[http://jsfiddle.net/END8C/](http://jsfiddle.net/END8C/)（包括所有前缀）

```
.parent {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-flow: row wrap;
  -ms-flex-flow: row wrap;
  flex-flow: row wrap;
  -webkit-flex-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: -5px; /* optional */
  overflow: hidden; /* optional */
}

.parent div {
  -webkit-flex: 0 0 240px;
  -ms-flex: 0 0 240px;
  flex: 0 0 240px;
  margin: 5px;
} 
```

对于不支持 flexbox 的浏览器，您仍然可以自由地在子元素上使用浮点数（参见：[http](http://caniuse.com/#search=flexbox) ://caniuse.com/#search=flexbox ）。唯一需要注意的是 Firefox 不支持包装，因此您必须为无前缀版本使用 @supports 块（请参阅：[http ://www.sitepoint.com/supports-native-css-feature-检测/](http://www.sitepoint.com/supports-native-css-feature-detection/)）。

您可以使用 justification 获得类似的效果：

[http://jsfiddle.net/END8C/1/](http://jsfiddle.net/END8C/1/)

```
.parent {
    text-align: justify;
    margin: -5px; /* optional */
}

.parent:after {
    content: " ";
    display: inline-block;
    width: 100%;
}

.parent div {
    display: inline-block;
    margin: 5px;
    width: 240px;
} 
```

您需要在最后一个子元素之后注释掉或删除任何空格，否则当子元素换行时它们不会正确排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:50:30.193

试试这个，它适用于动态宽度，

```
#parent
{
    width:99%;
    text-align:center;
    border-style:solid;
}
.kids
{
   width:23%;
   border-style:solid;
   height:100px;
   display:inline-block;
} 
```

# java - 计算网络下载速度

> ID：15039660
> 
> 赞同：0
> 
> 时间：2013-02-23T10:49:31.607
> 
> 标签：java, networking, download

我已经编写了以下代码来使用 java 计算下载速度。但它没有给出正确的结果。问题是什么？。是我的逻辑有问题，还是java网络类的使用有问题？我认为这是java网络类的使用问题。谁能告诉我到底是什么问题？

```
/*Author:Jinu Joseph Daniel*/
import java.io.*;
import java.net.*;
class bwCalc {
    static class CalculateBw {
            public void calculateUploadBw() {}
            public float calculateDownloadRate(int waitTime) throws Exception {
               int bufferSize = 1;
               byte[] data = new byte[bufferSize]; // buffer
               BufferedInputStream in = new BufferedInputStream(new URL("https://www.google.co.in/").openStream());
               int count = 0;
               long startedAt = System.currentTimeMillis();
               long stoppedAt;
               float rate;
                while (((stoppedAt = System.currentTimeMillis()) - startedAt) < waitTime) {
                    if ( in .read(data, 0, bufferSize) != -1) {
                    count++;
                } else {
                    System.out.println("Finished");
                    break;
                }
            }
            in .close();
            rate = 1000 * (((float) count*bufferSize*8 / (stoppedAt - startedAt)) )/(1024*1024);//rate in Mbps
            return rate;
        }
    public float calculateAverageDownloadRate() throws Exception{
        int times[] = {100,200,300,400,500};
        float bw = 0,curBw;
        int i = 0, len = times.length;
        while (i < len) {
            curBw = calculateDownloadRate(times[i++]);
            bw += curBw;
            System.out.println("Current rate : "+Float.toString(curBw));
        }
        bw /= len;
        return bw;
    }
}
public static void main(String argc[]) throws Exception {
    CalculateBw c = new CalculateBw();
    System.out.println(Float.toString(c.calculateAverageDownloadRate()));
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:09:32.007

你的代码有很多问题...

*   你没有检查你正在阅读多少字节
*   用谷歌主页测试是没有用的，因为内容很小，而且大部分下载时间与网络延迟有关；你应该尝试下载一个大文件（10+ MB）——**除非**你真的想测量延迟而不是带宽，在这种情况下你可以简单地运行 ping
*   如果你想得到任何相关的结果，你还需要给它超过 500 毫秒 - 我会说至少 5 秒
*   大量的代码风格问题，但那些不太重要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T08:33:58.137

下面是计算平均下载速率的代码，单位为 KB 和 MB/秒，您可以将它们缩放 8 以获得以比特/秒为单位的速率。

```
public static void main(String argc[]) throws Exception {
        long totalDownload = 0; // total bytes downloaded
        final int BUFFER_SIZE = 1024; // size of the buffer
        byte[] data = new byte[BUFFER_SIZE]; // buffer
        BufferedInputStream in = new BufferedInputStream(
                new URL(
                        "http://kernel.ubuntu.com/~kernel-ppa/mainline/v2.6.15/linux-headers-2.6.15-020615_2.6.15-020615_all.deb")
                        .openStream());
        int dataRead = 0; // data read in each try
        long startTime = System.nanoTime(); // starting time of download
        while ((dataRead = in.read(data, 0, 1024)) > 0) {
            totalDownload += dataRead; // adding data downloaded to total data
        }
        /* download rate in bytes per second */
        float bytesPerSec = totalDownload
                / ((System.nanoTime() - startTime) / 1000000000);
        System.out.println(bytesPerSec + " Bps");
        /* download rate in kilobytes per second */
        float kbPerSec = bytesPerSec / (1024);
        System.out.println(kbPerSec + " KBps ");
        /* download rate in megabytes per second */
        float mbPerSec = kbPerSec / (1024);
        System.out.println(mbPerSec + " MBps ");
    } 
```

# ios - 从 viewController 调用 (void)load

> ID：15039663
> 
> 赞同：-2
> 
> 时间：2013-02-23T10:49:48.880
> 
> 标签：ios, objective-c

我正在尝试异步加载 Web 数据。我知道我可以使用以下内容，但我不知道如何调用 void(load) 方法。我怎么称呼这个？它似乎没有被自动调用。谢谢！

```
- (void)load
{
NSURL *myURL = [NSURL URLWithString:[NSString 
stringWithFormat:@"http://www.website.com"]];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL 
cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

[[NSURLConnection alloc] initWithRequest:request delegate:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:01:24.530

就像 H2CO3 说的，你应该使用 [self load] 来调用该方法。我希望您想在方法 -(void)viewDidLoad 中调用它。在加载视图时调用一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:09:20.670

```
__attribute__((constructor)) 
- (void)load
{
NSURL *myURL = [NSURL URLWithString:[NSString 
stringWithFormat:@"http://www.website.com"]];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL 
cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

[[NSURLConnection alloc] initWithRequest:request delegate:self];
} 
```

> 它在加载共享库时运行，通常是在程序启动期间。

看看[__attribute__((constructor)) 究竟是如何工作的？](https://stackoverflow.com/questions/2053029/how-exactly-does-attribute-constructor-work)

# apache - 是否可以在同一个域子目录中创建多个服务器

> ID：15039664
> 
> 赞同：0
> 
> 时间：2013-02-23T10:50:07.743
> 
> 标签：apache, .htaccess, dns

这只是我的项目。它正在成长，我想在同一域上添加一个新服务器作为子目录。是否可以制作子目录，如：

示例.com 127.0.0.1

example.com/project1/127.0.0.2

example.com/project2/127.0.0.3

我如何配置 DNS 或 Apache 以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:19:36.690

听起来你想实现一个可以用[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)完成的代理。我假设这些网站已经在运行，`127.0.0.2`并且`127.0.0.3`公共前端正在运行`127.0.0.1`

您需要`127.0.0.1`在主配置（对于单个站点）或虚拟主机的虚拟主机块中编辑配置文件，添加[ProxyPass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)配置：

```
ProxyPass       /project1/  http://127.0.0.2/
ProxyPass       /project2/  http://127.0.0.3/ 
```

这会将所有请求从 发送`/project1/`到`http://127.0.0.2/`，如果您想隐藏此服务器，或者公众无法访问它（例如内部网络地址），您将需要设置反向代理，以便结果通过您的公众反馈给用户前端，因此您需要添加[ProxyPassReverse](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse)配置：

```
ProxyPassReverse /project1/  http://127.0.0.2/
ProxyPassReverse /project2/  http://127.0.0.3/ 
```

除此之外，您还需要在配置文件中启用代理模块，这些是我为基本反向代理启用的

```
LoadModule  proxy_module         modules/mod_proxy.so
LoadModule  proxy_http_module    modules/mod_proxy_http.so 
```

根据您的情况，还有一些其他模块可能很重要

```
mod_proxy_connect    This handles the CONNECT function if connecting to https:// servers
mod_proxy_ftp        This handles connections to FTP servers
mod_proxy_ajp        This handles connections to tomcat/AJP servers
mod_headers          This can modify response and request headers
mod_deflate          This negotiates compression with backends
mod_proxy_html       This is a 3rd party module which will rewrite HTML links to the proxy address space 
```

# symfony - 生成唯一 ID - 教义 - symfony2

> ID：15039665
> 
> 赞同：37
> 
> 时间：2013-02-23T10:50:22.157
> 
> 标签：symfony, doctrine

我想为我的票生成一个唯一的票 ID。但是如何让教义产生一个唯一的id呢？

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id()
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id; 
```

再解释一下：

*   id 必须是 6 个包机，例如：678915
*   id 必须是唯一的

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-04-19T20:18:52.200

从[2.3 版](http://apigen.juzna.cz/doc/doctrine/doctrine2.git/class-Doctrine.ORM.Id.UuidGenerator.html)开始，您只需将以下注释添加到您的属性中：

```
/**
 * @ORM\Column(type="guid")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="UUID")
 */
protected $id; 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-04-01T21:31:00.777

使用自定义 GeneratedValue 策略：

**1.**在您的实体类中：

```
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="CUSTOM")
 * @ORM\CustomIdGenerator(class="AppBundle\Doctrine\RandomIdGenerator")
 */
protected $id; 
```

**2.**然后创建`AppBundle/Doctrine/RandomIdGenerator.php`包含内容的文件

```
namespace AppBundle\Doctrine;
use Doctrine\ORM\Id\AbstractIdGenerator;

class RandomIdGenerator extends AbstractIdGenerator
{
    public function generate(\Doctrine\ORM\EntityManager $em, $entity)
    {
        $entity_name = $em->getClassMetadata(get_class($entity))->getName();

        // Id must be 6 digits length, so range is 100000 - 999999
        $min_value = 100000;
        $max_value = 999999;

        $max_attempts = $min_value - $max_value;
        $attempt = 0;

        while (true) {
            $id = mt_rand($min_value, $max_value);
            $item = $em->find($entity_name, $id);

            // Look in scheduled entity insertions (persisted queue list), too
            if (!$item) {
                $persisted = $em->getUnitOfWork()->getScheduledEntityInsertions();
                $ids = array_map(function ($o) { return $o->getId(); }, $persisted);
                $item = array_search($id, $ids);
            }

            if (!$item) {
                return $id;
            }

            // Should we stop?
            $attempt++;
            if ($attempt > $max_attempts) {
                throw new \Exception('RandomIdGenerator worked hardly, but failed to generate unique ID :(');
            }  
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T01:31:31.143

您可以使用 PrePersist 注释，如下所示：

```
/**
 * @ORM\PrePersist()
 */
public function preSave() {
    $this->id = uniqid();
} 
```

正如注解名称所暗示的，它将在对象持久化到数据库之前运行。

对于唯一 id，我只是使用原生 php uniqid() 函数[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)将返回 13 个字符。要仅获取 6 个字符，请参阅此[PHP Ticket ID Generation](https://stackoverflow.com/questions/10677836/php-ticket-id-generation)

在 $id 属性中，我认为您还需要删除此行以防止自动生成它的值：

```
@ORM\GeneratedValue(strategy="AUTO") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T10:57:27.723

Doctrine 会把这个字段当作你的主键（因为`@Id`注解），所以这个字段已经是唯一的了。如果您`@GeneratedValue`在策略上有注释，`AUTO`Doctrine 将确定在 db 平台上使用哪种策略。它将默认`IDENTITY`在 MySql 上，并且该字段将是一个`auto_increment`then。

您可以编写不带括号的 id 注释，如下所示。

*   ORM\ID

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-07T13:06:57.717

虽然我支持 Jonhathan 建议的 UUID 方法，但您可能更喜欢更短、更易读的标识符。在这种情况下，您可以使用[ShortId Doctrine bundle](https://github.com/PUGX/shortid-doctrine-bundle)。

# java - 我可以使用 Gson 序列化方法本地类和匿名类吗？

> ID：15039670
> 
> 赞同：5
> 
> 时间：2013-02-23T10:51:23.923
> 
> 标签：java, gson

例子：

```
import com.google.gson.Gson;

class GsonDemo {

    private static class Static {String key = "static";}
    private class NotStatic {String key = "not static";}

    void testGson() {
        Gson gson = new Gson();

        System.out.println(gson.toJson(new Static()));
        // expected = actual: {"key":"static"}

        System.out.println(gson.toJson(new NotStatic()));
        // expected = actual: {"key":"not static"}

        class MethodLocal {String key = "method local";}
        System.out.println(gson.toJson(new MethodLocal()));
        // expected: {"key":"method local"}
        // actual: null  (be aware: the String "null")

        Object extendsObject = new Object() {String key = "extends Object";};
        System.out.println(gson.toJson(extendsObject));
        // expected: {"key":"extends Object"}
        // actual: null  (be aware: the String "null")        
    }

    public static void main(String... arguments) {
        new GsonDemo().testGson();
    }
} 
```

我想要这些序列化，尤其是在单元测试中。有没有办法这样做？我发现[使用 Gson 序列化匿名类](https://stackoverflow.com/questions/10746278/serializing-anonymous-classes-with-gson)，但该论证仅对反序列化有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:12:35.340

FWIW，[杰克逊](http://jackson.codehaus.org)将很好地序列化匿名和本地类。

```
public static void main(String[] args) throws Exception
{
  ObjectMapper mapper = new ObjectMapper();

  class MethodLocal {public String key = "method local";}
  System.out.println(mapper.writeValueAsString(new MethodLocal()));
  // {"key":"method local"}

  Object extendsObject = new Object() {public String key = "extends Object";};
  System.out.println(mapper.writeValueAsString(extendsObject));
  // {"key":"extends Object"}
} 
```

请注意，默认情况下，Jackson 不会像 Gson 那样通过反射访问非公共字段，但可以将其配置为这样做。Jackson 的方式是使用常规的 Java 属性（通过 get/set 方法）。（将其配置为使用私有字段确实会降低运行时性能，但它仍然比 Gson 快得多。）

# spring-mvc - 如何为 Web 应用程序进行测试（单元/功能/集成）->Spring MVC+Bootstrap

> ID：15039671
> 
> 赞同：1
> 
> 时间：2013-02-23T10:51:29.600
> 
> 标签：spring-mvc, twitter-bootstrap

我正在使用 Spring MVC 作为后端（作为 API）创建一个 Web 应用程序，并且该 API 由 Twitter Bootstrap 模板中的 JQuery 代码访问。

我如何对这样的网络应用程序进行测试？我是否首先使用 Spring 的内置测试支持测试 Spring API，然后使用 Qunit/其他 Javascript 测试框架再次测试 HTML Web App？有没有更快/更容易/推荐的方法来测试此类网络应用程序？

# plone - buildout 可以创建内容作为 Plone 安装的一部分吗？

> ID：15039672
> 
> 赞同：4
> 
> 时间：2013-02-23T10:51:31.020
> 
> 标签：plone, buildout

我正在尝试为站点实现 Plone 的可重复部署，并使用构建，基本上遵循 Martin Aspeli 的书*Professional Plone 4 Development*。`<site>.policy`我可以使用我的源产品和设置系统`<site>.theme`，并且已经自动激活了主题，但是当我运行 buildout 时，我仍然需要实例化一个 Plone 站点并激活策略产品，然后再为该站点创建标准对象。

buildout 是否可以在设置过程中检查内容对象（如 Plone 站点对象或特定文件夹）的存在，如果它们不存在并使用正确的设置创建它们？我可以在单独的`<site>.content`产品中做到这一点，还是应该在`<site>.policy`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T14:11:40.747

原则上，buildout 可以做任何你可以编码的事情，只要你创建一个配方来为你做这件事。

幸运的是，有人已经创建了一个配方来为您创建 plone 站点，称为[`collective.recipe.plonesite`](https://pypi.python.org/pypi/collective.recipe.plonesite)：

```
[buildout]
parts = 
    ...
    plonesite

[plonesite]
recipe = collective.recipe.plonesite
site-id = <site>
profiles-initial =
    <site>.policy.profile-default
post-extras =
    ${buildout}/src/<site>.content/site/content/create_content.py 
```

该配方提供了几个钩子，可让您控制站点创建，并在创建站点之前或之后执行系统命令，或者在运行 GS 配置文件之前或之后执行额外的 python 代码。

在上面的示例中，`post-extras`运行`create_content.py`带有变量`app`并`site`设置的脚本：

```
from Products.CMFPlone.utils import _createObjectByType

if 'someobject' not in site:
    _createObjectByType('SomeType', site, 'someobject', title='Foo Bar') 
```

# css - CSS 模板和 Visual Studio MVC 项目

> ID：15039674
> 
> 赞同：1
> 
> 时间：2013-02-23T10:51:42.173
> 
> 标签：css, asp.net-mvc, visual-studio-2010, html

所以我下载了一些 CSS 模板来帮助我的网站看起来更漂亮。在我最后一年的学习中，我有一个 MVC 3 项目，我不希望它看起来像每个人都在使用的相同的通用 MVC 布局。是否可以轻松集成模板或者是否有特殊的 MVC 模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:54:16.180

> 是否可以轻松集成模板？

**是的，当然。**只需使用相应的 HTML 更改视图中的代码。您可以观看[此](http://www.youtube.com/watch?v=0O0gi2m_p_o)视频了解更多详情。

# php - iOs6 - 从 Safari 拍照并保存到相册

> ID：15039676
> 
> 赞同：2
> 
> 时间：2013-02-23T10:51:55.827
> 
> 标签：php, html, ipad, ios6, safari

我正在开发一个带有 html/php 的网站。我有一个上传照片的按钮。它适用于典型的 html 标签“输入类型=文件”。一切正常。

我的问题是从 iphone/ipad 中的 Safari 访问该功能时（在 iOs6 中工作）。当我选择“拍照或录像”时工作正常，图像加载到网站但没有保存到设备的相机胶卷。

我想将使用 safari 拍摄的图像保存到照片库。我该怎么办？

提前致谢！

# java - logcat 显示启动但活动未在模拟器中启动

> ID：15039683
> 
> 赞同：-1
> 
> 时间：2013-02-23T10:52:20.613
> 
> 标签：java, android, xml, android-activity

朋友们，我真的被一个非常奇怪的问题所震惊。

我的 logcat 显示活动已启动，但模拟器只显示一个空白页而不是所需的活动（在 logcat 中，`Clfbpg`是不会加载的 java 文件）。

这是日志猫。

```
02-23 16:00:43.237: I/ActivityManager(65): Displayed activity com.tmrepo/.Client: 4387 ms (total 4387 ms)  
02-23 16:00:45.287: D/dalvikvm(293): GC_EXPLICIT freed 46 objects / 2168 bytes in 9619ms  
02-23 16:00:55.946: D/dalvikvm(263): GC_EXTERNAL_ALLOC freed 2219 objects / 86480 bytes in 320ms  
02-23 16:00:56.236: W/KeyCharacterMap(263): No keyboard for id 0  
02-23 16:00:56.236: W/KeyCharacterMap(263): Using default keymap: /system/usr/keychars/qwerty.kcm.bin  
02-23 16:00:58.656: D/dalvikvm(129): GC_EXPLICIT freed 766 objects / 42248 bytes in 7048ms  
02-23 16:01:04.418: I/ActivityManager(65): Starting activity: Intent { cmp=com.tmrepo/.Clwelcome2 }  
02-23 16:01:06.887: I/ActivityManager(65): Displayed activity com.tmrepo/.Clwelcome2: 2112 ms (total 2112 ms)  
02-23 16:01:10.520: D/dalvikvm(702): GC_FOR_MALLOC freed 6993 objects / 306016 bytes in 236ms  
02-23 16:01:15.327: I/ActivityManager(65): Starting activity: Intent { cmp=com.tmrepo/.Clfbpg }  
02-23 16:01:17.237: I/ActivityManager(65): Displayed activity com.tmrepo/.Clfbpg: 1777 ms (total 1777 ms)` 
```

我的应用程序有许多页面，其中只有一个特定页面未加载。其他页面工作正常。我做了一切可能的事情来让该页面运行，但就是无法得到错误。

我尝试将另一个布局连接到 java 文件，而不是我想要的布局。但一切都是一样的。

我的 XML 代码是`

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="18dp"
    android:text="@string/feedback"
    android:textColor="#ffffff"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/texthome"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="28dp"
    android:layout_marginLeft="18dp"
    android:text="@string/home"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#ff0057" />

<EditText
    android:id="@+id/tbproname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="32dp"
    android:ems="10"
    android:hint="@string/proname"
    android:textColor="#ffffff" />

<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tbproname"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="24dp"
    android:text="@string/feedback" /> 
```

`

我认为问题出在java文件上。

我的java文件是`package com.tmrepo;

导入android.app.Activity；导入android.content.Intent；导入android.os.Bundle；导入android.view.View；导入 android.view.View.OnClickListener；导入android.widget.Button；导入 android.widget.EditText；//导入android.widget.ScrollView; 导入 android.widget.TextView；

公共类 Clfbpg 扩展 Activity {

```
EditText tbproname;
TextView texthome;
Button submit;

public void OnCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.feedform);

    tbproname = (EditText)findViewById(R.id.tbproname);
    texthome = (TextView)findViewById(R.id.texthome);
    submit = (Button)findViewById(R.id.submit);
    //scroll = (ScrollView)findViewById(R.id.scroll);

    texthome.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent1();
            finish();
        }

        public void Intent1() {
            // TODO Auto-generated method stub
            Intent i1 = new Intent();
            i1.setClass(Clfbpg.this,Clwelcome2.class);
            startActivity(i1);          }
    });

    submit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent2();
            finish();
        }

        public void Intent2() {
            // TODO Auto-generated method stub
            Intent i2 = new Intent();
            i2.setClass(Clfbpg.this,Clwelcome2.class);
            startActivity(i2);
        }
    }); 
}} 
```

这里的任何人都可以对这个恼人的问题有任何想法吗？非常感谢。自2天以来，我一直在尝试解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:02:49.830

永远记住关于 androidmainfest.xml 的事情，然后想想。确保你首先添加到 Clfbpg 类活动。签入 AndroidManifest.xml 文件。

```
<activity android:name="Clfbpg"> 
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</activity> 
```

这应该首先调用。告诉我怎么回事儿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:02:25.143

您可能需要添加这两行`AndroidManifest.xml`

```
<activity android:name="Clfbpg">
    <action android:name="android.intent.action.MAIN" />          <-----
    <category android:name="android.intent.category.LAUNCHER" />  <----
...
</activity> 
```

因此，它将在移动屏幕上创建图标，您将能够启动您的应用程序。

# c++ - C++中具有概率分布的向量的随机生成器

> ID：15039688
> 
> 赞同：0
> 
> 时间：2013-02-23T10:53:17.883
> 
> 标签：c++, random, generator, distribution, probability

[我有与这里的分布式概率随机数生成器](https://stackoverflow.com/questions/9956486/distributed-probability-random-number-generator)相同的问题，但在 c++ 中。我知道如何实现它，但我的问题是 - 该功能是否在当前版本的 c++ 中构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:28:01.787

为了完整起见，我将回答这个问题。

可以使用 C++11 的随机数生成库生成此分布。这首先需要播种一个随机数引擎（这里我使用`std::mt19937`），然后将该引擎与`std::discrete_distribution`随机数分布一起使用。

`std::discrete_dstribution`的构造函数采用权重序列或权重序列上的迭代器范围`initializer_list`。然后根据权重序列中的相应指标对生成的数字进行加权。也就是说，如果`{10, 5, 1}`是 权重，`0`将产生`10/(10 + 5 + 1) = 0.625`概率，依此类推。

以下代码演示了另一个问题的解决方案：

```
std::random_device device;
std::mt19937 engine(device()); // Seed the random number engine
std::discrete_distribution<> dist({150, 40, 15, 3}); // Create the distribution

// Now generate values with:
std::cout << (dist(engine) + 1) << std::endl; 
```

# javascript - JQuery toggle() 在 1.9.1 中不起作用

> ID：15039691
> 
> 赞同：0
> 
> 时间：2013-02-23T10:54:04.687
> 
> 标签：javascript, jquery, toggle

我尝试使用 Jquery 切换事件如下：

```
$("button:eq(2)").toggle(function(){
                                $(this).attr("style","background:red");},
                                function(){
                                $(this).attr("style","background:blue");},
                                function(){
                                $(this).attr("style","background:green");}
                        ); 
```

如果使用jquery v1.6.1，它可以正常运行，但是一旦更改为jquery最新版本v1.9.1，它会抛出以下异常：

**未捕获的类型错误：对象 # 的属性 'function (){ $(this).attr("style","background:blue");}' is not a function**

有谁知道这是由 jquery 错误引起的，还是仅仅因为编码有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:57:22.777

它在 jQuery 1.9 中被删除。- [http://jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)

# android - android - Admob 广告不使用电话卡（2G 或 3G）显示，但 admob 显示带有 WIFI 的广告

> ID：15039694
> 
> 赞同：0
> 
> 时间：2013-02-23T10:54:18.087
> 
> 标签：android, wifi, admob, 3g

我正在尝试在 2g 或 3g 上使用 admob 展示广告。WIFI效果很好。有了WIFI，我看到了很多广告。但是当我换成电话卡时，我什么也看不到。有人知道为什么吗？

编辑：

乌普斯。我有它。

```
ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if (mWifi.isConnected()) {
    // Show Ads
} 
```

我正在检查第一个 WIFI，然后显示广告。这是什么逻辑。WIFI删除其工作后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:56:04.910

嗨使用这样的条件

```
ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

//mobile
State mobile = conMan.getNetworkInfo(0).getState();

//wifi
State wifi = conMan.getNetworkInfo(1).getState();

and then use it like that:

if (mobile == NetworkInfo.State.CONNECTED || mobile == NetworkInfo.State.CONNECTING) {
    //mobile // so call the ads method
} else if (wifi == NetworkInfo.State.CONNECTED || wifi == NetworkInfo.State.CONNECTING) {
    //wifi // so call the ads method. 
} 
```

否则也使用下面的代码

```
ConnectivityManager manager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);

//For 3G check
boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)
            .isConnectedOrConnecting();
//For WiFi Check
boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)
            .isConnectedOrConnecting();

System.out.println(is3g + " net " + isWifi);

if (!is3g && !isWifi) 
{ 
Toast.makeText(getApplicationContext(),"Please make sure your Network Connection is ON ",Toast.LENGTH_LONG).show();
} 
 else 
{ 
        " Your method what you want to do "
} 
```

# linux - 转义引号：`grep -w "label for=\"id_query"` 不起作用

> ID：15039701
> 
> 赞同：0
> 
> 时间：2013-02-23T10:54:55.853
> 
> 标签：linux, shell, grep

我想匹配`label for="id_query`当前目录中文件中的确切字符串。但是，`grep -w "label for=\"id_query" .`不匹配。知道如何成功逃脱双引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:57:37.803

只需使用单引号即可。

```
grep -w 'label for="id_query' 
```

# jquery - jQuery：我如何在 ajaxComplete 方法中设置文本但淡入而不是立即显示

> ID：15039702
> 
> 赞同：0
> 
> 时间：2013-02-23T10:55:05.830
> 
> 标签：jquery, ajax

我是一个公认的 jquery 菜鸟，通过 api 文档和 jsfiddle 学习库。我目前正在尝试了解为什么以下内容无法按预期工作。

这是html的简单部分

```
<div class="trigger">Trigger</div>
<div class="result"></div>
<div class="log"></div> 
```

这是我正在尝试的jquery...

```
$(document).ajaxComplete(function (event, xhr, settings) {
    if (settings.url === "ajax/test.html") {        
        $(".log").hide();
        $("Triggered ajaxComplete handler. The result is " + xhr.statusText).appendTo(".log").fadein();
    }
});

$(".trigger").click(function () {
    $(".result").load("ajax/test.html");
}); 
```

不幸的是，似乎发生的事情是附加操作没有正确执行，因为抛出了未处理的异常，因为文本“Triggered ajax ...”被视为选择器，但我对 appendTo()读取[jquery API](http://api.jquery.com/appendto/)的功能是您可以像这样动态创建内容。显然，我在某个明显的地方出错了，我会感谢任何能解释为什么这是错误的以及我能做些什么来纠正这个问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:58:10.873

改为使用`.text()`。

```
$(".log").hide()
         .text("Triggered ajaxComplete handler. The result is " + xhr.statusText)
         .fadeIn(); 
```

否则，您需要`.append()`改用。

```
$(".log").hide()
         .append("Triggered ajaxComplete handler. The result is " + xhr.statusText)
         .fadeIn(); 
```

注意这两种方法是不一样的。前者将替换 的内容，`.log`后者将文本附加到`.log`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:03:10.130

尝试

```
$(".log").html("Triggered ajaxComplete handler. The result is " + xhr.statusText)
     .fadeIn(); 
```

# android - 将两个APK绑定在一起

> ID：15039703
> 
> 赞同：0
> 
> 时间：2013-02-23T10:55:36.123
> 
> 标签：android, file, bind, apk

我得到了我的游戏源，我想绑定`.apk`我的游戏。`apk`必须在后台运行，当然游戏应该正常运行。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:07:35.680

不，这是不可能的。您只能通过将第二个源代码移动`apk`到您的 main来归档它`apk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:13:18.680

您可以将您的应用程序源代码添加到您当前的应用程序中，然后使用清单使它们成为两个不同的应用程序，只需将其添加到您的清单中。

```
 <activity
        android:name=".YourClassName"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# android - 如何将手势添加到偏好屏幕

> ID：15039704
> 
> 赞同：2
> 
> 时间：2013-02-23T10:55:43.510
> 
> 标签：android, android-activity, gesture, preference, swipe-gesture

我正在尝试在我的偏好屏幕中添加手势，但我没有得到任何积极的结果，我的问题是我们可以向偏好屏幕添加手势吗？如果是，那么我如何使用下面的代码添加偏好的手势（不适用于偏好但它可以在两个 Activity 之间切换）

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub

        return gestureDetector.onTouchEvent(event);
    }

    SimpleOnGestureListener simpleOnGestureListener
    = new SimpleOnGestureListener(){

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            String swipe = "";
            float sensitvity = 50;

            // TODO Auto-generated method stub
            if((e1.getX() - e2.getX()) > sensitvity){
                // for left
            Intent i=new Intent(getApplicationContext(),MyActivity.class);
                startActivity(i);
                finish();

            }else if((e2.getX() - e1.getX()) > sensitvity){
                //for right
            }else{
                swipe += "\n";
            }

            if((e1.getY() - e2.getY()) > sensitvity){
                //Swipe Up
            }else if((e2.getY() - e1.getY()) > sensitvity){
                //Swipe Down
            }

            return super.onFling(e1, e2, velocityX, velocityY);
        }
    };

    GestureDetector gestureDetector
    = new GestureDetector(simpleOnGestureListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:09:15.673

首先让你的 MainActivity`implements OnGestureListener` 然后定义手势

```
 private GestureDetector gestureScanner; 
```

将手势添加到您的 onCreate`gestureScanner = new GestureDetector(this);` 中，这是手势的方法

```
@Override
public boolean onTouchEvent(final MotionEvent event)
{
    return gestureScanner.onTouchEvent(event);
}
public boolean onDown(final MotionEvent e)
{

    return true;
}
public boolean onFling(final MotionEvent e1, final MotionEvent e2,
        final float velocityX, final float velocityY)
{
    return true;
}
public void onLongPress(final MotionEvent e) {

}
public boolean onScroll(final MotionEvent e1, final MotionEvent e2,
        final float distanceX, final float distanceY)
{
    return true;
}
public void onShowPress(final MotionEvent e)
{

}
public boolean onSingleTapUp(final MotionEvent e)
{
    showHide(); // show hide the statusBar On Small Phones prefer to
    // keep it on Single Tab Cuz On Swipe Down is Kind laggy!!!
    // WTF !! :D
    return true;
} 
```

现在，正如您在我`onSingleTapUp(final MotionEvent e)`用来显示隐藏状态栏的我所看到的那样。

您有六种不同的触摸事件方式“手势事件”选择其中一种并将您的意图放在上面，当用户“让我们说”滚动时，另一个活动将启动。

```
public boolean onScroll(final MotionEvent e1, final MotionEvent e2,
        final float distanceX, final float distanceY)
{
        Intent i=new Intent(getApplicationContext(),MyActivity.class);
            startActivity(i);
            finish();

    return true;
} 
```

试一试，我希望它对你有好处。

# erlang - Rebar：只编译项目文件（没有依赖）

> ID：15039707
> 
> 赞同：5
> 
> 时间：2013-02-23T10:56:00.357
> 
> 标签：erlang, rebar

我是 Erlang 和 Rebar 的新手，刚刚创建了我的第一个 rebar 项目。

我的开发周期是这样的：

1.  编辑项目文件
2.  调用`rebar compile`以重新编译项目
3.  运行我的 start.bat 文件以运行和测试我的应用程序
4.  转到第 1 步 :-)

问题是`rebar compile`似乎总是编译项目文件和所有依赖项。而且我已经有相当多的依赖关系，所以编译需要很长时间并且减慢我的速度。

所以问题是：有没有办法告诉 rebar 在期间只编译我的项目文件`rebar compile`（但我的编译文件仍然有可见的依赖项）？我的依赖项永远不会改变，为什么我每次都需要重新编译它们？

或者也许我的整个过程完全错误，我应该对我的开发周期采取不同的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T11:51:05.167

钢筋有`skip_deps`一面旗帜。所以你可以编译`rebar compile skip_deps=true`

# symfony - 在 Doctrine2 中为元表结构创建映射以在 FormBuilder 中使用

> ID：15039709
> 
> 赞同：3
> 
> 时间：2013-02-23T10:56:09.207
> 
> 标签：symfony, orm, doctrine-orm, formbuilder

我有两张桌子：

分支机构：

```
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| name        | varchar(255) | NO   |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+ 
```

分支元：

```
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| branch_id  | int(11)      | YES  | MUL | NULL    |                |
| metaname   | varchar(255) | NO   |     | NULL    |                |
| metavalue  | varchar(255) | NO   |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+ 
```

我希望有不同的元字段，例如“电话”、“电子邮件”等，也可能是多个。

目前我有这个代码（省略了设置器/获取器）：

// 实体/分支.php

```
<?php
namespace Acme\Bundle\ConsysBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Branch
 *
 * @ORM\Entity(repositoryClass="Acme\Bundle\ConsysBundle\Entity\BranchRepository")
 * @ORM\Table(name="branch")
 */
class Branch
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * 
     * @ORM\OneToMany(targetEntity="BranchMeta", mappedBy="branch")
     */
    private $metadata;

    public function __construct()
    {
        $this->metadata = new ArrayCollection();
    }
}
?> 
```

// 实体/BranchMeta.php

```
<?php

namespace Acme\Bundle\ConsysBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * BranchMeta
 *
 * @ORM\Entity(repositoryClass="Acme\Bundle\ConsysBundle\Entity\BranchMetaRepository")
 * @ORM\Table(name="branchmeta")
 */
class BranchMeta
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Branch", inversedBy="metadata")
     * @ORM\JoinColumn(name="branch_id", referencedColumnName="id")
     */
    private $branch;

    /**
     * @var string
     *
     * @ORM\Column(name="metaname", type="string", length=255)
     */
    private $name;

    /**
     * @var string
     *
     * @ORM\Column(name="metavalue", type="string", length=255)
     */
    private $value;
?> 
```

然后我需要构建一个表单来添加这样的分支：

```
Branch Name:  [_________]
Branch Phone: [_________] [-]
Branch Phone: [_________] [+]
Branch Email: [_________] [-]
Branch Email: [_________] [+]

[Submit] 
```

其中“Branch Phone”字段指向带有元名称“phone”和对应值的分支元表，“Branch Email”字段指向带有元名称“email”的分支元表。两者都可以动态添加/删除。

如何使用 Symfony2 的 FormBuilder 构建它？我像这样创建了 BranchType：

```
class BranchType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');
    }

    public function getName()
    {
        return 'branch';
    }
} 
```

和 BranchMetaType：

```
class BranchMetaType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');
        $builder->add('value');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\Bundle\ConsysBundle\Entity\BranchMeta',
        ));
    }    

    public function getName()
    {
        return 'branch_meta';
    }
} 
```

但后来我被卡住了......如何正确使用 BranchMetaType 在我的情况下构建所需的表单？也许我在数据映射中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T17:41:25.590

事实上，有一个更好的解决方案：

```
/**
 * Meta
 * 
 * @ORM\Entity
 * @ORM\InheritanceType("SINGLE_TABLE")
 * @ORM\DiscriminatorColumn(name="metaname", type="string")
 * @ORM\DiscriminatorMap({"phone" = "MetaPhone", "email" = "MetaEmail", "dummy" = "MetaDummy"})
 * @ORM\MappedSuperclass
 */
class Meta
{
    // ...
}

/**
 * @ORM\Entity
 */
class MetaPhone
{
}

/**
 * @ORM\Entity
 */
class MetaEmail
{
}

/**
 * @ORM\Entity
 */
class MetaDummy
{
} 
```

这样做，我们将拥有相同的表、相同的实体（+ 一个超类实体），并且我们将像处理普通实体一样使用它们。没有hacky方式了。我希望我在 7 个月前使用此功能...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:04:40.810

最后我找到了一个我不能称之为优雅但至少它有效的解决方案。

分支.php：

```
namespace Acme\Bundle\ConsysBundle\Entity;

//use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Branch
 *
 * @ORM\Entity(repositoryClass="Acme\Bundle\ConsysBundle\Entity\BranchRepository")
 * @ORM\HasLifecycleCallbacks
 * @ORM\Table(name="branch")
 */
class Branch
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * 
     * @ORM\OneToMany(targetEntity="BranchMeta", mappedBy="branch", cascade={"persist", "remove"})
     */
    private $metadata;

    /**
     * Virtual OneToMany field
     */
    private $telephones;

    /**
     * Virtual OneToMany field
     */
    private $faxes;

    /**
     * Virtual OneToMany field
     */
    private $emails;

    public function __construct()
    {
        $this->metadata = new ArrayCollection();
        $this->telephones = new ArrayCollection();
        $this->faxes = new ArrayCollection();
        $this->emails = new ArrayCollection();
    }

    /* ...setters and getters are skipped... */

    /**
     * @ORM\PostLoad
     */
    public function onPostLoad()
    {
        foreach (array('telephone' => 'Telephones', 'fax' => 'Faxes', 'email' => 'Emails') as $metakey => $metaname) {
            $metadata = $this->getMetadata()->filter(
                function($entry) use ($metakey) {
                    return $entry->getName() == $metakey;
                }
            );
            $meta = call_user_func(array($this, 'set'.$metaname), $metadata);
        }
    }
} 
```

控制器代码：

```
private function checkBranchAdded($branch)
{
    foreach (array('telephone' => 'Telephones', 'fax' => 'Faxes', 'email' => 'Emails') as $metakey => $metaname) {
        $metadata = call_user_func(array($branch, 'get'.$metaname));
        foreach ($metadata as $item) {
            if (!$item->getBranch()) {
                $item->setBranch($branch);
                $branch->getMetadata()->add($item);
            }
        }
    }
}

private function checkBranchDeleted($branch)
{
    $newMeta = array();
    foreach (array('telephone' => 'Telephones', 'fax' => 'Faxes', 'email' => 'Emails') as $metakey => $metaname) {
        $metadata = call_user_func(array($branch, 'get'.$metaname));
        $newMeta = array_merge($newMeta, array_keys($metadata->toArray()));
    }

    $em = $this->getDoctrine()->getEntityManager();

    foreach($branch->getMetadata() as $key => $item) {
        if (!in_array($key, $newMeta)) {
            $em->remove($item);
            $branch->getMetadata()->remove($key);
        }
    }
}

/**
 * 
 * @Template()
 */
public function editAction($activeMenu, $activeSubmenu, $activeSubsubmenu, $id, Request $request)
{
    /* ... some code ... */
    $repository = $this->getDoctrine()->getRepository('AcmeConsysBundle:Branch');
    $branch = $repository->find($id);

    if (!$branch) {
        throw $this->createNotFoundException('No branch found for id '.$id);
    }
    $form = $this->createForm(new BranchType(), $branch);

    if ($request->isMethod('POST')) {
        $form->bind($request);
        $this->checkBranchDeleted($branch);
        $this->checkBranchAdded($branch);
        /* ... some code ... */
    }
    /* ... some code ... */
} 
```

表单构建器代码。分支类型.php：

```
class BranchType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('telephones', 'collection', array(
            'type' => new BranchMetaType('telephone'),
            'allow_add' => true,
            'allow_delete' => true,
            'prototype' => true,
            'options' => array(
            ),
        ));

        $builder->add('faxes', 'collection', array(
            'type' => new BranchMetaType('fax'),
            'allow_add' => true,
            'allow_delete' => true,
            'prototype' => true,
            'options' => array(
            ),
        ));

        $builder->add('emails', 'collection', array(
            'type' => new BranchMetaType('email'),
            'allow_add' => true,
            'allow_delete' => true,
            'prototype' => true,
            'options' => array(
            ),
        ));

        /* ... other fields ... */
    }

    /* ... other methods ... */
} 
```

BranchMetaType.php：

```
class BranchMetaType extends AbstractType
{
    protected $name;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name', 'hidden', array(
            'data' => $this->name,
        ));
        $builder->add('value', 'text', array(
        ));
    }

    /* ... other methods ... */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:40:43.920

不知何故，信息分散在食谱[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)下的附加注释部分*Doctrine: Cascading Relations and save the "Inverse" side*下。

这个问题给我留下了深刻的印象，因此我对其进行了一些实际的编码/研究。:)
这是我发现的。

在 中`Entity\Branch`，告诉教义将其对元数据属性的持久化操作级联并修改`setMetadata()`以设置每个要持久化的元数据的当前分支。

```
/**
 * 
 * @ORM\OneToMany(targetEntity="BranchMeta", mappedBy="branch", cascade={"persist"})
 */
private $metadata;

public function setMetadata(ArrayCollection $metadata) {
    foreach ($metadata as $m) {
        $m->setBranch($this);
    }

    $this->metadata = $metadata;
} 
```

在 中`Form\BranchType`，使用适当的选项添加元数据字段，当然也将默认设置`data_class`为`Entity\Branch`（您的`BranchType`上面没有这个）。在此表单类型中，该`'by_reference' => false`选项对于确保`setMetadata()`在持久化期间调用函数很重要（[http://symfony.com/doc/current/reference/forms/types/collection.html#by-reference](http://symfony.com/doc/current/reference/forms/types/collection.html#by-reference)）。

```
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder->add('name');

    $builder->add('metadata', 'collection',
                    array(
                        'type' => new BranchMetaType(),
                        'allow_add' => true,
                        'by_reference' => false,
                    ));
}

public function setDefaultOptions(OptionsResolverInterface $resolver) {
    $resolver->setDefaults(
                    array(
                        'data_class' => 'Acme\Bundle\ConsysBundle\Entity\Branch'
                    ));
} 
```

最后尝试在控制器中添加一些虚拟分支元

```
public function newAction()
{
    $entity = new Branch();

    $branchmeta1 = new BranchMeta();
    $branchmeta1->setMetaname('dummy meta name #1');
    $branchmeta1->setMetavalue('dummy meta value #1');
    $entity->getMetadata()->add($branchmeta1);

    $branchmeta2 = new BranchMeta();
    $branchmeta2->setMetaname('dummy meta name #2');
    $branchmeta2->setMetavalue('dummy meta value #2');
    $entity->getMetadata()->add($branchmeta2);

    $form   = $this->createForm(new BranchType(), $entity);

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

# ajax - 让我的表单正确显示成功发送或错误消息的 Jquery 问题

> ID：15039712
> 
> 赞同：0
> 
> 时间：2013-02-23T10:56:43.977
> 
> 标签：ajax, jquery, forms

我在 .js 文件中有此代码，通过关闭表单然后显示“消息已成功发送”文本或显示错误消息（如“错误：消息需要超过 200 个字符或请插入有效的电子邮件”来调整我的表单显示）地址”等

消息发送成功时关闭表单效果很好，只留下消息“消息发送成功”，但出现错误时关闭表单效果不佳，因为无法返回消息进行更正。

任何人都可以帮我调整代码，以便仅在成功发送消息时表单才会滑动，否则如果出现错误，表单仍然可见但下面有错误消息，这样您就可以看到错误并在形成上面的表格，然后再次按发送按钮进行第二次尝试。

这是我认为需要更改的代码，我假设它可能是与成功不同的另一种状态：对于错误阶段？：

```
submitHandler: function(form) {
   $("#send").attr("value", "Sending...");
   $(form).ajaxSubmit({
      success: function(responseText, statusText, xhr, $form) {
         $(form).slideUp("fast");
          $("#response").html(responseText + "<br/>").hide().slideDown("fast");
      }
   });
   return false;
} 
```

`#send`是发送按钮，`#response`是显示响应文本的 div。

我希望有人能帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:11:35.280

在 PHP 脚本中，以 JSON 格式返回结果：

```
$result = array('error' => $error, 'message' => $response);
echo json_encode($result); 
```

在 jQuery 中，执行：

```
$(form).ajaxSubmit({
    dataType: 'json',
    success: function(response, statusText, xhr, $form) {
        if (!response.error) {
            $(form).slideUp("fast");
        }
        $("#response").html(response.message + "<br/>").hide().slideDown("fast");
    }
 }); 
```

# r - 有没有办法不将“by”列作为 data.table 分组中的第一列返回

> ID：15039715
> 
> 赞同：7
> 
> 时间：2013-02-23T10:57:05.290
> 
> 标签：r, data.table

如果我使用`by`data.table 中的关键字进行分组，它总是将该`by`列作为第一列返回。是否有一个标志/选项告诉它不要这样做？还是摆脱它的聪明方法？

特别是我想分组然后`rbindlist`到我的原始表，所以事实上这个问题也可以说是 - “如何阻止它重新排序列”

例如：

```
DT = data.table(I = as.numeric(1:6), N = rnorm(6), L = rep(c("a", "b", "c"), 2))
DT[, list(I = mean(I), N = mean(N)), by= L]
DT 
```

给出：

```
> DT[, list(I = mean(I), N = mean(N)), by= L]
   L   I          N
1: a 2.5  0.4291802
2: b 3.5  0.6669517
3: c 4.5 -0.6471886
> DT
   I          N L
1: 1  1.8460998 a
2: 2  0.7093438 b
3: 3 -1.7991193 c
4: 4 -0.9877394 a
5: 5  0.6245596 b
6: 6  0.5047421 c 
```

就`rbindlist`请求而言，能够做到这一点会很好：

```
DT = rbindlist(list(DT, DT[, list(I = mean(I), N = mean(N)), by= L])) 
```

也许

```
DT = rbindlist(list(DT, DT[, list(I = mean(I), N = mean(N), L), by= L])) 
```

或类似的东西（两者都不起作用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:00:27.643

我也不是特别喜欢这种自动列重新排序。我通常做的“技巧”是`setcolorder`在获得输出后使用如下：

```
DT <- data.table(I = 1:6, N = rnorm(6), L = rep(c("a", "b", "c"), 2))
DT.out <- DT[, list(I = mean(I), N = mean(N)), by= L] 
```

在这里，`setcolorder`如：

```
setcolorder(DT.out, names(DT))

#      I            N L
# 1: 2.5  0.772719306 a
# 2: 3.5 -0.008921738 b
# 3: 4.5 -0.770807996 c 
```

当然，如果 的名称`DT`与 相同，则此方法有效`DT.out`。否则，您必须将列顺序明确指定为：

```
setcolorder(DT.out, c("I", "N", "L")) 
```

**编辑：**由于您想立即按行绑定它们，是的，最好不要将其作为中间结果。而且由于`rbindlist`似乎按位置绑定，您可以使用`rbind`which 通过列名绑定并将`data.table`其作为警告并建议使用`use.names=F`，如果您想改为按位置绑定。您可以放心地忽略此警告。

```
dt1 <- data.table(x=1:5, y=6:10)
dt2 <- data.table(y=1:5, x=6:10)

rbind(dt1, dt2) # or do.call(rbind, list(dt1, dt2))

#      x  y
#  1:  1  6
#  2:  2  7
#  3:  3  8
#  4:  4  9
#  5:  5 10
#  6:  6  1
#  7:  7  2
#  8:  8  3
#  9:  9  4
# 10: 10  5
# Warning message:
# In .rbind.data.table(...) :
#   Argument 2 has names in a different order. Columns will be bound by name for 
#   consistency with base. Alternatively, you can drop names (by using an unnamed 
#   list) and the columns will then be joined by position. Or, set use.names=FALSE. 
```

# javascript - 无法在函数类中编写每个

> ID：15039716
> 
> 赞同：0
> 
> 时间：2013-02-23T10:57:06.417
> 
> 标签：javascript, jquery, html

每当我编写以下内容时，我都无法编写每个函数类，为什么会出现错误？

```
<script>
        var addLi = function($li) {
            var $uls = $('ul');
            $.each($uls, function(index, ul) {
                // If this ul has less than 5 li's
                // then add the li here
                if ($(this).find('li').length < 5) {
                    $(this).append($li);
                    // exit the for loop since we have placed this li
                    return;  
                }
            }
            };
    </script> 
```

![在此处输入图像描述](../Images/7fa781ae69d2b3b0828b91a283bc2041.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:59:36.173

您只是没有关闭`.each()`命令。

```
$.each($uls, function(index, ul) {
  // If this ul has less than 5 li's
  // then add the li here
  if ($(this).find('li').length < 5) {
    $(this).append($li);
    // exit the for loop since we have placed this li
    return;  
  }
}); // <---------- here is the closing brackets for the each() 
```

each 的回调函数由大括号终止，但它只是`each()`命令的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:01:06.620

尝试这个

```
<script>
    var addLi = function($li) {
        var $uls = $('ul');
        $.each($uls, function(index, ul) {
            // If this ul has less than 5 li's
            // then add the li here
            if ($(this).find('li').length < 5) {
                $(this).append($li);
                // exit the for loop since we have placed this li
                return;  
            }
        }); // close brace missing here before
    };
</script> 
```

你错过`);`了`$.each`

# mysql - 向 INNER JOIN SQL 查询添加附加列

> ID：15039717
> 
> 赞同：0
> 
> 时间：2013-02-23T10:57:12.263
> 
> 标签：mysql, sql, inner-join

我有以下 INNER JOIN 查询，您可以在[此处](http://sqlfiddle.com/#!2/af131/1)的小提琴中看到它。

```
SELECT  b.*, c.date2
FROM    (
            SELECT a.work, a.amount, 
                   COUNT(*) totalCount, 
                   SUM(Amount) totalAmount
            FROM tableName a
            GROUP BY a.work, a.amount
        ) b
        INNER JOIN
        (
            SELECT a.work, a.amount, DATE_FORMAT(Date,'%D %M %Y') date2,
                    date
            FROM tableName a
        ) c ON b.work = c.work and b.amount=c.amount
ORDER BY b.work, b.totalCount, c.date 
```

我想在查询中添加另一列，称为“url”，它的工作方式与日期列相同，即它为每一行返回“url”列中的不同值。[您可以在此处](http://sqlfiddle.com/#!2/af131/15)找到包含新列的架构。我不确定如何调整查询以返回具有不同“url”值的额外列。我尝试了几件事，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:07:21.460

你可以试试这个...

 `````
    SELECT  b.*, c.date2, c.url
    FROM    (
            SELECT a.work, a.amount, 
                   COUNT(*) totalCount, 
                   SUM(Amount) totalAmount
            FROM tableName a
            GROUP BY a.work, a.amount
        ) b
        INNER JOIN
        (
            SELECT a.work, a.amount, DATE_FORMAT(Date,'%D %M %Y') date2,
                    date, url
            FROM tableName a
        ) c ON b.work = c.work and b.amount=c.amount
    ORDER BY b.work, b.totalCount, c.date

````  `* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:14:53.853

它可以写成更短的，比如

```
 SELECT a.work, a.amount, 
                   COUNT(*) totalCount, 
                   SUM(Amount) totalAmount, url, DATE_FORMAT(Date,'%D %M %Y')
            FROM tableName a
            GROUP BY a.work, a.amount, DATE_FORMAT(Date,'%D %M %Y') 
`````

# ios - Retina 渲染上下文性能问题

> ID：15039724
> 
> 赞同：0
> 
> 时间：2013-02-23T10:57:51.357
> 
> 标签：ios, ipad, core-graphics, retina-display

我有 iPad 应用程序，需要每秒捕获 4 次视图内容并保存为图像。我使用 CALayer renderInContext 方法，在 iPad2 上一切正常，但问题出在 iPad4 上。渲染视网膜分辨率可能会导致性能不佳。任何想法如何提高渲染速度？一种可能的解决方案是降低比例因子，但它不会给出想要的结果。想法？

编辑：

```
- (void) drawRect:(CGRect)rect {

    if (_recording) {
        UIGraphicsBeginImageContext(self.bounds.size);
        [self.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage* renderedImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        [self performSelectorInBackground:@selector(writeImageToDisk:) withObject:renderedImage];
    }
    //redraw at the specified framerate
    [self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:0.25];
} 
```

# iphone - 在 iOS 中向用户公开 .sqlite 文件 - 最佳实践？

> ID：15039726
> 
> 赞同：1
> 
> 时间：2013-02-23T10:58:51.813
> 
> 标签：iphone, ios, sqlite, core-data, data-integrity

所以我在 iOS 中开发这个应用程序，它在底部使用 sqlite。我想实现一个导出/导入功能，基本上将 Core Data 创建的 .sqlite 文件复制到用户可以通过 iTunes 访问的 Documents 目录。（导入功能显然会反过来工作。）

我想听听一些赞成和反对的论点。让用户获取 .sqlite 文件让我的数据模型感到兴奋。不是说它是商业机密，而是无论如何......数据库中有很多关系，因此将其导出到制表符分隔的文件（例如）并不方便。

我还看到导入函数和 .sqlite 文件可能存在问题。如果 .sqlite 是从较旧的数据模型创建的会怎样。如果用户以某种方式手动更新 .sqlite 以使数据模型无效怎么办。我想我必须在导入功能中做很多验证。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T17:51:26.937

Don't worry about your data model. Anyone who wants to know what it looks like can find out anyway. Using an app like [iExplorer](http://www.macroplant.com/iexplorer/) will let them find out all kinds of things about your app without even needing to jailbreak the phone-- including SQLite files that are not available via iTunes and the Core Data model file itself. The details of your data model are already not going to be secure.

As for different versions-- Core Data includes a migration system that detects version conflicts and offers various migration options to update a data store to the latest version. As long as you're using model migration techniques when updating the model, you won't have any problems with the user copying an old version in-- you'll just end up migrating it as if the user had just upgraded to the new version of the app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:49:32.083

[我在raywanderlich.com](http://www.raywenderlich.com/1980/how-to-import-and-export-app-data-via-email-in-your-ios-app)上关注了一篇文章，但它使用电子邮件进行导入和导出。

我实际上通过压缩我的 .sqlite 文件并使用 .abc 重命名文件的扩展名来实现导出（使用您的应用程序独有的扩展名）。通过这种方式，用户不知道扩展名，因此通过编辑此文件而损坏的机会可能很低。对于导入，我只需解压缩文件并替换现有模型。注意这里我只是用导入的文件替换我现有的数据。我在一个应用程序中使用过它。并且没有抱怨。如果扩展名未知，人们很少编辑。

关于旧数据模型，AFAIK 如果您已经处理了核心数据迁移，则应将旧模型迁移到新模型。

关于在导入期间验证文件，我认为您无法验证 .sqlite 文件？我的意思是验证，您需要打开 .sqlite 文件并读取它，并且要读取它，它必须与架构匹配。如果它已损坏，它将不匹配并且应用程序将崩溃。您所能做的就是捕获异常并抛出错误消息。

另一种方式

1.  将 .sqlite 文件重命名为 .db 之类的文件，因此用户可能不会尝试使用任何 .sqlite 查看器打开它。
2.  导出为 xml 或 json。通过这种方式，您可以验证导入文件，如果您不只是在导入期间替换现有数据，这将很容易。

优点 1\. 简单的方法，您不需要任何压缩库或任何额外的方法来转换为 xml 或 json。

缺点

1.  而且，如果您不只是在导入期间替换现有数据，那么您必须做很多事情。您必须将此 .sqlite 中的所有实体复制到另一个实体。在这种情况下，我只需将数据导入 json 并重命名文件扩展名。在导入期间，我只是解析 json 并创建/更新托管对象上下文。在这个 json 案例中，我将创建 UUID 来唯一标识每条记录。

核心数据生成的 .sqlite 不是普通的 .sqlite 文件，所以如果用户尝试使用 sqllite 查看器打开它，会有些意外。

一旦文件退出应用程序。我们无法控制它的使用方式。如果用户导入损坏的文件，我们所能做的就是抛出一些错误消息。

希望这可以帮助。

# android - 手机休眠时收听信号强度

> ID：15039728
> 
> 赞同：1
> 
> 时间：2013-02-23T10:58:59.720
> 
> 标签：android, service, broadcastreceiver, wakelock, telephonymanager

我开发了一个广播接收器，以这种方式收听清单中声明的​​电话信号强度

```
<receiver android:name="it.cazzeggio.android.PhoneStateListener" >
   <intent-filter android:priority="999" >
      <action android:name="android.intent.action.SIG_STR" />
   </intent-filter>
</receiver> 
```

java代码是

```
public class PhoneStateListener extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
    Log.e(PhoneStateListener.class.getSimpleName(), new Date().toString());
    try{
       TelephonyManager telephony = (TelephonyManager) 
          context.getSystemService(Context.TELEPHONY_SERVICE);

       //...some checks to be sure that is a gsm-event..

       GsmCellLocation location = (GsmCellLocation) telephony.getCellLocation();
       foundCells.add(0,new String[] {
           telephony.getNetworkOperator() + "_" + location.getLac() + "_" + 
               location.getCid() , ""+(bundle.getInt("GsmSignalStrength")+1)});
       if(!foundCells.isEmpty())
          Functions.CellHistory.addHistory(foundCells);
    }catch (Exception e) {
       Log.e(PhoneStateListener.class.getSimpleName(), e.getMessage(), e);
    }
} 
```

如果屏幕显示一切正常，但是当手机进入睡眠模式时，我的接收器停止工作（=没有事件被发送到方法 onReceive）

我尝试将接收器注册为服务或使用 PARTIAL_WAKE_LOCK 没有结果（我是新手）。有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:10:54.217

好的，伙计们，在网上搜索我发现这是一个未解决的android问题：只是为了节省电池，当屏幕关闭时，手机会停止更新所有听众关于信号强度的信息。所以暂时我放弃了。

我只是做了一个愚蠢的解决方法，以至少获得手机连接到的 cell-id：在清单中我定义了服务

```
<service android:name="it.cazzeggio.android.util.OffScreenPhoneListener"/> 
```

当应用程序启动时，该服务将在我的主要活动的 onCreate 方法中启动

```
startService(new Intent(this, OffScreenPhoneListener.class)); 
```

在 OffScreenPhoneListener 类中，'onCreate' 方法启动一个计时器以定期重复对手机信号塔的检查

```
PowerManager powerManager = (PowerManager)getSystemService(Context.POWER_SERVICE);
wakeLock = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
   OffScreenPhoneListener.class.getSimpleName());
if(!wakeLock.isHeld())
   wakeLock.acquire();
timer=new Timer();
timer.schedule(new myTimerTask(), DELAY, DELAY); 
```

myTimerTask 扩展了 TimerTask 并且在它的方法中有：

```
TelephonyManager telephony = (TelephonyManager) 
   getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation location = (GsmCellLocation) telephony.getCellLocation();
//Adding to my history the following infos:
//  telephony.getNetworkOperator()
//  location.getLac()
//  location.getCid() 
```

onDestroy 方法清除了我制作的所有东西：

```
super.onDestroy();
timer.cancel();
timer.purge();
if(wakeLock!=null && wakeLock.isHeld())
  wakeLock.release(); 
```

无论如何感谢您的关注。

# c# - 在后面的代码中提交后如何重置 RadAsyncUpload？

> ID：15039730
> 
> 赞同：3
> 
> 时间：2013-02-23T10:59:08.023
> 
> 标签：c#, asp.net, telerik, radupload

我想知道如何重置（清除）[RadAsyncUpload](http://demos.telerik.com/aspnet-ajax/asyncupload/examples/overview/defaultcs.aspx) 并使组件保持初始状态

在代码后面提交之后呢？

* * *

# 我的 aspx ::

```
<telerik:RadAsyncUpload runat="server" ID="rada_attach" OnClientFileUploaded="onClientFileUploaded"
MultipleFileSelection="Disabled" InitialFileInputsCount="1" MaxFileInputsCount="1"
Width="100%" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:51:39.917

尝试将下面的代码添加到提交按钮的 Click 事件处理程序（未测试）

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "clearUpload", String.Format("$find('{0}').deleteAllFileInputs()", rada_attach.ClientID), true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:50:25.033

您想在上传后清除项目列表吗？如果是的话，根据这个[链接](http://www.telerik.com/community/forums/aspnet-ajax/upload/radasyncupload-clear-uploaded-files.aspx)你可以这样做：

```
<script type="text/javascript">
   function clientFileUploaded(sender, args) {
       var count = sender._getRowCount();

       if (count > 2) {
           Array.removeAt(sender._uploadedFiles, 0);
           sender.deleteFileInputAt(0);
           sender.updateClientState();
       }
   } 
```

# javascript - JavaScript JQuery setTimeout

> ID：15039731
> 
> 赞同：0
> 
> 时间：2013-02-23T10:59:14.933
> 
> 标签：javascript, jquery

我是 JavaScript 和 JQuery 的初学者，我正在尝试锻炼一些东西

```
var activetab = 0;

$("li").click(function () {
  $("#tabs-"+activetab).hide("slide", { direction: "left" }, 1000);
   $("li").eq(activetab).css('background-color','white');
  var index = $("li").index(this);
  $("span").text(index);
  $("li").eq(index).css('background-color','red');
    $("#tabs-"+index).show("slide", { direction: "left" }, 1000); 
  activetab = index;
}); 
```

这是我的小提琴：

[http://jsfiddle.net/6WC4J/](http://jsfiddle.net/6WC4J/)

问题是我希望 show 方法在一段时间后启动，这样当前一个元素被隐藏时，新元素就会出现，尝试使用 setTimeout 但没有用，有什么想法吗？

谢谢 总的来说

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:07:41.583

您必须使用回调：

```
 $("#tabs-" + activetab).hide("slide", {
    direction: "left"
 }, 1000, function(){
     // this will be called after the element is completely hidden.
 }); 
```

参考：[http ://api.jquery.com/hide/](http://api.jquery.com/hide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:08:32.767

您可以使用`complete`该方法的回调[`.hide()`](http://api.jqueryui.com/hide/)来触发`.show()`动画。

```
$("#tabs-" + activetab).hide("slide", {
    direction: "left"
}, 1000, function(){
    $("#tabs-" + index).show("slide", {
        direction: "left"
    }, 1000);
    activetab = index;
}); 
```

这样您就不需要使用 a`setTimeout`并且同步是无缝的。

[看这里。](http://jsfiddle.net/ZuQkL/)

# drupal-7 - CKEditor：如何自动将段落格式添加到有序列表中？

> ID：15039741
> 
> 赞同：1
> 
> 时间：2013-02-23T11:00:26.323
> 
> 标签：drupal-7, html-lists, ckeditor

如何让 CKEditor 在创建or`<li>`时自动添加 paragraf 格式？`<ol>``<ul>`

或者我可以让它自动添加一个`<span>`，比如：

```
<ol>

  <li> <span> text </span> </li>

  <li> <span> text </span> </li>

</ol> 
```

谢谢。

# android - 有人可以解释一下 Android 限定符是如何工作的吗？

> ID：15039744
> 
> 赞同：0
> 
> 时间：2013-02-23T11:00:38.553
> 
> 标签：android, resources, ratingbar

我真的对 android 限定符感到困惑。

我想为`RatingBar`. 所以我创建了`rating_bar.xml`文件并将其放入`drawable`文件夹。这是来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background" android:drawable="@drawable/star_off"/>
    <item android:id="@android:id/secondaryProgress" android:drawable="@drawable/star_on"/>
    <item android:id="@android:id/progress" android:drawable="@drawable/star_on"/>
</layer-list> 
```

我只有 xhdpi 显示器的星形设计。我认为如果我将 star_on 和 star_off 图像放入 drawable-xhdpi 文件夹，那么所有不同的密度（mdpi 和 hdpi）都会自动调整大小。是的，它调整了大小，但我得到了一些用于 hdpi 和 mdpi 的工件。与此处相同：[Android custom RatingBar image artifacts](https://stackoverflow.com/questions/9356799/android-custom-ratingbar-image-artifacts) 我尝试了那里描述的解决方案，但没有任何帮助。在 xhdpi 设备上我没有人工制品，但在 mdpi 和 hdpi 设备上却有人工制品。

然后我决定把 star_on 和 star_off 图像放到 drawable-nodpi 文件夹中。所以我得到了很好的结果，xhdpi 和 hdpi 屏幕没有任何伪影，但是 mdpi 屏幕图像太大了。

然后我决定将 star_on 和 star_off 图像复制到 drawable-mdpi 文件夹并减小图像大小。它也没有帮助。

然后我把大星图放到 xhdpi 和 hdpi 文件夹，小星图放到 mdpi 文件夹。我认为如果我在 mdpi 设备上运行我的应用程序，来自 drawable-mdpi 的图像将被选中。但似乎 Android 从 hdpi 或 xhdpi 文件夹中选择图像并为 mdpi 屏幕自动缩放它们，因为我再次有工件。我还尝试将小图像放入可绘制文件夹。它也没有帮助。

那么Android如何选择资源呢？我想如果我有资源шт drawable、drawable-mdpi、drawable-hdpi 和drawable-xhdpi，那么Android 会尝试在与设备密度相同的文件夹中查找资源。如果没有这样的资源而不是从可绘制文件夹中获取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T10:12:05.043

[这个开发者指南部分](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)解释了我猜你到底需要什么。它用一个例子演示：

> 为了演示 Android 如何选择替代资源，假设以下可绘制目录分别包含相同图像的不同版本：

```
drawable/
drawable-en/
drawable-fr-rCA/
drawable-en-port/
drawable-en-notouch-12key/
drawable-port-ldpi/
drawable-port-notouch-12key/ 
```

> 并假设以下是设备配置：

```
Locale = en-GB 
Screen orientation = port 
Screen pixel density = hdpi 
Touchscreen type = notouch 
Primary text input method = 12key 
```

> 通过将设备配置与可用的替代资源进行比较，Android 从

**`drawable-en-port`**

还有一个选择图描述*了android如何选择限定符。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:34:15.227

android根据**dpi从drawable文件夹中选择资源**

有四种屏幕密度

1.  低密度脂蛋白
2.  mdpi
3.  hdpi
4.  xhdpi

四种屏幕尺寸

```
layout-small
layout-nomal
layout-large
layout-xlarge 
```

**小屏幕尺寸 = 2.2" - 2.7"（大约）**

**正常屏幕尺寸 = 3.0" - 4.7"（大约）**

**大屏幕尺寸 = 5" - 7"（大约）**

**xlarge 屏幕尺寸 = 7">（大约）**

**ldpi = 120dpi**

**mdpi = 160dpi**

**高清240dpi**

**xhdpi = 320dpi**

根据这些密度和屏幕尺寸创建您的 avd，然后检查结果

# php - 我可以拆分我的 php 代码吗？

> ID：15039745
> 
> 赞同：0
> 
> 时间：2013-02-23T11:00:41.157
> 
> 标签：php

我有一个包含 1000 多行代码的 php 文件。我计划使用 include_once() 函数（index.php 到 header.php、side.php 等）将其拆分。它增加了可读性并简化了编辑。将是否会导致口译时间增加或类似问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:03:22.087

对此进行了大量测试，您不应该考虑解析时间，这将是最小的并且可读性的好处超过了负面影响。

如果您担心打开和读取文件所花费的时间，您可能需要查看[APC](http://php.net/manual/en/book.apc.php)等编译器，以便文件在内存中保持编译状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:10:48.443

差异可以忽略不计。PHP 可以有效地处理这个问题。也尝试面向对象的代码更具可读性。如果您非常担心时间增加，那么我建议您使用 varnish 或 APC 等缓存。甚至不需要每次都调用解释器。很多时候你解释代码并缓存它。仅当您更改代码时，清除缓存并获得新页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:05:29.263

这不应该是一个问题，即使是这样，拥有可维护的代码更为重要。

如果您可以将代码分解为较小的独立类，并为这些类使用自动加载，它甚至会变得更快，因为只需要加载必要的代码。我不只是将您的代码拆分为文件并重新加入它，而是`include_once`尝试构建这样的类。

# eclipse - 在 Eclipse Juno 中进行超越比较工作

> ID：15039749
> 
> 赞同：1
> 
> 时间：2013-02-23T11:01:09.850
> 
> 标签：eclipse, merge, compare, beyondcompare

我正在 Ecpise 上使用 PyDev，我想制作 Beyond Compare 我的合并/差异工具，
我在几个地方阅读了关于 var 和配置的信息，但似乎没有任何效果
我已经安装了 SVN 插件。
我注意到有 3 个地方可以配置：

```
SVN -> Diff viewer  
SVN -> Diff/Merge  
Ext. Tools -> Beyond Compare 
```

我将第一个设置为“BComp.exe”的路径，并将第一个框中的 vars 设置为：

```
"${base}" "${mine}"
/lefttitle="Base ${base}"
/righttitle="Local ${mine}" 
```

第二个框变量是：

```
"${theirs}" "${yours}" "${base}" "${merged}"
/lefttitle="Incoming (${theirs})"
/centertitle="Base (${base})"
/righttitle="Local (${yours})"
/outputtitle="Merged (${merged})"
/solo 
```

在 SVN->Diff/Merge 我将参数设置为：

```
"${theirs}" "${yours}" "${base}" "${merged}" /lefttitle="Incoming (${theirs})" /centertitle="Base (${base})" /righttitle="Local (${yours})" /outputtitle="Merged (${merged})" /solo 
```

在 Beyond Compare 子菜单中，我选择了路径

```
C:\Program Files (x86)\Beyond Compare 3\BComp.exe 
```

当我选择 2 个文件并单击比较时，我收到以下消息：

```
Unable to start Beyond Compare.
Please check the preference page and make sure the information there is valid
Exception: Please select at least on valid resource 
```

什么是错误的配置？

谢谢

# c# - 使用 ac# 代码从表（Teradata 数据库）中检索大量记录 (300000)

> ID：15039756
> 
> 赞同：0
> 
> 时间：2013-02-23T11:01:44.453
> 
> 标签：c#, java, sql, odbc, teradata

我有一部分代码需要从表中获取特定条件的数据（其中 accountid = ''）。数据检索是一个非常缓慢的过程。自行检索记录需要 2 小时。我尝试添加并发线程来加快进程，但在时间方面并没有太大的好处。

如果有人可以建议我一种更好更快的检索方式，那将很有帮助。

PS：我正在建立一个 ODBC 连接，然后运行一个查询并获取查询的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T13:56:35.893

听起来你需要一个关于 accountid 的索引。是主键吗？如果没有，请围绕该列创建索引。

# sql - SQL 只选择第一行

> ID：15039759
> 
> 赞同：0
> 
> 时间：2013-02-23T11:02:02.303
> 
> 标签：sql

我对 SQL 选择感到绝望。我有一张表，它有 4 个参数：id、国家、地址和价格。该表的许多行具有相同的 id，我正在尝试获取每个 id 的价格总和。例如，如果我有下一个数据：

```
ID  Country  Address  Price
1   France   Address1 1000
1   France   Address2 3332
1   France   Address1 1562
1   France   Address3 1123
1   France   Address2 1123
2   UK       Address8 1234
2   UK       Address7 1233 
```

我想获得下一个结果：

```
ID  Country  Address  Price
1   France   Address1 SUM(1000, 3332, 1562, 1123, 1123)
2   UK       Address8 SUM(1234, 1233) 
```

我已经尝试了很多查询，但我无法获得该结果。问题是我获得了按国家和地址分组的数据，并且由于地址不同，我获得了多行，例如法国的三个地址。

提前致谢。

对不起我的英语水平。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:06:07.567

在不知道如何对地址进行排序的情况下，无法分辨出什么被视为第一个地址行。如果按升序排序，则：

```
SELECT   [ID], Country, MIN(Address), SUM(Price) As TotalPrice
FROM     tblYourTableName
GROUP BY [ID], Country
ORDER BY [ID] 
```

如果不是，那么您将需要实现子查询以按 ID 和国家/地区对地址进行排序。需要了解更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:05:21.137

检查它是否有效

```
SELECT country, SUM(price)
FROM table
GROUP BY country 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:11:05.390

答案会根据您的 DBMS 而有所不同。例如：

```
SELECT   [ID], Country, Address, SUM(Price) As TotalPrice
FROM     tblYourTableName
GROUP BY Country
ORDER BY [ID] 
```

此查询不适用于 Sql Server、Oracle，但适用于 MySql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:13:23.087

最简单的查询方法是这个

```
select a.ID, a.Country, a.Address, sum(a.Price) as TotalPrice
from address a
group by a.ID; 
```

但正如另一个人所说，我们需要知道您希望如何对与国家相关的地址进行排序以获得正确的输出。

另一个重要的事情是 DBMS。

顺便说一句，如果你想快速测试它，请检查这个 SQLFiddle [http://www.sqlfiddle.com/#!2/61ba6/4](http://www.sqlfiddle.com/#!2/61ba6/4)

您甚至可以更改 DBMS，这样您就可以 100% 确定查询可以正常工作。

# php - 首次使用时自动启动会话

> ID：15039763
> 
> 赞同：0
> 
> 时间：2013-02-23T11:02:19.470
> 
> 标签：php, session

我想要一个解决方案，当我第一次`$_SESSION`在我的每个 php 文件中使用该变量时，该函数`session_start()`会被自动调用。否则不是。

我可以调用它`auto-prepend-file`或使用它`session.auto_start`，但是当我不在文件中使用会话时，我会阻止任何开销过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:06:54.360

简短的回答：你不能。

但是您可以将会话功能包装在一个类中，并在会话类中处理会话的开始。

```
class Session {

    public function __construct() {
        session_start();
    }

    public function set($k, $v) {
        $_SESSION[$k] = $v;
    }

    ...

} 
```

用法将是：

```
$session = new Session();
$session->set('key', 'value'); 
```

否则，还有另一个丑陋的解决方案可以让您省去`session_start()`or`$session = new Session();`行：创建一个静态类，例如：

```
class Session {

    private static $inited = false;

    public static function check() {
        if (!$inited) {
            session_start();
            $inited = true;
        }
    }

    public static function set($k, $v) {
        self::check();
        $_SESSION[$k] = $v;
    }

    ...

} 
```

那么您只需创建所有`self::check()`在开始时调用的方法，如果尚未初始化，它将启动会话。用法很简单：

```
Session::set('key', 'value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:07:23.137

创建一个 Session 类并使用单例模式对其进行实例化：

```
class Session {
  private function __construct() {
    session_start();
  }

  private static $instance = false;
  public static function getInstance() {
    if(self::$instance == false) {
      self::$instance == new Session();
    }
    return self::$instance;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T17:19:57.020

如果要自动启动会话，则必须在 php.ini 文件中找到以下行并将值从 0 更改为 1 并重新启动服务器。

session.auto_start = 1

或在 htaccess

php_value session.auto_start 1

这是所有人的自动启动，但这并不意味着它会产生开销

# git - 执行 git status 时遇到问题

> ID：15039766
> 
> 赞同：1
> 
> 时间：2013-02-23T11:02:39.280
> 
> 标签：git, git-push

我在使用`git status`. 我得到这个输出：

```
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit, working directory clean 
```

起初，自述文件（README.md）的提交和推送工作完美。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:30:00.390

您可以通过再次将其推送到 master 来解决它：

```
git push
or, if your master branch wasn't tracking origin/master already
git push -u origin master 
```

（请参阅“跟踪”业务“[和](https://stackoverflow.com/a/7739331/6309)”和“[之间有什么区别”`git config``git push --set-upstream`](https://stackoverflow.com/a/7739331/6309)[帽子究竟是做什么的？“<code>git push -u origin master”与“<code>git push origin master” </a>"](https://stackoverflow.com/questions/5697750/what-exactly-does-the-u-do-git-push-u-origin-master-vs-git-push-origin-ma)

[](https://stackoverflow.com/questions/5697750/what-exactly-does-the-u-do-git-push-u-origin-master-vs-git-push-origin-ma)

[git push 唯一不能解决这种情况的情况是当您需要执行 git fetch 以更新本地存储库中存储的原始 SHA1 时。
见“](https://stackoverflow.com/questions/5697750/what-exactly-does-the-u-do-git-push-u-origin-master-vs-git-push-origin-ma)[`git: Your branch is Ahead by X commits`](https://stackoverflow.com/a/3323933/6309) ”。

# android - 如何在android中应用带有jsonparsing的Asynctask

> ID：15039769
> 
> 赞同：0
> 
> 时间：2013-02-23T11:02:47.343
> 
> 标签：android, json, android-layout, android-intent

我在android中应用带有json解析的asynctask，但它可以显示错误。我的代码是

```
public class AndroidJSONParsingActivity extends ListActivity {

    // url to make request
     private static final String url = "http://203.110.93.84/trainee/yoga_api.php?category";

    // JSON Node names          
    // Hashmap for ListView
            ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "yoga_name";
    private static final String TAG_CATEGORY = "category";
    private static final String TAG_DESC = "yoga_desc";
    private static final String TAG_URL = "yoga_url";
    String gender;
    // contacts JSONArray
    JSONArray contacts = null;
      Utility utility=new Utility();
      String json;
      private static String newurl="";

      Boolean isInternetPresent = false;

        // Connection detector class
        ConnectionDetector cd;
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        cd = new ConnectionDetector(getApplicationContext());       
                isInternetPresent = cd.isConnectingToInternet();

                // check for Internet status
                if (isInternetPresent) {
                    // Internet Connection is Present
                    // make HTTP requests
                    //showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection","You have internet connection", true);
                    Intent myIntent = getIntent(); 
                    newurl=url+"="+myIntent.getSerializableExtra("catname").toString();

                } else {
                    // Internet connection is not present
                    // Ask user to connect to Internet
                    showAlertDialog(AndroidJSONParsingActivity.this, "No Internet Connection",
                            "You don't have internet connection.", false);
                }

                 new Async().execute(); 

            /*BackgroundAsyncTask task= new BackgroundAsyncTask();

            task.execute();*/

        // Creating JSON Parser instance
    //  JSONParser jParser = new JSONParser();

        /**
         * Updating parsed JSON data into ListView
         * */

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem

                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_NAME, name);
                in.putExtra(TAG_DESC, cost);
                in.putExtra(TAG_URL, description);
                startActivity(in);

            }
        });

    }
    class Async extends AsyncTask<String, Integer, String> {
          ProgressDialog dialog;  
          protected void onPreExecute()
          {  
           dialog=new ProgressDialog(AndroidJSONParsingActivity.this);
           dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
           dialog.setTitle("Loading");
           dialog.setMessage("Please Wait....");
           dialog.show();
          }  
          @Override
          protected String doInBackground(String... params) {

           // perform desired task in this doInBackground Block
                jsonparser();
           return "";
          }
          @Override
          protected void onProgressUpdate(Integer... values) {
           // TODO Auto-generated method stub
           super.onProgressUpdate(values);
         //  dialog.incrementProgressBy(5);   
           }

          @Override
           protected void onPostExecute(String result)
          {
            dialog.dismiss();    

              }  
         } 
    public void jsonparser()
    {

        // getting JSON string from URL
        JSONObject c=null; 

    try {   
        json = utility.getResponse(newurl);
    //  Toast.makeText(getApplicationContext(),json, Toast.LENGTH_LONG).show();
        contacts = new JSONArray(json);
        for(int i = 0; i < contacts.length(); i++){
          c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String address = c.getString(TAG_DESC);
              gender = c.getString(TAG_URL);

            //Toast.makeText(getApplicationContext(),id, Toast.LENGTH_LONG).show();
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_DESC, address);
            map.put(TAG_URL, gender);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (Exception e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME, TAG_DESC, TAG_URL }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });

    setListAdapter(adapter);

    }
} 
```

我的logcat是

```
 02-23 16:16:16.616: D/dalvikvm(946): GC_FOR_MALLOC freed 2209 objects / 129344 bytes in 77ms
02-23 16:16:16.736: W/dalvikvm(946): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
02-23 16:16:16.756: E/AndroidRuntime(946): FATAL EXCEPTION: AsyncTask #1
02-23 16:16:16.756: E/AndroidRuntime(946): java.lang.RuntimeException: An error occured while executing doInBackground()
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.lang.Thread.run(Thread.java:1096)
02-23 16:16:16.756: E/AndroidRuntime(946): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.view.View.invalidate(View.java:5139)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.widget.AbsListView.resetList(AbsListView.java:1011)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.widget.ListView.resetList(ListView.java:493)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.widget.ListView.setAdapter(ListView.java:422)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.app.ListActivity.setListAdapter(ListActivity.java:267)
02-23 16:16:16.756: E/AndroidRuntime(946):  at com.callplanets.app.AndroidJSONParsingActivity.jsonparser(AndroidJSONParsingActivity.java:204)
02-23 16:16:16.756: E/AndroidRuntime(946):  at com.callplanets.app.AndroidJSONParsingActivity$Async.doInBackground(AndroidJSONParsingActivity.java:138)
02-23 16:16:16.756: E/AndroidRuntime(946):  at com.callplanets.app.AndroidJSONParsingActivity$Async.doInBackground(AndroidJSONParsingActivity.java:1)
02-23 16:16:16.756: E/AndroidRuntime(946):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-23 16:16:16.756: E/AndroidRuntime(946):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-23 16:16:16.756: E/AndroidRuntime(946):  ... 4 more
02-23 16:16:17.376: E/WindowManager(946): Activity com.callplanets.app.AndroidJSONParsingActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ea7f00 that was originally added here
02-23 16:16:17.376: E/WindowManager(946): android.view.WindowLeaked: Activity com.callplanets.app.AndroidJSONParsingActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ea7f00 that was originally added here
02-23 16:16:17.376: E/WindowManager(946):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
02-23 16:16:17.376: E/WindowManager(946):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-23 16:16:17.376: E/WindowManager(946):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-23 16:16:17.376: E/WindowManager(946):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.Dialog.show(Dialog.java:241)
02-23 16:16:17.376: E/WindowManager(946):   at com.callplanets.app.AndroidJSONParsingActivity$Async.onPreExecute(AndroidJSONParsingActivity.java:132)
02-23 16:16:17.376: E/WindowManager(946):   at android.os.AsyncTask.execute(AsyncTask.java:391)
02-23 16:16:17.376: E/WindowManager(946):   at com.callplanets.app.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:82)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-23 16:16:17.376: E/WindowManager(946):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-23 16:16:17.376: E/WindowManager(946):   at android.os.Looper.loop(Looper.java:123)
02-23 16:16:17.376: E/WindowManager(946):   at android.app.ActivityThread.main(ActivityThread.java:4627)
02-23 16:16:17.376: E/WindowManager(946):   at java.lang.reflect.Method.invokeNative(Native Method)
02-23 16:16:17.376: E/WindowManager(946):   at java.lang.reflect.Method.invoke(Method.java:521)
02-23 16:16:17.376: E/WindowManager(946):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-23 16:16:17.376: E/WindowManager(946):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-23 16:16:17.376: E/WindowManager(946):   at dalvik.system.NativeStart.main(Native Method)
02-23 16:16:20.286: D/dalvikvm(956): GC_EXTERNAL_ALLOC freed 1053 objects / 70784 bytes in 83ms 
```

请帮我看看示例代码。

我是android的初学者..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:32:57.540

兄弟，您在 doinBackgorund 方法中编写了整个代码，并保留 asyntask 类的参数类型，因为这三个都是无效的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:14:02.150

```
cd = new ConnectionDetector(getApplicationContext());       
                isInternetPresent = cd.isConnectingToInternet();

                // check for Internet status
                if (isInternetPresent) {
                    // Internet Connection is Present
                    // make HTTP requests
                    //showAlertDialog(AndroidDetectInternetConnectionActivity.this, "Internet Connection","You have internet connection", true);
                    Intent myIntent = getIntent(); 
                    newurl=url+"="+myIntent.getSerializableExtra("catname").toString();

                      new Async().execute(); 

                } else {
                    // Internet connection is not present
                    // Ask user to connect to Internet
                    showAlertDialog(AndroidJSONParsingActivity.this, "No Internet Connection",
                            "You don't have internet connection.", false);
                } 
```

第一个是，如果检查互联网连接存在，则只调用**AsyncTask**类。

第二个是**onPostExecute**方法中设置的 Adapter 值

```
@Override
           protected void onPostExecute(String result)
          {
            dialog.dismiss();    

              ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_DESC, TAG_URL }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter);

              } 
```

# login - IP登录注册？

> ID：15039771
> 
> 赞同：1
> 
> 时间：2013-02-23T11:02:59.403
> 
> 标签：login, ip

我想将注册帐户的使用限制在其注册的家庭/商店/办公室。

我正在考虑记录 IP 并检查每次登录尝试是否匹配。

这会限制用户仅在一台计算机上登录吗？因为这不是我想要的；无论办公室/商店/家庭有 1 台还是 100 台计算机，它们都需要能够使用相同的登录。

关于如何最好地做到这一点的任何其他建议都会很棒！

# c# - C# 字符串正则表达式：仅包含单个空格的单词

> ID：15039772
> 
> 赞同：0
> 
> 时间：2013-02-23T11:03:01.883
> 
> 标签：c#, regex

我有这个正则表达式`@"^[a-zA-Z ]+$"`。给出了这个想法 [替换`_`为`] `string_string`, `stringstring`,`string__string`必须返回`True`, `True`, `False`。`

 `什么是正确的正则表达式来接受字符串输入，只接受字母和一个空格[只有空格]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:11:18.740

这对你有用吗？

```
 [a-zA-Z]+ ?[a-zA-Z]+ 
```

这将匹配您想要的，但在 string__string 中匹配两个字符串。

假设一行，您可以像以前一样添加 ^$ 以进行整行匹配，然后 3 根本不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:11:30.190

这会起作用：

```
^[a-zA-Z]+ {0,1}[a-zA-Z]+$ 
```

这与

```
^[a-zA-Z]+ ?[a-zA-Z]+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:14:11.837

您可以通过技巧避免前缀

```
^([a-zA-Z]+ ?)*$ 
````

# blender - 导出带有多个命名动画的搅拌机 md2

> ID：15039789
> 
> 赞同：0
> 
> 时间：2013-02-23T11:05:31.003
> 
> 标签：blender, rajawali

我一直试图寻找解决方案，但似乎没有人面临这个问题。

我想导出我用 Blender 构建的动画，并尝试将多个动画导出到 md2 文件中。

然后在android上导入rajawali。

但是，我找不到正确导出 md2 的方法。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:05:04.357

首先下载blender的“MD2 exporter”插件。我有搅拌机版本 2.63 并尝试了各种 md2 导出脚本插件，但没有成功。

最后，我在 Blender 2.8 的 Md2 导出脚本中进行了一些更改，然后我就完成了。可以下载：[http](http://www.megafileupload.com/en/file/398883/md2-export-rar.html) ://www.megafileupload.com/en/file/398883/md2-export-rar.html （链接已过期，需要刷新）

在搅拌机中打开文本编辑器，然后`md2_export.py`使用鼠标右键单击进入文本编辑器。然后按`ALT`+`p`运行脚本。

制作或打开您的动画 3d 模型。您可以使用 NLA 编辑器命名和分割动画。

请观看有关如何使用 NLA 编辑器的视频：[https ://www.youtube.com/watch?v=IBRqmeErOHU](https://www.youtube.com/watch?v=IBRqmeErOHU)

给你的动画命名。添加 Nla 轨道并定义您的动画长度。

在属性中命名 Nla 轨道（按`n`显示属性）。命名动画后，导出 md2 文件。

请注意，您的模型必须具有单个 UV 贴图。UV 贴图对于在 rajawali 框架中的模型上显示纹理是必要的。

希望这可以帮助。

# php - 使用ajax获取信息抛出url

> ID：15039790
> 
> 赞同：0
> 
> 时间：2013-02-23T11:05:32.213
> 
> 标签：php, jquery

我想问你关于使用 jQuery Lib 的 ajax 和 php。基本上，我有两个文件，一个是实际文件 message.php?id=23 23 是指会员的 ID。我确实想每 5 秒刷新一次。

我做得很好，但我不知道如何发送成员的 ID，以从数据库中获取一些信息。

这是我的代码：

```
<script src="js/jquery.js"></script> 

<script> 
 $(document).ready(function() { 
      $(".Refresh").load('postnm.php'); 
   var refreshId = setInterval(function() { 
      $(".Refresh").load('postnm.php'); 
   }, 5000); 
   $.ajaxSetup({ cache: false }); 
}); 
</script> 
```

所以想法是像`$_GET['id']`在 PHP 中一样发送 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:34:35.930

假设脚本是通过 PHP 写入浏览器的，只需使用 PHP 将 ID 放入您的 JS 中：

```
<script>
    var id = <?php echo $member_id?>; 
```

接着：

```
 $(document).ready(function() { 
        $(".Refresh").load('postnm.php?id=' + id); 
     var refreshId = setInterval(function() { 
        $(".Refresh").load('postnm.php?id=' + id); 
     }, 5000); 
     $.ajaxSetup({ cache: false }); 
  });
</script> 
```

# iphone - 将（垂直）UIPageViewController 嵌套在另一个（水平）UIPageViewcontroller 中

> ID：15039792
> 
> 赞同：8
> 
> 时间：2013-02-23T11:05:44.903
> 
> 标签：iphone, objective-c, uiviewcontroller, uipageviewcontroller, nested

我的`UIPageViewController`. 我想使用部分和子部分在我的应用程序中呈现内容。所以，我创建了**“两个”**实例`UIPageViewController`- 水平（红色）和垂直（蓝色）：

![方案](../Images/9be9209988c8a959ef33006f39c271aa.png)

之前我说过我创建了“两个”实例——这并不完全正确——可能有数十个实例，但同时只呈现了 2 个，**你知道我的意思**。两个控制器都`transitionStyle`设置为`UIPageViewControllerTransitionStyleScroll`。

红色`UIPageViewController`负责部分之间的水平滚动，蓝色负责垂直滚动。

它们在分开时都可以工作，但是当我将垂直放置`UIPageViewController`在水平位置时，**垂直的会停止工作**。

我的代码如下所示：

* * *

**横向`UIPageViewController`创作**

```
self.mainPageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:@{UIPageViewControllerOptionInterPageSpacingKey:[NSNumber numberWithFloat:0]}];
self.mainPageViewController.dataSource = self;
self.mainPageViewController.delegate = self;

self.pdfDocsURLs = @[ @{@"v":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"1v" ofType:@"pdf"]],
                        @"h":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"1h" ofType:@"pdf"]]},

                      @{@"v":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"2v" ofType:@"pdf"]],
                        @"h":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"2h" ofType:@"pdf"]]},

                      @{@"v":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"3v" ofType:@"pdf"]],
                        @"h":[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"3h" ofType:@"pdf"]]}];

UIIndexedPageViewController *pvc = [[UIIndexedPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationVertical options:@{UIPageViewControllerOptionInterPageSpacingKey:[NSNumber numberWithFloat:0]}];
pvc.index = 1;
PDFDocument *vdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[0][@"v"] password:nil];
PDFDocument *hdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[0][@"h"] password:nil];
PDFSinglePageViewController *svc = [[PDFSinglePageViewController alloc] initWithVerticalPDF:vdoc horizontalPDF:hdoc page:1];
[pvc setViewControllers:@[svc] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];

[self.mainPageViewController setViewControllers:@[pvc] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil]; 
```

需要明确的`UIIndexedPageViewController`是，它是 UIPVC 的一个子类，具有额外的`NSUInteger index`属性。它的实现是空的——它不会覆盖任何方法。

* * *

**`UIPageViewController`数据源方法**

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    if(pageViewController == self.mainPageViewController) { // if horizontal
        UIIndexedPageViewController *ivc = (UIIndexedPageViewController *)viewController;
        if(ivc.index == self.pdfDocsURLs.count) return nil;
        UIIndexedPageViewController *pvc = [[UIIndexedPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationVertical options:@{UIPageViewControllerOptionInterPageSpacingKey:[NSNumber numberWithFloat:0]}];
        pvc.index = ivc.index+1;
        PDFDocument *vdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[ivc.index][@"v"] password:nil];
        PDFDocument *hdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[ivc.index][@"h"] password:nil];
        PDFSinglePageViewController *svc = [[PDFSinglePageViewController alloc] initWithVerticalPDF:vdoc horizontalPDF:hdoc page:1];
        [pvc setViewControllers:@[svc] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
        return pvc;
    } else { // if vertical - THE CODE BELOW IS NEVER EXECUTED
        PDFSinglePageViewController *ovc = (PDFSinglePageViewController *)viewController;
        NSUInteger nop = 0;
        if(UIInterfaceOrientationIsPortrait(ovc.interfaceOrientation)) nop = ovc.verticalDoc.numberOfPages;
        else if(UIInterfaceOrientationIsLandscape(ovc.interfaceOrientation)) nop = ovc.horizontalDoc.numberOfPages;
        if(ovc.page == nop) return nil;
        PDFSinglePageViewController *svc = [[PDFSinglePageViewController alloc] initWithVerticalPDF:ovc.verticalDoc horizontalPDF:ovc.horizontalDoc page:ovc.page+1];
        return svc;
    }
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    if(pageViewController == self.mainPageViewController) { // if horizontal
        UIIndexedPageViewController *ivc = (UIIndexedPageViewController *)viewController;
        if(ivc.index == 1) return nil;
        UIIndexedPageViewController *pvc = [[UIIndexedPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationVertical options:@{UIPageViewControllerOptionInterPageSpacingKey:[NSNumber numberWithFloat:0]}];
        pvc.index = ivc.index-1;
        PDFDocument *vdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[ivc.index-2][@"v"] password:nil];
        PDFDocument *hdoc = [[PDFDocument alloc] initWithPDFFileURL:self.pdfDocsURLs[ivc.index-2][@"h"] password:nil];
        PDFSinglePageViewController *svc = [[PDFSinglePageViewController alloc] initWithVerticalPDF:vdoc horizontalPDF:hdoc page:1];
        [pvc setViewControllers:@[svc] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
        return pvc;
    } else { // is vertical - THE CODE BELOW IS NEVER EXECUTED
        PDFSinglePageViewController *ovc = (PDFSinglePageViewController *)viewController;
        NSUInteger nop = 0;
        if(UIInterfaceOrientationIsPortrait(ovc.interfaceOrientation)) nop = ovc.verticalDoc.numberOfPages;
        else if(UIInterfaceOrientationIsLandscape(ovc.interfaceOrientation)) nop = ovc.horizontalDoc.numberOfPages;
        if(ovc.page == 1) return nil;
        PDFSinglePageViewController *svc = [[PDFSinglePageViewController alloc] initWithVerticalPDF:ovc.verticalDoc horizontalPDF:ovc.horizontalDoc page:ovc.page-1];
        return svc;
    }
} 
```

* * *

所以似乎水平`UIPageViewController`不允许垂直甚至接收平移手势识别器。

* * *

**我的问题是......**有没有办法让垂直`UIPageViewController`接收触摸并在两个方向滚动？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T16:01:55.443

我忘记在我的垂直页面视图控制器中分配`dataSource`和属性`delegate`

*   `-pageViewController:viewControllerBeforeViewController:`
*   `-pageViewController:viewControllerAfterViewController:`

问题解决了，一切正常。

# arraylist - 如何在java中获取列表类变量？

> ID：15039793
> 
> 赞同：-1
> 
> 时间：2013-02-23T11:05:51.523
> 
> 标签：arraylist

类用户{

字符串名称；整数年龄；}

列表列表用户=新数组列表（）；

在上面的代码中，如何使用 listuser 访问类成员变量名称和年龄？请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:18:09.707

好吧，首先您需要为 User 类中的 name 和 age 字段创建一些 getter。

```
 class User{

          String name; int age; //these are private by default so you cannot access them

          //create getters for the 2 members in order to access them outside of the User class
          public string getName() 
            {
                 return name;
            }

          public int getAge()
           {
                  return age;
              }
         } 
```

然后假设您已经将用户添加到数组列表中，例如：

```
 User user = (User)listuser.get(position); //cast the object at "position" to user.

          string name = user.getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:31:03.650

您应该注意的另一件事是 List 是通用类型，例如 - List< E >

您需要指定**List 是哪种类型的列表**。在您的情况下，它是用户类型的列表。

对于演示，以下是使用 List 的方法：

```
public class User {

    String name;
    int age;

    User(String nm, int age) {
        name = nm;
        this.age = age;
    }

    public static void main(String args[]) {
        List<User> listuser = new ArrayList<User>();

        listuser.add(new User("Foo", 21));
        listuser.add(new User("Bar", 22));

        System.out.println(listuser.get(0).name + " : " + listuser.get(0).age);
        System.out.println(listuser.get(1).name + " : " + listuser.get(1).age);
    }
} 
```

同样，上面我使用了具有默认访问权限的变量。通常变量应该保持私有访问，在这种情况下，您需要指定 getter 和 setter，然后访问这些变量，就像 Dan Dinu 解释的那样。

# php - 从 php 中的静态函数访问变量

> ID：15039794
> 
> 赞同：0
> 
> 时间：2013-02-23T11:05:57.030
> 
> 标签：php

这是一个来自 php 的程序。我无法从静态函数中打印受保护变量的值。这个程序有什么问题？

```
class SomeClass
{
    protected $_someMember;

    public function __construct()
    {
        $this->_someMember = 1;
        self::getSomethingStatic();
    }

    public static function getSomethingStatic()
    {  
        echo $_someMember * 5; 
    }
}
$obj = new SomeClass(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:09:36.840

你期望做这样的事情

```
class SomeClass
{
    protected static $_someMember = <default value>;

    public function __construct()
    {
        self::getSomethingStatic();
    }

    public static function getSomethingStatic()
    {  
        echo static::$_someMember * 5; 
    }
}
$obj = new SomeClass(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:08:54.357

您可能希望查看 PHP 关于[static](http://php.net/manual/en/language.oop5.static.php)的文档。正如您应该注意到的，静态函数不能访问对象属性。

事实上，如果你想了解 PHP 的 OOP 实现的细节，你可能想看看[这里](http://php.net/manual/en/language.oop5.php)。

# javascript - 传播时的JavaScript事件通信？

> ID：15039799
> 
> 赞同：2
> 
> 时间：2013-02-23T11:06:37.117
> 
> 标签：javascript, jquery

我有 2 个 DIV 的简单标记。一内一

![在此处输入图像描述](../Images/2c14b9ff52483362689479f57a942dfe.png)

绿色嵌套在红色 div 下。

两者都有不同 `onclick`的处理程序，当我单击绿色时，事件会冒泡到红色 div 并触发它`onclick`。（应该是这样）。

但是，当我单击绿色 div 时，我使用[事件数据重载](http://api.jquery.com/on/#passing-data)：

```
$(".divGreen").on('click',{ name: "Karl"}, function (e)
                        {
                              alert('inner');
                        }); 
```

我可以读取值：

```
 $(".divGreen").on('click',{ name: "Karl"}, function (e)
                            {
                               //e.data.name....
                            }); 
```

但我**不想**让绿色处理函数读取数据，而是让**RED DIV**处理函数读取数据

我*可以*`stop propogation`在绿色 div 上执行此操作，并对事件数据使用“*触发[红色](http://api.jquery.com/trigger/)点击”*。- 但我不想。

所以我的问题：

有没有办法（*请不要全局变量*）当事件冒泡时，数据也会冒泡？

[**JSBIN**](http://jsbin.com/evewic/2/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:20:24.060

由于事件的目标与事件冒泡相同，因此您可以`e.target.data`像这样附加数据：

```
$(".divGreen").on('click',{ name: "Karl"}, function (e) {
    e.target.data = e.data;
}); 
```

然后，您可以在父事件中选择它：

```
$(".divRed").on('click', function (e) {
    alert(e.target.data.name); // alerts "Karl"
}); 
```

# javascript - 获取跨域脚本标签的内容

> ID：15039803
> 
> 赞同：1
> 
> 时间：2013-02-23T11:06:57.153
> 
> 标签：javascript, cross-domain, requirejs, innerhtml, script-tag

我在 JavaScript 中创建了一种新的编程语言，我希望用户能够将它包含在他们的网页中，就像使用该`script`标签的任何其他脚本一样：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>My Prog Lang</title>
        <script src="scripts/myProgLang.js"></script>
        <script type="text/my-prog-lang" src="scripts/index.mypl"></script>
    </head>
</html> 
```

这个想法是`myProgLang.js`获取所有脚本的内容并执行它们：

```
window.addEventListener("DOMContentLoaded", function () {
    var scripts = document.querySelector('script[type="text/my-prog-lang"]');
    var length = scripts.length;

    for (var i = 0; i < length; i++) {
        var script = scripts[i];
        var src = script.getAttribute("src");
        var content = AJAX.getSync(src);
        myProgLang.eval(content);
    }
}, false); 
```

这种方法的明显问题（除了进行同步 AJAX 调用之外）是不同域上的脚本违反了相同的源策略。

显而易见的解决方案是使用[RequireJS](http://requirejs.org/ "要求JS")之类的脚本加载器，使用文本插件将脚本加载为纯文本。

但是我不想仅仅为了这个任务而包含整个 RequireJS 框架。所以我做了一些挖掘，找到了这个答案：[https ://stackoverflow.com/a/4927418/783743](https://stackoverflow.com/a/4927418/783743)

根据上面的答案：

> 脚本元素的 innerHTML 属性应该以字符串形式提供脚本内容，前提是脚本元素是：
> 
> *   内联脚本，或
> *   脚本已加载（如果使用 src 属性）

不幸的是，这不起作用（至少在 Opera 上）。使用属性加载的脚本`src`无法使用属性访问`innerHTML`。

我还有什么其他选择来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:37:09.570

您需要发出 Ajax 请求...如果它与页面相同的域，它将正常加载，如果服务器发送缓存标头，它应该使用现有副本。

如果它在另一个域上，您将需要 CORS 标头（如果支持）和/或 JSONP 加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:19:50.373

如果您尝试通过标签直接包含您的自定义脚本，那么它将无法解析，并且您将无法获取 的 innerHTML。

我建议使用 JSONP 风格的方法。首先定义一个全局处理函数，例如

```
// myproglang.js

window.registerSource = function(source) {
    myProgLang.eval(source);
} 
```

然后在您的源文件中，将您的代码包装在对该函数的调用中：

```
// source.mypl
registerSource("\
Dim foo as Integer;\
") 
```

这有点难看，因为它需要文本文件转义换行符以维护字符串文字，但除了使用 XHR 之外，这是我能想到的唯一可行的解​​决方案。

您总是可以为这种“语言”编写一个编译步骤，在 registerSource() 调用中替换并包装源代码`"\n"`。`"\\\n"`只要它是透明的，它就是一个可行的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:29:51.120

这个问题已经在[这里](https://stackoverflow.com/questions/4129067/how-to-get-a-script-tags-innerhtml)和[这里](https://stackoverflow.com/questions/148441/how-can-i-get-the-content-of-the-file-specified-as-the-src-of-a-script-tag)被问过了。

基本上共识是：

*   如果脚本是内联的，则可以使用`script.innerHTML`
*   如果它不是内联的，则只有在发出另一个 ajax 请求时才能访问它。（显然你可能会遇到跨域问题）

### 笔记

如果您的 HTTP 标头配置正确，您应该能够从浏览器的缓存中获取脚本，因此速度会很快。

跨域问题可以通过`Access-Control-Allow-Origin: *`脚本主机的标头来解决。

# java - jak 似乎不再可用，请使用 JAXB 创建 kml

> ID：15039804
> 
> 赞同：1
> 
> 时间：2013-02-23T11:07:01.017
> 
> 标签：java, jaxb, kml

我需要使用 JAXB 创建一个 KML 文件。

但似乎来自[http://labs.micromata.de/display/jak/Home](http://labs.micromata.de/display/jak/Home)的库不再可用？至少我无法加载页面。

那么我怎样才能用 JAXB 创建一个 KML 文件呢！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T13:22:05.570

Java API for KML (JAK) 的公共网站在这里： [http ://code.google.com/p/javaapiforkml/](http://code.google.com/p/javaapiforkml/)

JAK 讨论组（包括一些编码示例）在这里： [https ://groups.google.com/forum/?fromgroups#!forum/javaapiforkml](https://groups.google.com/forum/?fromgroups#!forum/javaapiforkml)

您提到的文档可以在以下位置找到：http: [//labs.micromata.de/display/jak/Home](http://labs.micromata.de/display/jak/Home)
但在发布此帖子时，该网站已关闭。

更新：JAK 网站重新上线。

# parameters - AngularJS：路由的url参数

> ID：15039812
> 
> 赞同：6
> 
> 时间：2013-02-23T11:07:55.657
> 
> 标签：parameters, routing, angularjs, views

我想在angularjs中使用**url参数进行路由**

我有一个带有 2 个视图的 anguar 应用程序：editView 和 mainView

给定一个如下所示的 url：'httx://myapp/?param1=x&... **&editmode=1** &...'

-> 将带我到 /editMode 路径

*这样做的好方法是什么？*

*   如果editmode == 1，我是否需要使用控制器来获取 $routeparams.editmode 并使用 $location.path('/editmode') ？
*   我需要html5模式吗？

*   我对 url 无能为力 - 我被迫使用 editmode 参数

* * *

```
$routeProvider.when('/', {
  controller: function($routeParams, $location) {
    if($routeParams.editmode == '1') {
      $location.path('editMode') ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:01:12.740

我发现我需要的是“解决：”而不是“控制器：”。如果有人有兴趣通过参数更改路线，这就是要走的路： [https ://github.com/angular/angular.js/issues/1838#issuecomment-13994168](https://github.com/angular/angular.js/issues/1838#issuecomment-13994168)

# image - 是否可以通过 API 从 Facebook、Instagram 等服务中提取创建日期和原始 GPS 位置的图像元数据？

> ID：15039813
> 
> 赞同：1
> 
> 时间：2013-02-23T11:08:11.617
> 
> 标签：image, api, metadata

是否可以通过 API 从 Facebook、Instagram 等服务中提取创建日期和原始 GPS 位置的图像元数据？还是在用户上传后由服务重写原始元集，以便您通过 API 获得过滤/缩减版本？如果是这样，有什么方法可以访问原始元数据？

# assembly - 在没有 DIV 操作码的情况下，任何数字（16 位）在汇编中除以 3 的更快方法

> ID：15039815
> 
> 赞同：3
> 
> 时间：2013-02-23T11:08:30.913
> 
> 标签：assembly, x86-16, integer-division, bit-shift

我想在 8086 汇编或类似程序中将无符号整数除以 3，以任何我不想使用 DIV 操作码的方式更快地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:18:00.973

阅读 Hacker's Delight 一书相应的第 10 章“整数除以常数”。[奖励内容](http://www.hackersdelight.org/divcMore.pdf)适用于该章节（但不是章节本身）。

或者使用[libdivide](http://libdivide.com)，这是一个库，它会在第一步中应用已知算法来找到合适的常数，这样给定分母的除法就会更快。

正如 libdivide 页面所指出的，编译器知道如何通过编译时常量将除法转换为乘法和移位，因此最简单的方法可能就是使用编译器。我会为你做，但我没有 16 位编译器。如果使用 32 位编译器完成，结果如下：

```
 movw    $-21845, %ax
    mulw    8(%ebp)
    andl    $65534, %edx
    movl    %edx, %eax
    shrl    %eax 
```

对于 C 函数：

```
int f(unsigned short d)
{
  return d / 3;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T11:29:55.037

基本答案是“乘以所需常数的倒数”，使用移位和加法来执行乘法，然后使用一些可能的后移位来正确定位二进制点。

诀窍是弄清楚倒数的精度必须是多少，以处理您期望的最大输入红利的大小。您显然可以决定最大的输入操作数是整个寄存器，但如果您知道更多，您可以使用具有较少位的倒数，从而获得更快的移位加法乘法。

Cuoq 的回答提供了很好的参考资料。

# c++ - 将 strcpy 与 std::vector 一起使用

> ID：15039818
> 
> 赞同：4
> 
> 时间：2013-02-23T11:08:54.560
> 
> 标签：c++, string, stdvector, strtok, strcpy

我在使用我自己的类的实例时遇到`strcpy`了一些麻烦。`vector`这是课程：

```
class elemente {  
    char name[5];  
    short val;  
    bool red;  
}; 
```

所以，我从这个类中制作了一个向量：

```
vector<elemente> ele(1); 
```

但是，如果我尝试执行此操作：

```
strcpy(ele.back().name, strtok(line, " ")); 
```

我总是遇到分段错误。为什么？

我用 GDB 调试了我的程序，`line`变量是正确的，如果我用正常的向量替换了`char *`一切正常（程序不工作，但内容没问题）。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:31:07.660

由于您使用的是 C++，因此您应该使用该语言为您提供的功能，而不是使用 C 风格的代码。很高兴您决定使用`std::vector`so continue 并`std::string`用于存储字符串、`std::istringstream`创建输入流，您将从中读取令牌并`std::getline`实际检索这些令牌。

首先，使用*访问说明符* `public`使类的属性在`elemente`此类范围之外可用，并将类型更改`name`为`std::string`：

```
class elemente
{
public:
    std::string name;
    // ...
}; 
```

然后从行中检索令牌可能如下所示：

```
#include <iostream>
#include <vector>
#include <sstream>
...

std::vector<elemente> elements;
std::string line("this is my input line");

std::istringstream lineStream(line);
for (std::string word; std::getline(lineStream, word, ' '); )
{
    if (!word.empty())
    {
        elements.push_back(elemente());
        elements.back().name = word;
    }
} 
```

要测试此代码，您可以打印存储在此向量元素中的所有名称：

```
std::vector<elemente>::iterator e;
for(e = elements.begin(); e != elements.end(); ++e)
    std::cout << e->name << "."; 
```

输出：

```
this.is.my.input.line. 
```

* * *

或者，您可以创建类的公共构造函数，以便可以使用正确初始化的成员构造元素：

```
class elemente
{
public:
    elemente(const std::string& s) : name(s){ }
// ...
    std::string name;
    // ...
}; 
```

然后对令牌的解析将变为：

```
for (std::string word; std::getline(lineStream, word, ' '); )
{
    if (!word.empty())
        elements.push_back(elemente(word));
} 
```

希望这可以帮助 ：）

# javascript - 3级Json排序

> ID：15039825
> 
> 赞同：0
> 
> 时间：2013-02-23T11:10:00.177
> 
> 标签：javascript, jquery, json

我想对一个json多级进行排序！！首先按伊斯兰教法排序 -> 然后按 Volume[0] -> 然后按市值 [0]

未排序：

```
[
    {
        "Name": "Hcl",
        "sharia": true,
        "Volume": [
            25000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "rado",
        "sharia": false,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "ssinc ",
        "sharia": false,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "sureshot",
        "sharia": false,
        "Volume": [
            20000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "Infosys",
        "sharia": true,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            6000,
            "large"
        ]
    },
    {
        "Name": "orchid",
        "sharia": true,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            6000,
            "Large"
        ]
    },
    {
        "Name": "hero honda",
        "sharia": true,
        "Volume": [
            150,
            "low"
        ],
        "marketcap": [
            400,
            "medium "
        ]
    },
    {
        "Name": "bioffoz",
        "sharia": false,
        "Volume": [
            40000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    }
] 
```

截至目前，我正在使用以下功能进行一次排序：

```
var sort_by = function(field, reverse, primer){

   var key = function (x) {return primer ? primer(x[field]) : x[field]};

   return function (a,b) {
       var A = key(a), B = key(b);
      return (A < B ? -1 : (A > B ? 1 : 0)) * [1,-1][+!!reverse];                
   }
} 
```

用于排序 A - Z

```
 company.sort(sort_by('Name', false, function(a){return a.toUpperCase()})); 
```

对于排序布尔值：

```
company.sort(sort_by('sharia', true, function(a){return Boolean(a)})); 
```

对于从高到低排序：

```
company.sort(sort_by('sharia', true, parseint)); 
```

按伊斯兰教法排序（看起来像这样）：

```
[
    {
        "Name": "Hcl",
        "sharia": true,
        "Volume": [
            25000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "orchid",
        "sharia": true,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            6000,
            "Large"
        ]
    },
    {
        "Name": "hero honda",
        "sharia": true,
        "Volume": [
            150,
            "low"
        ],
        "marketcap": [
            400,
            "medium "
        ]
    },
    {
        "Name": "Infosys",
        "sharia": true,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            6000,
            "large"
        ]
    },
    {
        "Name": "ssinc ",
        "sharia": false,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "sureshot",
        "sharia": false,
        "Volume": [
            20000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "rado",
        "sharia": false,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "bioffoz",
        "sharia": false,
        "Volume": [
            40000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    }
] 
```

然后按体积排序

```
[
    {
        "Name": "Infosys",
        "sharia": true,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            6000,
            "large"
        ]
    },
    {
        "Name": "Hcl",
        "sharia": true,
        "Volume": [
            25000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "orchid",
        "sharia": true,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            6000,
            "Large"
        ]
    },
    {
        "Name": "hero honda",
        "sharia": true,
        "Volume": [
            150,
            "low"
        ],
        "marketcap": [
            400,
            "medium "
        ]
    },
    {
        "Name": "rado",
        "sharia": false,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "bioffoz",
        "sharia": false,
        "Volume": [
            40000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "sureshot",
        "sharia": false,
        "Volume": [
            20000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "ssinc ",
        "sharia": false,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    }
] 
```

全部排序：

```
[
    {
        "Name": "Infosys",
        "sharia": true,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            6000,
            "large"
        ]
    },
    {
        "Name": "Hcl",
        "sharia": true,
        "Volume": [
            25000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "orchid",
        "sharia": true,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            6000,
            "Large"
        ]
    },
    {
        "Name": "hero honda",
        "sharia": true,
        "Volume": [
            150,
            "low"
        ],
        "marketcap": [
            400,
            "medium "
        ]
    },
    {
        "Name": "rado",
        "sharia": false,
        "Volume": [
            50000,
            "high"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "bioffoz",
        "sharia": false,
        "Volume": [
            40000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    },
    {
        "Name": "sureshot",
        "sharia": false,
        "Volume": [
            20000,
            "moderate"
        ],
        "marketcap": [
            5000,
            "small"
        ]
    },
    {
        "Name": "ssinc ",
        "sharia": false,
        "Volume": [
            200,
            "low"
        ],
        "marketcap": [
            5000,
            "large"
        ]
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:20:06.923

您将需要在每次比较中遍历字段，当第一个键相等时两个元素通过第二个键进行比较，依此类推（请参见[此处](https://stackoverflow.com/a/15014528/1048572)的 if 语句，并在一般解决方案下方）。此外，由于您的某些字段是嵌套的，因此您会遇到额外的复杂性（请参阅[其中任何一个](https://stackoverflow.com/a/14397052/1048572)以了解其工作原理）。

```
function sort_by_multiple(fields, reverse, primer){

    function key(x, field) {
        if (Array.isArray(field))
            for (var i=0; i<field.length; i++)
                x = x[field[i]];
        else
            x = x[field];
        return primer ? primer(x) : x;
    }

    return function (a,b) {
        for (var cmp=0, i=0; i<fields.length && cmp==0; i++) {
            var A = key(a, fields[i]), B = key(b, fields[i]);
            cmp = (A>B) - (B>A);
        }
        return reverse ? -cmp : cmp;
    }
} 
```

现在你可以这样做：

```
company.sort(sort_by_multiple(['sharia',  ['Volume',0], ['marketcap',0]], true); 
```

# c# - 使用自动生成的列设置 gridview 列的位置

> ID：15039826
> 
> 赞同：3
> 
> 时间：2013-02-23T11:10:06.787
> 
> 标签：c#, asp.net, gridview

我有一个`Gridview`自动生成的`Column = "true"`现在我想更改 gridview`OnRowCreated`事件中 gridview 列的位置。

我使用此代码

```
 TableCell cell = e.Row.Cells[1];
  TableCell cell1 = e.Row.Cells[0];
  e.Row.Cells.RemoveAt(1);
  e.Row.Cells.RemoveAt(0);
  e.Row.Cells.Add(cell1);
  e.Row.Cells.Add(cell); 
```

它工作正常，它将第 0 列和第 1 列移动到网格视图的最后位置

现在我想将gridview的第三列移动到第一个位置，所以我使用

```
TableCell cell2 = e.Row.Cells[3];
e.Row.Cells.RemoveAt(3);
e.Row.Cells.AddAt(0, cell2); 
```

但它不工作....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:32:19.127

如果要将 绑定`GridView`到 a ，则可以在将其绑定到之前`DataTable`移动列：`DataTable``GridView`

```
DataTable table = new DataTable();
table.Columns.Add("x");
table.Columns.Add("y");
table.Columns.Add("z");

table.Rows.Add("1", "2", "3");
table.Rows.Add("1", "2", "3");
table.Rows.Add("1", "2", "3");

//Move the column 
table.Columns["z"].SetOrdinal(0);

string value = table.Rows[0][0].ToString();
//Outputs 3

gridView.DataSource = table;
gridView.DataBind(); 
```

# android - 绘制路径和硬件加速

> ID：15039829
> 
> 赞同：37
> 
> 时间：2013-02-23T11:10:28.930
> 
> 标签：android, graphics, opengl-es

在我看来，我正在绘制一条相当大的路径，并且遇到了一些性能问题。该路径目前有 32,000 点长，但我的应用程序应该扩展到至少 128,000 点。我真的无法对路径的大小做任何事情，因为数据集就是那么大，我需要能够一次显示整个路径并允许放大。

我正在使用运行 Android 4.2 的 Nexus 10，它默认为未明确禁用它的应用程序启用硬件加速。

该路径是使用以下代码创建的（我省略了一些设置和其他不相关的部分）：

```
dataPath.moveTo(0, offset - (float) data[leftLimit]/ scalingFactor);
        for (int i = leftLimit; i < rightLimit; ++i) {
            x = (i - leftLimit) * dx;
            y = offset - (float) data[i]/ scalingFactor;
            dataPath.lineTo(x, y);
        } 
```

然后在`onDraw()`方法中绘制：

```
canvas.drawColor(Color.WHITE);
canvas.drawPath(dataPath, linePaint); 
```

`adb shell dumpsys gfxinfo`我测量了使用和不使用硬件加速绘制视图所需的时间，令我惊讶的是，硬件加速要慢得多：

**使用硬件加速：**

![在此处输入图像描述](../Images/e66b5c2873ce6d6da8266aaf1c55d7bb.png)

**没有硬件加速：**

![在此处输入图像描述](../Images/258a300c5b5b4bf79856f9c5d091bfd5.png)

硬件加速版本每帧大约需要 200-300 毫秒，大部分时间花在处理阶段。非加速版本大约需要 50 ms，其中 2/3 在 Draw 阶段，1/3 在 process 阶段。

显然，即使我没有硬件加速的更快版本也仍然太慢而无法达到 60 fps，或者当我转移到更大的数据集时甚至几乎无法使用。

将路径渲染到位图然后仅转换该位图以适应屏幕的想法在我的情况下也是有问题的。我需要支持将路径放大到很远，并且为了在路径质量不变得更差的情况下进行放大，我必须渲染路径的超大位图（并且可能会遇到内存限制和纹理大小限制）。当放大很远时，我要么只创建路径的一部分的新图像，要么切换到直接渲染路径，如果性能仍然与我所拥有的相似，这可能会导致延迟大于帧速率现在。

我现在想知道的是

*   绘制线条/路径只是 GPU 不擅长的事情，不应该尝试硬件加速，还是我可能做错了什么导致性能不佳？
*   我能做些什么来以可接受的性能绘制如此巨大的路径吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-04T18:46:52.287

> 绘制线条/路径只是 GPU 不擅长的事情，不应该尝试硬件加速，还是我可能做错了什么导致性能不佳？

路径总是使用 CPU 渲染。当应用程序是硬件加速时，这意味着渲染器将首先使用 CPU 将您的路径绘制成位图，然后将该位图作为纹理上传到 GPU，最后在屏幕上绘制纹理。

线路完全是硬件加速的。`Path`我建议您`Canvas.drawLines()`在这种情况下使用，而不是使用。

> 我能做些什么来以可接受的性能绘制如此巨大的路径吗？

您应该自己使用`Canvas.drawLines()`或将路径渲染为`Bitmap`您管理的路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T12:15:42.653

看起来您可能会遇到 GPU 的一般瓶颈。看看以下链接：

[如何让路线绘制更高效](https://stackoverflow.com/questions/6666723/how-to-make-route-drawing-more-efficient)

[Android画布路径实时性能](https://stackoverflow.com/questions/6568882/android-canvas-path-real-time-performance)

[从画布切换到 OpenGL](http://obviam.net/index.php/opengl-es-with-android-switching-from-canvas-to-opengl/)

尤其是第一个，它建议您制作位图并绘制它。如果您更改为 openGL，看起来您可以获得更好的性能。可能有一些神奇的方法可以让现有方法发挥作用，但目前我还没有意识到这一点。

为什么您会看到您所做的行为可能是因为您在每次绘制之间将所有数据发送到 GPU。您应该将其缓存在 GPU 上并改用翻译。不重新创建数据并将其全部发送到 GPU。您可能[受 I/O 限制](http://en.wikipedia.org/wiki/IO_bound)，这意味着 CPU 和 GPU 之间的传输速率限制了您的性能。根据您提供的数据，我不能 100% 确定这一点，但这是我最好的猜测。尝试不同的缓存技术，主要是来自链接 #1 的 png-cache。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T22:52:20.050

绘制路径不仅仅涉及“告诉”GPU 绘制线条。路径具有许多特征，例如如何处理线的末端或点线，这*不是*GPU 加速的。当您遇到使 CPU 和 GPU 加速组合变慢的许多行时，可能会*出现另一个问题。*上面建议的解决方案，`canvas.drawLines`而不是`canvs.drawPath`尝试不使用花哨的`Paint`方法可能会有所帮助。

如果这没有帮助，您可以尝试使用 GLSurfaceView 并将线条直接渲染到其中。这将涉及一些 OpenGL ES 知识，但应该不会很难做到，并且可能会更有效。

# css - 当任何 DIV 高度增加时，如何增加两个 DIV 之间的边框高度？

> ID：15039831
> 
> 赞同：1
> 
> 时间：2013-02-23T11:10:38.103
> 
> 标签：css, html

我遇到了 DIV 高度的问题。看图片，有 2 个 div 标签和 div-1 有黑色的右边框。并且没有设置 div-1 和 div-2 的高度。我希望这些 div 高度中的任何一个随着内容的增加而增加，那么两个 div 标签之间的边框会自动增加，并且总是像图片一样。如果我使用了表格，那么它是不是那个问题。但是使用 div 标签怎么可能呢？

![在此处输入图像描述](../Images/432b38833c193171670cacb0dbfed350.png)

-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:33:29.670

如果您不喜欢 IE7，您可以使用它`display: table-cell`来直接布局。它将强制两个元素具有相同的高度，因此边框将始终触及您的黑色底部。

```
div.page {
    display: table;
    width: 500px;
}
div.page > section {
    display: table-cell;
    width: 70%;
    vertical-align: top;
    border-right: 1px solid #ccc;
}
div.page > aside {
    display: table-cell;
    width: 30%;
    vertical-align: top;
} 
```

**HTML**

```
<div class="page">
    <section>Left</section>
    <aside>Left</aside>
</div> 
```

**演示**

[http://jsfiddle.net/VEzUG/](http://jsfiddle.net/VEzUG/)

您当然可以使用`<div>`s 代替`<section>`and `<aside>`。

# java - 为什么我会得到 java.net.ConnectException：连接被拒绝？

> ID：15039832
> 
> 赞同：0
> 
> 时间：2013-02-23T11:10:42.173
> 
> 标签：java, smtp, mime, postfix-mta, jakarta-mail

我可以向自己发送邮件（不是通过 intertubes 发送），但似乎无法使用 Java 进行如下复制。Postfix 通过 telnet 表现良好：

```
thufir@dur:~$ 
thufir@dur:~$ telnet localhost 25
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 dur.bounceme.net ESMTP Postfix (Ubuntu)
helo me
250 dur.bounceme.net
mail from:<someone@somewhere.com>
250 2.1.0 Ok
rcpt to:<thufir@dur.bounceme.net>
250 2.1.5 Ok
data
354 End data with <CR><LF>.<CR><LF>
subject: hmm, is this smtp?
how do I do this from Java?
there's no password...
postfix-dovecot
.
250 2.0.0 Ok: queued as 81A9717FEB0
quit
221 2.0.0 Bye
Connection closed by foreign host.
thufir@dur:~$ 
```

这是Java中的堆栈跟踪，我只能看到它，`java.net.ConnectException: Connection refused`但我不知道为什么：

```
Feb 23, 2013 3:03:29 AM net.bounceme.dur.nntp.MessageSender send
SEVERE: {0}
javax.mail.MessagingException: Could not connect to SMTP host: dur.bounceme.net, port: 25;
  nested exception is:
    java.net.ConnectException: Connection refused
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1962)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:654)
    at javax.mail.Service.connect(Service.java:295)
    at net.bounceme.dur.nntp.MessageSender.send(MessageSender.java:57)
    at net.bounceme.dur.nntp.MessageSender.populate(MessageSender.java:46)
    at net.bounceme.dur.nntp.MessageSender.<init>(MessageSender.java:30)
    at net.bounceme.dur.nntp.ArticleReader.<init>(ArticleReader.java:28)
    at net.bounceme.dur.nntp.Driver.<init>(Driver.java:13)
    at net.bounceme.dur.nntp.Driver.main(Driver.java:17)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:321)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:237)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1928)
    ... 8 more

BUILD SUCCESSFUL (total time: 3 seconds) 
```

相关代码：

```
package net.bounceme.dur.nntp;

import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class MessageSender {

    private final static Logger LOG = Logger.getLogger(MessageSender.class.getName());
    private String header;
    private String body;
    private Properties p;
    private Session session;
    private MimeMessage message;

    private MessageSender() {
    }

    public MessageSender(Properties p, String... s) throws Exception {
        header = s[0];
        body = s[1];
        this.p = p;
        populate();
    }

    private void populate() throws Exception {
        String lines[] = header.split("\\n");
        session = Session.getDefaultInstance(p, null);
        message = new MimeMessage(session);
        LOG.fine("\n\n\n\nnew message************\n\n\n\n");

        for (String s : lines) {
            message.addHeaderLine(s);
        }
        message.setContent(message, body);
        String recipient = p.getProperty("recipient");
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(recipient));
        send();
    }

    private void send() {
        try {
            String protocol = p.getProperty("protocol");
            String host = p.getProperty("host");
            int port = Integer.valueOf(p.getProperty("port"));
            String username = p.getProperty("username");
            String password = p.getProperty("password");
            Transport transport = session.getTransport(protocol);
            transport.connect(host, port, username, password);
            transport.sendMessage(message, message.getAllRecipients());
        } catch (MessagingException  ex) {
            LOG.log(Level.SEVERE, "{0}", ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:19:48.483

我不是 Java-Mail 方面的专家，但`ConnectException: connection refused`通常在指定端口上没有运行服务时发生。

# java - 动态硬币变化算法（最佳结果）

> ID：15039833
> 
> 赞同：1
> 
> 时间：2013-02-23T11:10:42.527
> 
> 标签：java, algorithm, data-structures, dynamic-programming

我已经获得了关于动态编程的这部分代码（它找到了硬币变化的最佳组合。例如，如果我们有两个硬币，价值 3 和 4 --> {3,4}; 以及我们想要制作的金额更改例如 sum=11，答案是我们总共需要 3 个硬币（2 个价值 = 4 的硬币和 1 个价值 = 3 的硬币）。下面的代码运行良好，但不完全符合我的要求。

我我试图对下面的代码进行逆向工程，以便提供更清晰的答案，如下所示：

```
Total coins:3 , #of Coins with value "3" = 1, #of Coins with value "4" = 2 
```

可以从这个数组 minimum[sum] 中找到给定数量的总硬币数。但是我试图获得的其余信息（哪个硬币是什么价值）似乎几乎不可能找到。同样从数组 coin[sum][0] 我只能找到最后一个 coin used ，在这个例子中是 3 。

```
Inputs: sum=11 ,int[] valueCoins = new int[]{3,4}; 
Output:
1 10011 0(0)
2 10011 0(0)
3 1 3(0)
4 1 4(0)
5 10011 0(0)
6 2 3(3)
7 2 3(4)
8 2 4(4)
9 3 3(6)
10 3 3(7)
11 3 3(8) 
```

正如你所看到的，它检查了从 1 到 11 的所有内容，但当它到达 11 时，它存储了正确数量的硬币 (3) 和最后使用的硬币 (3)。

```
public class MinimumCoin {

    public static void main(String args[]){

        int[] valueCoins = new int[]{3,4};
        int sum = 11;
        int[] minimum = new int[sum+1];
        int[][] coins = new int[sum+1][2];

        /* initializing the minimum of every sum to infinity */
        for(int i = 1; i < minimum.length; i++){
            minimum[i] = sum + 10000;
        }
        /* initializing that for minumum sum of zero, 0 coin is required */
        minimum[0] = 0;

        for(int i = 1; i <= sum; i++){
            for(int j = 0; j <valueCoins.length; j++){
                if(valueCoins[j] == i){
                    minimum[i] = 1;
                    coins[i][0] = i;
                    coins[i][1] = 0;
                }
                else if((valueCoins[j] < i) && (((minimum[i-valueCoins[j]]) + 1) < minimum[i])){

                    minimum[i] = (minimum[i-valueCoins[j]]) + 1;
                    coins[i][0] = valueCoins[j];
                    coins[i][1] = (i-valueCoins[j]);
                }
            }
        }

        for(int k = 1; k < minimum.length; k++){
            System.out.println( k + " " + minimum[k] + " " + coins[k][0] +"("+ coins[k][1] +")");
        }
    }
} 
```

感谢您的任何意见！

〜问候，S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:13:08.460

问题是其中的值是硬币的价值，而不是`coins`计数**。**`coins`：

```
0 0 0 3 0 0 3 3 4 3 3 3 
0 0 0 0 4 0 3 4 4 6 7 8 
```

所以你需要重建计数：

```
for(int k = 1; k < minimum.length; k++)
{
   int count1 = 0, count2 = 0, pos = k;
   if (coins[pos][1] > 0)
      while (true)
      {
         if (coins[pos][0] == 3) count1++;
         if (coins[pos][0] == 4) count2++;
         if (coins[pos][1] == 3) count1++;
         if (coins[pos][1] == 4) count2++;
         if (coins[pos][1] < 5) // stop when 0/3/4
            break;
         pos = coins[pos][1];
      }
   System.out.println(k + " " + minimum[k] + " " +
                      count1 + " of coin 3, " + count2 + " of coin 4");
} 
```

这些也是解决问题的选项：

*   每个硬币出现的次数都有行。如果您有 2 个硬币，每个硬币可以出现 5 次，那么您将有 5x2 = 10 行。

*   有如下行：

    *   第 1 行 = 硬币 1 的 1
    *   第 2 行 = 硬币 2 的 1
    *   第 3 行 = 硬币 1 的 2
    *   第 4 行 = 硬币 2 的 2
    *   第 5 行 = 硬币 1 的 4
    *   第 6 行 = 硬币 2 的 4
    *   第 7 行 = 硬币 1 的第 8 行
    *   第 8 行 = 硬币 2 的 8
    *   ...

后者看起来更复杂但更受欢迎，因为更多硬币的行数会少得多。

# javascript - AngularJS，这种使用服务的方式好吗？

> ID：15039837
> 
> 赞同：28
> 
> 时间：2013-02-23T11:10:50.583
> 
> 标签：javascript, angularjs, angularjs-scope, angularjs-service

我有这个 HTML：

```
<p>Hello {{name}}</p> 
```

控制器是：

```
function myCtrl(scope, service) {
    scope.name = service.getUsername(); // service.getUsername() return "World!"
}
myCtrl.$inject = ['$scope', 'originalService']; 
```

该服务工作正常，所以我不在这里粘贴代码......在这种情况下，结果是“ **Hello world！** ”我以这种方式更改了 HTML：

```
<p>Hello {{service.getUsername()}}</p> 
```

但这不起作用。

我改变了控制器：

```
function myCtrl(scope, service) {
    scope.ser = service;
}
myCtrl.$inject = ['$scope', 'originalService']; 
```

然后是 HTML

```
<p>Hello {{ser.getUsername();}}</p> 
```

**这行得通！**

所以我的问题是：

**这是直接在 HTML 中使用服务功能的唯一方法，还是我遗漏了什么？**

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-23T11:39:31.543

**AngularJS 模板只能调用作用域上可用的函数**。所以，无论你采取什么方法，你都需要在一个范围内拥有你的功能。

如果您希望您的服务的功能可以直接从模板调用，您有几个选项：

***您尝试过的那个 - 也就是说，在一个范围内公开整个服务***：

```
$scope.service = service; 
```

然后在模板中：

```
<p>Hello {{service.getUsername();}}</p> 
```

这是控制器中的单行代码，使所有服务方法在作用域上可用，从而对模板可用。

***一一暴露方法***

精确控制暴露的内容：

```
$scope.getUsername = service.getUsername; 
```

然后在模板中：

```
<p>Hello {{getUsername();}}</p> 
```

这需要更多的工作暴露方法，但可以让您对暴露的内容进行细粒度控制。

***公开代理方法***：

```
$scope.getMyUsername = function() {
   //pre/post processing if needed 
   return service.getUsername();
}; 
```

您可以使用这些方法中的任何一种，也可以混合使用它们，但**归根结底，函数必须以作用域结束**（直接或通过作用域上暴露的另一个对象）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-16T12:27:39.757

Another way to do it:

***Expose the service on $rootScope***:

```
$rootScope.service = service; 
```

and then in a template:

```
<p>Hello {{service.getUsername();}}</p> 
```

You can do this on app.run, and you will get the service in all the views of your app. You could use this method for Authentication services.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T19:03:47.880

在 $scope 中公开您的服务的另一种方法是向您的服务方法/数据对象添加一个函数指针。

```
scope.serviceData = service.data;
// Or
scope.getServiceData = service.getData; 
```

在您的视图中，您可以使用括号来调用它。

```
<input ng-model="serviceData().key" />
// Or
<input ng-model="getServiceData().key" />
// Or
{{getServiceData().key}} 
```

我个人喜欢这种方法，我目前正在使用它以使多个视图与相同的数据保持同步。它确实带来了一些问题，尽管如此处所述： [AngularJS。关于来自服务的正确双向数据绑定的最佳实践](https://stackoverflow.com/questions/18312721/angularjs-best-practice-concerning-proper-two-way-data-binding-from-a-service)

至于暴露大量数据，我目前正在尝试做这样的事情。

```
// Within your view.
{{getServiceDataByKey('key')}}

// In your controller.
scope.getServiceDataByKey = service.getServiceDataByKey;

// In your service.
getServiceDataByKey : function (key) {
   return dataObject[key];
} 
```

我这样做的原因是我们希望保持控制器尽可能干净，并将所有数据集中在一个地方。此外，服务中的大多数数据都应该公开。

# php - Plupload 仅上传每秒一次的文件

> ID：15039843
> 
> 赞同：3
> 
> 时间：2013-02-23T11:11:29.270
> 
> 标签：php, jquery, wordpress, plupload

我正在为 Wordpress 开发图片库插件，并且正在尝试为[Plupload](http://www.plupload.com)启用拖放。

我不确定出了什么问题，但是`upload.php`仅当我将第二个文件放入放置区域然后`upload.php`调用两次时才调用我的文件。

有没有其他人经历过这个？任何帮助是极大的赞赏。

**更新**

* * *

我发现为什么`upload.php`直到添加第二个文件才被解雇。

如果我删除并将其放入 Plupload 启动中`up.start();`：`uploader.bind('FilesAdded'...`

```
var uploader = new plupload.Uploader({
    (...)
    init : {
      FilesAdded: function(up, files) {
        up.start();
      }
    }
    (...)
}); 
```

但是，这使我能够在添加文件之前执行`drop_area_visual_feedback(up)`功能。即使我把这个函数放在`uploader.bind('Init'...` `up.start()`被触发并因此触发`upload.php`。

关于如何解决这个问题的任何建议？

* * *

这是我的测试代码：

```
// JS Code

var sim_gal_data = JSON.parse(JSON.stringify(sim_gal_data_arr));

var uploader = new plupload.Uploader({
    runtimes : 'html5,silverlight,flash,browserplus,gears,html4',
    drop_element : 'drag-drop-container',
    browse_button : 'plupload-file-browser-button',
    container : 'media-container',
    max_file_size : sim_gal_data['max_file_size'],
    url : sim_gal_data['upload_url'],
    flash_swf_url : sim_gal_data['plupload_url']+'plupload.flash.swf',
    silverlight_xap_url : sim_gal_data['plupload_url']+'plupload.silverlight.xap',
    multi_selection : true
});

uploader.bind('FilesAdded', function(up, files) {
  var debug = jQuery('#debug').html();
  debug += up.files.length + ', ';
  jQuery('#debug').html(debug);
  up.refresh();
  up.start();
});

uploader.init();

// PHP Code

$sim_gal_data_arr = Array(
  'upload_url' => SIMPLE_GALLERY_PLUGIN_URL.'upload.php',
  'plupload_url' => includes_url('js/plupload/'),
  'max_file_size' =>  wp_max_upload_size() . 'b'
);

?>
<script type="text/javascript">
    var sim_gal_data_arr = <?php echo json_encode($sim_gal_data_arr); ?>;
</script>
<?php

<div id="drag-drop-container">
  <div class="inside-container">
    <p class="drag-drop-info">Drop files here</p> <p>or</p>
    <p><input type="button" disabled="disabled"  class="button" value="Select Files" id="plupload-file-browser-button" /></p>
  </div>
</div>

<p><label>Debug data:</label><div id="debug"></div></p>

<div id="media-container" class=""></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:06:35.183

我尝试了您的 HTML，但我一直收到错误消息`Uncaught TypeError: Cannot read property 'currentStyle' of null`

我在这里有工作的 HTML/JS，上传后它会显示图像。我重命名了一些 div 以确保连字符的名称不会导致问题。

JS：

```
<script type="text/javascript">
    $(function() {

        var sim_gal_data = JSON.parse(JSON.stringify(sim_gal_data_arr));

        // this will be used for displaying uploaded images
        var public_url = 'http://www.path.to/your/upload/url/';

        var uploader = new plupload.Uploader({
            runtimes : 'html5,silverlight,flash,browserplus,gears,html4',
            drop_element : 'dropbox',
            browse_button : 'pickfiles',
            container : 'container',
            max_file_size : sim_gal_data['max_file_size'],
            url : sim_gal_data['upload_url'],
            flash_swf_url : sim_gal_data['plupload_url']+'plupload.flash.swf',
            silverlight_xap_url :  sim_gal_data['plupload_url']+'plupload.silverlight.xap',
            multi_selection : true
        });

        uploader.bind('FilesAdded', function(up, files) {
            $.each(files, function(i, file) {
                $('#debug').prepend('Uploading ' + file.name + ' (' + file.size + ' bytes)');
            });
            up.refresh();
            up.start();
        });

        uploader.bind('FileUploaded', function(up, file, info) {
            $('#uploaded').prepend('<p><a href="' + public_url + file.name + '" target="_blank"><img src="' + public_url + file.name + '" width="100"/></a></p>');
        });

        uploader.init();

    });
</script> 
```

HTML：

```
<div id="dropbox">
  <div id="container">
    <p class="drag-drop-info">Drop files here</p> <p>or</p>
    <p><input type="button" disabled="disabled"  class="button" value="Select Files" id="pickfiles" /></p>
  </div>
</div>

<p><label>Debug data:</label><div id="debug"></div></p>

<div id="uploaded"></div> 
```

删除单个文件，然后等待您期望它上传的时间。不要以为它不工作而丢弃另一个文件，所有丢弃的文件都会出现在上传的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:41:09.177

当您的上传器仍在上传一些文件时，您不应尝试回收它以进行新的上传。我想你应该做的是“按需”实例化新的上传组件并启动它们。如下所示（更新 js 和 php 中的 html 标记）

抱歉有任何语法错误，现在无法检查...希望这会有所帮助

```
// JS Code

var InitUploader = function(i){
       var sim_gal_data = JSON.parse(JSON.stringify(sim_gal_data_arr));

    // create DOM  elements for uploader i
    $('#uploaders-container').append($('<div id="drag-drop-container'+i+'">
                   <div class="inside-container">
    <p class="drag-drop-info">Drop files here</p> <p>or</p>
    <p><input type="button" disabled="disabled"  class="button" value="Select Files" id="plupload-file-browser-button'+i+'" /></p>
  </div>
</div>
<div id="media-container'+i+'" class=""></div>
'));

    // create uploader i
    var uploader = new plupload.Uploader({
       runtimes : 'html5,silverlight,flash,browserplus,gears,html4',
       drop_element : 'drag-drop-container'+i,
       browse_button : 'plupload-file-browser-button'+i,
       container : 'media-container'+i,
       max_file_size : sim_gal_data['max_file_size'],
       url : sim_gal_data['upload_url'],
       flash_swf_url : sim_gal_data['plupload_url']+'plupload.flash.swf',
       silverlight_xap_url : sim_gal_data['plupload_url']+'plupload.silverlight.xap',
       multi_selection : true
      });

    uploader.bind('FilesAdded', (function(j){return function(up, files) {
       up.start();
       $('#drag-drop-container'+j).hide(); // only the new uploader drag-drop zone should be visible
       InitUploader(j+1);           
    };})(i));

    uploader.bind('FileUploaded',function(upl,file,response){
      // do some response processing, at your will
      });

    uploader.bind('UploadComplete', function(upl, files){
       // ... do some processing
       upl.destroy(); // for example. Should destroy the corresponding DOM elements too (drag-drop-container+'i' and possibly 'media-container'+i)
    });

   uploader.init();
}

$(document).ready(function(){InitUploader(0);});

// PHP Code

$sim_gal_data_arr = Array(
  'upload_url' => SIMPLE_GALLERY_PLUGIN_URL.'upload.php',
  'plupload_url' => includes_url('js/plupload/'),
  'max_file_size' =>  wp_max_upload_size() . 'b'
);

?>
<script type="text/javascript">
    var sim_gal_data_arr = <?php echo json_encode($sim_gal_data_arr); ?>;
</script>
<?php

<div id="uploaders-container">
</div>

<p><label>Debug data:</label><div id="debug"></div></p> 
```

# android - Camera Intent 创建空图片

> ID：15039845
> 
> 赞同：3
> 
> 时间：2013-02-23T11:11:34.233
> 
> 标签：android, android-intent, camera

我正在尝试使用相机 Intent 拍照，但写入存储的图片是空的（大小：0 字节）。有人可以告诉我我的代码有什么问题吗？

```
 public void onClick(View arg0) {
    switch (arg0.getId()) {     
    case R.id.btnImageCapture:
     preinsertedUri = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new ContentValues());
      Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);         
       startActivityForResult(intent, OPEN_CAMERA);
         break;
       }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     switch(requestCode){
     case OPEN_CAMERA:
         if (resultCode != 0 && data != null) {
                 Uri imageUri = null;
                 if (data != null){
                       imageUri = data.getData();
                    }
                    if(imageUri == null && preinsertedUri != null){
                     imageUri = preinsertedUri;
                    }
             String[] filePathColumn = { MediaStore.Images.Media.DATA };
              Cursor cursor = getContentResolver().query(imageUri, filePathColumn, null, null, null);
               int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                 filePath = cursor.getString(columnIndex);
                  break;
          } 
       }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:23:53.037

**试试这个代码它对我有用**

```
 case OPEN_CAMERA:
            if (resultCode == RESULT_OK) {
             Bitmap photo = (Bitmap) data.getExtras().get("data");
             saveBitmap(photo, pathToStrore);
                                     }
        break;

    public void saveBitmap(Bitmap photo, String path) {
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);

            // you can create a new file name "test.jpg" in sdcard folder.
            File f = new File(path);
            try {
                f.createNewFile();
                FileOutputStream fo = new FileOutputStream(f);
                fo.write(bytes.toByteArray());

                // remember close de FileOutput
                fo.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // write the bytes in file

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:32:33.200

试试我发布的这段代码：[https](https://stackoverflow.com/a/14965840/1291514) ://stackoverflow.com/a/14965840/1291514 。它还有一个方法可以将图片保存到 onActivityResult 中的另一个位置。

# c++ - 了解 C/C++ 中的无括号 for/if 组合

> ID：15039849
> 
> 赞同：2
> 
> 时间：2013-02-23T11:11:57.627
> 
> 标签：c++, c, if-statement, for-loop

我有以下代码段：

```
for ( SID_AND_ATTRIBUTES* it = ptg->Groups; end != it; ++it )
    if ( EqualSid( it->Sid, pAdminSid ) )
        break;

bIsAdmin = end != it; 
```

令人恼火的是，当在 VS 中逐步调试时，每次 for 迭代都会执行最后一行。我期待上面的代码段的行为与以下内容相同：

```
for ( SID_AND_ATTRIBUTES* it = ptg->Groups; end != it; ++it ) {
    if ( EqualSid( it->Sid, pAdminSid ) )
        break;
}

bIsAdmin = end != it; 
```

有人可以解释为什么不是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:29:54.490

当“只有一个分号”时，不需要大括号。尽管我是喜欢在我的代码中添加额外大括号的人之一，以防万一。从来不疼，真的……

至于步进行为，我在 Visual Studio 和 Eclipse 调试器中也看到了这一点。我认为它反映了“循环结束必须在某行” - 所以如果没有结束大括号，循环中的最后一行包含“循环结束”步骤。确实很烦人。

# java - boxlayout中是否有“从上到下”和“从右到左”？

> ID：15039850
> 
> 赞同：0
> 
> 时间：2013-02-23T11:12:05.957
> 
> 标签：java, swing, awt, layout-manager, boxlayout

我有一些表格应该在框架上从右到左和从上到下绘制。现在我使用绝对布局和协调工作。是否有任何`BoxLayout`或任何其他 Java 布局可以做到这一点？我应该提到表的数量是动态的。

我的第二个问题是如何将这些表格停靠在框架上？我的意思是当框架调整大小时，表格保持它们在屏幕上的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:37:12.567

大多数布局管理器都会尊重组件的方向：

```
panel.setComponentOrientation( ComponentOrientation.RIGHT_TO_LEFT );
panel.add(...); 
```

或者您可以随时将组件添加到容器的开头

```
panel.add(component1, 0);
panel.add(component2, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:47:25.163

如果要将事物排列到表格中，则可能需要使用网格。网格中的所有元素都应具有相同的大小。

要垂直排列某些项目，每行的大小可能会有所不同，请尝试以下操作：

```
static JPanel buildPanel() {
    JPanel vPanel = new JPanel();
    BoxLayout layout = new BoxLayout(vPanel, BoxLayout.Y_AXIS);
    vPanel.setLayout(layout);
    JPanel[] rowPanels = new JPanel[5];
    int counter=1;
    for (int i = 0; i < rowPanels.length; i++) {
        rowPanels[i] = new JPanel();
        rowPanels[i].setLayout(new FlowLayout(FlowLayout.LEFT, 2, 2));
        rowPanels[i].add(new JButton("button " + counter++));
        rowPanels[i].add(new JButton("Your button " + counter++));
        rowPanels[i].add(new JButton("Shabutton"));
        vPanel.add(rowPanels[i]);
    }
    return vPanel;
}

public static void main(String[] args) {
    JFrame gridFrame = new JFrame();
    gridFrame.add(buildPanel() );
    gridFrame.pack();
    gridFrame.setVisible(true);
} 
```

您可以使用以下方法阻止整个 JFrame 调整大小`gridFrame.setResizable(false);` 您可以使用如下方法调用调整窗口大小时防止在行之间添加 sapce：

```
rowPanels[i].setMaximumSize(new Dimentsion(400,32)); 
```

# java - 在java中找不到符号

> ID：15039852
> 
> 赞同：0
> 
> 时间：2013-02-23T11:12:17.657
> 
> 标签：java, find, symbols

这是在**DFM.java**

这部分在主类中

```
Algebra.vect dx = new Algebra.vect(new double[] {2.0,3.0,4.0});
Algebra.matrix eij = new Algebra.matrix();
System.out.println(eij.get(1,1));
dx.set(1,4.0);
System.out.println(dx.get(1)); 
```

这是在**Algebra.java**

```
class Algebra {
public static class vect
{
    double[] v = new double[3];
    public vect()
    {
        v[0]=v[1]=v[2]=0;
    }
    public vect(double[] v)
    {
        this.v=v;
    }
    int tamanho()
    {
        return v.length;
    }
    double get(int i)
    {
        return v[i];
    }
    void set(double[] v)
    {
        this.v=v;
    }
    void set(int i, double n)
    {
        v[i]=n;
    }
    void print()
    {
        for(int i=0; i < v.length; i = i + 1)
            System.out.print(v[i] + " ");
        System.out.print("\n");
    }
}

public static class operacoes
{
    double prodInt(vect v1, vect v2)
    {
        return v1.get(0)*v2.get(0)+v1.get(1)*v2.get(1)+v1.get(2)*v2.get(2);
    }
    double[] somaVV(vect v1, vect v2)
    {
        return new double[] {v1.get(0)+v2.get(0), v1.get(1)+v2.get(1), v1.get(2)+v2.get(2) };
    }
    double[] prodMV(matrix m, vect v)
    {                    
        double[] Soma = new double[3];
        Soma[0]=Soma[1]=Soma[2]=0;
        for(int i=0;i< v.tamanho();i=i+1)
        {
            for(int j=0;i< v.tamanho();j=j+1)
            {
                Soma[i]=m[i][j]*v[j];
            }
        }
        return Soma;
    }

}

public static class matrix
{
    double[][] m = new double[3][3];
    public matrix()
    {
        for(int i=0;i< v.tamanho();i=i+1)
        {
            for(int j=0;i< v.tamanho();j=j+1)
            {
                m[i][j]=0;
            }
        }
    }
    public matrix(double[][] m )
    {
        this.m=m;
    }
    double get(int i,int j)
    {
        return m[i][j];
    }
    void set(double [][] m)
    {
        this.m=m;
    }
    void set(int i,int j, double n)
    {
        m[i][j]=n;
    }
    void print()
    {
        for(int i=0;i< v.tamanho();i=i+1)
        {
            for(int j=0;i< v.tamanho();j=j+1)
            {
                System.out.print(m[i][j] + " ");
            }
            System.out.print("\n");
        }
        System.out.print("\n");
    }
} 
```

**错误**

```
DFM.java:29: error: cannot find symbol
System.out.println(eij.get(1,1));
                      ^
symbol:   method get(int,int)
location: variable eij of type matrix
1 error 
```

但是当我在评论中调用 eij 方法时

```
dx.set(1,4.0);
System.out.println(dx.get(1)); 
```

这部分 dx 属于 vect 类，运行良好，代码类似于矩阵类

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:51:23.620

看起来您的`matrix`-class 的`get`-method 的签名缺少修饰符`public`：

```
 double get(int i,int j) 
```

所以它具有“默认”（包）可见性。将其更改为

```
 public double get(int i,int j) 
```

它应该可以工作。

# linux - 如何在不覆盖的情况下将 2 个文件夹与所有子文件夹同步

> ID：15039853
> 
> 赞同：1
> 
> 时间：2013-02-23T11:12:19.940
> 
> 标签：linux, copy, directory, subdirectory

我在linux（Ubuntu 12.04）中。我有 2 个文件夹，文件夹 A 和文件夹 B。（都有相同的子文件夹）。我想使用单个终端命令从文件夹 B（以及所有子文件夹）中复制不在文件夹 A 中的所有文件，并将它们粘贴到相应子文件夹中的文件夹 A 中。无需覆盖。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:18:59.727

这应该可以解决问题：

```
cp -r -n ./B/* ./A 
```

# java - 在 Java EE 中在后台运行服务

> ID：15039855
> 
> 赞同：1
> 
> 时间：2013-02-23T11:12:27.233
> 
> 标签：java, rest, jakarta-ee, notifications, jersey

**整体情况：**我们有一个与 Jersey 合作的安静的 Web 服务，现在我们希望它在指定的时间发送电子邮件通知，包括指定的日期和指定的事件之后。

**问题：**我们提出的第一个想法和设计是设计一个通知中心，负责在我们需要时发送这些通知电子邮件。但是，我们必须编写某种“控制器”来监视日期和事件（基于数据库），以确定所需通知的时间和详细信息，并将其交给通知中心发送。

**问题：**现在我们的问题是如何编写这样一个“控制器”类，以及如何让它始终在后台运行。

# c# - EF5、SQL Server、经度和纬度

> ID：15039856
> 
> 赞同：12
> 
> 时间：2013-02-23T11:12:45.557
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, latitude-longitude

我发现在 SQL Server 中存储 lat 和 long 的最佳类型是十进制 (9,6) （参考。[在 SQL 数据库中存储纬度和经度数据时使用什么数据类型？](https://stackoverflow.com/questions/1196415/what-datatype-to-use-when-storing-latitude-and-longitude-data-in-sql-databases)）所以我做了

```
AddColumn("dbo.Table", "Latitude", c => c.Decimal(nullable: false, precision: 9, scale: 6));
AddColumn("dbo.Table", "Longitude", c => c.Decimal(nullable: false, precision: 9, scale: 6)); 
```

SQL 似乎没问题，一切正常，但是当我插入/更新一个值时，即

```
lat = 44.5912853 
```

它是这样保存的：

```
44.590000 
```

我检查了流程，就在更新之前，我的实体包含正确的值，所以我认为与我的代码无关，而是与 EF / SQL 所做的某个回合有关。你有什么想法可以避免这种情况吗？

**更新**

```
update [dbo].[Breweries]
set [RankId] = @0, 
[Name] = @1, 
[Foundation] = null, 
[DirectSale] = @2, 
[OnlineSale] = @3, 
[StreetAddress] = @4, 
[StreetAddress1] = null, 
[ZIP] = @5, 
[City] = @6, 
[Province] = @7, 
[CountryCode] = @8, 
[Latitude] = @9, 
[Longitude] = @10, 
[PIVA] = null, 
[CodFiscale] = null
where ([BreweryId] = @11) 
```

![在此处输入图像描述](../Images/14c237d89699d15e73d4c3e4f9f2b4bf.png)

**POCO 实体**

```
[Table("Breweries")]
public class Brewery : ABrewery 
{
  ....
  public decimal Latitude { get; set; }
  public decimal Longitude { get; set; }
} 
```

**SQL 探查器**

```
exec sp_executesql N'update [dbo].[Breweries]
set [RankId] = @0, [Name] = @1, [Foundation] = null, [DirectSale] = @2, [OnlineSale] = @3, [StreetAddress] = @4, [StreetAddress1] = null, [ZIP] = @5, [City] = @6, [Province] = @7, [CountryCode] = @8, [Latitude] = @9, [Longitude] = @10, [PIVA] = null, [CodFiscale] = null
where ([BreweryId] = @11)
',N'@0 int,@1 nvarchar(128),@2 bit,@3 bit,@4 nvarchar(256),@5 varchar(16),@6 nvarchar(64),@7 nvarchar(64),@8 nvarchar(128),@9 decimal(18,2),@10 decimal(18,2),@11 int',@0=2,@1=N'Davide',@2=0,@3=0,@4=N'Via Moscardini, 24',@5='zip',@6=N'city',@7=N'province',@8=N'ITA',

@9=44.59,@10=11.05,@11=2 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T11:39:04.627

显然[这个家伙有完全相同的问题](http://www.gavindraper.co.uk/2011/07/11/entity-framework-code-first-rounding-decimal-model-properties/)并因此解决了它：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Activity>().Property(a => a.Latitude).HasPrecision(18, 9);
    modelBuilder.Entity<Activity>().Property(a => a.Longitude).HasPrecision(18, 9);
} 
```

尽管您可能希望查看在 SQL Server 2008 及更高版本中使用[空间数据类型](http://msdn.microsoft.com/en-us/library/bb933790.aspx)（尤其是）。[`geography`](http://msdn.microsoft.com/en-us/library/cc280766.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-03T22:20:16.443

您可以使用**DbGeography**类型来存储纬度和经度。

```
using System.Data.Entity.Spatial;

public class Test
{
    public DbGeography Location { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:22:58.800

两件事情：

1.  我刚刚购买了一个邮政编码数据库，它将所有纬度和经度值存储为十进制（12,6）数据类型。我不认为这会从根本上改变你的结果。

2.  我会检查发送到您的 SQL Server 的确切 SQL。然后，您可以检查四舍五入的位置。您可以通过从 EF 获取输出或使用 SQL Profiler 来检查正在发送的 SQL。我的猜测是它发生在您的 C# 代码中。

此外，查看表架构和域实体可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:32:32.353

使用这些字段的数据类型为 Float：

```
 Latitude float,
 Longitude float 
```

# mysql - mysql 获取缺失值

> ID：15039857
> 
> 赞同：0
> 
> 时间：2013-02-23T11:12:50.173
> 
> 标签：mysql, insert, left-join

我知道这是一个普通的问题，但我需要更多的东西。我有一个关于获取未插入到一个表中的值的问题。

好的，这是我的表：

1.  名称：重要日期；列：id，日期
2.  名称：插入；cols：id，日期，employee_id

我的问题：如何获取每个员工的缺失值？假设我需要 id=213 的员工缺少插入？

到目前为止，我写了这个，但它还没有工作，好像一天中有一个工人的插入，它消除了所有工人的一天。

代码：

```
SELECT i.date 
FROM importantDates i 
   LEFT OUTER JOIN inserts s 
        ON i.date = DATE(s.date) 
WHERE i.date BETWEEN '2013-1-1' 
    AND '2013-2-23' 
   AND s.date IS NULL; 
```

现在如何添加对employee_id 的检查？

谢谢大家，如果你还需要什么，我随时都可以。

编辑：
这是示例：
员工：
1\. sam
2\. mike
3\. joe

importantDate：
1\. 2013-01-01
2\. 2013-01-02
3\. ...
40\. 2013-02-23

插入：
1\. 2013 -02-01, 1
2\. 2013-02-01, 2
3\. 2013-02-01, 3
4\. 2013-02-02, 3
5\. 2013-02-03, 1
6\. 2013-02-03, 2
7\. 2013-01-12, 1

所以，当我运行查询时，我应该得到所有“缺失”的插入。对于每个员工，当插入缺失时，我应该获取员工的日期和 ID。很多数据，但重要的是要知道哪些没有插入，哪些是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:22:21.867

而不是 LEFT OUTER JOIN 使用简单的 LEFT JOIN 并正确提供日期

```
SELECT
  i.date
FROM importantDates i
  LEFT JOIN inserts s
    ON i.date = DATE(s.date)
WHERE i.date BETWEEN '2013-01-01'
    AND '2013-02-23'
    AND s.date IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:30:58.677

我不太确定我是否理解您想要实现的目标，但是如果您想获取`table_a`不在其中的每一行，`table_b`您可以这样做：

```
SELECT * FROM table_a 
WHERE table_a.col NOT IN 
( 
    SELECT col FROM table_b
) 
```

所以（如果我理解正确的话）在你的情况下：

```
SELECT i.date FROM importantDates i 
WHERE i.date NOT IN 
(
    SELECT date FROM inserts WHERE employe_id = 213
) 
AND i.date BETWEEN '2013-01-01' AND '2013-02-23'; 
```

有关`IN`-clause 的更多文档，请参阅[mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/any-in-some-subqueries.html "mysql - 文档")

**更新：**

要获得相应的员工，您***可以***将语句更改为：

```
SELECT i.date, e.* FROM importantDates i 
JOIN employees e
WHERE i.date NOT IN 
(
    SELECT s.date FROM inserts s WHERE s.employe_id = e.employe_id
) 
AND i.date BETWEEN '2013-01-01' AND '2013-02-23'; 
```

但是，这是***不***推荐的，因为子查询与主查询[相关](http://en.wikipedia.org/wiki/Correlated_subquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:31:00.830

假设您有一张`employee`桌子，请尝试：

```
select sq.* from
(select e.employe_id, i.date
 FROM importantDates i
 CROSS JOIN employee e
 WHERE i.date BETWEEN '2013-1-1' AND '2013-2-23') sq
LEFT OUTER JOIN inserts s 
  ON sq.date = DATE(s.date) and sq.employe_id = s.employe_id
WHERE s.date IS NULL; 
```

如果您没有单独的表，则可以通过将上述查询更改为`employee`来模拟一个：`employee`

```
(select distinct employe_id from inserts) as e 
```

# c++ - C++ 使用带有字符串的标准算法、带有 isdigit 的 count_if、函数转换

> ID：15039858
> 
> 赞同：8
> 
> 时间：2013-02-23T11:13:07.823
> 
> 标签：c++, string, algorithm, function, casting

我想以最短的代码方式计算字符串中的所有数字。我试过这样：

```
#include <string>
#include <algorithm>

unsigned countNumbers(const std::string s) {
    return count_if(s.begin(), s.end(), isdigit);
} 
```

错误信息是：

```
a.cc: In function ‘unsigned int countNumbers(std::string)’:
a.cc:5:45: error: no matching function for call to ‘count_if(std::basic_string<char>::const_iterator, std::basic_string<char>::const_iterator, <unresolved overloaded function type>)’
a.cc:5:45: note: candidate is:
/usr/include/c++/4.6/bits/stl_algo.h:4607:5: note: template<class _IIter, class _Predicate> typename std::iterator_traits<_InputIterator>::difference_type std::count_if(_IIter, _IIter, _Predicate) 
```

我知道 count_if() 想要这样的功能： bool (*f)(char); 作为第三个参数，所以我尝试强制转换函数：

```
unsigned countNumbers(const std::string s) {
    return count_if(s.begin(), s.end(), reinterpret_cast<bool (*)( char )>(isdigit));
} 
```

错误信息是：

```
a.cc: In function ‘unsigned int countNumbers(std::string)’:
a.cc:5:80: error: overloaded function with no contextual type information 
```

我也尝试了更长的版本，它给出了相同的编译错误：

```
unsigned countNumbers(const std::string s) {
    typedef bool ( * f_ptr )( char );
    f_ptr ptr = reinterpret_cast<f_ptr>(isdigit);
    return count_if(s.begin(), s.end(), ptr);
} 
```

我想避免的解决方案是创建一个作为适配器的函数：

```
#include <string>
#include <algorithm>

bool is_digit(char c) {
    return isdigit(c);
}

unsigned countNumbers(const std::string s) {
    return count_if(s.begin(), s.end(), is_digit);
} 
```

**我的问题是如何在 std::algorithm 的函数中使用函数 int(*f)(int) 而不创建适配器函数和不使用 lambda 表达式？**

当我知道如何解决问题时，我还有更多问题可以解决，例如：

*   检查字符串是否可打印：find_if_not(s.begin(), s.end(), isprint)
*   检查字符串是否包含“,.!?...”：find_if (s.begin(), s.end(), ispunct) 等等...

我只是想知道如何在标准 C++ 中拥有更多的字符串可能性，这要归功于我在互联网上搜索了很长时间的 std::algorithms，我发现了[类似的问题](https://stackoverflow.com/questions/13262444/finding-an-alphanumeric-character-in-a-string-using-find-if-and-isalnum)，但我没有找到解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T11:22:37.663

您可以使用静态强制转换来解析该函数​​。或者，如果这是您想要做的很多事情，您可以使用模板来解决它：

```
#include <string>
#include <cctype>
#include <algorithm>

unsigned count(const std::string& s) {
  return std::count_if(s.begin(), s.end(), static_cast<int(*)(int)>(std::isdigit));
}

template <int(*Pred)(int)> 
unsigned foo(const std::string& s) {
  return std::count_if(s.begin(), s.end(), Pred);
}

int main() {
  count("");
  foo<std::isdigit>("");
  foo<std::isprint>("");
} 
```

`static_cast`是解决模棱两可的“通常”方式 - 它总是按照您的预期进行，并且可以成为更大表达式的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T11:19:25.143

使用函数指针解析类型：

```
unsigned countNumbers(const std::string s) {
    int (*isdigit)(int) = std::isdigit;
    return count_if(s.begin(), s.end(), isdigit);
} 
```

不要忘记包括`<cctype>`. （[演示](http://ideone.com/Jz9iao)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T03:49:40.340

我发现以下也有效：

```
 #include <ctype.h>
    count_if(s.begin(), s.end(), ::isdigit); //explicitly select the C version of isdigit 
```

但我必须弄清楚它只有在 C 版本被定义为函数而不是宏时才有效

因此，std::isdigit 的 static_cast 可能是平台中最好的可移植解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-22T18:46:04.497

我将提供 2 个其他解决方案来解决歧义`<locale> std::isdigit`

1.  使用 lambda 表达式：

    `std::count_if(s.begin(), s.end(), [](char c){ return std::isdigit(c); })`

或显式转换：

```
std::count_if(s.begin(), s.end(), [](char c){ return std::isdigit(static_cast<int>(c)) != 0; }) 
```

2.  使用显式模板类型（您还需要编写迭代器类型）：

`std::count_if<std::string::const_iterator, int(*)(int)>(s.begin(), s.end(), std::isdigit)`

# android - 以编程方式创建时未显示Android进度条

> ID：15039866
> 
> 赞同：0
> 
> 时间：2013-02-23T11:13:24.683
> 
> 标签：android

我需要在我的应用程序中显示进度条，但如果我运行它将不可见。我以编程方式创建了进度条。请参考下面我的代码，

```
ProgressBar progressBar = new ProgressBar(CusProgressActivity.this,
null, android.R.attr.progressBarStyleSmall);
progressBar.setVisibility(View.VISIBLE);
progressBar.bringToFront(); 
```

上面的代码是试图显示进度条，我不想使用 xml 文件来显示进度条。我不知道我的代码有什么问题，我需要以编程方式显示我的活动中的小进步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:30:57.563

使用布局并将进度条作为视图添加到布局中，如下所示 -

```
 RelativeLayout relativeLayout = new RelativeLayout(this);

    ProgressBar pb = new ProgressBar(this, null, android.R.attr.progressBarStyleHorizontal);

    relativeLayout .addView(pb);
    setContentView(relativeLayout);

    pb.setProgress(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:34:52.243

您必须将视图设置为活动的内容视图，或者使用 ViewGroup.addView 将其添加到视图层次结构中，以将进度条附加到根视图

**public void ViewGroup.addView (View child)** 在 API 级别 1 中添加

添加子视图。如果尚未在子级上设置布局参数，则在子级上设置此 ViewGroup 的默认参数。

注意：不要从 draw(android.graphics.Canvas)、onDraw(android.graphics.Canvas)、dispatchDraw(android.graphics.Canvas) 或任何相关方法中调用此方法。

参数 child 要添加的子视图

**public void Activity.setContentView（视图视图）** - 在 API 级别 1 中添加

将活动内容设置为显式视图。此视图直接放置在活动的视图层次结构中。它本身可以是一个复杂的视图层次结构。调用此方法时，会忽略指定视图的布局参数。默认情况下，视图的宽度和高度都设置为 MATCH_PARENT。要使用您自己的布局参数，请改为调用 setContentView(android.view.View, android.view.ViewGroup.LayoutParams)。参数视图 要显示的所需内容。

# java - 比较两个字符数组并获取字符值并形成一个字符串

> ID：15039867
> 
> 赞同：0
> 
> 时间：2013-02-23T11:13:28.427
> 
> 标签：java, arrays

我在这里有两个具有预定义值的字符数组。我想从两个数组中获得变化。
这是两个数组的预定义值：

```
Character[][] arr1 = new Character[row][column];
arr1[1][0] = 'K';
arr1[1][1] = 'E';
arr1[1][2] = 'P';
arr1[1][3] = 'T';

Character[][] arr2 = new Character[row][column];
arr2[0][1] = 'H';
arr2[1][0] = 'K';
arr2[1][1] = 'E';
arr2[1][2] = 'P';
arr2[1][3] = 'T';
arr2[2][1] = 'L';
arr2[3][1] = 'P'; 
```

使用此代码，我得到了正确的“HLP”更改

```
final Character[][] arr3 = new Character[row][column];

for (int i = 0; i < 4; i++) {
    for (int j = 0; j < 4; j++) {
        if (arr1[i][j] != arr2[i][j]) {
            s = arr2[i][j];
            arr3[i][j] = s;
        }
    }
}

//generate the word from the compared arrays
for (int r = 0; r < 4; r++) {
    for (int c = 0; c < 4; c++) {
        if (arr3[r][c] != null) {
            l = arr3[r][c];
            k = Character.toString(l);
            out = builder.append(k).toString();
        }
    }
} 
```

现在，我想在`H`and之间包含空格`L`并将其包含在我的字符串中。任何人都可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:25:35.513

当数组中的值为空时，您可以附加一个空格。在生成单词的 for 循环中，将 else 语句添加到现有 if 并指定它应该附加一个空格。

# ios - 恢复默认 UITableViewCell backgroundView

> ID：15039868
> 
> 赞同：2
> 
> 时间：2013-02-23T11:13:31.953
> 
> 标签：ios, uitableview

**简而言之**，我需要恢复单元格的默认`backgroundView`值`UITableViewStyleGrouped`。

```
cell.backgroundView = ??; 
```

* * *

**长话短说**：我有一个带有一些单元格的分组表格视图。对于每个单元格，用户需要选择一些值或进行一些输入。之后，他可以通过触摸“下一步”按钮进入下一个 ViewController。

无论如何，为了向用户表明他错过了一些东西，我在单元格周围显示了一个漂亮的红色边框，其中包含错误/丢失的用户输入。我通过`backgroudView`使用这样的自定义图像设置单元格来做到这一点：

```
cell.backgroundView = myErrorIndicatingImageView; 
```

单元格现在看起来像这样（截图，忽略星星和标签） ![在此处输入图像描述](../Images/2b47efa8a8a990f9ce26006cc05e9922.png)

到目前为止一切顺利，这就像一个魅力。但是在用户更正输入后，我想删除我的红色边框背景图像并再次显示原始背景。原始背景如下所示（截图）： ![在此处输入图像描述](../Images/3892f8a2059fbea5c82210b7717f63f6.png)

这似乎是一个问题。

我尝试了几件事

```
// try by setting the background to nil
cell.backgroundView = nil; 
```

这完全消除了背景，我迷失了一个没有背景的单元格。

```
// try it with addSubview and later remove the subview again
[cell.backgroundView addSubview:myErrorIndicatingImageView]; 
```

这没有任何作用。`myErrorIndicatingImageView`是不可见的。连一个`[cell.backgroundView bringSubviewToFront:myErrorIndicatingImageView]`也无济于事。

现在我唯一的解决方案是`UITableViewCell`为每次调用创建一个新的`cellForRowAtIndexPath`. 这有效，但只是糟糕的代码，完全忽略了重用单元的技术。

必须有一个更简单的解决方案......就像

```
cell.backgroundView = [self.tableView getDefaultBackgroundView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:21:20.397

假设您使用自定义表格单元格类执行此操作，请将原始文件保存`backgroundView`在某个 ivar 中，然后应用新背景。当您想要重置背景时，请将背景设置`backgroundView`为原始的已保存背景视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:27:12.270

试试这个怎么样：

```
cell.backgroundView = [[UIView alloc] initWithFrame:cell.backgroundView.frame]; 
```

或者您可以将背景视图设为 a`UIImageView`并设置 2 个有问题的图像并修复

# java - System.setProperty 在 java 中是安全的吗？

> ID：15039869
> 
> 赞同：1
> 
> 时间：2013-02-23T11:13:47.850
> 
> 标签：java, security

在java中我们可以使用一些类之间传递值`System.setProperty`。但是使用`System.getProperties()`我们可以获得所有系统属性。因此，如果我使用任何第三方 API 的手段，他们也可以访问我的属性，并且他们也可以更改。所以`System.setProperty`安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T11:26:50.123

这取决于你所说的安全是什么意思。

1.  好的做法¹将 System Properties 对象视为只读，但您不能依赖 3rd-party 库来执行此操作。

2.  如果您担心“受信任的”第 3 方代码看到或更改您的应用程序的属性，请不要使用系统属性来表示它们。创建您自己的 Properties 对象并将您的属性放在那里。这可能是总体上最简单的方法。

3.  如果您使用沙盒，则可以防止不受信任的代码访问系统属性……前提是您的代码不会将系统属性对象泄漏给不受信任的代码。（访问检查在`System`方法中实现......）

4.  Properties 对象是线程安全的……如果您指的是这种安全性。

* * *

^(1 - 有时需要以编程方式修改系统属性。但是，这样做可能会导致应用程序脆弱。系统属性通常用于在初始化期间配置 JVM 服务。如果由于某种原因类初始化的顺序发生了变化，您可能会发现您的应用程序代码现在设置属性为时已晚。如果可能，最好通过`-D`命令行参数设置属性。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T12:30:04.557

如果您需要担心库的行为，则需要了解和使用安全策略和[SecurityManager](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html)。除其他外，这将允许您限制使用`System.setProperty`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:21:48.377

根据[文档](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

通常，请注意不要覆盖系统属性。

> setProperties 方法更改当前正在运行的应用程序的系统属性集。这些变化不是持久的。也就是说，更改应用程序中的系统属性不会影响将来对该应用程序或任何其他应用程序的 Java 解释器调用。运行时系统每次启动时都会重新初始化系统属性。如果要对系统属性进行持久更改，则应用程序必须在退出之前将值写入某个文件，并在启动时再次读取它们。

您担心某些第三方库可能会覆盖您的应用正在使用的属性是正确的。使用一些命名约定来区分属性文件中定义的键始终是一个好习惯。

一个非常简单的问题模拟

```
public class TestApp {
    public static void main(String args[]) throws InterruptedException {
        TestApp app = new TestApp();
        app.new ThirdPartyLib("thirdParty").start();
        while (true) {
            Thread.currentThread().sleep(500);
            System.setProperty("test", "orignalProperty");
            System.out
                    .format("Thread Name  '%s' setting the property with value '%s' \n ",
                            Thread.currentThread().getName(),
                            System.getProperty("test"));
        }
    }

    class ThirdPartyLib extends Thread {
        public ThirdPartyLib(String threadName) {
            super(threadName);
        }

        @Override
        public void run() {
            super.run();
            while (true) {
                Thread.currentThread();
                try {
                    Thread.sleep(400);
                    System.setProperty("test", "modifiedProperty");
                    System.out
                            .format("Thread Name  '%s' setting the property with value '%s' \n ",
                                    Thread.currentThread().getName(),
                                    System.getProperty("test"));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

将导致下面的输出 - 这可能不是预期的输出，我肯定也很难调试

```
 Thread Name  'thirdParty' setting the property with value 'modifiedProperty' 
 Thread Name  'main' setting the property with value 'orignalProperty' 
 Thread Name  'thirdParty' setting the property with value 'modifiedProperty' 
 Thread Name  'main' setting the property with value 'orignalProperty' 
 Thread Name  'thirdParty' setting the property with value 'modifiedProperty' 
 Thread Name  'thirdParty' setting the property with value 'modifiedProperty' 
 Thread Name  'main' setting the property with value 'orignalProperty' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-15T19:12:24.743

我不会依赖使用系统属性在线程之间共享信息。我尝试在一个线程中创建一个属性，即使经过 10 秒也找不到另一个线程。其他人已经回答了修改线程已经可用的系统属性值的行为。

# plone - 如何在构建期间激活 Plone 产品？

> ID：15039877
> 
> 赞同：0
> 
> 时间：2013-02-23T11:14:29.917
> 
> 标签：plone, buildout

我大致遵循 Martin Aspeli 的《*Professional Plone 4 Development* 》一书，并使用 buildout 进行了可重复的部署。为了使一切完全自动化，我希望能够运行`bin/buildout`并找到在所有正确加载项激活的情况下工作的站点。例如，我正在使用`collective.blog.star`，目前，我必须登录该站点并激活它才能添加博客视图等。

如何使 buildout 也激活它在特定 Plone 站点对象中下载的附加组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:24:17.733

正如 Martijn 所写，quickinstaller 会处理这个问题，它只是一个简单的依赖声明，您可以在包中执行此操作，以便在站点创建时自动安装产品，这需要两个简单的步骤：

在 your.package/setup.py 添加：

```
setup( ...
    install_requires=[ ...
        'collective.blog.star' 
```

为了让 buildout 知道，这个鸡蛋也应该被拉出并提供给 ZOPE 实例。

在 your.package/your/package/profiles/default/metadata.xml 添加：

```
<object ... >
    <dependencies>
        <dependency>profile:collective.blog.star:default<dependency>        
    <dependencies> 
```

在安装产品时，通过配置文件实际激活依赖产品。

检查配置文件的名称是否真的是“默认”，因为这只是一个约定，在产品的 configure.zcml 中定义。

可能是，安装顺序可能很重要，因为您还想在同一过程中创建内容，我不知道会先执行哪个步骤，cbstar-install 或 content-creation，您必须对此进行测试。如果顺序不正确，您可能必须编写另一个包来拆分这两个任务，根据eggs-definitions-list 中的位置控制安装顺序（先到先，IIRC）。

# python - 在bash中fork一个子shell时如何加载环境变量？

> ID：15039882
> 
> 赞同：0
> 
> 时间：2013-02-23T11:15:13.103
> 
> 标签：python, bash, fork

在 crontab 中调用了下一个 bash 脚本。

我在 /etc/profile.d/python.sh 中为 python 定义了一些环境变量。

$JOBCMD 是一些 python 脚本，它会运行很长时间，所以我想用 fork 调用这个脚本。

```
#!/bin/sh

. /etc/profile.d/python.sh

JOBCMD=`/path/to/a_long_time_shell.py`

if [ -z "$variable" ]; then
    (
        . /etc/profile.d/python.sh
        $JOBCMD &
    )
fi

exit 0 
```

结果是 $JOBCMD 无法在 /etc/profile.d/python.sh 中获取环境变量？我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:40:10.477

我能看到的最简单的方法是将变量导出到`python.sh`：

```
export a=123
export b=234 
```

代替

```
a=123
b=234 
```

我猜你正在这样做。

或者，如果您知道需要哪些变量，则可以在调用脚本之前将其导出：

```
...
. /etc/profile.d/python.sh
export a
export b
$JOBCMD &
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:33:48.490

```
export JOBCMD=`/path/to/a_long_time_shell.py` 
```

应该使其可用于所有新创建的进程。或者，甚至更好。您可以使用 psutils 按名称查找进程并以这种方式对其进行处理。将东西传递到环境中是一种奇怪的 IPC 方式。

# c++ - 在具有连续数字的向量中查找数字

> ID：15039887
> 
> 赞同：-1
> 
> 时间：2013-02-23T11:15:47.710
> 
> 标签：c++, vector

首先，这是我高中的c++课，这是老师所做的，编译和构建时没有结果，什么也没显示

```
#include<iostream.h>
int main()
{
  int V[50],n,x,f,li,ls,m,i;

  cout<<"number of elements=";
  cin>>n;
  cout<<"x=";
  cin>>x;

  for(i=1;i<=n;i++)
  {
    cout<<"V["<<i<<"]=";
    cin>>V[i];
  }

  f=0;
  li=1;
  ls=n;

  while(li<=ls)&&(f==0);
  {
    m=(li+ls)/2;
    if(V[m]==x)
      f=1;
    else
      if(V[m]<x)
        li=m+1;
      else
        ls=m-1;
  }
  if(f==1)
    cout<<"the number is on position "<<m;
  else
    cout<<"the number is not in the vector";

  return 0;
} 
```

我很抱歉我的英语不好

编辑：我忘了，他给我们的例子是：

```
V={ 5,5,5,6,7,7,8,8,8,9,10,10,25,25 } 
```

和`x=10`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:28:42.510

1.  标题导入应该是`#include <iostream>`
2.  您需要`using namespace std`在标题之后，或使用`std::cout`and`std::cin`
3.  `while`表达式应该是`while((li<=ls)&&(f==0))`- 它必须是一个后面没有分号的表达式。创建`while(expr);`一个什么都不做的循环 -`;`算作一个空语句

# php - 如何在 ORM 中获取旧密码？

> ID：15039895
> 
> 赞同：0
> 
> 时间：2013-02-23T11:16:27.980
> 
> 标签：php, kohana, kohana-orm, kohana-3.2, kohana-auth

我需要一个旧密码（未散列）来发送给用户，但没有看到一个好主意？我阅读了文档，只有一种方法可以获取散列密码。我该怎么做才能获得真实密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:18:56.390

密码在经过哈希处理后永远不应该恢复干净，而且大多数情况下甚至是不可能的。我绝对建议您提供*重置密码*链接而不是提供旧链接。

带有 MD5、SHA1、SHA2、Blowfish 和其他密码的散列密码是一种加密方式，这意味着您不应该能够解密它们，因此使它们变得*安全*（第一个实际上并不那么安全，但这不是主题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:19:18.043

无法获取原密码；这就是使用哈希的意义所在。

如果用户需要一个新密码，则生成一个一次性、短暂的随机字符串，并将其作为 URL 的一部分通过电子邮件发送给他们。当他们点击链接时，提示他们输入新密码。

有关如何尽可能安全地执行此操作的更多建议，请参阅[OWASP 忘记密码备忘单。](https://www.owasp.org/index.php/Forgot_Password_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:19:33.443

你不能。Kohana 中的散列密码很可能是使用单向加密加密的密码。我的意思是你不能解密它并以明文形式获取它。您不应以明文形式存储应用程序密码以保护用户。

[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

您可以做的是为用户生成一个新的临时密码并将其发送到用户的电子邮件，但我认为重置密码链接是最好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T11:22:09.657

您无法恢复旧密码（未散列），因为它未存储在数据库中。仅存储其哈希值。散列无法解密（这就是为什么它被称为散列） ORM 使用这种模型来解决很多安全问题。

发送原始密码是真正的坏主意。**如果你还想这样做：**

1.  如果您在注册过程中自己生成密码（然后将其邮寄给用户并保存）

2.  如果用户正在设置他们的密码。您将把它作为 POST 变量。在将其保存到数据库的同时，也将其邮寄。

3.  如果用户使用忘记密码来恢复他们的密码。然后首先重置密码（生成一个新密码并将其保存到数据库）并将其发送给用户。

# jsf - 在 p:wizard 中以编程方式设置当前显示的选项卡

> ID：15039898
> 
> 赞同：2
> 
> 时间：2013-02-23T11:16:51.473
> 
> 标签：jsf, jsf-2, primefaces

是否可以在中以*编程*方式设置当前显示的选项卡[`<p:wizard>`](http://www.primefaces.org/showcase/ui/panel/wizard.xhtml)？

例如，我希望对于包含向导的同一页面的两个不同请求，选择不同的选项卡。

我目前正在尝试做的是有一个带有许多选项卡的向导，在第二个选项卡中我有一个重定向到另一个页面，所以当我回来时，我想进入导致重定向的最后一步。

你能帮我么 ？十分感谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T13:53:00.747

根据[primefaces 文档](http://primefaces.org/documentation.html)，标签有一个`step`属性**`p:wizard`**，它指定了您当前所在的向导的步骤。

> **属性：**步骤
> **默认值：** 0
> **类型：**字符串
> **描述：**流程中当前步骤的 ID

您必须将此属性绑定到支持 bean 的值，并在重定向和返回期间对其进行维护。如果您的向导的 bean 是`@ViewScoped`您将在重定向步骤期间丢失该信息，因此您必须使用[view param](http://mkblog.exadel.com/2010/07/learning-jsf2-page-params-and-page-actions/)或[flash scope](http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/)传递它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T14:08:22.567

我的回答很可能无法满足您的全部要求，但是，尽管如此，它可能会为您指明问题的解决方案。

据我所知，PrimeFaces Wizard UIComponent 是为一页的工作流而设计*的*。这实际上意味着输入将由视图范围内的支持 bean 处理。

这样，在某个步骤上进行重定向将清除所有数据输入，因为您的视图更改并且旧视图被破坏。

无论如何，设置当前标签显示的一种方法是向导组件的步骤属性。所以，

```
<p:wizard step="#{wizardBean.currentStep}" >...</p:wizard> 
```

将强制向导显示您在 bean 中指定的步骤。您可以通过使用例如视图参数来获取它，例如

```
<f:viewParam name="step" value="#{wizardBean.currentStep}" /> 
```

但是，如果 bean 的生命周期比视图的生命周期更多，例如，bean 可以放在会话范围内，那将是有意义的。

也就是说，也许事先登录是一个更好的主意。或者，如果绝对有必要在向导的第 2 步中执行此操作，请在页面本身或流行窗口中提供内置登录功能？

Also, programmatically the setting you speak of can be achieved via a binding of component to your backing bean and setting the step value in the backing bean, for example, in a preRenderView event.

# javascript - javascript-gadget 未在 UIwebView 中加载

> ID：15039900
> 
> 赞同：2
> 
> 时间：2013-02-23T11:17:06.423
> 
> 标签：javascript, objective-c, iphone, uiwebview

这是示例 JavaScript 小工具代码以及如何加载它`UIWebview`

`<script src="//gadgets.example.com/gadgets.jsz?key=keystring" type="text/javascript">`

`</script><script type="text/javascript">`

```
$w(function() {

    BE.gadget.search('#search-example',{

        vvciID:85,
        Mode:true,
        period:3,
        adults:5,
        children:6,
        hybridMode:true,
        hybridOptions:{
            'accom': { tabName:'Stay', adults:3 },
            'events':{ tabName:'Play', adults:4 }
        },
        minDaysFromToday:10,
        searchLocation:'./11-gadget.html'
    });
}); 
```

# javascript - Javascript代码不起作用？告诉我为什么

> ID：15039901
> 
> 赞同：0
> 
> 时间：2013-02-23T11:17:13.730
> 
> 标签：javascript, html

我正在编写一个简单的 javascript 代码，但我不知道它不起作用。请告诉我你是否知道这一点。

```
<!DOCTYPE html>
<html>
<head>
<script>
function displayText(){
var xa = document.getElementById('abcd').innerHTML;
xa+= 'asdf';
}

displayText();  
</script>
</head>
<body>
<div id="abcd"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T11:20:02.587

`innerHTML`返回元素当前内容的字符串，而不是指向它的指针。所以改用这个：

```
function displayText(){
  document.getElementById('abcd').innerHTML += 'asdf';
} 
```

或者

```
function displayText(){
  var el = document.getElementById('abcd'); 

  var xa = el.innerHTML;
  xa += 'asdf';

  el.innerHTML = xa;
} 
```

Furthermore you can not call the function, before the element you are referring to is actually created. So move the call at the bottom of the body tag.

```
<!-- .... -->
<script>
  display();
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:19:26.297

在代码运行时，主体（包括您的 div）尚未被解析。`getElementById('abcd')`那个时候什么都找不到。

将您的脚本元素移动到正文的末尾，以便它在正文被解析后运行，或者从处理程序调用您*的*`displayText()`函数`onload`。

（如果您打算将新值`xa`显示在同一字段中，则需要使用 将其写回元素`document.getElementById('abcd').innerHTML = xa`。）

# nhibernate - 如何检索某种类型的所有 AutoFac 组件？

> ID：15039903
> 
> 赞同：1
> 
> 时间：2013-02-23T11:17:34.560
> 
> 标签：nhibernate, autofac

我正在编写一个需要使用多个 NHibernate 会话工厂的 MVC 4 应用程序。我正在按名称使用 AutoFac 注册这些对象。在我的 global.asax 中，我需要检索所有会话工厂并将它们绑定/取消绑定到 CurrentSessionContext。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
        {
            foreach (ISessionFactory sessionFactory in SessionFactories)
            {
                if (!CurrentSessionContext.HasBind(sessionFactory))
                {
                    CurrentSessionContext.Bind(sessionFactory.OpenSession());
                }
            }
        }

        protected void Application_EndRequest(object sender, EventArgs e)
        {
            foreach (ISessionFactory sessionFactory in SessionFactories)
            {
                ISession session = CurrentSessionContext.Unbind(sessionFactory);
                session.Close();
                CurrentSessionContext.Unbind(sessionFactory);
            }
        } 
```

我在从 AutoFac 检索我的 SessionFactories 时遇到问题。也就是说，当我尝试使用该`Resolve`方法检索它们时，我得到一个空集合。但是，如果我改用以下`ResolveNamed`方法，事情就会奏效：

```
 SessionFactories =
                new List<ISessionFactory>
                    {
                        container.ResolveNamed<ISessionFactory>("DB1"),
                        container.ResolveNamed<ISessionFactory>("DB2")
                    }; 
```

虽然这可行，但它似乎相当脆弱（如果有任何名称更改，我必须更新此代码，或者我添加/删除 SessionFactories）。有没有办法按*包含命名实例*的类型从 AutoFac 检索所有对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:08:09.627

利用`Resolve<IEnumerable<ISessionFactory>>()`

有关详细信息，请参阅[关系类型](http://code.google.com/p/autofac/wiki/RelationshipTypes)。

# linux - 别名 `grep -w 'label for'` 只搜索第一个单词（标签）

> ID：15039905
> 
> 赞同：0
> 
> 时间：2013-02-23T11:17:56.780
> 
> 标签：linux, shell, grep, alias

```
alias cgrep='current_dir_grep'
function current_dir_grep_exact {
grep -w $1 .
}
alias cgrepe='current_dir_grep_exact' 
```

`grep -w 'label for' .`工作，但`cgrepe 'label for'`只搜索出现，`label`而我想`label for`在当前目录中找到出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:20:15.917

将论点放在引号中：

```
grep -w "$1" . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:56:54.893

在`bash(1)`中，别名*不带参数*。有时看起来他们这样做，但他们没有。使用一个函数。

# jquery - Jquery .live 问题

> ID：15039907
> 
> 赞同：0
> 
> 时间：2013-02-23T11:18:05.643
> 
> 标签：jquery, live

我有以下代码片段。

HTML（简体）：

```
 <tr>
    <td><div id="insert_24" class="insert">Invoegen</div></td>
    </tr> 
```

在其上运行（简化）JS 函数以从表单中检索数据，将其添加到数据库中，然后使用正确的类和 ID 更新表单/表：

```
 $(".insert").click(function() {
        // current field, is the id: insert_24
        // layer is retrieved in the function: 24
        // Full table has the id 'canvas'

        // do something
        // Insert into database

        console.log('insert-'+layer);
        $("#"+ current_field).removeClass("insert").addClass("delete").html('delete').attr('id', 'delete_'+layer);
        $("table#canvas tr:last").attr('id', 'row_'+layer);
    }); 
```

在此代码之后，我还有删除一行的代码（简化）：

```
 $(".delete").live("click", function() {
        // do something
        // Insert into database

        console.log('delete-'+layer);
        $("#row_"+ layer).remove();         
    }); 
```

插入工作完美，但是当我查看控制台日志功能时，在“插入”上，“删除”功能也在插入后直接触发，这没有意义。我只点击了`<div>`一次。

为了使此功能以正确的方式工作，我缺少哪个步骤/设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:28:12.507

`click()`将您的处理程序更新为`return false;`，或：

```
$(".insert").click(function(e) {
    e.stopPropagation();
    // your code here
}); 
```

`.live()`通过在文档级别附加处理程序并等待事件冒泡来工作 - 此时它检查原始目标元素是否与您使用的选择器匹配。因此，当点击发生时，它首先触发（非实时）点击处理程序，然后冒泡触发实时处理程序。

另请注意，`"insert"`从元素中删除类不会阻止单击处理程序在该元素上触发。您需要取消绑定单击处理程序（从处理程序内）或将其更改为实时处理程序。

请注意，这`.live()`已经过时了。您应该更新以改用该[`.on()`方法](http://api.jquery.com/on)的委托语法..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:27:52.637

试试这个：

```
$(".insert").click(function(e) {
    e.stopPropagation();
    // current field, is the id: insert_24
    // layer is retrieved in the function: 24
    // Full table has the id 'canvas'

    // do something
    // Insert into database

    console.log('insert-'+layer);
    $("#"+ current_field).removeClass("insert").addClass("delete").html('delete').attr('id', 'delete_'+layer);
    $("table#canvas tr:last").attr('id', 'row_'+layer);
}); 
```

发生的事情是单击事件正在冒泡到文档。`.live()`在文档上有一个处理程序，用于检查事件的目标是否与选择器匹配。click 处理程序完成后，DIV 的类已更改为`delete`，因此此检查成功，并运行处理程序。

# asp.net-mvc - MVC 3 在多对多关系（iCollection）上设置默认值

> ID：15039908
> 
> 赞同：0
> 
> 时间：2013-02-23T11:18:06.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我现在正在学习 MVC 3（代码优先），感谢 asp.net 上的一些很棒的教程和 stackoverflow 上的一些问题，我学到了很多东西，但我想不通。我正在尝试设置默认值。当有人提出问题时，默认情况下该问题的状态必须为 3（= 未回答）。多亏了这篇文章，我已经成功地设置了它：[asp.net mvc 视图模型中的默认值，](https://stackoverflow.com/questions/7637022/default-value-in-an-asp-net-mvc-view-model) 但现在我正在尝试为多对多的关系做同样的事情。（在 QuestionModel 公共虚拟 ICollection 类别中）

有人可以帮我解决这个问题。

这是我的 QuestionModel (Question.cs)

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace MvcDatabase.Models
{
    public class Question
    {
        [Key]
        public int QuestionID { get; set; }

        [DisplayFormat(DataFormatString="{0:d}", ApplyFormatInEditMode=true)]
        [Display(Name="Datum")]
        public DateTime Date { get; set; }

        [Required(ErrorMessage="Naam is een verplicht veld.")]
        [MaxLength(100, ErrorMessage="Naam kan maximum 100 karakters bevatten")]
        [Display(Name="Naam")]
        public string Author { get; set; }

        [Required(ErrorMessage="E-mail is een verplicht veld.")]
        [DataType(DataType.EmailAddress)]
        [Display(Name = "Email")]
        public string MailAuthor { get; set; }

        [Required(ErrorMessage="Onderwerp is een verplicht veld.")]
        [MaxLength(100, ErrorMessage="Onderwerp kan maximum 100 karakters bevatten.")]
        [Display(Name="Onderwerp")]
        public string Title { get; set; }

        [Required(ErrorMessage="Bericht is een verplicht veld.")]
        [Display(Name="Bericht")]
        public string Message { get; set; }

        public virtual ICollection<Category> Categories { get; set; }
        public virtual ICollection<Reaction> Reactions { get; set; }

        [ForeignKey("Status")]
        public int StatusID { get; set; }
        public virtual Status Status { get; set; }

        public Question()
        {
            StatusID = 3;
        }
    }
} 
```

这是 CategoryModel (Category.cs)

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace MvcDatabase.Models
{
    public class Category
    {
        [Key]
        public int CategoryID { get; set; }

        [Required(ErrorMessage="Omschrijving is een verplicht veld.")]
        [MaxLength(100, ErrorMessage = "Omschrijving kan maximum 100 karakters bevatten.")]
        [Display(Name="Categorie omschrijving")]
        public string Description { get; set; }

        public virtual ICollection<Question> Questions { get; set; }
    }
} 
```

这是 DbContextModel (TestotheekDBContext.cs)

```
using System.Data.Entity;

namespace MvcDatabase.Models
{
    public class TestotheekDBContext: DbContext
    {
        public DbSet<Status> Statuses { get; set; }
        public DbSet<Category> Categories { get; set; }
        public DbSet<Question> Questions { get; set; }
        public DbSet<Employee> Employees { get; set; }
        public DbSet<Reaction> Reactions { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Question>()
                .HasMany(qc => qc.Categories)
                .WithMany(cq => cq.Questions)
                .Map(m => m.MapLeftKey("QuestionID")
                    .MapRightKey("CategoryID")
                    .ToTable("QuestionsWithCategory"));
        }
    }
} 
```

如果您需要控制器中的代码

```
 public ActionResult Create()
        {
            return View(new Question());
        } 

        //
        // POST: /Default4/Create

        [HttpPost]
        public ActionResult Create(Question question)
        {
            var vraag = new Question();
            vraag.Date = DateTime.Now;
            vraag.Author = question.Author;
            vraag.MailAuthor = question.MailAuthor;
            vraag.Title = question.Title;
            vraag.Message = question.Message;

            if(ModelState.IsValid)
            {
                db.Questions.Add(vraag);
                db.SaveChanges();
                return RedirectToAction("Index","Home");
            }
            return View(question);
        } 
```

（没有测试return RedirectToAction）

编辑

这是我目前得到的结果： ![在此处输入图像描述](../Images/0ffb12caa307b64f57428fa3f70c260f.png) 正如您在第一部分（第一个表）的最后一个问题中看到的，没有类别（字段为空）这必须与该表中的所有其他问题相同类别，因为管理员必须分配一个（或多个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:29:29.267

您需要将数据库上下文中的现有类别附加到您的实体。在控制器中执行此操作通常不是一个好主意（垃圾收集器，不存在实体的异常）。我会在你的控制器创建动作中这样做

```
 [HttpPost]
 public ActionResult Create(Question question)
 {
     var vraag = new Question();
     vraag.Date = DateTime.Now;
     vraag.Author = question.Author;
     vraag.MailAuthor = question.MailAuthor;
     vraag.Title = question.Title;
     vraag.Message = question.Message;

     // Add the default categories here!
     vraag.Categories = db.Categories.Where(c => c.SomeCriteria).ToList();

     if(ModelState.IsValid)
     {
         db.Questions.Add(vraag);
         db.SaveChanges();
         return RedirectToAction("Index","Home");
     }

     return  View(question);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:27:27.770

所以答案并不完全是 Saintedlame 所说的，但他确实以正确的方式指出了我。首先，在调试之后，我看到 var vraag = new Question() 行没有用，因为几乎所有问题都被删除了。我只需要添加日期和类别即可。再次感谢圣德拉姆！

这是实际的 ActionResult：

```
 [HttpPost]
        public ActionResult Create(Question question)
        {
            question.Date = DateTime.Now;
            if (question.Categories == null) 
            {
                var category = db.Categories
                    .Include(q => q.Questions)
                    .Where(q => q.CategoryID == 1)
                    .ToList();
                question.Categories = category;
            }

            if(ModelState.IsValid)
            {
                db.Questions.Add(question);
                db.SaveChanges();
                return RedirectToAction("Index","Home");
            }
            return View(question);
        } 
```

结果如下：

![在此处输入图像描述](../Images/e267be2348051f0d996bc64afda91fe0.png)

# c - 有没有一种简单的方法可以在不重新编码的情况下并行运行 C/C++ 程序？

> ID：15039909
> 
> 赞同：3
> 
> 时间：2013-02-23T11:18:09.867
> 
> 标签：c, multithreading, parallel-processing, multicore

我有一台多核机器，但是当我尝试运行这个旧的 C 程序（[http://www.statmt.org/moses/giza/mkcls.html](http://www.statmt.org/moses/giza/mkcls.html)）时，它只使用一个核心。有没有办法运行 C 代码并将周期/线程发送到其他内核？

将代码重新编码为 CUDA 是唯一的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T11:23:42.790

是的，这称为自动并行化，它是一个活跃的研究领域。

但是，我知道没有免费的工具可以做到这一点。维基百科文章[“自动并行化”](http://en.wikipedia.org/wiki/Automatic_parallelization_tool#Parallelization_Tools)有一个工具列表。您将需要访问原始源代码，并且您可能必须向代码添加并行化指令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T12:17:08.883

> 我有一台多核机器，但是当我尝试运行这个旧的 C 程序（[http://www.statmt.org/moses/giza/mkcls.html](http://www.statmt.org/moses/giza/mkcls.html)）时，它只使用一个核心。有没有办法运行 C 代码并将周期/线程发送到其他内核？

不重新编译，肯定不行。

您也许可以进行一些细微的调整并使用一个工具来获取您的源代码并自动将其并行化，但是由于每个内核都是非常独立的——它们“相距甚远”——你不能只在两个内核之间传播指令. 代码必须以有两个“指令流”的方式编译 - 如果您只是将所有其他指令发送到双核系统中的每个其他核心，它的运行速度可能会比如果你在一个内核上运行所有代码，因为内核之间需要额外的通信开销[每个内核已经有能力并行运行多条指令，

> 将代码重新编码为 CUDA 是唯一的方法吗？

不，还有很多其他选择。OpenMP，使用多线程的手动编码。或者，最简单的方法是用不同的输入数据启动程序两到四次，然后让它们完全分开运行。这显然只有在您可以同时运行多个变体的情况下才有效......

关于“使事情平行”的一句话。这不是一件神奇的事情，可以让所有代码更快。在需要上一次计算结果的地方计算一些东西是非常无望的——比如说你想计算斐波那契数列`f(n) = f(n-1) + f(n-2)`——你不能用并行计算来做到这一点，因为你需要其他计算的结果来继续这个。另一方面，如果您有十几个非常大的数字要检查它们是否是质数，那么使用 4 核处理器和 4 个线程，您将能够以大约四倍的速度执行此操作。

如果您有一个大矩阵需要乘以另一个大矩阵或向量，那么拆分是理想的，因此您可以在每个核心上进行部分计算。

我没有查看您特定项目的代码，但仅查看描述，我认为它可能会很好地并行化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:30:24.913

您可以在多个进程中运行它，并编写另一个程序将任务转发到这些进程中的任何一个。

库达？如果你想让它在你的显卡上运行，你只需要它，所以在这种情况下这是没有意义的。

# c++ - 索引字符串和国际化

> ID：15039912
> 
> 赞同：0
> 
> 时间：2013-02-23T11:18:13.133
> 
> 标签：c++, string, internationalization, indexing

我最近提出了一种用于查找重复客户记录的索引算法。简而言之，这一切都很好。

但是，我的问题是我想找到“Diviér”应该匹配“Divier”，或者“Aether”应该匹配“Æther”。没问题，因为使用 libicu 或 boost::locale 可以删除变音符号，并且问题使用 wstring。但是，这是我的问题：规范化/拉丁化一个单词会改变它的含义，匹配可能不再有意义。我想就名称是否可以接受一些输入...

另外，如果有人有中文名字怎么办？这不会以这种方式归一化，不是吗？

你对如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:22:53.183

您应该更多地查看地址，而不是过多地查看名称。最后，名称可能非常具有误导性。例如，根据国家的不同，中文、俄文或日文字符的转录可能会有所不同。然后有时名称字段太短而无法捕获一个人的全名（尤其是在印度人的名字中很常见），这会导致任何看似随机的缩写。有时人们会省略中间名，有时则不会。有时会有拼写错误给出正确但不同的名称。

因此，在我看来，名称应该是查找重复项最不重要的标准。

# android - Android：如何测量 ListView 的总高度

> ID：15039913
> 
> 赞同：22
> 
> 时间：2013-02-23T11:18:15.093
> 
> 标签：android, listview, android-listview, height, android-linearlayout

我需要测量 ListView 的总高度，但似乎我经常得到错误的值。我正在使用这段代码：

```
public static void setListViewHeightBasedOnChildren(ListView listView) {
    ListAdapter listAdapter = listView.getAdapter();
    if (listAdapter == null) {
        return;
    }

    int totalHeight = 0;
    int desiredWidth = MeasureSpec.makeMeasureSpec(listView.getWidth(),
            MeasureSpec.AT_MOST);
    Log.w("DESIRED WIDTH", String.valueOf(listAdapter.getCount()));
    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, listView);
        listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
        totalHeight += listItem.getMeasuredHeight();
        Log.w("HEIGHT"+i, String.valueOf(totalHeight));
    }

    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = totalHeight
            + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
    listView.setLayoutParams(params);
    listView.requestLayout();
} 
```

问题是我收到的高度比我应该收到的要高。每个列表项的测量方式都不同，并且所有项的高度都相同，因此绝对不应该这样做。每个元素的高度至少是其实际高度的两倍。

先感谢您。

编辑1：

我有两个 ListView，它们都有 6-7 个 EditText 字段的项目。如果用户想要在 EditText 中写入/删除值，我会显示/隐藏 ListView。一切都很好，除了当我想显示列表时，它需要很多空间，因为计算 ListView 的方法需要很多空间。因此，我在 ListView 下方有很多空白空间。就像需要的空间增加了三倍。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-24T17:02:28.573

终于我做到了！这是测量 ListView 高度并将 ListView 设置为全尺寸的工作代码：

```
public static void getTotalHeightofListView(ListView listView) {

    ListAdapter mAdapter = listView.getAdapter();

    int totalHeight = 0;

    for (int i = 0; i < mAdapter.getCount(); i++) {
        View mView = mAdapter.getView(i, null, listView);

        mView.measure(
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),

                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));

        totalHeight += mView.getMeasuredHeight();
        Log.w("HEIGHT" + i, String.valueOf(totalHeight));

    }

    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = totalHeight
            + (listView.getDividerHeight() * (mAdapter.getCount() - 1));
    listView.setLayoutParams(params);
    listView.requestLayout();

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T12:16:49.283

尝试这样的事情：

```
listItem.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

  public void onGlobalLayout() {
    int listItemHeight = listItem.getHeight();
  }
}); 
```

如果您想要 listView 的高度，请尝试以下操作：

```
listView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

  public void onGlobalLayout() {
    int listViewHeight = listView.getHeight();
  }
}); 
```

你也可以检查一下：[计算列表视图的大小或如何告诉它完全展开](https://stackoverflow.com/questions/2312683/calculate-the-size-of-a-list-view-or-how-to-tell-it-to-fully-expand)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:31:23.263

ListView 缓存视图项并重用它们。如果您有一个包含 1000 个项目但只有 6 个可见的列表视图，为什么，不值得渲染 994 不显示。

测量整个 ListView 意味着渲染每个 ListItem，似乎有点矫枉过正。

我不知道您要达到什么目标，但可能有更好的方法:)

# jquery - KineticJS：右键单击触发单击

> ID：15039915
> 
> 赞同：3
> 
> 时间：2013-02-23T11:18:43.000
> 
> 标签：jquery, events, kineticjs, right-click, rect

我正在使用 Kineticjs，我正在定义一个这样的 rect 事件

```
this.rect.on('click tap', function(){
foo();
}); 
```

当我左键单击时触发该事件，右键单击时也会触发该事件。如何避免通过右键单击触发此事件？（我不能禁用页面中的右键单击，因为如果我右键单击矩形，我想打开一个上下文菜单）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T16:50:54.020

您需要过滤掉鼠标右键

```
this.rect.on('click tap', function(e){ 
   // 1:left, 2: middle, 3: right, for IE 8, e.button != 2
   if (e.which != 3) {
      foo();
   }
} 
```

# facebook - 当网站 url 不包含文件名 (index.html) 时，facebook 发送按钮为空白

> ID：15039916
> 
> 赞同：0
> 
> 时间：2013-02-23T11:18:46.067
> 
> 标签：facebook, url, button, send

在站点的 url 包含文件名的情况下，我的小部件可以正常工作。fe 它正在使用 *www.domain.com/subdomain/path/index.html*并且当站点地址为*www.domain.com/subdomain/path/*时一直显示空白。

这是一种奇怪的行为，我知道 Facebook 的发送框存在一些问题，但我找不到适合我的错误的。

我动态更改 url 并调用 FB.XFBML.parse(); 然后为 facebook 小部件使用这样的代码

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
FB.init({
appId      : 'appID',
    status     : true,
    cookie     : false,
    xfbml      : true 
});
fbApiInit = true; //init flag
};

(function(d, debug){
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "http://connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
 ref.parentNode.insertBefore(js, ref); 
```

}（文档，/*调试*/假））；

请告诉我应该怎么做。重要的是我宁愿两个地址都可以工作，如果不可能，有机会使用没有 filename.ext 的地址会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:30:19.263

现在一切正常。我刚刚意识到 Facebook 不允许使用发送无分机地址。我使用 `$('.fbMenu :first-child').attr('href',document.location.toString()).attr('ref','text');`的文档位置只是一条路径。这样一个简单的代码解决了这个问题：

`$('.fbMenu :first-child').attr('href',document.location.toString().indexOf('html')==-1?document.location.toString().replace('#','index.html#'):document.location.toString()).attr('ref','text');`

# java - ArrayList 的 ArrayList

> ID：15039923
> 
> 赞同：0
> 
> 时间：2013-02-23T11:19:10.007
> 
> 标签：java, arraylist

```
for(int i=0;i<Stockhouse.total_stocks;i++){
        buyers.clear();

        for(int j=0; j<buy.size();j++){
        if(buy.get(j).stock_Id.equals("Stock"+i)){
            System.out.println("Agent "+buy.get(j).ID+",stock"+buy.get(j).stock_Id+",price "+buy.get(j).price +",quant "+buy.get(j).quantity);
            Auctionhouse buypr= new Auctionhouse(buy.get(j).price,buy.get(j).quantity);
            buyers.add(buypr);
        }
    }
        total_buy.add(buyers);
        System.out.println("buy size "+total_buy.get(i).size());
    } 
```

这里购买大小正确地向我显示了每个 ArrayList 的大小作为 total_buy ArrayList 的元素。

我的问题是，当我再次需要这些大小时，我只能得到最后一个 ArrayList 的大小。

```
 total_buy.get(0).size()=3
  total_buy.get(1).size()=3
  total_buy.get(2).size()=3....... 
```

但只有 total_buy.get(2).size()=3 实际上是 3！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T11:31:27.660

您正在重用同一个对象，并且引用被添加到`total_buy`列表中。代替

```
buyers.clear(); 
```

做

```
buyers = new ArrayList<Auctionhouse>(); 
```

这将为`buyers`每次创建一个新对象，因此在`total_buy`列表中保留更新的引用。

# php - 模组重写；阿帕奇规则

> ID：15039924
> 
> 赞同：0
> 
> 时间：2013-02-23T11:19:11.023
> 
> 标签：php, apache, mod-rewrite, rule

```
RewriteEngine on
RewriteRule ^([A-Za-z0-9-_]+)$ index.php?paste=$1 [L] 
```

正如您在上面看到的那样，它需要`site.com/index.php?paste=pasteID`并将其变成`site.com/pasteID`

现在我想知道一种可以像这样编辑粘贴的方法。

```
site.com/index.php?paste=pasteID&page=edit
site.com/pasteID/edit 
```

无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:33:40.637

```
RewriteEngine on
RewriteRule ^([A-Za-z0-9-_]+)$ index.php?paste=$1 [L]
RewriteRule ^([A-Za-z0-9-_]+)/edit$ index.php?paste=$1&page=edit [L] 
```

例子：

*   `domain.com/534`->`index.php?paste=534`
*   `domain.com/abc`->`index.php?paste=abc`
*   `domain.com/abc123`->`index.php?paste=abc123`
*   `domain.com/534/edit`->`index.php?paste=534&page=edit`
*   `domain.com/abc/edit`->`index.php?paste=abc&page=edit`
*   `domain.com/abc123/edit`->`index.php?paste=abc123&page=edit`

# symfony - 为什么自动加载器错误出现在 symfony2 中

> ID：15039931
> 
> 赞同：0
> 
> 时间：2013-02-23T11:19:33.973
> 
> 标签：symfony, symfony-2.1, symfony-2.2

任何人都可以让我知道为什么自动加载器错误出现在 symfony2 中。什么是parmenanat解决方案。我已经下载了供应商的 symfony2 版本，当我插入自定义类并尝试使用它时，所有的东西都可以正常工作接受它总是会引发自动加载错误，请给我它的解决方案。错误信息如下。

```
The autoloader expected class "Blogger\BlogBundle\Entity\Enquiry" 
to be defined in file
"D:\wamp\www\Symfony/src/\Blogger\BlogBundle\Entity\Enquiry.php". 
The file was found but the class was not in it, 
the class name or namespace probably has a typo. 
```

这里是探究课。

```
<?php

namespace Blogger\BlogBungle\Entity;

class Enquiry
{

protected $name;
protected $email;
protected $subject;
protected $body;

public function getName()
{
    return $this->name;

}
public function setName($name)
{
    $this->name = $name;
}
public function getEmail()
{
    return $this->email;
}
public function setEmail($email)
{
    $this->email = $email;
}
public function getSubject()
{
    return $this->subject;
}
public function setSubject($subject)
{
    $this->subject = $subject;
}
public function getBody()
{
    return $this->body;
}
public function setBody($body)
{
    $this->body = $body;
}

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:39:36.887

查看两者之间的区别

```
namespace Blogger\BlogBungle\Entity; 
```

和

```
 Blogger\BlogBundle\Entity\Enquiry 
```

在错误信息中？当您定义命名空间时，**BlogBu​​ngle 应该是 BlogBu​​ndle 。**

# spring - Spring编译时编织事务回滚

> ID：15039934
> 
> 赞同：0
> 
> 时间：2013-02-23T11:19:45.983
> 
> 标签：spring, gwt, google-plugin-eclipse, compile-time-weaving

我正在尝试`Aspectj` `Compile Time Weaving`在`Spring`. 但是，在添加`mode="aspectj"`到之后`tx:annotation-driven`，事务都失败了，因此没有实体存储在数据库中。

这是我的配置的相关部分：

```
<tx:annotation-driven transaction-manager="transactionManager" mode="aspectj" />
<context:spring-configured />
<context:annotation-config />
<context:component-scan base-package='some.package' />
<aop:aspectj-autoproxy />
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<bean id='entityManagerFactory' class='org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean'><property name="persistenceUnitName" value="myPU" /> 
<property name="dataSource" ref="dataSource" />
</bean> 
```

我在 /META-INF 中也有一个 aop.xml（但不确定是否需要该文件）

```
<!DOCTYPE aspectj PUBLIC
        "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
    <weaver>
        <!-- only weave classes in our application-specific packages -->
        <include within="some.package.*" />
    </weaver>
    <aspects>
        <aspect
            name="org.springframework.transaction.aspectj.AnnotationTransactionAspect" />
    </aspects>
</aspectj> 
```

一些备注：

*   由于我正在使用的环境，我坚持使用 CTW（所以没有 LTW）。
*   我`@PersistenceContext`用来获取`EntityManager`
*   在 tx:annotation-driven 中没有 mode="aspectj" 事务运行良好
*   我没有使用`Spring MVC`
*   我正在使用 GWT 2.5

# 编辑：

我的项目有一个`Maven`性质，我也必须添加这个插件。但我使用`Eclipse`和运行应用程序`Google Plugin`。我将项目运行为`A Web Application (google plugin)`. 我不确定这段代码`Maven`是否正确初始化......

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>aspectj-maven-plugin</artifactId>
<version>1.3</version>
<configuration>
<complianceLevel>1.6</complianceLevel>
<encoding>UTF-8</encoding>
<aspectLibraries>
<aspectLibrary>
<groupId>org.springframework</groupId>
<artifactId>spring-aspects</artifactId>
</aspectLibrary>
</aspectLibraries>
</configuration>
<executions>
<execution>
<goals>
<goal>compile</goal>
<goal>test-compile</goal>
</goals>
</execution>
</executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:01:03.720

这是我的 pom 的相关部分：

```
<properties>
    <aspectj.version>1.6.11</aspectj.version>
    <aspectj-maven-plugin.version>1.2</aspectj-maven-plugin.version>
</properties>

<dependencies>
     <dependency>
           <groupId>org.aspectj</groupId>
           <artifactId>aspectjrt</artifactId>
           <version>${aspectj.version}</version>
     </dependency>
     <dependency>
           <groupId>org.aspectj</groupId>
           <artifactId>aspectjweaver</artifactId>
           <version>${aspectj.version}</version>
     </dependency>
...
</dependencies>
...

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>${aspectj-maven-plugin.version}</version>
            <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 - wait for 1.4 -->
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                    <aspectLibrary>
                        <groupId>org.springframework.security</groupId>
                        <artifactId>spring-security-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>utf-8</encoding>
            </configuration>
        </plugin>

    </plugins>
</build> 
```

它没有任何问题，也没有任何问题`aop.xml`

# python - 如何处理python中texttopdf引发的错误

> ID：15039939
> 
> 赞同：0
> 
> 时间：2013-02-23T11:20:18.453
> 
> 标签：python, python-2.7, pdftotext

我正在读取系统中存在的所有 pdf 文件，并将其从命令行实用程序“pdftotext”写入文本文件“output.txt”，但是在读取结构不正确的文件（如图像的 pdf 文件和许多其他文件）时，它会引发一些错误，例如

```
/home/vikrantsingh/Downloads/ARRAYS_NEW.pdf
/home/vikrantsingh/Downloads/GPOS_casestudy_solution_v2.pdf
/home/vikrantsingh/Downloads/Tutorial.pdf
/home/vikrantsingh/Downloads/The_C_Programming_Language.pdf
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (27972): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (41087): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (51900): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (62716): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (65450): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0'
Error (68463): No font in show
Error: Missing language pack for 'Adobe-Japan1' mapping
Error: Unknown font tag 'C0_0' 
```

我想要的是当它遇到第一个错误时，只需移动到下一个文件而不是读取同一个文件。我使用的是 Python 2.7。我的代码就像

```
 import os
    import sys
    import re
    import subprocess
    root = '/home'
    targetpath = ""
    path = os.path.join(root, targetpath)
    filepath = []
    count = 0
    filesize = 0
    for r,subdir,f in os.walk(path):
        ultimate_path = os.path.join(path,r)
        for file in f:
             if file.find(".pdf")!=-1:
             print os.path.join(ultimate_path,file)
             filesize = os.path.getsize(os.path.join(ultimate_path,file))+filesize
             subprocess.call(['pdftotext', os.path.join(ultimate_path,file), 'output.txt'])
        #print file

        count = count+1
        print count
        print filesize/(1048576.0) 
```

这是从“pdftotext”读取 pdf 文件的示例代码。我想捕捉错误，以便继续阅读下一个 pdf。

我看过[一篇关于这个的帖子](https://stackoverflow.com/questions/4837114/calling-pdftotext-from-python-script-not-working-when-i-change-from-local-machin)。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:32:35.777

这些错误消息是由 生成的`pdftotext`。它们不是 Python 异常，因此不能用`try..except`.

您可以运行`pdftotext -q`以[使错误消息静音](http://linux.die.net/man/1/pdftotext)：

```
 subprocess.call(['pdftotext', '-q', os.path.join(ultimate_path,file), 'output.txt']) 
```

# c# - 使用泛型将枚举转换为字典

> ID：15039940
> 
> 赞同：0
> 
> 时间：2013-02-23T11:20:19.857
> 
> 标签：c#, linq, generics

我试图创建一个我可以调用的方法，它将 `Dictionary<int,string>`从枚举中返回一个类型的字典。

我想使用泛型。

到目前为止，这是我的代码...

```
public class Enums
{
    public static Dictionary<int, string> GetEnumDictionary<T>()
    {
        return Enum.GetValues(typeof(T)))
           .Cast<typeof(T)>()
           .ToDictionary(t => (int)t, t => t.ToString());
    }

    /// <summary>
    /// Fuel Type Enum
    /// </summary>
    public enum FuelTypes
    {
        Petrol = 1,
        Diesel = 2,
        Hybrid = 3,
        Electric = 4
    }
} 
```

单元测试...

```
[TestClass]
public class EnumTests
{
    [TestMethod]
    public void TestGetEnumDictionary()
    {
        Dictionary<int, string> dict = new Dictionary<int, string>();
        dict = Enums.GetEnumDictionary<Enums.FuelTypes>();
        Assert.IsTrue(dict != null);
    }
} 
```

我得到的编译错误是

> 运算符“<”不能应用于“方法组”和“System.Type”类型的操作数

谁能看到我的错误在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T11:35:03.610

GetEnumDictionary 方法中有两个主要错误：

首先，`Cast<typeof(T)>`没有意义。简直了`Cast<T>`。

然后，您不能简单地将 T 类型的值转换为和 int，而必须先将其转换为对象。
所以，你应该像这样改变你的方法：

```
public static Dictionary<int, string> GetEnumDictionary<T>()
{
    return Enum.GetValues(typeof(T))
       .Cast<T>()
       .ToDictionary(t => (int)(object)t, t => t.ToString());
} 
```

但问题是你可以将任何你想要的类型传递给 T，甚至是非枚举类型。不幸的是，您不能将泛型类型约束为 Enum，因此您需要在运行时检查它：

```
public static Dictionary<int, string> GetEnumDictionary<T>()
{
    if(!typeof(T).IsEnum)
       throw new ArgumentException("T is not an Enum type");
    return Enum.GetValues(typeof(T))
       .Cast<T>()
       .ToDictionary(t => (int)(object)t, t => t.ToString());
} 
```

**编辑 ：**

正如 svick 正确指出的那样，枚举的基础类型可以不同于`int`. 因此，例如，它不适用于以下枚举：

```
enum MyEnum : long
{
   Foo,
   Bar,
} 
```

为了更安全，也许您还应该在运行时检查：

```
public static Dictionary<int, string> GetEnumDictionary<T>()
{
    if (!typeof(T).IsEnum)
        throw new ArgumentException("T is not an Enum type");
    if (Enum.GetUnderlyingType(typeof(T)) != typeof(int))
        throw new ArgumentException("The underlying type of the enum T is not Int32");
    return Enum.GetValues(typeof(T))
        .Cast<T>()
        .ToDictionary(t => (int)(object)t, t => t.ToString());
} 
```

最后一点。

您可以更改代码以支持具有适合`Int32`. 实际上，您可以简单地放置 a`Convert.ToInt32()`而不是使用直接转换，`int`或者，如其他答案中正确显示的那样，您可以利用该`IConvertible`接口。
但是，在我看来，它并没有给你带来很多好处。由于此方法不是真正的类型安全，因此您应该在知道自己在做什么时使用它；因此，如果您想要一个“长枚举”中的字典（例如），只需使用/制作另一种方法......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T11:33:16.180

错误在这里：

```
.Cast<typeof(T)>() 
```

您正在尝试使用`Type`该类的实例作为泛型参数，您应该使用该类型：

```
.Cast<T>() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T11:37:28.843

您可以这样做：

```
public static IDictionary<int, string> GetEnumDictionary<T>()
where T : IConvertible
{
    return Enum
       .GetValues(typeof(T))
       .Cast<T>()
       .ToDictionary(
           t => t.ToInt32(CultureInfo.InvariantCulture)
       ,   t => t.ToString()
       );
} 
```

您的代码中有几个小问题：

*   `Cast`应该是，`T`不是`typeof(T)`
*   禁止强制`T`转换`int`，因此您需要使用`enum`s 是`IConvertible`

这是[关于 ideone 的快速演示](http://ideone.com/wPUI8K)。

# java - 如何根据整数数组对对象集进行排序

> ID：15039941
> 
> 赞同：1
> 
> 时间：2013-02-23T11:20:19.753
> 
> 标签：java, sorting

我有一个名为变量的类

```
Class Variable{ private String name; private int[] domain; //...etc} 
```

它表示特定结构中的变量（约束满足问题）。

我在 ArrayList< 变量 > 中实例化了一组变量并填充了一个整数数组。

```
 ArrayList<Variable> vars=new ArrayList<Variable>();
 Variable a=new Variable("A",new int[]{1,2});
 vars.add(a);
 // Define all variables;
 int[] cons=new int[vars.size()];
  for(int i=0;i<cons.length;i++)
    cons[i]=number_of_constraints(vars.get(i));
    // cons contains number of involved constraints for each variable 
```

现在我需要根据约束的数量对它们进行降序排序。

换句话说：给定对象列表 `[(A,{1,2}) , (B,{3,4}) , (C,{5,6}) ]`和整数数组`cons={1,2,0}`如何根据整数数组对对象列表进行降序排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:30:36.910

如果您想保持 Class`Variable`完整，以下代码将对给定的`vars`外部进行排序：

```
 Collections.sort(vars, new Comparator<Variable>() {
       public int compare(Variable var1, Variable var2) {
           return var2.number_of_constraints() - var1.number_of_constraints();
    }}); 
```

如果你可以改变 Class `Variable`，让它实现接口`Comparable`：

```
class Variable implements Comparable<Variable> {
    //...

    public int compareTo(Variable other) {
        return this.number_of_constraints() -
               other.number_of_constraints();
    }
} 
```

然后您可以按以下方式排序`vars`：

```
Collections.sort(vars); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T11:31:46.180

使用排序集合，如`TreeSet`

```
class Variable {

    private String name;
    private int[] domain;
};
final Set<Variable> variables = new TreeSet<Variable>( new Comparator<Variable>() {

    public int compare(Variable o1, Variable o2) {
        //Do comparison here
        //return -1 if o1 is less than o2
        //1 if o1 is greater than o2
        //0 if they are the same
    }
}); 
```

现在你有一个排序`Set`的`Variable`s。这保证总是被排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:27:41.007

您的 Variable 类应该实现[Comparable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)接口，当它实现时，您应该实现[compareTo](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html#compareTo%28java.lang.Object%29)方法。

之后，您可以通过调用[Collection.sort](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法对其进行排序。

如果您想按排列排序，如果您的索引只是创建一个新`ArrayList`索引并将每个索引映射到新索引（使用 for 循环）

这是这样一个（通用）方法

```
public static <T> ArrayList<T> permutate(ArrayList<T> origin,int[] permutation){
        ArrayList<T> result = new ArrayList<T>(permutation.length);
        for(int j=0;j<permutation.length;j++){
            result.add(null);
        }
        for(int i=0;i<permutation.length;i++){
            result.set(i, origin.get(permutation[i]));
        }
        return result;
    } 
```

你可以做`myArrayList= permutate(myArrayList, new int{1,2,3});`

这是更基本用例（整数）中的示例用法：

```
public static void main(String... args){
    ArrayList<Integer> origin = new ArrayList<>(4);
    origin.add(1);
    origin.add(2);
    origin.add(3);
    origin.add(4);

    int[] per = new int[]{2,1,3,0};
    origin = permutate(origin,per);
    System.out.println(Arrays.toString(origin.toArray())); //prints [3,2,4,1], your permutation
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T11:31:58.393

至于`Variable`contains `numOfConstraints`，根据您的代码，您可以使您的`Variable`类实现`Comparable`接口，例如

```
public class Variuable implements Comparable<Variable> {

    private int numOfConstraints;

    public int compareTo(Variable other){
        if(this == other) { return 0; }
        return (numOfConstraints == other.numOfConstraint) ? 0 : ((numOfConstraints > other.numOfConstraint) ? 1 : -1);
    }

} 
```

然后使用实用方法`java.util.Collections.sort(vars);`，就是这样。

# silverlight - 更新依赖属性一次而不是两次

> ID：15039944
> 
> 赞同：0
> 
> 时间：2013-02-23T11:20:30.850
> 
> 标签：silverlight, data-binding, mvvm, viewmodel, inotifypropertychanged

在我的 ViewModel 中，我有两个属性类型的 Datetime。它们以 TwoWay 模式绑定在 XAML 中。当我更新它们中的每一个时 - OnPropertyChanged 在第三个属性的此 Datetime 属性的设置部分中引发。因此，当我同时更新两个 Datetime 属性时，我只想更新第三个属性一次，而不是更新第三个属性两次。如何归档？应用代码：

```
//1
public DateTime StartDate
{
    ...
    set
    {
        this.selectedEndDate = value;
        this.OnPropertyChanged("StartDate");
        this.OnPropertyChanged("MyList");
    }
}
//2
public DateTime EndDate
{
    ...
    set
    {
        this.selectedEndDate = value;
        this.OnPropertyChanged("EndDate");
        this.OnPropertyChanged("MyList");
    }
}
//third property
public IEnumerable<MyObject> MyList
{
    get
    {
        return _data.Where(kvp=> kvp.Key.Date >= Start && kvp.Value.Date <= End).Select(kvp => kvp.Value);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:04:27.280

您可以通过每当日期属性之一更改时启动的计时器来延迟`MyList`属性更改通知。这不仅可以在两个属性“同时”更改时避免双重通知，而且还可以防止在其中一个属性更改过于频繁时出现频繁通知。

通过停止并重新启动计时器，每次属性更改都会重置计时器，因此您可以在实际通知属性更改之前进行许多后续属性`MyList`更改。

下面的代码示例使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/ms615945%28v=vs.95%29.aspx)来执行此任务。当然，您必须为该值找到一个合理的`Interval`值。

```
private DispatcherTimer notifyTimer;

public ViewModel()
{
    notifyTimer = new DispatcherTimer { Interval = TimeSpan.FromMilliseconds(200) };
    notifyTimer.Tick += OnNotifyTimerTick;
}

private void OnNotifyTimerTick(object sender, EventArgs e)
{
    OnPropertyChanged("MyList");
    notifyTimer.Stop();
}

public DateTime StartDate
{
    ...
    set
    {
        selectedEndDate = value;
        OnPropertyChanged("StartDate");
        notifyTimer.Stop();
        notifyTimer.Start();
    }
}

public DateTime EndDate
{
    ...
    set
    {
        selectedEndDate = value;
        OnPropertyChanged("EndDate");
        notifyTimer.Stop();
        notifyTimer.Start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:49:51.337

正如我所看到的，用户更改 startDate 拳头 endDate 秒。? 或相反亦然。

下面的代码有机会，

```
 bool fistChanged,endChanged;

         on Ctor (Constructor)
         this.PropertyChanged+=(s,p)=>
         {
                if(p.PropertyName=="firstDate")
                {
                 firstChanged=true;
                }
                if(p.PropertyName=="endDate")
                {
                 endChanged=true;
                }
                if(firstChanged && endChanged)
                {
                    this.OnPropertyChanged("MyList");
                    fistChaned=false;endChanged=false;
                }
         } 
```

# android - 如何使用列表视图创建多级列表

> ID：15039949
> 
> 赞同：0
> 
> 时间：2013-02-23T11:21:12.597
> 
> 标签：android, listview, gson

以下是我来自数据库的 Json 数据，我想在列表中列出 interest_name（仅当可见为真时）。列表必须是多级的。我使用 Gson 库解析了 json 文件。但我不知道如何使用列表视图制作多级列表。

```
 {"interest_id":0,"interest_name":"ROOT","visible":false,"children":
            [{"interest_id":1,"interest_name":"Sports","visible":true,"children":[{"interest_id":2,"interest_name":"Archery","visible":true,"children":[]},{"interest_id":3,"interest_name":"Bow Hunting","visible":true,"children":[]}]},{"interest_id":100,"interest_name":"Contry","visible":true,"children":[{"interest_id":101,"interest_name":"Afghanistan","visible":true,"children":[]},{"interest_id":102,"interest_name":"Akrotiri","visible":true,"children":[]}]},{"interest_id":1000,"interest_name":"Education","visible":true,"children":[]},{"interest_id":1200,"interest_name":"Entertainment","visible":true,"children":[]},{"interest_id":1400,"interest_name":"Books","visible":true,"children":[]},{"interest_id":1600,"interest_name":"Services","visible":true,"children":[]},{"interest_id":1800,"interest_name":"Fitness","visible":true,"children":[]},{"interest_id":2000,"interest_name":"Fashion","visible":true,"children":[]},{"interest_id":99999,"interest_name":"Near Me","visible":false,"children":[]}]} 
```

我的代码：

主页.java

```
 Intent intent = new Intent( Home.this,InterestAddList.class);
             startActivity(intent);
                finish(); 
```

InterestAddList.java

```
public class InterestAddList extends Activity {
ListView intrestListView;
OneOnOneListAdapter adapter;
List<String> intrestList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intrest_add);

    intrestListView = (ListView) findViewById(R.id.InterestList);
    //Service Called For retrieving Data 
    retrieveList();

}
public void retrieveList() {

    intrestList = new ArrayList<String>();

    StringBuilder urlc = new StringBuilder(urlPrefix + "gai");
    String url=urlc.toString();
        Gson gson = new GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.UPPER_CAMEL_CASE).create();

        String result = ServiceClient.getInstance().getResponse(url);
        InterestNode ni=gson.fromJson(result, InterestNode.class);

        //for(int i=0;i<ni.length;i++){
            //Log.e("ni", ni.getInterestName());
            //Log.e("ni", String.valueOf(ni.getInterestId()));
        /* how to display interest name */
        intrestList.add(ni.getInterestName());
    }

    adapter = new OneOnOneListAdapter(InterestAddList.this,R.layout.intrest_add_row,intrestList);   
    intrestListView.setAdapter(adapter);

}

private class OneOnOneListAdapter extends ArrayAdapter {

    public OneOnOneListAdapter(Context context, int textViewResourceId,
            List objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public long getItemId(int position) {
        return super.getItemId(position);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        final int aposition=position;
        if (v == null)
        {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.intrest_add_row, null);    
        } 

        TextView intrestText =(TextView)v.findViewById(R.id.IntrestText);
        intrestText.setText(intrestList.get(aposition).toString());

        v.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {

                System.out.println("OnItem CLicked");
                Toast.makeText(InterestAddList.this,"Position clicked:"+intrestList.get(aposition).toString(),Toast.LENGTH_SHORT).show();

                Intent i = new Intent(InterestAddList.this,SubIntrestAddList.class);
                i.putExtra("position", aposition);
                startActivityForResult(i,1);

            }

        });

        return v;
    }   
}} 
```

InterestNode.java

```
public class InterestNode {
    @SerializedName("interest_id")
    int interestId;
    @SerializedName("interest_name")
    String interestName;
    @SerializedName("visible")
    boolean isVisible;

    transient InterestNode parent;
    @SerializedName("children")
    List<InterestNode> childList = new ArrayList<InterestNode>();

    public List<InterestNode> getChildren(){
        return new ArrayList<InterestNode>(childList);
    }
    public int getInterestId() {
        return interestId;
    }

    public String getInterestName() {
        return interestName;
    }

    public InterestNode getParent() {
        return parent;
    }

    public boolean isVisible() {
        return isVisible;
    }

    public void addChild(InterestNode intNode){
        childList.add(intNode);
    }
    public void setInterestId(int interestId) {
        this.interestId = interestId;
    }

    public void setInterestName(String interestName) {
        this.interestName = interestName;
    }

    public void setParent(InterestNode parent) {
        this.parent = parent;
    }

    public void setVisible(boolean isVisible) {
        this.isVisible = isVisible;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:42:13.557

最好使用`Expandable ListView`添加多级列表。但是你想使用listview然后按照下面的好教程一步一步实现三级listiview。

[Android 多级 ListView 教程](http://www.androidhive.info/2012/10/android-multilevel-listview-tutorial/)

希望对你有帮助！

# jquery-mobile - 无法在 jquery mobile 中定位弹出窗口

> ID：15039954
> 
> 赞同：1
> 
> 时间：2013-02-23T11:21:33.610
> 
> 标签：jquery-mobile, popup

我正在使用 jQuery 手机。在我的网页中，我创建了一个以数据角色为标题的 div。在这里面，有一个图像。
现在，我创建了另一个带有数据角色弹出窗口的 div。当页面加载时，带有角色弹出窗口的 div 按预期隐藏。
当用户单击图像时，预计会显示弹出窗口。
确实如此。问题是它以与标题重叠的方式显示，并紧挨在触发弹出窗口的图像下方。

我通过将以下选项传递给图像选择器来调用弹出方法

```
$("#navBar").popup("open", {  
    x: 0,  
    y: 50,  
    transition: "reverse slide"  
}); 
```

这不能解决问题。相反，弹出窗口立即显示在触发它的图像下方。如果删除了 X 和 Y 选项，则弹出窗口将显示在窗口的中心。

更多信息 - 这是 jquery mobile 准备的代码：

```
<div class="ui-popup-container reverse slide in ui-popup-active" id="navBar-popup" style="max-width: 1271px; top: 30px; left: 15px;" tabindex="0"> 
```

这里可以看到jQuery Mobile添加了top=30px和left=15px的样式。
为了满足我的需求，我想要 top=40px 和 left=0px。我想在不覆盖基本 CSS 的情况下做到这一点。我希望传递给该`popup()`方法的 X 和 Y 选项可以解决问题，但它们不起作用！有助于理解的问题
图像[。](http://i.imgur.com/mzEStNa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T16:23:23.223

默认情况下，弹出窗口尝试直接定位在打开它的元素的顶部，如果您使用 API 执行此操作并指定 x 和 y，它将尝试在给定坐标处**居中弹出窗口。**但是为了避免弹出显示屏幕，jquery mobile 还强制在弹出对话框和屏幕边缘之间进行填充，默认情况下，这些填充边距是垂直 30 和水平 15。所以你的小狗被定位的原因是由于这些公差。

要将弹出窗口定位到您想要的精确 x 和 y，您需要将弹出窗口宽度的一半添加到所需的 x，并将弹出窗口高度的一半添加到所需的 y。

# ios - NSURLConnection 可以使用安装在设备配置文件中的客户端证书吗？

> ID：15039956
> 
> 赞同：4
> 
> 时间：2013-02-23T11:21:47.873
> 
> 标签：ios, nsurlconnection, nsurlconnectiondelegate

我有这个设置：

1.  配置为使用 ssl 客户端证书身份验证的 tomcat 服务器 (clientAuth=true)
2.  安装了有效客户端证书的 ipad（以 .p12 文件的形式通过电子邮件发送并在配置文件下可见）

通过 ios safari 浏览时，ipad 使用客户端证书并对服务器进行身份验证。

但是在代码中，使用 NSURLConnection，它不会连接。在服务器上调试显示客户端根本没有发送和证书。

在客户端我收到这样的错误：

```
Request(https://192.168.1.5:8443/device/security/policy>, 0, 0)) didFailWithError:Error   Domain=NSURLErrorDomain Code=-1205 "The server “192.168.1.5” did not accept the certificate." UserInfo=0xe2eae30
{NSErrorFailingURLStringKey=https://192.168.1.5:8443/device/security/policy>, NSErrorFailingURLKey=https://192.168.1.5:8443/device/security/policy>, NSLocalizedDescription=The server “192.168.1.5” did not accept the certificate.,
NSUnderlyingError=0xe2eb250 "The server “192.168.1.5” did not accept the certificate.",  NSURLErrorFailingURLPeerTrustErrorKey=<SecTrustRef: 0xe6ab010>} 
```

我知道我可以为 NSURLAuthenticationMethodClientCertificate 保护空间的挑战实现委托方法，但如果我这样做，我没有要发送的证书，它安装在设备上并且无法通过代码访问（是吗？？）我尝试调用[challenge.sender performDefaultHandlingForAuthenticationChallenge:challenge] 但这似乎没有效果。

我期待 NSURLConnection 会按照 safari 运行并访问已安装的证书，但似乎不是。我不想以某种方式将证书安装到我的应用程序中 - 这就是内置证书管理的用途！

还是我错过了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T02:24:12.773

从根本上说，您无法从 iOS 的应用程序中获取全局安装的证书（从 iOS 8 开始），并且操作系统不会通过使用 NSURLConnection 发送它们来帮助您。Safari 拥有访问证书的特殊权限。因此，从应用程序中使用它们的唯一方法是以某种方式将它们安装到应用程序中，这使得整个事情变得困难。

# android - 看不到点击意图附加信息的小部件

> ID：15039957
> 
> 赞同：4
> 
> 时间：2013-02-23T11:21:50.590
> 
> 标签：android, android-intent, android-widget, android-pendingintent

我已经构建了一个带有 imageview 的小部件。我希望当用户单击图像视图时，将启动一个活动。该活动从意图（字符串，整数）中获得额外信息。它几乎可以工作，但是当小部件更新时，会获取旧的附加功能，而不是 AppWidgetProvider 中给出的新附加功能。我怎么解决这个问题？

在此先感谢，西蒙

应用小部件提供者：

```
package com.aquariumzoekenpro.android;

import java.io.InputStream;
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;

import com.aquariumzoekenpro.android.VissenDB.Vis;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.widget.RemoteViews;

public class Widget extends AppWidgetProvider {
    public static final String PREFS_NAME = "Vissen";
    static SharedPreferences sharedPreferences;
    PendingIntent pendingintent;
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){       
//      final int N = appWidgetIds.length;

            sharedPreferences = context.getSharedPreferences(PREFS_NAME, 0);            
            int rbitem = sharedPreferences.getInt("RBitem", 0);
//          int appWidgetId = appWidgetIds[i];          

            ComponentName thisWidget = new ComponentName(context, Widget.class);            
            VissenDB db = new VissenDB();
            int maxlength = db.lijst.size();
            Random r = new Random();
            int random = r.nextInt(maxlength - 0);      
            Vis v = db.lijst.get(random);
            int imageresource = context.getResources().getIdentifier(v.afbeelding, "drawable", context.getPackageName());
            InputStream is = context.getResources().openRawResource(imageresource);
            Bitmap bm = BitmapFactory.decodeStream(is);         
            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);
            views.setImageViewBitmap(R.id.widget_imageview, bm);            

            Intent clickintent = new Intent(context, VissenBeschrijving.class);
            clickintent.putExtra("list", rbitem);
            String text = "";
            if (rbitem == 0){
                text = v.naam;
            }else{
                text = v.latijnseNaam;
            }
            clickintent.putExtra("selected", text);
            clickintent.putExtra("Herkomst", "Encyclo");
            clickintent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);          
            pendingintent = PendingIntent.getActivity(context, 1, clickintent, 0);
            views.setOnClickPendingIntent(R.id.widget_imageview, pendingintent);
            appWidgetManager.updateAppWidget(thisWidget, views);

    }
    public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

        int width = bm.getWidth();      
        int height = bm.getHeight();        
        float scaleWidth = ((float) newWidth) / width;      
        float scaleHeight = ((float) newHeight) / height;       
        // CREATE A MATRIX FOR THE MANIPULATION     
        Matrix matrix = new Matrix();       
        // RESIZE THE BIT MAP       
        matrix.postScale(scaleWidth, scaleHeight);      
        // RECREATE THE NEW BITMAP      
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);     
        return resizedBitmap;

     }

} 
```

VissenBeschrijving（接收活动）：

```
 i = this.getIntent();       
    VissenDB db = new VissenDB();
    String h = i.getStringExtra("Herkomst");

    if (i != null && h !=null){
        text = i.getStringExtra("selected");
        RBitem = i.getIntExtra("list", -1);
        if (RBitem == 0){
            //Nederlandse naam
            for (VissenDB.Vis v : db.lijst) {
                if (v.naam.equals(text)){
                    vis = v;
                    break;
                }
            }
        }
        else{
            //Latijnse naam
            for (VissenDB.Vis v : db.lijst) {
                if (v.latijnseNaam.equals(text)){
                    vis = v;
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T11:41:33.900

如果我没记错的话，这是因为如果内容没有任何变化，它将重用旧意图。

尝试为您的点击意图添加一些**独特的东西。**例如：

```
clickintent.setData(Uri.withAppendedPath(Uri.parse("myapp://widget/id/#togetituniqie" + appWidgetId), String.valueOf(appWidgetId))); 
```

这是假设您知道 appWidgetId。否则，您可以使用其他独特的东西。像**UUID.randomUUID().toString()**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-03T18:22:54.747

对我来说，只需将 FLAG_UPDATE_CURRENT 添加到小部件提供程序中的待处理意图即可。

因此，在这种情况下，它将是：

```
pendingintent = PendingIntent.getActivity(context, 1, clickintent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

这样，用于打开活动的旧待处理意图似乎会使用从小部件提供者发送的新内容进行更新，包括内部意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T10:59:55.410

我遇到了同样的问题，我解决了简单地添加`PendingIntent.FLAG_ONE_SHOT`标志（如果你希望意图被触发一次）或`PendingIntent.FLAG_UPDATE_CURRENT`（如果你希望它将在每个点击事件上执行）：

```
Intent intent = new Intent(context, YourWidgetProvider.class);
intent.setAction(ACTION_NAME);
intent.putExtra("extraName", extraValue);
PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_ONE_SHOT);
remoteViews.setOnClickPendingIntent(R.id.view_id, pendingIntent); 
```

# php - 字段图像上传的Javascript表单验证？

> ID：15039965
> 
> 赞同：0
> 
> 时间：2013-02-23T11:22:38.440
> 
> 标签：php, javascript, jquery, forms, validation

我使用 javascript 对字段**图像上传**进行表单验证，但我坚持如何通过 javascipt 验证图像大小（宽度和高度），仅通过表单发布 600 宽度和 300 高度的图像。

因此，如果您有任何解决方案，请与 mi 共享演示代码。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:50:56.237

您可以在 javascript 端使用以下函数来检查图像是否具有所需的分辨率。

如果它具有正确的分辨率而不是继续提交表单，否则显示错误消息。

```
var _URL = window.URL || window.webkitURL;

$("#file").change(function(e) {
    var file, img;

    if ((file = this.files[0])) {
        img = new Image(); // create a Image object which contain height & width property of image
        img.onload = function() {
            alert(this.width + " " + this.height);
        };
        img.onerror = function() {
            alert( "not a valid file: " + file.type);
        };
        img.src = _URL.createObjectURL(file);
    }
}); 
```

# c++ - 检查条件时的无限循环 c++ !cin

> ID：15039969
> 
> 赞同：1
> 
> 时间：2013-02-23T11:23:20.907
> 
> 标签：c++

我基本上期待一个数字作为输入。现在这个幅度可以忽略不计，因为我知道我的 else if 循环工作正常。但是测试它的数字是否被证明有点棘手。如果用户输入字母数字或简单的单词，我只想再次调用该函数并重新开始。或按回车。不是数字的东西。我尝试了 !cin ，因为我正在输入`int numTemp`，但这只会导致无限循环溢出`"what is the bitrate"`无数次。有人知道我在做什么错吗？我尝试将`cin.clear()`and`cin.ignore(100, "\n")`放在第一个 if 语句中，但无济于事。提前致谢。

```
bool iTunes::setBitRate()
{
cout << "What is the bitrate? ";
int numTemp;
cin >> numTemp;
if (!cin)
{
    cout << "WRONG" << endl;
    setBitRate();
}
else if( numTemp < MIN_BITRATE || numTemp > MAX_BITRATE)
{
    cout << "Bit Rate out of range" << endl;
    setBitRate();
}
else
{
    bitRate = numTemp;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:26:53.543

当语句`cin >> numTemp`由于非数字输入而失败时，**不会**从输入流中删除导致失败的字符。因此，下次调用流提取运算符时，它将看到与上次相同的非数字输入。为避免这种情况，您需要跳过现有输入。

一种方法是`getline()`在尝试将其转换为整数之前读取整行文本。以下代码片段说明了这一点：

```
#include <cstdlib>

bool getint(istream& in, int & out) {
    string line;
    getline(in, line);
    char* endptr;
    out = strtol(line.c_str(), &endptr, 10);
    return endptr!=line.c_str();
}

bool iTunes::setBitRate()
{
    cout << "What is the bitrate? ";
    int numTemp;
    if ( !getint(cin, numTemp) && cin )
    {
        cout << "WRONG" << endl;
        setBitRate();
    }
    else if( numTemp < MIN_BITRATE || numTemp > MAX_BITRATE)
    {
        cout << "Bit Rate out of range" << endl;
        setBitRate();
    }
    else
    {
        bitRate = numTemp;
    }
} 
```

注意：您还应该在每次读取后检查 cin 的状态，以确保没有发生某些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:26:36.007

您可以只从用户那里读取一个字符串而不是一个 int，然后检查它并在您不喜欢该字符串时提示新输入（例如，如果它没有完全转换为数字，您可以检查`strtol`） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:27:12.327

如果要检查输入是数字还是字符，可以使用`isdigit`，但必须将其传递 a `char`，然后当它是数字时，可以将其转换为a `int`。`atoi`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-23T11:26:24.030

我认为这会有所帮助

```
bool iTunes::setBitRate()
{
  cout << "What is the bitrate? ";
  int numTemp = 0;
  cin >> numTemp;
  if (!numTemp)
  {
    cout << "WRONG" << endl;
    setBitRate();
  }
  else if( numTemp < MIN_BITRATE || numTemp > MAX_BITRATE)
  {
    cout << "Bit Rate out of range" << endl;
    setBitRate();
  }
  else
  {
     bitRate = numTemp;
  }
 } 
```

# php - php和flash之间如何通信

> ID：15039974
> 
> 赞同：1
> 
> 时间：2013-02-23T11:23:55.133
> 
> 标签：php, actionscript-3, web, flash

我有一个看起来像这样的 php 文件。

```
<?php
session_start();

$_SESSION['username']= ________;//Get data from swf file
$_SESSION['password']=_________;//Get data from swf file
?>

<!------EMBEDDING SWF FILE--->
<html>
    <body>
        <div id="flashContent">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1024" height="600" id="indexFLA" align="middle">
                <param name="movie" value="indexFLA.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                    <a href="http://www.adobe.com/go/getflash">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                    </a>
            </object>
        </div>
    </body>
</html> 
```

现在我想`$_SESSION[]`使用嵌入式闪存文件中的 actionscript3 设置变量。

我知道您可以`URLRequest("file.php")`用来与外部 php 进行通信，但我不确定这将如何与 swf 文件本身所在的 php 进行通信。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:31:39.297

您的 Flash 文件不在 PHP 中 :)。您只需将对象嵌入到 PHP 打印的 HTML 代码中。

现在，关于flash和PHP之间的通信：

*   在 flash 代码执行期间如何将变量从 PHP 发送到 flash 的示例：[https](https://stackoverflow.com/a/7620511/2028547) ://stackoverflow.com/a/7620511/2028547 - 您实际上加载了包含您的内容的 PHP 文件。
*   以及如何将变量从 Flash 发送到 PHP 的示例：[http ://forums.adobe.com/message/4215407](http://forums.adobe.com/message/4215407)

基本上：通过加载页面来传递变量（发送 POST 数据或打印出正确的内容）

[此外，您永远不应该通过简单地使用flashvars](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html)（也就是按照您的要求将其嵌入 HTML 代码）来传递敏感数据，例如用户名和密码- 同样您可以在屏幕上打印。这是完全不安全的。您应该在代码执行期间传递加密数据（或者更好：只有校验和）。不是任何知道如何查看网页源代码的人都可以阅读的方式。

# xslt - XSLT 1.0：当位置与变量值匹配时的 if 语句

> ID：15039977
> 
> 赞同：0
> 
> 时间：2013-02-23T11:24:06.190
> 
> 标签：xslt, foreach, position, xslt-1.0

我正在尝试将 IF 语句插入到现有的 FOR-EACH 循环中，以在它与来自另一个节点的变量匹配时做一些稍微不同的事情（我想要的节点实际上是它的父节点的兄弟 - 如果这有意义！？）。

该值是一个简单的整数。我基本上想说：如果位置等于变量号那么做XXXX。

这是 XSLT，我只能使用 v1.0 而不是 2.0。

```
<xsl:for-each select="/Properties/Data/Datum[@ID='ID1']/DCR[@Type='accordion_tab']/accordion_tab/sections">
<h3 class="accordionButton">
<xsl:if test="position()='openpane value to go here'">
    <xsl:attribute name="class">
    <xsl:text>new text</xsl:text>
    </xsl:attribute>
</xsl:if>
</xsl:for-each> 
```

我的 XML 提取在这里：

```
<sections>
<title>title</title>
<text>some text</text>
</sections>
<openpane>2</openpane> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:36:29.890

你没有在你的问题中说清楚，但我假设你迭代循环中的`sections`元素`for-each`。从`for-each`循环中，您可以`openpane`通过当前元素的父元素到达该`sections`元素：

```
<xsl:for-each select="sections">
    <xsl:if test="position() = ../openpane">
        ...
    </xsl:if>
</xsl:for-each> 
```

您还可以先定义一个引用该`openpane`元素的变量：

```
<xsl:variable name="openpane" select="openpane"/>
<xsl:for-each select="sections">
    <xsl:if test="position() = $openpane">
        ...
    </xsl:if>
</xsl:for-each> 
```

# c# - 使用 DataTable 时如何对列执行计算？

> ID：15039980
> 
> 赞同：3
> 
> 时间：2013-02-23T11:24:43.027
> 
> 标签：c#, winforms, datatable

我需要计算一列的总和并将其显示在`total.Text`. 我怎样才能做到这一点？此列有无限的数据，可以随时更改。我正在使用VS2010。我是 C# 的新手。

例子：

```
_____________________
| last_retail_price |
---------------------
|      500          |
|      200          |
|      5.60         |
---------------------
total.Text = 705.6  \\ The sum of column which I need 
```

我的代码：

```
private void add_click(object sender, EventArgs e) 
    SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=D:\\fuda\\Fuda.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable tl = new DataTable();
    da.SelectCommand = new SqlCommand("Select last_ret_prc from pur_temp", con);
    con.Open();
    da.Fill(tl);

    object sum_obj;
    sum_obj = tl.Compute("sum(last_ret_prc)");
    total.Text = sum_obj.ToString();
    con.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:58:52.407

像这样的东西：

```
var con = new SqlConnection(/*your connection string*/);
var cmd = conn.CreateCommand();
cmd.CommandText = @"Select Sum(last_ret_prc) FROM pur_temp GROUP BY last_ret_prc";
string sum_obj = cmd.ExecuteScalar().ToString();

total.Text = sum_obj;

con.Dispose(); 
```

现在 SQL 查询只返回一个值。的总和`last_ret_prc`。该方法`ExecuteScaler()`从第一行的第一列返回第一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T12:25:14.057

就目前而言，您的代码永远不会工作：

*   列名是 last_retail_price，但您在代码中使用了 last_ret_prc。
*   con.close 应该是 con.Close()。
*   DataTable.Compute 接受两个参数“表达式”和“过滤器”。您仍然需要提供第二个参数，即使它为空。

我已经清理了代码并在本地进行了测试，它工作正常：

```
SqlConnection con =
    new SqlConnection(
        @"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\fuda\Fuda.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
SqlDataAdapter da = new SqlDataAdapter();
DataTable tl = new DataTable();
da.SelectCommand = new SqlCommand("Select last_retail_price from pur_temp", con);
con.Open();
da.Fill(tl);

object sum_obj = tl.Compute("sum(last_retail_price)", null);
total.Text = sum_obj.ToString();
con.Close(); 
```

或者，如果您只希望显示总数，您可能最好在一个 SqlCommand 中执行此操作：

```
con.Open();
var command = new SqlCommand("SELECT SUM(last_retail_price) FROM pur_temp", con);
var result = command.ExecuteScalar();
total.Text = result.ToString();
con.Close(); 
```

# php - CakePHP：从模型访问 AppController

> ID：15039985
> 
> 赞同：0
> 
> 时间：2013-02-23T11:25:34.810
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.3.0，我需要能够在我的应用程序中的任何地方（来自控制器和模型）使用对象（记录器）。

该对象在 AppController 中创建，如下所示：

```
<?php
App::uses('Controller', 'Controller');
App::uses('Logger', 'Lib');

class AppController extends Controller {
    public function beforeFilter(){
        $this->Logger = new Logger(APP.'webroot/logs');
    }
}
?> 
```

这对控制器来说很好，我可以从应用程序的每个控制器中使用这个对象，这样：`$this->Logger->...`

但显然，它不适用于模型（因为模型不扩展 AppController）。

所以我需要：

1.  了解如何从模型访问控制器属性（记录器）
2.  或实现此目的的另一种方法（创建一个随处可访问的全局对象），而不是使用`AppController->beforeFilter()`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:32:37.327

坦率地说，你在做什么是绝对的废话。阅读 cakephp 手册上的[日志记录](http://book.cakephp.org/2.0/en/core-libraries/logging.html)章节，了解如何配置日志流以及如何写入日志流。

# apache - 通过 mod_rewrite 进行代理会减慢检索内容的速度吗？

> ID：15039990
> 
> 赞同：2
> 
> 时间：2013-02-23T11:26:11.903
> 
> 标签：apache, mod-rewrite

我正在使用[mod_rewrite 进行代理](http://httpd.apache.org/docs/2.2/rewrite/proxy.html)以从另一个域加载图像。我正在使用 P 标志来隐藏图像来自另一个域。然而，我想知道这是否会减慢检索图像的过程。该手册不是很清楚它实际上是如何工作的。它是在内部仅重定向请求还是自行检索内容并将其转发给用户（这会导致 IP 数据包被传输两次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:30:40.283

代理模块向后端资源发出额外的内部请求。因此，您最终会处理两个链接的 http 请求（由单个或两个服务器处理，取决于您的设置）。如果两个 url 位于同一系统上，则它不是 tcp 连接，而是必须处理的单独请求。

所以答案是“是”：图像的检索速度变慢了。

# javascript - 用于从网页中查找电子邮件地址的 Javascript 函数

> ID：15039993
> 
> 赞同：0
> 
> 时间：2013-02-23T11:26:36.413
> 
> 标签：javascript, regex

我想编写一个 javascript 函数来读取所有电子邮件地址并使其链接。例如，如果它发现`test@example.com`将其替换为`<a href="mailto:test@example.com">test@example.com</a>`.

我正在使用这个：

```
document.body.innerHTML = document.body.innerHTML.replace(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi, <a href="mailto:$1">$1</a>')); 
```

它适用于简单的电子邮件地址。

但问题是如果电子邮件地址已经采用这种格式：

```
"<a href="mailto:test@example.com">test@example.com</a>" 
```

然后它不起作用。输出变得像这样错误：

```
test@example.com">test@example.com 
```

请建议我任何解决方案。所以该功能可以正常工作。

或任何其他使简单电子邮件成为链接的功能，如果电子邮件已经在 mailto: 链接形式中，则什么也不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:59:27.610

这是一种仅在电子邮件之前的字符不是 , 或 时进行`>`替换的`:`方法。它基本上是一种模拟负面回顾的方式`"``'`

```
var str = ' test@example.com <a href="mailto:test@example.com">test@example.com</a> ',
    rex = /(["'>:]?)([\w.-]+@[\w.-]+\.[\w.-]+)/gi;

str = str.replace( rex, function ( $0, $1 ) {
    return $1 ? $0 : '<a href="mailto:' + $0 + '">' + $0 + '</a>';
});

// " <a href="mailto:test@example.com">test@example.com</a> <a href="mailto:test@example.com">test@example.com</a> " 
```

`\w`相当于`[a-zA-Z0-9_]`。

要更具体地了解何时阻止更换，您可以将`rex`上面的内容更改为类似

```
rex = /(<a href(?:(?!<\/a\s*>).)*)?([\w.-]+@[\w.-]+\.[\w.-]+)/gi; 
```

`<a href`如果电子邮件出现在和之间，这只会阻止替换`</a>`。

这些正则表达式解决方案都不是无懈可击的，但在某些情况下它们可能已经足够好了。

# jquery - jquery 在调用其中的一个小函数后停止完整的代码

> ID：15039997
> 
> 赞同：0
> 
> 时间：2013-02-23T11:26:53.617
> 
> 标签：jquery, function

我遇到了 jQuery 的问题。我正在根据我的需要改变伟大的 Rhinoslider。我想设置一个进度条，如果间隔时间不受滑块的影响，它基本上可以很好地工作。但正是这一步让我很困扰。

我希望每次效果完成时（每 10 秒）都执行我的进度条功能。

```
//run effect
                if(effects[settings.effect] == undefined){
                    console.log('Preparations for ' + settings.effect + ' not found.');
                }else{
                    //rerun progressbar
                    var progressBar = $('#progress-bar');
                    var barTime = settings.showTime;
                    var barEasing = 'linear';
                    function runProgress2(){
                        progressBar.width(0);
                        progressBar.animate({'width': "+=100%"}, barTime, barEasing);
                    };
                    runProgress2();

                    //do the effect
                    effects[settings.effect]($slider, params, resetElements);
                } 
```

您可以看到，我在打印整个函数后直接调用了 runProgress()。我的理解是，浏览器运行该功能并继续使用效果[设置 ...] 的东西。但事实并非如此。它只是停止工作。浏览器没有滑动效果，进度条一直以 100% 的宽度显示。完全关闭......我怎样才能在该代码中添加一条语句，以便浏览器继续执行？提前致谢 ：-）