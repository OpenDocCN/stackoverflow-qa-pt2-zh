# StackOverflow 问答 14757000-14757999

# javascript - AngularJS 可折叠/切换另一个 div 上的类

> ID：14757000
> 
> 赞同：1
> 
> 时间：2013-02-07T17:15:10.903
> 
> 标签：javascript, angularjs

几天前我刚开始使用 AngularJS，我想知道如何通过单击另一个 div 上的按钮来切换类，我想从 Twitter Bootstrap 实现可折叠的东西。他们所做的只是`in`向目标 div 添加一个类（其余部分由 CSS 处理）并设置 div 的高度。

我知道有 AngularUI Bootstrap，但他们只有一个 Accordion 可用，这不是很方便，因为我不会在可折叠内容附近的任何地方触发折叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:17:36.393

您可以在您的 div 上使用 ng-class：

```
 <div ng-class="{in: myvar == true}">foo</div> 
```

您只需在控制器中将 myvar 设置为 true ，就会应用 css。

# ios - 获得 iOS 根访问权限

> ID：14757001
> 
> 赞同：0
> 
> 时间：2013-02-07T17:15:14.993
> 
> 标签：ios, nsfilemanager

我不知道这是可能的，但我可以更改股票 iOS 文件吗？更具体地说，我不想在“/System/Library/CoreServices/”中编辑文件“SystemVersion.plist”，而是使用 NSDictionary。这就是我的代码的样子：

```
NSFileManager *fm = [[NSFileManager alloc] init];
NSArray *array;
fm = [NSFileManager defaultManager];

[fm changeCurrentDirectoryPath:@"/System/Library/CoreServices/"];
array = [fm contentsOfDirectoryAtPath:fm.currentDirectoryPath error:NULL];
NSLog(@"Path:%@ Items:%@", fm.currentDirectoryPath, array);

NSDictionary *systemVersion = [[NSDictionary alloc]  initWithContentsOfFile:@"SystemVersion.plist"];
[systemVersion setValue:@"7.0" forKey:@"ProductVersion"];
[systemVersion writeToFile:@"/System/Library/CoreServices/SystemVersion.plist" atomically:NO]; //This code doesn't overwrite the current file! 
```

我在网上找遍了，没有找到答案！我希望我除了越狱别无选择

更新：我问我如何从c或objective-c获得root访问权限会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:22:10.073

它不能使用公共 API 来完成，我怀疑是否有一个易于使用的私有 API。

但肯定存在允许程序获得 root 访问权限的可利用安全问题。没有这些越狱是不可能的。因此，如果您真的想要 root 访问权限，您应该研究越狱是如何完成的。这并不容易。

# c# - 将绘制的图像保存到文件夹中

> ID：14757003
> 
> 赞同：1
> 
> 时间：2013-02-07T17:15:25.580
> 
> 标签：c#, picturebox

我在pictureBox中绘制了一张图片，现在我想将它保存在文件夹中。我尝试了很多方法都没有奏效。我正在使用休闲代码绘制图像。我正在根据文本框值绘制图像。

```
 private void btnTransferBottleRegenerate_Click(object sender, EventArgs e)
    {

        float[] volumetransfer = new float[1];
        volumetransfer[0] = float.Parse(txtTransferVolume.Text);

        int[] percentages = new int[6];
        percentages[0] = int.Parse(txtTransferNotIdentified.Text);
        percentages[1] = int.Parse(txtTransferWaterBasedMud.Text);
        percentages[2] = int.Parse(txtTransferOilBasedMud.Text);
        percentages[3] = int.Parse(txtTransferWater.Text);
        percentages[4] = int.Parse(txtTransferHydrocarbonLiq.Text);
        percentages[5] = int.Parse(txtTransferGas.Text);

        Color[] colors = new Color[6];
        colors[0] = Color.Gray;
        colors[1] = Color.Chocolate; 
        colors[2] = Color.SaddleBrown;
        colors[3] = Color.Blue;
        colors[4] = Color.Red;
        colors[5] = Color.Lime;

        // Finally, call the method 
        DrawPercentages(percentages, colors, volumetransfer);

        //string filename = Application.StartupPath + "\\volumetransfer.jpg";

       // pictureBox1.Image.Save(Application.StartupPath + "\\Image\\picture1.jpg");
      //  pictureBox1.Refresh();
      //  if (pictureBox1 != null)
       // {
            pictureBox1.Image.Save(Application.StartupPath + "\\test.bmp");
       // }
    }

    private void DrawPercentages(int[] percentages, Color[] colors, float[] volumetransfer)
    {
        // Create a Graphics object to draw on the picturebox
        Graphics G = pictureBox1.CreateGraphics();

        // Calculate the number of pixels per 1 percent
        float pixelsPerPercent = pictureBox1.Height / volumetransfer[0];

        // Keep track of the height at which to start drawing (starting from the bottom going up)
        int drawHeight = pictureBox1.Height;

        // Loop through all percentages and draw a rectangle for each
        for (int i = 0; i < percentages.Length; i++)
        {
            // Create a brush with the current color
            SolidBrush brush = new SolidBrush(colors[i]);
            // Update the height at which the next rectangle is drawn.
            drawHeight -= (int)(pixelsPerPercent * percentages[i]);
            // Draw a filled rectangle
            G.FillRectangle(brush, 0, drawHeight, pictureBox1.Width, pixelsPerPercent * percentages[i]);
        }
    }

} 
```

}

当我单击“重新生成”按钮时，它将在 pictureBox 中绘制图像，然后我想将其保存在文件夹中。我有这样的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:49:59.717

一个解决方案是在位图上绘制，将其设置为图像，`PictureBox`然后保存：

```
private void DrawPercentages(int[] percentages, Color[] colors, float[] volumetransfer){
   Bitmap bmp = new Bitmap(pictureBox1.Width, pictureBox1.Height);
   using(Graphics G = Graphics.FromImage(bmp)){
       //...
   }

   pictureBox1.Image = bmp;
} 
```

然后你的代码应该可以完美运行，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:51:36.107

首先，您应该在正确的[事件](http://msdn.microsoft.com/de-at/library/system.windows.forms.control.paint.aspx) `PictureBox1_Paint`中进行绘制，以便绘制的图像**保持可见**（*更好：*重新绘制），即使您的窗口得到例如：调整大小。

之后，您可以使用@Hans Passant 发布的片段 -[**如何保存图形对象**](https://stackoverflow.com/questions/4164190/how-to-save-graphics-object-as-image-in-c)以*将绘制的图像保存到磁盘*。

```
// global to be accesible within paint
float[] volumetransfer = new float[1];
int[] percentages = new int[6];
Color[] colors = new Color[6];

private void btnTransferBottleRegenerate_Click(object sender, EventArgs e)
{            
    /// initialization goes here

    // force pictureBox to be redrawn
    // so resizing your window won't let your rectangles disapear
    pictureBox1.Invalidate();

    using (var bmp = new Bitmap(pictureBox1.Width, pictureBox1.Height))
    {
        pictureBox1.DrawToBitmap(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height));
        bmp.Save(@"e:\temp\test.png"); //Application.StartupPath + "\\Image\\picture1.jpg"
    }
}

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    // use GraphicsObject of PaintEventArgs
    Graphics G = e.Graphics;

    float pixelsPerPercent = pictureBox1.Height / volumetransfer[0];
    int drawHeight = pictureBox1.Height;

    for (int i = 0; i < percentages.Length; i++)
    {
        SolidBrush brush = new SolidBrush(colors[i]);
        drawHeight -= (int)(pixelsPerPercent * percentages[i]);
        G.FillRectangle(brush, 0, drawHeight, pictureBox1.Width, pixelsPerPercent * percentages[i]);
    }           
} 
```

另一方面，您`DrawPercentage(..)`可以返回一个新**图像**- 之后您可以将其分配给图片框并将其保存为`pictureBox1.Image.Save(...)`

```
private void button1_Click(object sender, EventArgs e)
{
    float[] volumetransfer = new float[1];
    int[] percentages = new int[6];
    Color[] colors = new Color[6];

    /// initialization goes here

    pictureBox1.Image = CreateImage(volumetransfer, percentages, colors);
    pictureBox1.Image.Save(@"e:\temp\test.png");
}

private Image CreateImage(float[] volumetransfer, int[] percentages, Color[] colors)
{
    Image img = new Bitmap(pictureBox1.Width, pictureBox1.Height);
    Graphics g = Graphics.FromImage(img);

    float pixelsPerPercent = pictureBox1.Height / volumetransfer[0];
    int drawHeight = pictureBox1.Height;

    for (int i = 0; i < percentages.Length; i++)
    {
        SolidBrush brush = new SolidBrush(colors[i]);
        drawHeight -= (int)(pixelsPerPercent * percentages[i]);
        g.FillRectangle(brush, 0, drawHeight, pictureBox1.Width, pixelsPerPercent * percentages[i]);
    }

    return img;
} 
```

# objective-c - NSRect 的子视图不受 NSAffineTransform 影响

> ID：14757015
> 
> 赞同：1
> 
> 时间：2013-02-07T17:16:21.023
> 
> 标签：objective-c, cocoa

当应用 NSAffineTransform 旋转并转换为 NSRect 时，所有子视图都不会受到转换的影响。我已经包含了下面的代码。

```
- (void)drawRect:(NSRect)dirtyRect
    {

        NSAffineTransform * transform = [NSAffineTransform transform];
        [transform translateXBy:13.0 yBy:3.0];
        [transform rotateByDegrees:-45];
        [transform translateXBy:-13.0 yBy:3.0];
        [transform concat];

        NSImageView *imageViewWatchPointer;
        NSRect watchPointer = NSMakeRect(0, 0, 134, 49);
        imageViewWatchPointer = [[NSImageView alloc] initWithFrame:watchPointer];
        [imageViewWatchPointer setImageScaling:NSScaleNone];
        [imageViewWatchPointer setImage:[NSImage imageNamed:@"mastery_watch_pointer"]];
        [self addSubview:imageViewWatchPointer];

        [[NSColor blueColor] set];
        NSRectFill(watchPointer);  

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:02:20.957

你没有申请`transform`任何东西。您正在创建它，然后将其丢弃。无论如何，您永远不会在`drawRect:`. `drawRect:`用于自定义绘制当前视图，而不是用于管理视图层次结构。这样做的方式是，`NSImageView`每次重绘主视图时都会添加一个新视图。

我建议回到[Cocoa 绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html)以了解 Cocoa 绘图的工作原理。

查看您的代码，我认为您根本不需要`drawRect:`。您只想添加一个子视图，可能在`awakeFromNib`or中`initWithFrame:`。我假设您希望旋转视图。最简单的方法是给它一个支持层 ( `setWantsLayer:`)，然后`affineTransform`在该层上设置 。

或者，在 中`drawRect:`，您可以旋转上下文并仅绘制图像本身（不使用`NSImageView`）。有关如何进行自定义绘图的详细信息，请参阅 Cocoa 绘图指南。

# firebird2.5 - 在触发器中有效地选择多个值

> ID：14757020
> 
> 赞同：2
> 
> 时间：2013-02-07T17:16:28.067
> 
> 标签：firebird2.5

我想改进下面的代码，因为如果我可以为这个触发器避免它，我不在乎拥有所有这些选择语句。我需要在 INSERT 期间为几个字段放置默认值。该代码有效，我只是在寻找其他建议。谢谢！

```
SET TERM || ;
CREATE TRIGGER populate_defaults FOR units
ACTIVE
BEFORE INSERT
AS
BEGIN
      new.value1 = (select value1 from defaults);
      new.value2 = (select value2 from defaults);
      new.value3 = (select value3 from defaults);
      new.value4 = (select value4 from defaults);
      new.value5 = (select value5 from defaults);
      new.value6 = (select value6 from defaults);
      new.value7 = (select value7 from defaults);
      new.value8 = (select value8 from defaults);
      new.value9 = (select value9 from defaults);
END ||
SET TERM ; || 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:21:05.750

您可以进行单选；试试这个：

```
SET TERM || ;
CREATE TRIGGER populate_defaults FOR units
ACTIVE
BEFORE INSERT
AS
BEGIN
  select   value1, value2, value3, value4
         , value5, value6, value7, value8
         , value9
    from defaults
    into   new.value1, new.value2, new.value3, new.value4
         , new.value5, new.value6, new.value7, new.value8
         , new.value9
END ||
SET TERM ; || 
```

我只是不记得是否`new`必须以冒号为前缀，该练习取决于读者。

# solr - solr group.field 空指针异常

> ID：14757022
> 
> 赞同：0
> 
> 时间：2013-02-07T17:16:29.927
> 
> 标签：solr, nullpointerexception

我在使用 solr 的组功能时遇到问题。我根本无法使用该功能。这是问题的描述。

我使用的组字段定义如下。

字段名称="clusterid" type="string" indexed="true" 存储="true" multiValued="false"

索引的“clusterid”字段具有有效值。

最初，我尝试在上述字段中使用 Solrj 客户端 API 使用“组”功能。我开始收到“HTTP 状态 500 内部服务器错误...”假设参数的语法或顺序可能是一个问题，我决定使用 firefox 浏览器测试相同的功能。

```
.../solr/select/?q=title%3Acomputer 
```

使用有效的 clusterid 产生一组很好的结果。

但是，当我尝试使用 clusterid 字段对结果进行分组时，我得到一个空指针异常。这是用于分组的 url

```
.../solr/select/?q=title%3Acomputer&group=true&group.field=clusterid 
```

回应是

类型状态报告

> org.apache.solr.handler.clustering.ClusteringComponent.process(ClusteringComponent.java:89) 处 org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:186) 处的消息 null java.lang.NullPointerException org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376) 在 org.apache.solr.servlet.SolrDispatchFilter.execute( SolrDispatchFilter.java:365) 在 org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) .invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org. apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) 在 org.apache.tomcat.util.net.JIoEndpoint$ Worker.run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Thread.java:662)catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java: 109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662)catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java: 109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662)java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662 )java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:662 )

注意：我在 Windows XP 上使用 solr 版本 3.6.2。solrconfig 文件仅对默认设置的内存设置（增加值）进行了更改。

当我尝试使用多值字段作为分组字段时，响应消息非常清楚“多值”字段不能用于分组。当我使用非字符串字段进行测试时，我再次收到那些不是字符串字段等的响应。

但是，当提供了字符串类型的字段（clusterid 或任何其他字符串类型的字段）时，会抛出空指针异常。

我是否遗漏了任何明显的内容（在架构或 solrconfig 文件中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-25T19:42:02.877

我在使用 Solr 6.3 时遇到了同样的问题。似乎集群组件（您显然正在使用）无法从组响应中提取所需的数据。我发现的唯一解决方法是启用突出显示，然后集群似乎可以工作；但这会带来显着的性能损失。但是，如果您的结果很小，它可能是您的一个选择；对于更大的结果（> 200-300 文档），聚类似乎比突出显示花费更多的时间。我正在使用 Lingo 算法，也许使用 STC 会更好。

# c++ - (Windows) 同时打开同一个文件

> ID：14757023
> 
> 赞同：6
> 
> 时间：2013-02-07T17:16:31.680
> 
> 标签：c++, c, windows

我正在尝试在 Windows 中打开一个文件以同时写入和读取。我有一个程序（每隔一秒）写入文件和一个从文件中读取的程序。在 unix 中它可以正常工作，但在 windows 中不起作用（我无法打开已经打开的文件）。我用 fopen() 打开文件。

我怎么解决这个问题？

**编辑2：**

检查[`_fsopen`](http://msdn.microsoft.com/en-us/library/8f30b0db%28v=vs.80%29.aspx)它使用`FILE *`，并相应地设置共享标志。

**编辑：**

首先，一些代码：这是我以前打开文件的方式

```
 FILE* f = NULL;
        int res = fopen_s(&f, "c:\\temp\\File1.txt", "w");
        if (res != 0) return;

        while (true) {
            Sleep(1000);
            fprintf_s(f , "Some data");
        }
        fclose(f); 
```

读取是在其他应用程序中，但它确实发生`fscanf`了。

固定代码：

```
char d[] = "data";

HANDLE h = CreateFile("c:\\temp\\f.txt", GENERIC_READ | GENERIC_WRITE,
    FILE_SHARE_WRITE | FILE_SHARE_READ, NULL, CREATE_ALWAYS, /*FILE_ATTRIBUTE_NORMAL*/ FILE_FLAG_WRITE_THROUGH, NULL);

if (h == INVALID_HANDLE_VALUE) return 0;

DWORD bytesW;
while(true) {
    Sleep(100);
        WriteFile(h, d, strlen(d), &bytesW, NULL);
}

CloseHandle(h);
return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:26:21.710

Windows 和 Linux 都有默认打开文件的方式，`fopen`默认使用。

在 Windows 中，这意味着阻塞（一次只有一个进程可以打开一个文件）。

在 Linux 中，这意味着非阻塞。

`fopen`是一个高级 API。要自己选择文件的阻止策略，对于 Windows，您应该使用WinAPI 中的[OpenFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365430%28v=vs.85%29.aspx)。特别是，看看`OF_SHARE_*`标志。

# html - 我想要两行相邻的 HTML 表格

> ID：14757024
> 
> 赞同：0
> 
> 时间：2013-02-07T17:16:33.943
> 
> 标签：html

我正在编写一份 HTML 时事通讯，我正在尝试将表示 Bar 的编码黑色行附加到包含图像的下方行。问题是我的黑色行不包含单独的空格，并且它没有连接到该行。这是我的这段代码。

```
<table border="0" cellpadding="0" cellspacing="5" width="100%">
    <tbody>
        <tr>
            <td width="190" bgcolor="#000000">Bar</td>

            <td width="190" bgcolor="#000000">Bar</td>

            <td width="190" bgcolor="#000000">Bar</td>

        <tr>

            <td width="190" height="100" >
                <img src="/Users/Desktop/90snostalgia.jpg" alt="" width="190" height="130"/>
            </td>

            <td width="190" height="100">
                <img src="/Users/Desktop/90snostalgia.jpg" alt="" width="190" height="130"/>
            </td>

            <td width="190" height="100" >
                <img src="/Users/Desktop/90snostalgia.jpg" alt="" width="190" height="130"/>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:27:19.337

如果我理解正确的话，在你的 CSS 中添加这样的东西应该能让你到达那里。

```
* { color:#fff } /** not needed. just couldn't see your fonts **/
table { width:572px }
tr td { border-left:1px solid white; padding:5px }
tr td:first-child { border-left: none } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:21:09.040

这是因为单元格间距。尝试像这样反转单元格间距和单元格填充：

```
<table border="0" cellpadding="5" cellspacing="0" width="100%"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:20:53.380

更改表格标签上的单元格间距... Cellspacing="0"...

```
<table border="0" cellpadding="0" cellspacing="0" width="100%"> 
```

# php - PHP include 除非在某个页面上，然后包含不同的

> ID：14757042
> 
> 赞同：1
> 
> 时间：2013-02-07T17:17:51.667
> 
> 标签：php, menu, header, include

我有一个包含菜单的 php 站点。有一个部分我不想包含该菜单，但想包含一个不同的菜单。我确定我需要一个 if/else 但我正在苦苦挣扎。

我的索引是这样构建的
html 和 head
div 包装器
包含标题
包含页面构建
包含页脚

页面构建文件使用索引模板并调用每个页面内容。因此每个页面都使用相同的页眉和页脚。我想在特定部分使用第二个标题。

所以第 1、3、4、5、6、7、8 节使用标题 1
第 2 节使用标题 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:26:16.080

比如说，您有一个名为的文件`menu.php`，您希望将其包含在该文件中，并且您不想`index.php`在该菜单中包含一个名为`Loggin`. 好？现在，`menu.php`您可以这样做：

```
<p> Home </p><p> about</p><p> profile</p><p> blog</p><?php if(isset($allow)) {echo '<p> Loggin</p>';} else {echo "";} 
```

上面`if/else`你告诉 PHP，如果变量 $allow 有任何值 echo Loggin，否则什么都不显示。现在您所要做的就是包含您的菜单，但是如果您希望显示 Loggin，则在 index.php 中将 $value 设置为任何值，或者如果您不希望 loggin 不出现，则将其保留

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T17:20:58.277

您可以尝试使用：

```
if ($_SERVER['SCRIPT_NAME'] == "/page1.php") {
    include("fileToInclude.php");
} else {
    include("differentFileToInclude.php");
} 
```

# functional-programming - OCaml 中的分号和嵌套 if 表达式

> ID：14757043
> 
> 赞同：0
> 
> 时间：2013-02-07T17:17:53.947
> 
> 标签：functional-programming, ocaml

`semicolon (single and double)`好吧，我在使用`nested if else`OCaml 时遇到了问题。

例如

* * *

```
let union u p q = 
  let rec unionfy id_ary i =
    if i < Array.length id_ary then begin 
      if id_ary.(i) = p then begin 
        id_ary.(i) <- id_ary.(q);
        print_array id_ary 0;
      end
      unionfy id_ary (i + 1);
    end 
    else print_string "end of union";
  in
  unionfy u.id_ary 0;; 
```

* * *

编译器说`line 18, characters 29-95: Error: This expression is not a function; it cannot be applied`

有问题的行是`if id_ary.(i) = p then begin`，但我不明白为什么。

* * *

另外，谁能告诉我更多关于`semicolon`事物和的信息`nested if else`？

以下是我心中的一些问题：

1.  我什么时候使用`single semicolon`？如果我将它用于多个表达式，我是否必须`double semicolon`在最后一个表达式之后添加一个？
2.  我可以`begin end`在里面使用多个`nested if`吗？

3.  `else`如果结果是，我似乎不需要添加`unit and do nothing`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:35:19.890

问题是`end`。在这种情况下，整个`if`表达式应该返回`unit`，因此您需要在表达式末尾使用分号。另一个`end`不需要它，因为`if`表达式继续`else`从句。下面，我删除了不必要的分号并添加了剩余的分号，

```
let union u p q = 
  let rec unionfy id_ary i =
    if i < Array.length id_ary then begin 
      if id_ary.(i) = p then begin 
        id_ary.(i) <- id_ary.(q);
        print_array id_ary 0
      end;
      unionfy id_ary (i + 1)
    end 
    else print_string "end of union"
  in
  unionfy u.id_ary 0;; 
```

*编辑：* “规则”实际上是 OCaml 中分号的定义。它分隔返回的顺序表达式`unit`。之间的内容`begin ... end`是单数表达。整个`if`表达式也是一个表达式，但由多个表达式组成。所以第一个语句中包含的两个`if`语句是，

```
 if id_ary.(i) = p then begin ... end;
  unionfy id_ary (i + 1) 
```

# sql - SQL - 返回数字乘以查询结果

> ID：14757045
> 
> 赞同：0
> 
> 时间：2013-02-07T17:17:56.873
> 
> 标签：sql, sql-server-2008-r2

我对 SQL 服务器相当陌生（这是我在 StackOverflow 上的第二篇文章）。我目前正在使用 SQL Server 2008 R2。我有几个表已加入以下查询：

```
SELECT pt.first_name, pt.last_name, pt.provider_id, 
pt.last_visit_date, pl.last_name
FROM dbo.pm_patient pt
INNER JOIN dbo.ProviderList pl
ON pt.provider_id = pl.provider_id
WHERE pt.last_visit_date >= '02/01/2012' AND pt.last_visit_date <= '02/01/2013'
ORDER BY provider_id 
```

上述查询的结果如下所示：

```
first_name    last_name    provider_id   last_visit_date   last_name
Smith         John         1             04/25/2012        Johnson
Doe           Jane         1             02/25/2012        Johnson
Davies        Ann          1             03/15/2012        Johnson
Dupree        David        1             11/20/2012        Johnson
Jones         Becky        1             04/21/2012        Smith
Diaz          Mike         1             02/12/2012        Smith
Williams      Allison      1             08/05/2012        Smith
Taylor        Joe          1             10/01/2012        Smith 
```

我宁愿简单地得到以下结果：

```
last_name    NoOfPatients
Johnson      4
Smith        4 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:19:24.413

尝试 ：

```
SELECT pl.last_name, count(*) NoOfPatients
FROM dbo.pm_patient pt
INNER JOIN dbo.ProviderList pl
ON pt.provider_id = pl.provider_id
WHERE pt.last_visit_date >= '02/01/2012' AND pt.last_visit_date <= '02/01/2013'
GROUP BY pl.last_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:21:52.350

您需要阅读有关如何在查询中使用组的信息，基本上您需要做的是计算患者数量并按提供者分组。

```
SELECT pt.last_name, COUNT(pt.*) NoOfPatients
FROM dbo.pm_patient pt
INNER JOIN dbo.ProviderList pl
ON pt.provider_id = pl.provider_id
WHERE pt.last_visit_date >= '02/01/2012' AND pt.last_visit_date <= '02/01/2013'
ORDER BY provider_id
GROUP BY pt.last_name 
```

# .net - 跳过 ReSharper 7 中的自动完成括号

> ID：14757047
> 
> 赞同：6
> 
> 时间：2013-02-07T17:18:08.093
> 
> 标签：.net, visual-studio, resharper

ReSharper 在方法调用中自动完成左括号，我喜欢这样。我希望它继续这样做。然而！是否有一些简单的方法可以将插入符号移过自动完成的括号？

例如，当我输入： `Encoding.UTF8.GetBytes(`

我立即得到右括号： `Encoding.UTF8.GetBytes()`

然后我添加“测试”作为参数： `Encoding.UTF8.GetBytes("Test")`

但是现在，我的插入符号就在右括号之前。将我的手移到`END`键或箭头上很烦人，这样我就可以跳过自动完成的括号，这样我就可以添加一个分号：

`Encoding.UTF8.GetBytes("Test");`

也不做我想做的事`TAB`。`ENTER`以及这里给出的答案：[如何使用 Resharper 在 Visual Studio 中快速移动到生成的大括号/括号/等的末尾？](https://stackoverflow.com/questions/13651552/how-to-quickly-move-to-the-end-of-generated-braces-parenthesis-etc-in-visual-stu)建议我继续输入`)`. 但是，如果我无论如何都要输入括号，那么自动关闭括号有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:09:17.990

如果你想完全结束你当前的语句并且不仅超出所有')'，而且超出';'，那么你可以使用完整语句功能（Ctrl+Shift+Enter）。在此处查看更多信息[http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Complete_Statement.html](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Complete_Statement.html)

否则没有这样的功能，因为当你只需要跳过一个'）'时，你仍然需要按一个键才能跳过'）'，而Enter或Tab并不比'）'或右箭头更好 -没有用一个换另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:13:26.247

![锐器](../Images/4b7349e052beab5eb7eb996f93c93ca4.png)

取消选中该框！:) 它将停止自动完成括号！

# ibatis - 具有不明确的数据库列的嵌套 ResultMaps

> ID：14757050
> 
> 赞同：3
> 
> 时间：2013-02-07T17:18:21.403
> 
> 标签：ibatis

我在 iBatis 中有几个嵌套的 ResultMap，它们具有完全相同的数据库列名。这会导致歧义，并导致为不同的数据库表检索到不正确的结果。

例如，`

```
<sql namespace="Shipment">

       <resultMap id="consignment" class="com.model.Consignment">
              <result property="consignmentId" column="Consignment_cd" />
              <result property="shipmentCd" column="Shipment_cd" />
              <result property="shipmentUnit" column="Shipment_Unit" />
              <result property="location"  resultMap="Shipment.size" />
       </resultMap>

      <resultMap id="size" class="com.model.Size">
              <result property="consignmentId" column="Consignment_cd" />
              <result property="shipmentCd" column="Shipment_cd" />
              <result property="shipmentUnit" column="Shipment_Unit" />
      </resultMap>

    </sql> 
```

`

现在，当我编写加入 Size & Consignment 表的选择查询时，我得到相同的 Shipment Code 和 Shipment Unit 返回值，而数据库中这两列的值不同。请注意，我需要从单个查询中提取的尺寸和寄售级别中的装运代码和单位。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:16:10.993

我发现这个问题的唯一解决方案是在列名前加上表名或短名。您是自己编写查询吗？

您的选择看起来像

```
select consignment.Shipment_cd as consignment_Shipment_cd, 
       size.Shipment_cd as size_Shipment_cd
from consignment
join size on whatever 
```

是的，如果你想在同一个查询中得到很多东西，那是相当繁重的

# xml - 通用的 2010 OpenDocument 文本格式 (.odt) 与容易损坏的 2012 ODT 格式有何不同？

> ID：14757052
> 
> 赞同：1
> 
> 时间：2013-02-07T17:18:27.723
> 
> 标签：xml, templates, libreoffice, openoffice-writer, opendocument

您可能知道，**.odt**文件只是一个包含一些文件夹和**.xml文件的****.zip**文件。

 **我曾经很欣赏这一点，因为我可以制作一个文档模板`$KEYWORDS$`，以后可以使用脚本（例如 PHP）替换这些模板`$KEYWORDS`。`template.odt/content.xml`这在**2010 年**与`Open Office`.

*然而*，在**2011 年**，当使用新版本**或**`Open Office`新发布`LibreOffice`的. “*修复”*选项使文档工作正常。奇怪，但仍然可行。 ***`LibreOffice`***

 ****但是在**2012 年**，使用这些程序的最新版本创建模板时，点击*“修复”*选项会导致出现空白页面。这个技巧现在正式无法使用。

*.zip* ( ) 文件的文件结构在`.odf`我看来是一样的。看起来没有什么变化，但它一定有。这就*好像*创建了一个散列，当内容发生变化而散列没有变化时，软件“决定”无法修复文件。

文档格式发生了哪些变化？有没有办法我仍然可以以这种方式“自动化”我的文件？

随着[LibreOffice 4.0](http://blog.documentfoundation.org/2013/02/07/the-document-foundation-announces-libreoffice-4-0/)的发布，我记得我的这个问题仍然是我正在处理的一个问题，尽管[superuser.com 的问题](https://superuser.com/questions/426403/how-are-the-2010-opendocument-text-odt-from-openoffice-and-the-2012-one-from)没有得到太多关注。******

# python - 使用 Autobahn WebSocket 进行单元测试

> ID：14757054
> 
> 赞同：4
> 
> 时间：2013-02-07T17:18:32.693
> 
> 标签：python, websocket, twisted, autobahn

我正在尝试为使用高速公路的应用程序编写单元测试。

我想测试我的控制器，它从协议中获取接收到的数据，解析它并对它做出反应。

但是当我的测试到了应该断开协议时（`self.sendClose`）然后它会引发错误

```
exceptions.AttributeError: 'MyProtocol' object has no attribute 'state'. 
```

我试图`makeConnection`使用`proto_helpers.StringTransport`，但后来我也有错误

```
exceptions.AttributeError: StringTransport instance has no attribute 'setTcpNoDelay'` 
```

我正在使用`trial`并且我不想仅出于测试目的运行虚拟服务器/客户端，因为不建议这样做。

我应该如何编写测试，以便可以使用假连接和试用来测试发送数据、读取数据、断开连接等功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T00:08:33.500

`MyProtocol`如果不看课堂，很难准确地说出发生了什么。这个问题听起来很像它是因为你直接搞乱了低级函数，因此也是类的`state`属性，也就是说`WebSocket`，WebSocket 连接的内部状态的表示。

根据[高速公路参考文档](https://autobahnpython.readthedocs.org/)，您可以直接使用和覆盖的 API`WebSicketProtocol`是：

*   打开
*   onMessage
*   关闭
*   发信息
*   发送关闭

您使用`StringTransport`来测试您的协议的方法并不理想。问题在于autobahn 提供`MyProtocol`的框架之上的一个微小层，`WebSocketProtocol`无论好坏，它隐藏了有关管理连接、传输和内部协议状态的细节。

如果你考虑一下，你想测试你的东西，而不是`WebSocketProtocol`，因此如果你不想嵌入一个虚拟服务器或客户端，你最好的选择是直接测试`MyProtocol`覆盖的方法。

我所说的一个例子如下

```
class MyPublisher(object):
    cbk=None

    def publish(self, msg):
        if self.cbk:
            self.cbk(msg)

class MyProtocol(WebSocketServerProtocol):

    def __init__(self, publisher):
        WebSocketServerProtocol.__init__(self)
        #Defining callback for publisher
        publisher.cbk = self.sendMessage

    def onMessage(self, msg, binary)
        #Stupid echo
        self.sendMessage(msg)

class NotificationTest(unittest.TestCase):    

    class MyProtocolFactory(WebSocketServerFactory):
        def __init__(self, publisher):
            WebSocketServerFactory.__init__(self, "ws://127.0.0.1:8081")
            self.publisher = publisher
            self.openHandshakeTimeout = None

        def buildProtocol(self, addr):
            protocol =  MyProtocol(self.listener)
            protocol.factory = self
            protocol.websocket_version = 13 #Hybi version 13 is supported by pretty much everyone (apart from IE <8 and android browsers)
            return protocol

    def setUp(self):
        publisher = task.LoopingCall(self.send_stuff, "Hi there")        
        factory = NotificationTest.MyProtocolFactory(listener)
        protocol = factory.buildProtocol(None)
        transport = proto_helpers.StringTransport()
        def play_dumb(*args): pass
        setattr(transport, "setTcpNoDelay", play_dumb)
        protocol.makeConnection(transport)
        self.protocol, self.transport, self.publisher, self.fingerprint_handler =  protocol, transport, publisher, fingerprint_handler

    def test_onMessage(self):
        #Following 2 lines are the problematic part. Here you are manipulating explicitly a hidden state which your implementation should not be concerned with!
        self.protocol.state = WebSocketProtocol.STATE_OPEN
        self.protocol.websocket_version = 13
        self.protocol.onMessage("Whatever")
        self.assertEqual(self.transport.value()[2:], 'Whatever')

    def test_push(self):              
        #Following 2 lines are the problematic part. Here you are manipulating explicitly a hidden state which your implementation should not be concerned with!
        self.protocol.state = WebSocketProtocol.STATE_OPEN
        self.protocol.websocket_version = 13
        self.publisher.publish("Hi there")
        self.assertEqual(self.transport.value()[2:], 'Hi There') 
```

您可能已经注意到，使用`StringTransport`这里非常麻烦。您必须了解下划线框架并绕过它的状态管理，这是您不想做的事情。不幸的是，高速公路没有提供可以轻松进行状态操作的即用型测试对象，因此我使用虚拟服务器和客户端的建议仍然有效

* * *

## 使用网络测试您的服务器

提供的测试展示了如何测试服务器推送，断言你得到的是你期望的，并且还使用了一个关于如何确定何时完成的钩子。

## 服务器协议

```
from twisted.trial.unittest import TestCase as TrialTest
from autobahn.websocket import WebSocketServerProtocol, WebSocketServerFactory, WebSocketClientProtocol, WebSocketClientFactory, connectWS, listenWS
from twisted.internet.defer import Deferred
from twisted.internet import task 

START="START"            

class TestServerProtocol(WebSocketServerProtocol):

    def __init__(self):
        #The publisher task simulates an event that triggers a message push
        self.publisher = task.LoopingCall(self.send_stuff, "Hi there")

    def send_stuff(self, msg):
        #this method sends a message to the client
        self.sendMessage(msg)

    def _on_start(self):
        #here we trigger the task to execute every second
        self.publisher.start(1.0)

    def onMessage(self, message, binary):
        #According to this stupid protocol, the server starts sending stuff when the client sends a "START" message
        #You can plug other commands in here
        {
           START : self._on_start
           #Put other keys here
        }[message]()

    def onClose(self, wasClean, code, reason):
        #After closing the connection, we tell the task to stop sending messages
        self.publisher.stop() 
```

## 客户端协议和工厂

下一个类是客户端协议。它基本上告诉服务器开始推送消息。它调用`close_condition`它们以查看是否是关闭连接的时候了，最后，它调用`assertion`它收到的消息上的函数以查看测试是否成功

```
class TestClientProtocol(WebSocketClientProtocol):
    def __init__(self, assertion, close_condition, timeout, *args, **kwargs):
        self.assertion = assertion
        self.close_condition = close_condition
        self._received_msgs = [] 
        from twisted.internet import reactor
        #This is a way to set a timeout for your test 
        #in case you never meet the conditions dictated by close_condition
        self.damocle_sword = reactor.callLater(timeout, self.sendClose)

    def onOpen(self):
        #After the connection has been established, 
        #you can tell the server to send its stuff
        self.sendMessage(START)

    def onMessage(self, msg, binary):
        #Here you get the messages pushed from the server
        self._received_msgs.append(msg)
        #If it is time to close the connection
        if self.close_condition(msg):
            self.damocle_sword.cancel()
            self.sendClose()

    def onClose(self, wasClean, code, reason):
        #Now it is the right time to check our test assertions
        self.assertion.callback(self._received_msgs)

class TestClientProtocolFactory(WebSocketClientFactory):
    def __init__(self, assertion, close_condition, timeout, **kwargs):
        WebSocketClientFactory.__init__(self, **kwargs)
        self.assertion = assertion
        self.close_condition = close_condition
        self.timeout = timeout
        #This parameter needs to be forced to None to not leave the reactor dirty
        self.openHandshakeTimeout = None

    def buildProtocol(self, addr):
        protocol = TestClientProtocol(self.assertion, self.close_condition, self.timeout)
        protocol.factory = self
        return protocol 
```

## 基于试验的测试

```
class WebSocketTest(TrialTest):

    def setUp(self):
        port = 8088
        factory = WebSocketServerFactory("ws://localhost:{}".format(port))
        factory.protocol = TestServerProtocol
        self.listening_port = listenWS(factory)
        self.factory, self.port = factory, port

    def tearDown(self):
        #cleaning up stuff otherwise the reactor complains
        self.listening_port.stopListening()

    def test_message_reception(self): 
        #This is the test assertion, we are testing that the messages received were 3
        def assertion(msgs):
            self.assertEquals(len(msgs), 3)

        #This class says when the connection with the server should be finalized. 
        #In this case the condition to close the connectionis for the client to get 3 messages
        class CommunicationHandler(object):
            msg_count = 0

            def close_condition(self, msg):
                self.msg_count += 1
                return self.msg_count == 3

        d = Deferred()
        d.addCallback(assertion)
        #Here we create the client...
        client_factory = TestClientProtocolFactory(d, CommunicationHandler().close_condition, 5, url="ws://localhost:{}".format(self.port))
        #...and we connect it to the server
        connectWS(client_factory)
        #returning the assertion as a deferred purely for demonstration
        return d 
```

这显然只是一个例子，但正如你所看到的，我不必乱搞`makeConnection`或`transport`明确

# java - 使用 Jetty 标记文件编码

> ID：14757056
> 
> 赞同：0
> 
> 时间：2013-02-07T17:18:39.670
> 
> 标签：java, encoding, jetty, jsp-tags

当我将非 ascii 字母放入 .tag 文件时，这些字母未正确编码。

我的应用程序在码头 8.1.4 上运行。

如果 .tag 文件包含`é`，它将在生成的 HTML 页面中显示为`Ã©`. 当我将相同的字母放入 JSP 文件时，它会正确显示。如果我将相同的字符作为参数传递给标签，它会正确显示。

文件的编码是 UTF-8。结果页面也以 UTF-8 编码。在 ubuntu 上从 Eclipse 运行应用程序时，或者在 debian 服务器上的 jar 中部署标签时，我遇到了同样的问题。

我检查了jetty生成的java文件的标签，并将`é`get转换为：

```
out.write('Ã');
out.write('©'); 
```

所以标签预编译成java类的时候编码是错误的。

我可以在这一步控制编码，还是在 .tag 文件中指定编码？

* * *

这里有更多细节。

标记文件只包含一个字符：`é`。它被编码为`C3 A9`以十六进制查看（正确的 UTF-8 编码）。java文件如下：

```
package org.apache.jsp.tag.web.tagLink.layout;

import javax.servlet.*; import javax.servlet.http.*; import javax.servlet.jsp.*;

public final class test_tag
    extends javax.servlet.jsp.tagext.SimpleTagSupport
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.Vector _jspx_dependants;

  private JspContext jspContext;   private java.io.Writer _jspx_sout;  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public void setJspContext(JspContext ctx) {
    super.setJspContext(ctx);
    java.util.ArrayList _jspx_nested = null;
    java.util.ArrayList _jspx_at_begin = null;
    java.util.ArrayList _jspx_at_end = null;
    this.jspContext = new org.apache.jasper.runtime.JspContextWrapper(ctx, _jspx_nested,
_jspx_at_begin, _jspx_at_end, null);   }

  public JspContext getJspContext() {
    return this.jspContext;   }

  public Object getDependants() {
    return _jspx_dependants;   }

  public void doTag() throws JspException, java.io.IOException {
    PageContext _jspx_page_context = (PageContext)jspContext;
    HttpServletRequest request = (HttpServletRequest) _jspx_page_context.getRequest();
    HttpServletResponse response = (HttpServletResponse) _jspx_page_context.getResponse();
    HttpSession session = _jspx_page_context.getSession();
    ServletContext application = _jspx_page_context.getServletContext();
    ServletConfig config = _jspx_page_context.getServletConfig();
    JspWriter out = jspContext.getOut();

    try {
      out.write('Ã');
      out.write('©');
    } catch( Throwable t ) {
      if( t instanceof SkipPageException )
          throw (SkipPageException) t;
      if( t instanceof java.io.IOException )
          throw (java.io.IOException) t;
      if( t instanceof IllegalStateException )
          throw (IllegalStateException) t;
      if( t instanceof JspException )
          throw (JspException) t;
      throw new JspException(t);
    } finally {
      ((org.apache.jasper.runtime.JspContextWrapper) jspContext).syncEndTagFile();
    }   } } 
```

查看两个`out.write`调用的参数时，它们是`C3 83`和`C2 A9`。其余的只是普通的 ASCII。

我创建了一个仅包含测试标记的 JSP 页面，当从浏览器查看时，我收到 : `C3 83 C2 A9`。这是使用 Fiddler2 拍摄的图片，浏览器是 IE8 ：

![从码头服务器接收到的数据](../Images/d4d860863d8afdee935686d577084826.png).

如果我将`é`字符直接放在 JSP 页面中，它将被编码为`C3 A9`在 java 生成的文件中，并在浏览器收到的消息中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:03:14.457

如果要生成 HTML，请不要在 JSP 中使用直接的 UTF-8 字节。

快速检查我最喜欢的 UTF-8 实用程序表明您的角色是：

[http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=C3+A9&mode=bytes](http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=C3+A9&mode=bytes)

因此，请改用以下方法之一。

*   `&#233;`（数字 UTF-8 序列，在大多数浏览器中得到最佳支持）
*   `&#x00E9;` （十六进制 UTF-8 序列，适用于大多数浏览器）

这是一个 HTML 示例：

```
<html>
  <body>
    Example (numeric UTF-8): &#233; <br/>
    Example (hex UTF-8); &#x00E9; <br/>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T15:53:47.787

Jan 给出了正确的答案。

在标记文件中添加以下行将更正此问题：

```
<%@tag pageEncoding="UTF-8"%> 
```

# c# - Windows Store 应用程序 BackgroundTask 内存泄漏

> ID：14757057
> 
> 赞同：1
> 
> 时间：2013-02-07T17:18:39.653
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我的 Windows Store 应用程序中存在相当严重的内存泄漏问题。由于它甚至在后台泄漏，我认为 BackgroundTask 会导致泄漏。泄漏非常严重，在 3 小时左右的时间里积累了 150MB。有任何想法吗？

```
public async void Run(IBackgroundTaskInstance taskInstance)
{
    var defferal = taskInstance.GetDeferral();
    var localFolder = ApplicationData.Current.RoamingFolder;
    var file = await localFolder.CreateFileAsync("notes.txt", CreationCollisionOption.OpenIfExists);
    string s = await FileIO.ReadTextAsync(file);
    RefreshTile(s);
    defferal.Complete();
}

private void RefreshTile(string notes)
{
    DateTimeFormatInfo info = DateTimeFormatInfo.CurrentInfo;
    TileUpdateManager.CreateTileUpdaterForApplication().Clear();
    XmlDocument tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideBlockAndText01);
    var tileTextAttributes = tileXml.GetElementsByTagName("text");
    tileTextAttributes.Item(4).AppendChild(tileXml.CreateTextNode(DateTime.Now.Day.ToString()));
    tileTextAttributes.Item(5).AppendChild(tileXml.CreateTextNode(info.GetDayName(DateTime.Now.DayOfWeek)));

    XmlDocument squareTileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquareText01);
    XmlNodeList squareTextElements = squareTileXml.GetElementsByTagName("text");
    squareTextElements.Item(0).AppendChild(squareTileXml.CreateTextNode(DateTime.Now.Day.ToString()));
    squareTextElements.Item(1).AppendChild(squareTileXml.CreateTextNode(info.GetDayName(DateTime.Now.DayOfWeek)));

    IXmlNode subnode = tileXml.ImportNode(squareTileXml.GetElementsByTagName("binding").Item(0), true);
    tileXml.GetElementsByTagName("visual").Item(0).AppendChild(subnode);

    TileNotification tile = new TileNotification(tileXml);

    TileUpdateManager.CreateTileUpdaterForApplication().Clear();
    TileUpdateManager.CreateTileUpdaterForApplication().EnableNotificationQueue(true);
    TileUpdateManager.CreateTileUpdaterForApplication().Update(tile);

    var loader = new Windows.ApplicationModel.Resources.ResourceLoader();
    string s = loader.GetString("NotepadText");
    loader = null;
    if (notes != null && notes.Trim() != "" && notes != s)
    {
        XmlDocument tile2Xml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideText04);
        var tile2TextAttributes = tile2Xml.GetElementsByTagName("text");
        tile2TextAttributes.Item(0).AppendChild(tile2Xml.CreateTextNode(notes ?? ""));

        TileNotification tile2 = new TileNotification(tile2Xml);
        TileUpdateManager.CreateTileUpdaterForApplication().Update(tile2);
    }
    else
    {
        TileUpdateManager.CreateTileUpdaterForApplication().EnableNotificationQueue(false);
    }
} 
```

**编辑**：没关系，找出问题所在，它实际上是在代码的另一部分。我创建了一个列表，每秒将其中一个元素分配给 UI。然后，在分配新的时，UI 似乎没有释放上一个，所以我有大量的列表悬而未决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:06:08.897

上面的代码中似乎没有任何内存泄漏。对于后台任务来说，3 小时内 150 MB 也相当多。在此期间实际触发了多少次？

您可以尝试什么都不做或禁用后台任务以查看它是否与内存泄漏有任何关系。

但是，最好的方法是在发现内存增加后分析内存的内容。由于目前没有任何适用于 Windows 应用商店应用程序的第三方内存分析器（据我所知），您需要使用[Debugging Tools for Windows](http://msdn.microsoft.com/en-US/windows/hardware/gg463009/)中的 WinDbg 。[这](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/10/15/diagnosing-memory-leaks-in-managed-windows-store-apps.aspx)是一篇不错的博客文章，可以帮助您入门。Filip Skakun[的这个 SO 回答](https://stackoverflow.com/a/13730498/197913)也可能会有所帮助。

# plone - plone.outputfilters.filters.resolveuid_and_caption：得到一个意外的关键字参数“报价”

> ID：14757058
> 
> 赞同：1
> 
> 时间：2013-02-07T17:18:41.400
> 
> 标签：plone

我已经开始在旧的 3.3.x 实例上看到这个：

```
 'views': <zope.app.pagetemplate.viewpagetemplatefile.ViewMapper object at 0x1153346c>}
  Module zope.tales.expressions, line 217, in __call__
  Module Products.PageTemplates.Expressions, line 163, in _eval
  Module Products.PageTemplates.Expressions, line 125, in render
  Module Products.Archetypes.ClassGen, line 56, in generatedAccessor
  Module wicked.fieldevent, line 29, in render
  Module zope.event, line 23, in notify
  Module zope.component.event, line 26, in dispatch
  Module zope.component._api, line 130, in subscribers
  Module zope.component.registry, line 290, in subscribers
  Module zope.interface.adapter, line 583, in subscribers
  Module wicked.fieldevent, line 16, in notifyFieldEvent
  Module zope.component._api, line 101, in getMultiAdapter
  Module zope.component._api, line 114, in queryMultiAdapter
  Module zope.component.registry, line 206, in queryMultiAdapter
  Module zope.interface.adapter, line 530, in queryMultiAdapter
  Module wicked.fieldevent.meta, line 78, in field_value
  Module Products.Archetypes.Field, line 1394, in get
  Module Products.Archetypes.BaseUnit, line 100, in transform
  Module Products.PortalTransforms.TransformEngine, line 181, in convertTo
  Module Products.PortalTransforms.chain, line 51, in convert
  Module Products.PortalTransforms.Transform, line 192, in convert
  Module plone.outputfilters.transforms.html_to_plone_outputfilters_html, line 47, in convert
  Module plone.outputfilters, line 6, in apply_filters
  Module plone.outputfilters.filters.resolveuid_and_caption, line 103, in __call__
  Module sgmllib, line 95, in feed
  Module sgmllib, line 129, in goahead
  Module sgmllib, line 283, in parse_starttag
  Module sgmllib, line 314, in finish_starttag
  Module plone.outputfilters.filters.resolveuid_and_caption, line 349, in unknown_starttag
TypeError: <lambda>() got an unexpected keyword argument 'quote' 
```

显然，Plone 3.3.x 和 plone.outputfilters 存在某种兼容性问题，可以通过适当的 pindown 解决。但是，我不确定涉及哪些组件，因此不确定有哪些已知好的设置来解决此问题。

在迁移所有站点之前，我想为此获得一个临时解决方案，因为如果您无人看管，旧的东西不应该只是分解:(

还可能涉及最新的安全修复程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:11:18.997

我也有一些旧的 3.3.5 网站，刚刚开始看到这个错误。到目前为止，将 plone.outputfilters 固定到 1.6 版似乎可以解决它。即，在 buildout.cfg

```
[versions]
...
plone.outputfilters = 1.6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:30:12.617

我打赌你正在使用 TinyMCE，这会拉出 p.outputfilters。

与 Plone-3 系列一样，默认编辑器是 Kupu，此更改可能是原因，显然已在 Plone-core 中修复：[https ://dev.plone.org/ticket/9938](https://dev.plone.org/ticket/9938)

引用 David Glick 的话：“由于历史原因，这些转换在 kupu 和 TinyMCE 中都实现了。这是一个维护问题，因为其中一个包中这些功能的错误修复通常不会移植到另一个包中。”

我想你必须根据这些变化应用补丁。

此更改也可能是相关的，因为此主题涉及核心和第三方编辑器代码： [https ://github.com/plone/plone.outputfilters/commit/e5067c8ef1894d1017d6bc81c5969112676840d5#plone/outputfilters/filters/resolveuid_and_caption.py](https://github.com/plone/plone.outputfilters/commit/e5067c8ef1894d1017d6bc81c5969112676840d5#plone/outputfilters/filters/resolveuid_and_caption.py)

使用当前未发布的 p.outputfilters 开发分支（撰写本文时为 1.9）也会有所帮助。

# php - MySQL 性能规划

> ID：14757062
> 
> 赞同：0
> 
> 时间：2013-02-07T17:18:54.650
> 
> 标签：php, mysql, performance

我正在编写一个系统来搜索房地产列表的 MySQL 数据库。我很关心性能，并想就如何处理这个问题提供一些意见。

最常被查询的表是“listings”表，它将包含超过 60 万条记录和 86 列。随着列表的变化，该表也将每 30 分钟更新一次。

几乎每次搜索都将针对状态为“活动”的记录，这将是 600k 记录中的大约 15k。但是，我需要保留我们内部报告的所有记录。此外，每个查询都可能会搜索各种参数（#beds、#baths 等），因此缓存可能不可行。

我正在考虑维护第二个表，其中包含标记为“活动”的记录的 PK。创建在列表的 PK 上连接的表的视图。但是，我知道在某些情况下，视图可能非常低效。

我确实有过维护两个数据库的想法，因为不活动的列表不会被频繁搜索并且需要更少的维护。

幸运的是它还没有投入生产，我有时间进行性能测试。还有一件事，这将托管在一个专用的 Linux 服务器上，前端是用 PHP 编写的。非常感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:30:04.997

我建议您创建一个存档表。您可以根据要求将流程设置为每 30 分钟或每天运行一次。

存档表将具有与原始表相同的列以及 EffDate 和 EndDate，它们具有记录处于活动状态时的日期/日期时间。

这样的表将可以在任何时间点重新创建历史记录——这将证明是有用的，我敢肯定。

您将需要代码来创建它。基本逻辑是使用存档中的最新版本（`EndDate is null`和`id = id`）查找表中的每条记录。然后：

1.  如果新记录不存在，则创建一个当前日期为 的新记录`EffDate`。
2.  如果存在且所有列都相同，则什么也不做。
3.  否则更新`EndDate`存档记录并执行 (1)。
4.  任何根本没有新记录的存档记录都应该`EndDate`设置为当前日期。

通常，我每天更新一次此类表格。

在执行此操作的代码中，我有一个丑陋的查询（Excel 帮助我构建它）进行比较并确定哪些记录是“新”、“已修改”和“已删除”。“已删除”和“已修改”记录将当前`EndDates`设置为当前日期。“新建”和“修改”记录然后获得`EffDate`设置为当前日期的新记录。

`EndDate`和的值`EffDate`可能比规定的多或少，这取决于更新的实际工作方式。例如，对于每晚更新，`EffDate`可能会设置为明天甚至是列表生效的日期。

# screenshot - 使用automator批量重命名图片

> ID：14757068
> 
> 赞同：1
> 
> 时间：2013-02-07T17:19:05.787
> 
> 标签：screenshot, automator

我有一个完整的截图文件夹，文件名如下：

```
http_www.mozilla.org.png
http_www.google.com.png 
```

我想删除 www 之前的每个元素。以及 .org 或 .com 之后的每个元素

我应该在mac上的automator中做什么来实现这样的事情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:59:00.710

如果你想重命名它们，试试这个 AppleScript：

```
 tell application "Finder" to set myFiles to files of (choose folder)
repeat with aFile in myFiles
    tell application "System Events" to set fileName to aFile's name
    set newName to do shell script "echo " & quoted form of fileName & " | sed 's/.*www\\.\\([A-Za-z0-9]*\\).*\\(\\.png$\\)/\\1\\2/'"
    tell application "System Events" to set aFile's name to newName
end repeat 
```

# android - 安卓 XML 解析

> ID：14757069
> 
> 赞同：0
> 
> 时间：2013-02-07T17:19:06.437
> 
> 标签：android

我的 XML 是
**Die Hollenparty，Comedyserie，39/55 分钟。Staffel 1, Folge 13 | Serie**

，但在 android textview 中显示是这样的。它添加了 (Â)

Die Hollenparty，Comedyserie，39/55 分钟。Staffel 1，Folge 13 | 意甲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T14:47:03.630

there are plenty of examples out there here is an example ,using XMLpullParser [CLICk](http://d-codepages.com/index.php/android/coding-advanced/24-xml-parsing-using-xmlpullparser-loading-images-using-lazy-loading)

# c# - 数据源到 ListItemCollection

> ID：14757071
> 
> 赞同：0
> 
> 时间：2013-02-07T17:19:16.440
> 
> 标签：c#, asp.net, web-controls

我正在寻找一种方法，它如何绑定 DataSource 中的数据可以通过 ListControl 类上的 Item 属性访问。

谁能给我一个例子，从传递的对象到 DataSource 的属性如何绑定到泛型类 ListItemCollection？如何通过代码完成翻译？

我希望看到的翻译是从 DataSet 到 ListItemCollection。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:03:42.197

```
// Setting up a dataset.  This dataset has no data; in real life you'd get the
// data from somewhere else, such as a database, and wouldn't need to build it.

DataSet ds = new DataSet();
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("ID"));
dt.Columns.Add(new DataColumn("Description"));
ds.Tables.Add(dt);

// Creating a list box. You'd probably have this declared in your HTML and wouldn't need to
// create it.  

ListBox listBox1 = new ListBox();

listBox1.DataSource = ds.Tables[0];
listBox1.DataValueField = "ID";
listBox1.DataTextField = "Description";
listBox1.DataBind(); 
```

如果您的问题是关于如何在幕后完成绑定，那么答案相当复杂。

# jquery - 画布出现在内容之上

> ID：14757075
> 
> 赞同：0
> 
> 时间：2013-02-07T17:19:30.057
> 
> 标签：jquery, css, html, canvas, z-index

即使`canvas`元素放置在网页内容之前，它也会出现在顶部。

```
<canvas id="cnv"></canvas>
<div id="content">
    blah blah
    <p>
         blahs
    </p>
</div> 
```

一种解决方案是将画布设置`z-index`为 -1，但这会停止`mousemove`触发。

为什么画布在上面？如何将它放在内容后面，同时仍然能够触发 mousemove？

[http://jsfiddle.net/YUx82/](http://jsfiddle.net/YUx82/)

注意：唯一允许我更改的 CSS 是用于画布的 CSS。
另一种解决方案是将 z-index 设置为 -1，然后以某种方式将 mousemove 从文档传递到画布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:33:06.513

试试看：

```
$("#cnv").on("transferMouseCoordinates", function(e, x, y){
  // voila!
});

$(document).on("mousemove", function(e) {
  // use e.pageX and e.pageY to get mouse position
  $("#cnv").trigger("transferMouseCoordinates", e.pageX, e.pageY);
}); 
```

# algorithm - 无向循环图中的最短路径

> ID：14757076
> 
> 赞同：1
> 
> 时间：2013-02-07T17:19:29.980
> 
> 标签：algorithm, graph-theory, graph-algorithm, shortest-path

有人可以解释一下如何给出一个无向图 G = (V; E); 边长 le > 0；和 E 中的边。

我们可以生成包含边 e 的最短循环的长度。

我了解如何在有向图中执行此操作，但我不确定如何使用无向图解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:25:41.620

不修改图形：设*e*为边*(u, v)*。选择两个节点中的一个——我将选择*u——*并从 u 开始运行一个普通的 Dijkstra/BFS，*并*稍作修改：在进行第一跳时，你*不能*将*v*添加到队列中。现在搜索*v*。

# html - HTML 表单：来自 url 的文件输入

> ID：14757080
> 
> 赞同：3
> 
> 时间：2013-02-07T17:19:54.767
> 
> 标签：html, django, file-upload

我想允许我的用户从他们的计算机上传文件，或者提供要上传的文件的 url。

有没有办法可以使用 HTML 文件输入来实现这两者？如果文件来自 POST 数据，我的 django 后端会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:33:46.190

不，不可能将`<input type="file" />`用于这两个目的。

文件输入无法处理字符串值。

# javascript - 将全局 javascript 数组传递给 jQuery 文档（准备就绪）

> ID：14757084
> 
> 赞同：0
> 
> 时间：2013-02-07T17:20:01.460
> 
> 标签：javascript, jquery, ajax, jquery-ui

我有以下从模板（jsRender）呈现的html

```
 <div class="noteActions top" style="z-index: 3;">
 <span onclick="noteAction('add', 13808, 0 );"></span>
 <span onclick="noteAction('update',13808, 106344 );"></span>
 <span onclick="noteAction('delete', 13808, 106344 );"></span>
 </div> 
```

我的问题是我在文档之外准备了一个函数，它正在设置一个数据数组，稍后，一个 jquery 对话框窗口通过 ajax 提交给处理程序以更新数据库

发生的事情是数据数组通过类选择器（pr-body，pr-title）正确传递了除 jquery vals 之外的所有内容，它们作为 NULL 传递

javascript - 外部文档（准备好）

```
 var updateUrl = 'handlers/Poster.ashx',
 data;
function noteAction(action, prospectID, noteID){
                data = { 
                 'operation': action, 
                 'prospectid':prospectID,                    
                 'note-body' : $('.pr-body').val(),
                 'note-title' : $('.pr-title').val(),
                 'note-id':noteID,
                 };
    if (action == 'add'){
        $( "#dialogPostIt" ).dialog("open", "option", "title", "Add Post It");
    } else if (action == 'update'){
        $( "#dialogPostIt" ).dialog("open", "option", "title", "Edit Post It");
    } else if (action == 'delete'){
        if (!confirm('Are you sure you want to delete')) return false;
        $.post(updateUrl+"?operation=delete&noteid="+noteID, function(data) {
        $('#stickyNote-'+noteID).remove();  
        });
    }
} 
```

jquery - 准备好文档

```
$(document).ready(function() {  
 $( "#dialogPostIt" ).dialog({autoOpen: false, modal:true,
buttons: {            
        'Save': function() {
            $.ajax({                    
                url: updateUrl,
                data: data,
                success: function(json, textStatus, jqXHR){ 
 ..... 
```

html

```
 <div id="dialogPostIt" >
 <form id="postItNow" action="" method="post" class="note-form">
 <label for="note-title">Title (description)</label>
 <input type="text" name="note-title" id="note-title" class="pr-title" value="" />

 <label for="note-body">Text of the note</label>
 <textarea name="note-body" id="note-body" class="pr-body" cols="30" rows="6">     </textarea>
 </form></div> 
```

我之前在对话框保存按钮函数（）中设置数据数组，效果很好，但我需要根据事件使一些数组元素动态化

根据我的要求，数组不必是全局的，我只是想不出另一种方法来做到这一点

一如既往，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:02:34.737

好吧，我觉得自己像个傻瓜，它实际上工作正常，问题是飞行员错误-_-

数据数组正确返回值，问题是还*没有值*，因为数据是在包含表单的后续对话框之前设置的，所以还没有填写表单值

修复

文档外的 javascript 准备就绪

```
function noteAction(action, prospectID, noteID){
                data = { 
                 'operation': action, 
                 'prospectid':prospectID,                    
                 'notebody' : '',
                 'notetitle' : '',
                 'noteid':noteID,
                 }; 
```

对话框中的 jquery（文档准备就绪）

```
 $( "#dialogPostIt" ).dialog({autoOpen: false, modal:true,
buttons: {            
        'Save': function() {
            data.notebody = $('.pr-body').val();
            data.notetitle= $('.pr-title').val(),
            $.ajax({                    
                url: updateUrl,
                data: data, 
```

# java - 新的 BigInteger(String) 性能/复杂性

> ID：14757086
> 
> 赞同：11
> 
> 时间：2013-02-07T17:20:11.603
> 
> 标签：java, performance, complexity-theory, biginteger

我想知道使用**构造函数构造 BigInteger**对象的性能/**复杂**性。**`new BigInteger(String)`**

 **考虑以下方法：

```
 public static void testBigIntegerConstruction()
  {
    for (int exp = 1; exp < 10; exp++)
    {
      StringBuffer bigNumber = new StringBuffer((int) Math.pow(10.0, exp));
      for (int i = 0; i < Math.pow(10.0, exp - 1); i++)
      {
        bigNumber.append("1234567890");
      }

      String val = bigNumber.toString();
      long time = System.currentTimeMillis();
      BigInteger bigOne = new BigInteger(val);
      System.out.println("time for constructing a 10^" + exp
          + " digits BigInteger : " + ((System.currentTimeMillis() - time))
          + " ms");
    }
  } 
```

此方法在开始时创建带有数字`BigInteger`的字符串对象，并且随着每次迭代而增加。它测量并输出构造相应对象所需的时间。`10^x``x=1``BigInteger`

在我的机器（Intel Core i5 660，JDK 6 Update 25 32 位）上，输出为：

```
time for constructing a 10^1 digits BigInteger : 0 ms
time for constructing a 10^2 digits BigInteger : 0 ms
time for constructing a 10^3 digits BigInteger : 0 ms
time for constructing a 10^4 digits BigInteger : 16 ms
time for constructing a 10^5 digits BigInteger : 656 ms
time for constructing a 10^6 digits BigInteger : 59936 ms
time for constructing a 10^7 digits BigInteger : 6227975 ms 
```

虽然忽略高达 10^5 的行（由于（处理器）缓存效果、JIT 编译等可能引入的失真），但我们可以**清楚地看到 O(n^2) 的复杂性**。请记住，`BigInteger`由于不变性，对 a 的每个操作都会创建一个新的操作，**这是对大量数字的主要性能惩罚**。

**问题：**

*   我错过了什么？

*   为什么会这样？

*   这在最近的 JDK 中修复了吗？

*   有没有其他选择？

**更新：**

我做了进一步的测量，我可以从一些答案中证实这一说法：
这似乎`BigInteger`针对后续的数值运算进行了优化，但代价是大量数字的更高建造成本，这对我来说似乎是合理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T17:28:01.110

从[源头](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java#BigInteger.%3Cinit%3E%28java.lang.String,int%29)上稍微简化一下，之所以如此，是因为在“传统”字符串解析循环中

```
for each digit y from left to right:
  x = 10 * x + y 
```

您遇到的问题是，不可避免地`10 * x`需要时间与 的长度呈线性关系`x`，并且对于每个数字，该长度或多或少地增长一个常数因子，这也是不可避免的。

（实际的实现比这更聪明一些——它试图一次解析一个`int`' 值的二进制数字，因此循环中的实际乘数更有可能是 1 或 20 亿——但是，是的，它仍然是二次的.)

也就是说，一个带有`10^6`数字的数字至少是一个 googol，这比我听说过的任何用于加密目的的数字都要大。您正在解析一个占用*2 MB 内存*的字符串。是的，这需要一段时间，但我怀疑 JDK 的作者没有看到针对这种罕见用例进行优化的意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:28:26.057

`BigInteger`如果指定为十进制数字，则 O(n^2) 工作是由十进制到二进制转换引起的。

此外，10^7 位是一个非常大的数字。对于像 RSA 这样的典型加密算法，您将处理 10^3 到 10^4 位。大多数`BigInteger`操作都没有针对如此大量的数字进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:29:54.997

您实际上是在测量解析字符串和创建 BigInteger 所需的时间。涉及 BigIntegers 的数值运算会比这更有效。**

# sql-server - 将多个查询合二为一

> ID：14757087
> 
> 赞同：1
> 
> 时间：2013-02-07T17:20:21.073
> 
> 标签：sql-server

我希望能够查询多个相同类型的参数（例如，几个 ID，只是为了保持示例简单），因此我只需执行一次过程，而不是为每个单独的 ID 执行一次。在我的单实例 proc 返回一个名称的地方，我的 get-all proc 将返回一个名称的单列表。

我现在拥有的：

```
EXEC MyProc(123);
EXEC MyProc(456);
EXEC MyProc(789); 
```

我想要什么：

```
// Square brackets aren't correct syntax,
// they just represent a list that contains x number of IDs
EXEC MyProc([123, 456, 789]); 
```

我可以这样做吗？如果可以，是否有一种简单的机制来处理不涉及游标和各种过于复杂的事情的事情？这甚至会被认为是一个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:29:14.480

要只执行一次 proc，您必须重构您的 proc 以使用多个 ID，因为没有 T-SQL 函数或语法糖可以为您执行此操作。

如果这是可变的，因为可能有一个或多个 ID，您必须在一个参数中将多个 ID 传递给您的 proc。在较新版本的 SQL Server 中，这种排序数组的传递可能更容易。

例如，您可以尝试传递：

*   SQL Server 2008+ 中的[TVP](http://msdn.microsoft.com/en-us/library/bb510489.aspx)
*   然后在 proc 中拆分的分隔字符串
*   然后在proc中解析的xml
*   一个表名，然后由 proc 动态读取
*   使用 proc 和调用者事先都知道的表名

对传递数组的快速搜索是 SQL Server 将产生更多结果，其中最好的是@Andomar 提到的[SQL Server 中的数组和列表。](http://www.sommarskog.se/arrays-in-sql.html)

# django - django 中是否有命令别名

> ID：14757088
> 
> 赞同：1
> 
> 时间：2013-02-07T17:20:23.063
> 
> 标签：django

我想问一下 Django 中是否有像 Git 那样的命令别名。因为输入一些命令非常乏味，因为我在 django 中有一个 local_settings，这导致我经常输入这个命令。

```
manage.py runserver --settings=local_settings 
```

在 Git 中，您可以通过以下方式分配别名：

```
git config --global alias.ci commit 
```

然后运行

```
git ci -m "My latest commit" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:32:45.377

您可以在 settings.py 的底部添加这些行。

```
if 'PLATFORM' not in os.environ:
    from local_settings import *
elif os.environ['PLATFORM'] == 'TEST':
    from stage_settings import * 
```

并且只需在 local_settings.py 和 stage_settings.py 中添加一些需要覆盖的参数，并且不要忘记在您的生产和登台平台上创建环境变量。

现在您可以使用普通的 Django 命令在任何地方运行您的服务器。

```
manage.py runserver 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:12:30.973

好吧，有[django-shortcuts](https://github.com/jgorset/django-shortcuts)。

老实说，我没有看到这样做有更深层次的意义（除非你可能在 Windows 上，但即使应该有办法）。就像 cms_mgr 在他的评论中已经指出的那样，可以在您的 shell 中轻松定义别名。

这是我的一个例子`~./bashrc`：

```
 alias r='./manage.py runserver 127.0.0.1:8000' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:20:41.010

我们使用 Makefile 来定义快捷方式，甚至将多个命令链接在一起，例如用于部署过程。

下面是这样一个 Makefile 的摘录：

```
VIRTUAL_ENV=env
MANAGE_PY=$(VIRTUAL_ENV)/bin/python manage.py
PIP_BIN=$(VIRTUAL_ENV)/bin/pip
SETTINGS_DEVELOPMENT=project.settings

all: environment requirements

environment:
    test -d "$(VIRTUAL_ENV)" || virtualenv --no-site-packages $(VIRTUAL_ENV)

requirements: environment
    $(PIP_BIN) install -r requirements.txt

createsuperuser:
    $(MANAGE_PY) createsuperuser --settings=$(SETTINGS_DEVELOPMENT)

shell:
    $(MANAGE_PY) shell --settings=$(SETTINGS_DEVELOPMENT)

privateserver:
    $(MANAGE_PY) runserver --settings=$(SETTINGS_DEVELOPMENT)

server:
    $(MANAGE_PY) runserver 0.0.0.0:8000 --settings=$(SETTINGS_DEVELOPMENT)

makemessages:
    $(MANAGE_PY) makemessages --ignore=env --all --settings=$(SETTINGS_DEVELOPMENT)

compilemessages:
    $(MANAGE_PY) compilemessages --settings=$(SETTINGS_DEVELOPMENT) 
```

所以我可以打电话

```
make server 
```

使用我的特殊开发设置在 LAN 上启动服务器。由于这个 Makefile 可以添加到 git repo 中，其他任何人也可以使用这些命令。

（是的，我们使用 virtualenv）

# .net - .Net 读取文件 VS Perl 读取文件的实现

> ID：14757095
> 
> 赞同：0
> 
> 时间：2013-02-07T17:20:51.817
> 
> 标签：.net, wcf, perl, file-upload

我通过 basicHTTPBinding (SOAP 1.1) 将 .zip 文件作为字节数组发送到 WCF 服务。

基本上，从光盘读取文件并以文本信封对象的形式发送到服务器。

在 .net 中，我以下列方式从光盘中读取文件：

```
...

var bytes = ReadGridLibFile(path + fileName);

....
private static byte[] ReadGridLibFile(string fileName)
        {
            byte[] bytes;
            int numBytesToRead;
            using (FileStream fsSource = new FileInfo(fileName).OpenRead())
            {
                // Read the source file into a byte array.
                bytes = new byte[fsSource.Length];
                numBytesToRead = (int)fsSource.Length;
                int numBytesRead = 0;
                while (numBytesToRead > 0)
                {
                    // Read may return anything from 0 to numBytesToRead.
                    int n = fsSource.Read(bytes, numBytesRead, numBytesToRead);

                    // Break when the end of the file is reached.
                    if (n == 0)
                        break;

                    numBytesRead += n;
                    numBytesToRead -= n;
                }
                numBytesToRead = bytes.Length;
            }
            return bytes;
        } 
```

当这样的字节数组发送到 WCF 服务时，它会被写入服务器端的磁盘并成为可打开的 .zip 存档。

我需要为相同的上传功能实现一个 perl 客户端。

在 perl 中，我读取这样的字节：

```
while (read(FILE, $buf, 60 * 57)) {
$bytes .= $buf;
}
close(FILE);
$bytes = encode_base64( $bytes ); 
```

当我将 $bytes 作为数据放入信封对象并通过 HTTP::Request 手动发送时，在服务器上，我得到一个字节数组，但是当保存到磁盘时，它是一个坏的（损坏的）zip 存档。我在 perl 中读取和发送字节数组的方式有什么问题？

# odbc - 如何查找错误原因：Provider error '8000ffff' Catastrophic failure DB2 V10

> ID：14757106
> 
> 赞同：0
> 
> 时间：2013-02-07T17:21:11.963
> 
> 标签：odbc, iis-6, db2, oledb, adodb

有人可以帮我找出错误的原因： Provider error '8000ffff' Catastrophic failure In DB2 Server version 10.1.0.2?
下面显示的 ASP 代码适用于 DB2 Connect 9.7.2 版：

```
ConnectStr = "驱动程序={IBM DB2 ODBC 驱动程序}；数据库=DBXX；Uid=myuser；密码=pypass；主机名=本地主机；端口=50000；协议=TCPIP；"
设置 con0 = CreateObject("ADODB.Connection")
Con0.Open ConnectStr
设置 rs = CreateObject("ADODB.Recordset")
rs.ActiveConnection = Con0
rs.Open "select * from sysibm.sysdummy1", Con0
response.write(现在 & " --->>>" & rs(0))
con0.close()
设置 rs = 无
设置 con0 = 无

```

安装 DB2Connect 10.1.0.2 服务器的新驱动程序后，此错误开始发生。

我们的环境是：
- 在 vmware 中运行的 Windows Server 2003 R2 32 位
- MDAC 2.8 SP2
- OLEDB32.DLL 2.82.3959.0

任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:04:46.140

从连接字符串中删除一些信息后，令我惊讶的是，一切都开始完美运行。
连接字符串如下所示：

`ConnectStr = "Driver={IBM DB2 ODBC DRIVER};Database=DBXX;Uid=myuser;Pwd=pypass;"`

# java - 如何强制使用 Diffie Hellman Key Exchange

> ID：14757108
> 
> 赞同：0
> 
> 时间：2013-02-07T17:21:17.010
> 
> 标签：java, ssl, diffie-hellman

我想创建一个 TLS 套接字连接。我知道 TLS 有几种方法可以交换密钥，例如。RSA、Diffie-Hellman 等。如何强制使用 Diffie-Hellman 密钥交换而不是其他形式的密钥交换？

我知道如果使用 Diffie-Hellman 密钥交换，它很容易受到中间人攻击。使用 RSA 时，我们有防止 MITM 的服务器身份验证。但我担心的一个问题是使用 RSA 会禁止前向保密。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:47:00.807

通过选择支持该密钥交换方法的密码套件来指定密钥交换方法。

`SSLSocket`您可以在（或`SSLEngine`）上使用密码套件[`setEnabledCipherSuites`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSocket.html#setEnabledCipherSuites%28java.lang.String%5b%5d%29)。

[SunJSSE 提供者文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)中提供了支持的密码套件表以及默认情况下使用 Oracle JRE 启用的密码套件表。

匿名密码套件 ( `_DH_anon_`) 是容易受到 MITM 攻击的密码套件。

或密码套件还使用 RSA`_DH_RSA_`或`_DH_DSA_`DSA 来验证 DH 密钥交换（而不是密钥交换本身），以防止 MITM 攻击。此外，*Ephemeral* DH 密码套件（包含`_DHE_`或`_ECDHE_`用于椭圆曲线变体的那些）提供完美前向保密。（无论如何，Sun JSSE 提供程序都不支持非临时`_DH_RSA_`或密码套件。）`_DH_DSA_`

# spring - 用蚂蚁弹力junit的错误

> ID：14757114
> 
> 赞同：0
> 
> 时间：2013-02-07T17:21:31.617
> 
> 标签：spring, ant, junit4

当我执行以下命令时，我收到一个奇怪的错误：“junit.framework.AssertionFailedError: No tests found in com.ac.spring.login.LoginServiceTest 我正在使用 spring 3.0 和 junit 4.x。

测试类：

```
 @ContextConfiguration(locations={"classpath:META-INF/spring-context.xml","classpath:META-INF/spring-context-test.xml"})
    public class LoginServiceTest extends AbstractJUnit4SpringContextTests{
        @Autowired
        private LoginServiceTestCase loginTestCase;

        @Before
        public void setup() {
        loginTestCase.initialize();
        }

        @After
        public void teardown() {
        }

    @Test
    public void testLoginWithValidAccount() throws Exception {
    loginTestCase.setTestName("Validate Login with valid credentials");
    loginTestCase.setTestCondition(loginTestCase.CONDITION_USERNAME, "...");
    loginTestCase.setTestCondition(loginTestCase.CONDITION_PASSWORD, "...");
    loginTestCase.setExpectedResult(loginTestCase.RESULT_IS_ERROR, false);
    assertTrue(loginTestCase.isTestPass());
    }
....
} 
```

待测案例：

```
public class LoginServiceTestCase extends TestCase{
    @Autowired
    private LoginService loginService; // the class to be tested
    ......
    protected void executeTest() throws Exception {
    try {
.....   } catch (Exception e) {
    isError = true;
    }
    } 
```

构建.xml：

```
<target name="compile" >
        <echo message="-----> Compile Classes from ${src}" />
        <mkdir dir="${build}/classes" />
        <javac  srcdir="${src}"
                includes="**/*.java"
                destdir="${build}/classes"
                debug="on">
            <classpath refid="dependencies"/>
        </javac>
        <copy todir="${build}/classes/META-INF">
            <fileset dir="${basedir}/config" includes="**"/>
        </copy>
    </target>

<target name="batch-test" >
        <mkdir dir="${reports.tests}"/>
        <junit printsummary="yes" haltonfailure="yes">
          <classpath>
            <pathelement location="${build}/classes"/>
            <path refid="dependencies"/>
          </classpath>

          <formatter type="plain"/>
          <formatter type="xml"/>

          <batchtest fork="yes" todir="${reports.tests}">
            <fileset dir="${src}">
              <include name="**/*Test.java"/>
            </fileset>
          </batchtest>
        </junit>
    </target> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:15:53.583

想结束这个问题 - 但只是想告知问题出在 ant 版本上。从 ant 1.5 升级到 1.7 解决了这个问题。

# user-interface - 如何告诉浏览器认证成功？

> ID：14757115
> 
> 赞同：2
> 
> 时间：2013-02-07T17:21:32.897
> 
> 标签：user-interface, browser

在常规电子邮件/密码表单的场景中，提交的表单向服务器发出 POST 请求以验证客户端凭据。

如何告诉浏览器认证是否成功？即，如何告诉浏览器是否记住电子邮件/密码组合。

这是表单布局：

```
<form action="" method="post">
    <fieldset>
        <legend>Sign in</legend>

        <label>
            <span>Email</span>
            <input type="text" name="ay[email]">
        </label>

        <label>
            <span>Password</span>
            <input type="password" name="ay[password]">
        </label>
        <input type="submit" value="Sign in">
    </fieldset>
</form> 
```

该过程不涉及 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:24:42.740

如果您正在执行`form`提交操作来验证会话，浏览器将询问用户是否要记住该`username/password`组合。浏览器还将检查用户添加到浏览器中的任何异常情况，例如`never remember`等`never remember for the site`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:57:03.570

Q：认证成功与否 A：设置cookies。其次，您不能强制浏览器记住组合，您可以设置 cookie，您可以在其中使用时间，像 Google 一样需要多少年使用 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T18:54:54.257

解决此问题的大多数尝试都涉及绕过浏览器启发式登录，这很容易出错并且很容易过时。所以，我们应该看看浏览器自己推荐什么来使用他们的身份验证功能。

遗憾的是，目前还没有跨浏览器标准（[即将推出的`isLoggedIn`API](https://github.com/privacycg/is-logged-in)看起来就是那样），但与此同时，我们从[Chromium Wiki 的 Create Amazing Password Forms](https://www.chromium.org/developers/design-documents/create-amazing-password-forms)中获得了一些建议：

> ## 确保表单提交清晰
> 
> 密码管理员需要一些迹象表明表单已提交。尝试确保您的网页在提交表单时执行以下操作之一：
> 
> *   执行到另一个页面的导航。
> *   使用 History.pushState 或 History.replaceState 模拟导航，并完全删除密码表单。
> 
> 此外，如果您使用 XMLHttpRequest 或 fetch 执行异步请求，请确保在响应标头中正确设置成功状态。

> ## 遵循现有约定
> 
> 仅仅为了它而与众不同是不值得的。这将导致全面的用户体验不佳。这意味着，例如，如果登录失败，则不会导航到单独的网页：这是意料之外的，并且会让用户和密码管理器迷失方向。

由此，我们可以向至少*一个*浏览器推断出登录失败的以下信号：

*   HTTP 响应的状态码是一个错误。

*   表单提交不会导航到另一个页面（如果您未能成功登录，登录页面可能会*重新加载，但至关重要的是它们保持在相同的 URL）。*

*   当用户尝试时，表单根本不提交——要么是因为 HTML 表单验证阻止了提交，要么是 JS 检查服务器是否接受了登录并调用`.preventDefault`了表单提交事件。（前者不适用于错误的凭据；仅适用于和 等基本检查`required`。`minlength`）

遗憾的是，我可以确认其中一些技术不能跨浏览器工作：例如，Firefox 在对表单提交的 HTTP 响应到达之前乐观地显示其保存凭据菜单。[Mozilla 有一个关于这个确切问题的错误开放](https://bugzilla.mozilla.org/show_bug.cgi?id=558178)，但似乎做正确的事情来保持与现有网站的兼容性对他们来说同样棘手。

更令人沮丧的是，[来自该错误的副本](https://bugzilla.mozilla.org/show_bug.cgi?id=657268#c3)：

> Matthew N. [:MattN] • 2 年前
> 
> 我们现在应该仔细检查其他浏览器如何处理这个问题。我认为其他人现在开始在这方面抄袭我们。

# node.js - Node.js 使用 express 在 HTTP POST 上以 multipart/form-data 形式写入 jpeg 文件

> ID：14757116
> 
> 赞同：1
> 
> 时间：2013-02-07T17:21:33.157
> 
> 标签：node.js, encoding, http-headers, url-encoding

我有一个从 iOS 应用程序接收内容的 node.js 服务器。内容分为两部分：1.json和2.jpeg。我正在尝试将 jpeg 写入一个文件，然后我可以在浏览器中提取该文件。看起来很简单，但是当我将缓冲区从 req.body.imagedata 写入文件时，它是一个损坏的文件。

这是 iPhone 上 hexdump 的 jpeg 的第一部分

```
0000000 **ff d8 ff e0 00 10 4a 46 49** 46 00 01 01 00 00 01
0000010 00 01 00 00 ff e1 00 58 45 78 69 66 00 00 4d 4d
0000020 00 2a 00 00 00 08 00 02 01 12 00 03 00 00 00 01 
```

这是 iPhone 模拟器的 Charles Proxy 输出。因此，它是从 iPhone 正确传输的。

```
00000060  69 6e 61 72 79 0d 0a 0d 0a **ff d8 ff e0 00 10 4a**   inary          J
00000070  **46 49** 46 00 01 01 00 00 01 00 01 00 00 ff e1 00   FIF             
00000080  58 45 78 69 66 00 00 4d 4d 00 2a 00 00 00 08 00   XExif  MM * 
```

这是服务器运行节点上的 tcpdump 输出。

```
0000370 **d8ff e0ff 1000 464a 4649** 0100 0001 0100
0000380 0100 0000 e1ff 5800 7845 6669 0000 4d4d
0000390 2a00 0000 0800 0200 1201 0300 0000 0100 
```

服务器端节点 tcpdump 显示传递给 node.js 服务器的正确标头信息。

```
?ò?
?u???????
8?8w
?u??????????%? ??
8?8??L?|?Q??
?u??????????%? O|
8?8??L?POST /screenw/ HTTP/1.1
Host: ec2-103-22-8-3.compute-1.amazonaws.com:4914
Accept-Encoding: gzip, deflate
Content-Type: multipart/form-data; boundary=01947848929231
Cookie: connect.sid=s%3A3i1td3wlRo8dqrFETNTcbUBV.h4EPihMhJTOdlSBmIog3xm3C%2FvTWVyD4eBBw2Fige6o
Accept-Language: en-us
Accept: */*
Content-Length: 37297
Connection: keep-alive
User-Agent: Teachbits/1.0 CFNetwork/609.1.4 Darwin/12.2.0

|?Q??
?u???????%? ??
8?8??L?--01947848929231
Content-Disposition: form-data; name="imagedata"
Content-Transfer-Encoding: binary
....IMAGE DATA HERE..... 
```

但是在node.js端写的jpg的hexdump是错误的：

```
0000000 bfef efbd bdbf bfef efbd bdbf 1000 464a
0000010 4649 0100 0001 0100 0100 0000 bfef efbd
0000020 bdbf 5800 7845 6669 0000 4d4d 2a00 0000 
```

这是接收 POST 请求并写入 jpeg 文件的代码。

```
app.post('/screenw/', function (req, res, next) {

    require("fs").writeFile("./http_image_64.jpg", req.body.imagedata, function (err) {
                if (err) throw err;
                console.log('It\'s saved!');
            }); 
```

当我在 iPhone 模拟器和节点服务器上打印出缓冲区的大小时，大小不匹配：

iPhone：图片内容为**32661**长

node.js req.body.imagedata 原始图像 - **31679**

我认为问题出在以下两个方面之一：

1.  Connect 如何解析 http 正文的 jpeg 部分并将其返回给我的 server.js。即，我提供了错误的 Content-Type 或其他标头信息

2.  我如何将 req.body.imagedata 写入 jpg 文件。即，我的编码和相关逻辑不正确。

关于如何让它发挥作用的任何想法？我被困住了。

[编辑]

这是构造http请求的objective-c代码：

```
//creating the url request:
tbImgUrl = [NSURL URLWithString:@"screenw/" relativeToURL:[cts web_service]];
NSMutableURLRequest *tbImgReq2 = [NSMutableURLRequest requestWithURL:tbImgUrl];
[tbImgReq2 setHTTPMethod:@"POST"];
NSString *boundary = @"01947848929231";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[tbImgReq2 setValue:contentType forHTTPHeaderField:@"Content-Type"];
[tbImgReq2 setValue:@"multipart/form-data" forHTTPHeaderField:@"enctype"];
NSData *imageData = UIImageJPEGRepresentation([imgVector screenImage], 1.0); // 0.0 - 1.0 l to h

// setting up the body
NSMutableData *body = [NSMutableData data];

// append the photo image
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"imagedata\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: %@\r\n", @"image/jpeg"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Transfer-Encoding: binary\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:imageData];

// append the json data
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"jsondata\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
NSData *reqData = [NSJSONSerialization dataWithJSONObject:sendPayload
                                                  options:0
                                                    error:nil];
[body appendData:[NSData dataWithData:reqData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[tbImgReq2 setHTTPBody:body];
tbImgConnection = [[NSURLConnection alloc] initWithRequest:tbImgReq2
                                                  delegate:self
                                          startImmediately:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:47:31.597

你可以使用快递js ...

使用正确的编码规则提交，然后通过 req.files 通过 node js（通过 express 库）访问，这对我来说非常可靠

# ruby-on-rails - Rails - 在项目索引视图中显示项目属于哪个客户端

> ID：14757123
> 
> 赞同：1
> 
> 时间：2013-02-07T17:21:53.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many, belongs-to

一个客户`has_many`项目。一个项目`belongs_to`一个客户。

如何在`@projects`循环内的索引视图中显示该项目属于哪个客户端？

这就是我试图在视图中做的事情：

```
<% @projects.each do |project| %>
   <% project.client.name %>
<% end %> 
```

这是我在项目控制器中的所有内容，我认为这是我被困的地方：

```
 def index
    @projects = Project.all
    @project = Project.new
    @clients = Client.select("DISTINCT name, id")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @projects }
    end
  end 
```

我得到了这个与 HABTM 关系的工作，但我现在正试图用 has_many belongs_to 关系来代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:29:40.023

替换这个

```
<% @projects.each do |project| %>
   <% project.client.name %>
<% end %> 
```

和

```
<% @projects.each do |project| %>
   <%= project.client.name %>
<% end %> 
```

# r - 在 R 中的“步骤”方法中获取选定的变量

> ID：14757127
> 
> 赞同：0
> 
> 时间：2013-02-07T17:22:03.997
> 
> 标签：r, feature-selection

我正在使用“步骤”功能从我的数据中删除不必要的/虚假变量。我正在使用以下代码：

```
 state.x77
  st = as.data.frame(state.x77)
  colnames(st)[4] = "Life.Exp"         # no spaces in variable names, please
  colnames(st)[6] = "HS.Grad"
  model1 = lm(Life.Exp ~ Population + Income + Illiteracy + Murder +
                +                        HS.Grad + Frost + Area, data=st)
  summary(model1)
  modelStep = step(model1, direction="backward") 
```

我如何知道“步骤”方法选择的最终变量？

编辑：我正在使用以下内容来查找相同的内容。我正在寻找任何其他更简单的方法。

```
rownames(summary(modelStep)$coefficients) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T17:46:59.047

All you need is:

```
st <- as.data.frame(state.x77)
colnames(st)[4] = "Life.Exp"         # no spaces in variable names, please
colnames(st)[6] = "HS.Grad"
model1 = lm(Life.Exp ~ Population + Income + Illiteracy + Murder+HS.Grad + Frost + Area, data=st)
modelStep <- step(model1, direction="backward")$coefficients
modelStep 
```

This will be your output when you type in modelStep:

```
> modelStep
  (Intercept)    Population        Murder       HS.Grad         Frost 
 7.102713e+01  5.013998e-05 -3.001488e-01  4.658225e-02 -5.943290e-03 
```

# java - 十进制格式的答案？

> ID：14757137
> 
> 赞同：1
> 
> 时间：2013-02-07T17:22:49.263
> 
> 标签：java, decimalformat, exp, natural-logarithm

请原谅我的无知，我是初学者。

谁能告诉我为什么我在下面的 if/else 语句中得到错误代码？我认为我的 ln 乘法结果与标准乘法并不完全相同（有 .00000000006 的差异或类似的东西）。有解决办法吗？我曾尝试使用 DecimalFormat 但无济于事。

如果我添加：

```
DecimalFormat fmt = new DecimalFormat ("0.###"); 
```

给测试者和

```
 if (fmt.format(z) != fmt.format(result)){ 
```

对于 if 语句，我收到了自己的相同错误语句。怎么了！？

非常感谢你。

乔

```
import java.util.Scanner; 
import java.lang.Math;
import java.text.DecimalFormat;

public class Logs {

  //integer x field & encapsulation
  private static double x;

  // x encapsulation
  public double getX(){
    return x;
  }
  public void setX (double ex){
    if (ex >= 0){
      x = ex;
    }
    else{
    System.out.println("You may not choose a negative number, 'x' = 0");
    }
  }

  //integer y field 
  private static double y;
  // y encapsulation
  public double getY(){
    return y;
  }

  public void setY (double why){
    if (why >= 0){
      y = why;
    }
    else{
    System.out.println("You may not choose a negative number, 'y' = 0");
    }
  }

  //tester
  public static void main (String [] args){
    Logs sample =new Logs();
    Scanner var = new Scanner(System.in);
    DecimalFormat fmt = new DecimalFormat ("0.###");
    sample.setX (var.nextDouble());
    sample.setY (var.nextDouble());

    x = sample.getX();
    y = sample.getY();
    double z = (x*y);
    double logX = Math.log(y);
    double logY = Math.log(x); 
    double logZ = (logX +logY); 
    double result = (Math.exp(logZ));

    if (z != result){
      System.out.printf("%s", "Incorrect answer: be a better coder");
    }
    else {
      System.out.printf("%s %.3d %s %.3d %s %.3d", 
                        "The product of the values you chose is: ", + z,
                        "\nln(x) + ln(y) is: ", + logZ,
                        "\nCompute to e: ", + result);

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:26:01.193

您正在比较字符串*引用*而不是它们的*值*，并且您想要`String.equals()`例如`z.equals(result)`

但是，我认为您要做的是将两个十进制数字与一定的精度进行比较。计算差异并确定它是否在可接受的误差范围内更直观，例如

```
if (Math.abs(z - result) < 0.01) {
   // ok
} 
```

有关详细信息，请参阅[Math.abs(double a)](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#abs%28double%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:26:23.563

我建议尝试

if (!fmt.format(z).equals(fmt.format(result))) {

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:26:38.813

我认为这是因为双重。为了获得最佳实践，请改用 BigDecimal。请看一下“[为什么我看到一个双变量初始化为某个值，例如 21.4 as 21.399999618530273？](https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-21-4-as-21-3999996) ”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:32:17.377

1.  使用 BigDecimal 而不是 double
2.  使用 StrictMath 而不是 Math

# c# - Linq 表达式 - 无效参数

> ID：14757140
> 
> 赞同：1
> 
> 时间：2013-02-07T17:23:00.133
> 
> 标签：c#, linq, lambda, func, linq-expressions

```
public class EcImageWrapper
{

    //etc...

    public IQueryable<EcFieldWrapper> ListOfFields
    {
        get
        {
            //logic here

            return this.listOfFields.AsQueryable();
        }
    }

    public EcFieldWrapper FindBy(Expression<Func<EcFieldWrapper, int, bool>> predicate)
    {
        return this.ListOfFields.Where(predicate).SingleOrDefault();
    }

    public EcFieldWrapper FindByName(string fieldName)
    {
        return this.FindBy(x => x.Name.ToUpper() == fieldName.ToUpper());
        //error here, wanting 3 arguments
        //which makes sense as the above Expression has 3
        //but i don't know how to get around this
    } 
```

出于某种原因，Expression> 要求我使用 3 个参数，过去我只对有问题的实例使用了 2 个。但是，现在我想通过这个实例中的集合进行查找。

我收到以下错误：

```
Delegate 'System.Func<MSDORCaptureUE.Wrappers.EcFieldWrapper,int,bool>' does not take 1 arguments
The best overloaded method match for 'CaptureUE.Wrappers.EcImageWrapper.FindBy(System.Linq.Expressions.Expression<System.Func<CaptureUE.Wrappers.EcFieldWrapper,int,bool>>)' has some invalid arguments
Argument 1: cannot convert from 'string' to 'System.Linq.Expressions.Expression<System.Func<CaptureUE.Wrappers.EcFieldWrapper,int,bool>>' 
```

期望的结果：能够在类 EcImageWrapper 的实例中使用返回类型为 EcFieldWrapper 的谓词和 EcFieldWrapper 的谓词类型

为什么需要3？为什么是int？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:25:25.737

现有方法不需要 3 个参数 - 它需要一个，`Expression<Func<EcFieldWrapper, int, bool>>`因为这是您声明要接受的方法。那将是这样的：

```
// This version ignores the index, but you could use it if you wanted to.
(value, index) => value.Name.ToUpper() == fieldName.ToUpper() 
```

将`index`是集合中的位置，因为您[称其](http://msdn.microsoft.com/en-us/library/bb548547.aspx)为`Queryable.Where`.

假设您不需要索引，我强烈怀疑您只想将`FindBy`方法更改为：

```
public EcFieldWrapper FindBy(Expression<Func<EcFieldWrapper, bool>> predicate)
{
    return this.ListOfFields.Where(predicate).SingleOrDefault();
} 
```

或者更简单地说，使用`SingleOrDefault`接受谓词的重载：

```
public EcFieldWrapper FindBy(Expression<Func<EcFieldWrapper, bool>> predicate)
{
    return this.ListOfFields.SingleOrDefault(predicate);
} 
```

这应该可以正常工作 - 如果没有，您应该告诉我们当您尝试时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:31:47.440

不需要`Find`方法。做所有事情`FindByName`。

```
public EcFieldWrapper FindByName(string fieldName)
{
    fieldName = fieldName.ToUpper();
    return ListOfFields
       .SingleOrDefeault(x => x.Name.ToUpper() == fieldName);
} 
```

# asp.net-web-api - 加载 Ninject 组件 ICache 时出错

> ID：14757142
> 
> 赞同：8
> 
> 时间：2013-02-07T17:23:19.440
> 
> 标签：asp.net-web-api, ninject

我在 asp.net web api 项目中使用 ninject 并开始收到此间歇性 ninject 错误：

"**加载 Ninject 组件时出错 ICache 没有在内核的组件容器中注册此类组件。** "

我正在使用：

*   忍者 3.0.1.10
*   Ninject.MVC3 3.0.0.6
*   Ninject.Web.Common 3.0.0.7

它们都通过 NuGet 带入我的项目中，我在 IocConfig.RegisterIoc 中加载了我的模块，并且没有进行其他更改或调整。

这可能是不相关的，但问题开始发生在我开始将 IKernel 注入我的一个构造函数的大约同一时间。在阅读了有关“特殊解析器”的信息后，我没有为此设置绑定。

我在这里阅读了许多类似的问题：

[Ninject +“加载 Ninject 组件 ICache 时出错”](https://stackoverflow.com/questions/5134630/ninject-error-loading-ninject-component-icache)

[MVC3 项目中的 Ninject 和 ChildKernel：“加载 Ninject 组件 ICache 时出错”](https://stackoverflow.com/questions/10958445/ninject-and-childkernel-in-mvc3-project-error-loading-ninject-component-icache)

[随机发生的 Ninject 异常：“加载 Ninject 组件 ICache 时出错”](https://stackoverflow.com/questions/13732645/randomly-occurring-ninject-exception-error-loading-ninject-component-icache)

尽管在每种情况下，OP 都与我有相同的错误，但解决方案并不合适——我没有创建子内核，也没有使用错误版本的 ninject。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:29:15.697

找到了解决方案，并认为我会分享。

问题是我正在使用 Ninject.MVC3，这似乎是 Web-API 的错误包。

相反，我需要使用本文所述的 Ninject.Web.WebApi-RC 包：

[http://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/](http://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/)

我遵循的修复步骤是

*   卸载 Ninject.MVC3 和 Ninject.Web.Common
*   从 App_Start 文件夹中删除所有 ninject 文件。
*   从 nuget 安装 Ninject.Web.Common 和 Ninject.Web.WebApi-RC
*   在 NinjectWebCommon.RegisterServices() 中加载我的模块

# c# - 序列化列表时如何创建递增的 XML 元素名称

> ID：14757145
> 
> 赞同：1
> 
> 时间：2013-02-07T17:23:27.503
> 
> 标签：c#, xml-serialization

我正在尝试序列化一个看起来像这样的 Level 对象：

```
public class Level
{
    //Some XmlAtributes

    [XmlElement]
    public List<Question> questions;
}

public class Question
{
    //Some XmlAttributes

    [XmlArray("Answers")]
    public List<string> answers;
} 
```

成如下所示的 XML 文件：

```
<Level time="2">
    <Question type="multiplechoice">
        <Answers correct="b">
            <a>Answer 1</a>
            <b>Answer 2</b>
            <c>Answer 3</c>
            <d>Answer 4</d>
        </Answers>
    </Question>

    <Question>
        ...
    </Question>
</Level> 
```

我已经可以序列化它了，除了`<Answers>`. 注意每个元素如何获得一个递增的名称，而不是全部相同（例如`<string>`默认情况下）。这可能吗？我知道我可以用 重命名元素`[XmlArrayItem("ItemName")]`，但这会将相同的名称应用于数组中的所有元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:42:33.177

如果其他人发生这种情况，这是我采用的解决方案（感谢 IAbstract 的提示）：

```
public class Answer : IXmlSerializable
{
    public List<string> list = new List<string>();
    public string this[int pos]
    {
        get
        {
            return list[pos];
        }

        set
        {
            list[pos] = value;
        }
    }

    public void ReadXml ( XmlReader reader )
    {
        reader.ReadToDescendant("a");
        while ( reader.Name != "Answers" )
        {
            if ( reader.IsStartElement() )
            {
                list.Add(reader.ReadElementContentAsString());
            }
        }

        reader.Read();
    }

    public void WriteXml ( XmlWriter writer )
    {
        for ( int i = 0; i < list.Count; i++ )
        {
            writer.WriteElementString(((char)(97 + i)).ToString(), list[i]);
        }
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }
} 
```

我将 Answer 作为它自己的类，因为它具有属性，并且我不需要覆盖 Question 类中其他任何东西的序列化行为。额外的 reader.Read() 是为了确保阅读器在 之后移动到下一个标签，否则在处理完 Answer 后反序列化将不会继续。

它不是 100% 完美，但对于我的实现来说已经足够了。

# c - time_t 最大的有用价值是多少？

> ID：14757153
> 
> 赞同：2
> 
> 时间：2013-02-07T17:23:53.153
> 
> 标签：c, time

找出一个有效的值范围似乎非常困难`time_t`。

它在某些 32 位平台上，在大多数 64 位平台上，因此可以很容易地设置为`LONG_MAX`. 但是，尝试使用该值并不能真正正常工作。例如，您不能将其传递给`localtime`并将其更改为`struct tm`.

一个对值进行二分搜索的快速测试程序告诉我它是 67768036191676799。这对应于年末 2147483647，因此作为一个值是有意义的。但是，这是在任何地方指定的吗？对于最大可用 time_t，是否有任何合理的、独立于平台的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:37:42.637

实际上，time_t 和 clock_t 的规范是实现定义的（C99 7.23.1）。

这是我建议不要自己生成这些值的事情之一，而是依靠实现为您创建它们，例如 with `mktime()`，并使用`struct tm`for 直接操纵时间。`-1`是 time_t 的唯一值，它是您可以自己使用的“好”值。

我特别建议您不要将其视为任何类型的 32 位值，正如 jgm 所建议的那样。你永远不知道一些奇怪的嵌入式编译器是否会想要使用 16 位时间或 18 位时间，或者谁知道呢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:27:40.303

使用它的最安全方法是 32 位签名，只要您对它在 25 年后不再工作感到满意。

否则，您将不得不在您运行的任何平台上自己测试类型并采取相应措施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:47:47.617

`tm_year`有类型`int`，所以如果你要转换成`struct tm`，最大的意义`time_t`就是 year 对应的值`INT_MAX`。

# jquery - jQuery 在悬停时在其他 div 之上显示 div

> ID：14757156
> 
> 赞同：2
> 
> 时间：2013-02-07T17:23:54.177
> 
> 标签：jquery, css

```
<html>
<body>
    <div id="btn">
        <div id="reveal">
        </div>
    </div>
    <div id="btn2">
        <div id="reveal2">
        </div>
    </div>
    <style>
        #btn, #btn2
        {
            background-color: red;
            height: 100px;
            width: 200px;
        }
        #btn2
        {
            margin-top: 10px;
        }
        #reveal, #reveal2
        {
            background-color: green;
            height: 400px;
            width: 200px;
            display: none;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
        $('#btn').hover(function () {
            $('#reveal', this).stop(true, true).slideDown("normal");
        }, function () {
            $('#reveal', this).stop(true, true).hide();
        });
    </script>
</body>
</html> 
```

我在网页上有一堵标签墙，当用户滚动一个标签时，我希望 div 滑过滚动过的同一个标签以及位于下方的任何标签。

如果您运行我的演示代码，您可以看到被显示的 div 位于页面下方的 div 后面。

有可能让它工作吗？

另外，让内部 div 比它的容器高是不是很糟糕？

我尝试做的另一件事是将内部 div 单独放在外面，然后绝对定位它，使其出现在按钮上方。

```
position: absolute;
top: 0; 
```

这导致了一个不幸的效果，即 btn div 不断重新触发动画。不过，它确实解决了关卡的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:41:39.740

只需添加`position:relative`到`btn`and`reveal`元素并添加 a`z-index:999`到`reveal`元素。

最好将类用于具有共同样式和行为的元素..

**html**

```
<div class="btn">
    <div class="reveal"></div>
</div>
<div class="btn">
    <div class="reveal"></div>
</div> 
```

**CSS**

```
.btn {
    background-color: red;
    height: 100px;
    width: 200px;
    position:relative;
    margin-bottom:10px;
}
.reveal {
    background-color: green;
    height: 400px;
    width: 200px;
    display: none;
    z-index:999;
    position:relative;
} 
```

和**jQuery**

```
 $('.btn').hover(function () {
        $('.reveal', this).stop(true, true).slideDown("normal");
    }, function () {
        $('.reveal', this).stop(true, true).hide();
    }); 
```

演示在[http://jsfiddle.net/gaby/T7USy/](http://jsfiddle.net/gaby/T7USy/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T17:37:27.760

这是你想要的吗：[**小提琴**](http://jsfiddle.net/QWE6x/)

```
<!doctype html>
<html>
<body>
    <div id="btn">
        <div id="reveal">1111111111</div>
    </div>
    <div id="btn2">
        <div id="reveal2">222222222</div>
    </div>
    <style>
        #btn, #btn2 {
            background-color: red;
            height: 100px;
            width: 200px;
            position:relative;
            z-index:3;
        }
        #btn2 {
            margin-top: 10px;
            z-index:1;
        }
        #reveal, #reveal2 {
            background-color: green;
            height: 400px;
            width: 200px;
            display: none;
            position:absolute; /*<--update it*/
            left:0;            /*<--update it*/
            top:0;             /*<--update it*/
            z-index:2;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
        $('[id^=btn]').hover(function() {
            $('[id^="reveal"]', this).stop(true, true).slideDown("normal");
        }, function() {
            $('[id^="reveal"]', this).stop(true, true).hide();
        });
    </script>
</body> 
```

# ios - ios：空指针异常

> ID：14757158
> 
> 赞同：1
> 
> 时间：2013-02-07T17:24:01.523
> 
> 标签：ios, animation, crash

我得到以下代码：

```
- (void) hide_waiting_activity
{
    [UIView beginAnimations:nil context:NULL]; {
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:.5];        
        self.waiting_view.alpha = 0;
        self.waiting_label.alpha = 0;
        self.activity_indicator.alpha = 0;
    } [UIView commitAnimations];
} 
```

问题：它有时会崩溃，有时不会。如果它崩溃，控制台输出看起来像这样：

> 2013-02-07 18:16:21.658 driver[5912:907]-[NSISRestrictedToNonNegativeVariable count]：无法识别的选择器发送到实例 0x1dd3aea0 2013-02-07 18:16:21.679 driver[5912:907] *** 由于未捕获而终止应用程序异常“NSInvalidArgumentException”，原因：“-[NSISRestrictedToNonNegativeVariable 计数]：无法识别的选择器发送到实例 0x1dd3aea0”***First throw call stack: (0x342e03e7 0x3bfd1963 0x342e3f31 0x342e264d 0x3423a208 0x34c90d5b 0x34c9a6c3 0x34c9a56f 0x34c9a781 0x34c9acf1 0x34c99d6b 0x34c9ac31 0x34c92393 0x34c94f01 0x34c95ed7 0x34c9ecab 0x36527519 0x36527689 0x365277ab 0x3652791f 0x36527acf 0x34c95997 0x36527a41 0x3652aad1 0x3652d0d9 0x3652cfe3 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34226acd 0x3652cf97 0x34c95997 0x36526f3d 0x361623dd 0x35e9e513 0x35e9e0b5 0x35e9efd9 0x35e9e9c3 0x35e9e7d5 0x35e9e639 0x342b5941 0x342b3c39 0x342b3f93 0x3422723d 0x342270c9 0x37e0533b 0x361432b9 0xd3871 0xc29d8) libc++abi.dylib: terminate called throwing an exception

相应的堆栈跟踪如下所示： ![在此处输入图像描述](../Images/3b0621b1e764709d915433a97492f417.png)

或类似的东西：

> 驱动程序（5930,0x3df85b78）malloc：***对象0x1e565990的错误：未分配被释放的指针***在malloc_error_break中设置断点以进行调试（lldb）

然后堆栈跟踪看起来像 ![在此处输入图像描述](../Images/3d82562f46bcf8478cf11b20c94ac15f.png)

我完全一无所知。有人有想法吗？我正在使用 ios 6.1。

更新：评论内部嵌套括号不会改变任何东西：

```
[UIView beginAnimations:nil context:NULL]; {
        //[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        //[UIView setAnimationDuration:.5];
        self.waiting_view.alpha = 0;
        self.waiting_label.alpha = 0;
        self.activity_indicator.alpha = 0;
    } [UIView commitAnimations]; 
```

更新 2：删除大括号后，应用程序仍然如所描述的那样崩溃。

```
 [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:.5];
        self.waiting_view.alpha = 0;
        self.waiting_label.alpha = 0;
        self.activity_indicator.alpha = 0;
    [UIView commitAnimations]; 
```

更新 3：这是包含 hide_waiting_activity 中任何受影响的 ui 元素的完整代码：

MainNavigationController.h

```
//Waiting overlay
@property (nonatomic,strong) UIActivityIndicatorView* activity_indicator;
@property (nonatomic,strong) UIImageView* waiting_view;
@property (nonatomic,strong) UILabel* waiting_label; 
```

MainNavigationController.m

```
@implementation MainNavigationController

@synthesize activity_indicator;
@synthesize waiting_view;
@synthesize waiting_label;

...
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Create a transparent waiting indicator view that is shown to the user while the app is working in background
    waiting_view = [[UIImageView alloc] initWithFrame:CGRectMake( 0, 64.f /* top navigation bar is 64.f */, 320, 480 )];
    [waiting_view setImage:[UIImage imageNamed:@"Main_Menu_Background.png"]];

    waiting_view.backgroundColor = [UIColor clearColor];

    self.activity_indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [self.activity_indicator setColor:[UIColor blackColor]];
    [self.activity_indicator startAnimating];
    self.activity_indicator.center = CGPointMake( 160.f, (240.f-64.f) );
    [waiting_view addSubview:activity_indicator];

    waiting_label = [[UILabel alloc] initWithFrame:CGRectMake( 110.f, (240.f-64.f)+30.f, 100.f, 16.f)];
    waiting_label.font = [UIFont boldSystemFontOfSize:13.f];
    waiting_label.textColor = [UIColor blackColor];
    waiting_label.backgroundColor = [UIColor clearColor];
    waiting_label.textAlignment = UITextAlignmentCenter;
    waiting_label.text = NSLocalizedString(@"Please_Wait_Text", @"");
    [waiting_view addSubview:waiting_label];

    [self.view addSubview:waiting_view];
    [self.view bringSubviewToFront:self.activity_indicator];
    self.waiting_view.hidden = YES;
    self.activity_indicator.hidden = YES;
...
}

- (void) show_waiting_activity
{
    if( self.waiting_view.alpha == 1 && self.waiting_view.hidden == NO )
        return;

    self.waiting_view.hidden = NO;
    self.activity_indicator.hidden = NO;
    [UIView beginAnimations:nil context:NULL]; {
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:.2];        
        self.waiting_view.alpha = 1;
        self.waiting_label.alpha = 1;
        self.activity_indicator.alpha = 1;
    } [UIView commitAnimations];
}

- (void) hide_waiting_activity
{    
    [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        [UIView setAnimationDuration:.5];
        self.waiting_view.alpha = 0;
        self.waiting_label.alpha = 0;
        self.activity_indicator.alpha = 0;
    [UIView commitAnimations];
} 
```

我在问自己这段代码中的 ui 元素在哪里可以在这 0.5 秒内被破坏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:51:50.603

问题不在于您粘贴的代码 - 问题在于动画开始后它引用的视图发生了什么（代码中的其他位置）。如果动画运行了 0.5 秒，那么所有这些视图*必须*在接下来的 0.5 秒内仍然处于活动状态。

因此，您对寿命不够长的视图的选择：self、self.waiting_view、self.waiting_label、self.activity_indicator。

# html - 什么是自定义 Web 对象

> ID：14757161
> 
> 赞同：0
> 
> 时间：2013-02-07T17:24:04.643
> 
> 标签：html, qtp

我正在从事 Web 应用程序的测试自动化工作，但遇到了自动化工具无法识别的“自定义对象”。

我想从技术上理解自定义对象的含义，它是否类似于不是使用 HTML 代码设计的对象。

任何人都可以请澄清我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:04:40.123

与被测应用程序采用不同技术开发的对象是自定义对象

或者例如，当使用 Java EE 堆栈开发应用程序时，由于某些原因，可能需要在 C# 中开发其中一个对象（例如日历对象），这使得它成为一个自定义对象

希望这有帮助

# mahout - 在 mahout 0.8 中运行 cvb

> ID：14757162
> 
> 赞同：5
> 
> 时间：2013-02-07T17:24:09.057
> 
> 标签：mahout, lda, topic-modeling

当前的 Mahout 0.8-SNAPSHOT 包括用于主题建模的折叠变分贝叶斯 (cvb) 版本并删除了潜在狄利克雷分析 (lda) 方法，因为 cvb 可以更好地并行化。不幸的是，只有关于如何运行示例并生成有意义的输出的[lda文档。](https://cwiki.apache.org/confluence/display/MAHOUT/Latent+Dirichlet+Allocation)

因此，我想：

*   正确预处理一些文本
*   运行 cvb 的 cvb0_local 版本
*   通过查看每个生成的主题中的前 n 个单词来检查结果

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T09:03:52.560

所以这是我必须在 linux shell 中调用的后续 Mahout 命令。$MAHOUT_HOME 指向我的 mahout/bin 文件夹。

```
$MAHOUT_HOME/mahout seqdirectory \
    -i path/to/directory/with/texts \
    -o out/sequenced

$MAHOUT_HOME/mahout seq2sparse -i out/sequenced \
    -o out/sparseVectors \
    --namedVector \
    -wt tf

$MAHOUT_HOME/mahout rowid \
    -i out/sparseVectors/tf-vectors/ \
    -o out/matrix

$MAHOUT_HOME/mahout cvb0_local \
    -i out/matrix/matrix \
    -d out/sparseVectors/dictionary.file-0 \
    -a 0.5 \
    -top 4 -do out/cvb/do_out \
    -to out/cvb/to_out 
```

通过显示每个主题的前 10 个单词来检查输出：

```
$MAHOUT_HOME/mahout vectordump \
    -i out/cvb/to_out \
    --dictionary out/sparseVectors/dictionary.file-0 \
    --dictionaryType sequencefile \
    --vectorSize 10 \
    -sort out/cvb/to_out 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T03:11:30.903

感谢 JoKnopp 提供的详细命令。

如果你得到：线程“main”中的异常 java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String

您需要添加命令行选项“maxIterations”：--maxIterations (-m) maxIterations

我使用 -m 20 并且它有效

参考： [https ://issues.apache.org/jira/browse/MAHOUT-1141](https://issues.apache.org/jira/browse/MAHOUT-1141)

# winforms - DataGridView 控件可以用来显示实时或实时数据吗？

> ID：14757168
> 
> 赞同：0
> 
> 时间：2013-02-07T17:24:15.503
> 
> 标签：winforms, datagridview, oxygene

好吧，我一直在使用 DataGridView 实时显示实时数据。因此，用户可以在生成数据时查看它们。显示的数据在不到一秒的时间内更新。虽然效果很好，但我注意到每当带有 DataGridView 的 winform 打开或显示在监视器上时，CPU 百分比都会急剧上升到 15% 到 20% 之间。如果不显示，CPU % 会下降到 0 到 5。

![在此处输入图像描述](../Images/d84ea46dd696c337434e9a080d4508d2.png)

我可以按照我使用的方式使用 DataGridView 控件吗？

# php - PHP 中的 Curl 从 REST 服务器返回错误结果

> ID：14757170
> 
> 赞同：0
> 
> 时间：2013-02-07T17:24:19.870
> 
> 标签：php, url, rest, browser, curl

由于休息请求，我试图获取 xml，但行为总是很奇怪。

如果我在真正的浏览器中尝试它，我总是得到与倒数第二个请求相关联的结果，而不是请求的结果`last/current`，可能是服务器中的缓存问题......无论如何我试图通过发出两个请求来解决这个问题代码中的时间，但这里的行为更加不稳定，它返回与先前请求相关的结果随机次数，也许幸运的是它最终返回了请求的真实 xml（我的意思是，如果我进行请求循环）。

我认为在`sleep()`功能请求之间设置一些时间可以解决问题，但没有。

我还尝试使用浏览器标头来发出 curl 请求……但仍然是同样的问题。为什么在浏览器中第二次起作用而在 curl 中却不起作用？我必须说，我请求的 url 包含空格，我用`'%20'`.. 更改了这些空格。我不知道还能做什么！

这是 curl 请求：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $uri);
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_AUTOREFERER,1);
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);
    $header=array(
        'User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12',
        'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
        'Accept-Language: es-es,en;q=0.5',
        'Accept-Encoding: gzip,deflate',
        'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7',
        'Keep-Alive: 115',
        'Connection: keep-alive',
    );
    curl_setopt($ch,CURLOPT_HTTPHEADER,$header);
    $response = curl_exec($ch);
    curl_close($ch); 
```

# php - PHP - 变量的输出值

> ID：14757179
> 
> 赞同：2
> 
> 时间：2013-02-07T17:24:48.380
> 
> 标签：php, wordpress

我是php的新手。我正在一个现有的 wordpress 网站上工作。我想打印变量 $post 的值作为输出。什么是 php 中 Java 的 System.out.print 的等价物。

在谷歌搜索时，我发现了相同的 system.out.print 用于 php，但它不起作用。

- 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:38:21.380

你可以`echo`用来打印一些东西：[文档](http://pl1.php.net/manual/en/function.echo.php)

`$_POST`是一个数组，如果您想检查它的值以进行调试，请使用`var_dump` [（docs）](http://pl1.php.net/manual/en/function.var-dump.php)：

```
var_dump($_POST); 
```

要访问数组的元素，请使用方括号：`$_POST['index']`. PHP 数组可能是关联的，这意味着它们不仅可以按数字索引，还可以按字符串索引。`$_POST`是一个纯关联数组，仅用字符串索引。

要打印调用的 POST 参数，请`username`使用以下代码：

```
echo $_POST['username']; 
```

或者

```
echo($_POST['username']); 
```

两者都可以工作，因为 echo 不是一个函数，而是一种语言结构（参见上面链接的文档）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:26:29.543

```
printf("var = %s", $var); 
```

或者

```
echo $var; 
```

或（用于对象、数组等）

```
print_r($_POST); 
```

或者

```
var_dump($_POST); 
```

检查 php.net 了解更多信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:27:16.307

PHP 的[echo](http://php.net/manual/en/function.echo.php)构造可能是您想要的。

```
<?php echo $_POST['variable']; ?> 
```

其中`variable`是表单元素的名称。

# facebook - Facebook：如何通过域名搜索获得粉丝页面？

> ID：14757180
> 
> 赞同：0
> 
> 时间：2013-02-07T17:24:50.980
> 
> 标签：facebook, facebook-graph-api

我很想通过 Facebook Graph 搜索获得一个域的 Facebook 粉丝专页。

我尝试了以下方法，但只有一个随机 id 而不是页面 id？
[https://graph.facebook.com/?domain=stackoverflow.com](https://graph.facebook.com/?domain=stackoverflow.com)

问题：
当我只有要查询的 url 时，如何获取 Facebook 页面名称或 ID？
上述图表搜索中的 id 是否有帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:22:42.787

您可以通过 Graph API 搜索来做到这一点：

[https://graph.facebook.com/search?type=page&q=stackoverflow.com](https://graph.facebook.com/search?type=page&q=stackoverflow.com)

# actionscript-3 - 如何在 Actionscript 3 中直接访问 bytearray 的 jpeg 像素

> ID：14757183
> 
> 赞同：0
> 
> 时间：2013-02-07T17:25:05.833
> 
> 标签：actionscript-3, actionscript, jpeg

我试着：

*   通过 FileReference 加载 jpeg
*   将结果写入字节数组
*   直接从字节数组中提取像素数据（仅此而已）

我花了很多时间寻找可以从原始二进制数据（例如从字节数组）解码 jpeg 对象的 AS3 类，但无济于事（这里有一个[，](http://www.bytearray.org/?p=1089)但它依赖于 Alchemy 和一个 SWC，它不是适合）。

简而言之，一旦我在字节数组中获得了原始数据，我就想知道如何从文件的其余部分中辨别出像素数据。

我对使用 Loader 类或 Bitmap 的“getPixels”函数不感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:04:26.443

您会注意到隐写术依赖于使用 png 文件。您不能（轻松）使用 jpg 文件的原因是编码过程消除了像素数据的可靠性。Jpg 文件可以以多种方式编码，包括 CMYK 和 RGB，但最常见的是 YCbCr。JPG 压缩依赖于傅里叶变换，这将消除像素级细节。因此，您将无法对 jpg 和 png、gif、bmp 等使用相同的处理。

这并不是说您不能在 jpg 文件中执行此操作，而是您需要更改方法，或考虑压缩阶段的数据丢失（或保存未压缩）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T21:02:38.607

好吧，您*可以*直接操作**压缩数据**以包含您的消息，但您必须阅读如何在不完全破坏图像的情况下做到这一点。

但是，如果您想在解码消息时对**像素**中的消息进行编码以进行逐像素差异，恐怕您的假设（来自对 Daniel 答案的评论）是错误的。

JPEG 压缩是有损的 - 这意味着当您将修改后的像素数据放回图像文件时，这将导致所有像素数据丢失（因为它需要重新编码。）保存的唯一信息不是像素数据文件中的内容是如何重新组合一张看起来与人眼看起来非常*相似*的图像，但像素数据并不相同。

即使您对图像进行解码，然后将其保存为 JPEG 文件，然后对原始图像进行转换，最后将其保存为具有完全相同压缩设置的第二个 JPEG，您也不能依赖每个像素的比较。

但是，我似乎记得 JPEG 将图像数据压缩为 8*8 像素块，您也许可以按块操作和比较图像数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:54:23.837

> 直接从字节数组中提取像素数据（仅此而已）

为此，您需要先对 jpeg 进行解码（除了一些最终的元数据，典型 jpeg 文件中除了像素数据之外别无其他），而做到这一点的方法就是使用 Loader.loadBytes，然后使用 BitmapData.getPixels。您可能可以制作自己的解码器（就像您发布的那样），但我认为这样做没有任何好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:31:03.647

ByteArray.org 的一个名叫 Thibault Imbert 的人为 ActionScript 3 改编了 libjpeg 库。我没有对此进行测试，但其他人似乎喜欢 bytearray.org 上的评论。

[http://code.google.com/p/as3-jpeg-decoder/downloads/list](http://code.google.com/p/as3-jpeg-decoder/downloads/list)

# javascript - 在客户端-服务器系统中创建和下载文本文件

> ID：14757189
> 
> 赞同：1
> 
> 时间：2013-02-07T17:25:29.420
> 
> 标签：javascript, asp.net, silverlight, dynamics-crm-2011

在 ms 动态 crm 中，我将在自己的功能区按钮上创建一个带有一些联系人属性的文本文件。我想将此文件保存或下载到客户端计算机，以便用户可以使用它。

我怎样才能做到这一点？在测试很多不同的方法时，我快疯了。

*   使用 javascript 创建一个字符串并尝试使用数据 uri 下载它。不工作

    `var content = "test";`

    `window.open("data:text/octet-stream," + encodeURIComponent(content));`

*   尝试使用silverlight（本地我可以创建一个文件）但远程不起作用

*   下一次尝试是在服务器上用 javascript 填充/创建一个 *.aspx 文件并创建一个文本文件。但我不知道这是否有效，否则我还能做什么？

请给我一些提示来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:33:33.460

好的，我解决了。

在 crm 我集成了 javascript 代码来打开一个 aspx 站点。

```
function CreateVCF() 
{
   var entityName = Xrm.Page.data.entity.getEntityName();
   var guid = Xrm.Page.data.entity.getId();
   window.open("http://xxxxx/vcfexport.aspx?guid="+guid+ "&name="+entityName );
} 
```

在那里我创建了一个电子名片并将其返回下载

```
public partial class vcfexport : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e) {

        //Authenticate using credentials of iis       
        ClientCredentials Credentials = new ClientCredentials();

        Uri OrganizationUri = new Uri("http://server/org/XRMServices/2011/Organization.svc");
        Uri HomeRealmUri = null;

        OrganizationServiceProxy serviceProxy = new OrganizationServiceProxy(OrganizationUri, HomeRealmUri, Credentials, null);

        IOrganizationService service = (IOrganizationService)serviceProxy;

        String guidString = Request.QueryString["guid"];
        String entityName = Request.QueryString["name"];

        if (guidString != null && entityName != null && guidString != "" && entityName != "") {

            ColumnSet columnSet = new ColumnSet(true);
            Guid guid = new Guid(guidString);

            // retrieve the contact dataset
            Entity contactEntity = service.Retrieve(entityName, guid, columnSet);

            // create new vcard
            VCard vcard = new VCard();
            vcard.FirstName = contactEntity.GetAttributeValue<String>("firstname");
            vcard.LastName = contactEntity.GetAttributeValue<String>("lastname");
            //......

            String fileName = vcard.LastName + " " + vcard.FirstName + ".vcf";

            Response.ContentType = "text/x-vcard";
            Response.AppendHeader("Content-Disposition", "attachment; filename=" + fileName);
            // give download window
            Response.Write(vcard.ToString());
            Response.End();

        } else {
            lblError.Text = "Es ist ein Fehler aufgetreten. Entityname oder guid sind falsch";
        }
    } 
```

# iphone - 使用情节提要时设置完成的 TabBar 图像？

> ID：14757190
> 
> 赞同：6
> 
> 时间：2013-02-07T17:25:30.363
> 
> 标签：iphone, objective-c, cocoa-touch, awakefromnib, initwithcoder

我正在开发一个应用程序，其中大部分 UI 是通过 Xcode 中的 Storyboard 设置的。我想做的一件事是为 TabBar 上的 UITabBarItems 指定“完成”图像，而不是您可以通过 Interface Builder 访问的默认“Stencilled”图像。

我的问题是在哪里执行此操作的最佳位置，我目前正在 awakeFromNib 中执行此操作，因为当从情节提要中取消归档内容时需要执行此操作，但我不确定是否应该使用 initWithCoder: 代替，这是最好的有关系吗？

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if(self) {
        UIImage *tabIn  = [UIImage imageNamed:@"TAB_IN"];
        UIImage *tabOut = [UIImage imageNamed:@"TAB_OUT"];

        UITabBarItem *tabBarItem = [self tabBarItem];
        [tabBarItem setFinishedSelectedImage:tabOut withFinishedUnselectedImage:tabIn];
        [tabBarItem setTitle:@"TWO"];
    }
    return self;
} 
```

或者

```
- (void)awakeFromNib {
    [super awakeFromNib];
    UIImage *tabIn  = [UIImage imageNamed:@"TAB_IN"];
    UIImage *tabOut = [UIImage imageNamed:@"TAB_OUT"];

    UITabBarItem *tabBarItem = [self tabBarItem];
    [tabBarItem setFinishedSelectedImage:tabOut withFinishedUnselectedImage:tabIn];
    [tabBarItem setTitle:@"TWO"];
} 
```

我知道`initWithCoder:`当出口和动作尚未连接时，在从笔尖（包含在故事板中）取消归档对象开始时调用。我也知道`awakeFromNib`在取消归档过程结束时会调用它，并表示 viewController 现在可以使用了。我的感觉是，这实际上取决于您想做什么，尽管使用`awakeFromNib`可能会证明问题较小，因为您不会遇到尚未连接出口和操作的问题。

# 编辑：

让我换个说法，你会在什么情况下使用`initWithCoder:`，`awakeFromNib`反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:41:45.473

看来您已经在编辑前的段落中回答了自己的问题。

该[文件](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)指出

> 当一个对象收到一个 awakeFromNib 消息时，它保证设置了它的所有出口实例变量。

因此，如果您必须在初始化代码中访问`IBOutlet`ivars，则必须在`awakeFromNib`方法中进行。

虽然我更喜欢`initWithCoder:`不需要访问插座的情况，因为它是`NSCoding`根据[`NSCoding`文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)使用协议解码的对象的正确初始化方法：

> initWithCoder：指示对象从提供的编码器中的数据初始化自己；因此，它**取代了任何其他初始化方法**，并且每个对象仅发送一次

`awakeFromNib`不过附带说明一下，它并没有太大的区别，并且在我必须在我的初始化代码中访问插座的情况下，`initWithCoder:`为了简单起见，我没有同时实现这两者。因此，如果涉及到网点，我通常会`awakeFromNib`在那里实施并进行所有初始化。

# ruby-on-rails - 如何为每个用户实体拥有一个唯一的日历实体？

> ID：14757191
> 
> 赞同：-2
> 
> 时间：2013-02-07T17:25:30.493
> 
> 标签：ruby-on-rails, postgresql, database-design, rails-activerecord

我正在编写一个应用程序，它将广泛使用日历来存储每个实体的各种事物的日常信息。现在我如何为每个实体制作一个新日历。我是否为用户表中的每个条目制作一个表？

## 编辑：

我有一个实体用户。现在每个实体都有一个全年的日历。对于一年中的每一天，有 2 个字段将包含一些数据。

现在我该怎么做？我应该为每个用户创建一个新表吗？或者我应该只使用用户的外键并在每个用户的日历表中拥有 365 个条目。

## 编辑：

每个用户每天只有一个事件。也因为事件发生在用户的某些项目上，并且用户有很多项目，所以一个用户可以有多个日历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:33:02.960

**编辑**

我认为 tester123 可以很好地回答您的问题。

```
class User < ActiveRecord::Base
  has_one :calendar
  has_many :calendar_events, :through => :calendar
end

class Calendar < ActiveRecord::Base
  belongs_to :user
  has_many :calendar_events
end

class CalendarEvent < ActiveRecord::Base
  belongs_to :calendar
end 
```

在这种情况下，您有一个表`users`，每个用户在表中都有自己的日历条目`calendars`。一个用户也可以有 0 个或多个`calendar_events`. 日历事件有一个列`event_date`（您正在谈论的一年中的哪一天）和两个具有“一些数据”的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:42:22.007

您将有一张用户表和一张日历表。这就是我要开始的：

```
class User < ActiveRecord::Base
  has_one :calendar
end

class Calendar < ActiveRecord::Base
  belongs_to :user
  has_many :calendar_events
end

class CalendarEvent < ActiveRecord::Base
 belongs_to :calendar
end 
```

然后你可以这样做：

```
User.calendar.calendar_events #returns array of active record CalendarEvent objects
User.calendar.calendar_events.where(:start_date => Date.today) #assuming you have a start date field 
```

只有当您在看起来像日历的网格中呈现事件时，这些模型才会成为真正的日历。

# wordpress - Wordpress - 我应该在哪里放置可编辑的 CSS

> ID：14757192
> 
> 赞同：0
> 
> 时间：2013-02-07T17:25:38.390
> 
> 标签：wordpress

我在哪里放置诸如标题图像、背景颜色、背景图像之类的东西......？我应该简单地将它们添加到 html 代码中吗？或者将 CSS 片段添加到 functions.php 中？

此外，当我从 functions.php 向 head 部分添加一些代码时 - 这会自动加载，还是我应该自己向 head 部分添加更多内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:53:52.520

您可以为任何 css 更改更改 style.css，为页眉部分更改 header.php，为主页内容 index.php 文件的页脚部分更改footer.php

您可以将 function.php 文件中的函数调用到这些文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:06:18.787

如果您使用的主题已经有 HTML，那么只需修改 style.css。如果主题不支持您想要的图像放置，您可以尝试自己修改 HTML 文件，或让主题创建者为您添加。如果您自己修改它，您必须记住，未来对主题的更新可能会覆盖您的更改。

如果您正在创建自己的主题并且不关心灵活性，那么使用您的标签在 HTML 中添加一个点。

# mysql - 可下载 imdb 数据的限制

> ID：14757193
> 
> 赞同：1
> 
> 时间：2013-02-07T17:25:40.180
> 
> 标签：mysql, text-extraction, imdb

我正在将 imdb 导入 MySQL。可下载的纯文本 imdb 数据文件的描述表明它们包含 imdb 数据的**子集**。有谁知道可下载数据（范围）的限制是什么？例如，是否存在可下载数据中未包含的电影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:27:37.370

一旦 IMDb 成为一家公司，在**纯文本数据文件**中您将找不到后来添加的信息。

主要限制是您将没有**imdbID**（用于识别电影、人物、角色和公司的 ID），因此您无法轻松地将纯文本数据文件中的信息与网络上的信息进行匹配地点。

除此之外，值得注意的**缺失数据类别**是：主页上的简短情节、奖项、外部评论、家长指南、概要、常见问题解答、新闻。

显然，所有的留言板、海报等都不见了。

您可以将您的数据与他们的统计数据进行一些比较：[http](http://www.imdb.com/stats) ://www.imdb.com/stats ，但他们在网站上对电影进行分类的方式可能与您在文件中找到的不同，所以这并不容易比较。

一个值得注意的例外，严格来说是数据量，据我所知，“**开发中**”的标题不包含在文件中（当电影处于制作的早期阶段时，信息仅对订阅者可用IMDb 专业版）。

# java - 在 JTabbedPane 中的选项卡之间切换组件

> ID：14757194
> 
> 赞同：0
> 
> 时间：2013-02-07T17:25:40.317
> 
> 标签：java, jtabbedpane

有没有办法在`JTabbedPane`不创建这些对象的新实例的情况下在选项卡之间切换组件？或者有什么方法可以切换标签？

当组件从`JTabbedPane`via`.remove(idx)`或`.removeTabAt(idx)`方法中移除时，该组件将被销毁。也许有一种方法可以防止破坏对象？

我正在寻找一种方法来删除包含该组件的选项卡，以便在最近的将来将其添加回来，但使用另一个索引。

换句话说，我只需要更改标签顺序。但对我来说重要的是不要创建组件的新实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:51:42.197

`JTabbedPane.removeTabAt`只会删除选项卡，但不会删除您放置在选项卡内的组件。因此，要移动特定组件的选项卡，您只需在新位置为该组件插入一个新选项卡`JTabbedPane.insertTab`，这将隐式删除旧选项卡。或者您可以自己删除它并稍后再次添加。两种方法都可以正常工作：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

public class ReorderTabs {
    private static void addTab(final JTabbedPane tabbedPane, final String title) {
        final JPanel panel = new JPanel(new BorderLayout());

        JLabel content = new JLabel(title + " - content", JLabel.CENTER); 
        panel.add(content, BorderLayout.CENTER);

        JButton toFrontButton = new JButton("|<");
        toFrontButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent event) {
                // Re-insert the component in a new tab at the front. The tabbed pane will remove the old tab.
                tabbedPane.insertTab(title, null, panel, null, 0);
            }
        });
        panel.add(toFrontButton, BorderLayout.WEST);

        JButton toBackButton = new JButton(">|");
        toBackButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Remove the component from the tab. The component will not be destroyed ...
                int index = tabbedPane.indexOfComponent(panel);
                tabbedPane.removeTabAt(index);

                // ... and can be added again (or inserted at an arbitrary index with insertTab).
                tabbedPane.addTab(title, panel);
            }
        });
        panel.add(toBackButton, BorderLayout.EAST);

        tabbedPane.addTab(title, panel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JTabbedPane tabbedPane = new JTabbedPane();
                addTab(tabbedPane, "Tab #1");
                addTab(tabbedPane, "Tab #2");
                addTab(tabbedPane, "Tab #3");
                addTab(tabbedPane, "Tab #4");

                JFrame frame = new JFrame("Reorder Tabs Demo");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(tabbedPane, BorderLayout.CENTER);
                frame.setSize(400, 200);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:32:25.537

如果您不想删除它们，可以隐藏组件。

或者您可以使用切换选项卡`jtpan.setEnabledAt(int tab_index, boolean enabled)`。

设置索引使用`setSelectedIndex(int index)`

隐藏组件使用`componen.setVisible(false)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:17:37.007

这个肮脏的黑客怎么办？

```
public static void main (String [] args) throws Exception
{
    final JTabbedPane tabbedPane = new JTabbedPane ();
    tabbedPane.addTab ("A", new JButton ("A"));
    tabbedPane.addTab ("B", new JButton ("B"));
    tabbedPane.addTab ("C", new JButton ("C"));
    tabbedPane.addTab ("D", new JButton ("D"));
    JFrame frame = new JFrame ();
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane ().setLayout (new BorderLayout ());
    frame.getContentPane ().add (tabbedPane, BorderLayout.CENTER);
    frame.pack ();
    frame.setVisible (true);

    Field pagesField = JTabbedPane.class.getDeclaredField ("pages");
    pagesField.setAccessible (true);
    final List <Object> pages = (List <Object>)pagesField.get (tabbedPane);

    while (true)
    {
        Thread.sleep (1000);

        SwingUtilities.invokeLater (new Runnable()
        {
            @Override
            public void run ()
            {
                Object o = pages.get (0);

                for (int i = 1; i < pages.size (); i++)
                    pages.set (i - 1, pages.get (i));

                pages.set (pages.size () - 1, o);

                tabbedPane.setSelectedIndex ((tabbedPane.getSelectedIndex () + pages.size () - 1) % pages.size ());

                tabbedPane.invalidate ();
                tabbedPane.repaint ();
            }
        });
    }
} 
```

# jquery - JQuery Ajax 长轮询-“在 ajax 调用完成并且（至少）三十 (30) 秒过去之前，不会再次调用轮询函数”

> ID：14757196
> 
> 赞同：2
> 
> 时间：2013-02-07T17:25:44.357
> 
> 标签：jquery, ajax, long-polling

我正在寻找对网站上的“通知”系统进行长时间轮询。我以前从未这样做过，因此我正在网上寻找有关它的信息。我在这里看：http: [//techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

在关于长轮询的部分中，它说：“超时：为请求设置超时（以毫秒为单位）。超时时间从 $.ajax 调用开始。在这里，我们将超时设置为 30 秒。这意味着在 ajax 调用完成并且（至少）三十 (30) 秒过去之前，我们的 poll 函数不会被再次调用。”

在 ajax 调用完成并且至少 30 秒过去之前，不会调用 poll。

但是，当我将其添加到 Javascript 中时，会在完成 ajax 调用所需的时间内一遍又一遍地调用 poll。它不会等待 30 秒。

```
(function poll() {

         $.ajax({ url: "/myapp/messages/messages/checkMessages", success:
         function(data){alert("YO");}, complete: poll, timeout: 30000 });

    })(); 
```

我是不是做错了什么，或者这是轮询应该工作多长时间？

另外，这样有效吗？这会随着网站流量而扩展吗？

谢谢您的帮助！

```
(function poll(){
           setTimeout(function(){
              $.ajax({ url: "/myapp/messages/messages/checkMessages", success: function(data){
                  console.log("Polling!");
              }, complete: poll, timeout: 30000});
          }, 30000);
        })(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:37:44.097

设置`$.ajax`呼叫超时只会设置呼叫的最大超时。

即，如果第一次调用`$.ajax`在超时时间内未完成，则将再次调用 poll。否则，如果调用完成，`poll`则将再次调用。如果在超时时间之前完成，这将导致`poll`重复调用。

下面将`poll`setTimeout 包装起来，停止`poll`重复调用自身（如您在上面所做的那样）

```
(function poll(){
    setTimeout(function(){
        $.ajax({ url: "/myapp/messages/messages/checkMessages", success: function(data){
            console.log("Polling!");
        }, complete: poll, timeout: 30000});
    }, 30000);
})(); 
```

*注意：我已经为任何寻求更清晰的人添加了答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T06:01:55.903

进行长轮询的原因是为了获得服务器推送的效果。这意味着服务器端存在不可预测的延迟，在此期间，理想情况下，客户端只是异步等待服务器发送消息。服务端无法发起与客户端的连接，所以客户端发起连接，然后等待服务端有话要说。

如果这是您的想法，那么没有理由对 AJAX 调用施加超时；好吧，有一个：如果您担心与服务器的连接可能会断开，或者服务器本身可能会无限期挂起，那么在 AJAX 调用上设置超时将导致客户端在给定时间后重新启动连接，不管服务器是否传输了任何东西。在没有与服务器断开连接的情况下，客户端超时完全没有区别。

最初的问题表明服务器会立即响应每个 ajax 请求，这听起来像是在客户端想要一个计时器（而不是超时）的原因是为了减慢与服务器的对话。如果是这样的话，这真的不是长轮询，它只是普通的轮询。简而言之，区别在于：通过轮询，客户端控制从服务器流出信息的时间和频率。通过长轮询，服务器控制时间和频率。整个想法是消除服务器发送数据和客户端处理该数据之间的任何延迟。在轮询端使用计时器来延迟来自服务器的响应会破坏该目的。

您可以在客户端进行有效的长轮询，而无需任何超时。正如已经提供的示例一样，使用“完整：”定义重新启动 ajax 请求；使用“成功”定义来处理任何数据。无论 XHR 成功与否，都会发生“完成”。

如果您想让它免受连接断开的影响，那么您可以通过在服务器端执行超时来实现死机切换。在服务器上，即使它没有要发送的数据，也要让它回复心跳。在成功：定义中，更新本地上次心跳时间。在完整的：定义中，恐慌或失败，或者当没有心跳超过服务器超时设置时做你想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-14T07:04:01.277

好像您遇到了会话文件锁定

对于 PHP

使用**session_write_close()**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T08:31:53.840

`complete`如果无论如何都打算每 30 秒调用一次回调，则您看不到回调的必要性：

```
(function poll(delay){
    $.ajax({
        url: '/myapp/checkMessages',
        timeout: delay,
        success: function(data){
            console.log('Messages !');
        }
    });

    setTimeout(function(){ poll(delay); }, delay);
})(30000); 
```

# java - 对*提供的*依赖项进行分组的最佳方式

> ID：14757198
> 
> 赞同：2
> 
> 时间：2013-02-07T17:25:47.183
> 
> 标签：java, maven

我们有一个多模块 POM，它也作为所有涉及的子模块的父 POM。调用它`MultiModulePOM`。我们有大约 70 个模块，例如编号`Module1`为`Module70`.

现在：这些模块中的前 30 个*仅*在编译时需要一组 JAR 文件。那就是 - `scope=provided`。由于我们讨论的是一*组*JAR 文件，因此让这 30 个模块保持同步非常乏味，而且总的来说，我不喜欢到处复制定义。

所以，我陷入了[依赖分组](http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-grouping-dependencies/)的陷阱。似乎是个好主意，但它不适用于`provided`依赖项。换句话说：如果我将依赖的 JAR 分组到一个名为 的模块`ExtDependencies`中，并使`Module1`依赖于`ExtDependencies`，则引用的 JAR`ExtDependencies`不会被传递到`Module1`，因为它们的范围是`provided`.

（如果最后一段不是真的，请告诉我，因为它真的可以让我摆脱困境）

我能看到的唯一其他选项是创建一个名为 (for example) 的父 POM `IntermediaryPOM`。`IntermediaryPOM`扩展`MultiModulePOM`并使用`scope=provided`. 模块`Module1`-`Module30`然后扩展`IntermediaryPOM`.

这似乎可以解决问题，但我有三个问题：

1.  它增加了另一层 POM，我不确定它是否真的需要。
2.  后来，在分发期间，我发现自己也必须安装/部署中间 POM。
3.  考虑一般情况：中间 POM 可能有其他兄弟用于其他 JAR 集（对于模块 31-50）。因此，这个解决方案似乎不能很好地扩展。

所以我的问题是 - 根据你的经验，解决这个问题的最佳方法是什么？这种用例的任何已知最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:08:31.870

恐怕这里没有简单的解决方案。

您说得对，如果您在其中声明公共依赖项，`ExtDependencies`因为`provided`它们不会被添加到任何其他依赖于`ExtDependencies`. 就是这样`provided`工作的。

但是您可以在没有范围的情况下声明这些常见依赖项（例如，使用默认`compile`范围）并添加`provided`对`ExtDependencies`. 在这种情况下，所有`ExtDependencies`依赖项*都将*添加到类路径中。上帝，这是很多*“依赖”* :)

您还提到了其他可能的选择——引入另一个抽象级别（您可能知道，这是解决几乎所有问题的一种方法）。但是这种多层次的层次结构不太优雅，也更难维护（我在我们的项目中有它，所以我一直在那里）。

一般来说，我没有遇到过如此大规模的这个问题，但如果我要解决它，我会考虑到范围建议，选择第一个选项。

# python - Rabbitmq 服务器工作

> ID：14757199
> 
> 赞同：0
> 
> 时间：2013-02-07T17:25:53.350
> 
> 标签：python, rabbitmq

假设我在 rabbitmq 服务器上有一个生产者，它将生成一个随机数并将其传递给消费者。消费者将收到来自生产者的所有随机数。如果我要杀死我的消费者进程，那么生产者在这种情况下会做什么？它是否会持续生成数字以及消费者（客户端）何时出现，它将开始再次发送生产者或其他东西生成的所有数字......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:24:21.630

要完全接受这些功能，您需要了解 rabbitmq 代理如何与交易所一起工作。我相信这会解决你的问题。

您将创建一个交换，而不是发送到单个队列。生产者发送到交易所。在此时没有队列的这种状态下，消息将被丢弃。然后，您需要创建一个队列以便消费者接收消息。消费者将创建队列并将其绑定到交换器。此时队列将接收消息并将它们传递给消费者。

在您的情况下，您可能会使用扇出交换，这样您就不必担心绑定和路由密钥。但是您还应该将队列设置为自动删除。这将确保当消费者下线时，队列将被删除。因此，不受此影响的生产者将继续向交换器发送消息，这些消息将被丢弃，直到队列重新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:41:52.857

现在我假设你有一个主题交流。如果有一个队列并且它绑定到生产者的相同交换和路由键（或点前缀），那么无论那里是否有消费者，队列都会建立消息......*在大多数情况下*。

> RabbitMQ 中消息传递模型的核心思想是生产者从不直接向队列发送任何消息。实际上，生产者通常根本不知道消息是否会被传递到任何队列。-- [http://www.rabbitmq.com/tutorials/tutorial-three-python.html](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)

如果队列不存在，则消息将被丢弃。如果队列确实存在（即它的持久性），您可以对队列和/或消息进行配置，以使您的消息具有 TTL 或生存时间：( [http://www.rabbitmq.com/ ttl.html](http://www.rabbitmq.com/ttl.html)和[http://www.rabbitmq.com/dlx.html](http://www.rabbitmq.com/dlx.html)）。您可能还想研究并了解队列持久性和自动删除。我强烈建议您查看 AMQP 快速参考，因为您可以从中找出您想要的内容：[http](http://www.rabbitmq.com/amqp-0-9-1-quickref.html) ://www.rabbitmq.com/amqp-0-9-1-quickref.html 。您必须将伪代码转换为您的库或客户端。

基本上这一切都归结为什么类型的交换以及队列和消息的配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:37:20.830

rabbit mq 中的 q 代表队列。这意味着放置在队列中的所有消息（在您的情况下为生产者随机数）将保留在队列中，直到有人来获取它们。

# jquery - Slidesjs不适用于缩略图

> ID：14757209
> 
> 赞同：0
> 
> 时间：2013-02-07T17:26:21.867
> 
> 标签：jquery, slider

我正在尝试使用自定义分页，因此当我单击缩略图时，大图像会发生变化。创建者提供的示例已损坏。

[http://slidesjs.com/examples/product/](http://slidesjs.com/examples/product/)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:28:20.180

他正在使用 jQuery 版本 1.5.1。但该`on`方法从 1.7 版开始可用。因此，如果您使用 jQuery 1.7 或更高版本，基本上这个示例应该可以工作。

所以他没有更新他的示例 jQuery 版本，但确实使用了更高版本的 jQuery 版本的功能。

**我是怎么发现的？**
如果您看到错误，您可以看到它是一个错误。

```
Uncaught TypeError: Object [object Object] has no method 'on' 
```

这意味着该`on`方法不是`Object`.

# windows-phone-8 - Windows Phone 8 中的 Cordova 多个回调

> ID：14757212
> 
> 赞同：2
> 
> 时间：2013-02-07T17:26:23.660
> 
> 标签：windows-phone-8, cordova, windows-phone, phonegap-plugins, cordova-2.0.0

我有一个适用于 Android 和 iOS 的 Cordova 插件。但是，当移植到 Windows Phone 8 时它会失败，因为在 Cordova for Windows Phone 中似乎不支持多个未完成的回调。

**问题**是这样的：

当使用将 KeepCallback 设置为 true 的 PluginResult 调用 DispatchCommandResult 时，来自不同方法的进一步 DispatchCommand 将同时调用其回调和前一个回调（将 KeepCallback 设置为 true 的回调）。

更糟糕的是，如果第二个 DispatchCommandResult 的 PluginResult 将 KeepCallback 设置为 false（默认值），那么这将取消任何将 KeepCallback 设置为 true 的进一步回调。

**示例**：

考虑下面的代码。这是对 Cordova Echo 样本的修改。

echo 方法将（通过 DispatchCommandResult）使用最初调用的相同字符串调用 javascript“成功”回调（经过几次 JSON 转换）

repeat 方法的作用与 echo 相同，只是它在单独的线程中每 5 秒重复调用一次 javascript 'success' 回调。

如果调用repeat，然后在调用echo 之后的某个时间点，则echo 方法中的DispatchCommandResult 将导致调用echo 成功和repeat 成功回调，然后阻止进一步的重复成功回调，因为KeepCallback 未设置为true。

在 Android 中，这个问题不是问题，因为 Cordova 提供了 callbackId。但是，对于 Windows Phone，callbackId 是不可访问的。

C# 代码

```
namespace Cordova.Extension.Commands
{
    public class Echo : BaseCommand
    {
        public void echo(string options)
        {
            string optVal = JsonHelper.Deserialize<string[]>(options)[0];
            DispatchCommandResult(new PluginResult(PluginResult.Status.OK, optVal));
        }
        public void repeat(string options)
        {
            string optVal = JsonHelper.Deserialize<string[]>(options)[0];
            ThreadStart worker = () =>
            {
                try
                {
                    while (true)
                    {
                        Thread.Sleep(5000);
                        PluginResult r = new PluginResult(PluginResult.Status.OK, optVal);
                        r.KeepCallback = true;
                        DispatchCommandResult(r);
                    }
                }
                catch (Exception ex)
                {
                    this.DispatchCommandResult(new PluginResult(PluginResult.Status.ERROR, ex.Message));
                }
            };
            new Thread(worker).Start();
        }
    }
} 
```

JavaScript 代码

```
function echo() {
    function success(message) {
        console.log("echo success: " + message);
    }
    function error(e) {
        console.log("echo error: " + e);
    }
    cordova.exec(success, error, "Echo", "echo", ["Hello"]);
}

function repeat() {
    function success(message) {
        console.log("repeat success: " + message);
    }
    function error(e) {
        console.log("repeat error: " + e);
    }
    cordova.exec(success, error, "Echo", "repeat", ["Hello again"]);
}

echo();
.
.
.
repeat();
.
.
.
echo(); 
```

样本输出

```
Log:"echo success: Hello"
Log:"repeat success: Hello again"
Log:"repeat success: Hello again"
Log:"repeat success: Hello again"
Log:"repeat success: Hello again"
Log:"repeat success: Hello"
Log:"echo success: Hello" 
```

有没有其他人有这个问题？如果是这样，是否有解决方法？我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T12:12:10.167

我在使用cordova 2.5时遇到了同样的问题，这就是我发现的。

在（尚未发布的）cordova 2.8 版本中，如果您查看[`BaseCommand.cs`](https://github.com/apache/cordova-wp8/blob/2.8.x/templates/standalone/cordovalib/Commands/BaseCommand.cs)cordovalib 文件。您可以看到`CurrentCommandCallbackId`可用于跟踪您要调用的回调的 。

然后，如果您将 KeepCallback 设置为 false，您可以将命令分派给想要的回调。

PhoneGap 的当前版本是 2.7.0，因此要使用它，您必须克隆[2.8 版本的 cordova](https://github.com/apache/cordova-wp8/tree/2.8.x)并复制文件夹的`Plugins`、`cordova`和`cordivalib`的内容。`templates/standalone`

完成后，您可以通过以下方式使用此新功能：

```
private void DispatchMessage(PluginResult.Status status, string message, bool keepCallback, string callBackID)
{
    PluginResult res = new PluginResult(status, message);
    res.KeepCallback = keepCallback;
    DispatchCommandResult(res, callBackID);
} 
```

但是，一旦 Phonegap 2.8 发布，使用 Cordova 的正式版本更新您的应用程序会更安全。

# php - PDO 未捕获异常 - 插入值列表与列列表不匹配

> ID：14757215
> 
> 赞同：1
> 
> 时间：2013-02-07T17:26:31.633
> 
> 标签：php, exception, pdo

我得到这个异常

```
Uncaught exception 'PDOException' with message 'SQLSTATE[21S01]: 
Insert value list does not match column list: 1136 Column count doesn't match 
value count at row 1 
```

使用此代码：

```
$stmt = $conn->prepare('INSERT INTO project VALUES(:category, :title, :name)');
      $stmt->execute(array(
          ':category' => $_POST['category'],
          ':title' => $_POST['title'],
          ':name' => $_POST['name']
)); 
```

错误信息是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T17:29:47.150

在查询中，指定要填充的列，例如：

```
$stmt = $conn->prepare('INSERT INTO project (category, title, name) VALUES(:category, :title, :name)'); 
```

如果您不以这种方式指定列，则必须为表中的所有列包含一个值，这就是您收到错误的原因 - 因为表中还有其他列并且您没有明确指定对他们所有人的价值。

最好指定列，因为如果将来添加任何列或更改顺序，除非指定列列表，否则您的查询将中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:28:14.643

```
INSERT INTO project(category_field,title_field,name_field) VALUES(:category, :title, :name) 
```

其中 category_field,title_field,name_field 是表中的`project`列

您必须指定要在哪一列中插入数据。

**注意：**当然如果不需要其他字段值（不设置为 NOT NULL）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T17:29:29.323

您尚未列出要插入的列。

IE

`INSERT INTO project (category, title, name) VALUES (:category, :title, :name)`

# javascript - 隐藏字段时的javascript验证

> ID：14757217
> 
> 赞同：0
> 
> 时间：2013-02-07T17:26:50.903
> 
> 标签：javascript, jquery, validation

我有下面的代码，它有一个下拉菜单。the dropdown appears only when the other option is selected. 我想做验证，仅在选择另一个选项来验证字段不为空时检查

此行适用于验证，但在隐藏框时也会弹出，因此需要额外检查。我有我的尝试在底部，但必须有一个更好的漂亮的方法。谢谢

```
if(!blank('otherprodtypebox[<xsl:value-of select="@id"/>]')){alert("Please enter a valid other option");return false;}

<script type="text/javascript">
function myOtherBox(e, id) {
    if (e.value == 'otherprodtype')
    {
        $('#myBox_' + id).show();
    }
    else
    {
        $('#myBox_' + id).hide();
    }

}
</script>

<tr>
    <td class="Label">Product Type</td>
    <td class="field">
        <select name="producttypes">
            <xsl:attribute name="onchange">myOtherBox(this, '<xsl:value-of select="@id"/>'); checkBoxVisible(this, '<xsl:value-of select="@id"/>')</xsl:attribute>
            <xsl:attribute name="id">producttypes_<xsl:value-of select="@id"/></xsl:attribute>

            <option value="a">
                <xsl:if test="producttypes/option[@id='a']='selected'">
                    <xsl:attribute name="selected"/>
                </xsl:if>A</option>
            <option value="b">
                <xsl:if test="producttypes/option[@id='b']='selected'">
                    <xsl:attribute name="selected"/>
                </xsl:if>B</option>
            <option value="otherprodtype">
                <xsl:if test="producttypes/option[@id='otherprodtype']='selected'">
                    <xsl:attribute name="selected"/>
                </xsl:if>Other</option>
        </select>
    </td>
</tr>
<tr style="display:none;">
    <xsl:attribute name="id">myBox_<xsl:value-of select="@id"/></xsl:attribute>
    <td class="Label">Other</td>
    <td>
        <input class="amdInputText" type="text" id="otherprodtypebox" value="">
              <xsl:attribute name="value"><xsl:value-of select="otherprodtypebox"></xsl:value-of></xsl:attribute>
        </input>
    </td>
</tr>

if($('#myBox_' + id).validate({ ignore: ':hidden' });) { if(!blank('otherprodtypebox[<xsl:value-of select="@id"/>]')){alert("Please enter a valid other option");return false;} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:51:22.580

使用类进行验证。也就是说，验证一个名为 .validator 的类。

在你的 JS 中：

```
function myOtherBox(e, id) {
    if (e.value == 'otherprodtype')
    {
        $('#myBox_' + id).show().addClass('validator');
    }
    else
    {
        $('#myBox_' + id).hide().removeClass('validator');
    }
} 
```

编辑：或者，您可以将其用作您的选择器，而不是上面的：

```
 if($('#myBox_' + id + ':visible').....................etc 
```

那会更好。

# makefile - 当未明确使用目标时强制执行模式规则

> ID：14757219
> 
> 赞同：0
> 
> 时间：2013-02-07T17:26:58.200
> 
> 标签：makefile, rule-engine

我有一个 Makefile 负责下载一些所需的 javascript 文件作为先决条件`r.js`

对于他们每个人，我都创建了一个`.url`文件，其中包含`.js`可以下载文件的 url，并设置如下模式规则：

```
static/js/lib/%.js: jslibsurls/%.url
    curl -L -s -o $@ `cat $<` 
```

但它只下载一个`.js`文件，如果它是 Makefile 中某处的显式依赖项......

有没有办法让模式规则被执行，如果有一个依赖匹配它，即使目标还没有使用（一旦它们被创建，它们将在通配符中使用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:36:04.483

我想我明白了，我需要`patsubst`使用文件的名称`.url`来创建`.js`并使用结果作为对虚假规则的依赖，然后我可以将其用作`r.js`步骤的依赖。

```
DOWNLOADED_LIBS+=$(patsubst jslibsurls/%.url,static/js/lib/%.js,$(wildcard jslibsurls/*.url))

download-libs: $(DOWNLOADED_LIBS)

#this downloads a .js in static/js/lib/ file for each .url file in jslibsurls/
static/js/lib/%.js: jslibsurls/%.url
    curl -L -s -o $@ `cat $<`

.PHONY: download-libs 
```

# iphone - iOS - 执行到 MPMoviePlayerViewController 的 segue 时出现 EXC_BAD_ACCESS

> ID：14757220
> 
> 赞同：2
> 
> 时间：2013-02-07T17:27:08.723
> 
> 标签：iphone, ios, xcode, ios6, storyboard

我正在使用情节提要-我对此很陌生-

当我单击[^(一个)]`EXC_BAD_ACCESS` [^(指向`code=2`.`address = 0x4`)]`MPMoviePlayerViewController`

为了让您了解我到目前为止所获得的信息：我`ViewControllers`在同一个`ViewController`.h/m 类下有几个不同的，导航由 .h/m 控制`NavigationController`。我从 a `NavController`and single开始，`ViewController`并一直`ViewControllers`用简单的 CTRL-Click button-to-new- 链接 new- `ViewController`。我添加了一个新的`ViewController`；将其类更改`MPMoviePlayerViewController`为身份检查器的自定义类部分，但是当我单击按钮开始转换时，我不断收到此错误。

`ViewController.h`如果相关，这是我的代码：

```
- (IBAction)postToTwitter:(id)sender {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
        SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        [tweetSheet setInitialText:@"Check this out!"];
        [self presentViewController:tweetSheet animated:YES completion:nil];
    }
}
- (IBAction)postToFacebook:(id)sender {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [controller setInitialText:@"Posted from IOS App Test -- It works!"];
        [self presentViewController:controller animated:YES completion:Nil];
    }
}
- (IBAction)playVideo1:(id)sender {
    NSURL * url = [[NSURL alloc]initWithString:@"link omitted"];
    //create our moviePlayer
    moviePlayer = [[MPMoviePlayerController alloc]initWithContentURL:url];
    [self.view addSubview:moviePlayer.view];

    //Some additional customization
    moviePlayer.fullscreen = YES;
    moviePlayer.allowsAirPlay = YES;
    moviePlayer.shouldAutoplay = NO;
    moviePlayer.controlStyle = MPMovieControlStyleDefault;
} 
```

# amazon-web-services - 亚马逊 s3 / 其他 AWS 服务上的操作日志

> ID：14757222
> 
> 赞同：15
> 
> 时间：2013-02-07T17:27:12.710
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, amazon-cloudfront, amazon-iam

我正在尝试查看哪个用户负责 S3 中的更改（在存储桶级别）。对于在 S3 存储桶级别或创建实例的 EC2 执行的操作，我找不到审计跟踪。Beanstalk 有机器执行的操作的日志，但没有用户执行的操作。

AWS 周围有没有一种方法可以让我们在 IAM 或任何其他位置看到这些信息？

PS：我对提供访问日志的 S3 日志存储桶不感兴趣

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T21:43:21.523

## 更新

AWS 刚刚宣布了[AWS CloudTrail](http://aws.amazon.com/cloudtrail/)，终于从今天开始提供审计 API 调用（并且免费），有关详细信息，请参阅介绍性帖子[AWS CloudTrail - 捕获 AWS API 活动](http://aws.typepad.com/aws/2013/11/aws-cloudtrail-capture-aws-api-activity.html)：

> 您是否需要跟踪一个或多个 AWS 账户的 API 调用？如果是这样，那么新的 AWS CloudTrail 服务就适合您。
> 
> 启用后，AWS CloudTrail 会使用[AWS 管理控制台](https://console.aws.amazon.com/)、[AWS 命令​​行界面 (CLI](http://aws.amazon.com/cli/) )、您自己的应用程序和第三方软件记录对 AWS API 的调用，并将生成的日志文件发布到您的[Amazon S3](http://aws.amazon.com/s3/)存储桶中。选择。CloudTrail 还可以在每次发布文件时向您选择的 Amazon SNS 主题发出通知。每个调用都以 JSON 格式记录，以便于解析和处理。

请注意以下（临时）限制：

*   尚未涵盖所有服务，但最重要的服务已包含在初始版本中，并且 AWS 计划*随着时间的推移增加对其他服务的支持*。
    *   **更新**：AWS 最近增加了[七项新服务](http://aws.amazon.com/blogs/aws/aws-cloudtrail-update-new-services-support-from-cloudcheckr/)，今天又增加了一项，见下文。
*   更重要的是，并非所有区域都受支持（~~目前仅*美国东部（弗吉尼亚北部）和美国西部（俄勒冈）区域*~~），尽管 AWS 将尽快*增加对其他区域的支持*。
    *   **更新**：AWS 刚刚添加了[更多位置和服务](https://aws.amazon.com/blogs/aws/cloudtrail-expansion/)，确实迅速接近了其整个[全球基础设施的覆盖范围。](https://aws.amazon.com/about-aws/globalinfrastructure/)

* * *

## 初步答案

这是一个长期存在的功能请求，但不幸的是，截至今天，AWS 不提供（公共）审计跟踪 - 添加此功能的最合理方法可能是对[AWS Identity and Access Management (IAM)](http://aws.amazon.com/iam/)的相应扩展，这是越来越普遍的身份验证和授权层，用于访问所有现有（几乎可以肯定是未来）[产品和服务](http://aws.amazon.com/products-solutions/)中的 AWS 资源。

[因此， IAM 常见问题](http://aws.amazon.com/iam/faqs/)解答中提供了一些相应的答案：

> *   [AWS Identity and Access Management 管理操作是否会记录到审计跟踪中？](http://aws.amazon.com/iam/faqs/#Will_Identity_and_Access_Management_administrative_actions_be_logged_to_an_audit_trail)：
>     不。这是计划在未来的版本中发布的。
> *   [AWS 服务中的用户操作是否会记录到审计跟踪中？](http://aws.amazon.com/iam/faqs/#Will_user_actions_in_AWS_web_services_be_logged_to_an_audit_trail)
>     不，这是计划在未来的版本中发布的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-30T00:17:54.620

单个 CloudTrail 的当前定价是免费的。

**1\. 启用 CloudTrail**

使用 CloudTrail 仪表板并将所有事件发送到 S3 存储桶，例如`my-cloudtrail`

**2.查看结果**

CloudTrail 仪表板可让您进行一些粗略的搜索，但如果您有数千个事件，使用起来会很痛苦。

假设我想要 user 的操作`foo_user`，我只使用 CLI 工具：

```
mkdir -p /tmp/cloudtrail
cd /tmp/cloudtrail
aws s3 sync s3://mc10-cloudtrail .
cd AWSLogs
zcat `find . -type f` | jq '.Records[] | "\(.eventName) \(.userIdentity.userName)"' | grep food_user | sort | uniq 
```

示例输出：

```
"CreateGrant foo_user"
"DescribeInstances foo_user"
"GetConsoleOutput foo_user"
"ModifyInstanceAttribute foo_user"
"StartInstances foo_user"
"StopInstances foo_user" 
```

注意：S3 数据事件在 CloutTrail 中的计费方式不同，但这有点多余，因为您可以在 S3 存储桶上启用日志记录并 grep 这些日志，或将它们指向 Logstash/Kibana。

# compression - BreezeController 是否支持压缩？

> ID：14757224
> 
> 赞同：1
> 
> 时间：2013-02-07T17:27:18.620
> 
> 标签：compression, breeze

BreezeController 是否有启用压缩的选项？还是我必须自己添加一个消息处理程序？

见[http://ben.onfabrik.com/posts/aspnet-web-api-compression](http://ben.onfabrik.com/posts/aspnet-web-api-compression)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:12:54.253

Breeze 目前在这方面没有做任何事情。但是根据您附加的链接，它很容易通过 ASP.NET 直接启用。

# serial-port - 在 Arduino 上接收 XBee 信号

> ID：14757227
> 
> 赞同：1
> 
> 时间：2013-02-07T17:27:30.477
> 
> 标签：serial-port, arduino, xbee

**A面：**

*   [Arduino Uno](http://en.wikipedia.org/wiki/Arduino#ArduinoUno) R3 带无线 Proto 扩展板，由 USB 供电
*   使用 XBee Pro S1，DH 0 DL FFFF MY 0 API 0
*   Wireless Proto shield 在“micro”位置有串行选择开关

**B面：**

*   XBee Explorer USB 连接到带有 XCTU 软件的 PC
*   使用 XBee Pro S1，DH 0 DL FFFF MY 0 API 0

（当我把两个[XBee](http://en.wikipedia.org/wiki/XBee)模块都放在 USB 浏览器板上，连接两台 PC 时，我可以毫无问题地来回发送数据，所以我认为 XBee 设置很好。）

**问题**

现在我想让 Arduino 从 B 端捕获输入（使用 XCTU 终端发送），但是当我在终端中输入任何内容时，A 侧的 RSSI LED 仅亮 5 秒，但 Arduino 似乎没有捕获任何数据，因为它不会像应有的那样发回数据（`Serial.print("I received: "`）；

Arduino[草图](http://www.arduino.cc/en/Tutorial/Sketch)：

```
int incomingByte = 0;

void setup() {
    Serial.begin(19200);  //Both XBee chips are configured at 19200 Baud
    Serial.print("start echo machine");  //This is received just fine on the B side
}

void loop() {
    if (Serial.available() > 0) {
        // Read the incoming byte:
        incomingByte = Serial.read();

        // Say what you got:
        Serial.print("I received: ");  //This never shows on the B-side
        Serial.println(incomingByte, DEC);
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:01:47.023

您必须使用 XBee 的 SoftwareSerial(RX,TX) 和将输出打印到 PC 的 Serial。SoftwareSerial 的 RX 和 TX 必须连接到模块的 DOUT 和 DIN 引脚到 Wireless Proto shield：

```
#include <SoftwareSerial.h>

// Connect pin 10 of Arduino to DOUT of Wireless Proto shield
uint8_t ssRX = 10;

// Connect pin 11 of Arduino to DIN of Wireless Proto shield
uint8_t ssTX = 11;

SoftwareSerial nss(ssRX, ssTX);

void setup() {
  Serial.begin(19200);
  nss.begin(19200);
  Serial.println("Serial works");
}

void loop() {

  if (nss.available()){
    Serial.println("received packet:");
    for(int i=0;i<25;i++){
      Serial.print(nss.read(),HEX);
      Serial.print(",");
    }
    Serial.println();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T09:12:50.387

许多电路板需要启用 DIN 上的上拉电阻。根据一些消息来源，Digi Xbee 模块默认启用此上拉。

要确保它已启用或启用它：

将您的 Xbee 模块放入 USB 资源管理器并使用 X-CTU 检查 PR 配置。Xbee Pro S1 的 DIN 位于第 7 位，因此在这种情况下，您需要最后一位为 1。

我这样说：00000001

然后将其转换为十六进制（在我的情况下为 01）并使用 X-CTU 将该值写入 Xbee 模块。

所以这是一个电子问题，而不是编程问题。

# javascript-events - 如何将运行我的脚本的文本链接更改为下拉链接？

> ID：14757228
> 
> 赞同：1
> 
> 时间：2013-02-07T17:27:34.003
> 
> 标签：javascript-events

我有一个 javascript，它使用以下方法更改同一页面上的输出：

```
<"a href="#" onclick="change('Bob','0','0','2','2','1','0','0')">Bob</a>
<"a href="#" onclick="change('Sam','0','0','2','2','1','0','0')">Sam</a>
<"a href="#" onclick="change('Ted','0','0','2','2','1','0','0')">Ted</a> 
```

我想将链接更改为下拉（选择 - 选项）表单字段。

任何帮助我走向正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:13:40.187

```
<select size="1" onchange="change(this.value, '0','0','2','2','1','0','0')">
    <option>Bob</option>
    <option>Sam</option>
    <option>Ted</option>
<select> 
```

Using`this.value`为您提供选择框的当前选定选项（Bob、Sam 或 Ted）。

* * *

**编辑**

如果你想给你的函数传递不同的参数，你可以这样做：

Javascript：

```
function selectValueChanged(value){
    switch(value){
        case "Bob":
            change('Bob','-1','0','2','4','6','0','0');
            break;
        case "Sam":
            change('Sam','0','-2','3','5','1','0','2');
            break;
        case "Ted":
            change('Ted','2','1','4','2','3','2','0');
            break;
    }
} 
```

HTML：

```
<select size="1" onchange="selectValueChanged(this.value)">
    <option>Bob</option>
    <option>Sam</option>
    <option>Ted</option>
<select> 
```

因此，您将选择的值传递给`selectValueChanged`，并且此函数`change`使用适当的参数调用该函数。

# iphone - 单击网页内的播放 youtube 视频时，iOS 6.1 UIWebview 崩溃

> ID：14757229
> 
> 赞同：10
> 
> 时间：2013-02-07T17:27:34.750
> 
> 标签：iphone, ipad, ios6

我正在尝试在应用程序中显示一个网站。我正在尝试加载的网站中有一个 youtube 视频。该网站在 UIWebView 中正确加载，并且还列出了 youtube 视频。但是当我点击 youtube 视频时，应用程序崩溃了。

崩溃日志只是说：

```
setting movie path: http://r19---sn-aig7knl7.c.youtube.com/videoplayback?............... 
```

该网站在 Safari 中加载时运行良好，甚至可以全屏播放 youtube 视频。

请帮我解决这个问题。

***2013 年 2 月 11 日 - 更新***

**仅在 iOS Simulator 6.1 上观察到此问题。在设备上一切正常。**

***详细信息：***

我有一个自定义 UIViewController(TestWebViewController)，它有一个 UIWebView 实例并实现了 UIWebViewDelegate。我在 Storyboard 中添加了一个 UIViewController 并在其中添加了 UIWebView，将此 UIViewController 链接到我的自定义 TestWebViewController 并链接了 IBOutlet 和 UIWebView 的委托。

在单击一个按钮时，我正在以编程方式实例化 TestWebViewController 使用

```
TestWebViewController *testWebVC = [self.storyboard instantiateViewControllerWithIdentifier:@"testWebVC"];
testWebVC.view.frame = self.view.frame;
[testWebVC loadWebViewWithUrl:TEST_URL];

[self presentViewController:testWebVC animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-31T04:44:08.587

正如斯科特在他的评论中所说，我删除了所有异常的断点，我的错误消失了。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T14:18:22.290

```
 TestWebViewController *testWebVC = [self.storyboard instantiateViewControllerWithIdentifier:@"testWebVC"];

[testWebVC LoadWebView:@"YOUR URL STRING"];
[self presentViewController:testWebVC animated:YES completion:nil];

 AND in TestWebViewController class

-(void)LoadWebView:(NSString *)address {
addressStr = address;
}

- (void)viewDidLoad
{
[super viewDidLoad];
url = [NSURL URLWithString:addressStr];
NSURLRequest *request = [NSURLRequest requestWithURL:url] ;
[myWebView loadRequest:request] ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T07:09:34.100

iOS 5.0 和 iOS 5.1 上的模态视图是导致全屏视频崩溃的问题，AFAIK。他们只是改变了那个版本的iOS（parentViewController和presentingViewController）中的视图层次结构，这就是后果。我很久以前在这里问过这个问题，这里还有一个相同的问题，但仍然没有人知道该怎么做。

首先，他们在 6.0 中修复了它，我想，这很好。

对于 5.1，我们稍微改变了设计并避免了模态视图。这样做，如果在你的情况下是可能的。

# php - 在javascript中调用url参数

> ID：14757236
> 
> 赞同：0
> 
> 时间：2013-02-07T17:28:06.340
> 
> 标签：php, javascript, url-parameters

我有下面的函数调用，需要将 url 参数传递给 php 文件。我将如何使用 $_GET 函数传递这些。以下是我所拥有的，显然不起作用。谢谢。

```
$.ajax({   type: "POST",   url: '"chkinpost.php + "?eventid=<php echo $_GET['eventid']?> +  ?eventname= <php echo $_GET['eventid']?>"' }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:30:14.497

尝试：

```
$.ajax({   type: "POST",   url: '"chkinpost.php + "?eventid=<? echo $_GET['eventid']?> +  ?
eventname= <? echo $_GET['eventid']?>"' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:40:56.293

怎么样

```
$.ajax({
    type: "POST",
    url: "chkinpost.php?eventid=<?php echo $_GET['eventid']; ?>&eventname=<?php echo $_GET['eventname']; ?>"
}); 
```

尽管我不完全确定您为什么要使用 POST 来传递 GET 参数，但至少格式和正确语法应该是这样的。此外，我将第二个变量从 PHP 更改为 eventname，因为我怀疑您是否打算将 eventid 作为 id 和 name 传递。

# html - 只有一个 Swiffy 转换实例在具有多个转换的页面上有效？

> ID：14757238
> 
> 赞同：0
> 
> 时间：2013-02-07T17:28:16.420
> 
> 标签：html

在同一页面上放置多个快速转换似乎是冲突的，只有第一个显示。是否有一个代码区域，可能是实例名称，我可以在每个区域上进行更改，以便多个转换可以出现在同一页面上？

这是我正在谈论的页面的链接：[http ://www.ufonies.com/fansmobi.html](http://www.ufonies.com/fansmobi.html)

标题中的动画效果很好，“太空高尔夫”图像下应该有另一个小动画，但它只是显示为一个空白区域，那里有转换代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:32:38.460

滑块也有这个问题 - 每张幻灯片都是一个快速的动画，每次我使用两个或更多动画时，快速抛出一个错误。我通过使用 iframe 容器代替 div 来解决这个问题 - 这样每个动画都有自己的变量和脚本命名空间。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T18:52:43.320

其实很简单

swiffyobject 应该重命名为任何 ex。swiffyobject2、swiffyobject3 等等。

在这个例子中，容器被重命名为 container2，元素 id 也是如此，然后我调用 swiffyobject2 而不是 swiffyobject。这样我们就可以使用尽可能多的 swiffyobjects 实例。

```
<div id="swiffycontainer2" style="width: 190px; height: 195px">
    </div>
    <script>

      var stage = new swiffy.Stage(document.getElementById('swiffycontainer2'),
                                   swiffyobject2);

      stage.start();
    </script> 
```

我喜欢为每个对象创建单独的 js 文件，然后只调用一个实例

```
<script src="https://www.gstatic.com/swiffy/v5.2/runtime.js"></script> 
```

但这只是个人口味。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T02:59:22.700

尝试创建新实例。

例子：

```
var swiffyIntroSlide = new swiffy.Stage(document.getElementById('intro-slide'), introSlide);
swiffyIntroSlide.start();

var swiffyBanquePopulaire = new swiffy.Stage(document.getElementById('top-banner'), banquePopulaire);
swiffyBanquePopulaire.start(); 
```

注意： introSlide 和 banquePopulaire 是 swiffy 对象的变量。

# c - 替换 char * 中的特定字符

> ID：14757240
> 
> 赞同：0
> 
> 时间：2013-02-07T17:28:19.600
> 
> 标签：c

我想用换行符替换某个字符。这是我的代码：

```
char *string = ReadResource(); //returns pointer to array using memcpy()
char *FinalString = string;   
for(int x=0; x< int(SizeOfRes); x++)
      {
          if (string[x] == char(84)) 
            FinalString[x] = HERE DO I WANT A NEWLINE;

          else 
            FinalString[x] = string[x];
      } 
```

我知道这`char *`是只读的，因为这是一个指向存储在内存中的数组的指针，因此使用`FinalString[x] = '\n';`不起作用。

但我也不能`strcpy()`使用数组，因为它包含 NULL 字节。

有没有一种简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:30:04.237

`memcpy()`如果您的数组包含`NULL`字符，请使用。

一个有效的基本程序：

```
#include <iostream>
#include <fstream>
#include <cstring>
using namespace std;

int main(int argc, char *argv[])
{
  char *cbuffer = "hello \x00world";
  char buffer[12];
  memcpy((void *)buffer, (void *)cbuffer, 12);
  buffer[2] = 'h';  
  ofstream ofs ("nullfile.bin", ios::binary);
  ofs.write(buffer,12);
  return 0;
} 
```

# mysql - Mathematica SQL 零日期时间

> ID：14757247
> 
> 赞同：1
> 
> 时间：2013-02-07T17:28:52.097
> 
> 标签：mysql, wolfram-mathematica

我正在尝试使用 MATHEMATICA 查询 SQL 数据 - 但是，MySQL 数据库包含 zerodates 并导致以下错误消息：

例如 (1) **SQLSelect[conn, "orders", {"time_created"}, MaxRows -> 5]** --> *JDBC::error: "!(\"Cannot convert value '0000-00-00 00:00:00 ' 从第 1 列到 TIMESTAMP。\")"*

例如 (2) **SQLExecute[conn, "SELECT * FROM `orders`", MaxRows -> 5]** --> *JDBC::error: "!(\"Cannot convert value '0000-00-00 00:00:00' from column 6'到时间戳。\")"*

我发现这是 JDBC 连接的典型问题，可以通过允许***zerodatetimes***与其他系统的示例为真来解决。我没有发现的是：***如何在 Mathematica 中专门应用它？***你能给我建议吗？

这对我有很大帮助-非常感谢您的帮助！

# javascript - Var & JavaScript 变量作用域

> ID：14757249
> 
> 赞同：1
> 
> 时间：2013-02-07T17:28:59.960
> 
> 标签：javascript, html, variables, global-variables, scope

**JS代码**

```
 var foo = "Hello World!"; // <------- global scope
    document.write("<p>Before our anonymous function foo means '" + foo + '".</p>');

    (function() {
        // The following code will be enclosed within an anonymous function
        var foo = "Goodbye World!"; // <------- local scope
        document.write("<p>Inside our anonymous function foo means '" + foo + '".</p>');
    })(); // We call our anonymous function immediately

    document.write("<p>After our anonymous function foo means '" + foo + '".</p>'); 
```

**HTML 输出**

```
Before our anomymous function foo means 'Hello World!".

Inside our anomymous function foo means 'Goodbye World!".

After our anomymous function foo means 'Hello World!". 
```

我的问题是

*   当我们替换`foo`函数内部变量的值时，为什么不替换它？它如何仍然包含`"Hello World!"`?
*   如果我要访问函数内部的全局变量，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:30:43.260

通过`var foo`在函数内部使用，您明确告诉变量仅在该函数内进行本地更改。如果要全局更改它，只需使用`foo = ...`

如果你想阅读它，我建议[这个 SO Question](https://stackoverflow.com/questions/500431/javascript-variable-scope/500459#500459)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:30:32.030

从匿名函数中删除`var`语句，您将更改全局变量：

```
var foo = "Hello World!"; // <------- global scope
document.write("<p>Before our anonymous function foo means '" + foo + '".</p>');

(function() {
    // The following code will be enclosed within an anonymous function
    foo = "Goodbye World!"; // <------- local scope
    document.write("<p>Inside our anonymous function foo means '" + foo + '".</p>');
})(); // We call our anonymous function immediately

document.write("<p>After our anonymous function foo means '" + foo + '".</p>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:38:00.157

您正在使用函数作用域变量来隐藏全局变量。要访问全局变量，您可以使用 window.foo 明确说明

```
var foo = "Hello World!"; // <------- global scope
document.write("<p>Before our anonymous function foo means '" + foo + '".</p>');

(function() {
    // The following code will be enclosed within an anonymous function
    var foo = "Goodbye World!"; // <------- local scope
    document.write("<p>Inside our anonymous function foo means '" + foo + '".</p>');
    document.write("<p>Inside our anonymous function window.foo means '" + window.foo + '".</p>');
    window.foo = window.foo + foo;
})(); // We call our anonymous function immediately

document.write("<p>After our anonymous function foo means '" + foo + '".</p>'); 
```

这将打印“Hello World！再见世界！”

# java - issue with putTransient for hazelcast

> ID：14757251
> 
> 赞同：0
> 
> 时间：2013-02-07T17:29:01.800
> 
> 标签：java, hazelcast

I will try posting on their google forums as well. I have used putTransient on map before without any issues - however, in all those cases, putTransient was being called on a map where the value was a single user defined object. I am now trying putTransient on a map where the value is a LinkedHashSet of user defined objects (serializable). The regular put works fine for this LinkedHashSet - the putTransient complains the this method is undefined for the map. I have copied the relevant line of code below:

```
//testSet is LinkedHashSet of user defined object (fields are String, Boolean and Integer)
Long ttl = new Long(0);
testMap.putTransient(test.TypeUUID, testSet, ttl, TimeUnit.SECONDS); 
```

Any suggestions to further troubleshoot/fix this would be welcome.
I have tried both 2.4 and 2.5 versions. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:01:51.313

pilot error - I should have declared the map as IMap and not Map. Thanks to Brian for commenting.

```
//should be
IMap<String, LinkedHashSet<UserDefinedObject>>

//and not 
Map<String, LinkedHashSet<UserDefinedObject>> 
```

# c++ - 使用 memcpy 复制数组的一部分，以及其他内存操作工具

> ID：14757256
> 
> 赞同：7
> 
> 时间：2013-02-07T17:29:17.663
> 
> 标签：c++, arrays, memcpy

是否可以使用 memcpy 复制数组的一部分？

例如，我们有一个由 10 个整数组成的数组。我们可以创建一个新数组，并将最后 5 个整数复制到其中吗？

是否有其他可用于 c/c++ 的内存/数组复制/操作工具？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T17:32:06.097

> 是否可以使用 memcpy 复制数组的一部分？

不，在一般情况下是不可能的。*只有当数组中元素的类型是普通*布局时，您才能这样做。

> 例如，我们有一个由 10 个整数组成的数组。我们可以创建一个新数组，并将最后 5 个整数复制到其中吗？

`int`s 是*微不足道*的类型，因此对于这种特殊情况，它会起作用：

```
int source[10] = { ::: };
int target[5];

std::memcpy( target, source + 5, 5 * sizeof(int) ); 
```

> 是否有其他可用于 c/c++ 的内存/数组复制/操作工具？

*当然， C++ 标准库*中的整套算法都适用于数组。您使用指向数组中第一个和最后一个元素的指针作为`begin/end`迭代器。或者，如果您使用的是*C++11*，那么只需`std::begin|end( array )`.

```
std::copy( source + 5, source + 10, target + 0 ); 
```

或者

```
std::copy( std::begin(source) + 5, std::end(source), std::begin(target) ); 
```

* * *

这是一个可用于检查类型是否为*琐碎*的元函数，以及此类概念的定义： http: [//en.cppreference.com/w/cpp/types/is_trivial](http://en.cppreference.com/w/cpp/types/is_trivial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:37:28.287

`memmove()`用于此目的。

编辑：`memcpy()`工作得很好。无论如何，它可能更精简。

在此示例中，代码将如下所示：

```
int array1[10] = {0,1,2,3,4,5,6,7,8,9};
int array2[5] = {0,0,0,0,0};

memmove(array2, array1 + 5 * sizeof(int), 5 * sizeof(int)); 
```

这将从array1，位置5复制5批次`int`到array2，位置0。

# java - Spring Security 注释会影响 Spring MVC 调用的调度吗？

> ID：14757260
> 
> 赞同：1
> 
> 时间：2013-02-07T17:29:25.267
> 
> 标签：java, spring, spring-security

假设我有一个@Controller，它有两种方法可以做相关但不同的事情。我想在同一个 URL 端点上公开它们，但根据安全上下文具有不同的功能。现在我知道我可以有一个映射的请求方法并分派到我的类中的不同实用程序函数，但是我可以连接它以便 Spring MVC 将根据进来的内容为我处理分派吗？

作为一个稻草人的例子，有代码在 ROLE_ADMIN 和 ROLE_USER 之间分派，但我的实际用例要复杂得多：

```
@Controller
public class Controller {

    @RequestMapping("/api/thing")
    @PreAuthorize("hasRole('ROLE_ADMIN')")
    public String doAnAdministrativeThing() {
         ... (admin-priviledge stuff goes here)
    }

    @RequestMapping("/api/thing")
    @PreAuthorize("hasRole('ROLE_USER')")
    public String doADifferentThing() {
         ... (normal-priviledged stuff goes here)
    }

} 
```

抢占任何兔子洞：

1.  不，我可能没有任何选择让这两个函数位于不同的 URL 或具有不同的参数或任何“正常”@RequestMapping 位

2.  安全上下文差异很复杂，但可以在 @PreAuthorize 表达式中处理

3.  实际上有两个以上不同的上下文可以调度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:53:49.693

这将适用于一些扩展。请参阅@andy 对[Can Spring Security 在 Spring 控制器方法上使用 @PreAuthorize](https://stackoverflow.com/questions/3087548/can-spring-security-use-preauthorize-on-spring-controllers-methods)的回答中对[GitHub mohchi / spring-security-request-mapping的引用？](https://github.com/mohchi/spring-security-request-mapping)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T20:03:52.473

我认为这行不通，全局方法安全与 MVC 层完全无关。此外，官方建议[仅对服务层使用方法安全性](http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context)

> 通常，我们建议在服务层而不是在单个 Web 控制器上应用方法安全性。

PS 通常我尽量避免将 AOP 与 Spring 控制器一起使用，并且仅在根上下文（而不是 servlet 上下文）中声明 AOP 方法，因为代理控制器实例会导致一些令人困惑的行为，并迫使用户了解 Spring AOP 特定诸如 JDK 代理和 CGLIB 代理之间的区别、注释的处理方式等。

# php - 两个日期和时间之间的天数

> ID：14757261
> 
> 赞同：0
> 
> 时间：2013-02-07T17:29:26.560
> 
> 标签：php, date, days, date-math

```
 $dday = mktime(13, 00,00, 02, 07, 2013);

  $today = mktime(12,30,00, 02, 08, 2018);

  $difference = $today - $dday;

  $DateCalculation = floor($difference / 84600);

echo $DateCalculation; 
```

天是 1。但实际上它不是 1。只有时间是 13.00 时，天才会是 1。有人可以回答我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:33:40.060

DateTime 类使处理日期和时间变得更加容易`mktime()`

```
$datetime1 = new DateTime('2013-02-07 13:00:00');
$datetime2 = new DateTime('2013-02-08 12:30:00');
$interval = $datetime1->diff($datetime2);
$elapsed = $interval->format('%a days %h hours');

echo $elapsed . PHP_EOL;
echo "Days: " . $interval->format('%a') . PHP_EOL;

// Output
0 days 23 hours
Days: 0 
```

[看到它在行动](http://3v4l.org/2kK41)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:46:04.297

你可以找这个

```
 $dday = ('13, 00,00, 02, 07, 2013');
 $sub = substr($dday, 14,-6);

 $today = ('12,30,00, 02, 08, 2018');
 $sub_today = substr($today, 14,-6);

 $difference = $sub_today - $sub ;

 echo $difference .' day';  // -- will output: 1 day 
```

# java - 迭代和验证 DOM 节点 - java

> ID：14757264
> 
> 赞同：0
> 
> 时间：2013-02-07T17:29:41.533
> 
> 标签：java, validation, dom

我想遍历 XML 文件中的所有子节点。如果值验证失败，那么我想将节点附加/克隆到新的 xml 文档。对以下代码有什么建议吗？

```
for(Node childNode = node.getFirstChild(); childNode!=null;)
{
   Node nextChild = childNode.getNextSibling();
   //validate here and append or
   //clone to new xml file if false
   childNode = nextChild;
} 
```

我创建了验证器实例，它确实验证了每个节点。我如何找出哪个节点失败（真，假）然后追加。我可以使用布尔值验证失败，然后附加到新文档吗？

```
// creating a Validator instance 
Validator validator = schema.newValidator(); 
Validator.validate(new DOMSource(childNode)) ; 
```

# excel - Excel VBA：从外部工作簿复制范围时出错

> ID：14757265
> 
> 赞同：1
> 
> 时间：2013-02-07T17:29:41.907
> 
> 标签：excel, copy, range, vba

我正在尝试将一系列单元格从关闭的工作簿复制到当前工作簿，但我总是得到 ERROR 1004。我正在使用的代码如下：

```
Sub Sheet2()
Dim Filt As String
Dim FilterIndex As Integer
Dim Title As String
Dim Multi As Boolean
Dim DataFile
Dim WBdata As Workbook

'I prompt the user to select the file to import
Filt = "Excel Workbook 2010 (*.xlsx),*.xlsx," & "Excel Workbook (*.xls), *.xls," & "All Files (*.*),*.*"
FilterIndex = 1
Title = "Select file to import"
Multi = False
DataFile = Application.GetOpenFilename(FileFilter:=Filt, FilterIndex:=FilterIndex, Title:=Title, MultiSelect:=Multi)

If DataFile = False Then
    MsgBox "No file was selected"
End If

'Open the file selected by the user
Set WBdata = Workbooks.Open(DataFile)

'Get the data
WBdata.Activate
Sheets("Sheet1").Range(Cells(4, 1), Cells(4, 1).End(xlDown).Offset(-1, 0)).Copy _ ThisWorkbook.Sheets("Sheet2").Columns(1)
ThisWorkbook.Sheets("Sheet2").Activate
ThisWorkbook.Sheets("Sheet2").Columns(1).Select
Selection.EntireColumn.AutoFit

'Close and Select Cell (1,1)
WBdata.Close
ThisWorkbook.Sheets("Manager").Activate
ThisWorkbook.Sheets("Manager").Cells(1, 1).Select
End Sub 
```

调试器停在`Sheets("Sheet1").Range(Cells(4, 1), Cells(4, 1).End(xlDown).Offset(-1, 0)).Copy _ ThisWorkbook.Sheets("Sheet2").Columns(1)`.

我在测试文件中尝试了相同的语法，它很顺利，但我无法在实际文件中实现。这是测试文件中的代码：

```
Sheets("Sheet1").Range(Cells(1, 1), Cells(1, 1).End(xlDown).Offset(-1, 0)).Copy ThisWorkbook.Sheets("Sheet1").Columns(2) 
```

感谢您的所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:03:07.833

两件事情

1.  如果说用户取消了对话框，您可能希望在之后退出子程序，`MsgBox "No file was selected"`以便代码不会在此行中给出错误？`Set WBdata = Workbooks.Open(DataFile)`或者`Else`对Statement部分的代码进行处理`If`如下代码所示

2.  您收到该错误是因为您没有完全限定单元格，例如请参阅下面代码中`.(DOT)`的`Cells(1, 1)`

您的代码可以重写为 ( **UNTESTED** )

```
Sub Sheet2()
    Dim Filt As String, Title As String
    Dim FilterIndex As Integer
    Dim Multi As Boolean
    Dim DataFile
    Dim WBdata As Workbook, ws As Worksheet

    Filt = "Excel Workbook 2010 (*.xlsx),*.xlsx," & _
           "Excel Workbook (*.xls), *.xls," & _
           "All Files (*.*),*.*"
    FilterIndex = 1
    Title = "Select file to import"
    Multi = False
    DataFile = Application.GetOpenFilename(FileFilter:=Filt, _
                                           FilterIndex:=FilterIndex, _
                                           Title:=Title, _
                                           MultiSelect:=Multi)

    If DataFile = False Then
        MsgBox "No file was selected"
    Else
        'Open the file selected by the user
        Set WBdata = Workbooks.Open(DataFile)
        Set ws = WBdata.Sheets("Sheet2")

        'Get the data
        With ws
            .Range(.Cells(4, 1), .Cells(4, 1).End(xlDown).Offset(-1, 0)).Copy _
            ThisWorkbook.Sheets("Sheet2").Columns(1)
            ThisWorkbook.Sheets("Sheet2").Columns(1).EntireColumn.AutoFit

            'Close and Select Cell (1,1)
            WBdata.Close SaveChanges:=False
        End With
    End If
End Sub 
```

# java - Java：读取 jpeg/gif 的压缩比

> ID：14757270
> 
> 赞同：1
> 
> 时间：2013-02-07T17:29:52.360
> 
> 标签：java, jpeg, gif, javax.imageio

我尝试在 Java 中获取 JPEG 和 GIF 图像的压缩率。到处搜索，但找不到任何东西。是否可以读取文件的压缩比？如果不是，我怎么能计算这个比率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:43:29.673

要计算图像的压缩率，请将实际文件大小与存储图像“原始”时获得的大小进行比较。

例如，一个 1024x1024、真彩色 (24bpp) 为 384Kb 的 jpeg 文件的比率为 (384x1024) / (1024x1024x3) = 0.125，这意味着 jpeg 生成的文件占原始图像的 12%。如果您反转除法，您可以说图像被压缩为 8 倍或 1:8 比例。

从 headers 或使用 Image API 获取图像的大小和颜色信息，无需解压缩文件进行此计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:40:04.920

您可以尝试将文件大小与其像素数进行比较 - 它为您提供了一种比率。例如：

```
//Image 1
Image Dimensions = 607x800px
Number of pixels = 486K
File size = 143KB
//Good quality

//Image 2
Image Dimension s= 1719x2377px
Number pixels= 4.086M
File size = 408KB
//Bad quality 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:36:28.650

您可以从[Java Image-IO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)开始，读入您的图像并使用[ImageReader](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageReader.html)类的适当方法。

您可以在此处下载[JAI](http://www.oracle.com/technetwork/java/current-142188.html)。

# macos - Git 总是提示输入密码

> ID：14757271
> 
> 赞同：-2
> 
> 时间：2013-02-07T17:29:53.580
> 
> 标签：macos, git, github, ssh

我已按照以下指南在 Mac OS 10.7.4 上设置 SSH 密钥。

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

但由于某种原因，它不断提示我输入密码。如果我不指定密码，它不会提示我，但这是不希望的。有没有办法缓存我的密码，这样每次拉/推都不会提示我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-05T21:48:15.870

您必须在 ssh-add 中添加您的密钥文件

```
ssh-add ~/.ssh/you_key_rsa 
```

在那之后，它就不会再问了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:35:05.017

SSH 密码用于对连接到 GIT 存储库的用户进行身份验证。如果你在本地工作，git 不应该要求输入密码，只在进行远程操作时，例如克隆、推送、拉取等。

如果密码让您感到烦恼，您可以在创建 SSH 密钥时输入一个空白密码，密码不是强制性的，但我建议您使用密码来提供额外的保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:32:53.773

您可能需要编辑`.git/config`git 存储库中的文件并更改`url`值以使用类似`user@host:path-to-git-repo.git`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T21:54:31.597

我使用的是 Windows 10，我找到了两种消除密码提示的方法。

1.  确保 ssh 代理已启动并且您已添加密钥

    ```
    $ eval "$(ssh-agent -s)"

    $ ssh-add ~/.ssh/id_rsa 
    ```

第二个命令将提示您输入密码，然后不会提示您输入在此会话中运行的任何其他 git 命令。
您需要为每个新的 bash 会话再次运行这些命令

2.  从您的密钥文件中删除密码：

    ```
     $ ssh-keygen -p -f ~/.ssh/id_rsa 
    ```

出现提示时，只需按 Enter 键即可输入新密码。

选项 2 将永久删除所有 git 命令的密码。当然，它也会使您的密钥文件“不安全”

注意：如果您使用的是 git desktop GUI（版本 1.04+），则 GUI 需要选项 2 才能工作。

# android - takepicture() 给出 Nullpointer 异常

> ID：14757274
> 
> 赞同：-3
> 
> 时间：2013-02-07T17:29:59.837
> 
> 标签：android, nullpointerexception, android-camera

我正在构建一个使用前后摄像头的摄像头应用程序，但在此语句中出现空指针错误。

public void onClick（查看视图）{

```
 //camera.takePicture(shutter, raw, postview, jpeg)
  //camera.takePicture(null, null, new PhotoHandler(getApplicationContext()));
camera.takePicture(null, null,
    new PhotoHandler(MakePhotoActivity.this)); 
```

}

请帮帮我，因为我不知道问题在这里。

提前致谢。

```
02-07 23:06:12.445: E/AndroidRuntime(30045): FATAL EXCEPTION: main
02-07 23:06:12.445: E/AndroidRuntime(30045): java.lang.IllegalStateException: Could not execute method of the activity
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.view.View$1.onClick(View.java:2144)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.view.View.performClick(View.java:2485)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.view.View$PerformClick.run(View.java:9080)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.os.Handler.handleCallback(Handler.java:587)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.os.Looper.loop(Looper.java:130)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at java.lang.reflect.Method.invoke(Method.java:507)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at dalvik.system.NativeStart.main(Native Method)
02-07 23:06:12.445: E/AndroidRuntime(30045): Caused by: java.lang.reflect.InvocationTargetException
02-07 23:06:12.445: E/AndroidRuntime(30045):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at java.lang.reflect.Method.invoke(Method.java:507)
02-07 23:06:12.445: E/AndroidRuntime(30045):    at android.view.View$1.onClick(View.java:2139)
02-07 23:06:12.445: E/AndroidRuntime(30045):    ... 11 more
02-07 23:06:12.445: E/AndroidRuntime(30045): Caused by: java.lang.NullPointerException
02-07 23:06:12.445: E/AndroidRuntime(30045):    at com.example.cameraapp.MakePhotoActivity.onClick(MakePhotoActivity.java:41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T04:06:15.307

我在我的应用程序中使用了与您的代码类似的代码，并且我的应用程序也习惯于在行上抛出空指针异常：

```
camera.takePicture(null, null,new PhotoHandler(getApplicationContext())); 
```

我认为这是由于相机获取空值引起的。为避​​免此异常，我在这行代码的顶部进行了检查。因此 onClick 函数如下所示：

```
public void onClick(View view) {
  if (camera != null) {
    Log.d("camera state","camera is NOT null");  
  }else{
    Log.d("camera state","camera is null");
    camera = android.hardware.Camera.open(cameraId);
  }
  camera.takePicture(null, null,new PhotoHandler(getApplicationContext()));
} 
```

ps：我的代码是为仅使用前置摄像头而编写的。希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:57:59.813

将“getApplicationContext()”更改为“ActivityClassName.this”

# php - 带有php生成的html的jquery不起作用

> ID：14757279
> 
> 赞同：0
> 
> 时间：2013-02-07T17:30:09.447
> 
> 标签：php, jquery

当我单击编辑列表类元素消失时，我的下面的代码不起作用我怎样才能让它再次出现，例如通过单击切换editLish类元素下面的任何更改将不胜感激，因为内容是动态生成的

```
<script type="text/javascript">
    $(document).ready(function(){
        alert("clicked");
        $('.editList').on('click',function(){
        alert('clicked');
                    $(this).hide();
        });
    });
</script>
<? $this->_renderView(false, '_submenu')?>
<?php $cand_data=$this->read_xml();
    ?>
<div class="module" style="width:1050px">
    <div class="module_content">
        <?php foreach($cand_data as $key=>$data_node){ $i=0; ?>
        <table class="editList" style="">
            <tr>
                <th>Candidate Data</th>
            </tr>
            <?php foreach($data_node as $label=>$val) {   if($i<16){?>
            <tr>
                <td><?= $label?></td>
                <td><?= $val?></td>
            </tr>
            <?php $i++;}}?>
        </table>
        <?php  }?>    
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:33:25.437

检查您的选择器拼写 - 您已将点击处理程序绑定到`editlist`并且您的表类是`editList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:33:53.377

css 类名区分大小写。`$('.editlist')`你需要换成`$('.editList')`大写字母`L`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:35:23.103

您的表类是“editList”，但您的 jquery 选择器是“.editlist”（注意 L 上的不同大小写）。Css 名称区分大小写。

使用`$('.editList').click(...`将起作用

# spring - 春季电子邮件表单验证

> ID：14757280
> 
> 赞同：1
> 
> 时间：2013-02-07T17:30:11.350
> 
> 标签：spring, spring-mvc

我即将在`Spring 3.1`. 我正在使用注释来验证我的模型，如下所示：

模型：

```
@Column(name = "mailAddress", nullable = false)
@Email
private String mailAddress;

@Column(name = "school", nullable = false)
@NotBlank
@Size(min = 3, max = 100)
private String school; 
```

控制器：

```
 @RequestMapping(value = "/add", method = RequestMethod.POST)
    public String addBooking(
            @ModelAttribute("new-booking") @Valid Booking booking,
            BindingResult result, Map<String, Object> model) {

        if (result.hasErrors()) {
            return "booking";
        }
            return "success";
     } 
```

问题是，它验证了`school`但不是`mailAddress`. 如果您输入一个空的`mailAddress`，它将接受它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:43:13.567

我认为您的验证问题可能与以下事实有关：使用@Email 验证注释，您的验证器也被认为是有效的电子邮件，其形式如下：“myname@service”，不以扩展名结尾（例如） .com

如果这是您的问题...这是正常的，因为它还考虑了您有一封具有以下格式的电子邮件的情况：yourname@localhost（内部电子邮件地址）

If you would validate a classic e-mail (having format: myname@someservice.com) I think that you have to write your custom validator.

I hope that I have understand your problem

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:35:40.283

I found the Issue. The Email Validator will accept Blank Emails. To fix this you only need to add a `@NotBlank` to it. Actually I thought the nullable = false would be enought, but wasn't.

```
@Column(name = "mailAddress", nullable = false)
@Email
@NotBlank
private String mailAddress; 
```

# entity-framework - Entity Framework 需要哪些权限才能从数据库生成模型？

> ID：14757281
> 
> 赞同：2
> 
> 时间：2013-02-07T17:30:13.737
> 
> 标签：entity-framework, permissions, sqlanywhere, ef-database-first

我正在连接到第三方 SQL Anywhere 实例，并且在从现有数据库生成实体数据模型时遇到问题。该连接使用基本的 ODBC 连接，但在生成模型时遇到“权限被拒绝：您无权从“sysuserperm”中选择错误。我的问题是我应该要求添加什么权限这个帐户，所以我可以生成模型？

完整的错误消息如下：![在此处输入图像描述](../Images/0ce99e1a04e4d7faa32e0b37b5fc52b0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:35:25.393

可悲的是，据我所知，只有 DBA 本身被允许访问该表（您使用的第三方无疑不想让您成为 DBA ......）

我发现的链接[就在这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.sqlanywhere.12.0.1/dbadmin/uinfo.html)。

# c++ - 在 C++ 中使用 printf() 而不是 cout 有什么主要优势吗？

> ID：14757282
> 
> 赞同：1
> 
> 时间：2013-02-07T17:30:14.120
> 
> 标签：c++, printf, scanf, cout, cin

显然在某些情况下，在 C++`scanf()`中优于 . `cin`，我想知道是否有任何情况`printf()`比`cout`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:34:04.150

简短的回答：总是！！！在 c++ 中，总是使用 cout 而不是 printf 是有意义的，因为与 printf 不同，它为您提供类型安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:35:45.450

您可以使用`ostream`interface (so `cout`) 做的事情远远优于 old style `printf()`。首先，它是**类型安全**的，因此当您错误地使用错误的格式序列时，您不会遇到任何分段违规。

一个例子。想象一下，您必须打印出`struct stat`Posix`fstat`函数返回的属性。属性的类型是使用系统相关的 typedef 定义的：

```
struct stat {
    dev_t     st_dev;     /* ID of device containing file */
    ino_t     st_ino;     /* inode number */
    mode_t    st_mode;    /* protection */
    nlink_t   st_nlink;   /* number of hard links */
    uid_t     st_uid;     /* user ID of owner */
    gid_t     st_gid;     /* group ID of owner */
    dev_t     st_rdev;    /* device ID (if special file) */
    off_t     st_size;    /* total size, in bytes */
   /* ... more attributes */ 
```

};

因此，诸如`dev_t`不同系统上的不同类型（typedef）之类的东西。您可能会发现在您的特定系统`dev_t`上等价于，例如`int`，并写下：

```
printf("dev_t=%d", s.st_dev); 
```

并且它将在您的系统上运行，但是当您在另一个系统上编译它时，例如，它定义为`dev_t`不是，`int`而是说，`long`那么您的代码将编译，但在运行时崩溃。

如果您使用 C++ 流和重载`<<`运算符，那么东西将始终正常工作：

cout << "dev_t=" << s.st_dev;

C++ 流的另一个重要优势是**可扩展性**。无法扩展可以`printf`理解的格式化序列集。相反，您可以轻松地重载`<<`运算符以方便地打印您自己类型的对象。

# performance - 什么会导致 Intellij 在 scala 上突然变得很慢？

> ID：14757290
> 
> 赞同：5
> 
> 时间：2013-02-07T17:30:47.820
> 
> 标签：performance, scala, playframework, intellij-idea, playframework-2.0

我已经使用 Intellij 12 构建 Play Framework 2 应用程序大约一个月了。一直到昨天都还好。现在，当我尝试在其中一个 scala 模板中编写代码时，Intellij 会变得非常非常非常慢。就像输入几行新行需要 5-10 秒。什么会导致这种情况突然发生，我该如何解决？

我尝试将我的 vm 选项增加到以下值，但它没有帮助：

```
-Xms256m
-Xmx800m
-XX:MaxPermSize=512m
-XX:ReservedCodeCacheSize=128m
-XX:+UseCodeCacheFlushing
-XX:+UseCompressedOops 
```

编辑：最近的 Intellij 或插件更新会破坏性能吗？

编辑：我更新了我的 Scala 和 Play 插件，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:13:11.257

我有一个类似的问题，从 openjdk 切换到 sun java 修复了它。还要检查它是否没有在后台做一些事情，比如索引或类似的事情。只是一个猜测。干杯!

编辑： google-fu 导致了一个可能很有趣的事实。很多 scala 用户都在经历这种情况。看起来 scala 仅在 intellij 12 中可用，这是第一个版本，所以这可能是 scala 开发人员方面的问题。如果我设法找到解决方法，我会在这里发布。在此之前为 scala 更新做好准备；)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:46:53.277

供参考..

尝试更新到新版本（0.2.16）

[http://plugins.jetbrains.com/plugin?pluginId=7080](http://plugins.jetbrains.com/plugin?pluginId=7080)

# sharepoint - SharePoint 中的重复事件 - 不正确的“持续时间”

> ID：14757293
> 
> 赞同：3
> 
> 时间：2013-02-07T17:30:59.837
> 
> 标签：sharepoint, sharepoint-2010, calendar

背景：我工作的公司有一个常规的 SharePoint 列表，其中包含用于事件的自定义 ContentType（不从日历列表项继承）。然后它使用日历视图显示这些。看起来很简单。我们需要允许用户为他们正在添加的事件（不同于他们的区域设置）选择一个时区，并将信息添加到共享点，这样它就会为每个在世界范围内查看它的用户显示正确的时间（当然基于他们的区域设置）。我向 SharePoint 添加了一个用于查找 SystemTimeZones 的列表（基本上是 TimeZoneInfo.GetSystemTimeZones() 的 SharePoint 列表表示）

```
 SPList timeZonesList = thisWeb.Lists.TryGetList("SystemTimeZones");

                if(timeZonesList == null)
                {
                    string title = "SystemTimeZones";
                    string description = "SharePoint List representation of TimeZoneInfo.GetSystemTimeZones() used for lookup.";

                    Guid newListId = thisWeb.Lists.Add(title, description, SPListTemplateType.GenericList);

                    timeZonesList = thisWeb.Lists.GetList(newListId, true);
                    timeZonesList.Fields.Add("SystemTimeZoneId", SPFieldType.Text, true);
                    timeZonesList.Fields.Add("SystemTimeZoneName", SPFieldType.Text, true);

                    SPView defaultTimeZonesView = timeZonesList.DefaultView;
                    defaultTimeZonesView.ViewFields.Add("SystemTimeZoneId");
                    defaultTimeZonesView.ViewFields.Add("SystemTimeZoneName");
                    defaultTimeZonesView.Update();

                    foreach (TimeZoneInfo timeZone in TimeZoneInfo.GetSystemTimeZones())
                    {
                        SPListItem temp = timeZonesList.AddItem();
                        temp["SystemTimeZoneId"] = timeZone.Id;
                        temp["SystemTimeZoneName"] = timeZone.DisplayName;
                        temp.Update();
                    }
                } 
```

我在此列表的自定义添加和编辑表单中将此列表用于 EventTimeZone 的查找项。这些表单是 SharePoint Designer 将创建的内容的直接副本（因为它们使用的是 SharePoint:FormField），它们只是在 Visual Studio 中，因为我需要代码隐藏。我想让用户在他们的区域时区中查看事件，但是当他们编辑它们时，我想在输入的时区中显示它们。（即，我的区域时区是中央时区，所以当我查看山区会议时，它会显示上午 10 点到 11 点，但当我编辑同一个会议时，它会说是上午 9 点到 10 点）。因此，在编辑页面加载时，我调整了时间：

```
 SPListItem thisEvent = eventsList.GetItemById(savebutton1.ItemId);

                        if (thisEvent != null)
                        {
                            bool isAllDayEvent = false;
                            if (thisEvent["fAllDayEvent"] != null)
                            {
                                isAllDayEvent = (bool)thisEvent["fAllDayEvent"];
                            }

                            if (!isAllDayEvent)
                            {
                                SPFieldLookupValue lookupValue = new SPFieldLookupValue(thisEvent["Event Time Zone"].ToString());
                                TimeZoneInfo eventTimeZone = GetEventTimeZoneByListItemId(lookupValue.LookupId, rootWeb);
                                SPTimeZone regionalTimeZone = GetRegionalTimeZone(rootWeb);

                                DateTime regionalStartDateTime = Convert.ToDateTime(thisEvent["StartDate"]);
                                DateTime originalStartDateTime = TimeZoneInfo.ConvertTimeFromUtc(regionalTimeZone.LocalTimeToUTC(regionalStartDateTime), eventTimeZone);

                                ff3.ListItemFieldValue = originalStartDateTime;

                                DateTime regionalEndDateTime = Convert.ToDateTime(thisEvent["EndDate"]);
                                DateTime originalEndDateTime = TimeZoneInfo.ConvertTimeFromUtc(regionalTimeZone.LocalTimeToUTC(regionalEndDateTime), eventTimeZone);

                                ff4.ListItemFieldValue = originalEndDateTime;
                            }
                            else
                            {
                                // for some reason with all day events, sharepoint saves them 
                                // as the previous day 6pm. but when they show up to any user
                                // they will show as 12am to 1159pm and show up correctly on the calendar
                                // HOWEVER, when it comes to edit, the start date isn't corrected on the 
                                // form, so continuing to save without fixing it will continue to decrease
                                // the start date/time by one day
                                DateTime regionalStartDateTime = Convert.ToDateTime(thisEvent["StartDate"]);
                                ff3.ListItemFieldValue = regionalStartDateTime.AddDays(1);
                            } 
```

一整天的事件都很奇怪，但我能够通过编写测试用例并查看发生了什么来使其工作（正如您从我的评论中看到的那样）。

然后我绑定到列表事件接收器 ItemAdded 和 ItemUpdated 以“修复”时间，因为 SharePoint 将根据用户的区域设置而不是用户选择的时区来保存它们。（当然，我对 SharePoint 有点陌生——不是 c#——所以我可能对此过于复杂，但我已经能够在线处理少量文档）。最后我最终设置：

```
 addedItem["StartDate"] = regionalTimeZone.UTCToLocalTime(correctedEventStart.ToUniversalTime());
                    addedItem["EndDate"] = regionalTimeZone.UTCToLocalTime(correctedEventEnd.ToUniversalTime()); TADA!! It saves and display perfectly! I was so excited! Until... I tried to save a recurring event. All of my recurring events save wonderfully, it's not the recurring part that's messed up. For some reason, after I change the StartDate and EndDate on a recurring event and call addedItem.Update() it is recalculating the "Duration" as if it is a single even instead of a recurring event.  Example: I have an event that happens for a week daily from 9-10\.  When I first enter ItemAdded my Duration is 3600 (1 hour) as it should be bc Duration is treated differently for recurring events. However after I adjust the times and call Update() the duration spans the entire week :( If I manually set the Duration:
                     if (isRecurrence)
                    {
                        addedItem["Duration"] = (correctedEventEnd.TimeOfDay - correctedEventStart.TimeOfDay).TotalSeconds;
                    } 
```

它仍然会在 Update() 上重置。因此，当您在日历视图中查看重复项目时，该项目跨越整个星期，而不是每天显示一次。

我几乎把头发拉了出来，试图弄清楚这一点。任何指导都会很棒。我了解 Duration 是一个计算字段，但我不明白为什么调用 listItem.Update() 会忽略它确实被正确标记为重复事件而不正确计算 Duration 的事实。老实说，这似乎是 SP 2010 的一个错误。

提前致谢！

**

## 编辑：以下评论后的附加信息......

** 此 SharePoint 环境在太平洋时间拥有一台服务器，用户遍及所有美国时区、伦敦、东京、阿布达比等。一个时区的用户需要能够在其他时区创建事件。由于用户配置文件中的任何内容（无论如何对我们而言）都不会告诉我们他们希望在哪个时区查看所有内容，因此我们在母版页中添加了代码以查看本地计算机的时区并始终相应地设置其区域设置。

**示例**：我在纳什维尔，我想创建一个将在洛杉矶发生的事件：

ItemAdded 中的数据显示 StartDate 是我早上 9 点输入的。所以我正在创建一个以 PST 结尾的日期：

```
DateTime correctedEventStart = DateTime.Parse(addedItem["StartDate"] + " " + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Hours + ":" + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Minutes);
DateTime correctedEventEnd = DateTime.Parse(addedItem["EndDate"] + " " + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Hours + ":" + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Minutes); 
```

然后为了“欺骗”SharePoint，我将该 PST 时间转换为用户的区域时间（因此用户不必了解他们的区域设置，也不必思考）。因此，太平洋标准时间上午 9 点是美国中部标准时间上午 7 点（因为这是我的区域设置，SharePoint 期望的时间是这样的）。这是从正确时间+时区到用户区域时区的转换：

```
addedItem["StartDate"] = regionalTimeZone.UTCToLocalTime(correctedEventStart.ToUniversalTime());
addedItem["EndDate"] = regionalTimeZone.UTCToLocalTime(correctedEventEnd.ToUniversalTime()); 
```

我不知道这对我世界之外的任何人是否有意义。但 SharePoint 显然希望时间位于用户的区域（或 Web 的）时区。这在单元测试中很明显。如果我有一种 OOB 方式允许中部时间的用户在自定义列表中从太平洋时间上午 9 点到 10 点创建会议，我希望能够使用它。但我一直找不到任何东西。

同样，所有这一切都很好......直到你来到经常性事件。实际上，它适用于重复事件，直到您尝试在日历视图中查看所述事件。然后它看起来像这样： ![日历视图](../Images/607d559529ba2da13143a208d031a691.png)

请注意，“Recurring 8”以预期的方式重复出现，每天 2 个实例。但是，重复的“跨度”或“持续时间”是 2 天而不是 1 小时。其中“Recurring 15”正确显示。当输出到调试时，两者之间字段值的唯一区别是“持续时间”字段。Recurring 8 在 ItemAdded 中更新了开始和结束日期，Recurring 15 通过了 ItemAdded 但 ListItem.Update() 被注释掉了。根据文档，SharePoint 应该以不同于计算单个项目的方式计算重复项目的持续时间。使用对象模型更改开始和结束日期的事实不应否定这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:49:51.397

好的，所以我最终处理的方式如下。我决定退出列表事件接收器，因为它确实似乎是重新计算持续时间的 SharePoint 错误，因为现在可以正常工作的重复事件。我选择绑定到表单上的保存事件，并在它们发送之前更改值。到目前为止，这似乎在所有情况下都有效。我所有的数学都和以前一样。所以在我的 New2.aspx （这个列表的新项目表单）

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if ((SPContext.Current.FormContext.FormMode == SPControlMode.New) || (SPContext.Current.FormContext.FormMode == SPControlMode.Edit))
        {
            SPContext.Current.FormContext.OnSaveHandler += new EventHandler(SaveHandler);
        }
    }

    protected void SaveHandler(object sender, EventArgs e)
    {
        Page.Validate();

        if (Page.IsValid)
        {
            // fix times
            SPFieldLookupValue lookupValue = new SPFieldLookupValue(ff5.Value.ToString());
            TimeZoneInfo eventTimeZone = GetEventTimeZoneByListItemId(lookupValue.LookupId, SPContext.Current.Web);
            SPTimeZone regionalTimeZone = GetRegionalTimeZone(SPContext.Current.Web);

            bool isAllDayEvent = Convert.ToBoolean(ff6.Value);
            bool isRecurrence = Convert.ToBoolean(ff11.Value);
            DateTime correctedEventStart = DateTime.MinValue;
            DateTime correctedEventEnd = DateTime.MinValue;

            if (!isAllDayEvent && eventTimeZone != null && regionalTimeZone != null)
            {
                correctedEventStart = DateTime.Parse(ff3.Value.ToString() + " " + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Hours + ":" + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Minutes);
                correctedEventEnd = DateTime.Parse(ff4.Value.ToString() + " " + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Hours + ":" + eventTimeZone.GetUtcOffset(DateTime.UtcNow).Minutes);

                ff3.ItemFieldValue = regionalTimeZone.UTCToLocalTime(correctedEventStart.ToUniversalTime());
                ff4.ItemFieldValue = regionalTimeZone.UTCToLocalTime(correctedEventEnd.ToUniversalTime());
            }

            SPContext.Current.ListItem.Update();
        }
    } 
```

这会像我以前的方法一样更新时间，但它也会正确计算持续时间。

SharePoint 会根据用户的区域设置（或 Web，如果用户未设置）处理显示正确的时间，并在日历视图中显示正确的时间。我确实必须更改编辑表单才能在编辑时获得正确的值：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            try
            {
                using (SPWeb rootWeb = SPContext.Current.Site.RootWeb)
                {
                    SPList eventsList = rootWeb.Lists.TryGetList("Events");

                    if (eventsList != null)
                    {
                        SPListItem thisEvent = eventsList.GetItemById(savebutton1.ItemId);

                        if (thisEvent != null)
                        {
                            bool isAllDayEvent = false;
                            if (thisEvent["fAllDayEvent"] != null)
                            {
                                isAllDayEvent = (bool)thisEvent["fAllDayEvent"];
                            }

                            if (!isAllDayEvent)
                            {
                                SPFieldLookupValue lookupValue = new SPFieldLookupValue(thisEvent["Event Time Zone"].ToString());
                                TimeZoneInfo eventTimeZone = GetEventTimeZoneByListItemId(lookupValue.LookupId, rootWeb);
                                SPTimeZone regionalTimeZone = GetRegionalTimeZone(rootWeb);

                                DateTime regionalStartDateTime = Convert.ToDateTime(thisEvent["StartDate"]);
                                DateTime originalStartDateTime = TimeZoneInfo.ConvertTimeFromUtc(regionalTimeZone.LocalTimeToUTC(regionalStartDateTime), eventTimeZone);

                                ff3.ListItemFieldValue = originalStartDateTime;

                                DateTime regionalEndDateTime = Convert.ToDateTime(thisEvent["EndDate"]);
                                DateTime originalEndDateTime = TimeZoneInfo.ConvertTimeFromUtc(regionalTimeZone.LocalTimeToUTC(regionalEndDateTime), eventTimeZone);

                                ff4.ListItemFieldValue = originalEndDateTime;
                            }
                            else
                            {
                                // for some reason with all day events, sharepoint saves them 
                                // as the previous day 6pm. but when they show up to any user
                                // they will show as 12am to 1159pm and show up correctly on the calendar
                                // HOWEVER, when it comes to edit, the start date isn't corrected on the 
                                // form, so continuing to save without fixing it will continue to decrease
                                // the start date/time by one day
                                DateTime regionalStartDateTime = Convert.ToDateTime(thisEvent["StartDate"]);
                                ff3.ListItemFieldValue = regionalStartDateTime.AddDays(1);
                            }
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                DebugLogger.WriteLine(ex);
            }
        }
    } 
```

Edit 表单具有与 New 相同的 OnInit 和 SaveHandler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:40:48.230

我认为您正在与 SharePoint 用于重复事件的 shennagins 发生冲突。本质上，事件存储在[单个列表项中，并在查询时展开](https://www.nothingbutsharepoint.com/sites/eusp/Pages/Use-SPServices-to-Get-Recurring-Events-as-Distinct-Items.aspx)。这使得事件的存储与您的期望完全相反。

从那篇文章看来，EventDate 和 EndDate 字段的使用方式不同，具体取决于重复与否。

[另请注意，SharePoint 在](https://stackoverflow.com/a/9398296/13813)“幕后”以 UTC 存储日期并转换回显示的用户（或网站）时区。您也许可以使用这些知识来优化一些日期逻辑。

更多信息

[http://fatalfrenchy.wordpress.com/2010/07/16/sharepoint-recurrence-data-schema/](http://fatalfrenchy.wordpress.com/2010/07/16/sharepoint-recurrence-data-schema/)

[Share point 2010 ItemAdding 在日历上插入重复数据](https://stackoverflow.com/questions/9362977/share-point-2010-itemadding-insert-recurrence-data-on-calander)

[http://blog.tylerholmes.com/2012/02/how-sharepoint-deals-with-time-and-time.html](http://blog.tylerholmes.com/2012/02/how-sharepoint-deals-with-time-and-time.html)

这是我用来在另一个时区创建发生事件的代码（注意：我没有明确设置持续时间）

```
 public void AddRecurringItemGTM8Perth(SPList list)
    {
        string recData = "<recurrence><rule><firstDayOfWeek>su</firstDayOfWeek><repeat><daily dayFrequency=\"1\" /></repeat><windowEnd>2013-02-20T01:00:00Z</windowEnd></rule></recurrence>";

        SPListItem newitem = list.Items.Add();
        newitem["Title"] = "Perth " + DateTime.Now.ToString();
        newitem["RecurrenceData"] = recData;
        newitem["EventType"] = 1;
        DateTime correctedEventStart =  new DateTime(2013, 2, 3, 12, 0, 0);
        //note that date is end of event and time is event end to calculate duration
        DateTime correctedEventEnd = new DateTime(2013, 2, 20, 13, 0, 0);

        SPTimeZone spTz = SPRegionalSettings.GlobalTimeZones[74]; //perth

        correctedEventStart = spTz.LocalTimeToUTC(correctedEventStart);
        correctedEventEnd = spTz.LocalTimeToUTC(correctedEventEnd);

        correctedEventStart = list.ParentWeb.RegionalSettings.TimeZone.UTCToLocalTime(correctedEventStart);
        correctedEventEnd = list.ParentWeb.RegionalSettings.TimeZone.UTCToLocalTime(correctedEventEnd);
        newitem["Start Time"] = correctedEventStart;
        newitem["End Time"] = correctedEventEnd;
        newitem["Recurrence"] = true;
        newitem["fAllDayEvent"] = false;
        newitem["WorkspaceLink"] = false;
        newitem["UID"] = Guid.NewGuid();
        newitem.Update();
        list.Update();
    } 
```

所以我从“本地”用户转换为 UTC，然后再转换回本地网络。UID 是必需的，或者点击事件时出错。

如果您想重复 13 次，请说...代码是：

```
string recData = "<recurrence><rule><firstDayOfWeek>su</firstDayOfWeek><repeat><daily dayFrequency=\"1\" /></repeat><repeatInstances>13</repeatInstances></rule></recurrence>";
DateTime correctedEventEnd = new DateTime(2013, 2, 3, 13, 0, 0).AddDays(13); 
```

而没有结束日期是：

```
string recData = "<recurrence><rule><firstDayOfWeek>su</firstDayOfWeek><repeat><daily dayFrequency=\"1\" /></repeat><repeatForever>FALSE</repeatForever></rule></recurrence>";
DateTime correctedEventEnd = new DateTime(2013, 2, 3, 13, 0, 0).AddDays(998); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T19:18:28.440

它可能已经很老了，但我的回答可能会对某人有所帮助。

您只需要明确地将 EventType = 1 也放入更新中。

# jquery - 使用 getElementById 时，knockout.js applyBindings 会破坏现有的绑定

> ID：14757295
> 
> 赞同：2
> 
> 时间：2013-02-07T17:31:10.983
> 
> 标签：jquery, knockout.js, append

我首先使用 applyBindings() 将我的模型应用于文档：

```
ko.applyBindings(appViewModel); 
```

然后我附加一些动态内容：

```
$('#contentSection').append(myAccountTmpl); 
```

然后我使用 applyBindings 将模型应用于新内容。如果我使用 getElementById 来引用动态添加的节点，则文档上的绑定已损坏。如果我使用 JQuery 引用样式，我没有问题：

```
 ko.applyBindings(appViewModel,document.getElementById('#myAccountForm'));  //corrupts other bindings
  ko.applyBindings(appViewModel,$('#myAccountForm')[0]);  //No Problems! 
```

如果有人可以对此行为提出解释，将不胜感激。我是这些技术的新手，没有任何线索。我什至无法真正解释我所说的“损坏”是什么意思，除了某些绑定无法显示内容（我确实验证了数据仍在绑定模型属性中）。

此外，这可能会帮助其他人对其绑定有莫名其妙的“腐败”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:11:31.243

如果你使用`document.getElementById`不要在它前面加上哈希。带有散列的表单是选择器语法。`getElementById`期望 id 名称，因此对于您的版本，它返回 null。正确的形式是：

```
ko.applyBindings(appViewModel,document.getElementById('myAccountForm')); 
```

# javascript - iframe 自动高度 100% 跨域

> ID：14757296
> 
> 赞同：0
> 
> 时间：2013-02-07T17:31:22.900
> 
> 标签：javascript, iframe, cross-domain, height

我尝试了很多解决方案，但在我的网站上没有任何效果。

现在我使用：

```
<iframe src="http://www.travelstoremaker.com/ibe/turismoin/porch?command=flights" frameborder="0" marginwidth="0" marginheight="0" width="906" height="5000"></iframe> 
```

你可以在这里看到它：http: [//turismo-in.it/voli-in-italia/](http://turismo-in.it/voli-in-italia/)

现在我发现了这个：

```
 var transport = new easyXDM.transport.BestAvailableTransport({
    local: "../hash.html",
    remote: "http://provider.easyxdm.net/example/resized_iframe.html",
    container: document.getElementById("element_that_should_contain_the_frame"),
    onMessage: function(message, origin){
        this.container.getElementsByTagName("iframe")[0].style.height = message + "px";
    }
}); 
```

*然后将以下内容放在内容之后的 iframe 正文中*

```
 var transport = new easyXDM.transport.BestAvailableTransport({}, function(){
    transport.postMessage(document.body.scrollHeight);
}); 
```

但是怎么做呢？我必须在哪里添加它？有用？！有一种解决方案可以在跨域中自动调整 iframe 的高度吗？

PS 我无法更改 iframed 页面中的代码，但只能在我的网站中更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:34:20.047

如果无法更改 iframed 页面上的代码，则无法获得所需的高度。我尝试了很多解决方案，唯一一个我工作过的就是使用 post message。但是，您必须能够从 iframe 发布消息。

# c# - Type.GetInterface 返回 null

> ID：14757298
> 
> 赞同：2
> 
> 时间：2013-02-07T17:31:27.397
> 
> 标签：c#, types, system.reflection

我的问题是，我从历史中得到了与我们的旧 DLL 不同的结果，当时几乎没有变化，而且我不知道这些变化与显示的错误有什么关系。

这是我们的 SecurityPluginServices.dll 模块中方法的一部分，它本质上将插件添加到列表中，以便主程序可以使用它们。

它在一个集合文件夹中获取所有 DLL，然后对每个 DLL 运行下面的代码。

```
private void AddPlugin(string FileName, LoggingUtilities.Source source)
{
    //Create a new assembly from the plugin file we're adding..
    Assembly pluginAssembly = Assembly.LoadFrom(FileName);

    try
    {
        //Next we'll loop through all the Types found in the assembly
        foreach (Type pluginType in pluginAssembly.GetTypes())
        {
            if (pluginType.IsPublic) //Only look at public types
            {
                if (!pluginType.IsAbstract)  //Only look at non-abstract types
                {
                    //Gets a type object of the interface we need the plugins to match
                    Type typeInterface = pluginType.GetInterface("SecurityInterface.ISecurityPlugin", true);

                    //Make sure the interface we want to use actually exists
                    if (typeInterface != null)
                    {
                     // Do work here
                    }

                    typeInterface = null; //Mr. Clean           
                }
            }
        }

        pluginAssembly = null; //more cleanup
    }
    catch (ReflectionTypeLoadException ex1)
    {
        Console.WriteLine(ex1.Message);
    }
    catch (Exception ex2)
    {
        Console.WriteLine(ex2.Message);
    }
} 
```

我遇到的问题是每次到达`Type typeInterface = pluginType.GetInterface("SecurityInterface.ISecurityPlugin", true);`它总是返回null。我需要加载的插件是用于 NTLM 和 LDAP 的，它们在许多版本中变化很小，只添加了几个额外的属性和方法，与实现的接口无关。我在 ILDASM 中打开了一个较新的插件 DLL 和一个较旧的插件的副本，它们似乎都包含有关`SecurityInterface.ISecurityPlugin`该`.GetInterface`方法正在寻找的相同信息。

[较新的 LdapSecurity](http://pastebin.com/t8asttHW)

[旧版 LdapSecurity](http://pastebin.com/smk5hFVt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:15:32.080

**建议：**

```
Type typeInterface = pluginType.GetInterface("SecurityInterface.ISecurityPlugin", true);
                                          // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

将其更改为[完全限定的类型名称](http://msdn.microsoft.com/en-US/library/yfsftwz6.aspx)，即包含包含您的接口类型的程序集的名称。

（如果您现在说在两个不同的程序集中有两种不同类型的同名，因此不能包含*一个*明确的程序集名称，这很可能是您的问题的原因。）

**解释：**

我的另一个回答让我怀疑是什么导致了你的问题。一般来说，`typeof(T)`会强制您为包含`T`. 否则，编译将失败。另一方面，诸如类型名称的文本提及`Type.GetType("T")`不强制编译时程序集引用......但它们仍然必须在运行时解析为类型实例。因此，如果您省略程序集名称，您需要记住 .NET 将如何映射`T`到特定程序集。

回到你的问题。首先，请注意您没有使用完全限定的类型名称：

```
Type typeInterface = pluginType.GetInterface("SecurityInterface.ISecurityPlugin", true);
                                          // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

您只指定命名空间和类型名称，而不是包含您的接口类型的程序集。接口类型是否定义了不止一次，即在不同的程序集中，并且您提到该类型名称被解析为键入错误的程序集？

我们简单看一下[method的](http://msdn.microsoft.com/en-US/library/w3f99sx1.aspx)[MSDN文档`Type.GetType(string)`](http://msdn.microsoft.com/en-US/library/w3f99sx1.aspx)，对字符串参数的描述如下：

> *“要获取的类型的程序集限定名称。[…] 如果该类型在当前执行的程序集中或在 中`Mscorlib.dll`，则提供由其命名空间限定的类型名称就足够了。”*

如果这同样适用于`Type.GetInterface(string, bool)`您正在使用的方法怎么办？如果您当前正在执行的程序集*确实*包含该名称的类型怎么办？那就是`pluginType`要检查的类型……但它可能是与`ISecurityPlugin`插件类实际实现的接口类型不同的接口类型（尽管名称相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:29:34.000

> **更新：**请先查看我的其他答案，这可能更相关。

如果要检查是否`pluginType`实现了`ISecurityPlugin`接口，可以改为执行此检查：

```
typeof(SecurityInterface.ISecurityPlugin).IsAssignableFrom(pluginType) 
```

如果您不引用包含 的程序集`ISecurityPlugin`，则可以将第一部分替换为`Type.GetType("SecurityInterface.ISecurityPlugin")`。

# asp.net-mvc - 在 ASP.NET MVC 中请求特定数据

> ID：14757301
> 
> 赞同：0
> 
> 时间：2013-02-07T17:31:30.263
> 
> 标签：asp.net-mvc

我想在我的 asp.net mvc 4 网站上显示面包屑。面包屑的生成取决于上下文，例如在论坛页面上，它的确定方式与在博客页面上不同。一方面，应该有一个局部视图“面包屑”，但是这个局部视图本身并不知道上下文。而且我不想用面包屑“污染”我的视图模型。我想到了两种可能的解决方案：

1）使视图模型派生自包含面包屑数据的基本模型，并且在视图中，可以使用给定的视图模型作为模型来调用部分视图“面包屑”。2）在动作中将面包屑数据保存在某个地方（例如，在 web 表单中，我们有 HttpContext.Items），部分视图“面包屑”可以读取它们。

但我对这两种选择都不是很满意。有没有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:38:38.810

如果启用了会话状态，您可能会使用 Session。

在您看来，您可以获得会话数据

```
@{
    var breadcrumbs = (BreadCrumbsCastHere)@Session["breadcrumbs"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:55:59.220

面包屑的局部视图应该给出上下文（作为模型，可能是带有文本和 URL 的面包屑列表）。

如果我们假设每个视图都知道它的面包屑，您可以将面包屑数据从视图传递到部分视图：

如果您在布局页面中呈现面包屑，视图应该将面包屑数据传递给布局页面。我会用`ViewBag`那个。

所以，这就是我的做法（如果面包屑不是很深并且相对稳定）：

**SomeView.cshtml**

```
ViewBag.Breadcrumbs = new List<Breadcrmb>() {
          new Breadcrumb(){ Title = "Home", Url = Url.Action("Index", "Home") },
          new Breadcrumb(){ Title = TopicModel.Forum.Title,
                            Url = Url.Action("Forum",
                                             new { id = TopicModel.ForumId }) },
          new Breadcrumb(){ Title = TopicModel.Title,
                            Url = Url.Action("ViewTopic",
                                             new { id = TopicModel.Id }) }
}; 
```

**_Layout.cshtml**

```
@Html.RenderPartial( "_Breadcrumbs", ViewBag.Breadcrumbs ) 
```

**_面包屑.cshtml**

```
@Model IEnumerable<Breadcrumb>

@* Render breadcrumbs *@ 
```

面包屑数据可以以更灵活的方式生成，但您没有问过这个问题，所以我不打算深入探讨这部分。只需说获取视图的面包屑的父列表，然后添加您自己的会更好。

# c# - C# GetType() called on multimensional array results in NullReferenceException

> ID：14757305
> 
> 赞同：0
> 
> 时间：2013-02-07T17:31:49.897
> 
> 标签：c#, arrays, multidimensional-array, nullreferenceexception

I'm new to C# and looking at arrays.

I'm wondering why the call to `i.GetType()` results in a `NullReferenceException` (Object reference not .....) ?

```
 int[][] myJagArray = new int[5][];
       foreach (int[] i in myJagArray) { Console.WriteLine(i.GetType()); } 
```

Many thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:42:44.517

In C#, value types (such as `Int32`) will be initialized to their zero'ed out values. For example:

```
int[] foo = new int[3]; 
```

Will create an array of 3 zeros. Printing:

```
Console.WriteLine(foo[1].GetType().Name); 
```

Would give you `Int32`.

However, an Array type is a reference type. These are initialized to null by default.

For that reason, when you refer to the first item in `int[5][]`, which is an array, you'll get a `null` as it hasn't yet been initialized. When you try to call `GetType()` on this, you'll see a `NullReferenceException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:37:17.543

You are getting this error because your second dimension is null.

Try this:

```
int[][] myJagArray = new int[5][];
myJagArray[0] = new int[] { 1, 2, 3 };

foreach (int[] i in myJagArray) 
{
    if (i != null)
        Console.WriteLine(i.GetType());
    else
        Console.WriteLine("null");
} 
```

Result of this will be:

```
System.Int32[]
null
null
null
null 
```

You get first row not equal to null because we added this line:

```
myJagArray[0] = new int[] { 1, 2, 3 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:48:32.140

You have just declared you jagged array which gets `default` values as null

so you need to initialize those arrays as:

```
myJagArray[0] = new int[] { 1, 5, 7, 9 }; // put whatever values you want here
myJagArray[1] = new int[] { 0, 4, 6 };
myJagArray[2] = new int[] { 11, 22 };
........
myJagArray[4] = new int[] {12,23,45}; 
```

# android - httpclient 在执行时休眠

> ID：14757315
> 
> 赞同：0
> 
> 时间：2013-02-07T17:32:52.917
> 
> 标签：android, timeout, httpclient, wakelock

我正在开发长期运行的应用程序，我的应用程序定期使用`DefaultHttpClient`（我也尝试过）。`AndroidHttpClient`我不知道，但工作一段时间后，不知何故`httpClient.execute`睡着了。从字面上看，当我唤醒（解锁或连接到 PC）时，我的设备`httpClient`会立即继续工作（如果我设置超时或仅返回执行响应，则会引发异常）。我搜索并尝试了类似的案例和非工作。对于唤醒和 wifilocks，我只是在执行前获取 wifi 锁和唤醒锁，并在得到响应后释放它。没有任何工作，我不知道。

我工作的设备是 Galaxy S3(v4.0+) 和 Ace(v2.3.6)

提前致谢。

这是卡住的 MyTask，它卡在线路上`response = new MyClient(ctx).client.execute(post);`并且`MyClient`是一个包装器，用于处理 https 和证书的事情。

```
public abstract class GenericTask extends AsyncTask<Object, Object, Document> {

public final static String TAG = "GenericTask";
private WakeLock wakeLock;
private WifiLock wifiLock;
protected HttpPost post;
public String taskId;
public Context ctx;
Object parameter;

public GenericTask(Context ctx, Object parameter) {
    this.parameter = parameter;
    this.ctx = ctx;
    post = null;
    initLock(ctx);
    lock();
}
private void lock() {
    try {
        wakeLock.acquire();
        wifiLock.acquire();
        Log.d(TAG,"LockAcquired");
    } catch (Exception e) {
        Log.e("WlanSilencer", "Error getting Lock: " + e.getMessage());
    }
}

private void unlock() {
    Log.e(TAG,"unlock");
    if (wakeLock.isHeld())
        wakeLock.release();
    if (wifiLock.isHeld())
        wifiLock.release();
    Log.d(TAG,"LockReleased");
}

private void initLock(Context context) {
    wifiLock = ((WifiManager) context
            .getSystemService(Context.WIFI_SERVICE)).createWifiLock(
            WifiManager.WIFI_MODE_FULL_HIGH_PERF, "GenericTaskWifiLock");
    wakeLock = ((PowerManager) context
            .getSystemService(Context.POWER_SERVICE)).newWakeLock(
            PowerManager.FULL_WAKE_LOCK, "GenericTaskWakeLock");
    Log.d(TAG,"LockInitiated");
}

public boolean cancelTask(boolean bln) {
    if(post!=null)
        post.abort();
    return super.cancel(bln);
}

public void execute(){
    if(Build.VERSION.SDK_INT >= 11){
        startNew();
    }else{
        startOld();
    }
}
private void startOld() {
    super.execute();

}

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void startNew(){
    executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR );
}
@Override
protected void onPostExecute(Document doc) {
    unlock();
    if(doc==null){
        Log.e("GenericTask: " +getClass(),"onPostExecute doc=null");
    }
    Log.e(TAG,"onPostExecute");
        TaskManager.getInstance().returnFromTaskSuccess(doc, getClass(), taskId, parameter);

}

@Override
protected Document doInBackground(Object... params) {
    Log.e(TAG,"doInBackground");
    try {
        return call();
    } catch (InvalidKeyException e) {
        OtherUtils.printStackTrace(e);
    } catch (NoSuchPaddingException e) {
        OtherUtils.printStackTrace(e);
    } catch (InvalidAlgorithmParameterException e) {
        OtherUtils.printStackTrace(e);
    } catch (IllegalStateException e) {
        OtherUtils.printStackTrace(e);
    } catch (NoSuchAlgorithmException e) {
        OtherUtils.printStackTrace(e);
    } catch (IOException e) {
        OtherUtils.printStackTrace(e);
    } catch (TransformerException e) {
        OtherUtils.printStackTrace(e);
    } catch (ParserConfigurationException e) {
        OtherUtils.printStackTrace(e);
    }
    return null;
}
protected abstract String getUrl();

protected abstract Document getRequest();

public int initialSleep() {
    return 0;
}

public String getTaskId() {
    return taskId;
}

public void setTaskId(String taskId) {
    this.taskId = taskId;
}

protected Document call() throws IOException, TransformerException, ParserConfigurationException, InvalidKeyException, NoSuchPaddingException, InvalidAlgorithmParameterException, IllegalStateException, NoSuchAlgorithmException{

Document doc = getRequest();
    String url = getUrl();
    Document responseXml = null;
    try {

        post = HttpUtils.postXml(doc, url, null);

        HttpResponse response;
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, 16000);
        HttpConnectionParams.setSoTimeout(httpParams, 20000);
        post.setParams(httpParams);
        response = new MyClient(ctx).client.execute(post);
        HttpEntity resEntity = response.getEntity();
        responseXml = XmlUtils.entityToXml(resEntity, null);
        resEntity.consumeContent();
        return responseXml;
    } catch (TransformerException e) {
        throw e;
    } catch (IOException e) {
        throw e;
} 

}
} 
```

HttpUtils：

```
public class HttpUtils {
public static HttpPost postXml(Document doc, String url, WrapperAsByteArrayOutputStream baos) throws IOException, TransformerConfigurationException, TransformerException
{
    StringWriter xmlAsWriter = new StringWriter();
    StreamResult result = new StreamResult(xmlAsWriter);
    TransformerFactory.newInstance().newTransformer().transform(new DOMSource(doc), result);
    HttpPost post = new HttpPost(url);
    InputStreamEntity req;
    if ( baos == null ) {
        req = new InputStreamEntity(new ByteArrayInputStream(xmlAsWriter.toString().getBytes()), -1);
    }
    else {
        req = new InputStreamEntity(new WrappedInputStream(new ByteArrayInputStream(xmlAsWriter.toString().getBytes()), baos), -1);
    }
    req.setChunked(true);
    post.setEntity(req);
    return post;
} 
```

我的客户：

公共类 MyClient 扩展 DefaultHttpClient { 公共 HttpClient 客户端；

```
public MyClient(Context ccc) {
    super();
    KeyStore localTrustStore = null;
    try {
        localTrustStore = KeyStore.getInstance("BKS");
    } catch (KeyStoreException e) {
        e.printStackTrace();
    }
    InputStream in = ccc.getResources().openRawResource(
            R.raw.localcert);
    try {
        localTrustStore.load(in, "local_trust_password".toCharArray());
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (CertificateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory
            .getSocketFactory(), 80));
    SSLSocketFactory sslSocketFactory = null;
    try {
        sslSocketFactory = new SSLSocketFactory(localTrustStore);
    } catch (KeyManagementException e) {
        e.printStackTrace();
    } catch (UnrecoverableKeyException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (KeyStoreException e) {
        e.printStackTrace();
    }
    schemeRegistry.register(new Scheme("https", sslSocketFactory, 443));
    HttpParams params = new BasicHttpParams();
    ClientConnectionManager cm = new ThreadSafeClientConnManager(params,
            schemeRegistry);

    this.client = new DefaultHttpClient(cm, params);
} 
```

AlarmReciever 的 onrecieve

```
public void onReceive(Context context, Intent intent) {
    try {
        TaskManager.getInstance().sendBatteryStatus();
         }
    } catch (Exception e) {
        Toast.makeText(
                context,
                "There was an error somewhere, but we still received an alarm",
                Toast.LENGTH_SHORT).show();
        e.printStackTrace();

    } 
```

returnfromtask success 只是检查 id 的线程安全，处理 doc 并设置新的警报，如下所示：

```
 Calendar cal = Calendar.getInstance();
    cal.add(Calendar.SECOND, 30);
    Intent intent = new Intent(ctx, AlarmReceiver.class);

    PendingIntent sender = PendingIntent.getBroadcast(ctx, 2131225, intent,
            PendingIntent.FLAG_CANCEL_CURRENT);

    AlarmManager am = (AlarmManager) ctx
            .getSystemService(Context.ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

sendBatteryStatus 收集一些要发送的信息，并将其传递给扩展 GenericTask 的任务，它通常会执行`new MyAsyncTask(..bla bla).execute();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:04:12.810

一旦您释放唤醒锁，CPU 就可以进入睡眠状态，这很可能就是发生的情况。`HttpClient`您多次执行一个操作，但在某个时间点，在释放唤醒锁后，CPU 进入休眠状态。

由于您想定期执行代码，您应该使用`AlarmManager`此处记录的服务：http: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)。即使手机处于睡眠状态，警报管理器服务也处于活动状态。`PendingIntent`您可以通过其中一种`AlarmManager.set*()`方法调度来使用它。警报管理器将在接收器方法的持续时间内保持唤醒锁，`onReceive()`但您很可能需要获取 WiFi 锁。

# rpm - rpm包失败，包仍然安装

> ID：14757316
> 
> 赞同：1
> 
> 时间：2013-02-07T17:32:53.397
> 
> 标签：rpm, rpmbuild, rpm-spec

我正在构建一个 rpm 包，但是我注意到了这种情况。当我的 rpm 脚本失败时，仍然认为 rpm 已安装在我的系统中。我正在考虑添加清理逻辑，如果在我的 rpm 脚本中检测到错误，我可以在我的代码中调用“rpm -e”并卸载脚本。但是，它似乎有点笨拙。如果脚本失败，是否有更清洁的方法来确保卸载 rpm？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:41:32.133

你不能。要么`%pre`失败且未安装，要么您已安装。您无法调用`rpm -e`，因为 RPM DB 已为您的事务锁定。

如果出现故障，我建议您写信`STDERR`并确保您 [重新] 运行`chkconfig`以关闭您的服务，这样它就不会在下次重新启动时尝试启动。

# javascript - 从一个 Javascript 对象中提取数据并将其放入另一个对象中

> ID：14757319
> 
> 赞同：0
> 
> 时间：2013-02-07T17:32:56.320
> 
> 标签：javascript

我正在处理的情况是从 JSON 对象（表示为 JavaScript 对象）中获取数据，提取一些数据并使用 JavaScript 生成新对象。新对象还将包含新添加的数据。

可以说我有以下对象：

```
sprite_set = {
    "frames": {
        "grass.png": {
            "frame": {
                "x": 1766,
                "y": 202
            },
            "rotated": false,
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        },
        "dirt1.png": {
            "frame": {
                "x": 1766,
                "y": 202
            },
            "rotated": false,
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        },
        "dirt2.png": {
            "frame": {
                "x": 2766,
                "y": 402
            },
            "rotated": false,
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        }                
    }
}; 
```

从这个对象我想形成一个新的对象：

```
sprite_set = {
    "frames": {
        "grass": {
            "frame": {
                "x": 1766,
                "y": 202
            },
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        },
        "dirt": {
            "multi_frames": {
                "frame1": {
                    "x": 1766,
                    "y": 202
                },
                "frame2": {
                    "x": 2766,
                    "y": 402
                }
             },
            "sourceSize": {
                "w": 128,
                "h": 128
            }
        }       
    }
}; 
```

所以我需要构造一个函数来获取原始对象并使用以下规则吐出新对象：

1.  从每个“框架”中删除所有“旋转”属性
2.  重命名“frames”中的每个子对象以删除 .png，因此“grass.png”将更改为“grass”
3.  如果“框架”子对象名称不包含前导数字，则只需将其不变地放在新对象中
4.  如果“帧”子对象名称确实包含前导数字，则将每个后续数字分解为父对象为“multi_frames”的新子对象

我对 JSON 真的很陌生，所以任何关于如何开始的帮助都会很棒。我不想学习，所以当我得到一些帮助时，我会解决这个问题，并在这个答案的底部不断更新我的工作方式。

还有一个问题，有没有一个 JavaScript 库可以让这个过程变得更容易？

感谢任何人的帮助。

## 更新

从人们评论的帮助下，这是我到目前为止：

*HTML*

```
<input type="file" id="files" name="files[]" /> 
```

* ***JavaScript* ***

```
var JsonObj = null;

function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
    f = files[0];
    var reader = new FileReader();

    // Closure to capture the file information.
    reader.onload = (function (theFile) {
        return function (e) {
            JsonObj = e.target.result
            console.log(JsonObj);
            var parsedJSON = JSON.parse(JsonObj);

            var oldframes = parsedJSON.frames,
                newframes = {};
            for (var framename in oldframes) {
                // var m = framename.match(/(.*)\.[^.]+$/);
                var m = framename.match(/^(.+?)(\d*)\.png$/);
                var newname = m[1];
                var frame = oldframes[framename];
                if (newname in newframes) newframes[newname].multi_frames["frame" + m[2]] = frame.frame;
                else newframes[newname] = {
                    frame: frame.frame,
                    sourcesize: frame.sourcsize
                };
                // or, if it's OK to mutate the old objects, just:
                // delete frame.rotated;
                // newframes[newname] = frame;
            }
            parsedJSON.frames = newframes;

            JsonObj = JSON.stringify(parsedJSON, null, 4)
            console.log(JsonObj);

        };
    })(f);

    // Read in JSON as a data URL.
    reader.readAsText(f, 'UTF-8');
}

document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

我使用 HTML5 File Api 来获取 JSON 文件。我收到以下错误

`Uncaught TypeError: Cannot set property 'frame2' of undefined fiddle > (anonymous function)`

参考该行：

`if (newname in newframes) newframes[newname].multi_frames["frame" + m[2]] = frame.frame;`

我看不出问题是什么，有什么想法吗？

我在这里有一个现场 JSFiddle：`http://jsfiddle.net/jamiefearon/8kUYj/48/`

**现在修复：这里的小提琴：http: [//jsfiddle.net/jamiefearon/8kUYj/50/](http://jsfiddle.net/jamiefearon/8kUYj/50/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:50:18.077

这应该这样做：

```
var oldframes = sprite_set.frames,
    newframes = {};
for (var framename in oldframes) {
    var m = framename.match(/^(.+?)(\d*)\.png$/); // not assuming it would not match
    var newname = m[1];
    var frame = oldframes[framename];
    if (! (newname in newframes)) {
        newframes[newname] = {
            sourceSize: frame.sourceSize
        };
        if (m[2])
            newframes[newname].multi_frames = {};
    }
    if (m[2])
        newframes[newname].multi_frames["frame"+m[2]] = frame.frame;
    else
        newframes[newname].frame = frame.frame;
}
sprite_set.frames = newframes; 
```

# delphi - Application (TApplication) 实例是在何时何地创建的？

> ID：14757320
> 
> 赞同：10
> 
> 时间：2013-02-07T17:32:56.877
> 
> 标签：delphi, debugging, initialization, delphi-5

`Application`实例是在何时何地创建的？（同样适用于`Screen`实例）。

`Forms`我在or `System` `initialization`部分没有看到任何内容。
在之前的 CPU 窗口中`Application.Initialize`，我看到了对`@_InitExe`(SysInit) 的调用——这导致了`_StartExe`(System) 和大量代码——据我所知，`asm`它并没有创建实例。`Application`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T17:37:09.407

从代码中解决这个问题很容易。您只需对`TApplication.Create`. 例如，使用 IDE 的 Find in Files 功能。

但是你总是可以偷懒，让调试器来做。

1.  启用调试 DCU。
2.  中设置断点`TApplication.Create`。
3.  跑。

当程序中断时，查看调用堆栈。您将看到该`TApplication`对象是从单元中实例化`InitControls`的`Controls`。并从单元的部分`InitControls`调用。`initialization``Controls`

普通 VCL 应用程序的完整调用堆栈如下所示：

```
Vcl.Forms.TApplication.Create(nil)
Vcl.Controls.InitControls
Vcl.Controls.Vcl.Controls
System.InitUnits
System._StartExe(???,???)
SysInit._InitExe($5A81BC)
项目1.项目1
:749933aa kernel32.BaseThreadInitThunk + 0x12
:76f09ef2 ntdll.RtlInitializeExceptionChain + 0x63
:76f09ec5 ntdll.RtlInitializeExceptionChain + 0x36

```

对 做同样的事情`TScreen.Create`，你会看到`TScreen`对象也在`InitControls()`.

我不会试图解释这一切。我认为这里有足够的信息和建议供您从这里解决所有问题。虽然这是来自 XE3 应用程序的调用堆栈，但它对于您的 Delphi 5 应用程序看起来是一样的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T17:39:17.113

Application 实例是在 Vcl.Controls.pas 单元的 InitControls 过程中创建的。

```
procedure InitControls;
begin
...
  Application := TApplication.Create(nil);
... 
```

InitControls 在同一个单元的初始化部分被调用：

```
initialization
  ...
  InitControls; 
```

# asynchronous - Python telnet 下载仪器数据

> ID：14757321
> 
> 赞同：1
> 
> 时间：2013-02-07T17:32:58.040
> 
> 标签：asynchronous, download, telnet

我想编写一些 python 代码来从我们拥有的压力传感器[Vaisala PTU300](http://www.vaisala.com/Vaisala%20Documents/User%20Guides%20and%20Quick%20Ref%20Guides/PTU300%20User%20Guide%20in%20English.pdf)下载数据。该传感器连接到我们的路由器，并且可以通过 telnet 会话进行联系，在该会话中，简单的命令会根据请求输出数据，或者它可以输出连续的数据流。手册的第 94 页列出了您可以发送到仪器的命令。我对 python 很陌生，但确实有一些 Fortran 编程经验，所以了解一些编程语言的结构。

我希望有人可以帮助我了解我应该实施哪些模块来做到这一点。我对该主题进行了一些研究，发现这些过去的问题具有一定的相关性（[如何使用 python 的 telnetlib 在固定的时间段内从设备获取数据？](https://stackoverflow.com/questions/630217/how-can-i-use-pythons-telnetlib-to-fetch-data-from-a-device-for-a-fixed-period)，[如何保存 telnet 命令的输出使用python无限时间[关闭]](https://stackoverflow.com/questions/14644402/how-to-save-the-output-of-a-telnet-command-by-using-python-for-an-infinite-time)）。

我已经开始尝试使用 telnetlib 通过以下命令连接到仪器

导入系统

导入 telnetlib

主机 = 'xxx.xxx.xxx.xxx'

tn=telnetlib.Telnet（主机）

tn.open

tn.write('r')

tn.read_very_eager()

这导致读取一行数据

例如

2000-01-06 23:43:04 P= 980.0 T= -4.3 'C \r\n>r

但是随后的 tn.read_very_eager() 不返回任何内容。

我在这个读取命令上尝试了不同的 [variations][4]，例如

tn.read_until('C')

但任何后续读取都不会返回任何内容。我相信可能会发生一些“阻塞”？并不是说我真的知道那是什么。

我也尝试过使用

tn.write('发送')

tn.read_until('C')

但这只会返回一个读数，随后的读数不会返回任何内容。

[One][5] 过去的 stackoverflow 问题建议使用 [asynchat][6] 或 [socket][7] 模块来执行此类操作。我还没有尝试使用它们。人们是否认为这是更好的进攻路线？仪器无需用户名或密码即可连接。

所以我的问题是，我怎样才能最好地连接到这个仪器（哪个包，telnetlib，asynchat，socket）？

如何避免 telnet 连接被阻止？（即只能检索一行数据）？

任何建议将不胜感激，如果这个问题已经得到解答，我表示歉意。

问候

阿曼

ps，对不起，它不允许我附上我所有的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:19:35.487

谢谢吉姆，

感谢您的提示，我实际上最终选择了套接字模块进行连接，只是因为它似乎提供了更多功能（不是我需要它们）。

我发现我的问题是我没有用我的“发送”命令发送回车（正如你所指出的那样。发生的事情是当你连接到它时系统会输出一行测量值。这个将是我收到的行。但是，当我向其发送“发送”命令时，我从未将 \r 放在末尾，并且该命令未在仪器上执行。

对于其他可能在谷歌上搜索到与他们的 Vaisala PTU300 相关的代码的人，这里是对我有用的代码（我删掉了很多循环，只保留了这个基本的）。请注意，我已将仪器置于停止模式并关闭 ECHO。我还发现检索到的前几行数据是象形文字，我将它们放入一个名为垃圾的变量中。

导入套接字导入系统

加载配置参数 - 将来从文件中导入

ip = 'xxx.xxx.xxx.xxx'

端口 = 23

s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect((ip, 端口))

垃圾 = s.recv(1024)

SMODE 设置为 STOP

s.send('发送\r')

垃圾 = s.recv(1024)

s.send('发送\r')

数据 = s.recv(128)

打印数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:48:11.017

我已经使用 telnetlib 一个多星期了，这就是我可以分享的内容。

为避免调用 .read_until 阻塞，请将要等待的秒数作为第二个参数包含在内。Like`tn.read_until('C',10)`将等待 10 秒以使“C”出现在缓冲区中。如果它在 0.5 秒内找到它，它只会阻塞 0.5 秒。如果在那段时间内没有找到'C'，它将返回到目前为止缓冲区中的任何内容，如果没有，则返回''。

在我的情况下，我连接的设备使用 DOS 样式的换行符，即 '\r\n'，所以当我需要发送带有换行符的行时，我必须使用: `tn.write('request\r')`。

希望对一些人有所帮助。

# windows-phone-7 - 启用 - 禁用 - 启用后位置服务不工作

> ID：14757322
> 
> 赞同：1
> 
> 时间：2013-02-07T17:32:59.430
> 
> 标签：windows-phone-7, windows-phone-8

我的应用程序使用位置服务。在测试我的应用程序时，我发现位置服务存在问题。如果我在手机上启用定位服务的情况下启动我的应用程序，我将获得 GeoLocationStatus.Ready 状态，然后我按下开始按钮并导航到设置并禁用定位服务，应用程序将获得 GeoLocationStatus.Disabled 状态。然后如果我按下开始按钮，导航到设置并启用位置服务，然后返回应用程序，我仍然得到 GeoLocationStatus.Disabled。从这一点开始，我将始终获得 GeoLocationStatus.Disabled，直到我重新启动应用程序并启用位置服务。

我在 Windows Phone 7.5 操作系统（Samsung Focus 和 HTC HD7）上观察到了这个问题

Windows Phone 8 OS (Nokia Lumia 920)win 上的相同应用程序没有问题

# linux - 找出程序从哪里运行？

> ID：14757326
> 
> 赞同：0
> 
> 时间：2013-02-07T17:33:09.623
> 
> 标签：linux, ubuntu

我的服务器上安装了几个 Nginx，现在我似乎无法弄清楚当前正在运行的 Nginx 是从哪里运行的。

我的PID是：12530

我可以用它来找出 Nginx 从哪里运行吗？

或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:40:17.720

进去看看`/proc/<PID>/`。它包含有关该过程的大量信息，并记录在[proc(5)](http://linux.die.net/man/5/proc)中。该文件`exe`将是可执行文件的符号链接。IE：

```
$ ls -l /proc/11806/exe 
lrwxrwxrwx 1 u u 0 Feb  7 13:15 /proc/11806/exe -> /usr/bin/emacs23-x 
```

PID 11806 正在运行 emacs23-x 可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:37:10.863

编辑：等等，你有一个 PID，它并不像下面那样困难。只需查看以下输出：

```
$ sudo ls -l /proc/12530/exe 
```

* * *

如果“Nginx 的运行位置”是指“哪个特定的二进制文件”，则可以使用如下内容：

```
$ sudo lsof | grep nginx | grep txt
nginx  8100  root  txt  REG     202,1   7645520    1931225 /usr/sbin/nginx
... 
```

..这告诉我版本`/usr/sbin/nginx`正在运行。

你可能需要`apt-get install lsof`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:52:27.157

这个怎么样？

```
lsof -p <pid> | grep txt 
```

# windows - 采集音频样本 Windows 8/RT

> ID：14757327
> 
> 赞同：1
> 
> 时间：2013-02-07T17:33:13.613
> 
> 标签：windows, audio, windows-runtime

我需要构建一个从麦克风获取音频并“实时”详细说明的应用程序（一旦准备好）。

我问你如何从 Windows 8/Win RT 上的麦克风获取音频样本，而不是将它们保存在文件中，而是直接从数组（缓冲区）中使用它们以进行我的阐述。

谢谢大家:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:13:23.033

如果您不想将捕获的数据保存到文件中，一种可能的选择是使用本地存储。[请参阅http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)上的一个使用应用程序数据的示例

# android - 防止活动在方向更改时重新创建我的片段

> ID：14757328
> 
> 赞同：2
> 
> 时间：2013-02-07T17:33:20.933
> 
> 标签：android, android-fragments, screen-orientation

我有一个包含片段的活动，当单击该片段上的某些内容时，我将该片段替换为另一个片段。如果设备在第二个片段中旋转，则`onCreate`调用该活动并再次重新创建第一个片段。

如何在设备旋转时阻止 onCreate 被调用？

在我的清单中，我有这个

```
<activity android:name="CalActivity" android:configChanges="orientation|keyboardHidden"/> 
```

据我了解，将 configChanges 添加到该活动可以防止活动被破坏和重新创建，但 onCreate 仍然被调用并弄乱了片段。

我也尝试放入`setRetainInstance()`碎片，但这也无济于事

如果设备没有像应有的那样旋转碎片，并且我不想将其设为仅一个方向的活动，那么这更像是一种黑客行为，而不是实际解决问题

我还可以做些什么？

编辑：

这就是我创建片段的方式

```
Fragment miniMonthFrag = new MonthByWeekFragment(System.currentTimeMillis(), false);
ft.replace(R.id.cal_frame, miniMonthFrag).commit(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T17:55:27.627

而不是使用替换使用：

```
 FragmentManager fm = getFragmentManager();
    if (fm.findFragmentById(R.id.cal_frame) == null) {
        mFragment = new MonthByWeekFragment(System.currentTimeMillis(), false);
        fm.beginTransaction().add(R.id.cal_frame, mFragment ).commit();
    } else {
        mFragment = (MonthByWeekFragment) fm.findFragmentById(R.id.cal_frame);
    } 
```

这将确保您在旋转后使用预先存在的片段。

# android - 印地语或马拉地语字体的 Android 应用

> ID：14757330
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:33:22.743
> 
> 标签：android, fonts, hindi

我想为安卓设备开发一个印地语/马拉地语字体的应用程序？怎么做？我需要下载 devnagiri 字体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:51:14.653

从 API 10 (Android 2.3) 开始，本机支持印地语。

# c++ - 对于非常多的点，找到三角形上或三角形内的点数？

> ID：14757331
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:33:23.110
> 
> 标签：c++, geometry, segmentation-fault

给定 N 个格点 (Xi, Yi), i = 1, 2, ..., N 在二维坐标系上。您必须处理 Q 查询，每个查询将以“xy d”的形式给出。令 ABC 为顶点位于 A(x+d, y)、B(x, y) 和 C(x, y+d) 的三角形。对于每个查询，您必须找出有多少给定的格点位于三角形 ABC 的内部或边界上。输入

输入的第一行包含两个空格分隔的整数 N 和 Q。接下来的 N 行中的每一行都有两个空格分隔的整数 Xi、Yi，分别给出格点的 x 和 y 坐标。然后下面的 Q 行包含三个空格分隔的整数 x、y、d，给出一个查询。输出

对于每个查询，在一行上输出一个整数，表示位于三角形内部或边界上的给定格点的数量。约束

1 ≤ N ≤ 300000 (3 * 105)
1 ≤ Q ≤ 200000 (2 * 105)
1 ≤ Xi, Yi ≤ 300000 (3 * 105)
1 ≤ x, y, d ≤ 300000 (3 * 105)

样本

```
Input 1: 
5 3  
1 3  
1 5  
3 6  
4 4  
2 6
1 5 3    
1 5 4
1 1 1

Output 1:
3
3
0

Input 2:
2 2
1 5
3 7
2 5 6
2 3 4

Output 2:
1
0 
```

```
#include<iostream>
#include<cstdio>
#include<cstdlib>

using namespace std;

int sizer[300000]={0};//sizer[i] tells the number of points having i as the abscissa

int cmp(const void *a,const void *b)
{
    return *(int *)a-*(int *)b;
}

int main()
{
    int **X=(int **)malloc(300000*sizeof(int));//each pointer points to an array of ints
    for(int i=0;i<300000;i++)
    X[i]=NULL;
    int N,Q;
    int x,y,d;
    scanf("%d %d",&N,&Q);
    scanf("%d %d",&x,&y);
    sizer[x-1]++;
    for(int i=1;i<=N;i++)
    {
        scanf("%d %d",&x,&y);
        sizer[x-1]++;
        X[x-1]=(int *)realloc(X[x-1],sizer[x-1]*sizeof(int));
        X[x-1][sizer[x-1]-1]=y;}
        for(int i=0;i<300000;i++)
        {
         if(X[i]!=NULL)
         qsort(X[i],sizer[i],sizeof(int),cmp);}//sorts all the ordinates

         for(int i=1;i<=Q;i++)//query loop
         {
          scanf("%d %d %d",&x,&y,&d);
          int count=0;
          for(int j=x;j<=x+d;j++)//this loop works for each row from x to x+d
          {
           if(X[j-1]==NULL)//no points on X=j line
              continue;
           else if(X[j-1][sizer[j-1]-1]<y)//the largest ordinate point on X=j line is <y ie                below the triangle
              continue;
           else if(X[j-1][0]+j>x+y+d)//the smallest ordinate point on X=j line is above the triangle
               continue;  
         int k=0;
        for(;X[j-1][k]<y&&k<sizer[j-1];k++);//k is the position from where counting of points begins.moving along the X=j line and counting the points
        int v=k;
        for(;X[j-1][v]+j<=x+y+d&&v<sizer[j-1];v++);
        count=count+v-k;}
        printf("%d\n",count);}
        return 0;} 
```

当输入案例非常大但在小型测试案例中可以正常工作时，我会在在线法官上获得 SIGSEGV。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:09:20.297

检查主函数的第一行：

```
int **X=(int **)malloc(300000*sizeof(int)); 
```

在这里，您正在动态分配一个二维数组 X。现在，请参阅以下约束：

```
N ≤ 300000 (3 * 10^5) 
```

因此，您的程序将分配 X[3 *10^5][3 *10^5] 即。9*10^10 整数数组。此大小的数组太大而无法放入内存。在任何编程语言中，都无法分配/允许如此大的内存。

参考以下[链接](http://www.codechef.com/wiki/faq#Why_do_I_get_a_Runtime_Error_Other)

*SIGSEGV 是由无效的内存引用或分段错误引起的错误（信号）。您可能正试图越界访问数组元素或**试图使用过多的内存。***

因此，由于内存过多，您的程序生成 了**SIGSEGV 。**

# r - `levels` 上的`setattr` 保留不需要的重复项（R data.table）

> ID：14757333
> 
> 赞同：5
> 
> 时间：2013-02-07T17:33:25.567
> 
> 标签：r, data.table, duplicate-removal

关键问题：`setattr`用于更改级别名称，保留不需要的重复项。

我正在清理一些具有多个因子水平的数据，所有这些水平都是相同的，显示为两个或多个不同的水平。（这个错误主要是由于拼写错误和文件编码问题）我有 153K 因子，大约 5% 需要更正。

**例子**

在下面的示例中，向量具有三个级别，其中两个需要折叠为一个。

```
 incorrect <- factor(c("AOB", "QTX", "A_B"))   # this is how the data were entered
  correct   <- factor(c("AOB", "QTX", "AOB"))   # this is how the data *should* be

  > incorrect
  [1] AOB QTX A_B
  Levels: A_B AOB QTX   <~~ Note that "A_B" should be "AOB"

  > correct
  [1] AOB QTX AOB
  Levels: AOB QTX 
```

向量是 a 的一部分`data.table`。
使用该`levels<-`功能更改关卡名称时一切正常。
但是，如果使用`setattr`，则会保留不需要的重复项。

```
mydt1 <- data.table(id=1:3, incorrect, key="id")
mydt2 <- data.table(id=1:3, incorrect, key="id")

# assigning levels, duplicate levels are dropped
levels(mydt1$incorrect) <- gsub("_", "O", levels(mydt1$incorrect))

# using setattr, duplicate levels are not dropped
setattr(mydt2$incorrect, "levels", gsub("_", "O", levels(mydt2$incorrect)))

                # RESULTS
# Assigning Levels       # Using `setattr`
> mydt1$incorrect        >     mydt2$incorrect
[1] AOB QTX AOB          [1] AOB QTX AOB
Levels: AOB QTX          Levels: AOB AOB QTX   <~~~ Notice the duplicate level 
```

关于为什么会这样和/或改变这种行为的任何选项的任何想法？（即`..., droplevels=TRUE`？）谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:56:53.603

`setattr`是一种通过引用更改属性的低级蛮力方式。它不知道“级别”属性是特殊的。`levels<-`它里面有更多的功能，但我怀疑你可能已经发现它`levels(DT$col)<-newlevels`会复制整个`DT`(base `<-`)，因此你看的速度是`setattr`.

我不会说不*正确*的顺便说一句。这是一个正确且有效的因素，但恰好有重复的级别。

要删除重复的级别，我认为（未经测试）：

```
mydt1[,factorCol:=factor(factorCol)] 
```

应该这样做。通过查找您更改了哪些级别，将整数更改为指向第一个重复项，然后从级别中删除副本，可以比这更快。调用`factor()`基本上从头开始（即强制所有因素到`character`并重新匹配）。

# f# - 用于处理数据的 F# GPU 编程与 KDB，什么是最快的？

> ID：14757334
> 
> 赞同：4
> 
> 时间：2013-02-07T17:33:26.597
> 
> 标签：f#, gpu, kdb

嗨，我想询问任何人的经验，什么是使用 F# GPU（例如使用 C Nivida GPU api typeprovider）编程与 KDB 处理数据来处理大量数据的最具成本效益和效率的方法。

我知道这两种方法完全不同，但在投资一种或两种技术之前，我只想从这两种方法中工作过的人那里得到一些建议。

对于 GPU 方面的事情，我计划使用单个表和 2-3 个其他表的简单连接来使用关系数据库或 NoSQL 数据库（如 mongodb）。

有谁知道这两种方法之间的任何指标或比较（​​主要是速度）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T20:46:22.433

正如其他人所说，太多取决于您的用例，哪个更快。我之前帮助创建了一个针对几个不同的股票数据数据库的 15 个查询和一些算法策略的测试框架：

*   PostgreSQL
*   mysql - 内存版本
*   mongodb - 对于它支持的查询
*   数据库
*   加上一些其他较新的 nosql 和面向列的数据库

在大多数查询中，kdb 数据库比上面提到的要快得多。一个数据库在性能方面很接近，但要让它执行我想要的计算要困难得多。

不，我不能给出确切的数字，因为这违反了一些数据库供应商的条款。但我会强调，如果你要构建一个系统，你的团队所拥有的技能应该会影响选择。加上您快速更改系统及其编程的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T09:10:34.207

老实说，在 KDB 中形成复杂的查询（然后再理解它们）比“像 MongoDB 之类的东西”要容易得多。

我也是F#的粉丝。

现在，无论是 F# 还是 KDB+ 都可以帮助您以与 GPU 兼容的方式思考（基于数组、一次性解决整个问题、线性度较低、并行性）。无论您做出何种选择，请考虑使您到达那里的过程，以及您是否被锁定在一种特定的世界观中。

就建模而言，上下文非常重要。这实际上取决于您要运行的模型类型以及吞吐量因素。

KDB+ 的敏捷性、简洁性和速度非常棒。同样，F# 非常适合类型安全，以及基于研究的东西，比如生命科学。

没有什么能阻止您同时使用两者。哦，KDB+ 的 32 位版本现在可以以商业或非商业方式免费使用。

和 John 一样，我也尝试了来自 BerkeleyDB 及更高版本的许多选项。特别是，除 KDB+ 之外的列选项在几个方面都缺乏（不仅仅是性能）。我从内核的角度来看待它，甚至在销售团队放弃时与一些从事这些内核工作的工程师进行了交谈。KDB+ 超越基准，是一种明智的前进方式，这是有根本原因的。

速度是一个或多或少取决于应用的因素。其他因素以及这些因素与产品路线图的关系可能是普遍的。

# jquery - 基于另一个元素的jQuery datepicker依赖

> ID：14757335
> 
> 赞同：0
> 
> 时间：2013-02-07T17:33:30.413
> 
> 标签：jquery, datepicker, jquery-ui-datepicker

我正在尝试将 jQuery 的 on() 事件与日期选择器一起使用。流程是用户从下拉列表中选择一个值，关闭事件附加到 startdate，它将 enddate 的 maxDate 设置为 startdate 的 selectedDate 后 30 天：

```
 $("#ddlRentalTerm").on("change", OnRentalTermChange);

 $("#txtRentalStartDate").datepicker({
    dateFormat: "mm-dd-yy",
    showOn: "button",
    buttonImageOnly: true,
    buttonImage: "Images/iconCalendar0.gif",
    buttonText: "Start Date",
    minDate: -89,
    onSelect: function (selectedDate) {
        $("#txtRentalEndDate").datepicker("option", "minDate", selectedDate);
        PopulateNumberOfWeeks(false);
    }
});

$("#txtRentalEndDate").datepicker({
    dateFormat: "mm-dd-yy",
    showOn: "button",
    buttonImageOnly: true,
    buttonImage: "Images/iconCalendar0.gif",
    buttonText: "End Date",
    minDate: -89,
    onSelect: function (selectedDate) {
        $("#txtRentalStartDate").datepicker("option", "maxDate", selectedDate);
        PopulateNumberOfWeeks(false);
    }
});

 function OnRentalTermChange(event) {
  var $btnCreatePO = $("#btnCreatePO");
  var $startdate = $("#txtRentalStartDate");
  var $enddate = $("#txtRentalEndDate");
  var selectedDate = new Date();

  var selRental = $("#ddlRentalTerm").val();

  if (selRental === "1") {
    $startdate.datepicker("option", "onClose", BindShortTermDate);
    $startdate.datepicker("refresh");
    $btnCreatePO.attr('disabled', 'disabled');
  }
  else
  {
    RestoreShortTermStartDate();
    RestoreShortTermEndDate();
    $btnCreatePO.attr('disabled', false);
  }

};

function BindShortTermDate(dateText, instObj)
{
   var $startdate = $("#txtRentalStartDate");
   var $enddate = $("#txtRentalEndDate");
   var selectedDate = new Date(dateText);
   var maxDate = new Date();
   maxDate.setDate(selectedDate.getDate() + 30);
   $enddate.datepicker("setDate",maxDate);

  $enddate.datepicker("option",{
    numberOfMonths: 2,
    minDate: selectedDate,
    maxDate: maxDate, 
    changeMonth: false, 
    changeYear: false
  });
  $enddate.datepicker("refresh");
} 
```

因此，我尝试将不同的示例混合在一起，但没有产生任何结果。我可能让它变得比它需要的更难。我尝试在 datepicker 上执行 on()，但它出错了。每次我需要更改选项时，是否需要销毁日期选择器并重新创建它？谢谢！

jsfiddle：[jsfiddle.net](http://jsfiddle.net/willtx/YU9xv/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:12:39.437

更改要修改的选项，然后刷新日期选择器。

如果您想将事件绑定到日期选择器本身，请使用 onSelect，如果您想在其他任何事情上使用标准 $.on

更改选项：[http ://api.jqueryui.com/datepicker/#method-option](http://api.jqueryui.com/datepicker/#method-option)

刷新：[http ://api.jqueryui.com/datepicker/#method-refresh](http://api.jqueryui.com/datepicker/#method-refresh)

选择：http : [//api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

祝一切顺利

-莱德杰

# node.js - 使用 nodejs 和 graphicsmagick 合并两个图像

> ID：14757336
> 
> 赞同：1
> 
> 时间：2013-02-07T17:33:31.653
> 
> 标签：node.js, graphicsmagick

我被要求根据以下要求从给定图像（可以是任何大小）创建 450 像素 x 225 像素的图像。

如果图像是 450x225，没有问题，只需保存它。如果图像更大，只需让用户能够裁剪图像。我可以做到以上两点，但是**当图像小于 450x225 时，我遇到了困难**。当较小时，我想创建一个 450x225 的图像并将给定的图像粘贴到 450x225 的中心。

我正在使用 node.js 并使用 node.js 的 GraphicsMagicks 库。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:22:48.797

```
gm convert inputfile -gravity center -extent 450x225 outputfile

```

如果你想轻松地与 node.js 集成，你可以使用 stdin/stdout 作为文件：

```
gm convert - - 重心 -extent 450x225 -

```

然后，您可以通过管道将图像数据传入和传出 gm 进程。

# c# - 重新定位 Windows 窗体（位置）

> ID：14757339
> 
> 赞同：3
> 
> 时间：2013-02-07T17:33:40.310
> 
> 标签：c#, windows, winforms, window

如何将 Windows 窗体打开时放置在屏幕的右下角，而不是左上角？

**情况：**我有一个**Form1**，它实际上并没有作为表单做任何事情，我只是将它用于它的上下文菜单（我的应用程序只能从托盘工作）。因此，大部分主要运行代码进入 Form1 类。单击上下文菜单时，它将进行一些处理，最后将显示**Form2**。因此**Form2**被**Form1**的上下文菜单项打开/调用。在这种情况下如何更改 Form2 的位置？

**Form1.cs**（**Form2**被触发的部分）

```
private void menu_upload_file_Click(object sender, EventArgs e)
{
    DialogResult dialogOpened = openFileDialog1.ShowDialog();
    if (dialogOpened == DialogResult.OK)
    {
        string filename = openFileDialog1.FileName;

        using (var client = new WebClient())
        {
            var response = client.UploadFile("http://localhost/imgitv3/upload.php?submit=true&action=upload&request=app", "POST", filename);
            // string path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + Path.DirectorySeparatorChar + "response.txt";

            if (response != null)
            {
                string responseContent = System.Text.Encoding.ASCII.GetString(response);
                Form2 linkWindow = new Form2();

                if (isURL(responseContent))
                {
                    linkWindow.toTextBox(responseContent);
                    linkWindow.Show();
                }
            }
        }
    }
} 
```

**Form2.Designer.cs**

```
// 
            // Form2
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.CausesValidation = false;
            this.ClientSize = new System.Drawing.Size(419, 163);
            this.Controls.Add(this.textBox2);
            this.Controls.Add(this.textBox1);
            this.Controls.Add(this.label3);
            this.Controls.Add(this.label2);
            this.Controls.Add(this.label1);
            this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon")));
            this.MaximizeBox = false;
            this.MaximumSize = new System.Drawing.Size(435, 202);
            this.MinimizeBox = false;
            this.MinimumSize = new System.Drawing.Size(435, 202);
            this.Name = "Form2";
            this.ShowInTaskbar = false;
            this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
            this.Text = "IMGit Image Uploader";
            this.TopMost = true;
            this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
            this.Load += new System.EventHandler(this.Form2_Load);
            this.ResumeLayout(false);
            this.PerformLayout(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:22:30.133

你需要知道两件事。首先是您要在其上显示表单的屏幕的*工作区域。*工作区是屏幕的大小减去该屏幕上显示的任务栏。您可以为此使用 Screen.WorkingArea 属性。

其次是窗口的实际大小。这通常不是表单的设计大小，您的用户可能已经更改了窗口标题栏中文本的大小，或者可能正在以与您不同的 DPI 设置运行视频适配器。您必须等到表单的 Load 事件触发后才能知道该大小。

所以让你的代码看起来像这样，假设你想在主监视器上显示表单：

```
 var frm = new Form2();
        frm.Load += (s, ea) => {
            var wa = Screen.PrimaryScreen.WorkingArea;
            frm.Location = new Point(wa.Right - frm.Width, wa.Bottom - frm.Height);
        };
        frm.Show(); 
```

这会在窗口变得可见之前重新定位窗口。表单的 StartPosition 属性无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:39:16.903

您可以设置表单属性`StartPosition=Manual`，然后将`form.left`和`form.top`属性设置为所需的值。

您应该在显示对话框之前设置它们。

```
Form2 linkWindow = new Form2();
linkWindow.StartPosition = FormStartPosition.Manual;
linkWindow.Left = 200;
linkWindow.Top = 200;

if (isURL(responseContent))
{
  linkWindow.toTextBox(responseContent);
  linkWindow.Show();
} 
```

使用 Left 和 Top 值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T17:55:09.863

从您的 Form2 中挂钩 FormLoad 事件：

```
Form2 linkWindow = new Form2();
linkWindow.FormLoad += Form2_Load; 
```

然后在某处添加此方法：

```
 private void Form2_Load(object sender, EventArgs e)
    {
        this.StartPosition = FormStartPosition.Manual;
        this.Location = new Point(400, 400);  //set x,y to where you want it to appear
    } 
```

将 X,y 值更改为您想要放置窗口的任何值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T18:20:59.857

除了关于 this.StartPosition = FormStartPosition.Manual 和 location 等的答案。要计算 Form 的位置，可以使用 Screen 类及其 WorkingArea 属性。 [http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx)

# java - 从 Java 调用 PHP

> ID：14757351
> 
> 赞同：0
> 
> 时间：2013-02-07T17:34:10.807
> 
> 标签：java, php, sql, database

我正在尝试从我的 Java 程序中调用一些 PHP 脚本，以便查询/修改我的数据库。我对数据库完全陌生，不知道发生了什么。

我正在尝试从 java 中调用以下脚本。

**脚本**

```
<?php
include('test.php');

define("HOST", "localhost");

define("USERNAME", "xxxx");

define("PASSWORD", "xxxx");

define("DATABASE", "project_database");

mysql_connect(HOST, USERNAME, PASSWORD);

mysql_select_db(DATABASE);

?> 
```

**Java 代码**

```
 public static String excutePost(String targetURL, String urlParameters)
    {
      URL url;
      HttpURLConnection connection = null;  
      try {
        //Create connection
        url = new URL(targetURL);
        connection = (HttpURLConnection)url.openConnection();
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", 
             "application/x-www-form-urlencoded");

        connection.setRequestProperty("Content-Length", "" + 
                 Integer.toString(urlParameters.getBytes().length));
        connection.setRequestProperty("Content-Language", "en-US");  

        connection.setUseCaches (false);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        //Send request
        DataOutputStream wr = new DataOutputStream (
                    connection.getOutputStream ());
        wr.writeBytes (urlParameters);
        wr.flush ();
        wr.close ();

        //Get Response  
        InputStream is = connection.getInputStream();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line;
        StringBuffer response = new StringBuffer(); 
        while((line = rd.readLine()) != null) {
          response.append(line);
          response.append('\r');
        }
        rd.close();
        return response.toString();

      } catch (Exception e) {

        e.printStackTrace();
        return null;

      } finally {

        if(connection != null) {
          connection.disconnect(); 
        }
      }
    } 
```

目标网址应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:36:33.533

如果要调用新进程，请参阅[java.lang.Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)。

然而，Java 能够通过[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html)直接与您的数据库对话，这是我强烈推荐的方法。您不必产生新的流程或用一种以上的语言实现您的解决方案，您可以利用众多与 JDBC 相关的框架来让您的生活重新焕发生机。数据库访问相当容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:38:43.313

您需要指定页面的链接，可能类似于 '/localhost/yourPageInPhp.php

我假设您需要执行脚本并在 Java 中显示其输出

# c# - 我应该给这两个从一个班级拆分出来的班级取什么名字？

> ID：14757353
> 
> 赞同：3
> 
> 时间：2013-02-07T17:34:19.787
> 
> 标签：c#, design-patterns, naming-conventions, naming

我最近做了一个重构。基本上，我们有一个系统，它读取一个 XML 文件并对其进行一些操作，然后对其进行更新并将其写出。我已将此功能分为两类

1.  一个“控制” XML 并抽象地说明应该用它做什么的类
2.  一个使用 XML 处理所有内容的类，并提供一个简单的接口来更新和阅读 #1 所关注的内容

实施现在明显更加清晰。#1 不必担心 XML 名称空间或 XPath 查询或任何其他问题。它只是说“嘿＃2，将此部分从'foo'更新为'bar'”。

但是，我不确定该怎么称呼它。旧班级被命名为 my `FooManifestXml`. 我应该怎么称呼这两个类？我有一些想法，但我不想歪曲结果。

另外，我担心这个简单命名的主要原因是因为将来可能会进行更多类似的重构，我希望有一些直观的命名方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:45:56.213

听起来像[命令模式](https://en.wikipedia.org/wiki/Command_pattern)的小改动。

*一个“控制” XML 并抽象地说明应该用它做什么的类*

这可以是一个`ICommand`

```
public interface ICommand
{
    void Execute();
} 
```

*一个使用 XML 处理所有内容的类，并提供一个简单的接口来更新和阅读 #1 所关注的内容*

这可以包含操作的实现：

```
public class UpdateCommand : ICommand
{
    private XML file;

    public UpdateCommand(XML file)
    {
        this.file = file;
    }

    public void Execute()
    {
        //omn nom nom xml
    }
} 
```

可能`main`看起来像

```
XML file = new XML("file.xml");
ICommand updateCommand = new UpdateCommand(file);
updateCommand.Execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:55:36.363

在高层次上，我是这样想的：

## 贮存：

*   文件系统
*   数据库
*   记忆

借助清晰的存储抽象（**AbcStore**或**AbcRepository**），您可以更轻松地添加缓存或锁定等行为。

## 序列化格式：

*   XML
*   JSON
*   [原始缓冲区](http://code.google.com/p/protobuf/)

你为什么选择 XML，也许这会改变，或者数据可能会以不同的格式提供给不同的客户。我对您的应用程序了解不足，无法知道这是否有意义。

我可以将这个抽象命名为**AbcSerializer**。

## 商业逻辑：

这是您操作数据的地方，**方法名称应该在问题域中，而不是在解决方案域中。**我的意思是方法名称应该类似于`changeAddress`而不是`updateChildNode`

# javascript - Javascript循环给我带来了问题

> ID：14757355
> 
> 赞同：1
> 
> 时间：2013-02-07T17:34:26.343
> 
> 标签：javascript

我只想从此字符串中提取组

我想在警报“group1，group2”中有类似的东西，但它返回空。

```
var phone_nos = "group1,group2,564774890900";   
var recipients = phone_nos.split(",");  
for( var i=0; i<recipients.length; i++ )
 group =recipients[i].substring(0,5)
{ if (group=="group")
         {groups.push(recipients)}

    }
    alert(groups.join(",")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:36:51.553

你有各种各样的错误。

```
for( var i=0; i<recipients.length; i++ ){
    group =recipients[i].substring(0,5)
    if (group=="group")
         {groups.push(recipients)}
} 
```

你 for 语句只运行下一行代码，而不是我认为的块。如果你更好地格式化你的代码，你将能够更好地看到这样的错误。

```
for( var i=0; i<recipients.length; i++ )
    group =recipients[i].substring(0,5)
   // MORE CODE 
```

以上仅在 for 之后运行第一条完整的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:39:54.440

一些放错位置的括号，`for`假设您要过滤，`group*`您需要添加数组而不是原始字符串。`recipients[i]``groups``recipients`

```
var phone_nos = "group1,group2,564774890900";   
var recipients = phone_nos.split(","); 
var groups = [];
for (var i=0; i < recipients.length; i++) {
  group = recipients[i].substring(0,5);
  if (group == "group") {
    groups.push(recipients[i]);
  }
}
alert(groups.join(",")) 
```

现代浏览器/IE9+

```
var groups = phone_nos.split(",").filter(function(v) {
  return v.substring(0, 5) === "group"
}); 
```

# php - 更新 MySql 数据库

> ID：14757358
> 
> 赞同：0
> 
> 时间：2013-02-07T17:34:35.187
> 
> 标签：php, mysql, sql-update

我有一个可以通过表单和 mysql php 更新的页面。我将 db 调用更新`require "master.db.php";`为`require $_SERVER['DOCUMENT_ROOT'].'/include/master.db.php';`

我在处理表单更新时收到“更新成功”消息，但当页面重新加载时更新不存在。没有抛出错误，因此不清楚为什么数据库不接受更新。使用 phpMyAdmin 检查了 MySql db 并能够毫无问题地直接更新数据库？

我完全不知所措，因为这个问题只会影响“更新”和“删除”。我有一个正常工作的“添加条目”表单，它的数据库调用代码与其他表单相同。我已经尝试回滚到我的旧代码，但问题仍然存在。尝试重新启动浏览器并清除现金。有什么建议吗？

```
<?php
// connect to datebase
require $_SERVER['DOCUMENT_ROOT'].'/include/master.db.php';
// real escape all strings
$season_num = mysql_real_escape_string($_POST['season_num']);
$eps_num = mysql_real_escape_string($_POST['eps_num']);
$temp_eps_num = mysql_real_escape_string($_POST['temp_eps_num']);
$title = mysql_real_escape_string($_POST['title']);
$inspired = mysql_real_escape_string($_POST['inspired']);
$descrip = mysql_real_escape_string($_POST['descrip']);

// update data in mysql database
$sql="UPDATE season SET season_num='$season_num', eps_num='$eps_num', temp_eps_num='$temp_eps_num', title='$title', inspired='$inspired', descrip='$descrip' WHERE ID='$id'";
$result=mysql_query($sql);

// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='example.html'>View result</a>";
touch('../example.html');
clearstatcache();
}

else {
echo "Whoops: " . mysql_error(); ;
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T23:12:39.543

添加`$id = mysql_real_escape_string($_POST['id']);`解决了我的问题。谢谢njk

# internet-explorer - 在 IE hacks 上无法打开 IE 兼容模式

> ID：14757359
> 
> 赞同：0
> 
> 时间：2013-02-07T17:34:47.970
> 
> 标签：internet-explorer, internet-explorer-8

当我使用 IE hacks 时，兼容模式仍然可用。但如果我删除这些黑客，它会按预期工作。

黑客（不起作用）

```
<!doctype html>

<!--[if lt IE 7]> <html class="no-js ie ie6 lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie ie7 lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie ie8 lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

没有黑客（工作正常）

```
<!doctype html>

<html class="no-js ie ie8 lt-ie9" lang="en">

    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

我一生都无法弄清楚为什么兼容模式无法与黑客一起使用。我正在使用 IE8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:20:42.060

您需要将 IE8 切换到 quirks 模式，对吗？content 属性表示您要使用的兼容模式。不代表哪个IE版本**使用**了quirks模式。

试试这个元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=5"> 
```

# eclipse - Eclipse BPEL Designer：选择变量类型

> ID：14757360
> 
> 赞同：1
> 
> 时间：2013-02-07T17:34:50.997
> 
> 标签：eclipse, bpel

我是 BPEL 新手，我已经在 Eclipse Juno 中安装了 BPEL Designer 以及 Apache ode 来测试一些简单的 bpel 示例，例如在

[http://www-inf.int-evry.fr/cours/WebServices/TP_BPEL/whileloop.html](http://www-inf.int-evry.fr/cours/WebServices/TP_BPEL/whileloop.html)

但是，当我继续本教程的第 5 步时：

> "单击变量迭代器，在属性视图中，选择详细信息->浏览"..,

...浏览按钮似乎不起作用。（可以点击，但不出现选择窗口。）

我想知道其他人是否也遇到过同样的问题（它是 Eclipse 错误吗？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:27:23.797

*总结评论中的讨论：*

至少根据我的个人经验，eclipse 中的 BPEL Designer 插件似乎相当不稳定。然而，正如 myrpap 所发现的，它似乎在 Helios 中运行良好，因此一种解决方案是使用该版本而不是 Juno。

我建议的选项是完全跳过可视化编辑器并直接编辑代码。要设置变量的类型，必须将适当的元素和名称空间定义添加到流程定义中。结果应该看起来像这样：

```
<process
    name="WhileSample"
    targetNamespace="http://while.bpel.tps"
    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ns1="http://www.w3.org/2001/XMLSchema" >
    <import .../>
    <partnerLinks... />
    <variables>
        <variable name="iterator" type="ns1:int"/>
    </variables>
    <!-- main sequence goes here -->
</process> 
```

# magento - Magento 1.7.2 - 在 Admin、Sales、Order 中添加自定义字段

> ID：14757362
> 
> 赞同：0
> 
> 时间：2013-02-07T17:34:59.617
> 
> 标签：magento, magento-1.7, ecommerce-sales

我正在关注本教程：[http](http://www.excellencemagentoblog.com/magento-create-custom-payment-method) ://www.excellencemagentoblog.com/magento-create-custom-payment-method 。在第 2 步结束时，我应该在 Admin=>Sales=>Order 上看到我的字段，但我什么也看不到。

在 sales_flat_quote_payment 中，我可以看到该`telefono_no`字段，也可以在其中看到`sales_flat_order_payment`。当我买东西时，Magento 会将手机数据保存`telefono_no`在数据库中。无论如何，我的 mysql4-install-0.1.0.php 是：

```
$install = $this;
$install->startSetup();

$install->run("
    ALTER TABLE `".$install->getTable('sales/quote_payment')."` ADD `telefono_no` VARCHAR(7) NOT NULL DEFAULT '0000000';
    ALTER TABLE `".$install->getTable('sales/order_payment')."` ADD `telefono_no` VARCHAR(7) NOT NULL DEFAULT '0000000';
");

$install->endSetup(); 
```

在我的 config.xml 我有：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Xs_Pago>
            <version>0.1.0</version>
        </Xs_Pago>
    </modules>
    <global>
        <fieldsets>
            <sales_convert_quote_payment>
                <telefono_no>
                    <to_order_payment>*</to_order_payment>
                </telefono_no>
            </sales_convert_quote_payment>
        </fieldsets>
    </global>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:49:05.923

关于的代码应该只将字段添加到数据库中，并在下订单时将值从 quote_payment 复制到 order_payment。

该代码不会显示任何信息，在您引用的示例中显示信息的原因是因为`Mage_Payment_Block_Info`

```
<?php
class Excellence_Pay_Block_Info_Pay extends Mage_Payment_Block_Info
{
    protected function _prepareSpecificInformation($transport = null)
    {
        if (null !== $this->_paymentSpecificInformation) {
            return $this->_paymentSpecificInformation;
        }
        $info = $this->getInfo();
        $transport = new Varien_Object();
        $transport = parent::_prepareSpecificInformation($transport);
        $transport->addData(array(
            Mage::helper('payment')->__('Check No#') => $info->getCheckNo(),
            Mage::helper('payment')->__('Check Date') => $info->getCheckDate()
        ));
        return $transport;
    }
} 
```

看看[@Magento 自定义“订单”属性/管理员输入和显示](https://stackoverflow.com/questions/14616499/magento-custom-order-attribute-admin-input-and-display/14617712#14617712)

# javascript - 上传前使用 Javascript 拆分多文件帖子

> ID：14757363
> 
> 赞同：6
> 
> 时间：2013-02-07T17:35:03.883
> 
> 标签：javascript, html, upload

我了解多文件上传的 HTML/PHP 方面，但我想我所追求的是一个 Javascript 解决方案，它将文件数组 pre-post 分离并单独将文件发送到单独的 PHP 程序以接收上传和成功/在继续之前失败反馈。（即：文件[0] -> POST -> 成功 -> 文件 [1] -> POST -> 成功 -> 等...）

这是我现在用于单个文件的内容 -

```
 function upload(file){
        var data = new FormData();
        data.append("file", document.getElementById(file).files[0]);
        var xmlHTTP = new XMLHttpRequest();
        xmlHTTP.open("POST", "uploader.php");
        xmlHTTP.send(data);
    } 
```

我意识到最简单的方法是创建多个文件字段，但是我想做的是使用`<input type="file" multiple>`HTML5 一次批量选择文件列表。如果我只能用 Javascript 分隔文件，那么循环上述脚本并`onreadystatechange`每次报告成功/失败将是一件简单的事情。

有任何想法吗？

编辑：
原谅我的狭隘视野，这非常简单！这是我的完整代码，以防它帮助别人。

```
<html>
<head>
    <script language="Javascript">
    function multiupload(file){
    count = 0;
    maxcount = document.getElementById(file).files.length;
    alert(maxcount);
    upload(file,count);
    }

    function upload(file,count){
        var data = new FormData();
        data.append("file", document.getElementById(file).files[count]);
        var xmlHTTP = new XMLHttpRequest();
        xmlHTTP.open("POST", "uploader.php");
        xmlHTTP.onreadystatechange=function(){
            if (xmlHTTP.readyState == 4 && xmlHTTP.status == 200){
            count = count+1;
            if(count<maxcount){
            upload(file,count);
            }
            }
        }
        xmlHTTP.send(data);
    }
    </script>
</head>
<body>
    <div id="result"></div>
    <form method="post" action="">
        <input type="file" name="file" id="file" multiple>
        <input type="button" name="submit" value="Upload" onclick="multiupload('file');void(0);">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:12:10.913

要查看有多少文件，请使用`document.getElementById(file).files.length`. 一旦你循环了很多次，你就上传了所有的文件！这是我的示例：

```
<html>
<head>
<script language="Javascript">
function multiupload(file){
count = 0;
alert(document.getElementById(file).files.length);

}

</script>
</head>
<body>
    <form method="post" action="" enctype="multipart/form-data">
    <input type="file" name="file" id="file" multiple>
    <input type="button" name="submit" value="Upload" onclick="multiupload('file');void(0);">
</form>
</body>
</html> 
```

（来源：[https](https://developer.mozilla.org/en-US/docs/DOM/FileList) ://developer.mozilla.org/en-US/docs/DOM/FileList ）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:41:56.730

试试[这个](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)。您可以开始在成功处理程序中上传下一个文件。这样你就可以做 files[0] -> POST -> Success -> files [1](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery) -> POST -> Success

# jquery - 拖放导航

> ID：14757366
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:35:14.857
> 
> 标签：jquery

我正在寻找为我的网站创建拖放导航。这个想法是获取一个标题（即，关于我们、家庭、联系方式等）并将其拖放到一个空间中，然后将您带到不同的页面（有点像[http://www.carbonstudio.co。 uk/](http://www.carbonstudio.co.uk/) ) 我喜欢这个 jquery，但我不知道如何开始这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:36:46.950

要使用拖放，您可以使用[jQuery UI draggable](http://jqueryui.com/draggable/)

您需要使用拖放的唯一代码是：

```
$( "#draggable" ).draggable(); 
```

要使用[jQuery UI Droppable，请参阅此链接](http://jqueryui.com/droppable/)

比一个例子是：

```
$( "#draggable" ).draggable();
$( "#droppable" ).droppable({
  drop: function( event, ui ) {
    $( this )
      .addClass( "ui-state-highlight" )
      .find( "p" )
        .html( "Dropped!" );
  }
}); 
```

# woocommerce - 如何禁用woocommerce产品详细信息页面中的数量字段？

> ID：14757373
> 
> 赞同：37
> 
> 时间：2013-02-07T17:35:42.620
> 
> 标签：woocommerce

我需要在产品详细信息页面上的 Woocommerce 中隐藏“数量”字段（在添加到购物车之前输入数量），并且只显示“添加到购物车”按钮，然后将数量 1在购物车中。原因是因为我根据重力形式收集数量。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-12-16T03:11:19.653

*   编辑您的产品。
*   点击“库存”。
*   选中“单独出售”复选框

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-06-20T02:37:37.990

The safest way is to use WordPress builtin hook or filter

```
/**
 * @desc Remove in all product type
 */
function wc_remove_all_quantity_fields( $return, $product ) {
    return true;
}
add_filter( 'woocommerce_is_sold_individually', 'wc_remove_all_quantity_fields', 10, 2 ); 
```

You can also remove Quantity selector in other product type, you can found our more here [http://www.sutanaryan.com/how-to-remove-product-quantity-selectors-woocommerce/](http://www.sutanaryan.com/how-to-remove-product-quantity-selectors-woocommerce/)

**Please be warned:** using this option effictively makes it impossible to have a product more than once in your shopping cart. Subsequently clicking "Add to cart" will trigger a warning that this product can only be in your cart once. This might not be desirable for everyone.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-02-15T09:07:57.153

[![在此处输入图像描述](../Images/026c1f2148f498bc1dd4f68d0b79dcf7.png)](https://i.stack.imgur.com/XTOay.png)

无需使用插件或编辑 function.php，只需检查上图中显示的选项即可。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-15T12:53:19.253

```
.quantity, .product-quantity{display:none;} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-09T12:59:57.763

我找到了一种简单的方法，只需在产品单页中进行操作，并将数量计数器保存在购物车中。只需将以下代码放入functions.php

```
add_action( 'wp_head', 'quantity_wp_head' );
function quantity_wp_head() {
if ( is_product() ) {
    ?>
<style type="text/css">.quantity, .buttons_added { width:0; height:0; display: none; visibility: hidden; }</style> 
```

```
<?php }
} 
```

您可以在此处查看 woocommerce 文档：http: [//docs.woothemes.com/document/remov-product-content-based-on-category/](http://docs.woothemes.com/document/remov-product-content-based-on-category/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-08T18:23:48.263

有一个免费插件可以删除可能对您有用的数量选择器。 [http://wordpress.org/extend/plugins/woocommerce-remove-quantity-fields/](http://wordpress.org/extend/plugins/woocommerce-remove-quantity-fields/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-31T15:59:19.000

不需要插件，例如您可以使用 css 隐藏它。但是 woocommerce 只允许您销售 1 件产品，而无需选择将更多相同商品添加到购物车中。看看 woocommerce-> 设置。都在那里。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-09T19:59:09.427

您还可以通过**将两个数量都设置为 1 来**[**`woocommerce_quantity_input_min`**](https://woocommerce.github.io/code-reference/files/woocommerce-includes-wc-template-functions.html#source-view.1719)使用和[**`woocommerce_quantity_input_max`**](https://woocommerce.github.io/code-reference/files/woocommerce-includes-wc-template-functions.html#source-view.1718)钩子。

 **实际上，在模板中，如果**min**和**max**具有相同的值`/woocommerce/global/quantity-input.php`，数量字段将自动隐藏。

 ****```
// hides the quantity field on the product page
add_filter( 'woocommerce_quantity_input_min', 'hide_woocommerce_quantity_input', 10, 2 );
add_filter( 'woocommerce_quantity_input_max', 'hide_woocommerce_quantity_input', 10, 2 );
function hide_woocommerce_quantity_input( $quantity, $product ) {
    // only on the product page
    if ( ! is_product() ) {
        return $quantity;
    }
    return 1;
} 
```

*该代码已经过测试并且可以工作。将它添加到您的活动主题的functions.php。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-06T14:48:14.220

您需要编辑的模板是`single-product/add-to-cart/variation-add-to-cart-button.php`.

因此，您可以简单地在您自己的主题中复制此模板并对其进行编辑以删除数量字段。它会变成这样：

```
<?php
/**
 * Single variation cart button
 *
 * @see     http://docs.woothemes.com/document/template-structure/
 * @author  WooThemes
 * @package WooCommerce/Templates
 * @version 2.5.0
 */
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

global $product;
?>
<div class="woocommerce-variation-add-to-cart variations_button">
    <button type="submit" class="single_add_to_cart_button button alt"><?php echo esc_html( $product->single_add_to_cart_text() ); ?></button>
    <input type="hidden" name="add-to-cart" value="<?php echo absint( $product->id ); ?>" />
    <input type="hidden" name="product_id" value="<?php echo absint( $product->id ); ?>" />
    <input type="hidden" name="variation_id" class="variation_id" value="0" />
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-13T13:48:45.647

这个问题的其他答案没有处理一个边缘情况，woocommerce 的“单独销售”选项有效地删除了数量输入，但防止将相同的产品多次添加到购物车中

在您拥有具有自定义属性的产品的用例中，您不希望数量可编辑，但您仍希望允许用户将相同的产品添加到具有不同属性的购物车中，则“单独出售”选项不起作用

在这种情况下你需要的是这个过滤器

```
add_filter( 'woocommerce_cart_item_quantity', function ( $qty, $item_key, $item ) {
    if ( ! empty( $item['custom_data'] ) ) { //Here check for your custom attribute
        return sprintf( '1 <input type="hidden" name="cart[%s][qty]" value="1" />', $item_key );
    }
    return $qty;
}, 10, 3 ); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-21T13:25:23.293

正如此处其他答案所解释的那样，将产品（或整个商店）设置为“单独销售”现在对我有用，但我还找到了另一个解决方案：隐藏特定页面 ID 上的数量字段。如果有人出于某种原因希望该字段显示在某些页面而不是其他页面上，请考虑以下替代方法：

```
.page-id-11111 .woocommerce .quantity .qty {
    Display:None!important;
} 
```

这将允许人们多次添加到购物车，并在结帐时编辑数量，同时仍然隐藏产品简码/页面上的数量字段。更多信息：[从 Woocommerce 中删除数量字段，而不阻止添加多个购物车？](https://stackoverflow.com/questions/60917152/remove-quantity-field-from-woocommerce-without-preventing-multiple-cart-additio)（我已经重新设计了该站点，因此我不再需要此解决方案，但这可能对某人有所帮助。）

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2016-09-24T14:38:39.770

很简单，在 woocommerce中`woocommerce\includes\abstracts\abstract-wc-product.php`查找文件`abstract-wc-product.php`

在页面中找到以下代码

```
$availability = sprintf( __( '%s in stock', 'woocommerce' ), $this->get_total_stock() ); 
```

将此代码替换为

```
$availability = sprintf( __( '%s in stock', 'woocommerce' ),''); 
```******

# windows-8 - Microsoft Pubcenter 广告未显示 Windows 商店应用程序

> ID：14757375
> 
> 赞同：1
> 
> 时间：2013-02-07T17:35:50.287
> 
> 标签：windows-8, app-store, ads

我在 2 个月前在 Windows 商店提交了我的 Windows 8 Metro 应用程序。在我的应用程序中，我包含了广告的一部分，它将显示。但在 5 天之前，该广告将不会在我的应用程序中显示......我找不到任何解决方案......

帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:14:41.713

广告仅在存在时才会出现，如果您所在地区没有广告，则不会在应用中显示广告。我确定您有展示次数，您可以在您的 pubcenter 帐户上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:52:42.733

确保您已根据 pubcenter 中的设置定义了添加高度和宽度

# python - 为什么我的 Python 参数没有解包？

> ID：14757379
> 
> 赞同：1
> 
> 时间：2013-02-07T17:36:07.013
> 
> 标签：python, argument-passing

我对[解包参数列表](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)有点困惑。我正在尝试以编程方式制作 XSL-FO 文件，因此需要在文件中的某个位置插入可变数量的元素。当然，我可以通过其他方式（XML/XSLT、其他 XML 方法等）执行此操作，但我想知道为什么这不起作用，因为我对 Python 的基本知识可能有点生疏。就在“RIGHT HERE”处，我试图将我的 column_elms 列表插入为可变数量的参数。请注意，这不需要一个列表，并且如果我复制下一行的内容（`E("table-column...),`实际上，它确实会产生所需的输出（多个`table-column`元素。但是打开它，它只会给我一个`table-column`元素）怎么回事‽‽‽</p>

```
from lxml.builder import ElementMaker
from lxml import etree as ET  
COLUMNS = 8
E = ElementMaker(namespace='http://www.w3.org/1999/XSL/Format',
                 nsmap={'fo':"http://www.w3.org/1999/XSL/Format"})
column_elms = [E("table-column",{"column-width":"41mm"})] * COLUMNS
root = E("root",
         E("layout-master-set",
           E("simple-page-master",
             {"master-name":"label-sheet",
                "margin-left":"5mm",
                "margin-right":"5mm",
                "margin-top":"14mm",
                "margin-bottom":"14mm"},
             E("region-body"))),
         E("page-sequence",
           {"master-reference":"label-sheet"},
             E("flow", {"flow-name":"xsl-region-body"},
                E("table", *column_elms # **RIGHT HERE**
                                        # E("table-column",{"column-width":"41mm"}),
                    )))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:44:51.777

您正在创建一个包含*相同*对象`COLUMNS`副本的列表：

 *```
column_elms = [E("table-column",{"column-width":"41mm"})] * COLUMNS 
```

上面的代码没有调用`E()`8 次，它调用*一次*然后将 8 个引用放入列表中。

就好像你跑了：

```
column_elms = []
tcolumn = E("table-column",{"column-width":"41mm"})
for i in range(COLUMNS):
    column_elms.append(tcolumn) 
```

改用列表推导：

```
column_elms = [E("table-column",{"column-width":"41mm"}) for _ in xrange(COLUMNS)] 
```

它将评估`E(..)`每次循环运行的表达式。*

# java - 在循环中正确使用标签

> ID：14757380
> 
> 赞同：0
> 
> 时间：2013-02-07T17:36:24.237
> 
> 标签：java

我在我的应用程序中寻找错误，它看起来在这里：

```
for (int y=0; y<MAP_HEIGHT; y+=10) {
    for (int x=0; x<MAP_WIDTH; x+=10) {
        Label:

        for (GameResource res : resources) {
            //Checks if some object is already at given point
            if (res.getArea().contains(new Point2D.Float(x, y))) { 
                continue Label;
            }
        }

        if ((int)(Math.random()*200) == 0) {
            resources.add(new GameTree(x, y));
        }

        if ((int)(Math.random()*400) == 0) {
            resources.add(new GameMine(x, y));
        }
    }
} 
```

它创建地图。我检查了一下，看起来即使某个对象在给定点，尽管如此，资源还是被放置了。我是否正确使用了标签？如果使用点，我想进入 x-for 循环中的下一个迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:05:58.253

你也可以在没有任何标签的情况下这样做：

```
 for (int y=0; y<MAP_HEIGHT; y+=10) {
        for (int x=0; x<MAP_WIDTH; x+=10) {

            if (noResourcesAtPoint(resources, x, y))
            {
                if ((int)(Math.random()*200) == 0) {
                    resources.add(new GameTree(x, y));
                }

                if ((int)(Math.random()*400) == 0) {
                    resources.add(new GameMine(x, y));
                }
            }
        }
    }       

private boolean noResourcesAtPoint(GameResources resources, int x, int y)
{
    for (GameResource res : resources)
    {
        if (res.getArea().contains(new Point2D.Float(x,y)))
        {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:38:07.350

如果你想进入 x 循环的下一次迭代，你的标签应该在 x 循环上：

```
Label: for (int x = 0; x < MAP_WIDTH; x += 10) 
```

# java - Java 最简单的跨启动保存数据的方法

> ID：14757381
> 
> 赞同：-3
> 
> 时间：2013-02-07T17:36:25.713
> 
> 标签：java, persistence

刚刚学习java，需要构建一个可以在启动之间存储简单对象的程序。最简单的方法是什么？

因此，如果我将 10 个字符串添加到数组中，关闭程序，然后再次打开程序，我应该能够再次打印这 10 个对象。

我想我需要以某种方式存储这些对象。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:41:09.700

最简单的方法是使用 Serializable 虽然它是，恕我直言，最丑陋的方式。如果你的项目要发展，那将是一个巨大的障碍。

另一种方式是 XML，它不是很难使用。

SQLite 是轻量级、坚固且易于使用的。有关更多详细信息，请参见[此处](https://stackoverflow.com/a/593137/1527244)。

另一种方法是`Preferences`，但顾名思义，这些是用于简单的偏好，而不是用于实际数据或配置文件，因此它们不应包含太多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T17:39:57.547

我不知道什么对你来说容易，但序列化是最好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T17:39:26.790

最简单的方法：[序列化。](http://www.tutorialspoint.com/java/java_serialization.htm)在我看来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T17:38:25.357

您可以将它们存储在文本文件中，或使用 SQLite 或 SQL Express 等免费数据库工具来存储数据。使用文本文件可能是最简单的方法。

这是一个帮助您在文本文件中读/写的链接：[http ://www.javapractices.com/topic/TopicAction.do?Id=42](http://www.javapractices.com/topic/TopicAction.do?Id=42)

如果您需要更多帮助，请询问！

# entity - 当帖子大于 4KB 时，G-WAN MAX_ENTITY_SIZE 问题

> ID：14757387
> 
> 赞同：0
> 
> 时间：2013-02-07T17:36:33.220
> 
> 标签：entity, http-post, limit, g-wan

有人遇到过 MAX_ENTITY_SIZE 的问题吗？我现在和这个斗争了很长一段时间。我希望我只是在做一些愚蠢的事情，或者有人找到了解决方案。

我在 Ubuntu 64 位最新版本上使用 G-WAN 4.2.7。

这是一个测试用例。只需在 textarea 上粘贴任何文本，然后单击提交。如果它小于 4KB（或小于 3.2KB），它将正常工作。如果它大于 4KB，它将返回 404 未找到，但它应该可以工作，因为我将 MAX_ENTITY_SIZE 设置为 200KB。

```
#include "gwan.h" // G-WAN exported functions
#include <string.h>

int main(int argc, char *argv[])
{
    xbuf_t *reply = get_reply(argv);    
    int *entity = (int*)get_env(argv, MAX_ENTITY_SIZE);

    char *text = NULL;
    get_arg("stext=", &text, argc, argv);
    if(text) // Check if text exist.
        xbuf_xcat(reply, "Text: %s<br/><br/>%d", text, strlen(text));

    static char form[] = 
        "<form method=\"post\">"
            "<textarea name=\"stext\"></textarea><br/>"
            "<input name=\"button\" type=\"submit\" value=\"Submit\" />"
        "</form><br/>Entity Size: %d";
    xbuf_xcat(reply, form, *entity);

    return 200;
} 
```

不要忘记增加 MAX_ENTITY_SIZE 限制：

```
int init(int argc, char *argv[])
{
   int *entity = (int*)get_env(argv, MAX_ENTITY_SIZE);
   *entity = 200 * 1024;
   return 0;
} 
```

更新：

在 Ubuntu 10.10 上测试过同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:45:13.737

我遇到了同样的问题。

根据我自己的测试，您可以 POST 最多 3663 字节的文件，但任何 POST 3664 字节及更大的文件都将返回 404，无论 MAX_ENTITY_SIZE 值如何。不知道为什么使用 3663 的任意限制...

应该可以编写一个自定义处理程序来解决这个问题，但这充其量是一个烦恼。希望我们能尽快得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:53:25.303

G-WAN v4.2.19 附带了经过**1.7 MiB 文件上传**`entity.c`测试的增强`entity_size.c`示例。试一试。

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T09:37:08.690

它生成 HDL_HTTP_ERRORS。所以没有办法执行servlet。**

# r - 在 ggplot2 中使用不同的调色板进行过度绘图

> ID：14757394
> 
> 赞同：0
> 
> 时间：2013-02-07T17:37:01.753
> 
> 标签：r, ggplot2

亲爱的堆栈溢出读者，

我有一个数据集，我有“原始”数据，并且我还为此计算了某种平滑函数。然后我想将原始数据绘制为点，将平滑绘制为一条线。这适用于以下情况：

```
Loc <- seq(from=1,to=50)
Loc <- append(Loc,Loc)
x <- seq(from=0,to=45,by=0.01)
Val <- sample(x,100)
labels <- NULL
labels[1:50] <- 'one'
labels[51:100] <- 'two'

x2 <- seq(from=12,to=32,by=0.01)
Val2 <- sample(x2,100)
raw <- data.frame(loc=Loc,value=Val,lab=labels)
smooth <- data.frame(loc=Loc,value=Val2,lab=labels)

pl <- ggplot(raw,aes(loc,value,colour=lab)) + geom_point() + geom_line(data=smooth)
print(pl) 
```

结果如下所示：

![在此处输入图像描述](../Images/9f41110af37b46315923c88af6f3df05.png)

问题是我的实际数据包含太多数据点，使用相同的调色板会非常混乱（点和线之间的差异几乎无法区分）。最好，我会让 geom_lines() 稍微暗一些。我已经尝试过`scale_colour_hue(l=40)`，但这会导致 geom_points() 也更暗。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:01:21.283

我没有给你一个完美的答案，但我有一个有效的答案。您可以通过将线条拆分为单独的几何图形来单独控制线条的颜色，如下所示：

```
ggplot(raw,aes(loc,value)) + 
geom_point(aes(col=lab)) + 
geom_line(data=smooth[smooth$lab=="one",], colour="blue", size=1) + 
geom_line(data=smooth[smooth$lab=="two",], colour="black", size=1) 
```

![图一](../Images/81d3cd66fa02b7fc65e2f09db9bf0489.png)

这样做的缺点是您必须手动指定行选择，但优点是您可以手动指定每行的视觉属性。

另一种选择是使用相同的调色板，但使线条更大且部分透明，如下所示：

```
ggplot(raw,aes(loc,value,colour=lab)) + 
geom_point() + 
geom_line(data=smooth, size=2, alpha=0.5) 
```

![图 2](../Images/4f64dc97d2b71ce169ad4a50c1134bc8.png)

您应该能够从这里自定义内容以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:49:04.443

您可以尝试通过在 中设置`alpha=`值来使点变亮，而不是使线条变暗`geom_point()`。

```
pl <- ggplot(raw,aes(loc,value,colour=lab)) + geom_point(alpha=0.5) + 
      geom_line(data=smooth)
print(pl) 
```

![在此处输入图像描述](../Images/e93bc04ab22c021130065a3429d07fbe.png)

# mysql - 将行切换到列以生成报告 - MySql

> ID：14757400
> 
> 赞同：0
> 
> 时间：2013-02-07T17:37:16.327
> 
> 标签：mysql, report

我有一个简单的数据库（使用 MySql），我需要用它来生成报告。

我有一个表，其中包含用户提交的每周日志。这些日志中的每一个都有状态，例如：已提交、已批准等。

```
日志提交表
+----+--------+--------+---------+--------+
| 编号 | 周ID | 用户名 | 信息... | 状态 |
+----+--------+--------+---------+--------+
| 0 | 0 | 1 | 数据... | 0 |
| 1 | 0 | 2 | 数据... | 1 |
| 1 | 0 | 3 | 数据... | 1 |
| 2 | 1 | 1 | 数据... | 0 |

```

我还有一张记录周数的表格。

```
WeekManager 表
+----+------------+---------+---------+
| 编号 | 开始日期 | 结束日期 | ... |
+----+------------+---------+---------+
| 0 | 日期1 | 日期2 | ... |
| 1 | 日期3 | 日期4 | ... |
| 2 | 日期5 | 日期6 | ... |

```

我需要一份报告，它将周显示为列以及用户表中的名称。它应该显示用户提交的每周日志的状态。例如，第 1 周的 Bob 提交的状态为 0。

```
报告
+--------+--------+--------+--------+--------+
| 姓名 | 第 1 周 | 第 2 周 | 第 3 周 | ... |
+--------+--------+--------+--------+--------+
| 鲍勃 | 0 | 1 | 0 | ... |
| 乔 | 1 | 1 | 1 | ... |
| 吉姆 | 0 | 0 | 0 | ... |

```

我在让这份报告工作时遇到了一些麻烦。我的主要障碍是增加了周数，因此报告的列数会有所不同。

这[在这里](https://stackoverflow.com/questions/1241178/mysql-rows-to-columns)有很大帮助，但是它只处理静态数量的行。我需要一些根据周数而变化的东西。我正在考虑使用某种循环来实现这一点，但是我不确定这是否可能。

任何帮助将不胜感激，谢谢。

用户表：

```
用户表
+----+------+---------+
| 编号 | 姓名 | ... |
+----+------+---------+
| 0 | ... | ... |
| 1 | ... | ... |
| 2 | ... | ... |

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:42:03.760

听起来您正在尝试将水平表转换为垂直表（如果您愿意，可以使用临时表）。使用 union all 按照上一篇文章执行此操作：[SQL 查询；水平到垂直](https://stackoverflow.com/questions/12501766/sql-query-horizontal-to-vertical)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:48:20.500

您的表结构并不完全清楚（例如，我看不到您从哪里得到`user name`）。

*MySQL 中枢轴*的基本设置使用聚合函数和`CASE`类似于以下的表达式：

```
select 
  l.userid,
  max(case when w.id =0 then l.state end) Week1,
  max(case when w.id =1 then l.state end) Week2,
  max(case when w.id =2 then l.state end) Week3
from LogSubmissions l
left join WeekManager w
  on w.id = l.weekid
group by l.userid 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/55991/3)。

编辑，如果您的周数未知，那么您可以使用准备好的语句来生成动态 sql：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when w.id = ',
      id,
      ' then l.state end) AS Week',
      id + 1
    )
  ) INTO @sql
FROM  WeekManager;

SET @sql = CONCAT('SELECT l.userid, ', @sql, ' 
                  from LogSubmissions l
                  left join WeekManager w
                    on w.id = l.weekid
                  group by l.userid');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/55991/6)

# sql - 具有大量查找列的表的最佳实践

> ID：14757413
> 
> 赞同：1
> 
> 时间：2013-02-07T17:37:39.323
> 
> 标签：sql, rdbms

好的，所以有一点背景......作为一名程序员优先，数据库设计经验有限，我犯了几个新手错误，即统一代码查找表和另一个表上的 EAV 实现。我目前正在尝试将它们改造成更多的传统 RDBMS，但我想绝对确定这次我做对了。

我的大问题表是一个包含 150 列左右的大表，其中包含我们必须向州报告的客户数据。这些数据中的大部分使用特定于状态的查找值，因此根据我当前的设计计划，我最终将获得 75-100 个 FK 到不同的查找表。

现在我们需要对这些数据进行报告，所以我需要能够轻松地引用每个属性的代码值和描述。我能想到的唯一选择是创建两个单独的视图（或者可能是一个大型视图），这将为我整理数据。创建和维护这似乎是一个相当乏味的过程，尤其是考虑到收集的数据可能会发生变化。如果这是标准做法，我可以做腿部工作，但我很好奇是否有更好的方法我只是不知道。

```
USE [TestCompany]
GO

/****** Object:  Table [CLI].[AttributesTable]    Script Date: 02/07/2013 15:01:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [CLI].[AttributesTable](
    [AttributesTableID] [int] NOT NULL,
    [ChartID] [int] NOT NULL,
    [AdmitCounty] [int] NULL,
    [AdmissionReason] [int] NULL,
    [Gender] [int] NULL,
    [Race] [int] NULL,
    [Occupation] [int] NULL,
    [MaritalStatus] [int] NULL,
    [Education] [int] NULL,
    [SpecialEducation] [int] NULL,
    [Impairment] [int] NULL,
    [Hispanic] [int] NULL,
    [HearingStatus] [int] NULL,
    [ExpectedPaysource] [int] NULL,
    [PublicAssistance] [int] NULL,
    [Dietary] [int] NULL,
    [EmploymentStatus] [int] NULL,
    [LivingArrangements] [int] NULL,
    [IncomeSource] [int] NULL,
    [LegalStatus] [int] NULL,
    [CommitType] [int] NULL,
    [EnrolledInSchool] [nchar](10) NULL,
    [GradePointAverage] [int] NULL,
    [EducationProgram] [int] NULL,
    [HIV] [int] NULL,
    [SelfHelpPrograms] [int] NULL,
    [MediationPrescribed] [int] NULL,
    [DischargeReason] [int] NULL,
    [DischargeReferral] [int] NULL,

 CONSTRAINT [PK_AttributesTable] PRIMARY KEY CLUSTERED 
(
    [AttributesTableID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AdmissionReason_Code] FOREIGN KEY([AdmissionReason])
REFERENCES [LKP].[AdmissionReasonCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AdmissionReason_Code]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_CommitType_Code] FOREIGN KEY([CommitType])
REFERENCES [LKP].[CommitTypeCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_CommitType_Code]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_Dietary_Code] FOREIGN KEY([Dietary])
REFERENCES [LKP].[DietaryCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_Dietary_Code]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_DischargeReason_Code] FOREIGN KEY([DischargeReason])
REFERENCES [LKP].[DischargeReasonCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_DischargeReason_Code]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_DischargeReferral_Code] FOREIGN KEY([DischargeReferral])
REFERENCES [LKP].[DischargeReferralCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_DischargeReferral_Code]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_Chart] FOREIGN KEY([ChartID])
REFERENCES [CLI].[Chart] ([ChartID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_Chart]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_CommitTypeCode] FOREIGN KEY([CommitType])
REFERENCES [LKP].[CommitTypeCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_CommitTypeCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_EducationCode] FOREIGN KEY([Education])
REFERENCES [LKP].[EducationCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_EducationCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_EducationProgramIndicatorCode] FOREIGN KEY([EducationProgram])
REFERENCES [LKP].[EducationProgramIndicatorCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_EducationProgramIndicatorCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_EmploymentStatusCode] FOREIGN KEY([EmploymentStatus])
REFERENCES [LKP].[EmploymentStatusCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_EmploymentStatusCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_GenderCode] FOREIGN KEY([Gender])
REFERENCES [LKP].[GenderCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_GenderCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_GPACode] FOREIGN KEY([GradePointAverage])
REFERENCES [LKP].[GPACode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_GPACode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_HearingStatusCode] FOREIGN KEY([HearingStatus])
REFERENCES [LKP].[HearingStatusCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_HearingStatusCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_HispanicCode] FOREIGN KEY([Hispanic])
REFERENCES [LKP].[HispanicCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_HispanicCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_HIVTestCode] FOREIGN KEY([HIV])
REFERENCES [LKP].[HIVTestCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_HIVTestCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_ImpairmentCode] FOREIGN KEY([Impairment])
REFERENCES [LKP].[ImpairmentCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_ImpairmentCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_IncomeSourceCode] FOREIGN KEY([IncomeSource])
REFERENCES [LKP].[IncomeSourceCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_IncomeSourceCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_LegalStatusCode] FOREIGN KEY([LegalStatus])
REFERENCES [LKP].[LegalStatusCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_LegalStatusCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_LivingArrangementCode] FOREIGN KEY([LivingArrangements])
REFERENCES [LKP].[LivingArrangementCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_LivingArrangementCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_MaritalStatusCode] FOREIGN KEY([MaritalStatus])
REFERENCES [LKP].[MaritalStatusCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_MaritalStatusCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_MedicationPrescribedCode] FOREIGN KEY([MediationPrescribed])
REFERENCES [LKP].[MedicationPrescribedCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_MedicationPrescribedCode]
GO

ALTER TABLE [CLI].[AttributesTable]  WITH CHECK ADD  CONSTRAINT [FK_AttributesTable_PaySourceCode] FOREIGN KEY([ExpectedPaysource])
REFERENCES [LKP].[PaySourceCode] ([CodeID])
GO

ALTER TABLE [CLI].[AttributesTable] CHECK CONSTRAINT [FK_AttributesTable_PaySourceCode]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:18:07.027

如果您最关心报告，您可能希望构建一个“报告”或“分析”数据库（通常使用 ETL 或[Extact/Transform/Load](http://en.wikipedia.org/wiki/Extract,_transform,_load)工具执行）。这些数据库通常是选择性地去规范化的——例如，您`'Male'`在报告表中没有对“性别”代码表的 fk 引用。实际程度根据需要变化，并且可能应该通过视图呈现，直到出现特定的性能级别问题。

但是，对于日常工作，例如您的“实时”数据是什么样的，您需要一种标准化的方法。
我假设`Chart`表格有类似`visitedOn`,`collectingCaregiverId`等的东西。任何重要的东西，（几乎）*总是*收集的，并且“静态”，都应该放在这个表格中。例如，种族在访问过程中不太可能发生变化（并且可以说应该是静态患者记录的一部分）。
任何有点“稀疏”但*经常*收集的东西可能需要放在“相关”表中。就像是：

```
Education_Status
=================
chart_id  -- fk reference to chart.id
school  -- fk reference to attribute-specific code table
program  -- see above
grade_point_average  -- DECIMAL(3, 2) 
```

... 等等。
任何完全可选且*很少*收集的东西都可能最终出现在 EAV 中。请注意，基于“区域”，这些设置可能不止一种；此外，这些也应尽可能“编码”：

```
Unusual_Symptom_Type
======================
id  -- autogen
name  -- varchar(20) (eg - 'Turning Blue', 'Allergic to Oxygen', etc)

Unusual_Symptom
====================
chart_id  -- fk reference to chart.id
unusual_symptom_type_id  -- fk reference to unusual_symptom_type.id
note -- varchar(20) (eg - 'Afternoon Sky', 'Combusts', etc) 
```

当然，您必须重新组装它以进行报告。这是“事务性”数据库固有的“弱点”——数据质量通常不错，更新也很简单，但将它们以“可读”格式组合在一起可能会很痛苦。尽可能构建视图，将相关区域连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:48:08.560

我认为视图，可能是较小的视图，是你能做的最好的事情。多少？根据您的情况和要求。您可以为每个报告或报告组创建一个视图。这一切都取决于...这是我的想法和将做的。仅供参考 - 我不是 DBA，而是开发人员。

# excel - Excel：另一个单元格中的值？

> ID：14757415
> 
> 赞同：1
> 
> 时间：2013-02-07T17:37:41.860
> 
> 标签：excel, excel-formula

我正在寻找一个 excel 公式来检查一个单元格中的值是否在另一个单元格中。我想知道是否在 B 列内的任何地方都可以找到 A 列的信息。

因此，由于 123 Promotions 列在 A1 和 B1 中，我希望 Excel 告诉我它是匹配的。

有办法吗？

例子：

```
Column A
ABC Co/123 Promotions
All About You, Inc
Andrew Smith

Column B
123 Promotions
All about You
Smith Inc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:03:40.167

您可以使用“ISNUMBER”和“FIND”的组合

```
ISNUMBER(FIND(B1,A1,1)) 
```

如果 B1 的值在 A1 某处，这将返回 true

# ios - 显示工具栏时UINavigationController内部的iOS自定义视图大小

> ID：14757416
> 
> 赞同：2
> 
> 时间：2013-02-07T17:37:42.703
> 
> 标签：ios, uinavigationcontroller, toolbar

我有一个非常简单的设置：A`UINavigationController`和`setToolbarHidden NO`. 所以自定义视图的容器在拥有的东西里面`UINavigationController`应该是导航栏底部到工具栏顶部的距离。 ![预期距离](../Images/5c75a3e1af9277573cd263abfed0b203.png)

但是，我得到的是（您可能可以通过查看半透明工具栏从屏幕截图中收集）从导航栏底部到屏幕底部的距离。

我已经在我的 中设置了`autoresizingMask`to ，但它从来没有得到考虑工具栏高度的“正确”答案。我可以计算工具栏高度并将其从视图高度中减去，从而重置自定义视图的高度，但是当设备旋转时，真正的问题再次出现。这似乎是一种自动调整大小的问题，我很困惑为什么不考虑工具栏。`UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth``viewDidAppear`

任何提示如何调整自定义视图的大小，考虑工具栏占用的空间？

几点注意事项：

1.  我正在以编程方式创建所有这些，而不是使用 IB

2.  我已经在 Symbiote 中检查过它，它非常可靠（至少对我而言），它验证了我可以通过`NSLog`输出看到和测量的内容

我看到应用程序一直在这样做，所以我觉得我一定错过了一些东西。

代码：

```
// Code translated from RubyMotion

view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
self.tableView = [[UITableView alloc] initWithFrame:view.bounds style:UITableViewStylePlain];
self.tableView.accessibilityLabel = @"events table";
self.tableView.backgroundColor = [UIColor whiteColor];
[self.tableView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];

self.tableView.dataSource = self;
self.tableView.delegate = self;
self.tableView.tableHeaderView = searchBar; // assume I created a searchbar

[self.view addSubview:self.tableView]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T03:40:39.800

当您使工具栏半透明时，内容视图会自动调整大小以占用一直到栏底部的空间，这与您希望通过它看到某些东西的事实相对应。当您使工具栏不透明时，内容视图将调整大小以适合绘图中箭头指示的空间。

所以在你的某个地方`viewDidLoad`，你可以设置：

```
self.navigationController.toolbar.translucent = NO; 
```

虽然真的，这应该是默认值，所以你必须将它设置到`YES`某个地方，如果不在这个视图控制器中，那么也许在父级中？

# wpf - WPF MVVM - 绑定仅适用于初始值

> ID：14757417
> 
> 赞同：0
> 
> 时间：2013-02-07T17:37:47.603
> 
> 标签：wpf, mvvm, valueconverter

我正在开发基于 MVVM 模式的 WPF 应用程序。

我有一个 RichTextBox，如下所示：

```
<RichTextBox Name="HtmlRichTextBox">
    <FlowDocument>
        <Paragraph>
            Some Test
        </Paragraph>
    </FlowDocument>
</RichTextBox> 
```

和一个文本框：

```
<TextBox Text="{Binding ElementName=HtmlRichTextBox, Converter={StaticResource ResourceKey=RichTextBoxContentConverter}, Mode=OneWay}"/> 
```

眼尖的人会注意到我正在使用 ValueConverter 将 RichTextBox 的内容转换为绑定到 TextBox 的 Text 属性的文本。ValueConverter 的代码在这里：

```
 <ValueConversion(GetType(RichTextBox), GetType(String))> _
  Public Class RichTextBoxContentConverter : Implements IValueConverter

    Public Function Convert(value As Object, targetType As Type, parameter As Object, culture As Globalization.CultureInfo) As Object Implements IValueConverter.Convert
      Dim returnValue As String = String.Empty
      If TryCast(value, RichTextBox) IsNot Nothing Then
        Dim rtb As RichTextBox = CType(value, RichTextBox)
        Dim rtbTextRange As New TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd)
        If Not rtbTextRange.IsEmpty Then returnValue = rtbTextRange.Text
      End If
      Return returnValue
    End Function

    Public Function ConvertBack(value As Object, targetType As Type, parameter As Object, culture As Globalization.CultureInfo) As Object Implements IValueConverter.ConvertBack
      Throw New NotImplementedException()
    End Function
  End Class 
```

问题是第一次加载视图时正确设置了 TextBox Text 属性，但是对 RichTextBox 内容的任何后续更改都不会更新 TextBox。

如果我使用一个简单的示例，将一个 TextBox 的 Text 属性绑定到另一个可以正常工作的文本框，这表明可能是 ValueConverter 导致了问题。我假设在某个地方我没有通知目标源属性的更改，但我无法弄清楚我哪里出错了。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:49:28.233

您正在绑定到元素`HtmlRichTextBox`，而不是它的内容。由于该元素永远不会更改为不同的实例，因此它永远不会更新，并且您的转换器永远不会被调用。

为了获得您期望的行为，您需要绑定到它的*内容*而不是实际的元素（因为元素本身永远不会改变，只有它的内容会改变）。这实际上可能是`RichTextBox`控件的问题，但有一些解决方案：请参阅[Richtextbox wpf binding](https://stackoverflow.com/questions/343468/richtextbox-wpf-binding)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:50:02.527

你的绑定是对`RichTextBox`自身的，它永远不会改变。您需要绑定到更改应触发绑定更新的事物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:19:52.353

您可以按照最初的意愿使用它。它只需要显式更新。我与您分享我的实现。我试过了，它奏效了。抱歉，我是在 C# 中而不是在 VB 中做到的。

XAML：

```
 <RichTextBox Name="HtmlRichTextBox" TextChanged="HtmlRichTextBox_OnTextChanged"> 
```

代码隐藏中的事件处理程序：

```
 if (this.MyTextBox != null)
        {
            BindingExpression bindingExpr = this.MyTextBox.GetBindingExpression(TextBox.TextProperty);
            bindingExpr.UpdateTarget();
        } 
```

MyTextBox 是绑定到 RichTextBox 的文本框的名称。我希望它可以帮助你。

# excel - Excel 在单元格文本为真时执行

> ID：14757418
> 
> 赞同：0
> 
> 时间：2013-02-07T17:37:53.267
> 
> 标签：excel, vba

我有一个像这样设置的电子表格：

```
Col A
-----
TEXT 1
McCartney, Paul
Lennon, John
Harrison, George
Starr, Ringo
TEXT 2
Lee, Geddy
Lifeson, Alex
Peart, Neil 
```

只要您尚未达到“TEXT 2”，就想在 BI 列中添加文本。例如，我的数据可能如下所示：

```
Col A               Col B
-----               -----
TEXT 1              
McCartney, Paul     Beatles
Lennon, John        Beatles
Harrison, George    Beatles
Starr, Ringo        Beatles
TEXT 2              
Lee, Geddy          Rush
Lifeson, Alex       Rush
Peart, Neil         Rush 
```

我尝试了“Do While”和“If ... Then ... End If”的几种组合，但没有任何效果。我该如何编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:00:49.963

您不需要 VBA - 只需将此公式放入`B2`：

```
=IF(ISERROR(VLOOKUP("TEXT 2",$A$2:A2,1,0)),"Beatles","") 
```

并自动填充，直到 column 中的数据结束`A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:42:59.567

> 我在 A 列中有三个“标题”行：Open、Gain 和 Limited。这些名称是静态的。它们之间的行数总是不同的。这些行之间的数据是人名，格式为“Last, First”。当行位于“打开”行和“增益”行之间时，我试图在末尾添加一列“打开”。然后我想把“Gain”这个词放在“Gain”和“Limited”行之间的这个新列中。从那里开始，新列将显示“有限”。我希望这是有道理的。– Mr_Thomas 3 小时前

这是你正在尝试的吗？

将此公式放入单元格`B1`并复制下来

`=IF(ISNA(INDEX(MATCH("Limited",$A$1:$A1,0 ),1,1)),IF(ISNA(INDEX(MATCH("Gain",$A$1:$A1,0 ),1,1)),IF(ISNA(INDEX(MATCH("Open",$A$1:$A1,0 ),1,1)),"","Open"),"Gain"),"limited")`

**截屏**

![在此处输入图像描述](../Images/174446183611b5e1a73f4c9876052a6d.png)

# sql - 查找来自不同表的对象之间的最小距离

> ID：14757423
> 
> 赞同：3
> 
> 时间：2013-02-07T17:38:12.200
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有两个表，都包含具有 XY 坐标的对象：

表 A：

```
ID_A | X    | Y
-----|------|------
100  | 32.2 | 25.6
101  | 36.2 | 22.1
102  | 31.7 | 39.2
103  | 42.7 | 15.6
104  | 24.5 | 29.9 
```

表 B：

```
ID_B | X    | Y
-----|------|------
200  | 55.3 | 25.1
201  | 21.5 | 54.2
202  | 67.3 | 66.6
203  | 23.5 | 55.4
204  | 41.1 | 24.5
205  | 42.4 | 62.6
206  | 26.8 | 23.6
207  | 63.2 | 25.6
208  | 35.6 | 11.1
209  | 74.2 | 22.2
210  | 12.2 | 33.3
211  | 15.7 | 44.4 
```

对于表 A 中的每个对象，我想在表 B 中找到最近的对象（对象之间的距离最小）。所以结果应该是这样的（这里的距离是随机的......）：

```
ID_A | ID_B | DISTANCE
-----|------|---------
100  | 203  | 12.5
101  | 203  | 11.1
102  | 211  | 16.5
103  | 205  | 14.2
104  | 209  | 17.7 
```

物体之间的距离：

```
SQRT( (A.X-B.X)*(A.X-B.X) + (A.Y-B.Y)*(A.Y-B.Y) ) 
```

所以我做了这个查询：

```
SELECT DISTINCT A.ID_A
     , FIRST_VALUE (B.ID_B) OVER (PARTITION BY A.ID_A ORDER BY SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y)) ASC) AS ID_B
     , FIRST_VALUE (SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y))) OVER (PARTITION BY A.ID_A ORDER BY SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y)) ASC) AS DISTANCE
FROM TableA A, TableB B 
```

它应该像它应该的那样工作，但问题是两个表都有大量的行（超过 500k）并且这个查询相当慢（并且可能非常低效）。

如何优化这个查询？（我正在使用 Oracle SQL）提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:56:09.530

就像提到的 dasblinkenlight 一样，由于距离平方最短的行也将是距离最短的行，因此您不需要为每个行组合计算平方根。

我认为你最好的办法是尝试减少执行的计算总数，所以也许这样的事情会加快速度：

```
SELECT ID_A,ID_B,SQRT(DISTANCE_SQUARED) DISTANCE FROM (
  SELECT ID_A,ID_B,DISTANCE_SQUARED,MIN(DISTANCE_SQUARED) OVER (PARTITION BY ID_A) MIN_DS FROM (
    SELECT A.ID_A,B.ID_B,
    POWER(A.X-B.X,2)+POWER(A.Y-B.Y,2) DISTANCE_SQUARED
    FROM
    TABLE_A A,
    TABLE_B B
  )
)
WHERE DISTANCE_SQUARED=MIN_DS 
```

这可能会返回多个匹配项（如果 TABLE_B 中的多于 1 行与 TABLE_A 中的一行具有相同的距离）......不确定这是否可以接受。

如果不经常写入表并且您需要经常运行此查询，则最好预先计算此信息并将其存储在另一个表中，例如 TABLE_C。当/如果将一行添加或编辑到任一表时，您可以根据另一个表中的 500k 检查该行并在必要时更新 TABLE_C，而不是每次运行查询时都需要检查 500k * 500k 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:06:28.920

嗯，我想我更喜欢在 CTE 中“预先计算”距离。我知道优化器应该能够缓存某些值，但我不确定它的性能如何。另外，这使得基于“距离”的维护变得更容易。不幸的是，您没有能够最初排除某些值的“最大距离”，这意味着这*总是*会慢一些。

```
WITH Distances (id_a, id_b, distance_squared, index) as 
                   (SELECT a.id_a, b.id_b, 
                           POWER((a.x - b.x), 2) + POWER((a.y - b.y), 2) d,
                           ROW_NUMBER() OVER(PARTITION BY a.id_a, ORDER BY d ASC)
                    FROM TableA a
                    CROSS JOIN TableB b)
SELECT id_a, id_b,
       SQRT(distance_squared)
FROM Distances
WHERE index = 1 
```

使用`FIRST_VALUE()`会导致“最小”值重复 - 删除它们可以免除您对 的需要`DISTINCT`，这可能会有所帮助。

* * *

# 编辑：

如果您有“最大距离”，请尝试以下操作：

```
WITH Distances (id_a, id_b, distance_squared, index) as 
                   (SELECT a.id_a, b.id_b, 
                           POWER((a.x - b.x), 2) + POWER((a.y - b.y), 2) d,
                           ROW_NUMBER() OVER(PARTITION BY a.id_a, ORDER BY d ASC)
                    FROM TableA a
                    JOIN TableB b
                      ON (b.x > a.x - @distance AND b.x < a.x + @distance)
                         AND (b.y > a.y - @distance AND b.y < a.y + @distance)
                    WHERE d < POWER(@distance, 2))
SELECT id_a, id_b,
       SQRT(distance_squared) as distance
FROM Distances
WHERE index = 1 
```

这*可能*能够在坐标值上使用索引，尽管我不确定（`TableB`边，可能，`TableA`边......不确定。如有必要，交换比较）。
这里注意两点：

1.  所有这一切都假设您在平面笛卡尔平面上进行操作。如果这是针对地球表面上的点，则方程要复杂得多；如果你看的话，这里有很多问题/答案涵盖了它们。
2.  您仍然必须获取/使用平方根距离，否则您将有东西隐藏在网格正方形的角落中，这实际上是“超出”距离（大约 40%）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:17:01.550

如果您的表没有相应/匹配的行，则根本不要使用 JOIN。使用两个单独的查询。否则，您的输出将包含 500K * 500K 行。我假设您的表格在我的示例中是相关的，我所做的只是试图提供帮助。

请参阅下面的外部连接。

除非您在将最终查询示例复制到您的帖子中时出错，否则您的查询会运行很长时间，因为您将结果加倍而忘记连接表 a 和 b。你得到的是笛卡尔积：

```
SELECT DISTINCT A.ID_A
 , FIRST_VALUE (B.ID_B) OVER (PARTITION BY A.ID_A ORDER BY SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y)) ASC) AS ID_B
 , FIRST_VALUE (SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y))) OVER (PARTITION BY A.ID_A ORDER BY SQRT((A.X-B.X)*(A.X-B.X)+(A.Y-B.Y)*(A.Y-B.Y)) ASC) AS DISTANCE
 FROM TableA A, TableB B
WHERE a.id = b.id -- You missed this
/ 
```

除此之外，您正在使用 DISTINCT。尝试添加 join 和 drop distinct 并查看差异。选择所有行并注意执行/经过的时间。基于 emp 表避免不同的一般示例：

```
-- Distinct - runs longer --
SELECT DISTINCT d.deptno, dname FROM scott.dept D, scott.emp E WHERE D.deptno = E.deptno
/  
-- Same as Distinct - faster --
SELECT deptno, dname FROM scott.dept D 
 WHERE EXISTS (SELECT 'X' FROM scott.emp E WHERE E.deptno = D.deptno)
/ 
```

外连接。下面的查询将返回 A 表（dept）表和 B 中的所有行，即使 B 在表 A 中没有对应的行。运行查询并查看 deptno = 40。它在 emp tablr 中没有行，并且 empname 显示为 null。您的表 A（在我的示例中为 scott.dept）似乎比 B（在我的示例中为emp）具有更少的行。所以，外连接是我认为的答案：

```
SELECT d.deptno, e.ename
  FROM scott.dept d LEFT OUTER JOIN scott.emp e
    ON d.deptno = e.deptno
ORDER BY d.deptno
/ 
```

# php - 将电子邮件传送到 php 脚本

> ID：14757430
> 
> 赞同：1
> 
> 时间：2013-02-07T17:38:33.317
> 
> 标签：php, email, permissions, cpanel, whm

我一直在寻找答案 2 天了，发现了很多，但仍然无法让它发挥作用。

我有一个带有 cPanel 帐户的 WHM 服务器。

我在 /home/USERNAME/help-system/parse.php 的 public_html 下创建了以下 php 脚本用于测试：

```
#!/usr/local/bin/php -q
<?php
mail('****@davidslack.co.uk', 'Test email', 'Test email to get an email into the script');
?> 
```

我还在 cPanel 中创建了一个转发器，它转发到：

```
|/home/USERNAME/help-system/parse.php 
```

php脚本和目录有权限0755（也试过0777）

现在，当我向正确的地址发送电子邮件时，我会收到一封退回电子邮件，例如：

```
This message was created automatically by mail delivery software.

A message that you sent could not be delivered to one or more of its recipients. This is a permanent error. The following address(es) failed:

  pipe to |/home/USERNAME/help-system/parse.php
    generated by *********@davidslack.co.uk
    local delivery failed

The following text was generated during the delivery attempt:

------ pipe to |/home/USERNAME/help-system/parse.php
       generated by *********@davidslack.co.uk ------

Extension '/home/USERNAME/help-system/parse.php' not present.

------ This is a copy of the message, including all the headers. ------ 
```

我错过了什么？是否有我尚未启用的 WHM 或 cPanel 设置？我在上面做了什么愚蠢的事情吗？

任何帮助将非常感激。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:39:26.833

电子邮件管道，看起来它无法理解 windows 换行符！

所以：

1.  创建php脚本
2.  将 hashbang 添加到脚本顶部
3.  上传
4.  在 cPanel -> 文件管理器 -> 代码编辑器中打开
5.  删除 hashbang 后的换行符并将其添加回
6.  节省

现在都在工作

# git - GIT 恢复上次分离的 HEAD

> ID：14757437
> 
> 赞同：105
> 
> 时间：2013-02-07T17:38:55.430
> 
> 标签：git

拜托，我的项目有一个大问题：这就是场景。我在 GIT 下有一个 xcode 项目。今天我意识到最后一次提交破坏了一些测试，所以我检查了上一次提交。我使用了 SourceTree，这是警告

> 这样做将使您的工作副本成为“分离的 HEAD”，这意味着您将不再位于分支上。如果您想在此之后提交，您可能需要再次签出一个分支，或者创建一个新分支。这个可以吗？

我工作了一整天，最后我承诺了一切。所以我需要在开发分支上合并我的工作，所以我检查了开发分支并且......我的工作立即消失了:(

我知道分离我的 HEAD 是错误的，Sourcetree 警告我......但是有办法恢复我的工作吗？

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2013-02-07T17:45:12.937

如果您键入`git reflog`，它将向您显示所`HEAD`指向的修订的历史记录。你分离的头应该在那里。找到它后，执行`git checkout -b my-new-branch abc123`or `git branch my-new-branch abc123`（`abc123`分离 HEAD 的 SHA-1 在哪里）创建一个指向分离头的新分支。现在您可以随意合并该分支。

一般来说，如果你在一个分离的头上工作后签出一个分支，Git 应该告诉你从你一直在分离的头上的提交，所以你可以在需要时恢复它。我从未使用过 SourceTree，所以我不知道它是否会转发该消息。但是，如果它确实显示了该消息，那么您应该能够使用它来查找提交，并再次使用`git checkout -b`或`git branch`从该提交创建一个分支。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-11T14:47:24.237

在 Sourcetree 中，您可以使用 GUI 执行此操作。

首先通过在命令历史记录中查找一条消息来找到“丢失”的提交（查看：显示命令输出）。它可能会在您丢失的提交之后的“切换分支”命令中。在该消息中，希望您会看到带有 1234567 提交 ID 的提交评论。

将该提交 ID 带到下一步。

点击顶部工具栏中的“分支”按钮，您应该会看到一个对话框“新分支”，您可以在其中指定某个提交。把那个 Commit ID 放在那里，指定一个新的分支名称，点击 Create Branch，你应该会得到一个丢失提交的新分支！

[![在此处输入图像描述](../Images/7a2ea2af8b23faeb0bc4aee7886649c6.png)](https://i.stack.imgur.com/3Cb6E.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-29T07:24:27.513

如果您不想保留分离 HEAD 的更改并想转到最新的分支提交，请直接使用以下命令。

```
git checkout - 
```

**注意：我将删除您在分离的 HEAD 中的所有更改。**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-16T05:23:13.463

1.  首先，运行`git reflog`查看历史。
2.  最旧的修订将是列表中的最后一个。
3.  使用此处切换到您想要的提交`git checkout -b temp e35d2b3`e35dd23 是您提交的哈希值。
4.  就是这样。现在只需执行 git add 。ETC....

如果它解决了您的问题，请接受它作为答案。否则，请分享您的评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-22T15:04:03.700

我的一个同事刚遇到这种情况。在他的情况下，在分离的头部有提交——它们在 R-Studio 中工作——并且该工具确实警告他们可以使用这个和那个 SHA 引用创建分支......但因为唯一的选项是“关闭” ——呃！！这是一个信息框——他们关闭了对话并永远丢失了信息……

由于该`reflog`命令，我们可以看到更改没有丢失。但在我们的例子中，`git branch`没有按预期工作......或者传入`git pull`确实以某种方式搞砸了。我们必须将 reflog 中的更改捕获到新创建的分支：

```
 git cherry-pick 0b823d42..3cce27fc 
```

它将我们想要的所有提交放在分支中。然后我们可以将分支合并到`develop`没有问题的地方。

以防万一这对任何人都有用，我们确实通过查看标记为“checkout”（识别分支转移）之间的那些来确定*分离头上*的提交：`reflog`

```
e09f183b HEAD@{3}: pull: Fast-forward
b5bf3e1d HEAD@{4}: checkout: moving from lost_changes to develop
b5bf3e1d HEAD@{5}: checkout: moving from 3cce27fca50177a288df0252f02edd5da5ee64fd to lost_changes
3cce27fc HEAD@{6}: commit: add statistics
417a99a4 HEAD@{7}: commit: add test
0b823d42 HEAD@{8}: commit: new utility class
d9ea8a63 HEAD@{9}: checkout: moving from develop to d9ea8a635d4c2349fcb05b3339a6d7fad5ae2a09
b5bf3e1d HEAD@{10}: pull: Fast-forward 
```

我们想要的是`HEAD@{8}`（`HEAD@{6}`包括两者）。所以我们得到了它们：

```
git cherry-pick 0b823d42..3cce27fc 
```

然后通常的合并解决和最终提交给我们留下了分支 lost_changes 托管我们认为丢失的分离头工作。这次将其合并到开发中是快进的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T17:47:19.237

我尝试了这种情况，发现 git 告诉我上次提交的 SHA-1：

```
vors@localhost:~/git-test$ git checkout master 
Warning: you are leaving 1 commit behind, not connected to
any of your branches:

  ec600e6 333

If you want to keep them by creating a new branch, this may be a good time
to do so with:

 git branch new_branch_name ec600e6eb2473dd4f3732539c5c1fa5829f631b7

Switched to branch 'master' 
```

你看到这条消息了吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T17:47:51.563

分离头是可以的，只要你想做No change。

如果要恢复提交，可以在特定分支上使用 git revert

如果您想摆脱分离的头脑并进行提交；创建一个新分支（然后合并它）；

# batch-file - 创建带有版本和日期的文件夹

> ID：14757446
> 
> 赞同：0
> 
> 时间：2013-02-07T17:39:35.143
> 
> 标签：batch-file

这里的第一个问题。我已经使用批处理文件来自动执行很多操作，但这一个变得非常困难。

想象一下，我有一个文件夹（我们称之为“ProjectFolder”），我在这个项目文件夹中有一些文件夹（我们称之为“数据”、“工具”、“垃圾”），每个文件夹都有文件。我想要的是在“ProjectFolder”中创建一个“备份”文件夹，并在该文件夹中创建一个名为“v001_date_time_user”的文件夹，并在该文件夹中复制文件夹“数据”和“工具”。然后我再次运行这个脚本来创建一个新版本，它会创建“v002_date_time_user”并再次复制相同的“数据”和“工具”文件夹和文件。

我现在可以做的是在“备份”文件夹中创建一个名为“v_date_time_user”的文件夹，但我不知道如何创建 3 位数的版本部分。

这是我现在的代码：

```
@echo off & setlocal enableextensions

:: variables
set dateNtime="[%date:~6,6%-%date:~3,2%-%date:~0,2%]_[%time:~0,2%-%time:~3,2%]"
set backup="backup"

set /A version=000

set backupcmd=xcopy /s /c /d /e /h /i /r /k /y

:: check for existence of [backup]
:: if [backup] doesn't exist, create it
if not exist "%backup%\" (
  echo folder "%backup%" not found
  echo creating folder "%backup%"
  md "%backup%" 
  )

:: create version folder with version number_date_hour_user
md "%backup%\v%version%_%dateNtime%_[%USERNAME%]"

:: copy older version into newer version
xcopy "data" "%backup%\v%version%_%dateNtime%_[%USERNAME%]\data" /E /C /I /H /Q 
xcopy "tools" "%backup%\v%version%_%dateNtime%_[%USERNAME%]\tools" /E /C /I /H /Q 
```

谁能帮忙？谢谢路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:06:45.490

我能想到几种方法。您可以遍历以 av 和数字开头的每个文件夹，并对它们进行计数。然后，如果您从 000 开始，那么匹配数将是您的下一个数字。

```
@echo off
setlocal enabledelayedexpansion
:: if you're starting with 001 rather than 000, then set count=1 instead of 0 here.
set count=0
pushd "path\to\ProjectFolder\backup"
for /f %%I in ('dir /b v* ^| findstr "^v[0-9][0-9][0-9]"') do set /a count=!count!+1
popd
set count=00%count%
set count=%count:~-3% 
```

然后`%count%`将是您的下一个号码。

另一种方法是遍历`dir /b /o:n`（字母排序）并捕获最后一个目录名称，大概是 v### 具有最高数字。然后抓住该捕获的前四个字符并砍掉 v。

# python - 如何在python中记录结构？

> ID：14757447
> 
> 赞同：12
> 
> 时间：2013-02-07T17:39:39.580
> 
> 标签：python, data-structures, documentation, docstring

如果函数的参数预期是某个（或等价的）结构，使用 python 的`list`, `tuple`and构建`dict`，应该*如何*以及*在哪里*记录它？

示例*文档*：

```
def foo(bar):
    """
    Args:
        bar: 2-tuple, ([(<mapping>,<number>), ...], <string>)
    """
    pass 
```

有点麻烦；一些问题：

*   结构难以阅读
*   难以表示结构中每个元素的语义含义
*   如何指示不固定长度
*   应该只记录一次，还是到处记录
*   **编辑：**如何清楚地表明鸭子类型对于元素是可以的（即“dict”与“mapping-like”）

**编辑：**该示例*不是*为了尝试强制类型，而是尝试记录结构。就这一点来说，`duck typing`还*可以*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:36:52.737

我在工作中遇到了这个问题。根据我的个人研究（即相当彻底的谷歌搜索），没有记录复杂的嵌套函数参数的标准。我最终发明了我的方法，它用于`<>`表示数据结构的*元素*，并且每个元素在文档中都有自己的标题和段落。例如：

```
<options>
---------

A mapping:

  {'years':<years>,
   'states':<states>}

This is the root level of the `options` argument.

<years>
-------

A sequence of integers, each of which is a year to be included in the analysis.

<states>
--------

A sequence of strings, each of which is a state to be included in the analysis. 
```

该文档可以包含在该函数的文档字符串中，但就我而言，我选择将其分解为单独的文档。该方法可以扩展到更复杂的结构。例如，请参阅我的文档[here](http://ericstalbot.github.com/movespy/_sources/movesinitializers.txt)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:44:05.193

如果您使用的是 Python 3，您可能对“函数注释”感兴趣。它们不是强制执行的，完全是可选的，但似乎可以做你想做的事。注释可以是任何 Python 表达式，它们包含在函数头中，在参数旁边。例如（对不起，这有点荒谬）：

```
def fn(name: str, age: int, hobbies: "something else goes here") -> max(2, 9):
  # la la la
  return 9 
```

这里有更多详细信息（包括可能的用例和示例）：[PEP 3107](http://www.python.org/dev/peps/pep-3107/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:10:35.573

我对您的问题的简单回答是引用[Python 的禅宗](http://www.python.org/dev/peps/pep-0020/)： *“显式胜于隐式”*。就您的问题而言，这意味着要完整地写出所需的内容，即使需要整个段落来记录单个论点。只需阅读 python 文档即可查看示例。在您的特定情况下，您可以通过引用*序列*而不是*元组*来指示鸭子类型（请参阅[http://docs.python.org/2/library/collections.html#collections-abstract-base-classes](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:12:27.230

我见过的最完整的文档字符串规范是[NumPy Docstring Style Guide](https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt)，但我同意它没有提供详细信息来涵盖您的问题。因此，我可能会建议目前可能不存在回答您（和我自己）问题的标准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T18:00:09.343

您可以使用装饰器来强制类型以及记录它的方式：

```
def require(arg_name, *allowed_types):
    '''
    example:
    @require("x", int, float)
    @require("y", float)
    def foo(x, y):
        return x+y
    '''
    def make_wrapper(f):
        if hasattr(f, "wrapped_args"):
            wrapped_args = getattr(f, "wrapped_args")
        else:
            code = f.func_code
            wrapped_args = list(code.co_varnames[:code.co_argcount])

        try:
            arg_index = wrapped_args.index(arg_name)
        except ValueError:
            raise NameError, arg_name
        def wrapper(*args, **kwargs):
            if len(args) > arg_index:
                arg = args[arg_index]
                if not isinstance(arg, allowed_types):
                    type_list = " or ".join(str(allowed_type) for allowed_type in allowed_types)
                    raise Exception, "Expected '%s' to be %s; was %s." % (arg_name, type_list, type(arg))
            else:
                if arg_name in kwargs:
                    arg = kwargs[arg_name]
                    if not isinstance(arg, allowed_types):
                        type_list = " or ".join(str(allowed_type) for allowed_type in allowed_types)
                        raise Exception, "Expected '%s' to be %s; was %s." % (arg_name, type_list, type(arg))

            return f(*args, **kwargs)

        wrapper.wrapped_args = wrapped_args
        return wrapper

    return make_wrapper 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T21:00:42.997

我认为我最不喜欢的功能，曾经，有非常好的内联文档。

在此处查看`validate`文档：

[Pylons 装饰器 - 验证 - GitHub](https://github.com/Pylons/pylons/blob/master/pylons/decorators/__init__.py)

```
def validate(schema=None, validators=None, form=None, variable_decode=False,
         dict_char='.', list_char='-', post_only=True, state=None,
         on_get=False, **htmlfill_kwargs):
"""Validate input either for a FormEncode schema, or individual
validators

Given a form schema or dict of validators, validate will attempt to
validate the schema or validator list.

If validation was successful, the valid result dict will be saved
as ``self.form_result``. Otherwise, the action will be re-run as if
it was a GET, and the output will be filled by FormEncode's
htmlfill to fill in the form field errors.

``schema``
    Refers to a FormEncode Schema object to use during validation.
``form``
    Method used to display the form, which will be used to get the
    HTML representation of the form for error filling.
``variable_decode``
    Boolean to indicate whether FormEncode's variable decode
    function should be run on the form input before validation.
``dict_char``
    Passed through to FormEncode. Toggles the form field naming
    scheme used to determine what is used to represent a dict. This
    option is only applicable when used with variable_decode=True.
``list_char``
    Passed through to FormEncode. Toggles the form field naming
    scheme used to determine what is used to represent a list. This
    option is only applicable when used with variable_decode=True.
``post_only``
    Boolean that indicates whether or not GET (query) variables
    should be included during validation.

    .. warning::
        ``post_only`` applies to *where* the arguments to be
        validated come from. It does *not* restrict the form to
        only working with post, merely only checking POST vars.
``state``
    Passed through to FormEncode for use in validators that utilize
    a state object.
``on_get``
    Whether to validate on GET requests. By default only POST
    requests are validated.

Example::

    class SomeController(BaseController):

        def create(self, id):
            return render('/myform.mako')

        @validate(schema=model.forms.myshema(), form='create')
        def update(self, id):
            # Do something with self.form_result
            pass

""" 
```

# java - 无法关闭游标，即使它已关闭

> ID：14757448
> 
> 赞同：0
> 
> 时间：2013-02-07T17:39:44.870
> 
> 标签：java, android

我写了一个类，允许我的用户更新他们的约会细节。

在“onCreate”方法中，我填充了许多editTexts，并沿时间选择器设置了一个日期选择器，并从我的数据库中设置了一个切换按钮。填充这些项目工作正常。我的问题是，一旦我调整了数据选择器的预设“日期”值，我就会得到：

“在终结器中释放语句”错误。

这导致我的尝试捕获被触发并且编辑无法更新。这是完整的 LogCat 错误：

```
02-07 17:27:03.741: W/SQLiteCompiledSql(278): Releasing statement in a finalizer. Please ensure that you explicitly call close() on your cursor: SELECT _id, app_name, app_type, app_time, app_date, app_comments FROM appointmentsTable WHERE _id=2
02-07 17:27:03.741: W/SQLiteCompiledSql(278): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:62)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at com.example.flybase2.DBHandlerApp.getComments(DBHandlerApp.java:355)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at com.example.flybase2.AppointmentEditChanges.onCreate(AppointmentEditChanges.java:178)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.os.Looper.loop(Looper.java:123)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at android.app.ActivityThread.main(ActivityThread.java:4627)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at java.lang.reflect.Method.invokeNative(Native Method)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at java.lang.reflect.Method.invoke(Method.java:521)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-07 17:27:03.741: W/SQLiteCompiledSql(278):   at dalvik.system.NativeStart.main(Native Method)
02-07 17:27:03.772: E/Database(278): close() was never explicitly called on database '/data/data/com.example.flybase2/databases/app_name' 
02-07 17:27:03.772: E/Database(278): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
02-07 17:27:03.772: E/Database(278):    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1810)
02-07 17:27:03.772: E/Database(278):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
02-07 17:27:03.772: E/Database(278):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:851)
02-07 17:27:03.772: E/Database(278):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:844)
02-07 17:27:03.772: E/Database(278):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:540)
02-07 17:27:03.772: E/Database(278):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
02-07 17:27:03.772: E/Database(278):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
02-07 17:27:03.772: E/Database(278):    at com.example.flybase2.DBHandlerApp.open(DBHandlerApp.java:157)
02-07 17:27:03.772: E/Database(278):    at com.example.flybase2.AppointmentEditChanges.onCreate(AppointmentEditChanges.java:176)
02-07 17:27:03.772: E/Database(278):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-07 17:27:03.772: E/Database(278):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-07 17:27:03.772: E/Database(278):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-07 17:27:03.772: E/Database(278):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-07 17:27:03.772: E/Database(278):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-07 17:27:03.772: E/Database(278):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-07 17:27:03.772: E/Database(278):    at android.os.Looper.loop(Looper.java:123)
02-07 17:27:03.772: E/Database(278):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-07 17:27:03.772: E/Database(278):    at java.lang.reflect.Method.invokeNative(Native Method)
02-07 17:27:03.772: E/Database(278):    at java.lang.reflect.Method.invoke(Method.java:521)
02-07 17:27:03.772: E/Database(278):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-07 17:27:03.772: E/Database(278):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-07 17:27:03.772: E/Database(278):    at dalvik.system.NativeStart.main(Native Method)
02-07 17:27:03.811: W/SQLiteCompiledSql(278):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

这是我当前的“AppointmentEditChanges”课程：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.editappointment);

    editAppointName = (EditText) findViewById(R.id.inputNewAppName);
    editTime = (Spinner) findViewById(R.id.spinner1);
    editTimePicker = (TimePicker) findViewById(R.id.timePickerEdit);
    editDatePicker = (DatePicker) findViewById(R.id.datePickerEdit);
    editCommentsApp = (EditText) findViewById(R.id.inputNewComm);
    editToggle = (ToggleButton) findViewById(R.id.toggleButton1);
    editUpdateApp = (Button) findViewById(R.id.btnChangesApp);
    editDelApp = (Button) findViewById(R.id.btnDeleteApp);

    Bundle extras = getIntent().getExtras(); 
    if (extras != null) {
        passedID = extras.getLong("passedID"); 
    }

    DBHandlerApp getName = new DBHandlerApp(this, null, null);

    getName.open();
    String nameReturned = getName.getNameEditForAppointment(passedID);
    String typeReturned = getName.getAppointTypeEditForAppointment(passedID);

    editAppointName.setText(nameReturned);

    List<String> list = new ArrayList<String>();
    list.add("-");
    list.add("Medical");
    list.add("Business");
    list.add("Family");
    list.add("Other");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    editTime.setAdapter(dataAdapter);

    for(int a = 0; a < list.size(); a ++)
    {

    if(typeReturned.equals(list.get(a)))
    {

        editTime.setSelection(a);

    }

    }

    DBHandlerApp timeToEdit= new DBHandlerApp(this, null, null);
    timeToEdit.open();
    String returnedTime = timeToEdit.getTime(passedID);

     SimpleDateFormat newFormat = new SimpleDateFormat("HH:mm");
     try 
    {
    cake = newFormat.parse(returnedTime);
    } catch (ParseException e)
    {

        e.printStackTrace();
    }     

     Calendar cal = Calendar.getInstance();
     cal.setTime(cake);
     editTimePicker.setCurrentHour(cal.get( Calendar.HOUR_OF_DAY ));
     editTimePicker.setCurrentMinute(cal.get( Calendar.MINUTE ));

     DBHandlerApp dateToEdit= new DBHandlerApp(this, null, null);
        dateToEdit.open();
        String returnedDate = dateToEdit.dateToEdit(passedID);
        dateToEdit.close();

        SimpleDateFormat newFormatDate = new SimpleDateFormat("dd-MMM-yyyy");

         try 
        {
        dateToEditApp = newFormatDate.parse(returnedDate);
        } catch (ParseException e)
        {

            e.printStackTrace();
        }     

         Calendar calDate = Calendar.getInstance();

         calDate.setTime(dateToEditApp);

         int year = calDate.get(Calendar.YEAR);
         int monthOfYear = calDate.get(Calendar.MONTH);
         int dayOfMonth = calDate.get(Calendar.DAY_OF_MONTH);

         editDatePicker.init(year, monthOfYear, dayOfMonth, null);

         DBHandlerApp commentsApp = new DBHandlerApp(this, null, null);

         commentsApp.open();

        String returnedComment = commentsApp.getComments(passedID);

         editCommentsApp.setText(returnedComment);
         typeToSet =  editTime.getSelectedItem().toString();

         DBHandlerApp editAlarm = new DBHandlerApp(this, null, null);

         editAlarm.open();

        Integer alarmEditResult =  editAlarm.checkAlarmStatus(passedID);

         if(alarmEditResult == 1)
         {

             setTog = true;

             editToggle.setChecked(setTog);

         }

         else
         {

             setTog = false;

             editToggle.setChecked(setTog);

         }
         editUpdateApp.setOnClickListener(this);
         editDelApp.setOnClickListener(this);

            editToggle.setChecked(setTog);

            editToggle.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                if (editToggle.isChecked()) {
                setTog = true;
                editToggle.setChecked(setTog);

                } else {

                    setTog = false;
                    editToggle.setChecked(setTog);

                }
                }
                });

}

@Override
public void onClick(View editChoice) {
    switch(editChoice.getId()){

    case (R.id.btnChangesApp):

        if(setTog != false)
            try{

            Integer dobMonth = editDatePicker.getMonth();
            Integer dobYear =  editDatePicker.getYear();
            Integer dobDate =  editDatePicker.getDayOfMonth();

           Integer dobHour = editTimePicker.getCurrentHour();
           Integer dobMinute = editTimePicker.getCurrentMinute();

           String timeToSet;
           Format formatter;
           Calendar calendar = Calendar.getInstance();
           calendar.set(Calendar.HOUR_OF_DAY, setTime.getCurrentHour());
           calendar.set(Calendar.MINUTE, setTime.getCurrentMinute());

           formatter = new SimpleDateFormat("HH:mm");
           timeToSet = formatter.format(calendar.getTime());

           ////////////////////////////////////////////////
           String dateToSet;
           Format formatterDate;
           Calendar calendarDate = Calendar.getInstance();
           calendarDate.set(Calendar.YEAR, editDatePicker.getYear());
           calendarDate.set(Calendar.MONTH, editDatePicker.getMonth());
           calendarDate.set(Calendar.DAY_OF_MONTH, editDatePicker.getDayOfMonth());

           formatterDate = new SimpleDateFormat("dd-MMM-yyyy");
           dateToSet = formatterDate.format(calendar.getTime());
           //////////////////////////////////////////////////

            Date setDate = new Date(dobYear - 1900, dobMonth, dobDate);

            //Time timeToSet = new Time();
            //timeToSet.set(0, dobMinute, dobHour);

            alarmToSet =  true;

            DBHandlerApp updateApp = new DBHandlerApp(this, null, null);
             updateApp.open();
            updateApp.updateAppDetails(passedID, updateNameAppoint, updateCommsAppoint, timeToSet, dateToSet, typeToSet, alarmToSet);

        AlarmManager dateSet = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(this, DateAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
        dateSet.set(AlarmManager.RTC_WAKEUP, setDate.getTime(), pendingIntent); 
            }

            catch (Exception e)
            {
                check = false;

                Dialog d = new Dialog(this);
                d.setTitle("Appointment Failed To Be Updated 1");
                TextView txt = new TextView(this);
                txt.setText("Fail");
                d.setContentView(txt);
                d.show();
            }
            finally
            {
                if(check = true);
                {

                    Dialog e = new Dialog(this);
                    e.setTitle("Appointment Has Been Updated.");
                    TextView txt = new TextView(this);
                    txt.setText("Success");
                    e.setContentView(txt);
                    e.show();
                }

            }

            else if(setTog == false)
            {

                alarmToSet = false;
                try
                {
                DBHandlerApp createAppFalse = new DBHandlerApp(this, null, null);

                Integer dobMonth = editDatePicker.getMonth();
                Integer dobYear = editDatePicker.getYear();
                Integer dobDate = editDatePicker.getDayOfMonth();

                Integer dobHour = editTimePicker.getCurrentHour();
                Integer dobMinute = editTimePicker.getCurrentMinute();

                Date setDate = new Date(dobYear - 1900, dobMonth, dobDate);

                //Time timeToSet = new Time();
                //timeToSet.set(0, dobMinute, dobHour);
                   String timeToSet;
                   Format formatter;
                   Calendar calendar = Calendar.getInstance();
                   calendar.set(Calendar.HOUR_OF_DAY, setTime.getCurrentHour());
                   calendar.set(Calendar.MINUTE, setTime.getCurrentMinute());

                   formatter = new SimpleDateFormat("HH:mm");
                   timeToSet = formatter.format(calendar.getTime());

                   ////////////////////////////////////////////////
                   String dateToSeta;
                   Format formatterDatea;
                   Calendar calendarDate = Calendar.getInstance();
                   calendarDate.set(Calendar.YEAR, editDatePicker.getYear());
                   calendarDate.set(Calendar.MONTH, editDatePicker.getMonth());
                   calendarDate.set(Calendar.DAY_OF_MONTH, editDatePicker.getDayOfMonth());

                   formatterDatea = new SimpleDateFormat("dd-MMM-yyyy");
                   dateToSeta =   formatterDatea.format(calendar.getTime());
                   //////////////////////////////////////////////////

                   DBHandlerApp updateApp = new DBHandlerApp(this, null, null);
                   updateApp.open();
                    updateApp.updateAppDetails(passedID, updateNameAppoint, typeToSet, timeToSet,  dateToSeta, updateCommsAppoint, alarmToSet);

                }
                catch (Exception e)
                {
                    check = false;

                    Dialog d = new Dialog(this);
                    d.setTitle("Appointment Failed To Be Added 2");
                    TextView txt = new TextView(this);
                    txt.setText("Fail");
                    d.setContentView(txt);
                    d.show();
                }
                finally
                {
                    if(check = true);
                    {

                        Dialog e = new Dialog(this);
                        e.setTitle("New Appointment Added.");
                        TextView txt = new TextView(this);
                        txt.setText("Success");
                        e.setContentView(txt);
                        e.show();
                    }
                    finish();
                }

        }

    break;

    case (R.id.btnDeleteApp):

    DBHandlerApp deleteApp = new DBHandlerApp(this, null, null);
    deleteApp.open();
    deleteApp.deleteAppointment(passedID);
    deleteApp.close();

    break;
}

}
} 
```

这些是我在数据库 Handler 类中使用的方法。据我所见，我正确关闭了游标吗？

```
public String getNameEditForAppointment(Long passedID) {

        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);
        if(c != null)
        {
            if(c.getCount() > 0 && c.moveToFirst())

            {
                c.moveToFirst();
                String name = c.getString(1);
                c.close();
                return name;

            }
        }
        c.close();
        return null;

    }

    public String getAppointTypeEditForAppointment(Long passedID) {
        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);
        if(c != null)
        {
            if(c.getCount() > 0 && c.moveToFirst())

            {
                c.moveToFirst();
                String name = c.getString(2);
                c.close();
                return name;

            }
        }
        c.close();
        return null;

    }

    public String getTime(Long passedID) {

        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);
         if(c != null)
            {
                if(c.getCount() > 0 && c.moveToFirst())

                {
                    c.moveToFirst();
                    String name = c.getString(3);
                    c.close();
                    return name;
                }
            }
            c.close();
            return null;

    }

    public String dateToEdit(Long passedID) {

        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);
         if(c != null)
            {
                if(c.getCount() > 0 && c.moveToFirst())

                {
                    c.moveToFirst();
                    String date = c.getString(4);
                    c.close();
                    return date;
                }
            }
            c.close();
            return null;

    }

    public String getComments(Long passedID) {
        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);
         if(c != null && c.getCount() > 0)
        {
        c.moveToFirst();
        String comment = c.getString(5);

        if(comment.equals(""))
        {
            String noComm = "No Set Comment.";
            c.close();
            return noComm;
        }
        else
        {
            c.close();
            return comment;

        }

    }
         c.close();
         return null;
    }

    public Integer checkAlarmStatus(Long passedID) {

        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP, KEY_ALARM};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);    
         if(c != null)
                {
                    if(c.getCount() > 0 && c.moveToFirst())

                    {
                        c.moveToFirst();
                        int res = c.getInt(6);
                        c.close();
                        return res;
                    }
                }
                c.close();
                return null;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:48:31.137

您似乎可以很好地关闭游标。不过，我看不到您在哪里关闭数据库对象。`DBHandlerApp`当你完成每个对象时，尝试关闭你的对象。

# python - 子类化基本 Django 通用视图时缺少 META 属性？

> ID：14757452
> 
> 赞同：1
> 
> 时间：2013-02-07T17:39:51.330
> 
> 标签：python, django, django-views

我正在尝试对 Django 提供的基本通用 View 对象进行子类化，以便我可以完全控制视图的呈现，但仍然使用更简洁的基于类的视图方法，而不是映射到函数。

到目前为止，这是我的观点：

```
from django.views.generic.base import View
from django.shortcuts import render
from account.forms import UserForm, UserProfileForm

class RegisterView(View):    
    def get(request, *args, **kwargs):

        user_form = UserForm()
        profile_form = UserProfileForm()

        return render(request, 'account/register.html', {'user_form': user_form, 'profile_form': profile_form})

    def post(request, *args, **kwargs):
        pass 
```

当我尝试导航到此视图的 URL 时，我从 Django 收到此错误：

```
AttributeError at /account/register/

'RegisterView' object has no attribute 'META'

Request Method:     GET
Request URL:        http://localhost:8000/account/register/
Django Version:     1.4.3
Exception Type:     AttributeError
Exception Value:    'RegisterView' object has no attribute 'META'

Exception Location: C:\Python27\lib\site-packages\django\core\context_processors.py in debug, line 35
Python Executable:  C:\Python27\python.exe
Python Version:     2.7.3

Environment:

Request Method: GET
Request URL: http://localhost:8000/account/register/

Django Version: 1.4.3
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'account')

Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Python27\lib\site-packages\django\views\generic\base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\views\generic\base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "C:\project\account\views.py" in get
  49\.         return render(request, 'account/register.html', {'user_form': user_form, 'profile_form': profile_form})
File "C:\Python27\lib\site-packages\django\shortcuts\__init__.py" in render
  40\.         context_instance = RequestContext(request, current_app=current_app)
File "C:\Python27\lib\site-packages\django\template\context.py" in __init__
  176\.             self.update(processor(request))
File "C:\Python27\lib\site-packages\django\core\context_processors.py" in debug
  35\.     if settings.DEBUG and request.META.get('REMOTE_ADDR') in settings.INTERNAL_IPS:

Exception Type: AttributeError at /account/register/
Exception Value: 'RegisterView' object has no attribute 'META' 
```

在子类化通用视图时，文档没有指定任何“META 属性”，所以我不确定我做错了什么，或者这是否是基本通用视图的允许使用。

我对（严肃的）Python 编程和 Django 有点陌生，所以如果我遗漏了一些明显的东西，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:43:19.047

记住这是一个类：你错过了and`self`定义中的论点：`get``post`

```
def get(self, request, *args, **kwargs): 
```

# php - 无法在蛋糕中扩展控制器

> ID：14757455
> 
> 赞同：0
> 
> 时间：2013-02-07T17:40:00.067
> 
> 标签：php, cakephp, constructor, cakephp-2.0

在我的一个控制器中，试图在构造函数中不做任何额外的事情，但运行它的父构造函数：

```
public function __construct(){
     parent::__construct();
} 
```

我收到错误“调用非对象上的成员函数 body()”。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:23:07.397

为什么不只看一下您要扩展的文件呢？毕竟 Cake 是开源的。然后你会很容易找到你需要什么样的构造函数（[https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Controller.php#L317](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Controller.php#L317)）

```
public function __construct($request = null, $response = null) {
    parent::__construct($request, $response);
} 
```

# javascript - 是否可以在 MongoDB 文档的数组中间插入一个元素？

> ID：14757460
> 
> 赞同：4
> 
> 时间：2013-02-07T17:40:10.417
> 
> 标签：javascript, arrays, mongodb, splice

假设我在 mongo DB 中有一个文件，如下所示：

```
{
    pages: [
        {
            elements: [
                {id:1},
                {id:2},
                {id:3}
            ]
        },
        {
            elements: [
                ...
            ]
        }
    ]
} 
```

并且页面内元素的顺序具有语义意义（例如，堆叠）。现在说我想在第一页的第二个元素之前添加一个新元素。生成的文档的期望状态是这样的：

```
{
    pages: [
        {
            elements: [
                {id:1},
                {id:4}, // <------ element inserted here
                {id:2},
                {id:3}
            ]
        },
        {
            elements: [
                ...
            ]
        }
    ]
} 
```

在[Mongo 文档](http://docs.mongodb.org/manual/applications/update/#array)中，我看到了如何将元素添加到数组的末尾以及如何更新现有元素的值，但没有看到如何插入到数组的中间（à la PHP 的[array_splice](http://php.net/array_splice)）。这是否只能通过将整个数组重新分配给一个新数组并在中间插入所需元素来实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-09T15:43:57.957

MongoDB 现在支持此功能。[您可以使用$position](http://docs.mongodb.org/manual/reference/operator/update/position/)运算符将元素插入到数组的中间。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T15:36:23.923

本质上，如果您使用[update](http://docs.mongodb.org/manual/core/update/)，则无法保证订单。要添加尝试您建议的问题，虽然您可以更新[特定位置](http://docs.mongodb.org/manual/core/update/#update-an-element-by-specifying-its-position)的元素，但您不能调用[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/)或[`$push`](http://docs.mongodb.org/manual/reference/operator/push/)使用类似的规范。

您想要的相关功能请求在这里：

[https://jira.mongodb.org/browse/SERVER-2363](https://jira.mongodb.org/browse/SERVER-2363)

但是现在，正如您所怀疑的那样，如果不拉出数组，根据需要进行操作并使用[`$set`](http://docs.mongodb.org/manual/reference/operator/set/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:21:02.600

您不应该将层号存储为数组元素的属性吗？BSON 规范中说数组是键值对，所以你需要使用你的层号作为数组中的键。（MongoDB 使用 BSON 来存储数据）

# javascript - 扩展 nicEdit 以包含行高

> ID：14757461
> 
> 赞同：0
> 
> 时间：2013-02-07T17:40:17.023
> 
> 标签：javascript, nicedit

有谁知道如何扩展 nicEdit 以包含 line-height 选项？它看起来很容易扩展，我无法想象向菜单栏添加另一个下拉菜单会那么难，但我的 Javascript 技能却达不到它！

谢谢丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:42:19.827

看来我自己也要试一试！

# ruby-on-rails - 首次访问时无法使用的路线

> ID：14757462
> 
> 赞同：0
> 
> 时间：2013-02-07T17:40:17.210
> 
> 标签：ruby-on-rails, routes

我有一个命名空间，我刚刚为特定模型添加了编辑和更新到路由文件。我的问题是，当我从应用程序中的 link_to 访问编辑路由时，它说没有找到路由，但是，如果我手动输入相同的 url，它会找到它并正确呈现页面。我试图访问的 url`coordinator/teacher_recommendation/?/edit` 显示效果很好。

这是我的路线文件的相关部分：

```
 namespace :coordinator do
   resources :applicants, :only => [:show, :edit, :update, :index] do
     member do
       get 'invite_teachers'
       put 'create_invitations'
     end
   end
   resources :teacher_recommendations, :only => [:show, :edit, :update] do
     resources :recommendation_reminders, :only => [:create, :new, :update]
   end  
 end 
```

关于为什么会这样的任何想法？

这是不起作用的 button_to 链接：

```
button_to "Send Reminder", edit_coordinator_teacher_recommendation_path(@applicant.science_recommendation) 
```

这是确实有效的link_to：

```
link_to "Send Reminder", edit_coordinator_teacher_recommendation_path(@applicant.science_recommendation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:37:36.097

我将 button_to 链接更改为具有方法参数，这似乎解决了问题......

> button_to "发送提醒", edit_coordinator_teacher_recommendation_path(@applicant.science_recommendation), class: "btn btn-mini", :method => :get %>

# java - 无论如何要使用 intellij 社区版在 AS7(Jboss) 上调试 Web 项目

> ID：14757470
> 
> 赞同：1
> 
> 时间：2013-02-07T17:40:42.347
> 
> 标签：java, spring, jboss, intellij-idea

无论如何要使用 intellij 社区版在 AS7(Jboss) 上调试 Web 项目？

我正在寻找一种方法来调试我在 jboss AS7 上运行的 intellij 中的 spring mvc 项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:09:14.283

您可以使用远程调试来调试纯 Java 代码，但您根本无法使用 Community Edition 调试 JSP 代码。

# php - 如何仅为某些应用程序提供我的 API？

> ID：14757471
> 
> 赞同：0
> 
> 时间：2013-02-07T17:40:47.480
> 
> 标签：php, api

我正在构建一个我想要私有的 API，我想确保只有我想要的应用程序才能读取我的数据，我不希望任何可以访问 www.domain.com/api/getdata 的人读取我的数据。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:47:31.903

一种简单的方法是为每个客户端提供一个 api 密钥，并在收到传入请求时确保 api 密钥与客户端的主机匹配。

或者你可以试试[oauth](http://php.net/manual/en/book.oauth.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:53:06.773

虽然您可以为此使用 OAuth，

还有另一种方法 - 您可以为您的客户使用 XML 或 JSON。他们做了一些请求，您的脚本将返回 XML 或 JSON 响应。

**关于隐私**。有一种通用方法可以确保只有您的客户才能访问脚本的特定部分。这是一个令牌。您可以为每个用户创建一个，然后将每个 API 请求与令牌数组（或类似的东西）进行比较

# c++ - 如何存储通用引用

> ID：14757474
> 
> 赞同：8
> 
> 时间：2013-02-07T17:40:58.250
> 
> 标签：c++, templates, c++11, perfect-forwarding, universal-reference

我需要将通用引用存储在一个类中（我确信引用的值会比这个类更长寿）。有这样做的规范方法吗？

这是我想出的一个最小示例。它似乎有效，但我不确定我是否做对了。

```
template <typename F, typename X>
struct binder
{
    template <typename G, typename Y>
    binder(G&& g, Y&& y) : f(std::forward<G>(g)), x(std::forward<Y>(y)) {}

    void operator()() { f(std::forward<X>(x)); }

    F&& f;
    X&& x;
};

template <typename F, typename X>
binder<F&&, X&&> bind(F&& f, X&& x)
{
    return binder<F&&, X&&>(std::forward<F>(f), std::forward<X>(x));
}

void test()
{
    int i = 1;
    const int j = 2;
    auto f = [](int){};

    bind(f, i)();   // X&& is int&
    bind(f, j)();   // X&& is const int&
    bind(f, 3)();   // X&& is int&&
} 
```

我的推理是正确的还是会导致细微的错误？此外，是否有更好（即更简洁）的方式来编写构造函数？`binder(F&& f, X&& x)`将不起作用，因为这些是 r 值引用，因此不允许`binder(f, i)`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T22:19:53.463

您不能“存储通用引用”，因为没有这样的东西，只有右值引用和左值引用。“通用引用”是 Scott Meyers 描述语法特性的方便术语，*但它不是类型系统的一部分*。

查看代码的具体细节：

```
template <typename F, typename X>
binder<F&&, X&&> bind(F&& f, X&& x) 
```

在这里，您`binder`使用引用类型作为模板参数进行实例化，因此在类定义中无需将成员声明为右值引用，因为它们已经*是*引用类型（由 推导的左值或右值`bind`）。这意味着您总是得到`&&`比需要更多的令牌，这些令牌是多余的并且由于引用崩溃而消失。

如果您确定`binder`将始终由您的`bind`函数实例化（因此始终使用引用类型实例化），那么您可以这样定义它：

```
template <typename F, typename X>
struct binder
{
    binder(F g, X y) : f(std::forward<F>(g)), x(std::forward<X>(y)) {}

    void operator()() { f(std::forward<X>(x)); }

    F f;
    X x;
}; 
```

在这个版本中，类型`F`和`X`是引用类型，所以使用它是多余的`F&&`，`X&&`因为它们要么已经是左值引用（所以`&&`什么都不做）或者它们是右值引用（所以`&&`在这种情况下也不做任何事情！）

或者，您可以保持`binder`原样并更改`bind`为：

```
template <typename F, typename X>
binder<F, X> bind(F&& f, X&& x)
{
    return binder<F, X>(std::forward<F>(f), std::forward<X>(x));
} 
```

现在您`binder`使用左值引用类型或对象（即非引用）类型进行实例化，然后在内部`binder`声明具有附加值的成员，`&&`因此它们是左值引用类型或右值引用类型。

此外，如果您考虑一下，您不需要存储右值引用成员。通过左值引用存储对象是非常好的，重要的是你在函数中正确地*将*`operator()`它们作为左值或右值转发。所以类成员可能只是`F&`and `X&`（或者在你总是用引用参数实例化类型的情况下，`F`and `X`）

所以我会将代码简化为：

```
template <typename F, typename X>
struct binder
{
    binder(F& g, X& y) : f(g), x(y) { }

    void operator()() { f(std::forward<X>(x)); }

    F& f;
    X& x;
};

template <typename F, typename X>
binder<F, X> bind(F&& f, X&& x)
{
    return binder<F, X>(f, x);
} 
```

此版本在模板参数中保留所需的类型，`F`并`X`在表达式中使用正确的类型`std::forward<X>(x)`，这是唯一需要它的地方。

最后，我发现根据推导类型来思考更准确和更有帮助，而不仅仅是（折叠的）引用类型：

```
bind(f, i)();   // X is int&, X&& is int&
bind(f, j)();   // X is const int&, X&& is const int&
bind(f, 3)();   // X is int, X&& is int&& 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:51:50.850

`binder(F&& f, X&& x)` [工作正常](http://liveworkspace.org/code/Zcoyr%240)。

`F`和`X`是引用类型（它们是模板实例化中给出的类型`binder<F&&, X&&>`），因此`f`并`x`成为遵循通常的引用折叠规则的普遍尊重。

除此之外，代码看起来不错（只要您确实可以确保引用的变量比活页夹更有效）。

# dns - CNAME 记录中的 * 是否优先于显式子域？

> ID：14757475
> 
> 赞同：26
> 
> 时间：2013-02-07T17:41:00.070
> 
> 标签：dns, cname, amazon-route53

我在我的域上定义了一组子域，如下所示：

```
CNAME sub1.example.com -> sub1.herokuapp.com
CNAME sub2.example.com -> sub2.appspot.com
CNAME www.example.com -> example.herokuapp.com 
```

现在，我想添加`CNAME *.example.com -> example.herokuapp.com`一些内容，以捕捉那些输入太多 WWW 或输入其他缺失子域的人。但是`*`优先于明确定义的子域还是子域会继续按预期工作？

如果它有所作为，我正在使用 Route53。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-07T18:06:04.313

通配符将仅匹配区域中未以其他方式定义的记录。

请参阅[RFC 1912](http://www.ietf.org/rfc/rfc1912.txt)，它在这里提到`MX`了记录，但同样适用于`CNAME`s：

```
2.7 Wildcard records

Wildcard MXs are useful mostly for non IP-connected sites.  A common
mistake is thinking that a wildcard MX for a zone will apply to all
hosts in the zone.  A wildcard MX will apply only to names in the
zone which aren't listed in the DNS at all.  e.g.,

       podunk.xx.      IN      NS      ns1
                       IN      NS      ns2
       mary            IN      A       1.2.3.4
       *.podunk.xx.    IN      MX      5 sue

Mail for mary.podunk.xx will be sent to itself for delivery.  Only
mail for jane.podunk.xx or any hosts you don't see above will be sent
to the MX.  For most Internet sites, wildcard MX records are not
useful.  You need to put explicit MX records on every host. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T17:42:25.127

不，它没有，定义的子域应该优先于通配符。

# jquery - 来自 Chrome 扩展的 jQuery AJAX 调用出现问题

> ID：14757479
> 
> 赞同：3
> 
> 时间：2013-02-07T17:41:11.987
> 
> 标签：jquery, xml, ajax, google-chrome-extension

BLUF：从 Chrome 扩展程序运行 AJAX 调用无法正常工作。

阿贾克斯：

```
$.ajax({
    type: "GET",
    url: "http://weather.aero/dataserver_current/httpparam?dataSource=metars&requestType=retrieve&format=xml&stationString=KFBG&hoursBeforeNow=1&fields=raw_text",
    dataType: "xml",
    success: function(xml){
        $(xml).find("raw_text").each(function(){
            var metar = $(this).text();
        });

        $("#ob-body").html(metar);
    }
}); 
```

所以我试图从一个需要 GET 来请求数据 XML 的站点获取天气数据。它们提供了构建 URL 请求字符串的技巧，并且在将 URL 粘贴到地址栏中后，相应的 XML 数据就会正确显示。

接下来，我组装了 AJAX 调用并运行它，但似乎没有任何反应。我将成功属性的函数更改为简单的“alert()”并再次运行扩展程序，然后弹出警报框。

警报出现的事实意味着呼叫成功，除非我完全出去吃午饭......那么为什么原始功能不起作用？我意识到搜索 XML 的代码可能不正确，但是在我开始处理文档之前发出警报也没有弹出，这告诉我由于某种原因它根本没有进入函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:47:33.510

这可能是因为 AJAX 请求的同源策略限制。Chrome 允许您在扩展程序中发出跨域 ajax 请求，但我们需要按照[文档中的说明向扩展程序清单文件添加权限](http://developer.chrome.com/extensions/xhr.html)

看起来您可能必须向清单文件添加跨域访问权限，例如

```
{
  "name": "My extension",
  ...
  "permissions": [
    "http://weather.aero/"
  ],
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:45:30.130

我认为你应该在成功功能中做到这一点：

```
$(xml).find("raw_text").each(function(){
     var metar = $(this).text();
     $("#ob-body").html(metar);
}); 
```

# sql - 相同的约定适用于除此之外的所有其他实例

> ID：14757480
> 
> 赞同：0
> 
> 时间：2013-02-07T17:41:21.187
> 
> 标签：sql, vb.net, string, split

我调用了一个数据库，在该数据库中它获取了一个以管道分隔的字符串，我将其分解为一个数组并填充文本框，这个确切的代码适用于除此之外的所有其他实例，我可以找出原因。此实例仅将字符串的前两个字母打印到两个文本框中

来自查询的数据看起来像这样“这是一个测试|这是一个测试”

```
 Dim queryString3 As String = "SELECT Answer FROM ShortAnswers where questionNumber = 12 and submission = 1375"
    Using connection As New SqlConnection(My.Settings.ConnString)
        Dim command As New SqlCommand(queryString3, connection)
        connection.Open()
        Dim rdr As String = command.ExecuteScalar()
        Dim P3 As String
        P3 = rdr
        Dim Part3 As New ArrayList(P3.Split("|"c))
        TextBoxA.Text = Part3(0)
        TextBoxB.Text = Part3(1) 
```

在这个例子中，textboxa 取“t”的值，而 textbox b 取“h”的值 “this is a test|this is a test”的前两个字母

这件几乎相同的作品

```
 Dim queryString As String ="SELECT Answer FROM ShortAnswers where questionNumber = 11 and submission = 1375"          
        Using connection As New SqlConnection(My.Settings.OnLineTestingDB)
        Dim command2 As New SqlCommand(queryString, connection)
        connection.Open()
        Dim rdr1 As String = command2.ExecuteScalar()
        Dim P2 As String
        P2 = rdr1
        Dim Part2 As New ArrayList(P2.Split("|"c))
        Normal.Text = Part2(0)
        Normal1.Text = Part2(1)
        Normal2.Text = Part2(2)
    End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:17:12.423

问题是从字符串而不是数组中获取字符

```
Dim Part3 As New ArrayList(P3.Split("|"c))
   TextBoxA.Text = P3(0)
   TextBoxB.Text = P3(1) 
```

现在看起来像

```
Dim Part3 As New ArrayList(P3.Split("|"c))
   TextBoxA.Text = Part3(0)
   TextBoxB.Text = Part3(1) 
```

解决了这个问题，谢谢你的帮助，有时你只需要一双额外的眼睛来唤醒你

# c - 在 Makefile.am(automake) 中使用 if 语句

> ID：14757481
> 
> 赞同：1
> 
> 时间：2013-02-07T17:41:32.930
> 
> 标签：c, gcc, makefile, automake

我知道对于 Makefile 我们可以编写以下块

```
ifneq ($(MYAPP_REVISION)_,_)
ifneq ($(MYAPP_REVISION),exported)
    myapp_CFLAGS+=-DMYAPP_REVISION=\"$(MYAPP_REVISION)\"
    myapp_LDFLAGS+=-DMYAPP_REVISION=\"$(MYAPP_REVISION)\"
endif
endif 
```

但是如果在（autoconf）中写这个块，`makefile.am`我会让构建不起作用。

关于`makefile.am`在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:47:31.630

您必须在源代码中查找生成的输出并引用 M4 语法。

# java - 如何配置要使用的事务管理器而不必覆盖所有 @Transactional 方法

> ID：14757486
> 
> 赞同：4
> 
> 时间：2013-02-07T17:42:05.490
> 
> 标签：java, spring, transactions

长时间的听众第一次来电。

我们有一个包含通用事务逻辑的 AbstractService.java 类。并非此类中的所有方法都是事务性的。曾经是，用spring的@Transactional注释进行注释。

现在 AbstractService 的每个实现都可能有不同的事务管理器。这可以通过覆盖抽象类中的方法在具体类中进行配置，并提供不同的 tx 管理器：

> @Transactional(值=TRANSACTION_MANAGER)

无法将事务管理器名称传递给抽象类，因为“注释属性 Transactional.value 的值必须是常量表达式”。

因此，据我所知，有两种配置事务管理器的方法：

1.  重写具体类中的每个 @Transactional 方法只是为了调用超级方法：

    ```
     @Transactional(timeout = 60, value = TRANSACTION_MANAGER)
     @Override
     public String editEntity(Integer id, Integer columnPosition, Object value) {
    return super.editEntity(id, columnPosition, value); 
    ```

2.  改为在类级别添加 @Transactional 注释。这迫使非事务性方法在事务中处理，并且当非事务性方法调用其他事务性方法时，我们最终得到一个嵌套的 tx 汤。

有第三种选择吗？像现在已弃用的弹簧测试[@NotTransactional](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/test/annotation/NotTransactional.html)之类的东西可以与上面的选项 2 一起使用。

大约三年前有人问过一个[非常相似的问题。](https://stackoverflow.com/questions/3333133/multiple-transaction-managers-with-transactional-annotation)既然 Spring 发生了很多事情，那么我们还有其他选择吗？

尽管它很整洁，但自定义注释答案并没有解决这个问题。

我的问题可以总结为：

**如何配置事务而不必重写所有事务方法只指定事务管理器？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:04:08.867

我建议您将其重构`AbstractService`为三个类：

*   第一个类是 current `AbstractService`，它的接口、方法签名等，以保持与任何现有子类的二进制兼容，但所有实现已被删除。
*   第二个类包含所有事务性的业务逻辑，因此它使用`@Transactional`注释（在类级别使用正确的事务管理器）。
*   第三类包含所有非事务性业务逻辑。

Now, you simply autowire the last two classes into the refactored `AbstractService`, which just delegates an incoming method call to the implementation that was moved into one of the newly created classes.

# codeigniter - Phonegap 和 Jquery 移动应用程序使用 Codeigniter Ion Auth 后端进行登录

> ID：14757487
> 
> 赞同：7
> 
> 时间：2013-02-07T17:42:08.483
> 
> 标签：codeigniter, authentication, cordova, jquery-mobile, ion-auth

我已经拥有使用 Codeigniter PHP 框架和 Ion Auth 身份验证库（用于 Codeigniter）构建的 CRUD Web 应用程序。因此用户需要登录才能使用该网站等。

现在我正在使用使用相同后端的 Phonegap 和 jQuery mobile 构建小型移动应用程序。后端有“类似 REST”的 api，它处理来自移动客户端的所有 ajax 请求。

我应该如何处理此移动应用程序的用户身份验证？我想尽可能多地使用现有的后端代码库。

我计划这样的事情：

*   从客户端发送用户名并传递给服务器
*   将会话 ID 从服务器返回给客户端
*   将会话 ID 存储到客户端（本地存储）
*   在每个请求中将该令牌发送到服务器并在服务器端进行验证。

如何在后端做到这一点？对于登录，我可以使用 Codeigniter Ion Auth 库登录方法并获取 Codeigniter (PHP) 会话 ID。在第二个请求中，当用户发送一些实际数据和 sessoin id 时，如何验证会话 id？还是为移动应用身份验证构建全新的登录功能比尝试使用现有功能（Codeignitre Ion Auth 库）更好？

非常欢迎所有想法和建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T09:50:03.547

我认为最好的解决方案就是在你的控制器和请求之间放置一个中间件。

您可以使用 Hooks 做到这一点：http: [//ellislab.com/codeigniter/user-guide/general/hooks.html](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

使用*预控制器*挂钩。

为了轻松管理 API 请求，请使用 HTTP 代码

*   **404** : 未找到项目（如 /client/:id）
*   **500**：服务器有问题
*   **401**：没有令牌
*   **403**：这个令牌没有被授权访问这个资源（就像一个简单的用户想要访问管理员的东西）

您在这里拥有所有代码：[http ://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

当您可以更轻松地使用复杂的库时，请避免使用它。钩子对我来说是最好的。

我使用 NodeJS，概念与 Express 中间件相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T04:53:26.593

我已经使用 phonegap 和 jQuery Mobile 开发了相同类型的移动应用程序，并使用 MySQL db 作为我的网站的后端，它位于节点 js 平台中，但使用 API 访问所有功能的总体思路是相同的。

API 调用服务器进行登录和所有其他操作，如获取数据、发送数据到服务器等。

如果您的服务器端已准备好 API，那么您只需调用该 API 即可完成所有操作。首先，您可以调用 API 的登录函数，如果成功则传递用户名和密码，然后返回带有 user_id 的成功令牌，您可以将其存储在本地移动数据库中。我已经将 SQLite 用于移动存储。

然后在所有其他请求中，我使用该令牌进行身份验证并在服务器上执行操作。

您还可以在我的应用程序中添加自动登录功能，因此无需每次都登录。

# r - R tm removeWords stopwords 不删除停用词

> ID：14757489
> 
> 赞同：2
> 
> 时间：2013-02-07T17:42:16.833
> 
> 标签：r, nlp, stop-words, tm

我正在使用 R tm 包，发现几乎没有`tm_map`删除文本元素的功能对我有用。

例如，“工作”是指，我将运行：

```
d <- tm_map(d, removeWords, stopwords('english')) 
```

但是当我跑步时

```
ddtm <- DocumentTermMatrix(d, control = list(
    weighting = weightTfIdf,
    minWordLength = 2))
findFreqTerms(ddtm, 10) 
```

我仍然得到：

```
[1] the     this 
```

...等等，还有一堆其他的停用词。

我没有看到任何错误表明出现问题。有谁知道这是什么，以及如何使停用词删除功能正确，或诊断出我出了什么问题？

**更新**

之前有一个我没有发现的错误：

```
Refreshing GOE props...
---Registering Weka Editors---
Trying to add database driver (JDBC): RmiJdbc.RJDriver - Warning, not in CLASSPATH?
Trying to add database driver (JDBC): jdbc.idbDriver - Warning, not in CLASSPATH?
Trying to add database driver (JDBC): org.gjt.mm.mysql.Driver - Warning, not in CLASSPATH?
Trying to add database driver (JDBC): com.mckoi.JDBCDriver - Warning, not in CLASSPATH?
Trying to add database driver (JDBC): org.hsqldb.jdbcDriver - Warning, not in CLASSPATH?
[KnowledgeFlow] Loading properties and plugins...
[KnowledgeFlow] Initializing KF... 
```

是 Weka 正在删除 tm 中的停用词，对吗？所以这可能是我的问题？

**更新 2**

由此看来，[这个](https://stackoverflow.com/questions/6720229/help-with-adding-the-database-drivers-inorder-to-use-weka-classes)错误似乎是无关的。这是关于数据库，而不是关于停用词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:57:46.490

没关系，它正在工作。我做了以下最小示例：

```
data("crude")
crude[[1]]
j <- Corpus(VectorSource(crude[[1]]))
jj <- tm_map(j, removeWords, stopwords('english'))
jj[[1]] 
```

我已经连续使用了几个`tm_map`表达式。事实证明，我删除空格、标点符号等的顺序已经将新的停用词连接回来。

# tinymce - django-tinymce 删除引导 HTML 代码

> ID：14757490
> 
> 赞同：1
> 
> 时间：2013-02-07T17:42:16.957
> 
> 标签：tinymce, wysiwyg, django-cms, django-tinymce

我正在使用/测试 django-cms (2.3.5) + 基于引导程序的模板。使用 django-tinymce 我添加代码：

```
<a class="carousel-control right" href="#this-carousel-id" data-slide="next">›&lt;/a> 
```

但是 django-tinymce 删除了 "data-slide="next""

```
<a class="carousel-control right" href="#this-carousel-id">›&lt;/a> 
```

当然，没有任何效果。

使用 WYeditor 我发现无法修改 settings.py 中的选项。使用 tinyMCE 我可以：

```
TINYMCE_DEFAULT_CONFIG={
    # General options
    'mode': "textareas",                   
    'theme': "advanced", 
    'remove_linebreaks': "false",

    'convert_urls': "false",
    'relative_urls': "false",
    'theme_advanced_resizing': "true",
    'paste_auto_cleanup_on_paste': "true",
    #'preformatted': "true",

    'valid_elements': "+*[*]",

    'width': "100%",
    'height': "300px",    

    'theme_advanced_buttons1' : "formatselect,separator,bold,italic,hr,separator,link,unlink,separator,bullist,numlist,separator,undo,redo,",
    'theme_advanced_buttons2' : "|,help,code,|",
    'theme_advanced_buttons3' : ""  ,
    'theme_advanced_blockformats' : "p,h1,h2,h3,blockquote",
    'theme_advanced_toolbar_location' : "top",
    # Example content CSS (should be your site CSS)
    #'content_css': 'css/example.css',    
    #'content_css' : "/media/css/tiny_editor.css" 
} 
```

工作流程：

*   我打开 HTML 弹出窗口
*   我复制代码
*   我重新打开弹出窗口，想要的代码就在那里
*   我保存页面并重新打开弹出窗口，代码已更改！

我怎样才能避免这种行为？

我还添加了保留空格/制表符/注释/的选项，以保留绝对路径，但 /static/images/path/ 始终转换为 ../../../../../static/ *。

我必须检查/更改什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T08:46:54.723

我相信删除字段是由 cms 用作 python 包的 html5lib 完成的，您需要打开 html5lib 文件夹并打开 sanitizer.py，在第 184 行，代码为：

```
if name in self.allowed_attributes]) 
```

改成：

```
if name in self.allowed_attributes or re.match( r'data-.*',name)]) 
```

这将允许所有数据（无论）属性

对于 WYMeditor，已经允许使用 data-(whatever) 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:04:34.233

您将需要声明`data-slide`为链接/标签的有效属性。仔细查看 tinymce 的[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)设置

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-10T07:47:42.103

“false”和“true”在 False 和 True 上变化

# mongodb - Mongodb - 如何删除文档元素

> ID：14757492
> 
> 赞同：0
> 
> 时间：2013-02-07T17:42:18.820
> 
> 标签：mongodb, mongoose

我有 2 个模式，当我将 Match 打印到网页时会生成以下数据，但是这个 team[] 字段，我相信它在开发的前一个点就在那里，我已经设法让主队保存到正确的地方，我该如何摆脱这个领域，因为它是不必要的？

团队架构

```
var Team = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'name' : { type : String,
              validate : [validatePresenceOf, 'Team name is required'],
              index : { unique : true }
            }
}); 
```

匹配模式

```
var Match = new Schema({
  'key' : {
    unique: true,
    type: Number,
    default: getId
  },
  'hometeam' : { type: Schema.ObjectId, ref: 'Team' },
  'awayteam' : { type: Schema.ObjectId, ref: 'Team' }
}); 
```

匹配输出

```
[
  {
    "_id": "5112aeaf064432060d000002",
    "team": [
      {
        "key": 1360178863022,
        "_id": "5112aeaf064432060d000003"
      }
    ],
    "__v": 0,
    "key": 1360178863022
  },
  {
    "hometeam": "5106e7ef9afe3a430e000007",
    "_id": "5113b7ca71ec596125000005",
    "__v": 0,
    "key": 1360246730427
  }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:22:36.567

Mongoose 有一个用于验证的模式，但 MongoDB 没有。Mongo 是无模式的，这意味着它完全不知道您的数据应该代表什么。因此，如果您的架构过去允许进行此类更改，那么您有责任清理您造成的混乱。您可以对只有旧方案才有的值进行查询，然后调用 remove 来删除文档，但除此之外，它主要是体力劳动（或丢弃所有内容——这对开发也很有用）。

# ruby-on-rails - 创建对象时在rails中创建表行

> ID：14757502
> 
> 赞同：0
> 
> 时间：2013-02-07T17:42:46.083
> 
> 标签：ruby-on-rails, ruby, database, sqlite

这可能很容易，但我不确定这是否是在 Rails 中的初学者级别。

通过教程学习rails模型我发现了这个——

```
Use t = Todo.new to create an empty row in the Todo table and stores it in t 
```

在此之后我运行以下命令 -

```
> t.todo_item = "Assignment 1"
=> "Assignment 1" 
```

并`t.save`成功保存数据。到目前为止，我对此表示满意，但是当我执行`Todo.all`命令时，它只显示单行，我期待从最初的 2 个开始，id 为 nil。

因此，在创建对象时创建的初始空白行在第二个命令在 db 上运行后会破坏，或者是其他东西。

rails/ruby 中的 nil 值是指`NULL`? （因为这是我从 Todo.new [ id:nil todo_item:nil ...] 得到的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:47:20.677

`t.save`持久`t`化到数据库中，并被`id`填充。假设您使用 ActiveRecord，该`id`字段是一个自动字段并且是自动递增的。如果您有`Todo`一个`nil`值为 的`id`，则表明该对象尚未持久化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:47:43.743

当您调用`t=Todo.new`. 它只是在内存中创建一个对象。

调用`t.save`将记录写入数据库。

你应该能够通过这样做来保持你的理智：

```
n = Todo.all.size # size of table before changes
t = Todo.new # create new object
t.todo_item = "Assignment 1"
t.save # save it to db
Todo.all.size==n+1 # should return true 
```

# c# - Threadsafe 类通过套接字发送消息

> ID：14757503
> 
> 赞同：3
> 
> 时间：2013-02-07T17:42:48.500
> 
> 标签：c#, .net, multithreading, sockets

我正在尝试实现一个通过套接字向服务器发送消息的模块。它将在多线程环境中使用，因此这个“客户端”对象在线程之间共享。我的问题是我应该在 Send 方法中使用一个锁块来使这个类线程安全吗？（可能是的，但我看到了很多示例代码，其中没有任何锁定。）

这是我的`MessengerClient`课程的简化版本。

```
public class MessengerClient
{
    private Socket socket;
    public MessengerClient()
    {
        socket = new Socket(SocketType.Stream, ProtocolType.IPv4);
    }

    public void Connect(string host, int port)
    {
        socket.Connect(host, port);
    }

    public void SendMessage(IMessage message)
    {
        var buffer = ObjectConverter.ConvertToByteArray(message);

        var args = new SocketAsyncEventArgs();
        args.Completed += args_Completed;
        args.SetBuffer(buffer, 0, buffer.Length);

        //lock (socket)
        //{
            socket.SendAsync(args);
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:58:33.567

根据[Socket 的文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)：

> 线程安全：
> 
> 此类的实例是线程安全的。

因此，虽然[线程安全是一个有点模棱两可的术语](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx)，但在这种情况下，它的意思是这个类的方法，包括实例方法，从你的角度来看是原子的。您可以调用一个方法并知道它看起来好像完全在其他线程中同时调用的任何方法之前或完全之后运行。它永远不会执行一个方法的一半，然后是另一个，然后完成第一个（除非它可以保证在拆分它时输出与使它们完全原子化相同）。

所以，简而言之，你不需要添加`lock`. 该类`Socket`将确保不存在由于同时[或前后]从多个线程调用方法而导致的竞争条件。

# select - Dojo dgrid：（预）在渲染时选择行

> ID：14757504
> 
> 赞同：3
> 
> 时间：2013-02-07T17:42:55.933
> 
> 标签：select, dojo, dgrid

如何配置 dgrid 和它的存储来定义在呈现行时是否已经选择了行？

例如，如果我的行数据是这样的：

```
{
  id: 1,
  name: 'Item Name',
  selected: true
} 
```

我当前的代码是在商店被填充后遍历集合，但我确信必须有一种更有效的方法来做到这一点。

```
var items = [
  {id: 1, name: 'Item 1', selected: true},
  {id: 2, name: 'Item 2', selected: false}
];

require(
  [
    "dgrid/OnDemandGrid",
    "dgrid/Selection",
    "dojo/store/Memory",
    "dojo/_base/declare",
    "dojo/_base/array"
  ],

  function (OnDemandGrid, Selection, Memory, declare, array) {
    var store = new Memory({
        data: items,
        idProperty: "id"
    });

    var grid = new declare([OnDemandGrid, Selection])({
        selectionMode: "multiple",
        columns: {
          id: { label: "ID" },
          name: { label: "Name" }
        },
        store: store
      }, "MyGrid");

      array.forEach(items, function (item) {
        if (item.selected) {
          grid.select(grid.row(item.id));
        }
      });

      grid.startup();
    });
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:32:41.597

我找到了这篇文章并想就这个问题做出承诺。我想获取 dgrid 中的第一行数据，这就是我找到这篇文章的地方。但这对我的解决方案有帮助。

在第一列中，我添加了一个“获取”功能，并且能够找到并选择第一条记录。我希望这可以帮助任何试图获取或选择 dgrid 中的第一条记录的人。

```
var columns = [
  { label: "Name", field: '_item', x: null,
    formatter: lang.hitch(this, this._nameFormatter),
    get: lang.hitch(this, function(item){
        console.log(item)
        if(!this.x) {
          this.x = item.id;
          this.grid.select(item.id);
          this.detailsPane.setDetails(item.id);
          return item;
        } else {
          return item;
        }
      })
    },

   { label: 'Email', field: 'email',
     formatter: lang.hitch(this, this._emailFormatter)
   },

   { label: "Phone", field: "phone" },
   { label: 'Address', field: 'address' },
   { label: 'City', field: 'city' },
   { label: 'State', field: 'state' },
   { label: 'Zip Code', field: 'zipcode'}
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:00:17.233

它似乎`Selection.js`以同样的方式[https://github.com/SitePen/dgrid/blob/master/Selection.js#L433](https://github.com/SitePen/dgrid/blob/master/Selection.js#L433)，但我刚刚有了一个想法，如何使选择成为渲染过程的一部分：

```
var grid = new declare([OnDemandGrid, Selection])({
    selectionMode: "multiple",
    store: store,
    columns: {
        id: {
            label: "ID",
            get: function(item) {
                var grid = this.grid;
                if (item.selected === true) {
                    grid.select(grid.row(item.id));
                }
                return item.id;
            }            
        },
        name: { label: "Name" }
    },
    "MyGrid"
); 
```

看看它在行动：http: [//jsfiddle.net/phusick/stxZc/](http://jsfiddle.net/phusick/stxZc/)

# javascript - 匹配除 \(\d\) 之外的所有内容

> ID：14757505
> 
> 赞同：0
> 
> 时间：2013-02-07T17:43:02.907
> 
> 标签：javascript, regex

```
fadjfl (10) fdaf
fadjfl dafhaj (10)
fadjfl dafhaj 34 (10)
fadjfl dafhaj 34 dafads      (10)
fadjfl dafhaj 34 dafa(ds) ((  (10)
fadjfl 
fadjfl dafhaj 
fadjfl dafhaj 34 
fadjfl dafhaj 34 dafads      
fadjfl dafhaj 34 dafa(ds) (( 
```

我需要正则表达式，它将选择除**(10)之外的所有内容**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:49:10.250

如果您不询问有关正则表达式的理论问题，您应该始终指定一个实现（PHP、Javascript、.NET 等），无论如何这可能属于 cs.stackexchange.com。

不过，首先，如果您只想要 之前的字符串`\(\d+\)`，那么：

```
(.*?)(?:\(\d+\)|$) 
```

如果您想要所有内容，那么如果您可以有多个带括号的数字，那实际上是不可能的。有限数是可能的，*例如*3：

```
(.*?)(?:\(\d+\)|$)(.*?)(?:\(\d+\)|$)(.*?)(?:\(\d+\)|$) 
```

除非您使用 .NET：

```
((.*?)(?:\(\d+\)|$))* 
```

之后，您可以循环浏览`GroupCollection`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:47:01.783

如果您的意思是要从每行的开头匹配到每行的`"(10)"`结尾，并且假设您使用的是能够进行[前瞻](http://www.regular-expressions.info/lookaround.html)的工具，则可以使用以下内容：

```
.*?(?=\(10\)|$) 
```

它将匹配所有内容，直到出现以下字符`"(10)"`（但不包括`"(10)"`）或到达行尾。在这种情况下使用非贪婪量词 ( `.*?`) 很重要，否则正则表达式每次都会匹配整行。

如果您的意思是要匹配整个文档，`"(10)"`那么您可以轻松使用任何类型的字符串替换功能，替换`"(10)"`为`""`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:55:09.127

*一个不*`match()`包含某些东西的正则表达式会非常复杂。相反，只需删除您不想要的部分：

 *```
myStr.replace(/\(\d+\)/, "")
myStr.split(/\(\d+\)/) 
```*

# makefile - 为什么我警告说项目未使用“CMAKE_TOOLCHAIN_FILE”变量？

> ID：14757506
> 
> 赞同：67
> 
> 时间：2013-02-07T17:43:02.930
> 
> 标签：makefile, cmake, build

当我构建一些第三方代码时，我看到来自 CMake 的以下警告：

```
CMake Warning:
  Manually-specified variables were not used by the project:

    CMAKE_TOOLCHAIN_FILE 
```

是什么导致了这个警告？我检查了配置文件，但找不到定义此变量的任何地方。

我应该担心这个警告吗？如何修复它以使警告消失？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-06-13T10:45:23.803

这是 CMake 在您为其提供未使用的命令行选项时生成的标准警告。例如，当 CMakeLists.txt 文件实际上不使用该变量时传递`-DFOO=bar`给该变量。`cmake``FOO`

现在，这是一种特殊情况：`CMAKE_TOOLCHAIN_FILE`CMake 第一次配置您的构建时使用它，但是，由于您无法更改已配置构建的工具链，因此每隔一次都会忽略此变量；因此警告。

正如[回答者在评论中指出的那样](https://stackoverflow.com/questions/14757506/cmake-toolchain-file-was-not-used-by-the-project#comment21533590_14757506)，您可以放心地忽略警告。[Brad King 在 2011 年 2 月 7 日的 CMake 邮件列表中解释道](https://cmake.org/pipermail/cmake/2011-February/042556.html)：

> 我只能通过在已经存在的构建树上运行 CMake 来实现这一点。变量 *does* 在 *first* 在新树中运行时使用。它*不会*稍后使用，因为您不需要指定它来重新生成。CMake 已经在 CMakeFiles/CMakeSystem.cmake 中记录了加载文件的规则，并且不支持更改现有构建树的工具链。
> 
> IOW，这是警告的合法实例。

如果这个警告真的困扰你，你有几个选项来抑制它：

*   您可以在运行时传递该`--no-warn-unused-cli`选项`cmake`。

    不过，这有点生硬，因为它会抑制来自命令行上指定的未使用变量的所有警告。这可能会隐藏一些合法的警告。

*   您可以在第二次调用之前删除第一次调用 CMake 生成的临时文件。正如[js 的评论中提到的那样。](https://stackoverflow.com/questions/14757506/cmake-toolchain-file-was-not-used-by-the-project#comment30972978_17085081)，您需要删除`CMakeCache.txt`文件和`CMakeFiles`文件夹。例如，通过执行：

    ```
     rm -rf CMakeCache.txt CMakeFiles/ 
    ```

    但是，正如[javs 所说](https://stackoverflow.com/questions/14757506/cmake-toolchain-file-was-not-used-by-the-project#comment103108101_17085081)，这有点毫无意义。除非您实际更改工具链，否则没有理由删除这些生成的文件。尽管它确实使警告消失了，但它只是通过强制重新生成文件来做到这一点，这会浪费时间以获得最小的收益。

*   [Roland Sarrazin 的回答](https://stackoverflow.com/a/51444436)给出了第三种选择（也许是最好的）。这涉及通过在状态消息中输出变量来简单地*使用*变量。这样，它就不会被使用，因此不会触发警告。您甚至可能会发现该消息对于调试与工具链配置相关的问题很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-07-20T14:10:16.907

[Guillaume 的回答](https://stackoverflow.com/a/17085081/366904)已经解释了您收到此特定未使用变量警告的原因。

绕过警告的一种简单而有用的方法（不删除由第一次调用 CMake 生成的临时文件）是在状态消息中使用该变量。例如：

```
MESSAGE(STATUS "Using toolchain file: ${CMAKE_TOOLCHAIN_FILE}") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-05T00:15:52.607

如果您在设置 选项*后*使用 CLion 收到此消息`-DCMAKE_TOOLCHAIN_FILE=xxx`，您将需要删除所有 CMake 构建目录。

做

```
Tools-> CMake -> Show Generated CMake Files in File Manager 
```

然后删除所有构建目录。然后做

```
Tools-> CMake -> Reload the CMake Project 
```

执行此操作后，您仍然会收到警告，但至少在第一次运行 cmake 时会观察到它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-21T20:44:56.047

正如@js 指出的那样，这里也发生了同样的情况，这通常意味着您已经从过去的配置中构建了 cmake 的残余物。

执行 a `rm -rf CMakeCache.txt CMakeFiles/`，第一次执行 . 时消息将消失`cmake -DCMAKE_TOOLCHAIN_FILE=foo.cmake .`。第二次，他们将再次出现，正如@Guilaume 回答的那样，没关系。

PS：我首先做了一个`git clean --force`，但由于这些文件通常在 中`.gitignore`，因此*不会*重置构建。

# java - 在eclipse中使用create txt并打包在jar中

> ID：14757507
> 
> 赞同：0
> 
> 时间：2013-02-07T17:43:07.760
> 
> 标签：java, executable-jar, readfile

我有个问题，

对于我的项目的性质，我需要读取一个 txt 文件，打包在一个 JAR 中，这是我的情况：

我在 Eclipse 中有一个项目，我在其中创建了一个 txt 文件： project->new->new txt file in this file 我将存储我的登录设置。

我想创建一个可执行的 JAR，当我执行这个 JAR 时，我希望使用存储在 txt 文件中的数据。

这个 Jar 应该尽可能独立，因为我需要在许多不同的地方和情况下执行它，而且我只能有一个文件（jar），这个 txt 应该放在 jar 中。

我怎样才能做到这一点？

我希望以前不要回答同样的问题（我一直在寻找，但没有找到任何回应）如果是重复的问题，我提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:53:17.797

非常感谢您的所有回答，我已经用 nex instructino 解决了这个问题：

in = new BufferedReader(new InputStreamReader(AppTask.class.getClassLoader().getResourceAsStream(AppData.SettingsFile)));

它工作正常。再次感谢，再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:54:52.283

您不能写入存储在 JAR 文件中的文件。

您可以将 JAR 文件和文本文件一起存储在某处，并使用批处理文件 (.bat) 以文件名作为参数来执行 JAR。

这样，您将只有一个文件可以执行。

那能完成这项工作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T17:55:16.487

您应该从核心 Java 中查看“Class.getResourceAsStream(String name)”。您可以使用它从应用程序中打开一个文本文件（或任何其他类型的文件），打包在一个 jar 或其他文件中。

请注意，如果您在文件中存储敏感信息，任何拥有该 jar 的人都可以查看它；如果您不想查看信息，则需要对信息进行加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:56:42.823

您可以通过以下方式获取 .jar 的位置

getClass().getProtectionDomain().getCodeSource().getLocation()

然后从那里创建一个具有此位置的 JarFile，获取 txt JarEntry 并通过 FileOutputStream 将其写出。然后您可以读取文件的内容。

# sql-server - SQL 列中 char/varchar 的默认值：空格（1）还是空字符串？

> ID：14757514
> 
> 赞同：3
> 
> 时间：2013-02-07T17:43:31.717
> 
> 标签：sql-server

我通常可以在 SO 中找到我的问题的答案，但我找不到关于这个主题的信息（可能是我提出了错误的问题）。

背景：六年前，一些开发人员将 Visual FoxPro 数据库升级为 SQL Server 2005（表结构和数据）。该过程引入了各种错误，现在我正在尝试修复这些错误以改进数据结构和性能（将 TEXT 更改为 VARCHAR(MAX)，将一些浮点数更改为 DECIMAL，删除未使用的列......）

我之前的任务是：查找分配给所有表中不存在相应默认对象的所有列的所有*默认约束*`sys.default_constraints`，并修复它们，将空字符串分配给`char`/ `varchar`，`0`to`Decimal`等......（超过 30%列坏了...是的，我知道-_- wtf！我的脚本运行顺利，到目前为止一切顺利。

只是为了好玩，我`SP_HELP`在其中一个表中执行以验证固定列，但注意到`char`我没有更改的列的默认值为`(space((1)))`，而不是我使用的普通空字符串`''`。

**我的问题是**：我是否应该将这些列原封不动地保留为默认值`(space((1)))`？还是我应该将其更改为`''`（更改脚本来做到这一点真的很容易）？

我敢打赌我应该改变它（在每次插入时调用一个函数不能是免费的），但想先确定一下。

PD：我不是 DBA，而是一个时不时必须戴上 DBA 帽子的开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T17:49:02.710

很多时候，争论是关于[null 与默认空字符串（](https://stackoverflow.com/questions/5618357/sql-server-null-vs-empty-string)[此处](https://dba.stackexchange.com/questions/59/when-to-use-null-and-when-to-use-an-empty-string)为dba.se 争论）。在这种情况下，我认为**主要关注的是应用程序的任何部分是否基于 column 中的单个空格执行逻辑**。与此相比，存储和速度问题将是最小的，除了最大的表和最高的 TPS 情况外，可能甚至可以忽略不计。我还认为很难可靠地检测 , 和 之间的任何有意义的性能差异，`insert ' '`即使您说过它不能是免费的。`insert ''``insert space(1)`

**更新**

我刚刚注意到您只提到了`char`具有此默认值的列。在这种情况下，我认为插入空字符串或单个空格并不重要，因为它们将作为空格存储到列的长度：

```
create table #CharTest ( Chars char(2) )
insert into #CharTest select ''
insert into #CharTest select ' '
insert into #CharTest select '  '
select distinct Chars from #CharTest
-- returns 1 row! 
```

在这一点上，我想说您可以摆脱空间，只使用空字符串默认值。一个潜在的警告是，如果您有一个可为空的 char 列，并且[ANSI_PADDING](http://msdn.microsoft.com/en-us/library/ms187403.aspx)在创建时处于关闭状态。但是，在测试 ansi-null、char、varchar 和 nullibility 的各种组合时，我无法提出`'' = ' '`错误的情况（无论如何，在 SQL Server 2008 R2 中）。嗯……我需要去读书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:48:18.987

如果您的应用程序对此问题不可知，那么要考虑的一件事是零长度`varchar`列将占用比单个空间列略少的空间。

您为列值每行保存 1 个字节，如果后面没有任何非空可变长度列，则可能在列偏移数组中保存另外两个字节。

我可能会使用`NULL`而不是其中任何一个。

# mysql - 使用默认 0000-00-00 创建 Mysql 日期时间列

> ID：14757518
> 
> 赞同：2
> 
> 时间：2013-02-07T17:43:54.163
> 
> 标签：mysql, sql, datetime

我想用这样的列创建一个表。

```
CREATE  TABLE `user_gender` (
  `user_gender_id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `user_gender_title` VARCHAR(100) NOT NULL ,
  `user_gender_modified_on` DATETIME NOT NULL DEFAULT 0000-00-00 00:00:00 ,
  `user_gender_created_on` DATETIME NOT NULL DEFAULT 0000-00-00 00:00:00 ,
  PRIMARY KEY (`user_gender_id`) )
ENGINE = InnoDB; 
```

但似乎默认的 0000-00-00 不能在 mysql 中工作。但是我从 joomla 数据库模型中模仿了它，所以我很确定它应该可以正常工作。但我的 phpadmin 一直说 -00-00 中存在语法错误。谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:45:48.273

尝试将 drefault 值放在引号中：

```
CREATE  TABLE `user_gender` (
  `user_gender_id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
  `user_gender_title` VARCHAR(100) NOT NULL ,
  `user_gender_modified_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,
  `user_gender_created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,
  PRIMARY KEY (`user_gender_id`) )
ENGINE = InnoDB; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:46:54.227

您缺少默认值的引号。

```
CREATE  TABLE `user_gender` (
`user_gender_id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`user_gender_title` VARCHAR(100) NOT NULL ,
`user_gender_modified_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`user_gender_created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`user_gender_id`) )
ENGINE = InnoDB; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T03:23:42.603

这似乎已被 MySQL 5.5 打破。我最近升级并破坏了一个依赖于在特定实例中设置的值“0000-00-00 00:00:00”的应用程序。它以前一直有效，但不再是唯一的变化是平台版本更新。

# java - Java Android 按钮不起作用

> ID：14757519
> 
> 赞同：-3
> 
> 时间：2013-02-07T17:43:57.513
> 
> 标签：java, android, android-view

我是 Java Android 编程的新手。我想将一个按钮与一个侦听器集成，但我无法让它工作。

```
public class MainClass extends Activity implements OnClickListener{

   private EditText text;   

   @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (EditText) findViewById(R.id.editText1);
        Log.e("AOWN", "STARTED !");
    }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
      // Inflate the menu; this adds items to the action bar if it is present.
      getMenuInflater().inflate(R.menu.activity_main, menu);
      return true;
   }

   @Override
   public void onClick(View view){
       Log.e("AOWN", "I just clicked !");
   }
} 
```

我知道如何迭代所有按钮（R 类），但不会调用 onClick 方法！

我试图添加一个测试按钮并为其附加一个侦听器，它正在工作，但它的代码要多得多，而且我很懒。

这是可行的，但是要编写更多代码，我正在关注一本书，其中使用 onClick() 方法触发了该操作。

```
public class MainClass extends Activity{
   @Override
   public void onCreate(Bundle savedInstanceState){
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      Log.e("AOWN", "STARTED !");

      // Like in java with SelectionListener
      Button bTest = (Button)findViewById(R.id.button1);
      bTest.setOnClickListener(new OnClickListener(){
          @Override
          public void onClick(View v){
              Log.e("AOWN", "It's working but it's much more to code and I'm freakn lazy.");
          }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:46:41.407

您从未在原始代码中设置 onClickListener。你只需要做这样的事情：

```
 Button bTest = (Button)findViewById(R.id.button1);
  bTest.setOnClickListener(this) 
```

# javascript - Kendo UI Editor - 强制所有新链接到新窗口

> ID：14757523
> 
> 赞同：4
> 
> 时间：2013-02-07T17:44:00.843
> 
> 标签：javascript, kendo-ui

我们正在使用 Kendo UI Editor 控件。如何强制它只插入将在新窗口中打开的链接（即 target="_blank"）？

这需要在 javascript 中完成，而不是 Razor。我已经尝试在执行和选择事件中使用它，但到目前为止都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-29T10:07:26.750

一个简单的解决方案，无需每次都分配编辑器值

```
var editor = $("#editor").data("kendoEditor");

$(editor.body).find("a").attr("target", "_blank"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:26:54.270

有两种方法可以做到这一点：

1.  自动选中“插入链接”对话框中的“在新窗口中打开链接”复选框。这是一个示例实现：http: [//jsbin.com/ekibud/1/edit](http://jsbin.com/ekibud/1/edit)。这个想法是订阅`execute`编辑器的事件，如果命令是“createlink”，请选中复选框。这是所需的代码：

    ```
    $("#editor").kendoEditor({
       execute: function(e) {
          if (e.name == "createlink") {
            setTimeout(function() {
              $("#k-editor-link-target").attr("checked", true);
            });
          }
       }
    }); 
    ```

2.  查找编辑器内容中的所有链接并设置其目标属性。这可以通过 JavaScript 和正则表达式替换来完成：

    ```
    var editor = $("#editor").data("kendoEditor");

    var html = editor.value();

    // remove all existing target attributes

    html = html.replace(/<a[^>]*/, function(a) {
      // first remove existing target attribute
      a = a.replace(/target\s*=\s*['"][^"']*['"]/, '');

      // then add a target attribute
      a += ' target="_blank"';

      return a;
    });
    // Use the updated html 
    ```

# python - 如何从类中调用外部函数 - python

> ID：14757525
> 
> 赞同：1
> 
> 时间：2013-02-07T17:44:05.967
> 
> 标签：python, sockets, inheritance, socketserver

我正在尝试收集通过套接字解析的数据。这是我的代码：

```
import pickle
import SocketServer

class SocketReciever(SocketServer.BaseRequestHandler):

    def handle(self):
        sint = self.request.makefile('rb')
        objectt = pickle.load(sint)
        #print(objectt)
        ParentClassCall(objectt)

if __name__ == "__main__":
    HOST, PORT = "localhost", 60

    # Create the server, binding to localhost on port 9999
    server = SocketServer.TCPServer((HOST, PORT), SocketReciever)
    # Activate the server; this will keep running until you
    # interrupt the program with Ctrl-C
    server.serve_forever()

data=[]
def ParentClassCall(currentdata):
    data.append(currentdata) 
```

我的问题是如何从 SocketReciever 类中调用 ParentClassCall 函数？

我知道这种方法存在安全问题，但它会在没有互联网接入的计算机上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:35:45.853

这是您示例的简化版本，用于演示问题：

```
class Foo(object):

  def __init__(self):
    pass

  def do_something(self):
    not_yet_defined_function()

if __name__ == "__main__":
  foo = Foo()
  foo.do_something()

def not_yet_defined_function():
  print "It worked!" 
```

结果是一样的：

```
Traceback (most recent call last):
  File "tmp.py", line 11, in <module>
    foo.do_something()
  File "tmp.py", line 7, in do_something
    not_yet_defined_function() 
```

问题是您试图在定义之前访问该函数。python 解释器按顺序读取文件，按顺序执行命令。`class`and`def`关键字只是创建（类和函数）对象的命令。因此，您需要确保在开始使用它们之前定义所有对象。

通过更改示例以首先定义函数：

```
class Foo(object):

  def __init__(self):
    pass

  def do_something(self):
    not_yet_defined_function()

def not_yet_defined_function():
  print "It worked!"

if __name__ == "__main__":
  foo = Foo()
  foo.do_something() 
```

然后你得到你想要的结果：

```
lap:~$ python tmp2.py
It worked! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:29:55.037

Python 永远不会定义`ParentClassCall()`，因为它停在 line 处`server.serve_forever()`。在主节之前定义函数。

# c# - ElementHost + FlowDocument = GC 不工作，内存不断增加

> ID：14757527
> 
> 赞同：5
> 
> 时间：2013-02-07T17:44:15.663
> 
> 标签：c#, wpf, winforms, flowdocument, elementhost

## **[更新，见底部！]**

我们的 WinForms 应用程序`FlowDocumentReader`在`ElementHost`. 我在一个简单的项目中重新创建了这个问题并添加了下面的代码。

## 应用程序的作用

当我按下`button1`：

*   `UserControl1`仅包含 a 的A`FlowDocumentReader`被创建并设置为`ElementHost`'s`Child`
*   A`FlowDocument`是从一个文本文件创建的（它只包含一个`FlowDocument`带有`StackPanel`几千行的 a `<TextBox/>`）
*   的`FlowDocumentReader`属性`Document`设置为此`FlowDocument`

此时，页面呈现`FlowDocument`正确。正如预期的那样，使用了大量内存。

## 问题

*   如果`button1`再次单击，内存使用量会增加，并且每次重复该过程时都会不断增加！尽管正在使用大量新内存，但 GC 并未收集！没有不应该存在的引用，因为：

*   如果我按下`button2`which set`elementHost1.Child`为 null 并调用 GC（参见下面的代码），会发生另一件奇怪的事情 - 它不会清理内存，但如果我继续点击它几秒钟，它最终会释放它！

对于我们来说，所有这些内存都被使用是不可接受的。此外，`ElementHost`从`Controls`集合中删除`Disposing`它，将引用设置为 null，然后调用 GC 不会释放内存。

## 我想要的是

*   如果`button1`多次单击，内存使用量不应继续上升
*   我应该能够释放所有内存（这只是“真实”应用程序中的一个窗口，我想在它关闭时这样做）

这不是内存使用无关紧要的事情，我可以让 GC 随时收集它。它实际上最终显着减慢了机器的速度。

## 编码

如果您只想下载 VS 项目，我已在此处上传：http: [//speedy.sh/8T5P2/WindowsFormsApplication7.zip](http://speedy.sh/8T5P2/WindowsFormsApplication7.zip)

否则，这里是相关代码。只需将 2 个按钮添加到设计器中的表单并将它们连接到事件。Form1.cs：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Documents;
using System.IO;
using System.Xml;
using System.Windows.Markup;
using System.Windows.Forms.Integration;

namespace WindowsFormsApplication7
{
    public partial class Form1 : Form
    {
        private ElementHost elementHost;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string rawXamlText = File.ReadAllText("in.txt");
            using (var flowDocumentStringReader = new StringReader(rawXamlText))
            using (var flowDocumentTextReader = new XmlTextReader(flowDocumentStringReader))
            {
                if (elementHost != null)
                {
                    Controls.Remove(elementHost);
                    elementHost.Child = null;
                    elementHost.Dispose();
                }

                var uc1 = new UserControl1();
                object document = XamlReader.Load(flowDocumentTextReader);
                var fd = document as FlowDocument;
                uc1.docReader.Document = fd;

                elementHost = new ElementHost();
                elementHost.Dock = DockStyle.Fill;
                elementHost.Anchor = AnchorStyles.Top | AnchorStyles.Bottom | AnchorStyles.Left | AnchorStyles.Right;
                Controls.Add(elementHost);
                elementHost.Child = uc1;
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (elementHost != null)
                elementHost.Child = null;

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
        }
    }
} 
```

UserControl1.xaml

```
<UserControl x:Class="WindowsFormsApplication7.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <FlowDocumentReader x:Name="docReader"></FlowDocumentReader>
</UserControl> 
```

## 编辑：

我终于有时间再处理这个问题了。我尝试的不是`ElementHost`每次按下按钮时重用、处理和重新创建它。虽然这确实有点帮助，但从某种意义上说，当您点击按钮 1 时，内存会上升和下降，而不是仅仅上升，它仍然不能解决问题 - 内存总体上会上升，并且没有被释放表格已关闭。所以现在我要悬赏。

由于似乎对这里的问题有些混淆，以下是重现泄漏的确切步骤：

1) 打开任务管理器

2）点击“开始”按钮打开表格

3）垃圾邮件十几或两次点击“GO”按钮并观察内存使用情况 -**现在你应该注意到泄漏**

4a) 关闭表格 -**内存不会被释放。**

或者

4b）垃圾邮件“CLEAN”按钮几次，**内存将被释放**，说明这不是引用泄漏，是GC/finalization问题

**我需要做的是在步骤 3) 中防止泄漏，并在步骤 4a) 中释放内存。**实际应用程序中没有“CLEAN”按钮，它只是显示没有隐藏的引用。

**在点击“GO”按钮几次后，我使用 CLR 分析器检查内存配置文件（此时内存使用量约为 350 MB）。事实证明，有 16125 个（文档中数量的 5 倍）`Controls.TextBox`和 16125 个`Controls.TextBoxView`都植根于 16125 个`Documents.TextEditor`对象中，这些对象植根于终结队列中 - 请参见此处：**

[http://i.imgur.com/m28Auix.png](https://i.imgur.com/m28Aiux.png)![废话](../Images/53692493e6d3bc29f9da5fc8f7e3cc26.png)

任何见解表示赞赏。

## 另一个更新 - 已解决（有点）

我刚刚在另一个不使用 an`ElementHost`或 a 的纯 WPF 应用程序中再次遇到了这个问题`FlowDocument`，所以回想起来，这个标题具有误导性。正如 Anton Tykhyy 所解释的，这只是 WPF`TextBox`本身的一个错误，它没有正确处理其`TextEditor`.

我不喜欢 Anton 建议的解决方法，但他对错误的解释对我相当丑陋但简短的解决方案很有用。

当我要销毁包含 的控件的实例时`TextBoxes`，我会这样做（在控件的代码隐藏中）：

```
 var textBoxes = FindVisualChildren<TextBox>(this).ToList();
        foreach (var textBox in textBoxes)
        {
            var type = textBox.GetType();
            object textEditor = textBox.GetType().GetProperty("TextEditor", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(textBox, null);
            var onDetach = textEditor.GetType().GetMethod("OnDetach", BindingFlags.NonPublic | BindingFlags.Instance);
            onDetach.Invoke(textEditor, null);
        } 
```

在哪里`FindVisualChildren`：

```
 public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    } 
```

基本上，我做`TextBox`应该做的事情。最后我也打电话`GC.Collect()`（不是绝对必要的，但有助于更快地释放内存）。这是一个非常丑陋的解决方案，但似乎可以解决问题。不再`TextEditors`停留在完成队列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:55:45.273

我在这里找到了这篇博文：[Memory Leak while using ElementHost when using a WPF User control inside a Windows Forms project](http://sumits.net/blog/?p=93)

所以，在你的 Button2 点击事件中试试这个：

```
if (elementHost1 != null)
{
    elementHost1.Child = null;
    elementHost1.Dispose();
    elementHost1.Parent = null;
    elementHost1 = null;
} 
```

我发现在此之后调用 GC.Collect() 可能不会立即减少内存使用量，但它不会在某个点之后增加。为了更好地复制，我制作了第二种形式，它会打开你的`Form1`. 有了这个我尝试打开你的表单大约 20 次，总是点击 Button1 然后 Button2 然后关闭表单，内存使用量保持不变。

编辑：奇怪的是，内存似乎在再次打开表单后被释放，而不是在 GC.Collect() 上。我不禁发现这是`ElementHost`控件的错误。

编辑2，我的`Form1`：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        m_uc1 = new UserControl1();
        elementHost1.Child = m_uc1;
    }

    private UserControl1 m_uc1;

    private void button1_Click(object sender, EventArgs e)
    {
        string rawXamlText = File.ReadAllText(@"in.txt");
        var flowDocumentStringReader = new StringReader(rawXamlText);            
        var flowDocumentTextReader = new XmlTextReader(flowDocumentStringReader);           
        object document = XamlReader.Load(flowDocumentTextReader);
        var fd = document as FlowDocument;

        m_uc1.docReader.Document = fd;

        flowDocumentTextReader.Close();
        flowDocumentStringReader.Close();
        flowDocumentStringReader.Dispose();

    }        

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (elementHost1 != null)
        {
            elementHost1.Child = null;
            elementHost1.Dispose();
            elementHost1.Parent = null;
            elementHost1 = null;
        }
    } 
```

即使没有明确的 GC.Collect() 我也不会再遇到任何内存泄漏。请记住，我尝试从另一个表单多次打开此表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T14:46:54.917

确实，`PresentationFramework.dll!System.Windows.Documents.TextEditor`有一个终结器，因此除非处理得当，否则它会卡在终结器队列中（连同挂在它上面的所有东西）。我四处`PresentationFramework.dll`寻找，不幸的是我不知道如何让`TextBox`es 处理他们附加`TextEditor`的 s。唯一相关的调用`TextBox.OnDetach`是 in `TextBoxBase.InitializeTextContainer()`。在那里你可以看到，一旦 a`TextBox`创建了 a `TextEditor`，它只会处理它以换取创建一个新的。释放自身的另外两个条件`TextEditor`是应用程序域卸载或 WPF 调度程序关闭时。前者看起来更有希望，因为我发现无法重新启动关闭的 WPF 调度程序。WPF 对象不能直接在应用程序域之间共享，因为它们不是从`MarshalByRefObject`，但 Windows 窗体控件可以。尝试将您`ElementHost`放在单独的应用程序域中并在清除表单时将其拆除（[您可能需要先关闭调度](http://www.infosysblogs.com/microsoft/2007/08/visual_studio_2008_wpf_and_app.html)程序）。另一种方法是使用 MAF 插件将您的 WPF 控件放入不同的应用程序域；看到[这个问题](https://stackoverflow.com/questions/4677988/wpf-app-embedd-wpf-window-control-from-other-appdomain)。

# javascript - ie7 不使用 jquery 执行加载的脚本

> ID：14757530
> 
> 赞同：0
> 
> 时间：2013-02-07T17:44:39.413
> 
> 标签：javascript, jquery, tags, internet-explorer-7

在我的主页上，我有 js 功能

```
function loadNext(last){
    var index = parseInt($("#contentSupplier table tr:last td:first").html()) + 1;
    $.get("suppliernext.php?index=" + index + "&" + "last=" + last,      $("#supplierForm").serialize(), function(data){
        $("#contentSupplier table tr:last").after(data);

    });
} 
```

在加载suppliernext.php的页面上我有这个代码

```
<script>
    $("#loadnext").attr('onclick', 'loadNext(<?=$ps?>)');
<?php 
 if($i >= $rowcount)
{
    echo "$('#loadnext').hide();";
}
?>
</script> 
```

这会更改第一页上单击功能的按钮。
ie7执行这段代码但不改变oncick函数

在 ie8 chrome 和 mozzila 中它工作正常。我怎样才能让它在ie7中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:47:58.643

不要用 attr 设置 onclick！利用`on()`

```
$("#loadnext").off('click').on('click', function() {loadNext(<?=$ps?>);}); 
```

# seam - 'a4j:commandButton' oncomplete 处理使支持 bean 的变量无效 (seam2.3.0.final/jsf2/rf4)

> ID：14757532
> 
> 赞同：0
> 
> 时间：2013-02-07T17:44:46.397
> 
> 标签：seam

我有一个带有 Seam 生成的 Entity 和 EntityHome 类型支持 bean 的输入表单。由于用户在保存输入的数据之前需要一个确认弹出对话框，因此我将自动生成的 'h:commandButton' 替换为 'a4j:commandButton' 并将一个模式面板附加到它的 'oncomplete' 事件中：

Edit.xhtml 输入表单位：

```
. . . . . 

<div class="actionButtons">

        <a:commandButton id="save"
                      value="Save"
                 oncomplete="#{rich:component('confirmCreatePanel')}.show();"
                   disabled="#{!userProjectRolesHome.wired}"
                   rendered="#{!userProjectRolesHome.managed}">
            <s:conversationId/>
        </a:commandButton>

    </div>

    <rich:popupPanel modal="true" id="confirmCreatePanel" moveable="false" resizeable="false" height="120">
      <f:facet name="header">Confirm</f:facet> 
      <div class="actionButtons">
        <rich:panel style="align:center;">
          <h:outputText value="Are you sure you want to create this ?" />
          <table width="100%">
            <tbody>
              <tr>
                <td align="center" width="50%">
                  <a:commandButton type="submit" value="Yes" action="#{userProjectRolesHome.persist}"
                    oncomplete="#{rich:component('confirmCreatePanel')}.hide()"/>
                </td>
                <td align="center" width="50%">
                  <a:commandButton type="submit" value="No" onclick="#{rich:component('confirmCreatePanel')}.hide()"/>
                </td>
              </tr>
            </tbody>
          </table>
        </rich:panel>
      </div> 
    </rich:popupPanel> 
```

当单击“保存”按钮时，“confirmCreatePanel”会弹出 OK，但是当用户单击 mod.panel 时“是”并调用“persist()”时，我会收到一个异常，抱怨成员变量为“无效的'。

如果我从“a4j:commandButton”或“h:commandButton”的“action”属性中调用“persist()”，一切正常。“未完成”处理把事情搞砸了，它曾经工作过。

相同的代码适用于 Seam 2.2.0.Final/RF3.3.3/JSF1.2。升级到 Seam2.3.0.Final/RF4/JSF2 后它现在不工作了这里有什么变化？

```
2013-02-06 12:57:50,394 ERROR [clahrc.session.UserProjectRolesHome]     user-project-role persisting or emailing failed: 
 javax.validation.ConstraintViolationException: Validation failed for classes     [clahrc.entity.UserProjectRoles] during persist time for groups    [javax.validation.groups.Default, ]
List of constraint violations:[
    ConstraintViolationImpl{interpolatedMessage='may not be null',     propertyPath=projects, rootBeanClass=class clahrc.entity.UserProjectRoles,     messageTemplate='{javax.validation.constraints.NotNull.message}'}
    ConstraintViolationImpl{interpolatedMessage='may not be null', propertyPath=users,     rootBeanClass=class clahrc.entity.UserProjectRoles,     messageTemplate='{javax.validation.constraints.NotNull.message}'}
    ConstraintViolationImpl{interpolatedMessage='may not be null', propertyPath=roles,  rootBeanClass=class clahrc.entity.UserProjectRoles, messageTemplate='{javax.validation.constraints.NotNull.message}'}
]
    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:159)
    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:94)
    at org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:175)
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:73)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:264)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:186)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081)
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:973)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.persistence.EntityManagerInvocationHandler.invoke(EntityManagerInvocationHandler.java:46)
    at $Proxy77.flush(Unknown Source)
    at org.jboss.seam.framework.EntityHome.persist(EntityHome.java:85)
    at clahrc.session.UserProjectRolesHome.persist(UserProjectRolesHome.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:97)
    at org.jboss.seam.util.Work.workInTransaction(Work.java:61)
    at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:186)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:104)
    at clahrc.session.UserProjectRolesHome_$$_javassist_seam_21.persist(UserProjectRolesHome_$$_javassist_seam_21.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335)
    at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:348)
    at org.jboss.el.parser.AstPropertySuffix.invoke(AstPropertySuffix.java:58)
    at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
    at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
    at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53)
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
    at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397)
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:59:20.540

将 's:conversationId' 添加到模型面板的 'Yes' 'a:commandButton' 似乎现在已经修复了它。

# php - 在flush()之后应用css ；ob_flush(); 功能

> ID：14757533
> 
> 赞同：1
> 
> 时间：2013-02-07T17:44:47.573
> 
> 标签：php, javascript, jquery, html, css

我正在从 mysql 数据库中提取大量数据，这些数据需要 10 多分钟才能完成运行，我正在尝试向我的应用程序添加一些视觉效果，因此在脚本运行时我正在显示加载图像 gif。

```
<img id="dvLoading" alt="src="/img/loadingpage.gif" 
onload="hideload()"/> 
```

我的脚本是两部分，当第一部分完成时，我将这两个`php`函数`flush(); ob_flush();`用于显示缓冲区中的数据，然后运行第二部分。所以在第二部分完成后，我想通过 javascript 代码隐藏图像

```
<script>
function hideload(){
  document.getElementById('dvLoading').style.display = 'none';
}
</script> 
```

问题是，当我在调用 php 函数之前放置 JavaScript 代码时`flush()` 它可以工作并隐藏图像，但是当我将 javascript 代码放在`flush()`java 脚本函数之后它不起作用。

如果我确切知道脚本需要多长时间，我将使用 use`fadeout()`函数，但这取决于用户的选择。

任何建议或想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:49:18.663

您可以一起跳过该函数并`this.display='none'`直接放入`onload`参数中。它可能包含任何应在页面完全加载后立即执行的 JavaScript 代码。例子：

```
<body onload="hideload();"> 
```

调用失败的原因`hideload()`是页面加载完成时它不存在（至少它还没有被javascript运行时解析）

**编辑：** 批准@mongotops 编辑，因为他已经接受它作为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:03:24.257

为什么要在加载事件中隐藏它，而更好的方法是初始化默认 CSS 选项。

像这样

```
<div id="dvLoading" style="display:none;">
 <img  src="/img/loadingpage.gif" />
</div> 
```

它更快更干净。而且您不需要为此使用 PHP。您不应该真正混合 JavaScript 和 PHP 职责。

在 jquery-ajax 你可以这样处理：

```
$.ajax({

   beforeSend: function(){
     $("#dvloading").show(100);
   },
   complete : function(){
     $("#dvloading").hide(100);
   }
}); 
```

# objective-c - webView.loading 始终设置为 no

> ID：14757543
> 
> 赞同：1
> 
> 时间：2013-02-07T17:45:31.110
> 
> 标签：objective-c, xcode

我正在实现 UIActivityIndi​​catorView 以显示 UIWebView 正在加载。我必须`if (_Annoucements.loading == YES) { [loadingSpinner startAnimating]; }`找出它是否正在加载。然而，这从来没有开始动画。当我有`loadingSpinner.hidesWhenStopped = YES`微调器时，根本就不会出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:17:02.367

除非您`if`反复调用该语句，否则这将无法实现您想要的。`_Announcements.loading`只是返回当前状态。

您要做的是设置委托：`_Announcements.delegate = self`并使用以下方法：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
   [loadingSpinner startAnimating];
}
- (void)webViewDidFinishLoad:(UIWebView *)webView {
   [loadingSpinner stopAnimating];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
   [loadingSpinner stopAnimating];
} 
```

# c++ - 虚拟析构函数规则

> ID：14757549
> 
> 赞同：2
> 
> 时间：2013-02-07T17:45:51.543
> 
> 标签：c++, memory

我对何时以及为什么使用虚拟析构函数有些困惑。

```
class Q { 
private: 
    int i; 
    int *pi; 
    int *p; 
public: 
    Q(int k); 
    print(); 
    ~Q() {delete pi; delete p;} 
}; 
class DQ : public Q 
{
private: 
    int *pd; 
public: 
    DQ(); 
    ~DQ(); 
}; 
```

我明白，如果我主要分配一个

```
Q *p = new DQ(); 
```

并删除 p，然后只调用 Q 的析构函数。

但是在每种情况下会发生什么：

1.  只有 ~Q() 是虚拟的，而 ~DQ() 不是？
2.  只有 ~DQ() 是虚拟的，而 ~Q() 不是？
3.  ~Q() 是虚拟的，而 ~DQ() 是虚拟的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:07:46.073

1.) if `~Q()`is virtual，`~DQ()`不管你写`virtual`不写都是虚拟的，所以两个析构函数都会被调用

2.) 调用`delete p;`是未定义的行为（可能只会调用`Q`' 的析构函数，但可能会崩溃或做任何事情，因为它是未定义的）。虚拟性是向下传播的，而不是向上传播的。

3.) 与#1 相同的情况，除了你明确写了`virtual`（顺便说一句，这是一个很好的做法）。两个析构函数都会被调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:08:08.790

> 我对何时以及为什么使用虚拟析构函数有些困惑。

您需要在基类中使用虚拟析构函数才能多态地删除对象；也就是说，通过指向基类型的指针删除派生类型的对象。

> 我知道，如果我主要分配 a`Q *p = new DQ();`并删除 p，那么只会调用 Q 的析构函数。

不，你会得到未定义的行为。它可能会调用 Q 的析构函数，或者它可能会向你的老板发送一封侮辱性的电子邮件——第一种可能性更大，但原则上任何事情都可能发生。

> 只有 ~Q() 是虚拟的，而 ~DQ() 不是？

这不可能。如果一个函数在类中是虚函数，那么它在任何派生类中也是虚函数。

> 只有 ~DQ() 是虚拟的，而 ~Q() 不是？

那么你就不能通过指向;`DQ`的指针来删除一个类型的对象。`Q`如果你尝试，你会得到未定义的行为。但是，如果您从 派生另一个类`DQ`，那么您可以通过指向`DQ`（但*不是* `Q`）的指针删除它们，这要归功于它的虚拟析构函数。

> ~Q() 是虚拟的，而 ~DQ() 是虚拟的？

那么一切都很好，您可以通过基类指针安全地删除对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:09:53.070

1.~DQ()和~Q()都按照~DQ(),~Q()的顺序调用。2\. 只调用~Q()。3\. ~DQ() 和 ~Q() 都被调用。

# php - PHP函数确定数组中的所有元素是否为空

> ID：14757550
> 
> 赞同：1
> 
> 时间：2013-02-07T17:45:52.840
> 
> 标签：php, arrays, isnull

我想知道是否有内置的或更好的方法来测试数组的所有元素是否为空。

这是我的（工作）解决方案：

```
<?php
    function cr_isnull($data_array){    
        foreach($data_array as $value){ 
            if(!is_null($value)){return false;}
        }
    return true;
    }
?> 
```

解释：

*   如果函数在数组中找到任何非 null 值，则返回 false，否则在“循环”所有数组元素后返回 true。

我不能使用 empty() 因为我对空的定义不符合 PHP 的定义。

有什么想法，还是我适合我所拥有的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:47:41.450

```
count(array_filter($myarray,'is_null')) == count($myarray); 
```

或者

```
array_reduce($myarray,
             function($result,$value) {
                 return $result && is_null($value);
             },
             TRUE
); 
```

# date - 如何将 Clojure/Java 日期转换为更简单的形式

> ID：14757553
> 
> 赞同：15
> 
> 时间：2013-02-07T17:45:59.780
> 
> 标签：date, clojure

我要拿

```
(str (Date.))
"Thu Feb 07 12:15:03 EST 2013" 
```

并将其转换为字符串，以便可以将其输入到 Informix 日期字段 mm/dd/yyyy。

```
02/07/2013 
```

我一直在看各种帖子，没有成功。这是我发现并尝试的第一件事，因为我知道我必须颠倒日期格式的顺序。我只是想让它工作。

```
(defn str-to-date [date] (. (SimpleDateFormat. "yyyy-MM-dd") parse date)) 
```

我收到这个错误

```
(str-to-date (str (Date.)))
ParseException Unparseable date: 
"Thu Feb 07 12:44:41 EST 2013"  java.text.DateFormat.parse (DateFormat.java:354) 
```

我也试过这个

```
 (.parse (SimpleDateFormat. "mm/DD/yyyy") (str (Date.)))
ParseException Unparseable date: 
"Thu Feb 07 12:42:02 EST 2013"  java.text.DateFormat.parse (DateFormat.java:354) 
```

没有成功。任何文档指针或答案将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T17:57:43.383

```
(def date (java.util.Date.))
date 
=> #inst "2013-02-07T19:08:12.107-00:00" 
```

您可以直接格式化为所需的格式

```
(.format (java.text.SimpleDateFormat. "MM/dd/yyyy") date)
=> "02/07/2013" 
```

但是如果从一个字符串开始，

```
(str date)
=> "Thu Feb 07 13:08:12 CST 2013" 
```

您必须首先使用该字符串的格式进行解析

```
(def df (java.text.SimpleDateFormat. "EEE MMM d HH:mm:ss zzz yyyy"))
(.parse df (str date))
=> #inst "2013-02-07T19:08:12.107-00:00" 
```

然后回到所需的格式

```
(.format (java.text.SimpleDateFormat. "MM/dd/yyyy") (.parse df (str date)))
=> "02/07/2013" 
```

您可能还想查看一些时间和日期库：[什么是 Clojure 时间和日期库？](https://stackoverflow.com/questions/5024970/what-are-the-clojure-time-and-date-libraries).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:16:49.700

.parse 采用 SimpleDateFormat 构造函数中指定格式的字符串，并将其转换为 Date 对象。如果您可以只传入日期，则使用 .format 将要格式化的日期传递给它。如果您需要传入一个字符串，那么您将需要 2 个 SimpleDateFormats。一种用于输入格式，一种用于输出格式。使用输入格式调用 .parse，使用输出格式调用 .format。

# java - 比较数据源中的行以打印特定记录

> ID：14757554
> 
> 赞同：0
> 
> 时间：2013-02-07T17:46:01.043
> 
> 标签：java, jasper-reports, ireport

主报告使用一个 DataSource，其中包含一个 List( *parentList* )。这个 List( *parentList* ) 又包含其他 List( *childList* )。此*childList*作为 DataSource( *JRBeanCollectionDataSource* ) 传递给 SubReport。

此*childList*包含两列，下面是列表的表格格式。

```
<pre>TestString  | Date</pre>
<pre> abc | 01JAN12 </pre>
<pre> cdf | 31DEC12 </pre>
<pre> fgh | 08JUN12 </pre> 
```

从上表中，在这种情况下，应比较日期以获取具有最新日期（即）**cdf的记录的“TestString”值。**

行或记录的比较应该在 Jasper 报告中完成，而不是在 java 类中。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T02:35:18.000

你必须在java端做

假设你有 pojo 结构

```
public class Parent{
    private List<Child> childList;
    ...
}

public class Child{
    String testString;
    Date date;
} 
```

在生成报告的 java 方法中

```
...
List<Parent> parent = //method for getting datasource
List<String> testStrings = getTestStrings(parent);
...
//pass the list of testStrings to the report
//inside the report, create a parameter of type List
//pass list.get($V{ctr}) to the subreport where ctr is the current count of the subreport, make it start with 0 
```

`getTestStrings`方法应该做类似的事情

```
private List<String> getTestStrings(List<Parent> parent){
    //loop through parent list
    //pull each child list then do the sort by date then get(0).getTestString()
    //put the value in a list
    //return the list
} 
```

# mysql - 我们可以在mysql查询中使用多少and and or

> ID：14757559
> 
> 赞同：0
> 
> 时间：2013-02-07T17:46:10.887
> 
> 标签：mysql

我正在制作一个搜索表单，无论我做什么查询都会返回错误的结果。

```
$sql = "select * from posts WHERE title like '%$term%' or description like '%$term%' and type='$type' order by id"; 
```

这是返回结果直到描述，但完全忽略类型。但如果我只给出它有效的类型。例如

```
$sql = "select * from posts WHERE type='$type' order by id"; 
```

谁能告诉我这是因为查询太复杂而发生的吗？还是我错过了什么。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:47:26.287

似乎您只需要一些括号，因为`AND`优先于`OR`.

```
$sql = "select * 
from posts 
WHERE (title like '%$term%' or description like '%$term%') and type='$type' order by id"; 
```

指定列列表而不是`SELECT *`.

# c# - 添加选项卡时保持布局相同[代码下方的解决方案]

> ID：14757561
> 
> 赞同：0
> 
> 时间：2013-02-07T17:46:16.027
> 
> 标签：c#

我是 C# 的新手，所以我需要尽可能简单的一切，我编写了一个带有标签的网络浏览器，当我单击添加标签时，它只在 google.co.uk 的新标签中打开一个网络浏览器，但我需要的是新标签有一个地址栏和一个导航按钮，以便我能够导航到新标签中的另一个 URL。基本上我想要的是一个添加选项卡按钮，它添加一个带有完全独立的 Web 浏览器和一个单独的地址栏和一个单独的导航按钮的选项卡。到目前为止，这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        TabPage tb = new TabPage("Tab");
        WebBrowser wb = new WebBrowser();
        wb.Dock = DockStyle.Fill;
        wb.Navigate("www.google.co.uk");
        tabControl1.TabPages.Add(tb);
        tb.Controls.Add(wb);
        tabControl1.SelectTab(tb);
    }

    private void closeAltF4ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void addTabToolStripMenuItem_Click(object sender, EventArgs e)
    {
        TabPage tb = new TabPage("Tab");
        WebBrowser wb = new WebBrowser();
        wb.Dock = DockStyle.Fill;
        wb.Navigate("www.google.co.uk");
        tabControl1.TabPages.Add(tb);
        tb.Controls.Add(wb);
        tabControl1.SelectTab(tb);
        tb.Controls.Add(new TextBox());

    }

    private void button1_Click_1(object sender, EventArgs e)
    {
        webBrowser1.Navigate(textBox1.Text);
    }

    private void removeTabToolStripMenuItem_Click(object sender, EventArgs e)
    {
        tabControl1.TabPages.Remove(tabControl1.SelectedTab);
    }

} 
```

}

解决方案：

我让它与用户控件一起工作，我设计了一个用户控件表单，然后使用以下代码将它添加到选项卡中：

```
TabPage tb = new TabPage("Tab");
        MenuStrip ms = new MenuStrip();
        tabControl1.TabPages.Add(tb);
        tb.Controls.Add(ms);
        tb.Controls.Add(new UserControl1()); 
        tabControl1.SelectTab(tb); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:29:31.023

用户控件是保持相同布局的最佳方式。你可以把它想象成一个面板。它可以使您的控件分组并保持相同的外观。将您的网站 GUI 添加到面板，然后将面板控件添加到 TabControl。

就像是

```
 TabPage tb = new TabPage("Tab");
    MenuStrip ms = new MenuStrip();
    ms.Items.Add("Add");
    ms.items[0].Click += new EventHandler(AddMenu_Click);
    tb.Controls.Add(ms);
    tb.Controls.Add(new UserControl(tabControl1)); //If you need to update tab text
      tabControl1.TabPages.Add(tb); 
```

这将在每个标签页上创建一个菜单条，然后您的用户控件或“面板”将填充其余部分。

# c++ - 虚拟继承c C++中的sizeof

> ID：14757565
> 
> 赞同：0
> 
> 时间：2013-02-07T17:46:42.123
> 
> 标签：c++

```
#include<iostream>    
using namespace std;

class A
{
    public:
        int i;
};

class B: virtual public A
{
    public:
        int j;
};

class C: virtual public A
{
    public:
        int k;
};
class D: virtual public B, virtual public C
{
    public:
        int l;
};

int main()
{

    cout<<" A : "<<sizeof(A)<<endl;
    cout<<" B : "<<sizeof(B)<<endl;
    cout<<" C : "<<sizeof(C)<<endl;
    cout<<" D : "<<sizeof(D)<<endl;
} 
```

输出：

```
1
8
8
16 
```

据我了解，在虚拟继承期间，每个基类都有一个 vptr，因此 D 类有两个 vptr，大小为 16。

假设如果类 D 也具有虚拟功能，则假设虚拟 ~D()。现在大小应该增加到 24（D 一个 vptr）。

但这并没有发生。

我如何误解了虚拟 ptr 的概念。

谁能解释清楚？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:56:49.827

`D`需要一个vptr，不管它有没有虚功能，`B`和`C`do一样。

原因是编译器需要一种方法来从任何实例获取`D`到它的`A`,`B`或`C`, 基类子对象。由于该继承是虚拟的，`E`因此可能会出现一些类，它派生自`D`但*也*派生自具有相同虚拟基础的其他事物。的布局`D`必须考虑到存在的可能性`E`。

因此，从作为其实例的完整对象到其基类子对象的完整对象没有固定的偏移量`D`，因为该完整对象可能是 as-yet-undefined 的实例`E`。

我不确定这是否完全解释了您看到的行为。我从来没有使用过 which 的实现`sizeof(int) == 1`，我也没有任何理由解释为什么`B`and`D`是 8 和 16。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:41:34.290

为什么添加虚函数`D`需要额外的 `vptr`？类图像将以`B`or开头`C`，并且 `D`可以将其功能附加到任何一个。（一旦你有了虚继承，你就需要某种指针，即使没有虚函数。）

添加一个虚函数`A` *会*产生影响（几乎可以肯定，当然，这里的一切都取决于实现）。对于它的价值，您可能想尝试以下方法：

```
#include <iostream>
#include <iomanip>
#include <cstdint>

typedef std::uintptr_t Word;

class SaveIOFormat
{
    std::basic_ios<char>* myStream;
    char myFill;
    std::basic_ios<char>::fmtflags myFlags;
    int myPrecision;
public:
    SaveIOFormat( std::basic_ios<char>& stream )
        : myStream( &stream )
        , myFill( stream.fill() )
        , myFlags( stream.flags() )
        , myPrecision( stream.precision() )
    {
    }
    ~SaveIOFormat()
    {
        myStream->fill( myFill );
        myStream->flags( myFlags );
        myStream->precision( myPrecision );
    }
};

template <typename T>
class DumpAsWords
{
    Word const* myObj;
    typedef Word const* Iterator;
    typedef char sizeMustBeMultipleOfSizeofWord
            [ sizeof(T) % sizeof(uintptr_t) == 0 ? 1 : -1 ];
    static int const ourLength = sizeof(T) / sizeof(Word);
public:
    DumpAsWords( T const& obj )
        : myObj( reinterpret_cast<Word const*>( &obj ) )
    {
    }
    friend std::ostream& operator<<( std::ostream& dest,
                                     DumpAsWords const& obj )
    {
        SaveIOFormat saveExcursion( dest );
        dest.fill( '0' );
        dest.setf( std::ios::hex, std::ios::basefield );
        for ( Iterator current = obj.myObj, end = obj.myObj + ourLength;
                current != end;
                ++ current ) {
            if ( current != obj.myObj ) {
                dest << ' ';
            }
            dest << std::setw( sizeof(Word) * 2 ) << *current;
        }
        return dest;
    }
};

template <typename T>
DumpAsWords<T>
dump( T const& obj )
{
    return DumpAsWords<T>( obj );
}

class B
{
    Word i;
public:
    B() : i( 1 ) {}
    virtual ~B() {}
};

class L : virtual public B
{
    Word i;
public:
    L() : i( 2 ) {}
};

class R : virtual public B
{
    Word i;
public:
    R() : i( 3 ) {}
};

class D : public L, public R
{
    Word i;
public:
    D() : i( 4 ) {}
};

int
main()
{
    D aD;

    std::cout << "sizeof B: " << sizeof(B) << std::endl;
    std::cout << "sizeof L: " << sizeof(L) << std::endl;
    std::cout << "sizeof R: " << sizeof(R) << std::endl;
    std::cout << "sizeof D: " << sizeof(D) << std::endl;
    std::cout << std::endl;

    std::cout << "addrof B: " << static_cast<B*>( &aD ) << std::endl;
    std::cout << "addrof L: " << static_cast<L*>( &aD ) << std::endl;
    std::cout << "addrof R: " << static_cast<R*>( &aD ) << std::endl;
    std::cout << "addrof D: " << static_cast<D*>( &aD ) << std::endl;
    std::cout << std::endl;

    std::cout << "dump: " << dump( aD ) << std::endl;
    return 0;
} 
```

（如果它有点长，那是因为我从我的库中复制/粘贴了一些代码以使其更简单和更清晰。）

在我的机器上，这给出了：

```
sizeof B: 16
sizeof L: 32
sizeof R: 32
sizeof D: 56

addrof B: 00000000001AFEB8
addrof L: 00000000001AFE90
addrof R: 00000000001AFEA0
addrof D: 00000000001AFE90

dump: 000000013fb90bb0 0000000000000002 000000013fb90bb8 0000000000000003 0000000000000004 000000013fb90ba8 0000000000000001 
```

如您所见，顺序是 D 中的 L，D 中的 R，D，B（在 L，R 和 D 中）。D 与 L 共享 vptr。

（这是在 64 位 Windows 机器上使用 VC++ 11 编译的。你的结果很容易不同。）

# asp.net - 如何验证图像是否在 asp.net mvc 3 中缓存？

> ID：14757566
> 
> 赞同：0
> 
> 时间：2013-02-07T17:46:44.853
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, caching

我希望缓存我的 mvc 3 应用程序中的图像。我在 web.config 中编写了一个缓存配置文件：

```
caching>
  <outputCacheSettings>
    <outputCacheProfiles>
      <add name="ImageCache" duration="10" location="Server" noStore="true"/>
    </outputCacheProfiles>
  </outputCacheSettings>
</caching> 
```

并将 OutputCacheAttribute 添加到返回图像的方法中：

```
[OutputCache(CacheProfile = "ImageCache")]
public FileContentResult GetImage(int productId) { /* implementation */ } 
```

问题：

1）如何验证图像是否被缓存？

2) 最好的位置是什么：客户端、服务器或任何？我的应用是一个网上商店，每张图片都附在产品上。我认为每个用户都应该看到相同的缓存内容。有什么建议么？

3）也许这个真的很傻：客户端和浏览器缓存有什么区别？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:31:04.143

1.）您可以随时在浏览器中检查它是否在随后对站点的请求中获取图像。例如，在 chrome 中，您可以按 F12 访问开发者工具，然后在网络选项卡下查找您的图像。Http 状态 304（未修改）将是您要查找的状态。

2.) 不太确定不同设置的利弊。

3.) 客户端缓存意味着资源缓存在您的浏览器中。基本上，您的浏览器不必重新下载图像。服务器端意味着它可以被服务器/代理缓存。例如，如果您必须查询数据库中的图像，如果图像已经在服务器缓存中，则不再需要。但是客户端仍然必须始终从服务器获取它。

# sql - 存储过程中可选参数的最佳解决方案

> ID：14757574
> 
> 赞同：2
> 
> 时间：2013-02-07T17:47:29.117
> 
> 标签：sql, sql-server, dynamic-sql

考虑遵循采用一些参数的示例过程。

```
Create Procedure CustomerSearch(
@Name       nVarChar(100) = Null,
@Phone      nVarChar(100) = Null,
@Address    nVarChar(100) = Null,
)
As

Select  *
        From    dbo.CustomerView
        Where   (@Name      is Null or Name     =   @Name)  And
                (@Phone     is Null or Phone    =   @Phone) And
                (@Address   is Null or Address  =   @Address) 
```

因为参数的值可能为空，我找到了两个解决方案来处理它。

1.  像这样使用或使用：（@Name 为 Null 或 Name = @Name）
2.  如果参数值不为空，则使用动态sql并添加条件进行查询。

CustomerView 视图中存在多个表连接，并且该表具有大量数据，性能非常重要。解决方案 1 有开销（执行计划）。由于某些原因，我不能使用动态 sql。有更好的方法来构建这个查询吗？

当我使用条件 @Name is Null 或 Name = @Name) 而不是 Name = @Name 并查看执行计划时，索引查找成本会增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:50:14.610

您上面发布的代码是完全可以接受的。如果性能是一个问题，请确保 Name、Phone 和 Address 列上有索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:40:04.923

您的代码工作正常，对于您的情况，我会将参数包装在 NULLIF(@Parameter,'') 中以防止比较空白。

这也是编写查询的另一种方式。如果参数为空或 null，它将将该列与自身进行比较，这始终为真。

```
Name = COALESCE(NULLIF(@Name,''),Name) 
```

[http://sqlfiddle.com/#!3/4ff42/1](http://sqlfiddle.com/#!3/4ff42/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:52:23.163

您可能还想查看添加`OPTION (RECOMPILE)` 到存储过程的末尾。

每当第一次在 SQL Server 中运行存储过程时，都会对其进行优化，并编译查询计划并将其缓存在 SQL Server 的内存中。

来自[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms181714.aspx)：

> **RECOMPILE**
> 指示 SQL Server 数据库引擎在查询执行后放弃为查询生成的计划，强制查询优化器在下次执行相同查询时重新编译查询计划。如果不指定*RECOMPILE*，数据库引擎会缓存查询计划并重用它们。编译查询计划时，*RECOMPILE*查询提示使用查询中任何局部变量的当前值，如果查询在存储过程中，则将当前值传递给任何参数。
> *重新编译*是创建使用 WITH RECOMPILE 子句的存储过程的有用替代方法，当必须重新编译存储过程中的查询子集而不是整个存储过程时。有关详细信息，请参阅重新编译存储过程。*当您创建计划指南时，重新编译*也很有用。

# jquery - 选择 HTML 的同级值

> ID：14757575
> 
> 赞同：0
> 
> 时间：2013-02-07T17:47:30.310
> 
> 标签：jquery, html, listview, siblings

使用 jQuery 选择我的 ListView 的兄弟值时遇到麻烦。这是我正在尝试的jQuery语法，但是当我在firebug中调试到控制台时，它说一切都是未定义的，但是当我查看html时，我可以看到它们中的值，所以我知道它们只是没有选择它们。它在更新按钮的单击事件上被调用，我需要在我的列表视图中为我正在更新的行获取不同行的兄弟姐妹。

```
 $('.nbr')
.click(function){
            var newaddr = $(this).siblings('#addr').val();
            var originaladdr = $(this).siblings('#addr').attr('data-Value');
            var newplace = $(this).siblings('#place').val();
            var originalplace = $(this).siblings('#place').attr('data-Value'); 
```

列表显示：

```
 <asp:ListView runat="server" id="ListView1" >
        <LayoutTemplate>
            <table id="tablesorter" style="border:solid 1px black;width:55%;">
                <thead>
                    <tr>
                        <th>
                            <a href="#">Addr</a>
                        </th>
                        <th>
                            <a href="#">Place</a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="itemPlaceholder" runat="server" />
                </tbody>
                <tfoot>
                </tfoot>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                   <input maxlength="3" size="4" type="text" id="addr" data-Value="" value="<%# Eval("addr")%>" />  
                   <input maxlength="4" size="4" type="text" id="place"  data-Value="" value="<%# Eval("place")%>" />  
                </td>
                <td>
                   <input type="button" class="nbr" id="btn_update" value="Update" />                     
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:57:02.007

`#addr`唯一与and是兄弟的东西`#place`是`#addr`and `#place`。他们没有其他兄弟姐妹。所以你的逻辑有问题。你想从什么中选择？

此外，由于您似乎使用的模板可能会被复制多次，因此您将拥有多个具有相同`id`. 改用类。

最后，另一个技巧，缓存您的 jQuery 对象，而不是重新创建相同的对象。

**编辑：**根据您的更新，您的问题是您的按钮`nbr`是表兄弟而不是`#addr`和的兄弟`#place`。你需要做的是从`nbr`它的 parent导航`td`，然后从那里导航到它的兄弟姐妹，然后再导航`td`到它的孩子。

就像是：

```
$(this).parent().prev().children("#addr"); 
```

`id`或更完整（在替换你之后`class`）：

```
$('.nbr').click(function){
    var parent = $(this).parent().prev();
    var addrNode = parent.children(".addr").first();
    var placeNode = parent.children(".place").first();

    var newaddr = addrNode.val();
    var originaladdr = addrNode.data('Value');
    var newplace = placeNode.val();
    var originalplace = placeNode.data('Value');
    // whatever you want to do with these values...
} 
```

[这是一个要演示的小提琴](http://jsfiddle.net/TCZph/)

# javascript - Fancybox 信息窗口 谷歌地图

> ID：14757583
> 
> 赞同：1
> 
> 时间：2013-02-07T17:47:47.650
> 
> 标签：javascript, jquery, html, google-maps-api-3, fancybox

我想知道单击谷歌地图中的标记时如何打开一个fancybox弹出窗口。我知道这个问题已经被问过了，但答案是错误的或没有答案。尽管我认为很少有人知道答案，但很多人都想知道执行此操作的技术……因此，如果您有一个清晰而准确的答案，那将非常好。这是我所做的尝试，但这不起作用。

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
function initialize() {

    var mapOptions = {
      zoom: 4,
       disableDefaultUI: true,
      center: new google.maps.LatLng(45.35, 4.98),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'),
                                  mapOptions);

    addMarkerWithWindow("Lemans", new google.maps.LatLng(48.006922, 0.20874), map);
    addMarkerWithWindow("Paris", new google.maps.LatLng(48.856291, 2.352705), map);
}

function addMarkerWithWindow(name, coordinate, map) {
 $.fancybox({
     content: contentForBox
});

var image = 'rss.png';
var marker = new google.maps.Marker({
  map: map,
  icon: image,
  position: coordinate
});

    var styles = [
   {
      featureType: "all",
      stylers: [
        { saturation: -15 },
        { lightness: -10 },
      ]
    },

            ];
map.setOptions({styles: styles});

  var contentForBox = '<a class="fancybox" rel="group"   href="http://www.ministryofsound.com/Uploads/radio/Chilled_96_artistImage_jpg_l.jpg"><img     src="small_image_2.jpg" alt="qs" /></a>';

       var div = document.createElement('DIV');
    div.innerHTML = 'hello';

google.maps.event.addListener(marker, 'click', function() {

    $.fancybox({
        href: contentForBox

        // other options
    });

});
}
initialize();
});//]]>  
google.maps.event.addDomListener(window, 'load', initialisation);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:59:03.017

href-option 需要一个 URL，而不是 HTML 片段：

```
google.maps.event.addListener(marker, 'click', function() {
 $.fancybox({
  href: 
    'http://www.ministryofsound.com/Uploads/radio/Chilled_96_artistImage_jpg_l.jpg'
 });
}); 
```

# entity-framework - 默认目标实体框架版本需要 edmx 架构版本 2.0.0.0 或更低版本。指定的架构是版本 3.0.0.0

> ID：14757589
> 
> 赞同：3
> 
> 时间：2013-02-07T17:48:03.600
> 
> 标签：entity-framework, edmgen

我正在使用 EdmGen.exe 在 Entity Framework 5.0 中预先生成视图，如下所示：

```
"%windir%\Microsoft.NET\Framework\v4.0.30319\EdmGen.exe" 
/nologo 
/mode:ViewGeneration 
/inssdl:"$(TargetDir)Base.ssdl" 
/incsdl:"$(TargetDir)Base.csdl" 
/inmsl:"$(TargetDir)Base.msl" 
/outviews:"$(ProjectDir)BaseViews.cs" 
/language:CSharp 
```

警告细节：

> 警告 3 默认目标实体框架版本需要 edmx 架构版本 2.0.0.0 或更低版本。指定的架构是版本 3.0.0.0。为避免此警告，请明确指定目标实体框架版本。您可以通过使用带有 targetVersion 选项的 EdmGen.exe 命令行工具来执行此操作，或者在调用 GenerateCode 方法时包含 targetEntityFrameworkVersion 参数。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:29:50.747

您需要添加`/targetversion:4.5`到 EdmGen

# jquery - 会话超时时，Ajax 返回登录页面而不是错误

> ID：14757593
> 
> 赞同：1
> 
> 时间：2013-02-07T17:48:14.507
> 
> 标签：jquery, ajax, tomcat, session-timeout

我有一个与这个问题有些相似的问题[，](https://stackoverflow.com/questions/3930646/session-timeout-response-in-ajax)但我会尝试解释我对正在发生的事情的理解以及我想出什么想法来解决它。希望那时有人能够在正确的轨道上激起我的兴趣。

**场景：**在我的 web 应用程序中，受保护领域中的经过身份验证的用户超时。然后他执行 ajax 调用（使用 jquery），期望 json 作为返回值。

**配置**：网络服务器是 tomcat，这是 web.xml 中的配置代码：

```
<session-config>
  <session-timeout>30</session-timeout>
  <tracking-mode>COOKIE</tracking-mode>
</session-config>
...
<login-config>
  <auth-method>FORM</auth-method>
  <realm-name>My Authentication Area</realm-name>
  <form-login-config>
    <form-login-page>/login.jsp</form-login-page>
    <form-error-page>/error.jsp</form-error-page>
  </form-login-config>
</login-config> 
```

**我**的理解：这告诉 Web 服务器在闲置 30 分钟后取消对用户的身份验证，如果他们尝试访问受保护的 url，则将未经身份验证的用户重定向到 login.jsp。

**我所期望**的：服务器返回一个 http 错误。用户被重定向到 login.jsp。

**会发生什么**：服务器返回 login.jsp 作为 ajax 调用的答案，其答案代码为 200。Jquery 然后抛出一个 parseerror，因为它无法将 html 解析为 json。用户留在页面上，似乎什么也没发生。

**我**的理解：网络服务器从未将请求转发到 servlet，因为会话超时并且 url 处于受保护的领域。我不应该担心 servlet 代码。

**我会做什么**：使用 jQuery.ajaxError 全局事件来拦截所有解析错误。虽然这会减少样板代码，但它可能无法涵盖所有​​情况。此外，如果由于某种原因返回的真正 json 带有一些损坏的语法也是不可接受的。

```
$(document).ajaxError(function(event, jqxhr, settings, exception){
   if (settings.dataType === 'json' && exception.type === 'unexpected_token') {
      window.location.href = 'login.jsp';
   }
}) 
```

**我想做的事情**：强制tomcat在响应ajax时发送http错误并在客户端处理重定向。我不知道 tomcat 是否可以区分标准 url 请求和 ajax 请求。

我不知道解决这个问题的最佳方法是什么，任何帮助将不胜感激！

任

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:08:21.547

原来这是我的网络服务器的标准功能。

**如何使其工作：** 检查返回类型，如果它是 html 然后解析它以获得唯一的登录页面标记，然后相应地继续。我在 login.html 中添加了一个元标记：

```
<meta tag="login" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T11:36:15.863

请按照以下步骤操作。它对我有用。

**1\. 第 1 步 - 制作中心方法（例如在母版页中）**

```
 $(document).ajaxStart(function () {
        $.ajax({
            type: "POST",
            url: 'Home.aspx/CheckSessionTimeout',
            async: false,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (result) {
                if (parseInt(result.d) == 0) {
                    window.location.href = 'Login.aspx';
                }
            },
            Error: function (msg) {
                window.location.href = 'Login.aspx';
            }
        }); 
```

**2\. Step - 2 在 Home.aspx 页面中创建一个 web 方法**

```
[WebMethod(EnableSession = true)]
    public static int CheckSessionTimeout()
    {
        if (HttpContext.Current.Session[LoginuserID] != null)
        {
            return 1;
        }
        else
        {
            return 0;
        }
    } 
```

.master 页面中添加的 Webmethod 不会被调用。您可以将其添加到 .asmx 文件、.ascx 控件或 .aspx 页面中。

请注意，在 AJAX 请求中，contentType 和 dataType 等参数对于获取 Ajax 格式的结果是最重要的，否则它将返回整个 HTML 页面。所以，请不要忘记提及它....!!!

好的，你现在工作吗……！！！

# node.js - node-csv-parser 将值返回给变量

> ID：14757605
> 
> 赞同：0
> 
> 时间：2013-02-07T17:48:35.770
> 
> 标签：node.js, csv

我有以下功能：

```
//translate strings
function translate(lng, str)
{
    var translation = '';
    csv().from(__dirname + '/../application/_common/lng/' + lng + '.csv', {delimiter: ';'})
    .transform( function(row, index) {
        if(row[0] == str) {
            return row[1];
        }
    })
    .on('data', function(data) {
        translation = data;
    })
    .on('end', function() { return translation; });
} 
```

我想将在 csv 中找到的值变成这样的变量：

var translation = translate('en', 'translate_me');

问题是该函数不返回任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:11:26.250

好吧，你不返回任何东西，你只从内部函数返回东西，但外部函数没有。如果 CSV 是同步的，请执行以下操作：

```
function translate(lng, str)
{
    var translation = '';
    csv().from(__dirname + '/../application/_common/lng/' + lng + '.csv', {delimiter: ';'})
    .transform( function(row, index) {
        if(row[0] == str) {
            return row[1];
        }
    })
    .on('data', function(data) {
        translation = data;
    })
    .on('end', function() { return translation; });  // This just returns something from the inner function, which has no effect.
    return translation; // actually return the translation
} 
```

如果 CSV 是 _asynchronous，它会变得有点困难。做这个：

```
function translate(lng, str, callback) // Note the extra parameter
{
    var translation = '';
    csv().from(__dirname + '/../application/_common/lng/' + lng + '.csv', {delimiter: ';'})
    .transform( function(row, index) {
        if(row[0] == str) {
            return row[1];
        }
    })
    .on('data', function(data) {
        translation = data;
    })
    .on('end', function() { callback(translation); }); // call the callback
} 
```

现在你可以这样称呼它：

```
var translation;
translate('en', 'translate_me', function(val){ translation = val; }); 
```

# c++ - 同时特化外部类和嵌套类

> ID：14757606
> 
> 赞同：1
> 
> 时间：2013-02-07T17:48:39.810
> 
> 标签：c++, templates, inner-classes, template-specialization

以下类模板`Sequencer`包含一个嵌套类模板`Process`，带有两个模板参数。

```
template<typename P>
struct Sequencer
{   
    template<typename A , bool = A::CAN_BE_BUFFERED>
    struct Process;
}; 
```

我想专门`Sequencer`针对自定义`struct Foo`，同时专门针对自己的版本`Process`以仅支持一个模板参数，如下所示

```
template<>
struct Sequencer<Bar>
{   
    template<typename A>
    struct Process;
}; 
```

由于实施时间太长，我将整个清单发布在[ideone](http://ideone.com/S32jxH)上。

在 GCC 4.5.3 上，我收到以下错误消息

```
prog.cpp:60:24: error: partial specialization ‘Sequencer<Bar>::Process<A>’ does not specialize any template arguments 
```

在 Visual Studio 2008 上，我收到以下错误

```
prog.cpp(62) : error C2753: 'Sequencer<Bar>::Process<A>' : partial specialization cannot match argument list for primary template 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:03:17.753

`Sequencer<Bar>::Process`是一个完整的模板，它不是一个专业化。它恰好是一个专业的成员。您不应该将其声明为专业化：

```
template<typename A>
struct Sequencer<Bar>::Process/*<A>*/
                               //^ remove this
{
}; 
```

模板应该被认为是“类生成器”。`Sequencer<P>`定义了一种从任意创建类的方法`P`，其中给出了在实例化`Sequencer<Bar>`时生成的特定类。`Sequencer<Bar>`每个生成的类都是完全分离且不相关的（除了由同一个生成器创建之外）。在这种情况下，这意味着 in 的内部类`Sequencer<Bar>`与 in 的内部类没有关系`Sequencer<P>`。

# javascript - Shodan JSON 从 python 到 javascript 问题

> ID：14757611
> 
> 赞同：0
> 
> 时间：2013-02-07T17:48:58.403
> 
> 标签：javascript, jquery, python, django, json

我正在使用 Shodan API，在将收到的 JSON 传递给模板（django）时遇到问题。

这是原始 JSON 结构：

```
{"matches": [{"city": "Montreal", "updated": "02.02.2013", "ip": "24.48.3.143", "longitude": -73.5833, "data": "HTTP/1.0 200 OK\r\nDate: Sat, 02 Feb 2013 00:41:53 GMT\r\nServer: Apache/1.3.42 (Unix) mod_auth_pam/1.1.1 DAV/1.0.3 mod_ssl/2.8.31 OpenSSL/0.9.8g\r\nSet-Cookie: iomega=174.79.246.153.26931359765713476; path=/\r\nCache-Control: no-cache\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: text/html; charset=utf-8\r\n\r\n", "country_name": "Canada", "hostnames": [], "country_code": "CA", "country": "DEPRECATED: use country_name", "latitude": 45.5, "os": "Linux 2.6.x", "port": 443}]} 
```

这是我传递给模板的数据结构：

```
[{"city": "Montreal", "updated": "02.02.2013", "os": "Linux 2.6.x", "ip": "24.48.3.143", "longitude": -73.5833, "latitude": 45.5, "hostnames": [], "country_code": "CA", "country": "DEPRECATED: use country_name", "country_name": "Canada", "data": "HTTP/1.0 200 OK\r\nDate: Sat, 02 Feb 2013 00:41:53 GMT\r\nServer: Apache/1.3.42 (Unix) mod_auth_pam/1.1.1 DAV/1.0.3 mod_ssl/2.8.31 OpenSSL/0.9.8g\r\nSet-Cookie: iomega=174.79.246.153.26931359765713476; path=/\r\nCache-Control: no-cache\r\nConnection: close\r\nTransfer-Encoding: chunked\r\nContent-Type: text/html; charset=utf-8\r\n\r\n", "port": 443}] 
```

正如你所看到的，它里面有很多特殊的字符，这会扰乱转换。另一个问题是“主机名”子元素，它是元素列表（如果存在元素）......

任何人都知道如何以正确的格式处理 js/jquery 中的这个 JSON 文件？问候。

编辑：我正在检查我的 javascript 的输出，并且从 django 视图传递到模板的特殊字符被转换为 html 代码和 \r\n 消失导致解析错误：

我比较了这两个 json 文件：http: [//json.parser.online.fr/](http://json.parser.online.fr/)

并且从 shodan api 接收并在视图中操作的 json 工作正常，但不是传递到模板的 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:44:31.973

我发现了问题，正如我在问题中所说，当我将 JSON 从视图传递到模板时，django 会转换 JavaScript 字符串中使用的字符。

解决方案是将 escapejs 标记添加到模板中的变量中：

{{ JSON|escapejs}}

在这里您可以找到文档：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escapejs](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escapejs)

# ruby-on-rails - nested_form gem 的问题

> ID：14757620
> 
> 赞同：0
> 
> 时间：2013-02-07T17:49:21.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

我正在设置nested_form gem，如下所述：[https](https://github.com/ryanb/nested_form) ://github.com/ryanb/nested_form 。

问题是我的 f.fields_for 似乎空空如也。我没有任何错误，但在页面上我只看到“添加位置”链接，它什么都不做。

数据模型是 Events => event_locations <= Locations，event_locations 充当联结对象。

这是我认为的表格：

```
 <%= nested_form_for @event do |f| %>
    <%= @event.locations %>
    <%= f.fields_for :locations do |task_form| %>
      <%= task_form.text_field :name %>
      <%= task_form.link_to_remove "Remove this Location" %>
    <% end %>

    <p><%= f.link_to_add "Add a Location", :locations %></p>
  <% end %> 
```

这是我的事件控制器：

```
def new
    logger.debug "*** before Event.new"
    @event = Event.new
    logger.debug "*** after Event.new"
    3.times do
      @event.locations.build
    end   
  end 
```

事件.rb

```
has_many :days_events
  has_many :events_locations
  has_many :locations, :through => :events_locations

  # Validations
  validates_presence_of :name

  accepts_nested_attributes_for :locations 
```

event_location.rb

```
belongs_to :event
belongs_to :location

accepts_nested_attributes_for :location 
```

位置.rb

```
has_many :events_locations
has_many :events, :through => :events_locations

#validations
validates_presence_of :name

accepts_nested_attributes_for :events 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:19:33.743

nested_forms gem 有点老了。我建议在修改后的屏幕演员剧集中使用 ryan 的代码 ( [http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised) )。我认为您需要专业帐户才能看到它，但这是值得的。

或者，按照未修订且免费的原始屏幕投射 ( [http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2) ) 并使用其中的代码。这样你至少知道发生了什么。

# php - 防止后期静态绑定与来自父函数的静态变量访问

> ID：14757621
> 
> 赞同：2
> 
> 时间：2013-02-07T17:49:27.187
> 
> 标签：php, late-static-binding

给定以下类层次结构：

```
class ParentClass {
    private static $_test;

    public function returnTest() {
        return static::$_test;
    }
}
class ChildClass extends ParentClass {
    // intentionally left blank
}
$child = new ChildClass();
echo $child->returnTest(); 
```

生成的输出是以下错误消息：
`Fatal error: Cannot access property ChildClass::$_test`
有没有办法防止后期静态绑定发生？由于我正在调用未覆盖的父类的函数，因此我觉得应该允许我执行上述操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:53:47.600

您正在从实例化类调用静态属性。只需使用类的名称：

```
return static::$_test; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:59:09.623

使用`return self::$_test`而不是`return static::$_test`.

这确保您访问定义`$_test`的类的字段。`returnTest`

请参阅[http://www.php.net/manual/en/language.oop5.late-static-bindings.php](http://www.php.net/manual/en/language.oop5.late-static-bindings.php)以供参考。

# java - JPA2 - 如何在 OpenJPA 的联接中按嵌入式复合主键中的字段排序

> ID：14757623
> 
> 赞同：1
> 
> 时间：2013-02-07T17:49:34.823
> 
> 标签：java, jpa, openjpa, criteria-api, metamodel

我正在尝试使用 Criteria Query API + RAD/Dali 自动为 WebSphere v8.0.0.5 上的 OpenJPA 2.1.2-SNAPSHOT 生成的静态规范元模型复制以下工作查询：

```
`SELECT *
FROM CENTER c
    INNER JOIN STATE s ON s.ID = c.STATE_ID
    INNER JOIN HOURS_OF_OPERATION h ON h.CENTER_ID = c.ID
WHERE c.CITY = '<city_name_here>'
ORDER BY h.WEEKDAY_NUMBER;` 
```

我有四个实体构成了这个查询的核心：

*   中心.java
*   状态.java
*   HoursOfOperation.java
*   HoursOfOperationPK.java

每个州有许多中心。每个中心有很多 HoursOfOperations。我需要返回一个结果集，其中包括中心信息、州缩写和中心的营业时间，按工作日数字 1-7 排序，代表周一 - 周日。

这是我的方法：

```
public Center getCenterInfo(String centerCityName) {
    CriteriaBuilder cb = em.getCriteriaBuilder();

    CriteriaQuery<Center> cq = cb.createQuery(Center.class);
    Metamodel m = em.getMetamodel();
    EntityType<Center> _center = m.entity(Center.class);
    EntityType<State> _state = m.entity(State.class);

    Root<Center> center = cq.from( _center );
    Join<Center, State> state = center.join( Center_.state );
    Join<Center, HoursOfOperation> hop = center.join( Center_.hoursOfOperations );
    cq.select(center).distinct(true);
    Predicate predicate = cb.equal(center.get(Center_.city), centerCityName);
    cq.where(predicate);
    //cq.orderBy(cb.asc(hop.get(HoursOfOperation_.id)));<---Can't access PK field here
    center.fetch( Center_.state );
    center.fetch( Center_.hoursOfOperations );

    TypedQuery<Center> query = em.createQuery( cq );
    Center centerInfo = query.getSingleResult();

    return centerInfo;
} 
```

我已经注释掉了我坚持的那一行。我认为我必须调用一些方法来实例化某种 HoursOfOperationPK 实例，就像我使用`Join<Center, HoursOfOperation> hop`. 我认为这样做可以让我使用类似`cq.orderBy(cb.asc(hopPk.get(HoursOfOperationPK_.weekdayNumber)));` 我如何实现这种类型的东西？

其次，如果我不使用`cq.select(center).distinct(true);`，我会返回 49 条记录而不是 7 条记录。这是为什么？唯一将记录计数减少到 7 是附加到选择的不同方法。我了解 DISTINCT 在 SQL 中的作用，但我的 ANSI 风格的 SQL 语法最多只返回 7 条记录。

OpenJPA 日志输出表明 OrderBy 已应用于 HoursOfOperation.centerId。

以下是 HoursOfOperation 和 HoursOfOperationPK 实体的相关部分：

```
@Entity
@Table(name="HOURS_OF_OPERATION")
public class HoursOfOperation implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private HoursOfOperationPK id;

    public HoursOfOperationPK getId() {
        return this.id;
    }

    public void setId(HoursOfOperationPK id) {
        this.id = id;
    }
}

@Embeddable
public class HoursOfOperationPK implements Serializable {
    //default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;

    @Column(name="CENTER_ID", unique=true, nullable=false)
    private long centerId;

    @Column(name="WEEKDAY_NUMBER", unique=true, nullable=false)
    private long weekdayNumber;

    public HoursOfOperationPK() {
    }
    public long getCenterId() {
        return this.centerId;
    }
    public void setCenterId(long centerId) {
        this.centerId = centerId;
    }
    public long getWeekdayNumber() {
        return this.weekdayNumber;
    }
    public void setWeekdayNumber(long weekdayNumber) {
        this.weekdayNumber = weekdayNumber;
    }
} 
```

**编辑** @perissf我能够生成所需的结果，而不需要ASC使用的显式顺序（由于 weekdayNumber 是 Hours of Operations 表的复合主键的一部分，因此似乎隐含地发生了排序。我宁愿有显式排序不过，因为它可以帮助我解决我可能不太幸运的其他问题）：

```
 CriteriaBuilder cb = em.getCriteriaBuilder();

    CriteriaQuery<Center> cq = cb.createQuery(Center.class);
    Metamodel m = em.getMetamodel();
    EntityType<Center> _center = m.entity(Center.class);

    Root<Center> center = cq.from( _center );
    Expression<List<HoursOfOperation>> hop = center.get( Center_.hoursOfOperations );
    cq.select(center);
    Predicate predicate = cb.equal(center.get(Center_.city), centerCityName);
    cq.where(predicate);

    center.fetch( Center_.state );
    center.fetch( Center_.hoursOfOperations );

    TypedQuery<Center> query = em.createQuery( cq );
    Center centerInfo = query.getSingleResult(); 
```

但是，我也能够使用以下方法生成所需的 SQL，但唯一的问题是中心的 hoursOfOperation 未设置（由于延迟加载。`center.Fetch(Center_.hoursOfOperation)`创建了重复记录。有人有解决方案吗？）：

```
 CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Center> cq = cb.createQuery(Center.class);
    Metamodel m = em.getMetamodel();
    EntityType<Center> _center = m.entity(Center.class);
    Root<Center> center = cq.from( _center );
    EntityType<HoursOfOperation> _hoo = m.entity(HoursOfOperation.class);
    Root<HoursOfOperation> hoo = cq.from( _hoo );
    cq.select(center).distinct(true);
    Predicate predicate = cb.and(cb.equal(center.get(Center_.city), centerCityName), 
            cb.equal(center, hoo.get(HoursOfOperation_.center)));
    cq.where(predicate);
    cq.orderBy(cb.asc(hoo.get( HoursOfOperation_.id ).get(HoursOfOperationPK_.weekdayNumber)));
    center.fetch( Center_.state );

    TypedQuery<Center> query = em.createQuery( cq );
    Center centerInfo = query.getSingleResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:10:21.070

我已经用 EclipseLink + MySql 进行了测试，并且可以确认以下代码生成了您要查找的查询：

```
Root<Center> center = cq.from(Center.class);
Join<Center, HoursOfOperation> hoursOfOperation = center.join(Center_.hoursOfOperations);
Join<Center, State> state = center.join(Center_.stateId);
Path<HoursOfOperationPK> hoursOfOperationPK = hoursOfOperation.get(HoursOfOperation_.hoursOfOperationPK);
cq.where(cb.equal(center.get(Center_.city), "cityName"));
cq.orderBy(cb.asc(hoursOfOperationPK.get(HoursOfOperationPK_.weekdayNumber)));
TypedQuery<Center> query = em.createQuery(cq); 
```

结果查询：

```
SELECT t1.id, t1.city, t1.state_id 
FROM state t0, hours_of_operation t2, center t1 
WHERE ((t1.city = ?) AND ((t0.id = t1.state_id) AND (t2.center_id = t1.id))) 
ORDER BY t2.weekday_number ASC 
```

如果结果行与您预期的相比太多，这是由于与 State 实体的连接，它没有被任何 where 过滤`Predicate`，因此结果行是两个表的 carthesian 乘积。

# excel - Delphi 和 Excel.FormatConditions

> ID：14757624
> 
> 赞同：4
> 
> 时间：2013-02-07T17:49:45.180
> 
> 标签：excel, delphi, automation, delphi-xe2

我在使用 Excel 2010 的早期绑定从 Delphi XE2 设置条件格式时遇到问题

我试图重现的宏如下：

```
Selection.FormatConditions.Add Type:=xlCellValue, Operator:=xlGreater, _
    Formula1:="=6"
Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
With Selection.FormatConditions(1).Interior
    .PatternColorIndex = xlAutomatic
    .ThemeColor = xlThemeColorAccent6
    .TintAndShade = 0
End With
Selection.FormatConditions(1).StopIfTrue = False 
```

尽我所能尝试我似乎无法访问相当于`Selction.FormatConditions(1)`工作

我最接近的是以下代码：

```
XR := Xlapp.Range(...) 
XR.FormatConditions.Delete;
XR.FormatConditions.Add(xlCellValue, xlGreater, '=6', EmptyParam, EmptyParam, EmptyParam, EmptyParam, EmptyParam); 
```

哪个有效。当我尝试定义颜色时，我遇到了问题

```
FC := XR.FormatConditions[1];
FC.SetFirstPriority;
with FC.Interior do
begin
   PatternColorIndex := xlAutomatic;
   ThemeColor := xlThemeColorAccent6;
end; 
```

但是，这一直告诉我 XR.FormatConditions(1) 是和 IDispatch ，因此与 FormatCondition 分配不兼容

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:14:22.400

您需要`Selection`用作`ExcelRange`. Excel XP 还要求第二个和第三个参数是`OleVariant`，所以这应该可以工作（无论如何它可以编译）：

```
var
  Sel: ExcelRange;
  Op, Formula: OleVariant;
  Condition: FormatCondition;
begin
  Sel := ExcelApplication1.Selection[1] as ExcelRange;
  Op := xlGreater;
  Formula := '=6';
  Sel.FormatConditions.Add(xlCellValue, Op, Formula, EmptyParam);
  Condition := Sel.FormatConditions[1] as FormatCondition;
  Condition.Interior.PatternColorIndex := xlAutomatic;
  // Do whatever else
end; 
```

# android - 通过加速度计获取方向值

> ID：14757625
> 
> 赞同：2
> 
> 时间：2013-02-07T17:49:45.460
> 
> 标签：android, accelerometer

我目前正在研究如何通过加速度计值获取方向值（偏航、俯仰、滚动）。以下是我目前使用的方式，但是方向值似乎是错误的，有没有我忽略的问题或错误？非常感谢您的帮助！

```
if (sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        accelerometerValues = event.values;
    }

    if (sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
        magneticFieldValues = event.values;
    }

    SensorManager.getRotationMatrix(rotate, null, accelerometerValues,
            magneticFieldValues);
    SensorManager.getOrientation(rotate, rotationValues);

    // change radian to degree
    rotationValues[0] = (float) Math.toDegrees(rotationValues[0]);
    rotationValues[1] = (float) Math.toDegrees(rotationValues[1]);
    rotationValues[2] = (float) Math.toDegrees(rotationValues[2]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T22:23:23.190

getRotationMatrix() 和 getOrientationMatrix 使用的坐标轴不同。所以你需要旋转上面的**旋转**矩阵代码如下：

```
SensorManager.getRotationMatrix(rotate, null, accelerometerValues,
        magneticFieldValues);
SensorManager.remapCoordinateSystem(rotate, SensorManager.AXIS_X, SensorManager.AXIS_MINUS_Z, rotate); //Overwriting rotate matrix with the rotated values
SensorManager.getOrientation(rotate, rotationValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:54:04.340

与北极相关的方向是rotationValues[2]；

所以

```
float course = (float) Math.toDegrees(rotationValues[2]); 
```

应该是正确的。

尝试校准（使用设备制作数字 8）并查看其他应用程序是否显示正确的方向。用指南针检查。

# ios - 如何在 iOS 中获取所有应用程序的 ViewControllers？

> ID：14757639
> 
> 赞同：3
> 
> 时间：2013-02-07T17:50:24.257
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

如何在运行时获取应用程序的所有 ViewController？据我所知`self.navigationcontroller.viewControllers`，仅返回导航堆栈上的那些控制器的 NSArray。但是有什么方法可以访问我所有的应用程序的 ViewControllers 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:55:28.033

AFAIK 没有这样的方法，除非你照顾好自己。您可以访问所有导航控制器，但它们只会在堆栈中保存当前初始化的控制器。总是有可能不在任何导航中的控制器，例如，模态视图控制器。如果你需要这个，我会说你做错了什么:)

也许做到这一点的唯一方法是将它们全部排列在您完全控制的阵列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:53:18.737

关注 Umka 的答案。

在不确切知道您想做什么的情况下，这可能完全是矫枉过正，但它可能会对您有所帮助。

您可以继承 UIViewController（例如 AddToArrayViewController），并在自定义 init 方法中将其添加到您在某处定义的单例中。这样，每当您初始化 ViewController（它是 AddToArrayViewController 的子类）时，它将被添加到 Singleton 中的数组中。

但是，您需要确保在删除/清理 ViewControllers 时也将其删除，否则您只会在该数组中拥有一个悬空指针列表，这并不安全。

# oracle - 使用 Oracle 函数包装 select

> ID：14757645
> 
> 赞同：0
> 
> 时间：2013-02-07T17:50:52.177
> 
> 标签：oracle

在我看来，我正在编写一个函数，以便调用类似

```
select get_foo() from dual; 
```

或者

```
select * from table (get_foo); 
```

返回相同的结果

```
select * from foo; 
```

所以，我有一个可以编译的函数......

```
create or replace function get_foo return sys_refcursor as
  rc_foo sys_refcursor;
begin
  open rc_foo for 'select * from foo';
  return rc_foo;
end; 
```

但 select get_foo() from dual 返回 1 行。

```
((ID=1,NAME=Sarah1),(ID=2,NAME=Sarah2),(ID=3,NAME=Sarah3),) 
```

而 select * from table( get_foo() ) 给了我 ORA-22905。

如何更改函数定义和/或调用以获得所需的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:03:46.473

您使用流水线功能。

例如：

```
SQL> create table foo(id , name) as select rownum, 'Sarah'||rownum from dual connect by level <= 3;

Table created.

SQL> create or replace package pipeline_test
  2  as
  3    type foo_tab is table of foo%rowtype;
  4    function get_foo
  5      return foo_tab PIPELINED;
  6  end;
  7  /

Package created.

SQL> create or replace package body pipeline_test
  2  as
  3    function get_foo
  4      return foo_tab PIPELINED
  5    is
  6      v_rc sys_refcursor;
  7             t_foo foo_tab;
  8
  9    begin
 10      open v_rc for select * from foo;
 11      loop
 12        fetch v_rc bulk collect into t_foo limit 100;
 13        exit when t_foo.count = 0;
 14        for idx in 1..t_foo.count
 15        loop
 16          pipe row(t_foo(idx));
 17        end loop;
 18      end loop;
 19    end;
 20  end;
 21  /

Package body created.

SQL> select * from table(pipeline_test.get_foo());

        ID NAME
---------- ---------------------------------------------
         1 Sarah1
         2 Sarah2
         3 Sarah3 
```

# python - 运行时python字符解码异常但不是eclipse

> ID：14757647
> 
> 赞同：0
> 
> 时间：2013-02-07T17:51:00.407
> 
> 标签：python, bash, encoding

我有一个获取 url 页面然后 html 对其进行转义的 python 脚本。

目标页面包含英语和希伯来语字体。

```
opener = urllib2.build_opener(
            urllib2.HTTPRedirectHandler(),
            urllib2.HTTPHandler(debuglevel = 0),
            urllib2.HTTPSHandler(debuglevel = 0),
            urllib2.HTTPCookieProcessor(self.cj)
        )
response = opener.open(url)
data = response.read()
goodData = HTMLParser.HTMLParser().unescape(data)
print goodData 
```

在 Eclipse 中运行时，代码工作正常。打包并在 linux shell（ubuntu 12.04）上运行时，它在倒数第二行（打印之前）失败，并显示：

```
'ascii' codec can't decode byte 0xe2 in position 775: ordinal not in range(128) 
```

我无法调试它，因为在 eclipse 中这似乎工作正常。怎么来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:19:02.297

好的，解决了：

```
opener = urllib2.build_opener(
            urllib2.HTTPRedirectHandler(),
            urllib2.HTTPHandler(debuglevel = 0),
            urllib2.HTTPSHandler(debuglevel = 0),
            urllib2.HTTPCookieProcessor(self.cj)
        )
response = opener.open(url)
data = response.read()
data = data.decode('utf8')
goodData = HTMLParser.HTMLParser().unescape(data)
print goodData 
```

感谢： [处理文件名时出现 UnicodeDecodeError](https://stackoverflow.com/questions/12626019/unicodedecodeerror-while-processing-filenames)

# functional-programming - 如何在 OCaml 文件中加载模块？

> ID：14757648
> 
> 赞同：1
> 
> 时间：2013-02-07T17:51:02.267
> 
> 标签：functional-programming, ocaml

我希望`Std`在我的 OCaml`.ml`文件中使用模块。

我试过`#load "Std"`了，但编译器抱怨。

如何在 OCaml 中加载模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:45:57.693

您必须首先编译您希望包含的模块，将编译文件的位置提供给依赖它的模块的编译命令，然后在最终的编译命令行中提供它。

让我们考虑例如文件`foo/moduleA.ml`：

```
let v = 1 
```

和文件`bar/moduleB.ml`：

```
open ModuleA
let w = v 
```

命令：

```
$ cd foo
$ ocamlc -c moduleA.ml
$ cd .. 
```

将产生`moduleA.cmo`和`moduleA.cmi`。前者是模块的字节码对象（类似于`.o`原生对象文件中的文件，但包含字节码数据和文本），后者是字节码编译头，由自动生成的`.mli`文件生成。这个字节码头对于编译器编译依赖于`ModuleA`.

```
$ cd bar
$ ocamlc -I ../foo -c moduleB.ml
$ cd .. 
```

将成功生成`moduleB.cmo`，这取决于`ModuleA`，因为前面的命令已经成功，并且因为我们使用`-I`命令行参数指示编译器在哪里查找依赖项，然后是第一个模块的路径。

下面的最后一个命令将从两个模块生成一个字节码可执行文件：

```
$ ocamlc -I foo -I bar moduleA.cmo moduleB.cmo -o prog.byte 
```

必须按该顺序提供模块，以便让编译器*首先*知道依赖关系。这次的`-I`参数指示在哪里可以找到`.cmo`文件。

因此，在您的情况下，您必须将`-I <location of std.cmi>`用于编译正确阶段，并且`-I <location of std.cmo>`（或者`std.cma`，如果它是一个库）用于第二阶段（链接阶段）。如果您可以将两个阶段组合在一个命令中（即。`ocamlc -I foo foo/moduleA.ml bar/moduleB.ml -o prog.byte`），并且如果`cmo`和`cmi`文件都在同一目录中，则只需一个参数就足够了。

# filter - angularjs 过滤器选项也适用于非连续单词

> ID：14757652
> 
> 赞同：0
> 
> 时间：2013-02-07T17:51:29.127
> 
> 标签：filter, angularjs

大家好，我正在学习 angularjs 教程

我正在使用手机关注官方 angularjs 教程。

我想知道是否有可能 filter: query 选项也可以通过 ng-repeat 子句中的不连续词来完成

在示例中：电话名称：Samsung Galaxy Tab 2

搜索过滤器：三星 Galaxy。结果--> 找到搜索过滤器：三星选项卡。结果--> 未找到

```
<tr ng-repeat="product in products | filter:query | orderBy:predicate:reverse | limitTo:limit" class="ng-scope">
                <td>{{product.id}}</td>
                <td><img ng-src="{{product.ThumbPictureForIndexing}}" style="width:70px;"></td>
                <td>{{product.TitlePerIndexing}}</td>
                <td>{{product.sku}}</td>
                <td>{{product.Ean_Code}}</td>

            </tr> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:55:05.167

我认为您需要为这种过滤/搜索编写自己的“谓词函数”。请参阅[文档](http://docs.angularjs.org/api/ng.filter%3afilter)。

# javascript - 使用 JavaScript 将图像加载到画布上

> ID：14757659
> 
> 赞同：21
> 
> 时间：2013-02-07T17:51:56.327
> 
> 标签：javascript, html, canvas

我目前正在测试使用该`<canvas>`元素来绘制所有背景（稍后我将在这些图像中添加效果，这也是我不使用 CSS 加载图像的原因）。也就是说，我目前很难将图像加载到画布上。这是代码：

```
<html>    
<head>    
    <title>Canvas image testing</title>
    <script type="text/javascript">
        function Test1() {
            var ctx = document.getElementById('canvas');
            if (canvas.getContext) {
                var ctx = canvas.getContext('2d');
                //Loading of the home test image - img1
                var img1 = new Image();
                img1.src = 'img/Home.jpg';
                //drawing of the test image - img1
                img1.onload = function () {
                    //draw background image
                    ctx.drawimage(img1, 0, 0);
                    //draw a box over the top
                    ctx.fillStyle = "rgba(200, 0, 0, 0.5)";
                    ctx.fillRect(0, 0, 500, 500);
                };
            }                
        }
    </script>
    <style type="text/css">
        canvas { border: 2px solid black; width: 100%; height: 98%; }
    </style>
</head>
<body onload="Test1();">    
    <canvas id="canvas" width="1280" height="720"></canvas>      
</body>
</html> 
```

我认为我没有正确加载图像，但我不确定。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-07T18:05:14.647

有几件事：

1.  `drawimage`应该是`drawImage`- 注意大写 i。
2.  您`getElementById`正在寻找 ID 为 的元素`canvas`，但它应该是`test1`。`canvas`是标签，而不是 ID。
3.  将`canvas`变量（例如在您的`canvas.getContext`行中）替换为`ctx`，因为这是您用来选择画布元素的变量。
4.  `onload`在设置图像之前绑定您的处理程序`src`。

所以你的函数最终应该是这样的：

```
function Test1() {
    var ctx = document.getElementById('test1');
    if (ctx.getContext) {

        ctx = ctx.getContext('2d');

        //Loading of the home test image - img1
        var img1 = new Image();

        //drawing of the test image - img1
        img1.onload = function () {
            //draw background image
            ctx.drawImage(img1, 0, 0);
            //draw a box over the top
            ctx.fillStyle = "rgba(200, 0, 0, 0.5)";
            ctx.fillRect(0, 0, 500, 500);

        };

        img1.src = 'img/Home.jpg';
    }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-06-22T08:36:06.830

使用较新的 JavaScript 功能：

```
let img = await loadImage("./my/image/path.jpg");
ctx.drawImage(img, 0, 0); 
```

`loadImage`函数如下所示：

```
function loadImage(url) {
  return new Promise(r => { let i = new Image(); i.onload = (() => r(i)); i.src = url; });
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-07T18:07:42.577

在为图像设置 src 之前将 onload 事件侦听器移动到。

```
 var img1 = new Image();

    //drawing of the test image - img1
    img1.onload = function () {
        //draw background image
        ctx.drawImage(img1, 0, 0);
        //draw a box over the top
        ctx.fillStyle = "rgba(200, 0, 0, 0.5)";
        ctx.fillRect(0, 0, 500, 500);

    };

    img1.src = 'img/Home.jpg'; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-02T05:35:55.870

将本地文件资源 (url) 分配给图像源并使用要加载的画布中的上下文绘制图像。而已。请参见下面的代码。

```
var loadImage = function (url, ctx) {
  var img = new Image();
  img.src = url
  img.onload = function () { 
    ctx.drawImage(img, 0, 0);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-13T19:13:06.830

```
 var c = document.getElementById("canvas");
   var ctx = var ctx = c.getContext("2d");
   var img1 = new Image();

    //drawing of the test image - img1
    img1.onload = function () {
        //draw background image
        ctx.drawImage(img1, 0, 0);
        //draw a box over the top
        ctx.fillStyle = "rgba(200, 0, 0, 0.5)";
        ctx.fillRect(0, 0, 500, 500);

    };

    img1.src = 'img/Home.jpg';
```

```
<canvas id="canvas"></canvas
```

# c - 内存中的值如何与变量及其类型相关联？

> ID：14757660
> 
> 赞同：1
> 
> 时间：2013-02-07T17:51:59.830
> 
> 标签：c, pointers, memory, static

昨天突然有一个疑问。我已经用 C 编程很长时间了。我的问题是这样的：

假设有一个变量

```
static uint32_t count = 0; 
```

这个变量应该存储在数据段中。为了这个例子，我们假设数据段在`0x08000000`进程的4GB虚拟内存空间中的偏移处开始。

我知道在偏移量之后的某处，`0x08000000`为变量“count”保留了 4 个字节，值为 0。

我的问题是内存中的这个 4 字节值如何与名称“count”和类型“uint32_t”相关联（或者它是 4 字节长而不是 6 字节长的事实。）

从下面的答案看来，映射信息存储在`"symbol table"`

似乎表明它必须是内存中最终可执行文件的一部分。如果是这样，符号表存储在哪里？它在代码/文本段中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:46:16.590

就生成的机器码而言，不存在名称“count”。它只知道加载和存储数据的地址。类似地，类型信息不会保留，因为生成用于操作此变量的机器代码是为了对正确的大小和符号进行操作，因此它执行 4 字节加载和存储，以及无符号的 32 位算术运算数据。

出于调试和动态链接的目的，该信息可能在其他地方可用。带有符号的二进制文件将有一个表格，其中列出了全局变量所在的地址或偏移量，以及它们的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:57:34.973

与名称的关联：或者可执行文件有一个符号表，它提供有关名称和相应地址的动态链接器信息（本质上是一个映射），或者如果可执行文件被剥离，则根本没有名称，只有原始地址被引用.

与类型的关联：只需编译器生成将该地址视为 4 字节无符号整数开头的代码（例如，在`DWORD`s 上操作的指令等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:51:22.453

当编译器解析您的代码时，它会保存数据结构，其中包含有关它在程序中看到的类型和变量的信息。所以，当解析器看到：

```
static uint32_t count = 0; 
```

它记录了一个变量`count`，其类型`uint32_t`的静态存储持续时间初始化为零。当解析器再次遇到该标识符`count`时，它就知道它引用了前面提到的变量。所有这些信息都在生成目标代码时使用，因此编译器后端知道为其分配空间，并将其视为无符号整数。此信息可能最终出现在目标文件中，用于调试，或者如果它不是静态变量，它可能最终出现在动态链接器使用的部分中。

加载器不需要此信息，因此如果它仍然存在于目标文件中，则不需要加载它。链接器和动态链接器可能需要导出符号的信息，因此它们从适当的部分加载它。

# android - 访问 NATed HTTP 服务器

> ID：14757663
> 
> 赞同：1
> 
> 时间：2013-02-07T17:52:21.020
> 
> 标签：android, sockets, networking, tcp

我在我的 android 设备上托管了一个 HTTP 服务器。我希望它能够从互联网访问它，即使它连接到家庭 wifi（在无线路由器后面）。

此外，在路由器上配置静态端口转发不是一种选择，因为从互联网上，我将无法访问路由器配置。

我有什么选择吗？

我试过这个：

Android 应用程序从特定端口号（例如 8080）从 android 设备（本地 IP 地址，例如 192.168.0.1）发送 HTTP 请求，通过家庭 WIFI 到互联网上的 Web 服务器，

路由器会将源地址修改为其公共 IP 地址的地址（例如 111.100.45.65），并将源端口号修改为任何随机端口号（例如 39824），并在其动态 NAT 表中创建一个条目。

内部 IP 内部端口 外部端口 192.168.0.1 8080 39824

据我了解，此条目至少保留几个小时。Internet 上的 Web 服务器将报告源 IP 和端口分别为 111.100.45.65 和 39824。

从 android 应用程序向 Internet 上的 Web 服务器发送 HTTP 请求后，我在设备的端口 8080 上运行了一个 HTTP 服务器。现在，如果我要从 Internet 向地址 111.100.45.65 的 39824 端口发送 HTTP 请求，它应该被设备上运行的 HTTP 服务器接收（路由器将从其动态 NAT 表中解析请求并将其定向到我的设备） .

但由于某种原因，这个请求没有得到解决。任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:00:25.620

首先，关于从 Internet 访问路由器配置，大多数路由器实际上都支持从 WAN 接口登录。大多数路由器默认关闭它，但只要您的密码安全，就没有理由不能启用它。

其次，如果您在 Internet 上的 Web 服务器上设置代理，您所尝试的将起作用。

1.  通过启动从您的 Android 设备到 Internet 上的 Web 服务器的连接来打一个 TCP 漏洞。
2.  现在 Internet 上的 Web 服务器知道公共 IP 和目标端口，以便能够与 Android 设备通信。
3.  自动化脚本可以在 Internet 上的 Web 服务器上配置代理服务器，将 HTTP 请求转发到 Android 设备。

顺便说一句，我怀疑 NAT 条目至少会保留几个小时。您可能希望在您的 Android 设备和 Internet 上的 Web 服务器之间实现一个保持活动机制，以便 TCP 漏洞保持打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:01:31.553

不会。您的应用程序可以通过端口 39824 与网络上的 http 服务器进行通信。没有其他人可以使用该端口从网络与您设备上的 http 服务器进行联系。您需要在路由器上进行端口转发，才能从 Internet 访问您的设备。

# c# - C# 多维数组迭代

> ID：14757664
> 
> 赞同：0
> 
> 时间：2013-02-07T17:52:20.800
> 
> 标签：c#, arrays, multidimensional-array, iteration

我是 C# 新手，正在研究数组。

鉴于：

```
int[][] myJagArray = new int[5][]; 
```

为什么以下打印 j (System.Int32[]) 的***类型***，而不是每个 j 的内容？

```
foreach (int[] j in myJagArray)
{
    Console.WriteLine("j : {0}",j);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:53:59.123

因为`Array.ToString()`不返回数组的内容，所以它返回类型名称，并`Console.WriteLine`隐式调用`ToString()`您作为参数发送的每个对象。

这与数组是多维数组的一部分这一事实无关，它只是 CLR 开发人员选择（或者更确切地说，选择*不*）`ToString()`在`System.Array`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:55:06.633

它打印 ToString() 方法的输出，因为在这种情况下，j 是一个数组，它使用 Object ToString 实现，并且该行为正在打印其类型。

在这里您可能想要做的事情：

```
foreach (int[] j in myJagArray)
{
    StringBuilder sb = new StringBuilder("j : ");

    foreach (int k in j)
    {
        sb.append("[").append(k).append("]");
    }

    Console.WriteLine(sb.Tostring());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:55:25.210

您正在打印出一组`int`.

尝试以下方法打印数组中的第一个值：

```
Console.WriteLine("j : {0}",j[0]); 
```

要打印出全部内容，您可能需要尝试以下操作：

```
foreach (int[] j in myJagArray)
{
    foreach (int i in j)
    {
        Console.WriteLine("i : {0}",i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:58:26.660

你应该像下面这样

```
for(int i=0;i<5;i++)
    for( int j=0;j<5;j++)
        print(myjagarray[i][j].tostring()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:58:28.720

当您使用 Console.WriteLine 输出一个值时，您实际上是首先对该值调用 ToString() ，而 Array.ToString() 不返回值，而是返回类型。如果要输出 j 的值，则需要运行第二个循环：

```
foreach (int[] j in myJagArray)
{
    Console.Write("j: ");
    foreach (int i in j)
    {
        Console.Write("{0} ",i);
    }    
    Console.Write("\n");
} 
```

# autocomplete - 如何实现位置自动化领域

> ID：14757665
> 
> 赞同：1
> 
> 时间：2013-02-07T17:52:24.440
> 
> 标签：autocomplete, street-address

我想知道如何实施位置自动化领域，如本文所建议：http: [//uxmovement.com/forms/new-form-techniques-proven-to-save-time-and-money/](http://uxmovement.com/forms/new-form-techniques-proven-to-save-time-and-money/)

是否有图书馆或服务可以帮助我根据邮政编码找出城市/州？我知道谷歌有可能有用的地理编码器/解码器或谷歌地方搜索，但他们的使用条款要求你必须使用他们的服务并在他们的地图上显示结果，当用户是填写账单信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:52:26.940

Cheers to you for observing TOS. That's good business.

You could use [SmartyStreets](http://smartystreets.com). LiveAddress API supports [city/state and ZIP code lookups](http://smartystreets.com/kb/liveaddress-api/zipcode-api). It now has [auto-complete](http://smartystreets.com/kb/liveaddress-api/website-forms) as you type an address, too.

I work at SmartyStreets. In fact, we developed the jQuery plugin which does address validation and auto-complete for you. It even supports freeform address fields.

Related question by yours truly, over on UX stack exchange: [https://ux.stackexchange.com/questions/22196/combining-all-the-address-fields-into-one](https://ux.stackexchange.com/questions/22196/combining-all-the-address-fields-into-one)

# lotus-notes - Lotus Notes 自定义查看收到的邮件

> ID：14757667
> 
> 赞同：3
> 
> 时间：2013-02-07T17:52:34.680
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

我在 Windows 7 上使用 lotus notes 8.5.2。我想创建一个自定义视图，显示除已发送邮件之外的所有电子邮件。换句话说，它包含：收件箱和所有文件夹。

目前我的 ALL DOCUMENTS 视图具有以下公式条件：`SELECT @IsNotMember("A"; ExcludeFromView) & IsMailStationery != 1 & Form != "Group" & Form != "Person"`

SENT 视图具有以下条件：`SELECT DeliveredDate = "" & PostedDate != "" & !(@IsMember("S"; ExcludeFromView))`

我的想法是我应该能够从 ALL DOCUMENT 条件中排除 SENT 条件？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:00:49.137

获取所有不在已发送视图中的文档并不完全正确，因为有一些不在已发送视图中的文档也被排除在所有文档视图之外。你想要的逻辑是：

```
SELECT (in the All Documents view) AND NOT (in the Sent view) 
```

因此，首先制作所有文档的副本。您将保留 All Documents 视图中的选择公式，并在其后放置 & !( )，如下所示：

```
SELECT ( @IsNotMember("A"; ExcludeFromView) & IsMailStationery != 1 & Form != "Group" & Form != "Person" ) & !( ) 
```

现在，只需从 Sent 视图中复制选择公式并将其放在那些空括号之间，结果如下：

```
SELECT ( @IsNotMember("A"; ExcludeFromView) & IsMailStationery != 1 & Form != "Group" & Form != "Person" ) & !( DeliveredDate = "" & PostedDate != "" & !(@IsMember("S"; ExcludeFromView)) ) 
```

# r - 将包含同名对象的多个 .RData 文件合并为一个 .RData 文件

> ID：14757668
> 
> 赞同：6
> 
> 时间：2013-02-07T17:52:38.903
> 
> 标签：r, storage

我有很多 .RData 文件，其中包含我在之前的分析中保存的一个数据框，并且该数据框对于加载的每个文件都具有相同的名称。因此，例如使用 load(file1.RData) 我得到一个名为“df”的数据框，然后使用 load(file2.RData) 我得到一个同名的数据框“df”。我想知道是否有可能将所有这些 .RData 文件合并到一个大 .RData 文件中，因为我需要一次加载它们，每个 df 的名称等于文件名，这样我就可以使用不同的数据帧。

我可以使用下面的代码来做到这一点，但它非常复杂，必须有更简单的方法来做到这一点……谢谢你的建议。

假设我有 3 个 .RData 文件，并希望将所有文件保存在一个名为“main.RData”的文件中，并使用它们的特定名称（现在它们都以“df”的形式出现）：

```
all.files = c("/Users/fra/file1.RData", "/Users/fra/file2.RData", "/Users/fra/file3.RData")
assign(gsub("/Users/fra/", "", all.files[1]), local(get(load(all.files[1]))))
rm(list= ls()[!(ls() %in% (ls(pattern = "file")))])
save.image(file="main.RData")

all.files = all.files = c("/Users/fra/file1.RData", "/Users/fra/file2.RData", "/Users/fra/file3.RData")

for (f in all.files[-1]) {
  assign(gsub("/Users/fra/", "", f), local(get(load(f))))
  rm(list= ls()[!(ls() %in% (ls(pattern = "file")))])
  save.image(file="main.RData")
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-10T23:21:16.390

这是一个包含多个现有帖子的选项

```
all.files = c("file1.RData", "file2.RData", "file3.RData") 
```

将多个数据帧读入一个命名列表（[如何将对象加载到我从 R 数据文件中指定的变量名中？](https://stackoverflow.com/questions/5577221/how-can-i-load-an-object-into-a-variable-name-that-i-specify-from-an-r-data-file)）

```
mylist<- lapply(all.files, function(x) {
  load(file = x)
  get(ls()[ls()!= "filename"])
})

names(mylist) <- all.files #Note, the names here don't have to match the filenames 
```

您可以保存列表，或在保存之前将数据框传输到全局环境中（[取消列出数据框列表](https://stackoverflow.com/questions/17697239/r-unlist-a-list-of-dataframes)）

```
list2env(mylist ,.GlobalEnv) 
```

或者，如果数据框相同并且您想创建一个大数据框，您可以折叠列表并添加一个带有贡献文件名称的变量（[列表中的数据框；添加一个名称为数据框的新变量](https://stackoverflow.com/questions/7073785/dataframes-in-a-list-adding-a-new-variable-with-name-of-dataframe)）。

```
all <- do.call("rbind", mylist)
all$id <- rep(all.files, sapply(mylist, nrow)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T18:00:33.140

我认为我看到的最好的答案是下面的代码，我从一个我现在无法追踪的 SO 答案中复制了它。向原作者道歉。

```
resave <- function(..., list = character(), file) {
   previous  <- load(file)
   var.names <- c(list, as.character(substitute(list(...)))[-1L])
   for (var in var.names) assign(var, get(var, envir = parent.frame()))
   save(list = unique(c(previous, var.names)), file = file)
}
#I took advantage of the fact the load function 
#returns the name of the loaded variables, so 
#I could use the function's environment instead of creating one.
#And when using get, I was careful to only look in the 
#environment from which the function is called, i.e. parent.frame() 
```

# internet-explorer - Prettyphoto 照片链接灯箱在 IE 中不起作用

> ID：14757670
> 
> 赞同：0
> 
> 时间：2013-02-07T17:52:56.483
> 
> 标签：internet-explorer, lightbox, prettyphoto

这些照片在画廊页面本身变成了灯箱链接，但在页面上：

[www.rimibasu.com/kriyacollective](http://www.rimibasu.com/kriyacollective)

他们的照片不是可点击的链接。如果有人有线索，请告知或告诉我我需要进一步发送什么。我是这个东西的菜鸟。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T17:24:18.157

您可能首先要确保在 head 标签中调用了 prettyPhoto 脚本和样式表

```
<script type="javascript" src="prettyPhoto/js/jquery.prettyPhoto.js" />
<link rel="stylesheet" href="prettyPhoto/css/prettyPhoto.css" /> 
```

然后确保在包含链接的标签之后包含以下内容

```
<script type="text/javascript">
            jQuery(document).ready(function()
            {
                jQuery("a[rel^='prettyPhoto']").prettyPhoto(
                {
                   deeplinking: false
                });
            });
        </script> 
```

# sqlite - sqlite - 使用触发器创建审计

> ID：14757671
> 
> 赞同：1
> 
> 时间：2013-02-07T16:04:01.203
> 
> 标签：sqlite

我想在 sqlite 中为我的表创建一个小审计机制，每当对表进行更改时，我都会更新 2 个字段来显示谁更改了数据以及何时更改数据。我们在 MS SQL Server 数据库中使用了类似的概念。但我想知道如何在 sqlite 中实现这一点。我在表的末尾添加了 2 个字段，称为 updatedusername 和一个 updateddatetime 字段。当最终用户登录我的 Web 应用程序并进行更改时，我可以“插入”用户凭据以及特定表的任何其他数据......但我想知道如何使用触发器完成同样的事情。任何人都可以对此有所了解吗？
例如，如果我要设置一个触发器，当插入新记录或更新现有数据时，我将如何提供登录到应用程序以进行更改的人的用户名，而不是一些通用的 web id被我的服务器使用....

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:34:20.943

SQLite 没有你会在其他数据库中找到的用户的概念，这意味着无法询问是哪个用户发起了操作。

如果客户手头有用户名，您必须确保每个`INSERT`并`UPDATE`提供它：

```
CREATE TABLE foo ( bar INTEGER, baz INTEGER, whodunnit TEXT );

INSERT INTO foo VALUES (1, 123, 'bob');
UPDATE foo SET baz = 1, whodunnit = 'bob' WHERE bar = 123; 
```

时间可以由触发器自动填写，因为 SQLite 具有可以提供该信息的功能。

# mule - 使用 Mule 的 IMAP 传输时如何解析入站电子邮件？

> ID：14757677
> 
> 赞同：1
> 
> 时间：2013-02-07T17:53:34.700
> 
> 标签：mule, mule-studio

我刚刚开始学习mule，所以如果这是一个非常基本的问题，请原谅我。

我已经成功配置 mule 来监控我的邮箱，所以每当有邮件进来时，我都会将邮件写入文本文件（仅用于测试）。

现在我需要解析这封邮件并从邮件中获取消息/From/To。

```
<flow name="testFlow" doc:name="testFlow">
        <imap:inbound-endpoint host="ip"
            port="143" user="username" password="pwd" doc:name="IMAP"
            responseTimeout="10000" transformer-refs="Message_Properties">
        </imap:inbound-endpoint>
        <file:outbound-endpoint path="C:\"
            outputPattern="#[function:datestamp].dat" doc:name="File">
        </file:outbound-endpoint>
    </flow> 
```

我以为我可以使用以下表达式（使用表达式转换器）获取标题信息

```
#[inboundProperties['email-header-name']] 
```

但这似乎不起作用。我也尝试了以下表达式，但没有奏效，

```
#[map-payload:HOST]
#[map-payload:MESSAGE]
#[map-payload:TIMESTAMP] 
```

有人可以帮忙吗？还有人知道是否有包含可用表达式列表的文档吗？

编辑：

我包括了记录器来查看属性，它显示了所有属性，但我找不到正文。另外，我尝试使用 fromAddress

```
#[map-payload:fromAddress] and #[inboundProperties['fromAddress']] 
```

但是没有用，有人可以让我知道我错在哪里吗？

属性如下所示，

```
inbound.fromAddress=Service <service@xx.com> 
inbound.subject=Test Final inbound.toAddresses=Service 
```

编辑2：

这是我尝试过但不起作用的方法:(

我正在尝试检索电子邮件主题并写入文件或仅使用基于电子邮件主题的记录器显示它，但我收到以下错误。

```
ERROR 2013-02-07 19:22:45,275 [[test].connector.file.mule.default.dispatcher.01] org.mule.exception.DefaultMessagingExceptionStrategy:
********************************************************************************
Message : Could not find a transformer to transform "SimpleDataType{type=javax.mail.internet.MimeMessage, mimeType='*/*'}" to "SimpleDataType{type=java.io.InputStream, mimeType='*/*'}".
Code : MULE_ERROR-236 
```

你能告诉我我在哪里犯错吗？

```
<flow name="testFlow1" doc:name="testFlow1">
<imap:inbound-endpoint host="ip"
port="143" user="uname" password="pwd" doc:name="IMAP"
responseTimeout="10000" disableTransportTransformer="true">
</imap:inbound-endpoint>
<logger message="#[message.inboundProperties['inbound.fromAddress']]" level="INFO" doc:name="Logger"/>
<choice doc:name="Choice">
<when expression="message.inboundProperties['inbound.subject']=='plain test'">
<processor-chain>
<logger message="#[message.inboundProperties['inbound.fromAddress']]" level="INFO" doc:name="Logger"/>
</processor-chain>
</when>
<otherwise>
<processor-chain>
<file:outbound-endpoint path="C:\mule" outputPattern="#[function:datestamp].dat" responseTimeout="10000" disableTransportTransformer="true" doc:name="File">
</file:outbound-endpoint>
</processor-chain>
</otherwise>
</choice>
</flow> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:34:51.477

不幸的是，[IMAP 连接器文档](http://www.mulesoft.org/documentation/display/MULE3USER/IMAP+Transport+Reference)没有列出收到新消息时创建的消息属性。您可以通过添加以下内容找到所有创建的属性：

```
<logger level="WARN" /> 
```

之后`imap:inbound-endpoint`。这将在 WARN 级别记录所有消息元信息，包括属性。

您还可以在[`MailProperties`JavaDoc](http://www.mulesoft.org/docs/site/3.3.1/apidocs/index.html?org/mule/transport/email/MailProperties.html)中找到属性名称。例如`inbound.fromAddress`，包含发件人电子邮件地址的入站属性。

邮件正文是文本电子邮件内容，除非它是多部分电子邮件。在这种情况下，如果第一部分是`text/plain`，它将被设置为消息有效负载，否则所有部分都将作为入站消息附件提供。

# c# - 如何使用 X509Certificate 和 AES-256 算法加密/解密文本

> ID：14757678
> 
> 赞同：5
> 
> 时间：2013-02-07T17:53:40.610
> 
> 标签：c#, encryption, x509certificate2

我有一个 X509 证书，我想用它来加密/解密密码。但是，我只能使用 AES-256 算法。

我在互联网上找到的所有内容都建议使用 RSACryptoServiceProvider，但这并不能进行 AES-256 加密。

我对加密了解不多，所以一些基本的代码示例会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:01:30.610

AES 是一种对称密钥算法，这意味着相同的密钥用于加密和解密数据。

RSA 是一种非对称密钥算法。公共证书中的密钥用于加密。然后使用私钥进行解密。

RSA 加密操作非常耗时。通常的做法是生成一个随机的 AES 密钥，用 RSA 加密密钥，然后用 AES 加密纯文本。

了解[如何在 C# 中使用 RSA 加密文件（大数据）](https://stackoverflow.com/questions/1199058/how-to-use-rsa-to-encrypt-files-huge-data-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:14:02.690

不要自己加密，即使知道自己在做什么也很容易出错。使用高级库。出于这个原因，我[在 C# 中移植了 Kecyzar 。](http://jbtule.github.com/keyczar-dotnet/)

# c - 为什么 k[5] 元素的值被实例化为 0？

> ID：14757686
> 
> 赞同：1
> 
> 时间：2013-02-07T17:53:51.497
> 
> 标签：c

那么我对这段代码的问题是，当我调试它时，k 数组中第 5 个元素的值被实例化为值 0。谁能解释为什么会发生这种情况？如果您也可以调试它，那就太好了！

```
#include <stdio.h>
#include <stdlib.h>
main ()
{
    int k[5]={3,1,7,2,6};
    float d=0;
    int t =3;
    int i;
    for (i=0;i<5;i++)
    {
    if (k[5]>t)
        d+=k[i];
    else
      d++;
    }
     d/=2;
    printf("%f\n",d);
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T17:54:39.957

`k[5]`不存在 - 这将是 的*第 6 个*元素`k`，而不是第 5 个。C 中的数组是零索引的。这意味着`k`有元素`k[0]`, `k[1]`, `k[2]`, `k[3]`, and `k[4]`, 就是这样。

你造成了未定义的行为，所以任何事情都可能发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:59:05.323

C 中的数组以“0”为索引。这意味着 k 的第一个元素是 k[0]，第二个元素是 k[1]，一直到 k 的第五个元素是 k[4]。

你在你的for循环中正确地处理这个，你从i = 0到i = 4（即“i < 5”）。

k[5] 显示为 0，因为恰好在您的数组之后的内存区域当前设置为 0。它可以设置为任何值 - 这完全是任意的。通过查看 k[5]，您正在查看分配给数组的区域之外，并且正在查看您不应该查看的内存部分。在托管编程语言中，这行代码会引发异常，因为您正在做一些绝对不应该做的事情。

# javascript - 如何将查询参数作为字符串传递到包含空格的 jquery 负载中

> ID：14757691
> 
> 赞同：7
> 
> 时间：2013-02-07T17:54:14.460
> 
> 标签：javascript, jquery, query-string, multiline

嗨，我有一个简单的问题。我想知道如何使用 jquery 将查询字符串传递给查询参数。

```
function loadPage(queryString) {
    jQuery("#divId").load("myurl/action?param=" + queryString);
} 
```

queryString 可能类似于“1,2,3,4”或“testing 1 2 3”。

当我尝试它时，只有第一个参数是他们的。我希望能够通过一个句子或一个段落。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T17:57:27.283

尝试

```
function loadPage(queryString) {
    jQuery("#divId").load("myurl/action?param=" + encodeURIComponent(queryString));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T17:58:43.117

使用[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
function loadPage(queryString) {
    jQuery("#divId").load("myurl/action?param=" + encodeURIComponent(queryString));
} 
```

# mysql - 索引对 mysql MEMORY 表有帮助吗？

> ID：14757695
> 
> 赞同：5
> 
> 时间：2013-02-07T17:54:25.773
> 
> 标签：mysql, memory, optimization

我正在优化一个 3 GB 表作为 MEMORY 表，以便对其进行一些分析，我很好奇添加索引是否有助于 MEMORY 表。由于无论如何数据都在内存中，这只是多余的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:00:44.773

不，它们不是多余的。

是的，继续使用索引。

由于全表扫描在内存中的速度有多快，在具有非索引列的较小表上访问内存表的速度可能看起来几乎与索引表相同，但随着表的增长或将它们连接在一起以使较大的结果集会有差异。

无论引擎使用哪种存储方法（磁盘/内存），只要存储引擎支持正确的索引，它们就会提高性能。索引的实现方式可能会有所不同，但我知道它们是在表类型 MEMORY、INNODB 和 MyISAM 中实现的。顺便说一句：MEMORY 表中索引的默认方法是使用哈希而不是 B 树。

此外，我通常不建议对您的存储引擎进行编码。今天的内存表明天可能需要更改为 innodb —— SQL 和模式应该独立存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T18:01:39.577

不，索引与数据访问速度几乎没有关系。索引重新组织数据以优化特定查询。

例如，如果您将平衡二叉树索引添加到一百万行的列，您将能够在大约 20 次读取操作中找到您想要的项目，而不是平均 50 万次。

因此，将这百万行放在比磁盘快 100 倍的内存中，将使蛮力搜索速度提高 100 倍。*通过允许数据库执行更智能*的搜索而不是仅仅*更快*的搜索，添加索引将*进一步*将速度提高 25000倍。

 **事情比这更复杂，因为还有其他因素在起作用，而您很少从索引中获得如此大的收益。更智能的搜索在逐一的基础上也*更慢*：这 20 次索引搜索的成本远高于 20 次蛮力搜索。然后是索引维护等。

但我的建议是尽可能将数据保存在内存中——并为它们编制索引。**

# android - ALSA - 取消静音设备？

> ID：14757696
> 
> 赞同：0
> 
> 时间：2013-02-07T17:54:32.667
> 
> 标签：android, linux, audio, alsa

我一直在尝试通过 adb shell 在 Android 设备上运行的本机 linux 程序中捕获音频。

由于我似乎只得到（非常安静的）噪音，即没有实际信号（有趣的是，执行类似操作的 Android/Java 程序确实显示该输入上有信号），我执行了 alsa_amixer，它有一个看起来像正确的那一个：

```
Simple mixer control 'Capture',0
  Capabilities: cvolume cswitch penum
  Capture channels: Front Left - Front Right
  Limits: Capture 0 - 63
  Front Left: Capture 31 [49%] [0.00dB] [off]
  Front Right: Capture 31 [49%] [0.00dB] [off] 
```

“离开”。这可以解释噪音。所以我寻找了如何使用 alsa_amixer 取消静音通道的示例，我发现了不同的参数建议，如“49% on”或“49% unmute”，或者只是“unmute”，这些都不起作用。（如果省略音量百分比，则显示“无效命令！”，否则，设置音量，但忽略开启/取消静音）

我还搜索了如何以编程方式执行此操作（我最终需要这样做，尽管手动方法现在会有所帮助），但在那里并不太幸运。我发现的唯一一个听起来可以做类似事情的 ALSA lib 命令是“snd_mixer_selem_set_capture_switch_all”，但文档并没有说明参数的作用（1/0 不是开/关，我试过了；））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:18:13.703

通过 alsa_amixer 设置这些东西的手动方法确实有效 - 但只有在构建 android 时修改了“BoardConfigCommon.mk”，在条目：BOARD_USES_ALSA_AUDIO := false，而不是 true。

是的，这可能会禁用 ALSA for android，这就是它不再干预混音器设置的原因。

对于那些 android 程序员，请注意，这当然是一个非常小众的用例，正如我最初的帖子所预期的那样。这不是大多数人想要做的。我只是碰巧在这里以不寻常的方式修补了一个 android 设备；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T21:16:37.090

只是按照提问者的建议发布代码，也不喜欢外部链接。

```
#include <alsa/asoundlib.h>

int main()
{
    snd_mixer_t *handle;
    snd_mixer_selem_id_t *sid;

    snd_mixer_open(&handle, 0);
    snd_mixer_attach(handle, "default");
    snd_mixer_selem_register(handle, NULL, NULL);
    snd_mixer_load(handle);

    snd_mixer_selem_id_alloca(&sid);
    snd_mixer_selem_id_set_index(sid, 0);
    snd_mixer_selem_id_set_name(sid, "Capture");
    snd_mixer_elem_t* elem = snd_mixer_find_selem(handle, sid);

    snd_mixer_selem_set_capture_switch_all(elem, 0);
    snd_mixer_selem_set_capture_dB_all(elem, 0, 0);

    snd_mixer_close(handle);
} 
```

# java - 将对象或类链接到 GoogleMap 标记

> ID：14757699
> 
> 赞同：0
> 
> 时间：2013-02-07T17:54:43.920
> 
> 标签：java, android, marker, google-maps-android-api-2

在 GoogleMap 应用程序中，我目前正在使用标记来标记船舶位置。我创建了一个`Ship` 记录许多属性的类，例如船名、纬度、经度、MMSI 代码等。当用户单击地图上的许多标记之一时，将打开一个生成的可单击信息窗口。当该用户单击信息窗口时，会打开另一个 Activity，显示有关该标记的详细信息。

好吧，至少最后一句话是我想要的。我可以提取纬度和经度位置，但其他的不多。问题是，虽然我有一个`Ship`包含我需要的所有信息的类，但它没有以任何参考方式连接到标记，我也不知道如何做这样的事情！

我最好的想法是`Ship`扩展 Marker，但这是一个`final`根据 Eclipse IDE 的类，因此不能扩展。

这是我的`Ship`课：

```
public class Ship {

    /** Ship has the following properties
     *  */
    private String shipname = "";
    private String MMSI = "XXXX";
    private double[] loc = new double[2];

    public Ship(String _shipname, String _MMSI, double[] _loc) {
        shipname = _shipname;
        MMSI = _MMSI;
        loc[0] = _loc[0]; // Latitude
        loc[1] = _loc[1]; // Longitude

    }
    public String getName() {
        return shipname;
    }
    public String getMMSI() {
        return MMSI;
    }
    public double getLat() {
        return loc[0];
    }
    public double getLongi() {
        return loc[1];
    }
} 
```

同时，`GoogleMap`标记是通过以下方式动态插入的：

```
public void setupRegion(GoogleMap map, ArrayList<Ship> ships) throws IOException {
        for(Ship ship : ships) {
            map.addMarker(new MarkerOptions()
               .icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_red))
               .position(new LatLng(ship.getLat(), ship.getLongi()))
               .title(ship.getName())
               .snippet("Simulate"));
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:08:01.063

不要`snippet()`使用`"Simulate"`填充，而是使用您的某个唯一标识符填充它`Ship`，这样您就可以在存储实例`Ship`的`Dock`or`Wharf`或`Shipyard`or `OnePercenterYachtClub`or or 中查找 。`HashMap<String,Ship>``Ship`

您还需要设置一个`InfoWindowAdapter`，因此您可以自定义您的信息窗口内容以不显示片段，假设您正在使用信息窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:30:37.000

一个常用的解决方案是`Map<Marker, Ship>`在你的活动中保留一个并做`map.get(marker)`内部`onInfoWindowClick`回调（或任何其他）。

你也可以试试我的库，它添加`Marker.setData(Object)`和`Marker.getData()`函数，所以你可以在创建标记后将 Ship 实例放在那里并将它们放回`onInfoWindowClick`回调中。

[http://code.google.com/p/android-maps-extensions/](http://code.google.com/p/android-maps-extensions/)

# silverlight - Silverlight 控件在不应该更新绑定属性时更新

> ID：14757700
> 
> 赞同：0
> 
> 时间：2013-02-07T17:54:48.207
> 
> 标签：silverlight, binding, datagrid, silverlight-4.0, updatesourcetrigger

我在 datagrid 中有一个自定义控件`DataGridTemplateColumn.CellEditingTemplate`：

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Items}">
   <DataGrid.Columns>                                   
      <data:DataGridTemplateColumn Header="Column1" >
         <data:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
               <sdk:Label Content="{Binding Path=Description}"/>
            </DataTemplate>
         </data:DataGridTemplateColumn.CellTemplate>
         <data:DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
               <common:MyControl SelectedObject="{Binding Path=SelectedItem, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
            </DataTemplate>
         </data:DataGridTemplateColumn.CellEditingTemplate>
      </data:DataGridTemplateColumn>                                    
   </DataGrid.Columns>
</DataGrid> 
```

在控制范围内，我只有一个地方可以更新`SelectedObject`依赖属性：

```
BindingExpression expressionObject = GetBindingExpression(SelectedObjectProperty);
if (expressionObject != null)
{
    expressionObject.UpdateSource();
} 
```

此代码在`LostFocus`事件上调用。

**问题是：** while`UpdateSource`方法只被调用一次（用调试器检查）`SelectedItem`获得更新值（相同）两次！我目前处于亏损状态，因为它不应该是这样的。我错过了什么吗？

**编辑：**我没有使用任何 MVVM 框架。VS2012 调试调用堆栈显示第一次更新是由 UpdateSource() 调用发起的，但第二次更新突然出现。

# python - NDB 中 SelfReferenceProperty 的等价物

> ID：14757702
> 
> 赞同：1
> 
> 时间：2013-02-07T17:55:02.313
> 
> 标签：python, google-app-engine, app-engine-ndb

查看[NDB 备忘单](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)，我发现我一直在“正确”地做这件事，但是在使用此代码时：

```
class Chapter(ndb.Model):
    parentID = ndb.KeyProperty(kind=Chapter) 
```

我收到这个错误

```
NameError: name 'Chapter' is not defined 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:10:37.477

NDB 属性页面[注释：](https://developers.google.com/appengine/docs/python/ndb/properties)

> 可选关键字参数：kind=kind，要求分配给此属性的键始终具有指定的种类。可能是字符串或模型子类。

所以用引号试试？

```
parentID = ndb.KeyProperty(kind='Chapter') 
```

在 NDB 备忘单上，它确实在引号中显示了示例，所以也许这就是这样做的方法。

```
ndb.KeyProperty(kind='ThisModelClass') 
```

# android - Android MapView#addView()

> ID：14757707
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:12.903
> 
> 标签：android, android-mapview

我正在使用 MapView addView() 方法向其添加动画视图。

当我这样做时，我的 MapView 中已经有一些 OverlayItems。

当调用 addView() 方法时，我所有的标记都消失了......

知道为什么吗？

```
 @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        app.setMapActivity((Map)context);
        if (!isAnimating)
        {
            if (isNewMarkers(canvas, mapView, shadow))
                isAnimating = true;
            else
                finishDraw(canvas, mapView, shadow);
        }
    }   

    private boolean isNewMarkers(Canvas canvas, MapView mapView, boolean shadow) {
        boolean isNewMarkers = false;
        synchronized (newMarkers) 
        {
            Iterator<OverlayItem> iterator = newMarkers.iterator();         
            while (iterator.hasNext())
            {               
                OverlayItem overlayItem = iterator.next();              
                isNewMarkers = true;                
                animateMarker(canvas, mapView, shadow, overlayItem.getMarker(0), overlayItem.getPoint(),!iterator.hasNext());
            }           
        }       
        fullMapOverlays.addAll(newMarkers);
        newMarkers.clear();
        populate();
        return isNewMarkers;
    }           

    private void animateMarker(Canvas canvas, MapView mapView, boolean shadow, Drawable marker, GeoPoint point, boolean setListener) 
    {               
        Animation animation = AnimationUtils.loadAnimation(app.getMainActivity(), R.anim.map_marker_animiation);
        ImageView imageView = (ImageView) View.inflate(app.getMainActivity(), R.layout.marker_animation, null);
        imageView.setImageDrawable(marker); 

//add view function 
        mapView.addView(imageView, 0, new MapView.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, point, MapView.LayoutParams.BOTTOM_CENTER));           
        if (setListener)
            animation.setAnimationListener(new MarkerAnimationListener(canvas, mapView, shadow));
        imageView.startAnimation(animation);
    }

    public void finishDraw(Canvas canvas, final MapView mapView, boolean shadow)
    {
        mapOverlays = createOverlayItems(mapView);
        populate();
        setLastFocusedIndex(-1);        
        super.draw(canvas, mapView, shadow);
        if (mapView.getChildCount()>0)
        {
            mapView.post(new Runnable() {

                @Override
                public void run() {
                    mapView.removeAllViews();                   
                }
            });
        }
    }
    private class MarkerAnimationListener implements AnimationListener
    {

        private MapView mapView;
        private Canvas canvas;
        private boolean shadow;

        public MarkerAnimationListener(Canvas canvas, MapView mapView, boolean shadow)
        {
            this.mapView = mapView;
            this.canvas = canvas;
            this.shadow = shadow;
        }

        @Override
        public void onAnimationEnd(Animation animation) {           
            isAnimating = false;
            finishDraw(canvas, mapView, shadow);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationStart(Animation animation) {

        }
    }
} 
```

# apache-flex - 结合两个相同的子类

> ID：14757708
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:14.950
> 
> 标签：apache-flex, oop

所以我有两个子类，它们在 Flex 中扩展了不同的基类，我怎样才能将它们组合起来，这样我就不会重复自己了。

基本上我有类似的东西

```
public class A extends B {
 // methods
}

public class C extends D {
 // same methods as class A
} 
```

任何组合方式，这样我就不会重复相同的代码两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:08:30.823

**[优先组合而不是继承](http://www.as3dp.com/2009/02/design-pattern-principles-for-actionscript-30-favor-object-composition-over-class-inheritance/)**

所以，问题是，你应该如何组合解决方案？

一种可能性是使用[装饰器](http://www.as3dp.com/2011/06/well-armored-warrior-decorator-for-beginners/)模式。这本质上是您现有类的包装器。为了完成这项工作，您的类可能需要实现一个接口，该接口公开您完成这项工作所需的一切。

所以像：

```
public interface IFoo {
   function get name():String;
   function set name(value:String):void;
}
public class A extends B implements IFoo {
   protected var _name:String;
   public function get name():String {
      return _name;
   }
   public function set name(value:String):void {
      _name = value;
   }

}

public class C extends D implements IFoo {
   protected var _name:String;
   public function get name():String {
      return _name;
   }
   public function set name(value:String):void {
      if (_value != _name) {
         _name = value;
         dispatchEvent(new Event('nameChanged'));
      }
   }

}

public class FooDecorator {
   protected var _foo:IFoo;
   public function FooDecorator(foo:IFoo) {
      _foo = foo;
   }
   public function sayName():void {
      trace('foo name is', _foo.name);
   }
} 
```

另一种解决方案是给 A 和 C 封装行为的第五种类型的成员变量（就像 Jeffry 所说的那样，但我更愿意在可能的情况下遵守[Demeter 定律](http://en.wikipedia.org/wiki/Law_of_Demeter)）：

```
class NameSayer {
   function sayName(name:String):void {
     trace('foo name is', _foo.name);
   }
} 
```

然后

```
public class A extends B {
   public var name:String;
   public var sayer:NameSayer;
   //note that this method would be identical in both Classes
   //but this is OK because the underlying logic is encapsulated
   //and can be easily changed
   public function sayName():void {
     if (sayer) {
        sayer.sayName();
     }
   }
} 
```

我认为许多开发人员[过于热衷](http://www.infoq.com/news/2012/05/DRY-code-duplication-coupling)于遵循 DRY，正如 Jeffry 所说，这可能会导致您的架构中出现其他更糟糕的问题。如果有的话，这些解决方案中的哪一个是合适的将取决于您要完成的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:19:17.113

您有两个实现完全相同方法的子类（扩展不同的父类）。

```
public class B {}
public class D {}
public class A extends B {
 // methods
 m1();
 m2();
 ...
}

public class C extends D {
 // same methods as class A
 m1();
 m2();
 ...
} 
```

现在让我们提出一些观点。

*   在将方法分配给类时，基本思想是，该方法或行为确实属于该类 - 它实际上是该类或类型的属性。例如，Animal 的呼吸。在这种情况下，行为与类状态（或数据、属性或变量）相关联。如果一个方法不以任何方式访问类变量，那么该方法可能不属于那里。至少这是一般规则。

现在，在您的情况下，您有 m1(), m2(), ... 方法出现在两个不同的类中。这增加了它们可能与这些类的状态没有真正联系的可能性。如果是这样，那么更好的解决方案是将它们完全删除到一个新类中。

如果你这样做，

1.  您还将摆脱现在仅为此目的而存在的两个类 A 和 C。
2.  你摆脱了两个继承关系。这使您的代码更简单。
3.  而且，您将实现不重复自己的目标。

--

```
//Parent classes (child classes are now gone)
public class B  {} 
public class D  {} 
```

--

```
// Your new class
public class X {
 // methods that previously were in A and C
 m1();
 m2();
 ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:24:51.063

虽然，我对它的使用感觉很复杂；您可以使用包含指令。

创建一个文件，像这样，命名为 sharedMethods.as （或任何你想要的）。这不是真正的课程；它只包含代码片段：

```
public var mySharedMethod(mySharedMethodArguments:ArgumentType):void{
  // do something
} 
```

然后你可以将它包含在你的其他课程中：

```
public class A extends B {
 include "sharedMethods.as";
}

public class C extends D {
 include "sharedMethods.as";
} 
```

包含文件中的代码将作为 A 类和 C 类的一部分进行编译。

您还可以将您的共享代码放在另一个类中，并在 A 和 C 中都有该类的实例。然后您必须编写包装器方法或向下钻取调用，如下所示：`aInstance.sharedCodeObject.sharedMethod();`

我的直觉是，如果您经常遇到这种情况；您可能对需要重构的对象模型有问题。

# ruby - 如何从 erubis 文件中获取变量名列表？

> ID：14757716
> 
> 赞同：1
> 
> 时间：2013-02-07T17:55:35.480
> 
> 标签：ruby, erubis

从 Ruby 脚本中，有没有办法实用地获取在 erubis 文件中找到的所有预期变量名和函数名的列表？

例如，如何从 Eruby 对象中确定包含变量“名称”？

```
require 'erubis'
source = 'Hello, <%= name %>'
erb = Erubis::Eruby.new(source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:09:14.467

我的骇人听闻的解决方案：

```
# from the original question
require 'erubis'
source = 'Hello, <%= name %>'
erb = Erubis::Eruby.new(source)

# a not so great solution
vars = {}
begin
  Erubis::Eruby.new(code).result(vars)
rescue NameError => e
  puts "Found: '#{e.name}'"
  vars[e.name.to_sym] = nil
  retry
end 
```

结果是：

```
Found: 'name' 
```

# android - 如何将用户在edittext中的输入限制为除数字之外的所有内容

> ID：14757718
> 
> 赞同：1
> 
> 时间：2013-02-07T17:55:38.740
> 
> 标签：android, android-edittext

我想知道如何阻止用户以编程方式将数字输入到我的编辑文本中，以便它具有与这样做类似的效果

```
android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ#$%......" 
```

我看过`edittext.setInputType(InputType.something)`但找不到阻止用户输入数字的输入类型。

有谁知道我如何通过输入类型或其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:06:02.940

```
InputFilter filter = new InputFilter() {
    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        String output = "";
        for (int i = start; i < end; i++) {
            if (!Character.isDigit(source.charAt(i))) { 
                    output += source.charAt(i); 
            }
        } 
        return output;
    } 
}; 
edit.setFilters(new InputFilter[]{filter}); 
```

假设编辑是你的 EditText

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:09:07.180

根据[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)你可以使用

```
number - A numeric only field. Corresponds to TYPE_CLASS_NUMBER | TYPE_NUMBER_VARIATION_NORMAL. 
```

你有没有尝试过：

```
edit.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_NORMAL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:50:34.577

pavki_a 的回答完美无缺，但是退格键和建议一词只有一些错误。我通过添加来修复这些：

```
edittext.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

如果您想自动更正，这可能是个问题，但对我来说效果很好

# ios - iCloud 公共数据的可能性

> ID：14757719
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:39.313
> 
> 标签：ios, macos, core-data, nsdata, icloud

我正在开发一个 iOS/OS X 应用程序，它具有非常“值得拥有”的功能：与非 iCloud 云同步的可能性。（例如通过 Web 服务器）。

应用程序设计已经完全基于 iCloud，所以我想可能有一种解决方法可以使用，而不是为更多的数据编组编写代码。

基本上我需要的是让一些 iCloud 存储的数据可供公众使用，或者在 iOS/OS X 上获取用于 iCloud 的用户电子邮件/密码。

我需要它的原因 - 我必须与另一个云同步数据，我想保持应用程序轻量级，因此将所有内容移动到服务器（我想我可能需要 OS X 服务器）。

无论如何，任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:04:08.100

我可以理解想要这样做，但仅仅因为你想这样做并不意味着你可以。

> 基本上我需要的是让一些 iCloud 存储的数据可供公众使用

我不相信有办法做到这一点。iCloud 不是通用的互联网托管服务；这是一项旨在让*个人*用户轻松在多个设备之间共享他/她的私人信息的服务。创造公开信息的可能性只会破坏人们对服务的信任。

> 或获取用户在 iOS/OS X 上用于 iCloud 的电子邮件/密码。

这会使您的用户直接违反 iCloud TOS，其中部分规定：

> 您进一步承认并同意，该服务旨在供个人个人使用，您不应与其他人共享您的帐户和/或密码详细信息。

如果您希望用户能够将他们的数据与其他托管服务同步，并且您不想将该功能构建到您的移动应用程序中，您可以考虑构建一个用户可以运行以同步数据的 MacOS X 应用程序。

# macos - 如何在 OS X 终端中录制声音？

> ID：14757720
> 
> 赞同：21
> 
> 时间：2013-02-07T17:55:40.703
> 
> 标签：macos, terminal, voice

我需要在 Mac OS X 中仅使用 Terminal.app 从内置麦克风录制语音。有什么办法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-07T18:34:20.103

安装 brew 然后安装 sox

```
$ brew install sox

$ sox -d recording.wav 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-13T19:47:29.983

正如[epatel 提到](https://stackoverflow.com/a/14758438/68338)的，但使用端口系统代替：

```
$ sudo port install sox 
```

# mysql - MVC 4 连接到 MySQL

> ID：14757721
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:43.133
> 
> 标签：mysql, entity-framework, asp.net-mvc-4, oauth

我在 VS2012 中创建了一个 Internet 应用程序（MVC 4），我正在尝试以某种方式将它连接到 MySQL，以便我可以使用 OAuth 功能。

我没有找到任何有用的东西，我想知道如果没有一些繁重的解决方法是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:16:43.350

检查这篇文章

在 MVC 4 for MySql 中实现 SingleMemmbershipProvider 并额外支持 OAuth。

[http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/](http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:31:37.470

`OAuth`使用`MVC 4`模板使用`SimpleMembershipProvider Class`，而后者又使用 MSSQL 数据库。如果你需要让它适用于 MySQL，那么你需要覆盖这个类中的方法。您可以按照 Imran 在[此链接](http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/)中给出的方式执行此操作，但根据我的说法，构建您自己的覆盖方法是非常繁重的解决方法。相反，删除内置的 OAUth 并使用像[sharpOAuth这样的自定义](https://github.com/samo9789/sharpOAuth/wiki/How-To)

# javascript - 嵌套脚本？

> ID：14757722
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:45.693
> 
> 标签：javascript, jquery

我有一个空的 div，像这样：

```
<div id="my-content"></div> 
```

然后我有一些jQuery，像这样：

```
/**IGNORE THIS**/
function makeButton(){
    $('#my-content').html('<input type="button" value="Say hey" id="my-button" />');
} 
```

到现在为止还挺好。然后我有这个js：

```
$(document).ready(function(){
    makeButton();
}); 
```

工作完美，但是，当我在此之后触发此按钮时，如下所示，它不响应按钮 ID...

```
$(document).ready(function(){
    makeButton();
    $('#my-button').click(function(){
        alert('Hello!');
    });
}); 
```

我当然可以`<script>$(document).ready... blah... alert('Hello');</script>`在 makeButton 函数中添加 .html() ，但我想这不是真正的方法。

在 makeButton() 准备好并添加按钮后，我将如何告诉 JS 开始监听点击？

编辑：好的，那行得通。对不起。实际情况与上述情况并不完全一样，而是类似。

makeButton() 实际上是另一个通过 ajax 获取数据的函数，所以 makeButton 更像是这样的：

```
makeButton(){
    $.ajax({
        type: 'POST',
        url: 'ajax_images.php',
        data: {pageNr: pageNr},
        success:function(response) {
            //Loops the json and does something like this:
            var HTML = '<div id="thumbnail">;
            HTML += 'Response Stuff'
            HTML += '</div>';
            $('#my-content').html(HTML);
        } 
    });
} 
```

很抱歉让您感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:03:44.980

只需做一个简单的改变：

```
$(document).ready(function(){
    makeButton();
    $('#my-content').on('click', '#my-button', function(){
        alert('Hello!');
    });
}); 
```

您需要委托事件，`#my-button`因为它在页面加载后进入 DOM 树。要了解有关*jQuery*中委托事件绑定的更多信息，请参见[此处](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:21:49.857

问题是您试图在元素存在之前绑定事件处理程序。Ajax 调用是异步的！

您可以从`$.ajax`调用中返回承诺对象：

```
function makeButton(){
    return $.ajax({
        // ...
    });
} 
```

然后在 Ajax 调用成功时通过添加回调来绑定事件处理程序：

```
makeButton().done(function() {
    $('#my-button').click(function(){
        alert('Hello!');
    });
}); 
```

* * *

或者，您可以使用事件委托，正如[他的回答中的代码悖论所示](https://stackoverflow.com/a/14757895/218196)。要了解有关 Ajax 工作原理的更多信息，请查看[此答案](https://stackoverflow.com/a/14220323/218196)。

# c# - 为什么单击退出时我的 C# 代码在消息框中出现零？

> ID：14757723
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:55:45.067
> 
> 标签：c#

我试图让我的消息框显示存储在我的数组中的发票小计...其中 5 个使用 foreach 方法显示在消息框中。我应该输入工资，然后它会进行一些计算并将小计值存储到数组中。我声明了一个名为 decArray 和 intIndex 的数组和索引。谁能告诉我我错过了什么或做错了什么？先感谢您！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace InvoiceTotal
{

    public partial class frmInvoiceTotal : Form
    {
        public frmInvoiceTotal()
        {
            InitializeComponent();
        }

        // TODO: declare class variables for array and list here
        decimal[] decArray = new decimal[5];
        int intIndex = 0;

        private void btnCalculate_Click(object sender, EventArgs e)
        {
            try
            {
                if (txtSubtotal.Text == "")
                {
                    MessageBox.Show(
                        "Subtotal is a required field.", "Entry Error");
                }
                else
                {
                    decimal subtotal = Decimal.Parse(txtSubtotal.Text);
                    if (subtotal > 0 && subtotal < 10000)
                    {
                        decimal discountPercent = 0m;
                        if (subtotal >= 500)
                            discountPercent = .2m;
                        else if (subtotal >= 250 & subtotal < 500)
                            discountPercent = .15m;
                        else if (subtotal >= 100 & subtotal < 250)
                            discountPercent = .1m;
                        decimal discountAmount = subtotal * discountPercent;
                        decimal invoiceTotal = subtotal - discountAmount;

                        discountAmount = Math.Round(discountAmount, 2);
                        invoiceTotal = Math.Round(invoiceTotal, 2);

                        txtDiscountPercent.Text = discountPercent.ToString("p1");
                        txtDiscountAmount.Text = discountAmount.ToString();
                        txtTotal.Text = invoiceTotal.ToString();

                        for (intIndex = 0; intIndex <= decArray.Length - 1; intIndex++)
                        {
                             DecArray[intIndex] = InvoiceTotal
                        }

                    }
                    else
                    {
                        MessageBox.Show(
                            "Subtotal must be greater than 0 and less than 10,000.", 
                            "Entry Error");
                    }
                }
            }
            catch (FormatException)
            {
                MessageBox.Show(
                    "Please enter a valid number for the Subtotal field.", 
                    "Entry Error");
            }
            txtSubtotal.Focus();
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            // TODO: add code that displays dialog boxes here
            string totalstring = "";
            foreach (decimal value in decArray)
            {
                totalstring += value + "\n";
                MessageBox.Show(totalstring + "\n", "Order Totals");
            }
            this.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T17:58:40.093

您永远不会分配给您的`decArray`（例如`decArray[0] = n;`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:59:58.893

如果您添加一个计数变量来增加您的数组计数，那么您可以添加不止一个数量。您还希望允许数组根据需要调整大小。

```
decimal[] decArray = new decimal[5];
int _indexCount = 0;

private void btnCalculate_Click(object sender, EventArgs e)
{
    ...
    if (decArray.Count() == _indexCount)
    {
        var elementHolder = decArray;
        decArray = new T[(decArray.Length + 1) * 2];

        for (int i = 0; i < elementHolder.Length; i++)
        {
            decArray[i] = elementHolder[i];
        }
    }

    decArray[_indexCount] = invoiceTotal;
    _indexCount++;

} 
```

像这样的东西应该工作。

编辑：你收到这么多消息的原因是因为`MessageBox.Show()`在 foreach 循环中只是把它放在循环之外，你只会看到一个。

```
 private void btnExit_Click(object sender, EventArgs e)
    {
        // TODO: add code that displays dialog boxes here
        string totalstring = "";
        foreach (decimal value in decArray)
        {
            totalstring += value + "\n";
        }
        MessageBox.Show(totalstring + "\n", "Order Totals");
        this.Close();
    } 
```

# object - 在 Xcode / Obj C 中的另一个自定义对象内部时，如何访问对象的属性？

> ID：14757726
> 
> 赞同：0
> 
> 时间：2013-02-07T17:55:59.437
> 
> 标签：object, properties, null, setter, getter

作为我的新手，我有点了解如何使用点符号创建和访问对象的属性。例如，我有一个带有属性 courseName 的对象 golfCourse，所以 golfCourse.courseName=@"My Course" 可以正常工作。我的问题是，如果我创建一个包含 Par 和 Distance 的“holeObject”并在我的 Course 对象中创建 Hole1、Hole2 等，试图通过 golfCourse.Hole1.Par 访问它们返回 null ...我的各种搜索都没有找到任何清晰..有人能指出我正确的方向吗？

非常感谢

```
HoleObject.h

#import <Foundation/Foundation.h>

@interface HoleObject : NSObject

@property(nonatomic,strong) NSString* par;
@property(nonatomic,weak) NSString* yellowDistance;
@end

HoleObject.m
#import "HoleObject.h"

@implementation HoleObject

@synthesize
par=_par,
yellowDistance=_yellowDistance,

-(void) encodeWithCoder:(NSCoder*)encoder
{
  [encoder encodeObject:self.par forKey:@"Par"];
  [encoder encodeObject:self.yellowDistance forKey:@"YellowDistance"];

}

-(id) initWithCoder:(NSCoder*)decoder
{
  if((self=[super init]))
  {
    self.par=[decoder decodeObjectForKey:@"Par"];
    self.yellowDistance=[decoder decodeObjectForKey:@"YellowDistance"];
   }
  return  self;
}
@end

CourseObject.h
#import <Foundation/Foundation.h>
#import "HoleObject.h"

@interface CourseObject : NSObject

@property(nonatomic,strong)NSString* courseName;
@property(nonatomic,strong)NSString* courseAddress;
@property(nonatomic,strong)HoleObject* hole1;
@property(nonatomic,weak)HoleObject* hole2;
etc...
@end

CourseObject.m
#import "CourseObject.h"

@implementation CourseObject

@synthesize
courseName=_courseName,
courseAddress=_courseAddress,
hole1=_hole1,
 etc;

-(void) encodeWithCoder:(NSCoder*)encoder
{
  [encoder encodeObject:self.courseName forKey:@"CourseName"];
  [encoder encodeObject:self.courseName forKey:@"CourseAddress"];
  [encoder encodeObject:self.hole1 forKey:@"Hole1"];
  etc;  
}

-(id) initWithCoder:(NSCoder*)decoder
{
  if((self = [super init]))
  {
    self.courseName=[decoder decodeObjectForKey:@"CourseName"];
    self.courseAddress=[decoder decodeObjectForKey:@"CourseAddress"];
    self.hole1 = [decoder decodeObjectForKey:@"Hole1"];
    self.hole2 = [decoder decodeObjectForKey:@"Hole2"];
etc;
  }
  return self;
}   

@end 
```

然后在我的主视图控制器中..

```
- (void)viewDidLoad
{
    [super viewDidLoad];

  allCourses=[[NSMutableArray alloc] initWithCapacity:2];
  CourseObject*thisCourse;

  thisCourse=[[CourseObject alloc]init];
  thisCourse.courseName=@"Branston";
  thisCourse.courseAddress=@"The World";

  thisCourse.hole1.par=@"4";

  thisCourse.hole1.yellowDistance=@"336"; 
```

但是如果我再尝试 NSLog thisCourse.hole1.par 我会得到空值吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:20:35.180

花了一些时间尝试不同的事情，因为很明显 Null 显示对象没有被正确创建.. 发现 [[CourseObject alloc]init] 实际上对对象“子对象”并没有做任何事情我还需要为所有 18 个孔做 course.hole1=[[HoleObject alloc] init] ......有点繁琐但似乎工作......

# computer-science - CS基础知识

> ID：14757730
> 
> 赞同：-1
> 
> 时间：2013-02-07T17:56:08.923
> 
> 标签：computer-science

这些年来我一直在编程。我在 Linux 中使用 C/C++ 和 make/open 源代码。我使用 Python 对算法进行原型设计。我使用 C#/Visual C++ MFC 在 Windows 上创建玩具程序。这些代码保存在版本控制系统之下。但是在回顾了软件工程的面试问题后，我意识到我仍然没有掌握 CS 的基础知识。我的大部分编程都是“盲目的”，没有任何精心设计。所以我的问题是SE必须知道的基本CS知识是什么？

1）数据结构和算法

2) 离散数学

我还应该学习什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:02:23.530

熟悉（至少）与主要大学获得学士学位所需的相同主题是一个好主意。例如：[http ://www.engin.umd.umich.edu/SRA/pdf/curriculum/Curr_SWE_Fall_2008.pdf](http://www.engin.umd.umich.edu/SRA/pdf/curriculum/Curr_SWE_Fall_2008.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:04:55.343

从“程序员”到“软件工程师”的转变是一个终生的过程。您认识到自己在该领域的弱点这一事实表明您已经朝着正确的方向迈出了一些步伐。恭喜！

在对数据结构和基本算法有扎实的了解之后，我建议您将“设计模式”作为您的#2。这方面的经典文本是“设计模式：可重用的面向对象软件的元素”

第三个研究领域可能是“软件工程过程”。这些是团队创建软件时使用的技术和工作流程。公司看好这些流程的知识，以及以协调方式与他人合作的能力。

# c - 遍历链表

> ID：14757732
> 
> 赞同：0
> 
> 时间：2013-02-07T17:56:32.970
> 
> 标签：c, data-structures, linked-list

```
#include<stdio.h>
struct node
{
    int item;
    struct node *link
};

main()
{
    struct node *start,*list;
    int i;
    start = (struct node *)malloc(sizeof(struct node));
    list = start;
    start->link = NULL;
    for(i=0;i<10;i++)
    {
        list->item = i;
    list->link = (struct node *)malloc(sizeof(struct node));
    }
    list->link = NULL;
    while(start != NULL)
    {
        printf("%d\n",start->item);
    start = start->link;
    }
} 
```

正如标题所示，我试图迭代地遍历链表，预期输出为 0 1 。. 9 观察到的输出是： 9 代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:00:06.490

创建下一个节点后，您并没有指向`list`它，因此您只是每次都覆盖前一个节点。试试这个：

```
for(i=0;i<10;i++)
{
    list->item = i;
    list->link = (struct node *)malloc(sizeof(struct node));
    list = list->link;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T17:59:51.933

这只是因为您的代码中有一个语句。当您尝试分配新链接时，您忘记指向下一个链接。因此，您仅在一个指针上分配，因此存在内存泄漏。

```
#include<stdio.h>
struct node
{
    int item;
    struct node *link
};

main()
{
    struct node *start,*list;
    int i;
    start = (struct node *)malloc(sizeof(struct node));
    list = start;
    start->link = NULL;
    for(i=0;i<10;i++)
    {   
        list->item = i;
        list->link = (struct node *)malloc(sizeof(struct node));
        list = list->link;
    }   
    list->link = NULL;
    while(start != NULL)
    {   
        printf("%d\n",start->item);
        start = start->link;
    }   
} 
```

# php - 读取 Json 并放入模型中。（代码点火器）

> ID：14757734
> 
> 赞同：0
> 
> 时间：2013-02-07T17:56:39.527
> 
> 标签：php, codeigniter

我正在尝试读取 json 文件并加载到 Code Igniter 的 MVC 格式中，以及如何将 json 数据发送到视图文件并在那里显示。

详细示例

```
 {
    "itemName"          : "Giordana",  
    "itemId"            : 450,
    "itemPrice"         :45,
    "itemCategory"      : "Shirit" ,
   } 
```

如果可能，请逐步帮助我详细说明。

```
 1\. Route
   2\. controller
   3\. Model
   4\. View 
```

我发誓，我会自己完成整个项目，但我只需要一个良好的开端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:02:20.037

在使用 JSON 数据解码之后`json_decode($encoded_json_data_string)`

要从 url 获取 JSON 数据，您可以使用 curl 库调用 url。您需要通过 url 发送您喜欢传递给模型函数的参数。因此，在调用您的模型函数时创建一个文件，并将您在此处通过 url 传递的参数传递给该函数。

```
 In the file
 $result = $this->model->function_name(arguments);
 echo json_encode($result); 
```

在控制器功能中，您需要像下面那样提取它。

```
$data = $this->curl->simple_get($url_path); 
```

例如

```
$data = { "itemName" : "Giordana",
"itemId" : 450, "itemPrice" :45, "itemCategory" : "Shirit" , };

$result = json_decode($data,true); 
```

您需要在控制器函数中执行上述两个步骤，然后如果要在视图文件中显示该 json 数据，您只需将该数组 $result 传递给查看。

```
$this->load->view('view_file',$data); 
```

# c# - 如何确定用户输入的数字在 C# 中存储为 Single 时是否会被歪曲？

> ID：14757736
> 
> 赞同：1
> 
> 时间：2013-02-07T17:56:40.077
> 
> 标签：c#, floating-point

我有一个用户将修改的数据网格。一列存储一个单精度浮点数。当用户输入一个超过 7 位的数字时，该数字以科学计数法显示，并且与该数字的比较变得非常不准确。我想警告用户该数字仅在发生这种情况时才被近似存储。有什么方法可以确定一个数字何时可以正确存储在一个单曲中？截止值似乎约为 7 位数。除此之外，它还有很长的路要走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:51:02.690

我认为您需要对每个单元格进行验证。

一步一步解释：

通过设计器或代码将 CellValidating 事件添加到 DataGridView：

```
 dataGridView1.CellValidating+=dataGridView1_CellValidating; 
```

像这样检查你想要的：

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            double value = 0;
            if (double.TryParse(e.FormattedValue.ToString(), System.Globalization.NumberStyles.Any, System.Globalization.CultureInfo.InvariantCulture, out value))
            {
                dataGridView1[e.ColumnIndex, e.RowIndex].ErrorText = "";

                //   e.Cancel = false;
            }
            else
            {
                dataGridView1[e.ColumnIndex, e.RowIndex].ErrorText = "Bad Input Please Correct It !";
                //   e.Cancel = true;  if you do this the datagrid dont let user go next row
            }
        } 
```

如果您想更正自己的值，请执行以下步骤：

也添加 CellValidated 事件：

```
 dataGridView1.CellValidated+=dataGridView1_CellValidated; 
```

并检查：

```
 private void dataGridView1_CellValidated(object sender, DataGridViewCellEventArgs e)
        {
            if (dataGridView1[e.ColumnIndex, e.RowIndex].Value == null)
                return;
              double value = 0;
              if (double.TryParse(dataGridView1[e.ColumnIndex,e.RowIndex].Value.ToString(), System.Globalization.NumberStyles.Any, System.Globalization.CultureInfo.InvariantCulture, out value))
              {
                  dataGridView1[e.ColumnIndex, e.RowIndex].Value = Math.Round(value, 2).ToString().Replace("/",".");
              }
        } 
```

**注意：**每次编辑单元格时都会发生此事件，如果您想在特殊单元格上执行这些操作，请在事件引发之前检查它。您可以为每列设置最大输入长度以避免错误输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T17:58:24.053

您总是可以通过解析输入并将其转回 a 来检查自己`string`：

```
string s = "0.12345678";
return Single.Parse(s).ToString() == s; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T21:42:18.793

第二次您将任何数字存储在 a 中`float`或`double`假设它不再 100% 准确，因为很可能不是。第二次你对数字执行任何操作，特别是如果它不是加法/减法，你可以相当肯定有*一些*错误。如果您想确切地知道它们的误差有多大，那么您就开始研究一些非常复杂的数学。

# javascript - 如何使用 Bing Maps 6.3 Ajax 控件向地图添加自定义按钮？

> ID：14757740
> 
> 赞同：1
> 
> 时间：2013-02-07T17:56:49.730
> 
> 标签：javascript, ajax, bing-maps

有没有办法将自定义按钮添加到 Bing 地图？像自定义仪表板之类的东西，我想做的是有一些按钮来切换信息/颜色/等。通过按地图上显示的按钮以某些图钉/多边形显示。

有没有办法在地图上添加自定义按钮？还是我必须在地图外添加按钮？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:00:30.597

您可以使用 VEMap 类的专用方法 VEMap.AddControl()，参见：http: [//msdn.microsoft.com/en-us/library/bb412435.aspx](http://msdn.microsoft.com/en-us/library/bb412435.aspx)

这是官方示例中有趣的部分：

```
function AddControl()
{
    var el = document.createElement("div"); 
    el.id = "myControl" + i; 
    el.style.top = 100 + (i * 10); 
    el.style.left = 100 + (i * 10);            
    el.style.border = "2px solid black";
    el.style.background = "White";
    el.innerHTML = el.id;  
    map.AddControl(el);
} 
```

您可以使用的另一种方法是通过操作仪表板的相应 DOM 元素来实现。请参阅 Chris 的博客文章： http: [//pietschsoft.com/post/2010/12/18/Bing-Maps-Ajax-7-Add-Custom-Navigation-Bar-Buttons-using-jQuery.aspx](http://pietschsoft.com/post/2010/12/18/Bing-Maps-Ajax-7-Add-Custom-Navigation-Bar-Buttons-using-jQuery.aspx)

```
// Simple Method to Add a Custom Button to the NavBar using jQuery
var addNavButton = function (mapElement, content, onclick) {
    $(mapElement).find('.NavBar_typeButtonContainer').append(
        // Add a Separator between this button and any existing buttons
        $('<span>').addClass('NavBar_separator')
    ).append(
        // Add the Custom Button itself
        $('<a>').attr('href', '#').addClass('NavBar_button').
            append($('<span>').html(content).click(onclick))
    );
};
// Use setTimeout to load Custom NavBar button if you are adding
// the button immediatly after instantiating the map.
// Timeout is needed since Bing Maps 7 doesn't currently have
// any kind of "onload" event to handle.
window.setTimeout(function () {
    // Add Custom Button to NavBar
    addNavButton(
        document.getElementById('myMap'), // <- Maps DIV
        'Click Me', // <- Content of Button - You can put HTML in here if you want
        function () { // <- Method to call during buttons Click event
            alert('You Clicked Me!');
        }
    );
}, 100); 
```

# objective-c - 是否可以在启动时使用自定义 NSWindowController？

> ID：14757742
> 
> 赞同：7
> 
> 时间：2013-02-07T17:56:54.400
> 
> 标签：objective-c, interface-builder, nswindowcontroller

在[这个](https://stackoverflow.com/a/10128268/1087848)答案中，据说可以通过从 MainMenu.xib 中删除窗口并从`applicationDidFinishLaunching:`. 但它也说：

> 要停止显示默认窗口，我只需将其删除。可能有更好的方法，但我不知道。

*有*没有更好的方法？有什么更好的方法，它应该存在吗？拥有自己的窗口控制器是否被认为是“正常”的做法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T17:58:22.303

为此，您通常会将 NSWindowController 子类化并将 File's Owner 类更改为 nib 中的 WindowController 子类。

编辑：

如果你不是在做一个基于文档的应用程序，只是想要一个你自己的 NSWindowController 来按需加载 Nibs（完全合理），那么你会从你的 nib 中删除窗口并以`NSWindowController`编程方式实例化一个子类，使用它明确地做你的窗口加载......

```
@implementation MyApplicationDelegate {
    MyWindowControllerSubclass *windowController;
}

-(void)applicationDidFinishLaunching:(NSNotification *)notification {
    windowController = [[MyWindowControllerSubclass alloc] initWithWindowNibName:@"MyWindowNib"];

    [windowController showWindow:nil];
    [windowController.window makeKeyAndOrderFront:nil];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-18T14:42:50.393

我遇到了同样的问题，我想向您展示我自己的解决方案。

1.  创建一个普通的 Cocoa 应用程序（**不**基于文档）
2.  转到 MainMenu.xib 并删除窗口
3.  继续创建一个新文件，*用户界面-> 窗口*
4.  之后创建 NSWindowController 的子类
5.  打开刚刚创建的xib文件，将*Identity inspector中的**Custom Class*设置为刚刚创建的NSWindowController子类
**   右键单击文件的所有者并将*窗口*属性连接到实际窗口*   现在去 AppDelegate 创建一个实例变量来保存你的 CustomWindowController*   您要做的最后一件事是实例化您的 CustomWindowController `self.customWindowController = [[AccountWindowController alloc] initWithWindowNibName:@"CustomWindow"];`并`[self.customWindowController showWindow:nil]`在`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`*

 *这是一个示例项目[https://www.dropbox.com/s/ft3t7w72806tnoe/CustomWindowController.zip](https://www.dropbox.com/s/ft3t7w72806tnoe/CustomWindowController.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:05:38.987

我实际上找到了另一种方法：`NSWindowController`拥有方法`-initWithWindow:`。因为 App Delegate 有一个在启动时`window`链接到窗口的属性`MainMenu.xib`，所以很容易将它链接到我的 WindowController：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    MyWindowController *wincon = [[MyWindowController alloc] initWithWindow:window];
} 
```

我还没有研究这个，但我没有得到任何错误。*

# r - 跨会话自动保存 R 中的历史记录

> ID：14757743
> 
> 赞同：2
> 
> 时间：2013-02-07T17:56:55.130
> 
> 标签：r

`$R_HISTFILE`我的主目录中有一个指向环境变量`/home/my.username/.RHistory`和以下代码`.Rprofile`：

```
.Last <- function() {
        if (!any(commandArgs()=='--no-readline') && interactive()){
                require(utils)
                try(savehistory(Sys.getenv("R_HISTFILE")))
        }
} 
```

仍然每当我打开 R 时，我`history()`都看不到我在之前的会话中输入的命令。此外，这些文件`.RHistory`几乎是空的，只有三行（根本不反映我过去输入的命令）。

如何跨 R 会话自动保存命令历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:41:44.630

你是怎么设置环境变量的？你应该可以把它放在你的`.Renviron`文件中。

为确保环境变量设置正确，请确认这为您提供了“/home/my.username/.RHistory”

```
$ R --slave -e 'Sys.getenv("R_HISTFILE")' 
```

否则，你是开始`R`还是`--vanilla`类似？当您启动 R 时，您是否在您的主目录中？

这个对我有用：

```
gMac:~ garrett$ R_HISTFILE=~/.RHistory R --vanilla -q
> .Last <- function() {
+         if (!any(commandArgs()=='--no-readline') && interactive()){
+                 require(utils)
+                 try(savehistory(Sys.getenv("R_HISTFILE")))
+         }
+ }
> a <- 5
> b <- 10
> q()

gMac:~ garrett$ R_HISTFILE=~/.RHistory R -q
> history() 
```

这给了我一个包含以下内容的文件：

```
.Last <- function() {
        if (!any(commandArgs()=='--no-readline') && interactive()){
               require(utils)
               try(savehistory(Sys.getenv("R_HISTFILE")))
        }
}
a <- 5
b <- 10
q()
history() 
```

* * *

如果一切都失败了，您可以放入`loadhistory(Sys.getenv("R_HISTFILE"))`您`.First`的 .Rprofile。

# javascript - jquery .click 看不到 .append() 代码

> ID：14757747
> 
> 赞同：0
> 
> 时间：2013-02-07T17:57:09.073
> 
> 标签：javascript, jquery, html

我的问题很难说。所以我为我的问题创建了一个 jsfiddle.net。

我有一个 div 列表。在每个 div 中都有一些文本和一个“X”。“X”是删除父div。三个 div 和“X”工作正常。但是，如果我要添加一个将新 div 附加到列表的按钮，那么那些“X”就不起作用了。知道这个问题是什么吗？我知道这可能是一些基本的 JS DOM 东西。但我自以为是，只是不太了解 JS 来解决这个问题。

请并感谢您的宝贵时间。

[http://jsfiddle.net/JLxKJ/](http://jsfiddle.net/JLxKJ/)

```
$("#trigger").click(function() {
    $("#participants_wrapper").append("<div class='participant'><a href='javascript:void(0)' class='delete_participant'>X</a>Appended</div>");
    return false;
});
$(".delete_participant").click(function(){
    $(this).closest('div').remove();
});
<div id="participants_wrapper">
  <div class="participant"><a href="javascript:void(0)" class="delete_participant">X</a>already here</div>
  <div class="participant"><a href="javascript:void(0)" class="delete_participant">X</a>already here</div>
  <div class="participant"><a href="javascript:void(0)" class="delete_participant">X</a>already here</div>
</div>
<a href="javascript:void(0)" id="trigger">add this participant</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:00:45.973

您需要将事件委托给 dom 中最近的现有父级：

```
$("#participants_wrapper").on("click", ".delete_participant", function(){
    $(this).closest('div').remove();
}); 
```

这是因为 jQuery 不能将 click 事件放在元素上，因为它在页面加载时不存在，所以这会将事件放在父级上，但会影响子级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:01:28.643

因为您没有再次将事件绑定到新元素。

您可以使用[on()](http://api.jquery.com/on/)来解决这个问题。

```
$("#participants_wrapper").on("click", ".delete_participant", 
    function(){
        $(this).closest('div').remove();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:02:26.767

对于动态添加的元素，使用 jQuery 的[.on() 函数](http://api.jquery.com/on/)。将您的删除代码更改为：

```
$("#participants_wrapper").on('click', '.delete_participant', function () {
    $(this).closest('div').remove();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/JLxKJ/2/)**

# php - 有和没有 Symfony 响应系统的不同行为

> ID：14757748
> 
> 赞同：0
> 
> 时间：2013-02-07T17:57:12.373
> 
> 标签：php, symfony, symfony-2.1, webdav

我希望能够在 Symfony 中管理 WebDAV 目录（甚至重新实现文件的读写方式）。为此，我找到了 SabreDAV，它本身就是一个包含所有必需基本类的框架。

我的问题是，虽然单独使用 SabreDAV 很容易让 WebDAV 服务器运行，但当我使用 Symfony 时它就不能很好地工作。

如果没有 Symfony，它可以归结为：

> $server = new DAV\Server($rootDirectory);
> 
> $server->exec();

我可以使用 cadaver 访问我的目录。

更多信息：[http ://code.google.com/p/sabredav/wiki/GettingStarted](http://code.google.com/p/sabredav/wiki/GettingStarted)

我尝试在我的控制器中使用 Symfony 做同样的事情，使用：

> 返回新的响应($server->exec());

但由于某种原因，尸体无权访问该文件夹。我想我遗漏了一些关于 Symfony 中响应工作方式的信息，但是什么？SabreDAV 使用它自己的 http 请求和响应系统，但如果（我认为）Symfony 不与 $_SERVER 等超全局变量混淆，这应该不是问题。

关于 Symfony 中的请求和响应：http: [//symfony.com/doc/current/book/http_fundamentals.html#requests-and-responses-in-symfony](http://symfony.com/doc/current/book/http_fundamentals.html#requests-and-responses-in-symfony)

这就是我所做的；它有点慢，必须有更好的方法，但我暂时会这样做：Controller.php：

```
$path=(__DIR__.'/../../../../web/public/');
$path=realpath($path);
$publicDir= new \MyClasses\FS\MyDirectory($path);
$server = new \Sabre\DAV\Server($publicDir);
$server->setBaseUri('/Symfony/web/app_dev.php/');

{
  $SyRequest = Request::createFromGlobals();
  $_server=$SyRequest->server->all();
  $_post=$SyRequest->request->all();
}

{
  $SaRequest=new \MyClasses\HTTP\Request($_server,$_post); 
  $resourceStream=false;
  $SaRequest->setBody($SyRequest->getContent($resourceStream),$resourceStream);
}

{
  $server->httpRequest=$SaRequest;
  $SaResponse=new \MyClasses\HTTP\Response();
  $server->httpResponse=$SaResponse;
  $server->exec();
}

{
  $content=ob_get_clean();
}

{
  $SyResponse=new Response($content,http_response_code(),headers_list());
}

return $SyResponse; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:01:13.397

```
$server->exec(); 
```

并没有真正返回任何东西。它尝试自己设置标头，并将输出流式传输到`php://output`（实际上，使用内置的请求/响应系统）。

如果你想将 SabreDAV 嵌入到 symfony 中，解决这个问题的最合适的方法是对 and 进行子类`Sabre\HTTP\Request`化`Sabre\HTTP\Response`，并在调用之前在服务器中设置它们（设置`->httpRequest`and`->httpResponse`属性）`->exec`。

然后，您覆盖的请求/响应对象应该映射到 symfony 的等价物。

我对 symfony 的了解还不够，无法告诉您它们是否清晰且容易地映射，我想在实践中尝试围绕 symfony 的系统工作会更简单（尽管从架构的角度来看，这不是最合适的） .

# svn - 擦除 Subversion 分支

> ID：14757752
> 
> 赞同：1
> 
> 时间：2013-02-07T17:57:31.873
> 
> 标签：svn, merge, tortoisesvn, branch

我被分配将几个分支合并回 Subversion 的主干。目前项目设置如下所示。

```
trunk
branches
    BranchA
    BranchB
    BranchC
tags
    // A bunch of tags (1 per release) 
```

目标是整合`BranchA`并`BranchB`返回到后备箱中，然后以某种方式将它们“隐藏”起来。

我想我知道如何进行实际的合并。在 Windows 资源管理器中右键单击**树干**`TortoiseSVN > Merge...`，然后`Reintegrate a branch`选择分支，然后合并。

问题 1 - 这是正确的使用方法吗？

我也不确定在我这样做之后存储库会是什么样子。我们希望确保未来的开发人员不会错误地在旧分支上工作。

问题 2 - 合并后分支是否无法使用，还是我们需要做其他事情？你能“删除”一个分支吗？如果是这样，分支历史会发生什么？或者我们是否需要做一些 hacky，比如将锁应用到分支？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:38:07.203

> 问题 1 - 这是正确的使用方法吗？

是的，这会将分支的内容合并到您的工作目录中。在您提交（新合并的）主干之前，存储库不会发生任何事情。一旦你提交，不仅主干更改会在 repo 中，而且它会记住从分支中合并的内容。

> 问题 2 - 合并后分支是否无法使用，还是我们需要做其他事情？

此时您可以删除分支，也可以继续对分支进行更改。如果您继续对分支进行更改，然后再进行一次合并，则只有新的东西（而不是之前合并的东西）将被合并到主干中。

如果您确实想删除分支，我发现最简单的方法是打开 repo 浏览器，右键单击分支并选择“删除”。该分支将从最新版本中消失。它仍将保留在回购历史记录中，如有必要，您可以将其带回，但进行新结帐的人将看不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:22:23.600

从命令行（回答问题1）：

```
$ cd $DEVROOT/主干

$ svn 合并 http://company.org/svn/proj/branches/BranchA
……
$ svn ci -m '合并的分支A'
$ cd rm -m 'BranchB 已经合并' http://company.org/svn/proj/branches/BranchA

$ svn 合并 http://company.org/svn/proj/branches/BranchB
……
$ svn ci -m '合并的BranchB'
$ cd rm -m 'BranchB 已经合并' http://company.org/svn/proj/branches/BranchB

```

将主干合并到分支并重新合并到主干不是 SVN 的有效用法。为什么 - 阅读：

*   [https://stackoverflow.com/a/2477089/173149](https://stackoverflow.com/a/2477089/173149)

我无法回答您的问题2，因为不知道您的**实际**要求...我建议阅读官方指南：

*   [http://svnbook.red-bean.com/en/1.6/svn.branchmerge.html](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.html)

并建议使用**功能**叶进行功能开发，使用**分支**叶进行长期版本支持，并使用**标签**进行发布。

并且不建议删除任何分支。为什么？因为在 SVN 中删除不会使存储库更小...只会使**svn ls**输出更短...

看我的指南：

*   [http://gavenkoa.users.sourceforge.net/tips-html/devel-versioning.html](http://gavenkoa.users.sourceforge.net/tips-html/devel-versioning.html)
*   [http://gavenkoa.users.sourceforge.net/tips-html/devel-proj-branching.html](http://gavenkoa.users.sourceforge.net/tips-html/devel-proj-branching.html)

* * *

*   每个主要版本都有**自己的**分支。
*   为开发保留的另一个分支。
*   最新的主要版本分支处于活动状态。所有较旧的主要分支都是被动的。
*   被动主要分支**仅用**于此主要版本系列中最新代码的小错误修复（无新功能）。
*   在开发分支中开发的功能。在合并到活动的主要发布分支之前发布。
*   错误已在最旧的主要版本分支中修复，必须为其提供并合并到所有下一个主要版本分支和开发分支。
*   发布意味着完成在分支上开发一组功能和错误修复并将产品构建移动到发布服务器。
*   经过测试和稳定发布。这表示：

    *   VERSION 文件已更新。
    *   CHANGE 文件中填充了功能集、版本、数据和 VCS 修订号。
    *   在 VCS 中按标签标记发布。
    *   调用由标记标记的源的构建。将结果复制到发布服务器。
*   如果在某个版本中发现错误，它会在开发分支中修复并发布新的次要/修复产品版本。

*   不支持以前的主要/次要版本（仅使用最新版本）。用户总是被迫更新到最新版本。

这里**t** - 标签，**b** - 分支：

```
  +--+-----+----------+-----+----+------ +--------+----->
  开发| | ^ ^ | | | | |
     | | | | | | vvv
     | | | | | | +--+------+------+-->
     | | | | | | b2 | | |
     | | | | | | vvv
     | | | | | | t2.0.0 t2.0.1 t2.1.0
     vv | | vv
    t0.1.0 +---+------+-+---+-+-----+------+------+------+ ------+--->
           b1 | | | | | | | |
               vvvvvvv
              t1.0.0 t1.0.1 t1.0.2 t1.1.0 t1.2.0 t1.2.1 t1.2.2 t1.2.3

```

在这个例子中，我们发布了标签**1.0.1**和**1.0.2 ，并在分支****1**中修复了错误， 因为开发分支还没有准备好投入生产。

# java - 为什么Java标准库中没有堆栈集合类型的接口？

> ID：14757754
> 
> 赞同：2
> 
> 时间：2013-02-07T17:57:36.520
> 
> 标签：java, data-structures, collections, interface

队列通常以 FIFO（先进先出）方式对元素进行排序，而堆栈则以 LIFO（后进先出）方式进行。

在 Java 标准库中，有一个称为`Queue`建模队列的特定接口和一组实现它的类。

尽管有实现堆栈的类，例如`Stack`(which extends `Vector`)、`ArrayDeque`(如[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)中所述，“它可能比`Stack`​​用作堆栈时更快”) 和`LinkedList`(及其`push`和`pop`方法)，但没有特定的接口对于堆栈集合类型。

为什么Java标准库中没有堆栈集合类型的接口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:02:41.293

见[`java.util.Deque`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)接口 API

双端队列也可以用作 LIFO（后进先出）堆栈。应优先使用此接口而不是旧的 Stack 类。当双端队列用作堆栈时，从双端队列的开头推送和弹出元素。

Deque 有 push、pop 和 peek 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:02:31.487

java中接口的设计意味着每个实现接口的类都声明它。

你可以为许多角色设想许多接口，但你不能每次都设计一个接口，或者你的代码开始变得非常冗长。

所以必须做出选择。显然，设计一个 LIFO 接口并让 LIFO 类声明它并不是那么重要。

# python - 未知值的 SQLalchemy 重复输入错误

> ID：14757756
> 
> 赞同：1
> 
> 时间：2013-02-07T17:57:42.853
> 
> 标签：python, sqlalchemy

我正在编写一个脚本来同步 Adwords 帐户和使用 Sqlalchemy 的本地数据库。我遵循 Adwords API 的对象层次结构，所以我的第一个表是“campaigns”，第二个是“adgroups”

这是我如何定义两者：

```
class Campaign(Base):

__tablename__ = 'aw_campaigns'

id = Column(Integer, primary_key=True)
name = Column(String(99))
impressions = Column(Integer)
serving_status = Column(String(99))
start_date = Column(String(99))
status = Column(String(99))

def __init__(self, id, name, impressions, serving_status, start_date, status):
    self.id = id
    self.name = name
    self.impressions = impressions
    self.serving_status = serving_status
    self.start_date = start_date
    self.status = status

class Adgroup(Base):

__tablename__ = 'aw_adgroups'

id = Column(Integer, primary_key=True)  # , primary_key=True
name = Column(String(99))
camp_id = Column(Integer, ForeignKey('aw_campaigns.id'))  # , ForeignKey('aw_campaigns.id')
camp_name = Column(String(99))
ctr = Column(Float)
cost = Column(Float)
impressions = Column(Integer)
clicks = Column(Integer)
status = Column(String(99))

def __init__(self, id, name, camp_id, camp_name, ctr, cost, impressions, clicks, status):
    self.id = id
    self.name = name
    self.camp_id = camp_id
    self.camp_name = camp_name
    self.ctr = ctr
    self.cost = cost
    self.impressions = impressions
    self.clicks = clicks
    self.status = status 
```

我查询 API，然后为 Adgroup 表中的行构建对象列表：

```
adgr_query = 'SELECT CampaignId, CampaignName, Clicks, Cost, Impressions, Ctr, Id, KeywordMaxCpc, Name, Settings, Status'
adgr_page = ad_group_serv.Query(adgr_query)[0]['entries']

adgr_ins = [Adgroup(i['id'],
            i['name'],
            i['campaignId'],
            i['campaignName'],
            i['stats']['ctr'],
            i['stats']['cost']['microAmount'],
            i['stats']['impressions'],
            i['stats']['clicks'],
            i['status']) for i in adgr_page if int(i['id']) not in adgr_exist] 
```

但是当我提交时，我得到了错误：

```
 (IntegrityError) (1062, "Duplicate entry '2147483647' for key 'PRIMARY'") 
```

问题是我不知道那个值是从哪里来的。

```
'2147483647' in [i['id'] for i in adgr_page]
>>> False
'2147483647' in str(adgr_page)
>>> False 
```

我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:41:30.253

看起来你在某处有整数溢出。

症状：2147483647 是 2**31-1 - 表示使用 32 位来存储数字。

AdGroup.Id 字段的类型为[xsd:long](https://developers.google.com/adwords/api/docs/reference/latest/AdGroupService.AdGroup?hl=en#id)，长度为 64 位。

Python 本身对整数值的大小没有限制，但数据库可能有这样的限制。

**简短的解决方案：**

尝试使用[BigInteger](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#generic-types) sqltype 类型`id = Column(BigInteger, primary_key=True)`，camp_id 和来自 AdWords API 的其余 xsd:long 值相同。SQLAlchemy 有可能会选择数据库特定的大整数列类型。或者您可以使用 String(64) 作为 id 的类型。但在这种情况下，您需要额外的步骤来生成主键。

您对 AdWords API 的查询返回了多少条目？是否有超过 2**32 条记录？我对此表示怀疑——您的数据库不太可能处理约 42 亿条记录。

**解决方案 2 - 长期**

虽然我建议不要信任外部源的主键完整性，并且会依赖数据库使用自动增量生成主键，并依赖 SQLAlchemy 来处理基于数据库生成的主键的外键填充：

```
class Adgroup(Base):
    __tablename__ = 'aw_adgroups'
    id = Column(Integer, Sequence('adgroup_seq'), primary_key=True)  # , primary_key=True
    adGroupId = Column(String(64)) 
    campaignId = Column(Integer,ForeignKey('aw_campaigns.id'))
    campaign = relationship("Campaign", backref = "adgroup")
    ...

class Campaign(Base):
    __tablename__ = 'aw_campaigns'
    id = Column(Integer, Sequence('adgroup_seq'), primary_key=True)
    campaignId = Column(String(64))
    ... 
```

看起来您可能需要通过campaignId 和adGroupId 进行查找 - 这样您就可以在它们上添加索引。

然后您创建您的 Campaign 和 AdGroup 对象并添加它们之间的关系。该代码将取决于您要使用的关系类型 - 一对多或多对多。查看[sqlalchemy 关系手册](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)以获取更多详细信息。

```
ag = AdGroup(**kwargs)
camp = Campaign(**kwargs)
ag.campaign = camp
session.add(ag) 
```

# intellij-idea - IntelliJ 12 Grails 2.1 配置 - 未配置 Grails SDK

> ID：14757758
> 
> 赞同：26
> 
> 时间：2013-02-07T17:57:43.743
> 
> 标签：intellij-idea, grails-2.0

我觉得我在这一点上错过了一些简单的东西。我在运行 IntelliJ 10 时从 1.3.7 升级到 grails 2.1.1，最近我升级到 IntelliJ 12 并导入了所有设置。不知何故，在 IntelliJ 12 的项目中，我没有 grails SDK。

我的全局库定义了包含所有正确 .jar 的 grails 2.1.1，但是，“工具”菜单缺少“Grails”子菜单，并且尝试运行该应用程序会给出未配置 Grails SDK 的错误消息。

如果我为 grails 创建一个新项目，SDK 会正确配置并且 Grails 会显示在“工具”菜单中。我错过了什么阻止我将 Grails SDK 添加到这个项目中？感谢社区，感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-17T13:18:28.157

您不必创建新项目。

有同样的问题，我花了很多时间来解决它：

*   右键单击您的 Grails 模块
*   点击“添加框架支持”
*   选择“时髦”
*   “使用库”旁边的下拉菜单将允许您选择一个 grails 库。
*   如果下拉列表为空，请按“创建”并选择您的 grails 库目录。
*   然后配置 Grails SDK

![添加框架支持](../Images/5d2088e2e305505c7c6822ff8fb6e163.png)

![选择 grails 库](../Images/f96403d35c4914b699e782fe31d366b7.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-19T17:47:40.173

使用 Intellij 16 右键单击​​右侧项目窗格中的项目。

选择 Grails->配置 Grails SDK。

如果您使用的是 grails 包装器，我会指出该 SDK：

/Users/**你的用户**/.grails/wrapper/2.5.2/grails-2.5.2

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T18:33:28.253

我也有 IntelliJ 12，要运行应用程序，我只需单击“文件”->“创建项目”，选择“Grails 项目![在此处输入图像描述](../Images/041ecb851aa965e83bb072fab0bcf33c.png)”

点击下一步，

![在此处输入图像描述](../Images/e5957f2ef62828158455b2872bd2089c.png)

单击 em 创建，选择包含 Grails 2 的文件夹，然后瞧。:-)

如果您之前有该项目，请在项目“grails integration-with --intellij”中运行或运行导入项目，并创建 Grails SDK

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-02T18:32:25.780

我在以下位置找到了指向最新版本的符号链接：

~/.sdkman/candidates/grails/current

我正在使用 SDKMAN 4.0.37

将 Intellij 指向该位置将允许您使用 sdkman 切换版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T18:16:05.793

这里不是真正的“答案”，但在看到与 IDEA 类似的问题后，我继续创建了一个新项目并复制了我的源代码并解决了我的问题，如果没有解决实际问题的话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-11T10:41:49.800

我正在使用 IntelliJ 12.0.1 终极版。我已经在我的计算机上安装了 Grails 2.3.1，但在尝试将其指定为 Grails SDK 时总是出错 - “未能创建库。看起来指定路径中的 Grails 分发已损坏。无法确定版本。” 我尝试使用 Grails 2.3.0，但遇到了同样的错误。然后，我用 Grails 2.2.4 试试运气，我终于可以让它工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-20T16:51:30.777

创建一个新项目实际上不会覆盖任何现有代码；只需将它指向您现有的项目目录，选择 Grails 并打开它。

您的项目现在会抱怨没有 Grails SDK；只需将它指向您的 Grails dist 就可以了。

# c# - 从相对 URI 计算本地路径的正确方法

> ID：14757759
> 
> 赞同：2
> 
> 时间：2013-02-07T17:57:43.353
> 
> 标签：c#, vb.net, winforms, uri

似乎没有从相对[URI](http://msdn.microsoft.com/en-us/library/system.uri.aspx) ( ) 计算[LocalPath](http://msdn.microsoft.com/en-us/library/system.uri.localpath.aspx)的标准方法，可以与 结合使用，例如将其与文件掩码 (*.ext) 结合使用。问题是产生类似于，而不是 的东西。`this property is valid only for absolute URIs`[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)[`MakeRelativeUri`](http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri.aspx)`my%20folder/``my folder\`

这是我发现的一种解决方法：

```
Module Module1
  Sub Main()
    Dim path1 As String = "C:\my folder\"
    Dim path2 As String = "C:\"
    MsgBox(GetPathDiff(path1, path2)) 'outputs "my folder\" (without quotes)
  End Sub

  Private Function GetPathDiff(path1 As String, path2 As String) As String
    Dim uri1 As New Uri(path1)
    Dim uri2 As New Uri(path2)
    Dim uri3 As Uri = uri2.MakeRelativeUri(uri1)
    Return Uri.UnescapeDataString(uri3.OriginalString).Replace("/", "\")
  End Function
End Module 
```

我觉得这是一种相当笨拙的方法，并且可能有一些我还没有偶然发现的隐藏的石头，即这种方法对于不同的用例并不是 100% 稳定的。

**有更好的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:36:58.650

（注意：与其说是哀叹，不如说是一个答案，但我希望其中一些能提供信息。）

如果您在这里尝试做的是获取两个文件系统路径之间的相对路径，那么您最好不要坚持使用文件系统 API。

最初，[计算相对于某个根的路径的问题 - Path.Combine 的倒数](https://stackoverflow.com/questions/1633028/calculating-the-path-relative-to-some-root-the-inverse-of-path-combine)看起来与您的目标相同，在我对本段应用**EDIT**之前，我建议查看它。但仔细观察后发现，在我写这篇文章的时候，那里的解决方案并不是那么好。

我在`Uri`这里担心的是它是围绕 URI 路径的规则设计的，这些规则不一定与文件系统路径的规则相同。例如，URI 规范说“。”的路径段。是“打算在相对路径引用的开头使用”，而对于文件系统路径，将它们放在路径中间是完全合法的（如果有点奇怪）。eg`c:\.\a\.\b\.\c`是合法的，含义与 相同`c:\a\b\c`。

众所周知，文件系统规范化很容易出错，因此可能还有比这更微妙的问题。

所以理论上，一个特定于文件系统的 API 会比使用旨在处理 URI 的代码更好，希望它能产生适用于文件系统的结果。在实践中，.NET 似乎没有提供一个文件系统感知 API 来计算相对路径，令人惊讶的是，用于这个确切目的的 Win32 API`PathRelativePathTo`得到了那个“.”。问题错了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:34:26.740

[editedit] 好的，经过一番思考，我**确实**想出了一个替代方案，但它可能并不适合所有人：

```
void Main()
{
    var path1 = @"C:\Program Files\Internet Explorer\";
    var path2 = @"C:\temp\";
    var sb = new StringBuilder(1000);
    PathRelativePathTo(sb, path1, 0, path2, 0);
    sb.ToString().Dump();
}

/*
BOOL PathRelativePathTo(
  _Out_  LPTSTR pszPath,
  _In_   LPCTSTR pszFrom,
  _In_   DWORD dwAttrFrom,
  _In_   LPCTSTR pszTo,
  _In_   DWORD dwAttrTo
);
*/
[DllImport("Shlwapi.dll")]
[return:MarshalAs(UnmanagedType.Bool)]
public static extern bool PathRelativePathTo(
    [Out] StringBuilder result,
    [In] string pathFrom,
    [In] int dwAttrFrom,
    [In] string pathTo,
    [In] int dwAttrTo); 
```

哦，刚刚有了一个想法——这是否（或多或少）满足了您的需求？

```
public string PathDiff(string path1, string path2)
{
    var replace1 = path1.Replace(path2, string.Empty);
    var replace2 = path2.Replace(path1, string.Empty);
    return Path.IsPathRooted(replace1) ? replace2 : replace1;
} 
```

或者可能更好：

```
public string PathDiff(string path1, string path2)
{
    return path1.Length > path2.Length ? 
        path1.Replace(path2, string.Empty) : 
        path2.Replace(path1, string.Empty);
} 
```

（编辑：derp，过早点击提交）：

不幸的是，没有内置的相对路径助手，但你基本上已经有了你所拥有的，就像这样：

```
var path1 = @"C:\dev\src\release\Frontend\";
var path2 = @"C:\dev\src\";

var path1Uri = new Uri(path1);
var path2Uri = new Uri(path2);

var from1to2 = path1Uri.MakeRelativeUri(path2Uri).OriginalString;
var from2to1 = path2Uri.MakeRelativeUri(path1Uri).OriginalString;

Console.WriteLine("To go from {0} to {1}, you need to {2}", path1, path2, from1to2);
Console.WriteLine("To go from {0} to {1}, you need to {2}", path2, path1, from2to1); 
```

输出：

```
To go from C:\dev\src\release\Frontend\ to C:\dev\src\, you need to ../../
To go from C:\dev\src\ to C:\dev\src\release\Frontend\, you need to release/Frontend/ 
```

现在，对于斜线差异“\”与“/”，如果将最终结果包装在 中`Path.GetFullPath`，它将自动解决差异：

```
Console.WriteLine(Path.GetFullPath(Path.Combine(path1, from1to2)));
Console.WriteLine(Path.GetFullPath(Path.Combine(path2, from2to1))); 
```

输出：

```
C:\dev\src\
C:\dev\src\release\Frontend\ 
```

# .htaccess - 如何使用 mod_rewrite 重写两个子文件夹的规则

> ID：14757763
> 
> 赞同：0
> 
> 时间：2013-02-07T17:57:49.717
> 
> 标签：.htaccess, mod-rewrite, isapi, isapi-rewrite, isapi-redirect

我需要做这样的事情：

```
########## SITE 1 
RewriteEngine on 
RewriteBase /mysite1  
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 

########## SITE 2
RewriteEngine on 
RewriteBase /mySecondSite   
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

问题是我只能使用一个`.htaccess`文件，因为我在 windows 2003 Server 上使用[Helicon ISAPI_Rewrite 3 。](http://www.isapirewrite.com/)

有没有办法将两个 .htaccess 文件合并到其中一个文件中并使它们正常工作？

我试过这个只是为了测试如果`mysite`没有 ，是否可以工作`RewriteBase`，但似乎不起作用：

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^mysite1/(.*)$ index.php?url=$1 [L,QSA] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:34:12.547

比我想不出比这更好的了：

```
########## SITE 1 
RewriteEngine on 
RewriteCond %{HTTP:Host} ^www\.website\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ /mysite1/index.php?url=$1 [L,QSA] 

########## SITE 2
RewriteEngine on 
RewriteCond %{HTTP:Host} ^www\.demo\.website\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ /mySecondSite/index.php?url=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:45:26.447

最后我这样做了：

```
RewriteEngine on 
RewriteBase /

########## SITE 1 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^site1/(.*)$ site1/index.php?url=$1 [L, QSA]

########## SITE 2
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^site2/(.*)$ site2/index.php?url=$1 [L, QSA]

########## SITE 3 (by URL) 
RewriteCond %{HTTP_HOST} ^mysite3.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.mysite3.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php?url=$1 [L, QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:26:12.530

如果您的文件夹名称与站点名称相同：

```
RewriteEngine on 

RewriteCond %{HTTP:Host} ^www\.([^.]+)\.com$
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ /%1/index.php?url=$1 [L,QSA] 
```

# ios - 位智如何通过定位改变对象位置？

> ID：14757764
> 
> 赞同：1
> 
> 时间：2013-02-07T17:57:50.717
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, localization

第一个图像是语言设置为希伯来语时，第二个是英语。看图片中的“Thanks:”字样。Waze 如何设法将单词的位置更改为从右到左的语言？定期本地化

**谢谢：x**

本来应该

**תודות:X**

这只是一个例子。位智做了很多。

Waze 支持 iOS 4.3 及更高版本，因此 AutoLayout 是不可能的。通过定期本地化，我知道您可以更改单词的内容，但位置？这是第一次。

我可以将`if`iphone 语言设置为英语`then`，将布局更改为..？（如果是这样，那是很多如果......”谢谢

![希伯来语](../Images/af4a98aa6604766909d598336e43310b.png) ![英语](../Images/c11f32bdbd652e56530fc67302fd79c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:19:29.577

坦率地说，我不知道是否有任何标准化的方式来做到这一点。但我看到了几个选项： 1\. 使用本地化的 .xib 文件甚至完整的故事板。2\. 以编程方式改变它。获取当前本地化并将一些 IF 添加到视图控制器并重新排列项目。如果这是在自定义 UITableViewCell 子类中，则覆盖 layoutSubViews（或左右）并根据区域设置更改布局。如果将其布局在 cellForRowAtIndexPath 中，则在此处应用本地化。

# r - 如何从一个变量中获得多个回报？

> ID：14757766
> 
> 赞同：1
> 
> 时间：2013-02-07T17:57:57.580
> 
> 标签：r, multiple-variable-return

嗨，所有社区。我在论坛中搜索，但没有成功找到这个“简单”的问题。可能已经有类似的问题了？我有以下数据框：

```
ID<-c(rep(seq(1:5),4))
LAB<-c("A","B","C","A")
datain<-data.frame(cbind(ID,LAB)) 
```

我想知道R中是否存在一个函数来为每个ID获取不同的值（LAB）而不**重复**？喜欢：

```
ID<-c(rep(seq(1:5),4))
LAB<-c("A B C")
dataout<-data.frame(cbind(ID,LAB))
dataout
ID   LAB
1   1 A B C
2   2 A B C
3   3 A B C
4   4 A B C
5   5 A B C
6   1 A B C
7   2 A B C
8   3 A B C
9   4 A B C
10  5 A B C
11  1 A B C
12  2 A B C
13  3 A B C
14  4 A B C
15  5 A B C
16  1 A B C
17  2 A B C
18  3 A B C
19  4 A B C
20  5 A B C 
```

我很抱歉之前没有指定输出！！！

一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:05:26.720

你没有指定你希望你的输出看起来像什么。

有几种选择。这里有两个：

```
aggregate(as.character(LAB) ~ ID, data, c, simplify = FALSE)
#   ID as.character(LAB)
# 1  1        A, B, C, A
# 2  2        B, C, A, A
# 3  3        C, A, A, B
# 4  4        A, A, B, C
# 5  5        A, B, C, A
with(data, tapply(as.character(LAB), ID, FUN = c))
# $`1`
# [1] "A" "B" "C" "A"
# 
# $`2`
# [1] "B" "C" "A" "A"
# 
# $`3`
# [1] "C" "A" "A" "B"
# 
# $`4`
# [1] "A" "A" "B" "C"
# 
# $`5`
# [1] "A" "B" "C" "A" 
```

`table`如果您碰巧只对“ID”中的每个“LAB”的频率感兴趣，您甚至可能对此感到满意。

```
table(data)
#    LAB
# ID  A B C
#   1 2 1 1
#   2 2 1 1
#   3 2 1 1
#   4 2 1 1
#   5 2 1 1 
```

* * *

### 根据所需输出进行更新

现在您已经向我们展示了您希望输出的样子，也许您可​​以试试这个：

```
newout <- merge(datain, 
                aggregate(as.character(LAB) ~ ID, datain, 
                          function(x) paste(sort(unique(x)), collapse = " "), 
                          simplify = FALSE))
head(newout)
#   ID LAB as.character(LAB)
# 1  1   A             A B C
# 2  1   B             A B C
# 3  1   C             A B C
# 4  1   A             A B C
# 5  2   A             A B C
# 6  2   B             A B C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:03:33.260

我想你正在寻找`split`：

```
with(datain, split(LAB, ID))
# $`1`
# [1] A B C A
# Levels: A B C
# 
# $`2`
# [1] B C A A
# Levels: A B C
# 
# $`3`
# [1] C A A B
# Levels: A B C
# 
# $`4`
# [1] A A B C
# Levels: A B C
# 
# $`5`
# [1] A B C A
# Levels: A B C 
```

由于每个`ID`可能有不同数量的`LAB`s，因此输出是一个列表。

**编辑：**由于现在看来您只需要唯一值，请执行以下操作：

```
with(unique(datain), split(LAB, ID)) 
```

如果您不喜欢获取因子，请执行以下操作：

```
with(unique(datain), split(as.character(LAB), ID)) 
```

# breeze - 在服务器上添加“或”子句以进行微风查询

> ID：14757767
> 
> 赞同：1
> 
> 时间：2013-02-07T17:57:58.563
> 
> 标签：breeze, single-page-application, devforce

所以我们希望能够通过电话号码搜索一个人。从[这篇](https://stackoverflow.com/questions/13646217/nested-query-navigation-property-collection)SO 帖子中，我收集到通过作为列表的导航属性添加 where 子句还不能轻而易举地工作。

这对我来说没问题，因为微风提供了一种很棒的方式来处理[服务器端属性](https://stackoverflow.com/questions/13704466/how-to-properly-send-action-parameter-along-with-query-in-breezejs/13793910#13793910)。但是，当我在服务器上编写查询时，我需要将额外的 where 子句作为“OR”添加到查询中，这样就不会干扰客户端上已有的 where 子句。我正在服务器上执行此操作，但它不起作用。（注意这是使用 DevForce Predicate Builder）：

```
var pred = PredicateBuilder.False<Person>();
pred.Or(x => x.PhoneNumbers.Any(y => y.Value.StartsWith(searchString)));
var qry = _contextProvider.Context.People.Where(pred); 
```

我是在构建谓词错误还是我正在做的事情被添加为“和”子句，从而干扰了来自客户端的其他 where 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:19:56.513

## 更新后的帖子：2013 年 11 月 25 日

从 Breeze 1.4.6 开始，现在支持“任何”和“所有”运算符。

所以你的客户端微风查询看起来像：

```
var query = EntityQuery.from("People").where("PhoneNumbers", "any", "Value", "startsWith", searchString); 
```

这假设您有一个“People”端点，该端点返回一个具有“PhoneNumbers”属性的人对象，该属性又具有自己的“Value”属性。

另见：[http ://www.breezejs.com/documentation/query-examples](http://www.breezejs.com/documentation/query-examples)

## 较早的帖子

Breeze 确实支持 or'ing 谓词，如下所示：

```
 var pred = Predicate.create("ShipCity", "stArtsWiTH", "F")
                         .or("ShipCity", "startswith", "C");
 var q = EntityQuery.from("Orders").where(pred); 
```

微风尚不支持的是“任何”和“所有”运算符。尽管这些将在不久的将来得到支持。

# automation - 在 mediaWiki 中手动创建分层类别的自动化替代方案？

> ID：14757769
> 
> 赞同：1
> 
> 时间：2013-02-07T17:58:01.260
> 
> 标签：automation, mediawiki, categories, bots, pywikibot

我想启动一个基于 mediaWiki 的站点，但不是手动添加类别和子类别，而是想以自动方式添加它们，我提供类似 xml 文件的内容，并且 bot/script/algorithm/... 遍历列表并自动创建类别和子类别及其页面。目前还没有页面，但我想从一组干净的类别开始，帮助用户对页面进行排序。

我找到了[pywikipediabot](https://www.mediawiki.org/wiki/Manual%3aPywikipediabot)，但我不知道如何将它用于我的目的 - 它似乎只适用于现有页面的类别。你会使用 pywikipediabot 来创建新类别的层次结构吗？如果是的话怎么做？xml文件可以用作模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:57:34.533

我找到了解决我最初批量创建类别的问题的解决方案，但是如果您知道更好的解决方案，我不会将该问题标记为已关闭 - 请发布。

MediaWiki 具有导入功能。使用您的管理员帐户转到

```
http://yourMediaWiki/index.php/Special:Import 
```

这允许您选择导入一个 xml 文件，该文件必须遵循一定的结构：请参阅[此处](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=docs/export-demo.xml;h=591f675c581109e54cd59cd79af4cbc634aa873d;hb=HEAD)

对于名称为“测试类别”和文本“类别测试”的类别，您必须创建一个像这样的“页面”元素：

```
<page>
<title>Category:Test Category</title> <!-- Name of the category, don't forget to prefix with 'Categroy:' -->
<ns>14</ns> <!-- 14 is the namespace of categories -->
<id>n</id> <!-- identifier for category -->
<revision>
  <id>16</id> <!-- number of revision -->
  <timestamp>2013-02-10T22:07:46Z</timestamp> <!-- Creation date & time -->
  <contributor>
    <username>admin</username> <!-- Name of user who created the category -->
    <id>1</id> <!-- ID of the user -->
  </contributor>
  <comment></comment> <!-- Comment about the category. Can be left blank -->
  <sha1></sha1> <!-- sha1 hash can be left blank -->
  <text xml:space="preserve" bytes="1">Category Testing</text> <!-- It seems it doesn't matter what you write into the bytes attribute. -->
</revision>
</page> 
```

如果要创建类别的层次结构，只需将父类别标签添加到文本元素中。假设类别应该是“父类别”类别的一部分，那么文本元素应该如下所示：

```
<text xml:space="preserve" bytes="1">Category Testing [[Category:Parent Category]]</text> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T23:58:55.843

如果您能够启动并运行 pywikibot，那么您可以使用其 Category 类。[Github 上的主要入口点搜索`class Category(Page)`](https://github.com/wikimedia/pywikibot-core/blob/master/pywikibot/page.py).

Mediawiki 中的类别基本上是标准页面，但在命名空间 14 中。要在类别中包含任何页面 - 包括作为类别的页面 - 在您包含的页面的 wikitext 中`[[Category:<The-Category>]]`

所以你可以做这样的事情

```
>>> import pywikibot as pwb
#Your site will be different than this
>>> testwiki = pwb.Site('en','test')
>>> catA = pwb.Category(testwiki, 'testCatA')
>>> catA.namespace()
14
>>> catA._text = u'[[Category:testCatB]]'
>>> catA.save()
Page [[test:Category:TestCatA]] saved 
```

现在您有一个页面`Category:TestCatA`，它是`Category:TestCatB`.

# ruby-on-rails - Rails：返回克隆对象加上一个属性

> ID：14757772
> 
> 赞同：0
> 
> 时间：2013-02-07T17:58:07.043
> 
> 标签：ruby-on-rails, attributes, append

一个对象会产生以下 JSON 响应：

```
[{
  "email":"admin@host.com",
  "id":2,
  "role_id":2,
}] 
```

我想添加一个自定义`is_admin`属性：

```
[{
  "email":"admin@host.com",
  "id":2,
  "is_admin":"true",
  "role_id":2,
}] 
```

我想以一种聪明的方式注入“is_admin”标志：

```
full_obj = user.do_something_to_add_attribute('is_admin', user.is_admin?) 
```

这样原始`user`对象将不会被修改，而只有 的结果`do_something_to_add_attribute`将包含新标志。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:27:50.750

如果您正在使用`to_json`，请尝试

```
# user.rb
def is_admin
  is_admin?
end

# in generating the json object
user.to_json(only: [:email, :id, :role_id], methods: [:is_admin]) 
```

# php - 数据库不对数组数据集做 INSERT

> ID：14757773
> 
> 赞同：0
> 
> 时间：2013-02-07T17:58:10.640
> 
> 标签：php, mysql, sql, insert

我的整个代码如下。`$members`我有一个存储一些 ID的数组。我运行一个循环来搜索表中的这些 ID，检索它们各自的名称并将它们存储在另一个数组`$members_name`中。然后我将两个数组都插入我的表中。数组的大小`$members`在 1-6 之间。

```
<?php
    session_start();
        $members = $_POST['mem'];
        $n=count($members);
        foreach($members as $key=>$value){
            $res = mysql_query("SELECT id,name,email FROM users WHERE id='".$value."'");
            if ($res === false) {
                echo mysql_error();
                die;
            }
            $row = mysql_fetch_assoc($res);

            if($row['id'])
            {
                $members_name[]=$row['name'];
                $members_email[]=$row['email'];
            }
        }
        $sess_uid = $_SESSION['id'];
        $sess_email = $_SESSION['email'];
        $sess_name = $_SESSION['name'];
        $id=$_SESSION['eid'];
        $name=$_SESSION['ename'];
        $members=$_SESSION['emembers'];

        if ($n==5){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name,mem_6_id,mem_6_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."','".$members[0].",'".$members_name[0]."','".$members[1].",'".$members_name[1]."','".$members[2].",'".$members_name[2]."','".$members[3].",'".$members_name[3]."','".$members[4].",'".$members_name[4]."')");
        }
        else if ($n==4){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name,mem_5_id,mem_5_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."','".$members[0].",'".$members_name[0]."','".$members[1].",'".$members_name[1]."','".$members[2].",'".$members_name[2]."','".$members[3].",'".$members_name[3]."')");
        }
        else if ($n==3){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name,mem_4_id,mem_4_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."','".$members[0].",'".$members_name[0]."','".$members[1].",'".$members_name[1]."','".$members[2].",'".$members_name[2]."')");
        }
        else if ($n==2){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name,mem_3_id,mem_3_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."','".$members[0].",'".$members_name[0]."','".$members[1].",'".$members_name[1]."')");
        }
        else if ($n==1){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name,mem_2_id,mem_2_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."','".$members[0].",'".$members_name[0]."')");
        }
        else if ($n==0){
            $res=mysql_query("INSERT INTO eventregistration(event_id,event_name,event_members,mem_1_id,mem_1_name) 
      VALUES('".$id."','".$name."','".$members."','".$sess_uid."','".$sess_name."')");
        }
        $url="events.php?slug=".$slug;
            header('Location: ' . $url);
            exit;
?> 
```

我仍然是 PHP 的学习者。我知道我使用的是旧格式的 PHP。我仍然需要帮助来运行这个页面，而不是关于 PDO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:03:32.060

1.  您需要停止使用`mysql_`已弃用的功能。使用`mysqli_`或`PDO`代替。
2.  您的代码容易受到 SQL 注入的攻击。
3.  您的表结构未标准化。绝对没有理由需要为`n`成员设置专栏。
4.  不是为每个`n`成员执行逻辑，而是将它们放入一个数组并创建一个动态列列表。

# java - Java - 如何压缩 BufferedImage？

> ID：14757775
> 
> 赞同：2
> 
> 时间：2013-02-07T17:58:11.793
> 
> 标签：java, compression, bufferedimage

此外，就带宽而言，哪种方法（jpeg、png、gif）最适合压缩？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:04:05.937

**使用什么格式：**

*   **[JPG/JPEG](http://en.wikipedia.org/wiki/JPEG)**是有损压缩 - 你会丢失细节。（质量水平可控，有帮助）
*   **[GIF](http://en.wikipedia.org/wiki/Gif)**是无损压缩，但它转换为 8 位色彩空间会扭曲许多图像，尤其是自然图像。
*   **[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)**是无损压缩。

除非您有令人信服的理由不使用 PNG，否则我会推荐它。[更多细节](http://www.howtogeek.com/howto/30941/whats-the-difference-between-jpg-png-and-gif/)

对于相同的图像，但使用不同的格式，图像质量通常与图像大小大致成反比。我建议使用 PNG，如果您的 PNG 太大，请使用 JPEG。PNG还具有支持透明度的好处。

GIF 真的只适用于小型计算机生成的图像，如图标或排版。上面的链接还包含图像大小比较。

与往常一样，最好的测试是为*您的*应用程序全部尝试并进行比较；但是，对于大多数此类分析的返回值最小的情况，PNG 是合理的默认值。

**创建 JPEG、PNG 或 GIF：**

就实际从 Java 创建 JPEG、PNG 或 GIF 而言`BufferedImage`。查看来自 Sun/Oracle的[本教程。](http://docs.oracle.com/javase/tutorial/2d/images/index.html)有很多内容可以帮助您，[最后一节](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)明确介绍了创建 JPEG、PNG 和 GIF。这是来自上述链接教程的修改后的片段：

```
try {
    BufferedImage bufImg = getBufferedImage(); //get BufferedImage from your code...
    File fout = new File("saved.png");
    ImageIO.write(bufImg, "png", fout);
} catch (IOException e) {
    //handle exception...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:03:41.840

压缩由各种文件格式本身（JPEG、PNG、GIF 等）处理。

“带宽最佳”是一个完全主观的问题，取决于图像本身的大小和内容。

例如，具有少量颜色和很少“平滑”（例如像素图形）的小图像在 PNG 和 GIF 格式中表现良好。[具有多种颜色和大量平滑的较大图像（例如照片）在使用JPEG](http://en.wikipedia.org/wiki/JPEG)时会做得更好，并且使用这种格式，您还可以在编码期间控制压缩/质量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:03:04.913

JPEG 最有可能。它是默认的 75% 压缩，但质量欠佳。

如果你想要质量：使用 png。你会得到透明度，这是 jpg 不支持的。png 的质量也被列为 100%。如果您想要质量好但文件大小较小的文件，您始终可以使用 png 并使用压缩类型，类似于文件的 base-64。然后只需解压缩并存储图像。它将使用低内存量来存储图像，但可以让您有效地保持质量不变。

# ruby - Ruby-拆分最后三个字段

> ID：14757791
> 
> 赞同：0
> 
> 时间：2013-02-07T17:58:48.373
> 
> 标签：ruby, split

我知道 split 是一个有用的工具，而且我知道有办法做到这一点。我尝试了几种不同的方法，但无法通过谷歌弄清楚。谁能帮我。

```
example1 = "test1,test2,test3,test4,test5"
example2 = "test1,test2,test3,test4,test5,test6,test7" 
```

所以我需要结果看起来像这样

```
example1 = test3,test4,test5
example2 = test5,test6,test7 
```

我也想保留逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:07:30.097

```
example = "test1,test2,test3,test4,test5"
example.split(',')[-3..-1] # => [test3,test4,test5] 
```

Split 给你一个数组。您可以使用范围来选择数组的子集。负数从数组的末尾开始计数，因此`[-3..-1]`选择倒数第三个到最后一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:04:10.330

这基本上只是`split`逗号`join`。数组的负索引很容易让你得到最后一个元素。所以我想你想要`str.split(',')[-3..-1].join(',')`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T18:37:10.853

您也可以使用`last(3)`代替`[-3..-1]`，如下所示：

```
example = "test1,test2,test3,test4,test5"
example.split(',').last(3).join(',') # => "test3,test4,test5" 
```

# javascript - 选中复选框时jQuery隐藏div，未选中时显示

> ID：14757792
> 
> 赞同：21
> 
> 时间：2013-02-07T17:58:52.540
> 
> 标签：javascript, jquery, html, checkbox

我试图在用户单击复选框时隐藏 div，并在用户取消选中该复选框时显示它。HTML：

```
<div id="autoUpdate" class="autoUpdate">
   content
</div> 
```

jQuery：

```
<script>
$('#checkbox1').change(function(){
        if (this.checked) {
            $('#autoUpdate').fadeIn('slow');
        }
        else {
            $('#autoUpdate').fadeOut('slow');
        }                   
    });
</script> 
```

我很难让这个工作。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-07T18:02:03.540

确保使用该`ready`事件。

**代码：**

```
$(document).ready(function(){
    $('#checkbox1').change(function(){
        if(this.checked)
            $('#autoUpdate').fadeIn('slow');
        else
            $('#autoUpdate').fadeOut('slow');

    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T11:35:27.810

HTML

```
<input type="checkbox" id="cbxShowHide"/><label for="cbxShowHide">Show/Hide</label>
<div id="block">Some text here</div> 
```

css

```
#block{display:none;background:#eef;padding:10px;text-align:center;} 
```

javascript/jquery

```
$('#cbxShowHide').click(function(){
this.checked?$('#block').show(1000):$('#block').hide(1000); //time for show
}); 
```

# ruby - 宝石和加载图像文件错误

> ID：14757798
> 
> 赞同：0
> 
> 时间：2013-02-07T17:59:07.690
> 
> 标签：ruby, image, gem, gtk

我做了一个桌面应用程序，我正在使用 gtk。我转换为我的应用程序 gem 项目。我的 gemspec 文件是这样的

```
s.name        = 'project_name'
s.version     = '1.0.0'
s.files       = ['lib/editor.rb', 'lib/utils.rb', 'lib/messages.rb',
'lib/lang.rb','lib/images/subhead.png']
.
. 
```

我将其构建为 gem，并将其安装为 gem。好的。我尝试使用 irb，需要“编辑器”，但它给了我错误。标准错误是

```
GLib::FileError: Failed to open file 'lib/images/subhead.png': No such file or directory from /var/lib/gems/1.9.1/gems/.. 
```

为什么？我在 editor.rb 中使用 png 文件。它给了我错误。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:11:07.690

你有没有查看`/var/lib/gems/1.9.1/gems/...`文件是否存在？

您是否将图像文件包含在 gem 中？

从表面上看，这个错误非常直接——没有它期望的文件。因此，请尝试找出为什么该文件不在 gem 中。

# wpf - 路径填充不填充路径

> ID：14757802
> 
> 赞同：0
> 
> 时间：2013-02-07T17:59:12.680
> 
> 标签：wpf, drawing

我是创建 svg/wpf 样式图像的新手，但在我的 WPF 应用程序中创建图标和按钮时，我真的想要基于矢量的图像的可伸缩性。因为我在 Expression Blend/Design/Xaml 路径方面不是最棒的......我找到了一个图像（吐司），在 inkscape 中跟踪它以获取坐标数据，并将数据放入 wpf 中的路径中。

它工作得很好，但我只有中风，不知道如何让填充物真正填充工作。确切的路径如下...我不确定路径是否未连接，或者我做错了什么。

谁能告诉我我做错了什么以及如何让填充工作（也许我应该使用路径几何？？）？

```
<Path x:Name="path" 
            Data="m 1019.9016,2413.6161 c -9.6791,-1.5608 -26.77911,-5.1262 -38,-7.9231 -25.2557,-6.2951 -80.95781,-21.994 -82.65127,-23.2941 -0.68732,-0.5277 -8.28932,-10.6343 -16.89333,-22.4591 l -15.64366,-21.4997 -3.89082,-15.1281 -3.89082,-15.1282 -2.09894,-73.5 -2.09893,-73.5 4.09893,-20.2722 4.09894,-20.2721 9.87843,-17.7279 9.87843,-17.7278 3.65882,-16.5 c 2.01235,-9.075 3.65742,-17.5681 3.65572,-18.8735 -0.002,-1.3053 -6.0781,-25.7947 -13.5031,-54.4208 l -13.5,-52.0473 0,-31.3997 0,-31.3997 -5.96265,-47.6795 c -3.27946,-26.2237 -8.24131,-66.5795 -11.02633,-89.6795 -2.78502,-23.1 -9.15772,-74.85 -14.16156,-115 l -9.09788,-73 2.02018,-77.5 2.02019,-77.5 16.07411,-64 c 14.80469,-58.9457 16.85389,-66.1718 25.94821,-91.5 5.43075,-15.125 13.39094,-38.075 17.6893,-51 4.29836,-12.925 12.41469,-34.56 18.03628,-48.0777 l 10.22107,-24.5776 36.27346,-54.4224 c 19.9504,-29.9323 40.51274,-60.3703 45.69408,-67.64013 l 9.42064,-13.2178 -15.64565,-17.5131 -15.64562,-17.51298 -10.30857,-30.76914 C 958.87955,903.02992 947.21154,871.58319 938.62035,850.07133 930.02916,828.55946 923,810.08374 923,809.01417 c 0,-1.06958 1.80538,-15.19396 4.01195,-31.38752 2.93085,-21.50885 5.48318,-35.64067 9.47164,-52.44284 3.00283,-12.65 6.612,-28.4 8.02039,-35 1.40838,-6.6 4.96838,-21 7.91111,-32 2.94272,-11 7.99067,-30.73137 11.21766,-43.8475 l 5.86725,-23.8475 3.75,0.50234 c 4.32955,0.57998 4.43628,0.33053 1.74626,-4.08151 -2.12927,-3.49232 -2.58385,-6.74465 -1.0732,-7.67828 0.50769,-0.31377 1.21844,-1.91532 1.57946,-3.55902 0.36101,-1.64369 1.03488,-2.98853 1.49748,-2.98853 0.4626,0 1.13639,-1.34452 1.49732,-2.98781 0.36093,-1.6433 1.74669,-3.84557 3.07946,-4.89392 1.33277,-1.04836 2.42322,-2.15629 2.42322,-2.46206 0,-0.30577 1.35,-2.55627 3,-5.0011 1.65,-2.44484 3,-4.78127 3,-5.19207 0,-0.4108 1.72095,-3.49554 3.82434,-6.85498 2.10339,-3.35943 4.11427,-6.89556 4.46862,-7.85806 0.35435,-0.9625 1.10839,-1.75 1.67566,-1.75 0.56728,0 1.03138,-0.675 1.03138,-1.5 0,-0.825 0.3999,-1.5 0.8887,-1.5 0.4888,0 1.1842,-1.575 1.5453,-3.5 0.3612,-1.925 1.0862,-3.5 1.6113,-3.5 0.5251,0 0.9547,-1.5199 0.9547,-3.37756 0,-1.85765 0.675,-3.93775 1.5,-4.62244 0.825,-0.68469 1.5,-1.79565 1.5,-2.46881 0,-0.67315 0.6474,-2.53055 1.4387,-4.12755 0.7913,-1.597 1.9217,-4.18469 2.512,-5.75041 0.5904,-1.56572 1.968,-3.0807 3.0613,-3.36663 1.4042,-0.36718 1.988,-1.36669 1.988,-3.40323 0,-2.52624 0.3654,-2.88337 2.9501,-2.88337 2.89,0 2.9562,-0.11717 3.25,-5.75 0.2839,-5.44331 0.4466,-5.76688 3.0499,-6.06642 2.3031,-0.26501 2.75,-0.79311 2.75,-3.25 0,-2.59287 0.3484,-2.93358 3,-2.93358 3,0 3,0 3,-6 0,-6 0,-6 3,-6 2.8054,0 3,-0.24572 3,-3.78856 0,-4.27117 2.4731,-9.74298 6.0774,-13.44629 1.3324,-1.36908 3.0844,-3.45132 3.8934,-4.62719 1.7187,-2.49847 3.3185,-2.70582 5.3331,-0.69124 1.2622,1.26228 2.0681,0.73752 6.3214,-4.11641 2.6811,-3.05971 5.2862,-6.29824 5.7892,-7.19671 1.2653,-2.26011 2.703,-3.10037 5.3355,-3.11829 1.9898,-0.0135 2.25,-0.52368 2.25,-4.41172 0,-3.81348 0.488,-4.82485 3.6803,-7.62777 3.7622,-3.30326 10.8913,-8.08885 17.8948,-12.01233 5.9469,-3.33154 9.9747,-6.87689 30.2643,-26.63888 16.7672,-16.33124 23.0452,-21.90694 38.9433,-34.58705 11.7869,-9.40104 15.561,-12.45627 19.1315,-15.48756 2.1055,-1.7875 4.3995,-3.25 5.0977,-3.25 0.6982,0 3.1187,-1.62111 5.3788,-3.60247 9.6082,-8.42318 34.5021,-26.60301 42.6844,-31.17206 2.9837,-1.66615 8.2649,-4.63958 11.736,-6.60763 9.235,-5.2361 15.3366,-7.74886 18.1794,-7.48666 3.8101,0.35143 7.1233,-1.04998 11.2624,-4.76386 2.9736,-2.66812 4.6063,-3.36732 7.8627,-3.36732 2.9514,0 4.9943,-0.7315 7.2472,-2.59499 5.59,-4.6238 13.9621,-9.37701 17.5931,-9.98832 1.9493,-0.32818 5.7941,-1.65303 8.5441,-2.94412 2.75,-1.29109 9.7115,-4.19627 15.47,-6.45596 10.8939,-4.27486 20.3674,-10.46818 22.2149,-14.52308 0.591,-1.29709 2.4787,-2.8763 4.1948,-3.50936 1.7162,-0.63305 3.9017,-1.56346 4.8567,-2.06758 0.9551,-0.50413 3.2626,-0.91659 5.1279,-0.91659 1.8653,0 5.007,-0.675 6.9815,-1.5 1.9745,-0.825 4.981,-1.5 6.6811,-1.5 1.7002,0 6.7771,-1.77626 11.2821,-3.94725 4.5051,-2.17099 11.5144,-5.13889 15.5763,-6.59534 4.0619,-1.45644 9.4619,-3.80426 12,-5.21736 2.5381,-1.4131 6.1897,-3.44736 8.1147,-4.52057 1.925,-1.07322 3.725,-2.2619 4,-2.64153 0.275,-0.37962 4.55,-2.36907 9.5,-4.42099 4.95,-2.05192 9.7814,-4.16416 10.7364,-4.69386 0.9551,-0.52971 2.8972,-0.9631 4.3158,-0.9631 1.4186,0 3.4018,-0.44021 4.4072,-0.97825 1.0053,-0.53803 7.0097,-2.07579 13.3431,-3.41724 6.3334,-1.34144 12.5688,-3.11794 13.8564,-3.94777 1.2876,-0.82983 4.1411,-1.81397 6.3411,-2.18696 2.2,-0.373 11.346,-2.43128 20.3245,-4.57396 12.707,-3.03247 17.4714,-3.76496 21.5,-3.30543 4.321,0.49288 6.4413,0.0801 12.8421,-2.50002 4.2166,-1.6997 8.0921,-3.09037 8.6122,-3.09037 1.1489,0 19.9203,-5.76806 22.7212,-6.98179 1.1,-0.47666 6.05,-1.84448 11,-3.0396 4.95,-1.19512 11.25,-2.97875 14,-3.96363 3.3917,-1.2147 8.2165,-1.83433 15,-1.92639 11.509,-0.15618 27.0817,-3.96225 39,-9.53186 8.3155,-3.88599 15.7959,-5.62769 28,-6.51942 4.95,-0.36169 9.675,-0.95318 10.5,-1.31443 2.0001,-0.87582 26.8123,-3.9238 35,-4.29948 8.1688,-0.37482 15.0611,-1.90375 20.046,-4.44688 2.1309,-1.08708 5.5798,-1.97075 7.6642,-1.9637 3.9167,0.0132 11.5501,-1.47751 28.7898,-5.62249 5.5,-1.32238 10.7399,-2.40117 11.6441,-2.39733 0.9043,0.004 8.534,-2.243 16.955,-4.993 9.493,-3.10012 17.085,-5 19.9801,-5 2.5681,0 6.5825,-0.675 8.9208,-1.5 2.3383,-0.825 6.1914,-1.500004 8.5624,-1.500004 4.1261,0 4.3243,0.13835 4.6242,3.227874 0.2884,2.97009 0.6728,3.29216 4.8134,4.03295 4.6839,0.83799 14.6759,0.46039 19.0045,-0.71819 2.1476,-0.58476 2.6695,-0.24455 3.6631,2.38773 0.9218,2.44207 1.7443,3.06964 4.023,3.06964 1.5754,0 3.7933,-0.65062 4.9286,-1.44582 2.4028,-1.68301 24.14,-3.3037 54.3808,-4.05455 10.725,-0.26629 26.7,-0.98944 35.5,-1.60699 14.6125,-1.02545 41.6756,-0.52016 43.8417,0.81857 1.1034,0.68194 12.2132,0.68194 13.3166,0 2.1661,-1.33873 29.2292,-1.84402 43.8417,-0.81857 8.8,0.61755 24.775,1.3407 35.5,1.60699 30.2408,0.75085 51.978,2.37154 54.3808,4.05455 1.1353,0.7952 3.3532,1.44582 4.9286,1.44582 2.2787,0 3.1012,-0.62757 4.023,-3.06964 0.9936,-2.63228 1.5155,-2.97249 3.6631,-2.38773 4.3286,1.17858 14.3206,1.55618 19.0045,0.71819 4.1406,-0.74079 4.525,-1.06286 4.8134,-4.03295 0.2999,-3.089524 0.4981,-3.227874 4.6242,-3.227874 2.371,0 6.2241,0.675004 8.5624,1.500004 2.3383,0.825 6.3527,1.5 8.9208,1.5 2.8951,0 10.4871,1.89988 19.9801,5 8.421,2.75 16.0507,4.99685 16.955,4.993 0.9042,-0.004 6.1441,1.07495 11.6441,2.39733 17.2397,4.14498 24.8731,5.63573 28.7898,5.62249 2.0844,-0.007 5.5333,0.87662 7.6642,1.9637 4.9849,2.54313 11.8772,4.07206 20.046,4.44688 8.1877,0.37568 32.9999,3.42366 35,4.29948 0.825,0.36125 5.55,0.95274 10.5,1.31443 12.2041,0.89173 19.6845,2.63343 28,6.51942 11.9183,5.56961 27.491,9.37568 39,9.53186 6.7835,0.0921 11.6083,0.71169 15,1.92639 2.75,0.98488 9.05,2.76851 14,3.96363 4.95,1.19512 9.9,2.56294 11,3.0396 2.8009,1.21373 21.5723,6.98179 22.7212,6.98179 0.5201,0 4.3956,1.39067 8.6122,3.09037 6.4008,2.58013 8.5211,2.9929 12.8421,2.50002 4.0286,-0.45953 8.793,0.27296 21.5,3.30543 8.9785,2.14268 18.1245,4.20096 20.3245,4.57396 2.2,0.37299 5.0535,1.35713 6.3411,2.18696 1.2876,0.82983 7.523,2.60633 13.8564,3.94777 6.3334,1.34145 12.3378,2.87921 13.3431,3.41724 1.0054,0.53804 2.9886,0.97825 4.4072,0.97825 1.4186,0 3.3607,0.43339 4.3158,0.9631 0.955,0.5297 5.7864,2.64194 10.7364,4.69386 4.95,2.05192 9.225,4.04137 9.5,4.42099 0.275,0.37963 2.075,1.56831 4,2.64153 1.925,1.07321 5.5766,3.10747 8.1147,4.52057 2.5381,1.4131 7.9381,3.76092 12,5.21736 4.0619,1.45645 11.0712,4.42435 15.5763,6.59534 4.505,2.17099 9.5819,3.94725 11.2821,3.94725 1.7001,0 4.7066,0.675 6.6811,1.5 1.9745,0.825 5.1162,1.5 6.9815,1.5 1.8653,0 4.1728,0.41246 5.1279,0.91659 0.955,0.50412 3.1405,1.43453 4.8567,2.06758 1.7161,0.63306 3.6038,2.21227 4.1948,3.50936 1.8475,4.0549 11.321,10.24822 22.2149,14.52308 5.7585,2.25969 12.72,5.16487 15.47,6.45596 2.75,1.29109 6.5948,2.61594 8.5441,2.94412 3.631,0.61131 12.0031,5.36452 17.5931,9.98832 2.2529,1.86349 4.2958,2.59499 7.2472,2.59499 3.2564,0 4.8891,0.6992 7.8627,3.36732 4.1391,3.71388 7.4523,5.11529 11.2624,4.76386 2.8428,-0.2622 8.9444,2.25056 18.1794,7.48666 3.4711,1.96805 8.7523,4.94148 11.736,6.60763 8.1823,4.56905 33.0762,22.74888 42.6844,31.17206 2.2601,1.98136 4.6806,3.60247 5.3788,3.60247 0.6982,0 2.9922,1.4625 5.0977,3.25 3.5705,3.03129 7.3446,6.08652 19.1315,15.48756 15.8981,12.68011 22.1761,18.25581 38.9433,34.58705 20.2896,19.76199 24.3174,23.30734 30.2643,26.63888 7.0035,3.92348 14.1326,8.70907 17.8948,12.01233 3.1923,2.80292 3.6803,3.81429 3.6803,7.62777 0,3.88804 0.2602,4.39818 2.25,4.41172 2.6325,0.0179 4.0702,0.85818 5.3355,3.11829 0.503,0.89847 3.1081,4.137 5.7892,7.19671 4.2533,4.85393 5.0592,5.37869 6.3214,4.11641 2.0146,-2.01458 3.6144,-1.80723 5.3331,0.69124 0.809,1.17587 2.561,3.25811 3.8934,4.62719 3.6043,3.70331 6.0774,9.17512 6.0774,13.44629 0,3.54284 0.1946,3.78856 3,3.78856 3,0 3,0 3,6 0,6 0,6 3,6 2.6516,0 3,0.34071 3,2.93358 0,2.45689 0.4469,2.98499 2.75,3.25 2.6033,0.29954 2.766,0.62311 3.0499,6.06642 0.2938,5.63283 0.36,5.75 3.25,5.75 2.5847,0 2.9501,0.35713 2.9501,2.88337 0,2.03654 0.5838,3.03605 1.988,3.40323 1.0933,0.28593 2.4709,1.80091 3.0613,3.36663 0.5903,1.56572 1.7207,4.15341 2.512,5.75041 0.7913,1.597 1.4387,3.4544 1.4387,4.12755 0,0.67316 0.675,1.78412 1.5,2.46881 0.825,0.68469 1.5,2.76479 1.5,4.62244 0,1.85766 0.4296,3.37756 0.9547,3.37756 0.5251,0 1.2501,1.575 1.6113,3.5 0.3611,1.925 1.0565,3.5 1.5453,3.5 0.4888,0 0.8887,0.675 0.8887,1.5 0,0.825 0.4641,1.5 1.0314,1.5 0.5672,0 1.3213,0.7875 1.6756,1.75 0.3544,0.9625 2.3653,4.49863 4.4687,7.85806 2.1033,3.35944 3.8243,6.44418 3.8243,6.85498 0,0.4108 1.35,2.74723 3,5.19207 1.65,2.44483 3,4.69533 3,5.0011 0,0.30577 1.0904,1.4137 2.4232,2.46206 1.3328,1.04835 2.7185,3.25062 3.0795,4.89392 0.3609,1.64329 1.0347,2.98781 1.4973,2.98781 0.4626,0 1.1365,1.34484 1.4975,2.98853 0.361,1.6437 1.0718,3.24525 1.5794,3.55902 1.5107,0.93363 1.0561,4.18596 -1.0732,7.67828 -2.69,4.41204 -2.5833,4.66149 1.7463,4.08151 l 3.75,-0.50234 5.8672,23.8475 c 3.227,13.11613 8.275,32.8475 11.2177,43.8475 2.9427,11 6.5027,25.4 7.9111,32 1.4084,6.6 5.0176,22.35 8.0204,35 3.9885,16.80217 6.5408,30.93399 9.4716,52.44284 2.2066,16.19356 4.012,30.31794 4.012,31.38752 0,1.06957 -7.0292,19.54529 -15.6203,41.05716 -8.5912,21.51186 -20.2593,52.95859 -25.929,69.88162 l -10.3085,30.76914 -15.6457,17.51298 -15.6456,17.5131 9.4206,13.2178 c 5.1814,7.26983 25.7437,37.70783 45.6941,67.64013 l 36.2735,54.4224 10.2211,24.5776 c 5.6215,13.5177 13.7379,35.1527 18.0362,48.0777 4.2984,12.925 12.2586,35.875 17.6893,51 9.0943,25.3282 11.1436,32.5543 25.9482,91.5 l 16.0742,64 2.0201,77.5 2.0202,77.5 -9.0979,73 c -5.0038,40.15 -11.3765,91.9 -14.1615,115 -2.785,23.1 -7.7469,63.4558 -11.0263,89.6795 l -5.9627,47.6795 0,31.3997 0,31.3997 -13.5,52.0473 c -7.425,28.6261 -13.5014,53.1155 -13.5031,54.4208 0,1.3054 1.6434,9.7985 3.6557,18.8735 l 3.6588,16.5 9.8785,17.7278 9.8784,17.7279 4.0989,20.2721 4.099,20.2722 -2.099,73.5 -2.0989,73.5 -3.8908,15.1282 -3.8908,15.1281 -15.6437,21.4997 c -8.604,11.8248 -16.206,21.9314 -16.8933,22.4591 -1.6895,1.297 -57.372,16.9932 -82.5181,23.2607 -20.1542,5.0233 -54.3392,11.0242 -62.8012,11.0242 -4.256,0 -4.4304,-0.1181 -4.4304,-3 l 0,-3 -56.5069,0 c -47.0759,0 -60.72,-0.3296 -81.75,-1.9746 -16.4076,-1.2835 -53.4194,-2.6938 -105.7431,-4.0293 -44.275,-1.1301 -101.2,-2.9091 -126.5,-3.9534 l -46,-1.8986 -34.5,-6.0581 c -29.0438,-5.1 -41.1918,-6.6929 -76.8132,-10.072 -55.0335,-5.2207 -60.8982,-5.2143 -107.1868,0.1168 l -36.5,4.2037 -38,-4.0001 -38,-4.0001 -37.5,3.7985 c -36.9664,3.7443 -38.1098,3.7989 -80.35,3.8328 l -42.85,0.034 -21.0574,-11.5 c -11.5815,-6.325 -21.774,-11.4891 -22.65,-11.4759 -0.8759,0.013 -10.3676,2.7677 -21.0926,6.1209 -10.725,3.3532 -20.625,6.0967 -22,6.0967 -1.375,0 -11.275,-2.7435 -22,-6.0967 -10.725,-3.3532 -20.2167,-6.1076 -21.0926,-6.1209 -0.876,-0.013 -11.0685,5.1509 -22.65,11.4759 l -21.0574,11.5 -42.85,-0.034 c -42.2402,-0.034 -43.3836,-0.088 -80.35,-3.8328 l -37.5,-3.7985 -38,4.0001 -38,4.0001 -36.5,-4.2037 c -46.2886,-5.3311 -52.1533,-5.3375 -107.1868,-0.1168 -35.6214,3.3791 -47.7694,4.972 -76.8132,10.072 l -34.5,6.0581 -46,1.8986 c -25.3,1.0443 -82.225,2.8233 -126.5,3.9534 -52.3237,1.3355 -89.3355,2.7458 -105.7431,4.0293 -21.03,1.645 -34.6741,1.9746 -81.75,1.9746 l -56.5069,0 0,3 c 0,2.9988 0,3 -5.75,2.8851 -3.1625,-0.063 -13.6693,-1.3919 -23.3484,-2.9528 z m 27.0984,-1.9323 0,-3 54.25,-0.01 c 45.3099,-0.01 58.2051,-0.3354 78.25,-1.9919 15.8644,-1.311 49.7629,-2.6562 100,-3.9683 41.8,-1.0918 100.075,-2.9185 129.5,-4.0595 l 53.5,-2.0746 34.4157,-6.0181 c 28.0876,-4.9116 41.8783,-6.7382 75,-9.9339 55.479,-5.3529 71.0717,-5.3565 115.5843,-0.026 l 32,3.8317 38,-3.9915 38,-3.9915 41.5,4.1308 c 40.6923,4.0504 42.2433,4.1305 79.6943,4.1163 l 38.1943,-0.015 21.9474,-12 c 12.0711,-6.6 22.5587,-11.9947 23.3057,-11.9883 0.7471,0.01 10.3583,2.7771 21.3583,6.1571 11,3.38 21.125,6.1454 22.5,6.1454 1.375,0 11.5,-2.7654 22.5,-6.1454 11,-3.38 20.6112,-6.1507 21.3583,-6.1571 0.747,-0.01 11.2346,5.3883 23.3057,11.9883 l 21.9474,12 38.1943,0.015 c 37.451,0.014 39.002,-0.066 79.6943,-4.1163 l 41.5,-4.1308 38,3.9915 38,3.9915 32,-3.8317 c 44.5126,-5.33 60.1053,-5.3264 115.5843,0.026 33.1217,3.1957 46.9124,5.0223 75,9.9339 l 34.4157,6.0181 53.5,2.0746 c 29.425,1.141 87.7,2.9677 129.5,4.0595 50.2371,1.3121 84.1356,2.6573 100,3.9683 20.0449,1.6565 32.9401,1.9847 78.25,1.9919 l 54.25,0.01 0,3 c 0,1.65 0.4609,3 1.0242,3 0.5632,0 10.1257,-1.3886 21.25,-3.0857 25.5829,-3.9029 67.9538,-14.5076 121.9542,-30.5228 0.9507,-0.2819 8.9403,-10.4032 17.7548,-22.4917 l 16.0263,-21.979 3.9703,-16.2104 3.9703,-16.2104 1.928,-71 1.9279,-71 -3.9913,-19.8938 -3.9914,-19.8938 -9.9524,-17.8458 -9.9523,-17.8459 -4.1236,-18.4859 -4.1235,-18.486 14.183,-54.7744 14.183,-54.7744 -0.019,-32.3267 -0.019,-32.3267 5.4728,-43.6733 c 3.01,-24.0203 9.0975,-73.5983 13.5278,-110.1733 4.4304,-36.575 10.9263,-89.45 14.4354,-117.5 l 6.3802,-51 -1.9956,-75.5 -1.9956,-75.5 -15.8538,-63.5 c -14.3257,-57.3797 -16.7358,-65.9578 -25.0056,-89 -5.0335,-14.025 -13.322,-37.875 -18.4189,-53 -5.0969,-15.125 -13.6444,-38.0247 -18.9943,-50.8882 l -9.7272,-23.3882 -35.0611,-52.6118 c -19.2836,-28.9365 -39.9442,-59.4399 -45.9126,-67.7853 -5.9683,-8.34553 -10.8515,-15.70353 -10.8515,-16.35123 0,-0.6478 7.126,-9.1197 15.8356,-18.8265 l 15.8355,-17.64876 8.7642,-26.5 c 4.8202,-14.575 16.4453,-45.84975 25.8335,-69.49944 l 17.0694,-42.99944 -3.7934,-30.50056 c -4.1556,-33.41227 -3.4104,-29.98336 -30.2654,-139.26949 -9.7743,-39.77653 -11.9927,-47.65845 -13.2589,-47.10858 -0.8363,0.3632 -2.758,0.8728 -4.2705,1.13244 -2.4233,0.41599 -2.75,0.15924 -2.75,-2.1613 0,-1.44836 1.117,-4.40282 2.4822,-6.56547 1.3652,-2.16265 2.0749,-4.18387 1.577,-4.4916 -0.4979,-0.30772 -1.2007,-1.90433 -1.5617,-3.54803 -0.3605,-1.64369 -1.0344,-2.98853 -1.497,-2.98853 -0.4626,0 -1.1364,-1.34452 -1.4973,-2.98781 -0.361,-1.6433 -1.7467,-3.84557 -3.0795,-4.89392 -1.3328,-1.04836 -2.4232,-2.15629 -2.4232,-2.46206 0,-0.30577 -1.35,-2.55627 -3,-5.0011 -1.65,-2.44484 -3,-4.78127 -3,-5.19207 0,-0.4108 -1.8,-3.59701 -4,-7.08047 -2.2,-3.48345 -4,-6.8087 -4,-7.38944 0,-0.58075 -0.675,-1.31492 -1.5,-1.6315 -0.825,-0.31659 -1.5,-1.20246 -1.5,-1.96862 0,-0.76615 -0.3999,-1.39301 -0.8887,-1.39301 -0.4888,0 -1.1842,-1.575 -1.5453,-3.5 -0.3612,-1.925 -1.0862,-3.5 -1.6113,-3.5 -0.5251,0 -0.9547,-1.5199 -0.9547,-3.37756 0,-1.85765 -0.675,-3.93775 -1.5,-4.62244 -0.825,-0.68469 -1.5,-1.79565 -1.5,-2.46881 0,-0.67315 -0.6474,-2.53055 -1.4387,-4.12755 -0.7913,-1.597 -1.9217,-4.18469 -2.512,-5.75041 -0.5904,-1.56572 -1.968,-3.0807 -3.0613,-3.36663 -1.4042,-0.36718 -1.988,-1.36669 -1.988,-3.40323 0,-2.52624 -0.3654,-2.88337 -2.9501,-2.88337 -2.89,0 -2.9562,-0.11717 -3.25,-5.75 -0.2839,-5.44331 -0.4466,-5.76688 -3.0499,-6.06642 -2.3031,-0.26501 -2.75,-0.79311 -2.75,-3.25 0,-2.59287 -0.3484,-2.93358 -3,-2.93358 -3,0 -3,0 -3,-6 0,-6 0,-6 -3,-6 -2.8054,0 -3,-0.24572 -3,-3.78856 0,-4.23802 -2.4325,-9.65596 -6.0774,-13.5361 -1.3324,-1.41847 -3.0727,-3.35047 -3.8672,-4.29333 -0.9506,-1.12803 -1.5776,-1.31549 -1.8334,-0.54815 -0.2137,0.64138 -1.347,1.16614 -2.5183,1.16614 -2.32,0 -12.1562,-9.69969 -13.2131,-13.0297 -0.4826,-1.52038 -1.5234,-1.9703 -4.558,-1.9703 l -3.9326,0 0,-4.90106 c 0,-4.73258 -0.1977,-5.06924 -5.75,-9.79363 -5.889,-5.01082 -8.2742,-6.6723 -14.9362,-10.40421 -5.8273,-3.26429 -9.9433,-6.89211 -30.1532,-26.57649 -16.7672,-16.33124 -23.0452,-21.90694 -38.9433,-34.58705 -11.7869,-9.40104 -15.561,-12.45627 -19.1315,-15.48756 -2.1055,-1.7875 -4.3995,-3.25 -5.0977,-3.25 -0.6982,0 -3.1187,-1.62111 -5.3788,-3.60247 -9.6082,-8.42318 -34.5021,-26.60301 -42.6844,-31.17206 -2.9837,-1.66615 -8.2649,-4.63958 -11.736,-6.60763 -9.3879,-5.3228 -14.8374,-7.52251 -17.1427,-6.91967 -2.8404,0.74277 -7.8382,-1.43122 -12.2396,-5.32411 -3.0663,-2.71197 -4.2617,-3.17447 -7.0397,-2.72366 -2.7527,0.4467 -4.0837,-0.0505 -7.5048,-2.80369 -6.882,-5.5385 -13.3225,-9.15793 -18.6858,-10.50107 -2.792,-0.6992 -6.8763,-2.17093 -9.0763,-3.27051 -2.2,-1.09958 -8.7115,-3.83699 -14.47,-6.08314 -10.884,-4.24539 -20.3616,-10.43089 -22.2149,-14.49846 -0.591,-1.29709 -2.4787,-2.8763 -4.1948,-3.50936 -1.7162,-0.63305 -3.9017,-1.56346 -4.8567,-2.06758 -0.9551,-0.50413 -3.3472,-0.91659 -5.3158,-0.91659 -1.9686,0 -4.4932,-0.4891 -5.6102,-1.08689 -1.1169,-0.59779 -3.9177,-1.21409 -6.2238,-1.36957 -2.3566,-0.15888 -7.8982,-2.06851 -12.6534,-4.36036 -4.6532,-2.24272 -11.7838,-5.26932 -15.8457,-6.72577 -4.0619,-1.45644 -9.4619,-3.80426 -12,-5.21736 -2.5381,-1.4131 -6.1897,-3.44736 -8.1147,-4.52057 -1.925,-1.07322 -3.725,-2.2619 -4,-2.64153 -0.275,-0.37962 -4.55,-2.36907 -9.5,-4.42099 -4.95,-2.05192 -9.7814,-4.16416 -10.7364,-4.69386 -0.9551,-0.52971 -2.8972,-0.9631 -4.3158,-0.9631 -1.4186,0 -3.4018,-0.44021 -4.4072,-0.97825 -1.0053,-0.53803 -7.0097,-2.07579 -13.3431,-3.41724 -6.3334,-1.34144 -12.5688,-3.10521 -13.8564,-3.91948 -1.2876,-0.81426 -5.998,-2.20394 -10.4676,-3.08816 -4.4695,-0.88423 -13.4247,-2.91839 -19.9004,-4.52035 -8.3946,-2.0767 -12.4477,-2.65649 -14.1215,-2.0201 -2.7529,1.04666 -10.9925,-0.30224 -15.2294,-2.49321 -1.5834,-0.81884 -5.9712,-2.36539 -9.7506,-3.43679 -10.565,-2.99501 -20.6582,-6.12729 -22.8716,-7.09787 -1.1,-0.48235 -6.05,-1.84859 -11,-3.03609 -4.95,-1.1875 -10.7345,-2.81176 -12.8544,-3.60946 -2.1255,-0.7998 -8.7827,-1.64517 -14.8414,-1.88466 -12.5666,-0.49673 -28.5074,-4.42876 -40.3042,-9.94161 -8.1635,-3.81494 -15.5091,-5.55813 -28,-6.64472 -4.95,-0.4306 -12.15,-1.26924 -16,-1.86365 -3.85,-0.59441 -10.6,-1.48814 -15,-1.98607 -4.4,-0.49793 -9.27,-1.22431 -10.8221,-1.61418 -1.6512,-0.41472 -3.7397,-0.21779 -5.0335,0.47459 -1.7698,0.94717 -2.8035,0.87461 -5.1778,-0.36347 -1.6316,-0.8508 -3.8666,-1.55408 -4.9666,-1.56284 -1.1,-0.009 -4.4072,-1.13653 -7.3493,-2.50616 -2.9421,-1.36963 -6.9921,-2.48446 -9,-2.47741 -3.7856,0.0133 -11.5382,-1.50809 -28.6507,-5.62249 -5.5,-1.32238 -10.7399,-2.40117 -11.6441,-2.39733 -0.9043,0.004 -8.534,-2.243 -16.955,-4.993 -9.493,-3.10012 -17.085,-5 -19.9801,-5 -2.5681,0 -6.5825,-0.675 -8.9208,-1.5 -6.8642,-2.42183 -8.8195,-2.05407 -9.1866,1.72787 -0.2882,2.96864 -0.6748,3.29317 -4.8134,4.04103 -2.475,0.44724 -8.4168,0.6822 -13.2041,0.52213 -8.1944,-0.27399 -8.7641,-0.15928 -9.7285,1.95897 -0.8553,1.87844 -1.817,2.25 -5.8235,2.25 -2.6394,0 -5.7278,-0.65062 -6.8631,-1.44582 -2.2353,-1.56566 -25.1013,-3.3475 -46.8808,-3.65319 -6.6,-0.0926 -22.35,-0.81554 -35,-1.60645 -21.984,-1.37449 -47.5,-1.02045 -47.5,0.65907 0,0.39218 -4.05,0.71306 -9,0.71306 -4.95,0 -9,-0.32088 -9,-0.71306 0,-1.67952 -25.516,-2.03356 -47.5,-0.65907 -12.65,0.79091 -28.4,1.51381 -35,1.60645 -21.7795,0.30569 -44.6455,2.08753 -46.8808,3.65319 -1.1353,0.7952 -4.2237,1.44582 -6.8631,1.44582 -4.0065,0 -4.9682,-0.37156 -5.8235,-2.25 -0.9644,-2.11825 -1.5341,-2.23296 -9.7285,-1.95897 -4.7873,0.16007 -10.7291,-0.0749 -13.2041,-0.52213 -4.1386,-0.74786 -4.5252,-1.07239 -4.8134,-4.04103 -0.3671,-3.78194 -2.3224,-4.1497 -9.1866,-1.72787 -2.3383,0.825 -6.3527,1.5 -8.9208,1.5 -2.8951,0 -10.4871,1.89988 -19.9801,5 -8.421,2.75 -16.0507,4.99685 -16.955,4.993 -0.9042,-0.004 -6.1441,1.07495 -11.6441,2.39733 -17.1125,4.1144 -24.8651,5.63578 -28.6507,5.62249 -2.0079,-0.007 -6.0579,1.10778 -9,2.47741 -2.9421,1.36963 -6.2493,2.4974 -7.3493,2.50616 -1.1,0.009 -3.335,0.71204 -4.9666,1.56284 -2.3743,1.23808 -3.408,1.31064 -5.1778,0.36347 -1.2938,-0.69238 -3.3823,-0.88931 -5.0335,-0.47459 -1.5521,0.38987 -6.4221,1.11625 -10.8221,1.61418 -4.4,0.49793 -11.15,1.39166 -15,1.98607 -3.85,0.59441 -11.05,1.43305 -16,1.86365 -12.4909,1.08659 -19.8365,2.82978 -28,6.64472 -11.7968,5.51285 -27.7376,9.44488 -40.3042,9.94161 -6.0587,0.23949 -12.7159,1.08486 -14.8414,1.88466 -2.1199,0.7977 -7.9044,2.42196 -12.8544,3.60946 -4.95,1.1875 -9.9,2.55374 -11,3.03609 -2.2134,0.97058 -12.3066,4.10286 -22.8716,7.09787 -3.7794,1.0714 -8.1672,2.61795 -9.7506,3.43679 -4.2369,2.19097 -12.4765,3.53987 -15.2294,2.49321 -1.6738,-0.63639 -5.7269,-0.0566 -14.1215,2.0201 -6.4757,1.60196 -15.4309,3.63612 -19.9004,4.52035 -4.4696,0.88422 -9.18,2.2739 -10.4676,3.08816 -1.2876,0.81427 -7.523,2.57804 -13.8564,3.91948 -6.3334,1.34145 -12.3378,2.87921 -13.3431,3.41724 -1.0054,0.53804 -2.9886,0.97825 -4.4072,0.97825 -1.4186,0 -3.3607,0.43339 -4.3158,0.9631 -0.955,0.5297 -5.7864,2.64194 -10.7364,4.69386 -4.95,2.05192 -9.225,4.04137 -9.5,4.42099 -0.275,0.37963 -2.075,1.56831 -4,2.64153 -1.925,1.07321 -5.5766,3.10747 -8.1147,4.52057 -2.5381,1.4131 -7.9381,3.76092 -12,5.21736 -4.0619,1.45645 -11.1925,4.48305 -15.8457,6.72577 -4.7552,2.29185 -10.2968,4.20148 -12.6534,4.36036 -2.3061,0.15548 -5.1069,0.77178 -6.2238,1.36957 -1.117,0.59779 -3.6416,1.08689 -5.6102,1.08689 -1.9686,0 -4.3607,0.41246 -5.3158,0.91659 -0.955,0.50412 -3.1405,1.43453 -4.8567,2.06758 -1.7161,0.63306 -3.6038,2.21227 -4.1948,3.50936 -1.8533,4.06757 -11.3309,10.25307 -22.2149,14.49846 -5.7585,2.24615 -12.27,4.98356 -14.47,6.08314 -2.2,1.09958 -6.2843,2.57131 -9.0763,3.27051 -5.3633,1.34314 -11.8038,4.96257 -18.6858,10.50107 -3.4211,2.75314 -4.7521,3.25039 -7.5048,2.80369 -2.778,-0.45081 -3.9734,0.0117 -7.0397,2.72366 -4.4014,3.89289 -9.3992,6.06688 -12.2396,5.32411 -2.3053,-0.60284 -7.7548,1.59687 -17.1427,6.91967 -3.4711,1.96805 -8.7523,4.94148 -11.736,6.60763 -8.1823,4.56905 -33.0762,22.74888 -42.6844,31.17206 -2.2601,1.98136 -4.6806,3.60247 -5.3788,3.60247 -0.6982,0 -2.9922,1.4625 -5.0977,3.25 -3.5705,3.03129 -7.3446,6.08652 -19.1315,15.48756 -15.8981,12.68011 -22.1761,18.25581 -38.9433,34.58705 -20.2099,19.68438 -24.3259,23.3122 -30.1532,26.57649 -6.662,3.73191 -9.0472,5.39339 -14.9362,10.40421 -5.5523,4.72439 -5.75,5.06105 -5.75,9.79363 l 0,4.90106 -3.9326,0 c -3.0346,0 -4.0754,0.44992 -4.558,1.9703 -1.0569,3.33001 -10.8931,13.0297 -13.2131,13.0297 -1.1713,0 -2.3046,-0.52476 -2.5183,-1.16614 -0.2558,-0.76734 -0.8828,-0.57988 -1.8334,0.54815 -0.7945,0.94286 -2.5348,2.87486 -3.8672,4.29333 -3.6449,3.88014 -6.0774,9.29808 -6.0774,13.5361 0,3.54284 -0.1946,3.78856 -3,3.78856 -3,0 -3,0 -3,6 0,6 0,6 -3,6 -2.6516,0 -3,0.34071 -3,2.93358 0,2.45689 -0.4469,2.98499 -2.75,3.25 -2.6033,0.29954 -2.766,0.62311 -3.0499,6.06642 -0.2938,5.63283 -0.36,5.75 -3.25,5.75 -2.5847,0 -2.9501,0.35713 -2.9501,2.88337 0,2.03654 -0.5838,3.03605 -1.988,3.40323 -1.0933,0.28593 -2.4709,1.80091 -3.0613,3.36663 -0.5903,1.56572 -1.7207,4.15341 -2.512,5.75041 -0.7913,1.597 -1.4387,3.4544 -1.4387,4.12755 0,0.67316 -0.675,1.78412 -1.5,2.46881 -0.825,0.68469 -1.5,2.76479 -1.5,4.62244 0,1.85766 -0.4296,3.37756 -0.9547,3.37756 -0.5251,0 -1.2501,1.575 -1.6113,3.5 -0.3611,1.925 -1.0565,3.5 -1.5453,3.5 -0.4888,0 -0.8887,0.675 -0.8887,1.5 0,0.825 -0.4641,1.5 -1.0314,1.5 -0.5672,0 -1.3213,0.7875 -1.6756,1.75 -0.35439,0.9625 -2.36527,4.49863 -4.46866,7.85806 -2.10339,3.35944 -3.82434,6.44418 -3.82434,6.85498 0,0.4108 -1.35,2.74723 -3,5.19207 -1.65,2.44483 -3,4.69533 -3,5.0011 0,0.30577 -1.09045,1.4137 -2.42322,2.46206 -1.33277,1.04835 -2.71853,3.25062 -3.07946,4.89392 -0.36093,1.64329 -1.03472,2.98781 -1.49732,2.98781 -0.4626,0 -1.13647,1.34484 -1.49748,2.98853 -0.36102,1.6437 -1.06377,3.24031 -1.56168,3.54803 -0.49791,0.30773 0.21171,2.32895 1.57694,4.4916 1.36522,2.16265 2.48222,5.11711 2.48222,6.56547 0,2.32054 -0.32668,2.57729 -2.75,2.1613 -1.5125,-0.25964 -3.43424,-0.76924 -4.27053,-1.13244 -1.26613,-0.54987 -3.48452,7.33205 -13.25885,47.10858 -26.855,109.28613 -26.10985,105.85722 -30.26539,139.26949 l -3.7934,30.50056 17.06938,42.99944 c 9.38816,23.64969 21.01325,54.92444 25.83353,69.49944 l 8.76415,26.5 15.83555,17.64876 c 8.70956,9.7068 15.83556,18.1787 15.83556,18.8265 0,0.6477 -4.8832,8.0057 -10.85153,16.35123 -5.96834,8.3454 -26.62901,38.8488 -45.9126,67.7853 l -35.06107,52.6118 -9.72719,23.3882 c -5.34996,12.8635 -13.8974,35.7632 -18.99431,50.8882 -5.09692,15.125 -13.38544,38.975 -18.41894,53 -8.26975,23.0422 -10.67986,31.6203 -25.0056,89 l -15.85377,63.5 -1.99561,75.5 -1.99561,75.5 6.38024,51 c 3.50913,28.05 10.00504,80.925 14.43535,117.5 4.43032,36.575 10.51786,86.153 13.52788,110.1733 l 5.47276,43.6733 -0.0187,32.3267 -0.0187,32.3267 14.18296,54.7744 14.18296,54.7744 -4.12351,18.486 -4.1235,18.4859 -9.95238,17.8459 -9.95237,17.8458 -3.99137,19.8938 -3.99136,19.8938 1.92795,71 1.92795,71 3.97029,16.2104 3.9703,16.2104 16.02633,21.979 c 8.81448,12.0885 16.80413,22.2098 17.75477,22.4917 53.13124,15.7575 93.8592,26.0463 119.22848,30.12 26.2995,4.2231 24.9999,4.1977 24.9999,0.4885 z" 
            Fill="Red"   
            Stretch="Uniform"
            Stroke="Blue"/> 
```

顺便说一句...我知道数据中有很多点，但是就像我说的那样，我使用inkscape追踪了真实的图像，如果有人知道一种简单的方法来摆脱一些点（也许使用Blend），那也会不胜感激（我不反对让路径更圆润）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:28:50.100

它看起来不是一个封闭的实体形状。添加投影效果时，可以在线条内看到阴影。我还注意到，如果您删除 stroke 属性，轮廓将是红色的，正如您在填充中指定的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:57:29.813

好的，所以问题在于 InkScape 实际上制作了一条代表边界的路径……换句话说，有两条“线”共同构成了我试图获得的形状的轮廓。填充实际上出现了，但是代表边界的这两条线非常靠近（并与笔划结合在一起）我看不到填充我手动删除了内部“线”点，并且当我这样做时填充开始按预期填写反对意见。乍一看，它似乎是一条线，但当我大幅放大时，我发现有两条线。

还有很多点，但这是最终的结果：

```
<Path x:Name="path" 
            Data="M1019.9016,2413.6161 C1010.2225,2412.0553 993.12249,2408.4899 981.9016,2405.693 956.6459,2399.3979 900.94379,2383.699 899.25033,2382.3989 898.56301,2381.8712 890.96101,2371.7646 882.357,2359.9398 L866.71334,2338.4401 862.82252,2323.312 858.9317,2308.1838 856.83276,2234.6838 854.73383,2161.1838 858.83276,2140.9116 862.9317,2120.6395 872.81013,2102.9116 882.68856,2085.1838 886.34738,2068.6838 C888.35973,2059.6088 890.0048,2051.1157 890.0031,2049.8103 890.0011,2048.505 883.925,2024.0156 876.5,1995.3895 L863,1943.3422 863,1911.9425 863,1880.5428 857.03735,1832.8633 C853.75789,1806.6396 848.79604,1766.2838 846.01102,1743.1838 843.226,1720.0838 836.8533,1668.3338 831.84946,1628.1838 L822.75158,1555.1838 824.77176,1477.6838 826.79195,1400.1838 842.86606,1336.1838 C857.67075,1277.2381 859.71995,1270.012 868.81427,1244.6838 874.24502,1229.5588 882.20521,1206.6088 886.50357,1193.6838 890.80193,1180.7588 898.91826,1159.1238 904.53985,1145.6061 L914.76092,1121.0285 951.03438,1066.6061 C970.98478,1036.6738 991.54712,1006.2358 996.72846,998.96597 L1006.1491,985.74817 990.50345,968.23507 974.85783,950.72209 964.54926,919.95295 C958.87955,903.02992 947.21154,871.58319 938.62035,850.07133 930.02916,828.55946 923,810.08374 923,809.01417 923,807.94459 924.80538,793.82021 927.01195,777.62665 929.9428,756.1178 932.49513,741.98598 936.48359,725.18381 939.48642,712.53381 943.09559,696.78381 944.50398,690.18381 945.91236,683.58381 949.47236,669.18381 952.41509,658.18381 955.35781,647.18381 960.40576,627.45244 963.63275,614.33631 L969.5,590.48881 973.25,590.99115 C977.57955,591.57113 977.68628,591.32168 974.99626,586.90964 972.86699,583.41732 972.41241,580.16499 973.92306,579.23136 974.43075,578.91759 975.1415,577.31604 975.50252,575.67234 975.86353,574.02865 976.5374,572.68381 977,572.68381 977.4626,572.68381 978.13639,571.33929 978.49732,569.696 978.85825,568.0527 980.24401,565.85043 981.57678,564.80208 982.90955,563.75372 984,562.64579 984,562.34002 984,562.03425 985.35,559.78375&#xd;&#xa;987,557.33892 988.65,554.89408 990,552.55765 990,552.14685 990,551.73605 991.72095,548.65131 993.82434,545.29187 995.92773,541.93244 997.93861,538.39631 998.29296,537.43381 998.64731,536.47131 999.40135,535.68381 999.96862,535.68381 1000.5359,535.68381 1001,535.00881 1001,534.18381 1001,533.35881 1001.3999,532.68381 1001.8887,532.68381 1002.3775,532.68381 1003.0729,531.10881 1003.434,529.18381 1003.7952,527.25881&#xd;&#xa;1004.5202,525.68381 1005.0453,525.68381 1005.5704,525.68381 1006,524.16391 1006,522.30625 1006,520.4486 1006.675,518.3685 1007.5,517.68381 1008.325,516.99912 1009,515.88816 1009,515.215 1009,514.54185 1009.6474,512.68445 1010.4387,511.08745 1011.23,509.49045 1012.3604,506.90276 1012.9507,505.33704 1013.5411,503.77132 1014.9187,502.25634 1016.012,501.97041 1017.4162,501.60323 1018,500.60372 1018,498.56718&#xd;&#xa;1018,496.04094 1018.3654,495.68381 1020.9501,495.68381 1023.8401,495.68381 1023.9063,495.56664 1024.2001,489.93381 1024.484,484.4905 1030,483.07428 1030,480.61739 1030,478.02452 1030.3484,477.68381 1033,477.68381 1036,477.68381 1036,465.68381 1039,465.68381 1041.8054,465.68381 1042,465.43809 1042,461.89525 1042,457.62408 1044.4731,452.15227 1048.0774,448.44896 1049.4098,447.07988 1051.1618,444.99764&#xd;&#xa;1051.9708,443.82177 1053.6895,441.3233 1055.2893,441.11595 1057.3039,443.13053 1058.5661,444.39281 1059.372,443.86805 1063.6253,439.01412 1066.3064,435.95441 1068.9115,432.71588 1069.4145,431.81741 1070.6798,429.5573 1072.1175,428.71704 1074.75,428.69912 1076.7398,428.68562 1077,428.17544 1077,424.2874 1077,420.47392 1077.488,419.46255 1080.6803,416.65963 1084.4425,413.35637 1091.5716,408.57078 1098.5751,404.6473 1104.522,401.31576&#xd;&#xa;1108.5498,397.77041 1128.8394,378.00842 1145.6066,361.67718 1151.8846,356.10148 1167.7827,343.42137 1179.5696,334.02033 1183.3437,330.9651 1186.9142,327.93381 1189.0197,326.14631 1191.3137,324.68381 1192.0119,324.68381 1192.7101,324.68381 1195.1306,323.0627 1197.3907,321.08134 1206.9989,312.65816 1231.8928,294.47833 1240.0751,289.90928 1243.0588,288.24313 1248.34,285.2697 1251.8111,283.30165 1261.0461,278.06555 1267.1477,275.55279 1269.9905,275.81499&#xd;&#xa;1273.8006,276.16642 1277.1138,274.76501 1281.2529,271.05113 1284.2265,268.38301 1285.8592,267.68381 1289.1156,267.68381 1292.067,267.68381 1294.1099,266.95231 1296.3628,265.08882 1301.9528,260.46502 1310.3249,255.71181 1313.9559,255.1005 1315.9052,254.77232 1332.2115,247.96011 1337.97,245.70042 1348.8639,241.42556 1358.3374,235.23224 1360.1849,231.17734 1360.7759,229.88025 1362.6636,228.30104 1364.3797,227.66798 1366.0959,227.03493 1368.2814,226.10452&#xd;&#xa;1369.2364,225.6004 1370.1915,225.09627 1372.499,224.68381 1374.3643,224.68381 1376.2296,224.68381 1379.3713,224.00881 1381.3458,223.18381 1383.3203,222.35881 1386.3268,221.68381 1388.0269,221.68381 1389.7271,221.68381 1394.804,219.90755 1399.309,217.73656 1403.8141,215.56557 1410.8234,212.59767 1414.8853,211.14122 1418.9472,209.68478 1424.3472,207.33696 1426.8853,205.92386 1429.4234,204.51076 1433.075,202.4765 1435,201.40329 1436.925,200.33007&#xd;&#xa;1438.725,199.14139 1439,198.76176 1439.275,198.38214 1443.55,196.39269 1448.5,194.34077 1453.45,192.28885 1458.2814,190.17661 1459.2364,189.64691 1460.1915,189.1172 1462.1336,188.68381 1463.5522,188.68381 1464.9708,188.68381 1466.954,188.2436 1467.9594,187.70556 1468.9647,187.16753 1474.9691,185.62977 1481.3025,184.28832 1487.6359,182.94688 1493.8713,181.17038 1495.1589,180.34055 1496.4465,179.51072 1499.3,178.52658 1501.5,178.15359&#xd;&#xa;1503.7,177.78059 1512.846,175.72231 1521.8245,173.57963 1534.5315,170.54716 1539.2959,169.81467 1543.3245,170.2742 1547.6455,170.76708 1549.7658,170.3543 1556.1666,167.77418 1560.3832,166.07448 1564.2587,164.68381 1564.7788,164.68381 1565.9277,164.68381 1584.6991,158.91575 1587.5,157.70202 1588.6,157.22536 1593.55,155.85754 1598.5,154.66242 1603.45,153.4673 1609.75,151.68367 1612.5,150.69879 1615.8917,149.48409 1620.7165,148.86446&#xd;&#xa;1627.5,148.7724 1639.009,148.61622 1654.5817,144.81015 1666.5,139.24054 1674.8155,135.35455 1682.2959,133.61285 1694.5,132.72112 1699.45,132.35943 1704.175,131.76794 1705,131.40669 1707.0001,130.53087 1731.8123,127.48289 1740,127.10721 1748.1688,126.73239 1755.0611,125.20346 1760.046,122.66033 1762.1769,121.57325 1765.6258,120.68958 1767.7102,120.69663 1771.6269,120.70983 1779.2603,119.21912 1796.5,115.07414 1802,113.75176&#xd;&#xa;1807.2399,112.67297 1808.1441,112.67681 1809.0484,112.68081 1816.6781,110.43381 1825.0991,107.68381 1834.5921,104.58369 1842.1841,102.68381 1845.0792,102.68381 1847.6473,102.68381 1851.6617,102.00881 1854,101.18381 1856.3383,100.35881 1860.1914,99.683806 1862.5624,99.683806 1866.6885,99.683806 1866.8867,99.822156 1867.1866,102.91168 1867.475,105.88177 1867.8594,106.20384 1872,106.94463 1876.6839,107.78262 1886.6759,107.40502 1891.0045,106.22644&#xd;&#xa;1893.1521,105.64168 1893.674,105.98189 1894.6676,108.61417 1895.5894,111.05624 1896.4119,111.68381 1898.6906,111.68381 1900.266,111.68381 1902.4839,111.03319 1903.6192,110.23799 1906.022,108.55498 1927.7592,106.93429 1958,106.18344 1968.725,105.91715 1984.7,105.194 1993.5,104.57645 2008.1125,103.551 2035.1756,104.05629 2037.3417,105.39502 2038.4451,106.07696 2049.5549,106.07696 2050.6583,105.39502 2052.8244,104.05629 2079.8875,103.551&#xd;&#xa;2094.5,104.57645 2103.3,105.194 2119.275,105.91715 2130,106.18344 2160.2408,106.93429 2181.978,108.55498 2184.3808,110.23799 2185.5161,111.03319 2187.734,111.68381 2189.3094,111.68381 2191.5881,111.68381 2192.4106,111.05624 2193.3324,108.61417 2194.326,105.98189 2194.8479,105.64168 2196.9955,106.22644 2201.3241,107.40502 2211.3161,107.78262 2216,106.94463 2220.1406,106.20384 2220.525,105.88177 2220.8134,102.91168 2221.1133,99.822156&#xd;&#xa;2221.3115,99.683806 2225.4376,99.683806 2227.8086,99.683806 2231.6617,100.35881 2234,101.18381 2236.3383,102.00881 2240.3527,102.68381 2242.9208,102.68381 2245.8159,102.68381 2253.4079,104.58369 2262.9009,107.68381 2271.3219,110.43381 2278.9516,112.68066 2279.8559,112.67681 2280.7601,112.67281 2286,113.75176 2291.5,115.07414 2308.7397,119.21912 2316.3731,120.70987 2320.2898,120.69663 2322.3742,120.68963 2325.8231,121.57325 2327.954,122.66033&#xd;&#xa;2332.9389,125.20346 2339.8312,126.73239 2348,127.10721 2356.1877,127.48289 2380.9999,130.53087 2383,131.40669 2383.825,131.76794 2388.55,132.35943 2393.5,132.72112 2405.7041,133.61285 2413.1845,135.35455 2421.5,139.24054 2433.4183,144.81015 2448.991,148.61622 2460.5,148.7724 2467.2835,148.8645 2472.1083,149.48409 2475.5,150.69879 2478.25,151.68367 2484.55,153.4673 2489.5,154.66242 2494.45,155.85754 2499.4,157.22536&#xd;&#xa;2500.5,157.70202 2503.3009,158.91575 2522.0723,164.68381 2523.2212,164.68381 2523.7413,164.68381 2527.6168,166.07448 2531.8334,167.77418 2538.2342,170.35431 2540.3545,170.76708 2544.6755,170.2742 2548.7041,169.81467 2553.4685,170.54716 2566.1755,173.57963 2575.154,175.72231 2584.3,177.78059 2586.5,178.15359 2588.7,178.52658 2591.5535,179.51072 2592.8411,180.34055 2594.1287,181.17038 2600.3641,182.94688 2606.6975,184.28832 2613.0309,185.62977&#xd;&#xa;2619.0353,187.16753 2620.0406,187.70556 2621.046,188.2436 2623.0292,188.68381 2624.4478,188.68381 2625.8664,188.68381 2627.8085,189.1172 2628.7636,189.64691 2629.7186,190.17661 2634.55,192.28885 2639.5,194.34077 2644.45,196.39269 2648.725,198.38214 2649,198.76176 2649.275,199.14139 2651.075,200.33007 2653,201.40329 2654.925,202.4765 2658.5766,204.51076 2661.1147,205.92386 2663.6528,207.33696 2669.0528,209.68478 2673.1147,211.14122&#xd;&#xa;2677.1766,212.59767 2684.1859,215.56557 2688.691,217.73656 2693.196,219.90755 2698.2729,221.68381 2699.9731,221.68381 2701.6732,221.68381 2704.6797,222.35881 2706.6542,223.18381 2708.6287,224.00881 2717.8085,225.09627 2718.7636,225.6004 2719.7186,226.10452 2721.9041,227.03493 2723.6203,227.66798 2725.3364,228.30104 2727.2241,229.88025 2727.8151,231.17734 2729.6626,235.23224 2739.1361,241.42556 2750.03,245.70042 2755.7885,247.96011 2762.75,250.86529&#xd;&#xa;2765.5,252.15638 2768.25,253.44747 2772.0948,254.77232 2774.0441,255.1005 2777.6751,255.71181 2786.0472,260.46502 2791.6372,265.08882 2793.8901,266.95231 2795.933,267.68381 2798.8844,267.68381 2802.1408,267.68381 2803.7735,268.38301 2806.7471,271.05113 2810.8862,274.76501 2814.1994,276.16642 2818.0095,275.81499 2820.8523,275.55279 2826.9539,278.06555 2836.1889,283.30165 2839.66,285.2697 2844.9412,288.24313 2847.9249,289.90928 2856.1072,294.47833&#xd;&#xa;2881.0011,312.65816 2890.6093,321.08134 2892.8694,323.0627 2895.2899,324.68381 2895.9881,324.68381 2896.6863,324.68381 2898.9803,326.14631 2901.0858,327.93381 2904.6563,330.9651 2908.4304,334.02033 2920.2173,343.42137 2936.1154,356.10148 2942.3934,361.67718 2959.1606,378.00842 2979.4502,397.77041 2983.478,401.31576 2989.4249,404.6473 2996.4284,408.57078 3003.5575,413.35637 3007.3197,416.65963 3010.512,419.46255 3011,420.47392 3011,424.2874&#xd;&#xa;3011,428.17544 3011.2602,428.68558 3013.25,428.69912 3015.8825,428.71702 3017.3202,429.5573 3018.5855,431.81741 3019.0885,432.71588 3021.6936,435.95441 3024.3747,439.01412 3028.628,443.86805 3029.4339,444.39281 3030.6961,443.13053 3032.7107,441.11595 3034.3105,441.3233 3036.0292,443.82177 3036.8382,444.99764 3038.5902,447.07988 3039.9226,448.44896 3043.5269,452.15227 3046,457.62408 3046,461.89525 3046,465.43809 3046.1946,465.68381&#xd;&#xa;3049,465.68381 3052,465.68381 3052,465.68381 3052,471.68381 3052,477.68381 3058,478.02452 3058,480.61739 3058,483.07428 3058.4469,483.60238 3060.75,483.86739 3063.3533,484.16693 3063.516,484.4905 3063.7999,489.93381 3064.0937,495.56664 3064.1599,495.68381 3067.0499,495.68381 3069.6346,495.68381 3070,496.04094 3070,498.56718 3070,500.60372 3070.5838,501.60323 3071.988,501.97041 3073.0813,502.25634&#xd;&#xa;3074.4589,503.77132 3075.0493,505.33704 3075.6396,506.90276 3076.77,509.49045 3077.5613,511.08745 3078.3526,512.68445 3079,514.54185 3079,515.215 3079,515.88816 3079.675,516.99912 3080.5,517.68381 3081.325,518.3685 3082,520.4486 3082,522.30625 3082,524.16391 3082.4296,525.68381 3082.9547,525.68381 3083.4798,525.68381 3084.2048,527.25881 3084.566,529.18381 3084.9271,531.10881 3085.6225,532.68381 3086.1113,532.68381&#xd;&#xa;3086.6001,532.68381 3087,533.35881 3087,534.18381 3087,535.00881 3087.4641,535.68381 3088.0314,535.68381 3088.5986,535.68381 3089.3527,536.47131 3089.707,537.43381 3090.0614,538.39631 3092.0723,541.93244 3094.1757,545.29187 3096.279,548.65131 3098,551.73605 3098,552.14685 3098,552.55765 3099.35,554.89408 3101,557.33892 3102.65,559.78375 3104,562.03425 3104,562.34002 3104,562.64579 3105.0904,563.75372&#xd;&#xa;3106.4232,564.80208 3107.756,565.85043 3109.1417,568.0527 3109.5027,569.696 3109.8636,571.33929 3110.5374,572.68381 3111,572.68381 3111.4626,572.68381 3112.1365,574.02865 3112.4975,575.67234 3112.8585,577.31604 3113.5693,578.91759 3114.0769,579.23136 3115.5876,580.16499 3115.133,583.41732 3113.0037,586.90964 3110.3137,591.32168 3110.4204,591.57113 3114.75,590.99115 L3118.5,590.48881 3124.3672,614.33631 C3127.5942,627.45244 3132.6422,647.18381 3135.5849,658.18381 3138.5276,669.18381 3142.0876,683.58381 3143.496,690.18381 3144.9044,696.78381 3148.5136,712.53381 3151.5164,725.18381 3155.5049,741.98598 3158.0572,756.1178 3160.988,777.62665 3163.1946,793.82021 3165,807.94459 3165,809.01417 3165,810.08374 3157.9708,828.55946 3149.3797,850.07133 3140.7885,871.58319 3129.1204,903.02992 3123.4507,919.95295 L3113.1422,950.72209 3097.4965,968.23507 3081.8509,985.74817 3091.2715,998.96597 C3096.4529,1006.2358 3117.0152,1036.6738 3136.9656,1066.6061 L3173.2391,1121.0285 3183.4602,1145.6061 C3189.0817,1159.1238 3197.1981,1180.7588 3201.4964,1193.6838 3205.7948,1206.6088 3213.755,1229.5588 3219.1857,1244.6838 3228.28,1270.012 3230.3293,1277.2381 3245.1339,1336.1838 L3261.2081,1400.1838 3263.2282,1477.6838 3265.2484,1555.1838 3256.1505,1628.1838 C3251.1467,1668.3338 3244.774,1720.0838 3241.989,1743.1838 3239.204,1766.2838 3234.2421,1806.6396 3230.9627,1832.8633 L3225,1880.5428 3225,1911.9425 3225,1943.3422 3211.5,1995.3895 C3204.075,2024.0156 3197.9986,2048.505 3197.9969,2049.8103 3197.9969,2051.1157 3199.6403,2059.6088 3201.6526,2068.6838 L3205.3114,2085.1838 3215.1899,2102.9116 3225.0683,2120.6395 3229.1672,2140.9116 3233.2662,2161.1838 3231.1672,2234.6838 3229.0683,2308.1838 3225.1775,2323.312 3221.2867,2338.4401 3205.643,2359.9398 C3197.039,2371.7646 3189.437,2381.8712 3188.7497,2382.3989 3187.0602,2383.6959 3131.3777,2399.3921 3106.2316,2405.6596 3086.0774,2410.6829 3051.8924,2416.6838 3043.4304,2416.6838 3039.1744,2416.6838 3039,2416.5657 3039,2413.6838 L3039,2410.6838 2982.4931,2410.6838 C2935.4172,2410.6838 2921.7731,2410.3542 2900.7431,2408.7092 2884.3355,2407.4257 2847.3237,2406.0154 2795,2404.6799 2750.725,2403.5498 2693.8,2401.7708 2668.5,2400.7265 L2622.5,2398.8279 2588,2392.7698 C2558.9562,2387.6698 2546.8082,2386.0769 2511.1868,2382.6978 2456.1533,2377.4771 2450.2886,2377.4835 2404,2382.8146 L2367.5,2387.0183 2329.5,2383.0182 2291.5,2379.0181 2254,2382.8166 C2217.0336,2386.5609 2215.8902,2386.6155 2173.65,2386.6494 L2130.8,2386.6834 2109.7426,2375.1834 C2098.1611,2368.8584 2087.9686,2363.6943 2087.0926,2363.7075 2086.2167,2363.7205 2076.725,2366.4752 2066,2369.8284 2055.275,2373.1816 2045.375,2375.9251 2044,2375.9251 2042.625,2375.9251 2032.725,2373.1816 2022,2369.8284 2011.275,2366.4752 2001.7833,2363.7208 2000.9074,2363.7075 2000.0314,2363.6945 1989.8389,2368.8584 1978.2574,2375.1834 L1957.2,2386.6834 1914.35,2386.6494 C1872.1098,2386.6154 1870.9664,2386.5614 1834,2382.8166 L1796.5,2379.0181 1758.5,2383.0182 1720.5,2387.0183 1684,2382.8146 C1637.7114,2377.4835 1631.8467,2377.4771 1576.8132,2382.6978 1541.1918,2386.0769 1529.0438,2387.6698 1500,2392.7698 L1465.5,2398.8279 1419.5,2400.7265 C1394.2,2401.7708 1337.275,2403.5498 1293,2404.6799 1240.6763,2406.0154 1203.6645,2407.4257 1187.2569,2408.7092 1166.2269,2410.3542 1152.5828,2410.6838 1105.5069,2410.6838 L1048.8655,2410.2806 1049,2413.6838 C1049,2416.6826 1049,2416.6838 1043.25,2416.5689 1040.0875,2416.5059 1029.5807,2415.177 1019.9016,2413.6161 z" 
            Fill="White"   
            Stretch="Uniform"
            Stroke="Blue"
            StrokeThickness="1"> 
```

# c# - Windsor 为多个接口注册单例组件

> ID：14757804
> 
> 赞同：23
> 
> 时间：2013-02-07T17:59:26.560
> 
> 标签：c#, castle-windsor

我想在 Castle.Windsor 中注册一个有 2 个接口的类。

这段代码是否有效...两个接口我只有一个实例...

```
Component.For<IEnvironment>().ImplementedBy<OutlookEnvironment>().LifestyleSingleton()
Component.For<IOutlookEnvironment>().ImplementedBy<OutlookEnvironment>().LifestyleSingleton() 
```

我需要仔细检查一下，因为我的环境应该始终是同一个实例......

因此，当我使用 IEnvironment 接口解析时，我应该得到与使用 IOutlookEnvironment 解析组件时相同的实例

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-07T18:04:23.173

您需要使用方法的 use multi-generic-parameter`Component.For`重载

```
Component.For<IEnvironment, IOutlookEnvironment>()
         .ImplementedBy<OutlookEnvironment>()
         .LifestyleSingleton() 
```

另请参阅文档：[使用多个服务部分注册组件](https://github.com/castleproject/Windsor/blob/master/docs/registering-components-one-by-one.md)。

# python - 如何在 unittest 中的 setUpClass 上设置条件装饰器？

> ID：14757805
> 
> 赞同：0
> 
> 时间：2013-02-07T17:59:29.133
> 
> 标签：python, unit-testing, python-2.7, decorator, class-method

我想为`setUpClass`python的unitest设置一个条件装饰器。我尝试了以下方法（暂时没有条件，以证明这一点）：

```
import unittest

class conditional_decorator(object):
    def __call__(self, func):
        print ("Extra output")
        return func

class First(unittest.TestCase):

    @classmethod
    @conditional_decorator
    def setUpClass(cls):
        print ("setting up")

    def test1(self):
        pass

if __name__ == '__main__':
    unittest.main() 
```

但我得到一个错误

```
TypeError: object.__new__() takes no parameters 
```

我怎么解决这个问题？此外，是否有一种简单的方法可以“组合”该`setUpClass`方法的两个装饰器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T17:16:34.567

当您查看回溯行时，它会告诉您错误发生的位置。我最好的猜测，因为我不知道你的代码的其余部分，是在你的代码正文中你留下了一个额外的参数或添加了一个额外的逗号。

至于这里问的两个装饰器：[我可以在Python中将两个装饰器组合成一个吗？](https://stackoverflow.com/questions/5409450/can-i-combine-two-decorators-into-a-single-one-in-python)

*还要从 setUpClass 中删除 Class 因为 setUp 是它自己的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T06:58:21.573

只需先实例化您的`conditional_decorator`类：

```
class First(unittest.TestCase):

    @classmethod
    @conditional_decorator() # Note the class is instantiated first.
    def setUpClass(cls):
    print ("setting up")

    def test1(self):
        pass 
```

或者使用函数而不是类作为装饰器：

```
def conditional_decorator(func):
    print ("Extra output")
    return func

class First(unittest.TestCase):

    @classmethod
    @conditional_decorator
    def setUpClass(cls):
        print ("setting up")

    def test1(self):
        pass

if __name__ == '__main__':
    unittest.main() 
```

现在它起作用了：

```
$ python my_test.py 
Extra output
setting up
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

# watin - 如何使用 find.byselector 使用链接的文本属性查找链接

> ID：14757807
> 
> 赞同：0
> 
> 时间：2013-02-07T17:59:35.553
> 
> 标签：watin

我们有一个链接<>链接文本<>

如何使用 Find.BySelector 和使用链接文本来识别它，就像我们在 selenium 中所做的那样......

//a [包含 (text(),'linktext')]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:16:19.740

要按确切文本查找链接：

```
myIE.Link(Find.ByText("my literal link text")).Click(); 
```

要通过“包含”文本查找链接，一种方法是执行与上述相同的操作，但具有`Find.ByText(new Regex......());`

# javascript - 通过 Ajax 表单发送数据

> ID：14757808
> 
> 赞同：0
> 
> 时间：2013-02-07T17:59:40.670
> 
> 标签：javascript, ajax, jquery

我有一个表单，我通过 Ajax 将它发送到每个参数但不要发送表单数据。我的问题是我应该如何通过 ajax 发送表单数据

html代码：

```
<from action="" method="post" enctype="multipart/form-data">
   <input type = "file" name = "adrfile" />
   <input type = "button" value="Upload" onclick="javascript: upload();" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:07:15.123

文件上传不能使用 XmlHttpRequest 对象完成，该对象传统上被认为是 AJAX。大多数人在尝试创建和异步文件上传时采用的方法是提交表单并以`iframe`. 我建议使用像[Uploadify](http://www.uploadify.com/)这样的 javascript 库。

也有许多 JQuery 插件可以帮助您解决这个问题。快速的谷歌搜索应该会给你很多选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:25:28.470

如果您想头疼，可以为各种浏览器完成 - 即最新版本的 Firefox、IE、Safari 和 Opera。

需要 JS summat 中的代码（其中 obj 是`input type="file"`项目的对象：

```
function DoReadFile(obj)
  {
    if (obj.files)
    {
      // Sensible browers
      if (1 == obj.files.length)
      {
        var file = obj.files[0];
        try {
          return obj.files[0].getAsBinary();
        }
        catch (error)
        {
           // Blank
        }
      }
    }
    else
    {
      // IE
      try
      {
        var fileSystem = new ActiveXObject("Scripting.FileSystemObject");
        var fileHandle = fileSystem.OpenTextFile(obj.value, 1);
        var contents = contents.ReadAll();
        contents.Close();
        return contents;
      }
      catch (error)
      {
        // Blank
      }
    }
    throw "Cannot read file";
  } 
```

然后，您可以让 JS 加密数据（base 64 等）并将其与其他内容一起作为帖子发送。但它不能是多部分形式。

但这有点浪费时间。

# c++ - std::unordered_map::insert 重载重载

> ID：14757809
> 
> 赞同：1
> 
> 时间：2013-02-07T17:59:42.830
> 
> 标签：c++, c++11

根据[我之前的问题的回答](https://stackoverflow.com/questions/14721395/overload-of-stdunordered-mapinsert "std::unordered_map::insert 的重载")，

```
std::pair<iterator, bool> std::unordered_map::insert(const value_type&) 
```

比有用

```
template<class P>
std::pair<iterator, bool> std::unordered_map::insert(P&&) 
```

对于某些情况，例如

```
std::unordered_map<std::string, int> v;
v.insert({"key", 1}); 
```

因为编译器无法`P`从`{"key", 1}`. （感谢[出售](https://stackoverflow.com/users/172531/sellibitze)）

然而，虽然这个参数`{"key", 1}`(= `std::pair<std::string, int>("key", 1)`) 是纯右值，但它不能移动到容器中，因为参数类型是`const value_type&`。

我的问题是——我很抱歉坚持不懈——为什么标准选择`const value_type&`参数类型而不是`value_type&&`？`const value_type&`或者，是否存在具有参数类型的函数而具有参数类型的函数`value_type&&`不存在的任何其他原因？

编辑：我创建了一个示例。

*   `const value_type&`使用unordered_map之类的参数类型：http: [//ideone.com/GB72fc](http://ideone.com/GB72fc)。
*   仅使用参数类型：http `value_type&&`: [//ideone.com/dXnQJr](http://ideone.com/dXnQJr)。
*   两种参数类型：http: [//ideone.com/shAb9e](http://ideone.com/shAb9e)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:18:41.097

for ( )( )的“缺失”`value_type&&`重载是有意的。 是一个。在移动语义游行中几乎下雨了。`insert``unordered_``multi``map``value_type``pair<const key_type, value_type>``const``key_type`

我真的很想允许从 a 移动`pair<key_type, value_type>`，从而引入`P&&`重载。事后看来，这可能不是最好的解决方案。然而，这是一个深思熟虑的设计决定。

在做出该决定时，尚未提出统一初始化提案。因此，在标准化之前从未彻底调查过与它的交互（只是没有足够的时间/人力）。

重载来自`const value_type&`C++98，从不考虑删除或修改它。

# php - Codeigniter - 清理输入的最佳实践

> ID：14757812
> 
> 赞同：6
> 
> 时间：2013-02-07T17:59:44.740
> 
> 标签：php, codeigniter, validation, sanitize

我想知道使用 Codeigniter 清理用户输入的最佳实践是什么。

我了解 CI 提供 form_validation，例如 set_rules。

```
'set_rules'=>'trim|xss_clean|alpha_numeric|htmlspecialchars' 
```

> “任何接受一个参数的原生 PHP 函数都可以作为规则使用，例如 htmlspecialchars、trim、MD5 等。”

我现在的问题是，

这足以保护我们免受 xss、sql 注入攻击等吗？

我还可以应用哪些其他规则？

就性能而言，我们对所有输入应用所有这些规则是否成本高昂？

我知道 MD5 是一个哈希函数，但是如果将 MD5 设置为规则的一部分会发生什么？

除此之外，我还添加了 javascript 验证。我在清理输入和验证用户输入方面是否走在正确的轨道上？请指教。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T19:34:00.223

消毒不仅仅是通过各种过滤器运行您的输入。

清理您的输入是为了不让您不想要的用户数据污染您的应用程序。
但是，最大的问题是，您不想要什么？

**第一个例子**

您已经创建了一个页面，允许用户发送文本消息。您预期的输入将是电话号码和短信。
查看手册中的[规则参考](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#rulereference)，我可能会选择这些规则：

```
numeric|exact_length[8] 
```

这些规则我想确保输入是数字的，并且输入与我所在地区的电话号码长度相匹配。由于我已经验证输入是数字，我可以假设 XSS 和 SQL 注入尝试应该失败（因为这些攻击包含非数字字符）。

对于文本消息字段，我会使用 trim 和 required:`trim|required`因为我不希望发送空消息。

**第二个例子**

允许用户发表评论是允许用户向您的网站发送垃圾邮件或注入恶意代码的好方法。

基本上，您不需要的是姓名、电子邮件和评论。

需要所有输入。电子邮件需要验证。但是注释和名称需要对 XSS 和开销空间/换行符进行一些清理。

我对 sanitazion 的验证如下所示：

```
$this->form_validation->set_rules('name', 'Name', 'required|trim|xss_clean');
$this->form_validation->set_rules('email', 'Email', 'required|trim|valid_email');
$this->form_validation->set_rules('comment', 'Comment', 'required|trim|xss_clean'); 
```

消毒你必须做的——而不是你能做的——并为你需要的做清洁。
确保当您将数据插入后端以使用[Active Record/Query Builder](http://ellislab.com/codeigniter/user-guide/database/active_record.html)正确转义您的输入时，或者您正在使用对您执行相同操作的[查询绑定。](http://ellislab.com/codeigniter/user-guide/database/queries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T13:42:44.273

如果您正在寻找一个私人功能，

```
function sanitizeString($value = ''){

    $value = trim($value);
    if (get_magic_quotes_gpc()) { $value = stripslashes($value); }

    $value = strtr($value,array_flip(get_html_translation_table(HTML_ENTITIES)));
    $value = strip_tags($value);
    $value = mysqli_real_escape_string(get_mysqli(), $value);
    $value = htmlspecialchars($value);

    return $value;
}

function get_mysqli() { 
    $db = (array)get_instance()->db;
    return mysqli_connect('localhost', $db['username'], $db['password'], $db['databse']);
} 
```

我使用它作为自定义函数来清理表单中传递的每个参数，除此之外我们可以添加更多自定义函数，我希望。总是有一个自定义函数是一个优势 `array_map`，或者`array_walk`也可以用于进一步简化它，用于 $_GET、$_POST 等数组

# php - 使用 Phar::createDefaultStub 创建的 PHP Phar 在浏览器中作为 CLI 运行

> ID：14757816
> 
> 赞同：2
> 
> 时间：2013-02-07T17:59:55.730
> 
> 标签：php, apache, command-line-interface, phar

我有一个应用程序，我想用 CLI 和 Web 界面将其打包为 PHAR（它充当更广泛系统的 API，因此我想避免在两个 PHAR 档案中复制相同的库）。我遇到的“错误”是 PHAR 在使用 createDefaultStub 创建时总是像从命令行运行一样。

```
<?php
try {
$phar = new Phar('myphar.phar');
$phar['cli.php'] = '<?php echo "CLI"; ?>';
$phar['web.php'] = '<?php echo "Web"; ?>';
$phar->setDefaultStub('cli.php', 'web.php');
// this is the same as:
// $phar->setStub($phar->createDefaultStub('cli.php', 'web/index.php'));
} catch (Exception $e) {
// handle errors
}
?> 
```

如果我运行从上述代码创建的phar，该代码直接取自（[http://www.php.net/manual/en/phar.createdefaultstub.php](http://www.php.net/manual/en/phar.createdefaultstub.php)从命令行使用

```
php.exe myphar.phar 
```

我看到了“CLI”，正如预期的那样，但我也从网上看到了这个。

从 2010 年开始有一个记录在案的错误，但由于它似乎未解决且可用的案例不多，我想知道我最后是否做错了。

PHP 错误报告：[https ://bugs.php.net/bug.php?id=52322&edit=2](https://bugs.php.net/bug.php?id=52322&edit=2)

我为尝试诊断所做的事情：

在 PHP 5.4.11、5.3.21、5.2.17 上测试过*phar* 也在每个版本下重新创建。

尝试全新安装最新的 XAMPP。

PHP.ini 设置

```
detect_unicode = Off
phar.readonly = Off
phar.require_hash = Off 
```

使用来自 cli.php 的 echo 进行调试：

```
$_SERVER['REQUEST_URI'] 
$_SERVER['REQUEST_METHOD'] 
```

两者都按预期返回，这些是默认存根中用于检查它是否在 Web 上运行的值。

我真的很茫然，想知道是否有人知道下一步该去哪里？

编写自定义存根是一种选择，但在幕后可能会出现问题，这会在以后让我绊倒。

任何建议将不胜感激 ：）

# session - FBFriendPickerViewController 间歇性地加载一个空的 tableview

> ID：14757817
> 
> 赞同：2
> 
> 时间：2013-02-07T17:59:57.500
> 
> 标签：session, facebook-ios-sdk

我正在使用 FBFriendPickerViewController 在用户登录后加载朋友。但是，正在加载一个空的表视图。来自 fb 的用户的朋友没有出现。这是代码。

```
- (IBAction)inviteButtonTouchHandler:(id)sender {
        if (!_friendPickerController) {
            _friendPickerController = [[FBFriendPickerViewController alloc] initWithNibName:nil bundle:nil];
            _friendPickerController.delegate = self;
            _friendPickerController.title = @"Select friends";
            _friendPickerController.allowsMultipleSelection = NO;
        }
        [_friendPickerController clearSelection];
        [_friendPickerController loadData];
        [self presentViewController:_friendPickerController animated:YES completion:nil];
  } 
```

此代码在登录后调用，在 appDelegate 中按照 Facebook 教程完成 -

```
- (void)openSession
{
    NSArray *permissions = @[@"friends_about_me"];
    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         [self sessionStateChanged:session state:state error:error];
     }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:46:57.477

您需要在 viewController 的 viewDidLoad 方法中添加以下代码。

```
if (!FBSession.activeSession.isOpen) {
    // if the session is closed, then we open it here, and establish a handler for state changes
    [FBSession.activeSession openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
        switch (state) {
            case FBSessionStateClosedLoginFailed:
            {
                UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                    message:error.localizedDescription
                                                                   delegate:nil
                                                          cancelButtonTitle:@"OK"
                                                          otherButtonTitles:nil];
                [alertView show];
            }
                break;
            default:
                break;
        }
    }];
} 
```

# javascript - 将括号 () 附加到输入字段并将光标放在它们之间

> ID：14757820
> 
> 赞同：1
> 
> 时间：2013-02-07T18:00:08.803
> 
> 标签：javascript, jquery, query-builder

`or`使用,`not`和运算符组合一个非常基本的查询构建器`()`。我让它们附加到输入字段，但我认为如果将括号运算符按钮附加到输入字段时，光标将`(here)`准备好供用户查询，这对用户是有益的。

到目前为止，我有：

```
 // query builder functions
$(function() {
  var queryinput = $( "#query-builder-modal .search-box input.querybuilder" );

  $('#query-builder-modal ul.operators li.or').click(function(){
    queryinput.val( queryinput.val() + "OR" );
    queryinput.focus();
  });

  $('#query-builder-modal ul.operators li.not').click(function(){
    queryinput.val( queryinput.val() + "-" );
    queryinput.focus();
  });

  $('#query-builder-modal ul.operators li.brackets').click(function(){
    queryinput.val( queryinput.val() + "()" );
    queryinput.focus();
  });
}); 
```

谁能帮我将光标放在此示例代码的第三次单击功能的括号之间？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:07:54.933

你可以尝试这样的事情：

```
$('#query-builder-modal ul.operators li.brackets').click(function(){
    queryinput.val( queryinput.val() + "()" );
    var pos = queryinput.val().length - 1;
    myInput.focus(); /* Seems mandatory for Firefox/Opera */
    queryinput[0].selectionStart = queryinput[0].selectionEnd = pos;
}); 
```

jsfiddle 示例[在这里](http://jsfiddle.net/YQEyT/1/)

编辑：似乎对于 Firefox 和 Opera，您必须首先`focus()`输入，而不是在 Safari 和 chrome 上。我更新了代码和 jsfiddle。

# android - android:dividerPadding 没有效果

> ID：14757829
> 
> 赞同：4
> 
> 时间：2013-02-07T18:00:41.123
> 
> 标签：android

这个主题工作正常，为 ActionBar 选项卡的 3 个部分引用了三种自定义样式。

但是“dividerPadding”对它们中的任何一个都没有影响——在 API 17 设备上运行。

```
 <style name="Theme.AppEmptyTitleBar" parent="android:style/Theme.Holo">
        <item name="android:actionBarStyle">@style/AB</item>
        <item name="android:actionBarTabStyle">@style/ABT</item>
        <item name="android:actionBarTabBarStyle">@style/ABTB</item>
    </style>

<style name="AB" parent="android:style/Widget.Holo.ActionBar">
    <item name="android:dividerPadding">20dip</item>
</style>
<style name="ABT" parent="android:style/Widget.Holo.Light.ActionBar.TabView">
    <item name="android:dividerPadding">20dip</item>
</style>
<style name="ABTB" parent="android:style/Widget.Holo.ActionBar.TabBar">
    <item name="android:dividerPadding">20dip</item>
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T15:21:17.910

首先，该`dividerPadding`属性（据我所知）仅适用于`*ActionBar.TabBar`样式。

我已经使用一个非常基本的应用程序测试了您的样式，该应用程序使用了本机`ActionBar`和提供 API 17 的设备。我已将`dividerPadding`属性设置为不同的值，并将其余属性保留为默认值。结果如下：

*   `dividerPadding="0dip"`：

![在此处输入图像描述](../Images/5b45eeb314b7c855dcabbf2b7911c61c.png)

*   `dividerPadding="15dip"`：

![在此处输入图像描述](../Images/176f90d7b3aa5aef6c51895c792c0e02.png)

*   `dividerPadding="20dip"`：

![在此处输入图像描述](../Images/b80e4c038b7e080c1803ba5442cb52f5.png)

如您所见，最后一张图片上的分隔符消失了。所以我的第一个建议是检查你是否看到它。除此之外，`dividerPadding`似乎按预期工作。

我的第二个建议来自 Android 平台处理放置在不同`values-*`目录中的样式资源的方式。我的预感是您可能正在使用默认`values`目录中的操作栏样式。如果您碰巧在`values-*`兼容的目录（例如`values-vX`where `X <= 17`）中提供了对这些样式的覆盖，则来自的样式`values`将被忽略。例如，假设您已将这些示例样式放置在`values/styles.xml`文件中：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="@android:style/Theme.Holo">
        <item name="android:actionBarTabBarStyle">@style/ABTB</item>
    </style>

    <style name="ABTB" parent="@android:style/Widget.Holo.ActionBar.TabBar">
        <item name="android:dividerPadding">0dip</item>
    </style>
</resources> 
```

如果然后将此样式定义放在`values-v17/styles.xml`：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="@android:style/Theme.Holo">
    </style>
</resources> 
```

它将覆盖`AppTheme`样式，有效地“重置”（技术上：忽略）整个`actionBarTabBarStyle`样式（包括`dividerPadding`属性值）。实际上，您不会看到对`ABTB`样式所做的任何更改。

**编辑**

是的，我假设你知道，抱歉 :( 该`dividerPadding`值仅适用于：

*   `TabWidget`当（它是标签标签的容器）水平绘制标签时，分隔线的顶部和底部。
*   `TabWidget`垂直绘制选项卡时分隔线的左侧和右侧。

这正是您在屏幕截图中看到的。据我所知，您必须设置`divider`为可强制使用额外填充的可绘制对象。我相信`layer`可绘制对象将非常适合此目的，因为您可以为每一层显式设置填充。

# java - Java & SQL 比较日期

> ID：14757836
> 
> 赞同：6
> 
> 时间：2013-02-07T18:01:10.160
> 
> 标签：java, sql

我正在尝试获取客户到达日期并将其与我的 SQL 数据库进行比较，以查看我的数据库中是否存在相同的日期。但是我收到以下错误：`The operator > is undefined for the argument type(s) java.lang.String, java.lang.String`

PS我需要通过java而不使用sql查询来比较它

```
public void makeNewReservation() throws ParseException {
    // Enter informations

    System.out.println("Date of arrivel?");
    Scanner in = new Scanner(System.in);
    String date_entree = in.next();
    System.out.println("Date of exit? dd/MM/yyyy");
    String date_sortiee = in.next();
    calculateDaysDifference(date_sortiee, date_entree);

public  void calculateDaysDifference(String date_entree, String date_sortiee) throws ParseException{

ConnectionMySQL myConnection=new ConnectionMySQL();
    Connection conSQL=myConnection.startDBConnection();
    boolean connectionOK=myConnection.checkConnection(conSQL);

    String query = ("SELECT `START_DATE`,`END_DATE` FROM `room_booking");

    //if everything is fine with the connection, i try to execute a query
    if (connectionOK){
        try{
            ResultSet mesResultats=myConnection.executeQuery(conSQL, query);

            //the while loop is just for me to check the dates
            while (mesResultats.next()) {
                System.out.println("START_DATE: "+mesResultats.getString(1)+" END_DATE : "+ mesResultats.getString(2));

                if (date_entree > mesResultats.getString(1){
                    System.out.println("cant reserve room room reserved already");

                }
            }

            // je ferme la connexion
            conSQL.close();

        }

        catch(SQLException e){
            e.printStackTrace();

        }

    } 
```

[我的数据库](http://i.stack.imgur.com/vZiYQ.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T18:22:02.307

您需要比较 2 个日期

**1）将输入字符串转换为日期**

```
SimpleDateFormat df=new SimpleDateFormat("yyyy-MM-dd");
java.util.Date d=df.format(/*date String*/);

NOTE: df.format will throw parseException if the String format does not match "yyyy-MM-dd" . I leave it upto you to make sure the date string is of the specified format. 
```

**2）从sql查询中获取日期**

```
java.util.Date sqlDate=new java.util.Date(resultset.getDate().getTime());

NOTE : resultset.getDate() will give you java.sql.Date class's object. 
```

**3)[比较 2 个日期](http://www.mkyong.com/java/how-to-compare-dates-in-java/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:11:23.893

试试这个逻辑

```
Date date1=new Date(df.parse(mesResultats.getString(1)));
Date date2=new Date(df.parse(mesResultats.getString(2)));

int status=date1.compareTo(date2); //compareto is a function defined for date

if status==0 print same date
if status<0 print  date1 is older then date2
if status>0 print  date1 is newer then date2 
```

[评论后更新] `DateFormat df = new SimpleDateFormat("Format of your date goes here");`

# asp.net-mvc - ASP.NET 4 MVC 系统要求（用于服务器部署）？

> ID：14757840
> 
> 赞同：1
> 
> 时间：2013-02-07T18:01:18.537
> 
> 标签：asp.net-mvc, asp.net-mvc-4

不知道为什么我还没有找到这个。当我为此谷歌时，对于官方发行说明，我得到了这个：[http](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253805) ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253805其中说：

> Visual Studio 的 ASP.NET MVC 4 组件需要 PowerShell 2.0 和带有 Service Pack 1 的 Visual Studio 2010 或带有 Service Pack 1 的 Visual Web Developer Express 2010。

ASP.NET MVC 4 Beta 站点列出了服务器系统要求。我想我可以假设这些仍然是必需的，但是从官方版本中获取列表 会*很好：http:* [//www.microsoft.com/en-us/download/details.aspx?id=28942](http://www.microsoft.com/en-us/download/details.aspx?id=28942)

> 系统要求 支持的操作系统：Windows 7、Windows Server 2003 R2（32 位 x86）、Windows Server 2003 R2 x64 版本、Windows Server 2003 Service Pack 2、Windows Server 2008、Windows Server 2008 R2、Windows Vista Service Pack 2、Windows XP 服务包 3
> 
> 附加要求：需要 PowerShell 2.0、.NET 4、ASP.NET 4 和 Visual Studio 2010 SP1 或 Visual Web Developer 2010 SP1 才能使用此功能。

我想我只是对此很固执，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:03:09.060

我不知道发布版本的服务器要求的任何官方来源。看起来他们在发行说明中忽略了这一点。

# c# - C# 远程处理异常：通常只允许每个套接字地址（协议/网络地址/端口）使用一次

> ID：14757841
> 
> 赞同：0
> 
> 时间：2013-02-07T18:01:20.440
> 
> 标签：c#, exception, remoting

我正在使用 C# 远程访问服务器系统上的标签，并且该标签的文本将通过单击客户端系统上的按钮来更改。我在一个名为 RemoteObject 的类库中创建了一个远程对象，并将这个类库的引用添加到客户端和服务器系统，但是在调试服务器系统和客户端系统时，我收到异常“每个套接字地址只有一次使用（协议/网络地址/端口）通常是允许的”

请帮助我解决这个问题..

远程对象.dll

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace RemoteObject
{
    public class Class1 : MarshalByRefObject
    {
        public Class1()
        {
        }

        public void setText()
        {
            ServerClass bs = new ServerClass();
            Label lbl = bs.Controls["label1"] as Label;
            lbl.Text = "New Text";
        }
    }
} 
```

服务器端代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RemoteObject;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;

namespace Server
{
    public partial class ServerClass : Form
    {
        private Class1 myremoteobject;
        public ServerClass()
        {
            InitializeComponent();
            myremoteobject = new Class1();
            TcpChannel channel = new TcpChannel(30000);
            ChannelServices.RegisterChannel(channel, true);
            RemotingConfiguration.RegisterWellKnownServiceType(typeof(Class1), "CSBU", WellKnownObjectMode.SingleCall);
        }

    }
} 
```

客户端代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using RemoteObject;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;

namespace Client
{
    public partial class ClientClass : Form
    {
        private Class1 remoteobject = new Class1();
        public ClientClass()
        {
            InitializeComponent();
            TcpChannel chan = new TcpChannel();
            ChannelServices.RegisterChannel(chan,true);
            remoteobject = (Class1)Activator.GetObject(typeof(Class1), "tcp://localhost:30000/CSBU");
        }

        private void changeTextBtn_Click(object sender, EventArgs e)
        {
            remoteobject.setText();
        }
    }
} 
```

请有人尽快帮助我解决此异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:17:20.587

看起来问题在于您的`Class1.setText`方法创建了一个新的`ServerClass`. 现在，由于创建 的实例并通过远程`Class1`处理使其可用的东西`ServerClass`是.`setText``ServerClass`

这意味着`ServerClass`构造函数中的所有代码都会运行两次。第二次运行时，它将第二次尝试`TcpChannel`在端口 30000 上注册一个新的。由于您第一次创建的频道已经在运行，您会收到您描述的错误。

尝试在您的构造函数上放置一个断点`ServerClass`，我希望您会看到它运行两次。第一次你不会得到错误，但第二次你会。

解决方案是避免`ServerClass`在该`setText`方法中创建新的。如果您的意图是远程调用应该修改已经在屏幕上的表单中的标签，那么您需要将对现有`ServerClass`实例的引用传递给`Class1`实例。（例如，让`Class1`构造函数将 a`ServerClass`作为参数，并将其存储在一个字段中。使用它而不是在 中构造一个新的`setText`。）

顺便说一句，远程处理或多或少已被弃用。WCF 是当今在 .NET 中进行远程访问的常用方法。无论是那个还是 Web API。

**更新：013/02/12**

抱歉，我使用 Remoting 已经有一段时间了，因为正如我所提到的，*Remoting 已被弃用，您不应该使用它！*

所以，我忘记了：Remoting 并不能直接注册一个特定的知名*实例*——您注册了知名*类型*，而 Remoting 想要为您构造该类型。所以你需要想出一些其他的方式来传递`ServerClass`你的`Class1`.

例如：

```
public class Class1 : MarshalByRefObject
{
    public static ServerClass MyServer { get; set; }

    public void setText()
    {
        ServerClass bs = MyServer;
        Label lbl = bs.Controls["label1"] as Label;
        lbl.Text = "New Text";
    }
} 
```

然后你的`ServerClass`变成：

```
public partial class ServerClass : Form
{
    public ServerClass()
    {
        InitializeComponent();

        Class1.MyServer = this;

        TcpChannel channel = new TcpChannel(30000);
        ChannelServices.RegisterChannel(channel, true);
        RemotingConfiguration.RegisterWellKnownServiceType(typeof(Class1), "CSBU", WellKnownObjectMode.SingleCall);
    }
} 
```

然后你会遇到下一个错误，`InvalidOperationException`错误是“跨线程操作无效：控制'label1'是从创建它的线程以外的线程访问的。”

这是因为远程调用来自工作线程，但您只能从其拥有的 UI 线程更新 Windows 窗体 UI 元素。

同样，请不要使用它，因为正如我之前提到的那样，不推荐使用**远程处理，您不应该使用它；使用 WCF**，但对于它的价值，这里是如何处理它：

```
public void setText()
{
    MyServer.BeginInvoke((Action) setTextOnUiThread);
}

private void setTextOnUiThread()
{
    ServerClass bs = MyServer;
    Label lbl = bs.Controls["label1"] as Label;
    lbl.Text = "New Text";
} 
```

这应该有效。

再一次，***不要这样做 - 远程不再是当前的技术。看看 WCF***

# python - API 的可选 django-sekizai

> ID：14757849
> 
> 赞同：4
> 
> 时间：2013-02-07T18:01:41.870
> 
> 标签：python, django, django-sekizai

我正在编写一个基本 API，它扩展了 DetailView 以显示给定模型的最新对象。

作为网站的一部分，django-sekizai 用于 django-cms，因此所有使用的模板都需要有 sekizai 标签，但是这些不适合 API，因为它不需要 CSS/Javascript 而是输出JSON/XML/随便。

理想情况下，在编写诸如

```
class LatestTest(TestCase):
    def test_head_empty(self):
        c = Client()
        response = c.head(reverse(LatestView.plain_view)) 
```

我得到错误

```
TemplateSyntaxError: You must enable the 'sekizai.context_processors.sekizai' template context processor or use 'sekizai.context.SekizaiContext' to render your templates. 
```

在执行客户端请求期间。

# asp.net - 将数据绑定到 gridview ？未找到列？

> ID：14757851
> 
> 赞同：0
> 
> 时间：2013-02-07T18:01:50.080
> 
> 标签：asp.net

在 asp.net 中，将数据绑定到 gridview 时会出错。说不存在列。

如果编码级别没有列，我该如何限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:19:55.720

最简单的方法可能是将缺少的列添加到绑定的数据源中。

*更难*的方法是绑定到枚举实现[ICustomTypeDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.icustomtypedescriptor.aspx)的类型的数据源。这将让您准确控制列的映射方式。这就是内部实施的方式`DataView`和实施方式。`DataRowView`

# python - python函数调用的奇怪开销

> ID：14757854
> 
> 赞同：1
> 
> 时间：2013-02-07T18:01:53.647
> 
> 标签：python, mysql, performance, optimization, sqlalchemy

我不知从哪里来了一些奇怪的开销。我正在运行一个 python 脚本并使用 SQLAlchemy 进行一些 SQL 查询。这是我的问题：

```
def _create_connection(name):
    connection = get_connection(name)
    cstring = "mysql+mysqldb://login:passwd@host/database?charset=utf8"
    return create_engine(cstring)

def _get_table(engine, table):
    metadata = MetaData(engine)
    return Table(table, metadata, autoload=True)

class A(object):
    def requests_statuses(self, user_id):
        friendship_request_t = _get_table(self._db, "friendship_request")
        user_t = _get_table(self._db, "user")

        a = datetime.now()

        s = select([user_t.c.user_id, friendship_request_t.c.status],
                   from_obj=[friendship_request_t.join(
                    user_t,
                    friendship_request_t.c.user_id_a==user_t.c.user_id)]).\
            where(friendship_request_t.c.user_id_b==bindparam('fr_user_id_b'))
        results = self._db.execute(s, fr_user_id_b=user_id).fetchall()

        b = datetime.now()

        print "interval: " + unicode(b - a)

        return results

class B(object):
    def friend_requests_statuses(self):
        a_obj = A()

        print "begin: " + unicode(datetime.now())
        results = a_obj.requests_statuses(self.id)
        print "end  : " + unicode(datetime.now()) 
```

运行此程序时：

```
b_obj = B()
b.friend_requests_statuses() 
```

我有这个输出：

```
begin: 2013-02-07 18:57:40.058834
interval: 0:00:00.001852
end  : 2013-02-07 18:57:40.076525 
```

我有 16 毫秒的开销。SQL 查询只需要 1.8 毫秒即可执行。

有人能帮助我吗？

退出 A.requests_statuses 方法时，“开销”是否可能来自垃圾收集？

# ios - 测试互联网连接不适用于可达性

> ID：14757855
> 
> 赞同：1
> 
> 时间：2013-02-07T18:02:00.220
> 
> 标签：ios, reachability

我正在使用更新的[可达性](https://github.com/tonymillion/Reachability)库来测试互联网连接是否可达。如果无法访问互联网，我会尝试记录一条消息，但日志没有调试：

```
//Test the internet connection
Reachability* reach = [Reachability reachabilityForInternetConnection];
reach.unreachableBlock = ^(Reachability*reach)
{
    NSLog(@"Internet connexion unreachable");//Although Internet cnx is off, this message is not displayed
    return;
};

// start the notifier which will cause the reachability object to retain itself!
[reach startNotifier]; 
```

我误解了可达性库吗？互联网关闭时如何执行给定任务？谢谢。

PS：我的iPad只有wifi，没有3G服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-11T18:41:33.547

在 Swift 4 中使用 Alamofire 检查内部人员

```
import Foundation
import Alamofire

class Connectivity {

   class func isConnectedToInternet() ->Bool {
        return NetworkReachabilityManager()!.isReachable
   }
} 
```

然后调用这个函数

```
if Connectivity.isConnectedToInternet() {
    print("Yes! internet is available.")
    // do some tasks..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:10:25.790

实际上，您应该注册一个通知以接收更改的可达性：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil]; 
```

在此处查看 Apple 示例：http: [//developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_m-DontLinkElementID_4](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_m-DontLinkElementID_4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T20:34:12.770

好的，所以我得到的最好方法是遵循 Apple 示例代码：

```
 //Test the internet connection
   Reachability* reach = [Reachability reachabilityForInternetConnection];

   NetworkStatus netStatus = [reach currentReachabilityStatus];
   //See if the reachable object status is "ReachableViaWifi"
if (netStatus!=ReachableViaWiFi) {
    //If not
    NSLog(@"wifi unavailable");
    //Alert the user about the Internet cnx
    WBErrorNoticeView *notice = [WBErrorNoticeView errorNoticeInView:self.view title:@"Network Error" message:@"Check your internet connection."];
    notice.sticky = NO;
    [notice show];
    return;//Exit the method
} 
```

# macos - 用于在文件中设置屏幕分辨率值的 Shell 脚本

> ID：14757862
> 
> 赞同：2
> 
> 时间：2013-02-07T18:02:12.453
> 
> 标签：macos, shell, sh

我想要一个shell脚本

1.  获取我当前的屏幕分辨率，**（已解决）**
2.  在文件中搜索包含分辨率设置的行，
3.  将文件中的旧分辨率设置替换为当前设置

到目前为止（谢谢！）我已经获得了获取当前屏幕分辨率数据的命令：

```
system_profiler SPDisplaysDataType | awk '/Resolution/ {
    print "screenwidth \""$2"\"";
    print "screenheight \""$4"\"";
}' 
```

应分别写入的行以：

```
screenwidth "VALUE1"
screenheight "VALUE2" 
```

**如何将结果写入“VALUE”位置的文件？**

（我是 shell 脚本领域的初学者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:07:37.447

一个电话`awk`就足够了（并且`grep`是不必要的）：

```
system_profiler SPDisplaysDataType | awk '/Resolution/ {
    print "screenwidth \""$2"\"";
    print "screenheight \""$4"\"";
}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:14:09.087

如果我没听错的话，

```
sys..|grep..|awk ..$2   is new widht
sys..|grep..|awk ..$4   is new height 
```

你想用上面几行的新值替换旧文件中的 value1/2

```
-- old file  --
screenwidth "VALUE1"
screenheight "VALUE2" 
```

那么你可以一口气做：

```
sys..|grep..|awk 'NR==FNR{w=$2;h=$4;next}/screenwidth/{$0="screenwidth \""w"\"";} /screenheight/{$0="screenheight \""h"\""}1' -  oldfile 
```

请参阅此测试示例：

```
#I simulate your sys..|grep.. with echo

kent$  cat old.txt
foo
screenwidth "VALUE1"
screenheight "VALUE2"
bar

kent$  echo "foo 200 bar 400"|awk 'NR==FNR{w=$2;h=$4;next}/screenwidth/{$0="screenwidth \""w"\"";} /screenheight/{$0="screenheight \""h"\""}1' -  old.txt    
foo
screenwidth "200"
screenheight "400"
bar 
```

# ruby-on-rails-3 - Rails 3 has_many：通过访问属性

> ID：14757863
> 
> 赞同：1
> 
> 时间：2013-02-07T18:02:17.927
> 
> 标签：ruby-on-rails-3, attributes, has-many-through

我第一次使用 has_many through，尽管在此处和[指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)中阅读了大量内容，但 我不了解访问通过表上的属性的正确方法。我的表格与另一篇文章中的示例相同。

```
 class Product < ActiveRecord::Base
       has_many :collaborators
       has_many :users, :through => :collaborators
    end

    class User < ActiveRecord::Base
       has_many :collaborators
       has_many :products, :through => :collaborators
   end

   class Collaborator < ActiveRecord::Base
      belongs_to :product
      belongs_to :user
   end 
```

假设 collaborators 表具有附加属性，例如 hours_spent，那么从特定用户和产品的 collaborator 表中找到 hours_spent 的正确方法是什么？

当我通过产品找到我的用户并像在

```
 @product.users.each do |user| 
```

这似乎有效

```
 user.collaborator[0].hours_spent 
```

我得到了正确的值，但由于每个用户/产品对应该只有一个合作者记录，所以索引让我失望，让我觉得我做错了什么。

感谢您的阅读！

编辑

也许我没有通过概念获得 has_many 。也许一个 MySQL 示例会有所帮助。

我在想的是，如果我这样做了

```
 SELECT * FROM collaborators where user_id = 1; 
```

我希望结果是一组（零个或更多）。相似地

```
 SELECT * FROM collaborators where product_id = 1; 
```

也会给我一套，但是

```
 SELECT * FROM collaborators where user_id = 1 and product_id = 1; 
```

最多会给出 1 行。

如果我理解正确，所有 3 个查询都会返回一个集合。所以我想我需要某种唯一性约束，但这必须是一个复合键，在两个属于键上。这甚至可能吗？有没有更好地模拟这个的结构？

非常感谢您的快速和有用的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:19:00.567

There may be a single database row per pair, but when considering a single user, that user can be associated to many products, so a user can have many rows in the collaborators table. Similarly, when considering a single product, that product can be associated to many users, so a product can have many rows in the collaborators table.

Also, instead of using `user.collaborators[0].hours_spent`, use `user.collaborators.first.try(:hours_spent)` (which may return null), if you only want the first collaborator's hours spent.

If a single user can only have one single product and a single product can only have a single user, then switch the has_many's to has_one's for everything.

*Update: The preceding is the answer to the original question which has since been clarified via comments. See comments for detail and see comments on other answer by Peter.*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T01:44:30.027

Perhaps you should use **has_and_belongs_to_many**. If your Collaborator is used only to make link between User and Product without having more fields.

```
 class Product < ActiveRecord::Base
       has_and_belongs_to_many :users
    end

    class User < ActiveRecord::Base
       has_and_belongs_to_many :products
   end 
```

The beetween migration would be:

```
class CreateUsersProducts < ActiveRecord::Migration
  def change
    create_table "users_products", :id => false do |t|
      t.integer :user_id
      t.integer :product_id
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:17:25.127

After implementing this, what I found was that I think I had the correct relationships setup, I had to use the has_many :though as users could have many products, and it needed to be :through because there are additional attributes on the collaborator table. The sticking point was how to get there to only be a single Collaborator record for each user/product pair, and then how do I guarantee I got it. And to this point the answer I've found is it has to be done in code.

To make sure there is only a single record for each pair, I used

```
class Collaborator < ActiveRecord::Base
  validates :product_id, :presence => true,  :uniqueness => {:scope => [:user_id], :message => "This is a duplicate join"} 
```

And then to make doubly sure I'm finding the right record, I have a scope

```
 scope :collaboration_instance, lambda {|p_id, u_id| where("collaborations.product_id = ? && collaborations.user_id = ?", p_id, u_id)} 
```

If someone has a more elegant solution, or just wants to improve this one, please post and I will change yours to the selected answer.

# excel - 在 VBA 中使用带计数器的 For 循环

> ID：14757866
> 
> 赞同：0
> 
> 时间：2013-02-07T18:02:21.933
> 
> 标签：excel, for-loop, vba

我正在尝试构建一个循环，该循环将从两个单独的工作表中提取数据并将它们放入一个表中。我试图让它将跨行的数据放置到最后，然后向下移动一行并重复直到它到达表的末尾。和列 I`Changes`和`WTD`将在事后计算。我只是想将数据放入其中。这是我拥有的编码 `This Year`。`Last Year`

```
Sub MakeTable()

Application.ScreenUpdating = False

Dim gRange As Range
Dim i As Integer
Dim j As Integer
Dim baseSheet As Worksheet
Dim from1Sheet As Worksheet
Dim from2Sheet As Worksheet
Dim baseBaseCell As Range
Dim baseFrom1Cell As Range
Dim baseFrom2Cell As Range

Set baseSheet = Sheets("Chart")
Set from1Sheet = Sheets("Week")
Set from2Sheet = Sheets("WeekMinusYear")
Set baseBaseCell = Sheets("Chart").Range("B3")
Set baseFrom1Cell = Sheets("Week").Range("C2")
Set baseFrom2Cell = Sheets("WeekMinusYear").Range("C2")

For i = 0 To 4
    For j = 0 To 12

        If i = ((4 Mod 2) <> 0) Then
            setRawData1
        Else
            setRawData2
        End If

    Next j
Next i

End Sub
Function setRawData1()

Dim baseSheet As Worksheet
Dim from1Sheet As Worksheet
Dim from2Sheet As Worksheet
Dim baseBaseCell As Range
Dim baseFrom1Cell As Range
Dim baseFrom2Cell As Range

Set baseSheet = Sheets("Chart")
Set from1Sheet = Sheets("Week")
Set from2Sheet = Sheets("WeekMinusYear")
Set baseBaseCell = Sheets("Chart").Range("B3")
Set baseFrom1Cell = Sheets("Week").Range("C2")
Set baseFrom2Cell = Sheets("WeekMinusYear").Range("C2")

'Sales
baseBaseCell.Offset(0, 0) = baseFrom1Cell.Value 'This Year

'Cost
baseBaseCell.Offset(0, 3) = baseFrom1Cell.Offset(0, 1) 'This Year

'Margin
baseBaseCell.Offset(0, 6) = baseFrom1Cell.Offset(0, 2) 'This Year

'Basis Points
baseBaseCell.Offset(0, 9) = baseFrom1Cell.Offset(0, 3) 'This Year

End Function
Function setRawData2()

Dim baseSheet As Worksheet
Dim from1Sheet As Worksheet
Dim from2Sheet As Worksheet
Dim baseBaseCell As Range
Dim baseFrom1Cell As Range
Dim baseFrom2Cell As Range

Set baseSheet = Sheets("Chart")
Set from1Sheet = Sheets("Week")
Set from2Sheet = Sheets("WeekMinusYear")
Set baseBaseCell = Sheets("Chart").Range("B3")
Set baseFrom1Cell = Sheets("Week").Range("C2")
Set baseFrom2Cell = Sheets("WeekMinusYear").Range("C2")

'Sales
baseBaseCell.Offset(0, 1) = baseFrom2Cell.Value 'Last Year

'Cost
baseBaseCell.Offset(0, 4) = baseFrom2Cell.Offset(0, 1) 'Last Year

'Margin
baseBaseCell.Offset(0, 7) = baseFrom2Cell.Offset(0, 2) 'Last Year

'Basis Points
baseBaseCell.Offset(0, 10) = baseFrom2Cell.Offset(0, 3) 'Last Year

End Function 
```

这是我拥有的表格的示例。

![抱歉质量差，但所有列都按应有的方式拆分](../Images/571e325c354859967ebb9a9e9f2b6c57.png)

对不起，图像质量差。所有列都按应有的方式分解。我已经尝试了几种不同的方法来实现这一点。就像现在一样，它将通过并将去年的信息放入正确的列中，但仅限于第一行。我能得到的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:24:43.600

使用`Option Explicit`... 否则，使用如此相似的变量名可能会遇到奇怪的问题。但这不是你的问题。

您的每个方法实际上都不会根据行更改它正在写入的单元格。

例如（删除附加代码）：

```
Function setRawData1()

Set baseFrom1Cell = Sheets("Week").Range("C2")
baseBaseCell.Offset(0, 0) = baseFrom1Cell.Value 'This Year

'Cost
baseBaseCell.Offset(0, 3) = baseFrom1Cell.Offset(0, 1) 'This Year

'Margin
baseBaseCell.Offset(0, 6) = baseFrom1Cell.Offset(0, 2) 'This Year

'Basis Points
baseBaseCell.Offset(0, 9) = baseFrom1Cell.Offset(0, 3) 'This Year

End Function 
```

此函数将始终设置完全相同的单元格（无论您的循环状态是什么），因为那里没有任何内容会导致它们在行中偏移。

所以当你打电话

```
 If i = ((4 Mod 2) <> 0) Then
        setRawData1    'write to same row every time...
    Else
        setRawData2     'write to same row every time...
    End If 
```

我建议将您的功能修改为：

```
Function setRawData1(int rowOffset)    
    baseBaseCell.Offset(rowOffset, 0) = baseFrom1Cell.Value 'This Year

    'Cost
     baseBaseCell.Offset(rowOffset, 3) = baseFrom1Cell.Offset(0, 1) 'This Year

    'Margin
    baseBaseCell.Offset(rowOffset, 6) = baseFrom1Cell.Offset(0, 2) 'This Year

    'Basis Points
     baseBaseCell.Offset(rowOffset, 9) = baseFrom1Cell.Offset(0, 3) 'This Year 
```

然后将正确的偏移值传递给它们中的每一个

# google-drive-api - 上传文档时生成谷歌驱动器预览

> ID：14757872
> 
> 赞同：1
> 
> 时间：2013-02-07T18:02:32.680
> 
> 标签：google-drive-api

当用户上传该类型的文件而不是使用该应用程序创建它时，谷歌驱动器应用程序能否生成文件的预览（默认情况下不由谷歌驱动器处理）？（假设用户已授权该应用程序)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:52:37.300

不幸的是，不，对不起。

我们最接近的是能够为文件生成第三方缩略图。您的应用可以通过上传必要的图片来决定文件在 Google Drive 缩略图视图中的显示方式。

这里的视频解释了它：[http ://www.youtube.com/watch?v=jG5-9zlaPL8](http://www.youtube.com/watch?v=jG5-9zlaPL8)

# linux - 使用 check_nrpe 检查 CPU 性能——奇怪的行为

> ID：14757874
> 
> 赞同：0
> 
> 时间：2013-02-07T18:02:35.980
> 
> 标签：linux, monitoring, nagios

我遇到了这个奇怪的问题：使用`check_nrpe`，它不会为`check_cpu_perf`. 不过，它适用于其他 NRPE 插件。例如

***在 Nagios 服务器上：***

```
[root@ftppm01 nagios]# /usr/lib64/nagios/plugins/check_nrpe -H talend-admin-app-01.local  -c check_users -a '5 10'
USERS OK - 1 users currently logged in |users=1;5;10;0

[root@ftppm01 nagios]# /usr/lib64/nagios/plugins/check_nrpe -H talend-admin-app-01.local  -c check_load -a '15,10,5 30,25,20'
OK - load average: 0.00, 0.05, 0.08|load1=0.000;15.000;30.000;0; load5=0.050;10.000;25.000;0; load15=0.080;5.000;20.000;0; 

[root@ftppm01 nagios]# /usr/lib64/nagios/plugins/check_nrpe -H talend-admin-app-01.local  -c check_cpu_perf -a '20 10'
OK: CPU Idle = % | CpuUser=; CpuNice=; CpuSystem=; CpuIowait=; CpuSteal=; CpuIdle=:20:10 
```

在客户端上，`check_cpu_perf`它本身就可以正常工作：

```
[root@ftaps01 plugins]# /usr/lib64/nagios/plugins/check_cpu_perf/check_cpu_perf 20 10
OK: CPU Idle = 98.38% | CpuUser=0.34; CpuNice=0.00; CpuSystem=0.34; CpuIowait=0.94; CpuSteal=0.00; CpuIdle=98.38:20:10 
```

但是，同样的结果使用`check_nrpe`：

```
[root@ftaps01-lvpr-uk-local plugins]# /usr/lib64/nagios/plugins/check_nrpe -H localhost -c check_cpu_perf -a '20 10'
OK: CPU Idle = % | CpuUser=; CpuNice=; CpuSystem=; CpuIowait=; CpuSteal=; CpuIdle=:20:10 
```

知道我在做什么错吗？或者如何调试这个问题？干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:30:13.903

我不知道你使用什么脚本，我在这里找到了类似的东西：http: [//exchange.nagios.org/directory/Plugins/System-Metrics/CPU-Usage-and-Load/Check-CPU-Performance/details](http://exchange.nagios.org/directory/Plugins/System-Metrics/CPU-Usage-and-Load/Check-CPU-Performance/details)

上面的脚本使用了 sar、lparstat 和 lslpp。nagios-nrpe 模块以 nagios 用户身份运行，并且 sar 、lparstat 或 lslpp 可能无法以非 root 用户身份执行。

如果您不使用上述脚本，请告诉我们您正在使用什么其他脚本。

祝你好运。

# java - Hibernate 不会保存具有 ManyToOne 关系的实体

> ID：14757877
> 
> 赞同：4
> 
> 时间：2013-02-07T18:02:37.440
> 
> 标签：java, mysql, hibernate

这是我的桌子：

```
CREATE TABLE `admin_log` (
  `LOG_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` bigint(20) NOT NULL,
  `CREATION_DATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `ACTION` varchar(100) NOT NULL,
  `DETAILS` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`LOG_ID`),
  KEY `ADMIN_LOG_FK1` (`USER_ID`),
  CONSTRAINT `ADMIN_LOG_FK1` FOREIGN KEY (`USER_ID`) REFERENCES `user_master` (`USER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 
```

这是我的实体：

```
@Entity
@Table ( name = "admin_log" )
public class AdminLog {

    private Long            logId;
    private UserMaster      user;
    ...

    @Id
    @GeneratedValue ( strategy = IDENTITY )
    @Column ( name = "LOG_ID", unique = true, nullable = false, length = 20 )
    public Long getLogId () {
        return logId;
    }

    public void setLogId ( Long logId ) {
        this.logId = logId;
    }

    @ManyToOne
    @JoinColumn ( name = "USER_ID" )
    public UserMaster getUser () {
        return user;
    }

    public void setUser ( UserMaster user ) {
        this.user = user;
    }
    ...
}

@Entity
@Table ( name = "user_master" )
public class UserMaster {

    private Long        userId;
    ...

    @Id
    @GeneratedValue ( strategy = IDENTITY )
    @Column ( name = "USER_ID", unique = true, nullable = false, length = 20 )
    public Long getUserId () {
        return this.userId;
    }

    public void setUserId ( Long userId ) {
        this.userId = userId;
    }
    ...
} 
```

当我尝试保存`AdminLog`using`save()`方法时，`HibernateTemplate`我收到以下错误：

```
SEVERE: Column 'USER_ID' cannot be null
org.springframework.dao.DataIntegrityViolationException: could not insert [...AdminLog];
SQL [insert into admin_log (ACTION, CREATION_DATE, DETAILS, USER_ID) values (?, ?, ?, ?)];
constraint [null] nested exception is org.hibernate.exception.ConstraintViolationException: could not insert: [...AdminLog] 
```

问题是那`userId`绝对不是空的！就像Hibernate无法`userId`从`user`. `AdminLog`我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T19:34:09.647

您正在尝试保存`UserMaster`. 如果你有一个`id`对象，那么你应该先加载它并`AdminLog`在保存之前设置为对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:25:08.263

在你坚持`UserMaster`之前你必须坚持`AdminLog`

# php - preg_match pcre 正则表达式

> ID：14757880
> 
> 赞同：0
> 
> 时间：2013-02-07T18:02:45.570
> 
> 标签：php, preg-match

我写正确的reg exp有一点问题，我有一个字符串

`2013-01-11 17:38:02.137759 some text leater`

或者

`11 Jan 17:38:02 some text leater`

所以我写了一个正则表达式

```
(?:(?:(?:\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}(?:\.\d+)?)\s(?:[^\s]+)\s(?:.\d+.)?\s?))?((?:(\d{4}-\d{2}-\d{2})\s\d{2}:\d{2}:\d{2}(?:\.\d+)?)|(?:(\w{3}\s+\d+)\s\d{2}:\d{2}:\d{2})) 
```

示例结果是：

```
Array
(
    [0] => Array
        (
            [0] => Jan 11 17:38:02
        )

    [1] => Array
        (
            [0] => Jan 11 17:38:02
        )

    [2] => Array
        (
            [0] => 
        )

    [3] => Array
        (
            [0] => Jan 11
        )

) 
```

或者

```
Array
(
    [0] => Array
        (
            [0] => 2013-01-11 17:38:02.137759
        )

    [1] => Array
        (
            [0] => 2013-01-11 17:38:02.137759
        )

    [2] => Array
        (
            [0] => 2013-01-11
        )

    [3] => Array
        (
            [0] => 
        )

) 
```

问题是我想跳过一个空字段结果的结果，我该怎么做？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:10:01.790

最简单的方法就是`array_filter`在结果上使用：

```
array_filter($array, function ($piece) { return array_filter($piece); }); 
```

# iphone - 为 CoreData 创建接口

> ID：14757883
> 
> 赞同：0
> 
> 时间：2013-02-07T18:03:16.927
> 
> 标签：iphone, ios, objective-c, xcode, ios6

目前，我已经创建了一个 Objective-C 类（NSObject）来处理我需要的任何特殊功能，这些功能涉及与我的 CoreData 模型的交互。这些与我的 CoreData 交互的函数位于 dbInterface.h 和 dbInterface.m 文件中。在 dbInterface 类中，我添加了一个 conform `<NSFetchedResultsControllerDelegate>`。

```
@interface dbInterface : NSObject<NSFetchedResultsControllerDelegate>{
    NSFetchedResultsController *fetchedResultsController;
    NSManagedObjectContext *managedObjectContext;
} 
```

在应用程序委托中，我创建了此类的一个实例，并将委托托管上下文与 dbInterface 对象托管上下文连接起来：

appDelegate.h：

```
@property (nonatomic, retain) IBOutlet dbInterface *dbConnector; 
```

appDelegate.m:

```
@synthesize dbConnector;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    dbConnector.managedObjectContext=self.managedObjectContext;
    return YES;
} 
```

**问题**：我有 6 个视图控制器，它们必须与这个 dbInterface 对象交互，以收集视图控制器本身的数据。因此，在此设置中，dbInterface 充当 viewController 和 CoreData 模型的中间人。这是执行我在中间人 dbInterface 类中定义的这些特定操作的正确方法吗？

如果这**不是**正确的方法，那么为了视图控制器，我应该如何与 CoreData 模型进行交互？

如果它是正确的，那么我如何访问我在应用程序委托中声明的对象`dbConnector`？显然我不想创建 dbInterface 类的 6 个副本。这存在使用过多内存的问题，然后还必须编写此行的 6 个副本：

```
dbConnector.managedObjectContext=self.managedObjectContext; 
```

我听说过单身这个词，这是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:52:08.113

您应该能够从您的应用委托中引用您的类的实例。这是我用来从另一个类引用我的应用程序委托的代码。您必须将您的类前缀更改为您使用的任何内容。

```
#import "NXAppDelegate.h"
NXAppDelegate *appDelegate = (NXAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

由于您使用 dbConnector 作为属性，您可以从应用程序委托中引用它（下面的示例）：

```
viewController.managedObjectContext = appDelegate.dbConnector.managedObjectContext; 
```

在 iOS 开发中，使用单例有点不受欢迎。它有被过度使用或在没有真正需要的情况下使用的趋势。如果您已经评估了您的条件并且无法使用委托、协议或子类来满足您的需求，我建议您使用单例。

如果您想阅读该主题，Apple 似乎已经更新了他们的文档以帮助解释单例的正确使用。

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html)

此外，网上有很多文章谈论单身人士的利弊。

[http://jason.agostoni.net/2012/01/22/ios-best-practices-singletons/](http://jason.agostoni.net/2012/01/22/ios-best-practices-singletons/)

# c# - Base64 加密 - 无效的 Base64 字符串

> ID：14757890
> 
> 赞同：0
> 
> 时间：2013-02-07T18:03:37.737
> 
> 标签：c#, base64

我有以下代码

问题是当我尝试运行它时会引发异常并打印：

> 条目不是有效的 base64 字符串，因为它包含不是 base 64 的字符

这是代码：

```
 private static string Encrypt(string plainStr, string completeEncodedKey, int keySize)
    {
        Console.WriteLine("Entro Encrypt");
        RijndaelManaged aesEncryption = new RijndaelManaged();
        aesEncryption.KeySize = keySize;
        aesEncryption.BlockSize = 128;
        aesEncryption.Mode = CipherMode.CBC;
        aesEncryption.Padding = PaddingMode.PKCS7;
        Console.WriteLine(completeEncodedKey);
        aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[0]);
        aesEncryption.Key = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[1]);
        byte[] plainText = ASCIIEncoding.UTF8.GetBytes(plainStr);
        ICryptoTransform crypto = aesEncryption.CreateEncryptor();
        Console.WriteLine("Abajo de crypto");
        // The result of the encryption and decryption            
        byte[] cipherText = crypto.TransformFinalBlock(plainText, 0, plainText.Length);
        return Convert.ToBase64String(cipherText);
    } 
```

这是堆栈跟踪：

```
en System.Convert.FromBase64String(String s)  
en cryptograph.Cryptography.Encrypt(String plainStr, String completeEncodedKey,
        Int32 keySize)  
en C:\programacion\cryptograph\cryptograph\cryptograph\Cryptography.cs:línea 65  
en cryptograph.Cryptography.generateKey(String key, String pass)  
en C:\programacion\cryptograph\cryptograph\cryptograph\Cryptography.cs:línea 13  
en cryptograph.cryptograph.Main(String[] args)  
en C:\programacion\cryptograph\cryptograph\cryptograph\cryptograph.cs:línea 21 
```

编辑：completeEncodedKey 是一个随机字符串，例如“AAAA”或其他内容。我知道它的长度必须是四的倍数

# android - 形状上的文字

> ID：14757902
> 
> 赞同：2
> 
> 时间：2013-02-07T18:04:17.290
> 
> 标签：android, android-widget

我想实现这样的目标：

![在此处输入图像描述](../Images/a093844e43b25a56e6eac477ba9ee6df.png)

如果我们谈论被包围的那个。我猜`25`这将是 TextView`2`并将成为该文本视图的背景图像。这里，`2`表示当天的事件数。但是事件的数量可以是动态的。

如何创建带有动态文本的背景形状？是否可以？

## 编辑

`Mission Accomplished`:-)

通过扩展**NPike 的**代码，我实现了所需的设计。虽然我开始在我的脑海里有别的东西。但在工作的过程中，我改变了主意，现在我认为我的设计比我最初计划的要好。

这是我现在的设计：

![在此处输入图像描述](../Images/4d649f790225d6856de2c4d07f1a959a.png)

这是我的代码：

导入android.content.Context；导入android.graphics.Canvas；导入android.graphics.Color；导入android.graphics.Paint；导入android.graphics.Typeface；导入android.util.AttributeSet；导入 android.widget.TextView；

```
public class MonthlyCalTextView extends TextView {
    private Paint mPaint;
    private String strNoOfEvents;

    public MonthlyCalTextView(Context context, AttributeSet attrs, String noOfEvents) {
        super(context, attrs); 

        strNoOfEvents = ( Integer.parseInt(noOfEvents)>100 )? "100+":noOfEvents;
        strNoOfEvents = (strNoOfEvents.equals("0")) ? "":strNoOfEvents;
        mPaint = new Paint();
        mPaint.setTypeface( Typeface.defaultFromStyle(Typeface.BOLD) );
        mPaint.setAntiAlias(true);
        mPaint.setColor(Color.rgb(223, 223, 223));
    }

    public MonthlyCalTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        mPaint.setTextSize(35);
        canvas.drawText(strNoOfEvents, getMeasuredWidth()-mPaint.measureText(strNoOfEvents)-3, getMeasuredHeight()-3, mPaint);

        super.onDraw(canvas);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        // grow view dimensions to account for circle
        setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight());
    }

} 
```

这就是我所说的：

```
Random rand = new Random();
// Just for demo assuming that the no. of events will be between 0-125
int min=0, max=125;
String randomNum = String.valueOf( rand.nextInt(max - min + 1) + min );
MonthlyCalTextView tvData=new MonthlyCalTextView(CalendarMonthlyFragment.activity, null, randomNum); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:28:25.817

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:clickable="true" >

<RelativeLayout
    android:layout_width="10dp"
    android:layout_height="10dp"
    android:layout_centerInParent="true"
    android:layout_margin="5dp"
    android:background="@drawable/sample_image" >

    <TextView
        android:id="@+id/some_title"
        android:layout_width="10dp"
        android:layout_height="wrap_content"
        android:layout_margin="3dp"
        android:gravity="center"
        android:textColor="@android:color/white" />
</RelativeLayout> 
```

并在 java 类中将相对布局膨胀为一个视图，并将 textView 膨胀为膨胀视图的 findById。

这是本机日历应用程序的方式。显示今日视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:40:47.717

您可以创建自己的 TextView 扩展，覆盖 onDraw 以绘制圆。

这是一个简短的例子：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.util.AttributeSet;
import android.widget.TextView;

public class CircleTextView extends TextView {

    private static final int PADDING = 15;
    private Paint mCirclePaint;

    public CircleTextView(Context context, AttributeSet attrs) {
        super(context, attrs); 

        mCirclePaint = new Paint();
        mCirclePaint.setStyle(Style.FILL);
        mCirclePaint.setAntiAlias(true);
        mCirclePaint.setColor(Color.GREEN); 
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // draw circle at center of canvas
        canvas.drawCircle(getMeasuredWidth()/2, getMeasuredHeight()/2, PADDING, mCirclePaint);
        super.onDraw(canvas);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { 
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        // grow view dimensions to account for circle
        setMeasuredDimension(resolveSize(getMeasuredWidth()+(PADDING*2), widthMeasureSpec), resolveSize(getMeasuredHeight()+(PADDING*2), heightMeasureSpec));
    }

} 
```

# php - 创建一个 [url="link"]title[!url] 样式 preg_replace

> ID：14757903
> 
> 赞同：0
> 
> 时间：2013-02-07T18:04:22.493
> 
> 标签：php, regex

我真的不知道如何为此创建一个 preg_replace ：

```
[url="link"]title[!url] 
```

给我：

```
<a href="link">title</a> 
```

我正在尝试这个：

```
$patterns = array();
$replacements = array();
$patterns[0] = '/\[b\]/';
$patterns[1] = '/\[\!b\]/';
$patterns[2] = '/\[url="([*]+)"\]([*]+)\[\!url\]/';
$replacements[0] = '<strong>';
$replacements[1] = '</strong>';
$replacements[2] = '<a href="$1">$2</a>';

echo preg_replace($patterns, $replacements, $text); 
```

[b], [!b] 工作得很好......但我无法解决 [url] 问题...... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:10:58.027

`preg_replace('/\[url="(.+?)"\](.+?)\[\!url\]/', '<a href="$1">$2</a>', $string)`

这将假设您不想检查无效的 url 字符。您的示例未能获取许多在 url 中有效的字符，从而破坏了您正在寻找的功能。这是一个更完整的版本：

`preg_replace('/\[url="([A-Za-z0-9\-._~:\/?#[\]@!$@&()\'*+,;=%]+)"\](.+)\[\!url\]/', '<a href="$1">$2</a>', $string)`实际上是一个更完整的、符合[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986/)的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:08:28.127

你只需要把你的字符匹配放在括号中

```
\[url="([a-z0-9A-Z_.-]+)"\]([a-z0-9A-Z\s_.-]+)\[\!url\] 
```

* * *

问题编辑后

试试这个

```
\[url="(.*?)"\](.*?)\[\!url\] 
```

# ajax - TideSDK 数据库

> ID：14757905
> 
> 赞同：0
> 
> 时间：2013-02-07T18:04:23.133
> 
> 标签：ajax, sqlite, tidesdk

我是 TideSDK 的新手，正在努力让本地数据库正常工作。

首先，这是正确的使用方法吗？我希望用户加载游戏，放入一些东西（本地数据库）而不发送到服务器，退出游戏。然后稍后再回来（即使在关闭他的电脑或清除他的互联网之后），加载游戏并且所有本地数据库的东西仍然存在，然后他可以将其发送到服务器。（我应该改用本地文件吗？）

我得到的错误是：

```
db.execute("INSERT INTO Games(id, player, timeText) VALUES(1, 1, 0)"); // Putting a zero time in 
```

它说这是一个不正确的sql语句或数据库不存在。

理想情况下，我也想用准备好的语句来做 sqlite，但我想开始更简单。

这是 HelloWorld 示例的 mod：

[https://github.com/TideSDK/TideSDK-HelloWorld](https://github.com/TideSDK/TideSDK-HelloWorld)

我修改后的代码：

应用程序.js

```
function DoSqlCall() {
    var lastTime;

    //Open the database first
    var db = Ti.Database.openFile(Ti.Filesystem.getFile(
                          Ti.Filesystem.getApplicationDataDirectory(), 'customdatabase.db'));
   //Create a table and insert values into it
   db.execute("CREATE TABLE IF NOT EXISTS Games(id INTEGER, player INTEGER, timeText TEXT)");

   alert("Hello 1");

   var rows = db.execute("SELECT * FROM Games WHERE 'id' = 1 AND 'player' = 1");
   if(rows.isValidRow()) {
       lastTime = rows.fieldByName('timeText');
       alert("lastTime: " + lastTime.toString());
      //rows.next();
   } else {
       db.execute("INSERT INTO Games(id, player, timeText) VALUES(1, 1, 0)"); // Putting a zero time in
       alert("Put in zero time");
       lastTime = 0;
   }
   //Release memory once you are done with the resultset and the database
   rows.close();
   db.close();
};

// create and set menu
var menu = Ti.UI.createMenu(),
fileItem = Ti.UI.createMenuItem('File'),
exitItem = fileItem.addItem('Exit', function() {
  if (confirm('Are you sure you want to quit?')) {
    Ti.App.exit();
  }
});

menu.appendItem(fileItem);
Ti.UI.setMenu(menu); 
```

索引.html

```
<!DOCTYPE html>
<html>
<head>
  <title>Hello World</title>
  <style type="text/css">
    body {background: #fff;}
  </style>
</head>
<body>
  <h1>Hello World</h1>
  <button id="m_Send" type="button" onclick="DoSqlCall()">Send</button>
  <script type="text/javascript" src="app.js"></script> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:25:43.767

在你的 SQL 语句中，你有这个：

```
db.execute("INSERT INTO Games(id, player, timeText) VALUES(1, 1, 0)"); 
```

但是，在为 timeText 字段传递整数的地方，您已将此字段定义为 TEXT 字段。我建议你试试这个：

```
db.execute("INSERT INTO Games(id, player, timeText) VALUES(1, 1, '0')"); 
```

在这里，我为第三个字段传递了一个字符串。

# java - 用java在网页上读写和提交

> ID：14757906
> 
> 赞同：-1
> 
> 时间：2013-02-07T18:04:26.830
> 
> 标签：java, javascript, html, http

如何使用 Java 读取网页、将数据写入表单元素、提交表单以及读取返回的网页？

具体来说，我想通过输入学生的注册号，提交并阅读结果页面来查看大学网站上的学生成绩。

怎么可能实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:10:32.983

您可以尝试[HttpUnit](http://httpunit.sourceforge.net/)，这是一个主要用于测试网站的库。但它也非常适合您的场景。

例子：

```
WebConversation wc = new WebConversation();
WebResponse top     = wc.getResponse( "http://www.meterware.com/Frames.html" ); // read a page with two frames
WebResponse summary = wc.getFrameContents( "summary" );                         // read the summary frame
WebLink     link    = summary.getLinkWith( "Cake Recipe" );                     // find the link (which targets "details" );
link.click();                                                                   // click on it
WebResponse response= wc.getFrameContents( "details" );                         // retrieve the details frame 
```

**编辑**

然后是[HtmlUnit](http://htmlunit.sourceforge.net/)。我想这是一个品味问题。

# java - 在 Android 中解析 Json 响应时的问题

> ID：14757910
> 
> 赞同：-2
> 
> 时间：2013-02-07T18:04:51.363
> 
> 标签：java, android, json, parsing

在更多代码中具有以下代码：

```
@Override
public void handleFailureMessage(Throwable e, String responseBody) {

    Log.d("handleFailureMessage", "e: " + e);
    Log.d("handleFailureMessage", "errorResponse: " + responseBody);

    System.out.println(responseBody);

    JSONObject error = responseBody.getJSONObject("error");
    Log.d("error", error.toString());

    String message = error.getString("message");
    Log.d("message", message);

    dialog("error", message);
} 
```

返回的错误类似于以下内容：

```
{"error":{"type":"incomplete_data","message":"Key either not set, or invalid"}} 
```

我只是想到达“消息”部分，并输出文本

所以我知道`responseBody`是一个字符串，但是我如何将它转换为 a`JSONObject`以便我可以访问`error`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:09:05.323

`message`从当前 json 字符串中获取值：

```
try {
    JSONObject error =new JSONObject(responseBody);
    JSONObject errorobj = error.getJSONObject("error");  // get error JSONObject
     // get  message from error JSONObject
    String message = errorobj.getString("message");
    Log.d("error", message);

} catch (JSONException e) {
      Log.e("JSON Parser", "Error :" + e.getMessage());
  } 
```

因为您需要`JSONObject`从 json 字符串创建以从 JSONObject 获取值

# ios - 引用块内的实例变量

> ID：14757911
> 
> 赞同：5
> 
> 时间：2013-02-07T18:04:54.937
> 
> 标签：ios, objective-c, objective-c-blocks

假设我有一个类（非 ARC 环境）：

```
@interface SomeObject : NSObject {
    UILabel *someLabel;
    dispatch_queue_t queue;
}
- (void)doAsyncStuff;
- (void)doAnimation;
@end

@implementation SomeObject

- (id)init {
    self = [super init];
    if (self) {
        someLabel = [[UILabel alloc] init];
        someLabel.text = @"Just inited";
        queue = dispatch_queue_create("com.me.myqueue", DISPATCH_QUEUE_SERIAL);
    }
    return self;
}

- (void)doAsyncStuff {
    dispatch_async(queue, ^{
        ...
        // Do some stuff on the current thread, might take a while
        ...
        dispatch_async(dispatch_get_main_queue(), ^{
            someLabel.text = [text stringByAppendingString:@" in block"];
            [self doAnimation];
        }
    }
}

- (void)doAnimation {
    ...
    // Does some animation in the UI
    ...
}

- (void)dealloc {
    if (queue) {
        dispatch_release(queue);
    }
    [someLabel release];
    [super dealloc];
} 
```

如果我的块被启动，然后所有其他持有对该对象实例的引用的东西都释放它，我是否保证不会调用 dealloc，因为嵌套块引用了一个实例变量（和 self）——那个 dealloc嵌套块退出后会发生吗？我的理解是我的块对自我有很强的参考，所以这应该是犹太洁食。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:14:48.960

这很好，因为你所说的原因。

需要注意的重要一点是，如果类（由 表示`self`）以任何方式保留了块，您将创建一个保留循环。因为您在线定义它，并将其传递给`dispatch_async`，所以您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:34:12.950

你是绝对正确的。该块在两种情况下保留自我：

1.  您在块内使用 self 。
2.  您可以直接在块内访问实例变量。

您的嵌套块在这两个方面都很好。因此，dealloc 将在块执行完毕后发生。

另一个需要注意的有趣的事情是 your`queue`也是一个实例变量。我最初的想法是，因为它是一个实例变量，所以`self`也会保留到块执行完毕。然而，当我测试它时实际发生的只是`queue`被保留`self`并被释放。不过，我无法找到这方面的文档。

# algorithm - 快速计算三角形内的点

> ID：14757920
> 
> 赞同：10
> 
> 时间：2013-02-07T18:05:09.243
> 
> 标签：algorithm, geometry, computational-geometry

我需要找到给定列表中三角形内的点数。这里的问题是，最多可以有一百万个点。

我尝试了一个简单的方法：如果三角形的面积等于一次取 2 个三角形点和要检查的点形成的 3 个三角形的面积之和，则它的内部。这没有任何精度误差，因为我没有除以二来找到该区域。

但我需要更快的东西。目标是速度。是否可以通过某种预处理使其更快，忽略基于某些标准或类似的某些点？

**编辑**：忘记添加关键细节。一旦给出的分数是固定的。然后这些点是静态的，需要检查多达一百万个三角形......

**编辑2**：事实证明，一个好的（也许也是最佳的）方法是使用线扫描。不过，感谢您的回答！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T18:12:00.753

如果一个点在每条边的左侧（右侧），则该点位于三角形内部。您可以计算由要测试的点和三角形顶点之一以及位于三角形两侧的 3 个矢量构成的矢量的叉积（实际上只是其中的一个分量）（全部按顺时针方向或全部逆时针方向）。查看所有 3 个的计算分量是否具有相同的符号（所有 3 个负数或所有 3 个正数）。这会告诉你重点。速度快，精度没有问题，至少，如果你使用整数来完成任务。

一旦你看到它在三角形边之一的错误边上，你可以停止对每个点的进一步计算。

C中的示例代码：

```
#include <stdio.h>

#define SCREEN_HEIGHT 22
#define SCREEN_WIDTH  78

// Simulated frame buffer
char Screen[SCREEN_HEIGHT][SCREEN_WIDTH];

void SetPixel(int x, int y, char color)
{
  if ((x < 0) || (x >= SCREEN_WIDTH) ||
      (y < 0) || (y >= SCREEN_HEIGHT))
    return;

  Screen[y][x] = color;
}

void Visualize(void)
{
  int x, y;

  for (y = 0; y < SCREEN_HEIGHT; y++)
  {
    for (x = 0; x < SCREEN_WIDTH; x++)
      printf("%c", Screen[y][x]);

    printf("\n");
  }
}

typedef struct
{
  int x, y;
} Point2D;

int main(void)
{
  // triangle vertices
  Point2D vx0 = { SCREEN_WIDTH / 2, SCREEN_HEIGHT / 7 };
  Point2D vx1 = { SCREEN_WIDTH * 6 / 7, SCREEN_HEIGHT * 2 / 3 };
  Point2D vx2 = { SCREEN_WIDTH / 7, SCREEN_HEIGHT * 6 / 7 };
  // vectors lying on triangle sides
  Point2D v0, v1, v2;
  // current point coordinates
  int x, y;

  // calculate side vectors

  v0.x = vx1.x - vx0.x;
  v0.y = vx1.y - vx0.y;

  v1.x = vx2.x - vx1.x;
  v1.y = vx2.y - vx1.y;

  v2.x = vx0.x - vx2.x;
  v2.y = vx0.y - vx2.y;

  // process all points

  for (y = 0; y < SCREEN_HEIGHT; y++)
    for (x = 0; x < SCREEN_WIDTH; x++)
    {
      int z1 = (x - vx0.x) * v0.y - (y - vx0.y) * v0.x;
      int z2 = (x - vx1.x) * v1.y - (y - vx1.y) * v1.x;
      int z3 = (x - vx2.x) * v2.y - (y - vx2.y) * v2.x;

      if ((z1 * z2 > 0) && (z1 * z3 > 0))
        SetPixel(x, y, '+'); // point is to the right (left) of all vectors
      else
        SetPixel(x, y, '-');
    }

  // draw triangle vertices

  SetPixel(vx0.x, vx0.y, '0');
  SetPixel(vx1.x, vx1.y, '1');
  SetPixel(vx2.x, vx2.y, '2');

  // visualize the result

  Visualize();

  return 0;
} 
```

输出（[ideone](http://ideone.com/XEwEHN)）：

```
------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
---------------------------------------0--------------------------------------
--------------------------------------++++------------------------------------
------------------------------------++++++++----------------------------------
----------------------------------+++++++++++++-------------------------------
--------------------------------+++++++++++++++++-----------------------------
------------------------------++++++++++++++++++++++--------------------------
----------------------------++++++++++++++++++++++++++------------------------
--------------------------+++++++++++++++++++++++++++++++---------------------
-------------------------++++++++++++++++++++++++++++++++++-------------------
-----------------------+++++++++++++++++++++++++++++++++++++++----------------
---------------------+++++++++++++++++++++++++++++++++++++++++++--------------
-------------------+++++++++++++++++++++++++++++++++++++++++++++++1-----------
-----------------++++++++++++++++++++++++++++++++++++-------------------------
---------------++++++++++++++++++++++++---------------------------------------
-------------++++++++++++-----------------------------------------------------
-----------2------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-07T18:56:04.860

根据计算几何学，最快的方法是通过重心坐标变换。如果你有一个固定的三角形和许多测试点，那么这种方法会特别快，因为一旦你计算了三角形的 3 个点的重心坐标，你就完成了大部分工作。这是完整的算法，其中 ABC 是三角形，P 是被测点：

```
// Compute vectors        
v0 = C - A
v1 = B - A
v2 = P - A

// Compute dot products
dot00 = dot(v0, v0)
dot01 = dot(v0, v1)
dot02 = dot(v0, v2)
dot11 = dot(v1, v1)
dot12 = dot(v1, v2)

// Compute barycentric coordinates
invDenom = 1 / (dot00 * dot11 - dot01 * dot01)
u = (dot11 * dot02 - dot01 * dot12) * invDenom
v = (dot00 * dot12 - dot01 * dot02) * invDenom

// Check if point is in triangle
return (u >= 0) && (v >= 0) && (u + v < 1) 
```

这里的重心坐标是相对于 A 计算的，但 B 或 C 也可以。

要测试附加点，您只需重新计算 v2、dot02、dot12、u 和 v。invDenom 等数量保持不变。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T18:10:49.220

简单的预过滤器用于消除坐标明显位于三角形角范围之外的任何点。例如

```
 a
+
|\
| \ b
|c \
+---+  d 
```

A和D显然在外面。A 的 Y 坐标远高于三角形的最大 Y，而 D 显然超出了三角形的最大 X。

剩下 B 和 C 进行测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T18:31:46.950

您还可以使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)来加速计算。

计算三角形的四叉树（以任意分辨率停止），并为每个节点（正方形）存储一个标志，说明该节点是完全在三角形内部、完全在外部还是部分在三角形内部。部分位于三角形内部的节点可能有子节点（取决于深度）

对于每个点，遍历四叉树。如果我们访问一个完全在三角形外部或内部的节点，我们就准备好了。如果我们不确定我们是否在三角形中（节点部分在三角形内）并且当前节点有子节点，我们会递归地测试它的子节点。如果我们点击了部分位于三角形内部的叶节点，请进行分析点 - 三角形包含检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T20:47:37.127

首先，通过 y 坐标和 y 坐标 x 坐标对列表中给出的点进行排序。现在从最低 y 坐标下方开始（想象一条与 x 轴平行的线）并将其向上移动 1 个单位，您还可以得到由三角形端点形成的线段方程。现在按照 Marc B 的建议消除一些明显的点。对于与您的假想平行线到 x 轴的平行线具有相同 y 坐标的其余点，每次向上移动一个单位步长，检查它们是在三角形内部还是外部，通过 put在连接三角形端点的线方程中。您可以通过在您之前根据 y 坐标排序的坐标列表上进行二进制搜索来轻松地使这些点具有相同的 y 坐标。这样，您的算法对每个查询都采用 O(Yrangeoftriangle*nlogn) 。ALSO 这个问题在 codechef long 上问得很好。

# c - 使用 qsort 在 C 中输出排序文件

> ID：14757922
> 
> 赞同：0
> 
> 时间：2013-02-07T18:05:18.190
> 
> 标签：c

从文件中读取字符串并使用 qsort 打印排序后的输出。所以我写了这样的东西：

```
int main()
{
  int n=0;
  int size=1;
  File *fp = fopen(args[0],"r");
  int c;
  char* inputFile;
  inputFile = char* malloc(size);
  if(fp==0){
    fprintf(stderr, "Cannot open file!\n");
    return -1;
  else{
    do{
      c = fgetc(fp);
      if(size==1){
        inputFile[n]=c;
      }
      else{
        inputFile = char* realloc(inputFile, size+1);
        inputFile[n]=c;
      }
      n++;
      size++;
  }while(c!=EOF);
  qsort(inputFile, 1, size, compare);//I have implement the compare function correctly
  n=0;
  while(n<size){
    while(input[n]!='\0'){
       printf ("%d ",inputFile[n]);
       n++;
    }
    n++;
  }
  return 0;
} 
```

所以，如果输入文件是'\0vaaa\n\0ba\0\nabc'，程序应该输出打印：

```
abc
ba
vaaa 
```

但是，我的代码根本不起作用。我检查了比较方法是否返回正确的结果。另外，我只是想知道我是否正确实现了 malloc-realloc？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:09:06.317

你想打印字符串，所以替换：

```
printf ("%d ",inputFile[n]); 
```

和

```
printf ("%s ",inputFile[n]); 
```

但是您的代码中可能还有其他问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:14:30.010

首先，最好只`mmap(2)`将文件放入内存而不是痛苦地读取它，但是哦，好吧。

不要投射结果`malloc(3)`及其同类。Unneded，可能会掩盖错误。

`qsort(3)`对数组（*固定*大小的元素）进行排序。创建一个类似 的数组`char *line[]`，将其设置为每个元素都指向相应的行。我的 qsort(3) 手册页（来自 Linux 手册页）有一个这样做的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:17:56.623

啊，我看到你的代码中有很多错误。

请参阅这个*小*示例（与 C99 编译器兼容）。请注意，这只是您的程序的一部分。我没有`qsort`在这个中使用过。

```
#include <stdio.h>

int main(int argc, char **argv)
{
  int i, length;
  int j = 0;
  FILE *f = fopen("nullfile.bin","r");
  while((i = fgetc(f)) != EOF) j++;
  rewind(f);
  int array[j];
  length = j;
  j = 0;
  while((i = fgetc(f)) != EOF)
    array[j++] = i;
  fclose(f);
  for(i = 0; i < length; i++){
    if(array[i] == '\0') { printf("\n"); continue; }
    printf("%c", array[i]);
  }
  return 0;
} 
```

我完全摆脱`malloc()`并使用可变长度数组。这样代码就简单多了。

# android - 谷歌驱动器 API 的 gson 或 jackson

> ID：14757925
> 
> 赞同：0
> 
> 时间：2013-02-07T18:05:51.133
> 
> 标签：android, google-drive-api

Google Drive API 带有多个版本的 google-http-client-...

一个使用gson，另一个使用jackson。

目前，我的应用程序尚未决定使用哪个 JSON 解析器。请问，官方推荐的是gson还是jackson？就个人而言，我更喜欢 gson，因为它体积小。

![在此处输入图像描述](../Images/74898a2a7624418965e55ac1e838fda3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:09:13.480

我是杰克逊的忠实粉丝。

我使用过 Gson、Jackson 和 org.json 解析器。它们都很好，但我喜欢 Jackson 的 api 效果最好的方式。

# java - 在 JavaFX 中，我应该使用 CSS 还是 setter 方法来更改 UI 节点上的属性？

> ID：14757931
> 
> 赞同：9
> 
> 时间：2013-02-07T18:06:02.590
> 
> 标签：java, javafx-2

有两种方法可以在我的 UI 节点（标签、按钮等）上设置属性

我可以使用这样的东西：

```
Button b = new Button("Sample");
b.setTextFill( Paint.valueOf("red") );
b.setTextAlignment( TextAlignment.CENTER ); 
```

或者我可以做一些等效的事情：

```
Button b = new Button("Sample");
b.setStyle("-fx-text-alignment: center; -fx-text-fill: red"); 
```

我想知道的是，出于任何原因（个人口味除外），这些方法中的一种是否更可取？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-07T19:26:06.293

这个问题的答案确实有点个人品味，但有一些我认为有用的一般经验法则。

JavaFX 中的四个样式选项是：

1.  css 样式表。
2.  从代码发出的 css setStyle 命令。
3.  用于样式的java代码。
4.  用于样式的 fxml 属性。

我的建议是：

1.  几乎所有的样式都使用 css 样式表。
2.  在您拥有数千个节点或您个人更喜欢 API 提供的类型安全和易于调试功能的地方使用 Java API 调用。
3.  仅当您需要*动态*更改*只能*使用 CSS 设置且*无法使用 API*或样式表设置的样式时才使用 setStyle。
4.  不要通过 fxml 应用样式。

使用 css 样式表进行样式设置的优点是：

1.  您可以将样式与代码分开。
2.  您可以轻松地定义多个样式表并在运行时将它们更改为进出，以使您的应用程序具有不同的外观。
3.  您正在使用专门为样式设计的语言。
4.  您可以在[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)等设计工具中应用样式表。

确实，如果您使用的是可视化设计工具，最后一点很重要——您确实需要使用 css 样式表来充分利用它。如果您在代码中而不是在 css 样式表中应用样式，那么当您尝试在可视化设计工具中设计应用程序时，您将无法真正看到应用程序的外观。如果您通过 fxml 属性应用样式，那么您的 fxml 将变得笨拙，因为它定义了应用程序的结构和布局以及它的样式 - 通常最好将这些问题分开。

我有时在我的代码中使用 setStyle 调用，但主要是因为懒惰而不是因为它是推荐的方法。

使用 setStyle 动态更改样式的需要应该是非常有限的情况。例如，在 JavaFX 2.2 中，您不能通过 API 设置区域的背景颜色。您可以使用样式类对其进行设置。但是如果你想动态地将背景颜色设置为用户选择的颜色，那么你可以使用这样的 setStyle 方法`button.setStyle("-fx-text-fill: " + userColor.toString() + ";");`。所以，真的很专业。

另请注意，在 JavaFX 8 中，一些只能在 JavaFX 2.2 中通过 css 完成的事情（例如设置区域背景）将能够通过 Java API 在代码中完成。对于上面给出的为区域背景设置用户填充颜色的示例，如果使用 JavaFX 8，则使用 Java API 将是首选方法。

就各种用例的性能影响而言。我的理解（来自论坛中 JavaFX css 实现维护者的评论）在大多数情况下，从最高性能到最低性能的性能顺序如下所示：

1.  直接 API 调用。
2.  通过 FXML 样式。
3.  通过 styleclass 应用的样式。
4.  setStyle 调用。

请注意，JavaFX 中的 css 应用程序设计得非常高效，因此在许多情况下，性能并不是主要考虑因素。我的猜测是，只有当你有数千个节点被设置样式时，使用 css 才会对性能产生重大影响，尽管我没有确凿的数据来支持这个猜测。

在过去，我看到一些 JavaFX 程序员的评论，他们不想使用 css，而是更喜欢使用 JavaFX API 来为他们的应用程序设计样式。给出的原因是为了更容易调试、使用单一语言的所有内容、更好地与 IDE 集成以帮助处理方法名称、编辑和编译时静态类型检查等。如果您更喜欢使用 Java API 而不是 css 进行样式设置由于您自己的代码中的这些原因，就目前而言，这很好。但是您根本无法仅使用 Java API 完成您需要的所有样式设置。

css 的使用以及如何在 JavaFX 中使用它的知识对于精通 JavaFX 技术至关重要。主要原因是JavaFX中的所有核心控件都是css样式的。即使是最简单的 JavaFX 应用程序通常也会使用这些控件，如果您希望能够自定义它们的外观，则需要了解 css（即使只是阅读标准的 JavaFX css 样式表，以便了解标准控件的样式）。当涉及到自定义标准控件时，通常会更容易应用 css 自定义样式表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T19:25:42.640

我想这可以进行辩论，但在我看来是回去看看你希望完成什么。如果你打算改变你的风格，在外部`CSS`文件中定义它会非常干净。然后，如果你在路上改变你的风格（或允许用户改变他们的风格），它会在一个地方改变。

```
Button b = new Button("Sample");
b.setStyleClass("myClass"); 
```

`JavaFX``MVC`用一种方法效果很好。样式肯定会落入视图中。把所有东西都放在一个地方。为什么不把它放在那里？

另外，是什么让你的代码看起来更干净？更容易阅读？由您或其他人在路上维护起来有多容易？

# wordpress - Wordpress 复制网站

> ID：14757933
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:13.167
> 
> 标签：wordpress, settings

大家好，我最近复制了一个博客，两者都有自己的数据库：

原网站： [http ://sinkholedamageblog.com/](http://sinkholedamageblog.com/)

网站的新副本：http: [//sinkholedamageblog.com/tennessee/](http://sinkholedamageblog.com/tennessee/)

我现在有链接问题。当我点击时，一切似乎仍然指向原始目录。

我已经梳理了数据库表中的所有字段并运行了一个查询以用新的 url 替换旧的 url。

我还对所有主题文件进行了搜索，但没有使用旧网址显示任何内容。

关于在表“wp_options”中查看或更改什么的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:48:28.247

您是否尝试过遵循本指南？[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

您将需要遵循“当您的域名或 URL 更改时”

基本上，您想在将文件移动/复制到新位置之前对 Wordpress 常规选项进行一些更改。

即在常规设置中，将站点地址（URL）：更改为新的url，点击保存，移动文件。

完成后，您需要再次登录 wordpress 管理员并更新永久链接。

所有这些说明都在我上面列出的链接中。如果您需要更多具体帮助，请告诉我。

ps 它说，更新所有链接的查询应该只在 wp_posts 表中完成，因为许多主题和小部件存储带有标记的 URL 长度的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:00:33.810

我总是在 wp_options 中手动更改 siteurl 和 home ，如有必要，其余的[这个](http://wordpress.org/extend/plugins/velvet-blues-update-urls/)插件。

# bash - 为什么 Filezilla 和 Putty 的目录列表不同？

> ID：14757935
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:13.447
> 
> 标签：bash, putty, ls, filezilla

帮助 我是 bash 新手所以我使用 Filezilla 在 Godaddy 登录我的托管帐户 ftp，我的目录结构是这样的：

```
..
access (directory)
cgi (directory)
js (directory)
kml (directory)
stats (directory)
test (directory)
(and a bunch of files) 
```

然后我使用 Putty 并从 -bash-3.25$ 提示符 ls 登录：

```
data  error logs  htconfig  html  site  tmp 
```

主目录是`/var/chroot/home/content/48/10443756`

有人可以解释为什么这些不同吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:24:19.117

原因必须是：**您列出了不同的目录（或在不同的主机上）**

在两者上执行`pwd`（ssh & ftp）你会看到不同

# git - 解决 git rebase 问题

> ID：14757936
> 
> 赞同：4
> 
> 时间：2013-02-07T18:06:16.410
> 
> 标签：git

同事已将他的更改签入到我们共同工作的分支。我先做了一个`git add and git commit`然后我做了一个`git pull --rebase`
说有一些冲突，所以我打开了一个文本编辑器并解决了这些冲突，然后我又做了一个`git add . and git commit`然后`git rebase --continue`

但此时我收到此消息，如果我再次说 git rebase --continue 我会收到相同的消息。坚持这一点，下一步我应该做什么？

![在此处输入图像描述](../Images/f777e05daa17921856f1a0c9136e965e.png)

![在此处输入图像描述](../Images/d1f415fd7c47e305a37a95c54a99540a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T18:34:49.537

我认为您的错误是`git commit`在解决变基后运行的。

当您遇到冲突时，您应该执行以下操作：

1.  解决冲突
2.  暂存文件 ( `git add ...`)
3.  继续变基。( `git rebase --continue`)

步骤 2 和 3 之间无需提交。

# google-maps-api-3 - 尝试在地图上绘制多边形时，多边形绘制光标挂起

> ID：14757939
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:20.243
> 
> 标签：google-maps-api-3

将您的消息更改为以下内容：

我已经使用 gmaps 绘图库创建了一个映射应用程序。该系统是完整的，它似乎工作得很好，但我有一个小问题。当用户使用多边形工具绘制时，光标会挂起。您将看到一条红线正在创建，然后它将停止绘制。

我已经确定，如果您单击多边形绘制工具并将 + 光标从页面顶部移动到底部，您将看到 + 光标定期更改。它在这些区域中产生了绘图问题。

有人可以看看它，让我知道为什么在绘图模式下光标变为指针。

[点击这里](http://www.joomlarealestatewebsites.com/mapsearch)

使用“输入位置或地址”的输入表格进行城市搜索。输入 ross 它将进行自动完成搜索，并为您提供“Rossmoor”的下拉选项，单击名称并运行搜索。通过单击黄色区域内地图上方的“多边形搜索”选项尝试在地图上绘制多边形。您可能需要画几次才能开始出现问题。

感谢您的帮助。

# c++ - 将 IP 地址（本地网络）转换为 UNC 路径

> ID：14757940
> 
> 赞同：1
> 
> 时间：2013-02-07T18:06:20.600
> 
> 标签：c++, winapi, network-programming

Windows UNC 路径通常采用这种形式`\\computerName\share\blah`，但是可以用等效的 IP 地址代替计算机名称，例如`\\127.0.0.1\share`。

如何使用 Windows API 获取此 IP 地址背后的真实计算机名称？我找到了一个使用 winsock ( [`gethostbyaddr`](http://msdn.microsoft.com/en-us/library/ms738521%28v=VS.85%29.aspx)) 的解决方案，但如果可能的话，我希望避免这种依赖。我试过了`NetShareEnum`，`DnsHostnameToComputerName`但没有任何运气

# c# - 尝试通过带有 x:Key 的 ResourceDictionary 通过 StaticResource 访问样式信息

> ID：14757943
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:36.133
> 
> 标签：c#, wpf, xaml

我在 WPF 资源通过 StaticResources 访问外部 ResourceDictionary 中的外部样式信息时遇到问题。

我继承了一堆代码，这些代码在其 WPF 中使用大量 DynamicResources 从 Shared.xaml 获取样式信息。我宁愿它们是 StaticResources 以便设计器视图变得有用。我发现我可以在事物的 .Resources 中添加一个 ResourceDictionary ，除非 WPF 中已经有一个 .Resources 使用，否则它可以正常工作。在那种情况下，我被告知我需要将 ax:Key 添加到我的 ResourceDictionary。我这样做了，只是现在我不知道如何使用该密钥静态查找资源。

最小的例子：

```
<UserControl x:Class="myClass"
  ...>
  <UserControl.Resources>
    <ResourceDictionary x:Key="Shared.xaml" Source="/ExteralResource;component/Shared.xaml"/>
    <BooleanToVisibilityConverst x:Key="BoolToVis">
  </UserControl.Resources>

  <TextBlock Background="{StaticResource BrushFromSharedXAML}" /> <!-- Never finds BrushSharedXAML -->
</UserControl> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:15:48.617

```
<UserControl.Resources>
  <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
          <ResourceDictionary Source="/ExteralResource;component/Shared.xaml"/>
      </ResourceDictionary.MergedDictionaries>
      <BooleanToVisibilityConverst x:Key="BoolToVis">
  </ResourceDictionary>
</UserControl.Resources> 
```

不过，请注意，在每个用户控件中执行此操作会占用大量 RAM，因为您实际上是在运行时为此控件的每个实例创建 Shared.xaml ResourceDictionary 的新实例。你应该看看[SharedResourceDictionary](http://www.wpftutorial.net/MergedDictionaryPerformance.html)

# ruby-on-rails - 出现 Select dynamic on change other select Rails

> ID：14757945
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:38.157
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery, ruby-on-rails-3.1

进行动态选择时出现错误。当我更改我的选择时，我的 ajax 不起作用。

这是视图代码：

```
<%= select_tag 'cost', options_for_select(Cost.all.map { |c| ["#{c.types}", c.id] }),:id => "cost_select" %>

<script type="text/javascript">
$(document).ready(function(){
    $("#cost_select").live('change',function(){
      $.ajax({
        url: "finances/cost_type",
        type: "GET",
        data: {'cost=' + $('#cost_select option:selected').value() },
      })
    });
});
</script> 
```

我是我的财务总监，我有这个：

```
def cost_type
  @places = Place.find_by_cost_id(params[:cost])
  respond_with @places
end 
```

我制作了`cost_type.js.erb`文件，我的回复是在 js 中。

我的问题是，当我更改选择标签时没有激活任何操作，我的搜索中的代码问题如何，我发现此代码有效，但问题是什么？

更新：

我的 routes.rb 包含：

```
get "finances/cost_type" => "finances#cost_type" 
```

* * *

我用以下方法解决了我原来的问题：

```
$(document).ready(function(){
    $("#cost_select").change(function(){
      $.ajax({
        url: "finances/cost_type",
        type: "GET",
        data: {cost: $("#cost_select option:selected").val() },
      })
    });
}); 
```

有了这个，我收到了一个有效的回复（我通过萤火虫验证了）：

```
$("#cost_select").after("<select id="from_money" name="from_money"><option value="2">Luz</option></select>
"); 
```

但是，数据没有出现在我的视图中。我试着把它放在不同的地方`<div>`，但`<select>`不会出现。

我不知道是什么问题，请给我任何可能的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T02:24:37.690

将您的 javascript 更改为

```
$(document).ready(function(){
  $("#cost_select").live('change',function(){
    $.ajax({
      url: "/finances/cost_type",
      type: "GET",
      data: { cost: $('#cost_select').val() }
    })
  });
}); 
```

财务之前的额外费用`/`确保您使用的是绝对路径。`data`正如其中一条评论指出的那样，该部分也是错误的，但这是一个更简洁的版本。

# drupal - 用于缩放打印和保存的 Drupal 模块

> ID：14757947
> 
> 赞同：0
> 
> 时间：2013-02-07T18:06:39.017
> 
> 标签：drupal, module, drupal-7, views

我想问一下 Drupal 上的模块。我需要添加“缩放”、“打印”和“保存”功能。我确信必须有一个模块来处理这个。关于我应该使用哪个模块有什么解决方案吗？有关信息，我正在使用 Drupal 7，需要将功能添加到视图页面。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:22:47.910

您可以使用此模块进行打印：[http](http://drupal.org/project/print) ://drupal.org/project/print 这也提供了将文章保存为 pdf 并通过电子邮件发送的规定。

# javascript - 为什么我的表单没有使用 jQuery .submit() 发布？

> ID：14757948
> 
> 赞同：1
> 
> 时间：2013-02-07T18:06:40.020
> 
> 标签：javascript, jquery, jquery-ui

我正在开发一个系统，允许用户将书籍添加到他们的图书馆。我正在使用一个 jquery UI 对话框，并使用该脚本的前半部分将大约 20 行插入到数据库中。

然而，正如我在下半场突然添加的那样，帖子信息没有出现在发布的页面上，我完全不知道为什么。

这应该是一个快速添加，结果变成了一个令人头疼的问题。

**形式：**

```
<form id="addbookform" action="../models/Books/addBook_submit.cfm" method="POST">
<div style="display: none;" id="addBook" title="Add a Book to Your Library">
    <input type="hidden" id="InputType" name="InputType" value="Add"/>
    <input type="hidden" id="bookempID" name="bookempID"/>

    <label class="labelstyle" >ISBN:</label>
    <input type="text" maxlength="17" id="ISBN" name="ISBN">

    <label class="labelstyle" >Title:</label>
    <input type="text" maxlength="100" size="50" id="Title" name="Title">*

    <label class="labelstyle">Author's First Name:    </label>
    <input type="text" maxlength="50" id="AFName" name="AFName">

    <label class="labelstyle">Author's Middle Name:</label>
    <input type="text" maxlength="50" id="AMName" name="AMName">

    <label class="labelstyle">Author's Last Name:</label>
    <input type="text" maxlength="50" id="ALName" name="ALName">*

    <label class="labelstyle">Date Read:</label>
    <input type="text" id="DateRead" name="DateRead">
</div>
</form> 
```

**Javascript：**

```
function addBook() {
  $("#addBook").dialog({
    autoOpen: true,
    width: ($(document).width()*.55),
    height: ($(document).height()*.7),
    modal: true,
    buttons: {
              "Add Book": function() {
                          //checkBook();
                          $('#addbookform').submit();
                          },
              Cancel: function() { $(this).dialog("close"); }
    }
  });
} 
```

在我开始构建之前，上面的部分正在工作`checkBook()`。但是，现在它不再起作用了。

编辑：

表格由以下人发起：（ `<input type="button" class="buttonstyle" value="Add Book" onclick="addBook()" />` 这有效）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:43:36.437

I think your form must be "visible" in order for the elements to be posted. jQuery can certainly see and access all of the elements regardless of css Display type, but I believe the "submit" action requires the elements that are getting posted to the server be visible. I noticed all the form elements you are attempting to submit are inside of a DIV element with the css property of Display:none;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:32:15.057

在我看来，您正在将提交事件绑定到代码中其他地方的表单。

因此，您可以尝试在不使用 jQuery 的情况下提交表单。

```
$('#addbookform')[0].submit(); 
```

或者取消绑定可能在表单中的任何事件。

```
$('#addbookform').off().submit(); 
```

# php - 在 PHP 中关闭魔术引号似乎不起作用

> ID：14757963
> 
> 赞同：0
> 
> 时间：2013-02-07T12:13:20.610
> 
> 标签：php

我试图在 PHP 中关闭魔术引号，但无法将其禁用 - 我在 /usr/local/lib/php.ini 中设置了以下内容并重新启动了 Apache，但它没有任何区别。

```
; Magic quotes

; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

phpinfo 确认这些都设置为关闭。

```
magic_quotes_gpc Off Off
magic_quotes_runtime Off Off
magic_quotes_sybase Off Off 
```

然后我尝试添加

```
php_flag magic_quotes_gpc off 
```

到 htaccess ，但这给出了 500 Internal Server 错误 - 在 error_log 中查看没有添加任何内容来告诉我为什么会发生这种情况。

服务器使用 CPanel/WHM 运行 Centos 5.8 64 位，前端是 Wordpress，后台有自定义 PHP 应用程序。PHP 版本为 5.3.18，加载的配置文件为 /usr/local/lib/php.ini

我认为它不起作用的原因是以下消息是从 MySQL 中提取的，它在添加到数据库之前应用了 mysql_real_escape_string、addslashes 和 htmlspecialchars。

原来的消息是：

```
This is a "how to" question. I don't think it is covered in the notes - sorry if I've missed it. 
```

它被添加到 MySQL 中：

```
This is a &quot;how to&quot; question. I don\'t think it is covered in the notes - sorry if I\'ve missed it. 
```

当它显示在屏幕上时，它显示为：

```
This is a \\"how to\\" question. I don\\\'t think it is covered in the notes - sorry if I\\\'ve missed it. 
```

当然后将 stripslashes 应用于此时，它变为：

```
This is a \&quot;how to\&quot; question. I don\'t think it is covered in the notes - sorry if I\'ve missed it. 
```

我做错了什么或者我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:49:45.937

`\&quot;`不是魔术引号或addlashes() 的结果。

另外，我想不出一个标准的 PHP 引用函数可以用斜杠替换双引号`\&quot;`并用斜杠转义单引号。你的代码有更深层次的错误。

# javascript - Google Earth API - 即使 KML 文件没有时间元素也设置时间原语

> ID：14757969
> 
> 赞同：1
> 
> 时间：2013-02-07T18:07:51.537
> 
> 标签：javascript, kml, google-earth-plugin

我正在尝试通过 Google Earth API 加载 KML 文件并拥有自己的时间滑块控件。

为了确定我是否需要启用/显示我自己的自定义时间滑块，我正在查询谷歌地球 TimeControl 以查看是否设置了任何开始和结束时间。

如果我加载具有时间跨度的 KML，我会看到设置了开始时间和结束时间，并且谷歌地球时间滑块出现在谷歌地球中。

如果我然后加载另一个 KML 文件，但这次没有任何时间跨度，谷歌地球不会正确显示时间滑块，但是当我通过谷歌地球 API 询问 TimeControl 时，它仍然具有第一个 KML 的开始和结束时间。

我已附加（通过 kmltree bind() 方法）一个函数，该函数在 KML 加载后被调用。我询问 TimeControl 的正是这个函数。

为什么 TimeControl 仍然包含第一个 KML 的开始和结束时间？我检查太早了吗？

Javascript代码是：

```
 tree = kmltree({
                        url: kmlUrl,
                        gex: gex,
                        element: $('.tree3'),
                        mapElement: $('#map3d'),
    setExtent: true,
                        restoreState: false
                });

$(tree).bind('kmlLoaded', function(event, kmlObject)
{
    console.log("In kmlLoaded function");

    time = ge.getTime();

    if(ge.getTime().getControl())
    {
        console.log("We have a time primitive.");
        control = time.getControl();
        extents = control.getExtents();

        // We have some time elements
        beginTime = extents.getBegin();
        console.log("beginTime is: " + beginTime.get());

        endTime = extents.getEnd();
        console.log("endTime is: " + endTime.get());

        mainwindow.enablePlaybackWidgets(beginTime.get(), endTime.get());
    }
    else
    {
        console.log("We do NOT have a time primitive.");
        mainwindow.enablePlaybackWidgets("", "");
    }
        });

                tree.load() 
```

我将它与 QT 应用程序结合使用，并在确定新加载的 KML 中是否存在时间跨度后，它会调用 QT 主窗口对象并相应地启用/禁用我的自定义时间滑块小部件。

加载第二个 KML 时，我希望没有 TimeControl（因为 Google Earth 没有显示），因此输入上面代码的“else”部分。不是这种情况。TimeControl 仍然存在，并且具有加载的第一个 KML 文件的开始时间和结束时间。

任何帮助将不胜感激。

谢谢

# xml - 函数 XQuery 中的嵌套返回

> ID：14757971
> 
> 赞同：0
> 
> 时间：2013-02-07T18:07:54.903
> 
> 标签：xml, xpath, xquery

我希望函数 XQuery 从文件 tratta.xml 的实例返回 id_fermata，其中文件 tratta.xml 的 id_linea 与 linea.xml 的 id 匹配

文件 linea.xml 是：

```
<root_linea >

 <linea id="ID_180">
    <nome>180</nome>
    <tipologia>circolare</tipologia>
    <e_ricorsiva>true</e_ricorsiva>
    <orario_prima_partenza>09:20:00</orario_prima_partenza>
    <cadenza_mattina>20</cadenza_mattina>
    <cadenza_pomeriggio>20</cadenza_pomeriggio>
    <cadenza_sera>20</cadenza_sera>
    <cadenza_notte>20</cadenza_notte>
    <id_tratta>ID_1</id_tratta>
    <id_corsa_effettiva>ID_1</id_corsa_effettiva>
    <id_corsa_effettiva>ID_2</id_corsa_effettiva>
 </linea>
</root_linea> 
```

文件 tratta.xml 是：

```
 <root_tratta>         
              <tratta id="ID_1">
               <id_fermata> ID_1 </id_fermata>
               <id_linea>ID_180</id_linea>
               <tratta_successiva>ID_2</tratta_successiva>
              </tratta>
          </root_tratta> 
```

XQuery 的功能是：

```
 declare function local:retrivalInfo() as element()* {
          let $id := request:get-parameter("id", '') 
          let $linee := doc("linea.xml")/root_linea/linea
          for $lin in $linee
          where $lin/nome = $id 
          return(
            let $tratte := doc("tratta.xml")/root_tratta/tratta
            for $tra in $tratte 
            where $tra/id_linea=$lin/@id
           return(
              <tr>
                <td><font color="white">{data($tra/id_fermata)}</font></td>
              </tr>
           )
        )        
      }; 
```

这个函数的问题是什么都看不到。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:21:40.723

对我来说很好。id = 180 的输出是`<tr> <td><font color="white"> ID_1 </font></td> </tr>`

也许您没有在 get 请求上设置正确的 id 参数？或者它在服务器上找不到文件？或者文件中的某些模式使 id 不可比较（如果存在类似的东西）？

如果将 where 替换为 []，您还可以大大简化函数。然后你甚至不需要使用两个返回：

```
 declare function local:retrivalInfo() as element()* {
      let $id := request:get-parameter("id", '') 
      for $lin in doc("linea.xml")/root_linea/linea[nome = $id]
      let $tra := doc("tratta.xml")/root_tratta/tratta[id_linea=$lin/@id]
      return(
          <tr>
            <td><font color="white">{data($tra/id_fermata)}</font></td>
          </tr>
       )

  }; 
```

（使用正确的模式，您甚至可以使用 element-with-id 函数）

# java - 将抽象类放在包含其派生类的同一个包中是不好的编程习惯吗？

> ID：14757973
> 
> 赞同：4
> 
> 时间：2013-02-07T18:07:59.377
> 
> 标签：java, package, abstract-class, derived-class

假设 A、B、C 派生自 AbstractBaseClass 并且它们都是同一个 java 项目的一部分，它们的包结构形式...

```
 package com.whatever.###
 AbstractBaseClass.java

 package com.whatever.###.###
 A.java
 B.java
 C.java 
```

...通常比以下形式的包装结构更受欢迎...

```
 package com.whatever.###.###
 AbstractBaseClass.java
 A.java
 B.java
 C.java 
```

?

...或者很少有人可能关心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:15:09.143

我编写了一个相当复杂的应用程序应用程序，它使用了第一个示例，这就是我如何证明设计的合理性。在我的案例中，有一个与承保案例定价相关的通用界面，但有几个供应商可以提供不同的 Web 服务来填充实际数据。这是包结构

```
com.example.pricing
 \IPricingProvider.java
 \AbstractPriceProvider.java
com.example.pricing.vendorA
   \PricingEngine.java
com.example.pricing.vendorB
   \PricingEngine.java
com.example.pricing.vendorC
   \PricingEngine.java 
```

然后在我的代码中，我使用`import`来连接我想要的引擎。像这样：

```
import com.example.pricing.*;
import com.example.pricing.vendorB.*;

IPricingProvider provider = Engine.create(); 
```

对我来说，优势是能够为每个供应商提供复杂而混乱的实现（两个是基于 rest 的，一个是使用 Web 服务，`wsimport`因此生成了很多 Java 文件），并且不会让 Eclipse 自动完成看起来像一场噩梦。此外，它还使将单个供应商移交给不同的开发人员变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T18:24:52.863

令人惊讶的是，答案是。这取决于。

如果你打算做两个兄弟后代，那么每个（如三个）一个文件是有意义的。如果它们很小并且/或者您几乎总是同时使用它们（例如目录和文件），那么无论如何都要将它们全部合二为一，这是一个务实的论据。

如果您正在构建一些深层继承层次结构，其中只有最终后代具有可用功能（类越抽象，它做的越少），那么将它放在单独的文件中是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:20:28.903

这实际上是一种很好的做法。太多的包会很快变得混乱。将实现类保存在同一个包中可以避免额外的导入语句，并且可以在应用程序代码库增长时轻松找到抽象类。例外情况是，您有更大的实现类组，这些实现类都从抽象类扩展而来。因此，例如，如果您有一个 MySQL 实现和一个 Mongo 实现的多个抽象类，您可能希望将它们放在单独的子包中。就像是

```
com.foo.data  <--- abstract classes
com.foo.data.mysql  <-- impl
com.foo.data.mongo  <-- impl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:20:51.327

包结构有两个有时是不一致的目的。

1.  让学习您的 API 和代码的人更容易找到满足他们需求的类。在这种情况下，您希望将类似的东西组合在一起，并使用包名称，让浏览 Javadoc 的人可以清楚地看到在哪里查找。这主张使用对 API 客户端有意义的具有广泛划分的少量软件包。
2.  允许类访问彼此的包私有 API。这证明了许多紧密耦合类的小组。

像包这样的大规模组织不应该依赖于当前的实现细节，所以我更喜欢（1）而不是（2）。

深层层次结构很难学习，所以如果添加名称元素不能使学习 API 变得更容易，也不能帮助人们过滤掉与他们当前任务无关的部分，那么就把它排除在外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T18:22:12.603

我认为这取决于哪个部分对客户更重要：超类还是子类？

当您首先考虑子类并将一些公共部分重构为超类时，通常会出现后者。那么这个超类应该在同一个包中，并且不公开可见，就像路易斯在他的评论中所说的那样。如果客户需要查看子类的类型，那么您倾向于使用这种模式。

但是，当您从实现中抽象出来并且客户端通常只使用 Jason 的回答中的超类时，那么您应该遵循将每个子类放入其自己的包中的策略。通常这些子类需要更多与外部代码无关的类，因此为它们提供自己的包是一件好事。

# java - 如何在运行时从我的 JSF 控制器访问位于“src/main/resources”文件夹中的 css 文件

> ID：14757975
> 
> 赞同：1
> 
> 时间：2013-02-07T18:08:02.893
> 
> 标签：java, jsf, itext

我需要能够从后端 java 控制器访问存储在 src/main/resources/styles 下的 Web 应用程序的 css 文件。我想用它们用 iText 创建 PDF 输出。

换句话说，我想做这样的事情：

```
CssFile cssFile1 = XMLWorkerHelper.getCSS(new FileInputStream("src/main/resources/styles/my.css")); 
```

但是，我显然没有正确处理这个问题，因为我收到了这样的异常：

```
java.io.FileNotFoundException: styles\standard.css (The system cannot find the path specified) 
```

如何在控制器中检索这些文件？

我试过这个，但它不起作用，同样的错误：

```
String rcp = econtext.getRequestContextPath();
CssFile cssFile1 = XMLWorkerHelper.getCSS(new FileInputStream(rcp + "src/main/resources/styles/my.css")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:18:30.780

对`FileInputStream`本地磁盘文件系统进行操作，所有相对路径都是相对于当前工作目录的，当前工作目录是在JVM启动时打开的本地磁盘文件系统文件夹。这绝对不是文件夹的根`src/main/resources`目录。

鉴于`/src/main/resources`可识别为类路径资源根目录的 Maven 文件夹结构，那么您只需将其作为类路径资源获取即可`ClassLoader#getResourceAsStream()`。

```
InputStream input = getClass().getResourceAsStream("/styles/standard.css");
// ... 
```

或者，如果该类可能打包在由不同类加载器加载的 JAR 中。

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("styles/standard.css");
// ... 
```

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream/2308388#2308388)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T18:21:07.400

那是因为 JSF 是一个 Web 应用程序。现在移动`styles/my.css`到`WEB-INF/styles/my.css` 这确保您在控制器中访问的文件是 WebApp 的一部分

现在您可以使用

```
XMLWorkerHelper.class.getResourceAsStream("styles/my.css") 
```

# magento - 如何检索在 Magento 中订购简单产品的分组产品的 ID？

> ID：14757977
> 
> 赞同：1
> 
> 时间：2013-02-07T18:08:03.607
> 
> 标签：magento, product, transactional-email

让我从一些背景开始。我在 Magento Enterprise Edition 1.8.0.0 中运行，我对 Magento Development 比较陌生。

我在 Stack Overflow、论坛和博客上看到过类似的问题，但答案往往与我自己想出的类似：

```
$parentIds = (Mage::getModel('catalog/product_type_grouped')->getParentIdsByChild($_item->getProductId());
$parentId = $parentIds[0]; 
```

确实，这将检索父 ID，但并不总是检索*正确**的*ID 。在我的例子中，“正确的”父 ID 是属于分组产品的那个，一个简单的产品被放置在购物车中并最终被订购。

 *我试图将这个逻辑放入的文件是：

```
my_template_path/email/order/items/order/default.phtml 
```

最终目标是在订单确认交易电子邮件中检索正确分组产品的缩略图。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:09:17.760

有关父产品的信息存储在订单项目对象的属性“product_options”中。您可以通过执行以下代码为每个订单元素检索*正确的父 ID：*

```
foreach ($order->getAllItems() as $item) {
    $options = $item->getProductOptions();
    $parentId = $options['super_product_config']['product_id'];

} 
```*

# java - new String() 与文字字符串性能

> ID：14757978
> 
> 赞同：18
> 
> 时间：2013-02-07T18:08:05.373
> 
> 标签：java, string

这个问题在 StackOverflow 上被问过很多次，但没有一个是基于**性能**的。

在*Effective Java*书中，它给出了

> 如果 `String s = new String("stringette");`发生在循环或频繁调用的方法中，可能会不必要地创建数百万个 String 实例。
> 
> 改进的版本如下： `String s = "stringette";`这个版本使用单个 String 实例，而不是每次执行时都创建一个新实例。

因此，我尝试了两种方法，发现性能有了显着**提高**：

```
for (int j = 0; j < 1000; j++) {
    String s = new String("hello World");
} 
```

大约需要**399 372**纳秒。

```
for (int j = 0; j < 1000; j++) {
    String s = "hello World";
} 
```

大约需要**23 000**纳秒。

为什么会有这么大的性能提升？里面有没有*编译器优化*？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-07T18:09:28.613

在第一种情况下，每次迭代都会创建一个新对象，在第二种情况下，它始终是同一个对象，从字符串常量池中检索。

在 Java 中，当你这样做时：

```
String bla = new String("xpto"); 
```

您强制创建一个新的 String 对象，这会占用一些时间和内存。

另一方面，当你这样做时：

```
String muchMuchFaster = "xpto"; //String literal! 
```

String 只会在第一次被创建（一个新对象），它会被缓存在`String`常量池中，所以每次你以它的字面形式引用它时，你都会得到完全相同的对象，这太神奇了快速地。

现在你可能会问......如果代码中的两个不同点检索相同的文字并更改它，难道不会有问题发生吗？！

不，因为您可能很清楚，Java 中的字符串是不可变的！因此，任何会改变 String 的操作都会返回一个新的 String，而对同一文字的任何其他引用都会在他们的途中感到高兴。

这是不可变数据结构的优点之一，但这完全是另一个问题，我会就此主题写几页。

**编辑**

只是澄清一下，常量池不是 String 类型独有的，您可以在此处阅读更多信息，或者如果您在谷歌上搜索 Java 常量池。

[http://docs.oracle.com/javase/specs/jvms/se7/jvms7.pdf](http://docs.oracle.com/javase/specs/jvms/se7/jvms7.pdf)

此外，你可以做一个小测试来把要点带回家：

```
String a = new String("xpto");
String b = new String("xpto");
String c = "xpto";
String d = "xpto";

System.out.println(a == b);
System.out.println(a == c);
System.out.println(c == d); 
```

有了这一切，您可能会弄清楚这些 Sysouts 的结果：

```
false
false
true 
```

因为`c`和`d`是同一个对象，所以`==`比较成立。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T18:27:04.740

性能差异实际上要大得多：HotSpot 可以轻松编译整个循环

```
for (int j = 0; j < 1000; j++)
{String s="hello World";} 
```

不存在，因此运行时为实数 0。但是，这仅在 JIT 编译器启动后发生；这就是*预热*的目的，这是在 JVM 上对任何东西进行微基准测试时的强制性过程。

这是我运行的代码：

```
public static void timeLiteral() {
  for (int j = 0; j < 1_000_000_000; j++)
  {String s="hello World";}
}
public static void main(String... args) {
  for (int i = 0; i < 10; i++) {
    final long start = System.nanoTime();
    timeLiteral();
    System.out.println((System.nanoTime() - start) / 1000);
  }
} 
```

这是一个典型的输出：

```
1412
38
25
1
1
0
0
1
0
1 
```

您可以观察到 JIT 很快就会生效。

请注意，我不会在内部方法中迭代一千次，而是**十亿次。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T18:14:05.557

正如已经回答的那样，第二个从字符串池中检索实例（记住字符串是不可变的）。

此外，您应该检查 intern() 方法，该方法使您能够将 new String() 放入池中，以防您不知道运行时字符串的常量值：例如：

```
String s = stringVar.intern(); 
```

或者

```
new String(stringVar).intern(); 
```

我将添加额外的事实，您应该知道，除了 String 对象之外，池中还存在更多信息（哈希码）：这可以通过字符串在相关数据结构中进行快速 hashMap 搜索（而不是每次都重新创建哈希码）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T18:15:16.713

JVM 维护一个对作为文字的唯一 String 对象的引用池。在您的新 String 示例中，您将使用每个实例包装文字。

见[http://www.precisejava.com/javaperf/j2se/StringAndStringBuffer.htm](http://www.precisejava.com/javaperf/j2se/StringAndStringBuffer.htm)

# android - 如何停止位置监听器

> ID：14757980
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:11.310
> 
> 标签：android, location, listeners

我试图通过获取所有侦听器来获取设备位置：

```
LocationManager locationManager = (LocationManager) myContext.getApplicationContext()
        .getSystemService(Context.LOCATION_SERVICE);

for (String s : locationManager.getAllProviders()) {

    locationManager.requestLocationUpdates(s, checkInterval,
            minDistance, new LocationListener() {

                @Override
                public void onProviderEnabled(String provider) {

                }

                @Override
                public void onProviderDisabled(String provider) {

                }

                @Override
                public void onLocationChanged(Location location) {
                    // if this is a gps location, we can use it
                    if (location.getProvider().equals(
                            LocationManager.GPS_PROVIDER)) {
                        doLocationUpdate(location, true);
                        stopGPS();
                    }
                }

                @Override
                public void onStatusChanged(String provider,
                        int status, Bundle extras) {
                    // TODO Auto-generated method stub

                }
            });

        gps_recorder_running = true;
}

// start the gps receiver thread
gpsTimer.scheduleAtFixedRate(new TimerTask() {

    @Override
    public void run() {
        Location location = getBestLocation();
doLocationUpdate(location, false);
if ((System.currentTimeMillis()-startMillis)>maxCheckTime){stopGPS();}

    }
}, 0, checkInterval); 
```

}

当我想停止侦听器时，问题就来了。我试图取消计时器：

```
gpsTimer.cancel(); 
```

但这并不能阻止听众。我想我必须使用 locationManager.removeUpdates，但是如何停止所有 Listeners？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:11:57.377

您必须保留您注册的所有位置侦听器的列表，然后在完成后对每个侦听器调用 unregister。要么为每个调用重用相同的侦听器，然后注销一次。

## 编辑

```
//Make the following line a field in your class
List<LocationListener> myListeners = new ArrayList<LocationListener>();

for (String s : locationManager.getAllProviders()) {
LocationListener listener = new LocationListener() { .... }; //I'm cutting out the implementation here
myListeners.add(listener);

 locationManager.requestLocationUpdates(s, checkInterval,
            minDistance, listener);
} 
```

# asp.net - ASP.NET 网站定期调用远程 Web 服务

> ID：14757982
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:11.517
> 
> 标签：asp.net, web-services, web-hosting

我正在使用 ASP.NET 开发一个网站，该网站需要每天向远程 Web 服务发送调用以获取结果并将这些结果存储在数据库中。

我的问题是如何按计划执行此操作。

我是否正确地说 Global.asax 中的 Application_Start 方法仅在用户下载 Default.aspx 页面的副本时触发？

我需要确保此 Web 服务调用与对站点本身的调用分开运行，因此在自己的线程中运行，但是如果网站由远程 Web 主机托管，我该如何实现呢？我需要对远程 Web 服务器进行哪些访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:25:12.240

我通过在我的 web-hotel 上设置一个每分钟调用给定页面（例如 cronservice.aspx）的 cronjob 来做到这一点，但是您可以在设置 cronjob 时选择自己的时间间隔。

从 cronservice.aspx 的代码中，您可以做任何您想做的事情。

因此，请检查您的托管环境中是否有该选项。

# php - 带有魔术引号的 JSON 帖子加上数据中的引号字符

> ID：14757983
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:11.513
> 
> 标签：php, json, stringify

我有一个 PHP 脚本，它接受来自其他服务器的 JSON 格式的帖子。有时外部服务器启用了魔术引号，所以为了安全起见，我通过 stripslashes() 传递它。但是，当发布的数据也有引号字符时，我遇到了问题。这也被远程服务器转义，然后我的服务器上的 stripslashes 也错误地剥离了它，从而破坏了 JSON。

例如，我可以轻松地传递并接受以下 JSON：

```
stuff = {"items":["item1","item2"],
"urls":["url1","url2"],
"pics":["pic1","pic2"]}; 
```

但是，这会中断：

```
stuff = {"items":["item_including_quotes1","item_including_quotes2"],
"urls":["url1","url2"],
"pics":["pic1","pic2"]}; 
```

我无法控制远程数组值，它们可以包含单引号和双引号。我确实可以控制他们如何准备发送。目前的 javascript 看起来像这样：

```
encodeURIComponent(JSON.stringify(stuff)); 
```

PHP看起来像这样：

```
json_decode(stripslashes(urldecode($_POST["stuff"]))); 
```

此数据使用 javascript JSON.stringify 和 encodeuricompnent 发布，并使用 PHP json_decode 和 urldecode 进行处理。

我考虑了一个正则表达式，仅当它们出现在括号 [] 之间时才删除反斜杠，但这似乎很笨拙。是否有更优雅的解决方案来仅删除某些斜线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:53:00.757

我在 JSON 结构中的字符串值中传递 HTML 代码，遇到了同样的问题。但是，我不必替换引号，因为 JSON.stringify 给了我一个格式良好的字符串。

我所做的是从这里说明的一个修改功能实现： [http ://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

```
<?php
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
}
?> 
```

这样，它只在启用魔术引号时应用stripslashes，到目前为止它似乎没有破坏我的JSON。

# ios - 引导“必需”表单验证弹出窗口在 ipad（safari 或 chrome）上不起作用

> ID：14757984
> 
> 赞同：4
> 
> 时间：2013-02-07T18:08:15.570
> 
> 标签：ios, ipad, jquery-plugins, twitter-bootstrap, validation

此标记在桌面浏览器上运行良好

```
<form class="form-inline" action="/action/sign-me-up" method="post" onsubmit="return false;">
<input type="email" placeholder="Email" class='email' required title="Join our email list">
</form> 
```

如果我在 input[type=email] 中提交的表单没有有效的电子邮件，我会收到一个弹出窗口，上面写着“请填写此字段”并且表单不会提交。

但是，在 ipad 上，当用户输入电子邮件时，我确实得到了实时验证（红色边框），但如果他们点击提交，我不会得到弹出框。

有没有简单的解决方法，还是我需要使用 jquery 插件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-29T13:13:14.287

该消息是由 HTML5 'required' 属性触发的浏览器默认值。不幸的是，iOS 和许多其他浏览器还不支持它。

[http://caniuse.com/form-validation](http://caniuse.com/form-validation)

我们刚刚遇到了同样的问题，我们用 Webshims 库解决了这个问题 - [http://afarkas.github.io/webshim/demos/](http://afarkas.github.io/webshim/demos/) 它是用 jQuery 编写的，构建在 Modernizr 之上。

# google-drive-api - service.files().list().setQ("sharedWithMe") 不返回我的 Android 应用程序共享的文件

> ID：14757986
> 
> 赞同：1
> 
> 时间：2013-02-07T18:08:28.207
> 
> 标签：google-drive-api

我已成功将文件上传到云端硬盘并插入了另一个帐户的共享权限。这一切都在起作用。但是当我尝试从其他帐户列出要下载的共享文件时，它返回没有文件。

有谁知道如何检索其他用户共享的文件？

这是我尝试过的。

```
private class RetrieveAllShareFiles extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... arg0) {
    Files.List request = null;
    try {
        request = service.files().list().setQ("sharedWithMe");
    } catch (IOException e1) {
    // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    do {
        try {
            FileList files = request.execute();
            filesResult.addAll(files.getItems());
            request.setPageToken(files.getNextPageToken());
        } catch (IOException e) {
            System.out.println("An error occurred: " + e);
            request.setPageToken(null);
        }
    } while (request.getPageToken() != null &&
        request.getPageToken().length() > 0);
    return "Executed";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:09:16.540

使用`drive.files`范围时，您的应用程序将只能访问您使用它创建的文件或用户从 Drive UI 打开的文件。当文件与其他用户共享时，他将无法使用 drive.files 范围看到它。对于这个用例，您应该请求访问整个 Drive 范围。

查看文档以获取有关可用 OAuth 范围的更多详细信息：[https ://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

# php - 使用带有 Codeigniter 的复选框删除对象

> ID：14757987
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:30.437
> 
> 标签：php, forms, codeigniter, checkbox

我已经阅读了很多这样的帖子，但未能找到我的特殊情况。尝试删除选中的复选框。现在您可以提交表单，它会将您带到所有正确的页面，但实际上并没有删除任何内容。

这是我的控制器信息

```
function deleteFolder() {
   if(array_key_exists('deleteMe',$_POST)) {
      $checkbox = $this->input->post['checkbox']; 
      $this->index_model->deleteFolder($checkbox);
   }
 $this->folderdeleted();
} 
```

这是我的模型

```
function deleteFolder($checkbox) {
  $this->db->where('folderName', 'folderName'); 
  $this->db->delete('senior', $checkbox);
return;
} 
```

这是我的看法

```
<!DOCTYPE html>
<?php $this->load->view('partials/page_head'); ?> 
<body>
  <div id="container">
    <div id="top">
      <div class="topcenter">
       <h2><a class="homebtn" href="<?php echo base_url();?>">Home</a></h2>
      </div>
      <div class="navdescription"><span>Delete Page</span></div>
    </div>
      <div class="projectFolders">
      <?php foreach($foldername as $row) { ?>
        <div class="folder">
          <button><?php echo $row->folderName; ?></button>
          <div class="delete">
            <form name="delete" method="post" action="<?php echo base_url(); ?>index.php/home/folderdeleted">    
              <p>
                <input type = "checkbox" id = "check_<?php echo $row->folderName; ?>"/>
                <?php echo form_submit('deleteFolder', 'Delete'); ?>
              </p>
          </form>
          </div>
        </div>
      <?php } ?>
    </div>
  </div><!-- End of container div -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:25:46.390

您的代码中有几个错误。我不确定我是否找到了所有这些以及代码是否有效。

控制器应该是：

```
function deleteFolder() {
   if($this->input->post('checkbox') !== false) {
      $checkbox = $this->input->post('checkbox');
      $this->index_model->deleteFolder($checkbox);
   }
 $this->folderdeleted();
} 
```

模型应该是：

```
function deleteFolder($checkbox) {
  $this->db->where('folderName', $checkbox); 
  $this->db->delete('senior');
return;
} 
```

视图中的输入标签应该是：

```
 <input name="checkbox" value="<?php echo $row->folderName; ?>" type = "checkbox" id = "check_<?php echo $row->folderName; ?>"/> 
```

对复选框的一点警告：如果未选中它们，您将不会在 $_POST 变量中找到任何内容。

# python - Django 反向函数参数

> ID：14757990
> 
> 赞同：2
> 
> 时间：2013-02-07T18:08:35.093
> 
> 标签：python, django

我是 python 和 Django 的新手，正在尝试确定以下代码的工作方式：

```
return HttpResponseRedirect(reverse('poll_results', args=(p.id,))) 
```

特别是 reverse 函数的第二个参数。看起来它正在将 args 的参数设置为等于一个元组。为什么我需要一个额外的逗号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T18:10:29.260

`(p.id)`只是`p.id`在括号中，`(p.id,)`是一个单元素元组。

文档中[带括号的表格](http://docs.python.org/2.7/reference/expressions.html#parenthesized-forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T18:11:19.930

如果一个元组只有一个项目来区分元组和样式括号，则需要尾随逗号。

类似的问题：
[Python tuple comma syntax rule](https://stackoverflow.com/questions/7992559/python-tuple-comma-syntax-rule)
[为什么在字符串后添加尾随逗号使其成为元组](https://stackoverflow.com/questions/3750632/why-does-adding-a-trailing-comma-after-a-string-make-it-a-tuple)

# android - 确定应用程序首次运行

> ID：14757991
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:35.333
> 
> 标签：android

我想确定我的应用程序是否是第一次运行，因此很难绕过它。

首选项或空文件方法不起作用，因为您可以简单地清除应用程序数据或删除空文件。

我也想离线做，所以服务器检查也不起作用。

也许可以在apk的安装中添加一些代码，这样它只会运行一次。

所以我最好的选择是在周围产生很多空文件，并希望用户不会找到它们，但这很混乱。

以前有人做过吗？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:19:34.020

> 首选项或空文件方法不起作用，因为您可以简单地清除应用程序数据或删除空文件。

一种可能性是`BroadcastReceiver`在您的清单中注册一个您实际上并没有用于任何事情的 ,。`PackageManager`在您的应用程序首次运行时，通过和禁用该接收器`setComponentEnabledSetting()`。在以后的运行中，您可以通过和确定是否`BroadcastReceiver`已经禁用。`PackageManager``getReceiverInfo()`

如果用户卸载并重新安装应用程序，应用程序将恢复到原来的状态。有根设备的用户也可以克服这个问题。否则，这应该是相当可靠的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T18:16:02.437

我知道您说过您不想要文件，但是如果您将它们创建为本地内部存储，则用户无法删除它们，因为除非它是根电话，否则他们将无法访问。清除数据“可能”会删除它们。

还有另一种解决方案，但它很长。使用 SQLite 数据库。它是本地的，我认为它不能被删除，否则整个应用程序将崩溃

# c# - Url.Link 需要请求参数？

> ID：14757992
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:35.337
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

如果项目已成功插入，我正在尝试在 web api post 方法上设置位置标头，但问题是如果我尝试从 mvc 控制器调用该 api 操作，它会在 Url.Link 上给我一个异常，说参数“请求” ' 不见了。有没有一种不需要请求就可以生成 url 的方法？

这是网络 api 邮政编码 -

```
public HttpResponseMessage Post (Product product)
{
    ...
    if (addedSuccessfully)
    {
        var response = new HttpResponseMessage {StatusCode = HttpStatusCode.Created};
        var uri = Url.Link("DefaultApi", new {id = product.ProductId});
        if (uri != null)
            response.Headers.Location = new Uri(uri);
        return response;
    }
    return new HttpResponseMessage {StatusCode = HttpStatusCode.Conflict};
} 
```

我是这样称呼它的

```
_productController.Post(product); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:17:24.203

理想情况下，除非您进行单元测试，否则您不应创建 Web API 控制器并开始对其调用操作。控制器的上下文在内部创建时由 Web API 系统初始化。

如果您可以解释您的场景，就像您使用从 Web API 返回的 HttpResponseMessage 所做的那样，那么我可能会提出一种替代方案来解决它。

# jquery - jQuery FullCalendar：更改 allDay 标准以检查字符串而不是 bool

> ID：14757994
> 
> 赞同：0
> 
> 时间：2013-02-07T18:08:35.840
> 
> 标签：jquery, fullcalendar

我正在构建一个获取 JSON 提要并使用它来填充 jQuery FullCalendar 日历的应用程序。

问题是标准之一是“allDay”，它可以是真/1或假/0，我的JSON提要返回“真”/“1”或“假”/“0” - 即 - 字符串

就目前而言，我无法更改 JSON 提要，所以有人知道我可以如何修改 fullcalendar.js 脚本来检查字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:20:21.537

```
eventRender: function(event, element, view) {
    if (event.allDay === 'true') {
        event.allDay = true;
    } else {
        event.allDay = false;
    }
} 
```