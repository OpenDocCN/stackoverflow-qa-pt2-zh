# StackOverflow 问答 12511000-12511999

# facebook - 将照片发布到朋友墙：错误 OAuthException 240

> ID：12511001
> 
> 赞同：1
> 
> 时间：2012-09-20T10:44:20.710
> 
> 标签：facebook, post, photos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:13:10.070

我也收到相同的错误消息。[message] => (#240) 不允许此用户将照片上传到此对象的墙

当您的应用程序用户在应用程序安装时拒绝“代表您发布”权限时，会发生此错误。

在发布之前，我只是检查了 publish_stream 权限。如果获得批准，则在墙上发布，否则将用户重定向到登录 url。（再次显示权限弹窗）

```
$permissions = $facebook->api("/me/permissions");
if( array_key_exists('publish_stream', $permissions['data'][0]) ) {
    // code for actual posting
} else {
    header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream")) );
} 
```

这个对我有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:17:37.853

我遇到了完全相同的问题，而且它恰好是隐私问题。请参阅 Facebook 隐私设置 -> 时间轴和标记 -> 谁可以在您的时间轴上发帖。如果您的朋友设置了“仅限我”，那么您的应用将无法在该朋友的墙上发布任何内容。

# android - 如何使用 monkeyrunner（Python 脚本）启动活动“ACTION_SYNC_SETTINGS”或“ACTION_ADD_ACCOUNT”

> ID：12511002
> 
> 赞同：1
> 
> 时间：2012-09-20T10:44:22.397
> 
> 标签：android, monkeyrunner

我正在尝试开始活动 `ACTION_SYNC_SETTINGS`或`ACTION_ADD_ACCOUNT`包装中[`android.provider.Settings`](http://developer.android.com/reference/android/provider/Settings.html)的活动，但问题是这些活动没有开始。

下面给出了我的代码，它适用于启动活动“设置”，但是当我通过`ACTION_SYNC_SETTINGS`or 更改活动时`SYNC_SETTINGS`；`ACTION_ADD_ACCOUNT`或者`ADD_ACCOUNT_SETTINGS`然后它不工作......

虽然，我也尝试过使用包 com.android.provider.Settings，但它没有用。

我得到的唯一结果是：

```
Monkey Command: wake.

Monkey Command: wake.

Monkey Command: quit. 
```

（我在 API 级别 10 和 15 工作）

请任何人指导我...？

我的代码：

```
import os, subprocess

import sys

import time

import random

import string

import re

from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

device = MonkeyRunner.waitForConnection(99, "emulator-5554") 

package='com.android.settings'

activity='.Settings'

component_name=package + "/" + activity

device.startActivity(component=component_name) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:15:44.920

尝试使用：

```
component = 'com.android.settings/.accounts.AddAccountSettings' 
```

这将打开“添加帐户”窗口，您可以在其中选择企业、电子邮件和 Google。

选择 Google 将启动一个新活动：com.google.android.gsf.login/.AccountIntroUIActivity

要直接进入登录屏幕，请使用：

```
device.startActivity(component = 'com.google.android.gsf.login/.LoginActivity') 
```

# java - GAE 1.7.2 的套接字连接错误

> ID：12511005
> 
> 赞同：2
> 
> 时间：2012-09-20T10:44:35.843
> 
> 标签：java, google-app-engine, sockets, configuration

我刚刚将我的应用程序更新到最新的 java GAE SDK 1.7.2 并且出现以下错误。

```
ATTENTION: /_ah/channel/dev
com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 2: Received exception executing http method POST against URL http://127.0.0.1:8888/_ah/channel/connected/: Permission denied: Not allowed to issue a socket connect: permission denied.
        at com.google.appengine.api.urlfetch.dev.LocalURLFetchService.fetch(LocalURLFetchService.java:398)
        at com.google.appengine.api.channel.dev.ChannelManager.sendChannelPost(ChannelManager.java:283)
        at com.google.appengine.api.channel.dev.ChannelManager.connectClient(ChannelManager.java:221)
        at com.google.appengine.api.channel.dev.LocalChannelServlet.doGet(LocalChannelServlet.java:119)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

看来我必须设置一些权限才能在这个新版本中使用通道 API。我找不到它的任何踪迹。

有人听说过这样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:21:38.323

这是 1.7.2 开发服务器中引入的错误。

有一个变通方法，请参阅错误中的“过滤器”变通方法。 [http://code.google.com/p/googleappengine/issues/detail?id=8166](http://code.google.com/p/googleappengine/issues/detail?id=8166)

将在 1.7.3 中修复。

ps记得在上传您的应用程序之前删除解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:34:02.897

你不能，阅读[https://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)

# parameters - 在 VB 脚本中传递参数

> ID：12511007
> 
> 赞同：0
> 
> 时间：2012-09-20T10:44:38.933
> 
> 标签：parameters, vbscript

我写了一个小脚本如下：

```
Dim CMD
Set WshShell = WScript.CreateObject("WScript.Shell") 
CMD = Wscript.Arguments(0)
WshShell.Run CMD 
```

现在我想调用这个脚本并传递一个参数，如下所示：

```
I:\VbScript.vbs \\svaaoffprg2\ODrive\pros_groups\GRMS\GmLoad5.exe/f="\\Svaakntnas537\BODI\Data Files\ACC\PROS_LOAD\G5\Staging\VSGPNR120918.DAT" 
```

请您告知我该怎么做，因为参数调用中的这个引号引起了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:54:12.493

双引号应该起作用：

`I:\VbScript.vbs "\\svaaoffprg2\ODrive\pros_groups\GRMS\GmLoad5.exe/f="\\Svaakntnas537\BODI\Data Files\ACC\PROS_LOAD\G5\Staging\VSGPNR120918.DAT""`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:15:33.890

```
cscript.exe I:\VbScript.vbs "\\svaaoffprg2\ODrive\pros_groups\GRMS\GmLoad5.exe/f=\\Svaakntnas537\BODI\Data Files\ACC\PROS_LOAD\G5\Staging\VSGPNR120918.DAT" 
```

cscript.exe I:\VbScript.vbs "\svaaoffprg2\ODrive\pros_groups\GRMS\GmLoad5.exe/f=", "\Svaakntnas537\BODI\Data Files\ACC\PROS_LOAD\G5\Staging\VSGPNR120918.DAT"

试试这个它对我有用。

# iphone - 创建分发给有限选定受众的 iOS 应用程序

> ID：12511009
> 
> 赞同：3
> 
> 时间：2012-09-20T10:44:53.360
> 
> 标签：iphone, ios

我刚刚开始为 IOS 创建自定义客户端应用程序，我已经为 PC 和 Android 客户端开发了该应用程序。这些应用程序的想法是使用 SQLite 数据库文件，该文件是在 PC 管理应用程序中创建并通过 Internet 实现的。此应用程序的开发由一家公司支付，并应分发给选定的人群。

我想问的是如何将这个 IOS 应用程序分发给某些人（谁有权使用它）？我应该把它作为没有数据库文件的免费应用程序放在应用程序商店，应该从秘密站点下载到 iphone 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:55:00.493

注意：这可能不是最糟糕的方式，但这是我的解决方案

我之前建立了一个服务器并在服务器上设置了用户凭据，我与客户端共享凭据并且他/她与他们一起登录.. 后来他们可以编辑他们的凭据，我的应用程序在商店中适用于任何人，但没有人这些凭据无法登录..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:48:23.523

最好的方法是通过[iOS 开发者企业计划。](https://developer.apple.com/programs/ios/enterprise/)

至于数据，如果数据定期增长或变化，您可以将其链接到 Web API。但是对于静态数据，您可以通过将其包含在应用程序本身中来分发它。有关更多信息，请参阅[CoreData](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)和其他工具。

您还可以在 App Store 上免费发布它并提供自定义登录。但是，不建议这样做，因为此应用程序对世界其他地方无用。您想要这样做的唯一原因是您的自定义客户可以在您的网站或其他地方注册，并且您希望允许他们访问该应用程序。这通常用于基于订阅的应用程序。但我认为你的情况并非如此。

还有 Ad Hoc 分发，但您只能使用 100 台设备。

[您可以阅读有关分发的更多信息。](https://developer.apple.com/programs/ios/distribute.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:49:26.863

你想要做的是：

[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:49:34.977

临时分发是您的解决方案。

[https://developer.apple.com/programs/ios/distribute.html](https://developer.apple.com/programs/ios/distribute.html)

如果您打算将应用分发给 100 多人，请参加他们的企业计划：

[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

# ajax - 更新phonegap中的数据库

> ID：12511010
> 
> 赞同：1
> 
> 时间：2012-09-20T10:44:54.890
> 
> 标签：ajax, sqlite, cordova, jquery-mobile

我收到以下错误：

> 未捕获的错误：INVALID_STATE_ERR：DOM 异常 11

尝试执行查询时收到此错误消息。

有没有人遇到过同样的问题？

```
function populateDB(tx) {

    tx.executeSql('DROP TABLE IF EXISTS ORDERS');
    tx.executeSql('CREATE TABLE IF NOT EXISTS ORDERS (id INTEGER PRIMARY KEY, client_ID, status)');

    var myurl="xml.xml";
    $.ajax({
        type: "POST", 
        url: myurl, 
        dataType: "xml", 
        success: onSuccess
    }); 
}

function onSuccess(xml) {

    $(xml).find('articles').each(function () {
        var idord = $(this).attr('id');

        var esql ='INSERT INTO ORDERS (id, client_ID, status) VALUES ('+idord+', 4, "done" )';
        var nameclient = $(this).find('name').text();
        $('.items').append('<h2>'+ nameclient '</h2>').appendTo('#xml-data'); 

        tx.executeSql(esql) ;
    });  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:20:10.707

尝试在函数中定义`onSuccess`函数`populateDB`，如下所示：

```
function populateDB(tx) {

    tx.executeSql('DROP TABLE IF EXISTS ORDERS');
    tx.executeSql('CREATE TABLE IF NOT EXISTS ORDERS (id INTEGER PRIMARY KEY, client_ID, status)');

    var myurl="xml.xml";
    $.ajax({
        type: "POST", 
        url: myurl, 
        dataType: "xml", 
        success: function(xml) {

            $(xml).find('articles').each(function () {
                var idord = $(this).attr('id');

                var esql ='INSERT INTO ORDERS (id, client_ID, status) VALUES ('+idord+', 4, "done" )';
                var nameclient = $(this).find('name').text();
                $('.items').append('<h2>'+ nameclient '</h2>').appendTo('#xml-data'); 

                tx.executeSql(esql) ;
            });  
        }

    }); 
} 
```

让我知道这是否可行。

# ssl - 如何在 SSL 中验证服务器证书？

> ID：12511011
> 
> 赞同：0
> 
> 时间：2012-09-20T10:45:00.913
> 
> 标签：ssl, x509

假设服务器 S 将其证书发送给客户端 C。用于验证此证书是否真实的方法是什么？

采取了哪些步骤来确保这确实是 CA 向服务器 S 颁发的证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:52:02.723

1.  服务器在握手数据上发送数字签名，由与证书中的公钥对应的私钥签名。客户端使用公钥验证签名。这确定服务器拥有私钥。

2.  客户端尝试在其信任的 CA 和证书的 IssuerDN 链之间建立信任关系。如果成功，则表明 CA 链都相信下一个身份，一直到证书的 SubjectDN。

所以此时我们知道服务器拥有证书公钥所隐含的私钥，并且证书的所有者就是它所说的他。所以现在我们知道他是谁了。

# java-me - j2me 波兰语：显示错误的波斯语单词

> ID：12511027
> 
> 赞同：0
> 
> 时间：2012-09-20T10:45:56.597
> 
> 标签：java-me, j2mepolish

我正在开发一个 j2me 波兰语应用程序，并且我使用了波斯语（与阿拉伯语相同）单词。但在一些较旧的索尼爱立信手机中，这些词是分开的和颠倒的。我在网上搜索，但我在 LWUIT 中找到了一些主题而不是波兰语。我该如何解决这些手机中的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:51:35.003

当您尝试显示波斯语单词时，有些设备没有`persian font engine`这样，您会发现字符排列和...的一些问题。你有两个问题：

1.  字符的分隔形式。
2.  人物排列颠倒。

要解决第一个问题，您可以使用以下其中一个：

*   更改您的应用程序的字节码
*   使用自定义字体
*   使用显示您要显示的单词的图片
*   使用设备的字体（**如果设备有正确的字体**）

有关更多详细信息，请查看我几个月前回答的[此链接。](http://www.hamcodi.ir/qa/questions/487/%D9%85%D8%B4%DA%A9%D9%84-%D8%B2%D8%A8%D8%A7%D9%86-%D9%81%D8%A7%D8%B1%D8%B3%DB%8C-%D8%AF%D8%B1-%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%87%D8%A7%DB%8C-j2me)
为了解决第二个问题，看看[这个链接](http://www.hamcodi.ir/qa/questions/612/%D8%AA%D8%B4%D8%AE%DB%8C%D8%B5-%D9%86%D8%AD%D9%88%D9%87-%DA%86%DB%8C%D9%86%D8%B4-%DA%A9%D8%A7%D8%B1%D8%A7%DA%A9%D8%AA%D8%B1%D9%87%D8%A7%DB%8C-%D9%81%D8%A7%D8%B1%D8%B3%DB%8C-%D8%AF%D8%B1-%DA%AF%D9%88%D8%B4%DB%8C-%D9%87%D8%A7%DB%8C-j2me-%D9%88-%D8%A7%D9%86%D8%AF%D8%B1%D9%88%DB%8C%D8%AF)，我在那里展示了一个想法。

当然我用波斯语回答这些问题，如果你不懂波斯语，告诉我给你更多细节。最后请告诉我，如果你的问题会解决。

# c++ - 如何在 C++ 中获取存储在 AAC 音频中的水印

> ID：12511028
> 
> 赞同：1
> 
> 时间：2012-09-20T10:45:56.887
> 
> 标签：c++, watermark, aac

我正在设计一个 C++ 应用程序，它将从流文件（.ts）中读取数据包（每个 188 字节）并从 AAC 音频中提取水印。我可以使用 fread() 读取文件，处理每个数据包并通过检查流类型（0x0F）来识别数据包是否为 AAC 音频，并将它们添加到帧缓冲区。任何人都可以帮助我进一步进行吗？我不知道从 AAC 中提取水印的确切逻辑。我在 c++/windows/linux 工作。有可用的源代码吗？提前致谢。

# wordpress - RewriteRule 给出 404

> ID：12511030
> 
> 赞同：0
> 
> 时间：2012-09-20T10:46:03.797
> 
> 标签：wordpress, mod-rewrite

我在使用 mod_rewrite 时遇到了麻烦。

我的 wordpress 站点位于“wp”目录中。它可以作为`http://localhost/wp/`

网站上有页面`http://localhost/wp/sample-page/`。

我想用 url 打开这个页面`http://localhost/wp/sample-page-2/`而不需要重定向。

这是 .htaccess 文件中的内容：

```
RewriteEngine On
RewriteBase /wp/
RewriteRule ^sample-page-2/$ sample-page/ [L] 
```

但我收到 404 错误。

有人可以解释一下我做错了什么吗？提前致谢。

**升级版：**

@soju：好吧，“sample-page-2” - 只是示例

1.  它不是文字意义上的页面/帖子。
2.  实际上我试图在 url 中添加一个部分。例如`http://localhost/wp/sample-page/section/`。而这条规则`RewriteRule ^sample-page/section/$ sample-page/ [L]`并没有奏效。然后我决定“简化”url（“sample-page-2”而不是“sample-page/section”）——没有成功。

**UPD2**

顺便说一句，重定向`RewriteRule ^sample-page-2/$ sample-page/ [R=301,L]`有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:44:35.597

我想wordpress重写规则是在你自己的规则之后，所以你应该删除`[L]`让wordpress处理`sample-page`url的选项

**关于 UPD2 的编辑**：嗯，它适用于 301 重定向，但你说你不想要重定向？

您可以添加一个过滤器`rewrite_rules_array`来制定自己的重写规则，看看 codex 上的示例：http: [//codex.wordpress.org/Class_Reference/WP_Rewrite#Examples](http://codex.wordpress.org/Class_Reference/WP_Rewrite#Examples)

# regex - 正则表达式和 Selenium WebDriver xpath

> ID：12511031
> 
> 赞同：0
> 
> 时间：2012-09-20T10:46:05.973
> 
> 标签：regex, selenium, webdriver

如何修复此代码以使其正常工作？

```
 public void check(WebDriver driver) {
    driver.findElement(By.xpath("//a[matches(@href,'/staff/transcript/\\d{5}//.pdf')]")).click();
} 
```

我必须找到一个 5 位标识符不同的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:19:37.103

1.  尝试获取 href 属性
2.  解析该字符串以获取该 5 位标识符
3.  使用该标识符并构建您的定位器并单击。

> ```
> String href=driver.findElement(By.xpath("//a[contains(@href,'/staff/transcript/')][contains(@href,'.pdf')]")).getAttribute("href");
> 
> String identifier=href.substring(href.lastIndexOf("/")+1,href.indexOf("."));
> 
> driver.findElement(By.xpath("//a[matches(@href,'/staff/transcript/"+identifier+"//.pdf')]")).click(); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:45:38.117

解决您的问题的一种可能方法：使用 js 遍历所有标签并首先找到与您的正则表达式相对应的标签。

```
pubic String getLocatorByRegExp(){

 JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var regex = /^\d{5}$/");
stringBuilder.append("var x=document.getElementsByTagName('a');");
stringBuilder.append("for(var t = 0; t <x.length; t++){if(regex.test(parseInt(x[t].text()))) return x[t].text().toString();} ");

       String res= (String) js.executeScript(stringBuilder.toString());
       return res;
}
String properLinkText = getLocatorByRegExp();
driver.findElement(By.xpath(//a[contains(text(),properLinkText)])).click() 
```

相当复杂的方法。但在我看来，有可能找到更简单的解决方案。它是页面上唯一的 5 位标识符吗（我的意思是页面上只有一个元素？）如果是这样，很容易找到该元素的 css 定位器或 xpath。请提供一些您的 html 并指出您需要单击的元素。

# c# - Marshal.PtrToStructure 在 .NET3.5 中有效，但在 .NET4 中失败

> ID：12511039
> 
> 赞同：2
> 
> 时间：2012-09-20T10:46:25.647
> 
> 标签：c#, .net, marshalling

我有一个项目，当设置为 .NET3.5 项目时，它会执行以下行，并且 curConnection 会按预期填充。

```
var curConnection = (Connection)Marshal.PtrToStructure(currentPtr, typeof(Connection)); 
```

当我将项目切换为 .NET4 项目时，curConnection 对象不再填充正确的详细信息。将其切换回 3.5 使其再次工作，但由于各种原因，我需要切换到 .NET4，我不会讨论。

我尝试将以下内容添加到配置中，但没有帮助。

```
<configuration>
   <runtime>
      <NetFx40_PInvokeStackResilience enabled="1"/>
   </runtime>
</configuration> 
```

有任何想法吗？

currentPtr 值由第三方库提供，我没有它的来源。下面是 Connection 等的结构。

```
[StructLayout(LayoutKind.Sequential)]
internal struct Connection
{
    public ConnectionId party;
    public ExtendedDevice staticDevice;
};
[StructLayout(LayoutKind.Sequential)]
internal struct ConnectionId // 70 bytes
{
    public UInt32 CallId; // 4 bytes
    public DeviceId DeviceId; // 64 bytes
    public DeviceTypes DeviceType; // 2 bytes
}; 
```

...我不会提供所有代码，但其余结构看起来都非常相似。

# c++ - 在makefile中链接库

> ID：12511043
> 
> 赞同：2
> 
> 时间：2012-09-20T10:46:31.387
> 
> 标签：c++, boost, curl, makefile

我在我的简单生成文件中链接库 boost 和 curl 时遇到问题。当我使用单个命令时：

```
g++ -I /usr/lib/boost/include -L /usr/lib/boost/lib website.cpp website.h main.cpp data.cpp data.h -lboost_regex -lcurl 
```

一切都很好，但是当我使用 makefile

```
a.out: website.o data.o main.o
    g++ -L /usr/lib/boost/lib -lboost_regex website.o data.o main.o -o a.out -lcurl 
data.o: data.cpp data.h
    g++ -c data.cpp -o data.o
website.o: website.cpp website.h
    g++ -I /usr/lib/boost/include -c website.cpp -o website.o 
main.o: main.cpp
    g++ -c main.cpp -o main.o 
```

我有很多错误：

```
g++ -c main.cpp -o main.o 
g++ -L /usr/lib/boost/lib -lboost_regex website.o data.o main.o -o a.out -lcurl
website.o: In function boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)':
website.cpp:(.text._ZN5boost11basic_regexIcNS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE6assignEPKcS7_j[boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)]+0x22): undefined reference to `boost::basic_ 
```

我在 website.cpp 中使用 boost 和 curl（当然标题在 website.h 中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T10:49:05.203

问题是它`-lboost_regex`被放置在`.o`编译器命令中的 s 之前，这与最后的单个命令不同`-lboost_regex`。

改变：

> g++ -L /usr/lib/boost/lib -lboost_regex website.o data.o main.o -o a.out -lcurl

至：

> g++ -L/usr/lib/boost/lib website.o data.o main.o -o a.out -lcurl -lboost_regex

请参阅[GCC 链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)以了解为什么顺序很重要。

# c++ - (.bss+0x0)：代理的多重定义

> ID：12511044
> 
> 赞同：4
> 
> 时间：2012-09-20T10:46:31.207
> 
> 标签：c++

我有这个用于自动化机器人的代码。它使用 Player 的一些代理类 - 一种用于编程机器人的开源软件。我使用以下命令编译了两个 cpp 文件：

```
g++ -c -Wall navigation.cpp `pkg-config --cflags playerc++` `pkg-config --libs playerc++`
和
g++ -c -Wall autonavigation.cpp `pkg-config --cflags playerc++` `pkg-config --libs playerc++`
然后我链接了目标文件（这是出现问题的地方）：
g++ -o 自动导航 navigation.o autonavigation.o `pkg-config --cflags playerc++` `pkg-config --libs playerc++`。

```

代码在这里：

```
erratic@erratic-desktop:~/Desktop/autonav$ g++ -o autonavigate navigation.o
autonavigation.o `pkg-config --cflags playerc++` `pkg-config --libs playerc++`

autonavigation.o:(.bss+0x0): `gHostname' 的多重定义

navigation.o:(.bss+0x0): 首先定义在这里

autonavigation.o:(.data+0x0): `gPort' 的多重定义

navigation.o:(.data+0x0): 首先定义在这里

autonavigation.o:(.bss+0x4): `gIndex' 的多重定义

navigation.o:(.bss+0x4): 首先定义在这里

autonavigation.o:(.bss+0x8): `gDebug' 的多重定义

navigation.o:(.bss+0x8): 首先定义在这里

autonavigation.o:(.data+0x4): `gFrequency' 的多重定义

navigation.o:(.data+0x4): 首先定义在这里

autonavigation.o:(.data+0x8): `gDataMode' 的多重定义

navigation.o:(.data+0x8): 首先定义在这里

autonavigation.o:(.bss+0xc): `gUseLaser' 的多重定义

navigation.o:(.bss+0xc): 首先定义在这里

autonavigation.o：在函数“parse_args（int，char**）”中：

autonavigation.cpp:(.text+0x0): `parse_args(int, char**)' 的多重定义

navigation.o:navigation.cpp:(.text+0x0): 首先定义在这里

autonavigation.o：在函数“print_usage（int，char**）”中：

autonavigation.cpp:(.text+0x101): `print_usage(int, char**)' 的多重定义

navigation.o:navigation.cpp:(.text+0x101): 首先定义在这里

collect2: ld 返回 1 个退出状态

```

来自评论的源代码：

```
//navigation.h
#include <libplayerc++/playerc++.h>
#include <stdio.h>
#include <time.h>
#include "args.h"
#define PI 3.14159

using namespace std;
using namespace PlayerCc;

class navigation
{
public:
    navigation();
    void autoNavigate(PlayerClient &, LaserProxy &, Position2dProxy &, PtzProxy &, IrProxy &, SonarProxy &);

private:
    void wallFollow(LaserProxy &, Position2dProxy &);
    void obstacleAvoid(IrProxy &, SonarProxy &, PlayerClient &, Position2dProxy &);
}; 
```

来源`autonavigation.cpp`：

```
#include "navigation.h"

int main(int argc, char *argv[])
{
    PlayerClient robot("localhost");
    LaserProxy lp(&robot,0);
    Position2dProxy pp(&robot,0);
    PtzProxy ptp (&robot,0);
    IrProxy ir(&robot,0);
    SonarProxy sp(&robot, gIndex);

    navigation nav;
    nav.autoNavigate(robot, lp, pp, ptp, ir, sp);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:06:02.470

如果没有看到您的代码，我们只能猜测，但我的猜测是您在包含在两个源文件中的头文件中*定义了这些变量。*

您应该*声明*变量，并`extern`用来告诉编译器变量是在其他地方定义的。然后在*一个*源文件中定义变量（即与头文件中的声明相同，但没有`extern`关键字）。

例如，假设我有一个`hostname`要在多个源文件中使用的变量，然后我`extern`在一个头文件中进行声明，该文件包含在所有需要该变量的源文件中：

```
extern char hostname[32]; 
```

然后在一个源文件中定义变量：

```
char hostname[32]; 
```

# r - 在作业脚本中加载 R 包

> ID：12511047
> 
> 赞同：1
> 
> 时间：2012-09-20T10:46:34.967
> 
> 标签：r, syntax, cluster-computing

我敢肯定，这是一个简单的问题，但我无法弄清楚。我想向统计计算中心提交作业，我使用的脚本如下：

```
#!/bin/sh 
#PBS -l nodes=1
#PBS -l walltime=1:00:00
module add R/2.14.0
R
packages.install("np")
61
library(np)
packages.install("foreign")
library(foreign)
data<-read.dta("smallsample.dta") 
```

...

然后还有更多使用 R 中的 np 包的命令。注意：该`61`行是针对安装包时请求的国家特定镜像的。当我提交脚本时，我立即收到包含`packages.install("np")`. 如何在 R 中安装软件包？我试图准确地复制交互式会话中的工作原理，但我没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:49:32.510

你必须使用`install.packages`not `packages.install`。要设置存储库，您必须使用`repos`参数。我怀疑像这样输入它会起作用，但不确定。

# jquery - 如何在 jQuery datpicker 中将服务器日期设置为当前日期

> ID：12511050
> 
> 赞同：0
> 
> 时间：2012-09-20T10:46:40.290
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-datepicker

我使用 jQuery 插件 datepicker，我不希望用户能够更改他的客户端上的今天日期。所以我想知道如何将今天日期（不是选定的日期！）设置为我的服务器日期。下面的代码即只设置默认的“SELECTED”日期值

```
defaultDate: myServerDate 
```

...我也试过这个：

```
myDatepicker.datepicker('setDate', myServerDate); 
```

默认情况下，这两种尝试最终都选择了这些日期。但实际上并没有真正改变今天的日期。

干杯，腰带

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:27:44.733

从外观上看，如果不进行黑客攻击，这是不可能`jquery.ui.datepicker.js`的，以下是该文件的非缩小版本的摘录：

```
/* Generate the HTML for the current state of the date picker. */
_generateHTML: function(inst) {
  var today = new Date();
  today = this._daylightSavingAdjust(
    new Date(today.getFullYear(), today.getMonth(), today.getDate())); // clear time 
```

从上面可以看出，它`today`是直接从 JavaScript 的 Date 对象计算出来的，所以没有办法将这个值传递进去……我猜主要是因为改变当前日期是一个很奇怪的请求。

有四个灵魂提示，其中 3 个不是很好，我已将它们按顺序排列，1 是最好的，4 是最差/最复杂的：

1.  您可以参与并实施/报告`setToday`自己的功能 - [http://bugs.jqueryui.com/](http://bugs.jqueryui.com/)

2.  您可以将 _generateHTML 函数复制到您自己的代码中，并使用 RodrigoCouto 所述的方法对其进行扩展： [jQuery DatePicker Issue: Set current date](https://stackoverflow.com/questions/1385214/jquery-datepicker-issue-set-current-date)

3.  您可以破解`jquery.ui.datepicker.js`以允许您定义一个日期来代替代码`var today = new Date();`。您应该在应用程序中的任何注释中清楚地记下此覆盖，以便在需要升级到下一个 jQuery UI 版本时警告自己（和其他开发人员）。

4.  您可以构建一个 js hack 与 datepicker 插件一起运行，并在每次显示日历时重写它的输出。即检测`$('.ui-datepicker-today')`并删除该类，然后通过沿着兄弟姐妹步进并检查数据属性来重新计算它应该放置的位置......这是最糟糕的方法，因为它不会影响任何 datepicker 的内部计算并且完成起来会很复杂。

# php - 如何在 php 中增加 stream_set_timeout()

> ID：12511053
> 
> 赞同：1
> 
> 时间：2012-09-20T10:46:56.473
> 
> 标签：php, sockets

我正在使用 php 通过 steam_socket 向 iPhone 设备发送推送消息。它工作正常，但我想一次发送 1000 条记录，在这种情况下我只收到 50 条消息，然后我知道`Warning: stream_set_timeout():` 如何增加流套接字时间有什么方法可以处理这种类型的问题可以请任何人指导我。

这是我的代码

```
for($i=0;$i<100;$i++)
{
$gstr="3f3dad52b4fb50001cb223253a3d995542209d354eXXXXXXXXXXXXXXXX";

pushMessage($gstr,$_REQUEST['msg'].$i,"Thinkingofyou");
}

    function pushMessage($deviceToken,$message,$app) {
        echo "Sending iPhone Push Notifications to " . $deviceToken . "<br /><br />";
        echo "Your Message: " . $message . "<br />";
        $time = time();
        $apnsHost = 'gateway.sandbox.push.apple.com'; 
        $apnsPort = 2195;
        $apnsCert = 'aps-toyPush.pem';
        $streamContext = stream_context_create();

     stream_set_timeout($streamContext, 3600);
        stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);
        //stream_context_set_option($streamContext, 'ssl', 'passphrase', $passphrase);
        $apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);

        if($apns) {
                $payload = array();

                $payload['aps'] = array('alert' => $message, 'badge' => 1, 'sound' => 'default');

                $payload = json_encode($payload);
                $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload;
                fwrite($apns, $apnsMessage);
        } else { 
                echo "Connection Failed - iPhone Push Notifications Server";
                echo $errorString."<br />";
                echo $error."<br />";
        }
    //  socket_close($apns);
        fclose($apns);
    } 
```

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:58:48.830

摘自 PHP 手册中的用户帖子：

```
<?php
socket_set_option($socket, SOL_SOCKET, SO_RCVTIMEO, array('sec'=>$sec, 'usec'=>$usec));
socket_set_option($socket, SOL_SOCKET, SO_SNDTIMEO, array('sec'=>$sec, 'usec'=>$usec));
?> 
```

# php - 如何将关联数组的 PHP 数组传输到 javascript？

> ID：12511055
> 
> 赞同：3
> 
> 时间：2012-09-20T10:47:02.307
> 
> 标签：php, javascript, arrays, associative

在我的 PHP 端，我有一个关联数组数组，如下所示：

```
Array (
   [0] => Array (
         [resultId] => 15
         [testId] => 4
         [accountId] => 35 
         [score] => 50
         [standard_deviation] => 0.5
         [answer_time] => 475.67
         [created_at] => 2012-09-20 01:45:05
         [groupId] => 4 
         [accountName] => hbbgrewkcx 
         [testName] => test1),
   [1] => Array (
         [resultId] => 14
         [testId] => 3
         [accountId] => 35
         [score] => 60
         [standard_deviation] => 0.5
         [average_answer_time] => 386.1
         [created_at] => 2012-09-20 01:44:56
         [groupId] => 4
         [accountName] => hbbgrewkcx
         [testName] => test2)
) 
```

我想将此数组传输到 javascript 端。如何制作这个关联数组数组的 javascript 副本并访问所需的值？

基本上我想要与 foreach 在 PHP 中给我的功能相同的功能：

```
foreach($ArrayOfArrays as $array)
{
  doSomething $array['testName'];
  doSomething $array['created_at'];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T10:50:03.193

本质上，您所要做的就是将 JavaScript 代码回显到页面上的正确位置。

```
echo "<script language='text/javascript'>";
echo "var myArr = ".json_encode($phpArray).";";
echo "</script>"; 
```

该[`json_encode()`](http://php.net/manual/en/function.json-encode.php)函数返回一个值的 JSON 表示。JavaScript 非常容易处理 JSON，因此您应该能够毫无问题地访问您的多维数组！

# javascript - jQuery Mobile 可折叠集合中的 JS 效果（js 不执行）

> ID：12511056
> 
> 赞同：2
> 
> 时间：2012-09-20T10:47:07.140
> 
> 标签：javascript, jquery, jquery-plugins, jquery-mobile

我在可折叠集中执行 JavaScript 时遇到问题。我想在可折叠设置内运行某种旋转木马效果。

但不幸的是，代码仅在打开的选项卡中执行。打开其他选项卡可以看到什么都没有。虽然效果的初始化发生在所有元素上。

在这里你会找到小提琴

带代码： http: [//jsfiddle.net/2qVBN/4/](http://jsfiddle.net/2qVBN/4/) 全屏：http: [//jsfiddle.net/2qVBN/4/embedded/result/](http://jsfiddle.net/2qVBN/4/embedded/result/)

当您在纵向和横向模式之间切换时，代码的重新初始化也存在问题。

有谁知道我如何确保始终加载和执行可折叠文件中的代码？

在此先感谢 vis_dev

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:23:15.713

这里显示的 div 上的 JS none 不能应用。在您的情况下，我建议您可以通过 js 扩展每个可折叠 div 并将 js 应用到其中。

这就是你如何扩展你的可折叠 div。

```
$('div').trigger('expand'); 
```

[jsfiddle 示例](http://jsfiddle.net/2qVBN/11/)

# javascript - 用javascript计算浮点数

> ID：12511057
> 
> 赞同：91
> 
> 时间：2012-09-20T10:47:08.327
> 
> 标签：javascript, math, floating-point

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

我正在使用 javascript 计算几个浮点值的总和......我注意到一个从未见过的奇怪事情。执行此代码：

```
parseFloat('2.3') + parseFloat('2.4') 
```

我得到**4.699999999999999**

那么......我该怎么做才能获得正确的价值？（假设这是不正确的......）

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-09-20T10:50:20.307

一旦你阅读了[*每一个计算机科学家应该知道的关于浮点运算*](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识，你就可以使用这个[`.toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)函数：

```
var result = parseFloat('2.3') + parseFloat('2.4');
alert(result.toFixed(2));​ 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T10:58:34.073

```
(parseFloat('2.3') + parseFloat('2.4')).toFixed(1); 
```

我想它会给你解决方案

# mvvm - Xceed Datagrid 在选择子项时丢失 SelectedItem

> ID：12511058
> 
> 赞同：1
> 
> 时间：2012-09-20T10:47:13.930
> 
> 标签：mvvm, datagrid, selecteditem, master-detail, xceed

我在 WPF MVVM 应用程序中有一个 Xceed 数据网格，它设置为保存主从记录。选择子行时，我希望 ViewModel 检测到选定的子行。我想最好使用零代码隐藏来做到这一点。我编写了在单击上下文菜单时对所选项目执行操作的代码。这在选择父项时可以正常工作，但在选择子项时始终返回 null。

我已经将我想要实现的目标放在了一个非常简化的版本中：

我的 XAML 是：

```
 <Window x:Class="MasterDetailSelection.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:xcdg="clr-namespace:Xceed.Wpf.DataGrid;assembly=Xceed.Wpf.DataGrid.v4.2"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <xcdg:DataGridCollectionViewSource x:Key="cvs_parents" Source="{Binding Path=Parents}">
                <xcdg:DataGridCollectionViewSource.DetailDescriptions>
                    <xcdg:PropertyDetailDescription RelationName="Children"
                                                    AutoCreateDetailDescriptions="False">
                    </xcdg:PropertyDetailDescription>
                </xcdg:DataGridCollectionViewSource.DetailDescriptions>
            </xcdg:DataGridCollectionViewSource>
        </Grid.Resources>
        <xcdg:DataGridControl x:Name="ParentGrid"
                              NavigationBehavior="RowOnly"
                              ItemsSource="{Binding Source={StaticResource cvs_parents}}"
                              SelectedItem="{Binding SelectedItem}"
           AutoCreateDetailConfigurations="True"
                              ReadOnly="True">
            <xcdg:DataGridControl.ContextMenu>
                <ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}">
                    <MenuItem Header="Execute Command" 
                              CommandParameter="{Binding DataContext.SelectedItem}"
                              Command="{Binding DataContext.SampleCommand}" />
                </ContextMenu>
            </xcdg:DataGridControl.ContextMenu>
        </xcdg:DataGridControl>

    </Grid>
</Window> 
```

视图模型是：

```
 namespace MasterDetailSelection
{
    using System;
    using System.Collections.Generic;
    using System.Collections.ObjectModel;
    using System.ComponentModel;
    using Microsoft.Practices.Composite.Presentation.Commands;

    public class ViewModel : INotifyPropertyChanged
    {
        private ObservableCollection<Parent> _parents;
        public event PropertyChangedEventHandler PropertyChanged;
        private DelegateCommand<Object> _sampleCommand;
        private object _selectedItem;

        public ObservableCollection<Parent> Parents
        {
            get { return _parents; }

            set
            {
                _parents = value;
                OnPropertyChanged("Parents");
            }
        }

        public DelegateCommand<Object> SampleCommand
        {
            get
            {
                if (_sampleCommand == null)
                {
                    _sampleCommand = new DelegateCommand<object>(ExecuteSampleCommand, CanExecuteSampleCommand);
                    OnPropertyChanged("SampleCommand");
                }
                return _sampleCommand;
            }
        }

        public bool CanExecuteSampleCommand(Object commandParameter)
        {
            return true;
        }

        public void ExecuteSampleCommand(Object commandParameter)
        {
            Console.WriteLine("ExecuteSampleCommand");
        }

        public object SelectedItem
        {
            get { return _selectedItem; }
            set
            {
                if (_selectedItem != value)
                {
                    _selectedItem = value;
                    OnPropertyChanged("SelectedItem");
                }
            }
        }

        public void LoadParents()
        {
            var parents = new ObservableCollection<Parent>()
                {
                    new Parent()
                        {
                            Id=1, 
                            Description = "Parent1",
                            Children  = new List<Child>(){new Child()    {Id = 1, Description = "Child1"}    }
                        }
                };

            Parents = parents;
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

有两个简单的实体：

```
public class Parent
{
    public int Id { get; set;}
    public string Description { get; set;}
    public IEnumerable<Child> Children { get; set;}
}
public class Child
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

App.xaml.cs 中的 OnStartup 覆盖包含以下内容：

```
var viewModel = new ViewModel();
var window = new MainWindow();
window.DataContext = viewModel;
viewModel.LoadParents();
window.Show(); 
```

每当我选择父行时，都会使用填充的对象调用 SelectedItem 设置器。当我选择一个子行时，会调用相同的 setter，但具有空值。

当在子行上单击上下文菜单时，有什么方法可以获取对所选项目的引用 - 并且在没有代码隐藏的情况下执行此操作。如果没有，是否可以使用代码隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T12:24:39.450

也许您应该直接在单元格或行上设置上下文菜单，如下所示。然后您可以将适当的模型发送到命令。在下面的示例中，我使用了一个静态定位器类，它也让我的 VM 绑定了实际命令。

```
<Style TargetType="{x:Type xcdg:DataCell}">
    <Setter Property="ContextMenu" Value="{StaticResource CellContextMenu}">
        <Setter.Value>
            <ContextMenu>
                <MenuItem Header="Execute Command" 
                          CommandParameter="{Binding}"
                          Command="{Binding Source={StaticResource Locator} Path=ViewModel.SampleCommand}" />
            </ContextMenu>
        </Setter.Value>
    </Setter>
</Style> 
```

# visual-studio-2010 - Visual Studio 2010 - 可视化编辑器 - 隐藏 css 指南（蓝线）？

> ID：12511061
> 
> 赞同：1
> 
> 时间：2012-09-20T10:47:17.847
> 
> 标签：visual-studio-2010

在可视化编辑器中选择控件时，使用网页上的绝对定位，我得到这些“指南”用于对齐（上、下、左、右），不小心单击它们会导致设置 css 属性。

![在此处输入图像描述](../Images/7620cc0f0d08855440bcb67242b29784.png)

我觉得这很烦人，有时会导致控件的不良行为。所以我的问题是，有没有办法删除/隐藏这些指南？

# android - 在android中找不到符号变量R.raw

> ID：12511062
> 
> 赞同：1
> 
> 时间：2012-09-20T10:47:29.683
> 
> 标签：android, file, resources

我正在开发一个需要读取资源文件的应用程序。我将我的文件（名为“sample”）保存在 res 文件夹的原始目录中。当我尝试在代码中访问它时，通过将其资源 id 写为 R.raw.sample ，它给出了以下错误。

错误（30,60）找不到符号变量原始。

我正在使用 Intellij IDEA 11.0.3，Android 平台是 2.3.3。

代码如下...

```
package com.example;

import android.content.Context;

import java.io.BufferedReader;
import java.io.IOException; 
import java.io.InputStream;
import java.io.InputStreamReader;

public class SampleLoader {

public SampleLoader(){

}

public static int[] readFromFile(Context ctx, int resId){
    String sample = readRawTextFile(ctx,resId);
    int [] arr =  stringToIntArray(sample);
    return arr;
}

public static String readRawTextFile(Context ctx, int resId)
{
    InputStream inputStream = ctx.getResources().openRawResource(resId);

    InputStreamReader inputReader = new InputStreamReader(inputStream);
    BufferedReader buffReader = new BufferedReader(inputReader);
    String line;
    StringBuilder text = new StringBuilder();

    try {
        //while (( line = buffReader.readLine()) != null) {
        if (( line = buffReader.readLine()) != null) {
            text.append(line);
            //text.append('\n');
        }
    } catch (IOException e) {
        return null;
    }
    return text.toString();
}

public static int[] stringToIntArray(String line){
    int[] sample = new int[line.length()-2];
    String s ;
    for (int i=0; i<line.length(); i++)
    {
        if(i>1)
        { sample[i] = Character.getNumericValue(line.charAt(i));
        }
    }
    return sample;
}

public void populateListOfSamples(){

} 
```

}

```
package com.example;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MyActivity extends Activity {

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(createContent());
}

LinearLayout createContent(){
    LinearLayout linearLayout = new LinearLayout(this);
    linearLayout.setOrientation(LinearLayout.VERTICAL);
    ViewGroup.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.FILL_PARENT);
    linearLayout.setLayoutParams(params);
    final int[] arr6 = SampleLoader.readFromFile(this,R.raw.sample) ;
    final Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.no3);

    final ImageView imageView1 = new ImageView(this);
    imageView1.setVisibility(View.INVISIBLE);

          final TextView textView = new TextView(this);
    String str2 = "Byte Array will appear here!";
    textView.setText(str2);

    final Button btn2 = new Button(this);
    final Button btn = new Button(this);
    btn.setText("Convert Pic to Byte Array");
    btn.setOnClickListener(new View.OnClickListener() { //Event handler for click event.

        public void onClick(View v) {

            textView.setText(str3);
            btn2.setVisibility(View.VISIBLE);

        }

    });

            btn2.setText("Convert Byte Array to Pic");
            btn2.setVisibility(View.INVISIBLE);
            btn2.setOnClickListener(new View.OnClickListener() { //Event handler for click event.

                public void onClick(View v) {
                    btn.setVisibility(View.INVISIBLE);
                    final Bitmap imag = filing.arrtoimg(arr6);
                    textView.setVisibility(View.INVISIBLE);
                    imageView1.setVisibility(View.VISIBLE);
                    imageView1.setImageBitmap(imag);
                }

            });

    linearLayout.addView(imageView1);
    linearLayout.addView(btn);
    linearLayout.addView(btn2);
    linearLayout.addView(textView);

    return linearLayout;
} 
```

}

# php - 登录表单位于哪个 php 文件中？

> ID：12511063
> 
> 赞同：1
> 
> 时间：2012-09-20T10:47:34.390
> 
> 标签：php, vtiger

您好我需要在 vtiger 登录页面中进行一些更改，例如设置用户名和密码的默认值，以实现 SSO。

你能帮我找到登录表单的 php 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:25:24.893

您可以通过设置 tpl 文件 Login.tpl 的输入字段值来做到这一点。文件存在于目录**Your_project/Smarty/templates/**中。

您还可以对您的登录名进行任何其他更改，该文件位于**Your_project/modules/Users/login.php**目录中的 login.php 文件中。

# linux - Doxygen Linux“make install”错误

> ID：12511067
> 
> 赞同：0
> 
> 时间：2012-09-20T10:47:56.193
> 
> 标签：linux, installation, doxygen, doxywizard

我尝试在我的 linux 2.3.32 上安装 doxygen。`./configure`运行良好。但是`make install`会抛出错误

```
/usr/bin/install: call stat for "bin/doxywizard" not possible: file or directory not found 
```

事实上，没有这样的文件。但是我该如何解决呢？

编辑：

输出

```
-003:~/Downloads/doxygen-1.2.11$ ./configure && sudo make && make install
  Checking for GNU install tool... using /usr/bin/install
  Created Makefile from Makefile.in...
/usr/bin/install -d /usr/local/bin
/usr/bin/install -d /usr/local/doc/doxygen
/usr/bin/install -m 755 bin/doxygen    /usr/local/bin
/usr/bin/install -m 755 bin/doxytag    /usr/local/bin
/usr/bin/install -m 755 bin/doxysearch /usr/local/bin
/usr/bin/install -m 755 bin/doxywizard /usr/local/bin
/usr/bin/install: Aufruf von stat für „bin/doxywizard“ nicht möglich: Datei oder Verzeichnis nicht gefunden
make: *** [install] Fehler 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:58:45.947

你做

```
$> make install 
```

直接配置后。安装目标通常仅用于将生成的二进制文件复制/链接到它们的目标目录。事先，您需要通过运行实际编译它们

```
$> make 
```

# sms - 建立自己的短信网关

> ID：12511070
> 
> 赞同：43
> 
> 时间：2012-09-20T10:48:05.167
> 
> 标签：sms, gateway

我们运行一个远程系统，并希望服务器能够通过 SMS 提醒我们它们的状态。是否可以设置我们自己的 SMS 网关（或我们自己的 GSM 网络），这样我们就**不必**为 SMS 提供商付费？

这可能吗？如果是这样，请让我们知道所需的硬件是什么以及我们如何开始..

我确信这是可能的，因为当运营商 A 想向运营商 B 发送短信时，它不会向运营商 B 支付任何费用。此外，还有大量的在线服务，例如：Atompark.com、clickatell、 ...ETC

请注意：我们知道如何使用 Linux 系统、调制解调器 GSM 和有效的 SIM 卡构建短信网关，但我们正在寻找一种无需为发送短信支付任何费用的方法......

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-04-19T21:26:21.560

**这是它的工作原理**

您**>>>**转发聚合器**>>>**短信聚合器**>>>**移动运营商**>>>**移动公司**>>>**您的客户

**3个主要参与方参与整个过程：**

**1\. 移动运营商：**他们管理 SMSC（短消息服务中心）。AT&T、Sprint/NEXTEL、T-Mobile USA、USCellular 和 Verizon Wireless 是全球少数主要的移动运营商。他们与所有主要的手机公司都有深厚的联系。他们中的大多数人拥有 800 到 950 家电信/移动公司。您的所有消息都通过 SMS 聚合器发送给他们，他们将它们转发给接收者的移动公司，最终将其发送给接收者。

**成为移动运营商的成本：**十亿美元的业务，如果不是万亿的话。

**2\. SMS 聚合器：** mBlox、air2web 和 motricity 是其中少数。他们与移动运营商有着深厚的联系。

**成为 SMS 聚合器的成本：**百万

**3\. 转发聚合器/SMS 网关：** Clickatell、Twilio 和 esendex 以及其他少数提供 SMS 网关 API 的开发人员正在使用 Clickatell 将其 SMS API 与他们的应用程序集成。他们对不同的国家收取不同的费率（所有国家/地区都没有固定费率）。100,000 条消息（国际）大约需要 600 至 700 美元。

**成为转发聚合器的成本**：可能以百万计

**底线：** 我正在研究一个免费的解决方案，但直到今天，全世界还没有免费可靠的解决方案可以在国际上免费发送大量消息。所以不要再浪费时间寻找免费的解决方案了。您必须提出一项新技术才能实现这一目标。

虽然有很多选项可以在您的国家/地区免费或花很少的钱发送批量消息，但如果您打算在国际上发送消息，您根本无法实现这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T11:05:26.503

除了任何运营商提供的电子邮件到短信系统之外，没有“免费”的方式可以做到这一点。

> A想给运营商B发短信，不给运营商B一分钱

这与 B 不会为发送到另一个方向的消息支付 A 的事实相平衡。*在国际上，他们*经常支付 SMS 互连费用。

> ...设置我们自己的短信网关

是的，但您需要访问 GSM 网络上的 SMSC 才能直接或通过带有 SIM 卡的设备发送消息，这就是您支付的费用。

> 或我们自己的 GSM 网络

实际上不，不。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-06T09:04:24.800

您可以使用带有加密狗的树莓派或橙色派。然后我们可以使用 AT 命令。

我们可以使用此命令连接加密狗并检查它是否以正确的模式连接。

```
sudo lsusb 
```

然后我们可以使用python代码执行AT命令..

发送短信我们可以使用这个代码

```
def sendsms(number,text):
    ser.flushInput()
    ser.flushOutput()
    ser.write('AT+CMGF=1\r\n')
    sleep(1)
    ser.write('AT+CMGS="%s"\r\n' % number)
    sleep(1)
    ser.write('%s' % text)
    sleep(1)
    ser.write(ascii.ctrl('z'))
    sleep(1)
    ser.flushInput()
    ser.flushOutput()
    print "Text: %s  \nhas been sent to: %s" %(text,number) 
```

阅读未读短信

```
def read_unread_sms():
ser.write('AT+CMGF=1\r\n')
sleep(2)
ser.write('AT+CMGL="ALL"\r\n')
sleep(5)
a = ser.readlines()
z=[]
y=[]
for x in a:
    if x.startswith('+CMGL:'):
        r=a.index(x)
        t=r+1
        z.append(r)
        z.append(t)
for x in z:
    y.append(a[x])
##Following line changed modem back to PDU mode
ser.write('AT+CMGF=0\r\n')
return y 
```

如果你想为短信网关创建一个记录器文件，我们可以使用“logger”。如果你想将未读消息发送到 api，我们可以使用“request”模块。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T06:46:30.623

虽然没有免费的方式来发送正确的文本消息，但您最好为服务器购买一个 GSM 模块（机架中的 USB 并不理想，但应该有适当的硬件扩展总线）。您将查询模块本身，而不是依赖第 3 方中间服务器来发送这些消息，从而节省了大量资金。

虽然我本身并没有意识到这一点，但我创建了这个计划来为我的服务发送短信。这是迄今为止最便宜的选择。

# ios - 在新 iPad 上运行 iOS6 应用程序

> ID：12511071
> 
> 赞同：0
> 
> 时间：2012-09-20T10:48:06.550
> 
> 标签：ios, screen, iphone-5

我正在为 iPhone5 创建一个应用程序，它在 iPhone 6.0 模拟器（带 4 英寸显示屏）中运行良好。现在我想在我的新 iPad 上测试它，它已经升级到 iOS6，但屏幕自动缩小到 3.5 英寸。有没有办法让新 iPad 上的屏幕保持 4 英寸？提前致谢：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T12:55:59.150

iPad 上的“兼容模式”以 320x480 格式运行仅限 iPhone 的应用程序——本质上，它与 iPhone <5 兼容。无法使其与 iPhone 5 和 iPod touch（第 3 代）使用的 320x568 格式兼容。

因此，它将*始终*以您应用的“标准”布局运行，而不是“高”布局。

因此，简短的回答是“不”。

# jquery - jquery取消选择单选按钮错误

> ID：12511072
> 
> 赞同：0
> 
> 时间：2012-09-20T10:48:10.650
> 
> 标签：jquery, jquery-ui

当另一个对话框也打开时，Jquery 正在取消选择对话框中的我的单选按钮。在调试中运行，jquery 源代码中的罪魁祸首是这一行：

```
if ( !eventHandle ) {
  elemData.handle = eventHandle = function() {
    // Handle the second event of a trigger and when
    // an event is called after a page has unloaded
    return typeof jQuery !== "undefined" && !jQuery.event.triggered ?
    jQuery.event.handle.apply( eventHandle.elem, arguments ) :
    undefined;//after this line executes selected radio button is lost.
  };
} 
```

有人知道为什么是这样吗？

导致此问题的简化版本：

```
$("#editYes").click(function(){//this radio is inside a dialog
  if($("#editsList").children().size()==0){
    $('#editDialogDiv').dialog('open');
    setDateHints();
    $('#editOpen').val("true");
  }
  //jquery code above runs here. Upto this point the radio remains selected
}); 
```

html是这样的：

```
<div title="atitle" id="dialog1">
...
 Yes<input id="editYes" type="radio" value="true" name="edits"> <!-- click this to open second dialog, but its then deselected by jquery-->
 No<input id="editNo" type="radio" value="false" name="edits">
...
</div>
<div title="anothertitle" id="secondDialog">
...some content
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:45:39.807

尝试使用[`change`](http://api.jquery.com/change/)事件而不是事件，[`click`](http://api.jquery.com/click/)因为您的问题是操作发生的顺序。

在您的活动结束之前，使用点击不会注册更改。但是，您的事件会转移到新窗口并丢失返回的更改操作。使用 change 会将更改注册到您的输入，然后处理您的操作。

# javascript - 使用道路的 Excel 工作表在 Google 中突出显示道路

> ID：12511082
> 
> 赞同：2
> 
> 时间：2012-09-20T10:49:08.243
> 
> 标签：javascript, google-maps, c#-4.0, google-maps-api-3

我想突出显示基于 csv、excel、fusion 文件的谷歌地图上的所有道路——它只包含道路名称。我意识到它可能需要有一个更本地的标识符，例如城镇。

我想找到道路的起点和终点编号，但我似乎找不到这样做的方法，然后可能会创建一次旅行或其他什么。

如果我可以用不同的颜色为道路的一个子集着色，例如我在 CSV 中将 1 表示为红色，将 2 表示为蓝色，那也将是一件好事。

欢迎 C# 或 JS :) 欢迎任何想法，但无论我得到什么都是最受欢迎的 :)

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:52:40.613

Google Maps API v3 不支持此功能。

# android - 在安卓手机上测试时无法显示全屏

> ID：12511089
> 
> 赞同：1
> 
> 时间：2012-09-20T10:49:44.650
> 
> 标签：android, button, resolution

我有一个底部有 3 个按钮的向上按钮。当我在模拟器上测试它时，会出现全屏。当我在我的设备上测试它时，下面的按钮不显示。就像分辨率不正确一样。这是我的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@raw/mexicanbg"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/buttonbacksubreclist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:background="@drawable/back_button"
        android:onClick="back" />

    <TextView
        android:id="@+id/textViewreclist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginLeft="45dp"
        android:text="@string/reclist"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />

 </LinearLayout>

 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
 </LinearLayout>

 <ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="382dp" />

<LinearLayout
android:layout_width="match_parent"
android:layout_height="362dp" >

<Button
    android:id="@+id/buttonRecipes"
    android:layout_width="108dp"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_xrecipes"
    android:onClick="recipe"
    android:text="@string/rec" />

<Button
    android:id="@+id/buttonGroList"
    android:layout_width="110dp"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_xgrocery"
    android:onClick="grocerylist"
    android:text="@string/grolist" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_xmore"
    android:text="@string/more" />
</LinearLayout>

</LinearLayout> 
```

编辑：新布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@raw/mexicanbg"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/buttonbacksubreclist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:background="@drawable/back_button"
        android:onClick="back" />

    <TextView
        android:id="@+id/textViewreclist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginLeft="45dp"
        android:text="@string/reclist"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</LinearLayout>

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="382dp" />

<LinearLayout
android:layout_width="match_parent"
android:layout_height="362dp" >

<Button
    android:id="@+id/buttonRecipes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/menu_xrecipes"
    android:onClick="recipe"
    android:text="@string/rec" />

<Button
    android:id="@+id/buttonGroList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/menu_xgrocery"
    android:onClick="grocerylist"
    android:text="@string/grolist" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/menu_xmore"
    android:text="@string/more" />

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:10:40.680

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@raw/mexicanbg"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/buttonbacksubreclist"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:background="@drawable/back_button"
            android:onClick="back" />

        <TextView
            android:id="@+id/textViewreclist"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="45dp"
            android:text="@string/reclist"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/real1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ListView
            android:id="@+id/android:list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:scrollX="true" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@+id/real1" >

        <Button
            android:id="@+id/buttonRecipes"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/menu_xrecipes"
            android:onClick="recipe"
            android:text="@string/rec" />

        <Button
            android:id="@+id/buttonGroList"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/menu_xgrocery"
            android:onClick="grocerylist"
            android:text="@string/grolist" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/menu_xmore"
            android:text="@string/more" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:03:42.207

用相对布局替换最后一个线性布局，并指定`android:layout_alignParentBottom="true"` 并将 RelativeLayout 作为您的根布局

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:25:00.643

试试这个 ：

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:background="@raw/mexicanbg"
      android:orientation="vertical" >

 <LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/buttonbacksubreclist"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15dp"
    android:background="@drawable/back_button"
    android:onClick="back" />

<TextView
    android:id="@+id/textViewreclist"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginLeft="45dp"
    android:text="@string/reclist"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#000000" />

   </LinearLayout>

   <LinearLayout
android:layout_width="match_parent"
android:layout_height="200dp" >

  <ListView
android:id="@+id/android:list"
android:layout_width="fill_parent"
android:layout_height="200dp" />
 </LinearLayout>

 <LinearLayout
 android:layout_width="match_parent"
 android:layout_height="wrap_content" >

<Button
android:id="@+id/buttonRecipes"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@drawable/menu_xrecipes"
android:onClick="recipe"
android:text="@string/rec" />

<Button
android:id="@+id/buttonGroList"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@drawable/menu_xgrocery"
android:onClick="grocerylist"
android:text="@string/grolist" />

<Button
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@drawable/menu_xmore"
android:text="@string/more" />

 </LinearLayout>

   </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:32:44.623

我找到了答案……问题不在于按钮……而在于我的 ListView。我没有把重量放在我的列表视图上。这是我最终的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@raw/mexicanbg">

   <LinearLayout
   android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:orientation="horizontal"
        android:background="@drawable/xpage_label">

    <TextView
        android:id="@+id/textViewrecipe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="10dp"
        android:layout_marginBottom="10dp"
        android:text="@string/rec"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000" />

 </LinearLayout>

 <ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" />

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content" >

     <Button
         android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@drawable/menu_xrecipes"
         android:onClick="recipe" />

     <Button
         android:id="@+id/buttonGroList"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@drawable/menu_xgrocery"
         android:onClick="grocerylist" />

     <Button
         android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:background="@drawable/menu_xmore" />
 </LinearLayout>

</LinearLayout> 
```

# c# - WCF 服务中的 WebOperationContext.Current null

> ID：12511090
> 
> 赞同：2
> 
> 时间：2012-09-20T10:49:47.047
> 
> 标签：c#, wcf, weboperationcontext

我有一个**WCF**服务，其服务文件为 -`Serivce.svc` 在这里我可以使用`WebOperationContext.Current`

服务文件中的代码访问数据访问实用程序层，该层进行其他调用；我需要根据传入的header在数据访问层做一些工作。

然而，`WebOperationContext.Current`就`null`在这里。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:16:55.387

从您的问题来看，您的“数据访问实用程序层”似乎取决于通过标头传递给服务的信息。明确这一点，最好通过一个接口，以便它易于测试。像这样的东西：

```
public class DataAccessLayer(IMetaInfoFromHeaders requiredInfo)
{ /* implementation */ } 
```

（或者，您可以只`IMetaInfoFromHeaders`为 DAL 中的一个或几个方法提供参数，如果这看起来更好 - 这取决于具体情况。）

您的服务负责处理消息。它应该从标头中提取信息，并使用实现的对象将其传递给 DAL `IMetaInfoFromHeaders`。

底线：不要让 DAL 依赖于 WebOperationContext。

# c - c 中的 malloc 但使用 2d 语法...编译没有答案

> ID：12511091
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:49:49.843
> 
> 标签：c, pointers, multidimensional-array, malloc

我试图找到一种分配单个内存块的方法，但使用多维语法，我在 SO 上找到了我正在寻找的确切内容。

[C 中的 malloc，但使用多维数组语法](https://stackoverflow.com/questions/3144132/malloc-in-c-but-use-multi-dimensional-array-syntax/3144577#3144577)

但是在剪切/粘贴代码之后：

```
 int (*MAGICVAR)[200] = malloc(400 * sizeof *MAGICVAR);
    MAGICVAR[20][10] = 3; 
```

弹出此错误消息：“无法使用 void * 类型的数组来初始化 int(*)[200] 类型的实体”并且将 malloc 强制转换为“int *”或“int **”也无济于事"

我正在使用vs2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:52:39.473

首先，使用 C 编译器而不是 C++ 编译器来编译 C 代码，其次，如果必须使用 C++ 编译器，请将返回值`malloc`转换为声明的类型，

```
int (*MAGICVAR)[200] = (int(*)[200])malloc(400*sizeof *MAGICVAR); 
```

# c# - 销售人员记录

> ID：12511092
> 
> 赞同：1
> 
> 时间：2012-09-20T10:49:50.900
> 
> 标签：c#, sql, database, database-design

我正在设计这个数据库和 c# 应用程序，将记录保存到数据库中。现在说我们有三个销售人员，每个人都应该被分配一个严格轮换的记录，这样他们就可以处理相同数量的记录。

到目前为止，我所做的是创建一个名为`Records`and one`SalesPerson`的表，记录将 salesperson`id`作为外键，另一列将说明它分配给哪个代理并将增加该列。

你认为这是一个好的设计，如果不是，你能给出任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:27:56.820

为此，我将使用分析函数`ROW_NUMBER`和`NTILE`（假设您的 RDBMS 支持它们）。这样，您可以为每个可用的销售人员分配一个从 1 递增的伪 id，然后随机分配这些伪 id 中的每个未分配记录，以便在销售人员之间平均分配它们。使用伪 ID 而不是实际 ID 允许`SalesPersonID`字段不连续。例如

```
-- CREATE SOME SAMPLE DATA
DECLARE @SalesPerson TABLE (SalesPersonID INT IDENTITY(1, 1) NOT NULL PRIMARY KEY, Name VARCHAR(50) NOT NULL, Active BIT NOT NULL)
DECLARE @Record TABLE (RecordID INT IDENTITY(1, 1) NOT NULL PRIMARY KEY, SalesPersonFK INT NULL, SomeOtherInfo VARCHAR(100))

INSERT @SalesPerson VALUES ('TEST1', 1), ('TEST2', 0), ('TEST3', 1), ('TEST4', 1);
INSERT @Record (SomeOtherInfo)
SELECT  Name
FROM    Sys.all_Objects 
```

使用此示例数据，第一步是找到可将记录分配给的可用销售人员数量：

```
DECLARE @Count INT = (SELECT COUNT(*) FROM @SalesPerson WHERE Active = 1) 
```

接下来使用 CTE 包含窗口函数（因为它们不能在连接子句中使用）

```
;WITH Records AS
(   SELECT  *,
            NTILE(@Count) OVER(ORDER BY NEWID()) [PseudoSalesPersonID]
    FROM    @Record
    WHERE   SalesPersonFK IS NULL       -- UNALLOCATED RECORDS
), SalesPeople AS
(   SELECT  SalesPersonID, 
            ROW_NUMBER() OVER (ORDER BY SalesPersonID) [RowNumber]
    FROM    @SalesPerson
    WHERE   Active = 1                  -- ACTIVE SALES PEOPLE
) 
```

最后用实际的销售人员 ID 而不是伪 ID 更新记录 CTE

```
UPDATE  Records
SET     SalesPersonFK = SalesPeople.SalesPersonID
FROM    Records
        INNER JOIN SalesPeople
            ON PseudoSalesPersonID = RowNumber 
```

**[全部组合在一个 SQL 小提琴中](http://www.sqlfiddle.com/#!3/a19335/2)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:53:56.517

这很令人困惑，因为我怀疑您正在使用数据库术语“记录”以及对象/实体“记录”。

不过，在一个表中具有唯一标识符并在另一个表中作为外键具有唯一标识符的简单概念很好，是的。它避免了冗余。

[标准化的基础](http://databases.about.com/od/specificproducts/a/normalization.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T13:43:38.510

它主要是像 DeeMac 所说的那样。但是，如果您`Record`是一个对象（即它具有所有工作详细信息或其销售或交易），那么您需要将该表分开。有一张`Record`包含该特定对象的所有详细信息的表格。有另一个表“销售员”，其中包含有关销售人员的所有详细信息。（在一个好的设计中，您只需在此表中添加职位的特定业务相关属性。所有个人详细信息将放在不同的表中）

现在对于您的问题，您可以构建两个单独的表。一个是`Record_Assignment`您将 a 分配给`Record`a 的位置`Salesman`。该表将保存所有活动作业。另一张桌子将`Archived_Record_Assignment`存放所有过去的工作。您将所有已完成的作业移至此处。

对于平等的工作分配，你说你想要循环分配。我不确定您是想在所有可用的销售人员之间分配工作，还是只分配给特定数量的销售人员。通常任务是由团队分配的。创建一个表（比如 table `SalesTeam`），其中包含您要分配工作的销售人员的销售员 ID（添加团队 ID，如果您有多个团队在各自分配的工作区域或客户上工作。通常是这种情况）。当您要分配新工作时，查询`Record_Assignment`表中的最后一条记录，获取销售员 id 并将工作分配给`SalesTeam`表中的下一个销售员。分配将通过业务逻辑（编码）完成。

我不完全了解您的情况。这些都是我的猜测，所以如果你根据你的情况看到了什么，请告诉我。

祝你好运！

# ios - CABasicAnimation 回到下一个动画前的原始位置

> ID：12511104
> 
> 赞同：1
> 
> 时间：2012-09-20T10:50:33.053
> 
> 标签：ios, rotation, cabasicanimation

我想实现一种基于用户输入旋转 UIButton 的方法。在第一次输入时，它应该向左旋转 45 度。在第二次输入时，它应该从第一次旋转后停止的位置再旋转 45 度。

但是在开始第二个动画之前，按钮会回到原来的位置。以下是我使用的方法。

```
- (void)spinLayer:(CALayer *)inLayer duration:(CFTimeInterval)inDuration
        direction:(int)direction
{
    CABasicAnimation* rotationAnimation;

    // Rotate about the z axis
    rotationAnimation = 
    [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];

    // Rotate 360 degress, in direction specified
    rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 1/2 * direction];

    // Perform the rotation over this many seconds
    rotationAnimation.duration = inDuration;

    rotationAnimation.removedOnCompletion = NO;
    rotationAnimation.fillMode = kCAFillModeForwards;

    // Set the pacing of the animation
    rotationAnimation.timingFunction = 
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    // Add animation to the layer and make it so
    [inLayer addAnimation:rotationAnimation forKey:@"rotationAnimation"];

} 
```

# html - 将画布数据转换为图像 canvas.toDataurl 在 IE9 中不起作用

> ID：12511107
> 
> 赞同：1
> 
> 时间：2012-09-20T10:50:39.527
> 
> 标签：html, canvas

我有一个带有绘图的画布元素，我想创建一个按钮，单击该按钮时，它将图像保存为 png 文件。所以它应该打开保存，打开，关闭对话框......

我用这段代码来做

```
var canvas = document.getElementById("myCanvas");
window.open(canvas.toDataURL("image/png")); 
```

但是当我在 IE9 中测试它时，会打开一个新窗口，上面写着“无法显示网页”，它的 url 是：

数据：图像/png；base64，iVBORw0KGgoAAAANSUhEUgAAAmAAAABpCAYAAACd+58xAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAADRwSURBVHhe7V0HgBVF0q7ZJSlJwRxAPUFRD39RFLN34qGnnomoqIjhzBlFPROIgsoZzogR5AQEzJ4BPFAUEUwgJjgQkCQKooggaf/6el6/6ZnpSW/zUn237u5MdXX1172+z6rqaqeEG6VsJet+pDW/vkdrfx3H3yfT2tVzaP26X6hkw1q/BoeI/280/29JwznZxJPUyXtBQBAQBAQBQaBcECjefmi56BWlZYtAeqajx/WokfrJYEqOIikOFRfXoVq161PtOk2odu0t+ectqKiojnrntWhC46QhYOtXfUarl79Ivy9/ldau+h+tX/8b2SbjJ07pWFQy2Uqnp2yXSrQJAoKAICAICALJCAgBS8ao8iTi/UvpSZlBxiwqwWOKimsxCWtEdettR3XqbEfFtRonkrBYArZh3fe0+senadWyEbRm1UzasP53K45ZiFc84RKyVXkbVUYWBAQBQUAQyIqAELCsiFW2fDQpSyZk8UQMMysqKmaPWCOqt8mOVK/eTuQU1YuccCQBW7dyIq38/j5a/fN/ad3a5QGXmqsvLfGKJl0ZCFdONEOPyl5lGV8QEAQEAUGghiMgBKzqLHCeHqVOrILtduF4MpZExEqoVq167A3bmjap34J/bmoFqcj2dM3Pr9GK+b1p5bJXmXz9nEC+ 3FiorYF4hcmXlo+gUrk+um/+e+QoVWfxxRJBQBAQBAQBQUAQqBwE8uzCwiMiaEqOWYR5jJ2/6Hl58nYHk0Pr1v1Ov62cTytXfE5r1yyyc6RgDhjI16+L+tLqFZ9xnteGUKc0Xi876YpYkFDCfpqFEz9YGpRERhAQBAQBQaB8ERAPWPnim157JreX6/eK7eJ/Ge0RS8oPc9gT1pTqN2jFocltfdPxecBU2HHxgBTky+71CjPGCO+YyU4j0TU9ZcGf0y+JSAoCgoAgIAgIAoJATUcgG2dQ0jpKZ/Xp+PlLtEcs3huGQhO/r17K3rBvuGrEUt8i5HPAkHC/Yt6lKuwYKiuRM9TtGbY0rcerTBLwC/KY1fSNJ/MTBAQBQUAQqAwExANWGaiHx0z2aJl9CknET+MRc2XsVSKKaNP6O1CDhvtwYn5dJZf3gOG0IxLuS0e+LB4vw9sVhiwmHywmF6xqLLdYIQgIAoKAICAICAJVAQHTo2XmkNtzv6K5R7RXLOwRs3MaW+47SNkG9oRxZQmun6qbImCo84VSE+5pR3/zvFZJni/7e8tTHiCeqCkAqsKKig2CgCAgCAgCgoAgUG0RCBKzMLmwkzHdL4pk4XlUAn7Uu3XrVtPqVfO4lurPSq0KQa5cdAv9snBgqM5XFPlKSsSPM8o3mcxES2hZtf0rEMMFAUFAEKiBCEgIsqotavpk/OiwZViHPQk/LgHfHo5EnbCGjVpxeYo9yNmw9oeSn2YeTatWTPNzozzX8ZOeWPJlJVRJnrOoxUtJtmLEUmqoartH7BEEBAFBQBCoJggIASu/hUqkUokC2rZkwSSCBU12wpadhNXbpAk13vwwKlJ3O/L1QmYrxPNlDxuGyVtyIn6K8KSZHwY3XsRX+W0L0VyTEPjwM6KuFxN1uiB6Vkv48MpdjxLt9ieieQvscuvWE13eh2jnQ9zv+ F2aICAICAKCQGEIRH22559H5IqnDTMGeU/SgUJ7WNLjOVH9g8/Xrv2Fa4P9SM6K7y4t+WXRw76sfVc42fPV936iJ5+LKrbqTU0P3rA+0dZbEh20L9HJHYj23I2oVrHFT5U5NFnY4m6svUA0Pvo8efbvjCBqtr0nN+IVot4Dkvv1v5aoy/HJcpUpsfI3olffdknV0uWuJfv9kWjkw55VIFAfM073PE4EkqZbEBf9HMTs8C6e3KhHiPbdqzJnKWMLAoJAeSMgHrDyRrj0+rOEGvVoYY9Y0inIeE+YqQ+cqGGj3dgDtvJjC/mKm7BHmG68lGjO+0T

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:55:29.487

因为他们从未实施过。提交了一个错误，IE 团队将其作为“设计”关闭，因为他们认为这是一个功能请求。

[https://connect.microsoft.com/IE/feedback/details/587136/supporting-data-uris-for-all-resources](https://connect.microsoft.com/IE/feedback/details/587136/supporting-data-uris-for-all-resources)

# kobold2d - Kobold2D中如何使用AppDelegate alternateView替换rootViewController

> ID：12511113
> 
> 赞同：0
> 
> 时间：2012-09-20T10:51:04.287
> 
> 标签：kobold2d, appdelegate

我想创建一个包含 cocos2d CCDirector 视图和我自己的 UIViews 的容器视图的 Kobold2D 应用程序。我可以从文档中看到，这可以使用 AppDelegate 中的 alternateView 方法来完成，但我看不到如何使用此方法以及它应该返回什么。你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:53:37.300

它应该简单地返回一个 UIView。“Cocos2D with UIKit Views”模板项目使用alternateView方法来创建这种容器视图：

```
@implementation AppDelegate

-(id) alternateView
{
    // we want to be a dummy view the self.view to which we add the glView plus all other UIKit views
    KKAppDelegate* appDelegate = (KKAppDelegate*)[UIApplication sharedApplication].delegate;

    // add a dummy UIView to the view controller, which in turn will have the glView and later other UIKit views added to it
    CGRect bounds = [appDelegate.window bounds];
    UIView* dummyView = [[UIView alloc] initWithFrame:bounds];
    [dummyView addSubview:[CCDirector sharedDirector].view];

    return dummyView;
}

@end 
```

此代码位于您项目的**AppDelegate.m**

# ruby-on-rails - 在 ROR 的视图页面中访问控制器的对象属性

> ID：12511114
> 
> 赞同：0
> 
> 时间：2012-09-20T10:51:17.647
> 
> 标签：ruby-on-rails

我是 ROR 的新手并正在学习它。在我的控制器中，我有一个管理员记录，我将该管理员对象传递给管理员的视图页面以获取管理员的名称。但是当我尝试访问它显示错误的名称时：

`undefined method 'name' for :current_admin:Symbol`

请帮忙..请在下面找到我的代码

```
Sessions Controller

def create
  admin=Admin.find_by_email(params[:session][:email].downcase)
  if admin && admin.authenticate(params[:session][:password])
    redirect_to(admins_index_path(:current_admin=>admin))
  end
end 
```

在 index_admin 的视图页面中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:09:08.100

在您的操作中，`index_admin`您需要从您的参数中获取一个管理对象。参数的值通常只是一个字符串。

```
def create
  admin=Admin.find_by_email(params[:session][:email].downcase)
  if admin && admin.authenticate(params[:session][:password])
    redirect_to(admins_index_path(:current_admin => admin.id))  # pass the id, not the object
  end
end

def index_admin
  @current_admin = Admin.find(params[:current_admin])
end 
```

在您的 index_admin.html.erb 中：

```
Hi <%= @current_admin.name %> 
```

# objective-c - 如何在 iPhone 上的 Spotify 应用中找出正在播放的歌曲

> ID：12511115
> 
> 赞同：0
> 
> 时间：2012-09-20T10:51:17.627
> 
> 标签：objective-c, ios5, spotify

是否可以在 Spotify 应用程序中获取当前播放歌曲的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:58:55.173

抱歉，目前我不相信这个功能是可能的。但是，根据您的应用程序的要求，您可以使用 Spotify 的 last.fm scrobbling 代替从那里拾取当前正在播放的歌曲。

# xcode - XCode 3 -> 4 混乱

> ID：12511116
> 
> 赞同：0
> 
> 时间：2012-09-20T10:51:29.870
> 
> 标签：xcode

我刚刚从 OSX 10.6 -> 10.8 升级。我安装了 XCode 3.2.6，并通过应用商店安装了 4.5。我现在似乎已经安装了两个版本（我不介意），但我不知道现在一切都在哪里，/Developer 似乎没有任何新东西。

另外，我的 svn 等命令行工具现在已经停止工作，找不到它们。我知道 XCode 4 有更新更好的工具（更新的 SVN、Git 等），但我如何才能很好地设置它？我认为命令行工具是 XCode 4 安装的一部分。

如果需要，卸载 3.2.6 很好，我只是想避免冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:26:28.483

我会查找从 Xcode 3 迁移到 4 的任何转换指南。有很多不同的功能，因此可能需要一段时间才能适应新的布局以及 Xcode 放置东西的位置。

尝试以下链接作为初学者：

[http://docs.xamarin.com/ios/tutorials/transitioning_from_xcode_3_to_xcode_4](http://docs.xamarin.com/ios/tutorials/transitioning_from_xcode_3_to_xcode_4)

[http://beginning-mac-programming.timisted.net/xcode-4-general-overview.html](http://beginning-mac-programming.timisted.net/xcode-4-general-overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:03:17.080

为了回答您的具体问题，Xcode 4.5 位于您的 Applications 文件夹中。它被打包为单个应用程序，而不是使用 /Developer 文件夹。Xcode 3.2.6 位于您的 /Developer 文件夹中。您可以同时安装这两个版本。

Xcode 4.5 最初不安装命令行工具。您可以从 Xcode 的下载首选项安装它们。您也可以通过选择 Xcode > Open Developer Tool > More Developer Tools 来安装它们。

# java - 为什么 Bitmap.createBitmap() 返回与源位图不同的可变位图？

> ID：12511117
> 
> 赞同：3
> 
> 时间：2012-09-20T10:51:29.377
> 
> 标签：java, android, bitmap, bitmapfactory

根据文档`Bitmap createBitmap (Bitmap source, int x, int y, int width, int height, Matrix m, boolean filter)`方法：

> 从源位图的子集中返回一个不可变的位图，由可选矩阵转换。新位图可能是与源相同的对象，或者可能已经制作了副本。它以与原始位图相同的密度进行初始化。如果源位图是不可变的并且请求的子集与源位图本身相同，则返回源位图并且不创建新位图。

我有一种将方向应用于现有位图的方法：

```
private Bitmap getOrientedPhoto(Bitmap bitmap, int orientation) {
        int rotate = 0;
        switch (orientation) {
            case ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
            case ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            default:
                return bitmap;
        }

        int w = bitmap.getWidth();
        int h = bitmap.getHeight();
        Matrix mtx = new Matrix();
        mtx.postRotate(rotate);
        return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
    } 
```

我从这里调用它：

```
Bitmap tmpPhoto = BitmapFactory.decodeFile(inputPhotoFile.getAbsolutePath(), tmpOpts);
Bitmap orientedPhoto = getOrientedPhoto(tmpPhoto, orientation); 
```

我已经检查过它`tmpPhoto`是不可变的，但`getOrientedPhoto()`仍然返回可变图像，它是 tmpPhoto 的副本。有谁知道如何在`Bitmap.createBitmap()`不创建新位图对象的情况下使用以及我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T11:27:05.317

似乎这种方法的文档确实不清楚。我在`Bitmap` `crateBitmap()`方法中找到了这段代码：

```
// check if we can just return our argument unchanged
if (!source.isMutable() && x == 0 && y == 0 && width == source.getWidth() &&
    height == source.getHeight() && (m == null || m.isIdentity())) {
    return source;
} 
```

这意味着源位图只有在它是不可变的并且不需要转换的情况下才会返回。

# firebug - Firebug 热键切换命令行/编辑器

> ID：12511120
> 
> 赞同：1
> 
> 时间：2012-09-20T10:51:37.640
> 
> 标签：firebug

萤火虫 1.10.3

默认热键是否可用于在命令行和命令编辑器之间切换？不然怎么配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:00:15.257

在这里[Keyboard and Mouse Shortcuts](https://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts) and [Firebug Preferences](https://getfirebug.com/wiki/index.php/Firebug_Preferences)你会得到所有的快捷键

# android - 从互联网下载图像（AsyncTask），耗时太长

> ID：12511124
> 
> 赞同：0
> 
> 时间：2012-09-20T10:51:55.663
> 
> 标签：android

我正在使用 AsyncTask 执行连接到 Internet、下载数据、然后获取 Internet 的图片的操作。

图像也是从互联网获得的，但是当服务器响应时，应用程序会得到一个 FC。

尽管需要服务器，但我如何才能获取数据 AsyncTask？

然后我把我用来下载数据的代码：

```
class CargaImgs extends AsyncTask<Void, Void, Bitmap> {

    final ProgressDialog progressDialog = new ProgressDialog(imagen.this);

    protected void onPreExecute() {
        progressDialog.setTitle("");
        progressDialog.setMessage("Cargando Imagen...");
        progressDialog.show();
    }

    protected Bitmap doInBackground(Void... params) {
        return urlImageToBitmap(imageUrl(StrUrl));
    }

    protected void onPostExecute(Bitmap imagen) {
        RawBmp = imagen;
        sourceBmp = RawBmp;
        sourceBmp = redimensionarImagenMaximo(sourceBmp, screen_w, screen_h);
        imageWidth = sourceBmp.getWidth();
        imageHeight = sourceBmp.getHeight();
        showBmp = Bitmap.createBitmap(sourceBmp);
        main.invalidate();
        primera_carga = false;
        progressDialog.dismiss();
    }
}

private String imageUrl(String url) {
    Document doc = null;
    try {
        doc = Jsoup.connect(url).get();
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    Elements div_exterior = doc.getElementsByClass("inner");
    for (Element subelementos : div_exterior) {
        Elements imgs = subelementos.getElementsByTag("img");
        StrUrlImage = imgs.get(1).attr("src");
        if (StrUrlImage == StrUrlImage2) {

        } else {
            return imgs.get(1).attr("src");
        }
    }
    return null;
}

public Bitmap urlImageToBitmap(String urlImage) {
    Bitmap mIcon1 = null;
    URL url_value;
    try {
        url_value = new URL(urlImage);
        if (url_value != null) {
            mIcon1 = BitmapFactory.decodeStream(url_value.openConnection()
                    .getInputStream());
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return mIcon1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:05:40.560

避免在绘制时使用 main.invalidate()（再次绘制整个视图——每次执行 AsyncTask 时）而是将位图设置为所需的视图或仅使该视图无效。

```
public Bitmap urlImageToBitmap(String urlImage) {
    Bitmap mIcon1 = null;
    URL url_value;
    try {
        url_value = new URL(urlImage);
        if (url_value != null) {

            URLConnection conn = url_value.openConnection();
            conn.setConnectTimeout(10000);

            mIcon1 = BitmapFactory.decodeStream(conn.getInputStream());
        }
    } catch (SocketTimeoutException e) {
        e.printStackTrace();
    }catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return mIcon1;
} 
```

而关于postExecute，如果doInBackground有异常，会返回null，可能会导致空指针异常。所以在执行后处理。

# javascript - 类型错误：x 未定义

> ID：12511126
> 
> 赞同：1
> 
> 时间：2012-09-20T10:52:02.593
> 
> 标签：javascript, html

我有这个标记

```
<form name="sortbyformtop">
   <select onchange="location.href=sortbyformtop.sortbyselecttop.options[selectedIndex].value" id="sortbyselecttop">
      <option value="/Search"></option>
      <option value="/Search?sortby=accommodationtype">Accommodation type</option>
      ...
   </select>
</form> 
```

每当我在下拉列表中选择一个选项时，我都会在 Firebug 中收到此 Javascript 错误：

```
TypeError: sortbyformtop.sortbyselecttop is undefined 
```

这种事情在某种程度上可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:53:35.580

尝试

```
location.href= document.getElementById('sortbyselecttop').options[document.getElementById('sortbyselecttop').selectedIndex].value; 
```

或不久

```
location.href= this.options[this.selectedIndex].value; 
```

因为`this`在这种情况下相当于`document.getElementById('sortbyselecttop');`

* * *

`selectedIndex`需要绑定到特定的选择元素（它是选择本身的属性），否则您正在寻找一个名为的全局（未定义）变量`selectedIndex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:54:11.807

而不是`sortbyformtop.sortbyselecttop`给`this`或`document.getElementById('sortbyselecttop')`。

```
document.getElementById('sortbyselecttop').options[document.getElementById('sortbyselecttop').selectedIndex].value 
```

或者

```
this.options[this.selectedIndex].value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:57:24.480

一个较短的版本：

```
location.href = this.options[this.selectedIndex].value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T10:55:25.953

您为什么要在内联事件处理程序中执行此操作？

我确信可以做你想做的事情 - 我认为你可能需要在你的选择元素上使用一个“名称”属性而不是一个 ID，但是有一个单独的函数可能更容易给你一点更大的灵活性 - 然后从您的事件处理程序中调用该函数。

```
onchange="doSomething();" 
```

# ruby-on-rails - 如何使用 REST 访问 Rails 控制器的创建方法

> ID：12511128
> 
> 赞同：0
> 
> 时间：2012-09-20T10:52:08.183
> 
> 标签：ruby-on-rails, rest

我有一个 Rails 应用程序，它有一个名为模型的模型，它`Product`有两个名为`product_name`,的字段`product_price`。设计 gem 也用于身份验证。电子邮件和密码是登录的两个凭据。

如何使用**REST**创建产品？URL 结构是什么？

谢谢

我的网络应用程序功能齐全。我想创建一个 API 来从另一个网站访问这个应用程序。我想提供一个 URL，一个人将在其中单击并在我的站点中创建产品。

前提是该人已注册。所以我的主要问题是，如何通过 URL 将身份验证、发布、产品名称、产品价格等请求发送到创建操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:07:41.670

```
# Models:

class User
  has_many :products
end
class Product
  belongs_to :user
end

# Routes:

resources :user  # Access stuff individually
resources :product
resources :user do # or nested, e.g. user/:id/product/:id   
  resources :product
end

# type rake rake routes to see the paths you can use. 

# Forms can use, e.g. for product for a given user 
<%= form_for ([@user,@product]) do |p| %>

# Links can be of the form 
<%= link_to 'Add User', new_user_path %> 
```

# android - android中的ClassDefNotFound错误

> ID：12511129
> 
> 赞同：3
> 
> 时间：2012-09-20T10:52:11.027
> 
> 标签：android, json

```
 new Thread(new Runnable() {
                public void run() {
                    HttpClient client = new DefaultHttpClient();
                    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
                    HttpResponse response;
                    JSONObject json = new JSONObject();
                    try{
                        HttpPost post = new HttpPost(URL);
                        post.setHeader("Content-type", "application/json");
                        json.put("username", userName);
                        json.put("password", password);
                        StringEntity se = new StringEntity( json.toString());
                        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                        post.setEntity(se);
                        response = client.execute(post);
                        /*Checking response */
                        if(response!=null){
                            String temp = EntityUtils.toString(response.getEntity()); //Get the data in the entity
                            JSONObject json2 = (JSONObject)new JSONParser().parse(temp);

                            //JsonObject o = new JsonParser().parse(temp).getAsJsonObject();
                            Log.v("response", json2.get("state").toString());
                    }}
                    catch(Exception e){
                        e.printStackTrace();
                        //createDialog("Error", "Cannot Estabilish Connection");
                    }
                }
              }).start(); 
```

我有这段代码，它返回“temp”字符串。我想将此字符串解析为 JSON 对象，并将 json-simple 1.1.1.jar 添加到我的引用库中。但是 classnotfound 错误和 classdeffound 错误出现在 log cat 中。如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T11:01:27.643

不要像那样添加 jar 文件..按照这些步骤

你应该试试这个：

1.  `Remove``JAR`Java 中对项目中的所有引用`project -> properties -> Java build path -> libraries`

2.  `libs`如果项目根目录不存在，则创建一个文件夹 将其复制`JAR`到 libs 文件夹中。

3.  如果仍然没有运行确定。右键单击您的项目 > Android 工具 > 修复项目属性

清理你的项目并运行。它会起作用的

# json - Aptana 给出 JSON 格式错误

> ID：12511130
> 
> 赞同：0
> 
> 时间：2012-09-20T10:52:30.877
> 
> 标签：json, aptana

格式：

```
{
    "lastUpdate" : "20/9/2012-12:12",
    "data":[{
        "user" : "_name_",
        "username" : "_fullname_",
        "photoURL" : "_url_"
    }, {
        "user" : "_name_",
        "username" : "_fullname_",
        "photoURL" : "_url_"
    }, {
        "user" : "_name_",
        "username" : "_fullname_",
        "photoURL" : "_url_"
    }]
} 
```

Aptana 在`:`

[截图 Aptana JSON 格式](http://postimage.org/image/vix8i4u6d/)

这是为什么？看来我在接收和处理数据时没有任何问题。

[编辑 1] 给出的错误：语法错误：意外标记“：”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:59:04.547

在 Aptana 中，仅当您创建/打开扩展名为 .json 的文件时，json 才会被“解析为 json”。

当 .js 文件中有一个 json 对象时，只有 javascript 解析器才能工作，因为您会看到错误，这不是 JS 的有效令牌。

# ruby-on-rails - Ruby on Rails - 为 option_groups_from_collection_for_select 的每个 optgroup 添加选项

> ID：12511134
> 
> 赞同：0
> 
> 时间：2012-09-20T10:52:42.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以下代码：

```
<%= select_tag "Cat", option_groups_from_collection_for_select(Category.all, :subcategories, :name, :id, :name, 3) %> 
```

将产生如下输出：

```
姓名
    满的
    第一的
    最后的
    用户名
    昵称
电子邮件
    个人的
    工作
...

```

我需要为每个 optgroup 标签（名称、电子邮件）附加一个“全部”选项，以便输出如下：

```
姓名
    全部
    满的
    第一的
    最后的
    用户名
    昵称
电子邮件
    全部
    个人的
    工作
...

```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:36:50.963

我会说为每个类别添加一个虚拟子类别“All”，并在控制器中适当地处理“All”的选择。

或（在评论后添加）：

获取 的输出字符串`options_groups_from_collection_for_select`，对其进行 xml 解析（例如使用 Nokogiri），找到所有类别节点并添加以下形式的 xml 子节点

```
<option value="<categoryname>-all">All</option> 
```

并对结果进行字符串化。之后，您可以`<categoryname>-all`在控制器中处理返回的值。

# css-float - H1在左边，“按钮”在右边，垂直对齐

> ID：12511135
> 
> 赞同：12
> 
> 时间：2012-09-20T10:52:54.760
> 
> 标签：css-float, vertical-alignment, css, alignment

我试图在一行上显示：

*   与包含框左侧对齐的 H1 元素
*   几个“按钮”（此处为 A 元素）对齐到包含框的右侧
*   都在同一个基线上

是否可以用最少的标记（即没有包装元素）并且不必设置精确的高度、行高、边距顶部等来做到这一点？

```
<div id="block1">
    <h1>What a great title</h1>
    <a href="javascript:void(0)">This link can kill you</a>
    <a href="javascript:void(0)">Click if you dare</a>
</div> 
```

这里的小提琴显示了我觉得是两个不兼容的方向（内联块，你不能向右对齐，浮动向右，你不能垂直对齐）：http: [//jsfiddle.net/GlauberRocha/bUsvX/](http://jsfiddle.net/GlauberRocha/bUsvX/)

任何的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T15:15:15.900

我很久以前对我的网站做了这个：左边是一个h2，右边是一个按钮。截屏：
[![](../Images/06cf572d3bacd13d8bc3f842341afcd9.png)](https://dzwonsemrish7.cloudfront.net/items/0t3b3L1B023a2l3E300O/Screen%20Shot%202012-11-01%20at%204.13.15%20PM.png?v=05184fa9)

代码：

```
<div id="side_bar" class="clearfix">
  <h2 style="float: left;">Charity Map</h2>
  <button class="btn btn-primary" style="float: right; position: relative; top: 10px; right: 10px;">Submit</button>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T11:19:00.897

您的布局可能存在问题 - 如果您`H1`的布局太长而按钮也太长怎么办？他们会互相冲撞。正因为如此，没有简单的 CSS 会起作用——CSS 不会像那样做魔法——它必须暗示对上述问题的某种解决方案。

然而，你想要的可以简单地使用绝对定位来完成：

```
<div style="position: relative;">
    <h1 style="position: absolute; left: 0; top: 0">What a great title</h1>
    <div style="position: absolute; right: 0; top: 0; text-align: right">
        <a href="javascript: void(0)">This link can kill you</a>
        <a href="javascript: void(0)">Click if you dare</a>
    </div>
</div> 
```

如果您真的担心标题和锚容器可能会根据生成的内容相互碰撞，您可以使用 CSS`max-width`和`overflow`属性将它们的包含框限制为一些合理的值。溢出的内容将被隐藏，但至少布局不会在视觉上破坏。我假设对上述代码的以下修改（请原谅重复）将达到目的：

```
<div style="position: relative;">
    <h1 style="position: absolute; left: 0; top: 0; max-width: 50%; overflow: hidden">What a great title</h1>
    <div style="position: absolute; right: 0; top: 0; text-align: right; max-width: 50%; overflow: hidden">
        <a href="javascript: void(0)">This link can kill you</a>
        <a href="javascript: void(0)">Click if you dare</a>
    </div>
</div> 
```

最后，您*无法*使用简单的 CSS 属性组合来实现这一点，因为使用 CSS（和 HTML），内容从左到右、从上到下流动，或者它变成绝对定位或固定定位，这会中断流动。无论如何，它不想保持在同一条线上，而您作为布局设计师需要解决这种布局会引入的歧义，例如当从每个方向运行的两列火车相互碰撞时该怎么办：- )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:22:16.923

没有任何包装元素或固定值很难实现......

为标题和链接添加固定的行高将很快解决您的问题。

*   将您的链接与 'display:block; float:right' 向右。
*   现在设置“行高：40px；” 标题和链接

应该工作，但只有当标题的大小没有改变时......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T07:07:46.037

根据您的确切需求，一种可能的方法是使用表格布局：

```
#block3 {
  display: table;
  width: 100%;
  box-sizing: border-box;
}

#block3 > * {
  display: table-cell;
}

#block3 > *:last-child {
  text-align: right;
} 
```

JSFiddle：http: [//jsfiddle.net/bUsvX/39/](http://jsfiddle.net/bUsvX/39/)

如果您希望按钮严格正确对齐，我认为此解决方案需要另一个元素来包装它们：

JSFiddle：http: [//jsfiddle.net/bUsvX/40/](http://jsfiddle.net/bUsvX/40/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-20T10:55:07.080

我有同样的问题..添加`display:inline`到 h1，然后是按钮：`float:right; display:inline;`

示例（使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)）：

```
<h2 style="display:inline">Users</h2>

<a href="users.xls"><i class="icon-download-alt"></i>XLS</a>

<form style="display:inline; float:right;">
   <input type="text" class="input-medium search-query" name="search">
   <button class="btn" type="submit">Search</button>
</form> 
```

# android - 在 Android 中禁用 EditText 的硬键盘输入

> ID：12511140
> 
> 赞同：0
> 
> 时间：2012-09-20T10:53:06.440
> 
> 标签：android, android-input-method

我是 android 新手，我需要设置一个 EditText 以仅使用软键盘输入。它不应该显示我使用硬键盘键入的任何文本。这可能吗？

更新：我使用硬键盘输入在 Activity 类中使​​用 onKeyDown 方法跟踪键事件并执行单独的任务，当 EditText 字段被聚焦时，它会显示我使用硬键盘按下的键。我需要避免这种情况，只让软键盘输入到特定的 EditText 字段中，并将硬键盘输入用于不同的任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T10:59:54.283

根据您的需要，您可以在 Android Manifest File 中设置键盘设置。

```
<uses-configuration android:reqFiveWayNav=["true" | "false"] 
            android:reqHardKeyboard=["true" | "false"]
            android:reqKeyboardType=["undefined" | "nokeys" | "qwerty" |  
                                     "twelvekey"]
            android:reqNavigation=["undefined" | "nonav" | "dpad" | 
                                   "trackball" | "wheel"]
            android:reqTouchScreen=["undefined" | "notouch" | "stylus" | 
                                    "finger"] /> 
```

# java - 级联示例编译失败？

> ID：12511147
> 
> 赞同：42
> 
> 时间：2012-09-20T10:53:29.840
> 
> 标签：java, hadoop, gradle, cascading, scalding

`cleanJar`在 shell 中，我在 Impatient/part1 目录中输入了 gradle 。输出如下。错误是“**找不到 org.apache.hadoop.mapred.JobConf 的类文件**”。为什么编译失败？

```
:clean UP-TO-DATE
:compileJava
Download http://conjars.org/repo/cascading/cascading-core/2.0.1/cascading-core-2.0.1.pom
Download http://conjars.org/repo/cascading/cascading-hadoop/2.0.1/cascading-hadoop-2.0.1.pom
Download http://conjars.org/repo/riffle/riffle/0.1-dev/riffle-0.1-dev.pom
Download http://repo1.maven.org/maven2/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.pom
Download http://repo1.maven.org/maven2/org/slf4j/slf4j-parent/1.6.1/slf4j-parent-1.6.1.pom
Download http://repo1.maven.org/maven2/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.pom
Download http://conjars.org/repo/thirdparty/jgrapht-jdk1.6/0.8.1/jgrapht-jdk1.6-0.8.1.pom
Download http://repo1.maven.org/maven2/org/codehaus/janino/janino/2.5.16/janino-2.5.16.pom
Download http://conjars.org/repo/cascading/cascading-core/2.0.1/cascading-core-2.0.1.jar
Download http://conjars.org/repo/cascading/cascading-hadoop/2.0.1/cascading-hadoop-2.0.1.jar
Download http://conjars.org/repo/riffle/riffle/0.1-dev/riffle-0.1-dev.jar
Download http://repo1.maven.org/maven2/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar
Download http://repo1.maven.org/maven2/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar
Download http://conjars.org/repo/thirdparty/jgrapht-jdk1.6/0.8.1/jgrapht-jdk1.6-0.8.1.jar
Download http://repo1.maven.org/maven2/org/codehaus/janino/janino/2.5.16/janino-2.5.16.jar
/home/is_admin/lab/cascading/Impatient/part1/src/main/java/impatient/Main.java:50: error: cannot access JobConf
    Tap inTap = new Hfs( new TextDelimited( true, "\t" ), inPath );
                ^
  class file for org.apache.hadoop.mapred.JobConf not found
1 error
:compileJava FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileJava'.
> Compilation failed; see the compiler error output for details.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 22.599 secs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T15:10:30.957

尝试使用 Java 6，gradle 有一些 Java 7 的已知问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T09:34:10.537

将 hadoop-core-1.xyjar 从 hadoop 分发添加到路径。

这在 CoPA 示例中对我有用。我添加到 Eclipse 构建路径。

将此添加到 gradle 依赖项{} 部分

编译（组：'org.apache.hadoop'，名称：'hadoop-core'，版本：'1.2.0'）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T14:18:56.173

今天我在尝试不耐烦教程的[级联时遇到了同样的问题。](http://docs.cascading.org/impatient/index.html)我已经解决了将以下内容添加到我`build.gradle`的`dependencies`部分：

```
compile 'org.apache.hadoop:hadoop-client:2.3.0' 
```

我想使用 Hadoop 2.3.0，但我想您可以选择自己的 Hadoop 版本。

**PS**：为了使用第一个`hadoop-mapred`包，您必须添加以下内容：

```
compile 'org.apache.hadoop:hadoop-mapred:0.22.0' 
```

您可以在[此处](http://mvnrepository.com/artifact/org.apache.hadoop)找到 Hadoop 可能需要的所有存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T09:49:16.923

似乎找不到类，请检查构建路径条目中的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-09T07:04:09.910

谢谢拉利特，添加以下行对我来说是诀窍，而无需更改任何 java 版本..

```
compile( group: 'org.apache.hadoop', name: 'hadoop-core', version: '1.2.0' ) 
```

或者，我什至可以在类路径中添加 hadoop-core jar，并在 gradle 路径中提及

# batch-file - 查看输出日志文件

> ID：12511158
> 
> 赞同：0
> 
> 时间：2012-09-20T10:54:13.613
> 
> 标签：batch-file

我的批处理文件中有一个带有命令输出的日志文件。
我想查看此文件并检查是否有错误。
这是该文件的错误行：

> 2012 年 9 月 20 日上午 7:22:34 [错误] 重新加载资源表时发生错误：VALUE 重复

我怎样才能检查它？
我尝试以下方法：

```
for /f "tokens=4 %%x in (%TMPLog%) do 
    if "%%x"=="ERROR" SET err=TRUE 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T10:59:20.530

您可以轻松得多：

```
findstr /l /c:"[Error]" "%TMPLog%" >nul 2>&1 && set err=1 
```

另一个随机注释：对于布尔变量，我倾向于在它为真时定义变量的模式，而在它为假时未定义。然后你可以简单地检查它，`if defined err`它可以减少错误输入比较值的错误，并且在没有延迟扩展的情况下在块中正常工作（另一个常见的错误来源）。只是如果你想知道为什么我使用`set err=1`而不是`set err=TRUE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:19:18.087

Joey 为您的问题提供了最简单的解决方案。但他没有解释为什么你的代码不起作用。

除非使用括号，否则整个 DO 子句必须在一行。

```
for /f ... do ... 
```

或者

```
for /f .... do (
   ...
) 
```

您的搜索条件也有缺陷。

您可以修复您要查找的字符串：

```
for /f "tokens=4" %%x in (%TMPLog%) do if "%%x"=="[ERROR]" SET err=TRUE 
```

或者您可以修复您要查找的位置：

```
for /f "tokens=5" %%x in (%TMPLog%) do if "%%x"=="ERROR" SET err=TRUE 
```

但我仍然推荐 Joey 的 FINDSTR 解决方案，而不是任何基于 FOR 的解决方案。

# python - 如何在python中解码无效的json字符串

> ID：12511159
> 
> 赞同：7
> 
> 时间：2012-09-20T10:54:13.117
> 
> 标签：python, json, python-2.7

我想知道是否有办法解码类似 JSON 的字符串。

我得到了字符串：

```
'{ hotel: { id: "123", name: "hotel_name"} }' 
```

它不是一个有效的 JSON 字符串，所以我无法直接使用 python API 对其进行解码。Python 将只接受字符串化的 JSON 字符串，例如：

```
 '{ "hotel": { "id": "123", "name": "hotel_name"} }' 
```

其中属性被引用为字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T11:07:26.623

使用[demjson](http://deron.meranda.us/python/demjson/)模块，它可以在非严格模式下解码。

```
In [1]: import demjson
In [2]: demjson.decode('{ hotel: { id: "123", name: "hotel_name"} }')
Out[2]: {u'hotel': {u'id': u'123', u'name': u'hotel_name'}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:59:58.097

您可以尝试使用 JavaScript 引擎的包装器，[例如**pyv8**。](http://code.google.com/p/pyv8/)

```
import PyV8
ctx = PyV8.JSContext()
ctx.enter()
# Note that we need to insert an assignment here ('a ='), or syntax error.
js = 'a = ' + '{ hotel: { id: "123", name: "hotel_name"} }'
a = ctx.eval(js)
a.hotel.id
>> '123' # Prints 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-12T17:11:32.553

[@vartec](https://stackoverflow.com/a/12511364/857390)已经指出`demjson`，它适用于稍微无效的 JSON。对于我写的更不符合 JSON 的数据[`barely_json`](https://github.com/torfsen/barely_json)：

```
from barely_json import parse
print(parse('[no, , {complete: yes, where is my value?}]')) 
```

印刷

```
[False, '', {'complete': True, 'where is my value?': ''}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:03:00.037

不是很优雅，也不是很健壮（而且很容易破坏），但是可以用类似的东西来混合它：

```
kludged = re.sub('(?i)([a-z_].*?):', r'"\1":', string)
# { "hotel": { "id": "123", "name": "hotel_name"} } 
```

您可能会发现使用[pyparsing](http://pyparsing.wikispaces.com/Examples)和`parsePythonValue.py`示例也可以执行您想要的操作......（或很容易修改为这样做）或者`jsonParser.py`可以修改为不需要引用的键值。

# styles - Google Fusion Tables：两层，一层有样式

> ID：12511161
> 
> 赞同：0
> 
> 时间：2012-09-20T10:54:26.077
> 
> 标签：styles, layer, google-fusion-tables

我正在尝试使用具有两层的 Google Fusion Tables 创建地图，其中一个我想添加样式。我也有多个列，我想使用下拉菜单在这些列之间切换。到目前为止，我设法做到了后者，但我一直在尝试添加第二层。

我现在拥有的地图显示了加纳 170 个地区的学校中女生与男生的比例。通过下拉菜单，我可以在小学和初中之间切换。现在我想添加一个带有区域边界的图层。

在文档中我看到了这个：

> 您可以使用 Maps API 将最多五个 Fusion Tables 图层添加到地图中，其中一个可以使用最多五个样式规则设置样式。

这几乎正​​是我想要的，但我也保留了下拉菜单。我最近开始使用 Fusion Tables，希望有人能帮助我。

我要添加的层的ID：1_0rcifQnnNpLV1VjTPyzDZSF3LHp-7rowzrXM78

以及工作地图的代码：

PS：我是一个完全的新手，并[以卫报制作的这张地图](http://www.guardian.co.uk/news/datablog/interactive/2012/sep/13/hate-crime-map-england-wales)为基础。我摆脱了所有我认为不需要的东西，但代码中可能还剩下一些不必要的东西。

```
 <!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

<head>

                <title>Gender Parity Index | Education | 2011</title>
        <meta charset="utf-8" />

                            <style type="text/css">
  body { font-family: Arial, sans-serif; }
  #map_canvas { height: 600px; width:575px; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript" id="script">

var center = new google.maps.LatLng(7.972198, -0.716284);
var zoom = 7;
var legend_width = '150px';
var tableid = '12GLQaH4wvwByxBk4W7UHkJTr99vsxymCTYHmkXs';
var location_column = 'geometry';
var colors = ['#CA0020','#F4A582','#F7F7F7','#92C5DE','#0571B0']; 
var columns = {
  'Gender parity index at primary education': [
    {
      'min': 0.6,
      'max': 0.8,
      'color': '#CA0020'
    },
    {
      'min': 0.8,
      'max': 0.95,
      'color': '#F4A582'
    },
    {
      'min': 0.95,
      'max': 1.05,
      'color': '#F7F7F7'
    },
    {
      'min': 1.05,
      'max': 1.2,
      'color': '#92C5DE'
    }
  ],
  'Gender parity index at junior high school education': [
     {
      'min': 0.6,
      'max': 0.8,
      'color': '#CA0020'
    },
    {
      'min': 0.8,
      'max': 0.95,
      'color': '#F4A582'
    },
    {
      'min': 0.95,
      'max': 1.05,
      'color': '#F7F7F7'
    },
    {
      'min': 1.05,
      'max': 1.2,
      'color': '#92C5DE'
    },
    {
      'min': 1.2,
      'max': 1.6,
      'color': '#0571B0'
    }

  ]
}

var map, layer, geocoder;

function initialize() {

  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: center,
    zoom: zoom,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var style = [ { stylers: [ { invert_lightness: true } ] },{ featureType: "road.highway", stylers: [ { hue: "#00e5ff" } ] },{ featureType: "poi.park", stylers: [ { visibility: "off" } ] },{ featureType: "landscape.natural", stylers: [ { visibility: "on" } ] },{ featureType: "water", stylers: [ { color: "#080808" } ] },{ featureType: "landscape.natural", stylers: [ { color: "#202020" } ] },{ featureType: "administrative.province", elementType: "labels", stylers: [ { visibility: "on" } ] },{ featureType: "administrative.locality", elementType: "labels", stylers: [ { visibility: "on" } ] },{ featureType: "administrative.country", elementType: "labels", stylers: [ { visibility: "off" } ] },{
  featureType: 'road',
  elementType: 'all',
  stylers: [
  { saturation: -99 }
  ]
  } ];

  geocoder = new google.maps.Geocoder();

  var styledMapType = new google.maps.StyledMapType(style, {
    map: map,
    name: 'Styled Map'
  });

  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');

  layer = new google.maps.FusionTablesLayer({
    query: {
      select: location_column,
      from: tableid
    }
  });
  layer.setMap(map);

  init_selectmenu();
  addStyle(getKey());

}

function getKey() {
  for(key in columns) {
    return key;
  }
}

// Initialize the drop-down menu
function init_selectmenu() {
  var selectmenu = document.getElementById('selector');
  for(column in columns) {
    var option = document.createElement('option');
    option.setAttribute('value', column);
    option.innerHTML = column;
    selectmenu.appendChild(option);
  }
}

function addStyle(column) {
  var defined_styles = columns[column];
  var styles = new Array();

  for(defined_style in defined_styles) {
    var style = defined_styles[defined_style];
    styles.push({
      where: generateWhere(column, style.min, style.max),
      polygonOptions: {
        fillColor: style.color,
        fillOpacity: 0.9,
        strokeOpacity: 0.50,
        strokeColor: "#f3f3f3"
      }
    });

  }

  layer.set('styles', styles);
  updateLegend(column);
}

// Create the where clause
function generateWhere(column_name, low, high) {
  var whereClause = new Array();
  whereClause.push("'");
  whereClause.push(column_name);
  whereClause.push("' >= ");
  whereClause.push(low);
  whereClause.push(" AND '");
  whereClause.push(column_name);
  whereClause.push("' < ");
  whereClause.push(high);
  return whereClause.join('');
}

// Create the legend with the corresponding colors
function updateLegend(column) {
  var legendDiv = document.createElement('div');
  var legend = new Legend(legendDiv, column);
  legendDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_TOP].pop();
  map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legendDiv);
}

// Generate the content for the legend
function Legend(controlDiv, column) {
  controlDiv.style.padding = '10px';
  var controlUI = document.createElement('div');
  controlUI.style.backgroundColor = 'white';
  controlUI.style.borderStyle = 'solid';
  controlUI.style.borderWidth = '1px';
  controlUI.style.width = legend_width;
  controlUI.title = 'Legend';
  controlDiv.appendChild(controlUI);
  var controlText = document.createElement('div');
  controlText.style.fontFamily = 'Arial,sans-serif';
  controlText.style.fontSize = '12px';
  controlText.style.paddingLeft = '4px';
  controlText.style.paddingRight = '4px';

  controlText.innerHTML = legendContent(column);
  controlUI.appendChild(controlText);
}

function legendContent(column) {
  var defined_styles = columns[column];

  // Generate the content for the legend using colors from object
  var controlTextList = new Array();
  controlTextList.push('<p><b>');
  controlTextList.push(column);
  controlTextList.push('</b></p>');
  for(defined_style in defined_styles) {
    var style = defined_styles[defined_style];
    controlTextList.push('<div style="background-color: ');
    controlTextList.push(style.color);
    controlTextList.push('; height: 20px; width: 20px; margin: 3px; float: left;"></div>');
    controlTextList.push(style.min);
    controlTextList.push(' to ');
    controlTextList.push(style.max);
    controlTextList.push('<br style="clear: both;"/>');
  }

  controlTextList.push('<br />');
  return controlTextList.join('');
}

</script>
</head>

<body onload="initialize();">

<select onchange="addStyle(this.value);" id="selector" style="font-size: 16px"></select>

<div id="map_canvas"></div>

                        </div>
    <script>
        // send the query string to the iFrame
        (function() {
            var interactive = jQ('#interactive iframe');
            if (interactive.length > 0) {
                var qs = window.location.search;
                interactive[0].src = interactive[0].src + qs;
            }
        })();
    </script>
</div>
            <div id="related">

</script>

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:50:41.447

只需在方法末尾添加第二层，`initialize()`如下所示：

```
function initialize() {
    // ... all the other stuff ...

    borderLayer = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '1_0rcifQnnNpLV1VjTPyzDZSF3LHp-7rowzrXM78'
        }
    });
    borderLayer.setMap(map);
} 
```

[请参阅jsFiddle 上第二层代码](http://jsfiddle.net/odi86/K9EQQ/)的工作示例。

# java - Axis2 + Tomcat：Web 服务工作目录

> ID：12511163
> 
> 赞同：0
> 
> 时间：2012-09-20T10:54:30.290
> 
> 标签：java, axis2, tomcat7

所以我有一个 Axis2 Web 服务（称为“ReleaseService”），它需要一个属性文件才能正常工作。我已将axis2部署到RHEL6上的Tomcat7中，并具有如下结构：

```
tomcat/webapps/axis2
+ axis2-web, META-INF, org
+ WEB-INF
+ + classes, conf, lib, modules
+ + services
+ + + ReleaseService
+ + + + com, lib, META-INF 
```

考虑到 Java，我希望工作目录是`tomcat/webapps/axis2/WEB-INF/services/ReleaseService`，因为它包含一个 lib 文件夹和我的二进制文件的根文件夹。

所以我把我的属性文件放在那里并试图通过

```
File configFile = new File("releaseservice.properties"); 
```

这显然不起作用。我找了好几个小时，但找不到告诉我工作目录在哪里的帖子或文档片段。我找到[了这个](https://stackoverflow.com/questions/8918329/write-and-read-file-on-web-service-axis2-tomcat-7)，但系统属性对我来说不是选项，因为我想保持部署简单。

发现工作目录是我的`tomcat/bin`文件夹，它是Tomcat Java进程的根目录。

**额外问题：**如何在我的 Web 服务中找到我的服务目录？Axis2 是否提供任何帮助程序来找出服务的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:42:29.457

不建议对部署在 Java EE 容器中的应用程序代码中的当前工作目录进行假设。此外，您假设在部署 WAR 时，`releaseservice.properties`将作为文件存在，即容器会爆炸 WAR。这对 Tomcat 来说是正确的，但在其他服务器上可能不是这样。

Axis2 为每个部署的服务创建一个不同的类加载器。这意味着您可以通过将其作为资源查找来访问您的属性文件：

```
MyService.class.getResourceAsStream("/releaseservice.properties") 
```

替换`MyService`为实现您的服务的实际类，或从`WEB-INF/services/ReleaseService`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:24:14.593

显然工作目录是`tomcat/bin`文件夹。尽管似乎在 tomcat 中运行了一个专用应用程序，但它都是同一个 Java 进程。

通过添加以下调试代码找到它：

```
File test = new File("abc.txt");
System.out.println(test.getAbsolutePath()); 
```

哪个返回`/opt/tomcat/bin`

# json - 在 C# 中使用 JSON.NET 反序列化 twitter JSON 以获取主题标签

> ID：12511171
> 
> 赞同：4
> 
> 时间：2012-09-20T10:55:04.053
> 
> 标签：json, .net-4.0, twitter, json.net

也许我在重复这个问题，但我是第一次尝试这个问题，但我找不到与我的情况完全一样的东西。

我正在用 C# 编码并使用 JSON.NET 反序列化 json。json 文件来自 twitter 作为对此 GET 请求的响应：
[https](https://api.twitter.com/1/statuses/home_timeline.json?include_entities=true)

://api.twitter.com/1/statuses/home_timeline.json?include_entities= true json 是来自 20 条最新推文（json 对象）的列表给定用户的 twitter 时间线和单个 json 对象的格式如下：

```
{
"created_at": "Thu Sep 20 10:25:39 +0000 2012",
"id": 248729631476314100,
"id_str": "248729631476314112",
"text": "Ask the experts and learn what's new with v.2.2 at  at #MongoDBPune (http://t.co/o5BA7zd6) and #MongoDBBangalore (http://t.co/7q3E2MBq)",
"source": "<a href=\"http://www.socialrithmic.com\" rel=\"nofollow\">Socialrithmic</a>",
"truncated": false,
"in_reply_to_status_id": null,
"in_reply_to_status_id_str": null,
"in_reply_to_user_id": null,
"in_reply_to_user_id_str": null,
"in_reply_to_screen_name": null,
"user": {
  "id": 18080585,
  "id_str": "18080585",
  "name": "mongodb",
  "screen_name": "MongoDB",
  "location": "",
  "url": "http://mongodb.org/",
  "description": "High-performance, open source, schema-free document-oriented  database   | www.facebook.com/MongoDB",
  "protected": false,
  "followers_count": 24999,
  "friends_count": 16,
  "listed_count": 1582,
  "created_at": "Fri Dec 12 17:21:18 +0000 2008",
  "favourites_count": 6,
  "utc_offset": -18000,
  "time_zone": "Eastern Time (US & Canada)",
  "geo_enabled": true,
  "verified": false,
  "statuses_count": 1669,
  "lang": "en",
  "contributors_enabled": false,
  "is_translator": false,
  "profile_background_color": "529747",
  "profile_background_image_url": "http://a0.twimg.com/profile_background_images/619655093/767dji3m3k684nza7w9z.png",
  "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/619655093/767dji3m3k684nza7w9z.png",
  "profile_background_tile": false,
  "profile_image_url": "http://a0.twimg.com/profile_images/2452709870/wo2h8r0qy8d5lsxe5lgd_normal.png",
  "profile_image_url_https": "https://si0.twimg.com/profile_images/2452709870/wo2h8r0qy8d5lsxe5lgd_normal.png",
  "profile_link_color": "43B02A",
  "profile_sidebar_border_color": "829D5E",
  "profile_sidebar_fill_color": "99CC33",
  "profile_text_color": "3E4415",
  "profile_use_background_image": true,
  "default_profile": false,
  "default_profile_image": false,
  "following": true,
  "follow_request_sent": null,
  "notifications": null
},
"geo": null,
"coordinates": null,
"place": null,
"contributors": null,
"retweet_count": 1,
"entities": {
  "hashtags": [
    {
      "text": "MongoDBPune",
      "indices": [
        55,
        67
      ]
    },
    {
      "text": "MongoDBBangalore",
      "indices": [
        95,
        112
      ]
    }
  ],
  "urls": [
    {
      "url": "http://t.co/o5BA7zd6",
      "expanded_url": "http://soc.ai/ZV",
      "display_url": "soc.ai/ZV",
      "indices": [
        69,
        89
      ]
    },
    {
      "url": "http://t.co/7q3E2MBq",
      "expanded_url": "http://soc.ai/ZW",
      "display_url": "soc.ai/ZW",
      "indices": [
        114,
        134
      ]
    }
  ],
  "user_mentions": []
},
"favorited": false,
"retweeted": false,
"possibly_sensitive": false 
```

}

我使用此代码获取（反序列化）列表：

```
List<JsonObject> list = Newtonsoft.Json.JsonConvert.DeserializeObject<List<JsonObject>>(response); 
```

'response' 保存我的 json。当我插入断点并观察 'list' 中的 json 对象时，我发现了这个：

{ "created_at": "Thu Sep 20 10:25:39 +0000 2012", "id": 248729631476314100, "id_str": "248729631476314112", "text": "请教专家并了解 v.2.2 的新功能在 #MongoDBPune (http://t.co/o5BA7zd6) 和 #MongoDBBangalore (http://t.co/7q3E2MBq)”，“来源”：“Socialrithmic”，“截断”：false，“in_reply_to_status_id”：null， “in_reply_to_status_id_str”：空，“in_reply_to_user_id”：空，“in_reply_to_user_id_str”：空，“in_reply_to_screen_name”：空，“用户”：[[[]]，[[]]，[[]]，[[]]，[ []]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、 [[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、[[]]、 [[]]，[[]]，[[]]，[[]]，[[]]，[[]]，[[]]，[[]]]，“地理”：空，“坐标” : null, "place": null, "contributors": null, "retweet_count": 1, "entities":[[[[[[]]，[[[]，[]]]]，[[[]]，[[[]，[]]]]]]，[[[[[]]]，[[] ]、[[]]、[[[]、[]]]]、[[[]]、[[]]、[[]]、[[[]、[]]]]]]、[[] ] ], "收藏"：假，“转推”：假，“可能敏感”：假}

我打算从所有 20 个 json 对象中收集所有主题标签。所以基本上我需要在实体*内部导航*到主题标签到文本。但如上所示，反序列化只是部分的。它不会反序列化任何嵌套的东西。

我该如何解决？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:42:59.890

我的妈呀！[从这个 stackoverflow 问题](https://stackoverflow.com/questions/8101049/json-net-parsing-issue-with-twitter-api-data)中得到它。谢谢@chill182！

这是你如何做到的：

```
 ArrayList hashtags = new ArrayList();

            JArray jsonDat = JArray.Parse(response); 
            for(int x = 0; x < jsonDat.Count(); x++) 
            {
                JObject entity = JObject.Parse(jsonDat[x]["entities"].ToString());
                JArray arrHashtags = JArray.Parse(entity["hashtags"].ToString());
                for(int i=0; i < arrHashtags.Count(); i++)
                {
                    JObject hashtagstuff = JObject.Parse(arrHashtags[i].ToString());
                    hashtags.Add(hashtagstuff["text"].ToString());
                }
            } 
```

不要忘记在命名空间中包含 Linq :)

```
using Newtonsoft.Json.Linq; 
```

# ios - 将 iPhone 应用程序转换为 iPhone 和 iPad 应用程序（非通用）

> ID：12511173
> 
> 赞同：1
> 
> 时间：2012-09-20T10:55:07.770
> 
> 标签：ios, ipad, ios-universal-app

我有一个现有的 iPhone 应用程序。

我需要为 iPad 应用程序创建一个单独的应用程序（当然还要使用共享代码）。

但是让这两个应用程序作为一个应用程序上传到苹果商店。

创建一个新目标是否适合我的情况？如果是的话，你能给我提供一步一步的教程吗？

谢谢。

# sql-server - 使用远程服务器进行sql复制

> ID：12511177
> 
> 赞同：1
> 
> 时间：2012-09-20T10:55:17.500
> 
> 标签：sql-server, sql-server-2008, replication

PI 正在尝试复制两个数据库。

1.  LAN 网络中的数据库（发布者）
2.  虚拟专用网络中的数据库（订阅者）

根据我的情况，复制发布者在我的 LAN 网络中的服务器上实现。但订阅者在虚拟专用服务器上实现。我将路由器端口配置到 LAN 网络中的服务器计算机。使用虚拟服务器上的 sql management studio，我连接到 LAN 网络中的数据库。但是当我尝试使用虚拟服务器数据库创建订阅者时，我无法访问发布者。（在 LAN 网络中。）它给出的错误如下。

“SQL Server 复制需要实际的服务器名称来建立与服务器的连接。不支持通过服务器别名、IP 地址或任何其他备用名称的连接。指定实际的服务器名称，'BESTLIFE\BESTLIFECROWN'。（复制。实用程序）”

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:29:00.557

您没有说您使用的是 GUI 还是脚本，但在某个地方，调用了一个存储过程（可能是 sp_addsubscription），其服务器名称与实际服务器名称不匹配。例如，上面的错误消息表明服务器名为 BESTLIFE\BESTLIFECROWN。如果这不是您作为托管订户放置的服务器的名称，那么它将无法正常工作。无论您需要添加 DNS 别名还是其他任何内容，这都是适用于此设置的唯一值。

# facebook - 包括社交插件显示没有朋友面孔

> ID：12511181
> 
> 赞同：0
> 
> 时间：2012-09-20T10:55:34.003
> 
> 标签：facebook, plugins, social, facepile

所以实际上我想在网站上的所有文章中包含 facepile。我添加了开发人员页面给出的 html5 代码，并在我的测试页面上包含了元标记。为了喜欢这个页面，我通过 addThis 添加了一个类似 facebook 的按钮。我在测试页的调试器上没有收到错误。我让两个同事喜欢这个页面，我自己也喜欢这个页面。

现在我去测试页面，它说有 3 个人喜欢这个页面，正确。但是没有面孔出现，我的朋友和我的朋友都没有。因此，我在 facebook 开发者页面上对其进行了测试，以便 facepile 输入我的测试页面的 url。结果插件说我和另外两个人喜欢那个页面，它显示的是我的脸，但不是我的朋友。所以我请一位同事喜欢 facebook 开发者 facepile 页面并在 facepile 插件向导中输入该 url。结果是这样说我，我的朋友和无数其他人，并显示我的脸和我的朋友的照片。

我尝试在调试器页面上添加一个有效且没有错误的应用程序 ID。但是我的测试页上仍然没有出现任何面孔。

最后，我在我的测试页中添加了“Like Button”、“Like Box”。喜欢按钮显示 我和其他人喜欢该页面，但只显示我的脸。Like Box 呈现一个错误，说我应该检查 href 和 facepile 仍然没有显示任何内容，而不是有多少人喜欢该页面。

这东西真的有用吗？我究竟做错了什么？为什么 facepile 只适用于 facebook 开发者 url 而不是我的。以及为什么插件有时会在我的 url 上显示我的脸，但没有其他的。

调试，如果你可以这样调用我的试错过程，我发现facepile插件对url非常挑剔。但是，如果我喜欢并在插件中引用的 url 完全相同，它也不起作用。这实际上并不容易，因为喜欢按钮总是将“fb_action_ids fb_action_types fb_ref fb_source fb_aggregation”之类的东西添加到网址中。我也无法找出为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:54:02.633

我有同样的问题。我已经多次关注官方教程，我认为你也是。您是否尝试过多次使用相同的参数重新加载？对我来说，朋友列表和朋友数量在某些选项中发生了变化。

让我们假设 3 个人喜欢包括我在内的链接。然后选项是以下之一：

1.  只有我喜欢
2.  我和另外 2 个人喜欢
3.  3 人点赞并附图

我找不到解决方案。我只是猜测这与 Facebook 保证最低响应速度的内部政策有关。所以响应可能不正确，但不是错误的。

ps 错误是指错误的朋友或人在此处的点赞列表中列出。

# css - 在 Flex 的 swf 文件中嵌入外部 CSS

> ID：12511187
> 
> 赞同：0
> 
> 时间：2012-09-20T10:55:52.040
> 
> 标签：css, apache-flex, stylesheet, embedded-resource

我希望一些 Flex (SDK 4.6) 应用程序共享相同的样式表（存储在 CSS 文件中）。但是，我不想沿着这些应用程序的 SWF 分发独立文件，而是想将 CSS 文件嵌入到 Flex 应用程序文件中（就像嵌入图像等一样）。CSS 声明包括字体嵌入，因此（我认为）不可能在运行时加载 CSS。

我已经发现：

1.  我不能简单地使用`<fx:Script source="@Embed(stylesheet.css)" />`. 语法错误。

2.  我不能在应用程序之间共享的某些 MXML 组件中使用内联样式表，因为 CSS 包含组件中不允许的类型声明。

3.  我可以选择将 CSS 编译为 SWF，但这会创建独立的 SWF 文件（因此我可以将 Flex 框架嵌入 SWF 但不是独立的 CSS ;]）。

我希望我遗漏了一些明显的东西，这很容易实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:20:54.520

*   创建一个库项目（生成一个 swc 文件）
*   将样式表添加为资源
*   将此项目（或编译后的 swc）放在其他项目的构建路径上
*   您现在可以在其他项目中使用此资源：
    `<fx:Style source="stylesheet.css" />`

例如： 在库项目中，**如果** 是源文件夹，则文件应自动打包到库中 如果不是，则必须手动添加文件：在 FlashBuilder 中，这可以通过编辑。在命令行上，使用选项添加它。
`src/stylesheet.css`
`src`
`Assets``Build path``-include-file`

使用 swc 作为库依赖项的**替代方法是将其定义为****主题**依赖项。在 FlashBuilder`Theme`中，项目属性中有一个向导。在命令行上执行：

```
mxmlc -theme="/path/to/my/theme.swc" MyApp.mxml 
```

如果您将它用作主题，您甚至不必`fx:Style`在应用程序中包含标签。默认情况下包含 CSS。但我认为它*必须*命名`defaults.css`。

# html - 如何阻止 Hotmail Active View 预览 HTML 时事通讯中的视频链接

> ID：12511190
> 
> 赞同：1
> 
> 时间：2012-09-20T10:56:12.813
> 
> 标签：html, preview, newsletter, hotmail, activeview

我为客户创建了一个自定义 HTML 时事通讯，它在所有客户中都能正常工作。在 Hotmail 中，时事通讯中的视频链接通过活动视图在页面顶部进行预览。

优酷链接：

```
<a href="https://www.youtube.com/watch?v=dir1TegFGVs" target="_blank" style="color: #0099cc; text-decoration: none; font-size: 13px;"> 
```

我知道[用户可以停用活动视图](http://www.tech-recipes.com/rx/15375/hotmail-how-to-disable-active-view/)，但我想知道是否可以对时事通讯进行编码，以便 hotmail 不会预览视频链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:35:24.470

您是否尝试过像[http://youtu.be/dir1TegFGVs](http://youtu.be/dir1TegFGVs)这样的缩小 URL或像[http://goo.gl/](http://goo.gl/)这样的其他类型？

# iphone - xcode 4.5 运行 ios 4.0 模拟器（不）

> ID：12511191
> 
> 赞同：4
> 
> 时间：2012-09-20T10:56:14.960
> 
> 标签：iphone, ios, xcode, xcode4.5

我刚刚升级到 iOS 6 xcode 4.5
但我发现即使在 Xcode-reference-download 中也只有 ios 5,6
我更喜欢我的应用程序也适用于使用 iOS 4.X 的用户

欢迎任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:08:28.730

如果你在 Lion，你仍然可以下载 4.3 模拟器（至少我使用 Gold Master 版本，据说它仍然适用于最终版本）。

在 Mountain Lion 上，4.3 模拟器有问题（如第一个测试版中所见），因此已被 Apple 删除。

如果您真的需要，您可以使用 Parallels Desktop 或类似工具在 Moutain Lion 上运行 Lion，这就是我所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T11:07:54.180

我可以确认它适用于带有 Xcode 4.5（模拟器 4.3）的 Lion

![在此处输入图像描述](../Images/3d33e9bc78fc882dab8e07a9fd6d0c8f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T13:15:17.573

**XCode 4.5.x 仅支持 armv7 架构：**

ios 6 的 Xcode 4.5.x 更改

1.  Xcode 4.5.x（及更高版本）不支持生成 armv6 二进制文件。
2.  现在包括 iPhone 5/armv7s 支持。
3.  **Xcode 4.5.x 或更高版本支持的最低部署目标是 iOS 4.3**。
4.  对 iPhone 的最低支持是 iPhone 3GS 或更高版本，因为早期版本使用 armv6。

希望这可以帮助....

# jsf-2 - 加载页面时`"`替换为`"`

> ID：12511192
> 
> 赞同：2
> 
> 时间：2012-09-20T10:56:17.833
> 
> 标签：jsf-2, utf-8, xhtml, glassfish-3, quotes

当我查看`"`被替换为`&quot;`. 我的页面如下所示：

```
$(document).ready(function() {
    $("input[name$='case']").click(function() {
        var test = $(this).val();

        if(test == "daglig"){

            $("div.desc").hide();
            $("#daglig_div").show();

        }else if(test == "veckovis"){

            $("div.desc").hide();
            $("#veckovis_div").show();

        }else if(test == "manadsvis"){

            $("div.desc").hide();
            $("#manadsvis_div").show();

        }
    });
}); 
```

当我部署页面时，结果是这样的：

```
$(document).ready(function() {
    $(&quot;input[name$='case']&quot;).click(function() {
        var test = $(this).val();

        if(test == &quot;daglig&quot;){

            $(&quot;div.desc&quot;).hide();
            $(&quot;#daglig_div&quot;).show();

        }else if(test == &quot;veckovis&quot;){

            $(&quot;div.desc&quot;).hide();
            $(&quot;#veckovis_div&quot;).show();

        }else if(test == &quot;manadsvis&quot;){

            $(&quot;div.desc&quot;).hide();
            $(&quot;#manadsvis_div&quot;).show();

        }
    });
});​ 
```

只有页面的这一部分得到了这种奇怪的转换。我尝试过使用不同的编码、字符集、复制页面上没有被替换为`&quot;`、替换`"`为的其他引号，但`&#34;`我仍然得到相同的错误。有人可以帮我解决这个问题吗？

在此先感谢，克莱德蛙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:18:17.030

I "rewrote" the function again myself and it's working now. Apparently the old text had different charsets then my new text i wrote. Very strange bacause i converted the old text to "UTF-8" with notepad++, but obviously it didn't work... thanks anyway to everyone who took the time :)

# iphone - xcode 多个目标

> ID：12511193
> 
> 赞同：1
> 
> 时间：2012-09-20T10:56:20.000
> 
> 标签：iphone, ios, xcode, ipad

我们在 appstore 上有一款 iPad 游戏，并决定制作它的 iPhone 版本。添加新目标、修改必要的视图和类后，游戏可以在 iPhone 和 iPad（设备和模拟器）上完美运行。

我的问题是，我是否必须将新的 iPhone 版本作为完全不同的应用程序上传到 itunesconnect，或者有没有办法为两者使用相同的名称/应用程序 ID？

已经购买了 iPad 应用程序的用户是否需要再次为 iPhone 应用程序付费？

任何能够阐明多个目标和通用应用程序的人都会很棒。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:03:18.547

是的，您必须单独上传新的**iPhone**应用程序，购买您的 iPad 应用程序的用户必须*再次为 iPhone 版本付费*。仅当您一开始还没有为**iPhone**和**iPad开发***通用*应用程序时。如果两者都是，那么就不会有问题。此外，您现在将作为**iphone**的应用程序的名称不能与**iPad**的名称相同，因为该名称仅保留给**iPad**的名称。

# iphone - NSString 变量的内容丢失

> ID：12511194
> 
> 赞同：-2
> 
> 时间：2012-09-20T10:56:23.083
> 
> 标签：iphone, ios, ipad, nsstring

我有一个 NSString 变量 - 它有一个文本 - 苹果在我的一种方法中 - `viewDidLoad`。

同一个变量的文本变成

```
<UIButtonContent: 0x4f8a190 Title = (null), Image = <UIImage: 0x4f5da60>, Background = (null), TitleColor = UIDeviceWhiteColorSpace 1 1, ShadowColor = UIDeviceWhiteColorSpace 0 0.5> 
```

在第一种方法之后执行的另一种方法中。为什么内容会丢失？

编码

```
merchant = [retrieveBusinessData businessName] 
```

`[retrieveBusinessData businessName]`返回一个 nsstring 变量。

```
merchant = [[NSString alloc]initWithFormat:@"%@", [retrieveBusinessData businessName]]; 
```

这是解决我的问题的解决方案。我已经在王子的回复中发帖了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:03:30.973

保留 NSString 变量，因为 NSString 是一个不可变的类

```
[yourString retain]; 
```

# xml - 用groovy从上到下迭代xml文件

> ID：12511195
> 
> 赞同：2
> 
> 时间：2012-09-20T10:56:23.300
> 
> 标签：xml, parsing, groovy, loops

我有一个 xml 文件，它代表一个简单的“脚本”，其中特定元素代表不同的命令。

我想使用 groovy 来解析和“解释”xml 文件。我如何遍历 xml 文件的节点。

我正在使用 xmlSlurper 类来解析我的 xml 文件：

```
def records = new XmlSlurper().parse("./script.xml") 
```

现在我需要从上到下遍历元素并运行一些常规代码......

只是一个示例文件：

```
<script>  
<do> echo :) </do>  
<for from="0" to="3">
     <do> echo hello </do>
</for>
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T11:22:09.443

最好的办法是查看[Groovy XmlSlurper 用户指南](http://groovy.codehaus.org/Reading+XML+using+Groovy's+XmlSlurper)，其中有几个很好的示例。

例如，您可以遍历每个子节点（`<script>`标签将被排除）：

```
def visit(node) {
    node.childNodes().each { child ->
        println child.name
        visit(child)
    }
}

def records = new XmlSlurper().parse("./script.xml")
visit(records) 
```

输出将是

```
do
for
do 
```

* * *

该`visit`函数可以更新为闭包：

```
def visit(node, Closure c) {
    node.childNodes().each { child ->
        c(child)
        visit(child, c)
    }
}

def records = new XmlSlurper().parse("./script.xml")
visit(records) { node ->
    println node.name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:50:12.397

引起了我的兴趣，所以我想出了这个：

```
class XmlRunner {
  def doFor( node ) {
    ((node.@from.text() as Integer)..(node.@to.text() as Integer)).each {
      run( node )
    }
  }

  def doDo( node ) {
    node.text().split().with {
      [it.head(), it.tail()]
    }.with { String cmd, rest ->
      "exec${cmd.capitalize()}"( rest )
    }
  }

  def execEcho( rest ) {
    println rest.join( ' ' )
  }

  def run( root ) {
    root.children().each {
      "do${it.name().capitalize()}"( it )
    }
  }

  static run( String xml ) {
    new XmlRunner().run( new XmlSlurper().parseText( xml ) )
  }

  static run( File xml ) {
    new XmlRunner().run( new XmlSlurper().parse( xml ) )
  }
}

XmlRunner.run( '''<script>  
                 |  <do> echo :) </do>  
                 |  <for from="0" to="3">
                 |    <do> echo hello </do>
                 |  </for>
                 |</script>'''.stripMargin() ) 
```

但是，必须提出以下问题：

1.  为什么不只执行一个 Groovy 脚本？
2.  如果它必须是 XML，为什么 echo 没有得到它自己的节点？
3.  `for`节点应该有一个变量吗？

我只需将其更改为 Groovy 脚本，例如：

```
println ':)'
4.times { println 'hello' } 
```

并以通常的方式从 Groovy 运行它，而不是尝试定义您自己的 XML 语言（除非您有一个非常好的理由我错过了编写您自己的 XML 语言？）

# asp.net-mvc - 在 asp.net MVC 中全球化来自 DB 的动态值

> ID：12511197
> 
> 赞同：0
> 
> 时间：2012-09-20T10:56:24.253
> 
> 标签：asp.net-mvc, globalization

我几乎没有数据库驱动/或来自我无法控制的其他系统的值，那么在这种情况下如何应用全球化？我真的不信任谷歌或微软提供的翻译服务 api，因为我不希望应用程序中的任何地方发生任何错误翻译，导致用户非常尴尬。

那么解决这种情况的最佳解决方案是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:59:22.133

不要期待奇迹，也不要在 .NET 中寻找名为`string Translate(string input, string inputLanguage, string outputLanguage)`. 如果您不想使用第三方翻译服务，因为您不信任它们，并且您无法控制数据发布者，以便它为您提供不同语言的内容翻译，那么您真的无能为力。如果是简单的单词，您可以保留一本字典以便即时执行翻译，但这对于整个句子来说是不切实际的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:05:15.680

我在我的一个产品中遇到过这种情况，我所做的是在数据库设计室中允许 A）“native”/“original”+ B）每个此类值的零或多个翻译/本地化。我已经建立了一个允许翻译这些值的后端接口。这可能是纯粹的人工驱动，或者是自动翻译与人工验证的结合。

# python - rhel6 上的 pysvn-1.7.6，错误：不是 URL、现有文件或需求规范：

> ID：12511202
> 
> 赞同：4
> 
> 时间：2012-09-20T10:56:58.250
> 
> 标签：python, review-board, pysvn

我在 RHEL 6 上安装了 Python 2.7.3，当我尝试安装 pysvn-1.7.6 时，出现错误。我应该怎么办？

```
/search/python/pysvn-1.7.6/Import/pycxx-6.2.4/CXX/Python2/Objects.hxx:2912: warning: deprecated conversion from string constant to 'char*'
Compile: pysvn_svnenv.cpp into pysvn_svnenv.o
Compile: pysvn_profile.cpp into pysvn_profile.o
Compile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxxsupport.cxx into cxxsupport.o
Compile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxx_extensions.cxx into cxx_extensions.o
Compile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxxextensions.c into cxxextensions.o
Compile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/IndirectPythonInterface.cxx into IndirectPythonInterface.o
Link pysvn/_pysvn_2_7.so
make: *** No rule to make target `egg'.  Stop.
error: Not a URL, existing file, or requirement spec: 'dist/pysvn-1.7.6-py2.7-linux-x86_64.egg' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T05:48:05.543

我解决了这个问题，原因是我犯了一个错误。我刚刚执行了以下命令，它不在指令中。

```
python setup.py install 
```

安装步骤是（**Source是pysvn目录中的目录名**）：

```
cd Source
python setup.py configure
make
cd ../Tests
make
cd Source
mkdir [YOUR PYTHON LIBDIR]/site-packages/pysvn
cp pysvn/__init__.py [YOUR PYTHON LIBDIR]/site-packages/pysvn
cp pysvn/_pysvn*.so [YOUR PYTHON LIBDIR]/site-packages/pysvn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T07:36:49.300

我有同样的问题。我找到了这个解决方案并且它正在工作。

下载最新的 epel-release rpm 从

[http://dl.fedoraproject.org/pub/epel/6/x86_64/](http://dl.fedoraproject.org/pub/epel/6/x86_64/)

目前 ：

`wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm`

安装 epel-release rpm：

`rpm -Uvh epel-release*rpm`

安装 pysvn rpm 包：

`yum install pysvn`

# php - PHP Fancybox 相同 ID

> ID：12511203
> 
> 赞同：1
> 
> 时间：2012-09-20T10:57:03.083
> 
> 标签：php, fancybox

这似乎是一个奇怪的请求，但这是我必须根据我提供的实时内容来使用的东西。

我有一个投票系统，它根据条目 id 为投票按钮使用一个 id，所以代码如下所示：

```
<div class="like_wrap">
    <div class="vot_plus" id="vt_img41"></div>
</div><!--like_wrap--> 
```

这适用于我需要的方式，但是当您单击投票中的图像时，它会打开条目的更大图片（同样有效），但客户希望将该投票添加到fancybox弹出窗口中。但是，当添加它时，它会删除所有引用，因为它两次调用相同的 ID。知道如何让投票按钮出现在两者上，但实际上看起来它只出现一次？

这是一个条目的完整代码：

```
<div class="single ">
    <a href='#inline41' rel='example_group' title='NAME GOES HERE'><img src='IMAGE GOES HERE' height='90' width='90' class='image' /></a>
    <div class="right_col">
        <h3>NAME GOES HERE</h3>
        <div class="like_wrap"><div class="vot_plus" id="vt_img41"></div></div><!--like_wrap-->
    </div><!--right_col-->

    <div class="clear"></div><!--clear-->

    <div id="inline41" style="display: none;">
        <img src='IMAGE GOES HERE' height='400' class='image' /></a>
        <div class="vote_bottom">
            <p>Vote: </p>
            <div class="like_wrap"><div class="vot_plus" id="vt_img41"></div></div><!--like_wrap-->
            <div class="clear"></div><!--clear-->
        </div><!--vote_bottom-->
    </div>
</div><!--single--> 
```

任何想法我怎么能做到这一点？

谢谢。

# javascript - 检测用户是否可以查看 facebook Like 按钮

> ID：12511206
> 
> 赞同：0
> 
> 时间：2012-09-20T10:57:12.007
> 
> 标签：javascript, facebook

如您所知，Facebook 在许多国家/地区都被过滤，如果我们在我们的页面中放置“Like”按钮，他们将看到来自其互联网提供商的“ACCESS DENIED”消息，而不是“Like”按钮。所以问题是，我可以检测用户是否可以查看 Facebook 吗？所以如果用户可以访问 Facebook 并且它没有被过滤，我只会显示 Like 按钮。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:18:29.923

`www.facebook.com`通过加载来测试域是否可访问`favicon.ico`，如果是，则显示 iframe：

```
<iframe src="http://www.facebook.com/plugins/like.php" id="fbfm" style="display:none">
</iframe>

<script>
var fbicon = new Image();
fbicon.onload = function() {
  document.getElementById("fbfm").style.display = "";
};
fbicon.src = "http://www.facebook.com/favicon.ico?" + Math.random();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:09:14.010

我想你可以在类似按钮 iframe 上设置一个非常小的宽度和高度，刚好够按钮本身，并希望任何“访问被拒绝”消息有足够的填充在 iframe 的视口中不可见！:)

另一种方法可能是“ping”Facebook，例如发出 AJAX 请求并查看响应是什么。**希望**来自 ISP 的任何被阻止的响应都包含 HTTP 403 状态代码或其他合理的内容，但如果不是，您必须抓取返回的 HTML 并尝试自己确定您看到的是 Facebook 还是错误页面，然后决定是否是否呈现类似按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:09:23.277

使用 Facebook javascript 库：http: [//developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

并使用 FB.getLoginStatus(...) 函数来检查并决定您希望您的应用程序做什么。如果他们已登录或未登录（`connected`或`not_authorized`），则他们已登录 facebook，您可以显示您的点赞按钮。如果状态是`unknown`他们尚未登录但可以看到 Facebook。

如果 facebook 脚本没有加载或返回任何值，那么 facebook 可能被阻止并且您不想显示您的喜欢按钮。

注意：您还需要使用 facebook 创建一个应用程序 ID 以将您的 javascript 链接到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:13:57.490

我的建议是使用[ShareThis](http://sharethis.com/)或[AddThis](http://www.addthis.com/)之类的服务。它们有可能不会在您所在的国家/地区被阻止（您可以在使用或不使用 VPN 之前对其进行测试），并且它们为您提供了一个优势，即您的用户可以在其他可用的门户网站上与朋友分享您的网站他们。

对于其他人来说，知道这些服务在 Facebook 被封锁的国家/地区是否可用肯定会很有趣，因为他们中的许多人无法自己测试。

# razor - CodeMirror textarea.getAttribute is not a function error in mvc3 application

> ID：12511208
> 
> 赞同：9
> 
> 时间：2012-09-20T10:57:20.673
> 
> 标签：razor, codemirror

我在我的 ASP.NET MVC 3 应用程序中使用 CodeMirror，CodeMirror 的版本是最新的（2.34）

我的`textarea`样子是这样的：

```
@Html.TextAreaFieldFor(s => s.Data.CodeBehind, htmlAttributes: new Dictionary<string, object> { { "class", "textbox codeBehind nffp-code" } }) 
```

我像这样使用 CodeMirror：

```
var a = CodeMirror.fromTextArea($code, {
        lineNumbers: true,
        matchBrackets: true,
        mode: "text/x-csharp"
}); 
```

`$code`在哪里

```
var $code = jQuery('.nffp-code', $root); 
```

页面加载后我有这个错误：

> TypeError: textarea.getAttribute is not a function
> codemirror.js
> Line 2209
> textarea.getAttribute("autofocus") != null && hasFocus == document.body;

我使用本手册来使用 CodeMirror： [手册](http://weblogs.asp.net/jgalloway/archive/2011/06/10/using-codemirror-to-add-c-syntax-highlighting-to-an-editable-html-textarea.aspx)

甚至认为，我是 JS 的菜鸟，我想这很难做错，但我还是做到了。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-25T09:39:33.093

您需要使用`document.getElementById()`而不是 jQuery 查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-16T17:22:25.333

```
document.getElementById('contents'); //returns a HTML DOM Object

var contents = $('#contents');  //returns a jQuery Object 
```

在 jQuery 中，要获得与 相同的结果`document.getElementById()`，您可以访问 jQuery 对象并获取对象中的第一个元素（请记住 JavaScript 对象的行为类似于关联数组）。

```
var contents = $('#contents')[0]; //returns a HTML DOM Object 
```

# java - 如何通过鼠标拖动禁用缩放而不通过jfreechart中的mousewheellistener禁用？

> ID：12511210
> 
> 赞同：5
> 
> 时间：2012-09-20T10:57:23.157
> 
> 标签：java, jfreechart

我想通过鼠标拖动禁用缩放（绘制该矩形），但不禁用通过 MouseWheel 进行缩放。我在另一个主题中找到了如何在向左拖动鼠标时禁用缩放重置（restoreAutoBounds），我对如何解决这个问题很感兴趣。有没有什么捷径可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:30:24.423

好的，我已经完成了，通过覆盖 MouseWheelListener。在 chartPannel.setMouseZoomable(false).:

```
chartPanel.addMouseWheelListener(new MouseWheelListener() {
        public void mouseWheelMoved(MouseWheelEvent arg0) {
            if (arg0.getWheelRotation() > 0) {
                chartPanel.zoomOutDomain(0.5, 0.5);
            } else if (arg0.getWheelRotation() < 0) {
                chartPanel.zoomInDomain(1.5, 1.5);
            }
        }
    }); 
```

zoom(In/Out)Domain，因为我只想重新缩放域轴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T10:00:18.930

上一个答案中的鼠标滚轮侦听器实现会移除缩放动画，并且不会从当前鼠标位置进行缩放。我通过使用透明涂料隐藏矩形找到了一种解决方法：

```
chartPanel.setZoomTriggerDistance(Integer.MAX_VALUE);
chartPanel.setFillZoomRectangle(false);
chartPanel.setZoomOutlinePaint(new Color(0f, 0f, 0f, 0f)); 
```

# internet-explorer-8 - IE7、IE8推拉门按键激活状态不工作

> ID：12511216
> 
> 赞同：1
> 
> 时间：2012-09-20T10:57:45.913
> 
> 标签：internet-explorer-8, internet-explorer-7, sliding-doors

我在一个精灵中有不同大小和不同颜色的按钮，使用滑动门技术，在所有主要浏览器中一切都很好，但是，当我尝试在 IE7、IE8 中运行它时，一切似乎都很好，除了：活动状态，它只有在按钮的右上角工作。有什么建议么 ？网址：[http ://www.dmitree.com/temp/cb/buttons2/buttons2.html](http://www.dmitree.com/temp/cb/buttons2/buttons2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T09:02:05.573

在锚类“按钮”内你有跨度。您已在此跨度上应用了高度和线高属性。我想如果您删除高度并仅保留行高将解决您的问题。

但也请检查其他浏览器。因为删除 IE 的高度可能会也可能不会影响其他浏览器。

附加资源：[http ://www.jankoatwarpspeed.com/make-fancy-buttons-using-css-sliding-doors-technique/](http://www.jankoatwarpspeed.com/make-fancy-buttons-using-css-sliding-doors-technique/)

希望这可以帮助

# mysql - 不使用索引（全表扫描）或边界框优化 mysql 距离搜索

> ID：12511218
> 
> 赞同：0
> 
> 时间：2012-09-20T10:57:48.503
> 
> 标签：mysql, select, indexing, distance, bounding-box

我有一个非常慢（0.4 秒）的 mysql 搜索，并且似乎正在扫描所有表行而不使用索引。我尝试将查询限制为仅查找 10 英里边界框中的记录，但查询的速度与似乎没有使用边界框的速度相同。

我已经简化了下面的查询以删除不必要的东西：

```
SELECT lists.* , 
round( sqrt( ( ( (lists.latitude - '53.72153589619174') * (lists.latitude - '53.72153589619174') ) * 69.1 * 69.1 ) + ( (lists.longitude - '-2.4863433837890625') * (adverts.longitude - '-2.4863433837890625') * 53 * 53 ) ), 1 ) as distance
FROM lists
WHERE (lists.type_id = '3') AND (advert_type = '1') AND (lists.status = 1) AND (lists.approved = 1) 
AND (lists.latitude BETWEEN '53.5769627602' AND '53.8661090322' )
AND (lists.longitude BETWEEN '-2.73067484548' AND '-2.2420119221' )
HAVING distance < 10
ORDER BY distance ASC LIMIT 0,20 
```

这是解释：

```
id select_type table    type     possible_keys                                                                                                                    key   key_len  ref                      rows    Extra 

1  SIMPLE      lists    ref      type_breed,searchit,breedsearch,status-approved, typesearch, searchitprice,status_approved_updated, latlon, typesearch-price     searchit   4   const,const,const,const  11867   Using where; Using filesort 
```

这是表和索引：

```
CREATE TABLE `lists` (
`advert_id` int(10) NOT NULL AUTO_INCREMENT,
`user_id` int(10) NOT NULL,
`type_id` tinyint(1) NOT NULL,
`breed_id` int(10) NOT NULL,
`advert_type` tinyint(1) NOT NULL,
`headline` varchar(50) NOT NULL,
`description` text NOT NULL,
`price` int(4) NOT NULL,
`postcode` varchar(7) NOT NULL,
`town` varchar(60) NOT NULL,
`county` varchar(60) NOT NULL,
`latitude` float NOT NULL,
`longitude` float NOT NULL,
`telephone1` varchar(15) NOT NULL,
`telephone2` varchar(15) NOT NULL,
`email` varchar(80) NOT NULL,
`status` tinyint(1) NOT NULL DEFAULT '0',
`approved` tinyint(1) NOT NULL DEFAULT '0',
`date_created` datetime NOT NULL,
`date_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`expiry_date` datetime NOT NULL,
PRIMARY KEY (`advert_id`),
KEY `price` (`price`),
KEY `user` (`user_id`),
KEY `type_breed` (`type_id`,`breed_id`),
KEY `headline_keywords` (`headline`),
KEY `date_updated` (`date_updated`),
KEY `advert_index` (`price`,`status`,`approved`,`date_updated`),
KEY `searchit` (`type_id`,`advert_type`,`status`,`approved`),
KEY `breedsearch` (`type_id`,`breed_id`,`status`,`approved`),
KEY `status-approved` (`status`,`approved`),
KEY `typesearch` (`type_id`,`status`,`approved`,`date_updated`),
KEY `searchitprice` (`type_id`,`advert_type`,`status`,`approved`,`price`),
KEY `status_approved_updated` (`status`,`approved`,`date_updated`),
KEY `latlon` (`latitude`,`longitude`),
KEY `typesearch-price` (`type_id`,`status`,`approved`,`price`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

# nsalert - NSAlert (Cocoa) 中的 setHelpAnchor 使用哪种 helpAnchor？

> ID：12511220
> 
> 赞同：0
> 
> 时间：2012-09-20T10:57:52.187
> 
> 标签：nsalert

我正在尝试向警报添加帮助主题，但真的不知道如何设置帮助文件。我在 Apple 开发者网站上查看了 NSAlert 类参考，但那里的信息量很少。我使用了文件路径和网站网址，但无济于事。我使用这段代码：

> NSAlert *alert = [[[NSAlert alloc] init] autorelease];
> 
> ```
> [alert setMessageText:@"Some error:"];
> 
> [alert setInformativeText:@"Some declaration"];
> 
> [alert setShowsHelp:YES];
> 
> [alert setAlertStyle:NSCriticalAlertStyle]; 
> ```
> 
> //这一行是我的问题 -> [alert setHelpAnchor : @"http://www.google.com"];
> 
> ```
> [alert runModal]; 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:04:51.400

Apple 帮助文档过时且不一致，令人讨厌。不过，[Apple 帮助编程指南](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/user_help_intro/user_assistance_intro.html)描述了如何将锚添加到 Apple 帮助书籍中的主题中。一旦您的帮助书被注册、使用 Help Indexer 应用程序编制索引并与您的应用程序关联，您就可以使用您在要跳转到的主题中指定的锚点。（从开发者网站下载更多工具的 Xcode 机制可以访问 Help Indexer 应用程序。）

# html - 浏览器之间的 HTML 表格边框颜色差异很大

> ID：12511228
> 
> 赞同：4
> 
> 时间：2012-09-20T10:58:14.097
> 
> 标签：html, css, html-table, cross-browser

我有一个烦人的问题，即我的表格在浏览器之间似乎完全不同，它们设置为：

```
<table width="100%" border="1" cellpadding="4"  cellspacing="0" bordercolor="#eeeeee"> 
```

所以左边的（Chrome）在#eeeeee 是正确的，但 FF 和 IE 似乎只是在进行过程中弥补！！我的 CSS 中没有任何事件模糊地接近指定表格边框（我什至尝试取消链接我的 CSS 文件，但问题仍然存在）

有任何想法吗？

![在此处输入图像描述](../Images/b4aa827eb792319fd6accb5d0c0eefce.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T12:25:20.077

> ## @Darkat 工作室
> 
> `<table width="100%" border="1" cellpadding="4" cellspacing="0" style="border: 2px solid #eeeeee;">`- 现在确实有一个浅灰色的边框，但是细胞仍然是黑色的轮廓......非常奇怪！——</p>

你应该删除边框=“1”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T11:23:54.420

试试这个 CSS

```
table{
    border-collapse: collapse;
    border: 1px solid #eee;
    width: 100%;
}
table th,
table td
{
    padding: 4px;
} 
```

并将您的 HTML 更改为简单的状态

```
<table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:02:47.813

在 CSS 中给出：

```
table {border: 2px solid #eeeeee;} 
```

或者至少：

```
table {border-style: solid;} 
```

现在检查所有浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:23:42.433

是的，非标准属性的实现`bordercolor`因浏览器而异。它甚至取决于浏览器模式（标准与怪癖模式）。

`table`您可以通过在 CSS 中设置元素*及其*单元格的所有边框属性来使情况更加一致。或者您可以仅在 CSS 中设置表格及其单元格的样式。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-06-03T13:04:46.533

尝试删除 '#' 边框颜色 =“eeeeee”

# php - 电子邮件中的图像只是打印 url

> ID：12511234
> 
> 赞同：1
> 
> 时间：2012-09-20T10:58:38.483
> 
> 标签：php, html, image, email, variables

我有一个简单的 php 电子邮件脚本，我希望在底部包含一个图像。当我添加像下面这样的图像标签时，电子邮件只会显示`<img src="http://domain.com/images/logo.png" />`而不是实际图像。任何想法为什么？

```
<?PHP
$email = $_POST["emailaddress"];

$to = "you@youremail.com";
$subject = "New Email Address for Mailing List";
$headers = "From: $email\n";
$headers .= "Content-type: text/html\r\n";

$message = "A visitor to your site has sent the following email address to be added to your mailing list.\n

Email Address: $email";

$user = "$email";
$usersubject = "Thank You";
$userheaders = "From: info@domain.com\n";

$usermessage = 

"
Thank you for joining our mailing list.

We hope to see you very soon!

Address 1 
Address 2
<img src=\"http://domain.com/images/logo.png\" />
";

mail($to,$subject,$message,$headers);

mail($user,$usersubject,$usermessage,$userheaders);

$fh = fopen("email.xml", "a");
fwrite($fh, "$email\r\n");
fclose($fh);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:04:24.193

您没有通过正确的消息传递 Content-Type 标头。`$headers`确实包含正确的标题，但它是与纯文本消息一起发送的，`$userheaders`而不包含`Content-Type`标题，但与之关联的消息确实包含一些 HTML

代替

```
$userheaders = "From: info@domain.com\n"; 
```

和

```
$userheaders = "From: info@domain.com\r\n";
$userheaders = "Content-type: text/html\r\n"; 
```

它应该可以完美运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:39:05.197

这是一个 word press 插件，但如果您删除除 XmailBaby 类之外的所有内容，它应该可以很好地为您工作。该代码是一个很好的工作，可以很好地发送电子邮件。它只是一个基本版本，但对你来说应该足够了。看一下代码，你可能会觉得很有趣。

[http://plugins.svn.wordpress.org/xmail-the-right-way/trunk/xmail.php](http://plugins.svn.wordpress.org/xmail-the-right-way/trunk/xmail.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T11:00:22.807

您需要指定 html 标头。您可以使用支持发送 HTML 电子邮件的成熟方法，例如 PHPMailer，而不是自己执行此操作：

[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)

# asp.net - 数据表计算方法将字符串列转换为日期

> ID：12511238
> 
> 赞同：0
> 
> 时间：2012-09-20T10:58:56.577
> 
> 标签：asp.net, vb.net, datatable, aggregate-functions, calculated-columns

我在数据表中有一个日期格式为的列`dd/MM/yyyy HH:mm`。我使用下面的代码填充数据表，这对于 1 个以上的选择语句很常见，因此我无法在填充数据表之前指定列及其数据类型。填写数据后的任何操作对我来说都是可以接受的。

```
data_adapt = New OracleDataAdapter(query, OraConn)
dt = New DataTable
data_adapt.Fill(dt) 
```

对于分页，我使用跳过创建数据表的副本并如下所示

```
dtLineupCopy = New DataTable
dtLineupCopy = dtLineup.AsEnumerable().Skip(startRows).Take(pageSize)).CopyToDataTable() 
```

现在的问题是，当我使用 Compute 方法时，它不会将列值视为日期类型，而是从列中返回一些随机日期值而不是最小值。

```
Arvdate = dtLineupCopy.Compute("Min(Arrivaldate)", "") 
```

有没有办法转换列的数据类型？

还尝试添加一个日期时间类型的新列，但它会引发错误`System.FormatException: String was not recognized as a valid DateTime`

```
dtLineupCopy.Columns.Add("ArvDate", getType(DateTime), "CONVERT(Arrivaldate, 'System.DateTime')") 
```

dtLineupCopy 的 Arrivaldate 列中的数据。

22/09/2012 01:02
27/09/2012 17:01
1/10/2012 1:02
13/10/2012 07:26
14/10/2012 19:47
20/10/2012 00:00
20/ 10/2012 00:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:56:24.777

如果您传入的查询导致 Arrivaldate 作为字符串而不是日期返回，那么首选选项是更改该查询？不要选择到达日期，而是选择：

```
to_date(Arrivaldate, 'DD/MM/YYYY HH24:Mi') as Arrivaldate 
```

如果不知何故这不是一个选项，那么你会在之后解析字符串。在表达式的范围内这样做`DataTable.Compute`意味着将您自己的解析日期转换为可排序的格式函数，例如...

```
Arvdate = dtLineupCopy.Compute("Min(Substring(Arrivaldate,7,4) + Min(Substring(Arrivaldate,4,2) + Min(Substring(Arrivaldate,1,2) + ... etc ..... " )) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:02:34.710

如何在查询中转换为日期：

```
Min(TO_DATE(Arrivaldate, format_mask) 
```

[http://www.techonthenet.com/oracle/functions/to_date.php](http://www.techonthenet.com/oracle/functions/to_date.php)

# c - 如何用scanf跳过括号

> ID：12511242
> 
> 赞同：-1
> 
> 时间：2012-09-20T10:59:10.680
> 
> 标签：c

感谢您的帮助......但它仍然没有在屏幕上打印出 300,400。下面是我的完整代码：读取在命令提示符处传递的文件[文件包含：S(300,400)] 并读取其中包含的两个值，而不打印或读取 S、第一个括号、逗号或最后一个右括号

```
#include <stdio.h>
int a;
int b;
int main ( int argc, char *argv[] )
{

    if ( argc != 2 ) /* argc should be 2 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename", argv[0] );
    }
    else 
    {
        // We assume argv[1] is a filename to open
        FILE *file = fopen( argv[1], "r" );

        /* fopen returns 0, the NULL pointer, on failure */
        if ( file == 0 )
        {
            printf( "Could not open file\n" );
        }
        else 
        {
           /*reading file..
             while (fscanf(file, "S(%d,%d)", &a, &b) == 2)
            {
               printf("%d,%d", a, b);
            }

            fclose( file );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:00:47.907

你做的太复杂了。只需按字面意思包括非数字部分：

```
while(fscanf(file, "S(%d,%d)", &a, &b) == 2)
  printf("got S(%d,%d)\n", a, b); 
```

另外，请注意`printf()`不支持模式，这没有多大意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:00:42.487

对扫描集没有要求，只需使用：

```
while (2 == fscanf(file, "S(%d,%d)", &a, &b))
{
    printf("%d %d", a, b);
} 
```

`2`与 的返回值进行比较，`fscanf()`因为发布的代码只能读取一个整数（仅`fscanf()`填充`a`和返回`1`），但错误地同时使用了`a`and `b`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:05:46.567

我建议使用一个实用程序来解析和检查正则表达式。这是一个在线：[http ://www.regextester.com/](http://www.regextester.com)

还有很多其他...

# php - 如何使用 PHP 替换 CSS 样式？

> ID：12511249
> 
> 赞同：1
> 
> 时间：2012-09-20T10:59:24.420
> 
> 标签：php, css, preg-replace, preg-match-all

**简短的问题：**我有一个包含 CSS 的 $css 变量，我想在该变量中找到一个给定的样式（在我的例子中是“body”那个）并用自定义样式替换它。

**基本输入输出**：

```
/* blablabla */
body {
    background-color:#d0e4fe;
    font-family: 'Afamily', sanas-serif;
}
span {
    padding: 5px
}
h1 {
    color:orange;
    text-align:center;
}
body {
    margin: 10px;
    padding: 5px;
}
p {
    font-family:"Times New Roman";
    font-size:20px;
} 
```

我们调用magicFunction()：

```
echo magicFunction($css, 'font-color: pink; font-weight: bold;'); 
```

我们得到：

```
/* blablabla */
body {
    font-color: pink; font-weight: bold;
}
span {
    padding: 5px
}
h1 {
    color:orange;
    text-align:center;
}
p {
    font-family:"Times New Roman";
    font-size:20px;
} 
```

**怎么了 ？**基本上我被困在这里

```
$bodyPattern = '/body\s\{[.|\s]*/m';
$found = preg_match_all($bodyPattern, $css, $matches); 
```

它只发现输出的东西，如：

```
"body {
   '" 
```

线路返回后......什么都没有。

当然，一旦我有了正确的正则表达式模式，我就会使用 preg_replace。

**为什么要这样做**：我想使用我的网站 CSS 应用[CssToInlineStyle](http://classes.verkoyen.eu/css_to_inline_styles)来构建时事通讯，我只想更改正文样式以避免应用某些样式（如背景颜色）。编辑：提到这一点是为了让您知道“为什么”，请随时发表评论并就此发表您的观点，但请仅将上述问题视为您应该回答的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:55:48.180

我相信你之后的正则表达式是这样的： `body {(([a-zA-Z0-9:;#%\(\)\'\-])*\s*)*}`- 你需要为 php 中的多行正确格式化它。

您需要匹配每个角色，**除了** `{`并`}`确保您只捕捉身体风格而不是所有风格。

我还建议在尝试使用它之前使用[这个站点来测试正则表达式。](http://regexpal.com/)我同意其他评论，我认为你的所作所为有点疯狂……但用诺曼·贝茨的话来说，“我们有时都会有点疯狂”，我知道我有。希望这可以帮助。

**编辑：**

```
<?php
    $css = "body { \n
        color:#899890;\n
        }";
    $pattern = '/body(\s){0,1}{(([a-zA-Z0-9:;#%\(\)\'\-])*\s*)*}/m';
    $found = preg_match_all($pattern, $css, $matches);

    print_r($matches);
?> 
```

产生：

```
Array
(
    [0] => Array
        (
            [0] => body { 

        color:#899890;

        }
        )

    [1] => Array
        (
            [0] =>  
        )

    [2] => Array
        (
            [0] => 
        )

    [3] => Array
        (
            [0] => ;
        )

) 
```

它似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:34:27.730

避免需要这样做的一种方法是利用 CSS 的级联功能：

```
body {
    background-color:#d0e4fe;
    font-family: 'Afamily', sanas-serif;
}

<? if (...): ?>
    body {
        // overrides the definitions applied above
        background-color: inherit;
        font-family: inherit;

        // and define your own rules
        font-color: pink; 
        font-weight: bold;
    }
<? endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:29:52.317

我会像这样使用css。

```
<style>
<? include style.php;?>
</style> 
```

现在在 style.php

```
body { <? magicFunction('font-color: pink; font-weight: bold;');
?> 
}

h1 {
    color:orange;
    text-align:center;
}
p {
    font-family:"Times New Roman";
    font-size:20px;
} 
```

而magicFunction 会是这样的

```
function magicFunction($style) {
    echo $style;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:05:42.453

您[可以使用 PHP 提供您的 CSS 文件](http://net.tutsplus.com/tutorials/php/supercharge-your-css-with-php-under-the-hood/)。或者你使用类似[SASS](http://sass-lang.com/)的东西在你的 CSS 中使用变量。

使用 PHP 解析 CSS 并使用正则表达式替换变量将导致[性能非常差](http://lzone.de/articles/php-string-search.htm)，并给您的服务器带来很大的负载。

# google-chrome-extension - Chrome 扩展：请求完成后如何从 devtools 获取当前选项卡的页面内容？

> ID：12511251
> 
> 赞同：0
> 
> 时间：2012-09-20T10:59:42.073
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在开发一个 chrome 扩展，以在请求完成时从 devtools 验证当前选项卡的页面内容。我只对以下类型的请求感兴趣：[main_frame、sub_frame 和 xmlhttprequest](http://developer.chrome.com/trunk/extensions/webRequest.html#type-RequestFilter)。

可以这样做：

1.  在 background.js 中监听`chrome.webRequest.onCompleted`事件并过滤掉不感兴趣的请求
2.  与 contentScript.js 通信以获取页面内容
3.  将页面内容作为消息发送到 devtools

但是这样的情况会发生吗？

1.  在 background.js 中，请求 A 完成并向 contentScript.js 发送消息 M_A 以获取页面内容。
2.  请求 B 完成并且页面内容已更改。
3.  在 contentScript.js 中，接收到 M_A，然后...

所以我想找到一个更好的方法，比如把所有的逻辑都放在 devtools 中：

```
var requestFinishedHandler = function(request) {
    // do something here ...
}
chrome.devtools.network.onRequestFinished.addListener(requestFinishedHandler); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:27:11.380

有一个[chrome.devtools.inspectedWindow.onResourceAdded](http://developer.chrome.com/extensions/devtools.inspectedWindow.html)。我[在 DevTools Autosave 中](https://github.com/NV/chrome-devtools-autosave/blob/8b9504c2bb703d72b7367b4ff801e273257fd5e6/chrome/devtools.js#L178)使用它。它没有指定请求类型，例如 main_frame、sub_frame 和 xmlhttprequest。

# c# - 以 url 的形式获取图像文件夹中的所有图像名称

> ID：12511263
> 
> 赞同：1
> 
> 时间：2012-09-20T11:00:41.043
> 
> 标签：c#, asp.net

我已经在我的服务器上的图像文件夹中上传了一些图像，我想要每个图像的路径，例如：

```
 www.minimicro.com/images/name1.png 
     www.minimicro.com/images/name2.png 
     www.minimicro.com/images/name2.png 
```

我希望 C# 代码在一个字符串数组中获得所有这些。帮我解决这个问题。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:06:53.360

您可以尝试使用 yhis 代码 - 基于`Directory.GetFiles`方法和`Server.MapPath`

```
 var path = Server.MapPath("...");
    var images = Directory.GetFiles(path, "*.png");
    foreach (var image in images) 
    {
        System.Console.WriteLine(image);
    } 
```

在网络上你也可以使用`WebRequest`类

链接：http://www.codeguru.com/columns/dotnettips/article.php/c7005/Downloading-Files-with-the-WebRequest-and-WebResponse-Classes.htm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:11:11.810

```
 DirectoryInfo _Di = new DirectoryInfo(@"D:\Img\desktop");
    var GetDirInfo = _Di.GetFiles("*.jpg", SearchOption.AllDirectories);
    if (GetDirInfo.Count() > 0)
    {

    } 
```

试试这个......肯定会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:20:57.760

试试这个让图像通知 URL：

```
var path = Server.MapPath("...");
var images = System.IO.Directory.GetFiles(path, "*.png");
System.Collections.Generic.List<string> urls = new System.Collections.Generic.List<string>();
foreach (var image in images)
{
     urls.Add(string.Format("http://{0}/{1}", Request.Url.Authority, image));
} 
```

希望这会有所帮助。

# java - 无法在 ubuntu12.04 上执行 javah

> ID：12511277
> 
> 赞同：0
> 
> 时间：2012-09-20T11:02:03.993
> 
> 标签：java

我正在使用安装在 /usr/lib/jvm/jdk1.6.0_32 目录中的 sun-jdk。即使我可以在其 bin 文件夹中看到 javah 文件，我也无法执行 javah 命令。每次我执行 javah 时，我都会收到来自系统的以下响应：-

程序“javah”可以在以下包中找到：

*   gcj-4.6-jdk
*   openjdk-6-jdk
*   gcj-4.5-jdk
*   openjdk-7-jdk** 试试：apt-get install

请建议我采取一些措施来处理这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:12:00.593

你有没有设置过Java的环境？这是我在 /etc/profile 中的 JDK 设置：

```
export JAVA_HOME=_YOUR_JDK_DIRECTORY
export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:09:24.353

这是简单的路径问题，当您执行 javah 命令时，它试图从 ubuntu 的默认 java 执行命令，

按照这个步骤，

*   转到 usr/bin 文件夹
*   搜索类似此图像的 java 图标

别的

打开终端并输入“whereis java”，它将为您提供 jdk 文件夹的正确路径。

![在此处输入图像描述](../Images/5264e449959c96972b789d17ef22fad7.png)

*   右键单击它，然后选择`cut`，转到桌面和`paste`它。
*   完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:30:50.103

添加`$JAVA_HOME/bin`到您的`PATH`. 如果您已经拥有一个 ，最好在开始时使用`/usr/bin/java`，否则随 Ubuntu 安装的那个（可能是一个 JRE）可能会影响您想要使用的那个。

* * *

检查你的`PATH`：

```
$ echo $PATH 
```

检查看到了哪些可执行文件：

```
$ which java
$ which javac 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:28:22.750

尝试用root在终端中输入这个

update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk1.6.0_32/bin/javac 1

update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.6.0_32/bin/java 1

update-alternatives --install /usr/bin/javaws javaws /usr/lib/jvm/jdk1.6.0_32/bin/javaws 1

update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/jdk1.6.0_32/bin/jar 1

# magento - 将产品与配置选项 magento 捆绑在一起

> ID：12511279
> 
> 赞同：2
> 
> 时间：2012-09-20T11:02:06.073
> 
> 标签：magento, configurable

我想在 Magento 中创建具有可配置选项的捆绑产品。我只能在产品包中添加简单的产品。无论如何使用扩展或使用 Magento 这样做。我已经搜索但没有找到任何合适的解决方案请帮助。我想要这样的东西：

*   可配置 - 连衣裙尺寸，上述连衣裙 + 配饰 + 盒子的连衣裙图案捆绑（用于库存）
*   只有 2 个装束包装，如上图所示，每个带有 5 个库存可追踪物品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:43:09.153

我也有同样的问题。我找到了以下页面，但不幸的是我没有设法让代码工作： [http ://www.brimllc.com/2010/12/magento-grouped-products- contains-associated-configurable-products/](http://www.brimllc.com/2010/12/magento-grouped-products-containing-associated-configurable-products/)

改变

```
<allowed_selection_types>
  <simple/>
  <virtual/>
</allowed_selection_types> 
```

至

```
<allowed_selection_types>
  <simple/>
  <virtual/>
  <configurable/>
</allowed_selection_types> 
```

在文件“/app/code/core/Mage/Bundle/etc/config.xml”中可能是第一步？？？

# c# - 添加文件时出现 SharePoint 错误

> ID：12511280
> 
> 赞同：1
> 
> 时间：2012-09-20T11:02:07.050
> 
> 标签：c#, wcf, sharepoint, sharepoint-2010, permissions

我的环境中有 wcf 服务器和 web 服务器。

SharePoint 托管在 Web 服务器中。

当我使用此方法从 Web 服务器添加文件时，就可以了。

然后设计更改来了，我从 wcf 服务器添加了文件，我遇到了错误。

```
SPFolder.Files.Add(fileName, memoryStream, true); // Errors here 
```

堆栈跟踪：

> URL 'Template/Template.docx' 无效。它可能引用不存在的文件或文件夹，或者引用不在当前 Web 中的有效文件或文件夹。---> System.Runtime.InteropServices.COMException (0x81020030): 0x81020030 URL 'Template/Template.docx' 无效。它可能引用不存在的文件或文件夹，或者引用不在当前 Web 中的有效文件或文件夹。在 Microsoft.SharePoint.Library.SPRequestInternalClass.PutFile（字符串 bstrUrl，字符串 bstrWebRelativeUrl，对象 punkFile，Int32 cbFile，对象 punkFFM，PutFileOpt PutFileOpt，字符串 bstrCreatedBy，字符串 bstrModifiedBy，Int32 iCreatedByID，Int32 iModifiedByID，对象 varTimeCreated，对象 varTimeLastModified，对象 varProperties， String bstrCheckinComment, Byte partitionToCheck, Int64 fragmentIdToCheck,

当我的代码在 Web 服务器中时，它运行良好。请帮我。

# zend-framework - ZendX_JQuery_Form_Element_AutoComplete

> ID：12511283
> 
> 赞同：0
> 
> 时间：2012-09-20T11:02:15.577
> 
> 标签：zend-framework, zend-form, jquery-autocomplete

如何获取使用 ZendX_JQuery_Form_Element_AutoComplete 类生成的 javascript 代码？

```
 $item = new ZendX_JQuery_Form_Element_AutoComplete('item', array(
        'label' => 'Item' , 
        'id' => 'auto-item'));

    $item->setJQueryParams(array(
        'source' => $some URL , 
        'minLength' => '1')); 
```

viewHelper 生成的 javascript 将是：

```
$("#auto-item").autocomplete({"source":"some URL","minLength":"1"}); 
```

最后一行是目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:57:42.573

Juste把它放在你的视图文件中：

```
$this->jQuery()->getOnLoadActions() 
```

它返回由 jQuery 助手生成的 javaScript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:12:31.207

假设您想查找客户。您的源端点可能是控制器上的一个操作，可能专用于提供自动完成数据。

主要需要注意的是预期数据的格式： `[{"id":123,"label":"Some Customer","value":"Some Customer (ID#123)"},...`

“标签”和“值”让您有机会显示下拉列表的替代字符串以及最终选择的内容。

这是一个例子。

```
class Service_AutocompleteController extends Zend_Controller_Action
{
    /**
     * The query / q for the auto completion
     * 
     * @var string
     */
    protected $_term;

    /** 
     * @see Zend_Controller_Action::init()
     */
    public function init()
    {       
        $this->_term = (isset($this->_request->term)) ? $this->_request->term : null;
    }

    /**
     * Serve up JSON response for use by jQuery Autocomplete
     */
    public function customerLookupAction()
    {
        // Disable the main layout renderer
        $this->_helper->layout->disableLayout();

        // Do not even attempt to render a view
        $this->_helper->viewRenderer->setNoRender(true);

        $query = "
                    SELECT  TOP 50
                            c.id                            AS id,  
                            c.name + '(ID#' + c.id + ')'    AS label,                           
                            c.name                          AS value
                      FROM  customer c
                     WHERE  $label LIKE ?
                  ORDER BY  c.name";

        $db = Zend_Registry::get(SOME_DB_ADAPTER);
        $results = $db->fetchAll($query, array('%' . $this->_term . '%'));      

        echo Zend_Json::encode($results);
    }
} 
```

有时人们会更进一步，并有一个视图助手来发送回 JSON，您可以通过这种方式删除控制器操作中的一些重复代码。

# c - 这适用于 void *pointers 吗？如果没有，怎么办？

> ID：12511285
> 
> 赞同：0
> 
> 时间：2012-09-20T11:02:16.643
> 
> 标签：c, pointers, embedded, void, void-pointers

在我们的代码中，我们有一个混合类型的大型结构，并希望为这些存储默认值的重复 (const) 结构。

当用户想要默认设置时，最好能够通过获取结构中项目的地址偏移量来做到这一点，然后在“默认”结构中分配具有相同偏移量的值，有点像这样：

```
void *setting = &settings->thing; // Points to a setting
int offset = setting - &settings;
void *default = &defaults_struct + offset; // Points to the default value
*setting = *default; // Set setting to default value 
```

想法是，如果 settings->thing 指向 int8，则从默认值复制 int8 值，但如果 settings->other_thing 是 int32，则复制完整的 32 位。

问题是，这是否适用于如上所述的 void 指针？如果没有，有没有办法做到这一点？我错过了实现这一目标的更好方法吗？

编辑澄清：我们希望将结构中的单个值设置为“默认”结构中的相应值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:11:22.327

不，这行不通。类型指针`void *`没有与它们关联的大小，即它们指向的数据类型是未知的。因此，您也不能那样做作业。

正如评论中所建议的那样，您可能应该直接从默认值中复制。

另请注意，这`default`是 C 中的保留字，因此不应将其用于变量。

如果默认值是全局可见的，您可以定义一个宏来隐藏它：

```
#define INITIALIZE(s, f) s. f = default_struct. f 
```

用户（我假设是开发人员）现在可以执行以下操作：

```
struct settings s;

INITIALIZE(s, thing); 
```

也就是说，我（作为开发人员）更喜欢这样的东西：

```
struct settings s = get_default_settings(); 
```

这更清楚，更少的魔法。当然，复制*所有*字段可能需要更多时间，但设置通常不是性能关键。

请注意，上述函数可能只是：

```
struct settings get_default_settings(void)
{
  static const struct settings the_defaults = {/* the default values go here*/};

  return the_defaults;
} 
```

它巧妙地封装了默认值，并删除了全局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:47:45.797

C 中没有用于运行时的内置类型/反射信息。为了执行您的请求，您需要在运行时知道您正在复制的类型的实际大小。

如果你真的想做你正在做的事情，你需要定义你自己的运行时类型信息，通常通过使每个设置都有自己的结构......就像......

```
struct single_setting {
 int stype;
 union {
  uint8_t s8;
  uint16_t s16;
  uint32_t s32;
  uint64_t s64;
  struct {
   char *s;
   size_t len;
  } sstr;
 } u_value;
}; 
```

然后编写一个函数来复制和返回这样的值变得相当简单。

如果您只想复制一些设置，这将是相当大的开销，但这几乎是大型配置系统所做的。

# mysql - MySQL 视图：Order By then Group By（加入运气）

> ID：12511286
> 
> 赞同：2
> 
> 时间：2012-09-20T11:02:24.227
> 
> 标签：mysql, sql

我有两个表（在 mysql 中），`Book`BookPrice*存储*书籍的价格（随着时间的推移）。`BookPrice`

 *我想要一个显示 Book 数据及其当前价格的视图。

表结构是：

**书**

```
 BookId PK Int AI,
    BookTitle varchar(255) 
```

**书价**

```
 Id PK Int AI
    BookId Int (FK to Book)
    Price decimal(8,2)
    LastModified datetime 
```

***样本数据***

**书**

```
 1, Harry Potter
    2, LOTR
    3, Game of Thrones
    4, 50 Shades of Gray 
```

**书价**

```
 1, 1, 5.00, 2012-01-01 00:00:00
    2, 2, 10.00, 2012-01-01 00:00:00
    3, 3, 7.00, 2012-01-01 00:00:00
    4, 4, 0.99, 2012-01-01 00:00:00
    5, 1, 8.00, 2012-02-01 00:00:00
    6, 2, 9.00, 2012-02-01 00:00:00 
```

有了这些数据，视图应该显示：

```
 BookId, Title, Price, PriceLastModified
    1, Harry Potter, 8.00, 2012-02-01 00:00:00
    2, LOTR, 9.00, 2012-02-01 00:00:00
    3, Game of Thrones, 7.00, 2012-01-01 00:00:00
    4, 50 Shades of Gray, 0.99,, 2012-01-01 00:00:00 
```

我已经尝试过（许多变体）以下内容：

```
SELECT `Book`.`Id`, `Book`.`Title`, `BookPrice`.`Price`, `BookPrice`.`LastModified`
FROM `Book` 
LEFT JOIN `BookPrice` ON `BookPrice`.`BookId` = `Book`.`Id`
GROUP BY `Book`.`Id`
ORDER BY `BookPrice`.`LastModified` DESC 
```

然而，这似乎是 Group then Order，意思是 Groups，为每本书选择第一个价格（不是最新的），所以我得到：

```
1, Harry Potter, 5.00, 2012-01-02 00:00:00 
```

而不是正确的

```
1, Harry Potter, 8.00, 2012-02-01 00:00:00 
```

和 LOTR 一样

我设法使用子查询而不是联接来使其工作（不知道这在性能方面有多好），但随后无法从该语句创建视图，因为视图在选择中不能有子查询陈述。

有办法解决这个问题吗？还是我必须创建一个“未分组”视图，然后创建第二个视图来对第一个视图进行分组？

我知道这类似于之前在 SO 上提出的问题，并且查看了许多其他问题，但找不到相同的问题（或处理视图）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:07:27.317

您可以在子查询中获得最大值`lastModifed`，然后将其再次加入原始查询。

```
SELECT  a.*,b.*
FROM    book a
        INNER JOIN bookPrice b
            on a.bookid = b.bookid
        INNER JOIN
        (
            SELECT bookID, MAX(lastModified) maxLast
            FROM bookPrice
            GROUP BY bookID
        ) c
            ON  b.bookid = c.bookid and
                b.lastmodified = c.maxlast
ORDER BY a.bookID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/5dd25/1)

**更新 1**

您没有提到您将`View`从此查询创建一个。基本上，`VIEW`s 不能包含子查询。最好的方法是创建一个`VIEW`子查询

```
CREATE VIEW LastModifiedList
AS
SELECT bookID, MAX(lastModified) maxLast
FROM bookPrice
GROUP BY bookID 
```

并加入此视图以创建另一个视图。

```
CREATE View BookLatestPriceList
AS
SELECT  a.*,b.*
FROM    book a
        INNER JOIN bookPrice b
            on a.bookid = b.bookid
        INNER JOIN LastModifiedList c  -- <== view of the subquery
            ON b.bookid = c.bookid and
                b.lastmodified = c.maxlast 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/1d7d2/1)*

# asp.net-mvc-3 - 如何在 MVC3 中从一个视图重定向到另一个视图？

> ID：12511289
> 
> 赞同：1
> 
> 时间：2012-09-20T11:02:42.097
> 
> 标签：asp.net-mvc-3

大家好，我想问一下如何从一个视图重定向到另一个视图。这是我的看法

```
@model IEnumerable<test.Models.contents>
@using test   

@if(Request.IsAuthenticated) {
    <text>Welcome<strong>@User.Identity.Name</strong>
    </text>
}
else
{

     ???
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:03:47.690

不要在视图内进行任何重定向。那不是它的责任。视图的职责是以视图模型的形式显示从控制器操作传递给它的数据。

在呈现此视图的控制器操作中执行此重定向。例如，您可以使用`[Authorize]`属性来装饰它。这样，如果用户未获得授权，他将被重定向到您在 web.config 中指定的 loginUrl：

```
[Authorize]
public ActionResult SomeAction()
{
    return View();
} 
```

如果您想重定向到某个特定视图，您可以简单地编写一个自定义 Authorize 属性并覆盖该[`HandleUnauthorizedRequest`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.handleunauthorizedrequest.aspx)方法以指定您希望重定向到的控制器和操作，以防用户未通过身份验证：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        var values = new RouteValueDictionary(new
        {
            controller = "SomeController",
            action = "NotAuthorized"
        });
        filterContext.Result = new RedirectToRouteResult(values);
    }
} 
```

然后用它装饰你的动作：

```
[MyAuthorize]
public ActionResult SomeAction()
{
    return View();
} 
```

现在在相应的视图中，您不需要执行任何测试。可以保证，如果您渲染此视图，则用户已通过身份验证，您可以直接欢迎他：

```
@model IEnumerable<test.Models.contents>
@using test   

Welcome <strong>@User.Identity.Name</strong> 
```

# google-chrome - XMPP 类似 Google 的同步服务器通知解决方案

> ID：12511294
> 
> 赞同：2
> 
> 时间：2012-09-20T11:02:52.953
> 
> 标签：google-chrome, authentication, xmpp, server-side

我正在寻找一种简单的方法来实现使用以下协议运行的 XMPP 服务器： [https ://developers.google.com/cloud-print/docs/rawxmpp](https://developers.google.com/cloud-print/docs/rawxmpp)

唯一不同的是我必须使用 X-GOOGLE-TOKEN 认证机制：[https ://stackoverflow.com/a/6211324/227244](https://stackoverflow.com/a/6211324/227244)

过程很简单：我从客户端发送的数据中获取令牌，根据此令牌请求用户数据并相应地设置 JID，将一些随机字符附加到生成的 JID。

之后，其他可能具有不同令牌但用户帐户相同的客户端连接到 XMPP 资源，并且对于订阅的客户端，推送通知的广播被启用。

可以从当前可用的实现中借用多少服务器代码？我会避免自己编写所有服务器代码，尽管逻辑非常简单。我知道有 ejabberd 和 prosody xmpp 服务器可以实现很多 XEP。哪一个更容易添加自定义处理机制？您能否为核心 xmpp 服务器推荐其他稳定的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T03:48:09.123

谷歌设计的方式`X-OAUTH2`非常简单且易于实施。事实上，机制的工作方式`PLAIN`和工作方式之间没有区别。`X-OAUTH2`您可以简单地选择一个标准`PLAIN`实现并使其适用于 google`X-OAUTH2`身份验证机制，而无需额外的努力。

我是[Jaxl PHP 库](https://github.com/abhinavsingh/JAXL/)的作者，我[最近宣布](http://abhinavsingh.com/blog/2012/09/how-to-perform-x-facebook-platform-and-google-talk-x-oauth2-xmpp-authentication-with-php-jaxl-library/)支持`X-OAUTH2`内部库。[在这里](https://github.com/abhinavsingh/JAXL/commit/f42e0505b0f3374beea06de559b6574e793e8aff)，您可以看到我必须编写的确切代码行来支持这一点。唯一相关的代码是：

```
switch($mechanism) {
    case 'PLAIN':
    case 'X-OAUTH2':
        $stanza->t(base64_encode("\x00".$user."\x00".$pass));
        break; 
```

`X-OAUTH2`实施`$pass`只不过是您的 oauth 令牌。简而言之，来自`PLAIN`身份验证机制的密码字段成为机制的 oauth 令牌`X-OAUTH2`。其余一切保持不变。

# jquery - jquery代码在IE中不起作用？

> ID：12511295
> 
> 赞同：1
> 
> 时间：2012-09-20T11:02:52.807
> 
> 标签：jquery, internet-explorer-9

我在 jquery 中有这段代码，可以在单击按钮时将 div 隐藏在另一个内部，它适用于 firefox 和 chrome，但不适用于 IE9：

```
$(document).ready(function () {
        $("#esconde, #Div1, #Div2").hide();
        $("#act2").click(function () {
            $("#esconde").fadeIn(1000).show().append($("#lista1"));
            $("#listadefault").remove().fadeOut(500);

            $("#act3").click(function () {
                $("#listadefault").remove();
                $("#Div1").fadeIn(1000).show().append($("#lista1"));

                $("#act4").click(function () {
                    $("#Div2").fadeIn(1000).show().append($("#lista1"));
                    $("#listadefault").remove().fadeOut(500);
                });

            });
        }); 
```

这是html：

```
<div id="Div1" class="span12">
    <table class="well table table-condensed">
        <label>tabela 3</label>
                <thead>
                    <tr>
                        <th>Opção 1</th>
                        <th>Opção 2</th>
                        <th>Opção 3</th>
                    </tr>    

                </thead>
                <tbody>
                    <tr><td>Dado 1</td><td>Dado 2</td><td>
                        <div class="btn-group" data-toggle="buttons-checkbox">
                            <button type="button" class="btn btn-primary">
                                dado1</button>
                        </div>
                    </td>
                    </tr>
                    <tr><td>Dado 1</td><td>Dado 2</td><td><div class="btn-group" data-toggle="buttons-checkbox">
                            <button type="button" class="btn btn-primary">
                                dado1</button>
                        </div></td></tr>
                    <tr><td>Dado 1</td><td>Dado 2</td><td><input type="button" data-toggle="buttons-checkbox" class="btn btn-primary" /></td></tr>
                    <tr><td>Dado 1</td><td>Dado 2</td><td><input type="checkbox" /></td></tr>
                </tbody>

            </table>
    </div> 
```

上面的这个 div 应该出现在 #lista1 div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:09:22.570

您将所有的点击事件都包含在彼此内部：

尝试这个：

```
$(document).ready(function () {
        $("#esconde, #Div1, #Div2").hide();
        $("#act2").click(function () {
            $("#esconde").fadeIn(1000).show().append($("#lista1"));
            $("#listadefault").remove().fadeOut(500);
        });

            $("#act3").click(function () {
                $("#listadefault").remove();
                $("#Div1").fadeIn(1000).show().append($("#lista1"));
            });
                $("#act4").click(function () {
                    $("#Div2").fadeIn(1000).show().append($("#lista1"));
                    $("#listadefault").remove().fadeOut(500);
        });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:11:05.080

我知道这与您的问题没有任何关系，但是在查看您的 javascript 之后，我不能不注意到您正在对没有多大意义的元素执行一些操作。我的评论是内联的：

```
 $(document).ready(function () {
        $("#esconde, #Div1, #Div2").hide();
        $("#act2").click(function () {
            $("#esconde").fadeIn(1000).show().append($("#lista1"));
            $("#listadefault").remove().fadeOut(500); // Fading out an element which is already removed

            // Attaching an event handler after a click event is handled.
            // This actually repeats every time you click and even if it's intentional you should perform .one() instead of click, so you don't bind multiple times
            $("#act3").click(function () {
                $("#listadefault").remove();
                $("#Div1").fadeIn(1000).show().append($("#lista1")); // Showing an element which is shows. FadeIn shows the element.

                $("#act4").click(function () {
                    $("#Div2").fadeIn(1000).show().append($("#lista1")); // Same thing with fadeIn and show as the above comment.
                    $("#listadefault").remove().fadeOut(500); // Same thing with remove and fadeOut
                });

            });
        }); 
```

# xml - 构建查询以在 HTML 之间迭代结果？

> ID：12511300
> 
> 赞同：-1
> 
> 时间：2012-09-20T11:03:08.487
> 
> 标签：xml, data-structures, xml-parsing, xquery

我最近运行的成功查询是这个：

```
let $doc := doc('test')  
for $v in $doc//item 
where $v/product_info/unit[.='9291']
return (
  <div class="seller_company">{ $v/seller_info/seller_company_id[position() lt 2]/text() } 
  </div>,
  <div class="seller_rating">{ $v/seller_info/seller_rating[position() lt 3]/text() }
  </div>
  ) 
```

但似乎它的结构不正确，因为我在第二个 div 中收到 2 个结果，而不是在两个 Seller_rating-classed div 中，每个 div 有一个结果。查看代码，我得到这些结果是有道理的。试图重组查询，我很困惑。这是我的进展：

```
let $doc := doc('test')//item
for $v in $doc
where $v/product_info/unit[.='9291']
  let $x := return $v/seller_info/seller_company_id,
    $y := return $v/seller_info/seller_rating
    for $resultx in $x/text()
    return
      <div id="seller_company_id>{ $resultx }</div>
    for $resulty in $y/text()
    return
      <div id="seller_rating">{ $resulty }</div> 
```

xml文件是：

```
<item>
<item_number>1171270</item_number>
<seller_info>
<seller_company_id>6356</seller_company_id>
<seller_rating>C31</seller_rating>
<seller_rating>T150 hr.</seller_rating>
</seller_info>
<product_info>
<unit>2022</unit>
<sinfo>55 cases</sinfo>
<sinfo>Yu-gi-oh trading card pack</sinfo>
<sinfo>.45kg per unit</sinfo>
<sinfo>24.7500kg shipment</sinfo>
</product_info>
<product_info>
<unit>9291</unit>
<sinfo>7 units</sinfo>
<sinfo>Naruto, Classic, action figure</sinfo>
<sinfo>1.8kg per unit</sinfo>
<sinfo>12.6kg shipment</sinfo>
</product_info>
</item> 
```

我不禁觉得这是构造查询的错误方法，因为当我不相信结果可以很好地排序/不添加更复杂的结构时。如果有人能够理解所需的输出，请帮助我重组我的查询。

电流输出：

```
<div>6356</div><div>C31T150 hr.</div> 
```

期望的输出：

```
<div class="seller_company_id">6356</div>
<div class="seller_rating">C31</div>
<div class="seller_rating">T150 hr.</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:28:35.483

请发布有效代码。里面有很多语法错误！编译器不接受的代码是非常糟糕的风格，并没有表明您正在努力自己解决问题。如果您不知道问题是什么，请构建一个较短的示例并尝试再次修复它，如果您真的不明白，请在这里提问。

*   let 子句中没有返回
*   失踪`"`后`seller_company_id`
*   缺少序列（实际上正是我在上一个问题中回答的内容）

这几乎可以满足您的要求，我没有更改`id`为`class`. 我删除了一些 -`let`子句，如果您认为它对您来说更具可读性，请再次添加它们。

```
for $v in doc('test')//item
where $v/product_info/unit[.='9291']
return
    for $resultx in $v/seller_info/seller_company_id/text()
    return
    (
      <div id="seller_company_id">{ $resultx }</div>,
      for $resulty in $v/seller_info/seller_rating/text()
      return
        <div id="seller_rating">{ $resulty }</div>
    ) 
```

# unit-testing - 使用 specs2 进行 Seq 空测试

> ID：12511310
> 
> 赞同：6
> 
> 时间：2012-09-20T11:03:54.157
> 
> 标签：unit-testing, scala, specs, specs2

如何`Seq[String]`在 Scala 中使用 specs2 检查 a 是否为空？我正在使用`seq must be empty`or`seq.length must be greaterThan(0)`但最终总是出现类型不匹配错误。

```
ret is Seq[String]

ret.length must be greaterThan(0)

[error] ApiTest.scala:99: type mismatch;
[error]  found   : Int
[error]  required: org.specs2.matcher.Matcher[String]
[error]         ret.length must be greaterThan(0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T18:03:57.353

我认为类型不匹配错误是由您发布的代码之外的另一位代码引起的。

您的示例应该只适用于：

```
ret must not be empty 
```

我已经尝试并确认可以正常工作：

```
 "Seq beEmpty test" should {
    "just work" in {
      Seq("foo") must not be empty
    }
  } 
```

如果您在每个测试中使用多个断言，您可能会遇到麻烦，例如以下无法编译：

```
"Seq beEmpty test" should {
  "just work" in {
    List() must be empty
    Seq("foo") must not be empty
  }
} 
```

这是出乎意料的，但可以通过帮助编译器轻松解决：

```
"Seq beEmpty test" should {
  "just work" in {
    List() must beEmpty
    Seq("foo") must not beEmpty
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T10:12:26.127

尝试使用 specs2 匹配器`have size`。由于大小不能为负，如果不为零，则必须大于零。因此，我们可以使用：

```
ret must not have size (0) 
```

# php - PHP：获取给定月份的工作日数

> ID：12511311
> 
> 赞同：1
> 
> 时间：2012-09-20T11:04:05.287
> 
> 标签：php, date, monthcalendar, weekday

给定月份和工作日，我需要构建一个函数来检索所有星期一、星期二、星期三、星期四和星期五的天数。

假设我给这个月的函数，2012 年 9 月和工作日编号 1。该函数应该检索 2012 年 9 月的所有星期一，它们是：3、10、17 和 24

请注意，对我来说，第 1 个工作日是星期一，第 2 个是星期二，第 3 个是星期三，第 4 个是星期四，第 5 个是星期五。

到目前为止，我已经完成了：根据今天的日期获取一周的第一天（我在下面发布了函数）。但我不知道如何以简单的方式从这里开始，我已经做了很多小时，我怀疑有更好的方法来做到这一点。你能告诉我怎么做吗？

```
 function getFirstDayOfWeek($date) {
    $getdate = getdate($date);

    // How many days ahead monday are we?
    switch ( $getdate['wday'] ) {
        case 0: // we are on sunday
            $days = 6;
            break;

        default: // any other day
            $days = $getdate['wday']-1;
            break;
    }

    $seconds = $days*24*60*60;
    $monday = date($getdate[0])-$seconds;

    return $monday;
} 
```

万分感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:35:20.490

不是很聪明，但对你有用：

```
// sept. 2012
$month = 9;

// loop through month days
for ($i = 1; $i <= 31; $i++) {

    // given month timestamp
    $timestamp = mktime(0, 0, 0, $month, $i, 2012);

    // to be sure we have not gone to the next month
    if (date("n", $timestamp) == $month) {

        // current day in the loop
        $day = date("N", $timestamp);

        // if this is between 1 to 5, weekdays, 1 = Monday, 5 = Friday
        if ($day == 1 OR $day <= 5) {

            // write it down now
            $days[$day][] = date("j", $timestamp);
        }
    }
}

// to see if it works :)
print_r($days); 
```

# php - 如何通过指定名称从 javascript 调用 php 函数

> ID：12511312
> 
> 赞同：-1
> 
> 时间：2012-09-20T11:04:04.797
> 
> 标签：php, javascript

> **可能重复：**
> [使用 jQuery AJAX](https://stackoverflow.com/questions/4152431/call-php-function-using-jquery-ajax)
> [调用 PHP 函数 从 javascript 调用 php 函数](https://stackoverflow.com/questions/7165395/call-php-function-from-javascript)

*我需要*

```
callPhpFnc("myPhp"); // javascript function 
```

如何以 myPhp 作为函数名调用 php 函数。

*在我的 php 文件中*

```
<?php
 function myPhp()
 {
     echo 'Hello';
 }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:06:51.357

这是不可能的，亲爱的。因为您的 php 在页面加载之前在服务器端运行一次。但是客户端的javascript。选项是使用ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:07:11.620

您不能通过 JS 调用 PHP 函数。您必须为此使用 ajax。

# objective-c - 在我的自定义 UISearchBar 类中未调用 Touches Began 方法

> ID：12511314
> 
> 赞同：4
> 
> 时间：2012-09-20T11:04:18.500
> 
> 标签：objective-c, ios, ios5, xcode4

我正在向 UIView 添加一个使用自定义类初始化的 UISearchBar。而且我已经覆盖了 touchesBegan() 方法。

我已经在 UISearchBar 中启用了用户交互。但是当点击搜索栏时仍然不触发 touchesBegan() 方法。

知道为什么不调用 touchesBegan() 函数吗？如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:32:34.497

您必须确保为 UISearchBar 设置委托。为此，在您的 .h 文件中，在 UIViewController 之后键入。然后在您的 nib 文件中，确保将您的搜索栏连接到在“引用插座”部分中找到的搜索栏的名称。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:40:35.367

您确定已将 Interface Builder 中的自定义类设置为 UISearchBar 吗？

# actionscript-3 - mx.core.mx_internal 未显示

> ID：12511316
> 
> 赞同：0
> 
> 时间：2012-09-20T11:04:24.600
> 
> 标签：actionscript-3, apache-flex, flex3

我正在尝试使用命名空间 mx_internal 但它没有显示在包 mx.core.* 中；我只是想使用下面的例子

```
package com.classs
{
import mx.controls.ToggleButtonBar;
import mx.core.*;

internal namespace mx_internal;

public class Toggle extends mx.controls.ToggleButtonBar
{

    public function Toggle()
    {
        super();
        this.percentWidth=100;

        mx_internal::navItemFactory = new mx.core.navItemFactory(com.classs.Bar);

        return;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:03:33.567

尝试使用

```
use namespace mx_internal 
```

# php - 在php中通过NAT识别计算机

> ID：12511321
> 
> 赞同：2
> 
> 时间：2012-09-20T11:04:42.270
> 
> 标签：php, package, nat

是否可以读出 IP 包的 NAT-Header 以识别 php.ini 中的发送机器。

我的目标是确定我的用户在多少台计算机上登录到我的页面。

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:06:59.937

这是不可能的——你和最终用户之间有很多路由器。

NAT 使用存储在路由器内存中的 NAT 表进行组织，因此网络包中没有敏感信息。*所以根据定义*这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:07:51.167

简短的回答：不！

服务器只获取请求的最后一个公共 ip，在 NAT 的情况下，是路由器的 ip。

# batch-file - 使用 < 重定向命令输入

> ID：12511323
> 
> 赞同：1
> 
> 时间：2012-09-20T11:04:46.923
> 
> 标签：batch-file

输入重定向适用于 .exe 文件或内部 Windows 命令。

```
 app.exe < ListOfNames.txt
    sort < input.txt 
```

但是，当我尝试将其重定向到批处理脚本时它不起作用。

test.bat :-

```
 @echo off
 echo %1 %2 
```

运行它使用： -

```
test.bat<input.txt 
```

其中 input.txt 有两个字符串。

但是，即使在批处理脚本的情况下，它也可以很好地重定向输出。

这是预期的行为还是我犯了一些语法错误？有没有其他方法可以从文件中读取参数而不是手动解析它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T12:27:23.023

命令行上提供的参数与 stdin （重定向输入所在的位置）完全不同。这对于批处理脚本和 .exe 程序都是如此。

一些程序旨在通过命令行参数或标准输入接受相同的值。但这不是常态。这是程序开发人员提供的功能。

如果要读取批处理脚本中的重定向输入，则必须执行以下操作之一。

要读取单行：

```
set /p "ln="
echo %ln% 
```

读取循环中的所有行：

```
for /f "delims=" %%A in ('findstr "^"') do (
  echo %%A
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:44:56.700

除了 dbenhams 的回答，您还可以阅读多行以`set/p`进行输入重定向，例如`myBatch.bat < commands.txt`

```
@echo off
set "line_1="
set "line_2="
set "line_3="
set /p line_1=
set /p line_2=
set /p line_3=
set line_ 
```

但这会因输入管道而失败，例如`type commands.txt | myBatch.bat`

# php - php增加时间戳错误？

> ID：12511325
> 
> 赞同：2
> 
> 时间：2012-09-20T11:04:52.667
> 
> 标签：php, timestamp

我有一个分页功能，它通过时间表分页并每周推进日期并显示与新日期相关的详细信息。

在测试一些新数据时，我遇到了分页问题。因为它不会在 2012 年 10 月 22 日页面通过。

调试代码我最终找到了问题的根源，即将表示 22/10/2012 的日期戳增加 7 天返回（通过 strftime）日期为 28/10/2012，而显然我期待的日期是 29 /10/2012。此错误有效地导致连续循环，因为 %W（驱动每周分页）在 2012 年 10 月 22 日为 43，在 2012 年 10 月 28 日为 43，当然在 2012 年 10 月 29 日应该为 44。

在隔离和重新创建此问题的快速测试中，我使用了以下内容：

```
/*
 * test %W
 */

$time_Stamp_1 = mktime(0,0,0,10,22,2012);
echo "date : " . strftime("%d/%m/%Y", $time_Stamp_1);
echo "W for first time stamp " . $time_Stamp_1 . " is " . strftime("%W", $time_Stamp_1); 

$time_Stamp_1a = $time_Stamp_1 += (60 * 60 * 24 * 7);
echo "new date : " . strftime("%d/%m/%Y", $time_Stamp_1a);
echo "W for new date time stamp: " . strftime("%W", $time_Stamp_1a);

$time_Stamp_2 = mktime(0,0,0,10,29,2012);
echo "W for second time stamp: " . strftime("%W", $time_Stamp_2); 
```

分页在我测试过的所有其他周之间愉快地移动，并且显然适当地使用了这个增量/减量。

希望我遗漏了一些明显的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:30:11.223

或者更好的是使用[`DateTime`](http://php.net/DateTime).

```
 // Create the DateTime object
 $date = new DateTime('2012-22-10');
 echo $date->format('d/m/Y');

 // Add one week
 $date->modify('+1 week');
 echo $date->format('d/m/Y'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:32:54.650

PHP [DateTime](http://www.php.net/datetime)类是要走的路：-

```
$inFormat = 'd/m/Y h:i';
$outFormat = 'd/m/Y';
$date = DateTime::createFromFormat($inFormat, '22/10/2012 00:00');
$interval = new DateInterval('P7D');
for($i = 0; $i < 10; $i++){
    $date->add($interval);
    var_dump($date->format($outFormat) . " is in week " . $date->format('W'));week');
} 
```

给出以下输出：-

```
string '29/10/2012 is in week 44' (length=24)
string '05/11/2012 is in week 45' (length=24)
string '12/11/2012 is in week 46' (length=24)
string '19/11/2012 is in week 47' (length=24)
string '26/11/2012 is in week 48' (length=24)
string '03/12/2012 is in week 49' (length=24)
string '10/12/2012 is in week 50' (length=24)
string '17/12/2012 is in week 51' (length=24)
string '24/12/2012 is in week 52' (length=24)
string '31/12/2012 is in week 01' (length=24) 
```

快速浏览日历告诉我，这是正确的。

请参阅此处以获取有效的格式字符串[http://us.php.net/manual/en/datetime.createfromformat.php](http://us.php.net/manual/en/datetime.createfromformat.php)
另请参阅[DateInterval](http://www.php.net/dateinterval)类。

[有关 DateTime::format() http://us.php.net/manual/en/function.date.php](http://us.php.net/manual/en/function.date.php)的有效输出格式，请参见此处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:08:51.320

尝试使用[strtotime()](http://us.php.net/manual/en/function.strtotime.php)进行时间计算 - 例如下周使用：

```
$time_Stamp_1a = strtotime("+1 week", $time_Stamp_1); 
```

# ember.js - Ember.js：在控制器之间共享对象或在彼此之间共享控制器

> ID：12511326
> 
> 赞同：0
> 
> 时间：2012-09-20T11:04:57.383
> 
> 标签：ember.js, ember-old-router

对于我拥有的路线**/仪表板，** *DashboardController和**DashboardView*中的 2 个不同的命名插座。

***/dashboard** *Route*的*connectOutlet*如下所示*

 *```
connectOutlets: function(router) {
    var appController = router.get('applicationController');
    appController.connectOutlet('dashboard', {});

    var dashboardController = router.get('dashboardController');
    dashboardController.connectOutlet({
        name: 'dashProjects',
        outletName: 'dashProjects',
        context: App.Project.find()
    });                                     
    dashboardController.connectOutlet({
        name: 'projectSummary',
        outletName: 'projectSummary'
    }); 
} 
```

现在点击*DashProjectsView中的项目（**项目*），应该更新 *ProjectSummaryView 。*

 ****在控制器之间共享对象（在本例中为*Project* ）的理想方式应该是什么。**

一种方法是在*App.currentProject*中创建一个共享的全局对象，但这违背了目的。

我认为，*DashboardController*应该持有一个对象，并且*DashProjects*和*ProjectSummary*应该访问它。欢迎任何指导/指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:34:03.403

也许你可以看看[https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L173](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L173)，并将 dashProjectsController 连接到 projectSummaryController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:02:34.570

```
connectOutlets: function() {
    router.get('dashboardController').connectControllers('projectSummary')
    ... Other code you might have here ...
}

App.DashboardController: Ember.Controller.extend({
    projectSummaryController: null,
    ... Other code in your controller ...
} 
```

然后，您可以从您的 dashboardController 中获取您的 projectSummaryController。***

# javascript - 关闭后如何使弹出窗口保持在同一区域

> ID：12511338
> 
> 赞同：2
> 
> 时间：2012-09-20T11:05:51.073
> 
> 标签：javascript, scroll, popup

我得到了这个弹出窗口，当您向下滚动到页面底部并单击关闭按钮时，它会将用户滚动到页面顶部

这是它的样子：

```
<a href="#" onClick="stpFlush();" id="stp-close">X</a> 
```

整个 javascript 代码：[http ://palimashop.com/wp-content/plugins/social-traffic-pop/stp.js?ver=1.0](http://palimashop.com/wp-content/plugins/social-traffic-pop/stp.js?ver=1.0)

我希望用户在关闭后不会被重定向到页面顶部。我们该怎么做？

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:08:03.377

无论您在页面上的哪个位置，都可以将位置固定在屏幕上。

**通过 CSS**

```
#stp-close { /* Probably you need to use stp-main ! */
    position: fixed;
} 
```

`stp-close`如果不用于弹出窗口，您可能需要设置另一个选择器。我可能`#stp-main`来自我在 JS 中看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:10:56.733

听起来 JS 函数并没有停止点击链接的回发，`return false;`在`stpFlush`. 它也可能值得放在`action.stopPropagation()`函数的开头。

# css - CSS 行没有包裹在表格内

> ID：12511344
> 
> 赞同：0
> 
> 时间：2012-09-20T11:06:26.330
> 
> 标签：css, google-chrome, internet-explorer-9

我在布局中遇到了问题`white-space: pre-line`。当我将内容包装在一个`div`元素中时，它工作得很好，但是当我`div`用`table`文本替换时不再包装。这只是展示案例的一小部分。在原始代码中，很难替换这个外部表。这是代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        body {
            border: 1px dashed red;
            font-size: 12px;
            font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
            margin: 0 auto !important;
            padding: 10px;
            width: 600px;
        }

        .document-preview {
            border-spacing: 0;
            width: 100%;
        }

        .document-preview .content-details-row {
            padding: 0 2px 0 162px;
            position: relative;
            white-space: nowrap;
            z-index: 1;
        }

        .document-preview .content-details-row span:first-child {
            display: block;
            float: left;
            margin: 0 2px 0 -160px;
            overflow: hidden;
            width: 160px;
            z-index: 2;
        }

        .document-preview .content-details-row span:first-child:after {
            content: "..............................................................................";
            font-weight: lighter;
            font-size: 10px;
            letter-spacing: 2px;
        }

        .document-preview .content-details-row .content-details-value {
            display: inline-block;
            width: 100%;
            z-index: 2;
        }

        .document-preview .content-details-row .content-details-value > div {
            white-space: pre-line;
            word-wrap: break-word;
        }
    </style>
</head>
<body>

    <table class="document-preview"><tbody><tr><td>
        <div class="content-details-row">
            <span>Label:</span> 
            <span class="content-details-value">
                <div>Doesn't work: Something something AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</div>
            </span>
        </div>
    </td></tr></tbody></table>

    <hr />

    <div class="document-preview">
        <div class="content-details-row">
            <span>Label:</span> 
            <span class="content-details-value">
                <div>Works: Something something AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</div>
            </span>
        </div>
    </div>

</body>
</html> 
```

工作样本：http: [//jsfiddle.net/UPXzt/1/](http://jsfiddle.net/UPXzt/1/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:23:51.150

将此样式添加到您的页面

```
table {
    table-layout: fixed;

} 
```

示例：http: [//jsfiddle.net/UPXzt/10/](http://jsfiddle.net/UPXzt/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:18:09.820

试试这个[演示](http://jsbin.com/erewix/1/edit)

只需将宽度添加到 div

```
.document-preview .content-details-row .content-details-value > div 
{
width: 430px;
white-space: pre-wrap !important;
word-wrap: break-word;
} 
```

# ruby-on-rails - 如何使用太阳黑子实现多模型搜索

> ID：12511345
> 
> 赞同：1
> 
> 时间：2012-09-20T11:06:25.980
> 
> 标签：ruby-on-rails, sunspot, sunspot-solr

有两个模型用户和语言，具有关联（has_many :languages）。现在我想搜索一个语言名称，并且获得的搜索也应该告诉用户 ID。换句话说，该语言属于哪个用户。

如何使用太阳黑子实现相同的功能。

问候， 卡兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:15:50.453

我不明白你到底需要什么，我希望这篇文章可以帮助你一点。

```
 class User < ActiveRecord::Base 

     has_many :languages

     # Searchable block for Sunspot-Solr

     searchable do

       # for facet search
       integer :language_id , :multiple => true , :references => Language do
         languages.collect(&:id).compact if languages.any?
       end

       # for text Search
       text :languages , :boost => 5 do
         languages.map {|language| language.name } if languages.any?
       end

     end

    end 
```

# android - 操作栏中图标的标题未显示

> ID：12511348
> 
> 赞同：0
> 
> 时间：2012-09-20T11:06:41.557
> 
> 标签：android, icons, android-actionbar, title

嗨，我想在我的操作栏上添加一个带有标题的图标，但只显示该图标。我创建了这个项目：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_save"
        android:icon="@android:drawable/ic_menu_save"
        android:title="@string/menu_save"
        android:showAsAction="ifRoom|withText"/>
</menu> 
```

任何人的想法？我也换`ifRoom`了，`always`但还是一样的问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:15:45.943

这发生在 ICS 中，对吗？这似乎是 ICS 中的错误

> [https://code.google.com/p/android/issues/detail?id=30180](https://code.google.com/p/android/issues/detail?id=30180)

# zend-framework - 在 Zend 身份验证中，我如何检查附加列以及身份验证？

> ID：12511358
> 
> 赞同：2
> 
> 时间：2012-09-20T11:07:05.253
> 
> 标签：zend-framework, zend-auth

我有一个场景，我需要在进行身份验证时检查一些额外的列。这是因为，应用程序将一些用户名存储在数据库中，而一些用户名存储在 LDAP 中。身份验证优先级适用于数据库中的用户名。如果数据库中存在用户名，我们将不会在 LDAP 中检查，否则我们将在 LDAP 中检查。

对于 LDAP 用户，我们将用户名的副本保存在同一个“用户”表中，并带有空白密码列。为了让这两组用户都感到恶心，还有一个名为 userDirectory 的附加列，其值为“LDAP 和 INTERNAL”。我们必须保留一份 LDAP 用户名的副本，以用于应用程序特定的设置和所有内容。

username+userDirectory 也是一个 uniqueKey

现在我的问题是，有时会有多个用户具有相同的用户名但在不同的用户目录中。如上所述，LDAP 用户不会将密码存储在数据库中，并且身份验证是一个单独的代码片段。

我正在使用以下代码进行数据库身份验证。即使我添加了条件 setCredentialTreatment('md5(?) AND userDirectory="internal"')，它也在搜索 LDAP 用户。我如何限制 userDirectory='internal'

```
$dbAdapter = Zend_Db_Table::getDefaultAdapter();
$authAdapter = new Zend_Auth_Adapter_DbTable($dbAdapter);
$authAdapter->setTableName('users')
            ->setIdentityColumn('username')
            ->setCredentialColumn('password')
            ->setCredentialTreatment('md5(?) AND userDirectory="internal"');
$authAdapter->setIdentity($username);
$authAdapter->setCredential($password); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T13:20:42.383

我已经更改了您的代码：

```
$dbAdapter = Zend_Db_Table::getDefaultAdapter();
$authAdapter = new Zend_Auth_Adapter_DbTable($dbAdapter);
$authAdapter->setTableName('users')
            ->setIdentityColumn('username')
            ->setCredentialColumn('password')
            ->setCredentialTreatment('MD5(?)'); // changed
$authAdapter->setIdentity($username);
$authAdapter->setCredential($password);

$authAdapter->getDbSelect()->where('userDirectory = "internal"'); // added 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:10:42.943

[http://framework.zend.com/manual/1.12/en/zend.auth.adapter.dbtable.html](http://framework.zend.com/manual/1.12/en/zend.auth.adapter.dbtable.html)

查看Advanced Usage By Example下的最后一个代码，代码如下

```
 $registry       =   Zend_Registry::getInstance();
    $DB             =   $registry['DB'];
    $authAdapter    =   new Zend_Auth_Adapter_DbTable($DB,'usertable','username','password');

    $authAdapter->setIdentity($request->getParam('username'));
    $authAdapter->setCredential($request->getParam('password'));

    $select         =   $authAdapter->getDbSelect();
    $select->where('`active` = 1');
    $result         =   $authAdapter->authenticate();

    if($result->isValid()){
            //set user proper to zend instance
            $this->_redirect('/index');
    }
    else
    {
       //logout or redirect to same page
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:23:04.397

像这样扩展`Zend_Auth_Adapter_DbTable`和覆盖`_authenticateCreateSelect()`方法

```
protected function _authenticateCreateSelect()
    {
        $select = parent::_authenticateCreateSelect();
        return $select->where('userDirectory = ?','internal');
    } 
```

# android - 如何将应用程序设置为短信应用程序android

> ID：12511359
> 
> 赞同：0
> 
> 时间：2012-09-20T11:07:06.440
> 
> 标签：android

我开发了一个发送短信的安卓应用程序。我的问题是，当我单击联系人的短信图标时，要求您指定要使用的应用程序的弹出窗口没有将我的应用程序作为选项的一部分。有人可以帮忙吗？

我添加了一张图片以使问题更加清晰。

[http://i.stack.imgur.com/itFvN.png](http://i.stack.imgur.com/itFvN.png)

这是清单文件的代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.smsmessaging"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.SEND_SMS">
</uses-permission>
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name=".SMS"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>               
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter >
            <action android:name="android.intent.action.SEND"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity>
    <receiver android:name=".Receiver"> 
        <intent-filter> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver>

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:43:20.930

我终于想出了怎么做。我所要做的就是将下面的意图过滤器添加到活动中：

```
 <intent-filter>
              <action android:name="android.intent.action.SENDTO"/>
              <category android:name="android.intent.category.DEFAULT" />
              <data android:scheme="sms" />
              <data android:scheme="smsto" />
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:13:46.167

您需要有一个`<intent-filter>`ACTION_SEND 操作。这将把它放在列表中

[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

这个例子来自[谷歌页面](http://developer.android.com/reference/android/content/Intent.html)：

```
<intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <action android:name="android.intent.action.EDIT" />
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="vnd.android.cursor.dir/vnd.google.note" />
</intent-filter> 
```

注意数据元素

# git - Git：不存储子模块的历史记录

> ID：12511360
> 
> 赞同：3
> 
> 时间：2012-09-20T11:07:10.250
> 
> 标签：git, git-submodules

我有以下设置：一个 git repo（我们称之为“libutil”），以及*许多*使用 libutil 作为 git 子模块的项目。

我想要的是：

*   能够从每个项目文件夹中更改、提交和推送我的 libutil
*   在每个项目文件夹中都有（物理上，不仅仅是符号链接或某事。）说 libutil
*   *不要在**每个*项目文件夹中都有 libutil 的全部历史

我想告诉 git 它应该只为每个项目保留一个 libutil 的“工作副本”，*而不是*存储整个 libutil-history 数十次。另一方面，这些工作副本应该保持有效的 git repos，所以我仍然可以在需要时切换到任意提交（通过从服务器获取它们）。

现在这可能吗？我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:16:48.053

这个用例似乎与“git shallow submodules”讨论的重复：

[Git 浅子模块](https://stackoverflow.com/questions/2144406/git-shallow-submodules)

# c# - C# 用户控件中的属性失效

> ID：12511366
> 
> 赞同：2
> 
> 时间：2012-09-20T11:07:29.683
> 
> 标签：c#, .net, winforms, visual-studio-2010, user-controls

我正在尝试制作一个包含文本框和“浏览”按钮的用户控件，它将打开一个文件对话框并使用选择更新文本框（如 HTML 文件上传框）。虽然我希望将所选文件属性映射到文本框，但我希望文件对话框的几乎所有其他属性都可以从我的控件（过滤器等）中公开使用

我的2个问题：

1.  对于直接映射到其中一个内部控件的属性的控件的属性，是否有一些快捷方式（在语言或 VS IDE 中）可以轻松完成此操作，而无需手动编写`get`/`set`对并将单行添加到每个返回/设置相应的属性？
2.  是否有某种方法（语言或 IDE 快捷方式）可以为多个属性执行上述操作？基本上我希望我的控件具有文件对话框的所有属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:07:44.490

这听起来像是 T4 的工作！

您可以使用 T4 和反射来创建一个包含所有这些属性的部分类。如果它只有一个类，那么它可能比手动完成更多工作；我想你需要决定你想要使用它的频率。

***编辑：***

T4 表示：文本模板转换工具包

它内置于 Visual Studio 中，允许您编写模板，为您生成代码。
当您需要编写任何类型的重复或样板代码时，它会很有用。

我已经为你做了一个开始。在您的解决方案中创建一个名为 MyUserControl.tt 的新文件并复制下面的代码。
保存后，将出现一个名为 MyUserControl.cs 的新文件并列出所有属性。

由于这会生成一个部分类，因此您需要调整类名和命名空间以匹配现有用户控件的名称。我假设您的文本框的名称是 Target，但您显然也可以这样做。

```
<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ output extension=".cs" #>
<#@ assembly name="System.Web" #>
<#@ import namespace="System.Reflection" #> 

public partial class MyUserControl
{
<#
PropertyInfo[] properties = typeof(System.Web.UI.WebControls.TextBox).GetProperties(
    BindingFlags.Public | BindingFlags.Instance);

foreach (PropertyInfo property in properties)
{
    WriteLine(string.Format("    public {0} {1}", property.PropertyType.FullName, property.Name));
    WriteLine("    {");

    if(property.GetGetMethod() != null)
    {
        WriteLine("        get { return Target." + property.Name + "; } ");
    }

    if(property.GetSetMethod() != null)
    {
        WriteLine("        set { Target." + property.Name + " = value; } ");
    }

    WriteLine("    }");
    WriteLine("");
}

#>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:30:31.403

您可以使用 ReSharper 执行此操作。
假设以下类：

```
public class YourUserControl
{
    private OpenFileDialog _openFileDialog;
    private TextBox _textBox;
} 
```

您可以将光标放在班级内并按 Alt+Ins 并选择“委派成员”。这将为您提供这两个领域的所有公共成员的列表。你可以选择你需要的，然后你是：

![在此处输入图像描述](../Images/2f7ed5ead3aa3d8748d615b4d2d5303e.png)

# android - 在捆绑中发送多维数组列表时出现 classCastException

> ID：12511367
> 
> 赞同：0
> 
> 时间：2012-09-20T11:07:39.963
> 
> 标签：android, android-intent, multidimensional-array, arraylist, bundle

我有一个解析 JSON 对象并将数据放入 TwoDimentionalArrayList 类型的 2D ArrayList 的应用程序。

```
 public TwoDimentionalArrayList<String> getRota(String carerID, String date){

            try {
                JSONObject jsonObject1 = new JSONObject(tok3);

                int count = jsonObject1.names().length();

                for(int i = 0; i < count; i++){

                String s = new Integer(i).toString();

                 JSONObject jsonobject2 = (JSONObject) jsonObject1.get(s);
                 String startdate = jsonobject2.getString("StartDate");
                 String duration = jsonobject2.getString("Duration");
                 String callStatusName = jsonobject2.getString("CallStatusName");
                 String clientForeName = jsonobject2.getString("ClientForename");
                 String clientSurName = jsonobject2.getString("ClientSurname");
                 Log.e(TAG, "startdate = " + startdate);
                 Log.e(TAG, "duration = " + duration);
                 Log.e(TAG, "callStatusName = " + callStatusName);
                 Log.e(TAG, "clientForeName = " + clientForeName);
                 Log.e(TAG, "clientsurName = " + clientSurName);

                 ArrayList<String> arr = new ArrayList<String>();
                 arr.add(startdate);
                 arr.add(duration);
                 arr.add(callStatusName);
                 arr.add(clientForeName);
                 arr.add(clientSurName);

                arrayList.add(i, arr);

                }

return arrayList;

    }// end of getRota

    class TwoDimentionalArrayList<T> extends ArrayList<ArrayList<T>> {

        private static final long serialVersionUID = 1L;

        public void addToInnerArray(int index, T element) {
            while (index >= this.size()) {
                this.add(new ArrayList<T>());
            }
            this.get(index).add(element);
        }

        public void addToInnerArray(int index, int index2, T element) {
            while (index >= this.size()) {
                this.add(new ArrayList<T>());
            }

            ArrayList<T> inner = this.get(index);
            while (index2 >= inner.size()) {
                inner.add(null);
            }

            inner.set(index2, element);
        }
    } 
```

.

我通过以下方式发送 arryList。

```
 Bundle b = new Bundle();
                    b.putSerializable("rotaArray", rotaArray);

                    intent.putExtra("rotaArrayBundle", b);
                    startActivity(intent); 
```

然后像这样在另一个 Activity 中检索它。

```
intent = this.getIntent();
        Bundle bundle = intent.getBundleExtra("rotaArrayBundle");

        @SuppressWarnings("unchecked")
        TwoDimentionalArrayList<String> array = (TwoDimentionalArrayList<String>) bundle.get("rotaArray"); 
```

该应用程序似乎在将数组转换为 TwoDimentionalArrayList 时遇到问题，这是解析 JSON 的内部类。这是例外。

```
09-20 11:23:13.797: E/AndroidRuntime(9743): FATAL EXCEPTION: main
09-20 11:23:13.797: E/AndroidRuntime(9743): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.carefreegroup/com.carefreegroup.GetRota}: java.lang.ClassCastException: java.util.ArrayList cannot be cast to com.carefreegroup.LoginWebservice$TwoDimentionalArrayList
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2225)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.os.Looper.loop(Looper.java:156)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread.main(ActivityThread.java:5045)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at java.lang.reflect.Method.invokeNative(Native Method)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at java.lang.reflect.Method.invoke(Method.java:511)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at dalvik.system.NativeStart.main(Native Method)
09-20 11:23:13.797: E/AndroidRuntime(9743): Caused by: java.lang.ClassCastException: java.util.ArrayList cannot be cast to com.carefreegroup.LoginWebservice$TwoDimentionalArrayList
09-20 11:23:13.797: E/AndroidRuntime(9743):     at com.carefreegroup.GetRota.onCreate(GetRota.java:27)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.Activity.performCreate(Activity.java:4543)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
09-20 11:23:13.797: E/AndroidRuntime(9743):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2181)
09-20 11:23:13.797: E/AndroidRuntime(9743):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:44:05.027

你试过在你的扩展类上实现 Serializable 吗？

```
class TwoDimentionalArrayList<T> extends ArrayList<ArrayList<T>> implements Serializable 
```

通过

```
TwoDimentionalArrayList<?> tdlist = new TwoDimentionalArrayList<?>();
intent.putExtra("rotaArray", tdlist);
startActivity(intent); 
```

赶上

```
Intent intent = getIntent();
TwoDimentionalArrayList<?> tdlist = (TwoDimentionalArrayList) intent.getSerializableExtra("rotaArray"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:38:45.800

我变了

```
TwoDimentionalArrayList<String> array = (TwoDimentionalArrayList<String>) bundle.get("rotaArray"); 
```

至

```
ArrayList array =  (ArrayList) bundle.get("rotaArray");

        Log.e(TAG, "array pos 0 = "+ array.get(0)); 
```

我现在可以得到数据了。谢谢

# asp.net - 如何在构建期间从 Visual Studio 调用 aspnet_compiler？

> ID：12511368
> 
> 赞同：8
> 
> 时间：2012-09-20T11:07:39.013
> 
> 标签：asp.net, .net, visual-studio-2010, azure, azure-web-roles

我希望 Visual Studio预编译用作 Azure Web 角色有效负载的[ASP.NET 应用程序。](https://stackoverflow.com/q/12496714/57428)所以我发现[这篇文章](http://blog.dotsmart.net/2012/09/14/build-views-command-for-visual-studio/)解释了如何调用 aspnet_compiler 来验证视图。

我尝试将以下内容添加到我的 ASP.NET 应用程序的“构建后事件”中：

```
call "%VS100COMNTOOLS%\vsvars32.bat"
aspnet_compiler -v / -p $(ProjectDir) 
```

或者这个（明确指定的应用程序名称）：

```
call "%VS100COMNTOOLS%\vsvars32.bat"
aspnet_compiler -v /ASP.NET-Application-ProjectNameHere -p $(ProjectDir) 
```

在构建运行的这两种情况下，我都会在构建输出中看到以下内容：

```
Setting environment for using Microsoft Visual Studio 2010 x86 tools.
Utility to precompile an ASP.NET application
Copyright (C) Microsoft Corporation. All rights reserved. 
```

并且显然不会发生预编译，因为如果我将任何 .aspx 或 .cshtml 文件“构建操作”更改为“无”，它就不会进入 Azure 服务包，并且一旦包部署到 Azure，视图就不再打开。

如何设置 aspnet_compiler 以在 Visual Studio 中进行预编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T23:56:10.420

如果要在 Visual Studio / msbuild 中使用 Asp.NET 编译器，则可以将 [`AspNetCompiler`](http://msdn.microsoft.com/en-us/library/ms164291%28VS.100%29.aspx)Task 添加到项目文件 (.csproj/.vbproj) 并设置`MvcBuildViews`为`true`.

例子：

```
<Project>
  <PropertyGroup>
    <MvcBuildViews>true</MvcBuildViews>
  </PropertyGroup>
  <!-- ... -->
  <Target Name="PrecompileWeb" AfterTargets="build" Condition="'$(MvcBuildViews)'=='true'">
    <Message Text="Starting AspNetCompiler for $(ProjectDir)" Importance="high" />
    <AspNetCompiler
        VirtualPath="temp"
        PhysicalPath="$(WebProjectOutputDir)"
        Force="true"
    />
  </Target>
  <!-- ... -->
</Project> 
```

您还可以设置`TargetPath`属性来指定目标目录。

`AfterTargets="build"`类似于“构建后事件”。有关更多信息，请参阅[目标构建顺序](http://msdn.microsoft.com/en-us/library/ee216359%28VS.100%29.aspx#sectionToggle5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T12:06:06.463

**将 ASPX 编译集成到 Visual Studio**

我坚持的原则之一是始终在干净的环境中尝试我的构建并模拟安装，就好像它是由 QA 完成的一样。最近我注意到我不断遇到隐藏在 aspx 文件中的错误。那么，为什么不使用旧的和熟悉的 aspnet_compiler.exe 工具呢？它位于 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727 并且非常易于使用。

作为一个 VS 插件怪胎，我已经开始考虑一个很棒的插件，它将集成到 VS 中，并会监听构建事件并在输出窗格中显示结果。哎呀，为什么不添加一些咖啡服务功能呢？

我花了大约 10 分钟的谷歌搜索才发现这个博客。迈克·哈德洛 (Mike Hadlow) 在其简单的想法上很有天赋。使用 POST BUILD 事件！我需要做的就是将以下行放在构建后事件中： C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_compiler.exe -v / -p "$(ProjectDir)\"

现在，剩下的就是使将这一行添加到我们团队中的每个 Web 项目的过程自动化。

我只有那个插件:)

[在此处输入链接描述](http://mikehadlow.blogspot.com/2008/05/compiling-aspx-templates-using.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T19:31:08.723

Matej 的回答对我很有帮助，但我无法按原样使用它，但仍然可以让它在 Visual Studio 中的本地构建和通过 TFS 的自动构建中工作。

我不得不添加一些额外的 msbuild 设置。实际上，我有两种不同的情况。一个项目是内置到 _PublishedWebsites 文件夹中的 Web 应用程序，另一个是未内置到 _PublishedWebsites 文件夹中的 MVC Web 应用程序。

首先，如果您的项目文件中还没有以下内容，请添加以下内容：

```
 <PropertyGroup>
    <MvcBuildViews>true</MvcBuildViews>
  </PropertyGroup> 
```

对于 WITH _PublishedWebsites：

```
 <Choose>
    <When Condition="'$(BuildingInsideVisualStudio)' == true">
      <PropertyGroup>
        <AspNetCompilerPhysicalPath>$(ProjectDir)</AspNetCompilerPhysicalPath>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <AspNetCompilerPhysicalPath>$(WebProjectOutputDir)</AspNetCompilerPhysicalPath>
      </PropertyGroup>
    </Otherwise>
  </Choose>
  <Target Name="PrecompileWeb" AfterTargets="build" Condition="'$(MvcBuildViews)'=='true'">
    <!-- aspnet_compiler.exe needs to be run on the folder that has the aspx files and the "bin" subfolder.
            When running locally, the value needs to be the project directory, which is $(ProjectDir). 
            When running the TFS build, the value needs to be (BuildFolder)\(ProjectName)\_PublishedWebsites\(ProjectName).
            The $(AspNetCompilerPhysicalPath) will hold the correct value for both types of builds.
    -->
    <Message Text="Starting AspNetCompiler for $(ProjectName) at $(AspNetCompilerPhysicalPath)" Importance="high" />
    <AspNetCompiler 
        VirtualPath="/" 
        PhysicalPath="$(AspNetCompilerPhysicalPath)" 
        TargetPath="$(AspNetCompilerPhysicalPath)\bin_precompile" 
        Force="true" 
        />
  </Target> 
```

对于没有 _PublishedWebsites 的网站：

```
 <Choose>
    <When Condition="'$(BuildingInsideVisualStudio)' == true">
      <PropertyGroup>
        <AspNetCompiler_CopyFilesFirst>false</AspNetCompiler_CopyFilesFirst>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <AspNetCompiler_CopyFilesFirst>true</AspNetCompiler_CopyFilesFirst>
      </PropertyGroup>
      <ItemGroup>
        <AllOutputFiles Include="$(OutDir)\\**\*.*" />
      </ItemGroup>
    </Otherwise>
  </Choose>
  <Target Name="PrecompileWeb" AfterTargets="build" Condition="'$(MvcBuildViews)'=='true'">
    <!-- aspnet_compiler.exe needs to be run on the folder that has the cshtml files and the "bin" subfolder. I could not find a setting that was appropriate for both. 
            When running locally, the value needs to be the project directory, which is $(ProjectDir). 
            When running the TFS build, there is no folder that matches both of those criteria. 
            So first we will copy the output into the source code folder's "bin" subfolder, 
            then run it against the source $(ProjectDir), the same as if we were building locally.
    -->
    <Message Text="Before running AspNetCompiler, copy files from $(OutDir) to $(ProjectDir)\bin" Importance="high" />
    <Exec Command="( robocopy.exe /mir  $(OutDir) $(ProjectDir)\bin ) ^&amp; IF %25ERRORLEVEL%25 LEQ 1 exit 0" Condition="'$(AspNetCompiler_CopyFilesFirst)'=='true'" />

    <Message Text="Starting AspNetCompiler for $(ProjectName) at $(ProjectDir)" Importance="high" />
    <AspNetCompiler 
        VirtualPath="/" 
        PhysicalPath="$(ProjectDir)" 
        TargetPath="$(ProjectDir)\bin_precompile" 
        Force="true" 
        />
  </Target> 
```

# qt - 如何使用 CMake 包含某个 Qt 安装？

> ID：12511370
> 
> 赞同：21
> 
> 时间：2012-09-20T11:07:45.980
> 
> 标签：qt, cmake

我们在每台开发 PC 上都有大量 Qt 副本——每个项目在第三方目录中都有自己的 Qt 副本。这是因为每个项目都是用自己的 Qt 开发和测试的；通常情况下，我们需要为某个项目定制 Qt 构建。因此，由于上面提到的，我们有一个单独的 SVN 存储库，用于保存各种 Qt 构建和每个 Qt 项目中的外部，它指的是这些构建中的一个。

问题是，在使用 CMake 时，我们只能选择 Qt 的一个版本，而 Qt4 finder 自己决定使用什么 Qt。这不是正确的。我们需要重定向查找器以配置项目第三方目录中特定 Qt 副本的所有内容。

我试图指定这样的`PATHS`选项`FIND_PACKAGE`：`FIND_PACKAGE( Qt4 REQUIRED PATHS "thirdparty/Qt" )`但这没有帮助。我试图设置`QT_QMAKE_EXECUTABLE`变量，但没有奏效。我尝试在安装之前将所需的 QMake 路径（FindQt4.cmake 使用它来确定所有目录）添加到 PATH 变量中，但这也无济于事。

有没有办法使用 FIND_PACKAGE 提供的所有东西，但对于某个 Qt 副本？我真的不想实现所有 Qt 包装器，手动设置所有定义、包含、目录等。

这是我的 CMake 项目。也许这会有所帮助：

```
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

#############################################################################

MACRO( ADD_FILES_TO_FILTER rootFilterName rootFilterPath files )
    FOREACH( curFile ${files} )
        FILE( RELATIVE_PATH curFilter "${CMAKE_CURRENT_SOURCE_DIR}/${rootFilterPath}" "${CMAKE_CURRENT_SOURCE_DIR}/${curFile}" )
        FILE( RELATIVE_PATH test "${CMAKE_CURRENT_SOURCE_DIR}" "${CMAKE_CURRENT_SOURCE_DIR}/${curFile}" )
        GET_FILENAME_COMPONENT( curFilter ${curFilter} PATH )
        SET( curFilter "${rootFilterName}/${curFilter}" )
        STRING( REPLACE "/" "\\\\" curFilter ${curFilter} )
        SOURCE_GROUP( ${curFilter} FILES ${curFile} )
    ENDFOREACH( curFile )
ENDMACRO( ADD_FILES_TO_FILTER rootFilterName rootFilterPath files )

MACRO( TO_RELATIVE_PATHS filePaths )
    SET( resPaths "" )
    FOREACH( curPath ${${filePaths}} )
        FILE( RELATIVE_PATH relPath ${CMAKE_CURRENT_SOURCE_DIR} ${curPath} )
        SET( resPaths ${resPaths} ${relPath} )
    ENDFOREACH( curPath )
    SET( ${filePaths} ${resPaths} )
ENDMACRO( TO_RELATIVE_PATHS filePaths )

######################################################################

# Define project settings
PROJECT( RealTimeCapture )
FIND_PACKAGE( Qt4 REQUIRED PATHS "thirdparty/Qt" )
SET( BOOST_ROOT "thirdparty/boost" )
FIND_PACKAGE( Boost REQUIRED )

# Collect all required files for build
FILE( GLOB_RECURSE headers RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "src/RTCF/include/*.h" )
FILE( GLOB_RECURSE sources RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "src/RTCF/src/*.cpp" )
FILE( GLOB_RECURSE resources RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "src/*.qrc" )
FILE( GLOB_RECURSE forms RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "src/*.ui" )

# Preprocess all Qt files
QT4_WRAP_CPP( header_mocs ${headers} )
QT4_WRAP_UI( form_headers ${forms} )
QT4_ADD_RESOURCES( resources_rcc ${resources} )

# Convert all generated files paths to relative ones
TO_RELATIVE_PATHS( header_mocs )
TO_RELATIVE_PATHS( form_headers )
TO_RELATIVE_PATHS( resources_rcc )

# Create executable
ADD_EXECUTABLE( RealTimeCapture ${headers} ${sources} ${header_mocs} ${form_headers} ${resources_rcc} )
SET_TARGET_PROPERTIES( RealTimeCapture PROPERTIES COMPILE_FLAGS "/Zc:wchar_t-" )

# Set filters for project according to its namespaces
FILE( RELATIVE_PATH buildDir ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR} )
ADD_FILES_TO_FILTER( "Headers" "src/RTCF/include" "${headers}" )
ADD_FILES_TO_FILTER( "Sources" "src/RTCF/src" "${sources}" )
ADD_FILES_TO_FILTER( "Generated" "${buildDir}/src/RTCF/include" "${header_mocs}" )
ADD_FILES_TO_FILTER( "Forms" "${buildDir}/src/RTCF/include" "${form_headers}" )
ADD_FILES_TO_FILTER( "Resources" "${buildDir}" "${resources_rcc}" )

# Set additional include directories
INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_BINARY_DIR} )
INCLUDE_DIRECTORIES( "src" )
INCLUDE_DIRECTORIES( "src/RTCF/include" )
INCLUDE_DIRECTORIES( "thirdparty" )

# Configure Qt
SET( QT_USE_QTNETWORK TRUE )
SET( QT_USE_QTSQL TRUE )
SET( QT_USE_QTSCRIPT TRUE )
SET( QT_USE_QTXML TRUE )
SET( QT_USE_QTWEBKIT TRUE )
INCLUDE( ${QT_USE_FILE} )
ADD_DEFINITIONS( ${QT_DEFINITIONS} )
TARGET_LINK_LIBRARIES( RealTimeCapture ${QT_LIBRARIES} )

# Add boost support
INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIR} )
TARGET_LINK_LIBRARIES( RealTimeCapture ${Boost_LIBRARIES} )

# Add other libs include dirs
INCLUDE_DIRECTORIES( "thirdparty/SimpleCrypt" )
INCLUDE_DIRECTORIES( "thirdparty/id3lib/include" )
INCLUDE_DIRECTORIES( "thirdparty/libtwitcurl" )
INCLUDE_DIRECTORIES( "thirdparty/curl-7.24.0/curl/include" )
INCLUDE_DIRECTORIES( "thirdparty/log4qt/include" )
INCLUDE_DIRECTORIES( "thirdparty/fervor-auto" )

# Add defines
ADD_DEFINITIONS( RealTimeCapture -DQUAZIP_STATIC )
ADD_DEFINITIONS( RealTimeCapture -DBUILDING_LIBCURL )
ADD_DEFINITIONS( RealTimeCapture -DID3LIB_LINKOPTION=1 )
ADD_DEFINITIONS( -DUNICODE -D_UNICODE ) #enable unicode support 
```

**更新**

正如对已接受答案的评论中提到的那样，我设法通过设置`QT_QMAKE_EXECUTABLE`CMake 变量来设置自定义 qmake.exe （不同于添加到 OS PATH 变量中的那个）。但问题是，qmake 可执行文件具有所有 Qt 模块的硬编码路径。所以我通过提供一个自定义`qt.conf`文件来解决它（正如答案中提到的那样）。我在互联网上没有找到任何示例，所以在这里，也许它会帮助某人：

```
[Paths]
Prefix=..
Documentation=doc
Headers=include
Libraries=lib
Binaries=bin
Plugins=plugins
Imports=imports
Data=
Translations=
Settings=
Examples=
Demos= 
```

我正是用这个。您可以考虑在前缀中指定 Qt 安装的绝对路径。我只是不想在 repo 中使用绝对路径，它可以克隆到任意位置。有关使用的详细信息，请参阅[此](http://doc.qt.digia.com/4.7-snapshot/qt-conf.html)链接`qt.conf`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T14:42:00.683

你在正确的轨道上`QT_QMAKE_EXECUTABLE`。该变量是一个缓存变量，所以简单地设置它是行不通的......除非您通过 GUI 更改它，或者在第一次运行 cmake 之前，或者在 CMakeCache.txt 中，或者使用 CACHE 更改它，否则缓存的值将一直存在和 FORCE 选项`SET`。

这是我使用的惯用语，因为我有固定的逻辑来根据配置时已知的变量选择我的 QT 目录。在这里，我在运行 FIND_PACKAGE 之前设置了变量，因此没有缓存问题。

```
IF(WIN32 AND ${CMAKE_SIZEOF_VOID_P} MATCHES 8)
  # Hardcode a location for a QT toolkit compiled for Win64\.  By overriding QT_QMAKE, all the rest is found
  # Choose any version of QT found in the 64-bit tools area
  FILE(GLOB QTROOTS c:/Tools_x64/Qt/*/bin)     # */
  FIND_PROGRAM(QT_QMAKE_EXECUTABLE NAMES qmake qmake4 qmake-qt4 qmake-mac PATHS ${QTROOTS})
ENDIF() 
```

把它放在 FIND_PACKAGE(Qt4) 之前

根据评论中的新信息进行编辑：

哦，我现在和你在一起。你有多少损坏的 Qt 安装。FindQt 模块将始终使用 qmake 可执行文件来发现 Qt 树的设置。Qmake 将此信息存储在一组“持久属性”中，可以用 查询，用`qmake -query`设置`qmake -set`。因此，您可以通过运行它的 qmake 并设置 QT_INSTALL_PREFIX 属性来“修复”Qt 安装，如此处所述：http: [//doc.qt.digia.com/4.7-snapshot/qmake-environment-reference.html](http://doc.qt.digia.com/4.7-snapshot/qmake-environment-reference.html)

```
qmake -set "QT_INSTALL_PREFIX" /path/to/qt/ 
```

或者，在一个旧的 SO 问题[qmake 和 QT_INSTALL_PREFIX 中。如何为 Qt 库选择新位置？](https://stackoverflow.com/questions/913642/qmake-and-qt-install-prefix-how-can-i-select-a-new-location-for-qt-library)，不接受的答案使用 qt.conf 覆盖 QT 前缀。

这两种解决方案都涉及修改 Qt 安装。我不确定有什么办法可以解决这个问题，但是这如何适合您的存储库和构建系统超出了这里的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T10:58:15.187

如果可以的话，我想完成/确认这里所说的一些信息并给出一个完整的例子。

像 Occulta 一样，我有一个定制的 Qt 环境，我必须将其用于我的项目。这些是我为使项目编译而复制的步骤：

1.  我项目的 CMakeLists.txt 已经拥有所有 CMake 内容，只需包含一个“qt.cmake”文件

    ```
    include(qt) 
    ```

2.  qt.cmake 文件包含 Peter 的解决方案，并装饰有其他内容。通过这个配置，我可以使用 moc、uic 和 rcc 来管理 UI 文件、资源文件等。这是我的文件和一些注释。如果它们不完全正确，请不要犹豫修复它们（CMake 的工作方式对我来说仍然是多云的）：

    ```
    # The path where Qt is.
    SET(QT_ROOT_DIR "path/to/qt")

    set(QT_QMAKE_EXECUTABLE ${QT_ROOT_DIR}/osx/bin/qmake)

    # Loads CMake macros bound to Qt.
    find_package(Qt4 REQUIRED)
    # Includes used Qt headers.
    include(${QT_USE_FILE}) 
    ```

3.  我还在 qmake 可执行文件的同一级别添加了 Occulta 的 qt.conf 文件。

完成这三个步骤后，一切都很好。希望这个完整的例子对某人有所帮助。

谢谢你们，你们显然在这里帮助了我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T10:16:47.780

这对我有用：

```
set( QT_ROOT /opt/myqt/ )
set( ENV(CMAKE_PREFIX_PATH) ${QT_ROOT} )
FIND_PACKAGE( Qt4 COMPONENTS QtCore QtGui QtDBUS REQUIRED ) 
```

这将更改 PATH 环境变量，但我还没有找到另一种方法。其他答案对我不起作用。

# jquery - 带有值和文本字段的 ASP.NET MVC jquery 自动完成

> ID：12511377
> 
> 赞同：17
> 
> 时间：2012-09-20T11:08:07.063
> 
> 标签：jquery, asp.net-mvc, jquery-ui-autocomplete

控制器

```
public ActionResult Search(string id)
{
     id= Request.QueryString["term"];         
     var routeList = db.Movies.Where(r => r.Title.Contains(id))
                   .Take(5)
                   .Select(r => new { id = r.MovieID, label = r.Title, name = "MovieID" });
     return Json(routeList, JsonRequestBehavior.AllowGet);
} 
```

看法：

```
<input type="hidden"   id="MovieID"  name="MovieID" />
<input type="text" id="SelectedMovie" value=""/>
<script type="text/javascript" language="javascript">
   $("#SelectedMovie").autocomplete({
       source: function (request, response) {
           $.ajax({
              url: "/Transaction/Search", type: "POST", dataType: "json",                        
              data: { id: request.term }, 
              success: function (data) {
              response($.map(data, function (item) {                                
                return { label: item.label, value: item.id }; //updated code
               }));
             }
         });
     },
     select: function (event, ui) {
         $("#MovieID").val(ui.item.value);
         $("#SelectedMovie").val(ui.item.label);
         return false;
     }
  });
</script> 
```

我有某种视频商店应用程序。当我去租一部电影时，我需要一个带有电影的组合框，我可以使用自动完成来选择它。还要求仅将 ID（值）保存到数据库中，而不是文本本身。

编辑：这是完整的工作示例

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T12:41:19.573

由于您仅将字符串传递给`Search()`服务器端的函数，因此需要更改`data`通过调用传递的元素。`$.ajax()`

```
public ActionResult Search(string id)//I think that the id that you are passing here needs to be the search term. You may not have to change anything here, but you do in the $.ajax() call
{
      id= Request.QueryString["term"];

      var routeList = db.Movies.Where(r => r.Title.Contains(id))//this is a text filter no?
                        .Take(5)
                        .Select(r => new { id = r.MovieID, label = r.Title, name = "MovieID" });
      return Json(routeList, JsonRequestBehavior.AllowGet);
} 
```

* * *

```
$("#MovieID").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/Transaction/Search", type: "POST", dataType: "json",
            //original code
            //data: { searchText: request.id, maxResults: 10 },
            //updated code; updated to request.term 
            //and removed the maxResults since you are not using it on the server side
            data: { id: request.term },

            success: function (data) {
                response($.map(data, function (item) {
                    //original code
                    //return { label: item.FullName, value: item.FullName, id: item.TagId }; 
                    //updated code
                    return { label: item.label, value: item.label, id: item.id };
                }));
            },
        select: function (event, ui) {
                //update the jQuery selector here to your target hidden field
            $("input[type=hidden]").val(ui.item.id);
        }
        });
    },
}); 
```

* * *

让我知道这是否有效/有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T11:51:48.257

您的`.ajax()`电话未在`id`. 它不在您的`data{}`对象中，也不在`querystring`作为 url 参数的一部分（任何一种方法都可以）。

因此，您的 Action 方法中的 null 值。

无论如何，您会立即用`Request.QueryString["term"]`. 为什么要这样做？？

> *无需在*方法中询问“术语” ，您只需将其`Action`作为参数本身绑定到方法，如下所示：

```
public ActionResult Search(string term)
{
    var routeList = db.Movies.Where(r => r.Title.Contains(term))
            .Take(5)
            .Select(r => new { id = r.MovieID, label = r.Title, name = "MovieID" });
    return Json(routeList, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T11:17:48.300

首先，您应该使用函数的以下返回值：

```
return { label: item.title, value: item.id }; 
```

根据[文档](http://jqueryui.com/demos/autocomplete/)，您必须返回具有`label`和`value`属性的对象（无`id`属性）。标签是用户看到的，值是发布到服务器的。

其次，您在 Ajax 调用中传递了一个`searchText`and `maxResults`，因此您的操作方法应该有两个参数：`public ActionResult Search(string searchText, int maxResults)`.

您可以应用这些更改并查看它是否有效？

# google-bigquery - 大查询中的原子插入

> ID：12511379
> 
> 赞同：1
> 
> 时间：2012-09-20T11:08:12.067
> 
> 标签：google-bigquery

当我加载超过 1 个 csv 文件时，大查询如何处理错误？

> bq 加载 --max_bad_record=30 dbname.finalsep20xyz gs://sep20new/abc.csv.gz,gs://sep20new/xyzcsv.gz

批处理作业中有一些文件可能无法加载，因为预期的列数不匹配。我想加载其余的文件。如果文件 abc.csv 失败，会执行 xyz.csv 文件吗？或者整个作业会失败并且不会插入任何记录？

我尝试使用虚拟记录，但无法最终找到如何处理多个文件中的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:25:25.760

加载是原子的——要么所有文件都提交，要么没有文件提交。如果您希望它们独立完成，您可以将负载分解为多个作业。另一种方法是将 max_bad_records 设置为更高的值。

我们仍然希望您使用更多文件启动更少的作业，因为我们在处理导入方面具有更大的灵活性。也就是说，最近对负载配额的更改意味着您可以同时提交更多的负载作业，并且很快就会计划更高的配额。

另请注意，所有修改 BQ 状态的 BigQuery 操作（加载、复制、使用目标表查询）都是原子操作；唯一不是原子的作业类型是提取，因为在写出一些导出的数据后它可能会失败。

# jquery - 在按钮单击时取消 ajax 的 setInterval

> ID：12511380
> 
> 赞同：1
> 
> 时间：2012-09-20T11:08:15.253
> 
> 标签：jquery

我有一系列按钮和 foreach 按钮我有一个单独的 .click(function() {

IE

```
$("#approved").button().click(function() {
$("#waiting_approval").button().click(function() {
$("#department_waiting_approval").button().click(function() {
$("#department").button().click(function() { 
```

我有用于刷新该 div 中数据的 ajax 的 setInterval。我面临的问题是，一旦用户单击另一个按钮，我想停止当前按钮单击 ajax 调用并启动新按钮。

希望这是有道理的，在此先感谢。

```
$("#approved").button().click(function() {

setInterval(function(){
    $.ajax({
  type: "GET",
  url: "holidays/academic_days.php?userid='+$('#approved_list').attr('class')",
  dataType: "html",
  success: function(data) {
    jQuery("#approved_list").fadeOut( 10 , function() {
        jQuery(this).html( data);
        $('#approved_list').show();  
    $('#waiting_approval_list').hide();
            $('#department_waiting_approval_list').hide();
            $('#department_logs').hide();
    }).fadeIn( 100 );

  }
 })
}, 100);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:13:57.397

这可能会有所帮助：

```
var thisInterval;
$("#approved").button().click(function() {

   thisInterval=setInterval(function(){
        $.ajax({
      type: "GET",
      url: "holidays/academic_days.php?userid='+$('#approved_list').attr('class')",
      dataType: "html",
      success: function(data) {
        jQuery("#approved_list").fadeOut( 10 , function() {
            jQuery(this).html( data);
            $('#approved_list').show();  
        $('#waiting_approval_list').hide();
                $('#department_waiting_approval_list').hide();
                $('#department_logs').hide();
        }).fadeIn( 100 );

      }
     })
    }, 100);

    }); 
```

像这样制作取消按钮。

```
$("#cancel").button().click(function() {clearInterval(thisInterval)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:11:59.487

setInterval 函数返回该间隔对象的处理程序，该处理程序稍后可用于使用 clearInterval 清除该间隔，例如：

```
 var handler = setInterval(function(){
      console.log('interval');
    },1000);

    setTimeout(function(){
      clearInterval(handler);
    },5000); 
```

# http - ASP .NET 4 Wev Api 控制器 - 修改响应类型

> ID：12511382
> 
> 赞同：0
> 
> 时间：2012-09-20T11:08:18.913
> 
> 标签：http, asp.net-mvc-4, asp.net-web-api, httpresponse

假设我有一个简单的 Web API 控制器。结果，我想返回一个基本的 .NET 类型。例如：

```
public class LoginController : ApiController
{
    [HttpPost]
    public bool Authenticate(LoginUserViewModel loginUserViewModel)
    {
        return true;
    }
} 
```

即使所有浏览器的请求完全相同，我也会在不同的浏览器中得到不同的结果。在 Chrome 和 IE7 中，我在响应标头中获得 Content-Type 作为**application/json**；charset=utf-8，响应值等于“ **true** ”。Firefox 将响应 Content-Type 识别为**application/xml**；charset=utf-8 并将响应值设置为：

```
"<boolean xmlns="http://schemas.microsoft.com/2003/10/Serialization/">true</boolean>" 
```

有没有办法在服务器端设置响应类型，所以它总是一样的？谢谢。

**更新：**这是我用来调用我的控制器的 JavaScript。

```
 Ext.Ajax.request({
                    async: false,
                    url: 'Login/Authenticate',
                    defaultHeaders: { 'Accept': 'application/json' },
                    jsonData: user,
                    success: function (response, options) {
                        if (response.responseText !== 'true') {
                            Ext.Msg.alert('Error', 'Login failed, please try again');
                        } else {
                            document.location = 'Main.aspx';
                        }
                    },
                    failure: function (response, options) {
                        Ext.MessageBox.hide();
                        Ext.Msg.alert('Error', 'Server error. Cannot authenticate user.');
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:24:18.950

这是因为浏览器发送不同的 Accept 标头。Web API 使用接受标头来确定响应的内容类型。默认情况下，Web API 会在其 configuration.Formatters 集合中加载一些不同的格式化程序。

强制响应为特定媒体类型的一种方法是删除所有现有的格式化程序并仅添加您想要的格式化程序。

```
configuration.Formatters.Clear();
configuration.Formatters.Add(new JsonMediaTypeFormatter()); 
```

# applescript - 无法使用 applescript 在窗口中找到元素

> ID：12511386
> 
> 赞同：0
> 
> 时间：2012-09-20T11:08:31.503
> 
> 标签：applescript

我是 AppleScript 的新手。我想访问对话框/窗口中的元素。我尝试了以下代码。

```
tell application "System Events"
set procs to processes
set windowName to {}
repeat with proc in procs
    try
          if exists (window 1 of proc) then
        repeat with w in windows of proc
            if w's name contains "App Name" then
                copy w's name to the end of windowName
                copy properties of w to the end of windowName
            end if
        end repeat
             end if
    end try -- ignore errors
end repeat
end tell
return windowName 
```

但我只能从窗口中获取 4 个元素：1.关闭 2.最小化 3.最大化 4.窗口标题

窗口/ dilog 内部没有任何内容。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:50:39.307

您只是询问窗口的名称和属性。如果您想要它的元素，请询问它的“ui 元素”。

# android - 带有 AutocompleteTextView 和 onclicklistener 的 ArrayAdapter 自定义

> ID：12511393
> 
> 赞同：3
> 
> 时间：2012-09-20T11:09:05.443
> 
> 标签：android, android-layout, android-widget, android-arrayadapter, onitemclicklistener

嘿伙计们！我编写了一个 AutocompleteTextView 并且效果很好。现在我需要在自动完成的下拉视图中使用监听器。我已经为我的需要实现了一个自定义的 ArrayAdapter，但是现在当我使用我的监听器时，我得到了一个执行 (IndexOutOfBoundExecption)。

```
autoCompleteTextView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> listView, View view, int position, long id) {
                Intervento intervento = (Intervento) listView.getItemAtPosition(position);
                Integer idIntervento = intervento.getIdintervento();
                //autoCompleteTextView.setText(intervento);
            }
        }); 
```

listView 包含一个空的arrayList，它应该有服务器响应。

这是 arrayAdapter 自定义代码

```
public class AutoCompleteCustomAdapter extends ArrayAdapter<Intervento>  implements Filterable {

    static class ViewHolder{
         private TextView  textName;
    }

    private ArrayList<Intervento> arrayListIntervento;
    private int              layout;

    public ArrayList<Intervento> getArrayListIntervento() {
        return arrayListIntervento;
    }

    public void setArrayListIntervento(ArrayList<Intervento> arrayListIntervento) {
        this.arrayListIntervento = arrayListIntervento;
    }

    @Override
      public int getCount() {
        return arrayListIntervento.size();
      }

    @Override
    public Intervento getItem(int index) {
        return arrayListIntervento.get(index);
    }

     @Override
        public Filter getFilter() {
         Filter myFilter = new Filter() {
                @SuppressWarnings("unchecked")
                @Override
                protected void publishResults(CharSequence contraint, FilterResults results) {
                    if(results != null && results.count > 0) {
                        arrayListIntervento = (ArrayList<Intervento>)results.values;
                        setArrayListIntervento(arrayListIntervento);
                        notifyDataSetChanged();
                    }
                    else {
                        notifyDataSetInvalidated();
                    }
                }

                @Override
                protected FilterResults performFiltering(CharSequence arg0) {
                    FilterResults filterResults = new FilterResults();
                    if(arg0 != null) {
                        try {
                            arrayListIntervento = new InterventoController().execute("http://192.168.1.162:8080/Clinigo/InterventoHasSinonimoName/{interventohassinonimo_interventoNomeIntervento}/1/interventos", arg0.toString()).get();
                        }
                        catch(Exception e) {
                            e.printStackTrace();
                        }
                        // Now assign the values and count to the FilterResults object
                        filterResults.values = arrayListIntervento;
                        filterResults.count = arrayListIntervento.size();
                    }
                    return filterResults;
                }
            };
            return myFilter;
     }

    @Override
    public View getView(int position, View contentView, ViewGroup viewGroup) {

        View       view = null;
        ViewHolder viewHolder = null;

        if(contentView==null){
            LayoutInflater inflater =  (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.suggest_list, viewGroup, false);

            if (view != null) {
                viewHolder = new ViewHolder();
                viewHolder.textName = (TextView) view.findViewById(R.id.nomeIntervento);
                view.setTag(viewHolder);
                Intervento intervento = arrayListIntervento.get(position);
                if(intervento!=null){
                    viewHolder.textName.setText(intervento.getNome());
                }
            }
        }else {
            view = contentView;
            viewHolder = (ViewHolder) contentView.getTag();
        }

        if (viewHolder != null) {
            Intervento intervento = arrayListIntervento.get(position);
            if(intervento!=null){
                viewHolder.textName.setText(intervento.getNome());
            }
        }

        return view;

    }

    public AutoCompleteCustomAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);

        this.arrayListIntervento= new ArrayList<Intervento>();
        this.layout=textViewResourceId;
    }

} 
```

有什么建议么？

Logcat 堆栈跟踪：

```
09-20 15:14:27.885: E/AndroidRuntime(941): FATAL EXCEPTION: main
09-20 15:14:27.885: E/AndroidRuntime(941): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.util.ArrayList.get(ArrayList.java:304)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.AutoCompleteCustomAdapter.getItem(AutoCompleteCustomAdapter.java:42)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.AutoCompleteCustomAdapter.getItem(AutoCompleteCustomAdapter.java:1)
09-20 15:14:27.885: E/AndroidRuntime(941):  at it.stasbranger.clinigomobile.MainActivity$2.onItemClick(MainActivity.java:90)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView.performCompletion(AutoCompleteTextView.java:868)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView.access$500(AutoCompleteTextView.java:91)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AutoCompleteTextView$DropDownItemClickListener.onItemClick(AutoCompleteTextView.java:1157)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Handler.handleCallback(Handler.java:605)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.os.Looper.loop(Looper.java:137)
09-20 15:14:27.885: E/AndroidRuntime(941):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.lang.reflect.Method.invokeNative(Native Method)
09-20 15:14:27.885: E/AndroidRuntime(941):  at java.lang.reflect.Method.invoke(Method.java:511)
09-20 15:14:27.885: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-20 15:14:27.885: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-20 15:14:27.885: E/AndroidRuntime(941):  at dalvik.system.NativeStart.main(Native Method) 
```

# javascript - onclick 在博客中未运行 javascript 的超链接

> ID：12511402
> 
> 赞同：0
> 
> 时间：2012-09-20T11:09:33.427
> 
> 标签：javascript, html, blogger

我的 Javascript

```
<script type='text/javascript'>
 //<![CDATA[
function showAnswer()
{
  alert('Answer');
  var els = document.getElementsByClassName('answer');
if (els.style.display != 'inline')
    els.style.display = 'inline';
} 
}

     //]]>
</script> 
```

其中 answer 是页面上 p 标签的类名，最初被以下代码隐藏：

```
 .answer { display:none; } 
```

这是调用 showAnswer 的代码，它不起作用...

```
 <div class='show_hide_answers'>
        <a href='#' onclick='showAnswer();'>Show Answer</a>
 </div> 
```

单击显示答案什么也不做。即使它没有显示警报也意味着 javascript 没有运行。请帮我解决这个问题。有关更多详细信息，请参阅此页面（这是此页面的代码）

[http://www.technodoze.com/2012/09/the-idea-that-light-is-em-wave-was.html](http://www.technodoze.com/2012/09/the-idea-that-light-is-em-wave-was.html)

如果你能帮助我，请提前谢谢...

注意：我已经尝试了所有这些：

```
<a href='#' onclick='showAnswer()'>Show Answer</a>

<a href='#' onclick='javascript:showAnswer();'>Show Answer</a>

<a href='#' onclick='javascript:return showAnswer();'>Show Answer</a> 
```

没有人在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:14:56.677

[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)返回 a[`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)而不是单个`Node`. 因此，您需要遍历结果`NodeList`：

```
var els = document.getElementsByClassName('answer');
for (var i = 0; i < els.length; i++) {
  var el = eles[i];
  if (el.style.display != 'inline') {
    el.style.display = 'inline';
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:24:14.317

如果您调试 javascript，请使用您的控制台，它显示“Uncaught SyntaxError: Unexpected token }”。if 后面有一个`{`缺失。

也[getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)不返回单个元素，而是一组元素（注意getElement_s_ *）*

# java - 生成 JTextField 输入猜测

> ID：12511405
> 
> 赞同：0
> 
> 时间：2012-09-20T11:09:44.793
> 
> 标签：java, swing, autocomplete, jcombobox, jtextfield

我有一个带有 JTextField 的 Swing 应用程序，用户应该输入 ID 号。ID 号存储在数据库中。在从 DB 查询时，最终用户需要再次输入 ID 号以查询 DB。我需要关于如何操作的建议，以便当用户输入 ID 号的第一个数字时，猜测会出现在 JtextField 下方供用户选择。Swing 是否可行？实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:16:09.260

[http://www.orbital-computer.de/JComboBox/](http://www.orbital-computer.de/JComboBox/)也许这有帮助。我知道我不应该只发布一个链接。但是我不能在这里再次写出所有解释过的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:43:43.483

试试看。[`AutoCompleteDecorator`](http://download.java.net/javadesktop/swinglabs/releases/weekly/week-1-2007-01-02/swingx/javadoc/org/jdesktop/swingx/autocomplete/AutoCompleteDecorator.html)_ `swingx`检查这篇[文章](https://stackoverflow.com/questions/8689695/jtextfield-autocomplete)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:46:19.800

还是不确定，

*   您可以使用[AutoCompleted JComboBox / JTextField](https://stackoverflow.com/search?q=user:714968%20autocomplete)（AFAIK 和, 和`Document`没有`Focus`问题）`Caret``Selection/HightLighter`

*   （并与 am 点结合）[在 JTable 中使用过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)（有一个`Column`和/或没有`JTableHeader`）放置在未装饰`JDialog`或`JWindow`（默认未装饰）中，以防您想在滚动标签内容中显示带有长句子列表的弹出窗口，可以点击的

    1.  使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)（5 -10 秒自动隐藏弹出窗口）

    2.  基于or共享（使用相同的）模型`JTable`，`AutoCompleted JComboBox / JTextField``Vector``ArrayList`

    3.  通过 Kai Toedter检查弹出窗口的焦点生命周期（没有比这更好的了）作为[Java 日历](http://www.toedter.com/en/jcalendar/)（下载代码源）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T07:42:00.270

您应该编写一个 PickList 类，该类必须包含一个 SQL 查询 select * from dbtableName where empId %getUserInput()%;

# ruby-on-rails - rails rspec 在测试时访问其他表

> ID：12511407
> 
> 赞同：2
> 
> 时间：2012-09-20T11:09:59.213
> 
> 标签：ruby-on-rails, ruby, rspec, rspec-rails

我对 Rails 很陌生，发现自己在理解数据库表之间的关系时遇到了一些问题（我猜？）。

我的问题如下：

我有一个用户表，其中包含有关用户的信息，包括他们的电子邮件地址和另一个包含“游戏”的表，我想管理那些玩过的玩家。当玩家想要提交他们的游戏时，他们必须通过他们的电子邮件地址指定参与游戏的用户。我想验证这些玩家是否真的存在。

我的游戏模型：

```
class Game < ActiveRecord::Base
  attr_accessible :caster1, :caster2, :faction1, :faction2, :player1, :player2, :points, :won

  before_save { |game| player1 = player1.downcase }
  before_save { |game| player2 = player2.downcase }

  validate :existence_of_both_players

  ...
  (some more validations)
  ...

  private
    def existence_of_both_players
        User.exists?(:email => :player1.downcase) && User.exists?(:email => :player2.downcase)
    end
end 
```

我的测试用例如下：

```
require 'spec_helper'

describe Game do

  before do
    @game = Game.new( player1:  "foobar@example.com",
                      faction1: "Some faction",
                      caster1:  "Some caster",
                      player2:  "bazbaz@example.com",
                      faction2: "Some other faction",
                      caster2:  "Some other caster",
                      points:   35,
                      won:      true)
  end

  ...
  (some other specs)
  ...

  describe "saving a game" do
    let(:player1) { User.create(name:                   "Example1", 
                                email:                  "example1@foo.bar",
                                password:               "foobar",
                                password_confirmation:  "foobar") }
    let(:player2) { User.create(name:                   "Example2", 
                                email:                  "example2@foo.bar",
                                password:               "foobar",
                                password_confirmation:  "foobar") }

    describe "with invalid players" do

      describe "when both players do not exist" do
        before { @game.player1 = @game.player2 = "some_wrong_user@example.com" }
        it { should_not be_valid }
      end

      describe "when player1 does not exist" do
        before { @game.player2 = player2 }
        it { should_not be_valid }
      end

      describe "when player2 does not exist" do
        before { @game.player1 = player1 }
        it { should_not be_valid }
      end
    end

    describe "with valid players" do
      before do 
        @game.player1 = player1
        @game.player2 = player2
      end

      it { should be_valid }
    end
  end
end 
```

（对不起大量的代码，我只是认为它会有所帮助）。

我的测试失败了，我很确定原因很明显，遗憾的是对我来说不是。

```
Failures:

  1) Game saving a game with invalid players when both players do not exist 
     Failure/Error: it { should_not be_valid }
       expected valid? to return false, got true
     # ./spec/models/game_spec.rb:108:in `block (5 levels) in <top (required)>'
... 
```

我真的想不通，为什么这不起作用。我阅读了 rails book 并观看了几个截屏视频，但没有一个能正确解释我的问题。

由于这是我在 stackoverflow 上的第一篇文章，如果这篇文章过于冗长，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:45:14.300

自定义验证器方法应调用 errors.add 以发出错误信号。所以在你的情况下是这样的：

```
 def existence_of_both_players
      player_one_exists = User.find_by_email :player1.downcase
      player_two_exists = User.find_by_email :player2.downcase
      unless player_one_exists and player_two_exists
          errors.add :game, "both players need to exist"
      end
    end 
```

[在ActiveRecord 验证和回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)指南中阅读更多内容。

# python - 在 Python 中接受 json 图像文件

> ID：12511408
> 
> 赞同：3
> 
> 时间：2012-09-20T11:10:23.253
> 
> 标签：python, json

我们如何在 python 中接受 json 图像文件？我们`josn.loads`用于数据，但图像文件呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T11:23:35.293

JSON 是一种*文本*格式。由于图像是不透明的二进制数据，因此您需要将该数据编码为文本格式。

Base64 最常用于此类数据，python 可以使用[`base64`模块](http://docs.python.org/library/base64.html)很好地处理这些数据：

```
import base64
import json

image = base64.decodestring(json.dumps(data)['image']) 
```

这是 Twitter 支持[更新您的个人资料图像的](https://dev.twitter.com/docs/api/1.1/post/account/update_profile_image)方式。

但是，对图像数据使用 JSON*并不是一个好主意*，除了非常小的图像。python 中包含的 json 解析器很容易被一个大的有效载荷（如大小合适的图像）过载。

您最好提供一个 REST API，它使用 PUT 或 POST 请求来接受图像，然后使用 URL 就图像进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:23:08.990

JSON 是**JavaScript 对象表示法**。它用于使用基本类型、*字符串、整数、浮点数、布尔值等*来传达信息。

它可用于传递有关资源的元数据，但通常不能用于传递资源本身。

例如，您可能会收到如下 JSON 对象：

```
a = '''{
  'imageUrl': '/images/image.png',
  'imageName': 'My Image'  
}'''
decoded = json.loads(a) 
```

通常，您使用此表示信息自行检索资源。您可以使用标准库的网络模块在 python 中执行此操作。

```
import urllib2
img = urllib2.urlopen(decoded.imageUrl).read() 
```

# sencha-touch - 在 Sencha 中查看加载事件处理程序？

> ID：12511409
> 
> 赞同：0
> 
> 时间：2012-09-20T11:10:34.043
> 
> 标签：sencha-touch, extjs, sencha-touch-2

在我的 sencha 应用程序主页中，我有一个空列表。在应用程序统计上，我想从数据库中获取数据并将其添加到列表存储中。那么是否有任何监听器来查看负载。我正在使用 MVC 架构。我尝试了控制器的“启动”和视图的“痛苦”听众，但没有运气。我想要类似jqm“pagebeforeshow”的东西，我可以在显示页面之前进行数据库获取。

```
$("#HomePage").live('pagebeforeshow',function(event, ui){
// fetch data and add to list   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:34:25.120

如果您使用 MVC 架构，您可以在控制器操作中加载数据。查看 sencha touch 文档中的示例。[http://docs.sencha.com/touch/2-0/#!/guide/controllers](http://docs.sencha.com/touch/2-0/#!/guide/controllers)

```
 Ext.define('MyApp.controller.Users', {
        extend: 'Ext.app.Controller',

        config: {
            routes: {
                'user/:id': 'showUserById'
            },

            refs: {
                main: '#mainTabPanel'
            }
        },

        // Loads the User then adds a 'userprofile' view to the main TabPanel
        showUserById: function(id) {
            MyApp.model.User.load(id, {
                scope: this,
                success: function(user) {
                    this.getMain().add({
                        xtype: 'userprofile',
                        user: user
                    });
                }
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:18:14.927

1）您可以在视图中覆盖初始化方法

```
Ext.define('YourApp.view.YourView', {
    initialize: function () {
       var ctrl = YourApp.app.getController('YourController');
       ctrl.functionYouWantToCall();
} 
```

但这不是一个好的 MVC 解决方案......

2）控制器的启动方法应该有效。加载应用程序时将触发它。也许您忘记将控制器添加到 app.js 的“控制器”属性中

# python - 从文本文件中打印多行

> ID：12511411
> 
> 赞同：3
> 
> 时间：2012-09-20T11:10:35.400
> 
> 标签：python, config, cisco

如果我有这样的文本文件：

```
FastEthernet3/1
ip address 0.0.0.0
enable portfast

FastEthernet3/2
ip address 0.0.0.0
enable portfast

FastEthernet3/3
ip address 0.0.0.0

FastEthernet3/4
ip address 0.0.0.0 
```

我想打印出没有启用portfast的接口。我如何在python中打印这个？

我有以下代码：

```
import os
import sys

root = "path to text file like the example above"

os.chdir(root)

current2 = os.getcwd()

print ("CWD = ", current2,"\n")

file = sys.argv[1]

f = open(file)
contents = f.read()
f.close()
print ("Number of GigabitEthernet:",contents.count("interface GigabitEthernet"))
print ("Number of FastEthernet:",contents.count("FastEthernet"))

x = open(file)
string1 = "enable portfast"
for line in x.readlines():
    if line.startswith(string1)
        print (line)
filehandle.close() 
```

所以我可以找到启用 portfast 的行并打印它，但我希望它打印更多行，所以我知道女巫接口启用了 portfast。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:19:49.907

如果每个接口定义都以 string 开头`"FastEthernet"`，你可以`contents`用那个字符串分割你的：

```
interfaces = contents.split("FastEthernet"):
for interface in interfaces:
    if "enable portfast" in interface:
        print "FastEthernet" + interface 
```

编辑：基于 Alexanders 解决方案，如果总是有一个空白行分隔接口，只需声明`interfaces`如下：

```
interfaces = contents.split("\n\n") 
```

...并将打印语句更改为`print interface`仅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:16:09.383

无法返回文件，因此最好的解决方案是跟踪前面的行并在 portFast 匹配时打印它们。

编辑以包含解决方案：（感谢亚历山大）

```
import re
pinterfaces = re.compile("\r?\n\r?\n").split(contents)
# pinterfaces = ['FastEthernet3/1...', 'FastEthernet3/2...', ...]
for pinterface in pinterfaces:
  if "enable portfast" in pinterface:
    print pinterface 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:29:06.810

基于空行分隔的接口拆分：

```
import re
pinterfaces = re.compile("\r?\n\r?\n").split(contents)
# pinterfaces = ['FastEthernet3/1...', 'FastEthernet3/2...', ...]
for pinterface in pinterfaces:
  if "enable portfast" in pinterface:
    print pinterface 
```

```
FastEthernet3/1
ip address 0.0.0.0
enable portfast
FastEthernet3/2
ip address 0.0.0.0
enable portfast 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:28:26.743

感谢 Alexander，它现在可以工作了 :) 唯一的问题是我的文本文件与示例有点不同。它看起来像这样：

```
FastEthernet3/1
ip address 0.0.0.0
enable portfast
!
FastEthernet3/2
ip address 0.0.0.0
enable portfast
!
FastEthernet3/3
ip address 0.0.0.0
!
FastEthernet3/4
ip address 0.0.0.0 
```

所以我不得不更换！首先有一个空白，然后它起作用了:)

```
import re
contents2 = contents.replace("!","")
pinterfaces = re.compile("\n\n").split(contents2)
# pinterfaces = ['FastEthernet3/1...', 'FastEthernet3/2...', ...]
for pinterface in pinterfaces:
  if "enable portfast" in pinterface:
    print (pinterface) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:28:11.783

```
with open('test.txt', 'r') as in_file:
    lines = in_file.readlines()

for i,v in enumerate(lines):
    #print i,v
    if v.strip() == 'enable portfast':
        print lines[i-2].strip()
        print lines[i-1].strip()
        print lines[i].strip() 
```

这打印出来：

```
FastEthernet3/1
ip address 0.0.0.0
enable portfast
FastEthernet3/2
ip address 0.0.0.0
enable portfast 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-20T11:13:58.583

尝试将所有设备分别解析为字典数组，如下所示：

```
[{"device_name":"FastEthernet/1","address":"1.0.0.0", "portfast": True}] 
```

然后您可以遍历此哈希并打印具有该`portfast`值的项目的设备名称。

# wpf - 带有 Microsoft 的 WPF 功能区的窗口样式与 Windows 8 样式不匹配

> ID：12511416
> 
> 赞同：20
> 
> 时间：2012-09-20T11:10:51.677
> 
> 标签：wpf, windows-8, ribbon, .net-4.5, wpf-4.5

我正在使用 Windows 8 和 Visual Studio 2012 的发布版本来创建带有功能区控件的 WPF 应用程序。我选择 .Net Framework 4.5 中 WPF 自带的功能区控件。

我创建功能区的代码：

```
<RibbonWindow
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfExperiments" x:Class="WpfExperiments.MainWindow"
    Title="MainWindow" Height="350" Width="525" Icon="Test.ico">
<Ribbon>        
    <Ribbon.ApplicationMenu>
        <RibbonApplicationMenu>
            <RibbonApplicationMenuItem Header="Item 1"></RibbonApplicationMenuItem>
        </RibbonApplicationMenu>
    </Ribbon.ApplicationMenu>
    <Ribbon.QuickAccessToolBar>
        <RibbonQuickAccessToolBar>
            <RibbonButton SmallImageSource="Test.ico" Label="Test"></RibbonButton>
        </RibbonQuickAccessToolBar>
    </Ribbon.QuickAccessToolBar>
</Ribbon> 
```

但问题是它会生成一个与 windows 8 样式不匹配的丑陋样式的窗口：

![我的丝带](../Images/166db4b08f906c9b7ae3754402906592.png)

将其与资源管理器功能区进行比较。窗口标题居中（并具有不同的颜色），窗口的边框大小不同。功能区的样式不一样，但如果我有与 MS Word 相同的功能区样式（在 Windows 8 中正确显示），我会很满意。

![Windows 8 中的资源管理器功能区](../Images/6b771c801f61b5f38caaf5dd85d3b8c8.png)

WPF 的功能区控件是否不支持新的 Windows 8 样式？还是我错过了任何设置？

**编辑：**

我开始在 Blend 中编辑模板（4.0，我无权访问 5.0）。在修复了一些编译错误（似乎是 blend 中的错误）之后，我可以运行应用程序，但它看起来像这样：

![在此处输入图像描述](../Images/eb9e65a5256d35bb4163007ade904849.png)

但这不是我改变的一个好的起点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T22:22:32.840

WPF 功能区不是操作系统提供的控件的包装器（与大多数 Windows 窗体控件一样），而是从头开始构建以具有功能区在开发时的外观和感觉，同时作为一个控件与其他 WPF 控件一样灵活（注意对模板部分的支持）。

也就是说，这是一个控件（当前）未更新以支持 Windows 8 样式的问题。考虑到必须更改的多个控件的模板数量，以及向后兼容的需要（这是我在这一点上的推测），当 .NET 4.5 发布时，它可能被视为不是优先事项。

您也许可以自己更改主题，但这看起来是一项艰巨的任务，因此使用已经实现 Windows 8 功能区样式的第三方控件对您来说可能是值得的。

# jquery-ui - 只用 jquery-ui 拖动主 ul？

> ID：12511428
> 
> 赞同：0
> 
> 时间：2012-09-20T11:11:41.517
> 
> 标签：jquery-ui, jquery

我有一个简单的嵌套 UL，我只需要使主 UL 可排序，而不是子 UL

例子

```
<ul class="blocks-list" id="sortme">
    <li>
        <a href="#" class="float-left"><img src="../templates/admin/images/icons/fugue/status.png" width="16" height="16"> Task name</a>
        <ul class="tags float-right">
            <li class="tag-time">5 days</li>
            <li class="tag-tags">Server</li>
            <li class="tag-user">You</li>
        </ul>
    </li>
        <ul class="mini-blocks-list">
            <li>
                    <a href="#" class="float-left"><img src="../templates/admin/images/icons/fugue/status.png" width="16" height="16"> Task name</a>
                    <ul class="tags float-right">
                            <li class="tag-time">5 days</li>
                            <li class="tag-user">You</li>
                    </ul>
            </li>

        </ul>

    <li>
        <a href="#" class="float-left"><img src="../templates/admin/images/icons/fugue/status.png" width="16" height="16"> Task name</a>
        <ul class="tags float-right">
            <li class="tag-time">5 days</li>
            <li class="tag-user">You</li>
        </ul>
    </li>

</ul> 
```

当我使用这个 Jquery 代码时

```
$("#sortme").sortable({
                    update : function () {
                    serial = $('#sortme').sortable('serialize');
                    $.ajax({
                    url: "sort_menu.php",
                    type: "post",
                    data: serial,
                    error: function(){
                    alert("theres an error with AJAX");
                    }
                });
            }
        }); 
```

它使 UL 块列表和迷你块列表都可排序

我需要的只是使块列表 LI 可排序而不是 UL 的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:26:40.313

这似乎是 jQuery 可排序的一个限制，如果你没有找到一个纯 jQuery 解决方案，你可以试试[这个插件](http://mjsarfatti.com/sandbox/nestedSortable/)或[这个插件。](http://www.b-hind.eu/jquery/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:58:53.150

您可以使用 sortable`items`选项来准确过滤您需要的内容并防止其他项目被排序。例如`items: "> li"`. [文档](http://jqueryui.com/demos/sortable/#option-items)

# cuda - CUDA线程本地数组

> ID：12511430
> 
> 赞同：1
> 
> 时间：2012-09-20T11:11:48.893
> 
> 标签：cuda

我正在编写一个 CUDA 内核，它需要为每个线程维护一个小的关联数组。小，我的意思是最坏情况下最多 8 个元素，以及两个左右的预期条目数；所以没什么花哨的；只是一个键数组和一个值数组，索引和插入是通过对所述数组的循环进行的。

现在我通过线程本地内存来做到这一点；即标识符[大小]；其中 size 是编译时间常数。现在听说在某些情况下，该存储器存储在片外，而在某些情况下，它存储在片内。显然我想要后者，在任何情况下。我知道我可以通过一个共享内存块来实现这一点，我让每个线程在自己的私有块上工作；但真的吗？我不想在线程之间共享任何东西，这将是一个可怕的组合。

这个内存去向的具体规则是什么？我似乎找不到任何来自 nvidia 的词。作为记录，我正在使用 CUDA5 并以开普勒为目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:40:23.170

局部变量要么存储在寄存器中，要么存储在片外内存中（为计算能力 >=2.0 而缓存）。

如果所有数组索引都是常量并且可以在编译时确定，则寄存器仅用于数组，因为该体系结构无法在运行时对寄存器进行索引访问。

在您的情况下，键的数量可能足够小以使用寄存器（并容忍寄存器压力的增加）。展开数组访问上的所有循环，以允许编译器将键放在寄存器中，并使用`cuobjdump -sass`它来检查它是否确实如此。

如果您不想花费寄存器，您可以选择具有每个线程偏移量的共享内存（但请检查用于将每个线程索引保存到共享内存中的附加寄存器不会超过您使用的键数）正如您所提到的，或者什么都不做并使用片外“本地”内存（真正的“全局”内存，只有不同的寻址方案），希望缓存能够发挥作用。

如果您希望缓存保存键和值，并且不使用太多共享内存，那么选择 48kB 缓存/16kB 共享内存设置而不是使用[`cudaDeviceSetCacheConfig()`](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__DEVICE_gac27b566beee1aa9175373bb9e29b8d1.html#gac27b566beee1aa9175373bb9e29b8d1).

# stored-procedures - 我可以在 postgres 和 plpython 之间共享复合类型吗

> ID：12511431
> 
> 赞同：3
> 
> 时间：2012-09-20T11:11:49.447
> 
> 标签：stored-procedures, plpython, plpy

我有一个名为 tt 的复合类型，供我的所有 plpgsql 和 plpythonu 过程使用。有没有某种plpy。以一致的方式访问目录或模式以派生类型或可迭代结构以返回而不必在 plpythonu 过程中定义类的方法？

```
CREATE TYPE tt AS (id integer, name text);
CREATE OR REPLACE FUNCTION python_setof_type() RETURNS SETOF tt AS $$
#-- i want this to be dynamic or to have it's attributes pulled from the tt type
class tt:
    def __init__(self, id, name):
        plpy.info('constructed type')
        self.idx = 0
        self.id = id
        self.name = name

    def __iter__ (self):
        return self

    def next (self):
        if (self.idx == 1):
            raise StopIteration

        self.idx += 1
        return ( self )

return tt(3, 'somename')

#-- was hoping for something like
#-- give me 1 record
#-- return plpy.schema.tt(3, 'somename')

#-- give me 2 records
#-- return plpy.schema.tt([3, 'somename'], [1, 'someornothername'])

#-- give me a no records
#-- return plpy.schema.tt([])
$$ LANGUAGE plpythonu; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:14:58.797

没有任何内置的东西，但这是一个好主意。正如您所指出的，您可以通过查询系统目录自己编写它。

# deployment - QML 应用部署、资源系统或相关寻址

> ID：12511437
> 
> 赞同：2
> 
> 时间：2012-09-20T11:12:03.707
> 
> 标签：deployment, qml, qtdeclarative

我将部署一个**基于 QML 的应用程序**。现在我想知道最好将*资源系统用于 .qml 文件及其关联文件或使用相对寻址或有更好的方法*？
如果 qml 文件和图像的数量越来越大，第一种方法可能会使项目难以管理。此外，我认为部署第三方插件（如 Qt 桌面组件）会更加困难。
第二种方式并不安全。每个人都可以打开一个文本编辑器并编辑您的 .qml 文件。
有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:16:42.217

使用资源系统：

1.  将所有依赖项绑定到一个二进制文件中，因此根据代码中给出的路径将它们放置在确切的位置是没有问题的。

2.  很多时候你不想分享你的 qml 代码/图像等 [关闭源代码项目]，在这些情况下很有帮助。此外，它更安全，因为没有人可以修改您的文件并可能削弱您的应用程序。

3.  您将无法在运行时修改这些依赖文件，这在某些情况下可能是必需的。

`The first way maybe make the project difficult to manage if the number of qml files and your images become larger and larger.`

与您所说的相反，我认为管理它们更容易，可能有多少文件。您可以[在这里](http://www.developer.nokia.com/Community/Wiki/How_to_use_Resource_Editor_with_Qt_Creator)看到使用 Qt Creator 是多么容易。

相对寻址：

1.  所有依赖项都分散在不同的位置，因此根据代码中给出的路径将它们放置在确切位置的问题。

2.  由于您的文件可供任何想要访问它们的人直接使用，因此不安全。

3.  如果在运行时需要对其中一个文件进行修改，您可以这样做。例如。拥有一个日志文件并向其中写入/读取一些数据。

4.  当文件数量增加时（与第一种方法相比）难以管理，因为必须给出确切的路径。

我发现第二种方法的一个个人优势是在这样的情况下：

我需要将我的 Qt 演示应用程序发送给具有离岸经理的客户。这些演示会持续一整天。如果一些次要的 UI 功能（例如按钮的大小看起来非常小）受到过多的负面关注，我们可以引导经理调用相应的 qml 文件，并让他做一些小的更改（例如 scale : 1.5 ）这是很有帮助，因为我们没有时间构建整个系统，将 exe 重新发送给他们等。

有没有更好的办法？不是我见过。我认为这是找到上述哪一项更适合您的要求的问题。

# cuda - cuda 线程是否有可能拥有参数的本地/私有副本，可以在不影响其他线程的情况下对其进行更新

> ID：12511442
> 
> 赞同：0
> 
> 时间：2012-09-20T11:12:27.007
> 
> 标签：cuda

我遇到了一种情况，我需要提供一些数组作为全局函数的输入，我需要每个线程能够以不会影响其他线程复制的方式对数组执行操作数组，我提供下面的代码作为我想要实现的示例。

```
__global__ void testLocalCopy(double *temper){

     int threadIDx = threadIdx.x + blockDim.x * blockIdx.x; 

     // what I need is for each thread to set temper[3] to its id without affecting any other threads copy
    // so thread id 0 will have a set its copy of temper[3] to 0 and thread id 3 will set it to 3 etc.
     temper[3]=threadIDx;
     printf("For thread  %d  the val in temper[3] is   %lf \n",threadIDx,temper[3]);

} 
```

只是重申一下，是否有一种方法可以让给定线程确定没有其他线程正在更新其 temp[3] 的值？

我最初认为我可以通过使用常量内存来解决这个问题，但是由于常量内存是只读的，这不能满足我的需求，

我正在使用 cuda 4.0 ，请参阅下面的主要功能。

```
int main(){

    double temper[4]={2.0,25.9999,55.3,66.6};
double *dev_temper;
int size=4;

    cudaMalloc( (void**)&dev_temper, size * sizeof(double) );
cudaMemcpy( dev_temper, &temper, size * sizeof(double), cudaMemcpyHostToDevice );

testLocalCopy<<<2,2>>>(dev_temper);
cudaDeviceReset();

cudaFree(dev_temper);

} 
```

在此先感谢，康纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:05:31.640

在您的内核函数中，您可以将内存分配为

> int temp_per_thread[4];

现在每个线程都可以在内核中对这个数组进行单独且唯一的访问，例如下面的代码将填充`temper_per_thread`当前线程索引：

> temp_per_thread[0]=threadIDx；
> 
> temp_per_thread[1]=threadIDx；
> 
> temp_per_thread[2]=threadIDx；
> 
> temp_per_thread[3]=threadIDx；

当然，如果您希望将所有这些线程特定的数组传输回 CPU，您将需要一种不同的方法。1）分配更大部分的全局内存。2) 这大部分全局内存的大小将是线程数乘以每个线程唯一的元素数。3）索引数组写入，以便每个线程始终写入全局内存中的唯一位置。4) 在内核完成后做一个 GPU 到 CPU memcpy。

# eclipse - 在eclipse中设置一个项目为主项目

> ID：12511445
> 
> 赞同：1
> 
> 时间：2012-09-20T11:12:39.750
> 
> 标签：eclipse, jakarta-ee, jboss5.x

任何人都可以告诉我如何在eclipse IDE中将java项目设置为调试主项目。它总是无法运行新编码的项目，因为另一个现有的项目正在尝试运行。netbeans中有没有像“设置为主项目”这样的选项谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:58:21.987

不是 100% 确定我知道你在问什么，所以我在猜测一下。在 Eclipse “Preferences”下，您可以转到“Run/Debug-->Launching”。在底部有一个名为“启动操作”的部分，可让您控制 Eclipse 启动的内容。

这可能是您正在寻找的。

# ruby - 对“<<”的作用感兴趣

> ID：12511446
> 
> 赞同：4
> 
> 时间：2012-09-20T11:12:53.830
> 
> 标签：ruby

遇到了这段代码。

```
def setup(&block)
  @setups << block
end 
```

这条线有什么作用？

```
@setups << block 
```

对“<<”的作用感兴趣。

手册上说是双班制的操作员，但他在这里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T11:15:10.250

对于数组`<<`是 append 方法。它将一个项目添加到数组的末尾。

因此，在您的特定情况下，当您使用块调用时`setup`，`Proc`由该块制成的对象存储在`@setups`.

注意：正如[sbeam](https://stackoverflow.com/users/125875/sbeam)在他的评论中指出的那样，因为`<<`它是一种方法，它可以根据调用它的对象的类型来做不同的事情，例如字符串的连接、整数的位移等。

请参阅“ [ary << obj → ary](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-3C-3C) ” 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:14:53.280

它通过将元素推到它的末尾来构建一个数组。

这是[手动输入](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-3C-3C)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:16:04.517

`<<`在 Ruby 中通常用于表示*追加*-*添加*到列表或*连接*到字符串。

Ruby 使用它的原因尚不清楚，但可能是因为库在很大程度上区分了更改对象和返回已更改对象（更改对象的方法往往有`!`后缀）。这样，`<<`是改变对象的对应物`+`。

# sql - SQL Server：日期时间超出范围错误

> ID：12511447
> 
> 赞同：5
> 
> 时间：2012-09-20T11:12:54.047
> 
> 标签：sql, sql-server-2005

我有这个查询

```
SELECT W.NUMBER,B.NAME,Br.NAME,W.WDATE,W.REPAIRSTATUS,W.REPAIRCOST,W.REMARK
FROM Work_Order AS W,Brands AS B,Branches AS Br
WHERE W.BRANDID = B.ID AND W.BRANCHID = Br.ID
AND CAST(WDATE as DATETIME)  < CAST('09/18/2012' AS DATETIME) 
```

系统响应

> *将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。*

也使用这个查询它给出了同样的错误

```
SELECT W.NUMBER,B.NAME,Br.NAME,W.WDATE,W.REPAIRSTATUS,W.REPAIRCOST,W.REMARK
FROM Work_Order AS W,Brands AS B,Branches AS Br
WHERE W.BRANDID = B.ID AND W.BRANCHID = Br.ID
ORDER BY CAST(W.WDATE AS DATETIME) 
```

WDATE 就像'09/03/2012'，它是来自 jquery ui datepicker 的输入，具有 mm/dd/yyyy 日期格式

请帮助我，我不知道如何解决它。

我正在使用 SQL Server 2005。

编辑：我用另一个 sql server 2005 尝试了相同的查询，它工作正常，所以请如何使用 sql server 设置修复这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:45:38.867

我假设您的 WDATE 是 varchar / char 而不是应有的数据时间，您可以像这样转换它，但是我建议您将数据类型更改为日期时间。尝试这个：

```
SELECT W.NUMBER,B.NAME,Br.NAME,W.WDATE,W.REPAIRSTATUS,W.REPAIRCOST,W.REMARK 
FROM Work_Order AS W,Brands AS B,Branches AS Br 
WHERE W.BRANDID = B.ID AND W.BRANCHID = Br.ID 
AND CONVERT( DATETIME, WDATE, 101) < CONVERT( DATETIME, '09/18/2012', 101) 
```

试试这个代码，它应该找到大部分无效日期

```
SELECT WDATE, W.NUMBER,B.NAME,Br.NAME,W.WDATE,W.REPAIRSTATUS,W.REPAIRCOST,W.REMARK 
FROM Work_Order AS W,Brands AS B,Branches AS Br 
WHERE W.BRANDID = B.ID AND W.BRANCHID = Br.ID 
AND WDATE not like '[0-1][0-9]/[0-3][0-9]/20[0-1][0-9]' 
```

# visual-c++ - __stdcall 和 _stdcal 有什么区别？

> ID：12511451
> 
> 赞同：6
> 
> 时间：2012-09-20T11:13:25.980
> 
> 标签：visual-c++

`__stdcall`和 和有什么不一样`_stdcal`？通过放置`_`标记的变量计数器到底是什么逻辑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T12:27:43.023

没有名为 的标识符或关键字`_stdcal`。但是，MSVC 编译器同时接受`_stdcall`and `__stdcall`，一个或两个下划线。

有一个下划线是因为语言规范需要它。全局命名空间中的供应商特定标识符或非标准关键字必须以下划线作为前缀。

双下划线的存在是因为供应商永远输掉了与认为他们应该在自己的代码中使用前导下划线的程序员的战斗。也出现在其他非标准关键字中，例如`__interface`和`__m128`。在其他编译器中，比如 gcc 的`__attribute__`. 显然，您需要使用文档版本，两个下划线。

# iphone - 如何在 ios 中集成 Flickr Api

> ID：12511454
> 
> 赞同：1
> 
> 时间：2012-09-20T11:13:44.417
> 
> 标签：iphone, flickr

我想集成 flickr api 以通过我的 iphone 应用程序将图像上传到 flickr 站点。我已经从 github下载了代码[snap&Run 。](http://code.flickr.com/blog/tag/iphone/)我在我的代码中集成了相同的代码。但它在从 safari 浏览器导航回应用程序时向我显示错误。错误是：-无法打开页面 Safari 无法打开页面，因为地址无效。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T08:47:17.003

请参考`https://github.com/lukhnos/objectiveflickr`著名`ObjectiveFlickr`存储库的此链接。我认为它更轻更简单：

*   它依赖于`AFNetworking`，这是行业标准
*   它只有 4 个课程和一个很好的教程
*   编码风格更现代

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:18:13.340

[https://github.com/lukhnos/objectiveflickr](https://github.com/lukhnos/objectiveflickr) 这将对您有所帮助！

# jquery - 405 方法不允许错误在开始时出现但随后消失

> ID：12511458
> 
> 赞同：0
> 
> 时间：2012-09-20T11:13:57.363
> 
> 标签：jquery, spring, tomcat, spring-mvc

我正在开发具有提要和评论（例如状态和评论）的应用程序。当我添加一个新的提要时它工作正常并且新的提要被添加。当我开始在提要上添加评论时，我得到

“不允许使用 405 方法”。

但是当我刷新页面然后开始添加评论时，评论添加成功。谁能告诉我为什么会这样。我使用相同的 jquery/ajax 来添加提要和评论。

这是代码：

```
 $.ajax({
            type : "POST",
            url : loc,
            cache : false,
            data : message,
            crossDomain : true,
                dataType : "json",
    //      dataType : "jsonp",
            success : function(data) {
                alert("feed/comment added");                
                }
            }
        }); 
```

PS：我正在使用 Spring 和 Tomcat。我正在使用相同的功能来添加提要和评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:18:11.970

当您访问该页面时，您的浏览器会向服务器发出 HTTP GET 请求。但是，当您请求添加评论时，您发送的是 HTTP POST 请求。似乎服务器配置为仅接受 GET（可能还有其他），但不接受 POST 请求。

你可以试试

```
$.ajax({
        type : "GET",
        url : loc,
        cache : false,
        data : message,
        crossDomain : true,
            dataType : "json",
//      dataType : "jsonp",
        success : function(data) {
            alert("feed/comment added");                
            }
        }
    }); 
```

或者，如果服务器是您的，只需将其配置为接受 POST 请求。

编辑：进一步思考，可能还涉及更多复杂性（基于它在页面刷新后工作的事实）。可能正在发送诸如 HTTP PUT（或 HTTP OPTIONS）请求之类的东西，从而导致了问题。理想情况下，您应该查看服务器日志以找出导致问题的请求。

# html - 扩展 TYPO3 根节点模板

> ID：12511459
> 
> 赞同：0
> 
> 时间：2012-09-20T11:13:57.693
> 
> 标签：html, typo3, typoscript

我的页面树结构如下所示：

```
ROOT
- PAGE 1
- PAGE 2
- PAGE 3 
```

我在根页面中定义了一个模板。这实际上是一个布局，包含页眉页脚和主要内容的子部分（'MAINCONTENTSECTION'）。

现在对于每个页面，我都有不同的 html 模板。我想扩展每个页面的根模板，以便每个页面的自定义 html 模板进入“MAINCONTENTSECTION”子部分。

如何使用打字稿完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:21:30.027

只需在每个站点上添加扩展模板或在页面 ID 上使用条件。

`TypoScript`为每个站点单独解析，因此您可以`TypoScript`在扩展模板内部进一步定义一个新属性，并将其全部合并。

# c# - .net - 从 windows mahcine 远程执行 Unix 机器中的进程

> ID：12511470
> 
> 赞同：1
> 
> 时间：2012-09-20T11:14:43.730
> 
> 标签：c#, .net, unix, remoting, psexec

我正在开发一个 C# 应用程序，我需要在 Unix 机器上远程执行一个进程。我如何使用 PsExec 或 Windows Management Instrumentation 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:17:22.427

WMI 和 PSExec 都依赖于 Windows 特定的 API 和服务。请改用 Secure Shell (ssh)。有关使用 SSH 的 C# 库，请参阅[C# Library for SSH 和 Telnet](https://stackoverflow.com/questions/4881587/c-sharp-library-for-ssh-and-telnet)或[C# .net 中的 SSH 客户端](https://stackoverflow.com/questions/8292470/ssh-client-in-c-sharp-net)。

# c# - 将browseui.dll添加到项目中

> ID：12511473
> 
> 赞同：0
> 
> 时间：2012-09-20T11:14:50.687
> 
> 标签：c#, internet-explorer, dll

我正在尝试为 IE 开发一个附加组件，并且我想将 browseui.dll 添加到我的项目中，但我收到此错误消息

无法添加对“C:\BROWSEUI.DLL”的引用。请确保该文件是可访问的，并且该文件是有效的程序集或 COM 组件。

有谁知道出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:32:21.507

您可以在您的`registery base`. 你可以使用`RegSrv32`工具，在使用前

链接：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

# r - 逐个元素组合两个向量

> ID：12511476
> 
> 赞同：8
> 
> 时间：2012-09-20T11:14:53.950
> 
> 标签：r

我有 2 个向量，例如：

```
A <- c(1,2,NA,NA,NA,NA,7)
B <- c(NA,NA,3,4,NA,NA,7) 
```

我想将它们组合起来，以便生成的向量是

```
1,2,3,4,NA,NA,-1 
```

那是

1.  当位置 i 的任一向量中仅存在 1 个值（例如 X）时（另一个为 NA），新向量应在位置 i 处取值 X。

2.  当两个值在位置 i 处均为 NA 时，新向量应在位置 i 处取值 NA

3.  当两个向量在位置 i 处都有值时，新向量应在位置 i 处取值 -1。

我可以通过循环轻松地做到这一点，但是在大型数据集上它非常慢，所以任何人都可以提供一种快速的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T11:24:54.177

这些命令创建向量：

```
X <- A
X[is.na(A)] <- B[is.na(A)]
X[is.na(B)] <- A[is.na(B)]
X[!is.na(A & B)] <- -1

#[1]  1  2  3  4 NA NA -1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:25:12.843

```
A <- c(1,2,NA,NA,NA,NA,7)
B <- c(NA,NA,3,4,NA,NA,7)
C <- rowMeans(cbind(A,B),na.rm=TRUE)
C[which(!is.na(A*B))]<- -1
#[1]   1   2   3   4 NaN NaN  -1 
```

基准：

```
Unit: microseconds
          expr    min     lq median     uq     max
1 Roland(A, B) 17.863 19.095 19.710 20.019  68.985
2   Sven(A, B) 11.703 13.243 14.167 14.783 100.398 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T12:11:30.340

聚会有点晚了，但这是另一个选项，它定义了一个函数，该函数通过将规则应用于两个向量`cbind`-ed 一起工作。

```
# get the data
A <- c(1,2,NA,NA,NA,NA,7)
B <- c(NA,NA,3,4,NA,NA,7)

# define the function
process <- function(A,B) {
  x <- cbind(A,B)
  apply(x,1,function(x) {
    if(sum(is.na(x))==1) {na.omit(x)} else
    if(all(is.na(x))) {NA} else
    if(!any(is.na(x))) {-1}
  })
}

# call the function
process(A,B)
#[1]  1  2  3  4 NA NA -1 
```

The main benefit of using a function is that it is easier to update the rules or the inputs to apply the code to new data.

# arrays - matlab：从数组中消除元素

> ID：12511479
> 
> 赞同：7
> 
> 时间：2012-09-20T11:15:09.040
> 
> 标签：arrays, matlab, matrix, grouping

我有相当大的阵列。为了简单起见，让我们将其简化为：

```
A = [1 1 1 1 2 2 3 3 3 3 4 4 5 5 5 5 5 5 5 5]; 
```

因此，有一组 1（4 个元素）、2's（2 个元素）、3's（4 个元素）、4's（2 个元素）和 5's（8 个元素）。现在，我只想保留属于 3 个或更多元素组的列。所以它会像：

```
B = [1 1 1 1 3 3 3 3 5 5 5 5 5 5 5 5]; 
```

我正在使用*for*循环执行此操作，分别扫描 1、2、3 等等，但是对于大数组来说它非常慢……感谢您提出如何以更有效的方式进行操作的任何建议 :) 艺术。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T11:54:26.730

### 一般方法

如果您的向量不一定是排序的，那么您需要运行以计算向量中每个元素的出现次数。你[`histc`](http://www.mathworks.com/help/matlab/ref/histc.html)只需要：

```
elem = unique(A);
counts = histc(A, elem);
B = A;
B(ismember(A, elem(counts < 3))) = [] 
```

最后一行选择出现次数少于 3 次的元素并将其删除。

### 分组向量的一种方法

如果您的向量是“半排序的”，也就是说，如果向量中的相似元素被分组在一起（如您的示例中所示），您可以通过执行以下操作来加快速度：

```
start_idx = find(diff([0, A]))
counts = diff([start_idx, numel(A) + 1]);
B = A;
B(ismember(A, A(start_idx(counts < 3)))) = [] 
```

再次注意，向量不需要完全排序，只要相似的元素彼此相邻即可。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-20T12:15:04.973

这是我的两个班轮

```
counts = accumarray(A', 1);
B = A(ismember(A, find(counts>=3))); 
```

accumarray 用于计算 A 的各个成员。 find 提取符合“3 个或更多元素”标准的成员。最后，ismember 会告诉您它们在 A 中的位置。请注意，A 不需要排序。当然， accumarray 仅适用于 A 中的整数值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T11:21:07.197

您所描述的称为[运行长度编码](http://en.wikipedia.org/wiki/Run_length)。

在 FileExchange 上的 Matlab 中有用于此的软件。或者你可以直接这样做：

```
len = diff([ 0 find(A(1:end-1) ~= A(2:end)) length(A) ]);
val = A(logical([ A(1:end-1) ~= A(2:end) 1 ])); 
```

一旦你有了游程编码，你就可以根据长度删除元素。IE

```
idx = (len>=3)
len = len(idx);
val = val(idx); 
```

然后解码得到你想要的数组：

```
i = cumsum(len);
j = zeros(1, i(end));
j(i(1:end-1)+1) = 1; 
j(1) = 1; 
B = val(cumsum(j)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T11:28:51.930

这是使用 matlab 内置函数的另一种方法。

```
% Set up
A=[1 1 1 1 2 2 3 3 3 3 4 4 5 5 5 5 5];
threshold=2;

% Get the unique elements of the array
uniqueElements=unique(A);

% Count haw many times each unique element occurs
counts=histc(A,uniqueElements);

% Write which elements should be kept
toKeep=uniqueElements(counts>threshold);

% Make a logical index
indexer=false(size(A));
for i=1:length(toKeep)
    % For every unique element we want to keep select the indices in A that
    % are equal
    indexer=indexer|(toKeep(i)==A);
end

% Apply index
B=A(indexer); 
```

# php - Paypal 可以在本地主机上获取证书 ID 吗？

> ID：12511482
> 
> 赞同：1
> 
> 时间：2012-09-20T11:15:26.747
> 
> 标签：php, paypal, localhost, paypal-sandbox

我是使用 Paypal 进行按钮加密的新手。[我按照http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php](http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php)上的教程进行操作，但我正在使用本地主机。我的应用程序说它“无法解密证书 ID”。Paypal 是否可以在本地主机上获取证书 ID？

# javascript - three.js - 无法动态创建管几何

> ID：12511484
> 
> 赞同：0
> 
> 时间：2012-09-20T11:15:30.267
> 
> 标签：javascript, html, three.js, html5-canvas, dom-events

我为点提供了输入文本框。现在，当我单击绘图按钮时，只会显示顶点。实际上，我想根据点（XYZ 坐标）给出的路径创建管几何。

请找到以下代码和 [我的 jsfiddle 链接](http://jsfiddle.net/Btt9a/3/)：

```
 <!DOCTYPE html>
    <html lang="en">
        <head>
            <title>3d Model using HTML5 and three.js</title>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
            <style>
                body {
                    font-family: Monospace;
                    background-color: #f0f0f0;
                    margin: 0px;
                    overflow: hidden;
                }
                #Find_panel {
                    position: absolute;
                    right: 5px;
                    top: 5px;
                    color: #fff;
                    text-align: left;
                    background: rgba(0, 0, 0, 0.5);
                    padding: 10px;
                    width: 290px;
                    height: 120px;
                    border: solid 1px black;
                    border-radius: 5px;
                }
                #Find_panel input {
                    padding: 2px 4px;
                    margin-bottom: 3px;
                }
            </style>
        </head>
        <body>  
            <div id="Find_panel" align="right">
                X1: <input type="text" id="txtX1" name="p1[]" maxlength="2" size="2" />&nbsp;Y1: <input type="text" id="txtY1" name="p1[]" maxlength="2" size="2" />&nbsp;Z1: <input type="text" id="txtZ1" name="p1[]" maxlength="2" size="2" /><br/>
                X2: <input type="text" id="txtX2" name="p2[]" maxlength="2" size="2" />&nbsp;Y2: <input type="text" id="txtY2" name="p2[]" maxlength="2" size="2" />&nbsp;Z2: <input type="text" id="txtZ2" name="p2[]" maxlength="2" size="2" /><br/>
                X3: <input type="text" id="txtX3" name="p3[]" maxlength="2" size="2" />&nbsp;Y3: <input type="text" id="txtY3" name="p3[]" maxlength="2" size="2" />&nbsp;Z3: <input type="text" id="txtZ3" name="p3[]" maxlength="2" size="2" /><br/>
                <input type="button" value="plot" onClick="return plotPath();" />
                <input type="button" value="render" onClick="return animate();" />
            </div>

            <script src="three.min.js" type="text/javascript"></script>
            <script src="Curve.js" type="text/javascript"></script>
            <script src="TubeGeometry.js" type="text/javascript"></script>      
            <script src="Stats.js" type="text/javascript"></script>
            <script src="Detector.js" type="text/javascript"></script>

            <script>

// variables
        var container, stats, form;

        var camera, scene, renderer, splineCamera, cameraHelper, cameraEye;

        var text, plane, tube, tubeMesh, parent;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        var binormal = new THREE.Vector3();
        var normal = new THREE.Vector3();

        var materials = []; 

            function plotPath()
            {           
                var segments = 50;
                var closed = false;
                var debug = true;
                var radiusSegments = 12;
                var tube;
                var points = [];

                for(var i=1; i<4; i++)
                {               
                    x = document.getElementById("txtX"+i).value;
                    y = document.getElementById("txtY"+i).value;
                    z = document.getElementById("txtZ"+i).value;
                    points.push( new THREE.Vector3(x,y,z));
                    extrudePath = new THREE.SplineCurve3(points);

                    tube = new THREE.TubeGeometry(extrudePath, segments, 2, radiusSegments, closed, debug);
                    tube.dynamic = true;

                    tubeMesh = new THREE.Mesh(tube ,new THREE.MeshBasicMaterial({
                        color: 0x000000,side: THREE.DoubleSide,
                        opacity: 0.5,transparent: true,
                        wireframe: true}));
                    tubeMesh.dynamic = true;

                    parent = new THREE.Object3D();
                    parent.position.y = 100;

                    if ( tube.debug ) tubeMesh.add( tube.debug );
                    parent.add( tubeMesh );                 
                    scene.add( tubeMesh );
                }           
                animate();                          
            }

            init();                     
            //animate();

            function init(){

                // container
                container = document.createElement( 'div' );
                document.body.appendChild( container );

                // renderer
                //renderer = new THREE.CanvasRenderer();
                renderer = new THREE.WebGLRenderer( { antialias: true } ); 
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );

                // scene            
                scene = new THREE.Scene();

                // camera
                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.set(30,10,10);
                camera.lookAt(scene.position);
                //camera.up = new THREE.Vector3( 0, 1, 1 );

                // CONTROLS
                //console.log(renderer.domElement);
                controls = new THREE.TrackballControls( this.camera, container );   

                // light            
                scene.add( new THREE.AmbientLight( 0x404040 ) );
                light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 0, 1, 0 );
                scene.add( light );                 

                // Grid
                geometry = new THREE.Geometry();
                geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
                geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

                for ( var i = 0; i <= 20; i ++ ) {

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.z = ( i * 50 ) - 500;
                    scene.add( line );

                    line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                    line.position.x = ( i * 50 ) - 500;
                    line.rotation.y = 90 * Math.PI / 180;
                    scene.add( line );
                }

                // projector
                projector = new THREE.Projector();

                // stats
                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                //container.appendChild( stats.domElement );

                document.addEventListener( 'mousedown', onDocumentMouseDown, false );
                document.addEventListener( 'mouseover', onDocumentMouseOver, false );
                document.addEventListener( 'touchstart', onDocumentTouchStart, false );
                document.addEventListener( 'touchmove', onDocumentTouchMove, false );               
                window.addEventListener( 'resize', onWindowResize, false );

            }
            /*function draw(x,y,z)
            {           
                points.push( new THREE.Vector3(x,y,z));             
            }*/

            function onWindowResize() {

                camera.left = window.innerWidth / - 2;
                camera.right = window.innerWidth / 2;
                camera.top = window.innerHeight / 2;
                camera.bottom = window.innerHeight / - 2;
                camera.aspect = window.innerWidth / window.innerHeight;
                //camera.updateProjectionMatrix();
                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function onDocumentMouseDown( event ) {
                event.preventDefault();

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );
                document.addEventListener( 'mouseup', onDocumentMouseUp, false );
                document.addEventListener( 'mouseout', onDocumentMouseOut, false );

                mouseXOnMouseDown = event.clientX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;         
            }

            function onDocumentMouseMove( event ) {

                mouseX = event.clientX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.02;

            }

            function onDocumentMouseUp( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOut( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentMouseOver( event ) {

                document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
                document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
                document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

            }

            function onDocumentTouchStart( event ) {

                if ( event.touches.length === 1 ) {

                    event.preventDefault();

                    mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotationOnMouseDown = targetRotation;

                }

            }

            function onDocumentTouchMove( event ) {
                if ( event.touches.length === 1 ) {
                    event.preventDefault();
                    mouseX = event.touches[ 0 ].pageX - windowHalfX;
                    targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
                }
            }

            function animate() {
                requestAnimationFrame( animate );
                tubeMesh.rotation.y += ( targetRotation - tubeMesh.rotation.y ) * 0.15;                         
                camera.updateMatrixWorld();
                renderer.render( scene, camera );                           
                update();
            }

            function update()
            {
                controls.update();
                stats.update();
            }

            function render() {             
                tubeMesh.rotation.y += ( targetRotation - tubeMesh.rotation.y ) * 0.15;         
                camera.updateMatrixWorld();
                renderer.render( scene, camera );
            }
            </script>       

        </body>
    </html> 
```

# ios - iPad防止页面拖动

> ID：12511485
> 
> 赞同：2
> 
> 时间：2012-09-20T11:15:31.080
> 
> 标签：ios, ipad, cordova, drag

我正在使用 phonegap（使用 HTML5 和 jQuery 的简单应用程序）为 iPad 编写应用程序。问题是应用程序窗口是可拖动的，如图所示，当我向下拖动窗口时它会下降，当我离开窗口时它会自动上升。我不想要这种行为。

![在此处输入图像描述](../Images/8d51cf2a2779b20b9c491e89c676f582.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:50:44.880

尝试在您的文件中设置`UIWebViewBounce`为。`NO``Cordova.plist`

检查此链接：[如何防止在电话间隙中运行的应用程序垂直滚动？](https://stackoverflow.com/questions/6193016/how-to-prevent-app-running-in-phone-gap-from-scrolling-vertically)

**注意：**使用此解决方案，您可以禁用应用程序的“横向模式”。

希望这会有所帮助，让我知道这是否适合你的队友

# c# - 修改 FROM SMTP 标头而不影响 MIME from: 标头

> ID：12511487
> 
> 赞同：3
> 
> 时间：2012-09-20T11:15:32.983
> 
> 标签：c#, .net, email, smtp, clr

在 SMTP 中有信封 MAIL FROM 标头（实际上是一个 SMTP 命令）和消息数据本身中的 FROM 标头（下面的示例）
我需要能够修改 MAIL FROM 标头而不影响 MIME 'From' 标头。
困难在于.net MailMessage 包含一个控制 SMTP 和 MIME 标头的“From”属性，并且允许自定义标头的“标头”属性不允许覆盖 From 标头。

[退回跟踪](http://en.wikipedia.org/wiki/Non_delivery_report)需要此功能，我非常希望避免切换到不同的 SMTP 包或从头开始实施 SMTP...

例如 - 请注意两条强调线

*{S}220 工作站 1 Microsoft ESMTP 邮件服务
{C}HELO 工作站
1 {S}250 工作站 1 你好 [127.0.0.1]
{C}**邮件来自：BOUNCE_TRACKING_TOKEN@mymailinglist.com**
{S}250 2.1.0 me@mycompany.com。 ...Sender OK
{C}RCPT TO:
{S}250 2.1.5 you@yourcompany.com
{C}DATA
{S}354 开始邮件输入；以 .
{C}
**发件人：coolstuff@mymailinglist.com**
收件人：
主题：超级简单的电子邮件
回复：
这是一个非常简单的正文。
.
{S}250 排队等待投递的邮件
{C}QUIT
{S}221 服务关闭传输通道*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:57:27.173

在标题`Sender`中使用您想要的地址设置属性。`MAIL FROM`

# java-me - j2me：发送短信（消息）错误

> ID：12511488
> 
> 赞同：1
> 
> 时间：2012-09-20T11:15:37.553
> 
> 标签：java-me, sms, sendmessage, wma

我正在开发一个带有 j2me 抛光和发送短信的应用程序。我用过`javax.wireless.messaging`。
但是在一些手机如sony erricson 和一些模拟器中，它面临一些与这个类有关的错误，有没有其他适合微版的短信发送方式？
我的代码在这里，它在模拟器上运行良好。

```
private void sendMessage() {
String phoneNumber = "sms://" + mobile;
MessageConnection localMessageConnection = null;
try {
localMessageConnection = (MessageConnection) Connector.open(phoneNumber);

TextMessage localTextMessage =
(TextMessage) localMessageConnection.newMessage(MessageConnection.TEXT_MESSAGE);
localTextMessage.setAddress(phoneNumber);
localTextMessage.setPayloadText(messageTF.getString());
localMessageConnection.send(localTextMessage);
display.setCurrent(getAlertForm("message", "success", null));
} catch (Exception localException) {
display.setCurrent(getAlertForm("message", "failure", null));
}
} 
```

微模拟器像某些手机一样显示此错误：

```
java.lang.NoClassDefFoundError: javax/wireless/messaging/Message
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
at java.lang.Class.getConstructor0(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at org.microemu.app.Common.startMidlet(Common.java:412)
at org.microemu.app.Common.initMIDlet(Common.java:1039)
at org.microemu.app.launcher.Launcher.commandAction(Launcher.java:121)
at javax.microedition.lcdui.Display$DisplayAccessor.commandAction(Display.java:189)
at org.microemu.app.ui.swing.SwingDeviceComponent$1.mousePressed(SwingDeviceComponent.java:186)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: org.microemu.app.classloader.MIDletClassLoader$LoadClassByParentException: javax.wireless.messaging.Message
at org.microemu.app.classloader.MIDletClassLoader.findClass(MIDletClassLoader.java:339)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.microemu.app.classloader.MIDletClassLoader.loadClass(MIDletClassLoader.java:213)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 30 more 
```

# jquery - chrome和firefox中textarea的大小不同

> ID：12511495
> 
> 赞同：-1
> 
> 时间：2012-09-20T11:16:16.693
> 
> 标签：jquery, html, css

我面临一个关于 html 中 textarea 标签大小的问题。当我在 chrome 中打开页面时，它以不同的高度打开，当我在 Firefox 中打开该页面时，该文本区域的大小不同。请告诉我这个问题的解决方案。谢谢亲切的问候

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T11:58:39.920

你必须在你的css文件中写条件css所以看看这个

# r - R优化隐藏马尔可夫模型中的状态数

> ID：12511496
> 
> 赞同：0
> 
> 时间：2012-09-20T11:16:30.443
> 
> 标签：r

我正在尝试找到一种方法来优化 R 中隐藏马尔可夫模型 (HMM) 中的状态数。R 中的 HMM 上有许多 R 包，但我无法估计最佳隐藏状态数。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:44:19.123

要调整隐藏状态的数量，您需要一个可能的隐藏状态数量的向量`nhs`和性能度量`perf()`（某种可以评估模型好坏的误差度量）。然后为每个隐藏状态数量构建一个模型，并选择一个给您最佳性能的模型。

这是如何执行此操作的伪代码示例。

```
nhs <- c(1, 2, 3, 5, 8, 11, 15)
error <- rep(NA, length(nhs))
for(i in 1:length(nhs)){
    fit <- train.HMM(data, nhs[i])
    error[i] <- perf(fit)
}
nhs[which.min(error)] # Optimal number of hidden states 
```

我猜你的表现衡量标准是模型在预测新的看不见的例子的结果方面有多好。我建议您对每个隐藏状态的数量进行[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)。这些线上的东西：

```
...
for(i in 1:length(nhs)){
    pred <- vector("list", k)
    for(fold in 1:k){
        fit <- train.HMM(data[not.in.fold.k], nhs[i])
        pred[[fold]] <- predict(fit, data[in.fold.k])
    }
    error[i] <- perf(pred)
}
... 
```

我没有提供更详细代码的原因是为了不使示例混乱（并且因为您没有提供可重现的示例来工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T11:29:16.620

通过确定循环状态的循环分析图可能是一种用于近似确定初始隐藏状态数量的信息化方式。

# z3 - Z3 非线性算术性能

> ID：12511503
> 
> 赞同：5
> 
> 时间：2012-09-20T11:16:49.770
> 
> 标签：z3

我认为 Z3 中处理非线性算术的部分遇到了性能问题。这是一个简单的具体 Boogie 示例，当使用 Z3（4.1 版）进行验证时，需要很长时间（大约 3 分钟）才能完成。

```
const D: int;
function f(n: int) returns (int) { n * D }

procedure test() returns ()
{
  var a, b, c: int;
  var M: [int]int;
  var t: int;

  assume 0 < a && 1000 * a < f(1);
  assume 0 < c && 1000 * c < f(1);
  assume f(100) * b == a * c;

  assert M[t] > 0;
} 
```

似乎问题是由函数的交互、整数变量的范围假设以及（未知）整数值的乘法引起的。最后的断言不应该是可证明的。Z3 似乎没有快速失败，而是有办法以某种方式实例化许多术语，因为它的内存消耗相当快地增长到大约 300 MB，此时它放弃了。

我想知道这是否是一个错误，或者是否有可能改进 Z3 何时应该停止在它当前试图解决问题的特定方向上的搜索的启发式方法。

一件有趣的事情是通过使用内联函数

```
function {:inline} f(n: int) returns (int) { n * D } 
```

使验证很快终止。

背景：这是我们在验证器 Chalice 中看到的问题的最小测试用例。在那里，Boogie 程序变得更长，可能有多个类似的假设。通常，验证似乎根本没有终止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:33:24.507

是的，非终止是由于非线性整数算术。Z3 有一个新的非线性求解器，但它用于“非线性实数算术”，并且只能用于仅使用算术的无量词问题（即，没有像您的示例中那样的未解释函数）。因此，您的示例中使用了旧的算术求解器。此求解器对整数运算的支持非常有限。你对问题的分析是正确的。Z3 难以找到非线性整数约束块的解。请注意，如果我们替换`f(100) * b == a * c`为`f(100) * b <= a * c`，则 Z3 会立即返回“未知”答案。

我们可以通过限制Z3中非线性算术推理的数量来避免不终止。对于每个 Z3 查询，该选项`NL_ARITH_ROUNDS=100`将最多使用非线性模块 100 次。这不是一个理想的解决方案，但至少，我们避免了不终止。

# c# - 如何使用 ISWiAuto18.ISWiProject dll 更新 Installshield 项目中的注册表项值？

> ID：12511505
> 
> 赞同：0
> 
> 时间：2012-09-20T11:16:57.217
> 
> 标签：c#, installshield, installscript-msi

我创建了一个程序（C# dotnet），它使用 ISWiAuto18.ISWiProject 更新我的 MSI（Installshield 2009）项目的不同属性（如路径变量）

```
 for (int count = 1; count <= m_ISWiProj.ISWiPathVariables.Count; count++)
                {
                    if (m_ISWiProj.ISWiPathVariables[count].Name == pathVar)
                    {
                        m_ISWiProj.ISWiPathVariables[count].Value = pathvarvalue;
                        m_ISWiProj.IswiAutoUpgradeEntries
                    }
        } 
```

但是现在我无法找到使用 ISWiAuto18.ISWiProject 更新 Installshield 项目的我的注册表项值的方法？有没有办法更新注册表值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:31:29.520

The ISWiProject object has a ISWiComponents collection that allows you to get a reference to a ISWiComponent object. Once you do that you can use the ImportRegFile method to load additional registry data into the component. That's about the extent of the abilities of the automation interface.

If I understood what you were doing better I could give more advice. You might want to consider using a [PROPERTY] in your registry table of the ISM and then pass property values into the build. This would be a simple way of getting the variation points you might need.

Another approach is to use the ISWiProject object's UseXMLProjectFormat method to convert the ISM from XML to/from Binary and then either use an XML DOM to manipulate the ISM (DTD is rough but doable) or Windows Installer SQL queries if binary format. (WiX's DTF library Microsoft.Deployment.WindowsInstaller is sweet for this )

# django - django - 模型之间的关系

> ID：12511506
> 
> 赞同：0
> 
> 时间：2012-09-20T11:17:07.413
> 
> 标签：django, django-models, relational-database

我有两个模型，分别是 Post 和 Profile。我保留博客数据，这些数据是 Post 中的标题、正文、所有者、slug 等。并保留用户个人资料设置，即个人资料中的口号、电子邮件、网站等

在我的 index.html 页面中，我在同一页面中显示用户个人资料信息和发布列表。所以 ; 我需要将这两个模型相互连接。当有人访问 127.0.0.1/blog/username（无论是否登录）时，属于名为“用户名”的用户的所有数据都必须存在。

这是我的models.py：

```
class Profile(models.Model):
    slogan = models.TextField(blank=True)
    twitter = models.CharField(max_length = 100,blank=True)
    web_site = models.CharField(max_length=100,blank=True)
    email = models.CharField(max_length = 100,blank=True)

    def __unicode__(self):
        return self.slogan

class Post(models.Model):
    owner = models.ForeignKey(User)
    title = models.CharField(max_length = 100)
    body = models.TextField()
    bodyPreview = models.TextField() #preview için body alanı
    titlePreview = models.CharField(max_length=100) # preview için title alanı
    slug = AutoSlugField(populate_from='title' ,unique=True)
    posted = models.DateField(auto_now_add=True)
    isdraft = models.BooleanField(default=False)

    def __unicode__(self):
        return self.title

    @permalink
    def get_absolute_url(self):
        return ('view_blog_post',None,{'postslug':self.slug}) 
```

和我的索引视图：

```
def index(request,username):
    post_list = Post.objects.filter(owner__username=username).filter(isdraft=False).order_by("-posted")
    p_index = Paginator(post_list,3) #anasayfa için pagination.[her sayfada 3 post]
    page = request.GET.get('page')

    try:
        indexPag = p_index.page(page)
    except PageNotAnInteger:
        indexPag = p_index.page(1)
    except EmptyPage:
        indexPag = p_index.page(p_index.num_pages)

    ## i need to get user's profile datas here. ??

    return render_to_response('index.html',
                             {'post_list':post_list,'p_index':indexPag,'profile':query},
                             context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:30:02.173

我认为您应该更改 Profile 模型并将 OneToOne 关系添加到 User 模型（有关更多信息，请参见[此处](http://www.b-list.org/weblog/2006/jun/06/django-tips-extending-user-model/)）：

```
class Profile(models.Model):
    user = models.OneToOneField(User)
    ...

class Posts(models.Model):
    author = models.ForeignKey(User)
    ... 
```

然后在您看来，您可以执行以下操作：

```
user = get_object_or_404(User, username=username)
post_list = Post.objects.filter(author=user).filter(isdraft=False).order_by("-posted") 

return render_to_response('index.html', 
                           {'post_list': post_list, 'user': user, ...}, ...) 
```

然后在您的模板中，您可以访问用户的个人资料。更多[信息，](https://stackoverflow.com/questions/422140/how-to-access-the-user-profile-in-a-django-template) 例如`{{user.get_profile.slogan}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:26:09.100

在您看来：

```
def index(request, username):
    user = User.objects.get(username=username)
    return render(request, 'index.html', {'user':user}) 
```

在您的模板中：

```
{{ user.post_set }} 
```

您将收到当前用户的帖子列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:06:20.533

实现这一点的*最自然方法是在***Profile**模型和 django 的**User模型之间****添加**OneToOne 关系。

 ****```
from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User)
    # More fields

class Article(models.Model):
    author = models.ForeignKey(User)
    # More fields 
```

这样，您可以通过 User 对象访问配置文件数据。会是这样的：

```
user = User.objecets.get(username=username)
profile = user.profile 
```

有关此的更多信息，您可以在[此处](https://docs.djangoproject.com/en/1.4/ref/models/fields/#onetoonefield)阅读 django 模型字段文档 ，您还可以看到关于具有 unique=True 的 ForeignKey 和 OneToOneField 之间的区别的[酷答案](https://stackoverflow.com/questions/5870537/whats-the-difference-between-django-onetoonefield-and-foreignkey)

我希望这有帮助****

# mysql - 在mysql中创建具有多个IP地址的用户

> ID：12511507
> 
> 赞同：1
> 
> 时间：2012-09-20T11:17:08.143
> 
> 标签：mysql, database, database-administration

我正在使用 mysql workbench 5.5 访问远程服务器。通过 mysql workbench 我创建了`sms`只能通过一个主机 IP 地址访问数据库的用户。但是，现在我想创建一个应该从 2 个 IP 地址访问数据库的用户。我是这样插入IP地址的`10.103.1.32/10.103.1.166`。在此之后，第一个 IP 地址`10.103.1.32`无法连接数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:25:29.957

您可以像这样简单地更新旧记录

```
UPDATE tableName
   SET IP =  CONCAT(IP, '/', 'newIP')
WHERE  userID = valueHere 
```

但这将是一个糟糕的表设计，最好的方法是为某个用户的 IP 创建一个单独的表，就像这个简单的模式

```
CREATE TABLE userList
(
   ID int AUTO_INCREMENT,
   User_Name VARCHAR(50,
   -- other columns
   CONSTRAINT use_pk PRIMARY KEY (ID)
);

CREATE TABLE user_IP
(
    RecordID INT AUTO_INCREMENT,
    UserID INT,
    IPADDRESS VARCHAR(20),
    CONSTRAINT ip_pk PRIMARY KEY (RecordID),
    CONSTRAINT ip_uq UNIQUE(UserID, IPADDRESS),
    CONSTRAINT ip_fk FOREIGN KEY (ID) REFERENCES userList(ID)
) 
```

# html - 将高度设置为百分比的 DIV 中的文本居中

> ID：12511510
> 
> 赞同：1
> 
> 时间：2012-09-20T11:17:26.217
> 
> 标签：html, css

这是我的[小提琴](http://jsfiddle.net/2EFZK/1/)。我无法将文本和时间文本垂直`Name1`居中 `Name2`。我确实尝试过，`display: table-cell; vertical-align: middle;`但没有帮助。你能指出我在哪里做错了吗？

**html:**

```
<div style="height: 15%;">
    <div class="timeDiv">
        <span class="time">19:00</span>
    </div>

    <div class="titleDiv">
            <img src="" alt="test1 img">                        
        <span class="title">Name 1</span>
    </div>            

    <div class="titleDiv">                                        
        <img src="" alt="test2 img">
        <span class="title">Name2</span>
    </div>
</div> 
```

**CSS**：

```
img{
    height: 80%; 
    float:left; 
    margin-left: 7%;
    margin-right: 1%;   
}

.timeDiv{
    float: left; 
    width:10%;
}

.titleDiv{
    float: left; 
    width: 45%;            
}

.title{
    font-size: 2em;
    float: left;
}

.time{
    font-size: 1.5em;
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:27:47.357

看看这里:) [http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

它解释了为什么不使用`vertical-align: middle`块级元素，并向您展示如何做您想做的事情（靠近页面底部）。

> 这里的问题是三个方面：
> 
> HTML 布局传统上不是为指定垂直行为而设计的。就其本质而言，它会按宽度缩放，并且内容会根据可用宽度流动到适当的高度。
> 
> 传统上，水平尺寸和布局很容易；垂直尺寸和布局由此衍生。vertical-align:middle 没有做预期的原因是因为作者不明白它应该做什么，但是……</p>
> 
> ……这是因为 CSS 规范确实搞砸了这一点（在我看来）——vertical-align 用于指定两种完全不同的行为，具体取决于它的使用位置。

我相信方法1会做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:37:24.163

您可以尝试将`line-height`s 应用于特定容器。你的 img 会得到`2 em`，times 会得到`1.33 em`，你的 title 会得到`1 em`，虽然这是多余的，因为默认的 line-height 是 1em。这是一个例子：

[例子](http://jsfiddle.net/Cael6/2EFZK/3/)

GL :)

# algorithm - 映射函数以降低时间复杂度？博士资格项目

> ID：12511513
> 
> 赞同：2
> 
> 时间：2012-09-20T11:17:43.043
> 
> 标签：algorithm

这是我上一次的comp stat qual。我给出了一个我认为很好的答案。我们只是在考试中获得分数，而不是我们是否正确回答了具体问题。希望社区可以对此提供指导，我对答案不感兴趣，而是对正在测试的内容以及我可以去哪里阅读更多相关信息并在下次考试前进行一些练习感兴趣。

乍一看，这似乎是一个时间复杂度问题，但当它开始谈论映射函数和预排序数据时，我不知道如何处理。那你会怎么回答？

这里是：

> 给定从某个域 Z 中抽取的一组项目 X = {x1, x2, ..., xn}，您的任务是查找 Z 中的查询项目 q 是否出现在集合中。为简单起见，您可以假设每个项目在 X 中只出现一次，并且需要 O(l) 时间来比较 Z 中的任何两个项目。
> 
> (a) 为检查 q 是否在 X 中的算法编写伪代码。算法的最坏情况时间复杂度是多少？
> 
> (b) 如果 l 非常大（例如，如果 X 的每个元素都是一个长视频），那么需要有效的算法来检查 q \in X 是否。假设您可以访问 k 个函数 h_i: Z -> {1, 2 , ..., m} 将 Z 的一个元素统一映射到 1 到 m 之间的一个数，并且让 k << l 和 m > n。为使用函数 h_1...h_k 来检查 q \in X 的算法编写伪代码。请注意，您可以预处理数据。你的算法的最坏情况时间复杂度是多少？
> 
> 明确说明伪代码中的输入、输出和假设。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:23:00.487

第一个似乎是简单的**线性扫描**。时间复杂度是`O(n * l)`，最坏的情况是比较所有元素。注意 - 它不能与 亚线性`n`，因为如果数据已排序，则没有信息。

第二个（b）实际上是**[bloom-filter](http://en.wikipedia.org/wiki/Bloom_filter)**的变体，它是一种表示集合的概率方式。使用布隆过滤器 - 您可能会有误报（假设某物在集合中，但它不在），但绝不会误报（假设某物不在集合中，而它在集合中）。

# c# - 如何从母版页访问页面控件？

> ID：12511518
> 
> 赞同：2
> 
> 时间：2012-09-20T11:18:04.260
> 
> 标签：c#, asp.net

我知道许多内容页面将使用 txtCustomerName 创建文本框控件。如果发现这一点，我需要更新会话中的值。在这种特殊情况下，我无法将这些控件移动到母版页。

如何从母版页访问页面控件。在页面生命周期的哪个事件中，我们应该尝试这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:20:02.690

你可以在任何你想要的事件中找到，就像在这个例子中我向你展示的按钮点击事件

```
protected void Button1_Click(object sender, EventArgs e)
{
   TextBox TextBox1 = ContentPlaceHolder1.FindControl("TextBox1") as TextBox;
   if (TextBox1 != null)
   {
       Label1.Text = TextBox1.Text;
   }
} 
```

# eclipse-pde - Eclipse 自定义标记视图

> ID：12511519
> 
> 赞同：1
> 
> 时间：2012-09-20T11:18:08.473
> 
> 标签：eclipse-pde, eclipse-plugin

我正在尝试创建自定义标记视图。在此视图中，我只想将资源限制/过滤到选定的项目。此项目名称将动态提供。

例如，在项目浏览器的上下文菜单中，将为用户提供打开自定义标记视图的选项。

如果用户从 project1 中选择自定义标记视图，该视图应该只显示 project1 的标记。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:34:13.333

我做过类似的事情。首先在您的 plugin.xml 中定义一个视图，相应的类必须扩展 MarkerSupportView。像这样的东西：

```
public class MarkerView extends MarkerSupportView {

public MarkerView() {
    super("com.example.markerEventContentGenerator"); //$NON-NLS-1$

}
} 
```

然后您需要定义新视图中的列以及必须显示的标记类型。这是 plugin.xml 中的一个示例。

```
 <extension
   point="org.eclipse.ui.ide.markerSupport">
<markerContentGenerator
      id="com.example.markerEventContentGenerator"
      name="Custom Marker View">
    <markerTypeReference 
     id="com.example.myMarker"/>
</markerContentGenerator>
<markerField
      class="com.example.fields.NameMarkerField"
      id="com.example.field.name"
      name="Name">
</markerField>
</extension> 
```

NameMarkerField 类必须扩展 MarkerField。另一个虚拟示例：

```
public class AnnotationNameMarkerField extends MarkerField {

public AnnotationNameMarkerField() {
    super();
}

@Override
public String getValue(final MarkerItem item) {
    return "Dummy Name";
}

/*
 * (non-Javadoc)
 *
 * @see
 * org.eclipse.ui.views.markers.MarkerField#getDefaultColumnWidth(org.eclipse
 * .swt.widgets.Control)
 */
@Override
public int getDefaultColumnWidth(final Control control) {
    return 400;
}
} 
```

现在您必须决定如何使用 id="com.example.myMarker" 创建项目特定的标记。

# facebook - FB.Event.subscribe auth.statusChange 不起作用

> ID：12511525
> 
> 赞同：0
> 
> 时间：2012-09-20T11:18:28.520
> 
> 标签：facebook, events, facebook-graph-api

```
window.fbAsyncInit = function() {
    FB.init({
        appId      : 'MyAppId',
        channelURL : 'MyChannelUrl',
        status     : true, 
        cookie     : true,
        xfbml      : true
    });

    FB.Event.subscribe('auth.statusChange', function(response)
    {
        console.log(response.status);
    }
} 
```

如果我当前登录 Facebook，为什么我的 console.log 只会触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T21:49:44.327

auth.statusChange 仅在以下情况下才会触发：

*   已连接（response.status === '已连接'）
*   登录 Facebook 但未连接到您的应用程序（response.status === 'not_authorized'）
*   根本没有登录Facebook。

已连接 = 用户已登录并已对您的应用进行身份验证，并且 response.authResponse 提供用户 ID、有效访问令牌、签名请求以及访问令牌和签名请求各自过期的时间

[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

# java - 验证两个 apk 文件是否使用相同的签名进行签名

> ID：12511533
> 
> 赞同：10
> 
> 时间：2012-09-20T11:19:00.937
> 
> 标签：java, android, signature, signing

我想验证两个 APK 文件是否已使用相同的证书进行签名。

我有整个 Java SDK 可用，但出于跨平台的原因，我想从 Java 代码中获取它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-27T16:25:47.303

一切都是为了**比较你的应用程序的签名**

```
a) get signature of both aps 
b) check if sig.hashCode() == releaseSig.hashCode 
```

1）通过使用android api运行时检查：

```
Signature[] sigs = context.getPackageManager()
           .getPackageInfo(context.getPackageName(), PackageManager.GET_SIGNATURES)
           .signatures; 
```

从文件：

```
 Signature releaseSig = context.getPackageManager()
          .getPackageAchiveInfo("/path2apk/app.apk",PackageManager.GET_SIGNATURES)
          .signatures[0]; 
```

2）在android之外获取签名见：

[http://androidcracking.blogspot.com/2010/12/getting-apk-signature-outside-of.html](http://androidcracking.blogspot.com/2010/12/getting-apk-signature-outside-of.html)

您可以使用：

```
 openssl pkcs7 -inform DER -in CERT.RSA -noout -print_certs -text
 unzip -p application.apk META-INF/CERT.RSA | keytool -printcert 
```

openssl的即时使用：

（解压缩和管道证书而不是定义 -infile 选项）：

```
unzip -p application.apk META-INF/CERT.RSA 
             | openssl pkcs7 -inform DER -noout -print_certs -text 
```

额外资源：

[如何找出用于签署应用程序的密钥库？](https://stackoverflow.com/questions/11331469/how-do-i-find-out-which-keystore-was-used-to-sign-an-app)

[如何获取 APK 签名签名？](https://stackoverflow.com/questions/5578871/how-to-get-app-signature?noredirect=1&lq=1)

我可以向您推荐 Scott Alexander-Bown (scottyab) 在这个主题中的一篇好文章

[https://www.airpair.com/android/posts/adding-tampering-detection-to-your-android-app](https://www.airpair.com/android/posts/adding-tampering-detection-to-your-android-app)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-30T17:25:09.757

在此处尝试此链接[开发人员指南](https://support.google.com/googleplay/android-developer/answer/113476?hl=en)

您可以知道它们是使用相同的签名还是不使用具有创建日期的证书验证进行签名。

首先导航到终端中包含 .apk 的文件夹

```
 $ jarsigner -verify -verbose -certs my_application.apk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:35:53.530

## 安卓应用

使用内置 API [PackageManager.checkSignatures()](http://developer.android.com/reference/android/content/pm/PackageManager.html#checkSignatures%28java.lang.String,%20java.lang.String%29)。

## Java 应用程序

解决方案有点混乱，但仍然可行，只需深入`PackageManager.checkSignatures()`研究源代码并将实现移植到 Java。在 PackageManager 中，加载和检查签名的部分主要基于 Java API：

*   java.util.jar.JarEntry;
*   java.util.jar.JarFile；
*   java.security.PublicKey；
*   java.security.cert.Certificate；
*   java.security.cert.CertificateException；
*   java.security.cert.CertificateFactory；

大概的概念：

1.  借用[android.content.pm.Signature](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/pm/Signature.java)源代码并将其移植到 Java 中（需要剥离 Parcelable）
2.  如何`Signature`从 apk 中收集/加载，查看[android.content.pm.PackageParser](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/pm/PackageParser.java)`collectCertificates()`中的`loadCertificates()`方法。
3.  如何在[android.server.pm.PackageManagerService](https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/pm/PackageManagerService.java)`checkSignatures()`中检查/比较“签名”、签出和`compareSignatures()`方法。

希望这是有道理的。

# java - 在链接上使用 struts 1 CSRF 保护

> ID：12511539
> 
> 赞同：1
> 
> 时间：2012-09-20T11:19:19.470
> 
> 标签：java, struts, csrf

我正在考虑停止 CSRF，虽然 Struts 1 有 saveToken、isTokenValid 和 resetToken，它们对表单工作得很好，但它们似乎不适用于链接。我的意思是链接，例如`www.mysite.com/action/doSomething?id=123`

有没有办法使用此功能通过这些链接停止 CSRF？不幸的是，升级 Struts 不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:24:29.650

在 jsp 页面中使用 Hidden 字段来存储当前会话值，然后在操作类中进行验证。

请查看以下链接以获取更多详细信息 [使用 struts 令牌防止跨站点请求伪造](https://stackoverflow.com/questions/4303635/cross-site-request-forgery-prevention-using-struts-token)

# c - 更多订单的睡眠循环中的时钟（）返回值 0

> ID：12511540
> 
> 赞同：3
> 
> 时间：2012-09-20T11:19:20.720
> 
> 标签：c, clock, usleep

我想看看在一个线程中执行一些代码需要多少时间。但是clock()返回0。

这是代码：

```
int main(int argc, char *argv[])
{

int begin, end;
float time_spent;

clock_t i,j;
struct timeval tv1;
struct timeval tv2;

for(i = 0; i<6; i++)
{

begin = clock();

// Send Audio Data
....

gettimeofday(&tv1,NULL);

usleep(200000);   // Wait 200 ms

gettimeofday(&tv2,NULL);

printf("GETTIMEOFDAY %d\n", tv2.tv_usec-tv1.tv_usec);  // Time using date WORKING

end = clock() - begin;

// Store time
...

printf ("It took me %d clicks (%f seconds).\n",begin,((float)begin)/CLOCKS_PER_SEC);
printf ("It took me %d clicks (%f seconds).\n",end,((float)end)/CLOCKS_PER_SEC);

time_spent = (((float)end) * 1000.0 / ((float)CLOCKS_PER_SEC)); // Time using clock BAD

printf("\n TIME %dms|%dms|%fms|%d\n",begin,end, time_spent,CLOCKS_PER_SEC);

}

return 0;
} 
```

但我一直得到 0 次点击。我认为 usleep 并没有准确地等待 200 毫秒，所以我需要计算使用 ffmpeg 同步编码音频的函数花费了多少时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:37:29.703

我认为问题在于您正在使用 clock() 函数。

`The clock function determines the amount of processor time used since the invocation of the calling process, measured in CLOCKS_PER_SEC of a second.`

例如：

```
clock_t start = clock();
sleep(8);
clock_t finish = clock();
printf("It took %d seconds to execute the for loop.\n",
  (finish - start) / CLOCKS_PER_SEC); 
```

这段代码会给你一个 0 的值。因为代码**没有**使用处理器，所以它正在休眠。然而，这段代码：

```
long i;
clock_t start = clock();
for (i = 0; i < 100000000; ++i)
  exp(log((double)i));
clock_t finish = clock();
printf("It took %d seconds to execute the for loop.\n",
  (finish - start) / CLOCKS_PER_SEC); 
```

会给你 8 秒的计数，因为代码**一直在**使用处理器。

# indexing - 如何建立一个简单的倒排索引？

> ID：12511543
> 
> 赞同：17
> 
> 时间：2012-09-20T11:19:34.613
> 
> 标签：indexing, information-retrieval

我想构建一个没有任何API的搜索引擎的简单索引功能，例如Lucene。在倒排索引中，我只需要记录每个单词的基本信息，例如docID、位置和频率。

现在，我有几个问题：

1.  建立倒排索引常用什么样的数据结构？多维列表？

2.  建立索引后，如何将其写入文件？文件中的格式是什么？像一张桌子？就像在纸上画一个索引表？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T21:29:48.100

[您可以在TinySearchEngine](https://github.com/felipehummel/TinySearchEngine/blob/master/scala/tinySearch.scala)中看到一个非常简单的倒排索引和搜索实现。

对于您的第一个问题，如果您想构建一个简单的（在内存中）倒排索引，那么直接的数据结构是一个像这样的哈希映射：

```
val invertedIndex = new collection.mutable.HashMap[String, List[Posting]] 
```

或Java-esque：

```
HashMap<String, List<Posting>> invertedIndex = new HashMap<String, List<Postring>>(); 
```

哈希将每个术语/单词/标记映射到 Postings 列表。A`Posting`只是一个对象，表示文档中出现的单词：

```
case class Posting(docId:Int, var termFrequency:Int) 
```

索引一个新文档只是对其进行标记（以标记/单词分隔）的问题，并为每个标记在哈希映射的正确列表中插入一个新的发布。当然，如果在该特定 docId 中已经存在该术语的 Posting，则可以增加 termFrequency。还有其他方法可以做到这一点。对于内存中的倒排索引，这是可以的，但是对于磁盘索引，您可能希望插入`Postings`一次正确的索引，`termFrequency`而不是每次都更新它。

关于你的第二个问题，通常有两种情况：

(1) 你有一个（几乎）不可变的索引。你索引所有数据一次，如果你有新数据，你可以重新索引。例如，无需在一小时内进行多次实时或索引。

(2) 新文件一直到，您需要尽快搜索新到的文件。

对于案例 (1)，您至少可以拥有 2 个文件：

1 - 倒排索引文件。它为每个术语列出所有`Postings`（docId/termFrequency 对）。这里以纯文本表示，但通常存储为二进制数据。

```
 Term1<docId1,termFreq><docId2,termFreq><docId3,termFreq><docId4,termFreq><docId5,termFreq><docId6,termFreq><docId7,termFreq>
 Term2<docId3,termFreq><docId5,termFreq><docId9,termFreq><docId10,termFreq><docId11,termFreq>
 Term3<docId1,termFreq><docId3,termFreq><docId10,termFreq>
 Term4<docId5,termFreq><docId7,termFreq><docId10,termFreq><docId12,termFreq>
 ...
 TermN<docId5,termFreq><docId7,termFreq> 
```

2-偏移文件。为每个术语存储偏移量以在倒排索引文件中找到其倒排列表。这里我用字符表示偏移量，但您通常会存储二进制数据，因此偏移量将以字节为单位。该文件可以在启动时加载到内存中。当您需要查找术语倒排列表时，您查找其偏移量并从文件中读取倒排列表。

```
Term1 -> 0
Term2 -> 126
Term3 -> 222
.... 
```

除了这 2 个文件，您还可以（并且通常会）拥有文件来存储每个术语的[IDF](http://en.wikipedia.org/wiki/IDF)和每个文档的规范。

对于案例 (2)，我将尝试简要解释[Lucene](http://lucene.apache.org/)（以及因此[Solr](http://lucene.apache.org/solr/)和[ElasticSearch](http://www.elasticsearch.org/)）是如何做到的。

文件格式可以与上面解释的相同。主要区别在于，当您在 Lucene 等系统中为新文档编制索引而不是从头开始重建索引时，他们只会使用新文档创建一个新索引。所以每次你必须索引一些东西时，你都会在一个新的分离索引中进行。

要在此“拆分”索引中执行查询，您可以针对每个不同的索引（并行）运行查询，并将结果合并在一起，然后再返回给用户。

Lucene 将此称为“小”索引`segments`。

这里明显的问题是你会很快得到很多小片段。为避免这种情况，您需要一个用于合并细分和创建更大细分的策略。例如，如果您有更多的东西，`N segments`您可以决定将所有小于`10 KBs`一起的段合并。

# java - 从java中的字符串中删除转义字符'\'

> ID：12511544
> 
> 赞同：4
> 
> 时间：2012-09-20T11:19:41.223
> 
> 标签：java

我必须删除`\`从字符串中删除。

我的字符串是`"SEPIMOCO EUROPE\119"`

我试过了`replace`，`indexOf`但`Pattern`我无法`\`从这个字符串中删除它

```
String strconst="SEPIMOCO EUROPE\119";
System.out.println(strconst.replace("\\", " ")); // Gives SEPIMOCO EUROPE 9
System.out.println(strconst.replace("\\\\", " ")); // Gives SEPIMOCO EUROPE 9
System.out.println(strconst.indexOf("\\",0));  //Gives -1 
```

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T11:21:56.133

您的字符串实际上不包含反斜杠。这部分：“\11”被视为*八进制转义序列*（因此它实际上是一个制表符 - U+0009）。如果你真的想要一个反斜杠，你需要：

```
String strconst="SEPIMOCO EUROPE\\119"; 
```

目前还不清楚您从哪里获取输入数据或您想要实现什么，但这解释了您目前所看到的一切。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:22:09.267

您必须区分*字符串文字*，即您在源代码中编写的内容，用双引号括起来，以及它所代表的*字符串值。*将前者转换为后者时，会解释[*转义序列*](http://en.wikipedia.org/wiki/String_literal#Escape_sequences)，从而导致这两者之间的差异。

# 从字符串文字中剥离

`\11`字面量中的字符表示实际字符串值中具有八进制值的字符`11`，即制表符。`\11`相当于`\t`。

没有办法可靠地获得字符串文字的转义版本。换句话说，您无法知道源代码是否包含`\11`或`\t`，因为该信息不再存在于类文件中。因此，如果您想从序列中“去除反斜杠”，您将不知道是否`11`是`t`正确的替换。

出于这个原因，您应该尝试修复字符串文字，如果您根本不想要它们，则不包含反斜杠，或者通过在文字中转义它们来包含正确的反斜杠。in a string literal在它所表达的字符串中`\\`给出一个单一的。`\`

# 运行时字符串

当您对其他答案的评论表明您实际上是在运行时收到此字符串时，我希望该字符串包含真正的反斜杠而不是制表符。除非你使用一些花哨的输入法来解析转义序列，否则你仍然会有原始的反斜杠。为了在测试代码中模拟这种情况，您应该在字符串中包含一个真正的反斜杠，即`\\`在您的字符串文字中包含一个双反斜杠。

当你的字符串中有一个真正的反斜杠时，`strconst.replace("\\", " ")`应该做你想做的事情：

```
String strconst="SEPIMOCO EUROPE\\119";
System.out.println(strconst.replace("\\", " ")); // Gives SEPIMOCO EUROPE 119 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:22:58.740

你的字符串来自哪里？如果您像示例中那样声明它，您将希望在您拥有的反斜杠之前添加另一个转义反斜杠。

# java - Java/jetty 在一段时间的重负载后没有响应连接

> ID：12511545
> 
> 赞同：7
> 
> 时间：2012-09-20T11:19:44.593
> 
> 标签：java, ubuntu, amazon-ec2, jetty

我们在 Jetty 下运行的 java servlet 遇到了一个非常棘手的问题。它在负载低到中等时运行良好，但当负载达到一定水平时，它将在大约 10-20 分钟后停止响应请求。

如果我们在使用 curl 连接到主 java 进程时跟踪它，我们可以看到它建立连接、接收请求、解析它并执行它通常所做的事情（查询 Solr 服务器、执行一些 MySQL 查询等），但是结果永远不会发送回客户端。

当它挂起时，它将无限期地挂起。再多的时间都不会让它“跳出来”，但是如果我们在主 java/jetty 进程下杀死任何随机线程，线程数就会下降，它会再次开始响应请求。

这是它的外观：

```
# curl http://localhost:8080/some-servlet-url

(Does not respond at this point)

# ps -efL | grep qserv | wc -l
243
# ps -efL | grep qserv | wc -l
243
# ps -efL | grep qserv | wc -l
243

(Number of threads remain seemingly constant)

# kill 29760   <--- random thread under the main java/jetty process
# ps -efL | grep qserv | wc -l
26

(Number of threads immediately decreases sharply)

# curl http://localhost:8080/some-servlet-url
... HTTP response ...

(Responds to connections again) 
```

该服务器是一个运行 Ubuntu 12.04.1 LTS 和 Jetty 8.1.7.v20120910 的 m2.2xlarge Amazon EC2 实例

```
$ java -version
java version "1.7.0_07"
OpenJDK Runtime Environment (IcedTea7 2.3.2) (7u7-2.3.2-1ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

我们尝试了几种不同的 java 和 Jetty 版本。我们也尝试过使用 Tomcat 而不是 Jetty——同样的问题。

使用 YourKit 分析应用程序显示没有明显的线程锁定或过多的 CPU 使用率。

有任何想法吗？

**编辑：**我们能够获得挂起的 java 进程的堆栈跟踪，看起来所有的 http 线程都处于这种状态：

```
"http-bio-8080-exec-5" daemon prio=10 tid=0x00007fe518007800 nid=0x1fc5 in Object.wait() [0x00007fe57934f000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x000000076ee9d230> (a org.apache.commons.pool.impl.GenericObjectPool)
        at java.lang.Object.wait(Object.java:503)
        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:810)
        - locked <0x000000076ee9d230> (a org.apache.commons.pool.impl.GenericObjectPool)
        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:95)
        at net.acmecorp.active.QueryResultXMLFormatter.selectBestHitsAndRunDocumentCompletion(QueryResultXMLFormatter.java:362)
        at net.acmecorp.active.QueryResultXMLFormatter.queryResultToXMLRootElement(QueryResultXMLFormatter.java:167)
        at net.acmecorp.active.QueryPrepareAndExecuter.prepareParametersAndExecuteQuery_AndInvokeFormatter(QueryPrepareAndExecuter.java:239)
        at net.acmecorp.servlets.MultiQueryServlet.handle(MultiQueryServlet.java:470)
        at net.acmecorp.servlets.MultiQueryServlet.doGet(MultiQueryServlet.java:85)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        - locked <0x0000000700dd70d0> (a org.apache.tomcat.util.net.SocketWrapper)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)

   Locked ownable synchronizers:
        - <0x000000076ed40990> (a java.util.concurrent.ThreadPoolExecutor$Worker) 
```

我自己并不是一个真正的 Java 人，所以我无法确切地看到这里出了什么问题，但看起来他们都在等待什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:58:33.513

您有数据库池问题，您的 http 线程都在等待数据库资源释放。这是一个常见的问题，您要么需要增加池中的数据库连接数因此不再是问题，要么您需要使用 QoS 服务（如码头中的 QoSFilter）来限制已进入的请求数用于保护小型数据库池的进程。

现在，您的数据库池被消耗的原因可能有很多，您可能在应用程序中泄漏了它们（从池中获取它们，使用它们，并且从不返回它们）或者您可能只是有太多的请求进入同时。或者数据库池库本身的问题，它发生了。

无论哪种方式，这都不是码头或 tomcat 问题，而是您的应用程序和数据库之间的资源争用问题。请求进入 jetty 或 tomcat，进入 servlet 域，然后在 servlet 等中等待数据库连接，就这么简单。

# c# - 该列不能包含空值。SqlCE 异常

> ID：12511549
> 
> 赞同：0
> 
> 时间：2012-09-20T11:19:52.173
> 
> 标签：c#, linq, windows-phone-7, sql-server-ce

当我尝试将一些示例数据插入 WP7 应用程序内的 SQL Server CE 3.5 数据库时，出现以下异常：

> 错误：SqlCeException“列不能包含空值。
> [列名=名称，表名=考试]

`name`也是主键。我想我已经在`DataContext`.

```
 private void InsertData()
        {
            mangoDb = new ExamDataContext();

            // create a new exam instance
            Exam exam = new Exam();
            exam.Name = "History";
            exam.Description ="History Exam";
            // add the new exam to the context
            mangoDb.Exams.InsertOnSubmit(exam);
            // save changes to the database
            mangoDb.SubmitChanges();
         } 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:39:33.283

我通过添加这样的修改`id`字段声明解决了这样的问题，`IDENTITY (1,1)`因此我的 id 声明变为：

```
[id] int NOT NULL  IDENTITY (1,1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-17T16:45:37.537

在我当前使用 .NetCore、SqlCE DB 和 Dapper ORM 的项目中，我和我的同事遇到了同样的问题。我们的 Id 列不是表中的标识列。甚至无法更改列

几个小时后，我们发现，表示主键列的模型类属性必须使用以下注释 [Key]、[Required] 进行修饰。

前任：

```
public class Exam
{
    [Key]
    [Required]
    public string Name { get; set; }

    // Other properties...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:29:10.693

我通过删除表格的索引解决了这个问题。不知道为什么它会起作用，但它肯定会起作用，以防其他人遇到这个问题。

# javascript - 需要帮助从此日期格式中提取日期、月份和年份

> ID：12511550
> 
> 赞同：1
> 
> 时间：2012-09-20T11:19:57.733
> 
> 标签：javascript, date

我需要帮助转换此日期格式。这是我从服务器收到的日期字符串，它可以是`M/DD/YYYY`or`M/D/YYYY`或`MM/D/YYYY`or `MM/DD/YYYY`。

编辑：对不起，我的错。在上述格式之后，还有额外的时间字符串，`HH:MM:SS AM`所以我收到的完整字符串将是`M/D/YYYY HH:MM:SS AM`

我现在的问题是我使用 String.substring(x, y) 来提取日期、月份和年份。

到目前为止，我只设法确定了“/”的位置，但我仍在考虑如何在 substring 方法中使用它。

```
var separators = [];
for(var b = 0, c = String.length; b < c; b++){
    if(String[b] === '/'){
        separators.push(b);
    }
} 
```

我很困惑如何动态提取日期和月份，然后在单个数字前面填充“0”，所以我很感激任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:22:28.623

```
var dt = "10/6/2012 12:34:56 AM".split(' '); 
dt = dt[0].split('/'); 

// dt[0] => month
// dt[1] => day
// dt[2] => year 
```

它适用于上述任何格式 - `M/DD/YYYY`or `M/D/YYYY`or `MM/D/YYYY`or `MM/DD/YYYY`- （并且比使用子字符串更容易）

然后为月份和日期添加一个垫子，`slice()`就像这样使用

```
dt[0] = ("0"+ dt[0]).slice(-2);
dt[1] = ("0"+ dt[1]).slice(-2); 
```

并获得填充数据只需重新加入数组部分

```
dt = dt.join('/'); 
```

示例 jsbin：http: [//jsbin.com/exodos/2/edit](http://jsbin.com/exodos/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:59:53.887

正则表达式可以完成这项工作。以下不关心它是 m/d/y 还是 y/d/m/ 或其他日期，它只是用前导零填充单个数字。它只适用于整数，它在小数秒时表现不佳。

```
function fixDate(d) {
  var re = /\d+/g;
  return d.replace(re, function(s) {
    return (s < 10? '0' : '') + +s;
  });
}

fixDate('2/3/2012 3:5:3 am'); // 02/03/2012 03:05:03 am 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:25:54.577

```
var date= '1/3/2012'//your date string
,dateArray = date.split("/");
for(var k =0; k < 2; k++){
 if((dateArray[k] + "").length ==1){
      dateArray[k] = "0"+dateArray[k];
 }
}
var newDate= dateArray.join("/"); 
```

[jsfiddle](http://jsfiddle.net/znfQF/)

# hbase - HBase：扫描列限定符 - 可能吗？

> ID：12511557
> 
> 赞同：3
> 
> 时间：2012-09-20T11:20:35.927
> 
> 标签：hbase, schema-design

我有一些与每一行相关的各种 ID：比如说`1001`, 和`1002`. 这些 ID 中的每一个都有一组相似的属性。

所以我的想法是让一个列族（'cf'）带有列限定符，如下所示：

```
cf:1001-attribute1 -> 'value a'
cf:1001-attribute2 -> 'value b'
cf:1001-attribute3 -> 'value c'
cf:1002-attribute1 -> 'value d'
cf:1002-attribute2 -> 'value e'
cf:1002-attribute3 -> 'value f' 
```

我是否能够扫描：行（x）、列族（cf）、列（1001*），以便在这种情况下为 1001 获取所有属性的映射？

显然我可以对行键执行此操作，我不确定列限定符是否相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:39:59.507

您可以使用[ColumnPrefixFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/ColumnPrefixFilter.html)

```
HTableInterface t = ...;
byte[] prefix = Bytes.toBytes("1001");
Scan scan = new Scan() 
Filter f = new ColumnPrefixFilter(prefix);
scan.setFilter(f);
scan.setBatch(20); // set this if there could be many columns returned
ResultScanner rs = t.getScanner(scan);
for (Result r = rs.next(); r != null; r = rs.next()) {
  for (KeyValue kv : r.raw()) {
    // each kv represents a column
  }
}
rs.close(); 
```

# iphone - 检查数组中的数据类型

> ID：12511559
> 
> 赞同：0
> 
> 时间：2012-09-20T11:20:41.207
> 
> 标签：iphone, nsarray

我有一个包含文本数据和图像数据的数组。如果数据是文本，我需要在标签中显示它，否则在图像视图中。但是如何检测它是文本还是图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:22:31.910

if( [[ 数组 objectAtIndex: yourIndex] isKindOfClass: [ Name_of_the_class_your_want_to_check_for class ]] )

# javascript - 将对象的引用传递给jQuery中的回调函数

> ID：12511560
> 
> 赞同：3
> 
> 时间：2012-09-20T11:20:41.823
> 
> 标签：javascript, jquery, callback

> **可能重复：**
> [$.ajax 上下文选项](https://stackoverflow.com/questions/5097191/ajax-context-option)

我有一些看起来像这样的代码：

```
$.post(self.baseUrl + 'api/method',
        {param1: data},
        function (response) {
            // Do something
        }); 
```

我想将 self 对象的引用传递给回调，我想象它会是这样的：

```
$.post(self.baseUrl + 'api/method',
        {param1: data},
        function (response, self) {
            // Do something
        }); 
```

但是，它不是这样工作的，jQuery 文档没有显示可以实现这一点的方法，并且粗略的 Google 搜索也没有找到任何东西。这可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:24:10.643

如果您使用该[`$.ajax`](http://api.jquery.com/jQuery.ajax/)方法，您可以指定一个上下文：

```
$.ajax({
    type: "post",
    context: self,
    data: {param1: data},
    success: function (response) {
        console.log(this); // now 'this' refers to self

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:34:40.487

@karim79 展示了最佳解决方案。我只是想展示一些其他可能的方式

```
var App = {
    baseUrl: "http://.../",
    fetchData: function() {
        var self = this;
        $.post(self.baseUrl + 'api/method', {
            param1: data
        }, function(data) {
            self.onDatafetch(data);
            //or
            globalDataFetch(data, self);
        });
    },
    onDatafetch: function(data) {
        this.showMsg();
    },
    showMsg: function() {
        alert("Success");
    }
}

App.fetchData();

function globalDataFetch(data, object){
   // received data and object
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:22:21.947

你为什么要那样做？

您可以轻松使用闭包：

```
var param1 = data;
$.post(self.baseUrl + 'api/method', function (data) {
    // access param1 here
}); 
```

# jquery - 在复制隐藏文本区域（JQuery）

> ID：12511564
> 
> 赞同：8
> 
> 时间：2012-09-20T11:20:59.697
> 
> 标签：jquery, copy, oncopy

复制特定文本区域时，我希望在复制后将其隐藏。我有以下代码：

```
 $('#textarea20').on('copy', function() {    
    $('#textarea20').hide();
}); 
```

如您所见，这将隐藏它，然后浏览器将尝试复制隐藏的字段，因此它不会将任何内容复制到剪贴板。你能想出我能处理的任何方法吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:27:43.620

推迟`hide()`几毫秒应该可以工作。

**演示**：http: [//jsfiddle.net/techfoobar/uxmRs/](http://jsfiddle.net/techfoobar/uxmRs/)

**代码**：

```
$('textarea').on('copy', function() {    
    setTimeout(function() {
        $('textarea').hide();
    }, 10);
}); 
```

# python - 与其他算法相比，堆排序算法表现不佳

> ID：12511571
> 
> 赞同：4
> 
> 时间：2012-09-20T11:21:18.743
> 
> 标签：python, algorithm, sorting, heapsort

我有两种`heapsort`算法。第一个是我写的，第二个是从某个网站上摘下来的。据我说，两者都有相同的逻辑，但第二个比第一个表现得更好。为什么会发生这种情况？我能看到的唯一区别是我的使用递归，而另一个使用迭代。仅此一项就可以成为差异化因素吗？

我的代码：

```
def heapify(arr,i,n):
    pivot = arr[i]   #the value of the root node
    left,right = (i<<1)+1,(i<<1)+2  #indices of the left and right subtree root nodes
    if right <= n-1:  #if right is within the array, so is left
        if arr[left] <= pivot and arr[right] <= pivot:
            return  #if both are less than the root node, it's already heapified
        maximum = left if arr[left] >= arr[right] else right #else find which child has a higher value
        arr[maximum],arr[i] = arr[i],arr[maximum]  #swap the root node with that child
        return heapify(arr,maximum,n)  #make the changed child the new root and recurse
    else:
      if left <= n-1:  #right is outside the array, so check for left only
        if arr[left] <= pivot:
            return
        arr[i],arr[left] = arr[left], arr[i]  #same logic as above
        return heapify(arr,left,n)
      else:
          return

def heapit(array,n):
    for i in range((len(array)-1)/2,-1,-1):  #all elements after (len(array)-1)/2 are the leaf nodes, so we have to heapify earlier nodes
        heapify(array,i,n)

def heapsort(array):
    n = len(array)
    for i in range(n,0,-1):
        heapit(array,i)  #make the array a heap
        array[0],array[i-1] = array[i-1],array[0]  #swap the root node with the last element 
```

另一个代码：

```
def HeapSort(A):
     def heapify(A):
        start = (len(A) - 2) / 2
        while start >= 0:
            siftDown(A, start, len(A) - 1)
            start -= 1

     def siftDown(A, start, end):
        root = start
        while root * 2 + 1 <= end:
            child = root * 2 + 1
            if child + 1 <= end and A[child] < A[child + 1]:
                child += 1
            if child <= end and A[root] < A[child]:
                A[root], A[child] = A[child], A[root]
                root = child
            else:
                return

     heapify(A)
     end = len(A) - 1
     while end > 0:
        A[end], A[0] = A[0], A[end]
        siftDown(A, 0, end - 1)
        end -= 1 
```

即使对于大小约为 100,000 的小型阵列，差异也变得很大。我通过将要排序的数组传递给函数来调用任一代码：`HeapSort(list)`或`heapsort(list)`.

编辑：

我已经用这个`heapsort`函数替换了这个函数：

```
def heapsort(array):
     n = len(array)
     heapit(array,n)
     array[n-1],array[0] = array[0],array[n-1]
     for i in range(n-1):
       heapify(array,0,n-1-i)
       array[n-i-2],array[0] = array[0],array[n-i-2] 
```

这提供了相当的性能，但它仍然较慢。对于 100 万美元的阵列，结果几乎是 20 秒：4 秒。还有什么可以做的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:54:59.220

**编辑**：我在下面的评论可能解释了一个主要的减速，但最重要的是你的算法*不是 heapsort*。

在函数内部`heapsort`，您执行一个循环`for i in range(n,0,-1)`。那是您输入的大小的`n`迭代。`n`在那个循环中，你调用`heapit`, which loops `for i in range((len(array)-1)/2,-1,-1)`; 这大致是`n//2`迭代。

`n * (n // 2)`= Θ( `n`²)。换句话说，你有一个算法至少需要二次时间，而第二种算法实现了真正的堆排序，它在 O( `n`lg `n`) 时间内运行。

**/编辑**

结合在模块级别定义的函数调用，很可能是递归导致性能下降。Python（至少是 CPython）没有针对递归程序进行优化，而是针对迭代程序进行了优化。对于 中的每个递归调用`heapify`，CPython 必须执行以下七个字节码指令：

```
 9         158 LOAD_GLOBAL              0 (heapify)
            161 LOAD_FAST                0 (arr)
            164 LOAD_FAST                6 (maximum)
            167 LOAD_FAST                2 (n)
            170 CALL_FUNCTION            3
            173 RETURN_VALUE        
        >>  174 POP_TOP 
```

（使用 确定[`dis`](http://docs.python.org/library/dis.html)）。最后两条指令在递归调用完成后执行，因为[Python 不**执行**尾调用优化](http://neopythonic.blogspot.nl/2009/04/tail-recursion-elimination.html)。

虽然这看起来并不昂贵，但 a`LOAD_GLOBAL`必须[至少进行一次哈希表查找](http://mail.python.org/pipermail/python-dev/2006-August/068437.html)才能找到，并且、和`heapify`的引用计数必须递增。当递归调用完成时，引用计数必须再次递减。Python 中的函数调用非常昂贵。`heapify``arr``maximum``i`

正如`import this`所说，“平面优于嵌套”：尽可能选择迭代而不是递归。

# iphone - 如何删除引脚视图？

> ID：12511572
> 
> 赞同：0
> 
> 时间：2012-09-20T11:21:17.820
> 
> 标签：iphone, annotations, mapkit

在我的应用程序中，我有一个 MapView 和一个注释。第一次触摸显示它的视图的图钉，但我找不到在另一次触摸时删除/隐藏它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:25:19.980

从地图视图中移除指定的注释对象。

```
- (void)removeAnnotation:(id < MKAnnotation >)annotation 
```

参数

annotation：要删除的注释对象。该对象必须符合 MKAnnotation 协议。

要删除注释视图，只需检查此[问题](https://stackoverflow.com/questions/4896558/iphone-hide-the-annotation-view-in-map-view)

```
[mapView deselectAnnotation:[mapView.selectedAnnotations objectAtIndex:0] animated:YES]; 
```

# android - 如何检测设备运行应用程序的 Android 版本？

> ID：12511573
> 
> 赞同：0
> 
> 时间：2012-09-20T11:21:22.153
> 
> 标签：android, mapping

我正在使用[MapsForge](http://code.google.com/p/mapsforge/)，一切正常。我的问题是旧的 android 设备不支持双向（双向）文本。旧设备中街道的波斯语名称不正确，但在新的 android 版本中可以。我想检测设备的 android 版本来决定是否运行我的自定义（和简单）Bidi。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:23:08.670

`android.os.Build.VERSION.SDK`

`Build.VERSION.RELEASE`//给你你的版本的实际数字；2.3.3 或 2.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:24:35.840

String`Build.VERSION.RELEASE`将为您提供用户可见的版本字符串（即 1.5、1.6、2.0），同时`Build.VERSION.SDK_INT`为您提供来自 Build.VERSION_CODES 的值，如果您想以编程方式对其进行比较，该值会更好地使用。

```
StringBuffer buf = new StringBuffer();

buf.append("VERSION.RELEASE {"+Build.VERSION.RELEASE+"}");
buf.append("\\nVERSION.INCREMENTAL {"+Build.VERSION.INCREMENTAL+"}");
buf.append("\\nVERSION.SDK {"+Build.VERSION.SDK+"}");
buf.append("\\nBOARD {"+Build.BOARD+"}");
buf.append("\\nBRAND {"+Build.BRAND+"}");
buf.append("\\nDEVICE {"+Build.DEVICE+"}");
buf.append("\\nFINGERPRINT {"+Build.FINGERPRINT+"}");
buf.append("\\nHOST {"+Build.HOST+"}");
buf.append("\\nID {"+Build.ID+"}");

Log.d("build",buf.toString()); 
```

# excel - 超过 100% 给出负数

> ID：12511579
> 
> 赞同：0
> 
> 时间：2012-09-20T11:22:03.280
> 
> 标签：excel, excel-formula

我有一个电子表格，我在其中得到最终百分比值，例如 96%，我想给出这个和 100% 之间的差异，这没关系，但如果百分比值超过 100%，它会给我一个负数。

`=IF(ISERROR(100%-E18), "", (100% -E18))`

所以如果 96% 是百分比值，我在这个单元格中得到 4%

如果 105% 是百分比值，我在这个单元格中得到 -5%。

任何想法，我确信真的很容易，但目前无法思考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:25:29.840

这取决于你想如何处理负面结果

例如，如果答案小于 0，则返回 0，您可以使用

`=IF(ISERROR(100%-E18), "", MAX(0,100% -E18))`

或者你可以

*   向用户提供数据超出范围的警告`=IF(ISERROR(100%-E18), "",IF(100%-E18<0,"negative",100% -E18))`
*   什么都不退`=IF(OR(100%-E18<0,ISERROR(100%-E18)),"",100%-E18)`
*   用于`ABS`返回 5% 而不是 -5%（正如 Dan 所做的那样）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T11:24:50.417

```
=IF(ISERROR(100%-E18), "", ABS(100% -E18)) 
```

只返回绝对值。

但是差异是负的，所以请确保它实际上是您正在寻找的绝对差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:25:52.693

您需要使用[ABS](http://office.microsoft.com/en-us/excel-help/abs-HP005208978.aspx)函数来获得差异的绝对值。

=IF（ISERROR（100%-E18），“”，ABS（（100%-E18）））

# android - 在 Linux 中使用 android-ndk 创建共享库失败？

> ID：12511580
> 
> 赞同：3
> 
> 时间：2012-09-20T11:22:04.653
> 
> 标签：android, linux, build, android-ndk

尝试使用 android-ndk-r8b 创建共享库时显示错误

```
Your APP_BUILD_SCRIPT points to an unknown file /home/myLib/ndk1/jni/Android.mk 
Android NDK Aborting...    .Stop 
```

对于我的应用程序，我只是创建了一个 jni 文件夹，其中包含一个 ndk1.c 文件和 Android.mk 文件

建库步骤：

```
export ARM_ROOT=/home/myLib/android-ndk-r8b
    export ARM_TOOL=/home/myLib/android-ndk-r8b/toolchains/arm-linux-androideabi-   
4.4.3/prebuilt/linux-x86
    export ARM_LIB=/home/myLib/android-ndk-r8b/platforms/android-8/arch-arm/usr/lib
    export ARM_LIBO=/home/myLib/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.4.3
    export ARM_INC=/home/myLib/android-ndk-r8b/platforms/android-8/arch-arm/usr/include
    export ARM_PRE=arm-linux-androideabi
    export NDK=/home/myLib/android-ndk-r8b 
    export PATH=$PATH:/home/myLib/android-ndk-r8b
    export NDK_PROJECT_PATH=/home/myLib/ndk1 
```

请帮忙提出宝贵的建议！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:06:47.853

这是 ndk 初学者的一个很好的教程 [http://marakana.com/forums/android/examples/49.html](http://marakana.com/forums/android/examples/49.html)

在教程中：当你在 android-ndk-r8b 上构建时，替换步骤说

```
go to  your NDK-HOME and  run  make APP=ndk_demo 
```

做这个

```
go to your android project directory and run ndk-build in terminal 
```

清单

1) 确保设置了路径 NDK 路径

2）确保您生成了头文件并移动到 jni 文件夹

3）您将适当的函数签名从头文件复制到您的 c 文件中，这是人们在参考示例时犯错误的地方，他们在使用其他包名和类名时盲目地复制函数签名。

```
JNIEXPORT jint JNICALL Java_com_your_package_class_method(JNIEnv *d, jobject e, jstring f); 
```

4)Make 文件存在于您的 jni 文件夹中，并且包含正确的 c 文件名

5）您正在正确的目录中运行ndk-build，即项目主目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:08:40.610

尝试使用“ndk-build”进行详细说明......所以您可以按照 .mk 中的说明逐步了解构建正在做什么

ndk-build -BV=1

使用上面的更多细节....

# ios - iOS 6中文地图不一致如何处理？

> ID：12511588
> 
> 赞同：28
> 
> 时间：2012-09-20T11:22:28.053
> 
> 标签：ios, mapkit, ios6, ios6-maps

对于 iOS 6 上的中文地图，MapKit 似乎会根据您设备所在的位置来选择地图提供者。如果您在中国，它将使用 AutoNavi 地图，否则它将使用默认的 Apple 地图。更复杂的是，AutoNavi 地图的转换方式似乎与 iOS 5 上的 Google 地图相同，而默认的 Apple 地图并未进行转换。

变形我说的是[中国所有的地图都是变形的](https://home.wangjianshuo.com/20081109_all_maps_in_china_are_transformed.htm)*，*虽然这不是真的。相反，中国的*一些*地图是经过改造的，而有些则不是。

 *由于地图通常偏移约 500 米，因此这种变换很难在地图上正确放置注释。由于无法反转实际地图的变换，因此解决方案是将相同的偏移量应用于注释。

[至少对于有限的区域，存在非平凡的方法来反转变换。](https://stackoverflow.com/questions/12226688/how-to-find-the-inverse-of-the-china-transform-in-mkmapview)iOS 6 中的问题是知道地图是否被转换为能够适当地补偿注释。在 iOS 5 上，这个问题不存在，因为转换后的地图一直使用。

下面的上海地图说明了这种情况（实际的变换偏移量没有演示）。

![ios 6中文地图](../Images/61a5a2e59b192a9038010c870885e1fb.png)

那么，有没有办法在运行时知道是否使用了转换或未转换的中国地图？处理这个问题的其他想法？

**编辑：**在中国通过代理路由网络流量会改变模拟器中的地图外观，因此地图提供商的选择必须基于 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:56:01.173

如果您绝对需要一致性 - 即 iOS 版本之间以及美国或中国用户之间的一致性，您可以始终使用[Bing Maps SDK 。](http://www.microsoft.com/maps/developers/)虽然我建议坚持使用 MapKit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T07:58:10.637

这是关于火星坐标系的。看看这个： [https ://github.com/Mardinate/Mardinate](https://github.com/Mardinate/Mardinate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T19:53:51.220

你不能从手机中获取地理数据，如果他们在中国，应用转换后的注释吗？*

# php - 检查句子是否包含PHP中的单词

> ID：12511591
> 
> 赞同：2
> 
> 时间：2012-09-20T11:22:43.937
> 
> 标签：php

如何检查一个句子是否包含一个单词。我明确地使用名称句子和单词而不是字符串和子字符串。例如：对于句子

```
$s = "Ala makota, a kot ma przesrane"; 
```

调用函数

```
checkIfContains("kota",$s) 
```

返回假。

但对于

```
checkIfContains("makota",$s) 
```

返回真。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:34:44.063

如果您只想匹配完整的单词，则需要一个正则表达式来完成此操作。尝试以下操作：

```
<?php
function checkIfContains( $needle, $haystack ) {
    return preg_match( '#\b' . preg_quote( $needle, '#' ) . '\b#i', $haystack ) !== 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:26:18.683

你需要[`strpos`](http://php.net/manual/en/function.strpos.php).

```
if (strpos($s, 'kota') !== false) { 

} 
```

或者如果你坚持..

```
function checkIfContains($needle, $haystack) {
    return (strpos($haystack, $needle) !== false);
} 
```

对于完整的单词，您可以考虑正则表达式：

```
if (preg_match('/\bkota\b/i', $s)) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:36:57.903

我会使用explode 将字符串分隔为基于字符的数组（在本例中为“”）。

```
function checkIfContains($toTest, $toCheck)
{
    // Check if length of either string is zero for validation purposes
    if(strlen($toTest) == 0 || strlen($toCheck) == 0)
    {
        return false;
    }
    $exploded = explode(" ", $toCheck);
    foreach($exploded as $word)
    {
         if($word == $toTest)
         {
              // Found a match, return true!
              return true;
         }
    }
    // None matched, return false
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T12:19:27.373

你可以试试 ：

```
function checkIfContains($needle, $haystack) {
    // Remove punctuation marks
    $haystack = preg_replace('/[^a-zA-Z 0-9]+/', '', $haystack);
    // Explode sentence with space
    $haystack = explode(' ', $haystack);
    // Check if $needle exist
    return in_array($needle, $haystack);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T13:03:03.540

```
$string = "Ala makota, a kot ma przesrane";

checkIfInString("makota", $string);

function checkIfInString($needle, $haystack) {
    $delimiters = ' ,.';
    return in_array($needle, explode($haystack, $delimiters);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-28T15:41:22.260

你可以试试：

```
if(strpos($s,"kota") !== false){
       echo true;
} 
```

或者 ：

```
function checkIfContains($string, $letter){
       return strpos($string, $letter) !== false;
} 
```

# java - 在 svn 存储库中运行项目

> ID：12511606
> 
> 赞同：0
> 
> 时间：2012-09-20T11:23:29.910
> 
> 标签：java, svn

这里有一个小新手。我只是想知道在开发大型 java 项目时，我们总是使用 svn 存储库进行代码共享，但是是否可以在该存储库中运行项目？或者是否有任何Java系统允许多个用户在一个地方开发和测试同一个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:25:30.600

您的想法是错误的——当开发人员在一个项目上工作时，他们会下载该存储库的所谓“工作副本”，然后运行它并在他们的本地计算机上进行更改/测试。完成后，他们将更改“提交”到存储库，其他所有人都可以在其中使用这些更改。

您不会直接在存储库中运行项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:27:19.823

在 Eclipse、Jdeveloper、Netbeans 等主要 IDE 中，内置了用于版本控制的功能。

因此，您使用您的 ide 构建您的应用程序或对其进行更改，并使用版本控制系统的更新/提交功能，您可以获得所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:34:58.620

存储库仅存储您的代码，您无法从存储库运行代码。

如果您想集中构建/测试代码，那么您需要像 Jenkins 一样的持续集成服务器 (CI) ( [http://jenkins-ci.org/](http://jenkins-ci.org/) )

该服务器可以从 svn build 中提取项目，运行测试（如果有），甚至将其部署到服务器上。

# javascript - 自定义特定 jquery-ui 对话框的样式不是所有的对话框吗？

> ID：12511609
> 
> 赞同：4
> 
> 时间：2012-09-20T11:23:38.557
> 
> 标签：javascript, css, jquery-ui

我在我的应用程序中使用 jquery-ui 对话框。现在我想自定义登录/sinup 对话框，即 jquery-ui 对话框。没有自定义对话框看起来像： ![在此处输入图像描述](../Images/29e63343576f20c118d57dff0bd01ef5.png)

但是当我对 login.jsp 页面进行以下更改时，它也改变了我不想发生的所有应用程序对话框，而只是登录/注册对话框。CSS代码是：

```
.ui-widget-header {
    background: #343434 !important;
    border: none
}

.ui-dialog-titlebar-close{
    background: #1C1C1C !important;
}

.ui-dialog {
    background: #343434 !important;
    border: thin 1px;
} 
```

此登录对话框 (id="signinDialog") 的 js 代码为：

```
$(document).ready(function() {
$("#signinDialog").dialog({
    width : 600,
    resizable : false,
    modal : true,
    autoOpen : false,
    position : ['top', 157]
});

 function openLoginPopup() {
    $("#signinDialog").dialog("open");
} 
```

在这些更改之后，我以我想要的方式获得登录/注册对话框，但问题是这正在更改所有应用程序的 jquery-ui 对话框 css，看起来像这样：

![在此处输入图像描述](../Images/37f338f06f49f861e7297a4a63b9a21e.png)

我从早上开始就陷入了这个问题，并尝试了很多方法来解决，就像 [这样](https://stackoverflow.com/questions/702510/jquery-dialog-theme-and-style)，但都失败了。Atlast 我不得不问这个。

我希望所有对话框都保持不变，除了自定义后的登录/注册对话框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T23:41:58.290

正如 EasyPush 建议的那样，为特定对话框的 ID 使用 CSS 选择器是行不通的，因为您的内容成为DOM 中对话框元素的*子元素。*由于 CSS 没有父选择器（请参阅[CSS 选择器以获取“包含 bar 的 foo”？](https://stackoverflow.com/questions/2000582/css-selector-for-foo-that-contains-bar)），我无法看到使用纯 CSS。相反，您需要使用 javascript。

使用 jQuery 作为关闭按钮，例如：

```
$("#signinDialog").parent().find(".ui-dialog-titlebar-close").css("background","#1C1C1C"); 
```

不幸的是，通过 jQuery 将“！important”规则应用于 CSS 有点棘手。您可能更喜欢应用一个类，然后在 CSS 中使用“！important”设置*该类的样式。*就像是：

```
$("#signinDialog").parent().find(".ui-dialog-titlebar-close").addClass("mySpecialClass"); 
```

连同一个CSS规则：

```
.mySpecialClass{
background: #1C1C1C !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:40:39.127

如果我没有误解你，你似乎确实在改变所有对话的布局。这是因为选择器“.ui-dialog”将匹配您应用程序中的所有对话。

如果您只想专门设置登录对话框的样式，则只需要专门选择这些元素。您应该能够按以下方式执行此操作：

```
#signinDialog.ui-dialog {
    background: #343434 !important;
    border: none
}

#signinDialog .ui-dialog-titlebar-close{
    background: #1C1C1C !important;
}

#signinDialog .ui-dialog {
    background: #343434 !important;
    border: thin 1px;
} 
```

# android - 活动和服务中的 SQLite 使用情况

> ID：12511612
> 
> 赞同：7
> 
> 时间：2012-09-20T11:23:56.440
> 
> 标签：android, sqlite

我创建了一个使用 db 对象的单个实例的 databaseprovider 类。对象在主活动中创建并关闭 onDestroy 方法。这似乎没问题（但会出现一些错误，例如：数据库已关闭或数据库未在我无法模拟的某些用户设备上打开）。

我想向应用程序添加一项服务以进行内容下载，并且该服务可以与调度程序一起运行，这让我认为 db 对象的单个实例将不起作用。我应该为服务使用另一个对象，这会导致一致性问题吗？您能否建议最好的方法是什么？

## 数据库提供者类 exm：

```
public class DatabaseProvider {
private static DatabaseHelper helperWriter;
public static SQLiteDatabase db_global;
public DatabaseProvider(Context c) {
    helperWriter = DatabaseHelper.getHelper(c, true);
}

private static SQLiteDatabase getDB() {     

    if(db_global == null)           
        db_global = helperWriter.getWritableDatabase();
    else if(!db_global.isOpen()) {
        try {
            db_global.close();
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }
        db_global = helperWriter.getWritableDatabase();
    }

    return db_global;
}

public String GetVersion() {
    SQLiteDatabase db = getDB();
    Cursor c = db.query(DatabaseHelper.PARAMETER_TABLE_NAME, new String[] {"VALUE"}, "KEY='Version'", null, null,null,null);
    String version = "";
    if(c.moveToNext())
    {
        version = c.getString(0);           
    }
    else
        version = "0";
    c.close();

    return version;
}

public long UpdateVersion(String value) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(DatabaseHelper.PARAMETER_COLUMN_VALUE, value);
    SQLiteDatabase db = getDB();   
    long r = db.update(DatabaseHelper.PARAMETER_TABLE_NAME, initialValues, "KEY='Version'", null);
    if(r <= 0)
        r = helperWriter.AddParameter(db, "Version", value);
    //db.close();   
    return r;
}   

public void CloseDB() {
    if (db_global != null)
        db_global.close();
    db_global = null;
    helperWriter.close();
}
 } 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:32:22.427

不确定这是否会有所帮助，但是...

如果应用程序崩溃，您不能依赖 onDestroy() 。即使您退出，Android 也可能会将您的应用程序保留在 RAM 中。此外，如果您处于子活动中，则在使用应用程序时，您的主要活动可能会被破坏。它也可以被重新创建。

有时最好让调用打开数据库，对其进行处理，然后在同一个函数中关闭它。如果您使用的是服务，它实际上可能会有所帮助。我也不确定您是否应该在没有一些管理代码的情况下一次打开和/或从各种不同的地方访问数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:18:53.320

我看到几个问题：

一个）

> （但会出现一些错误，例如：数据库已关闭或数据库未在我无法模拟的某些用户设备上打开）。... 启动一个活动，然后在 AsyncTask 中更新内容和一些数据库操作。在更新过程中返回并再次开始相同的活动。

要解决这些错误，您是否考虑过使用`[Loader][1]`? `ContentProvider`它是一个围绕s 的基于回调的框架。

* * *

二）

> 将服务添加到应用程序以进行内容下载，并且该服务可以与调度程序一起运行，这让我认为 db 对象的单个实例将不起作用。我应该为服务使用另一个对象，这会导致一致性问题吗？

[此网站上@commonsware](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)的这篇文章建议不要`Service`用于长时间运行的任务。相反，`AlarmManager`建议。我自己只使用过短期运行服务（用于音频 IO）。

# javascript - 使用 onmouseover 编写的条目

> ID：12511614
> 
> 赞同：0
> 
> 时间：2012-09-20T11:24:11.027
> 
> 标签：javascript, jquery, onmouseover, onmouseout

我想在 onmouseover 的块内插入书面文本。

我的 HTML 源代码是：

```
 <li id="v4">
      <div class="cl">
        <div>
          <span class="m">Text</span>
      <span class="count"></span>
      <span class="pr">
         <span class="p">0%</span>
      </span>
          <!-- insert written : <span class="c1">Vote</span> -->
        </div>
      </div>
    </li> 
```

为了插入文本来代替注释，我编写了这段 Javascript 代码：

```
 document.getElementById("v4").onmouseover = addSpan;            
        document.getElementById("v4").onmouseout =removeSpan;

        function addSpan(id)
        {           

            var li=document.getElementById(this.getAttribute("id"));            
            var divcell=li.firstChild;  

            var divelem=divcell.firstChild; 
            var span=document.createElement("span");
            span.setAttribute("class","c1");

            var testo=document.createTextNode("Vote");
            span.appendChild(testo);

            divelem.appendChild(span);                              
            span.style.display = 'block';

        }           
        function removeSpan(id)
        {               

            var li=document.getElementById(this.getAttribute("id"));            
            var divcell=li.firstChild;  

            var divelem=divcell.firstChild;//div            
            var span = divelem.lastChild;
            span.style.display='none';              
            divelem.removeChild(divelem.lastChild);     

        } 
```

问题在于书面链接。如何解决这个问题？我的代码正确吗？

[编辑]：我添加了 css 让你看看[fiddle](http://jsfiddle.net/bHdbr/2/)会发生什么。我使用了@Konstantin D-Infragistics 的代码 jquery，但存在同样的问题：当鼠标经过所写的“要添加的文本”时，它会闪烁。我希望这个问题现在更清楚了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:45:25.297

您的问题的可能解决方案在这里...希望这可以帮助您。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">
.hide {
    display:none;
 }
.show {
    display:block;
 }   
</style>

<script type="text/javascript">
   var el;
window.onload=function() {
   el=document.getElementById('status');
   el.onmouseover=function() {
   changeText('hide','show')
 }
   el.onmouseout=function() {
   changeText('show','hide');
  }
 }
function changeText(cl1,cl2) {
   document.getElementById('span1').className=cl1;
   document.getElementById('span2').className=cl2;
}
</script>

</head>
<body>

<p id="status">
<span id="span1">[Closed]</span>
<span id="span2" class="hide"><a id="link" href="index.php">Open</a></span>
</p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:40:41.727

考虑使用 jQuery 让您的生活更轻松。如果您添加 jQuery，那么您可以通过以下方式实现您想要的功能：

```
$('#v4').bind({
   'mouseover': function (event) {
       $('<span class="c4">Text to add</span>').appendTo($(this).find('div div'));
   },
   'mouseout': function (event) {
       $('.c4').remove();
   },
}); 
```

这是[小提琴](http://jsfiddle.net/bHdbr/)。

# linux - 使用英特尔 ifort 编译器启用到标准输出的缓冲 I/O

> ID：12511620
> 
> 赞同：2
> 
> 时间：2012-09-20T11:24:34.730
> 
> 标签：linux, fortran, stdout, buffering, intel-fortran

我已经阅读了有关使用 ifort （使用`-assume buffered_io`or `FORT_BUFFERED=true`）启用缓冲 I/O 的英特尔文档，这适用于直接输出到文件。但是，我们有大型应用程序正在写入标准输出（例如`write(*,*)`或`write(stdout,*)`），它被重定向到一个文件。在这种情况下，这两种缓冲技术都不起作用。

除了重构代码以直接写入文件之外，是否有一种方法可以使用 ifort 在 stdout 上启用缓冲 I/O？这在例如 gfortran 上默认启用。

我们在 SLES 11 上使用 ifort 12.0。

更新：感谢您的评论。我正在通过缓冲程序（如 tee）研究 stdbuf 和/或管道作为解决方法。到目前为止，我还无法做出可衡量的差异。

更新 2：

我已经尝试了 Douglas 的建议的一些实验，通过另一个程序进行管道传输。tee 和 cat 都缓冲，实际上缓冲似乎是由管道本身在 8K 左右完成的。然而，最初的 write() 调用、管道以及管道程序（tee、cat 等）的系统调用的开销太高，无法使其成为可行的解决方案。

# perl - 'Can't locate file.pl in @INC...' error in Perl

> ID：12511621
> 
> 赞同：1
> 
> 时间：2012-09-20T11:24:35.237
> 
> 标签：perl, module, require

I have a folder with several `.pl` files that run through `main.pl`. I have successfully had these working by using `require 'file.pl';` at the beginning of the main file. I have used some modules, too, without issue.

I am now trying to use a 'home-made' module, but when I add `use Add::Location::CSearch qw(c_search);` to the top of the file that it is being used in (or the top of the main file) and run the main file, it produces the `Can't locate file.pl in @INC...` error with `file.pl` being the first file in the `require` list in the main file.

From how I understand it, after adding the `use` line it now tries to find all the `require` in that same directory. The `(@INC contains: ...)` at the end of the error message lists some library/module folders. It also has `.` at the end for the current directory.

I hope I have explained this well; it is confusing! I don't know why this happens and how to solve it, so I would be grateful for any ideas.

Edit: Sample Code

```
main.pl

#!/usr/bin/perl
package testpack;

use lib '/hlib/...';
use Add::DB;
use List::Util qw(sum);
use List::MoreUtils qw(uniq);
use List::MoreUtils qw(firstidx);
use strict;
use warnings;

require 'file1.pl';
require 'file2.pl'; 
require 'file3.pl';

.
.
.

file1.pl

#!/usr/bin/perl
package testpack;
use Add::Location::CSearch qw(c_search); 
```

This is all that really counts for the problem... the rest of the files have working code that calls subroutines etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:04:27.053

Without seeing your setup I can't be sure, but I'm going to throw something out there.

I suspect what's going on is `main.pl` and `file1.pl` are all in the same directory. `require 'file1.pl'` is working because you've been doing `perl main.pl` from that directory. Perl is finding `file1.pl` because `.` is in `@INC`, the list of where it looks for modules.

Now you're developing a new module. You've changed directories to where you're developing that module, and maybe you're running `perl /path/to/main.pl`. Perl can no longer find `file1.pl` because the current directory is different.

The typical solution for this is to use [FindBin](https://metacpan.org/module/FindBin) and `use lib` to put the directory where your `main.pl` resides into `@INC`. Then it can find other libraries in that same directory no matter what directory you run `main.pl` from.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:05:35.870

if like me you are here and used Notepad++ with NppExec, I may have the good answer for you:

go into NppExec options: plugins > NppExec clic on "Follow $(CURRENT_DIRECTORY)"

the thing is I'm sure it was the only thing I changed but when I disable this option I don't get the error anymore ...

hth someone

# php - 将 stdClass 对象转换为 PDO 对象

> ID：12511624
> 
> 赞同：0
> 
> 时间：2012-09-20T11:24:38.427
> 
> 标签：php, soap, pdo, wsdl

我正在使用 PHP 的 PDO 通过 Web 服务进行数据库连接。在通过 SOAP 返回 PDO 对象时，我得到的 SOAP 响应为

```
<value xsi:type="SOAP-ENC:Struct"/> 
```

在倾销我得到的价值

```
object(stdClass)#4 (0) { } 
```

如何将 stdClass 的这个对象转换为 PDO 对象，因为我需要在整个应用程序中维护该对象以执行查询？还是我根本不应该为数据库连接使用服务？

# ruby-on-rails - rails简单的ajax请求

> ID：12511628
> 
> 赞同：2
> 
> 时间：2012-09-20T11:24:56.923
> 
> 标签：ruby-on-rails, ajax

我对 ajax 请求有疑问：

在我的应用程序中，我试图配置一个简单的排名系统，并进行了设置，但是当我点击排名按钮时 - 我重新加载页面并刷新排名。

帮助我在 ajax 中意识到这一点：

我这样做了：

在`posts/show.html.erb`我有那个：

```
 <div id='vote_update'>
      <%= render 'vote/update' %>
    </div> 
```

在`vote/_update.html.erb`我有：

```
<% if can? :update, Vote %>
    <%= form_for([@post, @post.vote], remote: true) do |f| %>
...
<%= f.submit "vote" %> 
```

在`vote/update.js.erb`我有：

```
$('#vote_update').html("<%= j render('vote/update') %>"); 
```

在 vote_controller.rb 我有：

```
 def update
    post = Post.find(params[:post_id])
    vote = post.vote
...
    respond_to do |format|
        if vote.save
          format.html { 
            redirect_to post_path(post),
            :notice => "You vote counted!"
          }
          format.js
        end
    end
end 
```

如果我删除 romete: true - 一切正常（页面重新加载，我看到 (:notice) “你的投票已计入！”并且评分已更新，但如果我将 remote: true 放回去，我什么也看不到（firebug 控制台中的一些错误) - 但是当我重新加载页面时 - 更新了更新，我看到了 norml 结果 - 我认为我在重定向时犯了一些错误或者我不知道

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:29:20.973

改变

```
respond_to do |format|
    if vote.save
      format.html { 
        redirect_to post_path(post),
        :notice => "You vote counted!"
      }
      format.js
    end
end 
```

to if vote.save respond_to do |format|

```
 format.html { 
        redirect_to post_path(post),
        :notice => "You vote counted!"
      }
      format.js
    end
end 
```

虽然不确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:32:25.420

您的 ajax 代码将出现在 format.js 块中。您可以在其中更新显示排名的 html。

# python - Python：导入 gtk 时出错

> ID：12511629
> 
> 赞同：2
> 
> 时间：2012-09-20T11:24:56.993
> 
> 标签：python, gtk, pygtk

我在上面使用 LinuxMint 和 Python 2.7.3。我试图导入 gtk 安装和重新安装所有依赖项，但我总是得到：

```
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: 
Warning: g_type_get_qdata: assertion `node != NULL' failed
from gtk import _gtk 
```

我在其他线程和答案上发现可能是一个错误，而其他线程和答案与 pygtk 有冲突。（我试图在没有 pygtk 的情况下导入 gtk，但我得到了同样的错误）。

有没有人得到类似的东西或知道如何解决它？

# python - Python：使用 mpi4py 发送不连续的数据

> ID：12511631
> 
> 赞同：2
> 
> 时间：2012-09-20T11:24:58.977
> 
> 标签：python, mpi, mpi4py, memory-layout

我有一个维度为 (N,M) 的 C 有序矩阵

```
mat = np.random.randn(N, M) 
```

其中我想通过持久 MPI 请求将一*列*发送到另一个节点。但是，使用`mpi4py`,

```
sreq = MPI.COMM_WORLD.Send_Init((mat[:,idx], MPI.DOUBLE), send_id, tag) 
```

由于切片不连续而失败。有人可以建议一种解决方法吗？我相信 C`MPI_Type_vector`允许`stride`在创建类型时指定 a 。我怎样才能做到这一点`mpi4py`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T11:41:48.227

创建一个发送缓冲区！看这个例子：

```
 1 #!/usr/bin/python2
  2 # -*- coding: utf-8 -*-
  3
  4 from mpi4py import MPI
  5 import numpy as np
  6
  7 comm = MPI.COMM_WORLD
  8 rank = comm.Get_rank()
  9
 10 matrix = np.empty((5, 10), dtype='f')
 11 for y in xrange(len(matrix)):
 12     for x in xrange(len(matrix[0])):
 13         matrix[y,x] = rank * 10 + x * y
 14
 15 sendbuf = np.empty(5, dtype='f')
 16
 17 #column 1
 18 sendbuf[:] = matrix[:,1]
 19
 20 result = comm.gather(sendbuf, root=0)
 21
 22 if rank == 0:
 23     for res in result:
 24         print res 
```

这会给你：

```
$ mpirun -np 4 column.py
[ 0\.  1\.  2\.  3\.  4.]
[ 10\.  11\.  12\.  13\.  14.]
[ 20\.  21\.  22\.  23\.  24.]
[ 30\.  31\.  32\.  33\.  34.] 
```

# bash - 将 rsync --stats 输出转换为 GB？

> ID：12511636
> 
> 赞同：8
> 
> 时间：2012-09-20T11:25:16.030
> 
> 标签：bash, rsync

与 rsync 一起使用`--stats`时，您会在传输日志的底部获得一份报告。

```
Number of files: 211009
Number of files transferred: 410
Total file size: 903119614118 bytes
Total transferred file size: 9046197739 bytes
Literal data: 0 bytes
Matched data: 0 bytes
File list size: 5864077
File list generation time: 23.204 seconds
File list transfer time: 0.000 seconds
Total bytes sent: 5865513
Total bytes received: 1441 
```

我想转换`Total file size`并`Total transferred file size`就地到GB，所以它变成了

```
Number of files: 211009
Number of files transferred: 410
Total file size: 903 GB
Total transferred file size: 9 GB
Literal data: 0 bytes
Matched data: 0 bytes
File list size: 5864077
File list generation time: 23.204 seconds
File list transfer time: 0.000 seconds
Total bytes sent: 5865513
Total bytes received: 1441 
```

**问题**

那应该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T11:41:51.127

`rsync --stats -h /your /paths --and --options`

`-h`代表人类可读。

# core-data - 与 Core Data 的关系循环

> ID：12511638
> 
> 赞同：0
> 
> 时间：2012-09-20T11:25:22.930
> 
> 标签：core-data, entity-relationship, cyclic-reference

我对 Core Data 有一个概念上的问题。

我有一个名为 OBJ 的实体，它在关系中有一个 OBJ 实体。`"An error occured."`当我测试我的模型时，我会收到非常有说服力的信息。

对于每个 OBJ 实体，我希望定义一个或多个与另一个 OBJ 实体关联的 ACTION。所以我想我的错误来自一个循环，但不确定。

起初，我定义了一个逆向关系（正如文档所建议的，关系应该总是有它的逆向关系）：

```
ENTITY OBJ
Attributes:
name    
status
Relationships:
actions
<-------- >>

ENTITY ACTION    
Attributes:
name   
Relationships:
obj 
```

好吧，它不起作用，因为 OBJ 总是引用它自己。因此，我已经解耦了关系。ACTION 指向一个 OBJ，而 OBJ 指向几个 ACTION，没有互惠性。错误信息。

我的基本想法是，如果另一个 OBJ 的状态允许，与特定 OBJ 关联的每个动作都可以运行。

如何将其构建为 MVC 一致？基本的想法似乎很简单，只是他的成就不那么简单。这是一个错误的核心数据建模吗？我在控制器级别犯了错误吗？界面？请注意，在这个级别上，我没有编写任何代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:00:47.833

如果你想

> 定义与另一个 OBJ 关联的一个或多个动作

这意味着一个 OBJ 可以有多个 ACTION，一个 ACTION 可以有多个 OBJ。

因此，您应该在两个方向上定义 ACTION 和 OBJ 之间的关系。

```
OBJ.actions <<-------->> ACTION.obj 
```

除非您打算拥有“子对象”（例如 CATEGORY 和 subCATEGORY），否则您不应该在 OBJ 和 OBJ 之间建立关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:58:12.043

我通过在“OBJ”和“ACTION”之间添加新关系找到了解决方案。

```
OBJ                           ACTION
…                             …
Relationships                 Relationships
targetObject     <------->>   actions
conditionObject  <------->>   condition 
```

如果我不这样做，反向关系总是指同一个（自我）对象。所以，通过改变关系，我改变了对象本身！

通过添加新的一对多关系，我可以间接建立 OBJ 到 OBJ 关系（targetObject 和 conditionObject 可能是同一个）并保持图形一致。

每一天，我都更好地理解“Core Data 不适合初学者”是什么意思……</p>

# python - 如何测试我的 LT 代码的实现？

> ID：12511644
> 
> 赞同：3
> 
> 时间：2012-09-20T11:25:36.400
> 
> 标签：python, testing

受到 Nick Johnson 的博客[Damn Cool Algorithms: Fountain Codes](http://blog.notdot.net/2012/01/Damn-Cool-Algorithms-Fountain-Codes)的启发，我决定尝试实现[Luby Transform (LT) 代码](http://en.wikipedia.org/wiki/Luby_transform_code)。我只是把它推到了[GitHub](https://github.com/alexchamberlain/socket/tree/master/fountain)；它是用 Python 3 编写的。

我使用一个仅包含“hello”的非常短的文件来开发它，并在一个随机生成的 1MB 文件上进行了测试。该软件似乎可以有效地对文件进行编码和解码，仅在编码器和解码器之间共享原始文件的长度、块大小和液滴。

**问题是，我应该如何证明这确实是 LT 代码的忠实实现？我如何证明解码算法是有效的？**

我的意图是使用 Python 的计数引用系统删除使用过的液滴。**我如何检查这确实发生了？**

也欢迎对代码本身提供任何反馈，尽管它可能更适合作为评论（而不是答案）或 GitHub 上的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T22:35:16.050

如果您只想查看引用计数是否有效，您可以`__del__`在类中定义该方法。请注意，这将阻止循环 GC 处理这些类

另一种方法是查看对类的引用计数的更改，因为每个实例都包含对该类的引用

```
>>> from sys import getrefcount
>>> class Obj(object):
...  pass
... 
>>> sys.getrefcount(Obj)
5
>>> obj_list=[Obj() for x in range(5)]
>>> sys.getrefcount(Obj)
10
>>> obj_list[:3]=[]
>>> sys.getrefcount(Obj)
7 
```

# mysql - 如何在MYSQL中使用变量作为表标识符

> ID：12511645
> 
> 赞同：3
> 
> 时间：2012-09-20T11:25:41.033
> 
> 标签：mysql, sql

如果我有这个：

```
CREATE TABLE ftable (
id     INT,
fvalue VARCHAR(14)
);

INSERT INTO ftable VALUES (1,'tableB'),(2,'tableA');

CREATE TABLE tableA (
value VARCHAR(14)
);

SELECT @tmp:=fvalue FROM ftable WHERE id=2; 
```

我该怎么做才能做到这一点：

```
INSERT INTO @tmp VALUES ('buhambug'); 
```

因为据我所知，这会引发 mysql 错误。有人可以告诉我解决方案的 sqlfiddle 吗？或者，也许我在想这个错误的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:47:02.270

您需要使用动态 SQL 来使用变量作为对象名称：

```
SET @tmp = (SELECT fvalue FROM ftable WHERE id=2);

SET @SQL = CONCAT('INSERT INTO ',@tmp,' VALUES (''buhambug'')');
PREPARE stmt FROM @SQL;
EXECUTE stmt; 
```

**[SQL 小提琴](http://sqlfiddle.com/#!2/130c4/2)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:43:05.887

你不能在静态sql中做。您可以在存储过程中执行此操作：

```
delimiter $$

drop procedure if exists test_call$$

create procedure test_call(table_in varchar(100))
begin
  set @q = concat("select * from ", table_in);

  PREPARE stmt FROM @q;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;

end$$

delimiter ;

call test_call('TeableA');

drop procedure if exists test_call; 
```

一般来说，从动态表中动态读取不是一个好的决定

# javascript - 如何将多个对象呈现为 JSON 以及如何从中检索该对象 在圣杯？

> ID：12511647
> 
> 赞同：0
> 
> 时间：2012-09-20T11:25:46.360
> 
> 标签：javascript, ajax, json, grails

实际上，我想使用 Ajax 在**结果**div 中添加两个选择框。我有一个名为**ajaxFun**的函数，用于检索这两个选择框的值。我正在尝试将多个对象呈现为 JSON。但我不知道如何呈现以及如何从我的 javascript 函数中检索呈现的对象。

我的普惠制页面。

```
<table>
<tr>
<td><div id="test" onclick="${remoteFunction(controller:'ProjectOperations', action:'ajaxFun', update:'results',onComplete:'getFields(e)',params:'\'filter=\' + escape(this.id)' )}">click me!</div></td>
</tr>
</table>
<div id="results"></div> 
```

控制器类

```
import grails.converters.JSON

class ProjectOperationsController {

    def ajaxFun(){
                def project="Hill"
                def company="VK"
        def operation=Operation.findAllByProject_name(project)
        def staff=StaffDetails.findAllByCompany_name(company)

        render operation,staff as JSON//am not sure 
    }
} 
```

在这里，我想呈现两个列表 [分别是操作和人员..]。然后我也想知道如何从 javascript 函数中检索渲染的对象。

Javascript函数

```
<g:javascript>
  function getFields(e){ 
// here I want to retrieve that two objects.
 } 
 </g:javascript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:17:07.850

在控制器更改

```
 render operation,staff as JSON//am not sure 
```

到

```
 render [operation:operation,staff:staff] as JSON 
```

然后在javascript中

```
 function getFields(e){
    var data = eval("("+e.responseText+")");
    console.log(data.staff);
    console.log(data.operation);
 } 
```

在您的控制台中，您应该会看到人员的内容，然后是 findAll 中的操作内容，这些内容可能是您可以在 JavaScript 中使用的数组。

# r - 在 R 中的循环中构建列表 - 获取正确的项目名称

> ID：12511648
> 
> 赞同：23
> 
> 时间：2012-09-20T11:25:48.997
> 
> 标签：r, list, loops

我有一个函数，它包含两个列表的循环并建立一些计算数据。我想将这些数据作为列表列表返回，并按某个值进行索引，但我的赋值错误。

我正在尝试做的一个最小的例子，我出错的地方是：

```
mybiglist <- list()
for(i in 1:5){
    a <- runif(10)
    b <- rnorm(16)
    c <- rbinom(8, 5, i/10)
    name <- paste('item:',i,sep='')
    tmp <- list(uniform=a, normal=b, binomial=c)
    mybiglist[[name]] <- append(mybiglist, tmp)
} 
```

如果您运行此程序并查看输出 mybiglist，您会发现每个项目的命名方式出现了非常错误的情况。

关于如何实现我真正想要的任何想法？

谢谢

附言。我知道在 R 中，如果不得不求助于循环，就会失败，但在这种情况下，我确实觉得有道理;-)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-20T11:35:55.827

如果您不使用以下`append`命令，它会起作用：

```
mybiglist <- list()
for(i in 1:5){
  a <- runif(10)
  b <- rnorm(16)
  c <- rbinom(8, 5, i/10)
  name <- paste('item:',i,sep='')
  tmp <- list(uniform=a, normal=b, binomial=c)
  mybiglist[[name]] <- tmp
}

# List of 5
# $ item:1:List of 3
# ..$ uniform : num [1:10] 0.737 0.987 0.577 0.814 0.452 ...
# ..$ normal  : num [1:16] -0.403 -0.104 2.147 0.32 1.713 ...
# ..$ binomial: num [1:8] 0 0 0 0 1 0 0 1
# $ item:2:List of 3
# ..$ uniform : num [1:10] 0.61 0.62 0.49 0.217 0.862 ...
# ..$ normal  : num [1:16] 0.945 -0.154 -0.5 -0.729 -0.547 ...
# ..$ binomial: num [1:8] 1 2 2 0 2 1 0 2
# $ item:3:List of 3
# ..$ uniform : num [1:10] 0.66 0.094 0.432 0.634 0.949 ...
# ..$ normal  : num [1:16] -0.607 0.274 -1.455 0.828 -0.73 ...
# ..$ binomial: num [1:8] 2 2 3 1 1 1 2 0
# $ item:4:List of 3
# ..$ uniform : num [1:10] 0.455 0.442 0.149 0.745 0.24 ...
# ..$ normal  : num [1:16] 0.0994 -0.5332 -0.8131 -1.1847 -0.8032 ...
# ..$ binomial: num [1:8] 2 3 1 1 2 2 2 1
# $ item:5:List of 3
# ..$ uniform : num [1:10] 0.816 0.279 0.583 0.179 0.321 ...
# ..$ normal  : num [1:16] -0.036 1.137 0.178 0.29 1.266 ...
# ..$ binomial: num [1:8] 3 4 3 4 4 2 2 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:35:58.650

改变

```
mybiglist[[name]] <- append(mybiglist, tmp) 
```

到

```
mybiglist[[name]] <- tmp 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T12:29:24.277

表明不需要显式的 for 循环

```
unif_norm  <- replicate(5, list(uniform = runif(10),
  normal = rnorm(16)), simplify=F)

binomials <- lapply(seq_len(5)/10, function(prob) {
 list(binomial =  rbinom(n = 5 ,size = 8, prob = prob))})

biglist <- setNames(mapply(c, unif_norm, binomials, SIMPLIFY = F), 
                     paste0('item:',seq_along(unif_norm))) 
```

一般来说，如果你沿着`for`循环路径走，最好事先预先分配列表。这样内存效率更高。

```
mybiglist <- vector('list', 5)
names(mybiglist) <- paste0('item:', seq_along(mybiglist))
for(i in seq_along(mybiglist)){
    a <- runif(10)
    b <- rnorm(16)
    c <- rbinom(8, 5, i/10)

    tmp <- list(uniform=a, normal=b, binomial=c)
    mybiglist[[i]] <- tmp
} 
```

# image - 像Photoshop这样的高通滤镜

> ID：12511651
> 
> 赞同：1
> 
> 时间：2012-09-20T11:26:07.967
> 
> 标签：image, algorithm, graphics

有人知道类似于 Photoshop 高通滤镜的算法吗？我正在使用[这个](http://en.wikipedia.org/wiki/High-pass_filter#Algorithmic_implementation)。但它看起来不同，只是“切断”低信号，我想只留下高信号和低信号而没有中间信号。

我知道我应该使用卷积，但实际上我不知道如何正确地做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:31:12.690

也许只是取高通和低通滤波器输出之和的平均值。它将以非常简单的方式为您提供低频和高频的组合。类似 Matlab 的伪代码如下：

```
img_low = low_pass(img)
img_hight = high_pass(img)
img_lo_hi = (img_low + img_high) / 2 
```

# c# - C#，Windows 窗体：如何防止在从后端检索数据时触发 EventHandler

> ID：12511655
> 
> 赞同：2
> 
> 时间：2012-09-20T11:26:21.853
> 
> 标签：c#, winforms, event-handling

[我在Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)上有超过 40 个控件（TextBox、RadioButton、CheckBoxes 等）。每个控件都注册了 EventHandlers（TextChanged、CheckChanged 等）。

我想防止在表单初始化期间触发这些事件。

在初始化之前取消订阅所有事件并在以后订阅是很费力的。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:32:11.617

虽然您提供的信息很少，但您当然可以使用：

```
Boolean Loading = false;

{
    Loading = true;
    LoadData();
    // LoadData must set the fact it's finished...
} 
```

然后在事件处理程序中：

```
if (Loading)
    return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:36:24.717

我通常愚蠢的简单解决方案是有一个由每个事件处理程序检查的表单属性。

例如

```
private bool _inhibit = false;

private void Initialise()
{
   _inhibit = true;
   try
   {
      // initialise fields
   }  
   finally
   {
      _inhibit = false;
   }
}

Then just check the state of _inhibit in each handler. 
```

不确定是否有一种不杂乱的方式来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:38:15.033

`InitializeComponent`在表单的构造函数中设置事件处理程序。像：

```
form()
{
     InitializeComponent();

     // Set the event handlers to your controls like:
        this.button1.Click += new System.EventHandler(this.button1_Click);

     // Or
        this.textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:45:25.793

您可以枚举所有控件，例如：

```
private void DisableAllHandlers()
{
    foreach (var control in this.Controls)
    {
       // Use reflection
    }
} 
```

并使用文章*[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778)*以禁用选定控件的处理程序的来源。

# google-drive-api - Google 云端硬盘：500 内部错误

> ID：12511656
> 
> 赞同：5
> 
> 时间：2012-09-20T11:26:24.963
> 
> 标签：google-drive-api

请求某些文件时出现此异常。有什么办法调试吗？

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 OK
{
  "code" : 500,
  "errors" : [ {
    "domain" : "global",
    "message" : "Internal Error",
    "reason" : "internalError"
  } ],
  "message" : "Internal Error"
}
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:159)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:203)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:237)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:307)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:31:31.830

当我尝试使用空名称创建文件夹时，似乎会弹出此错误。更有意义的错误消息会很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-17T18:32:03.553

`0.5.1-dev`在 Ubuntu 16.04上使用版本[`grive`](https://github.com/vitalif/grive2)我遇到了错误：

```
request failed due to temporary error: 500 (body: {
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Internal Error"
   }
  ],
  "code": 500,
  "message": "Internal Error"
 }
}
). retrying in 5 seconds 
```

它会重试并重复错误。

解决方案是在目录中创建一个虚拟文件。

我[为此打开了一个问题](https://github.com/vitalif/grive2/issues/129)。

# jsf - PrimeFaces 3.2 DataTable“跳转到页面”分页器模板？

> ID：12511657
> 
> 赞同：8
> 
> 时间：2012-09-20T11:26:25.493
> 
> 标签：jsf, jsf-2, primefaces

根据 PrimeFaces 3.2 官方文档，分页器模板可以是以下预定义分页器模板的组合：

*   `{FirstPageLink}`
*   `{LastPageLink}`
*   `{PreviousPageLink}`
*   `{NextPageLink}`
*   `{PageLinks}`
*   `{CurrentPageReport}`
*   `{RowsPerPageDropDown}`

这对于小型数据集来说很好，但是如果数据集很大，则很难浏览页面：假设您有几千（甚至更多）页面，您处于第一个开始，第 1 页。 1，你想直接跳到第813页，然后--到第499页）。所以：

1.  有没有办法增强 PrimeFaces 3.2 DataTable 中为分页器设置的现有模板，例如添加自定义模板？
2.  如果没有，......有没有办法（我认为它是潜在的黑客攻击）影响数据表导航，就像我上面描述的场景一样？

您的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T11:59:29.530

`{JumpToPageDropdown}`您可以使用分页器选项从下拉列表中选择页面。我认为它没有记录在案。

# excel - 在某些条件下从命名范围中删除行

> ID：12511660
> 
> 赞同：1
> 
> 时间：2012-09-20T11:27:01.753
> 
> 标签：excel, excel-2003, vba

在我之前的帖子：[从所有书籍中获取数据到某个表中](https://stackoverflow.com/questions/12508939/take-data-from-all-books-to-some-table/12509297#comment16836487_12509297)，我曾询问如何从 EXCEL 中所有打开的书籍中获取一些数据。

但是有一些问题。我不知道如何检查命名范围中列名“Id”的值是否为“0”。如果有，则不应将其添加到决赛桌。我怎样才能做到这一点？

所以在我得到命名范围值之后：

`Set Rng = iList.[Table]`我需要清洁它

```
 i = 1
         For Each row In Rng.Rows

      Set cell = row.Cells(1, 2)
      If cell = "0" Then

      Rng.Rows(i).Delete

      End If

      i = i + 1

      Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:13:19.907

这是我一直在努力解决的问题，但这段代码有效，我认为应该适用于您正在尝试做的事情。在这种情况下，我为库存编号（“Inv”）使用命名范围并查看它以找到小于 26 的任何值。如果存在，我删除该行。循环完成后，我重新建立最后一行（假设我删除了一些行，这将改变）。您可以替换您的命名范围并将 IF 语句中的条件更改为 value = 0：

```
Set rngCells = Range("Inv")
For i = rngCells.Cells.Count To 0 Step -1
    If rngCells(i).Value < 26 Then
        rngCells(i, 1).EntireRow.Delete
    End If
Next i

FinalRow = Cells(Rows.Count, 2).End(xlUp).Row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:44:26.433

我不确定，但你可能会寻找这个

```
If ThisWorkbook.Names("ID").RefersToRange.Value = "0" Then 
```

将 ThisWorkbook 替换为您喜欢的任何工作簿或工作表对象。

如果不是这样，请评论您要检查的内容是否为“0”，因为我不确定我是否理解正确。

*编辑*

现在，我知道发生了什么 - 你在这里遇到了这样的问题

[如果表中的值满足条件，则 Vba 宏从表中复制行](https://stackoverflow.com/questions/12177125/vba-macro-to-copy-row-from-table-if-value-in-table-meets-condition)

并且在这里需要这样的代码

```
Dim rngFiltered as range
Rng.AdvancedFilter xlFilterCopy, Tabelle1.Range("CRITERIA"), rngFiltered, False

lst.InsertRowRange.Resize(Rng.Rows.Count).Value = rngFiltered.Value 
```

其中“CRITERIA”是“G1:G2”等范围的名称，其中 G1="Title of Column D" G2=">0"

如果它始终是同一个单元格，我会编辑你的代码：

```
 Dim rangeRow As Range
  Dim rowCell As Range

  Set Rng = Tabelle1.Range("A1:A50")

  For Each rangeRow In Rng.Rows

    Set rowCell = rangeRow.Cells(1, 2)
    If rowCell.value = "0" Then
      rangeRow.Delete
    End If
  Next rangeRow 
```

或者如果您需要检查所有单元格

```
 For Each rangeRow In Rng.Rows
    For each rowCell in rangeRow           
       If rowCell.value = "0" Then
        rangeRow.Delete
        exit for
       End If
    next rowCell
  Next rangeRow 
```

# c++ - 就地标记 std::string

> ID：12511668
> 
> 赞同：1
> 
> 时间：2012-09-20T11:27:50.840
> 
> 标签：c++, string

> **可能重复：**
> [如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

有几种可能来标记 std::string 就像 strtok 用 C 风格的字符串做的那样。我通过字符串找到了 boost::tokenizer、getline 或手动迭代。但是这些可能性中的每一个都与 strtok 不同，因为它们都没有到位。他们将字符复制到新字符串（如果我给定的一种可能性实际上不同，请纠正我），而 strtok 不需要分配（至少从我的角度来看 - 在内部它可能分配内存）任何内存。

现在我只是好奇是否有任何方法可以实现 std::string 的这种行为？我考虑过通过[数据](http://en.cppreference.com/w/cpp/string/basic_string/data)访问，但它返回一个 const 指针。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:30:26.180

您可以简单地通过将令牌生成为迭代器`std::string`对来对就地令牌化。`std::string`

# exception - J2ME 中的异常处理

> ID：12511669
> 
> 赞同：1
> 
> 时间：2012-09-20T11:27:54.307
> 
> 标签：exception, exception-handling, java-me, try-catch, throw

我正在开发一个 J2ME 应用程序，我想对异常处理进行良好的实践，我抛出了一些异常，例如

```
ConnectionNotFoundException, IOException, XmlPullParserException, OutOfMemory, Exception 
```

我不想在我制作的每个方法中捕获所有这些异常

所以我认为我可以开设一个新课程

这个类将处理所有其他类

我做了这门课

```
public class ExceptionHandler extends Exception {

    private Exception thrownException;

    public ExceptionHandler(Exception thrownExc) {
        this.thrownException = thrownExc;

        if (thrownException.getClass().isInstance(ConnectionNotFoundException.class)) {
            // DO SOMETHING
        } else if (thrownException.getClass().isInstance(IOException.class)) {
            // DO SOMETHING
        } else if (thrownException.getClass().isInstance(XmlPullParserException.class)) {
            // DO SOMETHING
        } else if (thrownException.getClass().isInstance(NullPointerException.class)) {
            // DO SOMETHING
        } else if (thrownException.getClass().isInstance(OutOfMemoryError.class)) {
            // DO SOMETHING
        } else if (thrownException.getClass().isInstance(Exception.class)) {
            // DO SOMETHING
        }
    }
} 
```

但我不知道这是否是一个好方法，当我用我的替换抛出的异常时我也有错误

那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:47:11.323

您走在正确的轨道上，这是处理错误的最佳方法。您还可以在自定义异常类中传递名为 message 的第二个参数，然后在此处显示消息本身。像这样的东西：

`if (thrownException.getClass().isInstance(ConnectionNotFoundException.class)) { Dialog.alert(msg);
}`

同样来自调用类，您只需调用`new ExceptionHandler(exception, Constants.msg)`

Constants.java 类将保存所有错误消息。

# android - Android - 在来自相机的图像上合并透明 png

> ID：12511672
> 
> 赞同：1
> 
> 时间：2012-09-20T11:28:17.697
> 
> 标签：android, android-camera, android-image

我有一个相机预览层。最重要的是，我正在移动（拖放）并在我的应用程序中缩放透明的小图像。在那里我使用 png 的图像视图并使用矩阵进行缩放。在将imageview缩放并定位到我想要的位置后，我需要一张图片，其背景来自相机预览，前景具有imageview的缩放和移动位置。

去做这个，

我正在通过相机拍摄图像。

然后我在从相机捕获的图像上绘制图像视图中的图像。

我尝试使用以下代码，但效果不佳。

```
 private PictureCallback mPicture = new PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {

        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null){
            Log.d("1", "Error creating media file, check storage permissions: ");
            return;
        }

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
            //captured=pictureFile.getAbsoluteFile();                
            picturefilepath=pictureFile.getPath();
            ImageView imgv= (ImageView) findViewById(R.id.midimage);
            //Matrix ms=imgv.getImageMatrix();

            Bitmap b=overlay(BitmapFactory.decodeFile(pictureFile.getPath()), imgv);

            ImageView capturedset= (ImageView) findViewById(R.id.capturedimage);

            capturedset.setImageBitmap(b);

        } catch (FileNotFoundException e) {
            Log.d("2", "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d("3", "Error accessing file: " + e.getMessage());
        }

    }
};  

private Bitmap overlay(Bitmap bmp2, ImageView view) {       
    Bitmap bmOverlay = Bitmap.createBitmap(bmp2.getWidth(), bmp2.getHeight(), bmp2.getConfig());        
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp2, canvas.getMatrix(), null);        

    view.draw(canvas);

    return bmOverlay;
} 
```

# php - 卷曲不工作？没有错误但不起作用

> ID：12511674
> 
> 赞同：1
> 
> 时间：2012-09-20T11:28:29.290
> 
> 标签：php, curl

我有卷曲的问题...

我的代码：

```
 $ffmpegExecUrl = preg_replace('/(([^\/]+?)(\.php))$/', "exec_ffmpeg.php", "http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);
            $postData = "cmd=".urlencode($exec_string)."&token=".urlencode($this->_uniqueID);
            $strCookie = 'PHPSESSID=' . $_COOKIE['PHPSESSID'] . '; path=/';
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $ffmpegExecUrl);
            curl_setopt($ch, CURLOPT_POST, TRUE);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
            curl_setopt($ch, CURLOPT_TIMEOUT, 1);
            curl_setopt($ch, CURLOPT_COOKIE, $strCookie);
            curl_exec($ch);
            curl_close($ch); 
```

我在我的主机中启用了 cURL，它在 error_log 上没有给出任何错误，但它只是没有转到那个 exec_ffmpeg.php ......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:44:59.487

如果设置“curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);” 你必须赶上转移：

```
$response = curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:33:32.617

如果您还没有，您还需要在 PHP.ini 中启用 cURL 扩展。实际上正在考虑它 - 它可能会抱怨 cURL 是未知的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:50:12.533

您可以尝试放置一个“硬编码”的 URL 来查看它是否适合您吗？这将检查您的正则表达式是否有效。

至少你可以`print "$ffmpegExecUrl"`到一个日志文件。

尝试使超时时间长于 1 或只是注释掉测试条目。

请向我们提供您获得的结果，以便我们尝试进一步帮助您。

# native - 将 Worklight 应用程序添加到现有的本机应用程序

> ID：12511677
> 
> 赞同：2
> 
> 时间：2012-09-20T11:28:36.297
> 
> 标签：native, hybrid, ibm-mobilefirst

首先，我想知道是否确实可以将 Worklight 应用程序嵌入到已经存在的 Native 应用程序中。我知道您可以从 Web 向本机应用程序添加 web 视图和提要内容，但我将如何从 Worklight 应用程序中做到这一点？是否可以？有没有这样的例子？我绞尽脑汁，说实话，我不知道！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:45:26.817

如果我理解正确，您已经有一个本机应用程序并希望向其中添加 WL 混合 (WebView) 容器，对吗？

我不认为这是一个开箱即用的选项。

想到的解决方法是：

1.  使用 WL studio 创建空白 WL 应用
2.  添加，比方说，Android环境
3.  构建应用程序以获取本机项目
4.  将 worklight.jar、cordova.jar、资产和主要活动类复制到您的原生应用程序
5.  需要时从 #4 打开 WL 活动

我没有测试它，但它可能会工作:)

# perl - 在 Perl 中迭代地抓取匹配行之后的多行？

> ID：12511678
> 
> 赞同：3
> 
> 时间：2012-09-20T11:28:38.430
> 
> 标签：perl, hash, pattern-matching

**我想要一个哈希结构，以>**开头的每一行都是键，直到下一个 > 的行是该键**的**值：

 **```
while (<DATA>) {
    $line1 = $_;
    chomp($line1);

    if ($line1 =~ /^>/) {
        while (<DATA>) {
            last if $line1 =~ /^>/;
            $value .= $_;
        }
        $hash{$line1} = $value;
    }
}

foreach my $key(%hash) {
    print "$key :$hash{$key}\n";
}

__DATA__
>label1 
line1\n
line2\n
>label2
line1\n
line2\n 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:42:08.720

我认为使用外部范围的关键变量是最简单的方法：

## 代码

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';

my $key = 'unlabeled';
my %value;

while (defined(my $line = <DATA>)) {
    chomp $line;

    # key line
    if ($line =~ /^>(.*)/) {
        $key = $1;
        next;
    }

    # value line
    push @{$value{$key}}, $line;
}

say "$_: " . join ', ' => @{$value{$_}} for keys %value;

__DATA__
>label1
line1
line2
>label2
line1
line2 
```

## 输出

```
label1: line1, line2
label2: line1, line2 
```

## 解释

我们将最后看到的哈希键保存`$key`在行迭代循环之外的变量中。当循环看到下一个关键行时，它会替换`$key`字符串。如果不存在新键的数组，perl 的[自动激活](http://en.wikipedia.org/wiki/Autovivification)机制会在散列中创建一个新的空数组。如果 下的散列中已经存在某些内容，`$key`则会在现有行之后添加新行。

**编辑**：如果您的输入不是以关键行开头，则第一个非关键行将添加到 key `unlabeled`。

**编辑 2**：如果您想要连接标签的行，这可以通过`join "\n" => @{$value{$_}}`. 如果你想要这样，*只有*你可以扔掉数组的东西并使用@perreal 的解决方案，它非常相似，但只是连接新行。

**编辑3**：是的，自动复活！:) （感谢@TLP）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:50:53.240

```
use warnings;
use strict;

my %hash;
my $key;

foreach (<DATA>) {
  chomp; 
  if (/^>(.*)$/) { $key = $1; } 
  else           { $hash{$key} .= $_} 
}

foreach $key(keys %hash) {
  print "$key :$hash{$key}\n";
}

__DATA__
>label1 
line1\n
line2\n
>label2
line1\n
line2\n 
```**

# javascript - Javascript 正则表达式 url 验证器非常慢？

> ID：12511679
> 
> 赞同：1
> 
> 时间：2012-09-20T11:28:44.127
> 
> 标签：javascript, regex

我目前正在使用此代码来验证 URL，但由于我正在验证页面中突出显示的文本，因此对于 javascript 函数来说真的很慢。

这是我正在使用的代码：

```
 var urlregex = new RegExp(
        "^(http|https|ftp)\://([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$");
return urlregex.test($.trim(url)); 
```

我希望还有其他方法可以用来检查使用 javascript 的有效链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:49:32.203

使用`expr = new RegExp("pattern")`与. 相比要慢得多`expr = /pattern/g`。您还应该确保在函数定义之外编译表达式，以便在每次调用函数时都可以重用它而无需编译（如果它在循环内则更重要）。尝试以下操作：

```
var expression = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i;
function testUrl(url){
    return expression.test($.trim(url));
} 
```

您可以在此处查看有关 javascript 正则表达式性能的更多信息：http: [//corporate.tuenti.com/en/dev/blog/tips-and-tricks-with-regular-expressions-in-js](http://corporate.tuenti.com/en/dev/blog/tips-and-tricks-with-regular-expressions-in-js)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T11:41:39.637

尝试以下正则表达式：

```
var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g;
var url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g; 
```

# spring - 资源不适用于范围原型？

> ID：12511681
> 
> 赞同：3
> 
> 时间：2012-09-20T11:28:53.370
> 
> 标签：spring, dependency-injection

> **可能重复：**
> [@Resource 与 @Autowired](https://stackoverflow.com/questions/4093504/resource-vs-autowired)

我已经定义了一个 Spring`@Controller`并`@Scope("request")`用于`@Resource`获取一个使用 定义的服务 bean `@Scope("prototype")`，但是在每次重新加载页面时，我总是得到相同的服务 bean 实例。

我发现更改`@Resource`为`@Autowired`实际上以我期望的方式工作，并且每次重新加载页面时都会获得一个新的服务 bean 实例。

这是预期的行为吗？`@Resource`我对和之间的区别有一些了解`@Autowired`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T00:06:00.747

这很奇怪，我希望它们至少在范围方面表现相同——我知道的唯一区别是关于自动装配的类型——@Autowired 的类型，@Resource 的名称。

我觉得您的问题可能更多地与需要在您的原型 bean 上使用 @Scope 注释指定 proxyMode 有关：

```
@Scope(value="prototype", proxyMode=ScopedProxyMode.TARGET_CLASS) //Or ScopedProxyMode.INTERFACES 
```

这是必要的，因为`request`范围可能比原型范围更大。您会看到注入了相同的代理实例，但是代理将确保当您调用依赖 bean 的方法时，它被委派给适当范围的 bean。

# ios5 - iOS5 NSDateFormatter - 错字？找不到

> ID：12511682
> 
> 赞同：0
> 
> 时间：2012-09-20T11:28:53.963
> 
> 标签：ios5, nsdate, nsdateformatter

已经阅读了很多关于此的帖子，但我仍然找不到下面的代码有什么问题。可能是一些错字。我相信我得到“代码盲”;-) 请帮忙？谢谢。

没有获得实际的当前日期+时间，只是用于 dateFormat 的 dateStr（“2012-08-10 10:00”），而不是实际的日期+时间，类似于：“2012-09-20 @ 13 :24"。

```
// Trim the date
NSString *dateStr = @"2012-08-10 10:00";

// Convert string to date object
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat.dateFormat = @"yyyy-MM-dd HH:mm";
NSDate *date = [dateFormat dateFromString:dateStr];

// Convert date object to desired output format
dateFormat.dateFormat = @"yyyy-MM-dd '@' HH:mm";
dateStr = [dateFormat stringFromDate:date];

NSLog(@">>> TEST: new dateStr is: %@", dateStr);
// Gives result: ">>> TEST: new dateStr is: 2012-08-10 @ 10:00". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:09:53.553

**解决** 了 是的，我是代码盲，看着完全错误的问题......无论如何我解决了它，下面做我想要的。也许其他人需要它；

```
// Trim the date    
NSDate *theDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd '@' HH:mm"];

NSString *playDate = [dateFormatter stringFromDate: theDate];
NSLog(@">>> TEST: new dateStr is: %@", playDate); 
```

// 结果 = >>> 测试：新的 dateStr 是：2012-09-20 @ 14:02"

# jenkins - Tycho 在 CloudBees Jenkins 上使用 useJDK=BREE 构建

> ID：12511685
> 
> 赞同：1
> 
> 时间：2012-09-20T11:29:20.453
> 
> 标签：jenkins, tycho, cloudbees

我在我的 CloudBees Jenkins 上创建了一个新的 maven 构建，它告诉 tycho-compiler-plugin 使用与捆绑运行时执行环境匹配的 JRE 库（[发行说明 Tycho 0.14](http://wiki.eclipse.org/Tycho/Release_Notes/0.14)）。此功能需要一个似乎缺少的已配置 toolchain.xml。我的工作因以下日志而失败：

> org.apache.maven.lifecycle.LifecycleExecutionException: 无法执行目标 org.eclipse.tycho:tycho-compiler-plugin:0.16.0-SNAPSHOT:compile (default-compile) on project org.eclipse.scout.commons: useJDK =已配置 BREE，但未找到 ID 为“JavaSE-1.6”的“jdk”类型工具链。见[http://maven.apache.org/guides/mini/guide-using-toolchains.html](http://maven.apache.org/guides/mini/guide-using-toolchains.html)

有人可以告诉我我是否遗漏了什么，或者这是 CloudBees 中缺少的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:12:55.123

Cloudbees 构建环境确实没有 toolchains.xml 文件集。这是我们可以提供的东西，我会在下一个版本中添加它。

# jquery - jquery函数的双重执行

> ID：12511691
> 
> 赞同：-1
> 
> 时间：2012-09-20T11:29:32.957
> 
> 标签：jquery, bind, lightbox, unbind

我有两个 jQuery 脚本。第一个是轮播插件，第二个是灯箱插件。这是预览[http://www.zlatko.ch/test/](http://www.zlatko.ch/test/)

问题 - 关闭灯箱后，我无法再使用轮播导航。如果我在文件`$(document).unbind("click");`末尾添加这个`jquery.mobileGallery.js`，那么问题就解决了，但是我得到了第二个 - 重新打开它后我无法再在灯箱内导航，因为一次单击突然变成了两次单击，而不是一次，函数正在执行两次。

有人可以帮我解决这个问题吗？

html

```
<div class="imageGallery">
    <ul class="mainSlideShow">
        <li>
            <a rel="prettyGall" href="images/sk01.jpg"><img src="images/01.jpg" /></a>
        </li>
        <li>
            <a rel="prettyGall" href="images/sk02.jpg"><img src="images/02.jpg" /></a>
        </li>
        <li>
            <a rel="prettyGall" href="images/sk03.jpg"><img src="images/03.jpg" /></a>
        </li>
        <li>
            <a rel="prettyGall" href="images/sk04.jpg"><img src="images/04.jpg" /></a>
        </li>
        <li>
            <a rel="prettyGall" href="images/sk05.jpg"><img src="images/05.jpg" /></a>
        </li>
    </ul>
<div class="slidernavigation"></div>
<div id="leftNav"></div>
<div id="rightNav"></div>
<div class="descWrapper">
    <ul class="mainDescShow">
        <li>
            <span class="imageDescription">vitae scelerisque dolor elit ac mi. Sed dignissim ...</span>
        </li>
        <li></li>
        <li>
            <span class="imageDescription">vitae scelerisque dolor elit ac mi. Sed dignissim ...</span>
        </li>
        <li></li>
        <li></li>
    </ul>
</div> 
```

jQuery 函数

```
(function($) {

    $.fn.carouZel = function(options) {

        //Defaults to extend options
        var defaults = {  
            FirstSliderSpeed: 500,                  //Speed of the first slider in milliseconds
            SecondSliderSpeed: 800,                //Speed of the second slider in milliseconds
            SlideShow: true,                        //Slideshow on - true, off - false
            SlideShowInterval: 10000,                 //Slideshow interval in milliseconds
            BulletNavPos: ".slidernavigation"
        };  

        //Extend those options
        var options = $.extend(defaults, options);

        var obj = $(this); //detailsVisualGallery

    if (obj.length > 0){

            var firstSlider = $(this);
            var secondSlider = $('.mainDescShow');

            var ChildrenNumber = firstSlider.children().length;
            var liWidth = firstSlider.children('li:first').width();
            var liHeight = firstSlider.children('li:first').outerHeight() + 10;

            var maxW = 0;
            var maxH = 0;
            $(".mainSlideShow img").load().each(
                function(){

                    var c_width = parseInt($(this).width());
                    var c_height = parseInt($(this).height());
                    if (c_width > maxW) {
                        maxW = c_width;
                    }
                    if (c_height > maxH) {
                        maxH = c_height;
                    }
                }
            );

            var liHeight = maxH + 10;

            $('.mainSlideShow li').css({
                'height': liHeight,
                'width': 660
            });

            $(".mainSlideShow img").load().each(
                function(){
                    var imgH = $(this).height();
                    var imgW = $(this).width();

                    $(this).css({
                        //'position': 'absolute',
                        'margin-top': -1 * (imgH / 2) + 'px',
                        'margin-left': -1 * (imgW / 2) + 'px'
                        });
                    $(this).fadeIn('slow')
                }
            );

            //find height
            $.fn.equalizeHeights = function() {
              var maxHeight = this.map(function(i,e) {
                return $(e).outerHeight() + 10;
              }).get();

              return this.height( Math.max.apply(this, maxHeight) );
            };

            $.fn.justNumber = function() {
              var maxHeight = this.map(function(i,e) {
                return $(e).outerHeight() + 10;
              }).get();

              return  Math.max.apply(this, maxHeight) ;
            };

            //wrap
            firstSlider.wrap('<div class="sliderWrapper" />');
            firstSlider.parent('.sliderWrapper').css({'width': '100%', 'height': + liHeight + 'px', 'position': 'relative', 'overflow':'hidden'});

            //set width & height
            $(this).css({'width': liWidth * (ChildrenNumber + 1) +'px', 'height': liHeight +'px', 'overflow':'hidden', 'position':'relative' });
            $('.mainDescShow').css({'width': liWidth * (ChildrenNumber + 1) +'px', 'overflow':'hidden', 'position':'relative' });

            //create bullet navigation
            $(options.BulletNavPos).prepend("<ul id=\"bulletNav\"></ul>");

            for (var i = 0; i < ChildrenNumber ; i++) {
                $('#bulletNav').append("<li>" + (i+1) +"</li>");
            }

            //clone first time
            firstSlider.children('li:first').clone().appendTo(firstSlider);

            function CloneSlide(){
                firstSlider.children('li:eq(1)').clone().appendTo(firstSlider);

                firstSlider.children('li:first').detach();
            }
            //place navigation
            var positionnav = $(this).offset();

            $('#leftNav').css({left: positionnav.left, top: positionnav.top + (liHeight/2) });
            $('#rightNav').css({left: positionnav.left+ liWidth- 45 , top: positionnav.top + (liHeight/2)});

            // setting the active bullet
            function setActiveBullet() {
                    $('#bulletNav li').removeClass('active');
                    $('#rightNav , #leftNav').removeClass('false');

                    if (firstSlider.position().left >= 0 ){
                            $('#bulletNav').children('li').eq(0).addClass('active');
                            $('#leftNav').addClass('false');
                    }
                    else {
                        $('#bulletNav').children('li').eq(""+ (Math.abs(firstSlider.position().left) / liWidth) + "" ).addClass('active');
                            if( (Math.abs(firstSlider.position().left) / liWidth) + 1 == ChildrenNumber){
                                $('#rightNav').addClass('false');
                            }
                    }
            }
            setActiveBullet();

            $(".mGalleryItem img").load(
                function(){
                    $(this).show();
                }
            );

            //bullet navigation
            $('#bulletNav li').click(function() {

                var bulletPos = $(this).index(); //index gets eq

                firstSlider.animate({
                    left: '-'+(bulletPos * liWidth) +'px'
                    }, options.FirstSliderSpeed, function() {
                        // Animation complete.
                        //CloneSlide();
                        //firstSlider.css({'left': '0px'});
                        setActiveBullet()
                });

                setActiveBullet();

            });

            $('.mainSlideShow , .mainDescShow').css({
                'visibility':'visible'
            });

            $("#rightNav:not(.false)").live("click",function(event){

                event.preventDefault();

                var activeBulletPos = Math.abs(firstSlider.position().left) / liWidth ;

                firstSlider.animate({
                    left: '-='+ liWidth +'px'
                    }, options.FirstSliderSpeed, function() {
                        // Animation complete.
                        if ( activeBulletPos == (ChildrenNumber - 1) ) {
                            firstSlider.css({'left': '0px'});
                        }
                        setActiveBullet()
                });

                secondSlider.animate({
                    left: '-='+ liWidth +'px'
                    }, options.FirstSliderSpeed, function() {
                        // Animation complete.
                        if ( activeBulletPos == (ChildrenNumber - 1) ) {
                            secondSlider.css({'left': '0px'});
                        }
                });

                return false;
            })

            $("#leftNav:not(.false)").live("click",function(event){

                event.preventDefault();

                    var sliderPos = firstSlider.position();

                    if (sliderPos.left >= 0 ) { 
                            firstSlider.animate({
                                    left: liWidth- (liWidth * ChildrenNumber) +'px'
                            }, options.FirstSliderSpeed, function() {
                                    setActiveBullet() // Animation complete.
                                    //showHide();
                               });

                            secondSlider.animate({
                                    left: liWidth- (liWidth * ChildrenNumber) +'px'
                            }, options.FirstSliderSpeed, function() {
                               });
                    }
                    else {
                            firstSlider.animate({
                                    left: '+='+ liWidth +'px'
                            }, options.FirstSliderSpeed, function() {
                                    setActiveBullet() // Animation complete.
                                    //showHide();
                               });

                            secondSlider.animate({
                                    left: '+='+ liWidth +'px'
                            }, options.FirstSliderSpeed, function() {
                               });
                    }

                setActiveBullet();
            })

        }
    }//call zlider
})(jQuery);

(function($) {
    $.fn.mGallery = function(options) {
        var defaults = {
            SlideShow: true,
            SlideShowInterval: 10000
        };  

        window.top.scrollTo(0, 1);

        //Extend those options
        var options = $.extend(defaults, options);

        var obj = $(this); 

        if (obj.length > 0){
            obj.on("click",function(){

                var winH = $(window).height();
                var winW = $(window).width();

                $('body').append("<div class=\"mGalleryWrap\"></div>");
                $('.mGalleryWrap').css({
                    'width': winW + 'px',
                    'height': winH + 'px'
                    });

                //how many children
                var chCount = obj.length;
                var chPosition = $(this).parent().prevAll().length;

                //create list
                $('.mGalleryWrap').append("<ul class=\"mGalleryList\"></ul>");
                $('.mGalleryWrap').append("<ul class=\"mGalleryDescList\"></ul>");
                $('.mGalleryWrap').append("<ul id=\"mGalleryBull\"></ul>");

                //create navigation
                $('.mGalleryWrap').append("<div class=\"mGalleryItemRightNav\"></div>");
                $('.mGalleryWrap').append("<div class=\"mGalleryItemLeftNav\"></div>");
                $('.mGalleryWrap').append("<div class=\"mGalleryClose\"></div>");
                $('.mGalleryWrap').append("<div id=\"mGalleryDescSlide\" class=\"mGalleryDown\"></div>");

                if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
                    $('.mGalleryItemRightNav, .mGalleryItemLeftNav').css({
                        'visibility':'hidden'
                        });
                }

                $('.mGalleryItemRightNav , .mGalleryItemLeftNav').css({
                    'top': (winH / 2) - 15 + 'px'
                    });

                //create list children
                for (var itmp = 0; itmp < chCount ; itmp++) {
                        var imageURL = $("a[rel^='prettyGall']").eq(itmp).attr('href');

                        if($(".mainDescShow li").eq(itmp).html().length > 0){
                            var imageDESC = $(".mainDescShow li").eq(itmp).html();
                            var cls = 'mGalleryDescItem';
                        }
                        else{
                            var imageDESC = '';
                            var cls = 'mGalleryDescEmptyItem';
                        }

                        //imageDescription
                        $(".mGalleryList").append("<li class=\"mGalleryItem\"><img class=\"mGalleryItemImg\" src=\""+imageURL+"\"></li>");
                        $(".mGalleryDescList").append("<li class=\""+cls+"\">"+imageDESC+"</li>");
                        $("#mGalleryBull").append("<li>"+(itmp + 1)+"</li>");
                }

                $(".mGalleryItemImg").load(
                    function(){
                        var imgH = $(this).height();
                        var imgW = $(this).width();

                        $(this).css({
                            'margin-top': -1 * (imgH / 2) + 'px',
                            'margin-left': -1 * (imgW / 2) + 'px',
                            'visibility':'visible'
                            });

                    }
                );

                $('#mGalleryBull').css({
                    'left': (winW / 2) - (chCount * 8) + 'px'
                    });

                $('.mGalleryList').css({
                    'width': (winW * chCount) + 'px',
                    'height': winH + 'px',
                    'left': 0 - (chPosition * winW) + 'px'
                    });

                $('.mGalleryDescList').css({
                    'width': (winW * chCount) + 'px',
                    'height': '100px',
                    'left': 0 - (chPosition * winW) + 'px'
                    });

                $('.mGalleryItem').css({
                    'width': winW + 'px',
                    'height': winH + 'px',
                    });

                $('.mGalleryDescEmptyItem , .mGalleryDescItem').css({
                    'width': winW + 'px'
                    });

                $('.mGalleryItem img').css({
                    'max-height': (winH - 20) + 'px',
                    'max-width': (winW - 20) + 'px',
                    });

                function setActiveNav() {
                    $('.mGalleryItemRightNav , .mGalleryItemLeftNav').removeClass('false');
                    var p = $('.mGalleryList').position()
                    if(p.left >= 0){
                        $('.mGalleryItemRightNav').addClass('false');
                    }
                    if(p.left <= Math.abs((chCount - 1) * winW ) * -1){
                        $('.mGalleryItemLeftNav').addClass('false');
                    }
                }

                function setActiveBullet() {
                    $('#mGalleryBull').children('li').removeClass('active');
                    var p = $('.mGalleryList').position();

                    var eqIndex = Math.abs(p.left)/winW; 

                    $('#mGalleryBull').children('li').eq(eqIndex).addClass('active');
                }

                setActiveNav();
                setActiveBullet();

                //move right
                $('.mGalleryItemRightNav:not(.false)').live("click",function(event){
                    event.preventDefault();

                    $('.mGalleryList , .mGalleryDescList').animate({
                        left: '+='+winW+'',
                    }, 300, function() {
                        setActiveNav();
                        setActiveBullet();
                        });

                });

                $('.mGalleryItemLeftNav:not(.false)').live("click",function(event){
                    event.preventDefault();

                    $('.mGalleryList , .mGalleryDescList').animate({
                        left: '-='+winW+'',
                    }, 300, function() {
                        setActiveNav();
                        setActiveBullet();
                        });
                });

                $('.mGalleryDown').live("click",function(){
                    $(this).removeClass('mGalleryDown').addClass('mGalleryUp');

                    $('.mGalleryDescList , #mGalleryDescSlide').animate({
                        bottom: '-=80',
                    }, 300, function() {

                    });
                });

                $('.mGalleryUp').live("click",function(){
                    $(this).removeClass('mGalleryUp').addClass('mGalleryDown');

                    $('.mGalleryDescList , #mGalleryDescSlide').animate({
                        bottom: '+=80',
                    }, 300, function() {

                    });
                });

                $('.mGalleryClose').click(function(){
                    $('.mGalleryWrap').remove();
                    //$(document).bind("click");
                });

                return false;
            });
        }
    }
})(jQuery); 
```

调用 jQuery 函数

```
 $(window).bind("load", function() {
        if($('.mainSlideShow').children().length > 0){
            $('.mainSlideShow').carouZel({
                SlideShow: false,
            });
        }
    }); 

    $(document).ready(function() {
        $("a[rel^='prettyGall']").mGallery();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:32:08.423

在一个点击处理程序中很可能有一个`return false`声明或某个地方。`e.stopPropagation()`换句话说，点击有两个绑定，但事件并未向上传播到事件树以到达两者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:53:44.950

如果您尝试在初始项目单击（图像）上使用“on”会发生什么？
代替：

```
obj.click(function(){ 
```

采用：

```
obj.on("click", func... 
```

不是更好吗？

我也得到：

```
ReferenceError: IntervalClearing is not defined     
IntervalClearing(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:19:32.057

所以我只好自己做...

我`$(document).unbind("click");`在 mGallery 函数的末尾添加了，而不是

```
$("#rightNav:not(.false)").live("click",function(event) 
```

我用了

```
$("#rightNav").click(function(event) 
```

和...一起

```
if(!$(this).hasClass('false')){
} 
```

我仍然不知道为什么这是有效的，而我以前的代码却没有......但它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:16:05.113

我认为bidoron的想法是对的，你只需要做更多的事情来让它发挥作用。

拆分你的初始化。每页一次，每次交互一次。

使用带有 CSS 选择器的 'on' 在页面加载时注册以接收所有点击事件：

```
$("body").on('click', "#rightNav:not(.false)", function(event) {
    ...
}); 
```

对所有点击事件重复此操作。由于您只注册一次，因此没有重复的事件分派。当您在页面上可能有多个相同项目时，这也非常有用。他们都“只是工作”，没有任何簿记。这比在精确元素上注册要慢一点，但除非您使用 Javascript 编写游戏，否则您永远不会注意到其中的差异。但是，您的程序员同事会立即注意到生活质量的提高。

# google-bigquery - 在大查询中跳过一致性检查

> ID：12511692
> 
> 赞同：0
> 
> 时间：2012-09-20T11:29:48.197
> 
> 标签：google-bigquery

即使收到的数据少于预期的列数，是否有任何方法可以插入记录？我经常收到以下消息。

```
Too few columns: expected 24 column(s) but got 22 column(s) 
```

如果我使用 max_bad_record 选项忽略此类记录，则会丢失数据。我希望看到一个选项，如果需要，它会通过添加额外的分隔符来强制插入记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:54:45.740

将数据预处理为正确的格式；如果您可以使用 perl、sed 或其他什么，则取决于您的平台。

如果 bigquery 不会抱怨太多字段，也许您可​​以简单地在所有记录上添加额外的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:29:02.840

正如 Michael Sheldon 在下面提到的，如果您指定 allowJaggedRows，那么列太少的行对于所有剩余的列都将变为 NULL。但是，如果您在行中间缺少列，BigQuery 不知道缺少哪一列，并且如果类型不匹配，您将收到该行的错误。

有一些关于将所有有错误的行添加到单独的表中的讨论，以便您可以处理它们并将它们附加到原始表中。如果您觉得这很有用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T20:11:43.203

是的，您现在可以使用`allowJaggedRows`作业负载配置中的选项来执行此操作。此选项将导致加载“接受缺少尾随可选列的行。缺少的值被视为空值。” 有关所有作业配置选项的完整列表，请参阅[BigQuery 作业参考](https://developers.google.com/bigquery/docs/reference/v2/jobs)。

此选项可通过以下方式在 bq 命令行工具上使用：创建和加载新表时`bq load --allow_jagged_rows`，在[BigQuery UI中的“高级选项”下可用。](http://www.google.com)

# mongodb - Mongoid：未初始化的常量 Mongo (NameError)

> ID：12511699
> 
> 赞同：1
> 
> 时间：2012-09-20T11:30:12.130
> 
> 标签：mongodb, mongoid

我有一个我正在研究的图书馆已经离开了一段时间，当我回去工作时，它仍然很好，但是当我更新 gems: mongoid from `2.4.5`to`3.0.6`并且还更新了 mongo 和 bson_ext from `1.6.0`to`1.7.0`以及运行我的 rspec 时我得到错误

`<top (required)>': uninitialized constant Mongo (NameError)`从

```
Mongoid.configure do |config|
  config.master = Mongo::Connection.new.db("db_test")
end 
```

我有： ruby​​ 1.9.3p125 mongodb 2.0.2-x86_64

这个有同样的问题 [Mongoid 给出了未初始化的常量 Mongo](https://stackoverflow.com/questions/12188219/mongoid-gives-uninitialized-constant-mongo) 但该解决方案对我不起作用。

添加`require "mongo"`我的会产生不同的错误：

`spec_helper.rb:11:in 'block in <top (required)>': undefined method 'master=' for Mongoid::Config:Module (NoMethodError)`

**编辑** 我仍然使用 3.x，这就是他们现在进行连接的方式

```
Mongoid.configure do |config|
  config.connect_to("db_test")
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:41:37.803

Mongoid 3.x 不再使用 mongo gem，它使用了由 Mongoid 团队开发的名为 moped 的驱动程序。

如果您想坚持使用官方 10gen 驱动程序，您需要更新您的 Gemfile 以指定您要坚持使用 Mongoid 2.x：

```
gem "mongoid", "~> 2.0" 
```

# php - #! 是什么意思？意思是在 PHP 脚本中的路径之前？

> ID：12511700
> 
> 赞同：3
> 
> 时间：2012-09-20T11:30:13.300
> 
> 标签：php

试图学习 PHP 和一个更有经验的开发人员对我的 PHP 脚本进行了一些修改，但我没有得到一个 opp 来询问“#！”是什么意思。在我的 PHP 脚本中的路径旁边？它位于我正在处理的 PHP 文件的最顶部：

#!/opt/local/bin/php

任何帮助/方向将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:33:48.987

这是一种告诉 Linux 使用`/opt/local/bin/php`. 如果您将 PHP 作为 apache 的插件运行，您将使用`<?php ?>`标签来识别 PHP 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:34:39.053

维基百科解释得很简单：[Shebang (unix)](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

> 在类 Unix 操作系统下，当带有 shebang 的脚本作为程序运行时，程序加载器将脚本初始行的其余部分解析为解释器指令；而是运行指定的解释器程序，将尝试运行脚本时最初使用的路径作为参数传递给它。 [11] 例如，如果脚本以路径“path/to/script”命名，并且它以以下行开头：
> 
> `#!/bin/sh`
> 
> 然后程序加载器被指示运行程序“/bin/sh”（通常这是 Bourne shell 或兼容的 shell），将“path/to/script”作为第一个参数传递。shebang 行通常被解释器忽略，因为“#”字符是许多脚本语言中的注释标记；一些不使用井号开始注释的语言解释器（例如 Scheme）仍然可能会忽略 shebang 行以识别其用途。 [12]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T11:33:57.060

它被称为 Shebang 参见[Wikipedia](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

> 在类 Unix 操作系统下，当带有 shebang 的脚本作为程序运行时，程序加载器将脚本初始行的其余部分解析为解释器指令；而是运行指定的解释器程序，将尝试运行脚本时最初使用的路径作为参数传递给它。 [11]

# c# - 分类或关键字匹配自然语言字符串或短语

> ID：12511701
> 
> 赞同：9
> 
> 时间：2012-09-20T11:30:20.833
> 
> 标签：c#, machine-learning, nlp, artificial-intelligence, match

这是我在 StackOverflow 上的第一篇文章，如果缺少正确的信息，我们深表歉意。

设想。

我正在从 Google Weather API 转移到 BOM（澳大利亚）天气服务。我已经设法使用流式阅读器等很好地从 BOM 获取天气数据，但我坚持的是与每日预报相匹配的图像图标。

我对旧的 Google Weather API 所做的事情非常残酷，但却成功了。Google Weather API 只给出了几种不同类型的预测，我可以将它们组合成一个字符串，然后我可以在 imageURL 中使用这些预测。

我使用 Google Weather API 所做的示例...

**imageDay1.ImageUrl = "图像/天气/" + lbWeatherDay1Cond.Text.Replace(" ", string.Empty) + ".png";**

> “大部分阳光” = mostsunny.png
> 
> “晴天”=晴天.png
> 
> “下雨的机会” = chanceofrain.png
> 
> “阵雨”=阵雨.png
> 
> “部分多云” = 部分多云.png

每日预测有 15 种不同的可能选项。

我现在和 BOM（澳大利亚气象局）遇到的问题是……

> 可能的早晨淋浴
> 
> 淋浴或两个，稍后清理
> 
> 还有成千上万……没有标准。

我希望这里有一些伟大的思想可以从这个字符串中的关键字创建一个字符串？像“Showers.png”的“Showers”之类的东西，或者更复杂的东西，将“Chance of Showers”识别为“Chanceshowers.jpg”，同时将“Shower or two”保留为“Showers.png”。

我很容易接受任何想法或解决方案（希望在 c# 中）。只要它非常轻量级（必须为 5 天的预测重复该过程）并且几乎可以捕捉任何场景......

在这个时间点，我继续使用 String.Replace，在 String.Replace 之后，在 String.Replace 选项之后.... 现在可以，但我不能像这样将它投入生产。

大家干杯！

特伦特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:42:35.127

我在评论中注意到您正在尝试正则表达式查找表，这可能足以解决问题。但是，我将扩展 Adriano 提到的关于更强大的贝叶斯解决方案的内容。

这是一个与机器学习和人工智能相关的问题。它涉及一些自然语言处理，例如 Google 如何尝试解释用户的要求，或者邮件垃圾邮件过滤器的工作方式。

Sebastian Thrun 在以下视频中描述了一个简单而有趣的系统，这些视频是在线课程的一部分。它开始描述一种基本方法，通过该方法算法可以学习将一组单词（例如来自电子邮件）分类为“垃圾邮件”或“非垃圾邮件”。

（大部分视频都很短。）

1.  [垃圾邮件检测](http://youtu.be/wMMGexgmES4)-[测验答案](http://youtu.be/fPkxtmxRt5k)
2.  [垃圾邮件的概率](http://youtu.be/Diqx3Z20YWc)-[测验答案](http://youtu.be/WFE-dmEJZF8)
3.  [最大似然](http://youtu.be/QBlERVSlFx4)-[测验答案](http://youtu.be/4q4Tk-4Long)
4.  [与贝叶斯网络的关系](http://youtu.be/MvwZNmJQIJw)-[测验答案](http://youtu.be/-Pms2FiJQIA)
5.  [分类测验](http://youtu.be/2BFCqec6n04)-[测验答案](http://youtu.be/lQe4iNP6HDA)
6.  [分类 2 测验](http://youtu.be/qVdxj8XOB00)-[测验答案](http://youtu.be/eSbURIQ6pSQ)
7.  [分类 3 测验，一个人为的例子](http://youtu.be/dfVAnFFxFP4)
8.  [测验答案和拉普拉斯平滑](http://youtu.be/0BpC-cLDCIE)-[测验答案](http://youtu.be/2sKSZHkQPrc)
9.  [平滑分类测验](http://youtu.be/2Ar6jFKZhUM)-[测验答案](http://youtu.be/DjvGl1qRVdE)
10.  [最终测验](http://youtu.be/RJAFdBfGOrY)-[测验答案](http://youtu.be/oh4uc-8O6Pc)

这种贝叶斯方法对动态输入具有鲁棒性，并且学习速度相当快。然后，在消耗了足够的训练数据后，您只需要保存一个概率查找表并在运行时进行一系列算术计算。

有了这个基础，您可以应用相同的方法来处理多个分类，例如每个天气图像一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:59:47.447

如果您已经在捕获网页，您不能只捕获他们放入图片的片段并以这种方式获取图像吗？如果有“部分晴天”的明文，您也可以捕获该分区并使用您自己的图片。仅仅为了刮取天气的贝叶斯网络听起来非常痛苦。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-20T11:37:08.223

```
$api_string = "Mostly sunny"; 
$image = "default.png";

switch($api_string)
{
    case "Mostly sunny":
        $image = "mostlysunny.png";
    break;
    case "showers":
        $image = "showers.png"
    break;
} 
```

ETC

# c++ - 使用迭代函数调用初始化 std::vector

> ID：12511711
> 
> 赞同：27
> 
> 时间：2012-09-20T11:30:52.597
> 
> 标签：c++, c++11, iterator, initialization, stdvector

在许多语言中，有一些生成器可以帮助初始化集合。在 C++ 中，如果想要统一初始化一个向量，可以这样写：

```
std::vector<int> vec(10, 42); // get 10 elements, each equals 42 
```

如果想即时生成不同的值怎么办？例如，用 10 个随机值，或者从 0 到 9 的连续数字对其进行初始化？这种语法会很方便，但在 C++11**中不起作用：**

```
int cnt = 0;
std::vector<int> vec(10, [&cnt]()->int { return cnt++;}); 
```

有没有一种通过迭代函数调用来初始化集合的好方法？我目前使用这种丑陋的模式（不比循环更具可读性/短）：

```
std::vector<int> vec;
int cnt = 0;
std::generate_n(std::back_inserter(vec), 10, [&cnt]()->int { return cnt++;}); 
```

有一件事会有所帮助，它可以解释第一个构造函数的缺失。我可以想象一个迭代器，它接受一个函数和调用次数，所以构造函数

```
vector ( InputIterator first, InputIterator last); 
```

将适用。但是我在标准库中没有找到类似的东西。我错过了吗？第一个构造函数没有达到标准还有其他原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T11:53:00.247

可悲的是，没有标准的设施可以做到这一点。

对于您的具体示例，您可以像这样使用 Boost.Iterator `counting_iterator`：

```
std::vector<int> v(boost::counting_iterator<int>(0),
    boost::counting_iterator<int>(10)); 
```

甚至像这样使用 Boost.Range：

```
auto v(boost::copy_range<std::vector<int>>(boost::irange(0,10))); 
```

（`copy_range`基本上只是`return std::vector<int>(begin(range), end(range))`并且是对仅支持具有两个迭代器的范围构造的现有容器采用全范围构造的好方法。）

* * *

现在，对于具有生成器函数（如 ）的通用情况`std::rand`，有[`function_input_iterator`](http://www.boost.org/libs/iterator/doc/function_input_iterator.html). 当递增时，它调用生成器并保存结果，然后在取消引用时返回。

```
#include <vector>
#include <iostream>
#include <cmath>
#include <boost/iterator/function_input_iterator.hpp>

int main(){
  std::vector<int> v(boost::make_function_input_iterator(std::rand, 0),
      boost::make_function_input_iterator(std::rand,10));
  for(auto e : v)
    std::cout << e << " ";
} 
```

[活生生的例子。](http://liveworkspace.org/code/967ad207e12447ef7927eac35a0ed8a7)

可悲的是，由于`function_input_iterator`不使用 Boost.ResultOf，因此您需要一个函数指针或*具有嵌套`result_type`*的函数对象类型。Lambdas，无论出于何种原因，都没有。您*可以*将 lambda 传递给一个`std::function`（或`boost::function`）对象，该对象定义了它。[这是一个例子`std::function`](http://liveworkspace.org/code/7fcea3828807ecab4f391447b6007b45)。只能希望 Boost.Iterator 有朝一日会使用 Boost.ResultOf，`decltype`如果`BOOST_RESULT_OF_USE_DECLTYPE`已定义，它将使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T11:52:10.497

世界太大了，C++ 无法为所有事情提供解决方案。然而，C++ 并不想成为一个巨大的超市，里面装满了满足各种口味的即食食品。相反，它是一个设备齐全的小型厨房，C++ Master Chef 可以在其中烹制任何*您*想要的解决方案。

这是序列生成器的一个愚蠢且非常粗略的示例：

```
#include <iterator>

struct sequence_iterator : std::iterator<std::input_iterator_tag, int>
{
    sequence_iterator() : singular(true) { }
    sequence_iterator(int a, int b) : singular(false) start(a), end(b) { }
    bool singular;
    int start;
    int end;

    int operator*() { return start; }
    void operator++() { ++start; }

    bool operator==(sequence_iterator const & rhs) const
    {
        return (start == end) == rhs.singular;
    }
    bool operator!=(sequence_iterator const & rhs) const
    {
        return !operator==(rhs);
    }
}; 
```

现在你可以说：

```
std::vector<int> v(sequence_iterator(1,10), sequence_iterator()); 
```

同样，您可以编写一个更通用的小工具，“调用给定的函子给定次数”等（例如，通过模板复制获取一个函数对象，并将计数器用作重复计数器；取消引用调用函子）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T16:44:05.493

如果您使用的编译器支持您在问题中使用的 lambda，那么很有可能它还包括`std::iota`，这至少使计数情况更清晰：

```
std::vector <int> vec(10);
std::iota(begin(vec), end(vec), 0); 
```

对于这种情况（我认为还有很多其他情况），我们真的更喜欢`iota_n`这样：

```
namespace stdx {
template <class FwdIt, class T>
void iota_n(FwdIt b, size_t count, T val = T()) {
    for ( ; count; --count, ++b, ++val)
        *b = val;
}
} 
```

其中，对于您的情况，您可以使用：

```
std::vector<int> vec;

stdx::iota_n(std::back_inserter(vec), 10); 
```

至于为什么它没有包含在标准库中，我真的无法猜测。我想这可以被视为支持范围的论据，因此该算法将采用一个范围，并且我们有一种简单的方法可以从开始/结束对或开始/计数对创建范围。不过，我不确定我是否完全同意这一点——范围在某些情况下似乎确实运作良好，但在其他情况下，它们几乎没有意义。我不确定如果没有更多的工作，我们的答案是否真的比一对迭代器好得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T21:41:02.953

没有人提到[boost::assign](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html#operator+=)，所以我在这里介绍一下：

**例子**

```
#include <iostream>
#include <vector>
#include <boost/assign/std/vector.hpp> 
#include <cstdlib>

int main()
{
    std::vector<int> v1;
    std::vector<int> v2;
    boost::assign::push_back(v1).repeat_fun(9, &rand);
    int cnt = 0;
    boost::assign::push_back(v2).repeat_fun(10, [&cnt]()->int { return cnt++;});
    for (auto i : v1)
    {
        std::cout << i << ' ';
    }
    std::cout << std::endl;
    for (auto i : v2)
    {
        std::cout << i << ' ';
    }
} 
```

**输出**

> 41 18467 6334 26500 19169 15724 11478 29358 26962
> 0 1 2 3 4 5 6 7 8 9

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:48:20.573

您可以使用 SFINAE 来形成一个表：

```
#include <iostream>
#include <vector>

template <int n> struct coeff    { static int const value = coeff<n-1>::value + 3; };
template <>      struct coeff<0> { static int const value = 0; };

template<int... values> struct c1 {static int const value[sizeof...(values)];};
template<int... values> int const c1<values...>::value[] = {values...};

template<int n, int... values> struct c2 : c2< n-1, coeff<n-1>::value, values...> {};
template<int... values> struct c2< 0, values... > : c1<values...> {};

template<int n> struct table : c2< n > {
    static std::vector< unsigned int > FormTable()
    {
        return std::vector< unsigned int >( & c2< n >::value[0], & c2< n >::value[n] );
    }
};

int main()
{
    const auto myTable = table< 20 >::FormTable();

    for ( const auto & it : myTable )
    {
        std::cout<< it << std::endl;
    }
} 
```

# ruby - 无法通过 RVM 在 Mac 10.8 上安装 ruby 1.8.7

> ID：12511717
> 
> 赞同：2
> 
> 时间：2012-09-20T11:31:18.557
> 
> 标签：ruby, rvm, osx-mountain-lion, homebrew, ruby-1.8.7

我无法在我的 Mac 10.8.2 上安装 ruby​​ ree 或 ruby​​ 1.8.7。

我这样做了：

```
$ brew install libksba
$ brew update
$ brew install autoconf automake
$ brew tap homebrew/dupes
$ brew install autoconf automake apple-gcc42 
```

然后我尝试安装 ruby​​ 1.8.7 但我不能

```
$ rvm install 1.8.7
No binary rubies available for: osx/10.8.2/x86_64/ruby-1.8.7-p370.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Building 'ruby-1.8.7-p370' using clang - but it's not (fully) supported, expect errors.
Installing Ruby from source to: /Users/serg/.rvm/rubies/ruby-1.8.7-p370, this may take a while depending on your cpu(s)...
ruby-1.8.7-p370 - #downloading ruby-1.8.7-p370, this may take a while depending on your connection...
ruby-1.8.7-p370 - #extracting ruby-1.8.7-p370 to /Users/serg/.rvm/src/ruby-1.8.7-p370
ruby-1.8.7-p370 - #extracted to /Users/serg/.rvm/src/ruby-1.8.7-p370
Applying patch /Users/serg/.rvm/patches/ruby/1.8.7/stdout-rouge-fix.patch
Applying patch /Users/serg/.rvm/patches/ruby/1.8.7/no_sslv2.diff
ruby-1.8.7-p370 - #configuring
ruby-1.8.7-p370 - #compiling
Error running 'make', please read /Users/serg/.rvm/log/ruby-1.8.7-p370/make.log
There has been an error while running make. Halting the installation.
Ruby 'ruby-1.8.7-p370' was built using clang - but it's not (fully) supported, expect errors.
Please be aware that you just installed a ruby that requires        2 patches just to be compiled on up to date linux system.
This may have known and unaccounted for security vulnerabilities.
Please consider upgrading to Ruby 1.9.3-194 which will have all of the latest security patches.
MacBook-Pro-Serg-L-6:smartlearn serg$ rvm remove 1.8.7
Removing /Users/serg/.rvm/src/ruby-1.8.7-p370...
/Users/serg/.rvm/rubies/ruby-1.8.7-p370 has already been removed.
Removing ruby-1.8.7-p370 aliases...
Removing ruby-1.8.7-p370 wrappers...
Removing ruby-1.8.7-p370 environments...
Removing ruby-1.8.7-p370 binaries... 
```

错误：

```
Error running 'make', please read /Users/serg/.rvm/log/ruby-1.8.7-p370/make.log
There has been an error while running make. Halting the installation. 
```

来自 make.log 的日志在[这里](http://pastebin.com/gm3aRCmr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:50:49.500

看起来 rvm 没有找到`apple-gcc42`与 brew 一起安装的。

确保`gcc-4.2`可以通过 使用`PATH`，或者使用它的路径运行安装：

```
rvm reinstall 1.8.7 --with-gcc=/path/to/brew/apple-gcc42/gcc-4.2 
```

* * *

EDIT1：刚刚检查过，RVM 也会搜索，`gcc-apple-4.2`所以如果它打开`PATH`，RVM 将自动使用它——这在 RVM 1.16.8 中更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:16:35.200

好的，我找到了解决方案。

1.  删除 Xcode。
2.  从[这里](https://github.com/kennethreitz/osx-gcc-installer)我下载了 Mountain Lion 的包。
3.  安装下载的 osx-gcc-installer。
4.  安装 Xcode（和命令行工具）。

就这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:17:37.823

我尝试了 GCC 包，安装/卸载 Xcode 等，但我认为有效的是：

```
rvm get stable 
```

（响应包括另一个命令：

```
sudo sed -i'' -e "s#rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include')#rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include')#" /etc/rvmrc 
```

)

我很确定这是导致能够成功的原因：

```
rvm install 1.9.3 
```

# java - 菜单抛出异常 - android.view.WindowManager$BadTokenException：无法添加窗口 - 令牌 null 不适用于应用程序

> ID：12511725
> 
> 赞同：0
> 
> 时间：2012-09-20T11:31:58.043
> 
> 标签：java, android, android-menu

您好我正在尝试从菜单项中调用一个函数。但我得到了这个例外。android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

这是我的代码..

```
public boolean onCreateOptionsMenu(Menu menu) {

        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.layout.menu1, menu);
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {

        switch(item.getItemId())
        {
        case R.id.write :
            writeToTag();
            return true;

        case R.id.exit :
            exitApplication();
            return true;

        default :
            return super.onMenuItemSelected(featureId, item);
        }

    }

    private void exitApplication() {

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(getApplicationContext());
        alertDialog.setMessage("Do You Want To Exit..?")
        .setPositiveButton("Yes",new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

                NFCTagWriterActivity.this.finish();
            }
        }).setNegativeButton("No",new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                onStart();

            }
        }).show();

        AlertDialog alert = alertDialog.create();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:34:34.330

您不能使用应用程序上下文创建 AlertDialog。您需要使用活动上下文。在你的情况下`this`是合适的。

# salesforce - Salesforce：防止在主记录相关列表中查找字段的验证规则

> ID：12511729
> 
> 赞同：1
> 
> 时间：2012-09-20T11:32:17.510
> 
> 标签：salesforce

我有一个要求，我需要在工作执行屏幕中隐藏案例编号或进行一些验证，以便用户无法更改案例编号。对于执行的编辑工作，我可以应用所述验证。

如何在工作执行屏幕中隐藏或放置一些验证以进行保存？我附上两张截图，以便您可以清楚地看到图片。

![案例画面](../Images/a1d6aea0cd0a4f888129bdfc5502c211.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:38:14.680

如果您的意思是标准布局页面，我会为特定配置文件创建一个额外的布局，然后在此布局中将字段属性设置为只读。所以用户不能再编辑这个字段了。

# html - 在 Eclipse 中创建动态 Web 项目

> ID：12511731
> 
> 赞同：-2
> 
> 时间：2012-09-20T11:32:20.523
> 
> 标签：html

谁能帮助我了解如何在 Eclipse 中使用 HTML 5 创建动态 Web 项目？我正在寻找使用 HTML 5 作为用户界面、Spring MVC 和 Hibernate 的简单登录应用程序。

任何链接或建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:29:51.667

从[Spring 入门](http://www.springsource.org/get-started)页面开始。如果您还没有，我建议您下载[Spring Tool Suite](http://www.springsource.org/sts)，或者至少下载 eclipse 插件。有很多示例和教程可以帮助您入门。至于 HTML5 部分，只需确保您为视图层选择的模板语言支持它，但最终这将取决于您是否遵循 HTML5 规范。

# asp.net-mvc - 复杂模型上的 ASP.NET MVC 验证

> ID：12511733
> 
> 赞同：0
> 
> 时间：2012-09-20T11:32:22.067
> 
> 标签：asp.net-mvc

我在验证视图上的表单时遇到了困难。

我有一个控制器，`UpdateModel(object);`因此不确定如何构建验证。

我已经`[Required(ErrorMessage = "Please enter a contact name")]`为所有强制属性添加了。

我如何让这一切正常工作？因为我的控制器正在做一些复杂的事情。下面是控制器代码：

```
 [HttpPost]
    public ActionResult PersistListing()
    {
        var listingView = new MaintainListingView();

        if (!string.IsNullOrEmpty(Request["Listing.Guid"]))
        {
            var dbListing = _service.GetByGuid<Listing>(Guid.Parse(Request["Listing.Guid"]));

            if (dbListing != null)
            {
                listingView.Listing = dbListing;
            }
        }

        UpdateModel(listingView);    
        RebindTranslationsDictionary(listingView.Listing);
        listingView.Listing.CategoryId = _service.GetByGuid<ListingCategory>(listingView.SelectedListingCategoryGuid).Id;
        _service.PersistEntity(listingView.Listing);
        return RedirectToAction("Edit", new { id = listingView.Listing.Guid });

    } 
```

当我取消注释基本模型上的必需属性时，当我尝试更新模型（）时出现错误；

任何人都可以快速解决这个问题吗？

**编辑**：我正在使用我正在使用`Html.TextBoxFor()`在视图上创建控件。

添加了 TryUpdateModel 但不确定如何使用填充的错误消息重定向用户：

```
 if (TryUpdateModel(listingView))
        {

            RebindTranslationsDictionary(listingView.Listing);

            listingView.Listing.CategoryId =
                _service.GetByGuid<ListingCategory>(listingView.SelectedListingCategoryGuid).Id;

            _service.PersistEntity(listingView.Listing); //save the ting

            return RedirectToAction("Edit", new {id = listingView.Listing.Guid});
          } 
```

我的视图中是否需要 EditForModel 标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:34:58.387

您可以使用`TryUpdateModel`代替，`UpdateModel`因为它不会引发异常并让您知道验证是否失败：

```
if (!TryUpdateModel(listingView))
{
    // there were validation errors => redisplay the view 
    // so that the user can fix those errors
    return View(listingView);
}  

// at this stage you know that validation has passed 
// and you could process the model ... 
```

# javascript - jQuery show() 函数不起作用

> ID：12511735
> 
> 赞同：0
> 
> 时间：2012-09-20T11:32:40.477
> 
> 标签：javascript, jquery, jquery-effects

我有以下 JQuery 代码：

```
jQuery(document).ready(function($) {
        var retrievedList = [ {
            "id" : "one",
            "content" : "toto"
        }, {
            "id" : "two",
            "content" : "titi"
        }, {
            "id" : "three",
            "content" : "tutu"
        } ];
        $("#clickMe").click(function(evt){
            $.each(retrievedList, function(i, v) {
                if(!$('div#list> span#' + v.id).length) {
                    $('<span />').prop('id', v.id).text(v.content).appendTo('#list').show(8000);
                }
            });
            return false;
        });
    }); 
```

我很惊讶地注意到 show 函数调用不适`span`用于我创建的。

谁能告诉我为什么以及如何解决这个问题？

编辑：这是html：

```
<div id="list">
<span id="one">toto</span> <span id="two">titi</span>
</div>
<a href="" id="clickMe">clickMe</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:35:45.670

而不是这个：

```
$('<span />').prop('id', v.id).text(v.content).appendTo('#list').show(8000); 
```

尝试使用这个：

```
var span = $('<span />').prop('id', v.id).text(v.content).css('display', 'none');
$('#list').append(span);
$('#'+v.id).show(8000); 
```

# ios - iOS，用下载的图片替换图片

> ID：12511736
> 
> 赞同：0
> 
> 时间：2012-09-20T11:32:40.943
> 
> 标签：ios

我的应用程序将与其中的图像一起发布，但我可能需要稍后下载其他图像并用下载的图像替换旧图像。

所以问题是，是否可以用下载的图像替换应用程序内捆绑的图像？

如果是的话，你能推荐一些资源来搜索吗？如果不是，您可以建议其他方式来做之前的事情吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:39:52.460

据我所知，您无法以编程方式更改 MainBundle 中的文件。但是，您可以借助数据库，动态更改数据库内容。您可以使用“blob”将图像保存到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:44:41.817

仅将捆绑包中的图像用作默认设置。您可以创建自己的`[UIImage imageNamed:]`方法版本，例如`[UIImage myImageNamed:]`，它会首先查看包含下载图像的文件夹，如果在那里找不到图像，它将使用捆绑包中的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:45:27.997

您应该做的是将捆绑包中的图像复制或链接到应用程序中的“应用程序支持”，将它们标记为没有 iCloud 备份，然后使用它们或它们的替代品。如果您使用文件夹，那么如果它不存在，您就知道这是第一次启动 - 或者只是测试一个图像。

# linq - 将这一系列 foreach 循环转换为 LINQ 表达式

> ID：12511741
> 
> 赞同：1
> 
> 时间：2012-09-20T11:32:56.713
> 
> 标签：linq

我有一个通用方法，它使用一系列有效的 foreach 循环将页面上的所有 html 控件添加到通用列表中。是否可以将其转换为 LINQ 表达式？

```
private List<T> GetControls<T>() where T : HtmlControl
         {
            List<T> c = new List<T>();

            foreach (HtmlControl c1 in Controls)
            {
                foreach (HtmlControl c2 in c1.Controls)
                {
                    if (c2.GetType() == typeof(HtmlForm))
                    {
                        foreach (Control c3 in c2.Controls)
                        {
                            if (c3.GetType() == typeof(ContentPlaceHolder))
                            {
                                foreach (HtmlControl c4 in c3.Controls)
                                {
                                    if (c4.GetType() == typeof(T))
                                    {
                                        c.Add((T)c4);
                                    }
                                    if (c4.GetType() == typeof(PlaceHolder))
                                    {
                                        foreach (HtmlControl c5 in c4.Controls)
                                        {
                                            if (c5.GetType() == typeof(T))
                                            {
                                                c.Add((T)c5);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return c;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:47:10.163

这应该这样做：

```
List<T> c = this.Controls.Cast<Control>()
    .SelectMany(c1 => c1.Controls.Cast<Control>())
    .OfType<HtmlForm>()
    .SelectMany(c2 => c2.Controls.Cast<Control>())
    .OfType<ContentPlaceHolder>()
    .SelectMany(c3 => c3.Controls.Cast<Control>())
    .SelectMany(c4 =>
        {
            if (c4 is T)
                return new[] { (T)c4 };
            if (c4 is PlaceHolder)
                return c4.Controls.Cast<Control>().OfType<T>();
            return Enumerable.Empty<T>();
        })
    .ToList(); 
```

但是请注意，我在`is`这里使用了类型比较而不是类型比较。这是故意的，因为这也是`OfType`LINQ 方法在内部使用的。

如果您确定要精确类型而不是通过`is`比较的对象，则必须实现自己的`OfType`（或仅使用`.Where(x => x.GetType == typeof(whatever))`）。

（另请注意，我使用`Control`了代替`HtmlControl`，以防您的某些`HtmlControl`s 包含常规`Control`s。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:36:38.260

你可以尝试这样的事情：

```
 private List<T> GetControls<T>() where T : HtmlControl
    {
        List<T> c = new List<T>();

        foreach (HtmlControl c4 in from HtmlControl c1 in Controls
                                   from HtmlControl c2 in c1.Controls
                                   where c2.GetType() == typeof (HtmlForm)
                                   from Control c3 in c2.Controls
                                   where c3.GetType() == typeof (ContentPlaceHolder)
                                   from HtmlControl c4 in c3.Controls
                                   select c4)
        {
            if (c4.GetType() == typeof(T))
            {
                c.Add((T)c4);
            }
            if (c4.GetType() == typeof(PlaceHolder))
            {
                c.AddRange(from HtmlControl c5 in c4.Controls where c5.GetType() == typeof (T) select (T) c5);
            }
        }
        return c;
    } 
```

虽然我不确定它是否更优雅......

# android - 拍照而不将照片保存到画廊？

> ID：12511742
> 
> 赞同：3
> 
> 时间：2012-09-20T11:33:02.517
> 
> 标签：android, android-camera, android-gallery

我的活动中有一个方法可以启动 image_capture 事件

```
 public static void takePhoto(boolean fullSize) {

    if(isIntentAvailable(mActivity.getApplicationContext(), MediaStore.ACTION_IMAGE_CAPTURE)){
        mActivity.startActivityForResult(new Intent(
                MediaStore.ACTION_IMAGE_CAPTURE), CAPTURE_IMAGE);
    }
    else{
        Toast.makeText(mActivity.getApplicationContext(), "Geen camera beschikbaar", Toast.LENGTH_SHORT).show();
    }
}

public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

当用户拍照时，我想从照片中获取字节并广播这些字节。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_CANCELED) {

        case CAPTURE_IMAGE:
                byte[] photoBytes = null;

                if (data != null) {
                    Bitmap b = (Bitmap) data.getExtras().get("data");
                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    b.compress(Bitmap.CompressFormat.PNG, 100, stream);
                    photoBytes = stream.toByteArray();

                    Toast.makeText(getApplicationContext(), "Foto wordt geupload..", Toast.LENGTH_SHORT).show();
                    Log.d("ShowScreenActivity", Integer.toString(photoBytes.length));

                    // Send bytearray back to server
                    BroadcastSender.sendPicture(photoBytes);
                }
                else
                    Log.d("ShowScreenActivity", "Data in intent is empty");

            break;
        }
    }
} 
```

一切正常，但图像也存储在设备的图库中。
我该如何防止这种情况或我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:36:27.587

您的图像将保存到图库，因为这是默认行为。要覆盖它，您需要指定一个不同的目标文件夹来保存您的图像（在调用相机的意图中），并在该文件夹中放置一个 .nomedia 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:57:11.987

您是否将图片临时存储在 BroadcastSender 的 sendPicture 方法的目录中？

如果图像存储在 MediaScanner 索引的目录中，它将自动添加到图库中。

# networking - 通过 URL 访问服务器

> ID：12511743
> 
> 赞同：0
> 
> 时间：2012-09-20T11:33:30.693
> 
> 标签：networking, ip

我试图通过我的浏览器访问我网络中的服务器，如下所示：

```
http://192.168.1.201/ 
```

但它阻止了我，因为它需要登录。

如何在此 URL 中包含我的凭据？在这种情况下，我使用的是 IE。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:24:01.723

假设您的意思是网络服务器正在抛出登录提示，并且这是通过 HTTP 基本身份验证完成的，您可以通过以下方式在 URL 中提供用户名和密码`http://user:password@192.168.1.201/`

请注意，这种情况下的密码将以明文形式发送，任何在您的网络上监听的人都可以拦截它。

# java - 在 Java 中使用 MIME 自定义邮件标头

> ID：12511744
> 
> 赞同：6
> 
> 时间：2012-09-20T11:33:37.887
> 
> 标签：java, email, email-headers

我想在发送电子邮件时创建一个新的自定义标头，但是通过使用`setHeader()`和`addHeader()`方法我无法做到。

如何创建用户定义的`X-""`电子邮件标头？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T11:51:10.120

setHeader() 对我有用。在以下情况下，我将编码选项设置为邮件标题。

```
String mail_body = "<html><head></head><body><h1>Mail Body</h1><b>This is mail body of Test mail.</b></body></html>";
String encodingOptions = "text/html; charset=UTF-8";

MimeMessage message = new MimeMessage(session);
message.setContent("Hello", "text/plain");
message.setSubject(mail_subject);
message.setText(mail_body);
message.setHeader("Content-Type", encodingOptions);
message.setSentDate(new Date()); 
```

[您可以在使用https://support.google.com/mail/bin/answer.py?hl=en&answer=22454](https://support.google.com/mail/bin/answer.py?hl=en&answer=22454)接收电子邮件时查看邮件标题

示例程序。邮件.java

```
package com.test.mail;

import java.util.Date;
import java.util.Properties;
import javax.mail.Address;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.SendFailedException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class Mail {
    private String host = "smtp.gmail.com";

    private String mail_to = "xxxx@gmail.com";

    private String mail_from = "aaaa@abc.com";// using gmail server

    private String mail_subject = "Subject of this test mail";

    private String mail_body = "<html><head></head><body><h1>Mail Body</h1><b>This is mail body of Test mail.</b></body></html>";

    private String personalName = "xxx";

    private String encodingOptions = "text/html; charset=UTF-8";

    public void sendMail() throws SendFailedException {
        try {

            Properties props = new Properties();
            Authenticator auth = new Email_Autherticator();

            //props.put("mail.smtp.host", host);
            props.put("mail.smtp.host", host);
            props.put("mail.smtp.starttls.enable", "true");
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.port", "587");
            System.out.println(props);

            Session session = Session.getDefaultInstance(props, auth);

            MimeMessage message = new MimeMessage(session);
            message.setContent("Hello", "text/plain");
            message.setSubject(mail_subject);
            message.setText(mail_body);
            message.setHeader("Content-Type", encodingOptions);
            //message.setHeader(mail_head_name, mail_head_value);
            message.setSentDate(new Date());

            Address address = new InternetAddress(mail_from, personalName);
            message.setFrom(address);

            Address toaddress = new InternetAddress(mail_to);
            message.addRecipient(Message.RecipientType.TO, toaddress);

            System.out.println(message);

            Transport.send(message);
            System.out.println("Send Mail Ok!");
        } catch (Exception e) {
            e.printStackTrace();
        }
        // return flag;
    }

    public static void main(String args[]) {
        try {
            Mail mailObj = new Mail();
            mailObj.sendMail();
        } catch (Exception e) {

        }
    }
} 
```

Email_Autherticator.java

```
package com.test.mail;
import javax.mail.Authenticator;
import javax.mail.PasswordAuthentication;

public class Email_Autherticator extends Authenticator {
    String username = "froml@gmail.com";

    String password = "password";

    public Email_Autherticator() {
        super();
    }

    public Email_Autherticator(String user, String pwd) {
        super();
        username = user;
        password = pwd;
    }

    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(username, password);
    }
} 
```

# wso2 - 如何让 Wso2 ESB Eclipse 中的图形编辑器工作？

> ID：12511745
> 
> 赞同：0
> 
> 时间：2012-09-20T11:33:38.790
> 
> 标签：wso2, wso2esb, wso2carbon

我试图弄清楚如何打开 Wso2 ESB 的图形视图，如 Viraj 在博客中所述：http: [//sumuditha-viraj.blogspot.se/2012/05/introduction-to-wso2-developer-工作室.html](http://sumuditha-viraj.blogspot.se/2012/05/introduction-to-wso2-developer-studio.html)

我在 Developer Studio 的核心文档中找不到关于这些视图的任何提示，所以这是我最后的手段。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:28:13.180

1.  创建 ESB 配置项目

2.  右键单击创建的 ESB 配置项目并选择 New => Synapse Configuration。

3.  然后按照向导进行操作，它将创建一个 ESB 图并在新的 ESB 编辑器中打开。

4.  您可以在编辑器的源代码视图中查看源代码。

当您要导出生成的配置时，您需要创建一个 C-App 项目并添加从工件列表中选择创建的图形工件并通过 IDE 导出 C-App。

它将通过图形编辑器生成带有生成配置的 CAR 文件。

谢谢并恭祝安康，

哈沙娜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:21:09.013

第一个障碍是确保 virtualbox 运行的是 Wso2 Developer Studio 的正确版本，升级后它仍然无法工作。

图形视图似乎是基于 GMF 构建的，这意味着需要将 GMF (http://www.eclipse.org/projects/project.php?id=modeling.gmf) 作为 eclipse 的插件安装。

# sql-server-2008 - SQL Server 2008 中的 CTE：如何递归计算小计

> ID：12511746
> 
> 赞同：5
> 
> 时间：2012-09-20T11:33:43.417
> 
> 标签：sql-server-2008, recursion, add, aggregate, common-table-expression

我有一张表格，其中汽车的某些部分是分层相关的，而且我还需要在每一行中制造这些零件的成本。这是表格的简化：

```
parentId  Id description qty manufacturingCost costDescripcion
-------- --- ----------- --- ----------------- ---------------
NULL      1  Car          1  100               Assembly the car
NULL      2  Motorcycle   1  100               Assembly the motrocycle
 1       11  Wheel        4   20               Assembly the wheel
11      111  Rim          1   50               Manufacture the rim
11      112  Tire         1   60               Manufacture the tire
 1       12  Door+Window  4   30               Assembly the door and the window
12      121  Door         1   30               Manufacture the door
12      122  Window       2   10               Manufacture the window
 2       11  Wheel        2   15               Assembly the wheel 
```

我需要从“汽车”开始获取整个家谱，并显示每个分支的总数量和总成本。更好的解释：一辆车有 4 个轮子，每个轮子有 1 个轮辋和 1 个轮胎，所以我应该得到 1 Car, 4 Wheels, 4 Tires, 4 Rims。成本稍微复杂一点：组装汽车的成本为 100 美元，但我必须加上这个成本，即组装 4 个轮子 (4x20) 以及制造 4 个轮辋 (4x50) 和 4 个轮胎的成本（4x60），门窗也是如此。

这是预期的结果：

```
parentId  Id description qty manufacturingCost   recLevel
-------- --- ----------- --- -----------------   ---------------
NULL       1  Car          1 940 (100+4*130+4*80) 0
 1        11  Wheel        4 130 (20+50+60)       1
 1        12  Door+Window  4 80  (30+30+2*10)     1
12       121  Door         4 30                   2
12       122  Window       8 10                   2
11       111  Rim          4 50                   2
11       112  Tire         4 60                   2 
```

我可以使用递归函数或存储过程轻松实现这一点，但是对于更复杂的结构来说速度非常慢，所以我尝试使用通用表表达式来实现。但我没有找到计算成本的方法。我使用递归 CTE 从顶层开始向下，我得到数量的总和，但我应该从结构的内部到外部来总结成本，我该怎么做？

这是创建表的代码：

```
CREATE TABLE #Costs 
(
  parentId int, 
  Id int, 
  description varchar(50),
  qty int, 
  manufacturingCost int,
  costDescripcion varchar(150)
)

INSERT INTO #Costs VALUES (NULL , 1, 'Car', 1, 100, 'Assembly the car')
INSERT INTO #Costs VALUES (NULL , 2, 'Motorcycle', 1, 100, 'Assembly the motrocycle')
INSERT INTO #Costs VALUES (1 , 11, 'Wheel', 4, 20, 'Assembly the wheel')
INSERT INTO #Costs VALUES (11 , 111, 'Rim', 1, 50, 'Manufacture the rim')
INSERT INTO #Costs VALUES (11 , 112, 'Tire', 1, 60, 'Manufacture the tire')
INSERT INTO #Costs VALUES (1 , 12, 'Door+Window', 4, 30, 'Assembly the door and the window')
INSERT INTO #Costs VALUES (12 , 121, 'Door', 1, 30, 'Manufacture the door')
INSERT INTO #Costs VALUES (12 , 122, 'Window', 2, 10, 'Manufacture the window')
INSERT INTO #Costs VALUES (2 , 11, 'Wheel', 2, 15, 'Assembly the wheel') 
```

这是我写的 CTE：

```
with CTE(parentId, id, description, totalQty, manufacturingCost, recLevel)
as
(
  select c.parentId, c.id, c.description, c.qty, c.manufacturingCost, 0
  from #Costs c
  where c.id = 1

  union all

  select c.parentId, c.id, c.description, c.qty * ct.totalQty, c.manufacturingCost, ct.recLevel + 1
  from #Costs c
  inner join CTE ct on ct.id = c.parentId 
)
select * from CTE 
```

这是我得到的结果，正如你所看到的，不是预期的（没有增加成本）：

```
parentId  Id description qty manufacturingCost recLevel
-------- --- ----------- --- ----------------- ---------------
NULL       1  Car          1 100                0
 1        11  Wheel        4 20                 1
 1        12  Door+Window  4 30                 1
12       121  Door         4 30                 2
12       122  Window       8 10                 2
11       111  Rim          4 50                 2
11       112  Tire         4 60                 2 
```

是否可以使用 CTE 做我想做的事？如果是这样，我该怎么做？

非常感谢，

安团

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T11:49:16.077

你可以试试这样的

```
DECLARE @Table TABLE(
        parentId INT,
        Id INT,
        description VARCHAR(50),
        qty FLOAT,
        manufacturingCost FLOAT,
        costDescripcion VARCHAR(50)
)

INSERT INTO @Table SELECT NULL,1,'Car',1,100,'Assembly the car' 
INSERT INTO @Table SELECT NULL,2,'Motorcycle',1,100,'Assembly the motrocycle' 
INSERT INTO @Table SELECT 1,11,'Wheel',4,20,'Assembly the wheel' 
INSERT INTO @Table SELECT 11,111,'Rim',1,50,'Manufacture the rim' 
INSERT INTO @Table SELECT 11,112,'Tire',1,60,'Manufacture the tire' 
INSERT INTO @Table SELECT 1,12,'Door+Window',4,30,'Assembly the door and the window' 
INSERT INTO @Table SELECT 12,121,'Door',1,30,'Manufacture the door' 
INSERT INTO @Table SELECT 12,122,'Window',2,10,'Manufacture the window' 
INSERT INTO @Table SELECT 2,11,'Wheel',2,15,'Assembly the wheel'

;WITH Vals AS (
        SELECT  *,
                qty Level_Qty,
                CAST(id AS VARCHAR(MAX)) + '\' AS [LEVEL]
        FROM    @Table
        WHERE   parentId IS NULL
        UNION ALL
        SELECT  t.*,                
                p.qty * t.qty Level_Qty,
                CAST(p.[LEVEL] AS VARCHAR(MAX))  + CAST(t.id AS VARCHAR(MAX)) + '\' AS [LEVEL]
        FROM    @Table t INNER JOIN
                Vals p  ON  p.Id = t.parentId
)
SELECT  *,
        (SELECT SUM(Level_Qty * manufacturingCost) FROM Vals WHERE [Level] LIKE v.[LEVEL] + '%') / Level_Qty
FROM    Vals v
ORDER BY [LEVEL] 
```

## [SQL 小提琴示例](http://www.sqlfiddle.com/#!3/d41d8/4562/0)

# hibernate - 持久化上下文休眠

> ID：12511749
> 
> 赞同：0
> 
> 时间：2012-09-20T11:33:57.340
> 
> 标签：hibernate, jpa, persistence, jpa-2.0

我想知道这种情况的正确解决方案是什么。该方法在事务中运行。我删除了此方法的第一行，我将获得传递给持久异常的分离实体。我明白这个问题。该公司不在持久性环境中。下面的代码是唯一的解决方案吗？这是更好的方法吗？

```
@Override
public void delete(Company company) {
    company = companyDao.get(company.getId(), CompanyLoadParameter.LOAD_LANGUAGES);
    companyDao.delete(company);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:44:11.783

```
Session#createQuery("DELETE FROM " + Company.class.getName() +
    " WHERE " + Company.K_id "=?")
    .addParameter(0, CompanyLoadParameter.LOAD_LANGUAGES)
    .executeUpdate(); 
```

其中 Company.K_id 是主键的 Java 属性名称（作为字符串）。

```
public static final String K_id = "id"; 
```

我这样做是因为可以使用标准 IDE 工具重构 HQL，之后可能会继续工作。

HQL 上的 URL [https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/queryhql.html](https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/queryhql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:56:54.310

是的，**这是删除单个实体的正确方法**，据我所知，没有更好的方法。

如果您在使用 Eager fetch 时遇到问题，那么您应该重新考虑 JPA 实体的配置。

* * *

还有其他方法是使用**HQL DELETE**查询，但这有一个[问题](https://hibernate.onjira.com/browse/HHH-368)。删除操作不会级联到关联的集合。这是危险和丑陋的。

在**JPA 2.1**中，他们提到了批量 DELETE 查询，但他们没有提到使用 DELETE 查询删除单个实体的任何内容，我认为这一定是有原因的。

# css - HTML 和 CSS 页面大小的大小

> ID：12511750
> 
> 赞同：1
> 
> 时间：2012-09-20T11:34:05.817
> 
> 标签：css, html, size

找出特定网站的 HTML 和 CSS 的大小（以 kbs 为单位）的各种可能方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:45:57.327

我更喜欢使用[Firebug for Firefox](http://getfirebug.com/)中的 Net 面板（如下），但 Chhrome 中的开发工具也同样出色。

另一个不错的选择是Yahoo Developer Network 的[YSlow](http://developer.yahoo.com/yslow/)，它还将提供全面的链接建议以改善页面结果。

[Pingdom 的整页测试](http://tools.pingdom.com/fpt/)无需安装任何东西即可提供视觉效果。

所有这些工具都将显示“级联”，通常包括有关加载的资源是并行加载还是串行加载的信息（阻止后续资源的加载）。加载的各种类型的文件通常可以通过在图表上方显示“html”或“c​​ss”等来过滤。

Firebug 的 Net 选项卡中的页面加载：

![页面加载在 Firebug 的 Net 选项卡中。](../Images/5ad77ddedf79ef6ea15402c72e9ae3bc.png)

YSlow页面测试结果页面：

![Y慢页测试结果](../Images/d59147fabbcfd91cefa8d1f5146141db.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:36:15.057

我使用Chrome 中 Web 开发人员工具的[网络选项卡](https://developers.google.com/chrome-developer-tools/docs/network)`Ctrl`（ - `Shift`- `I`，然后选择网络）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:54:17.367

您还可以在下面的站点工具中找到网页文件大小和下载速度。 [http://www.websiteoptimization.com/services/analyze/](http://www.websiteoptimization.com/services/analyze/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T11:40:00.727

我会使用 Firebug。转到网页，打开 firebug (F12) 并转到 Net 选项卡。你得到了那里列出的网站提出的所有请求。在列表的底部你得到了所有请求的总和。顺便说一句，您应该在它之前清除浏览器缓存，因为在浏览器缓存命中期间可能会丢失一些请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T11:52:26.167

Opera 有一个“信息”面板，但它只为您提供请求的 HTML 文档的大小和所有内联元素（图像、CSS、JavaScript 等）的总大小。

# c# - 如何在显示进度/取消对话框之前实现 1 秒延迟？

> ID：12511751
> 
> 赞同：0
> 
> 时间：2012-09-20T11:34:19.397
> 
> 标签：c#, winforms, multithreading, async-await, c#-5.0

我正在尝试构建一个进度/取消表单以在我的 WinForms 应用程序中使用，该应用程序运行任何可等待的“操作”，同时为用户提供一些进度信息和取消操作的机会。

因为表单使用 显示`ShowDialog()`，所以它是一个模态表单，可以很好地禁用下面的表单 - 所以我不需要乱用禁用其他表单上的所有控件。

他们实现它的方式，我完全希望你撕成碎片:-)，是在`Form.Load`事件处理程序期间等待操作的结果，然后在操作完成后关闭表单（无论是因为它运行完成、被取消或引发异常）。

```
public partial class ProgressForm<T> : Form
{
    private CancellationTokenSource _cancellationTokenSource = new CancellationTokenSource();
    private Progress<string> _progress = new Progress<string>();
    private Func<IProgress<string>, CancellationToken, Task<T>> _operation = null;
    private Exception _exception = null;
    private T _result = default(T);

    public static T Execute(Func<IProgress<string>, CancellationToken, Task<T>> operation)
    {
        using (var progressForm = new ProgressForm<T>())
        {
            progressForm._operation = operation;

            progressForm.ShowDialog();

            if (progressForm._exception != null)
                throw progressForm._exception;
            else
                return progressForm._result;
        }
    }

    public ProgressForm()
    {
        InitializeComponent();

        this._progress.ProgressChanged += ((o, i) => this.ProgressLabel.Text = i.ToString());
    }

    private async void ProgressForm_Load(object sender, EventArgs e)
    {
        try
        {
            this._result = await this._operation(this._progress, this._cancellationTokenSource.Token);
        }
        catch (Exception ex) // Includes OperationCancelledException
        {
            this._exception = ex;
        }

        this.Close();
    }

    private void CancelXButton_Click(object sender, EventArgs e)
    {
        if (this._cancellationTokenSource != null)
            this._cancellationTokenSource.Cancel();
    }
} 
```

这被称为：

```
int numberOfWidgets = ProgressForm<int>.Execute(CountWidgets); 
```

... where`CountWidgets()`是一个可以等待的东西（在这种情况下，一个函数返回`Task<int>`，带有适当的 IProgress 和`CancellationToken`参数）。

到目前为止，它工作得很好，但我想添加一个“功能”。理想情况下，我希望表单保持不可见（比如说）一秒钟，这样如果操作真的很快完成，就不会出现“闪烁”，因为表单显示然后立即再次隐藏。

所以，我的问题是如何在表格显示之前引入 1s 延迟。显然，我仍然想立即开始操作，但是一旦我“等待”操作的结果，我就不再控制（可以这么说），因为控制将返回给`Form.Load`事件处理程序的调用者- 这将继续显示表格的工作。

我怀疑本质上我真的需要第二个线程，并且我需要在阻塞主 UI 线程时在该线程上执行操作。（我知道阻止 UI 线程是不受欢迎的，但在这种情况下，我认为这实际上是我需要的）。

有很多不同的方法可以创建线程等，我不确定如何在新的“async/await”世界中做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:02:13.173

如果您想延迟显示表单，我不建议您保留部分内容。我将独立调用该操作，然后创建一个`Timer`其`Tick`事件处理程序检查任务是否完成，如果完成，则不执行任何操作。否则它应该创建表单，将`IProgress<T>`and`CancellationTokenSource`和 task 传递到表单中。您仍然可以等待已经开始的任务。对于要启动的任务，在创建表单之前需要进度对象和取消令牌——因此需要独立创建......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:07:54.613

我认为您必须将“任务运行器”与“对话框”分开才能做到这一点。首先，一个响应进度并可以发出取消的对话框：

```
public partial class ProgressForm : Form
{
  private readonly CancellationTokenSource _cancellationTokenSource;

  public ProgressForm(CancellationTokenSource cancellationTokenSource, IProgress<string> progress)
  {
    InitializeComponent();

    _cancellationTokenSource = cancellationTokenSource;
    progress.ProgressChanged += ((o, i) => this.ProgressLabel.Text = i.ToString());
  }

  public static void ShowDialog(CancellationTokenSource cancellationTokenSource, IProgress<string> progress)
  {
    using (var progressForm = new ProgressForm(cancellationTokenSource, progress))
    {
        progressForm.ShowDialog();
    }
  }

  private void CancelXButton_Click(object sender, EventArgs e)
  {
    if (this._cancellationTokenSource != null)
      this._cancellationTokenSource.Cancel();
  }
} 
```

接下来，实际的“任务运行者”：

```
public static class FriendlyTaskRunner
{
  public static async Task<T> Execute<T>(Func<CancellationToken, IProgress<string>, Task<T>> operation)
  {
    var cancellationTokenSource = new CancellationTokenSource();
    var progress = new Progress<string>();
    var timeout = Task.Delay(1000);
    var operationTask = operation(cancellationTokenSource.Token, progress);

    // Synchronously block for either the operation to complete or a timeout;
    //  if the operation completes first, just return the result.
    var completedTask = Task.WhenAny(timeout, operationTask).Result;
    if (completedTask == operationTask)
      return await operationTask;

    // Kick off a progress form and have it close when the task completes.
    using (var progressForm = new ProgressForm(cancellationTokenSource, progress))
    {
      operationTask.ContinueWith(_ => { progressForm.Close(); });
      progressForm.ShowDialog();
    }

    return await operationTask;
  }
} 
```

请注意，[同步阻塞 UI 线程可能会导致死锁](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)——在这种情况下，如果`operation`尝试同步回 UI 线程，它将被阻塞，直到超时之后——所以它不是真正的“死锁”，但效率很低。

# c++ - 从 MFC 中的文件打开对话框中选择文件后 fopen() 不起作用

> ID：12511752
> 
> 赞同：1
> 
> 时间：2012-09-20T11:34:29.960
> 
> 标签：c++, mfc

在**MFC**应用程序中，我有一个文件浏览按钮。当我单击它并选择一个文件时，该文件已加载并且一切正常。

在此之后，我有一个函数，它尝试使用打开另一个文件，`fopen(),`但尽管文件存在，但无法打开该文件。如果我在文件浏览对话框中选择取消，则`fopen()`可以正常工作，但是一旦我使用文件浏览对话框选择文件，fopen 就不起作用。

有人可以告诉为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:41:29.567

也许您通过相对路径指定第二个文件，并在使用对话框打开第一个文件后，工作目录已更改。当您按下时`Cancel`，工作目录不会更改并且可以正常工作。

此问题的解决方案是例如使用完整的非相对路径指定第二个文件。

# c# - 创建新相册并上传照片：是否可以自动批准照片？

> ID：12511757
> 
> 赞同：0
> 
> 时间：2012-09-20T11:34:43.660
> 
> 标签：c#, facebook, facebook-graph-api

我见过很多 Facebook 应用程序会自动上传照片并发布。

C# .NET

```
JsonObject jasonObj = CreateAlbum(accessToken);

UploadPhoto(jo["id"].toString(""), accessToken, filename);

 public JsonObject CreateAlbum(string accessToken)
        {
            FacebookClient facebookClient = new FacebookClient(accessToken);
            Dictionary<string, object> albumParameters = new Dictionary<string, object>();
            albumParameters.Add("message", "My Album message");
            albumParameters.Add("name", "Album Name");
            JsonObject resul = facebookClient.Post("/me/albums", albumParameters) as JsonObject;
            return resul;
        }

    public void UploadPhoto(string AlbumId, string accessToken, string FullImagePath)
    {
        byte[] photo = File.ReadAllBytes(FullImagePath);

        FacebookApp app = new FacebookApp();
        dynamic parameters = new ExpandoObject();
        parameters.access_token = accessToken;
        parameters.message = "This is a test photo of a monkey that has been uploaded " +
                             "by the Facebook C# SDK (http://facebooksdk.codeplex.com)" +
                             "using the Graph API";
        var mediaObject = new FacebookMediaObject
        {
            FileName = "top.jpg",
            ContentType = "image/jpeg",
        };
        mediaObject.SetValue(photo);
        parameters.source = mediaObject;

        dynamic result = app.Api(String.Format("/{0}/photos", AlbumId), parameters, HttpMethod.Post);
    } 
```

但那张照片并没有在时间轴上发布。

您想将这些照片添加到您的相册吗？下面的照片是从另一个应用程序上传的，您需要批准它们。

这是 Facebook 的政策吗？还是我的错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:57:32.227

`public_stream`在 user1027092 中的答案不是真正的许可 - 在没有特定用户批准每张照片的情况下上传到相册[权限](https://developers.facebook.com/docs/authentication/permissions/)是`user_photos`

一个重要的例外是，如果用户在安装您的应用程序时选择了比您尝试上传到的相册上的隐私设置更严格的隐私设置 - 在这种情况下，用户仍然需要手动批准照片，因为如果您可以上传到更显眼的相册，他们之前选择的应用内容的最大可见度将不会得到尊重

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T02:39:43.790

1) Facebook：在页面开发者应用程序中编辑权限[https://developers.facebook.com/apps/xxxxxxxxxxxx/permissions](https://developers.facebook.com/apps/xxxxxxxxxxxx/permissions) - 扩展权限：public_stream、read_stream

2) C#：在链接重定向中添加 scope = "publish_stream,read_stream,user_photos" 3) 示例：[https](https://www.facebook.com/dialog/oauth?client_id=) ://www.facebook.com/dialog/oauth?client_id= {0}&scope={1}&redirect_uri=http:/ /www.facebook.com/connect/login_success.html&response_type=token

用第 2 行中的字符串替换范围

# java - 使用 Maven 创建基础项目时出错？

> ID：12511758
> 
> 赞同：1
> 
> 时间：2012-09-20T11:34:45.250
> 
> 标签：java, maven-2

我们的机器上有 Maven。我们正在使用**Maven 2.2.1**和**CentOS 6.0**。当我们使用以下命令创建基础项目时

> mvn archetype:create -e -DarchetypeGroupId=com.jivesoftware.maven -DarchetypeArtifactId=maven-jive-plugin-archetype -DarchetypeVersion=5.0.2-SNAPSHOT -DgroupId=com.demo -DartifactId=jiveDemo

我们收到以下错误消息：-

```
Warning: JAVA_HOME environment variable is not set.

+ Error stacktraces are turned on.

[INFO] Scanning for projects...

[INFO] Searching repository for plugin with prefix: 'archetype'.

[INFO] org.apache.maven.plugins: checking for updates from central

[WARNING] repository metadata for: 'org.apache.maven.plugins' could not be retrieved from repository: central due to an error: Error transferring file: repo1.maven.org

[INFO] Repository 'central' will be blacklisted

[INFO] ------------------------------------------------------------------------

[ERROR] BUILD ERROR

[INFO] ------------------------------------------------------------------------

[INFO] The plugin 'org.apache.maven.plugins:maven-archetype-plugin' does not exist or no valid version could be found

[INFO] ------------------------------------------------------------------------

[INFO] Trace

org.apache.maven.lifecycle.LifecycleExecutionException: The plugin 'org.apache.maven.plugins:maven-archetype-plugin' does not exist or no valid version could be found

at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1569)

at org.apache.maven.lifecycle.DefaultLifecycleExecutor.getMojoDescriptor(DefaultLifecycleExecutor.java:1851)

at org.apache.maven.lifecycle.DefaultLifecycleExecutor.segmentTaskListByAggregationNeeds(DefaultLifecycleExecutor.java:462)

at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:175)

at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)

at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)

at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)

at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:616)

at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)

at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)

at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

at org.codehaus.classworlds.Launcher.main(Launcher.java:375)

Caused by: org.apache.maven.plugin.version.PluginVersionNotFoundException: The plugin 'org.apache.maven.plugins:maven-archetype-plugin' does not exist or no valid version could be found

at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:229)

at org.apache.maven.plugin.version.DefaultPluginVersionManager.resolvePluginVersion(DefaultPluginVersionManager.java:91)

at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:179)

at org.apache.maven.plugin.DefaultPluginManager.loadPluginDescriptor(DefaultPluginManager.java:1642)

at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1540)

... 15 more

[INFO] ------------------------------------------------------------------------

[INFO] Total time: 28 seconds

[INFO] Finished at: Tue Sep 18 13:39:38 IST 2012

[INFO] Final Memory: 2M/29M

[INFO] ------------------------------------------------------------------------ 
```

我们的服务器位于防火墙后面。可能是什么原因和解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:04:17.520

关于什么

```
Warning: JAVA_HOME environment variable is not set. 
```

这么复杂？这意味着只需将其定义为您的 Java 安装。此外，我建议从 Maven 3.0.4 开始，而不是从 2.2.1 开始。

除此之外，您还没有配置使用代理配置来访问 Maven 中心。最好的解决方案是使用存储库管理器。

# linux - 如何在linux脚本（bash）中用两位数表示十六进制数

> ID：12511762
> 
> 赞同：6
> 
> 时间：2012-09-20T11:35:05.093
> 
> 标签：linux, bash, shell, hex

我有个问题。我必须用 2 位数字表示每个数字（即 0F 而不是 F）

我的代码看起来像这样：
1\. 读取的 ascii 字符数在环境变量中（使用 wc -w）
2\. 将此数字转换为十六进制（使用 bc）。

如何确保我在第 2 阶段之后获得的数字包含前导 0（如有必要）

谢谢，阿米格尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:36:26.450

运行它`printf`：

```
$ printf "%02s" 0xf
0f 
```

如果您仅在变量中包含数字的数字，例如`$NUMBER`，您可以直接将其与所需的`0x`前缀连接：

```
$ NUMBER=fea
$ printf "%04x" 0x$NUMBER
0fea 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T16:54:19.090

跳过转换部分，`bc`使用命令转换十进制数`printf`：

```
#num=$(... | wc -w)
num=12  # for testing
printf "%02x" $num
0c 
```

如果由于其他原因必须转换为十六进制，则使用`0x`前缀来说明`printf`该数字已经是十六进制：

```
#num=$(... | wc -w | bc ...)
num=c   # as obtained from bc
printf "%02x" 0x$num
0c 
```

该`%x`格式请求将数字格式化为十六进制，`%2x`请求填充到两个字符的宽度，并`%02x`特别请求使用前导零填充，这正是您想要的。有关可能的格式字符串的更多详细信息，请参阅`printf`手册（`man printf`或`info coreutils printf`）。

# sencha-touch - sencha 列表的 setEmptyText

> ID：12511763
> 
> 赞同：1
> 
> 时间：2012-09-20T11:35:08.370
> 
> 标签：sencha-touch

我正在开发一个煎茶应用程序。我在其配置中为列表设置了“emptyText”。但过了一段时间我需要改变它。我使用以下行来做到这一点

```
invoiceList.setEmptyText('<div style="margin-top: 20px; text-align: center">Sorry! No Items Found</div>'); 
```

当我在 crome 中运行我的应用程序时，我看到以下错误

> 未捕获的类型错误：对象 [object Object] 没有方法“setEmptyText”

如何动态更改列表的emptyText

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:16:14.910

Ext.List 在 sencha touch 1 中没有方法 setEmptyText。您可以使用 sencha touch 2 代替。也许此代码将在 sencha touch 1 中工作。您可以尝试。

```
invoiceList.emptyText = 'Empty test'
invoiceList.refresh(); 
```

# php - PHP数组可以保存不同类型的项目吗？

> ID：12511764
> 
> 赞同：15
> 
> 时间：2012-09-20T08:04:15.863
> 
> 标签：php, arrays, string, types, integer

在其他编程语言中，数组的定义是可以包含类似元素的东西。例如，如果我声明类似`int i[]`它将存储整数的东西，但在 PHP 中，单个数组似乎将字符串和数字保存在一起。

在 PHP 的这种类型的数组中，数字/整数会被视为字符串吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T08:24:25.520

[根据 PHP 手册](http://php.net/manual/en/language.types.array.php)，您确实可以在 PHP“数组”中存储异构类型 - 向下滚动到示例 3。

请注意，尽管示例中的键是整数或字符串，但示例中分配的值也是整数和字符串，这表明可以存储异构类型。

请注意，在不同类型的键的情况下，涉及自动转换，因此在字符串包含有效十进制表示的情况下，您可能会得到令人惊讶的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T08:10:59.980

在 PHP 中，数组甚至不是数组，它们是有序的哈希表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-03T18:33:38.730

是的。PHP 数组中可以有多种数据类型。此外，您应该注意 PHP 中的数组实际上是以键值对的形式表示的，其中您将输入到数组中的元素是值。您也可以在向数组中输入元素时显式定义键，但如果您不这样做，PHP 将使用从 0 开始的索引。示例：

```
 <?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
    100   => -100,
    -100  => 100,
);
var_dump($array);
?> 
```

PHP 将解释为

```
 array(4) {
  ["foo"]=>
  string(3) "bar"
  ["bar"]=>
  string(3) "foo"
  [100]=>
  int(-100)
  [-100]=>
  int(100)
} 
```

参考[- http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T11:58:42.883

不会给 PHP 火上浇油 数组在这里没有数组……但是是的，您可以将不同的变量类型（字符串，int，……）放在一个称为 Array 的 PHP 事物中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:53:05.880

你可以在数组中存储任何你想要的东西。

> 在 PHP 的这种类型的数组中，数字/整数会被视为字符串吗？

不是在存储时。但是，当您使用这样的值时，PHP*会*转换它。值的使用决定了它的解释。（注意，密钥在存储时转换，但是，如果它被认为是数字）

# matlab - Octave 中的 tcpip() 命令实现

> ID：12511767
> 
> 赞同：1
> 
> 时间：2012-09-20T11:35:09.877
> 
> 标签：matlab, tcp, octave

是否有来自 Matlab 的仪器控制工具箱的 tcpip() 命令的实现？我已经搜索过它，但直到现在还没有运气。

Matlab 上 tcpip() 命令的文档在这里： http: [//www.mathworks.de/de/help/instrument/tcpip.html](http://www.mathworks.de/de/help/instrument/tcpip.html)

我想使用相同的语法使我的 Matlab 脚本 100% 与 Octave 兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:09:19.417

此功能尚未在 Octave 中实现。有一个可以用于它的[套接字包，但它的 API 与 matlab 不兼容。](http://octave.sourceforge.net/sockets/index.html)还有一个用于[乐器控制](http://andriussutassocis2012.blogspot.de/2012/09/progress-report.html)的新 Octave 包，但它还没有这些功能。提议的[计划](https://docs.google.com/document/d/1dFpxKwtr3IZQ-XrLjgqSot4rR-BTPzscCqJ2Fe0g-T8/edit?pli=1)是确实实现它们（参见 SocketCAN 对 Linux 平台的支持部分），但它们已经结束了。也许你可以帮助 Andrius 实施它们？

# jsp - Struts 2 映射类型转换

> ID：12511771
> 
> 赞同：1
> 
> 时间：2012-09-20T11:35:30.997
> 
> 标签：jsp, map, struts2, type-conversion

在我的 jsp 中，我有一个文本字段：`<s:textfield name="codePropertyMap[%{#codeProperty.id}]" />`codePropertyMap`Map<CodeProperty, String>`在我的操作中是一个。

现在，我想将 转换`codeProperty.id`为具体的`CodeProperty`，为此我创建了一个`CodeAction-conversion.properties`包含以下文本的文件：

```
KeyProperty_codePropertyMap=id 
Element_codePropertyMap=java.lang.String 
Key_codePropertyMap=CodePropertyImpl 
```

但只有这样是行不通的。

在这个页面中，有一个列表转换 [Struts Type Conversion](http://struts.apache.org/2.2.3/docs/type-conversion.html)的示例，但我看不出它是如何与地图一起工作的。

我想知道的是我缺少什么或无法进行转换？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:40:16.323

我认为，我试图这样做的方式是不可能的。我解决的方法是创建一个扩展 StrutsTypeConverter 的类来进行转换。有关此问题的更多详细信息和可能的解决方案，您可以访问[http://www.mail-archive.com/user%40struts.apache.org/msg102474.html](http://www.mail-archive.com/user%40struts.apache.org/msg102474.html)

# excel - 使用 Groovy 2.0.2 转换 Excel

> ID：12511773
> 
> 赞同：0
> 
> 时间：2012-09-20T11:35:33.860
> 
> 标签：excel

我一直在尝试将 excel 转换为如下所示的数据，其中 data1,1 是第 1 行和第 1 列，data1,2 是第 1 行第 2 列，依此类推。

```
["columns":["head1", "head2", "head3", "head4"], "data":[["data1,1", "data1,2", "data1,3","data1,4"], ["data2,1", "data2,2", "data2,3", "data2,4"], ["data3,1", "data3,2", "data3,3", "data3,4"]]] 
```

但是我无法在[Groovy 2.0.2](http://groovy.codehaus.org/)中正确获取代码。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:11:12.797

你需要[JExcelApi](http://jexcelapi.sourceforge.net/)，看看他们的[WritableSheet 接口](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/write/WritableSheet.html)插入数据......

# google-analytics - 是否可以使用 Management API 将用户添加到 Analytics 配置文件？

> ID：12511781
> 
> 赞同：0
> 
> 时间：2012-09-20T11:35:58.493
> 
> 标签：google-analytics, google-analytics-api

我不想让客户登录他们的 Analytics 管理面板，而是单击“新用户”，然后输入我的电子邮件地址，我只想将他们指向一个链接，他们可以在其中授权一个应用程序，该应用程序将自动为他们执行此操作。这是该过程的打印屏幕：http: [//i.imgur.com/SOWTX.png](http://i.imgur.com/SOWTX.png)

这可以通过其中一种分析 API 来完成吗？还是已经有可以做到这一点的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:02:44.993

不可以。Google Analytics 管理 API 目前是只读的。

而且它没有任何处理用户的方法。甚至没有用户列表。

# android - 如何使应用程序自动扫描？

> ID：12511783
> 
> 赞同：3
> 
> 时间：2012-09-20T11:36:10.347
> 
> 标签：android

好吧，我有一个应用程序可以在扫描条形码后立即将数据发送到服务器。但是每次更改 apk 时都必须扫描条形码。通过条形码的数据仍然存在，但我们每次上传新的 apk 时都必须点击扫描条形码。我想让它像我 apk 开始发送数据时一样。是否可以？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:40:09.600

我想您有一种方法，您可以在按下执行扫描的扫描按钮时调用该方法。在这种情况下，创建一个调用该方法并尝试扫描条形码的计时器。为间隔使用一个相当低的值，例如 1 或 2 秒。

您必须确保您的代码不会尝试上传条形码，除非它找到一个，但这不是一个硬性更改。

Android 文档参考：http: [//developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

关于计时器如何工作的一个不错的教程： [http ://steve.odyfamily.com/?p=12](http://steve.odyfamily.com/?p=12)

# spring - Postgres 异常：javax.transaction.HeuristicMixedException：启发式异常

> ID：12511784
> 
> 赞同：1
> 
> 时间：2012-09-20T11:36:14.490
> 
> 标签：spring, jdbc, jta, spring-transactions

我正在 Windows 上使用 Spring 和 PostgreSQL 9.2 创建一个应用程序。我在 Windows 32 位操作系统中成功运行了这个应用程序。但是当我尝试在 Windows 64 位操作系统中运行相同的应用程序时，我得到以下异常：

```
Caused by: org.springframework.transaction.HeuristicCompletionException: Heuristic completion: outcome state is mixed; nested exception is javax.transaction.HeuristicMixedException: Heuristic Exception
    at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1016)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at com.kensho.common.UIbundlDAOImpl$$EnhancerByCGLIB$$ca55a3ce.findAll(<generated>)
    at com.kensho.common.UIToolKitAdminBBean.getAllBundleItems(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:346)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:299)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:132)
    ... 38 more
Caused by: javax.transaction.HeuristicMixedException: Heuristic Exception
    at com.atomikos.icatch.jta.TransactionImp.rethrowAsJtaHeuristicMixedException(TransactionImp.java:77)
    at com.atomikos.icatch.jta.TransactionImp.commit(TransactionImp.java:238)
    at com.atomikos.icatch.jta.TransactionManagerImp.commit(TransactionManagerImp.java:498)
    at com.atomikos.icatch.jta.UserTransactionImp.commit(UserTransactionImp.java:129)
    at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1009)
    ... 53 more
Caused by: com.atomikos.icatch.HeurHazardException: Heuristic Exception
    at com.atomikos.icatch.imp.CoordinatorStateHandler.rollback(CoordinatorStateHandler.java:802)
    at com.atomikos.icatch.imp.ActiveStateHandler.prepare(ActiveStateHandler.java:223)
    at com.atomikos.icatch.imp.CoordinatorImp.prepare(CoordinatorImp.java:833)
    at com.atomikos.icatch.imp.CoordinatorImp.terminate(CoordinatorImp.java:1160)
    at com.atomikos.icatch.imp.CompositeTerminatorImp.commit(CompositeTerminatorImp.java:92)
    at com.atomikos.icatch.jta.TransactionImp.commit(TransactionImp.java:236) 
```

.... 为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-07T15:27:36.057

`max_connection`与 PostgreSQL 9.x 和 10.x 一起，这个问题在 Seam 和 Apache JCR以及`max_prepared_transactions`PostgreSQL 配置中的值太低时遇到过。

# apache-flex - 如何在 Flash Builder 4.6 中使用 ExtensionContext？

> ID：12511786
> 
> 赞同：0
> 
> 时间：2012-09-20T11:36:15.533
> 
> 标签：apache-flex, air

我正在使用 flash.external.ExtensionContext 以便可以在 SWF 文件中调用本机 iOS 函数。

遵循从

[http://www.lorenzonuvoletta.com/how-to-create-your-own-ane-for-ios-using-adobe-air/](http://www.lorenzonuvoletta.com/how-to-create-your-own-ane-for-ios-using-adobe-air/)

我有 SWC 和 ANE 文件。

现在我创建了一个 AIR 应用程序并使用以下行来调用本机函数（仅获取“hello world”字符串）：

```
private function onCreate() {
    var inst:ANEHellowWorld = ANEHelloWorld.instance;
    var str:String = inst.helloWorld(); // fails since the extContext member is null

    // try it directly
    var extContext:ExtensionContext = ExtensionContext.createExtensionContext("com.lorenzonuvoletta.helloworld", "net");
    var str2:String = extContext.call("helloWorld") as String; // still null object
} 
```

为什么 createExtensionContext 总是返回 null？还有一个问题，我如何在普通的 flex 项目中访问 ExtensionContext？似乎根本没有 flash.external.ExtensionContext。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:44:12.973

现在我了解到 Native Extension 仅在 Flex Mobile Projects 中可用。而对于返回null的问题，应该将.ane文件添加到Project->Properties->Flex Build Path，在Native Extension Path中。只是希望这些信息能帮助一些像我这样的新手 Flex 用户。没关系。

# ruby-on-rails - has_many 和 :after_add / :before_add => 回调 << 并创建方法

> ID：12511792
> 
> 赞同：7
> 
> 时间：2012-09-20T11:36:50.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在阅读 Rails 3 Way 书，当时感到困惑：

> **:after_add => 回调** 在通过 << 方法将记录添加到集合后调用。不是由集合的 create 方法触发的

据我了解 book.chapters.create(title: 'First Chapter') 不会调用 before_add 回调，但实际上它正在调用。

```
class Book < ActiveRecord::Base
  attr_accessible :title
  has_many :chapters, :before_add => :add_chapter

  private
    def add_chapter(chapter)
      logger.error('chapter added to book')
    end
end

class Chapter < ActiveRecord::Base
  belongs_to :book
  attr_accessible :title
end 
```

在控制台中（缩小）

```
 > b = Book.first
  Book Load (0.1ms)  SELECT "books".* FROM "books" LIMIT 1
 > b.chapters.create(title: 'Last Chapter')
  begin transaction
chapter added to book
  INSERT INTO "chapters" ....
  commit transaction 
```

在这里你可以看到`after_add`回调是为 调用的`create`。

我误解了什么吗？

**编辑**

```
b.chapters.new(title: 'New Chapter')
b.chapters.build(title: 'New Chapter') 
```

还调用回调

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-01-03T14:35:23.703

将项目添加到集合时会触发`before_add`和回调。`after_add`它与记录是否保存到数据库无关。（这里对`has_and_belongs_to_many`和`has_many :through`关系有一个小例外，将其添加到集合中会立即通过 ActiveRecord 在内部反映到数据库中）。

一旦您将新记录添加到集合中，回调就会触发。before_add 将在元素添加到集合之前调用，而 after_add 将在之后调用。

下面的这个例子可能会让你更好地理解。

```
# id: integer
class Author < ActiveRecord::Base
  has_many :books, before_add: :bef, after_add: aft

  def bef
    puts "Before adding, author ##{id} has #{books.size} books"
  end

  def aft
    puts "After adding, author ##{id} has #{books.size} books"
  end
end

# id integer
# author_id: integer
class Book < ActiveRecord::Base
  belongs_to :author
  after_save: :saved

  def saved
    puts "The book is now saved!"
  end
end

> book = Book.new

> author = Author.first

> author.books << book
'Before adding, author #1 has 3 books'
'After adding, author #1 has 4 books'

> author.save
'The book is now saved' 
```

# rsync - rsync 路径列表

> ID：12511794
> 
> 赞同：0
> 
> 时间：2012-09-20T11:36:58.493
> 
> 标签：rsync

我喜欢同步来自两个位置的路径/文件子集的更改。我有所有更改的路径，例如某些版本管理工具会列出，但没有信息发生在他们身上。听起来很简单，但似乎几乎是不可能的......这里有一些警告：

使用几个源参数并用`/./`like固定它们

```
rsync -a --delete /some/path/./file1 /some/path/./subfolder/file2 host:/some/path 
```

除了源端不再存在的已移动或删除的文件外，此方法有效。这些是 rsync 的投诉，并没有在目标端删除。

所以我尝试使用过滤器而不是多个来源，比如`--include=/subfolder/file1 --exclude=*`. 但是，由于如果省略了 dir，则递归停止，它会在顶层停止，并且不会同步任何文件。

所以我`--include=*/`在排除语句之前添加了，再次启用递归。然后任何不在我列表中的文件夹都会自行同步，例如。它的元数据是同步的。此外，`-v`我最终得到了所有文件夹的混乱输出。

因此，我`-m`按照某些人的建议添加了删除“空”目录（实际上并不是空的，而是由排除项呈现的）。但是，这确实与 交互`--delete`，因为现在列出了所有目录以供删除。似乎与其他过滤器相比，`-m`也将匹配的空目录放入删除列表。

现在我的想法已经用完了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T15:03:44.797

刚遇到这个问题。通常`--files-from=F`，其中 F 包含要更新的路径列表很好，*除非*要删除 F 中的某些路径，在这种情况下，它会抱怨它无法统计源文件。

所以，我构建了一个包含源文件。假设您有路径 a/b/c 和 p/q/r 进行镜像，请编写一个文件“过滤器”，其中包含：

```
+ a
+ a/b
+ a/b/c
+ a/b/c/**
+ p
+ p/q
+ p/q/r
+ p/q/r/**
- * 
```

然后使用命令

```
rsync [-v] -r --delete --include-from=filter source/ target 
```

# ios - 使用 instantiateWithOwner: 方法时未调用 awakeFromNib

> ID：12511798
> 
> 赞同：0
> 
> 时间：2012-09-20T11:37:11.177
> 
> 标签：ios, uitableview, nib, awakefromnib, uinib

我有一个小问题，我需要了解这些东西是如何工作的。我在 SO 中进行了搜索，但没有找到任何有效的解决方案。

我的情况如下。

我有一个通过方法`UITableViewController`加载单元格（在其表中使用）。`UINib``instantiateWithOwner:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellClassName];
    if (!cell) {

        NSArray *topLevelItems = [cellLoader instantiateWithOwner:self options:nil];
        cell = [topLevelItems objectAtIndex:0];
    }

    // other stuff here...

    return cell;
} 
```

单元格显示正确。现在，我需要根据不同的标准自定义每个单元格，我认为正确的地方是`awakeFromNib`方法。Fr 示例，在`CustomTableViewCell`.m 内，我覆盖`awakeFromNib`如下：

```
- (void)awakeFromNib
{
    // my internal stuff here
} 
```

但`awakeFromNib`不叫。

你能解释一下我做错了什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:41:49.823

实际上，您需要在“此处显示其他内容”的代码中进行自定义。由于您回收电池，因此您需要确保电池在每次使用时都正确配置。

编辑：我做了一个测试项目，并验证了 awakeFromNib 实际上已发送到班级。这使我相信根本问题是在您的单元格笔尖中，您没有将单元格的类设置为您的 CustomClass 名称。这是唯一可能的解释。

EDIT2：所以重申：

*   在 CustomTableViewCell.xib 中，对象的类设置为 'CustomTableViewCell'

*   在 CustomTableViewCell.m 中添加一些日志消息 - 在 initWithCoder 中：如果你有它，也在 awakeFromNib 中（确保拼写！！！）

*   当你在这里实例化 'cell = [topLevelItems objectAtIndex:0];' 时，在 NSLog(@"Going to instantiate") 之前添加一个日志，然后是一个日志：

    ```
    NSLog(@"Instantiate a %@ cell", NSStringFromClass([cell class]); 
    ```

这里必须有一些东西。您的部署目标是什么？在我的测试中，我使用了 5.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T10:57:40.060

我只是在`awakeFromNib`使用时遇到了同样的问题`instantiateWithOwner`。但是，我改回使用`[[NSBundle mainBundle] loadNibNamed:name owner:self options:nil]`它并没有解决问题。

然后，在我的自定义视图实现中添加一个测试选择器，当然，应用程序在无法识别的选择器上崩溃了。

所以经过一番咬牙切齿的拉扯，结果证明这是一个相当基本的错误。

在与自定义视图关联的 Xib 中，我忘记在 Interface Builder 的身份检查器中输入名称。因此，运行时认为我的类是一个实例，`UIView`而不是`MyCustomView`. 所以`awakeFromNib`断点永远不会触发。

***底线：如果您在使用带有关联 Xib 的自定义视图类时遇到此问题，请检查您是否正确设置了类名：***

![在此处输入图像描述](../Images/fc89f754b98861a710596d5bacabb12b.png)

# python - 合并两个字典

> ID：12511801
> 
> 赞同：17
> 
> 时间：2012-09-20T11:37:28.063
> 
> 标签：python

我有两个字典如下：

`D1={'a':1,'b':2,'c':3}`

和

`D2={'b':2,'c':3,'d':1}`

我想合并这两个字典，结果应该如下：

`D3={'a':1,'b':2,'c':3,'b':2,'c':3,'d':1}`

我怎样才能在python中实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T11:48:17.640

> 我想合并这两个字典，结果应该如下：
> 
> D3={'a':1,'b':2,'c':3,'b':2,'c':3,'d':1}
> 
> 我怎样才能在python中实现这一点？

你不能。Python dict 中的每个键只能有一个值。您可以做的是将列表或集合作为值。

这是一个带有集合的示例：

```
d1 = { 'a': 1, 'b': 2, 'c': 3 }
d2 = { 'a': 1, 'b': 5, 'd': 4 }
d3 = {}
def add_dict(target, d):
    for key in d:
        target.setdefault(key, set([])).add(d[key])

add_dict(d3, d1)
add_dict(d3, d2) 
```

这会给你`d3`：

```
{'a': set([1]), 'c': set([3]), 'b': set([2, 5]), 'd': set([4])} 
```

您也可以使用列表执行此操作（可能更接近您的示例）：

```
d1 = { 'a':1, 'b':2, 'c': 3}
d2 = { 'b':2 ,'c':3, 'd': 1}
d3 = {}
def add_dict(target, d):
    for key in d:
        target.setdefault(key, []).append(d[key])

add_dict(d3, d1)
add_dict(d3, d2) 
```

你会得到这个：

```
{'a': [1], 'c': [3, 3], 'b': [2, 2], 'd': [1]} 
```

但是，看着`{'a':1,'b':2,'c':3,'b':2,'c':3,'d':1}`（不能是字典），您似乎完全在追求不同的数据结构。也许是这样的：

```
d1 = { 'a':1, 'b':2, 'c': 3}
d2 = { 'b':2 ,'c':3, 'd': 1}
result = []

result += [ { 'key': key, 'value': d1[key] } for key in d1 ]
result += [ { 'key': key, 'value': d2[key] } for key in d2 ] 
```

这将产生这个，它看起来更接近您最初想到的数据结构：

```
[ {'value': 1, 'key': 'a'},
  {'value': 3, 'key': 'c'},
  {'value': 2, 'key': 'b'},
  {'value': 3, 'key': 'c'},
  {'value': 2, 'key': 'b'},
  {'value': 1, 'key': 'd'} ] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:40:56.667

您可能想尝试：

```
D3 = {}
D3.update(D1)
D3.update(D2) 
```

在这里，我们`D3`首先创建一个空字典，然后从其他两个字典更新它。

请注意，您需要注意更新的顺序：如果`D2`与 共享某些键`D1`，则上面的代码将覆盖 与 的相应`D1`条目`D2`。

还要注意，这些键**不会**重复。您提供的示例`D3={a:1,b:2,c:3,b:2,c:3,d:1}`不是有效的字典。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T11:42:37.757

根据定义，字典不能有重复的键，因此“合并”字典实际上会给出以下结果（注意顺序是任意的）：

```
{'a': 1, 'b': 2, 'c': 3, 'd': 1} 
```

您可以创建其中一个字典的克隆并将另一个条目合并到其中：

```
D3 = dict(D1)
D3.update(D2) 
```

或者您可以从每个输入字典的 (key, value) 元组的串联中创建一个新字典：

```
D3 = dict(D1.items() + D2.items()) 
```

如果您真的想要重复键的多个值，则需要每个键的值列表：

```
from itertools import groupby
dict(( (key, [v for k, v in group]) for key, group in groupby(sorted(D1.items() + D2.items()), lambda x: x[0]))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T11:42:52.763

```
In [3]: D1={'a':1,'b':2,'c':3}

In [4]: D2={'b':2,'c':3,'d':1}

In [5]: D1.update(D2)

In [6]: D1
Out[6]: {'a': 1, 'b': 2, 'c': 3, 'd': 1} 
```

**更新**

替代解决方案

```
In [9]: D3=D1.copy()

In [10]: D3.update(D2)

In [11]: D3
Out[11]: {'a': 1, 'b': 2, 'c': 3, 'd': 1}

In [12]: D4=dict(D1, **D2) 
```

或者

```
In [13]: D4
Out[13]: {'a': 1, 'b': 2, 'c': 3, 'd': 1} 
```

或者

```
In [16]: D5 = dict(D1.items() + D2.items())

In [17]: D5
Out[17]: {'a': 1, 'b': 2, 'c': 3, 'd': 1} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T11:41:05.940

你在问什么是不可能的，因为在 Python 字典中不能有两个具有相同值的不同键。

与您的问题最接近的答案是：

`D3 = dict( D1.items() + D2.items() )`

注意：如果同一键有不同的值，则 D2 中的值将是 D3 中的值。

示例：
`D1 = { 'a':1, 'b'=2 }`
`D2 = { 'c':3, 'b':3}`
那么，D3 将是：
`D3= { 'a':1, 'b':3, 'c':3 }`

# asp.net-mvc - 使用 401 发送消息：Asp.net Web-api

> ID：12511803
> 
> 赞同：6
> 
> 时间：2012-09-20T11:37:30.280
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, http-status-code-401

我在 asp.net Web API 中。在登录方法中，我根据数据库检查用户/密码，如果它们不匹配，我将返回 401 状态代码以及`invalid user or password method`类似

```
var content = new StringContent("Invalid user name or password");
var message = new HttpResponseMessage(HttpStatusCode.Unauthorized);
message.Content = content;
throw new HttpResponseException(message); 
```

但是 API 似乎忽略了我的信息，只是返回了一些 HTML，比如

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>401 - Unauthorized: Access is denied due to invalid credentials.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>401 - Unauthorized: Access is denied due to invalid credentials.</h2>
  <h3>You do not have permission to view this directory or page using the credentials that you supplied.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

这是为什么？我怎样才能覆盖这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:20:20.487

One potential cause of this response is the IIS web site being configured to allow Forms authentication. Look at this [older but still valid post](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx) on configuring IIS to disable Forms authentication for the Web API.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:38:49.917

我相信您得到的响应来自 IIS，而不是来自 Web Api。如果您想在您的 API 中自己处理身份验证过程，您需要告诉 IIS 允许匿名访问，以便它不会妨碍您。

此外，当您返回 401 时，您必须返回 www-authenticate 标头（请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)）。这告诉客户端允许哪种类型的身份验证。

# android - 活动栈、singleTask、导航

> ID：12511805
> 
> 赞同：1
> 
> 时间：2012-09-20T11:37:35.123
> 
> 标签：android, android-activity, android-actionbar

我有 3 个活动（A、B、C）。对于使用向上按钮从 B->A 和 C->B 导航，我使用 NavUtils.navigateUpFromSameTask(this); 我想要实现的是导航：A->B->C 当我在 CI 中时想要启动 A 并将一些额外的数据传递给 A。挑战是将 B、C 保留在堆栈中，因此 A 的硬件后退按钮将返回对 C。

我尝试了默认启动模式，然后尝试了单任务启动模式。默认启动模式：问题是，当我从 B->A（带有向上按钮）导航时，重新创建了一个活动。我只想返回堆栈，因为它带有硬件后退按钮。

当我对 A、B、C 使用 singleTask 时，不会重新创建活动，但我不能从 A 回到 C。

任何建议如何解决它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-30T15:12:39.570

尽管您的问题不是很清楚，但我假设您的堆栈当前是否

```
A->B->C 
```

并且您想`A`从`C`附加内容开始并传递一些数据，然后您希望堆栈看起来像这样：

```
B->C->A 
```

要做到这一点，你只需`A`要从`C`这样开始：

```
Intent intent = new Intent(this, A.class);
intent.putExtra("key", "value); // Your extras
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

这会将现有的实例`A`从堆栈的底部移动到堆栈的顶部，并使用包含“附加”的新实例调用`onNewIntent()`该实例。当用户按下 BACK 时，这将完成并返回到.`A``Intent``A``C`

# android - WindowManager.LayoutParams.TYPE_SYSTEM_ALERT 不再禁用 Android 4.1 上的主页键

> ID：12511807
> 
> 赞同：4
> 
> 时间：2012-09-20T11:37:48.527
> 
> 标签：android

在 android Jelly Bean 上，将警报对话框窗口类型设置为 WindowManager.LayoutParams.TYPE_SYSTEM_ALERT 不再禁用 home 键。在 ICS 设置窗口类型为 WindowManager.LayoutParams.TYPE_SYSTEM_ALERT 将阻止所有按键。有没有其他方法可以避免主页键和最近的应用程序键关闭android JB上的警报对话框？

我只需要通过在对话框上按 OK 来关闭警报对话框。请让我知道如何阻止主页键和最近的应用程序键关闭警报对话框

# c# - 如何将 DataGrid 单元格值复制到剪贴板

> ID：12511809
> 
> 赞同：13
> 
> 时间：2012-09-20T11:37:53.517
> 
> 标签：c#, wpf, wpfdatagrid

我有一个`DataGrid`. 但我想在`CopyingRowClipboardContent`事件中获得集中的单元格值。但`e.ClipboardRowContent`由于`SelectionUnit`. 而且我不能更改数据网格的选择单元。为了解决这个问题，我需要获得重点单元格列号。然后我将从中删除所有列值`clipboarcContent`。我怎样才能在`CopyingRowClipboardContent`事件中获得焦点单元？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-22T11:57:00.180

法哈德答案的改进版本

```
private void DataGrid_CopyingRowClipboardContent(object sender, DataGridRowClipboardEventArgs e)
{
    var currentCell = e.ClipboardRowContent[ dataGrid.CurrentCell.Column.DisplayIndex];
    e.ClipboardRowContent.Clear();
    e.ClipboardRowContent.Add( currentCell );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T12:25:52.703

您还可以使用以下代码来控制剪贴板内容。

```
Clipboard.SetText("some value"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:57:53.973

我找到了解决方案。首先，我需要重点单元格的列号。我已经设法用这段代码得到它：

```
DataGridResults.CurrentCell.Column.DisplayIndex; 
```

然后`CopyingRowClipboardContent`万一，我必须删除所有其他列值。

```
private void DataGridResults_CopyingRowClipboardContent(object sender, DataGridRowClipboardEventArgs e)
{
    int y = 0;

    for (int i = 0; i < e.EndColumnDisplayIndex; i++)
    {
        if (i != DataGridResults.CurrentCell.Column.DisplayIndex)
        {
            e.ClipboardRowContent.RemoveAt(i - y);
            y++;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-24T16:44:35.877

我发现这个解决方案在所有 DataGrids 上都适用于我；甚至那些有隐藏列的。

```
// Clipboard Row content only includes entries for visible cells
// Figure out the actual column we are looking for (taking into account hidden columns)
int columnIndex = dataGrid.CurrentCell.Column.DisplayIndex;
var column = dataGrid.Columns[columnIndex];

// Find the associated column we're interested in from the clipboard row content
var cellContent = clipboardRowContent.Where(item => item.Column == column).First();
clipboardRowContent.Clear();
clipboardRowContent.Add(cellContent); 
```

# network-programming - frame contains "\x03\x00\x0e\xa8" 在wireshark中显示过滤器显示不包含这些字节的数据包

> ID：12511810
> 
> 赞同：7
> 
> 时间：2012-09-20T11:37:57.010
> 
> 标签：network-programming, wireshark, packet-capture, tcpdump, wireshark-dissector

我在wireshark中使用了以下过滤器来查找包含这些字节的数据包：

```
frame contains "\x03\x00\x0e\xa8" 
```

但是当我看到这个过滤器的结果时，它显示了超过 1k 个甚至不包含这些字节的数据包。例如，它甚至显示以下以太网数据包：

```
00219ba0610678e7d1c625f40800450000282a0340008006cd88c0a87801d43af65f059e00503bac54cf9f17722a5010ffff04e50000 
```

这些字节不包含在此数据包中。类似地，还有其他几个数据包被显示，而实际上只有两个包含这些字节的数据包也被显示。谁能让我知道这里有什么问题？任何帮助都将受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T21:16:11.627

快速测试表明：

`"\x03\x00\x0e\xa8"`被视为以搜索字符串`\x00`结尾的字符串搜索。即：实际搜索的字符串是`"\x03`".

以下将起作用：

`frame contains 03:00:0e:a8`

请参阅：[显示过滤器](http://wiki.wireshark.org/DisplayFilters)、[Wireshark 用户指南](https://www.wireshark.org/docs/wsug_html_chunked/ChWorkBuildDisplayFilterSection.html)和[ask.wireshark.org](http://ask.wireshark.org/questions/6324/data-filter-by-byte-not-string)

尽管没有明确说明，“...”以通常的 C 字符串常量方式指定以 NULL 结尾的搜索字符串。

# asp.net - vb.net 中的调试器跳过行

> ID：12511814
> 
> 赞同：1
> 
> 时间：2012-09-20T11:38:10.790
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在做一个 vb.net 项目，到目前为止，我还没有机会从事那种项目，因为我一直在专门使用 C#。

我对代码进行了一些更改，并在一个方法上设置了一个断点，我想看看我将从该方法中得到什么，但是虽然我设置了断点，但调试器会跳过该行并转到下一行。

这是代码示例：

```
 Dim decryptEmail As String = DecryptData("myemail@yahoo.com")
        Dim encryptedEmail As String = "myemail@yahoo.com"
        Dim encrpytedPassword As String = "mypassword" 
```

这发生在页面加载事件中，被调试者自动跳过第一行，并立即转到第二行。我想知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:10:36.410

根据我的经验，这类事情可能是由 Visual Studio 中的错误引起的。我通常只是重建解决方案。如果这没有帮助，我退出并重新启动 VS 并重新打开解决方案。我什至不得不重新启动计算机一次以结束奇怪的 VS 行为。

最后但并非最不重要的一点是，如果没有其他帮助，您可以在需要断点的行之前输入 Stop 语句。

# python - 使用 pip 在 python 中安装模块失败

> ID：12511815
> 
> 赞同：12
> 
> 时间：2012-09-20T11:38:10.683
> 
> 标签：python, windows, installation, pip, gdal

我在使用 pip 安装 python 模块时遇到问题。下面是命令窗口的输出：

请注意，我在尝试安装 GDAL 模块之前立即安装了 pip。

我在运行 python 2.7 的 w7 64 位机器上

```
 Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\jnunn\Desktop>python get-pip.py
Downloading/unpacking pip
Downloading pip-1.2.1.tar.gz (102Kb): 102Kb downloaded
Running setup.py egg_info for package pip

warning: no files found matching '*.html' under directory 'docs'
warning: no previously-included files matching '*.txt' found under directory
'docs\_build'
no previously-included directories found matching 'docs\_build\_sources'
Installing collected packages: pip
Running setup.py install for pip

warning: no files found matching '*.html' under directory 'docs'
warning: no previously-included files matching '*.txt' found under directory
'docs\_build'
no previously-included directories found matching 'docs\_build\_sources'
Installing pip-script.py script to C:\Python26\ArcGIS10.1\Scripts
Installing pip.exe script to C:\Python26\ArcGIS10.1\Scripts
Installing pip.exe.manifest script to C:\Python26\ArcGIS10.1\Scripts
Installing pip-2.7-script.py script to C:\Python26\ArcGIS10.1\Scripts
Installing pip-2.7.exe script to C:\Python26\ArcGIS10.1\Scripts
Installing pip-2.7.exe.manifest script to C:\Python26\ArcGIS10.1\Scripts
Successfully installed pip
Cleaning up...

C:\Users\jnunn\Desktop>pip install gdal
Downloading/unpacking gdal
Downloading GDAL-1.9.1.tar.gz (420kB): 420kB downloaded
Running setup.py egg_info for package gdal

Installing collected packages: gdal
Running setup.py install for gdal
building 'osgeo._gdal' extension
c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo
/Ox /MD /W3 /GS- /DNDEBUG -I../../port -I../../gcore -I../../alg -I../../ogr/ -I
C:\Python26\ArcGIS10.1\include -IC:\Python26\ArcGIS10.1\PC -IC:\Python26\ArcGIS1
0.1\lib\site-packages\numpy\core\include /Tpextensions/gdal_wrap.cpp /Fobuild\te
mp.win32-2.7\Release\extensions/gdal_wrap.obj
gdal_wrap.cpp
c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\xlocale(342) :
warning C4530: C++ exception handler used, but unwind semantics are not enabled
. Specify /EHsc
extensions/gdal_wrap.cpp(2853) : fatal error C1083: Cannot open include file
: 'cpl_port.h': No such file or directory
error: command '"c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\c
l.exe"' failed with exit status 2
Complete output from command C:\Python26\ArcGIS10.1\python.exe -c "import se
tuptools;__file__='c:\\users\\jnunn\\appdata\\local\\temp\\pip-build\\gdal\\setu
p.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'
))" install --record c:\users\jnunn\appdata\local\temp\pip-f7tgze-record\install
-record.txt --single-version-externally-managed:
running install

running build

running build_py

creating build

creating build\lib.win32-2.7

copying gdal.py -> build\lib.win32-2.7

copying ogr.py -> build\lib.win32-2.7

copying osr.py -> build\lib.win32-2.7

copying gdalconst.py -> build\lib.win32-2.7

copying gdalnumeric.py -> build\lib.win32-2.7

creating build\lib.win32-2.7\osgeo

copying osgeo\gdal.py -> build\lib.win32-2.7\osgeo

copying osgeo\gdalconst.py -> build\lib.win32-2.7\osgeo

copying osgeo\gdalnumeric.py -> build\lib.win32-2.7\osgeo

copying osgeo\gdal_array.py -> build\lib.win32-2.7\osgeo

copying osgeo\ogr.py -> build\lib.win32-2.7\osgeo

copying osgeo\osr.py -> build\lib.win32-2.7\osgeo

copying osgeo\__init__.py -> build\lib.win32-2.7\osgeo

running build_ext

building 'osgeo._gdal' extension

creating build\temp.win32-2.7

creating build\temp.win32-2.7\Release

creating build\temp.win32-2.7\Release\extensions

c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Ox
/MD /W3 /GS- /DNDEBUG -I../../port -I../../gcore -I../../alg -I../../ogr/ -IC:\P
ython26\ArcGIS10.1\include -IC:\Python26\ArcGIS10.1\PC -IC:\Python26\ArcGIS10.1\
lib\site-packages\numpy\core\include /Tpextensions/gdal_wrap.cpp /Fobuild\temp.w
in32-2.7\Release\extensions/gdal_wrap.obj

gdal_wrap.cpp

c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\xlocale(342) : war
ning C4530: C++ exception handler used, but unwind semantics are not enabled. Sp
ecify /EHsc

extensions/gdal_wrap.cpp(2853) : fatal error C1083: Cannot open include file: 'c
pl_port.h': No such file or directory

error: command '"c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.ex
e"' failed with exit status 2

----------------------------------------
Command C:\Python26\ArcGIS10.1\python.exe -c "import setuptools;__file__='c:\\us
ers\\jnunn\\appdata\\local\\temp\\pip-build\\gdal\\setup.py';exec(compile(open(_
_file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\u
sers\jnunn\appdata\local\temp\pip-f7tgze-record\install-record.txt --single-vers
ion-externally-managed failed with error code 1 in c:\users\jnunn\appdata\local\
temp\pip-build\gdal
Storing complete log in C:\Users\jnunn\pip\pip.log

C:\Users\jnunn\Desktop> 
```

我以前也尝试过使用easy_install，但它返回了一个常见错误：

```
c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE\xlocale(342) : war
ning C4530: C++ exception handler used, but unwind semantics are not enabled. Sp
ecify /EHsc

extensions/gdal_wrap.cpp(2853) : fatal error C1083: Cannot open include file: 'c
pl_port.h': No such file or directory

error: command '"c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.ex
e"' failed with exit status 2 
```

加上以下额外的 pip.log：

```
 Exception information:
Traceback (most recent call last):
File "C:\Python26\ArcGIS10.1\lib\site-packages\pip\basecommand.py", line 107, in main
status = self.run(options, args)
File "C:\Python26\ArcGIS10.1\lib\site-packages\pip\commands\install.py", line 261, in run
requirement_set.install(install_options, global_options)
File "C:\Python26\ArcGIS10.1\lib\site-packages\pip\req.py", line 1166, in install
requirement.install(install_options, global_options)
File "C:\Python26\ArcGIS10.1\lib\site-packages\pip\req.py", line 589, in install
cwd=self.source_dir, filter_stdout=self._filter_install, show_stdout=False)
File "C:\Python26\ArcGIS10.1\lib\site-packages\pip\util.py", line 612, in call_subprocess
% (command_desc, proc.returncode, cwd))
InstallationError: Command C:\Python26\ArcGIS10.1\python.exe -c "import setuptools;__file__='c:\\users\\jnunn\\appdata\\local\\temp\\pip-build\\gdal\\setup.py';exec(compile(open(__file__).read().replace('\r    \n', '\n'), __file__, 'exec'))" install --record c:\users\jnunn\appdata\local\temp\pip-f7tgze-record\install-record.txt --single-version-externally-managed failed with error code 1 in c:\users\jnunn\appdata    \local\temp\pip-build\gdal 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-18T22:20:24.583

这个问题看起来非常类似于[Python GDAL 包在通过 pip 安装时缺少头文件，](https://stackoverflow.com/questions/11336153/python-gdal-package-missing-header-file-when-installing-via-pip)这似乎有工作[解决方案](https://stackoverflow.com/a/12550704/565525)。

[这里](https://stackoverflow.com/a/16629497/565525)解释了具有 CPython 扩展的 python 库的常见问题，解决方案通常是：

> 通过下载并运行 Windows 二进制包来安装库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-14T05:11:51.557

最简单的方法（如 JF Sebastian 所建议）是从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal安装](http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-19T14:26:44.830

问题是 Python 认为安装在 C:\Python\ 上，但事实并非如此，因为它位于portablepython 目录中。我使用链接解决了这个问题。

例如，我的portablepython 目录（或示例中的kivy 目录）是这样的：

```
C:\Users\blabla.KMS\kivy-1.8.0-py3.3-win32\Python33 
```

进入dos提示符并输入：

```
mklink /d c:\Python33\ C:\Users\blabla.KMS\kivy-1.8.0-py3.3-win32\Python33\ 
```

比你可以进入 c:\Python33\Scripts 并使用 PIP 或 easy_install 最后你可以使用以下方法删除链接：

```
rmdir Python33 
```

凉爽的！我在kivy上安装了Django！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T14:49:41.693

这不是 Python 问题，而是在 Windows 上编译源代码的问题。

我假设您按照[安装说明](http://pypi.python.org/pypi/GDAL/)首先安装了 GDAL 二进制文件和头文件？

此外，您可以查看指向可以帮助您的[ubuntu 论坛的](http://ubuntuforums.org/showthread.php?t=1769445)[这个 SO question](https://stackoverflow.com/questions/11336153/python-gdal-package-missing-header-file-when-installing-via-pip)的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-10T22:00:35.100

我遇到了同样的问题，但我需要安装“ebooklib”模块，该模块不在[http://www.lfd.uci.edu/~gohlke/pythonlibs](http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal)的模块列表中。同时我下载了这个模块。但是使用 ebooklib 的 setup.py 安装失败并使用 `error: command '"c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.ex e"' failed with exit status 2` Finnally，我已经从 lfd.uci.edu 分别安装了所有依赖模块，之后使用 setup.py 安装成功。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T15:35:20.390

尝试在没有 anaconda 的情况下安装 ipython 时遇到了类似的问题。第一个 pip 在执行 pip install jupyter 时找不到“cl.exe”，在添加到 PATH 后，我得到了失败，退出状态为 2 错误。

您可以尝试使用 VS 文件来使其正常工作，但对我来说最简单的方法是：

[1) 从https://pypi.python.org/pypi](https://pypi.python.org/pypi)下载 .tar.gz 文件 2) 在文件夹中提取 3) 在从 cmd 提取的文件夹中运行 setup.py：

```
c:\> cd <wherever your extracted folder is from .tar.gz that contains setup.py>
c:\<yourcdhere>>python setup.py install 
```

请注意，如果像我一样，您在 PATH 中没有 python，因为您有 python 32b 和 64b 用于不同的东西，您将不得不手动指向 python（将第二个命令更改为）：

```
c:\<yourcdhere>>pythoninstallpath\python setup.py install 
```

它将自动复制库并将其所有依赖项安装在相应 lib 文件夹下的 python 安装位置。

这样你就可以看到它是如何工作的，这是给我的。但更改目录以匹配您使用的任何内容：

我在“L:\python\py27_32b\ipython-5.3.0”处有 ipython 的 setup.py 提取的文件夹，在“L:\python\py27_32b\install”处安装了 python

```
c:\users\vlox>L:
L:\>cd "python\py27_32b\ipython-5.3.0"
L:\python\py27_32b\ipython-5.3.0>L:\python\py27_32b\install\python setup.py install 
```

瞧！

希望这可以帮助

# java - Android：将值传递给类

> ID：12511817
> 
> 赞同：0
> 
> 时间：2012-09-20T11:38:20.660
> 
> 标签：java, android, class

我有这段代码，我想将一个 int 传递给这个类：

```
if (content_timer.getChildCount() != 0) content_timer.removeAllViews();
                content_timer.addView(new CircleTimer(getApplicationContext())); 
```

然后我有“new CircleTimer(getApplicationContext())”那个实例一个类，但我想在这个类上传递一个值，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:41:36.993

```
if (content_timer.getChildCount() != 0) content_timer.removeAllViews();
                content_timer.addView(new CircleTimer(getApplicationContext(),10));
                                                                             ^^^^^^ 
```

**编辑你的班级**

```
public class CircleTimer
{
int a;
    public CircleTimer(Context cxt, int a) <------
    {
       this.a =a;
    }
.....
} 
```

# javascript - mvc3 运算符下拉列表

> ID：12511819
> 
> 赞同：0
> 
> 时间：2012-09-20T11:38:24.837
> 
> 标签：javascript, .net, asp.net-mvc-3

在 mvc3 中创建相同下拉列表的最佳方法是什么？正如您在此链接中看到的 [Html JS 示例](http://jsfiddle.net/miko5054/Qq4wd/)

我试着这样做

模型：

```
 public enum oporetor
    {

        greater_then = '>',
         less_than  = '<',
         equal = '='

    }

    public oporetor getOp { get; set; }
} 
```

查看模型：

```
 @Html.DropDownListFor(model => model.getOp, new SelectList(Enum.GetValues(typeof(Fnx.Esb.ServiceMonitor.ViewModel.AdvanceSearchModel.oporetor)))) 
```

看法：

```
@Html.EditorFor(x => x.AdvanceSearchModel) 
```

我得到了一个基本的下拉列表，其中包含大于、小于、等于。如何在下拉列表中显示 <,>,=？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:42:17.153

```
@Html.DropDownListFor(
    model => model.getOp,
    ((Fnx.Esb.ServiceMonitor.ViewModel.AdvanceSearchModel.oporetor[])Enum.GetValues(
        typeof(Fnx.Esb.ServiceMonitor.ViewModel.AdvanceSearchModel.oporetor)
    )).Select(x => new SelectListItem
    {
        Value = x.ToString(),
        Text = ((char)x).ToString()
    })
) 
```

或者更好的方法是直接在您的视图模型中准备这些数据：

```
public enum Operator
{
    greater_then = '>',
    less_than = '<',
    equal = '='
}

public class AdvanceSearchModel
{
    public IEnumerable<SelectListItem> Operators 
    {
        get
        {
            return ((Operator[])Enum.GetValues(typeof(Operator)))
                .Select(x => new SelectListItem
                {
                    Value = x.ToString(),
                    Text = ((char)x).ToString()
                });
        }
    }

    public Operator GetOp { get; set; }
} 
```

然后在视图中简单地：

```
@Html.DropDownListFor(model => model.GetOp, Model.Operators) 
```

# xml - xslt 分组问题

> ID：12511824
> 
> 赞同：2
> 
> 时间：2012-09-20T11:38:46.823
> 
> 标签：xml, xslt, xpath

我在使用 XSLT 进行分组时遇到问题。这是我的示例： **这是输入文件：**

```
 <HeadNr>
  <nummerK>989</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>921</Abrufd>
      <Abrufm>20</Abrufm>
      <Summe>103,1</Summe>
      <Einzel>42,1</Einzel>
    </Qua>

    <HeadNr>
  <nummerK>911</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>321</Abrufd>
      <Abrufm>40</Abrufm>
      <Summe>143,1</Summe>
      <Einzel>222,1</Einzel>
    </Qua>

    <HeadNr>
  <nummerK>989</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>922</Abrufd>
      <Abrufm>204</Abrufm>
      <Summe>1033,1</Summe>
      <Einzel>4222,1</Einzel>
    </Qua> 
```

**这是输出文件：**

```
<root>
<HeadNr>
  <nummerK>989</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>921</Abrufd>
      <Abrufm>20</Abrufm>
      <Summe>103,1</Summe>
      <Einzel>42,1</Einzel>
    </Qua>
 </root>
 <root>   
    <HeadNr>
  <nummerK>911</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>321</Abrufd>
      <Abrufm>40</Abrufm>
      <Summe>143,1</Summe>
      <Einzel>222,1</Einzel>
    </Qua>
 </root>
 <root>   
    <HeadNr>
  <nummerK>989</nummerK>
  </HeadNr>

     <Qua>
      <Abrufd>922</Abrufd>
      <Abrufm>204</Abrufm>
      <Summe>1033,1</Summe>
      <Einzel>4222,1</Einzel>
    </Qua>
</root> 
```

我需要将标签以及它们之间的所有内容放在标签中。谢谢你，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:12:34.620

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="HeadNr">
  <root>
   <HeadNr>
     <xsl:apply-templates/>
   </HeadNr>
   <xsl:apply-templates select="following-sibling::Qua[1]" mode="inGroup"/>
  </root>
 </xsl:template>

 <xsl:template match="Qua" mode="inGroup"><xsl:call-template name="identity"/></xsl:template>
 <xsl:template match="Qua"/>
</xsl:stylesheet> 
```

**当应用于此 XML 文档时**（提供的片段包装在单个顶部元素中）：

```
<t>
    <HeadNr>
        <nummerK>989</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>921</Abrufd>
        <Abrufm>20</Abrufm>
        <Summe>103,1</Summe>
        <Einzel>42,1</Einzel>
    </Qua>
    <HeadNr>
        <nummerK>911</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>321</Abrufd>
        <Abrufm>40</Abrufm>
        <Summe>143,1</Summe>
        <Einzel>222,1</Einzel>
    </Qua>
    <HeadNr>
        <nummerK>989</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>922</Abrufd>
        <Abrufm>204</Abrufm>
        <Summe>1033,1</Summe>
        <Einzel>4222,1</Einzel>
    </Qua>
</t> 
```

**产生想要的正确结果**：

```
<t>
   <root>
      <HeadNr>
         <nummerK>989</nummerK>
      </HeadNr>
      <Qua>
         <Abrufd>921</Abrufd>
         <Abrufm>20</Abrufm>
         <Summe>103,1</Summe>
         <Einzel>42,1</Einzel>
      </Qua>
   </root>
   <root>
      <HeadNr>
         <nummerK>911</nummerK>
      </HeadNr>
      <Qua>
         <Abrufd>321</Abrufd>
         <Abrufm>40</Abrufm>
         <Summe>143,1</Summe>
         <Einzel>222,1</Einzel>
      </Qua>
   </root>
   <root>
      <HeadNr>
         <nummerK>989</nummerK>
      </HeadNr>
      <Qua>
         <Abrufd>922</Abrufd>
         <Abrufm>204</Abrufm>
         <Summe>1033,1</Summe>
         <Einzel>4222,1</Einzel>
      </Qua>
   </root>
</t> 
```

**请注意**：

这种转换*看起来*比只使用`<xsl:copy-of>`. 但是，它更加灵活和可扩展，允许定义与组内元素匹配的其他模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:03:48.823

看起来您正在尝试将**HeadNr**元素与第一个**Qua**兄弟元素“分组”。

假设您的输入 XML 具有 XML 的根元素，您只需选择**HeadNr**元素即可

```
<xsl:apply-templates select="HeadNr" /> 
```

然后您将有一个模板来匹配这些，如果您创建**根**元素并复制当前元素和以下**Qua**元素。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <xsl:apply-templates select="HeadNr" />
   </xsl:template>

   <xsl:template match="HeadNr">
      <root>
         <xsl:copy-of select="." />
         <xsl:copy-of select="following-sibling::Qua[1]" />
      </root>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML（当给定根元素时）时，输出以下内容

```
<root>
    <HeadNr>
        <nummerK>989</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>921</Abrufd>
        <Abrufm>20</Abrufm>
        <Summe>103,1</Summe>
        <Einzel>42,1</Einzel>
    </Qua>
</root>
<root>
    <HeadNr>
        <nummerK>911</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>321</Abrufd>
        <Abrufm>40</Abrufm>
        <Summe>143,1</Summe>
        <Einzel>222,1</Einzel>
    </Qua>
</root>
<root>
    <HeadNr>
        <nummerK>989</nummerK>
    </HeadNr>
    <Qua>
        <Abrufd>922</Abrufd>
        <Abrufm>204</Abrufm>
        <Summe>1033,1</Summe>
        <Einzel>4222,1</Einzel>
    </Qua>
</root> 
```

# wpf - 在 WPF 的代码隐藏中添加用户控件

> ID：12511826
> 
> 赞同：0
> 
> 时间：2012-09-20T11:38:55.897
> 
> 标签：wpf

我无法将用户控件添加到我的界面（在 xaml 中或通过后面的代码）。我浏览了论坛，但没有找到任何东西。

要创建 UC，我所做的只是去 File --> Add --> User Control

在我后面的代码中，我试图通过单击按钮将控件添加到我的停靠面板。我尝试通过窗口和停靠面板处理点击，但无济于事。

这是我用来在后面的代码中将 UC 添加到停靠面板的代码：

```
Company myControl = new Company();
theDock.Children.Add(myControl);
DockPanel.SetDock(myControl, Dock.Right); 
```

有任何想法吗？

# authentication - 玩 1.2.5 + Activiti (BPM) restful + 认证

> ID：12511827
> 
> 赞同：2
> 
> 时间：2012-09-20T11:39:04.687
> 
> 标签：authentication, playframework, playframework-1.x, basic-authentication, activiti

希望你们中的一些人会偶然发现并希望通过上述内容。

**首先让我从我的问题开始：**

我需要在活动 restful 服务上验证当前登录的用户

这需要我使用（在我的情况下）restlet 客户端 api 来创建到需要用户身份验证的 restful activiti api 的 http 连接。

```
Reference reference = new Reference(Play.configuration.getProperty("activiti.rest.url") + "/tasks?assignee=kermit");
Client client = new Client(Protocol.HTTP);
Request request = new Request(Method.GET, reference);
request.setChallengeResponse(new ChallengeResponse(ChallengeScheme.HTTP_BASIC, "kermit", "kermit")); 
```

这工作正常并根据需要返回所有内容。

**问题：**

我正在寻找一种将网络用户名/密码传递到上述代码中的方法。

1.  由于我通过*Security.isConnected()*获得了登录名，因此我可能只需要将密码保存在缓存中并在某个时候进行清理。
2.  可能在 controllers.Security.java 类中构建一些软单点登录解决方案以生成令牌，然后扩展活动以接受此令牌而不是
3.  期待您尊贵的个人提供更好的解决方案

如果我不需要并且已经搜索过活动文档，我不想保留密码。似乎他们只支持基本身份验证。restlet api 确实支持 oauth 和各种类型，但我找不到 activiti 已实现或用于自定义实现的示例。

欢迎任何建议/意见。

问候德里克

# ruby - 在 Openshift 中注册公钥时出错

> ID：12511830
> 
> 赞同：0
> 
> 时间：2012-09-20T11:39:08.530
> 
> 标签：ruby, git, openshift

添加我的公钥时出现错误，它显示此错误代码：“ *`Error updating settings on gear: 01779aa6c3e04c71be82fbaa10662fcf with status: -1 and output:`*”

知道为什么每次我注册公钥时都会显示这个.....//

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:09:23.310

我们认为这是我们在周二的最新更新中出现的问题，目前正在调查中。当您添加 SSH 密钥时，我们会将其复制到您的每个应用程序（因此 git 可以工作） - 看起来复制过程开始失败。

编辑：我们修复了生产中的一个问题，该问题影响了导致此症状的少数用户。如果问题没有得到解决，请告诉我们，我们将进一步调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:13:05.393

我遇到了同样的错误。看起来像他们的内部服务器问题..

编辑：您似乎无法对可在 openShift 中测试的应用程序设置安全性。这说得通。删除您从 OpenShift 获得的测试应用程序。

我解决了。该号码 {01779aa6c3e04c71be82fbaa10662fcf} 是您当前在您的域中拥有的应用程序。我删除了那里的所有应用程序。先备份，然后清理您的域。再次更新您的公钥，我 100% 确定它会起作用。

请小心执行此操作。首先备份您的应用程序。去除

```
rhc app destroy -a {appName} -d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:25:07.403

***这是我的愚蠢错误，只是我必须在 Putty 中进行身份验证时添加我的私钥。***

# perl - sed 或 perl 替换字符，使某些文本保持不变

> ID：12511832
> 
> 赞同：-1
> 
> 时间：2012-09-20T11:39:24.123
> 
> 标签：perl, replace, sed

> **可能重复：**
> [sed 替换字符，使某些文本保持不变](https://stackoverflow.com/questions/12490806/sed-replace-characters-leaving-some-text-intact)

如何使用 sed（或 perl）替换某些字符，但保留未知数字不变 in.e. 在文件中有多行是这样的：

```
<"START=xxx">
<"START=yyy">
<"START=zzz"> 
```

“xxx”、“yyy”和“zzz”是不同的未知值（数字）。我想删除结尾 "> 并替换它，也替换开头（但这对我来说并不难）所以最后文件看起来像这样：

```
<START>xxx</START>
<START>yyy</START>
<START>zzz</START> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:55:02.293

为了好玩，一个 Perl 解决方案：

```
perl -pe's#<"(.+?)=(\d+)">#<$1>$2</$1>#' <file >outfile 
```

或者

```
perl -pie's#<"(.+?)=(\d+)">#<$1>$2</$1>#' file 
```

用于就地更换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:44:31.943

这应该这样做：

```
sed 's;<"\([^=]\+\)=\([^"]\+\)">;<\1>\2</\1>;' file 
```

但是请记住，`xml`使用面向行的工具处理类似内容并不是正确的方法，除非格式非常严格并且案例集中在格式化语言的严格且定义明确的子集上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:51:55.343

```
awk -F"=" '{gsub(/\"|<|>/,"");print "<"$1">"$2"</"$1">"}' your_file 
```

测试如下：

```
> cat temp
<"START=xxx">
<"START=yyy">
<"START=zzz">
> awk -F"=" '{gsub(/\"|<|>/,"");print "<"$1">"$2"</"$1">"}' temp
<START>xxx</START>
<START>yyy</START>
<START>zzz</START> 
```

# c# - ORA-06550: 调用 'CHECK_INFO_INS' 的参数数量或类型错误

> ID：12511835
> 
> 赞同：0
> 
> 时间：2012-09-20T11:39:28.080
> 
> 标签：c#, oracle, stored-procedures, plsql

这是我的程序，它通过 PL/SQL Developer 工作：

```
create or replace procedure CHECK_INFO_INS
(
    p_id_aircraft IN VARCHAR2,           
    p_id_check_type IN NUMBER,     
    p_last_check   IN DATE,             
    p_next_check   IN DATE,             
    p_expectedcost IN NUMBER,                             
    p_id_currency  IN NUMBER,
    p_currency_rate IN NUMBER                         
)             
is
Rate number;
CurrentDate Date;
catID Checkcategories.Id%type;
begin
select C.ID into catID from CHECKCATEGORIES C WHERE C.NAME='C' and C.CHECKTYPEID = p_id_check_type;

  Rate:=round(p_expectedcost/MONTHS_BETWEEN(p_next_check, p_last_check),3)*p_currency_rate;
  CurrentDate := SYSDATE;
  INSERT INTO CHECK_INFO
  (
      id_check_info,            
      id_aircraft,              
      id_check_categories,      
      last_check,               
      next_check,              
      expectedcost,             
      is_accumulation_complited,
      rate,                     
      id_currency,              
      current_date,             
      monthes_between,
      CURENCY_RATE             
 )
  values
  (
    CHECKS_INFO_SEQ.NEXTVAL,
    p_id_aircraft,
    catID,
    p_last_check,
    p_next_check,
    p_expectedcost,
    0,
    Rate,
    p_id_currency,
    CurrentDate,
    round(MONTHS_BETWEEN(p_next_check, p_last_check),1),
    p_currency_rate
  );
  commit;
    EXCEPTION
    WHEN OTHERS
    THEN
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
      ROLLBACK;
end CHECK_INFO_INS; 
```

这是我的 C# 代码：

```
 decimal expectedCost = Decimal.Parse(ExpCostTextBox.Text);
        DateTime lastCheck = DateTime.Parse(LastCheckdateTimePicker.Text);
        DateTime nextCheck = DateTime.Parse(NextCheckdateTimePicker.Text);
        int checkType = int.Parse(ChCmbx.SelectedValue.ToString());
        string AirCraft = AirCraftCmbx.SelectedValue.ToString();
        int curID = int.Parse(CurrComboBox.SelectedValue.ToString());
        decimal curRate = decimal.Parse(CurRateTextBox.Text.Replace('.',','));

        con = new OracleConnection(conStr);
        con.Open();
        cmd = con.CreateCommand();
        cmd.BindByName = true;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = schema_name + ".CHECK_INFO_INS";

        cmd.Parameters.Add("p_id_aircraft", OracleDbType.NVarchar2, AirCraft, ParameterDirection.Input);
        cmd.Parameters.Add("p_id_check_categories", OracleDbType.Int32, checkType, ParameterDirection.Input);
        cmd.Parameters.Add("lastCheck", OracleDbType.Date, lastCheck, ParameterDirection.Input);
        cmd.Parameters.Add("nextCheck", OracleDbType.Date, nextCheck, ParameterDirection.Input);
        cmd.Parameters.Add("p_expectedcost", OracleDbType.Decimal, expectedCost, ParameterDirection.Input);
        cmd.Parameters.Add("p_id_currency", OracleDbType.Int32, curID, ParameterDirection.Input);
        cmd.Parameters.Add("p_currency_rate", OracleDbType.Decimal, curRate, ParameterDirection.Input);
        cmd.ExecuteNonQuery(); 
```

它在 executeNonQuery 行上引发异常：

```
ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'CHECK_INFO_INS'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我试图重新创建该过程，但它不起作用。我的 C# 代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:38:10.117

我对 Oracle 不是很熟悉，但是您的过程中的第二个参数名为“p_id_check_type”，而当您将参数添加到参数集合时，您使用名称“p_id_check_categories”。这可能是你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:47:59.683

`:p_currency_rate`Oracle 参数名称在参数列表和 SQL 语句中都应以冒号开头，例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:48:21.740

克里斯是对的，

您在调用存储过程时使用了错误的参数名称。

所以在你的电话中：

```
 cmd.Parameters.Add("p_id_check_categories", OracleDbType.Int32, checkType, ParameterDirection.Input);
cmd.Parameters.Add("lastCheck", OracleDbType.Date, lastCheck, ParameterDirection.Input);
        cmd.Parameters.Add("nextCheck", OracleDbType.Date, nextCheck, ParameterDirection.Input); 
```

它应该与在存储过程中找到的参数值相同，如下所示：

```
 cmd.Parameters.Add("p_id_check_type", OracleDbType.Int32, checkType, ParameterDirection.Input);
cmd.Parameters.Add("p_last_check", OracleDbType.Date, lastCheck, ParameterDirection.Input);
        cmd.Parameters.Add("p_next_check", OracleDbType.Date, nextCheck, ParameterDirection.Input); 
```

至少每当我遇到这个问题时：

> PLS-00306：调用“CHECK_INFO_INS”时参数的数量或类型错误

这通常是我遇到这个问题的原因，除非我的参数顺序错误。

# css - 页面未在 Ipad 中居中

> ID：12511836
> 
> 赞同：0
> 
> 时间：2012-09-20T11:39:28.957
> 
> 标签：css, ipad, html

网站似乎在所有浏览器中都运行良好，但不是以 Ipad 为中心。

这是[页面](http://www.reyescaballerorey.com/voodoo_page/)

关于如何解决这个问题的任何想法？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:48:31.847

**您应该使用 % 和 em 来定义您使用 px 的宽度。**

你在身体上定义了宽度：

```
body 
{
     line-height:0;
     min-width:1366px;
} 
```

和许多元素。

搜索[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)

看看[这个](https://stackoverflow.com/questions/12493158/adaptive-layouts-in-css3/12493709#12493709)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:51:02.097

**将#container** DIV的大小减小到**800px**。

像这样写：

```
body 
{
     line-height:0;
     min-width:800px;
}
div#container{
 width:800px;
} 
```

# c# - 使用 LINQ 方法语法对记录进行分组

> ID：12511838
> 
> 赞同：0
> 
> 时间：2012-09-20T11:39:40.293
> 
> 标签：c#, linq, entity-framework

我试图找到一种使用 LINQ 方法语法按日期（不考虑时间）对记录进行分组的方法，但只选择每条记录的一个实例（即模型中的 ItemId）

我的简单查询如下：

```
range1.Count(x => ((x.OpenedDate >= todayFirst) && (x.OpenedDate <= todayLast)) 
```

我如何计算这个范围内的唯一记录`ItemId`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:45:38.060

听起来像你想要的：

```
var query = range1.Where(x.OpenedDate >= todayFirst && x.OpenedDate <= todayLast)
                  .GroupBy(x => x.ItemId)
                  .Select(g => new { ItemId = g.Key, Count = g.Count() });

foreach (var result in query)
{
    Console.WriteLine("{0} - {1}", result.ItemId, result.Count);
} 
```

不过，我可能还没有真正理解你的意思——不清楚你是否真的想按日期或项目 ID 分组

编辑：如果您只想要该范围内不同项目 ID 的计数，您可以使用：

```
var count = range1.Where(x.OpenedDate >= todayFirst && x.OpenedDate <= todayLast)
                  .Select(x => x.ItemId)
                  .Distinct()
                  .Count(); 
```

# ios - 带有谷歌地图的应用程序将在 ios6 中运行

> ID：12511840
> 
> 赞同：1
> 
> 时间：2012-09-20T11:39:42.527
> 
> 标签：ios, google-maps, ios6, ios6-maps

使用谷歌地图（iOS5）构建的应用程序，当用户将他们的设备更新到 iOS 6 时会完美运行吗？有向后兼容吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:11:34.727

是的，它们应该可以正常工作。API 没有改变。

新地图看起来有些不同，但在功能上它们是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:12:20.930

刚刚注意到一个问题：使用新地图，您无法显示整个世界的地图（想想`setRegion`）。尝试在地图应用程序中尽可能缩小。

# ruby-on-rails - Rails3.2.x：如何管理 Phusion Passenger 的后台队列？

> ID：12511846
> 
> 赞同：0
> 
> 时间：2012-09-20T11:40:05.197
> 
> 标签：ruby-on-rails, ruby, heroku, delayed-job, passenger

我有一些在 Heroku 上部署的经验，并且我知道如何使用[Procfile](https://devcenter.heroku.com/articles/procfile)来声明进程。我通常将 Thin 或 Unicorn 用于 Web 部件（http 请求处理），然后使用[Delayed Job](https://github.com/collectiveidea/delayed_job)管理我的后台任务。

现在，我将在 Heroku 上运行 Rails 3.2.8 (Ruby 1.9.3) 应用程序并将其带到“普通”服务器上，它将在 PhusionPassenger 上运行。我不确定Passenger 产生子进程的方式，以及它如何处理后台队列。我需要确保 web 队列不会被耗时的任务填满：那些我曾经在 Heroku 后台运行的任务。

有没有办法管理乘客的队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:31:02.083

Passenger doesn't handle background queues - typically you'd do exactly as you were doing on heroku and offload those tasks onto delayed job, sidekiq, resque etc.

The only difference would be how you manage those processes. You could keep using a procfile and run them via the foreman gem or you could use something like god or bluepill

# winapi - 使用 GDIPlus (WIN32 C++) 显示存储为 alpha 资源的图标

> ID：12511853
> 
> 赞同：3
> 
> 时间：2012-09-20T11:40:37.187
> 
> 标签：winapi, icons, gdi+, embedded-resource

我有一个要使用 GDIPlus 显示的带有部分 alpha（alpha 值在 0 到 255 之间）的图标。当使用采用直接文件名的 GDI+ 的位图构造函数时，文件正确显示。但是，当从资源加载时，它在识别 alpha 时出现问题。我查看了 MSDN，发现 alpha 存在问题：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms536318.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms536318.aspx)。通过从图标中检索 ICONINFO 结构，我可以摆脱完全透明的像素，但是，部分透明的像素仍然显示为完全不透明或完全透明。

我想知道如何从具有部分 alpha 值的资源中的图标创建 Win32 位图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:25:54.660

您可以使用[LoadResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)获取指向图标及其图像数据的指针。您可以将指向图像数据的指针传递给适当的[Bitmap 构造函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms536315%28v=vs.85%29.aspx)。这有点麻烦，因为图标有一种[特殊的资源格式](http://blogs.msdn.com/b/oldnewthing/archive/2012/07/20/10331787.aspx)。

如果可能，将图像存储为透明（即 32bpp argb）位图会更简单。在这种情况下，您可以将LoadImage 与[LR_CREATEDIBSECTION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx)一起使用。

**更新**

显然 LoadIcon 确实正确加载了 alpha。当您从 HICON 构造 GdiPlus::Bitmap 时，问题似乎是 GdiPlus 不尊重 alpha。你可以做的是：

*   使用 LoadIcon 加载图标。
*   使用 GetIconInfo 获取 ICONINFO。hbmColor 是透明位图的句柄。
*   使用 GetDIBits 从 hbmColor 获取位图位。
*   将数据传递给接收位并理解 alpha的[位图构造函数。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms536315%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:04:30.777

调用 LoadIcon**后**alpha 通道受到干扰。加载图标的 Win32 API，例如 LoadIcon、LoadImage 等已经得到了很好的证明。他们可靠地加载带有部分 alpha 的图标。

您需要调查加载图标后执行的代码。我不能给你解决方案或解释，但我相信 LoadIcon 不是罪魁祸首。

> 我想知道如何从具有部分 alpha 值的资源中的图标创建 Win32 位图。

调用 GetIcon 或 GetImage 获取 HICON。然后调用 GetIconInfo。您需要的位图位于 ICONINFO 结构的 hbmColor 字段中。

# validation - 获取 Symfony2.1 中 FormType 扩展中的断言约束列表

> ID：12511856
> 
> 赞同：0
> 
> 时间：2012-09-20T11:40:49.140
> 
> 标签：validation, symfony, symfony-forms, symfony-2.1

我正在尝试使用 javascript 实现客户端表单验证，我想通过将它们放在字段数据属性中来使用实体或表单中定义的验证。

问题是我不知道也找不到任何关于如何从 FormType 扩展中获取约束的信息。

我认为 FormBuilder 应该可以访问用于开始验证的数据，但似乎没有任何方法可以检索约束。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:31:01.453

您可以使用：

```
$validators = $form->getConfig()->getValidators(); 
```

在您的表单对象上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:14:19.740

最后我找到了解决方案。它可能不是最好的，但对我有用。

我将 Validator 服务注入到 FormTypeExtension 中。
那我可以做

`$this->validator->getMetadataFactory()->getClassMetadata($options['data_class']);`

我还必须将服务别名从“字段”更改为“表单”以获取选项中的 data_class。

希望这可以帮助遇到同样问题的人。
如果需要，我可以发布更多详细信息。

# c# - 字典列表或文件访问方法或 C# 中的任何其他方法

> ID：12511857
> 
> 赞同：0
> 
> 时间：2012-09-20T11:40:50.427
> 
> 标签：c#, .net, visual-studio-2010

我有一个文本文件，其类型完全相同：

```
**Unique-Key_1**
Value1
Value2

**Unique-Key_2**
Value1

**Unique_Key_3**
Value1 
```

（请注意，键和值不是固定的。它们可能会随着时间的推移而增长，但有一点可以确定：它将始终遵循这种结构）

我的程序想要搜索一个键，然后检索它下面的所有值。

我对此有一些可行的解决方案。

1）我应该使用字典类型，然后当我的应用程序加载时读取所有键和值并填充该列表？

2）我可以在运行时使用文件访问/搜索方法并基于一个键，搜索它然后检索值吗？

3）哪种方法是最佳方法，或者是否有任何方法或任何其他方法可以达到相同的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:45:32.300

需要考虑的事项：

1.  在搜索数据之前，应用程序是否有时间加载和解析文件？如果是这样，请考虑将文件解析为字典。如果没有，请根据需要解析文件。
2.  文件会很大吗？如果是这样，将其解析为 Dictionary 可能会占用太多内存。考虑一个 LRU 缓存，例如[C# 的对象缓存](https://stackoverflow.com/questions/581119/object-cache-for-c-sharp)。
3.  文件中的键是否已排序？如果是这样，则可以对文件进行二进制搜索以加快文件解析。
4.  数据是否经常变化？如果是这样，解析文件将保证数据是最新的，但代价是数据访问速度较慢。

另一种选择是将值加载到数据库表或键/值存储中。这允许在需要时以合理的访问速度更新数据，但以维护和运行数据库为代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:47:28.190

好的，如果文件不是那么大，我会推荐这种`Dictionary`方法，因为它可以在运行时更轻松、更高效地访问它。但是，如果文件太大而无法保存在内存中，您可以使用[此答案中提供](https://stackoverflow.com/questions/2437716/search-text-file-using-c-sharp-and-display-the-line-number-and-the-complete-line)的算法来搜索它。

# c++ - 动态分配的 shared_ptr 可以通过它管理的对象的 dtor 删除自己吗？

> ID：12511860
> 
> 赞同：-20
> 
> 时间：2012-09-20T11:41:00.400
> 
> 标签：c++, multithreading

在回答另一个问题时，我突然想到我可能会优化我自己的一些旧代码，这些代码有错误......“不是最佳”生命周期管理。

我至少有一个应用程序，其中对象的访问/生命周期由 shared_ptr 控制。这个ptr是动态分配的，因此它可以“原子地”换出另一个*shared_ptr，（因此是一个由新ptr管理的更新对象），没有任何锁定。这似乎工作正常，但我故意泄漏旧的 ptr，因为我不知道最后一个线程何时完成。

现在我突然想到，我可以（也许）删除（）正在管理的旧对象的 dtor 中的旧 *shared_ptr。我会在创建时将 *sharedPtr 加载到托管对象的私有数据成员中，以便 dtor 可以将其删除。

有没有人这样做过，或者对为什么它可能不安全有任何看法？我可以尝试一下，但我担心，就像许多多线程“优化”一样，它可能只是“看起来有效”，直到我交付它之后:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T11:44:26.080

听起来您的代码中有一个糟糕的设计问题比其他任何事情都多。首先，你为什么要创建一个`shared_ptr*`？这似乎已经错了。

然后因为不知道其他线程什么时候用完就泄露了？什么？？那很糟。

为什么不只拥有两个`shared_ptr`并正确使用它们呢？也许这会让你的生活更轻松。

此外，不，您不能`shared_ptr*`使用它拥有的对象的析构函数来删除自己。那可能会进入一个牢不可破的循环。因为 shared_ptr 试图删除它拥有的对象，然后它会尝试删除所有者，这反过来......你明白了......这很愚蠢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:50:04.747

这是不好的。最好简单地吸收更改 . 的锁定`shared_ptr`，或者您可以使用 DCAS 原子地交换`shared_ptr`. 实现这将是......有趣，但可能。

你的根本问题是

1.  你需要原子指针交换
2.  你需要引用计数
3.  `shared_ptr`不提供#1。

因此，要么把它搞定，然后开锁，要么你只需要修改`boost::shared_ptr`'s 的源代码以允许 #1。

我的意思是，这里真正的问题是，你到底为什么要进行全局配置？这对我来说似乎是真正的问题。

# spring - 丰富：文件上传 ViewExpiredException

> ID：12511862
> 
> 赞同：0
> 
> 时间：2012-09-20T11:41:13.157
> 
> 标签：spring, jsf-2, richfaces, viewexpiredexception

我使用丰富的：文件上传：

```
<rich:fileUpload id="upload" addLabel="Add File"
      clearAllLabel="Delete Files" deleteLabel="Remove" 
      uploadLabel="Process Fle" doneLabel="Processed file" 
      clearLabel="Close" listHeight="100" 
      maxFilesQuantity="1" fileUploadListener="#{mbean.listener}" > 
      <a4j:ajax event="uploadcomplete" execute="@none" render="panelResult"  />
</rich:fileUpload> 
```

mbean.listener 中的 java 代码运行正常，但是当进程完成时，显示以下错误：

```
09:03:49,385 ERROR [br.com.enterprise.enterprisex.faces.common.EnterpriseExceptionHandler] EnterpriseExceptionHandler.handle: 
javax.faces.application.ViewExpiredException: /1_ProcessForm.jsfNo saved view state could be found for the view identifier: /1_ProcessForm.jsf
at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:132)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

mbean.listener：

```
 public void listener(FileUploadEvent event) throws Exception {
    UploadedFile item = event.getUploadedFile();
    LOGGER.debug("upload listener: fileName=" + item.getName());        
} 
```

此错误仅发生在 Richfaces 的此组件中。是否需要做一些额外的配置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:55:38.740

Do you recognize that path `/1_ProcessForm.jsf`? The context is choking on this bit most likely because that path doesn't exist. Does that path exactly correspond to the view id of the page on which you're doing the file upload (including the leading slash, '/')

EDIT : Apparently [a bug with RF 4.0](https://community.jboss.org/message/619183) might be to blame for this. Let's know how you get on with this issue

# iphone - 无法在 Xcode 4.5 中安装 iOS 5.1 模拟器

> ID：12511864
> 
> 赞同：2
> 
> 时间：2012-09-20T11:41:21.750
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

当我想在 Xcode 4.5 中安装 iOS 5.1 Simulator 时，我收到以下错误

![安装 iOS 5.1 模拟器时出错](../Images/2c438735713e7f4258d04f8477a960ea.png)

你可以看到我已经安装了 iOS 5.0 Simulator 没有问题。你知道我该如何解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:57:15.173

如果可能，我刚刚更新了 OSX 并重新启动了 XCode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T01:05:24.440

虽然苹果没有解决此问题，但您可以[在此处找到临时解决方案](http://pieces.dominikporada.com/post/31915100911/simulator)

在[这个问题](https://stackoverflow.com/questions/9819764/cant-update-command-line-tools-because-xcode-tells-me-i-dont-have-access-to-th)上归功于jesper [-christensen](https://stackoverflow.com/users/1514022/jesper-christensen/ "杰斯珀-克里斯滕森")。

干杯杰斯珀和多米尼克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:06:25.607

你可以尝试去[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)手动下载。

我遇到了和你一样的问题，我无法从 XCode 4.5 下载命令行工具，并出现与你相同的错误消息。我注意到当我登录 Apple Developer 门户上的会员中心时，我收到了一些警告消息，说 Apple 已经更改了一些许可协议文本。应接受此许可协议更改。否则，我什至无法访问 iPhone 开发者门户的 iOS 6 SDK beta 部分。接受这一点后，我能够下载最新版本的 XCode 4.5 并从 XCode 进行所有更新（命令行工具和 iOS 5.0 模拟器也是如此）。

# java - Eclipse 报告正确（如我假设）代码的 HTML 警告

> ID：12511873
> 
> 赞同：1
> 
> 时间：2012-09-20T11:42:06.080
> 
> 标签：java, html, eclipse, servlets

我的应用程序中有一个 servlet，它有它的映射，比如“/hello”。然后我在 html 页面中引用了这个 servlet `<a href=”hello”&gt;Hello</a>`：。Eclipse 在 html 页面中对“hello”给出警告，说：“Resource not found: hello”。无论如何，当我开始项目时，一切正常。我的项目具有标准的 Web 项目配置。为什么 Eclipse 会给出这样的警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T11:44:21.270

尝试更换

```
<a href=”hello”&gt;Hello</a> 
```

和

```
<a href="/hello">Hello</a> 
```

**注意：**引号的变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T11:12:33.837

如果“hello”是一个文件夹，里面是否有 index.xy 文件？如果没有，您必须将后缀添加到您的链接。我假设 hello 文件夹/文件位于 html 文件所在的目录中

# objective-c - 没有 UIImageView 的 UIImage 的反射

> ID：12511877
> 
> 赞同：1
> 
> 时间：2012-09-20T11:42:32.017
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, uiimage

如何在不使用 UIImageView 的情况下创建 UIImage 的反射？我已经看到使用两个 imageViews 进行反射的苹果代码，但我不想在我的应用程序中添加 imageview 我只想要原始图像和反射图像的整个图像。有没有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:53:04.483

不久前我写了一篇 使用视图的 CAReplicatorLayer的[博客文章。](http://saveme-dot-txt.blogspot.com/2011/06/dynamic-view-reflection-using.html)它实际上是为处理具有反射的视图的动态更新而设计的，但我认为它也适用于您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:55:04.810

[这来自由Nick Lockwood](https://stackoverflow.com/users/422133/nick-lockwood)创建的 UIImage+FX.m

```
UIImage * processedImage = //here your image
processedImage = [processedImage imageWithReflectionWithScale:0.15f
                                                                          gap:10.0f
                                                                        alpha:0.305f]; 
```

scale是反射的大小，gap是图像和反射之间的距离，alpha是反射的alpha

```
- (UIImage *)imageWithReflectionWithScale:(CGFloat)scale gap:(CGFloat)gap alpha:(CGFloat)alpha
{
    //get reflected image
    UIImage *reflection = [self reflectedImageWithScale:scale];
    CGFloat reflectionOffset = reflection.size.height + gap;

    //create drawing context
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(self.size.width, self.size.height + reflectionOffset * 2.0f), NO, 0.0f);

    //draw reflection
    [reflection drawAtPoint:CGPointMake(0.0f, reflectionOffset + self.size.height + gap) blendMode:kCGBlendModeNormal alpha:alpha];

    //draw image
    [self drawAtPoint:CGPointMake(0.0f, reflectionOffset)];

    //capture resultant image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return image
    return image;
} 
```

和

```
- (UIImage *)reflectedImageWithScale:(CGFloat)scale
{
    //get reflection dimensions
    CGFloat height = ceil(self.size.height * scale);
    CGSize size = CGSizeMake(self.size.width, height);
    CGRect bounds = CGRectMake(0.0f, 0.0f, size.width, size.height);

    //create drawing context
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0f);
    CGContextRef context = UIGraphicsGetCurrentContext();

    //clip to gradient
    CGContextClipToMask(context, bounds, [[self class] gradientMask]);

    //draw reflected image
    CGContextScaleCTM(context, 1.0f, -1.0f);
    CGContextTranslateCTM(context, 0.0f, -self.size.height);
    [self drawInRect:CGRectMake(0.0f, 0.0f, self.size.width, self.size.height)];

    //capture resultant image
    UIImage *reflection = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return reflection image
    return reflection;
} 
```

渐变蒙版

```
+ (CGImageRef)gradientMask
{
    static CGImageRef sharedMask = NULL;
    if (sharedMask == NULL)
    {
        //create gradient mask
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(1, 256), YES, 0.0);
        CGContextRef gradientContext = UIGraphicsGetCurrentContext();
        CGFloat colors[] = {0.0, 1.0, 1.0, 1.0};
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
        CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, colors, NULL, 2);
        CGPoint gradientStartPoint = CGPointMake(0, 0);
        CGPoint gradientEndPoint = CGPointMake(0, 256);
        CGContextDrawLinearGradient(gradientContext, gradient, gradientStartPoint,
                                    gradientEndPoint, kCGGradientDrawsAfterEndLocation);
        sharedMask = CGBitmapContextCreateImage(gradientContext);
        CGGradientRelease(gradient);
        CGColorSpaceRelease(colorSpace);
        UIGraphicsEndImageContext();
    }
    return sharedMask;
} 
```

它返回带有反射的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:44:59.650

您可以在图形上下文中渲染图像及其反射，然后从上下文中获取 a ，然后再`CGImage`从该上下文中获取 a `UIImage`。但问题是：为什么不使用两个视图呢？为什么你会认为这是一个问题或限制？

# oracle - 如何使用 PLSQL Developer 从 Oracle UTF8 数据库中读取汉字

> ID：12511881
> 
> 赞同：1
> 
> 时间：2012-09-20T11:42:38.877
> 
> 标签：oracle, encoding, plsql, globalization, plsqldeveloper

我有一个字符集为 AL32UTF8 的 Oracle 数据库，但我无法读取某些信息（例如汉字）。如何配置我的 PLSQL Developer 以读取这些字符？

顺便说一句，当我阅读此信息时，它会显示为 ???

我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:07:20.010

我自己找到了答案。

需要在以下路径 HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\KEY_ODACHome2 中更改 NLS_LANG 注册表

并用正确的语言设置它。就我而言，它是：AMERICAN_AMERICA.AL32UTF8

不管怎样，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T08:54:29.737

设置 NLS_LANG 环境变量也适用于我。

变量：NLS_LANG

值：AMERICAN_AMERICA.AL32UTF8

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T01:48:39.830

您`NLS_CHARACTERSET`应该设置为 AL32UTF8 并确保该参数`NLS_NCHAR_CHARACTERSET`设置为 UTF8。

```
 SQL> ALTER SESSION SET NLS_NCHAR_CHARACTERSET = 'UTF8'; 
```

# javascript - 从访问者如何与 javascript 表单交互（客户端）收集数据

> ID：12511882
> 
> 赞同：0
> 
> 时间：2012-09-20T11:42:40.563
> 
> 标签：javascript, forms, validation, cookies, session-cookies

我正在做有关学生如何使用网络测验作为学习工具的教育研究。我设置了一个网络测验，显示植物的照片并要求学生输入正确的学名。

[http://www.plantsciences.ucdavis.edu/courses/enh6/quiz/quiz_sn.html](http://www.plantsciences.ucdavis.edu/courses/enh6/quiz/quiz_sn.html)

使用 Google Analytics 之类的工具，我可以看到学生查看的照片数量（因为每张新照片都涉及来自服务器的请求）。但我也想知道学生输入正确答案的次数和错误答案的次数。该表单全部使用 javascript 在客户端进行检查，因此给出正确或错误的答案不会启动与服务器的任何通信。

有没有办法使用 cookie 或其他方式收集这些数据？或者我可以让表单请求每个正确或错误答案的某个单像素 gif，以便服务器可以记录正在发生的事情？还是我需要重新编程所有内容并在服务器上处理表单以收集这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:58:18.283

如果您只想记录正确/错误的答案，最简单的做法是在您的服务器上公开一个 API，您可以在其中发送您想要存储的信息。然后，您可以在收到答案后向它发出 AJAX 请求，您的客户端应用程序将与服务器端存储很好地分离。

但是，在这个阶段，您的应用程序不会知道服务器端是否发生错误。如果此类错误不应影响您的应用程序的主要行为，这可能是您希望发生的事情，但您可能希望以成功/错误（最有可能使用 JSON）进行响应，以允许您的应用程序做出相应的反应。

# macos - 使用 AMPPS 在 mac (Mac OS X Lion 10.70.4) 上设置虚拟主机

> ID：12511884
> 
> 赞同：1
> 
> 时间：2012-09-20T11:42:44.623
> 
> 标签：macos, localhost, vhosts

这是我第一次尝试设置虚拟主机，我有点迷茫。我想设置虚拟名称“tp3.localhost”。

问题：

1.  我的 AMMPS 网址是**localhost:8585**。在 hosts 文件中我必须写**127.0.0.1 tp3.localhost**还是**127.0.0.1:8585 localhost**？

2.  我在 httpd-vhosts.conf 中编写的代码如下：

名称VirtualHost tp3.localhost

```
<VirtualHost  tp3.localhost>
    <Directory "/Applications/AMPPS/www">
        Options FollowSymLinks Indexes
        AllowOverride All
        Order deny,allow
        Allow from All
    </Directory>
    ServerName tp3.localhost
    ServerAlias localhost:8585 127.0.0.1:8585
    ScriptAlias /cgi-bin/ "/Applications/AMPPS/www/cgi-bin/"
    DocumentRoot "/Applications/AMPPS/www"
    ErrorLog "/Applications/AMPPS/apache/logs/error.err"
    CustomLog "/Applications/AMPPS/apache/logs/access.log" combined
</VirtualHost> 
```

AMMPS 是 MAMP 的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:46:16.203

我认为您的 VirtualHost 声明应该包括端口。

调用 ULR 时，您需要将其称为 tp3.localost（请参阅 ServerName），以便触发它。

所以 tp3.localhost 是一个名称，应该存在于您的 DNS 或 /etc/hosts 文件中的某个位置，因此它可以解析为 127.0.0.1 （或 ::1 用于 IPv6）

# node.js - 为什么将 app.get() 放在 express.js 中的正确位置很重要？

> ID：12511889
> 
> 赞同：1
> 
> 时间：2012-09-20T11:42:55.257
> 
> 标签：node.js, express

我刚刚注意到了一些我没有预料到的事情。我一直在尝试“摸索”它一段时间，但并没有完全做到。它快把我逼疯了...

获取标准的 Expressjs 文件。我添加了一些东西：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));

  app.post( '/call/loginAnon', function(req,res, next){
    console.log("IN THE CALL! %j %j %j", req.path, req.body, req.headers );
    next();
  });

  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我还在 bodyParser.js 中添加了一个调试行，以便我们知道它何时被调用。注意 /call/loginAnon 是在 bodyParser*之前*定义的。这是结果：

`IN THE CALL! "/call/loginAnon" undefined {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

`Headers IN BODYPARSER.js: /call/loginAnon {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

`IN THE CALL! "/call/loginAnon" {"login":"sd","password":"sd"} {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

所以，我的回调最终被调用*了两次*——一次是在调用 bodyparser 之前（所以`req.body`是`null`），一次是之后（`req.body`实际设置）。

将调用移到 bodyParser 下会有所改善：

`Headers IN BODYPARSER.js: /call/loginAnon {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

`IN THE CALL! "/call/loginAnon" {"login":"sd","password":"sd"} {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

`IN THE CALL! "/call/loginAnon" {"login":"sd","password":"sd"} {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

还是叫了两次。但是，至少这次它设置了 req.body。

将它移到 app.configure 的末尾实际上可以解决所有问题：

`Headers IN BODYPARSER.js: /call/loginAnon {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

`IN THE CALL! "/call/loginAnon" {"login":"sd","password":"sd"} {"host":"localhost:3000","connection":"keep-alive","content-length":"30","origin":"http://localhost:3000","x-requested-with":"XMLHttpRequest","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1","content-type":"application/json","accept":"application/javascript, application/json","referer":"http://localhost:3000/login","accept-encoding":"gzip,deflate,sdch","accept-language":"en-GB,en-US;q=0.8,en;q=0.6","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.3","cookie":"sid=s%3ASI%2F9XFcpe2qFdQNrmsL8ihz8.MezqsOBJM%2FWX9BZOJ0za7F1d8UX6sNjmQZBhN3mqFVA"}`

这就是我一直在做的事情（也是大多数人会一直做的事情）。我只是碰巧在配置之前定义了一条路线，并注意到了奇怪之处。

我确信这是因为我在定义路由时没有正确理解 expressJs 的工作原理。但是...有人可以对此有所了解吗？

谢谢，

默克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:00:32.667

多次访问路径的原因是您在 app.router 中间件之前定义了处理程序。

原因是中间件将按照定义的顺序使用，每一层要么响应请求，要么将其发送到下一层。所以解释你的例子：

```
 // The handler is defined before the router so any request that passed the 
    // previous middleware will also be passed into this middleware
    // The method (GET or POST or..) or the path is irrelevant at this point
    app.post( '/call/loginAnon', function(req,res, next){
      // Will run every time
      console.log("IN THE CALL! %j %j %j", req.path, req.body, req.headers );
      next(); // It is sent to the next middleware layer
    });
    // Now the bodyParsel will parse the body and give you the req.body variable
    app.use(express.bodyParser()); 
    app.use(express.methodOverride());
    // This handler will now parse the path of the request and redirect it
    // to the defined handler which is why it is accessed the second time
    app.use(app.router); 
```

# sql - 不同条件下单列的总和

> ID：12511894
> 
> 赞同：1
> 
> 时间：2012-09-20T11:43:29.907
> 
> 标签：sql, sql-server, sql-server-2008, aggregate-functions

我的表中有两列**colum#1** is`varchar(MAX)`和 column#2 is `int`。

在**第 2 列**中，我有负数和正数条目我希望在我的选择查询中一列中的正数项总和以及另一列中的负数总和

为了实现这一点，我做到了

```
SELECT SUM(atbl.M),SUM(atbl.p)    
from (select M=case when column#2<0 
                    then column#2 else 0 end,
             P=case when column#2 > 0 
                    then column#2 else 0 end 
        from testTable) atbl 
```

或者

```
select SUM(case when column#2<0 then column#2 else 0 end) as M
      ,SUM(case when column#2 > 0 then column#2 else 0 end) as P 
 from testTable 
```

有没有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:24:15.327

如果您经常在该列上执行此操作，请使用视图：

```
create view testView as
select
    sum(case when column#2 < 0 then column#2 else 0 end) as M,
    sum(case when column#2 > 0 then column#2 else 0 end) as P
from testTable 
```

# linux - 卷曲“写出”特定标题的值

> ID：12511895
> 
> 赞同：28
> 
> 时间：2012-09-20T11:43:45.027
> 
> 标签：linux, bash, shell, curl

我目前正在编写一个 bash 脚本，并且正在使用 curl。我想要做的是获取响应的一个特定标头。

基本上我希望这个命令起作用：

```
curl -I -w "%{etag}" "server/some/resource" 
```

不幸的是，似乎 -w, --write-out 选项只有一组它支持的变量，并且不能打印作为响应一部分的任何标题。我是否需要自己解析 curl 输出以获取 ETag 值，或者有没有办法让 curl 打印特定标头的值？

显然像

```
curl -sSI "server/some/resource" | grep 'ETag:' | sed -r 's/.*"(.*)".*/\1/' 
```

可以解决问题，但是让 curl 过滤标题会更好。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T20:25:03.030

您可以使用单个 sed 或 awk 命令打印特定的标头，但 HTTP 标头使用 CRLF 行尾。

```
curl -sI stackoverflow.com | tr -d '\r' | sed -En 's/^Content-Type: (.*)/\1/p' 
```

`FS=": "`如果值包含空格，您可以使用 awk 添加：

```
awk 'BEGIN {FS=": "}/^Content-Type/{print $2}' 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-20T11:57:27.797

为“-w”指定的变量不直接连接到 http 标头。所以看起来你必须自己“解析”它们：

```
curl -I "server/some/resource" | grep -Fi etag 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-11-01T12:54:49.663

其他答案使用该`-I`选项并解析输出。值得注意的是，`-I`将 HTTP 方法更改为`HEAD`. （长选项版本`-I`是`--head`）。根据您所追求的领域和网络服务器的行为，这可能是一个没有区别的区别。和之间的标头 like`Content-Length`可能不同。使用该选项强制使用所需的 HTTP 方法，并且仍然只将标头视为响应。`HEAD``GET``-X`

```
curl -sI http://ifconfig.co/json | awk -v FS=": " '/^Content-Length/{print $2}'
18

curl -X GET -sI http://ifconfig.co/json | awk -v FS=": " '/^Content-Length/{print $2}'
302 
```

# smalltalk - 方法查找器未找到新方法

> ID：12511900
> 
> 赞同：2
> 
> 时间：2012-09-20T11:44:14.767
> 
> 标签：smalltalk, squeak

我目前正在关注 Squeak By Example 一书。

它表明，在寻找未知方法时，可以通过其输入和输出之间的对应关系来搜索该方法`Method Finder`（它会打开一个`Selector Browser`窗口）。

例如，如果我输入`'aaa' . 'AAA'`它会同时找到`Character asUppercase`和`String asUppercase`。

SBE 教授如何向`shout`类中添加一个新方法，该方法将字符串设为`String`大写并添加最后一个感叹号。在添加方法之前，它还展示了如何添加测试以通过`Test Runner`.

如果我搜索`'aaa' . 'AAA!'`，我会得到一个`No single method does that function`.

如果我在工作区中测试（打印）它，我会得到预期的`'thing' shout --> 'THING!'`. 为什么？有什么可以刷新的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:23:57.130

Method Finder 只尝试已知的方法，否则系统很容易崩溃。见`MethodFinder>>initialize`。

# asp.net - iTextSharp .pdf 工具

> ID：12511912
> 
> 赞同：1
> 
> 时间：2012-09-20T11:45:01.013
> 
> 标签：asp.net, visual-studio-2010, itextsharp

下午所有，

有人建议我可以使用 iTextSharp 帮助我将网页转换为 .PDF 文件。我正在使用以下链接作为示例教程，但无法生成 .pdf？

访问[http://www.dotnetspark.com/kb/654-simple-way-to-create-pdf-document-using.aspx](http://www.dotnetspark.com/kb/654-simple-way-to-create-pdf-document-using.aspx)

我正在使用 VB 示例。我已将 iTextSharp.dll 添加到我的项目中，并按要求添加了命名空间。我只是创建了一个空白页面并向页面添加了一个按钮，并使用以下代码我似乎无法生成文件？

这是我的代码...

```
Imports iTextSharp.text
Imports iTextSharp.text.pdf

Partial Class pdf
Inherits System.Web.UI.Page

Protected Sub btnGeneratePDF_Click(ByVal sender As Object, ByVal e As EventArgs)
    'Create Document class obejct and set its size to letter and give space left, right, Top, Bottom Margin
    Dim doc As New Document(iTextSharp.text.PageSize.LETTER, 10, 10, 42, 35)
    Try
        Dim wri As PdfWriter = PdfWriter.GetInstance(doc, New FileStream("d:\myfolder\test.pdf", FileMode.Create))
        'Open Document to write
        doc.Open()

        'Write some content
        Dim paragraph As New Paragraph("This is my first line using Paragraph.")
        Dim pharse As New Phrase("This is my second line using Pharse.")
        Dim chunk As New Chunk(" This is my third line using Chunk.")
        ' Now add the above created text using different class object to our pdf document
        doc.Add(paragraph)
        doc.Add(pharse)
        doc.Add(chunk)
    Catch dex As DocumentException

        'Handle document exception
    Catch ioex As IOException
        'Handle IO exception
    Catch ex As Exception
        'Handle Other Exception
    Finally
        'Close document
        doc.Close()
    End Try
End Sub 
```

结束类

这是按钮的代码...

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="pdf.aspx.vb" Inherits="pdf" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

    <asp:Button ID="btnGeneratePDF" runat="server" Text="Generate .PDF" />

</div>
</form>
</body>
</html> 
```

有人可以帮我看看这个，让我知道我哪里出错了吗？

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:50:49.173

不确定这是否能解决所有问题，但您至少错过了按钮中的 Click_Event。

```
<asp:Button ID="btnGeneratePDF" runat="server" Text="Generate .PDF" OnClick="btnGeneratePDF_Click" /> 
```

（我看到你昨天问了这个问题：[Button ClickEvent is not triggered](https://stackoverflow.com/questions/12493298/button-clickevent-is-not-triggered) with the same problem, try to remember next time;-)）

# search - 组合搜索问题的排列树？

> ID：12511922
> 
> 赞同：2
> 
> 时间：2012-09-20T11:45:30.480
> 
> 标签：search, recursion, permutation, divide-and-conquer

我想为排列问题生成一个搜索树。我的要求如下：我想使用分而治之的策略来做到这一点

我正在给出一个示例树长度为 3 的排列。

![长度为 3 排列的示例树](../Images/6b63f007a4d8d366cef382a61247acb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:45:19.523

给定一组`n`数字，将问题划分为`n`子问题，每个子问题都将集合中的一个数字作为第一个数字，并将所选数字从集合中删除。对于每个子问题，重复该过程。如果设置为空，则停止。

# c++ - 重载运算符*

> ID：12511924
> 
> 赞同：0
> 
> 时间：2012-09-20T11:45:32.780
> 
> 标签：c++, pointers, operator-overloading

在下面的代码中，我想知道 operator* 重载在这里做了什么。

```
// struct pointer to Shape
struct PtrToShape
{
Shape *ptr;

bool operator < (const PTRToShape & rhs) const
{ return *ptr < *rhs.ptr; }

const Shape & operator*() const
{ return *ptr; }

}; 
```

它会超载什么？它会为结构或形状对象重载 * 运算符吗？此重载是否用于：

```
return *ptr < *rhs.ptr 
```

在我之前提到的那一行中，*（是否重载）指的是什么？到 rhs 还是到 rhs.ptr ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:47:25.283

```
const Shape & operator*() const
{ return *ptr; } 
```

这将返回一个引用取消引用`Shape`的对象，称为`ptr`，它是您的结构的成员。

该重载将为`*operator`您的`PtrToShape`结构重载。

另外，不，它不用于`return *ptr < *rhs.ptr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:47:44.527

它是一个取消引用运算符，因此您可以取消引用 a `PtrToShape`，就像使用指向 的普通指针一样`Shape`。

```
PtrToShape p = ....;
(*p).methodOfShapeClass(); 
```

它适用于 的实例`ShapePtr`，因此它不参与 中的比较`operator<`，因为在此表达式中，

```
return *ptr < *rhs.ptr; 
```

`*(rhs.ptr)`由于运算符优先规则，RHS 等价于。

这通常伴随着`operator->`过载。

# jquery - 从另一个更新 jquery span

> ID：12511929
> 
> 赞同：-2
> 
> 时间：2012-09-20T11:45:39.167
> 
> 标签：jquery

我有这样的表格

```
area: <input type="text" id="area" name="area" class="area"  value="0"/>
Price per square meter: <input type="text" id="square" name="square" class="square"       value="0"/>
Total Price: <span class="total"></span>
25% of total price:  <span class="25total"></span> 
```

和一个脚本

```
<script type="text/javascript">
 $.fn.priceTotal = function() {
var valueArea = $("#area").val(); 
var valueAreaFinal = parseFloat(valueArea, 10);

var valueSquare = $("#square").val(); 
var valueSquareFinal = parseFloat(valueSquare, 10);

var TotalPriceFinal = valueAreaFinal * valueSquareFinal;
return TotalPriceFinal;
    };

    $(document).ready(function() {
$('input.area').bind('keyup', function() {
    $('span.total').html( $('input.price').priceTotal() );
});
$('input.square').bind('keyup', function() {
    $('span.total').html( $('input.price').priceTotal() );
});
    }); 

</script> 
```

使用此表格，当我输入每平方米的面积和价格时，总价格会自动计算。我现在的问题是，如何在另一个名为 25total 的跨度中计算总价的 25%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:50:29.633

```
<script type="text/javascript">
 $.fn.priceTotal = function() {
var valueArea = $("#area").val(); 
var valueAreaFinal = parseFloat(valueArea, 10);

var valueSquare = $("#square").val(); 
var valueSquareFinal = parseFloat(valueSquare, 10);

var TotalPriceFinal = valueAreaFinal * valueSquareFinal;
return TotalPriceFinal;
    };

    $(document).ready(function() {
$('input.area').bind('keyup', function() {
    $('span.total').html( $('input.price').priceTotal() );
    $('span.25total').html( $('input.price').priceTotal() / 4 );
});
$('input.square').bind('keyup', function() {
    $('span.total').html( $('input.price').priceTotal() );
    $('span.25total').html( $('input.price').priceTotal() / 4 );
});
    }); 

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:52:08.943

考虑到您正在使用 keyup 事件，您将希望 priceTotal 尽可能高效，而不是每次调用时都创建变量。寻求这个解决方案：

```
 $.fn.priceTotal = function() {
        return parseFloat($("#area").val(), 10) * parseFloat($("#square").val(), 10)
    };

$(document).ready(function() {
    $('input.area, input.square').bind('keyup', function() {
      var priceTotal = $('input.price').priceTotal();
      $('span.total').html(priceTotal);
      $('.25total').text(parseInt(priceTotal) / 4));
   }
});

</script> 
```

# java - 如何在 Java 中定义重复的枚举常量？

> ID：12511931
> 
> 赞同：11
> 
> 时间：2012-09-20T11:45:51.490
> 
> 标签：java, enums

我想用两个“值”相同的常量定义一个枚举类型。我将这两个常量称为重复项。考虑以下示例：我想定义一个浏览器类型列表，并且我希望同时拥有文字“IE”和“InternetExplorer”，如下所示：

```
enum Browser {
    CHROME("chrome"),
    FIREFOX("firefox"),
    IE("ie"),
    INTERNETEXPLORER("ie");

    String type;
    Browser(String type) {
        this.type = type;
    }
} 
```

但是，这样，以下代码将失败，

```
Browser a = Browser.IE;
Browser b = Browser.INTERNETEXPLORER;
Assert.assertTrue(a==b); 
```

我能想到的唯一解决方法是添加一个返回浏览器实例内部值的类型的`value()`方法。`Browser`平等测试代码将是

```
Assert.assertTrue(a.value()==b.value()) 
```

这不好。那么有人有更好的主意吗？

为什么Java不允许覆盖类`equals()`之`Enum<T>`类的方法？

**编辑**：

好的，感谢您的回答和评论。我同意我最初的想法是违背枚举的目的。我认为以下更改可以满足我的需要。

```
public enum Browser {
   CHROME,
   FIREFOX,
   IE;

   public static Browser valueOfType(String type) {
       if (b == null) {
            throw new IllegalArgumentException("No browser of type " + type);
       switch (type.toLowerCase()) {   
          case "chrome":
               return Browser.CHROME;
          case "firefox":
               return Browser.FIREFOX;
          case "ie":
          case "internetexplorer":
          case "msie":
               return Browser.IE;
          default:
               throw new IllegalArgumentException("No browser of type " + type);
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T12:12:49.707

在这种情况下，分层枚举技巧可能是您想要的。尽管它不能解决比较问题，但它为您的问题提供了一个非常好的替代方案。

[http://java.dzone.com/articles/enum-tricks-hierarchical-data](http://java.dzone.com/articles/enum-tricks-hierarchical-data)

我直接引用了上面网站的代码，并稍作简化：

```
public enum OsType {
    OS(null),
        Windows(OS),
            WindowsNT(Windows),
                WindowsNTWorkstation(WindowsNT),
                WindowsNTServer(WindowsNT),
            WindowsXp(Windows),
            WindowsVista(Windows),
            Windows7(Windows),
        Unix(OS),
            Linux(Unix),
    ;
    private OsType parent = null;

    private OsType(OsType parent) {
        this.parent = parent;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-07T18:48:14.797

一种简单的方法是将实例变量放在枚举类中。

```
enum Browser {
    CHROME,
    FIREFOX,
    INTERNETEXPLORER;
    public static final Browser IE=INTERNETEXPLORER;
} 
```

然后，IE 应该只是作为 的别名`INTERNETEXPLORER`，您可以互换使用它们。

编辑：感谢 big_m 建议制作 IE `final`！

EDIT2：这个技巧应该适用于大多数代码，但如果你使用`switch/case`. 这是一个例子：

```
Browser b;
switch(b){
    case Browser.CHROME:
        //code for chrome
        break;
    case Browser.IE: // <---- SYNTAX ERROR, use Browser.INTERNETEXPLORER in this case
        //code for internet explorer
        break;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-20T12:03:39.650

每个枚举相互扩展`Enum`定义`equals()`为的类`final`。这样做是因为 enum 不是常规类。JVM 保证每个枚举元素都是唯一的，即在一个JVM 中每个元素只存在一个实例。

例如，在`switch`语句等中使用枚举时需要这样做。

你想要做的是违背这个概念：你希望同一个枚举有 2 个相等的成员。

但是我可以为您提供其他解决方案：只定义一个`IE`成员。将成员定义`String[]`到可以通过任何别名找到适当成员的枚举和方法中：

```
public enum Browser {

    CHROME("Chrome"),
    FIREFOX("FireFox"),
    IE("IE", "MSIE", "Microsoft Internet Exporer"),
    ;

    private String[] aliases;

    private static Map<String, Browser> browsers = new HashMap<>();
    static {
        for (Browser b : Browser.values()) {
            for (String alias : b.aliases) {
                browsers.put(alias, b);
            }
        }
    }

    private Browser(String ... aliases) {
        this.aliases = aliases;
    }

    public static Browser valueOfByAlias(String alias) {
        Browser b = browsers.get(alias);
        if (b == null) {
            throw new IllegalArgumentException(
                    "No enum alias " + Browser.class.getCanonicalName() + "." + alias);
        }
        return b;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T11:53:23.600

您不能覆盖`equals()`枚举的方法，但即使您可以，`==`操作员也不会执行该`equals()`方法：您的示例`a == b`无法`true`实现。

我能想到的最接近的是实用程序（静态）方法：

```
enum Browser {
    CHROME("chrome"),
    FIREFOX("firefox"),
    IE("ie"),
    INTERNETEXPLORER("ie");

    private final String type;
    Browser(String type) {
        this.type = type;
    }

    public String getType() {
        return type;
    }

    public static boolean equals(Browser b1, Browser b2) {
        return b1.type.equals(b2.type);
    }
} 
```

另请注意，我会制作`type` `private final`. 事实上，你可以这样做：

```
IE.type = "netscape"; // would be allowed 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:53:43.170

你真正应该做的是规范化输入到枚举的转换，即如果你的输入（来自用户/数据存储）是 IE/INTERNETEXPLORER，它应该被解析为 Browser.IE。这将删除代码中的大量冗余检查，以查看枚举是 IE 还是 INTERNETEXPLORER。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T12:24:19.803

写在`Enum`课堂上

> 但是扩展这个类不会使一个类成为枚举类型，因为编译器需要为它生成特殊信息。

为了支持基于引用`equals`方法的相等性是最终的。

您可以使用`EnumSet`创建`EnumSet`相关枚举，然后您可以使用`contains`方法。

```
public static EnumSet<Browser> MSE = EnumSet.of(Browser.IE,
    Browser.INTERNETEXPLORER); 
```

因此，您的代码将如下所示。

```
public enum Browser {
CHROME("chrome"), FIREFOX("firefox"), IE("ie"), INTERNETEXPLORER("ie");

String type;

Browser(String type) {
    this.type = type;
}

public static EnumSet<Browser> MSE = EnumSet.of(Browser.IE,
        Browser.INTERNETEXPLORER);

public static void main(String[] args) {
    System.out.println(MSE.contains(Browser.IE));//true
    System.out.println(MSE.contains(Browser.INTERNETEXPLORER));//true
}
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-20T11:47:35.240

我会删除字符串值和重复的 IE 实例，它没有用......

```
enum Browser {
    CHROME,
    FIREFOX,
    IE 
```

如果您必须使用小写表示，只需在需要时从枚举名称转换。

# mysql - 如何使用 group-concat mysql 创建 json 格式？

> ID：12511933
> 
> 赞同：66
> 
> 时间：2012-09-20T11:45:53.520
> 
> 标签：mysql, sql, group-concat

如何使用 group-concat mysql 创建 json 格式？

（我使用 MySQL）

示例 1：

表格1：

```
email            |    name  |   phone
-------------------------------------
my1@gmail.com    | Ben      | 6555333
my2@gmail.com    | Tom      | 2322452
my2@gmail.com    | Dan      | 8768768
my1@gmail.com    | Joi      | 3434356 
```

就像没有给我格式的语法代码：

```
select email, group-concat(name,phone) as list from table1 
group by email 
```

我需要的输出：

```
email         |    list
------------------------------------------------
my1@gmail.com |  {name:"Ben",phone:"6555333"},{name:"Joi",phone:"3434356"}
my2@gmail.com |  {name:"Tom",phone:"2322452"},{name:"Dan",phone:"8768768"} 
```

谢谢

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-10-25T08:36:17.890

使用较新版本的 MySQL，您可以使用 JSON_OBJECT 函数来实现所需的结果，如下所示：

```
GROUP_CONCAT(
  JSON_OBJECT(
    'name', name,
    'phone', phone
  )
) AS list 
```

要准备好将 SQL 响应解析为数组：

```
CONCAT(
  '[',
  GROUP_CONCAT(
    JSON_OBJECT(
      'name', name,
      'phone', phone
    )
  ),
  ']'
) AS list 
```

这会给你一个类似的字符串：`[{name: 'ABC', phone: '111'}, {name: 'DEF', phone: '222'}]`它可以被 JSON 解析。希望这可以帮助。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-09-20T12:06:35.183

试试这个查询 -

```
SELECT
  email,
  GROUP_CONCAT(CONCAT('{name:"', name, '", phone:"',phone,'"}')) list
FROM
  table1
GROUP BY
  email; 
```

JSON 格式结果 -

```
+---------------+-------------------------------------------------------------+
| email         | list                                                        |
+---------------+-------------------------------------------------------------+
| my1@gmail.com | {name:"Ben", phone:"6555333"},{name:"Joi", phone:"3434356"} |
| my2@gmail.com | {name:"Tom", phone:"2322452"},{name:"Dan", phone:"8768768"} |
+---------------+-------------------------------------------------------------+ 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-01-18T19:48:56.520

我希望这能找到正确的眼睛。

您可以使用：

**对于数组**（[文档](https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html#function_json-arrayagg)）：

```
JSON_ARRAYAGG(col_or_expr) as ... 
```

**对于对象**（[文档](https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html#function_json-objectagg)）：

```
JSON_OBJECTAGG(key, value) as ... 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2019-10-22T17:51:19.407

# 对于 MySQL 5.7.22+

```
 SELECT
        email,
        JSON_ARRAYAGG(
            JSON_OBJECT(
                'name', name,
                'phone', phone
            )
        ) AS list
    FROM table1
    GROUP BY email; 
```

### 结果：

```
+---------------+-------------------------------------------------------------------+
| email         | list                                                              |
+---------------+-------------------------------------------------------------------+
| my1@gmail.com | [{"name":"Ben", "phone":6555333},{"name":"Joi", "phone":3434356}] |
| my2@gmail.com | [{"name":"Tom", "phone":2322452},{"name":"Dan", "phone":8768768}] |
+---------------+-------------------------------------------------------------------+ 
```

唯一的区别是该列`list`现在是**Json-valid**，因此您可以直接解析为**Json**

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-05-12T18:58:40.247

上面德瓦特的回答很好，但 K2xL 的问题是有效的。我找到的答案是使用 HEX() 对名称列进行十六进制编码，以确保它会创建有效的 JSON。然后在应用程序中，将十六进制转换回字符串。

（很抱歉自我推销，但是）我写了一篇关于此的小博客文章，其中包含更多细节： [http ://www.alexkorn.com/blog/2015/05/hand-rolling-valid-json-in- mysql-使用-group_concat/](http://www.alexkorn.com/blog/2015/05/hand-rolling-valid-json-in-mysql-using-group_concat/)

[编辑 Oriol] 这是一个例子：

```
SELECT email,
    CONCAT(
        '[',
        COALESCE(
            GROUP_CONCAT(
                CONCAT(
                    '{',
                    '\"name\": \"', HEX(name), '\", ',
                    '\"phone\": \"', HEX(phone), '\"',
                    '}')
                ORDER BY name ASC
                SEPARATOR ','),
            ''),
        ']') AS bData
FROM table
GROUP BY email 
```

另请注意，我添加了一个 COALESCE 以防该电子邮件没有项目。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-10T19:29:29.407

类似于上面 Madacol 的回答，但略有不同。除了 JSONARRAYAGG，您还可以 CAST AS JSON：

```
SELECT
        email,
       CAST( CONCAT(
        '[', 
           GROUP_CONCAT(
           JSON_OBJECT(
              'name', name,
              'phone', phone
            )
        ),']') AS JSON )
    FROM table1
    GROUP BY email; 
```

**结果：**

```
+---------------+-------------------------------------------------------------------+
| email         | list                                                              |
+---------------+-------------------------------------------------------------------+
| my1@gmail.com | [{"name":"Ben", "phone":6555333},{"name":"Joi", "phone":3434356}] |
| my2@gmail.com | [{"name":"Tom", "phone":2322452},{"name":"Dan", "phone":8768768}] |
+---------------+-------------------------------------------------------------------+ 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-24T18:28:57.197

离开@Devart 的答案......如果该字段包含换行符或双引号，则结果将不是有效的 JSON。

因此，如果我们知道“电话”字段偶尔包含双引号和换行符，我们的 SQL 将如下所示：

```
选择
  电子邮件，
  连接（
    '[',
    GROUP_CONCAT(CONCAT(
        '{姓名：”'，
        姓名，
        '“， 电话：”'，
        替换（替换（电话，'"'，'\\\\"'），'\n'，'\\\\n')，
        '"}'
      )),
    ']'
  ) 作为列表
FROM table1 GROUP BY 电子邮件；
```

如果 Ben phone 中间有引号，而 Joi 有换行符，则 SQL 将给出（有效 JSON）结果，如：

```
[{姓名：“Ben”，电话：“655\“5333”}，{姓名：“Joi”，电话：“343\n4356”}]
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-20T12:06:50.217

像这样使用

```
SELECT email,concat('{name:"',ur_name_column,'",phone:"',ur_phone_column,'"}') as list FROM table1 GROUP BY email; 
```

干杯

# android - 单击小部件时如何呈现吐司？

> ID：12511940
> 
> 赞同：3
> 
> 时间：2012-09-20T11:46:30.620
> 
> 标签：android, widget, onclick, toast

我需要做一个简单的小部件，点击它时会显示一个 Toast。我的问题是我找不到如何获取或创建“oncreate”操作。我看到了打开 Web 浏览器的未决意图的示例。但是我如何简单地创建它：`Toast.makeText(context, "activated", Toast.LENGTH_LONG).show();`并在每次用户点击小部件时让它发生？为了清楚起见，我的意思是手机启动器上的一个小部件。不是常规的“按钮”小部件等...

```
public class Widget extends AppWidgetProvider {
NotificationManager mNotificationManager;
Notification notification;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    appWidgetManager.updateAppWidget(appWidgetIds, view);
} 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:49:00.603

只需调用`Toast.makeText(context, "activated", Toast.LENGTH_LONG).show();`小部件的`onClick()`方法`View.OnClickListener`

# 更新：

如果你使用`AppWidgetProvider`所以检查[这个](https://stackoverflow.com/questions/5347986/android-widget-on-click-event)和[这个](https://stackoverflow.com/questions/2471875/processing-more-than-one-button-click-at-android-widget)帖子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:50:11.227

我认为您缺少**展示**创建的`Toast`. 例如：

```
Toast.makeText(context, "activated", Toast.LENGTH_LONG).show(); 
```

此外，覆盖`onClick`自定义`View`类的方法并在那里弹出吐司。

* * *

```
public class TestButton extends Button {

    public TestButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void setOnClickListener(OnClickListener l) {
        super.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(v.getContext(), "activated", Toast.LENGTH_LONG)
                  .show();
            }
        });
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:55:02.370

```
Button btn=(Button) findViewById(R.id.button);

            btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
                   Toast.makeText(context, "activated", Toast.LENGTH_LONG).show();

  }
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T11:55:58.490

试试这个：

```
button = (Button) findViewById(R.id.buttonToast);

        button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        // Create a piece of toast.
        Toast pieceToast = Toast.makeText(getApplicationContext(), "Test Message", Toast.LENGTH_SHORT);

        // Show the toast.
        pieceToast.show();
    } 
```

这是我的 BroadcastReciever 类：

```
public class IncomingCallReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        if(null == bundle)
            return;
        Log.i("IncomingCallReceiver",bundle.toString());
        String state = bundle.getString(TelephonyManager.EXTRA_STATE);
        String registredPhoneNumber;
        Log.i("IncomingCallReceiver","State: "+ state);
        String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
        System.out.println("*****Mobile Ringing*******"+phonenumber);
        if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
        {
            registredPhoneNumber = PreferenceConnector.getPhoneNumber(context);
            System.out.println("registredPhoneNumber:  "+registredPhoneNumber);
            System.out.println("phonenumber:   "+phonenumber);
            Log.i("IncomingCallReceiver","Incomng Number: " + phonenumber);
            if(phonenumber.equals(registredPhoneNumber)){
                System.out.println("Entered...");
                String info = "Detect Calls sample application\nIncoming number: " + phonenumber;
                if(isMyServiceRunning(context)){
                    context.stopService(new Intent(context,com.visiomaticamericas.visitormobile.services.LaunchServiceActivity.class));
                    System.out.println("******Service Stopped*********");
                }
                Intent i = new Intent(context,com.services.LaunchServiceActivity.class);
                i.putExtra("delay",500L);
                context.startService(i);
                System.out.println("*****Service Started*****");
                Toast.makeText(context, info, Toast.LENGTH_LONG).show();
            }

        }
    }

} 
```

在这里，我调用了我的活动类..并在我的活动类中进行了小部件设计..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T11:56:31.407

这可能会有所帮助，这里需要传递上下文并使用您的小部件获取 Onclick 事件

Toast.makeText(context, "激活", Toast.LENGTH_LONG).show();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-07T19:57:21.877

伙计们，我的 VS 环境是 VS 2017 with Xamarin 。

> ```
>  private void DisplayMessage(string DisplayMsgText)
>     {
>         Toast.MakeText(this.ApplicationContext, DisplayMsgText, ToastLength.Short).Show();
>     } 
> ```

并使用此功能在设备屏幕上显示消息，如下所示：

> DisplayMessage("按下振动按钮");

# python - 艰难地学习 Python

> ID：12511946
> 
> 赞同：-3
> 
> 时间：2012-09-20T11:46:57.977
> 
> 标签：python

我是这里的python新手。我一直在用“Learning Python the hard way”学习，但我在 [练习 4、额外学分、问题 1 中遇到](http://learnpythonthehardway.org/book/ex4.html)了问题。

```
cars = 100
space_in_a_car = 4.0
drivers = 30
passengers = 90
cars_not_driven = cars - drivers
cars_driven = drivers
carpool_capacity = cars_driven * space_in_a_car
average_passengers_per_car = passengers / cars_driven

print "There are", cars, "cars available."
print "There are only", drivers, "drivers available."
print "There will be", cars_not_driven, "empty cars today."
print "We can transport", carpool_capacity, "people today."
print "We have", passengers, "to carpool today."
print "We need to put about", average_passengers_per_car, "in each car." 
```

我用 4.0 for `space_in_a_car`，但有必要吗？为什么在这种情况下使用 4.0 而不是 4？

希望大家帮我解释一下原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:35:50.977

**我认为问题要求您发现的摘要**

在 Python 2.x 中，`/`运算符用于除法。然而，当给定两个整数（如 5 和 2）时，它的行为有点令人惊讶，正如大多数人所期望`2.5`的那样 - 结果是`2`. 通过使用`5.0 / 2`or `5 / 2.0`（或什`float(5) / 2`至），解释器将返回预期的答案`2.5`。所以简单地说 -*如果操作纯粹是整数，那么结果将是一个整数，可能会损失精度*。

这在 Python 3.x 中发生了变化，默认行为是**不**丢失精度。例如，`5 / 2`确实会给您...并且您必须通过使用仅整数除法`2.5`的运算符明确声明您不介意精度损失（例如，Python 2.x 中的行为） - 例如，在 Python 3 中`//`.x，与Python 2.x`5 // 2`中的相同。`5 / 2`该`//`运算符也在 Python 2.x 中。如果你想明确一点。

为了真正让它像泥巴一样清晰，您可以`from __future__ import division`在 Python 2.6 中的模块顶部使用（可能是 2.5 - 不记得了）使`/`操作符的行为符合 Python 3.x。

作为注释 - 如果您阅读到 pgae 的底部，作者将其作为常见问题解答。

> 为什么你用 4.0 做空间？
> 
> 主要是这样您就可以找出浮点数是什么并提出这个问题。查看额外的学分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T12:01:44.777

4.0 所做的是将变量键入浮点数而不是整数。这样做的结果是在输出`carpool_capacity`中也输入了 float 并且读取 120.0 而不是 120。

编辑：

在您的示例中，没有理由使用 float 精度而不是 int 精度`space_in_car`。唯一可以使用填充的地方是计算`average_passengers_per_car = passengers / cars_driven`。因为在除法之后你会丢失逗号后面的所有内容，因为它会立即转换为 int。

# c - 为什么此指针交换在字符串反转中失败？

> ID：12511952
> 
> 赞同：1
> 
> 时间：2012-09-20T11:47:15.163
> 
> 标签：c, string, pointers

我想为一个以空字符结尾的`char*`字符串（以空字符结尾的字符字符串，那是多余的吗？）实现一个反向函数，并提出了以下解决方案。

反向函数中的最终交换`swap(&tmp, &str)`没有任何效果。是什么原因，大概是怎么做的？

**备注：我已经通过仅使用字符串本身、临时字符和索引重新实现了 reverse 函数**，但我对为什么这不起作用很感兴趣。在这个指针问题中我没有考虑什么？

```
#include <stdlib.h>
#include <stdio.h>

int strlen(char* str)
{
        int len = 0;
        char* ptr = str;
        while (ptr[0] != '\0')
        {
                len++;
                ptr++;
        }

        return len;
}

void swap(char **a, char **b)
{
        char* c = *a;
        *a = *b;
        *b = c;
}

void reverse(char* str)
{
        int len = strlen(str);
        char* tmp = malloc(sizeof(char) * (len + 1));
        int i;
        for (i = 0; i < len; i++)
        {
                tmp[i] = str[len - 1 - i];
        }

        tmp[len] = '\0';
        // printf(tmp); => "wolfrevOkcatS olleH"
        swap(&tmp, &str);
}

int main(int argc, char** argv)
{
        char* str = "Hello Stackoverflow\0";
        reverse(str);
        printf("%s", str);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:54:15.973

你可以做一个就地反向，你不需要你正在做的指针交换：

```
void reverse(char* str, int len)
{ 
        int i;
        for (i = 0; i < len; i++)
        {
                char tmp = str[i];
                str[i] = str[len - 1 - i];
                str[len - 1 - i] = tmp;
        }
} 
```

要回答您的问题，您需要将 a 传递`char**`给您的`reverse`函数，因为您正在更改它将指向的内容，并且指针是*按 value*复制的，因此如果您想反映指针的更改，您需要一个双指针。

# web - 测试版网站和邀请

> ID：12511953
> 
> 赞同：0
> 
> 时间：2012-09-20T11:47:15.830
> 
> 标签：web, beta, beta-testing

我正在启动一个启动网站，我想知道如何开始，我的意思是最好首先使用邀请？

那么如何发送邀请以及发送给谁呢？

我如何计划邀请？哪些是最佳实践？

有没有人通过他自己的网站从这一步通过？

在这里有什么经验吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:52:39.990

您是否首先创建网站的测试版完全取决于您。

这实际上取决于您计划制作的网站类型。Beta 版显然是在向所有人发布之前获得对您的网站及其功能的反馈的好方法。因此，允许您在每个人使用该网站之前进行改进/修复错误。

就实际让用户参与测试而言，这在很大程度上是营销您的网站及其存在的情况（通过社交媒体、广告等），然后提供某种“注册测试”页面。一旦你有足够的用户，你就可以关闭测试版的注册，并设计一些从用户那里获得反馈的方法。

我自己并没有亲自创建一个测试版，但如果我要这样做，我会做上面的。

希望这会有所帮助。

# java - Sigar API for JAVA（需要指南）

> ID：12511956
> 
> 赞同：5
> 
> 时间：2012-09-20T11:47:23.233
> 
> 标签：java, windows, sigar

我已经下载了 Sigar API ( [http://support.hyperic.com/display/SIGAR/Home](http://support.hyperic.com/display/SIGAR/Home) )，并希望在项目中使用它来获取有关正在运行的不同进程的信息。

我的问题是我真的找不到一些有用的代码片段来学习，而且他们网站上的 javadoc 也没有多大帮助，因为我不知道我应该寻找什么。

你有什么想法我可以找到更多信息吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T09:51:46.363

要查找`pid`（查找有关某个进程的信息所需要的），您可以使用`ProcessFinder`. 查找单个进程 pid 的方法是`findSingleProcess(String expression)`. 例子：

```
 Sigar sigar=new Sigar();
    ProcessFinder find=new ProcessFinder(sigar);
    long pid=find.findSingleProcess("Exe.Name.ct=explorer");
    ProcMem memory=new ProcMem();
    memory.gather(sigar, pid);
    System.out.println(Long.toString(memory.getSize())); 
```

表达式语法是这样的：

```
Class.Attribute.operator=value 
```

在哪里：

```
Class is the name of the Sigar class minus the Proc prefix.
Attribute is an attribute of the given Class, index into an array or key in a Map class.
operator is one of the following for String values:
eq - Equal to value
ne - Not Equal to value
ew - Ends with value
sw - Starts with value
ct - Contains value (substring)
re - Regular expression value matches
operator is one of the following for numeric values:
eq - Equal to value
ne - Not Equal to value
gt - Greater than value
ge - Greater than or equal value
lt - Less than value
le - Less than or equal value 
```

更多信息在这里：http: [//support.hyperic.com/display/SIGAR/PTQL](http://support.hyperic.com/display/SIGAR/PTQL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T14:26:33.287

如果您使用的是 Windows 7，请尝试做一些事情

```
likefindSingleProcess("State.Name.ct=explorer"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T07:35:50.830

在他们最新的包中，他们在`bindings\java\examples`. 去看一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-14T23:55:04.410

hyperic 站点似乎消失了，但是这个[https://layer4.fr/blog/2016/10/10/os-monitoring-with-java/](https://layer4.fr/blog/2016/10/10/os-monitoring-with-java/)告诉您如何将 Sigar 连接到 Java。您确实需要将 sigar-amd64-winnt.dll 文件放在 DLL 路径的某个位置（例如 C:\Windows）

# java - 是否有任何对象作为数据和 LabelProvider 用于显示的 SWT 组合框？

> ID：12511959
> 
> 赞同：8
> 
> 时间：2012-09-20T11:47:26.227
> 
> 标签：java, combobox, swt, eclipse-rcp

我正在寻找 SWT 中组合框的实现，它允许我使用任何对象的列表设置其中的条目，其方式类似于树和表。

理想情况下，我希望下拉时的字符串能够与选择后的最终字符串不同。IE 下拉选择一个人，该人在列表中的姓名旁边显示他们的年龄，但在选择并放置在框中时只有他们的姓名。

我能找到的只是基于字符串的组合框，无法描述不同的显示选项，所以我想如果我想让它工作，我将不得不构建一个新组件，但我希望有人已经实现了这样一个东西（因为我在某些应用程序中看到过这种功能）但我找不到它？

我希望创造出这样的东西。

![在此处输入图像描述](../Images/f0632367a01490078f763c444d47ddd5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T11:50:16.307

JFace[`ComboViewer`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ComboViewer.html)似乎正是您想要的。它由`ModelProvider`保存您的对象的 a 支持。A[`LabelProvider`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/LabelProvider.html)用于显示组合内的文本。

[这](http://www.vogella.com/articles/EclipseJFace/article.html#jfaceviewer_combo)是 Vogella 的优秀教程。

这是一个可以满足您要求的示例。如果显示对象的布尔值，它基本上会保存当前的组合选择：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final ComboViewer viewer = new ComboViewer(shell, SWT.READ_ONLY);

    viewer.setContentProvider(ArrayContentProvider.getInstance());

    /* if the current person is selected, show text */
    viewer.setLabelProvider(new LabelProvider() {
        @Override
        public String getText(Object element) {
            if (element instanceof Person) {
                Person current = (Person) element;

                if(current.isSelected())
                    return current.getName();
                else
                    return "";
            }
            return super.getText(element);
        }
    });

    final Person[] persons = new Person[] { new Person("Baz"),
            new Person("BazBaz"), new Person("BazBazBaz") };

    viewer.setInput(persons);

    /* within the selection event, tell the object it was selected */
    viewer.addSelectionChangedListener(new ISelectionChangedListener() {
        @Override
        public void selectionChanged(SelectionChangedEvent event) {
            IStructuredSelection selection = (IStructuredSelection) event.getSelection();
            Person person = (Person)selection.getFirstElement();

            for(Person p : persons)
                p.setSelected(false);

            person.setSelected(true);

            viewer.refresh();
        }
    });

    viewer.setSelection(new StructuredSelection(viewer.getElementAt(0)), true);

    shell.pack();
    shell.setSize(200, shell.getSize().y);
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

public static class Person {
    private String name;

    /* this will be true for the selected person */
    boolean isSelected;

    public Person(String name) {
        this.name = name;
        this.setSelected(false);
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public boolean isSelected() {
        return isSelected;
    }

    public void setSelected(boolean isSelected) {
        this.isSelected = isSelected;
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T16:08:05.673

非常感谢 Baz 让我走上正轨，并为我提供了一些初始代码。但是在考虑了所有这些之后，我希望在我的 RCP 视图本身中使用一些更清洁的东西，而且虽然组合框的通用实例将来会很好，所以我已经将所有样板文件包装在一个新类中你可以这样使用：

```
 List<Person> persons = new ArrayList<Person>();
    persons.add(new Person("Baz",26));
    persons.add(new Person("Glen",27));
    persons.add(new Person("Jimmy",18));

    TypedComboBox<Person> box = new TypedComboBox<Person>(parent);

    box.addSelectionListener(new TypedComboBoxSelectionListener<Person>() {

        @Override
        public void selectionChanged(TypedComboBox<Person> typedComboBox,
                Person newSelection) {
            System.out.println(newSelection);
        }
    });

    box.setLabelProvider(new TypedComboBoxLabelProvider<Person>() {

        @Override
        public String getSelectedLabel(Person element) {
            return element.getName();
        }

        @Override
        public String getListLabel(Person element) {
            return element.getName() + " | " + element.getAge();
        }
    });

    box.setContent(persons);

    box.selectFirstItem(); 
```

对于我需要多个包含各种对象的选择框的视图，我更喜欢使用类型框，因为我没有在视图代码的主体中投射东西并复制样板代码。

如果您只想使用 toSting() 方法，则不必设置标签提供程序，否则需要提供两个标签，一个用于选定项，一个用于所有其他项。

以防万一有人偶然发现这个问题与我的代码相同，我们将不胜感激反馈。

```
import java.util.ArrayList;
import java.util.List;

import org.eclipse.jface.viewers.ArrayContentProvider;
import org.eclipse.jface.viewers.ComboViewer;
import org.eclipse.jface.viewers.ISelectionChangedListener;
import org.eclipse.jface.viewers.IStructuredSelection;
import org.eclipse.jface.viewers.LabelProvider;
import org.eclipse.jface.viewers.SelectionChangedEvent;
import org.eclipse.jface.viewers.StructuredSelection;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class TypedComboBox<T> {

    private ComboViewer viewer;
    private TypedComboBoxLabelProvider<T> labelProvider;
    private List<T> content;
    private List<TypedComboBoxSelectionListener<T>> selectionListeners;
    private T currentSelection;

    public TypedComboBox(Composite parent) {
        this.viewer = new ComboViewer(parent, SWT.READ_ONLY);
        this.viewer.setContentProvider(ArrayContentProvider.getInstance());

        viewer.setLabelProvider(new LabelProvider() {
            @Override
            public String getText(Object element) {
                T typedElement = getTypedObject(element);
                if (labelProvider != null && typedElement != null) {
                    if (typedElement == currentSelection) {
                        return labelProvider.getSelectedLabel(typedElement);
                    } else {
                        return labelProvider.getListLabel(typedElement);
                    }

                } else {
                    return element.toString();
                }
            }
        });

        viewer.addSelectionChangedListener(new ISelectionChangedListener() {
            @Override
            public void selectionChanged(SelectionChangedEvent event) {
                IStructuredSelection selection = (IStructuredSelection) event
                        .getSelection();
                T typedSelection = getTypedObject(selection.getFirstElement());
                if (typedSelection != null) {
                    currentSelection = typedSelection;
                    viewer.refresh();
                    notifySelectionListeners(typedSelection);
                }

            }
        });

        this.content = new ArrayList<T>();
        this.selectionListeners = new ArrayList<TypedComboBoxSelectionListener<T>>();
    }

    public void setLabelProvider(TypedComboBoxLabelProvider<T> labelProvider) {
        this.labelProvider = labelProvider;
    }

    public void setContent(List<T> content) {
        this.content = content;
        this.viewer.setInput(content.toArray());
    }

    public T getSelection() {
        return currentSelection;
    }

    public void setSelection(T selection) {
        if (content.contains(selection)) {
            viewer.setSelection(new StructuredSelection(selection), true);
        }
    }

    public void selectFirstItem() {
        if (content.size()>0) {
            setSelection(content.get(0));
        }
    }
    public void addSelectionListener(TypedComboBoxSelectionListener<T> listener) {
        this.selectionListeners.add(listener);
    }

    public void removeSelectionListener(
            TypedComboBoxSelectionListener<T> listener) {
        this.selectionListeners.remove(listener);
    }

    private T getTypedObject(Object o) {
        if (content.contains(o)) {
            return content.get(content.indexOf(o));
        } else {
            return null;
        }
    }

    private void notifySelectionListeners(T newSelection) {
        for (TypedComboBoxSelectionListener<T> listener : selectionListeners) {
            listener.selectionChanged(this, newSelection);
        }
    } 
```

和标签提供者接口。

```
public interface TypedComboBoxLabelProvider<T> {

    public String getSelectedLabel(T element);

    public String getListLabel(T element);

} 
```

和选择监听器：

```
public interface TypedComboBoxSelectionListener<T> {

    public void selectionChanged(TypedComboBox<T> typedComboBox, T newSelection);
} 
```

# multidimensional-array - 在 D 中检索多维数组的形状

> ID：12511961
> 
> 赞同：0
> 
> 时间：2012-09-20T11:47:30.350
> 
> 标签：multidimensional-array, d

```
auto getMultidimensionalArrayShape( T )( T array )
{
  static assert( isArray!( T ) );

  // Retrieve the shape of the input array and double check that
  // the arrays from a same dimension have the same length.
  size_t[] shape;
  // ...

  return shape;
}

getMultidimensionalArrayShape( [1, 2, 3] )  //< returns [3]
getMultidimensionalArrayShape( [[1, 2, 3], [4, 5, 6]] )  //< returns [3][2]
// and so on... 
```

天真地，我会以深度优先的方式迭代以检索索引 0 处每个数组的大小，然后我将检查来自同一维度的其他数组的长度是否与我在索引 0 处找到的内容匹配，只是确保一切都是一致的，但我认为必须有更好的方法......有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:27:08.227

这需要递归解决方案。

```
template depthOf(T){
    static if(isIterable!T)
        enum depthOf=1+depthOf!(ForeachType!T);
    else
        enum depthOf=0;
}

immutable(long)[] getMultidimensionalArrayShape(bool verify=true,T)(T array){
    static assert(isArray!T);
    static if(!isArray!(ForeachType!T)){
        return [array.length];
    }else{
        if(0==array.length)
            return [0L].replicate(depthOf!T).idup;
        const elementDimension=array[0].getMultidimensionalArrayShape();
        static if(verify){
            foreach(child;array[1..$]){
                if(child.getMultidimensionalArrayShape()!=elementDimension)
                    throw new Exception("Shape is not uniform");
            }
        }
        return (array.length~elementDimension).idup;
    }
} 
```

实际上，它并不是真正的递归，因为没有函数调用自身（函数调用从同一模板创建的其他函数）。静态递归是一个更好的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:25:40.390

所以这就是我最终写的内容。基本上，在确保它们都相等之后，我正在收集所有具有相同深度级别的数组并检索它们的维度大小。听起来它工作得很好，唯一的事情是我不确定当 depthLevelArrays 的长度等于 0 时该怎么办？它甚至有意义还是我应该抛出一个异常？

```
import std.stdio;
import std.traits;

void internal( T )( T[] depthLevelArrays, ref size_t[] shape )
{
  if ( depthLevelArrays.length == 0 )
      writeln( "what to do here?" );

  static if ( isArray!( ForeachType!( T ) ) )
  {
    ForeachType!( T )[] children;
    size_t dimensionSize = depthLevelArrays[0].length;
    foreach ( element; depthLevelArrays )
    {
      if ( element.length != dimensionSize )
        throw new Exception( "Shape is not uniform" );

      foreach ( child; element )
        children ~= child;
    }

    internal( children, shape );
  }
  else
  {
    size_t dimensionSize = depthLevelArrays[0].length;
    foreach ( element; depthLevelArrays )
      if ( element.length != dimensionSize )
        throw new Exception( "Shape is not uniform" );
  }

  shape ~= dimensionSize;
}

auto getMultidimensionalArrayShape( T )( T array )
{
  static assert( isArray!( T ) );
  size_t[] shape;
  internal( [array], shape );
  return shape;
}

void main()
{
  immutable auto array1d = [1.0, 2.5, 3.4];
  auto shape1 = getMultidimensionalArrayShape( array1d );
  writeln( "shape1: ", shape1 ); //< [3]

  int[5][2] array2d = [[1, 2, 3, 4, 5], [6, 7, 8, 9, 10]];
  auto shape2 = getMultidimensionalArrayShape( array2d );
  writeln( "shape2: ", shape2 );  //< [5][2]

  auto shape3 = getMultidimensionalArrayShape(
      [[[1, 2], [3, 4], [5, 6], [7, 8]],
      [[9, 10], [11, 12], [13, 14], [15, 16]],
      [[17, 18], [19, 20], [21, 22], [23, 24]]] );
  writeln( "shape3: ", shape3 ); //< [2][4][3]

  const int[5][4][3][2] array4d;
  auto shape4 = getMultidimensionalArrayShape( array4d );
  writeln( "shape4: ", shape4 ); //< [5][4][3][2]
} 
```

# java - Spring Component 扫描 jar 中的类？

> ID：12511972
> 
> 赞同：2
> 
> 时间：2012-09-20T11:48:15.240
> 
> 标签：java, spring

我们可以将带有 Spring Bean 注解的类生成为 jar 文件吗？如何从那个 jar 的类中注入另一个 Spring Bean？你能提供可能的方法吗？当我得到如下它不起作用？

在 Jar 文件中

```
 package org.java.support;

    @Service("CommonService")
    public class CommonService {
    } 
```

在项目中

```
 package com.java.test.app;

    @Service(value = "OtherService")
    public class OtherService {
        @Resource(name = "CommonService")
        private CommonService service;
    } 
```

在配置中

```
 <context:component-scan base-package="com.java.test.app, org.java.support">
        <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
    </context:component-scan> 
```

我收到以下错误；

```
13:32:12,331 DEBUG [org.springframework.context.annotation.AnnotationConfigApplicationContext] Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [or
g.springframework.context.support.DefaultLifecycleProcessor@32dcb03b]
13:32:12,331 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'lifecycleProcessor'
Exception in thread "main" org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'CommonService' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
    at org.ace.java.support.delete.Test.main(Test.java:18) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:46:19.537

如果您从 Eclipse 生成 Jar，请在导出对话框中确保选中“添加目录条目”复选框（在选项下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:00:32.373

好吧，你快到了:)

您将需要使用包含过滤器将 jar 添加到您的 spring 上下文中。但我认为使用两条组件扫描线也应该有效。

例子：

```
<context:component-scan base-package="org.example">
    <context:include-filter type="regex" expression=".*Stub.*Repository"/>
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
</context:component-scan> 
```

见[http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-classpath-scanning](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-classpath-scanning)

# ajax - 在 Jquerymobile 应用程序中提交的 MVC3 表单上显示 ajax-loader.png

> ID：12511975
> 
> 赞同：1
> 
> 时间：2012-09-20T11:48:23.060
> 
> 标签：ajax, asp.net-mvc-3, jquery-mobile, icons

我有一个带有 MVC3 和 Jquerymobile 的移动应用程序。在表单提交（使用 ajax 功能）时，我想在提交和重定向时显示加载图标（ajax-loader.png）。谢谢！

我的ajax函数：

```
 $("#add").click(function () {
    $.validator.unobtrusive.parse($('form'));  //added
    if ($("form").valid()) {
        var IDs = new Array($("#SelectedProduct").val(), $("#SelectedAccount").val(), $("#SelectedProject").val(), $("#SelectedTask").val(), $("#date").val(), $("#duration").val());
        $.ajax({
            url: '@Url.Action("SaveLine", "AddLine")',
            type: 'post',
            data: { ids: IDs },
            dataType: 'json',
            traditional: true,
            success: function (data) {
                if (data.success == true) {
                    $("#ajaxPostMessage").html(data.Success);
                    $("#ajaxPostMessage").addClass('ajaxMessage').slideDown(function () {
                        window.location.href = '@Url.Action("Index", "AddLine")';
                    }).delay(1800)
                }
                else {
                    $("#ajaxPostMessage").html(data.Error);
                    $("#ajaxPostMessage").addClass('ajaxMessage');
                    $("#ajaxPostMessage").show();
                }
            }
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:51:57.070

我会做这样的事情：

```
Ajax = {
    Submit: function() {
        Ajax.Loading();
        //ajax stuff
        //Ajax.Message('form complete, blah blah');
    },
    Loading: function() {
        $('#ajax').html('ajax-loader.png');
    },
    Message: function(msg) [
        $('#ajax').html(msg);
    }
} 
```

# iphone - Xcode 升级到 4.5 后应用程序崩溃。将保留对象分配给 unsafe_unretained 变量

> ID：12511976
> 
> 赞同：6
> 
> 时间：2012-09-20T11:48:26.427
> 
> 标签：iphone, objective-c, ios

在我的课堂上，我有一个`dispatch_queue_t`这样声明的属性：

```
@property (nonatomic, assign) dispatch_queue_t queue; 
```

然后在我的初始化方法中我这样做：

```
- (id)initWithServerUrls: (NSString*)serverUrls
{
    if (self = [super init])
    {
        _queue = dispatch_queue_create("com.xxx.my_send_queue", DISPATCH_QUEUE_SERIAL);
    }

    return self;
} 
```

在 Xcode 4.4.1 中它可以工作并且没有引起任何问题（应用程序在应用商店中测试过）。现在，在我升级到 Xcode 4.5 后，应用程序崩溃并**出现 EXC_BAD_ACCESS**并且 Xcode 在该行给我一个警告说：

**将保留对象分配给 unsafe_unretained 变量；分配后对象将被释放**

Apple 将 Xcode 4.5 中的编译器从 LLVM 4.0 更新到 LLVM 4.1，但我不知道为什么我的代码现在崩溃了。

我单步执行了代码，崩溃发生在该行之后。你有什么想法可能是错的，我该如何解决？

**解决方案：**

我设法让它与两个 SDK 一起工作。我刚刚补充说：

```
#if OS_OBJECT_USE_OBJC
@property (nonatomic, strong) dispatch_queue_t queue; // this is for Xcode 4.5 with LLVM 4.1 and iOS 6 SDK
#else
@property (nonatomic, assign) dispatch_queue_t queue; // this is for older Xcodes with older SDKs
#endif 
```

希望有人觉得它有用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-20T13:47:07.073

首先，如果您的目标平台是 5+，那么我强烈建议使用 iOS 5 SDK 构建。使用更高版本的 SDK 构建并设置“目标”可以工作，但有很多问题（其中最重要的是您没有获得编译器帮助来查找您使用了不受支持的方法的地方）。所以回答 1：您需要 iOS 5，针对 iOS 5 构建，这无关紧要。

在 iOS 6 中，`dispatch_queue_t`是一个 ObjC 对象。这是一个很大的改进。这意味着您可以为其创建`strong`属性，而 ARC 将负责其余的工作。如果您以 iOS 6 为目标，这应该可以正常工作。

如果您需要为 iOS 5 和 iOS 6 构建相同的代码，那么您需要知道哪个是哪个，以便您可以在需要时放入内存管理并在不需要时将其保留。使用的正确测试是`#if OS_OBJECT_USE_OBJC`. 请记住，这是一个*编译时*检查。它仅适用于处理您要针对不同 SDK 编写的代码。对于给定的 SDK，行为将是一种方式或另一种方式。

关于“unsafe_unretained”与“assign”的混淆：在这种情况下它们是同一回事。“分配”仅适用于非对象。“unsafe_unretained”是“assign”应用于对象时转换为的内容。而在iOS6中，`dispatch_queue_t`是一个对象。

另一种解决方法，特别是如果您确实希望在使用 iOS 6 SDK 构建时保留旧的内存管理代码。您可以传递`-DOS_OBJECT_USE_OBJC=0`给编译器。这将选择退出新模型。但我建议将此作为最后的手段。详见`os/object.h`SDK。（Cmd-Shift-O，object.h）

# javascript - 通过下拉列表排序并更新查询字符串

> ID：12511977
> 
> 赞同：0
> 
> 时间：2012-09-20T11:48:27.680
> 
> 标签：javascript, html, asp.net-mvc-3, razor

对于分页，我有这段代码，它使我能够更新查询字符串而不会丢失查询字符串中的任何元素。

```
var tRVD = new RouteValueDictionary(ViewContext.RouteData.Values);

foreach (string key in Request.QueryString.Keys)
{
   tRVD[key] = Request.QueryString[key];
}

tRVD["page"] = @i;
@Html.ActionLink(@i.ToString(CultureInfo.InvariantCulture), "Index", tRVD); 
```

我需要对排序做同样的事情。我有以下代码，但当然查询字符串被 sortby 覆盖。我需要的与分页所需要的相同，如果它不存在，它只是将 sortby 添加到 querstring 并在它存在时更新它。这怎么可能？

```
<form name="sortbyformtop">
   <select onchange="location.href=this.options[this.selectedIndex].value" name="sortbyselecttop">
      <option value=""></option>
      <option value="sortby=accommodationtype">Accommodation type</option>
      <option value="sortby=mostreviewed">Most reviewed</option>
      <option value="sortby=lowestprice">Lowest price</option>
   </select>
</form> 
```

所以，我想要实现的是将查询字符串设置为与现在相同的值加上 sortby。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:50:43.413

您需要为`<input type="hidden">`查询字符串中的每个值添加一个表单。

# file - 根据其他目录重命名目录中的文件

> ID：12511978
> 
> 赞同：0
> 
> 时间：2012-09-20T11:48:28.077
> 
> 标签：file, bash, ant, rename, batch-processing

我有一个程序的几个输出，我需要与“预期的”输出文件夹进行比较。但我的问题是输出文件总是有不同的文件名。

如何将文件夹中的所有文件重命名为另一个文件夹中的相同文件名。这里的例子 - 预期的文件结构（当然可以改变）：

```
expected/folder1/file1.txt
expected/folder1/file2.txt
expected/folder2/file1.txt
expected/folder3/file1.txt 
```

我的输出看起来像这样（文件的数量和位置总是相等的）：

```
result/folder1/fileOtherName1.txt
result/folder1/fileOtherName2.txt
result/folder2/fileOtherName1.txt
result/folder3/fileOtherName1.txt 
```

我尝试使用 ANT（因为我知道），但被卡住了，因为我无法按索引选择文件（按字母顺序排序）。

这是我在 ANT 中的伪代码（但不知道如何继续）：

```
<target name="foo">
    <foreach>
        <fileset dir="result" casesensitive="yes">
            <include name="**/*.txt"/>
        </fileset>
        <antcall target="rename">
        </antcall>
    </foreach>
</target>

<target name="rename">
    <!-- how can I access another fileset and take the correct file? -->
    <!-- Here I got stuck -->
    <echo message="foreach.file is ${foreach.file}" />
    <echo message="foreach.dir is ${foreach.dir}" />
    <echo message="foreach.name.ext is ${foreach.name.ext}" />
    <echo message="foreach.name is ${foreach.name}" />
</target> 
```

感谢您的帮助，它不能只在**ANT**中- **BASH**脚本或类似的脚本也可以完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:06:54.873

我个人不了解 ANT，所以我会在 bash 中试一试。

```
for i in *; do 
  k=1; 
  for j in $i/*; do
    mv "$j" $i/file$k.txt;
    k=$[$k+1];
  done;
done 
```

这将遍历文件夹并为文件夹中的每个文件增加一个计数器。当我们进入下一个文件夹时，计数器被重置。

我创建了一个像你这样的测试目录结构，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:11:07.430

怎么样

```
#!/bin/bash

IN_DIR="expected/folder1"
OUT_DIR="result/folder2"

IN_FILES=($IN_DIR/*)
OUT_FILES=($OUT_DIR/*)

for ((i=0; i<${#IN_FILES[@]}; i++)); do
    mv ${OUT_FILES[i]} $OUT_DIR/$(basename ${IN_FILES[i]})
done 
```

在一些测试目录上进行了测试，它工作正常。

请注意，如果您的任何文件名包含空格，则它不起作用。

# sql - 比较字符串时修剪空格 - sql

> ID：12511981
> 
> 赞同：3
> 
> 时间：2012-09-20T11:49:12.543
> 
> 标签：sql, sql-server, tsql

我有类似的查询

```
Select *
From ReportData L 
Left Join ATM A On L.ATMID=A.ATM 
Where L.ATMID=A.ATM AND L.IssuerNetwork < > '0000' 
```

`ATMID`它仅在&`ATM`类似于`'TWAW1800 '`&`'TWAW1800 '`但失败时`'TWAW1800'`&时检索结果`'TWAW1800 '`

我试过的是

```
Select *
From ReportData L 
Left Join ATM A On L.ATMID=A.ATM 
Where LTRIM(RTRIM(L.ATMID))=LTRIM(RTRIM(A.ATM)) AND L.IssuerNetwork < > '0000' 
```

但这对我不起作用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T11:54:03.357

将其`LTRIM()/RTRIM()`放在，`JOIN`然后在加入时去除空格：

```
SELECT *
FROM ReportData L 
LEFT JOIN ATM A 
  ON LTRIM(RTRIM(L.ATMID))=LTRIM(RTRIM(A.ATM))
WHERE L.IssuerNetwork <> '0000' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T11:57:51.547

尝试将 LTRIM 放在 ON 子句中，而不是 WHERE 子句中。加入后发生的位置，由于空格已经丢弃了不同的匹配项。

顺便说一句，我认为一些数据库将尾随空格视为实际上并不存在。仅供参考。

# java - 如何使用 XSLT 和 Java 而不是 XSLFO 创建 PDF？

> ID：12511983
> 
> 赞同：1
> 
> 时间：2012-09-20T11:49:16.910
> 
> 标签：java, xml, xslt, xsl-fo

可以不使用 XSLFO 使用 XSLT 和 Java 创建 PDF 文档吗？

我问的原因是我可能有一个xml文档，需要使用XSL创建PDF。我可能没有 XSLFO 文件。

如果没有，如何使用 Java 将 XML 转换为 XSLFO 文档？

是否可以直接用java创建xslfo文档而不是创建xml文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:57:59.053

可以使用[Apache FOP](http://xmlgraphics.apache.org/fop/)将 XSL-FO 转换为 PDF 文档。您可以使用 XSLT 将 XML 文档转换为 XSL-FO。

如果您不想使用 XSLFO，可以使用[iText](http://itextpdf.com/)而不是从 XML 生成 PDF，或者您必须在程序中添加逻辑，以便它知道如何解析 XML 以及应该如何呈现它PDF。

或者，您可以使用 XSLT 将您的 XML 转换为 HTML，然后使用[Flying Saucer](http://code.google.com/p/flying-saucer/)之类的库来生成等效的 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:34:50.640

是的，您可以在生成 PDF 的过程中使用其他中间格式，但是由于您没有说明为什么不喜欢 XSL-FO，因此不清楚您是否会更喜欢任何其他途径。

同样，XSL-FO 文档只是一个 XML 文档，您可以按照自己喜欢的方式创建它。XSLT 是常规且方便的，但不是唯一的方法。但是由于您没有说明为什么要使用不同的解决方案，因此无法为您提供建议。

# jquery - 用一些颜色 Jquery 突出显示整行

> ID：12511984
> 
> 赞同：1
> 
> 时间：2012-09-20T11:49:18.433
> 
> 标签：jquery

我正在使用 Jquery 数据表。使用 Json 对象，我已经在表格中输入了值。在表格中，我在某些单元格中的值为“FAX”。我的问题是我想用某种颜色突出显示整行，这些颜色在表格中具有“传真”值。我已经尝试过下面提到的代码，但它对我不起作用

```
$("#pagination_table tr td:contains('FAX')").css('background','red'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:53:12.657

此外，该代码只会突出显示表格单元格，您需要

```
$("#pagination_table tr td:contains('FAX')").closest('tr').css('background-color', 'red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:51:21.397

css 属性的正确名称是**background-color**，整行也是父元素。

```
$("#pagination_table tr td:contains('FAX')").parent().css('background-color','red'); 
```

# clojure - Clojure 测试命名空间约定

> ID：12511985
> 
> 赞同：18
> 
> 时间：2012-09-20T11:49:23.807
> 
> 标签：clojure

传统上，我对生产和测试代码使用相同的文件夹结构，如下所示：

```
src/myproject/core.clj
test/myproject/core_test.clj 
```

对于我在文件名中添加`_test`的测试文件。

我最近注意到有几个项目遵循这种结构（这也是 Leiningen 默认生成的）：

```
src/myproject/core.clj
test/myproject/test/core.clj 
```

是否有关于这一点的约定或使用其中一种的明显优势？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-20T12:03:05.000

我相信这只是惯例——我认为这两种方式都没有任何技术优势。

出于完全非技术性的原因，我个人更喜欢第一个版本：

*   在路径中有两个“测试”目录似乎是多余的。
*   将测试 .clj 文件与主 .clj 文件同名可能会导致混淆
*   有时您想要创建与特定命名空间不完全一致的测试，例如`full_system_test.clj`端到端测试
*   对所有`*_test.clj`文件进行模式匹配更容易

另外值得注意的是，[Maven 标准目录布局约定](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)也用于很多 Clo​​jure 项目（如果您构建还包含 Java 源代码的多语言项目，这可能会很方便）：

```
src/main/clojure/myproject/core.clj
src/test/clojure/myproject/core_test.clj
src/main/resources/....
src/test/resources/.... 
```

# javascript - Ember.js 创建简单的非持久性数据存储

> ID：12511988
> 
> 赞同：0
> 
> 时间：2012-09-20T11:49:32.663
> 
> 标签：javascript, ember.js, datastore

如何在 ember 中实现一个简单的非持久性数据存储？我试图遵循[Jiri Zajpt 的文章，](http://jzajpt.github.com/2012/01/24/emberjs-app-architecture-data.html)但不知何故我无法弄清楚它是如何工作的。我认为我需要对数据存储概念有更深入的了解。

当我正确理解这个概念时，数据存储提供了处理数据并将这些数据存储到应用程序范围内可访问的对象的方法，对吗？

这是我到目前为止：

### 灰烬应用

```
App = Ember.Application.create();

App.DataSource = Ember.Object.extend({
    store : null,
    getTickets: function(callback) {
        var store = this.store;
        jQuery.get('/data/tickets.json', function(data) {
            store.pushObjects(data);
            callback(store);
        });
    }
});

App.dataSource = App.DataSource.create({
    store: App.store
});

App.Store = Ember.ArrayProxy.extend({
    content: [],
    init: function() {
        this._super();
    }
});

App.store = App.Store.create();​ 
```

### 加载的 JSON

```
[
    {
    "id":"1",
    "type":"bug",
    "prority":"normal",
    "status":"open",
    "title":"Router is stopping at a non-leaf state",
    "discription":"Lorem ipsum"
    },
    {
    "id":"2",
    "type":"Change request",
    "prority":"normal",
    "status":"open",
    "title":"Add Ember.Deferred mixin",
    "discription":"Lorem ipsum"
    }
] 
```

注意：上面的代码目前没有输出。这是一个可以玩的小提琴：http: **[//jsfiddle.net/WHqVJ/](http://jsfiddle.net/WHqVJ/)**

我知道 ember-data 项目，但我认为这对我的项目来说有点过分，而且我想学习创建数据存储。

# django - 如何从 forloop.counter 获取字母？

> ID：12511992
> 
> 赞同：2
> 
> 时间：2012-09-20T11:49:37.073
> 
> 标签：django, django-templates

我在模板中有循环：

```
{% for item in items %}
    <div class="item">
        {{ forloop.counter }}) {{ item.name }}
    </div>
{% endfor %} 
```

我想将 forloop.counter 显示为字母 (a,b,c,d,e...) 但不使用 ul->li 标签，仅使用 forloop.counter。怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T11:53:38.267

您可以制作自定义过滤器：

```
@register.filter
def to_char(value):
    return chr(98-value) 
```

然后在您的模板中：

```
{{forloop.counter|to_char}} 
```

# vb.net - 错误 BC30456：“ElementAtOrDefault”不是“System.Data.EnumerableRowCollection(Of System.Data.DataRow)”的成员

> ID：12511999
> 
> 赞同：2
> 
> 时间：2012-09-20T11:50:19.107
> 
> 标签：vb.net, iis, ashx

`Dim dr As DataRow = clientDataTable(0)`
服务器上的编译器在我的 .ashx 文件中抛出错误“'ElementAtOrDefault' is not a member of 'System.Data.EnumerableRowCollection(Of System.Data.DataRow)'” 。当我之前尝试过时，它也抛出了这个错误我
`Dim strFirstName As String = clientDataTable(0)("FirstName").ToString()`
是否错误地声明了 DataRow，或者还有什么我遗漏的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:46:42.940

尝试使用

```
clientDataTable.Rows(0) 
```

而不是仅仅使用 (clientDataTable(0)) 这将确保您实际获取行。