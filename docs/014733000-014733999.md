# StackOverflow 问答 14733000-14733999

# ios - Objective C 方法参数标签错误

> ID：14733001
> 
> 赞同：1
> 
> 时间：2013-02-06T15:45:57.427
> 
> 标签：ios, objective-c, cocoa

大家好，这是我的第一篇文章。

我不知道为什么我的代码中出现错误消息。它应该输出矩形的面积和周长。我不想完全更改代码，而是想缩小所涉及的代码行。这是代码。我指出了有问题的线条。

**矩形.h：**

```
#import <Foundation/Foundation.h>

@interface recty: NSObject {
    int width;
    int height;
}

@property int width, height;
- (int)area;
- (int)perimeter;
- (void)setWH:(int) w:(int)h; // 'w' used as name of previous parameter rather than as part of selector
@end 
```

**矩形.m：**

```
#import "recty.h"

@implementation recty
@synthesize width, height;

- (void)setWH:(int) w:(int) h {
    //'w' used as name of previous parameter rather than as part of selector
}

- (int)area {
    return width * height;
}
- (int) perimeter {
    return (width + height) * 2;
}
@end 
```

**主.m：**

```
#import <Foundation/Foundation.h>
#import "recty.h"
int main(int argc, const char * argv[]) {
    recty *r = [[recty alloc]init];
    [r setWH:6 :8];
    @autoreleasepool {
        // insert code here...
        NSLog(@"recty is %i by %i", r.width, r.height);
        NSLog(@"Area = %i, Perimeter = %i", [r area], [r perimeter]);
    }
    return 0;
} 
```

它与我声明参数的方式有关吗？我在代码中列出了错误信息。我使用 Xcode，制作代码的信息已有 2 年历史。也许有些代码已经过时了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:30:48.133

编译器指出方法名称是以模棱两可的方式编写的。

```
- (void)setWH:(int) w:(int)h; // 'w' used as name of previous parameter rather than as part of selector 
```

很容易假设该方法是，`setWH:w:`而不是它真正是什么`setWH::`。那`w`是模棱两可的。

它应该是：

```
- (void) setW:(int)w h:(int)h; 
```

或者，更好的是，无需缩写：

```
- (void) setWidth:(int)width height:(int)height; 
```

更好的是，尽管如此，还是要全力以赴，只使用属性：

```
@property int width;
@property int height; 
```

不过，即便如此，也可能有问题。由于您的类代表一个矩形（并且应该称为`Recty`，而不是`recty`- 类以大写字母开头），那么您可能希望使用`CGFloat`宽度和高度。除非您正在做一些像棋盘游戏这样的事情，其中​​宽度/高度是真正不可或缺的。然后执行以下操作：

```
@property int boardWidth;
@property int boardHeight; 
```

实际上，您的代码中还有一些其他问题（主要是它不是现代的，不是完全损坏的）。我建议：

```
@interface Recty:NSObject
- (instancetype) initWithWidth:(CGFloat)width height:(CGFloat)height;

@property CGFloat width;
@property CGFloat height;

- (CGFloat) area;
- (CGFloat) perimeter;
@end

@implementation Recty
- (instancetype) initWithWidth:(CGFloat)width height:(CGFloat)height;
{
    self = [super init];
    if (self) {
      _width = width;
      _height = height;
    }
    return self;
}

- (CGFloat)area {
return self.width * self.height;
}
- (CGFloat) perimeter {
return (self.width + self.height) * 2;
}
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
      Recty *r = [[Recty alloc] initWithWidth:6 height:8];
      NSLog(@"recty is %f by %f", r.width, r.height);
      NSLog(@"Area = %f, Perimeter = %f", [r area], [r perimeter]);
    }
    return 0;
} 
```

* * *

Objective-C 没有命名参数。它将方法名称与参数交错。虽然方法名称的任何部分都可能只是一个裸露的`:`，但这是非常不鼓励的。这个编译器警告更是如此。

# sql-server-2008 - SQL 2008 存储过程每隔一次运行就会成功运行一次

> ID：14733002
> 
> 赞同：3
> 
> 时间：2013-02-06T15:45:59.200
> 
> 标签：sql-server-2008

好的，我已经在这个问题上卡了一天半了，现场没有解决方案。

我正在运行 SQL Server 2008 标准版（64 位）有问题的存储过程在这篇文章的底部

我有一个存储过程，它只会在我每次执行时成功运行。基本上，这个 SP 所做的是从几个表中获取一些值（两个表都在同一个本地服务器上，两个不同的数据库）并将这些值插入到第三个表中。成功执行后，作为 insert 命令目标的表会附加一个新行。当它没有成功执行时，我收到以下错误：

```
Msg 0, Level 11, State 0, Line 0
A severe error occurred on the current command.  The results, if any, should be discarded.
Msg 0, Level 20, State 0, Line 0
A severe error occurred on the current command.  The results, if any, should be discarded. 
```

当我右键单击并直接执行 SP 或从代理作业运行它（代理作业，如果我将其设置为重试，重试时总是会成功）时，都会出现此问题。当问题的“每隔一次执行”性质是非常可重复的。

我插入的表确实有一个 PrimaryKey，我没有在 SP 中处理它，因为我让 SQL 处理递增该值。

这是 SP（实际上是该 SP 的 Alter Procedure 输出），有什么想法吗？

```
USE [Database1]
GO
/****** Object:  StoredProcedure [dbo].[sp210_Daily_Summary_21006]    Script Date: 02/06/2013 10:26:06 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER Procedure [dbo].[sp210_Daily_Summary_21006]

/*** 21006 ***/
@Date datetime = NULL,
@Shop_Order int = NULL,
@Lot_Number nvarchar(16) = NULL,
@Part_Number nvarchar(16) = NULL,
@Balance_Left int = NULL,
@Day_Shift_OEE real = NULL,
@Day_Shift_Good int = NULL,
@Day_Shift_Supervisor_Notes nvarchar(256) = NULL,
@Day_Shift_Tech_Notes nvarchar(256) = NULL,
@Day_Shift_Repair_Log int = NULL,
@Day_Shift_QA_Notes nvarchar(256) = NULL,
@Day_Shift_NCMR_QIF int = NULL,
@Night_Shift_OEE real = NULL,
@Night_Shift_Good int = NULL,
@Night_Shift_Supervisor_Notes nvarchar(256) = NULL,
@Night_Shift_Tech_Notes nvarchar(256) = NULL,
@Night_Shift_Repair_Log int = NULL,
@Night_Shift_QA_Notes nvarchar(256) = NULL,
@Night_Shift_NCMR_QIF int = NULL

AS
BEGIN

Set NoCount On;

Select
@Date = GETDATE(),
@Shop_Order = (Select SHOP_ORDER_NUMBER from dbo.CurrentJobSetupsAutomation WHERE (WORK_CENTER = 21006)),
@Lot_Number = (Select LOT_NUMBER from dbo.CurrentJobSetupsAutomation WHERE (WORK_CENTER = 21006)),
@Part_Number = (Select ITEM_NUMBER from dbo.CurrentJobSetupsAutomation WHERE (WORK_CENTER = 21006)),
@Balance_Left = (Select BalanceDue from dbo.CurrentJobSetupsAutomation WHERE (WORK_CENTER = 21006)),

--- Day Shift Good (7:00 AM to 7:00 PM previous day) when report runs at 6:30 AM
@Day_Shift_Good = (SELECT sum(Actual)
FROM Database2.dbo.BPAQualityLog
where AssetID = 3 
and SubQualityName = 21006
and DATEADD(HH,DATEDIFF(hour,getutcdate(),getdate()),RecordUpdated) >= DATEADD(HH,-17, DATEADD(DD,0, DATEDIFF(DD, 0, GETDATE())))
and DATEADD(HH,DATEDIFF(hour,getutcdate(),getdate()),RecordUpdated) <= DATEADD(HH,-5, DATEADD(DD,0, DATEDIFF(DD, 0, GETDATE())))
),

@Day_Shift_Supervisor_Notes = (Select Day_Shift_Supervisor_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Day_Shift_Tech_Notes = (Select Day_Shift_Tech_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Day_Shift_Repair_Log = (Select Day_Shift_Repair_Log from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Day_Shift_QA_Notes = (Select Day_Shift_QA_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Day_Shift_NCMR_QIF = (Select Day_Shift_NCMR_QIF from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),

--- Night Shift Good (7:00 PM to 7:00 AM current day) when report runs at 6:30 AM
@Night_Shift_Good = (SELECT sum(Actual)
FROM Database2.dbo.BPAQualityLog
where AssetID = 3 
and SubQualityName = 21006
and DATEADD(HH,DATEDIFF(hour,getutcdate(),getdate()),RecordUpdated) >= DATEADD(HH,-5, DATEADD(DD,0, DATEDIFF(DD, 0, GETDATE())))
and DATEADD(HH,DATEDIFF(hour,getutcdate(),getdate()),RecordUpdated) <= DATEADD(HH,7, DATEADD(DD,0, DATEDIFF(DD, 0, GETDATE())))
),

@Night_Shift_Supervisor_Notes = (Select Night_Shift_Supervisor_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Night_Shift_Tech_Notes = (Select Night_Shift_Tech_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Night_Shift_Repair_Log = (Select Night_Shift_Repair_Log from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Night_Shift_QA_Notes = (Select Night_Shift_QA_Notes from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006)),
@Night_Shift_NCMR_QIF = (Select Night_Shift_NCMR_QIF from dbo.[210_Daily_Temp] WHERE (WORK_CENTER = 21006))

Set NoCount Off;

insert into [Database1].[dbo].[210_Daily_Summary]
([Date], 
[Work_Center], 
[Shop_Order], 
[Lot_Number], 
[Part_Number], 
[Balance_Left],
[Day_Shift_Good],
[Day_Shift_Supervisor_Notes],
[Day_Shift_Tech_Notes],
[Day_Shift_Repair_Log],
[Day_Shift_QA_Notes],
[Day_Shift_NCMR_QIF],
[Night_Shift_Good],
[Night_Shift_Supervisor_Notes],
[Night_Shift_Tech_Notes],
[Night_Shift_Repair_Log],
[Night_Shift_QA_Notes],
[Night_Shift_NCMR_QIF]
)

values
(@Date,
'21006', 
@Shop_Order,
@Lot_Number,
@Part_Number,
@Balance_Left,
@Day_Shift_Good,
@Day_Shift_Supervisor_Notes,
@Day_Shift_Tech_Notes,
@Day_Shift_Repair_Log,
@Day_Shift_QA_Notes,
@Day_Shift_NCMR_QIF,
@Night_Shift_Good,
@Night_Shift_Supervisor_Notes,
@Night_Shift_Tech_Notes,
@Night_Shift_Repair_Log,
@Night_Shift_QA_Notes,
@Night_Shift_NCMR_QIF
)

END 
```

这是我用来创建我插入的表的查询：

```
USE [Database1]
GO

/****** Object:  Table [dbo].[210_Daily_Summary]    Script Date: 02/06/2013 10:28:34 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[210_Daily_Summary](
[PrimaryKey] [int] IDENTITY(1,1) NOT NULL,
[Date] [datetime] NULL,
[Work_Center] [nvarchar](16) NULL,
[Shop_Order] [int] NULL,
[Lot_Number] [nvarchar](16) NULL,
[Part_Number] [nvarchar](16) NULL,
[Balance_Left] [int] NULL,
[Day_Shift_OEE] [real] NULL,
[Day_Shift_Good] [int] NULL,
[Day_Shift_Supervisor_Notes] [nvarchar](256) NULL,
[Day_Shift_Tech_Notes] [nvarchar](256) NULL,
[Day_Shift_Repair_Log] [int] NULL,
[Day_Shift_QA_Notes] [nvarchar](256) NULL,
[Day_Shift_NCMR_QIF] [int] NULL,
[Night_Shift_OEE] [real] NULL,
[Night_Shift_Good] [int] NULL,
[Night_Shift_Supervisor_Notes] [nvarchar](256) NULL,
[Night_Shift_Tech_Notes] [nvarchar](256) NULL,
[Night_Shift_Repair_Log] [int] NULL,
[Night_Shift_QA_Notes] [nvarchar](256) NULL,
[Night_Shift_NCMR_QIF] [int] NULL
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:41:21.277

好的，首先让我们确保您没有腐败。运行以下命令并告诉我们结果：

```
DBCC CHECKDB (<Database Name>) WITH NO_INFOMSGS, ALL_ERRORMSGS 
```

接下来，您要检查 SQL Server 错误日志以查看服务器是否同时记录任何其他错误。

# c++ - 使用函数作为“for”循环的第二个参数

> ID：14733003
> 
> 赞同：1
> 
> 时间：2013-02-06T15:46:01.623
> 
> 标签：c++

假设我有以下代码：

```
for(std::vector<int>::iterator i = vect.begin(); i != vect.end(); ++i)
{
    //do smth here
} 
```

每次迭代都会重新调用 vect.end() 吗？如果是，那么我应该如何迭代向量呢？

在逻辑表达式（for循环的第二个参数）中调用函数通常是不好的做法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T15:48:31.103

是的，它会。但是，如果编译器可以确定返回的值`vect.end()`永远不会改变，它当然可以优化它。但是，如果您想避免这样做，只需将代码更改为：

```
for(std::vector<int>::iterator i = vect.begin(), end = vect.end();
    i != end; ++i)
{
    //do smth here
} 
```

当然，您应该确保您的代码不依赖于`end()`在每次迭代中进行检查。例如，如果您`vect.erase(i)`对向量中的元素进行处理，则需要确保`end()`每次都获得新的迭代器（并确保将结果分配给`erase`to `i`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:50:33.083

你所拥有的似乎非常好。`vect.end()`应该是 O(1) 操作，所以这不会对性能造成巨大影响。

但是，如果您正在寻找替代方案：

```
typedef std::vector<int>::iterator iter;
iter end = vect.end();
for(iter it = vect.begin(); it != end; ++it) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:53:15.460

没有错。

或者：

```
std::vector<int>::iterator it = vect.begin();
std::vector<int>::iterator end = vect.end();

for(it; it != end; it++) ... 
```

或者，如果您的编译器支持基于 C++11 范围的 for 循环，您可以像这样迭代向量：

```
for(auto x : vect)
{
    //x is the actual int, not an iterator.
} 
```

# php - 如何在第一个表不知道的情况下在 Doctrine 2 中添加 OneToMany 关系？

> ID：14733009
> 
> 赞同：1
> 
> 时间：2013-02-06T15:46:14.083
> 
> 标签：php, sql, model, doctrine-orm, entity-relationship

我想为我的应用程序构建一个可扩展的模型，其中第 3 方开发人员可以动态地将字段添加到我的模型中，而无需修改我的模型本身。我认为这可以通过“X 有 Y”来完成，其中字段 X 未在实体 Y 中指定。因此，第 3 方开发人员只需将他们的实体放在文件夹中并让 Y 发现它。让我举一个更具体的例子：

```
User
- Id
- Name 
```

假设我想在用户有很多帖子的地方添加集合帖子。如果不向用户模型添加 Posts 字段，我怎么能做到这一点。我一直在阅读有关单向 OneToMany 等内容，但不确定这是否会使我的模型易于扩展？你们将如何尝试实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:47:44.400

解析目标实体侦听器允许您在运行时重新定义关联。它基本上允许您映射如下内容：

```
@ORM\ManyToOne(targetEntity="My\Namespace\UserInterface") 
```

如您所见，将接口映射为目标实体没有多大意义。当您告诉必须将每个`My\Namespace\UserInterface`都替换为`Other\Namespace\User`参考时，它变得非常有用。

这将允许您的其他开发人员替换关联对象的实现，仅实现其接口，然后在某处设置配置键以仅在需要时覆盖您的映射。

即使没有接口，它也可以工作，但我强烈建议使用由合同定义的清晰 API。

# javascript - 使用JS更改按钮上的图像

> ID：14733010
> 
> 赞同：0
> 
> 时间：2013-02-06T15:46:16.313
> 
> 标签：javascript, html

这听起来很简单，但我遇到了一些困难。

我有一个按钮可以执行各种代码，如下所示：

`document.getElementById('frm_accountId').disabled = false;`

这很好，但是，执行此操作的按钮自然会显示一个锁定图标，并且在单击该图标时希望将其更改为解锁图标。

```
<button id="button_unlock" type="button" onClick="unlock(this)"><img src="<?=base_url();?>assets/images/icons/stock_lock.png"/></button> 
```

所以我想改变的是

`<img src="<?=base_url();?>assets/images/icons/stock_lock.png"/>`.

是否可以将其分配给`php`变量并使用 JS 更改它，我认为不是，但这就是我想要做的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:58:02.503

你可以得到 innerHTML 并改变它

```
document.getElementById("button_unlock").innerHTML ="<img src='unlock.jpg'/>" ; 
```

但更好的是向您的按钮添加一个 css 类并定义一个背景图像。然后，当单击它时，将类更改为具有另一个图像的类。

```
.lock {
    background-image: url(lock.jpg);
    }

.unlock {
    background-image: url(unlock.jpg);
    }

<button id="button_unlock" type="button" onClick="unlock(this);" class="lock"></button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:05:07.683

这是如何切换图像的示例。它使用`data-locked`属性来维护其状态，并使用对象字面量来定义图像路径。这种方法的优点是它可以处理多个按钮和图像，每个按钮和图像都将保持一个单独的状态，因为代码相对于`<img>`目标按钮的子级工作。

```
var images = {
    locked : '<?=base_url();?>assets/images/icons/stock_lock.png',
    unlocked : '<?=base_url();?>assets/images/icons/stock_unlock.png'
};

function toggleLocked(buttonElement)
{
    var locked = buttonElement.getAttribute("data-locked") == "1";

    locked = !locked;
    buttonElement.setAttribute("data-locked", locked ? "1" : "0");

    buttonElement.children[0].src = locked ? images.locked : images.unlocked;
} 
```

HTML：

```
<button id="button_unlock" type="button" data-locked="1" onClick="toggleLocked(this)"><img src="<?=base_url();?>assets/images/icons/stock_lock.png"/></button> 
```

# css - CSS减少文本和边框之间的空间

> ID：14733011
> 
> 赞同：14
> 
> 时间：2013-02-06T15:46:18.997
> 
> 标签：css, border, underline

悬停链接时，我希望它有下划线。下划线应在文本下方 2px 和 4px 处。

和

```
text-decoration: underline 
```

我得到一条 1px 的强线，低于 4px。（距离因字体而异）

如果我写

```
border-bottom: 2px solid #000; 
```

我得到一条 2px 的线，它在文本下方约 10px 处。

如何减少文本和边框之间的距离？

```
padding-bottom: -6px 
```

不起作用。padding-bottom 的任何负值都不起作用。

或者我怎样才能让下划线变强 2px？

[http://jsfiddle.net/qJE2w/1/](http://jsfiddle.net/qJE2w/1/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T15:51:57.217

我想到的一个快速解决方案是在伪元素上应用边框：

```
.border{
    position: relative;
}

.border:hover::after{
    content:'';
    position:absolute;
    width: 100%;
    height: 0;    
    left:0;
    bottom: 4px;                    /* <- distance */
    border-bottom: 2px solid #000;  
} 
```

（[示例](http://jsfiddle.net/RYj3d/)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-15T08:27:24.473

您可以使用 line-height 来减少距离。

```
.underline {
  display: inline-block;
  line-height: 0.9; // the distance
  border-bottom: 1px solid;
} 
```

这种方法的缺点——因为我们使用块显示它只适用于单行文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-09T18:55:52.463

您可以使用`background`with`linear-gradient`来生成边框，并且可以将其放置在任何地方。

例如：

```
background-image: linear-gradient(currentColor, currentColor);
background-position: 0 95%; /* determines how far from bottom */
background-repeat: no-repeat;
background-size: 100% 5px; /* second value determines height of border */ 
```

[http://jsfiddle.net/1mg4tkwx/](http://jsfiddle.net/1mg4tkwx/)

信用：[https ://www.dannyguo.com/blog/animated-multiline-link-underlines-with-css/](https://www.dannyguo.com/blog/animated-multiline-link-underlines-with-css/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-16T12:15:16.833

## 多线解决方案

***解释。***我正在创建一个具有相同文本和文本样式的兄弟姐妹，并且稍微移到顶部。如果你想保持你的代码干净，你可以在页面加载事件中使用 JS 插入兄弟。

***限制。***此解决方案不适用于文本段落。

```
.underlined_link {
  text-decoration: none;
  display: inline;
}
.underlined_link h2,
.underlined_link div {
  display: inline;
  font-size: 20px;
  margin: 0;
  line-height: 35px;
  font-weight: normal;
  padding: 0;
}
.underlined_link h2 {
  color: transparent;
  border-bottom: 1px solid red;
}
.underlined_link div {
  position: absolute;
  top: 10px;
  left: 8px;
}
```

```
<a class="underlined_link" href="#">
  <h2>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean eu nulla vel massa efficitur lacinia. In at dolor ac nulla interdum convallis. Nullam vitae eros orci. Curabitur vitae maximus erat, vel pulvinar ex.</h2>
  <div><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean eu nulla vel massa efficitur lacinia. In at dolor ac nulla interdum convallis. Nullam vitae eros orci. Curabitur vitae maximus erat, vel pulvinar ex.</span></div>
</a>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T09:31:46.327

这条线对我有用：

```
.main-nav ul li {
    padding: 0 10px;
}
.main-nav .main-menu  li a {
    border-right: 2px solid #262626; 
    padding: 7px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-22T16:09:01.570

我发现一个很酷的解决方案是使用轮廓应用边框，然后在轮廓偏移属性中使用负值。

```
.outline-border {
  outline: 2px solid red;
  outline-offset: -2px; 
} 
```

# jquery - 关闭第二个浏览器时触发reloadGrid不刷新

> ID：14733012
> 
> 赞同：0
> 
> 时间：2013-02-06T15:46:23.373
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我 `$("#list").trigger("reloadGrid", [{ current: true}]);` 在另一个页面中调用 after close 事件时遇到问题。我有一个带有网格的页面，我想打开第二个不是孩子的窗口，当我关闭第二个页面事件被触发但

```
<script>
        window.onunload = refreshParent;
        function refreshParent() {
          jQuery(window.opener.document.getElementById('#list')).trigger("reloadGrid");
        //or
           $("#list").trigger("reloadGrid", [{ current: true}]);          
       }
    </script> 
```

刷新网格没有重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:35:46.173

如果事件正确触发，请删除`, [{ current: true}]`并调用

```
$('#list').jqGrid().trigger("reloadGrid") 
```

如果这不起作用，我会假设您对将在子窗口和父窗口中打开的网格都有唯一的名称？

# jquery - 获取将参数传递给jquery中当前函数的函数名称

> ID：14733014
> 
> 赞同：1
> 
> 时间：2013-02-06T15:46:28.937
> 
> 标签：jquery

我正在尝试获取在 jquery 中调用当前函数的函数的名称。

例如，假设有三个函数

功能a，功能b，功能c

当其中一个函数调用函数 z 时，如果可能的话，我希望能够获得调用函数 z 的函数的字符串输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:51:50.553

Javascript 提供了一种访问当前函数的被调用者的机制：

```
function FunctionA() {
    alert(arguments.callee.caller.name);
}

function FunctionB() {
    FunctionA();
}

FunctionB(); 
```

下面的 JSFiddle 也演示了这一点。 [http://jsfiddle.net/8UFe2/](http://jsfiddle.net/8UFe2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:47:43.270

您将使用[arguments.callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)来获取调用函数

# lucene - 在 lucene 中索引和搜索 '@'、'#' 等特殊字符

> ID：14733020
> 
> 赞同：1
> 
> 时间：2013-02-06T15:46:39.063
> 
> 标签：lucene

我正在索引字段，使用`StandardAnlyzer`它从输入字符串中删除标点符号。我的输入字符串包含特殊字符，如`@`, `#`,`-`等。

例如：索引数据可能包含类似 userid: 的值`AB@234`，`ABC#DF`

我正在尝试通过 BooleanQuery uesrid 更新索引：`ABC@34`删除以前的文档使用`writer.deletedocuments(query);` 并使用更新索引`writer.updateDocuments(Term,document);`

使用上述查询删除当前 indexex 会删除所有以 . 开头的值，即`ABC@`带有 userid 值`ABC@123`、`ABC@55`等的文档也会被删除。

任何人都可以提出一种解决方案来索引和更新包含上述特殊字符的特定文档。

任何建议都非常感谢。

预先感谢。

查克拉达尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:19:00.513

最好的选择可能是使用[KeywordAnalyzer](http://lucene.apache.org/core/4_1_0/analyzers-common/org/apache/lucene/analysis/core/KeywordAnalyzer.html)为您的字段编制索引`userid`，然后使用[IndexWriter.deleteDocuments(Term)](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/index/IndexWriter.html#deleteDocuments%28org.apache.lucene.index.Term%29)删除文档。

# box-api - 如何批量更新Box企业用户

> ID：14733021
> 
> 赞同：0
> 
> 时间：2013-02-06T15:46:40.060
> 
> 标签：box-api

我已经使用 Box API 成功拉回了企业用户列表：http: [//developers.box.com/docs/](http://developers.box.com/docs/)

我现在想批量更新一组用户，将该组设置为非活动。

在 API 中，我看到您可以像这样更新单个用户：`PUT /users/{id}`

我相信我可以遍历 .csv 文件中的用户列表，并通过上述方法将每个用户单独设置为“非活动”。问题是我不知道要包含在 .csv 文件中的每个用户的 ID。如果我通过 Box 管理控制台的“批量编辑”功能导出用户，我会得到一个用户的 .csv 文件，但它只包含以下列：名称、电子邮件、组和存储。

所以，我的第一个想法是，可能有某种方法可以使用电子邮件地址通过 API 更新用户。如，首先通过电子邮件地址搜索用户，然后从结果中获取 ID，最后使用返回的 ID 更新用户帐户。这是可能的还是你能建议另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:50:29.280

George，[获取企业中的所有用户](http://developers.box.com/docs/#users-get-all-the-users-in-an-enterprise)功能允许您通过登录（电子邮件）过滤用户。该请求将遵循以下格式：

`GET /users?filter_term=USERNAME`

或者，如有必要，

`GET /users?filter_term=USERNAME%40DOMAIN.COM`

然后，您可以按照您的建议使用该用户的 ID 来保留更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:54:15.760

您可以“获取企业中的所有用户”。这将为您提供帐户中的所有用户，包括他们的电子邮件地址和用户 ID。一旦你有了它，你可以单独更新它们。

[http://developers.box.com/docs/#users](http://developers.box.com/docs/#users)

# winforms - 放置可能会自动调整大小的面板

> ID：14733023
> 
> 赞同：0
> 
> 时间：2013-02-06T15:46:47.080
> 
> 标签：winforms, panel, tablelayout

我的设计是这样的：我有一些面板，比如 Panel1、Panel2、Panel3……我的主窗口由两个或多个面板组成，例如 Window1 由 Panel1 和 Panel2 组成，Window2 由 Panel3 和 Panel2 组成，……它们都在另一个之下，并且可能会发生我必须从面板中添加或删除某些东西，以便它增长或缩小。我是否必须使用 TableLayout 来保持它们对齐？或者是否有一个选项告诉我的 Panel1 它应该是 Panel2 结束的位置？

更新：我忘了提到我正在开发一个桌面应用程序。在研究 TableLayoutPanel 和 GridLayoutPanel 时，我读到这有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:59:17.323

没有选项可以告诉 Panel2 从 panel1 结束的地方开始。但是，“必须使用 TableLayout”也不是真的。例如，您可以使用手动重新定位或流程布局面板。顺便说一句，从您的简短描述中，听起来流程布局面板可能比表格布局控件更适合这里的账单。

# c# - 如何为异步启动的表单创建安全的非全局互斥锁

> ID：14733025
> 
> 赞同：0
> 
> 时间：2013-02-06T15:46:49.327
> 
> 标签：c#, winforms, mutex

**要求：**

**A.** 1 用户登录可以`System.Windows.Form`在`ProcessName`.
**B.** 2 个不同的用户登录每个都能够`System.Windows.Form`在`ProcessName`.
**C.** `MutexChecker`在它自己的类中而不是 的成员，`Form`因为处理互斥锁的责任会根据用户操作从一种形式更改为另一种形式。
**D.** Said`Form`在 Mutex 创建后异步启动。所以我无法执行`using`声明。

**问题：**

在其他 SO 帖子中，我看到类似于以下标记为“不安全”的代码。但是，没有给出代码被标记为“不安全”的原因。相反，提供了一个[全局互斥锁](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c/229567)作为解决方案。全局互斥锁在机器范围内工作，因此不符合要求。

**我试过的：**

`mutexChecker.RunCheck()`来自说的电话`System.Windows.Form`

```
public class MutexChecker:IDisposable
{
    private Mutex mutex;

    public bool RunCheck()
    {
        bool createdNew;
        mutex = new Mutex(initiallyOwned: true, name: "AppName", createdNew: out createdNew);

        if (!createdNew)
        {
            MessageBox.Show("AppName is already running.  Please complete the other note before opening a new window.");
        }

        return createdNew;
    }

    public void Dispose()
    {
        mutex.ReleaseMutex();//ERROR: safe handle has been disposed
        mutex.Dispose();//Does not always release the mutex for some unknown reason
    } 
```

在`Form.Dispose`.

**问题**

如何安全地创建满足要求的互斥锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:32:16.740

为了以异步方式处理处理我的处置的多种形式`Mutex`，我提出了一个`event`指定处置时间。否则，我只是在构建后立即转储不必要的互斥锁：

```
public class MutexChecker
{
    private Mutex mutex;
    private const string instanceName = "AppName";
    private bool createdNew = false;

    public bool RunCheck()
    {            
        mutex = new Mutex(initiallyOwned: true, name: instanceName, createdNew: out createdNew);

        if (createdNew)
        {
            HelperClass.shutdown += Dispose;
        }
        else
        {
            MessageBox.Show("AppName is already running.  Please complete the other note before opening a new window.");
            mutex.Dispose();//dump...I don't need this instance
        }

        return createdNew;
    }

    void Dispose()
    {
        HelperClass.shutdown -= Dispose;
        mutex.Dispose();        
    }
} 
```

# html - Firefox中的无限连接循环

> ID：14733036
> 
> 赞同：2
> 
> 时间：2013-02-06T15:47:14.683
> 
> 标签：html, firefox

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>JS Bin</title>
        <script type="text/javascript">
            function a(){
                for(i=0;i<10;i++)
                {
                    document.write(i);
                }
            }
        </script>
    </head>
    <body>
        <form>
            <input type="submit" value="submit" onClick="a();return false;">
        </form>
    </body>
</html> 
```

导致无休止的连接..当在 Firefox 选项卡中按下提交按钮时循环；

是什么原因？有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:09:26.747

`document.close();` 因为如果你完成了写作，firefox 期待 a 。

*无休止*的连接表明某些事情仍在进行中。

```
 <script type="text/javascript">
   function a(){
    for(i=0;i<10;i++)
    {
          document.write(i);
    }
    document.close();
   }
  </script> 
```

# c++ - OpenCV 边界框

> ID：14733042
> 
> 赞同：3
> 
> 时间：2013-02-06T15:47:38.170
> 
> 标签：c++, opencv, image-processing

我正在开发在 C++ 环境中使用 OpenCV 的软件。**目标是检测拳击手套并在手套轮廓周围绘制边界框**。

我遇到的问题是边界框不止一次被淹没，实际上绘制了多个框。在过去的几天里，我试图做的是以某种方式消除绘制的框的数量，并且只绘制一个大的边界框。

我正在研究一些技术来填充对象的整体，我相信这在这种情况下真的会有所帮助。

下面我发布了用于实现图像中显示结果的代码：

```
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
vector<Vec3f> vecCircles;               
vector<Vec3f>::iterator itrCircles;

while(1)
{
    Mat frame;
    cap >> frame; // get a new frame from camera
    /////////////////////
    Mat imgHSV;
    cvtColor( frame, imgHSV, CV_BGR2HSV );
    ////////////////////
    Mat blur_out;
    GaussianBlur(imgHSV, blur_out, Size(1,1),2.0,2.0);
    ////////////////////
    Mat range_out;
    inRange(blur_out, Scalar(100, 100, 100), Scalar(120, 255, 255), range_out);
    ////////////////////
    findContours(range_out, contours, hierarchy, CV_RETR_TREE,  CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );

     /// Approximate contours to polygons + get bounding rects and circles
     vector<vector<Point> > contours_poly( contours.size() );
     vector<Rect> boundRect( contours.size() );
     vector<Point2f>center( contours.size() );
     vector<float>radius( contours.size() );

     for( int i = 0; i < contours.size(); i++ )
     { 
         approxPolyDP( Mat(contours[i]), contours_poly[i], 3, true );
         boundRect[i] = boundingRect( Mat(contours_poly[i]) );
     }

     /// Draw polygonal contour + bonding rects
     Mat drawing = Mat::zeros( range_out.size(), CV_8UC3 );
     for( int i = 0; i< contours.size(); i++ )
     {
         Scalar color = Scalar(255,0,255);
         drawContours( drawing, contours_poly, i, color, 1, 8, vector<Vec4i>(), 0, Point() );
         rectangle( drawing, boundRect[i].tl(), boundRect[i].br(), color, 2, 8, 0 );          
     } 
```

![在此处输入图像描述](../Images/cbb1f254241d1f285e4c8fe9a0c30b1f.png)

如果有人可以提出一些建议或提供一些信息来源，我可以找到我的问题的答案。

**编辑**（快速更新）：

我设法将输出图像安静地逐渐改善到对结果感到满意的程度。关键是腐蚀和膨胀的使用以及我的`findContours()`功能。我将其更改`CV_RETR_TREE`为 `CV_RETR_EXTERNAL`. 我还解决了其他一些小问题，但结果很好：

![在此处输入图像描述](../Images/9a9534bc5d54498a1052b487d813f212.png)

不知道我是应该在这里写这个还是打开新线程....但是现在我需要一些帮助来处理组件标签和提取参数，例如中心点和面积。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:57:32.060

[看看我](https://stackoverflow.com/a/10317919/176769)在这个主题中的其他答案。编译该代码并记住激活被注释掉的代码。

**结果**：

![在此处输入图像描述](../Images/e62283a1c406a70fed6a18837f50f053.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:20:30.650

您当前在每个轮廓周围绘制一个边界框，findContour 将在每个连接的白色或黑色组件周围找到一个轮廓，您的图片中有很多。

所以我要做的第一件事是对阈值图像进行一些形态学操作来过滤所有噪声：做一些[打开和关闭](http://docs.opencv.org/trunk/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html)，这两者都是[膨胀和腐蚀](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)的组合。

在您的情况下，类似于 cvDilate（2 次）；cvErode（4次）；cvDilate(2次)

这应该将所有白色斑点合并为一个光滑的斑点，但中间的黑洞将保留。您可以按大小找到正确的一个，但使用 CV_RETR_EXTERNAL 而不是 CV_RETR_TREE 调用 findContours 更容易，然后它只会返回最外层的轮廓。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:21:55.220

在找到轮廓之前，您应该应用形态过滤器，例如[erode](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=morphology#erode)和[dilate](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=morphology#dilate)。之后，您可以通过计算其[大小](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=contour#cv2.contourArea)或边界框的高度和高度来找到轮廓并忽略小的轮廓。[最后，您可以使用层次结构](http://opencvpython.blogspot.hu/2013/01/contours-5-hierarchy.html)消除其他轮廓内的那些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:47:24.167

正如 b_m 提到的，您需要应用形态学操作。然后我会做一些事情，比如在图像中找到最大的轮廓并仅在该轮廓周围绘制边界框。我为我的一个项目创建了以下函数，我认为如果以正确的方式使用它会对你有所帮助

```
CvSeq* findLargestContour(CvSeq* contours){

  CvSeq* current_contour = contours;
  double largestArea = 0;
  CvSeq* largest_contour = NULL;

  // check we at least have some contours

  if (contours == NULL){return NULL;}

  while (current_contour != NULL){

      double area = fabs(cvContourArea(current_contour));

      if(area > largestArea){
          largestArea = area;
          largest_contour = current_contour;
      }

      current_contour = current_contour->h_next;
  }

  // return pointer to largest

  return largest_contour;

} 
```

# stored-procedures - 实体框架代码优先 - 为 SqlQuery 配置映射

> ID：14733047
> 
> 赞同：13
> 
> 时间：2013-02-06T15:47:49.137
> 
> 标签：stored-procedures, configuration, ef-code-first, mapping, entity-framework-5

我正在使用 Entity Framework 5（使用 Code First 方法）从带有参数的遗留存储过程中填充我的一个类，这工作正常（详细信息如下）。我的问题是我想将列的名称映射到具有不同名称的属性（我不喜欢来自 Erp 的名称）。我尝试使用配置类（就像我映射到视图或表时所做的那样）来为具有不同名称的属性指定列名，这是我的结果：

*   如果我不使用配置类（我没有在 DbContext 的 OnModelCreating 方法中添加它），那么 EF 可以工作，但只加载与列名称完全匹配的属性（这就是我所期望的案子）; 其他属性为空；
*   如果我使用配置类（将其添加到 DbContext 的 OnModelCreating 方法中的 modelBuilder 中），则 EF 会引发异常，指出“数据读取器与指定的 '...Item' 不兼容。类型的成员，' Description'，在数据读取器中没有同名的对应列”，这对我来说听起来很奇怪，因为在配置中我指定属性 Description 映射到列 ItemDescription。

为什么配置会影响我的结果，但其规范不用于映射列？是否有另一种方法可以使用 SqlQuery 指定此映射？

以下是详细信息：

我的 POCO 课程：

```
public class Item
    {
        public String Id { get; set; }
        public String Description { get; set; }
    } 
```

配置类：

```
public class ItemConfiguration : EntityTypeConfiguration<Item>
    {
        public ItemConfiguration()
        {
            HasKey(x => new { x.Id });
            Property(x => x.Id).HasColumnName("Code");
            Property(x => x.Description).HasColumnName("ItemDescription");
        }
    } 
```

存储过程返回带有“代码”和“项目描述”列的数据；我这样称呼它：

```
var par = new SqlParameter();
par.ParameterName = "@my_par";
par.Direction = ParameterDirection.Input;
par.SqlDbType = SqlDbType.VarChar;
par.Size = 20;
par.Value = ...;

var data = _context.Database.SqlQuery<Item>("exec spItem @my_par", par); 
```

并以此将配置添加到上下文中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
      modelBuilder.Configurations.Add(new ItemConfiguration());
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T10:56:36.733

我在这里找到：

[http://entityframework.codeplex.com/workitem/233?PendingVoteId=233](http://entityframework.codeplex.com/workitem/233?PendingVoteId=233)

“SqlQuery 方法旨在不考虑任何映射......”。

他们还说：“我们同意让 SqlQuery 尊重 Column 属性的选项很有用，因此我们将这个问题保持开放并将其放在我们的积压工作中以供将来考虑。”，所以，如果你有同样的问题，请投票:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-11T10:07:14.077

同时，您可以使用此方法。很少有测试（因为它适用于我的课程），但如果需要修复也不难......它需要一个上下文（检索映射的自定义类型）并且它需要一个不同的连接来同时在其上运行数据读取器。

用法：
列出学生 = Mapper.Map(context, (new SchoolContext()).Database.Connection, "Select * from Students");

```
public static class Mapper
{
    /// <summary>
    /// Maps the result of a query into entities.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="context">The context.</param>
    /// <param name="queryConnection">The connection to run the query. Must be different from the one on the context.</param>
    /// <param name="sqlQuery">The SQL query.</param>
    /// <returns>An entity list</returns>
    /// <exception cref="System.ArgumentNullException">
    /// context
    /// or
    /// queryConnection
    /// or
    /// sqlQuery
    /// </exception>
    public static List<T> Map<T>(DbContext context, DbConnection queryConnection, string sqlQuery) where T:new()
    {
        if (context == null) 
            throw new ArgumentNullException("context");
        if (queryConnection == null)
            throw new ArgumentNullException("queryConnection");
        if (sqlQuery == null) 
            throw new ArgumentNullException("sqlQuery");

        var connectionState = queryConnection.State;

        if (connectionState != ConnectionState.Open)
            queryConnection.Open();

        DbCommand command = queryConnection.CreateCommand();
        command.CommandText = sqlQuery;
        DbDataReader reader = command.ExecuteReader();

        List<T> entities = new List<T>();

        while (reader.Read())
        {
            entities.Add(InternalMap<T>(context, reader));
        }

        if (connectionState != ConnectionState.Open)
            queryConnection.Close();

        return entities;

    }

    private static T InternalMap<T>(DbContext context, DbDataReader reader) where T: new()
    {

        T entityObject = new T();

        InternalMapEntity(context, reader, entityObject);

        return entityObject;
    }

    private static void InternalMapEntity(DbContext context, DbDataReader reader, object entityObject)
    {

        ObjectContext objectContext = ((IObjectContextAdapter)context).ObjectContext;
        var metadataWorkspace = ((EntityConnection)objectContext.Connection).GetMetadataWorkspace();

        IEnumerable<EntitySetMapping> entitySetMappingCollection = metadataWorkspace.GetItems<EntityContainerMapping>(DataSpace.CSSpace).Single().EntitySetMappings;
        IEnumerable<AssociationSetMapping> associationSetMappingCollection = metadataWorkspace.GetItems<EntityContainerMapping>(DataSpace.CSSpace).Single().AssociationSetMappings;

        var entitySetMappings = entitySetMappingCollection.First(o => o.EntityTypeMappings.Select(e => e.EntityType.Name).Contains(entityObject.GetType().Name));

        var entityTypeMapping = entitySetMappings.EntityTypeMappings[0];
        string tableName = entityTypeMapping.EntitySetMapping.EntitySet.Name;
        Console.WriteLine(tableName);

        MappingFragment mappingFragment = entityTypeMapping.Fragments[0];

        foreach (PropertyMapping propertyMapping in mappingFragment.PropertyMappings)
        {
            object value = Convert.ChangeType(reader[((ScalarPropertyMapping) propertyMapping).Column.Name], propertyMapping.Property.PrimitiveType.ClrEquivalentType);
            entityObject.GetType().GetProperty(propertyMapping.Property.Name).SetValue(entityObject, value, null);
            Console.WriteLine("{0} {1} {2}", propertyMapping.Property.Name, ((ScalarPropertyMapping)propertyMapping).Column, value);
        }

        foreach (var navigationProperty in entityTypeMapping.EntityType.NavigationProperties)
        {
            PropertyInfo propertyInfo = entityObject.GetType().GetProperty(navigationProperty.Name);

            AssociationSetMapping associationSetMapping = associationSetMappingCollection.First(a => a.AssociationSet.ElementType.FullName == navigationProperty.RelationshipType.FullName);

            // associationSetMapping.AssociationTypeMapping.MappingFragment.PropertyMappings contains two elements one for direct and one for inverse relationship
            EndPropertyMapping propertyMappings = associationSetMapping.AssociationTypeMapping.MappingFragment.PropertyMappings.Cast<EndPropertyMapping>().First(p => p.AssociationEnd.Name.EndsWith("_Target"));

            object[] key = propertyMappings.PropertyMappings.Select(c => reader[c.Column.Name]).ToArray();
            object value = context.Set(propertyInfo.PropertyType).Find(key);
            propertyInfo.SetValue(entityObject, value, null);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-30T11:24:02.537

我刚刚编写了下面的扩展方法，将 sql 查询转换为名为 sql 的属性，然后查询数据。

希望有用

```
public static class DbSetExtensions
    {
        public static DbSqlQuery<TEntity> SqlColumnQuery<TEntity>(this DbSet<TEntity> dbSet, string sqlQuery)
            where TEntity : class
        {
            var context = GetContext(dbSet);
            return dbSet.SqlQuery(MapQueryToColumns(sqlQuery, context, typeof(TEntity)));
        }

        public static DbContext GetContext<TEntity>(this DbSet<TEntity> dbSet)
            where TEntity : class
        {
            object internalSet = dbSet
                .GetType()
                .GetField("_internalSet", BindingFlags.NonPublic | BindingFlags.Instance)
                .GetValue(dbSet);
            object internalContext = internalSet
                .GetType()
                .BaseType
                .GetField("_internalContext", BindingFlags.NonPublic | BindingFlags.Instance)
                .GetValue(internalSet);
            return (DbContext)internalContext
                .GetType()
                .GetProperty("Owner", BindingFlags.Instance | BindingFlags.Public)
                .GetValue(internalContext, null);
        }

        private static string MapQueryToColumns(string sqlQuery , DbContext context, Type entityType)
        {
            ObjectContext objectContext = ((IObjectContextAdapter)context).ObjectContext;
            var metadataWorkspace = ((EntityConnection)objectContext.Connection).GetMetadataWorkspace();

            IEnumerable<EntitySetMapping> entitySetMappingCollection = metadataWorkspace.GetItems<EntityContainerMapping>(DataSpace.CSSpace).Single().EntitySetMappings;
            //IEnumerable<AssociationSetMapping> associationSetMappingCollection = metadataWorkspace.GetItems<EntityContainerMapping>(DataSpace.CSSpace).Single().AssociationSetMappings;

            var entitySetMappings = entitySetMappingCollection.First(o => o.EntityTypeMappings.Select(e => e.EntityType.Name).Contains(entityType.Name));

            var entityTypeMapping = entitySetMappings.EntityTypeMappings[0];
            string tableName = entityTypeMapping.EntitySetMapping.EntitySet.Name;

            MappingFragment mappingFragment = entityTypeMapping.Fragments[0];

            List<string> propertyMappings = new List<string>();
            foreach (PropertyMapping propertyMapping in mappingFragment.PropertyMappings)
            {
                propertyMappings.Add(string.Format("{0} {1}", ((ScalarPropertyMapping)propertyMapping).Column.Name, propertyMapping.Property.Name));
            }
            var joinFields = string.Join(",",propertyMappings.ToArray());

            return string.Format("SELECT {0} FROM ({1})", joinFields, sqlQuery);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-15T10:41:44.610

经过几年使用 bubi 的方法并实现了一些代码，我决定在这里发布我们的改进。请注意，我不会发布对其他命名空间的引用。只需根据您的需要进行调整。

无论如何，我希望它可以帮助某人。

```
使用系统；
使用 System.Collections.Generic；
使用 System.Collections.Immutable；
使用 System.Data；
使用 System.Data.Common；
使用 System.Data.Entity.Core.EntityClient；
使用 System.Data.Entity.Core.Mapping；
使用 System.Data.Entity.Core.Metadata.Edm；
使用 System.Data.Entity.Infrastructure；
使用 System.Diagnostics；
使用 System.Linq；
使用 System.Linq.Expressions；

    公共抽象部分类 BaseService
        其中 TEntity : EntityDefault
    {
        私有常量 int MAX_ITEMS_PER_PREDICATE = 500;

        ///
        /// Lista imutável Competitiono todos os predicates, por tipo da entidade, a serem buscados no banco de dados。
        ///
        私有 ImmutableDictionary> 谓词 { 获取；放; }

        私有 ImmutableDictionary PredicatesCount { get; 放; }

        私有 ImmutableDictionary> LoadedPredicates { get; 放; }

        ///
        /// Lista imutável 竞争作为 entidades，que são propriedades de navegação，já buscadas no banco de dados。
        ///
        私有 ImmutableList NavigationEntities { 获取；放; }

        ///
        /// Lista imutável opinion todas as propriedades de navegação
        ///
        私有 ImmutableList NavigationProperties { get; 放; }

        ///
        /// 将查询结果映射到实体中。
        ///
        ///
        /// SQL 查询。
        /// 传递给过程的参数列表
        ///
        /// 当查询为空或为空时，它可能返回空。
        /// 一个实体列表
        ///
        /// 语境
        /// 或者
        /// 查询连接
        /// 或者
        /// sql查询
        ///
        公共列表 SqlQuery（字符串查询，字典参数，参数 KeyValuePair[] 选项）其中 T：EntityDefault
        {
            DbConnection queryConnection = null;

            尝试
            {
                InitOrResetSqlQueryVariables();

                如果（查询.HasntValue（））
                {
                    抛出新的 ArgumentNullException(nameof(query));
                }

                queryConnection = Db.Database.Connection;

                var connectionState = queryConnection.State;

                如果（连接状态！=连接状态。打开）
                {
                    查询连接.Open();
                }

                var command = queryConnection.CreateCommand();
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = 查询；

                如果（参数！= null）
                {
                    command.AddParameters(参数);
                }

                var reader = command.ExecuteReader();

                var 实体 = 新列表（）；

                而（读者。读（））
                {
                    entity.Add(MapEntity(reader));
                }

                LoadNavigationProperties（实体，选项）；

                返回实体；
            }
            最后
            {
                InitOrResetSqlQueryVariables();

                if (Db.BaseDb.AutoCloseConnection && queryConnection != null)
                {
                    if (queryConnection.State != ConnectionState.Closed)
                    {
                        查询连接.关闭（）；
                    }

                    queryConnection.Dispose();
                }
            }
        }

        public List SqlQuery(string query, List parameters, params KeyValuePair[] options) where T : EntityDefault
        {
            DbConnection queryConnection = null;

            尝试
            {
                InitOrResetSqlQueryVariables();

                如果（查询.HasntValue（））
                {
                    抛出新的 ArgumentNullException(nameof(query));
                }

                queryConnection = Db.Database.Connection;

                var connectionState = queryConnection.State;

                如果（连接状态！=连接状态。打开）
                {
                    查询连接.Open();
                }

                var command = queryConnection.CreateCommand();
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = 查询；

                如果（参数！= null）
                {
                    command.Parameters.AddRange(parameters.ToArray());
                }

                var reader = command.ExecuteReader();

                var 实体 = 新列表（）；

                而（读者。读（））
                {
                    entity.Add(MapEntity(reader));
                }

                LoadNavigationProperties（实体，选项）；

                返回实体；
            }
            最后
            {
                InitOrResetSqlQueryVariables();

                if (Db.BaseDb.AutoCloseConnection && queryConnection != null)
                {
                    if (queryConnection.State != ConnectionState.Closed)
                    {
                        查询连接.关闭（）；
                    }

                    queryConnection.Dispose();
                }
            }
        }

        私人 T MapEntity（IDataRecord 阅读器）
        {
            var entityObject = Activator.CreateInstance();

            MapEntity(reader, entityObject);

            返回实体对象；
        }

        private void MapEntity(IDataRecord reader, object entityObject)
        {
            var objectContext = ((IObjectContextAdapter)Db).ObjectContext;
            var metadataWorkspace = ((EntityConnection)objectContext.Connection).GetMetadataWorkspace();

            var entitySetMappingCollection =
                metadataWorkspace.GetItems(DataSpace.CSSpace).Single().EntitySetMappings;

            var associationSetMappingCollection =
                metadataWorkspace.GetItems(DataSpace.CSSpace)
                    。单身的（）
                    .AssociationSetMappings.ToList();

            var entitySetMappings =
                entitySetMappingCollection.First(
                    o => o.EntityTypeMappings.Select(e => e.EntityType.Name).Contains(entityObject.GetType().Name));

            var entityTypeMapping = entitySetMappings.EntityTypeMappings[0];
            var tableName = entityTypeMapping.EntitySetMapping.EntitySet.Name;
            Debug.WriteLine(tableName);

            var mappingFragment = entityTypeMapping.Fragments[0];

            // 映射实体本身的属性
            foreach（mappingFragment.PropertyMappings 中的 var propertyMapping）
            {
                var valueBeforCasting = reader[((ScalarPropertyMapping)propertyMapping).Column.Name];

                var value = valueBeforCasting 是 DBNull
                    ? 空值
                    : propertyMapping.Property.IsEnumType
                        ? Convert.ChangeType(valueBeforCasting,
                            类型（int））
                        : Convert.ChangeType(valueBeforCasting,
                            propertyMapping.Property.PrimitiveType.ClrEquivalentType);

                entityObject.GetType()
                    .GetProperty(propertyMapping.Property.Name)
                    .SetValue(entityObject, value, null);

                Debug.WriteLine("{0} {1} {2}", propertyMapping.Property.Name,
                    ((ScalarPropertyMapping)propertyMapping).Column, value);
            }

            if (NavigationProperties.Count == 0)
            {
                NavigationProperties = NavigationProperties.AddRange(entityTypeMapping.EntityType.NavigationProperties);
            }

            // 映射相关的导航属性
            foreach (在 NavigationProperties 中的 var navigationProperty)
            {
                var propertyInfo = entityObject.GetType().GetProperty(navigationProperty.Name);

                // 待办事项：Por Marco em 26/11/2015
                /*
                 * Verificar em QueryOptions (que neste momento não é passada para esta rotina) se foi solicitado Eager Loading desta navigationProperty。
                 * Caso negativo executar um "继续；"
                 *
                 * Isso ajudará a evitar Consultas desnecessárias ao banco de dados。
                */

                var propertyType = propertyInfo.PropertyType;

                var 关联集映射 =
                    关联SetMappingCollection.First(
                        a => a.AssociationSet.ElementType.FullName == navigationProperty.RelationshipType.FullName);

                // AssociationSetMapping.AssociationTypeMapping.MappingFragment.PropertyMappings 包含两个元素，一个用于直接关系，一个用于反向关系
                var 属性映射 =
                    AssociationSetMapping.AssociationTypeMapping.MappingFragment.PropertyMappings
                        .Cast().First(p => p.AssociationEnd.Name.EndsWith("_Target"));

                var key = propertyMappings.PropertyMappings.Select(c => reader[c.Column.Name]).ToArray();

                if (!key.Any() || key[0] 为 DBNull)
                    继续;

                ///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////
                // Monta o PredicateBuilder que será utilizado para trazer todas as entidades associadas solicitadas

                var outerPredicate = typeof(PredicateBuilder).InvokeStaticGenericMethod(propertyType, "False");

                if (!Predicates.ContainsKey(propertyType))
                {
                    var predicatesList = new List { outerPredicate };
                    谓词 = Predicates.Add(propertyType, predicatesList);

                    LoadedPredicates = LoadedPredicates.Add(propertyType, new List());
                    PredicatesCount = PredicatesCount.Add(propertyType, 0);
                }

                var loadedPredicates = LoadedPredicates[propertyType];
                if (loadedPredicates.All(p => p != Convert.ToInt32(key[0])))
                {
                    loadPredicates.Add(Convert.ToInt32(key[0]));

                    BuildPredicate(propertyType, outerPredicate, Convert.ToInt32(key[0]));
                }
                ///////////////////////////////////////// ///////////////////////////////////////// ////////////////////////

                // Seta o Id como helper para a rotina LoadAssociatedEntities
                var value = Activator.CreateInstance(propertyType);
                var idProperty = propertyType.GetProperty("Id");
                idProperty.SetValue(value, key[0]);

                propertyInfo.SetValue(entityObject, value, null);
            }
        }

        private void BuildPredicate(Type propertyType, object outerPredicate, int pkValue)
        {
            var 参数 = Expression.Parameter(propertyType, "p");
            var property = Expression.Property(parameter, "Id");
            var valueToCompare = Expression.Constant(pkValue);
            var equalsExpression = Expression.Equal(property, valueToCompare);

            var funcType = typeof(Func).MakeGenericType(propertyType, typeof(bool));
            var lambdaExpression = Expression.Lambda(funcType, equalsExpression, 参数);

            var predicateList = Predicates[propertyType];
            var predicatesCount = PredicatesCount[propertyType];

            if (predicatesCount % MAX_ITEMS_PER_PREDICATE == 0)
            {
                predicateList.Add(outerPredicate);
            }

            var predicate = predicateList.Last();

            predicate = typeof(PredicateBuilder).InvokeStaticGenericMethod(propertyType, "Or", predicate, lambdaExpression);

            predicateList[predicateList.Count - 1] = 谓词；

            谓词计数++；
            PredicatesCount = PredicatesCount.Replace(propertyType, predicatesCount);
        }

        ///
        /// Carrega 通过 EagerLoading 作为 entidades associadas solicitadas
        ///
        /// 实体默认的具体说明
        /// Lista de entidades que irão ter as entidades associadas carregadas
        /// Array de Eager Loadings a serem carregados
        私人无效LoadNavigationProperties（IReadOnlyList实体，
            参数 KeyValuePair[] eagerLoadings) 其中 T : EntityDefault
        {
            foreach（谓词中的 var predicateItem）
            {
                var newEagerLoadings = 新列表>();

                var newOptions =
                    急切加载
                        .Where(p => p.Key == QueryOptions.DefineInclude || p.Key == QueryOptions.DefineIncludes)
                        .ToList();

                var predicateWhere = predicateItem;

                // Loop em todas as propriedades de navegação de T que sejam do mesmo tipo do predicate.Key
                // Esse loop terá alimentado newEagerLoadings com os valores adequados。
                前锋 (
                    var navigationProperty in
                    NavigationProperties.Where(
                        p => 实体[0].GetType().GetProperty(p.Name).PropertyType == predicateWhere.Key))
                {
                    新选项 =
                        newOptions.Where(p => p.Value.ToString().StartsWith(navigationProperty.Name)).ToList();

                    if (!newOptions.Any())
                        继续;

                    // ReSharper 禁用一次 LoopCanBeConvertedToQuery
                    foreach（newOptions 中的 var 选项）
                    {
                        if (!option.Value.ToString().Contains("."))
                        {
                            继续;
                        }

                        var newOption = Pairing.Of(option.Key,
                            option.Value.ToString()
                                .RemovePrefix(navigationProperty.Name + ".")
                                .RemovePrefix(navigationProperty.Name));

                        if (newOption.HasntValue() || newOption.Value.ToString().IsNullOrEmpty())
                        {
                            继续;
                        }

                        newEagerLoadings.Add(newOption);
                    }
                }

                var predicateList = predicateItem.Value;
                var funcType = predicateItem.Value.First().InvokeMethod("Compile", true).GetType();

                var newInstanceOfThis = GetInstanceOfService(funcType.GenericTypeArguments[0], Db);

                foreach（predicateList 中的 var 谓词）
                {
                    // A fim detentar evitar bugs de StackOverflow
                    GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);

                    var expandPredicate = typeof(Extensions).InvokeStaticGenericMethod(funcType, "Expand", predicate);

                    var selectResponse = (IEnumerable)newInstanceOfThis.InvokeGenericMethod(predicateItem.Key,
                        “很多”，expandedPredicate，newEagerLoadings.ToArray());

                    var listOfItems = selectResponse.ToList();

                    // Obtém o retorno

                    // 执行一个查询 e preenche PredicateEntities
                    NavigationEntities = NavigationEntities.AddRange(listOfItems);
                }
            }

            // 循环 nas entidades para atribuir as entidades associadas
            foreach（实体中的 var 实体）
            {
                // Loop nas propriedades de navegação, para listar as entidades associadas
                foreach (在 NavigationProperties 中的 var navigationProperty)
                {
                    // navigationProperty é a entidade associada que será atribuída 实体

                    var propertyInfo = entity.GetType().GetProperty(navigationProperty.Name);
                    var propertyType = propertyInfo.PropertyType;

                    var propertyValue = propertyInfo.GetValue(entity);

                    if (propertyValue == null)
                    {
                        继续;
                    }

                    var idPropertyInfo = propertyType.GetProperty("Id");
                    var keyValue = idPropertyInfo.GetValue(propertyValue);

                    如果（键值 == 空）
                    {
                        继续;
                    }

                    var key = Convert.ToInt32(keyValue);

                    // Pega a lista de entidades associadas que sejam do mesmo tipo da propriedade de navegação
                    var associatedEntitiesOfSameType = NavigationEntities.Where(p => p.GetType() == propertyType)
                        .ToList();

                    if (!associatedEntitiesOfSameType.Any())
                    {
                        // O usuário não solicitou EagerLoading dessa navigationProperty

                        继续;
                    }

                    // Busca a entidade associada pelo Id, alimentado em "InternalMapEntity"
                    var 关联实体实例 =
                        associatedEntitiesOfSameType.FirstOrDefault(
                            p => Convert.ToInt32(idPropertyInfo.GetValue(p)) == key);

                    如果（关联实体实例 == 空）
                        继续; // Não 本地化。Removida do banco de dados？

                    // Atribui a entidade associada a "entity"
                    propertyInfo.SetValue(entity, associatedEntityInstance);
                }
            }
        }
    }

```

# android - IOError: [Errno 2] No such file or directory 在使用钛的 android 应用程序中出现错误

> ID：14733048
> 
> 赞同：0
> 
> 时间：2013-02-06T15:47:58.483
> 
> 标签：android, titanium, titanium-mobile

尝试在 Windows 上使用钛运行基本应用程序，它运行良好，但突然开始在`build.log`文件中出现错误

```
[INFO] logfile = C:\Users\sfarid\workspace\CNS PCC\build.log
[INFO] Building CNS PCC for Android ... one moment
[INFO] Titanium SDK version: 3.0.0 (12/12/12 18:49 a5894b3)
[INFO] Waiting for the Android Emulator to become available
[ERROR] Timed out waiting for android.process.acore
[INFO] Fastdev server running, deploying in Fastdev mode
[INFO] Copying CommonJS modules...
[INFO] Copying project resources..
[INFO] Force including all modules...
[INFO] Force including all modules...
[INFO] Compiling Javascript Resources ...
[INFO] Compiling localization files
[ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "C:\Users\sfarid\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 2376, in <module>
[ERROR]     builder.build_and_run(False, avd_id, debugger_host=debugger_host)
[ERROR]   File "C:\Users\sfarid\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 2125, in build_and_run
[ERROR]     self.manifest_changed = self.generate_android_manifest(compiler)
[ERROR]   File "C:\Users\sfarid\AppData\Roaming\Titanium\mobilesdk\win32\3.0.0.GA\android\builder.py", line 1056, in generate_android_manifest
[ERROR]     shutil.copy(icon_path, dest_icon)
[ERROR]   File "C:\Users\sfarid\AppData\Local\Titanium Studio\plugins\com.appcelerator.titanium.python.win32_1.0.0.1338515509\python\lib\shutil.py", line 116, in copy
[ERROR]     copyfile(src, dst)
[ERROR]   File "C:\Users\sfarid\AppData\Local\Titanium Studio\plugins\com.appcelerator.titanium.python.win32_1.0.0.1338515509\python\lib\shutil.py", line 81, in copyfile
[ERROR]     with open(src, 'rb') as fsrc:
[ERROR] IOError: [Errno 2] No such file or directory: **u'C:**\\Users\\sfarid\\workspace\\CNS PCC\\build\\android\\bin\\assets\\Resources\\appicon.png'
[ERROR] Application Installer abnormal process termination. Process exit value was 1 
```

每次我运行它时它都会重新生成日志文件并添加`u`它成为错误的原因。

这是主要错误

[ERROR] IOError: [Errno 2] No such file or directory: **u'C:** \Users\sfarid\workspace\CNS PCC\build\android\bin\assets\Resources\appicon.png' [ERROR] Application Installer 异常进程终止。进程退出值为 1

我是钛新手，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:23:44.437

尝试更改 tiapp.xml 文件；例如，将版本从 1.0 更改为 1.1。我认为它不会复制必要的文件，并且对 tiapp.xml 的更改会强制它重新创建类文件。

# regex - Bash - 重命名文件

> ID：14733049
> 
> 赞同：1
> 
> 时间：2013-02-06T15:47:58.530
> 
> 标签：regex, bash

我需要 bash 脚本来处理这两个文件：

```
GAMES_12345678_123456_001.xml
GAMES_01234567_012346_CFG.xml 
```

我想重命名第一个：

```
 GAMES_12345678_123456_001.xml 
```

到：

```
games.xml 
```

第二个文件：

```
GAMES_01234567_012346_CFG.xml 
```

我只想删除。

这是中间“GAMES_12345678_123456_001.xml”中的那些数字是随机的，所以我需要在 bash 脚本中创建某种正则表达式（也许？）来匹配这些名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:54:54.687

如果目录下没有其他 GAMES 文件，你可以简单地

```
rm GAMES_*_CFG.xml
mv GAMES_*.xml games.xml 
```

如果涉及的文件较多，请说明如何选择要删除和删除的两个文件。

# jquery - 如何通过鼠标悬停在文章中弹出文本？

> ID：14733053
> 
> 赞同：0
> 
> 时间：2013-02-06T15:48:12.137
> 
> 标签：jquery, html

我想看一篇新闻文章，当有人将鼠标悬停在文本的给定部分（不是蓝色超链接）时-

1.  （无需单击）将弹出一个弹出窗口，其中包含对该给定句子的文章的注释/评论。
2.  流畅的动画，而不是必须单击退出的对话框。

我环顾四周，但找不到一个像样的例子。[这是一个好的](http://jqueryfordesigners.com/demo/coda-bubble.html)。

关于使用什么的任何想法？jQuery？如果是这样，有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:03:35.607

你可以使用这个[jquery 工具提示插件](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

它非常易于使用，并且由于工具提示的内容是纯 HTML，因此非常可定制且灵活。

我不会编写一些示例代码，而是将您指向[演示页面](http://jquery.bassistance.de/tooltip/demo/)

我希望这会有所帮助，如果您想要更具体的内容，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:59:23.240

创建一个具有您想要的一些属性的 css 类。

```
.ZoomIt
{
   position:relative;
   z-index:99;
   height: 200px;
   width: 200px;
} 
```

并在悬停事件上切换类

```
$('yourTextualDiv').hover(function(){
     $(this).toggleClass('ZoomIt');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:02:58.350

如果您想要一个功能齐全的工具提示插件，请查看[Tooltipster](http://calebjacob.com/tooltipster/)。您只需在文档中引用它，就像这样......

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="js/jquery.tooltipster.min.js"></script> 
```

...然后您可以通过各种方式添加工具提示，具体取决于您希望工具提示的复杂程度：

```
<img src="my-image.png" class="tooltip" title="This is my image's tooltip message!" /> 
```

激活它所需要的只是某处的一个小 JS 块：

```
<script>
    $(document).ready(function() {
        $('.tooltip').tooltipster();
    });
</script> 
```

我不隶属于这些家伙，但我听说过他们的好消息。我看不出有什么理由让你自己动手。

# django - django - 使用 modelformset_factory 在视图中填充 created_by 字段 request.user

> ID：14733062
> 
> 赞同：2
> 
> 时间：2013-02-06T15:48:36.053
> 
> 标签：django, django-models, django-forms, django-views

我使用 modelformset_factory 创建一个空表单，但我不知道如何在视图中使用 request.user 填充 created_by 字段。我知道可以使用 models.Manager 来处理 created_by 的默认值，但我更愿意使用当前登录的用户直接在视图中填充它。我不关心管理界面。

这是我的models.py：

```
from django.db import models
from django.forms import ModelForm
from django.contrib.auth.models import User
import datetime

class ezApp(models.Model):
    name = models.SlugField(max_length=50, )
    date_created = models.DateTimeField('date created', editable=False)
    date_updated = models.DateTimeField('date updated', editable=False)
    created_by = models.ForeignKey(User)

def save(self):
    if not self.id:
        self.date_created = datetime.date.today()
    self.date_updated = datetime.datetime.today()
    super(ezApp, self).save()

class ezForm(ModelForm):
    class Meta:
        model = ezApp
        fields = ('name') 
```

这是views.py

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setName(request):
    ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'))
    formset = ezAppFormSet(queryset=ezApp.objects.none())
    if request.method == 'POST':
        formset = ezAppFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
    return render_to_response("project/manage_new.html", {'formset': formset, 'title': "New"}, context_instance=RequestContext(request)) 
```

错误信息：

project_ezapp.created_by_id 可能不为 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:19:13.703

我想你可以试试：

```
class BaseEzAppFormSet(BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user')
        super(BaseEzAppFormSet, self).__init__(*args, **kwargs)

    def save_new(self, form, commit=True):
        obj = form.save(commit=False)
        obj.created_by = self.user
        if commit:
             obj.save()
        return obj
...
ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'), 
    formset=BaseEzAppFormSet)
...
formset = ezAppFormSet(request.POST, request.FILES, user=request.user) 
```

# scripting - 在与请求一起发送之前散列和编码变量

> ID：14733065
> 
> 赞同：3
> 
> 时间：2013-02-06T15:48:41.773
> 
> 标签：scripting, base64, jmeter, sha256

我正在尝试设置 JMeter 以连接到一个服务，该服务需要在我开始之前和请求之间对某些变量进行一些哈希处理。

我创建了一个用户定义的变量，其中包含纯文本的身份验证信息。
在调用第一个 HTTP 请求之前，我需要使用 SHA256 对密码进行哈希处理，使用 base64 对其进行编码，然后转换为大写。

我将收到`auth_token`一个 JSON 格式的响应正文。然后我需要`SHA256 -> base64 -> uppercase`对该 auth_token 执行相同的链，从那时起它将在请求标头中使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:50:37.600

1.  如果您没有实现资源关键场景（负载测试），您可以使用[JSR223 Sampler](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_Sampler) / [JSR223 PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PostProcessor) / [JSR223 PreProcessor](http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PreProcessor)和一些代码。

    例如

    *   将 JSR223 Sampler / PostProcessor / PreProcessor 与以下 [groovy] 代码一起使用：

    ```
    导入 java.security.MessageDigest；
    导入 org.apache.commons.codec.binary.Base64；
    导入 org.testng.annotations.Test；

    字符串 [] 参数 = 参数.split(",");

    字符串文本 = 参数 [0];
    MessageDigest md = MessageDigest.getInstance("SHA-256");

    md.update(text.getBytes("UTF-8"));
    字节[] 摘要 = md.digest();

    byte[] 编码 = Base64.encodeBase64(digest);
    String encText = (new String(encoded)).toUpperCase();

    vars.put("encodedValue",encText);

    ```

    *   您可以重新使用此采样器来对密码和 auth_token 进行哈希处理 - 通过 JSR223 采样器配置中的“参数”字段：`${password}`在第一种情况下使用例如变量，`auth_token`在第二种情况下使用 -。

    *   您可以将哈希值称为`${encodedValue}`变量。

2.  [与__groovy](http://jmeter.apache.org/usermanual/functions.html#__groovy)函数一起使用的类似 groovy 代码。

3.  [jmeter-plugins](http://jmeter-plugins.org/)集包含`${__MD5(...)}`, `${__base64Encode(...)}`,`${__uppercase(...)}` [功能](http://jmeter-plugins.org/wiki/Functions/)，但这对您的情况来说还不够（没有 SHA256 摘要）。

4.  您还可以查看[OS Process Sampler](http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler)以使用您的操作系统（如果是 linux）功能来实现相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T07:29:40.303

有一个新功能`__digest`，目前在[夜间构建中](https://builds.apache.org/job/JMeter-trunk/lastSuccessfulBuild/artifact/trunk/dist/)

![](../Images/88262a42faa121f4dd5cdd20e4af4c79.png) 在您的情况下，将密码变量的结果保存在编码值变量中，请使用以下内容：

```
${__digest(SHA-256,${password},,,encodedValue)} 
```

您可以下载[自定义 JMeter 函数](https://jmeter-plugins.org/wiki/Functions/#Custom-JMeter-Functions)插件来调用 base 64 编码函数：

```
${__base64Encode(encodedValue, base64Value)} 
```

然后调用大写函数：

```
${__uppercase(base64Value, finalValue)} 
```

${finalValue} 将保存此操作的最终值

# bash - 用于复制/重命名文件的批处理脚本

> ID：14733067
> 
> 赞同：1
> 
> 时间：2013-02-06T15:48:43.287
> 
> 标签：bash, debian

嗨我想制作一个批处理脚本来转换：

```
/VAR/file.css 
```

进入

```
/VAR_file.css` 
```

`VAR`是一个身份证。我需要为 to 创建一个`i=0`循环`i<=36000`

有任何想法吗？

我从未操作过批处理脚本..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:57:20.477

您可以使用表达式创建从`0`to的序列并移动文件：`36000``{0..X}`

```
for i in {0..36000}
do
  mv "/$i/file.css" "/${i}_file.css"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:07:47.900

```
for i in `seq 0 36000`
do
    for file in /$i/*.css
    do
        mv /$i/$file /$i_$file
    done
done 
```

# javascript - 如果我的网页中有两个列表框，但我需要一个列表框是多选另一个应该是通用列表框

> ID：14733070
> 
> 赞同：0
> 
> 时间：2013-02-06T15:48:55.377
> 
> 标签：javascript, jquery

我正在使用这个[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)多选插件。默认情况下，这个插件会自动将普通的 html 选择框变为多选框，有什么办法可以在同一页面上使用这个多选插件和通用 html 选择框？

提前致谢。周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:52:02.220

将选项设置`multiple`为 false。或者不打电话`$('select').multiselect`

添加班级

```
<select class="multiple-select"></select> 
```

然后将您的选择器更改为：`$('.multiple-select').multiselect`并将常规选择保留为没有类。

[例子](http://jsfiddle.net/6cvqm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:53:56.960

初始化时，请执行以下操作：

```
$(function(){
    $("#mymulti").multiselect();
});

<select id="mymulti" name="example" multiple="multiple">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
   <option value="5">Option 5</option>
</select> 
```

这：

```
$("#mymulti").multiselect(); 
```

仅适用于 id = mymulti 的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:58:02.447

您可以将它与一些 id $("select#multiple") 一起使用，这样所有选择框都不会使用该插件呈现。

```
$("select#multiple").multiselect({
   header: "Select an option",
   noneSelectedText: "Select an Option",
   selectedList: 1
}); 
```

# css - 过滤不透明度不起作用

> ID：14733072
> 
> 赞同：1
> 
> 时间：2013-02-06T15:49:06.657
> 
> 标签：css, internet-explorer-8, opacity

由于某种原因过滤器：不透明度在 IE8 中不起作用。我有一段时间没有使用它，但它总是有效，我不知道问题是什么。此外，萤火虫根本没有显示过滤规则，只是正常的不透明度。

有任何想法吗？

```
ul.products-grid img:hover {

    opacity: .8;
    filter:alpha(opacity=80);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:56:42.283

标签是

```
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=80); 
```

试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:57:02.850

在 IE8 中，你可能还需要；

`-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";`

您不妨看看[Cross Browser Opacity](http://css-tricks.com/snippets/css/cross-browser-opacity/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:57:36.933

尝试这个：

```
ul.products-grid img:hover {
    opacity: .8; /* Standards Compliant Browsers */
    filter:alpha(opacity=80); /* IE 7 and Earlier */
    /* Next 2 lines IE8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);
} 
```

如果您希望您的页面`validate`，使用如下 if IE 语句将您的标准样式表与您的 IE 样式表分开：

```
<!--[if IE]>
<link rel="stylesheet" type="text/css"  href="stylesheetname.css" />
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:00:38.130

你的 CSS 工作正常。在这里查看演示，[http://jsfiddle.net/e26Pz/2/](http://jsfiddle.net/e26Pz/2/)

也许问题可能出在`DOC`类型上。在我使用的示例中`<!DOCTYPE html>`

你用的是什么`Doc`类型的？

**完整的演示代码**

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>
  <style type='text/css'>
    img:hover {    
       opacity: 0.4;
       filter:alpha(opacity=40);
    }
  </style>

</head>
<body>
     <img src="https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-prn1/69651_408104205949356_2097957740_n.jpg" />      
</body>   
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T15:53:45.353

还要检查您的页面是否在 IE 中以 quirks 模式呈现。我认为 IE8 可能不支持任意元素上的 :hover 伪类，除非它处于标准遵从模式。

类似的情况和解释[在这里](https://stackoverflow.com/questions/6269831/hover-effects-not-working-with-ie8)。

# java - Java下播放*.caf文件（iOS/Apple）

> ID：14733079
> 
> 赞同：1
> 
> 时间：2013-02-06T15:49:29.667
> 
> 标签：java, ios, javasound, caf

我有两个应用程序，第一个是录制声音并将其保存在`*.caf`文件中的 iOS 应用程序。第二个是需要读取这些`*.caf`声音文件并播放它们的 Java 应用程序。

我正在寻找可以读取/播放这些声音文件的*Java 代码*`*.caf`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:18:24.597

不幸的是，我相信简短的回答是没有。至少目前我找不到任何免费代码（我最近对免费 SPI 进行了相对广泛的搜索，并找到了各种类型，例如`APE`- 但没有`caf`。）JavaFX，Java 媒体的另一个潜在候选者，没有目前支持它：

> 音频：MP3；AIFF 包含未压缩的 PCM；WAV 包含未压缩的 PCM；具有高级音频编码 (AAC) 音频的 MPEG-4 多媒体容器

我建议您最好的选择，除了自己实施之外，将是以下两种选择之一：

*   更改您的其他应用程序，使其保存在更广泛接受的文件类型中 - 还有其他可以很好地制作无损音频的其他应用程序，例如 FLAC，它[确实具有 SPI](http://jflac.sourceforge.net/)。或者，使用 WAV 或 AIFF（如果您对有损格式感到满意，也可以使用 mp3。）
*   使用本机库播放您希望支持的每个平台的 caf 文件，并使用 JNI / JNA 在 Java 和本机代码之间切换。

# python-3.x - 修改 matplotlib 中的填充区域

> ID：14733080
> 
> 赞同：0
> 
> 时间：2013-02-06T15:49:31.913
> 
> 标签：python-3.x, matplotlib

我有一个交互式图形，在该图形上逐步绘制，一次一个块。

也就是说，在一个循环中我得到一些采样数据，然后我将它们添加到图中的现有曲线并重新绘制图片。为此，我使用了 get/set_x/ydata 函数。这条线上的东西：

```
# Get initial data
time = [1, 2, 3, 4, 5]
samples = [0.1, 0.2, 0.3, 0.4, 0.5]
c = plot_curve(time, samples)
# Get new data
time2 = [6, 7, 8]
samp2 = [0.6, 0.7, 0.8]
c.set_xdata(append(c.get_xdata(), time2))
c.set_ydata(append(c.get_ydata(), samp2)) 
```

问题是，我还在使用fill_between 填充曲线附近的一些区域（例如曲线和x 轴之间的空间）。目前，我正在以这种方式创建很多小块：

```
# Filling initial chunk
fill_between(time, samples, [0 for i in time])
# Filling next chunk
fill_between(time[-1] + time2, samples[-1] + samp2, [0 for i in time2] + [0]) 
```

（我知道这段代码很臭，但它是为了给出一个想法）。

所以，问题是：有一条曲线，但填充区域为 2（每个数据块一个）。这会在绘图中产生小的伪影，因为每个填充区域都非常靠近下一个区域，它们之间的空间非常小。

有没有办法在填充区域也做这种增量工作？

例如，保留 2 条曲线（一个等于 c.get_ydata() 和一个零）并让 matplotlib 自动填充它们之间的区域可能很好，而不必显式调用命令 - 这样填充的区域将始终与采样点保持同步。

或者，另一种好方法是使用采样点而不是多边形来表示填充区域，以便我可以使用类似于 get/set_x/ydata 的方法更新该区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:39:38.887

一种稍微不那么骇人听闻的方法是

```
pc = fill_between(time, samples) 
```

（请注意，默认值为 y2 = 0，因此您不需要该列表理解）

然后，当你更新你的身材

```
time2 = [6, 7, 8]
samp2 = [0.6, 0.7, 0.8]
time_update = append(c.get_xdata(), time2)
samp_update = append(c.get_ydata(), samp2)
c.set_xdata(time_update)
c.set_ydata(samp_update)
pc.remove()
pc = fill_between(time_update, samp_update) 
```

不要每次都创建一个新的更小的区域，只需清除旧区域并为所有数据完全重新创建它。不知道这将如何影响你的速度，但如果它比你现在做的慢，我会感到惊讶。

# github - Github 搜索是否有 AND 语法？

> ID：14733082
> 
> 赞同：2
> 
> 时间：2013-02-06T15:49:35.987
> 
> 标签：github

Github 的搜索功能是否有 AND 功能，比如：

星星：>0 && 星星：<4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:07:49.510

如果您尝试将`AND`多个条件放在同一个参数上，那么听起来您正在有效地尝试建立某种范围（例如您的示例中的 0 到 4 之间的星数）。据我所知，虽然 GitHub 不允许您组合小于/大于表达式，但有一个明确的范围运算符 the ，[这里](https://github.com/blog/1328-search-syntax-improvements)`..`稍微概述了一点。你可以像这样使用它：

```
stars:1..3 
```

请注意，对于您的具体示例（星号：>0 && 星号：<4），我们需要使用`1..3`，因为范围运算符是包容性的。使用`stars:0..4`会给你 0 星或 4 星的回购，小于/大于组合不会。

# java - java方法可以突然停止吗？

> ID：14733083
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:49:37.950
> 
> 标签：java

```
public void execute(){
        for (int i=0;i<=100000000;i++)
        {
            System.out.println(i);
        }
    } 
```

此方法只需执行两秒钟。这意味着在 for 循环中开始执行此方法后，如果两秒钟后打印 88888，则程序必须自行停止。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:53:17.883

您可以`break;`在循环内的任何时间使用以立即退出循环。这适用于 Java 中的任何循环（例如`for`, `while`, `do...while`）。例子：

```
public void execute() {
    long startTime = System.currentTimeMillis();
    for (int i = 0; i <= 100000000; i++) {
        long currentTime = System.currentTimeMillis();
        if ((currentTime - startTime) >= 2000) {
            break;
        }
        System.out.println(i);
    }
} 
```

一旦时间流逝大于或等于 2 秒（大致），这将导致循环退出。

编辑：正如@LouisWasserman 评论的那样，您可以`System.nanoTime()`更精确地使用并且不受闰秒之类的影响。如果您改用它，只需检查差异是否大于或等于以`2000000000`说明精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:57:16.360

您可以使用`System.currentTimeMillis()`. 像这样的东西：

```
public void execute(){
  long beginMillis = System.currentTimeMillis();
  for (int i=0;i<=100000000;i++)
  {
    if (System.currentTimeMillis() - beginMillis > 2000) {
      break;
    } 
    System.out.println(i);
  }
} 
```

一个侧节点 - 获取当前时间实际上很慢，所以我建议在给定次数的迭代后进行检查。您不会在 2 秒后停止，但减速会更小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:58:06.323

正如@Marc Baumbach 所提到的，`break;`如果您处于循环中，则可以使用。

只是补充一下，如果你想真正退出一个方法而不是仅仅退出循环，你可以使用`return;`关键字

```
public class Tester {
    public static void main(String args[]) {
        for(int i=0; i<10; i++) {
            System.out.println(i);
            if(i==5) return;
        }
    }
} 
```

会打印...

```
0
1
2
3
4
5 
```

# xml - 请检查需要 XSLT

> ID：14733084
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:49:39.667
> 
> 标签：xml, xslt

## 给出的 XML：

```
<?xml version="1.0" encoding="UTF-8"?> 
    <sensor-system>
     <velocity>120.00</velocity>    <!-- km/h --> 

     <temperature location="inside">24.6</temperature> 
     <temperature location="outside">-12.5</temperature> 

     <seats>

       <seat location="front">
               <id>1</id> 
                <temperature>32.5</temperature>
               <heating-is-on/>

       </seat>

       <seat location="back">
               <id>2</id>
                <temperature>23.5</temperature> 
        </seat>

     </seats>
   </sensor-system> 
```

## 必需的 ：

d) XSLT（25 分）编写一个 XSL 转换，接收给定的 XML 作为输入，并输出带有所有座位 ID 号的文本，其中相应座位的温度低于内部温度并且加热被关闭。给定 XML 的输出应如下所示： 关闭加热的冷座椅：2 (23.5) 第一个数字是座椅 ID，第二个是座椅温度。

我的回答请检查：

* * *

```
 <xsl:output method="text"/>

     <xsl:template match="/">
         <xsl:for-each select="/sensor-system/seats/seat/temperature">
             <xsl:if  test="(temperature < /sesnsor-system/temperature[@location="inside"]) | not(/sensor-system/seats/seat/heating-is-on)" >

                <xsl:value-of select="concat('cold seats with heating switched of : ' , '',/sensor-system/seats/seat/id,'(,/sensor-system/seats/seat/temperature,')')/>

           </xsl:if>
   </xsl:for-each>
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:11:22.107

您尝试的主要错误是：

*   遍历温度，然后`temperature`从该上下文中引用
*   使用`<`代替`&lt;`
*   拼错`sensor-system`
*   在双引号内使用双引号
*   使用`|`代替`and`
*   使用绝对路径`heating-is-on`代替`id`相对`temperature`路径
*   `(`在in the之后缺少右撇号`value-of`
*   结尾处缺少收盘报价`value-of`

以下是使用`for-each`and执行此操作的方法`if`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:variable name="insideTemp" 
                  select="/sensor-system/temperature[@location='inside']" />

    <xsl:text>cold seats with heating switched off: </xsl:text>

    <xsl:for-each select="/sensor-system/seats/seat">
      <xsl:if  test="temperature &lt; $insideTemp and not(heating-is-on)" >
        <xsl:value-of select="concat(id, ' (', temperature, ') ')" />
      </xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

在 中带有谓词`for-each`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:variable name="insideTemp"
                  select="/sensor-system/temperature[@location='inside']" />

    <xsl:text>cold seats with heating switched off: </xsl:text>

    <xsl:for-each select="/sensor-system/seats/seat[temperature &lt; $insideTemp and 
                                                       not(heating-is-on)]">
      <xsl:value-of select="concat(id, ' (', temperature, ') ')" />
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

使用模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:variable name="insideTemp" 
                  select="/sensor-system/temperature[@location='inside']" />

    <xsl:text>cold seats with heating switched off: </xsl:text>

    <xsl:apply-templates select="/sensor-system/seats/seat
                         [temperature &lt; $insideTemp and not(heating-is-on)]" />
  </xsl:template>

  <xsl:template match="seat">
    <xsl:value-of select="concat(id, ' (', temperature, ') ')" />
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:08:45.690

```
<?xml version='1.0'?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="text"/>

 <xsl:template match="/">

  <xsl:for-each select="/sensor-system/seats/seat">

   <xsl:if test="temperature &lt; /sensor-system/temperature[@location='inside'] or not(heating-is-on) " >
    <xsl:text>cold seats with heating switched of : </xsl:text>
    <xsl:value-of select="id"/> <xsl:text> </xsl:text>
    <xsl:value-of select="temperature"/>
    <xsl:text> 
</xsl:text>
   </xsl:if>
   </xsl:for-each>
 </xsl:template>

</xsl:stylesheet> 
```

# java - 有人可以帮我修复此代码吗？（Java 方法）

> ID：14733087
> 
> 赞同：-3
> 
> 时间：2013-02-06T15:49:42.880
> 
> 标签：java, methods, static

这个代码是一个类，它在屏幕上垂直显示我的名字，每个字母使用我输入的最多 5 行 5 列的字符，每个字母之间有一个空行。

它工作得很好，但问题是我对字符串使用了静态，我的教授说代码中的任何地方都不应该是静态的，而是主要的。当我从字符串 c 中删除静态时，即使声明字符串 c，它也会破坏代码内部主要

```
public class Lab3
{

    static String c;

    public static void main(String[] args)
    {

        Lab3 classy = new Lab3();
        Scanner input = new Scanner(System.in);

        System.out.print("Which character would you like to display?");

        c = input.next();

        System.out.println("My name is Jonathan");
        classy.displayLetterJ();
        classy.displayLetterO();
        classy.displayLetterN();
        classy.displayLetterA();
        classy.displayLetterT();
        classy.displayLetterH();
        classy.displayLetterA();
        classy.displayLetterN();

    }//end of main

    public void displayLetterJ()
    {
        System.out.println("  " + c + c + c);
        System.out.println("    " + c);
        System.out.println("    " + c);
        System.out.println(c + "   " + c);
        System.out.println(c + c + c + c + c);

    }

    public void displayLetterA()
    {
        System.out.println();
        System.out.println("   " + c);
        System.out.println("  " + c + " " + c);
        System.out.println(" " + c + " " + c + " " + c);
        System.out.println(c + "     " + c);
        System.out.println(c + "     " + c);

    }

    public void displayLetterO()
    {
        System.out.println();
        System.out.println("  " + c + c);
        System.out.println(" " + c + "  " + c);
        System.out.println(c + "    " + c);
        System.out.println(c + "   " + c);
        System.out.println("  " + c + c);

    }

    public void displayLetterN()
    {
        System.out.println();
        System.out.println(c + "    " + c);
        System.out.println(c + " " + c + "  " + c);
        System.out.println(c + "  " + c + " " + c);
        System.out.println(c + "   " + c + c);
        System.out.println(c + "    " + c);

    }

    public void displayLetterH()
    {//H accessor
        System.out.println();
        System.out.println(c + "   " + c);
        System.out.println(c + "   " + c);
        System.out.println(c + c + c + c + c);
        System.out.println(c + "   " + c);
        System.out.println(c + "   " + c);

    }

    public void displayLetterT()
    {
        System.out.println();
        System.out.println(c + c + c + c + c);
        System.out.println("  " + c);
        System.out.println("  " + c);
        System.out.println("  " + c);
        System.out.println("  " + c);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:58:04.030

我认为您应该使用私有实例字段`c`，例如公共 getter 和 setter：

```
public class Lab3 {

   private String c;

   public void setC(String c) 
   {
        this.c = c;
   }

   public String getC() 
   {
        return this.c;
   }

....

} 
```

然后你可以在你的主要方法中说：

```
Lab3 classy  = new Lab3();
Scanner input=new Scanner(System.in);

System.out.print("Which character would you like to display?");

classy.setC(input.next()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:58:29.477

我不知道这样做的目的是什么......但这应该在没有静态的情况下工作

```
import java.util.Scanner;

/**
 *
 * @author john
 */
 public class Lab3 {

 public static void main(String[] args) {
     String c;
     Lab3 classy  = new Lab3();
     Scanner input=new Scanner(System.in);

          System.out.print("Which character would you like to display?");

          c = input.next();

        System.out.println("My name is Jonathan");
        classy.displayLetterJ(c);
        classy.displayLetterO(c);
        classy.displayLetterN(c);
        classy.displayLetterA(c);
        classy.displayLetterT(c);
        classy.displayLetterH(c);
        classy.displayLetterA(c);
        classy.displayLetterN(c);

      }//end of main
public void displayLetterJ(String c) {
    System.out.println("  "+c+c+c);
    System.out.println("    " +c);
    System.out.println("    " +c);
    System.out.println(c + "   " + c);
    System.out.println(c+ c+ c + c +c);

 }
 public void displayLetterA(String c){
    System.out.println();
    System.out.println("   "+c);
    System.out.println("  "+c+" "+c);
    System.out.println(" "+c+" "+c+" "+c);
    System.out.println(c+"     "+c);
    System.out.println(c+"     "+c);

}
  public void displayLetterO(String c){
    System.out.println();
    System.out.println("  "+c+c);
    System.out.println(" "+c+"  "+c);
    System.out.println(c+"    "+c);
    System.out.println(c+"   "+c);
    System.out.println("  "+c+c);

}
  public void displayLetterN(String c){
    System.out.println();
    System.out.println(c+"    "+c);
    System.out.println(c+" "+c+"  "+c);
    System.out.println(c+"  "+c+" "+c);
    System.out.println(c+"   "+c+c);
    System.out.println(c+"    "+c);

}
 public void displayLetterH(String c){//H accessor
    System.out.println();
    System.out.println(c+"   "+c);
    System.out.println(c+"   "+c);
    System.out.println(c+c+c+c+c);
    System.out.println(c+"   "+c);
    System.out.println(c+"   "+c);

}
  public void displayLetterT(String c){
    System.out.println();
    System.out.println(c+c+c+c+c);
    System.out.println("  "+c);
    System.out.println("  "+c);
    System.out.println("  "+c);
    System.out.println("  "+c);

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:59:18.227

改变

```
public class Lab3 {
   static String c; 
```

至

```
public class Lab3 {
     private String c;   
     public void setC(String c){this.c=c;} 
```

就像是：

```
public static void main(String[] args) {

     Lab3 classy  = new Lab3();
     Scanner input=new Scanner(System.in);
     c = input.next();
     classy.setC(c);

     .....
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:53:12.630

主要问题是，如果一个变量不是，`static`那么它会附加到一个类的实例上，因此你不能从`static`上下文中引用它。这是因为非静态变量表示特定实例的一种状态。

你`main()`是静态的，所以`c = ..`是非法的。尝试使用，`classy.c = ..`以便您将参考您在静态方法中创建`String`的实例的具体情况。`Lab3`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T15:53:43.713

有几种方法可以解决这个问题，一种可能是：在 main 方法中定义 c 字符串，然后将 c 字符串作为参数传递给所有方法。

其他方法可以将 c String 定义为类属性（非静态），然后在您的方法中使用“this.c”来引用 c String。

1-如果您将属性声明为静态，则意味着该属性将与该类的所有实例共用。非静态属性只是当前类实例的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T15:55:53.457

仅在方法 main 内初始化字符串

字符串 c = input.next();

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T15:56:25.350

您应该重构您的方法以这种方式使用字符 c

```
public void displayLetterJ(String c)
{
   System.out.println("  "+c+c+c);
   System.out.println("    " +c);
   System.out.println("    " +c);
   System.out.println(c + "   " + c);
   System.out.println(c+ c+ c + c +c);
} 
```

并从 main 调用

```
classy.displayLetterJ("*"); 
```

# entity-framework - 如何在不接触数据库的情况下创建这两个实体之间的关联？

> ID：14733088
> 
> 赞同：4
> 
> 时间：2013-02-06T15:49:48.603
> 
> 标签：entity-framework, entity-framework-4, associations, edmx

我需要`association`在这两个实体（1-*）之间创建一个“虚拟”，以便我可以使用 遍历它们`linq`，但问题是我无法触及数据库。我尝试手动编辑`edmx`多次但没有成功，出现各种映射错误。

![在此处输入图像描述](../Images/59d159d95a84a7747648d93a24cb4c0f.png)

**EDMX：**

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
    <!-- EF Runtime content -->
    <edmx:Runtime>
        <!-- SSDL content -->
        <edmx:StorageModels>
        <Schema Namespace="DataAccess.SD.Store" Alias="Self" Provider="Devart.Data.Oracle" ProviderManifestToken="ORA" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
                <EntityContainer Name="SDModelsStoreContainer">
                    <EntitySet Name="CUSTOMER" EntityType="DataAccess.SD.Store.CUSTOMER" store:Type="Tables" Schema="PINNACLE" />
                    <EntitySet Name="EQUIPMENT" EntityType="DataAccess.SD.Store.EQUIPMENT" store:Type="Tables" Schema="PINNACLE" />
                </EntityContainer>
                <EntityType Name="CUSTOMER">
                    <Key>
                        <PropertyRef Name="CUSTOMEROID" />
                    </Key>
                    <Property Name="CUSTOMEROID" Type="int64" Nullable="false" />
                    <Property Name="CUSTOMER_NAME" Type="VARCHAR2" MaxLength="40" />
                    <Property Name="CUSTOMER_ACCOUNT" Type="VARCHAR2" MaxLength="20" />
                </EntityType>
                <EntityType Name="EQUIPMENT">
                    <Key>
                        <PropertyRef Name="EQUIPMENTOID" />
                    </Key>
                    <Property Name="EQUIPMENTOID" Type="int64" Nullable="false" />
                    <Property Name="OWNER_ID" Type="VARCHAR2" Nullable="false" MaxLength="30" />
                    <Property Name="EQUIPMENT_ID" Type="VARCHAR2" MaxLength="100" />
                </EntityType>
            </Schema></edmx:StorageModels>
        <!-- CSDL content -->
        <edmx:ConceptualModels>
            <Schema Namespace="DataAccess.SD" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
                <EntityContainer Name="SDContext" annotation:LazyLoadingEnabled="true">
                    <EntitySet Name="Customers" EntityType="DataAccess.SD.Customer" />
                    <EntitySet Name="Trailers" EntityType="DataAccess.SD.Trailer" />
                </EntityContainer>
                <EntityType Name="Customer">
                    <Key>
                        <PropertyRef Name="Id" />
                    </Key>
                    <Property Name="Id" Type="Int64" Nullable="false" />
                    <Property Name="Name" Type="String" MaxLength="40" Unicode="false" FixedLength="false" />
                    <Property Name="AccNo" Type="String" MaxLength="20" Unicode="false" FixedLength="false" />
                    </EntityType>
                <EntityType Name="Trailer">
                    <Key>
                        <PropertyRef Name="Id" />
                    </Key>
                    <Property Type="Int64" Name="Id" Nullable="false" />
                    <Property Type="String" Name="Number" MaxLength="100" FixedLength="false" Unicode="false" />
                    <Property Type="String" Name="Customer_Id" Nullable="false" MaxLength="30" FixedLength="false" Unicode="false" />
                    </EntityType>
            </Schema>
        </edmx:ConceptualModels>
        <!-- C-S mapping content -->
        <edmx:Mappings>
            <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
                <EntityContainerMapping StorageEntityContainer="SDModelsStoreContainer" CdmEntityContainer="SDContext">
                    <EntitySetMapping Name="Customers">
                        <EntityTypeMapping TypeName="DataAccess.SD.Customer">
                            <MappingFragment StoreEntitySet="CUSTOMER">
                                <ScalarProperty Name="Id" ColumnName="CUSTOMEROID" />
                                <ScalarProperty Name="Name" ColumnName="CUSTOMER_NAME" />
                                <ScalarProperty Name="AccNo" ColumnName="CUSTOMER_ACCOUNT" />
                                </MappingFragment>
                        </EntityTypeMapping>
                    </EntitySetMapping>
                    <EntitySetMapping Name="Trailers">
                        <EntityTypeMapping TypeName="DataAccess.SD.Trailer">
                            <MappingFragment StoreEntitySet="EQUIPMENT">
                                <ScalarProperty Name="Number" ColumnName="EQUIPMENT_ID" />
                                <ScalarProperty Name="Customer_Id" ColumnName="OWNER_ID" />
                                <ScalarProperty Name="Id" ColumnName="EQUIPMENTOID" />
                            </MappingFragment>
                        </EntityTypeMapping>
                    </EntitySetMapping>
                </EntityContainerMapping>
            </Mapping>
        </edmx:Mappings>
    </edmx:Runtime>
    <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
    <Designer xmlns="http://schemas.microsoft.com/ado/2008/10/edmx">
        <Connection>
            <DesignerInfoPropertySet>
                <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
            </DesignerInfoPropertySet>
        </Connection>
        <Options>
            <DesignerInfoPropertySet>
                <DesignerProperty Name="ValidateOnBuild" Value="true" />
                <DesignerProperty Name="EnablePluralization" Value="True" />
                <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
            </DesignerInfoPropertySet>
        </Options>
        <!-- Diagram content (shape and connector positions) -->
        <Diagrams>
            <Diagram Name="SD" ZoomLevel="100">
                <EntityTypeShape EntityType="DataAccess.SD.Customer" Width="1.75" PointX="0.75" PointY="0.75" Height="1.59568359375" IsExpanded="true" />
                <EntityTypeShape EntityType="DataAccess.SD.Trailer" Width="1.75" PointX="3.125" PointY="0.75" Height="1.59568359375" />
                <AssociationConnector Association="DataAccess.SD.CustomerTrailer">
                    <ConnectorPoint PointX="2.5" PointY="1.7064925130208335" />
                    <ConnectorPoint PointX="4" PointY="1.7064925130208335" />
                </AssociationConnector>
                <AssociationConnector Association="DataAccess.SD.CustomerTrailer">
                    <ConnectorPoint PointX="2.5" PointY="1.6439925130208335" />
                    <ConnectorPoint PointX="3.125" PointY="1.6439925130208335" />
                </AssociationConnector>
            </Diagram>
        </Diagrams>
    </Designer>
</edmx:Edmx> 
```

我具体需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T16:07:32.997

在 edmx 设计器中，您只需要右键单击并选择 Add New >> Association。确保取消选中“添加外键属性...”选项，然后选择所需的实体和导航属性名称。

然后选择关联并在属性窗格中单击“引用约束”选项 - 在这里您可以设置关联中涉及的字段。您还需要在属性窗格中设置正确的多重性。

# wpf - 将代码加载到 WPF MVVM 中视图的代码隐藏文件中的图像控件中是否可以接受？

> ID：14733090
> 
> 赞同：0
> 
> 时间：2013-02-06T15:50:08.497
> 
> 标签：wpf, mvvm, standards

对于 WPF MVVM 中视图的代码隐藏文件，我不清楚应该遵循哪些约定。

在我的特定场景中，我想知道将代码放在后面的代码中是否被认为是一种好习惯，链接到我视图上按钮的单击事件，以从硬盘驱动器中定位图像并将其加载到图像控件中在视图上。代码看起来像这样：

```
var ofd = new OpenFileDialog { Filter = "Bitmap Files(*.bmp)|*.bmp" };

ofd.ShowDialog();

if (ofd.FileName != null)
{
    var image = BitmapFactory.ConvertToPbgra32Format(new WriteableBitmap(new BitmapImage(new Uri(ofd.FileName, UriKind.Absolute))));

    MyImageControl.Width = image.Width;
    MyImageControl.Height = image.Height;

    MyImageControl.Source = image;
} 
```

对于视图的代码隐藏来说，这是否太多逻辑？如果是这样，我应该将它放在 ViewModel 中还是放在不同的类中并从 View 中调用该方法？

此外，在更广泛的范围内，如果有人可以提供一些明确的指导方针的链接，关于什么通常被认为可以放入视图的代码隐藏中，什么是不可接受的，那将是很棒的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:54:27.460

首先，重要的是要记住，MVVM 就像您所说的那样，是一组*指导方针*而不是规则。有时它可能会有点粗略应该在哪里......

也就是说，在您的示例中，您有很多**不是**特定于 UI 的逻辑的*逻辑*。

 **从硬盘加载图片绝对应该在 ViewModel 中完成。然后应该在 ViewModel 中的属性上设置图像。然后，视图中的图像控件应*绑定*到`ImageSource`所述属性。

关于对话框（例如 OpenFileDialog） - 有 3 种有效的（恕我直言）方法可以做到这一点。

**首先**是创建一个由 ViewModel 调用的“FileChoosingService”，然后它会引发 OpenFileDialog 并返回文件名。

**第二个**选项是从视图中打开对话框，并将结果设置到视图模型中的属性中。视图模型将看到属性已更改，然后从硬盘加载图像。

**第三个**选项就像第二个一样，只是不设置属性，而是让视图`LoadImageCommand`在 ViewModel 中调用 a 并作为`CommandParameter`文件名传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:57:48.320

*一般的最佳做法是尽可能*避免任何代码后面。听起来在这种情况下您可以避免它，而且这不仅仅是视图的问题。换句话说，它是一些可以应用于同一视图模型上的不同视图的逻辑。

此外，由于代码在后面的代码中，因此更难测试。您可能想测试用户是否选择了无效的图像文件，是否记录了错误等。当逻辑位于视图模型中时，这会更容易。

无论如何，这似乎也没有技术原因不会放在视图模型中。

要回答您的其他问题，您应该在视图模型中有一个公共属性，即当前图像，并且您应该在视图中使用数据绑定将该图像属性绑定到`Image`控件的源。

您还应该认真考虑使用 MVVM 框架。他们将提供一个已经实现的基本视图模型类型`INotifyPropertyChanged`。**

# ios6 - 在没有 Internet 访问权限的情况下，从 iPhone 访问在 iPad 上运行的服务的常用方法是什么？

> ID：14733095
> 
> 赞同：0
> 
> 时间：2013-02-06T15:50:16.390
> 
> 标签：ios6

是否有参考应用程序，或有关如何将一台 iOS 设备设置为“服务器或后端服务”（如收银服务）并使用其他 iOS 设备访问此服务/服务器（如 iPhone）作为“电子订单”的一些最佳实践笔记本”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:13:14.513

我发现了三个选项： - 编写一个在一台设备上运行的自己的网络服务器（[iOS 设备作为网络服务器](https://stackoverflow.com/questions/6804650/ios-devices-as-web-server)） - 使用 Bonjour 允许您的服务器应用程序在网络中提供服务（[https://developer.apple.com/library /mac/documentation/Cocoa/Conceptual/NetServices/Articles/about.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/NetServices/Articles/about.html) ) - 使用允许对非游戏应用程序使用“多人游戏”功能的 GameKit ( [https://developer.apple.com/library/mac/文档/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304)）

# python - 蟒蛇vtk作家

> ID：14733097
> 
> 赞同：0
> 
> 时间：2013-02-06T15:50:26.327
> 
> 标签：python, vtk

我需要用 python 编写一个 xml vtk 文件。特别是在结构化网格中。我有 x、y、z 轴的坐标以及空间中每个点的 x、y、z 分量的值。我怎样才能写这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:16:30.417

（编辑）你可以通过这个函数来做到这一点（在python中）

```
def writeVtkStructuredGrid(StructuredGrid, file_name):
    """
    StructuredGrid  : StructuredGrid input object
    file_name   : output xml path file (example: 'out.vtp')
    """

    sg = vtkXMLStructuredGridWriter()
    sg.SetFileName(file_name)
    sg.SetInput(StructuredGrid)
    sg.Write() 
```

关于 vtkXMLPolyDataWriter 对象的文档位于： [vtkXMLPolyDataWriter 类参考](http://www.vtk.org/doc/nightly/html/classvtkXMLStructuredGridWriter.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-05T05:15:53.123

请检查此 Stackoverflow 链接，调整注释代码，您可以完成工作。[StackOverflow 链接](https://stackoverflow.com/questions/15749100/exporting-a-3d-numpy-to-a-vtk-file-for-viewing-in-paraview-mayavi/30658723#30658723)。[来自tvtk的](http://docs.enthought.com/mayavi/mayavi/auto/example_simple_structured_grid.html)具体例子

示例代码是

```
from numpy import mgrid, empty, sin, pi
from tvtk.api import tvtk, write_data

# Generate some points.
x, y, z = mgrid[1:6:11j, 0:4:13j, 0:3:6j]
base = x[..., 0] + y[..., 0]
# Some interesting z values.
for i in range(z.shape[2]):
        z[..., i] = base * 0.25 * i

# The actual points.
pts = empty(z.shape + (3,), dtype=float)
pts[..., 0] = x
pts[..., 1] = y
pts[..., 2] = z

# Simple scalars.
scalars = x * x + y * y + z * z
# Some vectors
vectors = empty(z.shape + (3,), dtype=float)
vectors[..., 0] = (4 - y * 2)
vectors[..., 1] = (x * 3 - 12)
vectors[..., 2] = sin(z * pi)

# We reorder the points, scalars and vectors so this is as per VTK's
# requirement of x first, y next and z last.
pts = pts.transpose(2, 1, 0, 3).copy()
pts.shape = pts.size / 3, 3
scalars = scalars.T.copy()
vectors = vectors.transpose(2, 1, 0, 3).copy()
vectors.shape = vectors.size / 3, 3

# Create the dataset.
sg = tvtk.StructuredGrid(dimensions=x.shape, points=pts)
sg.point_data.scalars = scalars.ravel()
sg.point_data.scalars.name = 'temperature'
sg.point_data.vectors = vectors
sg.point_data.vectors.name = 'velocity'
write_data(sg, 'test') # creates test.vtu xml file
#write_data(sg, 'test.vtk') # creates test.vtk 
```

# ruby - 我将如何将这个时间字符串转换为 ruby 中的纪元时间？

> ID：14733108
> 
> 赞同：4
> 
> 时间：2013-02-06T15:50:51.957
> 
> 标签：ruby, time

我将如何将 2012-12-13T14:43:35.371Z 转换为纪元时间？

我正在考虑的一种方法是剥离 T 和 Z，然后尝试使用 DateTime 库找到一种转换为纪元的方法。在我走这条路之前，我很好奇是否有一个宝石可以让我快速做到这一点。在相关说明中，我将在转换为纪元后进行时间计算。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T15:57:48.273

例如：

```
require 'date'

# as an integer:
DateTime.parse('2012-12-13T14:43:35.371Z').to_time.to_i
# or as a string:
DateTime.parse('2012-12-13T14:43:35.371Z').strftime('%s') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T15:57:07.917

```
require "time"
Time.iso8601("2012-12-13T14:43:35.371Z").to_i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:00:41.830

```
require "date"
DateTime.parse("2012-12-13T14:43:35.371Z").strftime("%s") 
```

如果您需要对解析进行更多控制，请使用`strptime`，它允许您定义一个解释格式的字符串。

# c# - 正则表达式 C#

> ID：14733111
> 
> 赞同：-6
> 
> 时间：2013-02-06T15:51:02.003
> 
> 标签：c#, regex

谁能告诉我如何为这个字符串编写常规的 exp。

TRY MOVIE YES [蝙蝠侠获胜]

（我尝试使用反斜杠 [ 但不起作用）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:54:59.493

似乎您错误地转义括号：

尝试这个：

```
string regexTemplate = @"TRY MOVIE YES \[Bat2man WIN\]"; 
```

或者

```
string regexTemplate = "TRY MOVIE YES \\[Bat2man WIN\\]"; 
```

# html - 'font-family: Symbol' 和 Windows-1252

> ID：14733113
> 
> 赞同：3
> 
> 时间：2013-02-06T15:51:04.283
> 
> 标签：html, css, encoding, character-encoding, fonts

我有一堆 HTML 文档，其中包含一些简单的`Windows-1252`编码文本，但在整个文本中，有许多`span`带有`font-family: Symbol`.

例如：

```
<span style='font-family:Symbol'>Ñ</span> 
```

在浏览器中显示为希腊语 delta - Δ。

谷歌告诉我，使用该`Symbol`字体可能会在不同的系统上显示不同的结果，因为它实际上并不是一个定义明确的字体。
**这是真的吗？使用`Symbol`字体是否“不安全”？**

如果是这样，有没有办法可靠地将`Symbol`字体中的此类符号（在我自己的系统上）转换为`Windows-1252`对应的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:09:03.703

依靠在访问您网站的所有计算机/智能手机/小工具上安装某些字体总是不安全的。有一些字体嵌入技术在一些现代浏览器中运行良好，但您需要重新打包 Symbol 字体，我怀疑版权所有者是否允许您这样做。

当然，Symbol 字体中的大多数字符都不是 Windows-1252 编码，但这应该不是问题。您可以使用[以下映射](http://www.stat.auckland.ac.nz/~paul/R/CM/AdobeSym.html)来获取适当的 HTML 实体。但是，您必须使用编程语言（HTML 只是一种标记语言）编写脚本或程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:05:39.310

问题是您看到的希腊字母只是外观，实际字母完全不同。

我可以想到两种转换方法：
1\. 编写一个脚本（用您选择的语言），将每个字母转换为对应的希腊字母。(Ñ => Δ)
2\. 截取文档/页面的屏幕截图并使用 OCR 程序将其转换为希腊文文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:07:32.423

使用 时`font-family`，如果在客户端上找不到列出的字体，即没有嵌入 webfont，可能会导致更改为客户端的默认字体，从而为您向用户显示的字体替换不同的字体。

您可能希望使用 UTF-8 编码并将 delta (Δ) 符号放在您的 HTML 内容中，或者使用 webfont embeds 提供一个选项，“使用我想要的字体”。

# javascript - 使用 require.js 加载模块

> ID：14733116
> 
> 赞同：0
> 
> 时间：2013-02-06T15:51:28.307
> 
> 标签：javascript

```
define("file2",['file1'],function(){console.log('World')}) 
```

文件2.js

```
var oli={name:boo.joni}; 
```

文件1.js

```
var boo={joni:100}; 
```

我想在需要加载“file1”之前包含文件“file2”。一旦所有脚本都必须调用回调。这没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:29:10.873

看起来您需要具有依赖项的 javascript 加载程序，例如：

[http://www.dustindiaz.com/scriptjs](http://www.dustindiaz.com/scriptjs)

这里也有一些答案： [JavaScript 依赖管理](https://stackoverflow.com/questions/3202606/javascript-dependency-management) [How do I include a JavaScript file in another JavaScript file?](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file) [具有任意顺序的 Javascript 依赖解决方案包括](https://stackoverflow.com/questions/1315755/javascript-dependency-solution-with-arbitrary-ordered-includes)

# python - 使用归并排序计算倒数

> ID：14733119
> 
> 赞同：2
> 
> 时间：2013-02-06T15:51:32.380
> 
> 标签：python, algorithm, sorting, mergesort

我在 Python 中制作了一个合并排序程序，它运行良好，但我修改了它以计算所涉及的反转次数，现在它给了我一个错误：

这是我的代码：

```
def merge_list(left,right,c):
    result=[]
    i,j=0,0
    while i < len(left) and j < len(right):
        if left[i] < right[j]:
            result.append(left[i])
            print "Left result",result
            i=i+1
        elif left[i] > right[j]:
            result.append(right[j])
            print "Right result",result
            j=j+1
        if right[j] < left[i]  and i<j:
            c=c+1
    result=result+left[i:]
    result=result+right[j:]
    print "Inversions: ",c
    return result,c

def sort_and_count(lis,count):

    if len(lis)<2:
        return lis
    middle=len(lis) / 2
    left,c1=sort_and_count(lis[:middle],count)
    print "left",left
    right,c2=sort_and_count(lis[middle:],count)
    print "right",right
    m,c=merge_list(left,right,count)
    c=c+c1+c2
    return m,c

if __name__=="__main__":

    print "Enter 6 elements: "
    i=0;lis=[];merge_lis=[];inv=0
    while i<=5:
        x=int(raw_input())
        lis.append(x)
        i=i+1
    count=0
    merge_lis,inv=sort_and_count(lis,count)
    print "Sorted list is: ",merge_lis,inv 
```

我的回溯：

```
Traceback (most recent call last):
  File "Sort_and_count.py", line 53, in <module> 
    merge_lis,inv=sort_and_count(lis,count) 
  File "Sort_and_count.py", line 31, in sort_and_count 
    left,c1=sort_and_count(lis[:middle],count) 
  File "Sort_and_count.py", line 31, in sort_and_count
    left,c1=sort_and_count(lis[:middle],count)
ValueError: need more than 1 value to unpack 
```

这种方法哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T02:28:44.523

实际上，您实施了错误的算法来计算反转次数。

1) 在函数`merge_list`中而不是：

```
elif left[i] > right[j]:
    result.append(right[j])
    print "Right result",result
    j=j+1
if right[j] < left[i]  and i<j:
    c=c+1 
```

你应该使用这个代码：

```
elif right[j] < left[i]:
    result.append(right[j])
    j += 1
    inv_count += (len(left)-i) 
```

2）函数`merge_list`不需要变量`c`作为输入。

3）函数`sort_and_count`不需要变量`count`作为输入。

试试这个代码：

```
def merge_list(left,right):
    result = list()
    i,j = 0,0
    inv_count = 0
    while i < len(left) and j < len(right):
        if left[i] <= right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
            inv_count += (len(left)-i)
    result += left[i:]
    result += right[j:]
    return result,inv_count

def sort_and_count(array):
    if len(array) <= 1:
        return array, 0
    middle = len(array) // 2
    left,inv_left = sort_and_count(array[:middle])
    right,inv_right = sort_and_count(array[middle:])
    merged, count = merge_list(left,right)
    count += (inv_left + inv_right)
    return merged, count

if __name__=="__main__":
    array = [2,3,1,4,5]
    merge_array,inversions = sort_and_count(array)
    print 'Start with array: %s;\nSorted array:     %s;\nInversions: %s.'%(array,merge_array,inversions) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:58:14.033

错误消息告诉您`sort_and_count`只返回一个值。函数中只有两个返回，所以罪魁祸首就是这个：

```
if len(lis)<2:
    return lis 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:58:24.827

这一行：

```
return lis 
```

这是一个问题，因为您希望`sort_and_count`返回一个包含两个值的元组，所以当它只返回一个值时，您会遇到像`left,c1=sort_and_count(lis[:middle],count)`. 此行应返回两个值，如该方法的最后一行：

```
return m,c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T15:59:44.373

代替

```
return lis 
```

做

```
return lis, count 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T16:00:07.277

好吧，你在他期望两个的地方返回一个值。

看着

```
def sort_and_count(lis,count):
    if len(lis) < 2:
        return lis
    middle = len(lis) / 2
   left, c1 = sort_and_count(lis[:middle],count)
   # etc 
```

如果您调用 sort_and_count([1], count)，则 len(lis) 将 < 2 并且它将返回单元素列表，但不会返回计数，这在下面的调用中是预期的。

只需为 c1 返回一个值，例如

```
return lis, count # do your things with count 
```

# android - 在 onDraw 方法中设置图像位置的最佳方法是什么？

> ID：14733120
> 
> 赞同：0
> 
> 时间：2013-02-06T15:51:36.060
> 
> 标签：android, image, position, screen-resolution, ondraw

我有一个扩展 View 的类，以便我可以使用 onDraw 方法在画布上绘制，但这里的主要问题是在使用不同的屏幕分辨率进行测试时，图像不会位于同一个位置。我需要使用什么才能在完全相同的位置查看图像？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:15:13.547

将像素转换为密度像素

```
int xPixels = 100;
int yPixels = 100;

displayMetrics = getResources().getDisplayMetrics();

int px = (int) ((xPixels/displayMetrics.density)+0.5);
int py = (int) ((yPixels/displayMetrics.density)+0.5); 
```

使用 px 和 py 到图像的位置

# c# - 在 C# .NET 应用程序仍在运行时打开 Word 文档

> ID：14733124
> 
> 赞同：0
> 
> 时间：2013-02-06T15:51:42.333
> 
> 标签：c#, .net

在参考了 StackOverflow 上的各种问题和一些博客以创建用于通过 C# 插入图像的 word 文档后，我编写了以下代码。在我的独立 PC 中，我能够运行它并打开最终创建的文档，即使应用程序仍在运行（这是我需要的）但是当我在 Windows 服务器机器上运行相同的应用程序时，生成的 word 文档作为输出，我无法打开它。抛出的错误被其他进程使用，并说我必须保存对模板所做的更改（我猜是一些 .dot 文件）。

我观察到开发环境的一些变化。我在针对 3.5 框架的 Visual Studio 2010 中运行，而服务器 2003 PC 包含 Visual Studio 2008。

命名空间 Microsoft.Office.Interop.Word；位于我 PC 的 COM 选项卡中，而它位于目标计算机的 .NET 选项卡中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using Word = Microsoft.Office.Interop.Word;
using System.Windows.Forms;
using System.IO;
namespace Snapper
{
    class WordDocumentGenerator
    {
        public void CreateWordDocument(string fileName)
        {
            string originalPath = Directory.GetCurrentDirectory();
            string path = originalPath;
            path += @"\snapshots";

            Word.Application wordApp = new Word.Application();
            wordApp.Documents.Add();
            wordApp.Visible = false;
            Word.Document doc = wordApp.ActiveDocument;            
            object oMissing = System.Reflection.Missing.Value;

            string[] images = Directory.GetFiles(path);
            foreach (var image in images)
            {
                doc.InlineShapes.AddPicture(image);
                //Goto End of document
                wordApp.Selection.EndKey(Unit: Word.WdUnits.wdStory);
            }

            //doc.InlineShapes.AddPicture(path + @"\snap2.jpg");

            path = originalPath;
            path += @"\documents";

            DirectoryInfo docDir = new DirectoryInfo(path);
            if (!docDir.Exists)
            {
                docDir.Create();
            }   

            string savePath = path + @"\" + fileName + ".doc";

            doc.SaveAs(savePath,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing
               );
            doc.Save();
            wordApp.Quit(ref oMissing, ref oMissing, ref oMissing);
        }

    }
} 
```

任何人都可以指导对代码进行必要的更改，以便我的应用程序使我能够在它仍在运行时打开创建的 Word 文档。

提前致谢。

# php - 如何在 PHP 上使用 linux cp 命令指定要覆盖的文件？

> ID：14733125
> 
> 赞同：0
> 
> 时间：2013-02-06T15:51:46.577
> 
> 标签：php, file, copy, overwrite, cp

是否可以通过 PHP 告诉 linux`cp`命令要覆盖哪些文件？

基本上，我已经搜索了源文件夹和目标文件夹之间的冲突，询问用户要覆盖哪些文件并将它们放在`array`.

现在我想复制文件，只覆盖`array`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:56:41.353

你能不能只用那些需要覆盖的文件来调用复制并排除不需要复制的文件？

默认情况下 cp 会覆盖文件，您可以尝试 -f （强制选项），但这应该是必要的。

# ios - AppMobi 在 iOS 上无法解析 json

> ID：14733129
> 
> 赞同：0
> 
> 时间：2013-02-06T15:51:55.480
> 
> 标签：ios, appmobi

我正在使用 AppMobi 工具和 xdk 开发移动应用程序。如果我打电话给（仅接受 POST） `http://mg.smartmax.com/sightmaxwebservices/sightmaxwebservice.svc/jsoperator/TestjqMobi`

返回的 json 仅在 iOS 上无法解析（android 工作正常）。同样的调用在移动 safari 中运行良好，但似乎从应用程序调用时，它采用了不同的路径和错误。这似乎是一个[已知问题](http://forums.appmobi.com/viewtopic.php?f=10&t=2948&sid=5fe718398d57af07a376910f620f64b7)，想知道是否有人有好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:50:57.430

确保您的服务器正确编码 JSON。

我遇到了同样的问题。如果您使用 Drupal 作为后端，请使用他们的函数 drupal_json_encode 而不是 PHP 的 json_encode。我传递给应用程序的信息是由 WYSYWIG 编辑器生成的，也许这就是 drupal 的 json 编码函数考虑到 php 的 json 编码不考虑的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:04:41.033

你用什么来解析 JSON？就像是

```
var obj = JSON.parse(data); 
```

作为现在的解决方法，我想您可以只包含并使用另一个解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:08:11.593

我在 appMobi 工作——这似乎是 iOS 中本机容器的一个错误。您是否尝试过构建您的应用程序并进行测试（app*lab 没有最新的代码库）。

# javascript - 用于检测 DOM 元素可见性的一些更高级别的抽象

> ID：14733132
> 
> 赞同：12
> 
> 时间：2013-02-06T15:52:02.830
> 
> 标签：javascript, html, dom

截至 2013 年 2 月，谈到所有全新的、一流的 API（包括实验性甚至疯狂的 API），您能否提供应该如何检测特定 DOM 节点当前是否在视口中。

跨浏览器是一个优点。灵活性和普遍性是更大的优势。

所以，基本上我需要像 is_in_viewport(dom_node) 这样返回布尔值的东西。

*一些澄清*。让我们用可见性表示元素的至少一个像素在视口（不一定是窗口）中是物理可见的。

通过经典方法，我的意思是：

*   使用 offsetTop、offsetLeft 等属性测量元素的尺寸和位置。
*   使用 getBoundingClientRect

因此，简单地说，我正在寻找某种 API，它对我隐藏处理直接测量和后续计算的抽象级别。

# geometry - 为抽象三角剖分生成坐标

> ID：14733135
> 
> 赞同：1
> 
> 时间：2013-02-06T15:52:05.607
> 
> 标签：geometry, coordinates

我有一个完全由等边三角形组成的抽象三角剖分，它描述了一个弯曲的二维空间。因此，一些顶点具有例如 7 个等边三角形连接到它们。现在我想把它画成地形。

这必须在 3d 中完成，所以我预计会有很多鞍形节点和一些锥形结构。我目前正试图找到一个很好的算法来为我做这件事，但到目前为止我还是空手而归。原则上，您可以“仅”求解一组固定所有距离的二次方程，但这是不可行的。我会满足于提供最佳近似值的算法。

有什么建议吗？

# angularjs - ng-repeat ：按单个字段过滤

> ID：14733136
> 
> 赞同：495
> 
> 时间：2013-02-06T15:52:09.460
> 
> 标签：angularjs, ng-repeat, angularjs-filter

我有一系列产品，我正在重复使用 ng-repeat 并且正在使用

```
<div ng-repeat="product in products | filter:by_colour"> 
```

按颜色过滤这些产品。过滤器正在工作，但如果产品名称/描述等包含颜色，则应用过滤器后产品仍然存在。

如何将过滤器设置为仅适用于我的数组的颜色字段而不是每个字段？

* * *

## 回答 #1

> 赞同：584
> 
> 时间：2013-02-06T16:01:04.497

`colour`指定要在其中应用过滤器的属性（即）：

```
<div ng-repeat="product in products | filter:{ colour: by_colour }"> 
```

* * *

## 回答 #2

> 赞同：485
> 
> 时间：2013-02-06T15:58:33.610

[请参阅过滤器](https://docs.angularjs.org/api/ng/filter/filter)页面上的示例。使用一个对象，并在 color 属性中设置颜色：

```
Search by color: <input type="text" ng-model="search.color">
<div ng-repeat="product in products | filter:search"> 
```

* * *

## 回答 #3

> 赞同：177
> 
> 时间：2013-02-06T16:00:33.040

您可以按具有与您必须过滤的对象匹配的属性的对象进行过滤：

```
app.controller('FooCtrl', function($scope) {
   $scope.products = [
       { id: 1, name: 'test', color: 'red' },
       { id: 2, name: 'bob', color: 'blue' }
       /*... etc... */
   ];
}); 
```

```
<div ng-repeat="product in products | filter: { color: 'red' }"> 
```

正如 Mark Rajcok 所建议的，这当然可以通过变量传递。

* * *

## 回答 #4

> 赞同：108
> 
> 时间：2014-10-15T21:46:23.280

如果您想过滤给定对象的孙子（或更深），您可以继续构建您的对象层次结构。例如，如果要过滤“thing.properties.title”，可以执行以下操作：

```
<div ng-repeat="thing in things | filter: { properties: { title: title_filter } }"> 
```

您还可以通过将对象的多个属性添加到您的过滤器对象来过滤它们：

```
<div ng-repeat="thing in things | filter: { properties: { title: title_filter, id: id_filter } }"> 
```

* * *

## 回答 #5

> 赞同：104
> 
> 时间：2015-07-20T06:45:28.007

最好的方法是使用一个函数：

**html**

```
<div ng-repeat="product in products | filter: myFilter"> 
```

**javascript**

```
$scope.myFilter = function (item) { 
    return item === 'red' || item === 'blue'; 
}; 
```

或者，您可以使用 ngHide 或 ngShow 根据特定条件动态显示和隐藏元素。

* * *

## 回答 #6

> 赞同：65
> 
> 时间：2013-05-02T07:22:40.440

小心使用角度过滤器。如果要在字段中选择特定值，则不能使用过滤器。

例子：

**javascript**

```
app.controller('FooCtrl', function($scope) {
   $scope.products = [
       { id: 1, name: 'test', color: 'lightblue' },
       { id: 2, name: 'bob', color: 'blue' }
       /*... etc... */
   ];
}); 
```

**html**

```
<div ng-repeat="product in products | filter: { color: 'blue' }"> 
```

这将同时选择两者，因为使用类似`substr`
这意味着您要选择“color”包含字符串“blue”而不是“color”为“blue”的产品。

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2017-05-01T18:19:52.053

按颜色搜索：

```
<input type="text" ng-model="searchinput">
<div ng-repeat="product in products | filter:{color:searchinput}"> 
```

你也可以做一个内巢。

```
filter:{prop1:{innerprop1:searchinput}} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-09-29T09:03:01.687

如果您要执行以下操作：

```
<li class="active-item" ng-repeat="item in mc.pageData.items | filter: { itemTypeId: 2, itemStatus: 1 } | orderBy : 'listIndex'"
                id="{{item.id}}">
    <span class="item-title">{{preference.itemTitle}}</span>
</li> 
```

...您不仅会获得 itemTypeId 2 和 itemStatus 1 的项目，而且还会获得 itemType 20、22、202、123 和 itemStatus 10、11、101、123 的项目。这是因为过滤器：{.. .} 语法就像一个字符串包含查询。

但是，如果您要添加*: true*条件，它会按完全匹配过滤：

```
<li class="active-item" ng-repeat="item in mc.pageData.items | filter: { itemTypeId: 2, itemStatus: 1 } : true | orderBy : 'listIndex'"
                id="{{item.id}}">
    <span class="item-title">{{preference.itemTitle}}</span>
</li> 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-04-11T10:46:20.413

我的方式是这样

```
subjcts is

[{"id":"1","title":"GFATM"},{"id":"2","title":"Court Case"},{"id":"3","title":"Renewal\/Validity"},{"id":"4","title":"Change of Details"},{"id":"5","title":"Student Query"},{"id":"6","title":"Complains"}] 
```

> sub 是一个输入字段或任何你喜欢的

像这样显示

```
<div ng-if="x.id === sub" ng-repeat=" x in subjcts">{{x.title}}</div> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-03-17T20:12:57.973

您必须使用 `filter:{color_name:by_colour}`而不是

```
filter:by_colour 
```

如果要匹配对象的单个属性，请编写该属性而不是对象，否则将匹配其他一些属性。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-13T06:57:28.703

在过滤器中指定要应用过滤器的对象的属性：

```
//Suppose Object
var users = [{
  "firstname": "XYZ",
  "lastname": "ABC",
  "Address": "HOUSE NO-1, Example Street, Example Town"
},
{
  "firstname": "QWE",
  "lastname": "YUIKJH",
  "Address": "HOUSE NO-11, Example Street1, Example Town1"
}] 
```

**但是您只想对名字应用过滤器**

```
<input type = "text" ng-model = "first_name_model"/>
<div ng-repeat="user in users| filter:{ firstname: first_name_model}"> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-20T11:08:18.597

如果要过滤一个字段：

```
label>Any: <input ng-model="search.color"></label> <br>
<tr ng-repeat="friendObj in friends | filter:search:strict"> 
```

如果要过滤所有字段：

```
 label>Any: <input ng-model="search.$"></label> <br>
 <tr ng-repeat="friendObj in friends | filter:search:strict"> 
```

和 [https://docs.angularjs.org/api/ng/filter/filter](https://docs.angularjs.org/api/ng/filter/filter)对你有好处

# c# - 正则表达式替换标签之间和包括标签

> ID：14733138
> 
> 赞同：0
> 
> 时间：2013-02-06T15:52:18.247
> 
> 标签：c#, regex

我有以下文本行（元标题）：

```
Buy [ProductName][Text] at a great price [/Text] from [ShopName] today. 
```

我根据我拥有的价值观进行更换。

我让它按我的需要工作，但是我找不到正确的正则表达式来替换：

```
[Text] at a great price [/Text] 
```

单词（在方括号之间的 nd 中）发生了变化，所以唯一保持不变的是：

```
[][/] 
```

即我可能还想更换

```
[TestText]some test text[/TestText] with nothing. 
```

我有这个工作：

```
System.Text.RegularExpressions.Regex.Replace(SEOContent, @"\[Text].*?\[/Text]", @""); 
```

我假设的正则表达式：

```
[.*?].*?\[/.*?] 
```

会工作，但它没有！- 我正在用 ASP.NET C# 编码提前谢谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:56:34.623

使用命名捕获获取 [..] 的节点名称，然后使用 \k<..> 再次找到它。

```
(\[(?<Tag>[^\]]+)\][^\[]+\[/\k<Tag>\]) 
```

使用忽略模式空白和示例程序分解。

```
string pattern = @"
(                # Begin our Match
  \[             # Look for the [ escape anchor
  (?<Tag>[^\]]+) # Place anything that is not antother ] into the named match Tag
  \]             # Anchor of ]
  [^\[]+         # Get all the text to the next anchor
  \[/            # Anchor of the closing [...] tag
  \k<Tag>        # Use the named capture subgroup Tag to balance it out
  \]             # Properly closed end tag/node.
)                # Match is done";

string text = "[TestText]some test text[/TestText] with nothing.";

Console.WriteLine (Regex.Replace(text, pattern, "Jabberwocky", RegexOptions.IgnorePatternWhitespace));
// Outputs
// Jabberwocky with nothing. 
```

* * *

顺便说一句，我实际上会创建一个标记化正则表达式（使用具有上述模式的正则表达式 If）并通过命名捕获识别部分来替换匹配项。然后在替换中使用匹配评估器替换已识别的标记，例如：

```
string pattern = @"
(?(\[(?<Tag>[^\]]+)\][^\[]+\[/\k<Tag>\]) # If statement to  check []..[/] situation
  (                                      # Yes it is, match into named captures
   \[
   (?<Token>[^\]]+)                      # What is the text inside the [ ], into Token
   \]
   (?<TextOptional>[^\[]+)               # Optional text to reuse
   \[
   (?<Closing>/[^\]]+)                   # The closing tag info
   \]
  )
|                                        # Else, let is start a new check for either [] or plain text
 (?(\[)                                  # If a [ is found it is a token.
   (                                     # Yes process token
    \[
    (?<Token>[^\]]+)                     # What is the text inside the [ ], into Token
    \]
   )
  |                                      # Or (No of the second if) it is just plain text
  (?<Text>[^\[]+)                        # Put it into the text match capture.
 )
)
";

string text = @"Buy [ProductName] [Text]at a great price[/Text] from [ShopName] today.";

Console.WriteLine (
Regex.Replace(text,
              pattern,
              new MatchEvaluator((mtch) =>
              {

                 if (mtch.Groups["Text"].Success)           // If just text, return it.
                     return mtch.Groups["Text"].Value;

                 if (mtch.Groups["Closing"].Success)       // If a Closing match capture group reports success, then process
                 {
                    return string.Format("Reduced Beyond Comparison (Used to be {0})", mtch.Groups["TextOptional"].Value);
                 }

                  // Otherwise its just a plain old token, swap it out.
                  switch ( mtch.Groups["Token"].Value )
                  {
                     case "ProductName" : return "Jabberwocky"; break;
                     case "ShopName"    : return "StackOverFlowiZon"; break;
                  }

                  return "???"; // If we get to here...we have failed...need to determine why.

              }),
              RegexOptions.IgnorePatternWhitespace | RegexOptions.ExplicitCapture));
// Outputs:
// Buy Jabberwocky Reduced Beyond Comparison (Used to be at a great price) from StackOverFlowiZon today. 
```

# excel - 范围对象的 Excel 错误处理

> ID：14733139
> 
> 赞同：0
> 
> 时间：2013-02-06T15:52:32.483
> 
> 标签：excel, error-handling, range

我正在开发一个 Excel 用户表单，用户可以在其中输入一个范围。例如，他们可以输入“B5”和“B20”。

我正在尝试进行错误处理以防止用户输入不正确的范围。例如，“asdf”和“fdsa”。

以下代码失败：

```
Private Sub cmdSend_Click()
 Dim beginTerm As String
 Dim endTerm As String

 beginTerm = TermsBegin.Text
 endTerm = TermsEnd.Text

 If (IsError(Worksheets("Account Information").Range(beginTerm + ":" + endTerm)) = True) Then
     MsgBox "Cell Range is invalid."
     Exit Sub
 End If
 End Sub 
```

我还尝试了以下方法：

```
Private Sub cmdSend_Click()
 Dim beginTerm As String
 Dim endTerm As String

 beginTerm = TermsBegin.Text
 endTerm = TermsEnd.Text
 Dim myRange As Range

 myRange = Worksheets("Account Information").Range(beginTerm + ":" + endTerm)
 On Error GoTo ErrHandler

 On Error GoTo 0

 'other code ...

 ErrHandler:
     MsgBox "Cell Range is invalid."
     Exit Sub
End Sub 
```

我的问题是我该如何处理它失败的情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:56:17.613

你必须把

```
On Error GoTo ErrHandler 
```

在可能引发错误的行之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:00:59.523

如果您需要从用户那里获取范围，我建议使用 Type = 8 的 Application.InputBox。这允许用户从工作表中选择一个范围。

看看这个： [http ://www.ozgrid.com/VBA/inputbox.htm](http://www.ozgrid.com/VBA/inputbox.htm)

此外，如果您使用的是用户窗体，您还可以添加一个命令按钮，该按钮将调用 Application.InputBox 以允许用户选择一个范围。

快速示例：

```
Private Sub CommandButton1_Click()
    Dim r As Range

    On Error Resume Next

    Set r = Application.InputBox(Prompt:= _
                "Please select a range with your Mouse to be bolded.", _
                    Title:="SPECIFY RANGE", Type:=8)
    If Not r Is Nothing Then MsgBox r.Address

    On Error GoTo 0
End Sub 
```

# c++ - doxegen rtf 文档中的类排序

> ID：14733142
> 
> 赞同：1
> 
> 时间：2013-02-06T15:52:37.653
> 
> 标签：c++, doxygen

我正在使用 doxygen 生成我的 C++ 代码的 rtf 文档。目前，这些类按字母顺序出现在文档中。我宁愿通过继承订购一些类（基类出现在派生类之上）。有没有办法指定类出现在 rtf 文档中的顺序，而不是手动移动段落？

# objective-c - 检测 UIButton 触摸子视图

> ID：14733144
> 
> 赞同：1
> 
> 时间：2013-02-06T15:52:41.480
> 
> 标签：objective-c, uibutton, subview, ibaction

我添加了一个包含 UIButton 控件的子视图。此子视图以编程方式添加到其父视图。当点击此按钮时，我需要执行一个操作，但由于它包含在它自己的子视图中，我无法将 IBAction 连接到视图控制器以推送另一个视图控制器。

有没有一种简单的方法来检测按钮被点击并在其超级视图中调用方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:04:01.883

您可以以编程方式完成所有操作：

```
[buttonName addTarget:self action:@selector(methodName:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后创建您的方法：

```
- (void)methodName:(id)sender
{
     // Do something.
} 
```

这就是您必须编写的所有代码。

# python - flask 和 wtf - 如何为字段指定标签属性？

> ID：14733148
> 
> 赞同：1
> 
> 时间：2013-02-06T15:53:05.510
> 
> 标签：python, flask, wtforms

在摆弄 wtforms 之后，字段使用小部件将它们实际呈现为 html。我写了一些自定义字段/小部件来以我更喜欢的方式绘制 html。但这里有一个问题：

假设我想用预定义的 css 类渲染它们或自己提供实际细节。

我怎样才能做到这一点？以及在处理请求的哪个阶段（在`Form`类声明中？或在设置属性时给出`Form`一些`Fields`？或者当我实际上在 jinja2 模板中调用它们时）我应该这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:04:32.923

我使用类似这样的 Jinja 宏：

```
{% macro field_with_errors(field) %}
    {% set css_class=kwargs.pop('class', '') %}
    {% if field.type in ('DateField', 'DateTimeField') %}
        {{ field(class='date ' + css_class, **kwargs) }}
    {% elif field.type == 'IntegerField' %}
        {{ field(class='number ' + css_class, **kwargs) }}
    {% else %}
        {{ field(class=css_class, **kwargs) }}
    {% endif %}

    {% if field.errors %}
        <ul class="errors">{% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}</ul>
    {% endif %}
{% endmacro %} 
```

用法类似于：

```
{{ field_with_errors(form.foo, placeholder='bar') }} 
```

这让我避免了样板，但也让我将显示决策保留在模板空间中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:14:32.650

查看[渲染字段](http://wtforms.simplecodes.com/docs/1.0.3/crash_course.html#rendering-fields)部分。

或者，您可以添加要在 Jinja2（等）模板中呈现的属性：

```
<div class="input-prepend">
        {{ form.address(placeholder="example.com", id="address", autofocus="autofocus", required="required") }}
</div> 
```

没有什么可以阻止您为上面的 ID 值使用变量，而不是`address`，然后使用关键字参数呈现模板以填充它。

# qtreeview - 没有调用 QTreeView::setModel(modelClass (*)())' 的匹配函数

> ID：14733150
> 
> 赞同：0
> 
> 时间：2013-02-06T15:53:06.233
> 
> 标签：qtreeview, qfilesystemmodel

我是 QT 的新手。我正在尝试创建一个简单的文件系统浏览器。我为模型和视图类创建了一个单独的类。他们来了：

//modelClass.h

```
#ifndef MODELCLASS_H
#define MODELCLASS_H
#include <QFileSystemModel>

class modelClass: public QFileSystemModel{
    Q_OBJECT
public:
    modelClass();  //constructor
    QFileSystemModel* createModel(); //creates the QFileSystemModel
//public slots:
private:
};

#endif // MODELCLASS_H 
```

//modelClass.cpp

```
#include "modelClass.h"

modelClass::modelClass(){
    createModel();  //calls to function below
}

QFileSystemModel* modelClass::createModel(){
    QFileSystemModel* model = new QFileSystemModel;
    model->setRootPath("/");
    return model;
} 
```

//systemBrowser.cpp

```
#include "modelClass.h"
#include <QtGui>

int main(int argc, char *argv[]){
    QApplication app(argc, argv);
    modelClass model();

    QTreeView tree;
    tree.setModel(&model);
    tree.setSortingEnabled(true);
    tree.header()->setResizeMode(QHeaderView::ResizeToContents);
    tree.resize(640, 480);
    tree.show();

    return app.exec();
} 
```

在尝试编译它时，我收到错误：

```
 no matching function for call to 'QTreeView::setModel(modelClass(*)())'
    candidates are: virtual void QTreeView::setModel(QAbstractItemModel*)* 
```

谁能帮我解决这个错误？我敢肯定它只是我想念的一些简单的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:55:32.993

可能复活一具尸体，我知道。但是，这很容易：

线

`modelClass model();`

是错的。您的编译器假定这是返回类型*modelClass的函数**model()*的前向声明。因此调用*QTreeView::setModel的错误*

 **该行应写为：

`modelClass model;`

另见：[http ://en.wikipedia.org/wiki/Most_vexing_parse](http://en.wikipedia.org/wiki/Most_vexing_parse)**

# android - 更新片段中的列表视图

> ID：14733151
> 
> 赞同：0
> 
> 时间：2013-02-06T15:53:10.820
> 
> 标签：android, listview, refresh, fragment

我对 android 编程和一般编程相当陌生。我在 web 和 stackoverflow 上搜索了解决方案，但似乎找不到。

我有一个在片段中处理不同选项卡的应用程序。我的片段之一包含一个列表视图。但是，列表视图不会更新或刷新。当我收到传入的短信时，它应该刷新。这是片段代码：

```
public class SmsSectionFragment extends Fragment {

    @SuppressWarnings("null")
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View listView = inflater.inflate(R.layout.fragment_section_sms, container, false);

        ListView mListData = (ListView) listView.findViewById(R.id.lvData);
        TextView aantalSms = (TextView) listView.findViewById(R.id.aantalSms);

        ArrayList<SmsInfo> listSms = getIntent().getParcelableArrayListExtra("ListSMS");

        // check condition 
        if(listSms != null && listSms.size() > 0) {
                // set data to list
                SmsInfoAdapter adapter = new SmsInfoAdapter(getActivity(), listSms);
                mListData.setAdapter(adapter);
                adapter.setNotifyOnChange(true);
                int count = listSms.size();
                aantalSms.setText(String.valueOf(count));

        }

        return listView;
    } 
```

短信的接收在其他三个类中处理，Receiver代码为：

```
package com.example.android.effectivenavigation; 
```

进口...等

```
public class SmsReceiver extends BroadcastReceiver {

static ArrayList<SmsInfo> listSms = new ArrayList<SmsInfo>();
@Override
public void onReceive(Context context, Intent intent) {

    // get SMS map from intent
    Bundle extras = intent.getExtras();
    // a notification message
    String messages = "";
    if ( extras != null ) {
        // get array data from SMS
        Object[] smsExtra = (Object[]) extras.get( "pdus" ); // "pdus" is the key

        for ( int i = 0; i < smsExtra.length; ++i ) {
            // get sms message
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);
            // get content and number
            String body = sms.getMessageBody();
            String adition = "  SMS::  ";
            String einde = " ::SMS";
            String sendme = adition + body + einde;
            String address = sms.getOriginatingAddress();
            // create display message
            messages += "SMS from " + address + " :\n";
            messages += body + "\n";

            //Send to Arduino
            Amarino.sendDataToArduino(context, DEVICE_ADDRESS, 'T', sendme);

            // store in the list
            listSms.add(new SmsInfo(address, body));
        }

        // better check size before continue
        if(listSms.size() > 0) {
            // notify new arriving message
            //Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
            // set data to send
            Intent data = new Intent(context, MainActivity.class);
            // new activity
            data.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            data.putParcelableArrayListExtra("ListSMS", listSms);
            // start
            context.startActivity(data);

        }
    }
} 
```

有人可以对我的问题有所了解吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:23:18.480

在我看来，您实际上没有任何东西可以更新片段。您的广播接收器正在接收信息，但您从未将其添加到片段中。

在您的片段声明中添加类似的操作：

```
private SMSReceiver receiver;
private IntentFilter filter; 
```

在你的 onCreateView 添加：

```
receiver = new SMSReceiver();
filter = new IntentFilter(SMSReceiver.YOUR_STRING_FILTER);
registerReceiver(receiver, filter); 
```

然后在 SMSReceiver 类的 onReceive 中添加如下内容：

```
adapter = new SmsInfoAdapter (this, yourData);
list.setAdapter(adapter); 
```

在 Fragment 类中拥有这一切就是我所做的。

# javascript - 等待多个延迟完成

> ID：14733156
> 
> 赞同：0
> 
> 时间：2013-02-06T15:53:19.797
> 
> 标签：javascript, jquery

我需要等待多个延迟完成，然后处理我的成功或失败回调。

```
function myFunc(){
    alert("Success");
    }
function myFailure(){
    alert("Failure");
    }

var jqxhr = $.ajax( "example.cfm" )
    .done(function() { alert("Primo report"); })
    .fail(function() { alert("Primo report non completato"); })
    .always(function() { alert("Finito prima chiamata"); });

var jqxhr2 = $.ajax( "example2.cfm" )
    .done(function() { alert("Secondo report"); })
    .fail(function() { alert("Secondo report non completato"); })
    .always(function() { alert("Finito seconda chiamata"); });

var jqxhr3 = $.ajax( "example3.cfm" )
    .done(function() { alert("Terzo report"); })
    .fail(function() { alert("Terzo report non completato"); })
    .always(function() { alert("Finito terza chiamata"); });

    $.when(jqxhr,jqxhr2,jqxhr3)
    .then(myFunc, myFailure); 
```

问题是，如果我的 ajax 请求之一失败，立即触发回调。

可以等到所有ajax请求都完成后再回调吗？

# python - 列表中的 Python 列表

> ID：14733158
> 
> 赞同：0
> 
> 时间：2013-02-06T15:53:29.990
> 
> 标签：python, list

我想要转换列表如下：

```
list=[['a','b','c','d'],'e','f'] 
```

至

```
list['a','b','c','d','e','f'] 
```

我怎么能这样做..帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:56:32.973

看看`itertools.chain`，我认为这正是你所需要的： http: [//docs.python.org/2/library/itertools.html#itertools.chain](http://docs.python.org/2/library/itertools.html#itertools.chain)

* * *

```
>>> import itertools as it
>>> li = [['e', 'f', 'g'], 'a', 'b']
>>> list(it.chain.from_iterable(li))
['e', 'f', 'g', 'a', 'b'] 
```

这几乎是该函数文档中的示例，这始终是一个很好的起点......

# php - 将 wordpress 帖子的 img src 拉为背景图像

> ID：14733162
> 
> 赞同：1
> 
> 时间：2013-02-06T15:53:40.437
> 
> 标签：php, mysql, css, wordpress, rss

好的。所以我有一个 wordpress 插件，它运行一个读取 RSS 提要的 cron 作业，然后解析 RSS 提要标题并摘录到新帖子中。

大多数情况下，读取的每个 RSS“帖子”都包含一个直接为 html 的 img 标签（例如：）`<img src="localhost/img/img-1.png">`。该 img 存储在我自己的 wordpress 服务器上的缓存中，因此无需读取它的 RSS 服务器即可看到它。

我想要做的是使用 img 标签 src 作为帖子的背景图像。

到目前为止，我可以在不加载 wordpress 帖子的情况下看到图像标签的唯一方法是潜入 WPDB，找到帖子并复制出 img src。

我已经尝试使用 post-thumbnails 选项，但是由于从 RSS 提要中读取图像时，图像没有作为特色图像加载，因此图像没有加载到 wordpress 安装的媒体库中。

我的思路是引导我以某种方式将 img 标签 src 解析到它自己的 mysql 表中，但这是我宁愿避免的一整碗面条。

有没有更简单的方法来做到这一点？

# msmq - Using MQMoveMessage

> ID：14733169
> 
> 赞同：0
> 
> 时间：2013-02-06T15:53:48.083
> 
> 标签：msmq, message-queue

I'm trying to add poison message handling in my message queuing implementation. I'm receiving a batch of messages from a transactional queue, lets say 100, and if any are deemed 'poisonness', I want to move them to a subqueue where they can be handled separately.

The problem I'm having is knowing how to use MQMoveMessage. If I use it using the same transaction as the receive, I get an MQ_ERROR_MESSAGE_LOCKED_UNDER_TRANSACTION result code. If I use it after the receive transaction, I [of course] get a MQ_ERROR_MESSAGE_NOT_FOUND result code.

I imagine this works if I peek the message, since that doesn't lock the message, or remove it from the queue. However, that doesn't help since I'm receiving, and using a transactional queue.

Any help with this would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:35:04.357

If anyone has the same issue, it appears the pattern is as above. That is, a transaction should be aborted, the message moves performed, and the transaction re-read.

# kineticjs - 嵌套组不保持绝对位置

> ID：14733170
> 
> 赞同：1
> 
> 时间：2013-02-06T15:53:52.027
> 
> 标签：kineticjs

我在嵌套组周围发现了一些问题。

从一些代码开始。我已经针对动能库的 v4.2.0 和 4.3.1 尝试了此代码。每个版本都给了我不同的行为，但都不是正确的，所以我将描述两者。这是代码：

```
<script>

        var stage = new Kinetic.Stage({
            container: "container",
            x: 0,
            y: 0,
            width: 1000,
            height: 800
        });

        var layer = new Kinetic.Layer();
        stage.add(layer);

        var grp1 = new Kinetic.Group(
        {
            id: 'grp1',
            name: 'grp1',
            height: 100,
            width: 100,
            draggable: true
        });
        grp1.setAbsolutePosition(100, 100);

        var sqr1 = new Kinetic.Rect({
            x: 100,
            y: 100,
            width: 100,
            height: 100,
            fill: '#FFFFFF',
            stroke: '#000000',
            strokeWidth: .4,
            id: 'sqr1',
            name: 'sqr1'
        });
        grp1.add(sqr1);

        var grp2 = new Kinetic.Group(
        {
            id: 'grp2',
            name: 'grp2',
            height: 50,
            width: 50,
            draggable: true
        });
        grp2.setAbsolutePosition(110, 110);

        var sqr2 = new Kinetic.Rect({
            x: 110,
            y: 110,
            width: 50,
            height: 50,
            fill: '#FFFFFF',
            stroke: '#00FF00',
            strokeWidth: .4,
            id: 'sqr2',
            name: 'sqr2'
        });

        grp2.add(sqr2);
        grp1.add(grp2);

        layer.add(grp1);

        grp2.on('click', function (evt) {
            var pos = grp2.getAbsolutePosition();
            alert(pos.x + ', ' + pos.y);
        });

        layer.draw();
</script> 
```

如果您针对 v4.2.0 运行此程序，您将看到 grp2 不是放置在相对于舞台的 110、110 处，而是相对于舞台放置在 210、210 处（单击绿色方块以查看它的位置）。我尝试删除 setAbsolutePosition 调用，然后它会正确绘制组，但是如果您拖动组然后再次单击绿色方块，您将看到该位置现在相对于嵌套组的初始位置，而不是阶段。

如果您针对 v4.3.1 运行上述代码，您将看到第二组再次放置在相对于舞台的 210、210 处。如果您尝试单击此版本下的绿色方块，则会显示该位置，然后该方块将完全消失，不会引发任何 javascript 错误。我有很多使用嵌套组的代码，当我尝试升级到 4.3.1 时，到处都会发生这种情况 - 如果组是嵌套的，当我单击它们时，事情就会消失。我在 IE9 和 Firefox 中尝试过，结果相同。

有没有人对如何获得嵌套组的正确绝对位置有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:32:34.447

[http://jsfiddle.net/tbYLe/2/](http://jsfiddle.net/tbYLe/2/)

您必须为您的组“dragOnTop”添加一个额外的属性（与 4.3.1 一起使用）

```
 var grp1 = new Kinetic.Group(
    {
        id: 'grp1',
        name: 'grp1',
        height: 100,
        width: 100,
        draggable: true,
        dragOnTop: false   //<-- right here is what you need, add this to your other group too
    }); 
```

这可以防止元素在拖动时被放置在新图层中，并将解决您消失的正方形问题。

关于绝对位置：

您需要在嵌套组之后设置绝对位置，而不是在创建它们之后。看一看：

```
 grp1.add(sqr1);
    grp2.add(sqr2);

    grp1.add(grp2);                      //nested groups

    grp1.setAbsolutePosition(100, 100);  //set absolute position after nesting groups
    grp2.setAbsolutePosition(110, 110);  //set absolute position after nesting groups

    layer.add(grp1); 
```

# libxml2 - libxml xmlNodeDump 编码问题

> ID：14733174
> 
> 赞同：1
> 
> 时间：2013-02-06T15:54:07.337
> 
> 标签：libxml2, kissxml

我有这个代码

```
 if(genericPtr->type == XML_ATTRIBUTE_NODE){
        xmlAttrPtr attr = (xmlAttrPtr)genericPtr;
        printf("\n str %s\n", (const char *)attr->children->content);
    }

    xmlBufferPtr bufferPtr = xmlBufferCreate();
    if (IsXmlNsPtr(genericPtr)){
        xmlNodeDump(bufferPtr, NULL, (xmlNodePtr)genericPtr, 0, format);
    }else{
        xmlNodeDump(bufferPtr, ((xmlStdPtr)genericPtr)->doc, (xmlNodePtr)genericPtr, 0, format);
    }

    printf("\n str2 %s\n", (const char *)bufferPtr->content); 
```

结果是

```
str чатрум@muc.chat.quickblox.com/300

str2  to="&#x447;&#x430;&#x442;&#x440;&#x443;&#x43C;@muc.chat.quickblox.com/300" 
```

结果我需要**чатрум**

```
&#x447;&#x430;&#x442;&#x440;&#x443;&#x43C; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T20:56:19.580

尝试[`xmlNodeDumpOutput`](http://xmlsoft.org/html/libxml-tree.html#xmlNodeDumpOutput)允许您指定编码。请注意，它使用 a`xmlOutputBuffer`而不是`xmlBuffer`. 另一个有用的函数是[`xmlXPathCastNodeToString`](http://xmlsoft.org/html/libxml-xpath.html#xmlXPathCastNodeToString)将节点的 XPath 字符串值返回为`xmlChar`.

# actionscript-3 - flex，来自命令类的多请求，如何区分命令中的每个响应和结果

> ID：14733175
> 
> 赞同：1
> 
> 时间：2013-02-06T15:54:09.360
> 
> 标签：actionscript-3, apache-flex

我遇到了一个 flex 面试官问的问题：如果命令类有 2 个请求，并且当后端处理请求时，它们可能需要不同的时间（第一个命令可能需要更长的时间来处理，以便它在之后返回第二个请求的响应）。所以，在您的结果处理程序中，您如何知道哪个响应针对哪个请求？

注意：它们在同一个命令中，并且由同一个结果处理程序处理。

# javascript - 动态声明变量

> ID：14733177
> 
> 赞同：0
> 
> 时间：2013-02-06T15:54:16.997
> 
> 标签：javascript, prototypal-inheritance

这个项目只是为了我自己的满足，所以我并不是真的在寻找其他库来完成这个。我正在尝试制作一个 HTML 元素库：

```
var ElementLibrary = function() {};
(function() {
    var _concatArray = [,'Element'];
    var _varArray = [
        'html',
        'head', 'title', 'base', 'link', 'meta', 'style',
        'script',
        'body', 'section', 'nav', 'article', 'aside', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup', 'header', 'footer', 'address', 'main',
        'p', 'hr', 'pre', 'blockquote', 'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'figure', 'figcaption', 'div',
        'a', 'em', 'strong', 'small', 's', 'cite', 'q', 'dfn', 'abbr', 'data', 'time', 'code', 'var', 'samp', 'kbd', 'sub', 'sup', 'i', 'b', 'u', 'mark', 'ruby', 'rt', 'rp', 'bdi', 'bdo', 'span', 'br', 'wbr',
        'ins', 'del',
        'img', 'iframe', 'embed', 'object', 'param', 'video', 'audio', 'source', 'track', 'canvas', 'map', 'area', 'svg', 'math',
        'table', 'caption', 'colgroup', 'col', 'tbody', 'thead', 'tfoot', 'tr', 'td', 'th',
        'form', 'fieldset', 'legend', 'label', 'input', 'button', 'select', 'datalist', 'optgroup', 'option', 'textarea', 'keygen', 'output', 'progress', 'meter',
        'details', 'summary', 'command', 'menu'
    ];
    var _l = _varArray.length;
    for (var i = 0; i < _l; i++) {
        _concatArray[0] = _varArray[i];
        ElementLibrary.prototype[_concatArray.join('')] = document.createElement(_varArray[i]);
        ElementLibrary.prototype[_varArray[i]] = function() {
            return this[_concatArray.join('')].cloneNode(false);
        };
    }
})(); 
```

我最初开始编写它的方式最终会超过 400 行，所以我想以更紧凑的方式来完成它。好消息，它部分有效。如果我做：

```
var el = new ElementLibrary();
el.pElement // <---that is correctly a paragraph element 
```

然而，这并不是真正的预期用途。我想从单个原型属性中获得一个浅克隆，例如：

```
var el = new ElementLibrary();
el.p() // <---this is where I run into trouble 
```

如果我调用任何 ElementLibrary 函数，它只会返回数组中的最后一个元素（在本例中为菜单）。当所有属性都正确声明时，为什么每个函数只返回最后一个元素？

编辑：我添加了一个[小提琴](http://jsfiddle.net/jBPhr/)并将 _concatArray 业务撤出。

解决方案：

```
var ElementLibrary = function() {};
(function() {
    var _varArray = [
        'html',
        'head', 'title', 'base', 'link', 'meta', 'style',
        'script',
        'body', 'section', 'nav', 'article', 'aside', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup', 'header', 'footer', 'address', 'main',
        'p', 'hr', 'pre', 'blockquote', 'ol', 'ul', 'li', 'dl', 'dt', 'dd', 'figure', 'figcaption', 'div',
        'a', 'em', 'strong', 'small', 's', 'cite', 'q', 'dfn', 'abbr', 'data', 'time', 'code', 'var', 'samp', 'kbd', 'sub', 'sup', 'i', 'b', 'u', 'mark', 'ruby', 'rt', 'rp', 'bdi', 'bdo', 'span', 'br', 'wbr',
        'ins', 'del',
        'img', 'iframe', 'embed', 'object', 'param', 'video', 'audio', 'source', 'track', 'canvas', 'map', 'area', 'svg', 'math',
        'table', 'caption', 'colgroup', 'col', 'tbody', 'thead', 'tfoot', 'tr', 'td', 'th',
        'form', 'fieldset', 'legend', 'label', 'input', 'button', 'select', 'datalist', 'optgroup', 'option', 'textarea', 'keygen', 'output', 'progress', 'meter',
        'details', 'summary', 'command', 'menu'
    ];
    var _l = _varArray.length;
    for (var i = 0; i < _l; i++) {
        var _temp = _varArray[i];
        var _tempElement = _temp + 'Element';
        (function(t, te) {
            ElementLibrary.prototype[te] = document.createElement(t);
            ElementLibrary.prototype[t] = function() {
                return this[te].cloneNode(false);
            };
        })(_temp, _tempElement);
    }
})();

var el = new ElementLibrary();
alert(el.p()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:57:51.847

您在该循环中创建的函数不引用“_concatArray”的“冻结”版本。它们都共享对同一个数组的引用。

将它们包装在另一个函数中：

```
ElementLibrary.prototype[_varArray[i]] = (function(ca) {
  return function() {
    return this[ca.join('')].cloneNode(false);
  };
})(_concatArray); 
```

# c++ - 枚举类与枚举或类有何相似之处？

> ID：14733179
> 
> 赞同：1
> 
> 时间：2013-02-06T15:54:20.250
> 
> 标签：c++, class, enums, enum-class

该类型`enum class`是完全独立于传统类的，还是其实现相似？如何`enum class`工作？我问的原因是因为我不明白它如何同时与类和枚举相似。我假设枚举类不能有构造函数或内部方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:03:30.207

它与普通的相关`enum`，因为它由一组常量值的名称组成。它与 a 相关`class`，因为名称都包含**在**类型名称的范围内。所以：

```
enum my_enum {
    first,
    second,
    third
};

my_enum value = second; // OK; enumeration names are in global scope here

enum class my_class_enum {
    fourth,
    fifth,
    sixth
};

my_class_enum other_value = fourth; // Error
my_class_enum another_value = my_class_enum::fourth; // OK 
```

# regex - 斜线的正则表达式后跟任意数字

> ID：14733182
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:54:29.670
> 
> 标签：regex

编写正则表达式的正确方法是什么：

`/`后跟任意数字

例如，使用“/1”、“/2”而不是“/a”等触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:59:42.830

聚合酶链反应

```
/\/\d/ 
```

这将匹配任何 '/' 后跟任何单个字符编号的数字。

```
/\/\d+/ 
```

这将匹配 '/' 后跟任何一组连续数字。

```
/^\/d+$/ 
```

这将匹配 '/' 后跟任何一组连续数字，这些数字是该行唯一的东西。

# java - UDP 广播上下文中的“通配符地址”是什么？

> ID：14733183
> 
> 赞同：1
> 
> 时间：2013-02-06T15:54:37.210
> 
> 标签：java, network-programming, broadcast, multicast, datagram

参考[DatagramSocket](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html)类的 Java 6 API 文档：

> UDP 广播发送始终在 DatagramSocket 上启用。为了接收广播数据包，**DatagramSocket 应该绑定到通配符地址**。在一些实现中，当 DatagramSocket 绑定到更具体的地址时，也可以接收广播包。

有人能告诉我“通配符地址”是什么吗？以下对于侦听 UDP 广播是否有效：

```
MulticastSocket socket = new MulticastSocket(new InetSocketAddress(InetAddress.getByName("0.0.0.0"),4445); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:31:59.523

通配符地址`0.0.0.0.`不要与广播到所有子网地址混淆，后者`255.255.255.255.`更正确地称为“任何”地址，之后`INADDR_ANY.`

`null`在 Java 中，通过提供绑定地址或完全省略参数（例如`new InetSocketAddress(null, 0)`或`new InetSocketAddress(0)`分别省略）最容易使用它。换句话说，它是绑定时的默认设置，因此是隐含的“良好实践”。

# r - 将值移动到不同的环境

> ID：14733187
> 
> 赞同：10
> 
> 时间：2013-02-06T15:54:45.827
> 
> 标签：r, memory, environments

假设我有一个内存很大的值（可能是一个巨大的矩阵）。有没有办法将该值移动到不同的环境而不是复制然后删除？复制/克隆方法会根据值的大小暂时增加内存占用。

我查看了这篇[文章](https://stackoverflow.com/questions/9965577/r-copy-move-one-environment-to-another)，但它不包含我的问题的解决方案。共享相同的环境（以避免复制）*不是一种选择*。我确实需要移动价值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:02:27.190

~~也许写入磁盘，删除，从磁盘读取？我可以预见这种方法的唯一潜在问题是父/子环境之间的任何关系都将丢失。但是，如果您只是试图将值从一个环境复制到另一个环境，也许这不是问题？~~

更新：

我无法复制您对复制方法的看法。下面的代码显示使用的最大内存（由 报告`gc`）没有增加。这是因为这些值是“承诺的”，而不是深度复制的。但是，如果您在从旧环境中删除对象之前更改了新环境中的对象，则会创建一个副本。

```
R> e1 <- new.env()
R> e1$x <- numeric(5e7)
R> e1$y <- numeric(5e7)
R> gc()
            used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells    171022   9.2     350000  18.7    350000  18.7
Vcells 100271746 765.1  110886821 846.0 100272535 765.1
R> e2 <- new.env()
R> for(n in ls(e1, all.names=TRUE))
+   assign(n, get(n, e1), e2)
R> gc()
            used  (Mb) gc trigger  (Mb)  max used  (Mb)
Ncells    171038   9.2     350000  18.7    350000  18.7
Vcells 100271788 765.1  116511162 889.0 100272535 765.1
R> identical(e1$x,e2$x)
[1] TRUE
R> identical(e1$y,e2$y)
[1] TRUE 
```

# drupal - 将 Drupal 视图过滤器公开为开/关复选框以启用/禁用过滤器

> ID：14733191
> 
> 赞同：4
> 
> 时间：2013-02-06T15:55:00.653
> 
> 标签：drupal, drupal-views, drupal-exposed-filter

我有一个过滤分类字段的 Drupal 视图。我希望能够通过在 Exposed Filters 表单上显示一个复选框来打开/关闭过滤器。为了说明这个问题，比如说词汇是水果，术语是苹果、梨、橙子和柠檬。我可以通过创建一个过滤器来选择柑橘类水果的含量，该过滤器说水果是（橙子、柠檬）之一。现在我想公开过滤器以允许我选择是否应用我的柑橘类水果过滤器。如何在公开的过滤器表单中添加一个复选框，以便在选择时应用过滤器，并在未选择时忽略过滤器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-26T17:56:57.097

这个有可能：

*   在适当的字段上添加一个过滤器（在您的示例中对 Fruits 的术语引用）。

在配置过滤条件对话框中：

*   将“要公开的过滤器类型”设置为“分组过滤器”。
*   勾选“允许多选”
*   将“小部件类型”设置为收音机。
*   您可能想清空“标签”。
*   删除下表中除一个过滤器组之外的所有过滤器组。

在剩余的过滤器集中：

*   填写标签（在您的示例中为“柑橘类水果”）。
*   将“运算符”设置为“是其中之一”。
*   在值下选择您要过滤的值（在您的示例中为橘子和柠檬）。

这为您提供 1 个复选框，标记为“柑橘类水果”。所以用户界面就在那里。不幸的是，问题[[#2224601]](https://www.drupal.org/node/2224601)阻止了它的工作，因为它会导致无效的查询，但可以使用工作补丁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T19:16:55.777

假设您正在使用[BEF](https://drupal.org/project/better_exposed_filters)并且您已经在 BEF 选项中为暴露的过滤器选中了“复选框/单选按钮”选项，设置复选框而不是单选按钮的方法是在配置对话框中选中“允许多项选择”为您在视图中暴露的过滤器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-30T06:34:43.827

我认为这里没有答案可以回答这个问题。“我想要的是显示一个复选框，选中时应用/启用过滤器，未选中时忽略/禁用过滤器。我认为 Better Exposed 过滤器不允许我这样做。”

您不需要“更好的暴露过滤器”来执行此操作。您需要使用分组过滤器。

*   单击向访问者公开此过滤器
*   要公开的过滤器类型：分组过滤器
*   勾选“可选”
*   检查“小部件类型：收音机”
*   勾选“允许多项选择”
*   如果需要，删除/清空“标签”
*   在底部，您将有几行，您可以根据需要设置每一行。如果您只想要一个，请删除除一个以外的所有内容
*   单击应用

这个答案很晚。但我希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T18:17:59.893

您会假设 Views 会开箱即用地执行此操作。它没有。使用更好的暴露过滤器模块-> [http://drupal.org/project/better_exposed_filters](http://drupal.org/project/better_exposed_filters)

它甚至具有嵌套的复选框/单选按钮，用于具有层次结构的分类。

这是一些特定于您要执行的操作的文档...

“复选框/单选按钮：此选项适用于任何选项数量有限的过滤器。勾选强制单个选项以使用单选按钮，取消勾选复选框。

嵌套复选框/单选按钮：虽然此选项显示常规复选框选项显示的任何过滤器，但它实际上仅用于具有层次结构的分类过滤器。如果您使用的分类过滤器将选择类型设置为下拉并勾选在下拉列表中显示层次结构，则这些过滤器将呈现为嵌套的无序列表。勾选强制单一选项以使用嵌套单选按钮”

# android - 致命异常： NetworkOnMainThread 异常之后的 main

> ID：14733193
> 
> 赞同：-2
> 
> 时间：2013-02-06T15:55:07.163
> 
> 标签：android

我有一个应用程序，它在提供电话号码和密码后连接到 .NET 服务以获取 id。ID 是在服务器端创建的。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    Settings.getSettings(this);

    sqlHelper = SqlHelper.getSqlHelper(this);

    dialog = ProgressDialog.show(SplashScreen.this, "Connecting to server.. ", "Please wait for a few seconds...", true);

    Thread splashThread = new Thread()  
    {
        @Override
        public void run() {
            try 
            {
                if (SqlHelper.checkDataBase(SplashScreen.this) == true)
                {
                    uploadData();

                }
            } 
            catch (Exception e) 
            {
                Log.e("Error! ", " Data could not be uploaded at the moment");
            } 
            finally 
            {
                runOnUiThread(changeMessage);
                finish();
                Intent i = new Intent();
                i.setClassName("show.android.fife", "show.android.fife.Monitor");
                startActivity(i);
                overridePendingTransition(R.anim.infromright, R.anim.outtoleft);
                dialog.dismiss();
                SplashScreen.this.finish();
            }
        }
    };
    splashThread.start();
} 
```

uploadData() 方法如下：

```
public void uploadData()
{
    int userId = this.getUserId();
    if(userId != 0 || userId != -1)//user setup
    {
        String wsResponse = "";
        try
        {
            wsResponse = WebServiceUtils.callWebService(encryptData(
                            this.getUnsubmittedQuestionnaires(this.csrUnsubmittedQuestionnaires())), 
                                Integer.toString(userId), "insertAnswers", this);

            wsResponse = WebServiceUtils.callWebService(
                    encryptData(this.getUnsubmittedPEF(crsUnsubmittedPEF())), 
                    Integer.toString(userId), "insertPEF", this);

            if(wsResponse=="Thanks, data has been submitted")
            {
                this.updateDbSetAllSent();
            }
            currentStatus = COMPLETE;
        }
        catch(Exception e)
        {
            currentStatus = FAILED;
        }
    }
} 
```

我收到以下错误。我知道有一些类似的问题，但无法解决我的错误。

* * *

LogCat 下面：

```
02-06 15:00:31.281: W/Settings(6522): Setting http_proxy has moved from android.provider.Settings.System to android.provider.Settings.Secure, value is unchanged.
02-06 15:00:45.226: W/System.err(6522): android.os.NetworkOnMainThreadException
02-06 15:00:45.226: W/System.err(6522):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
02-06 15:00:45.226: W/System.err(6522):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
02-06 15:00:45.226: W/System.err(6522):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
02-06 15:00:45.231: W/System.err(6522):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
02-06 15:00:45.231: W/System.err(6522):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
02-06 15:00:45.231: W/System.err(6522):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
02-06 15:00:45.236: W/System.err(6522):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
02-06 15:00:45.236: W/System.err(6522):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
02-06 15:00:45.241: W/System.err(6522):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
02-06 15:00:45.241: W/System.err(6522):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
02-06 15:00:45.241: W/System.err(6522):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
02-06 15:00:45.246: W/System.err(6522):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
02-06 15:00:45.246: W/System.err(6522):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
02-06 15:00:45.251: W/System.err(6522):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
02-06 15:00:45.251: W/System.err(6522):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
02-06 15:00:45.251: W/System.err(6522):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
02-06 15:00:45.256: W/System.err(6522):     at libcore.net.http.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:280)
02-06 15:00:45.256: W/System.err(6522):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:109)
02-06 15:00:45.256: W/System.err(6522):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:157)
02-06 15:00:45.261: W/System.err(6522):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
02-06 15:00:45.261: W/System.err(6522):     at show.android.fife.WebServiceUtils.callGetIdWebService(WebServiceUtils.java:88)
02-06 15:00:45.266: W/System.err(6522):     at show.android.fife.WebServiceSetupActivity.getId(WebServiceSetupActivity.java:73)
02-06 15:00:45.266: W/System.err(6522):     at show.android.fife.WebServiceSetupActivity.access$0(WebServiceSetupActivity.java:71)
02-06 15:00:45.271: W/System.err(6522):     at show.android.fife.WebServiceSetupActivity$1.onClick(WebServiceSetupActivity.java:66)
02-06 15:00:45.276: W/System.err(6522):     at android.view.View.performClick(View.java:3627)
02-06 15:00:45.276: W/System.err(6522):     at android.view.View$PerformClick.run(View.java:14329)
02-06 15:00:45.276: W/System.err(6522):     at android.os.Handler.handleCallback(Handler.java:605)
02-06 15:00:45.281: W/System.err(6522):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 15:00:45.281: W/System.err(6522):     at android.os.Looper.loop(Looper.java:137)
02-06 15:00:45.286: W/System.err(6522):     at android.app.ActivityThread.main(ActivityThread.java:4511)
02-06 15:00:45.286: W/System.err(6522):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 15:00:45.291: W/System.err(6522):     at java.lang.reflect.Method.invoke(Method.java:511)
02-06 15:00:45.291: W/System.err(6522):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-06 15:00:45.291: W/System.err(6522):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-06 15:00:45.296: W/System.err(6522):     at dalvik.system.NativeStart.main(Native Method)
02-06 15:00:45.296: D/AndroidRuntime(6522): Shutting down VM
02-06 15:00:45.296: W/dalvikvm(6522):       threadid=1: thread exiting with uncaught exception (group=0x40c651f8)
02-06 15:00:45.311: E/AndroidRuntime(6522): FATAL EXCEPTION: main
02-06 15:00:45.311: E/AndroidRuntime(6522): java.lang.NullPointerException
02-06 15:00:45.311: E/AndroidRuntime(6522):     at show.android.fife.WebServiceSetupActivity.getId(WebServiceSetupActivity.java:73)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at show.android.fife.WebServiceSetupActivity.access$0(WebServiceSetupActivity.java:71)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at show.android.fife.WebServiceSetupActivity$1.onClick(WebServiceSetupActivity.java:66)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.view.View.performClick(View.java:3627)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.view.View$PerformClick.run(View.java:14329)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.os.Handler.handleCallback(Handler.java:605)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.os.Looper.loop(Looper.java:137)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at android.app.ActivityThread.main(ActivityThread.java:4511)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at java.lang.reflect.Method.invoke(Method.java:511)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-06 15:00:45.311: E/AndroidRuntime(6522):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:03:38.143

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

请参阅[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

在所有关闭网络连接中使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:16:12.047

从**honeycomb** android开始不允许在主线程上进行网络操作，因此您会遇到异常。将所有与网络相关的操作移至单独的线程。有几个选项，如 AsyncTask（这适用于简短的后台任务）、Executor、Handler 等，网上很容易找到教程。尝试自己实现，如果您再次遇到任何错误，请在此处发布。祝你好运！

# video - 隧道 OpenMax 用于视频解码到视频编码组件

> ID：14733197
> 
> 赞同：3
> 
> 时间：2013-02-06T15:55:15.840
> 
> 标签：video, decode, h.264, raspberry-pi, openmax

有谁知道如何在 Raspberry Pi 上使用 video_decode 和 video_encode OpenMax 组件设置隧道？以及如何正确设置输入和输出端口的属性？ [http://home.nouwen.name/RaspberryPi/documentation/ilcomponents/video_encode.html（130、131、200、201](http://home.nouwen.name/RaspberryPi/documentation/ilcomponents/video_encode.html) ）

我的代码成功解码并在屏幕上渲染帧，但是在我添加 video_encoder 并设置隧道 video_decode:131 -> video_encode:200 之后，我收到错误：

```
-5: the data format was not acceptable to the sink 
```

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>
#include "bcm_host.h"
#include "ilclient.h"

#include "libavformat/avformat.h"
#include "libavutil/avutil.h"
#include "libavcodec/avcodec.h"
#include "libavutil/mathematics.h"
#include <error.h>

#define WIDTH     1920//736//640//320//1280//
#define HEIGHT    1080//1088//400//368//((WIDTH*9)/16)//720//
#define PITCH     ((WIDTH+31)&~31)
#define HEIGHT16  ((HEIGHT+15)&~15)
#define SIZE      ((WIDTH * HEIGHT16 * 3)/2)//(WIDTH*HEIGHT*12/8)//

//http://fossies.org/dox/xbmc-12.0/DVDClock_8h_source.html
#define DVD_NOPTS_VALUE (-1LL<<52) // should be possible to represent in both double and int64_t

static inline OMX_TICKS ToOMXTime(int64_t pts)
{
  OMX_TICKS ticks;
  ticks.nLowPart = pts;
  ticks.nHighPart = pts >> 32;
  return ticks;
}

static AVBitStreamFilterContext *dofiltertest(AVPacket *rp)
{
    AVBitStreamFilterContext *bsfc;
    bsfc = NULL;

    if (!(rp->data[0] == 0x00 && rp->data[1] == 0x00 &&
        rp->data[2] == 0x00 && rp->data[3] == 0x01)) {
        bsfc = av_bitstream_filter_init("h264_mp4toannexb");
        if (!bsfc) {
            printf("Failed to open filter.  This is bad.\n");
        } else {
            printf("Have a filter at %p\n", bsfc);
        }
    } else
        printf("No need for a filter.\n");

    return bsfc;
}

static AVPacket filter(AVBitStreamFilterContext *bsfc,AVFormatContext *ctx, AVPacket *rp,int *video_stream_index)
{
if(ctx==NULL){printf("!!! ctx is NULL, filed set filter!\n");exit(-1);}
    //AVBitStreamFilterContext *bsfc=dofiltertest(rp);
    AVPacket *p;
    AVPacket *fp;
    int rc;
if(bsfc){
    fp = calloc(sizeof(AVPacket), 1);

    if (bsfc) {
        rc = av_bitstream_filter_filter(bsfc,
                ctx->streams[*video_stream_index]->codec,
                NULL, &(fp->data), &(fp->size),
                rp->data, rp->size,
                rp->flags & AV_PKT_FLAG_KEY);
        if (rc > 0) {
            av_free_packet(rp);
            fp->destruct = av_destruct_packet;
            p = fp;
        } else {
            printf("Failed to filter frame: "
                "%d (%x)\n", rc, rc);
            p = rp;
        }
    } else
        p = rp;

    return *p;
}//if
else{return *rp;}
}

static int getInputHendle(char *filename,AVFormatContext *pFmtCtx,AVCodecContext pCodCtx,int *video_stream_index){
printf("Start getInputHandle %s\n", filename);
     AVFormatContext *pFormatCtx;
    // Open video file
    if(av_open_input_file(&pFormatCtx, filename, NULL, 0, NULL)!=0){printf("Couldn't open file\n");return -1;}
    // Retrieve stream information
    if(av_find_stream_info(pFormatCtx)<0){printf("Couldn't find stream information\n");return -1;}
    // print file file info
    dump_format(pFormatCtx, 0, filename,false);
//memcpy(pFmtCtx,pFormatCtx,sizeof(pFormatCtx));
    //find video stream
    int i;
     *video_stream_index=-1;
    AVCodecContext *pCodecCtx;
    // Find the first video stream
    for(i=0; i<pFormatCtx->nb_streams; i++){if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO){*video_stream_index=i;break;}}
    if(*video_stream_index==-1){printf("Didn't find a video stream\n");return -1;}
    // Get a pointer to the codec context for the video stream
    pCodecCtx=pFormatCtx->streams[*video_stream_index]->codec;

printf("\n=>My info about video: \n Bitrate: %d\n Frame width: %d\n Frame height: %d\n Frame rate: %d:%d\n Aspect ratio: %d:%d\n ",pCodecCtx->bit_rate,pCodecCtx->width,pCodecCtx->height,pCodecCtx->time_base.num,pCodecCtx->time_base.den,pCodecCtx->sample_aspect_ratio.num,pCodecCtx->sample_aspect_ratio.den);

FILE *outFile=fopen("encoded.h264","w");

   OMX_ERRORTYPE r;
   OMX_VIDEO_PARAM_PORTFORMATTYPE in_dec_format,out_enc_format,out_dec_Format;
   OMX_PARAM_PORTDEFINITIONTYPE in_enc_format;
   COMPONENT_T *video_decode = NULL,*video_encode=NULL,*video_resize=NULL, *video_render = NULL;
   COMPONENT_T *list[5];
   TUNNEL_T tunnel[4];
   ILCLIENT_T *client;
   int status = 0;

   memset(list, 0, sizeof(list));
   memset(tunnel, 0, sizeof(tunnel));

   if((client = ilclient_init()) == NULL){printf("=>Can't init ilclient_init()!\n");exit(-1);}
   if(OMX_Init() != OMX_ErrorNone){ilclient_destroy(client);printf("=>Can't init omx!\n");exit(-1);}

   // create video_decode
   if(ilclient_create_component(client, &video_decode, "video_decode", ILCLIENT_DISABLE_ALL_PORTS | ILCLIENT_ENABLE_INPUT_BUFFERS) != 0)
      status = -14;
   list[0] = video_decode;

   // create resize
   if(ilclient_create_component(client, &video_resize, "resize",ILCLIENT_DISABLE_ALL_PORTS) != 0){status = -14; printf("=> ilclient_create_component() for video_resize failed!!\n");exit(1);}
   list[1] = video_resize;

   // create video_encode
   if(ilclient_create_component(client, &video_encode, "video_encode",ILCLIENT_DISABLE_ALL_PORTS | ILCLIENT_ENABLE_OUTPUT_BUFFERS) != 0){status = -14; printf("=> ilclient_create_component() for video_encode failed!!\n");exit(1);}
   list[2] = video_encode;

   // create video_render
   if(status == 0 && ilclient_create_component(client, &video_render, "video_render", ILCLIENT_DISABLE_ALL_PORTS) != 0)
      status = -14;
   list[3] = video_render;

//   set_tunnel(tunnel, video_decode, 131, video_render, 90);
   set_tunnel(tunnel, video_decode, 131, video_encode, 200);

   if(status == 0){
      ilclient_change_component_state(video_decode, OMX_StateIdle);
     ilclient_change_component_state(video_encode, OMX_StateIdle);
                   }//if status

   //input dec format
   memset(&in_dec_format, 0, sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE));
   in_dec_format.nSize = sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE);
   in_dec_format.nVersion.nVersion = OMX_VERSION;
   in_dec_format.nPortIndex = 130;
   in_dec_format.eCompressionFormat = OMX_VIDEO_CodingAVC;
   r = OMX_SetParameter(ILC_GET_HANDLE(video_decode), OMX_IndexParamVideoPortFormat, &in_dec_format);
   if ( r!= OMX_ErrorNone){printf("%s:%d: OMX_SetParameter() for video_decode port 130 failed with 0x%08x!\n",__FUNCTION__, __LINE__, r);exit(-1);}

   //output dec format
   memset(&out_dec_Format, 0, sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE));
   out_dec_Format.nSize = sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE);
   out_dec_Format.nVersion.nVersion = OMX_VERSION;
   out_dec_Format.nPortIndex = 131;
  // out_dec_Format.eColorFormat = OMX_COLOR_FormatYUV420PackedPlanar;
  //if (OMX_GetParameter(ILC_GET_HANDLE(video_decode), OMX_IndexParamPortDefinition, &out_dec_Format) != OMX_ErrorNone) {printf("%s:%d: OMX_GetParameter() for video_encode port 131 failed!\n", __FUNCTION__, __LINE__);status=-1;exit(-1);}

   if(OMX_SetParameter(ILC_GET_HANDLE(video_decode), OMX_IndexParamVideoPortFormat, &out_dec_Format)!=OMX_ErrorNone){printf("=> Failed set  output port formats of buffers for port (video_decode) : 131 \n");status=-1;exit(-1);}

//   //input video_encode
   memset(&in_enc_format, 0, sizeof(OMX_PARAM_PORTDEFINITIONTYPE));
   in_enc_format.nSize = sizeof(OMX_PARAM_PORTDEFINITIONTYPE);
   in_enc_format.nVersion.nVersion = OMX_VERSION;
   in_enc_format.nPortIndex = 200;
   if (OMX_GetParameter(ILC_GET_HANDLE(video_encode), OMX_IndexParamPortDefinition,&in_enc_format) != OMX_ErrorNone) {printf("%s:%d: OMX_GetParameter() for video_encode port 200 failed!\n", __FUNCTION__, __LINE__);exit(1);}
   // Port 200: in 1/1 115200 16 enabled,not pop.,not cont. 320x240 320x240 @1966080 20
   in_enc_format.format.video.nFrameWidth = WIDTH;
   in_enc_format.format.video.nFrameHeight = HEIGHT;
   in_enc_format.format.video.xFramerate = 30 << 16;
   in_enc_format.format.video.nSliceHeight = in_enc_format.format.video.nFrameHeight;
   in_enc_format.format.video.nStride = in_enc_format.format.video.nFrameWidth;
   in_enc_format.format.video.eColorFormat = OMX_COLOR_FormatYUV420PackedPlanar;
   if (( r = OMX_SetParameter(ILC_GET_HANDLE(video_encode),OMX_IndexParamPortDefinition, &in_enc_format)) != OMX_ErrorNone){printf("%s:%d: OMX_SetParameter() for video_encode port 200 failed with %x!\n", __FUNCTION__, __LINE__, r);exit(1);}

   //output video_encode
   memset(&out_enc_format, 0, sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE));
   out_enc_format.nSize = sizeof(OMX_VIDEO_PARAM_PORTFORMATTYPE);
   out_enc_format.nVersion.nVersion = OMX_VERSION;
   out_enc_format.nPortIndex = 201;
   out_enc_format.eCompressionFormat = OMX_VIDEO_CodingAVC;
   if ((r = OMX_SetParameter(ILC_GET_HANDLE(video_encode),OMX_IndexParamVideoPortFormat, &out_enc_format)) != OMX_ErrorNone){printf("%s:%d: OMX_SetParameter() for video_encode port 201 failed with %x!\n",__FUNCTION__, __LINE__, r);exit(1);}

   if(status != 0 &&
      ilclient_enable_port_buffers(video_decode, 130, NULL, NULL, NULL) != 0 &&
      ilclient_enable_port_buffers(video_encode, 201, NULL, NULL, NULL) != 0){printf("Failed ilclient_enable_port_buffers\n");exit(-1);}

      OMX_BUFFERHEADERTYPE *buf,*out;

    AVPacket *p_packet;
    AVBitStreamFilterContext *p_btsf;
    p_packet = malloc(sizeof(AVPacket));
    //int video_index=0;
    int index=0;
    int pstatus=0;
    int first_frame=true;

    //int t_error=ilclient_setup_tunnel(tunnel, 0, 0);
    //if( t_error!= 0){status = -7;printf("=>Can't setup tunnel, error: %d!!!\n",t_error);exit(status);}

           ilclient_change_component_state(video_decode, OMX_StateExecuting);
           //ilclient_change_component_state(video_render, OMX_StateExecuting);
           ilclient_change_component_state(video_encode, OMX_StateExecuting);

//int result = m_pSubtitleCodec->Decode(pkt->data, pkt->size, pkt->pts, pkt->duration);

      do{  
    printf("###before DO!\n");

pstatus=av_read_frame(pFormatCtx,p_packet);

     if(first_frame==true){
p_btsf= dofiltertest(p_packet);
first_frame=false;
}//if

AVPacket packet=filter(p_btsf,pFormatCtx,p_packet,video_stream_index);

//only for video
if(packet.stream_index==*video_stream_index){
printf("=>Read frame, status: %d, index: %d, stream index: %d, packet duration: %d, size: %d\n",pstatus,index++,packet.stream_index,packet.duration,packet.size);

int psize=packet.size;
int preaded=0;
//double pts=packet.duration;

while(psize!=0){
    printf("while\n");
     buf = ilclient_get_input_buffer(video_decode, 130, 1);
     buf->nFilledLen = (psize > buf->nAllocLen) ? buf->nAllocLen : psize;
    memcpy(buf->pBuffer, packet.data+preaded,buf->nFilledLen);
    psize-=buf->nFilledLen;
    preaded+=buf->nFilledLen;

     if(psize == 0){buf->nFlags|=OMX_BUFFERFLAG_ENDOFFRAME;printf("#######################################OMX_BUFFERFLAG_ENDOFFRAME\n");}

printf("=>BUFF size: %d\n",(int)buf->nFilledLen);
r=OMX_EmptyThisBuffer(ILC_GET_HANDLE(video_decode), buf);
if(pstatus==0){if(r!= OMX_ErrorNone){status = -6;printf("Failed, OMX_EmptyThisBuffer, error: 0x%08x , buf allocate: %d, buf lenght: %d \n", r,(int)buf->nAllocLen,(int)buf->nFilledLen);break;}}

}//while psize
av_free_packet(&packet);

//################################################################### encode
//if(psize == 0){
    printf("###Start encoder..\n");

out = ilclient_get_output_buffer(video_encode, 201, 1);

r = OMX_FillThisBuffer(ILC_GET_HANDLE(video_encode), out);
if (r != OMX_ErrorNone) {printf("### Error filling buffer: %x\n", r);}

printf("############## Encoded buf, size: %d\n",(int)out->nFilledLen);

if (out != NULL) {
   if (out->nFlags & OMX_BUFFERFLAG_CODECCONFIG) {
      int i;
      for (i = 0; i < out->nFilledLen; i++)
     printf("%x ", out->pBuffer[i]);
      printf("\n");
   }

  size_t len = fwrite(out->pBuffer, 1, out->nFilledLen, outFile);
   if (len != out->nFilledLen) {printf("### fwrite: Error emptying encoder buffer: %d!\n", r);}
   else {printf("### Writing encoded frame, size: %d\n",(int)len);}
   out->nFilledLen = 0;
                }//out!=NULL
else {
   printf("### Not getting encode buf !\n");
}
//}//if psize

   }//if index
}//do
while(pstatus==0);

printf("=>After while! \n");

      // wait for EOS from render
/*      ilclient_wait_for_event(video_render, OMX_EventBufferFlag, 90, 0, OMX_BUFFERFLAG_EOS, 0,*/
/*                              ILCLIENT_BUFFER_FLAG_EOS, 10);*/

      // need to flush the renderer to allow video_decode to disable its input port
      ilclient_flush_tunnels(tunnel, 0);

      ilclient_disable_port_buffers(video_decode, 130, NULL, NULL, NULL);

   ilclient_disable_tunnel(tunnel);
   ilclient_teardown_tunnels(tunnel);

   ilclient_state_transition(list, OMX_StateIdle);
   ilclient_state_transition(list, OMX_StateLoaded);

   ilclient_cleanup_components(list);

   OMX_Deinit();

   ilclient_destroy(client);
   return status;
}

int main (int argc, char **argv)
{
   if (argc < 2) {
      printf("Usage: %s <filename>\n", argv[0]);
      exit(1);
   }
av_register_all();//  initialize libavformat/libavcodec: 
   bcm_host_init();
    AVFormatContext *in_formatCtx;
    AVCodecContext in_codecCtx;
        //AVPacket *packet;
    int video_stream_index;
    //get input codec params object
    if(getInputHendle(argv[1],in_formatCtx,in_codecCtx,&video_stream_index)==-1){exit(-1);}
    if(&in_formatCtx==NULL){printf("before formatCtx is NULL! \n");}

//printf("DATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA: H= %d",in_formatCtx.streams[video_stream_index]->codec->height);

//video_decode_test(&in_formatCtx,video_stream_index);

 return 0;
} 
```

# objective-c - Xcode 未完成“验证 *.app”步骤的归档

> ID：14733198
> 
> 赞同：1
> 
> 时间：2013-02-06T15:55:20.750
> 
> 标签：objective-c, xcode, validation, archive

所以我正在运行 xcode 4.6 并尝试为 iPad 应用程序制作发布存档。不幸的是，当我点击 Product>Archive 时，XCode 不会完成存档。当我进入日志时，它一直通过代码签名步骤，只是挂在“validate Finger-Spelling.app”（这是一个 ASL 应用程序）

它之前有同样的问题，但是当我更新到 xcode 4.6 时它修复了它。老实说，我可能只是忘记了一些简单的事情，所以我在这里是它所坚持的步骤的构建日志。

它停留在的构建日志步骤：

```
Validate /Users/Michael/Library/Developer/Xcode/DerivedData/Finger-Spelling-dfbrlachhucwlcamnxjofkjuekbi/Build/Intermediates/ArchiveIntermediates/Finger-Spelling/InstallationBuildProductsLocation/Applications/Finger-Spelling.app
    cd "/Users/Michael/Documents/Xcode Projects/Finger-Spelling"
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/Michael/Library/Developer/Xcode/DerivedData/Finger-Spelling-dfbrlachhucwlcamnxjofkjuekbi/Build/Intermediates/ArchiveIntermediates/Finger-Spelling/InstallationBuildProductsLocation/Applications/Finger-Spelling.app 
```

它也可能是我的 Bundle ID，即“com.MichaelB.Finger-Spelling”，但这与我的 info.plist 中的所有内容相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T23:07:10.123

真的是在黑暗中刺伤，但是当我在这里遇到问题时，是我输入的版本号不正确。

# mysql - MySQL 无法创建表 [errno: 150]

> ID：14733200
> 
> 赞同：0
> 
> 时间：2013-02-06T15:55:23.477
> 
> 标签：mysql, sql

在以下脚本中出现上述错误：

```
DROP TABLE IF EXISTS `incident`;

SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `incident` (
  `incident_id` int(11) NOT NULL auto_increment,
  `patient_id` int(11) default NULL,
  `history_id` int(11) default NULL,
  `incident_date` datetime default NULL,
  `incidentname_id` int(11) default NULL,
  `incident_type_id` int(11) default NULL,
  `pop_first_symptom` int(11) default NULL,
  `first_symptom_date` datetime default NULL,
  `similar_symptom_date` datetime default NULL,
  `first_consultation_date` datetime default NULL,
  `accident` int(1) default NULL,
  `accident_date` datetime default NULL,
  `pop_accident_state` int(11) default NULL,
  `pop_condition_related_to` int(11) default NULL,
  `flag_prothesis` char(1) collate utf8_unicode_ci NOT NULL default '0',
  `flag_initial_placement` char(1) collate utf8_unicode_ci NOT NULL default '0',
  `flag_orthodontics` char(1) collate utf8_unicode_ci NOT NULL default '0',
  `flag_occupational_illness` char(1) collate utf8_unicode_ci NOT NULL default '0',
  `box19` varchar(80) collate utf8_unicode_ci NOT NULL default '',
  `color` varchar(8) collate utf8_unicode_ci NOT NULL default 'ffffff00',
  `referrals_id` int(11) default NULL,
  `referral_date` datetime default NULL,
  `facility_id` int(11) default NULL,
  `attorney_id` int(11) default NULL,
  `attorney_notes` text collate utf8_unicode_ci,
  `attorney_report_sent` date default NULL,
  `attorney_deposition_date` date default NULL,
  `attorney_trial_date` date default NULL,
  `attorney_notice_filing` char(1) collate utf8_unicode_ci default NULL,
  `attorney_final_settlement` date default NULL,
  `effective_date` datetime default NULL,
  `termination_date` datetime default NULL,
  `date` datetime default NULL,
  `pop_branch` int(11) default NULL,
  `pop_status` int(1) default NULL,
  `pop_eligibility` int(1) default NULL,
  `partial_begin_date` datetime default NULL,
  `partial_end_date` datetime default NULL,
  `last_work_date` datetime default NULL,
  `partial_return_to_work_date` datetime default NULL,
  `total_begin_date` datetime default NULL,
  `total_end_date` datetime default NULL,
  `last_xray_date` datetime default NULL,
  `last_seen_date` date default NULL,
  `assumed_date` datetime default NULL,
  `relinquished_date` datetime default NULL,
  `radiographs` varchar(30) collate utf8_unicode_ci NOT NULL default '',
  `oral_images` varchar(30) collate utf8_unicode_ci NOT NULL default '',
  `models` varchar(30) collate utf8_unicode_ci NOT NULL default '',
  `date_appliance_placed` date default NULL,
  `date_prior_placement` date default NULL,
  `paymentSourceCode` varchar(10) collate utf8_unicode_ci NOT NULL default '',
  `locatorCode` varchar(10) collate utf8_unicode_ci NOT NULL default '',
  `SAExceptionCode` varchar(10) collate utf8_unicode_ci NOT NULL default '',
  `flag_expanded` int(1) default NULL,
  `flag_archived` int(1) default NULL,
  `cda_reason_code` int(11) default NULL,
  `is_extraction` int(11) default '0',
  `extraction_tooth` varchar(10) collate utf8_unicode_ci default NULL,
  `initial_placement_date` date default NULL,
  `initial_placement_location` int(11) default '0',
  `prosthesis_material` int(11) default '0',
  PRIMARY KEY  (`incident_id`),
  KEY `patient_id_key` (`patient_id`),
  CONSTRAINT `incident_ibfk_1` FOREIGN KEY (`patient_id`) REFERENCES `patient` (`patient_id`)
) ENGINE=InnoDB AUTO_INCREMENT=9854 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
SET character_set_client = @saved_cs_client; 
```

这是给我同样错误的病人表：

```
 DROP TABLE IF EXISTS `patient`;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8;
CREATE TABLE `patient` (
  `patient_id` int(11) NOT NULL auto_increment,
  `history_id` int(11) default NULL,
  `person_id` int(11) default NULL,
  `account_id` int(11) default NULL,
  `display_id` varchar(10) collate utf8_unicode_ci default NULL,
  `chart_num` varchar(10) collate utf8_unicode_ci default NULL,
  `bridge_num` varchar(10) collate utf8_unicode_ci default NULL,
  `provider_id` int(11) default NULL,
  `office_id` int(11) default NULL,
  `feeschedule_id` int(11) default NULL,
  `pop_marital_status` int(11) default NULL,
  `pop_employment` int(11) default NULL,
  `new_patient_date` date default NULL,
  `primary_ins_id` int(11) default NULL,
  `primary_ins_type` char(1) collate utf8_unicode_ci default NULL,
  `insured_id_number` varchar(30) collate utf8_unicode_ci default NULL,
  `flag_special_insurance` char(1) collate utf8_unicode_ci default '0',
  `flag_family_planning` char(1) collate utf8_unicode_ci default '0',
  `flag_epstd` char(1) collate utf8_unicode_ci default '0',
  `pop_relation_to_primary` int(11) default NULL,
  `pop_relation_to_secondary` int(11) default NULL,
  `pop_hipaa_release` int(11) default NULL,
  `hipaa_release_date` date default NULL,
  `patientNotes` text collate utf8_unicode_ci,
  `autoremind_notification_type_id` int(11) NOT NULL default '0',
  `ethnicity_id` int(11) default NULL,
  `patient_status` int(1) NOT NULL default '0',
  `created_by_module` char(1) collate utf8_unicode_ci NOT NULL default 'P',
  `pop_patient_exception_code` int(11) default '0',
  `pop_native_language` int(11) default '0',
  `school_name` varchar(30) collate utf8_unicode_ci default NULL,
  `graduation_date` date default NULL,
  `hygienist_id` int(11) default NULL,
  `school_address_id` int(11) default NULL,
  `language_id` int(11) default NULL,
  PRIMARY KEY  (`patient_id`),
  KEY `account_id_key` (`account_id`),
  KEY `person_id_key` (`person_id`),
  KEY `patient_status_index` (`patient_status`),
  KEY `person_id_index` (`person_id`),
  KEY `account_id_index` (`account_id`),
  CONSTRAINT `patient_ibfk_1` FOREIGN KEY (`account_id`) REFERENCES `account` (`account_id`),
  CONSTRAINT `patient_ibfk_2` FOREIGN KEY (`person_id`) REFERENCES `person` (`person_id`)
) ENGINE=InnoDB AUTO_INCREMENT=9855 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
SET character_set_client = @saved_cs_client; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:59:32.397

我假设您的外键`patient_id`不是`NULL`. 它必须与您引用的数据类型匹配。

```
`patient_id` int(11) default NULL 
```

# ios - 点击按钮倒计时到 0

> ID：14733204
> 
> 赞同：-4
> 
> 时间：2013-02-06T15:55:34.857
> 
> 标签：ios, objective-c, uibutton

我想在 TAMAGO 应用程序中添加一个功能。当您单击按钮时，标签将更改数字。如果它从 100 开始，你点击鸡蛋，“100”变成“99”，再次点击它会变成“98”。

我的代码是：

`-(IBAction)buttonpress:(id)sender {

```
if (button.highlighted) {
    YES;

    label.text = @"999";

    if (button.highlighted) {
        NO;

        label.text = @"998";
    }
}` 
```

我试图重复这个过程。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:39:55.917

这就是你想要的：

```
- (IBAction)buttonPress:(UIButton *)sender {
    self.myTextLabel.text = [NSString stringWithFormat:@"%d", [self.myTextLabel.text intValue]-1]
} 
```

在这种情况下，尽管按钮在按下时必须具有数值。如果需要，您可以进一步检查以确保它是一个数字。如果您需要任何进一步的帮助，请告诉我。

# timestamp - 如何为签名目的创建时间戳服务器

> ID：14733206
> 
> 赞同：2
> 
> 时间：2013-02-06T15:55:37.213
> 
> 标签：timestamp, certificate, digital-signature

我想拥有自己的时间戳服务器，以便在二进制文件的签名过程中使用它。

我找到了链接： http: [//owcapage.wordpress.com/linux-time-stamp-server/](http://owcapage.wordpress.com/linux-time-stamp-server/)

但是我无法工作。也许是因为我无法到达：www.opentsa.org

有其他选择吗？在linux，windows上，没关系...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-05T11:50:51.043

**您可以使用openssl ts** [https://www.openssl.org/docs/manmaster/man1/ts.html](https://www.openssl.org/docs/manmaster/man1/ts.html)创建时间戳授权服务器

# c# - 如何在 CodeBehind 中的 WebControl 之后立即附加 WebControl

> ID：14733223
> 
> 赞同：1
> 
> 时间：2013-02-06T15:56:16.450
> 
> 标签：c#

现在我已经使用 MVC 有一段时间了，我决定将一些经典的 C# .Net 加入到我的 8 曲目中，并遇到了以下问题：

我的 aspx 页面上有一个 TextBox WebControl，在后面的代码中我想简单地在它之后附加一个 LiteralControl。

这不起作用：

```
TextBoxAge.Controls.Add(new LiteralControl("Invalid Age.")); 
```

这有效，但一直在底部：

```
TextBoxAge.Controls.Parent.Add(new LiteralControl("Invalid Age.")); 
```

你能帮助我吗！？

例如 HTML 将显示：

```
<div>
<input name="TextBoxAge" type="text" id="TextBoxAge" class="Age">
Invalid Age.
</div> 
```

这应该是纯动态的并且相对于手头的控制。

**解决方案：**

```
TextBoxAge.Parent.Controls.AddAt(TextBoxAge.Parent.Controls.IndexOf(T‌​extBoxAge),new LiteralControl("<span>Invalid Age.</span>")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:01:33.593

最好的方法是使用[PlaceHolder](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder%28v=vs.110%29.aspx)

> 来自 MSDN：使用 PlaceHolder 控件作为容器来存储动态添加到网页的服务器控件。

```
PlaceHolder.Controls.Add(new LiteralControl("Invalid Age.")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:08:28.280

也许你可以尝试这样的事情。（不记得 AddAt 是否会替换指定索引处的控件）

```
var textBoxAgeIndex = TextBoxAge.Parent.Controls.IndexOf(TextBoxAge);

TextBoxAge.Parent.Controls.AddAt(textBoxAgeIndex +1, new LiteralControl("Invalid Age.")); 
```

希望这会有所帮助

# python - Python：创建时出现 .pyc 扩展错误

> ID：14733225
> 
> 赞同：-1
> 
> 时间：2013-02-06T15:56:17.573
> 
> 标签：python, pyc

这是一个 Python 模块，它为多项式求值器提供了便利。它实际上只不过是一个文件中的一堆 Python 代码（主要是函数定义）。模块的名称是文件的名称，加上 .py 后缀。文件的文本中没有给出模块名称，所以我可以通过简单地重命名文件来重命名模块。

使用模块后，Python 将创建一个具有相同名称和扩展名**.pyc 的文件。**这是模块的字节码。Python 根据需要创建或重新创建这些，所以我真的不需要对它们做任何事情。

**问题是：Python 不会创建 .pyc 扩展名。为什么？**

```
# This module contains operations to manipulate polynomials.
#

# Need some string services, and some standard system services.
import string, sys

#
# Function to evaluate a polynomial at x.  The polynomial is given
# as a list of coefficients, from the greatest to the least.  It returns
# the value of the polynomial at x.
def eval(x, poly):
'''Evaluate at x the polynomial with coefficients given in poly.
The value p(x) is returned.'''

sum = 0
while 1:
    sum = sum + poly[0]     # Add the next coef.
    poly = poly[1:]         # Done with that one.
    if not poly: break      # If no more, done entirely.
    sum = sum * x           # Mult by x (each coef gets x right num times)

return sum

def read(prompt = '', file = sys.stdin):
'''Read a line of integers and return the list of integers.'''

# Read a line
if prompt: print prompt,
line = file.readline()
if not line: 
    raise EOFError, 'File ended on attempt to read polynomial.'
line = line[:-1]
if line == 'quit':
    raise EOFError, 'Input quit on attempt to read polynomial.'

# Go through each item on the line, converting each one and adding it
# to retval.
retval = [ ];
for str in string.split(line):
    retval.append(int(str))

return retval

#
# Create a string of the polynomial in sort-of-readable form.
def srep(p):
'''Print the coefficient list as a polynomial.'''

# Get the exponent of first coefficient, plus 1.
exp = len(p)

# Go through the coefs and turn them into terms.
retval = ''
while p:
    # Adjust exponent.  Done here so continue will run it.
    exp = exp - 1

    # Strip first coefficient
    coef = p[0]
    p = p[1:]

    # If zero, leave it out.
    if coef == 0: continue

    # If adding, need a + or -.
    if retval:
        if coef >= 0:
            retval = retval + ' + '
        else:
            coef = -coef
            retval = retval + ' - '

    # Add the coefficient, if needed.
    if coef != 1 or exp == 0:
        retval = retval + str(coef)
        if exp != 0: retval = retval + '*'

    # Put the x, if we need it.
    if exp != 0:
        retval = retval + 'x'
        if exp != 1: retval = retval + '^' + str(exp)

# For zero, say that.
if not retval: retval = '0'

return retval 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:35:18.467

见[这里](http://docs.python.org/release/1.5.1p1/tut/node43.html)：

> 当通过在命令行上给出其名称来运行脚本时，脚本的字节码永远不会写入“.pyc”或“.pyo”文件。因此，可以通过将脚本的大部分代码移至模块并使用导入该模块的小型引导脚本来减少脚本的启动时间。

因此，如果要创建`.pyc`文件，则必须*导入*脚本，而不仅仅是从命令行运行它。例如，你可以做

```
python -c "import myscript" 
```

而不是做

```
python myscript.py 
```

# centos - 无法从 Fedora 16 SSH 到运行 CentOS 6.3 的新计算机

> ID：14733230
> 
> 赞同：0
> 
> 时间：2013-02-06T15:56:33.703
> 
> 标签：centos

我刚刚在一台新计算机上安装了 CentOS 6.3，无法从运行 Fedora 16 的计算机上通过 SSH 连接到它。它们都在同一个网络上。

一些事实： - 我可以从 Fedora 机器上 ping 它。- 我可以在 CentOS 计算机上通过 SSH 连接到 CentOS 计算机。- 我查看了主机允许和拒绝，我已将 selinux 设置为允许，我尝试在 Fedora 计算机上禁用 iptables

我的想法很新鲜...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T23:11:06.293

你有 fail2ban 运行吗？

你有拒绝主机运行吗？

你有允许 TCP 22 的 iptables 吗？

您的 sshd_config 中是否有一行引用“AllowUsers”？（大多数人不这样做，但有些人这样做，如果你这样做，你需要在该行列出你的帐户）

您可以在尝试从第二台机器登录并发现问题的同时在该机器上运行此命令**tail -f /var/log/secure吗？**如果没有，请将该日志的输出粘贴到此处供我评论。

长镜头，但您可以尝试**service sshd restart**并再次尝试看看是否有帮助。继续运行**tail /varlog/messages**并重新启动该守护程序，看看在执行此操作时是否发现任何异常。如果您发现问题很好，如果您没有发现，请在此处发布输出以供我评论。

最后，执行此操作**cp /etc/ssh/sshd_config /etc/ssh/sshd_config.back**然后从另一台机器获取一个众所周知的工作 sshd_config 并将其放在您的顶部，然后再次重新启动守护程序并再试一次。

我的钱是在**/var/log/secure**中看到对我们有帮助的东西。

# php - 获取sql中自动增量列的最大值

> ID：14733232
> 
> 赞同：0
> 
> 时间：2013-02-06T15:56:37.387
> 
> 标签：php, mysql

所以我有这个代码可以上传图像并调整它的大小，并保存两者

```
if(isset($_POST['submit']))
{   

        $sql="SELECT MAX(event_id) AS event_id FROM evenimente";
        //$result=mysql_query($sql);
        $prefix=mysql_query($sql);

        $file=$_FILES['image']['tmp_name'];
        $file2=$_FILES['image']['tmp_name'];

        $image= addslashes(file_get_contents($_FILES['image']['tmp_name']));                                        
        $image_name= addslashes($_FILES['image']['name']);
        //
        $sizes = array();
        $sizes['100'] = 100;

        list(,,$type) = getimagesize($_FILES['image']['tmp_name']);
        $type = image_type_to_extension($type);

        move_uploaded_file($_FILES['image']['tmp_name'], 'images/'.$prefix.$type);

        $t = 'imagecreatefrom'.$type;
        $t = str_replace('.','',$t);
        $img = $t('images/'.$prefix.$type);

        foreach($sizes as $k=>$v)
        {

            $width = imagesx( $img );
            $height = imagesy( $img );

            $new_width = $v;
            $new_height = floor( $height * ( $v / $width ) );

            $tmp_img = imagecreatetruecolor( $new_width, $new_height );
            imagealphablending( $tmp_img, false );
            imagesavealpha( $tmp_img, true );
            imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

            $c = 'image'.$type;
            $c = str_replace('.','',$c);
            $c( $tmp_img, 'images/th/'.$prefix.$type );

        }                                       
        $location="images/" . $prefix.$type;
        $sql="INSERT INTO evenimente (event_data, event_datasf, event_titlu, event_detalii, event_poza) VALUES      ('". $_POST['data'] ."', '". $_POST['datasf'] ."', '". $_POST['titlu'] ."', '". $_POST['detalii'] ."', '$location')  ";
    mysql_query($sql);
    //$prefix =mysql_insert_id();
    include 'include.html';
    echo 'OK!!!<br /> Redirecting';
    echo "<meta http-equiv='refresh' content='1;adauga_eveniment.php'>";

}

                                } 
```

所以代码“有效”......我有这个问题，我需要保存图像`the event_id`。但我无法`$prefix`记住我数据库中的最大 ID，我不知道为什么......希望你能理解。我不能使用`mysql_insert_id();`，因为 id 是在 aql 提交之后生成的，并且我需要在那之前的前缀......并且`MAX`不起作用......我正在使用`event_id`as 主键......

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:01:36.837

你的语法是正确的：`SELECT MAX(event_id) AS event_id FROM evenimente`

问题是您想在 event_id存在于表中*之前知道它。*

建议：

1）“插入”新行

2) “选择”产生的 event_id

3）“更新”行

还：

您正在使用旧的、已弃用的 mysql API。请熟悉其中一个/两个新的 mysqli/PDO API。请考虑使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。它们更高效……它们有助于降低 SQL 注入攻击的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:01:43.063

如果您必须这样做，请尝试

`$sql="SELECT event_id AS event_id FROM evenimente ORDER BY event_id DESC LIMIT 1";`

但请注意，这只会给您上一个事件的 event_id。

# fortran - 将 FORTRAN DEC UNION/MAP 扩展转换为其他任何东西

> ID：14733238
> 
> 赞同：1
> 
> 时间：2013-02-06T15:56:58.517
> 
> 标签：fortran, fortran90, gfortran, fortran77, fortran95

**编辑：Gfortran 6 现在支持这些扩展 :)**

我有一些广泛使用 UNION 和 MAP 的旧 f77 代码。我需要使用不支持这些扩展的 gfortran 编译它。我已经想出了如何转换除这些之外的所有不支持的扩展，我不知所措。我对可能的方法有几个想法，但未能成功实施任何东西。我需要以与当前相同的方式访问现有的 UDT；我可以重新实现 UDT，但它们的接口不能改变。

我所拥有的示例：

```
TYPE TEST
  UNION
    MAP
      INTEGER*4 test1
      INTEGER*4 test2
    END MAP
    MAP
      INTEGER*8 test3
    END MAP
  END UNION
END TYPE 
```

必须通过以下方式访问元素：TEST%test1、TEST%test2、TEST%test3

到目前为止我的想法：

1.  以某种方式替换为 fortran EQUIVALENCE。
2.  在 C/C++ 中定义结构并以某种方式使它们对 FORTRAN 代码可见（怀疑这是可能的）

我想当 UNION 和 MAP 被排除在标准之外时，f77 到 f90/95 一定有很多重构。如果有/被处理过怎么办？

编辑：接受的答案有一个允许内存重叠的解决方法，但就保留 API 而言，这是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:43:21.680

UNION 和 MAP 从来都不是任何 FORTRAN 标准的一部分，它们是供应商扩展。（参见，例如， http: [//fortranwiki.org/fortran/show/Modernizing+Old+Fortran](http://fortranwiki.org/fortran/show/Modernizing+Old+Fortran)）。所以它们并没有真正被排除在 Fortran 90/95 标准之外。它们导致变量在内存中重叠。如果代码确实使用了这个特性，那么你将需要使用`equivalence`. 在不进行转换的情况下在不同类型的变量之间移动数据的首选方法是`transfer`内在方法，但对您而言，您必须确定需要转换的每个地方，而使用`equivalence`它正在隐含地发生。当然，这会使代码更难理解。如果内存覆盖只是为了节省空间并且不使用变量的等价性，那么您可以摆脱这个“功能”。如果代码像您的示例一样，带有小整数，那么我猜想正在使用内存覆盖。如果覆盖是大型数组，则可能是为了节省内存。如果这些声明还创建了新类型，您可以使用用户定义类型，这绝对是 Fortran >=90 的一部分。

如果代码使用不同类型变量的内存等效，这可能是不可移植的，例如，整数和实数的内部表示可能在最初运行此代码的机器和当前机器之间不同。或者这些变量可能只是用于存储位。有很多事情要弄清楚。

PS针对评论中的问题，这里是一个代码示例。但是......要清楚......我不认为使用等价是好的编码实践。使用我通常与 gfortran 一起使用来调试代码的编译器选项，gfortran 拒绝此代码。使用更宽松的选项，gfortran 将编译它。ifort 也会如此。

```
module my_types

use ISO_FORTRAN_ENV

type test_p1_type
    sequence
    integer (int32) :: int1
    integer (int32) :: int2
end type test_p1_type

type test_p2_type
   sequence
   integer (int64) :: int3
end type test_p2_type

end module my_types

program test

use my_types

type (test_p1_type) :: test_p1
type (test_p2_type) :: test_p2

equivalence (test_p1, test_p2)

test_p1 % int1 = 2
test_p1 % int1 = 4

write (*, *) test_p1 % int1, test_p1 % int2, test_p2 % int3

end program test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:30:46.507

问题是联合是用于节省空间还是用于相同数据的替代表示。如果您正在移植，请查看它是如何使用的。也许，因为篇幅有限，它是以必须共享变量的方式编写的。现在有了更多的内存，也许这不是必需的，也可能不需要联合。在这种情况下，它只是两种不同的类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-16T09:36:57.270

对于那些只想用这些扩展编译代码的人：Gfortran 现在在版本 6 中支持 UNION、MAP 和 STRUCTURE。https://gcc.gnu.org/bugzilla/show_bug.cgi?id= [56226](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56226)

# sql - SQL在友谊表中插入值基于

> ID：14733245
> 
> 赞同：0
> 
> 时间：2013-02-06T15:57:18.257
> 
> 标签：sql

我正在上一门数据库课程，但我遇到了一个问题。“对于所有 A 与 B 为朋友，B 与 C 为朋友的情况，为 A 和 C 对添加新的友谊”。这是据我所知

```
INSERT INTO 
    friend
SELECT DISTINCT 
    f1.ID1, f2.ID1 
FROM 
    friend f1 
    JOIN friend f2 using (ID2), 
    friend 
WHERE 
    f1.ID1 <> f2.ID1 
AND friend.ID1 <> f1.ID1 
AND friend.ID2 <> f1.ID2 
```

架构在这里[http://www.sqlfiddle.com/#!5/cf8b5/23](http://www.sqlfiddle.com/#!5/cf8b5/23)

我想知道是否有人可以给我一些关于如何进行的提示。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:08:07.957

我认为你有基本的概念。

我会这样做：

```
INSERT INTO friend
(ID1, ID2)
SELECT DISTINCT f1.ID1, f2.ID2
FROM friend f1
  INNER JOIN f2
    ON f1.ID2 = f2.ID1
      AND f1.ID1 <> f2.ID1
      AND f1.ID2 <> f2.ID2
WHERE f1.ID1 <> f2.ID2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:31:54.200

我认为可能是：

```
INSERT INTO friend
(ID1, ID2)
SELECT DISTINCT h.ID, f2.ID2
FROM Highschooler h 
inner join friend f1 on(h.ID=f1.ID1) 
inner join friend f2 on(f1.ID2=f2.ID1)
where h.ID <> f2.ID2
and not exists(select *
               from friend f3
               where f3.ID1=h.ID
               and f3.ID2 = f2.ID2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:04:09.777

首先，我看不出同时拥有 FRIEND 和 LIKES 表的意义。

如果友谊由两个互相喜欢的高中生代表，那么一张有两个 ID 列的表就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T18:35:54.720

```
insert into friend
select f1.id1, f2.id2
from friend f1 join friend f2 on f1.id2 = f2.id1
where f1.id1 <> f2.id2
except
select * from friend 
```

# cocoa - 使用 CIFilters 设置 CALayer 混合模式

> ID：14733253
> 
> 赞同：3
> 
> 时间：2013-02-06T15:57:34.983
> 
> 标签：cocoa, calayer

我正在尝试使用 CALayer 的属性 backgroundFilters 来管理一种混合模式。

这是我目前的结构：

```
LAYER A 
   |
   |_______LAYER B 
```

*   内容`Layer A`是图像。
*   `Layer B`是 的子层，具有`Layer A`红色背景颜色

我正在尝试做的是`Layer A`使用`Layer B`.

我以`B`这种方式添加到过滤器：

```
 CIFilter *blending = [CIFilter filterWithName:@"CIColorBlendMode"];
    blending.name = @"blendingFilter";

    [blending setDefaults];
    layerB.filters = [NSArray arrayWithObject:blending]; 
```

但它不起作用。

在 2 层之间创建颜色混合效果的正确方法是什么？

（我正在使用 OSX 而不是 iOS）

# symfony - Symfony 2.1.7 和学说迁移捆绑错误

> ID：14733257
> 
> 赞同：2
> 
> 时间：2013-02-06T15:57:39.740
> 
> 标签：symfony, bundle, doctrine-migrations

我正在关注本教程：[http ://tutorial.symblog.co.uk/docs/extending-the-model-blog-comments.html#doctrine-2-migrations](http://tutorial.symblog.co.uk/docs/extending-the-model-blog-comments.html#doctrine-2-migrations)

1) 安装 Doctrine 迁移包

1.1) - 添加

```
 "doctrine/migrations": "dev-master",
 "doctrine/doctrine-migrations-bundle": "dev-master" 
```

到 composer.json

1.2) 运行

```
 php composer.phar update 
```

2）添加

```
new Doctrine\Bundle\MigrationsBundle\DoctrineMigrationsBundle(), 
```

在 AppKernel.php 中

3) 运行

```
php app/console doctrine:migrations:diff 
```

这应该运行命令并找到当前实体和数据库之间的差异，是吗？但我得到一个错误：

```
 Fatal error: Class 'Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle' not found in D:\xampp\htdocs\symblog.dev\app\AppKernel.php on line 23 
```

这正是 (2.)

你能帮我吗？欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:55:08.413

~~我认为捆绑包同时被重命名。尝试：（~~更新的问题）：

```
// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        //...
        new Doctrine\Bundle\MigrationsBundle\DoctrineMigrationsBundle(),
    );
} 
```

请参阅[DoctrineMigrationsBundle 文档](http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html)和[`DoctrineMigrationsBundle`类](https://github.com/doctrine/DoctrineMigrationsBundle/blob/master/DoctrineMigrationsBundle.php)。

# android - Android string.xml 中的类强制转换异常

> ID：14733270
> 
> 赞同：6
> 
> 时间：2013-02-06T15:58:07.183
> 
> 标签：android, facebook, facebook-android-sdk

我正在开发一个使用 Facebook-SDKv3 的 Android 应用程序，因此我在 strings.xml 中创建了一个条目：

```
<resources>
  <string name="facebook_app_id">"12345678910"</string>
</resources> 
```

并将以下内容添加到清单中：

```
<application>
  ...
  <meta-data android:name="com.facebook.sdk.ApplicationId" android:resource="@string/facebook_app_id" />
</application> 
```

我总是得到这个例外：

> 02-06 16:35:01.231：W/Bundle(8316)：密钥 com.facebook.sdk.ApplicationId 预期字符串，但值是 java.lang.Integer。已返回默认值。
> 02-06 16:35:01.231: W/Bundle(8316): 尝试转换生成的内部异常:
> 02-06 16:35:01.231: W/Bundle(8316): java.lang.ClassCastException: java.lang.Integer无法转换为 java.lang.String
> 02-06 16:35:01.231: W/Bundle(8316): at android.os.Bundle.getString(Bundle.java:1061)
> 02-06 16:35:01.231: W /Bundle(8316): 在 com.facebook.internal.Utility.getMetadataApplicationId(Utility.java:159)

我已经尝试将数字放在“”中，但这并没有解决问题，希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T16:10:10.940

将其更改`android:resource`为`android:value`

# python - 为什么我不能在表格的中央单元格中检索我想要的数据？

> ID：14733271
> 
> 赞同：0
> 
> 时间：2013-02-06T15:58:09.833
> 
> 标签：python, pyqt, qabstracttablemodel, qmodelindex

基本上在第一个函数中，我得到了使用鼠标选择的单元格，我可以通过 data() 方法从中检索数据并将其显示在第一个函数中。

但是，我想稍微改变一下，当我选择一个单元格时，它将显示该行中第一个单元格（第一列）的数据。由于我已经有了所选单元格的索引（currentCell），我只需实例化一个新的 ModelIndex 对象并将所选索引分配给它。然后我将对象的列更改为 0。最后，我想使用 data() mtohod 用新对象检索数据，但那里什么都没有。它是空的。我花了很多时间在上面，不知道是什么问题。感谢任何提供一些努力来帮助和阅读的人:)

```
def tbRobotChanged(self, currentCell):          
 # get the selected cell's index from currentCell,Implement the Slot method

    self.statusBar().showMessage("Slected Robot is "+ 
    currentCell.data().toString())

def tbRobotChangedt(self,currentCell):

    crow_header_Index =  QtCore.QModelIndex()
    crow_header_Index = currentCell
    crow_header_Index.column = 0

    self.statusBar().showMessage("Slected Robot:"+crow_header_Index.data().toString()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:07:55.477

您不能`QModelIndex`像那样构建或修改实例。创造和交付它们是模型的工作。您应该向模型（`.index`方法）询问该`QModelIndex`行中的第一列：

```
def tbRobotChangedt(self,currentCell):

    model = currentCell.model()
    # or if you keep your model in a variable, use it.

    # .index normally takes 3 arguments.
    # row, column, parent
    # If this is a table model, you won't need the third argument.
    # because table is flat. no parents
    firstColumn = model.index(currentCell.row(), 0)

    # then get data as usual
    self.statusBar().showMessage("Selected Robot: %s" % firstColumn.data().toString()) 
```

# linux - 在 64 位 Ubuntu12.04 下编译 LinSched 3.3 时 math.h 引用失败

> ID：14733276
> 
> 赞同：0
> 
> 时间：2013-02-06T15:58:24.780
> 
> 标签：linux, compiler-errors, 64-bit, ubuntu-12.04

在 64 位 Ubuntu-12.04 下编译 LinSched 3.3 会引发以下错误：

```
******/home/xxxxx/Desktop/linsched_3.3/tools/linsched/tests/linsched_rand_test.c:169: undefined reference to `sqrt'
collect2: ld returned 1 exit status
make[1]: [linsched_rand_test] Error 1
make[1]: Leaving directory `/home/jianguo/Desktop/linsched_3.3/tools/linsched/tests'
make: [all] Error 2* 
```

引用/链接到math.h时似乎存在问题，即：数学：`/usr/include/math.h`

从 LinSched 3.3 的 make 文件中，CFLAGS 和 LFLAGS 定义如下，

```
 CC = ${CROSS_COMPILE}gcc

    CFLAGS = -g -O2 -m64 -D__KERNEL__ -D__LINSCHED__ -Wall -Wundef -Wstrict-prototypes \
         -Werror-implicit-function-declaration -fno-common \
         -I${LINSCHED_DIR}/include  -I${LINUXDIR}/include \
         -I${LINUXDIR}/arch/linsched/include -I${LINSCHED_DIR}/ \
             -include ${LINSCHED_DIR}/include/generated/autoconf.h \
         -Wno-pointer-sign -include ${LINUXDIR}/include/linux/kconfig.h

    CFLAGS_LINUX = $(CFLAGS) -nostdinc -isystem $(shell $(CC) -print-file-name=include) \
               -include ${LINSCHED_DIR}/linux_linsched.h \
               -Wno-unused  -Wno-strict-aliasing

    LFLAGS = -lm
....
...
...
 LD_PERCPU = ${LD} -r -T ${LINSCHED_DIR}/linsched.lds

OBJ_FILES = ${LINSCHED_OBJS} ${LINUX_OBJS}
DEPS := ${OBJ_FILES:.o=.d}
-include ${DEPS}

TIME_HDR=${LINUXDIR}/kernel/timeconst.h
${TIME_HDR}: ${LINUXDIR}/kernel/timeconst.pl
    @echo "(Generating timeconst.h)"
    @perl ${LINUXDIR}/kernel/timeconst.pl 1000 > $@

${LINUX_OBJS}: %.o: %.c ${TIME_HDR}
    @echo "CC KERNEL $<"
    @${CC} -o $@ ${CFLAGS_LINUX} -c $< -MMD

%.o: %.c
    @echo "CC SIM $<"
    @${CC} ${CFLAGS} -o $@ -c $< -MMD 
```

网上有人建议添加`-lm`到 CFLAGS 中，我尝试将`-lm`参数插入到 CFLAGS 的几个位置，但同样的错误仍然存​​在。任何想法 ？？？

顺便说一句，我在 64 位 ubuntu 下编译了 LinSched 3.3，因为在 CFLAGS 中它被配置为 -m64。并且以前在 32 位 Ubuntu 下编译会引发数据不兼容的错误（在 elf64-x86-64 和 elf32-i386 之间）

正如@another.anon.coward 所建议的，我后来检查了 LFLAG 的使用方式，发现它已经被使用过。作为解决方案，我应该如何修改makefile以添加LFLAGS参数？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-30T01:05:37.250

实际上问题是链接器标志 ${LFLAGS} 在 /tools/linsched/tests/Makefile 中使用不正确。

这是修复 linsched 的数学库链接相关构建问题的补丁：

```
 diff --git a/tools/linsched/tests/Makefile b/tools/linsched/tests/Makefile
index 91bb8eb..8074c93 100644
--- a/tools/linsched/tests/Makefile
+++ b/tools/linsched/tests/Makefile
@@ -33,7 +33,7 @@ TEST_DEPS := ${TESTS:%=%.d}
${TESTS}: ${OBJ_FILES} $$@.o
        @echo CC TEST $@
        @${LD_PERCPU} -o $@.percpu $^
-       @${CC} ${LFLAGS} -o $@ $@.percpu -MMD
+       @${CC} -o $@ $@.percpu ${LFLAGS} -MMD
        @rm $@.percpu

clean: 
```

# itextsharp - iTextSharp PdfTextExtractor 返回结束行之间没有空格

> ID：14733287
> 
> 赞同：1
> 
> 时间：2013-02-06T15:58:47.687
> 
> 标签：itextsharp

在使用 PdfTextExtractor.GetTextFromPage 时，我将文本提取到文本文档中，但是每个尾行之后的所有空格都丢失了。我试图用一个从 MS word 创建的简单的三行 PDF 文件来复制这个问题，但没有成功，每个 endline 都被一个额外的空格替换。

***下面是PDF文件的PrtScn***

![PDF格式](../Images/7fdb9f14137265716019c8f9f5ba19b2.png)

***下面是记事本显示的文字***

```
February 04, 2013Patient:  Ima . TestD.O.B.:   6/14/1970Chart #:   2004-00001SSN:  555-55-5555Dr. :Enclosed you will find the report for Ima . Test. 
```

以同一行结尾的单词没有与从下一行开始的单词分开。当我想解析字符串时，我认为这会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:58:47.687

***下面是notepad++显示的相同文本***

```
February 04, 2013
Patient:  Ima . Test
D.O.B.:   6/14/1970
Chart #:   2004-00001
SSN:  555-55-5555
Dr. :
Enclosed you will find the report for Ima . Test. 
```

我不知道记事本不识别endline，所以当我将相同的文本复制并粘贴到问题框中时，每一行都是分开的。希望这可以为遇到同样问题的人节省一点时间。

# c# - 我应该在哪里写多少个 try & catch 块？

> ID：14733289
> 
> 赞同：-5
> 
> 时间：2013-02-06T15:58:50.460
> 
> 标签：c#, asp.net, asp.net-mvc

我总是想知道我在我的应用程序的哪个级别编写`try-catch`？

达尔？缓存？BL？用户界面逻辑？

如果我写日志并重新抛出它

我应该在每个函数中使用 try-catch 吗？

aswuming 任何功能都可能有我没想到的异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:02:43.650

这要看情况。在 UI 层，我在 Application_Error 中全局捕获所有错误，并相应地处理这些错误。然后我才尝试捕获我不想冒泡到 UI 并导致重定向到通用错误页面的错误。这对我报告大多数（如果不是全部）错误非常有效。

有些人处理错误的方式不同；他们将在业务层捕获错误，然后记录并从 BLL 返回它们，或者记录并重新抛出一般错误。例如，查看[Enterprise Library Exception 块](http://msdn.microsoft.com/en-us/library/ff649552.aspx)如何处理错误。

您甚至可以使用 PostSharp 之类的 AOP 库来附加到您想要处理错误的所有对象，或者也可以使用 MVC 的异常过滤来处理错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:03:09.263

我个人倾向于使用 try-finally 而不是 try-catch 块（除了一些外部数据源调用）

我为代码的端点保留 try-catch，在那里我可以记录错误堆栈，并在必要时处理错误消息。

附带说明一下，一定要打电话`throw;`，以免吞下任何异常。

# javascript - 通过 jquery ajax 请求（加载）在加载的页面上运行 jquery 代码

> ID：14733295
> 
> 赞同：1
> 
> 时间：2013-02-06T15:59:03.720
> 
> 标签：javascript, jquery

我正在通过 JQuery Ajax 调用加载整个中间 div，我只想在加载的页面上运行 $(document).ready

header.php 加载页面的一部分

```
var $next = $("<div class='nextab center'>").insertAfter('#content .current');
        $next.load($this.attr('href')+ ' #content .center section' , function(resp) { ... 
```

}

因此，例如，当 header.php 加载 career.php 时，它不会运行在 career.php 上的 $(document).ready(function(){ 内的所有代码

我正在考虑在每个加载的页面上创建一个函数 init 但不知道如何从加载回调中调用这个函数

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:06:42.367

```
function YourActionOnDocumentReady(){
   // write whatever you want to do     
} 
```

并在准备好的文档中调用上述函数

```
$(document).ready(function(){
    YourActionOnDocumentReady();
}); 
```

并使用 ajaxStop 函数运行相同的代码

```
$(document).ajaxStop(function(){
     YourActionOnDocumentReady();
}); 
```

希望能帮助到你...

# c# - 如何在 C# 中从“StrA(StrB(StrC,StrD)(StrE)) StrF”中提取“StrB(StrC,StrD)(StrE)”？

> ID：14733301
> 
> 赞同：0
> 
> 时间：2013-02-06T15:59:17.467
> 
> 标签：c#, regex, string

我尝试使用这个：`Regex.Match(input, @"\(([^)]*)\)")`，但这会给我“（StrB（StrC，StrD）”，这不是我想要的。

我想提取 2 个括号之间的字符串，但是里面的字符串可以有自己的一组括号，嵌套在主 2 个括号内，并且字符串可以用括号无限嵌套，例如：

`"a(b(c(d(...))))"`，知道这是怎么做到的吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:22:01.837

这将得到你想要的：

```
var regex = new Regex(
    @"(?<=\()(?:[^()]|(?<br>\()|(?<-br>\)))*(?(br)(?!))(?=\))");
var input = "StrA(StrB(StrC,StrD)(StrE)) StrF";
var matches = regex.Matches(input); 
```

正则表达式分解如下：

```
(?<=\()         Preceeded by a (
(?:             Don't bother capturing a group
     [^()]+     Match one or more non-brackets
     |          OR
     (?<br>\()  Capture a (, increment the br count
     |          OR
     (?<-br>\)) Capture a ), decrement the br count or fail if it's 0
                (failing here will mean we've reached the end of our match)   
)
*               Zero or more times
(?(br)(?!))     Fail if there's the br count is greater than zero
                 (Literally, if it's greater than zero, match a (?!);
                 (?!) means 'not followed by ""', which always fails)
(?=\))          Succeeded by a ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:13:59.687

作为另一种选择，您可以遍历一个字符串，并为括号使用计数器：对于“”增加 1，对于“ `(`”减少`)`。当计数器为零或到达字符串末尾时停止：

```
var str = "StrA(StrB(StrC,StrD)(StrE)) StrF";
string result = null;
int count = 0;
var firstIndex = str.IndexOf('(');
if (firstIndex != -1)
{
    count++;
    for (int i = firstIndex + 1; i < str.Length; i++)
    {
        switch (str[i])
        {
            case '(':
                count++;
                break;
            case ')':
                count--;
                break;
        }

        if (count == 0)
        {
            result = str.Substring(firstIndex + 1, i - firstIndex - 1);
            break;
        }
    }
} 
```

# php - 列中的 SQL SUM 值并除以行数

> ID：14733305
> 
> 赞同：0
> 
> 时间：2013-02-06T15:59:26.870
> 
> 标签：php, mysql, sql, select

我正在尝试计算百分比...并且我需要将列中的所有值相加（它已经可以了）但我需要将结果除以行数...

```
 select sum(voto) from tablename where id = numberHere 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T16:00:43.680

用于`COUNT`获取总行数。

```
SELECT SUM(voto) / (COUNT(*) * 1.0) 
FROM   tablename 
WHERE  id = numberHere 
```

通过添加`* 1.0`查询将允许结果的小数位。

或者简单地说

```
SELECT AVG(voto)
FROM   tablename 
WHERE  id = numberHere 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:07:16.557

如果您专门通过求和/除法来解决问题，JW 的答案是正确的，但 SQL 有一个功能。

```
SELECT AVG(voto) FROM tablename WHERE id = numberHere 
```

AFAIK，它会自动返回与您输入的类型相同的类型（日期列除外，应将其解析为秒，然后重新编码为日期）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T16:09:41.077

AVG 应该可以工作，count(*) 应该可以工作，如果您需要对该数字执行更多操作，还可以使用 @@rownum 获取语句返回的行数。

# c# - C# Lambda 返回一些空值

> ID：14733308
> 
> 赞同：8
> 
> 时间：2013-02-06T15:59:35.717
> 
> 标签：c#, .net, linq, lambda

```
opencall.Priority = 
averages.Where(x => x.ProblemCode == opencall.ProblemCode)
.SingleOrDefault().Priority; 
```

上面的 lambda 语句返回一些空值，因为 ProblemCode 并不总是保证在平均值列表中。

如何重写此语句，以便在这种情况下将 opencall.Priority 设置为 "" 而不是应用程序抛出错误？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T16:02:51.923

您必须为您的引用类型提供一个新的默认值，而不是`null`.

```
opencall.Priority = averages.Where(x => x.ProblemCode == opencall.ProblemCode)
                            .Select(x => x.Priority)
                            .DefaultIfEmpty("")
                            .Single(); 
```

`Priority`一个`string`? _ 请注意，您不再需要`SingleOrDefault`，因为查询永远不会抛出异常，因为当您提供`DefaultIfEmpty`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:02:54.413

拆分它：

```
 var result = averages.Where(x => x.ProblemCode == opencall.ProblemCode).SingleOrDefault()
 opencall.Priority = result != null ? result.Priority : string.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:10:11.813

尝试先获取问题代码，然后检查它是否为空。

```
var possiblyNullProblemCode= 
    averages.Where(
        x => x.ProblemCode == opencall.ProblemCode)
        .SingleOrDefault();

openCall.Priority = 
    possiblyNullProblemCode == null ? 
        string.Empty : 
        possiblyNullProblemCode.Priority; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:13:09.030

假设优先级是字符串，您可以尝试：

```
var average = averages.Where(x => x.ProblemCode == opencall.ProblemCode).SingleOrDefault()
opencall.Priority = average == null ? "" : average.Priority; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T16:56:13.647

你可以简单地写：

```
opencall.Priority = 
    averages.Where(x => x.ProblemCode == opencall.ProblemCode)
    .Select(x => x.Priority)
    .SingleOrDefault() ?? string.Empty; 
```

# django - 如何从 Django 模型表单中的直通模型中获取数据？

> ID：14733309
> 
> 赞同：0
> 
> 时间：2013-02-06T15:59:36.260
> 
> 标签：django, django-models, django-forms

在我的模型中，我有：

```
class StudentProfile(models.Model):
    # Relational fields
    #more fields
    sports_assigned = models.ManyToManyField('Sport', through="StudentSportAssociation") 
```

我的模型形式如下：

```
class UpdateStudentForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(UpdateStudentForm, self).__init__(*args, **kwargs)
    class Meta:
        model = StudentProfile
    sports_assigned = forms.ModelMultipleChoiceField(queryset=SportWithLevel.objects.all(),
                                                     widget=FilteredSelectMultiple("Select", is_stacked=False), required=True) 
```

通过表是：

```
class StudentSportAssociation(AbstractBaseModel):
    """
    Association of student to a sport and his current level in the sport
    """
    sport = models.ForeignKey('Sport')
    level = models.ForeignKey('Level')
    student = models.ForeignKey('StudentProfile', related_name="sports_with_levels")
    # save and all follows 
```

现在我需要访问

> 学生体育协会

访问表单时“通过”表。现在它从 Sport 模型中获取值。有什么办法可以打破这种正常的方式并从直通表中获取详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:16:13.950

查看 django 文档的这一部分： [https](https://docs.djangoproject.com/en/1.4/topics/db/models/#extra-fields-on-many-to-many-relationships) ://docs.djangoproject.com/en/1.4/topics/db/models/#extra-fields-on-many-to-many-relationships 。尤其是阅读最后两个例子。它们描述了如何获取中间对象。

总结一下，你有2个选择：

1.通过单独的查询获取中间模型

```
StudentSportAssociation.objects.filter(student=student_profile_instance) 
```

2.你查询多对多的反向关系。在你的情况下：

```
student_profile_instance.sports_with_levels.all() 
```

“sports_with_levels”，因为您定义了一个related_name，如果您没有定义一个，它将是：

```
student_profile_instance.studentsportassociation_set.all() 
```

默认情况下，Django 会在模型名称中添加一个“_set”。

# html - 让滚动条忽略页面顶部的固定 div

> ID：14733313
> 
> 赞同：0
> 
> 时间：2013-02-06T15:59:44.517
> 
> 标签：html, css, scrollbar, overflow

在这个网站上：

[http://acp.studevent.co.uk/](http://acp.studevent.co.uk/)

我在顶部有一个固定的 div，它将充当菜单，下面的内容 div 包含其他所有内容。我不知道如何使用 overflow-y: scroll 以便页面滚动条仅用于内容 div 并忽略顶部的标题 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T09:47:19.397

PrimeFaces 的 layout/layoutUnit 组件正是您所需要的。如果我没记错的话，他们使用 javascript 来计算并设置内容的高度。每次调整页面大小时，它都会重新计算值。

您可以查看他们的展示： http: [//primefaces.org/showcase/ui/layoutFull.jsf](http://primefaces.org/showcase/ui/layoutFull.jsf)

我敢说，您需要设置一个固定的高度才能溢出-y' 工作。使其动态化的一种方法是以某种方式计算必要的值。

您也可以通过使用 css 定位和左右上下属性让它们动态计算固定高度。

此致..

# c - OpenCV中的加权线性最小二乘

> ID：14733315
> 
> 赞同：6
> 
> 时间：2013-02-06T15:59:47.883
> 
> 标签：c, opencv, least-squares

OpenCV`cvSolve`可以解决这样的线性最小二乘问题：

```
// model: y = a1*x1 + a2*x2 + a3
CvMat *y = cvCreateMat(N, 1, CV_64FC1);
CvMat *X = cvCreateMat(N, 3, CV_64FC1);
CvMat *coeff = cvCreateMat(3, 1, CV_64FC1);

// fill vector y and matrix X
for (int i=0; i<N; ++i)
{
    cvmSet(y, i, 0, my_y_value(i) );
    cvmSet(X, i, 0, my_x1_value(i) );
    cvmSet(X, i, 1, my_x2_value(i) );
    cvmSet(X, i, 2, 1 );
} 

cvSolve(X, y, coeff, CV_SVD);
// now coeff contains a1, a2, a3 
```

但是，我想对我的数据点应用不同的权重。如何应用权重？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:14:01.147

我发现这实际上并不难：

```
for (int i=0; i<N; ++i)
{
    double w = weight(i);

    cvmSet(y, i, 0, w * my_y_value(i) );
    cvmSet(X, i, 0, w * my_x1_value(i) );
    cvmSet(X, i, 1, w * my_x2_value(i) );
    cvmSet(X, i, 2, w );
}

cvSolve(X, y, coeff, CV_SVD); 
```

该片段只是将线性方程的左侧和右侧与权重 w 相乘。样本的误差项`i`有效地乘以 w²。

# asp.net-mvc - 如何从 ControllerContext 获取 Result 类型

> ID：14733316
> 
> 赞同：3
> 
> 时间：2013-02-06T15:59:49.930
> 
> 标签：asp.net-mvc, asp.net-mvc-4

是否可以从 的实例中获取 Action 结果类型（`ViewResult`、`JsonResult`等）`ControllerContext`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:05:08.170

不，那是不可能的。控制器比任何 ActionResults 运行得早得多。`filterContext`但是，如果您正在编写一个 ActionFilter，您可以通过使用其 Result 属性来获取该信息。

例如：

```
public class MyGlobalActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result;
        if (result is ViewResultBase)
        {
            // the controller action returned a view result 
            // (either a ViewResult or PartialViewResult)
        }
        else if (result is JsonResult)
        {
            // the controller action returned a JSON result
        }
        else if (result is RedirectToRouteResult)
        {
            // the controller action redirected
        }
        .... and so on
    }
} 
```

请记住，这仅在控制器操作完成执行后才有意义，也就是仅在内部`OnActionExecuted`和. 在此操作完成执行之前尝试验证控制器操作返回的结果是没有意义的。`OnResultExecuting``OnResultExecuted`

# joomla - Joomla 2.5.8。如何在模态框弹出窗口中仅显示文章或模块内容。

> ID：14733321
> 
> 赞同：0
> 
> 时间：2013-02-06T16:00:06.307
> 
> 标签：joomla, modal-dialog, joomla2.5, squeezebox

我想将登录模块放入模式弹出窗口。但是当我使用 class="modal" 时，整个页面都会加载到模态中。你能告诉我只放模块的方法吗？

这也代表以模式显示文章。

[这是有问题的链接](http://nemanja.me/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:09:55.503

我经常这样做，有两个技巧可以帮助使这项工作更好。首先，您可能想要添加`tmpl=component`到您的网址。这会导致 Joomla 只显示文章而不是整个模板（只要您的模板支持这一点，大多数都会这样做）。

这应该做得很好。如果您想获得更多选择性，您可以执行以下两项操作之一：

添加 CSS 以隐藏片段

```
.modal-body .other-selector {
    display:none;
} 
```

使用 Javascript 仅选择您想要的部分

```
$('#myModal').on('show', function () {
  // selects a piece of the current modal body and sets it as the only content of the modal
  $('#myModal .modal-body').html($('#myModal .modal-body').find('.other-selector).html());
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:11:27.120

只能显示组件的方法是`tmpl=component`在 url 中添加一个额外的参数。如果您会在模板文件夹中看到 component.php 主要`<jdoc:include type="component" />`没有模块位置。所以它只会加载组件。

我没有尝试模块，但你可以尝试类似的模块。所以你可以通过在整个模板中给出模块的位置来尝试它，比如在你的模板文件夹中创建一个名为 modules.php 的新页面并将模块位置放在这个里面page.And 你以类似的方式调用它，就像组件一样`tmpl=modules`

我希望这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:15:28.330

我的模板 component.php 文件有问题。我刚刚在里面添加，现在它工作正常。多谢你们

# nservicebus - 暂停和修改 NServiceBus 传奇超时

> ID：14733324
> 
> 赞同：2
> 
> 时间：2013-02-06T16:00:07.493
> 
> 标签：nservicebus, nservicebus3

我有一个传奇，它代表了“人”到“案例”的长期工作分配过程。几个事件可能会启动它，并且在流程结束时我们有一个分配确认，此时 saga 完成并且 Person 被分配给 Case。我想为这个传奇设置一个超时时间，这样我们就不会无限期地等待确认——这绝对是一个有效的业务用例。那里没有困难 - 相当香草。

扭曲的是，如果有人搁置案例，则此分配过程可能会被阻止。我有一个可以订阅的事件，因此我的 assignment saga*知道*Case 处于暂停状态，但除非我调整超时或以某种方式暂停它，否则 assignment saga 可能会在 Case hold 被释放之前超时。这样做没有商业意义，所以我基本上想停止超时时钟，直到其他事件发生。

几年前[这里](https://stackoverflow.com/questions/4732180/nservicebus-timeout-manager)也提到了同样的问题。这仍然是不可能的，还是 v3.x 中有允许它的新功能？如果没有，这是计划中的功能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:13:59.710

当您的案件被搁置时，为什么不完全取消该实例的超时？您的 saga 维护案例的状态和计算的案例到期时间。这可以在您创建第一个超时时设置。当案例被重新激活时，只需计算重新激活和保存的“截止日期”的时间差，并为该实例创建一个新的超时时间。您可能还需要考虑案例被搁置的时间，并设置一个新的截止日期，您可以将其保存回实例状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:29:48.090

我不认为有一种方法可以直接切换到计时器并将超时消息“搁置”

我会在传奇的超时处理程序中使用该逻辑。检查 case 是否处于暂停状态并请求另一个超时而不结束 saga。

# c# - .NET Framework 2.0 中集合的替代方案

> ID：14733327
> 
> 赞同：2
> 
> 时间：2013-02-06T16:00:10.600
> 
> 标签：c#, .net

不幸的是，我正在.NET 中开发一个项目，使用旧的.NET 2.0 框架（由于更新许多客户端的困难，验证框架的新版本以安装在许多计算机上，等等......）。

我已经看到大多数集合类都来自 .NET 4 框架。如果我需要 Sets 和 Maps 但我需要使用 .NET 2.0 框架，你会推荐使用什么？我应该从头开始实现我想使用的每个集合吗？

除了我不知道的 System.Collections.Generic 命名空间之外，还有更多的集合吗？（参考这里：

[http://msdn.microsoft.com/en-us/library/system.collections.generic%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.collections.generic%28v=vs.80%29.aspx)）

我想最好的决定是说服必要的人将所有客户端更新到 4.5 .NET 框架，因为这将带来更多的开发可能性，并且这个版本将带来许多改进。但我不确定我是否能够改变这一点。那么你会在我的位置上做什么？

感谢您的阅读。问候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T16:06:22.133

> 我已经看到大多数集合类都来自 .NET 4 框架。

这根本不是真的。命名空间在 .NET 4中`System.Collections.Concurrent`开始发挥作用，但*大多数*通用集合都在 .NET 2 中出现。

.NET 3.5 只有几个新的——我怀疑最重要的一个是`HashSet<T>`.

最*常用*的集合（除了数组）可能是：

*   `List<T>`
*   `Dictionary<TKey, TValue>`
*   `LinkedList<T>`
*   `Queue<T>`
*   `Stack<T>`

... 前两个比后*三个*使用更广泛。所有这些都在 .NET 2 中。

另一个需要注意的重要区别是 LINQ：.NET 3.5 引入了 LINQ，但您*可以*针对 .NET 2.0使用 LINQ to Objects 的替代实现（例如[LINQBridge ）。](https://code.google.com/p/linqbridge/)如果你有一个现代版本的 Visual Studio，这很有效，即使你以 .NET 2 为目标，你也可以使用 C# 3 和更高版本的一些*语言*特性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:02:00.077

`List<T>`并且`Dictionary<TKey, TValue>`在 .NET 2.0 中可用。与大多数其他通用集合一样。而不是`HashSet<T>`你可以使用通用字典。你也不需要从头开始实现它。您可以将大部分功能委托给字典。例如

```
public class HashSet<T> : IEnumerable<T>
{
    private Dictionary<T, object> _dictionary = new Dictionary<T, object>();

    public void Add(T value)
    {
        if (!_dictionary.ContainsKey(value))
            _dictionary.Add(value, null);
    }

    public void Remove(T value)
    {
        _dictionary.Remove(value);
    }

    public void Clear()
    {
        _dictionary.Clear();
    }

    public int Count 
    { 
        get { return _dictionary.Count; } 
    }

    public IEnumerator<T>  GetEnumerator()
    {
        return _dictionary.Keys.GetEnumerator();
    }

    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:56:16.807

你应该看看`Wintellect's Power Collections for .NET`，[http ://powercollections.codeplex.com/](http://powercollections.codeplex.com/)

它是 .net 4 的替代品，但它几乎没有非常方便的集合。

# sql-server-2008 - 如何使用 aspnet_regsql.exe

> ID：14733329
> 
> 赞同：12
> 
> 时间：2013-02-06T16:00:22.330
> 
> 标签：sql-server-2008, iis-7.5, silverlight-5.0

我在使用本地 IIS Web 服务器的 Silverlight 业务应用程序中创建用户时遇到问题。

如果我使用 Visual Studio 开发服务器，我没有问题，但是一旦我在属性页面中选中“使用本地 IIS Web 服务器”并运行应用程序，每当我尝试使用“登录->立即注册”创建新用户时，我收到“无法连接到 SQL Server”错误。

我发现了一个与我类似的问题，解决方案是在命令提示符下使用 aspnet_regsql。

如果我必须使用这个工具，那么我不知道如何使用它：

aspnet_regsql.exe -S DBServerName -U DBLogin -P DBPassword -A all -d DBName

我应该在这些参数中输入什么：

**DBServerName**：我猜它是“.\sqlexpress”

**DBLogin**和**DBPassword**：数据库的登录名和密码？

**DBName**：如果我没有使用任何特定的数据库，那又如何呢？

请问，我应该在这里做什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T16:12:45.980

导航到向导（C:\Windows\Microsoft.NET\Framework[framework version]\aspnet_regsql）并启动它，您将能够看到一个表单出现，您可以在此处输入详细信息，而不是使用命令提示符。

同样在 VS 中，从顶部菜单中选择 WEBSITE -> ASP.Net Configuration，您应该能够看到所有用户和角色详细信息（您可以测试连接性，因为这将根据您的 web.config/app.config 设置提取数据)

# python - 我需要一种简单的python方法来防止名字或姓氏成为输入密码的一部分

> ID：14733335
> 
> 赞同：0
> 
> 时间：2013-02-06T16:00:35.263
> 
> 标签：python, input, names

如果我要求用户输入他们的名字和姓氏，我需要输入的密码不包括名字和姓氏。我还需要一个简单的方法来做到这一点不是很难理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:01:37.917

简单的 ：）

```
password = "thisJaKob"
firstname = "jakOB"
lastname = "Bowyer"

test_pass = password.lower()
if (firstname.lower() in test_pass) or (lastname.lower() in test_pass):
    print "Idiot. don't use names in passwords." 
```

因为字符串是不可变的，所以它们支持`in`运算符，该运算符检查左侧是否是右侧的有效子字符串。

# jms - 为 Camel JMS 端点重用 ActiveMQ

> ID：14733349
> 
> 赞同：0
> 
> 时间：2013-02-06T16:01:01.597
> 
> 标签：jms, activemq, apache-camel

我们目前在 Camel 中为 JMS 使用 activemq。现在我们的要求要求我们创建一个完全独立的应用程序（独立的 jvm 实例），该应用程序还使用 ActiveMQ Standalone 与外部客户端代理消息。

我想知道我们是否可以将这个单独的独立用于骆驼 jms 端点，或者是否可以将骆驼中的嵌入式 activemq 用于我们新的独立应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:29:47.077

您可以使用单个 ActiveMQ 实例。只需确保您没有目标名称冲突 [除非它们将共享]，并且您的实例使用**tcp://**或其他网络协议之一创建网络侦听器，即您不想使用**vm://**。

# algorithm - 对字符串进行数值分析的算法

> ID：14733350
> 
> 赞同：1
> 
> 时间：2013-02-06T16:01:03.857
> 
> 标签：algorithm, perl

我有几个类似于下面的文件，我正在尝试进行图像中提到的数字分析

![数字分析方法](../Images/5a489f2a03cffdcc1da2e334810aabca.png)

```
 >File Sample
 attttttttttttttacgatgccgggggatgcggggaaatttccctctctctctcttcttctcgcgcgcg
 aaaaaaaaaaaaaaagcgcggcggcgcggasasasasasasaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

我必须映射每个大小为 2 的子字符串，然后将其映射到 33 值以用于不同的 ptoperties，然后根据窗口大小 5 添加。

```
 my  %temp = (
                 aCount => {
                        aa =>2
                 }
                 cCount => {
                        aa => 0
                 }
    ); 
```

我目前的实施包括如下，

```
 while (<FILE>) {
     my $line = $_;
     chomp $line;

     while ($line=~/(.{2})/og) {
        $subStr = $1;
        if (exists $temp{aCount}{$subStr}) {

          push @{$temp{aCount_array}},$temp{aCount}{$subStr};

          if (scalar(@{$temp{aCount_array}}) == $WINDOW_SIZE) {

                my $sum = eval (join('+',@{$temp{aCount_array}}));
                shift @{$temp{aCount_array}};
                #Similar approach has been taken to other 33 rules
          }

        }

        if (exists $temp{cCount}{$subStr}) {
             #similar approach 
        }

        $line =~s/.{1}//og;
     }
   } 
```

有没有其他方法可以提高整个过程的速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:17:33.650

正则表达式很棒，但是当您只需要固定宽度的子字符串时，它们可能会有点过分。替代品是`substr`

```
$len = length($line);
for ($i=0; $i<$len; $i+=2) {
   $subStr = substr($line,$i,2);
   ...
} 
```

或者`unpack`

```
foreach $subStr (unpack "(A2)*", $line) {
   ...
} 
```

我不知道其中任何一个会比正则表达式快多少，但[我知道我会如何找到](http://search.cpan.org/perldoc?Benchmark).

# javascript - jvectormap标记

> ID：14733360
> 
> 赞同：2
> 
> 时间：2013-02-06T16:01:29.037
> 
> 标签：javascript, jquery, jvectormap

我正在使用 jvectormap 来显示与我合作的业务相关的校友的位置。是否有解决方案来添加指向标记的链接？我的意思是对于每个单独的标记，我知道您可以使用此代码将所有标记链接到一个 URL（例如）：

```
 onMarkerClick: function (event, code){
   var url = "http://www.google.com";
   $(location).attr('href',url);
 }, 
```

我已经像这样安排了我的标记：`"US": {latLng: [38.90, -98.45], name: 'United States of America'}`，如果这有什么不同的话。

我希望为**每个**标记使用唯一的 URL。例如，美国链接到一个专门针对美国的页面。目前，我可以使用上述代码将所有标记链接到单个 URL，当我尝试在多个国家/地区进行操作时，我会遇到问题。

提前致谢，

汤姆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:10:40.153

你可以这样做

```
onMarkerSelected: function(){
   // do what you need to do here.
} 
```

示例在这里：http: [//jvectormap.com/examples/regions-selection/](http://jvectormap.com/examples/regions-selection/)

在您的标记中添加 URL：

```
"US": {latLng: [38.90, -98.45], name: 'United States of America', weburl : "/blah/foo"} 
```

那么当你有你的功能时：

```
onMarkerClick: function(events, index) {
    $(location).attr('href', markers[index].weburl);
} 
```

标记是您的标记数组。

# mysql - Node.js 内存泄漏

> ID：14733361
> 
> 赞同：0
> 
> 时间：2013-02-06T16:01:32.267
> 
> 标签：mysql, node.js

我的 node.js 应用程序出现以下错误。这是一个简单的 mysql 查询网络服务。我每天获得大约 20,000 到 30,000 次点击，它托管在 appfog 上。我正在使用我认为有帮助的 mysql 连接池。一个想法是什么导致了这个错误？过了一会儿，应用程序崩溃了（404 错误），我必须重新启动它。

```
====> /logs/staging.log <====

# Logfile created on 2013-02-06 06:56:31 +0000 by logger.rb/25413
Installing dependencies. Node version 0.8.14
Installing mysql@mysql@2.0.0-alpha7 from local path
Installing require-all@require-all@0.0.3 from local path
Installing bignumber.js@bignumber.js@1.0.1 from local path
Installing require-all@https://registry.npmjs.org/require-all/-/require-all-0.0.5.tgz from local path
Installing request@request@ from local path
Installing form-data@form-data from local path
Installing combined-stream@combined-stream@0.0.3 from local path
Installing delayed-stream@delayed-stream@0.0.5 from local path
Installing async@async@0.1.9 from local path
Installing mime@mime from local path

====> /logs/stderr.log <====

(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at Connection.EventEmitter.addListener (events.js:175:15)
    at handleDisconnect (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:75:28)
    at /mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:93:13
    at Pool.getConnection (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/Pool.js:25:5)
    at QueryDB (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:73:14)
    at IncomingMessage.http.createServer.pool.getConnection.connection.on.offset (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:51:17)
    at IncomingMessage.EventEmitter.emit (events.js:93:17)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socket.ondata (http.js:1704:22)
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.
Trace
    at Connection.EventEmitter.addListener (events.js:175:15)
    at handleDisconnect (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:75:28)
    at /mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:93:13
    at Pool.getConnection (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/Pool.js:25:5)
    at QueryDB (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:73:14)
    at IncomingMessage.http.createServer.pool.getConnection.connection.on.offset (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:51:17)
    at IncomingMessage.EventEmitter.emit (events.js:93:17)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socket.ondata (http.js:1704:22)

====> /logs/stdout.log <====

Wed, 06 Feb 2013 07:27:13
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:34:51
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:34:51
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:39:14
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:39:14
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:41:08
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:41:08
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:43:35
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:45:10
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:47:22
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51)

Wed, 06 Feb 2013 07:47:22
Error: Connection lost: The server closed the connection.
    at Protocol.end (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/node_modules/mysql/lib/protocol/Protocol.js:72:13)
    at Socket.onend (stream.js:66:10)
    at Socket.EventEmitter.emit (events.js:126:20)
    at TCP.onread (net.js:417:51) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:20:03.417

Since no source code is offered, it's really an educated guessing game, so...

```
at Connection.EventEmitter.addListener (events.js:175:15)
at handleDisconnect (/mnt/var/vcap.local/dea/apps/ta-0-887f6653d9e54cd272cde95a0954869b/app/app.js:75:28) 
```

My guess is you have some code in the "handleDisconnect" function that generating your leak "addLister" by creating/binding a new event.

# logging - 强制 Jboss 日志记录使用 SLF4J

> ID：14733369
> 
> 赞同：14
> 
> 时间：2013-02-06T16:01:45.010
> 
> 标签：logging, coldfusion, jboss, log4j, slf4j

我正在使用带有 Jrun 的 Hibernate 4.0 和 Coldfusion 8，不幸的是已经包含 log4j，我无法删除它，并且 log4j 的版本太旧（没有痕迹）。因此休眠不能工作。我想强制 Jboss Logging 使用 SLF4j，为此我添加了与自定义 log4j 的绑定。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T01:44:00.120

我不记得这是在哪个版本的 JBoss Logging 中，但尝试添加`org.jboss.logging.provider=slf4j`. 请注意，尽管它仅在您使用 logback 时才有效，因为 SLF4J 只是 JBoss Logging 之类的外观，而不是日志管理器。

# youtube - Youtube 获取相机类型

> ID：14733370
> 
> 赞同：2
> 
> 时间：2013-02-06T16:01:51.220
> 
> 标签：youtube, youtube-api, computer-vision, youtube-dl

考虑这些视频：

[http://www.youtube.com/watch?v=U_kZ5Lj-59E](http://www.youtube.com/watch?v=U_kZ5Lj-59E)

[http://www.youtube.com/watch?v=f0pdwd0miqs](http://www.youtube.com/watch?v=f0pdwd0miqs)

第一个可能是用手机相机拍摄的，第二个是专业相机拍摄的。我想确定这种差异。

**问：**有人知道如何检索有关用于 Youtube 视频的相机类型的信息吗？

**问：**或者，有没有更通用的方法来确定视频录制质量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:32:53.203

目前无法从 YouTube 上的视频中获取相机元数据。从理论上讲，YouTube 可以为某些视频捕获此信息（并在未来提供），但并非每个视频文件都包含相机元数据。事实上，很多视频都使用不止一个摄像头。

从技术上讲，还有其他确定“录音质量”的方法，但它们并不完美。例如，您可以假设如果一个视频以 1080p 可用，它可能比仅以 480p 提供的视频质量更好。但是，两个 1080p 视频仍然存在很大差异。

您也不能依赖比特率，因为 YouTube 可能会根据您的网速改变您的比特率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:43:53.353

例如，如果您执行以下查询 (API V3)，您可以确定视频是否可用：[https ://developers.google.com/apis-explorer/#p/youtube/v3/youtube.videos.list?id =L8oEtD_CEs0&part=contentDetails&_h=1&](https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.videos.list?id=L8oEtD_CEs0&part=contentDetails&_h=1&)，你会注意到我已经用高清录制了它（“定义”：“高清”），虽然我确实使用了我颤抖的手和手机摄像头:) 对于 API V2，我们在这里描述了元素：[http ://apiblog.youtube.com/2011/10/more-ways-to-find-what-youre-looking.html](http://apiblog.youtube.com/2011/10/more-ways-to-find-what-youre-looking.html)。

# qt - QSpiAccessible 消息

> ID：14733373
> 
> 赞同：3
> 
> 时间：2013-02-06T16:02:10.347
> 
> 标签：qt

我在 Qt 中有一个工作正常的项目，但突然它开始在应用程序输出中打印这些消息。

尽管有这些消息，该项目仍运行良好。

```
Got bus address:  "unix:abstract=/tmp/dbus-YK3RLJzcQV,guid=68c6855978ee42309292618f51127852" 
Connected to accessibility bus at:  "unix:abstract=/tmp/dbus-YK3RLJzcQV,guid=68c6855978ee42309292618f51127852" 
Registered DEC:  true 
Registered event listener change listener:  true 
QSpiAccessible::accessibleEvent not handled:  "2"  obj:  QMessageBox(0xbfa787bc) "" 
FIXME: handle dialog start. 
FIXME: handle dialog end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:14:25.793

看来这是qt-ai-spi 包中[的错误](https://bugs.launchpad.net/ubuntu/+source/qtiplot/+bug/997462)。尝试从系统中删除该软件包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:14:00.223

删除 QT 辅助功能包 (qt-at-spi) 有效。

```
sudo apt-get remove --purge qt-at-spi 
```

# javascript - 如何在 JavaScript/Node.js 中生成 MD5 文件哈希？

> ID：14733374
> 
> 赞同：95
> 
> 时间：2013-02-06T16:02:16.380
> 
> 标签：javascript, node.js, hash, md5

`functionToGenerateMD5hash`这段代码怎么写？我已经有了`fileVideo`，我需要通过单击按钮将相应的 md5 哈希发送到服务器。

```
$("#someButton").click(function() {
var fr = new FileReader();      
fr.onload = function(e) {            
    string md5 = functionToGenerateMD5hash(e.target.result);
    // send md5 here
};       
fr.readAsArrayBuffer(fileVideo); 
```

另外，您可以使用它在 Node.js 中生成 MD5 哈希吗？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2015-11-02T20:15:49.413

如果您不想使用库或其他东西，可以使用这种原生 javascript 方法：

```
var MD5 = function(d){var r = M(V(Y(X(d),8*d.length)));return r.toLowerCase()};function M(d){for(var _,m="0123456789ABCDEF",f="",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _="",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}

/** NORMAL words**/
var value = 'test';

var result = MD5(value);

document.body.innerHTML = 'hash -  normal words: ' + result;

/** NON ENGLISH words**/
value = 'מבחן'

//unescape() can be deprecated for the new browser versions
result = MD5(unescape(encodeURIComponent(value)));

document.body.innerHTML += '<br><br>hash - non english words: ' + result; 
```

对于非英语单词，您可能需要使用[unescape()](https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/unescape)和[encodeURIComponent()](https://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)方法。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-12-18T07:26:54.230

**CryptoJS**是一个加密库，可以生成 md5 哈希等：

与脚本标签一起使用：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>
<script>
   var hash = CryptoJS.MD5("Message");
   alert(hash);
</script> 
```

或者使用 ES6：

`npm install crypto-js`

```
import MD5 from "crypto-js/md5";
console.log(MD5("Message").toString()); 
```

您还可以使用模块化导入：

```
var MD5 = require("crypto-js/md5");
console.log(MD5("Message").toString()); 
```

**Github**：[https ://github.com/brix/crypto-js](https://github.com/brix/crypto-js)

**CDN**：[https ://cdnjs.com/libraries/crypto-js](https://cdnjs.com/libraries/crypto-js)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-02-06T16:04:55.597

你可以使用[crypto-js](https://www.npmjs.com/package/crypto-js)。

我还建议使用 SHA256，而不是 MD5。

通过 NPM 安装 crypto-js：

```
npm install crypto-js 
```

或者，您可以使用 CDN 并引用[JS 文件](https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js)。

然后要显示 MD5 和 SHA256 哈希，您可以执行以下操作：

```
<script type="text/javascript">
    var md5Hash = CryptoJS.MD5("Test");
    var sha256Hash = CryptoJS.SHA256("Test1");

    console.log(md5Hash.toString());
    console.log(sha256Hash.toString());
</script> 
```

工作示例位于此处，[JSFiddle](https://jsfiddle.net/ur0e3sc7/)

还有其他 JS 函数会生成`MD5`哈希，如下所述。

[http://www.myersdaily.org/joseph/javascript/md5-text.html](http://www.myersdaily.org/joseph/javascript/md5-text.html)

[http://pajhome.org.uk/crypt/md5/md5.html](http://pajhome.org.uk/crypt/md5/md5.html)

```
function md5cycle(x, k) {
var a = x[0], b = x[1], c = x[2], d = x[3];

a = ff(a, b, c, d, k[0], 7, -680876936);
d = ff(d, a, b, c, k[1], 12, -389564586);
c = ff(c, d, a, b, k[2], 17,  606105819);
b = ff(b, c, d, a, k[3], 22, -1044525330);
a = ff(a, b, c, d, k[4], 7, -176418897);
d = ff(d, a, b, c, k[5], 12,  1200080426);
c = ff(c, d, a, b, k[6], 17, -1473231341);
b = ff(b, c, d, a, k[7], 22, -45705983);
a = ff(a, b, c, d, k[8], 7,  1770035416);
d = ff(d, a, b, c, k[9], 12, -1958414417);
c = ff(c, d, a, b, k[10], 17, -42063);
b = ff(b, c, d, a, k[11], 22, -1990404162);
a = ff(a, b, c, d, k[12], 7,  1804603682);
d = ff(d, a, b, c, k[13], 12, -40341101);
c = ff(c, d, a, b, k[14], 17, -1502002290);
b = ff(b, c, d, a, k[15], 22,  1236535329);

a = gg(a, b, c, d, k[1], 5, -165796510);
d = gg(d, a, b, c, k[6], 9, -1069501632);
c = gg(c, d, a, b, k[11], 14,  643717713);
b = gg(b, c, d, a, k[0], 20, -373897302);
a = gg(a, b, c, d, k[5], 5, -701558691);
d = gg(d, a, b, c, k[10], 9,  38016083);
c = gg(c, d, a, b, k[15], 14, -660478335);
b = gg(b, c, d, a, k[4], 20, -405537848);
a = gg(a, b, c, d, k[9], 5,  568446438);
d = gg(d, a, b, c, k[14], 9, -1019803690);
c = gg(c, d, a, b, k[3], 14, -187363961);
b = gg(b, c, d, a, k[8], 20,  1163531501);
a = gg(a, b, c, d, k[13], 5, -1444681467);
d = gg(d, a, b, c, k[2], 9, -51403784);
c = gg(c, d, a, b, k[7], 14,  1735328473);
b = gg(b, c, d, a, k[12], 20, -1926607734);

a = hh(a, b, c, d, k[5], 4, -378558);
d = hh(d, a, b, c, k[8], 11, -2022574463);
c = hh(c, d, a, b, k[11], 16,  1839030562);
b = hh(b, c, d, a, k[14], 23, -35309556);
a = hh(a, b, c, d, k[1], 4, -1530992060);
d = hh(d, a, b, c, k[4], 11,  1272893353);
c = hh(c, d, a, b, k[7], 16, -155497632);
b = hh(b, c, d, a, k[10], 23, -1094730640);
a = hh(a, b, c, d, k[13], 4,  681279174);
d = hh(d, a, b, c, k[0], 11, -358537222);
c = hh(c, d, a, b, k[3], 16, -722521979);
b = hh(b, c, d, a, k[6], 23,  76029189);
a = hh(a, b, c, d, k[9], 4, -640364487);
d = hh(d, a, b, c, k[12], 11, -421815835);
c = hh(c, d, a, b, k[15], 16,  530742520);
b = hh(b, c, d, a, k[2], 23, -995338651);

a = ii(a, b, c, d, k[0], 6, -198630844);
d = ii(d, a, b, c, k[7], 10,  1126891415);
c = ii(c, d, a, b, k[14], 15, -1416354905);
b = ii(b, c, d, a, k[5], 21, -57434055);
a = ii(a, b, c, d, k[12], 6,  1700485571);
d = ii(d, a, b, c, k[3], 10, -1894986606);
c = ii(c, d, a, b, k[10], 15, -1051523);
b = ii(b, c, d, a, k[1], 21, -2054922799);
a = ii(a, b, c, d, k[8], 6,  1873313359);
d = ii(d, a, b, c, k[15], 10, -30611744);
c = ii(c, d, a, b, k[6], 15, -1560198380);
b = ii(b, c, d, a, k[13], 21,  1309151649);
a = ii(a, b, c, d, k[4], 6, -145523070);
d = ii(d, a, b, c, k[11], 10, -1120210379);
c = ii(c, d, a, b, k[2], 15,  718787259);
b = ii(b, c, d, a, k[9], 21, -343485551);

x[0] = add32(a, x[0]);
x[1] = add32(b, x[1]);
x[2] = add32(c, x[2]);
x[3] = add32(d, x[3]);

}

function cmn(q, a, b, x, s, t) {
a = add32(add32(a, q), add32(x, t));
return add32((a << s) | (a >>> (32 - s)), b);
}

function ff(a, b, c, d, x, s, t) {
return cmn((b & c) | ((~b) & d), a, b, x, s, t);
}

function gg(a, b, c, d, x, s, t) {
return cmn((b & d) | (c & (~d)), a, b, x, s, t);
}

function hh(a, b, c, d, x, s, t) {
return cmn(b ^ c ^ d, a, b, x, s, t);
}

function ii(a, b, c, d, x, s, t) {
return cmn(c ^ (b | (~d)), a, b, x, s, t);
}

function md51(s) {
txt = '';
var n = s.length,
state = [1732584193, -271733879, -1732584194, 271733878], i;
for (i=64; i<=s.length; i+=64) {
md5cycle(state, md5blk(s.substring(i-64, i)));
}
s = s.substring(i-64);
var tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];
for (i=0; i<s.length; i++)
tail[i>>2] |= s.charCodeAt(i) << ((i%4) << 3);
tail[i>>2] |= 0x80 << ((i%4) << 3);
if (i > 55) {
md5cycle(state, tail);
for (i=0; i<16; i++) tail[i] = 0;
}
tail[14] = n*8;
md5cycle(state, tail);
return state;
}

/* there needs to be support for Unicode here,
 * unless we pretend that we can redefine the MD-5
 * algorithm for multi-byte characters (perhaps
 * by adding every four 16-bit characters and
 * shortening the sum to 32 bits). Otherwise
 * I suggest performing MD-5 as if every character
 * was two bytes--e.g., 0040 0025 = @%--but then
 * how will an ordinary MD-5 sum be matched?
 * There is no way to standardize text to something
 * like UTF-8 before transformation; speed cost is
 * utterly prohibitive. The JavaScript standard
 * itself needs to look at this: it should start
 * providing access to strings as preformed UTF-8
 * 8-bit unsigned value arrays.
 */
function md5blk(s) { /* I figured global was faster.   */
var md5blks = [], i; /* Andy King said do it this way. */
for (i=0; i<64; i+=4) {
md5blks[i>>2] = s.charCodeAt(i)
+ (s.charCodeAt(i+1) << 8)
+ (s.charCodeAt(i+2) << 16)
+ (s.charCodeAt(i+3) << 24);
}
return md5blks;
}

var hex_chr = '0123456789abcdef'.split('');

function rhex(n)
{
var s='', j=0;
for(; j<4; j++)
s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]
+ hex_chr[(n >> (j * 8)) & 0x0F];
return s;
}

function hex(x) {
for (var i=0; i<x.length; i++)
x[i] = rhex(x[i]);
return x.join('');
}

function md5(s) {
return hex(md51(s));
}

/* this function is much faster,
so if possible we use it. Some IEs
are the only ones I know of that
need the idiotic second function,
generated by an if clause.  */

function add32(a, b) {
return (a + b) & 0xFFFFFFFF;
}

if (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {
function add32(x, y) {
var lsw = (x & 0xFFFF) + (y & 0xFFFF),
msw = (x >> 16) + (y >> 16) + (lsw >> 16);
return (msw << 16) | (lsw & 0xFFFF);
}
} 
```

然后简单的使用MD5函数，如下图：

```
alert(md5("Test string")); 
```

另一个工作[的 JS Fiddle 在这里](https://jsfiddle.net/fo5v2gw1/)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2018-11-27T00:11:38.953

作为当代的替代方案，现在有一个客户端加密标准。这具有由浏览器本身优化的优点。

取自文档中的示例：

```
async function sha256(message) {

    // encode as UTF-8
    const msgBuffer = new TextEncoder('utf-8').encode(message);

    // hash the message
    const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);

    // convert ArrayBuffer to Array
    const hashArray = Array.from(new Uint8Array(hashBuffer));

    // convert bytes to hex string
    const hashHex = hashArray.map(b => ('00' + b.toString(16)).slice(-2)).join('');
    return hashHex;
}

sha256('abc').then(hash => console.log(hash));

(async function() {
    const hash = await sha256('abc');
}()); 
```

MD5 可能不受支持，但 SHA-256、SHA-384 和 SHA-512 之类的支持。

这些也可能在服务器端进行计算。

这里有一些关于使用的文档：[https ://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest)

和跨浏览器兼容性：[https ://caniuse.com/#feat=cryptography](https://caniuse.com/#feat=cryptography)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-03-01T12:54:52.370

[这是这个不错的实现](http://pajhome.org.uk/crypt/md5/md5.html)的简化和缩小版本（大约 3.5k）：

```
function md5(d){return rstr2hex(binl2rstr(binl_md5(rstr2binl(d),8*d.length)))}function rstr2hex(d){for(var _,m="0123456789ABCDEF",f="",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function rstr2binl(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function binl2rstr(d){for(var _="",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function binl_md5(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_} 
```

该函数将返回一个大写的 32 个字符的字符串，例如`098F6BCD4621D373CADE4E832627B4F6`.

对于简单的字母数字字符串，您可以像这样运行它：

```
md5('test') 
```

如果您需要完整的 unicode 支持，您可以在传递字符串之前调用[unescape](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/unescape)和[encodeURIComponent ：](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)

```
md5(unescape(encodeURIComponent(''))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-09T16:58:01.277

[为@valdeci](https://stackoverflow.com/users/4157589/valdeci)和[@Derzu](https://stackoverflow.com/users/1178478/derzu)版本添加了Unicode 支持。
它也可以用于 md5 化 JSON 对象。
添加了与 IE11 及以下版本的不兼容 :)

```
var md5 = (function() {
    var MD5 = function (d) {
        return M(V(Y(X(d), 8 * d.length)))
    }
    function M (d) {
        for (var _, m = '0123456789abcdef', f = '', r = 0; r < d.length; r++) {
            _ = d.charCodeAt(r)
            f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _)
        }
        return f
    }
    function X (d) {
        for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++) {
            _[m] = 0
        }
        for (m = 0; m < 8 * d.length; m += 8) {
            _[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32
        }
        return _
    }
    function V (d) {
        for (var _ = '', m = 0; m < 32 * d.length; m += 8) _ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255)
        return _
    }
    function Y (d, _) {
        d[_ >> 5] |= 128 << _ % 32
        d[14 + (_ + 64 >>> 9 << 4)] = _
        for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {
            var h = m
            var t = f
            var g = r
            var e = i
            f = md5ii(f = md5ii(f = md5ii(f = md5ii(f = md5hh(f = md5hh(f = md5hh(f = md5hh(f = md5gg(f = md5gg(f = md5gg(f = md5gg(f = md5ff(f = md5ff(f = md5ff(f = md5ff(f, r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551)
            m = safeadd(m, h)
            f = safeadd(f, t)
            r = safeadd(r, g)
            i = safeadd(i, e)
        }
        return [m, f, r, i]
    }
    function md5cmn (d, _, m, f, r, i) {
        return safeadd(bitrol(safeadd(safeadd(_, d), safeadd(f, i)), r), m)
    }
    function md5ff (d, _, m, f, r, i, n) {
        return md5cmn(_ & m | ~_ & f, d, _, r, i, n)
    }
    function md5gg (d, _, m, f, r, i, n) {
        return md5cmn(_ & f | m & ~f, d, _, r, i, n)
    }
    function md5hh (d, _, m, f, r, i, n) {
        return md5cmn(_ ^ m ^ f, d, _, r, i, n)
    }
    function md5ii (d, _, m, f, r, i, n) {
        return md5cmn(m ^ (_ | ~f), d, _, r, i, n)
    }
    function safeadd (d, _) {
        var m = (65535 & d) + (65535 & _)
        return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m
    }
    function bitrol (d, _) {
        return d << _ | d >>> 32 - _
    }
    function MD5Unicode(buffer){
        if (!(buffer instanceof Uint8Array)) {
            buffer = new TextEncoder().encode(typeof buffer==='string' ? buffer : JSON.stringify(buffer));
        }
        var binary = [];
        var bytes = new Uint8Array(buffer);
        for (var i = 0, il = bytes.byteLength; i < il; i++) {
            binary.push(String.fromCharCode(bytes[i]));
        }
        return MD5(binary.join(''));
    }

    return MD5Unicode;
})();

md5('òàùèéì€'); // aeb60a568b5bf37d397dde71dacf5519
md5({ prop1: 'òàùèéì€', prop2: 123 }); // 4334a47d3304a628e5b376bce203adbe 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-27T01:23:00.783

```
const crypto = require('crypto')

var filename = './file.ext'
md5Sum = crypto.createHash('md5')
s = fs.createReadStream(filename)
s.on('data', function(chunk) {
    md5Sum.update(chunk)
    })
s.on('end', function() {
    console.log(md5Sum.digest('hex') + '  ' + filename)
    }) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-27T14:30:07.097

这是 @valdeci 答案的 JSLint 兼容版本。

```
var MD5 = function (d) {
    return M(V(Y(X(d), 8 * d.length)))
}
function M (d) {
    for (var _, m = '0123456789ABCDEF', f = '', r = 0; r < d.length; r++) {
        _ = d.charCodeAt(r)
        f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _)
    }
    return f
}
function X (d) {
    for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++) {
        _[m] = 0
    }
    for (m = 0; m < 8 * d.length; m += 8) {
        _[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32
    }
    return _
}
function V (d) {
    for (var _ = '', m = 0; m < 32 * d.length; m += 8) _ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255)
    return _
}
function Y (d, _) {
    d[_ >> 5] |= 128 << _ % 32
    d[14 + (_ + 64 >>> 9 << 4)] = _
    for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {
        var h = m
        var t = f
        var g = r
        var e = i
        f = md5ii(f = md5ii(f = md5ii(f = md5ii(f = md5hh(f = md5hh(f = md5hh(f = md5hh(f = md5gg(f = md5gg(f = md5gg(f = md5gg(f = md5ff(f = md5ff(f = md5ff(f = md5ff(f, r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5ff(r, i = md5ff(i, m = md5ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5gg(r, i = md5gg(i, m = md5gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5hh(r, i = md5hh(i, m = md5hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5ii(r, i = md5ii(i, m = md5ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551)
        m = safeadd(m, h)
        f = safeadd(f, t)
        r = safeadd(r, g)
        i = safeadd(i, e)
    }
    return [m, f, r, i]
}
function md5cmn (d, _, m, f, r, i) {
    return safeadd(bitrol(safeadd(safeadd(_, d), safeadd(f, i)), r), m)
}
function md5ff (d, _, m, f, r, i, n) {
    return md5cmn(_ & m | ~_ & f, d, _, r, i, n)
}
function md5gg (d, _, m, f, r, i, n) {
    return md5cmn(_ & f | m & ~f, d, _, r, i, n)
}
function md5hh (d, _, m, f, r, i, n) {
    return md5cmn(_ ^ m ^ f, d, _, r, i, n)
}
function md5ii (d, _, m, f, r, i, n) {
    return md5cmn(m ^ (_ | ~f), d, _, r, i, n)
}
function safeadd (d, _) {
    var m = (65535 & d) + (65535 & _)
    return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m
}
function bitrol (d, _) {
    return d << _ | d >>> 32 - _
}

var value = 'test';

var result = MD5(value);

document.body.innerHTML = 'MD5: ' + result;
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-27T01:32:55.130

它可以在这个要点 [https://github.com/blueimp/JavaScript-MD5/blob/master/js/md5.js上作为函数找到](https://github.com/blueimp/JavaScript-MD5/blob/master/js/md5.js)

```
 /*
 * JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */

/* global define */

/* eslint-disable strict */

;(function ($) {
  'use strict'

  /**
   * Add integers, wrapping at 2^32.
   * This uses 16-bit operations internally to work around bugs in interpreters.
   *
   * @param {number} x First integer
   * @param {number} y Second integer
   * @returns {number} Sum
   */
  function safeAdd(x, y) {
    var lsw = (x & 0xffff) + (y & 0xffff)
    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)
    return (msw << 16) | (lsw & 0xffff)
  }

  /**
   * Bitwise rotate a 32-bit number to the left.
   *
   * @param {number} num 32-bit number
   * @param {number} cnt Rotation count
   * @returns {number} Rotated number
   */
  function bitRotateLeft(num, cnt) {
    return (num << cnt) | (num >>> (32 - cnt))
  }

  /**
   * Basic operation the algorithm uses.
   *
   * @param {number} q q
   * @param {number} a a
   * @param {number} b b
   * @param {number} x x
   * @param {number} s s
   * @param {number} t t
   * @returns {number} Result
   */
  function md5cmn(q, a, b, x, s, t) {
    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)
  }
  /**
   * Basic operation the algorithm uses.
   *
   * @param {number} a a
   * @param {number} b b
   * @param {number} c c
   * @param {number} d d
   * @param {number} x x
   * @param {number} s s
   * @param {number} t t
   * @returns {number} Result
   */
  function md5ff(a, b, c, d, x, s, t) {
    return md5cmn((b & c) | (~b & d), a, b, x, s, t)
  }
  /**
   * Basic operation the algorithm uses.
   *
   * @param {number} a a
   * @param {number} b b
   * @param {number} c c
   * @param {number} d d
   * @param {number} x x
   * @param {number} s s
   * @param {number} t t
   * @returns {number} Result
   */
  function md5gg(a, b, c, d, x, s, t) {
    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)
  }
  /**
   * Basic operation the algorithm uses.
   *
   * @param {number} a a
   * @param {number} b b
   * @param {number} c c
   * @param {number} d d
   * @param {number} x x
   * @param {number} s s
   * @param {number} t t
   * @returns {number} Result
   */
  function md5hh(a, b, c, d, x, s, t) {
    return md5cmn(b ^ c ^ d, a, b, x, s, t)
  }
  /**
   * Basic operation the algorithm uses.
   *
   * @param {number} a a
   * @param {number} b b
   * @param {number} c c
   * @param {number} d d
   * @param {number} x x
   * @param {number} s s
   * @param {number} t t
   * @returns {number} Result
   */
  function md5ii(a, b, c, d, x, s, t) {
    return md5cmn(c ^ (b | ~d), a, b, x, s, t)
  }

  /**
   * Calculate the MD5 of an array of little-endian words, and a bit length.
   *
   * @param {Array} x Array of little-endian words
   * @param {number} len Bit length
   * @returns {Array<number>} MD5 Array
   */
  function binlMD5(x, len) {
    /* append padding */
    x[len >> 5] |= 0x80 << len % 32
    x[(((len + 64) >>> 9) << 4) + 14] = len

    var i
    var olda
    var oldb
    var oldc
    var oldd
    var a = 1732584193
    var b = -271733879
    var c = -1732584194
    var d = 271733878

    for (i = 0; i < x.length; i += 16) {
      olda = a
      oldb = b
      oldc = c
      oldd = d

      a = md5ff(a, b, c, d, x[i], 7, -680876936)
      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)
      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)
      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)
      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)
      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)
      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)
      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)
      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)
      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)
      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)
      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)
      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)
      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)
      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)
      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)

      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)
      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)
      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)
      b = md5gg(b, c, d, a, x[i], 20, -373897302)
      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)
      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)
      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)
      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)
      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)
      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)
      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)
      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)
      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)
      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)
      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)
      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)

      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)
      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)
      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)
      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)
      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)
      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)
      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)
      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)
      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)
      d = md5hh(d, a, b, c, x[i], 11, -358537222)
      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)
      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)
      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)
      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)
      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)
      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)

      a = md5ii(a, b, c, d, x[i], 6, -198630844)
      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)
      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)
      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)
      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)
      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)
      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)
      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)
      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)
      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)
      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)
      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)
      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)
      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)
      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)
      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)

      a = safeAdd(a, olda)
      b = safeAdd(b, oldb)
      c = safeAdd(c, oldc)
      d = safeAdd(d, oldd)
    }
    return [a, b, c, d]
  }

  /**
   * Convert an array of little-endian words to a string
   *
   * @param {Array<number>} input MD5 Array
   * @returns {string} MD5 string
   */
  function binl2rstr(input) {
    var i
    var output = ''
    var length32 = input.length * 32
    for (i = 0; i < length32; i += 8) {
      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)
    }
    return output
  }

  /**
   * Convert a raw string to an array of little-endian words
   * Characters >255 have their high-byte silently ignored.
   *
   * @param {string} input Raw input string
   * @returns {Array<number>} Array of little-endian words
   */
  function rstr2binl(input) {
    var i
    var output = []
    output[(input.length >> 2) - 1] = undefined
    for (i = 0; i < output.length; i += 1) {
      output[i] = 0
    }
    var length8 = input.length * 8
    for (i = 0; i < length8; i += 8) {
      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32
    }
    return output
  }

  /**
   * Calculate the MD5 of a raw string
   *
   * @param {string} s Input string
   * @returns {string} Raw MD5 string
   */
  function rstrMD5(s) {
    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))
  }

  /**
   * Calculates the HMAC-MD5 of a key and some data (raw strings)
   *
   * @param {string} key HMAC key
   * @param {string} data Raw input string
   * @returns {string} Raw MD5 string
   */
  function rstrHMACMD5(key, data) {
    var i
    var bkey = rstr2binl(key)
    var ipad = []
    var opad = []
    var hash
    ipad[15] = opad[15] = undefined
    if (bkey.length > 16) {
      bkey = binlMD5(bkey, key.length * 8)
    }
    for (i = 0; i < 16; i += 1) {
      ipad[i] = bkey[i] ^ 0x36363636
      opad[i] = bkey[i] ^ 0x5c5c5c5c
    }
    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)
    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))
  }

  /**
   * Convert a raw string to a hex string
   *
   * @param {string} input Raw input string
   * @returns {string} Hex encoded string
   */
  function rstr2hex(input) {
    var hexTab = '0123456789abcdef'
    var output = ''
    var x
    var i
    for (i = 0; i < input.length; i += 1) {
      x = input.charCodeAt(i)
      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)
    }
    return output
  }

  /**
   * Encode a string as UTF-8
   *
   * @param {string} input Input string
   * @returns {string} UTF8 string
   */
  function str2rstrUTF8(input) {
    return unescape(encodeURIComponent(input))
  }

  /**
   * Encodes input string as raw MD5 string
   *
   * @param {string} s Input string
   * @returns {string} Raw MD5 string
   */
  function rawMD5(s) {
    return rstrMD5(str2rstrUTF8(s))
  }
  /**
   * Encodes input string as Hex encoded string
   *
   * @param {string} s Input string
   * @returns {string} Hex encoded string
   */
  function hexMD5(s) {
    return rstr2hex(rawMD5(s))
  }
  /**
   * Calculates the raw HMAC-MD5 for the given key and data
   *
   * @param {string} k HMAC key
   * @param {string} d Input string
   * @returns {string} Raw MD5 string
   */
  function rawHMACMD5(k, d) {
    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))
  }
  /**
   * Calculates the Hex encoded HMAC-MD5 for the given key and data
   *
   * @param {string} k HMAC key
   * @param {string} d Input string
   * @returns {string} Raw MD5 string
   */
  function hexHMACMD5(k, d) {
    return rstr2hex(rawHMACMD5(k, d))
  }

  /**
   * Calculates MD5 value for a given string.
   * If a key is provided, calculates the HMAC-MD5 value.
   * Returns a Hex encoded string unless the raw argument is given.
   *
   * @param {string} string Input string
   * @param {string} [key] HMAC key
   * @param {boolean} [raw] Raw output switch
   * @returns {string} MD5 output
   */
  function md5(string, key, raw) {
    if (!key) {
      if (!raw) {
        return hexMD5(string)
      }
      return rawMD5(string)
    }
    if (!raw) {
      return hexHMACMD5(key, string)
    }
    return rawHMACMD5(key, string)
  }

  if (typeof define === 'function' && define.amd) {
    define(function () {
      return md5
    })
  } else if (typeof module === 'object' && module.exports) {
    module.exports = md5
  } else {
    $.md5 = md5
  }
})(this) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-06-20T05:45:39.833

您可以使用轻量级库[pure-md5](https://www.npmjs.com/package/pure-md5)。只有4.7kb。

```
$("#file-dialog").change(function() {
  handleFiles(this.files);
});

function handleFiles(files) {
  for (var index = 0; index < files.length; index++) {
    var file = files[index];
    var fileReader = new FileReader();
    fileReader.onload = function(e) {
      $('body').append(`
        <div style="margin-top: 2rem;">
          <span>${file.name}: </span>
          <span>${(md5(e.target.result))}</span>
        </div>
      `);
    }

    fileReader.readAsText(file, 'utf-8');
  }

}
```

```
body {
  font-family: sans-serif;
}
```

```
<script src="https://unpkg.com/pure-md5@0.1.9/lib/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="file" id="file-dialog" multiple="true" accept="image/*">
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-07-26T12:28:10.613

你可以使用crypto-js。

要使用 crypto-js，您需要先加载 core.js，然后再加载 md5.js。

URL 列表在这里[https://cdnjs.com/libraries/crypto-js](https://cdnjs.com/libraries/crypto-js)

cryptojs 也可以在此处以 zip 形式获得[https://code.google.com/archive/p/crypto-js/downloads](https://code.google.com/archive/p/crypto-js/downloads)

2013 年回答者“amal”有一个答案，与此类似，但 a）他与 md5.js 的链接不再有效 b）他没有事先加载 core.js，这是必要的。

```
<html>    
  <head> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/md5.js"></script>

  <script>
     var hash = CryptoJS.MD5("Message");
     console.log(hash);
  </script>

  </head>
  <body>

  </body>
</html> 
```

# android - WindowsAndroid 将不再启动

> ID：14733375
> 
> 赞同：0
> 
> 时间：2013-02-06T16:02:22.733
> 
> 标签：android

我正在运行 Windows 7 专业版 (SP1)。当我启动程序时（直接从程序文件夹中的“android”exe 或“开始”菜单快捷方式），命令行显示 3 段有关启动失败的错误，均带有错误代码 2。然后是 Windows 7 程序顾问注意到程序崩溃了，并“尝试”解决问题。我最初将 WIndowsAndroid 安装到我的拇指驱动器下的 D:/Downloads/WindowsAndroid 下，它在那里工作。然后我尝试将它安装到我的 PC 的硬盘驱动器上，这创建了WindowsAndroid启动错误。然后我卸载了硬盘和USB程序，因为它们都显示错误，然后重新安装到我的拇指驱动器（这次是D：/Downloads/WAndroid），但错误一直出现。截至目前,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:19:18.630

尝试使用 windows 兼容模式或以管理员身份运行。有时它会起作用。

# angularjs - 在 JSFiddle 上运行的简单 AngularJS

> ID：14733378
> 
> 赞同：19
> 
> 时间：2013-02-06T16:02:28.037
> 
> 标签：angularjs, jsfiddle

如何使用以下代码制作 jsfiddle：

```
<html>
<head>
</head>
<body>
    <div ng-app ng-controller="MainCtrl">
        <ul>
            <li ng-repeat="num in nums">
                {{num}}
            </li>
        </ul>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>

    <script type="text/javascript" charset="utf-8">
        function MainCtrl($scope) {
            $scope.nums = ["1","2"];
        }
    </script>
</body>
</html> 
```

我的非工作尝试： http: [//jsfiddle.net/zhon/3DHjg/](http://jsfiddle.net/zhon/3DHjg/)没有显示任何内容并且有错误。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-06T16:15:41.523

您需要在 jsFiddle 中设置一些东西才能使其正常工作。

首先，在左侧面板的“Frameworks & Extensions”下，选择“No wrap - in <body>”。

Now, under "Fiddle Options", change "Body tag" to `<body ng-app='myApp'>`

In the JS panel, initiate your module:

```
var app = angular.module('myApp', []); 
```

Check it out: [http://jsfiddle.net/VSph2/1/](http://jsfiddle.net/VSph2/1/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-06T17:18:44.317

@pkozlowski.opensource has a nice [blog post](http://pkozlowskios.wordpress.com/2012/08/12/using-jsfiddle-with-angularjs/) about how to use jsFiddle to write AngularJS sample programs.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-06T16:08:49.740

您已经在 angular 无法访问的函数范围内定义了控制器（尚未加载 angular）。换句话说，在加载 Angular 库之前，您正在尝试调用 Angular 库的函数和助手，如下例所示。

```
function onload(){
 function MainCtrl(){}
} 
```

要解决此问题，请将您的角载荷类型切换为`No wrap - in <body>`如屏幕截图所示。

[![在此处输入图像描述](../Images/0e43e8a13197bb3868c2b9c462fc2289.png)](https://i.stack.imgur.com/eOjZS.png)

[这是jsfiddle](http://jsfiddle.net/jCUSh/)中的一个工作示例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-13T21:43:38.640

单击 JAVASCRIPT 按钮，选择 Angular 版本和您想要包含加载脚本的位置： [![在此处输入图像描述](../Images/7c28ccdc0859604be16f6ee3e7b717a0.png)](https://i.stack.imgur.com/qbUBL.png)

然后单击 HTML 按钮并在 body 标记中添加 ng-app。它的全部:) [![在此处输入图像描述](../Images/45aef08175c0266da66ee992ec434813.png)](https://i.stack.imgur.com/xWSPv.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-22T09:03:17.083

I am writing my answer for those who land on this page , I was used to use **ng-module** directive but in **jsfiddle** after half an hour I realized that **ng-module** is not allowed and you see no error , and when changed that **ng-module** to **ng-app** fiddle worked very well .I just wanted to share this .And **no wrap (body)** is required too.

```
<div ng-app="appX" ng-controller="appCtrl">
  <p>{{greeting}}
  </p>
</div> 
```

* * *

```
var app=angular.module("appX",[]);
console.log(app);
app.controller("appCtrl",function($scope){
$scope.greeting="Hello World";
}); 
```

[https://jsfiddle.net/cloudnine/trgrjwf1/7/](https://jsfiddle.net/cloudnine/trgrjwf1/7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-16T05:32:55.470

由于 JSFiddle 已在其 JAVASCRIPT 设置面板中选择 Angular 1.4.8 作为 Angular V1 的首选选项，因此应用了更多限制：两者`ng-app`都应`ng-controller`在 HTML 中声明以使其工作。

示例 HTML：

```
<div ng-app="myApp" ng-controller="myCtrl">
  <input type="text" ng-model="sample" placeholder="type something here...">
  <span>{{sample}}</span>
</div> 
```

示例 JS：

```
angular.module('myApp', [])
  .controller('myCtrl', function($scope) {}); 
```

[https://jsfiddle.net/y170uj84/](https://jsfiddle.net/y170uj84/)

还通过设置为外部资源使用最新的 Angular 1.6.4 进行了测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-12T08:30:20.490

对于 angular 5 中的小实验，您可以使用[https://stackblitz.com/](https://stackblitz.com/)。该站点在 Angular 文档中用于运行实时演示。例如，[https://stackblitz.com/angular/eybymjopmav](https://stackblitz.com/angular/eybymjopmav)

# sql-server - 让没有系统管理员角色的用户能够使用 SSMS（或类似的）从外部源附加/分离数据库

> ID：14733381
> 
> 赞同：2
> 
> 时间：2013-02-06T16:02:37.587
> 
> 标签：sql-server, permissions, ssms, sysadmin

我已经到处搜索了如何做到这一点。让我提供一些背景知识，这样我们就可以避免重复相同的旧内容。

在我的公司，我们有时每月会收到数百个来自外部资源的数据库（即，我们不知道这些数据库上存在哪些数据库用户，而且永远不会知道）。我想让我的分析师附加这些数据库——使用 SSMS 或其他图形工具——而不给他们 sysadmin 服务器角色。

根据我的研究，附加数据库需要服务器角色 dbcreator（和 bulkadmin ???）；但是，对于没有系统管理员服务器角色的用户，SSMS 似乎甚至不会显示“附加”对话框。

虽然我更喜欢一组权限，允许没有系统管理员角色的用户使用 SSMS 或其他 GUI 工具来附加/分离数据库，但我对任何方式都感兴趣。

有任何想法吗？谢谢。

# python - 为什么是“array.include?object”而不是“object.in?array”？

> ID：14733393
> 
> 赞同：1
> 
> 时间：2013-02-06T16:03:03.733
> 
> 标签：python, ruby, arrays, coding-style

我最近发现在 Python 中，你可以这样做：

```
array = [1, 2, 3, 4]
if 3 in array:
  print("Yep!") 
```

然后，我心想：“嗯，为什么它在 Ruby 中有所不同？`if 3 in array`比 . 更具可读性`if array.include? 3`。” 然后，我意识到，Ruby 是纯粹的 OOP，而且这种方法是基于关键字的。

但是，我仍然想知道。如果 Python 方法不是 OOP，为什么在 Ruby 中不能有另一种更短且更具可读性的方法？思考时，我不认为“这个列表是否包含那个元素？”，而是“这个元素在那个列表中吗？”。

假设，以下代码是可能的：

```
array = [1, 2, 3, 4]

if 3.in? array
  print "Yep!
end 
```

`list.method(element)`我看到这是从到的转机`element.method(list)`。所以，我想知道：*哪些 ruby​​ 原则/规则反对上述代码？*

**编辑：**哎呀，我写了“基于键盘”，但当然意思是“基于关键字”。强调这一点：我不是在寻找表现得像 in? 方法; 我正在寻找为什么它没有以这种方式在 Ruby 中实现的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:11:01.170

> 哪些 ruby​​ 原则/规则反对上述代码？

这不是 Ruby 原则，而是一般的 OOP 封装原则：Fixnum 类不需要了解数组的任何内容。但是，因为 Array 的主要职责是包含对象的集合，`#in?`或者`#include?`显然属于 Array 的职责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:07:31.130

在 rails (active_support) 中有一个 helper `in?`，它的工作原理与您想要的完全一样

```
require 'active_support/core_ext'

3.in?([1, 2, 3]) # => true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:10:37.193

从 OO 的角度来看，这是有意义的，因为`include?`它是 的方法`Array`，而不是其他所有事物（或`Object`）的方法。

Python 变体看起来只是一种[语法糖](https://en.wikipedia.org/wiki/Syntactic_sugar)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:13:28.580

您的最后一句话解释了您所看到的问题：您认为您应该能够询问一个对象是否存在于数组中，这是没有意义的。它如何知道如何搜索数组或类似数组的对象。

把它转过来是有道理的：“这个数组是否包含对象”。数组或类似数组的对象知道如何搜索自己，并且可以尝试将对象与数组中的元素进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T16:26:59.227

（我的 Python 经验为零，所以我只是在转发我在互联网上阅读的内容。）

`in`是 Python 中的运算符，而不是方法。

> Python 有成员运算符，用于测试序列中的成员，例如字符串、列表或元组。下面解释了两个成员运算符：
> 
> **`in`**如果找到指定序列中的变量，则评估为 true，否则评估为 false。
> 
> **`not in`**如果在指定序列中未找到变量，则评估为 true，否则评估为 false。

[http://www.tutorialspoint.com/python/python_basic_operators.htm](http://www.tutorialspoint.com/python/python_basic_operators.htm)

我是 Ruby 新手；我不知道有任何 Ruby 原则会阻止在数组之前编写对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T16:27:22.580

我认为 Mark 最好地回答了您的问题，并且出于您的目的，`case`除非您正在处理模块、正则表达式等元素，否则语句具有反转关系的效果：

```
array = [1, 2, 3, 4]

case 3; when *array
  do_something
end 
```

# php - html表单-如何根据选择的按钮调用不同的php页面

> ID：14733394
> 
> 赞同：1
> 
> 时间：2013-02-06T16:03:05.493
> 
> 标签：php, html, forms, action

问题：如何根据按下的按钮使 HTML 表单从操作中调用不同的 php 页面？

下面的代码是我现在拥有的解决方案，但我认为必须有更好的方法来做到这一点，然后在页面上创建多个表单？

```
<html>  
<body>
    <form name="entry_form" action="entry_update_script.php" method="post" enctype="multipart/form-data">
        <input type="hidden" name="entry_id" value="">
        <input type="hidden" name="entry_item_id" value="">
        Truck/Railcar/Barge#:<input type="text" name="pro_number" value=""><br>
        BOL #:<input type="text" name="bol" value=""><br>
        <input type="submit" name="entry_submit" value="Add New Entry!">
    </form>
    <form name="entry_form_add" action="entry_view.php" method="post" enctype="multipart/form-data">
        <input type="hidden" name="entry_id" value="">
        <input type="submit" name="submit" value="Add New Item!">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:09:33.393

```
<html>  
<body>
    <script type="text/javascript">

    function submitAction(act) {
         document.sample.action = act;
         document.sample.submit();

    }
    </script>
    <form name ="sample" action="default.php">
         <input type="button" value = "blah1" onClick="submitAction('phpPage1.php')">
         <input type="button" value = "blah2" onClick="submitAction('phpPage2.php')">
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T16:14:32.633

您可以从调度程序中选择要访问的页面，这是一个可扩展且强大的解决方案：

**你的表格**

```
<form action="dispatcher.php" method="POST">
    <input type="radio" name="myOption" value="register" />
    <input type="radio" name="myOption" value="login" />
</form> 
```

**调度程序.php**

```
$actions = array ('register', 'login');

// validate possible actions
if (in_array($_POST['myOption']), $actions)) {
    include ($_POST['myOption'] . '.php');
} 
```

# php - 确定适当的 gearman 任务函数以检索实时作业状态

> ID：14733398
> 
> 赞同：1
> 
> 时间：2013-02-06T16:03:11.923
> 
> 标签：php, client, real-time, gearman, worker

很简单，我有一个程序需要执行一个大型进程（从 5 秒到几分钟不等），我不想让我的页面等待进程完成加载。

我知道我需要将这个 Gearman 作业作为后台进程运行，但我正在努力确定正确的解决方案，以获取关于工作人员何时真正完成进程的实时状态更新。我使用了 PHP 示例中的以下代码片段：

```
do {
    sleep(3);
    $stat = $gmclient->jobStatus($job_handle);
    if (!$stat[0]) // the job is known so it is not done
        $done = true;
        echo "Running: " . ($stat[1] ? "true" : "false") . ", numerator: " . $stat[2] . ", denomintor: " . $stat[3] . "\n";
} while(!$done);

echo "done!\n"; 
```

这是可行的，但是当工作人员完成告诉工作要做什么时，它似乎只是将数据返回给客户端。相反我想知道什么时候`job`完成的字面过程。

我现实生活中的例子：

1.  从 API 中提取多个数据提要（某些提要比其他提要花费更长的时间）
2.  加载几个总是快速加载的，在发送到工作队列的部分放置“等待/加载”动画
3.  当工作完成并完全检索结果时，将动画替换为结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T10:35:29.883

这有点晚了，但我偶然发现了这个问题，寻找相同的答案。我能够一起找到解决方案，所以也许它会帮助其他人。

对于初学者，请参阅[GearmanClient::jobStatus](http://php.net/manual/en/gearmanclient.jobstatus.php)上的文档。这将从客户端调用，并且该函数接受一个参数：`$job_handle`. 您在分派请求时检索此句柄：

```
$client = new GearmanClient( );
$client->addServer( '127.0.0.1', 4730 );
$handle = $client->doBackground( 'serviceRequest', $data ); 
```

稍后，您可以通过`jobStatus`在同一`$client`对象上调用函数来检索状态：

```
$status = $client->jobStatus( $handle ); 
```

但是，这只有在您使用以下[`sendStatus`](http://www.php.net/manual/en/gearmanjob.sendstatus.php)方法从您的工作人员中实际更改状态时才有意义：

```
$worker = new GearmanWorker( );
$worker->addFunction( 'serviceRequest', function( $job ) {
    $max = 10;
    // Set initial status - numerator / denominator
    $job->sendStatus( 0, $max );

    for( $i = 1; $i <= $max; $i++ ) {
        sleep( 2 ); // Simulate a long running task
        $job->sendStatus( $i, $max );
    }

    return GEARMAN_SUCCESS;
} );

while( $worker->work( ) ) {
    $worker->wait( );
} 
```

*   在 0.5 之前的 Gearman 版本中，您将使用 GearmanJob::status 方法来设置作业的状态。版本 0.6 到当前 (1.1) 使用上述方法。

*   另请参阅此问题：[Gearman 作业状态问题](https://stackoverflow.com/questions/5666561/problem-with-gearman-job-status)

# php - PHP fread 限制为 8192 字节

> ID：14733400
> 
> 赞同：2
> 
> 时间：2013-02-06T16:03:18.770
> 
> 标签：php, byte, max, fread

亲切的问候，

我想知道，为什么我需要将允许从文件读取的最大值指定为 8192 字节？

```
 $BytesFile .= fread($fis, 8192); 
```

或者

```
 $Enunciado->send_long_data(3, fread($fiFoto, 8192)); 
```

是否可以使用更大的值更改配置文件**php.ini**？如何？

# javascript - 使用 requirejs 进行优化

> ID：14733401
> 
> 赞同：3
> 
> 时间：2013-02-06T16:03:19.593
> 
> 标签：javascript, requirejs, amd

目前，我们正在像这样在 html 页面上设置内联依赖项

```
<html>
    <body>

        <article>
            Content
        </article>

        <script type="text/javascript">
            define([
                'View',
                'Model'
            ], function(View, Model){
                new View({ model: Model });
            });
        </script>

    </body>
</html> 
```

几乎我们执行此操作的每个页面都有不同的依赖项。我们远离创建 main.js 文件，因为这意味着我们将为这些页面中的每一页创建一个 main.js 文件。

**在我们的案例中，我们如何最好地使用 requirejs 优化器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T18:39:00.290

我在构建我的网站以使它们共享一个共同的 main.js 方面取得了更大的成功。或者至少将站点划分为共享构建的少量部分。它需要一些预先计划，但它更容易管理，并且比每页构建一个更好地利用浏览器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:14:21.920

您无法使用 require.js 优化内联脚本。你应该看看[htmlcompressor](https://code.google.com/p/htmlcompressor/)。

无论您是否使用匿名模块，拥有多个 main.js 文件都不是 require.js 的问题。

奥利维尔

# html - css：如何水平对齐不同大小的字体

> ID：14733405
> 
> 赞同：13
> 
> 时间：2013-02-06T16:03:30.577
> 
> 标签：html, css, font-size, alignment

关于SO的第一个问题！

我试图“像素完美”水平对齐两行文本，每行都有不同的字体大小。

```
<style type="text/css">
    *   { font-family: sans-serif;}
    div { float: left;}
    h1  { font-size: 150px;  margin-bottom:-30px; }
</style>

        <div>
            <h1> B </h1>
            <h6> B-L.align </h6>
        </div>
        <div>
            <h1> L </h1>
            <h6> L.align </h6>
        </div> 
```

示例：http: [//jsfiddle.net/jgYBD/1/](http://jsfiddle.net/jgYBD/1/)

如果您查看示例，您会注意到较大的字体具有更多的“？填充？” 比较小的字体。使它们错位几个像素。

我正在寻找一种方法或公式来完美地左对齐它们，而不是在左边距上使用试错法！

感谢所有想法，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:06:42.353

您看到的不是填充，而是字体的某种“字距调整”。不是真的，但有点。最大的问题是每种字体甚至每个字母都不同。尝试更换

```
<h1>B</h1> 
```

经过

```
<h1>J</h1> 
```

现在空间小了很多！

这个空间取决于字体、大小和字母。所以，我认为你无法控制它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T19:32:37.573

一个潜在的技巧：添加`:first-letter { margin-left: -0.08em; }`. 必须针对您的字体调整 em，但如果您愿意，您可以全局应用它。它确实会导致向左小幅移动，但您可以随意更改 H1 的字体大小并保持对齐。

[请参阅您的 jsFiddle 的](http://jsfiddle.net/jgYBD/15/)此更新。

但它并不能解决“J”问题，所以它可能对你来说是一个有争议的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T16:10:36.847

我知道你想要这个？：

```
h6 {
    float: left;
position: relative;
left: 11px;
} 
```

示例：http: [//jsfiddle.net/jgYBD/4/](http://jsfiddle.net/jgYBD/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T16:07:44.893

试试这个

`h6 { padding: 0 10px; }`

# spring - 使用 Spring 3 在 REST 中登录/注销

> ID：14733418
> 
> 赞同：21
> 
> 时间：2013-02-06T16:04:32.597
> 
> 标签：spring, rest, spring-security, spring-webflow, spring-3

我们正在使用 Spring 3 开发 RESTful Web 服务，我们需要具有登录/注销功能，例如`/webservices/login/<username>/<password>/`和`/webservices/logout`. 会话应存储在上下文中，直到会话超时或注销以允许使用其他 Web 服务。任何访问没有会话信息的 web 服务的请求都应该被拒绝。为这种情况寻找最先进的解决方案。

我实际上是在复活[Spring Security 3 programmatically login](https://stackoverflow.com/questions/3946344)此处提出的问题，但仍未得到正确回答。请同时在 web.xml 中指定所需的更改。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-06T17:38:02.563

我建议完全手动定义您的 Spring Security 过滤器。这并不难，您可以完全控制您的登录/注销行为。

首先，您将需要标准的 web.xml 简介来将过滤器链处理委托给 Spring（如果您不在 Servlet API 版本 3 上，请删除异步支持）：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <async-supported>true</async-supported>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

现在，在安全上下文中，您将为每个路径分别定义过滤器。过滤器可以验证用户、注销用户、检查安全凭证等。

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <sec:filter-chain-map path-type="ant">
        <sec:filter-chain pattern="/login" filters="sif,wsFilter"/>
        <sec:filter-chain pattern="/logout" filters="sif,logoutFilter" />
        <sec:filter-chain pattern="/rest/**" filters="sif,fsi"/>
    </sec:filter-chain-map>
</bean> 
```

上面的 XML 告诉 Spring 通过过滤器链将请求传递给特定的上下文相关 URL。任何过滤器链中的第一件事都是建立安全上下文 - 'sif' bean 负责处理。

```
<bean id="sif" class="org.springframework.security.web.context.SecurityContextPersistenceFilter"/> 
```

链中的下一个过滤器现在可以将数据添加到安全上下文（读取：登录/注销用户），或者根据所述安全上下文决定是否允许访问。

对于您的登录 URL，您将需要一个过滤器，该过滤器从请求中读取身份验证数据，对其进行验证，然后将其存储在安全上下文中（存储在会话中）：

```
<bean id="wsFilter" class="my.own.security.AuthenticationFilter">
  <property name="authenticationManager" ref="authenticationManager"/>
  <property name="authenticationSuccessHandler" ref="myAuthSuccessHandler"/>
  <property name="passwordParameter" value="pass"></property>
  <property name="usernameParameter" value="user"></property>
  <property name="postOnly" value="false"></property> 
```

您可以使用 Spring generic `UsernamePasswordAuthenticationFilter`，但我使用自己的实现的原因是继续过滤器链处理（默认实现假定用户将在成功的身份验证时被重定向并终止过滤器链），并且每次用户名和密码传递到时都能够处理身份验证它：

```
public class MyAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

@Override
protected boolean requiresAuthentication(HttpServletRequest request, HttpServletResponse response) {
    return ( StringUtils.hasText(obtainUsername(request)) && StringUtils.hasText(obtainPassword(request)) );
}

@Override
protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,
        Authentication authResult) throws IOException, ServletException{
    super.successfulAuthentication(request, response, chain, authResult);
    chain.doFilter(request, response);
} 
```

您可以为 /login 路径添加任意数量的过滤器实现，例如使用 HTTP 基本身份验证标头、摘要标头进行身份验证，甚至从请求正文中提取用户名/密码。Spring为此提供了一堆过滤器。

我有自己的身份验证成功处理程序，它覆盖了默认的重定向策略：

```
public class AuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {

   @PostConstruct
   public void afterPropertiesSet() {
       setRedirectStrategy(new NoRedirectStrategy());
   }

    protected class NoRedirectStrategy implements RedirectStrategy {

        @Override
        public void sendRedirect(HttpServletRequest request,
                HttpServletResponse response, String url) throws IOException {
            // no redirect

        }

    }

} 
```

如果您可以在成功登录后重定向用户（重定向 URL 可以自定义，请查看文档）

定义将负责检索用户详细信息的身份验证管理器：

```
<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider ref="myAuthAuthProvider"/>
</sec:authentication-manager>

 <bean id="myAuthAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <property name="preAuthenticatedUserDetailsService">
        <bean id="userDetailsServiceWrapper" class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
            <property name="userDetailsService" ref="myUserDetailsImpl"/>
        </bean>
    </property>
</bean> 
```

您必须在此处提供您自己的用户详细信息 bean 实现。

注销过滤器：负责清除安全上下文

```
<bean id="logoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter">
    <constructor-arg>
        <list>
            <bean class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"/>
        </list>
    </constructor-arg>
</bean> 
```

通用身份验证内容：

```
<bean id="httpRequestAccessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="allowIfAllAbstainDecisions" value="false"/>
    <property name="decisionVoters">
        <list>
            <ref bean="roleVoter"/>
        </list>
    </property>
</bean>

<bean id="roleVoter" class="org.springframework.security.access.vote.RoleVoter"/>

<bean id="securityContextHolderAwareRequestFilter" class="org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter"/> 
```

访问控制过滤器（应该不言自明）：

```
<bean id="fsi" class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
    <property name="authenticationManager" ref="myAuthenticationManager"/>
    <property name="accessDecisionManager" ref="httpRequestAccessDecisionManager"/>
    <property name="securityMetadataSource">
        <sec:filter-invocation-definition-source>
            <sec:intercept-url pattern="/rest/**" access="ROLE_REST"/>
        </sec:filter-invocation-definition-source>
    </property>
</bean> 
```

您还应该能够使用`@Secured`方法上的注释来保护您的 REST 服务。

上面的上下文是从现有的 REST 服务 webapp 中提取的——对于任何可能的错别字，我们深表歉意。

`sec`也可以通过使用库存Spring 标签来至少完成这里实现的大部分内容，但我更喜欢自定义方法，因为这给了我最大的控制权。

希望这至少能让你开始。

# c# - 以编程方式获取使用概览

> ID：14733420
> 
> 赞同：1
> 
> 时间：2013-02-06T16:04:34.393
> 
> 标签：c#, azure

我目前有一个 Windows Azure 试用帐户。在“网站”类别下，您可以看到已部署网站的使用概览：

[http://imageshack.us/scaled/landing/854/azureo.png](http://imageshack.us/scaled/landing/854/azureo.png)

是否有可能以某种方式以编程方式获取此信息（已使用和最大）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:46:06.097

否。目前无法以编程方式检索此信息，因为这背后的 API（我假设这背后有一个 API）是不公开的。

# c++ - 全局布尔变量和模板

> ID：14733422
> 
> 赞同：1
> 
> 时间：2013-02-06T16:04:54.487
> 
> 标签：c++, templates

在一个 c++ 类中，我在构造函数中设置了一个全局布尔变量 *const_var* 并在其他地方保持不变；在我的类中有很多关于这个变量的*if 条件*，为了优化代码我想使用模板 es：**template < bool const_var>和带有****X< true>** ()的实例对象

我能怎么做？谢谢

这是一个没有模板的简单类：

.h 文件

```
class X {
public:
bool const_var;

X(bool b);
void method1();

void method2();
void method3();
}; 
```

.cpp 文件

```
X::X(bool b){
const_var=b; //unchanged elsewhere
}

void X::method1(){
 ...
 if(const_var==true)
 ...
 if(const_var==false)
 ...
}

void X::method2(){
 ...
 if(const_var==true)
 ...
 if(const_var==true)
 ...
}

void X::method3(){
 ...
 if(const_var==false)
 ...
 if(const_var==true)
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:21:53.923

您必须将类定义更改为类模板定义：

```
template <bool const_var>
class X
{
public:
  X();
  void method1();
  void method2();
  void method3();
}; 
```

在实现中，您将执行以下操作：

```
template <bool const_var>
X<const_var>::X() {}

template <bool const_var>
X<const_var>::method1()
{
  //...
  if (const_var)
  //...
  if (!const_var)
  //...
}

//dtto for method2 and method3 
```

`if`s 将由编译器优化。

但是，模板必须显式实例化，或者它们的定义必须在每个使用它们的翻译单元中可用。这意味着您必须**将**函数体移动到头文件中，**或者**将以下行添加到 .cpp 中：

```
template class X<true>;
template class X<false>; 
```

另请注意，当您更改`X`为类模板时，`X`将不再是类型；只有`X<true>`和`X<false>`是类型。这意味着您不能，例如，声明一个 variable `X x1(true);`，它必须是 eg `X<true> x1;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:26:19.387

我不认为模板最适合在这里应用。您有一个基于常量布尔值假装为 2 个不同事物的对象。你为什么不把 X 分成 2 个不同的对象呢？

```
class Thing
{
   public:
       virtual ~Thing(){}
       virtual method1() = 0;
       virtual method2() = 0;
       etc...
 };

 class TrueThing : public Thing
 {
    virtual method1(){//performs true branch}
    virtual method2(){//true branch}
 }
 class FalseThing : public Thing
 {
    virtual method1(){//performs false branch}
    etc...
 }

 void main()
 {
     TrueThing true_thing;
     FalseThing false_thing;
     true_thing.method1();
     false_thing.method1();
 } 
```

# ant - 使用 ANT 从属性中拆分值

> ID：14733426
> 
> 赞同：0
> 
> 时间：2013-02-06T16:05:00.057
> 
> 标签：ant, foreach

我有以下代码：

```
<dirset id="aa" dir="FOLDER" includes="example*" excludes=".*">
</dirset>
<pathconvert pathsep="," property="bb" refid="aa">
<mapper type="flatten"/> 
</pathconvert>  
<echo message="LIST:${bb}"/> 
```

并且输出例如'examle.aa,example.bb'

我想为每个示例调用另一个目标。* ..你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:18:33.717

尝试[antcontrib](http://ant-contrib.sourceforge.net/)的循环功能。这是一个例子

```
<project>

    <target name="test">
        <taskdef resource="net/sf/antcontrib/antlib.xml" classpath="./lib/ant-contrib-1.0.jar" />

        <for param="file">
            <dirset dir="." />

            <sequential>
                <task dir="@{file}" />
            </sequential>
        </for>
    </target>

    <macrodef name="task">
        <attribute name="dir" />

        <sequential>
            <echo>@{dir}</echo>
        </sequential>
    </macrodef>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:38:41.347

宏定义可以为此工作，您可以根据当前属性使用自定义属性或元素调用它：

[宏定义](http://ant.apache.org/manual/Tasks/macrodef.html)

# c++ - 在 const 函数中返回“this”指针

> ID：14733431
> 
> 赞同：3
> 
> 时间：2013-02-06T16:05:10.303
> 
> 标签：c++

我一直在学习 C++，目前正在上课练习。我创建了一个类来存储玩家的姓名和分数，并定义了操作数据和显示数据的函数。

我创建的功能之一是比较两个玩家的分数，并将指针返回给分数较高的玩家。这是功能：

```
Player * Player::highestScore(Player  p2)const
{
    if(p2.pScore>pScore)
    {
        return &p2;
    }
    else
    {
        return this;
    }
} 
```

从主要我创建以下播放器：

```
Player p1("James Gosling",11);
Player *p4 = new Player("Bjarne Stroustrup",5); 
```

我调用highestScore函数：

```
Player *highestScore = p1.highestScore(*p4); 
```

但是，正如您在阅读函数本身时可能已经注意到的那样，当我将指针返回到调用该方法的对象时（如果它具有更高的分数），我收到一条错误消息：

```
return value type does not match the function type 
```

当我将函数的返回类型声明为 a 时，此问题似乎消失了`const`，如下所示：

```
const Player * Player::highestScore(Player  p2)const 
```

让我困惑的部分是为什么它允许我返回`return &p2`，它不是`const`也不允许我返回`this`，它是一个指向调用函数的对象的指针，它也不是`const`？此外，即使我将函数返回类型声明为 const，它仍然允许我这样做`return &p2`，即使传递给参数的参数不是 const Player 对象？

对不起，如果这个问题看起来很奇怪，或者我想要做的是非常糟糕的编程，但这只是为了边做边学。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:06:59.587

> 令我困惑的部分是为什么它允许我返回 &p2，它不是 const 并且不允许我返回 this，它是指向调用函数的对象的指针，它也不是 const ?

`this` *is* `const`（或者更准确地说，是一个指向- 的指针`const`）在`const`成员函数中，就像所有数据成员一样：

```
#include <iostream>
#include <type_traits>

struct A
{
    void foo()
    {
        std::cout << std::is_same<decltype(this), const A*>::value << '\n';
    }

    void bar() const
    {
        std::cout << std::is_same<decltype(this), const A*>::value << '\n';
    }
};

int main()
{
    A a;
    a.foo();
    a.bar();
} 
```

[输出](https://ideone.com/EtLglV)：

```
0
1 
```

* * *

> 此外，即使我将函数返回类型声明为 const，它仍然允许我返回 &p2，即使传递给参数的参数不是 const Player 对象？

我们看不到您尝试了什么，但大概是`Player* const`，这与`Player const*`(或`const Player*`) 不同。你可以添加`const`ness`&r2`就好了；拿走`const`是另一回事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:07:30.770

const 和非 const 方法之间的区别在于，第一个`this`指针在 const 中，而在后者中则不是。因此，当您尝试从 const 函数返回非常量指针并返回 this 时，编译器会抱怨，因为存在`this`const 并且 const-ness 无法自动删除。

`&p2`只是一个指向参数的指针，因此它不是 const。请记住，尽管这是指向局部变量的指针，并且返回**它**`&p2`是不安全的。

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T16:12:51.823

当您有一个“const”函数时，您非常有希望“我们不会在此调用中更改对象实例”。编译器为该类型的函数生成`this`一个`const T* this`（其中 T 是您的类的类型，例如`Player`）。

显然，返回指向`const`非`const`指针对象的指针违反了规则 - 因为一旦某些代码具有`const`指向对象的非指针，代码就可以修改对象......这违反了“此功能不会修改”。

所以`const`在这里添加到函数的返回类型是正确的解决方案。

您可能还想更改代码，以便将 a`const *Player p2`作为输入 - 您当前的代码返回一个指向局部变量的指针 [它恰好是一个参数，但原理相同 - 当函数调用有回来]。

编辑：除非您实际上是在具有属性的函数中返回某些内容的副本（例如整数、字符串或分配有例如 new 的新结构），`const`否则返回类型应该是`const`.**

# matlab - 使用 MATLAB 在 Profile 上查找最小和最大点

> ID：14733433
> 
> 赞同：1
> 
> 时间：2013-02-06T16:05:14.333
> 
> 标签：matlab, signal-processing

![轮廓](../Images/84d203bb3af3efa9382493150fb58e46.png)

我通过以下代码提取了容器横截面的轮廓

```
 imshow(image); % image is not shown
 [cx,cy,c,xi,yi] = improfile; 
```

这里 c 是沿剖面的强度，我使用以下方法绘制它们：

```
 x=1:length(c);
 figure
 plot(x,c,'o')
 axis([0 45 80 150]) 
```

它看起来像我上传的那个。c 是 33X1 强度向量，其中，c=[123 126 131 138 139 141 143 143 144 141 136 126 102 96 91 100 100 113 109 96 94 90 101 107 116 123 127 131 1291 133];1

我想检测 c 的索引以找到轮廓中的 A（左侧最大值）、B（右侧最大值）、C（左侧最小值）、D（rt 侧最小值）和 E（中间）点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:15:20.847

`peakdet`在公共领域（[http://www.billauer.co.il/peakdet.html](http://www.billauer.co.il/peakdet.html) ）发布的功能似乎在第一次尝试时就可以完成这项工作。您可以尝试使用函数的第二个参数来增加/减少选择性。

```
c=[123 126 131 138 139 141 143 143 144 141 136 126 102 96 91 100 100 113 109 96 94 90 101 107 116 123 127 130 131 132 131 129 131];
[ma mi]=peakdet(c,1);

ma =
     9   144
    18   113
    30   132

mi =
    15    91
    22    90
    32   129 
```

编辑：这个问题可能很有趣：[如何区分 MATLAB 中的双峰和单峰阵列？](https://stackoverflow.com/questions/10303968/how-to-differentiate-between-a-double-peak-and-a-single-peak-array-in-matlab/10303971#10303971)

# android - 如何使用应用内结算购买 5 件商品？

> ID：14733434
> 
> 赞同：0
> 
> 时间：2013-02-06T16:05:15.330
> 
> 标签：android, in-app-billing

如果我想通过 android 中的“应用内结算”销售东西，但我希望用户可以选择购买的金额。

我必须预定义所有金额吗？或者我可以以某种方式（如何？）发送“应用内结算”项目的金额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:12:56.623

正如我所读到的，您实际上不能同时购买多件商品，正如他们在此处所说的那样，您也不能要求您的产品的多个副本，除非上次购买是以前消费过的。

[http://developer.android.com/google/play/billing/billing_overview.html](http://developer.android.com/google/play/billing/billing_overview.html)

[Android : 应用内购买](https://stackoverflow.com/questions/12637161/android-in-app-purchase)

虽然，你可以做的是，迭代你的购买请求（好吧，这不是一个优雅的方法）或定义特定数量的包（假设你想卖额外的生命，你可以卖 1， 5 或 10）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:28:45.887

我刚刚在 Audio Control Lite 中做了类似的事情。我允许用户选择他们想要解锁的功能（6 个可供选择）。根据我的经验，我知道您必须预先定义数量，但是如果您想将用户定向到您想要显示的 5 个，您可以设置 20 多种不同的商品进行销售。我最终创建了一个购买屏幕，其中包含每个功能的描述和购买按钮。您最终会通过预定义的 SKU 来告诉 Google 他们正在购买哪些商品。

# facebook - Facebook API - 没有过期的用户访问令牌

> ID：14733435
> 
> 赞同：4
> 
> 时间：2013-02-06T16:05:16.020
> 
> 标签：facebook, facebook-access-token

[我在这里](https://developers.facebook.com/roadmap/offline-access-removal/)读到，我可以在调用这个时为用户获取一个不会过期的访问令牌：

```
https://graph.facebook.com/oauth/access_token?             
client_id=APP_ID&
client_secret=APP_SECRET&
grant_type=fb_exchange_token&
fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

很明显什么`client_id`和`client_secret`是但到底是什么`grant_type`和`fb_exchange_token`？

我设法在用户的时间线/针板上发布了一些东西，但正如`access_token`我使用的那样`APP_ID + | + APP_SECRET`。效果很好。

顺便说一句：我需要权限`manage_pages`，因为我想将照片添加到用户相册。

**任何想法这两个属性是什么以及我在哪里可以获得它们？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T12:08:39.263

`grant type`（第三个参数）不过是字符串`"fb_exchange_token"`

和

`fb_exchange_token`（第四个参数）是`ACCESS_TOKEN`已经过期或即将过期的前一个。

因此，例如，您的请求 URL 应类似于：

```
https://graph.facebook.com/oauth/access_token
client_id=783921075894231403
&client_secret=78789230452234235412793042
&grant_type=fb_exchange_token
&fb_exchange_token=60as98dg690758a0sd5g57869608s9da8g6sda96g5s9adg 
```

# activepivot - 向 ActivePivot 添加新度量？

> ID：14733436
> 
> 赞同：0
> 
> 时间：2013-02-06T16:05:17.420
> 
> 标签：activepivot

我正在尝试向现有 ActivePivot 多维数据集添加新度量。我开始向 Sanbox 项目添加度量。它工作得很好。我能够看到新的度量，并且得到了所有元素的总和。我添加了以下几行：

```
EquityDerivativesCube.xml:
  <measure name="test" aggregationFunctions="SUM"/>

SandboxFields.xml:
    <field name="test" type="double" defaultValue="0" />

PNLCalculator#PNLCalculatorResult.java
  private Double    test;
  public Double getTest() {
    return test;
  }

  public void setTest(Double test) {
    this.test = test;
  }

PNLCalculator.enrichTrade()
  ...
  result.setTest(2.);
  ... 
```

在实际应用中，这种方法效果不佳。我添加了以下几行：

进入

```
RealWorldApplicationCube.xml
  <measure name="Test" aggregationFunctions="SUM" folder="Dev\Test" /> 
```

进入

```
RealWorldApplicationSchema.xml
  <field name="Test"        type="double" defaultValue="0" /> 
```

数据从 CSV 文件加载。有一个 CSV 文件定义了 Applcation 可以处理的每个文件的所有字段。

```
...;Test=N/A; 
```

还有一个计算器可以处理所有其他措施。我像这样扩展它：

```
public void computeTest(IRelationalEntry entry) {
  double price = org.apache.commons.collections.MapUtils.getDouble(entry, "price", 0.);
  double test = price * 2;

  entry.put("Test", test);
} 
```

当我运行应用程序时，我遇到了几个异常，我看不到新的措施。这是一个例外：

```
com.quartetfs.fwk.transaction.TransactionException: [Transaction manager: ActivePivot] Prepare commit operation failed because an exception has been raised.  You must now rollback the transaction.    at com.quartetfs.fwk.transaction.impl.ATransactionManager.prepareCommit(ATransactionManager.java:130)   at com.quartetfs.fwk.transaction.impl.ATransactionManager.commit(ATransactionManager.java:142)  at com.quartetfs.tech.store.impl.ARelationalTransactionManager.commit(ARelationalTransactionManager.java:139)   at com.quartetfs.tech.store.impl.ARelationalTransactionManager.commit(ARelationalTransactionManager.java:51)    at com.real.world.application.impl.ATransactionExceptionAwareHandler.doSubmit(ATransactionExceptionAwareHandler.java:97)    at com.real.world.application.impl.ATransactionExceptionAwareHandler.submit(ATransactionExceptionAwareHandler.java:51)  at com.quartetfs.tech.store.impl.TransactionHandlerListener.receive(TransactionHandlerListener.java:61)     at com.quartetfs.tech.store.csv.impl.FilteredSource.receive(FilteredSource.java:56)     at com.quartetfs.fwk.messaging.impl.ParserContext.publishChunk(ParserContext.java:457)  at com.quartetfs.fwk.messaging.impl.ParserContext.awaitTermination(ParserContext.java:382)  at com.quartetfs.fwk.messaging.impl.CSVSource.process(CSVSource.java:308)   at com.quartetfs.fwk.messaging.impl.CSVSource.onFileAction(CSVSource.java:282)  at com.quartetfs.fwk.messaging.impl.AFileWatcher.filesAction(AFileWatcher.java:277)     at com.quartetfs.fwk.messaging.impl.AFileWatcher.doInterval(AFileWatcher.java:267)  at com.quartetfs.fwk.messaging.impl.AFileWatcher.startScheduling(AFileWatcher.java:125)     at com.quartetfs.fwk.messaging.impl.AFileWatcher.start(AFileWatcher.java:107)   at com.quartetfs.fwk.messaging.impl.CSVSource.start(CSVSource.java:182)     at com.quartetfs.tech.store.csv.impl.ExtendedCSVDataModelFactory$1.run(ExtendedCSVDataModelFactory.java:217)    at java.lang.Thread.run(Thread.java:662) Caused by: com.quartetfs.fwk.transaction.TransactionException: [Transaction manager: RealWorldApplicationSchema] Prepare commit operation failed because an exception has been raised.  You must now rollback the transaction.     at com.quartetfs.fwk.transaction.impl.ATransactionManager.prepareCommit(ATransactionManager.java:130)   at com.quartetfs.tech.store.impl.ARelationalTransactionManager.doPrepareCommit(ARelationalTransactionManager.java:113)  at com.quartetfs.fwk.transaction.impl.ATransactionManager.prepareCommit(ATransactionManager.java:128)   ... 18 more Caused by: com.quartetfs.fwk.transaction.TransactionException: One of the schema transaction contribution tasks failed.     at com.quartetfs.biz.pivot.transaction.impl.ActivePivotSchemaTransaction.prepareCommit(ActivePivotSchemaTransaction.java:239)   at com.quartetfs.biz.pivot.impl.ActivePivotSchemaTransactionManager.doPrepareCommit(ActivePivotSchemaTransactionManager.java:194)   at com.quartetfs.fwk.transaction.impl.ATransactionManager.prepareCommit(ATransactionManager.java:128)   ... 20 more Caused by: java.lang.RuntimeException: com.quartetfs.biz.pivot.ClassificationException: The calculator has thrown an exception during the evaluation of the object: RelationalEntry [type=ActivePivot, key=Key [ ... ,Test=null, ...]]  at jsr166y.ForkJoinTask.completeExceptionally(ForkJoinTask.java:1116)   at jsr166y.cancellable.impl.CancellableCountedCompleter.onCompletion(CancellableCountedCompleter.java:132)  at jsr166y.CountedCompleter.tryComplete(CountedCompleter.java:391)  at com.quartetfs.biz.pivot.transaction.impl.ActivePivotSchemaTransaction$ContributeAction.afterCompute(ActivePivotSchemaTransaction.java:492)   at jsr166y.cancellable.impl.CancellableCountedCompleter.compute(CancellableCountedCompleter.java:96)    at jsr166y.CountedCompleter.exec(CountedCompleter.java:437)     at jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:265)   at jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:976)    at jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1480)   at jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:105) Caused by: com.quartetfs.biz.pivot.ClassificationException: The calculator has thrown an exception during the evaluation of the object: RelationalEntry [type=ActivePivot, key=Key [ ... ,Test=null, ...]]   at com.quartetfs.biz.pivot.classification.impl.Classifier.classifyAll(Classifier.java:114)  at com.quartetfs.biz.pivot.transaction.impl.ActivePivotSchemaTransaction$ContributeAction.compute(ActivePivotSchemaTransaction.java:446)    at com.quartetfs.biz.pivot.transaction.impl.ActivePivotSchemaTransaction$ContributeAction.computeSafely(ActivePivotSchemaTransaction.java:487)  at jsr166y.cancellable.impl.CancellableCountedCompleter.compute(CancellableCountedCompleter.java:91)    ... 5 more Caused by: com.quartetfs.biz.pivot.ClassificationException: Classification failure for level "Test": the mandatory property "Test" is not found. Contribution key: "Key [  ... ,Test=null, ...]].    at com.quartetfs.biz.pivot.classification.impl.ResultClassificationProcedure.execute(ResultClassificationProcedure.java:192)    at com.quartetfs.biz.pivot.classification.impl.ClassificationTree$ClassificationNode.execute(ClassificationTree.java:215)   at com.quartetfs.biz.pivot.classification.impl.ClassificationTree$ClassificationNode.execute(ClassificationTree.java:235)   at com.quartetfs.biz.pivot.classification.impl.ClassificationTree.execute(ClassificationTree.java:57)   at com.quartetfs.biz.pivot.classification.impl.Classifier.classify(Classifier.java:161)     at com.quartetfs.biz.pivot.classification.impl.Classifier.classifyAll(Classifier.java:110)  ... 8 more
06.02.2013 16:09:24 com.real.world.application.impl.ATransactionExceptionAwareHandler doSubmit 
```

我错过了什么？如何向多维数据集添加新度量？是什么导致计算器出现错误？

在调试代码时访问计算器方法 (computeTest()) 并将值设置为 RelationalEntry。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:25:27.953

在 ActivePivot 中添加新度量的步骤并不比您在帖子中描述的复杂。声明包含要聚合的值的字段，将该字段引用为多维数据集中的度量，以及要在其上应用的聚合函数。如果基本聚合功能不够，还可以选择您编写的后处理器。

但是您项目中的其他东西似乎会导致问题，您需要支持（数据、数据加载、另一个组件......）。StackOverflow 并不意味着问题跟踪或故障排除支持，它更多的是关于“我想这样做，我该怎么做？”。我的建议是将您的问题直接提交给 Quartet FS 客户支持 ( [http://support.quartetfs.com](http://support.quartetfs.com) )

# mysql - 如何在一个数据库表中查找一个字段的值与另一个表中的值不一样的行

> ID：14733443
> 
> 赞同：0
> 
> 时间：2013-02-06T16:05:42.820
> 
> 标签：mysql, sql

我的 SQL 知识非常有限，所以请多多包涵！

我试图根据与另一个表中的字段不匹配的字段之一返回一个表中的行。

我的一个表有一个 url 和站点字段，比如表 A。另一个表列出了一些站点，使用站点的名称，表 B。

例如，表 A 的 url 字段可能是“ [http://google.it/aaa](http://google.it/aaa) ”，其名称字段是“google”

在表 BI 中有一个存储在“站点”和“名称”字段下的站点列表。以下示例：

一项：网站 google.co.uk

名称谷歌

另一个条目：网站 google.fr

名称谷歌

第三个条目：网站 bing.com

名称 bing

我想返回表 A 中的值，其中 url 字段与表 B 中的“站点”字段不匹配。为此，我需要使用表 A 中的“名称”字段来查找表中的“站点”值B - 如果没有匹配项，我希望返回条目。所以在这种情况下，我的 url 是' [http://google.it/aaa](http://google.it/aaa) '，所以当它检查表 B 中是否有 google.it 的条目时，它不会找到任何东西并因此返回它。

我正在使用 MySQL db，这两个表位于不同的模式中。我已经尝试了一些 SQL，这就是我想出的：

SELECT tablea.url, tablea.name FROM schema1.tablea inner JOIN schema2.tableb ON tablea.url NOT LIKE ('%' || tableb.site || '%')

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:14:03.047

你想使用`EXISTS`and `NOT EXISTS`：

```
SELECT 
    tablea.url, 
    tablea.name 
FROM 
    schema1.tablea 
WHERE
    EXISTS
    (SELECT
        NULL
    FROM
        schema2.tableb
    WHERE
        tablea.name = tableb.name)
AND NOT EXISTS
    (SELECT
         NULL
    FROM
        schema2.tableb 
    WHERE
        tablea.name = tableb.name
    AND tablea.url LIKE ('%' || tableb.site || '%')) 
```

这将为您提供 tablea 中的所有行，其中 tableb 中存在具有相同名称的行，但 tableb 中不存在具有相同名称且其站点包含来自 tablea 的 url 的行。

# ajax - 单击链接后未调用 $.ajax 函数

> ID：14733446
> 
> 赞同：1
> 
> 时间：2013-02-06T16:05:43.837
> 
> 标签：ajax, jquery, jquery-mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:12:33.743

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:10:09.713

我认为您正在寻找类似的东西：

```
 window.onbeforeunload = function () {
     // stuff do do before the window is unloaded here.
 } 
```

这在用户离开当前页面之前运行。

这意味着您可以强制用户导航到您的页面，该页面将正确刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T17:07:30.757

如果您只是向后导航一页，请尝试使用此操作而不是后退按钮：

```
<a href="javascript:history.go(-1)">BACK</a> 
```

或者试一试：

```
$.mobile.changePage(href, {changeHash: false }); 
```

# ember.js - 如何使用 Ember Data 将排序顺序保存回服务器

> ID：14733447
> 
> 赞同：1
> 
> 时间：2013-02-06T16:05:43.850
> 
> 标签：ember.js, ember-data

假设我们有一个有序的待办事项列表，最上面的就是我们接下来要处理的：

```
App.TodoItem = DS.Model.extend({
    title: DS.attr("string")
});

// comes back ordered from the server
var todos = App.TodoItem.find() 
```

然后，我们通过拖放界面重新排序列表。

API 有一个端点`/todos/sort`，期望以新的顺序发布一组 ID。这可以改变，但这是我们现在所拥有的。

您将如何将新订单保存到服务器？

我想我可以添加一个`position`属性并在订单更改时更新所有项目的属性，然后调用`commit`商店 - 但是当我们想要的只是新订单时，这将通过网络发送所有数据。另外，除非我们实施批量保存，否则它会发送大量请求。

目前我正在考虑完全绕过这部分的 Ember-Data，只是`$.ajax`在控制器中有一个普通的旧请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:49:38.980

创建一个模型`TodoList`，其中包含有关待办事项的元数据。该模型的一个（我猜现在唯一的）属性是位置数组。因此，当用户订购待办事项列表时，无需更新每个待办事项，而是更新容器。

# mysql - SQL查询在邻接表/闭包表中找到最终覆盖的ID

> ID：14733449
> 
> 赞同：0
> 
> 时间：2013-02-06T16:05:47.983
> 
> 标签：mysql, sql, adjacency-list, transitive-closure-table

我有一个名为的邻接表（为了便于递归`attribute`，它还有一个名为 mapped 的闭包表）。`attribute_closure`

表中的每个条目`attribute`都是 4 种分层类型之一，每种类型都可以继承*和*覆盖其父类型的条目。按层次结构，四种可能的类型是`category`、`product_line`、`product`、`model`。所以`category`定义了一个属性树，它继承并且可以在任何时候覆盖，`product_line`等等。`product``model`

这是预先存在的应用程序的预先存在的结构，因此任何重组建议都是不可用的:-)

因此，邻接列表`attribute`具有以下列：`id, parent_id, overrides_id`，`overrides_id`（如果设置）是对 的引用`attribute.id`，对于 也是如此`parent_id`。如果`overrides_id`设置，`parent_id`将始终匹配被覆盖属性的值`parent_id`。

对于每个层次类型，都有一个将类型映射到属性的支持表，即 - `category_id, attribute_id`。

**我需要能够取回完整的属性树，并尊重所有覆盖。**

示例数据（此特定示例仅涉及产品级别，但您明白了）。请根据需要使用您自己的示例数据进一步充实。

`attribute`

```
+-------+-----------+--------------+
|   id  | parent_id | overrides_id |
+-------+-----------+--------------+
|  6036 |      5931 |         NULL |
|  6069 |      5931 |         6036 |
| 30955 |      5931 |         6069 |
+-------+-----------+--------------+ 
```

`category_attribute`

```
+-------------+--------------+
| category_id | attribute_id |
+-------------+--------------+
|           2 |         6036 |
+-------------+--------------+ 
```

`product_line_attribute`

```
+-----------------+--------------+
| product_line_id | attribute_id |
+-----------------+--------------+
|              16 |         6069 |
+-----------------+--------------+ 
```

`product_attribute`

```
+------------+--------------+
| product_id | attribute_id |
+------------+--------------+
|         69 |        30955 |
+------------+--------------+ 
```

查询包含上述属性的树，应该只`30955`返回属性 id，因为显示的其他 2 个属性应该在 30955 之前被废弃。

如前所述，我还有一个典型的闭包表，它映射出`ancestor`, `descendant`, `level`. 如果您可以包含使用闭包返回具有覆盖已生效的树的结果，则额外加分。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:59:59.187

我最终采用的解决方案是构建第二个闭包表，它表示覆盖的层次结构（类似于基于 parent_id 构建闭包，但使用 overrides_id）。这使我可以查询以查找任何给定属性的整个覆盖层次结构。

我曾希望找到一个查询到所有这些，但是使用第二个闭包表更简单，性能更好等等。

# c# - C# 入门，如何调试 .NET 4.0 MVC3 项目？

> ID：14733450
> 
> 赞同：3
> 
> 时间：2013-02-06T16:05:55.833
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我正在尝试自学 C#，并想知道是否有人可以帮助我解决看似基本的 C# 问题。我用这段代码创建了一个 C# 文件，开始调试，但在任何地方都看不到“Hello World”。

```
using System;
class Hello
{
   static void Main() {
      Console.WriteLine("hello, world");
   }
} 
```

[http://msdn.microsoft.com/en-us/library/aa664628(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664628%28v=vs.71%29.aspx)

所以我想我的问题是这个。我应该在哪里看到“Hello World”？我已经检查了控制台和浏览器。是否需要进行一些设置才能正确调试 C# 文件。我可能错过了关于 C# 如何工作的大图景。我习惯了 PHP，在那里我可以做这样的事情......

```
<?php
   include 'my file';
   echo 'my file included';
?> 
```

任何帮助将非常感激。谢谢。

**编辑：**

感谢大家的帮助。你们都帮助我理解和认识了很多关于 C# / .NET 的事情。经过广泛的故障排除后，很明显问题不是调试工作的问题，而是我的 C# 文件似乎没有正确挂钩/包含（不确定它在 .NET 术语中的名称）到其余部分的事实该项目。无论如何，我接受**keyboardP的**回答，因为他首先回答并且技术上给了我所有正确的答案。还要感谢**dasblinkenlight**，他也非常乐于助人。

****附加解决方案：****

 **在 SO 用户的洞察之后。这篇文章帮助我指出了正确的方向。 [http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T16:08:21.910

我猜这是因为命令提示符窗口正在立即关闭。您可以通过在语句`Console.ReadLine();`后添加来避免这种情况。`WriteLine`这将等待您在关闭提示窗口之前按回车键。

或者，假设您使用的是 Visual Studio，您可以在不附加调试器的情况下按`CTRL`+运行构建`F5`。

**编辑**- 基于添加的额外信息，即您使用的是 ASP.NET 而不是控制台应用程序。

首先，你想达到什么目的？如果你想输出调试信息，那么你可以`Debug.WriteLine`代替`Console.WriteLine`

```
System.Diagnostics.Debug.WriteLine("Hello World"); 
```

这会将文本输出到 Visual Studio 底部的“输出”窗口（默认情况下）。

**编辑 2**由于您只想将随机文本写入页面，您可以使用

```
HttpContext.Current.Response.Write("Hello World"); 
```

有时会出现[问题](https://stackoverflow.com/questions/11866025/sp2010-httpcontext-response-write-not-working-for-linkbuttons-onclick-event)，`Response.Write`但对于您想要在这里做的事情应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:13:01.687

使用*断点*。通过单击“装订线”区域在方法的末尾设置断点。将出现一个红色圆圈，如下所示：

![断点已设置](../Images/bc98d889407023686074f1d223386162.png)

现在通过单击带有绿色三角形的按钮或按 以调试模式运行您的程序`F5`。程序将运行，在控制台（一个单独的窗口）中产生输出。一旦它到达你的断点，你可以检查控制台的输出，如下所示：

![断点被击中](../Images/ad15df6598259a9c1184ee6a15798f52.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T16:22:54.140

您正在阅读控制台应用程序的教程，但是您正在尝试创建一个 ASP.NET 应用程序。我建议阅读[ASP.NET 教程](http://msdn.microsoft.com/en-us/library/gg615484%28v=vs.88%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:15:52.100

就像很多人之前说的：它过得太快了，所以要么使用断点，要么使用 Read...

您还可以使用以下命令写入您的 Visual Studio 输出窗口[`System.Diagnostics.Debug.Write`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.write.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T16:13:26.700

您需要在要调试的行上放置断点 放置断点的捷径是 ctrl D,n 然后您可以使用 f10 和 f11 功能键跳过或进入代码**

# c# - DevExpress TreeListControl 创建自定义单元格模板

> ID：14733451
> 
> 赞同：1
> 
> 时间：2013-02-06T16:05:57.830
> 
> 标签：c#, wpf, xaml, devexpress

我无法使用[此控件绑定内容。](http://documentation.devexpress.com/#WPF/clsDevExpressXpfGridTreeListControltopic)

我想创建一个自定义单元格模板，而不是默认的。使用默认单元格模板时，我的绑定有效。这是我的项目：

**XAML：**

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" 
        xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/grid" >
    <Window.Resources>

    </Window.Resources>
    <Grid>
        <dxt:TreeListControl Name="treeList">
            <dxt:TreeListControl.Columns>

                <!-- Custom Column -->
                <dxt:TreeListColumn FieldName="Name" Header="Name">
                    <dxt:TreeListColumn.CellTemplate>
                        <DataTemplate >
                            <TextBlock Text="{Binding Path=Name}" Foreground="Blue" />
                        </DataTemplate>
                    </dxt:TreeListColumn.CellTemplate>                    
                </dxt:TreeListColumn>

                <!-- default Column -->
                <dxt:TreeListColumn FieldName="Position" Header="Position"/>

            </dxt:TreeListControl.Columns>
            <dxt:TreeListControl.View>
                <dxt:TreeListView Name="treeListView1" AutoWidth="True"
                                  KeyFieldName="ID" ParentFieldName="ParentID"/>
            </dxt:TreeListControl.View>
        </dxt:TreeListControl>
    </Grid>
</Window> 
```

**代码背后：**

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Documents;

namespace WpfApplication2
{
    public partial class MainWindow : Window
    {        
        public MainWindow ( )
        {
            InitializeComponent( );
            treeList.ItemsSource = GetStuff( );
            treeListView1.ExpandAllNodes( );
        }

        public static List<Employee> GetStuff ( )
        {
            List<Employee> stuff = new List<Employee>( );

            stuff.Add( new Employee( ) { ID = 1 , ParentID = 0 , Name = "Gregory S. Price" } );
            stuff.Add( new Employee( ) { ID = 2 , ParentID = 0 , Name = "Irma R. Marshall" } );
            stuff.Add( new Employee( ) { ID = 3 , ParentID = 0 , Name = "John C. Powell" } );

            stuff.Add( new Employee( ) { ID = 6 , ParentID = 2 , Position = "Brian C. Cowling" } );
            stuff.Add( new Employee( ) { ID = 7 , ParentID = 2 , Position = "Thomas C. Dawson" } );
            stuff.Add( new Employee( ) { ID = 8 , ParentID = 2 , Position = "Angel M. Wilson" } );
            stuff.Add( new Employee( ) { ID = 9 , ParentID = 2 , Position = "Bryan R. Henderson" } );

            stuff.Add( new Employee( ) { ID = 10 , ParentID = 3 , Position = "Harold S. Brandes" } );
            stuff.Add( new Employee( ) { ID = 11 , ParentID = 3 , Position = "Michael S. Blevins" } );
            stuff.Add( new Employee( ) { ID = 12 , ParentID = 3 , Position = "Jan K. Sisk" } );
            stuff.Add( new Employee( ) { ID = 13 , ParentID = 3 , Position = "Sidney L. Holder" } );

            stuff.Add( new Employee( ) { ID = 14 , ParentID = 1 , Position = "Brian C. Cowling" } );
            stuff.Add( new Employee( ) { ID = 15 , ParentID = 1 , Position = "Thomas C. Dawson" } );
            stuff.Add( new Employee( ) { ID = 16 , ParentID = 1 , Position = "Angel M. Wilson" } );
            stuff.Add( new Employee( ) { ID = 17 , ParentID = 1 , Position = "Bryan R. Henderson" } );

            return stuff;
        }        
    }
}

public class Employee
{
    public int ID { get; set; }
    public int ParentID { get; set; }
    public string Name { get; set; }
    public string Position { get; set; }
} 
```

为什么我的 ( `<!-- Custom Column -->`) 不显示员工姓名？我该怎么做才能将它绑定到该属性？如果我删除 CellTemplate 它可以工作，但我想要我的自定义样式......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:50:56.530

好的，我将在 Devex 团队之前回答 :)

改变这个：

```
<TextBlock Text="{Binding Path=Name}" Foreground="Blue" /> 
```

对此：

```
<TextBlock Text="{Binding Path=Data.Name}" Foreground="Blue" /> 
```

或者简单地说：

```
<TextBlock Text="{Binding Data.Name}" Foreground="Blue" /> 
```

# backbone.js - 骨干模板：使用HBS动态切换模板

> ID：14733457
> 
> 赞同：0
> 
> 时间：2013-02-06T16:06:17.890
> 
> 标签：backbone.js, requirejs

我在这里找到了如何使用 HBS 插件管理模板的[示例。](https://stackoverflow.com/questions/13997828/backbone-managing-templates)这似乎是一个很好的解决方案。@machineghost 建议使用 RequireJS 来包含这样的模板：

```
define(['template!path/to/someTemplate'], function(someTemplate) {
    var MyNewView = BaseView.extend({template: someTemplate});
    $('body').append(new MyNewView().render().el);
} 
```

这很好，除了我需要动态切换模板。这是我的一个观点的一个例子：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tablesView'
], function($, _, Backbone, tableModel, tablesCollection, tablesView) {
    var t = new tablesCollection(null, {url: 'applications-lab'});
    return new tablesView({ collection: t, template: 'applications-lab-template', url: 'applications-lab'});
}); 
```

如您所见，我在渲染视图时传入了模板。我想知道的是我可以将一个变量传递给`define`告诉 Backbone 使用哪个模板路径的语句吗？我是 Backbone 的新手，尤其是 RequireJS，我不确定。建议任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:31:21.087

初步说明：

*   require.js 不允许在模块定义中使用参数，define 接受依赖数组和定义函数：

    ```
    define(['dep1', 'dep2', ...], function(dep1, dep2) {
    }) 
    ```

*   我不会定义视图，实例化它并将其 el 注入同一个模块，但可以随意混合和匹配您的口味

让我们从一个使用默认模板定义简单视图的模块开始，比如说*views/templated.js*

```
define(['backbone', 'hbs!path/to/defaultTemplate'], 
    function(Backbone, defaultTemplate) {

    var MyNewView = Backbone.View.extend({
        template: defaultTemplate,

        initialize: function(opts) {
            opts = opts || {};

            // use the template defined in the options or on the prototype
            this.template = opts.template || this.template; 
        }
     });

     return MyNewView;
}); 
```

现在您只需使用 require 拉取视图定义和可选模板：

```
require(['views/templated', 'hbs!path/to/anotherTemplate'], 
    function(MyNewView, anotherTemplate) {

    // a view with the default template
    var v1 = new MyNewView();

    // a view with a new template
    var v2 = new MyNewView({
        template: anotherTemplate
    });
}); 
```

要使用覆盖的默认模板创建新类，您需要定义一个新模块（*views/override.js*）

```
define(['views/templated', 'hbs!path/to/anotherTemplate'], 
    function(MyNewView, anotherTemplate) {

    var AnotherNewView = MyNewView.extend({
        template: anotherTemplate
     });

     return AnotherNewView;
}); 
```

最后，您始终可以通过直接分配新值来更改给定实例上的模板。

```
var v = new MyNewView();
v.template = tpl; 
```

模拟视图层次结构的小提琴：http: [//jsfiddle.net/nikoshr/URddR/](http://jsfiddle.net/nikoshr/URddR/)

回到你的代码，你的块可能看起来像

```
require(['models/tableModel', 'collections/tablesCollection', 'views/templated', 'applications-lab-template'], 
    function(tableModel, tablesCollection, tablesView, tpl) {

    var t = new tablesCollection(null, {url: 'applications-lab'});
    var v = new tablesView({
        collection: t,
        template: tpl
        url: 'applications-lab'
    });

    // or, if you prefer and you don't render in initialize
    v.template = tpl;
}); 
```

# asp.net - 多个 ASP.NET AJAX 进度控件

> ID：14733458
> 
> 赞同：0
> 
> 时间：2013-02-06T16:06:18.870
> 
> 标签：asp.net, ajax, servercontrols

有人可以解释如何解决这个问题吗？

两个更新面板，两个进度控件，两个命令按钮。

当我单击第一个按钮时，我可以看到第一个异步更新的进度。当我单击第二个命令按钮时 - 如果第一个异步操作仍在进行中，则第一个进度条会消失。如何同时显示两个进度控件。

```
 <html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>UpdateProgress Tutorial</title>
    <style type="text/css">
    #UpdatePanel1, #UpdatePanel2 { 
      width:300px; height:100px;
     }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <fieldset>
                <legend>UpdatePanel1</legend>
                <asp:Label ID="Label1" runat="server" Text="Panel initially rendered."></asp:Label>
                <br />
                <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
                <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
                    <ProgressTemplate>
                        Panel1 updating...
                    </ProgressTemplate>
                </asp:UpdateProgress>
                </fieldset>
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server">
            <ContentTemplate>
                <fieldset>
                <legend>UpdatePanel2</legend>
                <asp:Label ID="Label2" runat="server" Text="Panel initially rendered."></asp:Label>
                <br />
                <asp:Button ID="Button2" runat="server" Text="Button" OnClick="Button2_Click" />
                <asp:UpdateProgress ID="UpdateProgress2" runat="server" AssociatedUpdatePanelID="UpdatePanel2">
                    <ProgressTemplate>
                        Panel2 updating....
                    </ProgressTemplate>
                </asp:UpdateProgress>
                </fieldset>
            </ContentTemplate>
        </asp:UpdatePanel>

    </div>
    </form>
</body>
</html> 
```

代码

```
 protected void Button1_Click(object sender, EventArgs e)
{
    // Introducing delay for demonstration.
    System.Threading.Thread.Sleep(10000);
    Label1.Text = "Page refreshed at " +
        DateTime.Now.ToString();
}

protected void Button2_Click(object sender, EventArgs e)
{
    // Introducing delay for demonstration.
    System.Threading.Thread.Sleep(15000);
    Label2.Text = "Page refreshed at " +
        DateTime.Now.ToString();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:07:49.890

也许需要将更新面板配置为有条件地更新：UpdateMode = "Conditional"

检查此链接：http: [//msdn.microsoft.com/es-mx/library/system.web.ui.updatepanel.updatemode.aspx](http://msdn.microsoft.com/es-mx/library/system.web.ui.updatepanel.updatemode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:49:05.333

一般来说，网络是在请求-响应的基础上工作的。当页面发送请求时，它应该等待响应。如果页面重新发送[或发送新]请求旧响应将被忽略并等待新请求的响应。

为了避免这种情况在 Ajax 中排队请求并在收到响应后发送。[或者以其他方式，您可以在页面上说作为单线程工作]

在你的情况下，第一个进度条不应该消失，即使在它等待响应的后面。这可以使用一些 javascript 来解决，但没有任何开箱即用的支持。

或者，您可以使用 iframe 真正同时发送多个请求。

# intellij-idea - 如何在 IntelliJ IDEA 中生成 DAO 类

> ID：14733459
> 
> 赞同：5
> 
> 时间：2013-02-06T16:06:20.947
> 
> 标签：intellij-idea, dao

**有没有可能如何在 IntelliJ IDEA 中生成 DAO 类**？我发现了很多关于生成实体的文章，但没有发现如何生成 DAO。

我使用的是 11.1.2 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:49:18.880

IntelliJ IDEA 不支持，可以考虑通过 Ant使用[Hibernate Tools代替：](http://www.hibernate.org/subprojects/tools.html)

> Ant 任务：Hibernate3 工具包括一个统一的 Ant 任务，它允许您在构建过程中运行模式生成、映射生成或 Java 代码生成。

* * *

> Hibernate 的工具提供了各种与 Hibernate 一起使用的工具。主要工具可用于生成源工件，例如映射文件、java 实体、DAO 和其他脚手架代码。这一代的来源可以是 JDBC 数据库、类，甚至只是现有的映射。
> 
> 它使用 Hibernate 核心元模型从源工件生成和生成源工件。允许它同时支持自上而下、自下而上和中间向外的开发。
> 
> Hibernate Tools 用于 JBoss Tools Hibernate 插件中，为 Hibernate 提供部分 Eclipse 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T15:57:51.553

应该注意的是，Intellij 现在确实支持这一点。请按照此处的指南进行操作：

[新的 Intellij 功能](https://www.jetbrains.com/help/idea/15.0/generating-persistence-mappings.html?origin=old_help)

# regex - 什么是anything.com/anypage.html 重定向到anything.com/anypage 的正则表达式

> ID：14733461
> 
> 赞同：0
> 
> 时间：2013-02-06T16:06:28.970
> 
> 标签：regex, .htaccess

在我的 htaccess 文件中，我想获得正确的正则表达式来匹配以下内容

any.com/anypage.html 将重定向到anything.com/anypage

所以这基本上可以让 html 从我的网址中剥离出来。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:50:22.783

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

# c# - Kendo TabStrip Ajax（LoadContentForm）中的Kendo Grid Ajax不显示内容

> ID：14733463
> 
> 赞同：2
> 
> 时间：2013-02-06T16:06:29.760
> 
> 标签：c#, kendo-ui, tabs, grid, strip

我想在 Ajax Kendo TabStrip 中放置一个 Ajax Kendo Grid，但该网格从不显示它的任何值。（即使 FireBug 控制台指示已正确获取值...）

这是一个已知的问题 ？

提前致谢。

这是我的代码：

Ajax Kendo TabStrip：

```
@(Html.Kendo().TabStrip()
.Name("portailClientsTabStrip")
    //.HtmlAttributes(new { style="height:100%" })
.Animation(animation =>
{
    animation.Enable(true);
    animation.Open(config =>
    {
        //config.Expand();
        config.Fade(FadeDirection.In);
        config.Duration(AnimationDuration.Fast);
    });
})
.Items(tabstrip =>
{
    tabstrip.Add().Text("Livraisons")
        .Selected(true)
        .LoadContentFrom(Url.Content("Livraison"));

    tabstrip.Add().Text("Remplissage")
        .LoadContentFrom(Url.Content("Remplissage"));

    tabstrip.Add().Text("Expéditions")
        .LoadContentFrom(Url.Content("Expedition"));

    tabstrip.Add().Text("Collectes")
        .LoadContentFrom(Url.Content("Collecte"));

    tabstrip.Add().Text("Annonces").LoadContentFrom(Url.Content("Annonce"));
})
.Events(e=>e
    .Select("portailClientsTabStripSelectHandler")
    .Activate("portailClientsTabStripActivate")
)) 
```

Ajax Kendo Grid 里面的局部视图 Annonce ：

```
@(Html.Kendo().Grid<Integraal.Models.Mouvement>()
.Name("grilleMouvements") // Préfixe du nom de la grille par l'identifiant de la vue partielle.
.Columns(columns =>
{
    columns.Bound(m => m.mvt_cli_code);
    columns.Bound(m => m.mvt_detenteur_code);
    columns.Bound(m => m.mvt_date_prev);
    columns.Bound(m => m.mvt_date);
    columns.Bound(m => m.mvt_prod_code);
    columns.Bound(m => m.mvt_quantite);
    columns.Bound(m => m.mvt_flag).Visible(false);
})
.Navigatable()
.Sortable()
.Scrollable()
.Filterable()
.Resizable(resize => resize.Columns(true))          //Colonnes réglables en largeur
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(r => r.Action("readAnnonces", "PortailClients"))
)
.Events(e => e.DataBound("grilleAnnoncesDataBound"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-26T15:56:31.860

您不应该使用 LoadContentFrom 来加载标签条内的网格

利用`Content(@<text> @Html.Action("YourAction","YourController")</text>)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T19:16:55.773

当您返回 Json 时，请确保您的返回语句中有 JsonRequestBehavior.AllowGet。希望这可以帮助

例子：

返回 Json(videos.VideoList.ToDataSourceResult(request),JsonRequestBehavior.AllowGet);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:53:38.123

我没有 JavaScript 错误。

这是我完整的部分视图代码：

```
@model Integraal.Models.Mouvement
<script type="text/javascript">
function grilleAnnoncesDataBound(e) {

    //$('tr').each(function () {
    //    if ($(this).text() == 'Jane') { $(this).addClass('customClass') }
    //});
}
</script>
@(Html.Kendo().Grid<Integraal.Models.Mouvement>()
.Name("grilleMouvements") // Préfixe du nom de la grille par l'identifiant de la vue partielle.
.Columns(columns =>
{
    columns.Bound(m => m.mvt_cli_code);
    columns.Bound(m => m.mvt_detenteur_code);
    columns.Bound(m => m.mvt_date_prev);
    columns.Bound(m => m.mvt_date);
    columns.Bound(m => m.mvt_prod_code);
    columns.Bound(m => m.mvt_quantite);
    columns.Bound(m => m.mvt_flag).Visible(false);
})
.Navigatable()
.Sortable()
.Scrollable()
.Filterable()
.Resizable(resize => resize.Columns(true))          //Colonnes réglables en largeur
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(r => r.Action("readAnnonces", "PortailClients"))
)
.Events(e => e.DataBound("grilleAnnoncesDataBound"))
) 
```

这是我的控制器的操作：

```
public PartialViewResult Annonce()
    {
        return PartialView();
    }

    public JsonResult readAnnonces([DataSourceRequest] DataSourceRequest request)
    {
        MouvementService service = new MouvementService();
        IEnumerable<Mouvement> liste = service.getMouvements("A");

        Dictionary<string, object> session = new Dictionary<string, object>();
        session.Add("listeAnnonces", liste);
        GlobalSession.SetInSession<Dictionary<string, object>>("1", session);

        return Json(liste.ToDataSourceResult(request));
    } 
```

谢谢你帮助我。

# web-services - CXF 和 Spring @Configurable 问题

> ID：14733466
> 
> 赞同：1
> 
> 时间：2013-02-06T16:06:42.813
> 
> 标签：web-services, spring, cxf, configurable

我目前正面临将 CXF Web 服务与 Spring **@Configurable**注释混合的问题。

从一方面来看，我的 CXF Web 服务可以正常工作并配置如下：

```
<import resource="classpath:some-other-context.xml" />

<jaxws:server id="Init"
        serviceClass="package.to.my.ServiceInterface"
        address="/">
        <jaxws:serviceBean>
            <bean class="package.to.my.BADematInitImpl">
            </bean>
        </jaxws:serviceBean>
</jaxws:server>

<context:spring-configured /> 
```

在我的**some-other-context.xml**中是我的 Spring 配置，其中包含以下 Bean：

```
@Configurable(autowire = Autowire.BY_TYPE)
public class MyConfigurable {

    @Autowired(required=true)
    private A a;

    @Autowired(required=true)
    private B b;

    @Autowired(required=true)
    private C c;

...

} 
```

但是，当我尝试在我的服务中创建 MyConfigurable bean 的新实例时，由于 null 值假定自动装配的 A、B 和 C 对象，我得到了**NullPointerException 。**

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:15:45.273

[@Configurable](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Configurable.html)是`AOP`加载时间编织的东西使用的标记。我假设您没有使用任何 AOP，因为在您的问题中没有提到它。第二件事：您不必像默认值那样`required=true`在`@Autowired`注释中使用. 我建议您像这样更改代码：`true``required`

将这些添加到您的 spring 配置文件中的元素中：

```
<context:component-scan base-package="your.pckg.toscan"/> 
```

文档说：

> 扫描类路径以查找将自动注册为 Spring bean 的注释组件。默认情况下，将检测 Spring 提供的 @Component、@Repository、@Service 和 @Controller 构造型。

```
<context:annotation-config/> 
```

文档说：

> 激活要在 bean 类中检测的各种注释：Spring 的 @Required 和 @Autowired，以及 JSR 250 的 @PostConstruct、@PreDestroy 和 @Resource（如果可用）、JAX-WS 的 @WebServiceRef（如果可用）、EJB3 的 @EJB（如果可用），以及 JPA 的 @PersistenceContext 和 @PersistenceUnit（如果可用）。或者，您可以选择为这些注释激活单独的 BeanPostProcessor。

因此，将您的代码更改为：

```
@Component
public class MyConfigurable {

    @Autowired
    private A a;

    @Autowired
    private B b;

    @Autowired
    private C c;

...

} 
```

一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:31:27.447

我终于发现了问题所在。

我需要将此配置添加到我的第三方应用程序 XML 文件中：

```
<context:load-time-weaver/> 
```

...并将此参数添加到我的**jvm 启动命令行** ：

```
-javaagent:"path\to\my\spring-agent.jar" 
```

它就像一个魅力。

我知道这是因为 Spring 在某些时候需要一个实体来管理其 AOP 部分，以便很好地注入依赖项。如果有人有进一步的解释会很有趣。

# unit-testing - 如何使用 Winforms 开始 TDD

> ID：14733468
> 
> 赞同：2
> 
> 时间：2013-02-06T16:06:47.273
> 
> 标签：unit-testing, tdd, automated-tests, bdd

我最近阅读/观看了很多关于 TDD 和 BDD 的内容，我真的很想掌握它。我一直是一个只编写代码然后从外部测试它的开发人员（就像我们总是开始一样）。问题似乎在于使用 TDD 启动和运行。我只想创建一个简单的 Winform 应用程序，我想在其中显示一些可以说产品的列表。我只是不知道从哪里开始，我应该先为控制器编写一个测试吗？控制器需要参考视图和服务等。ASP.Net MVC 是为测试而构建的，因此它有点容易上手，但 Winforms 是一个真正的痛苦。请给我一些在 Winforms 中显示 TDD 的视频（最受欢迎）。

我看过很多视频，展示了你测试一个类或特性，但是你如何测试不支持测试的 UI？

> 简而言之，我想知道是否有人已经做了一段时间的 TDD，他/她是如何在 Winforms 中做到的？

我写了很多代码，我只是因为卡住而删除了，请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T19:44:52.380

以下是我为任何类型的 UI 执行此操作的方法，无论是 Web 或 Winforms 或 WPF 或 Java 中的 Swing，甚至是另一个系统将使用的 Web 服务接口。

*   编写 UI，并对它背后的任何数据进行硬编码。
*   编写一个控制器，并将硬编码的数据移动到控制器中。控制器应该只是以 UI 可以理解的形式呈现数据。

您的控制器现在没有任何行为；只是静态数据——但它为 UI 提供了正确的 API，现在您知道 UI 想要如何使用它。

*   编写一个示例，展示 UI 如何以最基本的形式使用控制器。
*   使示例工作。
*   编写另一个示例，显示控制器在不同上下文中的不同行为。
*   使示例工作。

这些是你的单元测试！如果你知道你的控制器需要一些其他的类来协作，你也可以模拟它们。

一旦你的协作者被模拟出来，你就已经知道控制器想要如何使用它们了。同样，您已经拥有这些协作者的 API，因为控制器正在使用它们。

这就是我们在 BDD 中谈论“由外而内”时所做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T12:47:28.137

我也是 TDD 的新手，就像你一样，我正在努力学习。这是我在搜索过程中得出的结论，也许它也会对您有所帮助：

1.  查看[Roy Osherove 的网站](http://artofunittesting.com/)，以及他的书“[单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)”。查看视频，有一些很棒的视频，尤其是“结对编程”部分。他的书是我读过的关于单元测试和 TDD 的最好的一本书，也是唯一一本我从头到尾读过的书。
2.  查看一些 TDD katas。我在上一项中建议的网页上有一些。看看其他人是如何解决 katas 的。这真的很有帮助。
3.  阅读依赖注入。
4.  如果您想在 WinForms 中进行 TDD，请查看 MVP 模式。据我所知，这是将 UI 与 WinForms 中的业务代码分离的事实模式。

祝您搜索顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:58:15.233

控制器是一个很好的起点。将 View 公共 api 提取到接口，并使用模拟框架测试控制器与该接口的交互。您也可以对服务层执行相同的操作。此外，我会为此应用程序采用自下而上的方法，并在向 UI 层添加测试之前对较低级别的层进行单元测试。在 UI 层，我将使用 BDD 框架编写一组验收测试，并使用模拟框架使这些测试变得轻量级并减少测试数量。

祝你好运！

# android - 从哪个方法使用异步任务更新主屏幕小部件？

> ID：14733469
> 
> 赞同：0
> 
> 时间：2013-02-06T16:06:47.750
> 
> 标签：android, android-widget, android-asynctask

我让主应用程序将图像下载到移动设备上的文件夹，然后小部件服务在半小时内抓取该图像并更新小部件图像视图。我想扭转这种局面。我想在小部件服务中解析图像，然后将图像保存到设备并让主应用程序从文件夹中提取它，因为小部件正在更新，也是用户看到这个应用程序的第一件事。

目前我的服务只是获取文件并将其放入视图中。我想解析服务中的 xml，但我不断收到网络线程异常。我在哪里运行这个异步任务？在 onStart()、onResume() 还是？

```
onStart() / onResume / elsewhere? {
//other code...
new MyAsyncTask.execute();

}

public MyAsyncTask extends AsyncTask<>{

//parse the url

} 
```

感谢您为我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:53:01.197

首先你添加一个动作到 appwidget 接收器

```
<receiver android:name=".YourWidget" android:label="My Widget">
    <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="your.package.name.MANUEL_UPDATE" />
    </intent-filter>
</receiver> 
```

然后你发送一个会触发接收器的广播：

```
Intent intent = new Intent();
intent.setAction("your.package.name.MANUEL_UPDATE");
sendBroadcast(intent); 
```

在 appwidets 接收器中，您可以使用新图像完成所需的工作！希望有帮助。

# postgresql - 使用数组中的每个元素调用集合返回函数

> ID：14733470
> 
> 赞同：1
> 
> 时间：2013-02-06T16:06:51.040
> 
> 标签：postgresql, plpgsql

我有一个集合返回函数 (SRF)，它接受一个整数参数并从表中返回一组行。我使用 调用它`SELECT * FROM tst.mySRF(3);`，然后像处理表格一样操作返回的值。

我想做的是在数组的每个元素上执行它；但是，当我使用 调用它时`SELECT * FROM tst.mySRF(unnest(array[3,4]));`，会返回错误“在不能接受集合的上下文中调用的集合值函数”。如果我改为使用 调用它`SELECT tst.mySRF(unnest(array[3,4]));`，我会得到一组类型`tst.tbl`。

表定义：

```
DROP TABLE tst.tbl CASCADE;
CREATE TABLE tst.tbl (
    id  serial  NOT NULL,
    txt text    NOT NULL,
    PRIMARY KEY (id)
);
INSERT INTO tst.tbl(txt) VALUES ('a'), ('b'), ('c'), ('d'); 
```

函数定义：

```
CREATE OR REPLACE FUNCTION tst.mySRF(
    IN  p_id            integer
)
    RETURNS setof tst.tbl
    LANGUAGE plpgsql
    AS $body$
        DECLARE
        BEGIN
            RETURN QUERY
                SELECT id, txt
                FROM tst.tbl
                WHERE id = p_id;
        END;
    $body$; 
```

来电：

*   `SELECT * FROM tst.mySRF(3)`如预期的那样返回一个表。
*   `SELECT tst.mySRF(unnest(array[3,4]))``tst.tbl`正如预期的那样，返回一个具有单列类型的表。
*   `SELECT * FROM tst.mySRF(unnest(array[3,4]))`返回上面描述的错误，我期待一个表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:33:04.547

为避免“单列表”问题，您需要使用`(row).*`符号显式扩展 SRF 结果

```
 SELECT (tst.mySRF(unnest(array[3,4]))).*; 
```

如果我理解@depesz，`LATERAL`将提供一种更有效或更直接的方法来实现相同的结果。

# python - python更改格式数字ndarray许多数字

> ID：14733471
> 
> 赞同：2
> 
> 时间：2013-02-06T16:06:51.457
> 
> 标签：python, numpy, string-formatting, multidimensional-array

我是python的初学者，很容易陷入困境和困惑......

当我读取一个包含带有数字的表格的文件时，它会将其读取为 numpy.ndarray

Python 正在改变数字的显示。例如：在输入文件中我有这个数字：56143.0254154，在输出文件中，数字写成：5.61430254e+04

但我想在输出文件中保留第一种格式。我尝试使用 string.format 或 locale.format 函数，但它不起作用

任何人都可以帮我做到这一点吗？

谢谢！鲁西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:43:39.453

Try `numpy.set_printoptions()` -- there you can e.g. specify the number of digits that are printed and suppress the scientific notation. For example, `numpy.set_printoptions(precision=8,suppress=True)` will print 8 digits and no "...e+xx".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:44:17.550

如果要打印 numpy 数组，可以使用该`set_printoptions`函数控制不同数据类型的格式。例如：

```
In [39]: a = array([56143.0254154, 1.234, 0.012345])

In [40]: print(a)
[  5.61430254e+04   1.23400000e+00   1.23450000e-02]

In [41]: set_printoptions(formatter=dict(float=lambda t: "%14.7f" % t))

In [42]: print(a)
[ 56143.0254154      1.2340000      0.0123450] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:44:07.613

You must create a formatted string. Assuming variable number contains the number you want to print, in Python 2.7 or 3, you could use

```
print("{:20.7f}".format(number)) 
```

whereas in Python 2:

```
print "%20.7f" % number 
```

Alternatively, if you use Numpy routines to write out the array, use the method suggested by Warren.

# perforce - 如何检测文件夹是否在 Perforce/ 源代码控制下

> ID：14733475
> 
> 赞同：1
> 
> 时间：2013-02-06T16:07:04.813
> 
> 标签：perforce, clearcase

我需要确定文件/文件夹是否在特定的源代码控制之下。最简单的方法是找到一些隐藏文件夹。（这并不能保证部分文件受源代码控制，但有一定的可能性表示使用了此源代码控制）

SVN、GIT 非常简单，因为它们有隐藏文件夹。

但是我找不到 Perforce 和 ClearCase 相同的东西。是否有任何通用方法来理解在这些特殊情况下使用什么 VSC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:16:49.707

Perforce 不会乱扔驱动器，而是将信息保存在服务器上。此外，文件可以以不同的结构映射，并与非受控文件混合，因此您无法通过查看文件本身来确定。

但是，您可以简单地询问 Perforce。例如，在 CLI 中：

```
P4 fstat FILENAME 
```

如果文件受源代码控制，将为您提供有关文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:54:04.060

如果您需要为 Perforce 编写脚本，有一个选项 (-s) 可以让事情变得更容易（因为 p4 的退出代码并不表示 Perforce 命令的成功或失败）。因此，对于类似 bourne 的 shell，这样的东西应该可以工作：

```
if p4 -s fstat FILENAME | grep 'exit: 0' >/dev/null 2>&1 ; then
  echo "Perforce knows this file"
else
  echo "Perforce don't care"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:15:52.687

对于 ClearCase，您会在（快照）视图的根目录中 找到一个[名为的](https://stackoverflow.com/a/7201443/6309)[隐藏*文件。*`view.dat`](https://stackoverflow.com/a/7201443/6309)

如果文件位于 M:\ (Windows) 或 /view/vobs (Unix) 下，则无需查找隐藏文件或目录：您知道它是动态视图。

另一种方法是在文件的父目录中执行：

```
cleartool lsview -cview. 
```

如果该目录在视图中，则该命令将返回其名称。

同样，您可以运行类似[`p4 reconcile`](http://www.perforce.com/perforce/r12.2/manuals/cmdref/reconcile.html)or的命令[`p4 status`](http://www.perforce.com/perforce/r12.2/manuals/cmdref/status.html#1048796)，并且它不会返回错误，您可能在 Perforce 工作区中。

# flash - 来自 Macromedia Flash MX 的动作脚本/编译的 SWF 是否仍可与新的 Flash 插件一起使用？

> ID：14733477
> 
> 赞同：0
> 
> 时间：2013-02-06T16:07:11.190
> 
> 标签：flash, actionscript, macromedia, actionscript-1

开始一个创建 Flash 游戏的项目，但无法为更新的 Flash CSx 的许可证花钱。我有一个旧的 Macromedia Studio MX 许可证，它带有带有 Actionscript 1.0 的 Macromedia Flash MX v6.0。我的问题是，Actionscript 1.0 的所有语法和最终输出的 SWF 是否仍与新的/未来的 Flash 播放器插件兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:44:57.667

我意识到这不是您问题的答案 - 但我建议这样做：

*   安装[FlashDevelop](http://www.flashdevelop.org/)
*   安装[Flex SDK](http://sourceforge.net/adobe/wiki/Projects/)（adobe 免费提供）
*   在您可以访问的任何版本的 flash / photoshop / gimp 中创建资产
*   程序（在 AS3.0 中）
*   在 FlashDevelop 中编译 SWF

正如我所指出的，我不再在 Flash 中做太多工作，但这是一个很棒的工作流程。此外 - Flashdevelop 是一个了不起的 IDE。检查安装例程以进行设置。

不能在一些尘土飞扬的 Flash 版本中工作的另一件事是，您不会想开发基于时间线的东西。Flash 仍然是一项伟大的技术，至少在游戏方面如此，您肯定会从中获得乐趣。

查看众多库（如史诗般的[Tweenlite](http://www.greensock.com/)或 Pushbutton 引擎），您将一切顺利。

前进并繁荣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:07:35.180

它肯定会奏效！

您应该检查它是否在所有部分都正常工作，因为一些行为已被略微修改（但这适用于旧 SWF 文件，而不适用于现在的文件）。

# mongodb - 是否可以使用 Javascript 可视化 hbase 表

> ID：14733478
> 
> 赞同：1
> 
> 时间：2013-02-06T16:07:16.143
> 
> 标签：mongodb, mapreduce, hbase, cluster-analysis, data-visualization

我是 HBase 的新手。这是我的问题。

我有一个非常大的 HBase 表。表中的示例数据。

```
1003:15:Species1:MONTH:01 0.1,02 0.7,03 0.3,04 0.1,05 0.1,06 0,07 0,08 0,09 0.1,10 0.2,11 0.3,12 0.1:LATITUDE 26.664503840000002 29.145674380000003,LONGITUDE -96.27139215 -90.40762858 
```

正如您所看到的，每个**物种**都有一个月份属性（12 个向量）、纬度和经度等。对于一个特定物种，大约有 300 个独特的物种和几个 1000 个观察值。

我写了一个 Mapreduce 作业，它对一个特定的物种进行**K-means 聚类。**我的 MR 的输出是

```
C1:1003:15:Species1:MONTH:01 0.1,02 0.7,03 0.3,04 0.1,05 0.1,06 0,07 0,08 0,09 0.1,10 0.2,11 0.3,12 0.1:LATITUDE 26.664503840000002 29.145674380000003,LONGITUDE -96.27139215 -90.40762858 
```

C1 表示它属于哪个集群。现在我想可视化输出，即在地图上绘制每个集群的所有纬度和经度。我正在考虑使用[Mapbox.js](http://mapbox.com/mapbox.js/example/vectors-with-d3/)和[D3.js](http://d3js.org/)进行数据可视化，因为数据中的纬度和经度是特定区域的边界框。

**如果我将 MR 的 o/p 写回 Hbase，是否可以在客户端使用 javascript 检索数据？**

我正在考虑将数据写入可以使用 JS 查询的**MongoDB**，或者编写一个程序从 Hbase 表中**创建一个 JSON**以进行可视化。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:20:56.960

您可以使用[HBAse REST API](http://wiki.apache.org/hadoop/Hbase/HbaseRest)，尽管从安全角度来看，将您自己的服务放在中间可能更安全

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T20:08:52.530

您还可以使用[https://github.com/alibaba/node-hbase-client](https://github.com/alibaba/node-hbase-client)中的 node-hbase来读取 hbase 数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T07:36:07.333

您还可以使用 hbase-rpc-client [https://github.com/falsecz/hbase-rpc-client](https://github.com/falsecz/hbase-rpc-client)从 nodejs 读取数据。本客户端支持 hbase 0.96+

# python - virtualenv 和 VIRTUAL_ENV 关键字

> ID：14733481
> 
> 赞同：5
> 
> 时间：2013-02-06T16:07:18.520
> 
> 标签：python, virtualenv

在安装了一个新的 virtualenv 之后，例如称为 ENV，如果我输入

```
. /path/to/ENV/bin/activate

python
import os
print os.environ['VIRTUAL_ENV'] 
```

然后我看到`/path/to/ENV/`

但是，如果我输入

```
/path/to/ENV/bin/python 
```

接着

```
import os
print os.environ['VIRTUAL_ENV'] 
```

我有一个关键错误那么这两种方法的根本区别是什么？谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:10:21.593

在 的脚本中`bin/activate`，有一行如下所示：

```
VIRTUAL_ENV="/Users/me/.envs/myenv"
export VIRTUAL_ENV 
```

哪个负责设置您的`VIRTUAL_ENV`环境变量。当您不使用激活时，该变量永远不会被导出 - 所以它不存在于`os.environ`.

# c# - 防止 UI 中的字段插入字符或不需要的字符（整数除外）

> ID：14733482
> 
> 赞同：0
> 
> 时间：2013-02-06T16:07:18.517
> 
> 标签：c#, asp.net-mvc

我正在构建一个 MVC 应用程序，我目前遇到了一个麻烦的问题。

所以我有这些代码行：

```
<div class="editor-label">
            @Html.LabelFor(model => model.m_Number, "OBJ Number")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Number)
            @Html.ValidationMessageFor(model => model.m_Number)
        </div> 
```

当我在这个页面中打开我的 UI 时，该字段变成了一种带有箭头的文本框，我可以向上和向下单击以升级或减少一个 int 值；抱歉描述不佳，但我找不到准确的词来描述它。

主要问题是我可以编辑该字段，而不是输入数字，我可以写：

abl

当我按下回车键时，它会“保存”。真正的保存还没有发生，因为我还没有向数据库发送任何信息，但我希望我的 UI 验证写入该字段的数据类型，我想确保那里只写入整数并且我不知道如何做到这一点。我需要帮助，因为我需要保护这些字段不插入错误的数据。

在我的课堂上，我已经写过这个：

```
 [Display(Name = "Obj Number")]
        public int m_Number { get; set; } 
```

但这并不能解决任何问题。

任何人都知道我该如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:37:00.867

您可以使用该`pattern`属性并将其设置为仅接受数字的正则表达式：

```
$(function() {
    $('input[type="number"]').attr('pattern', '\\d*');
}); 
```

请记住，这仅用于 UI 目的。您应该在服务器上执行必要的验证，因为没有什么可以阻止用户简单地使用 FireBug 并向您的服务器提交他想要的任何值。这根本不应该用于验证目的，而只是为了帮助用户。

# jquery - 简单的jQuery淡入淡出图像

> ID：14733484
> 
> 赞同：-5
> 
> 时间：2013-02-06T16:07:21.380
> 
> 标签：jquery, css, image, fadeout, fadein

是否有任何脚本可以用来创建幻灯片，其中图片淡出并替换它。我正在使用下面的列表来列出图像。我目前看到的脚本左右滑动图像，但没有淡入淡出。

```
<ul class="slideshow">
<li><img src="images/image1.gif" /></li>
<li><img src="images/image2.gif" /></li>
<li><img src="images/image3.gif" /></li>
<li><img src="images/image4.gif" /></li>
<li><img src="images/image5.gif" /></li>
<li><img src="images/image6.gif" /></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T17:33:41.583

这是我能得到的最简单的，它是一个圆形画廊，当它到达终点时它会重新开始。

这是一个小提琴：http: [//jsfiddle.net/KA4Zq/](http://jsfiddle.net/KA4Zq/)

```
var count = 1;
setInterval(function() {
    count = ($(".slideshow :nth-child("+count+")").fadeOut().next().length == 0) ? 1 : count+1;
    $(".slideshow :nth-child("+count+")").fadeIn();
}, 2000); 
```

您唯一应该更改的是 2000 值（2 秒）。如果您向图库添加更多图像，则无需设置任何其他变量，脚本会自行完成所有操作...

为了使事件更简单，我也更改了您的 html，不需要 a `ul list`，只需 a`div`里面有图像：

```
<div class="slideshow">
    <img src="" />
    <img src="" />
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:10:26.307

像这样选择 ul li 中的所有图像，`$('ul li img')`然后使用`.fadeIn()`使图像淡入。

```
$('ul li img').fadeIn('slow'); 
```

要制作幻灯片，您可以使用`interval`和`:eq()`

```
 var cnt = 0; 
setInterval(function(){
        cnt ==7 ? cnt=0:cnt++
        $('ul li img').fadeOut('');
        $('ul li img:eq('+cnt+')').fadeIn(1000)
    },1000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T16:12:30.100

```
$("ul > img").fadeOut().fadeIn() 
```

# php - 尝试在 Tomcat 6 上运行 PHP 时出现 java.lang.UnsatisfiedLinkError

> ID：14733485
> 
> 赞同：0
> 
> 时间：2013-02-06T16:07:27.450
> 
> 标签：php, exception, tomcat6

我使用 Stack Overflow 问题[“使用 Tomcat 运行 PHP 应用程序”](https://stackoverflow.com/questions/779246/run-a-php-app-using-tomcat)来尝试在*GNU/Linux*下的*Tomcat 6*上运行 PHP 。我收到以下异常消息：

 *例外一：

```
java.lang.UnsatisfiedLinkError: no libphp5.so in java.library.path
at java.lang.ClassLoader.loadLibrary(Unknown Source)
at java.lang.Runtime.loadLibrary0(Unknown Source)
at java.lang.System.loadLibrary(Unknown Source)
at net.php.reflect.loadLibrary(reflect.java:34)
at net.php.reflect.<clinit>(reflect.java:29)
at net.php.servlet.init(servlet.java:157)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1139)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:791)
at    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:127)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:581)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
at java.lang.Thread.run(Unknown Source) 
```

例外 2：

```
java.lang.UnsatisfiedLinkError: net.php.servlet.send(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Z)V
at net.php.servlet.send(Native Method)
at net.php.servlet.service(servlet.java:190)
at net.php.servlet.service(servlet.java:214)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:581)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Unknown Source) 
```

我`libphp5.so`在`.properties`文件中有一个条目。我也有`libphp5.so`文件在`java.library.path`. 一切都建立在 32 位操作系统上并在其上运行。我还将`phpsrvlt.jar`和`php_java.jar`文件复制到`tomcat/common/lib`目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:22:58.230

`libphp5.so`您的 linux 操作系统中很可能缺少库。尝试找到它，如果成功，请检查该目录是否在系统正在查找库的目录中（例如 environtmet 变量`LD_LIBRARY_PATH`）（很可能不是）。如果一切正常，那么错误确实在tomcat初始化的某个地方。

无论如何，错误说系统无法找到`libphp5.so`*

# java - 是否可以使用 java FileSystem 创建一个新的 zip 文件？

> ID：14733496
> 
> 赞同：14
> 
> 时间：2013-02-06T16:07:41.813
> 
> 标签：java, file, filesystems, zip

我已经使用 java 7 提供的成功修改了（现有）zip 文件的内容`FileSystem`，但是当我尝试通过这种方法创建一个新的 zip 文件时它失败了，错误消息显示：`"zip END header not found"`，这是合乎逻辑的，因为我这样做的方式是，首先创建一个完全空的**文件**`Files.createFile`（**问题是**有没有办法使用这种方法创建一个完全空的新 zip 文件？我考虑过的黑客是添加一个空的新的`ZipEntry`到一个 zip 文件，然后使用该新的空文件来创建基于它的文件系统，但我真的想认为 oracle 的人用 nio 和文件系统实现了一种更好（更简单）的方法......

这是我的代码（创建文件系统时出现错误）：

```
if (!zipLocation.toFile().exists()) {
        if (creatingFile) {
            Files.createFile(zipLocation);
        }else {
            return false;
        }
    } else if (zipLocation.toFile().exists() && !replacing) {
        return false;
    } 
    final FileSystem fs = FileSystems.newFileSystem(zipLocation, null);
.
.
. 
```

`zipLocation`是一个路径 `creatingFile`是一个布尔值

**回答：** 在我的特殊情况下，由于路径中的空格，给出的答案不能正常工作，因此我必须按照我不想的方式来做：

```
Files.createFile(zipLocation);
ZipOutputStream out = new ZipOutputStream(
    new FileOutputStream(zipLocation.toFile()));
out.putNextEntry(new ZipEntry(""));
out.closeEntry();
out.close(); 
```

**这并不意味着给定的答案是错误的，它只是不适用于我的特定情况**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T16:23:52.620

如[Oracle 站点](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)中所述：

```
public static void createZip(Path zipLocation, Path toBeAdded, String internalPath) throws Throwable {
    Map<String, String> env = new HashMap<String, String>();
    // check if file exists
    env.put("create", String.valueOf(Files.notExists(zipLocation)));
    // use a Zip filesystem URI
    URI fileUri = zipLocation.toUri(); // here
    URI zipUri = new URI("jar:" + fileUri.getScheme(), fileUri.getPath(), null);
    System.out.println(zipUri);
    // URI uri = URI.create("jar:file:"+zipLocation); // here creates the
    // zip
    // try with resource
    try (FileSystem zipfs = FileSystems.newFileSystem(zipUri, env)) {
        // Create internal path in the zipfs
        Path internalTargetPath = zipfs.getPath(internalPath);
        // Create parent directory
        Files.createDirectories(internalTargetPath.getParent());
        // copy a file into the zip file
        Files.copy(toBeAdded, internalTargetPath, StandardCopyOption.REPLACE_EXISTING);
    }
}

public static void main(String[] args) throws Throwable {
    Path zipLocation = FileSystems.getDefault().getPath("a.zip").toAbsolutePath();
    Path toBeAdded = FileSystems.getDefault().getPath("a.txt").toAbsolutePath();
    createZip(zipLocation, toBeAdded, "aa/aa.txt");
} 
```

# python - 更新同一张图上的图

> ID：14733499
> 
> 赞同：0
> 
> 时间：2013-02-06T16:07:45.247
> 
> 标签：python, matplotlib, plot

我正在尝试使用以下代码每 10 秒更新一次绘图：

```
@sched.interval_schedule(seconds = 10)
def update_line():

    c = 0
    while c <= 9:
        y[c] = y[c] + 1
        c = c+1

    x = range(1, 11)
    plt.ion()
    fig = plt.figure(1)

    ax = fig.add_subplot(111)
    plt.plot(x, y) 
```

它只是为第一组 y 数据绘制图形，之后显示错误：“WARNING:apscheduler.scheduler:Execution of job”update_line (trigger: interval[0:00:10], next run at: 2013 -02-06 16:00:42.942079)"已跳过：已达到最大运行实例数 (1)"

我应该以某种方式使用 draw() 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:21:49.780

首先，应该在更新绘图本身的函数/循环之外进行调用`plt.ion()`和图形创建，因为 i) 当交互性打开时，并且 ii) 您不希望每次都使用新图形。

看看[这个](https://stackoverflow.com/questions/14647491/figure-gui-freezing)问题和答案。我认为您想实现类似的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:49:56.500

首先是您继续添加子图，而您宁愿将子图设置为当前轴。要将输出流设置为当前子图，请使用：

```
plt.figure(1)
plt.subplot(111) 
```

当您只有一个子图 (111) 时，不需要后者。当您将子级添加到轴（子图）或更改它们时，图形不会自动重绘。添加一行

```
fig.canvas.draw() 
```

# java - 使用 Google Apps Engine 端点的 OAuth 登录停止工作

> ID：14733507
> 
> 赞同：3
> 
> 时间：2013-02-06T16:08:08.477
> 
> 标签：java, google-app-engine, oauth, google-oauth, signpost

我有一个与 GAE 服务器通信的桌面 Java 应用程序。客户端应用程序使用 OAuth 1.0 通过提供的端点（appname.appengine.com/_ah/OAuthGetAccessToken 等）使用 OAuth 1.0 登录服务器，其中 consumerkey 和 consumersecret 设置为“匿名”，范围设置为 GAE 域。登录过程似乎工作正常：

1.  检索请求令牌
2.  让用户访问生成的身份验证 URL
3.  询问用户验证码
4.  检索访问令牌

至此，我有了一个看似有效的令牌和令牌秘密。如果我使用这些来签署对 GAE 服务器的请求，我会在识别用户时收到*OAuthRequestException ：*

```
OAuthService oauthService = OAuthServiceFactory.getOAuthService();
try {
    user = oauthService.getCurrentUser();
    if (user != null) {
        ri.userName = user.getEmail();
    }
} catch (OAuthRequestException t) {
    t.printStackTrace();
} 
```

**这一直工作到今天早上**。我正在使用[Chrome to Phone](https://code.google.com/p/chrometophone/source/browse/trunk/appengine/src/com/google/android/chrometophone/server/RequestInfo.java#78) GAE 后端的修改版本。我注意到**Chrome to Phone 也有同样的问题**：我无法再登录服务，所以我不认为这是客户端的错误。登录信息不会显示在*Google Connected Sites、Apps 和 Services 控制台*中。这是 Chrome 到 Phone 的 GAE 服务中受影响线路的链接：[Chrome2Phone 受影响的源](https://code.google.com/p/chrometophone/source/browse/trunk/appengine/src/com/google/android/chrometophone/server/RequestInfo.java#78)。

我已经尝试在 Google API 控制台中注册应用程序并提供了消费者密钥和秘密，结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T22:37:59.947

我们对身份验证系统进行了一些后端更改，最终导致与依赖身份验证系统的 App Engine 代码不兼容。这似乎是一个相当简单的问题，我们正在进行修复。我们还没有确切的解决时间表，但预计会很快。

* * *

更新：该修复程序已于太平洋标准时间晚上 8 点左右投入生产。谢谢大家的耐心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:02:19.057

这并不完全是一个答案，但我在使用内置 oauth 提供程序库 ( `google.appengine.api.oauth`) 的 python 应用程序引擎应用程序上看到了相同的新行为。现有保存的令牌继续工作，但请求新令牌然后使用它调用受保护的服务会导致`InvalidOAuthTokenError`. 这是使用未更改的消费者和提供者代码，直到昨晚（大约在 CST 午夜）之前都可以完美运行。

# python - 是否有一个函数可以给出列表中通过标准的项目数？

> ID：14733510
> 
> 赞同：1
> 
> 时间：2013-02-06T16:08:16.040
> 
> 标签：python

所以我有一个数组，比如说`[5,2,2,0]`，是否有一个函数可以返回通过标准的元素数量？

目前我正在这样做：

```
a = [5,2,2,0]
len([i for i in a if i > 0]) 
```

也有人提出了这种方法：

```
sum(b > 0 for b in a) 
```

但 IMO 这真的是一回事，只是可读性差了一点。

有没有这样的方法我可以使用：

```
def crit(x): return x > 0
a.count(criterion=crit) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:11:12.277

你能做的不多，但如果你已经有了你的谓词

```
def crit(x):
   return x > 0 
```

你可以做

```
sum(map(crit, a)) 
```

或者

```
len(filter(crit, a)) 
```

`len([x for x in a if x > 0])`是最有效的，但如果您想重用谓词，可能会导致代码重复。

测试：

```
In [6]: %timeit len([x for x in a if x > 0])
100000 loops, best of 3: 3.57 us per loop

In [7]: def crit(x):
   ...:     return x > 0
   ...:

In [8]: %timeit len([x for x in a if crit(x)])
100000 loops, best of 3: 10.1 us per loop

In [9]: %timeit sum([x > 0 for x in a])
100000 loops, best of 3: 5.66 us per loop

In [10]: %timeit sum([crit(x) for x in a])
100000 loops, best of 3: 12 us per loop

In [11]: %timeit sum(map(crit, a))
100000 loops, best of 3: 11.3 us per loop

In [12]: %timeit len(filter(crit, a))
100000 loops, best of 3: 8.21 us per loop 
```

生成器（生成器没有`len`）：

```
In [13]: %timeit sum(1 for x in a if x > 0)
100000 loops, best of 3: 3.99 us per loop

In [14]: %timeit sum([1 for x in a if crit(x)])
10000 loops, best of 3: 10.6 us per loop

In [15]: %timeit sum(x > 0 for x in a)
100000 loops, best of 3: 6.24 us per loop

In [16]: %timeit sum(crit(x) for x in a)
100000 loops, best of 3: 13 us per loop 
```

`imap`比`map`：

```
In [17]: %timeit sum(itertools.imap(crit, a))
100000 loops, best of 3: 10.7 us per loop 
```

在测试了所有这些之后，我想我会选择 [13]、[17] 或 [14]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:13:30.723

我会采用这种`sum`方法而不是具体化一个列表 - 如果你觉得它太可怕了，只需编写一个辅助函数：

```
def count_if(f, iterable):
    return sum(1 for i in iterable if f(i)) 
```

或者更好的是，使用[itertools 文档中的](http://docs.python.org/2/library/itertools.html#recipes)一种方法：

```
def quantify(iterable, pred=bool):
    "Count how many times the predicate is true"
    return sum(imap(pred, iterable)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:11:50.717

你可以使用`filter`函数`len(filter(crit, a))`

# batch-file - 批处理文件 - 检查参数

> ID：14733516
> 
> 赞同：0
> 
> 时间：2013-02-06T16:08:29.163
> 
> 标签：batch-file

我必须创建三个批处理文件。两个是配置环境变量，另一个是运行示例。

然后我有confvarsC.bat（C++环境变量）和confvarsJ.bat（Java环境变量）。然后我创建了执行以下操作的 executePortico.bat：测试 java_home 和 rti_home 并调用环境变量文件。但是我需要如果键入“c”的人应该调用 confvarsC.bat 并在 C++ 中运行示例，如果键入“j”的人应该调用 confvarsJ.bat 并运行 Java 示例。

看到我做了：

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

set IMP=portico

rem ################################
rem # check command line arguments #
rem ################################
:checkargs
if "%0" == "" goto usage
if "%1" == "" goto usage

rem #######################
rem # test for JAVA_HOME  #
rem #######################
if "%JAVA_HOME%" == "" goto nojava
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest

if "%0" == "c" goto execC
if "%0" == "j" goto execJ
goto finish

:execC
call C:\Arquivos de programas\Portico\portico-1.0.2\etc\confvarsC.bat
if not "%RTI_HOME%" == "" goto execute

:execJ
call C:\Arquivos de programas\Portico\portico-1.0.2\etc\confvarsJ.bat
if not "%RTI_HOME%" == "" goto execute

############################################
### (target) execute #######################
############################################
:execute
SHIFT
set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR=C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13
set EXEC = "C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13"

if "%0" == "m" goto exec1

:exec1
echo %EXEC%%1%IMP%.exe
pause
%EXEC%%1%IMP%.exe %2
goto finish

:usage
echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

* * *

我这样做了，请查看我的代码： 但是我有一个问题，当我尝试运行 Java 示例时，他没有进入 executeJava，他总是进入 executeC。

在我的命令提示符中查看：

C:\Portico\portico-1.0.2\exec>executePortico.bat java-hla13 支持 escolha 语言 (J)ava 或 (C)++: j C:\Portico\portico-1.0.2\examples\cpp \cpp13\java-hla13.exe Pressione qualquer tecla para continuar。. . '"C:\Portico\portico-1.0.2\examples\cpp\cpp13\java-hla13.exe"' 不是内部或外部命令、可运行程序或批处理文件。终止 - 正常

Java 示例位于目录中：C:\Portico\portico-1.0.2\examples\java\hla13

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

rem ################################
rem # check command line arguments #
rem ################################
:checkargs

if "%0"=="" goto usage
if "%1"=="" goto usage

set /p language=Por favor escolha a linguagem (J)ava or (C)++: 

if %language%=="C" goto execC
if %language%=="J" goto execJ

rem #######################
rem # test for JAVA_HOME  #
rem #######################
if "%JAVA_HOME%"=="" goto nojava
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!

goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest

echo EU aqui no executeC

:execC
call C:\Portico\portico-1.0.2\etc\confvarsC.bat
if "%RTI_HOME%"=="" goto nortihome
if not "%RTI_HOME%"=="" goto executeC

:execJ
call C:\Portico\portico-1.0.2\etc\confvarsJ.bat
if "%RTI_HOME%"=="" goto nortihome 
if not "%RTI_HOME%"=="" goto executeJava

:nortihome
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

################################################
### (target) execute C++ #######################
################################################
:executeC

set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR=C:\Portico\portico-1.0.2\examples\cpp\cpp13
set EXEC=C:\Portico\portico-1.0.2\examples\cpp\cpp13\

echo %EXEC%%1.exe
pause
"%EXEC%%1.exe"

goto finish

#################################################
### (target) execute Java #######################
#################################################
:executeJava

set PATH=PATH=%RTI_HOME%\include\ng6;%RTI_HOME%\lib;%RTI_HOME%\bin;%JAVA_HOME%\bin;%PATH%
set ClassPath=%RTI_HOME%\lib\portico.jar
set RTI_FEDDIR=C:\Portico\portico-1.0.2\examples\java\hla13
set EXECUTA=C:\Portico\portico-1.0.2\examples\java\hla13\

echo %EXECUTA%java-hla13.jar
pause
"%EXECUTA%java-hla13.jar"

goto finish

:usage

echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:02:32.950

在你的`:checkargs`, **%0**中总会有一些东西 - 那是批处理文件的名称 - 所以不需要测试那个值

**%1**是第一个参数，因此`:rtihometest`您需要将**%1**与 c 或 j 进行比较，而不是**%0**

在 中`:execC`，您不会在第二次测试后跳转到任何地方，因此`:execJ`也会被执行。

在 中`:execJ`，您不会在第二次测试后跳转到任何地方，因此`:execute`无论测试结果如何都会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T15:02:30.907

首先，**%0 是文件名，%1 是第一个参数。**

然后，请`:exit`在最后加上，当程序需要退出时，输入`goto exit`.

正确的参数检查批处理文件的示例：

```
@echo off
set param=%1
set var1=1
set var2=2

if [%1]==[] goto noparam
if %param%==%var1% goto isvar1
if %param%==%var2% goto isvar2
goto unknown

:isvar1
echo The parameter is 1.
goto exit

:isvar2
echo The parameter is 2.
goto exit

:noparam
echo No parameter.
goto exit

:unknown
echo Unknown parameter - %param%.
:exit 
```

以下是各种测试用例（此处文件名为`numbers`）：

```
C:\Users\user\Documents>numbers
No parameter.

C:\Users\user\Documents>numbers 1
The parameter is 1.

C:\Users\user\Documents>numbers 2
The parameter is 2.

C:\Users\user\Documents>numbers foo
Unknown parameter - foo. 
```

# visual-studio-2010 - Visual Studio 断点仅适用于第二次调试尝试

> ID：14733517
> 
> 赞同：1
> 
> 时间：2013-02-06T16:08:29.347
> 
> 标签：visual-studio-2010, debugging, dll, breakpoints

我有一个带有 Web 应用程序项目的 VS 2010 解决方案，以及 Web 应用程序项目具有项目引用的几个类库项目。当我尝试通过 F5 调试构建过程调试其中一个类库项目的代码时，“模块”窗口通常无法加载相关 DLL 的符号，或者如果加载，则无论如何都会忽略断点。但是，在第二次尝试 F5 调试构建时，通常会识别断点，并且代码将在所需位置停止。

我已经尝试了各种方法来解决这个问题——所有常见的解决方案清洁业务，重复参考过程。直到我升级到 VS 2010 才发现这个问题，之后我从现有项目中重建了一个新的 VS2010 解决方案。我开始认为这是 2010 年的某种计时错误，因为我在第一次和第二次尝试之间没有做任何更改 - 就好像 VS 2010 忽略了构建配置中的依赖关系，并在类库的 PDB 已准备就绪，或者在它可以找到类库的 PDB 之前。

有人在 VS2010 中看到过类似的行为吗？正如您可以想象的那样，它在我的调试中增加了大量的“生产力扼杀”时间，必须构建所有内容 2 或 3 次才能让断点被识别。

谢谢，如果你能建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:17:51.497

尝试在运行之间擦除 bin 和 obj 文件夹。有帮助吗？我的 Web 服务器也有类似的问题，它没有对 VS2010 上的配置文件进行更改。

# tsql - Powershell - 复制或添加到数据表？

> ID：14733519
> 
> 赞同：0
> 
> 时间：2013-02-06T16:08:34.667
> 
> 标签：tsql, powershell, datatable

我正在使用 Chad Miller & Hey Scripting Guy 的函数[invoke-sqlcmd2](http://gallery.technet.microsoft.com/ScriptCenter/7985b7ef-ed89-4dfd-b02a-433cc4e30894/)和[write-datatable](http://gallery.technet.microsoft.com/ScriptCenter/2fdeaf8d-b164-411c-9483-99413d6053ae/)将查询结果保存到数据表，然后将其写入 SQL 表。

这是我正在运行的代码：

```
$dt = invoke-sqlcmd2 -serverinstance $_.server -query "exec master.dbo.sp_who" -As 'Datatable' 
write-datatable -serverinstance "myserverhere" -DATABASE "dbainfo" -tablename "who_sp_results" -DATA $dt 
```

我想在数据表中添加一个字段 - 我正在运行一个无法修改的 SP，并且想要添加服务器名称。我正在并行运行它，所以我不能使用临时表，我必须修改现有数据表或将其移动到新数据表。

1.  如何复制/更改数据表以获取附加列并将其设置为另一个变量？
2.  如果我们使用第二个数据表，因为我正在循环，我如何在 foreach 循环中的下一次运行之前“截断”它或清除它？

更新：从 $dt | 添加一行 选择对象 * 和 $dt | 获取成员

```
spid       : 1
ecid       : 0
status     : background                    
loginame   : sa
hostname   :                                                                                                                           

blk        : 0    
dbname     : 
cmd        : RESOURCE MONITOR
request_id : 0
RowError   : 
RowState   : Unchanged
Table      : {sa, sa, sa, sa...}
ItemArray  : {1, 0, background                    , sa...}
HasErrors  : False 
```

这是 $dt | 的结果 获取成员：

类型名称：System.Data.DataRow

```
Name              MemberType            Definition                                                                                     
----              ----------            ----------                                                                                     
AcceptChanges     Method                System.Void AcceptChanges()                                                                    
BeginEdit         Method                System.Void BeginEdit()                                                                        
CancelEdit        Method                System.Void CancelEdit()                                                                       
ClearErrors       Method                System.Void ClearErrors()                                                                      
Delete            Method                System.Void Delete()                                                                           
EndEdit           Method                System.Void EndEdit()                                                                          
Equals            Method                bool Equals(System.Object obj)                                                                 
GetChildRows      Method                System.Data.DataRow[] GetChildRows(string relationName), System.Data.DataRow[] GetChildRows(...
GetColumnError    Method                string GetColumnError(int columnIndex), string GetColumnError(string columnName), string Get...
GetColumnsInError Method                System.Data.DataColumn[] GetColumnsInError()                                                   
GetHashCode       Method                int GetHashCode()                                                                              
GetParentRow      Method                System.Data.DataRow GetParentRow(string relationName), System.Data.DataRow GetParentRow(stri...
GetParentRows     Method                System.Data.DataRow[] GetParentRows(string relationName), System.Data.DataRow[] GetParentRow...
GetType           Method                type GetType()                                                                                 
HasVersion        Method                bool HasVersion(System.Data.DataRowVersion version)                                            
IsNull            Method                bool IsNull(int columnIndex), bool IsNull(string columnName), bool IsNull(System.Data.DataCo...
RejectChanges     Method                System.Void RejectChanges()                                                                    
SetAdded          Method                System.Void SetAdded()                                                                         
SetColumnError    Method                System.Void SetColumnError(int columnIndex, string error), System.Void SetColumnError(string...
SetModified       Method                System.Void SetModified()                                                                      
SetParentRow      Method                System.Void SetParentRow(System.Data.DataRow parentRow), System.Void SetParentRow(System.Dat...
ToString          Method                string ToString()                                                                              
Item              ParameterizedProperty System.Object Item(int columnIndex) {get;set;}, System.Object Item(string columnName) {get;s...
blk               Property              System.String blk {get;set;}                                                                   
cmd               Property              System.String cmd {get;set;}                                                                   
dbname            Property              System.String dbname {get;set;}                                                                
ecid              Property              System.Int16 ecid {get;set;}                                                                   
hostname          Property              System.String hostname {get;set;}                                                              
loginame          Property              System.String loginame {get;set;}                                                              
request_id        Property              System.Int32 request_id {get;set;}                                                             
spid              Property              System.Int16 spid {get;set;}                                                                   
status            Property              System.String status {get;set;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:51:52.947

您不想使用 add-member ，因为这不会添加一种数据列。而是执行以下操作：

```
$Col =  new-object Data.DataColumn
$Col.ColumnName = "ServerName"
$dt.Columns.Add($col)
$dt | %{$_.ServerName = "myserverName"} 
```

顺便说一句，如果您将 get-member 与 inputobject 参数一起使用，您将看到列和添加方法：

**gm -inputobject $dt**

这不同于 **$dt | gm**返回数据行的属性和方法。第一个不展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:22:29.450

我想你正在寻找`Add-Member`

# backbone.js - 使用 Backbone 获取项目似乎忽略了传入的 id

> ID：14733521
> 
> 赞同：1
> 
> 时间：2013-02-06T16:08:47.733
> 
> 标签：backbone.js

我的网络服务中有这些路由，我可以直接通过浏览器点击其中任何一个，然后返回正确的值。

```
app.get('/repairs', repair.findAll);
app.get('/repairs/:id', repair.findById); 
```

当我要求 Backbone 这样做时，我意外地接到了一个电话

```
app.get('/repairs', repair.findAll); 
```

当我期望它达到

```
app.get('/repairs/:id', repair.findById); 
```

似乎调用“/repairs”而不是“/repairs/:id”的代码是

```
var EditRepair = Backbone.View.extend({
        el : '.page',
        render : function(options) {
            var scope = this;
            var repair = new Repair({id: options.id});                    

            //This has the correct id
            console.log(options.id);

            //I would expect this to call /repairs/12344312
            //However it calls /repairs
            repair.fetch({
                success : function(repair){
                    var template = _.template($('#edit-repair-template').html(), {repair : repair});
                    scope.$el.html(template); 
                }
            });
        }
    }); 

    var Repair = Backbone.Model.extend({
        urlRoot : 'repairs'
    }); 

    var Router = Backbone.Router.extend({
        routes: {
            'edit/:id' : 'editRepair'
        }    
    });

    var editRepair = new EditRepair();    
    var router = new Router();

    router.on('route:editRepair', function(id) {
        console.log('Edit Id : ' + id);
        editRepair.render({id:id});
    }); 
```

options.id 可以是 console.logged 并显示项目的正确 id。到目前为止，我遇到了一些问题，mongodb 中的 _id 和骨干网中的 id 之间的区别我已经解决了，但是对于我的一生，我不明白为什么这是发出维修电话而不是维修/id。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:51:55.710

我的错，我有一个 ajax 预过滤器来编码 uri 组件。

这弄乱了发出的请求。

```
 $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
      options.url = "http://localhost:3000/" + encodeURIComponent( options.url );
      console.log(options.url);
    }); 
```

Changed to

```
 $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
          options.url = "http://localhost:3000/" + options.url;
          console.log(options.url);
        }); 
```

# javascript - 在 dom 准备好使用 jquery 附加 html 元素

> ID：14733525
> 
> 赞同：0
> 
> 时间：2013-02-06T16:08:55.547
> 
> 标签：javascript, jquery

我有一个遗留数据库，除了客户端用来呈现一些页面片段的其余 html 源代码。我想获取里面的所有图像`#mainNewsBody .news p`并添加指向该图像的链接`rel='superbox[image]'`

现在是

`<img src="http://www.mysite.com/images/DSCF1087.JPG" />`它应该是

`<img src="http://www.mysite.com/images/DSCF1087.JPG" rel='superbox[image]'/>`

如何在 dom 上使用 jquery 来实现这一点？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:11:02.103

```
$(function(){
 $('#mainNewsBody .news img').attr('rel', 'superbox[image]');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:11:34.307

```
$(document).ready(function() {

    $('#mainNewsBody .news p img').attr("rel", "superbox[image]");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:11:40.110

```
$(document).ready(function(){
    $('#mainNewsBody .news p img').attr('rel', 'superbox[image]');
}); 
```

# debugging - 如何跟踪在发送到本地地址的代码中创建的 Web 请求

> ID：14733526
> 
> 赞同：0
> 
> 时间：2013-02-06T16:08:55.603
> 
> 标签：debugging, c#-4.0, httpwebrequest, client-server, fiddler

此问题发生在 C#、.NET 4.0 环境中。我尝试使用 Fiddler，但它没有出现。搜索后，建议的解决方案是将请求的地址从 localhost 更改为 machine-name。

这在我的本地机器上有效：将调用从 localhost 更改为 my-machine 后，提琴手拿起了它。真正的问题在于客户的带有生产代码的登台环境。我无法修改那里的代码以进行此更改。

请注意，据我所知，在客户端站点上，它应该向主机名发出请求，而不是向 localhost 发出请求。

此外，在我的本地机器上，我实际上在浏览器中点击了 localhost，它似乎可以很好地接收这些内容。只是不是内置代码的请求。这是为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:12:51.200

听起来你在说：“这在客户端的 PC 上运行良好，但在使用 Localhost 时在我的开发 PC 上运行良好。” 那是对的吗？

在 IE9 中，我[更改了 WinINET](http://blogs.msdn.com/b/fiddler/archive/2011/02/10/fiddler-is-better-with-internet-explorer-9.aspx)以使 Fiddler 能够从浏览器捕获环回流量。遗憾的是，.NET Framework 尚未采用对`<-loopback>`令牌的支持，这意味着发送到`127.0.0.1`或`localhost`绕过代理的流量。

# objective-c - 绑定后打印/记录 SQLite 语句

> ID：14733527
> 
> 赞同：3
> 
> 时间：2013-02-06T16:08:56.390
> 
> 标签：objective-c, sqlite

我喜欢在此之后记录编译的语句：

```
if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK)    {

    sqlite3_bind_int( compiledStatement, 1, updateThis.web_id);
    [...]

}
NSLog(@"Put out the complete SQLite Statement."); 
```

直接输出失败，我认为这不是这样做的方法：

```
NSLog(@"%@",compiledStatement); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T16:38:19.130

您不能打印已编译的语句。你可以做的是实现[sqlite3_trace](http://www.sqlite.org/c3ref/profile.html)回调函数。这将打印每个执行的 sql 语句。

要实现该功能，请在您的 @implementation 块之前添加它

```
void sqliteCallbackFunc(void *foo, const char* statement) {
    NSLog(@"=> %s", statement);
} 
```

这是您将指向的功能。

指向这个函数的简单调用：

`sqlite3_trace(db, sqliteCallbackFunc, NULL);`

# ruby-on-rails - 对于与数据库无关的非常大的文本字段，我可以使用什么数据类型？

> ID：14733529
> 
> 赞同：5
> 
> 时间：2013-02-06T16:09:01.100
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, text, storage

在我的 Rails 应用程序中，我想将位置列字段的地理范围存储在数据库中。例如，纽约的边界被表示为一个多边形：一个数组数组。

我已经声明我的模型来序列化多边形，但我不确定我是否应该像这样存储它们。这些序列化多边形的大小很容易超过 100,000 个字符，而 MySQL 只能在标准 TEXT 字段中存储大约[65000 个字符。](https://stackoverflow.com/questions/2266830/why-is-rails-trucating-text-column-to-65535-chars)

现在我知道 MySQL 也有一个 LONGTEXT 字段。但我真的希望我的应用程序与数据库无关。Rails 如何自己处理这个问题？它会自动切换到 LONGTEXT 字段吗？我什么时候开始使用 PostgreSQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:25:15.400

在这一点上，我建议你问问自己——这些数据需要存储，还是应该以这种格式存储在数据库中？

我提出了两种可能的解决方案：

1.  **将多边形存储在文件系统**中，并从数据库中引用它们。如此大的数据项在数据库中几乎没有用——将它们作为文本进行查询实际上是没有意义的。文件系统擅长存储文件 - 使用它。

2.  **如果您确实需要数据库中的这些多边形，请将它们存储为*规范化数据*。**有一个称为多边形的表和另一个称为点的表，反序列化多边形并以反映数据库预期使用方式的方式存储它。

希望这是有帮助的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:14:07.853

Postgresql 有一个名为 PostGIS 的库，我的公司使用它来处理在这种情况下可能非常有用的几何位置和计算。我相信 postgresql 也有两种允许数组和散列的数据类型。例如，声明数组，例如`text[]`可以将文本替换为另一种数据类型。可以使用 hstore 模块定义散列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T16:28:20.500

[这个问题](https://stackoverflow.com/questions/4443477/rails-3-migration-with-longtext)回答了我的部分问题：Rails 设置了 65535 的默认字节限制，您可以手动更改它。

总而言之，之后是否会遇到麻烦取决于您使用的数据库。对于 MySQL，Rails 会自动切换到适当的 *TEXT 字段。MySQL 最多可以存储[1GB](http://www.postgresql.org/docs/current/interactive/datatype-character.html)的文本。

但是就像 benzado 和 thomasfedb 说的那样，最好将信息存储在一个文件中，这样数据库就不会分配很多甚至可能不会使用的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T16:22:38.787

即使您*可以*将此类内容存储在数据库中，您也应该考虑将其存储在外部，只需将 URL 或其他标识符放入数据库中即可。

如果它在数据库中，那么当您不打算使用它时，您最终可能会将 64K 的数据加载到内存中，因为您访问了该表中的某些内容。与数据库表相比，扩展只读文件集合（使用 Amazon S3 之类的东西）更容易。

# .net-4.0 - 是否可以使 aspnet ModelBinding 在 .Net Framework 4.0 Web 窗体中工作？

> ID：14733535
> 
> 赞同：1
> 
> 时间：2013-02-06T16:09:29.227
> 
> 标签：.net-4.0, visual-studio-2012, webforms, .net-4.5, asp.net-4.5

我们有几个相对较大的 Web Forms Web 应用程序项目，但我们仅限于使用 .net 4.0，因为我们的一些客户仍在使用 Windows Server 2003，而 .net4.5 与该操作系统不兼容。

是否有可能使在 .net4.5 上创建的模型绑定框架与 .net4.0 WebForms 一起使用？可能类似于 .net2.0 上的扩展方法（尽管这显然是几乎 100% 编译时间的东西）或 LinqBridge。

如果这在某种程度上是可能的，我想我会花时间去做。也许如果可以从原始源中提取代码（我现在正在下载它们以查看它是如何工作的）并像我们当前页面生命周期中的各种扩展或继承一样插入。

该机制是否具有某些外部依赖性，会使这种情况变得令人望而却步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:16:22.813

基于 WebForms 的功能需要更改，这些更改仅在 4.5 中可用。

也就是说，如果您需要某种形式的模型绑定，您总是可以尝试对需要模型绑定的站点的特定部分使用 ASP.NET MVC 或 WebAPI 框架，而将其余部分保留为 WebForms。它们目前都只需要 .NET 4.0。您将获得这两种产品都是受支持的产品的好处。

# java - 不断增加的 CPU 负载从何而来？

> ID：14733536
> 
> 赞同：4
> 
> 时间：2013-02-06T16:09:31.960
> 
> 标签：java, multithreading, memory, profiler, cpu-usage

我开发的应用程序确实有问题。当我长时间运行它时，CPU负载会慢慢上升。这是 45 分钟后 Java VisualVM 的屏幕截图。

![在此处输入图像描述](../Images/7ac4b8c15f4236ae26819c3d7d63597d.png)

如您所见，内存使用量和线程数非常恒定。应用程序打开一个 LAN 插座并每 2 秒进行一次测量。此测量在单独的线程中运行（可以在右下角的线程图中看到）。

CPU 使用率缓慢但肯定地增加，一夜之间它累积到 70-80% 左右，此时整个系统显着减慢（显然）。现在我当然不希望这种增加，但找不到原因。没有内存泄漏（这也会导致内存不断增加），也没有生成越来越多的线程（因为计数也很稳定）。

我的应用程序有一个广泛的 GUI 和几个线程。以下是分析器中的线程列表：

![在此处输入图像描述](../Images/ca61bf14b63c8dea11d064cee2db4d77.png)

我将“我的”线程标记为黄色。因此，`MeasurementCommunication.startMeasurement`只要需要，就会创建（并再次终止）线程。所以任何时候只有一个人在奔跑。

**所以长话短说：我不知道 CPU 的增加是从哪里来的。你有什么想法？也许这是一个普遍的Java问题？** 如果您需要更多信息或细节，请告诉我，我会尽力回答。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:14:49.787

看看你用过的堆，它确实从 17:00 开始向上移动，你需要做的是捕获它更长的时间，并确保它确实爬回并保持上升/下降，但通常使用持平，如果它开始产生类似步骤的结果，即越来越多地向上增加，那么它可能是内存泄漏导致的问题，然后影响你的 CPU。所以简而言之，当堆爬升时，您需要更长时间地观察它。所以每次完整垃圾回收之间的状态......

# jsf-2 - 从 f:phaselistener 重定向后不显示 flash 消息

> ID：14733539
> 
> 赞同：2
> 
> 时间：2013-02-06T16:09:32.917
> 
> 标签：jsf-2, phaselistener, flash-scope

我对理解 flash 在 jsf 生命周期中的工作方式有疑问。

我正在尝试通过正常的 get 请求从阶段侦听器重定向到不同的页面，同时添加要在新页面上显示的 flash 消息（当然我已经设置了 flah.keepmessage）。但是该消息无法显示。我知道出了点问题，如果有人能帮助实施更好的方法（请不要使用过滤器），我将不胜感激。

**phaseredirect1.html**

```
 <h:body>
    <f:view>
        <f:phaseListener binding="#{testphase.testPL}"/>
        <div>Testing Phases Redirect 1</div>
    </f:view>
    </h:body> 
```

**TestPhaseRedirect.java**

```
 @SessionScoped
   @ManagedBean(name="testphase")
   public class TestPhaseRedirect {
   private PhaseListener testPL;

   @PostConstruct
   private void initializeVar(){
    testPL = new PhaseListener() {
        @Override
        public void afterPhase(PhaseEvent event) {
        }
        @Override
        public void beforePhase(PhaseEvent event) {
            getFacesContext().addMessage(null, new FacesMessage("Faces Message: redirecting to page 2..."));
            getExternalContext().getFlash().setKeepMessages(true);
            ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler)getFacesContext().getApplication().getNavigationHandler();
            nav.performNavigation("redirect-to-page2");
            getFacesContext().responseComplete();
            return;
        }
        @Override
        public PhaseId getPhaseId() {
            return PhaseId.RENDER_RESPONSE;
        }
    };
}    
public PhaseListener getTestPL() {
    return testPL;
}
} 
```

**phaseredirect2.html**

```
 <h:body>
    <f:view>
        <div style="width:400px;">
            <p:messages autoUpdate="true" closable="true"/>
            <p>Testing Phases Redirect 2</p>
            <p> Did it display the message? </p>
        </div>
    </f:view>
    </h:body> 
```

**人脸配置**

```
 <navigation-case>
        <from-outcome>redirect-to-page2</from-outcome>
        <to-view-id>/phaseredirect2.html</to-view-id>
        <redirect />
    </navigation-case> 
```

请纠正我。太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:29:54.260

在渲染响应阶段，创建 Flash 范围为时已晚。您最迟需要在调用应用程序阶段执行此操作。`<f:event type="preRenderView">`基本上，这个问题与在以下相关问题中已经回答的问题具有相同的理由：

*   [使用 ExternalContext.redirect() 将人脸消息添加到重定向页面](https://stackoverflow.com/questions/10595760/adding-faces-message-to-redirected-page-using-externalcontext-redirect)
*   [Mojarra 2.1.14 闪存范围消息并重定向到不同的路径](https://stackoverflow.com/questions/12723100/mojarra-2-1-14-flash-scope-messages-and-redirect-to-different-path)

在您的特定情况下，您需要一个虚拟视图参数，以便触发调用操作阶段，然后使用`<f:event type="postInvokeAction">`（在您自己创建自定义事件或根据上述链接问题的答案安装 OmniFaces 之后）：

```
<f:metadata>
    <f:viewParam name="dummy" />
    <f:event type="postInvokeAction" listener="#{bean.init}" />
</f:metadata> 
```

和

```
public void init() {
    FacesContext context = FacesContext.getCurrentInstance();
    context.addMessage(null, new FacesMessage("Faces Message: redirecting to page 2..."));
    context.getExternalContext().getFlash().setKeepMessages(true);
    ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler)  context.getApplication().getNavigationHandler();
    nav.performNavigation("redirect-to-page2");
} 
```

或者如果您选择了 OmniFaces

```
public void init() {
    Messages.addFlashGlobalInfo("Faces Message: redirecting to page 2...");
    Faces.navigate("redirect-to-page2");
} 
```

# eclipse - Eclipse RCP：如何以编程方式获取应用程序窗口图像？

> ID：14733540
> 
> 赞同：1
> 
> 时间：2013-02-06T16:09:37.130
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

在构建 Eclipse RCP 应用程序时，您可以在应用程序插件的`.product`和`plugin.xml`文件中定义窗口图像。这些是显示在主应用程序窗口左上角的图像。但是假设您想在应用程序可能打开的对话框窗口中使用相同的图像。您如何以编程方式访问此图像？

在我的用例中，我正在构建两种仅在品牌元素上有所不同的产品，因此我希望我的所有对话框都保持一致并使用主应用程序窗口使用的相同品牌形象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:09:37.130

我通过反复试验和失败的网络搜索找到了答案。原来它很简单：

`shell.setImage(ApplicationWindow.getDefaultImage());`

（为了完整起见，我目前正在使用 Eclipse 3.8 进行开发。不确定这是否会延续到 Juno/4.X）

# vb.net - 处理事件 - 表单/控件不更新？

> ID：14733544
> 
> 赞同：1
> 
> 时间：2013-02-06T16:09:51.740
> 
> 标签：vb.net, winforms, zedgraph, dockpanel-suite

首先，我不是全职从事 winform 开发工作，所以不要抨击我太糟糕......

正如标题所描述的那样，在引发和捕获事件后刷新表单上的控件时遇到问题。

在“Form1”上，我有一个 Dockpanel，正在创建两个新表单，如下所示：

```
Public Sub New()
    InitializeComponent()

    dpGraph.DockLeftPortion = 225
    dpGraph.BringToFront()

    Dim frmT As frmGraphTools = New frmGraphTools()
    Dim frmG As frmGraph = New frmGraph()

    AddHandler frmT.UpdateGraph, AddressOf frmG.RefreshGraph
    frmT.ShowHint = DockState.DockLeft
    frmT.CloseButtonVisible = False
    frmT.Show(dpGraph)

    frmG.ShowHint = DockState.Document
    frmG.CloseButtonVisible = False
    frmG.Show(dpGraph)
End Sub 
```

在 frmGraphTools 类中，我定义了以下委托、事件和按钮单击事件：

```
Public Delegate Sub GraphValueChanged(ByVal datum As Date)
Public Event UpdateGraph As GraphValueChanged

Private Sub btnSaveMach_Click(sender As Object, e As EventArgs) Handles btnSaveMach.Click
    RaiseEvent UpdateGraph(dtpJobDate.Value.ToString())
End Sub 
```

在 frmGraph 类中，我定义了以下子：

```
Public Sub RefreshGraph(ByVal datum As Date)
    CreateGraph(datum)
    frmGraphBack.dpGraph.Refresh()
End Sub 
```

我在 frmGraph 表单上有一个 ZedGraph 控件，它应该在单击 frmGraphTools 上定义的按钮时刷新/重绘。一切似乎都正常，frmGraph 中的 RefreshGraph Sub 正在执行，新数据被推送到 ZedGraph 控件中，但是该控件永远不会更新。必须做什么才能使 frmGraph 表单或 ZedGraph 控件正确更新/刷新/重绘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:16:30.957

从正确的 frmGraph 实例传递对 RefreshGroup 方法的引用

```
 AddHandler frmT.UpdateGraph, AddressOf frmG.RefreshGraph 
```

此调用也应由编译器标记，因为您传递的是字符串而不是 Date

```
 RaiseEvent UpdateGraph(dtpJobDate.Value.ToString()) 
```

可能你有[Option Strict Off](http://msdn.microsoft.com/en-US/library/zcd4xwzs%28v=VS.80%29.aspx)

# java - 在 Java SOAP webservice 中获取referer

> ID：14733555
> 
> 赞同：1
> 
> 时间：2013-02-06T16:10:17.870
> 
> 标签：java, web-services, soap, axis2

我觉得这应该是直截了当的。我们正在 Eclipse 中使用 SOAP 实现 Java Web 服务。我们想知道谁在调用 Web 服务。尽管我可以以某种方式从标题中获取引荐来源，但我不知道该怎么做。我们正在使用轴 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:13:44.293

从[TechNick](http://thetechnick.blogspot.co.uk/2009/12/get-client-ip-in-axis2.html)复制，您可以利用 axis2 进行此操作。您使用 Eclipse 的事实在很大程度上无关紧要，下面的代码应该可以正常工作。

```
//Import statement to import MessageContext class
import org.apache.axis2.context.MessageContext;

/*
* This method gets the client IP address using axis2 MessageContext 
*
* @return Client IP : String
*/
private String getClientIP () {

      return (String)(MessageContext.getCurrentMessageContext()).getProperty(MessageContext.REMOTE_ADDR);

} 
```

# ios - 更改 UITableView 动画的持续时间（使用表 beginUpdates 插入/删除行）

> ID：14733556
> 
> 赞同：18
> 
> 时间：2013-02-06T16:10:18.837
> 
> 标签：ios, animation, uitableview

有没有办法改变`[table beginUpdates]`/`[table endUpdates]`动画的持续时间？

这是我尝试过的，没有运气：

**选项1：**

```
[UIView animateWithDuration:5.0 delay:0.0 options:(UIViewAnimationOptionCurveEaseInOut|UIViewAnimationOptionOverrideInheritedDuration) animations:^{

     [self.tableView beginUpdates];

     [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithArray:indexPaths] withRowAnimation:UITableViewRowAnimationTop];

     [self.tableView endUpdates];

} completion:^(BOOL finished) {
}]; 
```

**选项 2：**

```
[CATransaction begin];

[CATransaction setCompletionBlock:^{
    NSLog(@"I actually get called!");
}];

[CATransaction setAnimationDuration:5.0]; //but I don't work

[self.tableView beginUpdates];

[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithArray:indexPaths] withRowAnimation:UITableViewRowAnimationTop];

[self.tableView endUpdates];

[CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-28T00:55:33.787

你为什么不试试 UIView 动画。

```
[UIView animateWithDuration:2 delay:0.2 options:UIViewAnimationOptionCurveEaseInEaseOut animations:^{
  [self.tableView beginUpdates];
  [self.tableView endUpdates];
} completion:^(BOOL finished) {
  // code
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-22T08:26:18.300

这是[Gautam Jain](https://stackoverflow.com/a/26080616/5501940)答案的**Swift**版本：

```
UIView.animate(withDuration: 2.0, delay: 0.0, options: .curveEaseInOut, animations: {
    self.tableView.beginUpdates()
    // ...
    self.tableView.endUpdates()
}) { isFinished in
    // ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-11T08:04:36.953

@Gautam Jain 的解决方案很棒。但是，它有一个问题，至少在 iOS 9 中：完成块将立即执行，而不是在动画完成时执行。

我通常喜欢下面的代码，但代码更多但效果更好。

```
[UIView beginAnimations:@"animation" context:nil];
[UIView setAnimationDuration:0.25];
[CATransaction begin];
[CATransaction setCompletionBlock:^{
   // completion block
}];

[self.tableView beginUpdates];
// updates  
[self.tableView endUpdates];

[CATransaction commit];
[UIView commitAnimations]; 
```

# ios - 是否有用于访问 iOS 中 Mail 的最近收件人列表的 API？

> ID：14733560
> 
> 赞同：2
> 
> 时间：2013-02-06T16:10:30.267
> 
> 标签：ios, email

我使用地址簿数据库 (ABAddressBookCopyArrayOfAllPeople) 编写了具有地址自动完成功能的自定义电子邮件编写器。标准电子邮件编辑器还有一个最近的收件人列表，这是最近发送到但未保存为联系人的地址。这个列表在公共 API 中可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:40:28.033

第三方应用程序访问此列表会破坏用户隐私，因此不允许。

# android - Android SQLite：INSERT detailMessage null

> ID：14733562
> 
> 赞同：0
> 
> 时间：2013-02-06T16:10:36.010
> 
> 标签：android, sqlite

我尝试`db_insert.java`从`MyDB.java`.

```
public void append(String n,int p) { 
      String str = "INSERT INTO " + TABLE_NAME + " (" + NAME + "," + PRICE + ") VALUES (" + n +"," + p + ")";
        db.execSQL(str);      
} 
```

在调试模式下，`n`&`p`从`db_insert.java`.

到目前为止，还好。但是当处理时`db.execSQL(str);`，应用程序会崩溃。

有人知道为什么吗？

**日志猫**

```
 02-07 00:16:48.467: I/Process(979): Sending signal. PID: 979 SIG: 9 02-07 00:17:17.827:

 E/MyDBlog(1109): click insert_OKs 02-07 00:17:17.827: D/AndroidRuntime(1109): Shutting 

down VM 02-07 00:17:17.827: W/dalvikvm(1109): threadid=1: thread exiting with uncaught 

exception (group=0x2aac8578) 02-07 00:17:17.827: E/AndroidRuntime(1109): FATAL EXCEPTION: 

main 02-07 00:17:17.827: E/AndroidRuntime(1109): java.lang.NullPointerException 02-07 

00:17:17.827: E/AndroidRuntime(1109): at com.example.mydb.MyDB.append(MyDB.java:39) 02-07 

00:17:17.827: E/AndroidRuntime(1109): at com.example.mydb.db_insert$1.onClick(db_insert.java:66) 02-07 00:17:17.827: 

E/AndroidRuntime(1109): at android.view.View.performClick(View.java:2552) 02-07 

00:17:17.827: E/AndroidRuntime(1109): at android.view.View$PerformClick.run(View.java:9229) 

02-07 00:17:17.827: E/AndroidRuntime(1109): at android.os.Handler.handleCallback(Handler.java:587) 02-07 00:17:17.827: 

E/AndroidRuntime(1109): at android.os.Handler.dispatchMessage(Handler.java:92) 02-07 

00:17:17.827: E/AndroidRuntime(1109): at android.os.Looper.loop(Looper.java:130) 02-07 

00:17:17.827: E/AndroidRuntime(1109): at android.app.ActivityThread.main(ActivityThread.java:3701) 02-07 00:17:17.827: E/AndroidRuntime(1109): at java.lang.reflect.Method.invokeNative(Native Method) 02-07 00:17:17.827: E/AndroidRuntime(1109): at java.lang.reflect.Method.invoke(Method.java:507) 02-07 00:17:17.827: E/AndroidRuntime(1109): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866) 02-07 

00:17:17.827: E/AndroidRuntime(1109): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624) 02-07 00:17:17.827: 

E/AndroidRuntime(1109): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

我的应用首先使用 open() 打开数据库。

MyDB.java

```
public SQLiteDatabase db=null; 
private Context mCtx = null;
public MyDB(Context ctx){  
    this.mCtx = ctx;      
}
public void open() throws SQLException { // 開啟已經存在的資料庫  
    db = mCtx.openOrCreateDatabase(DATABASE_NAME, 0, null);
        try {       
          db.execSQL(CREATE_TABLE);// 建立資料表 
      }catch (Exception e) {    
      } 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:40:16.263

使用 db.insert 方法并将值存储到 ContentaValues 对象中。

请参阅[此博客](http://ramsandroid4all.blogspot.in/)以获取 SQLiteDatabase 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:08:06.937

```
private static final String INSERT = "insert into contact(name,number) values(?,?)";
public DataHelper(Context context)
    {
        this.context=context;
        openhelper=new OpenHelper(context);
        this.db=openhelper.getWritableDatabase();
        this.insertStmt1 = this.db.compileStatement(INSERT);

    }

public boolean insert(String name, String number)
    {
    openhelper=new OpenHelper(context);
    db=openhelper.getWritableDatabase();

    String person=name;

    String values1=number;

    this.insertStmt1.bindString(1, person);
    this.insertStmt1.bindString(2, number);

    this.insertStmt1.executeInsert();

   Toast.makeText(context, "Value inserted", 10000).show();
    openhelper.Close_DB(db); 
    return true;
    } 
```

这是一个将值插入数据库的示例，根据您的需要进行修改。:)

# c# - 将数据从 DataAdapter 输出到 HTML 表

> ID：14733565
> 
> 赞同：0
> 
> 时间：2013-02-06T16:10:36.993
> 
> 标签：c#, asp.net, webforms

以下代码似乎生成了一个 DataAdapter：

```
protected void grdMain_Databind()
{
    DbProviderFactory dbf = DbProviderFactories.GetFactory();
    using (IDbConnection con = dbf.CreateConnection())
    {
        string sSQL;
        sSQL = "select * , " + ControlChars.CrLf
           + " CASE isnull((select TOP 1 EMAIL_ID from EMAILS_ATTACHMENTS WHERE ATTACHMENT_ID=vwFILES_ATTACHMENTS.ATTACHMENT_ID),'00000000-0000-0000-0000-000000000000') " + ControlChars.CrLf
           + "    WHEN  '00000000-0000-0000-0000-000000000000'      THEN '0'  ELSE '1' END AS  SENT_ATTACHMENT  " + ControlChars.CrLf
           + "     , case File_ext when '.pdf' then 'true' else 'false' end as 'enablecheck'" + ControlChars.CrLf
           + "     , case VISIBLE_TO_CLIENT when '1' then '" + Session["themeURL"].ToString() + "images/check_inline.gif'" + ControlChars.CrLf
           + "                              else '" + Session["themeURL"].ToString() + "images/close_inline.gif' " + ControlChars.CrLf
           + "                              end as 'VISIBLE_TO_CLIENT_PATH'" + ControlChars.CrLf
           + "  from vwFILES_ATTACHMENTS" + ControlChars.CrLf
           + " where 1 = 1 " + ControlChars.CrLf;

        using (IDbCommand cmd = con.CreateCommand())
        {
            try
            {
                using (DbDataAdapter da = dbf.CreateDataAdapter())
                {
                    ((IDbDataAdapter)da).SelectCommand = cmd;
                    using (DataTable dt = new DataTable())
                    {
                        da.Fill(dt);
                        vwMain = dt.DefaultView;
                        grdMain.DataSource = vwMain;
                        // 09/05/2005 Paul. LinkButton controls will not fire an event unless the the grid is bound. 
                        if (!IsPostBack)
                        {
                            //grdMain.SortColumn = "DATE_ENTERED";
                            //grdMain.SortOrder = "desc";
                            //grdMain.ApplySort();
                        }
                        grdMain.DataBind();
                    }
                }
            }
            catch (Exception ex)
            {
                SplendidError.SystemError(new StackTrace(true).GetFrame(0), ex.Message);
            }
        }
    }
} 
```

如何将该数据输出到 HTML 表中？我尝试了以下方法，但收到一条错误消息`'dt' does not exist in the current context`：

```
<% foreach (DataRow row in dt.Rows) { %> <!-- loop through the list -->
    <div>
        <%= row.ID %> <!-- write out the name of the site -->
    </div>
<% } %> <!--End the for loop --> 
```

# kotlin - 如何从命令行运行 Kotlin 类？

> ID：14733566
> 
> 赞同：68
> 
> 时间：2013-02-06T16:10:38.453
> 
> 标签：kotlin

我知道以前有人问过这个问题，但那里的信息都没有帮助我。

这是我的情况：我无法运行已编译的 Kotlin 类。当我尝试像普通的 java 类一样运行它时，我得到以下信息：

```
C:\Users\User\Desktop>java _DefaultPackage

Exception in thread "main" java.lang.NoClassDefFoundError: jet/runtime/Intrinsics
    at _DefaultPackage.main(Finder.kt)
Caused by: java.lang.ClassNotFoundException: jet.runtime.Intrinsics
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more 
```

鉴于该输出，这让我相信 Kotlin 运行时完全丢失了。所以我尝试了以下方法：

```
C:\Users\User\Desktop>java -cp kotlin-runtime.jar _DefaultPackage

Error: Could not find or load main class _DefaultPackage 
```

这让我觉得也许我需要将类文件添加到我声明的类路径中，所以：

```
C:\Users\User\Desktop>java -cp kotlin-runtime.jar';_DefaultPackage.class _DefaultPackage

Error: Could not find or load main class _DefaultPackage 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2015-12-29T14:26:42.680

## 知道你的主类的名字

要运行 Kotlin 类，您实际上是在运行一个在文件级别创建的特殊类，该类包含您的`main()`和其他顶级函数（在类或接口之外）。因此，如果您的代码是：

```
// file App.kt
package com.my.stuff

fun main(args: Array<String>) {
  ...
} 
```

`com.my.stuff.AppKt`然后你可以通过运行类来执行程序。此名称源自您的文件名，并`Kt`附加。[您可以通过添加此面向文件的注释](https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets)来更改文件中此类的名称：

```
@file:JvmName("Foo") 
```

您还可以将您`main()`的对象放入一个带有伴随对象的类中，并`static`使用`JvmStatic`注释进行创建。因此，您的班级名称是您选择的班级名称：

```
// file App.kt
package com.my.stuff

class MyApp {
    companion object {
        @JvmStatic fun main(args: Array<String>) {
          ...
        }
    }
} 
```

现在你只需运行类`com.my.stuff.MyApp`

## 我还需要哪些其他 JAR 文件？

您需要您的应用程序 JAR 和任何依赖项。对于在 Maven/Gradle 之外的 Kotlin 特定 JAR，您需要一个 Kotlin 发行版，其中包含：

*   `kotlin-stdlib.jar`（标准库）
*   `kotlin-reflect.jar`仅当使用 Kotlin 反射时
*   `kotlin-test.jar`对于使用 Kotlin 断言类的单元测试

## 从 Intellij 运行

如果在 Intellij（如果它是您的 IDE）中，您可以右键单击该`main()`函数并选择运行，它将为您创建一个运行时配置并显示将使用的完全限定类名。如果您不确定生成的类的名称，您可以随时使用它。

## 从 Gradle 运行

您还可以使用[Gradle 应用程序插件](https://docs.gradle.org/current/userguide/application_plugin.html)从 Gradle 运行进程，或创建一个可运行系统，其中包含 JAR 及其所有依赖项的 zip/tgz 和启动脚本。使用上面的示例类，您可以将其添加到您的`build.gradle`：

```
apply plugin: 'application'

mainClassName = 'com.my.stuff.AppKt'

// optional:  add one string per argument you want as the default JVM args
applicationDefaultJvmArgs = ["-Xms512m", "-Xmx1g"] 
```

然后从命令行使用：

```
// run the program
gradle run

// debug the program
gradle run --debug-jvm

// create a distribution (distTar, distZip, installDist, ...)
gradle distTar 
```

## 直接从 Java 命令行运行

如果您有一个可运行的 JAR，并且假设`KOTLIN_LIB`指向 Kotlin 运行时库文件所在的目录：

```
java -cp $KOTLIN_LIB/kotlin-stdlib.jar:MyApp.jar com.my.stuff.AppKt 
```

请参阅上面有关您可能需要的其他 JAR 文件的注释。如果您有一个可运行的 JAR（清单指向`com.my.stuff.AppKt`作为主类），则略有不同：

```
java -cp $KOTLIN_LIB/kotlin-stdlib.jar -jar MyApp.jar 
```

## 使用 Kotlin 命令行工具运行

如果您通过[Homebrew](http://brew.sh/)或其他包管理器安装 Kotlin 工具。（在 Mac OS X 上`brew update ; brew install kotlin`）然后运行起来非常简单：

```
kotlin -cp MyApp.jar com.my.stuff.AppKt 
```

此命令将 stdlib 添加到提供的类路径中，然后运行该类。您可能需要添加额外的 Kotlin 库，如上面“从 Java 运行”部分中所述。

## 使用 Kotlin 编译器创建可运行的 JAR

这不是很常见，因为大多数人使用其他构建工具，但是 Kotlin 编译器可以创建一个可运行的 Jar 来为您解决这个问题（请参阅[http://kotlinlang.org/docs/tutorials/command-line.html](http://kotlinlang.org/docs/tutorials/command-line.html)）运行时和你的代码在一起。虽然这在使用 Maven 和 Gradle 等工具或 IDE 构建时并不常见。然后使用普通的 Java 运行：

```
java -jar MyApp.jar 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-05-31T17:05:31.430

`kotlinc`您可以使用如下方式进行编译：

> $ kotlinc hello.kt -include-runtime -d hello.jar

然后您可以按如下方式运行jar文件：

> $ java -jar hello.jar

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T00:05:00.580

我也为此挣扎了一段时间。你已经接近了，你只需要将你的 jar 包含在类路径中，并将你的“主”类的限定名称作为主要参数传递给 java。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-02T12:45:08.830

`main.kt`重要的是要考虑到，当您尝试运行项目时，您可能与您不在同一个文件夹中，并且并不总是很清楚如何告诉 Kotlin（或 Java）找到它。

假如说：

*   您正在尝试从 Windows 命令提示符编译和运行。
*   你有这个项目结构（在 IntelliJ Idea 设置命令行 Kotlin 项目之后）：

```
MyNiftyProject
  src
    main
      kotlin
        main.kt 
```

*   您位于项目根目录中。
*   你有这个`main.kt`文件：

```
fun main(args: Array<String>) {
    println("Hello World!")
} 
```

像这样编译：

```
kotlinc src/main/kotlin/main.kt -include-runtime -d MyNiftyProject.jar 
```

这将放在您项目`MyNiftyProject.jar`的**根目录中。**

然后使用`java`命令行工具像这样运行：

```
java -jar MyNiftyProject.jar 
```

或者使用`kotlin`命令行工具像这样运行：

```
kotlin -classpath MyNiftyProject.jar MainKt 
```

# objective-c - 在ObjectiveC（IOS6）中从Parent调用子方法

> ID：14733571
> 
> 赞同：0
> 
> 时间：2013-02-06T16:10:43.977
> 
> 标签：objective-c, methods, subclass

SquareGeo，TriangleGeo 是从 Geo 类驱动的。
每个 SquareGeo、TriangleGeo 类都有具有相同参数但内容不同的 drawMe 方法。

我想从基类中调用 drawMe 是 Geo 但是，问题 Navigator 告诉我一个警告：

```
"Instance method '-drawMe' not found (return type defaults to 'id')" 
```

总之：
如何从仅定义其所有子类的 Parent 调用方法。

我应该避免警告吗？我应该使用协议吗？看起来像这样：

```
[sub drawMe]; //not super 
```

任何想法 ？（请不要让我参考 java 示例。只有 objectC 专有技术）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:13:00.613

这就是继承的美妙之处，您在父级中声明该方法，并在子级中实现它，并且底层系统根据实例实际是什么类型的类来处理调用该方法的“正确”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:25:36.320

克服这个问题的最简单方法是在父类中提供一个空实现。

如果您想确保子类确实提供自己的实现，那么您可以向基类的方法添加异常

```
@implementation Base

- (void)drawMe;
{
  [NSException raise:NSInternalInconsistencyException 
        format:@"You must override %@ in a subclass", NSStringFromSelector(_cmd)];
} 
```

# javascript - 内联 location.href javascript

> ID：14733576
> 
> 赞同：0
> 
> 时间：2013-02-06T16:10:52.090
> 
> 标签：javascript

我需要一个没有 onClick 的内联 javascript 链接，看起来像这样（例如）

```
<a href="javascript:location.href=('http://www.google.com')">Google</a> 
```

这样的事情可能吗？如果是这样，我怎样才能使它工作？

javascript 必须像这样进行内联编码，例如，因为我的 CMS 不允许我在锚点的 URL 末尾附加“#example”，所以我想要一个内联 javascript，这样我就可以这样链接, CMS 允许这种类型的格式信不信由你。

# c# - .net web api RESTFul web 服务引导

> ID：14733580
> 
> 赞同：0
> 
> 时间：2013-02-06T16:11:02.277
> 
> 标签：c#, asp.net-web-api

我正在尝试创建一个 REST 服务来管理一些数据库表，所以因为我是 C# 和 .NET 的新手，所以我从阅读教程开始，我遇到了这个很好的起点 tut [http://www.codeproject.com /Articles/426769/Creating-a-REST-service-using-ASP-NET-Web-API](http://www.codeproject.com/Articles/426769/Creating-a-REST-service-using-ASP-NET-Web-API)

它展示了如何创建一些控制器，在这种情况下处理一个简单的任务列表，所以我想为每个表创建一个控制器并为每个表实现 GET、POST、PUT 等

我现在的问题是在最后的 Global.asax.cs 文件中我有这个

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver
(

t =>
{
    if (t == typeof(TasksController))
    {
        return new TasksController(new TaskRepository());
    }

    return null;
},

t => new List<object>()
); 
```

它初始化了我的依赖项，但是...

首先，由于某种原因（我认为它与框架版本有关）ServiceResolver 类不存在，为什么？和

第二，即使存在我需要如何编写代码来创建和初始化其余的控制器？

```
t =>
{
    if (t == typeof(TasksController))
    {
        return new TasksController(new TaskRepository());
    }

    if (t == typeof(OtherController))
    {
        return new OtherController();
    }

    if (t == typeof(OneMoreController))
    {
        return new OneMoreController();
    }

    return null;
} 
```

也许？？

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:16:50.210

该代码已严重过时。它基于 Web API 的预览版。在 Web API 的最终版本中，依赖注入的正确配置挂钩是

```
config.DependencyResolver = new MyDependencyResolver();

public class MyDependencyResolver : IDependencyResolver
{
    public IDependencyScope BeginScope()
    {
        // return a different instance if you want to dispose resources
        return this;
    }

    public object GetService(Type serviceType)
    {
        if (t == typeof(TasksController))
        {
            return new TasksController(new TaskRepository());
        }

        if (t == typeof(OtherController))
        {
            return new OtherController();
        }

        if (t == typeof(OneMoreController))
        {
            return new OneMoreController();
        }

        return null;
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return null;
    }

    public void Dispose()
    {
    }
} 
```

# mysql - Wordpress Multisite phpmyadmin-删除多个带有前缀 wp_xx_ 的表

> ID：14733583
> 
> 赞同：0
> 
> 时间：2013-02-06T16:11:21.643
> 
> 标签：mysql, sql, wordpress, phpmyadmin

试图在 phpmyadmin 中删除多个 wp 多站点表

示例任务

删除数据库 istheplaDBbb9h3 中属于站点 id 73 的所有表（当前有 9 个表）

我可以将表识别为 wp_73_commentmeta、wp_73_comments 等

在 phpmyadmin 的 SQL 选项卡中输入以下代码

```
SELECT CONCAT( 'DROP TABLE ', GROUP_CONCAT(table_name) , ';' )
    AS statement FROM information_schema.tables
    WHERE table_schema = 'istheplaDBbb9h3' AND table_name LIKE 'wp_73_%'; 
```

并点击 Go

该代码似乎已被接受，而表似乎已被识别，因为没有删除行 (0-0)，所以什么也没有发生

[在http://i.imgur.com/sjoVP0J.png](http://i.imgur.com/sjoVP0J.png)查看结果的模板图像

显然我遗漏了一些东西或在错误的选项卡中！

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:40:45.120

首先要做的事情：确保您的表已备份！

你需要`DROP TABLE`为每张桌子写一个，我认为这应该给你`DROP TABLE`每张桌子一个，你可以运行一次。您现在正在连接 drop table，因此切换 em 并添加分隔符以一次运行多个查询：

```
SELECT GROUP_CONCAT(CONCAT('DROP TABLE ', table_name) SEPARATOR ';') 
AS statement FROM information_schema.tables
WHERE table_schema = 'istheplaDBbb9h3' AND table_name LIKE 'wp_73_%'; 
```

这不会为您运行查询：您必须抓住它所产生的东西，就像您在提出问题后发现的那样。另外，请确保它已备份并且首先查询正确。

# asp.net - UnobtrusiveValidationMode 在使用 ScriptBundle 时需要 jquery ScriptResourceMapping

> ID：14733584
> 
> 赞同：2
> 
> 时间：2013-02-06T16:11:24.910
> 
> 标签：asp.net, jquery-validate, unobtrusive-validation, asp.net-4.5, bundling-and-minification

我在 ASP.NET 4.5 **Web 窗体**应用程序中使用新的[捆绑和缩小。](http://www.asp.net/vnext/overview/aspnet/whats-new#_Toc318097384)UnobtrusiveValidationMode 需要一个 jquery ScriptResourceMapping 才能工作，但我正在通过 ScriptBundle 配置注册它。

 **我是这样使用的：

```
bundles.Add(new ScriptBundle("~/Content/Scripts").Include("~/Content/jquery-1.9.0.js")); 
```

但这会产生错误：

> WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。

要修复错误，请执行以下操作：

```
ScriptManager.ScriptResourceMapping.AddDefinition("jquery", new ScriptResourceDefinition { Path = "~/Content/jquery-1.9.0.js" }); 
```

但我想使用捆绑和缩小来组合和最小化所有应用程序脚本（在这个例子中我只使用 jquery 文件更简单）。这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:11:24.910

这是一个解决方案，适用于 Bundle 和 Minification，但我不知道是否是最好的。

```
bundles.Add(new ScriptBundle("~/Content/Scripts")
    .Include("~/Content/jquery-1.9.0.js")
    .Include("..."));

ScriptManager.ScriptResourceMapping.AddDefinition("jquery", new ScriptResourceDefinition { Path = "~/Content/Scripts" }); 
```

ScriptResourceDefinition.Path 与 ScriptBundle 虚拟路径相同。**

# javascript - Subclipse 在我的 Eclipse 代码中添加废话

> ID：14733586
> 
> 赞同：0
> 
> 时间：2013-02-06T16:11:26.177
> 
> 标签：javascript, eclipse, svn, subclipse

我的代码正在中断，因为每次我尝试从代码的先前版本中恢复时，Subclipse 都会不断地将这种奇怪的符号/注释添加到我的 Javascript 中。

例如

```
 if (profanityCheck() == false)
<<<<<<< .working
    {
        var inputData = "";
        var newData = new Array();
======= 
```

我该如何阻止它这样做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:15:26.237

这通常表明您的工作区中的文件版本与您尝试切换到的 SVN 版本之间存在冲突。

要修复它`Right-click -> Team -> Mark resolved`，然后选择最有意义的选项（可能使用文件的传入版本）。

# c# - 有没有办法通过 C# 访问 Apex WebService 方法而无需在代码中登录 SalesForce？

> ID：14733588
> 
> 赞同：1
> 
> 时间：2013-02-06T16:11:28.100
> 
> 标签：c#, salesforce, apex-code

我在 SalesForce 中创建了一个希望第三方访问的 APEX 方法。我不希望该第三方拥有 SalesForce 登录名，但我希望他们访问该方法。我看到的唯一方法是使用 WSDL，然后使用绑定登录。我怎样才能在没有登录要求的情况下向世界公开这项服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:43:49.977

是的，这是Salesforce Stack Exchange 网站上类似问题[的答案。](https://salesforce.stackexchange.com/questions/4713/can-i-have-a-public-apex-rest-api/)

这里的问题是关于公开 RESTful Web 服务的问题，但使用 Salesforce 站点的相同原则可以应用于您的情况。

这是一个[developerforce 论坛帖子](http://boards.developerforce.com/t5/Apex-Code-Development/Exposing-Apex-Web-Service-class-via-Force-com-Sites/td-p/209290)，其中有人试图使用 Apex Web 服务

# java - 循环更改图像 - Android

> ID：14733592
> 
> 赞同：3
> 
> 时间：2013-02-06T16:11:35.467
> 
> 标签：java, android, for-loop, thread-sleep

我想知道为什么我仍然无法找到一种方法来做到这一点。虽然看起来很简单，但我花了一整天的时间。但不能那样做。

我有一组骰子图像。1.png、2.png、.... 和 6.png。我的布局中有一个 ImageView。那是，

```
ImageView dice = (ImageView) findViewById(R.id.imageViewrollingdiceOne); 
```

在这里，我想快速更改此 imageView 以使用以上 6 个图像查看某种视觉/动画。为此，我编写了以下代码。

**代码 1：**

```
for (int j=0;j<10;j++){
        int randomNum = random.nextInt(6);
            System.out.println("Random Value " + randomNum);
            dice.setImageResource(images[randomNum]);               
    } 
```

**输出：**

没有视觉。imageView 保持不变，并在循环最后一次迭代时突然改变。我认为这是因为循环执行得非常快。然后我做了以下。

**代码 2：**

```
for (int j=0;j<10;j++){
        int randomNum = random.nextInt(6);
            System.out.println("Random Value " + randomNum);
            dice.setImageResource(images[randomNum]);
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }               
    } 
```

**输出：**

再次没有视觉。imageView 保持不变，并在循环最后一次迭代时突然改变。然后我做了以下。

**代码 3：**

```
final Handler localHandler = new Handler();
    Runnable runnableObject = new Runnable() {
        public void run() {
            final ImageView dice = (ImageView) findViewById(R.id.imageViewrollingdiceOne);
            int randomNum = random.nextInt(6);
            System.out.println("Random Value" + randomNum);
            dice.setImageResource(images[randomNum]);
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    };
    for (int j=0;j<10;j++){
        localHandler.postDelayed(runnableObject, 1000);
    } 
```

再次没有视觉。imageView 保持不变，并在循环最后一次迭代时突然改变。在所有三种情况下，logcat 都没有任何错误。

我发现线程也不能解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T16:23:20.097

首先，在 android 中已经有一个动画集，可以帮助你在它被称为**[FrameAnimation](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)**之后实现你的目标，这里是一个如何使用它的示例：

[FrameAnimation 示例](http://www.edumobile.org/android/android-development/frame-animation/)

您的第一、第二和第三个代码在主线程中运行，您永远不应该在主线程中使用睡眠！

如果您仍想手动设置图像资源，可以使用以下代码：

```
 final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        public void run() {
            int randomNum = random.nextInt(6);
            dice.setImageResource(images[randomNum]);
            handler.postDelayed(this, 500);
        }
    }, 500); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-11T16:51:35.210

当您使用项目列表并根据时间间隔一一更改时，这很有帮助。初始`i`值应为 0，列表大小取决于。

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable(){
    public void run(){
        if(i<4) {
            galleryImg.setImageResource(myImageList[i]);
            i++;
        } else {
            i=0;
        }
        handler.postDelayed(this, 10000);
    }
}, 500); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:18:15.327

您可能看不到更改的原因是，主 UI 线程的最终回调发生在您的线程完成执行之后，您只能看到最终结果。现在，这是我（可能很差）的理解，更精通它的人可能会纠正我。

**也就是说**，您可能应该考虑使用一个`AnimationDrawable`对象：

```
ImageView sImage = (ImageView)findViewById(R.id.imageViewrollingdiceOne);
AnimationDrawable anim = new AnimationDrawable();

for (int j=0;j<6;j++) {
  anim.addFrame(new BitmapDrawable(images[j], 200);
}

sImage.setBackgroundDrawable(anim);
anim.setOneShot(false);
anim.start(); 
```

这假设您已经`images[]`以随机顺序生成了图像。如果您想更改它，请将您需要的任何代码放入 for 循环中。

它所做的是创建一个动画对象，就像您看到的`gif`作品在更改之间设置了延迟间隔（在此代码中为 200 毫秒）。如果您愿意，您可以选择更改该号码。该`setOneShot`调用确保它循环而不是完成动画并在最后一张图像上停止。

# windows-phone-7 - Window Phone 8 - 默认媒体播放器文件 url 方案

> ID：14733596
> 
> 赞同：0
> 
> 时间：2013-02-06T16:11:48.180
> 
> 标签：windows-phone-7, windows-phone-8

是否可以使用某种方案从浏览器的 url打开**Windows Phone 8中的默认媒体播放器？**我还想知道是否有其他方法可以从浏览器打开媒体播放器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:19:41.843

MSDN上没有记录[作为启动默认媒体播放器的注册 URI 方案](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937%28v=vs.105%29.aspx)。

[根据有关文件类型关联的 MSDN 页面，](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx)如果您尝试链接到 .MP3 或 .AAC 文件或其他音频或视频文件，它将启动媒体播放器并播放您指向的文件。

它还指出：

> 有时 Internet Explorer 会覆盖文件关联：它会启动内置媒体播放器来处理所有音乐和视频文件类型。具体来说，任何具有音频/ 或视频/ 内容类型的文件。例如，当您的应用程序从电子邮件附件启动时，它可以处理（非保留）音乐和视频文件。但如果从 Internet Explorer 启动相同的文件，则内置媒体播放器将处理该文件。

# backbone.js - 主干.layoutmanager 产生错误消息“将 `View#manage` 属性与选择器 '' 设置为 `true`”

> ID：14733600
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:06.980
> 
> 标签：backbone.js, backbone-layout-manager

我在别处问过这个问题。但我也会在这里问，以防谁知道答案。

我最近写了一个简单的网络应用程序。它总共有两个视图，用户应该能够在两个视图之间来回切换。在我看来，setView 方法可以改变应用程序视图的工作。通过单击链接从索引视图切换到显示视图时，它工作得很好。但是，当我单击链接时，它无法返回索引视图。它只是弹出此错误消息“请将带有选择器''的 View#manage 属性设置为 true”。由于旧视图对象在切换到另一个视图时应该被破坏，为什么它会出现这个错误，除非它没有像我想象的那样工作。

下面是我的咖啡脚本代码片段。MyApp.Routers.Home = Backbone.Router.extend（路线：'books'：'showBooksIndex''books/:id'：'showBook'

```
 initialize: (options) ->
        @buildLayout()

      buildLayout: ->
        @layout = app.useLayout("main")

      showBooksIndex: ->
        @cleanLayout()
        @books = new MyApp.Collections.Book();
        @viewIndex = new MyApp.Views.BooksIndex(
            collection: @books;
        )
        @layout.setView('#app', @viewIndex)

      showBook: (id) ->
        @cleanLayout()
        @book = new MyApp.Models.Book id: id
        @view = new MyApp.Views.BookShow model: @book
        @layout.setView('#app', @view)

      cleanLayout: ->
        appView = @layout.getView('#app')
        if appView
          appView.remove()

    MyApp.Views.BookShow = Backbone.View.extend(
      id: "book-show"
      className: "book-card"
      manage: true
      template: JST['templates/books/show']
      initialize: ->
        @model = @options.model
        _this = @
        @model.fetch(
          success: (model, resp)->
            _this.render();
        ) 
```

MyApp.Views.BooksIndex 具有与 BookShow 视图类似的代码。

缓存视图也可能是一种解决方案。此方法将解决此问题，因为可以避免重新创建视图对象。但由于我的应用程序有很多照片，我希望每次应用程序视图更改时都从服务器获取数据。我不确定这是否是正确的方法。提前感谢您分享您的见解。

# excel - 带日期的 Microsoft Excel 数组公式

> ID：14733602
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:18.287
> 
> 标签：excel, ms-office

对于 Date 类型，我需要以下数组：

```
=IF(OR(A2:C2="Mar 12"),1,0) 
```

示例数据 [https://docs.google.com/spreadsheet/ccc?key=0AhoDU0OTM87sdHR3RGw3NTJacEV1OEt5OWZTWTBYUFE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AhoDU0OTM87sdHR3RGw3NTJacEV1OEt5OWZTWTBYUFE&usp=sharing)

查看示例数据，在 EI 列中需要一个数组公式，该公式将查看 B 到 D 列并搜索包含“May 12”并在 E 列中显示真假（1 或 0）的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:26:20.637

我认为这将满足您的需求 - 输入 D2：

```
=IF(SUM((MONTH(A2:C2)=5)*(YEAR(A2:C2)=2013))>0,1,0) 
```

但按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式，并在`{}`其周围产生括号（但不要手动输入它们！）。

根据需要指定月份和年份）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:18:01.517

我想这就是你要找的（注意到日期格式是 dd/mm/yyyy 所以我调整了）：

```
=IF(COUNTIF(A1:C1,"12/5/2013")>0,TRUE,FALSE) 
```

编辑：

仅一个月和一天：

```
=IF(SUMPRODUCT((MONTH(A1:C1)=5)*(DAY(A1:C1)=12))>0,TRUE,FALSE) 
```

月份和年份：

```
=IF(SUMPRODUCT((MONTH(A1:C1)=5)*(YEAR(A1:C1)=2012))>0,TRUE,FALSE) 
```

# html - HTM 表宽扩展难度

> ID：14733603
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:21.533
> 
> 标签：html, css

我在网页的这一部分遇到了困难，在那里你可以看到很多测试词。我想要做的是使 td auto 的高度，这样每当提交消息时，它的宽度就不会扩大。我一直在限制它的宽度属性但它不起作用，我也尝试在 css 中使用显示块但它根本没有帮助，解决这个问题的最佳方法是什么？这是图片：http: [//img209.imageshack.us/img209/4439/errrorx.png](http://img209.imageshack.us/img209/4439/errrorx.png)

这是我的表格代码

```
<table  class="itemlist" width="100%" cellspacing="1" cellpadding="4">
    <tr class="det_msg">
        <td><?php echo $detail ?></td>
    </tr>
</table> 
```

这是我的css代码

```
.det_msg td{
    margin:6px; 
    width:920px;
    color: #fff;
    border-bottom:1px solid #333;
    font-family:Arial;
    font-size: 12px;
    color: #000000;
    margin-left:100px;
    padding:50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:25:18.977

这是我的解决方案：

```
.itemlist {
    table-layout:fixed;
}

.det_msg td{
    word-wrap: break-word;
    word-break: break-all;
} 
```

jsFiddle 演示：http: [//jsfiddle.net/NkfNf/1/](http://jsfiddle.net/NkfNf/1/)

但实际上，您的问题是您在该 td 中插入了一个令人难以置信的长“单词”（没有空格）。浏览器很难破解它，所以它没有坏，显示在一行中。

因此，更好的解决方案：确保您不会在网络上显示这样的“长词”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T16:15:13.093

`<table class="itemlist" width="100%"...`<--- 不要让它 100%，让它成为一个价值

# python - python matplotlib标签/标题错误字符

> ID：14733605
> 
> 赞同：3
> 
> 时间：2013-02-06T16:12:26.450
> 
> 标签：python, character-encoding, matplotlib, label

[这是对此问题](https://stackoverflow.com/questions/14712292/python-matplotlib-axis-label-subscript-based-on-loop-counter)的部分交叉帖子。
这是我的代码的最小示例：

```
import matplotlib.pyplot as plt

x = [0.0, 0.25, 0.5, 0.75, 1.0]
y = [7.0, 3.0, 5.0, 1.0, 0.0]

II = 2

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(x,y)

# un-comment title as needed:
#plot_title = r"A$_" + str(II) + r"$"
#plot_title = "A$_" + str(II) + "$"
plot_title = (r"A$_%s$" % (str(II)))
print plot_title
plt.title(plot_title)
plt.show() 
```

相同的情节标题字符串有三个不同的版本。以上`print plot_title`为每种情况提供了正确的原始字符串：

```
A$_2$ 
```

但是，这些方法都没有在图中显示正确的字符串（与我使用的后端无关）。图中的输出揭示了输入整数值和输出之间的这种关系：

```
$0$ -> E  
$1$ -> £  
$2$ -> N  
$3$ -> ®  
$4$ -> X  
$5$ -> ¸(cedille)  
$6$ -> b  
$7$ -> ¿  
$8$ -> j  
$9$ -> 3 
```

我正在使用 python 2.6.6 和 matplotlib 0.99.1.1——我无法控制这些版本，并且必须与它们有关。
我应该如何更改输入以获得所需的输出？

**编辑**

受[这个问题/答案](https://stackoverflow.com/questions/16635293/unicode-character-render)的启发，我尝试了我的系统知道的所有不同字体：

```
import matplotlib.font_manager as font_manager  

for i in range(0,len(sorted(font_manager.findSystemFonts()))):
    plt.rcParams['font.family'] = os.path.basename(sorted(font_manager.findSystemFonts())[i])[:-4] 
```

并为每种字体和上面的例子生成了一个图。虽然我为文本使用了不同的字体，但我关心的一个下标`$_2$`，并没有改变，并且始终显示为*`N`*。

**编辑 2**
我已经升级到 matplotlib 1.3.0 并且问题消失了。这让我觉得它与 0.99.1.1 版本有关
。对我来说，这仍然不能令人满意，因为我很想知道它*为什么*会这样。

**编辑 3**
我遇到了这个问题：[Python 绘图中](https://stackoverflow.com/questions/21226868/superscript-in-python-plots)
的上标答案表明问题可能来自使用`A$_2$`而不是`$A_2$`.
不幸的是，在这种情况下，这并没有改变输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-10T19:21:33.570

我正在使用 matplotlib 1.3.1 版和 python 2.7.8 版。
我遇到了类似的问题。我在写

```
ax1.set_yticklabels(['$10^4$','$10^5$','$10^6']$' 
```

1 将呈现为 phi 符号。0 将呈现为 E。4 将呈现为 Xi... 等等。

我能够通过使用`'$\mathregular{10}^\mathregular{4}$'`which 来“修复”它，这有点麻烦，但它可以完成工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-25T10:57:52.897

我有一个类似的问题。这个最小的例子：

```
from matplotlib.pyplot import *
subplot( 111, title=r"$\mathcal{O}\left( N^3 \right)$" )
show() 
```

被渲染为：

[![在此处输入图像描述](../Images/bec9abd409e871b90257726ed0b22405.png)](https://i.stack.imgur.com/9tymm.png)

`matplotlib.rc('text', usetex=True)`在开头添加为我解决了这个问题：

```
from matplotlib.pyplot import *
matplotlib.rc('text', usetex=True)
subplot( 111, title=r"$\mathcal{O}\left( N^3 \right)$" )
show() 
```

[![在此处输入图像描述](../Images/cebf186317542d9da40eea48b13f9c0f.png)](https://i.stack.imgur.com/U1yTv.png)

这一行使 matplotlib 使用 LaTeX 而不是内部的[数学文本](http://matplotlib.org/users/mathtext.html#mathtext-tutorial)引擎，这似乎是 LaTeX 的一个子集，尽管上标仍然可以工作。使用 LaTeX 需要安装工作正常的 LaTeX，以及 dvipng 和 ghostscript，而且速度较慢。因此，仅当您无论如何都安装了这些先决条件时，此解决方案才值得尝试。

我[在这里](https://github.com/matplotlib/matplotlib/issues/6976)打开了一个问题。

经过一些耗时的测试后我发现，从 降级`fonts-lyx 2.2.0-2`到`2.1.4-2`也解决了我的问题。`fonts-lyx`是 的依赖`python-matplotlib-data`，但是没有指定具体的版本，导致这个问题。尽管我没有足够的技术知识来说明字体的哪些更改与使用它的程序不兼容。

# php - 发送带有空响应的 POST 请求

> ID：14733608
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:36.920
> 
> 标签：php, xml, post, curl

我正在尝试通过 CURL 从我的 API 中获取响应，该方法需要通过 XML 获取用户数据，然后返回带有响应数据的 XML。我什么也得不到。API 运行良好，当我在 PHP 以外的其他地方尝试相同的请求时，它可以正常工作。我的 API 需要在 application/xml Content-Type 中发送数据。

任何想法我做错了什么？

```
<?php
    $request="https://api.mydomain.com/operation/v1/rest/xml/user/authenticate";
    $xml_data='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
               <userCredentials>
                    <userName>name</userName>
                    <password>password</password>
               </userCredentials>';

    $ch = curl_init();
    //curl_setopt($ch, CURLOPT_MUTE, 1);
    curl_setopt($ch, CURLOPT_URL, $request);
    //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, "Content-type: application/xml");
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);

    echo "<b>Request:</b> $request <br/>";
    echo "<b>Response:</b><pre>".$output."</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:16:33.950

正如评论，快速猜测（冗长的评论）：

```
echo "<b>Response:</b><pre>".$output."</pre>"; 
```

这将输出未转义的 XML。您的浏览器不会在浏览器窗口内显示任何内容，但是当您查看页面的源代码时应该可以看到一些内容。

# django - 将文件绑定到表单 Django 向导

> ID：14733609
> 
> 赞同：2
> 
> 时间：2013-02-06T16:12:41.107
> 
> 标签：django, forms, wizard

所以我[没有成功从 django-merlin 连接基于会话的向导](https://stackoverflow.com/questions/14693811/django-formwizard-as-view-method-attributeerror)，但我再次尝试使用 django 源中包含的向导。但是，当尝试使用 上传文件时，文件`ImageField`似乎`request.FILES`没有绑定到表单，因为在尝试上传文件后我收到“此字段是必需的”错误。这是我所拥有的：

表格.py：

```
class StepOneForm(forms.Form):
    year = forms.ChoiceField(choices=YEAR_CHOICES)
    ...

class StepTwoForm(forms.Form):
    main_image = forms.ImageField()
    ...

class CreateWizard(SessionWizardView):
    file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT))
    def done(self, form_list, **kwargs):
        d['main_image'] = request.FILES['main_image']
        db = Thing(**d)
        db.save()
        return render(request, 'wizard-done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

在`CreateWizard`上面我试图保存[这个stackoverflow问题中讨论](https://stackoverflow.com/questions/7860529/how-to-save-files-using-django-form-wizard)`main_image`的`done`方法，但我没有成功。

* * *

更新：

添加`enctype=multipart/form-data`允许我绑定文件，但现在我收到一个新错误：

```
global name 'request' is not defined 
```

即使请求上下文处理器在我的`TEMPLATE_CONTEXT_PROCESSORS`. 在链接的stackoverflow帖子中定义完成的方法也不起作用：

```
class CreateWizard(SessionWizardView):
    file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT))
    def done(self, request, form_list): 
```

结果是`TypeError: done expects 3 arguments, 2 given`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T21:32:20.320

您将需要`self.request`：

```
return render(self.request, 'wizard-done.html', {
        'form_data': [form.cleaned_data for form in form_list],  }) 
```

# macos - 如何从 Mac 卸载网络摄像头以使其在 Virtualbox 中工作

> ID：14733613
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:49.793
> 
> 标签：macos, virtualbox

与 USB pendrive 不同，我无法选择我的网络摄像头作为我的虚拟机的设备。

尝试这样做时出现以下错误：

```
Failed to attach the USB device Logitech Camera [0010] to the virtual machine Windows.
USB device 'Logitech Camera' with UUID {0fe606fc-298c-4250-aee3-f7fb6cc8ef2f} is busy with a previous request. Please try again later. 
```

如果已安装 pendrive，我会收到类似的错误。

我正在使用安装了扩展和来宾添加的 VirtualBox。

如何卸载我的相机并使其在我的虚拟机上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T11:37:24.803

当我尝试将旧的 USB 扫描仪插入运行 Windows XP 的虚拟盒实例时，我遇到了同样的错误。（当我第一次在虚拟机中安装驱动程序时它可以工作。但是当我尝试重新插入它一段时间后，错误显示“USB 设备正忙于处理先前的请求”）

我所做的是

*   我从 USB 端口拔下我的扫描仪并从电源上拔下扫描仪。
*   然后强制关闭虚拟机而不保存状态。
*   将虚拟盒子更新到最新版本。
*   在 BIOS 中禁用 USB 2.0 (EHCI) 支持，（转到设置 -> 选择 USB 设备）
*   启动虚拟机。
*   插入 USB，然后将扫描仪插入电源。
*   向 USB 添加一个新过滤器（转到设置 -> USB 设备），然后从底部的 USB 设备列表中选择检测到的扫描仪。

这样做后，虚拟框自动检测并再次安装驱动程序

祝你好运

# sql - 如何将 mssql 服务器中的表行导出到文件，以便可以导入到不同的位置

> ID：14733615
> 
> 赞同：0
> 
> 时间：2013-02-06T16:12:57.447
> 
> 标签：sql, sql-server

我有一个会话表，其中包含

```
sesssion_key (PK, bigint,not null),
created(datetime, not null)
content(image, null) 
```

现在我需要将这样的会话导入到文件中，以便可以将其导入到另一个 mssqsl 实例中。

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:20:06.867

Are the instances on the same server? If so, just:`SELECT * into newDB.sessions FROM olddb.sessions;`

If they are not on the same server, go with either of Mithrandir's suggestions

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:20:10.133

You could use the inport/export wizard from SSMS or the command line tool `bcp`. A bcp session might look like this:

Export data to a file:

```
 bcp databasae.schema.table out outputfile -S source_server -T -n 
```

or

```
 bcp "SELECT sesssion_key, created, content FROM databasae.schema.table WHERE sesssion_key  = 0000001" queryout outputfile -S source_server -T -n 
```

Then you can import the data to another server with the same table:

```
 bcp databasae.schema.table in inputfile -S destination_server -T -n 
```

# java - 如何将意图从一个类保存到另一个类

> ID：14733618
> 
> 赞同：0
> 
> 时间：2013-02-06T16:13:02.090
> 
> 标签：java, android, alarmmanager, alarm

我是 Android 新手，如果我问一些愚蠢的问题，我深表歉意。我正在尝试开发一个闹钟应用程序 - 基本上，这是我的最后一个项目，我正在尝试开发一个类似于 API 级别 2.3.3 中的闹钟。

我设计了列表视图，它通过像时间这样的对话框进行输入。我还对其进行了编码以设置警报。

现在我想将该警报保存为其他类中的意图，并且我不知道如何在其他活动中保存不同的警报。我还检查了桌面时钟闹钟代码，但我也没有得到。

请帮助我的人，我被困在这里的代码一个多星期了。请有人帮助我，我会感谢你的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:36:23.123

如果您想从一个 Activity 向另一个 Activity 发送 Intent，然后从 Intent 内部检索信息，最好的方法是使用 Intent 内部的 Bundle 对象：

假设您将意图从 Activity1 发送到 Activity2...

在活动 1 中：

```
Intent intent = new Intent(Activity1.class,Activity2.class);
//I use the String class name as a key value, but you can use whatever key
intent.putExtra(String.class.getCanonicalName(), myString);
startActivity(intent);
//Or this other method if you want to retrieve a result from Activity2
//startActivityForResult(intent,Activity2); 
```

在活动 2 中：

```
Intent intent = this.getIntent();
Bundle bundle = intent.getExtras();
String myString = bundle.getString(String.class.getCanonicalName()); 
```

# ruby-on-rails - Rails 多租户应用程序中全局变量的替代方案是什么？

> ID：14733623
> 
> 赞同：0
> 
> 时间：2013-02-06T16:13:13.390
> 
> 标签：ruby-on-rails, heroku, multi-tenant

我正在将我的应用程序（单个客户端）转换为多租户应用程序。

我曾经将一些设置（很少更改/非常频繁访问）存储到全局变量（哈希）中。应用程序启动时，此全局变量的值已从数据库中提取。显然，这些设置特定于客户/租户。

我现在看到了一些选项，但没有一个看起来不错：

*   保留全局哈希，但引入租户的概念，`$global[:client1][:settingX]`但这感觉不好/可扩展/安全
*   每次都调用数据库，但我担心性能会受到影响（大约 40 次额外调用数据库）

我可以用 Memcache 做些什么吗？但我不知道从哪里开始选项。

注意：该应用程序托管在 Heroku 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:42:58.340

这听起来像是使用 memcached 或 redis 的一个很好的论据。您需要一个集中的地方，这些值可以存放在您的所有应用程序服务器池中。您的用例主要通过偶尔写入来更新值来读取。

我将构建一个货币助手，每次请求从 memcached/redis 延迟加载一次，然后保存货币汇率数据以用于该请求中的任何价值计算。

我不知道您的问题域，但我们假设您正在尝试向系统中的不同用户提供本地货币定价，并且不同用户的费率不同（即：折扣等）。

```
class CurrencyHelper
  attr_reader :currency_rates

  def initialize(user_id)
     @currency_rates = load_or_generate_exchange_rates
  end

  def load_or_generate_exchange_rates
    key = "/currency/rates/#{user_id}"
    REDIS.get(key) || begin
      rates = generate_exchange_rates
      REDIS.put(key, rates)
      rates
    end
  end

  def convert_from_usd_to(amount_usd, currency)
    round_money( usd * currency_rates[currency] )
  end
end 
```

在您的控制器代码中：

```
 def currency_helper
    @currency_helper ||= CurrencyHelper.new(current_user.id)
  end

  def show
    localized_price = currency_helper.convert_from_usd_to(price_usd, params[:country_code])
  end 
```

# exception - Grails - 无法在空对象上调用方法 getAt()

> ID：14733624
> 
> 赞同：2
> 
> 时间：2013-02-06T16:13:12.830
> 
> 标签：exception, grails, groovy, null

尝试将书籍附加到书籍的类列表时出现错误。关于为什么或我能做些什么来解决它的任何想法？

```
 //For each book in a class...
        for (int k = 0; k < rows.size(); k++) {
            Book book = new Book()

            //Assign the values to a new book object
            book.id            = rows[k].getProperty("ISBN")
            book.title         = rows[k].getProperty("title")
            book.author        = rows[k].getProperty("author")
            book.required      = rows[k].getProperty("required_optional")
            book.purchaseType  = rows[k].getProperty("rental_purchase")
            //book.purchasePrice = rows[k].getProperty("purchase_price")
            //book.rentalPrice   = rows[k].getProperty("rental_fee")

            //Append the book to the books list object in the particular class
            classes[i].books[k + 1] << book
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-05T06:19:16.480

不是通过`[]`use访问`getAt`，而是`?`Operator 将工作：

```
classes?.getAt(i)?.books?.getAt(k+1) << book 
```

或者

```
classes?.getAt(i)?.books[k+1] << book 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:32:26.387

```
rows.each { row ->
  Book book = new Book(...)
  classes[i].books << book
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:35:15.903

我不确定“类”是什么，但如果它是一个包含“书”的列表，你可以这样做

```
classes << book 
```

或者

```
classes.add(book) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T17:23:47.233

如果没有完整的代码，很难知道会发生什么。试试这段代码，它会告诉你哪个值为空：

```
// first check if classes[i] is null, add error handling if it is
if (classes[i]!=null) {
    //For each book in a class...
    for (int k = 0; k < rows.size(); k++) {     
        def books = classes[i].books[k + 1]
        if (books!=null) {
            // you can set values directly here
            def row = rows[k]
            Book book = new Book(
                id: k.getProperty("ISBN"),
                title: k.getProperty("title")
                // ...
            )
            //Append the book to the books list object in the particular class
            books << book
        } else {
            println "books is null, do something clever"
        }
    }
} else {
    println "classes[i] is null, do something clever"
} 
```

我没有测试它，你可以用一些时髦的东西来缩短它。这只是为了让你开始

# jquery - 两种jquery扩展方式有什么不同？

> ID：14733642
> 
> 赞同：4
> 
> 时间：2013-02-06T16:14:18.267
> 
> 标签：jquery, jquery-plugins, extend

我正在编写一些 jquery 插件，我扩展了这些，但我不知道为什么：

**方法一**

```
(function($){
    $.fn.myplugin = function() {}
})(jQuery);

$.extend({myplugin : $.fn.myplugin}); 
```

**方法二**

```
(function($){
    $.extend({
        myplugin: function() {}
    })
})(jQuery); 
```

对于#1，我可以调用 $.myplugin().myplugin2().myplugin3();

但是对于#2，不能使用 $.myplugin().myplugin2(); 它显示 myplugin2 不是有效的功能

* * *

基本上我想写#2，因为我不必声明

```
$.extend({
    myplugin : $.fn.myplugin,
    myplugin2 : $.fn.myplugin2,
    .....}); 
```

对于每个插件。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:22:39.890

在这两种情况下，您都将函数添加到全局 jQuery 对象中，这样您就可以调用`$.pluginName`.

#1 还将插件添加到所有 jQuery 元素对象，您在调用`$`函数时获得的对象：`$("#selector")`.

您的插件可能会返回一个 jQuery 元素对象。所以首先你使用`$.pluginName`and 在你调用的代码中`$.fn.pluginName`。你不能用 #2 链接调用，因为`$.fn.pluginName`它是未定义的。

当您知道这`$.fn`是`$.prototype`. （原型函数是所有返回值的成员`$()`- 在后台使用`new`关键字。）

* * *

您可以使用所有插件创建一个对象以简化代码：

```
var plugins = {
    myPlugin: function(){},
    myPlugin2: function(){}
}

$.extend($, plugins);
$.extend($.fn, plugins); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:23:48.403

`$.fn.myplugin = function() {}`允许您在 jquery 对象上调用您的函数，如下所示：

```
$("something").myplugin() 
```

然而

```
$.extend({
    myplugin: function() {}
}) 
```

使它成为这样你调用你的函数是这样的：

```
$.myplugin() 
```

在您的第一个示例中，您正在执行这两项操作。第二个只是做第二个。

# php - mysql和php数据库错误

> ID：14733643
> 
> 赞同：0
> 
> 时间：2013-02-06T16:14:19.147
> 
> 标签：php, mysql

我在数据库中有两个表，`Employee_info(stores all employee information )`并且`Job_Info(store all job title , job description)`。代码插入数据没有问题，但是更新时在浏览器上打印此错误：

`"Cannot add or update a child row: a foreign key constraint fails (Employee_database.job_info, CONSTRAINT job_info_ibfk_4 FOREIGN KEY (Employee_Id) REFERENCES Employee_info (Employee_Id) ON UPDATE CASCADE)"`.

可能是什么问题呢 ？这是代码

```
 $query = "SELECT * FROM `Employee_info` WHERE `Name_Of_Employee` = '$Name'";
      $sqlsearch = mysql_query($query);
         $resultcount = mysql_numrows($sqlsearch);
   if ($resultcount > 0) 
 {
  mysql_query("UPDATE  `employee_info` SET `Name_Of_Employee` = '$Name',

                                         `Physical_Address` = '$P_Address',

                                         `Phone_Number` = '$Phone',

                                         `Email_Address` = '$E_Address'
             WHERE `Name_Of_Employee` = '$Name'"
           )
    or die(mysql_error());
    }
                  else {
                          $sql="INSERT INTO employee_info
                                 (
                             Name_Of_Employee,
                             Physical_Address,
                             Phone_Number,
                             Email_Address
                         )
                     VALUES (
                        '$Name',
                        '$P_Address',
                        '$Phone',
                        '$E_Address'
                                 );
                          if(!mysql_query($sql))
                           {    
                         die('cannot store in employee_info'.mysql_error());
                           }
}

$Employee_Id=mysql_insert_id();
 $qry = "SELECT * FROM `Job_info` WHERE `Job_Title` = '$Job_Title'";
  $sqlsearch = mysql_query($query);
       $resultcount = mysql_numrows($sqlsearch);
     if ($resultcount > 0) {
                        "UPDATE `Job_info` SET `Employee_Id` = '$Employee_Id' ,
                               `Job_Title` = '$Job_Title',
                               `Job_Description` = '$Job_Description'

                             WHERE `Employee_Id` = '$Employee_Id'")
                         or die(mysql_error());
}
else 
{
$sql="INSERT INTO ad_info (
                       Employee_Id,
                       Job_Title,
                       Job_Description
                       )
                    VALUES (
                       '$Employee_Id',
                       '$Job_Title',
                       '$Job_Description'
                       )";
                       if(!mysql_query($sql))
                       {
                       die('cannot store in job info'.mysql_error());}
                       } 
```

这是数据库设计

```
+------------------+-------------+------+-----+---------+----------------+
| Field            | Type        | Null | Key | Default | Extra          |
+------------------+-------------+------+-----+---------+----------------+
| Employee_Id      | int(11)     | NO   | PRI | NULL    | auto_increment |
| Name_Of_Employee | varchar(20) | NO   |     |         |                |
| Physical_Address | varchar(25) | NO   |     |         |                |
| Phone_Number     | int(14)     | NO   |     |         |                |
| Email_address    | varchar(25) | NO   |     |         |                |                             |
+------------------+-------------+------+-----+---------+----------------+

+------------------+-------------+------+-----+---------+----------------+
| Field            | Type        | Null | Key | Default | Extra          |
+------------------+-------------+------+-----+---------+----------------+
| jOB_Id           | int(11)     | NO   | PRI | NULL    | auto_increment |
| Employee_Id      | int(11)     | NO   |     |         |                |
| Job_Title        | varchar(25) | NO   |     |         |                |
| Job_Description  | text(100)   | NO   |     |         |                |
+------------------+-------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:18:20.127

这正是你的错误告诉你的意思。

由于存在约束，您**无法添加或更新子行。**这意味着更新受到限制，或者密钥不存在。如果是后者，则必须首先在引用的表中创建该键。

如果您不切换到`mysqli_`或`PDO`使用准备好的语句，您将容易受到 SQL 注入的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:19:10.767

回应你的`$sql`说法。99% 肯定你会看到你的错误。您显然在尝试放入表中的内容以及它与外键约束的关系方面存在错误。

IE，您的 FK 想要一个 1-10 的数字，而您正试图输入 11。

# android - 如果语句只检查一次？

> ID：14733647
> 
> 赞同：0
> 
> 时间：2013-02-06T16:14:26.097
> 
> 标签：android, if-statement, sdk

我对简单的 if 语句有疑问。我想在传入数据的帮助下修改 2 ImageView 的可见性。由于某种原因，数据只影响 if 语句一次。该声明应该在哪里，以便它不断刷新？

这是在我的 onCreate()

```
 if (TCPClient.Led.equals(High)){
            Inum1.setVisibility(ImageView.GONE);
            Inum2.setVisibility(ImageView.VISIBLE);
        }
        if (TCPClient.Led.equals(Low)){
            Inum1.setVisibility(ImageView.VISIBLE);
            Inum2.setVisibility(ImageView.GONE);
        } 
```

我从另一个类中获取数据：

```
 while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);
                    Log.e("Listenner",serverMessage);
                    TCPClient.Led = new String(serverMessage);
                }
                serverMessage = null;

            } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:20:39.643

如果它是在您的 onCreate 中完成的，那么它只会在您的活动创建时完成一次。您应该将 if 语句放在循环中，以便在每次收到新消息时进行检查。

# c# - RegisterClientScriptBlock() 在哪里？

> ID：14733652
> 
> 赞同：-1
> 
> 时间：2013-02-06T16:14:34.723
> 
> 标签：c#, asp.net, .net

我正在使用 asp.net 4.0。我可以访问 ClientScriptManager，但是当我尝试输入 RegisterClientScriptBlock() 时，没有智能感知，并且我收到有关静态方法的错误。我正在查看[iFrame 中的 Response.Redirect()，以重定向父窗口](https://stackoverflow.com/questions/7307285/response-redirect-in-iframe-redirect-parent-window)为例。显然有一些不同。

我所在的页面确实继承自 System.Web.UI.Page。使用这种方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:25:13.780

来自**[MSDN](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)**

> 使用类型、键和脚本文字向 Page 对象注册客户端脚本。

请注意，它特别声明它适用于`Page`对象。

Page 对象有一个类型为[ClientScript](http://msdn.microsoft.com/en-us/library/system.web.ui.page.clientscript.aspx)的属性，`ClientScriptManager`因此您可以使用`RegisterClientScriptBlock()`.

如果您从 Page 继承（对不起，错过了那部分），只需使用`ClientScript.RegisterClientScriptBlock`例如：

```
 protected void Page_Load(object sender, EventArgs e)
 {
        ClientScript.RegisterClientScriptBlock(this.GetType(),"MyMethod","alert(1);", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:22:39.853

采用

`ScriptManager.RegisterClientScriptBlock`

并且不要忘记将脚本管理器添加到您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:20:40.337

您需要在[ClientScriptManager上调用它](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)

# android - 如果可以连接到 Apache，为什么我的 Android 应用程序没有返回？

> ID：14733653
> 
> 赞同：0
> 
> 时间：2013-02-06T16:14:36.050
> 
> 标签：android, connection

我有一个 android 应用程序，我希望它检查用户输入的 IP 地址是否可用，或者可以连接到，或者有一个 Apache 实例，我可以从中加载 php 文件。

这是我在活动的 java 文件中的代码：

```
package com.thesis.menubook;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class IPAddress extends Activity {

    String ip;
    String error = "";  

    Boolean next = false;

    EditText ipaddress1;
    EditText ipaddress2;
    EditText ipaddress3;
    EditText ipaddress4;
    Button connect;

    // Progress Dialog
    private ProgressDialog pDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ipaddress);

        connect = (Button) findViewById(R.id.connectBtn);

        connect.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                    ipaddress1 = (EditText) findViewById(R.id.ipAddress1);
                    ipaddress2 = (EditText) findViewById(R.id.ipAddress2);
                    ipaddress3 = (EditText) findViewById(R.id.ipAddress3);
                    ipaddress4 = (EditText) findViewById(R.id.ipAddress4);

                    ip = ipaddress1.getText().toString() +"."+ipaddress2.getText().toString()+"."+ipaddress3.getText().toString()+"."+ipaddress4.getText().toString();
                    new checkIPAddress().execute("");

                }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_ipaddress, menu);
        return true;
    }

     /**
     * Background Async Task to Insert IP address
     * */
    class checkIPAddress extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(IPAddress.this);
            pDialog.setMessage("Connecting to Server. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * check ipaddress connection in background thread
         * */
        protected String doInBackground(String... params) {

            runOnUiThread(new Runnable() {
                public void run() {

                    pDialog.setMessage("Checking connection. Please wait...");
                    HttpClient httpclient = new DefaultHttpClient();

                    // CHECK IF USER HAS WIFI ENABLED
                    ConnectivityManager connMgr = (ConnectivityManager) 
                    getSystemService(Context.CONNECTIVITY_SERVICE);
                    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
                    if (networkInfo != null && networkInfo.isConnected()) {
                        try {
                            HttpGet httpGet = new HttpGet(ip);
                            HttpResponse response = httpclient.execute(httpGet);
                            HttpEntity httpEntity = response.getEntity();

                            Log.d("Response", response.toString() +"--response from apache");
                            if(response.getStatusLine().getStatusCode() == 200) {
                                next = true;
                            } else {
                                next = false;
                                error = "Please check entered IP Address";
                            }

                        } catch (Exception e) {
                            // TODO: handle exception
                            e.printStackTrace();
                            next = false;
                            error = "Please check entered IP Address";                          
                        }
                    } else {
                            next = false;
                            error = "No Internet connections available";
                    }

                    // CHECK IF USER CAN CONNECT TO APACHE SERVER

                    Log.d("IP Address", ip);

                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();
            Log.d("NEXT VALUE --in Async on postexecute", next +"");
            if(next == true)
            {
                Toast.makeText(IPAddress.this, "Connection succesful." , Toast.LENGTH_LONG).show();
                Intent i = new Intent (IPAddress.this, ChooseTable.class);
                i.putExtra("IP_Address", ip);
                startActivity(i);
                finish();
            }
            else
            {
                Toast.makeText(IPAddress.this, error, Toast.LENGTH_LONG).show();
            }
        }
    }

} 
```

这是我的 LogCat ：

```
02-07 00:03:30.011: V/TLINE(668): new: android.text.TextLine@4066afd0
02-07 00:03:32.542: V/TLINE(668): new: android.text.TextLine@40674158
02-07 00:04:09.382: D/dalvikvm(668): GC_FOR_ALLOC freed 163K, 5% free 6483K/6791K, paused 236ms
02-07 00:04:09.448: I/dalvikvm-heap(668): Grow heap (frag case) to 6.929MB for 513744-byte allocation
02-07 00:04:09.962: D/dalvikvm(668): GC_CONCURRENT freed 2K, 5% free 6983K/7303K, paused 35ms+64ms
02-07 00:04:11.352: W/System.err(668): java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=192.168.10.149
02-07 00:04:11.393: W/System.err(668):  at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:591)
02-07 00:04:11.393: W/System.err(668):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:293)
02-07 00:04:11.402: W/System.err(668):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-07 00:04:11.415: W/System.err(668):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-07 00:04:11.422: W/System.err(668):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-07 00:04:11.422: W/System.err(668):  at com.thesis.menubook.IPAddress$checkIPAddress$1.run(IPAddress.java:99)
02-07 00:04:11.437: W/System.err(668):  at android.os.Handler.handleCallback(Handler.java:587)
02-07 00:04:11.442: W/System.err(668):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-07 00:04:11.442: W/System.err(668):  at android.os.Looper.loop(Looper.java:132)
02-07 00:04:11.462: W/System.err(668):  at android.app.ActivityThread.main(ActivityThread.java:4025)
02-07 00:04:11.462: W/System.err(668):  at java.lang.reflect.Method.invokeNative(Native Method)
02-07 00:04:11.462: W/System.err(668):  at java.lang.reflect.Method.invoke(Method.java:491)
02-07 00:04:11.482: W/System.err(668):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-07 00:04:11.482: W/System.err(668):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-07 00:04:11.492: W/System.err(668):  at dalvik.system.NativeStart.main(Native Method)
02-07 00:04:11.492: D/IP Address(668): 192.168.10.149
02-07 00:04:11.503: D/NEXT VALUE --in Async on postexecute(668): false 
```

我的笔记本电脑上有 Apache 并正在运行，我可以使用这台笔记本电脑的浏览器和我的安卓手机浏览器使用这台笔记本电脑的 IP 地址连接到它。我在模拟器上运行应用程序。My Anti Virus 也没有防火墙或网络防护。我已经在笔记本电脑的防火墙上打开了端口。我也尝试过运行应用程序并在`ip`字符串中包含端口，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:21:03.820

在您的通话中...

```
 new checkIPAddress().execute(""); 
```

你应该传入你有兴趣检查的IP地址......

```
 new checkIPAddress().execute(ip); 
```

并将其引用`doInBackground()`为`params[0]`. 您不应该在`AsyncTask`类中引用任何外部变量。如果您需要更新 UI，请在`onPostExecute()`. `runOnUIThread`在`onBackground()`函数中看到真的很奇怪。再次，UI 交互应该放在`onPostExecute()`.

# c# - 从 winform 应用打开网页会打开太多标签？

> ID：14733655
> 
> 赞同：0
> 
> 时间：2013-02-06T16:14:40.647
> 
> 标签：c#, winforms

我有一些使用自定义 popupNotifier 订阅点击事件的代码，如下所示：

`popupNotifier1.Click += new EventHandler(PopUpClicked);`

这意味着当有人点击打开弹出窗口时，它会启动一个 url 字符串。暂时假设`_url`是全局的。

我在 PopUpClicked 中执行此操作：

```
 public void PopUpClicked(object sender, EventArgs e)
        {
            System.Diagnostics.Process proc = new System.Diagnostics.Process();
            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo(_url);
            proc.StartInfo = startInfo;
            proc.Start();
        } 
```

url，`_url`包含一个字符串，如：

`http://mysite/mypage.aspx?MyID=100`

这一切正常..它打开页面，但我注意到它会打开同一页面的多个选项卡。我不明白为什么？

# 编辑

只是为了添加更多代码，我从每分钟触发的计时器事件中调用它，但请注意 if 条件，它仅在有数据时订阅事件：

```
 private void timer1_Tick(object sender, EventArgs e)
        {
            SqlDataReader sr;
            string ticketInfo = String.Empty;
            string url = String.Empty;
            bool hasData = false;
            using (SqlConnection sc = new SqlConnection(_connString))
            {
                using (SqlCommand scmd = new SqlCommand("select_poll"))
                {
                    scmd.Connection = sc;
                    scmd.CommandType = CommandType.StoredProcedure;
                    scmd.Parameters.Add("LoginID", SqlDbType.BigInt).Value = _userLoginID;
                    scmd.Parameters.Add("FacilityID", SqlDbType.BigInt).Value = _userFacilityID;
                    sc.Open();
                    sr = scmd.ExecuteReader(CommandBehavior.CloseConnection);

                    if (sr != null)
                    {
                        while (sr.Read())
                        {
                            hasData = true;
                            ticketInfo += sr["TicketID"].ToString() + " - " + sr["Ticket"].ToString() + Environment.NewLine;
                            _url = "http://mysite/mypage.aspx?ID=" + sr["TicketID"].ToString();
                        }
                    }
                }
            }

            if (hasData)
            {
                popupNotifier1.TitleColor = System.Drawing.Color.Green;
                popupNotifier1.ContentText = ticketInfo;
                popupNotifier1.Scroll = true;
                popupNotifier1.TitlePadding = new System.Windows.Forms.Padding(2);
                popupNotifier1.ContentPadding = new System.Windows.Forms.Padding(2);
                popupNotifier1.Image = Properties.Resources.medical;
                popupNotifier1.ImagePadding = new System.Windows.Forms.Padding(10);
                popupNotifier1.Click += new EventHandler(PopUpClicked);
                popupNotifier1.Popup();
            }
        }

        public void PopUpClicked(object sender, EventArgs e)
        {
            System.Diagnostics.Process proc = new System.Diagnostics.Process();
            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo(_url);
            proc.StartInfo = startInfo;
            proc.Start();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:26:13.357

```
popupNotifier1.Click += new EventHandler(PopUpClicked); 
```

上面的行订阅了`event`多次，所以当第一次，当`PopUp`被触发时，它打开`one tab`，下一次`2 tab`，然后下一次`three tab`n，依此类推

仅添加一次处理程序，最好的方法是在您在代码中启用计时器之前

像

```
popupNotifier1.Click += new EventHandler(PopUpClicked);
timer1.Enabled = true; 
```

### 固定代码

```
private void timer1_Tick(object sender, EventArgs e)
        {
            SqlDataReader sr;
            string ticketInfo = String.Empty;
            string url = String.Empty;
            bool hasData = false;
            using (SqlConnection sc = new SqlConnection(_connString))
            {
                using (SqlCommand scmd = new SqlCommand("select_poll"))
                {
                    scmd.Connection = sc;
                    scmd.CommandType = CommandType.StoredProcedure;
                    scmd.Parameters.Add("LoginID", SqlDbType.BigInt).Value = _userLoginID;
                    scmd.Parameters.Add("FacilityID", SqlDbType.BigInt).Value = _userFacilityID;
                    sc.Open();
                    sr = scmd.ExecuteReader(CommandBehavior.CloseConnection);

                    if (sr != null)
                    {
                        while (sr.Read())
                        {
                            hasData = true;
                            ticketInfo += sr["TicketID"].ToString() + " - " + sr["Ticket"].ToString() + Environment.NewLine;
                            _url = "http://mysite/mypage.aspx?ID=" + sr["TicketID"].ToString();
                        }
                    }
                }
            }

            if (hasData)
            {
                popupNotifier1.TitleColor = System.Drawing.Color.Green;
                popupNotifier1.ContentText = ticketInfo;
                popupNotifier1.Scroll = true;
                popupNotifier1.TitlePadding = new System.Windows.Forms.Padding(2);
                popupNotifier1.ContentPadding = new System.Windows.Forms.Padding(2);
                popupNotifier1.Image = Properties.Resources.medical;
                popupNotifier1.ImagePadding = new System.Windows.Forms.Padding(10);
                popupNotifier1.Popup();
            }
        }

        public void PopUpClicked(object sender, EventArgs e)
        {
            System.Diagnostics.Process proc = new System.Diagnostics.Process();
            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo(_url);
            proc.StartInfo = startInfo;
            proc.Start();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:26:33.257

您多次订阅该事件。在这种特殊情况下，当您的计时器触发时，只要满足特定条件，您就订阅了该事件。这似乎不止一次发生。

您几乎肯定希望将事件处理程序附加到 tick 事件之外，可能是在首次加载表单时。

# php - mod rewrite、htaccess 和 gettign 值

> ID：14733657
> 
> 赞同：-1
> 
> 时间：2013-02-06T16:14:51.363
> 
> 标签：php, .htaccess, mod-rewrite

**传入的 URL**

> domain.com/12/3

**应该重写为**

> domain.com/?w=12&h=3

**htaccess**

```
RewriteEngine on
RewriteRule ^([a-z]{2,2})/([a-zA-Z0-9_-]+)$ index.php?w=$1&h=$2 [QSA] 
```

**php**

```
<?php
echo $_GET['h'];
?> 
```

**结果**

> 404页

我尝试使用 htaccess 更改 url 的结果，然后从 URL 中检索值，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:23:20.603

也许你需要`-`像这样逃避：

```
RewriteRule ^([a-z]{2,2})/([a-zA-Z0-9_\-]+)$ index.php?w=$1&h=$2 [QSA] 
```

PS。我希望上面的 URL /12/3 只是一个例子，因为你的正则表达式只接受 az

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:23:22.373

```
RewriteEngine On
RewriteRule ^[a-z]{2,2})/([a-zA-Z0-9_-]+)$ /index.php?w=$1&h=$2 [QSA] 
```

本质上，我很确定您需要 / 在 index.php 前面

我喜欢将这个生成器用于我的 mod-rewrite 规则。

[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:24:37.040

尝试将您的重写规则更改为以下内容：

```
RewriteEngine on
RewriteRule ^([a-z0-9]{2})/([a-zA-Z0-9_-]+)$ /index.php?w=$1&h=$2 [QSA] 
```

您的示例有两个数字作为路径的第一部分，不会被`[a-z]`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T16:26:21.230

```
RewriteEngine On
RewriteRule ^(.*)/(.*)$ index.php?w=$1&h=$2 [QSA] 
```

上面整理了一下。感谢您的回复

# html - 一排拉伸行高的表格高度

> ID：14733659
> 
> 赞同：0
> 
> 时间：2013-02-06T16:15:11.837
> 
> 标签：html, css, html-table

我有一张桌子，里面有一排表头。表格的高度为 195px，当它被渲染（js/jquery）时，第一行拉伸了表格的整个高度。我怎样才能使表格行保持默认高度？我尝试使用 tr:first-child 静态设置高度，但它不起作用。

```
<table class="tabled">
<tr>
    <th>Header 1</th>
    <th>Header 2</th>
</tr>
</table>

<style>.tabled { height: 195px; } .tabled tr:first-child {20px; }</style> 
```

当它是表中唯一的行时，这`<tr>`会拉伸整个 195px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:22:57.060

您可以通过将类应用于标题行来通过 CSS 设置高度

```
<table class="tabled">
<tr class="header">
    <th>Header 1</th>
    <th>Header 2</th>
</tr>
</table>

<style>.tabled { height: 195px; } .header { height: 20px; }</style> 
```

# tridion - XPM 更新时返回 404，oData.svc 似乎不可用

> ID：14733662
> 
> 赞同：2
> 
> 时间：2013-02-06T16:15:14.733
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, experience-manager

我一直在 JSP 开发站点上配置 XPM（Tridion 2012 UI 更新）。这是一个多合一的软件包，内容管理器、数据库和登台在同一台服务器上用于开发目的。

我做了以下配置：

*   已定义的 Staging Web App（称为 JSPStaging 并设置为 jspstaging.project.dev 的主机头），它从 HTTPUpload Web App（在 CME 的发布目标中定义）接收内容并将此内容放置在自己的文件夹中

*   我添加了 Java Session Preview Webservice（称为 cd_preview_webservice）

目前我的站点由 Tomcat 7 运行，IIS 7.5 用于将请求路由到处理 jspstaging.project.dev 的端口 8080 (Tomcat)。

我知道这不是一个理想的情况，但我必须凑合。

手头的问题：我目前已经成功实现了 XPM（或者至少是仪表板，能够编辑和保存这些组件）但是，一旦您想更新页面，它有时会刷新，有时会返回错误：

```
The remote server returned an error: (404) Not Found. 
```

这是一条（橙色）Tridion 消息。我不完全确定上述 404 错误与[SDL Live Content](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=UIU4SDLT2011SP1&lang=en-US#addHistory=true&filename=Preventing404ErrorsOnStagingWSDueToSE.xml&docid=task_2F3D125DF7274CC9BE33BBBDC284D314&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_2F3D125DF7274CC9BE33BBBDC284D314&url=/LiveContent/web/search.xql?c=t&pub=UIU4SDLT2011SP1&lang=en-US&action=search&query=404&sid=lcSearch.runSearch1360160197367&currentQuery=404&currentScope=)中记录的错误相同。

这是服务器上事件查看器中的错误：

```
Unable to update the changes using OData Service. The remote server returned an error: (404) Not Found. Component: Tridion.SiteEdit.FastTrackPublishing Errorcode: 1003 User: NT AUTHORITY\NETWORK SERVICE 
```

因此，我正在关注 Albert Romkes 写的这篇非常棒[的](http://albertromkes.com/2013/01/24/troubleshooting-the-sdl-tridion-experience-manager-with-session-preview/)博文，在他的文章的第 2 点，他提到了导航到 odata.svc。我似乎无法在我的暂存或会话预览 Web 应用程序的任何地方找到该文件。我以前安装过 Tridion 的 .NET 应用程序，而安装媒体上的 .NET 应用程序（以及其他文件）有一个 acces_token 和一个 odata.svc 文件，我注意到会话预览的 web 服务的 JAVA 安装没有有这些文件。但是，在[安装指南](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=UIU4SDLT2011SP1&lang=en-US#addHistory=true&filename=SettingUpPublishingForSiteEdit.xml&docid=task_3F88811BFF4D468AB436867A43082D94&inner_id=&tid=b0d8215d-2083-4955-b7fe-57b3aebde402&query=odata&scope=&resource=&eventType=lcContent.loadDoctask_3F88811BFF4D468AB436867A43082D94&url=/LiveContent/web/search.xql?c=t&pub=UIU4SDLT2011SP1&lang=en-US&action=search&query=odata&sid=lcSearch.runSearch1360166140711&currentQuery=odata&currentScope=)的后面部分，您需要这些文件来设置发布。

当我按照 JSP 站点部分并填写发布目标的会话预览选项卡上的字段时，我无法导航到服务器本身上的这个 odata url，现在是

```
http://localhost:8080/cd_preview_webservice/cdws/odata.svc/ 
```

Tridion Logging 并没有说有什么问题，用于暂存和会话预览 Web 应用程序以及 Tomcat 日志。他们甚至说 OData 工作得很好，据我所知......

如果我无法导航到上面发布的网址，这是否意味着有问题，或者 404 错误是因为这个？

编辑

我的分期 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"> 内容交付 Web 服务

```
<jsp-config> 
    <taglib>
        <taglib-uri>cd_tags</taglib-uri>
        <taglib-location>/WEB-INF/lib/cd_tags.tld</taglib-location>
    </taglib>
</jsp-config>
<listener>
    <listener-class>
        com.tridion.storage.persistence.session.SessionManagementContextListener
    </listener-class>
</listener>

<!--
OData and linking Web service
-->
<servlet>
    <servlet-name>Content Delivery Web service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
        <param-value>com.sun.jersey.api.core.ClassNamesResourceConfig</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.classnames</param-name>
        <param-value>com.tridion.webservices.odata.ODataWebservice;com.tridion.webservices.linking.LinkingService;com.tridion.webservices.odata.JAXBContextResolver</param-value>
    </init-param>
</servlet>
    <filter>
    <filter-name>Ambient Data Framework</filter-name>
    <filter-class>com.tridion.ambientdata.web.AmbientDataServletFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Ambient Data Framework</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet-mapping>
    <servlet-name>Content Delivery Web service</servlet-name>
    <url-pattern>/cdws/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>Page Content Filter</filter-name>
    <filter-class>com.tridion.preview.web.PageContentFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Page Content Filter</filter-name>
    <url-pattern>/cdws/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>com.tridion.webservices.odata.ODataContextListener</listener-class>
</listener>
<filter>
    <filter-name>Binary Content Filter</filter-name>
    <filter-class>com.tridion.preview.web.BinaryContentFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>Binary Content Filter</filter-name>
    <url-pattern>/Images/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:33:45.900

You mentioned that you've added the cd_preview_webservice, however, the error message dictates that it's not working. On the Java side, you won't see the odata.svc file as this url is handled by one of the classes within the jars, so don't worry about that.

In your Tomcat console, does it show that the app has been deployed/started without error?

Also the URL that you mention "/cd_preview_webservice/cdws/odata.svc/" has a "/cdws/" in it. This seems a bit irregular. Typically the url is "/cd_preview_webservice/odata.svc". What is does your web.xml look like?

# grails - 使用“and”和“or”子句时，Grails 中的 findAll() 方法行为不正确

> ID：14733666
> 
> 赞同：1
> 
> 时间：2013-02-06T16:15:36.853
> 
> 标签：grails, closures, findall

为什么“and”和“or”子句在 grails 的 findAll() 方法中不起作用？

例如，这段代码：

```
Student.findAll {
   and {
      name == "A"
      name ==~ "%A" 
   }
}.collect { it.name } 
```

将生成列表：

```
['AA', 'AB', 'AC', 'AD', 'AE', 'AF', 'AG', 'AH', 'AI', 'AJ'] 
```

这是错误的。它应该没有产生任何东西。没有任何记录与具有确切名称“A”和结尾“A”的条件匹配。显示的字符串列出了我的学生表中的所有记录。

情况会变得更糟。这段代码：

```
Student.findAll {
   or {
      name == "A"
      name ==~ "%A" 
   }
}.collect { it.name } 
```

生成相同的列表：

```
['AA', 'AB', 'AC', 'AD', 'AE', 'AF', 'AG', 'AH', 'AI', 'AJ'] 
```

实际上应该只返回记录“AA”。

这段代码有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:27:29.917

在标准中使用常规布尔运算符，例如：

```
Student.findAll {
    name == "A" && name ==~ "%A" 
}.collect { it.name }

Student.findAll {
    name == "A" || name ==~ "%A" 
}.collect { it.name } 
```

# ios - 如何使用带有搜索栏的 switch 命令

> ID：14733668
> 
> 赞同：1
> 
> 时间：2013-02-06T16:15:37.900
> 
> 标签：ios, uitableview, xcode4.5, uisearchbar

我有一个使用以下数据编程的表格视图。它还具有编程到页面上的工作搜索功能。我正在尝试使用“开关”系统根据按下的单元格转移到特定的视图控制器。

```
- (void)viewDidLoad
{
[super viewDidLoad];

smtArray = [[NSArray alloc] initWithObjects:
                    [Smt SSSOfCategory:@"P" name:@"HW"],
                    [Smt SSSOfCategory:@"P" name:@"WI"],
                    [Smt SSSOfCategory:@"P" name:@"WC"],
                    [Smt SSSOfCategory:@"P" name:@"C"],nil]; 
```

//搜索功能代码

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
Smt *smt = nil;

if (tableView == self.searchDisplayController.searchResultsTableView) {
    smt = [filteredSmtsArry objectAtIndex:indexPath.row];

    switch (indexPath.row) {
        case 0:

            [self performSegueWithIdentifier:@"One" sender:self];
            break;

        case 1:
            [self performSegueWithIdentifier:@"Two" sender:self];
            break;

        default:
            break;
    }
}

} 
```

目前，我对如何基于 tableview 单元格中的对象执行 segue 感到困惑。显然，目前 segues 依赖于 indexPath.row，这对于可搜索的表来说是无用的。（我知道 segues 目前仅在过滤数据时才起作用）。

任何建议将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:16:06.720

您可以使用

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
        NSString *content = selectedCell.textLabel.text;

        if ([content isEqualToString:"One"]) [self performSegueWithIdentifier:@"One" sender:self];
        else if ([content isEqualToString:"Two"]) [self performSegueWithIdentifier:@"Two" sender:self];        
    }
} 
```

在你的方法中。然后你可以从中得到你想要的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:20:14.407

我想知道你为什么使用 "One" 、 "Two" ... 作为标识符，为什么不使用 smtArrays 对象名称作为标识符？如果您担心标识符过时，可以使用 SSSOfCategory + name 。而且您的代码将是完美的并且更具可读性

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    Smt *smt = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        smt = [filteredSmtsArry objectAtIndex:indexPath.row];

        [self performSegueWithIdentifier:smt.name sender:self];

    }

} 
```

# php - 如何在 PHP 中搜索和替换整个多级数组？

> ID：14733672
> 
> 赞同：0
> 
> 时间：2013-02-06T16:15:49.497
> 
> 标签：php, arrays, multidimensional-array, replace

如何在 PHP 中搜索和替换整个多级数组？就像这样：

```
$a = array(
  'level1' => array(
    'level2' => array(
      'level3' => 'foo'
    )
    'level2b' => array(
      'level3b' => 'foo'
    )
); 
```

因此，将 'foo' 替换为 'bar'。

背景：我不得不在来自 WordPress 博客的序列化数组上执行此操作，因为我们正在将此博客移动到另一个目录名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:21:50.643

很简单[`array_walk_recursive`](http://php.net/manual/function.array-walk-recursive.php)

```
array_walk_recursive($a, function (&$val) {
  $val = str_replace('foo', 'bar', $val);
});

print_r($a); 
```

只需确保使用引用 ( `&$val`)。

**演示**：[http ://codepad.viper-7.com/7L33Fg](http://codepad.viper-7.com/7L33Fg)

# ruby - 使用 Ruby 将 HTML 放入 javascript 中

> ID：14733675
> 
> 赞同：0
> 
> 时间：2013-02-06T16:16:00.587
> 
> 标签：ruby, coffeescript, sinatra, haml

**注意：**这是一个非常奇怪和独特的用例，所以如果它看起来有点落后，我提前道歉。

我有一个haml 文件`content.haml`和一个coffeescript 文件`main.coffee`。我希望以某种方式将渲染 content.haml 生成的 html 转换为 coffeescript/resulting javascript 中的变量。

最终结果应该是呈现给浏览器的 javascript 文件。

假设它们看起来像这样：

```
# content.haml
.container
  .some_content
    blah blah blah 
```

-

```
# main.coffee
html_content = ???
do_something_with_html_content(html_content) 
```

我知道，这听起来很荒谬，“使用模板”、“通过 ajax 获取 HTML”等。然而，在这种情况下，这是不可能的，一切都需要通过一个 JS 文件提供，我无法从服务器获取其他资源。很奇怪，我知道。

通过加入这样的字符串数组来手动重建咖啡脚本文件中的haml：

```
html_content = [
  '<div class"container">',
    '<div class"some_content">',
      'blah blah blah',
    '</div>',
  '</div>',
] 
```

我不确定这样做的最佳方法。

我想到的另一种方法是将这样的内容放入咖啡文件中：

```
html_content = '###CONTENT###' 
```

然后在ruby中将haml渲染为html，将coffeescript渲染为js，然后`###CONTENT###`在提供给客户端之前用渲染的html替换。但是 html 是一个多行字符串，因此它完全破坏了 javascript。

我确信一定有其他很好的方法可以将 haml 渲染为变量中的 html，以便它形成有效的 javascript，但我的大脑已经一片空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:28:21.690

您可以像 Rails 一样使用 sprockets gem 来做到这一点。您只需将 CoffeeScript 文件重命名为`main.coffee.erb`并像使用 haml 模板一样使用它。使用实例变量传入渲染的 html：

```
html_content = '<%= @html_content %>' 
```

**编辑**：添加缺少的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:24:03.983

也许你可以在你的一个观点中尝试这样的事情：

```
:javascript
   html_content = <%= escape_javascript(render partial: "content")%>
   ## your own logic follows here.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:24:45.030

[使用自定义的html`data`属性](http://html5doctor.com/html5-custom-data-attributes/)，然后在js中获取它的内容不是更好吗？

```
<div data-mycontent="YOUR CONTENT GOES HERE"></div> 
```

然后在咖啡中`dataset`，如果可用，则通过 jquery 使用属性/数据。

如果您通过直接写入文件来设置 var，它将使您的`js`文件无法缓存，以及其他缺点。

# vagrant - vagrant.d 在主文件夹之外

> ID：14733681
> 
> 赞同：86
> 
> 时间：2013-02-06T16:16:24.117
> 
> 标签：vagrant

我的问题是我的主目录实际上位于远程服务器上，并且 ~/.vagrant.d 位于该服务器上，vagrant 的性能严重下降（并且文件服务器备份大小增加）。

那么有没有办法将至少 ~/vagrant.d/boxes 移出主目录？

干杯。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-11T01:27:12.207

默认情况下，Vagrant 使用`~/.vagrant.d`. 幸运的是，vagrant 提供了一个环境变量`VAGRANT_HOME`，您可以通过它设置 vagrant home。

只需执行以下操作即可更改 vagrant home（仅在当前会话中有效）

`export VAGRANT_HOME=/path/to/vagrant`

要使其永久化，请将其添加到您的`~/.bash_profile`（用于登录 shell）。

**更新**：`VAGRANT_HOME`已添加到文档中 -[环境变量](http://docs.vagrantup.com/v2/other/environmental-variables.html)

> `VAGRANT_HOME`可以设置更改 Vagrant 存储全局状态的目录。默认情况下，此设置为`~/.vagrant.d`。Vagrant 主目录是存储诸如盒子之类的东西的地方，因此它实际上可以在磁盘上变得非常大。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-10T15:03:10.617

`VAGRANT_HOME`在我的 Windows 8.1 中无法正常工作。当我更改文件时它对我有用

> D:\HashiCorp\Vagrant\embedded\gems\gems\vagrant-1.5.3\lib\vagrant\environment.rb

在第 117 行到

```
@home_path = Util::Platform.fs_real_path("D:/vagrant/home/") 
```

就像史蒂夫 H 说的那样，它工作正常。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-25T09:58:13.407

通过执行在 Windows 框上永久设置它可能很有用

```
setx VAGRANT_HOME "/d/.vagrant.d/" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-14T01:50:52.983

在 Windows 上更改 environment.rb 的第 17 行，位于：
vagrant\embedded\gems\gems\vagrant-1.xxdev\lib\vagrant\environment.rb

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-09T07:24:46.567

另一个地方（它读取 ENV 变量的根位置）在 shared_helpers.rb 第 71 行（vagrant v 1.6.5）中：

```
 # This returns the path to the ~/.vagrant.d folder where Vagrant's
  # per-user state is stored.
  #
  # @return [Pathname]
  def self.user_data_path
    # Use user spcified env var if available
    path = ENV["VAGRANT_HOME"]

    # On Windows, we default to the USERPROFILE directory if it
    # is available. This is more compatible with Cygwin and sharing
    # the home directory across shells.
    if !path && ENV["USERPROFILE"]
      path = "#{ENV["USERPROFILE"]}/.vagrant.d"
    end

    # Fallback to the default
    path ||= "~/.vagrant.d"

    Pathname.new(path).expand_path
end 
```

无论如何，我认为最好的方法是使用环境变量 VAGRANT_HOME，以防 vagrant 版本升级。

您可以像这样使用此功能：

```
disk_path = self.user_data_path().to_s 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-12T06:10:20.977

对于 Windows 用户，将环境变量设置`VAGRANT_HOME`为新位置。您可能需要重新启动 PC 才能使其生效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-26T02:32:36.020

它适用于我在 Linux 上创建从我的辅助硬盘驱动器上的文件夹到 ~/.vagrant.d/boxes/ 的符号链接。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-11-30T12:48:16.610

一组`VAGRANT_DOTFILE_PATH`环境变量在 Windows 机器上帮助了我。`VAGRANT_HOME`没有成功。

# git - git中的~和^有什么区别

> ID：14733687
> 
> 赞同：6
> 
> 时间：2013-02-06T16:16:51.977
> 
> 标签：git

我很久以前问过[这个](https://stackoverflow.com/a/10627431/20654)问题，但我仍然不知道在这个答案中 ~ 和 ^ 是什么意思：

> 如果你在谈论一个远程分支，比如 origin/master，你可以使用 ~ 和 ^ 来引用相对于分支的祖先提交，就像你可以使用本地分支一样

有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:21:57.647

`^`意思是“（第一）父母”。`~`类似，但它需要一个数字作为参数，基本上意味着“祖先”。因此，例如：

```
HEAD            = latest commit
HEAD^  = HEAD~1 = parent of latest commit
HEAD^^ = HEAD~2 = grandparent of latest commit
HEAD~100        = 100th ancestor of latest commit 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T16:24:11.327

正如[手册页](http://git-scm.com/docs/gitrevisions.html)所述：

> **`<rev>^, e.g. HEAD^, v1.5.1^0`**
> 修订参数的后缀 ^ 表示该提交对象的第一个父对象。`^<n>`表示第`<n>`th 父级（即`<rev>^`等同于`<rev>^1`）。[...]
> 
> **`<rev>~<n>, e.g. master~3`**
> `~<n>`修订参数 的后缀表示作为指定提交对象的`<n>`第代祖先的提交对象，仅在第一个父对象之后。ie`<rev>~3`等价于`<rev>^^^`which 等价于`<rev>^1^1^1`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T16:24:15.173

根据[此文档](http://paulboxley.com/blog/2011/06/git-caret-and-tilde)，波浪号 (~) 引用提交的线性祖先（父母、祖父母、曾祖父母），而插入符号 (^) 引用多个父母。在有多个合并祖先的情况下，每个合并源都是父级。

# hbase - 无法从 java 应用程序远程连接 HBase

> ID：14733688
> 
> 赞同：3
> 
> 时间：2013-02-06T16:16:53.683
> 
> 标签：hbase

我已经在 Linux 机器（192.168.113.27）上安装了 HBase，现在我在 Windows 机器上的 Eclipse IDE 中编写了一些示例代码，使用 JAVA API 与 Linux 机器上的 HBase 进行通信。我在 Linux 机器上的 HBase 上创建了“用户”表。

客户端连接到zookeeper，如下面的日志中所述：之后我收到异常“找不到用户表的区域”。为了解决这个问题，我阅读了各种线程并尝试了各种方法，但无法解决。

我尝试在 /conf/regionservers 中将本地主机更改为 Linux 机器 IP（192.168.113.27），但仍然出现相同的错误。

示例代码：

```
Configuration conf = HBaseConfiguration.create();
conf.set("hbase.zookeeper.quorum", "192.168.113.27");
conf.set("hbase.zookeeper.property.clientPort","2181");

HTableInterface usersTable = new HTable(conf, "users"); 
```

客户端日志：

> 13/02/06 10:58:32 INFO zookeeper.ClientCnxn：服务器 192.168.113.27/192.168.113.27:2181 上的会话建立完成，sessionid = 0x13cae4bd91b0003，协商超时 = 40000

这意味着与zookeeper的连接已经建立。

在 Excetion 上进一步没有找到“用户”表的区域。

> org.apache.hadoop.hbase.client.NoServerForRegionException: 10 次尝试后无法为用户找到区域，99999999999999。在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:951) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:856) 在 org.apache .hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:958) 在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:860) 在 org.apache.hadoop.hbase .client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:817) 在 org.apache.hadoop.hbase.client.HTable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T08:42:36.880

Yes I had this issue as well. Took a while to figure out.

If you step into the HBase HConnectionManager code you will see this method being called.

```
 HRegionInterface getHRegionConnection(final String hostname, final int port, 
```

Make sure the value of the hostname argument maps to a VALID IP address.

For instance, in my case I had a local hbase server on my local network with a hostname of "ubuntu" but the machine I was testing the hbase client with did not have a valid mapping IP address for hostname "ubuntu" in the windows 7 hosts file.

adding this entry to my windows 7 hosts file solved the problem

```
192.168.0.101   ubuntu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:57:22.047

我想我记得这样的事情。如果我没记错的话，这与 Zookeper 返回一个私有 IP 地址有关。

在您的客户端 HBase 配置中，您应该让`hbase.rootdir`指向 IP 地址而不是主机名。

```
<configurtion>
    <property>
         <name>hbase.rootdir</name>
         <value>hdfs://<IP address>:<port>/<HBase location>/</value>
    </property>
</configuration> 
```

# javascript - 从谷歌图表 PieChart 的选定切片中获取数据

> ID：14733690
> 
> 赞同：1
> 
> 时间：2013-02-06T16:17:02.087
> 
> 标签：javascript, google-visualization, pie-chart, getselection

我在点击饼图时尝试获取选定切片的值时遇到了很大的麻烦。

文档说：

> selection_array：选定对象的数组，每个对象描述用于创建可视化的基础表（DataView 或 DataTable）中的数据元素。每个对象都有属性行和/或列，以及底层数据表中所选项目的行和/或列的索引。如果 row 属性为 null，则选择是一列；如果 column 属性为 null，则选择为一行；**如果两者都是非空的，那么它是一个特定的数据** **项。您可以调用 DataTable.getValue()* * 方法来获取所选项目的值。检索到的数组可以传递给 setSelection()

在我的情况下，我从 getSelection() 得到 null，然后我无法弄清楚如何获得我想要的值（对应于该切片的列的标签）。

任何答案都会非常感激:)

我在做什么的示例代码：

```
google.load('visualization', '1', {packages: ['controls']});
google.setOnLoadCallback(drawVisualization);

var data;
var pie_area;

function drawVisualization() {
  // Prepare the data
  data = google.visualization.arrayToDataTable([
    ["rbd", "nombre", "area", "dependencia", "simceMat", "ubicacionLon", "ubicacionLat", "simceLen", "nivel"],
    [22616, "Colegio Mozart", "Urbana", "Part_Sub", 228, -72.981148, -41.479872, 254, "Basico"],
    [22686,"Escuela Basica Camelias","Urbana","Muni",228,-72.980075,-41.474599,253, "Medio"],
    [40351,"Colegio Bosquemar","Urbana","Part_Sub",290,-72.981148,-41.479872,280, "Medio"],
    [7633,"Escuela Capitan Arturo Prat Chacon","Urbana","Muni",317,-72.909565,-41.474567,314, "Basico"],
    [7659,"Escuela Rural Alerce","Rural","Muni",230,-72.91767,-41.399121,249, "Basico"],
    [7671,"Escuela Rural Lagunitas","Rural","Muni",261,-72.964282,-41.459485,269, "Medio"],
    [7690,"Escuela Rural Rio Blanco","Rural","Muni",217,-72.638597,-41.455786,229, "Medio"],
    [7700,"Colegio San Francisco Javier","Urbana","Part",305,-72.942089,-41.470351,303, "Basico"],
    [7717,"Instituto Aleman de Puerto Montt","Urbana","Part",321,-72.932482,-41.470001,310, "Medio"],
    [7718,"The American School","Urbana","Part",317,-72.909,-41.456,314, "Medio"]
  ]);

  var fltArea = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'f1',
    'options': {
      'filterColumnLabel': 'area',
      'ui': {
      'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false
      }
    }
  });

  pie_area = new google.visualization.ChartWrapper({
      'chartType': 'PieChart',
      'containerId': 'chart2',
      'options': {
        'width': 300,
        'height': 300,
        'legend': 'none',
        'title': 'Area',
        'pieSliceText': 'label'
      },
      'view': {'columns': [2]}
    });

  new google.visualization.Dashboard(document.getElementById('dashboard')).bind([fltArea], [pie_area]).draw(data);
  google.visualization.events.addListener(pie_area, 'select', onAreaSliceSelected);

}

function onAreaSliceSelected(){
  var sel = pie_area.getChart().getSelection(); //is always null
  console.log('you selected '+sel); //displays you selected null
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:06:53.090

问题在于您的图表/数据是如何设置的。

您当前正在汇总第 2 列中的所有数据以生成图表。在本例中，您的值有 7 个 Urbana 和 3 个 Rural，因此它将这 10 行聚合为两个类别。由于饼图的每个切片都引用一组聚合值，而饼图只允许选择单个值，因此您无法以这种方式获得三行的选择。

此外，您的类别选择器目前并没有提供太多用途，因为如果您选择 Urbana 或 Rural，您最终会得到一个饼图，显示 100% 的单个类别。

如果您以不同的方式设置数据，则无论何时选择切片，您都将正确获取对象数组，如下例所示：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', 11],
    ['Eat', 2],
    ['Commute', 2],
    ['Watch TV', 2],
    ['Sleep', 7]
  ]);

  // Create and draw the visualization.
  pieChart = new google.visualization.PieChart(document.getElementById('visualization'));
  pieChart.draw(data, {title:"So, how was your day?"});
  google.visualization.events.addListener(pieChart, 'select', onAreaSliceSelected);
}

function onAreaSliceSelected(){
  var sel = pieChart.getSelection(); //is always null
  alert('you selected '+sel); //displays you selected null
} 
```

# c++ - 哪个更快？类函数还是带有类指针的函数？

> ID：14733691
> 
> 赞同：1
> 
> 时间：2013-02-06T16:17:02.937
> 
> 标签：c++, class, pointers

在我的程序中，我使用了几个类和大量的函数。我想知道哪一个会更快，或者它们之间在速度方面没有区别。

第一：类功能

```
class mex{
  public:
    int length,nof_evaluations,nof_fast_evaluations;
    tree T;
    calc_mex(vector<string>,vector<double>);
}; 
```

这将由

```
mex m;
vector<string> v1;
vector<double> v2;
m.calc_mex(v1,v2); 
```

2nd：带有类指针的函数

```
class mex{
  public:
    int length,nof_evaluations,nof_fast_evaluations;
    tree T;
}; 
calc_mex(mex*,vector<string>,vector<double>); 
```

这将由

```
mex m,*mptr;
mptr=&m;
vector<string> v1;
vector<double> v2;
calc_mex(mptr,v1,v2); 
```

我在我的程序中使用了这两种方式，但更倾向于方式 1，因为它看起来更干净、更有条理。我还在程序的一次运行中调用了这些类型的函数 100K 次。所以我想知道他们中的任何一个是否会在时间上做得更好。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:20:07.320

Rather than speed the deciding factor should be whether the function logically belongs to the class or not. If yes make it a member. If not make it a free standing function.

BTW each member function is implicitly passed an `this` pointer so there is not much difference between the two versions. If you are truly concerned about performance. Make a sample program with both versions and profile it in your environment with a large data set.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:27:02.807

我支持 Alok save 给出的答案，我必须重申 Donald Knuth 的声明（他很有名，所以这个声明*必须*是真的，很明显......）：

> 程序员浪费大量时间来思考或担心程序中非关键部分的速度，而在考虑调试和维护时，这些提高效率的尝试实际上会产生强烈的负面影响。我们应该忘记小的效率，比如大约 97% 的时间：**过早优化是万恶之源**。然而，我们不应该放弃那关键的 3% 的机会。

我在这个问题上的两分钱：测量一些东西，直到你非常确定你的“优化”将使程序受益。否则，您往往会生成随着时间的推移变得更加不可读和不可维护的代码......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T17:35:04.150

在 C++ 中，所有成员函数（除非它们是虚函数）都是独立函数，“this”作为第一个参数传入。选择一个而不是另一个，您不会获得任何速度提升，它们都只是函数调用。

# javascript - 生成 Excel 电子表格 - 旧格式

> ID：14733695
> 
> 赞同：0
> 
> 时间：2013-02-06T16:17:21.920
> 
> 标签：javascript, excel, node.js

我想出了如何生成用新版本 Excel 打开的 Excel 电子表格，但事实证明许多客户使用的是旧版本的 Excel。所以我需要弄清楚如何生成旧的 Excel 文件。

我用它来生成文件： [http ://en.wikipedia.org/wiki/Microsoft_Excel#XML_Spreadsheet](http://en.wikipedia.org/wiki/Microsoft_Excel#XML_Spreadsheet)

我不需要太复杂的东西，我只需要插入简单的行和列。我找不到任何可以显示旧格式的东西（我希望它至少是人类可读的）。我什至不完全确定他们使用的是哪个版本的 Excel。有什么方法可以生成适用于旧版本的 Excel 文档吗？

如果有什么东西可以让我自己生成文件，我会更喜欢，但是库也可以。我正在使用 JS 和 Node，我能找到的只有 node-excel，它声称在 3 月份完成了第一个版本，我假设会遇到与我编写的简单程序相同的问题（不适用于 Excel 版本2002 年之前）。

谢谢阅读。

# c - 如何让 Frama-C 在测试中理解按位与？

> ID：14733696
> 
> 赞同：4
> 
> 时间：2013-02-06T16:17:22.063
> 
> 标签：c, frama-c

我正在尝试使用 Frama-C 值分析来研究生成的大型 C 代码，其中边界检查是使用按位与 (&) 而不是逻辑与 (&&) 完成的。例如：

```
int t[3];
...
if ((0 <= x) & (x < 3)) 
  t[x] = 0; 
```

Frama-C 值分析抱怨数组访问：

```
warning: accessing out of bounds index [-2147483648..2147483647]. assert 0 ≤ x < 3; 
```

通过在测试之前添加断言，我设法使它对小例子感到满意：

```
//@ assert (x < 0 || 0<=x);
//@ assert (x < 3 || 3<=x); 
```

并增加`slevel`但我不能在实际代码中做到这一点（太大！）。

有人知道我可以做些什么来消除这个警报吗？

（顺便说一句，有什么理由这样写测试吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:12:56.373

下面的补丁将使 Value 统一处理`e1 && e1`and `c1 & c2`， where `c1`and `c2`are 条件（但不是任意表达式）。

```
Index: src/value/eval_exprs.ml
===================================================================
--- src/value/eval_exprs.ml (révision 21388)
+++ src/value/eval_exprs.ml (copie de travail)
@@ -1748,11 +1748,23 @@
         reduce_by_comparison ~with_alarms reduce_rel
           cond.positive exp1 binop exp2 state

-      | true, BinOp (LAnd, exp1, exp2, _)
-      | false, BinOp (LOr, exp1, exp2, _) ->
+      | true,
+        ( BinOp (LAnd, exp1, exp2, _)
+        | BinOp (BAnd, (* 'cond1 & cond2' can be treated as 'e1 && e2' *)
+                 ({ enode = BinOp ((Le|Ne|Eq|Gt|Lt|Ge), _, _, _)} as exp1),
+                 ({ enode = BinOp ((Le|Ne|Eq|Gt|Lt|Ge), _, _, _)} as exp2),
+                 _))
+      | false,
+        ( BinOp (LOr, exp1, exp2, _)
+        | BinOp (BOr, (* '!(cond1 | cond2)' can be treated as '!(e1 || e2)' *)
+                 ({ enode = BinOp ((Le|Ne|Eq|Gt|Lt|Ge), _, _, _)} as exp1),
+                 ({ enode = BinOp ((Le|Ne|Eq|Gt|Lt|Ge), _, _, _)} as exp2),
+                 _))
+          ->
           let new_state = aux {cond with exp = exp1} state in
           let result = aux {cond with exp = exp2} new_state in
           result
+
       | false, BinOp (LAnd, exp1, exp2, _)
       | true, BinOp (LOr, exp1, exp2, _) ->
           let new_v1 = try aux {cond with exp = exp1} state 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:28:13.500

在那个例子中，两边`&`都已经是 0 或 1，所以在这种情况下使用`&`代替`&&`是可以的。

> 有什么理由这样写测试吗

不，我想不出他们会故意这样做的任何理由。一般来说，这是一个坏主意，因为如果稍后更改代码并且一侧`&`不再是 0-1 值，那么代码就会中断。

现在到**实际**问题：

是`int t[3];`多次生成（例如在 {} 内）还是只生成一次？如果它只定义一次，那么解决问题的方法是对其进行 malloc: `int* t = malloc(3*sizeof(int))`. 编译器将不再抱怨。

# java - log4j 2 - 配置问题

> ID：14733698
> 
> 赞同：15
> 
> 时间：2013-02-06T16:17:24.620
> 
> 标签：java, log4j2

我正在尝试将 log4j 2.0 配置为报告日志。

我的配置保存为 log4j2.xml，这是它的内容：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <configuration name="PRODUCTION" status="OFF">

    <appenders>
        <RollingFile name="MyFileAppender" 
            fileName="../Logs/app.log" 
            filePattern="../Logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz">
            <PatternLayout>
                <pattern>%d %p %C{1.} [%t] %m%n</pattern>
            </PatternLayout>
            <Policies>
                <OnStartupTriggeringPolicy />
                <TimeBasedTriggeringPolicy interval="6" modulate="true"/>
                <SizeBasedTriggeringPolicy size="250 MB"/>
            </Policies>
        </RollingFile>
    </appenders>

    <loggers>
        <root level="trace">
            <appender-ref ref="MyFileAppender"/>
        </root>
    </loggers>

 </configuration> 
```

它存在于项目的类路径中，我尝试将它放在许多其他目录中。

我在代码中创建了一个记录器，如下所示：

```
 Logger          logger = LogManager.getLogger(MyClass.class.getName());
    logger.info("test"); 
```

没有写入任何文件，也没有创建文件。当我调试代码时，我看到记录器是默认记录器（控制台）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-01T08:52:22.393

将`log4j2.xml`文件放在`src/main/resources`. 有用

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-08T04:23:31.187

实际上这是一个简单的过程。Log4j 2 的两个主要类如下，您需要像这样导入：

```
 import org.apache.logging.log4j.LogManager
    import org.apache.logging.log4j.Logger 
```

现在`Logger`使用此代码获取一个实例。

```
 private static final Logger logger = LogManager.getLogger(); 
```

注意我没有将类名指定为`getLogger()`方法作为参数。Log4j 2 会自动计算出来。

现在您可以使用该类中的任何`info(), trace(), debug(), warn(), error(), fatal()`方法`Logger`。但是要获得所有这些方法的输出，您需要一个 XML 配置文件。默认情况下，Log4j 2 仅从`error() and fatal()`方法产生输出。

配置文件如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Configuration status="WARN">
        <Appenders>
            <File name="MyCustomLogFile" fileName="/home/me/mylogfile.log">
                <PatternLayout>
                    <Pattern>%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n</Pattern>
                </PatternLayout>
            </File>
            <Console name="Console" target="SYSTEM_OUT">
                <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>
            </Console>
        </Appenders>
        <Loggers>
            <Root level="all">
                <AppenderRef ref="MyCustomLogFile"/>
                <!--<AppenderRef ref="Console"/>-->
            </Root>
        </Loggers>
    </Configuration> 
```

将此文件以任何名称保存在任何地方。我使用 Log4j2.xml 作为名称。现在您需要将此文件放在类路径中，您可以通过在运行程序时传递系统属性来完成，如下所示：

```
 java -Dlog4j.configurationFile=/path/to/xml/configuration/file/Log4j2.xml MyMainClass 
```

而你已经做到了。日志记录将立即在您的控制台上。

***特别说明：***

*   在 XML 文件中，我提供了 2 个附加程序：一个文件和一个控制台。您可以看到您只需要取消注释已注释的`AppenderRef`标记即可在文件而不是控制台中获取输出。

*   您还可以提供环境变量作为系统属性。Log4j 2 将首先从环境变量中读取配置文件，`-D`如果未找到环境变量，则在参数中读取。

享受日志记录的乐趣。:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T16:42:45.337

you should put your log4j2.xml into the classpath.

or set "log4j.configurationFile" system property to force to use your log4j2.xml

Please refer to: [http://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration](http://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-06T16:50:23.757

> 它存在于项目的类路径中，我尝试将它放在许多其他目录中。

具体在哪里？对于“在类路径中”的含义，经常会感到困惑。它不能只是在任何地方。它必须位于“顶部”或“默认包”。

```
src
├── main
│   └── java
│       ├── com
│       │   └── example
│       └── log4j2.xml 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-09T11:46:46.087

给 Eclipse 用户的提示：

**右键单击项目，然后单击“刷新”。确保您可以在 Eclipse 中看到 log4j2.xml 文件。（这解决了我的问题。）**

长篇大论：

*   你不应该将文件添加到构建路径。（如果你这样做，eclipse会警告你）

*   此文件的名称未出现在“.classpath”文件中。

*   我将 log4j2.xml 放在 src/ 目录下。有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-13T20:59:31.970

我有类似的问题。我把文件放在 src 文件夹下，它工作。我没有在 log4j2.xml 文件中提及任何包名称。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T16:36:56.493

我很确定你必须写下你想要记录其消息的类的完整限定名——比如`com.application.log4jtest.YourClass`. 如果这不起作用，请尝试调整日志级别。

另外 - 就像一个通知 - 你也可以写

```
Logger logger = LogManager.getLogger(MyClass.class); // omit .getClass() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-19T03:53:24.003

我遇到了问题，我尝试了一些解决方案，但只有这对我有用：

转到 web.xml，并添加此参数：

```
<context-param>
    <param-name>log4jConfiguration</param-name>
    <param-value>log4j2.xml</param-value>
</context-param> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-30T06:26:42.540

在 log4j 2 的文档中：http: [//logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration](http://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration)

> “如果找不到 JSON 文件，XML ConfigurationFactory 将尝试在类路径中找到 log4j2.xml。”

但它不适用于类路径。相反，如果我们将它保存在 src 文件夹中，那么它就可以工作。

```
<context-param>
    <param-name>log4jConfiguration</param-name>
    <param-value>log4j2.xml</param-value>
</context-param> 
```

这里提到了类似的问题：[https ://issues.apache.org/jira/browse/LOG4J2-357](https://issues.apache.org/jira/browse/LOG4J2-357)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-26T13:48:10.943

我也遇到了同样的问题。我将 log4j2.xml 文件保存在系统环境变量中。

**变量名：sys_logroot 变量值：D:\user\gouse**

并且没有为我创建日志。

使用系统变量`-Dlog4j.configurationFile=path/to/log4j2.xml`[见这里](http://logging.apache.org/log4j/2.x/faq.html#config_location)

这解决了我的问题

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-07T13:42:40.973

好的，我解决了这个问题。我必须在 xml 中指定 package="myPackage"

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-10-16T18:29:21.367

我有相同的'ERROR StatusLogger No log4j2 configuration file found。使用默认配置：仅将错误记录到控制台。一遍又一遍的消息。这让我发疯了。log4j2.xml 文件正确放置在 src/main/resources 中，就像我之前在数千个项目中所做的那样。

我的**解决方案**是**从根 pom.xml 中删除 <packaging>pom</packaging>**。打包 pom 会导致 src/main/resources 的内容不会被复制到 target/classes。

为具有相同根本原因的任何人提供快乐的日志记录。

# ruby - 所有 3 个的 Ruby gsub 格式相同，但其中 1 个输出不同

> ID：14733700
> 
> 赞同：0
> 
> 时间：2013-02-06T16:17:25.560
> 
> 标签：ruby, gsub

我试图通过 regex 在某些文本条件周围添加 html 标签。现在，我有 * 和 ** 工作（添加 h1 和 h2 标签）

我对 li 标签有相同的格式，但它在开头旁边添加了结束标签，这不是我想要的。

为什么输出不一样？

：：：文本文件：：：：

```
* this is an awesome *
** this could be something better **
* another test *
- li are good for lists 
```

::: 结束文本文件 :::

:::我的输出:::

```
-bash-4.1$ ruby markup.rb testMarkup.txt
<h1>this is an awesome <\h1>
<h2> this could be something better <\h2>
<h1>another test <\h1>
<li><\li>li are good for lists 
```

::结束输出:::

:: 红宝石文件 ::

```
#!/usr/bin/env ruby

text = IO.read(ARGV[0])

text = text.gsub(/^\*{1}[^*](.*?)\*{1}\s/) do 
  "<h1>" + $1 + "<\\h1>" 
end

text = text.gsub(/^\*{2}(.*?)(\*{2})\s/) do 
  "<h2>" + $1 + "<\\h2>" 
end

text = text.gsub(/^[-](.*?)\s/) do 
   "<li>" + $1 + "<\\li>" 
end
puts text 
```

:: 结束红宝石文件 ::

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:27:21.190

在您的最后一个正则表达式中，`/^[-](.*?)\s/`您应该`$`在正则表达式的末尾添加以仅匹配以**-**开头的整行。

`/^[-](.*?)\s/`匹配字符串“-”并替换它，保持字符串的其余部分不变。

仅供参考，您可以简化您的解决方案，将其变成更通用的解决方案。用 type 对声明一个哈希`Regexp => tag`，然后对其进行迭代。你会喜欢的代码！随时寻求进一步的帮助。

PS我猜，您正在尝试将 Markdown 转换为 HTML。尽管自己编写是一个很好的练习，但您可以使用现成的解决方案，例如[Maruku](http://maruku.rubyforge.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:41:29.470

关键的区别在于，在标签`h1`和的正则表达式中`h2`：

```
/^\*{1}[^*](.*?)\*{1}\s/
/^\*{2}(.*?)(\*{2})\s/ 
```

要捕获的字符串 match`(.*?)`必须后跟一个特殊的终止符号`\*{1}`or `\*{2}`，这让非贪婪匹配等待此类特殊字符，而在正则表达式中为 tag `li`：

```
/^[-](.*?)\s/ 
```

要捕获的字符串只需要后跟一个更通用的字符`\s`，该字符已经在 之后`-`，因此非贪婪匹配不会超出此范围。

# java - 在 Android 上保存字符串输入

> ID：14733701
> 
> 赞同：0
> 
> 时间：2013-02-06T16:17:27.657
> 
> 标签：java, android

是的，我一直在努力寻找解决方案，但由于某种原因它无法正常工作。

简而言之，我想做的是将用户输入的每个输入字符串保存到文件中。每次再次创建活动时，我都想将这些字符串重新输入到对象的新实例中。

这段代码是我用来创建文件并从中读取信息的代码，用于活动的 onCreate() 方法

```
 try {

        String brain = "brain";
        File file = new File(this.getFilesDir(), brain);
        if (!file.exists()) {
            file.createNewFile();
        }      

        BufferedReader in = new BufferedReader(new FileReader(file));
        String s; // This feeds the object MegaAndroid with the strings, sequentially 
        while ((s = in.readLine()) != null) {
            MegaAndroid.add(s);
        }
        in.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

之后，每次用户输入一些文本时，字符串都会保存到文件中：

```
 try {

        String brain = "brain";
        File file = new File(this.getFilesDir(), brain);
        if (!file.exists()) {
            file.createNewFile();
        }

    BufferedWriter out = new BufferedWriter(new FileWriter(file));
    out.write(message); // message is a string that holds the user input
    out.close();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

然而，由于某种原因，每次应用程序被终止时，数据都会丢失。我究竟做错了什么？

**编辑**：另外，如果我要从另一个班级访问这个文件，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:20:57.490

正如我们在推荐部分中讨论的那样，代码的主要问题是您的执行`FileWriter`发生在您的`FileReader`操作之前，同时截断了文件。为了维护文件内容，您要将写入操作设置为`append`：

```
BufferedWriter out = new BufferedWriter(new FileWriter(file,true));
out.write(message);
out.newLine();
out.close(); 
```

但是，如果接收到 EditText 上的每个条目，然后将其发送到文件中，您将只是在它旁边一个字节一个字节地写入数据。很容易得到类似的内容

这是第 1 行这是第 2 行

而不是想要的

这是第 1 行
这是第 2 行

这可以通过让 BufferedWriter 在每次写入文件后传递一个换行符来纠正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:46:05.783

这就是我为文件读取所做的。

```
try{

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/whereyouwantfile");
        dir.mkdirs();

        Log.d(TAG,"path: "+dir.getAbsolutePath());
        File file = new File(dir, "VERSION_FILENAME");

        FileInputStream f = new FileInputStream(file);

        //FileInputStream fis = context.openFileInput(VERSION_FILENAME);
        BufferedReader reader = new BufferedReader(new InputStreamReader(f));

        String line = reader.readLine();
        Log.d(TAG,"first line versions: "+line);
        while(line != null){
            Log.d(TAG,"line: "+line);
            //Process line how you need 
            line = reader.readLine();
        }

        reader.close();
        f.close();
    }
    catch(Exception e){
        Log.e(TAG,"Error retrieving cached data.");

    } 
```

以下是写作

```
try{

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/whereyouwantfile");
        dir.mkdirs();
        File file = new File(dir, "CONTENT_FILENAME");

        FileOutputStream f = new FileOutputStream(file);

        //FileOutputStream fos = context.openFileOutput(CONTENT_FILENAME, Context.MODE_PRIVATE);
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(f));

        Set<String> keys = Content.keySet();

        for(String key : keys){

            String data = Content.get(key);
            Log.d(TAG,"Writing: "+key+","+data);

            writer.write(data);
            writer.newLine();
        }

        writer.close();
        f.close();

    }
    catch(Exception e){
        e.printStackTrace();
        Log.e(TAG,"Error writing cached data.");

    } 
```

如果您不希望世界其他地方能够看到您的文件，则可以使用私有模式，但在调试时查看它们通常很有用。

# c++ - 直接执行数据

> ID：14733705
> 
> 赞同：1
> 
> 时间：2013-02-06T16:17:44.457
> 
> 标签：c++

使我的程序执行数据的最佳方法是什么。**比如说，我为x86_64**机器编写了（所谓的）编译器：

```
#include <iostream>
#include <vector>

#include <cstdlib>
#include <cstdint>

struct compiler
{

    void op() const { return; }

    template< typename ...ARGS >
    void op(std::uint8_t const _opcode, ARGS && ..._tail)
    {
        code_.push_back(_opcode);
        return op(std::forward< ARGS >(_tail)...);
    }

    void clear() { code_.clear(); }

    long double operator () () const
    {
        // ?
    }

private :

    std::vector< std::uint8_t > code_;

};

int main()
{
    compiler compiler_; // long double (*)();
    compiler_.op(0xD9, 0xEE); // FLDZ
    compiler_.op(0xC3);       // ret
    std::cout << compiler_() << std::endl;
    return EXIT_SUCCESS;
} 
```

但我不知道如何`operator ()`正确实施。我怀疑，我必须将所有内容`code_`放入连续的内存块中，然后转换为`long double (*)();`并调用它。但是有一些困难：

*   我应该在 Windows 上使用`VirtualProtect(Ex)`(+ ) 吗？`FlushInstructionCache`在 Linux 上也有类似的东西？
*   什么是容器，它以正确的方式（即一个一个）可靠地将字节放入内存中？并且还允许获取指向内存块的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:26:40.007

首先，您需要将代码分配为可执行文件[在 Windows 中使用带有“executable”标志的 VirtualAlloc，并使用“MAP_EXECUTABLE”作为标志之一的 mmap]。分配这种内存的大区域可能要容易得多，然后为您的内容提供“分配功能”。您可以使用 virtualprotect 以及 Linux 中的任何相应功能，但我会说首先分配为可执行文件是更好的选择。我不相信您需要刷新指令缓存，因为内存已经分配为可执行文件 - 至少在 x86 上不是 - 而且由于您的指令是 x86 指令，我想这是一个公平的限制。

其次，您需要创建一个指向代码的函数指针之类的东西。像这样的事情应该这样做：

```
typedef void (*funcptr)(void); 

funcptr f = reinterpret_cast<funcptr>(&code_[0]); 
```

应该做的伎俩。

# xamarin.ios - MonoDevelop 的图像目录在 XCode(IB) 上看不到

> ID：14733708
> 
> 赞同：1
> 
> 时间：2013-02-06T16:17:59.530
> 
> 标签：xamarin.ios

在下面显示的我的项目文件编组中，Mono Develop 没有在 XCode 中显示图像目录（组），并且在 xib 接口上看不到它们，在运行时也会崩溃。但是当我将图像放在项目的根目录下时工作正常！

美好的！但是在根目录上看到几十张图片会让事情变得混乱。

这里有详细信息；

*   我的图像构建动作是内容。

*   我尝试通过创建一个名为 Images 的组将它们添加到 Xcode，然后这次将所有图像再次复制到 Mono Develop 的根目录。

我错过了什么吗？

项目

- 图片

---- FaceOff.png

---- 图标

---------CandyButton32x.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:57:02.570

我认为您遇到了 XCode 与 MonoDevelop 集成的限制。

仅当图像位于项目的根目录中时，它们才会显示在 XCode 中。为了解决这个问题，有两种方法可以为 MonoTouch 项目设置图像文件夹：

*   使用 build action `Content`，将您的图像放在任何地方，但如果它们位于项目的根目录中，它们只会显示在 XCode 中
*   使用构建操作`BundleResource`并将所有图像放在`Resources`文件夹中，这与将图像放在项目的根目录中相同，但是您可以将它们很好地打包到子文件夹中

我没有尝试过`BundleResource`XCode 来查看子文件夹是否通过该方法工作。

这是根据我的经验，来自 Xamarin 的人，请随时加入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T19:41:12.233

除了 Jonathan 的出色回答之外，我还使用 BundleResource 和 Resources 文件夹为我的图像进行了良好的组织设置。

*   在文件系统上，我将所有图像都放在一个不错的目录结构中，例如：**img/common/title.png**。

*   然后我将所有图像文件（不是目录）添加到 iOS 项目**资源**文件夹中，使用**“添加文件”**选项并为我选择的文件选择**BundleResource**。

*   当给出复制、移动或链接选项时，因为我的文件在目标目录之外，我选择**“添加文件链接”**选项。

这个程序允许我：

*   愉快地将我所有的图像保存在文件系统上的一个有组织的目录结构中
*   可以在 XCode Interface Builder 中访问它们
*   在代码中以 root 身份访问它们，例如 Image.FromFile("title.png")
*   Easily update them in the filesystem and have them automatically change in Xamarin Studio

# git - 如何将“开发”分支推送到远程“原点”？

> ID：14733712
> 
> 赞同：20
> 
> 时间：2013-02-06T16:18:07.553
> 
> 标签：git, github, git-flow

当我这样做时`git flow init`，它会创建一个`master`和`develop`分支。当我添加遥控器时，我会这样做`git remote add origin git@github.com:NewB/our-repo.git`。现在我已经在本地 repo 上初始化了 git flow，并添加了远程 repo。在我这样做之后，`git push -u origin master`我有`master`我的起源，但没有`develop`分支。分支有`git flow publish`吗？`develop`我所看到的只是`publish`分支。git-flow 是否希望我只使用常规 git 并执行？`feature``release``git push origin develop`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T16:23:14.423

> git-flow 是否希望我只使用常规 git 并执行`git push origin develop`？

是的，这就是你所做的。只需使用常规的 git 命令。

我认为这种设计选择的原因是：
开发分支只创建一次。不需要辅助命令来发布它。
功能分支一直在创建。在这里，一个辅助命令，嗯...，很有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T09:24:41.007

我发现这个备忘单对理解 git flow 非常有帮助：[备忘单](http://danielkummer.github.io/git-flow-cheatsheet/)。

如果你尊重 git flow 原则，你不应该发布你的**开发**分支，在协作时你应该发布一个**特性**，当你发布到 master 时你应该使用一个**release**。

我就是这样使用它的。

我希望这对你有帮助。

# c++ - 未解决的链接错误

> ID：14733713
> 
> 赞同：0
> 
> 时间：2013-02-06T16:18:08.947
> 
> 标签：c++, function, mfc, dialog, lnk2019

我在尝试编译时收到此错误。

```
error LNK2019: unresolved external symbol "public: void __thiscall Serial::WritePort(char * const)" (?WritePort@Serial@@QAEXQAD@Z) referenced in function "public: void __thiscall CThermotronDlg::OnBnClickedButton2(void)" (?OnBnClickedButton2@CThermotronDlg@@QAEXXZ) 
```

我已经包含了所有必需的头文件，但是当我尝试在我的主 dialog.cpp 中调用我的 WritePort 函数（位于我的 sConfig.cpp 中）时，我收到了这个链接错误。此外，每个 .cpp 文件都在同一个文件夹中，所以我不想在下面的不同位置引用文件是用于 WritePort 函数和它被调用的块。

写端口

```
void WritePort(char buffer[])
{

HANDLE sSerial = CreateFile(L"COM3",GENERIC_READ|GENERIC_WRITE,0,0,OPEN_EXISTING,0,0);
OpenPort();
DWORD bytes;
WriteFile(sSerial, buffer,sizeof(buffer),&bytes,NULL);
} 
```

堵塞

```
void CThermotronDlg::OnBnClickedButton2() 
```

{

```
CString str; str.Format(L"%d",Index);
LPTSTR Dwell = new TCHAR[1000];
USES_CONVERSION;
char* buffer =T2A(Dwell);
MyListEx.GetItemText(Index,1,Dwell,1000);

Serial Port;
Port.WritePort(buffer);

AfxMessageBox(Dwell,MB_OK,NULL); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:20:18.520

不应该

```
void WritePort(char buffer[]) 
```

是

```
void Serial::WritePort(char buffer[]) 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:20:14.417

函数`WritePort`必须是`Serial`类的一部分，因为您正在使用它`Port.WritePort(buffer)`而不是`WritePort(buffer)`

```
void Serial::WritePort(char buffer[])
{
bool umm;
HANDLE sSerial = CreateFile(L"COM3",GENERIC_READ|GENERIC_WRITE,0,0,OPEN_EXISTING,0,0);
OpenPort();
DWORD bytes;
umm = WriteFile(sSerial, buffer,sizeof(buffer),&bytes,NULL);
} 
```

# php - https:// 链接自行转到 :443

> ID：14733714
> 
> 赞同：1
> 
> 时间：2013-02-06T16:18:11.677
> 
> 标签：php, ssl, https

我的页面中有几个链接。当我在 中打开页面时`http://`，它工作得很好（正确地转到`http://www.example.com/path/to/page`。但是当在 中打开时`https://`，当我单击链接时，它却给我带来`www.example.com:443/path/to/page`了 400 错误：

```
Bad Request

Your browser sent a request that this server could not understand.
Reason: You're speaking plain HTTP to an SSL-enabled server port.
Instead use the HTTPS scheme to access this URL, please. 
```

我确定我的链接目标很好（我使用相对路径）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:36:11.210

HTTPS 的默认端口是 443，因此所有对 HTTP 的调用都会默认路由到 http:/XYZ:443/。如果您想通过 https 访问 url，您需要在您的网络服务器中启用/设置 https。

如果您使用的是 apache，请尝试以下链接：[http ://docs.oracle.com/cd/A95431_01/install/ssl.htm](http://docs.oracle.com/cd/A95431_01/install/ssl.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:22:10.483

您的域或本地主机是否有 SSL 证书？

“您正在对启用 SSL 的服务器端口使用纯 HTTP。” 尝试更改您的 SSL 设置。

# dependency-injection - ZF2 服务定位器和依赖注入

> ID：14733715
> 
> 赞同：9
> 
> 时间：2013-02-06T16:18:13.010
> 
> 标签：dependency-injection, phpunit, zend-framework2, service-locator

Zend 的优秀人员和许多博主都在推荐 ZF2 的新服务定位器/管理器，而不是其内置的依赖注入系统。

我的问题是，将模拟对象注入服务是否可能/方便？我在模块的 PHPUnit 引导程序中看到了一些稍微笨拙的尝试；但是有没有像 ZF1 + Yadif 这样干净方便的服务系统使用方法呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T14:50:40.813

是的，您可以将模拟对象注入到服务中。对于单元测试，服务定位器甚至没有发挥作用：

```
$service = new MyService($mockDependency); 
```

如果您正在编写复杂的集成测试，您需要使用服务定位器来配置依赖关系和模拟图，您可以设置类似于我对模块所做的事情：

```
$serviceLocator   = ServiceManagerFactory::getServiceManager(); // see comment below
$dbConnectionMock = $this->getMock('My\Db\Connection');

$serviceLocator->setAllowOverride(true);
// replacing connection service with our fake one
$serviceLocator->setService('connection_service_name', $dbConnectionMock);

$service = $serviceLocator->get('service_that_uses_a_connection'); 
```

您可以在`ServiceManagerFactory`https://github.com/doctrine/DoctrineORMModule/blob/0.7.0/tests/DoctrineORMModuleTest/Util/ServiceManagerFactory.php[找到](https://github.com/doctrine/DoctrineORMModule/blob/0.7.0/tests/DoctrineORMModuleTest/Util/ServiceManagerFactory.php)一个示例`DoctrineORMModule`

假设它`service_that_uses_a_connection`是由注入`connection_service_name`它的工厂实例化的。

如果您愿意，您仍然可以使用`Zend\Di`，但在这种情况下并不需要它。

# security - 是否有 Web 应用程序安全审计工具可以生成报告，显示测试了哪些攻击类型？

> ID：14733720
> 
> 赞同：0
> 
> 时间：2013-02-06T16:18:24.930
> 
> 标签：security, security-testing

我想从测试中生成一份基本报告，我希望测试涵盖 OWASP 前 10 名。我查看了 OWASP ZAP 报告，但这只是突出了任何问题，而不是说 XY 和 Z 已经过测试而没有任何证据与详细说明发现的问题一起发生。

这不是关于如何测试 Web 应用程序的问题。问题是：是否有任何工具可以生成报告，说明测试的内容以及漏洞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:34:02.790

您可以通过选择 Analyse.../Scan Policy 查看 ZAP 正在测试的内容

我们也开始在[https://code.google.com/p/zap-extensions/wiki/V2Extensions](https://code.google.com/p/zap-extensions/wiki/V2Extensions)下记录规则（查看左侧树下的项目）。

请注意，没有任何工具能够自动测试所有 OWASP 前十名——您确实需要执行手动测试。

ZAP 报告确实需要改进，我希望它包括测试内容和发现内容的列表。ZAP 是一个社区项目——想从事这个工作吗？;)

西蒙（ZAP 项目负责人）

# database - 创建一个作为另一个 dbf 子集的 dbf（按标准）？

> ID：14733721
> 
> 赞同：1
> 
> 时间：2013-02-06T16:18:30.223
> 
> 标签：database, ms-access, dbf

我有一个需要导入 MS Access 的 dbf，但它太大而无法直接导入（它是 4 GB .dbf），尽管我不需要整个东西。我只需要 .dbf 的一个子集，其中日期对应于当前年份（2013 年），但不知道如何创建一个新的、更小的包含数据的 DBF，以便我可以导入它。

理想情况下，这是我希望每天自动化的事情（4 GB dbf 每天早上都会被转储，所以我需要每天重新获得相同的削减）。

任何意见，将不胜感激。谢谢！

当前尝试的查询：

```
select * into destTable IN '\\path\to\backend.mdb'
FROM sourceDBF
WHERE (((sourceDBF.DATE)>"X2*")); 
```

（日期部分很奇怪，因为日期存储在特定 DBF 中的方式）

错误（在运行查询大约 15-20 分钟后）：http: [//i49.tinypic.com/b8wb5e.png](http://i49.tinypic.com/b8wb5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:00:42.357

我知道 .DBF 文件通常与 dBASE、FoxPro、Visual FoxPro 和较旧的 Clipper 应用程序相关联。它们都是 32 位的，不允许单个文件超过 2 gig 文件的限制。

也就是说，Sybase 有一款名为 Advantage Database Server 的产品。除了作为自己的 SQL 数据库之外，它还被设计为向后兼容以支持 Visual Foxpro 社区。使用它的工具，您基本上可以直接连接到具有独立 .dbf 文件（甚至是数据库容器 .dbc 的一部分）的路径并打开文件查看它们，对它们运行查询等，它会允许超越 2 gig 文件限制的能力。

我强烈怀疑可能是这种情况。如果是这样，您可能可以像下载其他工具一样下载他们的工具，例如 MySQL 或 SQL 服务器管理工​​具，您可以在其中附加到数据库、进行表管理、运行查询等。

如果可行，您应该能够使用它，编写查询并选择仅包含您正在寻找的记录集（2013 年日期）的新表。然后，您的 Access 应该能够从那个较小的表中进行查询。

我使用 sybase 优势服务器在 Google 上直接搜索

出现了很多东西。

希望这可以帮助。

# objective-c - 在 NSArray 上调用 objectAtIndex 时出现 NSRangeException

> ID：14733728
> 
> 赞同：0
> 
> 时间：2013-02-06T16:18:52.010
> 
> 标签：objective-c, nsarray, indexoutofboundsexception

我收到此错误，但我不明白为什么：

> ***由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__ NSCFArray objectAtIndex]：索引 (171053968) 越界 (226)”

```
- (void)makeArrayOfGrade{

    BOOL *alreadyAdded;
    for (int a = 0; a <= [allData count]-1; a++) {
        NSIndexPath *path = [NSIndexPath indexPathForRow:a inSection:0];
        NSDictionary *dict = [allData objectAtIndex:path];

        if ([[dict objectForKey:@"grade"] isEqualToString: @"5 класс"]) {

            /*     for (int i = 0; i <= [allData count]; i++){
             NSIndexPath *inPath = [NSIndexPath indexPathForRow:i inSection:0];
             NSDictionary *inDict = [allData objectAtIndex:path];
             if ([dict objectForKey:@"subject"]==[inDict objectForKey:@"subject"]) {
             added=YES;
             }
             }
             }
             if (added==NO) { */
            [dataForEachGrade addObject:dict];
            NSLog(@"added");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:18:38.570

问题可能是您请求的对象`allData`位于不存在的索引处。即，您的表格视图中的数据不适合`allData`.

# r - 无法更改 ggplot/geom_text 中的字体

> ID：14733732
> 
> 赞同：49
> 
> 时间：2013-02-06T16:19:07.550
> 
> 标签：r, ggplot2

我无法在 geom_text 中设置我的字体。这是我尝试过的：

```
 labels_test<-data.frame(a=c("a","b","c"),b=c(1:3),c=c(3:1))
    # works
    ggplot () + geom_text(data=labels_test,aes(b,c,label=a),color="blue")
    # does not work: 
    ggplot () + geom_text(data=labels_test,aes(b,c,label=a),color="blue",family="Times")
    # error message:  In grid.Call.graphics(L_text, as.graphicsAnnot(x$label), x$x, x$y,:
    # Font family not found in Windows font database 
```

[我已经按照此处](http://blog.revolutionanalytics.com/2012/09/how-to-use-your-favorite-fonts-in-r-charts.html)的说明导入了所有字体。有什么想法还有什么问题吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-06T16:31:27.340

我会尝试”

```
windowsFonts(Times=windowsFont("TT Times New Roman")) 
```

在执行此操作时，您明确指定了 Windows 字体映射。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-03-02T17:55:35.917

其他答案没有解决我的问题（Windows 10）。

我的系统的关键是`extrafont::loadfonts(device="win")` ***在*** `library(ggplot2)`.

```
extrafont::loadfonts(device="win")
#extrafont::fonttable()
#extrafont::font_import("C:/Windows/Fonts/", pattern = "RobotoCondensed")
library(ggplot2) 
```

**字体位置的常见问题：**

我以前从一个随机文件夹中安装了字体`extrafont::font_import()`。因此`extrafont::fonttable()`引用了我`C:\Windows\Fonts\`文件夹中的文件。为了解决这个问题，我重置了我`extrafonts::fonttable()`的 with`install.packages("extrafontdb")`以清除对不同位置字体的引用。

**关于保存的编辑：**

深入兔子洞。储蓄是一个额外的挑战。为了做到`extrafont::loadfonts(device="pdf")`这一点，我必须确保我的字体`extrafont::fonttable()`没有相同的姓氏和粗体/斜体状态。我进行了编辑`extrafont:::fonttable_file()`以解决我家中任何重复的粗体/斜体字体。使用 Roboto Condensed 我将浅色字体的字体系列重命名为“Roboto Condensed Light”。

保存`ggsave(device="pdf")`然后工作。在 acrobat 中打开文件，字体显示不正确。我尝试使用 ghostscript 嵌入字体以及使用 cairo_pdf 设备。最简单和最实用的解决方案是在 Illustrator 中打开 .pdf 文件（那里的字体显示正常），然后立即将它们重新保存为 .pdf。

**关于保存的编辑 2：**

另存为 .eps 是在 illustrator 和 acrobat 中保存文件的唯一方法。结果是完美的。`ggsave(g, file="Figure.eps", fonts=c("FONT FAMILIES USED", "Roboto Condensed", "Roboto Condensed Light"))`

**最终绘图代码：**

这是我在绘图之前使用的最后一组调用。注释是只需要运行一次的设置命令。

```
# Plotting
extrafont::loadfonts(device="pdf")
extrafont::loadfonts(device="postscript")
# extrafont::font_import("C:/Windows/Fonts/", pattern = "RobotoCondensed", prompt = F)
# extrafont::fonttable()
# C:/Program Files/R/R-3.3.1/library/extrafontdb/fontmap/ - Change lights to "Roboto Condensed Light"
# After ggsave(device="pdf") or ggsave(device="eps") open and resave the file in Illustrator
library(hrbrthemes)
library(ggplot2) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-11-21T17:01:21.780

您必须使用以下命令导入系统字体：

```
font_import(paths = NULL, recursive = TRUE, prompt = TRUE,pattern = NULL) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-21T08:34:28.740

我在这里尝试了不同的解决方案，但没有一个对我有用（win10，R 3.4.3）。这对我有用：

```
install.packages("extrafont")
library(extrafont)
loadfonts(device = "win") 
```

不管我是在之前还是之后`library(ggplot2)`

资料来源：

1.  [https://cran.r-project.org/web/packages/extrafont/extrafont.pdf](https://cran.r-project.org/web/packages/extrafont/extrafont.pdf)
2.  [更改 ggplot2 中的字体](https://stackoverflow.com/questions/34522732/changing-fonts-in-ggplot2)

# python - 将重音字符写入 Oracle

> ID：14733735
> 
> 赞同：1
> 
> 时间：2013-02-06T16:19:13.557
> 
> 标签：python, oracle

我必须更新现有脚本，以便将一些数据写入 Oracle 10g 数据库。脚本和数据库都在同一台 Solaris 10 (Intel) 机器上运行。Python 是 v2.4.4。

我正在使用 cx_Oracle 并且可以毫无问题地读取/写入数据库。但是我正在编写的数据包含未正确写入的重音字符。重音字符变成一个倒置的问号。

该值是使用此代码从二进制文件中读取的，位于：

```
class CustomerHeaderRecord:
    def __init__( self, rec, debug = False ):
        self.record = rec
        self.acct   = rec[ 84:104 ] 
```

并且`acct`变量的内容正确显示在屏幕上。

下面是写入数据库的代码（`acct`值作为`val_1`变量传入）：

```
class MQ:
    def __init__( self, rec, debug = False ):
        self.customer_record = CustomerHeaderRecord( rec, debug )
        self.add_record(self.customer_record.acct, self.cm_custid)

    def add_record(self, val_1, val_2):
        cur = conn.cursor()
        qry = "select count(*) from table_name where value1 = :val1"
        cur.execute(qry, {'val1':val_1})
        count = cur.fetchone()
        if count[0] == 0:
            cur = conn.cursor()
            qry = "insert into table_name (value1, value2) values(:val1, :val2)"
            cur.execute(qry, {'val1':val_1, 'val2':val_2})
            conn.commit() 
```

该`acct`值无法正确进入数据库。我用谷歌搜索了一堆关于 unicode 和 UTF-8 的东西，但还没有找到任何对我有帮助的东西。在数据库中，NLS_LANGUAGE 是“American”，NLS_CHARACTERSET 是“AL32UTF8”。

`acct`在插入之前/期间我是否需要对变量“做某事” ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:37:46.877

您的输入文件似乎以 Latin-1 编码。将此解码为`unicode`数据；cx_Oracle 将为您完成剩下的工作：

```
acct    = rec[ 84:104 ].decode('latin1') 
```

或者使用[`codecs.open()`函数](http://docs.python.org/2/library/codecs.html#codecs.open)打开文件进行自动解码：

```
inputfile = codecs.open(filename, 'r', encoding='latin1') 
```

阅读`inputfile`将为您提供`unicode`数据。

在插入时，`cx_Oracle`库会将`unicode`值编码为 Oracle 期望的正确编码。您*确实*需要在连接之前将`NLS_LANG`环境变量设置为`AL32UTF8`，无论是在 shell 中还是在 Python 中：

```
os.environ["NLS_LANG"] = ".AL32UTF8" 
```

您可能需要查看[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)以了解更多详细信息。

# shell - export works in command line but not in a bash script

> ID：14733742
> 
> 赞同：0
> 
> 时间：2013-02-06T16:19:23.427
> 
> 标签：shell, unix, variables

I tried to write a script in order to automate the switching between php5.3 and 5.4 in my path. Although the export works when I execute it, it does nothing when it runs inside the script.

Here is my script

```
#!/bin/bash
# chphp
# Switch between php versions 5.3 and 5.4

FIXED_PATH=/here/is/my/path

if [ "$1" != "-v" ]
then
    echo "Wrong usage of the script.\n"
else
    if [ "$2" == 3 ]
    then
            export PATH="$FIXED_PATH:/path/to/php-5.3/bin"
            export PHP_INI_SCAN_DIR=""
    elif [ "$2" == 4 ]
    then
            export PATH="$FIXED_PATH:/path/to/php-5.4/bin"
            export PHP_INI_SCAN_DIR="/path/to/php-5.4/etc/php-dbg.d"
    else
            echo "Wrong usage of the script.\n"
    fi
fi 
```

I also tried the following, which I found by searching for similar questions, but they didn't work

this

```
. ./chphp.sh -v 3 
```

and this

```
source ./chphp.sh -v 3 
```

Any suggestions or ideas how I could fix it or do things differently?

EDIT: The code was missing an else after the first echo, as Kent noticed and which I edited. The code now runs with both ways now!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:25:11.417

`$1`仅当不是时，您的脚本才会设置**vars** `-v`

如果`$1`是`-v`，您的脚本什么也不做。首先检查你的脚本`if-then`

这有帮助吗？（设置php5.3的东西）

```
source ./chphp.sh foo 3 
```

# jquery - jQuery Parse JSON URL

> ID：14733744
> 
> 赞同：5
> 
> 时间：2013-02-06T16:19:32.030
> 
> 标签：jquery, json

I am trying to get the JSON data from a URL that outputs the following JSON data:

```
[
 {
    "belief_desc":"Jesus Died For Your Sins",
    "0":"Jesus Died For Your Sins"
 },
 {
    "belief_desc":"People Are Sinful",
    "0":"People Are Sinful"
 },
 {
    "belief_desc":"God Loves You",
    "0":"God Loves You"
 },
 {
    "belief_desc":"We Must Receive Christ",
    "0":"We Must Receive Christ"
 }
] 
```

(Note: it is only formatted in this question for easier reading.)

Now I am trying to parse through it using this simple jQuery script:

```
<script>
    var url = "http://mySite.com/data.json";
    $.getJSON(url, function(data){
        alert(data);
        });
</script> 
```

I am getting no data from the URL as the alert will not show. Any ideas on why this is not working?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:26:58.973

跨域你不能做简单的 JSON。

[跨域 jsonp 的基本操作方法](https://stackoverflow.com/questions/5463256/basic-how-to-for-cross-domain-jsonp)

阅读跨域请求。

# c++ - opencv cannot load jp2 image files

> ID：14733747
> 
> 赞同：3
> 
> 时间：2013-02-06T16:19:39.557
> 
> 标签：c++, opencv, load, jpeg2000

I am using opencv 2.3.1 on Debian. The following code fails to load a given jpeg 2000 file.

```
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include <vector>
#include <iostream>

int main()
{
    IplImage* img_temp = cvLoadImage("delmeg.jp2", CV_LOAD_IMAGE_ANYCOLOR);
    //IplImage* img_temp = cvLoadImage("delmec.jp2");
    if(img_temp == NULL)
    {
        std::cout << "Can't load the image.." << std::endl;
        return -1;
    }
    cv::Mat img(img_temp);

    if (img_temp != NULL){
        cvReleaseImage(&img_temp);
    }
    return 0;
} 
```

I used the following command to compile it:

```
g++ -Wall -g -I /usr/include/ testopencv2x.cpp -o testopencv2x -lopencv_core -lopencv_imgproc -lopencv_highgui 
```

Anybody know what I am missing here?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:00:22.397

我不知道 2.3.1，但这是[文档中关于 2.4.3](http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html#explanation)的内容：

> **注意**：OpenCV 支持图像格式 Windows 位图 (bmp)、便携式图像格式 (pbm, pgm, ppm) 和 Sun raster (sr, ras)。**借助插件（如果您自己构建库**，则需要指定使用它们，但在我们默认提供的软件包中）您还可以加载图像格式，如 JPEG（jpeg、jpg、jpe）、**JPEG 2000**（jp2 -在 CMake 中代号为 Jasper）、TIFF 文件（tiff、tif）和可移植网络图形（png）。此外，OpenEXR 也是一种可能。

因此，请确保您构建 OpenCV 以支持这种格式。

# log4j - After Fixpack 45 for websphere 6.1 log4j creates file but not populate it

> ID：14733749
> 
> 赞同：2
> 
> 时间：2013-02-06T16:19:41.437
> 
> 标签：log4j, websphere-6.1

I have a strange problem with my component that is a TrustAssociationInterceptor and it starts up with the Application Server, so it's not deployed.
After the upgrade to version 45 of my websphere 6.1 my log4j does not log into the file I've specified in the properties of my custom component but only into the SystemOut.log . I can change the logging level only by the WebSphere console. It seems websphere has the control of log4j. The log file of the custom component is created but not populated.

Has anyone any ideas on how to resolve this?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T07:54:32.457

您是否部署了 6.1.0-WS-WASSDK-WinX32-FP0000045.pak 和 6.1.0-WS-WAS-WinX32-FP0000045.pak，这与 SDK 有什么关系吗？

# php - Passing an array via POST in PHP to be inserted into MySQL

> ID：14733750
> 
> 赞同：0
> 
> 时间：2013-02-06T16:19:42.593
> 
> 标签：php, mysql, post

I have a form that allows users to input classes and activities into multiple fields, these fields are declared like this :

```
 label for ="classact">Classes and Activities</label>
        <input type = "text" name = "classact[0]" value ="" id ="classact[0]">
        <input type = "text" name = "classact[1]" value ="" id ="classact[1]">
        <input type = "text" name = "classact[2]" value ="" id ="classact[2]"> 
```

When the form is passed this is the code that handles in the insert:

```
 $maininsert = "INSERT INTO `camptest`
        (`name`, `city`, `phone`, `photo`)
        VALUES
        ('$_POST[name]', '$_POST[city]', '$_POST[phone]', '$photoinfo')
        SET @lid = LAST_INSERT_ID()
        ";

    $classactinsert = "INSERT INTO `class_act`
                (`cid`";

    for($i = 0; $i < 3; $i++)
    {
       if(isset($_POST['classact'][$i]))
       {
          $temp = $i+1; 
          $classactinsert = $classactinsert . ",`act$temp`";
       }
    }

   $classactinsert = $classactinsert . ")
                                VALUES
                                ('@lid'";

   for($i = 0; $i < 3; $i++)
   {
      if(isset($_POST['classact'][$i]))
      {
         $classactinsert = $classactinsert . ",'$_POST[classact][$i]";
      }
   }

  $classactinsert = $classactinsert . ")";                                  

  $indata = $maininsert . $classactinsert;

  $result = mysql_query($indata); 
```

I realize thats alot of code, but upon filling out the form and submitting this is the query that gets generated:

```
 INSERT INTO `camptest` (`name`, `city`, `phone`, `photo`) VALUES ('Multiple Activities', 'Nowhere', '555-555-1111', 'images/51127f6b06d1e.jpg') SET @lid = LAST_INSERT_ID() INSERT INTO `class_act` (`cid`,`act1`,`act2`,`act3`) VALUES ('@lid','Array[0],'Array[1],'Array[2]) 
```

The query is not inserting, but its not throwing back any errors either, even though I have them turned on.

My main question is, what am I doing wrong that is causing the values to act1, act2, and act3 to show up as Array[0], Array[1], and Array[2]?

My secondary question is, am I even going about this the right way? I'm a little new to php and I'm afraid I might be doing this the hard way?

Any help would be appreciated, let me know if you need any additional information.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:46:00.540

它不会插入任何东西，因为（除其他外）您的查询字符串没有正确构建。

```
('@lid','Array[0],'Array[1],'Array[2]) 
```

撇号搞砸了。我想建议一种（在我看来）更简洁、更有条理的方式来执行您的任务：

**注意：您显然正在使用 mysql_*-stack，所以我的示例也是基于它。但请注意，这已被弃用。请使用 mysqli 甚至更好：[PDO](http://www.php.net/manual/en/book.pdo.php)代替。**

```
<?php

$maininsert = "INSERT INTO `camptest`
              (`name`, `city`, `phone`, `photo`)
              VALUES
              ('{$_POST['name']}', '{$_POST['city']}', '{$_POST['phone']}', '$photoinfo')";

//perform the main insert and fetch the insert id
mysql_query($maininsert);

$last_id = mysql_insert_id();

// Put the keys and values of the acts in arrays. We can already 
// populate them with the one key-value-pair we already know
$act_keys = array('cid');
$act_values = array($last_id);

foreach($_POST['classact'] as $key => $value) {
  //walk through the POSTed acts and add them to the corresponding array
  $act_keys[] = 'act'.($key+1);
  $act_values[] = $value;
}

//Now build the whole string:
$insert_acts = "INSERT INTO `class_act` 
               (`" . implode("`, `", $act_keys) . "`) 
               VALUES 
               ('" . implode("', '", $act_values) . "')";

//and finally perform the query:
mysql_query($insert_acts); 
```

[另请注意，此代码在SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)方面极易受到攻击，绝对*不应在生产中使用*！！！确保使用准备好的语句（如 PDO）或/和正确清理您的输入。

此外，此解决方案只是我的建议，也是众多方法之一。但是，嘿，您征求意见 :) PHP 是一种*非常*灵活的语言，所以很容易完成工作，但是有很多方法可以完成，所以总是有机会选择一个难看的难的。其他，特别是强类型语言可能会通过设计阻止这种情况。但是 PHP 真的很容易学习，我相信你的代码会逐渐改进 :)

我注意到的另一件事：您不需要在 HTML 中指定数组键，您只需要明确它是一个`[]`名称后面的数组。另外，我不确定`id`您使用的 -attributes 是否有效，但您可能想要使用更简单的东西：

```
<input type="text" name="classact[]" value="" id="classact1">
<input type="text" name="classact[]" value="" id="classact2">
<input type="text" name="classact[]" value="" id="classact3"> 
```

在下一步中，您可能需要稍微重构代码以使其更具结构化和可读性。由于您正在执行一项任务，即两次“将某些内容插入表格”，我们还可以从中创建一个可重用的功能：

```
<?php 

function my_insert($table, $data) {
  // We leverage the flexibility of associative arrays
  $keys   = "`" . implode("`, `", array_keys($data)) . "`";
  $values = "'" . implode("', '", $data) . "'";

  mysql_query("INSERT INTO `{$table}` ({$keys}) VALUES ({$values})");

  return mysql_insert_id(); //This might come in handy...
}

//in order to use this function, we now put our data into associative arrays:
$class_insert = array(
  'name'  => $_POST['name'],
  'city'  => $_POST['city'],
  'phone' => $_POST['phone'],
  'photo' => $photoinfo
);

$class_insert_id = my_insert('camptest', $class_insert); //and pass it to the function

// You can either build the array while looping through the POSTed values like above, 
// or you can pass them in directly, if you know that there will always be 3 values:
$activities_insert = array(
  'cid'  => $class_insert_id,
  'act1' => $_POST['classact'][0],
  'act2' => $_POST['classact'][1],
  'act3' => $_POST['classact'][2]
); 

$activities_insert_id = my_insert('class_act', $activities_insert); 
```

肯定有足够的改进和优化空间 - 只是想向您展示 PHP 有多棒:-P

# c# - How to generate 8 digits UNIQUE & RANDOM number in C#

> ID：14733752
> 
> 赞同：4
> 
> 时间：2013-02-06T16:19:50.157
> 
> 标签：c#, numbers, unique

Does any body know, how to create unique & random 8 digits number? There are methods to create random numbers, but my requirement is to create an unique also it should be a random number with 8 digits. Any idea?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T16:36:53.810

```
Random rnd = new Random();
int myRandomNo= rnd.Next(10000000, 99999999); // creates a 8 digit random no. 
```

# dll - JNA - output parameter in DLL

> ID：14733753
> 
> 赞同：0
> 
> 时间：2013-02-06T16:19:51.327
> 
> 标签：dll, parameters, jna, output

How can I get the output parameter, which is in a method in a C++ DLL?

```
public class MyClass {

    public int error = 0;

    public String MyMethod(){
        String str = null;

        error = error(str);

        if (error == 0){
            return str;
        }
        else
            return null;
    }

    public native int error(String outputparam);

    static {
        Native.register("MyDLL");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:19:56.527

请参阅此[JNA 常见问题解答条目](https://github.com/twall/jna/blob/master/www/FrequentlyAskedQuestions.md#how-do-i-read-back-a-functions-string-result)，其中解释了如何从用作参数的缓冲区中提取“返回”字符串。

# javascript - Toggling visibility with javascript versus with CSS

> ID：14733754
> 
> 赞同：0
> 
> 时间：2013-02-06T16:19:53.917
> 
> 标签：javascript, css, toggle

Just found out about [the CSS tilde selector](https://stackoverflow.com/a/10782072/581766) and it seems like it could be an elegant way to handle toggling input visibility.

The use-case I have in mind is when you only want to display an input to the user when they have checked a checkbox. Currently I do this with javascript and attach listeners to each checkbox, which then search through the DOM to find the appropriate input and toggle a class.

So the *question* is, why is this bad? And if it isn't, why isn't this prevalent? Why do we do this with .js rather than CSS? It seems to me they are both manipulating the presentation layer in fairly similar ways...

Bonus points for resources.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:23:41.303

HTML 是模型，它包含数据
CSS 是视图，它包含样式
JS 是控制器，它包含交互

这种 MVC 结构实现了强大的责任委派。当您想更改页面上小部件的状态时，可以使用 JavaScript 更改可用的样式挂钩：

[jQuery 用于简洁]

```
$('#button').on('click', function () {
    $('#widget').toggleClass('hidden');
}); 
```

[CSS：]

```
.hidden {
    display: none;
} 
```

使用此结构可以轻松更改交互的执行方式。如果您稍后决定小部件应该是动画的，这是一个简单的更改。

使用 JavaScript 还具有向后兼容的优势。禁用 JavaScript 的用户比例非常少。虽然我强烈建议支持禁用 JS 的人，但通常可以通过默认显示所有内容并仅为启用 JS 的用户隐藏内容来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:29:36.813

我会说，如果您可以摆脱使用波浪号选择器或一般的 css，那么就去做吧。CSS imho 是一种更简洁、通常更简洁、性能更优越的方式来完成与在 js 中切换项目相同的事情。另外，对波浪号的浏览器支持非常好 - 请参阅[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

有时您必须使用 javascript 来完成此操作，例如要隐藏的元素不是相关元素的同级或后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:22:37.327

> 我想到的用例是当您只想在用户选中复选框时向用户显示输入。

如果您打算为此使用[`:checked`](https://developer.mozilla.org/en-US/docs/CSS/%3achecked)选择器，您的应用程序将无法在旧浏览器（IE < 9）中运行。如果你对这个限制没意见，也就是说，只关心现代浏览器，CSS 也可以。

如果用户启用了 JS，使用 JS 可以确保您的网站也可以在旧版浏览器上运行。

您也可以混合使用这两种方法，即使禁用 JS 以及启用 JS 的旧浏览器，它也能确保您的页面在现代浏览器中正常工作。

`<noscript>`检测浏览器是否禁用了 JS（例如使用内部样式表）通常比确定浏览器是否支持某些 CSS 选择器更容易。
因此，使用 JS 解决方案可以让您轻松放置免责声明，要求用户启用 JS 以使页面正常工作。

但是，如果您的网站不是针对可能使用 IE8 及以下版本的公众，那么 CSS 解决方案就可以了。

# ajax - 通过 AJAX 加载 Handlebars 模板返回文档对象而不是字符串

> ID：14733756
> 
> 赞同：1
> 
> 时间：2013-02-06T16:20:02.960
> 
> 标签：ajax, handlebars.js

我正在加载这个 Handlebars.js 模板：

```
<ul></ul>

```

使用 AJAX 使用以下代码

```
$.ajax({
    url : 'collection.handlebars',
    success : function (data) {
        Handlebars.templates["collection"] = Handlebars.compile(data);
    },
    async : false
}); 
```

模板编译失败并在浏览器控制台中显示以下消息：

```
Uncaught Error: You must pass a string to Handlebars.compile. You passed [object Document] 
```

调试后我注意到`data`成功回调中返回的是 HTML 文档而不是字符串。但是，如果我将模板更改为：

```
<ul></ul>

```

成功回调中的`data`以字符串形式接收，一切正常。

我正在使用 Handlebars 1.0 RC2 和 Chrome 24。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T06:54:01.513

您需要为 ajax 指定数据类型：

```
$.ajax({
    url : 'collection.handlebars',
    success : function (data) {
        Handlebars.templates["collection"] = Handlebars.compile(data);
    },
    dataType: "text",
    async : false
}); 
```

# c - printf() formatting for hexadecimal

> ID：14733761
> 
> 赞同：238
> 
> 时间：2013-02-06T16:20:07.007
> 
> 标签：c, printf, hex

Why, when printing a number in hexadecimal as an 8 digit number with leading zeros, does `%#08X` *not* display the same result as `0x%08X`?

When I try to use the former, the `08` formatting flag is removed, and it doesn't work with just `8`.

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2013-02-06T16:24:43.640

该`#`部分`0x`在输出字符串中为您提供了一个。`0`和`x`计数部分中列出的“8”个字符`08`。如果您希望它是相同的，您需要要求 10 个字符。

```
int i = 7;

printf("%#010x\n", i);  // gives 0x00000007
printf("0x%08x\n", i);  // gives 0x00000007
printf("%#08x\n", i);   // gives 0x000007 
```

改变 , 的大小写`x`也会影响输出字符的大小写。

```
printf("%04x", 4779); // gives 12ab
printf("%04X", 4779); // gives 12AB 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-02-06T16:25:22.863

“0x”计入八个字符数。你需要`"%#010x"`.

请注意，`#`不要*将*0x 附加到 0 - 结果将是`0000000000`- 所以你实际上可能应该只是使用`"0x%08x"`。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-02-06T16:25:35.813

转换必须在`%#08X`值之前加上`0X`; 这是标准要求的。标准中没有证据表明`#`应该改变`08`规范部分的行为，除了`0X`前缀被计为长度的一部分（所以你可能想要/需要使用`%#010X`。如果像我一样，你喜欢你的十六进制呈现为`0x1234CDEF`, 那么你必须使用`0x%08X`来达到预期的结果。你可以使用`%#.8X`and 也应该插入前导零。

尝试以下代码的变体：

```
#include <stdio.h>

int main(void)
{
    int j = 0;
    printf("0x%.8X = %#08X = %#.8X = %#010x\n", j, j, j, j);
    for (int i = 0; i < 8; i++)
    {
        j = (j << 4) | (i + 6);
        printf("0x%.8X = %#08X = %#.8X = %#010x\n", j, j, j, j);
    }
    return(0);
} 
```

在[RHEL](https://en.wikipedia.org/wiki/Red_Hat_Linux) 5 机器上以及[Mac OS X v10.7.5](https://en.wikipedia.org/wiki/Mac_OS_X_Lion) (Lion) 上，输出为：

```
0x00000000 = 00000000 = 00000000 = 0000000000
0x00000006 = 0X000006 = 0X00000006 = 0x00000006
0x00000067 = 0X000067 = 0X00000067 = 0x00000067
0x00000678 = 0X000678 = 0X00000678 = 0x00000678
0x00006789 = 0X006789 = 0X00006789 = 0x00006789
0x0006789A = 0X06789A = 0X0006789A = 0x0006789a
0x006789AB = 0X6789AB = 0X006789AB = 0x006789ab
0x06789ABC = 0X6789ABC = 0X06789ABC = 0x06789abc
0x6789ABCD = 0X6789ABCD = 0X6789ABCD = 0x6789abcd 
```

我对0的处理感到有些惊讶；我不清楚为什么`0X`省略前缀，但是有两个独立的系统这样做，它必须是标准的。`#`它证实了我对该选项的偏见。

* * *

零的处理按标准。

> ### ISO/IEC 9899: [**2011**](http://port70.net/%7Ensz/c/c11/n1570.html#7.21.6.1p6) [§7.21.6.1**功能****`fprintf`**](http://port70.net/%7Ensz/c/c11/n1570.html#7.21.6.1p6)

> ¶6标志字符及其含义是： ... `#`结果转换为“替代形式”。...对于`x`（或`X`）转换，***非零***结果具有`0x`（或`0X`）前缀。...

（强调补充。）

* * *

请注意，使用`%#X`将使用大写字母作为十六进制数字并`0X`作为前缀；using`%#x`将使用小写字母作为十六进制数字并`0x`作为前缀。如果您喜欢`0x`作为前缀和大写字母，则必须`0x`单独编码：`0x%X`. 当然，可以根据需要添加其他格式修饰符。

对于打印地址，请使用`<inttypes.h>`标题、`uintptr_t`类型和`PRIXPTR`格式宏：

```
#include <inttypes.h>
#include <stdio.h>

int main(void)
{
    void *address = &address;  // &address has type void ** but it converts to void *
    printf("Address 0x%.12" PRIXPTR "\n", (uintptr_t)address);
    return 0;
} 
```

示例输出：

```
Address 0x7FFEE5B29428 
```

在长度上选择你的毒药——我发现 12 的精度对于运行 macOS 的 Mac 上的地址效果很好。结合`.`指定最小精度（数字），它可以可靠地格式化地址。如果您将精度设置为 16，根据我在 Mac 上的经验，额外的 4 位数字始终为 0，但在可移植 64 位代码中使用 16 而不是 12 肯定是有必要的（但您会使用 8 32 位代码）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2021-04-27T12:26:26.997

`#`除非值为，否则会导致`0x`（或`0X`for ）在输出之前添加，因此如果您希望始终出现在输出中，则不应使用。`%#X``0``#``0x`

您可以将宽度字段与`0`标志结合使用来生成前导零：`%08x`将带有前导零的数字填充到宽度为`8`. 如果您希望所有 32 位值的输出一致，请使用`"0x08x"`.

您还可以使用精度字段：`%.8x`将带有前导零的数字填充到总`8`位数。因此，您也可以将`"0x%.8x"`其用于您的目的。

如果前缀是作为转换的一部分生成的，则这些转换规范会有所不同，例如`0x`带符号转换中的负数`#`或`-`负数，其长度计入宽度但不计入精度说明符。此外，精度字段可以与宽度字段组合：

```
printf("|%10x|", 256)      // outputs |       100|
printf("|%010x|", 256)     // outputs |0000000100|
printf("|%#010x|", 256)    // outputs |0x00000100|

printf("|%10.8x|", 256)    // outputs |  00000100|
printf("|%#10.8x|", 256)   // outputs |0x00000100|
printf("|0x%.8x|", 256)    // outputs |0x00000100|

printf("|%10x|", 0)        // outputs |         0|
printf("|%010x|", 0)       // outputs |0000000000|
printf("|%#010x|", 0)      // outputs |0000000000|

printf("|%10.8x|", 0)      // outputs |  00000000|
printf("|%#10.8x|", 0)     // outputs |  00000000|
printf("|0x%.8x|", 0)      // outputs |0x00000000| 
```

我建议使用最后一个：`"0x%.8x"`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-23T09:52:41.947

您始终可以使用“%p”来显示 8 位十六进制数字。

```
int main (void)
{
    uint8_t a;
    uint32_t b;
    a = 15;
    b = a << 28;
    printf("%p", b);
    return 0;
} 
```

输出：

```
0xf0000000 
```

# macos - Mac 代码签名：绕过终端的钥匙串访问私钥提示

> ID：14733764
> 
> 赞同：13
> 
> 时间：2013-02-06T16:20:11.530
> 
> 标签：macos, security, osx-mountain-lion, keychain

我正在 Mac OS X Mountain Lion 中开发一个应用程序，该应用程序需要访问钥匙串访问中我的一些证书的私钥。由于此应用程序将在服务器上运行，因此我需要避免弹出对话框要求用户允许应用程序访问私钥：

![弹出对话框](../Images/4e044f2fd468f1f04e0798918c467d7d.png)

我知道通过单击“始终允许”，该私钥将不再​​弹出对话框，问题是我将使用不同的密钥。

提前致谢，

米基万。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T20:41:41.947

我发现解决此问题的唯一方法是将钥匙串访问中的私钥设置为“允许所有应用程序访问此项目”。

![私钥属性：访问控制](../Images/26f9fc34c4a02e382750f9144030ebf7.png)

当您将证书导入钥匙串时，您可以从终端进行配置。

**导入命令**：`import inputfile [-k keychain] [-t type] [-f format] [-w] [-P passphrase] [options...]`

**要将访问控制设置为“允许所有应用程序访问此项目”，只需添加标志“-A”**。

您可以随时查看[Apple 的*安全手册*](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/security.1.html)

希望这可以帮助。

# jquery - 如何不在移动 Safari 应用程序中缓存 AJAX POST？

> ID：14733772
> 
> 赞同：2
> 
> 时间：2013-02-06T16:20:33.247
> 
> 标签：jquery, ajax, mobile-safari

感谢这篇文章，我能够解决移动 safari 将缓存 ajax POST 请求的问题。添加“headers: {'Cache-Control': 'no-cache'}”似乎对我在移动 safari 中的页面起到了作用。

但是，当我通过移动 safari webapp 访问我的网站时，ajax 请求仍然被缓存。我一直无法找到解决方案，所以我想我会在这里发布。除了添加上面提到的标头之外，我还尝试添加“cache: false”以及放置“url:'/ajax_url?v='+time”。似乎没有任何效果。

为什么移动 safari 与 webapp 的行为不同？我该如何解决这个问题？

编辑：

忘记我的代码了。这里是：

```
function send_ajax(my_data,refresh){ 
    var now = new Date();
        var n = now.getTime();
    $.ajax({  
      url: "/ajax_page?time=" + n,
      type: "POST",
      headers: {"cache-control": "no-cache"},
      data: my_data,
      dataType: 'json'
      })
      .fail( function (jqXHR, textStatus, errorThrown){
      })
      .done(function(data){ // refresh the page after we get the results
        if(refresh=='true'){
            var pathArray = window.location.pathname.split('/');
            window.location.href = '/' + pathArray[1];

        }
      });         

    }

 send_ajax({'my_checkbox': $('#my_checkbox').is(':checked') },'true'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:22:33.597

一种始终有效的解决方案是向请求添加一个参数，该参数具有发出请求的时间（本质上是时间戳）。这使得每个请求都成为服务器必须处理的唯一雪花。

这类似于将您的网站版本放入所有脚本/css 文件的名称中，以便在更新后访问您网站的用户必须下载新文件。

# signalr - SignalR connecting to existing WebApi Service to get updates

> ID：14733776
> 
> 赞同：1
> 
> 时间：2013-02-06T16:20:41.950
> 
> 标签：signalr, asp.net-web-api

Just an outline of what I am trying to do.

I have an existing WebApi service that returns the running windows services on a machine. I have a front end hooked up so that it querys the service using jQuery and Knockout.js

What I am trying to do with SignalR is to use it to poll the WebAPi service to always push the latest changes to the client.

Is SignalR the right framework for this?

Can someone provide me an example of calling a RESTful service with SignalR?

What i would really like to happen is if a service goes down that SignalR would raise that all the way through the WebApi to the Client.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:36:07.630

SignalR 不是创建或使用 RESTful 服务的正确框架。SignalR 旨在使将数据从服务器推送到客户端变得容易。REST 旨在支持客户端发出请求并接收（接近）即时响应。

您可以从 SignalR 客户端向服务器端[Hub](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)方法发出请求，但 Hub 方法不会公开 REST 端点。

# servicestack - ServiceStack RazorRockstars 示例 - 保留路由？

> ID：14733778
> 
> 赞同：2
> 
> 时间：2013-02-06T16:20:45.550
> 
> 标签：servicestack

我对 RazorRockstars 示例有疑问。我已将请求类上的主路由 ( `/rockstars`)重命名为，现在它不再加载。看来路线是保留的。是这样吗？我希望在我的应用程序中使用这条路线。`Rockstars``/properties``/properties`

作品：

```
[Route("/rockstars")]
[Route("/rockstars/{Id}")]
[Route("/rockstars/aged/{Age}")]
public class Rockstars
{
    public int? Age { get; set; }
    public int Id { get; set; }
} 
```

作品：

```
[Route("/blahblahblah")]
[Route("/blahblahblah/{Id}")]
[Route("/blahblahblah/aged/{Age}")]
public class Rockstars
{
    public int? Age { get; set; }
    public int Id { get; set; }
} 
```

不工作：

```
[Route("/properties")]
[Route("/properties/{Id}")]
[Route("/properties/aged/{Age}")]
public class Rockstars
{
    public int? Age { get; set; }
    public int Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:43:25.603

using`/properties`在开发中不起作用，因为它与根目录中的文件夹匹配（劫持请求），即在这种情况下`Properties/`，它用于保存项目`AssemblyInfo.cs`文件的 VS.NET 文件夹。

在您将文件夹重命名为其他名称后，或者部署后，它将起作用`Properties`，因为部署版本不包含该`Properties`文件夹。

# java - Float comparison in java to recognize patterns

> ID：14733781
> 
> 赞同：1
> 
> 时间：2013-02-06T16:20:51.030
> 
> 标签：java, csv, floating-point

I am writing a program that identifies patterns in stock market data and I am trying to identify the following short term pattern:

if the the low value is less than the open value by at least 3 and the close value is within 2 of the open value.

I am reading in the values from a CSV file in the following format but without the headers:

```
Open    High    Low     Close
353.4   359.2   347.7   349
351.4   354.08  349.1   353.1
350.1   354     349.3   350.2
352.4   353.28  348.7   349.8
345.7   352.3   345.7   351.5 
```

The values are stored in float arraylists called closePrice, openPrice, lowPrice. I am calculating the This is the code I have wrote to try and identify the pattern within the data.

```
 for(int i = 0; i < closePrice.size(); i ++)
    {
        //Difference between opening price and the price low
        float priceDrop = Math.abs(openPrice.get(i) - lowPrice.get(i));
        //Difference between opening price and close price (regardless of positive or negative)
        float closingDiff = Math.abs(openPrice.get(i) - closePrice.get(i));

        float dropTolerance = 3.0f;
        float closingTolerance = 2.0f;

        if( (priceDrop > dropTolerance) || (closingDiff < closingTolerance) )
        {
            System.out.println("price drop = " + priceDrop + " closing diff = " + closingDiff);
            System.out.println("Hangman pattern" + "\n");
        }
    } 
```

So what it should do is test if the price drops more than 3 and then the closing price is within 2 of the opening price however when I run the program it seems to let everything bypass the if statement. My output is:

```
price drop = 5.6999817 closing diff = 4.399994
Hangman pattern
price drop = 2.2999878 closing diff = 1.7000122
Hangman pattern
price drop = 0.8000183 closing diff = 0.1000061
Hangman pattern 
```

Is it because I am comparing floats? Any help would be appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:23:53.670

看起来您混淆了 AND 运算符和 OR 运算符。

您声明您只想在满足两个条件时输出，但您的代码说如果满足任一条件，您将输出。

# android - 更改 App Billing v2 订阅

> ID：14733782
> 
> 赞同：1
> 
> 时间：2013-02-06T16:20:51.673
> 
> 标签：android, google-play, in-app-billing

使用 IAB V2 可以让用户订阅您的特定订阅 ID。但是是否可以提供多种订阅级别，例如基本（1 美元）、白银（2 美元）、黄金（5 美元）、白金（10 美元）等。

用户将获得白金订阅（最昂贵）的最大功能，但只有基本订阅（最便宜）的最低限度。

目前我找不到任何直接的方法来实现这一点。使用当前的 IAB V2 可以采用什么方法来实现这一目标？（希望他们能够通过订阅在 IAB V3 中提供一些东西）

# c# - Jon Skeet 的 Edulinq - 空数组缓存

> ID：14733786
> 
> 赞同：8
> 
> 时间：2013-02-06T16:21:11.360
> 
> 标签：c#, caching

我正在浏览 Jon Skeet 的 Edulinq，我遇到了以下代码，第 23 页，他在其中`Empty()`为 Linq 的运算符实现了缓存机制

```
private static class EmptyHolder<T>
{
   internal static readonly T[] Array = new T[0];
} 
```

我的问题是，这实际上是如何缓存`Array`变量的？

（可选）它如何在 CLR 中工作？

编辑：同样在此之后，他提到了对返回数组的反抗。为什么任何人都不应该返回一个数组（即使它的大小为 0？）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-07T17:51:33.767

> 我的问题是，这实际上是如何缓存 Array 变量的？

CLR 按类型参数缓存它。基本上，`EmptyHolder<int>`是与 etc 不同的类型，并且每个*具体*`EmptyHolder<string>`类型都会调用一次类型初始化程序（由 CLR 自动调用）。

 *所以：

```
var x = EmptyHolder<string>.Array; // Needs to construct the empty string[] array
var y = EmptyHolder<string>.Array; // No extra work! x and y have the same value
var z = EmptyHolder<int>.Array; // This constructs an empty array for int[] 
```

> （可选）它如何在 CLR 中工作？

恐怕这是一个我不太了解的实现细节。但基本上这*都是*关于 CLR 如何做事的:)

> 编辑：同样在此之后，他提到了对返回数组的反抗。为什么任何人都不应该返回一个数组（即使它的大小为 0？）？

嗯，有评论说：

> 数组方法不是很好：人们会错误地依赖返回值是一个数组，尽管这没有记录。

我个人认为这不是问题，但编写替代实现很有趣:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:29:13.137

每次为 T 首次调用 EmptyHolder.Empty() 时，都必须为 EmptyHolder 调用静态构造函数。

现在看起来好像没有静态构造函数了，对吧？错误的。该类可以重写为...

```
private static class EmptyHolder<T>
{
   static EmptyHolder<T>()
   {
       Array = new T[0];
   }
   internal static readonly T[] Array;

   public IEnum<T> Empty();
} 
```

现在， Empty 的后续运行将不会调用静态构造函数（除非使用不同的 T）。

尽管我可能会批评 Jon Skeet，但这是一个需要担心的微小优化。*

# iphone - 自动布局无法按预期工作

> ID：14733787
> 
> 赞同：1
> 
> 时间：2013-02-06T16:21:11.930
> 
> 标签：iphone, ios, autolayout

**鉴于：**

> 一个“徽标”（从超级视图顶部垂直空间 >= 10 的 uiimageview）和一个“登录”，徽标和持有者视图之间的垂直空间 <=31

**目标：**

> 在横向模式下，由于屏幕尺寸的变化，徽标将向上移动，并且持有人视图也应该移动。

但是，当我从纵向旋转到横向时，我得到的是垂直约束仍然保持在 81 （不知何故我无法从 xcode 中删除这个值）。此外，“主视图”和“登录”之间的垂直空间也不能删除。我知道我在这里做错了什么。

如果您对此问题有任何建议，请提供帮助。

**细节：**

+图片1是纵向模式，有一些关于约束的细节

![在此处输入图像描述](../Images/181b7d422ad92ffdcac978f764e45abd.png)

+picture 2 是横向模式，有一些错误。

![在此处输入图像描述](../Images/32a3b01a554fdf4fb3266800a47d0236.png)

**编辑**：就像我设置的方式一样，我希望徽标的垂直空间可以缩小，但它总是 >= 10 从主视图的顶部开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:31:51.383

我不知道这是否可以在 IB 中完成——如果可以，我还没有弄清楚。我已经在代码中完成了，如下所示。我从图像视图顶部到具有固定值的主视图顶部的约束以及图像视图和登录视图之间的约束开始。这应该足以满足系统的要求，您可以删除主视图顶部或底部的任何其他约束（我在测试中使用了具有固有高度的按钮，所以我不需要设置它。如果你视图没有设置内在或特定的高度，您也必须这样做）。然后，在代码中，我将该约束删除到顶部（IBOutlet conTop），并将其重新设置到底部：

```
@implementation ViewController {
    IBOutlet NSLayoutConstraint *conTop;
    IBOutlet UIButton *button;
}

- (void)viewDidAppear:(BOOL)animated  {
    [super viewDidAppear:animated];
    [self.view removeConstraint:conTop];
    conTop = [NSLayoutConstraint constraintWithItem:button attribute:NSLayoutAttributeTop relatedBy:0 toItem:self.view attribute:NSLayoutAttributeBottom multiplier:.5 constant:-120];
    [self.view addConstraint:conTop];
    [self.view layoutSubviews];
} 
```

通过同时使用乘数和常数，您可以调整它在旋转后的移动方式。我在这里选择的数字对我来说看起来很不错，但你可以把它们弄乱，看看它们做了什么。您可以将乘数视为一个敏感因子——分数越小，旋转时与顶部的距离变化越小。如果您需要精确的值，您可以使用一些代数来计算乘数和常数的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:46:25.403

您需要找到一种以声明方式表达关系的方法——最好是用适用于这两种情况的术语。

你还没有完全说出你想在横向模式下发生什么。顶部的标志，但离顶部多远？您希望持有人视图在哪里？

有一个[WWDC 视频](https://developer.apple.com/videos/wwdc/2012/?id=202)，对于了解自动布局的工作原理至关重要。你有机会看吗？

# algorithm - 文件中单词的出现次数 - 复杂性？

> ID：14733788
> 
> 赞同：2
> 
> 时间：2013-02-06T16:21:15.143
> 
> 标签：algorithm, sorting, hashtable

鉴于我有一个文件，其中包含一组单词：

1）如果我选择一个哈希表来存储单词->计数，那么查找特定单词出现的时间复杂度是多少？

2）我怎样才能按字母顺序返回这些单词？

如果我选择哈希表，我知道 1) 的时间复杂度将是 O(n) 来解析所有单词，而 O(1) 来获取特定单词的计数。

我看不到如何订购哈希表以及时间复杂度是多少。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:48:44.393

可排序的哈希映射本质上变成了二叉树。在 java 中，您可以看到 TreeMap 在查找和插入时使用 O(log n) 实现 SortableMap 接口。

如果您想要最佳的理论性能，您可以使用带有 O(1) 查找和插入的 HashMap，然后使用带有 O(n) 的桶/基数排序进行显示/迭代。

实际上，对字符串使用基数排序会比快速排序 O(n log n) 执行得更差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:43:04.473

使用哈希表有两个缺点 1- 它们不以排序方式存储数据，2- 哈希值的计算通常很耗时。在最坏的情况下，它们还具有插入/删除/查找的线性复杂性。

我的建议是使用[Trie](http://en.wikipedia.org/wiki/Trie)来存储您的单词。插入/查找有保证的 O(1)（字数）。对 Trie 的预排序遍历将给出 Trie 中单词的排序列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:26:17.677

你对（1）的分析是正确的。

大多数哈希表实现（我知道）没有隐式排序。

要获得有序列表，您必须对列表进行排序 ( `O(n log n)`)，对列表的查询需要`O(log n)`.

从理论上讲，您可以定义一个哈希操作和排序的实现，但是使其分布良好（为了提高效率）将很困难，而仅排序会简单得多。

如果它是一个包含大量重复项的文件，最好的想法可能是首先使用散列来消除重复项，然后遍历哈希表以获取非重复项列表并对其进行排序。

# javascript - 覆盖 jQuery 方法 $.POST

> ID：14733791
> 
> 赞同：1
> 
> 时间：2013-02-06T16:21:26.287
> 
> 标签：javascript, jquery

我需要一种方法来覆盖 jQuery`$.post`方法 parameters `url`。

我需要将一个字符串附加到我拥有的每个脚本中，而无需逐一编辑它们。字符串值可能会更改，因为它是由系统创建的。

我知道有一种方法可以 100% 覆盖参数的值，而不仅仅是追加。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:34:58.060

根据您要进行的修改，您可以使用一种[.ajaxStart](http://api.jquery.com/ajaxStart/)或[.ajaxSend](http://api.jquery.com/ajaxSend/)方法来覆盖 url 参数。

一般来说，您可以使用“Duck Punching 模式”修改现有的 JavaScript 函数。您可以阅读 Paul Irish 的这篇文章以了解它是如何工作的[http://paulirish.com/2010/duck-punching-with-jquery/](http://paulirish.com/2010/duck-punching-with-jquery/)

这是他推荐用于 jQuery 的最终模式

```
(function($){

    // store original reference to the method
    var _old = $.fn.method;

    $.fn.method = function(arg1,arg2){

        if ( ... condition ... ) {
           return  .... 
        } else {           // do the default
           return _old.apply(this,arguments);
        }
    };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:10:23.833

考虑使用自定义函数：

```
var updateUrl = function(url){

  return url + someStuff

}

$.post(

  updateUrl( yourUrl ),
  data,
  successCallback

); 
```

因此，您将覆盖逻辑包装一次`updateUrl`，仅此而已。

# jira - 用于流程控制和 Scrum 的 JIRA 实施

> ID：14733793
> 
> 赞同：2
> 
> 时间：2013-02-06T16:21:26.880
> 
> 标签：jira, scrum, process-control

我正在审查 JIRA 是否可能在我工作的公司的几个开发团队中使用。我们使用 Scrum 作为我们项目管理的基础。我们有优秀的自组织团队，几乎没有分配的工作，等等。JIRA 似乎对其中一些项目非常有用，但我们正在努力处理的问题是处理流程与技术任务的管理以及我​​们称之为“问题捆绑”的事情。

过程控制。目前我们将创建一个故事，例如“损益报告上的图表存在重叠图例文本的问题”。好吧，够好了。然后，我们将创建一个技术子任务，为简单起见，假设它是“研究并纠正问题”。接下来，我们创建了一组流程子任务。同行评审、构建、QA 测试、合并、跟踪。然后可以将这些中的每一个独立分配给用户并放入我们的 scrum 板上的 Pending bin 中（顺便说一句，我们使用 Pending、Awaiting Action、In Progress、Done、Merged 模型而不是 todo、in progress、done 模型）。待定基本上意味着，如果我是下一个优先级，我正在等待。在开发过程中，程序员将抓住技术任务，将自己设置为受让人并进入进行中。完成后，他们会将其移至 Done bin，然后将 Peer Review 流程子任务更新为“Awaiting Action”，并将受理人设置为他们的代码合作伙伴。发送电子邮件，完成同行评审。完成后，同行评审合作伙伴会将 Peer Review 移至 Done bin，并将 Make Build 子任务设置为构建管理器，并将其移至 Awaiting Action。构建经理看到这一点，进行构建，将其移至完成并将 QA 测试票证更新为等待操作状态，您就明白了。完成后，同行评审合作伙伴会将 Peer Review 移至 Done bin，并将 Make Build 子任务设置为构建管理器，并将其移至 Awaiting Action。构建经理看到这一点，进行构建，将其移至完成并将 QA 测试票证更新为等待操作状态，您就明白了。完成后，同行评审合作伙伴会将 Peer Review 移至 Done bin，并将 Make Build 子任务设置为构建管理器，并将其移至 Awaiting Action。构建经理看到这一点，进行构建，将其移至完成并将 QA 测试票证更新为等待操作状态，您就明白了。

它正在工作，但是他们对替代方案、最佳实践等有什么建议吗？创建技术和流程子任务不是要走的路吗？我注意到的一件事是，我们必须过滤问题列表以隐藏子任务，并且对于只想查看父故事状态的利益相关者来说，Scrum 板可能会变得相当难以应付。由于父故事在子任务移动之前不会移动，因此他们看不到任何他们感兴趣的东西，即使在子任务移动时故事正在“进行中”也是如此。啊。

问题捆绑。我们经常有一组可能紧密相关但通常更普遍的问题。例如，与我们软件中的报告相关的所有问题。目前有 15 个已知问题。这些问题可能在系统中的不同报告中，具有重现的特定步骤等。当我们为冲刺做准备时，我们将选择这些相关问题的捆绑包。原因是 QA 可以更有效地测试一堆通常在一次通过中相关的小修复，而不是将每个报告作为单独的过程进行测试。

目前，我们将每个问题移到捆绑包的子任务中。例如，捆绑包可能简称为“Report Fixes 1”，例如，它将具有 5 个技术子任务，每个子任务都是要修复的不同报告错误。然后，我们可以将上面的过程控制项添加到整个捆绑包中。我们还知道，在捆绑包中的所有项目都完成之前，我们不会合并，所以它们都得到相同的版本。

但是，如上所述，可见性会降低，因为您现在无法轻松查看子任务的状态，因为它们位于捆绑包中。

再次，最佳实践？想法？其他人是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:48:43.377

布莱恩，

你是否考虑过将你的流程子任务（Peer Review、Make Build）和你的 Scrum 板“箱”（Pending、Awaiting Action）结合起来？子任务是在 JIRA 中提供并行任务的常用方式，但你描述整个过程的方式听起来更线性。如果每个故事真的从一个受让人转移到另一个受让人，只需更改受让人和状态。

“问题捆绑”对我来说听起来像是 GreenHopper 中的史诗。您还可以使用标签字段（标准或自定义）执行类似的操作来对问题进行分组。

〜马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T19:58:27.547

以下是我们的处理方式——

您提到的流程子任务是我们实施中的状态。因此，我会将故事分解为开发人员完成的技术任务，然后将故事移至“待审核”状态，然后再进行构建和 QA 测试等。这几乎也是马特所说的。这个工作流程让利益相关者了解 sprint 所取得的进展，因此非常有帮助。

因此，在 JIRA 中没有什么能比得上最佳实践，它非常灵活，可以按照自己想要/需要的方式使用它。

我同意你关于史诗不是一个完整的解决方案。我们通过添加标签并基于这些过滤器创建过滤器和泳道来克服这个问题。

# javascript - 在选择输入上多次调用 select2() 使其消失

> ID：14733794
> 
> 赞同：0
> 
> 时间：2013-02-06T16:21:29.353
> 
> 标签：javascript, jquery, jquery-select2

如何重现：

使用 Chrome访问[http://ivaynberg.github.com/select2/select2-latest.html 。](http://ivaynberg.github.com/select2/select2-latest.html)

打开 Web 开发控制台，输入：

$("#e1").select2()

> > “类型错误：对象 -1 没有方法‘显示’”

第一个选择消失了，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:14:55.820

问题在于，在第二次调用中，代码想要在创建新下拉列表之前销毁旧生成的下拉列表。它在正确初始化自身之前这样做。

相关代码在第 645 行附近的“删除”函数中：

```
 if (select2 !== undefined) {
    select2.container.remove();
    select2.dropdown.remove();
    select2.opts.element
       .removeData("select2")
       .unbind(".select2")
       .attr("tabIndex", this.elementTabIndex)   <--- fail here
       .show(); 
```

麻烦的是它调用`.attr("tabIndex", this.elementTabIndex)`while `this.elementTabIndex`is`undefined`并且`.attr(name, undefined)`等价于`.attr(name)`，从而返回属性本身（而不是 jquery 元素。所以你得到了属性 value `'-1'`，`'-1'.show()`那么当然没有任何意义。

作为一个kludge，使用`.attr("tabIndex", this.elementTabIndex || -1)`. 更好的解决方法可能是`destroy`仅在`this.elementTabIndex`初始化后调用。我不确定是否`attr`真的需要调用 to `destroy`，但是我不能声称我理解代码。

# jquery - Jquery 如果我的 div 为空

> ID：14733797
> 
> 赞同：0
> 
> 时间：2013-02-06T16:21:33.137
> 
> 标签：jquery, css, if-statement

我这里有这个脚本

```
<script type="text/javascript">
$(document).ready(function () {
    if($('.subhead').is(':empty')){
        $(this).css('background-color', 'none !important');
    }

});
</script> 
```

我在这里要做的是说如果我的类 .subhead 为空然后更改背景颜色，我在代码中有多个 .subhead div，如果我运行这样的脚本

```
<script type="text/javascript">
    $(document).ready(function () {
        if($('.subhead').is(':empty')){
            alert('hi');
        }else{
            alert('hello');
        }
    });
    </script> 
```

它会返回你好

我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:23:04.360

的默认设置`background-colour`是`transparent`，不是`none`。试试这个：

```
if ($('.subhead').is(':empty')){
    $(this).css('background-color', 'transparent !important');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:25:12.347

`:empty`用作选择器，因为您有多个`.subhead`元素，使用不会`is`达到您的预期。您的代码说，如果所有匹配元素的类为`.subhead`空，则将`background-color`所有匹配元素的属性设置为`none`.

```
$('.subhead:empty').css('background-color', 'none !important'); 
```

# ruby-on-rails - Activeadmin：导出 xml/json 时禁用分页

> ID：14733798
> 
> 赞同：1
> 
> 时间：2013-02-06T16:21:33.193
> 
> 标签：ruby-on-rails, ruby, json, export, activeadmin

如何在 activeadmin 中禁用 json/xml 导出的分页？我想不出任何解决方案。导出到 xml 或 json 时，我只得到当前页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:00:22.420

一种解决方案（不是最好的）是使用 before_filter 禁用分页

```
controller do
  before_filter :disable_pagination, :only => [:index]

  def disable_pagination
    @per_page = YourModel.count
  end
end 
```

这使得所有记录只有一页的分页，因此它将导出所有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T13:16:48.360

也可以这样操作，

```
controller do
    def index
      super do |format|
        per_page = (request.format == 'text/html') ? 30 : 10_000 # to skip the pagination
        params[:page] = nil unless (request.format == 'text/html') #It will be working even after we export the CSV on the paginated sections.
        @users = @users.order("first_name asc, last_name asc").page(params[:page]).per(per_page)
        @users ||= end_of_association_chain.paginate if @users.present?
      end
    end
end 
```

# java - 我可以增加 JPanel 的大小吗？

> ID：14733803
> 
> 赞同：0
> 
> 时间：2013-02-06T16:21:46.200
> 
> 标签：java, swing, jpanel

我这里有一些代码，当按下按钮时，我正在尝试扩展 JPanel。但是，它仍然保持在以前的高度。有没有办法做到这一点，或者它是否固定在创建时设置的尺寸上？

```
public class GUITest extends JFrame {

    JPanel jp;
    JButton one;

    public static void main(String[] args) {
        new GUITest();
    }

    public GUITest() {
        initWidgets();
    }

    public void initWidgets() {
        setSize(250, 250);
        setTitle("Stretch Panel Example");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        one = new JButton("Click me!");
        ActionListener extend = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < 80; i++) {
                    jp.setPreferredSize(new Dimension(200,(i+70)));
                }
                //System.out.println(jp.getHeight());
            }
        };
        one.addActionListener(extend);
        add(one, BorderLayout.NORTH);
        jp = new JPanel();
        jp.setBackground(Color.BLACK);
        jp.setPreferredSize(new Dimension(200,70));
        add(jp, BorderLayout.CENTER);
        setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:28:31.610

或者，您可以在单击按钮后在 jpanel 上调用 revalidate()

```
public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < 80; i++) {
                    jp.setPreferredSize(new Dimension(200,(i+70)));
                    **jp.revalidate();**
                }
                //System.out.println(jp.getHeight());
            } 
```

澄清一下，一旦你改变了尺寸，它就必须重新绘制。事情已经改变，但没有被告知要在视觉上更新该更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:27:46.680

您应该使用该`validate()`方法来做到这一点。我希望我能提供帮助！

祝你有美好的一天！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:33:36.843

试试这个：

`jp.setSize(new Dimension(200,(i+70)));`

代替 `jp.setPreferredSize(new Dimension(200,(i+70)));`

在每次点击的这段代码中，大小将增加 10：

```
ActionListener extend = new ActionListener() {
            int count=0;
            public void actionPerformed(ActionEvent e) {
                    count=count+10;
                    jp.setSize(new Dimension(100+count,70+count));  
                System.out.println("in listener");
            }
        }; 
```

另一件事 setPreferedsize 是组件重新验证时调用的默认大小。在每次点击时更改 setPreferedSize ：

```
 count=count+10;
                jp.setSize(new Dimension(100+count,70+count));  
        jp.setPreferredSize(new Dimension(100+count,70+count)); 
```

# javascript - 您如何确定 webkit Chrome 和 Safari 浏览器的图像高度和宽度？

> ID：14733814
> 
> 赞同：1
> 
> 时间：2013-02-06T16:22:07.397
> 
> 标签：javascript

伙计们！这是我的第一个问题。我收集了这个小脚本，它只使用一个类就可以同时水平和垂直居中元素。开始

```
(function ($) {
$.fn.vAlign = function() {
return this.each(function(i){
var h = $(this).height();
var oh = $(this).outerHeight();
var mt = (h + (oh - h)) / 2;
$(this).css("margin-top", "-" + mt + "px");
$(this).css("top", "50%");
$(this).css("position", "absolute");
});
};
})(jQuery);

(function ($) {
$.fn.hAlign = function() {
return this.each(function(i){
var w = $(this).width();
var ow = $(this).outerWidth();
var ml = (w + (ow - w)) / 2;
$(this).css("margin-left", "-" + ml + "px");
$(this).css("left", "50%");
$(this).css("position", "absolute");
});
};
})(jQuery);

$(document).ready(function() {
$(".vAlign").vAlign();
$(".hAlign").hAlign();
}); 
```

我已经成功地使用类“vAlign”或“hAlign”或两者都相对于任何容器（具有“位置：相对”）居中，除了图像（`<img/>`）和仅在 webkit 浏览器（Chrome 和 Safari）上。这意味着，在这个例子中；

```
<div class="hAlign vAlign">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu dui eget nulla condimentum gravida. Vivamus erat leo, ultricies quis, gravida a, fringilla eu, urna. Pellentesque a mauris ac nisl semper egestas. Pellentesque ut elit in pede mattis gravida. Donec ac lectus a nisi suscipit placerat. Maecenas quis ipsum. Pellentesque mattis tellus. Suspendisse sollicitudin accumsan tortor. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Sed metus. Quisque et leo at erat rutrum lobortis. In tempus lectus eget ligula convallis tristique.
</div>

<img class="hAlign vAlign" src="http://rlv.zcache.es/cara_de_lol_etiquetas_redondas-p217382006305499446envb3_400.jpg" alt="lol" /> 
```

div 将在任何浏览器上水平和垂直居中，任何其他不是“img”的标签（甚至是“input”或“button”）也是如此。但是，img 不会以 webkit 浏览器为中心。

我到处寻找，但要么我没有找到答案，要么我不明白。我基本上不知道 JS，如果这是一个愚蠢的问题，请原谅我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:09:55.373

要测量图像的宽度和高度，您必须确保正确下载了图像。

有两种解决方案：

1.  您可以通过等待窗口加载事件来等待下载所有文件： [window.onload vs document.ready jQuery](https://stackoverflow.com/questions/10778070/window-onload-vs-document-ready-jquery)

    ```
    $(window).on('load', function(){
      ...
    }); 
    ```

2.  有一个“imagesLoaded”插件可以帮助您解决这个问题。它不需要 jQuery，并允许等待加载单个或多个图像：http: [//desandro.github.io/imagesloaded/](http://desandro.github.io/imagesloaded/)

    ```
    $.fn.vAlign = function(){
      this.imagesLoad().always(function(){
        ...
      });
      return this;
    }; 
    ```

# ios - UICollectionView iimages 数组

> ID：14733815
> 
> 赞同：0
> 
> 时间：2013-02-06T16:22:08.007
> 
> 标签：ios, objective-c, nsmutablearray, uicollectionview

新手问题。我在每个单元格中都有一个自定义单元`UICollectionView`格。在单元格的复选框将被点击到“选中”状态后，我需要填充该数组（自定义 UIButton 具有适当的选中/未选中图像连接到 IBAction 并更改内部单元格和复选框状态图像）。我不能用于标记，因为我用它来预览手机照片。第一个想法是通过点击复选框将单元格图像添加到“选中”状态，但如果用户想要取消选中复选框，我无法跟踪我需要从数组中删除的确切 UIImage 内容。最痛苦的方法是什么？`UIImage``UIButton``UIImages``BOOL``-didSelectItemAtIndexPath:``NSMutableArray`

PS：这是我连接到复选框的方法的列表

```
- (void)theCheckboxTapped:(UIButton*)sender
{
    cell = (CustomCell *)sender.superview.superview;
    if (cell)
    {
        if ([cell isSelected] == NO)
        {
            UIImage *img1 = [UIImage imageNamed:@"checked.png"];
            [[(CustomCell *)cell checkboxSign] setImage:img1 forState:UIControlStateNormal];
        }

        if ([cell isSelected] == YES)
        {
            UIImage *img2 = [UIImage imageNamed:@"unchecked.png"];
            [[(CustomCell *)cell checkboxSign] setImage:img2 forState:UIControlStateNormal];
        }
        cell.isSelected =! cell.isSelected;
    }
} 
```

第一个想法是制作单元格数组并检查该单元格的 BOOl 是否等于 YES 或 NO 并将适当的单元格图像添加到数组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:41:54.157

为了解决这个问题，有很多解决方案。但是我要解释的那个很简单，但这比其他方法消耗更多的内存。

脚步：-

1.  创建两个具有容量单元计数的阵列。添加此数组中的所有图像，并在没有选择单元格时最初仅添加布尔值 false。为此，您可以添加 0。

    NSMutableArray *imageArray = [[NSMutableArray alloc]init];

    NSMutableArray *boolArray = [[NSMutableArray alloc]init];

2.  当您检查任何单元格按钮时，然后将 boolArray 数组中的 0 替换为 1，反之亦然。

3.  并重新加载表。在重新加载期间，如果该位置的第二个数组中的值为 0，则无需从第二个中选择图像，如果值为 1，则选择图像。

要更改值，您可以替换 nsmutablearray 的 ObjectAtIndex 方法。

**编辑：** 不需要像上面那样做。一种更简单的解决方案是根据您的代码here。正如我所看到的，您可以获得细胞。因此，您可以为 imageView 设置标签，根据标签，您还可以获取要在其中添加图像的单元格的 imageview。为此创建 imageArray 和其中的所有图像。现在添加图像，如：

```
 if cell.selected = True;
   cell.imageView.image = [imageArray objectAtIndex:@"Cell's tage here or buttons tag here which is equal to indexPath.row"];
else
   cell.imageView.image = @"Default image or no image here". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T16:34:12.853

我已经以一种简单的方式解决了。只有在加载 50-60 个图像 uiCollectionView 后变得非常慢，所以我编写了一个方法来从现有单元格中删除所有 imageView。

```
-(void)cleanCache{

NSMutableArray *visibleThumbViews = [NSMutableArray arrayWithCapacity:self.collectionView.visibleCells.count];

for (ThumbCell *t in self.collectionView.visibleCells) {
    [visibleThumbViews addObject:t.thumbView];
}
for (ThumbView *t in self.thumbsViews) {

    if (![visibleThumbViews containsObject:t]) {
        [t unloadImage];
        [t removeFromSuperview];
    }

}
} 
```

此处调用此方法：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {

if (indexPath.row % 30 == 0) {
    [self cleanCache];
    NSLog(@"clean");
}

ThumbCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"ThumbCellID" forIndexPath:indexPath];
cell.thumbView = [self.thumbsViews objectAtIndex:indexPath.row];
cell.thumbView.frame = cell.bounds;

return cell; 
```

}

它工作得很好：P

抱歉英语不好

更新：我错过了这个委托方法：

```
-(void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath{
ThumbView *t = [self.thumbsViews objectAtIndex:indexPath.row];
[t unloadImage];
[t removeFromSuperview]; 
```

}

# vba - 从 Lotus Notes 数据库中读取列值的 VB 脚本代码

> ID：14733817
> 
> 赞同：0
> 
> 时间：2013-02-06T16:22:10.813
> 
> 标签：vba, lotus-notes, lotus, names

```
Set domSession = CreateObject("Notes.NotesSession")
Dim domDatabase 
Set domDatabase = domSession.GetDatabase("server Name", "xyz.nsf")
Set domView = domDatabase.GetView("All Projects") 
```

到这里还好。但是我尝试了很多但无法读取文档值。

我正在寻找 vbscript 代码来读取文档数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:29:41.803

添加这个：

```
Dim i%
Dim s$
Dim doc As Object

For i% = 1 to domView.EntryCount
  Set doc = domView.GetNthDocument(i%)
  s$ = doc.GetItemValue("itemname")(0)
  ' Do whatever you want with the string value which is now stored in s$
Next 
```

此代码假定项目是文本类型。您可以简单地使用`Dim s`来获取任何项目类型（数字、日期）。

要从视图中获取列值，您可以使用`doc.ColumnValues(2)`. 这将返回第 3 列的值（0 是第一个）。

# wpf - WPF UserControl 的系统主题颜色边框

> ID：14733818
> 
> 赞同：3
> 
> 时间：2013-02-06T16:22:13.573
> 
> 标签：wpf, themes, border

我有一个自定义 UserControl，我希望它具有与普通窗口相同的边框样式。

我尝试将边框颜色绑定到系统活动边框颜色：

```
<UserControl>
     <Border BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="4" >
         <Grid> 
```

但这只会使边框变灰，无论系统边框颜色是什么。

我想要那个，因为我在一个最大化的半透明窗口中有这个 userControl，看起来像调暗屏幕的其余部分。

是否有其他资源可以绑定或其他方式来实现？

甚至有没有更简单的方法来制作“熄灯”效果？

谢谢。

# php - 基于相同关键字显示结果的 MSQL 查询

> ID：14733820
> 
> 赞同：1
> 
> 时间：2013-02-06T16:22:22.687
> 
> 标签：php, mysql, search

我有一个名为 cakes 的表，其中包含以下列：id、title、description、keywords。我还有一个名为keywords 的表，其中cakes 是父表。关键字表包含两列：id 和关键字

我需要两个查询：***已更新***

1.  如果一个人输入巧克力、榛子、草莓等成分（可以是用逗号分隔的任何内容），我需要该查询来搜索包含所有三个关键字的蛋糕并显示结果。仅显示包含所有三个的蛋糕。如果没有蛋糕匹配，我需要一条消息说没有找到。

2.  我在搜索框上有一个标签，上面写着，查找类似的蛋糕。如果有人输入 Vanilla Raspberry 或 example，则查询需要在数据库中找到蛋糕，并将其关键字与其他蛋糕的关键字匹配并显示结果。仅显示具有相同关键字的蛋糕。

不知道如何编写这些查询。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:29:28.907

如果数据库必须为“关键字”使用分隔的长字符串字段而不是将它们放在行中，那么您将需要使用[LIKE 运算符](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

假设您的`[keywords]`列格式如下：

'巧克力、甘纳许、草莓'

您可以像这样搜索“相似”的蛋糕：

```
SELECT
    columns
FROM
    table t
WHERE
    t.[keywords] LIKE '%chocolate%'
    OR t.[keywords] LIKE '%cheesecake%' 
```

不过，如果您可以更改架构，我会这样做。搜索规范化的关键字**行**将比使用 DB 通过文本解析更有效和更快`LIKE`

如果您可以创建一个通过 ID 引用父表的`keywords` **table**，那么您可以使用 a 进行相等搜索`JOIN`，这在我看来会更好。

它可能有三列：Id、ParentId、Keyword

**编辑：**所以根据你的更新，你有一个`cakewords`可以搜索的表。

这是未经测试的，并且可能有一种更有效的方式使用 no`IN`子句。但想法是您知道特定蛋糕的所有关键字 ID。然后，您正在寻找在该集合中具有关键字的其他蛋糕。

```
SELECT
    columns
FROM
    cake AS cs
JOIN
    cakewords AS csw
        ON csw.[cakeid] = cs.[id]
WHERE
    csw.[wordid] IN
        (SELECT
            cw.[wordid]
        FROM
            cakewords AS cw
        JOIN
            cakes AS c
                ON c.[id] = cw.[cakeid]
        WHERE
            c.[id] = @pMyCurrenctCakeId
        ( 
```

**EDIT2：**这是一个很好的相关问题：

[标签/关键字匹配的最佳解决方案是什么？](https://stackoverflow.com/questions/615098/whats-the-optimal-solution-for-tag-keyword-matching)

根据里面的答案，你可以试试这个：

```
SELECT DISTINCT
    c.[id]
FROM
    cakewords AS cw1
INNER JOIN cakewords cw2 
    ON cw2.[wordid] = cw1.[wordid]
INNER JOIN cake AS c 
    ON c.[id] = cw.[cakeid]
WHERE
    cw1.[cakeid] = @current_cake_id 
```

# php - 如何将 url 中的唯一 ID 传递给我网站上的其他页面？

> ID：14733830
> 
> 赞同：0
> 
> 时间：2013-02-06T16:22:41.253
> 
> 标签：php

客户想尝试使用横幅广告（使用 Google Adwords）进行重新定位，并让我们将潜在客户来源分开。潜在客户来源 ID 与用户填写的表格一起提交。我想为重定向横幅创建一个唯一的 id，如下所示：[http](http://www.mysite.com/index.php/?id=12345) ://www.mysite.com/index.php/?id=12345然后将该 id 传递给其他页面，以便它们最终出现在表单上并提交它，我可以获取该 id 并将其与表单一起提交到数据库以跟踪潜在客户来源（它将与 id 相关联）。

我怎样才能做到这一点？

希望这不会令人困惑！我是 PHP 新手，一般来说都是这样的，所以非常感谢任何帮助。

编辑：这是我正在使用的代码。

索引.php

```
<?php session_start();

include("includes/dynamicVars.php");

if (isset($_GET['id']))
{ 
   $_SESSION['leadID'] = 'MICROSITE_RETARGET_CROSS';
   $siteCode = $_SESSION['leadID'];
   echo "Retarget ID set!";
}
else 
{ echo "Default PPC ID set!";}

?> 
```

$siteCode 在 dynamicVars.php 中默认定义为 'MICROSITE_PPC_CROSS'

然后Page2.php

```
<?php session_start(); 
    include("includes/dynamicVars.php");
    echo $siteCode;
?> 
```

而且我仍然得到默认的 $siteCode，而不是在 index.php 上设置的新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:15:05.880

是的，当您返回 index.php 页面时，它的 URL 中不再有 ID，这意味着 if 语句直接转到 Default PPC。所以你应该做的是创建另一个 SESSION 或者你可以使用一个让你知道访问者是同一个人的 COOKIE。例子：

```
 if(isset($_SESSION['visitor'])){

  // do nothing 
     }else{

// create the SESSION for leadID
        if (isset($_GET['id']))
        { 
           $_SESSION['leadID'] = 'MICROSITE_RETARGET_CROSS';

           echo "Retarget ID set!";
        }
        else 
        { echo "Default PPC ID set!";}

        }

    // write session for new visitor
        $_SESSION['visitor'] = "currentvisitor";

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:28:38.140

我建议将 ID 放入 $_SESSION['leadID']; 如果你想在 JavaScript 中使用它，你应该把它放在一个 cookie 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:52:00.430

好的，我看了一下。在第二页上，不要使用“echo $siteCode”，而是执行“echo $_SESSION['leadID']”。然后您可以在此页面上设置“$siteCode = $_SESSION['leadID']”。

我认为 $siteCode 不是全局的，除非你把它放在包含文件中并让它出现在任何地方。但是 Using Session 被称为超级全局数组。

# google-apps-script - 使用参数锚链接到应用程序，谷歌应用程序脚本

> ID：14733831
> 
> 赞同：0
> 
> 时间：2013-02-06T16:22:43.770
> 
> 标签：google-apps-script, anchor

我的 html 模板中有以下锚点：

```
<a href="<?!= ScriptApp.getService().getUrl() ?>"><button>All Feedback</button></a>
<a href="<?!= ScriptApp.getService().getUrl()+"&filter=bomgar" ?>"><button>Bomgar Feedback</button></a>
<a href="<?!= ScriptApp.getService().getUrl()+"&filter=tickets" ?>"><button>Ticket Feedback</button></a> 
```

当导航到带有参数的链接时，“&”和“=”符号是 url 中的 %26 和 %3d。有没有办法防止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:26:27.260

要将 GET 参数添加到 URL，您应该使用`?`字符来介绍它们（而不是`&`字符）。和号用于添加多个变量。所以你的 URL 应该是这样的。

```
http://script.google.com/[.......]/exec?variable=data&otherVariable=otherData 
```

因此，由于您没有`?`，因此对 URL 进行了清理以消除这些字符。

我制作的这个[网络应用程序](https://script.google.com/macros/s/AKfycbyNYYnoX-Akyw_ccq1q2LAGLFPqn2HdSixe0TN8wGO3mtMSOhHD/exec)说明了不同之处。

```
<a href="<?= ScriptApp.getService().getUrl()+"?filter=bomgar" ?>"><button>Bomgar Feedback</button></a> 
```

# css - 响应式网站显示为 iPad 放大

> ID：14733832
> 
> 赞同：6
> 
> 时间：2013-02-06T16:22:44.120
> 
> 标签：css, ipad, media-queries

看来，当我通过 iPad（最新一代）访问我的网站时，它会以横向模式正确加载响应式站点。当我切换到纵向时，我可以看到网站调整得很好，而且看起来也很好。当我再次切换回横向时，网站似乎放大了一点，需要缩小。

我在页面中有以下代码来尝试解决这个问题，但它仍然会发生......

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:36:19.580

似乎可以通过删除 initial-scale 属性来修复它，或者通过 JS

看这里：[在 iPad/iPhone 上在纵向和横向之间切换时，响应式站点被放大](https://stackoverflow.com/questions/11165460/responsive-site-is-zoomed-in-when-flipping-between-portrait-and-landscape-on-ipa)

此处：[响应式站点上从纵向到横向断点的 iOS 缩放问题](https://stackoverflow.com/questions/11850534/ios-zooming-issue-on-responsive-site-from-portrait-to-landscape-break-points)

在这里： http: [//opensourcehacker.com/2012/01/09/zoom-on-orientation-change-fix-for-mobile-browsers-mobilizing-websites-with-responsive-design-and-html5-part-8 /](http://opensourcehacker.com/2012/01/09/zoom-on-orientation-change-fix-for-mobile-browsers-mobilizing-websites-with-responsive-design-and-html5-part-8/)

# scala - Scala 缓冲区：大小还是长度？

> ID：14733833
> 
> 赞同：14
> 
> 时间：2013-02-06T16:22:45.233
> 
> 标签：scala, scala-collections

我正在使用一个可变的`Buffer`，需要找出它有多少元素。

`size`和方法都是`length`定义的，继承自不同的特征。

是否有任何实际的性能差异，或者它们可以被视为确切的同义词？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T17:01:38.113

它们是同义词，主要是 Java 决定使用`size`for 集合和`length`for `Array`and的结果`String`。一个总是根据另一个来定义，您可以通过查看源代码轻松查看哪个是哪个，scaladoc 上提供了链接。只需找到定义特征，打开源代码，然后搜索`def size`or `def length`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T16:42:09.577

在这种情况下，它们可以被视为同义词。您可能需要注意其他一些情况，例如`Array`- 虽然长度和大小将始终返回相同的结果，但在 Scala 2.10 之前的版本中，调用可能会有装箱开销`size`（由数组周围的 Scala 包装器提供） , 而`length` 由底层 Java Array 提供。

在 Scala 2.10 中，通过使用提供方法的值类已经消除了这种开销`size`，因此您可以随意使用您喜欢的任何方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-16T14:11:06.057

从 Scala-2.11 开始，这些方法*可能*具有不同的性能。例如，考虑以下代码：

```
val bigArray = Array.fill(1000000)(0)
val beginTime = System.nanoTime()
var i = 0
while (i < 2000000000) {
  i += 1
  bigArray.length
}
val endTime = System.nanoTime()
println(endTime - beginTime)
sys.exit(-1) 
```

在我的 amd64 计算机上运行它会产生大约 2423834 纳秒的时间（不时变化）。

现在，如果我将`length`方法更改为`size`，它将变为大约 70764719 纳秒时间。

这**慢了 20 倍**以上。

为什么会这样？没挖过，不知道 但是*在某些*情况下`length`，它们的`size`表现截然不同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T16:31:20.253

它们是同义词，就像状态的 scaladoc `Buffer.size`：

> 这个缓冲区的大小，相当于长度。

scaladoc for`Buffer.length`也很明确：

> 缓冲区的长度。注意： xs.length 和 xs.size 产生相同的结果。

简单的建议：在提问之前参考 scaladoc。

**更新**：刚刚看到您的编辑添加了对性能的提及。作为 Daniel C. Sobral 的助手，一个通常总是在另一个方面执行，因此它们具有相同的性能。

# mysql - 从 mysql 查询中排除“近”重复项

> ID：14733835
> 
> 赞同：3
> 
> 时间：2013-02-06T16:22:48.240
> 
> 标签：mysql, sql, database

我们有一个 iPhone 应用程序，我们的每个员工每天都会多次发送发票数据。当它们在低小区信号区域时，票据可以作为重复出现，但是它们在 mysql 数据库中被分配了一个唯一的“作业 ID”，因此它们被视为唯一的。我可以排除作业 ID 并使其余列 DISTINCT，这为我提供了我正在寻找的过滤行（因为实际上每个数据点都是相同的，除了作业 ID），但是我需要作业 ID，因为它是每张发票的主要参考点，也是我所指的：批准、编辑等。

所以我的问题是，如何在查询中过滤掉“接近”重复的行，同时仍然为每张工单提取作业 ID？

当前查询如下：

```
SELECT * FROM jobs, users
WHERE jobs.job_csuper = users.user_id
AND users.user_email = '".$login."'
AND jobs.job_approverid1 = '0' 
```

感谢您调查它！

编辑（提供的示例）：这就是我所说的“几乎重复”的意思

```
Job_ID - Job_title - Job_user - Job_time - Job_date
2345 - Worked on circuits - John Smith - 1.50 - 2013-01-01
2344 - Worked on circuits - John Smith - 1.50 - 2013-01-01
2343 - Worked on circuits - John Smith - 1.50 - 2013-01-01 
```

因此，除了 Job_ID 列之外，一切都是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:35:20.937

你想要一个`group by`：

```
SELECT *
FROM jobs, users
WHERE jobs.job_csuper = users.user_id
AND users.user_email = '".$login."'
AND jobs.job_approverid1 = '0'
group by <all fields from jobs except jobid> 
```

我认为最终的查询应该是这样的：

```
select min(Job_ID) as JobId, Job_title, user.name as Job_user, Job_time, Job_date
FROM jobs join users
     on jobs.job_csuper = users.user_id
WHERE jusers.user_email = '".$login."' AND jobs.job_approverid1 = '0'
group by Job_title, user.name, Job_time, Job_date 
```

（这使用 ANSI 语法进行连接，并且对返回的字段是明确的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:52:43.690

1.  最好防止重复提交。
2.  鉴于您无法阻止重复提交...

我会这样查询：

```
select
   min(Job_ID)          as real_job_id
  ,count(Job_ID)        as num_dup_job_ids
  ,group_concat(Job_ID) as all_dup_job_ids
  ,j.Job_title, j.Job_user, j.Job_time, j.Job_date
from
  jobs j
  inner join users u on u.user_id = j.job_csuper
where
  whatever_else
group by
  j.Job_title, j.Job_user, j.Job_time, j.Job_date 
```

这包括比您明确要求的更多。但是，提醒您有多少 dup 可能会很好，并且它可以让您在需要时轻松访问重复的 id 信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:30:00.623

如何为每一行创建一个哈希并比较它们：

```
`SHA1(concat_ws(field1, field2, field3, ...)) AS jobhash` 
```

# c# - 这个 DateTime 代码与 DateTime.now 有什么不同吗

> ID：14733837
> 
> 赞同：4
> 
> 时间：2013-02-06T16:22:51.793
> 
> 标签：c#

我在一些继承的遗留代码中遇到了以下方法。感觉它应该可以用一个简单的“ **return DateTime.Now** ”替换。然而，这似乎很明显，我不想做出改变，以防我错过了这段代码的一些隐藏意图。

```
public static DateTime GetTimeStamp() 
{
   return new DateTime(DateTime.Now.Ticks); 
} 
```

我的猜测是，当时实现者错误地认为“DateTime.Now”返回了一个引用而不是一个新实例，但是有没有人遇到过这个或者知道它可以以这种方式实现的真正原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:24:48.573

它与 DateTime.Now 相同。从 DateTime 获取刻度并将其放入构造函数将为您提供相同的日期时间：

[msdn => 日期时间（int64 滴答声）](http://msdn.microsoft.com/en-us/library/z2xf7zzk.aspx)

但是，您可能会失去 DateTime.Now 的时区意识：

```
The Kind property is initialized to Unspecified.

For applications in which portability of date and time data or a limited degree of time zone awareness is important, you can use the corresponding DateTimeOffset constructor. 
```

# css - 长内容的不同 CSS 规则

> ID：14733838
> 
> 赞同：1
> 
> 时间：2013-02-06T16:22:52.070
> 
> 标签：css

如果页面的内容是“长”的，是否可以根据信息准备不同的样式来更改页面布局。我想在内容长时启用 CSS3 列，并在内容短时禁用它们。

你如何定义“长”？它是开放的——它可以是一定数量的段落、一些像素等。

可以根据浏览器窗口宽度更改样式的类似媒体查询：

```
@media only screen and (min-width: 1278px) {
    /* code for wide-screen window */
} 
```

如果可能的话，我想使用纯 CSS 而不是 JavaScript（使用 JavaScript 很简单——我只需在测量页面偏移量后添加一个类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:37:14.340

据我所知，媒体查询没有办法

[高度](http://www.w3.org/TR/css3-mediaqueries/#height)属性的 w3 规范指定不是实际的内容高度，而是浏览器高度，类似于宽度属性。

我会按照您的描述使用快速的 JS 解决方案。

# c - 使用 GCC 强制自动矢量化

> ID：14733840
> 
> 赞同：2
> 
> 时间：2013-02-06T16:22:56.593
> 
> 标签：c, gcc, vectorization, simd

这是我非常简单的问题。使用 ICC，我知道可以使用 #pragma SIMD 来强制对编译器选择不进行矢量化的循环进行矢量化。GCC中有类似的东西吗？或者，是否有计划在未来的版本中添加此功能？

非常相关，用 Graphite 强制矢量化怎么样？

感谢您考虑我的要求法比奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:33:49.037

只要允许 gcc 使用 SSE/SSE2/etc 指令，编译器通常会在意识到它“值得”时生成向量指令。像编译器中的大多数事情一样，这需要程序员的一些运气/计划/小心，以避免编译器认为“这可能不安全”或“这太复杂了，我无法弄清楚发生了什么”。但通常情况下，如果您使用的是相当现代的 gcc 版本（4.x 版本都应该这样做），那么它是成功的。

`-msse`您可以通过添加或`-msse2`（等用于以后的 SSE 扩展）使编译器使用 SSE 或 SSE2 指令。`-msse2`在 x86-64 中是默认的。

但是，我不知道您可以通过任何方式强制执行此操作。编译器要么会这样做，因为它很高兴这是一个好的解决方案，要么不会。

抱歉，无法回答有关 Graphite 的问题。

# grails - 自定义简单约束grails

> ID：14733844
> 
> 赞同：3
> 
> 时间：2013-02-06T16:22:59.797
> 
> 标签：grails, customization, constraints

我想创建一个可以在我的 Domain 类中使用的自定义简单约束（如显示和可编辑）。是否可以扩展 ConstrainedProperty 类？

```
class City {
    String title
    BigDecimal latitude
    BigDecimal longitude
    Country country

    static constraints = {
        title       ( blank: false, customConstraint: true )  // filter can be also be applied as attributes: [customConstraint: true]
    }
} 
```

有熟悉这个案子的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:55:25.713

要创建自己的约束：

*   延长[`org.codehaus.groovy.grails.validation.AbstractConstraint`](http://grails.github.io/grails-doc/latest/api/org/codehaus/groovy/grails/validation/AbstractConstraint.html)
*   通过调用将类注册为约束[`org.codehaus.groovy.grails.validation.ConstrainedProperty.registerNewConstraint`](http://grails.github.io/grails-doc/latest/api/org/codehaus/groovy/grails/validation/ConstrainedProperty.html#registerNewConstraint%28java.lang.String,%20java.lang.Class%29)

以[grails 的大小约束](https://github.com/grails/grails-core/blob/master/grails-validation/src/main/groovy/org/grails/validation/SizeConstraint.java)实现为例。

# java - 地图的序列化

> ID：14733845
> 
> 赞同：1
> 
> 时间：2013-02-06T16:23:01.753
> 
> 标签：java, serialization

我有一个类，它就像一个地图的包装器。它是一个属性列表，主要用于名称，如下所示：

```
public class MyPropertyList implements Serializable
{
    private static final long serialVersionUID =  7896123434L;

    private LinkedHashMap<String,String> map;

    public static final String key1 = "key1";

    public static final String key2 = "key2";

    //More key values 

    public MyPropertyList(){
        map = new LinkedHashMap<String,String>();

   }

    public void addProperty(String key, String value){
       map.put(key,value);
    }

    public LinkedHashMap<String,String> getMapping(){
        return map;
    }

    public int getSize(){
       return map.size;
    }

     //...Other delegated calls
} 
```

这是一个糟糕的设计吗？它是否存在任何问题？有没有更好的设计来实现这个目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:26:43.140

使用Java 标准库中的[Properties类，它实现了 Serializable。](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T16:28:29.087

您发布的代码没有提供超过 LinkedHashMap 的额外功能，因此任何使用它的代码都可以直接使用 LinkedHashMap。

# c# - C# 中不兼容的匿名函数签名？

> ID：14733847
> 
> 赞同：2
> 
> 时间：2013-02-06T16:23:04.973
> 
> 标签：c#, .net

我想创建一个可以在对象上调用的扩展方法。

返回值将由函数定义。

像这样的东西：（*这只是一个例子*）

```
bool isMature= thePerson.Age.Apply<bool>(d =>   {    if (d >18) return true;
                                                        return false;
                                                 }) 
```

这是扩展方法：

```
 public static Tout Apply<Tout>(this Object obj, Func< Tout> f)  
        {

            return f( );
        } 
```

错误：*不兼容的匿名函数签名*

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T16:25:36.193

您的方法只需要一个`Func<Tout>`- 这是一个不*带*参数但*返回*一个值的函数。

您的 lambda 表达式有一个参数 ( `d`) - 看起来您假设它是一个整数。目前尚不清楚您要做什么，但如果您想在 lambda 表达式中使用参数，您将不得不将签名从`Func<TResult>`to`Func<TArg, TResult>`或类似的东西更改 - 并在调用中提供一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T16:30:19.770

如果看起来您希望委托实例的输入是属性值，那么您需要更改扩展方法的定义以采用此参数：

```
public static TOut ToFunc<TProperty, TOut>(this TProperty obj, Func<TProperty, TOut> f)  
{
   return f(obj);
}

// Usage
bool isMature = thePerson.Age.ToFunc<int, bool>(d => d > 18); 
```

无论问题是什么，这似乎都是一种奇怪的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T17:03:40.910

这是一个毫无意义的练习，[devdigital](https://stackoverflow.com/a/14734031/659190)已经回答了你的问题，但答案有什么用。

这样我就可以写代码了

```
var greaterThan18 = 20.ToFunc(n => n > 18); 
```

但是，我为什么不写

```
var greaterThan18 = 20 > 18; 
```

所获得的只是一层间接性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T16:58:58.037

我已经设法做类似的事情：

```
 public static Tout ToFunc<T,Tout>(this T obj, Func<T, Tout> f)  
        {
            return f(obj);
        } 
```

调用是

```
 var isMature = theperson.Age.ToFunc<int, bool>(i => i > 18); 
```

但是，我讨厌`<int, bool>`每次都指定

但是感谢 resharper - 它*提醒*了我 - 我可以像这样调用它：

```
 var isMature = theperson.Age.ToFunc(i => i > 18); 
```

不过，对于小事来说，它是一个不错的工具。（虽然最好有一个 bool 属性来指示`isMature`....但是 ....你知道，它很好。）

# javascript - 服务器端和客户端javascript

> ID：14733848
> 
> 赞同：1
> 
> 时间：2013-02-06T16:23:09.363
> 
> 标签：javascript, jquery, node.js, client-side, server-side

服务器端javascript是否存在，如果是，客户端javascript是否可以与服务器端javascript交互？

例如，客户端javascript是否可以从服务器端javascript请求返回存储在服务器上的json文件的一部分而不下载整个json文件？

我知道我可以使用其他服务器端语言（如 aspx、php 等）来执行此操作，但想知道服务器端 javascript 是否存在以及它是否可以对 json 文件执行类似的操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:25:05.867

> 服务器端javascript是否存在

[http://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions](http://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions)

[Node.js](http://nodejs.org/)是当前流行的方法。

> 如果是，客户端javascript是否可以与服务器端javascript交互？

是的。在 WWW 的上下文中，这通常与任何其他与服务器端程序进行通信的方式相同：通过发出 HTTP 请求（通常通过 XMLHttpRequest）。

> 例如，客户端javascript是否可以从服务器端javascript请求返回存储在服务器上的json文件的一部分而不下载整个json文件？
> 
> 我知道我可以使用其他服务器端语言（如 aspx、php 等）来执行此操作，但想知道服务器端 javascript 是否存在以及它是否可以对 json 文件执行类似的操作？

JavaScript 是一种编程语言。它可以在服务器上或多或少地做任何其他语言可以做的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:24:51.520

后端和前端技术通常几乎总是通过 HTTP 请求/响应进行通信。这允许任何一对技术以与语言无关的方式进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:51:26.470

继续昆汀上面所说的

服务器端 JavaScript 是完全可能的，是的，使用 Node.js 还将为您提供比简单的 XMLHttpRequest 更广泛的范围。

使用带有 NodeJ 的模块 try Websocket.io 可以让您更轻松地在客户端和服务器之间进行对话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T22:07:26.737

带有 jquery 的客户端：

```
$(document).ready(function(){
  function fireAjax(){
    $.getJSON('/ajax/partialJSON', {desiredKey:'foo'}, function(data){
      console.log(data);
    });
  };
  $('#button').on('click', fireAjax)
}; 
```

服务器端，使用 node.js 和 Express Web 框架：

```
app.get('/ajax/partialJSON', function(req,res){
  var key = req.query['desiredKey'];
  // parse your JSON here
  var data = {foo:'Hello;', bar:'World'};
  var value = data[key] || null;
  res.json(value);
}); 
```

# javascript - javascript回调函数结果

> ID：14733854
> 
> 赞同：0
> 
> 时间：2013-02-06T16:23:23.187
> 
> 标签：javascript, jquery, loops, callback

```
for (var i=0; i<10; i++) {
    var box = $('div.container');

    (function(x) {
        request(box[i], function(n) {    
            //question about function(n) here
        }
    })(i)
}

function request(boxContainer, callback) {
    $.getJSON(url, function(data) {
        //dataArray is created here
    }

    boxContainer.innerHTML = '';

    $.each(dataArray, function(idx, v){
        boxContainer.innerHTML += '<div class="output"><h4>..</h4><p>..</p></div>';
    }

    callback(data);
} 
```

该`request()`函数应`output`为 for 循环中的 10 个产品中的每一个产品生成一个 div 容器。

我的问题是：

调用`request()`函数完成后，到了回调函数执行的时间，是10个div容器都创建好了还是只`box[i]`创建了一个for呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:38:00.983

[您在循环](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)中使用闭包的尝试是正确的，但您使用了错误的变量名 - 它`x`不应该是`i`：

```
for (var i=0; i<10; i++) {
    var box = $('div.container');

    (function(x) {
        request(box[x], function(n) {    
            //question about function(n) here
        }
    })(i)
} 
```

顺便说一句，您的选择`box`应该已经移到循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:29:56.190

我认为它只是在那个时候创建​​了 box[i] 的那个。对于创建后的回调，您可以使用 jQuery 的 promise 和 defered 系统，[请参见此处](http://api.jquery.com/jQuery.when/)（多个）。或者您可以在代码中维护一个计数器，以便仅在达到 10 的目标后执行一些代码。

也许像这样 var target = counter = 10, data={}; 对于 (var i=0; 我

```
 (function(x) {
        request(box[x], function(n) {
            data[x] = n;
            if(--counter == 0) {
                //all are done
            }
        }
    })(i)
} 
```

# android - Tabris 0.10.0 演示的安装问题

> ID：14733859
> 
> 赞同：0
> 
> 时间：2013-02-06T16:23:40.533
> 
> 标签：android, adt, tabris

我需要一些帮助来获取下载、安装 Tabris 0.10.0 演示并将其运行到 Eclipse 和 Android ADT 中的确切步骤...

我的出发点是使用 Eclipse Android ADT，其中 helloworld 示例在 Android 模拟器以及通过 USB 连接的外部 Android 设备上运行良好。

> 下载“Tabris-0.10.0-SDK.zip”并在某处解压（如果有什么不同，我在 Win 7 64bit 上）
> 
> 从 SDK 的“android\tabris-android-0.10.0.zip”导入现有项目。一切都很好，成功了，我可以在 Android 上成功地将它作为 Tabris 应用程序运行。

接下来我想让 Tabris 演示在本地工作，而不是仅仅运行一个指向 EclipseSource Web 资源的应用程序，为此我假设我需要 Tabris 服务器，所以......

> 从 github 下载“tabris-0.10.0.zip”并导入我的工作区，这给了我项目 com.eclipsesource.tabris/tabris.build/tabris.feature/tabris.repository/tabris.target/target.test

导入没问题，但在项目“com.eclipsesource.tabris”和“com.eclipsesource.tabris.test”中显示错误，例如“org.junit 无法解析”和“org.mockito 无法解析”。

> 我认为这是因为我需要将 Tabris 目标设置为当前目标平台，因此从刚刚导入的“com.eclipsesource.tabris.target”中打开“tabris.target”并点击“设置为目标平台”。

这很快完成并清除了“com.eclipsesource.tabris.test”的问题，但我在“问题”视图中看到的“ **com.eclipsesource.tabris ”中存在一个新错误：“****尚未设置 API 基线当前工作区。** "。

知道如何解决这个问题吗？

假设我们可以克服上述问题，那么我将继续：

> 导入我从 github 下载的名为“tabris-demos-0.10.0.zip”的 Tabris 演示项目。我假设所有这些版本都是兼容的（？）尝试使用所有标记为“0.10.0”的东西，我可以找到一个。

此 zip 包含项目“com.eclipsesource.tabris.demos/demos.build/demos.feature/demos.product”。这一切都可以导入，没有新的错误。

但是，此时我无法对它们做任何事情，因为我仍然遇到“com.eclipsesource.tabris”中的前一个问题 - “问题”视图：“尚未为当前工作区设置 API 基线。”

好的，也许在这里超越自己，但假设有人能够帮助我克服这个错误，那么我该如何启动 Tabris 服务器端？哪个项目应该作为 RAP 应用程序运行，还是与此稍有不同？

抱歉，如果这是基本且显而易见的，但似乎有很多组件可以让本地 Tabris 应用程序运行，我对哪个部分做什么感到困惑！所有帮助表示赞赏！

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:10:33.150

tabris 团队添加了 api 基线，以便它可以跟踪功能何时添加到版本中。您可以自己在 Eclipse 中设置 api 基线，或者通过设置以下选项来忽略该警告：“Preferences -> Plug-in-Development -> API Baselines” -> “Missing API baseline”（在底部）。

# unix - 如何使用 maven 解压缩符号链接？

> ID：14733868
> 
> 赞同：4
> 
> 时间：2013-02-06T16:24:16.623
> 
> 标签：unix, maven, zip, symlink

我有存储在 zip 文件中的符号链接。

使用 Mac OS 系统解压缩该文件时，会保留符号链接（也就是说，它们是符号链接，因此也是如此）。

但是，当使用 maven（特别是[unpack-dependencies](https://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html) mojo）解压缩它们时，它们会显示为简单文件。

那么，是否有保留该标志的 Maven 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:08:06.593

我建议尝试使用[truezip-maven-plugin](http://mojo.codehaus.org/truezip/truezip-maven-plugin/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:40:31.450

符号链接并非在所有操作系统上都实现。事实上，在查看了[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html)之后，我认为 SDK 根本不支持这种 zip 条目——据我所知，它只是文件和目录。由于这个原因，我也不会说这是依赖插件的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T08:51:33.803

根据其他答案，似乎很少有纯 Java 库允许解压缩符号链接。

在这样的解决方案中，要拥有一个纯粹的多平台构建，不要简单地为每个操作系统创建一个模块，因为这会导致经典的模块军备竞赛，更实际地说，它不适合这个模块生命周期。

因此，我使用了经典的 maven 脚本解决方案：[GMaven](http://docs.codehaus.org/display/GMAVEN/Executing+Groovy+Code)！

这导致了这个不太漂亮的剧本

```
 <plugin>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>unzip native code using Groovy</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <providerSelection>${gmaven.provider.version}</providerSelection>
                            <source>
<![CDATA[

def ant = new AntBuilder()

def FOLDERS_TO_EXPLORE = [] /* put here the list of folders in which zip files will be recursively searched */

def unzip(File file) {
    def RUN_ON_WINDOWS = System.getProperty("os.name").toLowerCase().indexOf("win")>=0
    if(RUN_ON_WINDOWS) {
        log.debug "unzipping windows style"
        ant.unzip(  src: file, dest:file.parentFile,  overwrite:"true")
    } else {
        def result = ant.exec(outputproperty:"text",
                 errorproperty: "error",
                 resultproperty: "exitValue",
                 dir: file.parent,
                 failonerror: true,
                 executable: "unzip") {
                       arg(value:file.name)
                 }

        if(Integer.parseInt(ant.project.properties.exitValue)!=0) {
            log.error "unable to unzip "+file.name+" exit value is "+ant.project.properties.exitValue
            log.error "=========================================================\noutput\n=========================================================\n"+ant.project.properties.text
            log.error "=========================================================\nerror\n=========================================================\n"+ant.project.properties.error
            fail("unable to unzip "+file)
        } else {
            log.info "unzipped "+file.name
        }
    }
    file.delete()
}

def unzipContentOf(File file) {
    file.eachFileRecurse { 
        if(it.name.toLowerCase().endsWith("zip")) {
            unzip(it)
        }
    }
}

FOLDERS_TO_EXPLORE.each { unzipContentOf(new File(it)) }
]]> 
```

# android - 调整可绘制图层列表内的位图大小 2

> ID：14733869
> 
> 赞同：4
> 
> 时间：2013-02-06T16:24:18.953
> 
> 标签：android, android-activity, styles

如何像 android:scaleType="fitCenter" 那样缩放位图？

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/gradient"/>
    <item android:bottom="60dip">
        <bitmap
                android:gravity="center_horizontal|bottom"
                android:src="@drawable/image"/>
    </item>
</layer-list> 
```

我有 680x120px 的图像，图像不适合小屏幕。我一直在尝试重力，但它对我没有帮助（例如，我看到的图像是 240x120，但不是 240x42）。我将此样式用于活动背景，但不能使用 ImageView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:26:03.353

如果您不使用**<LinearLayout>**，请尝试在您的方法中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T04:55:12.747

同样的问题，但我用重力填充水平解决了这个问题，第二个最重要的事情是你必须使用像 240p X 240p 这样的方形图像/png，然后图片会自动调整到屏幕大小。

```
<item
    android:drawable="@drawable/back">

</item>

<item>
        <bitmap
            android:gravity="fill_horizontal"

            android:tileMode="disabled"
            android:src="@drawable/logo"/>

</item> 
```

# python - Pandas 中的多索引排序

> ID：14733871
> 
> 赞同：97
> 
> 时间：2013-02-06T16:24:31.443
> 
> 标签：python, sorting, pandas, multi-index

我在 pandas df 中有一个包含多索引列的数据集，我想按特定列中的值进行排序。我曾尝试使用 sortindex 和 sortlevel，但无法获得我正在寻找的结果。我的数据集如下所示：

```
 Group1    Group2
    A B C     A B C
1   1 0 3     2 5 7
2   5 6 9     1 0 0
3   7 0 2     0 3 5 
```

我想按第 1 组中的 C 列按降序对所有数据和索引进行排序，因此我的结果如下所示：

```
 Group1    Group2
    A B C     A B C
 2  5 6 9     1 0 0
 1  1 0 3     2 5 7
 3  7 0 2     0 3 5 
```

是否可以使用我的数据所在的结构进行这种排序，或者我应该将 Group1 交换到索引端？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-02-06T16:36:27.460

当按 MultiIndex 排序时，您需要包含描述列表*中列的元组：

```
In [11]: df.sort_values([('Group1', 'C')], ascending=False)
Out[11]: 
  Group1       Group2      
       A  B  C      A  B  C
2      5  6  9      1  0  0
1      1  0  3      2  5  7
3      7  0  2      0  3  5 
```

**以免让 pandas 误以为您想先按 Group1 排序，然后按 C 排序。*

* * *

注意：最初使用[`.sort`](http://pandas.pydata.org/pandas-docs/version/0.19/generated/pandas.DataFrame.sort.html)自弃用，然后在 0.20 中删除，支持[`.sort_values`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html).

# python - 当满足标准时，为什么 django-badges 不奖励徽章？

> ID：14733878
> 
> 赞同：1
> 
> 时间：2013-02-06T16:24:51.380
> 
> 标签：python, django

我正在尝试在我的项目中实现 django-badges，并且我正在尝试授予 Autobigrapher 徽章以填写个人资料字段，但从未授予过徽章（已确认，因为在数据库中没有创建任何内容）。但是，如果我创建一个视图，该视图将使用 get_progress() 或 get_progress_percentage() 返回用户徽章的进度，则表明满足所需的条件。例如，我的测试视图如下所示：

```
#views.py
def badges(request, name):
    user = get_object_or_404(User, username=name)
    badge = Badge.objects.get(id='autobiographer')
    progress = badge.meta_badge.get_progress(user)
    progress_percentage = badge.meta_badge.get_progress_percentage(user)
    return render('badges.html', {'badge': badge, 'progress': progress, 'progress_percent': progress_percent}, request=request)

#badge_template.html
{{ progress }}
<br />
{{ progress_percent }}

#meta_badges.py
class Autobiographer(badges.MetaBadge):
    id = "autobiographer"
    model = BaseProfile
    one_time_only = True

    title = "Autobiographer"
    description = "Completed 5 User Profile Fields"
    level = "1"

    progress_start = 0
    progress_finish = 5

    def get_user(self, instance):
        return instance.user

    def get_progress(self, user):
        has_avatar = 1 if user.get_profile().avatar else 0
        has_city = 1 if user.get_profile().city else 0
        has_twitter = 1 if user.get_profile().twitter else 0
        has_facebook = 1 if user.get_profile().facebook else 0
        has_linkedin = 1 if user.get_profile().linkedin else 0
        has_google_plus = 1 if user.get_profile().google_plus else 0
        has_tumblr = 1 if user.get_profile().tumblr else 0
        return has_avatar + has_city + has_twitter + has_facebook + has_linkedin + has_google_plus + has_tumblr

    def check_avatar(self, instance):
        return instance.user.get_profile().avatar

    def check_city(self, instance):
        return instance.user.get_profile().city

    def check_twitter(self, instance):
        return instance.user.get_profile().twitter

    def check_facebook(self, instance):
        return instance.user.get_profile().facebook

    def check_linkedin(self, instance):
        return instance.user.get_profile().linkedin

    def check_tumblr(self, instance):
        return instance.user.get_profile().tumblr

    def check_google_plus(self, instance):
        return instance.user.get_profile().google_plus 
```

如果 user1 填写了 5 个配置文件字段，example.com/badges/user1 看起来像：

```
5
100 
```

任何人成功使用 django-badges 并知道我缺少什么，或者是否有另一种有效的徽章解决方案？它似乎很容易使用，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:53:44.597

不知道你是否还在使用 django-badges 或者仍然有这个问题，因为帖子已经一个月了。我也在我的项目中使用 django-badges，它工作正常。

我认为您的代码中的问题是您混合了两个概念，即进度数据和赢得徽章的真正标准。如果他填写了徽章所需的所有七个个人资料字段，该应用程序只会奖励您的一位用户。另一方面，进度仅评估五个字段已填写。

您可以实现一个类似于 get_progress 的单一检查方法，如果已填写五个或更多字段，则返回 True：

```
 def check_fields(self, instance):
        has_avatar = 1 if instance.user.get_profile().avatar else 0
        has_city = 1 if instance.user.get_profile().city else 0
        has_twitter = 1 if instance.user.get_profile().twitter else 0
        has_facebook = 1 if instance.user.get_profile().facebook else 0
        has_linkedin = 1 if instance.user.get_profile().linkedin else 0
        has_google_plus = 1 if instance.user.get_profile().google_plus else 0
        has_tumblr = 1 if instance.user.get_profile().tumblr else 0
        fields_filled = has_avatar + has_city + has_twitter + has_facebook + has_linkedin + has_google_plus + has_tumblr
        return fields_filled >= 5 
```

希望这可以帮助！

# python - Python 的最佳实践：assert command() == False

> ID：14733883
> 
> 赞同：3
> 
> 时间：2013-02-06T16:25:02.130
> 
> 标签：python, unit-testing, assert

我想知道什么是更好/最好的：

```
>>> def command():
...     return False
...
>>> assert command() == False
>>> assert command() is False
>>> assert not command() 
```

干杯，马库斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T16:34:39.060

可以在这里研究编码约定： [PEP 8 Style Guide for Python Code](http://python.org/dev/peps/pep-0008/#programming-recommendations)

在那里你会发现：

> 不要使用 == 将布尔值与 True 或 False 进行比较

```
Yes:   if greeting:
No:    if greeting == True:
Worse: if greeting is True: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T16:31:24.043

最pythonic的是第三个。它相当于：

```
assert bool(command()) != False 
```

# jquery - 将 jquery ui 图标添加到提交按钮

> ID：14733886
> 
> 赞同：6
> 
> 时间：2013-02-06T16:25:09.083
> 
> 标签：jquery, html, jquery-ui, button

我的页面有以下提交按钮的代码： html 标记是：

```
<td align="Right"><input type="submit" value="Add Driver" ></td> 
```

jquery是：

```
$( "input[type=submit]" ).button().click(function( event ) {
event.preventDefault();
}); 
```

我将如何在上面添加一个 ui 图标，特别是`ui-icon-circle-plus`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:38:18.460

您可以像这样更改 HTML：

```
<button type="submit">
    Add Driver
</button> 
```

然后像这样更新你的脚本：

```
$('button[type=submit]').button({icons: {primary: 'ui-icon-circle-plus'}}).click(function (event) {
    event.preventDefault();
}); 
```

演示：http: [//jsfiddle.net/mh5Pu/](http://jsfiddle.net/mh5Pu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:34:58.740

查看[http://jqueryui.com/button/#icons](http://jqueryui.com/button/#icons)上的示例（特别是图标）。

尝试使用按钮，而不是使用提交输入。

这是带有 ui-icon-circle-plus 的仅图标按钮的修改版本：

```
<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only"     role="button" aria-disabled="false" title="Button with icon only">
<span class="ui-button-icon-primary ui-icon ui-icon-circle-plus"></span>
<span class="ui-button-text">Button with icon only</span>
</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:27:28.373

这应该工作

```
$( "input[type=submit]" ).button({icons: {primary: "ui-icon-circle-plus"}})      .click(function( event ) {
event.preventDefault();
}); 
```

或者你之后设置它：

```
$( "input[type=submit]" ).button( "option", "icons", { primary: "ui-icon-circle-plus", secondary: "<your_second_icon>" } ); 
```

[这](http://jsfiddle.net/Kfubw/)是一个工作示例。

# sql - SQL 别名 - 仅限于字符串？

> ID：14733895
> 
> 赞同：-1
> 
> 时间：2013-02-06T16:25:25.493
> 
> 标签：sql, sql-server-2008, stored-procedures, alias

我环顾四周，似乎不可能，但问题是，当使用别名作为列名时，我是否仅限于字符串别名？

我有一个存储过程，它将一些数据转储到一个临时表中，稍后我查询该表以导出报告。

这个临时表上有几列代表来自特定周的数据，将周中的日期作为列名会很有帮助，但我似乎无法使用中使用的日期变量来做到这一点存储过程 (@dt)。

我可以对应用程序中的列名进行这种操作并获得相同的结果，但是如果我可以将这种类型的逻辑保留在存储过程中而不是将其分布在数据库和应用程序之间，那会更清晰。

例子：

```
declare @myname varchar(10)
set @myname = 'My Name'
SELECT FirstName AS '@myname'
FROM User
WHERE LastName = 'Smith' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:31:01.500

将您的别名放在双引号中，如下所示：

```
 select categoryid "@2" from Category 
```

# powershell - 使用 Powershell 自动化 Visual Studio 2012，做错了吗？

> ID：14733896
> 
> 赞同：3
> 
> 时间：2013-02-06T16:25:25.710
> 
> 标签：powershell, visual-studio-2012, envdte

我正在使用 powershell 探索 Visual Studio 自动化。至少从我能找到的情况来看，powershell 似乎是用于自动化视觉工作室的东西。

```
$dte = New-Object -ComObject VisualStudio.DTE 
```

上面这行，我看到在进程监视器中创建了一个新的 Visual Studio 10 denenv.exe，然后还抛出了一个关于无法创建对象的警告。

```
WARNING: Creating an instance of the COM component with CLSID {656D8328-93F5-41A7-A48C-B42858161F25} from the IClassFactory failed due to the following error: 80010001. 
```

似乎可能因为有延迟，所以可能有超时。此 CLSID 用于 Visual Studio 10 DTE，看来 2012 年没有 DTE。

我可以创建一个 Visual Studio 2012 实例吗？或者这有关系吗？还是我接近这一切都错了？

我真正想做的就是创建一个解决方案，然后遍历一个目录来添加我能找到的所有 .csproj 文件。我有大约 70 个奇怪项目的存储库，我想将它们放入一个大型解决方案中。这个 powershell 解决方案似乎不再是最好的方法了。

如果我只是手动完成此操作，现在肯定可以完成此操作，但我认为这是一个有趣的探索性练习，但现在它只是变得令人头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:41:57.103

我认为这个插件应该适合我的需要：[Solution Maker](http://visualstudiogallery.msdn.microsoft.com/48b12951-a351-4341-bc1f-474f2f468053?SRC=VSIDE)

# jakarta-ee - 使用 Atmosphere Framework 访问客户端 IP

> ID：14733897
> 
> 赞同：0
> 
> 时间：2013-02-06T16:25:29.660
> 
> 标签：jakarta-ee, websocket, ip, atmosphere

有没有办法使用 Atmosphere Framework 的 AtmosphereResource 或 WebSocket 访问客户端的 IP？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T19:48:56.707

这是代码：

```
AtmosphereResource.getRequest().getRemoteAddr() 
```

# python - Python中的任意字典（JSON）到更严格的树状字典（JSON）

> ID：14733900
> 
> 赞同：2
> 
> 时间：2013-02-06T16:25:35.607
> 
> 标签：python, json, recursion, tree, dictionary

伙计们，

我有任意字典，可能有任意数量的其他字典和数组的嵌套，例如：

```
{
    "a": {
        "b": "1",
        "c": [
            {
                "d": "2"
            },
            {
                "d": {
                    "e": "3",
                    "f": "4"
                }
            }
        ]
    }
} 
```

我想把它很好地表示为一棵树，为了做到这一点，我想将它转换为一个结构，例如：

```
{
    "name": "a",
    "children": [
        {
            "name": "b",
            "value": "1"
        },
        {
            "name": "c",
            "children": [
                {
                    "name": "d",
                    "value": "2"
                },
                {
                    "name": "d",
                    "children": [
                        {
                            "name": "e",
                            "value": "3"
                        },
                        {
                            "name": "f",
                            "value": "4"
                        }
                    ]
                }
            ]
        }
    ]
} 
```

我认为这样做需要类似地处理子字典和子数组。但是，我很难想出一种方法来进行这种转变。我曾尝试使用递归，也尝试使用包含“名称”、“值”和“孩子”的键/值的节点类，但我很难解析任意深度的输入创建此常规节点/树表示。

这看起来像人们以前做过的事情吗？非常感谢您的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:51:49.557

您正确地将其识别为树状数据结构，并且转换它是非常明智的，因为原始表示已被完全破坏。

既然你知道你有一棵树，你需要问自己它的节点是什么。在您的情况下，节点是：

1.  一片叶子，它有一个名字和一个值
2.  一个内部节点，它有一个名字和孩子

问题在于第二种类型有两种不同的表示形式：

1.  一双`("<name>", { "<child1>" : ..., "<child2>" })`
2.  一双`("<name>", [{"<child1>" : ... }, { "<child2>": ... }])`

您的示例没有显示它，但也许以下也是可能的：

`("<name>", [{"<child1>" : ... }, { "<child2>": ..., "<child3>": ... }])`

递归确实是解决这个问题的好方法。边缘情况很清楚，它是叶节点。您只需要先检查其他两种情况：

```
def transform_node(name, val):
    if isinstance(val, list):
        val = ("children", [transform_node(k,v) for x in val for k, v in x.items()])
    elif isinstance(val, dict):
        val = ("children", [transform_node(*kv) for kv in val.items()])
    else:
        val = ("value", val)
    return dict([("name", name), val]) 
```

现在你得到：

```
>>> transform_node("a", 3)
{'name': 'a', 'value': 3}
>>> transform_node("a", { "c1" : 3, "c2" : 4 })
{'name': 'a', 'children': [{'name': 'c2', 'value': 4}, {'name': 'c1', 'value': 3}]}
>>> transform_node("a", [{ "c1" : 3 }, { "c2" : 4, "c3": 5 }])
{'name': 'a', 'children': [{'name': 'c1', 'value': 3}, {'name': 'c3', 'value': 5}, {'name': 'c2', 'value': 4}]} 
```

完美的！现在你可以这样做：

```
>>> tree = { "a": { "b": 1 }}
>>> transform_node("root", tree)
{'name': 'root', 'children': [{'name': 'a', 'children': [{'name': 'b', 'value': 1}]}]} 
```

当然，如果您希望“a”成为根，那么您可以提取根的第一个孩子。

也就是说，最好将其表示为使用类的真实数据类型，而不是完全无类型的字典。

# python - Python中的内存高效groupby

> ID：14733905
> 
> 赞同：0
> 
> 时间：2013-02-06T16:25:49.670
> 
> 标签：python

我有一个按字段排序的非常大的文件。我想读取这些数据并将行组合在一起，而不是在字段中包含相同的值。例如：

我有一个包含两个字段的文件：

```
12    fish
50    fish
1     turtle
11    dog
34    dog
12    dog 
```

我正在寻找使用迭代器或生成器的解决方案。我不可能将所有数据读入内存，一次只能读取一组（内部列表）。我试图使用 groupby，但不知道如何根据字段中的相同值进行分组。

我怎样才能像这样的产品列表：

```
[[12, fish], [50, fish]]
[[1, turtle]]
[[11, dog], [34, dog] [12, dog]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T16:28:07.487

```
from itertools import groupby
from operator import itemgetter

with open('somefile') as fin:
    lines = (line.split() for line in fin)
    for key, items in groupby(lines, itemgetter(1)):
        print list(items)

[['12', 'fish'], ['50', 'fish']]
[['1', 'turtle']]
[['11', 'dog'], ['34', 'dog'], ['12', 'dog']] 
```

# php - 在文件名中使用 & 取消链接 php 错误

> ID：14733908
> 
> 赞同：0
> 
> 时间：2013-02-06T16:25:56.063
> 
> 标签：php, unlink

如果文件名中有 &，我无法使用 php 取消链接文件。

```
unlink('../mydoc/in&out.pdf'); 
```

错误说：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:28:32.527

您应该转义特殊字符。

```
 unlink('../mydoc/in\&out.pdf'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:59:04.610

您需要提供文件的完整路径。

# ruby-on-rails - 从子窗体创建模型实例

> ID：14733913
> 
> 赞同：0
> 
> 时间：2013-02-06T16:26:05.737
> 
> 标签：ruby-on-rails, ruby

我有一个属于 :city :state 和 :country 的用户模型。

城市模型属于一个州。

一个国家模型属于一个国家。

当用户注册时，他们应该能够选择一个位置（城市州和国家/地区），或者如果它不在数据库中，则添加一个。问题是，在添加城市和州时，我希望能够将它们分别与他们的州或国家相关联。到目前为止我所拥有的是这个

在我的用户模型中

```
belongs_to  :state 
belongs_to  :city
belongs_to  :country     

def city_name
  city.try(:name)
end

def city_name=(name)
  self.city = City.find_or_create_by_name(name.titleize) if name.present?
end

def country_name
  country.try(:name)
end

def country_name=(name)
  self.country = Country.find_or_create_by_name(name.titleize) if name.present?
end

def state_name
  state.try(:name)
end

def state_name=(name)
  self.state = State.find_or_create_by_name(name.titleize) if name.present?
end 
```

在我的用户/新表单中

```
<div class="field">
  <%= f.label :your_city %><br />
  <%= f.text_field :city_name, data: {autocomplete_source: cities_path} %>
  <br /> or <%= link_to "add New Location" ,"javascript:toggleDiv('hideme');"%>
</div>
<div id="log"></div>

<div id="hideme">
  <div class="field">
    <%= f.label :country_name %><br />
    <%= f.text_field :country_name %>
  </div>

  <div class="field">
    <%= f.label :state_name %><br />
    <%= f.text_field :state_name %>
  </div>
</div> 
```

通过这种方式，我创建了一个用户并将其与一个城市州和国家/地区相关联，但城市州和国家/地区是浮动的，与它们各自的州和国家/地区父级没有关联。有没有办法在创建用户时关联这些模型？我应该放弃这种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:56:00.740

我认为这样做的地方会陷入`before_save`困境（或者`before_create`如果城市、州和国家永远不会改变）。

也许是这样的：

```
class User < ActiverRecord::Base
  before_save :city_state_country_setup

  ...

  private

  def city_state_country_setup
    self.state.update_attributes(country_id: self.country.id)
    self.city.update_attributes(state_id: self.state.id)
  end
end 
```

但我建议您重新考虑数据的结构。您有可能导致模型之间发生冲突的冗余链接。例如，如果您更改了用户的状态，但不更改他或她所在城市的状态，那么用户的状态和用户所在城市的状态之间就会发生冲突。

解决此问题的一种方法是通过更紧密的关联来定义用户的州或国家：

```
class User
  belongs_to  :city

  #New accessor methods for state and country
  def state
    @state ||= self.city.state
  end

  def state=(s)
     self.city.state = s
  end

  def country
    @country ||= self.state.country
  end

  def country=(c)
     self.state.country = c
  end

  ...

end 
```

这样，用户、城市、州和国家之间的关系都只在一个地方定义，这使得它们不太容易发生冲突。这种方法唯一需要注意的是，您必须确保在创建用户时，在尝试添加州之前创建城市，并且在国家之前创建州。您可以在控制器中执行此操作，也可以在`before_save`挂钩中再次执行此操作。

# c# - 与 Parallel.Invoke() 一起使用时出现 System.AggregateException 异常

> ID：14733914
> 
> 赞同：0
> 
> 时间：2013-02-06T16:26:12.597
> 
> 标签：c#, parallel-processing, wmi

我正在尝试使用`Parallel.Invoke()` 两个 exe 并行运行 2 个 exe 都试图访问同一个数据库（但不同的表）。此外，exe 将在两个不同的服务器上运行。我正在使用带有 C# 的 WMI 来启动远程服务器中的批处理文件（它将调用另一个 exe 文件）。

```
Parallel.Invoke(() =>
            {
                RunInParallel();
            },
            () =>
            {
                InvokeModule("EmiCalculator.exe");
            } 
            );

void RunInParallel()
{
                var connoptions = new ConnectionOptions();
                var managementScope = new ManagementScope
                    (String.Format(@"\\{0}\ROOT\CIMV2", REMOTE_COMPUTER), connoptions);
                var wmiProc = new ManagementClass(managementScope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
                string commandLineInput = @"\\win-server1\D$\Data\Run.bat";
                var processToRun = new[] { commandLineInput };
                wmiProc.InvokeMethod("Create", processToRun);
} 
```

Run.bat 正在调用 SalaryCalculator.exe

这两个 exe 都有一个带有 ConnectionString 的配置文件，如下所示。

```
<add name="CONN" connectionString="Data Source=SERVER1-LAB1;Initial Catalog=Loan;Integrated Security=True"/> 
```

运行时，远程计算机中的 exe 崩溃并抛出异常：

```
Application: SalaryCalculator.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AggregateException
Stack:
   at System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[], Int32, System.Threading.CancellationToken)
   at System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[], Int32)
   at System.Threading.Tasks.Task.WaitAll(System.Threading.Tasks.Task[]) 
```

注意：如果我在连接到远程机器后运行批处理文件，它工作得很好。使用 with 时只会抛出错误`Parallel.Invoke()`

我怎样才能在这里进行？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-07T13:36:58.073

我能够完成这项工作。问题是连接字符串，因为提到了集成安全。我只是将连接字符串更改为使用`SQL server authentication`而不是 Windows 身份验证。它工作得很好。

```
< add name="CONN" connectionString="Data Source=SERVER1-LAB1;Initial Catalog=Loan;User Id=sa;Password=xxxx12345678" /> 
```

# facebook-graph-api - 一天只有7股？OAuthException 341

> ID：14733924
> 
> 赞同：0
> 
> 时间：2013-02-06T16:26:22.993
> 
> 标签：facebook-graph-api, limit, facebook-oauth

我们正在敲定一个使用 Facebook 应用程序登录用户的新网站。

我们当然已经在 Facebook 上发布了很多测试帖子来测试功能，但现在遇到了这个错误：“OAuthException: (#341) Feed action request limit reached”

我们使用 Facebook API 在一天内只分享了 7-9 次 FB 后就得到了这个。可能是因为消息的内容（例如“测试评论”、“lorem ipsum”等）。我们猜测这已被视为“垃圾邮件”，从而降低了限制。

但是，嘿。这样不好。由于限制，现在很难测试。当我们启动时会发生什么？每天最多 7 股？

非常感谢这里的任何建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:29:45.363

“Facebook 确实对您的应用每天可以完成的帖子数量实施了限制。这不是一个硬性的数字，并且会因应用程序和应用程序的行为而异。如果您的应用程序产生低质量的帖子（垃圾邮件），根据人们评论、喜欢或隐藏您的应用帖子的次数来衡量，Facebook 将降低您的每日限制。这些限制以“桶”表示，可以在您应用的洞察页面上看到。

如果超出限制，您将从 Facebook API 收到一条错误消息。错误号为 341，描述为“已达到 Feed 操作请求限制”。这是在每个用户、每天的基础上强制执行的。”

有类似的经历，并在寻找 FB 限制帖子数量的原因时遇到了这篇帖子。我们实际上是在对来自 FB 授权的应用分享新闻文章进行一些测试，由于我们一遍又一遍地分享相同的链接，它会将它们标记为垃圾邮件，并将我们的限制减少到 7 个！

这里有一些指导方针。[http://edoceo.com/notabene/facebook-api-oauhexception-341](http://edoceo.com/notabene/facebook-api-oauthexception-341)

如果您碰巧正在测试，请确保您没有进行垃圾邮件测试，因为这会降低应用程序的限制。

# asana - 如何从我的工作区中删除 asana 中的用户？

> ID：14733926
> 
> 赞同：2
> 
> 时间：2013-02-06T16:26:32.610
> 
> 标签：asana

我在工作区中添加了一个客户，现在我想从我的工作区中删除他，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T11:59:33.280

1.  导航到您的工作区。
2.  单击工作区栏右侧的 cog（工作区设置）图标。
3.  选择“邀请和管理成员”。
4.  单击要删除的成员旁边的“删除”按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-21T17:55:49.207

如果您没有高级帐户，上述解决方案将不起作用。Asana 只会告诉你升级。这篇文章[https://asana.com/guide/help/organizations/basics#gl-free-depro](https://asana.com/guide/help/organizations/basics#gl-free-depro) 解释了如何为免费版本执行此操作。

[![要删除某人的访问权限，请从团队 cog 菜单中执行](../Images/a93e8ef533ce238d5704f041d2bf959b.png)](https://i.stack.imgur.com/j5C5a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-16T03:02:49.673

我包含了一些屏幕截图（2017 年 9 月），展示了如何使用免费版本执行此操作。

1.  [转到导航菜单中的“所有人”](https://i.stack.imgur.com/reKv9.png)
2.  [将鼠标悬停在用户上并单击模式中的“删除”](https://i.stack.imgur.com/2Pumj.png)
3.  [在出现的部分中单击“删除访问权限”](https://i.stack.imgur.com/bygBY.png)

单击“删除访问权限”后，您将能够进一步“取消配置”该成员。这样做会将它们从之前添加到的任何项目中删除。

# node.js - 用户直接上传到 Amazon s3 的流

> ID：14733928
> 
> 赞同：1
> 
> 时间：2013-02-06T16:26:34.813
> 
> 标签：node.js, amazon-s3, express

在过去的几天里，我一直在努力让这个工作。

基本上我有一个带有`type="file"`输入的 HTML 表单。

我希望将此文件发送到 nodejs 并直接流式传输到 Amazon s3。这样我会在我的服务器上使用更少的存储空间（想象一下，如果 100 个人上传 1g，最后我的服务器将有 100g），所以如果我流式传输，我将只占用内存一小段时间

关于如何使用 express 执行此操作的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:17:48.057

我不确定您是否正在寻找一种 CORS 方法，即用户直接上传到您的 S3 存储桶，或者您使用 express 作为中间人的方法。

如果您正在研究 CORS 方法（我建议您使用这种方法，除非您在将文件放入无法在客户端完成的 S3 之前对文件进行任何特殊处理），这应该可以帮助您：[http://bencoe .tumblr.com/post/30685403088/browser-side-amazon-s3-uploads-using-cors](http://bencoe.tumblr.com/post/30685403088/browser-side-amazon-s3-uploads-using-cors)

如果您打算使用您的服务器作为中点（即上传到您的服务器，然后从您的服务器上传到 S3），我听说过关于 Knox 的好消息（[https://github.com/LearnBoost/knox](https://github.com/LearnBoost/knox)） . 我玩过它，但实际上并没有使用它，因为我倾向于使用 CORS 方法。

# android - RelativeLayout：基线对齐有什么问题？

> ID：14733931
> 
> 赞同：2
> 
> 时间：2013-02-06T16:26:41.557
> 
> 标签：android, android-layout

我想创建一个如下所示的布局：

![想要的布局](../Images/620a139707c1abef2418212169718fba.png)

*（虚线是文本视图的基线。）*

所以主锚是大的*W*，然后*abc与**W*基线对齐，然后*def在**abc*之上。

*但是当我为abc*设置基线对齐时，*def*会下降并变得不可见。*abc*没有问题，它完美对齐。

我找到了使*def*可见的唯一方法：它正在更改*abc*的对齐方式，因此它将与*W*的底部对齐，但这看起来很糟糕，因为较大的字形具有更大的底部边距（基线之间的垂直空间更大和视图的底部边缘）。

看起来基线对齐是以某种特殊方式处理的，因此布局无法计算相关视图的正确位置。

我做错了吗？我的布局有可能吗？

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/w"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="W"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="100sp" />

    <TextView
        android:id="@+id/abc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/w"
        android:layout_alignParentLeft="true"
        android:text="abc"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/def"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/abc"
        android:layout_alignParentLeft="true"
        android:text="def"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T21:49:30.037

一个合理但不完美的解决方法在这里： [https ://groups.google.com/d/msg/android-developers/M9THu9V08vo/EouuJZv1dTAJ](https://groups.google.com/d/msg/android-developers/M9THu9V08vo/EouuJZv1dTAJ)

> 然而，这让我发现了一个小怪癖，如果你同时使用 layout_alignBottom 和 layout_alignBaseline 标志将 B 与 A 对齐，那么 C 的定位现在可以工作了，它很高兴地位于 B 上方，就好像只使用了 layout_alignBottom 一样，尽管 B 仍然与A的基线。需要注意的是，C 的位置比正常位置略低；它的行为就像 B 与 A 的底部对齐，然后 C 被定位，然后 B 与 A 的基线重新对齐，而 C 不改变位置。但是，我可以通过一些边距偏移来解决这个问题，至少可以通过 XML 完成。

# javascript - 当不相关的 div 为空时更改文本

> ID：14733934
> 
> 赞同：1
> 
> 时间：2013-02-06T16:26:48.420
> 
> 标签：javascript, jquery, jquery-selectors

我有`event_wrapper`可以通过单击中的链接在页面上动态添加的 div `add-event`。用户可以根据需要多次删除/添加这些 div。如果用户选择删除所有这些`event_wrapper`div，我想更改`add-event`. 这是HTML：

```
<div class="event_wrapper">
    <div class="event">
        <div class="well darkblue-background pull-left">
            <a class="close tooltip" data-tooltip="Delete this event"><i class="icon-remove"></i></a>
        </div>
    </div>
</div>

<div class="add-event pull-left">
    <a href="javascript:void(0);"> And Then...</a>
   </div> 
```

（我正在使用 jQuery）我尝试使用`:empty`选择器，但它似乎不起作用。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:40:27.323

看看 - [https://stackoverflow.com/a/3234646/295852](https://stackoverflow.com/a/3234646/295852)

然后`contentChange()`像这样使用：

```
$('.event-wrapper').contentChange(function(){
    if($(this).children().length > 0){
        // events exist
        $(".add-event pull-left").children('a').html('And Then...');
    } else {
        // no events
        $(".add-event pull-left").children('a').html('your text');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:32:44.653

```
if(!$(".event_wrapper")){
    $(".add-event pull-left").html("Whatever text you want here"); //changes the text of the div
     //or
    $(".add-event pull-left").children('a').html("whatever text you want here"); //changes the text of the anchor child
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:40:01.490

```
 if($(".event-wrapper").html() == null) {//looking inside event-wrapper; if it contains any thing
    $(".add-event a").html("whatever");
  } 
```

# python - 如何在结构中设置动态主机

> ID：14733944
> 
> 赞同：0
> 
> 时间：2013-02-06T16:27:15.970
> 
> 标签：python, fabric

下面的代码可以设置动态主机：

```
def set_hosts():
    env.hosts = ['host1', 'host2']

def mytask():
    run('ls /var/www') 
```

但我只能在 shell 中运行它，并且该作业将按顺序而不是并行工作：

```
fab set_hosts mytask 
```

如何在fabfile中运行它？这样我就可以为作业设置一个装饰器@parallel 以并行运行。

```
def set_namehost():
    env.hosts = ['namehost']

def get_namehost():
    run('ls /var/www')

def set_hosts():
    env.hosts = ['host1', 'host2']

def mytask():
    run('ls /var/www') 
```

我只能运行： fab set_namehost get_namehost ；fab set_hosts mytask in shell，输入两次。如何将两个工作定义为一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:46:12.303

如果我理解正确，您正在尝试在多个主机中运行任务。

如果是这样的话，你可以这样做

```
from fabric.api import *

env.roledefs = {
    'host1'   : ['you@yourFirstHost.com'],
    'host2'   : ['you@yourSecondHost.com'],
    'host3'   : ['you@yourThirdHost.com']
}

@task
def runTask():
    for subtask in (deploy_host1, deploy_host2, deploy_host3):
        execute(subtask)

@roles('host1')
def deploy_host1();
    run('ls /var/www')

@roles('host2')
def deploy_host2();
    run('ls /var/www')

@roles('host3')
def deploy_host3();
    run('ls /var/www') 
```

运行：工厂运行任务

将在所有主机中运行定义的任务。我建议采用这种方法，尤其是当您要在主机上运行的命令不同时。

在查看 fab 文档时，您可能想要使用这种方法：

[http://docs.fabfile.org/en/1.5/usage/parallel.html](http://docs.fabfile.org/en/1.5/usage/parallel.html)

```
from fabric.api import *

@parallel
def runTask():
    run('ls /var/www')

fab -H host1, host2, host3 runTask 
```

希望这可以帮助

# ios - 动画如何进行单元测试？

> ID：14733947
> 
> 赞同：11
> 
> 时间：2013-02-06T16:27:21.240
> 
> 标签：ios, cocoa, design-patterns, animation, tdd

现代用户界面，尤其是 MacOS 和 iOS，有很多“休闲”动画——通过主要由系统编排的简短动画序列出现的视图。

```
[[myNewView animator] setFrame: rect] 
```

有时，我们可能会有一个稍微复杂一点的动画，带有一个动画组和一个完成块。

现在，我可以想象这样的错误报告：

> 嘿——新版本中没有出现 myNewView 出现时的漂亮动画！

所以，我们希望单元测试做一些简单的事情：

*   确认动画发生
*   检查动画的持续时间
*   检查动画的帧率

但是当然，所有这些测试都必须易于编写，并且不能使代码变得更糟；我们不想用大量测试驱动的复杂性破坏隐式动画的简单性！

那么，**什么是 TDD 友好的方法来实现休闲动画测试？**

* * *

## 单元测试的理由

让我们举一个具体的例子来说明为什么我们需要一个单元测试。假设我们有一个包含一堆 WidgetView 的视图。当用户通过双击创建一个新的 Widget 时，它最初应该看起来很小且透明，并在动画期间扩展为完整大小。

现在，我们确实不想对系统行为进行单元测试。但这里有一些可能出错的地方，因为我们把事情搞砸了：

1.  动画在错误的线程上调用，并且不会被绘制。但是在动画的过程中，我们调用了 setNeedsDisplay，所以最终小部件被绘制出来了。

2.  我们正在从废弃的 WidgetController 池中回收废弃的小部件。NEW WidgetViews 最初是透明的，但回收池中的一些视图仍然是不透明的。所以褪色不会发生。

3.  在动画完成之前，一些额外的动画会在新小部件上开始。结果，小部件开始出现，然后在稳定下来之前开始抽搐和短暂闪烁。

4.  您对小部件的 drawRect: 方法进行了更改，新的 drawRect 很慢。旧动画很好，但现在一团糟。

所有这些都将在您的支持日志中显示为“create-widget 动画不再起作用”。我的经验是，一旦你习惯了一个动画，开发人员很难马上注意到一个不相关的变化破坏了动画。这是单元测试的秘诀，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:21:10.497

> 动画在错误的线程上调用，并且不会被绘制。但是在动画的过程中，我们调用了 setNeedsDisplay，所以最终小部件被绘制出来了。

不要直接对此进行单元测试。当动画在不正确的线程上时，使用断言和/或引发异常。**单元测试断言将适当地引发异常。**Apple 通过他们的框架积极地做到了这一点。它可以防止你在脚下射击自己。当您使用有效参数之外的对象时，您会立即知道。

> 我们正在从废弃的 WidgetController 池中回收废弃的小部件。NEW WidgetViews 最初是透明的，但回收池中的一些视图仍然是不透明的。所以褪色不会发生。

这就是为什么你会看到`dequeueReusableCellWithIdentifier`UITableView 中的方法。您需要一个公共方法来获取重用的 WidgetView，这是测试 alpha 等属性被适当重置的绝佳机会。

> 在动画完成之前，一些额外的动画会在新小部件上开始。结果，小部件开始出现，然后在稳定下来之前开始抽搐和短暂闪烁。

与第 1 点相同。使用断言将您的规则强加于您的代码。可以触发断言的单元测试。

> 您对小部件的 drawRect: 方法进行了更改，新的 drawRect 很慢。旧动画很好，但现在一团糟。

单元测试可以只是为方法计时。我经常通过计算来确保它们保持在合理的时间限制内。

```
-(void)testAnimationTime
{
    NSDate * start = [NSDate date];
    NSView * view = [[NSView alloc]init];
    for (int i = 0; i < 10; i++)
    {
        [view display];
    }

    NSTimeInterval timeSpent = [start timeIntervalSinceNow] * -1.0;

    if (timeSpent > 1.5)
    {
        STFail(@"View took %f seconds to calculate 10 times", timeSpent);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:48:32.030

我可以通过两种方式阅读您的问题，所以我想将它们分开。

如果您问，“我如何才能对系统实际执行我请求的动画进行单元测试？”，我会说这不值得。我的经验告诉我，这是很多痛苦却没有很多收获，在这种情况下，测试会很脆弱。我发现，在我们调用操作系统 API 的大多数情况下，它提供了最大的价值来假设它们可以工作并且将继续工作，直到被证明不是这样。

如果你问，“我怎样才能对我的代码请求正确的动画进行单元测试？”，那就更有趣了。您需要一个用于测试替身的框架，例如 OCMock。或者你可以使用 Kiwi，这是我最喜欢的测试框架，内置了 stubbing 和 mocking。

使用 Kiwi，您可以执行以下操作，例如：

```
id fakeView = [NSView nullMock];
id fakeAnimator = [NSView nullMock];
[fakeView stub:@selector(animator) andReturn:fakeAnimator];
CGRect newFrame = {.origin = {2,2}, .size = {11,44}};
[[[fakeAnimator should] receive] setFrame:theValue(newFrame)];

[myController enterWasClicked:nil]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-05T20:15:39.437

您不想真正等待动画；这将花费动画运行所需的时间。如果你有几千个测试，这可以加起来。

更有效的是在一个类别中模拟出 UIView 静态方法，使其立即生效。然后将该文件包含在您的测试目标（但不是您的应用程序目标）中，以便该类别仅编译到您的测试中。我们用：

```
#import "UIView+SpecFlywheel.h"

@implementation UIView (SpecFlywheel)

#pragma mark - Animation
+ (void)animateWithDuration:(NSTimeInterval)duration animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion {
    if (animations)
        animations();
    if (completion)
        completion(YES);
}

@end 
```

以上只是立即执行动画块，如果也提供了完成块，则立即执行。

# java - 安卓。从拨号器启动应用程序

> ID：14733951
> 
> 赞同：8
> 
> 时间：2013-02-06T16:27:23.400
> 
> 标签：java, android, broadcastreceiver, android-dialer

这是我到目前为止所拥有的，但是当我在拨号器中输入这个组合时没有任何反应

```
public class DialReceiver extends BroadcastReceiver
{
    @Override
  public void onReceive(Context context, final Intent intent) {

    if (intent.getAction().equals(android.content.Intent.ACTION_NEW_OUTGOING_CALL)) {
        String phoneNumber = intent.getExtras().getString( android.content.Intent.EXTRA_PHONE_NUMBER );

        if(phoneNumber.equals("*#588637#")) { 
            Intent intent1 = new Intent(context , Activity.class);
            intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK );
            context.startActivity(intent1);
        }

    }

}
} 
```

并在 androidmanifest

```
 <receiver
        android:name=".receiver.DialReceiver"
        android:exported="true"
        android:process=":background"
        tools:ignore="ExportedReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T17:58:53.543

试试这些小改动。。

```
String phoneNumber = intent.getExtras.getString("Intent.EXTRA_PHONE_NUMBER");

             if(phoneNumber.equals("*#588637#")) { 
             //do your stuff
             } 
```

并且不要忘记在您的 Manifest.xml 文件中添加这一行

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/> 
```

你也可能会发现这些很有帮助..

*   [http://android.programmerguru.com/simple-dialer-application/](http://android.programmerguru.com/simple-dialer-application/)
*   [http://tikuflower.blogspot.com/2011/12/android.html](http://tikuflower.blogspot.com/2011/12/android.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:11:19.280

接收者是否收到广播？如果没有，可能您忘记包含[PROCESS_OUTGOING_CALLS](http://developer.android.com/reference/android/Manifest.permission.html#PROCESS_OUTGOING_CALLS)权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-19T09:36:50.827

尝试这个，

在清单中添加这个，这里的主机是 12456，所以你的密码是`*#*#123456#*#*`（拨入拨号）

```
<receiver android:name=".Dialer"> //here is your broadcast receiver class
        <intent-filter>
            <action android:name="android.provider.Telephony.SECRET_CODE" />
            <data android:scheme="android_secret_code"
                  android:host="123456"
            />
        </intent-filter>
    </receiver> 
```

这是您的广播接收器类：

```
 class Dialer : BroadcastReceiver() {

    override fun onReceive(context: Context?, intent: Intent?) {
         // Declare Here your launcher activity in Intent
        var  i : Intent = Intent(context, MainActivity::class.java)  
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context!!.startActivity(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T14:54:38.117

根据ridoy的第二个链接，

> [http://tikuflower.blogspot.com/2011/12/android.html](http://tikuflower.blogspot.com/2011/12/android.html)

它应该是

```
String phoneNumber = intent.getStringExtra("android.intent.extra.PHONE_NUMBER"); 
```

而不是

```
String phoneNumber = intent.getExtras.getString("Intent.EXTRA_PHONE_NUMBER"); 
```

这种改变至少对我有用......

# python - Python Tkinter [无法调用命令：应用程序已被破坏]

> ID：14733955
> 
> 赞同：0
> 
> 时间：2013-02-06T16:27:36.230
> 
> 标签：python, window, tkinter

我在 Python 上创建了两个函数：

*   一个打开一个新窗口：new_window()
*   另一个在其上创建按钮：create_buttons('text displayed')

当我启动它们时，new_window 运行良好，但 create_button 显示 [无法调用“按钮”命令：应用程序已被破坏]，就好像我的主窗口已被破坏......但我的窗口仍然打开！

... 你有什么主意吗 ？？

```
import Tkinter

from Tkinter import *

def new_window():

   master = Tk()

def create_buttons(display):

   new_button= Button(master, text=display)

   new_button.pack()

new_window() ### OK, CREATES A WINDOW

create_buttons('text') ### DISPLAYS FOLLOWING BUG :

create_buttons('text')

TclError                                  Traceback (most recent call last)

/neurospin/grip/protocols/MRI/childrenDTIreading_Letarnec_2011/tools/data_mysql/<ipython console> in <module>()

/neurospin/grip/protocols/MRI/childrenDTIreading_Letarnec_2011/tools/data_mysql/<ipython console> in create_buttons(display)

/usr/lib/python2.6/lib-tk/Tkinter.pyc in __init__(self, master, cnf, **kw)
   2003             overrelief, state, width
   2004         """
-> 2005         Widget.__init__(self, master, 'button', cnf, kw)
   2006 
   2007     def tkButtonEnter(self, *dummy):

/usr/lib/python2.6/lib-tk/Tkinter.pyc in __init__(self, master, widgetName, cnf, kw, extra)
   1933                 del cnf[k]
   1934         self.tk.call(
-> 1935             (widgetName, self._w) + extra + self._options(cnf))
   1936         for k, v in classes:
   1937             k.configure(self, v)

TclError: can't invoke "button" command:  application has been destroyed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:39:02.150

正如 JFSebastian 所说，您需要使`master`变量可用于创建按钮的位置。一些这样做的代码可能如下所示：

```
from Tkinter import *

def new_window():
   return Tk()

def create_buttons(master, display):
   new_button = Button(master, text=display)
   new_button.pack()

master = new_window()
create_buttons(master, 'text') 
```

这并不漂亮，但应该足以摆弄一下。如果代码变得严肃，最好将新窗口及其按钮包装到它自己的类中。

# asp.net-mvc - 模型无效

> ID：14733956
> 
> 赞同：1
> 
> 时间：2013-02-06T16:27:38.030
> 
> 标签：asp.net-mvc, model-view-controller, model-validation

我正在创建一个注册表单。我的财产是国民身份证号码。但我希望用户在确认注册后填写。那我就不写在注册表里了。

评论：

```
National Identity Number
<div class="editor-field">
  @Html.EditorFor(model => model.IdentityNumber)
  @Html.ValidationMessageFor(model => model.IdentityNumber)
</div> 
```

这是我的财产：

```
[IdentityNumber("It is not a valid identity number")]
[Required(ErrorMessage = "You have to enter your national number")]
[DisplayName("National Identity Number:")]
public string IdentityNumber { get; set; } 
```

但这不起作用。我认为原因是属性`[IdentityNumber]`和`[Required]`. 如果我评论他们，

```
public ActionResult Register(Member model)
{
    if (ModelState.IsValid)
    {
        //..... 
```

`ModelState.IsValid`是`false`。如果我取消注释它们，它会返回 true。那么我必须在哪里改变一些东西才能允许它呢？我的意思是，我希望用户在注册后写下他/她的身份证号。

在我的数据库中，身份国家号码字段也允许为空。

编辑：这是我的属性代码：

```
[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property,
AllowMultiple = false, Inherited = true)]
public class IdentityNumberAttribute : ValidationAttribute, IClientValidatable
{
    private string WrongIdentityNumber;

    public IdentityNumberAttribute(string message)
        :base("Invalid an identity number")
    {
        WrongIdentityNumber = message;
    }

    private string identityNumber;
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value == null)
            return new ValidationResult(WrongIdentityNumber);   

        identityNumber = value.ToString();

        if (identityNumber.Length != 11)
            return new ValidationResult(WrongIdentityNumber);

        int sum = 0;

        for (int i = 0; i < identityNumber.Length - 1; i++)
        {
            sum += Convert.ToInt32(identityNumber[i].ToString());
        }

        return sum.ToString()[1] == identityNumber[10]
                   ? ValidationResult.Success
                   : new ValidationResult(WrongIdentityNumber);
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        ModelClientValidationRule validationRule = new ModelClientValidationRule();
        validationRule.ValidationType = "identitynumber";
        validationRule.ErrorMessage = "Invalid identity number";
        validationRule.ValidationParameters.Add("param", "");
        return new List<ModelClientValidationRule> { validationRule };

        //var rule = new ModelClientValidationRule();
        //rule.ErrorMessage = FormatErrorMessage(metadata.GetDisplayName());
        //rule.ValidationParameters.Add("identitynumber", identityNumber);     //küçük harfle yaz html kuralı
        //rule.ValidationType = "identitynumber";
        //yield return rule;
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:34:55.883

你*可以*添加这一行

```
ModelState.Remove("ErrorKey");//you can find the error key by stepping though your code
if (ModelState.IsValid)
        {
          ..... 
```

“ErrorKey”将类似于“YourModelName.YourPropertyName”。设置断点并将鼠标悬停在上面`ModelState`，您可以看到所有键。

但是您*应该*创建一个仅具有您需要的属性的视图模型，将您的数据注释放在那里，并将您的域模型排除在外。

# php - 使用 jquery 提交时为表单设置动画

> ID：14733957
> 
> 赞同：1
> 
> 时间：2013-02-06T16:27:45.333
> 
> 标签：php, jquery, html, animation, iframe

我不知道如何解释，但我会尽力而为......我正在尝试正常提交表单，但请求结果将显示在 iframe 中。一切顺利到这里。我想要做的（如果可能的话）是动画形式将消息放入其中（如“发送......”）直到 iframe 加载响应。我现在很困惑，但看看我的文件：

## 索引.php

我已经省略了标题，因为它是如此明显。

```
<form enctype="multipart/form-data" method="post" action="upload.php" target="my_iframe" id="form-upload">
    Choose your file here:
    <input name="uploaded_file" type="file"/>
    <input id="send-button" type="submit" value="Subir imagen"/>
</form>

<IFRAME name="my_iframe" SRC="upload.php" width="100%" height="200px" id="iframe1" marginheight="0" frameborder="0"></iframe>

<script type="text/javascript">
    $(document).ready(function(){
        $('#send-button').sendImage({formid: "form-upload"});
    });
</script> 
```

## 上传.php

只是为了测试porpuses。

```
<?php
if( isset($_FILES['uploaded_file']) )
    echo "image sent"; 
```

## 动画.js

这就是我正在处理的地方。因为当我访问时，`index.php`总是`sending...`会显示表单元素的实例。

```
var conf;

jQuery.fn.sendImage = function(args) {
    conf = $.extend( {
    }, args);

    this.on('click', function(e){
        e.preventDefault();
        $('#'+conf.formid).submit();
        $('#'+conf.formid).html('sending...');
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:31:06.033

Once a form is submitted, all processing on the current page stops. Anything you do must be BEFORE you actually submit the form. You alternative is to submit via AJAX.

# jquery - 使用jquery hasClass方法时如何获取div的id？

> ID：14733962
> 
> 赞同：2
> 
> 时间：2013-02-06T16:28:01.853
> 
> 标签：jquery

此代码不起作用：

```
$("div").hasClass("testSection").attr("id"); 
```

我收到以下错误消息：

> TypeError: $(...).hasClass(...).attr 不是函数

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T16:28:35.153

`.hasClass("testSection")`返回一个布尔值。它不会返回要链接的 jQuery 对象。

你也明白，当匹配多个元素时，使用特定的函数就像`.attr`会从第一个选定的元素返回。

```
$("div").attr('id'); => $('div').eq(0).attr('id'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T16:30:29.773

问题是因为`hasClass()`返回一个布尔值，而不是一个 jQuery 对象。因此，调用`attr()`布尔值会导致您看到的错误。

假设只有一个具有指定类的 div，您可以在选择器中使用该类：

```
var id = $("div.testSection").prop("id"); 
```

如果该类有多个 div，则需要循环：

```
$("div.testSection").each(function() {
    var id = this.id;
    // do something with the id...
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T16:29:06.177

你想使用[`filter`](http://api.jquery.com/filter/)：

```
$("div").filter(".testSection").attr("id"); 
```

[`hasClass`](http://api.jquery.com/hasClass/)将返回一个布尔值（真/假），而不是具有`attr`函数的 jQuery 对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T16:29:14.850

hasClass 将返回 true 或 false 不是对象，使用这个，

```
$("div.testSection") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T16:41:28.277

如果您希望获取一组元素的所有 id，则需要使用 for 构造或 jQuery 的 each 函数对它们进行迭代。我还建议使用 prop() 而不是 attr()，尽管在这种情况下它并不重要：

JSFiddle 示例：http: [//jsfiddle.net/turiyag/QXyWV/1/](http://jsfiddle.net/turiyag/QXyWV/1/)

```
$.each($("div.foo"),function(index,value) {
    log($(value).prop("id") + " ");
}); 
```

# c# - 错误报告

> ID：14733965
> 
> 赞同：2
> 
> 时间：2013-02-06T16:28:14.273
> 
> 标签：c#, oop, design-patterns, command-pattern

我有一个遵循命令模式的类。它有 2 个方法，即 Execute 和 CanExecute，用于检查是否调用 Execute（它们派生自[ICommand](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)）。CanExecute 调用一些方法来检查所有必需的服务是否正在运行、版本是否正确等。

调用 CanExecute 后，它可能会失败并返回 false，我需要知道原因。是不是因为版本不好、服务、文件丢失等原因？

**了解问题所在的最佳策略是什么**

一种选择是，每当所需条件失败时，我都可以抛出一个异常，该异常将在消息字段中描述错误。但是，它可能会失败，并且[您不应该使用异常来进行常规控制流](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control)。所以我真的不确定。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:32:37.387

**更新：根据反馈重新设计。**

由于 UI 需要 CanExecute() 返回 false 的原因，我想到了两件事：

**选项 1：**将可枚举消息属性添加到命令接口，并在调用 CanExecute() 期间根据需要填充它。然后 UI 可以根据需要询问该属性。如果你走这条路，请确保每次调用 CanExecute() 时清除属性的内容，以免丢失状态。

```
public interface ICommand
{
    IEnumerable<string> Messages { get; }
    bool CanExecute();
    void Execute();
}

public class SomeCommand : ICommand
{
    public IEnumerable<string> Messages { get; private set; }

    public bool CanExecute()
    {
        var messages = new List<string>();

        var canExecute = true;

        if (SomeCondition)
        {
            canExecute = false;
            messages.Add("Some reason");
        }

        if (AnotherCondition)
        {
            canExecute = false;
            messages.Add("Another reason");
        }

        Messages = messages;

        return canExecute;
    }

    public void Execute() { }
} 
```

**选项 2：** 让 CanExecute() 返回一个包含布尔值以及可枚举消息属性的对象。这表明消息仅适用于 CanExecute() 的调用。但是，根据您实施的位置/方式（例如数据绑定），这可能会使其他场景变得比您想要的更复杂。

```
public class CanExecuteResult
{
    public bool CanExecute { get; set; }
    public IEnumerable<string> Messages { get; set; }
}

public interface ICommand
{
    CanExecuteResult CanExecute();
    void Execute();
}

public class SomeCommand : ICommand
{
    public CanExecuteResult CanExecute()
    {
        var result = new CanExecuteResult { CanExecute = true };
        var messages = new List<string>();

        if (SomeCondition)
        {
            result.CanExecute = false;
            messages.Add("Some reason");
        }

        if (AnotherCondition)
        {
            result.CanExecute = false;
            messages.Add("Another reason");
        }

        result.Messages = messages;

        return result;
    }

    public void Execute() { }
} 
```

显然，您希望如何处理接口、可枚举类型等的细节取决于您。代码只是这个想法的代表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:37:46.413

您可以使用一组“原因”来告诉该类的用户*为什么* `CanExecute`返回 false。原因可以很简单`IEnumerable<string>`。

```
public bool CanExecute() {
  var messages = new List<string>();

  if (!Condition1) {
    messages.Add("Missing Condition1");
  }

  ...

  Messages = messages;
  return messages.Count == 0;
}

public IEnumerable<string> Messages { get; private set; } 
```

然后，客户端代码可以向最终用户显示消息集合。

**更新**：

您还可以将新*命令*与消息相关联，以便为用户提供解决所发现问题的方法。在这种情况下`IEnumerable<string>`，您可以创建自己的类来封装该信息，而不是 ：

```
public class Message {
  public string Text { get; set; }
  public ICommand Command { get; set; }
}

...

public bool CanExecute() {
  var messages = new List<Message>();

  if (!Condition1) {
    messages.Add(
      new Message { 
        Text = "Missing Condition1", 
        Command = new FixCondition1Command() 
      }
    );
  }

  ...

  Messages = messages;
  return messages.Count == 0;
}

public IEnumerable<Message> Messages { get; private set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:45:25.177

```
 Bool CanExecute()
    {
     if(!CheckXXX)
      throw new Exception("CheckXXX function throws an exception")

     if(!CheckYYY)
      throw new Exception("CheckYYY function throws an exception")

    if(!CheckZZZ)
     throw new Exception("CheckZZZ function throws an exception")

    return true; //everything is working fine    
} 
```

# ios - iOS 公司名称 新应用只是捆绑 ID？

> ID：14733978
> 
> 赞同：-1
> 
> 时间：2013-02-06T16:28:36.623
> 
> 标签：ios, app-store, provisioning

几天后我将向 AppStore 提交一个新应用程序。我之前用公司名称上传了一个应用程序。如果我使用 com.NewCompanyName.appname 上传新应用程序，该应用程序会以 NewCompanyName 或我上传第一个应用程序时使用的名称上传吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:29:58.063

显示的公司名称取决于 iTunes Connect 帐户、底层 Apple Developer 帐户以及应用程序 plist 文件中包含的任何数据。

捆绑标识符只是一个字符串，用于将您的应用程序与其他应用程序唯一地标识为操作系统级别的目的。他们推荐的公司命名方案只是帮助提出唯一 ID。您可以`blert.flargle.vorglast`为所有 Apple 关心创建捆绑 ID

# c# - 如何在 C# 中获取 wkhtmltopdf 日志信息？

> ID：14733982
> 
> 赞同：1
> 
> 时间：2013-02-06T16:28:48.993
> 
> 标签：c#, pdf-generation, wkhtmltopdf

我正在使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)将一些 html 转换为 pdf。我想我遇到了一些 javascrpot 错误，我想从 wkhtmltopdf 访问一些调试\日志记录。有谁知道如何获取日志信息？

```
 var wkhtmlDir = Settings.HtmlToPdfFolderPath;
        var wkhtml = Settings.HtmlToPdfExePath;
        var p = new Process();

        p.StartInfo.CreateNoWindow = true;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.RedirectStandardError = true;
        p.StartInfo.RedirectStandardInput = true;
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.FileName = wkhtml;
        p.StartInfo.WorkingDirectory = wkhtmlDir;

        string switches = "";
        switches += "--print-media-type --redirect-delay 800 ";
        //switches += "--margin-top 10mm --margin-bottom 10mm --margin-right 10mm --margin-left 10mm ";
        switches += "--page-size Letter ";
        p.StartInfo.Arguments = switches + " " + url 
        p.Start();

        //read output
        byte[] buffer = new byte[32768];
        byte[] file;
        using (var ms = new MemoryStream())
        {
            while (true)
            {
                int read = p.StandardOutput.BaseStream.Read(buffer, 0, buffer.Length);

                if (read <= 0)
                {
                    break;
                }
                ms.Write(buffer, 0, read);
            }
            file = ms.ToArray();
        }

        // wait or exit
        p.WaitForExit(60000);

        // read the exit code, close process
        int returnCode = p.ExitCode;
        p.Close();

        //return returnCode == 0 ? file : null;

        return file; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T23:03:26.343

您可以读取标准错误和标准输出：

`String output =string.Format("STD: {0}\nErr: {1}", p.StandardOutput.ReadToEnd(), p.StandardError.ReadToEnd());`

那是你要找的吗？

# php - 在php中注销时无法重定向页面

> ID：14733985
> 
> 赞同：0
> 
> 时间：2013-02-06T16:29:03.947
> 
> 标签：php, sql, session, logout

我的链接是这样的：`http://example.com/events.php?slug=xyz`

其中 [slug] 字段是从数据库中导入的。`events.php`我页面的起始行是：

```
$slug = $_GET['slug'];
$url="events.php?slug=".$slug."/";
....
.... 
```

我的注销功能：

```
if(isset($_GET['logout']))
{
    $_SESSION = array();
    session_destroy();
    header('Location: ' . $url);
    exit;
}

<?php if(isset($_SESSION['id'])){?>
    <a href="?logout" ><button>Log Out</button></a>
<?php }?> 
```

但点击后`logout` `"http://example.com/events.php?slug=/"`会显示。

我`php`在页面开头的整个脚本是：

```
<?php
define('INCLUDE_CHECK',true);

require_once('13/functions/db.php');
    $slug = $_GET['slug'];
    $url="events.php?slug=".$slug."/";
    $result = mysql_query("SELECT * FROM event WHERE slug='".$slug."'");
    if ($result == true){
        $row=mysql_fetch_assoc($result);
        $id=$row['id'];
        if($id>=13 && $id<=40 && $id!=17){//some checks.
            $var=1;
            $name=$row['name'];
        }
        else {
            $var=0;
            $name="404";
        }
    }

session_name('fewiui');
session_set_cookie_params(3*7*24*60*60);
session_start();

if(isset($_GET['logout']))
{
    $_SESSION = array();
    session_destroy();
    header('Location: ' . $url);
    exit;
}

$sess_uid = $_SESSION['id'];
$sess_email = $_SESSION['email'];
$sess_name = $_SESSION['name'];
if(isset($_POST['submit'])&&$_POST['submit']=='Register')
    require_once('13/functions/eventlogin.php');    
?> 
```

其他一切（如登录等）都有效。我在哪里做错了？我是php的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:57:31.177

```
 <a href="?slug=<?php echo $slug; ?>&logout" ><button>Log Out</button></a> 
```

# linux - .htaccess 将 index.php 重定向到 /

> ID：14733988
> 
> 赞同：7
> 
> 时间：2013-02-06T16:29:10.250
> 
> 标签：linux, apache, .htaccess, redirect, mod-fcgid

我想隐藏 index.php 页面，只显示域。

.htaccess 有可能吗？

```
RewriteRule ^index\.php/?$ / [L,R=301,NC] 
```

也试过：

```
RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9} /index.php HTTP/
RewriteRule ^index.php$ http://example.com/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

index.php 仍然显示

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T16:43:53.893

Try, It works for me! Make sure your have `AllowOverride All` set in httpd.conf

```
RewriteEngine On 

    RewriteCond %{REQUEST_URI} index\.php
    RewriteRule ^(.*)index\.php$ /$1/ [R=301,L] 
```

There is a regex issue in your rules, I have modified your rules and it works for me:

```
RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} index\.php
RewriteRule ^index\.php$ http://example\.com/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index\.php [L] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-15T05:30:12.170

```
RewriteRule ^(.*)index\.(html|php)$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-04T08:46:38.533

您可以像这样通过 .htaccess 重写“/index.php”：

```
# Remove /index.php from all urls
RewriteRule ^(.+)/index\.php$ /$1 [R=302,L] 
```

# compilation - 在失败的 BSD 端口进行安装尝试后进行清理？

> ID：14733990
> 
> 赞同：0
> 
> 时间：2013-02-06T16:29:10.777
> 
> 标签：compilation, makefile, bsd, openbsd, vax

我正在尝试从`ports`Emacs 21 和 Emacs 23 以及 Git 安装失败后进行清理。我试图在 OpenBSD v5.2 上安装 Emacs 和 Git，安装在 DEC VaxStation 4000 型号 90 上。它有惊人的 32 兆内存和 2.1 gig 硬盘，在 1991 年非常高端，但现在这一切似乎微不足道；所以是的，每一个最后一兆字节的硬盘空间对这个现在已经 72% 已满的硬盘来说都很重要。

我在树`make install`的适当目录中使用的安装尝试`/usr/ports`失败了。我确实`make clean`在每次编译失败后运行并且也检查过`/tmp`它基本上是空的。OpenBSD 似乎也`/tmp`随着每次重新启动而刷新。然而，硬盘容量似乎随着每次失败的程序编译而缩小，所以我可能会在每次尝试安装时积累一些程序或 tarball 或 cruft。

有问题的程序不能作为 VAX 架构的二进制包提供。

在这种情况下端口编译失败后如何清理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:56:57.163

运行`rm -rf /usr/ports/pobj`。

还要检查`packages`.`/usr/ports`

# ruby-on-rails - Gitlab rake gitlab：Mountain Lion 服务器上的检查失败

> ID：14733997
> 
> 赞同：3
> 
> 时间：2013-02-06T16:29:15.467
> 
> 标签：ruby-on-rails, osx-mountain-lion, gitlab

我正在尝试在 10.8.2 服务器上安装 Gitlab，但是当我执行时

`bundle exec rake gitlab:check RAILS_ENV=production`

我收到以下错误。

```
Checking Environment ...

gitlab user is in gitg group? ... yes
Has no "-e" in ~gitolite/.profile ... yes
Git configured for gitlab user? ... yes
Has python2? ... yes
python2 is supported version? ... yes

Checking Environment ... Finished

** Invoke gitlab:gitolite:check (first_time)
** Invoke environment 
** Execute gitlab:gitolite:check
Checking Gitolite ...

Using recommended version ... no
  Try fixing it:
  We strongly recommend using the version pointed out in the installation guide.
  For more information see:
  doc/install/installation.md in section "Gitolite"
Repo umask is 0007 in .gitolite.rc? ... yes
Allow all Git config keys in .gitolite.rc ... yes
Config directory exists? ... yes
Config directory owned by gitolite:gitg ... rake aborted!
undefined method `split' for nil:NilClass
/Users/gitlab/Opt/rails/gitlabhq/lib/tasks/gitlab/task_helpers.rake:81:in `gid_for'
/Users/gitlab/Opt/rails/gitlabhq/lib/tasks/gitlab/check.rake:533:in `check_dot_gitolite_user_and_group'
/Users/gitlab/Opt/rails/gitlabhq/lib/tasks/gitlab/check.rake:400:in `block (3 levels) in <top (required)>'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/gitlab/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/Users/gitlab/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/bin/rake:19:in `load'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374@global/bin/rake:19:in `<main>'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
/Users/gitlab/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我确实检查了权限一千次，如果有人能给我关于这个问题的提示，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:52:01.023

这似乎是一个正在进行的问题：请参阅[Issue 2890](https://github.com/gitlabhq/gitlabhq/pull/2890)。

[提交 e0d62d9c](https://github.com/cameronyule/gitlabhq/commit/e0d62d9c5fa1145ef5378db07f28c3d399e9c34d)可能会解决此问题，在`lib/tasks/gitlab/task_helpers.rake`.

```
 def gid_for(group_name)
-    group_line = File.read("/etc/group").lines.select{|l| l.start_with?("#{group_name}:")}.first
-    group_line.split(":")[2].to_i
+    Etc.getgrnam(group_name).gid
   end 
```

# matlab - 无法从 xls 文件中读取 (MATLAB)

> ID：14733998
> 
> 赞同：0
> 
> 时间：2013-02-06T16:29:16.880
> 
> 标签：matlab, spreadsheet, xls

我正在尝试使用从 xls 文件中读取数据

```
[a,b,c]=xlsread('list.xls', 1, 'A1:C5') 
```

但结果我得到所有 a、b 和 c 为空，即使 list.xls 电子表格中有指定范围内的数据。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:27:31.817

来自[http://www.mathworks.com/help/matlab/ref/xlsread.html](http://www.mathworks.com/help/matlab/ref/xlsread.html)：

`[num,txt,raw] = xlsread(___)`

> 还使用前面语法中的任何输入参数返回元胞数组 txt 中的文本字段，以及元胞数组 raw 中的未处理数据（数字和文本）。如果指定了 xlRange，则工作表中位于具有数据的行和列之前的前导空白行和列将以原始形式返回。

如果您只对数据 ( `numbers`) 感兴趣，您可以输入

```
xlsread(filename,1,'A1:C5') 
```

如果您在第一行有标题，请致电

```
[num,txt,raw] = xlsread(___) 
```

`num`: 包含数据的数组；

`txt`：包含标题的单元格；

`raw`：包含标题和数据的单元格。

我希望这有帮助

# html - 如何计算 T-SQL 中不包括 HTML 标记的单词

> ID：14733999
> 
> 赞同：0
> 
> 时间：2013-02-06T16:29:18.033
> 
> 标签：html, sql, sql-server, tsql

给定一个表格，其中一列包含 HTML，如何获取每行的字数，不包括 HTML 标签？基本上我想计算最终将在浏览器中呈现多少单词。

使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:29:07.353

您可以调整[此 SQL 函数来解析分隔字符串](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)以将字符串拆分为空格，并以这种方式计算单词。这将是近似值，但如果您需要更准确的计数，使用 .net、解析页面并从 html 节点中获取字数会更容易。