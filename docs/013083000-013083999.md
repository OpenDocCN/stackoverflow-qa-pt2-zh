# StackOverflow 问答 13083000-13083999

# spotify - 预览 URL Spotify API 或 Lib

> ID：13083000
> 
> 赞同：0
> 
> 时间：2012-10-26T07:56:54.707
> 
> 标签：spotify

有没有办法为 Spotify API 或 Lib 中的曲目获取 30 秒的预览 URL（如 Deezer API 预览 URL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:11:06.750

不。Spotify 目前根本没有这个功能，所以没有 API。

# c++ - 具有 3 字节块的序列化 C++ 结构？

> ID：13083002
> 
> 赞同：3
> 
> 时间：2012-10-26T07:57:02.503
> 
> 标签：c++, struct, marshalling, padding, pack

我有一个 C++ 应用程序，它正在向我的 C# 应用程序发送一个序列化的结构，我想自动将字节直接复制到我在 C# 中创建的新结构中。但是，通过网络发送的结构似乎有 3 字节的块，这看起来很奇怪。

这是 C++ 结构：

```
typedef struct ATTQueryAgentStateConfEvent_t {
  ATTWorkMode_t workMode;  /* enum type */
  ATTTalkState_t talkState;  /* enum type */
  long reasonCode;
  ATTWorkMode_t pendingWorkMode;   /* enum type */
  long pendingReasonCode;
} ATTQueryAgentStateConfEvent_t; 
```

我在 C# 中创建的结构：

```
[StructLayout(LayoutKind.Sequential, Pack=1)]
public struct ATTQueryAgentStateConfEvent_t
{
    public ATTWorkMode_t workMode;  /* enum type */
    public ATTTalkState_t talkState;  /* enum type */
    public long reasonCode;
    public ATTWorkMode_t pendingWorkMode;  /* enum type */
    public long pendingReasonCode;
}; 
```

以下是从 C++ 应用程序接收到的字节（前 6 个字节似乎是一些标头）：

```
02 00 68 00 30 0f 0a 01 03 0a 01 01 02 01 00 0a 01 ff 02 01 00
                        ^^       ^^       ^^       ^^       ^^ 
```

上面我标记了我期望收到的值（3、1、0、-1、0）。在定义 C# 结构时，我尝试了不同的 Pack 值，但它根本没有正确解析。这是我用来在 C# 中填充结构的命令：

```
ATTQueryAgentStateConfEvent_t stateDetails = (ATTQueryAgentStateConfEvent_t)Marshal.PtrToStructure(Marshal.UnsafeAddrOfPinnedArrayElement(confPrivData.data, 6), typeof(ATTQueryAgentStateConfEvent_t)); 
```

我做错了什么，或者这个 C++ 应用程序正在使用一些自定义序列化程序？我希望 C++ 枚举和 long 为 4 个字节......我知道我可以逐字节提取值，但如果可能的话，我想自动化它。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:54:40.673

正如我在评论中所说，您没有提供有关正在使用什么序列化程序的信息。但是，格式让我想起了[抽象语法符号一](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)(ASN1)，并且给出的示例流实际上是有效的，即类型 ID 与 ASN1 中指定的匹配 (30 = SEQUENCE, 02 = INTEGER, ...) 你应该找到很多库能够反序列化 ASN1 流，但我对 C# 没有经验，所以我现在不能给你任何建议。

# android - 没有将json数据导入mapview，只获取空白地图

> ID：13083004
> 
> 赞同：0
> 
> 时间：2012-10-26T07:57:16.000
> 
> 标签：android, android-mapview

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

我正在将 JSON 数据提取到 MapView 中以显示位置，但是每当我运行我的程序时没有将数据输入到 Map 中只是得到没有 json 数据的空白地图，我在这里放置我的 json 数据和活动代码，请告诉我我在哪里做错了{ “地图”：[{

```
"title": "Place One",
"latitude" : "46.483742",
"longitude" : "7.663157",
"country": "Switzerland"
},
{
"title" : "Place Two",
"latitude" : "59.25235",
"longitude" : "18.465536",
"country" : "Sweden"
},
{
"title" : "Place Three",
"latitude" : "56.404182",
"longitude" : "-3.818855",
"country" : "Scotland"
}
]
} 
```

活动代码：-

```
public class Main extends MapActivity {
public GeoPoint point;
TapControlledMapView mapView; // use the custom TapControlledMapView
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (TapControlledMapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);
    // dismiss balloon upon single tap of MapView (iOS behavior) 
    mapView.setOnSingleTapListener(new OnSingleTapListener() {      
        public boolean onSingleTap(MotionEvent e) {
            itemizedOverlay.hideAllBalloons();
            return true;

        }
    });

    mapOverlays = mapView.getOverlays();        
    drawable = getResources().getDrawable(R.drawable.ic_launcher);
    itemizedOverlay = new SimpleItemizedOverlay
            (drawable, mapView);        
    itemizedOverlay.setShowClose(false);
    itemizedOverlay.setShowDisclosure(true);
    itemizedOverlay.setSnapToCenter(false);

     class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {

    HttpClient client = new DefaultHttpClient();
    // Perform a GET request for a JSON list
    HttpUriRequest request = new HttpGet
            ("https://dl.!!!!.com/maps.json");
    // Get the response that sends back
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // Convert this response into a readable string
    String jsonString = null;
    try {
        jsonString = StreamUtils.convertToString
                (response.getEntity().getContent());
    } catch (IllegalStateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    // Create a JSON object that we can use from the String
    JSONObject json = null;
    try {
        json = new JSONObject(jsonString);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

               try{

     JSONArray jsonArray = json.getJSONArray("maps");
     Log.e("log_tag", "Opening JSON Array ");
        for(int i=0;i < jsonArray.length();i++)
            {                       

            JSONObject jsonObject = jsonArray.getJSONObject(i);

                String latitude =  jsonObject.getString("latitude");
                String longitude =  jsonObject.getString("longitude");
                String title =  jsonObject.getString("title");
                String country = jsonObject.getString("country");

                double lat = Double.parseDouble(latitude);
                double lng = Double.parseDouble(longitude);

                     Log.e("log_tag", "ADDING GEOPOINT"+title); 

                      point = new GeoPoint(
                             (int) (lat * 1E6), 
                             (int) (lng * 1E6));
                    OverlayItem overlayItem = new OverlayItem(point, title, 
                            country);
                    itemizedOverlay.addOverlay(overlayItem);

                    }
               }catch(JSONException e)        {
                 Log.e("log_tag", "Error parsing data "+e.toString());
            } 

               itemizedOverlay.populateNow(); 

               mapOverlays.add(itemizedOverlay);
                    if (savedInstanceState == null) {
            MapController controller = mapView.getController();
                        controller.setCenter(point);
                        controller.setZoom(7);

                    } else {

              // example restoring focused state of overlays
                        int focused;
                focused = savedInstanceState.getInt("focused_1", -1);
            if (focused >= 0) {
                              itemizedOverlay.setFocus
                       (itemizedOverlay.getItem(focused));
                        }
                    }
                    return jsonString;   }
     }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:08:45.263

例外说明了一切：您正试图通过在 UI 线程中加载地图来执行网络操作。这是一个坏主意，因为网络访问速度很慢并且会在 UI 运行时阻塞 UI。

您应该将加载的地图移动到不同的线程中，例如使用`AsyncTask`. 基本上，您定义一个扩展类，`AsyncTask`然后在其中运行下载`doInBackground()`并将结果填充到`onPostExecute()`. 有关详细信息，请参阅[Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)。

在您的情况下，您需要将此代码块放入`doInBackground()`方法中：

```
HttpClient client = new DefaultHttpClient();
// Perform a GET request for a JSON list
HttpUriRequest request = new HttpGet("https://dl.###.com/maps.json");
// Get the response that sends back
HttpResponse response = null;
try {
    response = client.execute(request);
} catch (ClientProtocolException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

// Create a JSON object that we can use from the String
JSONObject json = null;
try {
    json = new JSONObject(jsonString);
} catch (JSONException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

并确保它返回`json`对象以供进一步处理（基本上是该代码后面的行）`onPostExecute()`

查看文档以获取示例。您还可以查看[此代码](https://github.com/pilhuhn/ZwitscherA/blob/master/src/de/bsd/zwitscher/OneTweetActivity.java#L891)以获取更多示例。

# json - 泽西岛以对象为参数调用 get 不起作用

> ID：13083005
> 
> 赞同：2
> 
> 时间：2012-10-26T07:57:16.437
> 
> 标签：json, jakarta-ee, jersey

我是泽西岛的新手，我正在尝试为搜索结果开发 GET。为此，我需要发送一个带有搜索条件和数据的对象。我想知道我做错了什么。我的 Junit 测试用例出现以下异常

```
com.sun.jersey.api.client.UniformInterfaceException: GET http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/com.mcruiseon.carpool.concrete.SearchConcrete@676e3f returned a response status of 404 Not Found
at com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)
at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)
at test.carpool4all.SingleSearchTest.testPost(SingleSearchTest.java:89) 
```

我的服务器端 GET

```
 @GET
    @Path ("Request/{search}")
    @Consumes({ MediaType.APPLICATION_JSON })
    @Produces({ MediaType.APPLICATION_JSON })
    public Response search(@PathParam("search") SearchConcrete searchConcrete) {
        SearchJourneyRequest request = new SearchJourneyRequest(searchConcrete) ;
        SearchJourneyResponse response ;
        clientSession = sessionManager.getClientSession(searchConcrete.getIdentityHash()) ;
        clientSession.getSendQueue().sendRequest(request) ;
        try {
            response = (SearchJourneyResponse)clientSession.waitAndGetResponse(request) ;
        } catch (WaitedLongEnoughException e) {
            return Response.serverError().build() ;
        } catch (UnableToResolveResponseException e) {
            return Response.serverError().build() ;
        }
        return Response.ok(response.getSearchResults()).build();
    } 
```

客户端 Junit 测试

```
SearchConcrete searchProvider = new SearchConcrete(Globals.SearchCriteria.FlexiTime,
    identityHash,
    // more parameters
    );
    service = client.resource(UriBuilder.fromUri("http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/"+searchProvider).build());
    Object[] searchResults = service.type(MediaType.APPLICATION_JSON).get(Object[].class); 
```

编辑：感谢@eugen，为了解决这个问题，我添加了一个具体的类，我的 Object[] 作为私有成员。我使用 POST 而不是 GET，这里是固定代码。现在我的拼车搜索结果来了:)。

服务 = client.resource(UriBuilder.fromUri(

```
"http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request").build());
            SearchResultsConcrete searchResults = service.type(MediaType.APPLICATION_JSON).post(SearchResultsConcrete.class, searchProvider);
            assertNotNull(searchResults);
            assertNotNull(searchResults.getSearchResults()) ;
            assertTrue(searchResults.getSearchResults().length == 3) ;
            assertTrue(searchResults.getSearchResults()[SearchJourneyResponse.FLEXI_POSITION].length > 0) ;
            assertTrue(searchResults.getSearchResults()[SearchJourneyResponse.FLEXIENDTIME_POSITION].length > 0) ;

@POST
    @Path ("Request")
    @Consumes({ MediaType.APPLICATION_JSON })
    @Produces({ MediaType.APPLICATION_JSON })
    public Response search(JAXBElement<SearchConcrete> element) {
        SearchJourneyRequest request = new SearchJourneyRequest((SearchConcrete)element.getValue()) ;
        SearchJourneyResponse response ;
        clientSession = sessionManager.getClientSession(((SearchConcrete)element.getValue()).getIdentityHash()) ;
        clientSession.getSendQueue().sendRequest(request) ;
        try {
            response = (SearchJourneyResponse)clientSession.waitAndGetResponse(request) ;
        } catch (WaitedLongEnoughException e) {
            return Response.serverError().build() ;
        } catch (UnableToResolveResponseException e) {
            return Response.serverError().build() ;
        }
        return Response.ok(response.getSearchResults()).build();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:49:39.597

你做错事了。首先让我们分析您的错误：

```
com.sun.jersey.api.client.UniformInterfaceException: GET http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/com.mcruiseon.carpool.concrete.SearchConcrete@676e3f returned a response status of 404 Not Found. 
```

我们可以看到 com.mcruiseon.carpool.concrete.SearchConcrete@676e3f 附加在您请求的 url 末尾（由您的测试用例确认“ [http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/](http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/) ” +搜索提供者）。它没有任何意义。

我假设你想用你的 GET 请求发送一个 json？你不能那样做！GET 没有正文，只有 url（和标题），将 json 附加到您的 url 没有意义。如果要发送 json，则必须进行 POST。

您正在尝试做与这篇文章类似的事情[JAX-RS Web 服务使用 GET 接收的 JSON 对象的最大长度是多少？](https://stackoverflow.com/questions/13067124/what-is-the-maximum-length-of-json-object-received-by-jax-rs-web-service-using-g/13067631#13067631)，看看我的回答。

[以下是如何使用 Genson 库http://code.google.com/p/genson/](http://code.google.com/p/genson/)做你想做的事。使用 maven 下载 genson，当它在您的类路径中时，它将自动启用 json 支持并处理所有数据绑定。然后更改您的服务器端方法：

```
@POST
@Consumes({ MediaType.APPLICATION_JSON })
@Produces({ MediaType.APPLICATION_JSON })
public Response search(SearchConcrete searchConcrete) {
    ...
} 
```

将您的测试更改为：

```
// configure your client to use genson
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(GensonJsonConverter.class);
cli = Client.create(config);

// then the test code
TypeOfTheResponse response = cli.resource("http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request")
   .accept(MediaType.APPLICATION_JSON)
   .type(MediaType.APPLICATION_JSON)
   .post(TypeOfTheResponse.class, searchProvider); 
```

备注：不要使用 Object[] 作为响应，使用像 MyResponseItem[] 这样的具体 java 类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:10:16.900

您在`/`这里缺少一个斜杠：

```
"...Request"+searchProvider 
```

这必须是

```
"...Request/" + searchProvider 
```

**编辑**

您不能只将对象添加到 URL。这

```
"http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Search/Request/"+searchProvider 
```

将导致`toString()`方法`SearchConcrete`被调用。结果是

```
com.mcruiseon.carpool.concrete.SearchConcrete@676e3f 
```

服务器无法从中重建`SearchConcrete`。

# gwt - GWT Incubator PagingScrollTable 编译错误

> ID：13083009
> 
> 赞同：2
> 
> 时间：2012-10-26T07:57:31.850
> 
> 标签：gwt

我正在尝试在我的 gwt 应用程序中实现此示例：http: [//zenoconsulting.wikidot.com/blog](http://zenoconsulting.wikidot.com/blog:17) :17但是当我尝试编译项目时出现此错误：

```
 Compiling module com.myapp.security.GwtSpringSecurityProject
   Validating newly compiled units
      Ignored 2 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
   Scanning for additional dependencies: jar:file:/C:/_work/Eclipse/MyApp/war/WEB-INF/lib/gwt-incubator-20101117-r1766.jar!/com/google/gwt/gen2/table/client/AbstractScrollTable.java
      Computing all possible rebind results for 'com.google.gwt.gen2.table.client.AbstractScrollTable.Impl'
         Rebinding com.google.gwt.gen2.table.client.AbstractScrollTable.Impl
            Could not find an exact match rule. Using 'closest' rule <replace-with class='com.google.gwt.gen2.table.client.AbstractScrollTable.ImplIE6'/> based on fall back values. You may need to implement a specific binding in case the fall back behavior does not replace the missing binding
   Scanning for additional dependencies: jar:file:/C:/_work/Eclipse/MyApp/war/WEB-INF/lib/gwt-incubator-20101117-r1766.jar!/com/google/gwt/gen2/table/client/FixedWidthTableImpl.java
      Computing all possible rebind results for 'com.google.gwt.gen2.table.client.FixedWidthTableImpl.Impl'
         Rebinding com.google.gwt.gen2.table.client.FixedWidthTableImpl.Impl
            Could not find an exact match rule. Using 'closest' rule <replace-with class='com.google.gwt.gen2.table.client.FixedWidthTableImpl.ImplIE8'/> based on fall back values. You may need to implement a specific binding in case the fall back behavior does not replace the missing binding
   [ERROR] An internal compiler exception occurred
com.google.gwt.dev.jjs.InternalCompilerException: Failed to get JNode
    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:140)
    at com.google.gwt.dev.jjs.impl.TypeMap.internalGet(TypeMap.java:242)
    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:138)
    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:71)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.processExpression(GenerateJavaAST.java:1144)
    at sun.reflect.GeneratedMethodAccessor27.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.dispatch(GenerateJavaAST.java:577)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.dispProcessExpression(GenerateJavaAST.java:603)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.processStatement(GenerateJavaAST.java:1771)
    at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.dispatch(GenerateJavaAST.java:577)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.dispProcessStatement(GenerateJavaAST.java:638)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.processStatements(GenerateJavaAST.java:1846)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.processMethod(GenerateJavaAST.java:1513)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST$JavaASTGenerationVisitor.processType(GenerateJavaAST.java:501)
    at com.google.gwt.dev.jjs.impl.GenerateJavaAST.exec(GenerateJavaAST.java:2958)
    at com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:608)
    at com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:284)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:233)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:145)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177)
      [ERROR] <no source info>: public abstract class java.text.DateFormat
    extends java.text.Format
/*   fields   */
protected [unresolved] Unresolved type java.util.Calendar calendar
protected [unresolved] Unresolved type java.text.NumberFormat numberFormat
public static final [unresolved] int ERA_FIELD
public static final [unresolved] int YEAR_FIELD
public static final [unresolved] int MONTH_FIELD
public static final [unresolved] int DATE_FIELD
public static final [unresolved] int HOUR_OF_DAY1_FIELD
public static final [unresolved] int HOUR_OF_DAY0_FIELD
public static final [unresolved] int MINUTE_FIELD
public static final [unresolved] int SECOND_FIELD
public static final [unresolved] int MILLISECOND_FIELD
public static final [unresolved] int DAY_OF_WEEK_FIELD
public static final [unresolved] int DAY_OF_YEAR_FIELD
public static final [unresolved] int DAY_OF_WEEK_IN_MONTH_FIELD
public static final [unresolved] int WEEK_OF_YEAR_FIELD
public static final [unresolved] int WEEK_OF_MONTH_FIELD
public static final [unresolved] int AM_PM_FIELD
public static final [unresolved] int HOUR1_FIELD
public static final [unresolved] int HOUR0_FIELD
public static final [unresolved] int TIMEZONE_FIELD
private static final [unresolved] long serialVersionUID
public static final [unresolved] int FULL
public static final [unresolved] int LONG
public static final [unresolved] int MEDIUM
public static final [unresolved] int SHORT
public static final [unresolved] int DEFAULT
/*   methods   */
[unresolved] protected void <init>() 
[unresolved] public java.lang.Object clone() 
[unresolved] public boolean equals(java.lang.Object) 
public final java.lang.String format(java.util.Date) 
public final java.lang.StringBuffer format(java.lang.Object, java.lang.StringBuffer, java.text.FieldPosition) 
public abstract java.lang.StringBuffer format(java.util.Date, java.lang.StringBuffer, java.text.FieldPosition) 
[unresolved] private static java.text.DateFormat get(int, int, int, Unresolved type java.util.Locale) 
[unresolved] public static Unresolved type java.util.Locale[] getAvailableLocales() 
[unresolved] public Unresolved type java.util.Calendar getCalendar() 
[unresolved] public static final java.text.DateFormat getDateInstance() 
[unresolved] public static final java.text.DateFormat getDateInstance(int) 
[unresolved] public static final java.text.DateFormat getDateInstance(int, Unresolved type java.util.Locale) 
[unresolved] public static final java.text.DateFormat getDateTimeInstance() 
[unresolved] public static final java.text.DateFormat getDateTimeInstance(int, int) 
[unresolved] public static final java.text.DateFormat getDateTimeInstance(int, int, Unresolved type java.util.Locale) 
[unresolved] public static final java.text.DateFormat getInstance() 
[unresolved] public Unresolved type java.text.NumberFormat getNumberFormat() 
[unresolved] public static final java.text.DateFormat getTimeInstance() 
[unresolved] public static final java.text.DateFormat getTimeInstance(int) 
[unresolved] public static final java.text.DateFormat getTimeInstance(int, Unresolved type java.util.Locale) 
[unresolved] public Unresolved type java.util.TimeZone getTimeZone() 
[unresolved] public int hashCode() 
[unresolved] public boolean isLenient() 
[unresolved] public java.util.Date parse(java.lang.String) throws java.text.ParseException
[unresolved] public abstract java.util.Date parse(java.lang.String, Unresolved type java.text.ParsePosition) 
[unresolved] public java.lang.Object parseObject(java.lang.String, Unresolved type java.text.ParsePosition) 
[unresolved] public void setCalendar(Unresolved type java.util.Calendar) 
[unresolved] public void setLenient(boolean) 
[unresolved] public void setNumberFormat(Unresolved type java.text.NumberFormat) 
[unresolved] public void setTimeZone(Unresolved type java.util.TimeZone) 
/*   members   */
Unresolved type java.text.DateFormat$DateFormatGetter
Unresolved type java.text.DateFormat$Field

         org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding
      [ERROR] at PsTable.java(351): new SimpleDateFormat("MM/dd/yyyy").format(rowValue.getDate())
         org.eclipse.jdt.internal.compiler.ast.MessageSend
      [ERROR] at PsTable.java(351): return new SimpleDateFormat("MM/dd/yyyy").format(rowValue.getDate());
         org.eclipse.jdt.internal.compiler.ast.ReturnStatement
      [ERROR] at PsTable.java(350): public String getCellValue(Message rowValue);

         com.google.gwt.dev.jjs.ast.JMethod
      [ERROR] at PsTable.java(348): final class PsTable$DateColumnDefinition extends AbstractColumnDefinition 
         com.google.gwt.dev.jjs.ast.JClassType 
```

我在我的应用程序中简单地添加了这个示例的类，并在我的 gwt 客户端类中创建了一个新的 PsTable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:53:25.083

# android - 定义最大相对布局大小

> ID：13083012
> 
> 赞同：0
> 
> 时间：2012-10-26T07:57:40.370
> 
> 标签：android, android-layout, android-relativelayout

我必须在屏幕上定义 5 个布局并将它们放置为 3x3 网格。布局为空。 ![在此处输入图像描述](../Images/64de3ddac8a24f7df2620d5ae3fa6a1f.png)

在某些时候，我希望以编程方式在一个布局上添加一些视图，并且该视图不能超过分配的布局大小。换句话说，我希望有一个可以放置任何视图的布局，并且可以保证它不会在该布局上增长。重要提示：我无权手动更改添加视图的大小，我只能控制其最大大小。

我现在有这样的布局：

```
<RelativeLayout
    android:id="@+id/pluginsLayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"     
    android:layout_above="@+id/mainButtons"
    android:layout_below="@+id/paramsLayout">
        <RelativeLayout
            android:id="@+id/capturingPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"           
            android:layout_gravity="fill_horizontal|left"
            android:layout_above="@+id/processingPluginLayout">                                         
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/processingPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"               
            android:layout_gravity="fill_horizontal|left"
            android:layout_above="@+id/filterPluginLayout">                                     
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/filterPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_weight="1"
            android:layout_gravity="fill_horizontal|left|bottom"                
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true">                                  
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/exportPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"               
            android:layout_gravity="fill_horizontal|right"
            android:layout_above="@+id/viewfinderPluginLayout">                                     
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/viewfinderPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"                                       
            android:layout_gravity="fill_horizontal|bottom|right"
            android:layout_toLeftOf="@+id/filterPluginLayout"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true">                                     
        </RelativeLayout>
    </RelativeLayout> 
```

我在代码中添加了新视图：

```
public void addVFPluginView(View view)
{       
    ((RelativeLayout)MainScreen.thiz.findViewById(R.id.viewfinderPluginLayout)).addView(view);      
} 
```

我希望得到这样的行为：

![在此处输入图像描述](../Images/ae37dc2b146cdb84b1535228588b2b3b.png)

但我只有这个，视图填充整个父布局：

![在此处输入图像描述](../Images/2e10ea386666c9c33cfcfa1bd46c3270.png)

注意：我使用 API8（没有 GridLayout）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:11:12.860

你可以在 API8 中使用网格布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:07:04.287

我已经设法解决了这个问题。主要思想是我自己以编程方式控制视图的大小。我为每个区域计算适当的比例，当有人向其中的某些布局添加新视图时，我会检查此视图的大小是否适合分配的布局大小。如果尺寸不合适，我会为此视图修改 LayoutParams。这是空布局的 xml：

```
<RelativeLayout
    android:id="@+id/pluginsLayout"             
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"             
    android:layout_above="@+id/mainButtons"
    android:layout_below="@+id/paramsLayout">
        <LinearLayout
            android:id="@+id/capturePluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"                
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true">               
        </LinearLayout>
        <LinearLayout
            android:id="@+id/processingPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"                
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true">                                           
        </LinearLayout>
        <LinearLayout
            android:id="@+id/filterPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                
            android:layout_alignParentLeft="true"
            android:layout_alignParentBottom="true">                                            
        </LinearLayout>
        <LinearLayout
            android:id="@+id/exportPluginLayout"
            android:orientation="vertical"              
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true">                                               
        </LinearLayout>
        <RelativeLayout
            android:id="@+id/viewfinderPluginLayout"
            android:orientation="vertical"
            android:layout_width="wrap_content"             
            android:layout_height="wrap_content"                                        
            android:layout_alignParentRight="true"
            android:layout_alignParentBottom="true">                                                        
        </RelativeLayout>
    </RelativeLayout> 
```

像这样我管理添加视图的大小：

```
public void addVFPluginView(View view)
{
    //Get maximum width and height for such plugins
    int layoutHeight = this.getViewfinderLayoutHeight();
    int layoutWidth = this.getViewfinderLayoutWidth();

    //Calculate appropriate size of added plugin's view
    android.widget.RelativeLayout.LayoutParams viewLayoutParams = (android.widget.RelativeLayout.LayoutParams)view.getLayoutParams();
    viewLayoutParams = this.getTunedRelativeLayoutParams(view, viewLayoutParams, layoutWidth, layoutHeight);

//Get fixed maximum size for this plugin type
public int getViewfinderLayoutWidth()
{
    return ((RelativeLayout)MainScreen.thiz.findViewById(R.id.pluginsLayout)).getWidth()/2;
}

public int getViewfinderLayoutHeight()
{
    return (int)(((RelativeLayout)MainScreen.thiz.findViewById(R.id.pluginsLayout)).getHeight()*0.7);
}

    ((RelativeLayout)MainScreen.thiz.findViewById(R.id.viewfinderPluginLayout)).addView(view, viewLayoutParams);        
}

android.widget.RelativeLayout.LayoutParams getTunedRelativeLayoutParams(View view, android.widget.RelativeLayout.LayoutParams currParams, int goodWidth, int goodHeight)
{
    int viewHeight, viewWidth;

    if(currParams != null)
    {
        viewHeight = currParams.height;
        viewWidth = currParams.width;

        if(viewHeight > goodHeight || viewHeight <= 0)
            viewHeight = goodHeight;

        if(viewWidth > goodWidth || viewWidth <= 0)
            viewWidth = goodWidth;

        currParams.width = viewWidth;
        currParams.height = viewHeight;

        view.setLayoutParams(currParams);
    }
    else
    {       
        currParams = new android.widget.RelativeLayout.LayoutParams(goodWidth, goodHeight);
        view.setLayoutParams(currParams);
    }

    return currParams;
} 
```

最后，下一个问题是针对具有合适大小的几个视图，但总的来说它们大于分配的大小。也许我会直接计算视图的大小，如果下一个添加视图的大小总和超过分配的大小，我只是不允许添加这个视图。

# asp.net-mvc - IPAD IOS 6 不在 Telerik 报告查看器中显示报告

> ID：13083013
> 
> 赞同：2
> 
> 时间：2012-10-26T07:57:43.307
> 
> 标签：asp.net-mvc, telerik, telerik-mvc, telerik-reporting

我们遇到了 IPAD IOS 6 没有在 Telerik Report Viewer 中显示报告的问题。

我们有一个调用 ReportViewer 的 MVC ASP.NET 应用程序。

But Report Viewer does not display the report when the 'Preview' button is selected.

您能否建议我如何在 IPAD IOS 6 中显示 Telerik 报告。提示：它适用于低于当前新版本的 IPAD IOS 版本。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T20:48:22.030

我很确定现在你已经解决了你的问题。但是，对于遇到同样情况的其他人来说，问题通常是由于文档在 iframe 中呈现并且页面使用 HTML5 DOCTYPE 引起的。我已经解决了这个问题，改变了这一点：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 ..... 
```

对此：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
..... 
```

正如[这里](http://www.telerik.com/support/kb/reporting/details/blank-report-in-asp.net-reportviewer-on-ipad-iphone)推荐的那样。

# ios5 - 当我取消 NKAssetDownload 时，应用程序无法启动

> ID：13083019
> 
> 赞同：1
> 
> 时间：2012-10-26T07:57:54.913
> 
> 标签：ios5, newsstand-kit

我正在使用 NewsstandKit.frame 开发一个应用程序。有 NKAssetDownload 请求：

```
 NSURLRequest *request = [[NSURLRequest alloc]initWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:5.0];
    _assetDownload = [self.issue addAssetWithRequest:request];
   [_assetDownload downloadWithDelegate:self]; 
```

以及我停止/暂停下载以取消连接的方式：

```
 NSURLConnection *con = [[self.issue.downloadingAssets objectAtIndex:0] downloadWithDelegate:self];
    [con cancel]; 
```

然后就出现了一个问题，当我再次运行该应用程序时，将显示以下错误信息：

-[NKAssetDownload 封面]：无法识别的选择器发送到实例 0x6c69fc0 2012-10-26 15:49:39.257 MyMagazineDemoV0.0.1[3872:fb03] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[NKAssetDownload 封面]： unrecognized selector sent to instance 0x6c69fc0' *** First throw call stack: (0x18b1022 0x1a42cd6 0x18b2cbd 0x1817ed0 0x1817cb2 0x10405 0x1018d 0x12f0a 0x127f8 0x3a2a 0x3d999b 0x338401 0x338a46 0x254e 0x310386 0x311274 0x320183 0x320c38 0x314634 0x179bef5 0x1885195 0x17e9ff2 0x17e88da 0x17e7d84 0x17e7c9b 0x310c65 0x312626 0x2292 0x2205) terminate called throwing an exception

我不知道这是什么意思，因为我在 NKAssetDownload 中找不到名为“cover”的方法。有人可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T06:37:34.187

**开始下载的正确步骤如下：**

currentIssue = [图书馆 addIssueWithName:issueName date:issueDate];

NSURLRequest *urlReq = [NSURLRequest requestWithURL:[NSURL URLWithString:file_Url]]; NKAssetDownload *asset = [currentIssue addAssetWithRequest:urlReq]; [资产下载WithDelegate:self];

**删除问题时，您还应该从报亭库中删除问题：**

```
NKIssue *issueToRemove = [[NKLibrary sharedLibrary] issueWithName:issueName];
if (issueToRemove) {
    [[NKLibrary sharedLibrary] removeIssue:issueToRemove];
} 
```

除此之外，您还必须实现 NSURLConnectionDownloadDelegate 方法

*   (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes

*   (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL

尝试这个。这工作没有错误。

# c# - 在后面的代码中查找控件 - 多个结果控件 - 第 n 次出现

> ID：13083020
> 
> 赞同：0
> 
> 时间：2012-10-26T07:57:56.840
> 
> 标签：c#, asp.net

我有以下问题。

我`asp:textbox`在页面上有一个运行服务器，其 id 为 say`txt` 这个文本框在 a 中`<div>`，没什么特别的。IE：

```
<div>
 <asp:TextBox id="txt" runat="server"></asp:TextBox>
</div> 
```

问题是有一些java脚本，当你按下相应的按钮时，它会加倍（复制）div。这是设计使然。它的意思是。

当您点击保存但在 asp:Button 的页面底部时，它找不到我需要的值，因为它返回两个结果。

在后面的代码中：

```
(Textbox) blah = (Textbox)senderbutton.FindControl("txt");

string test = blah.text 
```

但结果本质上是-->“文本框中的值，文本框中的值”

即它有两次。我通过执行以下操作解决了这个问题：

```
string[] test = blah.text.split(new[] { ',' }) 
```

然后只调用数组中的第二个值或其他任何值。

**但是**，现在我遇到了这种情况，但问题是用户可以输入一个带有 ' , ' 的字符串，因此拆分变得很糟糕......

那么我可以找到一个带有 id 的控件，但只在后面的代码中找到它的第 n 次出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:17:08.527

似乎您需要为输入控件的每个副本提供不同的名称（例如**txt0,txt1** ...）。您可以在您的 asp 按钮的客户端单击（表单提交之前）上使用 javascript up 来执行此操作

-- **Javascript方法**

```
 function ModifyName() {
        var x = 0;
        $("input[name='txt']").each(function () {
            $(this).attr("name", $(this).attr("name") + x);
            x++;
        });
    } 
```

-- **asp:按钮**

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" 
   OnClientClick="ModifyName();" onclick="btnSubmit_Click" /> 
```

所以在后面的代码中你可以得到这样的值......

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
        var resultArr = Request.Form.AllKeys.Where(x => x.Contains("txt"))
            .Select(x => Request.Form[x]).ToArray();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:01:11.197

这不是一个很好的解决方案，但您可以在回发时直接检查 Request.Form 集合并编写一些代码来处理您动态添加的文本框字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:08:43.100

最好的解决方案是：避免在 js 中复制 div。既然您说“这是设计使然。它的意思是。”（即使我真的怀疑），有一些替代解决方案：

(1) 不要使用表单的默认提交行为。即在保存按钮的click(js)事件中，组织好表单中的数据，然后提交。

（2）修改第二个（复制的）文本框的id，使其与原来的id不同，然后在后面的代码中获取数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T08:07:40.160

当您可以从后面的代码直接访问控件时，我不确定为什么要使用`FindControl`方法来查找控件。`txt`

您可以轻松获得结果

```
String test = txt.Text; 
```

# java - file.nextInt 退出我的嵌套 for 循环

> ID：13083022
> 
> 赞同：0
> 
> 时间：2012-10-26T07:58:03.183
> 
> 标签：java, file-io, for-loop, multidimensional-array

我正在尝试从文本文件中读取数据并将其放入二维数组中。我有文本文件并且我已经测试了我的程序并且知道它会读取数据但是每当我尝试将数据放入我的数组时都会退出以下循环。

```
for(int i = 0; i<9; i++){
  for(int j = 0; j<9; j++){
    System.out.print("hey");
    grid[i][j] = file.nextInt();
  }
} 
```

任何帮助，将不胜感激。

[**编辑**]
很抱歉最初缺乏信息，我只发布了我遇到问题的片段。
`grid`在代码中被初始化为更高，`int[][] grid;`并且文件是一个`.txt`包含每个数字的文件，这些数字`grid`被一个空格分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:17:29.203

`int[][] grid;`实际上并没有分配任何内存，也许你想要

```
int[][] grid = new int[9][9]; 
```

# java - 在 myBatis 中输入 selectList

> ID：13083023
> 
> 赞同：1
> 
> 时间：2012-10-26T07:58:08.683
> 
> 标签：java, ibatis, mybatis

我正在从 iBatis 迁移到 myBatis，我正面临这个问题：当我调用 selectList 方法时，它返回 a`List<Object>`而不是正确的类型（例如`List<Document>`），所以我在这里得到一个错误：

```
return createFiscalCodesMap(getSqlSession().selectList(STMT_LOAD, parameters));

private Map<String, String> createFiscalCodesMap(List<Document> documentList) { ... } 
```

这是涉及的 xml 元素：

```
<select id="load" parameterType="java.util.Map" resultType="Document">...</select> 
```

我读过 selectList 返回一个类型化的列表 ( `List<E>`)，但我不知道如何获取它。

PS：我正在编写代码来自动迁移到 myBatis，所以我需要一种方法来解决问题而不需要改变很多东西。

**编辑**：我正在尝试不同的解决方案，但我无法弄清楚问题出在哪里。

这不起作用（错误：无法从`List<Object>`to 转换`List<Document>`）：

```
return createFiscalCodesMap((List<Document>) getSqlSession().selectList(STMT_LOAD, parameters)); 
```

这有效：

```
List<Document> temp = getSqlSession().selectList(STMT_LOAD, parameters);
return createFiscalCodesMap(temp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T19:51:25.793

由于 selectList 方法是在考虑泛型的情况下定义的，并且您没有在方法调用中使用泛型，因此返回一个对象列表是正常的。

避免错误的正确方法应该是使用泛型调用 selectList：

```
return createFiscalCodesMap(getSqlSession().<Document>selectList(STMT_LOAD, parameters)); 
```

请注意，从 MyBatis 3.1.0 开始支持带有泛型的 selectList，因此请确保您使用的是 3.1.0+ 来完成这项工作。

# python - 我可以更改python首先查找模块的顺序吗？

> ID：13083026
> 
> 赞同：5
> 
> 时间：2012-10-26T07:58:13.177
> 
> 标签：python, import

假设我有一个脚本，假设`my_tools.py`我作为模块导入。但是`my_tools.py`会保存两次：在`C:\Python27\Lib` 执行导入的脚本运行的同一目录中。

我可以更改python`my_tools.py`首先查找的顺序吗？也就是说，首先检查它是否存在，`C:\Python27\Lib`如果存在，是否导入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:05:41.973

您可以随心所欲`sys.path`地进行操作...如果您想移动当前目录以最后扫描，那么只需执行`sys.path[1:] + sys.path[:1]`. 否则，如果您想深入了解细节，则可以使用[imp 模块](http://docs.python.org/library/imp.html)进行自定义，直到您满意为止-该页面上有一个示例，[http://blog.dowski.com/2008/07/31上有一个示例/customizing-the-python-import-system/](http://blog.dowski.com/2008/07/31/customizing-the-python-import-system/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T08:05:24.573

您可以修改[`sys.path`](http://docs.python.org/library/sys.html#sys.path)，这将确定 Python 搜索导入的顺序和位置。（请注意，您必须在导入语句*之前执行此操作。）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T08:15:39.277

如果您不希望 python 搜索内置模块，请先在当前文件夹中搜索，，

你可以改变`sys.path`

`upon program startup, the first item of this list, path[0], is the directory containing the script that was used to invoke the Python interpreter`

`sys.path[0] is the empty string, which directs Python to search modules in the current directory first`, 你可以把它放在列表的末尾，这样它会在到达当前目录之前首先搜索所有可能的位置

# iphone - iPhone 应用程序未在装有 iOS6 的 iPad 上的 App Store 中显示

> ID：13083028
> 
> 赞同：12
> 
> 时间：2012-10-26T07:58:30.743
> 
> 标签：iphone, ios, ipad, ios6, app-store-connect

# 解决

Apple 方面的 App Store 出现问题，几周后问题自行解决。

# 原帖

大约一周以来，我公司为 iPhone 开发的应用程序在 iPad 机型上的 App Store 应用程序中不再可见。它们以前是可见的。以 iPad 为目标的应用程序在 iPad 上仍然可见。

在谷歌上搜索计算机上的应用程序时，可以找到它们，通过 iTunes 下载并安装在 iPad 上。

在 iPad 上使用 Safari 搜索 Google 时，也可以在 iPad 上找到、下载和安装应用程序。

在 iPhone 4 (iOS 6.0) 和 iPod Touch (iOS 5.1.1) 上，它们在设备上的 App Store 应用程序中可见。

在 iTunesConnect 中，这些应用程序设置为在我们的地理区域可用。这些应用程序是针对 SDK 的 4.3、5.0 或 6.0 版本构建的，但它们都应该与 6.0 兼容。

我希望有人能指出正确的方向，让这些应用程序再次出现在 iPad 上的 App Store 应用程序中。

预先感谢

编辑 1：“iPad”和“iPhone”搜索结果都是空的。
编辑 2：添加了指向有问题的应用程序的链接。
编辑 3：删除编辑 2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:41:26.323

**更新：**截至 12-18 日，我们的应用程序现在出现在 iPad iOS6 App Store 上。

我有同样的问题。我向 Apple 发送了多个支持请求，并收到了以下回复。他们声称他们“意识到了这个问题”，“正在努力解决”，并且“可能需要六到八周”（！？！）来解决。

> 感谢您联系 Apple 开发人员支持。我的名字是 Jasmine，今天我很乐意为您提供帮助。
> 
> 我了解到，当您在装有 iOS 6 的 iPad 上搜索您的应用程序 Doximity 时，您会收到一条消息“未找到任何结果”。这个对吗？
> 
> 对于由此给您带来的不便和沮丧，我深表歉意。
> 
> 感谢您的信息。Apple 已意识到此问题，目前正在努力解决该问题。解决问题可能需要六到八周的时间。再次，对于给您带来的不便，我深表歉意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T13:30:22.863

**更新 - 2013 年 1 月 7 日 - 我们的应用 Rogerthat 现在在 iPad 上的 App Store 中可见**

我有完全相同的问题。也开始于大约一周前（大约 2012 年 10 月 22 日）。我们也位于比利时。

我们的应用程序 ID：[https ://itunes.apple.com/us/app/rogerthat/id446796149](https://itunes.apple.com/us/app/rogerthat/id446796149)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:01:04.157

当您在 appstore 中的 ipad 上时，选择显示 iphone 应用程序 ;-)

# c# - 如何在会话中检索单个列的多个值

> ID：13083031
> 
> 赞同：2
> 
> 时间：2012-10-26T07:58:59.547
> 
> 标签：c#, asp.net, mysql

我网站上的每个用户都有一个`reg_id`. 有一些`emergency_contact_id`与此有关`reg_id`。

例如：

```
EmerContact_id  Reg_id    
  91              1    
  92              1    
  93              1    
  94              1    
  95              1 
```

现在我想像这样将这些存储`EmerContact_id`到会话中：

```
Session["Emer1"]    
Session["Emer2"]    
Session["Emer3"]    
Session["Emer4"]    
Session["Emer5"] 
```

我怎样才能做到这一点？

我正在考虑使用：

```
while(reader.read()) { ... } 
```

但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:26:01.063

您可以在会话中存储完整的列表或数据集，但不建议这样做，但您可以这样做。

获取时，您可以将其转换为所需的类型。

简单易行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:27:12.393

如果我理解你的问题......

请试试这个

```
string[] EmerContactList = new string[]{"Emer1","Emer2","Emer3"};
Session["values"] = EmerContactList ; 
```

访问

```
string[] results= (string[])Session["values"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:30:15.670

您可以`MySqlDataReader`像这样使用索引标记来使用和迭代您的结果。

```
using (MySqlConnection dbConnection = new MySqlConnection("connectionstring"))
{
    dbConnection.Open();

    using (MySqlCommand dbCommand = new MySqlCommand("select EmerContact_id from [Table] order by EmerContact_id asc;", dbConnection))
    {
        using (MySqlDataReader dbReader = dbCommand.ExecuteReader())
        {
            int index = 1;

            while (dbReader.Read())
            {
                Session["Emer" + index.ToString()] = dbReader[0].ToString();

                index++;
            }
        }
    }

    dbConnection.Close();
} 
```

您还可以使用集合对象，`List`并将其序列化到会话中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:50:14.177

您还可以使用一个会话对象来存储值...

```
List<int> EmerContacts = new List<int>();

using (MySqlConnection dbConnection = new MySqlConnection("connectionstring"))
{
    using (MySqlCommand dbCommand = new MySqlCommand("select EmerContact_id from [Table];", dbConnection))
    {
        using (MySqlDataReader dbReader = dbCommand.ExecuteReader())
        {

            while (dbReader.Read())
            {
                EmerContacts.Add((int)dbReader[0].ToString());

             }
        }
    }
}

Session["EmerContacts"] = EmerContacts; 
```

当您需要使用列表时，您可以将会话转换回列表...

`List<int> myList = (List<int>)Session["EmerContacts"];`

**我手写了一些，所以它可能无法编译，但你应该明白它的要点。**

当您使用这种方法时，您可以轻松地遍历集合。使用您的方法会使这变得更加困难。

# macos - 使用命令行工具确定是什么阻止了 OSX 上的进程？

> ID：13083034
> 
> 赞同：5
> 
> 时间：2012-10-26T07:59:02.460
> 
> 标签：macos, instruments, blocking, strace, dtrace

标题说得最多，真的。在 Linux 上，使用or可能很[容易](https://gist.github.com/3957499)，并且在从 OSX Leopard 中删除之前，它曾经在 OSX 上很容易，以及底层系统调用（afaik）。`strace``lsof``/proc``truss`

显而易见的方法是用 来解决这个问题`dtrace`，但据我所知`dtrace`，它不会这样做，因为它会在事件发生时捕获它们 - 在我的情况下，阻塞系统调用已经开始。顺便说一句，如果这可以解决，我很乐意纠正`dtrace`。

我看到 Xcode 的 Instruments 有一个监视器，它通过定期对进程堆栈进行采样来实现类似的功能（不确定它依赖于什么系统调用来做到这一点！），也许命令行上的类似功能就足够了（因为它会显示堆栈一直到包装系统调用的库调用）。为了对我的用例有用，这个“采样命令行工具”必须找到并解析它在堆栈上找到的参数，以便确定我们阻止了哪个文件/文件描述符。

最后一件事 - 在 Linux 上，您通常可以作为普通用户执行此操作（假设没有`ptrace_scope`技巧）。如果 OSX 解决方案也不需要 root，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T14:46:26.600

您可以使用`sample`：`sample PID -e`

例如，`nc -l localhost 5999`你会得到一个带有调用图的文件：

```
Call graph:
    9046 Thread_242504   DispatchQueue_1: com.apple.main-thread  (serial)
      9046 start  (in libdyld.dylib) + 1  [0x7fff90a847e1]
        9046 ???  (in nc)  load address 0x102453000 + 0x166c  [0x10245466c]
          9046 __accept  (in libsystem_kernel.dylib) + 10  [0x7fff94445996] 
```

以及其他有用的信息，例如加载的二进制图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:07:48.200

我提出了一个假设如下的解决方案：

1.  该过程可以发出信号。
2.  该进程是单线程的（可能不会在阻塞线程中处理信号）。
3.  你有root访问权限。

**dtruss**支持为每个系统调用（-s 参数）打印完整的堆栈跟踪。

例子：

1号航站楼：

```
$ python
>>> import socket
>>> s = socket.socket()
>>> s.bind(('', 1234))
>>> s.listen(1)
>>> s.accept() # blocking! 
```

2号航站楼：

```
$ dtruss -s -p `pgrep python` # or your python pid if you don't have pgrep (port install proctools) 
```

终端1：

```
press Ctrl-C 
```

2号航站楼：

```
sigreturn(0x7FFF5FBFD660, 0x1E, 0x10031B3D0)             = 0 Err#-2
          libsystem_kernel.dylib`__accept+0xa # HERE IT IS!
          libpython2.7.dylib`PyEval_EvalFrameEx+0x42bf
          libpython2.7.dylib`fast_function+0xb3
... 
```

如果 sigreturn 堆栈中的第一帧（信号处理程序的拆卸代码：http://linux.die.net/man/2/sigreturn [）](http://linux.die.net/man/2/sigreturn)。

第二帧是我们系统调用的标准库包装器：accept。

# spring-mvc - 如何使用 Spring MVC 显示有关上传的多部分文件的验证错误

> ID：13083036
> 
> 赞同：3
> 
> 时间：2012-10-26T07:59:11.490
> 
> 标签：spring-mvc, validation, multipart, multipartform-data

我有一个带有**文件上传表单的****Spring MVC**应用程序。

 **如果上传的内容无效（例如内容不是图像等），我希望能够向用户显示验证错误

但是，根据定义，发布的内容是类型：（`MultipartFile`multipart */form-data*），因此我的表单中不能有 a `@ModelAttribute`，为了使用 a `BindingResult`，似乎我确实需要`@ModelAttribute`在`BindingResult`.

那么我的问题是，当我只有一个时，向用户显示验证错误的最合适的方式是`MultipartFile`什么？我当然可以手动将模型属性添加到模型中，但我确信有更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:14:51.263

如果您使用的是 Java Bean Validation (JSR 303)，则可以制作验证内容类型的注释。请参阅下面的代码。

```
import static java.lang.annotation.ElementType.*;
import static java.lang.annotation.RetentionPolicy.*;
/**
 * The annotated element must have specified content type.
 *
 * Supported types are:
 * <ul>
 * <li><code>MultipartFile</code></li>
 * </ul>
 *
 * @author Michal Kreuzman
 */
@Documented
@Retention(RUNTIME)
@Constraint(validatedBy = {ContentTypeMultipartFileValidator.class})
@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
public @interface ContentType {

    String message() default "{com.kreuzman.ContentType.message}";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

/**
 * Specify accepted content types.
 *
 * Content type example :
 * <ul>
 * <li>application/pdf - accepts PDF documents only</li>
 * <li>application/msword - accepts MS Word documents only</li>
 * <li>images/png - accepts PNG images only</li>
 * </ul>
 *
 * @return accepted content types
 */
     String[] value();
} 
```

* * *

```
/**
  * Validator of content type. This is simple and not complete implementation
  * of content type validating. It's based just on <code>String</code> equalsIgnoreCase
  * method.
  *
  * @author Michal Kreuzman
  */
 public class ContentTypeMultipartFileValidator implements ConstraintValidator<ContentType, MultipartFile> {

private String[] acceptedContentTypes;

@Override
public void initialize(ContentType constraintAnnotation) {
    this.acceptedContentTypes = constraintAnnotation.value();
}

@Override
public boolean isValid(MultipartFile value, ConstraintValidatorContext context) {
    if (value == null || value.isEmpty())
        return true;

    return ContentTypeMultipartFileValidator.acceptContentType(value.getContentType(), acceptedContentTypes);
}

private static boolean acceptContentType(String contentType, String[] acceptedContentTypes) {
    for (String accept : acceptedContentTypes) {
            // TODO this should be done more clever to accept all possible content types
        if (contentType.equalsIgnoreCase(accept)) {
            return true;
        }
    }

    return false;
}
} 
```

* * *

```
public class MyModelAttribute {

@ContentType("application/pdf")
private MultipartFile file;

public MultipartFile getFile() {
    return file;
}

public void setFile(MultipartFile file) {
    this.file = file;
}
}
@RequestMapping(method = RequestMethod.POST)
public String processUploadWithModelAttribute(@ModelAttribute("myModelAttribute") @Validated final MyModelAttribute myModelAttribute, final BindingResult result, final Model model) throws IOException {
 if (result.hasErrors()) {
     // Error handling
     return "fileupload";
 }

 return "fileupload";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T11:21:38.400

我得到了 Spring 社区论坛问题的答案：

这是控制器方法：

```
@RequestMapping(method = RequestMethod.POST)
    public String processUploadWithModelAttribute(@ModelAttribute("myModelAttribute") final MyModelAttribute myModelAttribute, final BindingResult result, final Model model) throws IOException {
        String mimeType = determineMimeType(myModelAttribute.getFile().getBytes());
        if (mimeType.equalsIgnoreCase("application/pdf")){
            result.addError(new ObjectError("file", "pdf not accepted"));
        }
            return "fileupload";
    } 
```

和模型属性类：

```
public class MyModelAttribute {

    private MultipartFile file;

    public MultipartFile getFile() {
        return file;
    }

    public void setFile(MultipartFile file) {
        this.file = file;
    }
} 
```

**想法是将 MultipartFile 作为属性放入 ModelAttribute 中。****

# app-store - 安卓应用打开味精文件

> ID：13083038
> 
> 赞同：1
> 
> 时间：2012-10-26T07:59:28.887
> 
> 标签：app-store

嗨，我在使用 Apple 多年后对 android 很陌生，当时我有一台 iPad，使用了一个名为 Klammer 的应用程序来打开 MSG 文件，任何人都可以建议在 android 市场上是否有类似的产品。

# linux-kernel - 控制 dma_pool_alloc 给出什么样的 DMA 地址

> ID：13083039
> 
> 赞同：2
> 
> 时间：2012-10-26T07:59:31.527
> 
> 标签：linux-kernel, arm, dma

我有一个带有两种 RAM 的 ARM 平台。有一些 SDRAM 和内部 SRAM。平台上的 USB 控制器只需要位于内部 SRAM 上的 DMA 地址。目前，我正在使用一个通用驱动程序，它通过调用`dma_pool_alloc`.

有没有办法告诉内核只提供内部 SRAM 而不是 SDRAM 上的 USB 驱动程序 DMA 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T22:00:47.550

您必须使用单独的分配器。例如， **IMX**设备使用[iram_alloc.c](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/mach-imx/iram_alloc.c)从内部 SRAM 获取内存。您可能必须过度分配以获得位于 DMA 控制器所需边界上的内存。

 **如果内存进入通用内核池，则无法区分。通常，如果内存具有特殊属性，平台将提供访问它的替代方法。**

# jenkins - 为什么 Maven 尝试排除依赖项？

> ID：13083043
> 
> 赞同：0
> 
> 时间：2012-10-26T08:00:00.507
> 
> 标签：jenkins, maven-3

我使用 Jenkins 和 Maven(3.0.4) 进行持续集成。服务器对互联网的访问受限，我的公司使用内部 Artifactory 来管理依赖项。Maven 未能构建应用程序我收到以下问题：

`org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project XXX: Could not resolve dependencies for project com.xxx.....: Failed to collect dependencies for org.springframework:spring-context:jar:3.1.2.RELEASE (compile),......`

我检查了 Jar 是否在 Maven 存储库中。并尝试使用 -X 选项构建项目，我注意到我得到：

```
[DEBUG] Verifying availability of d:\SWF\.m2\repository\org\springframework\spring-expression\3.0.7.RELEASE\spring-expression-3.0.7.RELEASE.pom from MYCOMPAGNY_ARTIFACTORY 
```

但是我没有在我的 Pom 中提到那个 lib 的版本我不明白为什么它试图得到它？

下面是我的 POm 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.XXXXX</groupId>
    <artifactId>XYZ</artifactId>
    <name>XYZ</name>
    <packaging>war</packaging>
    <version>0.0.0</version>
    <properties>
        <java.version>1.6</java.version>
        <maven.test.failure.ignore>true</maven.test.failure.ignore>
        <org.springframework.version>3.1.2.RELEASE</org.springframework.version>
        <hibernate.framework.version>4.1.7.Final</hibernate.framework.version>
        <ch.qos.logback.version>1.0.7</ch.qos.logback.version>
        <org.aspectj.version>1.7.1</org.aspectj.version>
        <org.slf4j.version>1.7.1</org.slf4j.version>
        <org.codehaus.jackson.version>1.9.9</org.codehaus.jackson.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>axis</groupId>
            <artifactId>axis</artifactId>
            <version>1.3</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>com.novell.ldap</groupId>
            <artifactId>jldap</artifactId>
            <version>4.3</version>
        </dependency>
        <dependency>
            <groupId>org.samba.jcifs</groupId>
            <artifactId>jcifs</artifactId>
            <version>1.2.6</version>
        </dependency>
        <!-- ACEGI -->
        <dependency>
            <groupId>org.acegisecurity</groupId>
            <artifactId>acegi-security</artifactId>
            <version>1.0.7</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-dao</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-aop</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-support</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-remoting</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-jdbc</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>log4j</artifactId>
                    <groupId>log4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- Jackson JSON Mapper -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-lgpl</artifactId>
            <version>${org.codehaus.jackson.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-lgpl</artifactId>
            <version>${org.codehaus.jackson.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-xc</artifactId>
            <version>${org.codehaus.jackson.version}</version>
        </dependency>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-jdbc</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
            </dependency>
            <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework.version}</version>
            </dependency>
        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-jdbc</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-web</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-core</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-beans</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-expression</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-jdbc</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-web</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-tx</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-context</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj.version}</version>
        </dependency>
        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>1.6.6</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>${ch.qos.logback.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- DB -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernate.framework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.0.0</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>
        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>

        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>

        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.10</version>
                <configuration>
                    <scanintervalseconds>3</scanintervalseconds>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:10:16.810

它是 org.springframework:spring-context:jar:3.1.2.RELEASE 的传递依赖。

即 Spring 框架依赖于 spring-context，所以 Maven 也必须引入它。

要查看完整的依赖树运行：

```
mvn dependency:tree -Dverbose=true 
```

这将向您显示传递依赖关系的完整树，还将显示 Maven 在哪里强制执行版本号，以尝试找到一组合适的版本号冲突的库。

更多信息依赖插件在这里： [http ://maven.apache.org/plugins/maven-dependency-plugin/](http://maven.apache.org/plugins/maven-dependency-plugin/)

# c# - 如何更改 XML 文档中属性的值？

> ID：13083044
> 
> 赞同：23
> 
> 时间：2012-10-26T08:00:23.583
> 
> 标签：c#, xml

我在下面有一个 XML 文档，`<FormData>`在这个标签里面有一个标签，它是一个名为**FormId** ="d617a5e8-b49b-4640-9734-bc7a2bf05691"的属性

我想在 C# 代码中更改该值？

```
 XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.Load(MapPath(tempFolderPathAlt + "dvforms" + "\\XmlDataTemplate.xml"));
    //Change value of FormID
    xmlDoc.Save(tempFolderPath + "data.xml"); 
```

是我的 XML 文档：

```
<?xml version="1.0"?>
<FormData Platform="Android" PlatformVersion="100" Version="966" DataVersion="1" Description="Investec - Res" FormId="d617a5e8-b49b-4640-9734-bc7a2bf05691" FileId="e6202ba2-3658-4d8e-836a-2eb4902d441d" EncryptionVerification="" CreatedBy="Bob" EditedBy="Bob">
<FieldData>
<request_details_export_template Mod="20010101010101" IncludeInPDFExport="Yes"></request_details_export_template>
<request_details_reason_for_valuatio Mod="20010101010101" IncludeInPDFExport="Yes"></request_details_reason_for_valuatio>
</FieldData>
<Photos Mod="20010101010101"/>
<VoiceNotes/>
<Drawings Mod="20010101010101"/>
<FieldNotes/>
</FormData> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-26T08:06:11.180

有几种方法可以做到这一点，包括：

```
XmlAttribute formId = (XmlAttribute)xmlDoc.SelectSingleNode("//FormData/@FormId");
if (formId != null)
{
    formId.Value = "newValue"; // Set to new value.
} 
```

或这个：

```
XmlElement formData = (XmlElement)xmlDoc.SelectSingleNode("//FormData");
if (formData != null)
{
    formData.SetAttribute("FormId", "newValue"); // Set to new value.
} 
```

SelectSingleNode 方法使用 XPath 查找节点；[这里](http://www.w3schools.com/xpath/default.asp)有一个关于 XPath 的很好的教程。使用 SetAttribute 意味着如果 FormId 属性不存在则将创建它，如果它已经存在则更新它。

在这种情况下，FormData 恰好是文档的根元素，因此您也可以这样做：

```
xmlDoc.DocumentElement.SetAttribute("FormId", "newValue"); // Set to new value. 
```

最后一个示例仅适用于您要更改的节点恰好是文档中的根元素的情况。

要匹配特定的 FormId guid（不清楚这是否是您想要的）：

```
XmlElement formData = (XmlElement)xmlDoc.SelectSingleNode("//FormData[@FormId='d617a5e8-b49b-4640-9734-bc7a2bf05691']");
if (formData != null)
{
    formData.SetAttribute("FormId", "newValue"); // Set to new value.
} 
```

请注意，最后一个示例中的选择返回 FormData 元素而不是 FormId 属性；[] 括号中的表达式使我们能够搜索具有特定匹配属性的节点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T08:09:27.653

要选择正确的节点，请使用以下 XPath `//Node[@Attribute='value']`。

在您的情况下，缺少的代码可能如下所示：

```
var formId = "d617a5e8-b49b-4640-9734-bc7a2bf05691";
var newId = "[set value here]";

var xpath = String.Format("//FormData[@FormId='{0}']", formId);

XmlNode node = xmlDoc.SelectSingleNode(xpath);

if(node != null)
{
    node.Attributes["FormId"].Value = newId;
} 
```

请参阅 XPath[参考](http://www.w3.org/TR/xpath/)或查看本[教程](http://www.w3schools.com/xpath/default.asp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-25T11:14:35.787

```
XDocument doc = XDocument.Load(m_pFileName);                 
XElement xElemAgent = doc.Descendants("TRAINEE")
.Where(arg => arg.Attribute("TRAINEEID").Value == m_pTraineeID.ToString()).Single(); 
xElemAgent.SetAttributeValue("FIRSTNAME",m_pFirstName);
xElemAgent.SetAttributeValue("LASTNAME", m_pLastName);
xElemAgent.SetAttributeValue("DOB",m_pDOB);
xElemAgent.SetAttributeValue("UNIQUEID",m_pUniqueID);
doc.Save(m_pFileName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:08:43.353

或者你可以明确地走树：

```
xmlDoc.DocumentElement.GetAttribute("FormId").Value = ""; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T08:11:48.480

您可以使用 SetAttribute 方法[http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.setattribute.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.setattribute.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-25T12:51:47.267

最好的方法是创建一个可以在任何你喜欢的地方重用的函数：

```
public void ReplaceXMLAttributeValueByIndex(string fullFilePath, string nodeName, int index, string valueToAdd)
    {
        FileInfo fileInfo = new FileInfo(fullFilePath);
        fileInfo.IsReadOnly = false;
        fileInfo.Refresh();

        XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load(fullFilePath);
        try
        {
            XmlNode node = xmldoc.SelectSingleNode(nodeName);
            node.Attributes[index].Value = valueToAdd;
        }
        catch (Exception ex) 
        {
            //add code to see the error
        }
        xmldoc.Save(fullFilePath);
    } 
```

# menu - 创建组菜单项并执行。瓦拉

> ID：13083048
> 
> 赞同：0
> 
> 时间：2012-10-26T08:00:31.563
> 
> 标签：menu, vala

我从文件中读取每一行。添加到菜单。想要执行那些命令。但是当我单击时，出现空命令错误。

> GLib-CRITICAL **：g_spawn_command_line_async：断言“command_line！= NULL”失败

```
ImageMenuItem menuApp;

void create_menuSystem() {
    menuSystem = new Menu();
    var menuSep = new SeparatorMenuItem();
    //read ~/.config/traytool/app
    var file = File.new_for_path(GLib.Environment.get_variable("HOME") + "/.config/traytool/app");
    if(file.query_exists()) {
        try {
            var dis = new DataInputStream(file.read());
            string line;
            while((line = dis.read_line(null)) != null) {
                menuApp = new ImageMenuItem.with_label(line);
                menuApp.activate.connect(() => {
                    spawn_command_line_async(line); // <----- here
                    stdout.printf("..%s\n", line);
                });
                menuSystem.append(menuApp);
            }
        } catch(Error e) {
            error("%s", e.message);
        }
        menuSystem.append(menuSep);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:20:16.970

我创建了一个更简单的测试用例：

```
extern void foo(F c);
delegate void F();
void main() {
  string? line;
  while ((line = stdin.read_line())!=null) {
    foo(() => { stdout.puts(line);});
  }
} 
```

并且`line`仅通过引用解除：

```
_data1_->line = _tmp1_;
_tmp2_ = _data1_->line;
if (!(_tmp2_ != NULL)) {
  break;
}
foo (____lambda2__f, _data1_); 
```

为了解决这个问题，要么关闭需要所有权，这是您无法做到的，要么您需要保留这些值。你可以把它们放在`Gee.ArrayList`你用闭包中的索引引用的地方。或者，您可以扩展`ImageMenuItem`以获得额外的字段/属性。

# nhibernate - 如何使用 NHibernate.SqlCommand.JoinType.RightOuterJoin？

> ID：13083051
> 
> 赞同：0
> 
> 时间：2012-10-26T08:00:35.320
> 
> 标签：nhibernate, nhibernate-criteria

我有项目和客户模型。项目模型具有带有`<many-to-one>`映射的客户对象。在数据库中，这可能是客户存在但在项目表中没有条目的情况。

我正在做客户搜索功能，用户可以在其中输入项目或客户名称。如果用户只输入客户名称，那么我想要所有与客户名称匹配的记录，而不考虑客户是否有项目。

我在服务中试过这个。

```
ICriteria criteria = session.CreateCriteria(typeof(Project),"Project")
                    .CreateAlias("Project.customer","customer",NHibernate.SqlCommand.JoinType.RightOuterJoin)
                    .CreateAlias("Project.Coordinator", "Coordinator", NHibernate.SqlCommand.JoinType.InnerJoin);

                if (!string.IsNullOrEmpty(custName))
                {
                    criteria.Add(Expression.Like("customer.Name", custName, MatchMode.Start));
                }
                if (!string.IsNullOrEmpty(projectName))
                {
                    criteria.Add(Expression.Like("Project.Name", projectName, MatchMode.Start));
                }

                projectList = criteria.List<Project>().ToList(); 
```

我使用 RightOuterJoin to Customer 因为项目表可能没有客户记录，但客户表必须有这些记录。

`projectList`如果我看到它有列表但某些项目在项目表中没有记录，则此代码也没有给出任何错误为空。

我怎样才能得到这样的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:30:19.013

使用右连接项目的所有字段都为空，因此 NH 无法构建有效的项目对象（缺少 id），因此它返回空。

您必须将值投影到某个对象中，以便 NH 知道如何处理空项目或单独查询没有项目的客户（使用 Futures 不需要单独的往返）。

```
class SearchResult
{
    public int ProjectId { get; set; }
    public string ProjectName { get; set; }
    public int CustomerId { get; set; }
    public string CustomerName { get; set; }
}

ICriteria criteria = session.CreateCriteria(typeof(Project))
    .CreateAlias("Customer","customer", JoinType.RightOuterJoin)
    .CreateAlias("Coordinator", "Coordinator", NHibernate.SqlCommand.JoinType.InnerJoin);

if (!string.IsNullOrEmpty(custName))
{
    criteria.Add(Expression.Like("customer.Name", custName, MatchMode.Start));
}
if (!string.IsNullOrEmpty(projectName))
{
    criteria.Add(Expression.Like("Name", projectName, MatchMode.Start));
}

criteria.SetProjection(Projection.List()
    .Add(Projections.Property("Id"), "ProjectId")
    .Add(Projections.Property("Name"), "ProjectName")
    .Add(Projections.Property("customer.Id"), "CustomerId")
    .Add(Projections.Property("customer.Name"), "CustomerName"));

projectList = criteria
    .SetTransforer(Transformers.AliasToBean<SearchResult>())
    .List<Project>(); 
```

# php - PHP copydir函数问题

> ID：13083053
> 
> 赞同：0
> 
> 时间：2012-10-26T08:01:02.187
> 
> 标签：php

我在下面的函数中遇到了一些问题，该函数假设复制整个目录及其内容 - opendir 行每次都返回 Unable to Open 我不知道为什么。源确实存在，它有 755 权限（也尝试了 757 权限，但仍然没有运气！）。

任何人都可以提出任何建议吗？

```
function copydir($source,$destination)
{
    if(!is_dir($destination))
    {
        $oldumask = umask(0); 
        mkdir($destination, 0757); // so you get the sticky bit set 
        umask($oldumask);
    }

    $dir_handle = @opendir($source) or die("Unable to open");
    while ($file = readdir($dir_handle)) 
    {
        if($file!="." && $file!=".." && !is_dir("$source/$file")) //if it is file
        {
            copy("$source/$file","$destination/$file");
        }

        if($file!="." && $file!=".." && is_dir("$source/$file")) //if it is folder
        {
            copydir("$source/$file","$destination/$file");
        }
    }
    closedir($dir_handle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:19:05.770

你在什么平台上运行这个？我刚刚在windows上试了一下，效果很好。

# r - 模型拟合功能和环境

> ID：13083055
> 
> 赞同：1
> 
> 时间：2012-10-26T08:01:10.060
> 
> 标签：r, scoping

这是我偶然发现的问题的一种最小示例：

```
mylm <- function(formula,data,subset=NULL){
  mysubset <- subset # some other clever manipulation
  lm(formula,data,mysubset)
}
mydata <- data.frame(x=rnorm(10),y=rnorm(10))
mylm(y~x,mydata) # this fails! 
```

最后一行失败的原因是，它`lm`包含对 的调用`model.frame`，它在 中进行评估`parent.frame`，即`lm`包含代码行

```
mf <- eval(mf, parent.frame()) 
```

右侧`mf`的 是对 的巧妙构造的调用`model.frame`。我正在传递`mysubset`，但`eval`在基本环境中寻找它（我相信，但如果我错了请纠正我）并没有找到它。我知道我可能会使用`lm.fit`，但是有没有办法`mylm`在`parent.frame`for里面制作环境`lm`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:17:30.287

在这种情况下，您是对的，对`model.frame`（实际上，`model.frame.default`）的调用`mysubset`正在`.GlobalEnv`. 但是，更好的概括是说它正在尝试评估传递给它的对象中的各种对象，`data`或者如果它们不存在，则在`formula`您传递给它的环境中评估各种对象。而那个环境就是`.GlobalEnv`.

所以`model.frame.default`打电话

```
eval(substitute(subset), data, env) 
```

这转化为“评估对象`mysubset`在`data`或，如果不存在，在`env`（即`environment(formula)`）。

解决此问题的一种方法是在函数中重新创建公式，它将假定调用函数时创建的环境，其中`mysubset`存在：

```
mylm <- function(formula,data,subset=NULL){
  mysubset <- subset # some other clever manipulation
  lm(formula(deparse(formula)),data,subset=mysubset)
} 
```

这样一来，`model.frame.default`应该就能找到了`mysubset`。

# php - 如何从sql在php表中显示图片

> ID：13083065
> 
> 赞同：-4
> 
> 时间：2012-10-26T08:02:12.853
> 
> 标签：php

> **可能重复：**
> [MySql、PHP 在 HTml 上显示图片](https://stackoverflow.com/questions/10441183/mysql-php-display-picture-on-html)

如何在我的 php 表中显示图片“在我的 ocde 的屏幕截图部分”？当我在我的网站上显示表格时，我不想像我的代码现在所做的那样从图片中看到名称，但我想看到真实的图片：

此代码将从 sql 数据库中获取所有信息。

我的代码

```
echo "<table class=showtable>";
echo "<tr>
<td class=show >".$row['ID']."</td>
<td class=show2>".$row['DateTime']."</td>
<td class=show3>".$row['Stock']."</td>
<td class=show4>".$row['Type']."</td>
<td class=show5>".$row['Trade']."</td>
<td class=show5>".$row['Entry']."</td>
<td class=show5>".$row['Stoploss']."</td>
<td class=show5>".$row['Target1']."</td>
<td class=show5>".$row['Target2']."</td>
<td class=show6>".$row['Explination']."</td>
<td class=show7>".$row['Screenshot']."</td> </tr>";
 echo "</table>";
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:16:02.827

是的，上面的答案是正确的，只需在图像标记 src 属性中使用图像标记和过去的图像路径。然后图像将使用您的 php 路径显示。

[http://www.webmasterworld.com/forum88/10480.htm](http://www.webmasterworld.com/forum88/10480.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:23:09.013

您应该使用带有连接“.jpg”或“.png”的图像文件扩展名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:05:28.970

只需添加 1 个带有 src 您的 img 名称的 img 标签。

```
echo "<table class=showtable>";
echo "<tr>
<td class=show >".$row['ID']."</td>
<td class=show2>".$row['DateTime']."</td>
<td class=show3>".$row['Stock']."</td>
<td class=show4>".$row['Type']."</td>
<td class=show5>".$row['Trade']."</td>
<td class=show5>".$row['Entry']."</td>
<td class=show5>".$row['Stoploss']."</td>
<td class=show5>".$row['Target1']."</td>
<td class=show5>".$row['Target2']."</td>
<td class=show6>".$row['Explination']."</td>
<td class=show7><img src='".$row['Screenshot']."' /></td> </tr>";
 echo "</table>";
  } 
```

如果该图像在文件夹中，您必须写入文件夹
`<img src='/img/".$row['Screenshot']."' />`

# ruby-on-rails-3 - 导轨中的路由错误

> ID：13083068
> 
> 赞同：0
> 
> 时间：2012-10-26T08:02:20.697
> 
> 标签：ruby-on-rails-3

在我的控制器中，我有

```
def update_project_dates
  p "It is end date....."
  @user=User.find(params[:user])
  @projects=Project.find_all_by_user_id(@user)
end 
```

在查看页面中（只复制粘贴了部分代码）

```
eventDrop: function() 
{ 
  $.ajax({
    url:'/update_project_dates/',
    success:function(data)
    {
    alert("Hello");
    }
  })
}, 
```

在我的 routes.rb 中我提到过

```
match '/update_project_dates' => 'users#update_project_dates', :method=> :get
get 'update_project_dates' 
```

但是当 ajax 请求发出时，我得到路由错误

> # 路由错误
> 
> ```
> 未初始化的常量 UsersController
> ```

我在哪里做错了......请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:59:20.093

您的匹配路线

```
match '/update_project_dates' => 'users#update_project_dates' 
```

将请求分派给`users`控制器的`update_project_dates`操作。

但是，错误消息说没有`UsersController`. 确保您指的是正确的控制器并且您没有拼错它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:00:09.997

我想，你应该在你的路线上有这个......

```
map.resources :users 
```

这使得 rails 假设控制器被命名为 UsersController（这是默认约定）

如果你只是想让它变得单一。

```
map.resources :users, :controller => 'user' 
```

或者您只是考虑遵循 Rails 约定并将您的控制器重命名为 UsersController。

[动态形式的多个子模型](http://railsforum.com/viewtopic.php?id=28447)

# android - LayoutTransition：在扩展视图旁边设置动画视图

> ID：13083070
> 
> 赞同：14
> 
> 时间：2012-10-26T08:02:30.470
> 
> 标签：android, android-animation

我已经将我的问题重新创建为一个非常简单的表示。我有 3 个文本视图。其中2个是分开`LinearLayout`的，第三个是在同一层级的`LinearLayout`。我正在切换 and 的可见性`test1`，`test2`我希望看到它们消失（这有效）。此外，我想`test3`滑入他的新位置（代替`test1`and `test2`）。我不能让这发生。`test3`只是捕捉到它的新点。

我怎样才能做到这一点？

我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parent"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:animateLayoutChanges="true"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click" />

    <LinearLayout android:animateLayoutChanges="true"
        android:id="@+id/child1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/test1"
            android:layout_width="match_parent" android:visibility="gone"
            android:layout_height="wrap_content"
            android:text="TEST1" />

        <TextView
            android:id="@+id/test2"
            android:layout_width="match_parent" android:visibility="gone"
            android:layout_height="wrap_content"
            android:text="TEST2" />
    </LinearLayout>

    <TextView
        android:id="@+id/test3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="TEST3" />

</LinearLayout> 
```

在我的活动中：

```
public class LayoutAnimations extends Activity {
    private boolean toggle = true;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_animations);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (toggle) {
                    findViewById(R.id.test1).setVisibility(View.VISIBLE);
                    findViewById(R.id.test2).setVisibility(View.VISIBLE);
                } else {
                    findViewById(R.id.test1).setVisibility(View.GONE);
                    findViewById(R.id.test2).setVisibility(View.GONE);
                }
                toggle = !toggle;
            }
        });

    }

} 
```

***编辑：我实际上有另一个`TextView`旁边`test1`并且`test2`应该始终可见，所以我不能只是隐藏它`LinearLayout`本身。***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T21:03:15.093

我已经用另一个问题解决了它。[看到这个答案](https://stackoverflow.com/a/13984525/675383)

报价：

我相信最简单的方法是扩展`Animation`类并覆盖`applyTransformation()`以更改视图的高度，如下所示：

```
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.Animation;
import android.view.animation.Transformation;
import android.widget.LinearLayout;

public class MyCustomAnimation extends Animation {

    public final static int COLLAPSE = 1;
    public final static int EXPAND = 0;

    private View mView;
    private int mEndHeight;
    private int mType;
    private LinearLayout.LayoutParams mLayoutParams;

    public MyCustomAnimation(View view, int duration, int type) {

        setDuration(duration);
        mView = view;
        mEndHeight = mView.getHeight();
        mLayoutParams = ((LinearLayout.LayoutParams) view.getLayoutParams());
        mType = type;
        if(mType == EXPAND) {
            mLayoutParams.height = 0;
        } else {
            mLayoutParams.height = LayoutParams.WRAP_CONTENT;
        }
        view.setVisibility(View.VISIBLE);
    }

    public int getHeight(){
        return mView.getHeight();
    }

    public void setHeight(int height){
        mEndHeight = height;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {

        super.applyTransformation(interpolatedTime, t);
        if (interpolatedTime < 1.0f) {
            if(mType == EXPAND) {
                mLayoutParams.height =  (int)(mEndHeight * interpolatedTime);
            } else {
                mLayoutParams.height = (int) (mEndHeight * (1 - interpolatedTime));
            }
            mView.requestLayout();
        } else {
            if(mType == EXPAND) {
                mLayoutParams.height = LayoutParams.WRAP_CONTENT;
                mView.requestLayout();
            }else{
                mView.setVisibility(View.GONE);
            }
        }
    }
} 
```

要使用它，请将您的设置`onclick()`如下：

```
int height;

@Override
public void onClick(View v) {
    if(view2.getVisibility() == View.VISIBLE){
        MyCustomAnimation a = new MyCustomAnimation(view2, 1000, MyAnimation.COLLAPSE);
        height = a.getHeight();
        view2.startAnimation(a);
    }else{
        MyCustomAnimation a = new MyCustomAnimation(view2, 1000, MyAnimation.EXPAND);
        a.setHeight(height);
        view2.startAnimation(a);
    }
} 
```

问候。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T06:12:19.313

我希望在我的应用程序中发生同样的事情。为达到这个：

1.  在 Res/anim 中创建合适的动画。我使用了从左侧滑出的动画。如果您对此不满意，您可以谷歌其他。

    **slide_out_left.xml**

    ```
    <translate
        android:duration="@android:integer/config_mediumAnimTime"
        android:fromXDelta="0"
        android:toXDelta="-50%p" />

    <alpha
        android:duration="@android:integer/config_mediumAnimTime"
        android:fromAlpha="1.0"
        android:toAlpha="0.0" /> 
    ```

2.  将上面定义的动画附加到您想要动画的视图中，（在您的情况下，child1 包含 text1 和 text2）

    ```
    Animation outAnimation;
    LinearLayout a1 = (LinearLayout)findViewById(R.id.child1); 

    outAnimation = (Animation) AnimationUtils.loadAnimation (getApplicationContext(), R.anim.slide_out_left);

    a1.setAnimation(outAnimation);
    outAnimation.setAnimationListener(new  AnimationListener() {

        @Override
        public void onAnimationEnd(Animation arg0) {
        a1.setVisibility(View.GONE);                            
        }
        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub                          
        }

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub
        }                 
    });
    a1.startAnimation(outAnimation); 
    ```

**注意**：*我使用 child1 而不是 text3 附加了动画，因为当 child1 缓慢滑出时，它会自动产生 text3 滑入的错觉。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T13:08:48.590

使用这个动画 XML slide_in_left.XML

```
<translate
    android:duration="500"
    android:fromXDelta="-100%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="0%" />
</set> 
```

和 slid_in_right.XML

```
<translate
    android:duration="500"
    android:fromXDelta="100%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="0%" />
</set> 
```

使用这个动画动画 slideinleft,slideinright;

并初始化这个动画

```
public void AnimationInitialization() {

    slideinleft= AnimationUtils
            .loadAnimation(this, R.anim.slide_in_left);

    slideinright= AnimationUtils.loadAnimation(this,
            R.anim.slide_in_right);

} 
```

并调用这 2 个函数来改变可见性

```
public void showMenu() {

    linearlayout_first.clearAnimation();

    linearlayout_first.startAnimation(slideinleft);

    linearlayout_first.setVisibility(View.VISIBLE);

}

public void hideMenu() {

    linearlayout_second.clearAnimation();
    linearlayout_second.startAnimation(slideinright);

    linearlayout_second.setVisibility(View.GONE);
} 
```

您可以根据需要更改布局。动画 XML 的 Xdelta 和 Ydelta 也发生了变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:01:12.630

文档有点混乱。对于`android:animateLayoutChanges`，它说

> ...当此标志设置为 true 时，将在 ViewGroup 容器上设置默认 LayoutTransition 对象，并且在发生这些布局更改时将运行默认动画。

而ViewGroup 类的[setLayoutTransition](http://developer.android.com/reference/android/view/ViewGroup.html#setLayoutTransition%28android.animation.LayoutTransition%29)方法的文档说：

> 默认情况下，过渡对象为空（因此布局更改没有动画）。

您应该尝试`LayoutTransition`在布局上设置 a 。

这是一个这样做的例子.. [http://www.java2s.com/Code/Android/UI/UseLayoutTransitiontoautomatetransitionanimationsasitemsarehiddenorshowninacontainer.htm](http://www.java2s.com/Code/Android/UI/UseLayoutTransitiontoautomatetransitionanimationsasitemsarehiddenorshowninacontainer.htm)

# c++ - C++ Time 类在 checkDay 函数中没有编译错误，执行停止和应用程序崩溃错误

> ID：13083072
> 
> 赞同：0
> 
> 时间：2012-10-26T08:02:49.920
> 
> 标签：c++

下面是 date.h ，日期。cpp 和 main.cpp 我没有收到任何编译错误。但是exe的运行停止，当删除日期类的checkday功能时不会发生这种情况。功能有什么问题？我正在使用开发 C++

```
#ifndef DATE_H
#define DATE_H

class Date{
  private: 
           int day, month, year;
  public:
           Date(int = 1, int = 1, int = 1990);
           ~Date();
           void setDay(int);
           int checkDay(int); //return int i.e. default day 1 or correct date inputted :)
           void setMonth(int);
           void setYear(int);
           int getDay() const;
           int getMonth() const;
           int getYear() const;
           void printDate() const;
};

#endif

#include <iostream>
#include <cmath>
using namespace std;
#include "date.h"

Date::Date(int d, int m, int y){

           //setDay(d); calling setDay() here caused crash
           setMonth(m);
           setYear(y);
           setDay(d);
}
 Date::~Date(){

          cout<<"Date destructor called...\n";
}
void Date::setDay(int d){

          day = checkDay ( d ) ;
}
int Date::checkDay(int dd){ /*COMMENTING THIS FUNCTION REMOVES RUN TIME   ERROR */

          static int daysInmonth[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};
          if ( dd > 0 && dd <= daysInmonth[month] )
             return dd;
          if( ( year%400==0||( year%100!=0 && year%4==0))&& month==2 && dd==29) 
             return dd;               
          return 1;        
}

void Date::setMonth(int m){

          month = ((m > 0 && m <=12) ? m : 1 );
}
void Date::setYear(int y){

          if (((int)log10((double)y) + 1)!=4) //ild1 != 4
             year = 1990;
          else year = y;
}
int Date::getDay() const{

          return day;
}
int Date::getMonth() const{

          return month;
}
int Date::getYear() const{

          return year;
} 

void Date::printDate() const{

          cout<<"Date: "<<getDay()<<"/"<<getMonth()<<"/"<<getYear()<<endl;
}

#include <cstdlib>    
#include <iostream>
#include "date.h"
using namespace std;

int main()
{

    Date date1( 2, 3, 2004),date2,date3( 2, 1, -1980), 
      date4(0, 12, 2990),date5(29, 2, 2001), date6(12,12, 98686);

cout<<"User inputted valid date: "; date1.printDate();
cout<<"\nDefault valid date: "; date2.printDate();
cout<<"\nAttempt to input invalid date: 2/1/-1980 "; date3.printDate();
cout<<"\nAttempt to input invalid date: 0/12/2990 "; date4.printDate();
cout<<"\nAttempt to input invalid date: 29/2/2001 ( non leap year) "; date5.printDate();   
cout<<"\nAttempt to input invalid date: 12/12/98686 "; date6.printDate();  

cout<<endl;
system("PAUSE");
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:18:59.577

在 checkDay() 中，您考虑月份和年份来检查日期，但在 Date 构造函数中，您首先从尚未分配月份和年份的日期开始。

改变这个：

```
Date::Date(int d, int m, int y){

       setDay(d);
       setMonth(m);
       setYear(y);
} 
```

对此：

```
Date::Date(int d, int m, int y){       
       setMonth(m);
       setYear(y);
       setDay(d);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:10:44.693

我看到该`checkDay()`方法可能崩溃的唯一一点是访问`daysInmonth[month]`是否越界。

您是否检查了执行`month`第一条`if`语句时的值是多少？

# unit-testing - Spring AbstractTransactionalDataSourceSpringContextTests - 测试方法后不回滚数据

> ID：13083074
> 
> 赞同：3
> 
> 时间：2012-10-26T08:02:55.173
> 
> 标签：unit-testing, jakarta-ee, aop, spring-aop

> 运行单元测试后，数据不会从数据库中删除。

我对 AOP 配置或 spring 有问题。我编写了一个扩展类 AbstractTransactionalDataSourceSpringContextTests 的单元测试。对于 AOP 配置，我对要测试的方法做了一个切入点，我对切入点给出了以下建议：

```
<tx:advice id="newTxAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="*" propagation="REQUIRES_NEW" />
    </tx:attributes>
</tx:advice> 
```

请告诉我为什么数据没有被删除，任何帮助都将是可观的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:17:56.857

*   [正如这里](https://stackoverflow.com/questions/5789788/what-exactly-propagation-requires-new-means-using-spring-transaction-managemen)所讨论的，具有传播属性的事务与`REQUIRES_NEW`任何其他范围更广的事务无关。
*   `AbstractTransactionalDataSourceSpringContextTests`, 作为`AbstractTransactionalSpringContextTests`, 不会*删除*东西，但实际上会回滚测试范围的事务。

因此，在您的情况下，您的 transactionManager 很可能会在您测试内容时提交新事务，因此当您的外部 tx 回滚（通过 `AbstractTransactionalDataSourceSpringContextTests`）时，为时已晚：数据已经提交。

要做你想做的事，只需使用默认`REQUIRED`传播。我什至建议不要`REQUIRES_NEW`一般使用，除非您有一个具有异常处理问题的特定用例。

# c# - 如何处理在 BackgroundWorker 中运行的方法的状态

> ID：13083077
> 
> 赞同：1
> 
> 时间：2012-10-26T08:03:15.003
> 
> 标签：c#, multithreading, refactoring, backgroundworker

我目前正在处理的代码有一个在 UI 线程中运行的方法。但这需要很长时间，所以我决定将它放在 BackgroundWorker 中。代码通常在编辑 UI，当我更改线程时，出现了在 UI 线程中编辑控件的问题。所以我所做的是让方法报告它的状态，并在 ProgressChanged 事件中更改 UI。为了报告进度，此方法采用一个名为“userState”的对象，但出于我的目的，我必须报告多个对象。所以我选择执行以下操作：

```
 // Create a dictionary to keep method state for reporting.
        // "state" item represents a state type; "error", "update", "success".
        // "message"d item represents the message associated with the state.
        // "result" item represents the function result.
        // "invisiblecolumns" item represents the invisible columns this method finds.
        var methodState = new Dictionary<string, object> { { "state", "update" }, { "message", string.Empty }, 
                                                           { "result", null }, { "invisiblecolumns", null } }; 
```

但我不确定这是否是一个好方法。关于如何在后台工作人员中处理报告过程，您有什么建议？什么是好的做法？我做了一个好的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:15:43.040

我认为最好为您的操作结果创建一个类（我也会给这个类起更具描述性的名称，因此您正在执行一些特定的操作）：

```
public class OperationResult
{
    public OperationResult(OperationState state, string message = "")
    {
        State = state;
        Message = message;
    }

    public OperationState State { get; private set; }
    public string Message { get; private set; }
    // property for "result"
    // property for "invisiblecolumns
}

public enum OperationState
{
    Update,
    Success,
    Error
} 
```

您的代码将更具可读性、可维护性，并且您将获得 IntellySense 支持。比较：

```
 var result = (Dictionary<string, object>)e.UserState;
 if (result["slate"] == "update") // yep, misprint
    // do something
 labelMsg.Text = result["message"];
 // do you remember names of other entries? 
```

和

```
 var result = (OperationResult)e.UserState;
 if (result.State == OperationState.Update)
    // do something
 labelMsg.Text = result.Message; 
```

# iphone - Xcode 标记框架，例如 Stack Overflow /FB。

> ID：13083078
> 
> 赞同：0
> 
> 时间：2012-10-26T08:03:27.123
> 
> 标签：iphone, tags, uitextfield

我有一个应用程序，用户必须在其中输入标签才能搜索栏/事件。他们可以通过键入或从表格中选择“类别 - 子类别 - 标记”来执行此操作。

假设第二个选项。
我想要做的是在我的应用程序中获得与 Stack Overflow 相同的效果，当标签被识别时（Facebook 也是顺便说一句）并在标签周围绘制一个矩形（带边框的标签/按钮？），在 UITextField（或 UITextView）中正确排序在 UITableView 中进行选择时。用户可以通过点击十字删除这些框。

我找不到有关如何在 iPhone 上完成此操作的信息。
有没有人可以给我正确方向的指导？

另一种方法是将所选项目添加到表格视图中。但是，我没有发现这个解决方案很干净：添加许多标签时，表格可能会变得太大，并且视图仍然应该显示其他内容。

感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:23:24.117

并非所有看起来像文本字段的东西都是文本字段。发挥想象力的力量。

快速草图可能如下所示：

![在此处输入图像描述](../Images/edfff7b8805241e6251e6a2960e12d66.png)

此示例中实际上有 4 个视图。

伪装成文本字段的淡黄色视图。两个带有紫色背景颜色的 UILabel 和一个带有清晰背景颜色的文本字段。

![在此处输入图像描述](../Images/752e00dc5ba2a0ceddea2c4ba70b7790.png)

我就是这样处理的。要动态地执行此操作，您需要一些代码，但我不会为您编写。这很简单。

1.  在开始时 textField 占据整个宽度
2.  当用户输入分隔符（例如逗号）时，获取文本字段的文本
3.  找出标签的大小
4.  添加标签
5.  清除文本字段并调整其大小。
6.  转到 2。

为风格添加圆角和黑色边框。

# eclipse - 收听预定的作业

> ID：13083081
> 
> 赞同：1
> 
> 时间：2012-10-26T08:03:34.103
> 
> 标签：eclipse, eclipse-rcp

我想为在 Eclipse 中运行的特定作业（我没有设计或编写）添加一个侦听器。我知道我可以使用[Job.getJobManager](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/jobs/Job.html#getJobManager)访问[Job Manager](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/jobs/IJobManager.html)。在 IJobManager 中有[find](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/jobs/IJobManager.html#find)方法，但它需要一个家庭对象。

[Eclipse FAQ](http://wiki.eclipse.org/FAQ_How_do_I_find_out_whether_a_particular_job_is_running%3F)还假定您知道家庭对象。如何找到给定作业管理器中使用的当前家庭对象列表？

还是我唯一的选择是注册[JobChangeListener](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/jobs/IJobChangeListener.html)并过滤掉我感兴趣的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:25:53.787

如果您可以为您的作业添加微小的更改，请使用 OSGI 事件在它们之间进行通信。假设你有这样的工作：

```
public class SomeJob extends Job {
    public static final JOB_EVENT_NAME = "some distinct name";
    private IEventBroker eventBroker;
    public SomeJob(IEventBroker eventBroker) {
        super("SomeJob");
        this.eventBroker = eventBroker;
    }
    protected IStatus run(IProgressMonitor monitor) {
        ...
        eventBroker.post(JOB_EVENT_NAME, some data);
        ...
    }
} 
```

从附加了事件侦听器的 RCP 应用程序启动它（eventBroker 是 IEventBroker 并且可以是@Inject'ed）：

```
new CheckAccessLevelJob(eventBroker).schedule();
eventBroker.subscribe(SomeJob.JOB_EVENT_NAME, new EventHandler() {
    public void handleEvent(Event event) {
        event.getProperty(IEventBroker.DATA);
    }
}); 
```

# jquery - Firefox 中 slimScroll.js + iframe 的问题

> ID：13083087
> 
> 赞同：1
> 
> 时间：2012-10-26T08:04:00.403
> 
> 标签：jquery, jquery-ui, firefox, iframe, slimscroll

仅在使用 iframe 加载内容时，我才在 FireFox 中遇到 slimScroll / jQuery UI 问题。该代码在所有其他浏览器中都可以正常工作。

如果您正常加载 iframe，它可以正常工作。如果您将其加载为隐藏以 (.hide() 或 display:none;) 开头，它仍会加载，但将不会显示 slimScroll 可拖动栏（仅存在轨道）。

我认为这是一个 FireFox 滚动问题，或者可能是一个 jQuery UI 可拖动问题。无论哪种方式，我都无法弄清楚。

放入父页面的脚本（parent.html）：

```
 $(document).ready(function () {
        var tip = $('<div id="tip" style="position:absolute;top:90px;left:190px;height:120px;' + 'width:275px;border:1px solid grey;z-index:2147483647;overflow:hidden;">' + "<iframe frameborder='0' scrolling='no' src='content.html' width='275px' height='120px' id='myiframe' type='content' style='display:block;visibility:visible'></iframe>" + '</div>');
        $('body').prepend(tip);
        $('#showtip').click(function (event) {
            $('#tip').show();   
        });
        $('#tip').hide();  //comment this line out and it works correctly...
        }); 
```

父页面还有一个显示 iframe 的链接：

```
<a href="#" id="showtip">Click to Show Iframe</a> 
```

内容页面脚本（content.html）：

```
 $(document).ready(function () {
    $('#scroll').slimScroll({
        height: 95,
        railVisible: true,
        alwaysVisible: true,
        allowPageScroll: false
    });     
}); 
```

content.html 的虚拟内容：

```
<div id="scroll">This is the iframe content area <p>This is the iframe content area</p> p>This is the iframe content area</p> <p>This is the iframe content area</p> </div> 
```

需要的 JS 参考资料：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js"></script>
<script type="text/javascript" src="https://raw.github.com/rochal/jQuery-slimScroll/master/slimScroll.min.js"></script> 
```

就是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T06:40:09.077

通常，所有 jQuery 滚动条都会计算应用它的容器的高度/宽度，以便在它们上面放置滚动条。

当您在 jQuery 中执行 hide() 时，它会执行 a `display:none`，该元素根本不会呈现，因此没有它自己的高度/宽度。因此，您看不到 slimscroll。（您会发现与其他 jQuery 滚动类似的问题）。

为了克服这种情况，您可以`$('#scroll').slimScroll()`在取消隐藏后调用。在这种情况下，仅当 iframe 位于同一域中时才有可能。

或者更好的方法，不要使用`hide()`，而是使用

`$('#tip').css('visibility','hidden');`和`$('#tip').css('visibility','visible');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T03:14:24.443

我认为框架附加到正文但不能与 DOM 绑定，你应该绑定`iframe`并`document`尝试

```
 $("#showtip").live('click',function(){

    //use .live instead of `click`
 }); 
```

希望你能理解。

# r - 如何随机替换对称矩阵的元素？

> ID：13083089
> 
> 赞同：2
> 
> 时间：2012-10-26T03:45:19.013
> 
> 标签：r, sampling, simulation, matrix

假设我有一个这样的矩阵：

```
data=matrix(c(1,0,0,0,0,0,1,0,0.6583,0,0,0,1,0,0,0,0.6583,0,1,0,0,0,0,0,1),nrow=5,ncol=5)

     [,1]   [,2] [,3]   [,4] [,5]
[1,]    1 0.0000    0 0.0000    0
[2,]    0 1.0000    0 0.6583    0
[3,]    0 0.0000    1 0.0000    0
[4,]    0 0.6583    0 1.0000    0
[5,]    0 0.0000    0 0.0000    1 
```

如何创建另一个矩阵，比如“data2”，使其具有与“数据”相同数量的非对角线非零元素，但位于数据中的位置以外的另一个位置？随机模拟的数据将是统一的（所以 runif）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:12:35.583

这是一个有点笨拙的方法来做到这一点。它适用于小矩阵，但如果你打算将它用于一些非常高维的问题，它会太慢。

```
# Current matrix:
data=matrix(c(1,0,0,0,0,0,1,0,0.6583,0,0,0,1,0,0,0,0.6583,0,1,0,0,0,0,0,1),nrow=5,ncol=5)

# Number of nonzero elements in upper triangle:
no.nonzero<-sum(upper.tri(data)*data>0)

# Generate same number of new nonzero correlations:
new.cor<-runif(no.nonzero,-1,1)

# Create new diagonal matrix:
p<-dim(data)[1]
data2<-diag(1,p,p)

### Insert nonzero correlations: ###

# Step 1\. Identify the places where the nonzero elements can be placed:

pairs<-(p^2-p)/2 # Number of element in upper triangle
combinations<-matrix(NA,pairs,2) # Matrix containing indices for those elements (i.e. (1,2), (1,3), ... (2,3), ... and so on)

k<-0
for(i in 1:(p-1))
{
    for(j in {i+1}:p)
    {
        k<-k+1
        combinations[k,]<-c(i,j)
    }
}

# Step 2\. Randomly pick indices:

places<-sample(1:k,no.nonzero)

# Step 3\. Insert nonzero correlations:

for(i in 1:no.nonzero)
{
    data2[combinations[places[i],1],combinations[places[i],2]]<-data2[combinations[places[i],2],combinations[places[i],1]]<-new.cor[i]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T05:02:24.777

不是很明白这个问题。示例中有两个非对角线和非零元素 (0.6583)，对吗？在这种情况下，您想要的结果是包含两个元素的矩阵吗？

```
data=matrix(c(1,0,0,0,0,0,1,0,0.6583,0,0,0,1,0,0,0,0.6583,0,1,0,0,0,0,0,1),nrow=5,ncol=5)

# Convert to vector
data2 <- as.numeric(data)

# Remove diagonal
data2 <- data2[as.logical(upper.tri(data) | lower.tri(data))]

# Remove 0 elements
data2 <- data2[data2 != 0]

data2 
```

# testing - 在套件中和单独运行测试

> ID：13083092
> 
> 赞同：0
> 
> 时间：2012-10-26T08:04:13.953
> 
> 标签：testing

我找到了创建在测试套件之前调用的方法的方法。这就是我需要的。但是我还需要单独运行我的每一个测试，至少为了开发它们。这意味着，当一个测试单独运行时，before suite 方法应该在单个测试之前运行。我的测试位于不同的班级。我无法找到在运行整个套件时在套件之前运行 before 方法以及在运行一个测试时在测试（类）之前运行的逻辑。我在这里做白日梦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:07:47.860

对于[nUnit](http://www.nunit.org/index.php?p=home)听起来你想要[FixtureSetup](http://www.nunit.org/index.php?p=fixtureSetup&r=2.2.10)和[SetUp](http://www.nunit.org/index.php?p=setup&r=2.2.10)

对于 ms-test 我认为是[TestInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx)和[ClassInitialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute%28v=vs.80%29.aspx)

# arrays - Hibernate映射xml多对多数组

> ID：13083094
> 
> 赞同：2
> 
> 时间：2012-10-26T08:04:32.470
> 
> 标签：arrays, many-to-many, hibernate-mapping

我目前正在处理一些遗留代码，因此我无法更改[数据库架构](http://i.tinyuploads.com/GW8Plt.png)或域模型。

Java 对象如下所示：

```
class Person {
  private int prsnId; //get, set
  private int custId; //get, set
  private String name; //get, set
  private String mail; //get, set
  private String status; //get, set
  private String logon; //get, set
  private Contact[] contact; //get, set, add
}

class Contact {
  private int cntcId; //get, set
  private int prorId; //get, set
  private String contactType; //get, set
  private String contactLanguage; //get, set
  private String contactUser; //get, set
} 
```

我正在尝试创建一个映射，该映射将允许我执行以下查询，因此它返回一个人员列表，其中包含联系人数组中的联系人：

```
List<Person> personList = new ArrayList<Person>();
int customerId = /*something*/;
DetachedCriteria subQuery = DetachedCriteria.forClass(PersonOrg.class, "persorg")
.setProjection(Projections.projectionList().add(Projections.property("persorg.prsnId")))
.add(Restrictions.eq("custId", customerId));
Criteria criteria = session.createCriteria(Person.class);
criteria.setFetchMode("Person", FetchMode.JOIN)
    .setFirstResult(0)
    .setMaxResults(20)
    .add(Property.forName("prsnId").in(subQuery));          
personList = criteria.list(); 
```

通过我现在拥有的映射，我得到了一个人员列表，但他们的联系人数组填充了空值。我不清楚为什么。到目前为止，我的映射是：

```
<hibernate-mapping>
    <class name="be.bene.cris2.protocol.Person" table="BENE_CUST_PERSON" dynamic-update="true" dynamic-insert="true">
        <id name="prsnId" type="int">
            <column name="PRSN_ID" precision="10" scale="0" />
             <generator class="sequence">
                   <param name="sequence">CUST_PROR_SEQ</param>
            </generator>
        </id>

        <property name="name" type="string">
            <column name="NAME" length="20" />
        </property> 

        ...

        <array name="contact" table="BENE_CUST_PERSORG" inverse="true" fetch="join">
            <key column="PRSN_ID" not-null="false"/>
            <index column="CUST_ID"/>
            <many-to-many entity-name="be.bene.cris2.protocol.Contact" column="PROR_ID" not-found="ignore"/>
        </array>

        <join table="BENE_CUST_PERSORG">
            <key column="PRSN_ID"/>
            <property name="custId" column="CUST_ID"/>
            <property name="prorId" column="PROR_ID"/>
            <property name="persorgType" type="be.bene.cris2.usertypes.CustomMasterSecundaryTertiaryIndicatorType" column="PERSORG_TYPE"/>
        </join>

    </class>
</hibernate-mapping> 
```

如果缺少信息，请询问。

*   我们使用休眠 3.6.1

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:24:42.073

```
<join table="BENE_CUST_PERSORG">
  <key column="PRSN_ID"/>
  <property name="custId" column="CUST_ID"/>
  <property name="prorId" column="PROR_ID"/>
  <property name="persorgType" type="be.bene.cris2.usertypes.CustomMasterSecundaryTertiaryIndicatorType" column="PERSORG_TYPE"/>
  <array name="contact" inverse="true">
    <key column="PROR_ID" not-null="false"/>
    <index column="<columninContactTablecontainingArrayIndex>"/> or <index formula="(SELECT ROW_NUMBER() FROM Contacts c WHERE <FK matches> )"/>
    <one-to-many entity-name="be.bene.cris2.protocol.Contact" not-found="ignore"/>
  </array>
</join> 
```

# c# - 使用 Telerik openacces ORM 创建成员资格和

> ID：13083095
> 
> 赞同：2
> 
> 时间：2012-10-26T08:04:34.543
> 
> 标签：c#, telerik, telerik-open-access

我想使用 altairiswebsecurity.codeplex.com 为我的应用程序制作一个简单的会员系统

我使用 Telerikopenaccess，但我不确定这对我有什么帮助。

有人请从这个[http://www.telerik.com/help/openaccess-orm/getting-started-with-openaccess-overview.html帮助我](http://www.telerik.com/help/openaccess-orm/getting-started-with-openaccess-overview.html)

EntityDiagrams.rlinq 但现在我不确定为我自己的项目实施它的下一步是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:50:25.433

但是，您可以在[此处](http://www.telerik.com/community/code-library/orm/classic/complete-implement-telerik-orm-membership-provider.aspx)找到具有旧 OpenAccess API 的完全实现的提供程序。一般方法是相同的，上下文只是示例中使用的 IObjectScope 的包装器，因此您可以从那里获取想法并在您身边实施它们。至于会员提供者应该住的地方，由你决定你觉得更方便的地方，你的应用程序中另一个地方的App_Code。从 OpenAccess 的角度来看，这没有任何影响。

# javascript - 在多个按钮中调用相同的 jQuery 函数

> ID：13083106
> 
> 赞同：20
> 
> 时间：2012-10-26T08:05:43.383
> 
> 标签：javascript, jquery, html

我对 jQuery 不是很熟悉。我下载了这段代码来创建淡入/淡出弹出表单。这是代码：

```
<script type='text/javascript'>
    $(document).ready(function() {
        $('#button').click(function(e) { 
            $('#modal').reveal({ 
                animation: 'fade',
                animationspeed: 150,
                closeonbackgroundclick: true, 
                dismissmodalclass: 'close'
            });
            return false;
        });
    });
</script> 
```

上面的代码在单击带有 an 的按钮时执行`id='button'`。现在我有多个按钮，如何在所有按钮中调用此功能？我尝试将`id`所有按钮设置为`button`但只有第一个按钮有效。任何帮助将不胜感激。顺便说一句，在我的 .php 文件中，我有以下代码：

```
for ($c=1;$c<=5;$c++){
echo "<input type='button' id='button'">
}; 
```

此 php 代码将显示 5 个具有相同 id 的按钮，即“按钮”。我想要发生的是，当我单击 5 个按钮中的任何一个时，jQuery 函数将执行弹出一个淡入/淡出表单。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-26T08:07:15.077

**第一个解决方案：**

```
function doClick(e) { 
   $('#modal').reveal({ 
     animation: 'fade',
     animationspeed: 150,
     closeonbackgroundclick: true, 
     dismissmodalclass: 'close'
   });
   return false;
}
$('#button1').click(doClick);
$('#button2').click(doClick); 
```

**第二种解决方案：**

给所有涉及的按钮一个类“someClass”

```
<input type=button class=someClass ... 
```

做

```
$('.someClass').click(function(e) { 
...
}); 
```

**第三个解决方案：**

使用逗号分隔 ids ：

```
$('#button1, #button2').click(function(e) { 
...
}); 
```

* * *

通常，最好的解决方案是第二种：它允许您在代码中添加按钮，而无需修改 javascript 部分。如果您动态添加其中一些按钮，您甚至可以这样做

```
$(document).on('click', '.someClass', function(e) { 
...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:18:33.617

为按钮使用不同的 id 并更改您的功能，如下所示。

> $('#button1, #button2, #button3').click(function(e) {
> .....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:08:54.007

ID 应该是唯一的。尝试使用类似的东西

```
$('input[type="button"]') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:09:08.137

你的班级可以使用`,`单独的 id按班级呼叫他们

```
$(document).ready(function() {
$('#button, #button1, #button2').click(function(e) { 
$('#modal').reveal({ 
animation: 'fade',
animationspeed: 150,
closeonbackgroundclick: true, 
dismissmodalclass: 'close'
});
return false;
});
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T08:09:28.007

```
<script type='text/javascript'>
$(document).ready(function() {
$('#button1,#button2,#button3').click(function(e) { 
$('#modal').reveal({ 
animation: 'fade',
animationspeed: 150,
closeonbackgroundclick: true, 
dismissmodalclass: 'close'
});
return false;
});
});
</script> 
```

或者使用提到的 bt dystroy 类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T08:16:35.710

您可以使用**css 类名**而不是`id`像下面这样实现它

```
<script type='text/javascript'>
$(document).ready(function() {
    $('.fade').click(function(e) { 
        $('#modal').reveal({ 
            animation: 'fade',
            animationspeed: 150,
            closeonbackgroundclick: true, 
            dismissmodalclass: 'close'
        });
        return false;
    });
});
</script> 
```

和你的按钮 html

```
<button class="fade">Button1</button>
<button class="fade">Button2</button>
<button class="fade">Button3</button> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-28T01:10:50.857

如果您对所有按钮使用相同的 buttonid，则无需调用所有按钮..只需使用此代码..您似乎在此代码中使用动画....使用**togglefade**而不是显示

> `<script type=text/javascript> $(document).ready(function(){ $("button").click(function(){ $("#buttonid").fadein(); $("#buttonid").fadeout(); }); }); </script>`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-01T09:07:34.817

在循环中动态地为唯一的 buttonid 创建一个数组，例如

```
$button[] = '#'.$buttonid; 
```

在循环外用于`implode`将此数组转换为逗号分隔的字符串

```
$jsstring = implode(",",$button); 
```

现在使用 php 在您的 js 代码中将上述字符串作为选择器传递，例如：

```
$(document).ready(function() {
    $('< php echo $jsstring ; ?>').click(function(){ });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-28T09:00:01.210

要使用更简单的方法，如下代码：

方法一：

> ```
> <script>
>     $(document).ready(function () {
>         $('input:button[name="button1"],[name="button2"]').click(
>             function () {
>                 alert('test')
>             });
>     });
> </script>
> <input type="button" id="button1" name="button1" value="Filter" />
> <input type="button" id="button2" name="button2" value="Filter" /> 
> ```

方法二：

> ```
> <script>
>     $(document).ready(function () {
>         $('button[id="button1"],[id="button2"]').click(
>             function () {
>                 alert('te2222st')
>             });
>     });
> </script>
> <button id="button1" >bbbbb</button>
> <button id="button2" >bbbbb</button> 
> ```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-29T08:11:17.607

我有这个问题的解决方案

```
 $(document).ready(function () {
                    $("#btnSubmit,#btnSubmitbuttom").click(function () {
                        var rfp = true;
                        var count = 0;
                        var lbxBD_Role = $("#lbxBD_Role option:selected").val();
                        if (lbxBD_Role == "" || lbxBD_Role == undefined) {
                            $("#lblBD_Role").attr("style", "visibility: visible");
                            $("#lblBD_Role").attr("style", "color: red");
                            $("#lblBD_Role").html('* Required');
                            count++;
                        }
                      });
                   });
            </script> 
```

# ios - 通过 JSON Web Service 上传 PDF 文件

> ID：13083111
> 
> 赞同：0
> 
> 时间：2012-10-26T08:06:17.847
> 
> 标签：ios

```
 I am sending a dict with objects
//Check n/w status
if ([Helper checkNetworkStatus]) {
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
    [dict setObject:self.mEmailAddress.text forKey:@"emailaddress"];
    [dict setObject:self.mNameTextField.text forKey:@"firstname"];
    [dict setObject:self.mPhoneNumber.text forKey:@"lastname"];
    [dict setObject:self.mTextView.text forKey:@"notes"];
    [dict setObject:[NSData dataWithContentsOfFile:self.mPdfPath] forKey:@"uploadedfile"];
    NSLog(@"The Data is %@",dict);

     WebServiceHelper *mWebServiceHelperOBJ = [[WebServiceHelper alloc]init];

    // Posting Data Url
    NSMutableArray *responseDict = (NSMutableArray *)[[mWebServiceHelperOBJ makeCallToURL:@"test.php" withDataPost:dict] JSONValue];
     NSLog(@" The response Dict is%@",responseDict);

    if ([[responseDict valueForKey:@"JsonObject"] isEqualToString:@"DEFAULT_VALUE"])
    {
        [Helper showAlert:@"Message" withMessage:@"Data posted successfully"];
    }
}

//Postind data & reponse
- (NSString *)makeCallToURL:(NSString*)url withDataPost:(NSMutableDictionary*)dict {

NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[[NSString stringWithFormat:@"%@%@",kURL,url] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];
[urlRequest setTimeoutInterval:180];

NSString *requestBody = [NSString stringWithFormat:@"JsonObject=%@", [dict JSONRepresentation]];

[urlRequest setHTTPBody:[requestBody dataUsingEncoding:NSUTF8StringEncoding]];
   // [urlRequest setValue:@"application/json" forHTTPHeaderField:@"content-type"];
[urlRequest setHTTPMethod:@"POST"];

NSURLResponse *response;
NSError *error;
NSData *responseData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error] ;

if([responseData length])
{
    NSString *data = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] autorelease];      
    return data;
}
return nil; 
```

}

```
 but the request Body represent an error..

   PDFGenerator[1000:1c103] -JSONRepresentation failed. Error trace is: (
"Error Domain=org.brautaset.JSON.ErrorDomain Code=1 \"JSON serialisation not supported for NSConcreteData\" UserInfo=0xb178d50 {NSLocalizedDescription=JSON serialisation not supported for NSConcreteData}",
"Error Domain=org.brautaset.JSON.ErrorDomain Code=1 \"Unsupported value for key uploadedfile in object\" UserInfo=0xb107430 {NSUnderlyingError=0xb178d70 \"JSON serialisation not supported for NSConcreteData\", NSLocalizedDescription=Unsupported value for key uploadedfile in object}" 
```

打印数据描述：
**注意**：尝试在第**7**行获取**E:\wwwroot\Team\vikramjit\test.php中非对象的属性****注意：尝试在****E** :\wwwroot\Team\vikramjit中获取非对象的属性第**8**行的**\test.php****注意**：尝试在**E:\wwwroot\Team\vikramjit\test.php中获取非对象的属性 在第****9**行**注意：尝试在****E:\wwwroot\Team**中获取非对象的属性第**10**行的**\vikramjit\test.php****注意：第****11**行的**E:\wwwroot\Team\vikramjit\test.php**试图获取非对象的属性

 ******请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:12:14.280

JSON 不能包含二进制数据。您应该将文件内容编码为字符串（使用 base64 或其他算法）并将其保存在`NSString`.******

# c - linux内核中的中断

> ID：13083114
> 
> 赞同：4
> 
> 时间：2012-10-26T08:06:33.493
> 
> 标签：c, linux, linux-kernel, interrupt, power-management

我已将基于 omap4 的自定义板的一个 gpio 作为输入 gpio。当我在任何端口上连接任何外部硬件时，输入 gpio 被下拉，我在那个 gpio 上得到中断。

现在，当我运行 Linux 内核 2.6 时，它工作正常并在该 gpio 上获得中断，但是当我使用 Linux 内核 3.0 时，它不会在该 gpio 上创建中断。该 gpio 的值不会改变，并且不会调用中断处理程序。

那么在Linux内核中创建中断的功率级别设置有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T07:53:07.717

如评论中所述，通过正确指定引脚上的上拉电阻解决了该问题。

通常要考虑的另一件事是“ **pin-mux** ”，即需要验证所讨论的引脚是否配置为 GPIO 而不是其他一些功能。

[**此处**](http://www.slideshare.net/joujiahe/introduction-to-omap4-pad-configuration)提供了引脚配置的详细说明，
特别是针对 OMAP4（mux、pull、wake-up）。[](http://www.slideshare.net/joujiahe/introduction-to-omap4-pad-configuration)

# sql-server - 在连接中选择具有相同名称的字段

> ID：13083122
> 
> 赞同：0
> 
> 时间：2012-10-26T08:07:31.507
> 
> 标签：sql-server, inner-join

我有一个这样的sql查询：

```
 SELECT com.*
from VE_COMMAND_SITE_BIND bnd INNER JOIN [dbo].[VE_COMMAND] com ON bnd.COMMAND_ID = com.ID 
```

两个表中都有一个名为“ON”的字段。我想像处理 com 一样从第一个表 com 中选择所有字段。*，但来自第二个表 bnd 的字段“ON”。我也`t want to mention all the com`没有字段 - 我喜欢 com。*！

MSSQL 中有什么合适的方法来做这些事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:09:57.260

如果您的问题是“我可以从表 com 中选择除一个字段之外的所有内容，然后从表 bnd 中选择一个字段吗？” 那么答案是“不。您必须单独定义结果字段”

你可以做

```
 select com.*, bnd.[on] as bndon 
```

或者

```
 select com.field1, com.field2,... 
```

此外，您应该尽量避免将您的字段称为“on”作为`on`保留字。

出于可维护性和潜在性能原因，最好单独指定要从`select`语句返回的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:15:54.943

您可以对 VE_Command ( com ) 表使用通配符 * 运算符，然后从 VE_COMMAND_SITE_BIND ( bnd ) 中选择您想要的字段。

要注意的一件事是命名冲突。您说在两个表中，该字段都称为 ON。这可能会导致尝试按名称访问字段的任何客户端应用程序出现问题。（它会选择哪一个，等等？）

由于您不想列出 com 的所有字段，因此重命名您从 bnd 中取出的字段可能更容易

```
SELECT 
   com.*,
   bnd.ON AS BindOn
FROM
   ... 
```

# c# - 使用反射动态绑定到 C# 事件

> ID：13083126
> 
> 赞同：5
> 
> 时间：2012-10-26T08:07:40.020
> 
> 标签：c#, events

我有一个文档很差的 WPF 控件。

在代码隐藏中，我想反映控件触发使用的事件，`GetType().GetEVents()`并为每个事件添加一个处理程序，它只是打印出事件的名称。

这将让我看到与控件交互的实际情况。

到目前为止，我有：

```
foreach (var e in GetType().GetEvents())
{
    var name = e.Name;
    var handler = new Action<object,object>( (o1,o2) =>Console.WriteLine(name));

    try
    {
        e.AddEventHandler(
                     this,
                     Delegate.CreateDelegate(
                               e.EventHandlerType,
                               handler.Target, 
                               handler.Method
                               ));
    }
    catch (Exception ex)
    {
        Console.WriteLine( "Failed to bind to event {0}", e.Name);
    }
} 
```

`(object,EventArgs)`当事件签名有效但在某些其他事件上无法绑定时，这似乎有效。

有没有办法在不一定知道事件签名的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:17:43.273

您可以使用`System.Linq.Expressions.Expression`该类生成与事件签名匹配的动态处理程序 - 您只需在其中调用`Console.WriteLine`.

该[`Expression.Lambda`](http://msdn.microsoft.com/en-us/library/bb350515.aspx)方法（已提供指向您需要的特定重载的链接）可用于生成正确类型`Func<>`，或者更有可能生成`Action<>`正确类型。

您反映事件的委托类型（获取`Invoke`@Davio 提到的方法）以提取所有参数并`ParameterExpression`为每个参数创建 s 以提供给 lambda 方法。

这是一个完整的解决方案，您可以将其粘贴到标准单元测试中，稍后我将在后续编辑中进行解释：

```
public class TestWithEvents
{
  //just using random delegate signatures here
  public event Action Handler1;
  public event Action<int, string> Handler2;

  public void RaiseEvents(){
    if(Handler1 != null)
        Handler1();
    if(Handler2 != null)
      Handler2(0, "hello world");
  }
}

public static class DynamicEventBinder
{
  public static Delegate GetHandler(System.Reflection.EventInfo ev) {
    string name = ev.Name;
    // create an array of ParameterExpressions
    // to pass to the Expression.Lambda method so we generate
    // a handler method with the correct signature.
    var parameters = ev.EventHandlerType.GetMethod("Invoke").GetParameters().
      Select((p, i) => Expression.Parameter(p.ParameterType, "p" + i)).ToArray();

    // this and the Compile() can be turned into a one-liner, I'm just
    // splitting it here so you can see the lambda code in the Console
    // Note that we use the Event's type for the lambda, so it's tightly bound
    // to that event.
    var lambda = Expression.Lambda(ev.EventHandlerType,
      Expression.Call(typeof(Console).GetMethod(
        "WriteLine",
        BindingFlags.Public | BindingFlags.Static,
        null,
        new[] { typeof(string) },
        null), Expression.Constant(name + " was fired!")), parameters);

    //spit the lambda out (for bragging rights)
    Console.WriteLine(
      "Compiling dynamic lambda {0} for event \"{1}\"", lambda, name);
    return lambda.Compile();
  }

  //note - an unsubscribe might be handy - which would mean
  //caching all the events that were subscribed for this object
  //and the handler.  Probably makes more sense to turn this type
  //into an instance type that binds to a single object...
  public static void SubscribeAllEvents(object o){
    foreach(var e in o.GetType().GetEvents())
    {
      e.AddEventHandler(o, GetHandler(e));
    }
  }
}

[TestMethod]
public void TestSubscribe()
{
  TestWithEvents testObj = new TestWithEvents();
  DynamicEventBinder.SubscribeAllEvents(testObj);
  Console.WriteLine("Raising events...");
  testObj.RaiseEvents();
  //check the console output
} 
```

一个大纲——我们从一个有一些事件的类型开始（我正在使用`Action`，但它应该适用于任何东西），并且有一个方法可以用来测试触发所有有订阅者的事件。

然后到`DynamicEventBinder`类，它有两种方法：`GetHandler`- 为特定类型的特定事件获取处理程序；并将`SubscribeAllEvents`所有这些事件绑定到该类型的给定实例 - 它简单地循环所有事件，调用`AddEventHandler`每个事件，调用`GetHandler`以获取处理程序。

该`GetHandler`方法是肉和骨头所在的地方-并且完全按照我在大纲中的建议进行。

委托类型有一个`Invoke`由编译器编译到其中的成员，该成员反映了它可以绑定到的任何处理程序的签名。因此，我们反映该方法并获取它具有的任何参数，`ParameterExpression`为每个参数创建 Linq 实例。给参数命名是个好主意，重要的是这里的类型。

然后我们构建一个单行 lambda，它的主体基本上是：

```
 Console.WriteLine("[event_name] was fired!"); 
```

*（这里请注意，事件的名称被拉入动态代码中，并就代码而言并入一个常量字符串）*

当我们构建 lambda 时，我们还告诉`Expression.Lambda`方法我们打算构建的委托类型（直接绑定到事件的委托类型），并通过传递`ParameterExpression`我们之前创建的数组，它将生成一个具有那么多参数。我们使用该`Compile`方法实际编译动态代码，这为我们提供了一个`Delegate`然后我们可以将其用作`AddEventHandler`.

我真诚地希望这能解释我们所做的事情——如果你没有使用过表达式和动态代码，那么它就会成为令人费解的东西。确实，与我一起工作的一些人简单地称之为巫毒教。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:19:28.297

查看此处的示例：http: [//msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx)

他们使用委托的调用方法来获取签名。

# mysql - 具有多个条件和订单的复杂选择查询

> ID：13083132
> 
> 赞同：0
> 
> 时间：2012-10-26T08:08:02.480
> 
> 标签：mysql, select, subquery, left-join, multiple-tables

```
SELECT p.*
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id

LEFT JOIN Offers o
       ON ot.offer_id = o.id
      AND o.dF<=3 
      AND o.dt>=3

ORDER BY o.id DESC, 
          p.prod_id ASC
LIMIT 20 
```

[请检查小提琴中的输出](http://sqlfiddle.com/#!2/3da57/3)

**我想要现有的条件以及下面列出的更多附加条件：**

1.  在此输出中，我首先显示了提供的产品（这很重要，在此之后）
2.  我想要新产品 - 这是基于`todaysDate - p.pdate less than 30 days`
3.  然后展示那些有的产品`p.pre != ''`
4.  然后向他们展示没有价格的人，即。`p.price ==0`
5.  然后安排其他产品`prod_id DESC`

**我想多合一，在这个现有查询中添加这 5 个点**

我希望你有问题。我需要立即回应。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:50:08.357

试一试：

```
SELECT p.*, o.id
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id
LEFT JOIN Offers o
       ON ot.offer_id = o.id
      AND o.dF<=3 
      AND o.dt>=3
ORDER BY o.id DESC, 
case when p.pDate > curdate()-interval 30 day then p.pDate else '1970-01-01' end desc,
case when p.pre != '' then 1 else 0 end desc,
p.price asc,p.prod_id DESC
LIMIT 20; 
```

我有点不清楚您在第 2 点中的意思：

您想要对结果日期进行排序`DESC`还是`ASC`？那些日期超过 30 天的行会发生什么情况？排除？进入下一个排序级别？

我已经猜到你的意思了。如果我误解了，我相信你可以玩弄这个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:30:55.810

你只需要添加一个 WHERE 条件......

```
SELECT p.*, o.id
FROM Products p
LEFT JOIN offertran ot 
ON p.prod_id = ot.prod_id

LEFT JOIN Offers o
       ON ot.offer_id = o.id
      AND o.dF<=3 
      AND o.dt>=3

WHERE datediff(curdate(),p.pdate)<30
      AND p.pre <> ''
      AND p.price = 0

ORDER BY o.id DESC, 
         p.prod_id ASC,
         prod_id DESC

LIMIT 20 
```

# php - 从 PHP 执行程序 (rdiff)

> ID：13083138
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:08:35.980
> 
> 标签：php, permissions, exec

我有这个 PHP 代码在从浏览器调用时拒绝工作，但是**当我从 Putty 运行它时它工作得很好**：

```
exec('rdiff patch "/full-path/file-1.bin" "/full-path/file-2.bin" "/full-path/output.bin"'); 
```

我仔细检查了文件夹权限（nobody：nobody 0777），rdiff 运行权限（设置为root：root 0755，我将它们更改为nobody：nobody 0777 但它不起作用），我什至将文件权限更改为0777 /“CHOWNed them “对任何人来说，它根本不起作用

我很确定这没什么，只是我不知道出了什么问题，**我使用的是标准的亚马逊 unix EC2 实例**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T08:10:07.843

`rdiff``PATH`对于运行 Web 服务器的用户来说，很可能不是。

当不以交互方式运行它们时，请始终使用可执行文件的完整路径，例如，`/usr/bin/rdiff`或者`which rdiff`在 PuTTY 中告诉您的任何内容。

# java - eclipse中找不到Java源代码

> ID：13083143
> 
> 赞同：2
> 
> 时间：2012-10-26T08:08:52.803
> 
> 标签：java, eclipse, xpages

在 xpages 应用程序中，将 javav 源代码添加到 Lotus nsf 文件的 Local 文件夹中。现在看不到了，用搜索也找不到。代码仍在工作，但无法对其进行修改。如何找回源代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T08:23:40.747

“本地”这个名称是“永远不要把你自己的东西放在这里，因为我们删除它没有警告并且它实际上不是在里面 -nsf”的缩写。但即使对于 IBM 命名标准，这个名称也太长了，所以我们称它为本地名称。

事实上：NSF 不**包含**本地[文件夹](http://www.addletters.com/pictures/bart-simpson-generator/3185006.htm)。它位于您在工作区目录中添加的那台机器上（如果幸运的话）。在构建时编译代码并将类文件存储到 NSF 中（这就是它起作用的原因）。

你必须回到原来的机器并希望java文件仍然存在（或在机器的垃圾箱中）。在 web-inf 下创建一个单独的源文件夹并将其添加到类路径（或在 8.5.3++ 中使用 Java Design 元素）。

如果没有了：使用[反编译器](http://java.decompiler.free.fr/)

# android - “onConfigurationChanged()”之后叫什么？

> ID：13083145
> 
> 赞同：5
> 
> 时间：2012-10-26T08:09:04.163
> 
> 标签：android, events, configuration, rotation, simulate

我是一名年轻的 Android 开发人员，我找不到解决问题的方法。

我想在配置更改之后模拟一个事件，为此我尝试使用`onConfigurationChanged()`这种方法，但使用这种方法，我的事件是在屏幕旋转之前应用的。但我想在轮换之后应用我的事件。

那么，我该怎么做呢？或者之后调用什么方法`onConfigurationChanged()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:12:10.173

简单 >> Oncreate() 方法 在 onConfigurationChanged 之后调用。

# iphone - 动画大尺寸图像

> ID：13083157
> 
> 赞同：0
> 
> 时间：2012-10-26T08:09:59.617
> 
> 标签：iphone

我想使用 [UIImageView setAnimationImages:] 播放大约 120 个图像的动画，每个图像的尺寸和尺寸都很大（640 x 960）我想这样做不是正确的方法，因为它会消耗很多运行时的设备 RAM。请建议我在内存管理方面以更有效的方式执行此类动画的任何其他方法。我无法从图像中制作视频，因为图像不会每次都相同，它们取决于用户的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:09:27.533

实际上，您需要的是确实从图像中制作视频，但是在根据用户操作生成它们之后以编程方式。如果已经构建，您将能够播放它而不会出现内存问题。

[在这里，您有一个](https://stackoverflow.com/questions/3741323/how-do-i-export-uiimage-array-as-a-movie)解释如何执行此操作的答案。

# jquery - Fancybox 超额边距

> ID：13083160
> 
> 赞同：0
> 
> 时间：2012-10-26T08:10:14.397
> 
> 标签：jquery, css, fancybox

Fancybox 正在为覆盖主体添加过多的右边距。

你可以在这里看到发生了什么：[http ://www.thermae.com/boetfort/nl/fotoalbum/113/bar-restaurant](http://www.thermae.com/boetfort/nl/fotoalbum/113/bar-restaurant)

我认为它与滚动条有关（正如此处较早的帖子中所建议的那样） - 但在玩了一会儿之后，情况似乎并非如此。

有什么想法吗？

我没有覆盖基本 CSS，也没有使用任何自定义 Fancybox 设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:38:02.710

我看到您已更改为fancyBox v1，但无论如何我都会回答。

您为“html”标签添加了额外的滚动：

```
html {
    overflow-y: scroll;
} 
```

而且，不幸的是，这导致了这个问题 - [https://github.com/fancyapps/fancyBox/issues/340](https://github.com/fancyapps/fancyBox/issues/340)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:26:06.217

我对此进行了调查，发现此 css 规则中存在问题，因此只需将其更改为

```
#fancybox-outer {
    height: 100%;
    position: relative;
    width: 94%;
} 
```

在

```
"http://www.thermae.com/js/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.css" 
```

# vba - 在excel的开发人员菜单中创建用户表单后如何提供指向sheet1的链接？

> ID：13083163
> 
> 赞同：-4
> 
> 时间：2012-10-26T08:10:26.097
> 
> 标签：vba, excel

我创建了一个用户表单并在 VBA 中为 Excel 设计了一个小型应用程序，并将文件保存为启用宏的 Excel 工作表。

如何在第一张纸上显示申请表？打开文件时它应该显示工作表，我不想去开发人员菜单查看用户表单。

另外，我怎样才能隐藏其他人的代码？我在工具菜单下看到了“保护”，但它阻止了完整的用户表单。我只想隐藏代码，而不是表单。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:21:46.630

由于答案采用编辑格式，因此我将提供直接转发 Web 链接以指示问题已得到解答。我非常同意以上两位作者的观点。当您可以轻松找到很多方法来找到解决方案时，这并不是在这个论坛上真正要问的问题。此外，标题也具有误导性。没有冒犯的意思。

[http://www.automateexcel.com/2004/08/13/excel_vba_show_or_load_a_form_when_excel/](http://www.automateexcel.com/2004/08/13/excel_vba_show_or_load_a_form_when_excel/)

[您如何密码保护从工作表进入 vba 代码编辑器？](https://stackoverflow.com/questions/6787544/how-do-you-password-protect-entering-the-vba-code-editor-from-a-sheet)

[http://spreadsheetpage.com/index.php/tip/spreadsheet_protection_faq1/](http://spreadsheetpage.com/index.php/tip/spreadsheet_protection_faq1/)

_m 在移动设备上，无法进行超链接引用。

# java - 在 CRM 中生成工单 ID

> ID：13083168
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:10:57.043
> 
> 标签：java, primary-key, unique, uniqueidentifier

我正在使用**帮助台系统**，并在开始研究之前做了一些研究。我注意到所有**票证 ID**都以当前日期开头，后跟几位数字。例如，2012102620000033。

[如何在Java](http://en.wikipedia.org/wiki/Java_%28programming_language%29)中生成这种 ID ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:23:08.817

其他答案中的代码很有用......请检查这是否有帮助：

```
Random random = new Random();
DateFormat date = new SimpleDateFormat("yyyyMMdd");
System.out.println(date.format(new Date()) + String.valueOf(random.nextInt(999999999))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:41:02.753

一个很好的起点是看看[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html). 例如，

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");
String isoDate = sdf.format(new Date());
// Append your ticket serial number... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:41:55.620

如果我正确理解了您的问题，则可以借助函数在源代码中使用*[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)*类 API 生成票证 ID，并且可以将时间戳与字符串变量连接起来。

# java - 资源包中的键是否唯一？

> ID：13083171
> 
> 赞同：0
> 
> 时间：2012-10-26T08:11:07.483
> 
> 标签：java, properties, resourcebundle

[ResourceBundle](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ResourceBundle.html)`public final String[] getStringArray(String key)`有什么用？在属性文件中 不是唯一的吗？这会返回多个值吗？如果不是，为什么它返回一个数组？
`keys`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:20:20.857

如果您仔细阅读 的文档`ResourceBundle`，它会说：-

> 资源包属于其成员共享一个通用基本名称的系列，但其名称还具有标识其语言环境的附加组件。

**还： -**

> 资源包包含键/值对。这些键唯一地标识包中特定于语言环境的对象。

因此，键仅对于特定语言环境是唯一的。在两个不同的语言环境中，您可以拥有相同的键。这就是为什么返回类型是`String[]`.

对于方法 - [`getStringArray`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ResourceBundle.html#getStringArray%28java.lang.String%29): -

> 从此资源包或其父资源包中获取给定键的字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:30:32.763

a 中的值`ResourceBundle`不必是 a `String`，值可以是任何 Object。在这种情况下，您希望它是一个`String[]`.

从您链接的javadoc：

键：

> 资源包包含键/值对。这些键唯一地标识包中特定于语言环境的对象。

价值观：

> 键始终是字符串。在本例中，键是“OkKey”和“CancelKey”。在上面的例子中，值也是字符串——“OK”和“Cancel”——但它们不是必须的。这些值可以是任何类型的对象。

# java - 活动开始且未选中复选框时出现 NullPointerException

> ID：13083175
> 
> 赞同：1
> 
> 时间：2012-10-26T08:11:28.807
> 
> 标签：java, android, checkbox, nullpointerexception

我正在尝试实现以下代码：

```
 public CheckBox checkboxer() {
    final CheckBox box = (CheckBox) findViewById(R.id.cbBox);
    Log.d(LOG_TAG, "make ListView clickable");
    lvMain.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
               int position, long id) {              
            box.setChecked(true);
        }
    });       
    return box;
}

   private void savebox(final boolean isChecked) {
    SharedPreferences sharedPreferences = getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean("check", isChecked);
    editor.commit();
    Log.d(LOG_TAG, "checkbox is saved");
}

private boolean load() { 
SharedPreferences sharedPreferences = getPreferences(Context.MODE_PRIVATE);
return sharedPreferences.getBoolean("check", false);} 
```

当我保存它时

```
onPause(){
     savebox(checkboxer().isChecked());
} 
```

日志表示已保存。包子当我放

```
onResume(){
     checkboxer().setChecked(load());
} 
```

来了`NullPointerException`。

我认为这是因为活动开始运行时没有检查和保存任何内容。我对么？我怎么能四处走动？

非常感谢你。开始了

**日志猫：**

```
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime  FATAL EXCEPTION: main
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime  java.lang.RuntimeException: Unable to resume activity {example.CustomAdapter/example.CustomAdapter.ChildActivity}: java.lang.NullPointerException
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:123)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:3683)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:507)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime  Caused by: java.lang.NullPointerException
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at example.CustomAdapter.ChildActivity.onResume(ChildActivity.java:256)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.Activity.performResume(Activity.java:3832)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
08:18:37.830    1773    example.CustomAdapter   ERROR   AndroidRuntime      ... 12 more 
```

对不起我忘记了。可能是因为在我的适配器类中我有 View 方法

```
 CheckBox cbBuy = (CheckBox) view.findViewById(R.id.cbBox);

    cbBuy.setOnCheckedChangeListener(myCheckChangList);

    cbBuy.setTag(position);

    cbBuy.setChecked(p.box);
    return view;` 
```

并且

```
 OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

      getProduct((Integer) buttonView.getTag()).box = isChecked;
    }
  }; 
```

对不起，我是一个新人，可能不明白适配器中的复选框声明和活动中可能存在什么样的矛盾。如果是由于这种矛盾引起的，请解释。

这是和的确切`onResume`编码`onPause`

```
@Override
protected void onResume() {
    super.onResume();
    Log.d(LOG_TAG, "ChildActivity: onResume()");
    DataSourceChild.openToWriteChild();
    checkboxer();

}

@Override
protected void onPause() {
    super.onPause();
    Log.d(LOG_TAG, "ChildActivity: onPause()");

    DataSourceChild.closeChild();

    savebox(checkboxer().isChecked());

} 
```

整个代码太大了。让我先为您提供 onCreate ` public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.child）；

```
 Log.d(LOG_TAG, "ChildActivity: onCreate()");

    child_datasource = new DataSourceChild(this);
    DataSourceChild.openToWriteChild();

    Intent intent = getIntent();

    val_position = intent.getIntExtra("value_1", pos_1);
    val_id = intent.getLongExtra("value_2", pos_2);

    onSelectionMade();

}

public void onSelectionMade() {

    if (val_position == val_id) {

        loader(val_position);
    }
}` 
```

加载器包含复选框，如下所示` public void loader(int val) {

```
 item_values = child_datasource.readItem(val);

    // определяем адаптер
    boxAdapter = new BoxAdapter(this, item_values);

    // настраиваем список
    lvMain = (ListView) findViewById(R.id.lvMain);

    // выставляем адаптер
    lvMain.setAdapter(boxAdapter);

    // регистратор контекстного меню
    registerForContextMenu(lvMain);

    // метод для работы с checkbox
    checkboxer();

    boxAdapter.notifyDataSetChanged();
}` 
```

现在在自定义 BoxAdapter 我有以下

```
`  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

    View view = convertView;
    if (view == null) {
      view = lInflater.inflate(R.layout.childitem, parent, false);
    }

    Product p = getProduct(position);
    ((TextView) view.findViewById(R.id.tvDescr)).setText(p.name);
    ((TextView) view.findViewById(R.id.tvPrice)).setText(p.price + "");
    ((ImageView) view.findViewById(R.id.ivImage)).setImageResource(p.image);

    CheckBox cbBuy = (CheckBox) view.findViewById(R.id.cbBox);

    cbBuy.setOnCheckedChangeListener(myCheckChangList);

    cbBuy.setTag(position);

    cbBuy.setChecked(p.box);
    return view;
  }` 
```

对造成的不便深表歉意。但我想知道发生了什么。

您的示例一键即可工作。非常感谢你。我尝试通过以下方式更新我的适配器视图方法

```
`  public View getView(final int position, View convertView, ViewGroup parent) {

    View view = convertView;
    if (view == null) {
      view = lInflater.inflate(R.layout.childitem, parent, false);
    }

    Product p = getProduct(position);

    ((TextView) view.findViewById(R.id.tvDescr)).setText(p.name);
    ((TextView) view.findViewById(R.id.tvPrice)).setText(p.price + "");
    ((ImageView) view.findViewById(R.id.ivImage)).setImageResource(p.image);

    CheckBox cbBuy = (CheckBox) view.findViewById(R.id.cbBox);

    cbBuy.setTag(position);

    cbBuy.setChecked(mIsChecked[position]);

    cbBuy.setOnCheckedChangeListener (new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

      mIsChecked[position] = isChecked;
      getProduct((Integer) buttonView.getTag()).box = isChecked;
    }
  });

    return view;
  }
  ` 
```

并在 onCreate 中进行了更改

```
 `    public void loader(int val) {

        item_values = child_datasource.readItem(val);

        lvMain = (ListView) findViewById(R.id.lvMain);

        boolean[] isChecked = new boolean[item_values.size()];
        for (int i = 0; i < item_values.size(); i++) {
            isChecked[i] = false;
        }

        boxAdapter = new BoxAdapter(this, item_values, isChecked);

        lvMain.setAdapter(boxAdapter);

        registerForContextMenu(lvMain);

        boxAdapter.notifyDataSetChanged();
    }` 
```

当我离开 ChildActivity 时，它仍然无法保存支票。我很遗憾我无法应用您的示例，而且我对 Android 的了解还不足以像您那样轻松地使用 View 进行操作。如果您能进一步解释我应该如何更改视图以获得结果，我将不胜感激，如果没有，那么对不起您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:54:59.510

当活动开始时 onResume() 将被调用。因此，在 onResume() 中，只需在调用 setChecked 函数之前进行检查，以便仅在 checkboxer() 不为空时才执行，以确保仅在活动恢复时才执行。

```
onResume(){
     if(checkboxer() != null)
          checkboxer().setChecked(load());
} 
```

带有复选框和列表视图的示例活动

```
package com.example.checkdoubltap;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class CheckLayoutParams extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lin);
    ListView list = (ListView) findViewById(R.id.listview);
    boolean[] isChecked = new boolean[countryStrings.length];
    for(int i=0;i<countryStrings.length; i++){
        isChecked[i] = false;
    }
    CheckBoxAdapter adapter = new CheckBoxAdapter(CheckLayoutParams.this, countryStrings, isChecked);

    list.setAdapter(adapter);

}

private String[] countryStrings = { "Afghanistan", "Albania",
        "Algeria", "Andorra", "Angola", "Anguilla", "Antigua and Barbuda",
        "Argentina", "Armenia", "Aruba", "Ascension Island", "Australia",
        "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh",
        "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bermuda",
        "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana",
        };
} 
```

样品适配器：

```
package com.example.checkdoubltap;

  import android.content.Context;
  import android.util.Log;
  import android.view.View;
  import android.view.ViewGroup;
  import android.widget.BaseAdapter;
  import android.widget.CheckBox;
  import android.widget.CompoundButton;
  import android.widget.CompoundButton.OnCheckedChangeListener;

  public class CheckBoxAdapter extends BaseAdapter {

private Context mContext;
private String[] mCountries;
private boolean[] mIsChecked;

public CheckBoxAdapter(Context context, String[] countryStrings, boolean[] isChecked) {
    mContext = context;
    mCountries = countryStrings;
    mIsChecked = isChecked;
}

@Override
public int getCount() {
    if(mCountries != null)
        return mCountries.length;
    return 0;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    CheckBox view = new CheckBox(mContext);
    view.setChecked(load(position));
//  view.setChecked(mIsChecked[position]);
    view.setText(mCountries[position]);
    view.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            Log.d("Check","Changing position to"+position+" "+isChecked);
            mIsChecked[position] = isChecked;
            savebox(position,isChecked);
        }
    });
    return view;
}

private boolean load(int position) { 
    SharedPreferences sharedPreferences = ((Activity) mContext).getPreferences(Context.MODE_PRIVATE);
    return sharedPreferences.getBoolean(""+position, false);
}

private void savebox(int position, final boolean isChecked) {
    SharedPreferences sharedPreferences = ((Activity) mContext).getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean(""+position, isChecked);
    editor.commit();
    Log.d(TAG, "checkbox is saved");
}
  } 
```

使用列表视图布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:id="@+id/listview"
>
</ListView>
</LinearLayout> 
```

# javascript - 如何隐藏移动网页（如 chrome 或 android 浏览器）上的地址栏？

> ID：13083182
> 
> 赞同：1
> 
> 时间：2012-10-26T08:12:02.147
> 
> 标签：javascript, android, html, html5-video

当用户输入 URL 时，我正在尝试在 android 设备上使 videojs 全屏显示。但是，地址栏仍然存在。我该如何隐藏它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:13:19.863

试试这个...

```
if(navigator.userAgent.match(/Android/i)){
    window.scrollTo(0,1);
} 
```

这显然必须在负载上完成，请参阅[http://atlchris.com/1847/quick-tip-hide-mobile-web-browser-address-bar-improved/](http://atlchris.com/1847/quick-tip-hide-mobile-web-browser-address-bar-improved/)

# python - 写入和读取文件时的奇怪行为

> ID：13083183
> 
> 赞同：2
> 
> 时间：2012-10-26T08:12:04.113
> 
> 标签：python, python-2.7

执行以下代码时，在第二次读取后，文件被填充为零，直到 4096 字节大。我不知道为什么：

```
f = open("file.txt", "w+")
f.read()
# gives ''
f.write("Hello")
f.read()
# filled with \x00,\x00
f.close()
# file is 4096 bytes large... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:30:29.623

解决问题的最佳方法：不要混用`read()`和`write()`.

否则：在第二个之前`write()`使用*从头开始*读取文件：`seek()``read()`

 *```
f = open("file.txt", "w+")
print f.read()      # prints ''
f.write("Hello")
f.seek(0)
print f.read()      # print 'Hello'
f.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:36:43.923

这可能与文件系统和/或分区有关。我没有完全了解细节，但很可能 4096 字节（即正好 4Kb）是文件系统和分区中文件的最小大小。AFAIK，分区有一个块大小（通常为 4096 字节），文件只能分配给整个块。所以一个文件总是4096字节的倍数。我认为某些文件系统可以通过组合小文件来解决这个问题（例如 reiserfs）。*

# iphone - 使用自定义动画删除自定义 UIStoryboardSegue

> ID：13083184
> 
> 赞同：0
> 
> 时间：2012-10-26T08:12:05.397
> 
> 标签：iphone, ios, uistoryboard

我已经看到了几个如何`UIStoryboardSegue`使用自定义动画呈现自定义的示例。基本上，您继承`UIStoryBoardSegue`并覆盖“执行”方法，即像这样：

```
- (void)perform
{
    UIViewController *source = self.sourceViewController;
    UIViewController *destination = self.destinationViewController;

    // Create a UIImage with the contents of the destination
    UIGraphicsBeginImageContext(destination.view.bounds.size);
    [destination.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *destinationImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Add this image as a subview to the tab bar controller
    UIImageView *destinationImageView = [[UIImageView alloc] initWithImage:destinationImage];
    [source.parentViewController.view addSubview:destinationImageView];

    // Scale the image down and rotate it 180 degrees (upside down)
    CGAffineTransform scaleTransform = CGAffineTransformMakeScale(0.1, 0.1);
    CGAffineTransform rotateTransform = CGAffineTransformMakeRotation(M_PI);
    destinationImageView.transform = CGAffineTransformConcat(scaleTransform, rotateTransform);

    // Move the image outside the visible area
    CGPoint oldCenter = destinationImageView.center;
    CGPoint newCenter = CGPointMake(oldCenter.x - destinationImageView.bounds.size.width, oldCenter.y);
    destinationImageView.center = newCenter;

    // Start the animation
    [UIView animateWithDuration:0.5f
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^(void) {
                         destinationImageView.transform = CGAffineTransformIdentity;
                         destinationImageView.center = oldCenter;
                     }
                     completion: ^(BOOL done) {
                         // Remove the image as we no longer need it
                         [destinationImageView removeFromSuperview];

                         // Properly present the new screen
                         [source presentViewController:destination animated:NO completion:nil];
                     }];
} 
```

但是如果我在从屏幕上移除 Segue 的同时想要自定义动画该怎么办？覆盖这个类中的一些其他方法并调用它。还是在我叫“”的地方做动画，`dismissViewController`感觉不合逻辑？

将不胜感激，

阿尔乔姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:19:19.700

要更改 a上的动画，`dismissViewController`您必须将 设置`modalTransitionStyle`为.`UIModalTransitionStyle``presentedViewController`

```
- (IBAction)dismiss:(id)sender {
    self.presentingViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:51:19.990

为避免任何转换，这是我成功使用的代码（顺便说一句，对 Subview 的回答[有错误的方向](https://stackoverflow.com/questions/11672306/subview-has-wrong-orientation/13439788#13439788)）：

```
#include <QuartzCore/QuartzCore.h>

@implementation HorizontalSwipingSegue

- (void) perform {
    UIViewController *source = self.sourceViewController;
    UIViewController *destination = self.destinationViewController;    
    UIView *sourceView = source.view;
    UIView *destinationView = destination.view;

    // Create a UIImageView with the contents of the source
    UIGraphicsBeginImageContext(sourceView.bounds.size);
    [sourceView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *sourceImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageView *sourceImageView = [[UIImageView alloc] initWithImage:sourceImage];

    [[self sourceViewController] presentViewController:[self destinationViewController] animated:NO completion:NULL];

    CGPoint destinationViewFinalCenter = CGPointMake(destinationView.center.x, destinationView.center.y);
    CGFloat deltaX = destinationView.frame.size.width;
    CGFloat deltaY = destinationView.frame.size.height;

    switch (((UIViewController *)self.sourceViewController).interfaceOrientation) {
       case UIDeviceOrientationPortrait:
            destinationView.center = CGPointMake(destinationView.center.x - deltaX, destinationView.center.y);                
            sourceImageView.center = CGPointMake(sourceImageView.center.x + deltaX, sourceImageView.center.y);
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            destinationView.center = CGPointMake(destinationView.center.x + deltaX, destinationView.center.y);
            sourceImageView.center = CGPointMake(sourceImageView.center.x + deltaX, sourceImageView.center.y);
            break;
        case UIDeviceOrientationLandscapeLeft:
            destinationView.center = CGPointMake(destinationView.center.x, destinationView.center.y - deltaY);                
            sourceImageView.center = CGPointMake(sourceImageView.center.x + deltaY, sourceImageView.center.y);
            break;
        case UIDeviceOrientationLandscapeRight:
            destinationView.center = CGPointMake(destinationView.center.x, destinationView.center.y + deltaY);
            sourceImageView.center = CGPointMake(sourceImageView.center.x + deltaY, sourceImageView.center.y);
            break;
    }

    [destinationView addSubview:sourceImageView];

    [UIView animateWithDuration:0.6f
                     animations:^{
                         destinationView.center = destinationViewFinalCenter; 
                     }
                     completion:^(BOOL finished){
                         [sourceImageView removeFromSuperview];
                     }];
}

@end 
```

# android - 如何在 adb shell 中使用 find 命令

> ID：13083188
> 
> 赞同：7
> 
> 时间：2012-10-26T08:12:20.177
> 
> 标签：android, batch-file, adb, toybox

我想检查我的android设备的目录中是否有某个文件。

我在 Windows 批处理中使用以下行

```
adb shell find /mnt/sdcard/koinoxrista -name Bill.txt 
```

如果文件存在，我想做一些事情，如果文件不存在，我想做一些事情。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-07T14:21:05.190

adb shell 不支持查找命令。此命令还将显示隐藏文件`adb shell ls -laR | grep filename`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T23:51:36.223

当您知道确切的文件名时，您不需要使用任何额外的命令`find`来查找它。只需使用内置的 shell 工具检查它是否存在：

```
adb shell "[ -f /mnt/sdcard/koinoxrista/Bill.txt ] && echo 'found'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:35:14.627

恐怕Android模拟器不提供“查找”程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-24T15:39:26.560

`find`自 6.0 版 (Mashmallow) 起，该命令在 Android 中受支持。

这是因为从那时起它就包括了 Toybox。

[https://en.wikipedia.org/wiki/Toybox](https://en.wikipedia.org/wiki/Toybox)

# android - android：使用 LayoutParams 设置按钮之间的边距

> ID：13083192
> 
> 赞同：5
> 
> 时间：2012-10-26T08:12:42.017
> 
> 标签：android, button, layoutparams

我想垂直自动生成按钮，按钮之间的下边距为 20px。我尝试使用 LayoutParams 对象设置边距，但没有成功。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/regions_search"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="30dip"
    android:orientation="vertical" >
</LinearLayout>

@Override
public void onCreate(Bundle savedInstanceState) {

    ...

    for (Region region : regionsList) {

        //create new button     
        Button button = new Button(mContext);

        //set infos
        int id = Integer.parseInt(Long.toString((Long) region.getId()));        button.setId(id);
        button.setText(region.getName() + "( " + region.getStores_nb() + " )");

        //Layoutparams setting
        FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        params.setMargins(0, 0, 0, 20);

        button.setLayoutParams(params);

        myLinear.addView(button);

        } 
```

正如您在图像上看到的，图像之间没有空间。有人知道为什么吗？谢谢 ！ ![在此处输入图像描述](../Images/9d6c0bf1d74ed53cf4041ff1916d1ace.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T08:19:32.353

你可以试试这个：

```
LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) button.getLayoutParams();
layoutParams.bottomMargin += 20;
button.setLayoutParams(layoutParams); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:15:34.463

尝试使用`LinearLayout.LayoutParams`而不是`FrameLayout.LayoutParams`，就像在您正在使用的 xml 中一样`LinearLayout`。

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); 
```

# javascript - JavaScript 重复出现替换 innerHTML

> ID：13083197
> 
> 赞同：-3
> 
> 时间：2012-10-26T08:13:16.087
> 
> 标签：javascript, replace

我正在尝试替换 html 正文中的字符。我已经为 P 标签提供了 id。

**脚本**

```
 function myFunction()
{
 var str=document.getElementById("branch").innerHTML; 
 var n=str.replace("rw","somesymbol");
 var n=str.replace("er","somesymbol");
 var n=str.replace("im","somesymbol");
 document.getElementById("branch").innerHTML=n;
} 
```

**HTML 代码**

```
 <button onclick="myFunction()">replace</button>

 <p id="branch"> contents </p>
 <p id="branch"> contents </p>
 <p id="branch"> contents </p>
 <span class="s1"><img src="image.jpg"></span>
 <p id="branch">contents</p> 
```

我有几个 ID 为“分支”的段落。我的问题是当我点击替换按钮时，它只替换第一段而不是整个页面。我试图从正文中删除整个 P 标签，只保留整个内容的段落标签，在这种情况下，我的图像标签会变得混乱，因为我将几个英文字符替换为符号。

希望各位高手能帮帮我。谢谢

谢谢彼得和尼尔君

不幸的是，以下不起作用。我尽力用谷歌搜索解决方案。我仍然没有得到正确的脚本。

**新的java脚本**

```
 function myFunction()
{ 
 var str=document.getElementByClassName("branch").innerHTML;
 var n=str.replace("rw","somesymbol");
 var n=str.replace("er","somesymbol");
 var n=str.replace("im","somesymbol");
 document.getElementByClassName("branch").innerHTML=n;
} 
```

**新的 HTML 代码**

```
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script src="file.js"></script>

 <button onclick="myFunction()">replace</button>

 <div class="demo">nfhry ehL. tsik kpFe;j ,e;jf; nfhry ehl;od; jiyefuk;</div>
 <div class="demo">mnahj;jp vd;w jpUefuhFk;. ,e;efuj;jpy; thGk; kf;fs; kwe;Jk; jP';F</div>
 <span class="s1"><img src="image.jpg"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:17:48.800

使用 jQuery 和 class 属性。这样，您要做的只是 $('.branch').forEach( ... )

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T08:28:57.680

Blender 是对的——你可以用它`class`来代替。这将贯穿您的段落。替换`id`为`class`。

# c - Sqlite3 C API 行数

> ID：13083199
> 
> 赞同：4
> 
> 时间：2012-10-26T08:13:18.813
> 
> 标签：c, sqlite

我可以`SELECT COUNT(*) from tableName`在 C 程序中使用吗？

如果是这样，我如何获取结果？我不想使用循环，因为我只想要行数，而不是数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:21:43.260

当您执行查询`SELECT COUNT(*) from tableName`时，结果是与其他查询一样的表，但该结果表只有一列和一行，其中包含计数值。

正常调用`sqlite3_prepare_v2`then `sqlite3_step`，它会进入第一行（也是唯一的）。调用`sqlite3_column_int`以获取值。下一次调用`sqlite3_step`将返回`SQLITE_DONE`。

# magento - 子文件夹中的 Magento Multistore 设置

> ID：13083202
> 
> 赞同：0
> 
> 时间：2012-10-26T08:13:24.093
> 
> 标签：magento

我想在具有不同主题的子文件夹中运行 magento multistore。

假设我有一个自定义主题的主商店，并且我已经在子文件夹中配置了第二个商店 B，并将文件放入其中`index.php`并`.htaccess`进行了所需的更改，现在第二个商店的主页来了。

这是我的问题：如何在左侧边栏中获取所有类别列表，以及如何为第二家商店实施我的自定义主题，如产品列表页面、产品描述页面和购物车页面？

它是由我的主要商店的文件完成的，还是我必须将所有文件上传到第二家商店 B 并从这里我可以编辑所有东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:07:25.710

以您的风格创建您的主题。

您可以在第二个模板中更改主题。

进入系统->配置。

在当前配置范围中选择您的商店：。

在 Magento 安装的主文件夹中的 General->design.load 中。

第二家商店只有 .htaccess 和 indes.php

所有文件你起来

![主题应用到第二家商店（多店）](../Images/fdc332d57e29be22cba9277f1ef6dcbf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:36:43.843

在您的子文件夹中，您可以创建指向基本安装的 app、includes、js、skin 和 var 目录的符号链接。因此，您的第二家商店将能够访问基础商店中的所有文件，并且您可以在一个应用程序/设计、皮肤文件夹中执行所有更改

# android - 对应用程序的 android 和 iphone 版本使用相同的 facebook 应用程序

> ID：13083204
> 
> 赞同：1
> 
> 时间：2012-10-26T08:13:52.677
> 
> 标签：android, ios, facebook

我创建了同一个应用程序的 android 和 iOS 版本，我想与这两个应用程序共享相同的 facebook 数据。

例如，如果有一个用户使用 android 应用程序，则在查看应用程序的 iOS 版本中的用户列表时应将其列出。

但目前我正在为这两个应用程序获得一组单独的用户。同一个 facebook 用户必须同时通过 iOS 和 Android 应用程序登录才能使自己在两个版本中都可用

我使用相同的应用程序密钥和相同的 facebook 应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:17:55.303

那么这一切都归结为您如何准确地确定用户是否在线。Facebook API 提供了一些权限，允许您检测用户的在线状态。它被称为[`online_presence`和`friend_online_presence`](https://developers.facebook.com/docs/reference/login/extended-permissions/)。我看不出平台之间在在线状态方面存在差异的原因......这没有任何意义。我应该在这里注意，用户的在线状态实际上只是聊天状态，如[用户表](https://developers.facebook.com/docs/reference/fql/user/)的文档中所述-

> **online_presence** ( *string* ) - 用户的 Facebook 聊天状态。返回一个字符串，其中之一是`active`、 `idle`、`offline`或`error`（当 Facebook 无法确定服务器端的存在信息时）。当出于隐私原因限制该信息时，查询不会返回用户的 Facebook 聊天状态。

*您*也可以在数据库中有一个“在线用户”表，其中包含用户列表，并在连接/断开连接时更新用户记录。现在您的数据库将包含您可以查询的实时数据。

# php - IIS PHP 使用来自 web.config 的连接字符串

> ID：13083206
> 
> 赞同：2
> 
> 时间：2012-10-26T08:14:18.093
> 
> 标签：php, iis, connection-string

我们使用在 connect.php 中定义的字符串，但现在我们有一些启用 silverilght 的服务，它们利用 IIS 中的 web.config 作为连接字符串。

因此，与其将连接字符串放在两个地方，我可以从 PHP 访问 web.config 中的那个吗？这也将使最终用户更容易改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-28T22:00:17.900

我知道这是一个非常古老的线程，但最近我遇到了类似的问题。我只是将我的解决方案分享给需要它的人。它达到了我的目的 100%，希望它也能帮助你。

在我的 web.config 连接字符串节点看起来像：

```
<connectionStrings>
    <add name="sqlDB" connectionString="Server=xxx.xxx.xxx.xxx; Database=db_name; User Id=sqlserver_user_name; password=sqlserver_password;Max Pool Size=2000;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我编写了以下 PHP 代码来检索 sql server 连接信息以在 PHP 中使用它

```
<?php
    // start get connection string from web.config
    $xml =  simplexml_load_file("../Web.config") or die("Error: Cannot create object"); 
    //in my case web.config is in previous directory
    $array = json_decode(json_encode((array) $xml), 1);

    $server = "";
    $database = "";
    $user = "";
    $password = "";

    $fullString = ($xml->connectionStrings->add[0]["connectionString"]);

    $strArr = explode(";", $fullString);

    $arrCount = count($strArr);
    $connArr[]="";
    for($x=0;$x<$arrCount-1;$x++){
        $aS = explode("=",$strArr[$x]);
        $connArr+=array(strtolower(trim($aS[0])) => trim($aS[1]));
    }
    $server = $connArr["server"];
    $database = $connArr["database"];
    $user = $connArr["user id"];
    $password = $connArr["password"];
    // end get connection string from web.config

    $connectionInfo = array( "UID"=>$user,                            
                             "PWD"=>$password,                            
                             "Database"=>$database,
                             "CharacterSet" => "UTF-8"); 

    /* Connect using SQL Server Authentication. */  
    $conn = sqlsrv_connect( $server, $connectionInfo); 
?> 
```

仅供参考：在我的情况下，web.config 和 php 文件位于同一个域和同一个根目录下。如果您在跨域环境中工作，您应该首先考虑从远程位置读取 web.config，但出于安全原因，这不是一个明智的决定。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:19:13.290

是的你可以。

*   确保 Web 服务器进程可以访问该文件。您可以放入 Web 服务器进程可访问的链接。
*   web.config 只是一个 xml 文件。您可以使用我提供的片段作为示例或基础来读取文件并根据您的需要进行调整。

片段：

```
public function Load( $xmlfile )
{
  if ( is_readable( $xmlfile ) ) {
    $config = $this->xml2array( simplexml_load_file( $xmlfile ) );
} 
```

# ajax - 是否有任何纯客户端 AJAX/javascript 拼写检查插件？

> ID：13083207
> 
> 赞同：2
> 
> 时间：2012-10-26T08:14:23.863
> 
> 标签：ajax, jsonp, spell-checking

Spellify 就像一个魅力，但它需要 2 个跃点 - 一次到您自己的服务器，然后创建一个 Web 请求并调用 google API。昂贵 - 考虑到每次任何用户以其中一种形式键入空格时都会发生这种情况。

我还没有找到一个纯客户端版本来创建第 3 方请求客户端（大概是因为它是一个帖子并且你有 x 源问题） - 那里有任何 JSONP / GET 解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:01:13.717

值得注意的是，我偶然发现了新的[HTML5 拼写检查属性](http://wufoo.com/html5/attributes/17-spellcheck.html)。

我们的呼吁是，拼写检查对我们来说是一个很好的选择——因为最新的浏览器都支持这个属性，随着时间的推移，越来越多的用户将获得这个功能。

我仍然想听听 JSONP 解决方案，因为建议替换 la spellify 会更好。

# iphone - iPhone 上的 MGTwitterEngine 编译器错误：Xcode4.3.2 中的 libxml2.dylib

> ID：13083208
> 
> 赞同：2
> 
> 时间：2012-10-26T08:14:27.003
> 
> 标签：iphone, ios4, libxml2, mgtwitterengine

我正在使用**Xcode4.3.2**和 mac lionOs 并且无法添加**libxml2.dylib**因为它是内置文件，所以通过构建设置构建设置添加：搜索路径：

```
HEADER_SEARCH_PATHS = $(SDKROOT)/usr/include/libxml2 
```

但我`MGTwitterEngine`在 iPhone 编译器上遇到 8 个错误`Error:libxml2.dylib`

错误：

```
Undefined symbols for architecture i386:
  "_xmlReaderForMemory", referenced from:

  -[MGTwitterLibXMLParser initWithXML:delegate:connectionIdentifier:requestType:responseType:URL:] in MGTwitterLibXMLParser.o

 "_xmlTextReaderIsEmptyElement", referenced from:

  -[MGTwitterLibXMLParser _nodeValue] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _statusDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _userDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _hashDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser _directMessageDictionaryForNodeWithName:] in MGTwitterMessagesLibXMLParser.o

"_xmlTextReaderNodeType", referenced from:

  -[MGTwitterLibXMLParser _nodeValue] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _statusDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _userDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _hashDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser _directMessageDictionaryForNodeWithName:] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser parse] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMiscLibXMLParser parse] in MGTwitterMiscLibXMLParser.o

  ...

  "_xmlTextReaderValue", referenced from:

  -[MGTwitterLibXMLParser _nodeValue] in MGTwitterLibXMLParser.o

  "_xmlTextReaderRead", referenced from:

  -[MGTwitterLibXMLParser _nodeValue] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _statusDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _userDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _hashDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser _directMessageDictionaryForNodeWithName:] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser parse] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMiscLibXMLParser parse] in MGTwitterMiscLibXMLParser.o

  ...

  "_xmlTextReaderConstName", referenced from:

  -[MGTwitterLibXMLParser _statusDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _userDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _hashDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser _directMessageDictionaryForNodeWithName:] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser parse] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMiscLibXMLParser parse] in MGTwitterMiscLibXMLParser.o

  -[MGTwitterStatusesLibXMLParser parse] in MGTwitterStatusesLibXMLParser.o

  ...

  "_xmlStrEqual", referenced from:

  -[MGTwitterLibXMLParser _statusDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _userDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _hashDictionaryForNodeWithName:] in MGTwitterLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser _directMessageDictionaryForNodeWithName:] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMessagesLibXMLParser parse] in MGTwitterMessagesLibXMLParser.o

  -[MGTwitterMiscLibXMLParser parse] in MGTwitterMiscLibXMLParser.o

  -[MGTwitterStatusesLibXMLParser parse] in MGTwitterStatusesLibXMLParser.o

  ...

  "_xmlFree", referenced from:

  -[MGTwitterLibXMLParser initWithXML:delegate:connectionIdentifier:requestType:responseType:URL:] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _nodeValueAsString] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _nodeValueAsDate] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _nodeValueAsInt] in MGTwitterLibXMLParser.o

  -[MGTwitterLibXMLParser _nodeValueAsBool] in MGTwitterLibXMLParser.o 
```

ld：未找到体系结构 i386 的符号

collect2: ld 返回 1 个退出状态

我如何解决这个问题..分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:01:30.867

在您的目标设置中（在文件管理器中选择您的项目，然后选择您的目标）：

1.  `Build Phases`=> `Link Binary With Libraries`;
2.  `+`按下左下角的小按钮
3.  在出现的对话框类型中`libxml2.dylib`并选择它（也许您需要展开“iOS 5.1”或类似文件夹图标右侧的黑色小三角形）
4.  按添加按钮，您就完成了。

**更新：** 检查这个答案：[LibXML2.dylib 和 Xcode4](https://stackoverflow.com/q/4903939/1032151)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T10:20:34.510

我有同样的问题。当我将二进制文件与库链接时，它就消失了。

```
Go to Target -> Build Phases -> Link Binary with Library, click the plus sign and add "libxml2.dylib" 
```

# ocaml - ocaml 函数调用 List.fold_left

> ID：13083209
> 
> 赞同：0
> 
> 时间：2012-10-26T08:14:31.077
> 
> 标签：ocaml

填写给定的管道骨架，它使用 List.fold_left 来获取 OCaml 函数 `val pipe : ('a -> 'a) list -> ('a -> 'a)` ，这样`pipe [f1;...;fn]`（`f1,...,fn`函数在哪里！）返回一个函数`f`，这样对于任何`x`，我们都有`f x`返回结果`fn(...(f2(f1 x)))`。

同样，您的任务是为折叠函数`f`和基本情况填写适当的值。实现该功能后，您应该在 OCaml 提示符处获得以下行为：

```
# pipe [] 3;;
- :  int =  3 
# pipe [(fun x -> x+x); (fun x -> x + 3)] 3 ;;
- :  int =  9 
# pipe [(fun x -> x + 3);(fun x-> x + x)] 3;;
- :  int =  12 
```

这是您需要填写的代码：

```
let pipe fs =
  let f a x = failwith "to be implemented" in
  let base = failwith "to be implemented" in
    List.fold_left f base fs 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:59:28.137

在你给出的骨架中，`pipe`只接受一个参数。根据 pipe( `('a -> 'a) list -> 'a list`) 的类型，您知道该参数具有类型`('a -> 'a) list`，并且您应该返回某个类型的值`('a -> 'a)`。

现在的类型`List.fold_left`是形式`('b -> 'c -> 'b) -> 'b -> 'c list -> 'b`。但你知道：

1.  它应该返回一个 type 的值`'a -> 'a`，所以`'b`将在`('a -> 'a)`这里实例化

2.  第三个参数是 类型的`('a -> 'a) list`，所以`'c list`会在`('a -> 'a) list`这里：再次`'c`将被实例化为`('a -> 'a)`。

您可以得出结论，您将`List.fold_left`在专业类型上使用（是的，这是一口）

```
(('a -> 'a) -> ('a -> 'a) -> ('a -> 'a)) -> ('a -> 'a) -> ('a -> 'a) list -> ('a -> 'a) 
```

简而言之：如果管道必须返回一个函数并接受一个函数列表，那么`base`它本身必须是一个函数，并且`f`必须接受两个函数并返回一个函数。

应该是哪个功能`base`？如果是空列表，`base`则将返回，因此应该具有.`fs``base``pipe []`

应该如何`f a x`结合两个函数`a`和`x`，既是类型`'a -> 'a`，又是返回一个函数`'a -> 'a`？我会让你在这里想出一个答案。但是您希望拥有以下等式的直觉：

f (管道 [f1; f2]) f3 = 管道 [f1; f2; f3]

（它适用于任何列表，而不仅仅是`[f1; f2]`，但这个例子就足够了）。弄清楚 和 的含义之间的关系`pipe [f1; f2]`，`pipe [f1; f2; f3]`您将能够定义组合函数`f`。

请注意，您可以从以下不同的框架开始以*非常*`pipe`不同的方式编写函数：

 *```
let pipe fs x =
  let f a x = failwith "to be implemented" in
  let base = failwith "to be implemented" in
    List.fold_left f base fs 
```

在这种情况下，`pipe`接受两个参数，一个是 type `('a -> 'a) list`，另一个是 type `'a`，并且整个返回值应该是 type `'a`（一个值，而不是一个函数）。`f`接受一个函数 ( `'a -> 'a`) 和一个值 ( `'a`) 并返回一个值，并且`base`只是一个值（您可以选择哪个？）。

我相信第二种方法稍微简单一点，因为它不那么抽象，但是如果你的老师要求你使用第一个骨架，那可能是因为它会教你关于操作函数的知识，以及构建构建函数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:54:58.777

你可能想先回答这些问题：

*   编写一个仅使用基本情况的管道调用示例。
*   什么时候使用基本情况？
*   基本案例的类型是什么？
*   和的更好名称是什么`f`，即这些变量的作用是什么？`a``x`*

# grails - 嵌入式布尔值的 Grails 数据绑定

> ID：13083210
> 
> 赞同：3
> 
> 时间：2012-10-26T08:14:38.290
> 
> 标签：grails, grails-2.0

我对嵌入式类中的布尔值的自动数据绑定有疑问。我为此创建了一个示例：

域类：

```
class TestMe {

   TestEmbedded testEmbedded = new TestEmbedded()

   static embedded = ['testEmbedded']

   static constraints = {
   }
} 
```

嵌入式类：

```
class TestEmbedded {

   String stringEmbedded = "test"
   Boolean booleanEmbedded = false
} 
```

控制器：

```
class TestMeController {

    static scaffold = true
} 
```

脚手架编辑和创建可以正确渲染输入。当我创建或编辑即时，嵌入的属性工作正常。只有一个问题。当我尝试将 TestMe.testEmbedded.booleanEmbedded 从真值编辑为假值（使用复选框）（其他方式轮编辑工作！）时，数据绑定不起作用。它是grails的错误吗？有什么好的工作方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:00:41.750

我为此创建了一个 Grails 问题，因为它似乎是 Grails 的一个错误。

[http://jira.grails.org/browse/GRAILS-9664](http://jira.grails.org/browse/GRAILS-9664)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:35:07.473

通过在控制器中打印参数，确保该字段在设置为 false 时实际被传递。您必须在控制器中创建一个虚拟更新方法来测试它：

```
class TestController {

    static scaffold = true

    def update() {
        params.each {
            printing it
        }
    }
} 
```

标准 HTML 表单不会发送未选中的复选框；Grails 创建一个隐藏变量（始终发送），在复选框名称前带有下划线来处理此问题，如果您正在使用`g:checkBox`

如果表单未使用，`g:checkBox`您可以手动创建隐藏变量或使用控制器中的逻辑处理它。查看生成页面的来源可能会有所帮助。

希望这会有所帮助！

# php - 使用 CodeIgniter 错误地将默认值捕获到文本框中

> ID：13083213
> 
> 赞同：0
> 
> 时间：2012-10-26T08:15:06.217
> 
> 标签：php, codeigniter

我有问题将默认数据加载到控制器上的文本框中，但是当我使用时我提交表单验证。它仍然在我们加载默认数据的文本框中捕获相同的值。当错误验证时，我不想再次显示默认值。

怎么解决？

控制器中的代码

$data['defaultvalue'] ='你好'

```
 if($this->input->post('btntransfer')!=""){
   if ($this->form_validation->run() == FALSE){  

    }else{

    } 
```

代码视图：

```
<form method="post">
<input type="text"  id="txt1" name="txt1" value="<?php echo $defaultvalue?$defaultvalue:''; ?>"/>
<input type="submit" id="submit" name="submit" value="Transfer" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:03:04.847

如果我理解正确，如果验证失败，您希望将不同的 $defaultvalue 直接传递回您的表单：

```
if ($this->form_validation->run() == FALSE) {

     $data['defaultvalue'] = $this->input->post('txt1', TRUE);

} else {
 //something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:09:11.557

```
<?php 
if(isset($_POST[txt1])
{
    $defaultvalue=$_POST[txt1];
}
else
{
    $defaultvalue='';
}
?>

<input type="text"  id="txt1" name="txt1" value="<?php echo $defaultvalue; ?>"/>
<input type="submit" id="submit" name="submit" value="Transfer" /> 
```

# java - 为什么 Resteasy-mobile 中的 ClientResponseFailure 会导致 StackOverflowError？解决方法？

> ID：13083214
> 
> 赞同：1
> 
> 时间：2012-10-26T08:15:09.493
> 
> 标签：java, android, resteasy

我目前正在开发一个 Android 应用程序，该应用程序使用 Resteasy-mobile 进行 REST(JAXRS) 实现，并使用 Jackson 序列化到 JSON 和从 JSON 序列化。后者由 Resteasy 在后台完成。

服务器端我有一个 Jersey 网络服务，也使用 jackson 对 JSON 进行序列化。

Resteasy 客户端和 webresource 都实现了一个带有 JAXRS 注释的接口，如下所示：

```
 @Path("/equipment")
    @Consumes({"application/json"})
    @Produces({"application/json"})
    public interface AndroidEquipmentResourceIF
    {
      @GET 
      public Model getModel();

      @GET 
      @Path("/version") 
      public String getVersion();

      @GET 
      @Path("/{eId}") 
      public List<Equipment> getEquipmentListWithId(@PathParam("eId") String eId);
    } 
```

客户端，这个接口被加载到一个工厂中，并用这个接口返回一个对象，该对象处理调用方法时的HTTP/URL/序列化过程。

当调用具有无效 ID 的设备实体时，`WebApplicationException`如果未找到该实体，则服务器会抛出 a。客户端，这可能会导致该方法返回 null。

如果我想对状态码做一些事情，比如`404 - Not found`or `401 - Unauthorized`，我可能需要响应对象，对吗？我认为 Resteasy 和 Jersey 确实在后台使用 Response 对象，那么有没有办法使用 Resteasy 访问 Response 对象或状态代码？

EDIT1：忘了提到第二个选项。我注意到可以将对象包装在响应对象中。因此，如果我将所有特定的域对象返回类型替换为响应，并以某种方式将对象包装在响应中，我可以从响应对象中提取对象吗？这对我来说听起来不是很干净，只是为了能够看到状态码。此外，我想尽可能避免手动解析 JSON。

EDIT2：发现可以拦截`WebApplicationException`，Resteasy客户端抛出一个ClientResponseFailure异常，可以在拦截器中捕获。问题是，永远不会抛出异常？看起来它卡在某个地方的无限循环中。

我收到以下异常：

```
10-26 10:52:10.048: E/AndroidRuntime(282): Caused by: java.lang.StackOverflowError
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.util.regex.Matcher.reset(Matcher.java:151)
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.util.regex.Matcher.reset(Matcher.java:211)
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.util.regex.Matcher.<init>(Matcher.java:127)
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.util.regex.Pattern.split(Pattern.java:405)
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.util.regex.Pattern.split(Pattern.java:355)
10-26 10:52:10.048: E/AndroidRuntime(282):  at java.lang.String.split(String.java:2125)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.plugins.delegates.MediaTypeHeaderDelegate.parse(MediaTypeHeaderDelegate.java:33)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.plugins.delegates.MediaTypeHeaderDelegate.fromString(MediaTypeHeaderDelegate.java:18)
10-26 10:52:10.048: E/AndroidRuntime(282):  at javax.ws.rs.core.MediaType.valueOf(MediaType.java:173)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getMediaType(BaseClientResponse.java:362)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:346)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:319)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:442)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.copyFromError(BaseClientResponse.java:94)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.ClientResponseFailure.<init>(ClientResponseFailure.java:32)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:488)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:479)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:384)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:346)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:319)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:442)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.copyFromError(BaseClientResponse.java:94)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.ClientResponseFailure.<init>(ClientResponseFailure.java:32)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:488)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:479)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:384)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:346)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:319)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:442)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.core.BaseClientResponse.copyFromError(BaseClientResponse.java:94)
10-26 10:52:10.048: E/AndroidRuntime(282):  at org.jboss.resteasy.client.ClientResponseFailure.<init>(ClientResponseFailure.java:32) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:04:28.763

得到它的工作方式如下：

Resteasy-mobile 是 JBOSS Resteasy 2.2.1 GA 的精简版。为了在 Android 上运行，我们删除了很多东西。但是删除的有点太多了。

我发现如果`ClientResponseFailure`抛出 a ，它的实体将被转换为一个`Byte`数组，并将再次读取以复制到`ClientResponseFailure`. 问题是，修剪后的版本仅包含用于字符串和文本/纯文本的 Messagebody 读取器/写入器，而不包含字节数组。因此，当尝试读取实体时，它会尝试抛出一个新`ClientResponseFailure`的，因为无法找到`MessageBodyReader`与`Byte[]`. 然后它再次将此实体转换为字节数组，尝试再次读取它，从而进入一个无限循环，该循环将以`StackOverflowError`.

通过将未修剪版本的 Resteasy 中的缺失`ByteArrayProvider`和类添加到类路径（在和）中，（[链接](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/RESTEasy_Client_Framework.html#Client_error_handling)）就像一个魅力！`ReadFromStream``org.jboss.resteasy.plugins.providers.ByteArrayProvider``org.jboss.resteasy.util.ReadFromStream``ClientErrorInterceptor`

编辑：我说得太早了，还没有像魅力一样工作。ResteasyProviderFactory 也进行了修改以使其在 Android 中工作。.getInstance() 方法不断返回一个新实例，因此如果您使用以下方法注册 ClientErrorInterceptor：`ResteasyProviderFactory.getInstance().addClientErrorInterceptor(new DataExceptionInterceptor());`它不起作用。ProxyFactory 将在内部使用 ResteasyProviderFactory 的新实例。

要解决此问题，应将用于添加拦截器的 ResteasyProviderFactory 传递给`ProxyFactory.create()`.

像这样：

```
ResteasyProviderFactory pf;
BasicHttpParams params;

pf = ResteasyProviderFactory.getInstance();

pf.addClientErrorInterceptor(new DataExceptionInterceptor());

params = new BasicHttpParams();
HttpProtocolParams.setVersion(params,
                              HttpVersion.HTTP_1_1);
HttpProtocolParams.setContentCharset(params,
                                     HTTP.DEFAULT_CONTENT_CHARSET);
HttpProtocolParams.setUseExpectContinue(params,
                                        false);
return ProxyFactory.create(AndroidEquipmentResourceIF.class,
                           ProxyFactory.createUri(requestURI),
                           new ThreadSafeApacheHttpClient4Executor(params),
                           pf); 
```

# c++ - C++ 重载和选择正确的函数

> ID：13083220
> 
> 赞同：1
> 
> 时间：2012-10-26T08:15:35.380
> 
> 标签：c++

C++方法重载问题

我有 1 个父类调用 Vehicle

我有 2 个孩子班级叫摩托车和汽车

我有这个值调用 getNoOfWheels();

父类得到了那个方法，摩托车和汽车也得到了。

假设我提示用户输入

```
string vehicleType;
cout << "What is your vehicle type" << endl;
cin >> vehicleType; 
```

根据用户输入，我如何使程序根据 vehicleType 选择正确的功能，我知道如果 VehicleType== 可以使用，但这违背了重载的目的。

之前有人建议使用虚拟方法。在这种情况下

```
virtual int noOfVerticles() const { return 0; } 
```

对于形状.h

我对汽车和摩托车有相同的功能，但是我如何让 noOfVerticles 从基于 vehicleType 的子类中选择正确的功能

我试过这样的东西..

```
Vehicle cVehicle;
Car &rCar = &cVehicle;

if(inVehicle=="Car")
{
cout << rCar.noOfWheels() << endl;
} 
```

我得到一个错误说..

```
invalid initizliation of non-const refenrece of type "Car&" from an rvaleu of type Vehicle* 
```

和 ...

这是我在 Car.cpp 的虚拟功能

```
public:
virtual int noOfWheels() const { return 4; } 
```

**谢谢。！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:34:24.983

当你这样做

```
Car &rCar = &cVehicle; 
```

然后您声明`rCar`为*引用*，但您为其分配了一个*指针*。与号( `&`) 会根据使用的位置执行不同的操作。

使用时，`&cVehicle`它*是运算符的地址*，并返回一个指向`cVehicle`. 当在变量声明中使用时，它会告诉编译器该变量是一个引用。

* * *

至于你的问题，看来你做的有点不对。使用虚方法时，您不必检查对象的类型，编译器会为您处理它。

假设你有这个声明：

```
Vehicle *pVehicle = new Car; 
```

现在变量`pVehicle`是一个指向基类的指针，但是由于它被分配了一个指向子类的指针，所以虚函数无论如何都可以工作：

```
std::cout << "Number of wheels = " << pVehicle->noOfWheels() << '\n'; 
```

上面会打印出轮子的数量是 4，因为编译器会自动调用正确的函数。如果您稍后更改`pVehicle`为指向一个`Motorcycle`实例，并再次执行上述打印输出，它将正确显示 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:40:50.307

虚拟方法的重点是让您能够通过统一的方法调用来调用特定于类型的方法。

这在内存中是这样表示的（这不是实际的内存布局，只是为了更好的想象）：

```
[some class attribute]
[another class attribute]
[pointer to getNoOfWheels()]
[more class attributes] 
```

当您`noOfVerticles()`在程序中调用时，它会调用`[pointer to getNoOfWheels()]`指向的任何内容（这与“正常调用”相反，即调用 to `Vehicle::getNoOfWheels()`）。

当您创建以下实例时`Vehicle`：

```
[pointer to noOfVerticles] = Vehicle::getNoOfWheels() 
```

如果您创建`Car`或`Bike`将表示：

```
[pointer to noOfVerticles] = Car::getNoOfWheels()
[pointer to noOfVerticles] = Bike::getNoOfWheels() 
```

假设您具有以下类层次结构：

```
class Vehicle {
public:
    virtual int getNoOfWheels() const { return 0; } // Though this should be pure virtual method
}

class Car : public Vehicle {
public:
    virtual int getNoOfWheels() const { return 4; }
}

class Bike : public Vehicle {
public:
    virtual int getNoOfWheels() const { return 2; }
} 
```

所以突然间会发生这样的事情：

```
Vehicle *one = new Vehicle(),
        *two = new Car(),
        *three = new Bike();

one->getNoOfWheels(); // Vehicle::getNoOfWheels() - thus 0
two->getNoOfWheels(); // Car::getNoOfWheels() - thus 4
three->getNoOfWheels(); // Bike::getNoOfWheels() - thus 2

// And you still call original method of a vehicle in car:
two.Vehicle::getNoOfWheels(); // 0 
```

您现在唯一要做的就是为汽车分配正确的新实例，但这已经包含在[ForEverS 的答案](https://stackoverflow.com/a/13083280/1149736)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:50:01.020

尝试使用..

```
Vehicle *vehicle1= new Car(); 

Vehicle *vehicle2= new MotorBike(); 
```

您可以调用该函数`vehicle1->getNoOfWheels()`或`vehicle2->getNoOfWheels()`. 这将调用 Car 和 MotorBike 类的函数。仅当您在基类车辆中声明您作为虚拟功能时才会发生这种情况。

同样适用于参考变量。

# eclipse - 为 Eclipse 安装了 Subclipse - 如何检查它是否安装成功？

> ID：13083226
> 
> 赞同：0
> 
> 时间：2012-10-26T08:15:57.797
> 
> 标签：eclipse, subclipse

我为 Eclipse 安装了 Subclipse。如何检查它是否正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:04:19.153

除了查看已安装的插件外，我还建议您直接转到首选项。如果安装了插件，Team > SVN 下应该有一个条目。您还应该在可用客户端适配器列表的首选项页面上看到 JavaHL 和/或 SVNKit。您必须成功安装其中之一才能使 Subclipse 正常工作。它们都与 Subclipse 位于同一更新站点上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:21:24.023

检查您安装的插件列表。以下是如何做到这一点的参考：[http ://wiki.eclipse.org/FAQ_How_do_I_find_out_what_plug-ins_have_been_installed%3F](http://wiki.eclipse.org/FAQ_How_do_I_find_out_what_plug-ins_have_been_installed%3F)

# c++ - 使用 Lotus Notes API 加密笔记

> ID：13083227
> 
> 赞同：0
> 
> 时间：2012-10-26T08:16:01.183
> 
> 标签：c++, c, email, encryption, lotus-notes

我为 Lotus Notes 编写了一个简单的邮件客户端，并尝试加密消息。根据 C++ API 帮助，我的方法如下：

```
LNMailMessage msg;
session.CreateMailMessage(&msg);     // Create new message
msg.Open();                          // Open message for editing

msg.SetRecipients(<myself>);         // Set recipients
msg.SetSubject("Encryption test");   // Set subject

if (msg.HasItem("Body"))             // Delete default body
    msg.DeleteItem("Body");

LNText body;                         // Create encrypted body field
body.SetValue("Encrypted text");
msg.CreateItem("Body", body, LNITEMFLAGS_ENCRYPT);

msg.Encrypt();                       // Encrypt message
msg.Send();                          // Send message 
```

现在我有一个问题，Encrypt() 方法抛出一个异常，由于未打开的数据库，消息无法加密：

> 由于未打开的数据库无法执行操作

当我尝试签署消息时，会出现相同的错误消息。有谁知道，我做错了什么？是指哪个数据库？欢迎提出任何建议，包括 C API。也许这给出了一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T03:44:26.890

**更新的答案**

鉴于评论中交换的信息...

您可以尝试将名为“Encrypt”的文本项设置为值“1”，而不是使用 msg.encrypt()。这是一种替代机制，用于指示 Send() 方法在发送电子邮件时对其进行加密。LotusScript/COM/Java API for Notes 中的 EncryptOnSend 属性实际上只是设置此项的快捷方式。我相信加密仍然发生在客户端，但值得尝试将其作为一种解决方法。

即，LNMailMessage 继承自 LNDocument，因此 EncryptOnSend 的等价物是将 msg 转换为 LNDocument 类，然后使用 LNDocument::CreateItem 创建一个名为“Encrypt”且值为“1”的文本项。

**原始答案**

我假设您在安装了 Notes 客户端并配置了您希望用于发送者和签名的 ID 文件的机器上运行代码。（仅仅完成安装是不够的，即使它为您提供了所需的所有 DLL。您还需要完成客户端设置。）

我会检查客户端当前位置文档中的邮件文件位置、邮件文件、主服务器和（可选）目录服务器设置，并确保它们都设置正确。

我还会检查您是否可以在客户端上打开邮件文件并手动发送签名和加密的消息。

如果您的代码在服务器上运行，您应该检查服务器文档中“基本”选项卡底部的“服务器位置信息”部分。

# c# - 运行一个存储过程时返回异常

> ID：13083229
> 
> 赞同：2
> 
> 时间：2012-10-26T08:16:07.860
> 
> 标签：c#, sql-server

我有这个存储过程

```
create PROCEDURE spgetoutpatientidbyinpatientid
@pinpatientid int
AS

BEGIN

select  Patient_ID 
    from tblPatientAdmissionDetails 
    where ID=@pinpatientid and Status=1
END
GO 
```

如果这种情况是错误的，我得到空异常。我想返回至少空值或任何东西。我怎样才能避免这个错误。在我的代码中我使用

```
<pre lang="c#">string  ds = UserDataBase.ExecuteScalar(Command).ToString();</pre> 
```

如何更改我的 sql 查询..？或者我怎样才能避免这个异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:19:37.253

`return -1`如果没有记录您的情况，像这样更新您的程序可能会对您有所帮助。

```
create PROCEDURE spgetoutpatientidbyinpatientid
@pinpatientid int
AS

BEGIN

  if exists( select  Patient_ID from tblPatientAdmissionDetails 
       where ID=@pinpatientid and Status=1) 
  begin
      select  Patient_ID from tblPatientAdmissionDetails 
       where ID=@pinpatientid and Status=1)
  end
  else 
  begin
      select -1 
  end
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:21:30.850

一种方法：

```
declare @bogus_int int, @result int
set @bogus_int = -1000

select @result = Patient_ID 
from tblPatientAdmissionDetails 
where ID=@pinpatientid and Status=1

select coalesce( @result, @bogus_int ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:22:47.170

来自 C#

```
string ds = "";
object val = UserDataBase.ExecuteScalar(Command);
if(val != null)
   ds = val.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:51:45.247

在 SP 级别，不返回任何行并不是真正的错误；我建议*不要*在这里更改 SP。那么，真的，这取决于你如何称呼它，并检查无行、空和数据。

您*可以*通过命令执行此操作，但它有点混乱。我的偏好是简化；例如，使用[dapper](http://nuget.org/packages/Dapper)调用现有的存储过程：

```
int id = 123;
var activePatient = connection.Query<int>(
    "spgetoutpatientidbyinpatientid", // command
    new { pinpatientid = id }, // parameters
    commandType: CommandType.StoredProcedure).Single(); 
```

`connection`任何常规的 ADO.NET 连接（`SqlConnection`等）在哪里。如果有零个或多个匹配项，则使用 LINQ`Single()`将自动引发异常。否则，`activePatient`将包含返回的列。请注意，您可以`<int>`在此处替换`<Patient>`为使其填充整个对象模型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T08:27:15.533

```
string  ds = String.Format("{0}", UserDataBase.ExecuteScalar(Command)); 
```

# javascript - SyntaxError：JSON.parse：来自输入值的预期属性名称或“}”

> ID：13083230
> 
> 赞同：1
> 
> 时间：2012-10-26T08:16:11.640
> 
> 标签：javascript, jquery, json

我有一个隐藏的输入字段，例如

```
<input type="hidden" name="product-data" value="{Product: 'Premium', Code: 'ER412', SalesCode: 'SC415', Description: 'Premium Product Details'}" /> 
```

单击按钮时，我试图将此值转换为 JSON 对象，但出现错误。这是我的js代码

```
$('.icon-edit').live('click', function(){

        var data = $(this).parent().siblings('input').val();
        data = jQuery.parseJSON(data); // <--- Here I am getting error
        //do something with data

    }); 
```

错误：

```
SyntaxError: JSON.parse: expected property name or '}' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:18:16.053

JSON 属性名称是字符串，JSON 字符串由`"`字符分隔。

您的属性名称是标识符，在您有字符串值的地方，您用`'`. 这对于 JavaScript 对象字面量很好，但不适用于 JSON。

```
<input 
    type="hidden" 
    name="product-data" 
    value="{&quot;Product&quot;: &quot;Premium&quot;, &quot;Code&quot;: &quot;ER412&quot;, &quot;SalesCode&quot;: &quot;SC415&quot;, &quot;Description&quot;: &quot;Premium Product Details&quot;}" 
/> 
```

（您也可以在 HTML 属性值中使用`'`和使用文字`"`s 来分隔它）

# wcf - wcf 并发模式=多个

> ID：13083231
> 
> 赞同：0
> 
> 时间：2012-10-26T08:16:13.913
> 
> 标签：wcf, session, concurrency

我是 WCF 中状态/并发管理的初学者。假设我有一个如下服务类：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
        public class Service1 : IService1
        {
            private int _myCounter;
            private MyType _myType;
            private static MyType _myTypeStatic;
            private static Dictionary<string,string> _d = new Dictionary<string,string>();

            public void Method1()
            {
                // logic to set _myType
                // logic to set _myCounter

                // logic to set _myTypeStatic
                // logic to set _d

            }
            public void Method2()
            {
                // logic to save _myType, set in Method1() to db
                // logic to save _myCounter, set in Method1() to db

                // logic to save _myTypeStatic, set in Method1() to db
                // logic to save _d, set in Method1() to db    
            }
        } 
```

如果 2 个客户端连接同时使用此服务，它们将在 2 个不同的线程上运行。由于只有服务实例，在这种情况下 2 个全局类级别变量的状态将如何变化？它如何用于静态变量和类型？这 2 个线程是否有可能拥有 2 个不同的变量数据副本，但仍使用一个服务实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:23:18.233

也许定义一个类或结构来存储变量集，然后简单地在方法中传递它？

```
public class Storage
{
    public Storage(int myCounter, MyType myType)
    {
        _myCounter = myCounter;
        _myType = myType;
    }
    public int _myCounter;
    public MyType _myType;
}

...

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class Service1 : IService1
{
    public void Method1(Storage st)
    {
        // logic to set _myType
        // logic to set _myCounter
    }
    public void Method2(Storage st)
    {
        // logic to save _myType, set in Method1() to db
        // logic to save _myCounter, set in Method1() to db
    }
} 
```

通过这种方式，Service1 可以处理它不直接连接到的数据——然而，每个调用者都必须“照顾”它的数据，例如在某处保存 Storage st。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:33:02.770

首先，所有变量都应该是线程安全的关键部分。即使您没有设置 InstanceContextMode.Single，静态变量也将在所有实例之间共享。类变量将为进入该实例的所有线程共享。ConcurrencyMode.Multiple 表示可以进入多个线程。此外，即使您应用了关键部分，那么您使用的逻辑也将不起作用。如果然后线程设置数据并返回释放临界区。在它尝试进行另一个调用以保存数据之前，另一个线程可以覆盖数据。这意味着您需要在一次操作中存储数据。或者您想将数据设置一段时间然后将其存储，那么您可以将数据存储在哈希表中。就像在方法1中一样，使用关键部分来设置数据，并放置一个唯一的密钥来为客户端 ID 等数据设置密钥，如果客户端不知道，则将密钥返回给客户端。然后在方法 2 中，客户端将传递密钥。使用密钥访问哈希表并使用客户端检索数据并保存。

# php - win7x64下带apc的magento

> ID：13083232
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:16:21.610
> 
> 标签：php, apache, magento, xampp, apc

我想在 windows 下使用 apc 加速 magento 我正在使用 xampp 3.1.0 并从 [http://www.dragffy.com/php-extensions](http://www.dragffy.com/php-extensions)下载了一个预编译的 apc （PHP Alternative PHP Cache APC 3.1.13 built against PHP 5.4 .7 x86 VC9) 并将其添加到 php.ini

我正在运行win7 x64。

当我打开包含的 apc.php 时，它会显示一些 apc 统计信息。

但是当我打开我的magento时，apache崩溃了

```
 Problemsignatur:
  Problemereignisname:  APPCRASH
  Anwendungsname:   httpd.exe
  Anwendungsversion:    2.4.3.0
  Anwendungszeitstempel:    502f70a3
  Fehlermodulname:  php5ts.dll
  Fehlermodulversion:   5.4.7.0
  Fehlermodulzeitstempel:   505114f8
  Ausnahmecode: c0000005
  Ausnahmeoffset:   000356c1
  Betriebsystemversion: 6.1.7601.2.1.0.256.48
  Gebietsschema-ID: 1031
  Zusatzinformation 1:  0a9e
  Zusatzinformation 2:  0a9e372d3b4ad19135b953a78882e789
  Zusatzinformation 3:  0a9e
  Zusatzinformation 4:  0a9e372d3b4ad19135b953a78882e789

Lesen Sie unsere Datenschutzbestimmungen online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0407

Wenn die Onlinedatenschutzbestimmungen nicht verfügbar sind, lesen Sie unsere Datenschutzbestimmungen offline:
  C:\Windows\system32\de-DE\erofflps.txt 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:22:27.373

取自[Magento 的官方系统要求页面](http://www.magentocommerce.com/system-requirements)：

> 支持的操作系统：Linux x86、x86-64

我知道这并不能解决问题，老实说，如果我因此而受到负面声誉，我不在乎，但你最好（相信我！）切换到基于 *nix 的操作系统。

# android - 日历 getTimeInMillis() 与时区有关吗？

> ID：13083243
> 
> 赞同：7
> 
> 时间：2012-10-26T08:17:26.263
> 
> 标签：android, calendar, timezone, gettime

[Java：时区为什么不同的时区以毫秒为单位给出相同的值](https://stackoverflow.com/questions/9867254/java-timezone-why-different-timezone-give-same-value-in-millisec)

参考上面的链接，我假设 Calendar 类的 getTimeInMillis() 返回独立于时区的毫秒数。

但使用以下代码：

```
 Calendar cal = Calendar.getInstance();
 int dateInSeconds = (int)(cal.getTimeInMillis()/1000);
 Log.i("TIME IN SECONDS: ",""+dateInSeconds); 
```

起初，尝试将我的系统时钟设置为 10:00 和 GMT+02:00

产生一定的输出数。但是将系统时钟设置为 10:00 和 GMT+00:00

输出数量比前一种情况大约多 7200，相当于大约 2 小时。

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T16:42:18.800

为了获得独立于时区的毫秒数，我找到了以下解决方案

代替：

```
 int dateInSeconds = (int)(cal.getTimeInMillis()/1000); 
```

我用：

```
 int dateInSeconds = (int)((cal.getTimeInMillis()+cal.getTimeZone().getOffset(cal.getTimeInMillis()))/1000); 
```

它对我有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-25T11:53:11.200

你弄错了。`getTimeInMillis()` **将为**您提供独立于时区的时间。如果您更改计算机时钟上的时区，但仍保持相同的显示时间，您实际上更改了与时区无关的时间。因此，您不应该**使用**您提供的代码，也不应该让其他任何人阅读本文。

# javascript - 如何使用 href 和 onclick 函数传递参数

> ID：13083245
> 
> 赞同：6
> 
> 时间：2012-10-26T08:17:28.423
> 
> 标签：javascript, jquery

我想在单击时传递参数`<a href>`，首先我有这个并且工作正常：

```
 <a href="#" rel="like{{num}}"> I like </a>|

   $("a[rel^='like']").click(function(){
            $.ajax({
                ...
            }); 
```

但我不知道如何将参数传递给该函数，所以我这样做：

```
 <a href="#" rel="like{{num}}"
          onclick="cap(para1, para2)"> I like </a> 
```

最后，在我的 Javascript 中，我有这个简单的功能：

```
 function cap(para1, para2){
        alert('here');
    } 
```

但我收到此错误：

```
ReferenceError: cap is not defined 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:20:13.790

一个解决方案是使用[数据属性](http://html5doctor.com/html5-custom-data-attributes/)：

```
<a href="#" rel="like{{num}}" data-para1="Oh"  data-para2="{{somepara}}"> I like </a>

<script>
function cap(para1, para2){
    alert('here');
}
$("a[rel^='like']").click(function(){
   var para1 = this.dataset['para1'];
   var para2 = this.dataset['para2'];
   cap(para1, para2);
});
</script> 
```

如果你喜欢更结构化的方法，你也可以这样写：

```
<a href="#" rel="like{{num}}" data-params="{'para1':'Oh','para2':'{{somepara}}'}"> I like </a>

$("a[rel^='like']").click(function(){
   var params = this.dataset['params'];
   var para1 = params.para1;
   var para2 = params.para2; 
```

请注意，如果文档不是 HTML5 文档，您将不得不使用更兼容[的 jQuery 数据功能](http://api.jquery.com/jQuery.data/)（但现在几乎没有理由不使用 HTML5 doctype）：

```
var para1 = this.data('para1'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T08:24:09.760

你可能想试试这个。

```
<a class="ilike" href="javascript:;" data-p1="abc" data-p2="123"> I like </a>

<script>
    function cap(para1, para2){
        alert('here');
    }

    $(function(){
        $('.ilike').click(function(){
            var $this = $(this);
            var p1 = $this.data('p1');
            var p2 = $this.data('p2');
            cap(p1, p2);
        });
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:24:13.383

如果您想通过 onclick 执行此操作，则可能是 1）您在错误的范围内声明了您的函数，或者 2）在函数声明之前发生了另一个 JS 错误并导致它无法执行。

要解决范围问题，您可以尝试做`window.cap = function(para1, para2) { ...`

要查看是否有任何错误，请尝试使用 firebug 或任何浏览器开发工具，并在控制台下检查错误。

# virtuemart - 美德玛特的运费页面

> ID：13083252
> 
> 赞同：0
> 
> 时间：2012-10-26T08:18:04.273
> 
> 标签：virtuemart

我的运费页面模板是：

```
<span class="vmshipment"><span class="vmshipment_name">Kurier K-EX</span><span class="vmshipment_description">paczka do 30kg</span><span class="vmshipment_cost"> (-15,00 zł)</span></span> 
```

看起来像这样：

**Kurier K-EXpaczka 做 30kg (-15,00 zł)**

我希望它看起来像这样：

**Kurier K-EXpaczka 做 30kg -15,00 zł**

没有 （）

我在 select_shipment.php 文件中找不到它。我应该在哪里寻找它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:32:57.027

**找到了：**

在管理员/组件/com_virtuemart/plugins/vmpsplugin.php 更改：

```
$costDisplay = '<span class="' . $this->_type . '_cost"> (' . JText::_ ('COM_VIRTUEMART_PLUGIN_COST_DISPLAY') . $costDisplay . ")</span>"; 
```

至

```
$costDisplay = '<span class="' . $this->_type . '_cost"> ' . JText::_ ('COM_VIRTUEMART_PLUGIN_COST_DISPLAY') . $costDisplay . "</span>"; 
```

# php - 如何通过 htaccess 重写这种类型的 url？

> ID：13083255
> 
> 赞同：0
> 
> 时间：2012-10-26T08:18:14.073
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有这个重写规则。

```
RewriteRule ^news/([0-9]+))/? /index.php?show=news&id=$1 
```

现在我需要在 url 的末尾添加一些 GET 数据（合作伙伴）。Fe /news/1/?partner=some_partner

我试过这个

```
RewriteRule ^news/([0-9]+))/(.*)*? /index.php$2&show=news&id=$1 
```

因为我正在收集合作伙伴数据

```
if (isset($_GET['partner'])) addPartnerStat($_GET['partner']); 
```

我需要这个网址的视图/news/1/?partner=some_partner，而不是/news/1/partner/some_partner

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:39:42.737

为什么不使用 QSA 标志？

```
 RewriteRule ^news/([0-9]+))/? /index.php?show=news&id=$1 [QSA,L] 
```

有关您在此处获得的标志的更多信息[http://httpd.apache.org/docs/2.2/rewrite/flags.html](http://httpd.apache.org/docs/2.2/rewrite/flags.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:26:57.920

这可能有效：

```
RewriteRule ^news/([0-9]+))/partner/(.*)$ /index.php$2&show=news&id=$1&partner=$2 
```

# javascript - 在带有 Spring MVC 的 javascript 文件中使用 EL 变量

> ID：13083268
> 
> 赞同：3
> 
> 时间：2012-10-26T08:19:18.457
> 
> 标签：javascript, spring-mvc, el

我使用 Spring Mvc，我想在javascript 文件中使用 EL 变量（例如`${pageContext.request.contextPath}`） 。`.js`

这可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:30:08.423

实现此目的的另一种常见方法是在标签内的调用 JSP 页面中声明您的 JSTL 值（例如 contextPath），方法`<script>`是将它们添加到全局 JS 对象、变量或初始化函数。然后，您可以在由原始 JSP 页面调用的外部 JS 文件中引用这些值。

请参阅：[此答案“在 JSP 标记中使用 JavaScript”](https://stackoverflow.com/a/229776/249327)

虽然它有点粗糙，但如果您使用诸如[JAWR 之](http://jawr.java.net/)类的工具，它可能是唯一的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:22:50.577

您可以制作一个包含 JS 的模板，并将 contextPath 作为插入模板的变量传递。

```
@RequestMapping(value="path/to/handler", method = RequestMethod.GET, produces ="text/javascript")
public ModelAndView getJs(HttpServletRequest request) {
  String contextPath = request.getContextPath();
  return new ModelAndView("/path/to/js/", "contextPath", contextPath);
} 
```

~~但是为什么你需要这样做呢？上下文路径在客户端也可用~~

编辑：

为此，您可能必须设置一个[ViewResolver](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/view.html)以便处理模板（如果您还没有）。

在页面中，您只需像往常一样包含脚本：

```
<script type="text/javascript" src="path/to/handler" /> 
```

# c# - 如果泛型中的 T 为空怎么办？如何省略尖括号

> ID：13083272
> 
> 赞同：7
> 
> 时间：2012-10-26T08:19:32.230
> 
> 标签：c#, generics, void

我有一个这种类型的类：

```
class A<TResult>
{
     public TResult foo();
} 
```

但有时我需要把这个类当作一个非泛型类来使用，即类型`TResult`是`void`.
我无法通过以下方式实例化该类：

```
var a = new A<void>(); 
```

另外，我宁愿不指定省略尖括号的类型：

```
var a = new A(); 
```

我不想重写整个课程，因为它做同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T08:23:30.820

`void`不是 C# 中的真实类型，即使 FCL 中有相应的结构`System.Void`。恐怕您需要像这样的非通用版本：

```
class A
{
   //non generic implementation
}

class A<T> : A
{
   //generic implementation 
} 
```

您可以在 FCL 中看到`System.Action`/ `System.Action<T>`，而不是`System.Action<void>`，以及`Task`代替`Task<void>`。

**从[CLI 规范（ECMA-335）](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)**编辑**：**

 **> 以下类型的类型不能用作（泛型类型或方法的）实例化中的参数：
> 
> Byref 类型（例如，System.Generic.Collection.List`1<string&> 无效）
> 
> 包含可以指向 CIL 评估堆栈的字段的值类型（例如，List<System.RuntimeArgumentHandle>）
> 
> void（例如，List<System.Void> 无效）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T08:34:51.910

正如我在评论中发布的那样，您可以通过从泛型类继承来使其看起来不错：

```
class A:A<object>
{
} 
```

这显然隐藏了泛型参数，但请注意，根据我的经验，这是继承类的错误方式，每次我这样做时，我都会后悔，而我的类变得更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:36:00.387

void 根本不是 C# 中的类型，因此您不能将其作为类型参数。但尽管如此，有时您想要一个功能，就好像它是一个功能一样。

In this kind of case, you may make use of a simple replacement type, most likely a very small sruct, such as [System.Reactive.Unit](http://msdn.microsoft.com/en-us/library/system.reactive.unit%28v=VS.103%29.aspx) used in Reactive Extensions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T15:43:08.657

Another Option (which seems to be what falanwe was getting at) is to use the NullObject Design Pattern. [http://sourcemaking.com/design_patterns/null_object](http://sourcemaking.com/design_patterns/null_object)**

# android - 通过代理连接到 spotify ap，找不到主机，错误 4

> ID：13083274
> 
> 赞同：2
> 
> 时间：2012-10-26T08:19:41.927
> 
> 标签：android, android-ndk, spotify

我尝试使用他们的 spotify android lib 从 android 手机连接到 spotify。使用手机的 wifi 连接。

日志：

```
13:56:20.389 I [ap:1750] Connecting to AP ap.spotify.com:443 via proxy http://�:80
13:56:41.753 E [ap:1694] AP Socket Error: Host not found (20001)
13:56:41.753 E [ap:3915] Connection error:  4 
```

任何想法，谢谢。

参考：

[https://getsatisfaction.com/spotify/topics/no_internet_connection_detected_error_code_4](https://getsatisfaction.com/spotify/topics/no_internet_connection_detected_error_code_4) [http://www.dummies.com/how-to/content/decode-spotify-error-messages-and-codes.html](http://www.dummies.com/how-to/content/decode-spotify-error-messages-and-codes.html) [“登录”回调从未被调用Android 上的 libspotify](https://stackoverflow.com/questions/11880182/logged-in-callback-never-called-by-libspotify-on-android)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:28:43.553

我有一种强烈的感觉，您在连接到服务之前没有清除变量。`memset`在初始化它们之前，您需要所有结构；如果有未初始化的字段，它们可能会被“垃圾”填充（即，分配对象时内存内容中的任何内容）并导致 libspotify 错误地认为您已为服务设置了代理。

# mysql - 使用 Hibernate 和注释将两个表与中间表连接起来

> ID：13083279
> 
> 赞同：1
> 
> 时间：2012-10-26T08:20:05.490
> 
> 标签：mysql, spring, hibernate

## 我需要连接 3 个表。

我的第一个项目是我自己制作数据库，同时学习一个新的框架，这可能有点令人困惑，因为当涉及到数据库时，我并不是那么好。

我正在使用 Spring 3.1.0.RELEASE 和 Hibernate 3.6.8.Final

我将在这里命名最重要的属性，以大致了解我在这里想要实现的目标。

> **库存**（id、ItemName...）
> 
> **Line_Items**（WORKSHOP_ORDERS_Id、INVENTORY_Id、数量）
> 
> **Workshop_Order** (Id, WorkshopService, WorkshopNotes...)

这样，我希望每个订单有多个商品，计划为每个订单中的每个不同产品保留一个 Line_Items，并通过 FK 将其链接到正确的订单。

我用我的注释尝试了不同的东西，我的 persistence.xml 工作，这是我的代码中唯一有任何问题的地方。我 100% 不知道如何将这种关系与注释映射，所以我将在这里发布我的代码，即使它离任何有用的地方都不远（但我可能会得到一些指示）。

```
import java.io.Serializable;

import javax.persistence.*;

@Entity
@Table(name = "LINE_ITEMS")
public class LineItems implements Serializable {

private static final long serialVersionUID = 2414994088922470197L;

public Long workshopOrderId;
public Long inventoryId;
public int quantity;

public Workshop workshop;
public Inventory inventory;

@OneToMany(mappedBy = "workshop",cascade = CascadeType.ALL)
@JoinColumn(name="WORKSHOP_ORDERS_Id", insertable = false, updatable = false, nullable = false)
public Workshop getWorkshop() {
    return workshop;
}

@OneToMany(mappedBy = "inventory", cascade = CascadeType.ALL)
@JoinColumn(name="INVENTORY_Id", insertable = false, updatable = false, nullable = false)
public Inventory getInventory() {
    return inventory;
}

public void setWorkshop(Workshop workshop) {
    this.workshop = workshop;
}

public void setInventory(Inventory inventory) {
    this.inventory = inventory;
}

@Id
@Column(name = "WORKSHOP_ORDERS_Id")
public Long getWorkshopOrderId() {
    return workshopOrderId;
}

@Id
@Column(name = "INVENTORY_Id")
public Long getInventoryId() {
    return inventoryId;
}

@Column(name = "Quantity")
public int getQuantity() {
    return quantity;
}   

public void setWorkshopOrderId(Long workshopOrderId) {
    this.workshopOrderId = workshopOrderId;
}

public void setInventoryId(Long inventoryId) {
    this.inventoryId = inventoryId;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
} 
```

}

我听说过一些关于 Hibernate 中的错误的讨论，但不确定这是否与我的问题有关。

基本上我需要的不是问题的完整解决方案，而是我在做什么以及我应该做什么来纠正它的一些想法。我希望在智能数据库设计方面得到一些帮助（关于我展示的表格，以及在 Hibernate 中执行此操作的正确方法）。

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:57:40.793

根据您在下面给出的表格描述是关系。

```
Assumtpions:
- Many line_item is connected to one WorkshopOrder
- Many Line_items can be connected to same inventory

Line_Items (WORKSHOP_ORDERS_Id, INVENTORY_Id, Quantity)
                   |               |
                   |            ManyToOne
                 ManyToOne          |
                   |             Inventory (id, ItemName...)
                   |
                  Workshop_Order (Id, WorkshopService, WorkshopNotes...) 
```

目前在您的实体中，您使用的是 OneToMany，但一对多意味着一件商品可以有多个订单，因此订单将成为收藏品。所以这似乎不对。

编辑：根据评论编辑项目和研讨会与 MANYTOONE 而不是 ONETOONE 之间的关系。

```
LineItems.java

  @ManyToOne
  WorkshopOrder w;

  @ManyToOne
  Inventory i;

WorkshopOrder.java

  @OneToMany
   List<LineItems> items;

Inventory.java

  @OneTOMany
   List<LineItems> items; 
```

# android - 即使在 Android textView 中的 Ellipsize 之后出现图像跨度

> ID：13083287
> 
> 赞同：15
> 
> 时间：2012-10-26T08:20:44.693
> 
> 标签：android

我有一个`Text View`图像跨度内容。我已经`ellipsize = "end"`为`Text View`. 在 ellipsize 之后，图像跨度出现在它之后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-05T07:24:10.780

使用 iosched 的[EllipsizedTextView](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/ui/widget/EllipsizedTextView.java)类。在视图使用方法中设置文本

```
setText(CharSequence text, BufferType type) 
```

对于 Spannable，您可以使用

```
textView.setText(text, TextView.BufferType.SPANNABLE); 
```

同样在您的 xml 文件中，您将需要定义`android:ellipsize`，`android:maxLines`或者您也可以以编程方式设置它们。

把代码放在这里试试。代码已修改，取自[this](https://stackoverflow.com/questions/28892115/android-imagespan-image-is-cut-error-in-singleline-textview) question

```
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.text.Editable;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.TextUtils;
import android.text.TextWatcher;
import android.text.style.ImageSpan;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class MainActivity extends AppCompatActivity {

    private EditText editText;
    private Button button;
    private EllipsizedTextView textView;

    private static final String PATTERN = "\\[\\w+?\\]";
    private Pattern pattern;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        editText = (EditText) findViewById(R.id.edittext);
        button = (Button) findViewById(R.id.btn);
        textView = (EllipsizedTextView) findViewById(R.id.text);
        //programmatic way of setting max lines and ellipsize
        textView.setMaxLines(2);
        textView.setEllipsize(TextUtils.TruncateAt.END);

        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                insertImageSpan();
            }
        });

        pattern = Pattern.compile(PATTERN);

        editText.addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }

            @Override
            public void afterTextChanged(Editable s) {
                textView.setText(s, TextView.BufferType.SPANNABLE);
            }
        });
    }

    private void insertImageSpan(){
        insertTextInCurrentPosition(editText,"[face]");
        int select = editText.getSelectionStart();
        editText.setText(spanText(editText.getText()));
        editText.setSelection(select);
    }

    public CharSequence spanText(CharSequence text) {
        SpannableStringBuilder t = null;
        if(text instanceof SpannableStringBuilder){
            t = (SpannableStringBuilder) text;
        }else{
            t = new SpannableStringBuilder(text);
        }
        Matcher m = pattern.matcher(text);
        while (m.find()) {
            String mResult = m.group();
            String key = mResult.substring(1, mResult.length() - 1);

            ImageSpan[] spans = t.getSpans(m.start(),m.end(),ImageSpan.class);
            if(spans== null || spans.length==0 ){
                try{
                    ImageSpan span = new ImageSpan(this , R.drawable.ic_launcher);
                    t.setSpan(span , m.start() , m.end() , Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                }catch (Exception e){
                    continue;
                }
            }

        }
        return t;
    }

    public static void insertTextInCurrentPosition(EditText tv, CharSequence str) {
        if (tv == null || TextUtils.isEmpty(str)) return;
        tv.getText().replace(tv.getSelectionStart() , tv.getSelectionEnd() , str , 0 , str.length());
    }
} 
```

和 EllipsizedTextView

```
import android.content.Context;
import android.content.res.TypedArray;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.widget.TextView;

/**
 * A simple {@link TextView} subclass that uses {@link TextUtils#ellipsize(CharSequence,
 * android.text.TextPaint, float, android.text.TextUtils.TruncateAt, boolean,
 * android.text.TextUtils.EllipsizeCallback)} to truncate the displayed text. Th
 */
public class EllipsizedTextView extends TextView {
    private static final int MAX_ELLIPSIZE_LINES = 100;

    private int mMaxLines;

    public EllipsizedTextView(Context context) {
        this(context, null, 0);
    }

    public EllipsizedTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public EllipsizedTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        // Attribute initialization
        final TypedArray a = context.obtainStyledAttributes(attrs, new int[]{
                android.R.attr.maxLines
        }, defStyle, 0);

        mMaxLines = a.getInteger(0, 1);
        a.recycle();
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        CharSequence newText = getWidth() == 0 || mMaxLines > MAX_ELLIPSIZE_LINES ? text :
                TextUtils.ellipsize(text, getPaint(), getWidth() * mMaxLines,
                        TextUtils.TruncateAt.END, false, null);
        super.setText(newText, type);
    }

    @Override
    protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
        super.onSizeChanged(width, height, oldWidth, oldHeight);
        if (width > 0 && oldWidth != width) {
            setText(getText());
        }
    }

    @Override
    public void setMaxLines(int maxlines) {
        super.setMaxLines(maxlines);
        mMaxLines = maxlines;
    }
} 
```

和activity_main

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="16dp"
    android:paddingBottom="16dp">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <EditText
            android:id="@+id/edittext"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <Button
            android:id="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/edittext" />

        <com.anirudha.experiment.EllipsizedTextView
            android:id="@+id/text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ellipsize="end"
            android:maxLines="2"
            android:singleLine="false"/>
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-31T13:40:18.390

你应该重写 SpannedEllipsizer，你可以在这里找到完美的分辨率： [https://github.com/lsjwzh/FastTextView/blob/master/widget.FastTextView/src/main/java/com/lsjwzh/widget/text/FastTextView.java](https://github.com/lsjwzh/FastTextView/blob/master/widget.FastTextView/src/main/java/com/lsjwzh/widget/text/FastTextView.java)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-04-04T20:16:42.783

尝试这个：

```
android:ellipsize="end"

android:singleLine="true" 
```

# ipad - 无法使用 iTunes 在我的 ipad 上安装应用程序，该应用程序是使用不同的 Apple ID 购买的

> ID：13083288
> 
> 赞同：0
> 
> 时间：2012-10-26T08:20:48.530
> 
> 标签：ipad, app-store, itunes

我问的问题可能是一个基本的问题，但我真的需要更多信息，因为它对我有很大帮助。

我开发了一个应用程序（1.0 版）并将其放在 appstore 上。最近我上传了一个新版本（1.1）并获得了批准。当我的用户在他的设备上更新他的应用程序时，他遇到了崩溃。

我的用户备份了他使用他的苹果 ID 购买的 ipa。他向我发送了该应用程序的两个版本。希望如果我将它们安装在我的 ipad 上，我可以在我的设备上找到崩溃报告，我尝试安装 1.0我的 ipad 但 iTunes 给我一个错误

错误：**应用程序“xxx”未安装在 ipad“My pad”上，因为您没有在此计算机上对其进行授权。**

查询：我不能通过我的apple id和密码授权在别人购买的ipad上安装应用程序吗？

我应该怎么做才能在我的 ipad 上安装该应用程序。我不确定用户是否希望与我分享他的苹果 ID 凭据。

请帮忙。

提前 Tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:29:20.210

您必须使用最初购买该应用程序时使用的同一 Apple ID 授权从 iOS App Store 下载的任何应用程序。应用程序的某些部分可能会使用与该特定 Apple ID 相关联的密钥进行加密，因此如果没有该 iTunes 帐户授权和登录，该应用程序将毫无用处。

相反，请从源代码存储库中检查您的 1.0 和 1.1 版本，然后为自己重新构建应用程序的 2 个版本以进行 Ad Hoc 分发。如果您使用相同的 SDK 和构建设置，这些应用程序应该与您提交给 Apple 的应用程序相同。然后使用 iTunes 或 OTA 在您的测试设备上按顺序安装它们。或者，如果您在提交之前存档了应用版本，请使用这些版本。

# jenkins - 传递参数字符串UPTO jenkins

> ID：13083289
> 
> 赞同：0
> 
> 时间：2012-10-26T08:20:51.023
> 
> 标签：jenkins, jenkins-plugins

我正在寻找如何将字符串传递给詹金斯，以便在发送邮件时使用它。

所以假设我有一个里面有一个字符串的文件，我想在成功完成后发送电子邮件时读取该文件并在 jenkins 中使用它 - 这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:47:08.770

如果要寻找一个简单的字符串来传递，比如单行，
最简单的方法可能是使用**Inject parameters Plugin** -
它接受 INI 文件格式的文件，因此您可以编写如下内容：

```
MY_PARAM1=My Line to Show in the Email 
```

然后你可以在你的邮件模板中使用 ${MY_PARAM1} 。

# java - 需要 Jwebbrowser 才能使用最新的浏览器

> ID：13083290
> 
> 赞同：2
> 
> 时间：2012-10-26T08:20:58.750
> 
> 标签：java, jwebbrowser

我们有一个显示嵌入式网页的 Java 应用程序。它是用 NativeSwing jwebbrowser 完成的，但嵌入式浏览器原来是 IE7，所以我们遇到了样式问题。那台机器安装了IE8，所以我希望它是默认浏览器。

这是图书馆的限制吗？有没有办法选择浏览器版本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:07:41.587

经过几个小时的工作，我设法在系统上安装了最新版本的 Internet Explorer（对我来说是 IE9）运行 jwebbrowser。

该问题与 SWT 版本有关，并在[SWT 常见问题解答](http://www.eclipse.org/swt/faq.php#browsernativeie "SWT 常见问题解答")中进行了描述。对我来说，包括来自此链接的 swt.jar 和来自[此](http://sourceforge.net/projects/djproject/files/latest/download?source=files)[链接](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#SWT)的 DJNativeSwing.jar 和 DJNativeSwing-SWT.jar并运行以下代码

```
/*
 * Christopher Deckers (chrriis@nextencia.net)
 * http://www.nextencia.net
 *
 * See the file "readme.txt" for information on usage and redistribution of
 * this file, and for a DISCLAIMER OF ALL WARRANTIES.
 */
 package chrriis.dj.nativeswing.swtimpl.demo.examples.webbrowser;

 import java.awt.BorderLayout;
 import java.awt.FlowLayout;
 import java.awt.event.ItemEvent;
 import java.awt.event.ItemListener;

 import javax.swing.BorderFactory;
 import javax.swing.JCheckBox;
 import javax.swing.JComponent;
 import javax.swing.JFrame;
 import javax.swing.JPanel;
 import javax.swing.SwingUtilities;

 import chrriis.common.UIUtils;
 import chrriis.dj.nativeswing.swtimpl.NativeInterface;
 import chrriis.dj.nativeswing.swtimpl.components.JWebBrowser;

 /**
  * @author Christopher Deckers
  */
 public class SimpleWebBrowserExample {

      public static JComponent createContent() {
          JPanel contentPane = new JPanel(new BorderLayout());
          JPanel webBrowserPanel = new JPanel(new BorderLayout());
          webBrowserPanel.setBorder(BorderFactory.createTitledBorder("Native Web Browser component"));
          final JWebBrowser webBrowser = new JWebBrowser();
          webBrowser.navigate("http://www.browserproperties.com");
          webBrowserPanel.add(webBrowser, BorderLayout.CENTER);
          contentPane.add(webBrowserPanel, BorderLayout.CENTER);
          // Create an additional bar allowing to show/hide the menu bar of the web browser.
          JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 4, 4));
          JCheckBox menuBarCheckBox = new JCheckBox("Menu Bar", webBrowser.isMenuBarVisible());
          menuBarCheckBox.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent e) {
              webBrowser.setMenuBarVisible(e.getStateChange() == ItemEvent.SELECTED);
            }
          });
          buttonPanel.add(menuBarCheckBox);
          contentPane.add(buttonPanel, BorderLayout.SOUTH);
          return contentPane;
      }

      /* Standard main method to try that test as a standalone application. */
      public static void main(String[] args) {
          NativeInterface.open();
          UIUtils.setPreferredLookAndFeel();
          SwingUtilities.invokeLater(new Runnable() {
              public void run() {
                   JFrame frame = new JFrame("DJ Native Swing Test");
                   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                   frame.getContentPane().add(createContent(), BorderLayout.CENTER);
                   frame.setSize(800, 600);
                   frame.setLocationByPlatform(true);
                   frame.setVisible(true);
              }
          });
          NativeInterface.runEventPump();
      }
 } 
```

最终显示：

您正在使用 Internet Explorer 基本信息浏览器名称：Internet Explorer 浏览器版本：9.0 您的平台：Windows ...（您可能需要刷新一次或两次以避免缓存）

# c# - VS 2012 中没有分析代码克隆命令的解决方案

> ID：13083292
> 
> 赞同：2
> 
> 时间：2012-10-26T08:21:16.003
> 
> 标签：c#, .net, visual-studio-2012

`ANALYZE`我在菜单中找不到这个命令。上下文菜单中也没有`Find matching clones in solution`。

![在此处输入图像描述](../Images/ae83f692fc6bd36896a8a7c8976472ce.png)

我试过`TOOLS`> `CUSTOMIZE`>`COMMANDS`但没有成功。没有这样的命令。
我正在使用`Microsoft Visual Studio Professional 2012`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T12:29:14.343

“代码克隆分析解决方案”仅在 Visual Studio 2012 的 Ultimate 和 Premium 版本中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T08:00:06.233

它取决于网站的解决方案类型此选项消失将您的网站转换为 Web 应用程序以检测克隆代码

# sql-server - 无功能数据透视表

> ID：13083302
> 
> 赞同：1
> 
> 时间：2012-10-26T08:21:43.130
> 
> 标签：sql-server, sql-server-2008, pivot

我正在尝试编写一个创建数据透视表的 sql 语句。

数据是调查响应列表，由涉及表响应者、响应和答案的连接查询组成。答案表结构如下：

```
______________________________________________________________
|AnswerID|ResponseID|QuestionID|AnswerComment                |
|      1 |        1 |        1 |This is answer 1             |
|      2 |        1 |        2 |This is answer 2             |
|      3 |        1 |        3 |This is answer 3             |
|      4 |        2 |        1 |Answer 1 Respondent 2        |
|      5 |        2 |        3 |Resp 2, No Q.2               |
|      6 |        3 |        2 |I answered Q.2 only          |
|____________________________________________________________| 
```

答主长这样：

```
______________________________________________________________
|RespondentID|GivenName|Surname|age, gender, blah blah       |
|____________________________________________________________| 
```

回复：

```
______________________________________________________________
|ResponseID|ResponseDate|RespondentID|Attachment             |
|____________________________________________________________| 
```

和问题：

```
_____________________________________________________
|QuestionID|QuestionNumber|QuestionText|            |
|___________________________________________________| 
```

我希望我的输出形式为：

```
________________________________________________________________________________________
|RespondentInfo|ResponseDate|1                     |2                  |3               |
|Respondent 1  |15/10/2012  |This is answer 1      |This is answer 2   |This is answer 3|
|Respondent 2  |17/10/2012  |Answer 1 Respondent 2 |                   |Resp 2, No Q.2  |
|Respondent 3  |19/10/2012  |                      |I answered Q.2 only|                |
|______________________________________________________________________________________| 
```

我希望每个受访者在对应列中的每个答案都有一行。我创建的查询 - 尽管它将答案旋转到正确的列 - 为每个答案提供了一个新行，所有空白列都为空。

我的 sql：

```
SELECT Respondent, ResponseDate, 
         [1], [2], [3]
FROM  (
       SELECT  Respondent.Surname + ', ' + FirstName as RespondentInfo, 
               Response.ResponseDate, 
               isnull(Answer.AnswerComment, '') as Answer, 
               Qustion.QuestionNumber
       FROM    Answer INNER JOIN
                Question ON Answer.QuestionID = Question.QuestionID INNER JOIN
                   Response ON Answer.ResponseID = Response.ResponseID INNER JOIN
                   Respondent ON Response.RespondentID = Respondent.RespondentID
       ) as ResponseQuery
PIVOT (
    max(Answer)
FOR ResponseQuery.QuestionNumber in ([1], [2], [3])
       ) AS OutputTable 
```

我认为问题是因为我没有使用聚合函数，所以默认为 max()。谁能指出我正确的方向。

抱歉，如果我的问题过于冗长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:45:34.683

问题是源头，而不是支点。

没有看到其他表很难判断，但使用您的示例表

```
select ResponseID, [1],[2],[3] from 
    (select ResponseID, AnswerComment, QuestionID from yourtable) s
PIVOT (max(AnswerComment) FOR QuestionID in ([1], [2], [3]) ) AS OutputTable 
```

以您所追求的形式产生输出。

如果您不知道如何调整源以提供您想要的数据，您可以通过添加类似...

```
 inner join Response on OutputTable.ResponseID = Response.ResponseID 
```

在上述枢轴之后给

```
select Response.ResponseDate, [1],[2],[3] from 
    (select ResponseID, AnswerComment, QuestionID from yourtable) s
PIVOT (max(AnswerComment) FOR QuestionID in ([1], [2], [3]) ) AS OutputTable
inner join Response on OutputTable.ResponseID = Response.ResponseID 
```

ETC...

# android - 创建一个“Intent.createChooser like”对话框

> ID：13083305
> 
> 赞同：3
> 
> 时间：2012-10-26T08:21:51.027
> 
> 标签：android, android-intent, android-alertdialog

我正在开发一个具有共享功能的应用程序。问题是我需要过滤与我共享的应用程序。据我所知，您不能使用标准的 Intent.createChooser 提供意图（该操作设置为 android.content.Intent.ACTION_SEND）作为参数来执行此操作。您所能做的就是重新排列给定的列表，如下所示：[Custom filtering of intent chooser based on installed Android package name](https://stackoverflow.com/questions/5734678/custom-filtering-of-intent-chooser-based-on-installed-android-package-name)，但是这个解决方案对我不起作用，因为我绝对必须从该列表中删除一些共享应用程序。

我现在所能做的就是创建我自己的对话框，其中包含一个过滤的应用程序列表，我可以使用它

```
getPackageManager().queryIntentActivities() 
```

为了保持标准的共享用户体验，我希望我的对话框看起来像 Intent.createChooser() 对话框，但我找不到要设置为我的对话框的内容视图的布局资源文件。我需要这个，因为我的应用中有 Intent.createChooser() 对话框用于其他目的。

任何人都可以提供解决方案，也许是解决方法？

因此，我创建了自己的对话框，其中包含过滤后的共享应用程序列表。我所需要的只是让它看起来尽可能“标准”。任何人都可以提供标准的“共享”布局资源或背景颜色吗？

# algorithm - 需要算法来删除创建的重复项

> ID：13083313
> 
> 赞同：2
> 
> 时间：2012-10-26T08:22:28.837
> 
> 标签：algorithm, dynamic-programming

我有一个需要编写的程序，但我不知道该怎么做。我需要参考如何解决它的方法。问题如下：
您有一个包含**N**个整数的列表。例如：**[4;2;3;2;1;5;1;3;2]**。
如果有一些**K**或更多数量的相邻重复数字，则将它们从列表中删除。您可以在任何两个数字之间添加任何数字，或添加到列表的开头/结尾，以便从列表中删除数字。

任务是使用尽可能少的数字来清除列表。

1 <= **N** <= 100 - **N**是列表的长度。
2 <= **K** <= 5 - **K**是从序列中删除的重复相邻数字的最小数量。

**K**在指定的范围内提供。

示例：List = **[4;2;3;2;1;5;1;3;2]** - 答案是**3**；***K*** = 2

我的想法是有某种序列树，以便有效地删除数字。此示例的树如下所示：

```
4 2       2
   3     3
    2 1 1
       5 
```

所以你必须在列表的第 4 和第 5 个元素之间添加**5**（从 0 开始），然后第 4 到第 7 个元素消失，序列看起来像这样。

```
4 2   2
   3 3
    2 
```

现在您在新序列的第 2 和第 3 个元素之间添加**2**，因此第 1 到第 5 个元素被删除。

然后将 4 添加到新序列中，添加到序列中的数字总数为**3**。这个问题的算法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:28:51.597

让我们对问题进行逆向工程。考虑到您的示例，可以在运行中减少的最终字符串将如下所示

```
4           4
 2         2
  3       3
   2     2
    1   1
     5 5 
```

如果你注意到它是一个偶数长度的回文。对于所有其他可能的输入，情况也是如此。

现在问题可以归结为找到输入中最长的回文子序列，并将一个字符添加到输入字符串中，该字符对应于输入中不在回文子序列中的每个字符。寻找最长的回文子序列是一个标准的 DP 问题，教程可以在[这里找到](http://www.geeksforgeeks.org/archives/19155)

例如，在您的情况下，最长的子序列将是`[2,3,1,1,3,2]`并且不在输入中的字符是，`[4,2,5]`因此您必须将这些添加到输入中，或者如果您对数字感兴趣，那么`3`答案就是答案。

# java - 防止击键从 JTable 级联到顶层

> ID：13083318
> 
> 赞同：0
> 
> 时间：2012-10-26T08:22:48.837
> 
> 标签：java, swing, jtable, keyevent, tablecelleditor

我用一个使用数字微调器的自定义 TableCellEditor 创建了一个 JTable。我的问题是您通过按 enter 提交单元格更改（其中包括单击表中的其他位置），但按 enter 也会运行应用程序。编辑 JTable 单元格时如何防止 enter 运行应用程序？

# java - 如何读取文件，每行都是 Java ArrayList 中的一个元素？

> ID：13083321
> 
> 赞同：0
> 
> 时间：2012-10-26T08:22:52.977
> 
> 标签：java, arraylist, readfile

我想获取一个 txt 文件，并按顺序将该文件的每一行作为 ArrayList 中的元素。我也不想要每行末尾的“\n”。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:35:35.890

我发现了这个，可以用JDK7制作：

```
List<String> readSmallTextFile(String aFileName) throws IOException {
    Path path = Paths.get(aFileName);
    return Files.readAllLines(path, ENCODING);
} 
```

并调用它

```
ArrayList<String> foo = (ArrayList<String>)readSmallTextFile("bar.txt"); 
```

在此之后，您可以过滤列表“foo”中每一行中的任何不需要的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:25:56.627

这需要三个简单的步骤：-

*   从文件中读取每一行
*   从末尾去掉换行符
*   将行添加到`ArrayList<String>`

你看，我没有回答你的问题。我只是重新构图，看起来像一个答案。

这就是您的`while`循环条件的样子： -

```
Scanner scanner = new Scanner(yourFileObj);
while (scanner.hasNextLine()) {

    // nextLine automatically strips `newline` from the end
    String line = scanner.nextLine();  

    // Add your line to your list.
} 
```

**更新**： -

由于您`file`逐行阅读，因此最好使用`BufferedReader`. 如果您想**解析**令牌并用它们做一些特别的事情，**扫描仪会更好。** **`each`**

 **```
BufferedReader br = new BufferedReader(new FileReader("fileName"));

String line = null;

// readLine also doesn't include the newline in the line read
while ((line = br.readLine()) != null) {  
    //add your line to the list
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:34:45.560

我更喜欢 BufferedReader，它比 Scanner 快

```
BufferedReader br = new BufferedReader( new InputStreamReader( System.in ) ); 
```

读取直到文件结尾是

```
String line = br.readLine(); // read firt line
while ( line != null ) { // read until end of file (EOF)
    // process line
    line = br.readLine(); // read next line
} 
```**

# magento - 获取与特定产品相关的产品

> ID：13083322
> 
> 赞同：2
> 
> 时间：2012-10-26T08:23:01.323
> 
> 标签：magento, magento-1.7

我需要获取相关产品中列出指定产品的所有产品。因此，在删除主要产品后，我会尝试从购物车中删除不必要的物品。

有没有更简单的方法来循环所有购物车项目？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:08:19.923

我能想到的唯一两种方法是：

1.  由于产品似乎与主产品密切相关并依赖于主产品，您可能需要考虑创建[捆绑产品](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)。对于在购物车中有 3 件商品并删除其中 1 件（主要产品）的客户也可能会感到困惑，现在他们的购物车是空的，出于某种未知原因，他们仍然想要 2 件相关产品（您自动删除）。

2.  正如您上面提到的 - 在您的购物车中的所有产品中删除循环（请参见下面的代码）

在 app/local/RWS/AutoDeleteRelatedCartProducts/etc/config.xml 中创建

```
<config>
    <global>
        <models>
            <autodeleterelatedcartproducts>
                 <class>RWS_AutoDeleteRelatedCartProducts_Model</class>
            </autodeleterelatedcartproducts>
         </models>
    </global>
    <frontend>
      <events>
        <sales_quote_remove_item>
            <observers>
                <autodeleterelatedcartproducts>
                    <type>singleton</type>
                    <class>autodeleterelatedcartproducts/observer</class>
                    <method>removeQuoteItem</method>
                </autodeleterelatedcartproducts>
            </observers>
        </sales_quote_remove_item>
      </events>
    </frontend>
</config> 
```

在 app/local/RWS/AutoDeleteRelatedCartProducts/Model/Observer.php 中创建

```
<?php

class RWS_AutoDeleteRelatedCartProducts_Model_Observer
{
    public function removeQuoteItem(Varien_Event_Observer $observer)
    {
        //get deleted product
        $delete_product = $observer->getQuoteItem()->getProduct();

        // Get all related products
        $related_products = $delete_product->getRelatedProductCollection();

        // get all related product id and save in array
        $related_product_ids = array();
        foreach($related_products as $product){
            $related_product_ids[] = $product->getId(); // double check to make sure this product_id 
        }

         foreach( Mage::getSingleton('checkout/session')->getQuote()->getItemsCollection() as $item ) 
         { 
              // if getId is a related product remove it
              if(in_array($item->getId(), $related_product_ids))
                    Mage::getSingleton('checkout/cart')->removeItem( $item->getId() )->save(); 
         }

    }
}

?> 
```

阅读更多 @

[观察购物车中已移除的物品](https://stackoverflow.com/questions/9191951/observer-for-removed-items-in-the-cart)

[帮助 Magento 和相关产品](https://stackoverflow.com/questions/4622759/help-with-magento-and-related-products)

[Magento - 如何检查产品是否已从购物车中删除](https://stackoverflow.com/questions/4255083/magento-how-to-check-if-a-product-has-already-been-removed-from-the-cart)

[http://www.magentocommerce.com/boards/viewthread/30113/](http://www.magentocommerce.com/boards/viewthread/30113/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T22:58:46.690

如果我是你，我可能不会首先添加产品，而是使用观察者来查看 checkout_cart_product_add_after 事件。根据您的预期产品检查产品。使用 RS 的方法来获取报价并检查您购物车中产品的数量。为产品添加一个自定义选项，让客户知道他是否有免费的好东西。这可能是合适[的 Magento - 基于用户输入的报价/订单产品项目属性](https://stackoverflow.com/questions/9412074/magento-quote-order-product-item-attribute-based-on-user-input/9496266#9496266)

然后将观察者添加到此事件 sales_convert_quote_to_order。这个观察者可以检查数量并调整类似的东西，将产品提供给客户[在 Magento 中跳过结帐以获取可下载的产品，](https://stackoverflow.com/questions/2627036/skip-checkout-in-magento-for-a-downloadable-product) 您只需获得单身人士并使用观察者，因此这种方法比在购物车过程中添加和删除的成本要低得多. 它也会看起来好多了。

如果您愿意，我会尝试实施它，但使用您的站点和数据库的副本，因为我懒得设置产品。

附言。也许你也需要观察这个事件 checkout_cart_update_items_before

附言。附言。也许我应该在评论之前检查一下，哈哈。大声笑让你从这里被禁止吗？

# objective-c - 编码和解码 - 自定义对象和实现

> ID：13083323
> 
> 赞同：1
> 
> 时间：2012-10-26T08:23:08.357
> 
> 标签：objective-c

我正在做一个有各种自定义对象的项目。这些自定义对象（其中一些与嵌套的可变数组一起使用）需要保存到一个文件/或多个文件中。这样做的最佳方法是什么？我应该创建一个加载和保存文件管理器还是让每个对象处理它会更好？

感谢您的时间。

——史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:30:48.213

为您的班级实施[`NSCoding`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议：

```
NSString * const kMyArray = @"myString";
NSString * const kMyBool = @"myBool";

- (void)encodeWithCoder:(NSCoder *)coder
{
    [coder encodeObject:_myArray forKey:kMyArray];
    [coder encodeBool:_myBool forKey:kMyBool];
    //...
}

- (id)initWithCoder:(NSCoder *)coder
{
    self = [super init];
    if (self) {
        _myArray = [coder decodeObjectForKey:kMyArray];
        _myBool = [coder decodeBoolForKey:kMyBool];
        //...
    }
    return self;
} 
```

它允许您保存和加载数据[`NSKeyedArchiver`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)：

```
//saving collection of Class<NSCoding> objects
NSString *documentsDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
BOOL success = [NSKeyedArchiver archiveRootObject:_collection toFile:path];

//loading
NSData *data = [[NSData alloc] initWithContentsOfFile:path];
if (data) _collection = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:30:59.070

如果你想编码和解码对象，你可以看看 NSCoding。这是一种直截了当的方法。

查看文档：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html （编辑正确链接）

更新存储对象损坏的 iOS 版本时，我遇到了问题。这是围绕从 iOS 4.1 到 iOS 4.2 的过渡。

我停止使用 NSCoder 并切换到创建自定义文件格式，它具有底层 JSON 文件。现在我对文件版本控制有了更多的控制，并且可以轻松地进行修复，因为这完全是关于解释您自己的数据文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:43:11.890

您可以在您的应用程序包中手动创建一个 plist 文件（假设**Config.plist**是 plist 的名称），并将其复制到 Document 目录后，您可以通过编程方式对其进行修改。

所以看看这里如何将你的文件复制到文档目录中：首先定义两个宏：

```
#define DOCUMENT_DIR        [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]
#define PLIST_SETTINGS      [DOCUMENT_DIR stringByAppendingPathComponent:@"Config.plist"] 
```

之后 -

```
 NSString *configPath = [[NSBundle mainBundle] pathForResource:@"Config" ofType:@"plist"];
[self copyIfNeededFrom:configPath To:PLIST_SETTINGS];
 NSMutableArray* mArrObjects = [NSMutableArray alloc] initWithObjects:obj1,obj2,obj3, nil];
[mArrObjects writeToFile:PLIST_SETTINGS atomically:YES];
[mArrObjects release]; 
```

现在给出**copyIfNeededFrom: 的定义：**

```
- (BOOL)copyIfNeededFrom:(NSString *)sourcePath To:(NSString *)destinationPath
{
NSError *error = noErr;
if(![[NSFileManager defaultManager] fileExistsAtPath:destinationPath])
{
    [[NSFileManager defaultManager] copyItemAtPath:sourcePath toPath:destinationPath error:&error];
}
if(noErr)
    return YES;
else
    return NO;
} 
```

希望对你有效。干杯！！！

# c# - 在有界的 datagridview 列中包装文本

> ID：13083325
> 
> 赞同：0
> 
> 时间：2012-10-26T08:23:09.497
> 
> 标签：c#, datagridview

我有一个由数据库中的数据集填充的 datagridview。其中一列包含长文本。我将链接以仅在单元格中显示几个字符，当用户单击它时，将显示一个包含整个文本的弹出窗口。(c#, sql 服务器)

有没有一个例子可以告诉我如何做到这一点？或者关于如何显示文本的任何更好的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:58:50.603

您可以向 Datagridview 添加一个名为： CellClick 的事件

在这种情况下，您可以初始化一个新表单。您可以将完整的字符串传递给表单

像这样的东西：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
     if(e.ColumnIndex == YOUR_DESIRED_COLUMN)
     {
         string text = VALUE_TO_PASS_ON;
         Form1 frm = new Form1( text);
         frm.Show();
     }
} 
```

# bytecode - 混淆了 smali 代码和 dalvik 字节码规范以及 dex 文件中操作码的真实十六进制

> ID：13083329
> 
> 赞同：1
> 
> 时间：2012-10-26T08:23:29.120
> 
> 标签：bytecode, dalvik, dex, smali

我定义了一个名为`DefineFields`. 它有一个空的构造函数。当我编译它时，`classes.dex`文件中的十六进制代码显示如下：

```
7010 050C 0000 0E00 (show in little endian) 
```

之后我搜索字节码规范，我找到了

```
(spec code)                      (hex of dex) 
  70 35c: invoke-direct           (7010)     
  05 22x: move-wide/from16        (050C)
  00 10x: nop                     (0000)
  0E 10x: return-void             (0E00) 
```

我阅读了规范。但我无法完全理解什么是`35c`. （我知道 c，x 在规范中有解释表。）我想知道的是如何解释 the和 中的`10`十六进制`7010``0C``050C`

这些东西与规范操作码不匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:43:26.757

要回答您问题的第二部分，“35c”、“22x”、“10x”等值是指指令格式。这决定了指令的大小，以及指令的各个部分如何被打包到这个空间中。这些在[指令格式](http://s.android.com/tech/dalvik/instruction-formats.html)文档中定义。

您正在错误地“解析”给定的指令。指令的长度并不总是 2 个字节。这实际上是 2 条指令的编码。第一条指令，操作码为 0x70，是直接调用指令，格式为 35c。

指令格式文档中给出了 35c 指令的布局

```
A|G|op BBBB F|E|D|C

[A=5] op {vC, vD, vE, vF, vG}, meth@BBBB
[A=5] op {vC, vD, vE, vF, vG}, type@BBBB
[A=4] op {vC, vD, vE, vF}, kind@BBBB
[A=3] op {vC, vD, vE}, kind@BBBB
[A=2] op {vC, vD}, kind@BBBB
[A=1] op {vC}, kind@BBBB
[A=0] op {}, kind@BBBB 
```

这是一个 3 单元指令，其中每个单元为 2 字节。所以总共6个字节。该指令的十六进制值为`7010 050C 0000`

请注意，每个 2 字节的“组”显示为好像它是按大端顺序显示的。因此，对于“7010 050C 0000”，每个“字母”的值将是：

```
7010 050C 0000
OOAG BBBB DCFE

OP = 0x70 
A = 1
G = 0
B = 0x0C05
C = 0
D = 0
E = 0
F = 0 
```

从格式中可以看出， 的值`A`决定了传递给方法的参数数量。在这种情况下，`A`值为 1，因此适用的行是

```
[A=1] op {vC}, kind@BBBB 
```

所以 B 包含被调用方法的方法索引。这指的是该特定索引处的 dex 文件中的 method_id_item。它被传递了一个参数，即寄存器 v0 中的值。

第二条指令`0E00`的操作码为0E，即return-void，格式为10x。

```
ØØ|op 
```

这个很容易解码。它不包含除操作码以外的任何其他信息。

# windows-8 - 如何开始在 Windows 8 上创建回合制地铁游戏？

> ID：13083331
> 
> 赞同：1
> 
> 时间：2012-10-26T08:23:31.197
> 
> 标签：windows-8, microsoft-metro, game-center

我想知道是否有类似的东西可用于 Windows Store 应用程序来创建多人回合制地铁游戏。带有客户端和服务器端组件

这将类似于 Apple 在 iOS 平台上提供的 Game Center。

如果可能的话，我正在寻找技术的名称和样本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:29:15.143

不是直接的答案，但无论是 xna、winforms、控制台、wp7 应用程序，回合制游戏的内部部分都是相同的，唯一不同的是游戏的渲染方式。

因此，可能不会有具体的教程告诉您如何从头到尾执行此操作，请查看有关如何制作回合制游戏的一般教程，目前只需将其作为命令行应用程序，确保您的游戏逻辑在一个项目中，而您的渲染细节（控制台位）在另一个只使用逻辑的应用程序中。

这样，您至少可以开始制作游戏并弄清楚它应该如何工作，然后当您了解有关 Metro 以及如何渲染事物的更多信息时，您可以创建一个新的 UI 项目，该项目将再次使用您的共享游戏逻辑并将其显示在地铁方式。

那里有很多游戏开发社区，因此，如果您寻找 XNA 风格的回合制游戏，并且通常只考虑游戏设计而不是如何展示它，那么您至少可以在等待答案时保持高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:10:18.953

我发现以下演示文稿很有用：

*   [Windows 上的 Xbox LIVE 深入了解](http://www.microsoft.com/en-us/download/details.aspx?id=29205)

由此我发现 Xbox live 提供了一个基于 REST 的 API 来存储游戏状态、匹配、状态、成就、游戏消息。

# java - Java EntityManager 中的排队事务

> ID：13083332
> 
> 赞同：0
> 
> 时间：2012-10-26T08:23:38.137
> 
> 标签：java, cassandra

我的Java代码：

```
private EntityManagerFactory emf = Persistence.createEntityManagerFactory("cassandra_pu");
private EntityManager em = emf.createEntityManager();
while(condition){
em.merge(objects[i]);
} 
```

可以正常执行，无异常但数据库表没有更新；我认为那是因为所有事务都排队，如果是的话，是否有立即提交事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:52:58.510

cassandra 不支持事务，所以除非你有一个像 zookeeper 这样的协调服务器，否则你不会有事务。PlayOrm 特别不符合 JPA，因为 noSQL 可以做的更像是在字符串列表或 LocalDate 列表上使用 @NoSqlEmbedded 标记。这些是 RDBMS 的 JPA 无法支持的东西，因为 RDBMS 没有宽行。无论如何，PlayOrm 是另一种选择，但同样，它不执行事务，但更适合支持当今使用的许多在 JPA 中不可行的 noSQL 模式。

在 PlayOrm 和 JPA 中，您都需要调用 flush。 **你错过了冲洗的电话吗？**

哦，我应该注意到 PlayOrm 在外观和感觉上与 JPA 非常相似，但具有更多的 noSQL 特定功能（另外它在需要时也可以连接）

# javascript - 如何仅在 JSP 中执行 Java 代码后显示页面

> ID：13083335
> 
> 赞同：0
> 
> 时间：2012-10-26T08:23:41.260
> 
> 标签：javascript, jquery, html, jsp

`index.jsp`包含将从数据库中获取一些图像和文本的 java 代码。

在我编写的 JavaScript 文件中。

```
$(document).ready(function(){
    //When Document is Ready, Show the Main Page
    $("#showifjavaenabled").fadeIn(1000);

    }); 
```

所以一开始`DIV showifjavaenabled`是隐藏的，但我注意到即使它在1秒后出现，并不是所有的java都被执行，因为它们实际上很多，它们需要加载的时间并不大，它只有一秒或二，但仍然看起来很糟糕，`.show() or .fadeIn()`只有在所有java代码都执行后我才能进入这个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:29:53.567

这是不将java代码放入JSP的原因之一......

如果您在做服务器端业务，您应该在服务器端做，然后将请求转发到已加载所有数据的 JSP。

或者您可以使用 AJAX 调用来执行 Java 前端操作，使用一种瓷砖（页面已加载，使用 ajax 加载的小框仍然有进度条运行，直到他完成。

`<% %>`尽可能避免使用 scriptlet ( )，并分离概念以获得更好的结果。

* * *

编辑：你真的应该尝试从像 Struts2 这样的框架开始（不是 Struts1，它更难，更不强大）。

这并不难，有据可查，而且您花在学习“hello world”和设置应用程序上的时间将立即在功能和易用性方面得到回报，您可以将其用于未来的应用程序。

从服务器到客户端发布一个巨大的逗号分隔字符串，然后对其进行去标记，这不是面向对象编程。

OOP 将是您需要使用的每个概念对象的一个​​对象，通过 Action 暴露给 JSP，并在 JSP 中使用 EL 或 OGNL 标签访问......

我知道这一步似乎很大，但值得做......

或者你可以继续使用你的反模式、古老的技术并尝试破解这个问题，也许今天你会结束这个软件，但明天你会遇到同样的问题。

我的 2 美分（如前所述，我多年前处于你的境地......）

# java - JTable 的高级过滤器

> ID：13083338
> 
> 赞同：0
> 
> 时间：2012-10-26T08:24:05.380
> 
> 标签：java, regex, swing, jtable, rowfilter

我有一个与 JTextField 输入相关的过滤 JTable。它只是基于第一个字符过滤行。例如，如果我的第 2 列具有值：

```
VALUES PARAMETER
PARAMETER VALUES
.
. 
```

当我在 JTextfield 中输入 V 时，它会显示该行`VALUES PARAMETER`并离开该行`PARAMETER VALUES`我需要一个高级过滤器，这样当我输入 V 时，它将能够向我显示两行或任何其他行，其中有一个名称以开头在 JTextField 中键入的值：这是我的过滤器....（部分）

```
 jtfSearch.getDocument().addDocumentListener(new DocumentListener() {
        public void changedUpdate(DocumentEvent e) {
            newFilter();
        }

        public void insertUpdate(DocumentEvent e) {
            newFilter();
        }

        public void removeUpdate(DocumentEvent e) {
            newFilter();
        }
    }); 
```

我的过滤方法：

```
 public void newFilter() {
    RowFilter< MyTableModel, Object> rf = null;
    try {
        rf = RowFilter.regexFilter("^" + jtfSearch.getText(), 1);
    } catch (Exception as) {
        System.err.println(as);
        return;
    }
    sorter.setRowFilter(rf);
} 
```

这是正则表达式过滤器的问题还是我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:38:26.010

我假设`jtfSearch.getText()`从整行返回文本，这是正确的吗？如果是这样，那么问题可能只是你`"^"`在正则表达式的开头，把它拿出来，它应该匹配整行内容中的任何地方。

# android - 如何检测NFC芯片的类型

> ID：13083339
> 
> 赞同：8
> 
> 时间：2012-10-26T08:24:06.853
> 
> 标签：android, tags, nfc

有谁知道我如何通过 Android NFC API 找出我正在阅读的标签中使用了哪个 NFC 芯片？理想情况下，我喜欢同时获得芯片型号和制造商。

在 Tag 对象的某处可用吗？

为澄清起见，我不是指手机中的读取器芯片，而是 NFC 标签中的芯片。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T11:05:18.680

我正在 Android 中开发一个用于 NFC 读/写/身份验证操作的应用程序。这是您想要的一些代码部分。

Android 有 3 种主要类型的卡，分别是 Mifare Classic、Mifare Ultralight 和 Isodep（这是 Desfire 和 Desfire EV1 的类型）。所以，当我接触到一个标签时，我运行这个操作：

```
private String[] getTagInfo(Intent intent) {
    Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    String prefix = "android.nfc.tech.";
    String[] info = new String[2];

    // UID
    byte[] uid = tag.getId();
    info[0] = "UID In Hex: " + Utils.convertByteArrayToHexString(uid) + "\n" +
              "UID In Dec: " + Utils.convertByteArrayToDecimal(uid) + "\n\n";

    // Tech List
    String[] techList = tag.getTechList();
    String techListConcat = "Technologies: ";
    for(int i = 0; i < techList.length; i++) {
        techListConcat += techList[i].substring(prefix.length()) + ",";
    }
    info[0] += techListConcat.substring(0, techListConcat.length() - 1) + "\n\n";

    // Mifare Classic/UltraLight Info
    info[0] += "Card Type: ";
    String type = "Unknown";
    for(int i = 0; i < techList.length; i++) {
        if(techList[i].equals(MifareClassic.class.getName())) {
            info[1] = "Mifare Classic";
            MifareClassic mifareClassicTag = MifareClassic.get(tag);

            // Type Info
            switch (mifareClassicTag.getType()) {
            case MifareClassic.TYPE_CLASSIC:
                type = "Classic";
                break;
            case MifareClassic.TYPE_PLUS:
                type = "Plus";
                break;
            case MifareClassic.TYPE_PRO:
                type = "Pro";
                break;
            }
            info[0] += "Mifare " + type + "\n";

            // Size Info
            info[0] += "Size: " + mifareClassicTag.getSize() + " bytes \n" +
                    "Sector Count: " + mifareClassicTag.getSectorCount() + "\n" +
                    "Block Count: " + mifareClassicTag.getBlockCount() + "\n";
        } else if(techList[i].equals(MifareUltralight.class.getName())) {
            info[1] = "Mifare UltraLight";
            MifareUltralight mifareUlTag = MifareUltralight.get(tag);

            // Type Info
            switch (mifareUlTag.getType()) {
            case MifareUltralight.TYPE_ULTRALIGHT:
                type = "Ultralight";
                break;
            case MifareUltralight.TYPE_ULTRALIGHT_C:
                type = "Ultralight C";
                break;
            }
            info[0] += "Mifare " + type + "\n";
        } else if(techList[i].equals(IsoDep.class.getName())) {
            info[1] = "IsoDep";
            IsoDep isoDepTag = IsoDep.get(tag);
            info[0] += "IsoDep \n";
        } else if(techList[i].equals(Ndef.class.getName())) {
            Ndef ndefTag = Ndef.get(tag);
            info[0] += "Is Writable: " + ndefTag.isWritable() + "\n" +
                    "Can Make ReadOnly: " + ndefTag.canMakeReadOnly() + "\n";
        } else if(techList[i].equals(NdefFormatable.class.getName())) {
            NdefFormatable ndefFormatableTag = NdefFormatable.get(tag);
        }
    } 

    return info;
} 
```

但是，这并不能直接得到 Desfire 和 Desfire EV1 的类型。为此，您需要向卡发送一些字节：

```
static final byte GET_MANUFACTURING_DATA = (byte) 0x60;

public DesfireManufacturingData getManufacturingData() throws Exception {
    byte[] respBuffer = sendRequest(GET_MANUFACTURING_DATA);
    if (respBuffer.length != 28)
        throw new Exception("Invalid response");
    return new DesfireManufacturingData(respBuffer);
}

private byte[] sendRequest (byte command) throws Exception {
    return sendRequest(command, null);
}

private byte[] sendRequest (byte command, byte[] parameters) throws Exception {
    ByteArrayOutputStream output = new ByteArrayOutputStream();

    byte[] recvBuffer = mTagTech.transceive(Utils.wrapMessage(command, parameters));

    while (true) {
        if (recvBuffer[recvBuffer.length - 2] != (byte) 0x91)
            throw new Exception("Invalid response");

        output.write(recvBuffer, 0, recvBuffer.length - 2);

        byte status = recvBuffer[recvBuffer.length - 1];
        if (status == OPERATION_OK) {
            break;
        } else if (status == ADDITIONAL_FRAME) {
            recvBuffer = mTagTech.transceive(Utils.wrapMessage(GET_ADDITIONAL_FRAME, null));

        } else if (status == PERMISSION_DENIED) {
            throw new Exception("Permission denied");
        }else if (status == LENGTH_ERROR) {
            throw new Exception("Length Error");
        } 
        else if (status == AUTHENTICATION_ERROR) {
            throw new Exception("Authentication error");
        }else if (status == PARAMETER_ERROR) {
            throw new Exception("Parameter Error");
        }else if (status == DUPLICATE_ERROR) {
            throw new Exception("Duplicate Error");
        }else if (status == NO_SUCH_KEY) {
            throw new Exception("No such key");
        }else {
            throw new Exception("Unknown status code: " + Integer.toHexString(status & 0xFF));
        }
    }

    return output.toByteArray();
} 
```

初始化制造数据后，您可以轻松访问其部分。DesfireManufacturingData 类用于将标签的响应评估为有意义的部分，但我只会给出它的链接：[Desfire Manufacturing Data](https://github.com/codebutler/farebot/blob/master/src/main/java/com/codebutler/farebot/card/desfire/DesfireManufacturingData.java)。另外，我必须说这是我在互联网上找到的最全能的开源项目，但它只有对 Desfire 标签的读取操作，没有写入和验证。希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T18:47:44.983

如果您有带 NFC 的 Android 设备，则有各种可用的应用程序可以做到这一点（以及更多），例如[NXP TagInfo](https://play.google.com/store/apps/details?id=com.nxp.taginfolite)或[NFC TagInfo](https://play.google.com/store/apps/details?id=at.mroland.android.apps.nfctaginfo)。

对于带有桌面阅读器的 PC，也许[RFIDIOt](http://rfidiot.org/)可能有用。对于其他平台，可能存在（或可以创建）类似的应用程序，但我不熟悉它们。

# cocos2d-iphone - iOS6 + ARC + cocos2D + UIKit：消息发送到释放的实例

> ID：13083341
> 
> 赞同：2
> 
> 时间：2012-10-26T08:24:12.707
> 
> 标签：cocos2d-iphone, uikit, ios6, automatic-ref-counting

我目前在将 cocos2d 与 UIKit 混合时遇到了一些奇怪的行为。我一直在跟踪僵尸，它总是触发崩溃的过度释放。现在我知道这很模糊，所以我将勾勒出一个场景，在使用本机 uikit 对象时会详细地发生这种情况。

我有这段代码：

// 我创建一个新的 UIActivityViewController 并将它呈现在我的 appDelegate viewController 上

```
 self.activityViewController = [[UIActivityViewController alloc] initWithActivityItems:[NSArray arrayWithObjects:tempImage, nil]
                                                                                         applicationActivities:nil];

    [[appDelegate viewController] presentViewController:self.activityViewController
                                                                 animated:YES
                                                               completion:nil]; 
```

我第一次调用它时，viewController 会亮起，我可以关闭。我第二次尝试创建一个新的 ActivityController 它崩溃了。

现在，在删除 UIViewController 子类，然后启动包含 UIKit 元素的 CCDirector 时，情况似乎也是如此。奇怪的是，我在第一个 UIViewController 的属性上得到了过度释放，而在不切换到 cocos2D 场景时我没有。

我在使用 ARC 的项目中运行 cocos2D，不使用 ARC 不是一种选择。

如果有人遇到过这样的问题并且可以指出我正确的方向，请这样做。

谢谢 ！

# javascript - 使用 Web 浏览器进行 CPU 分析

> ID：13083346
> 
> 赞同：0
> 
> 时间：2012-10-26T08:24:36.717
> 
> 标签：javascript, cpu-usage, google-chrome-devtools

我有一个用 Ruby 脚本生成的静态网页。它使用 CSS、Javascript 和 jQuery。当我快速单击页面中连接到 jQuery 事件的一些按钮时，CPU 使用率接近 100%。我想看看 CPU 使用率高的原因，并尝试了 Google Chrome CPU profiler，得到了以下截图：

![CPU 配置文件](../Images/9522c77eae8e597932558b44a1790ae2.png)

高 CPU 似乎是由`(program)`. 这意味着什么？而且，有没有办法分解`(program)`零件以更详细地查看我的哪些功能正在耗尽 CPU？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:57:42.683

`(program)`表示（a）选项卡空闲时间，或（b）执行的本机浏览器代码。我猜你的情况是（b）。仔细查看`Timeline`，如果“重新计算样式”和“绘画”占用大量时间，则需要优化页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:34:54.660

也许更好地使用时间轴选项卡。您可以分析 CPU 使用情况，这对您来说很容易。

# c# - MailSystem.NET IMAP4，将邮件标记为未读

> ID：13083347
> 
> 赞同：3
> 
> 时间：2012-10-26T08:24:38.233
> 
> 标签：c#, email

任何熟悉 MailSystem.NET 的人？

我有一个应用程序，它会定期检查 gmail 帐户是否有新邮件。如果主题标题包含特定短语，则采取行动。但是，我需要稍微修改应用程序以将某些消息标记为未读。

这是现有的代码。单击按钮调用 logInLogOut() 子程序并启动一个计时器，该计时器通过在另一个线程中调用 checkNewMail() 子程序来处理应用程序定期检查新邮件。该应用程序按预期工作，尽管以下可能不是最好的方法。

```
private void logInLogOut()
{
    try
    {
        Client.ConnectSsl(txtIMAPServer.Text, int.Parse(txtIMAPPort.Text));
        Client.Login(@txtUserName.Text, txtPassword.Text); 
        globalClientConnected = true;

    }
    catch (Exception ex)
    {
        globalClientConnected = false;

    }
}    

private void checkNewMail()
{
    if (globalClientConnected)
    {
        foreach (ActiveUp.Net.Mail.Message email in GetUnreadMails("Inbox"))
        {
            string from = parseEmailAddress(email.From.ToString());
            string subject = email.Subject;
            string receivedDateTime = email.ReceivedDate.Date.ToString()

            string updateString = receivedDateTime + ", " + from + ", " + subject + "\r\n";

            if (subject.Contains("ABC"))
            {
                string to = from;

                try
                {              
                    //do something
                }
                catch (Exception ex)
                {
                    //bla bla
                }
            }
            else
            {
                //If mail subject not like "ABC"
                //Do something else

                //Mark the mail as unread
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:42:38.570

不熟悉它，但他们的源代码中有一个示例。

```
 Imap4Client imap = new Imap4Client();
        imap.Connect("mail.myhost.com");
        imap.Login("jdoe1234","tanstaaf");
        Mailbox inbox = imap.SelectInbox("inbox");
        FlagCollection flags = new FlagCollection();
        flags.Add("Read");
        flags.Add("Answered");
        inbox.AddFlags(1,flags);

//Message is marked as read and answered. All prior flags are unset.
        imap.Disconnect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T14:59:00.470

诀窍是取消设置“Seen”标志。有一种删除标志的方法：RemoveFlags()。您只需要要从中删除标志的消息的 id。

```
var imap = new Imap4Client();
imap.ConnectSsl(hostname, port);
imap.Login(username, password);

var inbox = imap.SelectMailbox("inbox");
var ids = inbox.Search("UNSEEN");
foreach (var messageId in ids)
{
        var message = inbox.Fetch.MessageObject(messageId);
        // process message

        var flags = new FlagCollection { "Seen" };
        inbox.RemoveFlagsSilent(messageId, flags);
} 
```

# c# - PartialView 中的部分内的 JavaScript

> ID：13083348
> 
> 赞同：1
> 
> 时间：2012-10-26T08:24:39.873
> 
> 标签：c#, asp.net-mvc, razor

我在 HEAD od HTML 页面中呈现部分，在页面中间呈现 PartialView，如下面的代码所示

```
<html>
<head>
    @RenderSection("Scripts", false)
</head>
.....
    @Html.Partial("_MenuAdmin")
</html> 
```

在 PartialView _MenuAdmin 我有一些 javascript。

```
@section Scripts
{
    <script type="text/javascript">
        alert("Test");
    </script>
} 
```

所以，问题是没有加载相同的 JavaScript 代码。如果改为 PartialView 我使用正确加载的 View JavaScript。

如何在我的示例中加载 JavaScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:42:16.760

`@section`在局部视图中不支持，您应该`@Scripts.Render`直接在视图中使用。

# android - Android 应用程序在旋转时出现问题

> ID：13083352
> 
> 赞同：-3
> 
> 时间：2012-10-26T08:24:46.783
> 
> 标签：android, rotation

> **可能重复：** [如何在 Android 中禁用方向更改？](https://stackoverflow.com/questions/1512045/how-to-disable-orientation-change-in-android)

我正在尝试制作一个 Android 应用程序。即使用户旋转设备，如何防止应用程序向右和向左旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:26:40.597

**通过在清单**中设置您想要的方向...

示例：添加`android:screenOrientation="portrait"`到清单或景观中的元素：

```
<application android:icon="@drawable/icon"
             android:label="@string/app_name">
    <activity android:name="QRCodeActivity"
              android:label="@string/app_name"
              android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

另请检查 Stack Overflow 问题*[Prevent screen rotation on Android](https://stackoverflow.com/a/9123421/1434631)*。

# html - Html 和 div 问题

> ID：13083353
> 
> 赞同：0
> 
> 时间：2012-10-26T08:24:51.293
> 
> 标签：html

我需要将 html 动态加载到 div 容器中，这种被称为溢出的 div 容器样式是隐藏的，我通过放置下一个和上一个按钮来导航到下一页和上一页来查看内容。但问题是内容显示在开头和结尾行在 div 中重叠。

**CSS**

### 内容{

```
 width: 95%;
            height: 200;``
            overflow: hidden;
            position: relative; 
```

}

```
<div id="content"></div> 
```

使用 jquery，我将内容加载到 div

```
$("#content").load("../page/index.html"); 
```

它成功加载了内容。但问题是一半的单词显示在顶部，其余的单词显示在最后。那么有什么方法可以截断这个问题。

单击此链接进行演示[http://jsfiddle.net/maheshkumar1983/gMfS8/1/](http://jsfiddle.net/maheshkumar1983/gMfS8/1/)

谢谢

![例如屏幕截图](../Images/b318607a1d34f12cc46525b9a6aeb5be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:35:51.787

我们必须使用 css 属性 multicolumn 来解决这个问题。当页面溢出时，它将自动附加到文本的下一列。

# google-maps - Ext.Panel 中的 Ext.Map

> ID：13083355
> 
> 赞同：0
> 
> 时间：2012-10-26T08:24:54.193
> 
> 标签：google-maps, extjs, sencha-touch-2

我有一个面板，想在其中放置一张地图（谷歌地图）。这可能吗？

当我直接打开我的地图页面时，它可以正常工作，但是当我将它放在面板中时，我只会得到一个没有地图视图的空​​白页面。

我的面板类：

```
Ext.define("app.view.TodoMaps", {
extend: 'Ext.Panel',
requires: "app.view.GoogleMaps",
alias: "widget.todomapscard",

config: {
    styleHtmlContent: true,
    items: [{
        docked: 'top',
        xtype: 'toolbar',
        ui: "light",
        title: 'Maps page',
        items: [
            {
                xtype: "button",
                ui: "back",
                text: "back",
                action: 'ButtonBackToHomeClicked'
            }]
    },
        {
            xtype: "googlemapscard"       <----------
        }
    ]
}
}); 
```

我的地图类：

```
Ext.define("app.view.GoogleMaps", {
extend: 'Ext.Map',
alias: "widget.googlemapscard",

//geo: geo, //Ext.util.Geolocation object
//useCurrentLocation: geo, //same var geo with geolocation object
config: {
    mapOptions:{
        zoom: 15,
        disableDefaultUI: true,
        //--Available Map Options--//

        panControl: false,
        zoomControl: false,
        mapTypeControl: false,
        scaleControl: false,
        streetViewControl: false,
        overviewMapControl: false
    }

}
}); 
```

如何实现地图在面板中可见。

PS。我需要一个面板的原因是因为我想导航回上一个面板。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:41:59.370

**将layout: 'fit'**添加到面板类后问题解决。

# javascript - html 属性中的 JS 函数 - 全部通过 php 回显。逃逸不正确？

> ID：13083358
> 
> 赞同：0
> 
> 时间：2012-10-26T08:25:00.567
> 
> 标签：javascript, wordpress, mouseover

我正在尝试在 html onmouseover 属性中运行 javascript 函数来交换图片。图片全部显示，但是onmouseover不起作用；我想我以错误的方式逃脱（浏览器显示>）-但是我找不到问题所在非常感谢您的帮助！

**一些代码：**

```
...
<?php       
            echo "<img src=\"$main_img_small\" alt=\"\" onmouseover=\"<script language=\"JavaScript\" type=\"text/javascript\" src=\"mouseover.js\"></script><script type=\"text/javascript\">swapImage(0);</script>\">";
                    echo "<img src=\"$var1_small\" alt=\"\" onmouseover=\"<script language=\"JavaScript\" type=\"text/javascript\" src=\"mouseover.js\"></script><script type=\"text/javascript\">swapImage(1);</script>\">";
                    echo "<img src=\"$var2_small\" alt=\"\" onmouseover=\"<script language=\"JavaScript\" type=\"text/javascript\" src=\"mouseover.js\"></script><script type=\"text/javascript\">swapImage(2);</script>\">";
    ?>
... 
```

**mouseover.js**（存储在同一文件夹中）：

```
 var phpvar1_large = <?php echo json_encode($var1_large); ?>;
        var phpvar2_large = <?php echo json_encode($var2_large); ?>;
        var phpvar3_large = <?php echo json_encode($var3_large); ?>;
        var phpvar4_large = <?php echo json_encode($var4_large); ?>;

        if(!phpvar1_large){
        var imgArray = new Array(
            '<?=$main_img; ?>'
            );
        }else if(!phpvar2_large){
            var imgArray = new Array(
            '<?=$main_img; ?>',
            '<?=$var1_large; ?>'
            );
        }else if(!phpvar3_large){
        var imgArray = new Array(
            '<?=$main_img; ?>',
            '<?=$var1_large; ?>',
            '<?=$var2_large; ?>',
            '<?=$var3_large; ?>'
            );
        }else if(!phpvar4_large){
            var imgArray = new Array(
            '<?=$main_img; ?>',
            '<?=$var1_large; ?>',
            '<?=$var2_large; ?>',
            '<?=$var3_large; ?>'
            );
        }else if(phpvar4_large){
        var imgArray = new Array(
            '<?=$main_img; ?>',
            '<?=$var1_large; ?>',
            '<?=$var2_large; ?>',
            '<?=$var3_large; ?>',
            '<?=$var4_large; ?>'
        );
        }

        function swapImage(imgID) {
            var theImage = document.getElementById('theImage');
            var newImg;
            newImg = imgArray[imgID];
            theImage.src = newImg;
        }

        function preloadImages() {      
            for(var i = 0; i < imgArray.length; i++) {
                var tmpImg = new Image;
                tmpImg.src = imgArray[i];
            }
        } 
```

**浏览器输出：**

```
...
<div id="image">
            <img id="theImage" src="http://ecx.images-amazon.com/images/I/41ioC67AdgL.jpg" alt="" />
        </div>

        <div id="thumbs">
            <img src="http://ecx.images-amazon.com/images/I/41ioC67AdgL._SL75_.jpg" alt="" onmouseover="<script language="JavaScript" type="text/javascript" src="mouseover.js"></script><script type="text/javascript">swapImage(0);</script>"><img src="http://ecx.images-amazon.com/images/I/41Yrx4v10TL._SL75_.jpg" alt="" onmouseover="<script language="JavaScript" type="text/javascript" src="mouseover.js"></script><script type="text/javascript">swapImage(1);</script>"><img src="http://ecx.images-amazon.com/images/I/41bzT-hN9mL._SL75_.jpg" alt="" onmouseover="<script language="JavaScript" type="text/javascript" src="mouseover.js"></script><script type="text/javascript">swapImage(2);</script>">

            <br />
        </div>

... 
```

所以，在你看到的小图右侧 ">

注意：如果您想知道，我最终会尝试在 wordpress 页面上运行它，这就是 javascript 命令看起来如此的原因（见此处：[http](http://codex.wordpress.org/Using_Javascript) ://codex.wordpress.org/Using_Javascript ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:39:41.503

不幸的是，您误解了 Codex 中的某些内容。脚本标签并不打算用于内联脚本调用。由于脚本标签是标准的 html 标签，因此您不能将它们填充到另一个 html-tag 的属性中。它还说：

> ...您可以在 header.php 模板文件的头部，在元标记和样式表链接之间设置 JavaScript 调用或脚本本身...。

所以你的 mouseover.js 文件应该链接在`<head>`结束标记之前或之前`</body>`。您链接的 Codex 条目不包括运行内联 JavaScript。

要修复您的代码，您必须将第一个脚本标记`<head>`放入您的内联 javascript 调用 ( `onmouseover="..."`) 中，然后将函数调用放入。您的代码必须如下所示：

```
<!-- This should be in your head-tag: -->
<script language="javascript" type="text/javascript" src="mouseover.js"></script>

...
<div id="thumbs">
    <img src="http://ecx.images-amazon.com/images/I/41ioC67AdgL._SL75_.jpg" alt="" onmouseover="javascript:swapImage(0);">
    <img src="http://ecx.images-amazon.com/images/I/41Yrx4v10TL._SL75_.jpg" alt="" onmouseover="javascript:swapImage(1);">
    <img src="http://ecx.images-amazon.com/images/I/41bzT-hN9mL._SL75_.jpg" alt="" onmouseover="javascript:swapImage(2);">
</div> 
```

但是，我建议您了解 JavaScript 中的事件侦听器或尝试使用 jQuery 将鼠标悬停功能添加到特定的 HTML 元素。内联 JavaScript（`onmouseover=""`等）会弄乱您的 HTML。

# javascript - 如果 IF 语句结束函数，为什么要使用 IF...ELSE？

> ID：13083359
> 
> 赞同：2
> 
> 时间：2012-10-26T08:25:19.730
> 
> 标签：javascript, function, if-statement

在可读性之外使用 if...else 有什么好处吗？

例如，如果我有一个功能：

```
function a(b){
  if(b=="c"){
    return true
  }else{
    return false
  }
} 
```

我不能把它浓缩成这样：

```
function a(b){
  if(b=="c"){
    return true
  }
  return false
} 
```

只要 b=="c"，return false 就不会触发，但它不需要 else 语句。

我遇到过很多次，我总是选择更精简的版本（主要是为了节省更多的写作时间）。对于这样的例子，是否有理由包含 else 语句而不是可读性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:35:50.637

通常`else`after`return`被认为是多余的，但是，当“yes”和“no”分支在某种意义上相似时，为了对称，最好将它们保持在相同的缩进级别。比较：

```
// confusing

if (spam.exists()) {
    $(box).content = "Spam already exists";
    $(button).disable();
    return failure;
}

$(box).content = "Added new spam";
$(button).enable();
return success; 
```

和

```
// less confusing

if (spam.exists()) {
    $(box).content = "Spam already exists";
    $(button).disable();
    return failure;
} else {
    $(box).content = "Added new spam";
    $(button).enable();
    return success;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:26:44.520

```
function a(b) { return b == "c";} 
```

后期编辑：

如果你的“if”中有一个“return”语句，你可以省略“else”语句，因为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:29:50.903

在给定的示例中，没有实际差异。我发现最好使用 return 语句过滤掉所有不正确的输入结果或可能的错误，以防止函数体过度识别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:40:24.250

如果条件命令是或以其他方式停止函数或脚本，则答案是**否定的。**`return`

但是如果只有一个条件命令，那么括号`{}`就没有用了：

```
function a(b){
    if(b=="c") return true;
    return false;
} 
```

和

```
function a(b){
    if(b=="c") return true
        else return false;
} 
```

做与原始帖子完全相同的工作。该`else`语句通常用于这种技巧：

```
if (b=="c") z="match"
   else z="wrong"; 
```

notice that there is no semicolumn `;` after the `true` in second sample and after`"match"`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T10:38:50.137

You can probably omit the else statement in your case. JSLint is even throwing in error when using `else` after a `return`.

Try following code on [JSLint](http://www.jslint.com):

```
function test() {

    "use strict";
    var b;
    if(b === "c") {
        return true;
    } else {
        return false;
    }
} 
```

# c++ - boost::container::vector 无法用 C++03 编译器编译

> ID：13083360
> 
> 赞同：3
> 
> 时间：2012-10-26T08:25:24.333
> 
> 标签：c++, boost, c++11

以下示例在使用带有 --std=c++0x 标志的 GCC 4.4.6 时编译良好，但在 C++03 模式下编译失败。

```
#include <stdint.h>
#include <boost/container/vector.hpp>

struct data
{
   int               i_;
   boost::container::vector<data>      v_;
};

int main( int argc, char** argv )
{
    data myData;
    myData.i_ = 10;

    data myData2;
    myData2.i_ = 30;

    myData.v_.push_back( myData2 );

    return 0;
} 
```

它编译成功

```
 g++ --std=c++0x test-cont.cpp 
```

但是，如果我删除`--std=c++0x`我得到以下错误： g++ test-cont.cpp In include/c++/4.4.6/memory:49, boost/container/container_fwd.hpp:36, boost/container/vector.hpp :20，来自 test-cont.cpp:2:

```
include/c++/4.4.6/bits/stl_algobase.h: In static member function 
    static _OI std::__copy_move<false, false, std::random_access_iterator_tag>::
        __copy_m(_II, _II, _OI) [with _II = 
            boost::container::constant_iterator<data, long int>, _OI = data*]:

include/c++/4.4.6/bits/stl_algobase.h:397:   instantiated from 
    _OI std::__copy_move_a(_II, _II, _OI) 
        [with bool _IsMove = false, 
                   _II = boost::container::constant_iterator<data, long int>, _OI = data*]

include/c++/4.4.6/bits/stl_algobase.h:436:   instantiated from 
    _OI std::__copy_move_a2(_II, _II, _OI) 
    [with bool _IsMove = false, 
               _II = boost::container::constant_iterator<data, long int>, _OI = data*]

include/c++/4.4.6/bits/stl_algobase.h:468:   instantiated from 
    _OI std::copy(_II, _II, _OI) 
        [with _II = boost::container::constant_iterator<data, long int>, _OI = data*]

boost/move/move.hpp:1147:   instantiated from 
    boost::copy_or_move(I, I, F, 
        typename boost::move_detail::disable_if< boost::move_detail::is_move_iterator<I>, void>::type*) 
        [with I = boost::container::constant_iterator<data, long int>, F = data*]

boost/container/detail/advanced_insert_int.hpp:58:   instantiated from 
    void boost::container::container_detail::advanced_insert_aux_proxy<A, FwdIt, Iterator>::copy_remaining_to(Iterator) 
    [with A = std::allocator<data>, FwdIt = boost::container::constant_iterator<data, long int>, Iterator = data*]

test-cont.cpp:21:   instantiated from here

include/c++/4.4.6/bits/stl_algobase.h:343: error: 
    no match for operator= in * __result = 
        __first.boost::container::constant_iterator<T, Difference>::operator* 
        [with T = data, Difference = long int]()

test-cont.cpp:5: note: candidates are: data& data::operator=(data&) 
```

看起来 boost::container::vector 需要`move`语义，我假设在使用`boost::move`c++03 编译器编译时会自动使用这些语义。

如果我手动修改`struct data`定义：

1.  默认构造函数
2.  复制构造函数
3.  赋值运算符
4.  使用 BOOST_RV_REF 的模拟移动构造函数
5.  使用 BOOST_RV_REF 的模拟移动赋值运算符

该示例编译。

必须为 C++03 手动添加这些移动/复制构造函数和赋值运算符很费力。

这是一个错误`boost::container`吗？如果是这样，向 boost 社区报告的最佳方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:07:12.250

这是对 C++03 中仿真的限制（[来自此处](http://www.boost.org/doc/libs/1_51_0/doc/html/move/emulation_limitations.html#move.emulation_limitations.assignment_operator)）：

> 宏 BOOST_COPYABLE_AND_MOVABLE 需要为 copyable_and_movable 定义一个复制构造函数，在 C++03 编译器中采用非常量参数：

```
//Generated by BOOST_COPYABLE_AND_MOVABLE
copyable_and_movable &operator=(copyable_and_movable&){/**/} 
```

> 由于生成了复制构造函数的非常量重载，编译器生成的包含 copyable_and_movable 的类的赋值运算符会得到非常量复制构造函数重载，这肯定会让用户感到惊讶。 **这种限制迫使用户在所有持有可复制和可移动类的类中定义复制分配的 const 版本，这在某些情况下可能会令人讨厌**。

在您的情况下`boost::container::vector<data> v_;`使用`BOOST_COPYABLE_AND_MOVABLE(vector)`因此错误。

# symfony - Symfony2 表单中的验证不起作用

> ID：13083361
> 
> 赞同：0
> 
> 时间：2012-10-26T08:25:31.953
> 
> 标签：symfony

我创建了一个表单，当我将它发送到服务器时，我收到一个内部服务器错误，因为存在不允许的空字段。但我想知道，因为我使用以下代码检查表单，因此通常应该跳过数据库操作。可能是什么原因？

控制器：

```
public function newAction(Request $request) {

    $objTrip = new Trip();
    $objForm = $this->createForm(new TripType, $objTrip);

    if ($request->isMethod('POST')) {
        $objForm->bind($request);

        if ($objForm->isValid()) {
            $objEm = $this->getDoctrine()->getManager();
            $objEm->persist($objTrip);
            $objEm->flush();

            $response = new Response(json_encode(array('success' => true)));
            $response->headers->set('Content-Type', 'application/json');
            return $response;
        }

        // Es traten Fehler auf
        $arrErrors = array();
        foreach($objForm as $objField) {

            if($objField->hasErrors())
                foreach($objField->getErrors() as $objError)
                    $arrErrors[] = array($objField->var['id'] => $objError->getMessage());
        }
        $response = new Response(json_encode(array('success' => false, 'errors' => $arrErrors)));
        $response->headers->set('Content-Type', 'application/json');
        return $response;
    }

    return array('form' => $objForm->createView());
} 
```

实体：

```
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", length=100)
 * @Assert\MinLength(
 *     limit=3
 * )
 */
protected $startLocation;

/**
 * @ORM\Column(type="string", length=100)
 */
protected $endLocation;

/**
 * @ORM\Column(type="datetime")
 */
protected $startTime;

/**
 * @ORM\Column(type="decimal", scale=2)
 */
protected $price; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:51:27.027

@Gerrit，嗨，看起来你没有使用 NotBlank 约束。MinLength 跳过空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:32:10.327

```
 /**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", length=100)
 * @Assert\MinLength(
 *     limit=3
 * )
 */
protected $startLocation;

/**
 * @ORM\Column(type="string", length=100)
 */
protected $endLocation;

/**
 * @ORM\Column(type="datetime")
 */
protected $startTime;

/**
 * @ORM\Column(type="decimal", scale=2)
 */
protected $price; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:32:17.077

当您获得实体中不存在的表单类型字段时，通常会出现您提到的错误。

你能因此也向我们展示 FormType 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:11:01.777

@Flask，不仅-对我来说，通常会出现内部异常，因为我不会为 notnull 字段设置正确的（例如）NotBlank 验证器并关闭 html5 验证或进行功能测试），但 ofc 很适合查看 FormType :)

顺便提一句。（对不起offtop）我只能评论我自己的答案是否正常？

# batch-file - CMD/BATCH 编程 - 文件内容搜索和文件内容修改

> ID：13083366
> 
> 赞同：0
> 
> 时间：2012-10-26T08:25:58.697
> 
> 标签：batch-file, cmd

我需要生成一个简单的 .BAT 脚本/文件。我以为这很容易，但我错了:-(

BAT 脚本必须（我相信）：

1.  使用 const searchstring 进行搜索
2.  获取“开始”目录的绝对文件夹路径
3.  采用文件名掩码/正则表达式进行搜索
4.  将 const 字符串“附加”到文件的内容中
5.  递归遍历开始目录和子目录中的所有文件（向下 n 级）搜索（和“处理”）与文件名掩码/正则表达式匹配的任何文件
6.  搜索“当前”文件的内容（所有可以在 NOTEPAD 中打开的“文本”文件），以查找搜索字符串。搜索字符串可以在文件中的任何位置找到 0、1 或多次。
7.  如果找到了 searchstring，则什么也不做。如果未找到搜索字符串，则将新字符串附加到文件末尾。瞧！（理论上）

这是我已经拥有的，并没有真正起作用。我有几个可以看到的问题。如何获取“当前文件”以及如何在每个文件之后“重置”ERRORLEVEL。

```
SET SEARCHSTRING="search for this text"
SET STARTPATH="C:\StartFolder\*"
SET MATCHFILES="*.txt"
SET APPENDSTRING="Appended text"
findstr /c:%SEARCHSTRING% /b /i /d:%STARTPATH% %MATCHFILES%
SET FOUND=%ERRORLEVEL%
REM 0=true, 1=false
IF %FOUND%==1 (
                REM ISSUE: How to get "current" file path???
                REM %APPENDSTRING% >> %CURRENTFILEPATH%
              ) 
```

欢迎提出任何问题/建议

干杯

凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:51:44.757

我通常不喜欢在我的变量值中包含引号。然后我在扩展时根据需要添加封闭引号。而不是`set var="value"`，我喜欢使用`set "var=value"`. 如果我稍后需要用引号括起来，那么我会使用`"%var%"`.

*注意：我下面的代码都没有经过测试。可能会有一些愚蠢的错误，但我相信整体概念是合理的*

下面的简单脚本应该可以处理大多数情况。使用该`/M`选项是为了让 FINDSTR 不会浪费时间在每一行中搜索多个 - 一旦找到匹配的单行，它就会退出。

```
@echo off
setlocal
set "SEARCHSTRING=search for this text"
set "STARTPATH=C:\StartFolder"
set "MATCHFILES=*.txt"
set "APPENDSTRING=Appended text"
for /r "%STARTPATH%" %%F in ("%MATCHFILES%") do (
  >nul findstr /mbic:"%SEARCHSTRING%" "%%~F" || >>"%%F" echo(%APPENDSTRING%
) 
```

但是有很多情况可能会破坏上述代码。

*   像 unquoted 等有毒字符`&`在展开`|`时可能会导致问题`%APPENDSTR%`

*   `"%SEARCHSTRING%"`如果 SEARCHSTRING 还包含引号，毒字符可能会在扩展时引起问题。

*   FINDSTR对文字搜索字符串中的字符`\`和字符有尴尬的转义规则。`"`

*   如果 SEARCHSTRING 的某些字节码 > 128，则 FINDSTR 可能无法正常工作。

请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)有关使用 FINDSTR 的复杂性的更多信息

使代码在所有情况下都能正常工作的最简单方法是使用延迟扩展来避免变量值中的毒字符问题，并将搜索字符串存储在临时文件中并使用 FINDSTR`/G`选项。搜索字符串中的任何`\`字符都必须转义为`\\`. 必须在 FOR 循环中禁用延迟扩展，以便包含`!`的文件名不会损坏。

```
@echo off
setlocal disableDelayedExpansion
set "SEARCHSTRING=search for this text"
set "STARTPATH=C:\StartFolder"
set "MATCHFILES=*.txt"
set "APPENDSTRING=Appended text"

set "tempFile=%temp%\search%random%_"
setlocal enableDelayedExpansion
>"%tempFile%search.txt" echo(!SEARCHSTRING:\=\\!
>"%tempFile%append.txt" echo(!APPENDSTRING!
endlocal

for /r "%STARTPATH%" %%F in ("%MATCHFILES%") do (
  >nul findstr /mbig:"%tempFile%search.txt" "%%~F" || type "%tempFile%append.txt" >>"%%~F"
)

del "%tempFile%*.txt" 
```

# html - 从 HTML 调用 YUI 函数

> ID：13083372
> 
> 赞同：0
> 
> 时间：2012-10-26T08:26:26.263
> 
> 标签：html, function, yui

我有来自 YUI 官方网站的 Dial 示例，它很棒。我在 JS 文件中有该函数并且工作正常，但我想在 html 页面中使用一些参数（如值、最小值、最大值等）调用它，但没有任何作用。

拨号功能是这样的：

```
YUI().use('dial', function(Y) {

    var dial = new Y.Dial({
        min:-220,
        max:220,
        stepsPerRevolution:100,
        value: 30
    });
    dial.render('#demo');

} 
```

太感谢了！

编辑：我将编写一个非常简单的 C++ 代码，我想你会明白我想要什么：

```
int a = 3;int b = 4;
example (a, b);

a=2;b=4;
example (a, b);

void example (a, b){  //this shoud be the dial function in a JS file
    int c = a + b;
    cout << c; 
} 
```

如您所见，每次我调用“示例”时我都会打印 C 并在每次调用它时指定我想要的值。如果我调用示例 8 次，它将打印 C 变量 8 次。这就是我想要的表盘。我想调用尽可能多的函数，该函数使用我需要的参数从 HTML 页面创建 Dial，并且该函数将使用这些参数创建 Dial。我不知道这是否可能，但我需要这个，所以谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:11:31.540

您不会从 HTML 中调用 JavaScript 代码。相反，您监听 HTML 中发生的事件并做出响应。

例如，假设你有这个：

显示表盘

然后你要做的是：

```
Y.one('#go').on('click', function () {
    var dial = new Y.Dial({
       min:-220,
       max:220,
       stepsPerRevolution:100,
       value: Y.one('#value').get('value');
    });
    dial.render('#demo');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:11:44.840

您的 HTML 应包含如下内容：

```
<div id="demo"></div>
<script src="http://yui.yahooapis.com/3.7.3/build/yui/yui-min.js"></script>  
<script>
YUI().use('dial', function (Y) {
    var dial = new Y.Dial({
        min:-220,
        max:220,
        stepsPerRevolution:100,
        value: 30
    });
    dial.render('#demo');
});
</script> 
```

那不适合你吗？

编辑：根据评论中的讨论添加另一个示例。你可以这样做：

HTML 文件：

```
<div id="demo"></div>
<script src="http://yui.yahooapis.com/3.7.3/build/yui/yui-min.js"></script>  
<script>
    var dialConfig = {
        min:-220,
        max:220,
        stepsPerRevolution:100,
        value: 30
    }
</script>
<script src="/path/to/initialize-widgets.js"></script> 
```

初始化小部件.js 文件：

```
YUI().use('dial', function (Y) {
    var dial = new Y.Dial(dialConfig);
    dial.render('#demo');
    // possibly do more setup work after this... 
}); 
```

# javascript - jQuery 为不同的元素创建 .change 和 .click 事件以调用相同的函数

> ID：13083373
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:26:27.047
> 
> 标签：javascript, jquery

我用谷歌搜索，但其中大多数是为 SAME 元素绑定不同的事件。

为了

```
$('#a').change(function() {
     /bla
     /bla
});

$('#b').click(function(){
     /bla
     /bla
}); 
```

我想要这样的东西

```
$('#a').change OR ('#b').click(function(){
     /bla
     /bla
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:27:35.587

尝试这个：

```
var func = function(){
     /bla
     /bla
};

$('#a').change(func);
$('#b').click(func); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T08:28:27.953

为什么不把你想重用的代码放在一个函数中，然后重用它呢？

```
function doSomething() {
  // bla
} 
```

然后...

```
$('#a').change(function() {
     doSomething();
});

$('#b').click(function(){
     doSomething();
}); 
```

# jquery - div 的宽度和高度随着 textarea 内容的增加而增加

> ID：13083376
> 
> 赞同：4
> 
> 时间：2012-10-26T08:26:43.817
> 
> 标签：jquery, html

div 随着输入的文本而增加。美好的。但是当我按下回车键时，高度应该根据文本大小增加，宽度也不应该增加，直到文本达到上述宽度。请帮忙

[http://jsfiddle.net/shabbirrangwala/NkRYY/8/](http://jsfiddle.net/shabbirrangwala/NkRYY/8/)

```
$('textarea').keyup(function(e) {
    if ((e.keyCode || e.which) == 13) {
        $('.EDetailInset').css('height', ((this.value.length + 1) * 3) + 'px');
    }
    else {
        $('.EDetailInset').css('width', ((this.value.length + 1) * 11) + 'px');
    }
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:51:23.963

让我知道它是否按预期工作。不知何故，你需要保持宽度不变

```
var tWidth = $('textarea')[0].value.length;
var vWidth = 0;
var hIncr = 2; //initial line count - looks somehow?
var iheight = $('.EDetailInset').css('height').replace('px',''); //default height to height of box
$('textarea').keyup(function(e) {

if ((e.keyCode || e.which) == 13) {
$('.EDetailInset').css('height', (hIncr * iheight) + 'px'); //increase height by one line
  vWidth = 0; //so that the width does not increase
  hIncr++; //increase line number
}
else 
{

    vWidth = (vWidth+1);  //only this increase and reset to zero for new line
    if(vWidth*11 > tWidth) //if more characters than we had, increase box width
        tWidth = vWidth*11;
    console.log((vWidth*11)+':'+tWidth);

$('.EDetailInset').css('width', (tWidth) + 'px'); //no increment, width is static

}
});​ 
```

## [检查这个 JS Fiddle](http://jsfiddle.net/8d54z/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:16:56.050

虽然远非完美，但这是我的尝试：http: [//jsfiddle.net/V6BSY/2/](http://jsfiddle.net/V6BSY/2/)

我只是试图解决水平缩放的问题，因为很多其他人已经展示了垂直缩放是如何完成的。

这也减少了使用退格键时容器的大小。

**HTML：**

```
<div id="txt">
    <textarea></textarea>
</div> 
```

**CSS：**

```
#txt {
    background-color: rgba(208,228,254,0.3);
    border: 2px dashed #000000;   
    height: 20px;
    padding: 5px;
}

#txt textarea {
    border: none;
    background: none;
    resize: none;
    outline: none;
    overflow: hidden;
    width: 10px;
    height: 15px;
    font-size: 10px;
}
​ 
```

**JavaScript：**

```
$(document).ready(function() {
    $("#txt").css("width", $("#txt textarea").css("width"));
});

$('textarea').keydown(function(e) {

    lines = $('#txt textarea').val().split('\n');
    maxLength = getLengthOfLongestLine(lines);

    var h = parseInt($(this).get(0).scrollHeight) + 5;
    var w = maxLength * parseInt($(this).css('font-size'));

    if ((e.keyCode || e.which) == 13) {
        $("#txt").css("height", h);
        $(this).css("height", h);        
    } else {
        $("#txt").css("width", w);
        $(this).css("width", w);        
    }

});

function getLengthOfLongestLine(arrLines) {        
    var maxLength = 0;
    for(var line in arrLines) {
        if (arrLines[line].length > maxLength) {
            maxLength = arrLines[line].length;
        }
    }
    return maxLength;                          
}
​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T08:48:08.763

试试这个：http: [//jsfiddle.net/NkRYY/62/](http://jsfiddle.net/NkRYY/62/)

```
// HTML
<div id="EDetail" class="EDetail EDetailText">
    <div class="EDetailInset" >
        <span style="font-size: 17px;">

        </span>
        <textarea></textarea>
    </div>
</div>

// CSS
.EDetail, .EDetailDisabled {

    font-size: 20px;
    overflow: visible;    
    position: absolute;
}

.EDetail {
    border-radius: 3px 3px 3px 3px;

}

.EDetailInset {
    background-color: rgba(217,247,217,0.3);
    font-size: 20px;
    height : 22px;
    padding: 5px;
    background-color: rgba(208,228,254,0.3);
    border: 2px dashed #000000;

    position: absolute;
    cursor: move;
    min-width:100px;

}

.EDetailText textarea, .EDetailText span {
    font: 100%/1.1 arial,sans-serif;
    position: absolute;
    white-space: pre;
   padding: 5px;
}
.EDetailText textarea, .EDetailText textarea[disabled] {

    background: none repeat scroll 0 center transparent;
    border: 0 none;
    bottom: 6px;
    box-shadow: none;
    color: #000000;
    display: block;
    height: 90%;
    left: 0px;
    line-height: 1.1;
    outline: 0 none;
    padding: 5px;
    resize: none;
    right: 6px;
    top: 0px;
    transition: none 0s ease 0s;
    width: 90%;
    overflow:auto;
}

//JS
$('textarea').keyup(function(e) {

    if ((e.keyCode || e.which) == 13) {
    $('.EDetailInset').css('height', ((this.value.length + 10) * 3) + 'px');

    }
    //else
    //{
    //$('.EDetailInset').css('width', ((this.value.length + 10) * 11) + 'px');
    //}
    }); 
```

它达到的极限宽度是多少？

# jquery - 提取链接的标题值

> ID：13083378
> 
> 赞同：1
> 
> 时间：2012-10-26T08:26:46.113
> 
> 标签：jquery, hyperlink, append, extract, title

如何将链接的标题值附加为链接的文本。我有这个代码：

```
<a href="#" title="Title value"></a> 
```

...点击它后，我想要这样的东西：

```
<a href="#" title="Title value">Title value</a> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:27:58.157

尝试这个：

```
$("a").click(function() {
    $(this).text($(this).prop("title"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:28:11.493

这个

```
$('a').click(function() {
    $(this).text($(this).attr('title'));
} 
```

应该管用。

也许您想给您的`<a>`标签一个特殊的 ID，以便您可以引用它。

# c# - automapper - 使用值映射属性

> ID：13083392
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:27:50.417
> 
> 标签：c#, automapper

我有两个对象，它们基本上（所以不完全！）相同。它们都具有带值的属性。

我想将一个对象映射到另一个对象，并将源目标的所有属性值覆盖到目标目标。但似乎默认情况下不会发生这种情况？

**注意：** 我的地图已在我的应用程序启动时定义。

我的对象基本上是这样的：

```
public class Object1
{
    public String Name = "My new Name";
}

public class Object2
{
    public String Name = "My old Name";
}

// Then somewhere in my code:
Mapper.Map(obj1, obj2); 
```

所以我尝试将所有值从`Object1`, 映射到`Object2`. 但是当映射完成时，`Object2`仍然有它的旧值，而不是来自的值`Object1`。

如何映射 AutoMapper 中的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:31:38.203

您应该`AutoMapper`首先配置：

```
Mapper.CreateMap<Object1, Object2>(); 
```

在您的示例中，您试图映射`classes`但它不可能，您应该映射`instances`类：

```
var o1 = new Object1();
var o2 = new Object2();

Mapper.Map(o1, o2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:36:48.710

**更新**

`Automapper`返回新实例，将该返回实例分配给旧实例。

```
object1 = Mapper.Map<Object1, Object2>(object2); 
```

# php - 使用 TinyMCE 的 Google Docs 样式自动保存

> ID：13083398
> 
> 赞同：5
> 
> 时间：2012-10-26T08:28:05.313
> 
> 标签：php, jquery, ajax, tinymce, google-docs

我有一个使用在 LAMP 系统上运行的 TinyMCE 编辑器的表单。我希望创建一个类似于 Google Docs 的自动保存功能。但是，我想到了两种情况，两种情况都会在服务器上产生开销。

1.  在 keyup 上发布 Ajax 请求
2.  每 60 秒发布一次 Ajax 请求

显然第一点是不可行的。任何人都可以提出更好的解决方案来解决第二点吗？

**编辑 1**

好的，所以第三种选择可能是 Thariama 的回答和我的第二点的结合。

3) 如果有重大变化，例如 10 个字符或更多，每 60 秒发布一次 Ajax 请求

对此的任何进展将不胜感激。

**编辑 2**

好的，我已经根据第 3 点对我的解决方案进行了原型设计。如果有人感兴趣，我的代码流程如下：

我正在使用 JQuery。我有一个带有 TinyMCE 的 textarea 表单和一个用于存储击键计数的隐藏字段。

```
tinyMCE.init({
  ...
  // Callback for counting keystrokes in TinyMCE
  handle_event_callback : "keyCount"
});

$(function() {
  autoSaveContent();
});

// Callback function - Get count, increment it and then set it
function keyCount(e) {
  if(e.type == "keypress") {
    var count = parseInt($("#keyCount").val());
    count++;
    $("#keyCount").val(count);
  }
}

// Autosave every 10s if there have been over 30 keystrokes
function autoSaveContent() {
  var keyCount = parseInt($("#keyCount").val());
  if(keyCount > 30) {
    tinyMCE.triggerSave();
    var formData = $("#programmedItineraryForm").serialize();
    $.post("/path/to/save.php", formData, function(data,textStatus) {
      if(data.success) {
        $("#keyCount").val(0);
      }
    });
  }
  setTimeout('autoSaveContent()',10000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:42:58.060

嗯，有很多选择。第1点确实有点太贵了。我认为根据编辑器中输入的新字符数发送请求是个好主意。例如，每 5-10 个新字符发送一次请求。您可以增加计数器 onKeyDown 或 onKeyUp 并在发送请求时重置该计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T16:59:12.897

```
tinymce.init({
    plugins: "autosave"
}); 
```

# ruby-on-rails - 由于 sqlite3 gem 错误，Heroku 部署失败

> ID：13083399
> 
> 赞同：19
> 
> 时间：2012-10-26T08:28:06.703
> 
> 标签：ruby-on-rails, deployment, heroku, sqlite, gem

我刚刚开始阅读 Michael Hartl 的 ruby​​.railstutorial.org 书，并且一直在学习第一章。我正在使用 mac book OS X、终端和 Sublime Text。一切都按计划进行，直到测试部署到 Heroku。我能够连接到 Heroku 并运行`$ git push heroku`主命令。但部署失败：

```
Installing sqlite3 (1.3.5) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:

An error occurred while installing sqlite3 (1.3.5), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.5'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

这是我的 Gemfile

```
source 'https://rubygems.org'

       gem 'rails', '3.2.8'

       # Bundle edge Rails instead:
       # gem 'rails', :git => 'git://github.com/rails/rails.git'

       group :development, :test do
   gem 'sqlite3', '1.3.5'
       end

       # Gems used only for assets and not required
       # in production environments by default.
       group :assets do
       gem 'sass-rails',   '~> 3.2.5'
       gem 'coffee-rails', '~> 3.2.2'

       # See https://github.com/sstephenson/execjs#readme for more supported runtimes
       # gem 'therubyracer', :platforms => :ruby

       gem 'uglifier', '>= 1.2.3'
       end

       gem 'jquery-rails', '2.0.2'

       group :production do
   gem 'pg', '0.12.2'
       end

       # To use ActiveModel has_secure_password
       # gem 'bcrypt-ruby', '~> 3.0.0'

       # To use Jbuilder templates for JSON
       # gem 'jbuilder'

       # Use unicorn as the app server
       # gem 'unicorn'

       # Deploy with Capistrano
       # gem 'capistrano'

       # To use debugger
       # gem 'debugger' 
```

我将 sqlite3 指定用于开发而不是生产，所以我认为 Heroku 会一起忽略它，但情况似乎并非如此。

另外，当我创建捆绑包时，我正在使用 $ bundle install --without production

我知道有些人建议只安装 PG 并使用它，但我真的想尽可能地坚持本教程，然后再冒险尝试不同的方法。

我现在有点迷茫，不知道如何从这里开始。您可以提供的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T08:31:54.753

无论出于何种原因，Heroku 都无法安装 sqlite3 gem。但是你可以`bundler`说它不应该尝试，除非在开发时。

在您的`Gemfile`中，替换`gem 'sqlite3'`为：

```
group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```

然后在 heroku 上运行的 bundler`production`不会尝试安装它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-26T17:58:24.820

我终于能够成功部署到 Heroku。感谢 evanc3 将我指向 Heroku 网站上的一篇文章。看来我只是忘记在部署到 Heroku 之前提交我的 Gemgile 更新。因此，对于所有刚起步的人，您需要确保在部署到 Heroku 之前提交您的更改。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-23T18:06:08.090

Heroku 不支持 sqlite3...

从您的 Gemfile 中删除 sqlite3，改用 pg gem。在 gem 文件中进行以下更改

更改以下内容`Gemfile`

```
gem 'sqlite3' 
```

至

```
gem 'pg' #you will have to install postgresql 
```

重要：运行

```
git add .
git commit 
git push heroku master 
```

注意：如果你打算为heroku部署，我建议你最好在开发阶段也使用postgres（在你的计算机上安装postgresql），heroku更喜欢psql。

如果您想使用 sqllite 进行开发，使用 postgresql 进行 Heroku，请使用以下配置。

```
group :development do 
   gem 'sqlite3'    #gem to use in development environment
end

group :production do 
  gem 'pg'         #gem to use in production environment
end 
```

Heroku 将使用`pg`gem，因为 heroku 在生产环境中运行您的应用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:49:17.817

在 Heroku 上，您的应用程序无权访问文件系统。造成这种情况的原因有很多 - 基本上是因为您可以通过添加新实例（即一次运行多个服务器）来扩展应用程序的性能，并且不能保证这些实例在同一物理机器上 - 复制跨越的文件会非常慢。

SQLite 只是将数据库存储到您的 db/ 文件夹中的一个文件中，这就是它与 Heroku 不兼容的原因。

正如帮助链接中所建议的那样，最好的选择是远离 SQLite，因为 SQLite 和 PostgreSQL（Heroku 的首选数据库）之间有时存在细微的不兼容性，您希望在部署到生产*之前*找出这一点！

安装 PostgreSQL 后（具体如何执行取决于您的操作系统），然后添加`gem 'pg'`到您的 Gemfile。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-02T20:54:51.000

在 Rails 教程中，他们让您`sqlite3`在开发和`pg`生产中使用。heroku 部署可能失败的一个原因是，如果您`production`在 heroku 上的部署仍然引用`sqlite`您的`database.yml`而不是`postgres`.

**tldr;** 您`config/database.yml`应该与此处显示的匹配： [https ://github.com/mhartl/sample_app_6th_ed/blob/main/config/database.yml](https://github.com/mhartl/sample_app_6th_ed/blob/main/config/database.yml)

最重要的是你的`production`配置行应该匹配这个（这样`adapter: postgres`而不是`adapter: sqlite3`）：

```
production:
  adapter: postgresql
  encoding: unicode
  # For details on connection pooling, see Rails configuration guide
  # https://guides.rubyonrails.org/configuring.html#database-pooling
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  database: sample_app_production 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-18T20:01:26.087

如果您的 gemfile 中没有直接包含 sqlite3 并且您仍然收到此错误，我有一个解决方案。

最有可能的是，您有一个使用 sqlite3 作为依赖项的 gem，并且它在您不知道的情况下包含了 gem。

1) 转到 Gemfile.lock 并搜索 sqlite。

2) 找到使用 sqlite 的 gem，然后将 gem 移动到开发或测试组。

3) 捆绑

# php - 如何向 XML 发送 POST 请求以获取数据？

> ID：13083401
> 
> 赞同：0
> 
> 时间：2012-10-26T08:28:11.117
> 
> 标签：php, xml, http-post

> **可能重复：**
> [使用 PHP 将 XML 发布到 URL 并处理响应](https://stackoverflow.com/questions/471506/post-xml-to-url-with-php-and-handle-response)

有一个 XML 可以通过 POSTing 省 id 返回城市列表。（它通过 POST 接受 id） **[http://example.com/get_city_list.xml](http://example.com/get_city_list.xml)**

```
<cities>
  <city>
    <id></id>
    <name></name>
  </city>

  <city>
    <id></id>
    <name></name>
  </city>

  <city>
    <id></id>
    <name></name>
  </city>
<cities> 
```

如何将省 ID（通过 POST REQUEST）发送到 XML？

我正在使用 php 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:36:28.560

使用卷曲：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/path/to/form");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data = array(
    'foo' => 'foo foo foo',
    'bar' => 'bar bar bar',
    'baz' => 'baz baz baz'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

# javascript - 失去焦点时文本区域光标跳到顶部 IE8

> ID：13083404
> 
> 赞同：3
> 
> 时间：2012-10-26T08:28:16.460
> 
> 标签：javascript, jquery, html, internet-explorer-8

我有一个标准文本区域，其中包含很多显示溢出的内容，当我通过单击或跳出文本框而失去对该文本区域的关注时，文本框中的光标会跳到顶部。

另外，当我停止打字时，也会发生同样的情况

有什么办法可以用 jquery 或其他方式来防止这种情况发生吗？我不确定这是否是 IE8 中的错误，但这是客户端请求。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:50:44.253

这是 IE8 中公认的错误，但我知道没有可用的修补程序/修补程序（另外，即使有，也不能保证查看您页面的计算机有修补程序/修补程序）。

这发生在使用百分比宽度而不是固定宽度的文本框上，并且有几个记录的“修复”，尽管并非所有这些都对我有用......

首先，可以选择通过 CSS 固定 textarea 的宽度，还可以使用`min-width`and`max-width`设置百分比（但是，这在旧浏览器中不起作用）。这对我不起作用，因为我使用的大量文本区域都需要不同的宽度。

```
textarea {
  width: 700px;
  min-width: 100%;
  max-width: 100%;
} 
```

[这是最初发现该错误的人的一篇文章，并对上述内容进行了解释。](http://grantovich.net/misc/ie8-textarea-bug/)

其次，您可以尝试将列数设置为比文本框的视觉大小大得多。 [这是一个答案，详细说明了如何执行此操作，以及为什么他们认为这是问题所在。](https://stackoverflow.com/a/2933329/930393) 然而，我实际上无法让它发挥作用，尽管它是有几个赞成票的公认答案。

`meta`最后，我选择在每个页面的开头使用以下标记强制 IE8 使用兼容模式（我使用 ASP.NET 母版页，所以这不是一项大工作）。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

这也会使“兼容性”按钮消失，因此您的用户不可能不小心将其放回 IE8 模式。

# python - python中的拆分集

> ID：13083418
> 
> 赞同：0
> 
> 时间：2012-10-26T08:29:39.900
> 
> 标签：python, set

我有一组带有一些键值对的字典。我想知道将它们分成两半然后对每组应用一些处理的最有效方法。我想那里有一个班轮……

即，如果我有字典 A、B、C、D，我希望得到结果集：(A,B)、(A,C)、(A,D) 而不是剩余的集 (C,D) ,(B,D),(B,C)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T08:34:13.770

`itertools`和 one-liners 通常属于同一个句子：

```
>>> import itertools
>>> s = ['A', 'B', 'C', 'D']
>>> i = itertools.product(s[0], s[1:])
>>> list(i)
[('A', 'B'), ('A', 'C'), ('A', 'D')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:32:58.607

可能是这样的：

例子：

```
In [17]: from itertools import *

In [18]: lis=('a','b','c','d')

In [19]: for x in islice(combinations(lis,2),len(lis)-1):
    print x,
   ....:     
   ....:     
('a', 'b') ('a', 'c') ('a', 'd') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:43:30.910

恕我直言，`itertools`这显然是矫枉过正：

```
>>> s = 'ABCDE'
>>> [(s[0], x) for x in s[1:]]
[('A', 'B'), ('A', 'C'), ('A', 'D'), ('A', 'E')]
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:44:06.980

尝试这个：

```
l = ['a','b','c','d']
def foo(l):
    s0 = None
    for i in l:
        if s0 is None: 
            s0=i
            continue
        yield (s0,i)

for k in foo(l):
    print k 
```

输出：

```
('a', 'b')
('a', 'c')
('a', 'd') 
```

# android - 脸书 API 3.0。- 添加捆绑信息到图片上传

> ID：13083419
> 
> 赞同：2
> 
> 时间：2012-10-26T08:29:43.307
> 
> 标签：android, facebook

我正在使用适用于 Android 的 FB API 3.0，并根据我使用的 Session 示例

```
Request request = Request.newUploadPhotoRequest(Session.getActiveSession(), image, new Request.Callback(); 
```

上传图片。我需要在这张图片中添加一些默认文本，但我不知道该放在哪里。

在旧 API 中，发送了一组参数：

```
params.putByteArray("picture", imgData);
params.putString(Facebook.TOKEN, accessToken);
params.putString("caption", MyGlobals.INSTANCE.activeSetting.f_name); 
```

将文本添加到请求 newUploadPhotoRequest 的正确方法是什么？

tnx。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T15:55:31.263

在创建请求之后执行它之前，您可以执行以下操作：

```
// Get the current parameters for the request
Bundle params = request.getParameters();
// Add the parameters you want, the caption in this case
params.putString("name", "My Caption String");
// Update the request parameters
request.setParameters(params);

// Execute the request
Request.executeBatchAsync(request); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:04:28.240

使用上述解决方案，我们无法向图像添加描述。

解决方案：

替换`name`为`message`因为：

```
params.putString("name", "My Caption String"); 
```

`putString`第一个参数是键，因为`My caption String`该键是唯一的，唯一的被视为`message`。

# database - RavenDB 数据库配置

> ID：13083421
> 
> 赞同：1
> 
> 时间：2012-10-26T08:29:50.557
> 
> 标签：database, configuration, nosql, ravendb

如何配置能够发送过多请求或接收过大响应的 RavenDB 数据库？

默认情况下，RavenDB 将不允许可能危及服务器或客户端稳定性的操作，并且 RavenDB 会话会自动实施以下限制：

1.  如果未指定页面大小值，则结果的长度将限制为 128 个结果。在服务器端，页面大小也有 1,024 个结果的硬性限制。

2.  每个会话对服务器的远程调用次数限制为 30。

我想在客户端中配置 DocumentStore/DocumentSession 以增加页面大小值的限制和每个会话的服务器远程调用次数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:33:15.000

[您可以使用此处](http://ravendb.net/docs/server/administration/configuration)`Raven/MaxPageSize`所述的设置调整最大页面大小。您可以通过 调整最大会话请求数。但是，更好的方法是构建您的应用程序，以便您不需要大型会话。相反，更喜欢为小型工作单元创建会话并处理它们。如果某个操作需要大量请求，请将它们分成 1,024 个左右的组。`IDocumentStore.Conventions.MaxNumberOfRequestsPerSession`

# unix - 我应该保持与 unix 的 SSH 连接打开吗

> ID：13083425
> 
> 赞同：0
> 
> 时间：2012-10-26T08:30:03.490
> 
> 标签：unix, ssh

我有一个 Windows 桌面应用程序，它定期（每 10 秒）查询 Unix 机器中的一个文件夹，以查看那里是否有文件，如果有，则将它们拾取并进行一些处理。

我的问题是，我应该在应用程序启动时打开连接一次并在连接被终止时关闭连接，还是应该在每次应用程序执行查询时打开和关闭连接。

我更喜欢每次都打开和关闭，因为它更容易实现，并且应用程序崩溃和保持连接打开的风险更小。另一方面，我不知道打开/关闭连接会产生什么样的开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:44:35.363

我会给垫子答案，但他选择发表评论。

# mysql - 参照完整性 SQL

> ID：13083428
> 
> 赞同：0
> 
> 时间：2012-10-26T08:30:17.420
> 
> 标签：mysql, database, phpmyadmin

我在mysql中有两个表。表 A 具有包含数千个证书的主键 CertID。它还有一个关键的 UserID。表 B 具有主键 UserID。表 B 的用户 ID 不在表 A 中。我的意思是我们在表 A 中的用户 ID 没有出现在表 B 中。但是表 B 中的所有用户 ID 都可以在表 A 中找到。参照完整性可能吗？如何在此处强制执行参照完整性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:35:28.077

这只是意味着 tableA's`UserID`依赖于 tableB's `UserID`。但是tableB不依赖于tableA。架构看起来像这样，

```
CREATE TABLEB
(
    UserID INT,
    ......,
    CONSTRAINT tb_pk PRIMARY KEY (USERID)
);

CREATE TABLEA
(
    CertID INT,
    UserID INT,
    .....,
     CONSTRAINT tb_pk1 PRIMARY KEY (CertID),
     CONSTRAINT tb_fk FOREIGN KEY (UserID) REFERENCES tableB(UserID)
); 
```

您可以在 tableB 上插入任何记录。但是在 tableA 上，如果您尝试插入记录，请确保 userID 的值必须首先存在于 tableB 上`UserID`，否则您将收到错误

```
ERROR 1452 (23000): cannot add or update a child row.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:37:12.627

您不能 `referential integrity` 在此处强制执行，因为 TableA 在 UserID 列中有项目，而在 TableB 的 UserID 列中不存在，

但是 `join` 即使没有任何参照完整性约束，您也可以使用从两个表中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:37:15.840

在高层次上，MySQL 中的引用完整性由您使用的存储引擎控制。

早期的存储引擎根本不支持引用完整性，但是像 InnoDB 这样的新存储引擎（我相信新安装的默认值）确实支持它。

检查您的存储引擎，看看它是否甚至支持引用完整性。InnoDB 将是一个不错的选择。（一旦/如果）您正在使用支持引用完整性的引擎，您需要定义外键约束来定义关系。

可以在这里找到有用的入门：-

[http://blogs.sakienvirotech.com/index.php/random/2011/09/19/mysql-101-referential-integrity](http://blogs.sakienvirotech.com/index.php/random/2011/09/19/mysql-101-referential-integrity)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:41:33.553

参照完整性不仅仅意味着基本的外键。它还提出了一个问题，如果在表 B 中删除或更改具有特定 UserID 的行会发生什么情况。这是一个业务问题，您可以级联更改。级联删除表示如果删除用户，则要删除该用户到证书的链接，级联更新意味着更改表 B 中的 userID 也会更改表 A 中的相应值。设置为 NULL 表示如果删除用户，您想保留他们的链接记录，但将表 A 中的用户 ID 设置为 NULL 并且什么都不做意味着您将不允许删除或更新表 B 中的行，而表 A 中有对它的引用。

参照完整性是一个笼统的术语，并不意味着在每种情况下都相同。它仅具有与特定系统或实现相关的完整性。

# iphone - MKStoreKit -isSubscriptionActive 总是返回 False

> ID：13083429
> 
> 赞同：1
> 
> 时间：2012-10-26T08:30:19.420
> 
> 标签：iphone, objective-c, ios, in-app-purchase, mkstorekit

我正在使用 MKStoreKit 进行自动更新订阅。

在 Button 的 TouchUpInside 方法上，我使用以下代码..

```
if([[MKStoreManager sharedManager] isSubscriptionActive:kSubscriptionMonthlyIdentifier]){
  //access to subscription feature
}else{
  //ask user to buy
} 
```

它总是让我返回错误。并要求用户购买。

当我再次尝试购买时，它告诉我`You are already subscribed`。

*   有什么我做错了吗？

*   有没有其他方法可以检查订阅是否处于活动状态。

*   我如何知道订阅已续订？

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:56:29.440

1) 您应该通过添加 applicationDidFinishLaunching 来初始化 MKStoreKit `[MKStoreManager sharedManager];`。

2）您应该检查您是否正确填写`MKStoreKitConfigs.plist`：

您必须将您的订阅应用内 ID 添加到`Subscriptions`字典（格式为：） `"subs id" - "subs duration"`。

在苹果文档中，您可以找到有关自动更新订阅的信息：自动更新订阅的每次更新都会生成新交易并将其发送到您的应用程序。理论上，MKStoreKit 必须照顾所有这些东西，并且`isSubscriptionActive`应该可以工作。

此外，您可以添加按钮以恢复以前的购买。`-isSubscriptionActive`因此，在您的情况下，当用户在拨打电话之前按下购买按钮时`-restorePreviousTransactions`，或者您可以添加此按钮，这样用户可以恢复以前的交易^如果他已经购买了订阅。

您可以为此通知添加观察者：

```
#define kSubscriptionsPurchasedNotification @"MKStoreKitSubscriptionsPurchased"
#define kSubscriptionsInvalidNotification @"MKStoreKitSubscriptionsInvalid" 
```

第一个通知 MKStoreKit 生成，当订阅被更新（或购买）时，第二个 - 当更新失败时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:00:20.983

MKStoreKit GitHub 上有一个[未解决](https://github.com/MugunthKumar/MKStoreKit/issues/66)的问题，可能与您遇到的问题有关。该线程中的人声称，在应用程序初始化后，MKStoreKit 总是返回 NO `isSubscriptionActive`。不过，他们似乎能够成功使用以前版本的 MKStoreKit。您可能想尝试一下。

# android - 如何测试android的新版本何时发布

> ID：13083430
> 
> 赞同：2
> 
> 时间：2012-10-26T08:30:20.170
> 
> 标签：android, android-version

我没有能力购买每部带有 android 新版本的手机。意味着如果 android 发布了 5.0，那么我如何测试我的应用程序是否可以工作。请在不购买手机的情况下为此指定任何可能的策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:15:47.243

每当发布新的 android 版本时，`SDK Platform`都可以下载新版本的，因此您可以下载它并为该版本创建一个模拟器。

因此，您将能够在任何版本上测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:33:52.337

有很多在线服务可以远程在真实设备上进行测试。例如，[http://www.perfectomobile.com/](http://www.perfectomobile.com/)

请在发布重复问题之前使用搜索：[任何用于在多个硬件设备上测试 Android 应用程序的服务？](https://stackoverflow.com/questions/6352748/any-service-for-testing-android-applications-on-multiple-hardware-devices)

# wcf - 使用 WCF 客户端使用非 WCF Web 服务时出现 HTTP 错误

> ID：13083431
> 
> 赞同：1
> 
> 时间：2012-10-26T08:30:23.087
> 
> 标签：wcf

我正在尝试使用第三方 Web 服务，该服务不是用 .NET 开发的，而是用其他语言（可能是 Java）开发的。我正在尝试使用来自 WCF 客户端的服务。但是在添加服务引用时会引发错误：

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“basic realm="EXTRACT-CREDENTIAL"”。

此外，当我在浏览器中点击服务 URL 时，它会引发如下错误：

> 代理不支持 HTTP GET 请求。请改用 HTTP POST

从 WCF 客户端使用服务的方式是什么？

# java - 显示为两位小数

> ID：13083446
> 
> 赞同：0
> 
> 时间：2012-10-26T08:31:35.567
> 
> 标签：java

> **可能重复：**
> [在 Java 中将一个数字转换为 2 位小数](https://stackoverflow.com/questions/8779659/convert-a-number-to-2-decimal-places-in-java)

我需要在 Java 中显示最多两位数的十进制数。

例如：

```
Case1\.   2.333 - 2.33
Case2\.   3.4 -   3.40 
```

我能够做第一个案例。任何人都可以帮助我如何处理第二种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T08:34:44.673

如果您只想打印小数点后两位数的双精度数，请使用以下内容：

```
double value = 200.3456;
System.out.printf("Value: %.2f", value); 
```

如果您想将结果保存在字符串中而不是打印到控制台，请使用具有相同参数的 String.format()：

```
String result = String.format("%.2f", value); 
```

或使用类 DecimalFormat：

```
DecimalFormat df = new DecimalFormat("####0.00");
System.out.println("Value: " + df.format(value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:35:47.697

你可以试试

```
System.out.printf("%.2f %.2f%n", 2.333, 3.4); 
```

印刷

```
2.33 3.40 
```

# javascript - 响应时带有 window.location 的 AjaxSubmit

> ID：13083451
> 
> 赞同：5
> 
> 时间：2012-10-26T08:31:42.863
> 
> 标签：javascript, jquery, ajax, redirect, window.location

我对 ajaxSubmit 有疑问...问题是，当我提交表单并从 PHP 获得具有**window.location**脚本的响应时，页面根本不会改变...

当表单正确提交时，我的 PHP 脚本只返回一个带有 window.location 的脚本，否则，它返回一个在成功函数上解析的 JSON。

使用 Chrome 的工具，我看到它在网络选项卡上加载了 window.location URL，但是它没有向用户显示它......

这是我的代码：

```
$("form").submit(function(e) {
    e.preventDefault();
    $("form").ajaxSubmit({
        success: function(resp){
            try{
                resp=JSON.parse(resp);
                alert(resp["error"]);
            } catch(e){
                $("<div></div>").html(resp);
            }

        }
    });
    return false;
}); 
```

我需要怎么做才能让它工作？AjaxSubmit 的 options 参数是否有任何属性可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:02:03.017

只需在您的服务器答案中提供不带 JS 代码的 URL，然后执行：

```
$("form").submit(function(e) {
    e.preventDefault();
    $("form").ajaxSubmit({
        success: function(resp){
            try{
                resp=JSON.parse(resp);
                window.location.href = resp;
            } catch(e){
                $("<div></div>").html(resp);
            }

        }
    });
    return false;
}); 
```

# wcf - 通过 RIA 服务中的 DomainServiceContext 进行 Web 服务身份验证

> ID：13083455
> 
> 赞同：1
> 
> 时间：2012-10-26T08:32:08.887
> 
> 标签：wcf, web-services, silverlight, ria, networkcredentials

我做了一个 Silverlight RIA Business 应用程序。服务器端需要身份验证，并且正在通过 https。

从服务器端，我想访问一个外部 Web 服务，该服务也需要凭据并且还通过 https。关键是 Web 服务所需的凭据与 RIA 业务服务所需的凭据相同。

我想：

1.-在RIA服务业务应用服务端创建web服务的实例

2.- 设置 Web 服务凭证 = RIA 服务业务应用程序凭证（显然，已经过身份验证）

我的untuiton说必须有办法做到这一点，但我不知道如何。反正我的untuition已经错了很多次了……

# php - 网站网络，数据收集

> ID：13083456
> 
> 赞同：3
> 
> 时间：2012-10-26T08:32:10.070
> 
> 标签：php

我正在制作我正在学校尝试的网络开发服务。这个想法是能够使用学生的内容运行我的 CMS。我制作了尚未命名的 CMS 的第 2 版，它允许用户制作与 CMS 兼容的皮肤并轻松使用它。这部分工作正常。

问题是，我说“我们可以为您的网站收集网站统计信息，并在您的网站有任何问题时通知您。” 在一个演示文稿中，人们似乎对此感兴趣。我需要做的是能够从托管在另一台服务器上的管理域访问我所有客户站点的数据库中的信息。我可以`file_get_contents();`在我的管理站点上使用 a 来检索客户端站点上的文件并回显它。- 我认为这很草率

还有其他方法吗，记住我的主机不允许从一个站点到另一个站点的数据库访问！

谢谢，尤其是能够阅读我过长的句子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:18:23.170

希望这可以帮助：

```
 function file_get_data($url) {
      $ch = curl_init();
      curl_setopt($ch, CURLOPT_HEADER, 0);
      //Set curl to return the data instead of printing it to the browser.
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
      curl_setopt($ch, CURLOPT_URL, $url);
      $data = curl_exec($ch);
      curl_close($ch);
      return $data;
    } 
```

# php - 我想获得 $_POST[variablex] 但不通过按钮点击发布

> ID：13083457
> 
> 赞同：-3
> 
> 时间：2012-10-26T08:32:11.433
> 
> 标签：php, post

我的表单中有一个隐藏元素，当我想获取发布的值时

```
$variable=$_POST["variablex"] 
```

我什么也没得到，在另一种情况下，当我在**按钮上发布帖子（提交）**时，它确实采用了默认值......帮助？？？

```
<input type="hidden" name="variablex" id="variablex" value="555"  />
<a onclick=" document.getElementById('variablex').value='123';
document.getElementById('myform').submit();">123</a> 
```

如果有人可以给我发送示例链接或告诉我该怎么做。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:37:02.893

语法没问题，试试看是否有不同元素的相同ID或相同名称的表单，或者如果你使用母版页检查是否有相同名称的表单或隐藏变量，我测试了你的代码和它工作正常...问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:39:30.350

```
<script>
function onclickFunction()
{
    document.getElementById('variablex').value='123'; 
    document.getElementById('myform').submit();
}
</script>
<html>
<body>
<input type="hidden" name="variablex" id="variablex" value="555"  />
<a onclick="onclickFunction();">123</a>
</body>
</html> 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:43:11.727

用 Jquery 回答 ..

```
<script>
$(document).ready(function(){
    $("a#SOMEID").click(function(e){
        e.preventDefault();
        $("form#yourform").attr('action', $(this).attr('href')); /* If there are different links get its href and use it */
        $("#variablex").val($(this).text()); /* If you need to change the value of that input */
        $("form#yourform").submit();
    });
});
</script>
<form method="POST" id="yourform">
    <input type="hidden" name="variablex" id="variablex" value="555"  />
</form>
<a href="mypage.php" id="SOMEID">123</a> 
```

# javascript - ondragenter 不影响儿童

> ID：13083463
> 
> 赞同：1
> 
> 时间：2012-10-26T08:32:40.883
> 
> 标签：javascript, html, javascript-events

有什么方法可以在拖动悬停儿童时不触发 ondragleave 事件？

```
<div ondragenter="entered()" ondragleave="left()">
    <a href="#">children element</a>
</div> 
```

这里是一个例子：http: [//jsfiddle.net/6uu7h/4/](http://jsfiddle.net/6uu7h/4/)（Chrome）

我不希望在进入孩子时触发事件“ondragleave”，因为它并没有真正离开元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:26:31.227

这里是一个例子：http: [//jsbin.com/ahipas/4/edit](http://jsbin.com/ahipas/4/edit)

```
$(function() {
  var destination;

  $('#bidi').on('dragenter', function(event) {
    destination = event.target;
    $('#debug').append("ENTERED ELEMENT<br />");
  });

  $('#bidi').on('dragleave', function(event) {
    if (!$(this).find(destination).size() && !$(this).find(event.target).size()) {
      $('#debug').append("LEFT ELEMENT<br />");
    }
  });
}); 
```

# mongodb - 与 Mongos 连接时 system.profile 集合中缺少用户字段

> ID：13083471
> 
> 赞同：40
> 
> 时间：2012-10-26T08:33:36.887
> 
> 标签：mongodb, authentication, profiling

我们有一个 MongoDB 集群和客户端通过 Mongos 实例连接到它。集群中的各个 mongo(s) 都使用 运行`--auth`，Mongo`--keyfile`在与它们通信时使用 a。我们正在分析慢查询，但没有获得通过 Mongo 的查询的用户名。

为了更清楚：

1.  如果我直接连接到其中一个 Mongo，进行身份验证并运行查询，然后我可以查看`system.profile`集合，然后该`user`字段将填充我的用户名。

2.  如果我通过 mongos 连接、验证并运行查询，则 system.profile 集合包含有关查询的分析信息，但用户字段为空白。

需要身份验证，如果不先进行身份验证，我无法通过 Mongo 运行查询，但是用户名似乎没有包含在分析信息中，我们真的很希望能够看到它。

有任何想法吗？我可以对我们的配置进行任何更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:19:18.873

只是为了实际添加一个答案：

正如任在评论中所说，他[提交了一张票](http://jira.mongodb.org/browse/SERVER-7538)，因为这与一个错误有关。

# node.js - 如何使用 Redis 数据库根据时间（以毫秒为单位）对 node.js 中的数组进行排序

> ID：13083472
> 
> 赞同：1
> 
> 时间：2012-10-26T08:33:48.593
> 
> 标签：node.js, redis

我正在尝试根据时间（毫秒）对包含 Id 和时间的数组进行排序。

```
Map.sort(function(a,b){return a.Time-b.Time});
for (keys in Map) {
    multi.hgetall(Map[key].id+':List');                     
}
multi.exec(function(err,data){                       
        res.send(data);
}); 
```

它不显示任何数据。该数组中有 3 个 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:54:37.390

我不知道`res`你的代码中有什么。即使您命名变量`keys`，您也会在这句话中获得数组索引：

```
for(keys in Map){...} 
```

尝试这样的事情，使用`forEach`迭代器：

```
Map=[{'id':'a', 'Time':90}, {'id':'c', 'Time':30}, {'id':'b', 'Time':66}]

Map.forEach(function(item){
    console.log(item);
    multi.hgetall(item.id + ':List');
});
multi.exec(function(err, data){                       
    console.log('data', data);
}); 
```

`a:List`如果键，它应该打印一些数据，`b:List`并且`c:List`存在于您的 redis 数据库中。

# android - 实现自定义列表视图的复选框

> ID：13083474
> 
> 赞同：1
> 
> 时间：2012-10-26T08:33:55.627
> 
> 标签：android, database, listview, checkbox

我已经编写了代码以从数据库中获取值并将该值绑定到列表视图。为此，我现在根据要求使用了自定义列表视图，我想要列表中每个项目的复选框。如何做到这一点

```
image=(ImageView)findViewById(R.id.image);
        note=(ImageButton)findViewById(R.id.note);
        tick=(ImageButton)findViewById(R.id.tick);
        cross=(ImageButton)findViewById(R.id.cross);
        Intent intent = getIntent();
        Bitmap photo = (Bitmap) intent.getParcelableExtra("photooo");
        image.setImageBitmap(photo);
        if(photo!=null)
        {
            dbHelper = new RecordsDbAdapter(this);
            dbHelper.open();
            displayListView();
        }

    }
    private void displayListView() {
        Cursor cursor = dbHelper.fetchAllRecords();
        String[] columns = new String[] {
                RecordsDbAdapter.KEY_NAME,
                RecordsDbAdapter.KEY_BIRTHDAY,

        };
        int[] to = new int[] {
                R.id.name,
                R.id.birthdate,
        };
        dataAdapter = new SimpleCursorAdapter(
                this, R.layout.row,
                cursor,
                columns,
                to);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(dataAdapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:51:25.317

*   使用 LayoutInflater 将复选框添加到列表视图
*   使用 SetTag 方法后将 Tagvalue 添加到复选框
*   下面的代码示例列表视图中每个项目中的此标记值单独复选框：`

LayoutInflater inflater = getLayoutInflater();

```
 convertView = inflater.inflate(R.layout.home1, null); 
```

ViewHolder holder1 = new ViewHolder(); holder1.text = (TextView) convertView.findViewById(R.id.textView1);

```
 holder1.ch=(CheckBox)convertView.findViewById(R.id.checkBox1);
  holder1.ch .setTag(position); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:44:53.200

就像您之前所做的那样，转到 R.layout.row 的 XML 文件并输入以下代码：

```
<CheckBox
    android:id="@+id/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:text="checkbox" /> 
```

然后像这样编辑您的代码：-

```
 private void displayListView() {
    Cursor cursor = dbHelper.fetchAllRecords();
    String[] columns = new String[] {
            RecordsDbAdapter.KEY_NAME,
            RecordsDbAdapter.KEY_BIRTHDAY,
            RecordsDbAdapter.KEY_CHECKBOX

    };
    int[] to = new int[] {
            R.id.name,
            R.id.birthdate,
            R.id.checkbox
    };
    dataAdapter = new SimpleCursorAdapter(
            this, R.layout.row,
            cursor,
            columns,
            to);
    ListView listView = (ListView) findViewById(R.id.list);
    listView.setAdapter(dataAdapter);
} 
```

# sql - 在休眠中选择空字段

> ID：13083487
> 
> 赞同：0
> 
> 时间：2012-10-26T08:34:45.253
> 
> 标签：sql, oracle, hibernate

我在休眠状态下从具有以下列的员工表中进行了选择查询：

```
private int id;
    private String firstname;
    private String lastname;
    private String email;
    private String phoneno;
    private Date hiredate;
    private Jobs jobid;
    private Integer salary;
    private Integer commpct;
    private Employee managerid;
    private Departments deptid; 
```

在这张表上，第一条记录的managerid设置为null，之后每条记录的managerid设置为第一条记录employeeid；

当我使用查询从员工表中选择数据时：（“FROM EMPLOYEES”）使用以下代码：

```
Query query = session.createQuery("FROM Employee");

        List<Employee> employees = query.list();

        for(Employee employee:employees){
            System.out.println("ID=>"+employee.getId()+"\tFirstName=>"+employee.getFirstname()+"\tLastName=>"+employee.getLastname()
                    +"\temail=>"+employee.getEmail()+"\tPhoneNO=>"+employee.getPhoneno()+"\tHireDate=>"+employee.getHiredate()
                    +"\tJob=>"+employee.getJobid().getJobtitle()+"\tMax Salary=>"+employee.getJobid().getMaxsalary()
                    +"\tPresent Salary=>"+employee.getSalary()+"\tCommission %=>"+employee.getCommpct()+"\tManager=>"+employee.getManagerid().getFirstname()+","+employee.getManagerid().getLastname()
                    +"\tDepartment ID=>"+employee.getDeptid().getName());

        } 
```

异常抛出 bcoz 第一条记录 managerid 为空，

然后，我使用了这个查询

```
Query query = session.createQuery("FROM Employee em WHERE em.managerid IS NOT NULL AND em.deptid IS NOT NULL"); 
```

我得到了第一个记录以外的记录。

**ID 是主键，managerid 是指向员工表 (id) 字段的外键。所有行都有 id，但有些行/一行的 managerid 设置为 null。**

我的问题是即使第一个记录 managerid 设置为空，如何获取所有记录？

我必须进行什么设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:42:26.080

首先，在休眠实体中，表中必须有主键列并且它必须不为空。否则休眠无法处理实体，因为它使用主键处理它们。所以空主键会混淆休眠，所以不允许。

如果您想获取数据，您可以使用休眠触发本机查询。

本机查询参考：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

# sql-server - SQL Server：无法访问系统表

> ID：13083492
> 
> 赞同：0
> 
> 时间：2012-10-26T08:35:00.010
> 
> 标签：sql-server, system-tables

我有一个 MSSQL 数据库和一个“普通”用户访问它。当我尝试使用 sys.objects 之类的表时，出现权限错误：

```
select name from sys.objects
Msg 229, Level 14, State 5, Line 1
The SELECT permission was denied on the object 'objects', database 'mssqlsystemresource', schema 'sys'. 
```

为什么？文件说

> 在 SQL Server 2005 和更高版本中，目录视图中元数据的可见性仅限于用户拥有或已被授予某些权限的安全对象。

所以我认为我应该被允许使用 sys.objects，即使它只会列出对我来说可见的对象......

我的用户是用

```
CREATE LOGIN [factoryFX20_K_user] WITH PASSWORD=N'...', DEFAULT_DATABASE=[ff20121025], DEFAULT_LANGUAGE=[English], CHECK_EXPIRATION=OFF, CHECK_POLICY=ON
EXEC sys.sp_addsrvrolemember @loginame = N'factoryFX20_K_user', @rolename = N'serveradmin'

USE [ff20121025]
CREATE USER [factoryFX20_K_user] FOR LOGIN [factoryFX20_K_user] WITH DEFAULT_SCHEMA=[factoryFX20_K_user] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:36:59.077

[问题与对象'sysobjects'，数据库'mssqlsystemresource'，模式'sys'的SELECT权限被拒绝中](https://stackoverflow.com/questions/1473315/the-select-permission-was-denied-on-the-object-sysobjects-database-mssqlsyst)相同：我的用户有一些“拒绝”角色。

解决方案是删除用户的这个角色：

```
USE [ff20121025]
EXEC sp_droprolemember N'db_denydatawriter', N'factoryFX20_K_user'
EXEC sp_droprolemember N'db_denydatareader', N'factoryFX20_K_user' 
```

谢谢乔恩！

# openxml - Microsoft Office 互操作 Excel 以打开 XML SDK 2.0

> ID：13083493
> 
> 赞同：0
> 
> 时间：2012-10-26T08:35:00.740
> 
> 标签：openxml, office-interop, openxml-sdk, excel-interop

我有一个使用 C#.NET 中的 Microsoft Office 互操作库的 Excel 2010 自动化项目。但现在我需要将它迁移到与 Open XML SDK 2.0 一起使用。有什么指导或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:59:42.407

OpenXML SDK 提供了太多的低级访问/功能。它需要一些时间来掌握，但具有很大的灵活性。

对于初学者，请使用 EPPlus 或 ExcelPackage 等库。如果您有非常非常大的文件要经常处理，那么最好选择 OpenXML。

# c++ - 如何最好地实现 GIF 加载类？

> ID：13083506
> 
> 赞同：0
> 
> 时间：2012-10-26T08:36:10.210
> 
> 标签：c++

**任务：**

我想编写一个 C++ 头文件，它可以加载给定的 GIF 文件并将其转换为 RGBA 像素数组。

**问题：**

我发现尝试阅读规范令人困惑，因为某些块（例如注释）可能出现在文件中的任何位置。我还尝试阅读其他 GIF 加载文件的源代码，但我发现这些也非常令人困惑。我曾尝试为它编写代码，但在它出现严重错误之后，我将其删除并推迟尝试这样做，因为它不是必需的：现在是。

**限制：**

我不希望使用外部库（建议 boost 在这里有点陈词滥调）或预构建代码，因为我想了解发生了什么，但要编写自己的代码主要有以下几个原因：

1.  所以如果代码出错，我可以修复代码。
2.  所以我可以扩展这些功能并将它们与我拥有的其他预先存在的类合并。
3.  为避免许可问题：
    *   所以我不会因为滥用而被起诉（我既不想付费也不想被迫让我的代码开源）。
    *   因此，我可以将代码与程序捆绑在一起，或者出售程序（这不太可能，但我在这里涵盖了基础），而没有任何版权/版权问题。
    *   所以我可以安全地将代码提供给其他人，并且能够告诉他们他们不必担心许可证。
    *   所以我可以将代码提供给缺乏 GIF 加载的库，这样他们就可以使用它而不必担心许可证问题。
4.  保持代码库较小（与其他功能库相比）。

我知道这是一个相当多的列表，似乎没有必要，但是当我之前在堆栈溢出时说“没有库”时，人们认为这是可选的，他们可以争辩我提交或强迫我接受一个库。

**问题：**

理解（我发现规范令人困惑）和实现 GIF 加载以便将 GIF（可能是单个图像或一系列图像）转换为像素数组的最佳方法是什么？阅读时如何最好地忽略“不必要的”数据（至少在手头的任务方面，所以忽略评论等）？

为方便起见，您可以假设像素数组类已经存在。

带有解释的清晰代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:54:14.503

好的，因为我不能再编辑我的评论了....正如 Mat 建议的那样，尝试理解规范。我推荐这个网站[http://www.matthewflickinger.com/lab/whatsinagif/bits_and_bytes.asp#comment_extension_block](http://www.matthewflickinger.com/lab/whatsinagif/bits_and_bytes.asp#comment_extension_block)因为在我看来这是一个很好的关于 gif 格式结构的信息来源，有很多图形和字节码-例子。例如你关于评论的问题：当你`21 FE`在数据流中找到一个字节对时，这就是引入一个评论块。以下字节表示 ascii 字符，在块的末尾您会发现一个`00`.

# java - 如何在java中编写T.class？

> ID：13083509
> 
> 赞同：0
> 
> 时间：2012-10-26T08:36:23.223
> 
> 标签：java

> **可能重复：**
> [如何获取泛型类型 T 的类实例](https://stackoverflow.com/questions/3437897/how-to-get-class-instance-of-generics-type-t)

模板的 T at

```
JAXBContext jaxbContext = JAXBContext.newInstance(T.class); 
```

无法编译 T.class ，是否需要反射以及如何？

```
 public void ConvertObjectToXML(String path, T bobject)
    {
        //Convert XML to Object
        File file = new File(path);
        JAXBContext jaxbContext = JAXBContext.newInstance(T.class);

        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        T customer2 = (T) jaxbUnmarshaller.unmarshal(file);
        System.out.println(customer2);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:46:58.670

由于 Java 处理泛型类型的方式，此代码无法工作：

```
public class Factory<T>{
   public T create(){
      return T.class.newInstance();
   }
} 
```

您需要将实际的泛型类型传递给构造函数（或任何其他方法）：

```
public class Factory<T>
   Class<T> c;
   publict Factory(Class<T> c){
       this.c=c;
   }
   public T create(){
       return c.newInstance();
   }
} 
```

经典的方法是从数组中推断出泛型类型，因为数组确实保存了它的类型：

```
public interface List<T>{
   ...
   T[] toArray(T[] target);
   ..
} 
```

这是因为实际的运行时类型`Factory<T>`仅仅是`Factory`，因此运行时无法访问其泛型类型。

# javascript - Surehits 潜在客户 - 移动优化

> ID：13083510
> 
> 赞同：1
> 
> 时间：2012-10-26T08:36:26.063
> 
> 标签：javascript, html, css, mobile, responsive-design

有人可以给我一个关于修复的想法，并且获得肯定会导致移动优化，这意味着使用他们的移动视图......有一个选项，但它似乎对我不起作用，干杯！

如果有人遇到同样的问题，并且有解决方案，我会很高兴！这里的问题是，无论设备大小如何，提要都以固定宽度显示。我发现，提供者（surehits）有一个选项`"ni_mobile = 1"` 应该使提要移动优化，但似乎它不起作用......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Your Car Insurance Finders >> #1 Site to Compare, Select & Save Hundreds On Your Car Insurance...</title>
     </head>
     <body>
        <script type="text/javascript">           
            function getSuperClickVars(sc) {
                var __sc = '', temp="{";
                var a1 = sc.split('~');
                for (var i = 0; i < a1.length;i++) {
                    var s = a1[i].split('|');
                    temp += "\"" + s[0] + "\":\"" + s[1] + "\"";
                    if (i < a1.length-1) { temp += ","; }
                }
                temp += "}"
                __sc = eval('('+temp+')');
                return __sc;
             } 

             ni_ad_client = '15';
             ni_res_id = 2;
             ni_alt_url = "https://www.shmktpl.com/search.asp";
             ni_zc = '';
             ni_var1 = '';
             ni_max_display = -1;

             ni_mobile = 1;

             ni_color_border = '';
             ni_color_bg = "";
             ni_color_link = "";
             ni_size_link = 0;
             ni_color_url = "";
             ni_color_text = "";
             ni_height_hr = 2;
             ni_color_hr = "#084A8C";
    </script>
    <div id='foods'>
        <script type="text/javascript" src="https://www.shmktpl.com/retrieve_listings.asp"></script>    
        <noscript>
           <a href="https://www.shmktpl.com/search.asp?src=15&res=2">
               <img src="https://www.shmktpl.com/images/nojs/image.asp?src=15&res=2" border="0">
           </a>
        </noscript>
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:23:28.500

它是从列表提供商那里修复的，他们似乎有脚本的移动版本。

# php - 无法执行查询

> ID：13083518
> 
> 赞同：0
> 
> 时间：2012-10-26T08:36:57.080
> 
> 标签：php, mysql, select

有人可以帮我处理这个查询吗？每当我运行这个查询时，页面都不会加载。我很确定这是一个非常简单的错误，我无法弄清楚。非常感谢您的帮助。

```
$aggr_nr = $_REQUEST['stck_list_nr_01'].$_REQUEST['stck_list_nr_02'].$_REQUEST['stck_list_nr_03'];
echo $aggr_nr;

$sql="SELECT v.id FROM vers_einl_aggregatnummer AS v WHERE v.aggr_nr = $aggr_nr";
$aggr_id = mysql_query($sql);

if ($aggr_id == true)
 {
        echo "query 1 executed".$aggr_id;
    else  
    {
    echo("<br />Could not execute statement ".$sql);
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:17:45.293

只需说一下未显示 ( ) 的 PHP 错误`page doesn't load up`。

您可以将 PHP 配置为在错误时停止而不显示它。这应该是生产服务器上的默认设置，以便在出现错误时不显示太多内部信息。

您可以使用这些行来显示所有错误，但不要忘记再次将其关闭；）

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:42:11.067

有一个语法错误看看这个

```
if ($aggr_id != false)//since on success resource type is returned.
{
 echo "query 1 executed".$aggr_id;
}else  
{
  echo("<br />Could not execute statement ".$sql);
 } 
```

还

```
$aggr_nr = $_REQUEST['stck_list_nr_01'].$_REQUEST['stck_list_nr_02'].$_REQUEST['stck_list_nr_03'];
echo $aggr_nr;
if(isset($aggr_nr)&&is_numeric($aggr_nr))
{
$aggr_nr=mysql_real_escape_string($aggr_nr);

$sql="SELECT v.id FROM vers_einl_aggregatnummer AS v WHERE v.aggr_nr = $aggr_nr";
$aggr_id = mysql_query($sql);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:45:19.577

```
//sanitize the inputs 
$aggr_nr = mysql_real_escape_string($_REQUEST['stck_list_nr_01'].$_REQUEST['stck_list_nr_02'].$_REQUEST['stck_list_nr_03']);
 echo $aggr_nr;

$sql="SELECT v.id FROM vers_einl_aggregatnummer AS v WHERE v.aggr_nr = '".$aggr_nr."'";//missing Quotes
$aggr_id = mysql_query($sql);

if ($aggr_id) {
 while($result = mysql_fetch_array($aggr_id))
   echo "ID NUMBER:".$result['id'];
}  else {
   echo "<br />Could not execute statement ".$sql;
} 
```

# php - 将php数组转换为html

> ID：13083519
> 
> 赞同：-3
> 
> 时间：2012-10-26T08:37:02.103
> 
> 标签：php, arrays, pinterest

我正在为 pinterest [http://www.zacharydavidbiles.com/2012/05/scraping-pinterest-with-php/](http://www.zacharydavidbiles.com/2012/05/scraping-pinterest-with-php/)实现 af 抓取脚本- 到目前为止一切顺利，我已经成功运行它，但我缺乏足够的 php了解如何将数组解析为有用的 html。

```
<?php
    include_once('wp-content/themes/symbol/inc/Pinterest.class.php');
    $pinterest = new Pinterest();
    $pinterest->scrapeUser("casperovergaard");
    $pinterestCovers = $pinterest->getCovers();
    $pinterestThumbs = $pinterest->getThumbs();
    $pinterestLinks = $pinterest->getLinks();

        print_r($pinterestThumbs);
?> 
```

结果是我的 pinterest 中的一长串网址

```
Array ( 
    [0] => http://media-cache-lt0.pinterest.com/upload/6544361930035694_2fOhWLC4_t.jpg 
    [1] => http://media-cache-ec6.pinterest.com/upload/6544361930030994_baSRTSh6_t.jpg 
    [2] => http://media-cache-ec5.pinterest.com/upload/6544361929998833_uKTPTrRX_t.jpg 
    [3] => http://media-cache-ec4.pinterest.com/upload/6544361929912044_R8TrDlRF_t.jpg 
) 
    [1] => Array ( 
            [0] => http://media-cache-lt0.pinterest.com/upload/6544361930051890_Mjzguspo_t.jpg 
            [1] => http://media-cache-ec2.pinterest.com/upload/106116134940631272_QWvrC09l_t.jpg 
            [2] => http://media-cache-ec6.pinterest.com/upload/92323861080593762_sQGFb6Cw_t.jpg 
            [3] => http://media-cache-ec6.pinterest.com/upload/50806302017302433_3PrHkE8A_t.jpg 
    ) 
    [2] => Array ( 
            [0] => http://media-cache0.pinterest.com/upload/264234703107207356_JWq16vyi_t.jpg 
            [1] => http://media-cache-lt0.pinterest.com/upload/212513676136740135_Xh65hY5R_t.jpg 
            [2] => http://media-cache-ec3.pinterest.com/upload/18225573461849873_hEke4BiA_t.jpg 
            [3] => http://media-cache0.pinterest.com/upload/6544361929985568_HdGFAIaw_t.jpg 
    ) 
    [3] => 
```

所以我的问题是：如何将这个数组解析成可爱的图像？我一直在寻找，但徒劳无功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:41:38.457

尝试这个：

```
foreach($pinterestThumbs as $img){
echo "<img src='$img' alt="" title=""/>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:43:32.353

像：

```
foreach ($pinterestThumbs as $thumb)
   echo "<img src='$thumb' alt='' >"; 
```

注意 alt 属性是 html 规范所要求的，所以不要省略它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:43:34.630

最简单的方法是

`foreach ( $pinterestThumbs as $url ) { echo "<img src='{$url}'/>" }`

# c++ - 指针 - 字符串 C++

> ID：13083521
> 
> 赞同：0
> 
> 时间：2012-10-26T08:37:03.453
> 
> 标签：c++, pointers

**作品：**

```
char *s="sfdggh";
char *u="xcvbn";

s=u;
cout << s; 
```

* * *

**不工作：**

```
char *s="sfdggh";
char *u="xcvbn";

*s=*u;
cout << s; 
```

* * *

为什么？（我搜索过，但无法理解）

```
//***************** EDIT ********************************** 
```

我得到了一些东西。如果我是对的，请确认我的理解。

```
char *s;
char *v;

char a,b;

s=&a;
v=&b;

s=v; //Address exchange 
```

* * *

相似的：

```
char *s="sfdggh";
char *u="xcvbn";

s=u; // Address Exchange too!/ Not Value Exchanging 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:38:38.513

`s=u;`重新分配指针`s`，这是完全有效的。

`*s=*u;`试图用 中的第一个字符覆盖字符串字面量`s`指向的第一个字符`u`，这是非法的。

修改字符串文字是未定义的行为。

```
char *s="sfdggh";
char *u="xcvbn"; 
```

都是字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:39:48.103

无法修改 const 字符串文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:29:18.720

当您写为 *s=*u 时，您正在更改存储在 S 指向的地址的第一个位置中的值，该值由存储在 u 指向的地址的第一个位置中的字符存储。

现在

```
char *s="sfdggh";
char *u="xcvbn"; 
```

这两个是字符串文字并充当常量。您可以使用 g++ -Wall 检查编译器给出的警告

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:43:46.010

`s`并且`u`是`pointer`-types，可以重新分配。

`*s`并且`*u`是`char`存储在内存**[代码段](http://en.wikipedia.org/wiki/Code_segment)**中的类型。
存储在代码段中的任何内容都是非法修改（例如，程序可能会自行更改）。

当您在源代码中编写字符串文字时，它与程序的其余代码一起`"xcvbn"`作为 的数组存储在内存的代码段中。`char`

# iphone - 访问视图时，使用标签比使用变量更快？

> ID：13083524
> 
> 赞同：0
> 
> 时间：2012-10-26T08:37:23.500
> 
> 标签：iphone, objective-c, cocoa

哪个更快？

```
@interface ViewController : UIViewController
{

UIView *myView;

}

@end

@implementation ViewController

 - (void)myInit(){

UIView *view = [[UIView alloc]init];

myView = view;

view.tag = 1;

}

- (void)viewDidLoad(){
[self myInit];

[self.view addSubview:myView];//accessing by variable

//OR

[self.view addSubView:[self.view viewWithTag:1];//accessing by tag

}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:42:31.353

在一个你有一个直接的指针访问，在另一个你需要调用一个方法，然后找到索引对象并返回它以获得相同的对象。我想你有你的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:14:53.860

It's useful to retrieve elements using "`viewWithTag`" if the elements were hooked to the cell programmatically (i.e. not defined in a NIB and hooked-up via IBOutlets)—this prevents multiple labels etc. to be created for each instance of the cell.Definitely using a variable and /or IBOUtlet in NIBS has the upper merit more ever because when we want to fetch a view via `viewWithTag` ,the compiler runs a `for` loop within its subViews and fetch the first view it finds with the given tag.Hence in case where you have two view with same tag ,using `viewWithTag` always have a major disadvantage.

# php - 如何解决我的评分系统的问题？

> ID：13083525
> 
> 赞同：0
> 
> 时间：2012-10-26T08:37:24.847
> 
> 标签：php, rating-system

此时我在我的站点中使用此代码进行投票系统（在 PHP 文件中，但我集成为 JavaScript，希望爬虫看不到）：

```
$rater.= '<script data-cfasync="true" type="text/javascript">';
for ($ncount = 1; $ncount <= $units; $ncount++) {
    if(!$voted) {
         $rater.='document.write("<p onClick=\"parent.location=\'\/db.php?j='.$ncount.'&q='.$id.'&t='.$ip.'&c='.$units.'\'\" style=\"cursor:pointer\" class=\"r'.$ncount.'-unit rater\"></p>");';
    }
}
$rater.='</script>'; 
```

它功能齐全，但我*必须*设法`db.php`从链接中取出，因为谷歌看到这个文件并且在这个文件中是一个 302 重定向。

但是我发现[了一个使用相同评级系统的网站](http://www.hdcarwallpapers.com/amazing_porsche_car-wallpapers.html)，但找到了一种使评级系统通过“rel”属性工作的方法。

有人知道他们是怎么做到的吗？

这是包含所有 php 内容的原始文件：

```
<?php
/*
Page:           _drawrating.php
Created:        Aug 2006
Last Mod:       Mar 18 2007
The function that draws the rating bar.
--------------------------------------------------------- 
ryan masuga, masugadesign.com
ryan@masugadesign.com 
Licensed under a Creative Commons Attribution 3.0 License.
http://creativecommons.org/licenses/by/3.0/
See readme.txt for full credit details.
--------------------------------------------------------- */
function rating_bar($id,$units='',$static='') { 
global $LANG;
require('_config-rating.php'); // get the db connection info

//set some variables
$ip = $_SERVER['REMOTE_ADDR'];
if (!$units) {$units = 10;}
if (!$static) {$static = FALSE;}

// get votes, values, ips for the current rating bar
$query=mysql_query("SELECT total_votes, total_value, used_ips FROM `$rating_dbname`.$rating_tableName WHERE id='$id' ")or die(" Error: ".mysql_error());

// insert the id in the DB if it doesn't exist already
// see: http://www.masugadesign.com/the-lab/scripts/unobtrusive-ajax-star-rating-bar/#comment-121
if (mysql_num_rows($query) == 0) {
$sql = "INSERT INTO `$rating_dbname`.$rating_tableName (`id`,`total_votes`, `total_value`, `used_ips`) VALUES ('$id', '0', '0', '')";
$result = mysql_query($sql);
}

$numbers=mysql_fetch_assoc($query);

if ($numbers['total_votes'] < 1) {
    $count = 0;
} else {
    $count=$numbers['total_votes']; //how many votes total
}
$current_rating=$numbers['total_value']; //total number of rating added together and stored
$tense=($count==1) ? $LANG->l('vote') : $LANG->l('votes'); //plural form votes/vote

// determine whether the user has voted, so we know how to draw the ul/li
$voted=mysql_num_rows(mysql_query("SELECT used_ips FROM `$rating_dbname`.$rating_tableName WHERE used_ips LIKE '%".$ip."%' AND id='".$id."' ")); 

// now draw the rating bar
$rating_width = @number_format($current_rating/$count,2)*$rating_unitwidth;
$rating1 = @number_format($current_rating/$count,1);
$rating2 = @number_format($current_rating/$count,2);

if ($static == 'static') {

        $static_rater = array();
        $static_rater[] .= "\n".'<div class="ratingblock static">';
        $static_rater[] .= '<div id="unit_long'.$id.'">';
        $static_rater[] .= '<ul id="unit_ul'.$id.'" class="unit-rating" style="width:'.$rating_unitwidth*$units.'px;">';
        $static_rater[] .= '<li class="current-rating" style="width:'.$rating_width.'px;">'.$rating2.'/'.$units.'</li>';
        $static_rater[] .= '</ul>';
//      $static_rater[] .= '<p class="static">('.$count.' '.$tense.') <em>This is \'static\'.</em></p>';
        $static_rater[] .= '</div>';
        $static_rater[] .= '</div>'."\n\n";

        return join("\n", $static_rater);

} else {

      $rater ='';
      $rater.='<div class="rating-text">'.$LANG->l('Rate this wallpaper:').' </div><div class="ratingblock nonstatic">';

      $rater.='<div id="unit_long'.$id.'">';
      $rater.='<ul id="unit_ul'.$id.'" class="unit-rating" style="width:'.$rating_unitwidth*$units.'px;">';
      $rater.='<li class="current-rating" style="width:'.$rating_width.'px;">'.$rating2.'/'.$units.'</li>';

      for ($ncount = 1; $ncount <= $units; $ncount++) { // loop from 1 to the number of units
           if(!$voted) { // if the user hasn't yet voted, draw the voting stars
              $rater.='<li><a href="'.WEB_PATH.'db.php?j='.$ncount.'&amp;q='.$id.'&amp;t='.$ip.'&amp;c='.$units.'" title="'.$ncount.' out of '.$units.'" class="r'.$ncount.'-unit rater" rel="nofollow">'.$ncount.'</a></li>';
           }
      }
      $ncount=0; // resets the count

      $rater.='</ul>';
      $rater.='<p';
      if($voted){ $rater.=' class="voted"'; }
      $rater.='>('.$count.' '.$tense.')';
      $rater.='</p>';
      $rater.='</div>';
      $rater.='</div>';
      return $rater;
 }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:37:54.147

如果您将属性添加`rel="nofollow"`到链接，您告诉 Google（和其他爬虫）不要跟踪该链接。不能保证他们会遵守这一点，但他们中的大多数人都会遵守。

另一种方法是使用 robots.txt（或者您可以同时使用两者），它可以包含不应编入索引的 url 或 url 掩码列表。

您也可以尝试识别脚本中的爬虫，但这意味着您必须创建一个与数据保持同步的列表，并对每个请求进行大量检查。不是最好的选择。

`db.php`无论如何，如果没有登录用户，我会通过不做任何特别的事情来解决这个问题。您不希望每次有不服从的爬虫经过时都保存一堆选票，因为每个链接都是匿名保存的。这样的投票系统很容易被弄乱，因为只需编写对该 URL 的请求，就可以模拟数千次投票。

# arrays - 将循环添加到数组

> ID：13083529
> 
> 赞同：0
> 
> 时间：2012-10-26T08:37:50.137
> 
> 标签：arrays, loops, coldfusion, coldfusion-8

我正在尝试将循环的结果添加到数组中。

这是我的代码：

```
 <cfset mobNumbers = ArrayNew(1)>

<cfloop query = "staffLoop">
    <cfscript>

      mobileNo = staffLoop.mobileno;
      mobileNo = mobileNo.replaceAll("[^0-9]", "");
      ext = staffLoop.extension;
      ext = ext.replaceAll("[^0-9]", "");

      if (Left(mobileNo, 2) == "07" || Left(mobileNo, 3) == "447") {
        recipient = mobileNo;
      } else if (Left(ext, 2) == "07" || Left(ext, 3) == "447") {
        recipient = ext;
      } else {
        recipient = "";
      }

      if (Left(recipient, 2) == "07") {
        recipient = "447" & Right(recipient, Len(recipient) - 2);
      }

      if (Len(recipient) == 12) {

       [send text code]

      }
    </cfscript>
  </cfloop>
<cfset ArrayAppend(mobNumbers, "recipient")> 
```

目标是获取所有手机号码的数组。

我的代码不工作，我经过一些研究，我不知道该怎么做。有任何想法吗？

如果可能的话，我想为我的解决方案使用非 cfscript，但如果使用 cfscript 更容易，那很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:03:57.837

正如亚当指出的那样， ArrayAppend 需要在循环内。您还需要在对 ArrayAppend 的调用中删除“收件人”周围的引号，否则您将拥有一个字符串“收件人”的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:02:20.430

您`arrayAppend()`需要*在*循环内，否则您只是在循环完成后附加最后一个结果。

# jquery - jquery在IE中提交失败

> ID：13083532
> 
> 赞同：0
> 
> 时间：2012-10-26T08:38:02.337
> 
> 标签：jquery, internet-explorer

我有一些 jquery 的问题，它适用于 chrome 和 firefox，但不适用于 IE

编码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">
</script>
</head>

<body>

<form method='post' name='aform' action='test2.html'>
<input type='file' value='Upload Billede' name='image[fileupload]' /><input type='button' class='upload image[fileupload]' value='Upload Billede' />
</form>
<script type="text/javascript">
$(document).ready(function(){

bind_file_upload();    
});
function bind_file_upload()
{
    var target_id;
    $("[name='image[fileupload]']").change(function(event){
        $("[name='aform']").submit();
    });
    $(".upload").click(function(){
        $("[name='image[fileupload]']").click();
    });
}

</script>

</body>
</html> 
```

问题是，当我通过浏览按钮直接使用文件控件时，页面提交，但是当我使用自己的上传按钮时，它会触发文件对话框，但是当我选择一个文件并按下打开 jquery 时，权限被拒绝。

我做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:41:41.477

您的问题是，当您模拟单击文件输入时，IE 将表单标记为安全威胁，并且不会发送它。对于 IE，您必须让用户自己单击文件输入。

**编辑**：

如果你真的想自定义文件输入，你可以考虑这个：[http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

或者，您可以使用可以根据需要自定义的 flash/silverlight 插件，或者对于 Internet Explorer 使用 ActiveX 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T08:56:09.770

正如 Gregoire D. 所说，当用户不直接单击文件输入时，IE 会阻止您的表单提交。所以对于 IE 我使用下一个解决方案

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

那里提供了两种可能的解决方案。我更喜欢第一个（基于 CSS）的解决方案。

# mutex - 为什么删除锁会减少 Helgrind 中的错误？

> ID：13083534
> 
> 赞同：0
> 
> 时间：2012-10-26T08:38:04.283
> 
> 标签：mutex, race-condition, locks

我正在做我的第一个并行编程任务，并且对我在整个互斥锁情况下所做的事情知之甚少。

我正在尝试使用 Helgrind 在我的代码中定位竞争条件，当我在我认为应该在的位置锁定时，Helgrind 返回一个惊人的 7300 错误！但是，删除关键部分中的一些锁实际上会将我的错误减少到 6000，尽管我知道这是一个需要锁的区域。

这可能是什么原因造成的？也许作为一般性陈述，有人可以给我一个很好的参考资料，为新手解释互斥锁吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:54:28.227

首先，Helgrind 不仅可以检测竞争，还可以检测互斥锁的滥用，包括递归锁定非递归互斥锁、解锁以前未锁定的互斥锁等。通过删除对 的调用`pthread_mutex_*`，您可能只是删除了由于以下原因导致的错误滥用互斥量 API。Helgrind[手册页](http://valgrind.org/docs/manual/hg-manual.html)对 Helgrind 检测到的错误种类进行了详尽的描述。

其次，像 Helgrind 这样的动态竞争检测器因产生*许多*错误消息而臭名昭著——通常，太多而无用。您应该首先尝试使用尽可能小的代码片段，这样您就不会被错误报告所淹没。

# ruby-on-rails - 设计已登录但未经授权

> ID：13083535
> 
> 赞同：2
> 
> 时间：2012-10-26T08:38:06.077
> 
> 标签：ruby-on-rails, devise

在执行以下操作后，我遇到了 Devise 的问题：

*   我注册了一个新用户（工作正常）
*   我确认用户邮件（工作正常）。那时我已正常登录，一切正常。
*   现在，如果我注销并尝试重新登录，则会收到未经授权的错误 (401)。

在这里查看服务器日志会发生什么：

```
Started POST "/users/sign_in" for 127.0.0.1 at 2012-10-26 10:26:23 +0200
Processing by Users::SessionController#create as JSON
  Parameters: {"email"=>"olivier.milla@gmail.com", "password"=>"[FILTERED]",     "remember_me"=>"0"}
WARNING: Can't verify CSRF token authenticity
  User Load (0.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`email` =     'olivier.milla@gmail.com' LIMIT 1
   (1.0ms)  BEGIN
   (0.0ms)  COMMIT
   (1.0ms)  BEGIN
   (0.0ms)  UPDATE `users` SET `current_sign_in_at` = '2012-10-26 08:26:23', `sign_in_count` = 2, `updated_at` = '2012-10-26 08:26:23' WHERE `users`.`id` = 1
   (25.0ms)  COMMIT
  Rendered devise/sessions/create.json.rabl (1.0ms)
Completed 200 OK in 135ms (Views: 22.0ms | ActiveRecord: 27.0ms)

Started GET "/accounts/new" for 127.0.0.1 at 2012-10-26 10:26:23 +0200
Processing by AccountsController#new as HTML
Completed 401 Unauthorized in 0ms 
```

如您所见，我已登录，甚至`devise/sessions/create.json.rabl`在我被重定向到我不再被授权的“/accounts/new”之后得到了一个呈现的视图（）。然后我可以尝试访问我想要的任何 URL 并不断收到未经授权的消息。

我在一个新的数据库（db：reset）上尝试了这个，我尝试在登录之前清理 cookie。

知道这种行为可能来自哪里吗？

我将 Devise 2.1.2 与 Rails 3.2.8 一起使用。

**更新**

根据要求： AccountsController 代码：

```
class AccountsController < ApplicationController
  before_filter :authenticate_user!

  def :index
    @accounts = current_organization.accounts
  end

  def new
    @account = Account.new(:organization => current_organization)
  end

  def create
    @account = Account.new(params[:account])
    @account.organization = current_organization
    if @account.save
      redirect_to :index
    else
        #TODO
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:53:26.353

你应该做这个：

1.  确保`<%= csrf_meta_tag %>`您的布局中有

2.  添加`beforeSend`到所有 ajax 请求以设置如下标头：

* * *

```
$.ajax({ url: 'YOUR URL HERE',
  type: 'POST',
  beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'))},
  data: 'someData=' + someData,
  success: function(response) {
    $('#someDiv').html(response);
  }
}); 
```

来自：[警告：无法验证 CSRF 令牌真实性轨道](https://stackoverflow.com/posts/8175979/edit)

* * *

`:token_authentication`尽管发生这种情况是因为您在模型中启用了。

你可能不想要这个。

* * *

否则，如果您只想跳过 AJAX 请求的身份验证，您可以这样做：

```
skip_before_filter :verify_authenticity_token, :if => Proc.new { |c| c.request.format == 'application/json' } 
```

* * *

关于您的真正错误，是不是因为您正在为`:authenticate_user!`用户签入并`current_organization`在代码中使用？

因此，如果它通过了身份验证，它就不一定具有`current_organization`价值！

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:44:14.840

`WARNING: Can't verify CSRF token authenticity`是关键。您需要通过 ajax 请求传递 csrf 令牌，还要确保`csrf_meta_tag`您的布局中有。 [警告：无法验证 CSRF 令牌真实性轨道](https://stackoverflow.com/questions/7203304/warning-cant-verify-csrf-token-authenticity-rails)可能会有所帮助。

# asp.net - 切换所有 .cshtml 文件的“复制到输出：始终”

> ID：13083539
> 
> 赞同：1
> 
> 时间：2012-10-26T08:38:33.153
> 
> 标签：asp.net, visual-studio, powershell, fubumvc

我有一个 fubu mvc 应用程序，如果我的视图文件（.cshtml）被复制到输出并设置为资源（通过属性菜单），它只能在本地 iis 上运行。

但是，要在 Windows azure 上获取它们，需要将它们设置为“复制到输出：始终”，而不是设置为资源。

是否可以在代码或 powershell 中更改此设置？所以我可以在推到天蓝色之前拨动开关，然后再拨回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T09:30:47.663

我迟到了，但你的问题的答案是 .cshtml-files 必须设置为**Build Action** : **Content**下的属性。这是 MVC 视图的默认构建操作。

**复制到输出目录**应设置为**不复制**

# android-animation - 带有动画的android轮播

> ID：13083542
> 
> 赞同：1
> 
> 时间：2012-10-26T08:38:59.240
> 
> 标签：android-animation

当我触摸所选图像时，我想要一个动画（例如：淡出）。我在这里使用轮播示例：[Android 3D Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

我的代码是

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Animation fadeout = AnimationUtils.loadAnimation(this, R.anim.fadeout);

    Carousel carousel = (Carousel)findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {                
            //Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();

            if(position==0){
                String toastMessage = String.format("RFID");
                Toast.makeText(getApplicationContext(), toastMessage, Toast.LENGTH_LONG).show();

                Animation anim = null;  
                anim = new RotateAnimation(0.0f,+360.0f);  
                anim.setInterpolator(new AccelerateDecelerateInterpolator());  
                anim.setDuration(30000);
                findViewById(R.id.carousel).startAnimation(anim);    

                Intent i = new Intent();
                i.setClass(MainActivity.this, web_rfid.class);
                startActivity(i);

            }

        }

    });
} 
```

我希望旋转选定的图像，但结果是整个屏幕旋转。问题是

```
findViewById(R.id.carousel).startAnimation(anim); 
```

但我不知道如何在我的代码中找出选定的图像。请帮帮我。谢谢。

# mysql - CakePHP 多重嵌套查询

> ID：13083543
> 
> 赞同：0
> 
> 时间：2012-10-26T08:39:10.613
> 
> 标签：mysql, cakephp-1.3

我希望我的查询为：

```
$conditions = array(
                        'ManageTrackby.trackby_num NOT LIKE' => '%n/a%',
                        'Balancesheet.subscriber_id' => $_SESSION['Auth']['User']['subscriber_id'],
                        'Balancesheet.show_id' => $this->Session->read('openshowid'),
                        'OR' => array('Balancesheet.season_id' => $season_id,  'Balancesheet.season_id is null'),
                        'OR' => array('Balancesheet.episode_id'=> $episode_id, 'Balancesheet.episode_id is null')
                    ); 
```

它在这里跳过最后一个`OR`选项并给出以下结果：

```
Array
(
[ManageTrackby.trackby_num NOT LIKE] => %n/a%
[Balancesheet.subscriber_id] => 105
[Balancesheet.show_id] => 56
[OR] => Array
    (
        [Balancesheet.episode_id] => 86
        [0] => Balancesheet.episode_id is null
    ) 
```

)

在这里，它错过`SEASON_ID`了条件，知道为什么吗？

请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:18:51.900

试试这个。如果您想要所有第一个条件，加上第二个条件中的一个或，那么您将需要 AND 数组中的 OR。对于复杂的发现，请在此页面上查找信息[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

```
$conditions = array(
   'AND' => array(
                  'ManageTrackby.trackby_num NOT LIKE' => '%n/a%',
                  'Balancesheet.subscriber_id' => $_SESSION['Auth']['User']['subscriber_id'],
                  'Balancesheet.show_id' => $this->Session->read('openshowid')
            )
   'OR' => array(
    array('Balancesheet.season_id' => $season_id,  'Balancesheet.season_id is null'),
            array('Balancesheet.episode_id'=> $episode_id, 'Balancesheet.episode_id is null')
            )
               ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:45:06.630

您的数组设置 OR 元素两次。将两个 OR 语句放在各自的数组中：

```
 $conditions = array(
    'ManageTrackby.trackby_num NOT LIKE' => '%n/a%',
    'Balancesheet.subscriber_id' => $_SESSION['Auth']['User']['subscriber_id'],
    'Balancesheet.show_id' => $this->Session->read('openshowid'),
array('OR' => array('Balancesheet.season_id' => $season_id,  'Balancesheet.season_id is null')),
array('OR' => array('Balancesheet.episode_id'=> $episode_id, 'Balancesheet.episode_id is null'))
); 
```

# jquery - 使用用户界面进行转换的 JQuery 插件

> ID：13083544
> 
> 赞同：1
> 
> 时间：2012-10-26T08:39:18.140
> 
> 标签：jquery, interface, transform

我正在寻找一个 jQuery 插件，它可以为图像添加一个界面，以转动、缩放、旋转和移动角落中的点，就像在 Photoshop 和其他图像处理软件中一样。

当我不需要它时，我遇到了类似的东西，现在我需要它，我只是找不到它。我发现的唯一的事情是：

[http://www.egrappler.com/contents/SmartIt/Demo/smartit.htm](http://www.egrappler.com/contents/SmartIt/Demo/smartit.htm)

它看起来不错，正是我所需要的，但旋转有点小问题。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:11:30.643

在一个项目中，我为此使用了 css 属性“transform”：

```
var rotate = function(degree)
{
   ...
   oSelf.css({
      'transform' : 'rotate('+degree+'deg)',
      '-ms-transform' : 'rotate('+degree+'deg)',
      '-o-transform' : 'rotate('+degree+'deg)',
      '-webkit-transform' : 'rotate('+degree+'deg)',
      '-moz-transform' : 'rotate('+degree+'deg)'
   });
} 
```

通常它在 IE8 和更早版本中[不起作用。](http://caniuse.com/#search=transform)

但是恕我直言，[这个库](http://code.google.com/p/jqueryrotate/)的渲染比原生浏览器渲染更漂亮。

还有一个[编辑图片的示例，](http://vremenno.net/examples/jquery-ui-rotation/)但它使用旧库

# ios6 - QLPreviewController在ios6中隐藏打印按钮

> ID：13083546
> 
> 赞同：2
> 
> 时间：2012-10-26T08:39:24.537
> 
> 标签：ios6, qlpreviewcontroller

如何隐藏打印按钮`QLPreviewController`

中`IOS5`，此代码有效

```
QLPreviewController *previewController = [[QLPreviewController alloc] init];
previewController.dataSource = self;
previewController.delegate = self;
previewController.currentPreviewItemIndex = _fileidx;
[[self navigationController] pushViewController:previewController animated:YES];
[previewController.navigationItem setRightBarButtonItem:nil]; 
```

但在IOS6中，它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:09:56.890

我设法通过创建一个计时器来检查导航项并将其删除来做到这一点

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
             target:self
             selector:@selector(hideRightButton:)
             userInfo:nil
             repeats:YES];
- (void)hideRightButton:(NSTimer *)timer {
    [self inspectSubviewsForView:self.view];
}
- (void)inspectSubviewsForView:(UIView *)view
{
    for (UIView *subview in view.subviews)
    {
        NSLog(@"class detected %@",[subview description]);
        if ([subview isKindOfClass:[UINavigationBar class]])
        {
            UINavigationBar *bar = (UINavigationBar *)subview;
            if ([[bar items] count] > 0)
            {
                UINavigationItem *navItem = [[bar items] objectAtIndex:0];
                [navItem setRightBarButtonItem:nil];
                {
                }

                if ([subview isKindOfClass:[UIView class]] && [[subview subviews] count] > 0)
                {
                    [self inspectSubviewsForView:subview];
                }
            }
        }
        [self inspectSubviewsForView:subview];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:11:44.637

问题是，一旦文档准备好，按钮似乎会重新生成。我无法真正定义“准备就绪”，但我编写了一个测试应用程序并注意到以下几点：

*   设置 NavigationItem 的右栏按钮在 iOS6 中不起作用
*   扫描视图层次结构并搜索 UIToolbar 的实例并设置工具栏的按钮有效。

只有当显示的文档足够快地“准备好”时，上述技巧才有效。大文件需要更长的时间。我想出了一个两步解决方案：

*   搜索导航项
*   使用 NSTimer 不断隐藏它。

这是一些代码：

这是来自 ViewDidAppear()：

设置一个持续隐藏按钮的计时器。

```
NSTimer oTimer = NSTimer.CreateRepeatingTimer(0.2, this.HidePrintButton);
NSRunLoop.Current.AddTimer(oTimer, NSRunLoopMode.Default);

private void HidePrintButton()

{
if(this.oNavItem == null)
{
return;
}
this.InvokeOnMainThread(
delegate {
this.oNavItem.SetRightBarButtonItems( new UIBarButtonItem[0], false );
} );
} 
```

这将搜索导航项：

```
/// <summary>

          /// Finds the first navigation item inside a view hierachy.

          /// </summary>

          /// <param name='oCurrentView'>the view to start searching from</param>

          /// <param name='oItem'>will be set if the navigation item was found</param>

          public static void FindNavigationItem(UIView oCurrentView, ref UINavigationItem oItem)

          {

               if(oItem != null || oCurrentView == null || oCurrentView.Subviews == null || oCurrentView.Subviews.Length <= 0)

               {

                    return;

               }

               // Check if a UINavigationBar was found. This will contain the UINavigationItem.

               if(oCurrentView is UINavigationBar)

               {

                    UINavigationBar oBar = (UINavigationBar)oCurrentView;

                    if(oBar.Items != null && oBar.Items.Length > 0)

                    {

                         oItem = oBar.Items[0];

                    }

                    return;

               }

               // Recursively loop all sub views and keep on searching.

               foreach (var oSubView in oCurrentView.Subviews)

               {

                    FindNavigationItem(oSubView, ref oItem);

                    if(oItem != null)

                    {

                         break;

                    }

               }

          } 
```

# iphone - prefix 属性后面必须跟一个接口或协议 + NSManagedObject 子类

> ID：13083548
> 
> 赞同：0
> 
> 时间：2012-10-26T08:39:29.637
> 
> 标签：iphone, ios, ipad, core-data

所以我在 xcode 生成的 NS Managed Object 子类中得到编译错误“前缀属性必须后跟接口或协议”。错误匹配到行`@class AnswerSet, Section, SurveyStyle;`，然后是使用这些对象的所有行。该错误似乎是随机出现的，但我相当确信它源于删除一些生成的类然后重新构建它们。

类中的代码无关紧要，因为它以前工作过，并且在我将其复制到新项目中时会编译。

到目前为止，我已经尝试再次删除它们并重建。清理项目。重启等。

我最后的手段是将所有内容复制到一个新的项目文件中和/或重构我所拥有的，但我希望有人能提出一些建议来拯救我！

编辑：刚刚尝试重命名有问题的文件的实体/类。Xcode 挂起，我强行退出它。重命名文件并重构。结束了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:18:19.730

原来错误是由于类顶部注释之外的杂散字符造成的。不知道为什么它没有把它捡起来，但花了很长时间才找到它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:07:52.103

在实现文件(.m)import AVFoundation/AVFoundation.h中添加这段代码

# mysql - sql 查询按特定结果分组为两个字段值的组合值

> ID：13083551
> 
> 赞同：0
> 
> 时间：2012-10-26T08:39:39.960
> 
> 标签：mysql, sql

我的消息表包含两个字段，`senderid`并且`recipientid`. 我需要列出所有消息，但值的组合`senderid`不需要`recipientid`重复。

例如 if`senderid = 4`和`recipientid = 2`，我只需要这个的一个组合值；要么是 4,2，要么是 2,4。

任何人都可以帮助我这样做吗？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:50:11.333

想法很简单，只需确保发送者/接收者 ID 以这样的方式连接，即较小的 ID 在较大的 ID 前面。

```
select
  pair, count(*) 
from 
  (select if(senderid<recipientid, concat(senderid, ',', recipientid), concat(recipientid,',',senderid)) as pair from messages) pairs
group by pair; 
```

注意这种选择的表现。也许您想在插入记录时创建一个额外的列来存储对值，并为该列建立索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:43:58.373

```
select
    message,
    case when senderid < recipientid then recipientid else senderid end,
    case when senderid < recipientid then senderid else recipientid end
from m
group by
    message,
    case when senderid < recipientid then recipientid else senderid end,
    case when senderid < recipientid then senderid else recipientid end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:45:24.690

```
select *
from myTable a
where not exists
(
    select top 1 1 
    from myTable b
    where a.senderId = b.receiverId
    and a.receiverId = b.senderId
    and a.senderId < b.senderId
) 
```

# css - css sprite : 带有 ul li 的 div h2 标题图像

> ID：13083559
> 
> 赞同：0
> 
> 时间：2012-10-26T08:40:32.877
> 
> 标签：css, css-sprites

我在我的网页上使用 SpriteMe，下面有代码。问题是它显示完整的精灵图像而不是其中的单个图像。

```
<div class="white_box">
     <div class="white_box_top_JS" style="background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png); border: 2px solid red; background-position: -279.5px -10px; ">
         <h2>Job Seekers</h2>
         <ul>
             <li>
                <a href="/?user_group_id=JobSeeker" class="web_des" style="background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png); background-position: -638px -6px; ">Register</a>  
            </li>
         </ul>
    </div>
</div> 
```

我已阅读并关注[<ul> Sprite Issue](https://stackoverflow.com/questions/6213339/ul-sprite-issue)但无法获得。

[http://jsfiddle.net/6TaQt/30/](http://jsfiddle.net/6TaQt/30/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:18:55.920

最好尽可能远离内联样式。此外，li 元素应该接收精灵，而不是锚点。这是相关更改的开始：（也在[分叉的小提琴](http://jsfiddle.net/ekCBq/)中）

HTML：

```
 <ul>
         <li id="register">
             <a href="/?user_group_id=JobSeeker" class="web_des">Register</a>
        </li>
         <li id="post">
             <a href="/add-listing/?listing_type_id=Resume" class="web_dev">Post resumes</a>
        </li>
         <li id="find">
             <a href="/find-jobs/" class="seo" >Find jobs</a>
        </li>
         <li id="get">
             <a href="/job-alerts/?action=new" class="cms">Get jobs by email</a>
        </li>
     </ul> 
```

CSS：

```
#register { width: 40px; 
    background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png);
    background-position: -1315px -6px; }

#post { width: 40px;
    background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png) ; 
    background-position: -1360px -6px; }

#find { width: 40px;
    background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png); 
    background-position: -685px -5px; }

#get { width: 40px;
    background-image: url(http://www.jaredhirsch.com/coolrunnings/public_images/75a3bcd651/spriteme2.png); 
    background-position: -544px -6px; } 
```

# android - Android SimpleCursorAdapter 和 CursorLoader 的使用

> ID：13083560
> 
> 赞同：5
> 
> 时间：2012-10-26T08:40:43.833
> 
> 标签：android, android-listview, android-contentprovider, android-cursoradapter, android-cursorloader

我是 Android 新手，我正试图让我的标题围绕`SimpleCursorAdapter`和`CursorLoader`类。据我了解，我看到的所有示例都使用这两个类将数据加载到`ListView`后台线程中（不阻塞 UI）。

我对此很满意，并在我自己的项目列表中使用了这种通用方法，但是我现在希望能够单击列表中的一个项目并获取该项目的完整信息。`SimpleCursorAdapter`使用和`CursorLoader`检索单个项目的详细信息是通常的做法吗？还是它们只是用于列表？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T08:44:42.643

它们不仅仅用于列表。您也可以而且应该在详细视图（活动）中使用它们。

我已经在我的博客上勾勒了一种可能的方法：http: [//www.grokkingandroid.com/using-loaders-in-android/](http://www.grokkingandroid.com/using-loaders-in-android/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T08:54:18.277

将适配器视为您的数据（光标）和您将该适配器附加到的任何内容（例如 ListView）之间的抽象层。这样，您的数据（Cursor、ArrayList 等）和您在其上显示该数据的视图（ListView、TableView 等）之间就有了一个通用接口，这很有帮助，因为如果您以后发现要访问您的数据通过 ArrayList 而不是 Cursor，然后您只需将适配器换成不同的适配器就可以了。

现在考虑您的问题，适配器提供了对信息的抽象访问，因此您可以“询问”它存储了哪些信息以及存储在哪里。您可以将 OnItemClickListener 附加到您的 ListView，然后从那里访问您的数据。

# java - JTwitter 库中的类 - 不断给我 java.lang.NoClassDeffFoundError ：winterwell.jtwitter.Twitter

> ID：13083562
> 
> 赞同：0
> 
> 时间：2012-10-26T08:40:55.077
> 
> 标签：java, android

我是 java、android 和 stackoverflow 的新手，所以我希望我能给你们提供解决这个问题所需的所有信息。

我不断收到 **java.lang.NoClassDeffFoundError** : winterwell.jtwitter.Twitter 在运行这个：

```
 package com.example.testh;

    import winterwell.jtwitter.Twitter;
    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;

    public class StatusActivity extends Activity {

        Twitter twitter;
        static final String TAG = "StatusActivity";
        EditText editStatus;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.status);
            editStatus = (EditText) findViewById(R.id.user_input);

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        public void onClick(View arg0) {
             final String statusText = editStatus.getText().toString();

            new Thread() {

                public void run() {
                    try {
                    twitter.setAPIRootUrl("http://yamba.marakana.com/api");
        twitter = new Twitter("student","password");
        twitter.setStatus(statusText);

                    } catch (Exception e) {
                        Log.e(TAG, "Died",e);
                        e.printStackTrace();
                    }
                }
            }.start();

            Log.d("StatusActivity", "OnClicked with text : " + statusText);

        }
    } 
```

我正在使用来自 jtwitter 的第三方库，它是我导入的，现在位于引用库中（虽然我在库中看不到它 - 但由于不知道它的用途，我不知道它是否应该是？）

**日志猫：**

[https://docs.google.com/file/d/0BxhN1Muef3jYdnZBZzRyeHkxQjA/edit](https://docs.google.com/file/d/0BxhN1Muef3jYdnZBZzRyeHkxQjA/edit)

PS：源码第42行是：twitter.setAPIRootUrl("http://yamba.marakana.com/api");

**包资源管理器：**

[https://docs.google.com/file/d/0BxhN1Muef3jYUDJzMlFMeThqa0U/edit](https://docs.google.com/file/d/0BxhN1Muef3jYUDJzMlFMeThqa0U/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T13:55:41.137

你必须更新构建路径，即意味着你必须添加 jar，为此我做了以下步骤

[1 从https://github.com/twitter-university/LearningAndroidYamba](https://github.com/twitter-university/LearningAndroidYamba)下载 yamba 源代码

2 在那个 goto yamba-1 中有一个 jar 文件 jtwitter-yamba.jar 更新它而不是 jtwitter.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:05:54.443

您需要将 jtwitter.jar 复制到 libs 文件夹。- 希望这能解决问题。

# javascript - 如何在 ExtJs actionColumn 项目中设置样式？

> ID：13083563
> 
> 赞同：1
> 
> 时间：2012-10-26T08:41:09.190
> 
> 标签：javascript, extjs4, extjs

我有下一段代码

```
{
xtype: 'actionColumn',
id: 'act_id',
width: 30,
flex: 0,
items: [{
     getClass: function(v, meta, record) {
       if(record.get('blahblah') == true)
         return 'aClassName';
       else
         return 'aOtherClassName';
     }
   }]
} 
```

好的，这段代码工作正常，但我喜欢在我的图标中添加一个样式，但是当我使用类似的东西时：

```
{
xtype: 'actionColumn',
id: 'act_id',
width: 30,
flex: 0,
items: [{
     getClass: function(v, meta, record) {
       if(record.get('blahblah') == true)
         return 'aClassName';
       else
         return 'aOtherClassName';
     },
     style: {'width':'16px'}
   }]
} 
```

什么都没发生。我尝试了 1000 种不同的方法，但什么都没有，在 ExtJs 4 中我找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:02:17.380

```
{
xtype: 'actionColumn',
id: 'act_id',
width: 30,
flex: 0,
items: [{
     getClass: function(v, meta, record) {
       meta.attr = "style='width:16px;'";
       if(record.get('blahblah') == true)
         return 'aClassName';
       else
         return 'aOtherClassName';
     }
   }]
} 
```

# c++ - 数组中的最后一个变量不正确

> ID：13083564
> 
> 赞同：2
> 
> 时间：2012-10-26T08:41:14.297
> 
> 标签：c++

所以，我正在创建一个程序来创建一个（某种）模拟近战死亡竞赛视频游戏（目前实际上不是制作视频游戏，只是制作简单的人工智能，目标是互相杀死）。为了做到这一点，我使用了基于图块的回合制系统。

现在介绍已经结束，这里是具体问题：在我使用的一个数组中，最后一个值错误地存储在 RAM 中，无论数组中有多少变量。以下是相关代码：

（我将在底部发布我拥有的所有代码，但问题出在此处）

```
#include "stdafx.h"
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    using namespace std;

    int npcTileAttacker[] = { 0, 0, 0, 0, 0};

    int s = 0;
    while (s < 6)
    {
        cout << "The value that is being selected from the array is " << s << endl;
        cout << npcTileAttacker[s] << endl;
        s++;
        cout << "The value of s has now been set to " << s << endl;
    } 
```

这输出：

```
The value that is being selected from the array is 0
0
The value of s has now been set to 1
The value that is being selected from the array is 1
0
The value of s has now been set to 2
The value that is being selected from the array is 2
0
The value of s has now been set to 3
The value that is being selected from the array is 3
0
The value of s has now been set to 4
The value that is being selected from the array is 4
0
The value of s has now been set to 5
The value that is being selected from the array is 5
-858993640
The value of s has now been set to 6 
```

显然，数组中的最后一个值是不正确的。我想知道的是为什么会发生这种情况。除此之外，当程序结束时，我收到一条错误消息：“运行时检查失败 #2 - 变量 'npcTileAttacker' 周围的堆栈已损坏。”

我尝试将 s 的输出值和数组代码段放置在程序中的其他数组周围，导致出现同样的问题。

如果需要，这是我的完整代码：

```
#include "stdafx.h"
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    using namespace std;

int numberOfNPCs = 5;

//Remember whose alive (so we can skip the dead's turns)
int npcAlive[5] = { 1, 1, 1, 1, 1 };

/*This determines what action is going to be carried out on this square. For the moment:
if npcTileActivity[n] = 1;
the goals is death

WARNING! THIS WILL RESULT IN BUGS!!! I need to figure out a way that allows multiple activities on a tile 
(maybe apply actions onto NPCs directly, rather than onto their tiles)
*/
int npcTileActivity[] = { 0, 0, 0, 0, 0};

//This tells you who is doing the action on this tile
int npcTileAttacker[5] = { 1, 2, 3, 4, 0 };

    int s = 0;
while (s < 6)
{
    cout << "The value that is being selected from the array is " << s << endl;
    cout << npcTileAttacker[s] << endl;
    s++;
    cout << "The value of s has now been set to " << s << endl;
}
//This determines whether or not the NPC will fight back. Currently pointless, as this will just kill them.
int npcPacifism[5] = { 0 };

//This is their HP
int npcDefense[5] = {5, 5, 5, 5, 5};

//This is the default damage (presumably this is done with knives)
int npcOffense[5] = {1, 1, 1, 1, 1};

/*This determines what each NPC wants to do.
1   -   Kill Target
*/
int npcGoal[5] = {1, 1, 1, 1, 1};

//This is the NPC they are aiming at
int npcTarget[5] = {1, 2, 3, 4, 0};

/*The x coord for their target. In the future:
-I want this to be able to be changed during the sim
-This should be disabled until the NPC can find out where their target is
*/
int npcGoalLocationX[5] = {4, 1, 4, 3, 1};

/* The Y coord for their target
*/
int npcGoalLocationY[5] = {2, 3, 4, 2, 1};

/*Their x coord.
This will change, then the all npcGoalLocations need to be updated
*/
int npcLocationX[5] = {1, 4, 1, 4, 3};

/* Their y coord.
*/
int npcLocationY[5] = {1, 2, 3, 4, 2};

int m = 1;
while (m != 0)
{

    int i = 0;

    //Loop until every npc has had a turn
    while (i < (numberOfNPCs + 1))
    {
        /*npcGoalLocationY[i] = npcLocationY[npcTarget[i]];
        npcGoalLocationY[i] = npcLocationY[npcTarget[i]];*/
        if (npcAlive[i] = 1)
        {
            /* Tile activities:
            1 - Kill occupant
            */ 
            if (npcTileActivity[i] = 1)
            {
                cout << "This shouldn't be the first thing." << endl;

                //This gets the attack and defense values for the appropriate acting NPC
                int j = 0;
                while (j < (numberOfNPCs + 1))
                {

                    if (npcTileAttacker[i] = j)
                    {
                        //Defender's HP - Attacker's damage
                        int rollAttack1 = npcDefense[i] - npcOffense[j];
                        if (rollAttack1 > 0)
                            {
                            npcDefense[i] = rollAttack1;
                            cout << "NPC " << j << " attacks NPC " << i << endl;
                            if (npcPacifism[i] = 0)
                            {
                                //Defender retaliates
                                int rollAttack2 = npcDefense[j] - npcOffense[i];
                                if (rollAttack2 > 0)
                                {
                                    npcDefense[j] = rollAttack2;
                                    cout << "NPC " << i << " retaliates" << endl;
                                }else
                                {
                                    npcAlive[j] = 0;
                                    cout << "NPC " << j << " dies" << endl;
                                }
                            }
                        }else
                        {
                            npcAlive[i] = 0;
                            cout << "NPC " << i << " dies" << endl;
                        }
                    }
                    j++;
                }
            }else
            {
                cout << "This should be the first." << endl;
                if (npcGoal[i] != 0)
                {
                    if (npcGoalLocationX[i] = npcLocationX[i])
                    {
                        if (npcGoalLocationY[i] = npcLocationY[i])
                        {
                            //The Tile Activity of the current NPC's target is set to whatever the current NPC's goal is
                            npcTileActivity[npcTarget[i]] = npcGoal[i];
                        }
                    }
                    if (npcGoalLocationX[i] > npcLocationX[i])
                    {
                        npcLocationX[i]++;
                    }
                    if (npcGoalLocationX[i] < npcLocationX[i])
                    {
                        npcLocationX[i]--;
                    }
                    if (npcGoalLocationY[i] > npcLocationY[i])
                    {
                        npcLocationY[i]++;
                    }
                    if (npcGoalLocationY[i] < npcLocationY[i])
                    {
                        npcLocationY[i]--;
                    }
                }
            }
        }
        i++;
    }
    cin >> m;
}
return 0;
} 
```

另外，我遇​​到了一个问题（围绕“这应该是第一件事”和“这不应该是第一件事”的行）：不应该是第一个的是第一个，应该是第一个甚至永远不会执行。然而，这可能与数组错误有关。

感谢你的协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:41:54.457

你的条件差了一个：

```
while (s < 6) 
```

应该

```
while (s < 5) 
```

该数组`{ 0, 0, 0, 0, 0}`有五个元素，因此有效索引为`0,1,2,3,4`.

`s < 6`你的条件在is时停止`false`，所以它仍然是 true for `s == 5`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:46:51.430

您在 while 循环表达式中以 1 的优势出局。

最好使用 for 循环而不是硬编码数组的长度。尝试这样的事情：

```
int npcTileAttacker[] = { 0, 0, 0, 0, 0};
int npcTileAttackerLength = sizeof(npcTileAttacker)/sizeof(npcTileAttacker[0]);

for(int s=0; s<npcTileAttackerLength; s++)
{
    cout << "The value that is being selected from the array is " << s << endl;
    cout << npcTileAttacker[s] << endl;
} 
```

这样，长度变量将始终保存数组中的项目数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:42:22.610

您的数组只有 5 个单元格：

```
int npcTileAttacker[] = { 0, 0, 0, 0, 0}; 
```

也就是说，`s`应该从 0 到 4，而不是从 0 到 5。

您看到的“随机”值实际上是`npcTileAttacker`数组后堆栈上的任何值，因为您正在溢出该数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T08:44:40.317

数组的大小为 5。因此有效索引为 0-4。因此，npcTileAttacker[5] 将始终发布垃圾。

# android - Android moveTaskToFront 服务

> ID：13083565
> 
> 赞同：1
> 
> 时间：2012-10-26T08:41:14.630
> 
> 标签：android, android-service, android-launcher, android-homebutton

Android 4.0 现在允许开发人员禁用应用程序。

然后我开发了一项服务，当用户单击主页按钮时，将应用程序带到前台。

现在我可以成功地将应用程序带到前台。

但是每次我打开应用程序然后单击主页按钮。它将显示启动器并延迟 5-6 秒以将应用程序带到前台。

我发现该服务重试了几次以将应用程序置于前台。但是当我单击启动器上的按钮时，它会立即将应用程序带到前台。

任何解决延迟问题的解决方案？谢谢。

# arrays - R从具有列号和行号的线性表生成矩阵

> ID：13083566
> 
> 赞同：1
> 
> 时间：2012-10-26T08:41:25.133
> 
> 标签：arrays, r, matrix

我是 R 的新手并且与数组斗争。我的问题很简单，但我没有在网络或 R 文档中找到简单的答案。

我有一个包含列号和行号的表，我想用它来生成一个新矩阵

原表：

```
 V1  V2     pval
1    1    2    5.914384e-13
2    1    3    8.143390e-01
3    1    4    7.587818e-01
4    1    5    9.734698e-12
5    1    6    7.812521e-19 
```

我想使用：

*   `V1`作为新矩阵的列号；
*   `V2`作为行号
*   `pvals`作为价值

目标矩阵：

```
 1         2       3       4
1    0         5e-1    8e-1    7e-1
2    5e-13     0
3    8e-1              0
4    7e-1                      0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:19:53.200

```
#some data
set.seed(42)
df <- data.frame(V1=rep(1:6,each=3),V2=rep(1:3,6),pval=runif(18,0,1))
df <- df[df$V1!=df$V2,]

#   V1 V2        pval
#2   1  2 0.560332746
#3   1  3 0.904031387
#4   2  1 0.138710168
#6   2  3 0.946668233
#7   3  1 0.082437558
#8   3  2 0.514211784
# ...

#use dcast to change to wide format
library(reshape2)
df2 <- dcast(df,V2~V1,fill=0)

#  V2         1         2          3         4         5           6
#1  1 0.0000000 0.1387102 0.08243756 0.9057381 0.7375956 0.685169729
#2  2 0.5603327 0.0000000 0.51421178 0.4469696 0.8110551 0.003948339
#3  3 0.9040314 0.9466682 0.00000000 0.8360043 0.3881083 0.832916080

#in case you really want a matrix object
m <- as.matrix(df2[,-1]) 
```

# c - memcpy 在这个程序中到底做了什么？

> ID：13083575
> 
> 赞同：3
> 
> 时间：2012-10-26T08:41:58.617
> 
> 标签：c, string, malloc, memcpy, realloc

我正在编写一个程序，其中输入将从标准输入中获取。第一个输入将是一个整数，表示要从标准输入读取的字符串数。我只是将字符串逐个字符读入动态分配的内存中，并在字符串结束后显示它。
但是当字符串大于分配的大小时，我正在使用[realloc](http://www.thinkage.ca/english/gcos/expl/c/lib/reallo.html)重新分配内存。但即使我使用 memcpy，该程序也可以工作。不使用 memcpy 是未定义的行为吗？但是[在 C 中使用 Realloc](https://stackoverflow.com/questions/8319216/using-realloc-in-c)的示例不使用 memcpy。那么哪一种是正确的方法呢？下面显示的程序是否正确？

```
/* ss.c
 * Gets number of input strings to be read from the stdin and displays them.
 * Realloc dynamically allocated memory to get strings from stdin depending on
 * the string length.
 */

#include <stdio.h>
#include <stdlib.h>

int display_mem_alloc_error();

enum {
    CHUNK_SIZE = 31,
};

int display_mem_alloc_error() {
    fprintf(stderr, "\nError allocating memory");
    exit(1);
}

int main(int argc, char **argv) {
    int numStr;                  //number of input strings
    int curSize = CHUNK_SIZE;    //currently allocated chunk size
    int i = 0;                   //counter
    int len = 0;                 //length of the current string
    int c;                       //will contain a character
    char *str = NULL;            //will contain the input string
    char *str_cp = NULL;         //will point to str
    char *str_tmp = NULL;        //used for realloc

    str = malloc(sizeof(*str) * CHUNK_SIZE);
    if (str == NULL) {
        display_mem_alloc_error();
    }    
    str_cp = str;   //store the reference to the allocated memory

    scanf("%d\n", &numStr);   //get the number of input strings
    while (i != numStr) {
        if (i >= 1) {   //reset
            str = str_cp;
            len = 0;
        }
        c = getchar();
        while (c != '\n' && c != '\r') {
            *str = (char *) c;
            printf("\nlen: %d -> *str: %c", len, *str);
            str = str + 1;
            len = len + 1;
            *str = '\0';
            c = getchar();
            if (curSize/len == 1) {
                curSize = curSize + CHUNK_SIZE;
                str_tmp = realloc(str_cp, sizeof(*str_cp) * curSize);
                if (str_tmp == NULL) {
                    display_mem_alloc_error();
                }
                memcpy(str_tmp, str_cp, curSize);    // NB: seems to work without memcpy
                printf("\nstr_tmp: %d", str_tmp);
                printf("\nstr: %d", str);
                printf("\nstr_cp: %d\n", str_cp);
            }
        }
        i = i + 1;
        printf("\nEntered string: %s\n", str_cp);
    }
    return 0;
}

/* -----------------
//input-output
gcc -o ss ss.c
./ss < in.txt

// in.txt
1
abcdefghijklmnopqrstuvwxyzabcdefghij

// output
// [..snip..]
Entered string:
abcdefghijklmnopqrstuvwxyzabcdefghij
-------------------- */ 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T08:46:27.673

你的程序不太正确。您需要删除调用以`memcpy`避免偶尔出现难以诊断的错误。

从[realloc 手册页](http://linux.die.net/man/3/realloc)

> realloc() 函数将 ptr 指向的内存块的大小更改为 size 字节。**内容将在从区域开始到新旧大小的最小值的范围内保持不变**

因此，您无需调用`memcpy`after `realloc`。事实上，这样做是错误的，因为您之前的堆单元可能已在`realloc`调用内部被释放。如果它被释放，它现在指向具有不可预测内容的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T08:46:31.953

[C11 标准 (PDF)](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，第 7.22.3.4 节第 2 段：

> 该`realloc`函数释放 ptr 指向的旧对象，并返回一个指向具有 size 指定大小的新对象的指针。**新对象的内容应与释放前旧对象的内容相同，直至新旧大小中的较小者**。新对象中超出旧对象大小的任何字节都具有不确定的值。

所以简而言之，这`memcpy`是不必要的，而且确实是错误的。错误有两个原因：

*   如果`realloc`有`free`你以前的记忆，那么你正在访问不属于你的记忆。
*   如果`realloc`刚刚扩大了你以前的记忆，你给了`memcpy`两个指向同一区域的指针。`memcpy`在其两个输入指针上都有一个`restrict`限定符，这意味着如果它们指向同一个对象，则它是未定义的行为。（旁注：`memmove`没有这个限制）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:45:10.727

Realloc 扩大为您的字符串保留的内存大小。如果可以在不移动数据的情况下放大它，那么它们将保留在原处。如果不能，则 malloc 更大的内存占用，并 memcpy 本身包含在先前内存占用中的数据。

总之，realloc之后不用调用memcpy是正常的。

从手册页：

> realloc() 函数尝试将 ptr 指向的分配大小更改为 size，并返回 ptr。如果没有足够的空间来扩大 ptr 指向的内存分配，realloc() 会创建一个新分配，**复制 ptr 指向的旧数据以适应新分配**，释放旧分配，然后返回指向已分配内存的指针。如果 ptr 为 NULL，则 realloc() 与对 malloc() 的 size 字节调用相同。如果 size 为零且 ptr 不为 NULL，则分配一个新的、最小大小的对象并释放原始对象。当扩展一个用 calloc(3) 分配的区域时，realloc(3) 不保证额外的内存也是零填充的。

# api - Magento - 如何从产品集合中排除一个类别？

> ID：13083576
> 
> 赞同：2
> 
> 时间：2012-10-26T08:42:01.113
> 
> 标签：api, magento, product

我正在尝试创建一些功能，允许我根据类别和属性值等标准任意显示产品集合并使其按预期工作，但是我也希望能够排除某些类别，以便我然后可以包括“默认类别”，然后排除我不想要的任何子类别。似乎没有像 addCategoryFilter($catid) 这样的方法。

我发现了一个[已经回答](https://stackoverflow.com/questions/9538123/how-to-exclude-a-category-from-a-magento-getcollection)但无法为我工作的类似问题。

```
$catId = 9;

/* I'm almost positive 'e' is the alias used for catalog_product_entity, check your
query with echo (string) $products->getSelect(); if it doesn't work */
$products->getSelect()->join(array('cats' => 'catalog_category_product'), 'cats.product_id = e.entity_id');
$products->getSelect()->where('cats.category_id', array('neq' => $catId)); 
```

有没有其他人有过做这种事情的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:56:44.523

我不认为有一种本地的方式来做到这一点。但是您可以轻松地制作一个快速扩展的模块

```
Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection 
```

然后您可以创建自己的方法，并更改**joinCondition**以适应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T18:21:34.897

检查我的解决方案：

```
$_productCollection = Mage::getModel('catalog/product')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addUrlRewrite();

Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($_productCollection);
Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($_productCollection);

$_productCollection->load();
$_productCollection->getSelect()->join(array('cats' => 'catalog_category_product'), 'cats.product_id = e.entity_id');
$_productCollection->getSelect()->where('cats.category_id not in (41)'); 
```

# javascript - 如何对编译后的代码进行单元测试（使用 QUnit 和 Sinon）（闭包编译器高级编译）

> ID：13083578
> 
> 赞同：2
> 
> 时间：2012-10-26T08:42:10.567
> 
> 标签：javascript, qunit, google-closure-compiler, sinon

我使用 QUnit 为我的未编译代码创建了一些单元测试，并在需要时使用 sinon 模拟函数。但问题是，在闭包编译器的高级编译之后，函数名称发生了变化，因此单元测试用例不适用于编译代码。

我在这里阅读了[https://groups.google.com/forum/#!topic/closure-library-discuss/uU2t2xbVtlc](https://groups.google.com/forum/#!topic/closure-library-discuss/uU2t2xbVtlc)，它不需要测试编译的代码。但我仍然想这样做。

所以，我的问题是我是否可以为编译代码移植这些测试用例。如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:16:59.557

您需要将单元测试与源代码一起编译。为此，您必须为 QUnit 创建一个外部文件。

如果您希望在编译后将单元测试与源代码放在单独的文件中，请使用以下`--module`选项：[如何使用 Google 的 Closure Compiler 将我的 javascript 拆分为模块？](https://stackoverflow.com/questions/10395810/order-of-files-compiled-with-the-google-closure-compiler)

# qt - Qt 将 QVector 元素添加到 QStack 的最快方法，避免循环

> ID：13083580
> 
> 赞同：1
> 
> 时间：2012-10-26T08:42:13.850
> 
> 标签：qt, vector, stack

我有主

```
QStack<TypeFoo*> MainStack 
```

现在我有来自不同对象的方法输出

```
QVector<TypeFoo*> OutPutVec 
```

我喜欢将 OutPutVec 的元素添加到 MainStack 而不循环，如果堆栈将它们添加到底部，最好的方法是什么？我需要将我的 OutPutVec 转换为 QStack 吗？

这比循环好又快吗？

```
QVector<T> & QVector::operator+= ( const QVector<T> & other ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:56:35.943

[QStack](http://doc.qt.digia.com/latest/qstack.html)继承[QVector](http://doc.qt.digia.com/latest/qvector.html)，QVector有如下定义：

> QVector & operator<< ( const QVector & other )

因此你应该能够简单地做

```
MainStack << OutPutVec; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:24:08.200

通常，我使用运算符`<<`来附加容器。您可以选择其中一种变体。

这是运营商的实现`+=`

```
template <typename T>
QVector<T> &QVector<T>::operator+=(const QVector &l)
{
    int newSize = d->size + l.d->size;
    realloc(d->size, newSize);

    T *w = p->array + newSize;
    T *i = l.p->array + l.d->size;
    T *b = l.p->array;
    while (i != b) {
        if (QTypeInfo<T>::isComplex)
            new (--w) T(*--i);
        else
            *--w = *--i;
    }
    d->size = newSize;
    return *this;
} 
```

以及算子的实现`<<`

```
inline QVector<T> &operator<<(const QVector<T> &l)
{ *this += l; return *this; } 
```

PS。如果您可以使用 Qt“buns”，那么创建一个循环来复制数据是没有意义的。Qt 更快地追加数据，然后是你的循环

PSS。如果您阅读助手，您可能会发现 QStack 是从 QVector 继承的。

# scala - Scala - 如果值包含在数组中，则返回空选项

> ID：13083583
> 
> 赞同：0
> 
> 时间：2012-10-26T08:42:23.600
> 
> 标签：scala, functional-programming

我将 Option[String] 类型的输入拆分为 Option[Array[String]] ，如下所示：

```
val input:Option[String] = Option("a=b,1000,what?")
val result: Option[Array[String]] = input map { _.split(",") } 
```

我想添加一个测试，如果数组的任何成员匹配（例如，Long 小于 0），则整个数组将被丢弃并返回一个空选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:48:13.113

1.  用于`filter`对`Option`.
2.  用于`exists`检查集合的任何成员是否满足条件。

* * *

```
result.filter(! _.exists(s => test(s))) 
```

或者

```
result.filterNot(_.exists(s => test(s))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:46:36.207

你有没有考虑`find()`在收藏中使用？如果它返回 a `Some(x)`，那么某些东西满足了条件。

```
list.find(_ < 0) match {
   case Some(x) => None
   case None => Some(list)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:34:21.310

当然，您知道您可以按照@ziggystar 的建议进行拆分然后过滤，但是如果您有一个非常大`String`的元素并且在开头匹配了一个元素，那么当您知道它将被丢弃时完成拆分字符串是没有意义的。

在这种情况下，如果您担心时间效率，可以使用 a`Stream`并重新实现拆分操作，如下所示：

```
def result(input:Option[String]):Option[Seq[String]] = {
  def split(c: Char, chars:Stream[Char]):Stream[String] = {
    val (head,tail) = chars span(_ != c)
    head.mkString #:: (if(tail isEmpty) Stream.empty else split(c, tail tail))
  }

  input map {s => split(',', Stream(s:_*)) } filter (_.forall (s => !test(s)))
} 
```

请注意，map/filter 结构保持不变，但由于使用`Stream`.

如果它是一个*非常*大的字符串，您可能已经拥有它，`Stream[Char]`这意味着您甚至没有挂在原始字符串上的内存开销。

# javascript - jQuery 粘性 div 页面顶部

> ID：13083585
> 
> 赞同：1
> 
> 时间：2012-10-26T08:42:28.740
> 
> 标签：javascript, jquery, html

当我向下滚动到它时，我试图让我的 div 粘在窗口的顶部。由于某种原因，我什至似乎无法瞄准它。

我附上了一个小提琴，向您展示我当前的代码。任何人都可以看到我可能会出错的地方吗？

[http://jsfiddle.net/rn3yc/](http://jsfiddle.net/rn3yc/)

JS：

```
var $sidebar   = $(".sidebar"),
    $window    = $(window),
    offset     = $sidebar.offset(),
    topPadding = 15;

$window.scroll(function() {
    if ($window.scrollTop() > offset.top) {
        $sidebar.addClass('fixed');
    } else {
        $sidebar.removeClass('fixed');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:45:18.653

检查这个简单易用的 CSS 技巧来制作粘性元素：[http ://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

**编辑**

或者这个：[https ://github.com/imakewebthings/jquery-waypoints](https://github.com/imakewebthings/jquery-waypoints)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T08:52:48.960

你没有固定的班级。写一个并将其添加到 css 中。此外，您的小提琴在 js 中有未闭合的大括号。

jsfiddle.net/Nn7d2/show/ 是一个固定版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:58:38.937

我为你创造了一个小提琴。只是用ID更改了班级并申请了

```
position:fixed 
```

在 CSS 中。这是小提琴jsfiddle.net/rn3yc/10/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:00:36.110

我不知道这是否是你要找的，但只是试着看看。

jsfiddle.net/4RNLC/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:03:16.263

您可以使用`position`css 的属性来固定标题。

> .fixedHeader{
>      位置：固定；
>      顶部：0px；
> }

# python-2.7 - 从 python 脚本调用当前 PyMOL 会话

> ID：13083590
> 
> 赞同：0
> 
> 时间：2012-10-26T08:42:56.250
> 
> 标签：python-2.7, bioinformatics, pymol

我正在尝试从 python 脚本（wxpython GUI）调用当前的 PyMOL 会话，然后从 PyMOL 加载一些数据并向 PyMOL 发送一些命令。目前我可以在 python 脚本中打开一个新的 PyMOL 会话：

```
import sys, os
from wx import *
app = wx.App()
dialog = wx.FileDialog ( None, message = 'Set PyMOL directiry', style = wx.OPEN)
if dialog.ShowModal() == wx.ID_OK:
    # Pymol path
    moddir = dialog.GetDirectory()
    sys.path.insert(0, moddir)
    os.environ['PYMOL_PATH'] = moddir

    import pymol
    pymol.finish_launching()     
else:
    print 'Nothing was selected.'

from pymol import *   
dialog1 = wx.FileDialog ( None, message = 'Set PDB file', style = wx.OPEN)
if dialog1.ShowModal() == wx.ID_OK:
    pdbfile = dialog1.GetPath()
    cmd.load(pdbfile)
else:
    print 'Nothing was selected.'

dialog.Destroy()
app.MainLoop() 
```

但实际上我想检查我的 python 脚本是否已经打开了任何 PyMOL 会话。我在这里找到了与该主题相对应的讨论： [仅在 PyMOL 运行时调用函数](https://stackoverflow.com/questions/11858681/only-call-function-if-pymol-running) 在此讨论之后，我尝试在 PyMOL 中调用“打印”函数：

```
try:
    from pymol import cmd
    print 'Connected'
except:
    <open new Pymol sesssion> 
```

但我在 PyMOL cmd 中看不到任何文本。我试图在此语句之前确定 PyMOL 路径，但我又失败了。

有谁知道如何从 python 脚本调用当前的 PyMOL 会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:13:18.837

据我所知，没有办法从 Python 解释器与现有的 PyMOL 会话进行交互。有几种选择：

1.  现有的 PyMOL 命令提示符接受有效的 Python，您可以直接从提示符[运行任何脚本。](http://www.pymolwiki.org/index.php/Running_Scripts)也许您可以从那里执行您的脚本？

2.  作为脚本的一部分，您可以启动一个新的 PyMOL 会话。PyMOL 的`-i`标志可能特别有用——它使您能够在无头环境中工作：

    ```
    -i     Disable the internal OpenGL GUI (object list, menus, etc.) 
    ```

3.  仔细看看 PyMOL 的`__init.py__`. 您会在那里发现 PyMOL 线程的复杂性。也许你能找到一些有用的东西来操纵？

### 边注：

`print`从您的脚本调用*不会*使文本出现在 PyMOL 会话中，它只会将文本写入标准输出（即它将打印到您的终端）。

* * *

以下 PyMOL wiki 页面可能对您有所帮助：

*   [运行脚本](http://www.pymolwiki.org/index.php/Running_Scripts)
*   [启动 PyMOL](http://www.pymolwiki.org/index.php/Category%3aLaunching)
*   [从脚本启动](http://www.pymolwiki.org/index.php/Launching_From_a_Script)

# javascript - 从数组中添加/删除元素的最佳方法是什么？

> ID：13083593
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:42:58.647
> 
> 标签：javascript, jquery, arrays, underscore.js

> **可能重复：**
> [当数组键包含javascript中的字符串时删除它](https://stackoverflow.com/questions/13076200/delete-an-array-key-when-it-contains-a-string-in-javascript)

通过使用 jquery、下划线或本机 JavaScript，我想删除或向数组添加元素。

这是我的代码；

```
var a = ['4', '5'];
var remove = false/true; 

if(!remove) {
     a.push('6'); // it works
} else {
     a.remove(5); // I have no idea how to perform this in a very dry way
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:50:48.850

如果你结合 NULL 和 dystroy 的答案，你可以在纯 js 中得到 Niko 的答案（ish）：

```
a.splice(a.indexOf('5'),1); 
```

或者，如果您想删除多个 '5'

```
var p;
while( (p = a.indexOf('5')) != -1 ){
    a.splice(p, 1);
} 
```

一种更简洁的方法，这是相当不理想的，仅支持现代浏览器（并且还创建一个新数组） - 但仍然有效且更灵活的是：

```
a = a.filter(function(v){
  return v != '5';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:45:08.930

**原生 JavaScript：**

```
a.splice(1, 1); // ['5']
a // ['4'] 
```

您可以用新元素替换该值：

```
var a = [1, 2, 3];
a.splice(1, 1, -1, -2) // [2]
a // [1, -1, -2, 3] 
```

请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:52:03.787

使用`splice()`方法：

```
if(typeof Array.prototype.remove === "undefined") {
    Array.prototype.remove = function(e) {
        this.splice(this.indexOf(e), 1);
    }
}

var a = ['4', '5'];
a.remove('5');
alert(a);​ 
```

印刷：

```
4 
```

[演示](http://jsfiddle.net/B8YCx/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:45:11.390

利用

```
delete a[1]; 
```

或者

```
delete a[a.indexOf('5')]; 
```

或者

```
a.splice(a.indexOf('5'), 1); 
```

如果你不想`undefined`在你的数组中有一个。

为了与 IE8 兼容，您可能需要[为 indexOf 添加一个通用补丁](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T08:45:42.797

下划线：

```
a = _.without(a, '5'); 
```

请参阅[http://underscorejs.org/#without](http://underscorejs.org/#without)

# android - 快速滚动列表视图时的问题

> ID：13083597
> 
> 赞同：4
> 
> 时间：2012-10-26T08:43:13.220
> 
> 标签：android, android-listview, android-arrayadapter

我正在做一个小项目，我在其中创建了`listview`一个 ArrayAdapter 的绑定。在`getView()`ArrayAdapter 的功能中，我`urls`在线程上从 web 加载图像，并将它们设置为列表项（当然基于位置，因此`url[0]`图像设置为`list_item[0]`etc）。这一切似乎运作良好。

但是，当我测试应用程序时，我注意到如果我等待列表视图完全显示，然后来回快速滚动，我会看到有时**一个列表项上的图像错位在另一个列表项上**（比如处于中间状态） . 但是，直到我将错误显示的项目滚动出屏幕然后再返回，它才会消失。

我不知道这是否与我`url`使用线程加载网络有关，或者从本地资源文件夹加载图像可能会遇到同样的问题。

这实际上导致了我对`getView()`功能的疑问。我认为我的逻辑是正确的，`getView()`因为它就像将 url 绑定到基于位置的视图一样简单。每当`getView()`有机会被调用时，比如当我将一个项目滚动出屏幕然后返回时，它都会使列表项正确显示。

我不明白的是如何解释发生的问题（如中间状态），以及在编写代码时如何避免它？

我将我的适配器代码粘贴在下面，但我认为这个问题可能是一个普遍的问题：

```
 @Override
    public View getView(int position, View v, ViewGroup parent) {

        ViewHolder viewHolder = null;

        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(layoutResourceId, parent, false);

            viewHolder = new ViewHolder();
            viewHolder.title = (TextView) v.findViewById(R.id.title);
            viewHolder.description = (TextView) v.findViewById(R.id.description);
            viewHolder.image = (ImageView) v.findViewById(R.id.image);

            v.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) v.getTag();
        }

        listItem item = items[position];  //items is some global array
                                          //passed in to ArrayAdapter constructor
        if (item != null) {
            viewHolder.title.setText(item.title);   
            viewHolder.description.setText(item.description);

            if (!(item.imageHref).equalsIgnoreCase("null")) {
                mDrawableManager.fetchDrawableOnThread(item.imageHref, viewHolder.image);
            } else {
                viewHolder.image.setImageDrawable(null);
            }
        }
        return v;
    }
}

static class ViewHolder {
    TextView title;
    TextView description;
    ImageView image;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-31T09:43:05.107

我在快速滚动时遇到同样的问题，它会将某些项目的值交替到其他项目，就像某些项目的背景颜色随机变化一样。我通过大量搜索解决了这个问题并找到确切的解决方案，如果您在适配器中使用 ViewHolder，则只需在适配器中添加这两种方法

```
@Override
    public int getViewTypeCount() {
        return getCount();
    }

    @Override
    public int getItemViewType(int position) {
        return position;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:43:14.663

我再次尝试同步。要么同步 fetchDrawableOnThread()，要么同步 fetchDrawableOnThread() 中的全局 hashmap 数据。一开始我以为问题已经解决了，但是当我后来尝试更多次时，我发现问题仍然存在。

然后我想到了同步。从getView()调用fetchDrawableOnThread()，getview()本身不存在并发问题。即使如Yogesh所说，INSIDE getView()发生的事情是基于线程的，早晚返回，也不会影响getView()的正确性，即列表项的显示，只是迟早而已。

我在 fetchDrawableOnThread() 中所做的（同步）我认为它仍然是正确的，因为我使用 hashmap 来缓存从远程 url 下载的图像，并且这个 hashmap 在多线程情况下是读/写的，所以它应该被锁定. 但我不认为这是 UI 错位的根本原因，如果 hashmap 搞砸了，图像错位将是永久性的。

然后我根据 Praful 的解释进一步研究了 convertView 重用机制。他清楚地解释了当图像总是来自远程并且本地没有缓存时会发生什么，但我的情况是我等待我的列表完全显示，即所有图像下载完成并缓存完成，然后我才进行快速滚动。所以在我的实验中，图像是从缓存中读取的。

然后在检查我的代码时，我发现在使用 convertView 和 getView() 方法时有一个小的区别，很多示例用法是这样的：

```
public View getView(int position, View convertView, ViewGroup parent) {  // case 1
    View v = convertView;
    ....  // modify v
    return v;
} 
```

但是我碰巧从使用中复制的示例：

```
public View getView(int position, View convertView, ViewGroup parent) {  // case 2
    ....  // modify convertView
    return convertView;
} 
```

起初我认为它没有区别，因为根据 android 所说，'ListView 向适配器发送一个旧视图，它在 convertView 参数中不再使用。'，那么为什么不直接使用 'convertView' 参数呢？

但我想我错了。我将 getView() 代码更改为案例 1。Boom！一切正常。无论我滚动列表的速度有多快，都没有有趣的事情。

很奇怪，convertView 只是旧的，还是旧的和正在使用的？如果是后者，我们应该只拿到一个副本然后修改...... ??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:55:41.620

假设您没有缓存下载的图像..让我们看看以下代码：

```
 if (!(item.imageHref).equalsIgnoreCase("null")) {
        mDrawableManager.fetchDrawableOnThread(item.imageHref, viewHolder.image);
    } else {
        viewHolder.image.setImageDrawable(null);
    } 
```

现在，如果图像视图被重用，那么它已经拥有分配列表项的旧图像。因此，在线程从网络下载图像之前，它会显示旧图像，而当线程下载当前项目的图像时，它将被新图像替换。尝试将其更改为：

```
 if (!(item.imageHref).equalsIgnoreCase("null")) {
        viewHolder.image.setImageDrawable(SOME_DEFULAT_IMAGE);
        mDrawableManager.fetchDrawableOnThread(item.imageHref, viewHolder.image);
    } else {
        viewHolder.image.setImageDrawable(null);
    } 
```

或者您可以使用支持 HTTP URI 并缓存图像的链接智能图像视图。查看以下链接以获取智能图像视图：

[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view) http://loopj.com/android-smart-image-view/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T10:11:22.953

在您的项目中从下面的链接添加 ImageLoader 类。 [关联](http://www.java2s.com/Open-Source/Android/App/psnfriends/com/github/droidfu/imageloader/ImageLoader.java.htm)

只需在 getView() 中调用 Image loader 类的 DisplayImage() 方法，如下所示

```
 ImageLoader imageLoader = new ImageLoader();

 yourImageView.setTag(URL_FOR_Your_Image);

 imageLoader.DisplayImage(URL_FOR_Your_Image,ACTIVITY.this, yourImageView); 
```

您的图像将根据需要在后台加载，无需等待。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T12:17:07.110

我认为您应该将下载器方法 fetchDrawableOnThread() 声明为 "synchronized" 。因为很多线程同时工作，而任何稍后开始的线程都可以更早结束。因此，图像有可能被放错位置。

它发生在我身上很长一段时间。最后“同步”帮助我干干净净。我希望它也能帮助你。

# asp.net-mvc-4 - ScriptBundle 依赖项

> ID：13083607
> 
> 赞同：2
> 
> 时间：2012-10-26T08:43:56.903
> 
> 标签：asp.net-mvc-4, asp.net-optimization

我很难`ScriptBundle`正常工作（如果这应该工作的话）。我想要做的是添加另一个包（jQuery）作为我的包的依赖项，如下所示：

```
bundles.Add(new ScriptBundle("~/js/myscripts")
                    .Include("~/js/jquery",
                             "~/Content/scripts/myscript.js")); 
```

`~/js/jquery`是 jQuery 包的“名称”（虚拟路径），如此注册（在我的依赖包之前）：

```
bundles.Add(new ScriptBundle("~/js/jquery")
                    .Include("~/Content/scripts/jquery-{version}.js")); 
```

当我`@Scripts.Render("~/js/myscripts")`在我看来，只`myscript.js`呈现给 HTML。如果我将 jQuery 的虚拟路径从捆绑名称中的路径更改为物理的现有路径，它可以工作：

```
bundles.Add(new ScriptBundle("~/js/myscripts")
                    .Include("~/Content/scripts/jquery-{version}.js",
                             "~/Content/scripts/myscript.js")); 
```

此外，`@Scripts.Render("~/js/jquery")`在视图中进行操作也很有效。它只是引用另一个`ScriptBundle`不起作用的不存在的虚拟路径（名称）。这应该工作吗？如果没有，我想知道我可以在哪里发布错误报告，说如果不支持这种情况应该抛出异常。如果支持，它在哪里说，为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:49:28.717

根据您的依赖关系，您必须在布局（视图）中添加什么

```
@Scripts.Render("~/js/jquery")
@Scripts.Render("~/js/myscripts") 
```

评论后更新：

您不能嵌套捆绑包，即您不能在捆绑包中包含捆绑包，在创建父捆绑包时该虚拟路径很可能不可用。

通常我有一个单独的 jquery 包（包括其他一些不经常更改的 js），然后是另一个 js 包用于其他所有内容。适用于浏览器缓存。

附带说明一下，您是否看过 requireJS，如果您要捆绑所有内容，这并不是真正需要的，但它确实使您的 js 文件更好地记录在案，因为它使依赖项显式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T18:53:33.790

它不受支持，但您可以提出自己的解决方案，对吧？就像是：

```
var jquery = new[] { "~/Content/scripts/jquery-{version}.js" };
var myScripts = jquery.Concat(new[] { "~/Content/scripts/myscript.js" }).ToArray();
var myOtherScripts = myScripts.Concat(new[] { "~/Content/scripts/otherscript.js").ToArray();

bundles.Add(new ScriptBundle("~/js/jquery").Include(jquery));
bundles.Add(new ScriptBundle("~/js/myscripts").Include(myScripts));
bundles.Add(new ScriptBundle("~/js/other").Include(myOtherScripts)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:05:37.413

似乎这是一个不受支持的功能，所以我已经[报告了一个问题](http://aspnetoptimization.codeplex.com/workitem/39)。

# php - smtp 邮件功能

> ID：13083608
> 
> 赞同：0
> 
> 时间：2012-10-26T08:43:56.917
> 
> 标签：php, smtp

我是 smtp 邮件功能的新手，我可以使用任何电子邮件地址作为 SMTP 用户字段，如下所示，

```
 $config['protocol']    = 'smtp';
            $config['smtp_host']    = 'ssl://smtp.gmail.com';
            $config['smtp_port']    = '465';
            $config['smtp_timeout'] = '7';
            $config['smtp_user']    = 'myname@gmail.com';
            $config['smtp_pass']    = 'password;';
            $config['charset']    = 'utf-8';
            $config['newline']    = "\r\n";
            $config['mailtype'] = 'html'; 
            $config['validation'] = TRUE; 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:48:05.103

你不应该。电子邮件地址应由您发送电子邮件的同一服务器提供服务。

否则，垃圾邮件过滤器将阻止电子邮件，即使您的 SMTP 服务器接受它（它不应该接受它）。

如果您需要使用来自不同域的电子邮件地址，请使用`reply-to`.

# xml - 将元素定义为 xml 模式中另一个元素的列表

> ID：13083614
> 
> 赞同：1
> 
> 时间：2012-10-26T08:44:10.843
> 
> 标签：xml, xsd, social-networking

我想为社交网络网站定义一个简单的 XML 架构。我已经定义了一个 Person 元素及其相关属性和其他子元素。它是我定义的架构的一部分。：

```
<xs:element name="Person" type="Person" />
    <xs:complexType name="Person">
        <xs:sequence>
            <xs:element name="firstName" type="xs:string"/>
            <xs:element name="lastName" type="xs:string"/>
            <xs:element name="nickName" type="xs:string"/>
            <xs:element name="age" >
                <xs:simpleType>
                    <xs:restriction base="xs:integer">
                      <xs:minInclusive value="0"/>
                      <xs:maxInclusive value="120"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name="birthDate" type="xs:date"/>
            <xs:element name="gender" type="Gender" />
            <xs:element name="contactDetails" type="ContactInfo"/>
            <xs:element name="occupation" type="Occupation" /> 
        </xs:sequence>
</xs:complexType> 
```

现在我想为 Person 定义另一个孩子作为它的朋友，但我不知道我该怎么做。有没有人对此有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:01:59.027

这对你有用吗：

```
 <xs:element name="Persons">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Person" type="PersonType" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
    <xs:unique name="uniquePersonId">
      <xs:selector xpath="./Persons"/>
      <xs:field xpath="@PersonID"/>
    </xs:unique>
  </xs:element>

  <xs:complexType name="PersonType">
    <xs:sequence>
      <xs:element name="firstName" type="xs:string"/>
      <xs:element name="lastName" type="xs:string"/>
      <xs:element name = "Friends" minOccurs="0" maxOccurs="1">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Friend" minOccurs="0" maxOccurs="unbounded">
              <xs:complexType >
                <xs:attribute name="FriendId" type="xs:IDREF" use="required" />
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="PersonID" type="xs:ID" use="required"/>
  </xs:complexType> 
```

# mysql - MySQL复制主从

> ID：13083617
> 
> 赞同：1
> 
> 时间：2012-10-26T08:44:16.970
> 
> 标签：mysql, database, replication, database-replication, master-slave

我即将为我的typo3 数据库进行MySQL 复制。有两台服务器。你猜对了，一个是Master，一个是Slave。

掌握my.cnf：
`[mysql]
server-id = 1
log-bin
expire_logs_days = 21
max_binlog_size = 500M
binlog-ignore-db=mysql` 

从 my.cnf：
`[mysql]
server-id = 2
binlog-ignore-db = mysql
replicate-ignore-db = mysql
auto-increment-offset = 1
expire_logs_days = 21
max_binlog_size = 500M` 

主机`repl@slaveip REPLICATION SLAVE, REPLICATION CLIENT`
上的用户： 从机上的用户：`repl@masterip REPLICATION SLAVE, REPLICATION CLIENT`

到目前为止一切正常，即使我在 Master 上更改了某些内容，但如果我在 Master 上删除了相同的内容，Slave 会停止并显示以下错误消息：

`Last_SQL_Error: Error 'Duplicate entry '65021' for key 'PRIMARY'' on query. Default database: 'typo3'. Query: 'INSERT INTO sys_log (userid,type,action,error,details_nr,details,IP,tstamp,workspace) VALUES ('0','5','0','2','0','Core: Exception handler (WEB): Uncaught TYPO3 Exception: Reason: Segment &quot;404&quot; was not a keyword for a postVarSet as expected on page with id=0.<br />\n<br />\nAdditionally, http://www.21cdocs.de/404/ was not found while trying to retrieve the error document. | RuntimeException thrown in file /mnt/platte02/www/typo3/typo3_src-4.5.19/typo3/sysext/cms/tslib/class.tslib_fe.php in line 1542','masterip','1351240603','0')'`

这就是`show slave status\G`向我展示的。

任何解决方案如何强制奴隶用主人数据覆盖它上面的*所有东西？*

- 蒂莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:20:31.157

有了`slave-skip-errors = 1062`它可以跳过错误，但我认为这不是一个好的解决方案

**更新**：显然 Typo3 在 sys_log 表上犯了一些错误。

# replace - Notepad++ 将打开文档中的两行替换为其他 (10) 行

> ID：13083630
> 
> 赞同：5
> 
> 时间：2012-10-26T08:44:52.783
> 
> 标签：replace, notepad++, text-editor

我想用 Notepad++ 中的其他行替换两行。

主要问题是我无法复制所有应该替换的行。如果我将所有行粘贴到“替换为：”输入字段中，则仅将第一行插入该字段中。似乎没有正确复制换行符。

选择应该在“查找内容：”字段中插入的行（带有换行符）非常容易，因为我可以在文档中选择它们并简单地点击“CTRL + H”。

该怎么办？请不要解决它如何与命令行工具一起使用。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T13:31:19.827

虽然答案有点晚，但我认为没关系。

Notepad++ 中无法使用普通搜索模式搜索多行字符串。您应该改用**扩展搜索模式**。

您只需要**转义**新行。最好的是，您可以使用 Notepad++ 准备要搜索和替换的转义文本。

我假设您使用的是**Windows 文本文件**，这意味着新行用**\r\n表示**

为了实现你想要的：

1.

*   创建一个新文档并粘贴要替换的多行文本
*   使用**扩展搜索模式**对其进行替换。查找内容：**\r\n**替换为：**\\r\\n**
*   结果将是您的“查找内容”字符串。

2.

*   创建一个新文档并粘贴您的多行替换文本
*   使用**扩展搜索模式**对其进行替换。查找内容：**\r\n**替换为：**\\r\\n**
*   结果将是您的“替换为”字符串。

3.

现在您有了转义数据，请使用**扩展搜索模式**和**前面步骤的****结果**对所有打开的文档执行替换。

 **希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-04T18:04:07.337

这些建议都不可接受！TextFX 的 Ctrl+R 替换插件很短。

每个人想要的，每个想要用另一个多行文本块替换多行文本块的人，是这个......

2个大文本框：

找到这个：

这是第一行

这就像两个

这是行树

替换为：

这是第 1 行

这是第 2 行

这是第 3 行

“所有打开的文档”复选框

和/或...

“在所有类型的文件中查找替换”选项

然后是 GO 按钮…………

在记事本++中创建有多难？它是在 1998 年完成的，一个名为 Search-Replace 98 的免费软件实用程序。

更新：

numediaweb 建议的插件正是我需要的！向 numediaweb 致敬，感谢 phdesign 的 paul 的提示和掌声！

Notepad++ 的 ToolBucket 多行搜索插件

[http://www.phdesign.com.au/programming/toolbucket-multi-line-search-plugin-for-notepad/](http://www.phdesign.com.au/programming/toolbucket-multi-line-search-plugin-for-notepad/)

ToolBucket 包含以下功能：

```
Multi-line search and replace dialog.
Change indentation dialog.
Generate GUID
Generate Lorem Ipsum
Compute MD5 Hash
Compute SHA1 Hash
Base 64 encode
Base 64 decode 
```

下载

最新版本可在此处获得： [https ://github.com/phdesign/NppToolBucket/downloads](https://github.com/phdesign/NppToolBucket/downloads)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-02T19:54:46.910

对于正则表达式，您可以使用 Ctrl-R，即 TextFX -> TextFX Quick -> Find/Replace。

如果不检查[这个插件](http://www.phdesign.com.au/programming/toolbucket-multi-line-search-plugin-for-notepad/)，它会做你想要的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-10T01:23:13.880

根据 Nikanos Polykarpou 的回答，下面是我的...

**Notepad++ - 用多行字符串替换**

选择要替换的字符串（可以有多行）。

跟随...

```
Ctrl+h -> Replace (tab) -> Enable "Extended (\n, \r, \t, \0, \x...)" 
```

...在“替换为：”中输入一个字符串以替换为“\r\n”（如果是 Windows），而不是本例中的实际换行符...

```
"model" "models/aztec100500/flo_grass.mdl"\r\n"framerate" "10"\r\n"angles" "0 30 0"\r\n"classname" "cycler_sprite" 
```

...做更换！**

# actionscript-3 - 变量值不会重定向到另一个帧

> ID：13083631
> 
> 赞同：0
> 
> 时间：2012-10-26T08:44:54.887
> 
> 标签：actionscript-3, flash

当我的变量达到数字 94 时，我不会被重定向到帧“二”。有什么建议么？

```
import flash.events.Event;

stop();

//addEventListener(Event.ENTER_FRAME,cakeShow);

var cakeSize:Number = 100;

cakeButton.addEventListener(MouseEvent.CLICK,decCake);

function decCake(event:MouseEvent):void {

    cakeSize--;
    cake.text = String (cakeSize);

}

cake.text = String(cakeSize);

if (cakeSize==94) {

gotoAndStop("two");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:56:44.120

你只检查一次你的变量，你应该在每次发生事情时都检查一次。所以，你必须更新你的功能。

```
function decCake(event:MouseEvent):void {
    cakeSize--;
    cake.text = String (cakeSize);
    if (cakeSize==94) {
        gotoAndStop("two");
    }
} 
```

更新：看到你需要不断地监控一个变量，你需要将它声明为一个属性。

```
private var _cakeSize:int;
public function get cakeSize():int {return _cakeSize;}
public function set cakeSize(value:int):void {
    _cakeSize=value;
    if (_cakeSize==94) {
        gotoAndStop("two");
    }
} 
```

这样，每次需要为变量设置值时都会调用“set”函数（又名“setter”），而每次检查其值时都会调用“get”函数（又名“getter”）。所以你让它`cakeSize--;`保持原样，但实际上 Flash 将首先调用 getter，获取它的返回值，递减它并使用新值调用 setter。请注意，如果您需要转到“第二”帧一次或在某些条件下，而不是每次为 cakeSize 分配值 94，则必须为 setter 函数提供特殊行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:20:32.220

也许您正在寻找一个[计时器](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)，以防您还没有一个正在运行的计时器。

```
var timer:Timer = new Timer(1000,0);

timer.addEventListener(TimerEvent.TIMER,update,false,0,true);

timer.start();

function update(e) {

      if (cakeSize==94) { timer=null; gotoAndStop("two");}
} 
```

# php - Multi-WHERE 用于 SELECT 查询的不同 MySQL 表中的两个字段

> ID：13083636
> 
> 赞同：0
> 
> 时间：2012-10-26T08:45:09.807
> 
> 标签：php, mysql

如果两个案例匹配，我正在尝试取回结果：

*   table_users.Email='user@email.com'
*   table_devices.DeviceUuid='51ec969c-8546-41f4-a748-ec2458c81d17'

但是，即使 table_users.Email='user@email.com' 存在，我也会得到空结果！！！

```
SELECT table_users.Email, table_users.DeleteFlag, table_devices.DeviceUuid 
FROM table_users, table_devices 
WHERE table_users.Email='user@email.com' 
  OR table_devices.DeviceUuid='51ec969c-8546-41f4-a748-ec2458c81d17'; 
```

我错过了什么……？出于性能原因，我不想将其分成两个查询。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:23:06.887

您的 php 代码是否假定只返回一条记录，而实际上可能返回许多记录？

如果这两个表没有任何关系，你应该使用两个查询来获取你想要的信息。如果没有连接条件，您的查询的效率将远低于使用两个单独的查询，因为您将获得与查询不匹配的每一行的一条记录。

如果你坚持只使用一个查询，试试这个：

```
SELECT Email, DeleteFlag, NULL AS DeviceUuid
FROM users
WHERE Email='user@email.com'
UNION
SELECT NULL AS Email, NULL AS DeleteFlag, DeviceUuid
FROM devices
WHERE DeviceUuid = '51ec969c-8546-41f4-a748-ec2458c81d17'; 
```

如果您将 OR 更改为 AND，并且在表中找到给定的设备 Uuid，您的原始查询也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:14:50.227

事实证明，这样做的唯一方法肯定是在两个单独的查询中，因为我正在检查两个单独的表中是否存在两件事并且没有办法加入它们，因为其中一个可能不存在。

对于我需要的逻辑，两个单独的 SELECT 查询显然是唯一的解决方案。

无论如何，感谢您的帮助！

# sql - 如何将null分配给sqlite中的字段

> ID：13083638
> 
> 赞同：0
> 
> 时间：2012-10-26T08:45:09.933
> 
> 标签：sql, sqlite

我想分配`null`给 SQLite 中的一个字段，但没有得到任何地方：

```
update t set n=null where n=0; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T09:28:54.443

我无法重现您的问题。从您写的内容来看，我猜您的表格如下所示：

```
CREATE TABLE t (n integer); 
```

插入数据：

```
insert into t values (1);
insert into t values (2);
insert into t values (3);
insert into t values (0); 
```

使用您的更新数据`UPDATE`：

```
update t set n = null where n = 0; 
```

现在表格如下所示：

```
sqlite> .dump
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE t (n integer);
INSERT INTO "t" VALUES(1);
INSERT INTO "t" VALUES(2);
INSERT INTO "t" VALUES(3);
INSERT INTO "t" VALUES(NULL);
COMMIT; 
```

之后可能没有输出，`UPDATE`但它具有预期的效果。

# google-maps - Google Maps V3 - 带有随机文本的航点 + 信息窗口

> ID：13083639
> 
> 赞同：7
> 
> 时间：2012-10-26T08:45:14.760
> 
> 标签：google-maps, google-maps-api-3

我正在使用这个例子来设置一个超过 8 个标记的路线。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Directions Waypoints</title>
<style>
    #map{
    width: 100%;
    height: 450px;
}
</style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
      jQuery(function() {
    var stops = [
                        {"Geometry":{"Latitude":52.1615470947258,"Longitude":20.80514430999756}},
                        {"Geometry":{"Latitude":52.15991486090931,"Longitude":20.804049968719482}},
                        {"Geometry":{"Latitude":52.15772967999426,"Longitude":20.805788040161133}},
                        {"Geometry":{"Latitude":52.15586034371232,"Longitude":20.80460786819458}},
                        {"Geometry":{"Latitude":52.15923693975469,"Longitude":20.80113172531128}},
                        {"Geometry":{"Latitude":52.159849043774074, "Longitude":20.791990756988525}},
                        {"Geometry":{"Latitude":52.15986220720892,"Longitude":20.790467262268066}},
                        {"Geometry":{"Latitude":52.16202095784738,"Longitude":20.7806396484375}},
                        {"Geometry":{"Latitude":52.16088894313116,"Longitude":20.77737808227539}},
                        {"Geometry":{"Latitude":52.15255590234335,"Longitude":20.784244537353516}},
                        {"Geometry":{"Latitude":52.14747369312591,"Longitude":20.791218280792236}},
                        {"Geometry":{"Latitude":52.14963304460396,"Longitude":20.79387903213501}}

                    ] ;

    var map = new window.google.maps.Map(document.getElementById("map"));

    // new up complex objects before passing them around
    var directionsDisplay = new window.google.maps.DirectionsRenderer();
    var directionsService = new window.google.maps.DirectionsService();

    Tour_startUp(stops);

    window.tour.loadMap(map, directionsDisplay);
    window.tour.fitBounds(map);

    if (stops.length > 1)
        window.tour.calcRoute(directionsService, directionsDisplay);
});

function Tour_startUp(stops) {
    if (!window.tour) window.tour = {
        updateStops: function (newStops) {
            stops = newStops;
        },
        // map: google map object
        // directionsDisplay: google directionsDisplay object (comes in empty)
        loadMap: function (map, directionsDisplay) {
            var myOptions = {
                zoom: 13,
                center: new window.google.maps.LatLng(51.507937, -0.076188), // default to London
                mapTypeId: window.google.maps.MapTypeId.ROADMAP
            };
            map.setOptions(myOptions);
            directionsDisplay.setMap(map);
        },
        fitBounds: function (map) {
            var bounds = new window.google.maps.LatLngBounds();

            // extend bounds for each record
            jQuery.each(stops, function (key, val) {
                var myLatlng = new window.google.maps.LatLng(val.Geometry.Latitude, val.Geometry.Longitude);
                bounds.extend(myLatlng);
            });
            map.fitBounds(bounds);
        },
        calcRoute: function (directionsService, directionsDisplay) {
            var batches = [];
            var itemsPerBatch = 10; // google API max = 10 - 1 start, 1 stop, and 8 waypoints
            var itemsCounter = 0;
            var wayptsExist = stops.length > 0;

            while (wayptsExist) {
                var subBatch = [];
                var subitemsCounter = 0;

                for (var j = itemsCounter; j < stops.length; j++) {
                    subitemsCounter++;
                    subBatch.push({
                        location: new window.google.maps.LatLng(stops[j].Geometry.Latitude, stops[j].Geometry.Longitude),
                        stopover: true
                    });
                    if (subitemsCounter == itemsPerBatch)
                        break;
                }

                itemsCounter += subitemsCounter;
                batches.push(subBatch);
                wayptsExist = itemsCounter < stops.length;
                // If it runs again there are still points. Minus 1 before continuing to
                // start up with end of previous tour leg
                itemsCounter--;
            }

            // now we should have a 2 dimensional array with a list of a list of waypoints
            var combinedResults;
            var unsortedResults = [{}]; // to hold the counter and the results themselves as they come back, to later sort
            var directionsResultsReturned = 0;

            for (var k = 0; k < batches.length; k++) {
                var lastIndex = batches[k].length - 1;
                var start = batches[k][0].location;
                var end = batches[k][lastIndex].location;

                // trim first and last entry from array
                var waypts = [];
                waypts = batches[k];
                waypts.splice(0, 1);
                waypts.splice(waypts.length - 1, 1);

                var request = {
                    origin: start,
                    destination: end,
                    waypoints: waypts,
                    travelMode: window.google.maps.TravelMode.WALKING
                };
                (function (kk) {
                    directionsService.route(request, function (result, status) {
                        if (status == window.google.maps.DirectionsStatus.OK) {

                            var unsortedResult = { order: kk, result: result };
                            unsortedResults.push(unsortedResult);

                            directionsResultsReturned++;

                            if (directionsResultsReturned == batches.length) // we've received all the results. put to map
                            {
                                // sort the returned values into their correct order
                                unsortedResults.sort(function (a, b) { return parseFloat(a.order) - parseFloat(b.order); });
                                var count = 0;
                                for (var key in unsortedResults) {
                                    if (unsortedResults[key].result != null) {
                                        if (unsortedResults.hasOwnProperty(key)) {
                                            if (count == 0) // first results. new up the combinedResults object
                                                combinedResults = unsortedResults[key].result;
                                            else {
                                                // only building up legs, overview_path, and bounds in my consolidated object. This is not a complete
                                                // directionResults object, but enough to draw a path on the map, which is all I need
                                                combinedResults.routes[0].legs = combinedResults.routes[0].legs.concat(unsortedResults[key].result.routes[0].legs);
                                                combinedResults.routes[0].overview_path = combinedResults.routes[0].overview_path.concat(unsortedResults[key].result.routes[0].overview_path);

                                                combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getNorthEast());
                                                combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getSouthWest());
                                            }
                                            count++;
                                        }
                                    }
                                }
                                directionsDisplay.setDirections(combinedResults);
                            }
                        }
                    });
                })(k);
            }
        }
    };
}
    </script>
  </head>
  <body>
  <div id="map"></div>
</body>
</html> 
```

它就像一个魅力，但我有问题为每个航路点设置一个信息窗口。我想保留 A 、 B 、C 等标记名称或以其他方式生成它，但要保留 A、B、C 或 1、2、3 模式，并且我想将 infowindow 添加到包含标题文本和链接的每个标记。

我试图找到任何信息或示例，但没有任何效果。也许有人知道如何轻松地将 infowindow 添加到此代码中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T12:55:46.043

这是一个使用自定义标记和信息窗口从头开始绘制方向的示例：

[例子](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsE.html)

如果您在[DirectionsRenderer](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRenderer)上使用 suppressInfoWindows 选项，则可以只使用其中创建标记及其关联信息窗口的部分。

[基于您的代码的工作示例](http://www.geocodezip.com/v3_directions_multipleWayPts_CustomMrkrsB.html)

代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Directions Waypoints</title>
<style>
    #map{
    width: 100%;
    height: 450px;
}
</style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      jQuery(function() {
    var stops = [
                        {"Geometry":{"Latitude":52.1615470947258,"Longitude":20.80514430999756}},
                        {"Geometry":{"Latitude":52.15991486090931,"Longitude":20.804049968719482}},
                        {"Geometry":{"Latitude":52.15772967999426,"Longitude":20.805788040161133}},
                        {"Geometry":{"Latitude":52.15586034371232,"Longitude":20.80460786819458}},
                        {"Geometry":{"Latitude":52.15923693975469,"Longitude":20.80113172531128}},
                        {"Geometry":{"Latitude":52.159849043774074, "Longitude":20.791990756988525}},
                        {"Geometry":{"Latitude":52.15986220720892,"Longitude":20.790467262268066}},
                        {"Geometry":{"Latitude":52.16202095784738,"Longitude":20.7806396484375}},
                        {"Geometry":{"Latitude":52.16088894313116,"Longitude":20.77737808227539}},
                        {"Geometry":{"Latitude":52.15255590234335,"Longitude":20.784244537353516}},
                        {"Geometry":{"Latitude":52.14747369312591,"Longitude":20.791218280792236}},
                        {"Geometry":{"Latitude":52.14963304460396,"Longitude":20.79387903213501}}

                    ] ;

    var map = new window.google.maps.Map(document.getElementById("map"));

    // new up complex objects before passing them around
    var directionsDisplay = new window.google.maps.DirectionsRenderer({suppressMarkers: true});
    var directionsService = new window.google.maps.DirectionsService();

    Tour_startUp(stops);

    window.tour.loadMap(map, directionsDisplay);
    window.tour.fitBounds(map);

    if (stops.length > 1)
        window.tour.calcRoute(directionsService, directionsDisplay);
});

function Tour_startUp(stops) {
    if (!window.tour) window.tour = {
        updateStops: function (newStops) {
            stops = newStops;
        },
        // map: google map object
        // directionsDisplay: google directionsDisplay object (comes in empty)
        loadMap: function (map, directionsDisplay) {
            var myOptions = {
                zoom: 13,
                center: new window.google.maps.LatLng(51.507937, -0.076188), // default to London
                mapTypeId: window.google.maps.MapTypeId.ROADMAP
            };
            map.setOptions(myOptions);
            directionsDisplay.setMap(map);
        },
        fitBounds: function (map) {
            var bounds = new window.google.maps.LatLngBounds();

            // extend bounds for each record
            jQuery.each(stops, function (key, val) {
                var myLatlng = new window.google.maps.LatLng(val.Geometry.Latitude, val.Geometry.Longitude);
                bounds.extend(myLatlng);
            });
            map.fitBounds(bounds);
        },
        calcRoute: function (directionsService, directionsDisplay) {
            var batches = [];
            var itemsPerBatch = 10; // google API max = 10 - 1 start, 1 stop, and 8 waypoints
            var itemsCounter = 0;
            var wayptsExist = stops.length > 0;

            while (wayptsExist) {
                var subBatch = [];
                var subitemsCounter = 0;

                for (var j = itemsCounter; j < stops.length; j++) {
                    subitemsCounter++;
                    subBatch.push({
                        location: new window.google.maps.LatLng(stops[j].Geometry.Latitude, stops[j].Geometry.Longitude),
                        stopover: true
                    });
                    if (subitemsCounter == itemsPerBatch)
                        break;
                }

                itemsCounter += subitemsCounter;
                batches.push(subBatch);
                wayptsExist = itemsCounter < stops.length;
                // If it runs again there are still points. Minus 1 before continuing to
                // start up with end of previous tour leg
                itemsCounter--;
            }

            // now we should have a 2 dimensional array with a list of a list of waypoints
            var combinedResults;
            var unsortedResults = [{}]; // to hold the counter and the results themselves as they come back, to later sort
            var directionsResultsReturned = 0;

            for (var k = 0; k < batches.length; k++) {
                var lastIndex = batches[k].length - 1;
                var start = batches[k][0].location;
                var end = batches[k][lastIndex].location;

                // trim first and last entry from array
                var waypts = [];
                waypts = batches[k];
                waypts.splice(0, 1);
                waypts.splice(waypts.length - 1, 1);

                var request = {
                    origin: start,
                    destination: end,
                    waypoints: waypts,
                    travelMode: window.google.maps.TravelMode.WALKING
                };
                (function (kk) {
                    directionsService.route(request, function (result, status) {
                        if (status == window.google.maps.DirectionsStatus.OK) {

                            var unsortedResult = { order: kk, result: result };
                            unsortedResults.push(unsortedResult);

                            directionsResultsReturned++;

                            if (directionsResultsReturned == batches.length) // we've received all the results. put to map
                            {
                                // sort the returned values into their correct order
                                unsortedResults.sort(function (a, b) { return parseFloat(a.order) - parseFloat(b.order); });
                                var count = 0;
                                for (var key in unsortedResults) {
                                    if (unsortedResults[key].result != null) {
                                        if (unsortedResults.hasOwnProperty(key)) {
                                            if (count == 0) // first results. new up the combinedResults object
                                                combinedResults = unsortedResults[key].result;
                                            else {
                                                // only building up legs, overview_path, and bounds in my consolidated object. This is not a complete
                                                // directionResults object, but enough to draw a path on the map, which is all I need
                                                combinedResults.routes[0].legs = combinedResults.routes[0].legs.concat(unsortedResults[key].result.routes[0].legs);
                                                combinedResults.routes[0].overview_path = combinedResults.routes[0].overview_path.concat(unsortedResults[key].result.routes[0].overview_path);

                                                combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getNorthEast());
                                                combinedResults.routes[0].bounds = combinedResults.routes[0].bounds.extend(unsortedResults[key].result.routes[0].bounds.getSouthWest());
                                            }
                                            count++;
                                        }
                                    }
                                }
                                directionsDisplay.setDirections(combinedResults);
                                var legs = combinedResults.routes[0].legs;
                                // alert(legs.length);
                                for (var i=0; i < legs.length;i++){
				  var markerletter = "A".charCodeAt(0);
				  markerletter += i;
                                  markerletter = String.fromCharCode(markerletter);
                                  createMarker(directionsDisplay.getMap(),legs[i].start_location,"marker"+i,"some text for marker "+i+"<br>"+legs[i].start_address,markerletter);
                                }
                                var i=legs.length;
                                var markerletter = "A".charCodeAt(0);
			        markerletter += i;
                                markerletter = String.fromCharCode(markerletter);
                                createMarker(directionsDisplay.getMap(),legs[legs.length-1].end_location,"marker"+i,"some text for the "+i+"marker<br>"+legs[legs.length-1].end_address,markerletter);
                            }
                        }
                    });
                })(k);
            }
        }
    };
}
var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
  });

var icons = new Array();
icons["red"] = new google.maps.MarkerImage("mapIcons/marker_red.png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is at 9,34.
      new google.maps.Point(9, 34));

function getMarkerImage(iconStr) {
   if ((typeof(iconStr)=="undefined") || (iconStr==null)) { 
      iconStr = "red"; 
   }
   if (!icons[iconStr]) {
      icons[iconStr] = new google.maps.MarkerImage("http://www.google.com/mapfiles/marker"+ iconStr +".png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is at 6,20.
      new google.maps.Point(9, 34));
   } 
   return icons[iconStr];

}
  // Marker sizes are expressed as a Size of X,Y
  // where the origin of the image (0,0) is located
  // in the top left of the image.

  // Origins, anchor positions and coordinates of the marker
  // increase in the X direction to the right and in
  // the Y direction down.

  var iconImage = new google.maps.MarkerImage('mapIcons/marker_red.png',
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is at 9,34.
      new google.maps.Point(9, 34));
  var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
      // The shadow image is larger in the horizontal dimension
      // while the position and offset are the same as for the main image.
      new google.maps.Size(37, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(9, 34));
      // Shapes define the clickable region of the icon.
      // The type defines an HTML &lt;area&gt; element 'poly' which
      // traces out a polygon as a series of X,Y points. The final
      // coordinate closes the poly by connecting to the first
      // coordinate.
  var iconShape = {
      coord: [9,0,6,1,4,2,2,4,0,8,0,12,1,14,2,16,5,19,7,23,8,26,9,30,9,34,11,34,11,30,12,26,13,24,14,21,16,18,18,16,20,12,20,8,18,4,16,2,15,1,13,0],
      type: 'poly'
  };

function createMarker(map, latlng, label, html, color) {
// alert("createMarker("+latlng+","+label+","+html+","+color+")");
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        shadow: iconShadow,
        icon: getMarkerImage(color),
        shape: iconShape,
        title: label,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
        marker.myname = label;

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
    return marker;
}
    </script>
  </head>
  <body>
  <div id="map"></div>
</body>
</html>
```

# javascript - AngularJS - 动画 ng-view 过渡

> ID：13083644
> 
> 赞同：52
> 
> 时间：2012-10-26T08:45:26.673
> 
> 标签：javascript, angularjs, animation, url-routing

我有 2 个 html 页面，作为我的 AngularJS 应用程序的一部分，`welcome.html`这两个页面都通过**属性和路由器提供程序**`login.html`“插入”到`index.html`依赖于 URL中。**`ngview`**

这方面的一个例子可以在[AngularJS 主页](http://angularjs.org/)的**Wire up a Backend**下找到。

**我的问题**：有没有办法为`welcome.html`和之间的过渡设置动画`login.html`？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-04T16:10:04.130

[Angularjs 1.1.4 现在引入了该`ng-animate`指令来帮助动画不同的元素，特别是 ng-view。](http://docs.angularjs.org/api/ngRoute/directive/ngView)

[您还可以观看有关此新功能的视频](http://www.youtube.com/watch?v=cF_JsA9KsDM)

**从angularjs** 1.2 开始更新，动画的工作方式发生了巨大变化，现在大部分都由 CSS 控制，无需设置 javascript 回调等。您可以查看[Year Of Moo 上的更新教程](http://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html)。@dfsq 在评论中指出了一[组很好的例子](http://dfsq.github.io/ngView-animation-effects/app/)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-23T18:27:38.740

检查此代码：

*Javascript*：

```
app.config( ["$routeProvider"], function($routeProvider){
    $routeProvider.when("/part1", {"templateUrl" : "part1"});
    $routeProvider.when("/part2", {"templateUrl" : "part2"});
    $routeProvider.otherwise({"redirectTo":"/part1"});
  }]
);

function HomeFragmentController($scope) {
    $scope.$on("$routeChangeSuccess", function (scope, next, current) {
        $scope.transitionState = "active"
    });
} 
```

*CSS*：

```
.fragmentWrapper {
    overflow: hidden;
}

.fragment {
    position: relative;
    -moz-transition-property: left;
    -o-transition-property: left;
    -webkit-transition-property: left;
    transition-property: left;
    -moz-transition-duration: 0.1s;
    -o-transition-duration: 0.1s;
    -webkit-transition-duration: 0.1s;
    transition-duration: 0.1s
}

.fragment:not(.active) {
    left: 540px;
}

.fragment.active {
    left: 0px;
} 
```

*主页 HTML* :

```
<div class="fragmentWrapper" data-ng-view data-ng-controller="HomeFragmentController">
</div> 
```

*部分 HTML 示例*：

```
<div id="part1" class="fragment {{transitionState}}">
</div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T13:21:39.193

我不确定直接使用 AngularJS 的方法，但您可以将欢迎和登录的显示设置为无，并在加载后使用指令为不透明度设置动画。

我会这样做。2 当点击链接时淡入内容和淡出内容的指令。淡出指令可以简单地为具有唯一 ID 的元素设置动画或调用广播淡出的服务

模板：

```
<div class="tmplWrapper" onLoadFadeIn>
    <a href="somewhere/else" fadeOut>
</div> 
```

指令：

```
angular
  .directive('onLoadFadeIn', ['Fading', function('Fading') {
    return function(scope, element, attrs) {
      $(element).animate(...);
      scope.$on('fading', function() {
    $(element).animate(...);
      });
    }
  }])
  .directive('fadeOut', function() {
    return function(scope, element, attrs) {
      element.bind('fadeOut', function(e) {
    Fading.fadeOut(e.target);
  });
    }
  }); 
```

服务：

```
angular.factory('Fading', function() {
  var news;
  news.setActiveUnit = function() {
    $rootScope.$broadcast('fadeOut');
  };
  return news;
}) 
```

我只是快速整理了这段代码，所以可能会有一些错误:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-30T12:10:06.250

试试看他的帖子。它展示了如何使用 AngularJS 的 ngRoute 和 ngAnimate 实现网页之间的转换：[How to Make iPhone-Style Web Page Transitions Using AngularJS & CSS](http://cases.azoft.com/iphonestyle-web-page-transitions-angularjs-css/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-12T00:05:19.923

1.安装[角度动画](https://docs.angularjs.org/api/ngAnimate)

`ng-enter`2.页面进入动画类`ng-leave`和页面退出动画类添加动画效果

for reference: this page has a free resource on angular view transition [https://e21code.herokuapp.com/angularjs-page-transition/](https://e21code.herokuapp.com/angularjs-page-transition/)

# android - 菱形库不适用于三星 Ace LaFleur(GT-S5830i) 和 Ace Duos(GT-S6802)

> ID：13083645
> 
> 赞同：2
> 
> 时间：2012-10-26T08:45:31.260
> 
> 标签：android, credit-card

我们正在使用 rhombus 库读取信用卡数据，但三星 Ace LaFleur(GT-S5830i) 和 Ace Duos(GT-S6802) 库经常在读取位中注册带有零 (0000000) 的错误读取。如何解决这个问题？

# javascript - dom 操作后文档准备就绪

> ID：13083648
> 
> 赞同：6
> 
> 时间：2012-10-26T08:45:37.167
> 
> 标签：javascript, mobile, dom-manipulation, ready

我正在做一个应用程序，`Phonegap`并且我正在使用自建的幻灯片转换来更改页面。它是这样工作的：

每个页面都是`div`100% 的高度和宽度，所以如果我更改页面，我会将下一个`div`右侧设置为当前活动的并将两者都滑动到左侧。

现在来解决问题：滑动工作正常，但它是在右侧的内容`div`完全加载之前执行的。所以右边的`div`幻灯片是空的，只有在几百毫秒后才会出现内容。

我试过了`document.ready`，但正如我所读到的，这个事件只在第一次`DOM`加载时执行。

有谁知道在我操纵with`DOM`之后如何等待 再次完全渲染？`DOM``Javascript`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T15:51:54.957

在您的情况下，您可以在下一个 div 的内容中选择一个元素并使用`$(...).length`. 如果值 > 0，则加载 DOM，您可以更改页面。

你可能想试试这个功能：

```
Function.prototype.deferUntil = function(condition, timeLimit) {
    var ret = condition();

    if (ret) {
        this(ret);
        return null;
    }

    var self = this, interval = null, time = ( + new Date());
    interval = setInterval(function() {
        ret = condition();
        if (!ret) {
            if (timeLimit && (new Date() - time) >= timeLimit) {
                // Nothing
            } else {
                return;
            }
        }
        interval && clearInterval(interval);
        self(ret);
    }, 20);

    return interval;
}; 
```

用法：

```
(function() {
    console.log('Next page loaded');
}).deferUntil(function() {
    return $('#nextDiv').length > 0;
}, 3000); 
```

上面的示例将检查`id="nextDiv"`每 20 毫秒（不超过 3 秒）的 div。加载 div 后，它将在控制台中显示“已加载下一页”。

你可以试试这个[小提琴](http://jsfiddle.net/quN93/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T05:53:40.403

有一个 DOMNodeInserted 事件应该像 document.ready 一样工作，但只针对单个 DOM 节点。但它已被弃用并且有很多问题。StackOverflow 用户找到了一个很好的替代方案，它在所有移动浏览器中都能很好地工作：[DOMNodeInserted 的替代方案](https://stackoverflow.com/questions/6997826/alternative-to-domnodeinserted)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T16:05:24.020

这是一个函数，一旦与 jquery 选择器匹配的所有图像完成加载，就会触发回调

[Js 小提琴样本](http://jsfiddle.net/rainerpl/px4sU/5/)

```
//css
input {width: 420px;}

//html
<div id="container"></div>
    <input type="text" value="http://goo.gl/31Vs" id="img1">
    <br><input type="text" value="http://wall.alafoto.com/wp-content/uploads/2010/11/Fractal-Art-Wallpapers-09.jpg" id="img2">
    <br><input type="text" value="http://pepinemom.p.e.pic.centerblog.net/ssg8hv4s.jpg" id="img3">
    <br><input type="button" value="Load images" name="loadImages" id="btn">

        <div id="message"></div>

//javascript

//Call a function after matching images have finished loading
function imagesLoadedEvent(selector, callback) {
    var This = this;
    this.images = $(selector);
    this.nrImagesToLoad = this.images.length;
    this.nrImagesLoaded = 0;

    //check if images have already been cached and loaded
    $.each(this.images, function (key, img) {
        if (img.complete) {
            This.nrImagesLoaded++;
        }
        if (This.nrImagesToLoad == This.nrImagesLoaded) {
            callback(This.images);
        }
    });

    this.images.load(function (evt) {
        This.nrImagesLoaded++;
        if (This.nrImagesToLoad == This.nrImagesLoaded) {
            callback(This.images);
        }
    });
}

$("#btn").click(function () {
    var c = $("#container"), evt;
    c.empty();
    c.append("<img src='" + $("#img1").val() + "' width=94>");
    c.append("<img src='" + $("#img2").val() + "' width=94>");
    c.append("<img src='" + $("#img3").val() + "' width=94>");
    evt = new imagesLoadedEvent("img", allImagesLoaded);
});

function allImagesLoaded(imgs) {
    //this is called when all images are loaded
    $("#message").text("All images loaded");
    setTimeout(function() {$("#message").text("");}, 2000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:59:12.470

您可以使用 jQuery ajax 加载内容，并在成功时使用幻灯片运行一个函数。

```
$("#page1").load('page2.html', function() {
    //do your custom animation here
}); 
```

尽管我不完全确定您是如何加载内容的。它是静态的（已经存在但只是不可见？）还是加载了 ajax？

编辑：您可以只用几毫秒做一个小的 .delay() 或 setTimeout，然后为滑动设置动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T08:17:29.387

我有一个类似的问题，使砌体网站响应。我使用`window.onload`which 在初始化 masonry.js 之前等待所有元素完成加载。我还放置了`window.onload`inside`.onchange`函数，每次调整视口大小时都会触发它。

我相信应用类似的原则会解决你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-05T10:33:47.407

试一次

```
$(window).bind('load',function(){
//code
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-05T15:23:04.693

也许你可以在你的 div 上设置一个事件。

```
myDiv.onafterupdate = myHandler;

function myHandler() {
   // Do here what you want to do with the updated Div.
} 
```

这对你有帮助吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-13T00:10:13.270

在 jquery 中，您可以在 DOM 操作代码之后使用 $()。

```
$(function(){
//code that needs to be executed when DOM is ready, after manipulation
}); 
```

$() 调用一个函数，该函数注册一个 DOM 就绪回调（如果将函数传递给它）或从 DOM 返回元素（如果将选择器字符串或元素传递给它）

[您可以在 jQuery http://api.jquery.com/ready/](http://api.jquery.com/ready/)中找到更多
[$ 和 $() 之间的区别](https://stackoverflow.com/questions/11309791/difference-between-and-in-jquery)

# mysql - 匹配字段数（列）

> ID：13083650
> 
> 赞同：1
> 
> 时间：2012-10-26T08:45:44.077
> 
> 标签：mysql, sql

只是出于好奇，有没有一种方法可以让我获得 2 个或更多表中匹配数据的计数。如，如果我们得到以下 3 个表，

```
tbl_1-
ip  |isp    |infection
----------------------
1   |aaaa   |malware
2   |bbbb   |malware
3   |cccc   |ddos
3   |cccc   |trojan
4   |dddd   |ddos

tbl_2-
ip  |isp    |infection
----------------------
1   |aaaa   |malware
3   |cccc   |ddos
4   |dddd   |trojan
5   |eeee   |trojan
6   |ffff   |other

tbl_3-
ip  |isp    |infection
----------------------
1   |aaaa   |ddos
6   |ffff   |
2   |bbbb   |other 
```

我能得出如下所示的答案吗？

```
Result-
ip  |isp    |infection  |Match Count
------------------------------------
1   |aaaa   |malware    |2      
1   |aaaa   |ddos       |1      
2   |bbbb   |malware    |1
2   |bbbb   |other      |1
3   |cccc   |ddos       |2
3   |cccc   |trojan     |1
4   |dddd   |ddos       |1
4   |dddd   |trojan     |1
5   |eeee   |trojan     |1
6   |ffff   |other      |1
6   |ffff   |           |1 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T08:51:50.957

您需要为此使用`UNION ALL`（***不仅是 UNION***）以允许重复

```
SELECT ip, isp, infection, COUNT(*)
FROM 
(
SELECT ip, isp, infection FROM tbl_1
UNION ALL
SELECT ip, isp, infection FROM tbl_2
UNION ALL
SELECT  ip, isp, infection FROM tbl_3
) x
GROUP BY ip, isp, infection 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/f122e/12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:49:26.433

您应该对所有三个表执行 UNION ALL，然后按 ip、isp、感染列运行 GROUP BY。

```
SELECT ip, isp, infection, COUNT(*) 'Match Count'
FROM
(
    SELECT * FROM tbl_1
    UNION ALL
    SELECT * FROM tbl_2
    UNION ALL
    SELECT * FROM tbl_3
) AS A
GROUP BY ip, isp, infection 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:50:25.340

是的，您可以使用 COUNT() 函数 [http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)

# templates - 在自定义布局中调用 view.phtml 模板

> ID：13083653
> 
> 赞同：0
> 
> 时间：2012-10-26T08:46:03.477
> 
> 标签：templates, magento, layout

我是 magento 的新手，`view.phtml`在自定义布局中调用文件时遇到问题。

以下是我的代码，我包含在自定义布局文件中，但出现致命错误
`Fatal error: Call to a member function getMetaTitle() on a non-object in D:\wamp\www\projects\magento\app\code\core\Mage\Catalog\Block\Product\View.php on line 56`。

```
<?php echo $this->getLayout()->createBlock('catalog/product_view')->setTemplate('catalog/product/view.phtml')->toHtml(); ?> 
```

请就这个问题回复我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:07:17.320

您的错误出现在`D:\wamp\www\projects\magento\app\code\core\Mage\Catalog\Block\Product\View.php`此行的文件中

```
$product = $this->getProduct();
$title = $product->getMetaTitle(); 
```

创建块时，您不指定为其创建块的产品，这是一个重要且必需的参数。

获取产品的功能：

```
public function getProduct()
{
      if (!Mage::registry('product') && $this->getProductId()) 
      {
          $product = Mage::getModel('catalog/product')->load($this->getProductId());
          Mage::register('product', $product);
      }
        return Mage::registry('product');
 } 
```

你真的有一个选择如何解决这个问题，但它不是很漂亮，但工作。

```
 <?php
    Mage::register('product',Mage::getModel('catalog/product')->load(YOUR_PRODUCT_ID));
    echo $this->getLayout()->createBlock('catalog/product_view')->setTemplate('catalog/product/view.phtml')->toHtml();
    Mage::unregister('product');
 ?> 
```

此决定**不能**在产品页面上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:17:55.883

你不应该像这样实例化一个 Block 。

查看标准产品页面以了解其工作原理：

您有一个名为 catalog/product/view 的控制器，它在 Mage_Catalog_ProductController 类中定义

此控制器链接到 app/design/package/theme/layout/catalog.xml 中 catalog.xml 文件中定义的布局更新句柄

在此布局文件中，您将看到块 catalog/product_view 声明了几个子项：

```
<catalog_product_view translate="label">
    [...]
    <reference name="content">
        <block type="catalog/product_view" name="product.info" template="catalog/product/view.phtml">
            <block type="catalog/product_view_media" name="product.info.media" as="media" template="catalog/product/view/media.phtml"/>
            <block type="core/text_list" name="alert.urls" as="alert_urls" translate="label">
                <label>Alert Urls</label>
            </block>
            [...] 
```

这是您通过手动实例化它所缺少的部分。

您必须根据需要调整/理解 catalog.xml 中的布局

祝你好运

# c# - Linq 通过 PK 选择？

> ID：13083657
> 
> 赞同：3
> 
> 时间：2012-10-26T08:46:22.820
> 
> 标签：c#, linq, reflection, attributes

是否可以通过 PK 动态执行 LinQ 选择？

类似的东西：

```
public T FindByPK(IEnumerable<T> table, T itemToFind)
{

} 
```

T 是从表（LinQ 到 SQL 自动生成）的映射。

我尝试使用反射，但我不知道如何获取属性“IsPrimaryKey”然后执行 LinQ，因为有时 PK 包含多个列。

**chridam 回答后编辑**

所以，我现在可以做一个 GetByPK 但它假设 PK 只是一列......

```
public static class DataContextHelpers
{
    public static T GetByPk<T>(this DataContext context, object pk) where T : class {
        var table = context.GetTable<T>();
        var mapping = context.Mapping.GetTable(typeof(T));
        var pkfield = mapping.RowType.DataMembers.SingleOrDefault(d => d.IsPrimaryKey);
        if (pkfield == null)
            throw new Exception(String.Format("Table {0} does not contain a Primary Key field", mapping.TableName));
        var param = Expression.Parameter(typeof(T), "e");
        var predicate = Expression.Lambda<Func<T, bool>>(Expression.Equal(Expression.Property(param, pkfield.Name), Expression.Constant(pk)), param);
        return table.SingleOrDefault(predicate);
    }
} 
```

我更改了这样的代码，以便能够获取主键的所有列，并且对象 pk 必须是表的一行（因为我不知道 pk 列是什么）

```
public static T GetByPk<T>(this DataContext context, T row) where T : class
        {
            var table = context.GetTable<T>();
            var mapping = context.Mapping.GetTable(typeof(T));

            var pkfield = mapping.RowType.DataMembers.Where(d => d.IsPrimaryKey);
            if (!pkfield.Any())
                throw new Exception(String.Format("Table {0} does not contain a Primary Key field", mapping.TableName));
            var param = Expression.Parameter(typeof(T), "e");
            var predicate = Expression.Lambda<Func<T, bool>>(Expression.Equal(Expression.Property(param, pkfield??), Expression.Property(param, row??)), param);
            return table.SingleOrDefault(predicate);
        } 
```

所以，我被困在 Expression.Property 中，他们只需要一个属性而不是一组属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:52:59.043

您可以尝试在`DataContext`对象上编写一个扩展方法，以便通过主键从数据库中提取记录，正如 Chris Sainty 在他的博客文章[LINQ to SQL: Generic Primary Key function](http://blog.csainty.com/2008/04/linq-to-sql-generic-primary-key.html)中所述：

```
public static class DataContextHelpers
{
    public static T GetByPk<T>(this DataContext context, object pk) where T : class {
        var table = context.GetTable<T>();
        var mapping = context.Mapping.GetTable(typeof(T));
        var pkfield = mapping.RowType.DataMembers.SingleOrDefault(d => d.IsPrimaryKey);
        if (pkfield == null)
            throw new Exception(String.Format("Table {0} does not contain a Primary Key field", mapping.TableName));
        var param = Expression.Parameter(typeof(T), "e");
        var predicate = Expression.Lambda<Func<T, bool>>(Expression.Equal(Expression.Property(param, pkfield.Name), Expression.Constant(pk)), param);
        return table.SingleOrDefault(predicate);
    }
} 
```

然后通过以下方式调用该方法：

```
MyDataContext db = new MyDataContext();
Product p = db.GetByPk<Product>(1); 
```

您可能还想看看 Denis Troller 的[答案](https://stackoverflow.com/a/735888/122005)作为替代方案。

# webdriver - 如何使用 selenium webdriver 登录 Salesforce 应用程序？

> ID：13083660
> 
> 赞同：0
> 
> 时间：2012-10-26T08:46:27.500
> 
> 标签：webdriver

```
public class LoginPage { 
   private final WebDriver driver;  
   public LoginPage(WebDriver driver) 
   {    
      this.driver = driver; 
   }   
   public void loginAs(String username, String password)
   {  
      /* driver.get("https://login.salesforce.com/?locale=uk"); 
      driver.manage().timeouts().implicitlyWait(05, TimeUnit.SECONDS);
      System.out.println("READ");
      // System.out.println(driver.findElement(By.id("pwcaps")).getText());
      //driver.findElement(By.id(username)).sendKeys("sambit");
      //driver.findElement(By.className(password)).sendKeys("PWD");
      //driver.findElement(By.id(username)).sendKeys("Password");   
      /*if (driver.findElement(By.className("loginButton")).isEnabled())
      {
         System.out.println("entered If loop");
         System.out.println("login Button is enabled");
         driver.findElement(By.className("loginButton")).click();
      }
      else
      {
         driver.close();
      }*/
      if (driver.findElement(By.id("Account_Tab")).isEnabled())
      {
         System.out.println("Account tab is enabled");
      }
      else
      {
         System.out.println("Account tab is not enabled");
      }
   }
   public static void main(String[] args){
      // TODO Auto-generated method stub

      LoginPage login = new LoginPage(new InternetExplorerDriver());  
      login.loginAs("sambit.sabyasachi", "check");
    } 
```

网页显示此字段不启用自动填写表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:03:44.853

请检查此代码它对我来说很好

```
 public class login 
   {
     public static void main(String[] args) 
      {
        DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer(); 
                    ieCapabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);

          WebDriver iedriver = new InternetExplorerDriver(ieCapabilities);
          iedriver.get("https://login.salesforce.com/?locale=uk");

           try {
              Thread.sleep(4000);
               } catch (Exception e) {
            // TODO: handle exception
             }
                 driver.findElement(By.id("username")).sendKeys("username");   
                 driver.findElement(By.id("password")).sendKeys("password");   
                 driver.findElement(By.id("Login")).click();   

 }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:49:21.807

尝试以下登录功能。

```
public void login(String username, String password){
    driver.findElement(By.name("username")).sendKeys(username);
    driver.findElement(By.cssSelector("input[type='password']")).sendKeys(password);
    driver.findElement(By.cssSelector("input[type='submit']")).click();
} 
```

我不确定您登录后的意图是什么，但这适用于我们基于销售人员的应用程序测试。

您将在加载登录页面后调用此函数。

# html - WP7.5 和 jquerymobile 输入占位符

> ID：13083663
> 
> 赞同：0
> 
> 时间：2012-10-26T08:46:35.127
> 
> 标签：html, windows-phone-7, jquery-mobile

所以我正在使用 jquery mobile 创建我的雇主网站的移动版本。到目前为止，非常好，一切都按预期工作。但是有些地方用户会输入一些数据来提交表单。为了便于在如此小的屏幕上使用，每个输入都使用了 html5 引入的“占位符”。

除了 WP7.5 之外的任何东西都像魅力一样工作。因此，如果没有适当的标签，在哪里输入什么是没有意义的（注意，根据 jquery 的建议，我已经将隐藏标签与它们各自的输入字段相关联）。

因此，我四处搜索可以解决此问题的各种 javascript，但由于某种原因，它们都不能在 Windows 手机上运行。

有人有建议吗？想法？解决方法？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:03:42.563

有趣的是，在连续几个小时试图找到解决方案之后，在写完之后我找到了解决方案。我从 Zurb 优秀的 Foundation 框架中取出了添加占位符的代码。对于遇到同样问题的任何人，请看这里：[https ://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:22:11.360

它不起作用，因为 IE9 的桌面版和 Windows Phone 版[**都不支持输入占位符属性**](http://caniuse.com/#feat=input-placeholder)。

您可以做的是使用[**Polyfill**](http://en.wikipedia.org/wiki/Polyfill)，例如：[https ://github.com/ginader/HTML5-placeholder-polyfill](https://github.com/ginader/HTML5-placeholder-polyfill)

# sql - 如何在混合字母数字字段的最后一个非数字部分选择 DISTINCT？

> ID：13083666
> 
> 赞同：0
> 
> 时间：2012-10-26T08:46:46.940
> 
> 标签：sql, string, oracle

我有一个看起来像这样的数据集：

```
A6177PE
A85506
A51SAIO
A7918F
A810004
A11483ON
A5579B
A89903
A104F
A9982
A8574
A8700F 
```

我需要找到所有非数字的结尾。在此示例中，这意味着 PE、AIO、F、ON、B 和 F。

在伪代码中，我想象我需要类似的东西

```
SELECT DISTINCT X FROM 
  (SELECT SUBSTR(COL,[SOME_CLEVER_LOGIC]) AS X FROM TABLE); 
```

有任何想法吗？我可以在不学习正则表达式的情况下解决这个问题吗？

编辑：澄清一下，我的数据集比这个例子大得多。另外，我只对数字部分之后的字符串部分感兴趣。如果字符串是“A6177PE”，我想要“PE”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:35:12.587

免责声明：我不知道 Oracle SQL。但是，我认为这样的事情应该有效：

```
SELECT DISTINCT X FROM 
  (SELECT SUBSTR(COL,REGEXP_INSTR(COL, "[[:ALPHA:]]+$")) AS X FROM TABLE); 
```

REGEXP_INSTR(COL, "[[:ALPHA:]]+$") 应该返回字段末尾第一个字符的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T09:35:31.967

为了可读性，我建议使用[REGEXP_SUBSTR](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions116.htm)函数（当然，如果没有性能问题，因为这肯定比公认的解决方案慢）。

> ...也类似于 REGEXP_INSTR，但不是返回子字符串的位置，而是返回子字符串本身

```
SELECT DISTINCT SUBSTR(MY_COLUMN,REGEXP_SUBSTR("[a-zA-Z]+$")) FROM MY_TABLE; 
```

(:alpha: 也受支持，正如@Audun 所写)

也很有用：[Oracle Regexp Support（开始页面）](http://docs.oracle.com/cd/B14117_01/server.101/b10759/ap_posix.htm#g693775)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:30:50.120

例如

```
SELECT SUBSTR(col,INSTR(TRANSLATE(col,'A0123456789','A..........'),'.',-1)+1)
  FROM table; 
```

# r - plotGoogleMaps 用于绘制四列地图的查询

> ID：13083671
> 
> 赞同：1
> 
> 时间：2012-10-26T08:46:57.797
> 
> 标签：r

大家好，

我正在使用 plotGoogleMaps 包在世界地图上绘制饼图。segmentgooglemap 是此包中执行此操作的函数。这是手册[http://cran.r-project.org/web/packages/plotGoogleMaps/vignettes/plotGoogleMaps-intro.pdf](http://cran.r-project.org/web/packages/plotGoogleMaps/vignettes/plotGoogleMaps-intro.pdf)。如果我尝试为 3 列绘制饼图，它可以正常工作，就像手册中给出的锌、铅、铜一样。但是，如果我尝试绘制 4 列它不起作用。谁能指导我为什么会这样。我尝试了很多选择，但没有成功。期待回复。

问候，古尔哈

# java - Java 中的 PubSubHubBub：无法订阅

> ID：13083673
> 
> 赞同：1
> 
> 时间：2012-10-26T08:47:00.720
> 
> 标签：java, subscription, websub

我正在尝试开发一个简单的 Java PubSubHubBub 应用程序。我下载[了这个示例代码](http://code.google.com/p/pubsubhubbub-java/downloads/list)来测试它，但是当我尝试订阅时，我总是收到错误 409。按照 PuSH 规范，我在这个链接上创建了自己的提要：receivetemplate.eu01.aws.af.cm/feed/

这是订阅者的 Test 类中的代码：

```
package sub;

import java.net.InetAddress;

import PubSubHubbub.Web;
import PubSubHubbub.Subscriber;

public class Test {

    private static Web webserver;
    private static Subscriber sbcbr;
    private static String hostname = null;
    private static Integer webserverPort = 8080;

    private static void startServer(){
        try {
            webserver = new Web(webserverPort);

            sbcbr = new Subscriber(webserver);

            InetAddress addr = InetAddress.getByName("receivetemplate.eu01.aws.af.cm");
            hostname = addr.getHostName();

            System.out.println("http://" + hostname + "/");
            hostname = "http://" + hostname + "/";

        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("WebServer can not start");
        }

    }

    public static void main(String[] args) {
        try {

               String hub = "http://pubsubhubbub.appspot.com/subscribe";
               String hub_topic = "http://receivetemplate.eu01.aws.af.cm/feed/";

               startServer();

               int statusCode = sbcbr.subscribe(hub, hub_topic, hostname, null, null);

               if (statusCode == 204){
                   System.out.println("the status code of the subscription is 204: the request was verified and that the subscription is active");
               } else if (statusCode == 202){
                   System.out.println("the status code of the subscription is 202: the subscription has yet to be verified (i.e., the hub is using asynchronous verification)");
               } else{
                   System.out.println("the status code of the subscription is:" + statusCode);   
               }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

[如果我用http://pubsubhubbub-subscriber.appspot.com/](http://pubsubhubbub-subscriber.appspot.com/)替换 hub_topic，并且如果我将 pubsubhubbub-subscriber.appspot.com 传递给 InetAddress.getByName()，我得到的响应是 204，一切正常。

你能给我一些关于我做错了什么的信息吗？我的提要中有任何错误吗？

# php - PHP 从 simplexml_load_file 获取 xml 块

> ID：13083678
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:47:26.843
> 
> 标签：php, xml

我正在将一些数据从 kml 文件导出到 mysql，`<multigeometry>`我想将一个 xml 块作为原始 xml 保存在数据库中（因为它太复杂而无法分解），我的计划是使用 json_encode 然后转换 json读取 mysql 表时返回 xml，但事实证明这个任务非常复杂，

是否有可能以某种方式从 stdclass 获取 xml？或者有没有更好的方法将其保存在数据库中并转换回 XML？

```
$xml = simplexml_load_file("countries.kml")
foreach($xml->children() as $nodes){
    foreach($nodes->children() as $n => $data){
        mysql_query("insert into tbl_countries (varname,ISOA2,multigeometry) values ('".$data->name."','".substr($data->description,7,2)."','".json_encode($data->MultiGeometry)."')") or die(mysql_error());
          }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:55:29.683

您应该能够使用其[asXML](http://www.php.net/manual/en/simplexmlelement.asxml.php)方法从任何 SimpleXMLElement 重新创建 xml 部分。

只需将`json_encode($data->MultiGeometry)`零件替换为`$data->MultiGeometry->asXML()`.

**注意：**强制*请*不要再使用`mysql_*`函数，它们已被弃用，请参阅[选择 mysl api 页面。](http://php.net/manual/en/mysqlinfo.api.choosing.php)

# c# - 选项 .Net 应用程序中针对缓存对象的内存查询

> ID：13083680
> 
> 赞同：1
> 
> 时间：2012-10-26T08:47:32.163
> 
> 标签：c#, linq, caching, serialization, dynamic

我开发了一个连接到外部数据库并允许用户从这些系统生成报告的系统。因为我不了解这些系统的结构，所以我的所有数据集都是无类型的，这意味着我目前正在使用 DataTable 来存储它们。

为了提供快速分析，我使用 Dynamic Linq 库对数据集执行 linq 查询，我使用 Microsoft AppFabric 缓存数据集。在添加到缓存之前，我还使用 protobuf-net（数据表扩展）来序列化 DataTable 的大小。

要执行查询，我首先需要从缓存中读取对象，然后反序列化，最后执行 Dynamic Linq 查询。

我想知道是否有人可以推荐任何替代方法？我认为我的解决方案中的限制因素是必须依赖 DataTables，因此例如我不能使用 protobuf-net 的任何 linq 查询功能。我还必须在每次执行查询之前将 DataTable 放入和取出缓存并反序列化。

# python - 重复切片字符串

> ID：13083681
> 
> 赞同：8
> 
> 时间：2012-10-26T08:47:33.257
> 
> 标签：python

重复切片适用于元组和列表就好了：

```
>>> tuple = ("nav", "yad")
>>> tuple[0]
'nav'
>>> tuple[0][0]
'n' 
```

但是用字符串：

```
>>> name="university"
>>> name[0]
'u' 
```

这里奇怪的是，当我尝试对字符串名称变量重复切片时，`name[0][0]`or处没有任何内容`name[0][-1]`，那为什么会显示`"u"`？

```
>>> name[0][0]
'u'
>>> name[0][-1]
'u' 
```

如果有什么，`name[0][0]`那么为什么不在其他索引上呢？

```
>>> name[0][1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: string index out of range 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T08:51:26.500

字符串是一个序列。一个字符的字符串仍然是一个具有一个元素的序列。因此，您可以使用字符串，`name[0][0][0][0]...`并且可以正常工作。与 index 相同`-1`，返回序列的最后一个元素：

```
>>> name[0][0]
'u'
>>> name[0][0][-1]
'u'
>>> name[0][0][-1][-1]
'u' 
```

`name[0][1]`显然失败了，因为字符串中只有一个元素`name[0]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T09:04:51.197

添加到@Roman的答案。我认为您的印象是`name[0]`会返回某种`char`. 但事实并非如此。发生的是`name[0]`返回一个长度字符串`1`。所以无论你用 0 重复索引一个非空字符串多少次，它总是返回相同的。

# java - Spring Batch Admin：作业状态未从 Started 更新为 Completed

> ID：13083682
> 
> 赞同：1
> 
> 时间：2012-10-26T08:47:34.770
> 
> 标签：java

我正在开发基于 Spring Batch 和 Spring Batch Admin 的应用程序。当作业开始时，它的状态从开始变为开始。作业完成时。状态仍然显示为已开始。但是，它应该更改为已完成。

此状态来自数据库中存在的 Spring Batch 数据库表。状态在表格中更改为已完成，但在 UI 中不会更新。

请帮我解决这个问题。

# xna - 以编程方式将 BMP (OR JPG) 转换为 DDS 转换器

> ID：13083685
> 
> 赞同：3
> 
> 时间：2012-10-26T08:47:48.420
> 
> 标签：xna, image-formats

我有 bmp（或 jpg）文件。我需要以编程方式将其转换为 dds 文件（我可以使用带或不带 .NET 的 C++、C#；如果我能在其中看到一些线索，我可以尝试任何其他语言）

我知道有软件可以做到这一点，但我需要将它集成到我的程序中，这应该是对我的应用程序进行较长时间操作的一部分。

顺便说一句，我的问题是：1）是否有任何开源程序可以做到这一点，所以我可以查看它的代码？2）有没有在网络上找到可以帮助我编写这段代码的教程？

我找不到任何有用的信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:05:42.503

我确信有独立的转换器可以通过命令行调用它们，如果你需要一个编程解决方案，我可能想到的最简单的方法是使用内置的 XNA 类来完成这项工作。因为 XNA 处理所有这些文件格式，您可以打开源代码 .bmp 然后将其保存回 .dds（使用[Texture](http://msdn.microsoft.com/en-us/library/bb199375%28v=xnagamestudio.31%29.aspx)类）：

```
public static void ConvertToDds(
    GraphicsDevice graphicsDevice, string sourcePath, string targetPath)
{
    Texture.FromFile(graphicsDevice, sourcePath)
        .Save(targetPath, ImageFileFormat.Dds);
} 
```

XNA 4.0 改变了事情（这些方法已被删除），尝试使用[DDSLib](http://communistgames.blogspot.it/2010/12/dds-from-file-on-xna-40.html)写入和[Texture2D](http://msdn.microsoft.com/en-us/library/ff434103%28v=xnagamestudio.40%29.aspx)读取：

```
public static void ConvertToDds(
    GraphicsDevice graphicsDevice, string sourcePath, string targetPath)
{
    using (var stream = File.Open(sourcePath))
    {
        var texture = Texture2D.FromStream(graphicsDevice, stream);
        DDSLib.DDSToFile(targetPath, true, texture, false); 
    }
} 
```

有关更多详细信息和示例，请参阅链接页面。顺便说一句，没有 .NET 就不能拥有 C#！

# caching - 网站上的通知栏 - 如何避免同一用户收到多个通知

> ID：13083686
> 
> 赞同：0
> 
> 时间：2012-10-26T08:47:51.643
> 
> 标签：caching, asp.net-mvc-2

我正在构建一个网站，该网站将通过屏幕顶部的通知栏通知用户对其帐户的某些更改（类似于 SO 通知新徽章的方式）。

在我的数据库中，我有一个列出事件的表，还有一个标志来表示它们是否已被通知更改。该表的形式为：

```
UserID     AccountEvent      EventDescription                  HasBeenNotified
ABC123     1                 Your price deal ends in 2 weeks   FALSE 
```

我想要实现的是：

1.  客户登录并显示通知（假设需要发生）
2.  客户点击确认消息
3.  DB`HasBeenNotified`字段设置为`TRUE`（确认已发生通知）

我已经能够实现这一切，但有一个障碍！

我将需要通知的事件放入`HttpRuntime.Cache`10 分钟到期，因此我不需要继续轮询数据库。

这给我带来的问题是，在缓存过期之前，客户可能会看到同一消息的多个通知，例如：

1.  客户登录并且应用程序逻辑在缓存中查找并说客户`ABC123`需要收到 X 通知
2.  然后客户确认消息（更新 DB 以将通知标志设置为 TRUE）
3.  缓存尚未反映更新的数据库，因此如果客户导航到新页面，则会触发相同的通知消息（直到缓存过期）

据我所知，我无法更新缓存中的实际数据（只能`Remove`基于缓存键从缓存中获取数据）。

任何人都可以提供有关如何解决多个通知问题的提示和技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:08:03.457

Why not burst the cache? Remove that key from the cache?

Or you **can update** the cache by setting it again to new HasBeenNotified value or even set it to null which you should deal with and accept as empty.

```
HttpRuntime.Cache["YourKey"] = "";//new object/value; 
```

# asp.net-mvc-4 - 自定义成员资格提供程序 MVC 4

> ID：13083693
> 
> 赞同：1
> 
> 时间：2012-10-26T08:48:21.540
> 
> 标签：asp.net-mvc-4, membership-provider

我在 VS2012 中创建了一个新的 MVC 4 项目，现在尝试使用我创建的自定义成员资格提供程序时遇到问题，它继承自`MembershipProvider`.

该`AccountController.Login`方法抛出此异常：

> 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的一个实例。

禁用`enableSimpleMembership`和`autoFormsAuthentication`（如[asp.net 4.5 自定义成员资格提供程序配置中所建议的会引发奇怪的异常](https://stackoverflow.com/questions/12049926/asp-net-4-5-custom-membership-provider-configuration-throws-strange-exception/13070492#13070492)）没有任何区别。

删除`WebMatrix.WebData.dll`, 导致`AccountController`无法编译，因为它引用`WebMatrix.WebData.WebSecurity`

这些是我采取的步骤：

*   在 VS 2012 中创建一个新的 APS.NET MVC 4 项目 (.net 4.0)

*   添加一个名为`CustomMembershipProvider`实现的新类`MembershipProvider`

*   在`web.config`集合中`enableSimpleMembership = false`并`autoFormsAuthentication = false`在中`appSettings`添加成员资格提供者`system.web`

*   在调试中启动网站，然后单击页面上的“登录”

*   输入用户名和密码的任何旧文本

我得到了例外：

> 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:22:11.087

我按照你的步骤，使用 VS.Net 2010，并且能够重现异常。

如异常所示，这可以通过实现 ExtendedMembershipProvider 而不是 MembershipProvider 来解决。

ExtendedMembershipProvider 位于程序集 WebMatrix.WebData.dll 和命名空间 WebMatrix.WebData 中。它定义了比 MembershipProvider 更多的抽象方法和属性，例如 GeneratePasswordResetToken 和 GetLastPasswordFailureDate，所有这些都是您需要实现的。

首先，您可以简单地使用上下文菜单中的实现抽象类`: ExtendedMembershipProvider`，看看它是否适合您，就像它对我一样。

如果您从重现步骤开始，将 ValidateUser 的正文替换为`return true;`将允许您使用任何用户名和密码成功登录。

# vb.net - 从 vb.net 中的任务管理器获取有关杀死 Windows 应用程序进程的事件

> ID：13083697
> 
> 赞同：0
> 
> 时间：2012-10-26T08:48:37.120
> 
> 标签：vb.net, desktop-application, kill-process, taskmanager

我在 VB.Net 中为我的项目使用 Windows 应用程序。现在，每当我的应用程序运行然后用户从任务管理器中终止进程时，我想要用户从任务管理器中终止应用程序时的任何事件。

当用户从任务管理器中杀死我的应用程序的进程时，有什么方法可以找出任何事件？

所以任何人都可以给出一些相同的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:54:09.593

当用户从任务管理器中终止应用程序时，无法通知您的应用程序。

你可以做的是运行一个单独的进程来监控你的应用程序，当你的应用程序被杀死时，你可以在第二个进程中做任何你想做的事情。虽然这通常不是一个好主意，但这在一定程度上取决于您要解决的问题。

# linux - Atheros AR9485WB-EG 是否能够在 BackTrack 5 中进行数据包注入？

> ID：13083700
> 
> 赞同：0
> 
> 时间：2012-10-26T08:48:51.460
> 
> 标签：linux, code-injection, packet

我发现一篇帖子说所有 Atheros 芯片都支持 Backtrack 5 上的数据包注入，但是当我搜索 aircrack ng 的兼容性列表时，我找不到列出的驱动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T18:36:33.923

所有 Atheros 支持的适配器（包括您的）都在 [http://www.tamos.com/products/commwifi/adapterlist.php](http://www.tamos.com/products/commwifi/adapterlist.php) 列出

`Adapter 802.11 Bands = 2.4 GHz only`

它清楚 地写在官方网站[http://www.aircrack-ng.org/doku.php?id=compatibility_drivers#which_is_the_best_card_to_buy](http://www.aircrack-ng.org/doku.php?id=compatibility_drivers#which_is_the_best_card_to_buy)

`New mac80211 Atheros drivers have native injection and monitoring support`

因此，您的设备将支持数据包注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T05:19:48.510

是的，Atheros AR9485 和几乎所有其他 Atheros 驱动程序都内置了 wifi 支持

参考： [http ://aircrack-ng.org/doku.php?id=compatible_cards](http://aircrack-ng.org/doku.php?id=compatible_cards) [http://www.tamos.com/products/commwifi/adapterlist.php](http://www.tamos.com/products/commwifi/adapterlist.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:38:23.670

> Atheros AR9485WB-EG 无线网络适配器

所有 Atheros 芯片组都支持原生 Linux、监视器和数据包注入。

# mysql - MySQL 查询以确定与类别 A 和 B 相关的记录

> ID：13083701
> 
> 赞同：2
> 
> 时间：2012-10-26T08:48:51.617
> 
> 标签：mysql, sql, database

这是我的数据的简化版本：

```
products:
+----+-----------+
| id | name      |
+----+-----------+
|  1 | Product X |
|  2 | Product Y |
|  3 | Product Z |
+----+-----------+

categories:
+----+---------------+
| id | name          |
+----+---------------+
|  1 | Hotel         |
|  2 | Accommodation |
+----+---------------+

category_product
+----+------------+-------------+
| id | product_id | category_id |
+----+------------+-------------+
|  1 |          1 |           1 |
|  2 |          1 |           2 |
|  3 |          2 |           1 |
|  4 |          3 |           2 |
+----+------------+-------------+ 
```

如何构建一个有效的查询，该查询仅检索`products`与“酒店”和“住宿”相关**的类别（例如产品 X）？**

我首先尝试了一种加入方法

```
SELECT *
FROM products p
JOIN category_product cp
ON p.id = cp.product_id
WHERE cp.category_id = 1 OR cp.category_id = 2 
```

^ 这不起作用，因为它不会将查询限制为**同时包含**.

我找到了一种使用子查询的方法......但出于性能原因，我已被警告不要使用子查询：

```
SELECT *
FROM products p
WHERE
(
    SELECT id
    FROM category_product
    WHERE product_id = p.id
    AND category_id = 1
)
AND
(
    SELECT id
    FROM category_product
    WHERE product_id = p.id
    AND category_id = 2
) 
```

有没有更好的解决方案（或替代方案如何）？我考虑过将类别反规范化为产品的额外列，但理想情况下希望避免这种情况。希望有一个神奇的子弹解决方案！

**更新**

我已经运行了答案中提供的一些（很棒的）解决方案：我的数据是 235 000 个 category_product 行和 58 000 个产品，显然基准总是依赖于环境和索引等。

“关系划分”@podiluska

```
2 categories: 2826 rows  ~ 20ms 
5 categories: 46 rows ~ 25-30 ms 
8 categories: 1 rows ~ 25-30 ms 
```

“存在的地方”@Tim Schmelter

```
2 categories: 2826 rows  ~ 5-7ms 
5 categories: 46 rows ~ 30 ms 
8 categories: 1 rows ~ 300 ms 
```

人们可以看到结果随着类别数量的增加而开始出现分歧。我将研究使用“关系除法”，因为它提供了一致的结果，但实现也可能让我查看“存在的地方”（长格式[http ://pastebin.com/6NRX0QbJ](http://pastebin.com/6NRX0QbJ) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:50:48.627

```
SELECT p.*
FROM products p
     inner join 
(
    select product_ID
    from category_product
    where category_id in (1,2)
    group by product_id
    having count(distinct category_id)=2
) pc
    on p.id = pc.product_id 
```

这种技术称为“关系除法”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:50:57.203

```
select *
from products p
where
    (
        select
            count(distinct cp.category_id)
        from category_product as cp
        where
            cp.product_id = p.id and
            cp.category_id in (1, 2)
    ) = 2 
```

或者你可以使用存在

```
select *
from products p
where
    exists
    (
        select
            count(distinct cp.category_id)
        from category_product as cp
        where
            cp.product_id = p.id and
            cp.category_id in (1, 2)
        having count(distinct cp.category_id) = 2
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T08:51:51.163

我会使用[`EXISTS`](http://dev.mysql.com/doc/refman/5.1/en/exists-and-not-exists-subqueries.html)：

```
SELECT P.* FROM Products P
WHERE EXISTS
(
    SELECT 1 FROM category_product cp
    WHERE cp.product_id = p.id
    AND category_id = 1
)
AND EXISTS
(
    SELECT 1 FROM category_product cp
    WHERE cp.product_id = p.id
    AND category_id = 2
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:09:30.443

```
SELECT categories.name,products.name 
FROM 
category_product,category,product 
where 
    category_product.product_id=product.id 
and 
   category_product.category_id=category.id 
    and 
   (
      select count(1) from category_product 
      where 
      category_product.categoty_id=1
      or 
      category_product.categoty_id=2 
     group by product_id having count(1)=2
   ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T08:53:41.937

```
SELECT p.id
FROM products p
JOIN category_product cp
ON p.id = cp.product_id
WHERE cp.category_id IN (1,2)
GROUP BY p.id
HAVING COUNT(DISTINCT cp.category_id) = 2 
```

# android - 无法从 webview 播放视频

> ID：13083707
> 
> 赞同：0
> 
> 时间：2012-10-26T08:49:23.083
> 
> 标签：android, android-intent, webview

我想使用意图从 webview 播放视频，但在开始播放时会出现一些错误。我使用以下代码。

```
myweb.loadUrl("http://www.clipcanvas.com/a/video-clip-downloads/");

public boolean shouldOverrideUrlLoading(WebView view, String url) {

    if(url.endsWith(".mp4")){
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setDataAndType(Uri.parse(url),"video/*");
        view.getContext().startActivity(i); //warning no error handling will cause force close if no media player on phone.
        return true;
    }
    else return false;
} 
```

但在选择播放器后。以下过程图像。 ![在此处输入图像描述](../Images/cfd4c8cf7e2476fbc1ed5ab6370f7c7d.png) ![在此处输入图像描述](../Images/50865c173e5d8e436c309936b5b30661.png) ![在此处输入图像描述](../Images/89c187bc01bd2202db0eb981e1756233.png)

# visual-studio-2010 - VS 2010 负载测试计数器集卡住

> ID：13083708
> 
> 赞同：0
> 
> 时间：2012-10-26T08:49:26.213
> 
> 标签：visual-studio-2010, load-testing

我创建了一个 VS 2010 负载测试。测试在一个专门的测试代理上执行，该代理在几个 Web 服务器上触发 http 帖子。

运行测试后，我意识到我需要对分配的计数器集进行一些更改。问题是，即使我更改了计数器集并更新了活动运行设置下的计数器集映射，我仍然使用我的第一次负载测试运行的计数器集返回结果。

此外，测试运行正常，但我收到很多弹出消息框，说“索引超出了数组的范围”

任何我需要解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:29:37.723

重新启动服务器后，计数器会重置。

# sql - 在 sql 中使用 @startdate 和 @enddate

> ID：13083712
> 
> 赞同：0
> 
> 时间：2012-10-26T08:49:36.577
> 
> 标签：sql, sql-server, ssms

> **可能重复：**
> [使用 SQL Management Studio 提示输入参数](https://stackoverflow.com/questions/4125238/prompt-for-parameters-with-sql-management-studio)

我有一个查询，我在sql中使用@startdate和@enddate，如果我在同事PC上运行它，他会被提示为每个字段选择值，但我没有。

sql management studio中是否有设置需要打开才能在运行此sql时显示弹出窗口？

谢谢

# java - 如何确定给定程序中符合垃圾收集条件的对象？

> ID：13083714
> 
> 赞同：1
> 
> 时间：2012-10-26T08:49:37.447
> 
> 标签：java, garbage-collection, scjp

鉴于：

```
 public class Trees {
    Trees t;

    public static void main(String[] args) {
        Trees t = new Trees();
        Trees t2 = t.go(t);
        t2 = null;
        // more code here : LINE 11
    }

    Trees go(Trees t) {
        Trees t1 = new Trees();
        Trees t2 = new Trees();
        t1.t = t2;
        t2.t = t1;
        t.t = t2;
        return t1;
    }
} 
```

到达第 11 行时，有多少对象符合垃圾回收条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:06:00.830

您已询问如何确定符合 gc 条件的对象数量。解决这些问题的最简单方法是绘制一个图表，显示引用（在您的示例中为 t、t1、t2）和实际对象本身。一旦对象没有连接到任何引用，Java 代码就无法访问它，因此它就有资格被收集。

此链接显示了一个示例以及如何绘制图表

[http://radio.javaranch.com/corey/2004/03/25/1080237422000.html](http://radio.javaranch.com/corey/2004/03/25/1080237422000.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T08:58:37.447

您创建三个对象：

```
Object "a": Trees t = new Trees();
Object "b": Trees t1 = new Trees();
Object "c": Trees t2 = new Trees(); 
```

在第 11 行，它们都没有资格进行垃圾回收，因为变量 t（在 main 中声明）仍然具有对对象“a”的引用，并且“b”和“c”都可以从“a”到达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T08:59:59.290

根据您的代码片段，当控件到达您的“第 11 行”时，无法`GC`编辑任何对象。

原因：

*   `Trees t;`是一个字段，因此现在无法进行 GC。
*   调用后`go`，t2 将相等`null`。但是，在 method 中`go`，每个`t1`和`t2`指向另一个，加上该字段`t`指向其中一个。由于引用链，因此不能对任何对象进行 GC：

`t -> t2`

`t2 -> t1`

# groovy - 解析字符串迄今为止，但结果是不同的格式

> ID：13083715
> 
> 赞同：-1
> 
> 时间：2012-10-26T08:49:39.117
> 
> 标签：groovy

我一直在尝试将字符串解析为日期，但解析后，格式发生了变化。我的控制器中有这个：

```
def dates = params.id
def dates2 = new Date().parse("yyyyy:MM:dd", dates)
System.out.println(dates2) 
```

但结果是 Tue Oct 23 00:00:00 CST 2012 而不是我添加的格式。如何将其强制为 yyyy:MM:dd 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:52:23.080

这只是 Java 日期的字符串表示

如果你`Date.format`用来打印出来，你会看到你想要的格式：

```
def dates = params.id

// parse is static, no need for new
def dates2 = Date.parse( 'yyyy:MM:dd', dates )

println( dates2.format( 'yyyy:MM:dd' ) ) 
```

（我还假设您的意思是`yyyy`，而不是 5`y`秒）

# objective-c - 如何使用objective-c将二进制图像添加到照片库

> ID：13083716
> 
> 赞同：1
> 
> 时间：2012-10-26T08:49:46.887
> 
> 标签：objective-c

我正在创建应用程序以在 iPad 上显示来自 Web 服务的图像我使用[FGallery](https://github.com/gdavis/FGallery-iPhone)在我的应用程序上创建照片库，并检索二进制图像表单 Web 服务并将其转换为 UIImage。

如何将图像添加到 FGallery？

我希望那里的某个人可能有一个可以执行此任务的解决方案，或者如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:55:23.457

FGallery 目前被编写为通过 URL 从应用程序包或 Web 服务器加载图像。因为您无法在运行时更改应用程序包，所以您需要更改 FGallery 以从`<Application_Home>/Documents/`文件夹中读取图像。完成后，您将新的 UIImage 保存到应用程序文档文件夹并更新`NSArray *localImages`.`RootViewController`

# windows-8 - 检测 Windows 8 Metro 应用程序中的设计时间？

> ID：13083721
> 
> 赞同：2
> 
> 时间：2012-10-26T08:50:08.433
> 
> 标签：windows-8

如何在我的 Windows 8 应用程序中检测我是否处于设计阶段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T08:50:08.433

发布前在谷歌上快速搜索帮助我找到了答案。我还是把它贴在这里：

```
bool designMode = Windows.ApplicationModel.DesignMode.DesignModeEnabled; 
```

[MSDN 上的 DesignMode 类文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.designmode.designmodeenabled)

# android - Android 在手机内保存数据

> ID：13083727
> 
> 赞同：2
> 
> 时间：2012-10-26T08:50:23.527
> 
> 标签：android, android-xml

在我的 android 应用程序中，我必须在手机中存储一些应用程序设置和一些用户信息。

[我可以选择本文档](http://developer.android.com/guide/topics/data/data-storage.html)中解释的共享偏好选项。

但是想知道我是否可以在手机中将数据存储为明智的对象。我发现这个[Stackoverflow Question](https://stackoverflow.com/questions/5816695/android-sharedpreferences-with-serializable-object)关于将序列化对象保存在文件中，如果我用这种方式存储持久数据，我不确定有什么问题。

还想知道在android中处理插入/删除/更新和读取XML文件的最佳方法是什么。将不胜感激任何指导。提前致谢...！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:11:56.920

如果你想保留一些我认为你应该使用的对象[`SQLiteDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)，这将是一个比在文件中使用序列化更干净的解决方案。您确实需要为您编写一些额外的代码，`Database`但在我看来，您最终会得到一个更清晰的实现。如果您有一些基本知识，您也可以使用[`OrmLite for Android`](http://ormlite.com/sqlite_java_android_orm.shtml)它非常强大且易于使用。`orm`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:41:31.407

如果您只需要存储少量数据，则使用内置的共享首选项，这就是该功能的用途。在这种情况下，SQLite 和 OrmLite 有点重量级 IMO。即使您想将数据作为对象处理；在这种情况下，我将从存储在文本文件中的 JSON 或 XML 序列化到/反序列化，并处理模型中反序列化对象的插入/更新/删除。

# c# - HttpModule 更改响应

> ID：13083738
> 
> 赞同：4
> 
> 时间：2012-10-26T08:51:05.907
> 
> 标签：c#, asp.net, http, response

调用 web 服务时，我需要在调用某些操作时更改响应文本。

因此，我创建了 HttpModule 来捕获响应并对其进行更改。

代码下方：

```
public class BeginEnd : IHttpModule
{

  public void Init(HttpApplication context)
  {
    context.EndRequest += (o, e) =>
    {       
      HttpContext currContext = HttpContext.Current;

      NameValueCollection collection = currContext.Request.QueryString;

      if ( collection.Count > 0
      && collection["op"] != null
      && collection["op"] == "ChangeService" )
      {
        string xmlOther = "<root>My Test</root>";

        currContext.Response.Clear();
        currContext.Response.Write(xmlOther);
        currContext.Response.End();
      }
    };

  }

  public void Dispose()
  {
  }
} 
```

如您所见，我只是清除 Response 对象并输入我的文本。

是一种正确的方法吗？

它正在工作，但我认为我错过了一些东西

你怎么看 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:52:59.590

我不能给你一个最佳实践的答案，但是当我从一个老式的 ASPX 应用程序输出 JSON 时，我自己会这样做，并且它可以完美地工作。

所以我的回答是（出于个人经验）：这没有错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-29T13:15:02.863

您的方法可能有效，但看起来至少存在一些与使用其默认处理程序处理请求相关的开销，然后将该处理的结果丢弃。

更好的方法可能是在[这个答案中提出的一个不同问题的方法](https://stackoverflow.com/a/22980416/177710)，即为当前处理的请求分配不同的处理程序：

```
public class MyHttpModule : IHttpModule
{
    public void Init(HttpApplication application)
    {
        application.PostAuthenticateRequest += app_PostAuthenticateRequest;
    }

    void app_PostAuthenticateRequest(object sender, EventArgs e)
    {
        var context = HttpContext.Current;
        var queryString = context.Response.QueryString;

        // queryString["op"] will never fail, just compare its value
        if (queryString["op"] == "ChangeService")
        {
            context.RemapHandler(new MyHttpHandler());
        }
    }

    public void Dispose() { }
} 
```

然后，只需将处理请求的逻辑放入`MyHttpHandler`类中即可。

# cordova - 关于媒体的 Phonegap 菜鸟问题

> ID：13083744
> 
> 赞同：0
> 
> 时间：2012-10-26T08:51:48.763
> 
> 标签：cordova

因此，我正在关注 cordova 网站上的教程，以使用[phonegap 中的媒体类](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#Media)。我复制了完整的示例代码，`media.getCurrentPosition` 从外观上看，由于在 onDeviceReady() 函数中调用了 playAudio(src)，音频不应该立即开始吗？还是我误解了 DeviceReady 的工作原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:55:32.473

`onDeviceReady`当 Phonegap API 准备好时触发。所以播放媒体。事实上，你只需要从这个函数内部调用任何 phonegap 函数。

[电话间隙事件](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#deviceready)

# java - 如何使用 Java 在 XML 中查找未闭合的标签？

> ID：13083756
> 
> 赞同：2
> 
> 时间：2012-10-26T08:52:32.830
> 
> 标签：java, xml

我有一些带有错误的 XML 文档 - 有时缺少结束标记 - 我想找到发生这种情况的地方并修复它们（手动）。

我使用 XOM 来解析文档，它在正确的时间轻松地说“缺少结束标记”，并告诉我元素的名称，但并不能很好地引导我找到文件中的问题所在。

我可以编写自己的解析器来帮助做到这一点，但我想知道是否已经有解决方案？我不想自动整理，因为我想确保将结束标签插入正确的位置。我只想知道开始标签的行号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:18:49.680

我认为这很简单，无需任何第三方库即可完成。Java有标准类 `javax.xml.stream.XMLEventReader`，`XMLException`当它找到丢失的结束标签时会抛出。然后调用`e.getLocation().getLineNumber()`获取行号。

有点复杂的样本：

```
 InputStream is = new FileInputStream("test.xml");
    XMLInputFactory inputFactory = XMLInputFactory.newInstance();
    XMLEventReader eventReader = inputFactory.createXMLEventReader(is, "utf-8");
    Stack<StartElement> stack = new Stack<StartElement>();
    while (eventReader.hasNext()) {
        try {
            XMLEvent event = eventReader.nextEvent();
            if (event.isStartElement()) {
                StartElement startElement = event.asStartElement();
                System.out.println("processing element: " + startElement.getName().getLocalPart());
                stack.push(startElement);
            }
            if(event.isEndElement()){
                stack.pop();
            }
        }catch(XMLStreamException e){

            System.out.println("error in line: " +e.getLocation().getLineNumber());
            StartElement se = stack.pop();
            System.out.println("non-closed tag:" + se.getName().getLocalPart() + " " + se.getLocation().getLineNumber());

            throw e;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:37:36.993

XMLEventReader 帮助您解决问题：

请看以下文章：

链接：[http ://tutorials.jenkov.com/java-xml/stax-xmleventreader.html](http://tutorials.jenkov.com/java-xml/stax-xmleventreader.html)

# python - 在python中制作唯一列表

> ID：13083765
> 
> 赞同：0
> 
> 时间：2012-10-26T08:53:14.453
> 
> 标签：python

使用自定义相等运算符使列表唯一的最 Pythonic 方法是什么？

例如，您有一个 dicts 列表`L`，并且您想要一个新列表`M`，这样对于所有 dicts `d`，`e`in`M`和一个特定的`x`

```
d[x] != e[x] 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:57:54.127

在您的情况下（以及等价归结为某种键的等价的所有情况），您可以简单地构造一个字典，其中的键是您要比较的值：

```
L = [{'key': 'foo', 'v': 42}, {'key': 'bar', 'v': 43}, {'key': 'foo', 'v': 44}]
x = 'key'
M = {d[x]:d for d in L}.values()
# In old Python versions: dict((d[x],d for d in L)).values() 
```

请注意，结果不是确定性的，两者

```
[{'key': 'foo', 'v': 44}, {'key': 'bar', 'v': 43}] 
```

和

```
[{'key': 'foo', 'v': 42}, {'key': 'bar', 'v': 43}] 
```

是有效的结果。

在一般情况下，只需检查所有接受的值：

```
def unique(iterable, is_eq):
  tmp = []
  for el in iterable:
    if not any(is_eq(inTmp, el) for inTmp in tmp):
      tmp.append(is_eq)
  return tmp 
```

请注意，这意味着您的比较函数将被称为`O(n²)`时间而不是`n`时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:40:06.463

基于 FUD 对 phihag 的评论。请注意，`key`函数必须返回一个可散列值。

```
def unique(iterable, key=lambda x : x):
    seen = set()
    res = []
    for item in iterable:
        k = key(item)
        if k not in seen:
            res.append(item)
            seen.add(k)
    return res

from operator import itemgetter
L = [{'key': 'foo', 'v': 42}, {'key': 'bar', 'v': 43}, {'key': 'foo', 'v': 44}]
print unique(L, key=itemgetter('key'))
#[{'key': 'foo', 'v': 42}, {'key': 'bar', 'v': 43}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:03:19.197

我不确定这种事情是否承认单线，但在我看来，`set`课程是你想要什么的关键。

```
M = []
uniques = set(d[x] for d in L)
for d in L:
    if d[x] in uniques:
        uniques.remove(d[x])
        M.append(d) 
```

注意：phihag 的答案似乎更像 Pythonic，但这可能会更自我记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:26:47.817

使用字典理解：

```
def unique(itrable,key):
    return {key(x):x for x in itrable}.values()

>>> unique('abcdbbcdab', lambda x: x)
['a', 'c', 'b', 'd']

>>> unique([10, -20, 20, 30], lambda x: abs(x))
[10, 20, 30] 
```

# android - 如何 SetModifiedDate() 驱动 SDK

> ID：13083773
> 
> 赞同：1
> 
> 时间：2012-10-26T08:53:49.970
> 
> 标签：android, google-api, google-drive-api

我正在使用 Eclipse 目前在 Android 上使用 google drive SDK 开发一个应用程序，每次我尝试从我上传的文件更新修改日期时都会遇到一个错误。这是我的代码。

```
com.google.api.services.drive.model.File f=null;
        File a=new File(file[1]);
        com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
        body.setTitle(file[1].substring(file[1].lastIndexOf("/")+1, file[1].length()));
        Uri selectedUri = Uri.fromFile(a);
        String fileExtension 
         = MimeTypeMap.getFileExtensionFromUrl(selectedUri.toString());
        String mimeType 
         = MimeTypeMap.getSingleton().getMimeTypeFromExtension(fileExtension);
        body.setMimeType(mimeType);
        System.out.println(DateTime.parseRfc3339(file[2]));
        body.setModifiedDate(DateTime.parseRfc3339(file[2]));
        //this modified date code causing error
        FileContent mediaContent = new FileContent(mimeType, a);
        try {
            f = service.files().insert(body, mediaContent).setConvert(true).execute();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            handleException(e);
        } 
```

有人可以告诉我如何以正确的方式设置修改日期，我完全被困在这里..
提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:08:02.277

您只能在 files().update 上设置日期，而不是在 files().insert 上。如果使用更新，还要确保将参数 setModifiedDate 设置为 true。

service.files().update(body,mediacontent).setSetModifiedDate(true).execute();

# mysql - 如何在 MySQL 中为两个单独的表创建自动增量 ID 字段？

> ID：13083774
> 
> 赞同：0
> 
> 时间：2012-10-26T08:54:05.930
> 
> 标签：mysql

我有两个表（A 和 B），我希望这些表中的每条记录都有一个唯一的 ID（id_C）。我怎么做？

```
TABLE_A:

id_A | id_C
 1      1
 2      3

TABLE_B:

id_B | id_C
 1      2
 2      4 
```

PS。我在想这样的事情：

```
create table c(
    id_c int not null auto_increment,
    PRIMARY KEY(id_c)
);

create table a(
    id_a int not null auto_increment,
    a_c  int not null,
    PRIMARY KEY(id_a),
    FOREIGN KEY (a_c) REFERENCES c(id_c)
);

create table b(
    id_b int not null auto_increment,
    b_c  int not null,
    PRIMARY KEY(id_b),
    FOREIGN KEY (b_c) REFERENCES c(id_c)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:58:26.083

创建一个包含您的 ID 的表，并使其成为自动递增的主键。使用此表生成唯一 ID，并使用其他表中的外键约束引用它们。我认为这是您在问题中提出的建议。

另一种选择是使用[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)。

# facebook - 将保存冲浪帐户设置为不安全的 Facebook 用户无法访问安全的 Facebook 应用

> ID：13083780
> 
> 赞同：0
> 
> 时间：2012-10-26T08:54:23.677
> 
> 标签：facebook, http, https

如果您将 Facebook 帐户设置中的 Save Surfing 设置设置为不安全，您会注意到您通过 HTTP 使用 Facebook。当然，如果您将其设置为“开”，您将通过 HTTPS 进行冲浪。

现在所有 Facebook 应用程序都使用 HTTPS，因为自 2011 年 10 月以来 Facebook 不允许应用程序使用 HTTP。但是如果用户（他们的 Facebook 帐户上没有 HTTPS）想要访问安全的 HTTPS 应用程序，它只会给出一个空白页面。

这是来自 Facebook 的错误，还是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:00:48.700

> 现在所有 Facebook 应用程序都使用 HTTPS，因为自 2011 年 10 月以来 Facebook 不允许应用程序使用 HTTP。

这不是真的。

所有画布/页面选项卡应用程序都必须提供通过 HTTPS 访问的*选项——但也应提供 HTTP。*

> 但是，如果用户（Facebook 帐户上没有 HTTPS）想要访问 Secured HTTPS 应用程序，它只会给出一个空白页面。这是来自 Facebook 的错误，还是？

不，这是您（或应用程序开发人员）部分的错误 - 在应用程序设置中，应该为 HTTP 和 HTTPS 设置**URL**。

如果是这种情况，那么通过 HTTP 浏览 Facebook 的用户访问该应用程序也没有问题。

# javascript - 使用 javascript 剥离文本

> ID：13083781
> 
> 赞同：1
> 
> 时间：2012-10-26T08:54:25.193
> 
> 标签：javascript, regex

嗨，我是 javascript 的新手，我想知道如何删除除单词**TB_iframeContent800**之外的所有文本。最后的数字不同。

这是一个示例字符串

```
<iframe frameborder="0" style="width: 670px; height: 401px;" onload="tb_showIframe()" name="TB_iframeContent80" id="TB_iframeContent" src="http://www.gorgeoushentai.com/wp-admin/media-upload.php?post_id=33&amp;" hspace="0">This feature requires inline frames. You have iframes disabled or your browser does not support them.</iframe> 
```

我想提取**TB_iframeContent80**并将其存储为变量。那么如何使用带有 javascript 的正则表达式来做到这一点呢？请注意最后 2 位数字会有所不同，因为数字总是会发生变化，因此有时会变成 3 位数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T08:57:40.240

```
 var iframeName = document.getElementsByTagName("iframe")[0].name 
```

如果你已经包含了 jQuery，那么它可能是这样的：

```
 var iframeName = $("iframe:first").attr("name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:02:01.707

如果 jQuery 是一个选项，我认为您正在寻找这样的东西

`$('iframe[name^="TB_iframeContent"]')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:02:41.787

如果你不使用 DOM（因为代码分析等），试试这个正则表达式

```
var code = '<iframe ... /iframe>';

var result = code.match( /name="([^"]*)"/ );

var extract = result[1]; 
```

这选择名称属性的内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T09:14:41.020

你可以像这样加载你正在解析的 html 并使用 DOM 来获取它的名称（它比使用正则表达式更容易和更可靠的方式）：

```
var loadhtml = document.createElement('div');
loadhtml.innerHTML = 'yourHtml';

var theName = loadhtml.getElementsByTagName('iframe')[0].name; 
```

如果您使用 Jquery，您可以考虑将 attr("name") 作为获取名称的方式

但是，如果您坚持使用正则表达式，这里是一个：

```
/< *iframe[^>]*name *= *['"]([^'"]*)/ 
```

# c# - 如何修复“删除属性设置器”构建错误？

> ID：13083790
> 
> 赞同：13
> 
> 时间：2012-10-26T08:54:49.713
> 
> 标签：c#, asp.net-mvc

我在具有自动属性 ​​getter 和 setter 的模型中有一个属性：

```
[DataMember]
public Collection<DTOObjects> CollectionName { get; set; } 
```

构建解决方案时出现以下错误：

> Microsoft.Usage ：通过删除属性设置器将“属性名称”更改为只读。

但是，当我删除设置器并运行代码时，会发生错误，因为它正在尝试设置属性！尽管事实上它是在代码中的某个位置设置的，但它似乎要求我删除 setter。

有没有其他人遇到过这个问题？我需要修改什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T08:57:38.813

我猜这是一个列表/集合（或类似的东西），在这种情况下是的 - 有一个 setter 是不寻常的。一个典型的例子可能是：

```
private readonly List<Foo> items = new List<Foo>();
public List<Foo> Items { get { return items; } } 
```

大多数来电者**不**应该试图分配给它；他们*不需要*- 他们可以添加/删除/枚举/清除/等列表，而无需分配它。

> 发生错误，因为它试图设置属性

然后考虑更改该代码，使其*不会*尝试设置属性。几乎在所有情况下*都不需要。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:57:29.527

只需抑制它，右键单击错误并单击代码中的抑制 & 一个属性将添加到属性中。

通常，您不应该为集合设置公共集，因为这允许替换列表，但是对于在运行时创建或反序列化的对象，有时公共设置器是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-26T04:02:43.363

从文档：

“如果属性是数据传输对象 (DTO) 类的一部分，您可以禁止显示警告。否则，不要禁止来自此规则的警告。”

如果它不是 DTO 的一部分：

“要修复违反此规则的行为，请将属性设为只读。如果设计需要它，请添加方法以清除并重新填充集合。”

替换只读集合属性的首选方式是使用 Clear 和 AddRange 方法（或它们的等效方法）。

[https://docs.microsoft.com/en-us/visualstudio/code-quality/ca2227?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/code-quality/ca2227?view=vs-2019)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-21T19:11:49.670

一种解决方案是在构造函数中初始化`Collection`...

```
public class Email
{
    public Email() 
    {
        To = new List<MailAddress>();
    }

    ....

    public List<MailAddress> To { get; }
} 
```

然后只需在代码中使用 .add ：

```
 Email oEmail = new Email();
   oEmail.To.Add(new MailAddress("Foo@fighter.com", "Mr. Foo")); 
```

# html - 在当前选择的菜单项旁边对齐元素

> ID：13083791
> 
> 赞同：0
> 
> 时间：2012-10-26T08:54:51.553
> 
> 标签：html, css, menu

我试图找到解决这个问题的方法，但失败了（也许我的搜索技能太糟糕了）。基本上，这里是网页[http://www.eboxlab.net/transbeam/our-solutions/data-and-internet-services/](http://www.eboxlab.net/transbeam/our-solutions/data-and-internet-services/)。

这里有两个菜单项，在第一个框中您会看到“选择了数据和 Internet 服务”链接，而第二个框中只有三个元素，其行为类似于锚点。现在，它们与第一级菜单（数据和 Internet 服务）中的顶部元素对齐。我需要实现的是，当您选择另一个选项（例如 VoIP 和语音服务）时，第二个框会移到它旁边。所以它根据第一个菜单中的活动链接对齐。我很确定这可以用 javascript 来实现，但我真的不擅长。

PS：虽然我不擅长 JS 可以随意使用所有的术语，但我稍后会做研究，只需要代码和背后的一点解释，所以我以后可以自己做。

如果选择了左侧的某个元素，则可能会为右侧框设置边距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:01:50.137

首先，您的网页有解决方案，但无法通过 JavaScript 完成。

JavaScript 可以按照您的想法做事，但请注意，它只适用于同一页面。这意味着当用户点击某个地方时，仍然停留在同一页面上，JavaScript 可以做很多事情，比如改变 DOM 结构，改变某物的样式，或者做一些动画。但是如果页面被重定向到另一个页面，那就不同了。

**[您的网页解决方案]**
在“VoIP 和语音服务”项 ( [http://www.eboxlab.net/transbeam/our-solutions/voip-and-voice-services/](http://www.eboxlab.net/transbeam/our-solutions/voip-and-voice-services/) ) 的页面上，将以下 CSS 添加到您的页面文件：

```
#banner .left_box .box-2 {
    margin: -10px 0 0 20px;
} 
```

对于其他项目，将类似于更改`margin`以调整其位置（垂直位置）：

“云服务”页面

```
#banner .left_box .box-2 {
    margin: 30px 0 0 20px;
} 
```

“综合语音和数据服务”页面

```
#banner .left_box .box-2 {
    margin: 70px 0 0 20px;
} 
```

“附加数据和语音功能”页面

```
#banner .left_box .box-2 {
    margin: 110px 0 0 20px;
} 
```

或者你可以改变“margin-top”，两者都有效。

/* 以下部分添加于 10 月 28 日 15:08, GMT+8 */
**[使用模板的网页解决方案]**
1\. 在模板文件中，将此行更改
`<div class="box-2">`
为
`<div class="box-2-{$item}">`
Note: `{$item}`is variable format of `Smarty`，您可以将其更改为您自己的模板格式。
2\. 在每个页面中，为该变量分配一个相同的值，您将执行以下操作：
`$smarty->assign('item','item1'); //assign item2, item3 to the other two pages.`
3\. 在样式文件 ("transbeam/wp-content/themes/transbeam/style/style.css") 中，添加以下行：

```
#banner .left_box .box-2-item1 {  
    background:url(../images/sep_1.png) no-repeat left;  
    float:left;  
    height:163px;  
    margin:-50px 0 0 15px;
} 

#banner .left_box .box-2-item2 {  
    background:url(../images/sep_1.png) no-repeat left;  
    float:left;  
    height:163px;  
    margin:-10px 0 0 15px;
}  

#banner .left_box .box-2-item3 {  
    background:url(../images/sep_1.png) no-repeat left;  
    float:left;  
    height:163px;  
    margin:30px 0 0 15px;
} 
```

这应该工作，希望帮助你。

# jsf - 在 primefaces 饼图中显示小数位

> ID：13083796
> 
> 赞同：2
> 
> 时间：2012-10-26T08:55:08.527
> 
> 标签：jsf, primefaces, pie-chart

我想检查如何显示 primefaces 版本 3.3 饼图标签的小数？

目前，我的图表中有两个比例。标签 A 和标签 B。标签 A 有一个很大的数字，比如 100000，而标签 B 有 100。因此，在饼图中，标签 A 不是 100%。但是，primefaces 将其转换为 100%，这是错误的。有什么方法可以在饼图上显示小数位而不是整数作为标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:05:43.430

Define an extender function like:

```
function ext() {
    this.cfg.seriesDefaults.rendererOptions.dataLabelFormatString = '%.4s%%';
    this.cfg.seriesDefaults.rendererOptions.dataLabelThreshold = 0;
} 
```

This will format your output labels to show percentage up to 4 digits after the decimal point. Also jqPlot by default, for areas smaller than 3% won't display any labels. You have to overwrite this value with `dataLabelThreshold = 0`.

Finally attach this extender function on your `p:pieChart`:

```
<p:pieChart id="sample" value="#{testClazz.pieModel}"
                extender="ext" showDataLabels="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T11:17:47.440

定义一个扩展函数，如：

```
function ext() {
    this.cfg.seriesDefaults.rendererOptions.dataLabelFormatString = '%#.4f';
    this.cfg.seriesDefaults.rendererOptions.dataLabelThreshold = 0;
} 
```

在我的情况下`'%.4s%%'`（PF 4.0）不起作用，所以我没有使用`'%#.4f'`它。

# c++ - 如何在 Xcode 中导出虚拟析构函数？

> ID：13083799
> 
> 赞同：1
> 
> 时间：2012-10-26T08:55:25.660
> 
> 标签：c++, xcode, macos, virtual-destructor

我正在开发一个包含两个模块的示例项目：A 和 B（链接到 A），使用 Xcode 4.4。

在模块 A 中，符号被编译器标志 -fvisibility=hidden 隐藏。我有一个类，其析构函数是虚拟的并导出：

```
class utx
{
    int mm;
public:
    __attribute__ ((visibility("default"))) utx(int m);
    __attribute__ ((visibility("default"))) virtual ~utx();
}; 
```

它被实现为：

```
utx::utx(int m) : mm(m) { }
utx::~utx() { } 
```

在模块 B 中，MyUtx 从 utx 派生如下：

```
class MyUtx : public utx
{
public:
    MyUtx() : utx(5) { }
    virtual ~MyUtx() { }
}Ins; 
```

虽然，我总是得到以下模块 B 的链接错误：

```
Undefined symbols for architecture x86_x64:
    "typeinfo for utx", referenced from:
        typeinfo for MyUtx in main.o 
```

如果 utx 的析构函数是非虚拟的，问题就消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:33:41.900

你有没有尝试过：

```
class __attribute__ ((visibility("default"))) utx
{
  ... 
```

根据[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility) typeinfo 生成取决于你的类是否有 vfptr 并且添加虚拟析构函数可以改变它（如果你没有其他虚拟函数）。

# java - 如何在 Windows 上使用 Java 从 CD 驱动器读取

> ID：13083805
> 
> 赞同：0
> 
> 时间：2012-10-26T08:55:46.157
> 
> 标签：java, windows, cd-rom

我一直在尝试用 Java 编写音频 CD 翻录器，以便了解它们是如何工作的。我似乎无法弄清楚如何从 CD 驱动器上实际读取歌曲。我设法打开了 .cda 文件，但除非我可以访问 CD 上的扇区，否则这些文件不是很有用。我尝试使用下面的代码打开 D: 驱动器（这是我计算机上的 CD 驱动器），但它给出了 File Not Found 错误。我猜这是因为 CD 驱动器不是文件。是否有任何其他类型的输入流或者我可以从 CD 驱动器读取的不同方式。我已经搜索了很长时间，但没有任何东西可以帮助我。

```
public class learning 
{
    public static void main(String[] args) throws IOException 
    {   
        FileInputStream input = new FileInputStream( "D:\\" );
    }
} 
```

具体的错误信息是：

```
Exception in thread "main" java.io.FileNotFoundException: D:\ (The system cannot find the path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at learning.main(learning.java:5) 
```

干杯丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:20:51.203

为此有一个操作系统项目：[Ripper](http://www.jsresources.org/apps/ripper.html)。

魔法就在[GrabEncodePanel.java](http://jsresources.cvs.sourceforge.net/viewvc/jsresources/jsresources/apps/ripper/src/org/jsresources/apps/ripper/GrabEncodePanel.java?revision=1.3&view=markup)的`getCDDADir()`and`getCDDAStream()`函数中（我害怕发布实际的源代码，因为那样我也必须发布许可证......）

**编辑**我今天也学到了一些东西：根据[这个常见问题解答，这只是在 Linux 上简单明了](http://jsresources.org/faq_audio.html#cdda)

# android - Android ListView 从多对多数据库关系

> ID：13083807
> 
> 赞同：2
> 
> 时间：2012-10-26T08:55:49.160
> 
> 标签：android, database, listview, adapter

我的 db 2 表中有一个多对多关系。

TAB_ARTICLES：{_ID、标题、正文、日期}

TAB_TAG：{_ID、姓名、颜色、日期}

TAB_ART_TAG：{_ID、ARTICLE_ID、TAG_ID}

我需要填充一个 ListView，一行用于文章，并且在每一行中，我需要为链接到该文章的每个标签创建一个 TextView。像下[图](https://docs.google.com/open?id=0B1gn5aOec3sjQjF4WU53enhjQTQ)

我认为2个解决方案。

一种。我使用 CursorAdapter 和仅在 TAB_ARTICLE 上制作的游标，然后在每一行中我执行查询以加入其他 2 个表，以查找本文中相关的所有标签。此解决方案需要大量数据库访问。

湾。我意识到一个临时表

TABLE_TEMP：{ARTICLE_TITLE, ARTICLE_BODY, ARTICLE_DATE, TAG1_NAME, TAG1_COLOR, TAG2_NAME, TAG2_COLOR, ...}

我使用该表上的查询作为自定义适配器的光标。此解决方案使用更多空间，并且由于表格列而对可能显示的标签有限制。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:42:50.500

嗯，实际上，这是一个多标准的东西：时间、空间、更新、搜索等。所以没有单一的配方。但是，很可能多个查询会阻碍滚动。更糟糕的是，仅在某些设备上。根据数据的整体大小，临时表可能合适，也可能不合适。您可能希望使这个冗余表与主表保持同步，同时对两者进行更新。

最简单的权衡之一可能是将带有标记数据（XML、JSON、其他标记/分隔格式）的冗余 TEXT/CLOB 列添加到 TAB_ARTICLES 并使其与您的详细数据保持同步。顺便说一句，只有当您的查询证实了这一点时，您才真正需要 M:M 模式。否则，单个表就足够了。

同样，我会首先列出并评估所有标准，然后决定哪些维度真正需要可扩展并简化其余的维度。

# c# - 如何发送 UTF-8 编码的 XML 而不接收实体表示法中的变音符号

> ID：13083808
> 
> 赞同：1
> 
> 时间：2012-10-26T08:55:50.370
> 
> 标签：c#, .net, xml, encoding, utf-8

我正在向业务合作伙伴发送数据。合作伙伴的需求很明确：UTF-8 签名的 XML。此外，他们希望接收不在实体符号中的德语变音符号。

这个[德国网站](http://www.gemeinde-michendorf.de/homepage/8sonstiges/entity.php)告诉它十进制表示法。但意思是一样的。

那么如何告诉编码如何发送元音变音呢？

提前致谢！

//编辑：业务伙伴确认他们收到实体符号中的变音符号 ({)

//edit2: 这是我用来发送数据的代码

```
WebClient client = new WebClient
{
    Proxy = new WebProxy("wwwproxy", 80)
    {
        Credentials = CredentialCache.DefaultCredentials
    }
};
byte[] response = client.UploadData(
    Data.Resources.gateway_uri,
    Encoding.UTF8.GetBytes(request.ToString(SaveOptions.DisableFormatting)));

return XDocument.Parse(System.Text.Encoding.UTF8.GetString(response)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:23:29.370

我猜这`request`是一个`XNode`实例，我猜它的`ToString`方法试图通过对 ASCII 范围之外的大多数字符进行编码来避免编码问题，因为它不知道最终的编码是什么。

为了更好地控制编码，您需要使用带有流的 XML 编写器：

```
MemoryStream buffer = new MemoryStream();
XmlWriterSettings settings = new XmlWriterSettings();
settings.Encoding = Encoding.UTF8; // should be the default, but you never know
XMLWriter writer = XMLWriter.Create(buffer, settings);
request.WriteTo(writer);
writer.Flush();
byte[] requestData = buffer.ToArray();
byte[] response = client.UploadData(Data.Resources.gateway_uri, requestData); 
```

# android - 启动 Samsung Kies 时未将对象引用设置为对象实例

> ID：13083810
> 
> 赞同：1
> 
> 时间：2012-10-26T08:55:53.463
> 
> 标签：android

我已经在我的系统上安装了上述三星凯斯。安装后，当我尝试运行它时，出现以下错误：

显示“对象引用未设置为对象实例”的致命错误警告框。

有谁知道如何解决这一问题？

*   操作系统：Windows 7 32 位
*   凯斯版本：2.5.0.12094_28_8

# jquery - JQuery将dom元素点击事件绑定到成员函数

> ID：13083812
> 
> 赞同：2
> 
> 时间：2012-10-26T08:55:55.473
> 
> 标签：jquery, function, events, bind, anonymous

我有一个带有函数的javascript类：

```
function myClass()
{
    this.myInit = function()
    {
        myObj = this;
        var id-foo = 'myId';
        jQuery('#'+id-foo).bind('click', function() { myObj.foo(id-foo); } );
    }

    this.foo = function(id) { alert(id); }
} 
```

我只想将 DOM 元素绑定到事件（单击、dragonstart 等）并使其调用当前对象的函数（实际上是 this）。我试图直接调用 this.foo 但这不起作用，萤火虫告诉我 foo 不是一个函数。我给匿名函数的参数 id-foo 是问题吗？提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:57:51.073

你的问题在这里：

```
 var id-foo = 'myId'; 
```

这不是变量的有效名称。

另请注意，如果您不在`myInit`.`myClass`

例如，这不起作用：

```
var obj = new myClass();
var f = obj.myInit;
f(); 
```

虽然这个应该工作：

```
var obj = new myClass();
obj.myInit(); 
```

[示范](http://jsfiddle.net/Sm9S4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:01:33.327

在遵循@dystroy 的回答之后，我建议您不要将自己与`this`关键字混淆。遵循这个模式

```
var myClass = function () {
    myInit: function()
    {
        myObj = this;
        var id_foo = 'myId';
        jQuery('#'+id_foo).bind('click', function() { myObj.foo(id_foo); } );
    }

    foo: function(id) { alert(id); }
} 
```

# objective-c - 将静态库导入自定义通用框架

> ID：13083819
> 
> 赞同：1
> 
> 时间：2012-10-26T08:56:44.593
> 
> 标签：objective-c, ios, xcode4, frameworks, static-libraries

我按照本教程 [教程](http://spin.atomicobject.com/2011/12/13/building-a-universal-framework-for-ios/)创建了一个自定义通用框架。

这里我的问题是如何将静态库 .a 文件导入框架。？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:33:27.473

只需将 .a 文件拖放到您的框架文件夹中即可。

或者您可以转到 Build Phases -> Link Binary With Libraries -> 单击“+”号 -> 添加其他（左下角）-> 选择您的 .a 并单击添加

![在此处输入图像描述](../Images/6bb99b11de3ae4c4d670dc2d9233770a.png)

确保在新项目中也包含静态库的头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:24:58.593

在我的自定义框架项目设置中，我添加了我创建的静态库以将二进制文件与库链接，并将静态库头文件添加到聚合目标副本文件构建阶段。这就是它的魅力。并且该框架运行良好。

# wcf - 强制 WCF 服务与客户端无限通信

> ID：13083820
> 
> 赞同：1
> 
> 时间：2012-10-26T08:56:45.913
> 
> 标签：wcf, wcf-binding

我有一个 WCF 服务和两个充当服务客户端的 WPF 应用程序。我需要客户端和服务之间的通信是无限的，即使它们没有交互（即客户端空闲）。现在我的服务会在一段时间后断开连接。

我尝试在绑定上增加 reciveTimeout 和 sendTimeout（甚至尝试将其设置为“无限”），但没有奏效。如果有人可以了解如何使用不同的超时以及我需要为我的情况设置哪些值。

任何帮助都将非常有价值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:01:15.143

您可以在 WPF 中创建一个 Keep Alive 后台线程，而不是更改超时默认值，该线程将每分钟 ping 您的 WCF 服务。

# erlang - 为什么 ets 粗鲁地删除我的表？

> ID：13083823
> 
> 赞同：1
> 
> 时间：2012-10-26T08:57:06.580
> 
> 标签：erlang, ets

在ets中查找不存在的表（t3）后，将删除所有用户创建的表（t1和t2）。它是一个错误还是只是 ets 的一个奇怪的功能？

这是 Eshell 中的代码。

* * *

```
Eshell V5.9.1  (abort with ^G)

1> ets:new(t1, [named_table]).

t1

2> ets:new(t2, [named_table]).

t2

3> ets:all().

[t2,t1,8207,4110,13,file_io_servers,inet_hosts_file_byaddr,
 inet_hosts_file_byname,inet_hosts_byaddr,inet_hosts_byname,
 inet_cache,inet_db,global_pid_ids,global_pid_names,
 global_names_ext,global_names,global_locks,ac_tab]

4> ets:insert(t1, {1,2}).

true

5> ets:lookup(t1, 1).

[{1,2}]

6> ets:lookup(t2, 1).

[]

7> ets:all().        

[t2,t1,8207,4110,13,file_io_servers,inet_hosts_file_byaddr,
 inet_hosts_file_byname,inet_hosts_byaddr,inet_hosts_byname,
 inet_cache,inet_db,global_pid_ids,global_pid_names,
 global_names_ext,global_names,global_locks,ac_tab]

8> ets:lookup(t3, 1).

** exception error: bad argument
     in function  ets:lookup/2
        called as ets:lookup(t3,1)

9> ets:all().        

[8207,4110,13,file_io_servers,inet_hosts_file_byaddr,
 inet_hosts_file_byname,inet_hosts_byaddr,inet_hosts_byname,
 inet_cache,inet_db,global_pid_ids,global_pid_names,
 global_names_ext,global_names,global_locks,ac_tab]

10> 
```

* * *

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:03:56.183

你在一个不存在的表中查找，所以你得到一个“崩溃”你的 shell 的错误。一个新的 shell 被启动，它看起来是透明的，除了属于第一个 shell 的 ets 被删除。

# android - 如何使用钛 appcelerator 在我的 android 应用程序中播放 .asx 文件？

> ID：13083825
> 
> 赞同：0
> 
> 时间：2012-10-26T08:57:12.817
> 
> 标签：android, titanium, audio-streaming, radio, libmms

我有一个 URL，单击时会下载 .asx 类型的文件。下载的文件，流式传输现场广播并在音频播放器中播放。我如何使用钛 appcelerator 在我的 android 应用程序中处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:49:40.493

您不使用 asx 文件，因为音频播放器是 Android 的一项功能。你需要使用`Titanium.Media.AudioPlayer`

此处的文档：http: //docs.appcelerator.com/titanium/latest/#! [/api/Titanium.Media.AudioPlayer](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Media.AudioPlayer)

# joomla - 在 joomla 1.5 中添加新项目作为文章

> ID：13083826
> 
> 赞同：0
> 
> 时间：2012-10-26T08:57:14.597
> 
> 标签：joomla, joomla1.5

我现在正在运行一个 joomla 项目。我需要在我的 joomla 项目中添加一个单独的 php 项目作为文章。这里是我在文章上尝试的内容；

```
<?php
// You can place PHP like this
include "newprojectfolder/index.php?m=projects&uname=admin&pass=passwd";
?> 
```

当我在那个 joomla 文件夹上运行独立的新项目时，它工作正常。

```
http://server/Joomlaproject/newprojectfolder/index.php?m=projects&uname=admin&pass=passwd 
```

但是当它用作 joomla 文章时，它没有显示任何内容......

我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:37:24.190

Joomla 使用不支持编写纯 PHP 的 TinyMCE 编辑器。因此，您需要下载一个允许您这样做的扩展程序。就个人而言，如果只是想在文章中使用 PHP，那么我建议使用[PHP Direct](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/4470?qh=YToxMzp7aTowO3M6MzoicGhwIjtpOjE7czo0OiJwaHAnIjtpOjI7czo1OiJwaHAncyI7aTozO3M6NjoiZGlyZWN0IjtpOjQ7czo5OiJkaXJlY3Rpb24iO2k6NTtzOjEwOiJkaXJlY3Rpb25zIjtpOjY7czo3OiJkaXJlY3RzIjtpOjc7czoxMToiZGlyZWN0aW9uYWwiO2k6ODtzOjc6IidkaXJlY3QiO2k6OTtzOjk6ImRpcmVjdGluZyI7aToxMDtzOjg6ImRpcmVjdGVkIjtpOjExO3M6MTE6ImRpcmVjdGVtZW50IjtpOjEyO3M6OToiZGlyZWN0aXZlIjt9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:21:55.640

用于`Sourcerer`在任何地方放置任何代码。这个模块非常有用，可以解决 TinyMCE 编辑器的问题！

看这个： [Sourcerer](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/5051?qh=YToxOntpOjA7czo5OiJzb3VyY2VyZXIiO30=)

# css - CSS 仅适用于兼容模式下的 IE8（没有 IE8 没有 IE7）？

> ID：13083829
> 
> 赞同：0
> 
> 时间：2012-10-26T08:57:25.747
> 
> 标签：css

有没有办法添加一个仅适用于兼容模式下的 IE8 的 CSS，但如果 IE7 或 IE8 或（显然是任何其他浏览器）则不会？

我的 CSS 很简单

```
h1 {
   font-size:14px;
} 
```

但这必须 font-size 只能在 IE8 上工作（兼容模式）

注意：我知道如何编写一个条件语句来识别 IE8……但我不知道如何为 IE8 兼容模式执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T11:54:30.370

IE8 的 CSS hack，如下所示：

```
h1{font-size:14px\0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:13:08.083

不幸的是，没有办法仅适用于 IE8 兼容模式。但是，IE8CM 将显示完全相同的 IE7，因为它是一个 IE7 模拟器。您可以使用类似以下代码的代码，但它也适用于 IE7：

```
<!--IE9 compatibility mode & IE8:-->
  <!--[if IE 8]>
    <p>Welcome to Internet Explorer 8.</p>
  <![endif]-->

<!--IE8 compatibility mode & IE7:-->
  <!--[if IE 7]>
    <p>Welcome to Internet Explorer 7.</p>
  <![endif]--> 
```

有什么理由不能也适用于 IE7 吗？在 IE7 中也应该需要您正在执行的任何可以修复 IE8 中的问题兼容模式的 hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:33:22.350

您应该在代码中的 html 标记之前添加以下代码：

```
<!--if IE 8>
<html class="IE8">
<[endif]-->
<html>
...
</html> 
```

在 CSS 文件中，执行以下操作：

```
.IE8 h1{
font-size:14px;
} 
```

这仅适用于 IE8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T14:55:49.960

使用 css 破解：

```
 body{
         color:red;           /*every browser*/
         color:blue\9;        /*IE8 or below*/
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-14T07:07:37.783

兼容模式除非有修改的 DocType 呈现为 IE 7 或更低，所以如果它处于兼容模式，它通常也会在 IE 7 中呈现。

但是，您仍然可以这样做：如果您检查用户代理字符串，您可以通过这种方式区分它。IE 8 和更高版本在用户代理字符串中包含单词“Trident”，因此如果它呈现为 IE 7 或更低版本，但 Trident 确实出现在 uagent 中，则它必须处于兼容模式。

虽然大多数人认为这没有必要，但我确实有理由这样做。在我之前的一个项目中，需要告诉人们使用兼容模式选项，直到我们能够修改我们的应用程序以处理较新的浏览器。不是每个人都会阅读说明，因此弹出的消息通常是告诉人们该做什么的最佳方式。

我编写并放入文档头部的这个脚本的修改版本起到了作用：

```
<script language="javascript" type="text/javascript"> 
if (!!navigator.userAgent.match(/MSIE/i)) { 
   ie__mode=' not_ie_compatibility_mode';
(!!navigator.userAgent.match(/Trident/i)&&document.documentMode<8)?ie__mode=' ie_compatibility_mode':''; } 
</script> 
```

因此，javascript 变量 ie_mode 将设置为：“ie_compatibility_mode”或“not_ie_compatibility_mode”

如果要添加 document.documentElement.className+=ie__mode; 到脚本，以便向文档本身添加一个 css 类，如下所示：

```
<script language="javascript" type="text/javascript"> 
if (!!navigator.userAgent.match(/MSIE/i)) { 
   ie__mode=' not_ie_compatibility_mode';
(!!navigator.userAgent.match(/Trident/i)&&document.documentMode<8)?ie__mode=' ie_compatibility_mode':'';
document.documentElement.className+=ie__mode; } 
</script> 
```

然后你就可以在文档中使用 css 来实现这两种模式。示例样式：

```
<style type="text/css">

    html { color:#000000; }

    /* default settings: start with all items 'off' */

    .hide_element { display:none; visibility:hidden; }

    .ie_compatibility_mode .display_compatibility_mode { visibility:visible; display:block; color:#FF9900; }

    .not_ie_compatibility_mode .display_not_compatibility_mode { visibility:visible; display:block; color:#666666; }

</style> 
```

然后在体内你可以这样做：

```
<body>

If you are using internet explorer there will be more here: 

<br><br>

<script language="javascript" type="text/javascript"> 
    if (document.documentMode) document.write("which ie mode: "+document.documentElement.className);
</script>

<br><br>

<div class="hide_element display_compatibility_mode">
   This is in compatibility mode. [this should show up in orange]
</div>

<div class="hide_element display_not_compatibility_mode">
   This is not in compatibility mode. [this should be show up in blue]
</div>

</body> 
```

这是完整的工作页面，所有部分放在一起：

```
<!DOCTYPE html>
<html>
<head>
<title>HTML Class Setting / Detect Compatibility Mode Example - Jeff Clayton</title>

<script language="javascript" type="text/javascript"> 
if (!!navigator.userAgent.match(/MSIE/i)) { 
   ie__mode=' not_ie_compatibility_mode';
(!!navigator.userAgent.match(/Trident/i)&&document.documentMode<8)?ie__mode=' ie_compatibility_mode':'';
document.documentElement.className+=ie__mode; } 
</script>

<style type="text/css">

/* default settings: start with all items 'off' */

.hide_element { display:none; visibility:hidden; }

.ie_compatibility_mode .display_compatibility_mode { visibility:visible; display:block; color:#FF9900; }

.not_ie_compatibility_mode .display_not_compatibility_mode { visibility:visible; display:block; color:#0000FF; }

</style>

</head>

<body>

If you are using internet explorer there will be more here: 

<br><br>

<script language="javascript" type="text/javascript"> 
    if (document.documentMode) document.write("which ie mode: "+document.documentElement.className);
</script>

<br><br>

<div class="hide_element display_compatibility_mode">
   This is in compatibility mode. [this should show up in orange]
</div>

<div class="hide_element display_not_compatibility_mode">
   This is not in compatibility mode. [this should show up in blue]
</div>

</body>
</html> 
```

# html - 无法为输入文件提供顶部/左侧位置

> ID：13083831
> 
> 赞同：0
> 
> 时间：2012-10-26T08:57:30.777
> 
> 标签：html, css, firefox, css-position

我正在创建一个 div，您可以在其中从桌面删除文件，也可以通过单击它来上传它们。由于安全限制（我无法触发对文件输入的点击），我正在使用在目标 div 上时跟随鼠标移动不透明度 0 文件输入的技巧。它在 Chrome 上完美运行，但 Firefox 没有做到这一点（因为它将文件输入粘贴到 div 的左上角。我将向您展示我正在使用的结构：

```
<div style="position:relative;width:500px">
    <img class="img-drop" width="500" src="http://placehold.it/500x500">
    <div class="over-img-drop" style="position:absolute;width:100%;height:100%;top:0;">
        Drop or click to upload a picture.
        <input type="file" style="position:absolute;width:20px;height:20px;opacity:0" class="fileupload">
    </div>
    <a href="#" class="btn-statusbar" style="position:absolute;top:10px;right:10px"><i class="icon-chevron-down"></i></a>
</div> 
```

Javascript 来了

```
<script type="text/javascript">
    $(".over-img-drop").on("mouseover,  mousemove", function(e){
        if($(e.target).hasClass("fileupload")) //if event is happening over file input, avoid moving
            return true;
        $(this).find(".fileupload").css("top", e.offsetY-10).css("left", e.offsetX-10);
            return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:59:32.540

好吧，我碰巧找到了解决方案：

`event.offsetX`并且`event.offsetY`在 Chrome 上可用，但在 Firefox 上不可用（这些值 return `undefined`）。您需要做的是手动计算偏移量并根据此计算放置任何位置：jQuery 包括此，如此[处](https://stackoverflow.com/questions/1002934/jquery-x-y-document-coordinates-of-dom-object)所述。

您应该做的是获取容器的偏移量，然后从 and 中减去`event.pageX`它`event.pageY`。因此，代码如下所示：

```
<script type="text/javascript">
    $(".over-img-drop").on("mouseover,  mousemove", function(e){
        if($(e.target).hasClass("fileupload"))
            return true;
        var offsets = $(this).offset();
        $(this).find(".fileupload").css("top", e.pageY-offsets.top-10).css("left", e.pageX-offsets.left-10);
        return false;
    });
</script> 
```

# telerik - 有没有办法在 OpenAccessContext 之间传输持久对象

> ID：13083840
> 
> 赞同：0
> 
> 时间：2012-10-26T08:58:05.693
> 
> 标签：telerik, openaccess

Telerik openaccess 中有没有办法将对象从一个 OpenAccessContext 复制到另一个？

我尝试了以下（丑陋的）方法：获取一个上下文的对象，对其进行序列化，反序列化，然后将其放入另一个上下文中。

我不敢相信没有内置方法来克隆一个对象。有谁知道更好的方法？（我不是说：使用反射复制）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:48:30.567

您可以使用 OpenAccess ORM 的[附加/分离](http://www.telerik.com/help/openaccess-orm/feature-ref-api-context-api-attach-detach.html)功能来处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:51:05.230

您是否使用过经典 API 中可用的旧 ObjectContainer 方法或最新的 OpenAccessContext.CreateDetachedCopy + OpenAccessContext.AttachCopy 功能？我想知道是哪一个引起了麻烦

# xslt - 从 tcm 检索 URL

> ID：13083844
> 
> 赞同：4
> 
> 时间：2012-10-26T08:58:29.310
> 
> 标签：xslt, webforms, tridion

我正在尝试在 render xslt 中检索多媒体组件的 URL，但它仍然失败。

我可以拿起 tcm URI。有没有办法从中获取 URL？

我尝试使用 tcmse:PublishBinary 函数，但失败并出现错误“命名空间'http://www.tridion.com/ContentManager/5.1/TcmScriptAssistant'不包含任何函数。”

```
<table cellspacing="0px" cellpadding="0px" style="border: 0; padding: 0px; width: 100%"> 
    <xsl:for-each select="twf:items/twf:item">
        <tr>
            <td colspan="2">
                <!-- <xsl:value-of select="twf:webformscomponentlink/@xlink:href" /> -->
                <!-- <xsl:value-of select="tcmse:PublishBinary(string(twf:webformscomponentlink/@xlink:href))" /> -->
                <span>
                    <xsl:call-template name="replace-new-lines">
                        <xsl:with-param name="string">
                            <xsl:value-of select="twf:linklabel" />
                        </xsl:with-param>
                    </xsl:call-template>
                    <xsl:text> </xsl:text>
                </span>
                <xsl:element name="a">
                    <xsl:attribute name="href">
                        <xsl:choose>
                            <xsl:when test="twf:webformscomponentlink/@xlink:href">
                                <xsl:value-of select="twf:webformscomponentlink/@xlink:href" /> 
                            </xsl:when>
                            <xsl:otherwise>#</xsl:otherwise>
                        </xsl:choose>
                    </xsl:attribute>
                    <xsl:value-of select="twf:linktext" />
                </xsl:element>    
            </td>
        </tr>
    </xsl:for-each>
</table> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:39:45.417

您提到您正在尝试在 Render XSLT 中解析多媒体组件，并且在您的标签中我看到了 WebForms，所以我假设它是 SDL Tridion WebForms 组件模板的 Render XSLT。

WebForm 是一个动态组件表示，它的组件模板使用两个 XSLT，一个在 Source 选项卡（Expand XSLT）中，它在 Publish 时执行，此时 Publisher 在 CMS 上呈现模板代码。动态模板是另一个，它包含一个 XSLT，它在发布时被原样复制到 Content Broker。在您的 WebForms 组件展示请求时，动态模板用于将 Expand XML 转换为您的 WebForm。

因此，因为动态模板是在请求时执行的，所以此时 TcmScriptAssistant 不再可用（它仅在发布时存在于内容管理器端）。解决方案是解析扩展模板中的多媒体组件，使用`tcmse:PublishBinary()`, 在渲染模板中您只能转换/显示扩展模板的结果，但此时您无法访问 CM 功能。

# jboss - 将 WAR 文件部署到在 JBOSS AS 7.1 下工作的 Jboss EAP 6.0 时出错

> ID：13083848
> 
> 赞同：6
> 
> 时间：2012-10-26T08:58:39.903
> 
> 标签：jboss, jboss7.x, jboss6.x

我们正在开发使用 Jboss、Spring 和 Hibernate 构建的新系统，目前我们正在从 AS 7.1 迁移到 EAP 6.0。

由于我们未知的原因，部署到 EAP 6.0 服务器时部署失败，但在 AS 7.1 下运行良好（在我们的本地机器和本地测试服务器上）。

简而言之，我们得到以下错误：

```
"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./Web" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./Web: JBAS018040: Failed to start context"},
"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"Web.war\".jboss.security.jacc Missing[JBAS014861: ]"] 
```

此外，我们还有控制台日志，请参阅下文了解更多信息。我们找到了[https://issues.jboss.org/browse/AS7-5222](https://issues.jboss.org/browse/AS7-5222)，据我们了解，其中包含一个修复程序，它提供了更详细的错误信息，可惜我们目前无法更新/升级。

所以我谦虚的问题是，有没有人知道如何解决这个问题？

```
 =========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /opt/EAP-6.0.0.GA/jboss-eap-6.0

  JAVA: java

  JAVA_OPTS:  -server -XX:+UseCompressedOops -Xms1303m -Xmx1303m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

10:30:54,539 INFO  [org.jboss.modules] JBoss Modules version 1.1.2.GA-redhat-1
10:30:54,896 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA-redhat-1
10:30:55,002 INFO  [org.jboss.as] JBAS015899: JBoss EAP 6.0.0.GA (AS 7.1.2.Final-redhat-1) starting
10:30:56,296 INFO  [org.xnio] XNIO Version 3.0.4.GA-redhat-1
10:30:56,301 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
10:30:56,312 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.4.GA-redhat-1
10:30:56,322 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.8.GA-redhat-1
10:30:56,362 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
10:30:56,369 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
10:30:56,393 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
10:30:56,506 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
10:30:56,510 INFO  [org.jboss.as.connector.logging] (MSC service thread 1-3) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.11.Final-redhat-1)
10:30:56,559 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
10:30:56,568 INFO  [org.jboss.as.security] (MSC service thread 1-4) JBAS013100: Current PicketBox version=4.0.9.Final-redhat-1
10:30:56,598 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011906: Activating OSGi Subsystem
10:30:56,602 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
10:30:56,622 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
10:30:56,692 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service
10:30:56,719 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
10:30:56,920 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-3) JBoss Web Services - Stack CXF Server 4.0.4.GA-redhat-1
10:30:57,138 WARN  [com.arjuna.ats.arjuna] (Transaction Expired Entry Monitor) ARJUNA012210: Unable to use InetAddress.getLocalHost() to resolve address.
10:30:57,167 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-4) Starting Coyote HTTP/1.1 on http-/0.0.0.0:8080
10:30:57,413 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
10:30:57,632 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1) JBAS015012: Started FileSystemDeploymentService for directory /opt/EAP-6.0.0.GA/jboss-eap-6.0/standalone/deployments
10:30:57,644 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) JBAS017100: Listening on 0.0.0.0:4447
10:30:57,645 INFO  [org.jboss.as.remoting] (MSC service thread 1-2) JBAS017100: Listening on 0.0.0.0:9999
10:30:57,763 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://0.0.0.0:9990
10:30:57,763 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss EAP 6.0.0.GA (AS 7.1.2.Final-redhat-1) started in 3619ms - Started 133 of 212 services (78 services are passive or on-demand)
10:33:36,236 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015876: Starting deployment of "Web.war"
10:33:41,301 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) JBAS010403: Deploying JDBC-compliant driver class com.microsoft.sqlserver.jdbc.SQLServerDriver (version 4.0)
10:33:41,306 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
10:33:41,404 INFO  [org.jboss.as.osgi] (MSC service thread 1-1) JBAS011907: Register module: Module "deployment.Web.war:main" from Service Module Loader
10:33:51,310 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error listenerStart
10:33:51,311 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/Web] startup failed due to previous errors
10:33:51,335 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.web.deployment.default-host./Web: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./Web: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_06]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_06]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_06]

10:33:51,542 INFO  [org.jboss.as.server] (HttpManagementService-threads - 1) JBAS015870: Deploy of deployment "Web.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./Web" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./Web: JBAS018040: Failed to start context"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"Web.war\".jboss.security.jacc Missing[JBAS014861: <one or more transitive dependencies>]"]}
10:33:51,565 INFO  [org.jboss.as.osgi] (MSC service thread 1-1) JBAS011908: Unregister module: Module "deployment.Web.war:main" from Service Module Loader
10:33:51,675 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment Web.war in 132ms 
```

更新：这里有更多日志。请注意，这是运行 OpenJDK 1.7，而不是常规版本。我们已经尝试了这两种方法，但问题仍然存在。

```
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /opt/EAP-6.0.0.GA/jboss-eap-6.0

  JAVA: java

  JAVA_OPTS:  -server -XX:+UseCompressedOops -Xms1303m -Xmx1303m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.server.default.config=standalone.xml

=========================================================================

14:12:59,719 INFO  [org.jboss.modules] JBoss Modules version 1.1.2.GA-redhat-1
14:13:00,028 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA-redhat-1
14:13:00,111 INFO  [org.jboss.as] JBAS015899: JBoss EAP 6.0.0.GA (AS 7.1.2.Final-redhat-1) starting
14:13:01,469 INFO  [org.xnio] XNIO Version 3.0.4.GA-redhat-1
14:13:01,488 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
14:13:01,493 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.4.GA-redhat-1
14:13:01,505 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.8.GA-redhat-1
14:13:01,540 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
14:13:01,546 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
14:13:01,560 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
14:13:01,674 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
14:13:01,699 INFO  [org.jboss.as.connector.logging] (MSC service thread 1-2) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.11.Final-redhat-1)
14:13:01,715 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
14:13:01,729 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
14:13:01,735 INFO  [org.jboss.as.security] (MSC service thread 1-1) JBAS013100: Current PicketBox version=4.0.9.Final-redhat-1
14:13:01,757 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011906: Activating OSGi Subsystem
14:13:01,838 INFO  [org.jboss.as.naming] (MSC service thread 1-3) JBAS011802: Starting Naming Service
14:13:01,848 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
14:13:01,898 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
14:13:02,153 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-3) JBoss Web Services - Stack CXF Server 4.0.4.GA-redhat-1
14:13:02,383 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-3) Starting Coyote HTTP/1.1 on http-/0.0.0.0:8080
14:13:02,530 WARN  [com.arjuna.ats.arjuna] (Transaction Expired Entry Monitor) ARJUNA012210: Unable to use InetAddress.getLocalHost() to resolve address.
14:13:02,754 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
14:13:02,895 INFO  [org.jboss.as.remoting] (MSC service thread 1-3) JBAS017100: Listening on 0.0.0.0:9999
14:13:02,897 INFO  [org.jboss.as.remoting] (MSC service thread 1-4) JBAS017100: Listening on 0.0.0.0:4447
14:13:02,908 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-4) JBAS015012: Started FileSystemDeploymentService for directory /opt/EAP-6.0.0.GA/jboss-eap-6.0/standalone/deployments
14:13:03,018 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://0.0.0.0:9990
14:13:03,019 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss EAP 6.0.0.GA (AS 7.1.2.Final-redhat-1) started in 3697ms - Started 133 of 212 services (78 services are passive or on-demand)
14:13:50,537 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "Web.war"
14:13:55,458 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) JBAS010403: Deploying JDBC-compliant driver class com.microsoft.sqlserver.jdbc.SQLServerDriver (version 4.0)
14:13:55,462 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
14:13:55,598 INFO  [org.jboss.as.osgi] (MSC service thread 1-3) JBAS011907: Register module: Module "deployment.Web.war:main" from Service Module Loader
14:14:01,556 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Error listenerStart
14:14:01,556 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Context [/Web] startup failed due to previous errors
14:14:01,575 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service jboss.web.deployment.default-host./Web: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./Web: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05-icedtea]

14:14:01,782 INFO  [org.jboss.as.server] (HttpManagementService-threads - 1) JBAS015870: Deploy of deployment "Web.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./Web" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./Web: JBAS018040: Failed to start context"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"Web.war\".jboss.security.jacc Missing[JBAS014861: <one or more transitive dependencies>]"]}
14:14:01,794 INFO  [org.jboss.as.osgi] (MSC service thread 1-3) JBAS011908: Unregister module: Module "deployment.Web.war:main" from Service Module Loader
14:14:01,934 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment Web.war in 152ms
14:15:39,916 INFO  [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Container org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/] has not been started
14:15:39,935 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2) Pausing Coyote HTTP/1.1 on http-/0.0.0.0:8080
14:15:39,935 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2) Stopping Coyote HTTP/1.1 on http-/0.0.0.0:8080
14:15:39,945 INFO  [org.jboss.as.logging] JBAS011503: Restored bootstrap log handlers
14:15:39,950 INFO  [com.arjuna.ats.jbossatx] ARJUNA032018: Destroying TransactionManagerService
14:15:39,951 INFO  [com.arjuna.ats.jbossatx] ARJUNA032014: Stopping transaction recovery manager
14:15:39,965 INFO  [org.jboss.as] JBAS015950: JBoss EAP 6.0.0.GA (AS 7.1.2.Final-redhat-1) stopped in 6ms 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T06:51:14.337

确保您没有使用和之间的**Spring Framework**版本。众所周知，这些与**JBoss**或更高版本的所有版本不兼容；`2.5``3.0.1`**`5.0`**

 **使用以下命令并让我知道状态。

```
standalone.sh -Dorg.jboss.as.logging.per-deployment=false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T22:01:44.390

我们遇到了类似的问题，使用`JBoss AS 7.2.0 final`and `Spring 3.2.8`。在我们的例子中，我们错过了 spring 的活动配置文件指向**Jboss7**的设置。一旦我们设置了这个，上下文就解决了，部署就成功了。

```
set "JAVA_OPTS=%JAVA_OPTS% -Dspring.profiles.active=jboss7 
```

希望这可以帮助。**

# java - Vim 高亮静态变量

> ID：13083849
> 
> 赞同：0
> 
> 时间：2012-10-26T08:58:43.563
> 
> 标签：java, vim, syntax-highlighting

是否有可能以某种方式突出显示Java 源文件中的**静态变量？**脚本，配置，什么？
我已经搜索了一段时间，认为这是不可能的，请证明我错了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T10:41:55.320

JavaBrowser[插件](http://www.vim.org/scripts/script.php?script_id=588)在侧栏中概述了静态方法和字段，如流行的*taglist*插件。它依赖*Exuberant Ctags*来解析 Java 源代码并创建一个函数原型的标签数据库，然后它会解析这个词`static`（因为 ctags 没有明确地调用它）。

[underlinetag 插件](http://www.vim.org/scripts/script.php?script_id=3494)使用标签数据库为标签数据库中的所有条目定义语法突出显示。

如果您实现两个插件的组合，您将实现您的目标。（还有其他插件，如[easytags](http://www.vim.org/scripts/script.php?script_id=3114)，它在一个插件中提供自动标签更新和突出显示。）不幸的是，我认为这不仅仅是配置问题；您实际上必须深入了解插件的工作原理，并修改插件逻辑以过滤并仅应用于静态成员。

# ruby-on-rails - 模型分布在几张桌子上

> ID：13083853
> 
> 赞同：0
> 
> 时间：2012-10-26T08:59:04.507
> 
> 标签：ruby-on-rails

这是我正在尝试做的事情：

```
class Account < ActiveRecord::Base
   def name
   end
end

class TypeA < Account
end

class TypeB < Account
end 
```

其中 TypeA 和 TypeB 存储在两个不同的表中，而 Account 几乎充当抽象接口（没有关联的表）。它们都有大量的条目和大量的字段，所以我想让它们分开。有没有办法解决这个问题？

（上面的示例不能用作帐户表，顺便说一句）。

**更新**

现在，如果我使用模块（如答案中所建议的那样），则会引发另一个问题：

假设我有

```
class Transaction < ActiveRecord::Base
   belongs_to :account, :polymorphic => true
end 
```

其中 account 可以是`TypeA`或`TypeB`。我得到以下不当行为：

```
i = TypeA.new(:name => "Test")
t = Transaction.new(:account => i)
t.account.name
>> nil 
```

这不是我想要的，`account.name`应该返回“测试”。如何得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:02:11.600

改用模块。您已在要共享的这两个模型之间共享行为。这是模块的一个很好的用例。

```
# inside lib/account.rb
module Account
   # ...
   def name
     # code here
   end
   # ...
end

# inside app/models/type_a.rb
class TypeA < ActiveRecord::Base
  include Account
end

# inside app/models/type_b.rb
class TypeB < ActiveRecord::Base
  include Account
end 
```

# javascript - 从 JavaScript 对象中删除整个键

> ID：13083858
> 
> 赞同：1
> 
> 时间：2012-10-26T08:59:20.263
> 
> 标签：javascript, jquery, json

这可能是我缺乏术语的情况，但是如果有人能就此启发我，我将不胜感激：

我有一个返回 JSON 数组的例程，可以完美运行，但是我希望根据传递的内容进行一些计算。

因此，我将数组复制到一个临时对象（称为 tmp）中，然后我希望从该对象中删除某些不必要的“键”（？）。

例如，我的 'tmp' 对象开始时具有：

fldCat2、fldCat3 等等。

我不需要与“fldCat3”相关的任何内容，因此我希望从对象中删除整个密钥。

为了测试这一点，我做了以下事情：

```
 console.log(tmp);

        delete tmp.fldCat3;
        delete tmp['fldCat3'];

        var prop = "fldCat3";
        delete tmp[prop];

        console.log(tmp); 
```

然而，没有一个删除方法会从 tmp 对象中删除“fldCat3”。

我错过了什么非常明显的东西吗？

*编辑*

已附上 Firebug 中对象的屏幕截图（已删除值）

![萤火虫输出](../Images/6a2abd02fff8cf2e8183f80252699dd5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:29:13.063

鉴于您的屏幕截图，我假设您的问题是您试图从具有这些属性的实际对象数组中删除属性。

你将不得不做这样的事情

```
for (var i = 0; i < tmp.length; i++)
    delete tmp[i].fldCat3; 
```

在这里，您循环遍历所述数组的所有元素，从每个元素中删除 fldCat3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:16:27.950

我也遇到过这个问题。我所做的是在从对象中删除密钥后使用[UnderscoreJS 。](http://underscorejs.org/#compact)`_.compact(myObject)`

# java - Java Hibernate HQL 到 Hibernate 标准

> ID：13083861
> 
> 赞同：0
> 
> 时间：2012-10-26T08:59:36.813
> 
> 标签：java, hibernate, hibernate-criteria

我有一个使用 Hibernate HQL 查询的类。我想将这些更改为 Hibernate Criteria 查询。然而，Hibernate Criteria 对我来说比 HQL 更难理解，即使有教程也是如此。有人可以告诉我其中一个查询如何使用 Hibernate Criteria/Filters 吗？

```
Configuration configuration = new Configuration();
        configuration.configure().setProperty("hibernate.show_sql", "false");
ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(
                                  configuration.getProperties()).buildServiceRegistry();
SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory(serviceRegistry);

Session session =sessionFactory.openSession();
Transaction tx = session.beginTransaction();
Query query = session.createQuery("from TABLENAME WHERE IDObject1= :idObjectA" +
              "AND IDObject2= :idObjectB AND IDSettingOption = :idSettingOption");
query.setParameter("idObjectA", idObjectB);
query.setParameter("idObjectB", idObjectB);
query.setParameter("idSettingOption", idSettingOption);

List results = query.list(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:14:48.117

```
Criteria criteria = session.createCriteria( TABLENAME.class );

criteria.add( Restrictions.eq( "IDObject1" , idObjectB) );
criteria.add( Restrictions.eq( "IDObject2" , idObjectB) );
criteria.add( Restrictions.eq( "IDSettingOption" ,idSettingOption) );

List results = criteria.list(); 
```

在这里您可以阅读有关 Criteria API 的信息，它有很多示例：
[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:15:43.110

```
List results = session.createCriteria(Entity.class)
    .add(Restrictions.eq("IDObject1", idObjectA))
    .add(Restrictions.eq("IDObject2", idObjectB))
    .add(Restrictions.eq("idSettingOption", idSettingOption))
    .list(); 
```

# javascript - 根据时间更改图像

> ID：13083865
> 
> 赞同：0
> 
> 时间：2012-10-26T09:00:02.363
> 
> 标签：javascript, css, image

我目前正在为一家商店建立一个网站，该商店的营业时间如下：

```
Tuesday & Wednesday: 10.00 - 17.00
Thursday: 10.00 - 12.30 
```

其他日子（其他）关闭。

我有一张打开 ( `images/open.png & images/open@2x.png`) 的图像和一张关闭 ( `images/closed.png & images/closed@2x.png`) 的图像。

我想将这些图像显示为具有以下样式的类（.open-closed）中的背景图像（CSS）：

```
.open-closed {
    width: 48%; 
    background-color: #b3b3b3;
    display: inline-block;
    margin-top: 3%;
    border: 5px solid white;
    min-height: 300px;
    float: left;
} 
```

是的，这不是很正确，因为其中有图像，所以宽度以像素为单位更好，但我会在脚本完成后立即对其进行微调。

我对 jQuery/Javascript 了解不多，几乎一无所知。但我用谷歌搜索了一些片段并编辑了一些部分。我究竟做错了什么？

```
 <script language="JavaScript">

    day=new Date()     //..get the date

    x=day.getHours()    //..get the hour

    if(x>=10 && x<17) {

       document.write('<style type="text/css">.open-closed{background-image:       url(images/open.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (x>=17 && x<24) {

       document.write('<style type="text/css">.open-closed{background: url(images/closed.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (day=tuesday && x>=10 && x<12.30) {

   document.write('<style type="text/css">.open-closed{background: url(images/open.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (day=monday) {

   document.write('<style type="text/css">.open-closed{background: url(images/closed.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (day=friday) {

   document.write('<style type="text/css">.open-closed{background: url(images/closed.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (day=saturday) {

   document.write('<style type="text/css">.open-closed{background: url(images/closed.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    } else

    if (day=sunday) {

   document.write('<style type="text/css">.open-closed{background: url(images/closed.png); background-repeat:no-repeat; width:300px; height: 285px; background-size: 300px 285px;}</style>')

    }

   </script> 
```

这可能是一个非常愚蠢的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:06:38.300

我会说你比较错误的日子。

```
if(day.getDay() == 1) {
  // Now it's monday
} 
```

这就是我要说的方法。

另外：尽量避免添加新`style`标签。定义 CSS 类并决定应用哪一个。假设您有两个类：.open 和 .close。在这些类中，定义了每个背景图像。因此，您需要做的就是决定使用哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:16:09.803

要实际设置图像，这会更合适；根据日期添加开课和闭课，如下所示：

```
if(day.getDay() == 1) {
  $("#divname").addClass("closed");
}
else if(day.getDay() == 2) {
  $("#divname").addClass("open");
} 
```

然后你的CSS：

```
.open{background: url(images/open.png); }
.closed{background: url(images/closed.png); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:03:06.057

一个更简单的解决方案是在不同的类中定义您想要的所有不同类型的图像。每种不同日期类型的唯一类。

然后您所要做的就是检测日期/时间并相应[地更改类属性](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)。我会说这比`<style>`在文档中实际写入附加标签更好。只需提前准备好所有这些，然后决定要使用哪一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:19:46.293

最好有*两个*类，`.open`并`.closed`通过代码设置其中一个。

前任：

CSS：

```
.open{
  background: url(images/open.png)
}

.closed{
  background: url(images/closed.png)
}

.open, .closed{
  ...
} 
```

JS：

```
function updateOpenClosed(){
  var now = new Date();
  var day = now.getDay();
  var hour = now.getHour()+now.getMinute()/60;
  var banner = document.getElementById("open-closed")

  switch(day){
    case 2:
    case 3:
      if(hour>=10 && hour<17){
        banner.class="open";
      }else{
        banner.class="closed";
      }
      break;
    case 4:
      if(hour>=10 && hour<12.5){
        banner.class="open";
      }else{
        banner.class="closed";
      }
      break;
    default:
      banner.class="closed";
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:08:33.460

请检查您使用的日期错误的运算符

```
 if (day=monday)-- this must be problem

 if (day==monday) 
```

动态编写css类不是好事，创建两个类然后动态分配它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T09:13:17.960

为什么不使用对象文字来存储您的数据，如下所示：

```
times = {
    "1": {
        "name": "Monday",
        "open": 10,
        "close": 17
    },
   "2": {
        "name": "Tuesday",
        "open": 10,
        "close": 17
    },
    // more days here
   "6": {
        "name": "Sunday",
        "open": 0,
        "close": 0 // assign same hour if not open at all
    }
} 
```

使用以下CSS

```
.open {
    background: url(images/open.png);
}
.closed {
    background: url(images/closed.png); 
} 
```

然后您可以执行以下操作

```
var day = new Date();
var d   = day.getDay();
var x   = day.getHours();

if( x >= times[ d ].open && x < times[ d ].close ) {

    $("#open-closed").addClass("open");
    $("#open-closed").removeClass("close");

} else {

    $("#open-closed").addClass("close");
    $("#open-closed").removeClass("open");

} 
```

添加类的方法取决于您是否拥有 jQuery，但如果您只想在 JavaScript 中执行此操作，请尝试以下[Change an element's class with JavaScript](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)。

对于商店不营业的日子，就像我在示例中所做的那样，在营业时间和关闭时间中添加相同的时间。

# sql - 如何在 SQL 中编写附加到表的触发器的脚本

> ID：13083866
> 
> 赞同：0
> 
> 时间：2012-10-26T09:00:05.470
> 
> 标签：sql, powershell, smo

我想使用 smo 和 powershell 脚本来输出附加到 table 的触发器。

我找到了一种使用触发器编写表的方法，但这不是什么，我也不会总是知道触发器连接到的表的名称，我只会知道触发器名称。

我想为脚本提供触发器的名称并让它编写脚本。

我一直在寻找一种方法来做到这一点并且没有运气。

一如既往地感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:49:58.187

此[脚本](http://geekswithblogs.net/KingSurfers_Brain/archive/2008/05/30/find-all-triggers-and-their-text-with-t-sql.aspx "脚本")似乎可以与 Sql Server 2008R2 一起使用。您没有指定数据库，但 Powershell 和 SMO 有点像 MS 产品的迹象。

```
SELECT
Tables.Name as 'TableName',
Triggers.name as 'TriggerName',
Comments.Text as 'TriggerText'
FROM  sysobjects Triggers
      Inner Join sysobjects Tables On Triggers.parent_obj = Tables.id
      Inner Join syscomments Comments On Triggers.id = Comments.id
WHERE 
      Tables.name = '<table-name>'
ORDER BY Tables.Name, Triggers.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:59:20.243

下面是一个使用 sqlps 的示例：

```
SQLSERVER:\SQL\Z001\SQL1\Databases\pubs>$db = get-item .
SQLSERVER:\SQL\Z001\SQL1\Databases\pubs>$db.Tables | foreach {$_.Triggers} | where {$_.name -like"employee*"} | foreach {$_.Script()}

SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON

CREATE TRIGGER employee_insupd
ON employee
FOR insert, UPDATE
AS
--Get the range of level for this job type from the jobs table.
declare @min_lvl tinyint,
   @max_lvl tinyint,
   @emp_lvl tinyint,
   @job_id smallint
select @min_lvl = min_lvl,
   @max_lvl = max_lvl,
   @emp_lvl = i.job_lvl,
   @job_id = i.job_id
from employee e, jobs j, inserted i
where e.emp_id = i.emp_id AND i.job_id = j.job_id
IF (@job_id = 1) and (@emp_lvl <> 10)
begin
   raiserror ('Job id 1 expects the default level of 10.',16,1)
   ROLLBACK TRANSACTION
end
ELSE
IF NOT (@emp_lvl BETWEEN @min_lvl AND @max_lvl)
begin
   raiserror ('The level for job_id:%d should be between %d and %d.',
      16, 1, @job_id, @min_lvl, @max_lvl)
   ROLLBACK TRANSACTION
end 
```

# java - Android ListView 目标自定义单元格文本框

> ID：13083867
> 
> 赞同：0
> 
> 时间：2012-10-26T09:00:16.873
> 
> 标签：java, android, listview, custom-cell

我有`ListView`一个自定义单元格，其中包含`2 buttons`、`label`和`editText`。我已经知道了，所以当我单击自定义单元格的按钮时，它会生成一个日志，说明按钮被按下的位置。但是我无法弄清楚我是如何做到的，所以当我按下按钮时，它会更改该单元格的文本框中的文本。我不知道如何在某个位置引用它。

我的 XML 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

     <ListView
         android:id="@+id/lvItems"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:drawSelectorOnTop="false" >

    </ListView>

</RelativeLayout> 
```

我的代码：

```
 class CustomAdapter extends BaseAdapter
{

@Override
public int getCount() {

    return mDescription.size();
}

@Override
public Object getItem(int arg0) {

    return null;
}

@Override
public long getItemId(int arg0) {

    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {

    LayoutInflater inf=getLayoutInflater();
    View v=inf.inflate(R.layout.noncriticalasset, arg2,false);
    TextView tv=(TextView)v.findViewById(R.id.txtOption);

    final EditText et =(EditText)v.findViewById(R.id.tbAnswer);

    Button btPlus=(Button)v.findViewById(R.id.btnPlus);
    Button btMinus=(Button)v.findViewById(R.id.btnMinus);

    btMinus.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            try {

               int position = listView
                        .getPositionForView((View) v.getParent());
                Log.v("Position id", "" + position);

                et.setText("Test Text");

                notifyDataSetChanged();

            } catch (Exception e) {

                Log.e("error", "error" + e.getMessage());

            }

        }
    });

    tv.setText(mDescription.get(arg0).toString()); 

    return v;
} 
```

我尝试仅使用 an 引用文本框，`et.setText()`但没有成功。有没有办法说之`atPosisiton.et.setText`类的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:08:30.980

首先，我会坚持你使用[`recycling pattern`](http://android.amberfog.com/?p=296)ListView，它会工作得更快，因为它减少了每次 ListView 滚动并重新使用已经创建/实例化的视图时创建 ListView 行项目视图。并且为了保持值，`EditText/CheckBox`您必须`setTag()`在 ListView 滚动时保持其位置。我为此写了一篇博文[`here`](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:02:38.517

实际上你得到的位置是正确的，但是调用 notifyDataSetChanged() 后，ListView 将使用 getView() 方法将所有项目视图替换为新的。所以，你应该把点击的位置保持在某个地方，并在 getView() 中设置 EditText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:01:39.243

嗨声明适配器中的按钮不在获取视图和 ViewHolder 中。像下面

按钮 btPlus,btMinus; ViewHolder 支架；

```
class ViewHolder {
  int fieldPossition;
 } 
```

@Override public View getView(int position, View v, ViewGroup arg2) {

```
 holder = new ViewHolder();
LayoutInflater inf=getLayoutInflater();
  v=inf.inflate(R.layout.noncriticalasset, arg2,false);
    TextView tv=(TextView)v.findViewById(R.id.txtOption);

    EditText et =(EditText)v.findViewById(R.id.tbAnswer);

    btPlus=(Button)v.findViewById(R.id.btnPlus);
    btMinus=(Button)v.findViewById(R.id.btnMinus);

      fieldPossition = position;

    btMinus.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            try {

            ViewHolder deleteHolder = (ViewHolder) v.getTag();
                    //   
        int pos = deleteHolder.fieldpossition;
                Log.v("Position id", "" + position);

                et.setText("Test Text");

                notifyDataSetChanged();

            } catch (Exception e) {

                Log.e("error", "error" + e.getMessage());

            }

        }
    });

    tv.setText(mDescription.get(position).toString()); 

   btMinus.setTag(holder);

    return v;
} 
```

而已 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T09:17:41.050

**编辑** *测试OK*
*LazyViewHolder.class*

```
 public class LazyViewHolder {
        private EditText et;
        private TextView text;
        private Button btnSub;
        public LazyViewHolder() {
            // TODO Auto-generated constructor stub
        }

        LazyViewHolder(TextView textView,EditText ed,Button btn) {
            super();
            this.setEt(ed);
            this.setText(textView);
            this.setBtnSub(btn);
        }

        public EditText getEt() {
            return et;
        }

        public void setEt(EditText et) {
            this.et = et;
        }

        public TextView getText() {
            return text;
        }

        public void setText(TextView text) {
            this.text = text;
        }

        public Button getBtnSub() {
            return btnSub;
        }

        public void setBtnSub(Button btnSub) {
            this.btnSub = btnSub;
        }

    } 
```

**自定义适配器中的 getView()**

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        final TextView textView;
        final EditText et;
        final Button sub;

        if (v == null) {
            v = inflater.inflate(R.layout.row, null);
            textView = (TextView) v.findViewById(R.id.tvLabel);
            textView.setText("Hello"+position);
            et = (EditText) v.findViewById(R.id.etWhatToFill);
            sub = (Button) v.findViewById(R.id.btnSubmit);
            v.setTag(new LazyViewHolder(textView, et, sub));
            sub.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                textView.setText(et.getText().toString());  
                }
            });
        } else {
            LazyViewHolder viewHolder = (LazyViewHolder) v.getTag();
            sub = viewHolder.getBtnSub();
            et=viewHolder.getEt();
            textView = viewHolder.getText();
        }
        return v;
    } 
```

**[请在此处](http://www.vogella.com/articles/AndroidListView/article.html)**查找 ListView 和 CustomListView 的详细说明****

# backbone.js - Backbone.js：使用 1 个请求进行多次删除

> ID：13083868
> 
> 赞同：5
> 
> 时间：2012-10-26T09:00:21.727
> 
> 标签：backbone.js

我有一个连接到 REST API 的主干.js 应用程序。我注意到，如果您一次删除多个模型，则必须为每个模型发送单独的 API 请求。

有没有办法使用 1 个请求来处理删除请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:20:18.207

您将需要您的服务器公开一个端点，以便通过首先传递要删除的模型的 ID 来一次删除多个模型。如果您有此可用的常用方法来处理该问题，则可以向您的集合添加一个方法，该方法称为某种方法，`deleteByIds`该方法将接受 ID 数组，然后此方法将在成功删除请求时从集合中删除模型（如果同步) 或直接在将删除请求发送到 API 端点之前，这将确保它们都从服务器中删除。

默认情况下，这就是 RESTful 接口的工作方式，批处理始终是 RESTful 接口的自定义扩展，因此没有现成的方法可以做到这一点，它可能需要您在主干客户端和后端做一些额外的工作。

# php - 在 PHP 中发布请求以形成

> ID：13083869
> 
> 赞同：0
> 
> 时间：2012-10-26T09:00:21.727
> 
> 标签：php, forms, http, post

我正在尝试向具有指向 tcl 脚本的表单的站点发送 POST 请求。我可以在页面的源代码中看到 -

```
<FORM method=post action=<script>.tcl name=form1 
```

我尝试编写一个发送请求的 php 脚本

```
$url = '<url>/<script>.tcl';
$data = array('Username' => ... , 'Password' => ...);
$options = array('http' => array('method'  => 'POST','content' => http_build_query($data)));
$context  = stream_context_create($options);
$result = file_get_contents($url, false, $context);

var_dump($result); 
```

但我收到：file_get_contents(..) - 无法打开流：HTTP 请求失败！HTTP/1.0 500 内部服务器错误

我是新来的，所以我很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:18:59.640

看起来像是[cURL](http://nz.php.net/manual/en/book.curl.php)的工作。

例如：

```
<?php

$url = '<url>/<script>.tcl';
$data = array('Username' => ... , 'Password' => ...);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));

// Return the response...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);

curl_close ($ch);

echo $response; 
```

# android - 方法 onTouchEvent 未被调用

> ID：13083871
> 
> 赞同：33
> 
> 时间：2012-10-26T09:00:22.770
> 
> 标签：android, swipe, touch-event

我的方法有问题

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
} 
```

永远不会被调用。任何想法为什么会这样？我正在构建一个谷歌的 API 4.0.3 应用程序，并且我正在尝试为我的 ViewFliper 启用滑动。但是，它不能工作，因为从不调用触摸。

代码：

```
 public class MainActivity extends SherlockMapActivity implements ActionBar.TabListener { 
```

那是我活动的宣言。并检测我已经实现的滑动：

```
 SimpleOnGestureListener simpleOnGestureListener = new SimpleOnGestureListener(){

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) {

        float sensitvity = 50;
        if((e1.getX() - e2.getX()) > sensitvity){
            SwipeLeft();
        }else if((e2.getX() - e1.getX()) > sensitvity){
            SwipeRight();
        }

        return true;
    }

};
GestureDetector gestureDetector= new GestureDetector(simpleOnGestureListener); 
```

谢谢你。

**编辑：**

主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ViewFlipper
    android:id="@+id/ViewFlipper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff" >

    <include
        android:layout_height="match_parent"
        layout="@layout/mymain" />

    <include layout="@layout/secondmain" />
    <include layout="@layout/thirdmain" />
    <include layout="@layout/fourthmain" />
</ViewFlipper>
</LinearLayout> 
```

**Edit2：**我所有包含的布局都实现了滚动视图。滚动是否有可能接受这些事件并处理它们？如果是这样，如何检测手势？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-26T09:52:18.070

我找到了一个完美的解决方案。我实现了新方法：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {

    View v = getCurrentFocus();
    boolean ret = super.dispatchTouchEvent(event); 
```

现在一切正常！

编辑：

我的最终代码：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    View v = getCurrentFocus();
    if (v instanceof EditText) {
        View w = getCurrentFocus();
        int scrcoords[] = new int[2];
        w.getLocationOnScreen(scrcoords);
        float x = event.getRawX() + w.getLeft() - scrcoords[0];
        float y = event.getRawY() + w.getTop() - scrcoords[1];
        if (event.getAction() == MotionEvent.ACTION_UP
                && (x < w.getLeft() || x >= w.getRight() || y < w.getTop() || y > w
                        .getBottom())) {

            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getWindow().getCurrentFocus()
                    .getWindowToken(), 0);
        }
    }
    boolean ret = super.dispatchTouchEvent(event);
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-17T23:46:38.113

正如我在 Gabrjan 的帖子评论中所写的那样，它在触摸屏幕时会连续触发，实际上有一种简单的方法可以只获取触地事件：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        System.out.println("TOUCH DOWN!");
        //set immersive mode here, or whatever...
    }
    return super.dispatchTouchEvent(event);
} 
```

无论何时触摸屏幕的任何部分，无论是哪个元素，这对我来说都非常有用，可以让 Android 进入沉浸式模式。但我不想重复设置沉浸式模式！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-26T09:41:05.607

> 好的，现在我确定问题是滚动视图句柄触摸，所以无论如何要忽略它，但滚动可用？

是的，这就是问题所在，当 android 处理触摸事件时，每个事件都会从子事件传递到父事件，所以首先它由 ViewFlipper 处理，然后再到 ScrollView。因此，您必须实现 getParent().requestDisallowInterceptTouchEvent(true) （请参阅[ViewParent 类](http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29)）以使 ViewFlipper 处理所有触摸事件，然后简单地检测手势方向（如果水平则翻转视图），然后将触摸事件传递给 ScrollView或者只是以编程方式滚动 ScrollView

编辑：您也可以在 ViewFlipper 中实现 OnTouchListener 并在此侦听器中触发 GestureDetector.onTouchEvent(event)，但这也需要将父视图的 requestDisallowInterceptTouchEvent 设置为 true

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-26T09:35:48.733

所有手势和触摸事件都转到视图层次结构中可以处理的最低元素。因此，如果您在包含的布局中有任何侦听器，您可以调用`((TypeOfParrent)yourView.getParent()).onTouchEvent(event)`将事件委托给您想要的处理程序。

添加：我建议您使用`ViewPager`翻转视图。在 ViewPager 中你不需要实现你自己的 onGestureListener。

[http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# c# - c# - 获取用户在浏览器中输入的 url

> ID：13083872
> 
> 赞同：0
> 
> 时间：2012-10-26T09:00:23.317
> 
> 标签：c#, asp.net, .net, wpf

> **可能重复：**
> [如何在 C# 中获取当前页面的 URL](https://stackoverflow.com/questions/593709/how-to-get-the-url-of-the-current-page-in-c-sharp)

我想开发一个应用程序，在我的应用程序在后台运行时实时存储用户浏览历史记录。

例如，当我的应用程序在后台运行时，如果用户在 chrome 或 firefox 中键入 url .. 我想将该 url 存储在数据库中

如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:17:43.013

我不能给你确切的代码，但我会考虑看看 LB 的建议。

看： [http ://www.fiddler2.com/fiddler/Core/](http://www.fiddler2.com/fiddler/Core/)

如果您还没有尝试过 Fiddler，请尝试安装它。然后你会注意到它拦截了你发出的所有请求，以及 URL。

通过查看 Fiddler 的工作原理（参见上面的链接），您可以解析所有请求的 URL。这可能是最简单也是最好的方法。

我以前没有这样做过，但我猜你必须搜索“Listening to Port 80”或类似的东西。您将不得不查看来自该端口的所有流量。

# java - 如何更改 JSeparator 的颜色？

> ID：13083876
> 
> 赞同：8
> 
> 时间：2012-10-26T09:00:50.853
> 
> 标签：java, swing, colors, jseparator

问题在标题中。

我目前正在做类似的事情：

```
jSperator = new JSeparator();
jSeparator1.setForeground(new java.awt.Color(255, 51, 51)); 
```

但是分隔符保持他的默认颜色，比如 212,212,212。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T09:07:42.900

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-30T14:35:56.530

JSeparator 有两种颜色，一种用于线条，一种用于阴影。您可以更改两者，分别将颜色设置为背景和前景。

```
JSeparator sep = new JSeparator();
sep.setForeground(Color.green); // top line color
sep.setBackground(Color.green.brighter()); // bottom line color 
```

# mysql - 如何删除行列表？

> ID：13083883
> 
> 赞同：-2
> 
> 时间：2012-10-26T09:01:38.027
> 
> 标签：mysql, excel, delete-row

我有一个包含大约 1500 行业务的 excel 文件，我需要从我的 MySQL 数据库中删除这些业务。我怎样才能做到这一点？我使用企业 ID 作为标识行的单元格。

所以在文件 AI 中有 1,500 行业务 ID 在文件 BI 中有 +50,000 行业务'

我需要从文件 B 中删除文件 A 中的业务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:03:26.010

将excel文件导入临时表（这里称为TEMP），然后

```
delete from businesses where id in (select distinct id from TEMP) 
```

# java - DDD 中的聚合对象，这是一个潜在的聚合吗？

> ID：13083890
> 
> 赞同：2
> 
> 时间：2012-10-26T09:02:03.800
> 
> 标签：java, jakarta-ee, domain-driven-design

我有两个实体 Question 和 QuestionLog。问题显然代表一个问题，而 QuestionLog 代表用户可能报告特定问题的实体。例如，如果问题是错误的，质量差等。

现在从我所阅读的内容来看，聚合对象是唯一具有存储库的对象，并且由于 QuestionLog 对象不应该在我的系统中，如果它所附加的问题被删除，我认为 Question 将是聚合根。

这是一个有意义的场景吗？

如果我想要用户提交的 QuestionLogs 列表怎么办？然后我会制作一个 JPQL 来检索用户提交的所有 QuestionLog，还是会破坏它的预期方式？我是否应该检索该特定用户附加了 QuestionLogs 的问题列表，然后遍历所有问题并显示每个 QuestionLog 的属性？

因为必须允许在 Question 类之外使用 QuestionLog 对象？我对限制和它的方式有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:13:18.833

由于`QuestionLog`没有相应的 没有意义`Question`，所以你是对的 - 它不是聚合根。

所有与之相关的操作都`QuestionLog`应该通过`Question`聚合。

如果你想要一个`QuestionLog`用户的列表，你需要在`Question`聚合上定义一个`GetQuestionLogsForUser(user aUser)`方法。您不必*为*用户获取所有问题，而是`QuestionLog`通过聚合控制对 s 的访问。

您可以在聚合根之外*使用*`QuestionLog`对象，但对其进行的任何操作都应通过聚合根完成，尤其是持久性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:15:59.667

正如 Oded 所指出的，与实例相关的所有*行为*`QuestionLog`都应该通过`Question`聚合。但是，对于查询，您有更多的灵活性。您可以在`Question`聚合上有一个方法，该方法返回`QuestionLog`适用于给定查询的实例，但有时，需求可能会使这种方法不切实际。在这种情况下，您可以使用[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)并拥有一个专门用于根据问题 ID 和一些过滤器检索问题日志的存储库。这允许您利用数据库进行查询。虽然这是真的，但与问题相关的一些逻辑会“泄漏”到聚合之外，这是一个公平的权衡，特别是如果所有*行为*都保留在聚合中。

在考虑聚合边界时，您不能完全忘记技术问题。可能`Question`预计 a 会有非常多的相关问题日志。在这种情况下，将整个聚合加载到内存中以进行返回小子集的查询是不切实际的。你甚至可以考虑`QuestionLog`自己做一个聚合。看看[Vaughn Vernon](http://dddcommunity.org/library/vernon_2011)的 Effective Aggregate Design 就可以深入讨论这个主题。

# php - 解析为基于会话的系统生成数组

> ID：13083891
> 
> 赞同：0
> 
> 时间：2012-10-26T09:02:04.817
> 
> 标签：php, session

> **可能重复：**
> [强制访问 __PHP_Incomplete_Class 对象属性](https://stackoverflow.com/questions/965611/forcing-access-to-php-incomplete-class-object-properties)
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我想就如何解析我从会话中获得的系统生成数组征求一些建议。

当我这样做时，`print_r($_SESSION);`这就是我所拥有的。

```
Array (
    [user] => __PHP_Incomplete_Class Object (
        [__PHP_Incomplete_Class_Name] => DEX_User
        [permissionID:DE_User:private] => 9
        [login:DE_User:private] => James.S
        [email:DE_User:private] => james.s@domain.com
        [firstName:DE_User:private] => James
        [lastName:DE_User:private] => Steal
        [title:DE_User:private] => Warehouse Man
        [manager:DE_User:private] => Manager's Name
        [workPhone:DE_User:private] => +1 (111) 111-1111
        [mobilePhone:DE_User:private] => +1 (222) 222-2222
        [homePhone:DE_User:private] => +1 (333) 333-3333
        [im:DE_User:private] =>
        [timeDelta:DE_User:private] => Asia/Hongkong
        [lastLogin:DE_User:private] => __PHP_Incomplete_Class Object ( 
            [__PHP_Incomplete_Class_Name] => GB_Date
            [valueStored:protected] => 13545544126666309821
            [mode:protected] => BASE
            [master:protected] =>
        )
        [description:DE_User:private] => Warehouse Engineer
        [isActive:DE_User:private] => __PHP_Incomplete_Class Object (
            [__PHP_Incomplete_Class_Name] => GB_Boolean
            [valueStored:protected] => 1
            [mode:protected] => BASE
            [master:protected] =>
        )
        [isTerminate:DE_User:private] => __PHP_Incomplete_Class Object (
            [__PHP_Incomplete_Class_Name] => GB_Boolean
            [valueStored:protected] =>
            [mode:protected] => BASE
            [master:protected] =>
        )
        [id:protected] => 231968
        [isModifyed:protected] => 
        [needInsert:protected] => 
        [isDeleted] => 
        [isRemoved] => 
    )
    [enter_password] => 2asas(qwqw
) 
```

我想要实现的是从数组中获取 3 个项目。

我想获取数据

```
login = James.S
firstName = James
lastName = Steal 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:06:13.983

你不能。

检查这段代码：

```
[login:DE_User:private] => James.S
[firstName:DE_User:private] => James 
```

登录名和名字是对象的私有属性，不能从外部访问。

# c# - 从 Windows 服务创建文件/文件夹时的最佳实践

> ID：13083893
> 
> 赞同：2
> 
> 时间：2012-10-26T09:02:08.897
> 
> 标签：c#, windows, permissions, windows-services

我有一个以普通用户身份运行的用户界面。

用户界面通过 tcp/ip 与作为 Windows 服务运行的服务器组件进行通信。

该服务作为本地系统运行。

我的问题是该服务在“ProgramData\MyApp”下创建了新文件夹。这些新创建的文件和文件夹无法由普通用户打开，因为它们是由“系统”创建的。

在安装过程中，目录“ProgramData\MyApp”的权限已经改变，因此每个人都有完全访问权限。但它不会被服务创建的子文件夹继承。

该服务是否应该更改创建的文件和文件夹的权限？或者我可以准备“ProgramData\MyApp”文件夹以允许每个人访问新创建的文件和文件夹吗？

**已修复：我的问题是从临时目录复制了权限错误的文件。临时目录的权限已被继承...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:21:30.063

事件如果您的 Windows 服务作为本地系统运行，您应该对创建文件夹的代码使用[模拟](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)。这样，调用该服务的用户将拥有文件夹和文件的完全权限。

如果您希望任何本地用户都可以访问该文件夹`AddAccessRule`，请查看此处[C# - Set Directory Permissions for All Users in Windows 7](https://stackoverflow.com/questions/8944765/c-sharp-set-directory-permissions-for-all-users-in-windows-7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:39:21.520

不要使用模拟。只需设置文件访问权限。

这是目录的示例：[https](https://stackoverflow.com/a/5398398/70386) ://stackoverflow.com/a/5398398/70386 （文件的工作方式相同）

MSDN：

*   获取[http://msdn.microsoft.com/en-us/library/8e1fc3b8.aspx](http://msdn.microsoft.com/en-us/library/8e1fc3b8.aspx)
*   设置（带有示例）[http://msdn.microsoft.com/en-us/library/system.io.file.setaccesscontrol.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.setaccesscontrol.aspx)

# c# - 更改帧率和 System.Threading Aforge.video C# ASP.NET

> ID：13083894
> 
> 赞同：1
> 
> 时间：2012-10-26T09:02:11.053
> 
> 标签：c#, asp.net, frame-rate, aforge

我有一个小项目，我从网络摄像头捕获图像并解码 qr。

以下代码捕获图像并将其存储到本地文件，*但*仅当它不在 while 循环中时。system.threading 似乎使捕获的图像变黑。如果我不使用它（循环），它每秒会捕获太多图像。

**那么有没有办法改变 aforge.video 帧率，这样我就可以每 x 秒捕捉一次图像而无需 while 循环？**

```
 public partial class WebForm1 : System.Web.UI.Page
{
    public int FrameRate { get; set; }

    private FilterInfoCollection VideoCaptureDevices;
    private VideoCaptureDevice FinalVideo;

    protected void Page_Load(object sender, EventArgs e)
    {
        inputDevices.Items.Clear();

        VideoCaptureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
        foreach (FilterInfo VideoCaptureDevice in VideoCaptureDevices)
        {
            inputDevices.Items.Add(VideoCaptureDevice.Name);
        }
        inputDevices.SelectedIndex = 0;     
    }

    public void Start_OnClick(object sender, EventArgs e)
    {
        FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[inputDevices.SelectedIndex].MonikerString);
        FinalVideo.NewFrame += new NewFrameEventHandler(FinalVideo_NewFrame);
        FinalVideo.Start();
    }
    void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        int i = 0;
        while (i < 10)
        {
            Bitmap video = (Bitmap)eventArgs.Frame.Clone();
            video.Save("C:\\Users\\Wayneio\\Desktop\\image\\test" + i + ".jpg");
            i++;
            System.Threading.Thread.Sleep(5000);
        }

    }
    public void Stop_OnClick(object sender, EventArgs e)
    {
        this.FinalVideo.Stop();
    }
} 
```

此外，在尝试通过 asp 按钮停止捕获时出现此错误：

```
 Object reference not set to an instance of an object on this.FinalVideo.Stop(); 
```

试过这个无济于事： ((VideoCaptureDevice)FinalVideo).DesiredFrameRate = 10;

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T19:00:25.917

在你编码开始视频之前，像这样设置帧速率

```
 FinalVideo.DesiredFrameRate = 10;
 FinalVideo.Start(); 
```

跳过保存的帧的另一个选项是使用一个函数，如果您有一个全局计数器值 myCounter，则该函数并不总是正确的

进行模计算，如下所示 ix mycounter 除以 10 等于 1

```
 myCounter++
 if (m(ycounter %% 10))==1) { //code to save your bitmap   } 
```

# sql - 如何将“orderDate”组织到每周的第一个日期

> ID：13083899
> 
> 赞同：1
> 
> 时间：2012-10-26T09:02:30.333
> 
> 标签：sql, date

微软SQL——

我正在寻找更改我的数据

```
OrderDate      Amt
2012-03-05     1
2012-03-06     6
2012-03-06     7
2012-03-07     8
2012-03-08     1
2012-03-08     1 
```

我希望它列出一周的开始日期是什么，例如 2012-01-01（假设这是星期天）并将本周的所有金额分组到该日期..

这在 SQL 中怎么可能？

谢谢詹姆斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:15:02.130

```
 Select DateAdd(D,1-DatePart(Dw,OrderDate),OrderDate) OrderStartOfWeekDate,
         Sum(Amt) TotalAmt
    From Tbl
Group by DateAdd(D,1-DatePart(Dw,OrderDate),OrderDate); 
```

# ios4 - 我的应用程序不适用于 iOS 4.2.1

> ID：13083901
> 
> 赞同：1
> 
> 时间：2012-10-26T09:02:41.067
> 
> 标签：ios4, itunes, ios-4.2

我已经在 iTunes 上上传了我最新的 iPhone 应用程序，它在 iOS 6.0 和 iOS 5 上运行良好，但是当我在 iOS 4.2.1 上下载应用程序时，它成功下载但没有运行。其显示黑屏片刻后死机。请检查下面的崩溃日志。

```
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-25 10:20:20.830 +0100
OS Version:      iPhone OS 4.3.5 (8L1)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000
Crashed Thread:  0

    Thread 0 name:  Dispatch queue: com.apple.main-thread
    Thread 0 Crashed:
    0   MeteorElectrical                0x0002d12a 0x1000 + 180522
    1   MeteorElectrical                0x0000268e 0x1000 + 5774
    2   UIKit                           0x3503281a 0x34ffd000 + 219162
    3   UIKit                           0x3502cb5e 0x34ffd000 + 195422
    4   UIKit                           0x350017d0 0x34ffd000 + 18384
    5   UIKit                           0x3500120e 0x34ffd000 + 16910
    6   UIKit                           0x35000c4c 0x34ffd000 + 15436
    7   GraphicsServices                0x3593be70 0x35937000 + 20080
    8   CoreFoundation                  0x361eea90 0x36179000 + 481936
    9   CoreFoundation                  0x361f0838 0x36179000 + 489528
    10  CoreFoundation                  0x361f1606 0x36179000 + 493062
    11  CoreFoundation                  0x36181ebc 0x36179000 + 36540
    12  CoreFoundation                  0x36181dc4 0x36179000 + 36292
    13  UIKit                           0x3502bd42 0x34ffd000 + 191810
    14  UIKit                           0x35029800 0x34ffd000 + 182272
    15  MeteorElectrical                0x0000214e 0x1000 + 4430
    16  MeteorElectrical                0x000020e0 0x1000 + 4320

    Thread 1:
    0   libsystem_kernel.dylib          0x33ec03ec 0x33eae000 + 74732
    1   libsystem_c.dylib               0x33efa6d8 0x33ec6000 + 214744
    2   libsystem_c.dylib               0x33efabbc 0x33ec6000 + 215996

    Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
    Thread 2:
    0   libsystem_kernel.dylib          0x33ec0fbc 0x33eae000 + 77756
    1   libdispatch.dylib               0x33091032 0x3308b000 + 24626
    2   libdispatch.dylib               0x3309203a 0x3308b000 + 28730
    3   libdispatch.dylib               0x330915ea 0x3308b000 + 26090
    4   libsystem_c.dylib               0x33efa58a 0x33ec6000 + 214410
    5   libsystem_c.dylib               0x33efabbc 0x33ec6000 + 215996

    Thread 3 name:  WebThread
    Thread 3:
    0   libsystem_kernel.dylib          0x33ebdc00 0x33eae000 + 64512
    1   libsystem_kernel.dylib          0x33ebd758 0x33eae000 + 63320
    2   CoreFoundation                  0x361ef2b8 0x36179000 + 484024
    3   CoreFoundation                  0x361f1562 0x36179000 + 492898
    4   CoreFoundation                  0x36181ebc 0x36179000 + 36540
    5   CoreFoundation                  0x36181dc4 0x36179000 + 36292
    6   WebCore                         0x3594a27e 0x35944000 + 25214
    7   libsystem_c.dylib               0x33ef930a 0x33ec6000 + 209674
    8   libsystem_c.dylib               0x33efabb4 0x33ec6000 + 215988

    Thread 0 crashed with ARM Thread State:
        r0: 0x00000000    r1: 0x00066310      r2: 0x3ee32fa8      r3: 0x3e784400
        r4: 0x0019a790    r5: 0x352ee670      r6: 0x36259dd8      r7: 0x2fdfe348
        r8: 0x000665a8    r9: 0x3e796418     r10: 0x352ee690     r11: 0x352f46c0
        ip: 0x345cc72d    sp: 0x2fdfe328      lr: 0x0002d111      pc: 0x0002d12a
      cpsr: 0x20000030 
```

如果您对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:24:57.830

请检查您是否添加了仅适用于 IOS 5 或更高版本的功能以及在较旧的 Ios 中它会发出警告。这可能会使您的应用程序无法在较旧的 Ios 中运行。希望这可以帮助。

# jquery - 如何将 Pikachoose jquery 库与 Colorbox 集成？

> ID：13083902
> 
> 赞同：1
> 
> 时间：2012-10-26T09:02:39.963
> 
> 标签：jquery

我尝试了几件事，但没有任何效果。

这仅对正在显示的主图像启用颜色框：

```
$("#pikame").PikaChoose({carousel:true});
$(".pika-stage a").colorbox({rel:'colorbox'}); 
```

这就是他们建议集成fancybox（不是我想要的colorbox）的方式：

```
$(document).ready(function (){
   var a = function(self){
      self.anchor.fancybox();
   };
   $("#pikame").PikaChoose({buildFinished:a});
}); 
```

# hibernate - 如何将两个数据库连接到休眠 Eclipse Web 项目？

> ID：13083905
> 
> 赞同：-3
> 
> 时间：2012-10-26T09:02:53.737
> 
> 标签：hibernate, jakarta-ee

我的项目是 java ee Web 应用程序，我将休眠用于数据库目的。我现在将一个数据库连接到这个应用程序我需要将另一个 mysql 数据库连接到这个项目我该怎么做这可能吗？你能给我正确的链接或解决方案吗？

我为此使用了第一个答案thanx lot，但它给出了这个例外，你能帮我解决这个{16：02：39,552 WARN SettingsFactory - 无法获取连接元数据java.sql.SQLException：找不到适合hsqldb的驱动程序：hsql org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:110) 的 java.sql.DriverManager.getConnection(Unknown Source) 的 java.sql.DriverManager.getConnection(Unknown Source) 的://127.0.0.1:9001/openreports ) 在 org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:72) 在 org.hibernate.cfg.Configuration.buildSettings(Configuration.java:1881) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java: 1174) 在 org.efs.openreports.actions.admin.ServerDataAction.(ServerDataAction.java:23) 在太阳。reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at org. springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:84) at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:71) at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor( ConstructorResolver.java:150) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:745) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。autowire(AbstractAutowireCapableBeanFactory.java:253) 在 com.opensymphony.xwork2.spring.SpringObjectFactory.buildBean(SpringObjectFactory.java:145) 在 com.opensymphony.xwork2.spring.SpringObjectFactory.buildBean(SpringObjectFactory.java:128) 在 com.opensymphony .xwork2.ObjectFactory.buildBean(ObjectFactory.java:143) 在 com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:113) 在 com.opensymphony.xwork2.DefaultActionInvocation.createAction(DefaultActionInvocation.java:275) 在 com。 opensymphony.xwork2.DefaultActionInvocation.init(DefaultActionInvocation.java:365) 在 com.opensymphony.xwork2.DefaultActionInvocation.access$000(DefaultActionInvocation.java:38) 在 com.opensymphony.xwork2.DefaultActionInvocation$1.doProfiling(DefaultActionInvocation.java:83)在 com.opensymphony.xwork2.util.profiling。UtilTimerStack.profile(UtilTimerStack.java:455) 在 com.opensymphony.xwork2.DefaultActionInvocation.(DefaultActionInvocation.java:74) 在 com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189) 在 org.apache.struts2。 impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:41) 在 org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:494) 在 org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter .java:125) 在 org.apache.catalina.core.ApplicationFilterChain。internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache .catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java :102) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11 的 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)。 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java: 中的 Http11Processor.process(Http11Processor.java:859)602) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) 16:02:39,610 WARN SessionFactoryObjectFactory - InitialContext 没有实现 EventContext这是我的错误消息，这是什么原因，你能帮帮我吗…………}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:27:15.780

要连接两个数据库，您需要两个`SessionFactory`

**提示**：

```
 SessionFactory sessionFactory1 = new  Configuration().configure("config1.cfg.xml").buildSessionFactory();
 SessionFactory sessionFactory2 = new Configuration().configure("config2.cfg.xml").buildSessionFactory();

void yourMethod() {
        try {
            session = sessionFactory1.openSession();
            // here play with session of sessionFactory1
            session.close();

            session = sessionFactory2.openSession();
           // here play with session of sessionFactory2
            session.close();

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            System.out.println("It works");
        }
    } 
```

如果您使用的是 spring，请参阅[加载两个数据库](http://www.java2s.com/Code/Java/Spring/LoadTwoDataSources.htm)

# objective-c - 如何使用按钮返回我的第一个视图

> ID：13083910
> 
> 赞同：0
> 
> 时间：2012-10-26T09:03:16.560
> 
> 标签：objective-c, ios, xcode

我在 xcode 中使用单视图应用程序模板。我创建了第一个视图控制器，然后用新的 .m 和 .h 以及 xib 添加了另一个。

我可以单击一个按钮 IBAction，然后进入我的第二个视图，但是我用于“返回”按钮的代码不会让我回到我的第一个视图，一切都崩溃了。我已经包含了似乎遵循我正在使用的教程的代码。此外，我只是控制单击了我的按钮并将该行拖到 .h 中的 IBAction 以挂接 secondViewController 按钮，这是我在第一个视图控制器上所做的，它似乎在那里工作。

如果有人可以提供帮助，那就太好了！

```
 //from my first view controller .h which works
-(IBAction) buttonPressedPayTable: (id) sender; 

//from my first view controller.m which also works and gets me to the second view
-(IBAction) buttonPressedPayTable: (id) sender
{
SecondViewController *payTableView = [[SecondViewController alloc]
initWithNibName:@"SecondViewController" bundle:nil];
    [self.view addSubview:payTableView.view];
}

//from my second view controller .h that will not get me back to the first view without crashing

#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{

}
-(IBAction) back: (id)sender;

@end

//from my second view controller .m which doesn't seem to work
#import "SecondViewController.h"

@implementation SecondViewController

-(IBAction) back: (id)sender

{
    [self.view removeFromSuperview];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:06:44.423

使用 UINavigation 控制器

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:17:07.560

您可以使用导航方法从一个视图控制器切换到另一个。

[查看有关视图控制器的苹果文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:19:43.533

使用模态视图可能会更好。所以代替 addSubView 使用：

```
[payTableView setModalPresentationStyle:UIModalPresentationFullScreen];
[payTableView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[self presentModalViewController:payTableView animated:YES]; 
```

然后在 seconViewController 的 back 方法上：

```
[self dismissModalViewControllerAnimated:YES]; 
```

您可以将 ModalTransitionStyle 更改为苹果为您提供的少数几个：D

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:22:10.780

不要将您的第二个添加`ViewController`为. 使用 a将新的添加到视图堆栈， 然后您可以使用导航控制器的后退按钮，或者使用您自己的按钮和代码`subview``view`
`UINavigationController``UIViewController``[self.navigationController pushViewController:payTableView animated:YES];``[self.navigationController popViewControllerAnimated:YES];`

或者，您可以使用 Storyboards 并使用简单的 segue。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T09:45:29.970

您需要在这里使用委托：

在第一个视图的 .h 中声明一个成员变量：

```
@interface FirstViewControllerClassName: UIViewController
    {
    SecondViewController *payTableView;
    }
    @property (nonatomic, retain) SecondViewController *payTableView; 
```

在 .m 中：

@synthesize payTableView；

```
-(IBAction) buttonPressedPayTable: (id) sender
{
if (!payTableView)
     payTableView = [[SecondViewController alloc]
initWithNibName:@"SecondViewController" bundle:nil];
payTableView.delegate = self;
payTableView.isFinishedSelector = @selector(removeView);
    [self.view addSubview:payTableView.view];
}

- (void)removeView
{
   [payTableView.view removeFromSuperview];
   [payTableView release];
   payTableView = nil;
}

//Just declare a member variable delegate in secondviewcontroller like:

#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{
   id delegate;
   SEL isFinishedSelector;
}

@property (nonatomic, assign) id delegate;
@property (nonatomic, assign) SEL isFinishedSelector;

-(IBAction) back: (id)sender;

@end

#import "SecondViewController.h"

@implementation SecondViewController
@synthesize delegate;
@synthesize isFinishedSelector;

-(IBAction) back: (id)sender

{
         if ([self.delegate respondsToSelector:isFinishedSelector])
                [self.delegate performSelector:isFinishedSelector];
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T09:48:04.483

[payTableView.view removeFromSuperview];

我认为您正在删除整个视图。这就是应用程序崩溃的原因

# android - “切换评论”快捷方式是否适用于 Netbeans 7.2 中的 Android 开发？

> ID：13083912
> 
> 赞同：1
> 
> 时间：2012-10-26T09:03:21.897
> 
> 标签：android, netbeans, comments, keyboard-shortcuts, netbeans-7.2

令人沮丧的是，当在 Netbeans 7.2 代码编辑器中打开 .java 文件时，我的 Ctrl+/ 键盘快捷键没有注释掉一行代码。源菜单上的“切换注释”条目不显示任何分配的快捷方式，但快捷方式在工具>>选项>>键盘映射中指定，它适用于其他语言。

有没有其他人有这个问题，你找到解决方法了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:49:49.013

在 NBAndroid 项目中为我工作。对我来说，这听起来像是 NetBeans 错误或您的设置有些奇怪。一个简单的问题：它是 NBAndroid 项目还是 Maven？虽然它应该适用于两者。

-拉迪姆

# jquery - 如何在我的网络应用程序中的谷歌地图上显示多个位置

> ID：13083913
> 
> 赞同：4
> 
> 时间：2012-10-26T09:03:21.833
> 
> 标签：jquery, asp.net

我想在我的网络应用程序中的谷歌地图上显示多个位置。如何显示这个，请建议我。

问候，杰克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T09:16:14.127

我假设您的意思是您想使用 google map v3 api 显示地图。您可以以此为起点。

```
 <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
  <div id="map" style="width: 500px; height: 400px;"></div>
​ 
```

和 javascript 为：

```
var locations = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
];

var map = new google.maps.Map(document.getElementById('map'), {
  zoom: 10,
  center: new google.maps.LatLng(-33.92, 151.25),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
} 
```

这是一个小提琴： http: [//jsfiddle.net/xu6nt/](http://jsfiddle.net/xu6nt/)
有关更多示例，请参阅[https://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

如果您正在寻找 jQuery 插件，我建议[您使用 GMAP3](http://gmap3.net)。

# ruby-on-rails-3.2 - 是否通过管理员

> ID：13083917
> 
> 赞同：0
> 
> 时间：2012-10-26T09:03:42.750
> 
> 标签：ruby-on-rails-3.2, activeadmin

正在使用 activeadmin，并进行一些自定义，我正在处理一些现有的应用程序控制器/视图，我想知道，在视图中说我是否来自管理门户？

所以我有一个部分，我在我的应用程序中使用了几种方式，加上现在我也从activeadmin使用它，因此我想知道这部分是来自应用程序还是来自activeadmin，所以简而言之是url包含`<host>/admin`与否。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:03:16.370

假设只有管理员用户可以通过 ActiveAdmin UI 访问部分用户，您可以查询该用户是否为管理员。如果您使用 Devise 进行身份验证，它将如下所示：

```
<% if admin_signed_in? %>
  <%= render "your_only_admin_content %>
<% end %> 
```

编辑：

如果您想区分管理员何时浏览常规站点或通过活动管理员，您可能需要使用嵌套布局。为此，您必须使用两种布局 - 一种用于管理员，一种用于常规站点浏览。你很可能已经是，因为你说只有部分是在两个案例之间共享的。要使用嵌套布局，请将以下内容放在部分中：

```
<%= yield(:admin_user) if content_for?(:admin_user) %> 
```

在管理员使用的布局中：

```
<% content_for :admin_user do %>
  <%= render "your_only_admin_content %>
<% end %> 
```

# javascript - 带有一些参数的javascript json请求

> ID：13083919
> 
> 赞同：0
> 
> 时间：2012-10-26T09:03:54.933
> 
> 标签：javascript, ajax, json, get

所以一个简单的问题：

JavaScript 需要将该请求发送到服务器：

> myserver/scipt.php?LANG=EN&AGENT={"登录":{"name":"user","pass":"user"}}

我需要如何在 Ajax 中形成 url 和数据？

这是正确的吗？

```
var formData = {
            "login":$("#field1").val(),
            "pass":$("#field2").val()
               };

$.ajax({
    url:'http://myserver/scipt.php?LANG=EN&',
    type:'GET',
    data:'AGENT=' + $.toJSON(formData),
    success: function(res) {
                        alert(res);
                           }
      }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:06:09.760

我建议通过 POST 而不是 GET 发送 JSON。GET 有一些您想避免的限制。

其中的一部分，是的，您的代码似乎还可以。

编辑：

抱歉，您的代码不正确。

将数据行更改为：

```
data: $.toJSON(formData), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:07:32.473

您需要对要通过 Ajax 传递的任何字符串进行 URL 编码。

如果 jQuery 像普通表单一样工作，您还需要将所有查询字符串数据放入`data`其中以避免现有查询字符串被破坏。

```
url:'http://myserver/scipt.php',
type:'GET',
data: { 
    "AGENT": $.toJSON(formData),
    "LANG": "EN"
}, 
```

请注意，如果要传输用户凭据，则应使用 POST 请求。您不希望它们缓存或存储在服务器 access.log 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:08:14.987

您需要以地图的形式将**数据**发送到服务器..

你的数据已经是 json 格式了。你不需要`$.toJSON`再做

代替

```
data:'AGENT=' + $.toJSON(formData), 
```

以这种方式发送

```
 data:{ 'AGENT' : {'Login' : formData } }, 
```

# ios - 在 IB 中使用“按下时隐藏底部栏”进行推送时，UITableView 顶部的黑条闪烁

> ID：13083922
> 
> 赞同：5
> 
> 时间：2012-10-26T09:03:58.180
> 
> 标签：ios, uitabbarcontroller, uitableview, tabbar, tabbarcontroller

这是一个奇怪的错误，据我所知，这可能只是 Xcode 中的一个问题。我有一个标签栏控制器，其中第一个视图是一个 UITableView （显然）有许多单元格。当您选择一个单元格时，我在 MainStoryboard 上设置了一个 segue 以转到详细视图控制器。我希望在进入详细视图时隐藏标签栏，所以我进入情节提要，选择我的详细视图，然后在以“模拟指标”开头的编辑器屏幕中单击“在推送时隐藏底部栏”。

一切正常，除了当我点击一个单元格时，UITableView 屏幕顶部会闪烁一个黑条，将 tableview 单元格放下（好像单元格在底部的选项卡栏下方），就在之前屏幕推到详细视图。这种影响根本没有害处，但它非常令人不安，我想把它弄平。

我发现的唯一解决方法是取消选中情节提要上的“按下时隐藏底部栏”选项。这确实消除了黑条闪烁，但是当我进入详细视图时，标签栏当然会留在屏幕上，这是我不想要的。

有任何想法吗？

为了完整起见，我继续跑

```
[self.navigationController setToolbarHidden:YES animated: YES]; 
```

在详细视图控制器的 viewWillAppear 方法上（甚至尝试使用故事板选项打开和关闭），但没有区别。工具栏确实隐藏得很好，但我仍然在顶部看到那条黑线。太奇怪了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:33:57.600

我知道为时已晚！！！我遇到了同样的问题。看起来视图的自动调整大小掩码与 UIViewAutoresizingFlexibleTopMargin 不正确。我在 xib 文件中检查了这一点。如果您尝试在代码中执行此操作，请确保此标志 -UIViewAutoresizingFlexibleTopMargin - 不包含在自动调整大小掩码中。

希望这对将来的某些人有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-29T05:58:08.990

我知道这有点晚了，但我有同样的问题，我无法用以前的任何答案来解决它。（我想这是 non 被接受的原因）。

问题是`view`SecondViewController 的大小与前一个 ViewController 的视图大小相同，因此太小而无法放入隐藏工具栏的 ViewController 中。这就是为什么`UITabBarController`当转换发生时，a 的黑色背景在顶部可见，并且在`viewDidAppear`视图上会以正确的大小拉伸。

对我来说，将根 UITabBarController 子类化并将背景颜色设置为与 SecondViewController 相同的背景颜色会有所帮助。

```
class RootViewController: UITabBarController {

    override func viewDidLoad() {
        super.viewDidLoad()

        self.view.backgroundColor = Style.backgroundColor
    }
} 
```

然后您可以在情节提要中选中复选框，它看起来没问题。

附言

如果您有一些视图，即视图底部的位置，则需要设置底部约束，使它们小 49（因为这是工具栏的高度），然后`viewDidAppear`设置右约束。

例如：
我的视图需要距离底部边缘 44 像素。之前，我将约束设置为 44，并且我对该视图有一些奇怪的行为。它被放置到高度，然后跳到正确的位置。
我通过将约束设置为 -5 *(44-49)*来解决此问题，然后`viewDidAppear`将约束设置回 44。现在我具有该视图的正常行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T04:45:57.700

哇，我现在也遇到了同样的问题，非常痛苦，网上没有关于它的信息。

无论如何，对我来说，一个简单的解决方法是更改​​当前视图的 Frame，将 y 坐标向上移动，并使标签栏的高度变大。如果在将新视图推送到导航控制器后直接完成，这可以解决问题。此外，之后无需修复 Frame（再次显示视图时必须更新它）。

单触代码：

```
UIViewController viewControllerToPush = new MyViewController();
viewControllerToPush.HidesBottomBarWhenPushed = true; // I had this in the MyViewController's constructor, doesn't make any difference
this.NavigationController.PushViewController(viewControllerToPush, true);
float offset = this.TabBarController.TabBar.Frame.Height;
this.View.Frame = new System.Drawing.RectangleF(0, -offset, this.View.Frame.Width, this.View.Frame.Height + offset); 
```

Objective C 代码（未经测试，只是 monotouch 代码的翻译）：

```
UIViewController *viewControllerToPush = [MyViewController new];
viewControllerToPush.hidesBottomBarWhenPushed = YES;    viewControllerToPush.hidesBottomBarWhenPushed = YES;
float offset = self.tabBarController.tabBar.frame.size.height;  float offset = self.tabBarController.tabBar.frame.size.height;
self.view.frame = CGRectMake(0, -offset, self.view.frame.width, self.view.frame.height + offset);   self.view.frame = CGRectMake(0, -offset, self.view.frame.size.width, self.view.frame.size.height + offset); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T09:34:15.650

在 detailViewController 的 viewWillAppear 中执行此操作，它应该可以正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-02T21:31:23.623

子类你的导航控制器，或者只是找到导航栏

```
override func viewDidAppear(animated: Bool) {
    super.viewDidAppear(animated)
    let backdropEffectView = navigationBar.subviews[0].subviews[0].subviews[0] //_UIBackdropEffectView
    let visualEffectView: UIVisualEffectView = UIVisualEffectView(effect: UIBlurEffect(style: .Light))
    visualEffectView.frame = backdropEffectView.frame
    backdropEffectView.superview?.insertSubview(visualEffectView, aboveSubview: backdropEffectView)
    backdropEffectView.removeFromSuperview()
} 
```

# html - 如何解决这个 HTML/CSS 错误？

> ID：13083925
> 
> 赞同：1
> 
> 时间：2012-10-26T09:04:32.297
> 
> 标签：html, css, jsp

这是一个相当复杂的页面，其中的逻辑和标签看起来像这样（请不要担心脚本，它只是用于测试：

```
<div id="avd" <%if(request.getParameter("s")==null || !request.getParameter("s").equals("avd")) { %>style="display: none;"<%} %>>
    <div class="fr10 smallg">
        F&ouml;rnamn Efternamn,<br>handl&auml;ggarkod
    </div>
    <div class="fl10"></div>
    <div class="fl20">Avdelad fr&aring;n:</div>
    <div class="fl20">
        <input type="text" id="avd_date" value="<%=ansokanInfo.getAvdf()%>" name="<%=PandoraFieldConstants.FIELD_AVDF%>"><input type="button" value="S&ouml;k" onClick="getElementById('popupA').style.display=''">
    </div>
    <div class="clear"></div>
    <div class="fl10"></div>
    <div class="fl20">Datum ingivningsdag:</div>
    <div class="fl20">
        <input type="text" id="avd_ing" value="<%=ansokanInfo.getAvdIngivningsdag()%>" name="<%=PandoraFieldConstants.FIELD_AVD_INGIVNINGSDAG%>" value="<%=ansokanInfo.getIngivningsDatum()%>">&nbsp;<a href="#"><img src="images/cal.gif" alt="" width="16" height="15" border="0" onclick="javascript:openCalWin('620','300','<%=PandoraFieldConstants.FIELD_AVD_INGIVNINGSDAG%>')">
        </a>
    </div>
</div> 
```

显示看起来像这样：

![在此处输入图像描述](../Images/783a0f3406906cfbc515ac0bb64d76d3.png)

预期的外观是这样的：

![在此处输入图像描述](../Images/ff3858e4baa865a045bff24ae6b2641f.png)

怎么了？

```
*  {font-family:arial;}

.avnamn{ 
    color: #90002b; 
    font-size: 140%; 
    display: inline; 
    vertical-align: 3%; 
    margin-left: 1%;
}

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}

.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}

.smallb{font-size: 85%;}

table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

h4{font-size: 70%;display:inline;}

h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
    text-align: left;
}

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 

.sub {background:#EAEAEA;}

.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}    

.sub_meny_search{
    position: absolute;
    right: 265px;
    font-size: 70%;
    vertical-align: text-top;
}

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
    line-height:50%;
}

.quarter{
    line-height:25%;
}

.lh10{
    line-height:10%;
}

.checkmargin {margin-right: 25px;}    
.checkmarginL {margin-left: 25px;}    

.pusher {padding-left: 15px;}
.pusherR {margin-right: 40px;}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700px; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400px;
}
.f1450 {
    width: 600px;
    float:left;
}
.f1550 {
    width: 150px;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;}

a img { border: 0; outline:0;}

.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    padding: 2px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 75%;
}

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1055px;
}

#topBar {width:100%; background-color:#EFEFDC; display:inline-block;}
#topBar h2 {float:left}
#close {position:relative; float:right;}
.fl1, .fl2, .fl5, .fl10, .fl15, .fl20, .fl22, .fl25, .fl30, .fl35, .fl40, .fl45, .fl50, .fl55, .fl60, .fl65, .fl70, .fl75, .fl80, .fl85, .fl90, .fl95, .fl100 { float: left;}
.fl1        {width: 1%;}
.fl2        {width: 2%;}
.fl5        {width: 5%;}
.fl10       {width: 10%;}
.fl13       {width: 13%;}
.fl15       {width: 15%;}
.fl20       {width: 20%;}
.fl21       {width: 21%;}
.fl22       {width: 22%;}
.fl23       {width: 23%;}
.fl24       {width: 23%;}
.fl25       {width: 25%;}
.fl30       {width: 30%;}
.fl35       {width: 35%;}
.fl40       {width: 40%;}
.fl45       {width: 45%;}
.fl50       {width: 50%;}
.fl55       {width: 55%;}
.fl60       {width: 60%;}
.fl65       {width: 65%;}
.fl70       {width: 70%;}
.fl75       {width: 75%;}
.fl80       {width: 80%;}
.fl85       {width: 85%;}
.fl90       {width: 90%;}
.fl95       {width: 95%;}
.fl100      {width: 100%;}

.fr1, .fr5, .fr10, .fr15, .fr20, .fr25, .fr30, .fr35, .fr40, .fr45, .fr50, .fr55, .fr60, .fr65, .fr70, .fr75, .fr80, .fr85, .fr90, .fr95, .fr100 {
    float: right;
    }
.fr1        {width: 1%;}    
.fr5        {width: 5%;}
.fr10       {width: 10%;}
.fr15       {width: 15%;}
.fr20       {width: 20%;}
.fr25       {width: 25%;}
.fr30       {width: 30%;}
.fr35       {width: 35%;}
.fr40       {width: 40%;}
.fr45       {width: 45%;}
.fr50       {width: 50%;}
.fr55       {width: 55%;}
.fr60       {width: 60%;}
.fr65       {width: 65%;}
.fr70       {width: 70%;}
.fr75       {width: 75%;}
.fr80       {width: 80%;}
.fr85       {width: 85%;}
.fr90       {width: 90%;}
.fr95       {width: 95%;}
.fr100      {width: 100%;}

.clearL     {clear: left;}
.clearR     {clear: right;}
.clear      {clear: both;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:12:30.900

看起来您需要在这些行之前清除浮动：

```
<div class="fl10"></div>
<div class="fl20">Avdelad fr&aring;n:</div> 
```

就像你在这里做的那样添加`<div class="clear"></div>`：

```
<div class="clear"></div>
<div class="fl10"></div>
<div class="fl20">Datum ingivningsdag:</div> 
```

或者更好的是，将`.clearL`类添加到 first `div`，如下所示：

```
<div class="fl10 clearL"></div>
<div class="fl20">Avdelad fr&aring;n:</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:32:44.043

这不是答案，而是建议：

如果您要使用行而不是混淆清除，那么您将更容易控制和维护您的代码，而且在回读 html 时使用语义标记总是有帮助的：

```
<div class="field-row">
  <label for="my_field">
    My Field Label
  </label>
  <div class="field-wrapper">
    <input id="my_field" name="my_field" type="text" />
  </div>
</div>
<div class="field-row">
  <!-- You can continue each field in another row //-->
</div> 
```

通过使用 HTML 的父子属性，您可以通过定位和布局获得额外的好处 - 即您可以使用填充或边距移动整行，或者您可以再次将整行浮动到另一个元素周围。

然后要“清除”每一行以使它们正确放置，您需要做的就是以下几点：

```
.field-row {
  overflow: hidden;
  /* 
     overflow hidden is easier to work with than `clear:both` 
     mainly because you can set it on the parent and it is the
     parent that gets corrected. clearing tends to affect the
     surrounding elements, which makes it tricky to follow.
  */
}

.field-row label {
  display: block;
  float: left;
}

.field-wrapper label {
  float: left;
} 
```

# php - symfony 1.4 和奇怪的 403 禁止错误

> ID：13083928
> 
> 赞同：2
> 
> 时间：2012-10-26T09:04:44.673
> 
> 标签：php, apache, symfony-1.4

我们有开发服务器和生产服务器，它只发生在生产服务器中。

当我们使用 访问该站点时`http://[domain].com/index.php`，它工作正常。

但是如果我们在末尾使用斜线访问`http://[domain].com/index.php/`，它会显示`403 forbidden error`。

奇怪的是，`403 forbidden error`当有`/xxx.php/`or`/xxx.asp/`或时，它也会显示`/xxx.js/`。`index.php`在这些情况下，它似乎不会重定向到。

如果我们访问 like `/abc/`or `/abc.a/`or etc，它会重定向到`index.php`并显示`symfony 404 error`哪个是正确的。

有没有人经历过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:00:30.577

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

将其放在您的 .htaccess 文件根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:33:07.317

您是否尝试过`.htaccess`在您的网络根目录中修改您的文件？即添加以下规则：

```
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

这样，`URL`以斜杠结尾的 s 将被规范化，就好像没有它一样

# c++ - Mac OS X 的 C++ air 本机扩展中的异常

> ID：13083929
> 
> 赞同：0
> 
> 时间：2012-10-26T09:04:53.843
> 
> 标签：c++, xcode, macos, stdvector, air-native-extension

我为 ios 和 mac os x 开发了 air 扩展。

我在 ios 和 mac 上使用相同的代码。

对于ios来说一切都好。

但在 mac - 有问题。

在扩展中，我使用 std::vector。代码示例：

```
vector<Type*>* types;
types = new vector<Type*>();

Type* type = new Type();
types->push_back(type); 
```

应用程序按行崩溃：

```
types->push_back(type); 
```

我尝试添加 try/catch 块 - 但应用程序也崩溃了。

我不知道出了什么问题。此代码在 ios 和 mac 的控制台应用程序中运行良好。

# javascript - Visual Studio JavaScript 调试极慢

> ID：13083930
> 
> 赞同：5
> 
> 时间：2012-10-26T09:04:55.590
> 
> 标签：javascript, debugging, windows-8, visual-studio-2012, performance

我在 Visual Studio 的 Internet Explorer 中调试 JavaScript 时遇到了最奇怪的问题。

如果我在 JavaScript 代码中设置断点并在调试模式下运行 (ASP.NET MVC) 项目，我会很好地击中断点。但在那之后不久，在断点处，我的整个计算机几乎锁定了 10-30 秒。在此期间，我可以移动鼠标指针，但不能与任何东西交互。如果我最终单击某些东西，计算机就会开始发出哔哔声。10-30 秒后一切恢复正常。

直到几天前，调试工作都很好。不同的 ASP.NET MVC 项目显示相同的行为。我在 Windows 8 Enterprise 64 位上运行 Internet Explorer 10 和 Visual Studio 2012。我没有第三方防病毒软件（只有 Windows Defender）。我没有智能跟踪。我只有一个断点，所有其他的都被删除。我试过删除我的 .suo 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:49:42.363

当网站上的脚本通常运行时间过长时，我的浏览器 (ff) 会锁定我。然后它会抛出一个停止脚本提示。如果它是导致锁定的同一个错误脚本，那么您可以在三台计算机上复制它是有道理的。我怀疑如果你在 win 7 机器上尝试它会很重要，win xp，但如果你认为系统配置是一个原因，那么这些都是显而易见的测试。此外，请尝试在脚本的前面设置断点，以了解锁定的内容/时间。

另一方面，我总是在 firefox 中使用 firebug 调试 javascript，并取得了巨大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:05:45.553

我遇到了同样的问题，结果证明是 Intellisense。Intellisense 会阻塞大型 Javascript 文件。即使我没有做需要 Intellisense 的事情，也会发生减速。

我最终将它们分开并引用其他文件：

```
/// <reference path="/scripts/<other>.js" /> 
```

这允许自动完成跨文件工作并防止锁定。

# android - Tegra 2 的 OpenCV 优化

> ID：13083932
> 
> 赞同：1
> 
> 时间：2012-10-26T09:05:26.390
> 
> 标签：android, opencv, glsl, tegra

在我试图找到一种在平板电脑的 GPU 上实现一些计算机视觉算法的方法时，我遇到了 OCV 2.4 包 NVIDIA Tegra 3。来自这篇文章：[Android 上 OpenCV 的优化（neon-instruction，tegra 上的 GLSL 3 )](https://stackoverflow.com/questions/12561462/optimization-of-opencv-on-android-neon-instruction-glsl-on-tegra-3?rq=1)我知道这个 OpenCV 包包含针对 NVIDIA Tegra 3 的 GLSL 和 NEON 优化。有人知道是否有针对 Tegra 2 进行优化的 OpenCV 包吗？我的平板电脑有 Android 3.1 作为操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:52:05.483

从[非常重要的论文](http://queue.acm.org/detail.cfm?id=2206309)来看，tegra 2 不支持 neon 指令，所以我认为 OpenCV 的 CPU 并行性加速不在 tegra 2 上。对于 GPU 加速，我想只要 Tegra 2 支持 OpenGL ES 2.0，所以我认为它已启用。

# sql - SQL 多个 REPLACE 案例

> ID：13083933
> 
> 赞同：0
> 
> 时间：2012-10-26T09:05:34.840
> 
> 标签：sql, sql-server

我在 MSSQL DB 中有一个带有*varchar事务标识符的事务引用表。*

```
eg. 20121018A436712SF2CPMQ7177 
```

但在某些交易中，存在一些**特殊标识符**形式的噪声，例如

```
1114
1160
H600
....
....
etc 
```

我正在考虑使用*REPLACE*语句来替换它们

```
select REPLACE (identifier, '%1114%', '') from Transactions 
```

但我不知道如何使用所有这些条件进行*替换。*

任何帮助都感激不尽。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:21:00.343

我会建立一个“特殊标识符”表并填充它，例如

```
create table special_identifiers (
   id int identity not null primary key clustered,
   key varchar(10) not null unique
); 
```

然后，您将在 SELECT 中执行删除这些特殊 ID 的操作

```
 SELECT i.col1, i.col2,
           CASE WHEN si.key IS NOT NULL then '' ELSE i.identifier END identifier
      FROM Transactions i
 LEFT JOIN special_identifiers si on si.key = i.identifier 
```

如果您确实需要使用 LIKE，这可以很容易地扩展，例如 id 中的任何地方都应该删除它，例如

```
 LEFT JOIN special_identifiers si on i.identifier LIKE '%' + si.key + '%' 
```

尽管我只是将 % 添加到`key`列本身以获得更大的灵活性。

最后，如果您根本无法持久化表格，您可以随时虚拟弥补，例如

```
 SELECT i.col1, i.col2,
           CASE WHEN si.key IS NOT NULL then '' ELSE i.identifier END identifier
      FROM Transactions i
 LEFT JOIN (select '1114' key UNION ALL
            select '1160') si on si.key = i.identifier 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:01:28.720

如果你`Transaction identifier`是一个固定长度的字符串，比如说12个字符，你可以选择最右边的12个字符为；

```
SELECT RIGHT(identifier_column,12) 
```

# matlab - 在matlab中重新格式化矩阵

> ID：13083944
> 
> 赞同：0
> 
> 时间：2012-10-26T09:06:37.153
> 
> 标签：matlab, matrix

这是我面临的问题的一个简单示例：

```
depth = [0:1:20]';
data = rand(1,length(depth))';

d = [depth,data];
d = [d;d;d]; 
```

考虑矩阵'd'。在这里，我们在第一列中有深度，然后在第 2 列中记录了该深度的温度测量值（在本例中，我们有 3 天的数据）。我怎样才能改变这个矩阵，使每一列代表一个特定的深度，每一行代表时间。所以，最后我应该有 3 行 21 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:56:35.340

如果我理解正确，您的数组`d`在 1:21 行中包含第 1 天的数据，在第 22:42 行中包含第 2 天的数据，依此类推。第 1 列`d`保存深度（3 次），第 2 列保存测量值。

以您想要的形式获得结果的一种方法是执行：

```
d2 = reshape(d(:,2),21,3)'; % note the ' for transposition here 
```

这将为您留下一个包含 3 行和 21 列的数组。每列代表一个深度的测量值，每一行代表一天的测量值。

# c - 如何将字符 [] 转换为十六进制？C

> ID：13083947
> 
> 赞同：0
> 
> 时间：2012-10-26T09:07:05.563
> 
> 标签：c, string, char, hex

所以我在我的项目中遇到了障碍。我想要做的是找出一种方法来获取代表标志的四个单独的二进制字符。现在我的最后一个任务是把这四个标志放在一个 char[] 中，这一点都不难。但是现在，我想取四个并将其转换为十六进制。

例如：

```
O = 1;
C = 1;
Z = 0;
N = 0;

char flags[5];
flags[0] = O;
flags[1] = C;
flags[2] = Z;
flags[3] = N; 
```

现在我想制作一个字符串或可以将上面的内容转换为十六进制的东西。因此，例如，我想将 1100 转换为 0xC 的十六进制

现在我试着先把它变成一个字符串然后解析它，但我现在很困惑和迷路。我只是看不到获得正确的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:14:16.733

```
int flags;
flags = (O << 3) | (C << 2) | (Z << 1) | N;
sprintf(buffer, "0x%02X", 0xff & flags); 
```

`flags`定义了一个`int`包含所有标志的单个变量。

`buffer`是一个足够大的 char 数组。

在这种`0xff & ..`情况下不需要，但如果您的 flags 变量可能变为负数并且您仍然只想要一个字节输出（2 个十六进制数字），则可能有一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:28:07.713

无符号字符标志 = 0；标志 = ((O << 3) | (C << 2) | (Z << 1) | N);

现在标志包含您需要的十六进制值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:28:19.680

放置标志[4]="\0"

我们可以有一个新的 variable-char 指针指向这个字符数组。

那么你可以使用`sprintf(newArray[i], "%x", flags[i]);`

这会将每个字符生成为 newArray 字符串中的 HEX，我们可以通过打印字符串来获得输出。`printf("%s\n",newArray);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-21T00:25:51.260

您可以使用此代码将字节 [] 转换为十六进制字符串

将您的 char[] 转换为 byte[] 或根据需要修改代码:)

```
 /// <summary>
    /// Converts a byte array to a hex string. For example: {10,11} = "0A 0B"
    /// </summary>
    public static string ByteToHex(byte[] data)
    {
        StringBuilder sb = new StringBuilder();

        foreach (byte b in data)
        {
            string hex = ByteToHex(b);
            sb.Append(hex);
            sb.Append(" ");
        }

        if (sb.Length > 0)
            sb.Remove(sb.Length - 1, 1);

        return sb.ToString();
    }

    /// <summary>
    /// Converts the byte to a hex string. For example: "10" = "0A";
    /// </summary>
    public static string ByteToHex(byte b)
    {
        string sB = b.ToString(ConstantReadOnly.HexStringFormat, CultureInfo.InvariantCulture);

        if (sB.Length == 1)
            sB = "0" + sB;

        return sB;
    } 
```

# c# - 在C#中组合字符串中的相似字符

> ID：13083952
> 
> 赞同：8
> 
> 时间：2012-10-26T09:07:24.233
> 
> 标签：c#, linq

我有一个包含整数的列表列表（此列表可以是任意长度，并且可以包含任意数量的整数：

```
{{1,2}, {3,4}, {2,4}, {9,10}, {9,12,13,14}} 
```

我接下来要做的是组合任何整数与任何其他列表中的任何整数匹配的列表，在这种情况下：

```
 result = {{1,2,3,4}, {9,10,12,13,14}} 
```

我尝试了许多不同的方法，但被困在一个优雅的解决方案中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T09:29:46.107

如果您的意思是“在有交叉点时合并”，那么可能类似于下面的输出：

```
{1,2,3,4}
{9,10,12} 
```

请注意，它还在您的编辑中通过了测试，并带有输出：

```
{1,2,3,4}
{9,10,12,13,14} 
```

代码：

```
static class Program {
    static void Main()
    {
        var sets = new SetCombiner<int> {
            {1,2},{3,4},{2,4},{9,10},{9,12}
        };
        sets.Combine();
        foreach (var set in sets)
        {
            // edited for unity: original implementation
            // Console.WriteLine("{" +
            //    string.Join(",", set.OrderBy(x => x)) + "}");

            StringBuilder sb = new StringBuilder();
            foreach(int i in set.OrderBy(x => x)) {
                if(sb.Length != 0) sb.Append(',');
                sb.Append(i);
            }
            Console.WriteLine("{" + sb + "}");
        }
    }
}

class SetCombiner<T> : List<HashSet<T>>
{
    public void Add(params T[] values)
    {
        Add(new HashSet<T>(values));
    }
    public void Combine()
    {
        int priorCount;
        do
        {
            priorCount = this.Count;
            for (int i = Count - 1; i >= 0; i--)
            {
                if (i >= Count) continue; // watch we haven't removed
                int formed = i;
                for (int j = formed - 1; j >= 0; j--)
                {
                    if (this[formed].Any(this[j].Contains))
                    { // an intersection exists; merge and remove
                        this[j].UnionWith(this[formed]);
                        this.RemoveAt(formed);
                        formed = j;
                    }
                }
            }
        } while (priorCount != this.Count); // making progress
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:39:54.627

构建自定义比较器：

```
public class CusComparer : IComparer<int[]>
{
    public int Compare(int[] x, int[] y)
    {
        x = x.OrderBy(i => i).ToArray();
        y = y.OrderBy(i => i).ToArray();

        for (int i = 0; i < Math.Min(x.Length, y.Length); i++ )
        {
            if (x[i] < y[i]) return -1;
            if (x[i] > y[i]) return 1;
        }

         if (x.Length < y.Length) return -1;
        if (x.Length > y.Length) return 1;

        return 0;
    }
} 
```

然后，首先通过自定义比较器订购：

```
List<int[]> input = new List<int[]>()
        {
            new[] { 3, 4 }, new[] { 1, 2 }, new[] { 2, 4 }, 
            new[] { 9, 10 }, new[] { 9, 12 }
        };

var orderedInput = input.OrderBy(x => x, new CusComparer()).ToList(); 
```

用于`Intersect.Any()`检查：

```
List<int[]> output = new List<int[]>();

int[] temp = orderedInput[0];

foreach (var arr in orderedInput.Skip(1))
{
    if (temp.Intersect(arr).Any())
        temp = temp.Union(arr).ToArray();

    else
    {
        output.Add(temp);
        temp = arr;
    }
}

output.Add(temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:51:29.757

这是一个使用 LINQ 的简单、灵活的解决方案`Aggregate`：

```
void Main()
{
    var ints = new []{new []{1,2},new []{3,4},new []{2,4},new []{9,10},new []{9,12}};
    var grouped = ints.Aggregate(new List<HashSet<int>>(), Step);

    foreach(var bucket in grouped)
        Console.WriteLine(String.Join(",", bucket.OrderBy(b => b)));
}

static List<HashSet<T>> Step<T>(List<HashSet<T>> all, IEnumerable<T> current)
{
    var bucket = new HashSet<T>();

    foreach (var c in current)
        bucket.Add(c);

    foreach (var i in all.Where(b => b.Overlaps(bucket)).ToArray())
    {
        bucket.UnionWith(i);
        all.Remove(i);
    }
    all.Add(bucket);

    return all; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T12:12:49.513

我们维护一个结果集列表 (1)。对于每个源集，删除与其相交的结果集 (2)，并添加一个新的结果集 (3)，它是已删除集和源集 (4) 的并集：

```
class Program {

    static IEnumerable<IEnumerable<T>> CombineSets<T>(
        IEnumerable<IEnumerable<T>> sets,
        IEqualityComparer<T> eq
    ) {

        var result_sets = new LinkedList<HashSet<T>>();         // 1

        foreach (var set in sets) {
            var result_set = new HashSet<T>(eq);                // 3
            foreach (var element in set) {
                result_set.Add(element);                        // 4
                var node = result_sets.First;
                while (node != null) {
                    var next = node.Next;
                    if (node.Value.Contains(element)) {         // 2
                        result_set.UnionWith(node.Value);       // 4
                        result_sets.Remove(node);               // 2
                    }
                    node = next;
                }
            }
            result_sets.AddLast(result_set);                    // 3
        }

        return result_sets;

    }

    static IEnumerable<IEnumerable<T>> CombineSets<T>(
        IEnumerable<IEnumerable<T>> src
    ) {
        return CombineSets(src, EqualityComparer<T>.Default);
    }

    static void Main(string[] args) {

        var sets = new[] {
            new[] { 1, 2 }, 
            new[] { 3, 4 }, 
            new[] { 2, 4 }, 
            new[] { 9, 10 }, 
            new[] { 9, 12, 13, 14 }
        };

        foreach (var result in CombineSets(sets))
            Console.WriteLine(
                "{{{0}}}",
                string.Join(",", result.OrderBy(x => x))
            );

    }

} 
```

这打印：

```
{1,2,3,4}
{9,10,12,13,14} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T10:00:05.277

好的，我 LINQed 了！希望这是你想要的......疯狂的一个;）

```
void Main()
{
    var matches = new List<List<ComparissonItem>> { /*Your Items*/ };

    var overall =
        from match in matches
        let matchesOne =
            (from searchItem in matches
             where searchItem.Any(item => match.Any(val => val.Matches(item) && !val.Equals(item)))
             select searchItem)
        where matchesOne.Any()
        select
            matchesOne.Union(new List<List<ComparissonItem>> { match })
            .SelectMany(item => item);

    var result = overall.Select(item => item.ToHashSet());
}

static class Extensions
{

    public static HashSet<T> ToHashSet<T>(this IEnumerable<T> enumerable)
    {
        return new HashSet<T>(enumerable);
    }
}

class ComparissonItem
{
    public int Value { get; set; }

    public bool Matches(ComparissonItem item)
    {
        /* Your matching logic*/
    }

    public override bool Equals(object obj)
    {
        var other = obj as ComparissonItem;
        return other == null ? false : this.Value == other.Value;
    }

    public override int GetHashCode()
    {
        return this.Value.GetHashCode();
    }
} 
```

# sql - sql - 三表连接

> ID：13083953
> 
> 赞同：0
> 
> 时间：2012-10-26T09:07:24.667
> 
> 标签：sql

表结构（效率不高，但我必须使用它，而且我无法更改它。）：

大学表 - UniversityName、UniversityId

BookLease 表 - BookId、UniversityId、LeaseDate

图书表 - BookId、UniversityId、类别、Page_Count。

我必须找到名称为“XYZ”的大学到目前为止已阅读/租用的总页数。这是我到目前为止所拥有的：

```
select sum(bookTable.Page_count) 
from University u
join (select bl.UniversityId AS universityId, b.page_count as Counter
       BookLease bl
       join Book bk
            on bl.BookId = bk.BookId) as bookTable
on  
     bookTable.universityId = u.UniversityId
where
     u.Name = "XYZ" 
```

这似乎是错误和低效的。是吗？有没有更好的方法来写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:10:09.353

你可以这样做：

```
select 
   sum(b.page_count) as pages_read
   , count(bl.bookid) as no_leased
from university u 
   inner join book b on b.universityid = u.universityid
   inner join booklease bl on bl.bookid = b.bookid
                           and bl.universityid = u.universityid
where u.name = 'XYZ'
and bl.lease_date > [some lease date] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:14:33.577

只需直接加入表，而不是子查询：

```
select
  sum(bk.Page_count) 
from
  University u
  inner join BookLease bl on bl.UniversityId = u.UniversityId
  inner join Book bk on bk.BookId = bl.BookId
where
  u.Name = "XYZ" 
```

# html - Kinetic.js don't lose grip on mouse out

> ID：13083960
> 
> 赞同：0
> 
> 时间：2012-10-26T09:07:48.947
> 
> 标签：html, html5-canvas, kineticjs

When you drag an object and mouse is out of rendering area, dragging stops (firing an event) and user loses a grip.

It's extremelly inconvenient, taking into account that all other technologies (Flash, raw HTML5 Canvas, etc) allows to save the grip even if mouse is out.

Is there a way to solve the problem?

**UPDATE:** Up to the moment solved the problem by changing library file and binding listeners to the document, not to the container. I know that it's bad to hack into library files, but after inspecting the library's source code I haven't found out way around.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:19:22.250

你可以检查元素是否看不见，如果是的话，把它带回来：

```
shape.on('dragend', function() {
 var pos = shape.getPosition();
 var layer = pos.getLayer();
 if (pos.y < 0) {
  pos.y = 0;
 }
 var maxY = layer.getHeight() - shape.getHeight();
 if (pos.y > maxY) {
  pos.y = maxY
 }
 shape.setPosition(pos);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:11:01.007

看[`element.setCapture()`](https://developer.mozilla.org/en-US/docs/DOM/element.setCapture)。您可以从鼠标事件的事件处理程序中调用它，例如。`mousedown`：

```
function mouseDown(e) {
    e.target.setCapture();
    e.target.addEventListener("mousemove", mouseMoved, false);
} 
```

尽管浏览器支持有点参差不齐（IE 和 Firefox 支持它，不确定其他浏览器），但对于跨浏览器使用，您将不得不退回到您已经遇到的文档方法的绑定。

# imageview - ImageView OnTouchListener not giving item id

> ID：13083961
> 
> 赞同：1
> 
> 时间：2012-10-26T09:07:55.073
> 
> 标签：imageview, ontouchlistener

The simplified onCreate code below effectively creates dynamically a matrix of ImageViews on the basis of data in a file.

I (think) a listener is attached to each ImageView item. However, when I try to get the id of an item, v.getId() always returns -1.

What am I doing wrong?

```
public void onCreate(Bundle savedInstanceState) 
{
  super.onCreate(savedInstanceState);       
  this.setContentView(R.layout.packlevel);
  Resources resources = this.getResources();

  /*  
    process file data

  */

  for (int i = 0; i < 24; i++)
  {
    if (i % 6 == 0)
    {
      row = new TableRow(this);
      tableLayout.addView(row);
    }

    ImageView iv = new ImageView(this);

    int resourceId = resources.getIdentifier(tileNames[tilesMatrix[i]], "drawable",
getPackageName());
    iv.setImageResource( resourceId );
    iv.setOnTouchListener(this);

    row.addView(iv);
  } 
}    

public boolean onTouch(View v, MotionEvent event) 
{
  int tileId = v.getId();
} 
```

# visual-c++ - 使用带有 /MT 标志的 MSVC 编译 jrtplib

> ID：13083962
> 
> 赞同：2
> 
> 时间：2012-10-26T09:07:58.413
> 
> 标签：visual-c++, cmake

我正在使用提供的 CMakeLists.txt 文件，其中包含上面的代码。我想要做的是使用 /MT 标志编译库。有人知道该怎么做吗？

提前致谢，

这里的代码：

```
cmake_minimum_required(VERSION 2.6)

project(jrtplib)
set(VERSION 3.9.1)

 SET(CMAKE_C_FLAGS "/nologo /W3 /GX /Gy /YX")
       SET(CMAKE_C_FLAGS_DEBUG "/MTd /Z7 /Od")
       SET(CMAKE_C_FLAGS_RELEASE "/MT /O2")
       SET(CMAKE_C_FLAGS_MINSIZEREL "/MT /O2")
       SET(CMAKE_C_FLAGS_RELWITHDEBINFO "/MTd /Z7 /Od")

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake")

set (_DEFAULT_LIBRARY_INSTALL_DIR lib)
if (EXISTS "${CMAKE_INSTALL_PREFIX}/lib32/" AND CMAKE_SIZEOF_VOID_P EQUAL 4)
    set (_DEFAULT_LIBRARY_INSTALL_DIR lib32)
elseif (EXISTS "${CMAKE_INSTALL_PREFIX}/lib64/" AND CMAKE_SIZEOF_VOID_P EQUAL 8)
    set (_DEFAULT_LIBRARY_INSTALL_DIR lib64)
endif ()

set(LIBRARY_INSTALL_DIR "${_DEFAULT_LIBRARY_INSTALL_DIR}" CACHE PATH "Library installation directory")
if(NOT IS_ABSOLUTE "${LIBRARY_INSTALL_DIR}")
    set(LIBRARY_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/${LIBRARY_INSTALL_DIR}")
endif()

include(CheckCXXCompilerFlag)
include(CheckIncludeFile)
include(CheckIncludeFileCXX)
include(CheckCXXSourceCompiles)
include(TestBigEndian)
include(${PROJECT_SOURCE_DIR}/cmake/Macros.cmake)

find_package(JThread)

set(JRTPLIB_LINK_LIBS "")
set(JRTPLIB_INTERNAL_INCLUDES "")
set(JRTPLIB_EXTERNAL_INCLUDES "")

add_additional_stuff(JRTPLIB_EXTERNAL_INCLUDES JRTPLIB_LINK_LIBS)

jrtplib_support_option("Support SDES PRIV items" JRTPLIB_SUPPORT_SDESPRIV RTP_SUPPORT_SDESPRIV ON "// No support for SDES PRIV items")
jrtplib_support_option("Support the probation mechanism for a new source" JRTPLIB_SUPPORT_PROBATION RTP_SUPPORT_PROBATION ON "// Do not wait for a number of consecutive packets to validate source")
jrtplib_support_option("Support sending RTCP APP packets" JRTPLIB_SUPPORT_SENDAPP RTP_SUPPORT_SENDAPP ON "// No direct support for sending RTCP APP packets")
jrtplib_support_option("Support sending unknown RTCP packets" JRTPLIB_SUPPORT_RTCPUNKNOWN RTP_SUPPORT_RTCPUNKNOWN OFF "// No support for sending unknown RTCP packets")
jrtplib_support_option("Support memory management mechanism" JRTPLIB_SUPPORT_MEMORYMGMT RTP_SUPPORT_MEMORYMANAGEMENT ON "// No memory management support")

jrtplib_include_test(sys/filio.h RTP_HAVE_SYS_FILIO "// Don't have <sys/filio.h>")
jrtplib_include_test(sys/sockio.h RTP_HAVE_SYS_SOCKIO "// Don't have <sys/sockio.h>")
jrtplib_include_test(ifaddrs.h RTP_SUPPORT_IFADDRS "// No ifaddrs support")

if (JTHREAD_FOUND)
    set(V "ON")
else (JTHREAD_FOUND)
    set(V "OFF")
endif (JTHREAD_FOUND)

option(JTHREAD_ENABLED "Thread support" ${V})
if (JTHREAD_ENABLED)
    set (RTP_SUPPORT_THREAD "#define RTP_SUPPORT_THREAD")
    if (JTHREAD_FOUND)
        save_paths(JRTPLIB_EXTERNAL_INCLUDES "${JTHREAD_INCLUDE_DIRS}")
        save_paths(JRTPLIB_LINK_LIBS "${JTHREAD_LIBRARIES}")
    endif(JTHREAD_FOUND)
else (JTHREAD_ENABLED)
    set (RTP_SUPPORT_THREAD "// No support for JThread was enabled")
endif (JTHREAD_ENABLED)

if (CMAKE_CROSSCOMPILING)
    option (JRTPLIB_USE_BIGENDIAN "Target platform is big endian" ON)
    if (JRTPLIB_USE_BIGENDIAN)
        set(RTP_ENDIAN "#define RTP_BIG_ENDIAN")
    else (JRTPLIB_USE_BIGENDIAN)
        set(RTP_ENDIAN "// Little endian system")
    endif (JRTPLIB_USE_BIGENDIAN)
else (CMAKE_CROSSCOMPILING)
    test_big_endian(JRTPLIB_BIGENDIAN)
    if (JRTPLIB_BIGENDIAN)
        set(RTP_ENDIAN "#define RTP_BIG_ENDIAN")
    else (JRTPLIB_BIGENDIAN)
        set(RTP_ENDIAN "// Little endian system")
    endif (JRTPLIB_BIGENDIAN)
endif (CMAKE_CROSSCOMPILING)

jrtplib_test_feature(socklentest RTP_SOCKLENTYPE_UINT TRUE "// socklen_t is 'int'")
jrtplib_test_feature(ipv4mcasttest RTP_SUPPORT_IPV4MULTICAST FALSE "// No IPv4 multicasting support")
jrtplib_test_feature(salentest RTP_HAVE_SOCKADDR_LEN FALSE "// No sa_len member in struct sockaddr")
jrtplib_test_feature(getloginrtest RTP_SUPPORT_GETLOGINR FALSE "// Not using getlogin_r")
jrtplib_test_feature(ipv6test RTP_SUPPORT_IPV6 FALSE "// No IPv6 support")
jrtplib_test_feature(ipv6mcasttest RTP_SUPPORT_IPV6MULTICAST FALSE "// No IPv6 multicasting support")

check_cxx_source_compiles("#include <stdint.h>\n#include <sys/types.h>\nint main(void) { size_t a = 0 ; size_t b = a; uint32_t x = 0; uint32_t y = x; return 0; }" JRTPLIB_STDINT)
if (JRTPLIB_STDINT)
    set(RTP_INTTYPE_HEADERS "#include <stdint.h>\n#include <sys/types.h>")
else (JRTPLIB_STDINT)
    check_cxx_source_compiles("#include <inttypes.h>\n#include <sys/types.h>\nint main(void) { uint32_t x = 0; uint32_t y = x; return 0; }" JRTPLIB_INTTYPES)
    if (JRTPLIB_INTTYPES)
        set(RTP_INTTYPE_HEADERS "#include <inttypes.h>\n#include <sys/types.h>\n")
    else (JRTPLIB_INTTYPES)
        if (NOT UNIX AND WIN32)
            set(RTP_INTTYPE_HEADERS "#include \"rtptypes_win.h\"")
        else (NOT UNIX AND WIN32)
            set(RTP_INTTYPE_HEADERS "#error Could not find header files that define types like 'uint32_t'. Please edit the file ${PROJECT_BINARY_DIR}/src/rtptypes_unix.h and make sure that the following types are defined: int8_t, uint8_t, int16_t, uint16_t, int32_t, uint32_t, int64_t, uint64_t")
            message("\n\nError: Could not find header files that define types like 'uint32_t'.\nPlease edit the file ${PROJECT_BINARY_DIR}/src/rtptypes_unix.h\nand make sure that the following types are defined: \nint8_t, uint8_t, int16_t, uint16_t, int32_t, uint32_t, int64_t, uint64_t\n\n")
        endif (NOT UNIX AND WIN32)
    endif (JRTPLIB_INTTYPES)
endif (JRTPLIB_STDINT)

if (NOT UNIX AND WIN32)
    set(RTP_WINSOCK_HEADERS "#if defined(WIN32) || defined(_WIN32_WCE)\n    #include <winsock2.h>   \n  #include <ws2tcpip.h>\n#ifndef _WIN32_WCE\n #include <sys/types.h>\n#endif // _WIN32_WCE\n#endif // WIN32 || _WIN32_WCE\n")
endif (NOT UNIX AND WIN32)

if (NOT UNIX)
    set(JRTPLIB_COMPILE_STATIC ON CACHE BOOL "Flag indicating if a static library should be built, or a dynamic one")
    list(APPEND JRTPLIB_LINK_LIBS "ws2_32")
endif (NOT UNIX)

if (UNIX OR JRTPLIB_COMPILE_STATIC)
    set(JRTPLIB_IMPORT "")
    set(JRTPLIB_EXPORT "")
else (UNIX OR JRTPLIB_COMPILE_STATIC)
    set(JRTPLIB_IMPORT "__declspec(dllimport)")
    set(JRTPLIB_EXPORT "__declspec(dllexport)")
endif (UNIX OR JRTPLIB_COMPILE_STATIC)

configure_file("${PROJECT_SOURCE_DIR}/src/rtptypes.h.in" "${PROJECT_BINARY_DIR}/src/rtptypes.h")
configure_file("${PROJECT_SOURCE_DIR}/src/rtpconfig.h.in" "${PROJECT_BINARY_DIR}/src/rtpconfig.h")

save_paths(JRTPLIB_INTERNAL_INCLUDES "${PROJECT_SOURCE_DIR}/src" "${PROJECT_BINARY_DIR}/src")

add_subdirectory(src)
add_subdirectory(examples)

if (UNIX)
    get_target_property(JRTPLIB_LOCAL_LIBRARY_NAME jrtplib-shared LOCATION)
    get_filename_component(JRTPLIB_LIBNAME "${JRTPLIB_LOCAL_LIBRARY_NAME}" NAME)
    set(JRTPLIB_LIBS "${LIBRARY_INSTALL_DIR}/${JRTPLIB_LIBNAME}")
else (UNIX)
    if (JRTPLIB_COMPILE_STATIC)
        get_target_property(JRTPLIB_LOCAL_LIBRARY_NAME jrtplib-static RELEASE_LOCATION)
        get_filename_component(JRTPLIB_LIBNAME_RELEASE "${JRTPLIB_LOCAL_LIBRARY_NAME}" NAME_WE)
        get_target_property(JRTPLIB_LOCAL_LIBRARY_NAME jrtplib-static DEBUG_LOCATION)
        get_filename_component(JRTPLIB_LIBNAME_DEBUG "${JRTPLIB_LOCAL_LIBRARY_NAME}" NAME_WE)
    else (JRTPLIB_COMPILE_STATIC)
        get_target_property(JRTPLIB_LOCAL_LIBRARY_NAME jrtplib-shared RELEASE_LOCATION)
        get_filename_component(JRTPLIB_LIBNAME_RELEASE "${JRTPLIB_LOCAL_LIBRARY_NAME}" NAME_WE)
        get_target_property(JRTPLIB_LOCAL_LIBRARY_NAME jrtplib-shared DEBUG_LOCATION)
        get_filename_component(JRTPLIB_LIBNAME_DEBUG "${JRTPLIB_LOCAL_LIBRARY_NAME}" NAME_WE)
    endif (JRTPLIB_COMPILE_STATIC)
    set(JRTPLIB_LIBS optimized "${LIBRARY_INSTALL_DIR}/${JRTPLIB_LIBNAME_RELEASE}.lib" 
                 debug "${LIBRARY_INSTALL_DIR}/${JRTPLIB_LIBNAME_DEBUG}.lib")
endif (UNIX)

set(JRTPLIB_INCDIRS ${JRTPLIB_EXTERNAL_INCLUDES} ${CMAKE_INSTALL_PREFIX}/include)
set(JRTPLIB_LIBS ${JRTPLIB_LIBS} ${JRTPLIB_LINK_LIBS})
remove_empty(JRTPLIB_INCDIRS)
list(REMOVE_DUPLICATES JRTPLIB_INCDIRS)
remove_empty(JRTPLIB_LIBS)

foreach(ARG ${JRTPLIB_LIBS})
    set(JRTPLIB_LIBS_CMAKECONFIG "${JRTPLIB_LIBS_CMAKECONFIG} \"${ARG}\"")
endforeach()
foreach(ARG ${JRTPLIB_INCDIRS})
    set(JRTPLIB_INCDIRS_CMAKECONFIG "${JRTPLIB_INCDIRS_CMAKECONFIG} \"${ARG}\"")
endforeach()

configure_file("${PROJECT_SOURCE_DIR}/cmake/JRTPLIBConfig.cmake.in" "${PROJECT_BINARY_DIR}/cmake/JRTPLIBConfig.cmake")
install(FILES "${PROJECT_BINARY_DIR}/cmake/JRTPLIBConfig.cmake" DESTINATION ${LIBRARY_INSTALL_DIR}/cmake/JRTPLIB)

if (UNIX)
    foreach(ARG ${JRTPLIB_LIBS})
        set(JRTPLIB_LIBS_PKGCONFIG "${JRTPLIB_LIBS_PKGCONFIG} ${ARG}")
    endforeach()
    foreach(ARG ${JRTPLIB_INCDIRS})
        set(JRTPLIB_INCDIRS_PKGCONFIG "${JRTPLIB_INCDIRS_PKGCONFIG} -I${ARG}")
    endforeach()

    configure_file(${PROJECT_SOURCE_DIR}/pkgconfig/jrtplib.pc.in ${PROJECT_BINARY_DIR}/pkgconfig/jrtplib.pc)
    install(FILES ${PROJECT_BINARY_DIR}/pkgconfig/jrtplib.pc DESTINATION ${LIBRARY_INSTALL_DIR}/pkgconfig)
endif (UNIX) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:06:12.130

向 CMAKE_C_FLAGS 和朋友添加标志是将特定标志传递给编译器的正确方法，但 CMAKE_C_* 变量仅影响 C 文件的编译。

如果项目中有任何 C++ 文件，还需要设置 CMAKE_CXX_FLAGS 和朋友。

此外，您可以在不修改 cmake-gui 或 ccmake 中的 CMakeLists 文件的情况下执行此操作。配置一次后，可以在cmake-gui或者ccmake中看到这些变量的默认值。然后，您可以直接在应用程序中更改一些变量，再次配置，然后瞧：您已经为构建树设置了标志，而无需修改任何代码。

如果您总是想要标志，那么修改代码是正确的方法。但是，如果您只是想完成构建，则可以设置标志而无需接触代码。

# python - 如何在 macos 上使用 opencv 和 python

> ID：13083963
> 
> 赞同：2
> 
> 时间：2012-10-26T09:07:58.273
> 
> 标签：python, macos, opencv, osx-snow-leopard

我正在将在 windows 上开发的 python+opencv 应用程序移植到 mac。

在 Windows 上，我的 virtualenv 站点包中有 cv2.pyd，它运行良好。

我是 mac 新手，我不明白它应该可以工作。我没有找到任何用于 opencv python 绑定的二进制文件，似乎正确的方法是使用 macport。

macport 正在复制 opts/.../site-packages 中的 cv.py 和 cv2.so。

此时如何使用呢？

我尝试手动复制这两个文件，但出现错误

```
>>> import cv
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/cv.py", line 1, in <module>
    from cv2.cv import *
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/cv2.so, 2): no suitable image found.  Did find:
        /Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/cv2.so: mach-o, but wrong architecture 
```

怎么了？

更新：正如@Vortexfive 所问：

```
$ file /Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/cv2.so
/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/cv2.so: Mach-O 64-bit dynamically linked shared library x86_64

$ file /Library/Frameworks/Python.framework/Versions/2.6/bin/python
/Library/Frameworks/Python.framework/Versions/2.6/bin/python: Mach-O universal binary with 2 architectures
/Library/Frameworks/Python.framework/Versions/2.6/bin/python (for architecture ppc):    Mach-O executable ppc
/Library/Frameworks/Python.framework/Versions/2.6/bin/python (for architecture i386):   Mach-O executable i386 
```

似乎有一个不匹配。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:15:01.977

目标架构似乎不匹配。您可以尝试使用 +universal 变体在 macports 中安装 opencv。

另一种选择是更新您的 Python 版本。我相信也为 x86_64 编译了较新的版本。

作为第三种选择，您可以在 macports 中安装带有 +python27 的 opencv。然后，您可以通过执行来选择 Python 的 macports 版本`sudo port select python27`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T01:53:46.097

就我而言，拱门匹配：

```
$ file ../../release.mac/lib/cv2.so 
../../release.mac/lib/cv2.so: Mach-O 64-bit dynamically linked shared library x86_64
$ file `which python`
/usr/bin/python: Mach-O universal binary with 2 architectures
/usr/bin/python (for architecture x86_64):  Mach-O 64-bit executable x86_64
/usr/bin/python (for architecture i386):    Mach-O executable i386 
```

但不知道 python 在 32 位模式下运行：

```
$ defaults read com.apple.versioner.python Prefer-32-Bit
1 
```

修复者：

```
$ VERSIONER_PYTHON_PREFER_32_BIT=0 python 
```

或者

```
$ defaults write com.apple.versioner.python Prefer-32-Bit -bool no 
```

# c++ - 退出 glutFullScreen()

> ID：13083967
> 
> 赞同：3
> 
> 时间：2012-10-26T09:08:08.840
> 
> 标签：c++, opengl, glut

我不明白为什么当我按“f”时它进入全屏但没有退出全屏。在这个方法的开始，我已经设置`bool fullscreen = false;`

这是我的切换代码：

```
case 'f': //toggle screenmode
    if(!fullscreen){
        glutFullScreen();
        fullscreen = true;
    } else if(fullscreen){
        glutReshapeWindow(1200, 900);
        glutPositionWindow(0,0);
        fullscreen = false;
    }
    break; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T09:43:23.437

> 在这个方法的顶部，我设置了 bool fullscreen = false;

每次你按下一个键，GLUT 都会调用你的键盘处理程序。在键盘处理程序的顶部，您创建一个`bool`名为的变量`fullscreen`并将其值设置为`false`. *无论*您是否处于全屏模式，都会发生这种情况。每按一次键，*就会发生这种情况。*

如果您想保留一个*实际*跟踪您当前是否全屏的布尔变量，那么您需要使用*全局*. 而且你不需要*在*函数开始时设置它。您在创建窗口时设置一次，仅在更改窗口的全屏状态时再次设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-05T14:51:30.047

**恢复原始窗口大小**

... 将 ReshapeWindow 和 PositionWindow 的调用顺序切换为

```
glutPositionWindow(0,0);
glutReshapeWindow(1200, 900); 
```

否则它将回到窗口模式，但不适应您指定的窗口大小！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:48:21.167

问题不在您上面发布的代码中，因为根据[glutFullScreen 规范](http://www.opengl.org/resources/libraries/glut/spec3/node24.html)，一旦调用 glutReshapeWindow 或 glutPositionWindow，窗口应该退出全屏模式。

> 在这个方法的顶部，我设置了 bool fullscreen = false;

我敢打赌，您将其设置在同一个函数中（而不是作为全局变量），当您按 f 时，该变量始终为假

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T00:28:39.520

您必须定义一个全局变量，而不是在方法的开头定义 bool。否则每次调用该方法时，它会将全屏布尔值设置为 0，并认为它不是处于全屏模式。此外，您可能不想接受 euphrat 的回答，他对方法组织提出了一个有效的观点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-02T15:50:16.847

试试这个：

```
case 'f': //toggle screenmode
    fullScreen = !fullScreen;
    if (fullScreen) {
        glutFullScreen();
    } else {
        glutReshapeWindow(1200, 900);
        glutPositionWindow(0,0);
    }
    break; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-28T16:28:19.360

虽然它可能无法直接回答这个问题，但我发现它是发布全屏和退出源代码的好地方。

# 使用 <GL/glut.h> 切换和恢复全屏

我的游戏.c

```
...
glutSpecialFunc(handleSpecial);

void handleSpecial(int key, int x, int y) {
  oglHandleFullScreen(key, x, y);
}
... 
```

如果您希望改为响应键盘事件 ( `glutKeyboardFunc`)，请确保将以下签名更改`oglHandleFullScreen`为`(unsigned char key, int x, int y)`.

全屏.h

```
void oglHandleFullScreen(int key, int x, int y);
void oglWindowed(int positionX, int positionY, int width, int height);
void oglFullScreen(); 
```

全屏.c

```
#include <GL/glut.h>
#include "fullscreen.h"

int isFullScreen = 0;
int previousPosition[2] = { 0, 0 };
int previousSize[2] = { 100, 100 };

void oglHandleFullScreen(int key, int x, int y) {
  if (key != GLUT_KEY_F11) { // Respond to F11 key (glutSpecialFunc).
    return;
  }

  if (isFullScreen) {
    oglWindowed(previousPosition[0], previousPosition[1],
                previousSize[0], previousSize[1]);
  } else {
    previousPosition[0] = glutGet(GLUT_WINDOW_X);
    previousPosition[1] = glutGet(GLUT_WINDOW_Y);
    previousSize[0] = glutGet(GLUT_WINDOW_WIDTH);
    previousSize[1] = glutGet(GLUT_WINDOW_HEIGHT);
    oglFullScreen();
  }
  isFullScreen = !isFullScreen;
}

void oglWindowed(int positionX, int positionY, int width, int height) {
  glutReshapeWindow(width, height);
  glutPositionWindow(positionX, positionY);
}

void oglFullScreen() {
  glutFullScreen();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-22T14:50:49.303

在这种情况下，您可能希望在`static`之前添加一个关键字，`bool`以使该变量仅初始化一次。

更安全的方法是`fullscreen`全局化，因为`static`局部变量可能在编译器和 c++ 标准中以不同方式实现。

编辑以添加代码片段：

```
static bool fullscreen = false; 
```

这应该解决每次调用函数时初始化变量的问题，并且按照 c++11 标准应该是线程安全的

（许多编译器可能会另有说法。根据另一个问题的接受答案：Visual Studio 仅支持 VS2015 中的 c++11 的此功能：[Is static init thread-safe with VC2010?](https://stackoverflow.com/questions/10585928/is-static-init-thread-safe-with-vc2010?rq=1)）

更好的选择可能是使用全局变量（包装到一个类中不适合这个目的）。

编辑：此外，尽管语法简单，但这个 c++11 功能在频繁调用时代价高昂。（请参阅[C++11 中线程安全局部静态变量初始化的成本？](https://stackoverflow.com/questions/38391014/cost-of-thread-safe-local-static-variable-initialization-in-c11)）

（但是，按下键并不像在高 FPS 下绘制顶点那样频繁......当性能关键时不要使用它......）

# c - 有人可以解释为什么会出现段错误（C 编程）吗？

> ID：13083968
> 
> 赞同：5
> 
> 时间：2012-10-26T09:08:11.647
> 
> 标签：c, segmentation-fault

```
int load_byte(int memory[],int address) {
//This function works by finding the appropriate word then masking
//to obtain the relevant byte
int index,section;

    switch (address>>28) {
        case 0:
            index = address - START_ADDRESS;
            printf("index = %d",index);
        case 1:
            index = address - START_DATA_ADDRESS;
        case 7:
            index = address - START_STACK_ADDRESS;
   }

    section = index%4;
    index = index/4;
    switch (section) {
    case 0:
        return memory[index]&0x000000ff;
    case 1:
        return (memory[index]&0x0000ff00)>>8;
    case 2:
        return (memory[index]&0x00ff0000)>>16;
    case 3:
        return (memory[index]&0xff000000)>>24;
    } 
```

}

START_ADDRESS 的值为 0x00400000，我使用的示例地址是 0x00400002，只是这个函数一直给我一个段错误，不太明白为什么，因为有问题的数组的大小为 1000。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T09:16:00.787

您的第一个开关看起来很奇怪，只处理了 0、1 和 7。并且每个案例的结尾都没有`break;`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T09:19:01.097

编码：

```
switch (address>>28) {
    case 0:
        index = address - START_ADDRESS;
        printf("index = %d",index);
    case 1:
        index = address - START_DATA_ADDRESS;
    case 7:
        index = address - START_STACK_ADDRESS;
    } 
```

由于`address`is `0x00400002`，所以`switch`将从 开始执行，并且每个中都`case 0`没有任何代码，所有代码都将运行。也就是说，最终意志等于。`break``case X``index``address - START_STACK_ADDRESS`

也许这就是原因。

尝试在`break`s 之间添加`case`s。

```
switch (address>>28) {
    case 0:
        index = address - START_ADDRESS;
        printf("index = %d",index);
        break;
    case 1:
        index = address - START_DATA_ADDRESS;
        break;
    case 7:
        index = address - START_STACK_ADDRESS;
} 
```

# java - 发现 derby 的可用端口

> ID：13083971
> 
> 赞同：1
> 
> 时间：2012-10-26T09:08:22.860
> 
> 标签：java, sockets, port, derby

这个问题与之前的问题[Sockets: Discover port availability using Java](https://stackoverflow.com/questions/434718/sockets-discover-port-availability-using-java)几乎相似。但是当我检查德比监听端口时，它以某种方式无法正常工作。

```
public static boolean isPortavailable(int port){
    ServerSocket ss = null;
    DatagramSocket ds = null;
    try{
        ss = new ServerSocket(port);
        ss.setReuseAddress(true);
        ds = new DatagramSocket(port);
        ds.setReuseAddress(true);
        return true;
    }
    catch(IOException e){
    }
    finally{
        if(ss != null){
        try{
            ss.close();
            ds.close();
        }
        catch(IOException e){
            /* should not be thrown */
        }
        }
    }
    return false;
} 
```

这是我的主要方法

```
public static void main(String[] args){
    System.out.println("Derby:"+isPortAvailable(1527));
    System.out.println("Jetty:"+isPortAvailable(7080));
    System.out.println("Tomcat:"+isPortAvailable(8084));
} 
```

我使用 derby 1527、jetty 7080 和 tomcat 8084 的端口启动服务。当我运行这个 main 方法时，它给出了以下结果

```
Derby:true
Jetty:false
Tomcat:false 
```

我无法找到为什么它对德比给出错误的答案，任何人都可以帮忙。谢谢

# javascript - 智能 GWT 日历：如何自定义事件和日历本身的外观？

> ID：13083972
> 
> 赞同：3
> 
> 时间：2012-10-26T09:08:22.083
> 
> 标签：javascript, calendar, customization, smartgwt

我想定制我的智能 GWT 日历。这可能吗？

例如：

*   在日历和日/周标签之间写一些东西。
*   事件之间有一些水平空间。
*   改变事件的外观：如果一天有三个事件，每个事件应该只有三分之一的水平空间。

该怎么办？

*   我必须更改任何 JavaScript 文件吗？如果是，如何。哪些是关键文件？
*   .setProperty(property, value) 方法是什么？没有文档。

# javascript - 目标属性的 Javascript 帮助

> ID：13083975
> 
> 赞同：0
> 
> 时间：2012-10-26T09:08:41.163
> 
> 标签：javascript

我有一个较小的新窗口，而不是通过下载 pdf 打开一个新标签。我只想要来自 downlado.jsp 的回调变量，即当它的工作在父窗口上完成以关闭 downlado.jsp .from 时，我调用了 send me 函数。

JavaScript：

```
function sendme()
{
    winname = "myNewWin";
    window.open("","myNewWin","width=500,height=300,toolbar=0");
    lsurl  = "downlado.jsp";
    window.document.Form.action = lsurl;
    window.document.Form.target = winName;
    window.document.Form.submit();
    window.setTimeout("window.close",5000);
 } 
```

例如

```
function callback()
{
    close download jsp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:28:31.440

不幸的是，这在纯 Javascript 中是不可能的。但是，您可以使用以下解决方法：

*   在新窗口中开始下载
*   定期对服务器进行 AJAX 调用以检查下载是否完成。
*   如果是，请关闭窗口。

好的，至于 AJAX 部分，你需要知道两件事：

1.  如何进行 AJAX 调用 - 这非常简单，网络上有很多示例。如果您不熟悉 AJAX，我建议您使用[JQuery](http://api.jquery.com/jQuery.get/)。
2.  您需要来自 HTTP 服务器的信息来告诉您文件何时完成下载。假设您使用 Apache，那么[这个关于条件日志的答案](https://serverfault.com/a/53454/130910)可能会让您知道在哪里查看（尽管您可能希望在可以进行 AJAX 调用的某个地方创建一个新文件而不是删除该文件 - 并确定该文件是否下载完毕）。

# c# - .net 4.0 并发集合的性能

> ID：13083976
> 
> 赞同：-4
> 
> 时间：2012-10-26T09:08:45.280
> 
> 标签：c#, .net, concurrency, foreach

如果我们有一个`ConcurrentBag<object>`装满 100 个对象的 safeBag`。

然后一个线程工作为：

```
 foreach(object o in safeBag)
{
    Thread.Sleep(1000);
} 
```

另一个线程在第一个线程启动后立即启动：

```
{
    safeBag.AddOrTake(something);
} 
```

第二个线程会等待 100 秒进入资源吗？另一个问题，如果第一个线程使用 Parallel.ForEach() 运行，线程将如何工作？

编辑：MSDN 说：“一个列表可以同时支持多个读取器，只要不修改集合。通过集合枚举本质上不是线程安全的过程。在极少数情况下，枚举与一个或多个写入竞争访问，确保线程安全的唯一方法是在整个枚举期间锁定集合。” 通过 ConcurrentBag 进行枚举是否会导致第二个线程等待对 ConcurrentBag 的写入访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:48:08.187

对于大多数`Concurrent*`集合，大多数操作都是原子的，但不持有任何长期锁。返回后第一个线程不会阻塞第二个线程`GetEnumerator()`。

[`ConcurrentBag<T>.GetEnumerator`方法](http://msdn.microsoft.com/en-us/library/dd381960.aspx)

> 枚举表示包内容的即时快照。它不反映调用 GetEnumerator 后对集合的任何更新。枚举器可以安全地与对包的读取和写入同时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:14:15.480

第二个线程，假设您连续生成两个线程 - 第一个使用`ThreadStart`指向包含迭代的块，第二个指向另一个代码块，不会等待 1000 毫秒。该`foreach`块将在移动到集合中的下一个对象之间仅等待 1 秒，第二个块不受此影响。

如果它是一个并行的 foreach，那么在移动到下一个元素之前，您将有几个线程（同时）等待一秒钟。第二个块仍然不会等待`ConcurrentBag`变得空闲。

# javascript - 尽管使用有效参数调用 Set 方法，但不会设置成员

> ID：13083977
> 
> 赞同：3
> 
> 时间：2012-10-26T09:08:45.110
> 
> 标签：javascript, oop

我因为这段代码而感到沮丧：

```
 function Model(){
       this.GetAjaxData = function(){ 
          //private Member to be returned
          var res;

          function setRes(newVal){
             res = newVal;
             alert(newVal); // to verify its really being called
          }

          // calls a Ajax-Service(1st param) with the given arguments(2nd param),
          // the 3rd param is a function with gets called back, commiting the 
          // output of the Ajax-Service as arguments for the called function
          tw.coach.callService(
             "GetServerTime", 
             "<inputs><variable name='input1' type='String'>lala</variable></inputs>", 
             function(arg){ setRes(arg['Result']); }
          );

          return res;
       };
    } 
```

现在，发生的事情是，一旦模型的实例被初始化并且方法被调用，如下所示：

```
 var _model = new Model();
    document.getElementById("myDiv").innerHTML = _model.GetAjaxData(); 
```

警报会弹出预期的数据（Ajax 服务只返回 {Result: this come via Ajax.}）但`myDiv`包含`undefined`. 这告诉我`setRes()`正确调用了，但它只是没有设置 res 的值。

我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:13:16.577

考虑 AJAX 请求的异步性质，更改您的方法：

```
function Model() {
    this.GetAjaxData = function(callback) {
        var data = "<inputs><variable name='input1' type='String'>lala</variable></inputs>";
        tw.coach.callService("GetServerTime", data, function(arg) {
            callback(arg['Result']);
        });
    };
}​

var _model = new Model();
_model.GetAjaxData(function(res) {
    document.getElementById("myDiv").innerHTML = res;
}); 
```

# c# - 会话状态已创建会话 ID，但无法保存，因为响应已被应用程序刷新

> ID：13083978
> 
> 赞同：0
> 
> 时间：2012-10-26T09:08:49.867
> 
> 标签：c#, asp.net, exception, session-state

我已经研究过这个异常..大多数解决方案都指定在 global.asax 文件中添加一些内容..但在我的解决方案中我没有找到 global.asax ......但我仍然遇到这个异常..请帮助我在这个..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:35:27.403

试试这个，在 web.config 文件中添加这个标签

```
 <httpRuntime maxRequestLength="30480" requestLengthDiskThreshold="30480"/> 
```

# asp.net - IIS7.5 上集成模式下的 ASP.Net 模拟

> ID：13083980
> 
> 赞同：3
> 
> 时间：2012-10-26T09:09:10.177
> 
> 标签：asp.net, iis, iis-7.5, windows-authentication, impersonation

我们最近发现我们的 IIS 服务器没有正确地模拟授权用户，这只能在`Classic`模式下正常工作，而不是`integrated`模式下。

为了给出这个背景，我将详细介绍我们的设置..

我们有一个 Informix 数据库，由于这个问题之外的原因，我们正在使用 ODBC 和 Windows 身份验证进行连接。

ODBC 设置为使用经过身份验证的用户连接到 Informix 数据库，在该数据库中设置为允许用户以这种方式进行身份验证。

似乎没有发生的是 IIS 正在模拟线程，并且它正在尝试使用 ODBC/IFX 作为应用程序池用户进行身份验证，而不是 Windows 用户。

是否有需要设置的 IIS/ASP.net 设置？

正如我所提到的，这在`Classic`模式下按预期工作，但我知道我们应该尝试使用`Integrated`模式向前移动

# windows-8 - 如何从另一个应用程序访问 Windows 8 人员应用程序中的联系人

> ID：13083981
> 
> 赞同：3
> 
> 时间：2012-10-26T09:09:21.397
> 
> 标签：windows-8, contacts, windows-store-apps

有谁知道如何访问 Windows 8 应用商店应用程序中的联系人？我知道由于沙盒性质，Windows 应用商店应用程序无法从 Outlook Express 联系人或 Outlook 等文件访问地址簿，但既然已经预装了一个名为 People 的应用程序，我想为什么不让用户使用任何东西用户已经允许应用查看的联系人，而不是为我的应用创建单独的联系人列表。通过要求用户再次重新导入所有联系人来重新创建轮子似乎很愚蠢。我已经看过 Contact Picker 示例，但我仍然不知道如何在那个 People 应用程序中获取联系人/人员列表。

我没有为手机开发，但是如果设备是手机，那么该应用程序肯定会使用本地联系人，而不是保留单独的联系人列表。所以我认为必须有一种方法可以在 PC 或任何设备上做同样的事情，而不是每个应用程序管理自己的联系人。我还没有看到有关如何执行此操作的任何指导。你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:16:22.583

几天前我问了一个类似的问题，经过大量研究，似乎不可能从合同之外的人员应用程序中获取该信息。它在日历/邮件/信使中工作的原因是因为它们在技术上都包含在同一个应用程序中，并且能够使用彼此的数据并违反正常规则。

很多人让我看实时 SDK，但似乎仍然无法在您的应用程序中获取人员信息，因为 SDK 不再支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:14:11.767

查看 ContactPicker 类：

[http://msdn.microsoft.com/en-us/library/windows/apps/br224913.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br224913.aspx)

另一种方法是共享您的资源或您想要发送的任何内容，用户将选择一个将发送的应用程序或以任何其他方式使用您的共享资源（url、图像等）IMO，后者是首选方式，因为这样用户将拥有选择可以发送邮件或在 facebook / twitter 上发布该资源的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T10:06:05.713

[在ContactPicker](http://msdn.microsoft.com/library/windows/apps/BR224913)上检查[此](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)示例

# android - 如何通过代码清除ARP表？

> ID：13083984
> 
> 赞同：4
> 
> 时间：2012-10-26T09:09:25.297
> 
> 标签：android, linux, android-wifi

我有一个打开热点的 android 选项卡。当其他启用 wifi 的设备连接到我的 android 设备时，它们的 IP 地址和其他详细信息将存储在 ARP 表中，我可以通过读取“/proc/net/arp”来访问这些详细信息，并将它们显示在列表中。但是，当一个设备从我的启用热点的 android 选项卡中断开连接时，与该设备相关的相应详细信息不会从 ARP 表中清除（当我阅读“/proc/net/arp”时，ARP 表仍然包含断开连接的详细信息设备）。我想清除断开连接的设备的详细信息。

这是代码（访问 ARP 表）

```
public ArrayList<ClientScanResultSO> getClientList(boolean onlyReachables,
    int reachableTimeout) {
    BufferedReader br = null;
    ArrayList<ClientScanResultSO> result = null;

    try {
        result = new ArrayList<ClientScanResultSO>();
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {
            String[] splitted = line.split(" +");

            if ((splitted != null) && (splitted.length >= 4)) {
                // Basic sanity check
                String mac = splitted[3];

                if (mac.matches("..:..:..:..:..:..")) {
                    boolean isReachable = InetAddress
                            .getByName(splitted[0]).isReachable(
                                    reachableTimeout);
                    String name = InetAddress.getByName(splitted[0]).getHostName();
                    if (!onlyReachables || isReachable) {
                        result.add(new ClientScanResultSO(splitted[0],
                                splitted[3], splitted[5], isReachable,name));
                    }
                }
            }
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage());
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            Log.e(this.getClass().toString(), e.getMessage());
        }
    }

    return result;
} 
```

希望我对我的问题很清楚。

# spring - Spring3.1 和 hibernate4 + eh-cache

> ID：13083987
> 
> 赞同：1
> 
> 时间：2012-10-26T09:09:30.910
> 
> 标签：spring, hibernate, ehcache

我正在为我的 Web 应用程序使用**Spring3.1**和**hibernate4 。**在这里，我正在尝试使用**eh 缓存**，但出现了一些错误，这是我使用的配置：-

**调度程序-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:cache="http://www.springframework.org/schema/cache"
    http://www.springframework.org/schema/cache
    http://www.springframework.org/schema/cache/spring-cache-3.1.xsd">

    <cache:annotation-driven />
    <bean id="defaultEhCacheManager"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
        p:config-location="/WEB-INF/ehcache.xml" p:shared="false"></bean>
    <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">
        <property name="cacheManager" ref="ehcache"></property>
    </bean>
    <cache:annotation-driven cache-manager="cacheManager" />
    <bean id="cacheManager">
        <property name="cacheManager" ref="ehcache" />
    </bean>
    <bean id="ehcache"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
        <property name="configLocation" value="/WEB-INF/ehcache.xml" />
    </bean> 
```

**ehcache.xml**

```
<cache name="sampleCache1" 
    maxElementsInMemory="10000"
    eternal="false"
    overflowToDisk="true"
    timeToIdleSeconds="300"
    timeToLiveSeconds="600">
</cache> 
```

这是依赖项：-

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core</artifactId>
    <version>2.5.2</version>
</dependency> 
```

我收到以下错误：--

**严重：上下文初始化失败org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.cache.interceptor.CacheInterceptor#0”的bean时出错：设置bean属性“cacheManager”时无法解析对bean“cacheManager”的引用；**嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 中定义的名称为“cacheManager”的 bean 时出错：设置 bean 属性时无法解析对 bean 'ehcache' 的引用'缓存管理器'; 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ehcache' is defined at

请尽快提出任何解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T15:43:50.510

这个配置对我来说很好用：

**META-INF/spring/sandbox-cache-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-3.1.xsd">

    <bean id="ehCacheManager"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
        p:configLocation="classpath:META-INF/ehcache.xml"
        p:shared="false" />

    <bean id="cacheManager"
        class="org.springframework.cache.ehcache.EhCacheCacheManager"
        p:cacheManager-ref="ehCacheManager" />

    <cache:annotation-driven cache-manager="cacheManager" />

</beans> 
```

**META-INF/ehcache.xml**

```
<ehcache>
    <diskStore path="java.io.tmpdir" />

    <cache name="sampleCache1"
        maxElementsInMemory="10000"
        eternal="false"
        overflowToDisk="true"
        timeToIdleSeconds="300"
        timeToLiveSeconds="600" />

    <defaultCache
        maxElementsInMemory="10000"
        eternal="false"
        timeToIdleSeconds="120"
        timeToLiveSeconds="120"
        maxElementsOnDisk="10000000"
        diskExpiryThreadIntervalSeconds="120"
        memoryStoreEvictionPolicy="LRU">
        <persistence strategy="localTempSwap"/>
    </defaultCache>
</ehcache> 
```

**CacheContextTest.java**

```
import static org.fest.assertions.Assertions.assertThat;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.CacheManager;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:META-INF/spring/sandbox-cache-context.xml")
public class CacheContextTest {

    @Autowired
    CacheManager cacheManager;

    @Test
    public void shouldStartContext() throws Exception {
        assertThat(cacheManager.getCache("sampleCache1")).isNotNull();
        assertThat(cacheManager.getCache("nonExistentCache")).isNull();
    }
} 
```

# typo3 - 用不同的文本替换-tag linktext

> ID：13083989
> 
> 赞同：0
> 
> 时间：2012-10-26T09:09:46.573
> 
> 标签：typo3, typoscript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:51:47.693

您不能映射任何嵌套在先前映射的元素中的元素。

最快的解决方案是映射`A`标签，并`<span>|</span>`使用 TypoScript 包装插入的文本。

# asp.net - 使用 <% %> 的动态 html 输出

> ID：13083993
> 
> 赞同：0
> 
> 时间：2012-10-26T09:10:04.660
> 
> 标签：asp.net

我有一个可以是英语或瑞典语的页面。该页面包含很多电话号码。我想要做的是在瑞典模式下将电话号码显示为 0XX XXX XXX，在英语模式下显示 +46(0)XX XXX XXX。

我不太热衷于为每个电话号码使用独特的 asp.net-controls，因为它们很多。我在想的是使用 <% Phone(); %>。问题是没有任何输出。但是，调试器会运行 Phone 方法。有什么想法/建议吗？<%%> 只能与数据控件一起使用吗？

代码：

```
<strong>Phone:</strong> <%Phone(); %>418 43 30 30<br>

public string Phone()
{
    if (Session["lang"].ToString() == "SE")
        return "0";
    return "+46(0)";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:12:24.840

试试这个 - `<%=Phone(); %>`。您需要`=`将返回值放在 HTML 代码中。

# iphone - 背景颜色不是完全使用视口渲染的吗？

> ID：13083995
> 
> 赞同：1
> 
> 时间：2012-10-26T09:10:15.750
> 
> 标签：iphone, html, css

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name='viewport' content='width=device-width; initial-scale=1; maximum-scale=1; user-scalable=1;' />
    <title>Example</title>
</head>
<body>
    <style type="text/css">
        body
        {
            margin:0;
            padding:0;
        }

        #main
        {
            position:relative;
            background-color:#454a4b;
        }    

        #inside
        {
            width:900px;
            position:relative;
        }    
    </style>

    <div id="main">
        <div id="inside">
            Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature
        </div>
    </div>
</body>
</html> 
```

如果我在 iPhone 上观看，则背景颜色仅在页面加载时查看的空间上呈现。如果我向右滚动，我会看到没有拍摄背景。

为什么？我该如何解决？

# ios - google+ 登录 SDK 不工作

> ID：13083998
> 
> 赞同：1
> 
> 时间：2012-10-26T09:10:29.443
> 
> 标签：ios, login, google-plus

我正在开发一个 iOS 应用程序。当我运行用于 google+ 登录的程序时，在我点击允许访问按钮后，会显示此消息。

> 您访问此页面是因为我们检测到您的浏览器禁用了 Javascript。如果禁用脚本，您尝试加载的页面将无法正确显示。请启用脚本并返回浏览器。”

另外，我在下面的方法中放置了一个 NSlog `GooglePlusSignInDelegate`：

```
(void)finishedWithAuth:(GTMOAuth2Authentication *)auth
               error:(NSError *)error {
if (error) {
    NSLog(@"Error[A]: %@", error);
} else 
{    
    NSLog(@"SUCCESS!");
} 
```

没有日志出来。这是否意味着我尚未在 google+ 登录中获得授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:45:23.513

我能够解决我自己的问题。

当我更改捆绑 ID 时，我没有在 URL 类型中更新它。

以下是我更新 URL 类型的方法：在目标列表中选择应用程序目标，然后单击信息选项卡。在 URL Types 下，一定要指明正确的 bundleID。

# javascript - 重定向移动用户循环

> ID：13083999
> 
> 赞同：0
> 
> 时间：2012-10-26T09:10:30.717
> 
> 标签：javascript, redirect, mobile

如果用户在移动设备上浏览，我有一个网站会将用户重定向到该网站的移动版本。重定向工作正常，但是当让他们切换到网站的桌面版本时，问题就来了。

如果您在移动设备上访问 site.com，您将被重定向到 m.site2.com（因为移动版本托管在单独的网站上 - 我知道令人困惑，但必须这样做）。然后，如果用户在 m.site2.com 上单击“查看完整站点”，他们将被发送到 site.com，但随后会立即被发送回 m.site2.com。

是否有一些代码可以放在某处指定访问者是否来自 m.site2.com 然后它将覆盖重定向？

这个循环让我发疯。此外，它必须在 Javascript 中。如果有人可以为此提供完整的脚本，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T00:20:04.253

从服务器本身重定向到移动设备总是更好。在您的情况下，您使用 JavaScript 从客户端重定向，对吗？

我有两个解决方案。

**一：**禁用自动重定向。您可以在移动版本上提供“桌面站点”链接，在桌面版本上提供“移动站点”链接。如果用户喜欢，那么他们可以选择移动或桌面。

**二：**在您的桌面站点服务器中创建两个相同的 HTML 文件。说`index.html`和`index2.html`。不同之处在于，`index2.html`没有重定向 Javascript 代码。

现在将人们从移动版本重定向到`index2.html`您的桌面站点。

也就是说，在解决方案**二**中，流程可以是这样的：

用户 → 桌面站点 ( `index.html`) → 移动站点 → 桌面站点 ( `index2.hml`)

在这里您可以看到，用户首先来到桌面站点，`index.html`然后自动重定向到移动站点。但是用户然后单击以查看桌面版本。您应该在此处提供指向 的链接`index2.html`，然后由于缺少脚本，因此不会自动重定向用户`index2.html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:12:13.530

也许设置查询变量或标头数据可以解决您的问题。检查推荐人也可以提供帮助。