# StackOverflow 问答 13437000-13437999

# c++ - 使用回调自定义类而不是子类化

> ID：13437001
> 
> 赞同：0
> 
> 时间：2012-11-18T02:44:08.030
> 
> 标签：c++, inheritance, functional-programming

功能上相同的是使用回调来自定义类行为，以及使用虚函数和继承。但我发现在我自己的工作中使用函数对象稍微灵活一些。

# 使用继承和许多类自定义行为

```
class Animal
{
    virtual void onTouch() = 0 ;
} ;

class Dog : public Animal
{
    void onTouch() 
    {
        // all dogs behave this way.
        // to change I'd need to subclass, or add parameters.
        puts( "Woof" ) ;
    }
} ; 
```

# 使用函数对象按实例自定义类行为

```
struct Animal
{
    function<void ()> onTouch ;
} ;

Animal dog1,dog2 ;
dog1.onTouch = dog2.onTouch = [](){
    puts( "Woof" ) ;
} ;

Animal dog3 ;
dog3.onTouch = [](){
    // slightly modified behavior from dog1 and dog2, without
    // having to subclass, add members, or pass extra parameters
    puts( "Arr.. Woof" ) ;
} ; 
```

有没有人知道我在这里所做的事情或任何*不*使用它的理由

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T04:14:24.427

说这比虚函数“稍微灵活一点”就像说`goto`比 if/else 稍微灵活一点。使用您的替代方案，您可以：

*   动态更改对象的行为（只需分配一个新对象）
*   在具有多个这些的类中混合和匹配行为，相反，从不强制两个相关的实现总是在这样的类中一起使用。
*   本质上使类的每个实例化都成为子类。

但是，函数对象*不能*访问“他们的”对象的受保护成员，这可能需要您打破对宿主类的封装，以便函数对象可以做他们需要做的事情。

总而言之，这似乎是将对象与应该由该对象启动的*外部行为*（例如，按钮单击处理程序）相关联的好方法，但是使用它来扩展类的固有行为似乎会产生更多问题它解决了。

使用这种范例的最常见示例是回调函数或事件处理程序，因为该类关注绘制按钮和处理鼠标事件的机制（对于按钮类），或管理网络协议（对于网络套接字类）。在这些情况下，将事件处理程序设为虚拟并在子类中实现它并不是好的面向对象设计，因为子类在概念上并不是其父类的新“类型”，就像您不应该对按钮进行子类化一样改变它的高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T20:59:51.913

*这种类型的对象定制对于需要具有不同行为*的对象类型是绝对必要的，但*在基本结构上的差异不足以保证子类化*。

这最常出现在具有`OnClick`类型回调函数的 Window 元素类型中。如果我们`Button`每次想要不同的`onClick`行为时都对基本类进行子类化，那么您将有大约 70 个子类的`Button`行为方式完全相同，除了在`onclick`触发回调时发生的情况（`class OkButtonForMainWindowDialog`, `class CancelButtonForMainWindowDialog`..）。

## 错误的继承示例

```
class Button
{
    virtual void onClick( float x, float y ) = 0 ;
} ;

class OkButtonForMainWindowDialog : public Button
{
    virtual void onClick( float x, float y )
    {
        // Ok, so close this dialog box.. and commit the changes..
    }
} ; 
```

相反，我们定义了基类`Button`，并允许附加一个指定`onClick`行为的函数对象。

## 基于函子的示例

```
class Button
{
    function< void ( float x, float y ) > onClick ;
} ;

Button okButton ;
okButton.onClick = []( float x, float y ){
    // do whatever's necessary..
} ; 
```

使用这样的回调对于防止子类像这样成倍增加是*绝对必要的。*

# algorithm - 对一串括号进行分区

> ID：13437005
> 
> 赞同：9
> 
> 时间：2012-11-18T02:45:30.527
> 
> 标签：algorithm

谁能帮我解决这个问题？我将输入问题，然后给出我的一些想法/替代解决方案。

所以问题几乎是，给定一串这样的括号：

```
[[]] 
```

我们要为每个括号分配一个组号（组 1 或组 2）。一个有效的分配意味着如果你只看第一组中的括号，它会形成一个有效的、平衡的括号字符串（这几乎是像 [ ] [ [ ] ] 和不像 ]]]][ ] 这样的东西。同样有对第二组也是如此。组不必是连续的。我们想计算将这些括号分成两组的方法。

在 [ [ ] ] 上面的示例字符串中，答案是 6，以下是枚举：(1 = group 1, 2 = group 2)

```
 [[]]
1.1111
2.2222
3.1221
4.2112
5.1212
6.2121 
```

安排不必包括所有组（如安排 1\. 和 2.）

**想法**

一个明显的蛮力解决方案可以很快地使用多达 32 个括号，它是使用一个 32 位整数来表示哪些括号是单个组的一部分。或者我们可以使用一个数组。运行时间是 O(2^N) （我认为），这太慢了？

从问题的角度来看，我认为给你的原始括号串必须是预先平衡的，否则没有办法选择一个子集，使第 1 组和第 2 组是平衡的。

我还注意到您可以分离组件 - 字符串“[]”有 2 个排列，所以字符串“[][]”有 4 个排列。（您可以找到每个组件中的方式数并将它们相乘）。

不过，我对如何将这些想法融入算法感到困惑。我写了蛮力程序，我检查了字符串“[]”、“[[]]”、“[[[]]]”和“[[[[]]]]”，但我真的没有看到一个模式。

通过将这些字符串插入我的蛮力程序，我得到：

```
"[]" = 2
"[[]]" = 6
"[[]]" = 20
"[[[[]]]]" = 70 
```

代码：

```
char buf[1000];
int N;
bool isValid(int mask)
{
    int lv = 0;
    for (int i = 0; i < N; i++)
    {
        if (mask & (1 << i))
        {
            if (buf[i] == '(')
            {
                lv++;
            }
            else
            {
                lv--;
            }
            if (lv<0)
            {
                return false;
            }
        }
    }
    return lv==0;
}

int main() 
{
    scanf("%s", buf);
    N = strlen(buf);
    int ways = 0;
    for (int i = 0; i < (1 << N); i++)
    {
        if (isValid(i) && isValid(~i))
        {
            ways++;
        }
    }
    printf("Number of ways is %d\n", ways);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:05:04.257

**我在下面的 C++ 中给出了一个 O(n^3) 时间、O(n^2) 空间的动态规划解决方案。** 但是这个算法的理由首先需要一些解释。在下文中，我使用“子串”来表示必须连续的元素的有序子集，而“子序列”则表示不必连续的有序子集。

## 生成我们知道有效的字符串

将字符串的深度定义为`[`它包含的 s 数减去`]`s 的数量。

让我们建立一些所有有效（“平衡”）括号字符串必须遵守的规则：

1.  `[`s 和s 的数量必须相等`]`。
2.  字符串的任何前缀都不能有负深度，即`]`s 多于`[`s。

这些显然是*必要*的条件——如果一个字符串违反了任一规则，它就不能是有效的。但是为了能够方便地生成我们知道是有效的字符串，我们需要证明这些条件也是*充分*的：任何遵守这些规则的字符串都必须是有效的。为了解决这个问题，让我们引入一个引理：

**引理：**如果非空字符串满足条件 (1) 和 (2)，则它必须包含`[]`为子字符串。

**证明：**它必须以 a 开头`[`，否则长度为 1 的前缀将包含`]`比s 更多的`[`s 并违反 (2)。因此它必须至少包含一个`]`，否则会有 i >= 1`[`和 0 `]`，并且有效的字符串必须包含相等数量的每个 (1)。因此，在某个位置 j > 1 处必须第一次出现 a `]`，并且其左侧的字符必须是 a `[`。

假设我们有一个`x`符合条件 (1) 和 (2) 的非空字符串。根据引理，它必须包含一个`[]`. 删除这对不会导致违反这些条件中的任何一个，因此结果字符串，如果非空，则必须仍遵守条件 (1) 和 (2)，因此仍必须包含`[]`某处。因此我们可以继续删除`[]`s 直到剩下空字符串。

将 a 插入`[]`到任何位置的有效字符串中都必须产生一个新的有效字符串，因为新的括号对总是相互匹配并且不会干扰任何其他匹配的对。`x`观察到可以通过以与我们在上一段中删除它们相反的顺序将 s重复插入空字符串（这是平凡有效的）来构建我们的原始字符串`[]`：所以我们现在已经证明了`x`（即任何遵守条件 (1) 和 (2)) 有效。

## 正确的递归

表达 OP 问题的等效方式是：“我们可以选择多少种方法来选择字符位置的有效子序列，以便剩余的子序列也有效？” 如果我们首先将其概括为：

**假设到目前为止我们选择的子序列有 depth `d`，到目前为止我们未选择的子序列有 depth `e`，我们有多少种方法可以从 position 开始的后缀中选择一个有效的子序列，`k`以便剩余的子序列也是有效的？**

调用这个函数`count(d, e, k)`。原来问题的答案是现在`count(0, 0, 0)`。

事实上，我们可以通过注意`d+e`必须等于字符后的总深度来进一步简化问题`k`，因此我们可以`e`从`d`和确定`k`，并且`count()`只需要 2 个参数。

此外，在测试是否可以选择空子序列时，我们只需要测试`d`== 0。我们不需要费心测试那个`e`加上剩余的后缀在不低于它的情况下下降到 0，因为 if `d`== 0然后我们从原始字符串中减去了 0 的净深度（假设它是有效的，它必须以 0 的深度结束，并且不能低于 0）。

为了递归地解决这个问题，我们需要从搜索所有可能的子序列的过程中分离出第一个决策点。长度为 n 的字符串的子序列必须属于以下 n+1 种情况之一：要么为空，要么具有最左边的元素，该元素可以是字符串中的 n 个字符中的任何一个。在做出第一个决定之后通过递归产生的子序列都是不同的。

在递归正常工作的情况下，记住它很简单：只需在 2D 向量中记录任何给定调用的正确答案，该向量`memo[][]`最初用 -1 值填充。由于该函数`count(d, k)`有 2 个参数，对于长度为 n 的字符串，参数范围分别从 0 到 n/2 和从 0 到 n，因此需要 O(n^2) 空间，并且`if (memo[d][k] == -1) {`块内部最多会执行O(n^2) 次。每次发生这种情况时，都会运行一个 O(n) 循环，时间复杂度高达 O(n^3)。

## 实际代码

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

class PartitionCounter {
    // Return the number of subsequences of the suffix of v beginning at position k
    // that are (a) valid, given that the initial depth of the subsequence is d (on
    // account of it being the suffix of some larger subsequence), and (b)
    // leave behind a remainder subsequence that is also valid, given that
    // the remainder sequence has initial depth depths[k]-d.
    int count(int d, int k) {
        // If a prefix of either sequence (selected or remaining) has more ']'s
        // than '['s then there can't be any completing subsequences.
        if (d < 0 || depths[k] - d < 0) {
            return 0;
        }

        // Only compute the answer if we haven't already.
        if (memo[d][k] == -1) {
            // A subsequence must either contain no elements, or a leftmost element
            // at some position.  All subsequences produced by recursion after this
            // initial choice are distinct (when considering the sequence of
            // character indices included, though not necessarily when considering
            // the sequence of characters themselves).

            // Try including no elements.  This effectively terminates the larger
            // subsequence that the selected subsequence is part of, so it can be
            // legal only if its depth is 0\.  It also effectively includes all
            // remaining characters in the remainder sequence, but if the selected
            // subsequence has depth 0 and the original string does too, then it's
            // implied that the remainder must also have total depth 0, so we don't
            // need to check it.
            int n = (d == 0);

            // Try including a leftmost element at each remaining position.
            // If this would cause a remainder subsequence that has negative
            // depth, stop: any later loop iterations would also create illegal
            // remainder subsequences.
            for (int i = k; i < v.size() && depths[i] - d >= 0; ++i) {
                n += count(d + v[i], i + 1);
            }

            memo[d][k] = n;
        }

        return memo[d][k];
    }

    vector<int> v;          // 1 for '[', -1 for ']'
    vector<int> depths;     // depths[i] is the sum of the 1st i elements
    vector<vector<int> > memo;  // DP matrix.  -1 => not computed yet

public:
    PartitionCounter(string s) : memo(s.size() / 2 + 1, vector<int>(s.size() + 1, -1)) {
        depths.push_back(0);
        int total = 0;
        for (int i = 0; i < s.size(); ++i) {
            v.push_back(1 - 2 * (s[i] == ']')); // Map '[' to 1 and ']' to -1
            depths.push_back(total += v[i]);
        }
    }

    int count() {
        if (depths.back() == 0) {
            return count(0, 0);
        } else {
            return 0;       // Need to handle invalid strings specially
        }
    }
};

int main(int argc, char **argv) {
    PartitionCounter c(argv[1]);
    cout << c.count() << '\n';
} 
```

## 结果

```
C:\>partitioncounter []
2

C:\>partitioncounter [[]]
6

C:\>partitioncounter [[[]]]
20

C:\>partitioncounter [[[[]]]]
70

C:\>stopwatch partitioncounter [][[[[[][][][][[][][]]]]]][]
10001208
stopwatch: Terminated. Elapsed time: 15ms
stopwatch: Process completed with exit code 0.

C:\>stopwatch partitioncounter [][[[[[][[[]][][][[]]][[][]]]]]][]
562547776
stopwatch: Terminated. Elapsed time: 0ms
stopwatch: Process completed with exit code 0. 
```

如果您需要额外的位，您当然可以使用`long long`或其他方式来代替。`int`

**编辑：**修正了 ishi 指出的错误。当我们跳过要从选定子序列中排除的字符时，剩余子序列会累积它们。发生的事情是，到目前为止，我们实际上只排除了在整个子序列上`]`s 多于s 的剩余子序列——但为了避免违反条件 (2)，我们需要检查*对于*细绳。我们现在通过提前停止循环来做到这一点，这样这些违规的剩余子序列就不会首先生成。作为奖励，算法变得更快！:)`[`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:29:05.807

如果有任何帮助，对于像 [[[]]] 这样的“中心”字符串，您可以使用`ways(1) = 2`和`ways(n) = ways(n-1)*(4*n-2)/n`（或*C(2n,n)，*如果您愿意）计算您的方法数，其中 n 是嵌套的深度。

嵌套但不是“中心”组（如 [[][]]）似乎遵循类似的模式，但我无法找出正确的公式。

**编辑**

我们的符号能力已经用完了，所以我将使用 texify 来表达数学公式。我想出了这样的事情：

![公式](../Images/f3de9baab3fdcde65c773f9fb93cb348.png)

[周围组（您可以通过此](http://texify.com/?$%5BA_1%5Cldots%20A_n%5D=%5Cfrac%7B%5CPi_%7Bi=1%7D%5En%5BA_i%5D%7D%7B2%5E%7Bn-1%7D%7D$)更改公式）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-31T00:09:39.540

扩展 ishi 的答案，我认为它可以在 O(N^2) 中完成，因为 d + e 等于前缀的深度。下面的代码得到相同的结果。

```
/*
How many ways are there to split a string
of brackets into two such that both are balanced.
*/

#include <iostream>
#include <string>
using namespace std;

#define MAXN 1000
#define M 1000000007

int N, dp[MAXN][MAXN];
string s;

int recurse(int k, int i, int p) {
  if (i >= N) {
    return k == 0 ? 1 : 0;
  }
  if (k < 0 || p-k < 0) {
    return 0;
  }

  int &ans = dp[k][i];
  if (ans != -1) {
    return ans;
  }

  ans = 0;
  if (s[i] == '[') {
    ans += recurse(k+1,i+1,p+1)+recurse(k,i+1,p+1);
    return ans;
  }
  if (s[i] == ']') {
    ans += recurse(k-1,i+1,p-1)+recurse(k,i+1,p-1);
    return ans;
  }
  return 0;
}

int main() {
  cin >> s;
  N = s.size();
  for (int k = 0; k < N; k++) {
    for (int i = 0; i < N; i++) {
      dp[k][i] = -1;
    }
  }
  cout << recurse(0,0,0) << endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-18T10:53:50.723

更容易理解解决方案。

```
 public int splitString(String s){
    int gOneC=0;
    int gTwoC=0;

    Map<String, Integer> memo = new HashMap<>();
    return splitStringRecur(s,0, gOneC, gTwoC, memo);
}

private int splitStringRecur(String s, int i, int gOneC, int gTwoC, Map<String, Integer> memo) {
    if(i == s.length()){
        if(gOneC==0 || gTwoC==0) return 1;
    }
    String t = i+"-"+gOneC+"-"+gTwoC+"";
    if(memo.containsKey(t)) return memo.get(t);

    int gc =0;
    int gs =0;
    if(s.charAt(i)=='('){
        gc = splitStringRecur(s, i+1, gOneC+1, gTwoC,memo);
        gs = splitStringRecur(s, i+1, gOneC, gTwoC+1,memo);
    }else {
        if(gOneC > 0){
          gc +=  splitStringRecur(s, i+1, gOneC-1, gTwoC,memo);
        }
        if( gTwoC >0){
           gs += splitStringRecur(s, i+1, gOneC, gTwoC-1,memo);
        }
    }
    memo.put(t, gc+gs);
    return gc+gs;
} 
```*

# c# - 获取动态创建的 imagebutton ID (C#)

> ID：13437013
> 
> 赞同：2
> 
> 时间：2012-11-18T02:48:23.387
> 
> 标签：c#, asp.net, visual-studio, web

我有一个表格，每行末尾都有一行信息，创建了一个图像按钮。我希望用户能够通过单击与该行对应的图像来删除该行，但不知道如何获取所单击行的 ID。

这是我当前的代码：

```
img = new ImageButton();
img.ImageUrl = "./Images/delete.png";
img.Width = 35;
img.Height = 35;
img.Attributes.Add("runAt", "server");
img.ID = thisReader["DocID"].ToString();
img.CausesValidation = false;
img.Click += new ImageClickEventHandler(deleteRow);
delete.Controls.Add(img); 
```

还有我的事件处理程序，目前是空的。我的最终目标是
在单击时从 thisReader["DocID"].ToString() 获取值到处理程序中。

```
protected void deleteRow(object sender,  System.Web.UI.ImageClickEventArgs e)
{

} 
```

目前我将 ID 属性设置为我需要的 ID，但我认为这不是正确的方法。从我阅读的内容来看，我需要创建一个命令参数并使用它，但我不确定如何进行。希望得到一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:50:20.777

您需要使用`source parameter in the deleteRow event handler`. 您可以`type cast`获取`ImageButton`并获取其 ID。

```
protected void deleteRow(object sender,  System.Web.UI.ImageClickEventArgs e)
{
   string ID = ((ImageButton)sender).ID;
} 
```

# javascript - jQuery ScrollTop() 函数不起作用

> ID：13437015
> 
> 赞同：3
> 
> 时间：2012-11-18T02:48:41.763
> 
> 标签：javascript, jquery, css, scroll, scrolltop

我正在尝试使用响应式设计来实现 scrollTop() 函数，但由于某种原因，这段代码不起作用。

以下检查页面是否已完全加载，而不是检查页面是否已滚动。然后，在确保页面滚动到页眉之后，它会显示一个固定在屏幕顶部的图像，这会将页面发送到屏幕顶部。我的问题是图像不会出现。任何帮助表示赞赏！

```
$(document).ready(function() {
            if ($(document).width() > 650) {
                $('#welcome').css('padding-top', $('#header').height() + 50 + 'px');
                $(document).scroll(function() {
                    if ($(document).scrollTop() >= $('#header').height()) {
                        $('#up-arrow').css('position', 'fixed').css('right', '0');
                    } else {
                        $('#up-arrow').css('display', 'none');
                    }
                });
            } else {
                $('#welcome').css('padding-top', '25px');
            }
        });
        $(window).resize(function() {
            if ($(document).width() > 650) {
                $('#welcome').css('padding-top', $('#header').height() + 50 + 'px');
                $(document).scroll(function() {
                    if ($(document).scrollTop() >= $('#header').height()) {
                        $('#up-arrow').css('position', 'fixed').css('right', '0').css('display','block');
                    } else {
                        $('#up-arrow').css('display', 'none');
                    }
                });
            } else {
                $('#welcome').css('padding-top', '25px');
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:58:42.863

进行了一些故障排除，但我相信我发现了问题：

如果文档在加载时没有滚动到标题之外，则将向上箭头的 css 设置为`display:none`.

但是，当它滚动得足够远时，您只需设置`position: fixed`- 您实际上并没有重新打开它。

所以改变这一行：

```
$('#up-arrow').css('position', 'fixed').css('right', '0'); 
```

到：

```
$('#up-arrow').css({'position': 'fixed', 'display': 'block', 'right' : 0}); 
```

它会起作用。

# mysql - 我的 SQL 命令不起作用

> ID：13437017
> 
> 赞同：0
> 
> 时间：2012-11-18T02:49:25.587
> 
> 标签：mysql, sql, phpmyadmin

我有两个名为用户和提交的表。我想自然地加入他们。然后按列对它们进行分组。然后选择两列。给他们别名。然后按给定的别名对它们进行排序。

我的代码已在下面给出。

```
select name, count(result) as name, tried from user
natural join submission group by name sort by tried; 
```

但是，这是行不通的。我收到一个错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'sort by count(result) LIMIT 0, 30' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T02:51:19.730

您有两个具有相同名称的结果：

```
select name, <-- 1st "anme"
count(result) as name, <-- 2nd name
tried from user natural join submission group by name order by tried; 
```

修复很简单，因为您需要做的就是更改 COUNT 结果的别名

```
select name, 
count(result) as result_count, 
tried from user natural join submission group by name order by tried; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:08:46.337

```
select name, 
count(result) as result_count, 
tried from `user` natural join submission group by name ORDER by tried; 
```

# c# - HTML 表格 - 隐藏行并将后续控件移动到其位置的最佳方法？

> ID：13437018
> 
> 赞同：1
> 
> 时间：2012-11-18T02:49:41.497
> 
> 标签：c#, asp.net, html

场景如下：在表格中，有标签和控件的行和列。在 aspx.cs 中有一些场景，我们可以说基于“x”条件，标签和控件是隐藏的。

例如：这是使用简单的（例如 4 rows> 和 .

```
 Label 1  Control1       Label 2  Control2       Label 3  Control3    

 Label 4  Control4       Label 5  Control5       Label 6  Control6    

 Label 7  Control7       Label 8  Control8       Label 9  Control9    

 Label 10 Control10      Label 11 Control1       Label 12 Control2 
```

如果后面的代码显示隐藏标签 8 和控件 8，那么这就是它当前的样子：

```
 Label 1  Control1       Label 2  Control2       Label 3  Control3    

 Label 4  Control4       Label 5  Control5       Label 6  Control6    

 Label 7  Control7                               Label 9  Control9    

 Label 10 Control10      Label 11 Control1       Label 12 Control2 
```

这看起来不太好。人们会期望标签和控件 11 会移动到标签和控件 8 所在的位置。我在想这样做的快速而肮脏的方法是执行以下操作：

```
<table>
   <tr>
       <td>
           <table>
               <tr>
                  <td></td>
               </tr>
               <tr>
                  <td></td>
               </tr>
               <tr>
                  <td></td>
               </tr>
           </table>  
       <td>
       <td>
           <table>
               <tr>
                  <td></td>
               </tr>
               <tr>
                  <td></td>
               </tr>
               <tr>
                  <td></td>
               </tr>
           </table>  
       </td>
     </tr>
   </table> 
```

然后这样我会隐藏控件的“tr”，它会将行向上移动。但我认为必须有更好的方法，但并不完全确定。任何意见是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:00:56.727

出于布局目的使用表格几乎已被 DIV 和 CSS 取代。除非您专门输出表格数据，否则依赖表格进行布局绝不是一个好主意。

在您的描述中，听起来您正试图让行改组，而不是所有内容都向左移动。在您的示例中，11 占据了 8 的位置。您还可以使用 DIV 和 CSS 使 9 取 8、10 换成 9 和 11 和 12 左移。

查看这个非常丑陋的 DIV/CSS 示例[jsFiddle](http://jsfiddle.net/hXdbm/)或下面的代码。在这里，我隐藏了 5，然后 8 向上移动。

```
<div style="float:left;margin:10px">
    <div>
        1
    </div>
    <div>
        4
    </div>
    <div>
        7
    </div>
</div>
<div style="float:left;margin:10px">
    <div>
        2
    </div>
    <div style="display:none">
        5
    </div>
    <div>
        8
    </div>
</div>
<div style="float:left;margin:10px">
    <div>
        3
    </div>
    <div>
        6
    </div>
    <div>
        9
    </div>
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:35:56.123

表格单元格不会浮动到位 - 它们是基于另一行的单元格内容的固定宽度，因此表格不会为您提供此功能，除非您更改在服务器渲染时渲染到每个单元格的内容（即您的代码移动元素）。

如果您有固定数量的列，则可以使用具有 float:left 样式的元素。您可能必须使用固定宽度并隐藏溢出以防止元素拉伸：

```
<style>
#GridContainer
{
    width: 600px;
    overflow: hidden            
}
.row {
    clear: both;
}
.row>div
{
    width: 80px;
    float: left;
    overflow-x: hidden;   
}
</style>

<div id="GridContainer">

 <div class="row">
    <div>item 1</div>
    <div>item2</div>
    <div>item3</div>
 </div>      

 <div class="row">
   <div>item 4</div>
   <div>item 5</div>
   <div>item 6</div>
   <div>item 7</div>       
  </div>  

 <div class="row">
   <div>item 8</div>
   <div>item 9</div>
   <div>item 10</div>
   <div>item 11</div>       
   <div>item 12</div>       
   <div>item 13</div>       
 </div>
</div> 
```

你可以在这里玩 jsFiddle：http: [//jsfiddle.net/6tYnN/3/](http://jsfiddle.net/6tYnN/3/)

通过此设置，您可以简单地删除元素，它们将自动“缩小差距”。

# r - 使用函数替换多个 for 循环

> ID：13437022
> 
> 赞同：0
> 
> 时间：2012-11-18T02:50:51.150
> 
> 标签：r, function, loops, processing-efficiency, simplification

我希望有人可以快速查看这个示例并帮助我找到一种更好更有效的方法来解决这个问题。我想运行一个模拟来检查动物如何在一组特定条件下在站点之间移动。我有 5 个站点和一些初始概率，

> ```
> N<-5 # number of sites
> sites<-LETTERS[seq(from=1,to=N)]
> to.r<-rbind(sites)
> 
> p.move.r<-seq.int(0.05,0.95,by=0.1) # prob of moving to a new site
> p.leave<-0.01*p.move.r # prob of leaving the system w/out returning
> p.move.out<-0.01*p.move.r # prob of moving in/out
> p.stay<-1-(p.move.r+p.leave+p.move.out) # prob of staying in the same site 
> ```

对于这个例子，我只包括了 50 个模拟，但实际上我希望至少有 1000 个模拟，

> ```
> set.seed(13973)
> 
> reps<-50 # number of replicates/simulations
> steps<-100 # number of time steps (hours, days, weeks, etc)
> random<-runif(10000,0,1) # generating numbers from a random distribution
> 
> # Construct empty df to fill with data
> 
> rep.movements<-matrix(NA,nrow=reps,ncol=steps)
> colnames(rep.movements)<-c(1:steps);rownames(rep.movements)<-c(1:reps)
> 
> rep.use<-matrix(NA,nrow=reps,ncol=N)
> colnames(rep.use)<-c(reefs);rownames(rep.use)<-c(1:reps)
> 
> # Outer loop to run each of the initial parameters
> 
> for(w in 1:length(p.stay)){
>      p.move<-matrix((p.move.r[w]/(N-1)),N,N)
>      diag(p.move)<-0
> 
> # Construction of distance matrix
> move<-matrix(c(0),nrow=(N+2),ncol=(N+2),dimnames=list(c(sites,"NA","left"),c(sites,"NA","left")))
> from<-array(0,c((N+2),(N+2)),dimnames=list(c(sites,"NA","left"),c(sites,"NA","left")))
> to<-array(0,c((N+2),(N+2)),dimnames=list(c(sites,"NA","left"),c(sites,"NA","left")))
> 
> # Filling movement-Matrix construction
> 
> for(from in 1:N){
>     for(to in 1:N){
>       if(from==to){move[from,to]<-p.stay[w]} else {move[from,to]<-p.move[from,to]}
>       move[,(N+1)]<-(1-(p.leave[w]+p.move.out[w]))/N
>       move[,(N+2)]<-(1-(p.leave[w]+p.move.out[w]))/N
>       move[(N+1),]<-p.move.out[w]
>       move[(N+2),]<-p.leave[w] 
> } 
> ```
> 
> }

这个想法是使用这个累积概率矩阵来根据随机数确定动物的命运，

> ```
>  cumsum.move<-cumsum(data.frame(move)) # Cumulative sum of probabilities 
> ```

在这个累积矩阵中，字母“A”、“B”、“C”、“D”和“E”代表不同的地点，“NA”代表在未来时间步离开和回来的概率，“离开”表示离开系统并且不再回来的概率。然后我使用随机数列表与累积概率矩阵进行比较，并确定该特定动物的“命运”。

> for(o in 1:reps){
> 
> ```
> result<-matrix(as.character(""),steps) # Vector for storing sites
> x<-sample(random,steps,replace=TRUE) # sample array of random number 
> time.step<-data.frame(x) # time steps used in the simulation (i)
> colnames(time.step)<-c("time.step")
> time.step$event<-""
> 
> j<-sample(1:N,1,replace=T) # first column to be selected 
> k<-sample(1:N,1,replace=T) # selection of column for ind. that move in/out  
> 
> for(i in 1:steps){
>   for (t in 1:(N+1)){
>     if(time.step$time.step[i]<cumsum.move[t,j]){
>     time.step$event[i]<-to.r[t]
>     break
>    }
>  }
> 
>  ifelse(time.step$event[i]=="",break,NA) 
>  result[i]<-time.step$event[i]
>  j<-which(to.r==result[i]) 
>  if(length(j)==0){j<-k} 
> }
> 
> result<-time.step$event
> 
> # calculate frequency/use for each replicate
> 
> use<-table(result)
> use.tab<-data.frame(use)
> use.tab1<-use.tab[-which(use.tab==""),]
> mergeuse<-merge(use.tab2,use.tab,all.x=TRUE)
> mergeuse[is.na(mergeuse)]<-0
> 
> # insert data into empty matrix
> 
> rep.movements[o,]<-result
> rep.use[o,]<-mergeuse$Freq
> 
> }
> 
> } 
> ```

```
 # for the outer loop I have some matrices to store the results for each parameter,
  # but for this example this is not important 
```

> ```
> rep.movements
> rep.use 
> ```

现在，主要问题是为每个初始参数（本例中为 10 个值）运行所有模拟需要很长时间。我需要找到一种更好/更有效的方法来跨所有初始参数运行 1000 个模拟/20 个站点。我不太熟悉加快这项任务的功能或其他方法。任何想法或建议将不胜感激。

非常感谢提前，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:37:37.730

让我们首先将您的代码包装在一个函数中。我还添加了`set.seed`命令以使结果可重现。您需要在运行模拟之前删除它们。

```
sim1 <- function(reps=50, steps=100 ) {

  N<-5 # number of sites
  sites<-LETTERS[seq(from=1,to=N)]
  to.r<-rbind(sites)

  p.move.r<-seq.int(0.05,0.90,by=0.05) # prob of moving to a new site
  p.leave<-0.01*p.move.r # prob of leaving the system w/out returning
  p.move.out<-0.01*p.move.r # prob of moving in/out
  p.stay<-1-(p.move.r+p.leave+p.move.out) # prob of staying in the same site 

  set.seed(42)
  random<-runif(10000,0,1) # generating numbers from a random distribution

  cumsum.move <- read.table(text="A         B         C         D         E    NA.   left
                            A    0.0820000 0.3407822 0.6392209 0.3516242 0.3925942 0.1964 0.1964
                            B    0.1254937 0.4227822 0.6940040 0.3883348 0.4196630 0.3928 0.3928
                            C    0.7959865 0.8730183 0.7760040 0.7930623 0.8765180 0.5892 0.5892
                            D    0.8265574 0.8980259 0.8095507 0.8750623 0.9000000 0.7856 0.7856
                            E    0.9820000 0.9820000 0.9820000 0.9820000 0.9820000 0.9820 0.9820
                            NA.   0.9910000 0.9910000 0.9910000 0.9910000 0.9910000 0.9910 0.9910
                            left 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000 1.0000 1.0000",header=TRUE)

  cumsum.move <- as.matrix(cumsum.move)

  for(o in 1:reps){

    result<-matrix(as.character(""),steps) # Vector for storing sites
    set.seed(42)
    x<-sample(random,steps,replace=TRUE) # sample array of random number 
    time.step<-data.frame(x) # time steps used in the simulation (i)
    colnames(time.step)<-c("time.step")
    time.step$event<-""

    set.seed(41)
    j<-sample(1:N,1,replace=T) # first column to be selected 
    set.seed(40)
    k<-sample(1:N,1,replace=T) # selection of column for ind. that move in/out  

    for(i in 1:steps){
      for (t in 1:(N+1)){
        if(time.step$time.step[i]<cumsum.move[t,j]){
          time.step$event[i]<-to.r[t]
          break
        }
      }

      ifelse(time.step$event[i]=="",break,NA) 
      result[i]<-time.step$event[i]
      j<-which(to.r==result[i]) 
      if(length(j)==0){j<-k} 
    }

    result<-time.step$event
  }
  result
} 
```

请注意，`result`在 o 的每次迭代中都会被覆盖。我不认为你想要那个，所以我解决了这个问题。此外，您使用`data.frame`循环内部。作为一般规则，您应该避免`data.frames`像瘟疫这样的内部循环。尽管它们非常方便，但就效率而言，它们很糟糕。

```
sim2 <- function(reps=50, steps=100) {

  N<-5 # number of sites
  sites<-LETTERS[seq(from=1,to=N)]
  to.r<-rbind(sites)

  p.move.r<-seq.int(0.05,0.90,by=0.05) # prob of moving to a new site
  p.leave<-0.01*p.move.r # prob of leaving the system w/out returning
  p.move.out<-0.01*p.move.r # prob of moving in/out
  p.stay<-1-(p.move.r+p.leave+p.move.out) # prob of staying in the same site 

  set.seed(42)
  random<-runif(10000,0,1) # generating numbers from a random distribution

  cumsum.move <- read.table(text="A         B         C         D         E    NA.   left
                            A    0.0820000 0.3407822 0.6392209 0.3516242 0.3925942 0.1964 0.1964
                            B    0.1254937 0.4227822 0.6940040 0.3883348 0.4196630 0.3928 0.3928
                            C    0.7959865 0.8730183 0.7760040 0.7930623 0.8765180 0.5892 0.5892
                            D    0.8265574 0.8980259 0.8095507 0.8750623 0.9000000 0.7856 0.7856
                            E    0.9820000 0.9820000 0.9820000 0.9820000 0.9820000 0.9820 0.9820
                            NA.   0.9910000 0.9910000 0.9910000 0.9910000 0.9910000 0.9910 0.9910
                            left 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000 1.0000 1.0000",header=TRUE)

  cumsum.move <- as.matrix(cumsum.move)

  res <- list()
  for(o in 1:reps){

    result<-character(steps) # Vector for storing sites
    set.seed(42)
    time.step<-sample(random,steps,replace=TRUE) # sample array of random number 
    #time.step<-data.frame(x) # time steps used in the simulation (i)
    #colnames(time.step)<-c("time.step")
    #time.step$event<-""
    event <- character(steps)

    set.seed(41)
    j<-sample(1:N,1,replace=T) # first column to be selected 
    set.seed(40)
    k<-sample(1:N,1,replace=T) # selection of column for ind. that move in/out  

    for(i in 1:steps){
      for (t in 1:(N+1)){
        if(time.step[i]<cumsum.move[t,j]){
          event[i]<-to.r[t]
          break
        }
      }

      ifelse(event[i]=="",break,NA) 
      result[i]<-event[i]
      j<-which(to.r==result[i]) 
      if(length(j)==0){j<-k} 
    }

    res[[o]]<-event
  }
  do.call("rbind",res)
} 
```

两个函数给出相同的结果吗？

```
res1 <- sim1()
res2 <- sim2()
all.equal(res1,res2[1,])
[1] TRUE 
```

新版本更快吗？

```
library(microbenchmark)
microbenchmark(sim1(),sim2())

Unit: milliseconds
    expr       min        lq    median        uq       max
1 sim1() 204.46339 206.58508 208.38035 212.93363 269.41693
2 sim2()  77.55247  78.39698  79.30539  81.73413  86.84398 
```

嗯，三倍已经很不错了。我看不到进一步改进循环的可能性，因为那些`break`s. 这只剩下并行化作为一种​​选择。

```
sim3 <- function(ncore=1,reps=50, steps=100) {
  require(foreach)
  require(doParallel)

  N<-5 # number of sites
  sites<-LETTERS[seq(from=1,to=N)]
  to.r<-rbind(sites)

  p.move.r<-seq.int(0.05,0.90,by=0.05) # prob of moving to a new site
  p.leave<-0.01*p.move.r # prob of leaving the system w/out returning
  p.move.out<-0.01*p.move.r # prob of moving in/out
  p.stay<-1-(p.move.r+p.leave+p.move.out) # prob of staying in the same site 

  set.seed(42)
  random<-runif(10000,0,1) # generating numbers from a random distribution

  cumsum.move <- read.table(text="A         B         C         D         E    NA.   left
                            A    0.0820000 0.3407822 0.6392209 0.3516242 0.3925942 0.1964 0.1964
                            B    0.1254937 0.4227822 0.6940040 0.3883348 0.4196630 0.3928 0.3928
                            C    0.7959865 0.8730183 0.7760040 0.7930623 0.8765180 0.5892 0.5892
                            D    0.8265574 0.8980259 0.8095507 0.8750623 0.9000000 0.7856 0.7856
                            E    0.9820000 0.9820000 0.9820000 0.9820000 0.9820000 0.9820 0.9820
                            NA.   0.9910000 0.9910000 0.9910000 0.9910000 0.9910000 0.9910 0.9910
                            left 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000 1.0000 1.0000",header=TRUE)

  cumsum.move <- as.matrix(cumsum.move)

  #res <- list()
  #for(o in 1:reps){
  cl <- makeCluster(ncore)
  registerDoParallel(cl)
  res <- foreach(1:reps) %dopar% {

    result<-character(steps) # Vector for storing sites
    set.seed(42)
    time.step<-sample(random,steps,replace=TRUE) # sample array of random number 
    #time.step<-data.frame(x) # time steps used in the simulation (i)
    #colnames(time.step)<-c("time.step")
    #time.step$event<-""
    event <- character(steps)

    set.seed(41)
    j<-sample(1:N,1,replace=T) # first column to be selected 
    set.seed(40)
    k<-sample(1:N,1,replace=T) # selection of column for ind. that move in/out  

    for(i in 1:steps){
      for (t in 1:(N+1)){
        if(time.step[i]<cumsum.move[t,j]){
          event[i]<-to.r[t]
          break
        }
      }

      ifelse(event[i]=="",break,NA) 
      result[i]<-event[i]
      j<-which(to.r==result[i]) 
      if(length(j)==0){j<-k} 
    }

    #res[[o]]<-event
    event
  }
  stopCluster(cl)
  do.call("rbind",res)
} 
```

结果一样吗？

```
res3 <- sim3()
all.equal(res1,c(res3[1,]))
[1] TRUE 
```

快点？（让我们在我的 Mac 上使用 4 个内核。您可能会尝试访问具有更多内核的服务器。）

```
microbenchmark(sim1(),sim2(),sim3(4))
Unit: milliseconds
     expr        min         lq     median         uq       max
1  sim1()  202.28200  207.64932  210.32582  212.69869  255.2732
2  sim2()   75.39295   78.95882   80.01607   81.49027  125.0866
3 sim3(4) 1031.02755 1046.41610 1052.72710 1061.74057 1091.2175 
```

那看起来很可怕。但是，该测试对并行功能是不公平的。该函数被调用 100 次，只有 50 次重复。这意味着我们获得了并行化的所有开销，但几乎没有从中受益。让我们更公平：

```
microbenchmark(sim1(rep=10000),sim2(rep=10000),sim3(ncore=4,rep=10000),times=1)
Unit: seconds
                          expr      min       lq   median       uq      max
1            sim1(rep = 10000) 42.16821 42.16821 42.16821 42.16821 42.16821
2            sim2(rep = 10000) 16.13822 16.13822 16.13822 16.13822 16.13822
3 sim3(ncore = 4, rep = 10000) 38.18873 38.18873 38.18873 38.18873 38.18873 
```

更好，但仍然不令人印象深刻。如果复制和步骤的数量进一步增加，并行功能看起来不错，但我不知道你是否需要。

# c++ - 分叉进程之间的随机数相同

> ID：13437023
> 
> 赞同：2
> 
> 时间：2012-11-18T02:51:00.557
> 
> 标签：c++, random, fork, srand

我正在从管理器进程中分叉多个进程。然后我想为这些分叉的进程创建一个随机端口号来监听。但是，当我随机播种并获得一个随机数时，我会在三个进程之间获得相同的数字。例如：

经理：

```
int main(){
 for(int i = 0; i < rCount; i++){
  pid_t pid = fork();
  if (pid == 0) {// child
        execl(ROUTERLOCATION,"",NULL); //create router process
   }
   else { // parent
    }
  }
} 
```

路由器：

```
int main(){
  randomPort(); 
}
void randomPort(){
    srand(time(NULL));
    int host_port = rand() % 99999 + 11111;
    cout << houst_port << endl;
} 
```

我曾尝试在经理处播种，然后在该过程中尝试 rand，但是当我可以 rand 时，我仍然遇到相同的问题。除了时间之外，我可以用任何东西播种，并且仍然可以获得良好的随机结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:59:17.317

Seed with `(pid % RAND_MAX) ^ WHATEVER`-- 这将保证每个进程都有不同的种子。

您可以定义`WHATEVER`为特定值，或者`(time(NULL) % RAND_MAX)`如果您想要更少的可预测性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:11:01.527

由于每个进程的时间都相同，因此您需要另一个保证在进程之间不同的输入。进程号适用于此。通过将进程号添加到时间来将两者结合起来。

# performance - 游戏查询碰撞问题

> ID：13437026
> 
> 赞同：1
> 
> 时间：2012-11-18T02:51:36.513
> 
> 标签：performance, collision-detection, gamequery

首先让我说我是 js 的完全新手，我正在上课，我们的任务之一是制作一个基本的竞赛游戏。我们可以使用我们找到的任何脚本，所以我选择了 gamequery。前提是玩家是完全自动化的，并且会在 x% 的时间直接获得，在 y% 的时间正确，其余的时间离开。我使用了 gamequery 教程空间游戏作为一种指南，但是当我处理运动和碰撞时，我的代码使它变得非常慢，尤其是在所有的前后运动中。

```
function Movement(){
movetwo = Math.random();
$(".obstacle").each(function(){                                 
                    var collided = $(this).collision("#player2Body,."+$.gQ.groupCssClass);
                if(collided.length > 0){                        
                             $("#player2").x($("#player2").x()-2);                                                                                          
                }               
                var collided2 = $(this).collision("#playerBody,."+$.gQ.groupCssClass);
                if(collided2.length > 0){                   
                             $("#player").x($("#player").x()-2);                        
                }
            });

if (movetwo <= twol) {
 $("#player2").y($("#player2").y()+2);
}
else if ((movetwo > twol) && (movetwo <= (twol + twor))){
$("#player2").y($("#player2").y()-2);
}
else {
$("#player2").x($("#player2").x()+2);
}
moveone = Math.random();
if (moveone <= twol) {
$("#player").y($("#player").y()+2);
}
else if ((moveone > twol) && (moveone <= (twol + twor))){
$("#player").y($("#player").y()-2);
}
else {
$("#player").x($("#player").x()+2);
}
} 
```

我知道有一种方法可以在移动之前检测碰撞，但我真的不知道如何实现它，因为移动是随机的。交换机会更快吗？同样奇怪的是，它显示了与我放置的三个障碍物以外的所有障碍物发生碰撞，并且由于某种原因，它忽略了那些少数的障碍物，无论它们被随机放置在哪里。我认为我比我的技能水平保证更多，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:28:12.753

而不是检查每个障碍物与玩家的碰撞，您应该做相反的事情：为每个玩家检查他们是否与障碍物发生碰撞。

如果您想在真正移动玩家之前检查玩家是否会与障碍物发生碰撞，您可以使用本文档中解释的覆盖参数：[https ://github.com/onaluf/gameQuery/wiki/API-Changes-in- 0.7](https://github.com/onaluf/gameQuery/wiki/API-Changes-in-0.7)

# android - 使用地理点查 找哪个方向

> ID：13437028
> 
> 赞同：1
> 
> 时间：2012-11-18T02:52:22.613
> 
> 标签：android, geolocation, compass-geolocation

是否可以使用两个地理点制作类似指南针？
因此，无论我的手机如何定位，我都想在现实世界坐标系中找到我移动的方向（如 NW）。换句话说，我的手机在现实世界中面向西方，但我正在前往西北方向，我想使用两个地理点或可能的其他地理点找到我正在前往西北方向，但不是磁场。
谢谢！

# c++ - 运算符重载 'operator()'

> ID：13437029
> 
> 赞同：0
> 
> 时间：2012-11-18T02:52:28.653
> 
> 标签：c++, operators, overloading, priority-queue, dijkstra

我正在实现 Dijkstra 的算法，我想使用 STL 的“priority_queue”来加快编码过程，但是我尝试用 C++ 编码时经常出现这种情况，我对该语言缺乏理解正在减慢我的速度。[我在http://www.cplusplus.com/reference/stl/priority_queue/priority_queue/](http://www.cplusplus.com/reference/stl/priority_queue/priority_queue/)找到了这个例子，但不明白下面是做什么的：

```
// constructing priority queues
#include <iostream>
#include <queue>
using namespace std;

class mycomparison
{
  bool reverse;
public:
  mycomparison(const bool& revparam=false)
    {reverse=revparam;}
  bool operator() (const int& lhs, const int&rhs) const
  {
    if (reverse) return (lhs>rhs);
    else return (lhs<rhs);
  }
};

int main ()
{
  int myints[]= {10,60,50,20};

  priority_queue<int> first;
  priority_queue<int> second (myints,myints+4);
  priority_queue< int, vector<int>, greater<int> > third (myints,myints+4);

  // using mycomparison:
  priority_queue< int, vector<int>, mycomparison > fourth;

  typedef priority_queue<int,vector<int>,mycomparison> mypq_type;
  mypq_type fifth (mycomparison());
  mypq_type sixth (mycomparison(true));

  return 0;
} 
```

更具体地说，'bool operator() (const int& lhs, const int&rhs) const' 是让我绊倒的原因。其余的我都很好。我认为它重载了一个运算符，但“operator()”对我来说毫无意义。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:01:06.620

本质上，`operator()`“只是”另一个可以重载的运算符，因此您所知道的有关运算符重载的所有内容仍然适用 - 它很有用，因为它可以应用于具有与调用函数相同的语法的对象，例如

```
MyClass f;
f(); // i.e. f.operator()(); 
```

也就是说，除此之外，关于函子等还有很多可以说的——您可能想在 Google 上搜索函子/函数对象以获取更多信息。这是一个链接：

[http://en.wikipedia.org/wiki/Function_object](http://en.wikipedia.org/wiki/Function_object)

在上面的代码中，`priority_queue`采用了一个比较函子，用于对放入队列中的内容进行排序。第一个队列 ( `fifth`) 使用正常排序；第二个队列 ( `sixth`) 使用反向排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:02:39.570

那是函数调用运算符，您可以像这样使用它：

```
mycomparison mycomp;  //defines an object
mycomp(1,2);  // invokes operator()(int,int) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T03:01:36.650

```
bool operator () ( const int &, const int & ); 
```

这是一个函数，是 的重载`operator()`，它接受两个整数并返回一个布尔值。`const`表示该值不能更改。它代表*常数*。

# magento - 如何从属性 magento 显示不同值的自定义图像

> ID：13437032
> 
> 赞同：0
> 
> 时间：2012-11-18T02:54:03.923
> 
> 标签：magento, attributes

我想根据 magento 上的属性值获取图像。

例子：

```
Attribute > MyAttribute
Values > Nasa, Google, Linux

Images > Nasa.jpg, Google.jpg, Linux.jpg

Products >

Product Nasa < Get Nasa.jpg if is selected an attribute
Product Google < Get Google.jpg if is selected an attribute
Product Linux < Get Linux.jpg if is selected an attribute 
```

该脚本用于显示是否选择了是。

```
<?php if($_product->getMyAttribute()): ?>
<img src="/path/to/the/image.jpg">
<?php endif; ?> 
```

我自己找到了解决方案。脚本下方。

```
<?php if ($_product->getAttributeText('myattribute') == "Text Inside"): ?> 
<div id="some"><img src="image.jpg"></div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:18:37.020

Johann Reinke 的[属性选项图像](https://github.com/jreinke/magento-attribute-option-image)扩展应该完全符合您的要求。它甚至为管理员提供了一个管理 UI，以便能够维护图像。Johann 的扩展是免费的、开源的并且在 Guthub 上。

# c++ - 在 C++ 中将变量的名称转换为字符串？

> ID：13437034
> 
> 赞同：0
> 
> 时间：2012-11-18T02:54:27.193
> 
> 标签：c++

主功能

```
main(){

    foo x=1, y=1, z=1;

} 
```

标题/类

```
class foo{

public:
    double a, b, c;
    double fn, val;

    // set a,b, and c
    void set(){
        a=1;
        b=1;
        c=1;
    }

    // constructor
    foo(double &f){
        set();

        // what I want to do here is say if "name of variable f" = "x", then do something
        // else if "name of variable f" = "y", do something else
        // else if "name of variable f" = "z", do something else
    }
}; 
```

正如您在 main 函数中看到的那样，x、y 和 z 都具有相同的值。我正在尝试编写一个处理这种情况的条件，以及我想出的一种方法来检查变量名。因为我总是想对名为“x”的类 foo 的对象做同样的事情，并且总是对“y”等做同样的事情，不管这些值是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:35:36.490

你不能做你在问题中要求的事情，有几种方法可以做类似的事情。

您可以使用继承。

```
class foo{

public:
    double a, b, c;
    double fn, val;

    // set a,b, and c
    void set(){
        a=1;
        b=1;
        c=1;
    }

    // constructor
    foo(double &f){
        set();
    }
};

class X : public foo {
{
public:
    X (double &f) : foo(f) {
        // do stuff for x
    }
};

class Y : public foo {
{
public:
    Y (double &f) : foo(f) {
        // do stuff for y
    }
};

class Z : public foo {
{
public:
    Z (double &f) : foo(f) {
        // do stuff for z
    }
};

main(){

    X x=1;Y y=1;Z z=1;

} 
```

或者您可以使用枚举

```
class foo{
public:
    enum Mode{
        Mode_X,
        Mode_Y,
        Mode_Z
    };
    Mode mode;

    double a, b, c;
    double fn, val;

    // set a,b, and c
    void set(){
        a=1;
        b=1;
        c=1;
    }

    foo(Mode m, double &f) : mode(m) {
        set();

        switch(mode) {
        case Mode_X:
            // what I want to do here is say if "name of variable f" = "x", then do something
            break;
        case Mode_Y:
            // else if "name of variable f" = "y", do something else
            break;

        case Mode_Z:
            // else if "name of variable f" = "z", do something else
            break;
        }
    }
};

main(){

    foo x(foo::Mode_X,1), y(foo::Mode_Y,1), z(foo::Mode_Z,1);

} 
```

您可以将预处理器与枚举版本一起使用，以使变量声明更接近您最初要求的内容，如下所示：

```
#define X(value) x(foo::Mode_X,(value))
#define Y(value) y(foo::Mode_Y,(value))
#define Z(value) z(foo::Mode_Z,(value))

main(){
    foo X(1), Y(1), Z(1);
} 
```

包括我自己在内的许多人都建议不要使用这样的预处理器。我只是说这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:11:43.567

您在评论中提到您正在编写一个类来进行偏微分。这是一个建议的起点：

```
class Differentiator{
public:
    double a, b, c;
    double fn, val;
    void differentiateByX(double &f);
    void differentiateByY(double &f);
    void differentiateByZ(double &f);

    Differentiator(): a(1), b(1), c(1)
    {} // Note the syntax above for initializing members.
}; 
```

如果它看起来有用，请随意更改微分函数的返回类型，或添加成员以便您可以执行

```
main(){
    Differentiator foo;
    foo.differentiateByX(1);
    // do something with the result
    foo.differentiateByY(2);
    // etc.
} 
```

如果你知道你总是想通过 X、Y 和 Z 来区分，你可以`Differentiator`用一个函数来做这三个，`differentiate(double &x, double &y, double &z)`或者回到你的构造函数中做所有的工作：`Differentiator foo(x, y, z);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T03:31:14.533

您正在尝试做的事情称为反射（[维基百科](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)）。由于 C++ 是一种已编译的非托管语言，因此它不支持反射。

此外，当代码在 C++ 中编译时，编译器会[破坏变量名称](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)，因此您认为自己创建的变量 (x, y, z) 根本不会像您认为的那样命名，并且新名称没有任何意义。

不幸的是，当您尝试通过检查变量名称来完成时，C++ 无法完成。

# php - 如何使用 JQuery-AJAX、JSON 和 php 发送和接收对象或值？

> ID：13437038
> 
> 赞同：0
> 
> 时间：2012-11-18T02:55:09.193
> 
> 标签：php, json, jquery

如何发送和接收值？

我做错了什么？

jQuery：点击保存按钮

```
$("#budget_submit").click(function(){       
        var budget = $("#budget_cardno").val();
        $.ajax({
            type: 'POST',
            dataType: "json",
            url: 'budget.php',
            data: budget,
            success: function(data){
                if(data.success == true)
                alert(data.message);
        }
        });
    }); 
```

html:

```
<form method="post" id="budgetform">
   <fieldset>
      <ul>
    <li>
      <label>CARD NUMBER</label>
      <input name="budget_cardno" id="budget_cardno" />
    </li>
    <li>
      <label>MONTHLY BUDGET</label>
      <input name="budget_monthly" id="budget_monthly" />
    </li>
    <li>
      <input class="submit" id="budget_submit" name="budget_submit" type="submit" value="Save"/>
        </li>
      </ul>
   </fieldset>
</form> 
```

php：

```
<?php 
$dbhost = '#';
$dbuser = '#';
$dbpass = '#';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
    die('Could not connect: ' . mysql_error());
}

$cardNo = $_POST['budget'];     #This statement does not work.
if($cardNo == "")
{
    mysql_close($conn);
    $data = array('success' => true, 'message' => 'ENTER DETAILS');
    echo json_encode($data);
}

else
{
}
?> 
```

如何将价值预算发送到 PHP 文件并将其存储在 $cardNo 中并返回消息？

我不想在客户端检查条件，因为我有其他条件来检查哪些需要数据库中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:03:25.537

实际上这对我来说似乎很奇怪。

```
if($cardNo == "")
{
    mysql_close($conn);
    $data = array('success' => true, 'message' => 'ENTER DETAILS');
    echo json_encode($data);
} 
```

仅当值为 EMPTY 时才会触发。因此，如果您发送一个值，它不会触发，因为该语句是错误的。将您的 == 更改为 != 所以它声明：如果 $cardNo IS NOT EMPTY 像这样：

```
if($cardNo != "")
{
    mysql_close($conn);
    $data = array('success' => true, 'message' => 'ENTER DETAILS');
    echo json_encode($data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:06:52.250

我认为问题在于您将传入数据视为正常形式，而实际上您正在发送 JSON。因此 PHP 没有找到任何名称为“预算”的 $_POST 参数。

您需要使用获取原始帖子数据`file_get_contents('php://input');`，然后使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)将其转换为对象。然后，您可以从中获取`budget`参数。

所以这样的事情应该有效：

```
$formdata = file_get_contents('php://input');
$formdata_obj = json_decode($formdata);

$cardNo = $formdata_obj->budget; 
```

如果您实际上只是发送一个值（正如您似乎正在做的那样），那么仅第一行就足够了，因为整个数据将是值本身而不是 JSON 编码的对象：

```
$cardNo = file_get_contents('php://input'); 
```

# java - servlet 中的背景路径

> ID：13437043
> 
> 赞同：2
> 
> 时间：2012-11-18T02:56:20.813
> 
> 标签：java, servlets, captcha, bufferedimage, graphics2d

![在此处输入图像描述](../Images/2d3b14f7fd0b5a4c9e49671609665ad2.png)

//下面的行是我的 HTML 表单的元素，它呈现由下面进一步编写的 servlet 发送的图像。

```
 <img style="margin-left:91px; margin-top:-6px;" class="image" src="http://www.abcd.com/captchaServlet"> 
```

我在 java 中使用以下代码生成验证码。

```
public class captchaServlet extends HttpServlet {

  protected void processRequest(HttpServletRequest request, 
                                HttpServletResponse response) 
                 throws ServletException, IOException {

    int width = 150;
    int height = 50;
    int charsToPrint = 6;

     String elegibleChars = "ABCDEFGHJKLMPQRSTUVWXYabcdefhjkmnpqrstuvwxy1234567890";

     char[] chars = elegibleChars.toCharArray();
StringBuffer finalString = new StringBuffer();

   for ( int i = 0; i < charsToPrint; i++ ) {
     double randomValue = Math.random();
     int randomIndex = (int) Math.round(randomValue * (chars.length - 1));
     char characterToShow = chars[randomIndex];
     finalString.append(characterToShow);
   }
   System.out.println(finalString);

    BufferedImage bufferedImage = new BufferedImage(width, height, 
                  BufferedImage.TYPE_INT_RGB);

    Graphics2D g2d = bufferedImage.createGraphics();

    Font font = new Font("Georgia", Font.BOLD, 18);
    g2d.setFont(font);

    RenderingHints rh = new RenderingHints(
           RenderingHints.KEY_ANTIALIASING,
           RenderingHints.VALUE_ANTIALIAS_ON);

    rh.put(RenderingHints.KEY_RENDERING, 
           RenderingHints.VALUE_RENDER_QUALITY);

    g2d.setRenderingHints(rh);

    GradientPaint gp = new GradientPaint(0, 0, 
    Color.BLUE, 0, height/2, Color.black, true);

    g2d.setPaint(gp);
    g2d.fillRect(0, 0, width, height);

    g2d.setColor(new Color(255, 255, 0));

    Random r = new Random();
    int index = Math.abs(r.nextInt()) % 5;
    char[] data=new String(finalString).toCharArray();
    String captcha = String.copyValueOf(data);
    int x = 0; 
    int y = 0;

    for (int i=0; i<data.length; i++) {
        x += 10 + (Math.abs(r.nextInt()) % 15);
        y = 20 + Math.abs(r.nextInt()) % 20;
        g2d.drawChars(data, i, 1, x, y);
    }

    g2d.dispose();

    response.setContentType("image/png");
    OutputStream os = response.getOutputStream();
    ImageIO.write(bufferedImage, "png", os);
    os.close();
  } 

  protected void doGet(HttpServletRequest request, 
                       HttpServletResponse response)
                           throws ServletException, IOException {
      processRequest(request, response);
  } 

  protected void doPost(HttpServletRequest request, 
                        HttpServletResponse response)
                            throws ServletException, IOException {
      processRequest(request, response);
  }
} 
```

但在上面的代码背景中，我猜也是使用 setPaint menthod 生成的。我希望背景是来自我的本地机器的一些图像，我应该能够提到它的 URL

```
URL url=this.getClass().getResource("Desktop/images.jpg");
BufferedImage bufferedImage = ImageIO.read(url); 
```

我写上面两行只是为了让读者更好地理解问题所在。不想使用完全相同的命令。我想要的只是生成的验证码的背景应该是我选择的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:54:00.277

而不是打电话

```
g2d.setPaint(gp);
g2d.fillRect(0, 0, width, height); 
```

你可能需要调用类似的东西：

```
g2d.drawImage(bufferedImage, 0, 0, null); 
```

# admin - 在 Azure SQL 中创建新的管理员级别登录？

> ID：13437045
> 
> 赞同：14
> 
> 时间：2012-11-18T02:56:27.973
> 
> 标签：admin, azure-sql-database

我需要用新的管理员登录名/用户替换我的旧管理员登录名/用户。我尝试了以下方法：

```
CREATE LOGIN newDbAdmin WITH password='123isTheBestPasswordEver'
CREATE USER newDbAdmin 
```

有了这个，我还可以通过 Microsoft SQL Server Management Studio 登录到 Azure SQL。但是，它似乎不是管理员级别的登录+用户。我无法创建表和管理员可以做的其他一些事情。我怀疑我需要对某些模式（dbo？）或类似的东西授予权限......

那么，在 Azure SQL 上创建与原始管理员具有相同权限级别的用户+登录名的正确方法是什么（当我通过 Azure 门户网站创建数据库时创建）。

在相关说明中，我认为处理旧登录的正确方法是：

```
DROP USER oldAdmin
DROP LOGIN oldAdmin 
```

?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-10-29T09:20:33.823

您只能拥有一名服务器级管理员。您可以根据需要创建任意数量的其他登录名和用户，但需要分别授予他们访问各个数据库的权限。您可以通过 azure 门户重置服务器级管理员的密码。

Azure SQL 数据库中没有授予对所有数据库的访问权限的服务器角色。`dbmanager`允许您创建数据库，`loginmanager`允许您创建登录，但必须使用服务器级别的主体登录来授予对单个数据库的访问权限。

要创建新用户并授予对一个或多个数据库的 dbo 权限：

```
-- in master
create login [XXXX] with password = 'YYYYY'
create user [XXXX] from login [XXXX];

-- if you want the user to be able to create databases and logins
exec sp_addRoleMember 'dbmanager', 'XXXX';
exec sp_addRoleMember 'loginmanager', 'XXXX'

-- in each individual database, to grant dbo
create user [XXXX] from login [XXXX];
exec sp_addRoleMember 'db_owner', 'XXXX'; 
```

是的，您删除用户的方式与在本地 sql 中的方式相同。

如果你想在服务器上的所有数据库上创建一个新用户作为 dbo，你可以使用一个小的 powershell 来让你的生活更轻松：

```
$newSqlUser = 'YOUR_NEW_LOGIN_HERE';
$serverName = 'YOUR-SERVER-NAME.database.windows.net'
$sqlAdminLogin = 'YOUR-ADMIN-SQL-LOGIN'
$createAdminUser = $TRUE;

# generate a nice long random password
Add-Type -Assembly System.Web
$newSqlPassword = [Web.Security.Membership]::GeneratePassword(25,3) -Replace '[%&+=;:/]', "!"; 

# prompt for your server admin password. 
# Don't need the username param here but can be nice to avoid retyping
$sqlCreds = get-Credential -Username $sqlAdminLogin -Message 'Enter admin sql credentials'

# Create login and user in master db
$sql = "create login [$newSqlUser] with password = '$newSqlPassword'; create user [$newSqlUser] from login [$newSqlUser];"
invoke-sqlcmd -Query $sql -ServerInstance $serverName -Database 'master' -Username $sqlCreds.UserName -Password ( $sqlCreds.GetNetworkCredential().Password )
"new login: $newSqlUser"
"password: $newSqlPassword"

# sql to create user in each db
if ( $createAdminUser ) { `
    $createUserSql = "create user [$newSqlUser] from login [$newSqlUser]; exec sp_addRoleMember 'db_owner', '$newSqlUser'; "; `
} else { `
    $createUserSql = "create user [$newSqlUser] from login [$newSqlUser]; exec sp_addRoleMember 'db_datareader', '$newSqlUser'; exec sp_addRoleMember 'db_denydatawriter', '$newSqlUser';"; `
}

# can't have multiple Invoke-SQLCmd in a pipeline so get the dbnames first, then iterate
$sql = "select name from sys.databases where  name <> 'master';"
$dbNames = @()
invoke-sqlcmd -Query $sql -ServerInstance $serverName -Database 'master' -Username $sqlCreds.UserName -Password ( $sqlCreds.GetNetworkCredential().Password ) | `
   foreach { $dbNames += $_.name } 
# iterate over the dbs and add user to each one
foreach ($db in $dbNames ) { `
       invoke-sqlcmd -Query $createUserSql -ServerInstance $serverName -Database $db -Username ($sqlCreds.UserName) -Password $( $sqlCreds.GetNetworkCredential().Password ); `
      "created user in $db database"; `
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-12T11:56:03.770

您可以使用 Azure AD 来管理服务器。创建一个 DBA 组 - 将所有 DBA 分配给该组。然后将该组分配为服务器的 AD 管理器 - 这允许您拥有多个 DBA

该组中的任何人都将拥有服务器的完整 DBA 权限。

[https://docs.microsoft.com/en-gb/azure/sql-database/sql-database-aad-authentication](https://docs.microsoft.com/en-gb/azure/sql-database/sql-database-aad-authentication)

理想情况下，我认为他们希望您使用 DBA 授予的包含 DB 级别的用户。对我们来说，我们需要多个管理员，因为我们有很多数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T12:17:13.797

您刚刚创建了一个登录名和一个相应的用户，您必须添加适当的角色成员资格...

例如，

EXEC sp_addrolemember 'dbmanager', 'login1User';

EXEC sp_addrolemember 'loginmanager', 'login1User';

请参阅：[https ://azure.microsoft.com/documentation/articles/sql-database-manage-logins/](https://azure.microsoft.com/documentation/articles/sql-database-manage-logins/)

# ios - 自定义 UINavigationController 具有性能问题的推送/弹出动画

> ID：13437048
> 
> 赞同：1
> 
> 时间：2012-11-18T02:57:55.503
> 
> 标签：ios, uinavigationcontroller, core-animation

我想用 Core Animation 自定义推送和弹出动画！例如，我在 pushViewController 中编写了一些代码，如下所示：

```
{
    //save currrent view's snapshot`

    m_curLayer = [self _ConstructLayerByView:self.view];

    [super pushViewController:viewController animated:NO];

    //save the next view's snapshot
    m_nextLayer = [self _ConstructLayerByView:self.view];

    //add these two new layers to self.view.layer, and add customized animations to them.
    [self _PushAnimation]; 
} 
```

动画效果符合我的预期，但性能很差。经过一些分析，我发现 renderInContext 很慢。我的快照功能是：

```
+ (id)CaptureView:(UIView *)view
{

    UIGraphicsBeginImageContextWithOptions(view.frame.size, YES, [UIScreen mainScreen].scale);
    CGContextRef contenxt =  UIGraphicsGetCurrentContext();

    [view.layer renderInContext:contenxt];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return (id) [newImage CGImage];
} 
```

所以想问问有没有办法优化renderInContext，或者有更好的自定义动画的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:19:36.357

使用添加到 UIViewController 或子类 UINavigationController 的新“容器”功能编写您自己的导航控制器并覆盖所有推送和弹出方法。可能后者会正常工作 - 我出于其他原因将其子类化，而我的子类工作得很好。

许多人评论说，使用 ios5 中的新容器方法，现在可以重新创建大部分（如果不是全部）现有容器类。

# c# - 按照 MVC4 教程，“模型”从何而来，如何更改它的值？

> ID：13437049
> 
> 赞同：0
> 
> 时间：2012-11-18T02:57:55.813
> 
> 标签：c#, asp.net-mvc

VisualStudio2010 告诉我这`Model Property associated with System.Mvc.ViewDataDictionary Object`很有帮助，但[DataDictionary](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewdatadictionary%28v=vs.108%29.aspx)的文档似乎并没有以一种易于理解的格式向我展示我想要的东西。

请注意，以下`.cshtml`文件位于`BorkedModel`的 View 文件夹中，但我要访问的模型位于`ExampleModel`的 Model 文件夹中。如果文件本身位于`ExampleModel`View 文件夹中，而不是位于不同模型的 View 文件夹中，则此确切代码将起作用。

> ProjectTopDirectory/Views/ **BorkedModel** /index.cshtml
> 
> ```
> @model IEnumerable<ExampleMVC4.Models.ExampleModel> 
> 
>     @foreach (var item in Model)
> {
>     <HTML here/>
> } 
> ```

有没有解决我正在做的事情的方法，还是应该让模型保持在他们自己的视野中，仅此而已？有没有办法从另一个模型的视图访问一个模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:24:41.677

要在视图中使用强类型模型，您需要将模型从控制器传递给视图：

```
public ActionResult Index()
{
    YourDBContext db = new YourDBContext();
    IEnumerable<ExampleModel> model = db.GetDataFromDatabase();
    return View(model); // Pass the model to the view
} 
```

然后在您的视图中指定模型，它应该允许您访问数据：

```
@model IEnumerable<NextFlicksMVC4.Models.ExampleModel>

@foreach (var item in Model)
{
    // Your HTML
} 
```

更新：您的控制器操作方法应该从数据库中检索数据，然后将其传递给视图。视图的唯一工作是向用户显示数据。

# twitter-bootstrap - 我在 Twitter Bootstrap 媒体对象中使用了 Font Awesome 图标，但它被切断了

> ID：13437051
> 
> 赞同：1
> 
> 时间：2012-11-18T02:58:48.870
> 
> 标签：twitter-bootstrap, font-awesome

我正在尝试`text-size: 180px;`在 Twitter Bootstrap [Media Object](http://twitter.github.com/bootstrap/components.html#media)中使用 Font Awesome 图标（已应用） 。具体来说，我正在尝试用 Font Awesome 图标替换 Media Object 中的图像。

但是，当我打开页面时，图标在媒体对象的顶部向上移动并被切断。

我试过`[font-awesome] [twitter-bootstrap] cut off`在 Stack Overflow 上搜索，它返回了 2 个结果，但都没有帮助。我还尝试为`<i>`标签本身和 parent设置负边距，但`<div>`都没有运气。

另外，我尝试制作一个 JSFiddle，但无法使其工作，因此我的网站在[http://strugee.github.com/textingwhiledriving/spreadtheword.html](http://strugee.github.com/textingwhiledriving/spreadtheword.html)在线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:19:49.053

您有一个`line-height: 20px;`与`<body>`（继承自 bootstrap.min.css）相关的样式

如果你改变你`.socialicon`的

```
.socialicon {
  font-size: 180px;
  margin-bottom: 100px;
  line-height: 180px; /* or whatever height you desire */
} 
```

图标没有被剪裁

# c# - 从组合框的 SelectedIndexChanged 事件触发 DataGridView 的格式化单元格？

> ID：13437059
> 
> 赞同：0
> 
> 时间：2012-11-18T02:59:35.313
> 
> 标签：c#, winforms

我正在执行以下请求。

1.  用户在 ComboBox 中选择一个项目。
2.  事件处理代码根据`SelectedIndexChanged`ComboBox 的选定值格式化一些单元格。但是，它不起作用。

.

```
void Combobox1_OnSelectedIndexChanged(object sender, ...)
{
    foreach (DataGridViewRow row in GridView1.Rows)
    {
        var c = GridView1.Columns.Count;
        for (int i = 0; i < c; i++)
        {
            if (...some condition using selected value...) 
            {
                 row.Cells[i].Style.BackColor = Color.Green;
                 row.Cells[i].ToolTipText = "test";
            }
        }
    } 
```

问题：是否应该将它添加到事件 CellFormatting、.. 事件中？但是，该算法取决于组合框的事件`SelectedIndexChanged`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:15:56.377

一旦在 CellFormatting 事件中尝试这个..

Foreach 循环

```
 DataGridViewTextBoxCell txt = new DataGridViewTextBoxCell();
   txt.Value = row.Cells[i].Value
   txt.ToolTipText = "test";
   txt.BackColor = Color.Green;
   row.Cells[i] = txt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:28:11.507

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

            var c = dataGridView1.Columns.Count;
             foreach (DataGridViewRow row in this.dataGridView1.Rows)
                {
                    if (comboBox1.SelectedValue==1){
                                row.Cells[0].Style.BackColor = Color.Green;
                                row.Cells[0].ToolTipText = "test";
                        }

            else
            {
                        row.Cells[0].Style.BackColor = Color.Blue;
                        row.Cells[0].ToolTipText = "test";
                }
            }
    }

Thanks 
```

# ruby-on-rails - 如何在 Rails 中加载和执行外部 R 脚本

> ID：13437060
> 
> 赞同：1
> 
> 时间：2012-11-18T02:59:37.403
> 
> 标签：ruby-on-rails, r

我目前正在使用 rseve 和 rserve-simpler gem。

1.  我想加载和执行外部 R 脚本
2.  我想在 R 脚本和我的 rails 应用程序之间传递数据

任何对如何最好地实现这一点有经验的人。我没有绑定到特定的 gem/lib

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:35:36.237

我已经使用以下代码实现了这一点

```
# setup the data to be used by R scripts
r.>> "data <- c(#{out_data_points})"      

# Setup some params for plotting  
r.>> "png(file='#{Rails.root}/public#{plot_file_name}')"
r.>> "plot_name <- '#{self.name} : #{label}'"

# call the custom script      
r.>> "source('#{Rails.root}/app/rscripts/custom_script.r')" 
```

我通过数据变量向 R 发送数据，并且脚本必须在 R 中设置变量，这些变量可以通过 rails 应用程序中的 converse 方法获得。图像也被发送到特定的目录，其名称由 rails 应用程序指定并传递给 RScript。

# python - 当参数具有默认值时，Python递归函数结果取决于先前的调用

> ID：13437063
> 
> 赞同：2
> 
> 时间：2012-11-18T03:00:06.480
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我做了这个功能：

```
def test(num,v=[]):
    v.append(num)
    if num == 10:
        return v
    return test(num+1,v) 
```

当我使用它时，之前调用的结果似乎仍然存在：

```
>>> test(3)
[3, 4, 5, 6, 7, 8, 9, 10]
>>> test(3)
[3, 4, 5, 6, 7, 8, 9, 10, 3, 4, 5, 6, 7, 8, 9, 10]
>>> test(3)
[3, 4, 5, 6, 7, 8, 9, 10, 3, 4, 5, 6, 7, 8, 9, 10, 3, 4, 5, 6, 7, 8, 9, 10] 
```

如果我只`v`在函数声明中使用而不是`v=[]`，它似乎可以工作。
我错过了什么？我希望函数每次运行时都是新鲜的。我使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:03:31.243

当您使用对象作为默认参数时，该对象的同一实例将用于对该函数的所有调用。这对于不可变对象来说很好，但对于可变对象来说却是一个问题。当函数可能期望有一个“新”对象时，同一个对象会被多次修改和重用。

您可以使用这样的解决方法来获得所需的功能：

```
def test(num,v=None):
    if v is None:
        v = []
    .... 
```

# javascript - 在使用 node.js 访问 mysql 数据库方面需要帮助

> ID：13437066
> 
> 赞同：5
> 
> 时间：2012-11-18T03:00:21.967
> 
> 标签：javascript, mysql, node.js

我正在尝试运行一个简单的节点示例来访问 mysql 数据库，并收到以下错误错误：ER_ACCESS_DENIED_ERROR: Access denied for user 'root'@'ubuntu.local' (using password: YES)

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : '192.168.0.12',
  user     : 'root',
  password : 'password',
  database : 'app'
});

connection.connect();

connection.query('SELECT * from users', function(err, rows, fields) {
  if (err) throw err;

  console.log('The solution is: ', rows[0]);
});

connection.end(); 
```

以上是使用node.js访问mysql的代码。任何关于我可能做错的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T20:50:41.913

我遇到了类似的问题，我遇到了同样的错误。

我的答案最终是我使用了不同的端口。默认情况下，mysql 需要 3306 端口，但我使用的是 MAMP，其中 MySQL 服务器端口指定为 8889。只要我将端口定义添加到我的数据库连接，就可以了：

```
var connection = mysql.createConnection({
    port: 8889,
    user: 'root',
    password : 'password',
    database : 'my_database'
}); 
```

注意：这适用于使用 MAMP 的 Mac，尚未在 ubuntu 或 Windows 上尝试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T00:44:27.303

I was getting the exact same issue. I was not able to connect via the mysql module in nodejs, but was able to connect via the mysql client in the terminal (mysql -u root -p1111 -h localhost mydb)

It turns out, the mysql module converts "localhost" to 127.0.0.1. This would not work via the (mysql -u root -p1111 -h 127.0.0.1 mydb). See [Issue 734](https://github.com/felixge/node-mysql/issues/734)

So I had to set a password for 127.0.0.1 in MySQL and it solved the problem.

Instructions

Connect to mysql via the console:

```
mysql -u root -p mysql 
```

And Run

```
SET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('Add-Your_password-here'); 
```

[Source](http://nixcraft.com/showthread.php/14889-Mysql-root-localhost-can-log-but-not-as-127-0-0-1?s=603a93c1e72a954bebab15fe50b59cdd&p=26225&viewfull=1#post26225)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-29T00:00:50.623

我已经解决这个问题很长时间了，在我做过的所有论坛中，一个简单的解决方案可以解决我的问题。我的密码带有一些特殊字符。我把它改成一个更简单的，比如“onlyletters”，它工作得很好。可能是nodejs mysql模块中的编码问题，我可以......希望它对你们中的一些人有所帮助......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-03T20:10:19.170

用户可能没有分配任何管理角色，因此他无法访问数据库。用户至少需要 SELECT 权限才能连接。

更多信息在这里： [https ://dev.mysql.com/doc/workbench/en/wb-mysql-connections-navigator-management-users-and-privileges.html](https://dev.mysql.com/doc/workbench/en/wb-mysql-connections-navigator-management-users-and-privileges.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-23T18:02:57.180

我有一个类似的问题，我的 nodejs 项目。我使用 knex.js 进行查询构建器及其配置。

当主机值为**127.0.0.1**时会出现此问题，当我将 127.0.0.1 更改为 localhost 时，问题就消失了。

```
var knex = require('knex')({
    client: 'mysql',
    connection: {
        **host: 'localhost',**
        user: 'userNew',
        password: 'password',
        database: 'appDb'
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-22T00:15:13.270

实际上，解决方案比您想象的要容易。将主机更改为 127.0.0.1 以进行数据库连接。

# sql - 获取 MDX 查询的实际执行时间/持续时间

> ID：13437070
> 
> 赞同：0
> 
> 时间：2012-11-18T03:01:07.557
> 
> 标签：sql, sql-server-2008, mdx, sql-server-profiler, ssas-2008

如何获取 MDX 查询运行的实际执行时间或实际持续时间？我对编译、解析、渲染结果等不感兴趣。我只对执行时间感兴趣。

在 sql profiler 中，我得到两列，一列是持续时间，另一列是 CPU 时间。更重要的是它显示在两行中。一个用于“查询子立方体”，一个用于“查询结束”事件类。您能否解释一下如何获得所需的运行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:40:40.673

我使用[MDX Studio](http://www.sqlbi.com/tools/mdx-studio/)。它最初由作为 AS 的原始和主要开发人员之一的 Mosha Pasumansky 编写。

# javascript - 添加到数组，检查id是否存在并随机更改

> ID：13437071
> 
> 赞同：0
> 
> 时间：2012-11-18T03:01:11.950
> 
> 标签：javascript, arrays

一段时间以来，我一直在尝试不同的方法，但我已经达到了无论我做什么都会出错的地步。

所以这就是我试图做的。首先，我创建一个随机数并将其添加到数组中：

```
for(.......){
  random[i] = Math.floor(Math.random() * (word.length)); 
```

然后将另一个随机数添加到数组中：

```
randomkey[i] = Math.floor(Math.random() * (word.length)); 
```

然后我创建这个函数：

```
var accept=true;
// word is a text (length:22)
function acceptRandom(random,word){
  stop:
    for(var i=0;i<randomkey.length+1; i++){
      if(word[i] != word[random])
        accept = true;
      else {
        accept = false;
        break stop;
      }
    }
    if(accept == false){
      newrandom = Math.floor(Math.random() * (word.length));
      // Random number exists so we call the function again with a new value
      acceptRandom(newrandom,word);
    } else
      return random;
} 
```

现在，问题是当随机数已经存在时它不会返回新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:10:08.703

由于您正在遍历整个列表，因此**总会**有一个点`word[i] == word[random]`（因为您已经将单词与自身进行了比较。）快速解决方法是：

```
for(var i=0;i<randomkey.length+1; i++){
    if(word[i] == word[random] && i !== random) {
        accept = false;
        break;
    }
} 
```

您还需要返回递归调用：

```
if(accept == false){
      newrandom = Math.floor(Math.random() * (word.length));
      // Random number exists so we call the function again with a new value
      return acceptRandom(newrandom,word);
} 
```

老实说，我认为您遇到了[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。你到底想在这里做什么？可能有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:18:51.020

改变：

```
for(.......){
  random[i] = Math.floor(Math.random() * (word.length));
// You're assigning a random number to random[i] 
```

到

```
for(.......){
  random[i] = words[Math.floor(Math.random() * (word.length))];
// Whereas you should be assigning words[random number] to random[i] 
```

# windows-8 - Windows 8 列表视图重复列

> ID：13437075
> 
> 赞同：1
> 
> 时间：2012-11-18T03:01:37.193
> 
> 标签：windows-8

我正在开发一个 Windows 8 应用程序，我必须在列表视图中连续显示 4 个项目。现在有了代码，我所有的项目都填充在另一个之下。有人可以指导我在 Metro 应用 ListView 中重复列的逻辑。我的代码如下...

```
<ListView x:Name="ItemListView" ItemsSource="{Binding}" Margin="10,190,0,0">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical"  >                      
                <TextBlock Text="{Binding username}" />
                <TextBlock Text="{Binding value}" />
                <Image Source="{Binding thumb}" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:49:36.737

我认为你可以使用

```
<ListView>
   <VirtualizingStackPanel Orientataion="Horizontal">
   </VirtualizingStackPanel>
</ListView> 
```

如果它不起作用，您可以使用`GridView`而不是`ListView`.

# c++ - 记录函数调用的工具？

> ID：13437076
> 
> 赞同：1
> 
> 时间：2012-11-18T03:01:39.230
> 
> 标签：c++, debugging, utility

是否有 C++ 工具可以记录函数调用和传递的内容？

前任：

```
Display::Resize(1024,768)
Player::Jump()
... 
```

或者类似这样的东西，可以线性地查看执行流程，而无需在每个类的每个方法中进行 Log 调用？

我使用 Visual Studio 作为 IDE，但任何可以做到这一点的外部工具或插件都会很棒。有吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T15:05:08.343

这可能会有所帮助：[_penter hook](http://msdn.microsoft.com/en-us/library/c63a9b7h%28v=vs.110%29.aspx)

这是一个[例子](http://www.codeproject.com/Articles/47532/A-Simple-Profiler-using-the-Visual-Studio-C-C-Comp)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:30:41.040

您可以设置断点，以便在使用调试器调用您感兴趣的函数时自动打印回溯，或者使用专门的工具，如[xtrace](http://xtrace.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T15:09:14.283

一个更奇特的解决方案可能是看看[Aspect-Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。一个基本示例是记录函数调用。

有关C++ 示例，请参阅[此内容。](http://en.wikipedia.org/wiki/Aspect-oriented_programming#cite_note-14)

编辑：来自 AspectC++ 的一个小示例，用于跟踪来自成员函数的调用（在这种情况下为 Iter::Reset）

```
aspect Tracer
{ 
   advice call("% %Iter::Reset(...)") : before()
   {
      cerr << "about to call Iter::Reset for " << JoinPoint::signature() << endl;
   }
}; 
```

# web-services - 使用 Spring 和 Axis 运行 Web 服务：无法识别的方法

> ID：13437077
> 
> 赞同：0
> 
> 时间：2012-11-18T03:01:41.313
> 
> 标签：web-services, spring, tomcat, soap, axis

我有一个基于 Spring 的 Web 应用程序，我需要使用 Axis 公开一个 Web 服务。我遵循[了本指南](http://java-x.blogspot.it/2007/01/implementing-web-services-with-spring.html)，但服务仍然无法正常工作。**要恢复**，我有一个这样的 EndPoint 类：

```
package service;

import org.springframework.remoting.jaxrpc.ServletEndpointSupport;

public class SpringWSEndPoint extends ServletEndpointSupport implements ISpringWS {
private ISpringWS springWS;

protected void onInit() {
 this.springWS = (ISpringWS) getWebApplicationContext().getBean("springWS");
}

public String sayHello(String message) {
 return springWS.sayHello(message);
}
} 
```

和 servlet 映射如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>WSSpring</display-name>
<welcome-file-list>
 <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<listener>
 <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
  <servlet-name>axis</servlet-name>
  <servlet-class>org.apache.axis.transport.http.AxisServlet</servlet-class>
  <load-on-startup>5</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>axis</servlet-name>
  <url-pattern>/axis/*</url-pattern>
</servlet-mapping>
</web-app> 
```

因此，一旦我浏览`http://localhost:8080/myProject/axis/SpringWSEndPoint?wsdl`它，它就会出现（似乎正确）自动生成的 wsdl，正如预期的那样。

**但是，如果我去`http://localhost:8080/myProject/axis/SpringWSEndPoint/sayHello`它不会将其识别为服务方法（“此 URL 上没有可用的服务”）**

我想知道我必须以某种方式手动编译任何 .war 或 .aar 文件中的 web 服务......

谢谢

（我在tomcat中运行它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:36:56.083

该服务将接受 POST 请求`http://localhost:8080/myProject/axis/SpringWSEndPoint`，但不接受 GET 请求`http://localhost:8080/myProject/axis/SpringWSEndPoint/sayHello`。Axis 1.x 不支持这种请求样式。但是，它支持这样的东西（用于测试目的）：`http://localhost:8080/myProject/axis/SpringWSEndPoint?method=sayHello&message=test`.

# wordpress - Wordpress 网站显示“索引 /”

> ID：13437080
> 
> 赞同：2
> 
> 时间：2012-11-18T03:02:17.267
> 
> 标签：wordpress, hostmonster

在我的服务器上重新安装了 WP，它现在显示：[http ://www.mtthwbsh.com](http://www.mtthwbsh.com)

我做了一些阅读，只找到了有关更改 HTaccess 的信息，但我不确定这意味着什么。如果有人遇到这个问题并且可以提供一些见解，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T03:03:52.210

这不是`.htaccess`问题。您只需将`index.php`文件安装到目录中即可。没有它，网站默认不会加载任何内容。

# r - 如何将多行单元格读入 R 数据帧

> ID：13437081
> 
> 赞同：1
> 
> 时间：2012-11-18T03:02:25.397
> 
> 标签：r

[我试图读入 R 数据框的数据示例](http://i.stack.imgur.com/vgD6B.jpg)

亲爱的朋友们： 我正在尝试将包含多行的单个 Excel 单元格中的数据读入 R 数据框。理想情况下，我希望将这些多行保留在数据框中的一个位置，并在这些行之间使用一些分隔符，例如 |、; 等。

我怎么能那样做？

生成的文件应该是这样的：

患者部分***_* __ *_* __ *_* __ *_* __ *_****赞助商*****__**主要药物 _其他药物**

 **“合并症……|糖尿病……|高血压……” **__ *NIDDK* __***塞来昔布***__** .....

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:35:14.957

这可能取决于您如何访问这些数据。如果您将其导出为 CSV 文件，则单元格中的 CR-LF 可能会中断行，因此需要使用 读取它们，`readLines()`然后使用`paste()`. 另一方面，如果您使用旨在读取单个单元格的包，则换行符可能会合并到单个元素中。您应该显示 CSV 输出...或说明您计划如何访问 hte XLS 文件并将其中的一部分发布到人们可以到达的地方。

在 Mac 上，它需要 ctl-opt-enter 才能将 cr-lf 放入单元格中。如果存在，则导出会在文本编辑器中生成如下所示的结果

```
"there is 
a test of 
alt-ctl-enter
" 
```

然后用 read.table 看起来像这样：

```
read.table("~/test.csv", header=FALSE)
                                      V1
1 there is \na test of \nalt-ctl-enter\n
#plus a harmless warning about an incomplete line. 
```

所以它作为向量中的单个字符元素。用 "|" 替换 R 字符串中的 <"cr-lf"> 的 "\n" （管道）使用 gsub：

```
 dat <- read.table("~/test.csv", header=FALSE)
 gsub("\n", "|", dat$V1)
#  [1] "there is |a test of |alt-ctl-enter|" 
```**

# ruby-on-rails - ruby on rails button_to 不激活删除方法

> ID：13437090
> 
> 赞同：0
> 
> 时间：2012-11-18T03:04:43.430
> 
> 标签：ruby-on-rails

嗨，我正在关注敏捷 Web 开发电子书，但我似乎无法激活注销操作

这是相关部分（TAB 键不起作用无法格式化为代码）

`rake routes`

`logout DELETE /logout(.:format) sessions#destroy`

从路由文件

```
controller :sessions do
    get 'login' => :new
    post 'login' => :create
    delete 'logout' => :destroy
  end 
```

我的控制器

```
def destroy
session[:user_id] = user.id
redirect_to store_url , notice: "Logged out"
end 
```

和我的观点（相关部分） `<%= button_to 'Logout', logout_path, method: :delete %>`

错误消息是 No route matches [GET] "/logout"

我知道它应该使用删除方法，但我所做的似乎无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:04:15.940

您可能需要`match`在您的路线中添加一个。抱歉，我没有可以参考的书。

把它放在你的上面`controller :sessions ...`

```
match 'logout' => 'sessions#destroy', :as => :logout 
```

如果你没有把上面的行，你的注销路径应该是`sessions_logout_path`，而不是`logout_path`。

参考： http: [//guides.rubyonrails.org/routing.html#naming-routes](http://guides.rubyonrails.org/routing.html#naming-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:02:53.623

`match '/logout' => 'sessions#destroy', :via => :delete`

或者

```
controller :sessions do
  member do
     delete :destroy, :as => :logout
  end
end 
```

# javascript - 在显示 div 之前，是否可以在隐藏的 div 中不加载 iframe？

> ID：13437091
> 
> 赞同：17
> 
> 时间：2012-11-18T03:05:14.063
> 
> 标签：javascript, html, hidden

基本上，当客户点击链接时会显示一个隐藏的 div。该 div 显示一个 php formail，询问客户有关他/她感兴趣的产品的问题。

这是我在网上找到的使用 jquery 对我很有用的代码：

```
<script type="text/javascript">

$(document).ready(function(){

$('.show_hide').showHide({           
    speed: 500,  // speed you want the toggle to happen 
    easing: '',  // the animation effect you want. Remove this line if you dont want an effect and if you haven't included jQuery UI
    changeText: 1, // if you dont want the button text to change, set this to 0
    showText: 'REQUEST A QUOTE',// the button text to show when a div is closed
    hideText: 'CLOSE' // the button text to show when a div is open

}); 

});

</script> 
```

CSS很简单：

```
#slidingDiv, #slidingDiv_2{
height:300px;
background-color: #e2e2e2;
padding:20px;
margin-top:10px;
border-bottom:30px solid #000000;
display:none;
} 
```

这是外部java脚本：

```
(function ($) {
$.fn.showHide = function (options) {

    //default vars for the plugin
    var defaults = {
        speed: 1000,
        easing: '',
        changeText: 0,
        showText: 'Show',
        hideText: 'Hide'

    };
    var options = $.extend(defaults, options);

    $(this).click(function () { 

         $('.toggleDiv').slideUp(options.speed, options.easing);    
         // this var stores which button you've clicked
         var toggleClick = $(this);
         // this reads the rel attribute of the button to determine which div id to toggle
         var toggleDiv = $(this).attr('rel');
         // here we toggle show/hide the correct div at the right speed and using which easing effect
         $(toggleDiv).slideToggle(options.speed, options.easing, function() {
         // this only fires once the animation is completed
         if(options.changeText==1){
         $(toggleDiv).is(":visible") ? toggleClick.text(options.hideText) : toggleClick.text(options.showText);
         }
          });

      return false;

    });

};
})(jQuery); 
```

现在我相信在这段代码中，即使没有显示，表单也会自动加载。我可能是错的，如果是，请纠正我。

**问题**，我如何确保 div 内的这个 iframe 仅在 div 不再隐藏时才加载？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-18T03:08:26.493

`iframe`与其使用其`src`属性加载 ，不如使用属性加载它`data-src`。对于它的值，请提供您在父`div`级可见时使用的最终位置。

```
<div class="hidden_element">
    <iframe data-src="http://msdn.microsoft.com"></iframe>
</div> 
```

当您显示 parent`div`时，发出一个接受`iframe`属性的回调，`data-src`并将其值设置为 的`src`属性`iframe`，使其加载。

```
// Show our element, then call our callback
$(".hidden_element").show(function(){
    // Find the iframes within our newly-visible element
    $(this).find("iframe").prop("src", function(){
        // Set their src attribute to the value of data-src
        return $(this).data("src");
    });
}); 
```

演示：http: [//jsfiddle.net/bLUkk/](http://jsfiddle.net/bLUkk/)

# sql - ms sql 查询 POS 项目销售

> ID：13437096
> 
> 赞同：1
> 
> 时间：2012-11-18T03:07:22.903
> 
> 标签：sql

我有一个关于 POS 系统项目销售数据的 SQL 问题。在数据库中，有一个“总计”表。在该表中，包含由“TtlType”字段标识的各种记录。我正在使用两种类型。值 11，即 Item POS Sales，值 12，即 Item Cost Sales。

当我做我的 SQL 查询时，我正在做一些事情

```
SELECT ItemNumber,
       SUM(ItemCount),
       SUM(ItemAmount)
FROM Totals 
WHERE TtlType = 11 
      AND Date = 8/1/2012 
```

等等

我还想包括 TtlType 12。如何将所有数据合并到一行中？

如果我将 WHERE 更改为包含 TtlType 11 和 12，我会为每个菜单项获得 2 行单独的行。第一个是 TtlType 11，即售价，下一个是 12，即成本。BOTH TtlType 使用相同的字段名称来记录信息（ItemCount，ItemAmount）

我希望我解释得足够好。当我使用 GROUP BY 时，我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:16:34.520

我不确定我是否完全理解您的数据结构，或者 ItemNumber 的重要性。

但是，您不需要 GROUP BY 来进行 SUM，因为您已经知道，但是在 SELECT 和 GROUP BY 中包含 ItemNumber 肯定会导致您有重复的行，因为它将在该列上分组。

你不应该对这两个 SUM 函数有任何问题

```
SELECT SUM(ItemCount), SUM(ItemAmount) FROM Totals WHERE TtlType IN (11,12) 
AND Date = 8/1/2012 
```

# ios - Ruby apns gem 返回 nil

> ID：13437099
> 
> 赞同：8
> 
> 时间：2012-11-18T03:08:29.050
> 
> 标签：ios, ruby-on-rails, apple-push-notifications

我正在尝试让 APNS gem 与我的 Rails 应用程序一起使用。我最初是在几个月前设置的，并且向 iOS 设备推送通知运行得很好。现在，我的应用程序已上线，我发现通知不再发出。[APNS gem](https://github.com/jpoz/APNS)已经有一段时间没有更新了，所以我尝试了各种后来的分支，都达到了相同的效果。

这就是我正在做的事情：

```
APNS.host = 'gateway.push.apple.com' 
APNS.pem  = Rails.root + "lib/push_production.pem"
APNS.port = 2195 
APNS.send_notification(device_token, "Test send" ) 
```

结果呢？

```
=> nil 
```

没有任何方法的反馈，也没有我可以检查的日志文件。我已经尝试生成和重新生成我的证书；那里一切似乎都很好。我尝试以各种方式表达我的设备令牌，没有尖括号，字符组之间没有空格...... APNS 不在乎。

考虑到其中涉及的活动部件的数量，我知道这是一个棘手的问题。但是任何人都可以建议在哪里看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:38:57.227

[官方文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)是这样说的：

> 如果您发送通知并且 APNs 发现通知格式错误或无法理解，它会在断开连接之前返回错误响应数据包。**（如果没有错误，APNs 不会返回任何内容。）**图 5-3 描述了错误响应数据包的格式。

所以只有 gem 不返回任何东西才有意义，因为 Apple 的服务器不会让它知道它在做什么。此外，如果您查看 gem 的 github 页面，给定的示例不处理`APNS.send_notification`.

上次我使用 Apple Push Notifications 时，它的行为就像一个黑盒子，大部分时间都不返回任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:45:35.323

我相信我已经找到了答案。在 Urban Airship 注册了一个账号后，我尝试向我的手机发送一条测试消息，但还是无济于事。但是这些家伙实际上是一起行动的，所以他们能够向我显示错误信息！原来我的设备令牌无效。为什么？因为它是由应用程序的沙盒版本生成的。

是的，我的应用程序在商店中，但事实证明，我的 App Store 分发配置文件是在将推送通知权利添加到其中之前生成的。因此，当您在我的可执行文件上运行 codesign 工具时，它不会显示权利。这是一个例子：

```
Diomedes:Release-iphoneos aaron$ codesign -dvvvv --entitlements - Tiberius.app 
```

该命令应显示一个 plist，其中包含值为“production”的键。我的版本根本没有那个钥匙。

实际上，我被迫在 Provisioning Portal 中生成一个全新的分发配置文件，它最终确实包含了正确的权利。我还没有能够对此进行测试（8 天的 App Store 审查，有人吗？）但我觉得这就是问题所在。

PS Urban Airship 网站上的[这篇文章对我很有帮助。](https://support.urbanairship.com/customer/portal/articles/71836-rejected-device-tokens)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T11:40:39.077

这对我有用，

```
Is your sandbox value correct? Use false for production certificates and use true for development certificates. 
```

PS [https://github.com/tompesman/push-core/issues/27](https://github.com/tompesman/push-core/issues/27)

# bash - 比较bash中两个变量的内容

> ID：13437104
> 
> 赞同：54
> 
> 时间：2012-11-18T03:10:03.260
> 
> 标签：bash, diff

我在 bash 脚本中有一个变量`$data`和变量：`$file`

```
data=$(echo "$(printf '%s\n' "${array[@]/%/$'\n\n'}")")
file=$(<scriptfile_results) 
```

这些变量将包含文本。如何比较这两者？一种选择是使用*diff* (1) 实用程序，如下所示：

```
diff -u <(echo "$data") <(echo "$file") 
```

这是比较两个变量的内容的正确而优雅的方法吗？另外`<( )`技术怎么称呼？据我了解，为每个`<( )`临时文件（命名管道）创建..

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-18T04:18:20.007

是的，`diff <(echo "$foo") <(echo "$bar")`很好。

通过在[bash 手册页](http://linux.die.net/man/1/bash)中搜索字符`<(`，您可以发现这称为“进程替换”。</p>

您不必担心创建临时文件的效率，因为临时文件实际上只是一个管道，而不是磁盘上的文件。试试这个：

```
$ echo <(echo foo)
/dev/fd/63 
```

这表明临时文件实际上只是管道“文件描述符 63”。尽管它出现在虚拟`/dev`文件系统上，但从未接触过磁盘。

您可能需要担心的实际效率问题是“流程替换”中的“流程”部分。Bash fork 另一个进程来执行`echo foo`. 在某些平台上，如 Cygwin，如果频繁执行，这可能会非常慢。但是，在大多数现代平台上，`fork`ing 非常快。我刚刚尝试通过运行脚本一次执行 1000 个进程替换：

```
echo <(echo foo) <(echo foo) ... 997 repetitions ... <(echo foo) 
```

在我的旧 Mac 笔记本电脑上花费了 0.225 秒，在同一台笔记本电脑上运行的 Ubuntu 虚拟机中花费了 2.3 秒。除以 1000 次调用，这表明进程替换所需的时间不到 3 毫秒——这与 的运行时间相比完全相形见绌`diff`，而且您可能不需要担心任何事情！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T03:33:04.577

```
test "$data" = "$file" && echo the variables are the same 
```

如果你想详细一点，你也可以这样做：

```
if test "$data" = "$file"; then
  : variables are the same
else
  : variables are different
fi 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-10T16:21:13.470

这对我最有效：

```
var1="cat dog mule pig"
var2="cat dog ant"

diff <( echo "$var1" ) <( echo "$var2" ) 
```

首先我设置了 var1 和 var2。然后我用 <( ) 元素区分输入是一个变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-13T12:09:30.653

```
~ cat test.sh   

#!/usr/bin/env bash

array1=(cat dog mule pig)
array2=(cat dog ant)

diff -ia --suppress-common-lines <( printf "%s\n" "${array1[@]}" ) <( printf "%s\n" "${array2[@]}" ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-12T12:39:56.390

使用`comm`：

```
comm -23 <(echo $variableA | tr ' ' '\n' | sort) <(echo $variableB | tr ' ' '\n' | sort) 
```

# c++ - 检查容器是否有值（c++）

> ID：13437108
> 
> 赞同：-1
> 
> 时间：2012-11-18T03:10:53.523
> 
> 标签：c++, contain

我有一个自定义类“团队”，它的属性之一是它的“名称”。创建每个“团队”后，我将其添加到矢量团队列表中。

我想实现一个功能，不断提示用户输入一个团队名称，该名称尚未被团队列表中的团队使用。我有以下代码：

```
while (true) {
    string newString;
    bool flag = true;
    getline(cin, newString);
    for (int i = 0; i < teamList.size(); i++) {
        if (teamList[i].name.compare(newString) == 0) flag = false; 
    }
    if (flag == true) {
        return newString;
    } else {
        cout << "name already taken." << endl;
    }
} 
```

但是，这段代码真的很难看；有没有更好的检查方法？另外，一个更普遍的问题——面对丑陋的代码问题（比如这个），我可以采取哪些步骤来找到一个新的、更干净的实现？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:24:48.610

我会使用`std::set`, 它为您处理重复项。举个例子，你可以看到类是按字符串成员排序的，当插入三个时`main`，只留下两个，因为其中两个插入的字符串相同，所以它们被视为相等。

```
#include <iostream>
#include <set>
#include <string>

struct SetThing {
    SetThing(int value, const std::string &value2) : i(value), s(value2){}

    int i;
    std::string s;

    bool operator<(const SetThing &other) const {
        return s < other.s;
    }
};

int main() {
    std::set<SetThing> s;
    s.insert(SetThing(5, "abc"));
    s.insert(SetThing(4, "def"));
    s.insert(SetThing(6, "abc"));
    std::cout << s.size();
} 
```

现在插入，您可以`second`在返回对的成员为时重新提示`false`：

```
do {
    //get input
} while (!teamList.insert(somethingBasedOnInput).second); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:59:37.743

定义一个相等运算符`team`，可以将 a`team`与字符串进行比较：

```
 bool team::operator==(string s) const
  {
    return(s==name);
  } 
```

然后你可以使用`find`：

```
vector<team>::const_iterator itr = find(teamList.begin(), teamList.end(),
                                        newString);

if(itr!=league.end())
  cout << "name already taken" << endl; 
```

# google-docs-api - Google Docs API 中是否有一项功能可以让人们获取有关文档标题的信息？

> ID：13437109
> 
> 赞同：1
> 
> 时间：2012-11-18T03:10:55.407
> 
> 标签：google-docs-api

我正在尝试帮助一位同事（也是非开发人员）确定一种工具的可能性，该工具将在 Google Docs 帐户中的文档上收集元数据。他们想要访问的信息类型之一是关于文档中使用的样式（例如，标题和标题样式）的元数据。此数据可用于为特定集合创建主目录。

我在[Google Drive SDK 站点上找到了](https://developers.google.com/drive/)[API 参考](https://developers.google.com/drive/v2/reference/)部分，但它似乎不包含任何有关样式或标题的信息。这种能力是否以其他形式或其他形式存在？如果没有，是否有人对更暴力的方式获取此信息有任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:37:12.587

这似乎可以使用较新的 Google Drive API 和 indexableText 属性来完成： [https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

您的脚本需要解析文档内容并确定可索引的文本，包括标题、章节标题等，并将字符串放入 indexableText 属性中，以允许 Google Drive 搜索基于此数据定位文件。

# c# - 数组列表语法

> ID：13437112
> 
> 赞同：3
> 
> 时间：2012-11-18T03:11:22.053
> 
> 标签：c#, arraylist

所以我需要在 C# 中使用 ArrayList。我在 MSDN 中查找，他们说我必须创建一个类，添加 System.Collections 并添加

```
IList, ICollection, IEnumerable, 
```

`ICloneable`到班级

```
class clsExample : IList, ICollection, IEnumerable, ICloneable; 
```

然后我尝试使用我的 Arraylist。所以我输入：

```
ArrayList myAL = new ArrayList(); 
```

但问题是，当我尝试向数组 ( `myAL.Add(1, Example);`) 中添加内容时，代码没有找到`array (myAL)`并在其中标出错误。我错过了什么吗？代码：

```
 using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;

namespace WindowsFormsApplication7
{
    [SerializableAttribute]

    class clsAL : IList, ICollection, IEnumerable,
    ICloneable
    {
        ArrayList AL = new ArrayList();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:12:58.693

`To use ArrayList you do not need to implement the Interfaces`你正拥有的。删除它们并使用下面给出的某种方法将对象添加到 ArrayList 中。如果可能的话，您应该查看可以使您免于类型转换的[**通用列表。**](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

```
namespace WindowsFormsApplication7
{     
    class clsAL
    {
        ArrayList AL = new ArrayList();
        public void YourFun()
        {
             AL.Add("First");
        }
    }
} 
```

编辑：您可以查看这个[**msdn 示例**](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)以了解如何使用 ArrayList

```
using System;
using System.Collections;
public class SamplesArrayList  {

   public static void Main()  {

      // Creates and initializes a new ArrayList.
      ArrayList myAL = new ArrayList();
      myAL.Add("Hello");
      myAL.Add("World");
      myAL.Add("!");

      // Displays the properties and values of the ArrayList.
      Console.WriteLine( "myAL" );
      Console.WriteLine( "    Count:    {0}", myAL.Count );
      Console.WriteLine( "    Capacity: {0}", myAL.Capacity );
      Console.Write( "    Values:" );
      PrintValues( myAL );
   }

   public static void PrintValues( IEnumerable myList )  {
      foreach ( Object obj in myList )
         Console.Write( "   {0}", obj );
      Console.WriteLine();
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:16:29.073

除非您因为某些特殊原因而被迫使用 ArrayList，否则我强烈建议您改用泛型 List 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T04:00:38.097

对于一个[`ArrayList.Add`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.add%28v=vs.100%29.aspx)没有与您要添加的内容相匹配的签名，它只是一个对象。我能想到的最接近的事情是使用这样的[`ArrayList.Insert`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.insert%28v=vs.100%29.aspx)方法。另一件事是确保您的 ArrayList 在您尝试使用它的范围内。

```
AL.Insert(AL.Count,"Example"); 
```

或者

```
Al.Add("Example"); // will append it to the ArrayList 
```

# html - 更改输入框：带有 CSS/HTML 的输入区域

> ID：13437113
> 
> 赞同：1
> 
> 时间：2012-11-18T03:12:07.417
> 
> 标签：html, css, input, area

所以，我有一个框，我想用作我的搜索框/输入框。虽然当我在上面打字时，我可以在整个图像上打字。

我想要做的是只能输入图像的空白区域？我会添加填充吗？

这是我的 CSS：

```
input.searchbox {
background-color: #fff;
background:url(search.png) no-repeat;
width:250px;
height:41px;
border:none;
font-size:20px;
} 
```

这是我的 HTML：

```
<input type="text" class="searchbox" size="20" value="{Q}"> 
```

另外，我将如何更改框中的文本大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:15:57.407

您的图像是**背景**图像。因此，如有必要，文本将覆盖它。

尝试放置一个单独的图像，并在该图像和文本之间留出一些边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:30:30.507

根据您的图像（文本位置，文本是什么），我使用表格来保存输入（带有图像），然后在单独的列中具有旁边带有匹配图像的提交按钮。

恕我直言，这实际上取决于您使用的图像以及您如何尝试将其与输入字段匹配。

# python - 如何用 Python 中的另一个字符替换字符串中的字符？

> ID：13437114
> 
> 赞同：7
> 
> 时间：2012-11-18T03:12:08.663
> 
> 标签：python, string, replace

我想用“！”替换字符串“aeiou”中不是“i”的每个字符

我写：

```
def changeWord(word):
    for letter in word:
        if letter != "i":
            word.replace(letter,"!")
    return word 
```

这只是返回原件。我怎样才能返回“!!i!!”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T03:17:35.157

Python 中的字符串是不可变的，因此您无法就地更改它们。查看[str.replace 的文档](http://docs.python.org/2/library/stdtypes.html?highlight=str.replace#str.replace)：

> 返回字符串的副本，其中所有出现的子字符串 old 都替换为 new。如果给定了可选参数 count，则仅替换第一个 count 出现。

因此，要使其工作，请执行以下操作：

```
def changeWord(word):
    for letter in word:
        if letter != "i":
            word = word.replace(letter,"!")
    return word 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T03:18:34.683

正则表达式对于这类事情非常强大。这会将任何不是“i”的字符替换为“！”

```
import re
str = "aieou"
print re.sub('[^i]', '!', str) 
```

返回：

```
!!i!! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T03:15:07.177

像这样使用`split()`和`join()`：

```
In [4]: strs="aeiou"

In [5]: "i".join("!"*len(x) for x in strs.split("i"))
Out[5]: '!!i!!' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T03:32:51.767

试试这个，作为一个单行：

```
def changeWord(word):
    return ''.join(c if c == 'i' else '!' for c in word) 
```

可以使用生成器简洁地表达答案，在这种情况下无需使用正则表达式或循环。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-18T03:35:35.237

似乎没有人给予任何爱[`str.translate`](http://docs.python.org/2/library/string.html#string.translate)：

```
In [25]: chars = "!"*105 + 'i' + "!"*150

In [26]: 'aeiou'.translate(chars)
Out[26]: '!!i!!' 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-10T00:31:44.973

> 通常在 python 中字符串是不可变的，这意味着它在创建后无法更改。所以我们必须将字符串转换为可变的，这可以使用列表来实现，因为它是可变的。

**字符串="爱"**

```
editable = list(string)
editable[2]='s'
string=''.join(editable) 
```

**输出：输**

# java - 如何将此排序方法转换为 Java 中的通用方法？

> ID：13437120
> 
> 赞同：3
> 
> 时间：2012-11-18T03:13:09.690
> 
> 标签：java, generics, sorting

这个问题有点长……所以请多多包涵。

我必须转换我书中介绍的用于对数组进行排序的 SelectionSort 方法，并使其具有通用性，以便我可以在其中输入双精度数或整数并使其工作。

它似乎不允许泛型数组，所以我尝试使用 ArrayList。这里的问题是由于 int 和 doubles 现在位于 Integer 和 Double 包装器中，它破坏了 SelectionSort 方法。

我试图修复它，但我没有运气。我将在下面发布原始的 SelectionSort 方法，然后是我正在创建的类和驱动程序。

原始选择排序：

```
public class SelectionSort {
private int[] data;
private static final Random generator = new Random();

public SelectionSort(int size) {
    data = new int[size];

    for(int i = 0; i < size; i++) {
        data[i] = 10 + generator.nextInt(90);
    }
}

public void sort() {
    int smallest;

    for(int i = 0; i < data.length - 1; i++) {
        smallest = i;

        for(int index = i + 1; index < data.length; index++) {
            if(data[index] < data[smallest]) {
                smallest = index;
            }
        }

        swap(i, smallest);
    }
}

public void swap(int first, int second) {
    int temporary = data[first];
    data[first] = data[second];
    data[second] = temporary;
}

} 
```

我的简单驱动程序：

```
public class GenericsDriver {

public static void main(String[] args) {

    SelectionSort<Integer> intSort = new SelectionSort<Integer>();

    intSort.AddGrade(100);
    intSort.AddGrade(90);
    intSort.AddGrade(50);
    intSort.AddGrade(80);
    intSort.AddGrade(95);

    intSort.PrintNumbers();

    //sort here

    intSort.PrintNumbers();

    SelectionSort<Double> doubleSort = new SelectionSort<Double>();

    doubleSort.AddGrade(100.1);
    doubleSort.AddGrade(90.4);
    doubleSort.AddGrade(50.7);
    doubleSort.AddGrade(100.2);
    doubleSort.AddGrade(100.5);

    doubleSort.PrintNumbers();

    //sort here

    doubleSort.PrintNumbers();

}

} 
```

新类和我重新利用 SelectionSort 方法的尝试：

```
import java.util.*;

public class SelectionSort <T> {

private Array<T> numbers;

public SelectionSort() {
    numbers = new ArrayList<T>();
}

public void AddGrade(T number) {
    numbers.add(number);
}

public void PrintNumbers() {
    System.out.println(numbers.toString());

}

public <T extends Comparable<T>> selectionSort() {
    int smallest;

    for(int  i = 0; i < numbers.size(); i++) {
        smallest = i;

        for(int index = i + 1; index < numbers.size(); index++) {
            if(numbers.) {
            //I've tried everything here...
                            //from using number.get(index), and everything else
                            //I could think of
            }
        }
    }
}

public void swap(int first, int second) {

}

} 
```

正如你所看到的......我在我的新班级中没有任何排序或交换的运气。我无法让它工作。我的说明提示我应该在我的排序方法中使用 > ......但没有什么能让我能够使用 .compareTo() 方法。

这是我书中的实际指令：根据图 19.6 和 19.7 的排序程序编写一个通用方法 selectionSort（这就是我上面给出的代码）。编写一个测试程序，输入、排序和输出一个整数数组和一个浮点数组。提示：在方法 selectionSort 的 type-parameter 部分使用 >，以便您可以使用方法 compareTo() 来比较 T 表示的类型的对象。

有人可以在这里给我一些指导吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:53:14.930

看来您是泛型的新手。如果您希望程序成为您编写的方式，我可以指出一些错误，您可以改进这些错误，然后尝试运行您的程序。

在您将类定义为的第三个代码清单中

```
SelectionSort <T> 
```

宣言

```
private Array<T> numbers; 
```

不正确，因为您不想要这个 Array 类，您可以改用以下内容：

```
private List<T> numbers; 
```

此外，没有必要将新的 selectionSort() 泛型方法声明为

```
public <T extends Comparable<T>> selectionSort() { 
```

您是否真的希望 Comparable 或其子类成为返回类型？不，您希望将 T 的列表作为选择排序过程的输出返回。

如果您仍有任何疑问，请返回。

乐于帮助达拉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:42:36.750

快速浏览一下 javadocs ( [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html) ) 表明 Double 实现了 Comparable 接口，这意味着它将有一个compareTo() 方法。

你的书试图强迫你理解的一点是，你可以有多种类型（Integer、Double）来实现相同的接口（Comparable），并且你可以在你的代码中利用它。

所以：

Double firstDouble = Double.valueof(42.0); Double secondDouble = Double.valueof(43.0);

整数 firstInteger = Integer.valueof(42); 整数 secondInteger = Integer.valueof(43);

所以你可以写： firstDouble.compareTo(secondDouble) 和 firstInteger.compareTo(secondInteger) - 但是通过在 Comparable 上实现排序（而不是 Integer、Double 等），你可以使用：

numbers.get(i).compareTo(numbers.get(i+1));

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T03:44:09.937

使用比较器。[这个](https://stackoverflow.com/questions/2839137/how-to-use-comparator-in-java-to-sort)SO 答案有一些细节。您可以使用相同的概念来定义自己的比较器。这样你的排序算法是真正通用的，可以处理任何数据类型（例如复数）

# r - 如何在R中使用带有变量的函数？

> ID：13437124
> 
> 赞同：0
> 
> 时间：2012-11-18T03:14:39.783
> 
> 标签：r

在 R 中，pdf 函数可以将图形保存在`c:/test`：

```
pdf("c:/test") 
```

我想制作一个变量替换pdf，我怎样才能让它运行？

```
str<-"pdf"
str("c:/test") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:21:55.240

get() 这样做：

```
get(str)("c:/test") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T08:13:13.067

`s = "pdf" ; do.call(s, list("c:/test"))`

或分两步，

```
cl <- call(s, "c:/test")
eval(cl) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T08:09:10.647

您可以提取名称指定的函数`str`with `match.fun`：

```
match.fun(str)("c:/test") 
```

顺便说一句：命名对象不是一个好主意，`str`因为这是 R 中基本函数的名称。

# ios - 在 IOS 中像 X-Ray 一样扫描图像

> ID：13437127
> 
> 赞同：0
> 
> 时间：2012-11-18T03:15:19.983
> 
> 标签：ios, image-processing, image-scanner

我从 iPhone 相机拍了一张照片。现在我想像 X 射线扫描一样扫描图像。假设我拍了一张手臂的照片，然后通过编程/算法，它将扫描照片并显示手臂内的骨骼。有没有可以做类似事情的图像处理库？我试图通过苹果使用核心图像提供的几件事来获得上层的东西，但没有得到任何我想要的东西。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)

有人对此有任何解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T03:18:00.663

不，您所要求的根本不可能——iPhone 相机无法看穿固体。（我不敢相信我不得不这么说。）

# java - Java为什么接口扩展接口

> ID：13437131
> 
> 赞同：49
> 
> 时间：2012-11-18T03:16:24.057
> 
> 标签：java, inheritance, interface, extends

我想知道在什么情况下我们从接口扩展接口？因为，例如

```
interface A{
    public void method1();
}
interface B extends A{
    public void method2();
}
class C implements B{
    @Override public void method1(){}
    @Override public void method2(){}
} 
```

是不是相当于

```
interface A{
    public void method1();
}
interface B{
    public void method2();     
}
class C implements A, B{
    @Override public void method1(){}
    @Override public void method2(){}
} 
```

背后有什么重要的原因吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-18T03:23:31.230

重要的原因完全取决于接口应该做什么。

如果你有一个 Vehicle 接口和一个 Drivable 接口，那么所有车辆都是可驱动的。如果没有接口继承，每种不同类型的汽车类都将需要

```
class ChevyVolt implements Vehicle, Drivable
class FordEscort implements Vehicle, Drivable
class ToyotaPrius implements Vehicle, Drivable 
```

等等。

就像我说的所有车辆都是可驾驶的，所以更容易拥有：

```
class ChevyVolt implements Vehicle
class FordEscort implements Vehicle
class ToyotaPrius implements Vehicle 
```

车辆如下：

```
interface Vehicle extends Drivable 
```

而且不必考虑。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-18T03:19:59.410

是的：它就像在其他任何地方的继承。如果 B*是*A 的特化，那么它应该这样写。第二个表示该类恰好实现了两个接口，它们之间没有任何关系。

从最终结果的角度来看，您可以只使用多个接口来代替处理层次结构（就像您可以避免在类层次结构中使用继承行为一样）。然而，这会使信息更加分散，并且（如果不是更多的话）显着地混淆了软件模型的意图。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-18T03:28:02.453

是的，有一个很大的区别。

在您的第一个示例中，您的新接口 B 被定义为从 A 扩展，因此，*任何*实现 B 的类都会*自动*实现 A。基本上，您是在告诉编译器“这就是 A 的含义，这就是它的含义意味着是B，哦，**顺便说一句，所有B也是A**！” 这样你就可以说...

```
class C implements B {
    ... you implement all of the methods you need...
    ...blah...
    ...blah...
}
A myNewA = new C(); 
```

这很好用。

但是，在你的*第二个*例子中，你没有声明 B 来扩展 A，所以上面的代码不起作用。当您尝试将（第二种）C 的实例分配给 A 的引用时，它会抱怨，因为您*没有*告诉编译器“所有 B 都是真正的 A”。`B`（即和之间没有关系`C`）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-07T13:23:34.190

中只有一条评论

```
interface A{
    public void method1();
}
interface B extends A{
    public void method2();
}
class C implements B{
    @Override public void method1(){}
    @Override public void method2(){}
} 
```

如果你声明`A a = new C();`

你不能调用`method2();`，因为接口`A`对接口中的元素一无所知，`B`即使你在类中实现方法`C`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-27T20:18:10.367

如果你不想在没有实现 A 的情况下实现 B，你可以让 B 扩展 A。

例子：

```
interface LivingThing{
public void eat();
}

interface Dog extends LivingThing{
public void Bark();
} 
```

不做狗就可以做有生命的东西，但不做活的东西就不可能做狗。因此，如果它可以吠叫，它也可以吃东西，但情况并非总是如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-18T03:31:23.300

您说的是对的，但不仅仅是完成我们的工作，如果需求是这样的怎么办：

1）假设有10个接口，不是同时设计的。例如 Java 7 中的 AutoCloseable 接口。添加了一个新的自动关闭功能，直到 Java 6 才出现。

2）如果您设计了一个作为标记接口的接口 C，并且您希望从给定类 B 派生的所有类都被标记，那么最好的解决方案是使用 B extends C 而不是将实现 C 放在任何地方。

还有很多原因。如果您查看类和层次结构的更大图景，您可能会自己得到答案。

乐于帮助达拉姆

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-01T13:32:53.160

有时，您不想允许`B`没有存在的存在`A`，而是希望允许存在`A`而不一定存在`B`。如果`A`is`Car`和`B`is `SportCar`，您可能只想使用`Car`interface 来处理一些流程，但有时需要更具体并明确使用`SportCar`。这样一来，您就无法决定哪一天只实施`SportCar`. 它也迫使您实施`Car`。这正是 OOP 中继承的含义。

此外，假设您想要声明一个新的类成员实现`SportCar`. 你如何让它也实现`Car`接口？据我所知，没有办法添加由多个接口组成的类型。

```
public SportCar myCar;
// public SportCar,Car myCar -> invalid 
```

这样你就不能保证`myCar`会有一个`Car`(like `Drive()`) 的方法，这会失去从继承中获得的优势。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T01:56:16.163

这里的主要区别在于，在您的第一个示例中，B 是 A，然后是一些。这意味着接口 B 调用 method1() 和 method2()，而在第二个中，A 和 B 是分开的（接口 B 不得出 method1()）并且类 C 实现 A 和 B。在这两个实例中，类 C 将覆盖 method1 () 和方法 2()。我希望这有帮助！

# jquery - 将 Json 对象作为参数传递时遇到问题

> ID：13437135
> 
> 赞同：0
> 
> 时间：2012-11-18T03:17:23.003
> 
> 标签：jquery, json, object, parameters

我无法成功地将 JSON 对象作为参数传递，我得到一个未捕获的 referenceError..有什么想法吗？

```
$.getJSON('./getMe.php', function(data){
    $.each(data, function(key, pack){
        var id = key.toLowerCase().replace(" ", "_");
        $('#breadcrumbs').append("&nbsp;&nbsp;<span id='" + id + " 'onclick='DoSomething(id, pack);'>" + key + "</span>&nbsp;&nbsp;&nbsp;");
    });

    $('#breadcrumbs').append('</br></br>'); })
    .success(function(){
        $('#loader').hide();
});

function DoSomething(id, pack){
    $.each(pack, function(stage, items){
        alert(stage);
    });
    $('#packages').html('&rarr;&nbsp;&nbsp;' + id);
} 
```

我试图传递`pack`给`DoSomething()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:03:25.257

这是一个您可能会发现有用的示例[http://momotaroblogger.blogspot.co.nz/2012/11/webapi.html](http://momotaroblogger.blogspot.co.nz/2012/11/webapi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:35:19.203

您将无法将它传递给这样的变量，这就是您收到参考错误的原因。这是您可以执行的操作：

```
data = [{test: "test", hi: "hi!"}]

$.each(data, function(key, pack){
    var id = key,
        clickLink = $('<span>' + key + '</span>')
             .attr({id: id})
             .click(function() { doSomething(id, pack);});

    $('#breadcrumbs').append(clickLink);
});

var doSomething = function(id, pack) {
    alert(pack);
} 
```

# uitableview - 如何从 DetailViewController 更新 MasterViewController 项目单元格

> ID：13437136
> 
> 赞同：1
> 
> 时间：2012-11-18T03:17:32.760
> 
> 标签：uitableview, detailview

我正在尝试更新通过详细视图中的 UIButton 连接到我的根视图表的 UITableViewCell 中的项目。item cell 被导入到根视图中，在 viewDidLoad 中加载并注册，在 viewDidAppear 中更新，并在 tableView:cellForRowAtIndexPath 中添加到表中。

```
- (IBAction)addItem:(id)sender
{
//saves new list
RoomItem *item = [[RoomItem alloc] initWithRoom:[_roomTxt text] Building:[_buildingTxt text]];
[[RoomList sharedStore] createItem:item];

//allows for immediate return to rootView upon action (save button push in this case)
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

}

即使 Xcode 预测“createItem”，我也会收到警告说“'RoomList' 没有可见的@interface 声明选择器'createItem:'

**我已经导入了 RoomList.h，其中：**

```
- (RoomItem *)createItem;
+ (RoomList *)sharedStore; 
```

**在 RoomList.m 中：**

```
- (RoomItem *)createItem
{
//tracks what number item it's creating
double order;
if ([allItems count] == 0) {
    order = 1.0;
}
else
{
    order = [[[allItems lastObject] objectIndex] doubleValue] + 1.0;
}
NSLog(@"Adding after %d items, order = %.2f", [allItems count], order);
RoomItem *p = [NSEntityDescription insertNewObjectForEntityForName:@"RoomItem"
                                        inManagedObjectContext:context];
[p setRoom:[NSString string]];  //there was an order call here
[p setBuilding:[NSString string]];
[p setBuildingThumbnail:[UIImage imageNamed:[NSString string]]];    //may need to be changed to another imageNamed function
[p setBuildingThumbnailData:[NSData data]];
[p setObjectIndex:[NSNumber numberWithDouble:order]];
[allItems addObject:p];

return p;
}
+ (RoomList *)sharedStore
{
static RoomList *sharedStore = nil;
if (!sharedStore) {
    sharedStore = [[super allocWithZone:nil] init];
}
return sharedStore;
}
+ (id)allocWithZone:(NSZone *)zone
{
return [self sharedStore];
} 
```

**在 RoomItem 我有：**

```
- (id)initWithRoom:(NSString *)room Building:(NSString *)building; 
```

我只是无法理解我在这里可能会丢失的东西。有什么想法吗？

谢谢。

**编辑（写入项目单元格的根视图方法）：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
BNRItem *p = [[[BNRItemStore defaultStore] allItems]
                                objectAtIndex:[indexPath row]];
//[[cell textLabel] setText:[p description]];

//get the new or recycled cell
HomepwnerItemCell *cell = [tableView dequeueReusableCellWithIdentifier:@"HomepwnerItemCell"];

[cell setController:self];
[cell setTableView:tableView];

//configure the cell with the BNRItem
[[cell nameLabel] setText:[p itemName]];
[[cell serialNumberLabel] setText:[p serialNumber]];
[[cell valueLabel] setText:[NSString stringWithFormat:@"$%d", [p valueInDollars]]];

[[cell thumbnailView] setImage:[p thumbnail]];

return cell;
} 
```

这对我有用。看来我没有正确获取核心数据实体。但是，objectAtIndex 查询仍然是一个问题，因为它只更新了 index:0 处的 RoomItem。如何获取我要更新的 RoomItem 的索引？

```
- (RoomItem *)updateItemWithRoom:(NSString *)room Building:(NSString *)building
{
NSError *error = nil;

NSEntityDescription *entity = [NSEntityDescription entityForName:@"RoomItem" inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entity];

RoomItem *currentRoomItem = [[context executeFetchRequest:request error:&error] objectAtIndex:0];
request = nil;

[currentRoomItem setRoom:room];
[currentRoomItem setBuilding:building];

[self saveChanges];

return currentRoomItem;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:41:46.160

您的问题标题是关于主/详细视图控制器通信的。但是编译器警告似乎是您问题的核心。

这是方法签名的问题。

```
[[RoomList sharedStore] createItem:item]; 
```

这调用方法签名是`-createItem:`. 你声明`-(RoomItem *)createItem;`or `-createItem`。注意没有冒号，没有传入参数。

您似乎不太可能将 a 传递给`RoomItem`名为的方法`createItem`，因此您可能只想将上述调用更改为：

```
RoomItem *item = [[RoomList sharedStore] createItem];
// item is now the newly created entity. 
```

**或者**将`createItem`方法更改为：

```
-(RoomItem *)createItemWithRoom:(NSString *)room andBuilding:(NSString *)building{
    // Use room & building to create managed object
} 
```

然后像这样使用它：

```
RoomItem *item = [[RoomList sharedStore] createItemWithRoom:[_roomTxt text] andBuilding:[_buildingTxt text]]; 
```

**编辑**

如果您尝试在拆分视图控制器（在 iPad 上）的详细视图中刷新主表视图，则可以使用这样的代码重新加载主表视图。

```
UINavigationController *masterController = [self.splitViewController.viewControllers objectAtIndex:0];
UITableViewController *tableController = (UITableViewController *)masterController.visibleViewController;
UITableView *tableView = tableController.tableView;
[tableView reloadData]; 
```

在 iPhone/iPod 上，您可以获得导航控制器根视图控制器并使用这样的代码刷新表视图。（写得更紧凑一些）

```
UITableViewController *masterTableViewController = [self.navigationController.viewControllers objectAtIndex:0];
[masterTableViewController.tableView reloadData]; 
```

当然，如果您在插入时`insertRowsAtIndexPaths:withRowAnimation:`知道未来，您可以使用一种方法，而不是完全重新加载。`indexPath(s)`

# haskell - Haskell 函子错误

> ID：13437140
> 
> 赞同：2
> 
> 时间：2012-11-18T03:18:14.717
> 
> 标签：haskell, functor

我创建了自己的数据类型，并尝试实现仿函数方法如下：

```
data Hieu a = Hieu [a] deriving (Show, Read, Eq)

instance Functor Hieu where
        fmap f (Hieu [x]) = Hieu (f [x]) 
```

这是一段非常简单的代码，但它失败了。你能解释一下为什么吗？

* * *

感谢您的所有回复。现在我明白了我只将仿函数应用于一种情况。我试图重写如下，不使用地图

```
data Hieu a = Hieu [a] deriving (Show, Read, Eq)

consHieu :: a -> (Hieu a) -> (Hieu a)
consHieu x (Hieu xs) = Hieu (x:xs)

instance Functor Hieu where
    fmap f (Hieu (x:xs)) = consHieu (f x) (fmap f (Hieu xs))
    fmap f (Hieu []) = Hieu [] 
```

* * *

感谢您的所有回复。现在我明白了我只将仿函数应用于一种情况。我试图重写如下，不使用地图

data Hieu a = Hieu [a] deriving (Show, Read, Eq)

consHieu :: a -> (Hieu a) -> (Hieu a)

consHieu x (Hieu xs) = Hieu (x:xs)

实例 Functor Hieu 在哪里

```
 fmap f (Hieu (x:xs)) = consHieu (f x) (fmap f (Hieu xs))
    fmap f (Hieu []) = Hieu [] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T03:31:20.287

`f [x]`在您应用于列表的表达式`f`中，但这是不允许的，因为`fmap`is的类型签名`(a -> b) -> Hieu a -> Hieu b`。您不允许限制`f`为`[a] -> [b]`.

也许你的意思是写

```
instance Functor Hieu where
   fmap f (Hieu [x]) = Hieu [f x] 
```

这会编译，但只有当列表只有一个元素时才会起作用。`Hieu`制作仿函数的正常方法是`map`将函数应用于所有元素，如下所示：

```
instance Functor Hieu where
   fmap f (Hieu xs) = Hieu (map f xs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T03:32:23.487

您只处理一个案例，一个单元素列表，并且处理不正确。类型级别`[a]`（任何长度 s 的列表的类型）与值级别（仅包含一个元素的列表，称为）`a`非常不同！`[x]``x`

正确的实例将涉及以更复杂的方式使用该功能。

```
fmap :: (a -> b) -> Hieu a -> Hieu b
fmap f (Hieu xs) = Hieu (`...`) 
```

在`...`, 我们有`f :: a -> b`并且`xs :: [a]`我们想要一些东西`:: [b]`。有一种自然的方法可以得到它——将函数映射到列表上。

所以一个正确的实例看起来像：

```
instance Functor Hieu where
    fmap f (Hieu xs) = Hieu (map f xs) 
```

任何其他实例——例如，只处理单元素列表的实例——都不会遵守 Functor 定律，因为我们希望`fmap id h`始终与`h`.

# android - Android Layout Image 在表格行的错误位置显示

> ID：13437144
> 
> 赞同：3
> 
> 时间：2012-11-18T03:18:51.097
> 
> 标签：android, image, layout

我在左边有一个 ImageView，在右边有一个 Table。表格内有一行显示 2 张图像，但结果是左侧一张图像，右侧另一张图像。他们不相邻？！为什么 ？

任何提示？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="true" 
>

    <ImageView
        android:id="@+id/thumbnail_Photo"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:contentDescription="@+id/image_name"
        android:gravity="right|center_vertical"
        android:scaleType="centerInside"
        android:src="@drawable/sample" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingTop="8dp" >

        <TableRow>

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/HouseMall_Title"
                android:textColor="#000000"
                android:textSize="13dp" />

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/HouseMall_Name_In_Chinese"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_weight="1.0"
                android:gravity="left"
                android:textColor="#0000FF"
                android:textSize="13dp" />

        </TableRow>

        <TableRow>

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/row2Title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/row2_Title"
                android:textColor="#000000"
                android:textSize="13dp" />

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/row2Fee"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_weight="1.0"
                android:gravity="left"
                android:textColor="#EE0000"
                android:textSize="13dp" />

        </TableRow>

        <TableRow>

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/row3Title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="@string/row3_Title"
                android:textColor="#000000"
                android:textSize="13dp" />

            <TextView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/row3Fee"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_weight="1.0"
                android:gravity="left"
                android:textColor="#EE0000"
                android:textSize="13dp" />

        </TableRow>

        <TableRow>
           <ImageView
             android:id="@+id/indoor_or_outdoor"
             android:layout_width="30dp"
             android:layout_height="20dp"
             android:layout_gravity="left"
             android:scaleType="centerInside"
             android:gravity="left|center_vertical"
             android:contentDescription="@+id/indoor_outdoor_name"
             android:src="@drawable/indoor_18x18" 
             android:layout_marginLeft="2dp"
             android:layout_marginRight="2dp" 
             android:paddingRight="2dp" 
    />     
         <ImageView
             android:id="@+id/promotion"
             android:layout_width="30dp"
             android:layout_height="20dp"
             android:layout_gravity="left"
             android:scaleType="centerInside"
             android:gravity="left|center_vertical"
             android:contentDescription="@+id/hasPromotion"
             android:src="@drawable/promotion_no_18x18" 
             android:layout_marginLeft="2dp"
             android:layout_marginRight="2dp" 
             android:paddingRight = "2dp"
    />                   

        </TableRow>
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T14:54:05.700

在表格行中使用：

```
android:orientation="horizontal" 
```

# emacs - emacs 中推荐的 shell 是什么？

> ID：13437145
> 
> 赞同：-3
> 
> 时间：2012-11-18T03:18:55.593
> 
> 标签：emacs

emacs中有一些shell。作为一个 emacs 新手，我想知道你喜欢使用 emacs 的 shell 是什么？

现在我正在使用 eshell 但有时 ansi-term 似乎更好。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:06:27.273

我使用[多项](http://emacswiki.org/emacs/MultiTerm). 正如其名称所示，您可以打开多个术语。我最喜欢的一个功能是我可以在当前窗口中打开一个术语。

```
(global-set-key (kbd "C-c b") 'multi-term-dedicated-open) 
```

该术语的密码与我正在编辑的文件相同。

# javascript - jquery 闭包无法使用 DOM 对象检索私有变量

> ID：13437147
> 
> 赞同：0
> 
> 时间：2012-11-18T03:19:00.493
> 
> 标签：javascript, jquery, dom, closures

如果有人可以帮助我，我在闭包和检索声明的私有变量时遇到问题，该变量是 id 使用 jquery 选择的元素。我有一个像这样的模块：

```
var package = package || {};

(function() {
        if(!package.slider)
                package.slider = {};

        function Slider() {
        }

        // --------- /Public Members --------- //
        Slider.prototype = {
            init: function(){
                _setEvents();
            }
        };

        // --------- Public Members --------- //

        // --------- Private Members --------- //
        var shoePreview = $('#shoe-preview');  /*somehow this variable does NOT get recognised even though I have it in the DOM.*/

        function _setEvents(){
            $.subscribe('getAllPerspectives', function(event){ _getAllPerspectives() });
            $.subscribe('showPreview', _show);
            $.subscribe('hidePreview', _hide);
        }

        function _getAllPerspectives(){
            _getAngleShoeImage(helper.getCurrentAngle());
            $.each(constants.angles, function(key, val){
                if(val != helper.getCurrentAngle()){
                    _getAngleShoeImage(val);
                }
            });
        }

        function _getAngleShoeImage(angle){
            var shoeImage = shoePreview;
            shoeImage.html('<p>Hello World</p>');

        }

        var that = new Slider();
        package.slider = that;

    })();
$(document).ready(function(){

    $.each(package, function (key, val){
        val.init();
    });
}); 
```

现在，如果您查看代码，有一个名为 shoePreview 的变量，我认为模块外的任何东西都无法访问该变量。

现在在代码的某个地方，稍后我将调用一些方法来触发 _getAngleShoeImage，其中我有一个名为 shoeImage 的变量被设置为私有 shoePreview 变量。

问题是，一旦我尝试使用 jquery 的 html() 调用，它似乎无法识别 shoePreview 变量是什么。

我已经通过替换 var shoeImage = $('#shoe-preview') 对此进行了测试，然后使用所需的标记调用 html() 并且它工作正常。

这个问题很小，但它让我发疯。我在写 var shoePreview = $('#shoe-preview'); 以错误的方式或有更多的东西。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:26:24.937

这里只有一个问题： `(function(){hackhackhack()})()`字面意思是 -*运行闭包*，这意味着您在准备好之前尝试访问 DOM，您只需要在init*之后设置 var，而不是在 main 函数中，*

```
var package = package || {};

(function() {
    if(!package.slider)
            package.slider = {};

    function Slider() {
    }

    // --------- /Public Members --------- //
    Slider.prototype = {
        init: function(){
            //New function here
            _setVars();
            _setEvents();
        }
    };

    // --------- Public Members --------- //

    // --------- Private Members --------- //
    //make it accessible for other proto functions;
    var shoePreview;

    function _setVars() {
       shoePreview=$('#shoe-preview'); // now it will be set when init() run not when object proto initialised
    }
    function _setEvents(){
        $.subscribe('getAllPerspectives', function(event){ _getAllPerspectives() });
        $.subscribe('showPreview', _show);
        $.subscribe('hidePreview', _hide);
    }

    function _getAllPerspectives(){
        _getAngleShoeImage(helper.getCurrentAngle());
        $.each(constants.angles, function(key, val){
            if(val != helper.getCurrentAngle()){
                _getAngleShoeImage(val);
            }
        });
    }

    function _getAngleShoeImage(angle){
        var shoeImage = shoePreview;
        shoeImage.html('<p>Hello World</p>');

    }

    var that = new Slider();
    package.slider = that;

})();
$(document).ready(function(){

    $.each(package, function (key, val){
        val.init();
    });
}); 
```

# matlab - 在matlab中用某个值填充单元格数组

> ID：13437149
> 
> 赞同：0
> 
> 时间：2012-11-18T03:19:21.607
> 
> 标签：matlab

第一个问题：假设我有一个 3x3 元胞数组，我们称它为 A。所以，如果我想用相同的元胞数组填充 A{1:2, 1:2}，我该怎么做。MatLab 要求 '=' 的两边具有相同数量的元素。如何在一条指令中为 A{1:2, 1:2} 分配相同的值（2x1 单元格）？

第二个问题：我想创建一个概率生成器（不确定它是否是正确的术语），它将根据先验概率在一定数量的选项之间进行选择。例如，假设我想根据以下概率在 A、B 和 C 之间随机选择：

```
P(A) = .4
P(B) = .5
P(C) = .1 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:32:20.927

对于你的第一个问题，`repmat`应该很好用。

例如，请参阅[http://www.mathworks.com/matlabcentral/answers/8977](http://www.mathworks.com/matlabcentral/answers/8977)

对于第二个问题，结合`<`、`cumsum`和`find`。如果您想要更详细的解释，请打开仅涉及概率生成的第二个问题。

# python - django-registration 简单的后端设置

> ID：13437150
> 
> 赞同：1
> 
> 时间：2012-11-18T03:19:34.367
> 
> 标签：python, django, django-registration

我正在尝试使用[简单的后端](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/docs/simple-backend.rst?at=default)将 django-registration 添加到 django 文档中的教程应用程序中。

到目前为止，我包含了 URLconf `registration.backends.simple.urls`，如下所示：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    url(r'^polls/',     include('polls.urls')),
    url(r'^admin/',     include(admin.site.urls)),
    url(r'^accounts/',  include('registration.backends.simple.urls')),
    ) 
```

接下来我该怎么做？此外，与默认后端相比，简单后端需要哪些模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:41:37.890

对于模板，在您的模板文件夹中创建一个文件夹名称“ **registration** ”。

然后为每个注册操作创建一个文件：

*   `registration/registration_form.html`： 报名表格
*   `registration/activate.html`: 激活页面
*   `registration/activation_complete.html`: 激活完成
*   `registration/registration_complete.html`： 注册完成
*   `registration/registration_closed.html`: 不允许注册

对于注册表单页面，django 以变量名的“ **form** ”返回表单模型。您可以像这样在模板中调用它：

```
<form action="/accounts/register/" method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <input type="submit" value="Submit" />
</form> 
```

# c++ - 对数组文件 I/O 进行排序

> ID：13437151
> 
> 赞同：0
> 
> 时间：2012-11-18T03:19:50.280
> 
> 标签：c++, arrays

我正在寻找对数组进行排序的帮助。我必须这样做，但我收到一些我不理解的错误消息，例如：

1.  [警告“索引”的名称查找已更改。
2.  匹配此 'char* index[const char*, int] undr ISO 标准规则
3.  在旧规则下匹配这个索引
4.  数组下标的无效类型 'int&[char()(const char*, int)]
5.  在全球范围内

我对它是什么有些怀疑，但对如何解决它有点迷茫。我打开的文件是这样一句话：奥利弗是一只金毛猎犬，它的毛又长又金。

正如你所知道的，我是一个完整的初学者，所以任何提示将不胜感激提前谢谢！

```
#include <iostream>
#include <fstream>
using namespace std;
void swap_values(int& v1, int& v2);
int index_of_smallest(int list[],int start_index, int number_used);
void initialize(int list[]);
void Sort(int list[],int&num);
void characterCount(char ch, int list[]);
void readText(ifstream& intext, char& ch, int list[]);
void totalCount(int list[]);
int main()
{
    int index,letterCount[26];
    char ch;
    ifstream inFile;
    ofstream outFile;

    cout<<"This is the text of the file:"<<endl;

    outFile.open("C:/temp/Data_Chapter_7_8.txt");
    if(!outFile)
    {
        cout<<"Cannot open file."<<endl;
    }       

    inFile.open("C:/temp/Data_Chapter_7_8.txt");

    if (!inFile)
    {
       cout << " Cannot open file." <<endl;
    }
    initialize(letterCount);
    inFile.get(ch);

    while (inFile.get(ch))
    {
        int index;
        readText(inFile,ch,letterCount);
        index++;
    }
    totalCount(letterCount);

    inFile.close();

    system("PAUSE");
    return 0;
}
void initialize(int list[])
{
    for(int x = 0;x<26;x++)
    list[x] = 0;
}
void characterCount (char ch, int list[])
{
    ch = tolower(ch);
    if(static_cast<int>(ch)>=97&&(static_cast<int>(ch)<=122))
    list[static_cast<int>(ch)-97]++;
}
void readText(ifstream& intext, char& ch, int list[])
{ 
    if (ch != '.')
    {
        characterCount (ch,list);
    }
}
void totalCount(int letterCount[])
{
    for(int x=0;x<26;x++)
        if(letterCount[x]>0)  
            cout<<static_cast<char>(x+97)<<" "<<letterCount[x]<<endl;
}
void Sort(int list[], int number_used)
{
    int index_of_next_smallest;
    for(int index= 0; index<number_used -1; index++)
        index_of_next_smallest = index_of_smallest(list, index,number_used);
     swap_values(list[index],list[index_of_next_smallest]);
}
}
int index_of_smallest(int list[], int start_index, int number_used);
{
    int min = list[start_index];
    index_of_min = start_index;
    for (int index= start_index + 1; index < number_used; index++)
        if (list[index]>min)
        {
            min = list[index];
            index_of_min = index;
        }
    return index_of_min;
 }   
 void swap_values(int& v1, int& v2)
 {
     int temp;
     temp = v1;
     v1 = v2;
     v2 = temp;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:45:36.937

在你的`Sort`函数里面，改变

```
for(int index= 0; index<number_used -1; index++) 
```

至

```
int index;
for(index = 0; index < number_used-1; index++) 
```

因为你需要`index`在循环结束后访问。

# azure - Azure 表存储投影查询和未实现异常

> ID：13437153
> 
> 赞同：1
> 
> 时间：2012-11-18T03:19:57.990
> 
> 标签：azure, azure-table-storage

我有一个 Person 类，我将其保存到 Azure 表存储中的表中。

我想使用以下查询之一来查询它：

```
var query = from getThis in _serviceContext.CreateQuery<PersonForSearch>(_tableName)
                        where getThis.Name.Contains(searchTerm)
                        select new Person
                        {
                            PartitionKey = getThis.PartitionKey, 
                            RowKey = getThis.RowKey,
                            Name = getThis.Name
                        }; 
```

或者

```
CloudTableQuery<Person> query =
                 (from getThis in _serviceContext.CreateQuery<Person>(_tableName)
                  where getThis.Name.Contains(searchTerm)
                  select getThis).AsTableServiceQuery<Person>(); 
```

对于任何一个，我都会在 foreach 循环中抛出以下错误，我用来循环查询结果：

`NotImplemented` 请求的操作未在指定资源上实现。

我认为这可能是因为我的 Person 模型没有从 TableServiceEntity 继承（我拒绝引入这种耦合 - 所以我用这个属性装饰它： [DataServiceKey("PartitionKey", "RowKey")] 并手动给出它是 PartitionKey 和 RowKey 属性。

所以我尝试创建一个 DID 继承自 TableServiceEntity 的实体，这将允许我查询该表（从查询中可以看出，我担心的唯一属性是 Name）。

这个新实体如下：

```
class PersonForSearch : TableServiceEntity
{
    public string Name { get; set; }
} 
```

然而，这并没有解决问题。这个错误是在谈论我在查询中使用的类之外​​的其他资源吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T03:51:31.833

这里有两个问题：

1) Azure 表存储不支持 Contains() 方法。这就是您收到 Not Implemented 异常的原因。ATS 确实支持 string.Compare() 对字符串的任何范围类型操作

2) 为了有效地检索数据，您只能在 PartitionKey 或 PartitionKey/RowKey 组合上进行搜索。任何其他查询都将导致错误或将完整表下载到客户端的内存中（不记得是哪一个）。如果您的表很小，请通过删除“where”子句将其完全下载到内存中，然后使用 Linq for Objects 来查询您喜欢的任何内容。如果它很大，请找到一种方法与 PartitionKey 或 PartitionKey/RowKey 字段进行比较

如果我理解您正在尝试正确执行的操作，那么您是否正在尝试通过员工表进行部分字符串搜索。总的来说，ATS 不是一个非常好的基于字符串的搜索的解决方案（除非这些是在 PartitionKey 或 PartitionKey/RowKey 字段上的“开始”搜索）。我强烈推荐[Lucene.NET](http://incubator.apache.org/projects/lucene.net.html)在云中进行基于文本的搜索。还有一个适用于 Lucene.NET 的[Azure Directory API](https://azuredirectory.codeplex.com/)。或切换到 SQL Azure

高温高压

# javascript - 如何在 Javascript 中初始化语句？

> ID：13437156
> 
> 赞同：2
> 
> 时间：2012-11-18T03:20:02.890
> 
> 标签：javascript, initialization

我有这个代码：

```
var StateTextBox = document.getElementById("State");
function InitializeVP() {
  StateTextBox.value = "Test"
} 
```

它找不到 StateTextBox 作为变量...有谁知道为什么？

当我这样做时：

```
function InitializeVP() {
  document.getElementById("State").value = "Test"
} 
```

有用。谁能向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:24:10.930

您何时尝试设置 StateTextBox 变量？很有可能，它正试图在 head 部分中设置，在这种情况下，元素将不会被设置。

试着把它放在结束`</body>`标签之前，它可能会在那里工作（你可以把你的`InitializeVP()`函数放在顶部。

甚至更好？将 jQuery 与 一起使用`$(document).ready`，您几乎可以保证您的变量将被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:22:29.637

你可能有错误的顺序代码。您所指的参考元素不存在....尚未。

# c - 在C中获取帧指针

> ID：13437158
> 
> 赞同：0
> 
> 时间：2012-11-18T03:20:19.800
> 
> 标签：c, assembly, x86

我试图在我的 C 程序中获取 FP，我尝试了两种不同的方法，但它们都与我运行 GDB 时得到的不同。

我尝试的第一种方法是，我在 C 中为 Assembly 函数制作了一个协议函数：

```
int* getEbp(); 
```

我的代码如下所示：

```
int* ebp = getEbp(); 
printf("ebp: %08x\n", ebp); // value i get here is 0xbfe2db58

while( esp <= ebp )       
    esp -= 4;

printf( "ebp: %08x, esp" ); //value i get here is 0xbfe2daec 
```

我的汇编代码

```
getEbp:
    movl %ebp, %eax
    ret 
```

我尝试让原型函数只返回一个 int，但这也与我的 GDB 输出不匹配。我们正在使用 x86 程序集。

编辑：错别字，我的 getEsp 函数看起来和另一个函数一模一样：

```
getEsp:
    movl %esp, %eax
    ret 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T08:25:01.277

1.  对于读取寄存器，确实最好使用[GCC 扩展的内联汇编语法](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)。
2.  如果您在单独的汇编程序文件中编译它，您`getEbp()`看起来应该可以工作。
3.  您`getEsp()`显然是不正确的，因为它没有考虑调用者推送的返回地址。

这是一个代码片段，它`ebp`通过扩展的内联 asm 并通过追逐帧指针来展开堆栈：

```
struct stack_frame {
        struct stack_frame *prev;
        void *return_addr;
} __attribute__((packed));
typedef struct stack_frame stack_frame;

void backtrace_from_fp(void **buf, int size)
{
        int i;
        stack_frame *fp;

        __asm__("movl %%ebp, %[fp]" :  /* output */ [fp] "=r" (fp));

        for(i = 0; i < size && fp != NULL; fp = fp->prev, i++)
                buf[i] = fp->return_addr;
} 
```

我将在下面展示两种读取寄存器的工作实现。纯 asm 函数是`get_ebp()`和`get_esp()`in `getbp.S`。`get_esp_inline()`作为内联函数实现的另一组`get_ebp_inline()`位于`test-getbp.c`.

在`getbp.S`

```
.section .text
/* obviously incurring the cost of a function call
   to read a register is inefficient */
.global get_ebp
get_ebp:
movl %ebp, %eax
ret

.global get_esp
get_esp:
/* 4: return address pushed by caller */
lea 4(%esp), %eax
ret 
```

在`test-getbp.c`

```
#include <stdio.h>
#include <stdint.h>

/* see http://sourceware.org/systemtap/wiki/UserSpaceProbeImplementation */
#include <sys/sdt.h>

int32_t *get_ebp(void);
int32_t *get_esp(void);

__attribute__((always_inline)) uintptr_t *get_ebp_inline(void)
{
    uintptr_t *r;
    __asm__ volatile ("movl %%ebp, %[r]" : /* output */ [r] "=r" (r));
    return r;
}

__attribute__((always_inline)) uintptr_t *get_esp_inline(void)
{
    uintptr_t *r;
    __asm__ volatile ("movl %%esp, %[r]" : /* output */ [r] "=r" (r));
    return r;
}

int main(int argc, char **argv)
{
    uintptr_t *bp, *sp;

    /* allocate some random data on the stack just for fun */
    int a[10] = { 1, 3, 4, 9 };
    fprintf(fopen("/dev/null", "r"), "%d\n", a[3]);

    STAP_PROBE(getbp, getbp); /* a static probe is like a named breakpoint */
    bp = get_ebp();
    sp = get_esp();
    printf("asm: %p, %p\n", (void*)bp, (void*)sp);
    bp = get_ebp_inline();
    sp = get_esp_inline();
    printf("inline: %p, %p\n", (void*)bp, (void*)sp);
    return 0;
} 
```

我们现在可以编写一个 GDB 脚本来进行转储`ebp`，`esp`同时使用上面`getbp`定义的静态探针`test-getbp.c`。

在`test-getbp.gdb`

```
file test-getbp

set breakpoint pending on
break -p getbp
commands
silent
printf "gdb: 0x%04x, 0x%04x\n", $ebp, $esp
continue
end

run
quit 
```

要验证这些函数是否返回与 GDB 相同的数据：

```
$ gdb -x test-getbp.gdb
< ... >
gdb: 0xffffc938, 0xffffc920
asm: 0xffffc938, 0xffffc920
inline: 0xffffc938, 0xffffc920
< ... > 
```

拆解`test-getbp` `main()`产生：

```
 0x08048370 <+0>: push   %ebp
   0x08048371 <+1>: mov    %esp,%ebp
   0x08048373 <+3>: push   %ebx
   0x08048374 <+4>: and    $0xfffffff0,%esp
   0x08048377 <+7>: sub    $0x10,%esp
   0x0804837a <+10>:    movl   $0x8048584,0x4(%esp)
   0x08048382 <+18>:    movl   $0x8048586,(%esp)
   0x08048389 <+25>:    call   0x8048360 <fopen@plt>
   0x0804838e <+30>:    movl   $0x9,0x8(%esp)
   0x08048396 <+38>:    movl   $0x8048590,0x4(%esp)
   0x0804839e <+46>:    mov    %eax,(%esp)
   0x080483a1 <+49>:    call   0x8048350 <fprintf@plt>
   0x080483a6 <+54>:    nop
   0x080483a7 <+55>:    call   0x80484e4 <get_ebp>
   0x080483ac <+60>:    mov    %eax,%ebx
   0x080483ae <+62>:    call   0x80484e7 <get_esp>
   0x080483b3 <+67>:    mov    %ebx,0x4(%esp)
   0x080483b7 <+71>:    movl   $0x8048594,(%esp)
   0x080483be <+78>:    mov    %eax,0x8(%esp)
   0x080483c2 <+82>:    call   0x8048320 <printf@plt>
   0x080483c7 <+87>:    mov    %ebp,%eax
   0x080483c9 <+89>:    mov    %esp,%edx
   0x080483cb <+91>:    mov    %edx,0x8(%esp)
   0x080483cf <+95>:    mov    %eax,0x4(%esp)
   0x080483d3 <+99>:    movl   $0x80485a1,(%esp)
   0x080483da <+106>:   call   0x8048320 <printf@plt>
   0x080483df <+111>:   xor    %eax,%eax
   0x080483e1 <+113>:   mov    -0x4(%ebp),%ebx
   0x080483e4 <+116>:   leave  
   0x080483e5 <+117>:   ret 
```

`nop`at`<main+54>`是静态探针。`printf`有关如何读取寄存器的信息，请参阅两个调用周围的代码。

顺便说一句，你代码中的这个循环对我来说似乎很奇怪：

```
while( esp <= ebp )       
    esp -= 4; 
```

你不是说

```
while (esp < ebp)
    esp +=4 
```

?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T04:53:38.170

因为您依赖于实现特定的细节，所以您需要提供有关您的目标的更多信息以获得准确的答案。您没有指定回答您的问题真正需要的架构、编译器或操作系统。

根据您引用的寄存器名称和您使用 at&t 语法的事实进行有根据的猜测，我将假设这是 i386 并且您使用的是 gcc。

实现这一点最简单的方法是使用 gcc 变量属性，你可以试试这个，这是一个 gcc 特定的语法来请求特定的寄存器。

```
#include <stdint.h>
#include <stdio.h>

int main(int argc, char **argv)
{
     const uintptr_t register framep asm("ebp");

     fprintf(stderr, "val: %#x\n", framep);

     return 0;
 } 
```

另一种方法是使用内联汇编来加载值，如下所示：

```
#include <stdint.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    uintptr_t framep;

    asm("movl %%ebp, %0" : "=r" (framep));

    fprintf(stderr, "val: %#x\n", framep);

    return 0;
} 
```

这会请求一个 32 位寄存器用于写入操作（= 修饰符），并将其加载到 framep。编译器负责提取您声明的值。

在 gdb 中，您可以打印该值并验证它是否与输出匹配。

```
(gdb) b main
Breakpoint 1 at 0x40117f: file ebp2.c, line 8.
(gdb) r
Starting program: /home/zero/a.exe
[New Thread 4664.0x1290]
[New Thread 4664.0x13c4]

Breakpoint 1, main (argc=1, argv=0x28ac50) at ebp2.c:8
8           asm("movl %%ebp, %0" : "=r" (framep));
(gdb) n
10          fprintf(stderr, "val: %#x\n", framep);
(gdb) p/x framep
$1 = 0x28ac28
(gdb) p/x $ebp
$2 = 0x28ac28
(gdb) c
Continuing.
val: 0x28ac28
[Inferior 1 (process 4664) exited normally]
(gdb) q 
```

请记住，您不能依赖此行为，即使在 x86 gcc 上也可以配置为不使用帧指针并手动跟踪堆栈使用情况。这通常被微软称为 FPO，或者在其他平台上称为 omit-frame-pointer。这个技巧为通用用途释放了另一个寄存器，但使调试更加复杂。

您是正确的，eax 通常在 x86 调用约定中尽可能用于返回值，我不知道为什么您的帖子上的评论声称使用了堆栈。

# javascript - 写了 jQuery Accordion 的替代品，它令人震惊。为什么？

> ID：13437161
> 
> 赞同：0
> 
> 时间：2012-11-18T03:21:16.820
> 
> 标签：javascript, jquery

我编写了 jQuery Accordion 的替代方案，因为它没有提供多个开放部分支持（知道为什么他们选择不包括对它的支持吗？那里的历史是什么？）。我对 StackOverflow 以及 Google 做了一些研究，看看其他人提出了哪些其他选择。我需要可以在多个元素上即时使用的东西。

在看到几个解决方案并对其进行试验后，最后，我编写了自己的版本（基于来自[http://forum.jquery.com/topic/accordion-multiple-sections-open-at-once](http://forum.jquery.com/topic/accordion-multiple-sections-open-at-once)的 Kevin 的解决方案，但大量修改的）。

jsFiddle 可以在这里找到：http: [//jsfiddle.net/3jacu/1/](http://jsfiddle.net/3jacu/1/)

内联代码：

```
$(document).ready(function(){

$.fn.togglepanels = function(){
    return this.each(function(){
        h4handler = $(this).find("h4");
        $(h4handler).prepend('<div class="accordionarrow">&#9660;</div>');
        $(h4handler).click(function() {
            $(h4handler).toggle(
                function() {
                    barclicked = $(this);
                    $(barclicked).find(".accordionarrow").html('&#9658;');
                    $(barclicked).next().slideUp('slow');
                    window.console && console.log('Closed.');
                    return false;
                }, 
                function() {
                    barclicked = $(this);
                    $(barclicked).find(".accordionarrow").html('&#9660;');
                    $(barclicked).next().slideDown('slow');
                    window.console && console.log('Open.');
                    return false;
                }
            );
        });
    });
};

$("#grouplist").togglepanels(); } 
```

奇怪的是，一旦我将右侧的手风琴箭头粘贴到 jsFiddle 中，它就停止工作，而它在我的本地副本中工作。

无论如何，问题是切换没有按预期工作，当它发生时，它会触发重复的切换事件，导致它关闭、打开，然后最终关闭该部分，并且从那时起它不会打开（它切换打开然后关闭）。那是假设它有效！起初，它不会工作，因为它没有响应。我认为我缺少的地方存在逻辑错误。

根据我在代码中编写/看到的内容，它在给定句柄中搜索相应的标记（在本例中为 h4），并将句柄弹出到变量中。然后它在应用手风琴箭头类（将其浮动到右侧）时将箭头添加到 h4 标记。然后它向它添加一个点击事件，当点击 h4 时，它将在两个函数之间切换（使用 jQuery 的切换函数）。

我怀疑这里的问题是我可能错误地假设 jQuery 的切换功能可以很好地在两个功能之间切换，我必须实现我自己的切换代码。如果我错了，请纠正我！

我正在尝试编写代码，使其尽可能高效，因此也将不胜感激。

提前感谢您的时间、帮助和考虑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T03:33:38.300

您在`toggle`绑定内部拥有绑定（顺便说一句已弃用）`click`，因此每次单击标题时都会附加一个新的事件处理程序。

顺便说一句，您还应该在插件中触发事件（您有控制台行会有意义），以便外部代码可以对状态更改做出反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:35:15.660

我相信你的问题是`$(h4handler).click(function() {`你已经包裹了`toggle`听众。本质上，这样做是为了让每次点击选项卡都会添加切换监听器，然后它也会触发一个事件。删除单击侦听器将具有您期望的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T03:31:09.683

您忘记粘贴尾随字符`);`以关闭对 jQuery 函数的函数调用`ready`。修正： http: [//jsfiddle.net/LeZuse/3jacu/2/](http://jsfiddle.net/LeZuse/3jacu/2/)
更新：我刚刚意识到我并没有真正回答你的问题。
您正在通过绑定另一个 .click 处理程序来复制 .toggle 功能。
关于[.toggle](http://api.jquery.com/toggle-event/)的文档说：

> 描述：将两个或多个处理程序绑定到匹配的元素，以在交替单击时执行。

这意味着点击事件已经内置。
注意：您应该使用局部变量而不是全局变量，这样您的插件就不会污染窗口对象。`var`为此使用关键字：
`var h4handler = $(this).find("h4");`

# applescript - 在 iTunes 中查找具有部分名称的歌曲

> ID：13437168
> 
> 赞同：0
> 
> 时间：2012-11-18T03:22:44.753
> 
> 标签：applescript, itunes

我知道如何按名称播放播放列表中的歌曲，但可以说我想制作它，以便在播放该歌曲时空格和大小写无关紧要。

所以如果我想播放“someSong”、“some song”或“Some Song”，我仍然想在我的播放列表中播放一首名为“Some song”的歌曲。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:36:03.003

尝试：

```
set yourSong to "yoursongname"
set yourPlaylist to "your playlist"

set searchString to {}
repeat with i from 1 to count of yourSong
    set aChar to text i of yourSong
    if aChar ≠ space then
        set end of searchString to aChar & " *?"
    end if
end repeat
set searchString to searchString as text

tell application "iTunes" to set plTracks to name of every track of playlist yourPlaylist
set AppleScript's text item delimiters to linefeed
set plTracks to plTracks as text
set AppleScript's text item delimiters to {""}
set targetSong to do shell script "echo " & quoted form of plTracks & " | grep -Ei " & quoted form of searchString

log targetSong
display dialog "Now Playing: " & targetSong buttons {"Cancel", "OK"} default button "OK" giving up after 2

tell application "iTunes" to play track targetSong of playlist yourPlaylist 
```

# .net - Console.In.ReadLine（重定向的 StdIn）冻结所有其他线程

> ID：13437171
> 
> 赞同：4
> 
> 时间：2012-11-18T03:23:49.970
> 
> 标签：.net, vb.net, multithreading, pipe

我正在使用管道将遗留应用程序（用 COBOL 编写）与我们的 .NET 新应用程序连接起来。这个想法很简单：遗留程序（我的 ERP 菜单）在流上写入一些参数，.NET 应用程序通过`Console.In`流读取它并启动一个新线程，打开请求的屏幕。这是 .NET 方面的一个片段，说明了这个想法是如何工作的：

```
<STAThread(), LoaderOptimization(LoaderOptimization.MultiDomain)>
Shared Sub Main()
    If Environment.GetCommandLineArgs(1) = "PIPE"
       While True
          Dim pipeParam as String
          Try
             pipeParam = Console.In.ReadLine()
          Catch e as Exception
             Exit Sub
          End Try

          ' Deal with parameters here

          If pipeParam = "END"
             Dim newThread as New Threading.Thread(Sub()
                                                       ' Create a new AppDomain and Loads the menu option, generally a Winforms form.
                                                   End Sub)
             newThread.Start()                 
          End If
       End While

    End If
End Sub 
```

一切都很好，很容易......直到今天。我在我的客户端环境（Windows Server 2003）中部署了这个解决方案，并且碰巧没有执行任何请求的线程，除非被调用的进程（COBOL）被终止（`Console.In`即被强制关闭）。从那时起，所有请求的 winform 都将开始显示并按预期运行。

用日志挖掘这种奇怪的行为，我发现线程正常执行，直到执行`IDictionary.ContainsKey()`语句（或其他需要本机代码执行的方法）。此时，线程冻结/休眠。

如果我将线程创建限制为三个，那么每个创建的线程都会挂起，直到第三个线程，即`Console.In.ReadLine`不再执行的时候。

我应该尝试什么？有什么建议吗？

更多信息：到目前为止，我发现的最接近的方向是 Hans Passant 在这个问题中的回答： [Interface freezes in multi-threaded c# application](https://stackoverflow.com/questions/4659283/interface-freezes-in-multi-threaded-c-sharp-application)（.NET SystemEvents 恰好出现在我的调试器线程列表中，但我无法解决我对建议的解决方案的问题）。

**更新新闻**

我可以通过等待子线程完成加载`Form`. 这个“准备就绪”信号通过`AppDomain.SetData()`和传递`AppDomain.GetData()`。不知何故，在创建表单后，当主线程继续时，子线程不再冻结`Console.ReadLine`。虽然问题解决了，但我对此很感兴趣。我试图在“尽可能简单”的测试用例中重现这一点。

**更多细节**

*   入口点 .exe 编译为 32 位。所有其他库都是“AnyCpu”。问题发生在 32 位（我的客户端）和 64 位（我的开发）机器（都是 windows Server 2003）上。
*   更新`Sub Main()`了上述代码段中的属性。
*   试图将其放入`Console.ReadLine`工作线程中。没有解决（见下图）。
*   COBOL 应用程序不会冻结，因为它是在单独的 OS 进程中执行的。管道恰好是我的 IPC 方法。在这种情况下，COBOL 应用程序只写入参数，不等待响应。
*   堆栈跟踪如下图所示（线程`PRX001235`在连接到数据库之前和有效加载表单之前反序列化 xml 配置文件 - 在这种情况下，似乎仍在托管代码中 - 有时`PRX001235`线程会在本机代码中冻结试图连接到数据库）：

![线程与 StackTrace 的对比](../Images/7595c812fc0a5a9dac3bb16f2eb622c4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T15:49:49.643

首先，你正在做一些*非常*不寻常的事情，所以不寻常的结果并不出人意料。其次，您所做的事情在 Windows SDK 文档中是严格*禁止的。*这表明创建单线程单元的线程永远不允许进行阻塞调用。

显然，您的工作线程在操作系统内部某处的某个锁上被阻塞，该锁由您的程序的主线程占用。查看其中一个被阻塞线程的调用堆栈以识别可能的锁会很有帮助。这需要启用非托管代码调试，以便您可以查看非托管堆栈帧并启用 Microsoft 符号服务器，以便您获得 Windows 代码的调试符号，并且可以从堆栈跟踪中理解。

没有一个可以看，我将不得不推测：

*   Console.ReadLine() 本身采用内部锁，使控制台可以安全地从多个线程中使用，从而对 Read() 的调用进行序列化。任何使用 Console 方法的线程都可以命中同一个锁。这不太可能是罪魁祸首，这些工作线程不太可能也在使用控制台。

*   严格*禁止的*角度与单元线程的相关性有关，这是一个 COM 功能。STA 由程序的 Main() 方法上的 [STAThread] 属性或 Thread.SetApartmentState() 调用启用。STA 需要使用从根本上说是线程不安全的组件，例如窗口、剪贴板、拖放、Shell 对话框（例如 OpenFileDialog）和许多其他 COM coclass，其中一些您可能无法识别，因为它们是由 .NET 类包装的. STA 单元确保这些组件以线程安全的方式使用，从工作线程调用此类组件的方法会自动封送到创建它的线程。与 Control.Invoke() 完全等价。这种编组要求线程泵送一个消息循环以在正确的线程上分派调用。你的主线是**在 Console.ReadLine() 调用中被阻止时**不抽水。**工作线程将在调用中停止，直到主线程再次开始抽水。死锁的可能性非常高，尽管您实际上并没有完全死锁，因为 ReadLine() 调用最终完成。值得注意的是，CLR 避免了这类死锁，当您使用*lock*关键字、在同步对象上调用 WaitOne() 或调用 Thread.Join()（.NET 编程中常见的阻塞调用）时，它会触发消息循环。但是，它不会为 Console.ReadLine() 执行此操作，至少在 Mark 所示的 .NET 4.0 解决方法之前是这样。**

***   一个高度投机的问题，由您观察到您通过等待创建表单来避免问题而触发。您可能在 64 位操作系统上遇到此问题，并且您的 EXE 项目的平台目标设置设置为“x86”而不是“AnyCPU”。在这种情况下，您的程序在 WOW64 仿真层中运行，该层允许 64 位操作系统执行 32 位程序。Windows 窗口管理器是一个 64 位子系统，调用它来向 32 位窗口发送通知会通过一个切换位的 thunk。窗口管理器传递 WM_SHOWWINDOW 消息时触发的 Form.Load 事件存在问题。它使仿真层处于困难状态，因为它多次穿过 64 位到 32 位边界。[这个答案](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a/4934010#4934010)。此代码在 Load 事件触发时持有模拟器锁的可能性非常高。所以在 Load 事件中调用 Console.ReadLine() 可能会很麻烦，我希望任何 32 位工作线程在进行 api 调用时也会传递这个锁。高度推测，但如果您可以将平台目标更改为 AnyCPU，则易于测试。** 

 **鉴于解决方案非常简单，因此不确定是否值得追查此问题的原因。只是不要在主线程上调用 Console.ReadLine() 。而是在工作线程上调用它。当 COBOL 程序无响应时，这也会阻止您的 UI 冻结。但是请注意，如果您收到的任何内容也更新了您的 UI，您现在必须使用 Control.Begin/Invoke() 编组自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:19:47.987

将 .NET 3.5/2.0 和 .NET 4.0 与 Reflector 进行比较：.NET 4.0 总是显式调用`__ConsoleStream.WaitForAvailableConsoleInput(hFile)`，`__ConsoleStream.ReadFileNative`而我在 .NET 3.5/2.0 中找不到等效调用。

`WaitForAvailableConsoleInput` [`InternalCall`](https://github.com/dotnet/coreclr/blob/43b39a73cbf832ec13ec29ed356cb75834e7a8d7/src/classlibnative/bcltype/console.cpp "GitHub：dotnet/coreclr/src/classlibnative/bcltype/console.cpp")检查管道，如果是这样，如果它有可用的数据或它已关闭，则避免等待它。

* * *

总结一下我所理解的是这个问题的当前状态：可以通过确保其他线程（AppDomains）在允许主线程继续`ReadLine`调用之前泵送消息来解决这个问题。

我认为这可能是一个（几乎）最终答案，因为这意味着在服务器版本期间有 Windows 消息正在进行，`ReadLine`这足以让我知道需要抽水。这归结为 Windows 文档需要提及需要/使用 Windows 消息传递的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:34:02.070

您是否尝试通过设置 Thread.IsBackground = true 将这些线程设置为后台线程**

# mysql - Mysql 程序错误，

> ID：13437173
> 
> 赞同：-1
> 
> 时间：2012-11-18T03:24:20.640
> 
> 标签：mysql, stored-procedures

我正在尝试创建以下 mysql 程序，但我被困了两个小时，我不知道它有什么问题。

```
delimiter $$
drop procedure if exists pos_finder;
    create procedure pos_finder()
     begin
     declare below, normal, normal_h, svalue, eid, above int default 0;
     declare bcounter, ncounter, acounter int default 0;
     declare done int default 0;
     declare userData cursor for select e.id, s.value, t.below_normal_h,
t.Normal_b, t.Normal_h, t.above_normal_l from k_employee as e, k_trackers_data as s, k_trackers_sub as t where e.id = 3 and s.user_id = e.id and t.id = s.sub_tracker_id;
     declare continue handler for not found set done = 1;
     open userData;
     fetch userData into eid, svalue, below, normal, normal_h, above;
     if svalue < below then
     set bcounter = bcounter + 1;
     else if svalue > normal then
     set ncounter = ncounter + 1;
     else if svalue > above then
     set acounter = acounter + 1;
     end if;
     close userData;
     end$$ 
```

mysql 说

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near '' at
line 19 
```

这是**关闭 userData**线。我在这里和那里移动了换行符，它总是只在这一行上给出错误

请有人可以告诉我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:35:43.770

`elseif`，不是`else[space]if`。有了一个空间，你就打开了一个全新的`if`街区。因此，当您接听电话时，有两个“悬空”`close`信号。

# exception - 调用方法“登录”时出现 Meteor OAuth 异常

> ID：13437174
> 
> 赞同：5
> 
> 时间：2012-11-18T03:24:28.593
> 
> 标签：exception, login, oauth, meteor

在尝试使用 Meteor 包*accounts-facebook*和*accounts-google*登录时，我遇到了 OAuth 处理程序异常。Packages ***accounts-twitter***似乎可以正常工作并且可以完美登录。我没有写任何代码，这是使用*accounts-ui*包开箱即用的

前端简单地用红色文字说“Internal Server Error”，Meteor 堆栈跟踪如下：

```
Exception in oauth request handler [Error: failed]
Exception while invoking method 'login' Error: failed
at Request.Meteor.http.call [as _callback] (app/packages/http/httpcall_server.js:117:19)
at Request.init.self.callback (/usr/lib64/meteor/lib/node_modules/request/main.js:122:22)
at Request.EventEmitter.emit (events.js:96:17)
at Request.<anonymous> (/usr/lib64/meteor/lib/node_modules/request/main.js:654:16)
at Request.EventEmitter.emit (events.js:123:20)
at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/usr/lib64/meteor/lib/node_modules/request/main.js:616:14)
at IncomingMessage.EventEmitter.emit (events.js:123:20)
at IncomingMessage._emitEnd (http.js:366:10)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
at CleartextStream.socketOnData (http.js:1366:20) 
```

我正在我自己的基础设施上运行 Meteor 应用程序，并使用一个有效的域名。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:02:50.057

我遇到了同样的问题，结果发现我的服务配置不正确，特别是我的 Facebook 应用程序密码错误。进入您的 mongo shell 并检查您的 meteor_accounts_loginServiceConfiguration 以确保其设置正确。启动 Meteor，然后通过`meteor mongo` 然后输入 'db.meteor_accounts_loginServiceConfiguration.find()' 进入 mongo shell 以显示该集合中的文档。现在检查您的 Facebook 文档，确保它与您在 Facebook 上创建的应用完全匹配。

我这样做了，一切都立即奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T03:25:57.583

对此感到抱歉。我们在这些情况下的错误报告很糟糕。即将发布的 Meteor 0.6.2 中有一个修复程序。

# java - 如何使静态块运行？

> ID：13437175
> 
> 赞同：0
> 
> 时间：2012-11-18T03:24:30.527
> 
> 标签：java, timer

我已经看到了很多关于这个主题的答案，但仍然找不到一个干净的解决方案。

```
public class ProcessScheduler {
    static {
        Timer timer=new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                LogProcessorServiceImpl.processPageRequestsLogs();
            }
        }, 0, 120);
    }
} 
```

我如何执行此操作并对高质量的解决方案感到满意？我的应用程序是基于 Spring 的（不幸的是），我知道我可以在我的一个控制器中引用这个类，它可能会工作。但这很愚蠢。必须有更好的方法。我在没有 EJB 支持的 Tomcat 上，所以计时器注释对我不起作用。另外，我不想做 CRON。我想在这个调度程序类中安排我的所有维护任务。

Servlet 类可以通过 web.xml (1) 加载。我们可以在非 servlet 类上做类似的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T03:30:20.263

而不是在静态块中写这个，我宁愿

*   编写一个扩展的[事件监听器](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654)[`javax.servlet.ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)
*   将那段代码移到[`contextInitialized`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)方法中
*   定义[`contextDestroyed`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)取消定时器的方法
*   将类配置为我的应用程序`<listener>`的文件。`web.xml`

    ```
    <listener>
        <listener-class>
            com.vikdor.webapps.ProcessSchedulerListener
        </listener-class>
    </listener> 
    ```

# php - mod_rewrite 多个变量和子文件夹

> ID：13437176
> 
> 赞同：1
> 
> 时间：2012-11-18T03:24:36.700
> 
> 标签：php, url, mod-rewrite

在我的网站上，我有多个这样的 URL：

主页：

```
mysite.com
mysite.com/?content=about
mysite.com/?content=posts&page=2 
```

子文件夹：

```
mysite.com/subsite/
mysite.com/subsite/?content=about
mysite.com/subsite2/?content=posts&page=2 
```

我想把这些清理成：

```
mysite.com/about/
mysite.com/posts/2

mysite.com/subsite/about/
mysite.com/subsite/posts/2 
```

现在，我已经能够将 mod_rewrite 用于一个变量和其他一些简单的事情，但我不完全确定如何实现这一点。当我使用：

```
RewriteRule ^([a-z]+)/([a-z0-9-]+)/?$ /?content=$1&page=$2 [L] 
```

它将 URL 的部分识别为变量，但它也将子站点视为变量，并尝试为“内容”插入“子站点”。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:25:57.537

您可以调整现有规则以允许使用可选的subsite **/**或**subsite2/**前缀，例如

```
RewriteRule ^(subsite/|subsite2/)?([a-z]+)/([a-z0-9-]+)/$   /$1?content=$2&page=$3 [L] 
```

或者只是在现有规则之前添加一个规则来处理子站点，例如

```
RewriteRule ^(subsite/|subsite2/)([a-z]+)/([a-z0-9-]+)/$ /$1?content=$2&page=$3 [L]
RewriteRule ^([a-z]+)/([a-z0-9-]+)/?$ /?content=$1&page=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:44:19.307

我最终通过在文件夹中放置另一个`.htaccess`文件来使其工作`subsite`。

根`.htaccess`有：

```
RewriteEngine On
RewriteRule ^([A-Za-z0-9]+)/?$ ?a=b&content=$1 [L]
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/?$ ?a=b&content=$1&page=$2 [L] 
```

* * *

在`.htaccess`我的子站点中：（与 root .htaccess 相同）

```
RewriteEngine On
RewriteRule ^([A-Za-z0-9]+)/?$ ?a=b&content=$1 [L]
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/?$ ?a=b&content=$1&page=$2 [L] 
```

如果您不需要更改子目录的 url，只需添加`RewriteEngine On`到子站点的`.htaccess`. 这基本上覆盖了根`.htaccess`重写规则，并从子文件夹加载页面。

# javascript - 如何在 jQuery 的 Flexigrid 的单元格中放置下拉菜单？

> ID：13437179
> 
> 赞同：1
> 
> 时间：2012-11-18T03:25:22.503
> 
> 标签：javascript, jquery, flexigrid

我需要将下拉列表放在我的 jQuery Flexigrid 的单元格中，以便用户更改 Flexigrid 自己的数据。我该怎么做呢？

我只需要知道如何将下拉列表放入单元格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:27:45.580

您可以将任何 HTML 对象放入 Flexigrid。

```
function Retornaddl()
{
    string linha = "<select class='inputlogininterno' id='resultadolista' name='resultadolista' style='width:150px;'><option value=''>Escolha...</option></select>";
    return linha;
}

var jsonData = new
{
    page = pageIndex,
    total = count,
    rows = (
        from item in pagedItems
        select new
        {
            id = item.ID,
            cell = new string[] {
                item.ID.ToString(),
                Retornaddl()
            }
        }).ToArray()
};
return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T13:50:24.673

你不能。但是您可以在网格中创建一个编辑按钮，并在浮动 div 中显示您的编辑内容。

# javascript - 启用/禁用虚拟键盘

> ID：13437182
> 
> 赞同：6
> 
> 时间：2012-11-18T03:26:40.550
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[虚拟键盘](http://mottie.github.com/Keyboard/)。我有一个复选框来控制是否显示虚拟键盘。问题是我不明白如何禁用它。我尝试解绑它，但它不起作用...

我还尝试使用命名空间，然后取消绑定所有命名空间，但在单击文本框后仍然可以访问键盘。

```
<input class="virtualKeyboardField ui-keyboard-input ui-widget-content ui-corner-all" data-val="true" data-val-required="The User name field is required." id="loginUserName" name="UserName" type="text" value="" aria-haspopup="true" role="textbox">
<script type="text/javascript">
  $(function () {
    //show login
    $("#showLogin").on({
      click: function () {
        $("#loginFormDiv").toggle("slow");
      }
    });
    $("#cb_showVKey").on('click', CheckIsToShowKey);
  });
  function CheckIsToShowKey(event) {
    //var isCheck = $("#cb_showVKey").is(':checked');
    //alert("ischecked? " + isCheck);
    if ($("#cb_showVKey").is(':checked')) {
      //if checked
      BindKeyboards();
    } else {
      //not checked
      UnBindKeyboards();
    }
  }
  function bindVirtualKeyboards() {
    $("#loginForm").delegate(".virtualKeyboardField", "click.xpto", BindKeyboards);
  }
  function UnBindKeyboards() {
    $("#loginForm").undelegate(".virtualKeyboardField", "click.xpto", BindKeyboards);
  }
  function BindKeyboards() {
    // alert(event.currentTarget.id);
    //alert("xpto");
    if ($("#cb_showVKey").is(':checked')) {
      $("#loginUserName").keyboard({
        layout: 'qwerty',
        lockInput: true,
        preventPaste: true
      });
      $("#loginUserPassword").keyboard({
        layout: 'qwerty',
        lockInput: true,
        preventPaste: true
      });
    }
  }
  $(document).ready(function () {
    $("#loginForm").validate();
    BindKeyboards();
  });
</script> 
```

有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:33:22.590

这可以满足您的需要

```
var keys;
var key_init=function() {keys=$('#keyboard').keyboard().getkeyboard();};

key_init();
$('#switch_kbd').change(
  function() {
    if ($(this).attr('checked')==='checked') { key_init(); return;}
    keys.destroy();
  }
); 
```

[样本](http://jsbin.com/ubajaq/2/)

我更新了它的 wiki，并注意到它指向使用相同解决方案的[布局演示。](http://mottie.github.com/Keyboard/layouts.html)

从他们的[文档](https://github.com/Mottie/Keyboard/wiki/Methods)中：

> 键盘是键盘数据对象，您也可以使用 $('#keyboard').getkeyboard() 访问它
> 
> 使用keyboard.destroy()
> 
> *   此函数完全从输入中删除键盘和事件。
> *   如果您打算在使用相同输入时更改键盘布局，则需要此功能。请参阅[布局演示。](http://mottie.github.com/Keyboard/layouts.html)

# android - 带有 CursorTreeAdapter 的 ExpandableListView 抛出 IllegalStateException

> ID：13437185
> 
> 赞同：3
> 
> 时间：2012-11-18T03:27:32.043
> 
> 标签：android

这是我的活动代码：

```
public class MenuActivity extends FragmentActivity implements
    ActionBar.TabListener {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide
 * fragments for each of the sections. We use a
 * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
 * will keep every loaded fragment in memory. If this becomes too memory
 * intensive, it may be best to switch to a
 * {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

static DatabaseManager db;

// url to make request
private static String URL = "http://192.168.88.111/MenuManager/mm_menu.php";

static long currLangId;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    final String DB_NAME = "menu"; // the name of our database
    final String DB_PATH = "/data/data/com.mypackage.menu/databases/";

    File dbFile = new File(DB_PATH + DB_NAME);
    Boolean firstLaunch = !dbFile.exists();

    db = new DatabaseManager(this);

    // new RetreiveJSONAndCacheSQLiteMenu().execute(URL);
    if (firstLaunch) {
        InputStream is = getResources().openRawResource(R.raw.menu);
        Writer writer = new StringWriter();
        char[] buffer = new char[1024];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is,
                    "UTF-8"));
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
            is.close();
            JSONObject jObj = new JSONObject(writer.toString());
            parseMenuJSON(jObj);
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    currLangId = db.getLangIdFromName(db.LANG_ENGLISH);

    // Create the adapter that will return a fragment for each
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    // try to hide Navigation bar
    // mViewPager.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);

    // When swiping between different sections, select the corresponding
    // tab.
    // We can also use ActionBar.Tab#select() to do this if we have a
    // reference to the Tab.
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(MenuActivity.this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    return db.createMenuFromLangs(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    currLangId = db.getLangIdFromName(item.getTitle());
    ActionBar actionBar = getActionBar();
    actionBar.removeAllTabs();
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(MenuActivity.this));
    }
    /*
     * for (int i = 0; i <
     * listView.getExpandableListAdapter().getGroupCount(); i++)
     * listView.expandGroup(i);
     */
    return true;
}

public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the primary sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new MenuCategFragment();
        Bundle args = new Bundle();
        args.putInt(MenuCategFragment.ARG_SECTION_NUMBER, i);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return db.getNumberPages(currLangId);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return db.getPageName(position, currLangId);
    }
}

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {
    public MyExpandableListAdapter(Cursor cursor, Context context,
            int groupLayout, String[] groupFrom, int[] groupTo,
            int childLayout, String[] childFrom, int[] childTo) {
        super(context, cursor, groupLayout, groupFrom, groupTo,
                childLayout, childFrom, childTo);
    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        return db.getAllItemsInCateg(groupCursor.getLong(0));
    }
}

public class MenuCategFragment extends Fragment {
    public MenuCategFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final ExpandableListView listView = new ExpandableListView(
                getActivity());
        listView.setId(android.R.id.list);
        Bundle args = getArguments();

        Cursor cursor = db.getAllCategsInPage(
                args.getInt(ARG_SECTION_NUMBER), currLangId);

        String[] fromCategColumns = { db.CATEG_NAME };
        int[] toCategViews = { R.id.categName };
        String[] fromItemColumns = { db.ITEM_NAME, db.ITEM_DESC,
                db.ITEM_PRICE };
        int[] toItemViews = { R.id.itemName, R.id.itemDesc, R.id.itemPrice };

        ExpandableListAdapter adapter = new MyExpandableListAdapter(cursor,
                getActivity(), R.layout.categ, fromCategColumns,
                toCategViews, R.layout.item, fromItemColumns, toItemViews);
        listView.setAdapter(adapter);
        for (int i = 0; i < adapter.getGroupCount(); i++)
            listView.expandGroup(i);
        /*
         * listView.setOnGroupClickListener(new
         * ExpandableListView.OnGroupClickListener() { public boolean
         * onGroupClick(ExpandableListView arg0, View itemView, int
         * itemPosition, long itemId) { arg0.expandGroup(itemPosition);
         * return true; } });
         */
        listView.setOnGroupCollapseListener(new ExpandableListView.OnGroupCollapseListener() {
            public void onGroupCollapse(int groupPosition) {
                listView.expandGroup(groupPosition);
            }
        });
        return listView;
    }
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    try {
        if (!hasFocus) {
            Object service = getSystemService("statusbar");
            Class<?> statusbarManager = Class
                    .forName("android.app.StatusBarManager");
            Method collapse = statusbarManager.getMethod("collapse");
            collapse.setAccessible(true);
            collapse.invoke(service);
        }
    } catch (Exception ex) {
    }
}

public class RetreiveJSONAndCacheSQLiteMenu extends
        AsyncTask<String, Void, JSONObject> {
    InputStream is = null;
    JSONObject jObj = null;
    String json = "";

    protected JSONObject doInBackground(String... urls) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(urls[0]);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        return jObj;
    }

    protected void onPostExecute(JSONObject json) {
        parseMenuJSON(json);
    }
}

public void parseMenuJSON(JSONObject json) {
    // JSON Node names
    final String TAG_LANGS = "langs";
    final String TAG_PAGES = "pages";
    final String TAG_CATEGORIES = "categories";
    final String TAG_ITEMS = "items";
    // final String TAG_ID = "id";
    final String TAG_NAME = "name";
    final String TAG_DESC = "desc";
    final String TAG_PRICE = "price";
    // final String TAG_PHOTO = "photo";

    // JSONArray
    JSONArray langs = null;
    JSONArray pages = null;
    JSONArray categories = null;
    JSONArray items = null;

    try {
        db.voidDatabase();
        langs = json.getJSONArray(TAG_LANGS);
        long currLangId = 0;
        for (int h = 0; h < langs.length(); h++) {
            JSONObject lang = langs.getJSONObject(h);
            currLangId = db.addLang(lang.getString(TAG_NAME));
            pages = lang.getJSONArray(TAG_PAGES);
            long currPageId = 0;
            for (int i = 0; i < pages.length(); i++) {
                JSONObject page = pages.getJSONObject(i);
                currPageId = db.addPage(page.getString(TAG_NAME),
                        currLangId);
                categories = page.getJSONArray(TAG_CATEGORIES);
                long currCategId = 0;
                for (int j = 0; j < categories.length(); j++) {
                    JSONObject categorie = categories.getJSONObject(j);
                    currCategId = db.addCateg(
                            categorie.getString(TAG_NAME), currPageId);
                    items = categorie.getJSONArray(TAG_ITEMS);
                    for (int k = 0; k < items.length(); k++) {
                        JSONObject item = items.getJSONObject(k);
                        db.addItem(item.getString(TAG_NAME),
                                item.getString(TAG_DESC),
                                item.getInt(TAG_PRICE), currCategId);
                    }
                }
            }
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

我需要的是一个 PagerView，在每个选项卡中都有一个 EnxpandableListView，其中包含来自数据库游标的数据。所有 ExpandableListView 应始终保持展开状态。它应该支持多语言（来自 ActionBar 中的菜单按钮）。

它几乎可以工作，但我有奇怪的 FC：

```
W/dalvikvm(13556): threadid=1: thread exiting with uncaught exception (group=0x40a641f8)
E/AndroidRuntime(13556): FATAL EXCEPTION: main
E/AndroidRuntime(13556): java.lang.IllegalStateException: this should only be called when the cursor is valid
E/AndroidRuntime(13556): at android.widget.CursorTreeAdapter.getGroupView(CursorTreeAdapter.java:198)
E/AndroidRuntime(13556): at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:445)
E/AndroidRuntime(13556): at android.widget.AbsListView.obtainView(AbsListView.java:2012)
E/AndroidRuntime(13556): at android.widget.ListView.makeAndAddView(ListView.java:1772)
E/AndroidRuntime(13556): at android.widget.ListView.fillDown(ListView.java:672)
E/AndroidRuntime(13556): at android.widget.ListView.fillSpecific(ListView.java:1330)
E/AndroidRuntime(13556): at android.widget.ListView.layoutChildren(ListView.java:1603)
E/AndroidRuntime(13556): at android.widget.AbsListView.onLayout(AbsListView.java:1863)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.support.v4.view.ViewPager.onLayout(ViewPager.java:1388)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
E/AndroidRuntime(13556): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
E/AndroidRuntime(13556): at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
E/AndroidRuntime(13556): at android.view.View.layout(View.java:11282)
E/AndroidRuntime(13556): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(13556): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1514)
E/AndroidRuntime(13556): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2467)
E/AndroidRuntime(13556): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(13556): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(13556): at android.app.ActivityThread.main(ActivityThread.java:4581)
E/AndroidRuntime(13556): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(13556): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(13556): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(13556): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(13556): at dalvik.system.NativeStart.main(Native Method) 
```

希望比我更聪明的人可以帮助我发现问题......我做了很多尝试但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T12:21:06.313

CursorLoader 解决了这个问题。简单的例子：

```
public class MenuCategFragment extends Fragment implements LoaderCallbacks<Cursor> 
```

添加 3 个方法和 MyCursorLoaderClass。

```
@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    return new MyCursorLoader(getActivity(), db, sectionNumber, currLangId);
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    adapter.setGroupCursor(cursor);
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    // TODO Auto-generated method stub

}

static class MyCursorLoader extends CursorLoader{
    DataBase db;
    int sectionNumber;
    long currLangId;

    public MyCursorLoader(Context context, DataBase db, int sectionNumber, long currLangId) {
       super(context);
       this.db = db;
       this.sectionNumber = sectionNumber;
       this.currLangId = currLangId;
    }

    @Override
       public Cursor loadInBackground() {
          return db.getAllCategsInPage(sectionNumber, currLangId);
       }            

    } 
```

之后改变这个：

```
ExpandableListAdapter adapter = new MyExpandableListAdapter(**null**, getActivity(),    R.layout.categ, fromCategColumns,
            toCategViews, R.layout.item, fromItemColumns, toItemViews); 
```

并初始化 CursorLoader：

```
getActivity().getSupportLoaderManager().initLoader(0, null, this); 
```

# c++ - c++进程调度问题

> ID：13437188
> 
> 赞同：0
> 
> 时间：2012-11-18T03:28:20.970
> 
> 标签：c++, iterator

我正在编写实现多级反馈队列调度程序的代码。部分代码中有一些不清楚的地方：

```
void Scheduler_MFQS :: fill_queue(int clk) {
    list<Process>::iterator itr;
    for(itr = processes.begin(); itr != processes.end(); itr++) {
            if((itr -> has_arrived(clk)) && (!queues[0].contains(*itr))) {
                    Process tmp (*itr);
                    queues[0].add_process(tmp); 
                    remove(processes.begin(), processes.end(), *itr);
             }
    }       
} 
```

这基本上所做的只是在某些条件下将进程放入基本队列中。但是不知道是什么`Process tmp (*itr);`意思？但是，它是合法编译的。这是否意味着创建一个名为 tmp 的 Process 对象？但是下一个迭代器`(*itr)`在 C++ 中的含义是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:39:21.250

**itr**是指向某个容器元素（在您的情况下为列表）的迭代器。当您在迭代器上使用星号（*）时，您可以访问其内容，即访问列表的实际元素。在您的情况下，它是一个 Process 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:43:25.817

```
"Process tmp (*itr);" mean? 
```

它调用 Process(const Process& &) 复制构造函数来创建 tmp 对象；

```
what is the next, iterator (*itr) mean in c++? 
```

itr 是 std::list::iterator 类型，它是指向当前列表节点的指针。*itr 正在获取 itr 的内容，它是一个 Process。

您的代码可以增强一点，演示如下：

```
 // list<Process>::iterator itr; // move this into for loop, narrow variable scope and lifetime
    /*auto if C++11*/
     processes.unique();  // you actually only want unique processes from list
    for(list<Process>::iterator itr = processes.begin(); itr != processes.end(); ++itr) 
                                                         ^^ call preincrement, faster
    {
        if((itr -> has_arrived(clk)) /*&& (!queues[0].contains(*itr))*/) {
                                     ^^ process list contains unique item only, no need to compare
         //Process tmp (*itr); comment out this line, save one object copy
         queues[0].add_process(*itr);              
         //remove(processes.begin(), processes.end(), *itr);   
         // You don't need to clear item in the loop              
        }
    }

   processes.clear();   // or swap with an empty list
   // std::list<Process> p2;
   // p2.swap(ps); 
```

# wampserver - 如何创建虚拟主机

> ID：13437193
> 
> 赞同：2
> 
> 时间：2012-11-18T03:29:44.913
> 
> 标签：wampserver

我正在使用 WAMP-2.4.2/Windows-7/PHP-5.4.3 我想在谷歌期间创建虚拟主机我发现[http://discussion.accuwebhost.com/linux-server/1121-how-set-up- virtual-host-wamp.html](http://discussion.accuwebhost.com/linux-server/1121-how-set-up-virtual-host-wamp.html)但我无法编辑位于

> C:/Windows/System32/驱动程序/etc/

我也试过参考： http: [//windows7themes.net/windows-7-hosts-file-access-denied.html](http://windows7themes.net/windows-7-hosts-file-access-denied.html)

> 网络用户管理员/活动：是

运行此命令后在命令提示符上显示成功消息，但是当我再次尝试编辑主机文件时，它显示拒绝访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:47:13.920

在安装防病毒软件或其他安全软件时，我们设置系统文件保护时是否安装了任何安全软件，我也遇到过这个问题

关注这个，因为它是详细的文章

[http://en.kioskea.net/faq/8485-configuring-apache-and-windows-to-create-a-virtual-host](http://en.kioskea.net/faq/8485-configuring-apache-and-windows-to-create-a-virtual-host)

# android - 为什么我的应用可以在平板电脑上运行，但不能在手机上运行？

> ID：13437194
> 
> 赞同：0
> 
> 时间：2012-11-18T03:29:51.463
> 
> 标签：android

为什么我在手机上运行这个应用程序时崩溃了，但在我的平板电脑上却运行良好？当我在手机上运行它时，在 class.java:117 处得到一个**java.NullPointerException**，**这** 是我的全部活动。

 **```
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

public class Basketball extends Activity {

    int homecount, awaycount, minutes, seconds, sec, min;
        TextView home, away, timeEx;
    Button stop, start, reset, addhome, subhome, addaway, subaway, home2,
        home3, away2, away3;

    jakes.apps.scoreboard.CountDownTimer time;
    public boolean running;
    public int msElapsed;
    TextView time2;
    long startTime, stopTime;
    Button button;
    long timeWhenStopped; 
    int buttonCount, period;
    int ending;
    MediaPlayer ourSong;
    SharedPreferences getPrefs;
    getSystemService(Context.VIBRATOR_SERVICE);
    RadioButton first, second, third, fourth;

private void change() {
    // TODO Auto-generated method stub
    if ((buttonCount % 2) == 0) {
        start.setText("Start");
        stop.setText("Stop");
    } else {
        start.setText("Resume");
        stop.setText("Reset");
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.basketball);

    initize();

    time = new jakes.apps.scoreboard.CountDownTimer(900000, 1000) {

        public void onTick(long millisUntilFinished) {
            sec--;
            if (sec == 0) {
                min--;
                sec = 59;
            }
            if (sec < 10) {
                time2.setText(min + ":0" + sec);
            }
            time2.setText(min + ":" + sec);
        }

        public void onFinish() {
            if (period == 1) {
                Toast.makeText(getApplicationContext(),
                        "First period over", Toast.LENGTH_LONG).show();
                fourth.setChecked(false);
                third.setChecked(false);
                second.setChecked(true);
                first.setChecked(false);
                period++;

            } else if (period == 2) {
                Toast.makeText(getApplicationContext(),
                        "First period over", Toast.LENGTH_LONG).show();
                fourth.setChecked(false);
                third.setChecked(true);
                second.setChecked(false);
                first.setChecked(false);
                period++;

            } else if (period == 3) {
                Toast.makeText(getApplicationContext(),
                        "First period over", Toast.LENGTH_LONG).show();
                fourth.setChecked(true);
                third.setChecked(false);
                second.setChecked(false);
                first.setChecked(false);
                period++;

            } else if (period == 4) {
                gameover();

        }
    };

    addhome.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            homecount++;
            home.setText(homecount + "");
            boolean music = getPrefs.getBoolean("mute", false);
            if (music == false) {
                ourSong.start();
            }

        }
    });
    home2.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            homecount = homecount + 2;
            home.setText(homecount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
            }

        }

    });
    home3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            homecount = homecount + 3;
            home.setText(homecount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
            }

        }
    });

    subhome.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            homecount--;
            home.setText(homecount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
            }

        }
    });
    addaway.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            awaycount++;
            away.setText(awaycount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        }
    });
    away2.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            awaycount = awaycount + 2;
            away.setText(awaycount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        }
    });
    away3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            awaycount = awaycount + 3;
            away.setText(awaycount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        }
    });

    subaway.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            awaycount--;
            away.setText(awaycount + "");
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        }
    });

}

protected void gameover() {
    time2.setText("15:00");
    period = 0;
    fourth.setChecked(false);
    third.setChecked(false);
    second.setChecked(false);
    first.setChecked(true);
    if (homecount < awaycount) {
        Toast.makeText(getApplicationContext(), "Away team wins!!!",
                Toast.LENGTH_LONG).show();
    } else if (homecount > awaycount) {
        Toast.makeText(getApplicationContext(), "Home team wins!!!",
                Toast.LENGTH_LONG).show();
    } else if (homecount == awaycount) {
        Toast.makeText(getApplicationContext(), "Its a tie",
                Toast.LENGTH_LONG).show();
    }

}

private void initize() {
    // TODO Auto-generated method stub
    time2 = (TextView) findViewById(R.id.timer);
    start = (Button) findViewById(R.id.bStart);
    stop = (Button) findViewById(R.id.bStop);
    home3 = (Button) findViewById(R.id.add3home);
    home2 = (Button) findViewById(R.id.add2home);
    away3 = (Button) findViewById(R.id.add3away);
    away2 = (Button) findViewById(R.id.add2away);
    addhome = (Button) findViewById(R.id.bAddHome);
    addaway = (Button) findViewById(R.id.bAddAway);
    subhome = (Button) findViewById(R.id.bSubHome);
    subaway = (Button) findViewById(R.id.bSubAway);
    home = (TextView) findViewById(R.id.home);
    away = (TextView) findViewById(R.id.away);
    running = false;
    stopTime = 0;
    stopTime = 0;
    timeWhenStopped = 0;
    buttonCount = 1;

    button = (Button) findViewById(R.id.bStart);
    button.setOnClickListener(mStartListener);

    button = (Button) findViewById(R.id.bStop);
    button.setOnClickListener(mStopListener);

    ourSong = MediaPlayer.create(Basketball.this, R.raw.click);
    getPrefs = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    min = 14;
    sec = 60;
    period = 1;

    first = (RadioButton) findViewById(R.id.first);
    second = (RadioButton) findViewById(R.id.second);
    third = (RadioButton) findViewById(R.id.third);
    fourth = (RadioButton) findViewById(R.id.fourth);
}

View.OnClickListener mStartListener = new OnClickListener() {
    public void onClick(View v) {
        start();
    }

};

View.OnClickListener mStopListener = new OnClickListener() {
    public void onClick(View v) {
        stop();

    }

};

private void stop() {
    // TODO Auto-generated method stub
    running = false;
    buttonCount++;
    change();
    time.pause();

    if ((buttonCount % 2) == 0) {
        reset();
    } else {

    }
    boolean music = getPrefs.getBoolean("mute", true);
    if (music == false) {
        ourSong.start();
        ourSong.release();
    }
}

protected void start() {
    if (running == true) {

    } else {
        if (((buttonCount % 2) == 0)) {
            time.resume();
            running = true;
            buttonCount++;
            change();
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        } else {

            buttonCount++;
            time.start();
            running = true;
            change();
            boolean music = getPrefs.getBoolean("mute", true);
            if (music == false) {
                ourSong.start();
                ourSong.release();
            }
        }
    }

}

private void reset() {
    // TODO Auto-generated method stub
    time.cancel();
    boolean music = getPrefs.getBoolean("mute", true);
    if (music == false) {
        ourSong.start();
        ourSong.release();
    }
    buttonCount++;
    sec = 1;
    time2.setText("15:00");
    min = 15;
}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.main, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.newgame:
        Intent NewGame = new Intent("jakes.apps.scoreboard.NEWGAME");
        startActivity(NewGame);
        break;
    case R.id.aboutus:
        Intent AboutUs = new Intent("jakes.apps.scoreboard.ABOUTUS");
        startActivity(AboutUs);
    case R.id.settings:

        Intent settings = new Intent("jakes.apps.scoreboard.SETTINGS");
        startActivity(settings);
        break;

    }
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:35:48.033

`home2`变量的值是执行的`null`时间`home2.setOnClickListener(...`。

如果没有更多上下文，我们无法告诉您为什么会这样……或如何解决它……

* * *

你说：

> home2 = (Button) findViewById(R.id.add2home); 在到达这条线之前运行

有五种可能的解释：

*   电话正在`findViewById(R.id.add2home)`返回。`null`

*   通话`home2` *后发生*了一些变化。`findViewById`

*   你错了，在使用`home2`.

*   您误解了原始堆栈跟踪，并且`NullPointerException`该语句没有抛出。

*   您实际执行的代码与您向我们展示的源代码不同步……因此该异常实际上完全来自其他地方。

* * *

**更新**- 根据您现在发布的完整代码，我的第一个解释似乎是正确的。@spanjeta 的评论非常中肯：

> 能否请您发布布局xml文件。您的代码中是否有多个布局。我认为 xml 布局中的按钮 ID 不正确，这`home2`就是`null`.**

# css - 如何将图像放置在表格的右上角

> ID：13437198
> 
> 赞同：1
> 
> 时间：2012-11-18T03:30:44.473
> 
> 标签：css, html

如何将图像放置在表格的右上角？我想为桌角设置图像。我怎样才能在 html 或 css 中做到这一点？

这是我想要得到的示例：

![在此处输入图像描述](../Images/d54fe886459db5c1c686baa092db35a2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T05:03:26.813

正如@Sonasish Roy 所说，您需要一个表格包装器：

HTML：

```
<div id="container_table">
   <img src="img_right.jpg">
   <table>
     <!-- Here is your table content /-->
   </table>
</div> 
```

CSS：

```
#container_table{
   position:relative;
   //Set some width because table has width:100%;
   width: 90%;
}
#container_table img{
   position:absolute;
   right:0;
   top:0;
}
#container_table table{
   //Here some css for your table, even you can use background-image, but you can have some problem with borders.
} 
```

如果您想查看上述所有代码与示例表和图像一起使用，我做了这个小提琴：http: [//jsfiddle.net/H3Vqc/5/](http://jsfiddle.net/H3Vqc/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:38:41.653

您需要将表格包装在 div 中，将 div 设置为相对位置，将角细节图像设置为绝对位置。

# objective-c - 如何有条件地引用 Objective-C 中的变量

> ID：13437199
> 
> 赞同：0
> 
> 时间：2012-11-18T03:31:01.057
> 
> 标签：objective-c, reflection

这是一个奇怪的问题。基本上在框架中定义了一个 const 结构，我可能无法加载，也可能无法加载。假设该结构称为“ExternalStruct”。我可以判断我是否可以加载框架，但我不能按名称使用变量，因为如果我不能加载框架，它会崩溃。我该如何做我想做的事情（参考 ExternalStruct，但前提是我可以加载这个框架）？

谢谢

编辑：

我的另一个想法是使用 ifdef，但我不确定它们在编译时间与链接时间方面是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:31:36.450

如果您可以获得相关库的 CFBundle/NSBundle，一旦加载，您就可以使用[CFBundleGetDataPointerForName](http://developer.apple.com/library/ios/documentation/CoreFoundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/c/func/CFBundleGetDataPointerForName)。

# python - sage 5.0 令人困惑的语法错误

> ID：13437201
> 
> 赞同：2
> 
> 时间：2012-11-18T03:31:12.040
> 
> 标签：python, sage

我的操作系统不支持 Sage 5.4，所以我现在坚持使用 5.0。定义这个函数不会在 python 中注册任何语法错误，而且我认为它在 Sage 5.4 中不会出错（如果可能的话，我会很感激确认。）我想知道它为什么在 5.0 中失败。

```
def num_matchings(G):
    if min(G.degree_sequence())== 0 or G.num_edges()==0:
        return 0
    elif G.num_edges()==1:
        if G.edges()[0][2] ==None:
            return 1
        else:
            return G.edges()[0][2]
    else:
        H = copy(G)
        K = copy(G)
        e = G.edges()[0]
        if e[2] ==None:
            w=1
        else:
            w = e[2]
        H.delete_edge(e)
        K.delete_vertices([e[0],e[1]])
        return num_matchings(H) + w*num_matchings(K) 
```

我尝试定义时遇到的第一个错误是

`File "<ipython console>", line 4 ==Integer(1): ^ SyntaxError: invalid syntax`
在那之后他们堆积如山。在我看来，语法看起来不错。
我在带有 GCC 4.0.1 的 Mac OS 10.5 上。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:11:15.467

[旁白：错字`.delete_vertives()`。]

你的语法本身很好。但是，从错误消息来看，您似乎只是将代码复制并粘贴到控制台中。这只适用于某些非常简单的情况。您还使用制表符进行缩进，这也可能导致其他一系列问题。您应该真正改用 4 空格制表符。

如果您想将代码插入实时控制台，您可以使用`%paste`（如果可以的话，从剪贴板复制），或者`%cpaste`代替。

例如，如果我复制并粘贴您的代码，我会得到：

```
sage: def num_matchings(G):
....:         if min(G.degree_sequence())== 0 or G.num_edges()==0:
....:             return 0
....:     elif G.num_edges()==1:
------------------------------------------------------------
   File "<ipython console>", line 4
     ==Integer(1):
      ^
SyntaxError: invalid syntax

sage:         if G.edges()[0][2] ==None:
....:                 return 1
------------------------------------------------------------
   File "<ipython console>", line 2
SyntaxError: 'return' outside function (<ipython console>, line 2) 
```

但如果我使用`%cpaste`4 空格等效项（不幸`%paste`的是，目前我的 5.4.1 安装不工作）：

```
sage: %cpaste
Pasting code; enter '--' alone on the line to stop.
:
:def num_matchings(G):
:    if min(G.degree_sequence())== 0 or G.num_edges()==0:
:        return 0

[etc.]

:        K.delete_vertices([e[0],e[1]])
:        return num_matchings(H) + w*num_matchings(K)
:--
sage: num_matchings(graphs.LadderGraph(5))
8 
```

# ruby-on-rails - 使用自定义域在 heroku 上设置 SSL

> ID：13437207
> 
> 赞同：3
> 
> 时间：2012-11-18T03:31:41.023
> 
> 标签：ruby-on-rails, ssl, heroku, subdomain

我正在尝试使用 ssl-endpoint 插件为 heroku 上的自定义域设置 SSL。我的应用程序使用 Rails 3.1.0。

假设我的自定义域是 www.example.com。从[这个问题](https://stackoverflow.com/questions/4420577/subdomain-for-ssl-on-heroku)和其他各种来源，我发现在生成证书请求时我应该使用secure.example.com 而不是example.com 作为通用名称。我对此有几个问题：

1.  我是否必须将用户从 example.com 转发到 secure.example.com（或与我的域注册商做任何其他事情）？

2.  使用 ssl 时，用户实际上会看到 secure.example.com 而不是 example.com 吗？

3.  我是否必须更改我的实际 Rails 应用程序或配置中的任何内容才能使其正常工作？

# objective-c - 获取除 .DS_Store 之外的 Documents 文件夹中的所有文件？

> ID：13437209
> 
> 赞同：0
> 
> 时间：2012-11-18T03:32:14.527
> 
> 标签：objective-c, nsarray

我正在使用此代码将我的应用程序的 Documents 文件夹中的所有文档组成一个数组...这是代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];

NSLog(@"files array %@", filePathsArray);' 
```

如何`.DS_Store`从数组中排除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:24:33.083

您不能`.DS_Store`使用该方法排除文件，除非您想执行第二步，并将它们从您的 filePathsArray 中过滤出来。如果您想一步到位，请使用`contentsOfDirectoryAtURL:includingPropertiesForKeys:options:error:`. `NSDirectoryEnumerationSkipsHiddenFiles`您可以为属性和选项传递 nil 。您还必须更改获取路径的方式，并用于`URLsForDirectory:inDomains:`获取文档目录的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:09:37.220

会`enumeratorAtURL:`为你工作吗？这是链接[http://disanji.net/iOS_Doc/#documentation/Cocoa/Conceptual/LowLevelFileMgmt/Articles/EnumADir.html](http://disanji.net/iOS_Doc/#documentation/Cocoa/Conceptual/LowLevelFileMgmt/Articles/EnumADir.html)

# jquery-ui - 使用 jquery UI 时如何获取可拖动和可放置元素的 id？

> ID：13437212
> 
> 赞同：1
> 
> 时间：2012-11-18T03:32:48.520
> 
> 标签：jquery-ui, draggable, droppable

我正在尝试使用下面的代码在我放置拖动的元素时触发 ajax 请求，但它不起作用。我认为这是因为我实际上并没有得到身份证，但我不确定。

HTML：

```
<div class="draggable">item 1</div>
<div class="draggable">item 2</div>
...

<div class="droppable">drop location 1</div>
<div class="droppable">drop location 2</div>
... 
```

jQuery：

```
$(document).ready(function() {
  $(".draggable").draggable({cursor: 'move', helper: 'clone'});

  var ID1 = $(".draggable").attr(id);
  var ID2 = $(".droppable").attr(id);

  $(".droppable").droppable({
    drop: function() { 
        $.ajax({
            type: "POST",
            url: 'www.mydomain.com/'+ID1+'/'+ID2,
            dataType: 'html',
            success: function(){}
        });
        return false;
     }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T15:53:33.270

ajon 的回答不太正确 - ID1 和 ID2 都与目标相关（拖放元素的位置），而问题要求提供已拖放元素的 id。

给定修改后的 html（根据问题，但为所有元素添加了 id）

```
<div class="draggable" id="item1">item 1</div>
<div class="draggable" id="item2">item 2</div>
...

<div class="droppable" id="drop1">drop location 1</div>
<div class="droppable" id="drop2">drop location 2</div>
... 
```

这个javascript应该可以工作：

```
$(document).ready(function() {
  $(".draggable").draggable({cursor: 'move', helper: 'clone'});

  $(".droppable").droppable({
    drop: function(event, ui) {
      var dragID = ui.draggable.attr('id');
      var dropID = event.target.id;  // or $(this).attr("id"), or this.id
      $.ajax({
        type: "POST",
        url: 'www.mydomain.com/'+dragID+'/'+dropID,
        dataType: 'html',
        success: function(){}
      });
      return false;
    }
  });
}); 
```

ps - 你也在做一个 ajax POST 但没有发布数据 - 我认为它已从问题中删除。如果您只是点击 url 并如图所示传递 2 个 id，那么直接 GET 就足够了。

```
$.get('www.mydomain.com/'+dragID+'/'+dropID, function(data) {
  ..
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-19T15:15:15.977

您尝试获取 id 的方式无效。您正在使用类选择器`.`，它将返回给定类的所有对象。在您的示例中，每个类都有 2 个以上（可拖动和可放置）。

其次，这些元素没有 ID，因此 .attr(id) 将返回 null （我认为）。

第三，您没有引号，`id`这意味着它将被解释为尚未设置的变量。

最后，要获取 id，您可以`event.target.id`在 drop 函数中使用它。

尝试以下操作：

```
<div class="draggable" id="item1">item 1</div>
<div class="draggable" id="item2">item 2</div>
...

<div class="droppable" id="drop1">drop location 1</div>
<div class="droppable" id="drop2">drop location 2</div>
... 
```

然后：

```
$(document).ready(function() {
    $(".draggable").draggable({cursor: 'move', helper: 'clone'});

    $(".droppable").droppable({
        drop: function(event, ui) {
            var ID1 = event.target.id;
            var ID2 = $(this).attr("id");
            $.ajax({
                type: "POST",
                url: 'www.mydomain.com/'+ID1+'/'+ID2,
                dataType: 'html',
                success: function(){}
            });
            return false;
        }
     });
}); 
```

# java - Java cron4j 计划文件

> ID：13437217
> 
> 赞同：2
> 
> 时间：2012-11-18T03:34:09.240
> 
> 标签：java, cron, scheduled-tasks, cron4j

我正在使用 cron4j 库来安排程序。这是我的代码：

```
public class Main {
public static void main(String[] args) {
    // Declares the file.
    File file = new File("cron4j.txt");
    // Creates the scheduler.
    Scheduler scheduler = new Scheduler();
    // Schedules the file.
    scheduler.scheduleFile(file);
    // Starts the scheduler.
    scheduler.start();
    // Stays alive for five minutes.
    try {
        Thread.sleep(5L * 60L * 1000L);
    } catch (InterruptedException e) {
        ;
    }
    // Stops the scheduler.
    scheduler.stop();
}
} 
```

在“cron4j.txt”文件中，我将程序设置为每分钟运行一次。

1.  是否必须运行带有对象调度程序的该文件（Main 类）才能使文件中的程序每分钟执行一次？
2.  或者一旦我运行一次，调度程序会将这个工作传递给操作系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T03:55:13.237

程序必须连续运行。Cron4j 只是为您隐藏了调度，但实际上是一堆线程正在休眠并等待执行的时间。操作系统只是将您的程序视为正常运行的程序。

为了使用操作系统的调度机制，您不要使用 Cron4j，而是使用 crontab（在 linux 上）或 Windows 上的任务调度程序。

一种更复杂的 Java 调度程序，更被认为是行业标准，是[Quartz Scheduler](http://quartz-scheduler.org/)。但是概念是相同的，您的程序需要运行才能使计划任务发生。

# php - 无法使用 CentOS 发行版写入特定目录

> ID：13437219
> 
> 赞同：1
> 
> 时间：2012-11-18T03:34:27.020
> 
> 标签：php, centos, mkdir

我有一个脚本可以生成图像然后将其上传到某个目录。该脚本工作正常，但是将其上传到 CentOS 服务器，它将不再工作。通过调试，我发现这是一个权限被拒绝的问题。我被迫`chmod -R 777 certain_directory`让它工作。

我不相信这一点，`www-data`当我使用 Debian 时，我无法将目录所有权设置为我习惯的。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T04:00:30.037

```
# egrep ^User /etc/httpd/conf/httpd.conf 
User apache 
```

因此，只需将文件 chown 到 apache ...

# jquery - jquery错误未定义函数

> ID：13437224
> 
> 赞同：0
> 
> 时间：2012-11-18T03:35:16.223
> 
> 标签：jquery

我从 Stack 上的代码创建了这个小提琴，但它触发了一个错误。你能帮忙吗？

我的小提琴：http: [//jsfiddle.net/422steve/DVNGc/](http://jsfiddle.net/422steve/DVNGc/)

原始分析器：[https ://stackoverflow.com/a/13000179/501173](https://stackoverflow.com/a/13000179/501173)

我得到的错误是：TypeError: $allExtended.slideUp() is not a function

js：

```
$('.holder').on('click','a',function(e){   
    e.preventDefault();
    var $allExtended = $(this).closest('.wrapperdoo').find('.extended'),
        $extended = $allExtended.eq( $(this).index() ),        
        doIt= ($extended.is(':visible')) ? $extended.slideUp() : ($allExtended.slideUp()) ($extended.slideDown());   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:42:46.190

这是正在发生的事情 - 在您的三元运算中，在最后一行，您试图调用两个函数。这是不可能的。你需要使用一个`if`块。这是我重写它的方法。我不知道您是否`doIt`出于任何目的使用该变量，但您需要检查`undefined`：

```
$('.holder').on('click','a',function(e){   
    e.preventDefault();
    var $allextended = $(this).closest('.wrapperdoo').find('.extended'),
        $extended = $allextended.eq( $(this).index() ),
        doIt = undefined;

    if ($extended.is(":visible")) {
        doIt = $extended.slideUp();            
    } else {
        $allextended.slideUp();
        doIt = $extended.slideDown();
    }  
});​ 
```

**- - 编辑 - -**

要将类添加到正在单击的 href，只需在函数中执行以下操作：

```
$(this).addClass('class'); 
```

如果您想在完成后删除课程，请这样做。首先，将 this 变量分配为全局变量（这样`this`变量就不会混淆），如下所示：

```
var sender = $(this); 
```

然后，在您的`slideUp()`or`slideDown()`函数中，第二个参数是完成时的回调：

```
$allextended.slideUp(500, function() { sender.removeClass('class'); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:37:37.790

`($allextended.slideUp()) ($extended.slideDown())`是非常错误的。
您编写的代码调用`slideUp()`，然后将 的返回值`slideUp`作为函数调用，传递`slideDown()`.

看起来您正在尝试运行两个语句；为此，您需要一个`if`块。

# java - 分布式搜索系统JAVA

> ID：13437230
> 
> 赞同：0
> 
> 时间：2012-11-18T03:35:50.387
> 
> 标签：java, file, distributed-system

我想创建一个离线分布式搜索系统（稍后我将使用`sockets`and `multithreads`）。现在，首先，我将特定目录的绝对路径（如果我放 C:\，il 将用于整个磁盘）保存到一个文件中。我应该使用什么样的文件？文本？我担心优化系统。（我的 80GB 分区的 txt 文件有 34mb）

稍后用户将使用系统搜索特定文件，我想在我之前创建的那个文件上搜索它。

如果我使用`PrintWriter`带有 println 的，以后会很难读取该文件吗？

先感谢您。（如果你不介意的话，我稍后会使用这个主题来提出一些其他问题。）

编辑：

我使用了 .txt，它与 .txt 配合得很好`PrintWriter`。

# unix - 是否有一个字符会占据终端上一行的全部高度？

> ID：13437232
> 
> 赞同：10
> 
> 时间：2012-11-18T03:36:07.953
> 
> 标签：unix, unicode, terminal

我正在制作棋盘游戏[Blokus](http://en.wikipedia.org/wiki/Blokus)的命令行版本，我想让这些棋子占据一行的全部高度。我尝试使用 Unicode 字符 █ (U+2588)，但它会在行中留下垂直间隙，如下所示：

![在此处输入图像描述](../Images/54b24600fa6ce6127363b0f1245642e9.png)

有谁知道我怎样才能让它占据整条线？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T03:43:38.247

根据定义，这些字符应该填充整个字符单元格。如果不是，则您使用的字体可能存在问题。（例如，您的默认字体可能没有该字符，因此终端必须使用具有不同指标的替代字体。）

您可以通过进入反视频模式 ( ) 并输出空格字符来“伪造”块字符，然后在完成`"\x1b[7m"`后切换回 ( ) 来解决此问题。`"\x1b[0m"`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T07:23:43.460

U+2588 应该在终端中占据一行的全高，但由于字体问题，它并不总是这样做。

块元素字符在 Unicode 字符中的第 15.8节[*几何符号*](http://www.unicode.org/versions/Unicode6.2.0/ch15.pdf#page=30)中进行了描述：“传统块元素旨在填充每个显示单元的某些已定义部分，或以某种定义的阴影程度填充每个显示单元。[...] 在模拟终端应用程序时，应设计实现块元素字符的字体，以便字符的相邻字形（例如 U+2588 全块）创建实体图案，它们之间没有间隙。”</p>

但是，[支持 U+2588 的字体](http://www.fileformat.info/info/unicode/char/2588/fontsupport.htm)并不总是正确地实现它。因此，您应该检查是否可以将字体设置为具有正确 U+2588 字形的字体，例如 DejaVu Sans。

如果您在比简单终端更复杂的环境中使用 U+2588 和朋友，例如模拟简单终端的软件，或者在文字处理器中，您可能还会遇到另一个问题。即使 U+2588 在字体中正确实现时会占用字体的全高*，*但通常不会占用行的全*高*。通常行高大于字体高度（字体大小），您需要采取额外措施使它们相同（使文本“固定”）。

# java - 使给定的 Java 类更加通用和灵活

> ID：13437233
> 
> 赞同：0
> 
> 时间：2012-11-18T03:36:18.230
> 
> 标签：java, class, wildcard, subtype

我得到了一个类，该类`Shop`维护类型项的集合`T`。它为单个或多个项目提供买卖功能，并使用 a`List<T>`作为买卖容器：

```
import java.util.*;

public class Shop<T> {
    List<T> stock;

    public Shop() { stock = new LinkedList<T>(); }
    public T buy() { 
        return stock.remove(0);
    }
    void sell(T item) {
        stock.add(item);
    }

    void buy(int n, List<T> items) {
        for (T e : stock.subList(0, n)) {
            items.add(e);
        }
        for (int i=0; i<n; ++i) stock.remove(0);
    }

    void sell(List<T> items) {
        for (T e : items) {
            stock.add(e);
        }
    }
} 
```

现在，我需要修改这个类，以便我可以购买/出售任何`Collection`类型的物品......而不仅仅是`List`. 我想我会先注释掉大部分内容并尝试一一转换，从以下开始`stock`：

```
 public class Shop<T> {
   // List<T> stock;
      Collection<T> stock;

   // public Shop() { stock = new LinkedList<T>(); }
      public Shop() { stock = new Collection<T>(); }            
      ...
      ... 
  } 
```

第一个声明有效，但尝试在构造函数中实例化接口，正如预期的那样，不起作用。但据我所知，`stock`需要是 a`Collection`以便我可以`Collection`在处理它的其他函数中使用任何子类型。而且我很确定在这种情况下我不能使用通配符作为类型参数。那么我到底能做些什么来构建`stock`这里......或者我应该如何`stock`首先声明不同的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T03:42:31.497

只要您的接口定义接受，您在类中使用的实际集合实现对类的客户/用户完全无关紧要`Collection`，即

```
void buy(int n, List<T> items)
void sell(List<T> items) 
```

应该

```
void buy(int n, Collection<T> items)
void sell(Collection<T> items) 
```

这不会限制任何人只使用`List`类型。然后，您的内部成员`stock`可以并且应该使用`Collection`.

# css - 在调整大小时将背景图像向左剪切

> ID：13437234
> 
> 赞同：0
> 
> 时间：2012-11-18T03:36:24.423
> 
> 标签：css, image

我不知道如何制作它，以便当窗口无法显示整个图像时，它会剪切左侧的图像。

[此代码](http://jsfiddle.net/H3Vqc/)始终使用以下方法切割右侧：

```
img {
      position:fixed;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:33:24.913

`right:0;`如果要在调整大小时剪切左侧，您只需要添加。检查这个小提琴： http: [//jsfiddle.net/H3Vqc/1/](http://jsfiddle.net/H3Vqc/1/)并进行测试。

**更远：**

*   如果您想在调整**浏览器**大小时调整图像大小，请使用`width: 100%`.
*   如果你想隐藏右侧集`position: absolute;`和`left:0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:44:57.503

或者你可以简单地在 div 上应用 dir="rtl" 图像在这个结果上你想要什么

```
 <div dir="rtl"><img src="yourImg.jpg"/>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T03:41:13.903

严格假设如果您使用 css 背景，您可以使用[background-position](http://www.w3schools.com/cssref/pr_background-position.asp)属性来定位图像，并使用宽度和高度将其设置为正确的大小

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-18T05:01:33.727

您可能希望设置`max-width: 100%`为`<img>`，如下所示：http: [//jsfiddle.net/H3Vqc/4/](http://jsfiddle.net/H3Vqc/4/)

# list - 麻省理工学院方案表达式附加的替代形式

> ID：13437235
> 
> 赞同：3
> 
> 时间：2012-11-18T03:36:28.687
> 
> 标签：list, filter, scheme, append, cons

我目前正试图在练习中期解决一个问题。该问题要求我编写一个表达式来附加两个列表（我们称它们为 list1 和 list2），并且 list2 必须附加到 list1 的末尾。**函数 append 在此的任何时候都不能使用。**我可能使用的是*cons*、*filter*、*accumulate*、*map、list-ref 和 inumerate-interval。*我尝试了各种形式的解决方案，例如

```
(cons list1 list2)

(filter list? (map list (cons list1 list2)))

(list list1 list2)

(map list (list list1 list2)) 
```

我花了 2 天时间试图找到一个无济于事的解决方案。如果有人能够指导我朝着正确的方向前进，甚至可以为我提供某种形式的帮助，我将不胜感激。

另外，如果我在代码格式或提问时的举止方面没有正确遵循某些协议，我深表歉意，因为我是该网站的新手。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:44:24.523

因为这是作业，我不能给你一个直接的答案。相反，我会给你一些提示，你可以在空白处找到你自己问题的答案。这是实现的标准方法`append`：

```
(define (my-append l1 l2)
  (cond (<???>                          ; if the first list is null
         <???>)                         ; then return the second list
        (<???>                          ; if the second list is null
         <???>)                         ; then return the first list
        (else                           ; otherwise `cons`
         (cons <???>                    ; the first element of the first list
               (my-append <???> l2))))) ; process the rest of the first list 
```

上述解决方案使用`cond`、`null?`、`cons`和。如果您不能使用其中任何一个并且您仅限于问题中的程序，请尝试使用此方法（假设定义为向右折叠）：`car``cdr``accumulate`

```
(define (my-append l1 l2)
  (accumulate
   <???>   ; what should be used for sticking list elements together?
   <???>   ; what should we return if the list being traversed is empty?
   <???>)) ; this is the list that we want to traverse 
```

上述解决方案仅根据问题中的要求使用`accumulate`and `cons`。这个想法是：遍历第一个列表，逐个元素地重新创建它，直到列表用尽 - 那时，下一个元素将是第二个列表。

# spring-mvc - 相当于spring mvc中的httpwebrequest

> ID：13437240
> 
> 赞同：0
> 
> 时间：2012-11-18T03:37:56.803
> 
> 标签：spring-mvc

在我的控制器中，根据用户帖子，我想调用外部提供商站点来处理一些数据并获得结果。

示例：假设我想在以下 url 调用 google map api

[http://maps.googleapis.com/maps/api/directions/output](http://maps.googleapis.com/maps/api/directions/output)？

此调用返回一个带有数据的 xml 对象，我想使用它。

这里仅以google为例，但概念相同。

我将如何在 spring mvc 控制器或业务 [服务] 层中进行调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:57:50.507

我遇到了 jersey 客户端，它允许我反对 RESTful 服务。

这是我使用的链接：

[泽西岛样品客户](http://www.mkyong.com/webservices/jax-rs/restful-java-client-with-jersey-client/)

[来自 oracle 的 Jersey 示例客户端](https://blogs.oracle.com/enterprisetechtips/entry/consuming_restful_web_services_with)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:46:40.413

我认为您可以在控制器 /Service 中打开 http 请求（服务听起来更好）

我记得在其他网络框架中使用 Apache http 客户端 (http://hc.apache.org/ )，但我会尝试 google-api-client 或 google-api-client-servlet 。

我现在正在尝试。

# ruby-on-rails - 如何从液体标签访问 Rails 控制器？

> ID：13437242
> 
> 赞同：3
> 
> 时间：2012-11-18T03:38:11.817
> 
> 标签：ruby-on-rails, liquid

我希望能够在液体模板上呈现 Rails 的 CSRF 内容。我找到了两页给我一些线索：

*   [http://robots.thoughtbot.com/post/159806314/custom-tags-in-liquid](http://robots.thoughtbot.com/post/159806314/custom-tags-in-liquid)
*   [https://github.com/locomotivecms/engine/blob/v2.0.0.rc12/lib/locomotive/liquid/tags/csrf.rb](https://github.com/locomotivecms/engine/blob/v2.0.0.rc12/lib/locomotive/liquid/tags/csrf.rb)

我的问题是thoughtbot 链接首先没有解释如何注册控制器。然后，查看 locomotivecms 源代码，我可以看到[模板注册了一个新的 context](https://github.com/locomotivecms/engine/blob/v2.0.0.rc12/app/helpers/locomotive/content_types_helper.rb#L67)，但这是在 helper 中完成的。`{% csrf_meta_tag %}`我认为这种方法不适合我，因为我希望能够只调用`.liquid`文件中的标签。

我的方法可行吗？如果我在正确的轨道上，那么我将如何始终将控制器与上下文一起注册？如果我不在正确的轨道上，我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T19:36:53.047

我有同样的问题，我找到了解决方案。使用[此代码](https://github.com/locomotivecms/engine/blob/v2.0.0.rc12/lib/locomotive/liquid/tags/csrf.rb "https://github.com/locomotivecms/engine/blob/v2.0.0.rc12/lib/locomotive/liquid/tags/csrf.rb")，您可以将这些标签添加到您的模板中：

```
{% csrf_meta %}
{% csrf_param %} 
```

[参考](http://doc.locomotivecms.com/references/tags/misc/csrf-param)

# video-streaming - 使用 Raspberry Pi 和网络摄像头进行 MJPG 流式传输

> ID：13437244
> 
> 赞同：6
> 
> 时间：2012-11-18T03:38:38.713
> 
> 标签：video-streaming, webcam, raspberry-pi

所以我需要一个使用 Raspberry pi 的网络摄像头，并按照[本](http://wolfpaulus.com/journal/embedded/raspberrypi_webcam)教程进行操作。该设备正在为测试流页面提供服务，但是应该嵌入流的所有位置都是空白的。我正在使用带有 Raspbian Wheezy 发行版的 PS3 eyetoy 相机。这是我在启动服务器时收到的日志：

```
MJPG Streamer Version: svn rev: 3:165
 i: Using V4L2 device.: /dev/video0
 i: Desired Resolution: 640 x 480
 i: Frames Per Second.: 5
 i: Format............: MJPEG
Adding control for Pan (relative)
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
Adding control for Tilt (relative)
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
Adding control for Pan Reset
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
Adding control for Tilt Reset
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
Adding control for Pan/tilt Reset
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
Adding control for Focus (absolute)
UVCIOC_CTRL_ADD - Error: Inappropriate ioctl for device
mapping control for Pan (relative)
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Tilt (relative)
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Pan Reset
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Tilt Reset
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Pan/tilt Reset
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Focus (absolute)
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for LED1 Mode
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for LED1 Frequency
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Disable video processing
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
mapping control for Raw bits per pixel
UVCIOC_CTRL_MAP - Error: Inappropriate ioctl for device
 o: www-folder-path...: ./www/
 o: HTTP TCP port.....: 8080
 o: username:password.: disabled
 o: commands..........: enabled 
```

我没有找到这个错误的任何解释，也不知道它可能指的是什么问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T12:04:27.420

ps3相机好像不支持mjpeg，但是支持YUYV格式。尝试使用 -y 标志初始化流。例如：

```
mjpg_streamer -i "/usr/lib/input_uvc.so -d /dev/video0 -y  -r 320x240 -f 15" -o "/usr/lib/output_http.so -p 8090 -w ./www" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-15T23:43:14.400

根据我的经验，您列出的错误与 Linux-UVC 驱动程序的 dynctrls 有关，与图像格式 mjpeg 或 yuyv 无关。

看起来您的相机确实支持 mjpeg 格式，但是，您当前的相机/驱动程序缺乏对列出的 dynctrls 的支持（即您的相机不具备平移/倾斜/对焦/等功能，或者 mjpeg 在尝试访问/设置列出的控件），您可以禁用 dynctrls（因此可以消除您`-n`在启动 mjpg-streamer 时使用该标志收到的错误。

像这样的东西：

```
./mjpg_streamer -i "./input_uvc.so -d /dev/video0 -n" -o "./output_http.so -p 8090" 
```

将开始在树莓派 IP 地址的 8090 端口上进行流式传输。

要访问本地网络上的流，请转到`xxx.xxx.xxx.xxx:8090/?action=stream`或插入`<img src="xxx.xxx.xxx.xxx:8090/?action=stream">`可访问的 html 页面。替换`xxx.xxx.xxx.xxx`为您的树莓派的本地 IP 地址。

要在远程位置访问流（与 pi 不在同一个本地网络上），请替换`xxx.xxx.xxx.xxx`为树莓派所在网络的外部 IP（并编辑路由器设置以将请求转发到`8090`树莓派的本地 IP端口）地址）。

# c++ - 抽象类的链表？

> ID：13437248
> 
> 赞同：2
> 
> 时间：2012-11-18T03:39:52.180
> 
> 标签：c++, linked-list, abstract-class

我觉得这应该很简单，但我花了很多时间试图弄清楚为什么我不能制作从同一个抽象类继承的不同类的链表

我推到链表前面的每个类（即BadCruisingShootingAgent）都继承自抽象类Agent。

我得到....错误：无法将字段“Node::data”声明为抽象类型“代理”

我的 main.cpp 文件内容如下：

```
int main()
{
LinkedList<Agent> *agentList= new LinkedList<Agent>();

agentList->push_front(*(new BadCruisingShootingAgent));
agentList->push_front(*(new BadFollowingDisarmedAgent));
agentList->push_front(*(new BadFollowingShootingAgent));
agentList->push_front(*(new BadStationaryDisarmedAgent));
agentList->push_front(*(new BadStationaryShootingAgent));
agentList->push_front(*(new GoodCruisingDisarmedAgent));
agentList->push_front(*(new GoodCruisingShootingAgent));
agentList->push_front(*(new GoodFollowingDisarmedAgent));
agentList->push_front(*(new GoodFollowingShootingAgent));
agentList->push_front(*(new GoodStationaryDisarmedAgent));
agentList->push_front(*(new GoodStationaryShootingAgent));

for(int i=0; i<agentList->size(); i++)
{
  cout    << agentList->at(i).getType()<<" "<<agentList->at(i).nextMovingDirection(10,10)<<" "<<agentList->at(i).shootingDirection(10,10)<<endl;
}

return(0);
} 
```

我不明白为什么这不起作用，而如果我只是手动编写就没有问题。

```
 Agent *a= new BadCruisingShootingAgent;
 cout    << a->getType()<<" "<<a->extMovingDirection(10,10)<<" "<<a->shootingDirection(10,10)<<endl; 
```

那么我的链表的类函数 push_front 定义为：

```
template <typename T>
void LinkedList<T>::push_front(const T& val)
{
    //make a new node
Node<T>* newOne = new Node<T>(val);

//push it onto the front of the list
newOne->next = this->head;
this->head = newOne;

//increase the length of the list by one
this->length++;
} 
```

我的节点类定义为：

```
template <typename T>
class Node
{
public:

    Node(const T& d);

    T data;
    Node<T>* next;
};

template <typename T>
Node<T>::Node(const T& d)
: data(d)
{
    this->next = NULL;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T04:01:19.080

您不能对不是引用或指针的类型执行多态性。因此，当您创建 a 时`LinkedList<Agent>`，底层节点正在分配 an `Agent`，因为它是抽象类型，所以无法创建。

因此， using`LinkedList<Agent*>`允许您在链表中多态地存储不同的派生类型。

# c# - 在 Word 中操作简单的书签

> ID：13437250
> 
> 赞同：0
> 
> 时间：2012-11-18T03:40:23.467
> 
> 标签：c#, image, openxml, bookmarks, wordprocessingml

有很多关于 openXml 的问题、答案和帖子，主要是 Eric White[在此处](http://ericwhite.com/blog/category/open-xml/)发布的好的、详尽的内容（以及[此处](http://openxmldeveloper.org)和其他堆栈溢出问题）。问题是这些例子有两个特点让我很难应用：首先，它们是非常端到端的，因为它们可以处理所有可能的场景（如 Eric White 的 XML 扁平化解决方案），从而使代码太复杂。其次，这些示例是更多的代码片段而不是完整的代码，而我作为 openXml 的初学者，无法弄清楚代码片段之前所需的所有“使用”和实例化。

感谢您在两个特定的简单场景中的帮助：

1.  用文本替换书签并保留样式。这个书签很简单，在一行中间，风格不变。
2.  用文件中的图像替换书签。

到目前为止，我一直在使用 Office Interop，它很重、很麻烦，并且需要打开 Word 应用程序。不太好。

# python - 使用 beautifulsoup 获取 id 名称

> ID：13437251
> 
> 赞同：5
> 
> 时间：2012-11-18T03:41:02.350
> 
> 标签：python, beautifulsoup

如果我有文字：

```
text = '<span id="foo"></span> <div id="bar"></div>' 
```

使用可以更改的文本（可能没有任何 id），我如何使用 BeautifulSoup 来获取 id 名称而不管标签名称（返回 ['foo'，'bar']）。我对 BeautifulSoup 没有那么有经验，并且对执行此任务感到困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T04:16:40.760

您需要获取带有 id 属性的标签，然后将 id 属性的值返回到字符串，例如

```
from BeautifulSoup import BeautifulSoup
text = '<span id="foo"></span> <div id="bar"></div>'
pool = BeautifulSoup(text)
result = []
for tag in pool.findAll(True,{'id':True}) :
    result.append(tag['id']) 
```

和结果

```
>>> result
[u'foo', u'bar'] 
```

# air - 当我在 Windows 上单击 Flash CS6 上的另一个选项卡时，Air for iOS 配置面板关闭

> ID：13437254
> 
> 赞同：0
> 
> 时间：2012-11-18T03:41:42.363
> 
> 标签：air, flash-cs6

每当我尝试在 Air（桌面、Android 或 iOS）中编辑配置并单击另一个选项卡时，Flash 失去焦点并且配置窗口关闭。我用谷歌搜索了任何类似的东西，但我没有找到任何东西。

有谁知道这是否是一个已知问题，或者是否有另一种方法可以在 Flash CS6 中添加图标、证书和权限。

谢谢大家！

# c++ - 在 .ico 文件中选择特定图标

> ID：13437255
> 
> 赞同：0
> 
> 时间：2012-11-18T03:41:43.080
> 
> 标签：c++, visual-studio-2010, winapi, icons

我有一个已导入到 Visual Studio 2010 项目中的 .ico 文件。在 .ico 文件中，看起来有许多不同大小的不同图像。

我正在尝试将其中一个设置为我的按钮控件的图标：

```
HICON hIcon = LoadIcon(HINST_THISCOMPONENT, MAKEINTRESOURCE(IDI_ICON2));
SendMessage(GetDlgItem(hDlg, IDC_BUTTON1), BM_SETIMAGE, IMAGE_ICON, (LPARAM)hIcon); 
```

如何选择 .ico 文件中的哪个图像/大小将显示在按钮上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:56:21.760

您可以使用该`LoadImage`功能来获得更多控制权。

`LoadImage`您可以指定所需的宽度和高度。

如果您想要更多的控制权，那么您只需要解析图标资源，我不建议这样做。

# r - 如何处理R中for循环中的缺失数据（NA）

> ID：13437257
> 
> 赞同：2
> 
> 时间：2012-11-18T03:41:53.320
> 
> 标签：r, for-loop, missing-data

我正在尝试计算观察数据和模拟数据的卡方差异，并使用贝叶斯推理评估模型拟合。观察到的数据集包含缺失（“NA”）值。但是，模拟的没有缺失值。因此，我无法比较它们之间的差异统计数据。

下面给出的代码是一个示例，与我的工作类似：

```
p <- array(runif(3000*195*6, 0, 1), c(3000, 195, 6))
N <- array(rpois(3000*195, 10), c(3000, 195))
y <- array(0, c(195, 6))
for(j in 1:195){
  for(k in 1:6){
    y[j,k] <- (rbinom(1, N[j], p[1,j,k]))
  }
}

foo <- runif(50, 1, 195)
bar <- runif(50, 1, 6)
for(i in 1:50){
  y[foo[i], bar[i]] <- NA
} 
```

该代码派生了包含一些缺失值（“NA”）的响应变量 y。然后，我计算了数据“y”和模拟的“理想”数据集“y.new”的卡方。相反， y.new 没有任何缺失值。因此，当我尝试比较 E 和 E.new 的总和时，如果我遗漏了 y 而不是 y.new 中的缺失数据，则 E.new 应该总是更大。

```
eval <- array(NA, c(3000, 195, 6))
E <- array(NA, c(3000, 195, 6))
E.new <- array(NA, c(3000, 195, 6))
y.new <- array(NA, c(195, 6))
for(i in 1:3000){
  for(j in 1:195){
    for(k in 1:6){
       eval[i,j,k] <- p[i,j,k]*N[i,j]
       E[i,j,k] <- ((y[j,k] - eval[i,j,k])^2) / (eval[i,j,k] + 0.5)
       y.new[i,j,k] <- rbinom(1, N[i,j], p[i,j,k])  # Create new "ideal" dataset
       E.new[i,j,k] <- ((y.new[i,j,k] - eval[i,j,k])^2) / (eval[i,j,k] + 0.5)
    }
  }
} # very slow! think about how to vectorize instead of nested for loops

fit <- sum(E)
fit.new <- sum(E.new) 
```

现在，我的问题是如何处理缺失值？目前，由于缺少值，上面的代码无法从 y 中减去 eval。即使可以，fit 和 fit.new 也无法比较。我的想法是在 y 中找到缺失值的位置，并从我正在使用的所有其他数组中删除那些相同的 [j,k] 值。关于如何最好地做到这一点的任何建议？

编辑：我得到了一个非常奇怪的结果。无论我是按上面还是下面（使用扫描）运行代码，E[1,,] 都比 E[>1,,] 小得多。特别奇怪的是 eval[1,,] 和 eval[>1,,] 看起来是一样的。我什至尝试复制 y[j,k] 以使其成为 y[i,j,k] ，其中每个 y[i,,] 相等，只是为了看看是否是处理不同大小的矩阵才是问题所在。有谁知道为什么会这样？理论上，有了这个模拟数据，我认为 E[i,,] 和 E.new[i,,] 的所有迭代应该有点相似。以下是一些摘要信息，以显示我在说什么。这似乎是一个新问题，但它与我原来的问题有关，我只是认为一定是 NA 导致了问题，但似乎这可能不是唯一发生的事情。

```
> summary(eval[1,,])
       V1                 V2                 V3                V4          
 Min.   : 0.01167   Min.   : 0.01476   Min.   : 0.0293   Min.   : 0.01953  
 1st Qu.: 2.60909   1st Qu.: 2.35093   1st Qu.: 2.5239   1st Qu.: 1.85789  
 Median : 4.85460   Median : 5.12719   Median : 5.2480   Median : 4.35639  
 Mean   : 5.09371   Mean   : 5.39451   Mean   : 5.3891   Mean   : 4.72061  
 3rd Qu.: 6.91273   3rd Qu.: 7.44676   3rd Qu.: 7.5431   3rd Qu.: 7.06119  
 Max.   :15.81298   Max.   :14.94309   Max.   :14.9851   Max.   :16.25751  

> summary(eval1[2,,])
       V1                 V2                 V3                V4           
 Min.   : 0.06346   Min.   : 0.06468   Min.   : 0.2092   Min.   : 0.006769  
 1st Qu.: 2.44825   1st Qu.: 1.93702   1st Qu.: 2.4226   1st Qu.: 2.426689  
 Median : 4.16865   Median : 4.01536   Median : 5.0771   Median : 4.833679  
 Mean   : 4.85646   Mean   : 4.64887   Mean   : 5.3450   Mean   : 5.169656  
 3rd Qu.: 6.64691   3rd Qu.: 6.96278   3rd Qu.: 7.7034   3rd Qu.: 7.229125  
 Max.   :13.00335   Max.   :13.79093   Max.   :17.2673   Max.   :17.915080  

> summary(E[1,,])
       V1                V2                V3                 V4          
 Min.   :0.00001   Min.   :0.00000   Min.   :0.000003   Min.   :0.000008  
 1st Qu.:0.02744   1st Qu.:0.02723   1st Qu.:0.023008   1st Qu.:0.035854  
 Median :0.11750   Median :0.11889   Median :0.109138   Median :0.146706  
 Mean   :0.39880   Mean   :0.41636   Mean   :0.353876   Mean   :0.479533  
 3rd Qu.:0.46435   3rd Qu.:0.40993   3rd Qu.:0.390625   3rd Qu.:0.604021  
 Max.   :4.43466   Max.   :4.83871   Max.   :6.254577   Max.   :5.231650  
 NA's   :10        NA's   :8         NA's   :8          NA's   :10        

> summary(E[2,,])
       V1                 V2                  V3           
 Min.   :  0.0000   Min.   :  0.00003   Min.   :  0.00002  
 1st Qu.:  0.8213   1st Qu.:  0.42091   1st Qu.:  0.36853  
 Median :  2.0454   Median :  2.31697   Median :  2.39892  
 Mean   :  8.0619   Mean   :  9.40838   Mean   :  6.38919  
 3rd Qu.:  5.6755   3rd Qu.:  6.34782   3rd Qu.:  4.89749  
 Max.   :395.9499   Max.   :172.83324   Max.   :120.93648  
 NA's   :10         NA's   :8           NA's   :8 
```

谢谢，丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:29:43.713

您可以在内部循环中添加测试并更改循环的顺序，如下所示：

```
...
for(j in 1:195){
   for(k in 1:6){
      if ( !is.na(y(j,k)) ) {
         for(i in 1:3000){
             ...
         }
      }
   }
}
... 
```

为了更有效地矢量化内部循环（如上面的评论中所述）。

例如，也可以定义一个与`y`表示已定义位置的子集具有相同维度的逻辑数组，`subset <- !is.na(y)`并使用它来代替。

# java - 调用servlet的destroy方法

> ID：13437259
> 
> 赞同：19
> 
> 时间：2012-11-18T03:41:56.860
> 
> 标签：java, jakarta-ee, servlets, destroy

根据链接[http://www.xyzws.com/Servletfaq/when-is-destroy-of-servlets-called/20](http://www.xyzws.com/Servletfaq/when-is-destroy-of-servlets-called/20)，调用destroy方法的原因之一是**当servlet没有收到请求时很久了**。

我在想可能有一些页面很长时间没有被调用。那么，这是否意味着将调用销毁并且不再使用它们？

实际上，我在采访中被问到这个问题，他告诉我只有在服务器关闭时才会调用destroy方法。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T05:39:23.003

AFAIK，

在 java servlet 中，`destroy()`不应该由程序员调用。但是，如果它被调用，它就会被执行。隐含的问题是，servlet 会被破坏吗？不，它不会。`destroy()`方法不应该也不会破坏 java servlet。

在 java servlet 中的含义`destroy()`是，内容在容器决定销毁 servlet 之前执行。但是，如果您`destroy()`自己调用该方法，则内容只会被执行，然后相应的过程会继续。对于这个问题，`destroy()`执行，然后完成 servlet 初始化。

`destroy()`首先调用方法，然后从容器中删除 Servlet，最后进行垃圾回收。`destroy()`方法通常包含释放任何资源的代码，例如不会被垃圾收集的 JDBC 连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-19T12:48:25.183

几个案例：

1.  当容器关闭或应用程序关闭时；
2.  当容器判断内存不足时；
3.  当这个 servlet 很长时间没有收到请求时。

根据文档

> 由 servlet 容器调用以向 servlet 指示 servlet 正在停止服务。只有在 servlet 的服务方法中的所有线程都退出或经过超时时间之后，才会调用此方法。servlet容器调用该方法后，不会再在该servlet上调用service方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T03:57:03.490

从规范（`The Servlet Interface -> Servlet Life Cycle -> End of Service`）：

> 一旦对 servlet 实例调用了 destroy 方法，容器就不能将其他请求路由到该 servlet 实例。如果容器需要再次启用 servlet，它必须使用 servlet 类的新实例。

该规范指的是正在销毁的 servlet 的特定实例。

> 那么，这是否意味着将调用销毁并且不再使用它们？

这并不意味着实例被销毁的 servlet 永远不会被使用。只有那个特定的实例没有被使用，因为它会被垃圾收集。当该 servlet 收到请求时，容器将创建该 servlet 的新实例并执行所有生命周期操作，直到再次为请求提供服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-27T05:37:40.210

从 Servlet 规范：-

> servlet 容器调用destroy() 方法以向servlet 指示该servlet 正在停止服务。只有在 servlet 的服务方法中的所有线程都退出或经过超时时间之后，才会调用此方法。**servlet容器调用destroy()方法后，不会再在“THIS SERVLET”上调用service方法。**

servlet 容器不需要在任何特定时间段内保持加载 servlet。servlet 实例可以在 servlet 容器中保持活动状态，时间为毫秒，在 servlet 容器的生命周期内（可能是几天、几个月或几年），或者介于两者之间的任何时间。

当 servlet 容器确定应该从服务中删除一个 servlet 时，它会调用 Servlet 接口的 destroy 方法以允许 servlet 释放它正在使用的任何资源并保存任何持久状态。例如，当容器想要节省内存资源或正在关闭时，它可能会这样做。

在servlet容器调用destroy方法之前，它必须允许servlet的service方法中当前正在运行的任何线程完成执行，或者超过服务器定义的时间限制。

**一旦对 servlet 实例调用了 destroy 方法，容器就不能将其他请求路由到该 servlet 实例。**

# **如果容器需要再次启用 servlet，它必须使用 servlet 类的新实例。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T04:14:24.223

这完全取决于您使用的 servlet 容器的实现。如果你的 servlet 容器对于节省资源非常保守，它可能会破坏长时间不服务的 servlet。

在 servlet spec 2.5 的第 22 页中，您会发现，“当 servlet 容器确定应该从服务中删除一个 servlet 时，它会调用 Servlet 接口的 destroy 方法以允许 servlet 释放它正在使用的任何资源并保存任何持久状态。例如，当容器想要节省内存资源或正在关闭时，它可能会这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-16T15:43:16.450

[Servlet.destroy()](http://docs.oracle.com/javaee/7/api/javax/servlet/Servlet.html#destroy%28%29)的 javadoc 说：“由 servlet 容器调用以向 servlet 指示 servlet 正在停止服务”。它没有指定什么情况会导致 servlet “停止服务”，它只是一个事件，您可以在需要时对其做出反应。例如，您可能想要关闭一些已打开的资源，或将某些状态保存到存储中。

最明显的原因是 servlet 容器正在关闭，但容器同样可以决定是时候卸载 servlet，因为它在一个月内没有使用，只是在消耗资源。这种行为完全取决于实现，而不是您（作为 servlet 设计者）应该关心的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-18T03:52:36.680

这是那些经典的规范与实现的事情之一。规范允许像 Tomcat 这样的 Servlet 容器维护一个 Servlet 对象池，在负载上升或下降时创建和销毁它们。在这种设置中，当不再需要特定实例时会调用destroy。为每个请求创建一个新实例甚至在处理请求之前立即调用 init 并在之后立即销毁也是合法的。

然而实际上，实际上每个 Servlet 容器都只维护每个 Servlet 的一个实例。由于要求 Servlet 是线程安全的，所以这也完全没问题。在这种情况下，只有在上下文关闭时才会调用destroy。

我想不出你想要汇集 Servlet 的许多情况，但规范允许这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-31T12:41:44.323

Servlet 的destroy 方法是一个回调。这些是容器在特定事件即将发生时调用的函数（在这种情况下，servlet 即将被销毁）。因此，整个目的是如果您想做某事（例如：清理资源），您可以在此回调下执行这些操作。

# ruby-on-rails-3 - 这会返回我想要的记录，但不是我期望的大小/计数/长度？

> ID：13437274
> 
> 赞同：0
> 
> 时间：2012-11-18T03:43:30.617
> 
> 标签：ruby-on-rails-3, activerecord, scope, arel

我的模型有以下范围。我创建它是为了获得一个父对象列表，这些父对象的子对象与 some_id_on_child 值 123 匹配。这似乎返回了正确的记录。

```
scope :light, joins(:children).where(children: { some_id_on_child: 123 }).group('parents.id') 
```

但是，当我询问计数/长度/大小而不是返回上面返回的记录数时，它会返回与每个父项匹配的子项数。

```
Parent.light.size 
```

我最终得到了这种输出..

```
...
12984 => 5
12398 => 5
12398 => 6
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:57:36.883

当您添加时，该`group`位是导致结果的原因`count`。Rails 正在做一些魔术并转换`size`为`count`。如果您不介意返回所有结果，您可以追加`.all.size`并且应该这样做。或删除`group`位并添加`.distinct('parent_id').count`.

# prolog - prolog 从通配符和数字列表中获取数字列表

> ID：13437276
> 
> 赞同：0
> 
> 时间：2012-11-18T03:43:53.833
> 
> 标签：prolog

我想知道是否可以在 prolog 中执行以下操作

```
L = [1,2,3,4,5,_,_,7]. 
```

我想做类似的事情

```
getElements(L, R) 
```

返回 R = [1,2,3,4,5,7]

并忽略列表中的通配符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:32:35.483

如果你的 Prolog 有[library(apply)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29)，你可以写

```
getElements(L, R) :- 
   include(nonvar, L, R). 
```

或者，更紧凑一点

```
getElements(L, R) :- 
   exclude(var, L, R). 
```

否则，这应该是一个有效的谓词：

```
getElements([], []).
getElements([H|T], [H|R]) :-
  nonvar(H), !,
  getElements(T, R).
getElements([_|T], R) :-
  getElements(T, R). 
```

**@false 突出显示的编辑，后者 getElements/2 是错误的，因为与最后一个子句中的匿名变量匹配**。**这里更正**

 **```
getElements([], []).
getElements([H|T], R) :-
  var(H), !,
  getElements(T, R).
getElements([H|T], [H|R]) :-
  getElements(T, R). 
```**

# python - 使用 NetworkX 和 Matplotlib 动画网络增长

> ID：13437284
> 
> 赞同：16
> 
> 时间：2012-11-18T03:45:01.477
> 
> 标签：python, animation, matplotlib, networkx

我想制作一个随时间增长的图表。

这是我到目前为止所拥有的：

```
fig = plt.figure()
ims = []
graph = nx.Graph()
for i in range(50):
    // Code to modify Graph
    nx.draw(graph, pos=nx.get_node_attributes(graph,'Position'))
    im = plt.draw()
    self.ims.append([im])
ani = animation.ArtistAnimation(fig, ims, interval=50, blit=True,repeat_delay=1000)
ani.save('dynamic_images.mp4')
plt.show() 
```

但是，我收到以下错误消息：

```
 File "main.py", line 204, in <module>
    repeat_delay=1000)
  File "/usr/lib/pymodules/python2.7/matplotlib/animation.py", line 356, in __init__
    TimedAnimation.__init__(self, fig, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/animation.py", line 304, in __init__
    Animation.__init__(self, fig, event_source=event_source, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/animation.py", line 53, in __init__
    self._init_draw()
  File "/usr/lib/pymodules/python2.7/matplotlib/animation.py", line 363, in _init_draw
    artist.set_visible(False)
AttributeError: 'NoneType' object has no attribute 'set_visible'
nicomoto@nicomoto-VirtualBox:~/Desktop/CS8903-SpecialProblem/Code/ 
```

我想要的是一个动画，你可以在其中看到图形的增长。我可以在每个阶段保存图形，并且可能能够在 matplotlib 之外创建动画，但是有没有办法让它像这样工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T11:39:55.113

布雷特兰斯的改进版。希望它会有所帮助。它将显示**动画**，但不会**显示图片**。

还是不知道 [Animate drawing networkx edges](https://stackoverflow.com/questions/13223191/animate-drawing-networkx-edges)的题主怎么 利用matplotlib的animation

```
#!/usr/bin/env python
import random
import pylab
from matplotlib.pyplot import pause
import networkx as nx
pylab.ion()

graph = nx.Graph()
node_number = 0
graph.add_node(node_number, Position=(random.randrange(0, 100), random.randrange(0, 100)))

def get_fig():
    global node_number
    node_number += 1
    graph.add_node(node_number, Position=(random.randrange(0, 100), random.randrange(0, 100)))
    graph.add_edge(node_number, random.choice(graph.nodes()))
    nx.draw(graph, pos=nx.get_node_attributes(graph,'Position'))

num_plots = 50;
pylab.show()

for i in range(num_plots):

    get_fig()
    pylab.draw()
    pause(2) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-26T19:08:28.167

经过审查，该代码与我想象的这个问题的相关性并不高。但是，我能够使用[这个 SO 答案](https://stackoverflow.com/questions/6686550/how-to-animate-a-time-ordered-sequence-of-matplotlib-plots)和[这个 SO 答案](https://stackoverflow.com/questions/12822762/pylab-ion-in-python-2-matplotlib-1-1-1-and-updating-of-the-plot-while-the-pro)为你拼凑一个答案。下面的代码将创建一个图形，向其中添加 50 个随机节点和 50 个随机边，并在添加每个节点和边后显示图形的图像。代码中的一些关键更改：

1.  此代码基于 using `pylab.ion()`（有关更多信息，请参见[此处](http://www.scipy.org/Cookbook/Matplotlib/Animations)）。
2.  您的代码尝试使用一个图形并更改其中的图像。此代码为每一帧创建一个新图形。
3.  此代码不会写入 .mp4。如果你真的需要这样做，我建议在渲染它们时将这些数字写入 .png 文件，并在事后转换为 mp4。
4.  请注意，此代码使用`matplotlib.pyplot.pause()`而不是`time.sleep()`. 如果您使用`time.sleep()`.

祝你好运！

```
import random
import pylab
from matplotlib.pyplot import pause
import networkx as nx
pylab.ion()

graph = nx.Graph()
node_number = 0
graph.add_node(node_number, Position=(random.randrange(0, 100), random.randrange(0, 100)))

def get_fig():
    global node_number
    node_number += 1
    graph.add_node(node_number, Position=(random.randrange(0, 100), random.randrange(0, 100)))
    graph.add_edge(node_number, random.choice(graph.nodes()))
    fig = pylab.figure()
    nx.draw(graph, pos=nx.get_node_attributes(graph,'Position'))
    return fig

num_plots = 50;
pylab.show()

for i in range(num_plots):

    fig = get_fig()
    fig.canvas.draw()
    pylab.draw()
    pause(2)
    pylab.close(fig) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-05-29T21:59:15.027

由于现有的答案已经很老了，这里有一个版本的代码在当前版本的 matplotlib 和 networkx 下的样子。

```
import random
import networkx as nx
import matplotlib.pyplot as plt

graph = nx.Graph()
num_plots = 50
for node_number in range(num_plots):
    graph.add_node(node_number, Position=(random.randrange(0, 100), random.randrange(0, 100)))
    graph.add_edge(node_number, random.choice(list(graph.nodes())))
    nx.draw(graph, pos=nx.get_node_attributes(graph,'Position'))
    plt.pause(0.5) 
```

# pthreads - 从不同的线程销毁线程属性

> ID：13437285
> 
> 赞同：-1
> 
> 时间：2012-11-18T03:45:22.723
> 
> 标签：pthreads

我的问题是是否可以删除具有不同线程的线程的属性。就像在一个线程的函数中使用 pthread_attr_destroy() 方法来销毁另一个线程的属性，然后将其删除。

PS提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:53:46.210

你有某种误解。该`pthread_attr_destroy`函数销毁属性对象本身 ( `pthread_attr_t`)，而不是线程的属性。属性对象用于在创建线程时指定线程的属性，但是一旦线程具有某些属性，这些属性就是线程的属性，而不是属性对象。

# c# - 需要 Windows 上 Mono 3.0 的配置文件

> ID：13437286
> 
> 赞同：1
> 
> 时间：2012-11-18T03:45:24.997
> 
> 标签：c#, visual-studio-2010, mono

是否有教程告诉如何为 mono 3.0 编写配置文件，以便我可以将它与 Microsoft Visual Studio 2010 一起使用？相同的原因是我的应用程序使用了绑定列表，当我尝试在 Mono 中运行时，出现此错误： **** (WindowsFormsApplication2.exe:608): WARNING **: The class System.ComponentModel.BindingList `1 无法加载，在系统中使用，版本=4.0.0.0，**

或者如果个人资料已经写好了，你能分享一下吗

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T17:42:16.187

我在基于[此](http://greghurlman.com/2010/10/23/visual-studio-2010-client-profile-for-mono-2-8/)的 Windows 8 64 位机器上为 VS 2012 的 Mono 3.0.1 Beta 创建了自己的 4.5 Profile 。

1.  创建一个名为*Mono的文件夹*
2.  在此文件夹中，创建另一个名为*RedistList的文件夹*
3.  将*C:\Program Files (x86)\Mono-3.0.1\lib\mono\4.5*复制到文件夹*Mono*
4.  在*RedistList*文件夹中，创建一个名为*FrameworkList.xml的文件*
5.  将以下内容粘贴到文件*FrameworkList.xml*中：

```
 <?xml version="1.0" encoding="utf-8"?>
    <FileList Redist="Mono_3.0.1" Name="Mono 3.0.1 Profile" RuntimeVersion="4.5" ToolsVersion="4.5"></FileList> 
```

6.  导航到*C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\ .NETFramework\v4.5*并创建一个名为*Profile的文件夹*
7.  将您的文件夹*Mono*复制到文件夹*Profile*
8.  将以下内容添加到注册表以停止 Visual Studio 要求安装此配置文件：

    ```
    HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework\v4.0.30319\SKUs\.NETFramework,Version=v4.5,Profile=Mono 
    ```

现在您应该能够选择并针对此配置文件进行编译。此步骤在 32 位机器上可能略有不同（请参阅顶部的链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:37:50.217

您应该使用 MONO_LOG_LEVEL 和 MONO_LOG_MASK 环境变量（特别是考虑对后者使用“asm”值）。一切都在这里解释：[http ://www.mono-project.com/Logging_Runtime_Events](http://www.mono-project.com/Logging_Runtime_Events)

这将使您对正在发生的事情有足够的了解。

附带说明一下，为什么在 Windows 中需要 Mono？除非您正在做非常高级的事情（例如嵌入单声道），否则我建议您仅在类 Unix 操作系统（如 Mac 或 Linux）中使用 Mono，这是它的亮点。Windows 中的 Mono 质量低于标准，因为在 Windows 中，无论如何您都拥有来自 Microsoft 的 .NET 运行时。

# google-chrome - 通过单击其他浏览器中的链接打开 Chrome 设置选项卡

> ID：13437290
> 
> 赞同：4
> 
> 时间：2012-11-18T03:46:23.720
> 
> 标签：google-chrome, settings

我目前正在为需要 Google Chrome 的应用程序编写安装指南。我正在用 HTML 编写安装指南，一旦他们安装了 Google Chrome，我希望能够从他们当前使用的任何浏览器启动 Google Chrome 设置选项卡。

我已经尝试过从锚标签（这显然不起作用）中进行操作，例如：

```
<a href="chrome://chrome/settings/">Open Chrome Settings</a> 
```

有谁知道是否可以做这样的事情，或者我应该告诉他们从开始菜单打开 Chrome 并点击扳手/列表/无论他们现在的设置图标是什么？

# scheme - 将值转换为列表

> ID：13437291
> 
> 赞同：1
> 
> 时间：2012-11-18T03:46:37.900
> 
> 标签：scheme

我想根据序列 binary-e 制作一个#t/#f 语句列表。如果二进制 e 中的值为 0，则放入 lst 中的值应该是#t，或者如果它是 1，它应该是#f。n 参数是 lst 应该是多长时间。但是它总是返回一个空列表。这是我的代码：

```
(define (mysequence n)                  
      (define binary-e (list 0 0 1 1 0 0 1 0 0 0 1 0 1 1 1 0 0 0 1 1 0 1 1 1 0 0 1 1 0 0 0 1 0 0 1 1 1 0 0 0 0 0 1 1 0 0 1 0 0 0 1 1 1 0 0 0 0 0 1 1 0 0 0 1 0 0 1 1 1 0 0 0 0 0 1 1 0 0 1 0 0 0 1 1 1 0 0 0 0 0 1 1 0 1 0 0 0 0 1 1))

         (define (makelist lst k)
            (cond((= k (- n 1)) lst)        
                ((= 0 (list-ref binary-e k)) (begin (cons #t lst) (makelist lst (+ k 1)) ))           
                ((= 1 (list-ref binary-e k)) (begin (cons #f lst) (makelist lst (+ k 1))))

            )   
         )

      (makelist '() 0)      
) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T04:12:25.620

您可以使用以下方法轻松解决此问题`map`：

```
(map (lambda (e)
       (if (= e 0) #t #f))
     binary-e) 
```

甚至更短：

```
(map zero? binary-e) 
```

但是，如果您需要从头开始编写解决方案，恐怕问题中的代码离正确答案还很远。我会给你一些指示，并告诉你解决方案的正确结构，这样你就可以自己找到答案（因为这看起来很像家庭作业），但你必须完全重新考虑你的答案。对于初学者，您不需要传递列表的大小：

```
(define (mysequence lst)
  (cond ((<???> lst)                  ; if the list is empty
         <???>)                       ; then return the empty list
        ((= <???> <???>)              ; if the first element in the list is 0
         (cons <???>                  ; then `cons` #t
               (mysequence <???>)))   ; and process the rest of the list
        ((= <???> <???>)              ; if the first element in the list is 1
         (cons <???>                  ; then `cons` #f
               (mysequence <???>))))) ; and process the rest of the list 
```

甚至更短：

```
(define (mysequence lst)
  (if (<???> lst)            ; if the list is empty
      <???>                  ; then return the empty list
      (cons                  ; else `cons`
       <???>                 ; if the first element in list is zero #t else #f
       (mysequence <???>)))) ; process the rest of the list 
```

不管怎样，这样称呼它：

```
(define binary-e <???>) ; define the list outside the procedure
(mysequence binary-e)   ; and pass it along as a parameter 
```

当前您问题中的代码看起来像是为程序语言编写的-特别是`list-ref`对于此类问题的使用不太正确。你必须停止思考 C/C++/C#/Java 或任何你常用的编程语言，并开始以 Scheme 方式思考——这有利于更函数式的编程。

# php - MySQL查询从每个用户返回行

> ID：13437295
> 
> 赞同：3
> 
> 时间：2012-11-18T03:47:25.650
> 
> 标签：php, mysql

我有一个简单的搜索脚本来搜索应该返回与属于该用户的搜索查询匹配的所有数据行的数据库，但是我的查询（如下）正在返回每个用户的行。知道如何解决这个问题吗？

```
SELECT * FROM tablename 
WHERE title LIKE '%" . $q . "%' 
OR text LIKE '%" . $q . "%' 
AND user='$user' 
```

**旁注**：这是在 PHP 中执行的，因此`$q`是保存查询的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:50:22.553

你试过这个吗？

```
"SELECT * FROM tablename WHERE (title LIKE '%".$q."%' OR text LIKE '%".$q."%') AND user='$user'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T03:50:30.663

在尝试 SQL 查询之前清除任何空白的 $user 变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T03:55:58.623

试试这个：

```
<?php 
...
echo "SELECT * FROM tablename 
WHERE title LIKE '%" . $q . "%' 
OR text LIKE '%" . $q . "%' 
AND user='$user'"; 
```

看看输出是什么样子的。

顺便说一句，你可能会逃脱

```
WHERE title LIKE '%$q%' 
```

（即，不必连接查询字符串）。这将使您的代码更简洁并减少错误（由于缺少句点/引号）。

# java - 我应该为此应用程序使用哪个布局管理器？

> ID：13437296
> 
> 赞同：1
> 
> 时间：2012-11-18T03:47:41.403
> 
> 标签：java, swing, layout, layout-manager

我正在尝试设计这个奖学金申请，但我一直在弄清楚要使用哪个布局管理器。到目前为止，我只使用过 BorderLayout，所以我对这个游戏有点陌生。

附件是屏幕截图，我的方法应该是什么？特定布局管理器的 JPanel 内的所有条目？

另外，我怎么会有'奖学金名称'，那个绿色矩形背景内的截止日期

[![我的屏幕截图](../Images/4175269875042f1aba93d93234a42293.png)](https://i.stack.imgur.com/9btG3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T03:50:24.107

您不应该只使用*一个*布局管理器，而应该嵌套容器，每个容器都使用自己的布局。例如，JTabbedPane 持有的 JPanel 可以使用 BorderLayout，并且在其 NORTH 位置，持有使用 BoxLayout 的 JPanel。在使用 JPanel 的中心位置的主要 BorderLayout 中，您可以拥有一个 JScrollPane，其中包含一个使用自定义单元格渲染器的 JTable...

# java - 如何将消息分成多个（消息）以通过 udp 连接发送（android）

> ID：13437299
> 
> 赞同：1
> 
> 时间：2012-11-18T03:48:11.757
> 
> 标签：java, android

我想知道如何将一条消息分成 15 个字符的多条消息并通过 udp 连接发送。我怎样才能让要发送的第一条消息是数据包的数量（要发送的消息）我现在只能发送一个数据包

```
public class MainTalker extends Activity 
{
    private static DatagramSocket socket;
    private static DatagramPacket packet;
    private static Thread send;
    private Button cl1;
    private static EditText ed1;
    private static String msg = "Message";
    private static byte[] data = new byte[15];
    private static String TAG = "Sender UDP";
    static int count=0;
    static String[] output = new String[100] ;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_talker);

        ed1 = (EditText) findViewById(R.id.msg);
        cl1 = (Button) findViewById(R.id.send);

        try {
            socket = new DatagramSocket(11001);
            Toast toast = Toast.makeText(getApplicationContext(),"Port Opened",Toast.LENGTH_SHORT);
            toast.show();
            System.out.println("Port Opened ");
            socket.setBroadcast(true);
        } catch (Exception e) {
            System.out.println("Exception: Port not opened");
            e.printStackTrace();
            Log.e(TAG, e.getMessage());
        }

        cl1.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                System.out.println("Button Clicked ");

                send = new sendthr();
                send.start();
            }
        });
    }

    private static class sendthr extends Thread {
        public void run()
        {
                System.out.println("Thread Started");

                String messg = ed1.getText().toString();

                for(int i=0; i<messg.length(); i+=10)
                {
                    output[i] = messg.substring(i,i+10);
                    System.out.println(output[i]);
                    count++;

                if (messg == null)
                    output[i] = msg;
                data = output[i].getBytes();
                try
                { //Create packet with target host and target port
                    packet = new DatagramPacket(data,data.length,InetAddress.getByName("192.168.8.17"), 11001);
                    System.out.println("Packet Created");

                } catch (UnknownHostException e) {
                    System.out.println("Exception: Packet Created");

                    e.printStackTrace();
                    Log.e(TAG, e.getMessage());
                }

                try
                {
                    System.out.println("Sending the packet  "+ msg);
                    socket.send(packet);
                    System.out.println("Packet sent");
                } catch (IOException e) {
                    System.out.println("Exception: Packet Send");
                    e.printStackTrace();
                    Log.e(TAG, e.getMessage());
                }
                }
            }     
    }
} 
```

# c# - 使用 ConnectToFacebook() 在字典中找不到给定的键；在 C# 上

> ID：13437300
> 
> 赞同：0
> 
> 时间：2012-11-18T03:48:17.380
> 
> 标签：c#, facebook

我正在尝试使用以下代码连接到 facebook：

```
 FacebookService MiFB = new FacebookService();
    string MyAppId = "xxxxxxxxx"
    private void button1_Click(object sender, EventArgs e)
    {
        MiFB.ApplicationKey = MyAppId;
        MiFB.ConnectToFacebook();
    } 
```

甚至我在 MiFB.ConnectToFacebook() 上得到“在字典中找不到给定的密钥”；

拜托，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T04:51:37.990

我的猜测是，当用作 OAuth/API 帮助程序的库解析 JSON 或 URL 结果，然后将其转换为字典（即`Dictionary<string, string>`），并在不验证它存在的情况下查询特定值时，会发生此错误，并且没有处理错误。

在图书馆内，它可能会：

```
var the_Values_In_The_Form_Of_A_Dictionnary = Url.SomeParseUrlMethod(result);
var access_token = the_Values_In_The_Form_Of_A_Dictionnary["access_token"]; 
```

似乎有几个库使用了这条路径：DotNetOpenAuth、FlickrNet。以及 OP 使用的那个。将 t 处理程序服务器错误视为真正的 .Net 错误令人沮丧。从良好的服务器结果中抛出未处理的错误是一个奇怪的决定，或者我错过了关于这些库的要点。

# git - 停止在 git 提交中显示某个文件

> ID：13437301
> 
> 赞同：1
> 
> 时间：2012-11-18T03:48:22.730
> 
> 标签：git

在我的一个存储库中，我不小心没有将某个安全相关文件添加到我的 gitignore 中进行几次提交，因此如果我将其推送到 github，如果您查看旧提交，则会显示包含敏感信息的旧文件.

有没有办法从以前的提交中删除这个文件，所以它不能被看到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T03:57:04.690

您需要使用[filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)命令。[Github](https://help.github.com/articles/remove-sensitive-data)有一篇关于如何使用 filter-branch 删除敏感数据的文章。

# perl - 文件不存在：favicon.ico

> ID：13437312
> 
> 赞同：-1
> 
> 时间：2012-11-18T03:51:31.350
> 
> 标签：perl, apache, apache2

两周前我可以完美地运行我的 perl 文件，但今天我重新运行它，error_log 文件显示了这个：

```
[Sat Nov 17 19:33:04 2012] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/xxx/xxx/apache2/htdocs/favicon.ico
[Sat Nov 17 19:33:05 2012] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/xxx/xxx/apache2/htdocs/favicon.ico
[Sat Nov 17 19:33:06 2012] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/xxx/xxx/apache2/htdocs/favicon.ico
[Sat Nov 17 19:33:06 2012] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/xxx/xxx/apache2/htdocs/favicon.ico
.
.
. 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:56:17.827

你有没有检查文件是否在那里？apache可以读取吗？

您可以将路径更改为[http://domain.com/favicon.ico](http://domain.com/favicon.ico)并对其进行测试，看看它是否有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:59:58.893

我假设这是一个 CGI 脚本或类似的东西。favicon.ico 是访问该站点时在浏览器的 urlbar 中显示的图标。它将被请求，但如果没有找到则根本不显示，因为 favicon.ico 是可选的。该错误表明浏览器正在尝试获取图标但没有找到它，这不是问题，如果您之前没有得到它可能只是意味着您正在从不同的浏览器访问。

当然，如果这不是您通过浏览器访问的 CGI 脚本，那么这不适用，您确实需要提供代码片段。

# perl - 登录到需要另一个网站的网站

> ID：13437317
> 
> 赞同：2
> 
> 时间：2012-11-18T03:52:59.990
> 
> 标签：perl, login-script, www-mechanize

我一直在使用 WWW::Mechanize perl 模块尝试登录需要 Steam 身份验证的网站。到目前为止，我已经能够成功地将它带到登录页面，但是一旦我提交了我的表单，它似乎根本不起作用。提交表单后，页面内容不会改变，就好像我登录失败一样，它要我再试一次。我已经搜索了几个小时，并且尝试了许多设置表单框和提交文本的不同组合，但没有任何效果。出于某种原因，我几乎没有发现有关检查 Mechanize 是否可以查看登录是否有效的信息。也许我的搜索条件不好。

这是我到目前为止得到的代码。这应该做的是转到 tf2wh 的登录表单，该表单重定向到 Steam 登录页面，填写用户/密码，单击按钮，然后返回 tf2wh，登录会话保存在 cookie 中。但是，唯一有效的部分是初始登录重定向。

```
#!/usr/bin/perl
use strict;
use warnings;
use WWW::Mechanize;

my $user = "my_username";
my $pass = "my_password";
my $uri = 'http://www.tf2wh.com/?login';
my $cookies = 'cookies.txt';
my $agent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)';

my $mechanize = WWW::Mechanize->new(
    agent => $agent,
    cookie_jar => {},
    autosave => 1,
    ignore_discard => 1);

$mechanize->add_header(
    "Connection" => "keep-alive",
    "Keep-Alive" => "115");

$mechanize->get( $uri );

$mechanize->success or die "Could not fetch login page.\n";

#One of many different forms I've tried
$mechanize->form_name('login');
$mechanize->set_visible($user, $pass);
$mechanize->click();
$mechanize->follow_link();

$mechanize->success or die 'Could not login.';

print "Logged in successfully! Trying to look at TF2WH now.\n";

#Test to see if we get the "You need to login" message
$mechanize->get('http://www.tf2wh.com/item.php?id=6011;6;78e2c5962db56a60f7c143a12875f3b6');

print "Fetched\n";

if($mechanize->text() =~ m{Handy Hint:})
{
    print "Failed to login.\n";
}
else
{
    print "Up and running!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:19:13.123

您可能需要传播一些蒸汽头。

单点登录解决方案都充满了怪癖。

您可能会很幸运地在 Steam 上找到描述如何在“您的游戏”中使用他们的 authn/authz 系统的开发人员指南。

如果您不走运，他们会将其全部捆绑到二进制对象中。如果你幸运的话，他们会告诉你究竟是什么以及如何传播登录信息。

# java - Swing Timer Tick 不稳定，不规则

> ID：13437325
> 
> 赞同：1
> 
> 时间：2012-11-18T03:55:09.033
> 
> 标签：java, swing, timer, delay

我对 Java 比较陌生，但一般不会编程。我在 Windows Vista 上使用 Java 1.7.0_07。我试图弄清楚如何`Timer`定期使 Swing 滴答作响。

我注意到，即使我设置了计时器延迟，并且在我的`actionPerformed`事件处理程序中除了一个`repaint()`方法之外什么都没有，计时器滴答声也不稳定甚至不准确。

我一直在寻找解决方案一段时间，并查看了 John B Matthews 博士相当简洁的[动力学模型示例](https://sites.google.com/site/drjohnbmatthews/kineticmodel)。在他的示例中，默认延迟为 40mS，但计时器实际上以 47mS +/- 1mS 计时（偶尔会出现从 32mS 到 63mS 的变化）。在他的`actionPerformed`事件处理程序中花费的时间总是 0mS。这些结果来自于将他的代码作为应用程序运行。

如果您仔细观察“原子”的移动，则口吃很明显。我不明白是什么导致计时器以这种方式运行。我的计算机上运行了最少的 Windows 任务，但问题仍然存在。

是否有解决此问题的方法，或者这只是 Java 的一个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:39:55.433

我没有看源代码，也没有做彻底的调查。但我最好的猜测是这是“一个功能”。

`javax.swing.Timer`保证您`actionPerformed`在 EDT 上调用该方法。因此，每当`Timer`达到其间隔时，它可能会`Runnable`在 EDT 上安排 a ，而后者又会调用该`actionPerformed`方法。但是，如果 EDT 在那个确切时刻很忙（例如重新绘制），它就不能执行那个`Runnable`.

所以一个小的延迟是不可避免的......

刚刚检查了源代码，似乎我最初的猜测是正确的

```
void post() {
     if (notify.compareAndSet(false, true) || !coalesce) {
         AccessController.doPrivileged(new PrivilegedAction<Void>() {
             public Void run() {
                 SwingUtilities.invokeLater(doPostEvent);
                 return null;
            }
        }, getAccessControlContext());
    }
} 
```

它使用 an`invokeLater`来安排`Runnable`（很可能是这样您就不会像 an 那样累积延迟`invokeAndWait`）。但这意味着在计时器发布事件和`actionPerformed`实际触发方法之间，EDT 必须完成他之前的任务。而且由于没有机制可以说：“嘿 EDT，停止你现在正在做的事情，先执行我的工作”，因此没有机制可以避免延迟。

也许您可以通过编写自己的`Timer`使用`SecondaryLoop`（在 JDK7 中可用）来获得更好的结果。但这是一个疯狂的猜测（我什么都没试过）

# python - 如何在 matplotlib 中插入不重叠的文本？

> ID：13437327
> 
> 赞同：13
> 
> 时间：2012-11-18T03:55:25.133
> 
> 标签：python, matplotlib

我正在尝试将潮流结果插入使用 matplotlib 创建的网络图中。一些公共汽车是如此接近，以至于将名称与功率流结果一起标记被证明是一件令人头疼的事情，因为文本重叠使某些部分无法阅读。

有没有办法使用文本的边界框来确定文本是否与绘图线和/或其他文本重叠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-21T21:44:17.030

这不是这个问题的简单答案，因为它是[自动标签放置问题](https://en.wikipedia.org/wiki/Automatic_label_placement)的一个例子，它是 NP 难的（即没有保证解决这个问题的快速算法方法）。甚至 Google 和 OpenStreetMaps 都没有完善的解决方案！

潜在的解决方案可以包括隐藏不太重要的元素的连接或标签，渲染一系列图像，每个图像都包含标签/连接的子集，以及以不同的缩放级别渲染图像。[关于可视化股票市场结构](http://scikit-learn.org/stable/auto_examples/applications/plot_stock_market.html)的 Sklearn 教程有一个很好的例子，用于标签放置的一些简单启发式方法。

您可能还想探索 GIS 堆栈交换，[因为那里已经提出了类似的问题](https://gis.stackexchange.com/questions/84965/rearranging-labels-in-screen-to-avoid-overlapping)。

# c++ - C++：二叉搜索树 getHeight() 访问冲突

> ID：13437332
> 
> 赞同：0
> 
> 时间：2012-11-18T03:56:11.363
> 
> 标签：c++, binary-tree, access-violation

首先，我已经阅读了[C++ 二叉搜索树状态访问冲突错误，其中包括添加节点](https://stackoverflow.com/questions/10355641/c-binary-search-tree-status-access-violation-error-with-adding-nodes)和[插入二叉搜索树访问冲突错误](https://stackoverflow.com/questions/13412076/inserting-in-a-binary-search-tree-access-violation-error)，但我仍然无法完全实现我的二叉树。我目前在我的 get height 类中遇到访问冲突，但不知道为什么。

```
template <typename Item, typename Key>
std::size_t BinarySearchTree<Item, Key>::height(TreeNode* node) const{
    if (node == NULL)
        return 0;
    //Debug     
    if(node == NULL)
        std::cout<< "node = Null"<< endl;
    else
        std::cout<< "node != Null"<< endl;

    if(node->left == NULL)
        std::cout<< "left = Null"<< endl;
    else
        std::cout<< "left != Null"<< endl;

    if(node->right == NULL)
        std::cout<< "right = Null"<< endl;
    else
        std::cout<< "right != Null"<< endl;

    //This will go through the list adding 1 at each layer it passes through
    std::size_t left = height(node->left);
    std::size_t right = height(node->right);
    //This will return the branch with the greatest height
    return 1 + std::max(left, right);
} 
```

这就是我向树中添加元素的方式

```
template <typename Item, typename Key>
void BinarySearchTree<Item, Key>::insert(const Item& value){
    insert(root, value);//start at the root node
}//end insert

template <typename Item, typename Key>
void BinarySearchTree<Item, Key>::insert(TreeNode* node, const Item& value){
    //if item == tree->data then stop the method 
    if (node == NULL){
        //Populate the null leaf node
        TreeNode* target = new TreeNode(value);//create a new node for the inserted parameter
        target->data = value;//the data is stored in the target node
        //increment the size counter
        treeSize++;
    }else if (value < node->data)
        //If the item is less than the current nodes data then insert again
        insert(node->left, value);
    else
        //If the item is greater than the current nodes data then insert again
        insert(node->right, value);     
} 
```

我不知道我怎么会遇到访问冲突，因为我在调用左节点或右节点之前检查了空指针。任何见解将不胜感激。

编辑：我还应该注意节点的左叶和右叶被初始化为NULL。

完整代码：

```
#pragma once
#include <cstdlib>

namespace MySpace{

template <typename Item, typename Key = Item>
class BinarySearchTree{
    // private node class (only visible inside the BinarySearchTree class)
    struct TreeNode {
        TreeNode(const Item& data = Item()) :
            data(data), left(NULL), right(NULL) { }
        ~TreeNode(){
            delete left; delete right;
            left = NULL; right = NULL;
        }
        Item data;//This is the object
        TreeNode* left;   // left child
        TreeNode* right;  // right child
    };

public:
    //==========================Constructor=============================
    // creates an empty tree
    BinarySearchTree(){root = NULL; treeSize = 0;}
    // Postcondition: A copy of the binary search tree
    BinarySearchTree(BinarySearchTree<Item, Key>& source);

    //==========================Destructor================================      
    ~BinarySearchTree(){delete root; root = NULL;}//will delete all branches recursively
    //=========================Public Methods============================
    // Postcondition: the current tree has been replaced with a copy of
    // the source binary serch tree. The return value is the calling object
    BinarySearchTree<Item, Key>& operator =(BinarySearchTree<Item, Key>& source);
    // returns the number of nodes in the tree
    std::size_t size() const{return treeSize;}
    // returns the height of the tree
    std::size_t height() const;
    // returns the minimum value in the tree
    const Item& min() const;
    // returns the maximum value in the tree
    const Item& max() const;
    // inserts a copy of the given value into the tree, unless one already exists
    void insert(const Item& value);
    // removes an entry with the given key, if present in the tree
    bool remove(const Key& key);
    // returns a pointer to an entry with the given key (if it exists), or NULL
    Item* search(const Key& key) const;
    // if an entry with the key exists, applies the function
    template <typename Function>
    bool apply(const Key& key, Function f);
    // applies a function to each value in the tree, via preorder traversal
    template <typename Function>
    void preorder(Function f);
    // applies a function to each value in the tree, via inorder traversal
    template <typename Function>
    void inorder(Function f);
    // applies a function to each value in the tree, via postorder traversal
    template <typename Function>
    void postorder(Function f);
    //Copy the nodes of a BST
    TreeNode* copy(const TreeNode *node){           
        //If the passed node is Null then return null
        if (node == NULL)
            return NULL;
        Item nodeData = node->data;
        TreeNode* copyNode = new TreeNode(nodeData);//create a new node with the data from the last one 
        copyNode->data = node->data;
        copyNode->left = copy(node->left);
        copyNode->right = copy(node->right);
        return copyNode;
    }

    //=========================Accessor============================
    TreeNode* getRoot(){return root;}

private:
    //This is the root node for the binary tree
    TreeNode* root;
    std::size_t treeSize;

    //Checks the size of the BST to see if it is empty or not
    bool isEmpty() const{return(treeSize == 0)?true:false;}

    //These methods are used for recursion
    Item* search(TreeNode* node, const Key& key) const;
    void insert(TreeNode* node, const Item& value);
    bool remove(TreeNode* node, const Key& key);
    std::size_t height(TreeNode* node) const;
    const Item& min(TreeNode* node) const;
    const Item& max(TreeNode* node) const;
    template <typename Function>
    void preorder(TreeNode* node, Function f);
    template <typename Function>
    void inorder(TreeNode* node, Function f);
    template <typename Function>
    void postorder(TreeNode* node, Function f);

};

//------------------------This is where the methods will get implemented------------------------
//Copy constructor
template <typename Item, typename Key>
BinarySearchTree<Item, Key>::BinarySearchTree(BinarySearchTree<Item, Key>& source){
    treeSize = source.size();
    TreeNode* tempNode = source.getRoot();
    //copy(tempNode);
}

template <typename Item, typename Key>
BinarySearchTree<Item, Key>& BinarySearchTree<Item, Key>::operator =(BinarySearchTree<Item, Key>& source){
    if(&source == this)
        return *this;
    treeSize = source.size();
    TreeNode* tempNode = source.getRoot();
    //copy(tempNode);
    return *this;
}

template <typename Item, typename Key>
std::size_t BinarySearchTree<Item, Key>::height() const{
    if(root == NULL)
        std::cout<< "AAAAAAHHHHHHH!"<< endl;
    else
        std::cout<< "okay!"<< endl;
    return height(root);//start at the root
}

template <typename Item, typename Key>
std::size_t BinarySearchTree<Item, Key>::height(TreeNode* node) const{
    if (node == NULL)
        return 0;
    //Debug     
    if(node == NULL)
        std::cout<< "node = Null"<< endl;
    else
        std::cout<< "node != Null"<< endl;

    if(node->left == NULL)
        std::cout<< "left = Null"<< endl;
    else
        std::cout<< "left != Null"<< endl;

    if(node->right == NULL)
        std::cout<< "right = Null"<< endl;
    else
        std::cout<< "right != Null"<< endl;

    //This will go through the list adding 1 at each layer it passes through
    std::size_t left = height(node->left);
    std::size_t right = height(node->right);
    //This will return the branch with the greatest height
    return 1 + std::max(left, right);

}

template <typename Item, typename Key>
const Item& BinarySearchTree<Item, Key>::min() const{
    return min(root);//start at the root
}

template <typename Item, typename Key>
const Item& BinarySearchTree<Item, Key>::min(TreeNode* node) const{
    if(!isEmpty()){
        //goes recursively until the left most leaf is found
        if(node->left == NULL)
            return node->data;
        else
            min(node->left);
    }

    return Item();
}

template <typename Item, typename Key>
const Item& BinarySearchTree<Item, Key>::max() const{
    return max(root);//start at the root
}

template <typename Item, typename Key>
const Item& BinarySearchTree<Item, Key>::max(TreeNode* node) const{
    if(!isEmpty()){
        //goes recursively until the right most leaf is found
        if(node->right == NULL)
            return node->data;
        else
            max(node->right);
    }
    return Item();
}

template <typename Item, typename Key>
void BinarySearchTree<Item, Key>::insert(const Item& value){
   insert(root, value);//start at the root node
}//end insert

template <typename Item, typename Key>
void BinarySearchTree<Item, Key>::insert(TreeNode* node, const Item& value){
    //if item == tree->data then stop the method 
    if (node == NULL){
        //Populate the null leaf node
        TreeNode* target = new TreeNode(value);//create a new node for the inserted parameter
        target->data = value;//the data is stored in the target node
        node = target;
        //increment the size counter
        treeSize++;
    }else if (value < node->data)
        //If the item is less than the current nodes data then insert again
        insert(node->left, value);
    else
        //If the item is greater than the current nodes data then insert again
        insert(node->right, value);     
}

template <typename Item, typename Key>
bool BinarySearchTree<Item, Key>::remove(const Key& key){
    return remove(root, key);//default is to return false
}

template <typename Item, typename Key>
bool BinarySearchTree<Item, Key>::remove(TreeNode* node, const Key& key){
    //If the tree is not empty
    if(!isEmpty()){
        if (key < node->data)
            //If the key is less than the Item than go to the left branch
            remove(node->left, key);
        else if (key > node->data)
            //If the key is less than the Item than go to the right branch
            remove(node->right, key);
        else{
            //If the key is equal to the Item then...
            //decrement size
            treeSize--;

            // There are several cases I have to deal with
            // 1) a leaf node - easy
            // 2) a node with 1 child - left or right
            // 3) a node with 2 children - left and right

            if(node->left == NULL && node->right == NULL){
                delete node;//If the node was a leaf then just delete it
                node = NULL;
            }else if(node->left != NULL || node->right != NULL){
                TreeNode* tempNode = node;
                //If either branch is empty, then delete the node
                delete node;
                //now set the node to the non empty branch
                node = (tempNode->left != NULL)?tempNode->left:tempNode->right;
            }else{
                //if there are two branches then make the right branch the node
                TreeNode* switchNode = node->right;

                //gets the left most node on the right branch
                while(switchNode->left != NULL){
                       switchNode = switchNode->left;
                }
                //This puts the data into the passed node, but does not delete it!
                node->data = switchNode->data;
                //I don't know how many children the switch node has(Either 0 or 1), so I have to run the 
                //method again on the switch node to remove it properly
                remove(switchNode, switchNode->data);
            }           
            return true;//return true since the item was deleted
        }//end if
    }//end if not empty
    return false;
}

template <typename Item, typename Key>
Item* BinarySearchTree<Item, Key>::search(const Key& key) const{
    return search(root, key);
}

template <typename Item, typename Key>
Item* BinarySearchTree<Item, Key>::search(TreeNode* node, const Key& key) const{
    if (node == NULL){
        //If there is no node at this location return null
        return NULL;
    }else if (key < node->data)
        //If the key is less than the Item than go to the left branch
        search(node->left, key);
    else if (key > node->data)
        //If the key is less than the Item than go to the right branch
        search(node->right, key);
    else
        //If the key is equal to the Item than return the item
        return &node->data;
}

template <typename Item, typename Key>
template <typename Function>
bool BinarySearchTree<Item, Key>::apply(const Key& key, Function f){
    Item* data = search(key);
    if(data != NULL){
        f(*data);//do the function on the selected item
        return true;
    }
    return false;
}

template <typename Item, typename Key>
template <typename Function>
void BinarySearchTree<Item, Key>::preorder(Function f){
    preorder(root, f);//start at the root
}

template <typename Item, typename Key = Item>
template <typename Function>
void BinarySearchTree<Item, Key>::preorder(TreeNode* node, Function f){
    //If the node is not null then do the method
    if(node != NULL){
        //Then apply the function to the data
        f(node->data);
        //Do the branches last
        if(node->left) preorder(node->left, f);
        if(node->right) preorder(node->right, f);
    }else
        return;
}

template <typename Item, typename Key>
template <typename Function>
void BinarySearchTree<Item, Key>::inorder(Function f){
    inorder(root, f);//start at the root
}

template <typename Item, typename Key = Item>
template <typename Function>
void BinarySearchTree<Item, Key>::inorder(TreeNode* node, Function f){
    //If the node is not null then do the method
    if(node != NULL){
        //Do the function in between the two branches
        if(node->left) inorder(node->left, f);
        //Then apply the function to the data
        f(node->data);
        if(node->right) inorder(node->right, f);
    }else
        return;
}

template <typename Item, typename Key = Item>
template <typename Function>
void BinarySearchTree<Item, Key>::postorder(Function f){
    postorder(root, f);//start at the root
}

template <typename Item, typename Key = Item>
template <typename Function>
void BinarySearchTree<Item, Key>::postorder(TreeNode* node, Function f){
    //If the node is not null then do the method
    if(node != NULL){
        //Do the function in between the two branches
        if(node->left) postorder(node->left, f);
        if(node->right) postorder(node->right, f);
        //Then apply the function to the data
        f(node->data);
    }else
        return;
}

} 
```

这是主要功能所在

```
#include "BinarySearchTree.h" 
#include <iostream>
#include <vector>
#include <cassert>
#include <algorithm>
#include <utility>
#include <cmath>
#include <sstream>
using namespace std;
using namespace MySpace;
using namespace rel_ops;

#define TreeType BinarySearchTree

#define BALANCED false

// #define ITERATORS

// returns the ideal height of a tree with n nodes
size_t balanced_height(size_t n) { 
    return (n < 2) ? n : 1 + (size_t) (log10((double) n) / log10(2.0));
}

// a simple compound data type
struct Person {
    string name;
    int age;

    bool operator <(const Person& other) const { return (name < other.name); }
    bool operator ==(const Person& other) const { return (name == other.name); }

    operator string() const { return name; }
};

// operators for comparing a string to a Person (a Key to an Item)
bool operator <(const string& L, const Person& R) { return L < R.name; }
bool operator >(const string& L, const Person& R) { return L > R.name; }
bool operator ==(const string& L, const Person& R) { return L == R.name; }
bool operator !=(const string& L, const Person& R) { return L != R.name; }
bool operator <=(const string& L, const Person& R) { return L <= R.name; }
bool operator >=(const string& L, const Person& R) { return L >= R.name; }

// output operator for Person class
ostream& operator <<(ostream& out, const Person& p) { return out << p.name; }

template <typename Item, typename Key>
void test_tree(TreeType<Item, Key>, const vector<Item>&);

int main() {
    const size_t NUM_VALUES = 15;

    // create vectors containing the values to use
    vector<int> nums(NUM_VALUES);
    vector<Person> people(NUM_VALUES);

    // populate them with values
    for (size_t i = 0; i < NUM_VALUES; i++) {
        nums[i] = people[i].age = i;
        people[i].name = char('A' + i);
    }

    // create the empty trees
    TreeType<int> t1;
    TreeType<Person, string> t2;

    // testing when the data type is also the key
    cout << "Testing case when Item type is also the Key type... " << endl;
    test_tree(t1, nums);
    cout << "Passed!\n\n";

    // testing when the Item type has a different Key type
    cout << "Testing case with different Item and Key types... " << endl;
    test_tree(t2, people);
    cout << "Passed!\n\n";

    // all tests passed
    cout << "Nicely done!" << endl;
    return EXIT_SUCCESS;
}

// simple stringstreams for testing purposes
stringstream s1, s2;

// outputs a value to the stringstream for testing
template <typename Item>
void output_value(Item& data) {
    s1 << data;
}

// inserts the contents of the vector in way that yields a balanced tree
template <typename Item, typename Key>
void balanced_insert(TreeType<Item, Key>& tree, const vector<Item> values, int beg, int end) {
    if (beg > end) return;

    size_t mid = ceil((beg + end) / 2.0);
    tree.insert(values[mid]);

    if (beg != end) {
        balanced_insert(tree, values, beg, mid - 1);
        balanced_insert(tree, values, mid + 1, end);
    }
}

// fills ss with data in preorder fashion
template <typename Item>
void vector_preorder(stringstream& ss, const vector<Item> values, int beg, int end) {
    if (beg > end) return;

    size_t mid = ceil((beg + end) / 2.0);
    ss << values[mid];

    if (beg != end) {
        vector_preorder(ss, values, beg, mid - 1);
        vector_preorder(ss, values, mid + 1, end);
    }
}

// fills ss with data in inorder fashion
template <typename Item>
void vector_inorder(stringstream& ss, const vector<Item> values, int beg, int end) {
    if (beg > end) return;

    size_t mid = ceil((beg + end) / 2.0);

    if (beg != end) vector_inorder(ss, values, beg, mid - 1);

    ss << values[mid];

    if (beg != end) vector_inorder(ss, values, mid + 1, end);
}

// fills ss with data in postorder fashion
template <typename Item>
void vector_postorder(stringstream& ss, const vector<Item> values, int beg, int end) {
    if (beg > end) return;

    size_t mid = ceil((beg + end) / 2.0);

    if (beg != end) {
        vector_postorder(ss, values, beg, mid - 1);
        vector_postorder(ss, values, mid + 1, end);
    }

    ss << values[mid];
}

template <typename Item, typename Key>
void test_tree(TreeType<Item, Key> tree, const vector<Item>& values) {
    // tree should initially be empty
    assert(tree.size() == 0);
    assert(tree.height() == 0);

    std::cout<<"DIM TEST 1 COMPLETE!"<<endl;

    // insert a single value (becomes root of tree)
    tree.insert(values[0]);

    // ensure that the tree has a size and height of 1...
    assert(tree.size() == 1);
    assert(tree.height() == 1);

    std::cout<<"DIM TEST 2 COMPLETE!"<<endl;

    // ensure the value appears in the tree...
    assert(tree.search(values[0]));

    // and that your function correctly returns a pointer to the value
    assert(*tree.search(values[0]) == values[0]);

    std::cout<<"SEARCH 1 COMPLETE!"<<endl;

    // testing removing the root node (resulting in an empty tree)
    assert(tree.remove(values[0]));

    std::cout<<"REMOVE 1 COMPLETE!"<<endl;

    // ensure that the tree is once again empty...
    assert(tree.size() == 0);
    assert(tree.height() == 0);

    std::cout<<"DIM TEST 3 COMPLETE!"<<endl;

    // ensure that removing a non-existent value doesn't fail (should return false)
    assert(!tree.remove(values[0]));

    std::cout<<"REMOVE 2 COMPLETE!"<<endl;

    // ensure that the value no longer appears in the tree...
    assert(!tree.search(values[0]));

    std::cout<<"SEARCH 2 COMPLETE!"<<endl;

    // insert all the values this time in sorted order...
    for (size_t i = 0; i < values.size(); i++) {
        tree.insert(values[i]);

        // ensure the value appears in the tree...
        assert(tree.search(values[i]));

        // ensure that the size is correct...
        assert(tree.size() == i + 1);

        // height of tree depends on whether you're balancing as you go or not
        assert(tree.height() == (BALANCED ? balanced_height(tree.size()) : tree.size()));
    }

    std::cout<<"INSERT 1 COMPLETE!"<<endl;

    // ensure min and max work
    assert(tree.min() == *min_element(values.begin(), values.end()));
    assert(tree.max() == *max_element(values.begin(), values.end()));

    // remove all the values, starting with the root
    for (size_t i = 0; i < values.size(); i++) {
        // remove the value
        tree.remove(values[i]);

        // ensure the value no longer appears in the tree...
        assert(!tree.search(values[i]));

        // ensure that the size is correct...
        assert(tree.size() == values.size() - i - 1);

        // height of tree depends on whether you're balancing as you go or not
        assert(tree.height() == (BALANCED ? balanced_height(tree.size()) : tree.size()));
    }

    std::cout<<"REMOVE 3 COMPLETE!"<<endl;

    // insert all the values this time in balanced order...
    balanced_insert(tree, values, 0, values.size() - 1);

    std::cout<<"INSERT 2 COMPLETE!"<<endl;

    // make sure the size is still right...
    assert(tree.size() == values.size());

    // height of tree should be ceil(log2(n))
    assert(tree.height() == balanced_height(tree.size()));

    std::cout<<"DIM TEST 4 COMPLETE!"<<endl;

    // can't insert duplicate values (size & height shouldn't increase)
    // operation should simply fail silently (do nothing)
    tree.insert(values[0]);
    assert(tree.size() == values.size());
    assert(tree.height() == balanced_height(values.size()));

    // ensure min and max (still) work
    assert(tree.min() == *min_element(values.begin(), values.end()));
    assert(tree.max() == *max_element(values.begin(), values.end()));

    std::cout<<"MIN MAX 1 COMPLETE!"<<endl;

    // testing copy constructor
    TreeType<Item, Key>* copy = new TreeType<Item, Key>(tree);
    assert(copy->size() == tree.size());
    assert(copy->height() == tree.height());

    std::cout<<"DIM TEST 5 COMPLETE!"<<endl;

    // original should remain unchanged after copy modification
    copy->remove(values[1]);
    copy->remove(values[values.size() - 2]);
    assert(copy->size() == tree.size() - 2);
    assert(tree.search(values[1]));
    assert(tree.search(values[values.size() - 2]));

    std::cout<<"REMOVE 4 COMPLETE!"<<endl;

    // testing destructor
    delete copy;

    // the original should remain unchanged
    for (size_t i = 0; i < values.size(); i++) {
        assert(tree.search(values[i]));
    }

    // testing assignment operator
    copy = new TreeType<Item, Key>;
    *copy = tree;

    // original should remain unchanged after copy modification
    copy->remove(values[1]);
    copy->remove(values[values.size() - 2]);
    assert(copy->size() == tree.size() - 2);
    assert(tree.search(values[1]));
    assert(tree.search(values[values.size() - 2]));

    // testing destructor
    delete copy;

    // the original should remain unchanged
    for (size_t i = 0; i < values.size(); i++) {
        assert(tree.search(values[i]));
    }

    // testing preorder traversal
    s1.str(""); s2.str("");
    vector_preorder(s2, values, 0, values.size() - 1);
    tree.preorder(output_value<Item>);
    assert(s1.str() == s2.str());

    // testing inorder traversal
    s1.str(""); s2.str("");
    vector_inorder(s2, values, 0, values.size() - 1);
    tree.inorder(output_value<Item>);
    assert(s1.str() == s2.str());

    // testing postorder traversal
    s1.str(""); s2.str("");
    vector_postorder(s2, values, 0, values.size() - 1);
    tree.postorder(output_value<Item>);
    assert(s1.str() == s2.str());

    // testing apply
    s1.str(""); s2.str("");
    s2 << values[0];
    tree.apply(values[0], output_value<Item>);
    assert(s1.str() == s2.str());

#ifdef ITERATORS
    // testing iterators (smallest-to-largest order)
    typename TreeType<Item, Key>::iterator t = tree.begin();
    typename vector<Item>::const_iterator v = values.begin();

    while (t != tree.end()) {
        assert(*t == *v);
        ++t;
        ++v;
    }

    assert(v == values.end());
#endif
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:03:34.290

在分配和初始化节点后，您需要将节点设置为目标。

# c - 奇怪的输出写入C中的文件

> ID：13437339
> 
> 赞同：-1
> 
> 时间：2012-11-18T03:57:48.260
> 
> 标签：c, file, file-io

我正在尝试将字符串附加到文本文件中，但我得到了奇怪的字符。如果我尝试将结果打印到控制台，输出是正常的。这就是我在 vim 中看到的输出。如果我在 gedit 中查看它，我会得到奇怪的框。

输出文件：

```
 A^CA^BB^A
  A^CB^BA^A
  B^CA^BA^A 
```

预期输出：

```
AAB
ABA
BAA 
```

我的函数应该将没有重复的排列写出到文本文件中。

功能代码：

```
void RecursivePermute (char *prefix, char *rest, int *ptr)
{
    char *temp = malloc(sizeof(char *));
    char *new_prefix = malloc(sizeof(char *));
    char *rest_left = malloc(sizeof(char *));
    char *rest_right = malloc(sizeof(char *));
    char *new_rest = malloc(sizeof(char *));
    char rest_char;
    int idx = 0;
    int first_occurance = 0;
    int i;
    FILE *file;
    strcpy(temp, rest);
    if (*rest == '\0')
    {
        *ptr += 1;
        printf("Permutation %d: %s\n", *ptr, prefix);
        file = fopen("permutations.txt", "a");
        fprintf(file,"%s\n",prefix);
        fclose(file);
        return;
    }
    else
    {
        size_t rest_size = strlen(rest);
        while (*rest != '\0')
        {

            first_occurance = (strchr(temp, *rest) - temp - idx);
            if (first_occurance == 0)
            {
                rest_char = *rest;
                rest_left = strncpy(rest_left, rest-idx, idx);
                rest_right = strncpy(rest_right, rest+1, rest_size-1);
                sprintf(new_rest, "%s%s", rest_left, rest_right);
                sprintf(new_prefix,"%s%s", prefix, &rest_char);
                RecursivePermute( new_prefix, new_rest, ptr);
            }
            rest++;
            idx ++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:07:23.730

一件事是您的 &rest_char 的 printf 格式说明符是错误的。&rest_char 不能解释为字符串，因为它不是以空值结尾的。如果要打印一个字符，请使用 %c。您的行应如下所示：

```
sprintf(new_prefix,"%s%c", prefix, rest_char); 
```

Also you might want to look and see how you are allocating strings. By specifying a size of sizeof(char *) it will only create a memory allocation the size of a pointer. If the string in rest is greater than that it will cause a buffer overrun when you do the strcpy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:09:40.013

When you call `malloc(sizeof(char *))`, you are allocating a buffer of four bytes (or eight bytes if you are compiling for 64-bit). This almost certainly isn't what you want.

Then, you use `strcpy()` which doesn't check length. I almost never even use `strcpy()` anymore.

You also use `strncpy()`, which does check length, but I kind of hate it because it doesn't guarantee that the string will be properly null-terminated; if you copy a string that is length 4 or longer, and the buffer can hold only 4 characters, there is no null.

So, I haven't run your program under a debugger, but when you put all these problems together I am not suprised your program is misbehaving.

# php - 如何在.htaccess中重定向主页上的url

> ID：13437341
> 
> 赞同：0
> 
> 时间：2012-11-18T03:58:00.260
> 
> 标签：php, .htaccess

我想将此页面 mysite.com/product.php(.*) 重定向到 mysite.com/home.php 但它正在将其重定向到例如 mysite.com/home.php?id=201

意味着它将 mysite.com/product.php?id=201 重定向到 mysite.com/home.php?id=201

问题出在哪里...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:38:58.287

这应该有效：

```
RewriteEngine On
RewriteRule ^product\.php /home.php? [R=301,L] 
```

最后的问号将删除查询字符串。

# java - 双精度不能被取消引用

> ID：13437343
> 
> 赞同：-2
> 
> 时间：2012-11-18T03:58:19.790
> 
> 标签：java

## 问题

什么可能是我的问题的原因以及如何解决它：

*如果用户输入的不是双*精度值，我的程序就会崩溃。

## 程序主体

```
public class Annual
{
    public static void main(String[] args)
    {
        Scanner percent = new Scanner(System.in);
        System.out.println("Please enter annual sales:");
        double yearly = percent.nextInt();
        double T = 50000;
        double Amt;
        if (yearly.matches("[0-9]+") && yearly.length() > 2 && yearly.length() <= 8)
        {
            double YrPrcnt = yearly * .05;
            Amt = T + YrPrcnt;
            System.out.print("The Annual Payrate for employee is:");
            System.out.print(Amt);
        }
    }
} 
```

## 错误信息

“ *double 不能被取消引用*”和“*非法的表达式开头*”

## 我试过的

最简单的方法：检查用户输入是否为数字，如果是则提供错误消息。

## 系统信息

我在 NetBeans 7.2 中对此进行编码，并且是 Java 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T03:59:30.797

```
yearly.matches 
```

`double`（每年）是原始类型，您不能在原始类型上调用方法（匹配（或）任何）。

要检查输入是否为范围，您需要使用大于和小于运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:01:12.917

```
if (yearly.matches("[0-9]+") && yearly.length() > 2 && yearly.length() <= 8) 
```

你在`yearly`这里被当作一个字符串。如果这是您的意图，则将用户输入读入字符串，对该字符串执行检查并将其转换为 double using`Double.parseDouble()`方法。

# scope - 方案-使用集合！改变一个变量

> ID：13437344
> 
> 赞同：2
> 
> 时间：2012-11-18T03:58:31.257
> 
> 标签：scope, scheme

我有一段非常简单的代码，我只是想遵循流程，我想我理解，但我只是想确保

```
(define count
  (let ([next 0])
    (lambda ()
      (let ([v next])
        (set! next (+ next 1))
        v)))) 
```

基本上，count 会跟踪它被调用的次数。当您第一次调用它时，使用 let 将 next 设置为 0。稍后，使用 set! 将其更改为 1！我试图弄清楚为什么 (let ([next 0]) 每次调用程序时都没有将 next 设置回 0。据我所知， (lambda () ...) 是实际函数开始（不带参数），所以当您再次调用 count 时，它只是从那里执行，使用该范围内的 next 的值（集合！一个）

我想……老实说，我还是有点不确定。设置！只是自动永久更改 next 所以当你再次调用 count 时，即使第一行是 (let ((next 0))) 它实际上并没有回到零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:03:47.223

你的直觉是正确的。这部分：在绑定到名称*之前*`(let ([next 0])`只执行一次- 这是因为第一个作为其值返回它的最后一个表达式，恰好是 a ，这就是绑定到变量的内容。*`lambda``count``let``lambda``count`*

 *函数定义结束后，`count`过程的实际执行从这一行开始：`(let ([v next])`，每次调用过程都会发生这种情况。该`next`变量对于`count`过程的所有调用都是相同的，可以在内部访问，`count`因为它在`lambda`创建时作为 ' 的环境的一部分在闭包内被捕获。*

# javascript - XHR 请求未定义

> ID：13437345
> 
> 赞同：0
> 
> 时间：2012-11-18T03:59:15.160
> 
> 标签：javascript, ajax

我有点卡住了，我有两个函数调用填充并使用 JSON.parse 返回结果。但是当我 console.log 结果我得到“未定义”。

这是我处理请求的函数：

```
function caller(url,cfunc){
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
                xmlhttp.onreadystatechange=cfunc;
                xmlhttp.open("GET",url,true);
                xmlhttp.send();
}
function call_data(url,data){
    caller(url,function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            return( JSON.parse (xmlhttp.responseText) );
        }
    });                                           
} 
```

电话在这里：

```
result = call_data('./chk_login.php',0);
console.log(result); 
```

根据 Chrome，我得到的 xhr 请求非常好，并显示了输出。但是 console.log 显示 undefined... 所以你知道这也是我的 PHP 脚本：

```
<?
    $var = 1;
    echo json_encode($var);
    exit;
?> 
```

什么可能导致问题？

希望你能帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:12:34.670

由于这是异步的（毕竟这就是 AJAX 中的 A 所代表的意思），所以您不能简单地`return`期望它会神奇地返回。相反，在回调中操作数据（您已经完成了 80% 的工作）。

```
function call_data(url,data){
    caller(url,function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            console.log( JSON.parse (xmlhttp.responseText) );
            ajaxResult = JSON.parse (xmlhttp.responseText);
        }
    });
}

var ajaxResult; 
```

# audio - 将 wav 文件与 libsndfile 混合时的工件

> ID：13437346
> 
> 赞同：1
> 
> 时间：2012-11-18T03:59:19.490
> 
> 标签：audio, wav, mixing, libsndfile

我正在尝试实现一个混合钢琴样本的软件。我想创建一个包含一种声音、另一种声音和两者混合的 wav 文件。

我在一秒钟内截断样本，所以我有以下内容：[一秒钟的声音 1][一秒钟的声音 2][一秒钟的声音 1 + 声音 2]

问题是每次过渡都有一个奇怪的声音伪影。有人知道它来自哪里吗？

提前致谢。

这是我正在使用的代码：

```
#include "stdafx.h"
#include <cstdlib>
#include <sndfile.h>

int _tmain(int argc, _TCHAR* argv[])
{
    SF_INFO sInfo1;
    SF_INFO sInfo2;
    SF_INFO sInfo3;

    SNDFILE *sFile1 = NULL;
    SNDFILE *sFile2 = NULL;
    SNDFILE *sFile3 = NULL;

    double *buff1;
    double *buff2;
    double *buff3;

    sf_count_t count1 = 0;
    sf_count_t count2 = 0;
    sf_count_t count3 = 0;

    buff1 = (double*)malloc(88200*sizeof(double));
    buff2 = (double*)malloc(88200*sizeof(double));
    buff3 = (double*)malloc(88200*sizeof(double));

    sInfo1.format = 0;
    sInfo2.format = 0;
    sFile1 = sf_open("C:/samples/mezzo forte/mcg_mf_022.wav", SFM_READ, &sInfo1);
    sFile2 = sf_open("C:/samples/mezzo forte/mcg_mf_046.wav", SFM_READ, &sInfo2);

    sInfo3 = sInfo2;
    sFile3 = sf_open("C:/samples/test1.wav", SFM_WRITE, &sInfo3);

    count1 = sf_read_double(sFile1, buff1, 88200);
    count2 = sf_read_double(sFile2, buff2, 88200);

    for(int i=0; i<88200; i++)
    {
        buff3[i] = buff1[i] + buff2[i] - ( buff1[i] * buff2[i] );
    }

    count1 = sf_write_double(sFile3, buff1, 88200);
    count2 = sf_write_double(sFile3, buff2, 88200);
    count3 = sf_write_double(sFile3, buff3, 88200);

    sf_close(sFile1);
    sf_close(sFile2);
    sf_close(sFile3);

    free(buff1);
    free(buff2);
    free(buff3);

    //getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:58:44.637

这不是 libsndfile 问题。这是一个一般的音频合成问题。

每当您将样本截断为任意值（例如，1 秒）时，您都可以期望听到（或看到，如果您将结果文件加载到 Audacity 中，并在转换边界处检查频谱图和波形) 一个神器。这是因为样本波形的突然变化。我将跳过讨论带宽限制问题的尝试，只是敦促您快速淡出样本，而不仅仅是截断它们。这会迫使您的音频波形在过渡之前 [迅速] 接近零 - 平滑。

您可能会发现您还需要淡入（或交叉淡入，如果您与平滑过渡重叠）通过将其前几个样本加权接近零的值，然后将其提升 [快速，或者你'会错过攻击] 到全面。首先，在每次转换之前先快速淡出，并且只有在需要时才担心淡入。实现是相同的（一个递增或递减的样本缩放值），但它是样本在 1 秒时的任意截断（结束）可能会造成最大的麻烦。

您需要使用一些不同的参数来查看有效的方法。例如，为简单起见，您可能希望从线性下降而不是指数或抛物线衰减函数开始。在任何情况下，您都必须决定从转换点开始有多少样本（或多少毫秒）才能开始缩小样本值。

编辑：

我最初认为您的混音很好，因为您只询问了过渡工件。我的回答解决了这个问题。然而，值得注意的`buff3`是，鉴于您的既定目标，我不知道您为什么要完全按照自己的方式混入其中。如果我理解正确，您想简单地将两个声音组合成`buff3`，只需将另外两个相应的样本加在一起并确保它们不会剪辑（即超出范围 [-1.0, +1.0]）。libsndfile 自动“防止”削波，但它只能设置，例如，高于 1.0 到 1.0 的样本值——不能确保两个音频波形混合均匀。

如果您的两个输入声音中的任何一个的电平足够高，那么简单的加法混音就会剪辑，这将是另一种类型的“伪影”（除了可能破坏整个声音，因此在这种特殊情况下，您可能会注意到尽可能多）。但是，对于一般混合，您的循环将是：

```
for(int i=0; i<88200; i++)
{
    /* multiply sum of signals by factor slightly
       less than reciprocal of their count to guard
       also against floating-point error. */

    buff3[i] = (buff1[i] + buff2[i]) * 0.499;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:50:10.887

我根本不清楚您*要做*什么。您的描述说：“我想创建一个 wav 文件，其中包含一种声音、另一种声音以及两者的混合。” 如果你想把一种声音和另一种声音结合起来，为什么还要混合这两种声音呢？这就像把牛奶和奶油的混合物加进去[一半一半](http://en.wikipedia.org/wiki/Half_and_half)。

也许你试图让输出长三秒，第一秒包含第一个声音，第二秒包含第二个声音，第三秒包含两者的混合，但你的代码不是那样的，所以我将忽略这种可能性。

让我们做一些基础知识。

要复制第一个文件的第一秒，您的循环将如下所示：

```
buff3[i] = buff1[i] ; 
```

要复制第二个文件的第一秒，您的循环将如下所示：

```
buff3[i] = buff2[i] ; 
```

要混合两者，您只需添加它们。混合与组合相同。有时我们说我们正在对两个信号进行“叠加”：

```
buff3[i] = buff1[i] + buff2[i] ; 
```

您通常希望除以 2 以防止信号“越界”：

```
buff3[i] = ( buff1[i] + buff2[i] ) / 2  ; 
```

请注意，我们没有将信号的样本值彼此相乘。像您所做的逐个样本乘法是为非常不寻常的情况保留的，例如 AM 合成。

# c - 如何在隐藏目录中创建文件？

> ID：13437349
> 
> 赞同：0
> 
> 时间：2012-11-18T03:59:51.253
> 
> 标签：c, file-io, file-copying

真的，我只是对如何在当前工作目录的子目录中创建文件感到困惑，尤其是在它被隐藏的情况下。

Say`char* backup`包含我们通过`open()`调用创建的文件的名称。

假设有一个已经存在的隐藏文件夹，名为`.mybackup`.

如何在其中创建文件`.mybackup`？希望没有 chdir'ing 两次。

到目前为止我在哪里：

```
int filewrite;
filewrite = open(backup, O_CREAT | O_RDWR, 0644); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:01:33.173

在文件名前加上您希望放置的目录。或者，`chdir`两次也可以接受。

```
char* backup = "backup.sql";   // Assuming this comes from somewhere else (not constant)

const char* targetDir = ".mybackup/";   // (No leading slash)

// Allocate a buffer for the filename (remembering +1 for null-terminator!)
char* path = (char*)malloc(strlen(targetDir) + strlen(backup) + 1);

strcpy(path, targetDir);   // Copy in the target directory part
strcat(path, backup);      // Copy in the filename part

filewrite = open(path, O_CREAT | O_RDWR, 0644);  // Open the file

free(path);   // Free the buffer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:02:01.753

```
int 文件写入；
文件写入 = 打开（备份，O_CREAT | O_RDWR，0644）

```

*其中备份包含“文件夹\文件名”其中文件夹与您*所在的文件夹相对

# java - JTextField 和 JComboBox 的通用泛型类型

> ID：13437356
> 
> 赞同：0
> 
> 时间：2012-11-18T04:01:25.523
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我想根据列数和数据类型创建一个动态表。问题是当我想从泛型类型列表`JTextField`中获取元素时。`JComboBox`我必须从不同的泛型类型进行迭代，但要添加到一种泛型类型中，例如 Table 类型。我认为主要问题在于`cretaeTable()`方法。

```
public class Table {

    public String getColumnName() {
        return columnName;
    }
    public void setColumnName(String columnName) {
        this.columnName = columnName;
    }
    public String getDatatype() {
        return datatype;
    }
    public void setDatatype(String datatype) {
        this.datatype = datatype;
    }
    private String columnName;
    private String datatype;

}

            List<JTextField> fields = new ArrayList<JTextField>();
            List<JComboBox> combos = new ArrayList<JComboBox>();

        // adding elemet 

        public void addNewElements(ActionEvent evt) {
                System.out.println("txtInputColNum.getText():: " +txtNumColumn.getText());
                if(!(txtNumColumn.getText()== null || txtNumColumn.getText().equals("")))   {
                    if(Integer.parseInt(txtNumColumn.getText())>0){
                        noOfColumn =Integer.parseInt(txtNumColumn.getText());
                        int txtFieldX= 10;
                        int comboFieldX = 120;

                        for (int i= 0; i < noOfColumn; i++){ 
                             JTextField newJTextField = new JTextField("",4);
                             newJTextField.setBounds(txtFieldX, 60, 100, 25);
                             String course[] = {"VARCHAR2","NUMBER","DATE"};
                             JComboBox combo = new JComboBox(course);
                             combo.setBounds(comboFieldX, 60, 100, 25);
                             fields.add(newJTextField);

                            this.add(newJTextField);                    
                            this.add(combo);
                            combos.add(combo);
                            txtFieldX = txtFieldX+250;
                            comboFieldX = comboFieldX+250;
                        }

                    }

                }   

                this.repaint();
                this.validate();
            }

    // call createTable method

        public void createTable(ActionEvent evt) {
            List<Table> tabList = new ArrayList<Table>();

            System.out.println("fields "+ fields.size());
            for(JTextField textField :fields){
                Table table = new Table();
                //System.out.println("textField:: "+ textField.getText());          
                table.setColumnName(textField.getText().toString());
                tabList.add(table);
            }

            for(JComboBox comboField :combos){
                Table table2 = new Table();
                System.out.println("comboField:: "+ comboField.getSelectedItem().toString());           
                table2.setDatatype(comboField.getSelectedItem().toString());
                tabList.add(table2);
            }

            for(Table tableModel:tabList){
                System.out.println("getColumnName "+ tableModel.getColumnName());
                System.out.println("getDatatype "+ tableModel.getDatatype());
            }
        } 
```

# java - JAXB/MOXy 错误的解组结果

> ID：13437358
> 
> 赞同：2
> 
> 时间：2012-11-18T04:01:56.473
> 
> 标签：java, jaxb, moxy

我正在使用 JAXB/MOXy 来解组包含大约 50 个此类对象的 XML 文件：

```
@XmlRootElement(name="Message")
public class MyClass{

private String name="";

private String messageComment;

private String messageType;

private Vector<Param> params = new Vector<Param>();

private String subtype;

public UcipMessageUnmarshaller(){}

public String getName() {
    return name;
}

@XmlElement
public void setName(String name) {
    this.name = name;
}

public Vector<Param> getParams() {
    return params;
}

@XmlElementWrapper(name="params")
@XmlElement (name="param")
public void setParams(Vector<Param> params) {
    this.params = params;
}

public static Param getParam(String name, Boolean mandatory){
    return new Param(name, mandatory);
}

public void setComment(String comment) {
    this.messageComment = comment;
}

@XmlAttribute(name="comment")
public void setMessageComment(String messageComment) {
    this.messageComment = messageComment;
}

@XmlAttribute(name="type")
public void setMessageType(String messageType) {
    this.messageType = messageType;
}

@XmlAttribute(name="comment")
public String getMessageComment() {
    return messageComment;
}

public String getMessageType() {
    return messageType;
}

public String getSubtype() {
    return subtype;
}

@XmlElement
public void setSubtype(String subtype) {
    this.subtype = subtype;
}
    } 
```

但是我遇到了一个奇怪的问题：我的一些对象有一个非常奇怪的“名称”，例如其中一个正在获取：`y></pstRefillAccountAfterFlag`其他对象的一部分名称与另一个对象的一部分名称混合在一起。

这是我的 XML 文件的示例：

```
<Message>
    <name>MessageName</name>
    <params>
        <param>
            <name>Param1Name</name>
            <mandatory>true</mandatory>
        </param>
        <param>
            <name>Param2Name</name>
            <mandatory>true</mandatory>
        </param>
        <param>
            <name>Param3Name</name>
            <mandatory>true</mandatory>
        </param>
        <param>
            <name>Param4Name</name>
            <mandatory>true</mandatory>
        </param>
        <param>
            <name>Param4Name</name>
            <mandatory>false</mandatory>
        </param>
        <param>
            <name>Param5Name</name>
            <mandatory>true</mandatory>
        </param>
        <param>
            <name>Param6Name</name>
            <mandatory>false</mandatory>
        </param>
    </params>
</Message> 
```

这是`<name>`错误的值。

可能是什么原因？

PS：如果我在线性化和漂亮打​​印的 XML 之间更改文件，结果会有所不同（但总是错误的）。

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:01:07.740

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> @BlaiseDoughan 这里是重现错误的 Eclipse 项目的链接，在 AIRIP.java 的第 72 行设置断点，运行调试，然后查看 -> messages -> elementData[26] -> params - > elementData[15] -> 此错误示例的名称。编辑：您必须将 eclipselink jar 添加到您的项目[链接](https://rapidshare.com/files/4092394426/reproduceXMLError.zip)

基于您链接到的项目（感谢您提供）。如果您从图片中删除 MOXy，您会看到有趣的结果：

**SAX演示**

目前，当您从`File`MOXy 解组时，将使用 SAX 解析器处理 XML 输入。下面我创建了一个简单的应用程序，它使用 SAX 解析器来处理您提供的 XML 文档并输出包含字符串“<”的所有字符事件的内容。

```
import javax.xml.parsers.*;
import org.xml.sax.*;
import org.xml.sax.helpers.DefaultHandler;

public class SAXDemo {

    public static void main(String[] args) throws Exception {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        spf.setNamespaceAware(true);
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        xr.setContentHandler(new DefaultHandler() {

            @Override
            public void characters(char[] ch, int start, int length)
                    throws SAXException {
                String string = new String(ch, start, length);
                if(string.contains("<")) {
                    System.out.println(string);
                }
            }}
       );

       xr.parse("ressources/messages001.xml");
    }

} 
```

**输出**

下面是运行演示代码的输出。大多数行对应于内容 ID`CDATA`部分，因此它们是预期的，但该行`/param><param><name>subscrlag`不是。这意味着 MOXy 解组错误值的原因是底层 SAX 解析器正在报告错误字符事件。

```
<node relation=\"XOR\"><name>adjustmentAmountRelative</name><name>mainAccountValueNew</name></node><node relation=\"AND\" comment=\"in case the request is an update of already assigned community\"><name>communityInformationCurrent</name><name>communityInformationNew</name></node>
<node relation=\"AND\"><name>promotionPlanID</name><name>promotionStartDate</name><name>promotionEndDate</name></node>
/param><param><name>subscrlag
<node relation=\"XOR\"><name>adjustmentAmountRelative</name><name>mainAccountValueNew</name></node><node relation=\"XOR\"><name>supervisionExpiryDateRelative</name><name>supervisionExpiryDate</name></node><node relation=\"XOR\"><name>serviceFeeExpiryDateRelative</name><name>serviceFeeExpiryDate</name></node>
<node relation=\"OR\"><name>msisdnCurrent</name><name>msisdnCurrentNAI</name><name>msisdnNew</name><name>msisdnNewNAI</name><name>imsiCurrent</name><name>imsiNew</name><name>naiCurrent</name><name>naiNew</name><name>sipUriCurrent</name><name>sipUriNew</name><name>privateCurrent</name><name>privateNew</name></node><node relation=\"XOR\"><name>chargingInformation</name><name>externalContract</name></node>
<node relation=\"AND\" comment=\"in case the request is an update of already assigned community\"><name>communityInformationCurrent</name><name>communityInformationNew</name></node>
<node relation=\"XOR\"><name>fafInformation</name><name>fafInformationList</name></node><node relation=\"AND\"><name>selectedOption</name><name>chargingRequestInformation</name></node>
<node relation=\"XOR\"><node relation=\"\"><name>updateAction</name><name>productID</name></node><node relation=\"\"><node relation=\"XOR\"><node relation=\"OR\"><node relation=\"XOR\"><name>startDate</name><name>startDateRelative</name><node relation=\"\" comment=\"Optional\"><name>startPamPeriodIndicator</name><name>currentTimeOffset</name></node></node><node relation=\"XOR\"><name>expiryDate</name><name>expiryDateRelative</name><name>expiryPamPeriodIndicator</name></node></node><node relation=\"OR\"><node relation=\"XOR\"><name>startDateTime</name><name>startDateTimeRelative</name></node><node relation=\"XOR\"><name>expiryDateTime</name><name>expiryDateTimeRelative</name></node></node></node><name>pamServiceID</name><name>offerType</name><name>offerProviderID</name><name>dedicatedAccountUpdateInformation</name><name>attributeUpdateInformationList</name></node></node>
<node relation=\"OR\"><name>promotionRefillAmountRelative</name><name>promotionRefillCounterStepRelative</name><name>progressionRefillAmountRelative</name><name>progressionRefillCounterStepRelative</name></node>
<node relation=\"OR\"><name>accountGroupID</name><name>serviceOfferings</name></node>
<node relation=\"OR\"><name>usageCounterUpdateInformation</name><name>usageThresholdUpdateInformation</name></node> 
```

**问题 - XML 版本 1.1**

您的 XML 文档包含以下标头，其版本设置为`1.1`. 如果您将版本更改为`1.0`一切似乎都可以正常工作。JDK 中的默认 SAX 解析器实现在版本设置为`1.1`.

```
<?xml version="1.1" encoding="utf-8"?> 
```

**解决方案 - 使用另一个 SAX 解析器**

使用标准解析器 API（如 SAX）的好处是您可以随时换入新的解析器。我运行了将 Xerces2 Java Parser 2.11.0 Release 添加到类路径的示例，并且示例按预期运行。

*   [http://xerces.apache.org/xerces2-j/](http://xerces.apache.org/xerces2-j/)

# c++ - 带有#include 的程序 , 允许使用像 strlen() 这样的字符串函数。为什么？

> ID：13437361
> 
> 赞同：2
> 
> 时间：2012-11-18T04:02:05.427
> 
> 标签：c++

```
#include<iostream.h>
int main()
{
   char name[] = "Mary Mon";
   cout<<strlen(name);
   return 0;
} 
```

该程序在没有`#include<string.h>`. 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:29:40.547

首先，正如评论中指出的那样，没有名为`<iostream.h>`. `iostream.h`是 1998 年 C++ 语言标准化之前使用的头文件。标准发布时，名称改为 just `<iostream>`（不带`.h`）。

其次，该标准允许标头包含其他标头（C++03 §17.4.4.1/1）。因此，您的`<iostream.h>`标头可能会包含`<string.h>`，可能是因为那里的某些模板代码依赖于某些字符串函数。结果，您的代码可以干净地编译。

不过，您不应依赖此行为。为了使您的代码具有最大的可移植性，您应该`#include`需要每个头文件，无论它们是否`#include`由其他头文件递归。

# sql - 如何获取当年的第一个和最后一个日期？

> ID：13437362
> 
> 赞同：129
> 
> 时间：2012-11-18T04:02:08.003
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000，如何获取当年的第一个和最后一个日期？

预期输出：

`01/01/2012`和`31/12/2012`

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-11-18T04:08:19.137

```
SELECT
   DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0) AS StartOfYear,
   DATEADD(yy, DATEDIFF(yy, 0, GETDATE()) + 1, -1) AS EndOfYear 
```

上面的查询给出了 12 月 31 日开始的午夜的日期时间值。这比一年中的最后一刻少了大约 24 小时。如果您想包括可能发生在 12 月 31 日的时间，那么您应该与下一年的第一天进行比较，并进行`<`比较。或者您可以与当年的最后几毫秒进行比较，但如果您使用的不是 DATETIME（例如 DATETIME2），这仍然会留下一个空白：

```
SELECT
   DATEADD(yy, DATEDIFF(yy, 0, GETDATE()), 0) AS StartOfYear,
   DATEADD(yy, DATEDIFF(yy, 0, GETDATE()) + 1, -1) AS LastDayOfYear,
   DATEADD(yy, DATEDIFF(yy, 0, GETDATE()) + 1, 0) AS FirstOfNextYear,
   DATEADD(ms, -3, DATEADD(yy, DATEDIFF(yy, 0, GETDATE()) + 1, 0)) AS LastTimeOfYear 
```

**其他时期**

`yy`这种方法有两个很好的方面：良好的性能，并且可以通过将(=year) 的两次出现替换为不同的字符串来轻松更改其他时间段：

```
yy, yyyy    year
qq, q       quarter
mm, m       month
wk, ww      week 
```

（注意几周：开始日期取决于服务器设置。）

**技术细节**

这可以通过计算自 1900 年以来的年数，然后将其添加到零日期 = 1900 年 1 月 1 日。这可以通过替换部分或通过将函数替换为任意年份`DATEDIFF(yy, 0, GETDATE())`来更改为适用于任意日期“年份 - 1900 年。”`GETDATE()``DATEDIFF(...)`

```
 SELECT
   DATEADD(yy, DATEDIFF(yy, 0, '20150301'), 0) AS StartOfYearForMarch2015,
   DATEADD(yy, 2015 - 1900, 0) AS StartOfYearFor2015 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-10-19T20:50:24.557

这是一个相当简单的方法；

```
SELECT DATEFROMPARTS(YEAR(GETDATE()), 1, 1) AS 'First Day of Current Year';
SELECT DATEFROMPARTS(YEAR(GETDATE()), 12, 31) AS 'End of Current Year'; 
```

这并不性感，但它有效。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-18T04:07:06.117

您可以使用函数获取当前年份`DATEPART`，从使用获取的当前日期`getUTCDate()`

```
SELECT 
    '01/01/' + CONVERT(VARCHAR(4), DATEPART(yy, getUTCDate())), 
    '31/12/' + CONVERT(VARCHAR(4), DATEPART(yy, getUTCDate())) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-11T10:19:25.537

只需写：-

```
select convert (date,DATEADD(YEAR,DATEDIFF(YEAR,0,GETDATE()),0)) 
```

年的开始日期。

```
select convert (date,DATEADD(YEAR, DATEDIFF(YEAR,0,GETDATE()) + 1, -1)) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-18T09:22:32.467

Every year has the 1 st as First date and 31 as the last date what you have to do is only attach the year to that day and month for example:-

```
 SELECT '01/01/'+cast(year(getdate()) as varchar(4)) as [First Day],
 '12/31/'+cast(year(getdate()) as varchar(4)) as [Last Day] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-11T14:15:02.333

要获取一年中的第一天和最后一天，可以使用该`CONCAT`功能。结果值可以转换为任何类型。

```
CONCAT(YEAR(Getdate()),'-01-01') FirstOfYear,
CONCAT(YEAR(GETDATE()),'-12-31') LastOfYear 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-12T09:38:08.683

另一种方式：（自 SQL Server 2012 起）

```
SELECT
    DATEFROMPARTS(YEAR(GETDATE()), 1, 1) FirstDay,
    DATEFROMPARTS(YEAR(GETDATE()),12,31) LastDay 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-13T14:47:52.853

对于当年的开始日期：

```
SELECT DATEADD(DD,-DATEPART(DY,GETDATE())+1,GETDATE()) 
```

对于当年的结束日期：

```
SELECT DATEADD(DD,-1,DATEADD(YY,DATEDIFF(YY,0,GETDATE())+1,0)) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-21T08:16:15.223

最好的方法是提取当前年份，然后像这样使用连接：

```
SELECT CONCAT(year(now()), '-01-01') as start, -- fist day of current year
       CONCAT(year(now()), '-31-12') as end;   -- last day of current year 
```

这给了你： `start : 2020-01-01 and end : 2020-31-12` 日期格式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-18T09:03:31.263

看看这个：

```
select convert(varchar(12),(DateAdd(month,(Month(getdate())-1) * -1, DateAdd(Day,(Day(getdate())-1) * -1,getdate()))),103) as StartYear,
       convert(varchar(12),DateAdd(month,12 - Month(getdate()), DateAdd(Day,(31 - Day(getdate())),getdate())),103) as EndYear 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-01T20:11:56.217

```
print Cast('1/1/' + cast(datepart(yyyy, getdate()) as nvarchar(4)) as date) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-11T12:38:42.983

**看起来**您对给定年份的所有操作都很感兴趣，如果确实如此，我建议您使用[YEAR()](https://docs.microsoft.com/en-us/sql/t-sql/functions/year-transact-sql)函数，如下所示：

```
SELECT * FROM `table` WHERE YEAR(date_column) = '2012'; 
```

[DAY()](https://docs.microsoft.com/en-us/sql/t-sql/functions/day-transact-sql)和[MONTH()](https://docs.microsoft.com/en-us/sql/t-sql/functions/month-transact-sql)也是如此。它们也可用于 MySQL/MariaDB 变体，并在 SQL Server 2008 中引入（因此不适用于特定的 2000）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-13T13:42:12.267

```
SELECT DATEADD(DD,-DATEPART(DY,GETDATE())+1,GETDATE()) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-24T07:52:55.300

**获得一年中的第一个日期和最后一个日期的最佳方法是**

```
SELECT CAST(CAST(YEAR(DATEADD(YEAR,-1,GETDATE())) AS VARCHAR) + '-' + '01' + '-' + '01' AS DATE) FIRST_DATE 
```

```
SELECT CAST(CAST(YEAR(DATEADD(YEAR,-1,GETDATE())) AS VARCHAR) + '-' + '12' + '-' + '31' AS DATE) LAST_DATE 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-08-25T20:24:07.303

```
select to_date(substr(sysdate,1, 4) || '01/01'), to_date(substr(sysdate,1, 4) || '12/31') 
from dual 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-04-29T11:10:18.853

在 Microsoft SQL Server (T-SQL) 中，可以按如下方式完成

```
--beginning of year
select '01/01/' + LTRIM(STR(YEAR(CURRENT_TIMESTAMP)))

--end of year
select '12/31/' + LTRIM(STR(YEAR(CURRENT_TIMESTAMP))) 
```

**CURRENT_TIMESTAMP** - 返回执行查询时的 sql server 日期。

**YEAR** - 获取当前时间戳的年份部分。

**STR**，**LTRIM** - 应用这两个函数，以便我们可以将其转换为可以与所需前缀连接的 varchar（在这种情况下，它是一年中的第一个日期或一年中的最后一个日期）。无论出于何种原因，**YEAR**函数生成的结果都带有前缀空格。为了修复它们，我们使用左修剪的**LTRIM**功能。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-12-20T15:58:15.923

如果它到达 1 月 1 日，您可能仍然是去年的日期。

```
select
convert(date, DATEADD(yy, DATEDIFF(yy, 0,  DATEadd(day, -1,getdate())), 0), 103 ) AS StartOfYear,
convert(date, DATEADD(yy, DATEDIFF(yy, 0, DATEDIFF(day, -1,getdate()))+1, -1), 103 )AS EndOfYear 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2016-01-12T10:23:27.343

尝试这个：

```
DATE_FORMAT(NOW(),'01/01/%Y')
DATE_FORMAT(NOW(),'31/12/%Y') 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2013-10-08T09:44:19.833

---Lalmuni演示---

```
create table Users
(
userid int,date_of_birth date
) 
```

---插入值---

```
insert into Users values(4,'9/10/1991')

select DATEDIFF(year,date_of_birth, getdate()) - (CASE WHEN (DATEADD(year, DATEDIFF(year,date_of_birth, getdate()),date_of_birth)) > getdate() THEN 1 ELSE 0 END) as Years, 
MONTH(getdate() - (DATEADD(year, DATEDIFF(year, date_of_birth, getdate()), date_of_birth))) - 1 as Months, 
DAY(getdate() - (DATEADD(year, DATEDIFF(year,date_of_birth, getdate()), date_of_birth))) - 1 as Days,
from users 
```

# c - C - 释放函数中分配的内存

> ID：13437363
> 
> 赞同：6
> 
> 时间：2012-11-18T04:02:10.950
> 
> 标签：c, function, memory, allocation

我有一个分配字符串并返回其指针的函数。当我直接使用它来调用其他函数时，我需要释放内存吗？

例如：

```
char *getRow(){
     char *someString = (char*) malloc(sizeof(char) * 10);
     strcpy(someString , "asdqwezxc");
     return someString;
}

int main(){
     printf("%s", getRow());
} 
```

在该函数中分配的内存会发生什么？有什么方法可以释放它，还是在使用它之前我需要将它存储到某个变量中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T04:06:02.143

即使您已从函数返回，除非您明确这样做，否则不会释放内存。所以你必须存储返回值并调用`free`.

```
int main(){
    char* str = getRow();
    printf("%s", str);
    free(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:08:54.213

您需要将它存储在一个变量中，使用它，然后释放它。如果你不释放它，你会得到内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T04:21:24.117

是的，你需要。malloc 从堆中分配内存，您需要显式释放它。诸如**char *someString**之类的变量是从堆栈中分配的，该堆栈将在函数返回时被释放。我认为您误解了堆栈和堆。

看看这个[堆栈和堆是什么和在哪里](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)

# android - 在运行时安装同一个 apk 的不同版本

> ID：13437364
> 
> 赞同：0
> 
> 时间：2012-11-18T04:02:15.787
> 
> 标签：android, sd-card, android-build

我有以下情况，我有一个 Android 代码库，我从 sdcard 上的数据库读取数据。现在假设我有两个文件夹，`mnt/sdcard/folder1`其中有一个文件夹。有没有一种方法可以构建和安装两个在运行时从相应文件夹和数据库中读取的 apk？代码库是相同的 - 只是在运行时 - 调用了一个 apk ，它知道它必须从第一个文件夹读取，第二个从第二个文件夹读取。两者都可以同时安装。`1.sqlite``mnt/sdcard/folder2``2.sqlite``1.apk and 2.apk``1.apk`

或者

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:04:40.650

我并不完全清楚您要做什么，但是在同一设备上运行两个版本的代码的唯一方法是为两个 .apk 文件设置两个不同的包名称。

将您的通用代码库放入一个库项目中，然后定义两个应用程序项目，每个配置一个。使每个应用程序项目都依赖于公共代码库，并只定义您需要的一些特定于每个配置的东西。

如果您需要同时运行两个应用程序*，*我认为这是唯一的方法。但是，如果您需要一个在运行时可以有选择地以一种或另一种方式运行的应用程序，那么听起来您可以只使用一些运行时标志。

或者，您可以通过服务访问每个数据集，并在运行时动态附加到所需的服务。这是否有意义取决于您要通过这一切来完成什么。

**编辑**另一种方法是为两种行为设置单独的启动图标，每个图标都与应用程序中的不同活动相关联。有关此方法的更多信息，请参阅[此线程](https://stackoverflow.com/questions/3270409/how-do-i-get-multiple-icons-to-launch-different-activities-in-one-application)。

# iphone - iOS的常驻内存和脏内存是什么？

> ID：13437365
> 
> 赞同：8
> 
> 时间：2012-11-18T04:02:28.707
> 
> 标签：iphone, ios, macos, memory-management

有人可以告诉我，什么样的内存是脏的/常驻的，它们来自哪里？常驻内存与Mac OS的“有线内存”含义相同吗？

这是我看到的关于 Mac OS 内存的内容：

> 有线：​​这是指内核代码等。永远不应该从 RAM 中移出的内存。也称为常驻内存。
> 
> Shared ：在两个或多个进程之间共享的内存。这两个进程都会显示此内存量，因此对于实际使用的内存量可能会有些误导。
> 
> Real ：这是 task_info() 报告的应用程序的“真实”内存使用情况 - 当前进程拥有的物理页数的粗略计数。（尺寸）
> 
> Private ：这是进程单独使用的内存，用于驻留内存。(RPRVT)
> 
> 虚拟：进程中映射到任何东西的地址空间总量——无论是用于变量的任意大空间还是任何东西——它并不等同于实际的 VM 使用。（尺寸）
> 
> 活动：当前标记为活动的内存并已使用 RAM。
> 
> 非活动：“不再使用非活动内存并已缓存到磁盘。它将保留在 RAM 中，直到另一个应用程序需要空间。如果您（或您的计算机的客户端）回来，将此信息留在 RAM 中对您有利以后再说。” - Mac OS X 帮助
> 
> Free ：在没有任何数据的情况下实际可用的 RAM 量。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-08T04:05:30.283

快一年了，我想通了。

**干净的记忆**

干净的记忆是可以重新创建的记忆，在 iOS 上它是对以下内容的记忆：

*   系统框架
*   您的应用程序的二进制可执行文件
*   内存映射文件

还要注意这种情况：当你的应用程序链接到一个框架时，干净的内存会随着框架二进制文件的大小而增加。但大多数时候，只有部分二进制文件真正加载到物理内存中。

**脏记忆**

所有不是干净内存的内存都是脏内存，脏内存不能被系统重新创建。

当存在内存压力时，系统会卸载一些干净的内存，当再次需要内存时，系统会重新创建它们。

但是对于脏内存，系统无法卸载它们，而且iOS没有交换机制，所以脏内存会一直保留在物理内存中，直到达到一定的限制，然后你的App就会被终止，所有的内存都会被回收按系统。

**虚拟内存**

```
virtual memory = clean memory + dirty memory. 
```

这意味着虚拟内存是您的应用程序想要的所有内存。

**常驻记忆**

```
resident memory = dirty memory + clean memory that loaded in physical memory 
```

驻留内存是真正加载到物理内存中的内存，它意味着所有脏内存和部分干净内存。

**结论**

在任何时候，这总是正确的：

```
virtual memory == (clean memory + dirty memory) > resident memory > dirty memory 
```

如果您担心您的应用程序占用的物理内存（这是您的应用程序因内存不足而终止的关键原因），您应该主要关注常驻内存。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T06:20:21.980

常驻内存是为您的应用分配的内存。脏内存是由于iOS缺少分页系统而无法自动释放的常驻内存。我在[http://liam.flookes.com/wp/2012/05/03/finding-ios-memory/](http://liam.flookes.com/wp/2012/05/03/finding-ios-memory/)找到了这些信息。那么对于您列出的内存类型，iOS 中的常驻内存更接近真实或私有。据我了解，在 iOS 中您应该最关心的是脏内存，因为它可以确定您的应用程序在后台挂起时是否会在内存不足的情况下被杀死。

# java - 如何在 JAVA 的地图类型中使用 put 方法？

> ID：13437373
> 
> 赞同：0
> 
> 时间：2012-11-18T04:05:28.497
> 
> 标签：java, map

我有一个`Map`类型变量

```
a = new HashMap<String, ArrayList<String>>(); 
```

我的问题是：

1.  例如，现在我有`String b, String c`，如何使用`put()`方法将其放入地图？我不知道如何写表达式。

2.  如果我只想输入一个键，例如`String d`，并且不向值集添加任何字符串，如何编写？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:08:28.450

你可以尝试这样的事情。

```
Map<String, List<Integer>> a = new HashMap<String, List<Integer>>();
Integer i = 100; //say
String b = "str"; //say
List<Integer> list = new ArrayList<Integer>();
list.add(i);
a.put(b,list); 
```

# java - 我如何将Java中句子的第一个字母大写？

> ID：13437377
> 
> 赞同：0
> 
> 时间：2012-11-18T04:06:13.470
> 
> 标签：java

我尝试拆分行中的单词并检查它们是否有句号，但出现错误：

```
falls.falls.falls.Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 6
at Alpha.main(Alpha.java:10) 
```

代码：

```
import java.io.*;
import java.util.*;

public class Alpha
{
    public static void main(String[] args)
    {
        String phrase = "the moon falls. the flowers grew.";
        String beta = "";
        String[] array = phrase.split(" ");
        for (int i = 0; i < array.length; i++)
        {
            if (array[i].endsWith("."))
            {
                array[i + 1] = array[i + 1].substring(0, 1).toUpperCase() + array[i + 1].substring(1);

                beta = beta + array[i];
            }
            System.out.print(beta);
        }
    }
} 
```

（另外我不认为我会这样称呼数组的另一个词，关于如何解决这个问题的任何建议？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:13:44.697

您没有处理输入以 . 结尾的情况`.`。`.`此外，一般句子在下一个句子之后之前可能有一个空格。你也应该考虑到这一点。此外，您可能想看看这个版本[`indexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int,%20int%29)需要一个`fromIndex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:14:04.303

基于问题的代码[正则表达式匹配一个句子](https://stackoverflow.com/questions/5553410/regular-expression-match-a-sentence)

```
import java.util.regex.*;
public class TEST {
    public static void main(String[] args) {
        String subjectString = 
        "This is a sentence. " +
        "So is \"this\"! And is \"this?\" " +
        "This is 'stackoverflow.com!' " +
        "Hello World";
        String[] sentences = null;
        Pattern re = Pattern.compile(
            "# Match a sentence ending in punctuation or EOS.\n" +
            "[^.!?\\s]    # First char is non-punct, non-ws\n" +
            "[^.!?]*      # Greedily consume up to punctuation.\n" +
            "(?:          # Group for unrolling the loop.\n" +
            "  [.!?]      # (special) inner punctuation ok if\n" +
            "  (?!['\"]?\\s|$)  # not followed by ws or EOS.\n" +
            "  [^.!?]*    # Greedily consume up to punctuation.\n" +
            ")*           # Zero or more (special normal*)\n" +
            "[.!?]?       # Optional ending punctuation.\n" +
            "['\"]?       # Optional closing quote.\n" +
            "(?=\\s|$)", 
            Pattern.MULTILINE | Pattern.COMMENTS);
        Matcher reMatcher = re.matcher(subjectString);
        while (reMatcher.find()) {
            String sentence = reMatcher.group();
            sentence = sentence.substring(0,1).toUpperCase() + sentence.substring(1);
            System.out.println(sentence);
        } 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T04:31:50.020

考虑一下：

```
 String phrase = "the moon falls. the flowers grew.";
    char[] a = phrase.toCharArray();
    boolean f = true;
    for (int i = 0; i < a.length; i++) {
        if (f) {
            if (a[i] != ' ') {
                a[i] = Character.toUpperCase(a[i]);
                f = false;
            }
        } else if (a[i] == '.') {
            f = true;
        }
    }
    phrase = new String(a);
    System.out.println(phrase); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T04:11:58.323

我建议在“。”上使用 split()。这样，您可以检查句号后面是否有字符，然后将其大写。

# php - 将表连接到嵌套数组 [PHP/MYSQL]

> ID：13437378
> 
> 赞同：0
> 
> 时间：2012-11-18T04:06:26.090
> 
> 标签：php, mysql, arrays, nested

如何选择连接多个表并将其轻松放入嵌套数组中？

例如

```
Table 1 -School: SchoolID, SchoolName,PrincipalID
Talbe 2 - Principal: PrincipalID,PrincipalName 
```

我想在 PHP 中获得一个嵌套数组，例如

```
"School": [
            {
                "SchoolID": "7",
                "SchoolName": "New",
                "Principal": {
                      "PrincipalID":"1",
                      "PrincipalName":"James"
                }
            } 
```

问题是，如何使用自动方式获取嵌套数组，而不是指定每个字段并手动将其添加到数组中？甚至不知道实际的字段名称，只是将多个表嵌套到一个嵌套数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:09:34.897

查询的结果只能是一维数组。所以换句话说，你不能创建多维结果。您需要在应用程序级别执行此操作，（*使用您自己的逻辑*）但是有一个功能可以帮助您。它被称为**[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)**。它的作用是将其行值连接成单行并用逗号分隔。

*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)
*   [GROP_CONCAT 示例](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)

# php - 在 foreach 循环中使用数组变量

> ID：13437380
> 
> 赞同：2
> 
> 时间：2012-11-18T04:06:28.773
> 
> 标签：php, arrays, foreach

我在尝试解决如何在 foreach 循环中使用函数变量以便我可以执行以下操作但它不起作用时遇到问题。

**$var =**

```
array(7) { [0]=> array(3) { ["listingId"]=> int(532712629) } [1]=> array(3) { ["listingId"]=> int(532712202) } 
```

**有效但不正确：**

```
foreach($var as $varr)
{
  var_dump($varr['id']);
{ 
```

**目标**- 将数组变量作为 foreach 值

```
 foreach($var['id'] as $item)
    {
       if($item === $foo)
      {
      }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:56:45.563

这将遍历 $var 数组中的数组：

```
foreach ($var as $k=> $v){
   foreach ($v as $k2=> $v2){
      echo $k2." ".$v2;
   }
} 
```

在 for each 中，$k 将返回数组键（数字或文本），因为 $v 将返回值。`print_r($array);`在大多数情况下，您可以通过使用来输出数组的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:33:24.463

尝试这个：

```
foreach($var[0] as $varr)
{
  echo $varr->listingid;
} 
```

# java - 遍历 BST 分配

> ID：13437382
> 
> 赞同：0
> 
> 时间：2012-11-18T04:06:44.170
> 
> 标签：java

我正在编写一种以遍历顺序打印 BST 的方法。另外，为了表示每个节点的深度，我希望在单词中放置一个制表符或“/t”字符串来表示深度。问题是当我运行代码时，我得到了结果：

[图片 http://neuropod.net/imagehost/uploads/9d94c563260731cb024df2801f899f3c.png](http://neuropod.net/imagehost/uploads/9d94c563260731cb024df2801f899f3c.png)

它不会打印出最后一个元素，并且时间没有与最差的缩进相同。我在想，也许我的错误是我不允许尽可能多地访问 else 循环，因为我希望打印出这样的东西

[图片 http://neuropod.net/imagehost/uploads/110cf543dd0f141c3ad1b9b1cb9cf5ed.png](http://neuropod.net/imagehost/uploads/110cf543dd0f141c3ad1b9b1cb9cf5ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:09:51.587

要打印选项卡，请使用`"\t"`（注意，这是反斜杠）。 `"\t"`被称为[“转义序列”](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)。

# javascript - 如何在不使用 hasClass() 的情况下检查表行是否具有类名？

> ID：13437385
> 
> 赞同：2
> 
> 时间：2012-11-18T04:07:28.410
> 
> 标签：javascript, jquery

我需要检查表行 (TR) 是否按名称具有类。到目前为止，我有以下内容：

```
var myClass = "myClass";

//only myClass if it doesn't exist already
if (!(rowGet.className == "myClass") || !(rowGet.className == "myClass anotherClass")) {
     if (rowGet) { // only add the class if TR exists
         rowGet.className = myClass;
     }
} 
```

rowGet 是表中的 TR。当我尝试 hasClass(myClass) 时，我收到一条错误消息，提示 HTMLTableElement 没有方法 hasClass。是的，我引用了 jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T04:09:22.603

你必须用 jQuery 包装你的元素：

```
$(rowGet).hasClass('myclass'); 
```

* * *

实际上，不需要先检查它是否已经应用了类，只需使用`addClass`：

```
$(rowGet).addClass('myclass'); 
```

如果元素不存在，它甚至不会抱怨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T04:09:42.757

尝试

```
$(rowGet).hasClass("myClass"); 
```

# ruby-on-rails - rails rspec电子邮件不同的过程

> ID：13437386
> 
> 赞同：0
> 
> 时间：2012-11-18T04:08:02.480
> 
> 标签：ruby-on-rails, email, rspec

我正在测试我的控制器规格的电子邮件发送，但测试无法检测到正在发送电子邮件。我可以在日志中看到它，但测试无法看到它。我怀疑测试是在与电子邮件不同的线程中执行的，因此测试无法看到它。有任何想法吗？

控制器：

```
def update
  if @task.save!
    Emailer.send_task_email(@task.creator, :task_assigned, @task.project, @task).deliver
  end
end 
```

控制器规格：

```
it 'emails the creator' do
  john = build(:user)
  task = create(:task, :creator => john, project: project)

  put :update, { :id => task.to_param }

  Emailer.should_receive(:send_task_email).with(task.creator, :task_assigned, task.project, task)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:21:43.997

将您的`Emailer.should_receive`线路向上移动到您的线路上方`put :update`。在调用将调用它的操作之前，您需要告诉它期待该调用。

# xamarin.ios - 带有 MonoTouch 的方向敏感 iOS 应用

> ID：13437387
> 
> 赞同：0
> 
> 时间：2012-11-18T04:08:12.993
> 
> 标签：xamarin.ios

我目前正在尝试构建一个对方向敏感的 iOS 应用程序 - 当我旋转应用程序时，我希望改变视图。

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {           
        new UIAlertView("DEBUG", "test", null, "OK", null).Show ();

        // Return true for supported orientations
        if (UserInterfaceIdiomIsPhone) {
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        } else {
            return true;
        }
    } 
```

我插入了 UIAlert 来测试这是否真的被检测到，但不幸的是没有。我想知道是否可以就此获得任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:07:33.930

Apple 更改了 ios6 中的旋转 api - 请参阅[Monotouch.Dialog IOS 6 Split view Rotation issue](https://stackoverflow.com/questions/12805250/monotouch-dialog-ios-6-rotation-issue)以获得更多帮助（包括一些 MonoTouch）

# html - 用花车而不是桌子排列东西？

> ID：13437401
> 
> 赞同：3
> 
> 时间：2012-11-18T04:09:44.750
> 
> 标签：html, css

我了解浮动如何有助于将元素彼此并排放置并基本上缩小以适应，但是如何实现类似表格的外观

```
Column 1        |        Column 2        |        Column 3
Column 4 Bigger |        Column 5        |        Column 6 
```

请注意第一组列如何调整以适应最大元素的长度？那么如果第 4 列比 1 宽，那么 1 会自动变宽吗？到目前为止，我能做到这一点的唯一方法是使用 display: table 和 display: table-cell，但它有点不稳定，因为我必须设置特定的宽度等。除非我做错了什么，否则表格可能是最好的做这种事情的方法......在一个没有表格的网络中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:59:22.447

希望这能回答你的问题:)：

```
<style>
.clear{
clear:both;
}

.column {
float:left;
height :20px;
width: auto ;
margin:5px;
display :block;
}
</style>

<div id = "Column 1 " class="column">
cell 1
<div class="clear"></div>
cell 4 Bigger
<div class="clear"></div>
cell 7
</div>

<div id = "Column 2 " class="column">
Cell 2
<div class="clear"></div>
Cell 5 
<div class="clear"></div>
Cell 8 
</div>

<div id = "Column 3 " class="column">
Cell 3
<div class="clear"></div>
Cell 6 
<div class="clear"></div>
Cell 9 
</div> 
```

**编辑** 添加边框也很简单。您可以查看该网址： [http ://www.bernzilla.com/design/tables/table.html](http://www.bernzilla.com/design/tables/table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:53:25.353

没有办法单独使用浮动来使第 1 列的宽度取决于第 4 列的宽度更大（即，随着第 4 列更宽，它变得更宽）。

相反，您可能希望将 Column 1 和 Column 4 Wider 包含在浮动容器中，然后从 Columns 1 和 4 中删除浮动。同样，对 2 和 5 以及 3 和 6 执行相同的操作。

# python - 如何从 Python 脚本中运行 Scrapy

> ID：13437402
> 
> 赞同：84
> 
> 时间：2012-11-18T04:09:49.353
> 
> 标签：python, web-scraping, web-crawler, scrapy

我是 Scrapy 的新手，我正在寻找一种从 Python 脚本运行它的方法。我发现 2 个来源可以解释这一点：

[http://tryolabs.com/Blog/2011/09/27/calling-scrapy-python-script/](http://tryolabs.com/Blog/2011/09/27/calling-scrapy-python-script/)

[http://snipplr.com/view/67006/using-scrapy-from-a-script/](http://snipplr.com/view/67006/using-scrapy-from-a-script/)

我不知道应该把蜘蛛代码放在哪里以及如何从主函数中调用它。请帮忙。这是示例代码：

```
# This snippet can be used to run scrapy spiders independent of scrapyd or the scrapy command line tool and use it from a script. 
# 
# The multiprocessing library is used in order to work around a bug in Twisted, in which you cannot restart an already running reactor or in this case a scrapy instance.
# 
# [Here](http://groups.google.com/group/scrapy-users/browse_thread/thread/f332fc5b749d401a) is the mailing-list discussion for this snippet. 

#!/usr/bin/python
import os
os.environ.setdefault('SCRAPY_SETTINGS_MODULE', 'project.settings') #Must be at the top before other imports

from scrapy import log, signals, project
from scrapy.xlib.pydispatch import dispatcher
from scrapy.conf import settings
from scrapy.crawler import CrawlerProcess
from multiprocessing import Process, Queue

class CrawlerScript():

    def __init__(self):
        self.crawler = CrawlerProcess(settings)
        if not hasattr(project, 'crawler'):
            self.crawler.install()
        self.crawler.configure()
        self.items = []
        dispatcher.connect(self._item_passed, signals.item_passed)

    def _item_passed(self, item):
        self.items.append(item)

    def _crawl(self, queue, spider_name):
        spider = self.crawler.spiders.create(spider_name)
        if spider:
            self.crawler.queue.append_spider(spider)
        self.crawler.start()
        self.crawler.stop()
        queue.put(self.items)

    def crawl(self, spider):
        queue = Queue()
        p = Process(target=self._crawl, args=(queue, spider,))
        p.start()
        p.join()
        return queue.get(True)

# Usage
if __name__ == "__main__":
    log.start()

    """
    This example runs spider1 and then spider2 three times. 
    """
    items = list()
    crawler = CrawlerScript()
    items.append(crawler.crawl('spider1'))
    for i in range(3):
        items.append(crawler.crawl('spider2'))
    print items

# Snippet imported from snippets.scrapy.org (which no longer works)
# author: joehillen
# date  : Oct 24, 2010 
```

谢谢你。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2015-07-13T01:39:37.167

所有其他答案均参考 Scrapy v0.x。根据[更新的文档](http://doc.scrapy.org/en/1.0/topics/practices.html)，Scrapy 1.0 要求：

```
import scrapy
from scrapy.crawler import CrawlerProcess

class MySpider(scrapy.Spider):
    # Your spider definition
    ...

process = CrawlerProcess({
    'USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'
})

process.crawl(MySpider)
process.start() # the script will block here until the crawling is finished 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-05-31T08:12:31.357

我们可以简单地使用

```
from scrapy.crawler import CrawlerProcess
from project.spiders.test_spider import SpiderName

process = CrawlerProcess()
process.crawl(SpiderName, arg1=val1,arg2=val2)
process.start() 
```

`__init__`在具有全局范围的蜘蛛函数中使用这些参数。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-10T21:16:36.223

虽然我没有尝试过，但我认为可以在[scrapy 文档](http://scrapy.readthedocs.org/en/0.16/topics/practices.html)中找到答案。直接引用它：

```
from twisted.internet import reactor
from scrapy.crawler import Crawler
from scrapy.settings import Settings
from scrapy import log
from testspiders.spiders.followall import FollowAllSpider

spider = FollowAllSpider(domain='scrapinghub.com')
crawler = Crawler(Settings())
crawler.configure()
crawler.crawl(spider)
crawler.start()
log.start()
reactor.run() # the script will block here 
```

据我所知，这是图书馆的一项新发展，它使一些早期的在线方法（例如问题中的方法）过时了。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-09-27T21:45:55.187

在scrapy 0.19.x 中你应该这样做：

```
from twisted.internet import reactor
from scrapy.crawler import Crawler
from scrapy import log, signals
from testspiders.spiders.followall import FollowAllSpider
from scrapy.utils.project import get_project_settings

spider = FollowAllSpider(domain='scrapinghub.com')
settings = get_project_settings()
crawler = Crawler(settings)
crawler.signals.connect(reactor.stop, signal=signals.spider_closed)
crawler.configure()
crawler.crawl(spider)
crawler.start()
log.start()
reactor.run() # the script will block here until the spider_closed signal was sent 
```

注意这些行

```
settings = get_project_settings()
crawler = Crawler(settings) 
```

没有它，您的蜘蛛将不会使用您的设置，也不会保存项目。我花了一段时间才弄清楚为什么文档中的示例没有保存我的项目。我发送了一个拉取请求来修复文档示例。

这样做的另一种方法是直接从您的脚本中调用命令

```
from scrapy import cmdline
cmdline.execute("scrapy crawl followall".split())  #followall is the spider's name 
```

从我在这里的第一个答案中复制了这个答案： [https ://stackoverflow.com/a/19060485/1402286](https://stackoverflow.com/a/19060485/1402286)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-12-02T05:01:16.133

当需要在一个python脚本中运行多个爬虫时，需要谨慎处理reactor停止，因为reactor只能停止一次，不能重新启动。

但是，我在做我的项目时发现使用

```
os.system("scrapy crawl yourspider") 
```

是最简单的。这将使我免于处理各种信号，尤其是当我有多个蜘蛛时。

如果性能是一个问题，您可以使用多处理来并行运行您的蜘蛛，例如：

```
def _crawl(spider_name=None):
    if spider_name:
        os.system('scrapy crawl %s' % spider_name)
    return None

def run_crawler():

    spider_names = ['spider1', 'spider2', 'spider2']

    pool = Pool(processes=len(spider_names))
    pool.map(_crawl, spider_names) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-22T06:46:31.310

这是对 [Scrapy 在使用 crawlerprocess 运行时抛出错误的改进](https://stackoverflow.com/questions/53033791/scrapy-throws-an-error-when-run-using-crawlerprocess)

和[https://github.com/scrapy/scrapy/issues/1904#issuecomment-205331087](https://github.com/scrapy/scrapy/issues/1904#issuecomment-205331087)

首先创建您常用的蜘蛛以成功运行命令行。它应该运行并导出数据或图像或文件非常重要

结束后，就像粘贴在我的程序中蜘蛛类定义上方和 __name __ 下方一样调用设置。

它将获得“from scrapy.utils.project import get_project_settings”未能做到的必要设置，这是许多人推荐的

上面和下面的部分应该在一起。只有一个不跑。Spider 将在 scrapy.cfg 文件夹中运行，而不是在任何其他文件夹中运行

版主可展示树状图以供参考

```
#Tree
[enter image description here][1]

#spider.py
import sys
sys.path.append(r'D:\ivana\flow') #folder where scrapy.cfg is located

from scrapy.crawler import CrawlerProcess
from scrapy.settings import Settings
from flow import settings as my_settings

#----------------Typical Spider Program starts here-----------------------------

          spider class definition here

#----------------Typical Spider Program ends here-------------------------------

if __name__ == "__main__":

    crawler_settings = Settings()
    crawler_settings.setmodule(my_settings)

    process = CrawlerProcess(settings=crawler_settings)
    process.crawl(FlowSpider) # it is for class FlowSpider(scrapy.Spider):
    process.start(stop_after_crawl=True) 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-07-07T09:38:19.247

```
# -*- coding: utf-8 -*-
import sys
from scrapy.cmdline import execute

def gen_argv(s):
    sys.argv = s.split()

if __name__ == '__main__':
    gen_argv('scrapy crawl abc_spider')
    execute() 
```

将此代码放在可以从命令行运行的路径中`scrapy crawl abc_spider`。（用 Scrapy 测试==0.24.6）

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2017-12-27T09:33:13.310

如果你想运行一个简单的爬取，只需运行命令很容易：

爬虫爬。还有其他选项可以将您的结果导出为以某些格式存储，例如：Json、xml、csv。

scrapy crawl -o result.csv 或 result.json 或 result.xml。

你可能想试试

# r - 一张图表中两个不同数据的箱线图

> ID：13437404
> 
> 赞同：0
> 
> 时间：2012-11-18T04:10:03.460
> 
> 标签：r, ggplot2, boxplot

我有一个`df`包含 2 列的数据框：`A`, `B`.

我想要一个包含`A`和`B`在 Y 轴上的图表。注意：我不想合并`A`and `B`。他们每个人都有自己的结果。

因此，对于 x 轴的每个单个值，所需的输出应该包含两个并排的框（一个 for`A`和一个 for `B`）（偏移量 = 0）。

样本`df`：

```
A      B

200\.  30\.        
100\.  26\.               
27\.   25\.       
25\.   22\.        
40\.   21\.       
20\.   18\. 
```

我不想使用重塑或交互。我宁愿只将 ggplot 与箱线图一起使用。

```
ReadData<-read.csv("data.csv", header=T)
A<-ggplot(ReadData,aes(A)+
   geom_boxplot(ReadData$A)

B<-ggplot(ReadData,aes(B)+ 
   geom_boxplot(ReadData$B)

print(A)
print(B) 
```

它不工作？它抱怨映射AES！有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:10:42.023

数据：

```
df <- read.table(text="A      B
200\.  30\.        
100\.  26\.               
27\.   25\.       
25\.   22\.        
40\.   21\.       
20\.   18\. ", header = TRUE) 
```

以下代码生成条形图。不可能生成具有单个值的箱线图。

```
library(ggplot2)

ggplot(stack(df), aes(x = rownames(df), y = values, fill = ind)) + 
  geom_bar(stat="identity", position="dodge") 
```

![在此处输入图像描述](../Images/f54984a37a031268e6485069746bcee7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-29T15:05:01.763

基于上一个答案，并生成箱线图

```
df <- read.table(text="A      B
200\.  30\.        
100\.  26\.               
27\.   25\.       
25\.   22\.        
40\.   21\.       
20\.   18\. ", header = TRUE)

ggplot(
    data = df %>% 
      pivot_longer( 
        cols = c(A, B),
        names_to = "x",
        values_to = "y",
      ),
    aes(x = x, y = y, fill = x)) +
  geom_boxplot(outlier.colour = "red", show.legend = FALSE) 
```

[![箱线图示例](../Images/7ed474a69627253f5277d29ce446a3b0.png)](https://i.stack.imgur.com/Wd02G.png)

您可能需要对比例进行一些调整，添加抖动点等。

# c# - 当我的对象不再被引用时，为什么它的事件会继续运行？

> ID：13437405
> 
> 赞同：0
> 
> 时间：2012-11-18T04:10:16.453
> 
> 标签：c#, events, event-handling, publish-subscribe

假设我正在制作游戏并且有一个基`Buff`类。我也可能有一个名为的子类`ThornsBuff`订阅`Player`该类的`Damaged`事件。

`Player`可能有一个 s 列表，其中`Buff`一个可能是`ThornsBuff`。例如：

## 测试班

```
Player player = new Player();
player.ActiveBuffs.Add(new ThornsBuff(player)); 
```

## ThornsBuff 类

```
public ThornsBuff(Player player)
{
    player.DamageTaken += player_DamageTaken;
}

private void player_DamageTaken(MessagePlayerDamaged m)
{
    m.Assailant.Stats.Health -= (int)(m.DamageAmount * .25);
} 
```

这都是为了说明一个例子。如果我要从列表中删除 buff，则事件不会分离。即使玩家不再拥有 buff，事件仍会像他一样执行。

现在，我可以有一个`Dispel`方法来取消注册该事件，但这会迫使开发人员调用`Dispel`除了`Buff`从列表中删除之外。如果他们忘记了，增加耦合等怎么办？

`Buff`我不明白为什么从列表中删除事件时事件不会自动分离。`Buff`唯一存在于列表中，这是它的一个参考。删除后不应该分离事件吗？

我尝试将分离代码添加到终结器中，`Buff`但这也没有解决它。即使事件有 0 个引用，该事件仍在运行。我想这是因为垃圾收集器还没有运行？有没有办法让它自动和即时，这样当对象没有引用时，它的所有事件都是未注册的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:47:30.513

无论 Buff 是否在 ActiveBuffs 列表中，都会继续调用事件 (player_DamageTaken)。这是因为当您运行 DamageTaken += player_DamageTaken 时，它会创建一个从 player.DamageTaken 到**该 ThornsBuff 实例**及其 player_DamageTaken 方法的引用。（否则，运行时如何知道在哪个 ThornsBuff 实例上调用 player_DamageTaken？）

该引用将继续存在，直到您调用 player.DamageTaken **-** = player_DamageTaken。**您还将**Buff 添加到 ActiveBuffs的事实只是添加了对 buff 的*另一个*引用，这在技术上不是必需的（但在我看来，这是一种很好的形式，因为我不喜欢挂起未引用的事件处理程序）。

现在您可能想知道如何在不导致开发人员调用额外的 Dispel 或 Dispose 方法的情况下删除事件处理程序，对此有一些建议：

1.  在 player_DamageTaken 的开头检查是否 player.ActiveBuffs.Contains(this)，如果没有，则调用 player.DamageTaken -= player_DamageTaken 并返回。这样做的缺点是每次受到伤害时你都在搜索整个增益列表。

2.  使 ActiveBuffs 成为 ObservableCollection（或类似的东西），可以在从列表中删除 buff 时进行监听。当它们存在时，您可以自动调用 buff.Dispel，这样开发人员就不必记得调用它了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:57:35.150

> 我不明白的是为什么当 Buff 从列表中删除时事件不会自动分离。

因为将 Buff 附加到列表中并不是附加事件的原因。该事件已附加，因为您在构造函数中附加了它。玩家类实例现在在其 DamangeTake 事件中也有对该 buff 的引用，因此从 Buffs 列表中删除它不足以让对象被垃圾收集......因此 buff 继续存在。

有人想知道你为什么在这里使用事件。为什么不在播放器中使用代码来遍历列表中的每个 buff 并运行定义为接口一部分的某些方法，并将损坏作为参数或返回值。这会做更多你正在寻找的东西。

或者，在您当前删除 buff 的任何地方，您还需要代码来取消订阅它的事件。

# java - Java解析实体对象中的原子xml

> ID：13437408
> 
> 赞同：1
> 
> 时间：2012-11-18T04:11:22.893
> 
> 标签：java, xml, xml-parsing, xml-serialization, atom-feed

我正在开发一个 Java 客户端应用程序，它将使用不同服务器的 REST Web 服务在服务器之间交换资源。在大多数情况下，资源是[atom](http://www.ietf.org/rfc/rfc4287.txt) xml 的形式。但是当考虑更多系统时，情况可能会有所不同。

但是，我需要的是一种可以将 XML 作为对象访问的方法。例如，一个原子可能代表一个**`person`**，而我的客户端应用程序有一个**`Person`**对应于该 xml 的类。现在我需要一种将 XML 转换为该对象的方法。

**复杂性：**

1.  XML 将包含许多非原子标准节点。
2.  资源可以嵌套。就像一个`person`原子可能包含`friends`在
    *   atom:content: 调用 person.friend 将返回`friend`对象。
    *   原子：饲料。调用 person.friends 将返回朋友数组。
3.  需要双向转换。喜欢
    *   XML => 对象（我刚刚描述的）
    *   对象 => XML。客户端应用程序将填充对象以发送到系统。

**我到目前为止的调查：**

1.  **使用基于 DOM 的 xml 库：**我的类可以包含每个属性的 xpath，并使用任何基于 DOM 的 xml 解析器从 XML 中获取值并填充对象。我试过 XOM。

2.  **Jaxb：**我对简单的 XML 应用了编组和解组，但不确定其健壮性。

3.  **Apache Abdera：**我的朋友最近遇到了。似乎它默认支持标准原子属性。但是对于非原子标签，需要做多少额外的工作呢？

**问题：**

1.  实现上述目标的首选方法是什么？
2.  任何指导方针都会更加明显。

# java - Android 日历 API 与日历提供程序 API

> ID：13437419
> 
> 赞同：6
> 
> 时间：2012-11-18T04:13:16.463
> 
> 标签：java, android, api, calendar

我对两者之间的区别有点困惑。日历 API 的示例应该位于此处：[http](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html) ://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html ，但作者本人建议使用日历提供程序API，详细信息在这里：http: [//developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)。

有人可以向我解释两者之间的区别吗，哪个更适合我用于简单的日历应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T09:10:38.160

我没有经历很多谷歌api代码，但我认为如果你使用谷歌api，你将不得不处理日历的网络同步，但是由于同步已经由android日历提供程序完成，你可以使用日历提供程序使用查询、插入、删除语句，而不是学习 google api 规范。

此外，我想使用 google api 代码，您将不得不处理 oauth 身份验证。在日历提供者的情况下不需要

所以提供者应该更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T10:25:17.520

CalendarProvider 是内置的，因此您不必处理网络、身份验证等。但它是一种内容提供程序，因此您必须使用 sqlite 查询和游标映射来收集数据。试试[这个库](http://howrobotswork.wordpress.com/2014/01/02/calendarwrapper-a-simple-and-uncomplete-library-above-the-calendarprovider/)，它会为你完成所有的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-05T12:02:23.480

另一件要提的事情：Calendar Provider 不支持事件附件，因此如果您需要使用附件，则必须通过 Google Calendar API 处理它们。

# c++ - 从 C++ 中的内存中的 libvorbis 音频解码

> ID：13437422
> 
> 赞同：11
> 
> 时间：2012-11-18T04:13:51.903
> 
> 标签：c++, oggvorbis, vorbis

给定 C++ 中的编码缓冲区，使用 oggvorbis 结构解码已经在内存中的数据的步骤是什么？

无法使用 OggVorbis_File，因为资产在压缩档案中。

我正在尝试研究必要的结构和方法，但我对音频编码和解码还很陌生。

任何可以帮助我进一步阅读的资源也受到赞赏！

我应该澄清一下，我打算使用解码后的数据流入 OpenAL。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T16:51:50.737

回答我自己的问题。

这可以通过向 vorbis 提供自定义回调来完成。

```
struct ogg_file
{
    char* curPtr;
    char* filePtr;
    size_t fileSize;
};

size_t AR_readOgg(void* dst, size_t size1, size_t size2, void* fh)
{
    ogg_file* of = reinterpret_cast<ogg_file*>(fh);
    size_t len = size1 * size2;
    if ( of->curPtr + len > of->filePtr + of->fileSize )
    {
        len = of->filePtr + of->fileSize - of->curPtr;
    }
    memcpy( dst, of->curPtr, len );
    of->curPtr += len;
    return len;
}

int AR_seekOgg( void *fh, ogg_int64_t to, int type ) {
    ogg_file* of = reinterpret_cast<ogg_file*>(fh);

    switch( type ) {
        case SEEK_CUR:
            of->curPtr += to;
            break;
        case SEEK_END:
            of->curPtr = of->filePtr + of->fileSize - to;
            break;
        case SEEK_SET:
            of->curPtr = of->filePtr + to;
            break;
        default:
            return -1;
    }
    if ( of->curPtr < of->filePtr ) {
        of->curPtr = of->filePtr;
        return -1;
    }
    if ( of->curPtr > of->filePtr + of->fileSize ) {
        of->curPtr = of->filePtr + of->fileSize;
        return -1;
    }
    return 0;
}

int AR_closeOgg(void* fh)
{
    return 0;
}

long AR_tellOgg( void *fh )
{
    ogg_file* of = reinterpret_cast<ogg_file*>(fh);
    return (of->curPtr - of->filePtr);
} 
```

用法

```
ov_callbacks callbacks;
ogg_file t;
t.curPtr = t.filePtr = compressedData;
t.fileSize = compressedDataSize;

OggVorbis_File* ov = new OggVorbis_File;
mOggFile = ov;
memset( ov, 0, sizeof( OggVorbis_File ) );

callbacks.read_func = AR_readOgg;
callbacks.seek_func = AR_seekOgg;
callbacks.close_func = AR_closeOgg;
callbacks.tell_func = AR_tellOgg;

int ret = ov_open_callbacks((void *)&t, ov, NULL, -1, callbacks);

vorbis_info* vi = ov_info(ov, -1);
assert(vi);

/* compressed data is available to use, to uncompress look into ov_read */ 
```

特别感谢 Doom3 GPL 源提供的大部分帮助，可以在以下位置查看：[这里](https://github.com/TTimo/doom3.gpl/blob/master/neo/sound/snd_decoder.cpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-03T16:17:55.183

您也不能重新发明轮子并[`fmemopen`](http://man7.org/linux/man-pages/man3/fmemopen.3.html)像这样使用：

```
FILE* memfile = fmemopen(data, len, "r"); 
```

指向内存的指针在哪里`data`开始，并且`len`是数据的长度。然后传递`memfile`给`ov_open`喜欢的常规`FILE`对象。

然而，有一个缺点：这个函数似乎是 linux 特有的（但它可以在 arduino 中找到，所以我对它的状态有点困惑），所以你在其他系统上没有它。但是它们有一些实现（检查[libconfuse](https://github.com/martinh/libconfuse/blob/master/src/fmemopen.c)的 window 或[apple OSes](https://github.com/tmm1/fmemopen)）。

# c - Pop() 方法总是给出堆栈中的第一个元素而不删除它

> ID：13437423
> 
> 赞同：0
> 
> 时间：2012-11-18T04:13:56.207
> 
> 标签：c, tree, stack, expression

我的程序应该读取后缀表达式并使用树实现将其转换为中缀和前缀。**pop()**方法总是给出第一个元素而不删除它，我不知道为什么。任何帮助将不胜感激。

```
 //tree structur
        typedef struct asa {
          enum {  number_exp,sous_exp_op } type;
          union {
                  int                                    child;
                  struct {
                           struct asa*      left;
                           struct asa*      right;
                           char              oper; }       tree;
              } op;
        } asa;

        //stack
        typedef struct stack {
            int size;

                struct {
                  asa *  element;
                  struct stack* link;
                }e;

        } stack;

        struct stack *top;

        (...)

       asa * pop(){
        asa* e ;
        stack * temp;
        if(top->size == 0 ){
            printf("ERR0R : empty stack\n");
            exit (EXIT_FAILURE);
        }
        else if (top->size >= 1){
            temp = top->e.link;
            e= top->e.element;

            top = temp;
        }
        return e;
    }

void push(asa* node ){
    if(top->size == 0 ){
        top->e.element = node;
        top->e.link = NULL;
        top->size++;
    }
    else if (top->size > 0){
        pile * next = (pile*) malloc(sizeof(top));
        next = top;
        top->e.element = node;
        top->e.link = next;
        top->size++;
    }
} 
```

日志快照：

![在此处输入图像描述](../Images/078d1868db1ed2157516f9795ec21b64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:23:31.993

您的直接问题是，`next`一旦分配它，您就会丢弃它，`top->size > 0`并且您正在为指针而不是整个结构分配大小。要修复它们，请在函数末尾替换为并修复`next = top`调用：`top = next``sizeof`

```
 else if (top->size > 0){
        pile * next = (pile*) malloc(sizeof(*top));
        next->e.element = node;
        next->e.link = top;
        next->size = top->size + 1;
        top = next;
    } 
```

此外，堆栈的这种实现感觉不必要地复杂且容易出错。如果您需要堆栈大小，您应该独立于链表的节点来维护大小，而不是在每个单独的节点中。标准的链表习惯用法是将空列表（堆栈）表示为 NULL，因此 push 和 pop 都不需要任何额外的代码来检查空堆栈：

```
typedef struct stack {
    asa *element;
    struct stack *next;
} stack;

void push(stack **head, asa *elem)
{
  stack *new_head = malloc(sizeof(stack));
  new_head->next = head;
  new_head->elem = elem;
  *head = new_head;
}

asa *pop(stack **head)
{
  stack *old_head = *head;
  asa *top_elem = old_head->elem;
  *head = old_head->next;
  free(old_head);
  return top_elem;
} 
```

# javascript - Javascript：关闭弹出窗口

> ID：13437425
> 
> 赞同：0
> 
> 时间：2012-11-18T04:14:05.787
> 
> 标签：javascript, popup

我是一个 JS 菜鸟，所以如果这个问题太“菜鸟”，请原谅。

注意：函数很长，但只需向下滚动直到看到 // ***** ** *** ** *** ****因为这是重要的部分。

我的功能：

```
function ShowWindowN(userId,url,width,height,courseId) {
  var iev=getIEVer();
  if(iev>=6&&iev<8){
    width+=16*1;
  }
  var w=screen.availWidth<width?screen.availWidth:width;
  var csCookie=readCookie('course_settings_'+userId);
  var found=false;
  if(csCookie!=null){
    csCookie=eval('({'+csCookie.replace(/&/g,',').replace(/=/g,':')+'})');
    if(csCookie[courseId]!=null){
      height+=1*csCookie[courseId].height;
      found=true;
    }
  }
  if(!found){
    var plCookie=readCookie('player_settings_'+userId);
    if(plCookie!=null){
      plCookie=eval('({'+plCookie.replace(/&/g,',').replace(/=/g,':')+'})');
      height+=1*plCookie.window_extra_height;
    }else{
      height+=16;
    }
  }
  var h=screen.availHeight<height?screen.availHeight:height;
  var left = (screen.availWidth/2)-(w/2);
  //************
  objMovieWindow=window.open(url, "movieWindow", "width=" + w + ", height=" + h + ", top=0, left="+left+", status=false, toolbar=false, menubar=false, location=false, directories=false, scrollbars=1, resizable=1"); 
  objMovieWindow.focus();
  //alert(objMovieWindow.name);
}; 
```

如果您查看最后一行第二行的 alert() ，它不起作用，它会给我一个“权限被拒绝”错误。我也有一个函数，上面写着“close_me()”：

```
objMovieWindow.close(); 
```

但这不起作用，并给我一个“未定义”的错误。基本上，我加载页面，然后单击链接以启动弹出窗口，然后重新加载父页面，并通过单击父页面上的链接来关闭弹出窗口。

请告诉我如何关闭该死的弹出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:23:51.410

When you reload the page you are losing the reference to `objMovieWindow`, so you won't be able to call `objMovieWindow.close()`. You'll have to avoid reloading the page if you want to close the window.

**UPDATE**

One work around would be to call `window.open()` again with the same name, and call `close()` on the reference returned from that.

# python - imdbpy2sql 必须提供 URI fpr 数据库连接

> ID：13437430
> 
> 赞同：0
> 
> 时间：2012-11-18T04:14:58.177
> 
> 标签：python, database, sqlite

我提供以下命令，请告诉我哪里出错了。

```
**$ imdbpy2sql.py -d /home/santoshvm/Documents/IMDB DataBase/DataFiles -u URI sqlite:////home/santoshvm/Documents/IMDB DataBase/SQLite Database File/IMDB.sqlite --sqlite-transactions**
2012-11-17 20:11:34,585 WARNING [imdbpy.parser.sql.aux] /usr/local/lib/python2.7/dist-packages/IMDbPY-4.9-py2.7.egg/imdb/parser/sql/__init__.py:125: Unable to import the cutils.ratcliff function.  Searching names and titles using the "sql" data access system will be slower.
2012-11-17 20:11:34,586 WARNING [imdbpy.parser.sql.aux] /usr/local/lib/python2.7/dist-packages/IMDbPY-4.9-py2.7.egg/imdb/parser/sql/__init__.py:332: Unable to import the cutils.soundex function.  Searches of movie titles and person names will be a bit slower.
You must supply the URI for the database connection
imdbpy2sql.py usage:
    /usr/local/bin/imdbpy2sql.py -d /directory/with/PlainTextDataFiles/ -u URI [-c /directory/for/CSV_files] [-o sqlobject,sqlalchemy] [-i table,dbm] [--CSV-OPTIONS] [--COMPATIBILITY-OPTIONS] 
```

**给出 URI 的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:00:27.557

问题是您的路径中有空格：

```
home/santoshvm/Documents/IMDB DataBase/SQLite Database File/IMDB.sqlite 
```

您应该重命名目录或使用 "\" 转义空格：

```
home/santoshvm/Documents/IMDB\ DataBase/SQLite\ Database\ File/IMDB.sqlite 
```

# spring - Spring中的错误NoSuchFieldException是什么意思？

> ID：13437432
> 
> 赞同：4
> 
> 时间：2012-11-18T04:15:11.853
> 
> 标签：spring, security

```
2723 [Thread-1] DEBUG org.springframework.core.env.StandardEnvironment  - Adding [systemEnvironment] PropertySource with lowest search precedence
2723 [Thread-1] DEBUG org.springframework.core.env.StandardEnvironment  - Initialized StandardEnvironment with PropertySources [systemProperties,systemEnvironment]
2725 [Thread-1] DEBUG org.springframework.beans.BeanUtils  - No property editor [org.springframework.security.web.authentication.logout.LogoutSuccessHandlerEditor] found for type org.springframework.security.web.authentication.logout.LogoutSuccessHandler according to 'Editor' suffix convention
2726 [Thread-1] DEBUG org.springframework.beans.TypeConverterDelegate  - **Field [/admin/login] isn't an enum value**
java.lang.NoSuchFieldException: /admin/login
    at java.lang.Class.getField(Class.java:1537)
    at org.springframework.beans.TypeConverterDelegate.attemptToConvertStringToEnum(TypeConverterDelegate.java:287)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:218)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:92)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:451) 
```

我`/admin/login`在一个控制器中有一个映射：

```
@RequestMapping(value="/admin/login", method=RequestMethod.GET)
public ModelAndView getLoginPage(@RequestParam(value="failedAttempt", required=false) boolean failedAttempt, ModelMap model) { 
```

除此之外，该字符串在`spring-security.xml`.

当我的服务器启动时出现此错误。我什至不会`/admin/login`翻页。

我的安全 xml。

```
 <security:intercept-url pattern="/admin/login" access="permitAll"/>
    <security:intercept-url pattern="/admin/denied" access="permitAll"/>
    <security:intercept-url pattern="/admin/logout" access="permitAll"/>
    <security:intercept-url pattern="/admin/*" access="hasRole('AUTHOR')"/>
    <security:intercept-url pattern="/admin**" access="hasRole('AUTHOR')"/>
    <security:form-login 
        login-page="/admin/login" 
        login-processing-url="/admin/j_spring_security_check" 
        authentication-failure-url="/admin/login?failedAttempt=true"
        default-target-url="/admin/home"/>

        <security:logout
            invalidate-session="true"
            logout-success-url="/admin/login"
            logout-url="/admin/logout"/>
</security:http> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T12:00:29.163

没有错误。只有调试级别的堆栈跟踪，Spring 试图为登录成功处理程序找到正确的构造函数（默认有 2 个构造函数，只有一个会匹配作为参数提供的字符串，即“/admin/login”）。您可以忽略它，也可以将其关闭（该级别的调试日志通常不是很有帮助，而且您可能不希望在生产中启用它）。

# java - JavaFX 项目中的 CSS 错误

> ID：13437433
> 
> 赞同：3
> 
> 时间：2012-11-18T04:15:26.453
> 
> 标签：java, css, javafx

我正在尝试`AnchorPane`使用名为的样式表在 JavaFX中添加背景图像`Style.css`

当我运行程序时，我收到以下警告：

> 警告：com.sun.javafx.css.parser.CSSParser 声明 CSS 解析来自 javafx.scene.Node$22@5c4a9e8e 的内联样式“AnchorPane”时出错：预期冒号位于 [-1,-1]

我的 CSS 文件如下所示：

```
#AnchorPane{
    -fx-background-image:url('penthouse.png');
    -fx-background-repeat: no-repeat;
}

.chat{
    -fx-background-image:url('penthouse.png');
    -fx-background-repeat: no-repeat;
}
#btnSend{

}
#txtMessage{

}
#Figur{
    -fx-background-image:url('Figur.png');
} 
```

我的 Java 代码如下所示：

```
 public void start(Stage primaryStage) throws Exception {

            BorderPane bp = new BorderPane();

            bp.setRight(createRightOptionPane());
            bp.setBottom(createMessagePane());
            bp.setCenter(createVisualChat());
            Group root = new Group();
            root.getChildren().add(bp);
            Scene scene = new Scene(root);

 // adding the stylesheet to the scene
            scene.getStylesheets().add("Style.css"); 

            primaryStage.setScene(scene);
            primaryStage.setWidth(478);

            primaryStage.setHeight(433);
            primaryStage.setTitle("Chat");
            primaryStage.show();

        }

        private Node createVisualChat() {
            AnchorPane chat = new AnchorPane();
            // setting the anchorPanes ID to AnchorPane
       chat.setStyle("AnchorPane");

            return chat;
        } 
```

谁能告诉我这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:10:47.863

在您的代码中

```
// setting the anchorPanes ID to AnchorPane
chat.setStyle("AnchorPane"); 
```

您正在设置样式而不是 ID。它应该是

```
chat.setId("AnchorPane"); 
```

有关更多详细信息，请参阅[使用 CSS 为 JavaFX 应用程序设计皮肤](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)。

# c - 用什么代替 sizeof(void)？

> ID：13437434
> 
> 赞同：0
> 
> 时间：2012-11-18T04:15:40.340
> 
> 标签：c, void-pointers, file-copying

我正在尝试复制文件。我正在使用借用的代码片段，其中有一行错误让我感到困惑。

```
int fileread = open("original.txt", O_RDONLY);
void *buffer;
buffer = malloc(sizeof(void) * size);  /*This line gives "Incomplete type not allowed."*/

int nread = read(fileread,buffer,size);

int filewrite = open("original.txt.backup",O_CREAT | O_RDWR, 0644);

write(filewrite,buffer,size);

close(filewrite);
close(fileread); 
```

我应该改用什么？我在想 char*，但我想确保我理解这里正在进行的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:27:09.347

如果要分配`size`字节缓冲区，并`buffer`指向它的开头：

```
void *buffer = malloc(size);
if (buffer == NULL) {
    /* allocation failed */
}
/* ... */ 
```

但是如果你想对缓冲区中的数据做一些事情，它需要有一个有效的类型。数组`unsigned char`是管理任意内容缓冲区的常用方法：

```
unsigned char *buffer = malloc(size);
/* as above */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:20:25.437

sizeof() 返回类型的大小。老实说，我认为您应该将其更改为

```
char *buffer;
buffer = malloc(sizeof(char) * size); 
```

Sizeof(void) 的意义为零

# ios - 如何使用corebluetooth在ios中广播蓝牙服务？

> ID：13437435
> 
> 赞同：3
> 
> 时间：2012-11-18T04:16:11.807
> 
> 标签：ios, core-bluetooth

如果我想让我的 iOS 设备充当“服务器”并将其蓝牙服务广播到其他 iOS 设备，我将如何使用 core-bluetooth 框架（或任何其他 iOS 框架）来实现这一点？到目前为止，我从 corebluetooth 框架中看到的只是如何编写事物的客户端。（扫描，连接现有的蓝牙服务）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:39:50.843

有两个很棒的 WWDC 视频展示了如何使用适当的 iOS 设备充当客户端或服务器。它们可以在[这里](https://developer.apple.com/videos/wwdc/2012/)找到，您正在寻找会话 703 和 705。

他们使用的源的下载可以在[这里](https://developer.apple.com/devcenter/download.action?path=/wwdc_2012/wwdc_2012_sample_code/wwdc_2012_session_code.dmg)找到。您需要一个开发者帐户（免费作品）才能登录和查看/下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:49:27.877

您可以使用名为 DNSSDObjects 的 OSX 示例项目。核心类（其中三个）在 iOS 下工作得很好。该代码需要进行一些小的更改才能与蓝牙一起使用（因为它们仅适用于 WiFi）。有关所需的代码更改，请参阅[我对另一个问题的回答。](https://stackoverflow.com/questions/12982389/bonjour-not-advertising-over-bt)

基本上，您使用设置服务器并开始接受套接字连接所需的任何代码。然后，您可以使用`DNSSDRegistration`该类通过 Bonjour 宣传您的服务器。

另外两个类，`DNSSDBrowser`可以`DNSSDService`被 iOS 客户端代码用来查找服务器，或者任何可以找到 Bonjour 服务的应用程序或程序也可以找到您的服务器。

# jquery - 如何在引导按钮下拉标题中显示所选项目

> ID：13437446
> 
> 赞同：187
> 
> 时间：2012-11-18T04:18:21.033
> 
> 标签：jquery, twitter-bootstrap

我在我的应用程序中使用引导下拉组件，如下所示：

```
<div class="btn-group">
    <button class="btn">Please Select From List</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
       <li><a tabindex="-1" href="#">Item I</a></li>
       <li><a tabindex="-1" href="#">Item II</a></li>
       <li><a tabindex="-1" href="#">Item III</a></li>
       <li class="divider"></li>
       <li><a tabindex="-1" href="#">Other</a></li>
    </ul>
</div> 
```

我想将所选项目显示为 btn 标签。换句话说，将“请从列表中选择”替换为已选择的列表项（“项目 I”、“项目 II”、“项目 III”）。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-11-18T04:45:16.327

据我了解，您的问题是您想通过单击链接的文本更改按钮的文本，如果是这样，您可以试试这个：http: [//jsbin.com/owuyix/4/edit](http://jsbin.com/owuyix/4/edit)

```
 $(function(){

    $(".dropdown-menu li a").click(function(){

      $(".btn:first-child").text($(this).text());
      $(".btn:first-child").val($(this).text());

   });

}); 
```

* * *

根据您的评论：

*`<li>`当我通过 ajax 调用填充列表项时，这对我不起作用。*

`.on()`因此您必须使用jQuery 方法将事件委托给最近的静态父级：

```
 $(function(){

    $(".dropdown-menu").on('click', 'li a', function(){
      $(".btn:first-child").text($(this).text());
      $(".btn:first-child").val($(this).text());
   });

}); 
```

这里的事件被委托给静态 parent `$(".dropdown-menu")`，尽管您也可以将事件委托给 the ，`$(document)`因为它始终可用。

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2014-02-24T22:18:59.757

针对 Bootstrap 3.3.4 更新：

这将允许您为每个元素使用不同的显示文本和数据值。它还将在选择时保留插入符号。

JS：

```
$(".dropdown-menu li a").click(function(){
  $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
  $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
}); 
```

HTML：

```
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Dropdown
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="#" data-value="action">Action</a></li>
    <li><a href="#" data-value="another action">Another action</a></li>
    <li><a href="#" data-value="something else here">Something else here</a></li>
    <li><a href="#" data-value="separated link">Separated link</a></li>
  </ul>
</div> 
```

[JS 小提琴示例](http://jsfiddle.net/cmcculloh/xnpf1rr9/)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-12-11T17:39:47.570

如果您有多个按钮下拉菜单并带有与引导程序 3 一起使用的非常好的演示文稿，我可以稍微改进 Jai 的工作答案：

**按钮代码**

```
<div class="btn-group">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    Option: <span class="selection">Option 1</span><span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><a href="#">Option 1</a></li>
    <li><a href="#">Option 2</a></li>
    <li><a href="#">Option 3</a></li>
  </ul>
</div> 
```

**jQuery 代码段**

```
$(".dropdown-menu li a").click(function(){

  $(this).parents(".btn-group").find('.selection').text($(this).text());
  $(this).parents(".btn-group").find('.selection').val($(this).text());

}); 
```

我还在“选择”类中添加了一个 5px 的边距。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-01-24T20:24:02.153

这个单一的 jQuery 函数将满足您的所有需求。

```
$( document ).ready(function() {
    $('.dropdown').each(function (key, dropdown) {
        var $dropdown = $(dropdown);
        $dropdown.find('.dropdown-menu a').on('click', function () {
            $dropdown.find('button').text($(this).text()).append(' <span class="caret"></span>');
        });
    });
}); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-02-23T13:08:13.977

另一种使用多个下拉菜单的简单方法（Bootstrap 4）

```
 $('.dropdown-item').on('click',  function(){
        var btnObj = $(this).parent().siblings('button');
        $(btnObj).text($(this).text());
        $(btnObj).val($(this).text());
    }); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-10-05T10:18:29.450

这是我的版本，希望可以节省您的一些时间:)

![在此处输入图像描述](../Images/d24828c54a51dc51c270027012c43a2a.png) jQuery部分：

```
$(".dropdown-menu").on('click', 'li a', function(){
  var selText = $(this).children("h4").html();

 $(this).parent('li').siblings().removeClass('active');
    $('#vl').val($(this).attr('data-value'));
  $(this).parents('.btn-group').find('.selection').html(selText);
  $(this).parents('li').addClass("active");
}); 
```

HTML 部分：

```
<div class="container">
  <div class="btn-group">
    <a class="btn btn-default dropdown-toggle btn-blog " data-toggle="dropdown" href="#" id="dropdownMenu1" style="width:200px;"><span class="selection pull-left">Select an option </span> 
      <span class="pull-right glyphiconglyphicon-chevron-down caret" style="float:right;margin-top:10px;"></span></a>

     <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
       <li><a href="#" class="" data-value=1><p> HER Can you write extra text or <b>HTLM</b></p> <h4> <span class="glyphicon glyphicon-plane"></span>  <span> Your Option 1</span> </h4></a>  </li>
       <li><a href="#" class="" data-value=2><p> HER Can you write extra text or <i>HTLM</i> or some long long long long long long long long long long text </p><h4> <span class="glyphicon glyphicon-briefcase"></span> <span>Your Option 2</span>  </h4></a>
      </li>
      <li class="divider"></li>
   <li><a href="#" class="" data-value=3><p> HER Can you write extra text or <b>HTLM</b> or some </p><h4> <span class="glyphicon glyphicon-heart text-danger"></span> <span>Your Option 3</span>  </h4></a>
      </li>
    </ul>
  </div>
  <input type="text" id="vl" />
</div> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-03-19T09:11:49.437

这个适用于同一页面中的多个下拉菜单。此外，我在所选项目上添加了插入符号：

```
 $(".dropdown-menu").on('click', 'li a', function(){
        $(this).parent().parent().siblings(".btn:first-child").html($(this).text()+' <span class="caret"></span>');
        $(this).parent().parent().siblings(".btn:first-child").val($(this).text());
    }); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-11-18T04:31:34.443

你需要使用添加`open`类 `<div class="btn-group open">`

并`li`添加`class="active"`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-04-07T16:35:52.490

根据@Kyle 的回答进一步修改，因为 $.text() 返回确切的字符串，因此插入符号标记是按字面意思打印的，而不是作为标记，以防万一有人想在下拉列表中保持插入符号完整。

```
$(".dropdown-menu li").click(function(){
  $(this).parents(".btn-group").find('.btn').html(
  $(this).text()+" <span class=\"caret\"></span>"
  );
}); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-11-07T20:58:22.457

我已更正页面上多个下拉列表的脚本

```
$(function(){
    $(".dropdown-menu li a").click(function(){
        var item = $(this);
        var id = item.parent().parent().attr("aria-labelledby");

        $("#"+id+":first-child").text($(this).text());
        $("#"+id+":first-child").val($(this).text());
   });
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-25T12:25:33.523

这似乎是一个很长的问题。我们想要的只是在输入组中实现一个选择标签。但引导程序不会这样做：[https ://github.com/twbs/bootstrap/issues/10486](https://github.com/twbs/bootstrap/issues/10486)

诀窍只是将“btn-group”类添加到父 div

html:

```
<div class="input-group">
  <div class="input-group-btn btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
      Product Name <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li><a href="#">A</a></li>
        <li><a href="#">B</a></li>
    </ul>
  </div>
  <input type="text" class="form-control">
  <span class="input-group-btn">
    <button class="btn btn-primary" type="button">Search</button>
  </span>
</div> 
```

js：

```
$(".dropdown-menu li a").click(function(e){
    var selText = $(this).text();
    $(this).parents('.input-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');       
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-18T04:25:55.123

单击该项目后，请添加一些数据属性，例如**data-selected-item='true'**并再次获取它。

尝试为您单击的**li 元素****添加 data-selected-item='true' ，然后**

 **```
 $('ul.dropdown-menu li[data-selected-item] a').text(); 
```

在添加此属性之前，您只需删除列表中现有的数据选定项。希望这会对你有所帮助

有关 jQuery 中数据属性使用的信息，请参阅[jQuery 数据](http://api.jquery.com/data/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-17T11:55:58.510

例如：

HTML：

```
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
     <BtnCaption>Select item</BtnCaption>
     <span class="caret"></span>   
  </button>
  <ul class="dropdown-menu">
     <li><a href="#">Option 1</a></li>
     <li><a href="#">Option 2</a></li>
     <li class="disabled"><a href="#">Option 3</a></li>   
  </ul> 
</div> 
```

我使用新元素 BtnCaption**仅**更改按钮的文本。

粘贴到**`$(document).ready(function () {}`**以下文本中

JavaScript：

```
 $(".dropdown-menu li:not(.disabled) a").click(function () {
        $(this).closest(".dropdown").find(".btn BtnCaption").text($(this).text()));
    }); 
```

**`:not(.disabled)`**不允许使用禁用的菜单项

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-04T19:19:43.397

我不得不将上面显示的一些javascripts放在“document.ready”代码中。否则他们没有工作。对很多人来说可能很明显，但对我来说不是。因此，如果您正在测试，请查看该选项。

```
<script type="text/javascript">
$(document).ready(function(){
//rest of the javascript code here
});
</script> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-25T08:39:03.797

我更喜欢为此使用选择性浮动标签

```
<div class="form-floating">
<select class="form-select" id="floatingSelect" aria-label="Floating label select example">
<option selected>Open this select menu</option>
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>
</select>
<label for="floatingSelect">Works with selects</label>
</div> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-01T16:01:29.723

一个相当老的问题但是......我想用普通/香草JS来做，所以，这是我这样做的答案（ECMAScript 2015（ES6）语法，在Bootstrap 5.1上工作）：

```
let selectorList = Array
    .from(document.querySelectorAll('dropdown-menu'))
    .forEach(selector => {
        //Add an event listener for displaying the selected dropdown item
        selector.addEventListener("click", function() {
           let selectorButton = selector.previousElementSibling || selector.nextElementSibling;
           selectorButton.textContent = this.querySelector(":checked").value;
           selectorButton.value = this.querySelector(':checked').value;
        });
    }); 
```

我`siblings()`通过使用 JS`previousElementSibling() || nextElementSibling()`方法来使用 JQuery 的想法，它将在元素之前或之后找到按钮`<ul class="dropdown-menu"></ul>`元素。**

# firefox - 在 Firefox 中设置不透明度的 SVG / Raphael 问题

> ID：13437449
> 
> 赞同：3
> 
> 时间：2012-11-18T04:19:19.933
> 
> 标签：firefox, svg, raphael

我在这里使用 Raphael.js 使用 SVG 绘制时遇到了一个非常奇怪的问题。如果我在我绘制的三角形上设置不透明度，它会切断角落。然而，它在 Chrome 和 IE 中看起来不错。使用相同的三角形绘图，如果我将 opacity 更改为 1 或者如果我更改`fill-opacity`而不是 just `opacity`，它会正确渲染。更奇怪的是，使用完全相同的代码和库在 jsFiddle 中创建演示效果很好。我仔细检查了 Raphael.js 的版本，再次更新了我的版本以防万一，等等。

有谁知道这是怎么发生的？

这是我正在使用的代码：

```
 var paper = Raphael(0,0, 800, 800);
            var triangle1 = paper.path('M295,738 l0,-738 l500,0 Z')
            var triangle2 = paper.path('M200,200 l0,-100 l100,0 Z')

            triangle1.attr({
                fill: '#fff',
                'opacity': '0.5'
            });

            triangle2.attr({
                fill: '#fff',
                opacity: 1,
                stroke: 'red'
            }); 
```

这是 jsFiddle：http: [//jsfiddle.net/crisp330/26PaS/](http://jsfiddle.net/crisp330/26PaS/)

这是我的 FF 版本 16.0.2 上的样子：http: [//grab.by/hBWK](http://grab.by/hBWK)

我什至直接从 jsFiddle 复制了 iFrame 源代码（对我来说在 FF 中看起来是正确的），并将其粘贴到一个新的 HTML 页面中......不！角落再次被切断。

关于发生了什么的任何想法？

# javascript - 如何在 apache wicket 中加载 javascript 文件？

> ID：13437456
> 
> 赞同：0
> 
> 时间：2012-11-18T04:20:30.033
> 
> 标签：javascript, json, resources, wicket

我的 Web 应用程序中有一个使用 eval(jsonString) 方法的 javascript 文件。Eval() 因为我也在使用 JSON。

我的 javascript 文件位于 netbeans 的一个包中。我应该怎么做才能使我的 javascript 文件对应用程序和浏览器全局可用？

*问题：* eval 方法无法启动，因为浏览器无法识别 .js 文件。JSON.parse(..) 也不起作用。

所以：我如何正确地将这个 javascript 文件添加到我的 web 应用程序中。所以我可以在运行时通过 Web 应用程序操作它并执行 eval 方法吗？

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:35:59.583

那是你正在寻找的吗？

```
private static final ResourceReference JS = new JavaScriptResourceReference(YourPage.class, "path/to/js");

@Override
public void renderHead(IHeaderResponse response) {
    super.renderHead(response);
    response.render(JavaScriptReferenceHeaderItem.forReference(JS));
} 
```

把它放到你的页面类中。

# c - 如何使用C递归计算字符串中非空白字符的数量？

> ID：13437458
> 
> 赞同：0
> 
> 时间：2012-11-18T04:20:40.703
> 
> 标签：c

这个程序的主要问题是它不会计算字符串中空格的数量，即使它应该在遇到空格时减少计数（它开始时将 count 设置为字符串的长度）。我没有正确检查空格（通过检查''），还是我的递归案例有问题？

```
# include <stdio.h>
# include <string.h>

// function to reverse string and count its length
int rPrint(char *str, int count)
{
   if(*str)
   {
       if(*str != ' ')   
           rPrint(str+1, count);
       else
           rPrint(str+1, count - 1);

       printf("%c", *str);
   }
   return count;
}

int main()
{
   char string[28] = "";
   int count = 0;

   printf("Please enter a string: ");
   gets(string);

   count = rPrint(string, strlen(string));

   printf("\nThe number of non-blank characters in the string is %d.", count);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:25:10.567

您没有使用递归调用的返回值。

```
 if(*str != ' ')
       rPrint(str+1, count);
   else
       rPrint(str+1, count - 1); 
```

应该

```
 if(*str != ' ')
       count = rPrint(str+1, count);
   else
       count = rPrint(str+1, count - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:25:33.610

当你递归时，你会丢弃结果。尝试

```
count = rPrint(str+1, count); 
```

等等

更一般地说，作为一种调试方法，您应该学习将`printf()`语句放入您的函数中以打印出它们正在做什么......

# count - 如何使用 Boto 和 SDBManager 获取 SimpleDB 查询计数

> ID：13437460
> 
> 赞同：1
> 
> 时间：2012-11-18T04:21:07.713
> 
> 标签：count, amazon-simpledb, boto

我想查询我的 SimpleDB 域以获取符合特定条件的记录数。可以这样做：

rs = appsDomain.select("SELECT count(*) FROM %s WHERE (%s='%s' or %s='%s') and %s!='%s'" % (APPS_SDBDOMAIN, XML_APPNODE_NAME_ATTR, appName , XML_APPNODE_RESERVED_NAME_ATTR, appName, XML_EMAIL_NODE, thisSession.email), 无, True)

在做了一些阅读之后，我发现可能通过 SDBManager 计数方法从 SimpleDB 获取查询计数可能比直接执行“count(*)”样式查询更有效。此外，当我知道我只需要一行和一列时，我希望不必遍历结果集，但我也想避免这种情况：

count = int( **rs.iter** ().next()['Count'])

SDBManager 效率更高是真的吗？有没有更好的办法？如果 SDBManager 是最好的方法，谁能告诉我如何使用它，因为我完全不成功？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:43:04.597

好吧，我不再偷懒了，只是去源头寻找答案（FROM：boto-2.6.0-py2.7.egg/boto/sdb/db/manager/sdbmanager.py）

```
def count(self, cls, filters, quick=True, sort_by=None, select=None):
"""
Get the number of results that would
be returned in this query
"""
query = "select count(*) from `%s` %s" % (self.domain.name, self._build_filter_part(cls, filters, sort_by, select))
count = 0
for row in self.domain.select(query):
    count += int(row['Count'])
    if quick:
        return count
return count 
```

正如您所看到的，sdbmanager.count 方法没有什么特别之处，实际上我希望避免的就是循环记录存储只是为了获取“计数”值。

所以最后我可能会自己实现这个方法，因为使用 SDBManager 实际上意味着更多的开销，就我而言，这是不值得的。

谢谢！

# z3 - smt/z3 可以用于优化吗

> ID：13437463
> 
> 赞同：1
> 
> 时间：2012-11-18T04:22:19.543
> 
> 标签：z3

SMT求解器能否有效地找到伪布尔问题的解（或赋值），如下所述：

```
\sum {i..m} f_i x1 x2.. xn *w_i 
```

其中`f_i x1 x2 .. xn`是一个布尔函数，`w_i`是一个 Int 类型的权重。

为方便起见，我突出显示第 1 页和第 3 页中的内容，这足以说明伪布尔问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T13:34:34.780

SMT 求解器通常会解决以下问题：给定一个逻辑公式，可选择使用来自基础理论（例如算术理论、位向量理论、数组）的函数和谓词，该公式是否可满足。它们通常不会为您提供指定目标函数的方法，并且通常没有内置的优化程序。

一些特殊情况是仅使用布尔值或布尔值与位向量或整数的组合的公式。伪布尔约束可以用整数表示，也可以使用位向量进行编码（注意考虑溢出语义），或者可以直接将它们编码到 SAT 中。对于使用属于伪布尔问题类的有界整数的某些公式，Z3 将尝试自动缩减为位向量。这仅适用于标记为 QF_LIA 的 SMT-LIB2 格式的 benchmkars，或者如果您明确调用执行此缩减的策略（应该应用“qflia”策略），则适用。

虽然 Z3 没有直接公开目标函数，但研究界正在积极寻求用目标函数增强 SMT 求解器的问题。Nieuwenhuis 和 Oliveras 在 SAT 2006 中提出的一种方法是将“加权最大 SMT”问题作为一种自定义理论来解决。Yices 带有用于加权最大 SMT 的内置功能，Z3 没有，但可以编写自定义理论来执行加权最大 SMT 求解器的回溯搜索，但没有开箱即用的功能。

有时人们会尝试使用量化公式来指定目标函数。理论上，人们可以希望量词消除程序可以解决该目标。在性能方面，这通常非常糟糕。量词消除是一种过度拟合，（我们拥有的）例程将不会有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-18T23:26:18.540

对于您的问题，如果您想从总和中找到优化的（最大或最小）结果，是的，Z3 具有此能力。您可以使用 Z3 库的**Optimize**类而不是 Solver 类。该类分别提供了“*最大化*”和“*最小化*”两种方法。您可以传递需要优化的 SMT 变量，优化类模型将为您提供解决方案。**它实际上使用Microsoft.Z3**库与 C# API 一起工作。为了给您带来不便，我附上一个片段：

```
Optimize opt; // initializing object
opt.MkMaximize(*your variable*);
opt.MkMinimize(*your variable*);
opt.Assert(*anything you need to do*); 
```

# ruby-on-rails - Rails：引导编辑表单 CSS

> ID：13437464
> 
> 赞同：0
> 
> 时间：2012-11-18T04:23:02.020
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass, css

我想编辑引导程序的表单 CSS。

```
bootstrap-sass / vendor / assets / stylesheets / bootstrap / _forms.scss 
```

我抓起..

```
textarea,
input[type="text"],
input[type="password"],
input[type="datetime"],
input[type="datetime-local"],
input[type="date"],
input[type="month"],
input[type="time"],
input[type="week"],
input[type="number"],
input[type="email"],
input[type="url"],
input[type="search"],
input[type="tel"],
input[type="color"],
.uneditable-input {
  background-color: $inputBackground;
  border: 1px solid $inputBorder;
  @include box-shadow(inset 0 1px 1px rgba(0,0,0,.075));
  @include transition(border linear .2s, box-shadow linear .2s);

  // Focus state
  &:focus {
    border-color: rgba(82,168,236,.8);
    outline: 0;
    outline: thin dotted \9; /* IE6-9 */
    @include box-shadow(inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6));
  }
} 
```

我试图改变焦点状态的 rgba 值。

```
@include box-shadow(inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(200,168,136,.6) 
```

但后来我收到以下错误： **Mixin 转换需要 1 个参数，但传递了 2 个。**

我想我不允许只是“覆盖” box-shadow mixin？但我不确定如何解决这个问题。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:50:38.993

你想逃避争论：

```
@include box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(200,168,136,.6)") 
```

注意`~`（波浪号）和`"`（引号）。这消除了对逗号的混淆，较少解释为两个参数之间的分隔符。有关更多信息，请参阅较少文档的“转义”部分。

# iphone - ios Coredata - 我的保存按钮不起作用

> ID：13437465
> 
> 赞同：0
> 
> 时间：2012-11-18T04:23:12.307
> 
> 标签：iphone, ios, core-data, save

我正在尝试为我的 CoreData 项目制作一个保存按钮，通常我没有问题。但是这次我没有看到它保存到 SQL 文件中（在 FireFox 中使用 SQLite），也不能将数据拉回 UITableView。

没有错误或警告。有人可以帮我解决周日下午（新西兰时间）阴天的问题吗？？

```
- (IBAction)saveDataAction:(id)sender
{
//Instantiating the Entity with a pointer and giving it a mission.
NSString *details = @"Details";
NSManagedObject *newObject = [NSEntityDescription insertNewObjectForEntityForName:details inManagedObjectContext:[self managedObjectContext]];

int yearOfBirth = [_yearTxtField.text intValue]; //Converting the value from a String into an int
NSNumber *year = [NSNumber numberWithInt:yearOfBirth]; //Converting the int into a NSNumber

//Setting each textField value to an attribute in the Entity.
[newObject setValue:_nameTxtField.text forKey:@"name"];
[newObject setValue:_streetTxtField.text forKey:@"streetName"];
[newObject setValue:_cityTxtField.text forKey:@"cityName"];
[newObject setValue:year forKey:@"yearOfBirth"];

//This log just shows what has been added to the database.
//NSLog(@"Details Save:\n\n Name: %@\n StreetName: %@\n CityName: %@\n Year of birth: %@", details.name, details.streetName, details.cityName, details.yearOfBirth);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:33:55.507

```
- (IBAction)saveDataAction:(id)sender
{
     //Instantiating the Entity with a pointer and giving it a mission.
    NSString *details = @"Details";
    NSManagedObjectContext *context = [self managedObjectContext];
    NSManagedObject *newObject = [NSEntityDescription insertNewObjectForEntityForName:details inManagedObjectContext:context];

    int yearOfBirth = [_yearTxtField.text intValue]; //Converting the value from a String into an int
    NSNumber *year = [NSNumber numberWithInt:yearOfBirth]; //Converting the int into a NSNumber

    //Setting each textField value to an attribute in the Entity.
    [newObject setValue:_nameTxtField.text forKey:@"name"];
    [newObject setValue:_streetTxtField.text forKey:@"streetName"];
    [newObject setValue:_cityTxtField.text forKey:@"cityName"];
    [newObject setValue:year forKey:@"yearOfBirth"];

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Whoops couldn't save new object");
    }
    //This log just shows what has been added to the database.
    //NSLog(@"Details Save:\n\n Name: %@\n StreetName: %@\n CityName: %@\n Year of birth: %@", details.name, details.streetName, details.cityName, details.yearOfBirth);
} 
```

# c# - 使用 Environment.Newline 拆分字符串会在大多数数组项中留下 \n 吗？

> ID：13437468
> 
> 赞同：7
> 
> 时间：2012-11-18T04:23:42.247
> 
> 标签：c#, split, newline

我曾经`MyString.Split(Environment.Newline.ToCharArray()[0])`将我的字符串从一个文件拆分成不同的部分。但是，在我这样做之后，数组中的每个项目，除了第一个项目都以 \n 开头？我知道我用换行符分割的方式有点“作弊”，因为没有更好的词，所以如果有更好的方法，请告诉我......

这是文件... ![在此处输入图像描述](../Images/5db6d4c66cbbdbf6920695cd54b42ccb.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-18T04:35:49.467

如果您想保持使用`.Split()`而不是一次读取一行文件，您可以这样做...

```
var splitResult = MyString.Split( new string[]{ System.Environment.NewLine },
    System.StringSplitOptions.RemoveEmptyEntries  );
    /* or System.StringSplitOptions.None if you want empty results as well */ 
```

编辑：

您遇到的问题是，在非 unix 环境中，换行“字符”实际上是两个字符。因此，当您抓取零索引时，您实际上是在回车符上拆分...而不是换行符 (\n)。

窗口 = "\r\n"

Unix = "\n"

根据[http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:45:56.990

Windows 中的换行符是两个字符（\r 和 \n）。该`Environment.Newline.ToCharArray()[0]`表达式仅指定其中一个字符：\r。因此，另一个字符 (\n) 保留为拆分字符串的一部分。

我建议您使用以下内容阅读文件：

```
public IEnumerable<string> ReadFile(string filePath)
{
   using (StreamReader rdr = new StreamReader(filePath))
   {
       string line;
       while ( (line = reader.ReadLine()) != null)
       {
          yield return line;
       }
   }
} 
```

您可能需要更多的错误处理，或者指定不同的文件打开选项，或者将流传递给方法而不是路径，但是在`ReadLine()`方法上使用迭代器的想法是合理的。结果是你可以使用这样的代码：

```
 foreach (string line in ReadLine(" ... my file path ... "))
 {

 } 
```

# java - Java - 数组中的正则表达式反向引用

> ID：13437471
> 
> 赞同：2
> 
> 时间：2012-11-18T04:23:49.233
> 
> 标签：java, regex, backreference

有没有办法使用正则表达式拆分 Java 字符串并返回一个反向引用数组？

举个简单的例子，假设我想从一个简单的电子邮件地址（仅限字母）中提取用户名和提供者。

```
String pattern = "([a-z]+)@([a-z]+)\\.([a-z]{3})";
String email = "user@email.com";

String[] backrefs = backrefs(email,pattern);

System.out.println(backrefs[0]);
System.out.println(backrefs[1]);
System.out.println(backrefs[2]); 
```

这应该输出

```
user
email
com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T04:28:58.560

是的，使用pacakge中的[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)and[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类。`java.util.regex`

```
String pattern = "([a-z]+)@([a-z]+)\\.([a-z]{3})";
String email = "user@email.com";
Matcher matcher = Pattern.compile(pattern).matcher(email);
// Check if there is a match, and then print the groups.
if (matcher.matches())
{
    // group(0) contains the entire string that matched the pattern.
    for (int i = 1; i <= matcher.groupCount(); i++)
    {
        System.out.println(matcher.group(i));
    }
} 
```

# python - 如何在将pyquery对象转换为字符串时取消转义特殊字符

> ID：13437476
> 
> 赞同：1
> 
> 时间：2012-11-18T04:24:49.337
> 
> 标签：python, string, special-characters, lxml, pyquery

我正在尝试使用 python requests 模块获取远程页面，重建 DOM 树，进行一些处理并将结果保存到文件中。当我获取一个页面然后将其写入文件时，一切正常（我稍后可以在浏览器中打开一个 html 文件并且它被正确呈现）。

但是，如果我创建一个 pyquery 对象并进行一些处理，然后使用 str 转换将其保存，则会失败。具体来说，像 && 等特殊字符会在已保存源的脚本标签中被修改（由 pyquery 应用引起），它会阻止页面正确呈现。

这是我的代码：

```
import requests
from lxml import etree
from pyquery import PyQuery as pq

user_agent = {'User-agent': 'Mozilla/5.0'}
r = requests.get('http://www.google.com',headers=user_agent, timeout=4)

DOM = pq(r.text)
#some optional processing
fTest = open("fTest.html","wb")
fTest.write(str(DOM))
fTest.close() 
```

所以，问题是：**如何确保在应用 pyquery 后特殊字符不会被转义？**我想它可能与 lxml（pyquery 的父库）有关，但是在网上进行了繁琐的搜索并尝试了不同的对象序列化方式后，我仍然没有成功。也许这也与Unicode处理有关？！

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:16:34.220

我找到了一个优雅的解决问题的方法，以及之前代码不起作用的原因。

首先，您可以仔细阅读带有[http://lxml.de/lxmlhtml.html](http://lxml.de/lxmlhtml.html)的页面。它有一个部分**“使用 E-factory 创建 HTML”**。在该部分之后，他们指出`etree.tostring() method`仅适用于 XML 的事实。但是对于具有额外可能具有脚本或样式标签的 HTML，它将使事情变得混乱。所以.. 其次，解决方法是使用重载方法`html.tostring()`。

最终的工作代码是：

```
# for networking
import requests
# for parsing and serialization
from lxml import etree
from lxml.html import tostring as html2str # IMPORTANT!!!
from pyquery import PyQuery as pq

user_agent = {'User-agent': 'Mozilla/5.0'}
r = requests.get('http://www.google.com',headers=user_agent, timeout=4)

# construct DOM object
DOM = pq(r.text)
# do stuff with DOM
#
# save result to file
fTest = open("fTest.html","wb")
fTest.write(html2str(DOM.root)) # IMPORTANT!!!
fTest.close() 
```

希望它会在未来为你们中的一些人节省时间！玩得开心！;)

# ruby-on-rails - 如何将他们的 iPhone 连接到 Mac OS X 的 Safari 控制台？

> ID：13437481
> 
> 赞同：0
> 
> 时间：2012-11-18T04:26:15.403
> 
> 标签：ruby-on-rails, iphone, macos, safari, rack-pow

我正在使用我的本地 ip：

```
ipconfig getifaddr $(route -n get default|awk '/interface/ { print $2 }') 
```

哪个返回：

```
192.168.200.11 
```

我正在运行一个可以通过我的计算机访问的 Sinatra 应用程序：

```
http://localhost:3000 
```

如果我在我的 iPhone 上这样做：

```
192.168.200.11:3000 
```

它超时。当我尝试连接到同一个地址时，我的笔记本电脑上也会出现同样的结果。

如何从这里连接我的 iPhone，以便我可以看到我在本地运行的应用程序？

**额外的杂项信息**

如果我去：从我的 Iphone

```
192.168.200.11 
```

它打开了我的`pow is installed`页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:00:52.787

你确定你的 iPhone 和你的电脑在同一个局域网上？即在您的 iPhone 上访问[http://icanhazip.com/](http://icanhazip.com/)为您提供与使用计算机访问相同的 IP？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:31:40.113

听起来像是您计算机上的防火墙问题。它允许从本地主机连接到端口 3000，但不允许从本地子网连接。但是，该规则对于端口 80 是不同的。

# fiddler - 为什么“请求正文”在提琴手中有红色背景？

> ID：13437483
> 
> 赞同：6
> 
> 时间：2012-11-18T04:26:34.887
> 
> 标签：fiddler

为什么我的本地 Fiddler 应用程序为 Composer“请求正文”显示红色背景？

这是我正在使用的文本：{'count':'2', 'since_id':'14927799'}

这看起来像一个标准的 js 对象，作为服务调用的参数传递。

当我粘贴上面使用的文本时，为什么 Fiddler 会显示带有红色背景的“请求正文”。我猜 Fiddler 说请求正文无效。如果是这样，那么我在这里想念什么？我习惯直接通过jQuery调用服务.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T02:36:36.877

如果 Fiddler 的 Composer 包含文本但请求方法不是带有正文（ 、 等）的方法，它将以红色显示正文`POST`背景`PUT`。

# ssl - 为什么 Google 的 MX 服务器与 SSL 证书 CN 不匹配？

> ID：13437484
> 
> 赞同：4
> 
> 时间：2012-11-18T04:26:49.957
> 
> 标签：ssl, smtp, ssl-certificate, starttls

在向 google 帐户发送电子邮件之前，我的脚本查找了 google 电子邮件服务器的 MX 记录。结果是：

```
gmail-smtp-in.l.google.com
alt1.gmail-smtp-in.l.google.com
alt2.gmail-smtp-in.l.google.com
alt3.gmail-smtp-in.l.google.com
alt4.gmail-smtp-in.l.google.com 
```

然后我成功连接到`gmail-smtp-in.l.google.com`并在`EHLO`我开始`STARTTLS`请求切换到 SSL 之后。但是，我将脚本设置为检查并确保证书中列出的主机也与我正在连接[的域匹配。](http://us2.php.net/manual/en/context.ssl.php)

```
stream_context_set_option($fh, 'ssl', 'CN_match', 'gmail-smtp-in.l.google.com`); 
```

然而，这就是事情破裂的地方。我收到以下错误：

```
stream_socket_enable_crypto(): Peer certificate CN='mx.google.com' did not match expected CN='gmail-smtp-in.l.google.com' 
```

我检查了`nslookup mx.google.com`它的位置，发现它不存在。

```
Server:     127.0.0.1
Address:    127.0.0.1#53

** server can't find mx.google.com: NXDOMAIN 
```

为什么 SSL 证书与使用它的域不匹配？我错过了什么吗？

以下是我的脚本从他们那里收到的证书。

```
Array
(
    [name] => /C=US/ST=California/L=Mountain View/O=Google Inc/CN=mx.google.com
    [subject] => Array
        (
            [C] => US
            [ST] => California
            [L] => Mountain View
            [O] => Google Inc
            [CN] => mx.google.com
        )

    [hash] => fbf7dda6
    [issuer] => Array
        (
            [C] => US
            [O] => Google Inc
            [CN] => Google Internet Authority
        )

    [version] => 2
    [serialNumber] => 280762463620984597407910
    [validFrom] => 120912115656Z
    [validTo] => 130607194327Z
    [validFrom_time_t] => 1347451016
    [validTo_time_t] => 1370634207
    [purposes] => Array
        (
            [1] => Array
                (
                    [0] => 1
                    [1] => 
                    [2] => sslclient
                )

            [2] => Array
                (
                    [0] => 1
                    [1] => 
                    [2] => sslserver
                )

            [3] => Array
                (
                    [0] => 1
                    [1] => 
                    [2] => nssslserver
                )

            [4] => Array
                (
                    [0] => 
                    [1] => 
                    [2] => smimesign
                )

            [5] => Array
                (
                    [0] => 
                    [1] => 
                    [2] => smimeencrypt
                )

            [6] => Array
                (
                    [0] => 1
                    [1] => 
                    [2] => crlsign
                )

            [7] => Array
                (
                    [0] => 1
                    [1] => 1
                    [2] => any
                )

            [8] => Array
                (
                    [0] => 1
                    [1] => 
                    [2] => ocsphelper
                )

        )

    [extensions] => Array
        (
            [extendedKeyUsage] => TLS Web Server Authentication, TLS Web Client Authentication
            [subjectKeyIdentifier] => 69:B3:67:5C:04:7F:16:EF:C1:85:FB:E8:2D:E4:FC:21:E9:7D:93:AF
            [authorityKeyIdentifier] => keyid:BF:C0:30:EB:F5:43:11:3E:67:BA:9E:91:FB:FC:6A:DA:E3:6B:12:24

            [crlDistributionPoints] => URI:http://www.gstatic.com/GoogleInternetAuthority/GoogleInternetAuthority.crl

            [authorityInfoAccess] => CA Issuers - URI:http://www.gstatic.com/GoogleInternetAuthority/GoogleInternetAuthority.crt

            [basicConstraints] => CA:FALSE
            [subjectAltName] => DNS:mx.google.com
        )

) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T18:58:32.397

这有两个可能的原因。

*   首先，传统上 SMTP 主机名匹配的定义相当模糊。[您可以在RFC 6125](https://www.rfc-editor.org/rfc/rfc6125#appendix-B.4)（关于主机名验证的最佳实践的最新 RFC，尚未广泛实施）中查看有关此的历史记录。[RFC 3207](https://www.rfc-editor.org/rfc/rfc3207)（通过传输层安全的安全 SMTP）没有提供关于主机名在证书中的位置的详细信息。[RFC 4954](https://www.rfc-editor.org/rfc/rfc4954)（用于身份验证的 SMTP 服务扩展）提供了更多详细信息并讨论了主题备用名称，但它是在 SASL 的上下文中。不幸的是，不明确或含糊的主机名匹配规范通常是根本没有正确尝试匹配主机名的原因。

*   [其次，在邮件传输代理 (MTA)](http://en.wikipedia.org/wiki/Message_transfer_agent)之间很少使用 SSL/TLS 。通过获取 MX DNS 记录并尝试直接向其发送电子邮件，您所做的通常是我的 MTA，而不是[邮件提交代理](http://en.wikipedia.org/wiki/Mail_submission_agent)。

    用于 SMTP 的 SSL/TLS 的典型用法是在邮件用户代理（电子邮件客户端）和邮件提交代理（您的 ISP 的电子邮件服务器，您必须在其中进行身份验证）之间。

    MTA 之间的 SSL/TLS 很难设置，因为不是每个服务器都支持它，而且很难知道哪些 MTA 会支持它。有些人提倡“乐观 TLS”支持，即您尝试查看您正在与之交谈的服务器是否支持 TLS，如果不支持则回退到普通 SMTP。不幸的是，这样做几乎没有什么好处，因为一旦你愿意降级，你显然很容易受到 MITM 攻击。

    此外，您获得的 MX 条目本身可能已被泄露（至少没有 DNSSEC）。

    总的来说，这实际上使得除了 MUA/MSA 连接之外，很难依赖任何形式的电子邮件传输安全性。这可能解释了为什么很少强调为 SSL/TLS 正确配置 MX 服务器。

# php - MySQL：在带有@rownum 的 php 函数中左连接？

> ID：13437488
> 
> 赞同：4
> 
> 时间：2012-11-18T04:27:42.893
> 
> 标签：php, mysql, function, left-join

我对以下功能有疑问：

```
function get_organization_score($org_id)
{
  $sql1 = "SET @rownum := 0";
  $sql2 = "SELECT rank, xp_total FROM (
           SELECT @rownum := @rownum + 1 AS rank, g_org.id AS org_id,
           (Sum(g_npc.xp) + (Sum(g_npc.level)*128)) AS xp_total FROM g_org
           LEFT JOIN g_npc ON g_org.id = g_npc.g_org_id GROUP BY g_org.id
           ORDER BY xp_total DESC
                          ) as result WHERE org_id='".$org_id."'";
  mysql_query($sql1);
  $result = mysql_query($sql2);
  $rows = '';
  $data = array();
  if (!empty($result))
      $rows = mysql_num_rows($result);
  else
      $rows = '';
  if (!empty($rows)){
      while ($rows = mysql_fetch_assoc($result)){
          $data[] = $rows;
      }
  }
  if (empty($data[0]['rank']))
      return 1;
  return $data[0]['rank'];
} 
```

此代码用于在记分牌中显示组织排名。因此，例如，当我提供组织 ID 时，我会在记分牌中获得其排名编号。

目前的问题是我没有得到等级编号，而是我将函数称为组织 ID 的 ID 本身。

示例： get_organization_score(1) 然后我得到排名编号为 1 或者当我调用 get_organization_score(34) 然后我得到排名编号为 34

但我希望它在记分牌中的位置按左连接来自其他表的 XP 数量排序。

任何人都可以帮忙吗？如果有任何问题请询问...

**编辑：添加表模式和示例数据：**

```
CREATE TABLE IF NOT EXISTS `g_org` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `org_name` varchar(255) NOT NULL,
  `founded` datetime NOT NULL,
  `g_userid` int(255) NOT NULL,
  `g_username` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `g_userid` (`g_userid`),
  KEY `g_username` (`g_username`(191)),
  KEY `g_username_2` (`g_username`),
  KEY `org_name` (`org_name`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=47 ;

INSERT INTO `g_org` (`id`, `org_name`, `founded`, `g_userid`, `g_username`) VALUES
(1, 'test_org_1', '2012-07-04 02:30:56', 1, 'DDD'),
(2, 'test_org_2', '2012-07-04 02:34:57', 2, '777');

--
-- Table structure for table `g_npc`
--

CREATE TABLE IF NOT EXISTS `g_npc` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `g_userid` int(255) NOT NULL,
  `g_username` varchar(255) NOT NULL,
  `g_org_id` int(255) NOT NULL,
  `g_org_name` varchar(255) NOT NULL,
  `g_npc_name` varchar(255) NOT NULL,
  `level` int(255) NOT NULL,
  `xp` int(255) NOT NULL,
  `last_update` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `g_userid` (`g_userid`),
  KEY `g_username` (`g_username`),
  KEY `g_org_id` (`g_org_id`),
  KEY `g_org_name` (`g_org_name`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=181 ;

INSERT INTO `g_npc` (`id`, `g_userid`, `g_username`, `g_org_id`, `g_org_name`, `g_npc_name`, `level`, `xp`, `last_update`) VALUES
(1, 1, 'DDD', 1, 'test_org_1', 'Kinuzehute Doqasi', 4, 155, '2012-11-13 14:30:54'),
(2, 1, 'DDD', 1, 'test_org_1', 'Zabava Qigatagise', 2, 107, '2012-10-30 17:38:12'),
(3, 2, '777', 2, 'test_org_2', 'Roci Vuzoducu', 6, 135, '2012-11-13 23:17:40'),
(4, 2, '777', 2, 'test_org_2', 'Gexoye Zeze', 4, 638, '2012-11-06 02:02:27'),
(5, 2, '777', 2, 'test_org_2', 'Sibalabu Gozi', 9, 285, '2012-11-06 02:02); 
```

当我调用函数 get_organization_score(2); 那么组织ID将为2，我想查询ID为2的表'g_org'并左连接表'g_npc'以获取'g_npc'表中'g_org_id'值为2的所有条目并求和来自“g_npc”表字段“xp”的所有结果，然后按字段“xp”DESC 排序所有这些结果。

然后，带有@rownum 的剩余 PHP 代码将给该组织在其他组织中的排名。

因此，组织 ID 2 的以下函数将导致排名为 1，因为它在“xp”字段中有更多 XP，当我使用组织 ID 1 调用相同的函数时，排名数字将为 2，因为它的数字较小在“XP”字段中。

基本上我不想产生组织列表，而只是排名数字。没有其他的。

结尾应该有 WHERE org_id='".$org_id."' 因为它只需要获取 1 个条目的排名号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:44:26.817

我唯一能想到的是这个非常慢的代码：

```
select rank from (
  select s1.id, @row := @row + 1 rank from (
    select
      o.id,
      sum(coalesce(n.xp, 0) + coalesce(n.level, 0) * 128) totalXP
    from g_org o
    left join g_npc n on (o.id = n.g_org_id)
    group by o.id
    order by totalXP desc
  ) s1, (select @row := 0) init
) s2
where id = 1 
```

请注意，无需运行`SET`查询并记住替换`id = 1`为您在 PHP 中使用的任何内容。

# ios - Gamekit 框架：发送一个 int？

> ID：13437490
> 
> 赞同：1
> 
> 时间：2012-11-18T04:28:08.607
> 
> 标签：ios, xcode, frameworks, gamekit

嗨，我正在构建一个使用 gamekit 框架的游戏，但我无法使用“sendDataToAllPlayers”发送到 int，它无法区分我发送的两个 int。这是我的一些代码：

```
typedef enum {
kMessageTypeRandomNumber = 0,
kMessageQN = 0,
kMessageTypeGameBegin,
kMessageTypeSelectAnswer1,
kMessageTypeSelectAnswer2,
kMessageTypeSelectAnswer3,
kMessageTypeGameOver
} MessageType;

typedef struct {
    MessageType messageType;
} Message;

typedef struct {
    Message message;
    uint32_t randomNumber;
    int SelectedQ;
} MessageRandomNumber; 
```

以下是发送方法：

```
-(void)sendTheSelectedRandomQuestionWithQuestion {
    MessageRandomNumber message;
    message.message.messageType  = kMessageQN;
    message.SelectedQ = randomSelectedQuestion;
    NSData *data = [NSData dataWithBytes:&message length:sizeof(MessageRandomNumber)];
    [self sendData:data];
}

- (void)sendRandomNumber {
    //ourRandom = arc4random()%100;
    MessageRandomNumber message;
    message.message.messageType = kMessageTypeRandomNumber;
    message.randomNumber = ourRandom;
    NSData *data = [NSData dataWithBytes:&message length:sizeof(MessageRandomNumber)];
    [self sendData:data];
}

- (void)sendData:(NSData *)data {
    NSError *error;
    BOOL success = [[GCHelper sharedInstance].match sendDataToAllPlayers:data withDataMode:GKMatchSendDataReliable error:&error];
    if (!success) {
        NSLog(@"Error sending init packet");
        [self matchEnded];
    }
} 
```

下面是didreceivedata方法：

```
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID {

    //Store away other player ID for later
    if (otherPlayerID == nil) {
        otherPlayerID = playerID;
    }

    Message *message = (Message *) [data bytes];

     if (message->messageType == kMessageQN) {
     NSLog(@"Received The Selected Question To Display");
     debugLabel.text = @"received the selected q";
     MessageRandomNumber * messageSelectedQuestion = (MessageRandomNumber *) [data bytes];
     NSLog(@"The Selected Question is number: %ud",messageSelectedQuestion->SelectedQ);
     randomSelectedQuestion = messageSelectedQuestion->SelectedQ;
     [self displayTheSlectedQuestion];
     } else if (message->messageType == kMessageTypeRandomNumber) {

        MessageRandomNumber * messageInit = (MessageRandomNumber *) [data bytes];
        NSLog(@"Received random number: %ud, ours %ud", messageInit->randomNumber, ourRandom);

        bool tie = false;
        if (messageInit->randomNumber == ourRandom) {
            //NSLog(@"TIE!");
            ourRandom = arc4random();
            tie = true;
            [self sendRandomNumber];
        } else if (ourRandom > messageInit->randomNumber) {
            NSLog(@"We are player 1");
            isPlayer1 = YES;
            //[self sendTheSelectedRandomQuestionWithQuestion];
        } else {
            NSLog(@"We are player 2");
            isPlayer1 = NO;
        }

        if (!tie) {
            receivedRandom = YES;
            if (gameState == kGameStateWaitingForRandomNumber) {
                [self setGameState:kGameStateWaitingForStart];
            }
            [self tryStartGame];
        }

    } 
    }
} 
```

但是由于某种神秘的原因，每次我打电话给`sendTheSelectedRandomQuestionWithQuestion`它时，它都认为它是`randomNumber`而不是`SelectedQ`？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:57:58.660

好的，刚刚发现问题。它应该是：

```
typedef enum {
kMessageTypeRandomNumber = 0,
kMessageQN = 1,
kMessageTypeGameBegin,
kMessageTypeSelectAnswer1,
kMessageTypeSelectAnswer2,
kMessageTypeSelectAnswer3,
kMessageTypeGameOver
} MessageType; 
```

代替：

```
typedef enum {
kMessageTypeRandomNumber = 0,
kMessageQN = 0,
kMessageTypeGameBegin,
kMessageTypeSelectAnswer1,
kMessageTypeSelectAnswer2,
kMessageTypeSelectAnswer3,
kMessageTypeGameOver
} MessageType; 
```

# java - 变量不会改变

> ID：13437491
> 
> 赞同：-1
> 
> 时间：2012-11-18T04:28:15.800
> 
> 标签：java, exception

我必须确保包含处理异常的语句，但是当我这样做时，变量 Amount 不会改变。帮助？

```
public static void main(String[] args){
    AmwayTickets run = new AmwayTickets();
    System.out.print(run.ticketAmount());
}

public int ticketAmount(){
    System.out.println("Enter the amount of tickets you wish to purchase: ");
    int amount = 0;
    try {
        amount = keyboard.nextInt();
    }
    catch (InputMismatchException e){
        System.out.println("Invalid Amount");
        ticketAmount();
        return amount;
    }
    if (amount < 0){
        System.out.println("Invalid Amount");
        ticketAmount();
        return amount;
    }   
    return amount;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T04:30:47.227

你确定你应该使用递归来解决这个问题吗？即使您应该这样做，您的递归调用也是错误的，因为您没有在返回金额之前将返回的值分配给金额变量。IE，

```
 amount = ticketAmount(); // note the difference
    return amount; 
```

或者更简单地说：

```
 return ticketAmount(); 
```

但我建议你不要这样做。如果这是我的代码，我会改用一个简单的 while 循环。

```
boolean amountCorrect = false;
while (!amountCorrect) {
   try {
      // try to get an assign amount
      // if successful, assign amountCorrect = true; on the next line
   } catch (InputMismatchException e) {
      // give error warning here
   }
} 
```

# mongodb - 如何使用 $and 和 $or 优化此查询

> ID：13437499
> 
> 赞同：1
> 
> 时间：2012-11-18T04:29:53.787
> 
> 标签：mongodb

来自 SQL 我有这个搜索条件

```
WHERE (col1 LIKE "%foo%" OR col2 LIKE "%foo%") AND
      (col1 LIKE "%bar%" OR col2 LIKE "%bar%") 
```

我想将其转换为 MongoDB。

我想出了这个，希望在语义上相同的查询：

```
{
  $and: [
    {
      $or: [
        { col1: /.*foo.*/ },
        { col2: /.*foo.*/ }
      ]
    },
    {
      $or: [
        { col1: /.*bar.*/ },
        { col2: /.*bar.*/ }
      ]
    }
  ]
} 
```

这是正确的方法还是可以改进？
关于索引的任何建议（如果可以使用的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:33:42.873

`and``or`查询以不同的方式进行优化。直接引用[MongoDB 的 50 个技巧和窍门](http://shop.oreilly.com/product/0636920019893.do)：

> 提示 #27：AND 查询应尽可能快地匹配

和

> 提示 #28：OR 查询应尽快匹配

因此，根据实际查询的复杂性和灵活性，您应该进行`foo`更`bar`通用的查询，但尝试限制这两个`$or`语句的结果。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:52:23.820

您在这里遇到三个问题：

*   `$and`是两个评估的查询
*   `$or`是两个评估的查询
*   无前缀正则表达式

`$and`不使用多索引计划，仅使用单个索引计划，但是 $or 在此处使用单个复合索引并没有太大帮助。

事实上，没有索引会有所帮助，因为 MongoDB 不能为没有前缀的正则表达式使用索引。

所以实际上添加任何索引对于这个查询都是没有用的。

无法以当前形式优化此查询。

通常，进行此类搜索的一种好​​方法是将要搜索的单词拆分为可以直接搜索和索引的单词子文档。看看：[http](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo) ://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo的例子。

使用它时，您可能会在单词数组上放置一个索引，仅此而已。MongoDB 应该能够在整个查询中使用该索引（两次以上`$or`）。

### 编辑

此外，`$or`作品与您发布的方式不同。

你不需要`$and`和 两个`$or`s。您只需要一个具有多重条件的 $or：

### 再次编辑

我决定完全取出 $or。请注意，这使用了对索引不友好的正则表达式，但它仍然是一个有趣的概念。

```
{ col1: /.*(foo|bar).*/ , col2: /.*(bar|foo).*/ } 
```

如果您想使用索引友好的东西，那么您将需要完全按照上述方式更改查询的工作方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T05:12:23.417

是的，这是为 MongoDB 实现该查询的正确方法。

如果你想要一个索引来完全辅助查询，它需要是一个包含这两个字段的[复合索引](http://docs.mongodb.org/manual/core/indexes/#compound-indexes)，因为 MongoDB 查询每个查询只能使用一个索引。所以像这样的索引：

```
db.coll.ensureIndex({col1: 1, col2: 1}) 
```

您可以通过使用确认您的查询使用的是您期望的索引[`explain()`](http://www.mongodb.org/display/DOCS/Explain)。

# debugging - 为开发者寻找 SIP 软电话

> ID：13437502
> 
> 赞同：-1
> 
> 时间：2012-11-18T04:30:18.213
> 
> 标签：debugging, testing, sip

我需要一个 Windows SIP 软电话来测试电话应用程序。它应该对开发人员友好。我必须能够看到对等方之间交换的所有 SIP 消息的日志。理想情况下，它将允许启动多个实例（在不同端口上）以模拟呼叫中心的多个代理。

我不喜欢 X-Lite，因为它试图对用户隐藏 SIP 协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:48:05.603

For testing, the [KitCAT](http://echarts.org/KitCAT) framework is extremely (Java) developer-friendly. Test cases are written in JUnit, for ease of integration with other tools. It provides logs at varying levels (including SIP messages), and supports multiple user agents, which can all be coordinated within a test case. (The latter is not well supported in other SIP testing tools, such as [sipp](http://sipp.sourceforge.net/)). It also provides coordination with other protocols (e.g., RTP, HTTP).

It's not a softphone in the traditional sense, but is tremendously helpful in the development process.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:05:20.867

SIPp 可以做你想做的事。 [http://sipp.sourceforge.net/](http://sipp.sourceforge.net/)

它不是软件电话，但确实支持多个实例。您可以使用 Wireshark 查看所有交换的 SIP 消息的日志。

# ruby-on-rails - 根据参数的内容禁用Rails的布局？

> ID：13437504
> 
> 赞同：1
> 
> 时间：2012-11-18T04:30:30.783
> 
> 标签：ruby-on-rails, ruby

是否可以让 Rails 根据`params[:layout]`真假自动禁用布局，而不必`render :show, :layout => params[:layout]`在每次操作后指定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:24:40.877

尝试任何一个。让我知道哪一个对你有用。

```
class ThingssController < ApplicationController
  layout params[:layout]

  ...
end 
```

或者

```
class ThingssController < ApplicationController
  layout :layouting

  ...

  private

    def layouting
      params[:layout] == true 
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:19:10.823

添加一个after_filter怎么样

```
class ThingssController < ApplicationController
  after_filter :get_layout

...

  def get_layout
    render :layout => false unless params[:layout] == true
  end
end 
```

# php - 使用带素数的 PHP 读取页面源代码“

> ID：13437505
> 
> 赞同：2
> 
> 时间：2012-11-18T04:30:40.993
> 
> 标签：php

我正在尝试阅读页面的源代码。我只想阅读一些在特定除法元素内的文本，其 id 为“wrapper_left”。

我的问题是，如果在explode 函数的第一个参数中使用素数“，它不起作用。我尝试转义字符串，尽管我认为这不会做任何事情。

```
$source_code = htmlspecialchars(file_get_contents('http://mydomain.com'));

$source_code = explode('<div id="wrapper_left">', $source_code);

echo $source_code[1]; 
```

提前感谢吨。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T04:33:45.290

不要费心尝试使用`explode()`字符串操作或正则表达式来完成此操作，您需要一个 HTML 解析器，例如[`DOMDocument`](http://php.net/domdocument)：

```
$doc = new DOMDocument;
$doc->loadHTMLFile( 'http://mydomain.com');

$xpath = new DOMXPath( $doc);
$div = $xpath->query( '//div[@id="wrapper_left"]')->item(0);
echo $div->textContent; 
```

[你可以在这个演示](http://3v4l.org/i1b0m)中看到它的工作，当输入这个 HTML 时：

```
<div id="wrapper_left">Some text</div> 
```

它产生：

```
Some text 
```

# bash - 从文件夹外部执行 Node.js 文件会破坏文件路径

> ID：13437513
> 
> 赞同：6
> 
> 时间：2012-11-18T04:31:55.900
> 
> 标签：bash, node.js, file-io

我有一个名为“server.js”的 Node.js 文件。

在脚本中，我使用以下方式打开一些文件：

```
var certPem = fs.readFileSync('cert_and_key_dev.pem', encoding='ascii'); 
```

使用 bash shell，如果我 cd 进入 server.js 所在的目录，然后运行命令：

> [mybashshell]$ 节点 server.js

它有效，我没有错误。服务器启动并运行。

现在，当我 cd 出 server.js 文件所在的目录时，再次运行相同的 shell 命令来启动我的服务器。

它抱怨我的“cert_and_key_dev.pem”文件路径被破坏。

我没想到会发生这样的事情。我认为正在执行的脚本文件中使用的路径应该是相对于脚本文件的，而不是相对于我执行 bash shell 命令的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-18T04:58:35.287

将其放在脚本的开头。

```
process.chdir(__dirname); 
```

这会将进程的工作目录更改为`__dirname`正在执行的文件 ( ) 的目录路径。

有关该功能的更多信息，请阅读[此](http://nodejs.org/api/process.html#process_process_chdir_directory)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T05:03:17.073

或者

```
var path = require('path');
var key = path.join(__dirname, 'cert_and_key_dev.pem');
var certPem = fs.readFileSync(key, encoding='ascii'); 
```

如果你不想`cd`因为任何原因。

# javascript - ContentFlow：如何点击和滚动，以及点击时翻转图像

> ID：13437515
> 
> 赞同：0
> 
> 时间：2012-11-18T04:32:08.787
> 
> 标签：javascript, css

我正在测试 ContentFlow (http://www.jacksasylum.eu/ContentFlow/index.php)，我正在尝试在桌面和移动设备的浏览器上同时实现。

默认情况下，当鼠标单击并拖动时，桌面版本可以正常工作。它滚动并减慢速度，最后停在图像上。但是，当我用 iPad2 打开时，点击并拖动，它会像橡皮筋一样跳回初始图像。无论如何要解决此行为？

另外，我想选择图像并单击/点击以将其翻转到另一个图像。可能吗？

我已经搜索并找到了 Card Flip，但我无法合并到 ContentFlow js/codes。

感谢任何帮助或建议。谢谢！

添加：

我试图添加到 contentflow.js ：

```
onclickActiveItem: function (item) {
var angle = 0;
angle += 180;
this.style.webkitTransform = "rotateY(" + angle + "deg)";
this.style.MozTransform = "rotateY(" + angle + "deg)";}, 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T20:53:30.633

通过更改，我能够在 iPad mini 上使用 1.0.2 版的 contentflow.js

```
this.iPhone = /iPhone|iPod/i.test(navigator.userAgent) 
```

至

```
this.iPhone = /iPhone|iPod|iPad/i.test(navigator.userAgent) 
```

（第 14 行）。

我现在遇到的问题是触摸和拖动运动的结束被解释为点击；但我想如果您的项目不可点击，这不会影响您。

# java - 如何从互联网将文件写入 SD 卡？

> ID：13437521
> 
> 赞同：0
> 
> 时间：2012-11-18T04:32:56.787
> 
> 标签：java, android, download, save, sd-card

一个例子是一个简单的图像。

我尝试了很多东西，尽管很有意义，但它只是拒绝工作。

到目前为止我所做的是我能够抓取 25 张图片并将它们添加到

/sdcard/应用名称/sub/dir/filename.jpg

根据 DDMS，它们都出现在那里，但它们的文件大小始终为 0。

我猜这可能是因为我的输入流？

**这是我处理下载和保存的函数。**

```
public void DownloadPages()
{   
    for (int fileC = 0; fileC < pageAmount; fileC++)
    {

        URL url;
        String path = "/sdcard/Appname/sub/dir/";

        File file = new File(path, fileC + ".jpg");

        int size=0;
        byte[] buffer=null;

        try{
            url = new URL("http://images.bluegartr.com/bucket/gallery/56ca6f9f2ef43ab7349c0e6511edb6d6.png");
            InputStream in = url.openStream();

            size = in.available();  
            buffer = new byte[size];  
            in.read(buffer);  
            in.close();  
        }catch(Exception e){

        }

            if (!new File(path).exists())
                new File(path).mkdirs();

       FileOutputStream out;

       try{
           out = new FileOutputStream(file);
           out.write(buffer);  
           out.flush();  
           out.close();
       }catch(Exception e){

       }

    }

} 
```

它只是在该目录中不断给我 25 个文件，但它们的所有文件大小都为零。我不知道为什么。这实际上与我在 java 程序中使用的代码相同。

附言...

如果你要给我一个解决方案......我已经尝试过这样的代码。它不起作用。

```
 try{
        url = new URL(urlString);
        in = new BufferedInputStream(url.openStream());
        fout = new FileOutputStream(filename);

        byte data[] = new byte[1024];
        int count;
        System.out.println("Now downloading File: " + filename.substring(0, filename.lastIndexOf(".")));
        while ((count = in.read(data, 0, 1024)) != -1){
            fout.write(data, 0, count);
        }
    }finally{
            System.out.println("Download complete.");
            if (in != null)
                    in.close();
            if (fout != null)
                    fout.close();
    }
} 
```

**这是我的目录的图像**

[http://oi48.tinypic.com/2cpcprm.jpg](http://oi48.tinypic.com/2cpcprm.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:57:05.087

对您的第二个选项进行一些更改，按以下方式尝试，

```
byte data[] = new byte[1024];
long total = 0;

int count;

while ( ( count = input.read(data)) != -1 )
{
    total += count;
    output.write( data,0,count );
} 
```

这在 while 语句中有所不同`while ((count = in.read(data, 0, 1024)) != -1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:24:27.770

Using [Guava](http://code.google.com/p/guava-libraries/) something like this should work:

```
String fileUrl = "xxx";
File file = null;

InputStream in;
FileOutputStream out;
try {
  Uri url = new URI(fileUrl);
  in = url.openStream();
  out = new FileOutputStream(file)
  ByteStreams.copy(in, out);
} 
catch (IOException e) {
  System.out.println(e.toString());
}
finally {
  in.close();
  out.flush();
  out.close();
} 
```

# php - 在 PDO 中的非对象上调用成员函数 prepare()

> ID：13437526
> 
> 赞同：2
> 
> 时间：2012-11-18T04:33:33.963
> 
> 标签：php, pdo

大家好，我的代码有问题。使用 __construct() 我收到致命错误：调用非对象上的成员函数 prepare() 但没有它我的代码正在工作。

```
class Animals{

public $db_fields;

 public function __construct(){
  $this->db_fields = $this->get_fields();

  foreach($this->db_fields as $field){
  $this->$field = "";
 }

 public function get_fields(){
  global $dbh;

  $q = $dbh->prepare("DESCRIBE animals");
  $q->execute();
  $db_fields = $q->fetchAll(PDO::FETCH_COLUMN);

  return $db_fields;
 }
}
$f = new Animals();

/*** mysql hostname ***/
$hostname = 'localhost';
/*** mysql username ***/
$username = 'root';
/*** mysql password ***/
$password = '';
/*** mysql database***/
$dbname = 'animals';

try {
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
/*** echo a message saying we have connected ***/
echo 'Connected to database <br />';

$dbh = null;
}
catch(PDOException $e)
{
echo $e->getMessage();
} 
```

我只想让我的字段（animal_id，animal_type，animal_name）与

```
public $animal_id;
public $animal_type;
public $animal_name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:50:35.780

您必须在创建**后**`Animals`实例化该对象，否则它未在函数中定义。**`$dbh``get_fields()`**

 **```
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
$f = new Animals(); 
```

话虽如此，更好的设计是使用依赖注入，并将`$dbh`对象发送到类，如下所示：

```
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
$f = new Animals( $dbh); 
```

因此，您更新的课程将如下所示：

```
class Animals{

    private $dbh;

    public function __construct( $dbh){
        $this->dbh = $dbh;
    }

    public function get_fields(){
        $q = $this->dbh->prepare("DESCRIBE animals");
    }
} 
```

好处？你摆脱了`global`变量。通常，需要一个全局变量是一个糟糕的设计，你想避免它。您可以根据您遇到的问题了解原因 - 它需要设置全局状态才能运行。**

# entity-framework - 实体框架将一个模型映射到多个表

> ID：13437528
> 
> 赞同：1
> 
> 时间：2012-11-18T04:33:40.273
> 
> 标签：entity-framework

我将数据存储在以月份命名的表中，例如data201201，data201202等，表是在每月的第一天创建的，所有表都有相同的结构。我设计这个是因为每个月增加一千万行，我只有sqlserver标准版本所以不能使用分区表。

在使用实体框架之前，我使用 sql 字符串来查询数据，所以我可以通过查询条件更改 sql 字符串中的表名。

这些是我可以在实体框架中查询相关表的任何方式吗？我有两个想法：1.另一种可以支持如此大数据和小成本的表设计？2.拦截ef的查询并通过查询条件更改表名，并继续此查询，但是我如何以及在哪里可以这样做？

# drupal-7 - 在块中创建分类“添加术语”表单

> ID：13437532
> 
> 赞同：1
> 
> 时间：2012-11-18T04:33:59.730
> 
> 标签：drupal-7, drupal-modules, drupal-taxonomy

我有两个名为“vocab_one”和“vocab_two”的词汇表。我创建了名为“添加库”的自定义多块模块，以便向每个块显示分类“添加术语”表单。

每个块显示在内容区域的同一节点上。“词汇二块”的位置在“词汇一块”的上方。

当我在“Vocab One Block”上添加新术语时，新术语始终存储在“vocab_two”中。然后我切换块的位置。这一次，新术语总是存储在“vocab_one”中。

如何在选定的词汇表中存储新术语，而不用担心块位置？

这是我的 add_library.module：

```
function add_library_block_info() {
  $blocks['Vocab Two Block'] = array(
    'info' => t('Vocab Two'),
  );

  $blocks['Vocab Two Block'] = array(
    'info' => t('Vocab One'),
  );

  return $blocks;
}

function add_library_block_view($delta='') {
  $block = array();
  switch ($delta) {
    case 'Vocab Two Block':
      $block['subject'] = t('Add Vocab Two');
      $block['content'] = add_vocab_two();
      break;
    case 'Vocab Two Block':
      $block['subject'] = t('Add Vocab One');
      $block['content'] = add_vocab_one();
      break;
  }
  return $block;
}

function add_vocab_two() {
    module_load_include('inc', 'taxonomy', 'taxonomy.admin');
    $vocabulary = taxonomy_vocabulary_load(2);
    return drupal_get_form('taxonomy_form_term', $vocabulary);
}

function add_vocab_one() {
    module_load_include('inc', 'taxonomy', 'taxonomy.admin');
    $vocabulary = taxonomy_vocabulary_load(4);
    return drupal_get_form('taxonomy_form_term', $vocabulary);
} 
```

# c++ - STL 优先级队列非类类型编译错误

> ID：13437533
> 
> 赞同：2
> 
> 时间：2012-11-18T04:34:42.667
> 
> 标签：c++, stl, priority-queue

我以为我已经弄清楚了，但我想我错了。我的印象是“<...>”中的第一个元素是要存储在队列中的类型，第二个是容器类型（选择是“向量”或“出队”），第三个是是重载 '()' 运算符以进行比较的类。基于此，我认为以下代码应该编译，但它没有:(

```
std::priority_queue<uint32_t*, std::vector<uint32_t*>, edgeComparator> q();

uint32_t* nodeEdge = new uint32_t[2];
nodeEdge[0] = startN;
nodeEdge[1] = 0;

q.push(nodeEdge); 
```

'edgeComparator' 定义如下：

```
class edgeComparator
{
   public:
      bool operator() (const uint32_t*& lhs, const uint32_t*& rhs) const
      {
         return (lhs[1]>rhs[1]);
      }
}; 
```

这是我得到的错误：

```
./Graph.cpp: In member function `void Graph::findShortestPath()':
./Graph.cpp:148: error: request for member `push' in `q', which is of non-class type `std::priority_queue<uint32_t*, std::vector<uint32_t*, std::allocator<uint32_t*> >, edgeComparator> ()()' 
```

更糟糕的是，我在尝试 'q.empty()' 时也会收到此错误

```
./Graph.cpp:150: error: request for member `empty' in `q', which is of non-class type `std::priority_queue<uint32_t*, std::vector<uint32_t*, std::allocator<uint32_t*> >, edgeComparator> ()()' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T04:37:28.930

你有过：

```
std::priority_queue<uint32_t*, std::vector<uint32_t*>, edgeComparator> q(); 
```

但是，您应该使用：

```
std::priority_queue<uint32_t*, std::vector<uint32_t*>, edgeComparator> q; 
```

第一个版本声明了一个名为的*函数*`q`，它不接受任何参数，并返回一个 type 的值`std::priority_queue<...>`。

第二个版本声明了一个名为，类型为 的*变量*，它是默认初始化的。`q``std::priority_queue<...>`

# c# - 内联 if 语句以确定 i++ 或 i-- 在 for 循环中递增

> ID：13437534
> 
> 赞同：1
> 
> 时间：2012-11-18T04:35:18.947
> 
> 标签：c#, xamarin.ios

我试图理解为什么我的条件 if 语句给了我一个编译错误。这不正确吗？

```
for(int i=startAt; i>=_itemsList.Count; length < 0 ? i-- : i++;)
{

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T04:41:50.763

根据[MSDN](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)，它应该是错误消息中的内容之一：

*   赋值语句

*   方法的调用

*   前缀或后缀增量表达式，例如 ++i 或 i++

*   前缀或后缀递减表达式，例如 --i 或 i--

*   使用 new 创建对象

*   等待表达式

奇怪的可编译解决方案之一是：

```
i += length < 0 ? -1 : 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:23:53.077

最佳答案是 zerkms，但还有另一种解决方案应该可行。

```
int dummy = 0;
for(int i=startAt; i>=_itemsList.Count; dummy++)
{
  // Do your thing
  length < 0 ? i-- : i++;
} 
```

# jquery - 在 jQueryUI 模式对话框中使用时，jQuery 逻辑从用户控件触发两次

> ID：13437538
> 
> 赞同：0
> 
> 时间：2012-11-18T04:36:39.740
> 
> 标签：jquery, asp.net, jquery-ui, user-controls

我有一个 asp.net 用户控件，我用它来将一堆 HTML 和 Jquery 逻辑放入以在多个页面上共享。这个用户控件有一些从 json 调用加载的下拉框，并且没有添加代码隐藏逻辑。

当我在普通页面上使用此用户控件时，它工作得非常好，完全没有问题。

但是，当我将用户控件包装在 div 中并使用 jqueryUI 模式对话框时，用户控件中的所有内容都会触发两次。不仅是初始 $(document).ready(function() {}); 中的代码，而且每个函数在调用时也会被触发两次。

在 Visual Studio 中对此进行调试，我看到首先从外部 JS 文件调用所有内容，然后再次从以某种方式动态生成的“脚本块”文件调用。

此脚本块文件不会在未将用户控件包装在模式中的页面上生成。

如果我使用 IISExpress 或 IIS7，也会发生同样的情况。

问题是，为什么要创建这个脚本块文件，为什么我的所有 jQuery 逻辑都会触发两次？

- 编辑 -

这是div：

```
 <div id="divMyDiv" title="MyDiv">
     <uc1:MyUserControl runat="server" ID="MyUsercontrol" />
</div> 
```

这是使用它的模态逻辑：

```
 $("#divMyDiv").dialog({
            autoOpen: false,
            height: 400,
            width: 400,
            modal: true,
            open: function (type, data) {
                $(this).parent().appendTo("form");
            }
        }); 
```

注意：即使我删除了“open：”功能，问题仍然存在。但是，如果我删除整个对话框块，它就**不会发生，所以它是特定于这个对话框调用的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:57:27.723

查看是否在用户控件上编写的 java-script/jQuery 每次都会在您的登录页面上加载。

并且将在您的登录页面上有多个相同的 javascript/jQuery 代码副本。

如果您将加载更多的用户控件，则脚本将被触发不止一个。

它将在您加载用户控件时被触发多次。

为了克服这个问题，请在登录页面上调用 jQuery。

并在加载时将您的 jQuery 与用户控件绑定。

编辑 1

我知道您只有一个用户控件实例。

我的观点是

1.  您正在页面上打开用户控件
2.  用户控件有一个 jQuery 调用
3.  如果您打开对话框，jQuery 调用将成为登录页面的一部分
4.  你将关闭对话框
5.  你的 jQuery 仍然是你登陆页面的一部分
6.  你再次打开一个对话框
7.  在加载到登录页面的用户控件上编写的 jQuery 的第二个副本
8.  现在你有两份你的 jQuery 代码
9.  并且随着时间的推移，您将打开和关闭将有尽可能多的副本

我认为这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:31:52.297

我能够确定发生了什么。

外部 JavaScript 文件的链接位于用户控件本身内。将此链接从用户控件中移出并进入主页已修复它。

无论出于何种原因，这都会阻止生成动态脚本块文件，因此也停止了两次调用每个函数。

我只需要记住将此 JavaScript 链接添加到使用此用户控件的每个页面，或将其添加到我的母版页。

如果有人理解为什么会这样，我很想知道。

# wordpress - 更改 wordpress 中的评论模板

> ID：13437539
> 
> 赞同：0
> 
> 时间：2012-11-18T04:36:43.123
> 
> 标签：wordpress, comments

所以wordpress使用php wp_list_comments(); 进入 wordpress 核心并获取 comment-template.php 以输出评论。

据我了解，编辑 wordpress 核心是不行的，那么如何设置实际评论的样式呢？到目前为止，这只能通过 CSS 实现，但我想完全改变它们的外观，为此我需要编辑 php/html. comment-template.php 本身是单片的，坦率地说，写任何类似的东西都超出了我的能力。

那么如何在不破坏 wp 核心的情况下对其进行编辑或创建我自己的呢？

# php - MySQL 查询以查找由第二个表中的另一个值连接的列中最受欢迎的值

> ID：13437542
> 
> 赞同：0
> 
> 时间：2012-11-18T04:36:51.600
> 
> 标签：php, mysql, sql, join

我有两张桌子：

*   **用户**：user_id，user_zip
*   **设置**：user_id，pref_ex_loc

我需要根据特定的 user_zip 从设置表中找到最流行的“pref_ex_loc”，该 user_zip 将指定为变量 $userzip。

这是我现在的查询，显然它不起作用。

```
$popularexloc = "SELECT pref_ex_loc, user_id COUNT(pref_ex_loc) AS countloc 
       FROM settings FULL OUTER JOIN users ON settings.user_id = users.user_id 
       WHERE users.user_zip='$userzip' 
       GROUP BY settings.pref_ex_loc 
       ORDER BY countloc LIMIT 1";

$popexloc = mysql_query($popularexloc) or die('SQL Error :: '.mysql_error());
$exlocrow = mysql_fetch_array($popexloc); 
$mostpopexloc=$exlocrow[0];
echo '<option value="'.$mostpopexloc.'">'.$mostpopexloc.'</option>'; 
```

我在这里做错了什么？我也没有从中得到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:41:19.563

好吧，一方面你在 COUNT() 之前缺少一个逗号：

```
SELECT pref_ex_loc, user_id COUNT(... 
```

您应该在选择列表中的每个字段之间使用逗号：

```
SELECT pref_ex_loc, user_id, COUNT(... 
```

我建议使用`COUNT(*)`而不是`COUNT(pref_ex_loc)`. 在这种情况下，两者都应该给出正确的答案，但在 MySQL 中`COUNT(*)`通常表现稍好一些。

您正在使用外连接，但随后在 WHERE 子句中您正在测试其中的一列，`users`因此它实际上不再是外连接。在这个查询中，我相信您只需要一个 INNER JOIN，除非您需要处理没有用户引用您的*任何*pref_ex_loc 值的可能性。阅读[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

此外，MySQL[不支持 FULL OUTER JOIN](http://dev.mysql.com/doc/refman/5.5/en/join.html)。

您`user_id`在选择列表中，当它既不在 GROUP BY 子句中也不在聚合函数中时，它是一个模棱两可的字段，它的值来自组中的任意一行。您应该`user_id`从选择列表中删除。

按 countloc 排序，首先`DESC`获得最大值。

所以这是我认为更好的查询：

```
SELECT pref_ex_loc, COUNT(*) AS countloc 
FROM settings INNER JOIN users ON settings.user_id = users.user_id 
WHERE users.user_zip='$userzip' GROUP BY settings.pref_ex_loc 
ORDER BY countloc DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:20:11.463

这将允许列表中显示最高的值（*重复最流行*`pref_ex_loc`的） 。

它不使用`LIMIT`，因为`LIMIT`强制显示最大行数。现在，问题来了，**如果有两行或更多行与最流行的 pref_ex_loc 相关联怎么办？**

```
SELECT  b.pref_ex_loc
FROM    users a
        INNER JOIN settings b
            ON a.user_ID = b.user_ID
WHERE   a.user_zip = 1  -- change the value here
GROUP BY    b.pref_ex_loc
HAVING COUNT(*) =
(
  SELECT MAX(totalCount)
  FROM
  (
    SELECT  b.pref_ex_loc, COUNT(*) totalCount
    FROM    users a
            INNER JOIN settings b
                ON a.user_ID = b.user_ID
    WHERE   a.user_zip = 1  -- change the value here
    GROUP BY    b.pref_ex_loc
  ) s
) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/86a7b/1)
*   [**SQLFiddle Demo**（*重复最流行*）](http://sqlfiddle.com/#!2/b959d/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T04:55:06.410

试试这个：

```
select s.pref_ex_loc from settings s
join users u on (u.user_id = s.user_id)
where user_zip = $userzip
group by s.pref_ex_loc
order by count(*) desc
limit 1 
```

正如您所说，这将为您提供“基于特定 user_zip 的设置表中的单个最受欢迎的 'pref_ex_loc'”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T04:48:30.590

试试这个查询：

```
SELECT user_id, COUNT(pref_ex_loc) AS countloc
FROM users LEFT JOIN settings ON users.user_id = settings.user_id
WHERE users.user_zip='$userzip' GROUP BY user_id ORDER BY countloc LIMIT 1 
```

# asp.net - Linq to Entities - 对多对多表使用 group by

> ID：13437550
> 
> 赞同：1
> 
> 时间：2012-11-18T04:38:36.637
> 
> 标签：asp.net, vb.net, linq, entity-framework

在确定将 Linq to Entities 用于我的应用程序的正确方法方面，我将不胜感激。具体来说，在处理多个多对多表时，我很难理解分组。

简化的数据库设计是：

[http://imageshack.us/a/img443/5863/entitydesignerdiagram.png](http://imageshack.us/a/img443/5863/entitydesignerdiagram.png)

数据库设计理念：

人员：有权编辑多个统计数据的个人。季节：分组统计数据的时间段，例如 2012 年棒球或 2012 年。参与者：参与统计的个人或群体。这里需要的只是实体的名称。例如 Kevin Wasie 或 Varsity Team Statistics：保存属于 1 个赛季的个人统计信息，例如达阵或本垒打。

代码背后：

```
 Dim stats = From st In pl.statistics From per In st.people
      Where per.id.Equals(personID)
      Select New With
            {.season_name = st.season.name, .statistic_name = st.name, .season_id = st.season.id,
             .players = From play In pl.players
                             Where play.seasonId = st.season.id
                             Select New With {.player_name = play.name}}

    rep_statistics.DataSource = stats
    rep_statistics.DataBind() 
```

.aspx：

```
<asp:Repeater ID="rep_actions" runat="server">
<HeaderTemplate>
</HeaderTemplate>
<ItemTemplate>
<b><%# Eval("season_name")%></b> - <%# Eval("statistic_name")%><br />
    <asp:Repeater ID="rep_part" runat="server" DataSource='<%# Eval("players")%>'>
    <itemtemplate>
    <%# Eval("participantname")%>
    </itemtemplate>
    <SeparatorTemplate>,</SeparatorTemplate>
    </asp:Repeater>
</ItemTemplate>
</asp:Repeater> 
```

期望的结果是按季节分组显示页面，如下所示：

```
Season 1
   Statistic 1
      Season1 Players
   Statistic 2
      Season1 Players
   Statistic 3
      Season1 Players
Season 2
   Statistic 4
      Season 2 Players
... 
```

目前的结果是：

```
Season 1
   Statistic 1
      Season1 Players
Season 1
   Statistic 2
      Season1 Players
Season 1
   Statistic 3
      Season1 Players
Season 2
   Statistic 4
      Season 2 Players
... 
```

如何修改 linq 以获得所需的结果？

任何帮助，包括指向教程或其他信息的链接，将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:06:22.480

下面是 C# 代码，但我希望它能给你一个关于你需要做什么的提示。该查询过滤具有给定值的人，`Id`并用于`SelectMany()`选择这些人的统计信息。

然后，它将选定的统计数据分组`SeasonId`并填充要输出的季节集合。

```
var data = st.People
             .Where(p => p.Id == personID)
             .SelectMany(p => p.Statistics)
             .GroupBy(s => s.SeasonId)
             .Select(g => new
             {
                 SeasonId = g.Key,
                 SeasonName = g.Fist().Season.Name,
                 Statistics = g.Select(s => new
                               {
                                   StatisticId = s.Id,
                                   StatisticName = s.Name,
                                   Players = s.Season.Players
                               })
             }); 
```

# html - 对象引用未设置为对象的实例 - vb.net

> ID：13437551
> 
> 赞同：2
> 
> 时间：2012-11-18T04:38:44.810
> 
> 标签：html, vb.net, webbrowser-control

我正在尝试获取元素的子元素的 InnerHtml。这是我所拥有的：

```
If doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble") IsNot Nothing Then
                    Dim el As HtmlElement = doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble")
                    inboxTxt.Text = el.Children(1).Children(0).InnerHtml.ToString
                End If 
```

这是我收到的错误：

```
"Object reference not set to an instance of an object." 
```

我该如何解决？

编辑：当我删除“尝试”功能时，错误显示在这里：

```
If doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble") IsNot Nothing Then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T04:47:07.580

您正在假设您的`doc`对象具有价值。在检查子元素之前，尝试检查它是否也没有。

```
If Not IsNothing(doc) Then
    If Not IsNothing(doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble")) Then
        Dim el As HtmlElement = doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble")
        inboxTxt.Text = el.Children(1).Children(0).InnerHtml.ToString
    End If
End If 
```

* * *

更新代码。这有效，但不返回您的`HtmlElement`

```
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        wb.Navigate("http://www.roblox.com/user.aspx?id=3659905")
    End Sub

    Private Sub Form1_MouseClick(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
        Dim doc As HtmlDocument = wb.Document
        If Not IsNothing(doc) Then
            Dim el As HtmlElement = doc.GetElementById("ctl00_cphBanner_MenuRedesign_BannerAlertsAndOptionsLoginView_BannerAlertsAndOptions_Authenticated_FriendsBubble")
            If el IsNot Nothing Then
                inboxTxt.Text = el.Children(1).Children(0).InnerHtml.ToString
            Else
                inboxTxt.Text = "No Data"
            End If
        End If
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:42:51.333

最有可能的是，至少有一个表达式`el.Children(1)`、`el.Children(1).Children(0)`或`el.Children(1).Children(0).InnerHtml`导致 null/Nothing。按顺序检查每一个，以确保您确实具有价值。

# android - 应用程序未运行时不会发生推送通知 - android

> ID：13437552
> 
> 赞同：0
> 
> 时间：2012-11-18T04:38:49.747
> 
> 标签：android, urbanairship.com

我正在使用 Urban Airship 进行推送通知。它的工作原理就像一个魅力，但只是发现它在应用程序未运行时没有发送推送通知。

如何处理？我确信这是一个常见的场景，并且会有一个解决方案。

我检查了堆栈溢出中的许多帖子，但其中大多数是针对 iOS 的。我要安卓

```
AirshipConfigOptions options = AirshipConfigOptions.loadDefaultOptions(this);

  UAirship.takeOff(this, options);
Logger.logLevel = Log.VERBOSE;

PushManager.shared().setIntentReceiver(IntentReceiver.class);
PushManager.enablePush(); 
```

我在 Manifest Fie 中有以下代码

```
 <!-- REQUIRED for Urban Airship GCM-->
    <receiver android:name="com.urbanairship.CoreReceiver" />

    <receiver android:name="com.urbanairship.push.GCMPushReceiver" android:permission="com.google.android.c2dm.permission.SEND">        
      <intent-filter>
          <action android:name="com.google.android.c2dm.intent.RECEIVE" />
          <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

          <!-- MODIFICATION REQUIRED - Use your package name as the category -->
          <category android:name="com.itest.guide.urbanairship" />
      </intent-filter>
    </receiver>

    <service android:name="com.urbanairship.push.PushService" android:label="Push Notification Service"/>
    <service android:name="com.urbanairship.push.PushWorkerService" android:label="Push Notification Worker Service"/>
    <service android:name="com.urbanairship.analytics.EventService" android:label="Event Service"/>

    <!-- This is required for persisting preferences related to push and location -->
    <provider android:name="com.urbanairship.UrbanAirshipProvider"
        android:authorities="com.itest.mauritiustourguide.urbanairship.provider"
        android:exported="false"
        android:multiprocess="true" />
    <!-- END OF REQUIRED ITEMS -->

    <!-- OPTIONAL, if you want to receive push, push opened and registration completed intents -->
    <!-- Replace the receiver below with your package and class name -->
    <receiver android:name="com.itest.guide.urbanairship.IntentReceiver" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:29:05.400

It doesn't look like the line the category in the BroadcastReceiver intent filter matches your app package

```
<category android:name="com.itest.guide.urbanairship" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:56:17.170

原因可能是清单文件中的广播接收器。你确定你放了？广播接收器唤醒应用程序，并在有推送时通知。

# ruby - Rally API：如何移动测试文件夹

> ID：13437553
> 
> 赞同：0
> 
> 时间：2012-11-18T04:38:59.817
> 
> 标签：ruby, rally

我使用了以下答案中概述的脚本：

[Rally API：如何复制测试文件夹和成员测试用例](https://stackoverflow.com/questions/13223568/rally-apis-how-to-copy-test-folder-and-member-test-cases)

它很方便，但我真正想做的是*将*整个测试文件夹移动到不同的项目中。通过 Rally 用户界面，这几乎是不可能的。根据 Rally Support 的说法，在 UI 中执行此操作的唯一方法是：

*   *从当前测试文件夹中取消分配*测试用例
*   在仪表板上设置自定义网格应用程序
*   使用自定义网格批量编辑更新测试用例的*项目*
*   最后使用自定义网格批量编辑来更新*测试文件夹*- 现在您在测试用例的目标项目中

尽管上述过程很笨拙，但现在比在自定义网格中进行批量编辑之前更容易。在您必须逐个阅读和编辑每个测试用例之前，这非常手动且缓慢。

然而，我们有几千个测试用例需要移动，而自定义网格对我们来说有一个致命的缺陷。它只会显示查询中的前 200 条记录。因此，我们必须以逐步的方式手动更改我们的网格查询以完成我们需要的移动。这比一个接一个地编辑测试用例好不了多少。有没有办法使用脚本*将**带有测试用例*的测试文件夹从一个项目移动到另一个项目？请告诉我有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:04:30.933

以下脚本将执行此任务 - 它将所有测试用例从由 FormattedID 标识的源测试文件夹移动到同样由 FormattedID 标识的目标测试文件夹。源测试文件夹和目标测试文件夹可以在不同的项目中（尽管它们必须在同一个工作区中）。与问题中引用的复制脚本一样，目标测试文件夹必须存在，即如果找不到目标，脚本将不会为您创建测试文件夹。

对于那些需要安装和配置 Ruby REST 工具包的人，链接在这里：

[开发人员门户：Ruby 的 Rally REST API](http://developer.rallydev.com/help/ruby-toolkit-rally-rest-api-json)

[Github](https://github.com/RallyTools/RallyRestToolkitForRuby)

```
# Copyright 2002-2012 Rally Software Development Corp. All Rights Reserved.

require 'rally_api'

$my_base_url       = "https://rally1.rallydev.com/slm"
$my_username       = "user@company.com"
$my_password       = "password"
$my_workspace      = "My Workspace"
$my_project        = "My Project"
$wsapi_version     = "1.39"

# Test Folders
$source_test_folder_formatted_id = "TF8"
$target_test_folder_formatted_id = "TF11"

#==================== Make a connection to Rally ====================
config                  = {:base_url => $my_base_url}
config[:username]       = $my_username
config[:password]       = $my_password
config[:workspace]      = $my_workspace
config[:project]        = $my_project
config[:version]        = $wsapi_version

@rally = RallyAPI::RallyRestJson.new(config)

begin

  # Lookup source Test Folder
  source_test_folder_query = RallyAPI::RallyQuery.new()
  source_test_folder_query.type = :testfolder
  source_test_folder_query.fetch = true
  source_test_folder_query.query_string = "(FormattedID = \"" + $source_test_folder_formatted_id + "\")"

  source_test_folder_result = @rally.find(source_test_folder_query)

  # Lookup Target Test Folder
  target_test_folder_query = RallyAPI::RallyQuery.new()
  target_test_folder_query.type = :testfolder
  target_test_folder_query.fetch = true
  target_test_folder_query.query_string = "(FormattedID = \"" + $target_test_folder_formatted_id + "\")"

  target_test_folder_result = @rally.find(target_test_folder_query)

  if source_test_folder_result.total_result_count == 0
    puts "Source Test Folder: " + $source_test_folder_formatted_id + "not found. Exiting."
    exit
  end

  if target_test_folder_result.total_result_count == 0
    puts "Target Test Folder: " + $target_test_folder_formatted_id + "not found. Target must exist before moving."
    exit
  end

  source_test_folder = source_test_folder_result.first()
  target_test_folder = target_test_folder_result.first()

  # Populate full object for both Source and Target Test Folders
  full_source_test_folder = source_test_folder.read
  full_target_test_folder = target_test_folder.read

  # Grab collection of Source Test Cases
  source_test_cases = source_test_folder["TestCases"]

  # Loop through Source Test Cases and Move to Target
  source_test_cases.each do |source_test_case|
    begin

      test_case_to_update = source_test_case.read
      source_test_case_formatted_id = test_case_to_update["FormattedID"]

      target_project = full_target_test_folder["Project"]
      target_project_full_object = target_project.read
      target_project_name = target_project_full_object["Name"]

      source_project = full_source_test_folder["Project"]
      source_project_full_object = source_project.read
      source_project_name = source_project_full_object["Name"]

      puts "Source Project Name: #{source_project_name}"
      puts "Target Project Name: #{target_project_name}"

      # Test if the source project and target project are the same
      source_target_proj_match = source_project_name.eql?(target_project_name)

      # If the target Test Folder is in a different Project, we have to do some homework first:
      # "un-Test Folder" the project
      # Assign the Test Case to the Target Project
      # Assign the Test Case to the Target Test Folder
      if !source_target_proj_match then
        fields = {}
        fields["TestFolder"] = ""
        test_case_updated = @rally.update(:testcase, test_case_to_update.ObjectID, fields) #by ObjectID
        puts "Test Case #{source_test_case_formatted_id} successfully dissociated from: #{$source_test_folder_formatted_id}"

        # Get full object on Target Project and assign Test Case to Target Project
        fields = {}
        fields["Project"] = target_project_full_object
        test_case_updated = @rally.update(:testcase, test_case_to_update.ObjectID, fields) #by ObjectID
        puts "Test Case #{source_test_case_formatted_id} successfully assigned to Project: #{target_project_name}"
      end

      # Change the Test Folder attribute on the Test Case
      fields = {}
      fields["TestFolder"] = target_test_folder
      test_case_updated = @rally.update(:testcase, test_case_to_update.ObjectID, fields) #by ObjectID
      puts "Test Case #{source_test_case_formatted_id} successfully moved to #{$target_test_folder_formatted_id}"
    rescue => ex
      puts "Test Case #{source_test_case_formatted_id} not updated due to error"
      puts ex
    end
  end
end 
```

# android - Android - 分屏时的ActionBar（列表/详细信息）

> ID：13437556
> 
> 赞同：2
> 
> 时间：2012-11-18T04:39:42.857
> 
> 标签：android, android-fragments, android-actionbar, master-detail

我是 Fragments 的新手，我一直想知道这个问题的正确答案是什么。我有简单的列表 > 详细信息类型的应用程序，这最初是 2 个活动，没有片段，每个都有自己的操作栏（菜单）。

现在我想将它迁移到片段。

我使用片段创建了一个经典的平板电脑拆分视图，左侧为列表，右侧为详细信息。显然，这只是一项活动，仅显示列表的操作栏（操作项）。

我应该把细节中的行动项目放在哪里？正确的模式是什么？我应该为平板电脑创建一个包含列表和详细菜单项的自定义菜单文件的替代资源文件夹吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:32:36.647

只需为详细信息片段的菜单条目创建一个新的 fragment_details.xml。直接从片段中膨胀菜单。从列表片段扩充基本菜单。该活动应该根本没有附加菜单，因为所有菜单条目都附加到一个或另一个片段。

在平板电脑的情况下，android 会将片段的菜单与列表片段中的菜单合并。在较小的屏幕上，当只显示细节时，会显示片段的菜单。

# php - 在没有框架的情况下在 MVC 上管理视图 -> 控制器交互？

> ID：13437557
> 
> 赞同：1
> 
> 时间：2012-11-18T04:39:51.437
> 
> 标签：php, model-view-controller, design-patterns

我在理解 MVC 如何在 PHP 上工作时遇到了很多麻烦。在基于 Java 和 Swing 的程序上，或者在 C# 中使用 winforms 时，我的视图会触发控制器或演示者订阅的事件，并作为响应执行操作。但是，PHP 缺少事件。我会用 la java 来实现它们，但是当我无法触发方法作为超链接点击的响应时，我无法理解如何实现 MVC。

到目前为止，我正在控制器的 start() 方法中检查 POST 和 GET 变量，并以特定方式响应。例如，如果 $_POST 未设置，则显示用户注册视图。否则，使用 POST 变量注册用户。

我知道必须有更好的方法来做到这一点，但我在网上找不到任何解释 PHP 上的视图-> 控制器关系的东西。

你如何管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:45:00.233

> 当我无法触发方法作为超链接点击的响应时，我无法理解如何实现 MVC。

在您的路由器中，您可以使用[method_exists()](http://php.net/manual/en/function.method-exists.php)函数，例如：

```
<?php 
if(file_exists($controller)){
    include($controller);
    $this->controller = new $this->controller($this);
    //check method exists within loaded controller
    if(method_exists($this->controller, $this->action)){
        $this->controller->{$this->action}($this);
    }
}
?> 
```

# perl - Perl - 使用指针和索引进行二进制解包

> ID：13437566
> 
> 赞同：2
> 
> 时间：2012-11-18T04:43:06.140
> 
> 标签：perl, binary, block

我有一个包含 3 个文件、一个 PNG、一个 PHP 和一个 TGA 文件的二进制文件。

这里的文件给你的想法：[container.bin](http://fuzzywuff.com/C/Documents/My%20Games/container.bin)

文件是这样构建的：前 6 个字节是指向索引的指针，在本例中为 211794 然后您将所有 3 个文件一个接一个地堆叠，在偏移量 211794 处，您有索引，它告诉您文件从哪里开始并结束

在这个例子中，你有：

```
[offset start] [offset end] [random data] [offset start] [name]

6 15149 asdf 6 Capture.PNG
15149 15168 4584 15149 index.php
15168 211794 12 15168 untilted.tga 
```

这意味着 capture.png 从偏移量 6 开始，在偏移量 15149 结束，然后 asdf 是一个随机数据，并且开始偏移量再次重复。

现在我想做的是一个 perl 来分离这个二进制文件上的文件。perl 需要检查文件的前 6 个偏移量（头），然后跳转到索引位置，并使用列表将文件提取出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:59:03.503

混合[`seek`](http://perldoc.perl.org/functions/seek.html)和[`read`](http://perldoc.perl.org/functions/read.html)可用于完成任务：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Fcntl 'SEEK_SET';

sub get_files_info {
    my ( $fh, $offset ) = @_;
    my %file;

    while (<$fh>) {
        chomp;
        my $split_count = my ( $offset_start, $offset_end, $random_data, $offset_start_copy,
            $file_name ) = split /\s/;
        next if $split_count != 5;

        if ( $offset_start != $offset_start_copy ) {
            warn "Start of offset mismatch: $file_name\n";
            next;
        }

        $file{$file_name} = {
            'offset_start' => $offset_start,
            'offset_end'   => $offset_end,
            'random_data'  => $random_data,
        };
    }

    return %file;
}

sub write_file {
    my ( $fh, $file_name, $file_info ) = @_;

    seek $fh, $file_info->{'offset_start'}, SEEK_SET;
    read $fh, my $contents,
      $file_info->{'offset_end'} - $file_info->{'offset_start'};

    open my $fh_out, '>', $file_name or die 'Error opening file: $!';
    binmode $fh_out;
    print $fh_out $contents;

    print "Wrote file: $file_name\n";
}

open my $fh, '<', 'container.bin' or die "Error opening file: $!";
binmode $fh;
read $fh, my $offset, 6;

seek $fh, $offset, SEEK_SET;

my %file = get_files_info $fh, $offset;

for my $file_name ( keys %file ) {
    write_file $fh, $file_name, $file{$file_name};
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T12:02:39.260

这里唯一真正的困难是确保输入和输出文件都以二进制模式读取。这可以通过在`:raw`打开文件时使用 PerlIO 层来实现。

这个程序似乎做你想做的事。它首先定位索引块并将其读入字符串，然后打开该字符串以供输入，并读取每个组成文件的开始和结束位置以及名称。此后处理每个文件很简单。

请注意，除非索引块的格式比您说的更严格，否则您只能依赖每行上的第一个、第二个和最后一个空格分隔的字段，因为*随机文本*可能包含空格。也无法指定包含空格的文件名。

使用 的输出`Data::Dump`是为了演示正确的功能，而不是程序运行所必需的。

```
use v5.10;
use warnings;

use Fcntl ':seek';

use autodie qw/ open read seek close /;

open my $fh, '<:raw', 'container.bin';

read $fh, my $index_loc, 6;

seek $fh, $index_loc, SEEK_SET;
read $fh, my ($index), 1024;

my %contents;
open my $idx, '<', \$index;
while (<$idx>) {
  my @fields = split;
  next unless @fields;
  $contents{$fields[-1]} = [ $fields[0], $fields[1] ];
}

use Data::Dump;
dd \%contents;

for my $file (keys %contents) {

  my ($start, $end) = @{ $contents{$file} };
  my $size = $end - $start;
  seek $fh, $start, SEEK_SET;

  my $nbytes = read $fh, my ($data), $size;
  die "Premature EOF" unless $nbytes == $size;

  open my $out, '>:raw', $file;
  print { $out } $data;
  close $out;
} 
```

**输出**

```
{
  "Capture.PNG"  => [6, 15149],
  "index.php"    => [15149, 15168],
  "untilted.tga" => [15168, 211794],
} 
```

# schema - 这个 web.xml 错误是什么意思？

> ID：13437569
> 
> 赞同：32
> 
> 时间：2012-11-18T04:43:29.620
> 
> 标签：schema, web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.5" 
    xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"> 
```

> 引用的文件包含错误 (http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd)。有关更多信息，请右键单击问题视图中的消息并选择“显示详细信息...”

通过文件“web.xml”验证文件“web-app_2_5.xsd”时检测到以下错误。在大多数情况下，可以通过直接验证“web-app_2_5.xsd”来检测这些错误。但是，只有在 web.xml 的上下文中验证 web-app_2_5.xsd 时才会发生错误。

详细来说，我看到了一堆这样的：

> s4s-elt-character：除 xs:appinfo 和 xs:documentation 之外的架构元素中不允许使用非空白字符。看到'var _U="undefined";'

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-18T04:56:57.817

如果您替换`j2ee`为`javaee`，它将正常工作。

编辑 ：

```
<web-app version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

**编辑：**

要了解与此错误相关的任何进一步信息。请按照[链接](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/index.html)。在这里，您将找到 Java EE 部署描述符 (web.xml) 的模式。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-05-30T13:21:44.993

代替

```
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"> 
```

和

```
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee;http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"> 
```

解决方案是您必须在 URL 之间放置分号

我相信你不会再收到错误了:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-11T17:53:35.803

我建议您`;`在两段之间添加： `xsi:schemaLocation="http://java.sun.com/xml/ns/javaee`和`http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">`

像这样：

```
:xsi:schemaLocation="http://java.sun.com/xml/ns/javaee;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-07-04T18:57:56.970

**在xsi:schemaLocation**之间添加分号，如下所示

> `"http://java.sun.com/xml/ns/javaee;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"`

这也解决了我在`<servlet-name>`标签行中的这个错误。

“cvc-id.3：身份约束‘web-common-servlet-name-uniqueness’匹配元素‘web-app’的字段，但该元素没有简单类型。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-22T07:23:29.873

就我而言，我已经更换了

> xsi:schemaLocation=" **http://java.sun.com** /../.."

和

> xsi:schemaLocation=" **http://xmlns.jcp.org** /../.."

干杯!

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-18T04:52:18.940

从表面上看，schemaLocation 似乎是错误的。解决它似乎重定向到 HTML 页面而不是 XSD 架构。

除非您真的想在运行时进行 XSD 验证，否则我建议您简单地删除这一行。请记住，相关部分将由您的 servlet 容器验证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-11T13:27:19.320

如下替换 schemaLocation 为我解决了错误：

```
xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/j2ee; http://xmlns.jcp.org/xml/ns/j2ee/web-app_2_4.xsd" 
```

# python - NLTK 文本.generate()。使用不同的 ngram 模型执行此操作

> ID：13437570
> 
> 赞同：2
> 
> 时间：2012-11-18T04:43:52.207
> 
> 标签：python, nlp, nltk

我必须使用 nltk 生成随机句子。然而，似乎 text.generate() 只给了我们带有三元组的句子。有什么办法可以将其扩展为包括一元和二元？

我目前的代码是：

```
exclude = set(string.punctuation)
ln = ''.join(ch for ch in ln if ch not in exclude)

words = nltk.word_tokenize(ln)
my_bigrams = nltk.bigrams(words)
my_trigrams = nltk.trigrams(words)

tText = Text(words)
tText1 = Text(my_bigrams)
tText2 = Text(my_trigrams)
print tText.generate()
print tText1.generate()
print tText2.generate() 
```

generate() 函数的变化：

```
def generate(self, length=100, c=3):
    """
    Print random text, generated using a trigram language model.

    :param length: The length of text to generate (default=100)
    :type length: int
    :seealso: NgramModel
    """
    if '_trigram_model' not in self.__dict__:
        print "Building ngram index..."
        estimator = lambda fdist, bins: LidstoneProbDist(fdist, 0.2)
        self._trigram_model = NgramModel(c, self, estimator=estimator)
    text = self._trigram_model.generate(length)
    print tokenwrap(text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:22:12.960

阅读您的代码后，这里有一些注意事项：

*   *nltk.Text仅*将单词作为参数，而不是元组（二元组、三元组）。

*   nltk.Text.generate()*专门*使用三元组生成文本，[文档会告诉你](http://nltk.org/api/nltk.html#nltk.text.Text.generate)

如果要使用 unigrams 和 bigrams，则需要自己编写生成函数。[它应该很简单，以generate() 的 source](http://nltk.org/_modules/nltk/text.html#Text.generate)为起点。

您甚至可以将它动态附加到 nltk.Text 类，以便对象可以使用它：（`nltk.Text.generate_with_ngrams= my_generation_function`不要忘记将“self”作为第一个参数）

# css - 无法更改 Bootstrap 导航栏中的文本颜色

> ID：13437579
> 
> 赞同：12
> 
> 时间：2012-11-18T04:46:32.670
> 
> 标签：css, twitter-bootstrap

我一直在尝试更改引导模板导航栏中的文本颜色，但没有成功。有人知道我要去哪里错了吗？这是我的代码。

```
<!--navbar-->
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner" id="nav-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Restaurant</a>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#"><i class="icon-home icon-white"></i> Home</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret">   </b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
            </ul>
          </li>
        </ul>
        <form class="navbar-search pull-right" action="">
          <input type="text" class="search-query span2" placeholder="Search">
        </form>
      </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div><!-- /.navbar -->
<!--navbar--> 
```

CSS：

```
.navbar-inner {
    color: #FFF;
} 
```

我也试过这个：

```
#nav-inner {
    color: #FFF;
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-18T05:00:38.917

如果要更改选项卡的 css，则需要添加`color: #ddd;`到以下内容

```
.navbar .nav > li > a {
    float: none;
    line-height: 19px;
    padding: 9px 10px 11px;
    text-decoration: none;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
    color:  #ddd;
} 
```

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-18T05:09:19.957

我的猜测是，Bootstrap 定义了一个更具体的 CSS 规则，它胜过你更一般的规则。您应该使用 Firefox 或 Chrome 的开发人员工具检查页面，看看哪些样式胜过其他样式。如果你的风格甚至没有出现，那么你知道有一个更基本的问题，但如果 Bootstrap 的风格覆盖了你的颜色，你必须给你的风格更高的优先级。

对于健全性检查，试试这个矫枉过正的规则：

```
html body .navbar .navbar-inner .container {
    color: #FFF;
} 
```

如果这行得通，那么就尝试使用较低级别的特异性，看看你真正需要达到的具体程度。

如果一切都失败了，你总是可以这样做：

```
color: #FFF !important; 
```

[CSS2 规范](http://www.w3.org/TR/CSS2/cascade.html#specificity)对此进行了详细说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-23T14:21:43.190

```
.navbar .nav > li > a {
    float: none;
    color: #5FC8D6;
    background-color: #002E36;
}
.navbar .nav > li > a:hover {
    float: none;
    color: #002E36;
    background-color: #5FC8D6;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T20:14:22.513

可以的。。。试试看。。。。。。

```
.navbar-nav > li > a:link
{
color:red;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T04:14:38.457

```
nav.navbar-nav.navbar-right li a {
    color: blue;
} 
```

Works like a charm! Found it on another thread, so am not taking credit for it.

# c# - 按更高节点属性过滤linq

> ID：13437580
> 
> 赞同：0
> 
> 时间：2012-11-18T04:46:53.450
> 
> 标签：c#, linq, linq-to-xml

我正在尝试将新创建的对象序列化并插入到`XDocument`. 我设法做到了这一点，但我的代码看起来很臭。

如何在不链接属性的情况下针对更高的节点属性值进行测试，`Parent`就像我在下面所做的那样？

```
XDocument xdoc = XDocument.Load(path);

var elements = (
    from doc in xdoc.Descendants("Unit")
    where doc.Parent.Parent.Attribute("name").Value == _UnitTypeName &&
    doc.Parent.Parent.Parent.Parent.Attribute("name").Value == _UnitCategoryN
    doc.Parent.Parent.Parent.Parent.Parent.Parent.Attribute("name").Value == 
    select doc
    );

foreach (var element in elements)
{
    Unit unit =
        new Unit
        {
            Armour = _Armour,
            Attacks = _Attacks,
            BallisticSkill = _BallisticSkill,
            Composition = _Composition,
            DedicatedTransport = _DedicatedTransport,
            Initiative = _Initiative,
            Leadership = _Leadership,
            Options = _Options,
            SaveThrow = _SaveThrow,
            SpecialRules = _SpecialRules,
            Strength = _Strength,
            Toughness = _Toughness,
            UnitName = _UnitName,
            Weapons = _Weapons,
            WeaponSkill = _WeaponSkill,
            Wounds = _Wounds,
            Points = _Points
        };

    XmlSerializer serializer = new XmlSerializer(typeof(Unit));
    using (var stream = new MemoryStream())
    {
        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("", "");
        serializer.Serialize(stream, unit, ns);
        stream.Position = 0;

        //using (XmlReader reader = XmlReader.Create(stream))
        //{
        //    XElement xe = XElement.Load(reader);
        XElement xe = XElement.Load(@"C:\Test\tempfile.xml"); // For some reason loading via MemoryStream messes with xml formatting
        element.AddBeforeSelf(xe);
        //}
    }
    break;
}
xdoc.Save(path); 
```

这是 XML 文档的结构：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfArmy>
  <Army name="Tyranid">
    <unit-category>
      <UnitCategory name="Troops">
        <unit-type>
          <UnitType name="Infantry">
            <unit>
              <Unit points="5" name="Hornmagant" composition="20" weapon-skill="3" ballistic-skill="100" strength="3" toughness="4" wounds="1" initiative="3" attacks="3" leadership="5" saving-throw="6+" armour="Chitin" weapons="Many" special-rules="None" dedicated-transport="No" options="8">
                <Amount>0</Amount>
              </Unit>
              <Unit points="5" name="Termagant" composition="20" weapon-skill="3" ballistic-skill="100" strength="3" toughness="4" wounds="1" initiative="3" attacks="3" leadership="5" saving-throw="6+" armour="Chitin" weapons="Many" special-rules="None" dedicated-transport="No" options="8">
                <Amount>0</Amount>
              </Unit>
            </unit>
          </UnitType>
        </unit-type>
      </UnitCategory>
    </unit-category>
  </Army>
</ArrayOfArmy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:19:36.637

您可以使用**[复合 from 子句](http://msdn.microsoft.com/en-us/library/bb383978.aspx)**，这类似于使用嵌套`foreach`循环：

```
var elements = (
    from army in xdoc.Descendants("Army")
    where army.Attribute("name").Value == _ArmyName
    from unitCategory in army.Descendants("UnitCategory")
    where unitCategory.Attribute("name").Value == _UnitCategoryName
    from unitType in unitCategory.Descendants("UnitType")
    where unitType.Attribute("name").Value == _UnitTypeName
    from unit in unitType.Descendants("Unit")
    select unit
    ); 
```

注意：等效的方法语法是**[SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx)**。

# ruby - 访问字符串中的值

> ID：13437583
> 
> 赞同：-1
> 
> 时间：2012-11-18T04:47:14.337
> 
> 标签：ruby

在我试图学习的一些代码中，下面的 Maze 字符串被转换为一个数组（代码未显示）并保存在实例变量 @maze 中。迷宫的起点由迷宫中的字母“A”表示，可以在`@maze[1][13]`---第 1 行第 13 列访问。但是，我正在查看的代码使用 @maze[1][13, 1] 获取 A，您可以看到它在我的控制台中返回相同的结果。如果我执行@maze[1][13,2]，它会返回字母“A”，旁边有两个空格，依此类推。[13,3] 返回带有三个空格的“A”。

[13,2] 中的 2 是否意味着“返回从 [1][13] 开始的两个值？如果是，为什么？这是我没有得到的数组或二维数组的某些特性吗？

```
[20] pry(#<Maze>):1> @maze[1][13]
=> "A"
[17] pry(#<Maze>):1> @maze[1][13,1]
=> "A"
[18] pry(#<Maze>):1> @maze[1][13,2]
=> "A "
[19] pry(#<Maze>):1> @maze[1][13,3]
=> "A  " 
```

迷宫弦

```
MAZE1 = %{#####################################
# #   #     #A        #     #       #
# # # # # # ####### # ### # ####### #
# # #   # #         #     # #       #
# ##### # ################# # #######
#     # #       #   #     # #   #   #
##### ##### ### ### # ### # # # # # #
#   #     #   # #   #  B# # # #   # #
# # ##### ##### # # ### # # ####### #
# #     # #   # # #   # # # #       #
# ### ### # # # # ##### # # # ##### #
#   #       #   #       #     #     #
#####################################} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:23:31.910

从您显示的内容来看，这似乎`@maze`不是一个二维数组，而是一个字符串数组。`@maze[1]`是一个字符串。第二个`[]`应用于字符串。方法的第二个参数`String#[]`描述了要占用的字符长度。`1`不指定的时候可以认为是默认的。顺便说一句，你的问题是错误的。你描述

> 如果我执行@maze[1][13,2]，它会返回字母“A”，旁边有两个空格，依此类推。

但你的例子显示的是

> 如果我执行@maze[1][13,2]，它会返回字母“A”，旁边有一个空格，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T04:57:21.997

二维不是问题。这适用于任何数组。

```
s = ['k', 'i', 't', 't', 'y']
print s[2,3]
=> ["t", "t", "y"] 
```

从文档（http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D）：

```
ary[start, length] → new_ary or nil 
```

# ios - 设置包未与 NSUserDefaults 同步

> ID：13437584
> 
> 赞同：2
> 
> 时间：2012-11-18T04:47:30.263
> 
> 标签：ios, nsuserdefaults, settings.bundle

> **可能重复：**
> [多值类型设置捆绑字段总是返回 null](https://stackoverflow.com/questions/4784171/multivalue-type-settings-bundle-fields-alway-return-null)

我的 iOS 应用程序中有一个设置包，它在设置 [应用程序中生成下表](http://tinypic.com/r/j0zbbt/6)

在我的应用程序中，我尝试使用 NSUserDefaults 生成同一个表并最终得到[这个](http://tinypic.com/r/1gi3ys/6)

我检索值的代码是：

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
ds->use_cache = [userDefaults boolForKey:@"use_cache"];
ds->high_bitrate = [userDefaults boolForKey:@"high_bitrate"]; 
```

和

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
[[cell detailTextLabel] setText:[defaults stringForKey:@"version"]]; 
```

键为“version”的 stringForKey 始终返回空值。我似乎无法让我的应用程序识别我在设置包中定义的默认参数。

这是我的设置[包](http://tinypic.com/view.php?pic=2hyjpj&s=6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:00:11.487

应使用该`registerDefaults:`方法设置设置的默认值。这设置了`NSRegistrationDomain`它们将可用的位置。下面是一个例子。感谢 jrturton 和 Matthias Bauch 指出了我之前提到的第一个答案的问题[http://greghaygood.com/2009/03/09/updating-nsuserdefaults-from-settingsbundle](http://greghaygood.com/2009/03/09/updating-nsuserdefaults-from-settingsbundle)。

```
NSDictionary *appDefaults = [ NSDictionary
                              dictionaryWithObject:@"default_version_value" forKey:@"version" ];

[ [ NSUserDefaults standardUserDefaults ] registerDefaults:appDefaults ];

NSUserDefaults *userDefaults = [ NSUserDefaults standardUserDefaults ]; 
```

另请注意，每次应用程序启动时都需要设置这些默认值，如`registerDefaults:`.

> 注册域的内容不写入磁盘；您需要在每次应用程序启动时调用此方法。您可以在应用程序的 Resources 目录中放置一个 plist 文件，然后使用从该文件中读取的内容调用 registerDefaults:。

# clojure - Clojure, 方面, Defprotocol, Defrecord

> ID：13437586
> 
> 赞同：3
> 
> 时间：2012-11-18T04:47:35.350
> 
> 标签：clojure

```
(defprotocol IAnimal "IAnimal"
  (report [o]
    (println (type o) " reporting.\n")
    (inner-report o)
    (println (type o) " out.\n")))

(defrecord Dog [] IAnimal
  (inner-report [o]
    (println "Woof Woof.\n")))

(defrecord Cat [] IAnimal
  (inner-report [o]
    (println "Meow Meow.\n")))

(defrecord Vampire [] IAnimal
  (inner-report [o]
    (println "I don't sparkle.\n"))) 
```

现在，我希望它输出：

```
Dog reporting.
Woof Woof.
Dog out.
Cat reporting.
Meow Meow.
Cat out.
Vampire reporting.
I don't sparkle.
Vampire out. 
```

不幸的是，这不会发生，因为上面的代码没有编译。实现“这个”的最佳方法是什么？

“这个”的意思是我有一些我想成为协议的一部分的功能，我想为所有记录提供一个实现，并且我希望这个功能能够访问记录实现的专用功能。

（这样做的clojure方法是什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:46:12.933

协议就像 Java 接口，它们不能为其方法提供实现。但这有效：

```
(defn report [o]
  (println (type o) " reporting.\n")
  (inner-report o)
  (println (type o) " out.\n"))

(defprotocol IAnimal
  "the animal protocol"
  (inner-report [o] "a report"))

(defrecord Dog []
  IAnimal
  (inner-report [o]
    (println "Woof Woof.\n")))

(defrecord Cat []
  IAnimal
  (inner-report [o]
    (println "Meow Meow.\n")))

(defrecord Vampire []
  IAnimal
  (inner-report [o]
    (println "I don't sparkle.\n")))

(report (new Cat))
;; user.Cat reporting.
;; Meow Meow.
;; user.Cat out. 
```

# windows - 使用 Media Foundation 为多个流设置音量

> ID：13437587
> 
> 赞同：0
> 
> 时间：2012-11-18T04:47:36.817
> 
> 标签：windows, visual-c++, audio, ms-media-foundation

我正在为将同时播放多个音频流的应用程序提供音频代码。我对所有不同的选项都感到有些困惑，并且有些具体的事情我不太了解。

我正在使用 IAudioClient 调用来获取和设置音量。这是为多个流获取音量的最佳方式吗？

看来我必须调用 IAudioClient::Initialize。此函数需要 WAVEFORMATEX 结构。除了音量设置中使用的通道数之外，还有其他参数吗？此外，Initialize 似乎只能使用一次，并且音量设置和读取会发生多次。我应该保存对 IAudioClient 的引用并每次都使用它，还是每次获取或设置音量时都可以释放它？

如何区分在同一设备（端点）上播放的两个流？

这是设置音量的代码（通过常规检查确保每个调用成功消除以节省空间）：

```
hr = CoCreateInstance(__uuidof(MMDeviceEnumerator), NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&DeviceEnumerator));
hr = DeviceEnumerator->GetDevice((wchar_t *)currentPlaybackDevice.id, &pPlaybackDevice);
hr = pPlaybackDevice->Activate(__uuidof(IAudioClient), CLSCTX_INPROC_SERVER, NULL, reinterpret_cast<void **>(&pPlaybackClient));
hr = pPlaybackClient->Initialize(AUDCLNT_SHAREMODE_SHARED, 0, 0, 0, &pWaveFormat, 0);
hr = pPlaybackClient->GetService(__uuidof(IAudioStreamVolume), (void **)&pStreamVolume);
hr = pStreamVolume->GetChannelCount(&channels);
for(UINT32 i = 0; i < channels; i++)
     chanVolumes[i] = playbackLevel;
hr = pStreamVolume->SetAllVolumes(channels, chanVolumes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:07:52.210

通道数与音量无关。T调节音量需要获取接口`IAudioStreamVolume`，`IChannelAudioVolume`。见[MSDN 写道](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370977%28v=vs.85%29.aspx)：

> IAudioStreamVolume 接口**使客户端能够控制**和监视音频流中所有通道**的音量级别。**客户端通过调用 IAudioClient::GetService 方法获取对流对象上 IAudioStreamVolume 接口的引用，并将参数 riid 设置为 REFIID IID_IAudioStreamVolume。

这是给你的代码片段。它以更大的音量播放合成正弦波几秒钟，然后继续以更新的音量继续安静地播放。

```
#define _USE_MATH_DEFINES
#include <math.h>
#include <mmdeviceapi.h>
#include <audioclient.h>

#define _A  ATLASSERT
#define __C ATLENSURE_SUCCEEDED
#define __D ATLENSURE_THROW

int _tmain(int argc, _TCHAR* argv[])
{
    __C(CoInitialize(NULL));
    CComPtr<IMMDeviceEnumerator> pMmDeviceEnumerator;
    __C(pMmDeviceEnumerator.CoCreateInstance(__uuidof(MMDeviceEnumerator)));
    CComPtr<IMMDevice> pMmDevice;
    __C(pMmDeviceEnumerator->GetDefaultAudioEndpoint(eRender, eMultimedia, &pMmDevice));
    CComPtr<IAudioClient> pAudioClient;
    __C(pMmDevice->Activate(__uuidof(IAudioClient), CLSCTX_ALL, NULL, (VOID**) &pAudioClient));
    CComHeapPtr<WAVEFORMATEX> pWaveFormatEx;
    __C(pAudioClient->GetMixFormat(&pWaveFormatEx));
    static const REFERENCE_TIME g_nBufferTime = 60 * 1000 * 10000i64; // 1 minute
    __C(pAudioClient->Initialize(AUDCLNT_SHAREMODE_SHARED, 0, g_nBufferTime, 0, pWaveFormatEx, NULL));
    #pragma region Data
    CComPtr<IAudioRenderClient> pAudioRenderClient;
    __C(pAudioClient->GetService(__uuidof(IAudioRenderClient), (VOID**) &pAudioRenderClient));
    UINT32 nSampleCount = (UINT32) (g_nBufferTime / (1000 * 10000i64) * pWaveFormatEx->nSamplesPerSec) / 2;
    _A(pWaveFormatEx->wFormatTag == WAVE_FORMAT_EXTENSIBLE);
    const WAVEFORMATEXTENSIBLE* pWaveFormatExtensible = (const WAVEFORMATEXTENSIBLE*) (const WAVEFORMATEX*) pWaveFormatEx;
    _A(pWaveFormatExtensible->SubFormat == KSDATAFORMAT_SUBTYPE_IEEE_FLOAT);
    // ASSU: Mixing format is IEEE Float PCM
    BYTE* pnData = NULL;
    __C(pAudioRenderClient->GetBuffer(nSampleCount, &pnData));
    FLOAT* pfFloatData = (FLOAT*) pnData;
    for(UINT32 nSampleIndex = 0; nSampleIndex < nSampleCount; nSampleIndex++)
        for(WORD nChannelIndex = 0; nChannelIndex < pWaveFormatEx->nChannels; nChannelIndex++)
            pfFloatData[nSampleIndex * pWaveFormatEx->nChannels + nChannelIndex] = sin(1000.0f * nSampleIndex / pWaveFormatEx->nSamplesPerSec * 2 * M_PI);
    __C(pAudioRenderClient->ReleaseBuffer(nSampleCount, 0));
    #pragma endregion
    CComPtr<ISimpleAudioVolume> pSimpleAudioVolume;
    __C(pAudioClient->GetService(__uuidof(ISimpleAudioVolume), (VOID**) &pSimpleAudioVolume));
    __C(pSimpleAudioVolume->SetMasterVolume(0.50f, NULL));
    _tprintf(_T("Playing Loud\n"));
    __C(pAudioClient->Start());
    Sleep(5 * 1000);
    _tprintf(_T("Playing Quiet\n"));
    __C(pSimpleAudioVolume->SetMasterVolume(0.10f, NULL));
    Sleep(15 * 1000);
    // NOTE: We don't care for termination crash
    return 0;
} 
```

# ffmpeg - 使用 FFMPEG 选择最接近特定时刻的关键帧

> ID：13437588
> 
> 赞同：4
> 
> 时间：2012-11-18T04:48:02.383
> 
> 标签：ffmpeg, mp4, keyframe

我有一些第三方软件创建的 MP4 视频。我不知道关键帧是否定期。我已经成功地使用 FFMPEG 提取了对应于第 3 分钟（180 秒 * 帧/秒）的视频帧。

我想要做的是将“最接近”的关键帧提取到第三分钟——因为通常情况下，我用当前成功的代码提取的帧不是关键帧，因此是模糊的。

我知道有一种方法可以提取FFMPEG 中的*所有*关键帧，但是有没有一种方法可以提取最接近视频中特定时间的关键帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-03T18:37:43.167

您可以使用[选择过滤器](https://ffmpeg.org/ffmpeg-filters.html#select_002c-aselect)来选择“I”帧（也称为关键帧）。

```
 ffmpeg -ss 3:00 -i "my_video.mkv" -map 0:v:0 -filter:v "select=eq(pict_type\,I)" -vframes 1  3_min.jpg 
```

在上面的示例中，我们使用 FFmpeg 来：

*   转到下一个输入的三分钟标记`-ss 3:00`
*   定义输入`-i "my_video.mkv"`
*   从第一个输入中选择：视频轨道：特别是第一个`-map 0:v:0`
*   在视频上使用魔术选择过滤器`-filter:v "select=eq(pict_type\,I)"`
*   只从电影中抓取一个帧`-vframes 1`
*   定义保存图像的位置和格式（可以更改为`.bmp`、`.png`等...）`3_min.jpg`

# python - python的fractions.limit_denominator是如何实现的？

> ID：13437589
> 
> 赞同：8
> 
> 时间：2012-11-18T04:48:12.557
> 
> 标签：python, fractions

```
limit_denominator(max_denominator=1000000)
Finds and returns the closest Fraction to self that has denominator at most max_denominator. This method is useful for finding rational approximations to a given floating-point number:

>>>
>>> from fractions import Fraction
>>> Fraction('3.1415926535897932').limit_denominator(1000)
Fraction(355, 113) 
```

它不应该像尝试 a/999、b/998、c/997.. 并找到最佳近似值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T05:39:53.293

该`fractions`模块是用 Python 编写的，您只需查看源代码即可。它包含以下评论。

```
 # Algorithm notes: For any real number x, define a *best upper
    # approximation* to x to be a rational number p/q such that:
    #
    #   (1) p/q >= x, and
    #   (2) if p/q > r/s >= x then s > q, for any rational r/s.
    #
    # Define *best lower approximation* similarly.  Then it can be
    # proved that a rational number is a best upper or lower
    # approximation to x if, and only if, it is a convergent or
    # semiconvergent of the (unique shortest) continued fraction
    # associated to x.
    #
    # To find a best rational approximation with denominator <= M,
    # we find the best upper and lower approximations with
    # denominator <= M and take whichever of these is closer to x.
    # In the event of a tie, the bound with smaller denominator is
    # chosen.  If both denominators are equal (which can happen
    # only when max_denominator == 1 and self is midway between
    # two integers) the lower bound---i.e., the floor of self, is
    # taken. 
```

# python - 一个球体的体积？

> ID：13437591
> 
> 赞同：5
> 
> 时间：2012-11-18T04:48:29.140
> 
> 标签：python

半径为 r 的球体的体积是 4/3 π r3。半径为5的球体的体积是多少？提示：392.6 是错误的！

```
print (((4/3.0) * 3.14) * 5**3) 
```

它给了我这个

```
523.333333333 
```

怎么了？？？

蟒蛇2.7

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T04:51:51.237

没有错，你有正确的答案。但是，您可能希望使用`math.pi`而不是 3.14 来提高答案的准确性。

```
>>> from __future__ import division # not necessary if using python 3
>>> 4/3*math.pi*5**3
523.59877559829886 
```

[在wolfram alpha](http://www.wolframalpha.com/input/?i=volume%20of%20a%20sphere%20radius%205)上查看解决方案

如果您使用地板除法而不是真正的除法，您将得到 392.6，这就是提示的内容：

```
>>> 4//3*math.pi*5**3
392.69908169872411 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T08:17:39.337

对于那些使用版本 3 的人：简单的打印语句很有魅力。

```
print((4/3)*(22/7)*5**3) 
```

输出：523.8095238095237

# python - 如何在 Python 中评估字符串列表

> ID：13437595
> 
> 赞同：1
> 
> 时间：2012-11-18T04:48:48.543
> 
> 标签：python, string, list, int

我正在尝试制作一个脚本来评估一个单词，看看它的部分是否以任何方式加起来为 23（所有四个操作）。

我已经把它归结为创建一个可能方程的字符串列表：

```
answerList = [12+15+12,12+15-12,12+15/12,...] 
```

我现在遇到的问题是我无法以整数格式将它们从列表中取出，以查看它们是否实际上等于 23/32。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:55:32.893

查看 eval() 函数

```
>>> eval("12+15+12")
39
>>> eval("12+15/12")
13 
```

然后，您可以遍历列表，在对每个结果执行某些操作时调用 eval。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:07:50.387

如果您像示例一样存储数据，它将自动将它们转换为整数，例如：

```
>>> answerList = [12+15+12,12+15-12,12+15/12, ...]
>>> answerList
[39, 15, 13, ...] 
```

但是，如果要存储它并打印出哪个方程的结果为 23，则需要将它们存储为字符串，然后使用 eval 将它们转换为 int 以检查它是否等于 23，然后打印出方程。

```
answerList = ['12+15+12','12+15-12','12+15/12']
for equation in answerList :
  if eval(equation) == 23 :
    print equation 
```

# javascript - JavaScript 中的构造函数和方法链

> ID：13437603
> 
> 赞同：1
> 
> 时间：2012-11-18T04:50:21.707
> 
> 标签：javascript

我正在尝试使方法链接与我的构造函数一起工作，但我不确定如何去做。到目前为止，这是我的代码：

```
function Points(one, two, three) {
this.one = one;
this.two = two;
this.three = three;
}

Points.prototype = {

add: function() {
    return this.result = this.one + this.two + this.three;
},
multiply: function() {
    return this.result * 30;
}

}

var some = new Points(1, 1, 1);
console.log(some.add().multiply()); 
```

我试图在 add 方法的返回值上调用 multiply 方法。我知道有一些明显的事情我没有做，但我只是不确定它是什么。

有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T04:53:49.640

您不应该返回表达式的结果。而是返回这个。

```
Points.prototype = {

    add: function() {
        this.result = this.one + this.two + this.three;
        return this;
    },
    multiply: function() {
        this.result = this.result * 30;
        return this;
    }

} 
```

然后像这样使用它：`console.log(some.add().multiply().result);`

# dialog - 在 MVC 4 应用程序中打开对话框的最佳方式

> ID：13437604
> 
> 赞同：3
> 
> 时间：2012-11-18T04:50:26.573
> 
> 标签：dialog, asp.net-mvc-4

我刚开始学习 MVC，所以请多多包涵。

我有一个表格，其中有几个选项，您可以编辑、删除和显示详细信息。

![在此处输入图像描述](../Images/bab0361a44f20b9f1b22e4d037af03a3.png)

如果我现在单击详细信息按钮，它将带我到另一个页面**(Details.cshtml)** ，该页面与显示上表的**Index.cshtml** 位于同一控制器中。

这是表格的代码**（Index.cshtml）**

```
@model Collusus.Models.IndexModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<h2>Hello @Html.ActionLink(Model.userLoggedIN, "getProfile")</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>Change ID</th> 
    <th>Owner</th> 
    <th>Priority</th> 
    <th>Disposition Date</th> 
    <th>Completion Date</th> 
    <th>Do what?</th>
</tr> 
</thead> 
<tbody> 
@for(int i=0; i<Model.changes.Count(); i++)
{
<tr> 
    <td>@Model.changes[i].ID</td> 
    <td>@Model.changes[i].Owner</td> 
    <td>@Model.changes[i].Priority</td> 
    <td>@Model.changes[i].DispositionDate.ToShortDateString()</td> 
    <td>@Model.changes[i].ActualCompletionDate.ToShortDateString()</td> 
    <td>@if (Model.changes[i].Owner == Model.userLoggedIN)
        {
            @Html.ActionLink("Delete", "Delete", new { id=Model.changes[i].ID })
            @Html.ActionLink("Edit", "Edit", new { id=Model.changes[i].ID })
        }
        @Html.ActionLink("Details", "Details", new { id=Model.changes[i].ID })
    </td>
</tr> 
}
</tbody> 
</table> 
```

正如您所看到的，由于下面的代码，它只会将我带到另一个页面。

```
@Html.ActionLink("Details", "Details", new { id=Model.changes[i].ID }) 
```

**我想做的事：**

*   在对话框而不是另一个页面中打开删除、编辑或详细信息视图。
*   仍然能够像打开另一个页面一样具有相同的功能。

我不知道这是否有太多意义。我试图尽我所能解释它，并且在搜索谷歌/尝试其他解决方案的代码时感到沮丧，但无法让它发挥作用。

如果您建议除了 JQUERY 对话框之外的另一种方式，我也愿意采用该选项。感谢所有帮助，因为我一直很沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:08:22.167

我假设您想将它们打开到模式对话框中。为此，您可以从控制器返回部分视图。

您可以像这样向您的操作链接添加一个类：

```
@Html.ActionLink("Details", "Details", new { id=Model.changes[i].ID }, new { @class = "details-modal" }) 
```

您的详细信息操作方法：

```
public ActionResult Details(int id)
{
    // Your code here
    return PartialView("_Details", myModel); // return the partial view with the model
} 
```

jQuery（在我的脑海中，所以它可能不是 100% 正确）：

```
$('#my-dialog').dialog({
    autoOpen: false,
    width: 400,
    resizable: false,
    modal: true
});

$('.details-modal').click(function() {
    var theURL = $(this).attr('href');

    $('#my-dialog').load(theURL, function() {
        $(this).dialog('open');
    });

    return false; // ensures the browser is not redirected to the link's URL
}); 
```

# ruby - 推送到未按预期工作的数组

> ID：13437607
> 
> 赞同：2
> 
> 时间：2012-11-18T04:51:38.287
> 
> 标签：ruby

当我执行下面的代码时，我的数组“任务”最终会得到与数据库中每一行重复的 dbi 调用中相同的最后一行。

```
require 'dbi'
require 'PP'

dbh = DBI.connect('DBI:SQLite3:test', 'test', '')

dbh.do("DROP TABLE IF EXISTS TASK;")
dbh.do("CREATE TABLE TASK(ID INT, NAME VARCHAR(20))")   

# Insert two rows
1.upto(2) do |i|
    sql = "INSERT INTO TASK (ID, NAME) VALUES (?, ?)"
    dbh.do(sql, i, "Task #{i}")
end

sth = dbh.prepare('select * from TASK')
sth.execute

tasks = Array.new

while row=sth.fetch do
    p row
    p row.object_id
    tasks.push(row)
end

pp(tasks)

sth.finish 
```

因此，如果我的 TASK 表中有两行，那么不要在任务数组中获取它：

```
[[1, "Task 1"], [2, "Task 2"]] 
```

我明白了

```
[[2, "Task 2"], [2, "Task 2"]] 
```

完整的输出如下所示：

```
[1, "Task 1"]
19877028
[2, "Task 2"]
19876728
[[2, "Task 2"], [2, "Task 2"]] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:02:56.470

行对象中似乎有一些奇怪的行为，似乎是某种单例，这就是 dup 方法无法解决它的原因。

跳转到源代码似乎 to_a 方法将复制内部行元素，这就是它起作用的原因，因此答案是在行对象上使用 to_a ，或者如果您愿意，也可以将其转换为 Hash 以保留元数据。

```
while row=sth.fetch do
  tasks.push(row.to_a)
end 
```

但我推荐更红宝石的方式

```
sth.fetch do |row|
  tasks << row.to_a
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:54:18.003

你确定你已经*完全*复制了你的代码吗？AFAIK 您编写的代码**根本不应该工作......**您混合了两种不打算以这种方式使用的结构。

假设您来自 C 或 Java 背景，我错了吗？ruby 中的迭代非常不同，让我尝试解释一下。

ruby 中的 while 循环具有以下结构：

```
while condition
  # code to be executed as long as condition is true
end 
```

带有块的方法具有以下结构：

```
sth.fetch do |element|
  # code to be executed once per element in the sth collection
end 
```

现在有一些非常重要的东西要理解 : `fetch`，或者任何其他这种在 ruby​​ 中的方法，**都不是你在 C 中遇到的迭代器**——你不必*再次*调用它，直到迭代器到达末尾收藏。

您只需调用**一次**，并给它一个**块**作为参数，这是一种匿名函数（如在 javascript 中）。然后，该`fetch`方法将一个接一个地将集合的每个元素传递（“yield”）到该块。

所以在你的情况下正确的语法应该是：

```
sth.fetch do |row|
  p row
  tasks.push row
end 
```

可以用更“老派”的方式写成这样：

```
# define a function
# = this is your block
def process( row )
  p row
  tasks.push row
end

# pass each element of a collection to this function
# = this is done inside the fetch method
for row in sth
  process row
end 
```

我建议你阅读更多关于 blocks / procs / lambdas 的内容，因为它们在 ruby​​ 中无处不在，恕我直言，这是这种语言如此棒的原因之一。迭代器只是一个开始，你可以用这些做更多的事情......如果你需要好的参考文档，[镐](http://pragprog.com/book/ruby/programming-ruby)被认为是 ruby​​ists 中最好的来源之一，如果你愿意，我可以告诉你更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T05:12:13.043

我不知道您的代码是如何完全工作的，但我想如果您更改`tasks.push(row)`为`tasks.push(row.dup)`，那么它应该可以工作。如果是这种情况，那么`sth.fetch`每次都会给你相同的数组（相同的对象 id），即使它的内容被更新，并且你`tasks`重复地推入同一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T05:32:39.937

有很多事情可以发生，但试试这个。

首先确保使用parens将块传递给while。

```
while (row=sth.fetch) do
    p row
    tasks.push(row)
end 
```

然后是惯用的红宝石方式

```
sth.fetch do |row|
    p row
    tasks << row # same as push
end 
```

# html - 居中 ul 以便列也居中

> ID：13437608
> 
> 赞同：0
> 
> 时间：2012-11-18T04:51:39.037
> 
> 标签：html, css, html-lists

在我的页面中，我想要它，以便当您调整页面大小超过图片点时，图片将进入另一行，一直到每张图片都有自己的行。然后可能我不需要任何媒体查询。但不幸的是，我找不到居中的方法。除了进行数百个具有不同定位的媒体查询之外，我已经尝试了所有我能想到的方法。我不能把它变成一个块，因为那样它就不会进入行，我试过 margin: 0 auto;。我尝试过更改填充，我什至尝试过使用 html align="center"。没有任何工作。这是网站[http://spencedesign.netau.net/singaporehome.html](http://spencedesign.netau.net/singaporehome.html)我还有一个小问题，很抱歉用两个问题来解决这个问题。但是当它处于移动状态时，底部没有10px的内边距，新加坡标题在左侧而不是浮动的。这是我的代码

```
 <html>
<head>
<title> Singapore - Home </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width, initial scale=1.0">

<style>
*  
{
  margin: 0;
  padding: 0;

}
body
{
  background: url('woodbackground.jpg');
  background-size: cover;
  min-height: 100%;
  min-width: 100%;
  position: relative;
  top: 0; bottom: 0; left: 0; right: 0;

}

#container 
{
  width: 90%; 
  margin: 0 auto;

}

h1 
{
  font: bold 65px Helvetica, Arial, Sans-serif;
  text-align: center; 
  color: #eee;
  position: relative;
  top: 60px;
}

h3
{
  font: 25px Helvetica, Arial, Sans-serif; 
  text-align: center; 
  color: #eee;
  position: relative;
  top: 80px;

}

ul#gallery
{
  list-style: none;
  display: inline;
  margin: 0 auto;
  position: relative;
  top: 175px;
  width: 1300px;
}

ul#gallery li a
{
  float: left;
  padding: 10px 10px 25px 10px;
  background-color: #eee;
  border: 1px solid #fff;
  -moz-box-shadow: 0px 2px 15px #333;
  position: relative;
  margin: 10px;
  text-decoration: none;

}

ul#gallery li a:hover
{
  position: relative;
  top: -15px;

}

ul#gallery li a img
{
  height: 150px;
  width: 250px;
  max-width: 100%;

}

ul#gallery li a p
{
  margin-top: 25px;
  text-align: center;
  color: #000;
  font: Helvetica, Arial, Sans-serif;
  text-decoration: none;
  font-size: 20px;

}
@media screen and (max-width: 640px)

{

  ul#gallery
{
  left: 2.2%;
  width: 600px;
}
  ul#gallery li a:hover
{
  top: 0px;
}
}

</style>
<body>

<div id="container">

   <h1> Singapore </h1>

     <h3><i> Singapore is the worlds first machine that works </i>- Lee Kuan Yew </h3>

<ul id="gallery">

  <li><a href="#"> <img src="gallery.jpg" alt="gallery" /> <p> Gallery </p> </a></li>

  <li><a href="#"> <img src="facts.jpg" alt="facts" /> <p> Facts </p></a></li>

  <li><a href="#"> <img src="tour.jpg" alt="tour" /> <p> Tour </p></a></li>

  <li><a href="#"> <img src="author.jpg" alt="author" /> <p> Author </p> </a></li>

</ul>
<br/>
</div><!-- Container -->

</body>
<html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:08:24.800

我已经检查了您的链接，只需添加`text-align:center;`到您的容器中即可使`ul`s 居中（因为您将它们作为内联元素）

```
#container 
{
width: 90%;
margin: 0 auto;
text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T04:56:30.383

而不是浮动这些项目，您应该确保这些项目使用`display: inline-block`. 然后你可以`text-align: center`在父元素上设置。

这是一个显示效果的测试用例[http://oksushi.com/test/centered-tabs/](http://oksushi.com/test/centered-tabs/)

# php - 使用 jQuery 和 PHP 重新加载

> ID：13437611
> 
> 赞同：-3
> 
> 时间：2012-11-18T04:52:09.020
> 
> 标签：php, jquery, mysql, ajax, reload

我有一个 index.php 每隔两个用户会话更新一次：

[Index.php（之前）]

```
<script type="text/javascript">
$(function($) {
    var refresh = setInterval(function() {
        $.post('myfolder/reload_info.post.php', {
            id: <?php echo $_SESSION['id']; ?>
        }, function(data){
            clearInterval(this);
        });
    }, 1000);
});
</script> 
```

[reload_info.post.php]

```
(sql query... // $row is the result)
$_SESSION['name'] = $row->name;
$_SESSION['mail'] = $row->mail;
$_SESSION['status'] = $row->stat;
$_SESSION['cf'] = $row->cf; 
```

如果数据库（MySQL）发生任何变化，通常会收取使用任何会话的站点的所有功能。我想要的是在不重新加载页面的情况下更新 index.php () 的正文。

也就是说，如果我打开 index.php 文件并且在和编辑文件之间没有任何内容，我会在此之后放置任何文本，携带文本而无需按 F5 或使用 location.reload()。

可能吗？谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:55:16.750

也许你在追求类似 joconut 的东西：[https ://github.com/vdemedes/joconut](https://github.com/vdemedes/joconut)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:17:45.853

你想要这样的东西吗？

```
<script type="text/javascript">
$(function($) {
var id="<?php echo $_SESSION['id']; ?>";
    var refresh = setInterval(function() {
        $.post('myfolder/reload_info.post.php', {
            id: id;
        }, function(data){
            clearInterval(this);
            $('body .container').html(data);
        });
    }, 1000);
});
</script> 
```

在 reload_info.post.php 你应该返回一些东西......

回声回声 $_SESSION['id'];

# ruby - Ruby：引用 .dat 文件并将列分配给用户定义的数组

> ID：13437614
> 
> 赞同：-1
> 
> 时间：2012-11-18T04:52:22.637
> 
> 标签：ruby, parsing

Ruby 新手，尝试将给定列分配给可以在 .rb 文件中引用的数组值。此外，尝试学习，因此尽量不使用任何快捷方式（自制解决方案等）。

文件.dat

```
1  88    59    74          53.8       0.00         280  9.6 270  17  1.6  93 23 1004.5
2  79    63    71          46.5       0.00         330  8.7 340  23  3.3  70 28 1004.5
3  77    55    66          39.6       0.00         350  5.0 350   9  2.8  59 24 1016.8
4  77    59    68          51.1       0.00         110  9.1 130  12  8.6  62 40 1021.1 
```

以及更多这样的行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:07:26.917

试试这个：

```
input = File.open('./file.dat', File::RDONLY){|f| f.read }
array = input.lines.map(&:split) 
```

它会给你一个嵌套数组，例如：

```
[
  ["1", "88", "59", "74", "53.8", "0.00", "280", "9.6", "270", "17", "1.6", "93", "23", "1004.5"],
  ["2", "79", "63", "71", "46.5", "0.00", "330", "8.7", "340", "23", "3.3", "70", "28", "1004.5"],
  ["3", "77", "55", "66", "39.6", "0.00", "350", "5.0", "350", "9", "2.8", "59", "24", "1016.8"],
  ["4", "77", "59", "68", "51.1", "0.00", "110", "9.1", "130", "12", "8.6", "62", "40", "1021.1"]
] 
```

如果您想要数组中的数值，请使用：

```
array = input.lines.map{|l| l.split.map(&:to_f) } 
```

这会给你留下这样的数组：

```
[
  [1.0, 88.0, 59.0, 74.0, 53.8, 0.0, 280.0, 9.6, 270.0, 17.0, 1.6, 93.0, 23.0, 1004.5],
  [2.0, 79.0, 63.0, 71.0, 46.5, 0.0, 330.0, 8.7, 340.0, 23.0, 3.3, 70.0, 28.0, 1004.5],
  [3.0, 77.0, 55.0, 66.0, 39.6, 0.0, 350.0, 5.0, 350.0,  9.0, 2.8, 59.0, 24.0, 1016.8],
  [4.0, 77.0, 59.0, 68.0, 51.1, 0.0, 110.0, 9.1, 130.0, 12.0, 8.6, 62.0, 40.0, 1021.1]
] 
```

# php - 面临移动两个id的困难

> ID：13437619
> 
> 赞同：0
> 
> 时间：2012-11-18T04:53:58.383
> 
> 标签：php, codeigniter, codeigniter-2

通过`<?php echo $productlist->productid;?>`在href中我传递了productid，它很好，因为我可以显示这些项目。当我像这样传递**http://localhost/sample/index.php/userlogin/items/35**时，url 看起来像这样 。

```
<ul class="left_menu">
                <li class="odd"><a href="<?php echo  BASE_INDEX_URL;?>/userlogin/items/<?php echo $productlist->productid;?>">
                        <?php 
                         echo $productlist->productname;
                        ?>
                    </a></li>
</ul> 
```

我的模型采用这样的值

```
public function items($productid=0)
    {
    } 
```

但是我想在href中再传递一个id作为categoryid，我该怎么做

我的模型采用这样的值（对于 2 个参数）

```
 public function items($productid=0,$categoryid=0)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:48:51.517

最好的方法............在文件中编写一个 JavaScript 函数，该函数接受两个参数产品 id 和类别 id。在 href 调用该 JavaScript 函数并在 php.ini 中传递两个参数。在您将在文件中记下的 JavaScript 函数中使用

```
window.location.href = "<?php echo ROOT_FOLDER ?>/controller_name/function_name_in_the_controller/" +product_id +'/'+category_id ; 
```

在编写具有名称的函数时，您将在上面的 url 中分配并传递两个参数。获取在该函数中使用的这两个 id 并将其保存在一个数组中并传递该数组，如果您想在视图中使用它......

```
 public function ($product_id,$category_id) {

      $product_id = $product_id;
      $category_id = $category_id; 
```

}

# c++ - 为 DFS 创建邻接表

> ID：13437621
> 
> 赞同：0
> 
> 时间：2012-11-18T04:54:28.497
> 
> 标签：c++, algorithm, depth-first-search

我无法为我的程序创建深度优先搜索。到目前为止，我有一类边和一类区域。我想将所有连接的边存储在我所在区域的一个节点内。我可以判断我已经实现的 getKey() 函数是否连接了某些东西。如果两条边具有相同的键，则它们是连接的。对于下一个区域，我想在该区域内存储另一组连接的边，等等。但是，我并不完全了解 DFS，并且在实现它时遇到了一些麻烦。我不确定何时/何地再次调用 DFS。任何帮助，将不胜感激！

```
class edge
{ 
  private:
  int source, destination, length;
  int key;
  edge *next;
  public:
  getKey(){ return key; } 
}

class region
{
   edge *data;
   edge *next;
   region() { data = new edge(); next = NULL; }

};

void runDFS(int i, edge **edge, int a)
{
  region *head = new region();
  aa[i]->visited == true;//mark the first vertex as true
  for(int v = 0; v < a; v++)
  {
    if(tem->edge[i].getKey() == tem->edge[v].getKey()) //if the edges of the vertex have the same root
    {
        if(head->data == NULL)
        {
          head->data = aa[i];
          head->data->next == NULL;
        } //create an edge
        if(head->data)
        {
          head->data->next = aa[i];
          head->data->next->next == NULL;
        }//if there is already a node connected to ti
    }
    if(aa[v]->visited == false)
      runDFS(v, edge, a); //call the DFS again
  } //for loop
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:00:05.587

假设 n 是边的总数，k 是最终的区域数。为必要的 DFS 创建邻接列表可能成本太高 O(n^2) （如果 k=1 即所有边都属于同一区域），因此 dfs 将花费你 O(V+E) 即 O(n^2)最坏的情况。

否则问题很容易在 O(n * log(k)) 中解决，如下所示：

1.  遍历所有边，将它们添加到相应区域的头部（使用平衡 bst，例如 stl-map）[您也可以为此使用散列]
2.  遍历所有区域并以必要的线性方式连接它们

我猜这个问题没有保证的 O(n) 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T22:55:38.387

我尝试实现一个邻接表创建功能。adj_list 结构的next 指针将你带下邻接表（next 连接的2 个节点之间没有关系），列表指针是邻接表。该节点具有 adj_list 的地址，该地址具有其邻接列表。

```
struct node{
    int id;
    adj_list* adj;

};

struct adj_list{
    adj_list* next;
    adj_list* list;
    node* n;
    adj_list(node& _n){
        n = &(_n);
        next = NULL;
        list = NULL;
    }
};

node* add_node(int id,std::queue<int> q , node* root)
{
    node* n = new node(id);
    adj_list* adj = new adj_list(*n);
    n->adj = adj;

    if(root == NULL){
      return n;
    }
    std::queue<adj_list*> q1;

    while(1){
        adj_list* iter = root->adj;
        if(q.empty())break;
        int k = q.front();
        q.pop();
        while(iter){    
            if(iter->n->id == k){
                q1.push(iter);
                adj_list*  temp = iter->list;
                iter->list = new adj_list(*n);
                break;
            }
            iter = iter->next;
        }
    }

    adj_list* iter = root->adj;
    while(iter->next){
        iter = iter->next;
    }

    iter->next = adj;

    while(!q1.empty()){
        adj_list* temp = q1.front();
        q1.pop();
        adj->list = temp;
        adj = temp;
    }
    return root;
} 
```

# jquery - 如何从一个 jqgrid 中移动行数据

> ID：13437622
> 
> 赞同：0
> 
> 时间：2012-11-18T04:54:31.337
> 
> 标签：jquery, jqgrid

我正在尝试将行从一个网格移动到另一个网格。我能够将该行添加到第二个网格，但无法删除第一个网格中的行。

这是我的代码：

```
var RowList;
RowList = $('#questions_list').getGridParam('selarrrow');
for (var i=0, list=RowList.length; i<list; i++) 
{
var selectedId = RowList[i];

var selectedData = $('#questions_list').jqGrid('getRowData', selectedId );

$('#selectedQuestions_list').jqGrid('addRowData', selectedId , selectedData );

$('#questions_list').jqGrid('delRowData',selectedId );
} 
```

但是我无法正确删除行，当我添加 delrowdata 时，我无法正确添加。任何人都可以在代码中帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:31:55.660

您应该在保存行中的数据*之后**和*使用. 该选项是表示网格行的相应元素的属性值。因此，如果您第一次使用相同*的*rowid ，您将获得 id 重复，这在一个 HTML/XHTML 页面上是不允许的。如果你用电话交换线路，问题应该得到解决。*`addRowData``rowid``id``<tr>``addRowData`*`selectedId``addRowData``delRowData`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:38:31.610

在 stackoverflow 的其中一个线程中有一个更全面的答案，可能会对您有所帮助；

[如何在jqgrid中删除带有本地数据的行](https://stackoverflow.com/questions/6796480/how-to-delete-rows-with-local-data-in-jqgrid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:57:07.107

正如 Oleg 所说，用 addRowData 和 delRowData 调用交换行，问题应该得到解决。当我选择 2 行并尝试移动到其他网格时，它没有发生，它是从 grid1 添加所有行并在两个选择中只删除一行.

所以我用以下方式编写了代码：

```
var questionids = idsOfSelectedRows;//$('#questions_list').getGridParam('selarrrow');
var questionLength = questionids.length;
for (var i=0; i < questionLength; i++) 
{
 var selectedId = questionids[i];
 var selectedData = $('#questions_list').jqGrid('getLocalRow', selectedId);
 $('#selectedQuestions_list').jqGrid('addRowData', selectedId, selectedData);
 $('#selectedQuestions_list').trigger("reloadGrid");
}

for (var i = 0; i < questionLength ; i++) { 
 var selectedId = questionids[i];
 console.log("delete is "+ $('#questions_list').jqGrid('delRowData', selectedId));
 //$('#questions_list').trigger("reloadGrid");
} 
```

要获取 idsOfSelectedRows，请查看[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithPermanentMultiselect3.htm)，您也可以查看[链接](https://stackoverflow.com/questions/4710780/jqgrid-multiselect-only-selects-rows-on-the-current-page-if-paging-is-enabled)**

# python - Jython：添加到 sys.path 与传递 -D 有什么区别吗？

> ID：13437625
> 
> 赞同：1
> 
> 时间：2012-11-18T04:56:16.263
> 
> 标签：python, classpath, jython, pythonpath

我有一个 python 应用程序正在尝试加载一些 Java 库（特别是 Axis2 Web 服务）。当我通过 PyDev 项目源文件夹在 Eclipse 中添加必要的 jar 时，一切似乎都运行良好。但是，我希望能够在运行时通过添加来做到这一点`sys.path`，但是我的应用程序似乎无法正常工作。

在这两种情况下，我都可以很好地加载罐子，但是必须有所不同才能得到不同的结果。我的问题是，通过`sys.path`运行时添加 jar`sys.path.append()`与传递`-D`给 jython 解释器之间有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:56:57.483

事实证明，问题在于 Eclipse 启动 Jython 解释器的方式与从命令行手动启动 Jython 的方式不同。在 Eclipse Run Configuration 窗格中，有一种方法可以查看用于运行应用程序的命令。我的看起来像这样：

```
 /usr/lib/jvm/java-7-openjdk-i386/bin/java 
   -classpath /usr/local/lib/jython2.5.3/jython.jar:... 
   org.python.util.jython 
   -Dpython.path=... 
   myScript.py 
```

（注意：为了便于阅读，我添加了换行符）

因此，似乎 Jython 是从 Java 启动的，并且除了 python 路径之外，还必须为 Java 类路径提供路径。

# c - 如何从 /sys/module 恢复隐藏的可加载内核模块并处理恢复 holder_dir？

> ID：13437628
> 
> 赞同：2
> 
> 时间：2012-11-18T04:56:32.380
> 
> 标签：c, linux, linux-kernel, sys

我正在玩隐藏在 Linux Kernel 3.x 上的内核模块。我尝试从 /sys/module 隐藏和恢复模块。在内核版本 3.0 和 3.2.6 上一切正常。我可以加载和卸载模块并隐藏和取消隐藏它。当我在内核 3.6.6 上卸载模块时，出现以下错误：

rmmod：错误：无法打开'/sys/module/xxx/holders'：没有这样的文件或目录rmmod：错误：模块xxx正在使用中

有谁知道我如何恢复模块的 struct kobject *holders_dir 以便我能够卸载它而不会出错？

这是我的代码：

```
/* hide from /sys/module */ 
kobject_del(&__this_module.mkobj.kobj);
list_del(&__this_module.mkobj.kobj.entry);

/* add to /sys/module */    
kobject_add(&__this_module.mkobj.kobj,__this_module.mkobj.kobj.parent,"xxx"); 
```

# sql - SQL Azure 链接数据库

> ID：13437632
> 
> 赞同：2
> 
> 时间：2012-11-18T04:57:20.257
> 
> 标签：sql, database, azure-sql-database, sharding, multiple-databases

我有一个 SQL Azure 服务器 (DBn)，我需要将一些表从 (DBn) 复制到其他一些 SQL Azure 服务器 (DBn1,DBn2,....)。我应该能够通过工作者角色执行复制操作。这可以通过 SQL Azure 中的链接服务器功能实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:11:14.763

这是对 Azure SQL 数据库的链接服务器支持的常见误解。

您可以将 Azure SQL 数据库设置为 SQL Server 中的链接服务器，但不能从 Azure SQL 数据库本身设置链接到其他 Azure SQL 数据库或 SQL Server 的链接服务器。

您可以将 Azure SQL 数据库添加为链接服务器。不能在 Azure SQL 数据库中添加链接服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T00:42:44.970

您可以使用 Windows Azure SQL 数据同步，您可以在其中执行 Windows Azure 上的 SQL 数据库以及本地 SQL Server 实例之间的同步

# c++ - 如何在同一行获得 3 个整数输入并将其存储为 3 个不同的变量？

> ID：13437637
> 
> 赞同：0
> 
> 时间：2012-11-18T04:57:57.223
> 
> 标签：c++

我需要做这样的事情

```
int num1, num2, num3; 
```

用户输入： (num1) (空格或制表符) (num2) (空格或制表符) (num3) (空格或制表符)

（空格或制表符）可以是 " " 或 \t

```
cout << num1 << num2 << num3; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T04:58:41.003

```
cin >> num1 >> num2 >> num3; 
```

# java - 无法将 FTP 文件下载到本地目录 java

> ID：13437638
> 
> 赞同：0
> 
> 时间：2012-11-18T04:58:20.137
> 
> 标签：java, ftp, download

如果我尝试下载如下所示的文件，则会在此处下载

```
client.retrieveFile("/" + filename, fos);  // working 
```

但是，如果我尝试将 FTP 文件下载到特定的本地目录，如下所示，它不会在那里下载。谁能告诉我为什么会这样？

```
client.retrieveFile("C:\MydownloadedFiles" + filename, fos); // not working 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:05:15.847

请转义“\”。
它应该是：

```
client.retrieveFile("C:\\MydownloadedFiles" + "\\" + filename, fos); 
```

一般来说，我建议使用常量 File.separator，以支持跨平台。
我想到的另一个想法（请测试它）如下：

```
File downloadsDirectory = new File("c:","MyDownloadedFiles");
File retrievedFileOnLocalComp = new File(downloadsDirectory.getAbsolutePath(),filename);
client.retrieveFile(retrievedFileOnComp.getAbsolutePath(),fos); 
```

说明
- 第一行在“c:”的父路径下创建下载目录
第二行创建要下载到的文件名，父目录等于第一行结果的绝对路径。
第三个下载到它。您在记住使用“\\”时遇到了问题。
我建议使用这三行来解决这个问题并摆脱对斜线类型的平台依赖决定。

# jquery - 将 javascript 数组传递给 rails 控制器

> ID：13437642
> 
> 赞同：-1
> 
> 时间：2012-11-18T04:58:41.930
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试使用 jquery selectable 来替换我丑陋的复选框。我将此代码添加到我的 form_for 中，但我不知道如何将 tag_list 数组传递回我的控制器。

```
 <meta charset="utf-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />

    <style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <script>
    $(function() {
        $( "#selectable" ).selectable({
            stop: function() {
                var result = $( "#select-result" ).empty();
                var tag_names = []
                $( ".ui-selected", this ).each(function() {
                    var item = this.innerHTML;
                    result.append( ( item ) );
                    tag_names.push( item )
                });
            }
        });
    });
    </script>
</head>
<body>

<p id="feedback">
<span>Tags:</span> <span id="select-result">none</span>.
</p>

<ol id="selectable">
    <%@tags.each_key do |tag| %>
        <li class="ui-widget-content"> #<%=tag%> </li>
    <%end%>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:01:23.097

我可以看到两种方式：

1.  首先，在表单中创建一个隐藏字段。`tag_names`并通过 Jquery填充其值。它会在表单提交期间自动提交。
2.  其次，您可以创建一个 GLOBAL JS 变量`tag_names`。它将按上述方式填充，然后覆盖 Jquery 中的表单提交操作以包含`tag_names`. 像这样 ：

    ```
    $("#myForm").submit(function() {
         $(this).append("<input type='hidden' name='tag_names' 
         value='"+tag_names+"' />");
         $(this).submit();
    }) 
    ```

# java - 格式化输出方式

> ID：13437644
> 
> 赞同：2
> 
> 时间：2012-11-18T04:58:53.197
> 
> 标签：java, object, format

我对显示数组方法有疑问。我不知道如何使它格式化：

```
Credit Card # 4: 
8908 9014 8812 1331 
```

我需要做的是为每个数组元素调用 display 方法并在标签的字符串中传递数组的索引，我只是不知道该怎么做，我试过了，但它是错误的：

```
System.out.println(display("Credit Card # %d", cred1[i])); 
```

谁能建议一种方法来做到这一点？

```
package homework4;
import java.util.Scanner;
public class Prog4 {
static Scanner scanner = new Scanner(System.in);
public static void main(String[] args)
{   CreditCardNumber[] cred1;
    CreditCardNumber cred2 = getInput();
    Display("The complete number from your input:", cred2);
    cred1 = getInputArray();
    DisplayArray(cred1);
    TryAnother();
}

public static CreditCardNumber getInput() {
    String ID;
    String accNum;
    CreditCardNumber tempCred;      
    System.out.printf("Please enter issuer ID:");
    ID = scanner.next();
    System.out.printf("Please enter account number:");
    accNum = scanner.next();
    tempCred = new CreditCardNumber(ID, accNum);

    return tempCred;
}
public static void Display(String ch, CreditCardNumber cred2)
{

    System.out.println(ch);
    System.out.println(cred2.toString().replaceAll(".{4}", "$0   "));       
}

public static CreditCardNumber[] getInputArray()
{
    CreditCardNumber[] tempArray;
    String tempID;
    int size;       
    System.out.printf("Please enter size of the aray:");
    size = scanner.nextInt();
    if(size < 1)
    {
        size = 1;
    }
    tempArray = new CreditCardNumber[size];
    System.out.printf("Please enter issuer ID:");
    tempID = scanner.next();
    System.out.print(tempArray.length);
    for(int i = 0; i < tempArray.length; i++)
    {
        tempArray[i] = new CreditCardNumber();
        tempArray[i].CreateCred(tempID);
    }

    return tempArray;
}

public static void DisplayArray(CreditCardNumber[] cred1)
{
    for(int i = 0; i< cred1.length; i++)
    {
        System.out.println(display("Credit Card # %d", cred1[i]));
    }
}

public static boolean TryAnother()
{
    String s;
    System.out.printf("Get more credit card numbers? (n for no):");
    s = scanner.next();
    if(s.charAt(0) != 'N' && s.charAt(0) != 'n')
    {
        return true;
    }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:12:03.060

听起来你只需要一个换行符。例如。

```
System.out.println("Credit Card # " + cred1[i] + "\n" + cred2.toString()); 
```

新行字符“\n”会将输出放到它自己的行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:18:17.190

做这个：

```
System.out.format("Credit Card # %d:\n%s", i, cred1[i].toString()); 
```

# android - 系统调用 __NR_perf_event_open 似乎不适用于 Android

> ID：13437645
> 
> 赞同：1
> 
> 时间：2012-11-18T04:59:10.593
> 
> 标签：android, performance, android-ndk, perf

我想为我的 Android 应用程序使用 __NR_perf_event_open 的系统调用。

该代码在 linux 上正常运行，但在 Android 上无法运行。

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <sys/ioctl.h>
#include <perf_event.h>
#include <asm/unistd.h>

long perf_event_open( struct perf_event_attr *hw_event, pid_t pid,
                  int cpu, int group_fd, unsigned long flags )
{
    int ret;

    ret = syscall( __NR_perf_event_open, hw_event, pid, cpu,
               group_fd, flags );
    return ret;
}
int main() {
//In the main function, I call perf_event_open:
 struct perf_event_attr pe;
 int fd;
 fd = perf_event_open(&pe, 0, -1, -1, 0);
 ...
} 
```

但是，fd 始终返回值 -1。当我使用“errno.h”时，它给出了错误信息：EBADF：bad file descriptor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-14T03:23:11.203

您尚未配置“struct perf_event_attr pe;” 然而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:52:28.097

因为 pid == -1 和 cpu == -1 无效。你可以在[http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html查看它](http://web.eece.maine.edu/~vweaver/projects/perf_events/perf_event_open.html)

# distributed-transactions - 两个阶段提交和合并执行和准备阶段

> ID：13437648
> 
> 赞同：1
> 
> 时间：2012-11-18T05:00:18.613
> 
> 标签：distributed-transactions, xa, 2phase-commit

据我了解，在两阶段提交之前甚至需要运行往返通信以将事务发送到每个站点。每个站点都会执行他们的事务部分，当协调器从所有站点获得响应时，它会运行两阶段提交。这将启动准备阶段等。

为什么有必要将准备阶段与两阶段提交之前的执行分开？是否有理由不合并执行和准备阶段，从而减少往返通信成本？

这是我之前的[问题](https://stackoverflow.com/questions/13425824/xa-two-phase-commit-and-execution-in-prepare-phase)的后续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:10:01.217

这样做有几个很好的理由：

1.  操作可能需要来自其他站点的数据。如果合并执行和准备阶段，您将如何在不同站点的数据项之间实现交换（a，b）操作？
2.  协调器很可能成为性能瓶颈。合并执行和提议阶段将使其参与中继应用程序数据，进一步使其过载。
3.  透明和封装。请注意，在回复您[之前的问题](https://stackoverflow.com/questions/13425824/xa-two-phase-commit-and-execution-in-prepare-phase)（即业务逻辑）中开始/提交之间的代码根本不涉及分布式事务。它不需要知道将涉及哪些站点，甚至是多少站点！它调用可能是（或不是...）对未知站点的远程调用的任意过程。要合并执行和准备，您必须将应用程序逻辑显式打包到每个参与者的独立回调中。

此外，在考虑涉及持久性的性能时，您应该关注意味着刷新日志的往返。执行阶段的调用不需要刷新日志，因此应该比准备和提交阶段便宜得多。

# stored-procedures - 如何从 C# 程序连接到本地 Microsoft Sql server 2012 Express 数据库？

> ID：13437652
> 
> 赞同：1
> 
> 时间：2012-11-18T05:00:44.317
> 
> 标签：stored-procedures, sqlcommand

有人可以帮我修复我的连接字符串吗？我是使用 MS SQL Management Studio 的绝对初学者，但我是一位经验丰富的 C# 程序员。我想弄清楚如何连接到我的 PC 上的本地数据库。我今天刚刚安装了 SQL Server 2012 Express，并创建了一个包含一行数据的表。我正在尝试从 C# 程序访问该表。我一直在寻求调用存储过程（没有参数）的帮助，似乎我做的一切都是正确的，但我得到一个异常错误“找不到存储过程'GetCustomers'。” 我也尝试将我的过程名称更改为“dbo.GetCustomers”、“SqlTest.dbo.GetCustomers”和“SqlTest.GetCustomers”，但似乎没有任何效果。显然我没有正确连接到我的数据库。我' 现在已经为此工作了 4 个小时，所以我该停下来寻求帮助了。我认为我所需要的只是一个良好的连接字符串和该过程的正确语法。

```
 Connect c = new Connect();
        if(c.MakeConnection())
        {
            try
            {
                DataSet data = new DataSet();
                SqlDataAdapter adaptor = new SqlDataAdapter();

                //changed to use stored procedure
                adaptor.SelectCommand = new SqlCommand("GetCustomers", c.MyConnect);
                adaptor.SelectCommand.CommandType = CommandType.StoredProcedure;
                //adaptor.SelectCommand.ExecuteNonQuery();//this throws an exception.
                adaptor.Fill(data);//this throws an exception.
            }
            catch (Exception e)
            {
                Logger.WriteMessage(e.Message);
            }
            finally
            {
                c.CloseConnection();
            } 
```

我的连接类包含以下内容：

```
string connection = Properties.Settings.Default.DatabaseConnectString;
sqlConnection = new SqlConnection(connection);
sqlConnection.Open(); 
```

我尝试过的连接字符串似乎可以连接：

```
Server=(localdb)\v11.0;Trusted_Connection=Yes;
Server=(localdb)\v11.0;Integrated Security=true; 
```

我的数据库名称是 SqlTest。我在我的连接字符串中尝试了几种变体，但其中大多数都会引发登录失败异常错误。我验证了我的 Windows 用户 ID 具有数据库的管理员权限。

我尝试过的连接字符串导致我出现登录错误：

```
Server=(localdb)\v11.0;Initial Catalog=SqlTest;User ID=Raphael\couchpotato;Integrated Security=SSPI;Trusted_Connection=Yes;        
Server=(localdb)\v11.0;Initial Catalog=dbo;User ID=Raphael\couchpotato;Integrated Security=SSPI;Trusted_Connection=Yes;
Server=(localdb)\v11.0;Database=SqlTest;Trusted_Connection=Yes;
Server=(localdb)\v11.0;Database=SqlTest;Integrated Security=true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:32:32.100

我想我需要的只是睡一觉。;-)

我需要将我的所有 SQL 服务器服务设置为自动。由于某种原因，它们被设置为手动，因此它们没有启动。

然后，我还需要在我的连接字符串中设置正确的服务器名称。这与启动 SQL Server Management Studio 时用于登录的服务器名称相同。这是连接和访问正确数据库和表的连接字符串：

```
Server=RAPHAEL\SQLEXPRESS;Database=SqlTest;Trusted_Connection=Yes; 
```

# asp.net-mvc - 实体框架 MVC 控制器

> ID：13437656
> 
> 赞同：4
> 
> 时间：2012-11-18T05:01:05.080
> 
> 标签：asp.net-mvc, entity-framework

我正在使用 Visual Studio 2012。我创建了一个 Class 项目并将 EF 数据模型添加到该项目中。我从现有的 SQL Server 数据库创建了数据模型。我创建了一个 MVC 4 项目，将实体连接字符串添加到 Web 配置，并添加了数据项目引用。

到目前为止一切都很好。

现在我想使用实体框架添加一个 MVC 控制器。我选择了一个模型类。我选择数据上下文类。单击添加。

VS 弹出一个错误，错误消息的最后一部分是类可能在编译的程序集中{这是真的}。

> “AA”不是指定的“aanamespace.aaEntity”类的一部分，实体类无法修改为它的 DbSet 属性。例如，“aaEntity”可能在已编译的程序集中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T21:50:12.717

我处于同样的情况，我创建了一个类库，其中我有我所有的 .edmx，当我引用我的 mvc 项目时，我得到了完全相同的错误消息，我在这里发布了我的问题（stackoverflow.com/问题/18552864/…)

**我是如何解决的：**

关闭 Visual Studio 并再次打开它...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T02:24:20.200

我想花时间自己回答这个问题，以便将来可以帮助有类似问题的其他人。

这就是我所做的。

在我的 MVC 项目的 Models 文件夹中创建了 .edmx 文件。构建 MVC 项目

现在我可以为 .edmx 文件中的任何表添加一个控制器。

注意：我认为最佳实践是在我的解决方案中创建一个包含 .edmx 文件的项目。我将此项目称为 myData。

我在我的 MVC 项目中添加了对这个项目的引用，并没有运气就尝试了这个脚手架。

* * *

我希望这对其他人有帮助，因为解决方案非常简单。

格里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T04:52:56.913

该问题是由 Visual Studio 2012（早期访问）扩展的 VSCommands 引起的。一旦我卸载它，问题就消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T08:18:21.437

运行 Visual Studio（以管理员身份运行）对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T15:45:28.517

在没有看到确切错误的情况下，我只能提出我在使用 EF 控制器脚手架时遇到的问题以及我是如何解决它的。如果您使用部分类扩展了 EF 上下文类，则必须从项目中删除后者并在生成控制器之前重新编译，否则 EF 脚手架将无法工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-19T10:42:38.523

虽然这是一个非常古老的问题，但也许像我这样的人仍然面临同样的问题，没有一个建议的解决方案可以帮助他们。

创建新控制器/脚手架时出现此错误消息的原因是您的 EntityFramework 的版本。

**怎么修：**

如果您的项目是 MVC4，那么您应该使用实体版本 5。如果您使用实体版本 6，您将面临这个问题。

删除您的 .edmx 文件并添加您的 EntityFramework 版本 5。它将按预期工作。

# java - 将我的静态程序分析器演示为 Web 应用程序？[不向客户端发送 .jar 文件]

> ID：13437659
> 
> 赞同：3
> 
> 时间：2012-11-18T05:01:31.790
> 
> 标签：java, web-applications, static-analysis

我一直在开发一个静态程序分析器（一种试图在编译时检测程序错误的工具），它几乎完成了。我想在网上发布一个演示版本，以便少数可能对该工具感兴趣的人可以测试它的功能。

上下文： 1\. 如果需要，我有一台个人电脑用作服务器。否则，我不确定在技术上是否可以将演示放到我研究所的计算机上，因为他们的计算机没有用于启动演示所需的库。

2.  我正在使用 Eclipse 和 Maven 来开发这个分析器。分析器是用 Java 编写的。

3.  分析仪有点费时。例如，完成一项有趣的工作需要 5 秒和 500 Mo JVM 虚拟内存。所以我需要限制访问者的数量。

4.  我不打算将 .jar 文件发送给客户，因为我不知道他们会是谁。

5.  我对 Web 应用程序一无所知。

在这种情况下，您认为在网络上演示我的分析器的最简单方法是什么？

这可能与大多数关于如何将桌面程序转换为 Java Web 应用程序的问题不同，例如 [这个](https://stackoverflow.com/questions/2004696/how-to-make-my-desktop-application-to-web-app-application-in-java)

谢谢你。

[编辑] 如果要考虑上述约束 3，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T05:09:36.300

您可能正在寻找[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)，这是流行分析器使用的部署选项，[`FindBugs`](http://findbugs.sourceforge.net/). 此[示例](https://sites.google.com/site/drjohnbmatthews/subway)说明了几个关键概念并利用了最低成本的托管。

附录：@Capn Sparrow 有用地评论说 Java Web Start 将程序 JAR 的副本从服务器下载到客户端，违反了问题中的要求三。这需要几个风险/收益权衡：

*   优点：服务器可以轻松更新，以确保客户端始终拥有最新版本。JAR 缓存在客户端上，从而最大限度地减少更新延迟。

*   缺点：缓存的 JAR 可能被反编译或篡改。用户必须接受`<security>`选择的任何设置或拒绝该应用程序。使用[`jarsigner`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/jarsigner.html)可以减轻一些风险。

# php - 从 Facebook 的 Graph API 嵌入视频的最佳方式是什么？

> ID：13437661
> 
> 赞同：4
> 
> 时间：2012-11-18T05:01:46.883
> 
> 标签：php, facebook-graph-api, video, embed

我正在尝试展示从 Facebook 的 Graph Api 返回的视频。我有视频的来源，可以是 YouTube 视频、Vimeo 视频、Facebook 视频或发布到新闻源的任何其他类型的视频。

我的 $facebookdata 返回这个：

```
[source] => http://www.youtube.com/v/PwD4t9gcLb4?version=3&autohide=1&autoplay=1 
```

我一直将 SOURCE 的值设置为**$status_video_embed**，如下所示：

```
$status_video_embed = str_replace("autoplay=1", "autoplay=0", $data['source']); 
```

此外，您可以看到我将自动播放替换为 0（如果存在）。

我一直在嵌入要显示的视频，如下所示：

```
echo '<iframe src="' . $status_video_embed . '" type="text/html" allowscriptaccess="always" allowfullscreen="true" width="350" height="197"></iframe>'; 
```

这可行，但我遇到了一些问题。首先，如果它是 Facebook 视频以外的任何视频，它可以正常播放，但我无法使其全屏显示。我假设这是因为它嵌入在 iFrame 中。第二个问题是 Facebook 上传的视频，它们会自动播放，我不知道如何防止这些视频自动播放。

我采取的第二种方法是：

```
echo '<object width="350" height="197" ><param name="allowfullscreen" value="true" />';
echo '<param name="movie" value="' . $status_video_embed . '" />';
echo '<embed src="' . $status_video_embed . '" type="application/x-shockwave-flash" allowfullscreen="true" width="350" height="197"></embed>';
echo '</object>'; 
```

这会显示视频 - 除了它们需要永远加载和显示 - 它会阻止 Facebook 视频自动播放，但现在，当我点击任何视频的播放时，什么都没有发生。通过嵌入的视频作品没有控制。

有谁知道在这种方法中嵌入视频的最佳方法是什么？我从返回的数组中获得了视频的来源。

我希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-03-04T14:05:29.690

为什么不用 HTML5 开发自己的播放器，然后解析视频页面的 URL？

# android - 我可以在 android 中使用我的应用程序发送电子邮件吗

> ID：13437663
> 
> 赞同：2
> 
> 时间：2012-11-18T05:02:00.103
> 
> 标签：android, email, jakarta-mail

我已经开发了一个基于客户的应用程序，每个流程都需要向客户提及..

我已经为我的应用程序设置了所有设计和功能，现在我需要将邮件功能集成到我的应用程序中。

帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:12:28.940

您可以使用以下方法..

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"recipient@example.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_TEXT   , "body of email");
try {
     startActivity(Intent.createChooser(i, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
Toast.makeText(MyActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show);
} 
```

并点击[链接](https://stackoverflow.com/questions/2197741/how-to-send-email-from-my-android-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:14:20.917

添加Mail.java（类）......我使用这个例子......

```
package com.samples.broadcastreceiver;
import java.util.Date;
import java.util.Properties;
import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator { 
  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465";
    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
      Session session = Session.getInstance(props, this); 

      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 

      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } else { 
      return false; 
    } 
  } 

  public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 

  public void setBody(String _body) { 
    this._body = _body; 
  }

public void setSubject(String subj) {
    this._subject = subj;
}

public void setFrom(String string) {
    // TODO Auto-generated method stub
    this._from= string;

}

public void setTo(String[] toArr) {
    // TODO Auto-generated method stub
    this._to = toArr;
} 

  // more of the getters and setters ….. 
} 
```

然后从活动例如发送邮件做...

```
public void SendMail() {
    Context context = getApplicationContext();
    Mail m = new Mail("MAIL_ADDRESS@gmail.com", "PASSWORD"); 
    String[] toArr = {GetMailAddress()}; //address to send
    m.setTo(toArr); 
    m.setFrom("MAIL_ADDRESS@gmail.com"); 
    m.setSubject("SUBJECT");         
    m.setBody("BODY");
    try { 
        String path = "/mnt/sdcard/xxxx";
         File fileDir = new File( path );
         if(!fileDir.exists() || !fileDir.isDirectory())
         {
             return;
         }
         String[] _files = fileDir.list(); 
         for ( int i = 0 ; i < _files.length ; i++  )
         { 
               _files[i] = path + "/"+ _files[i];
         }

      m.addAttachment(_files[0]);  

      if(m.send()) { 
    //    Toast.makeText(context, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 

        File fileIn = new File(_files[0]);
        boolean deletedIn = fileIn.delete();
      } else { 
     //   Toast.makeText(context, "Email was not sent.", Toast.LENGTH_LONG).show(); 
      } 
    } catch(Exception e) { 
   //   Toast.makeText(context, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T05:21:07.903

您可以像这样使用 Intent 发送

```
 Intent email_intent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:")); 
 email_intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "subject"); 
 email_intent.putExtra(android.content.Intent.EXTRA_TEXT,"Your Mail Body"); 
 startActivity(email_intent); 
```

并使用使用 Gmail 身份验证的 JavaMail API 检查这一项对您很有用。

[参考链接](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

# ruby-on-rails - Rails 3，设计：使用不同的布局进行注册，登录页面

> ID：13437664
> 
> 赞同：3
> 
> 时间：2012-11-18T05:02:52.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, layout, devise

我想为注册和登录页面呈现不同的布局。

[有一个类似的线程可以处理这个问题，但并不完全相同。](https://stackoverflow.com/questions/4412018/rails-devise-how-to-render-login-page-without-a-layout)

我需要能够仅为注册和登录页面呈现不同的布局，而不是控制器中的所有其他操作。

在下面`users/registrations_controller.rb`

```
class Users::RegistrationsController < Devise::SessionsController
  def new
    render :layout => "auth"
  end
end 
```

我的路线

```
MasterCard::Application.routes.draw do
  devise_for :users, :controllers => { :registrations => "users/registrations" }, :path => "users", :path_names => { :sign_in => 'login', :sign_out => 'logout' }

  devise_scope :user do
    get "login", :to => "users/sessions#new"
    # post "logout", :to => "users/sessions"
  end

  root :to => 'pages#home'
  match '/about' => 'pages#about'
end 
```

这是我去注册页面时遇到的错误。

`undefined method`nil 的错误：NilClass`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:24:56.310

首先，您的意思是子类化`Devise::RegistrationsController`而不是子类化`Devise::SessionsController`？

覆盖设计控制器操作似乎有点毛茸茸。您可以通过覆盖`RegistrationsController`使用的默认布局来避免这种情况：

```
class Users::RegistrationsController < Devise::RegistrationsController
  layout "auth"
end 
```

* * *

至于为什么您会收到该特定错误：

您正在重新定义`new`我假设应该`Devise::RegistationsController`具有以下定义的操作：

```
def new
  resource = build_resource({})
  respond_with resource
end 
```

它设置 a`resource`然后在设计辅助方法中引用`devise_error_messages!`：

```
def devise_error_messages!
  return "" if resource.errors.empty?
  ...
end 
```

在默认设计“sign_up”模板中使用，`users/registrations/new.html.erb`：

```
...
<%= form_for(resource, :as => resource_name, ...) do |f| %>
  <%= devise_error_messages! %>
... 
```

您看到该错误是因为您没有定义`resource`.

# common-lisp - 如何避免为一个常见的 lisp 项目加载多个 asdf 文件？

> ID：13437669
> 
> 赞同：5
> 
> 时间：2012-11-18T05:04:19.193
> 
> 标签：common-lisp, slime, quicklisp

在阅读 Peter Seibel 的书*Practical Common Lisp*时，我在理解如何结合 Emacs 的 SLIME 和 quicklisp 处理 Common Lisp 包系统时遇到了一些困难。他提供的项目结构如下：

*   `spam.lisp`在 package`com.gigamonkeys.spam`中，它依赖于另外两个包，`cl-ppcre`和`com.gigamonkeys.pathnames`.
*   `pathnames.lisp`在包装中`com.gigamonkeys.pathnames`
*   `spam.asd`，它描述了`com.gigamonkeys.spam`包的依赖关系
*   `pathnames.asd`，它描述了`com.gigamonkeys.pathnames`包的依赖关系

我目前发现构建最终目标 spam.lisp 的唯一方法是：

1.  `pathnames.asd`使用 SLIME ( `C-x C-k`)编译和加载文件
2.  通过在 REPL`com.gigamonkeys.pathname`中键入来加载包`(asdf:operate 'asdf:load-op 'spam)`
3.  通过在 REPL`cl-ppcre`中键入来加载包`(ql:quickload "cl-ppcre")`
4.  `spam.asd`使用 SLIME编译和加载文件
5.  通过在 REPL`com.gigamonkeys.spam`中键入来加载包`(asdf:operate 'asdf:load-op 'spam)`

使用单个文件`spam.lisp`（有没有办法`spam.lisp`用更少的命令来加载和递归地加载它的依赖项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T09:04:02.393

[![](../Images/a5f4f986b7af431084c7fedf8c420703.png)](https://i.stack.imgur.com/7sxj3.gif)

[来源+全文](https://web.archive.org/web/20171127051637/http://weitz.de:80/packages.html)

长话短说，包是符号包，系统描述文件和其他系统之间的关系。

因此，在这里使用您的结构是一个简单的系统定义：

```
(asdf:defsystem #:spam-filter
  :serial t
  :description "Simple Spam Filter"
  :author "PCL"
  :depends-on (#:cl-ppcre
               #:com.gigamonkeys.pathnames)

  :components ((:file "package")
               (:file "spam"))) 
```

现在，我假设系统`com.gigamonkeys.pathnames`在 `~/src/lisp/com/gigamonkeys/pathnames/`并且垃圾邮件过滤器在 `~/src/lisp/spam-filter/`.

1.  `M-x``slime``RET`
2.  `,cd`~/src/lisp/com/gigamonkeys/路径名`RET`
3.  `(push (truename ".") asdf:*central-registry*)`
4.  `,cd`~/src/lisp/垃圾邮件过滤器`RET`
5.  `(push (truename ".") asdf:*central-registry*)`
6.  `(ql:quickload :spam-filter)`

因为 Quicklisp 依赖 ASDF 来加载系统，所以您必须在 ASDF 搜索路径中添加系统目录。

您还可以将系统添加到 Quicklisp 的搜索路径中`~/quicklisp/local-projects/`。您可以将代码存储在那里或使用符号链接。

PS：你可以在 [这里](https://github.com/daimrod/Emacs-config/blob/master/config-slime.el#L76)找到 一个可以让我写`,add``RET` 而不是`(push (truename ".") asdf:*central-registry*)`.

就在另一个快速加载系统的粘液快捷方式下方。( `,ql``some-system-name``RET`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T09:04:46.510

一点术语：

*   *[包](http://www.lispworks.com/documentation/HyperSpec/Body/11_.htm)*是Common Lisp 的标准功能。包是符号的命名空间。而已。它不是*文件*，不是*模块*，不是*库*，也不与任何此类事物相关联。它甚至不是函数、变量或类的命名空间。只是为了符号。有一个约定是将设置包的定义放入它自己的文件中。但这只是一个约定。

*   *系统*用于定义、加载和编译构成软件库或应用程序的所有文件。*系统*的想法是古老的（超过三十年）。[ASDF](http://common-lisp.net/project/asdf/)（另一个系统定义工具）是该想法的流行且免费的实现。Kent Pitman 于 1984 年写了关于[大型系统的描述](http://nhplace.com/kent/Papers/Large-Systems.html)。

这种系统设施的一部分是注册表，可以从中找到所有系统。系统定义描述了它所包含的文件以及它所依赖的所有系统。通常，这样的注册表是文件系统中的目录和/或正在运行的 Lisp 中的注册表（变量，...）。

在加载特定系统时，系统工具会查看注册表并找到它，加载定义，递归加载所有需要的系统，然后加载所有文件。

请参阅 ASDF 手册：[配置 ASDF 以查找您的系统](http://common-lisp.net/project/asdf/asdf/Configuring-ASDF.html#Configuring-ASDF)

# fortran - 更新：我应该将 MPI 放在模块还是模块的子程序中？

> ID：13437672
> 
> 赞同：0
> 
> 时间：2012-11-18T05:05:02.810
> 
> 标签：fortran, mpi, modulo, subroutine

更新：我有一个问题，我不知道它是什么。我有一个带有 MPI_INIT 和 MPI_FINALIZE 的测试程序。我有一个包含 5 个子例程的模块：3 个子例程是依赖的，并且独立于其他 2 个子例程。我想把测试程序中的MPI代码放到这个模块中。我将 MPI_INIT 放在声明变量的模块中和子例程之前。我收到了一系列带有相同错误消息的错误：

```
This statement must not appear in the specification part of a module 
```

“MPI_INIT 和 MPI_FINALIZE 只应调用一次”如何影响 Fortran 程序、模块和子例程？如果有多个独立程序，每个程序多次调用该模块的子例程，我应该将 MPI 函数和变量放在哪里？

~~~~~~~~~ 我有一个包含一系列子例程的模块，其中包含我希望并行化的do循环。子程序是其他程序使用的公共程序。我应该在子程序之外定义 MPI：

```
module ...
call MPI_INIT
subroutine 1
... (MPI code)
subroutine 2
subroutine 3
MPI_GATHERV
call MPI_FINALIZE
module 
```

还是在每个子程序中？

```
module ...
subroutine 1
call MPI_INIT
... (MPI code)
MPI_GATHERV
call MPI_FINALIZE
subroutine 2
call MPI_INIT
... (MPI code)
MPI_GATHERV
call MPI_FINALIZE
subroutine 3
call MPI_INIT
... (MPI code)
MPI_GATHERV
call MPI_FINALIZE
module 
```

我看到了解决方案 1 遵循粗粒度原则的优势。如果程序调用子程序 1，它还会在子程序之外执行 MPI 代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T14:04:51.897

您应该在程序中只初始化和完成一次 MPI。调用 MPI_Finalize 后，您将无法执行进一步的 MPI 操作。标准说：

> 一旦 MPI_FINALIZE 返回，除了 MPI_GET_VERSION、MPI_GET_LIBRARY_VERSION、MPI_INITIALIZED、MPI_FINALIZED 和任何具有前缀 MPI_T_ 的函数（在第 14.3.4 节中列出的具有此前缀的函数的约束范围内）之外，不能调用任何 MPI 例程（甚至 MPI_INIT）。

(MPI3, p361, l25) [MPI3 PDF](http://www.mpi-forum.org/docs/mpi-3.0/mpi30-report.pdf)

回复更新：不允许将可执行语句放入代码的声明部分。关键是，在您的执行中应该只调用一次 MPI_Init 和 MPI_Finalize 就意味着这一点。您的应用程序可能会读取如下内容：

```
program mini
  use mpi
  implicit none
  integer :: iError
  call mpi_init(iError)
  call do_some_stuff()
  call mpi_finalize(iError)
end program mini 
```

如果你在程序的开头有各种初始化的东西，你当然可以将它组合到模块子程序中并在那里调用 mpi_init 。如果您对模块使用测试程序，请在此处使用 mpi_init 和 mpi_finalize。在某些子例程中调用 mpi_init 和 mpi_finalize 的示例可以在例如我们用来设置非常通用的东西[的 treelm 库的 env_module 中找到。](https://bitbucket.org/haraldkl/treelm/src/55941d26cb85e644ed9bc7174d55e9c4fdc4a01f/source/env_module.f90?at=default)

> 如果有多个独立程序，每个程序多次调用该模块的子例程，我应该将 MPI 函数和变量放在哪里？

你能改写一下吗？我不明白。MPI 函数和变量应该在 mpi 模块中，如果您有多个独立程序调用它们，它们都必须“使用” mpi 模块。独立程序也可以单独拥有 MPI_Init 和 MPI_Finalize。也许您可以发布一个简短的代码示例，说明您想要实现什么以及您的问题是什么。

# javascript - 存储来自随机文本/颜色生成器的响应，比较它们并存储在数组中

> ID：13437676
> 
> 赞同：1
> 
> 时间：2012-11-18T05:06:48.923
> 
> 标签：javascript, arrays, random, compare

我正在做一个javascript网页来演示stroop效果，即如果单词的颜色与其语义不匹配，那么一个人选择正确的颜色需要更长的时间。例如，如果单词 RED 为蓝色，则单击“蓝色”按钮。

但是，由于颜色和单词是随机生成的，我不知道如何将它们存储到新数组中并进行比较。

在实验结束时，我想要一个警报。如果问题是“RED in blue”，那么它会显示“DIFF”，如果问题是“RED in red”，那么它会显示 10 个问题的“SAME”。感谢帮助！我有如下代码

```
<html>

<head>

<title> random text </title>

<script type="text/javascript"> 

//array 

var quotations = new Array();

quotations[0]= "red";
quotations[1]= "yellow";
quotations[2]= "green";
quotations[3]= "blue";

var colours = new Array();

colours[0] = "red";
colours[1] = "yellow";
colours[2] = "green";
colours[3] = "blue";

//Randomize coloured text 9 times and on tenth time, display alert

var NumberAttempts = 0;

var choice;

var score =0;

function display()
{

 if ( NumberAttempts < 10) 

 { 

  var a = Math.floor(Math.random()*quotations.length)document.getElementById ("txtbox").value=quotations[a];

  choice = Math.floor(Math.random()*colours.length);document.getElementById    ("txtbox").style.color=colours[choice];

  NumberAttempts++;

 }

  else

 {

  alert ("You are done! The number of correct attempts is " + score + ".");

 }
}

function compare(c1)
{
 if (colours[choice]==c1)
  {
   score++;    
  }
}
</script>
</head>
<body>
<h1><center>Using Computer Science to Demonstrate the Stroop Effect</center></h1>
<div>
<ul>
<li><a href="http://introduction.html" target="_blank"> Introduction </a></li>
<li><a href="http://instructions.html" target="_blank"> Instructions </a></li>
</ul>

<textarea id="txtbox" style="width:600px;"></textarea><br />

<button onClick='compare("red");display()'><font color="red">Red </font></button>

<button onClick='compare("yellow");display()'><font color="yellow">Yellow</font></button>

<button onClick='compare("green");display()'><font color="green">Green</font></button>

<button onClick='compare("blue");display()'><font color="blue">Blue</font></button>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:40:09.620

```
<html>

<head>

<title> random text </title>

<script type="text/javascript"> 

window.onload=display;

//array 

var quotations = new Array();

quotations[0]= "red";
quotations[1]= "yellow";
quotations[2]= "green";
quotations[3]= "blue";

var colours = new Array();

colours[0] = "red";
colours[1] = "yellow";
colours[2] = "green";
colours[3] = "blue";

//Randomize coloured text 9 times and on tenth time, display alert

var arr=new Array(10,1);
x=0;
y=0;
var NumberAttempts = 0;

var choice;

var score =0;

function display()
{

 if ( NumberAttempts < 10) 

 { 

  var a = Math.floor(Math.random()*quotations.length);
  document.getElementById("txtbox").value=quotations[a];

  choice = Math.floor(Math.random()*colours.length);
  document.getElementById("txtbox").style.color=colours[choice];
    arr[x,0]=colours[choice];
    arr[x,1]=quotations[a];
    x=x+1;
    console.log(arr);

  NumberAttempts++;

 }

  else

 {

  alert ("You are done! The number of correct attempts is " + score + ".");

 }
}

function compare(c1)
{
 if (colours[choice]==c1)
  {
   score++;

  }

}
</script>
</head>
<body>
<h1><center>Using Computer Science to Demonstrate the Stroop Effect</center></h1>
<div>
<ul>
<li><a href="http://introduction.html" target="_blank"> Introduction </a></li>
<li><a href="http://instructions.html" target="_blank"> Instructions </a></li>
</ul>

<textarea id="txtbox" style="width:600px;"></textarea><br />

<button onClick="compare(this.id);display()" id="red"><font color="red">Red </font></button>

<button onClick="compare(this.id);display()" id="yellow"><font color="yellow">Yellow</font></button>

<button onClick="compare(this.id);display()" id="green"><font color="green">Green</font></button>

<button onClick="compare(this.id);display()" id="blue"><font color="blue">Blue</font></button>

</body>

</html> 
```

# azure - 如何减少托管在 Windows Azure 网站上的 Orchard CMS 站点的内存消耗

> ID：13437680
> 
> 赞同：5
> 
> 时间：2012-11-18T05:07:46.907
> 
> 标签：azure, orchardcms, azure-web-app-service

我有一个 Orchard CMS 网站，目前托管在 Windows Azure 网站上。

它是一个非常标准的博客，其中图像通过 skydrive 托管并链接，因此博客本身仅提供 html。

我已将其设置为共享模式，运行 1 个实例。

但我不断达到配额。似乎我的网站总是在用尽内存（最大为每小时 512mb），我不明白为什么？

我尝试将实例增加到 3 个，但它并没有增加我可以使用的最大内存。

更新：

共享模式下网站的最大使用量为：
CPU 时间：每天 4 小时，每 5 分钟 2.5 分钟
文件系统：1024mb
内存使用量：每小时 512mb
数据库：1024mb（Web 实例）

更新2：

我尝试在不同的区域重新创建我的网站。目前我的站点托管在美国西部，有上述限制，但其他区域的限制略有不同，例如东亚有每小时 1024mb 的内存使用限制！我无法挖掘任何有关此的文档，这令人费解。

更新3：

在 Update2 中，我提到不同地区有不同的“每小时内存使用限制”。这实际上是不正确的。我在“免费”设置下以每小时 1024mb 的速度建立了一个新站点，但是当我将其切换为“共享”时，内存使用限制降至每小时 512mb。

* * *

尽管源代码相同，但我无法在我的任何其他网站中重现此问题，这让我相信我的特定天蓝色网站设置有些奇怪。可能与@Vinblad 提到的仪表板有关。

我打算在不同的地区建立一个新的 azure 网站，在我做的时候，升级到 Orchard 1.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T09:58:14.207

Orchard 在 Azure 上遇到了类似的问题。这是由于错误日志文件不断增加并占用空间。目前手动删除文件，但必须寻找更自动化的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:56:20.987

512MB/小时根本没有任何意义，我同意史蒂夫的观点。然而，512MB（不是每小时）足以容纳 Orchard。尝试在站点的本地副本上测量内存。如果您确实遇到异常的内存消耗，请尝试对其进行分析并找到负责它的模块。如果不是，请联系 Azure 支持并询问他们为什么同一应用程序在 Azure 上占用的内存比在本地计算机上的多。

要调查的另一件事是缓存：您是否启用了输出缓存？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:18:10.443

我在 Azure 论坛上看到了[这篇](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/debfbb46-4c13-4ba1-a294-0dcfe6210f43)文章，他们建议禁用动态模块加载器。我们试了一下，但这给我们的图像带来了问题，所以我们不得不恢复原状。

# javascript - ASP.NET 中的条件 Javascript 正则表达式验证

> ID：13437683
> 
> 赞同：1
> 
> 时间：2012-11-18T05:08:43.800
> 
> 标签：javascript, asp.net, c#-4.0

目前我正在向 ASP.NET 文本框添加 Javascript 验证。要求是前两个字符应为字母 (az)，最后一个字符应为数字 (0-9)。Maxlength 为 4。这应该在按键事件中完成。

因为我是 JS 的新手，所以对如何做到这一点不太了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:32:12.967

这是将客户端 JavaScript 验证器添加到文本框的快速方法。

请注意，这适用于 LostFocus，而不是 Keydown，但如果您真的认为这是可行的方法，您可以将其更改为 keydown。

检查小提琴：http: [//jsfiddle.net/B4xwK/](http://jsfiddle.net/B4xwK/)

此外，这需要在客户端加载 jQuery。

```
$('#myInput').blur(function(e) {
    var r = new RegExp("[A-Za-z]{2}[0-9]{2}");
    var valid = r.test(e.target.value);
});​ 
```

# google-docs-api - 如何从另一个脚本环境（Grasshopper3d 中的 VB.net）与 Google Docs (Sheets) 交互？

> ID：13437684
> 
> 赞同：2
> 
> 时间：2012-11-18T05:08:47.453
> 
> 标签：google-docs-api, grasshopper

我在 Grasshopper（一个名为 Rhino 的 3D 建模程序的插件）中使用 VB.net（有时使用 c#）编写脚本，并且我想与 Google Docs 交互，特别是与电子表格应用程序交互。

我希望能够从 Grasshopper 发送数据来填充谷歌电子表格。数据始终是数字或字符串。我还想从数据中生成图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:59:09.017

在 GH 网站上[这个帖子](http://www.grasshopper3d.com/forum/topics/python-error-importing-pyexpat)的底部有一个解决方案。

..这是一个*阅读*解决方案，应该在python中工作，因为使用c#需要你使用其他库。

您需要先将电子表格发布为 csv。

```
import urllib2
myUrl="https://docs.google.com/spreadsheet/pub?key=0AgIWT_wqd-VmdE1NekRSWFZoUnBQdWJhYUhwcU1vclE&single=true&gid=0&output=csv"
response = urllib2.urlopen(myUrl)
print response.read() 
```

[这是一个有效的 GH 实现](https://dl.dropbox.com/u/8064971/GHdemo/getCSVfromGoogle.gh)

[*这可能应该是评论，但我还不能评论*]

# python - 神秘的钥匙错误

> ID：13437687
> 
> 赞同：3
> 
> 时间：2012-11-18T05:09:25.473
> 
> 标签：python

我现在正在为我的 CS 测试而学习，并尝试编写代码，给定整个 IMDB 数据库以明文形式，找到与最多共同电影的演员。我已经完成了，我只是不断地遇到一个奇怪的 KeyError。这是我的代码：

![在此处输入图像描述](../Images/c21527a3b54bcc8cc6fab279910c0710.png)

我遇到的问题是，当我运行它时，它在运行突出显示的代码时会产生一个 keyerror。我已经验证它确实在用字符串索引字典，并且所述键在字典中，但它仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T05:14:09.963

当你这样做时`other_people = people_and_their_movies`，你不是在制作副本。您正在`other_people`指向指向的同一对象`people_and_their_movies`。所以当你这样做时，你会从*两个*`del other_people[actor1]`字典中删除演员（因为它们是相同的）。

 *相反，做`other_people = people_and_their_movies.copy()`.

（顺便说一句，在 StackOverflow 上，最好将您的实际代码复制并粘贴为文本而不是屏幕截图。这样人们可以剪切和粘贴您的代码并自己尝试找出问题所在。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T05:15:04.610

问题在于这行代码：

```
other_people = people_and_their_movies 
```

这不是创建字典的副本。相反，这两个变量都指向内存中的同一个字典。因此，当您执行此行时：

```
del other_people[actor1] 
```

您正在从 people_and_their_movies 指向的同一个字典中删除 actor1。

你可以试试这个：

```
other_people = people_and_their_movies.copy() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T06:27:14.903

Use *itertools.combinations()* - and you won't have to delete actors, and you'll be able to use only one loop:

```
for actor1, actor2 in itertools.combinations(people_and_their_movies,2):
    <whatever you want to do> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T05:17:46.700

之前你分配

```
other_people = people_and_their_movies 
```

所以当你

```
del other_people[actor1] 
```

您实际上是从两个字典中删除该键。 `other_people`并`people_and_their_movies`在此时指向同一个对象。

查看 python 的[`copy`](http://docs.python.org/2/library/copy.html)模块以获取制作 dict 的真实副本的方法，这样您就可以安全地将它们解耦并仅从两者中的一个中删除。*

# pthreads - Pthread 连接优先级

> ID：13437690
> 
> 赞同：1
> 
> 时间：2012-11-18T05:11:00.863
> 
> 标签：pthreads

我先给你看一下函数：

```
for (i=0; i<3;i=i+2){
 pthread_create(&thread1, NULL, &randtrack, (void *)&rnum_array[i]);
 pthread_create(&thread2, NULL, &randtrack, (void *)&rnum_array[i+1]);
 pthread_join(thread1, NULL);
 pthread_join(thread2, NULL);
} 

print final result here; 
```

我的理解是创建两个线程后，父线程会在join(thread1)处阻塞，线程2实际上比thread1早回来的是什么？怎样才能让更长的线程永远留在后面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:40:41.970

如果`thread2`完成`thread1`但没有完成，您将继续等待直到`thread1`完成。然后你会等到`thread2`完成，这或多或少会立即完成。您等待线程的顺序无关紧要（除非线程尝试直接相互交互，例如通过调用`pthread_kill`或`pthread_join`相互调用）。

**更新**：您的设计对于您实际尝试做的事情是完全错误的。你想这样做：

1.  创建一个结构来跟踪需要完成的工作。它应该受到互斥锁的保护，跟踪当前有多少线程在工作，以及下一个需要分配的工作单元是什么。

2.  当您创建线程时，让它们运行一个获取互斥锁的函数，获取下一个工作单元，增加正在运行的线程数，然后执行工作。

3.  当一个线程完成一个工作单元时，它应该获取互斥锁，减少正在运行的线程数，并查看是否还有更多工作要做。当没有工作要做时，线程应该终止。

4.  您现在可以等待所有线程终止，这只会在所有工作完成后发生。这消除了工作单元上的循环。

请学习一个非常重要的一般规则——线程就是完成工作的东西。您希望您的代码专注于完成工作，而不是如何完成工作。尝试等待工作完成，而不是等待线程完成。

# jquery - 使用 jquery UI 时如何获取可拖动表格行的 id？

> ID：13437693
> 
> 赞同：0
> 
> 时间：2012-11-18T05:11:42.480
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我需要`id`从“可拖动”的表格行中获取。除“ID_1”外，一切正常。我似乎无法得到这个值。我究竟做错了什么？

HTML：

```
<table>
    <tr class="droppable" id="value_2">
        <td>Stuff</td>
    </tr>
    ....
</table>

<table>
    <tr class="draggable" id="value_1">
        <td>Stuff</td>
    </tr>
    ....
</table> 
```

查询：

```
$(document).ready(function() {
var ID_1
$(".draggable").draggable({cursor: 'move', 
    helper: function(event) {
        return $('<div class="drag_row"><table></table></div>')
        .find('table').append($(event.target).closest('tr').clone()).end();
    },
    appendTo: 'body'
});
$(".droppable").droppable({
    over: function(event, ui)
        {
            ID_1 = $(this).find("tr").attr('id');
        },
    drop: function(event, ui) { 
        var ID_2 = $(this).attr('id');

        $.ajax({
        type: "POST",
        url: 'www.mydomain.com/'+ID_1+'/'+ID_2,
        dataType: 'html',
        success: function(){
        }
    });
    return false;
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:32:36.813

用于`ui.draggable`获取拖动的元素，所以代码应该是：

```
$(".droppable").droppable({
     over: function(event, ui) {
        ID_1 = ui.draggable.attr('id');
     },
    drop: function(event, ui) { 
       var ID_2 = ui.draggable.attr('id');
       // existing stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:38:44.543

您可以改用 event.target.id

这是一个小提琴（来自旧项目），显示 console.log 以查看有关过度容器的日志：http: [//jsfiddle.net/Bouillou/QvRjL/97/](http://jsfiddle.net/Bouillou/QvRjL/97/)

```
$(".droppable").droppable({
     over: function(event, ui) {
        ID_1 = event.target.id;
     },
    drop: function(event, ui) { 
       var ID_2 = event.target.id;
       // existing stuff
    }
}); 
```

# ruby-on-rails - Ruby 类继承

> ID：13437700
> 
> 赞同：0
> 
> 时间：2012-11-18T05:13:45.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我定义了一个节点类和播放器类如下：

```
class Node < OpenStruct
  def initialize(parent,tag,&block)
    super()
    self.parent = parent
    self.parent.children << self unless parent.nil?
    self.children = []
    self.tag = tag
    instance_eval(&block) unless block.nil?
  end
end

class Player < Node
  def initialize(parent)
    Node.new(parent,:player) do 
      self.turn_num = 1
    end
  end
end 
```

实例变量 player 由

```
player = Player.new(room) # room is the parent node which was defined
puts player.turn_num 
```

我得到了错误：

```
in `method_missing': undefined method `[]' for nil:NilClass (NoMethodError) 
```

你能帮我弄清楚哪里出了问题吗？谢谢！

编辑：

问题应该是 Player 类中的初始化。我改变了我的代码

```
class Player < Node
      def self.new(parent)
        Node.new(parent,:player) do 
          self.turn_num = 1
        end
      end
 end 
```

那么就没有报错了。这里的初始化有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:23:46.057

您不需要在 Player 中初始化 Node，因为任何 Player 实例也已经*是*Node 实例。相反，您应该将预期的参数传递给`super`：

```
class Player < Node
  def initialize(parent,&block)
    super(parent, :player, &block)
    self.turn_num = 1
  end
end 
```

通常，重写是一个坏主意`.new`——这是默认情况下为所有 Ruby 对象定义的，以分配内存然后运行初始化方法（如果存在）。当您将其覆盖为 时`self.new`，您只是返回一个裸`Node`实例，而不是`Player`实例。

# algorithm - 如果图中的一条边改变了它的权重，如何从旧的 MST 中获得新的 MST？

> ID：13437702
> 
> 赞同：4
> 
> 时间：2012-11-18T05:13:59.573
> 
> 标签：algorithm, graph-algorithm

我们知道原始图和原始 MST。现在我们改变图中边的权重。除了 Prim 和 Kruskal，我们有什么方法可以从旧的 MST 生成新的 MST？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:45:22.960

这是我的做法：

*   如果更改的边缘在原始 MST 中：
    *   如果它的重量减轻了，那么它当然必须在新的 MST 中。
    *   如果其权重增加，则将其从原始 MST 中删除并寻找连接剩余的两个子树的最低权重边（这可以再次选择原始边）。这可以通过建立一个[不相交集的数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)来保存两个子树，并按权重对剩余的边进行排序，以类似于 Kruskal 的方式有效地完成：选择具有不同集合中端点的第一个。如果您知道一种从不相交集数据结构中快速删除边的方法，并且您使用 Kruskal 算法构建了原始 MST，那么您可以避免在这里重新计算它们。
*   否则：
    *   如果它的重量增加，那么它当然会留在 MST 之外。
    *   如果它的重量减轻了，请将其添加到原始 MST 中。这将创建一个循环。扫描循环，寻找最重的边缘（这可以再次选择原始边缘）。删除这条边。如果您将执行许多边缘突变，则可以通过使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)计算所有对最短路径来加快循环查找。然后，您可以通过最初将新边排除在外，并在 MST 中寻找其两个端点之间的最短路径（将只有一条这样的路径）来找到循环中的所有边。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T09:05:44.540

除了 j_random_hacker 提出的线性时间算法之外，您还可以在这本书中找到一种亚线性算法：[“Handbook of Data Structures and Applications”](https://rads.stackoverflow.com/amzn/click/com/1584884355)（第 36 章）或这些论文：[Dynamic graphs](http://www.diku.dk/PATH05/CRC-book1.pdf)，[Maintaining Minimum Spanning Trees in Dynamic Graphs](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QFjAA&url=http%3A%2F%2Fwww.hpl.hp.com%2Ftechreports%2FCompaq-DEC%2FSRC-TN-1997-019.pdf&ei=uaGoUISLLurm4QT9uoGQCQ&usg=AFQjCNHYpBiYDU-POcm9XW19n05Nlz4qXA&sig2=6ibTH3RP_c98X68JTGvKEQ&cad=rja)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T07:54:53.453

您可以在结果相同的情况下稍微改变问题。

1.  获取原始 MST 的结构，从每个顶点运行 DFS，您可以获得每个顶点对之间的树路径中的最大加权边。这一步的复杂度是O(N^2)
2.  我们可以假设我们正在将一条新边 (u,v) 添加到权重为 w 的原始 MST 中，而不是将一条边的权重更改为 w。添加的边会在树上形成一个循环，我们应该在循环上切割一个边以生成一个新的 MST。很明显，我们只能将添加边与路径（a，b）中的最大边进行比较，这一步的复杂度是O（1）

# jquery - Qtip 工具提示不起作用

> ID：13437707
> 
> 赞同：1
> 
> 时间：2012-11-18T05:14:33.950
> 
> 标签：jquery, tooltip, qtip

光环！我是 JQuery 的新手，我正在尝试使用 QTip 制作简单的工具提示。我确定我已经按照正确的步骤操作，但工具提示似乎不起作用。这是代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.select-here').qtip({
        content: {
            text: 'tooltip here',
            show: 'mouseover',
            hide: 'mouseout'
        },       
        style: {
            width: 400,
            height: 400
        }
    });
});
</script> 
```

在我的身体里我写了这个

```
<div class="select-here">Text text text</div> 
```

我错过了什么？任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:01:12.540

试试这个演示：**演示** [http://jsfiddle.net/Tdh4a/](http://jsfiddle.net/Tdh4a/)

[http://craigsworks.com/projects/qtip/demos/content/basic](http://craigsworks.com/projects/qtip/demos/content/basic)

我认为`show and hide`是单独的属性而不是内容的子项：在文档中查看：http: [//craigsworks.com/projects/qtip/docs/reference/#content](http://craigsworks.com/projects/qtip/docs/reference/#content)

您还将在 qTip 链接中注意到他们正在推广 qTip2 而不是 qTip 作为其已过时的产品。休息演示应该有助于您的事业。`B-)`

**代码**

```
$(document).ready(function() {

    $(".select-here").qtip({
        content: {
            text: "HULK Me HULK HULK",
            title: {
                text: "Title",
                button: true
            }
        },
        show: {
            event: 'click',
            solo: true
        },
        hide: {
            fixed: true,
            event: 'unfocus'
        },
        position: {
            target: 'mouse',
            viewport: $(window),
            adjust: {
                method: 'flip shift',
                mouse: false
            }
        },
        style: {
            tip: false,
            widget: false
        }
    });

});​ 
```

# php - 无法弄清楚为什么 SQL DELETE FROM 语句返回错误“SQLSTATE[HY000]: General error: 25 bind or column index out of range”

> ID：13437708
> 
> 赞同：1
> 
> 时间：2012-11-18T05:14:42.697
> 
> 标签：php, sqlite, pdo

所以，这是我页面上的相关代码。它通过 PDO 连接到 sqlite3 数据库，我通过页面上的表单进行更新。我还有其他 sqlite 语句，例如 INSERTS 和 UPDATES（确实使用 WHERE id=:id），它们没有问题。但是，这个 DELETE 没有。我的页面上的 try catch 块中确实有所有代码（这就是我得到错误的方式，如果你想知道的话），但我想我可以在这里省略它。

谢谢您的帮助！

```
<?php
    $db = new PDO("sqlite:osuat.sqlite3");
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $id = $_POST['id'];
    $update = "DELETE FROM pages
                WHERE id=:id";
    $stmt = $db->prepare($update);
    $stmt->bindParam(':id', $id);
    $stmt->execute();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:51:47.117

尝试将 PDO::PARAM_INT 添加到 bind_param 方法，以确保发送的值是一个 INT （我假设你的 ID 字段是），即，

```
$stmt->bindParam(':id', $id, PDO::PARAM_INT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:22:25.010

回显实际的 sql 语句并在实际运行之前终止。然后直接检查并运行该语句。我怀疑`$_POST['id']`不包含您认为的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:09:44.453

我终于弄明白了。在我的实际页面中，我有一堆 if-else 构造来构造正确的`$update`字符串。我（错误地）认为我可以`bindParam()`在最后使用而不注意`bindParam()`每个更新语句需要多少 s。因此，对于我的`DELETE FROM pages WHERE id=:id`，它被提供了一大堆仅用于其他`$update`字符串的其他参数，而不仅仅是`:id`.

Its my fault for not including the entire source, I'm sure someone here would have caught it right away, but many thanks to duellsy, he/she led me on the right path looking for ways to log the actual SQL statement. In the end, using `stmt->debugDumpParams();` helped me figure what I was doing wrong.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T21:13:54.833

`DELETE`尝试在一行中编写命令。

# c++ - C++“<”，不小于运算符？

> ID：13437710
> 
> 赞同：3
> 
> 时间：2012-11-18T05:16:30.953
> 
> 标签：c++

在二叉搜索树的以下代码中：

```
template <class TKey>
class bst<TKey>::node *bst<TKey>::insert(node *T, TKey &key)
{
if (T == NULL) {
  T = new node;
  T->key = key;
} else if (T->key == key) {
  cout << "key " << key << " already in tree" << endl;
} else {

    int dir = T->key < key;
    T->link[dir] = insert(T->link[dir], key);

}

return T;
} 
```

我很困惑是什么线

```
int dir = T->key < key; 
```

是在做。我可以理解“int dir = T->key”，虽然这当然没有意义，但我以前没有见过以这种方式使用的“<”运算符。有什么线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T05:18:52.590

`T->key < key`是一个条件。它将评估为`true`或`false`。如果它评估为`true`，`dir`将获得价值`1`，否则将获得价值`0`。

```
int dir = T->key < key; 
```

是写作的简写形式

```
int dir;
if(T->key < key)
    dir = 1;
else
    dir = 0; 
```

当 a`boolean`被赋值给 a`int`时，它会得到对应于or的值`0`or 。`1``false``true`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T05:19:40.710

如果运算符没有重载，则它具有通常的含义；它评估为`true`或`false`。这是一种`bool`类型，因此可以隐式转换为`int`.

但是，如果`TKey`是一个类并重载它，或者有一个全局重载，那么除非我们看到代码，否则我们不知道它做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T05:19:04.283

`<`如果第一个操作数小于第二个操作数，则返回 1，否则返回 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T05:19:44.587

该`<`运算符是一个布尔比较运算符 - 即它评估`0`条件是否为假，以及`1`条件是否为真。它通常用在条件句中，但直接使用返回值是完全有效的。在这种情况下，如果 的值`T->key`小于的值，则为`key`，`dir`否则为。`1``dir``0`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T05:22:42.753

好吧，由于二叉搜索树在左侧存储小于根的值而在右侧存储更大的值，因此您需要选择插入将发生的方向。为此，您将键与当前节点的值进行比较。此比较的结果存储在 dir 变量中。因此，如果 key 小于 T 的值，则 dir 得到 1，它表示 link[] 中的左侧，它保存指向节点 T 的左右分支的指针。然后使用 T 的左节点递归地插入。为什么你在那里做一个比较。只是看看我们是否必须将元素插入到当前节点的右侧或左侧。

# c# - opentk 到 opengl System.NullReferenceException

> ID：13437713
> 
> 赞同：2
> 
> 时间：2012-11-18T05:17:57.723
> 
> 标签：c#, opengl, mono, opentk

我按照教程 [http://www.opentk.com/doc/chapter/0](http://www.opentk.com/doc/chapter/0)中概述的步骤操作，然后尝试了更广泛的设置。

但是，我无法使用（我认为）OpenGL 运行任何代码。

示例浏览器程序加载正常，我可以正常运行 Open AL 示例，但标题 OpenGL、OpenGLES 和 OpenTK 下的任何示例都会导致此错误：

```
Unhandled Exception:  System.NullReferenceException: Object reference not set to an instance of an object
at OpenTK.Graphics.GraphcisMode.get_Default () [0x00000] in <filename unknown> : 0
at Examples.Tutorial.Picking..ctor () [0x000000] in <filename uknown> : 0
at Examples.Tutorial.Picking.Main () [0x000000] in <filename uknown> : 0
at (Wrapper managed to Native) System.Reflection.MonoMethod:Internalinvoke (System.Reflection.MonoMethod.object.object[].System.Exception&)
at System.Reflection.MonoMethod.Invoke (System.object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.object[] parameters, System.Globalization.Cultureinfo culture) [0x000000] in <filename uknown> : 0 
```

此外，如果我运行下载中提供的游戏示例，我会收到相同的错误 (System.NullReferenceException)，但细节不同。

这是在 Linux、Ubuntu 12.04 和 Mono 2.10 上。我从来没有完全理解 OpenGL 在 Linux 上是如何工作的，因为似乎总是有另一个包以我以前从未听说过的某种方式处理 openGL，但是我有很多包处理这个问题，并添加了尽可能多的开发包。glxgears 工作正常，glxinfo 将我的版本报告为 1.4，所以对于我不专业的人来说，opengl 似乎可以在我的系统上运行。我还能够成功编译和运行这个 OpenGL 示例。 [http://open.gl/context#SFML](http://open.gl/context#SFML)

那么我该如何解决这个问题呢？我认为它是 Mono 和 OpenGL 之间的某种接口，但我没有在教程中看到我遗漏的任何内容。

# javascript - 特定原型上的对象原型

> ID：13437715
> 
> 赞同：0
> 
> 时间：2012-11-18T05:18:34.057
> 
> 标签：javascript, oop, object, prototype

如何仅为特定对象类型扩展对象类型？我不希望使用 object.color() 与另一个库发生冲突。目前，我正在使用：

```
function random_int(start,end) {
    return Math.floor(Math.random()*(end-start+1)+start);
}
var balls = function balls (context) {
    this.canvas = context.canvas;
    this.context = context;
}
Object.prototype.ball = function ball() { }
balls.prototype.add = function () {
  this.context.fillStyle = '#ABC123';
  this.radius = 15;
  this.x = random_int(this.radius+1,this.canvas.width-this.radius-1);
  this.y = random_int(this.radius+1,this.canvas.height-this.radius-1);
  return this;
}
Object.prototype.draw = function () {
  this.context.beginPath();
  this.context.arc(this.x, this.y, this.radius, 0, (Math.PI/180)*360, false);
  this.context.fill();
  this.context.closePath();
}
balls.prototype.redraw = function () {
    this.context.save();
    this.context.setTransform(1, 0, 0, 1, 0, 0);
    this.context.clearRect(0, 0, canvas.width, canvas.height);
    this.context.restore();
    this.draw();
}
Object.prototype.color = function (col) {
    this.context.fillStyle = col;
}
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
context.canvas.width  = window.innerWidth*0.9;
context.canvas.height = window.innerHeight*0.9;
var Balls = new balls(context);
for (var i = 0; i<10;i++) {
    var b = Balls.add();
    b.color("#"+((1<<24)*Math.random()|0).toString(16));
    b.draw();
} 
```

jsfiddle：http: [//jsfiddle.net/hNy3r/1/](http://jsfiddle.net/hNy3r/1/)

**使用两个类，因为我计划稍后循环遍历 Balls 类中的每个球。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:13:14.610

最终这样做：

```
function random_int(start, end) {
    return Math.floor(Math.random() * (end - start + 1) + start);
}
var balls = function balls(context) {
    this.context = context;
    this.add = function () {
        return new ball(context);
    }
}
Object.prototype.ball = function ball(context) {
                this.context = context;
                this.canvas = context.canvas;
    this.context.fillStyle = '#ABC123';
    this.radius = 15;
    this.x = random_int(this.radius + 1, this.canvas.width - this.radius - 1);
    this.y = random_int(this.radius + 1, this.canvas.height - this.radius - 1);
    this.draw = function () {
        this.context.beginPath();
        this.context.arc(this.x, this.y, this.radius, 0, (Math.PI / 180) * 360, false);
        this.context.fill();
        this.context.closePath();
    }
    this.redraw = function () {
        this.context.save();
        this.context.setTransform(1, 0, 0, 1, 0, 0);
        this.context.clearRect(0, 0, canvas.width, canvas.height);
        this.context.restore();
        this.draw();
    }
    this.color = function (col) {
        this.context.fillStyle = col;
    }
    return this;
}
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
context.canvas.width = window.innerWidth * 0.9;
context.canvas.height = window.innerHeight * 0.9;
var Balls = new balls(context);
for (var i = 0; i < 10; i++) {
    var b = Balls.add();
    b.color("#" + ((1 << 24) * Math.random() | 0).toString(16));
    b.draw();
} 
```

`new ball()`从内部调用`balls`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:33:49.887

如果您不想发生冲突，为什么不使用自己的范围，为什么需要扩展 Object ？

```
$(document).ready(function () {
    function random_int(start,end) {
        return Math.floor(Math.random()*(end-start+1)+start);
    }
    var balls = function balls (context) {
        this.canvas = context.canvas;
        this.context = context;

    this.ball = function () { return this; }
    this.add = function () {
      this.context.fillStyle = '#ABC123';
      this.radius = 15;
      this.x = random_int(this.radius+1,this.canvas.width-this.radius-1);
      this.y = random_int(this.radius+1,this.canvas.height-this.radius-1);
      return this;
    }
    this.draw = function () {
      this.context.beginPath();
      this.context.arc(this.x, this.y, this.radius, 0, (Math.PI/180)*360, false);
      this.context.fill();
      this.context.closePath();
    }
    this.redraw = function () {
        this.context.save();
        this.context.setTransform(1, 0, 0, 1, 0, 0);
        this.context.clearRect(0, 0, canvas.width, canvas.height);
        this.context.restore();
        this.draw();
    }
    this.color = function (col) {
        this.context.fillStyle = col;
    }
    }
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    context.canvas.width  = window.innerWidth*0.9;
    context.canvas.height = window.innerHeight*0.9;
    var Balls = new balls(context);
    for (var i = 0; i<10;i++) {
        var b = Balls.add();
        b.color("#"+((1<<24)*Math.random()|0).toString(16));
        b.draw();
    }
}); 
```

[样本](http://jsfiddle.net/hNy3r/2/)

# asp.net - ASP.NET MVC - Google Maps Places AutoComplete 在 Ajax 返回的表单中不起作用

> ID：13437726
> 
> 赞同：0
> 
> 时间：2012-11-18T05:20:21.150
> 
> 标签：asp.net, asp.net-mvc-3, google-maps-api-3, google-places

我在 ASP.NET MVC 编辑器模板内的输入控件中添加了一个谷歌地图库自动完成插件。当模板正常渲染时，它工作正常。但它停止在通过 AJAX 返回的表单中工作。自动完成初始化正在正确执行，我什至可以在输入框中看到占位符文本，但自动完成功能似乎没有运行。提前感谢您在这方面的任何提示/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:59:42.563

此问题已得到解决。问题是用于隐藏自动完成弹出内容的模态对话框的 z-index 值较高。自动完成弹出窗口的 z-index 为 1000。

# python - 写入 Excel 电子表格

> ID：13437727
> 
> 赞同：177
> 
> 时间：2012-11-18T05:20:53.670
> 
> 标签：python, excel, csv

我是 Python 新手。我需要将一些数据从我的程序写入电子表格。我在网上搜索过，似乎有很多可用的软件包（xlwt、XlsXcessive、openpyxl）。其他人建议写入 .csv 文件（从未使用过 CSV，也不真正了解它是什么）。

该程序非常简单。我有两个列表（浮点数）和三个变量（字符串）。我不知道这两个列表的长度，它们可能不会是相同的长度。

我希望布局如下图所示：

![布局示例](../Images/35d1969fcbf2b453530f5bf299b18a50.png)

粉色列将包含第一个列表的值，绿色列将包含第二个列表的值。

那么最好的方法是什么？

PS 我正在运行 Windows 7，但我不一定会在运行该程序的计算机上安装 Office。

```
import xlwt

x=1
y=2
z=3

list1=[2.34,4.346,4.234]

book = xlwt.Workbook(encoding="utf-8")

sheet1 = book.add_sheet("Sheet 1")

sheet1.write(0, 0, "Display")
sheet1.write(1, 0, "Dominance")
sheet1.write(2, 0, "Test")

sheet1.write(0, 1, x)
sheet1.write(1, 1, y)
sheet1.write(2, 1, z)

sheet1.write(4, 0, "Stimulus Time")
sheet1.write(4, 1, "Reaction Time")

i=4

for n in list1:
    i = i+1
    sheet1.write(i, 0, n)

book.save("trial.xls") 
```

我用你所有的建议写了这篇文章。它完成了工作，但可以稍微改进。

如何将 for 循环中创建的单元格（list1 值）格式化为科学或数字？

我不想截断这些值。程序中使用的实际值在小数点后大约有 10 位。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-11-18T05:51:44.010

使用来自[pandas的](https://github.com/pydata/pandas)[DataFrame.to_excel](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.to_excel.html)。Pandas 允许您以功能丰富的数据结构表示您的数据，并且还可以让您[读取](http://pandas.pydata.org/pandas-docs/stable/io.html#excel-files)excel 文件。

您首先必须将数据转换为 DataFrame，然后将其保存到 excel 文件中，如下所示：

```
In [1]: from pandas import DataFrame
In [2]: l1 = [1,2,3,4]
In [3]: l2 = [1,2,3,4]
In [3]: df = DataFrame({'Stimulus Time': l1, 'Reaction Time': l2})
In [4]: df
Out[4]: 
   Reaction Time  Stimulus Time
0              1              1
1              2              2
2              3              3
3              4              4

In [5]: df.to_excel('test.xlsx', sheet_name='sheet1', index=False) 
```

出来的excel文件是这样的：

![在此处输入图像描述](../Images/310d63ebd51cbab2157a3d7ae2166b87.png)

请注意，两个列表的长度必须相等，否则熊猫会抱怨。要解决此问题，请将所有缺失值替换为`None`.

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-11-18T05:32:43.713

```
import xlwt

def output(filename, sheet, list1, list2, x, y, z):
    book = xlwt.Workbook()
    sh = book.add_sheet(sheet)

    variables = [x, y, z]
    x_desc = 'Display'
    y_desc = 'Dominance'
    z_desc = 'Test'
    desc = [x_desc, y_desc, z_desc]

    col1_name = 'Stimulus Time'
    col2_name = 'Reaction Time'

    #You may need to group the variables together
    #for n, (v_desc, v) in enumerate(zip(desc, variables)):
    for n, v_desc, v in enumerate(zip(desc, variables)):
        sh.write(n, 0, v_desc)
        sh.write(n, 1, v)

    n+=1

    sh.write(n, 0, col1_name)
    sh.write(n, 1, col2_name)

    for m, e1 in enumerate(list1, n+1):
        sh.write(m, 0, e1)

    for m, e2 in enumerate(list2, n+1):
        sh.write(m, 1, e2)

    book.save(filename) 
```

更多解释： [https ://github.com/python-excel](https://github.com/python-excel)

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-11-18T06:37:34.520

*   **xlrd/xlwt**（标准）：Python 的标准库中没有此功能，但我认为[xlrd/xlwt](http://www.python-excel.org/)是读写 excel 文件的“标准”方式。制作工作簿、添加工作表、编写数据/公式和格式化单元格相当容易。如果你需要所有这些东西，你可能会在这个库中获得最大的成功。我认为您可以选择 openpyxl ，它会非常相似，但我没有使用它。

    `XFStyle`要使用 xlwt 格式化单元格，请在写入工作表时定义并包含样式。[这是一个具有多种数字格式的示例](https://github.com/python-excel/xlwt/blob/master/examples/num_formats.py)。请参阅下面的示例代码。

*   **Tablib**（强大、直观）：[Tablib](https://tablib.readthedocs.io/en/stable/)是一个更强大且更直观的库，用于处理表格数据。它可以编写多张工作表以及其他格式的excel工作簿，例如csv、json和yaml。如果您不需要格式化的单元格（如背景颜色），您将帮自己一个忙来使用这个库，从长远来看，这将使您走得更远。

*   **csv**（简单）：您计算机上的文件是*文本文件*或*二进制文件*。文本文件只是字符，包括换行符和制表符等特殊字符，可以在任何地方轻松打开（例如记事本、Web 浏览器或 Office 产品）。csv 文件是以某种方式格式化的文本文件：每一行是一个值列表，以逗号分隔。Python 程序可以轻松读写文本，因此 csv 文件是将数据从 Python 程序导出到 excel（或其他 Python 程序）的最简单、最快捷的方法。

    Excel 文件是二进制文件，需要知道文件格式的特殊库，这就是为什么您需要额外的 Python 库或 Microsoft Excel、Gnumeric 或 LibreOffice 等特殊程序来读取/写入它们的原因。

* * *

```
import xlwt

style = xlwt.XFStyle()
style.num_format_str = '0.00E+00'

...

for i,n in enumerate(list1):
    sheet1.write(i, 0, n, fmt) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-30T23:34:15.933

我调查了一些 Python 的 Excel 模块，发现[openpyxl](https://openpyxl.readthedocs.org/en/latest/)是最好的。

免费书籍 Automate the Boring Stuff with Python[有一章关于 openpyxl](http://automatetheboringstuff.com/chapter12/)的详细信息，或者您可以查看[Read the Docs](https://openpyxl.readthedocs.org/en/latest/)站点。您无需安装 Office 或 Excel 即可使用 openpyxl。

你的程序看起来像这样：

```
import openpyxl
wb = openpyxl.load_workbook('example.xlsx')
sheet = wb.get_sheet_by_name('Sheet1')

stimulusTimes = [1, 2, 3]
reactionTimes = [2.3, 5.1, 7.0]

for i in range(len(stimulusTimes)):
    sheet['A' + str(i + 6)].value = stimulusTimes[i]
    sheet['B' + str(i + 6)].value = reactionTimes[i]

wb.save('example.xlsx') 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-11-18T05:31:48.360

CSV 代表逗号分隔值。CSV 类似于文本文件，只需添加[.CSV 扩展名即可创建](http://en.wikipedia.org/wiki/Comma-separated_values)

例如写这个代码：

```
f = open('example.csv','w')
f.write("display,variable x")
f.close() 
```

你可以用excel打开这个文件。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-09-09T17:33:32.123

```
import xlsxwriter

# Create an new Excel file and add a worksheet.
workbook = xlsxwriter.Workbook('demo.xlsx')
worksheet = workbook.add_worksheet()

# Widen the first column to make the text clearer.
worksheet.set_column('A:A', 20)

# Add a bold format to use to highlight cells.
bold = workbook.add_format({'bold': True})

# Write some simple text.
worksheet.write('A1', 'Hello')

# Text with formatting.
worksheet.write('A2', 'World', bold)

# Write some numbers, with row/column notation.
worksheet.write(2, 0, 123)
worksheet.write(3, 0, 123.456)

# Insert an image.
worksheet.insert_image('B5', 'logo.png')

workbook.close() 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-08-28T12:31:59.810

尝试查看以下库：

[xlwings](http://xlwings.org) - 用于从 Python 将数据输入和输出电子表格，以及操作工作簿和图表

[ExcelPython](https://github.com/ericremoreynolds/excelpython) - 一个 Excel 插件，用于在 Python 而不是 VBA 中编写用户定义的函数 (UDF) 和宏

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-04-23T18:38:19.723

该`xlsxwriter`库非常适合创建`.xlsx`文件。以下代码段`.xlsx`从 dicts 列表生成一个文件，同时说明**顺序**和**显示的名称**：

```
from xlsxwriter import Workbook

def create_xlsx_file(file_path: str, headers: dict, items: list):
    with Workbook(file_path) as workbook:
        worksheet = workbook.add_worksheet()
        worksheet.write_row(row=0, col=0, data=headers.values())
        header_keys = list(headers.keys())
        for index, item in enumerate(items):
            row = map(lambda field_id: item.get(field_id, ''), header_keys)
            worksheet.write_row(row=index + 1, col=0, data=row)

headers = {
    'id': 'User Id',
    'name': 'Full Name',
    'rating': 'Rating',
}

items = [
    {'id': 1, 'name': "Ilir Meta", 'rating': 0.06},
    {'id': 2, 'name': "Abdelmadjid Tebboune", 'rating': 4.0},
    {'id': 3, 'name': "Alexander Lukashenko", 'rating': 3.1},
    {'id': 4, 'name': "Miguel Díaz-Canel", 'rating': 0.32}
]

create_xlsx_file("my-xlsx-file.xlsx", headers, items) 
```

[![在此处输入图像描述](../Images/73bdfe500879d48da9e94582d1a936de.png)](https://i.stack.imgur.com/z1zLd.png)

* * *

> 注 1 - 我故意不回答 OP 提出的确切情况。相反，我提出了一个更通用的解决方案恕我直言，大多数访问者都在寻求。这个问题的标题在搜索引擎中有很好的索引并跟踪大量流量
> 
> [![在此处输入图像描述](../Images/d6400333e6f5c24ef5ddb4c325aa0c0f.png)](https://i.stack.imgur.com/qiQNe.png)
> 
> 注 2 - 如果您**不**使用 Python3.6 或更高版本，请考虑使用`OrderedDict`in `headers`。在 Python3.6 之前，`dict`不保留输入顺序。

* * *

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-27T08:32:25.720

`OpenPyxl`是一个相当不错的库，用于读取/写入 Excel 2010 xlsx/xlsm 文件：

[https://openpyxl.readthedocs.io/en/stable](https://openpyxl.readthedocs.io/en/stable)

[引用它的另一个答案](https://stackoverflow.com/a/29979532/5448626)是使用 deperciated 函数 ( `get_sheet_by_name`)。这是没有它的方法：

```
import openpyxl

wbkName = 'New.xlsx'        #The file should be created before running the code.
wbk = openpyxl.load_workbook(wbkName)
wks = wbk['test1']
someValue = 1337
wks.cell(row=10, column=1).value = someValue
wbk.save(wbkName)
wbk.close 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-28T21:45:13.140

导入确切数字的最简单方法是在`l1`和中的数字后添加一个小数`l2`。Python 将此小数点解释为您的指令以包含确切的数字。如果您需要将其限制在小数位，您应该能够创建一个限制输出的打印命令，简单的如下：

```
print variable_example[:13] 
```

假设您的数据在小数点后有两个整数，会将其限制为小数点后十位。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-26T16:20:02.760

您可以尝试基于[XlsxWriter的](https://github.com/jmcnamara/XlsxWriter)[hfexcel](https://github.com/ebsaral/hfexcel) Human Friendly 面向对象的 Python 库：

```
from hfexcel import HFExcel

hf_workbook = HFExcel.hf_workbook('example.xlsx', set_default_styles=False)

hf_workbook.add_style(
    "headline", 
    {
       "bold": 1,
        "font_size": 14,
        "font": "Arial",
        "align": "center"
    }
)

sheet1 = hf_workbook.add_sheet("sheet1", name="Example Sheet 1")

column1, _ = sheet1.add_column('headline', name='Column 1', width=2)
column1.add_row(data='Column 1 Row 1')
column1.add_row(data='Column 1 Row 2')

column2, _ = sheet1.add_column(name='Column 2')
column2.add_row(data='Column 2 Row 1')
column2.add_row(data='Column 2 Row 2')

column3, _ = sheet1.add_column(name='Column 3')
column3.add_row(data='Column 3 Row 1')
column3.add_row(data='Column 3 Row 2')

# In order to get a row with coordinates:
# sheet[column_index][row_index] => row
print(sheet1[1][1].data)
assert(sheet1[1][1].data == 'Column 2 Row 2')

hf_workbook.save() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-01T18:24:50.083

如果您需要修改现有工作簿，最安全的方法是使用[pyoo](https://pypi.org/project/pyoo/)。您需要安装一些库，并且需要一些麻烦才能跳过，但是一旦设置好，这将是防弹的，因为您正在利用 LibreOffice / OpenOffice 的广泛而可靠的 API。

请参阅我的[Gist](https://gist.github.com/JavaScriptDude/d5c9736a3ae41637c5622bdfecc8da22)，了解如何设置 linux 系统并使用 pyoo 进行一些基本编码。

以下是代码示例：

```
#!/usr/local/bin/python3
import pyoo
# Connect to LibreOffice using a named pipe 
# (named in the soffice process startup)
desktop = pyoo.Desktop(pipe='oo_pyuno')
wkbk = desktop.open_spreadsheet("<xls_file_name>")
sheet = wkbk.sheets['Sheet1']
# Write value 'foo' to cell E5 on Sheet1
sheet[4,4].value='foo'
wkbk.save()
wkbk.close() 
```

# linux - ELF 程序头文件：MemSiz 与 FileSiz

> ID：13437732
> 
> 赞同：1
> 
> 时间：2012-11-18T05:22:01.987
> 
> 标签：linux, elf, memory-alignment, readelf

`readelf -l /bin/bash`给了我这个：

```
程序标题：
  类型 偏移 VirtAddr PhysAddr
                 FileSiz MemSiz 标志对齐
  PHDR 0x00000000000000040 0x0000000000400040 0x0000000000400040
                 0x00000000000001f8 0x00000000000001f8 RE 8
  INTERP 0x00000000000000238 0x0000000000400238 0x0000000000400238
                 0x000000000000001a 0x000000000000001a R 1
      [请求程序解释器：/lib/ld-linux-x86-64.so.2]
  加载 0x00000000000000000 0x0000000000400000 0x0000000000400000
                 0x00000000000aeef4 0x00000000000aeef4 RE 200000
  加载 0x00000000000afde0 0x00000000006afde0 0x00000000006afde0
                 0x0000000000003cec 0x000000000000d3c8   RW 200000
  动态 0x00000000000afdf8 0x00000000006afdf8 0x00000000006afdf8
                 0x0000000000000200 0x0000000000000200 RW 8
  注意 0x0000000000000254 0x0000000000400254 0x0000000000400254
                 0x0000000000000044 0x0000000000000044 R 4
  GNU_EH_FRAME 0x000000000009dbc0 0x000000000049dbc0 0x000000000049dbc0
                 0x0000000000002bb4 0x0000000000002bb4 R 4
  GNU_STACK 0x0000000000000000 0x0000000000000000 0x0000000000000000
                 0x0000000000000000 0x0000000000000000 RW 8
  GNU_RELRO 0x00000000000afde0 0x00000000006afde0 0x00000000006afde0
                 0x0000000000000220 0x0000000000000220 R 1

```

为什么某些细分市场`MemSiz`不等于？应该如何处理包含但不包含的内存区域？`FileSiz``LOAD``MemSiz``FileSiz`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T06:18:57.983

有问题的可加载段似乎是程序的数据段。

程序中的数据段包含已初始化和未初始化程序变量的空间。初始化变量的值存储在程序的可执行文件中。未初始化的程序变量不需要存储在任何地方；而是在名为“.bss”的特殊零大小部分中为它们保留空间。

因此，可执行文件数据段的文件大小可能小于其内存大小。

为了显示：

```
/*
 * Space for the intialized variable 'x' would be reserved the
 * executable's ".data" section, along with its initial value.
 */
int x = 42;

/*
 * Space for the uninitialized variable 'y' would be reserved in
 * the ".bss" section; no file space would be allocated in the
 * executable.
 */
int y; 
```

在类 unix 系统上，映射到“.bss”部分的数据段部分将在程序加载时填充为零。

# javascript - 如何在表格行中填充图像？

> ID：13437740
> 
> 赞同：3
> 
> 时间：2012-11-18T05:23:53.583
> 
> 标签：javascript, html, image, html-table

我正在尝试将图像填充到表格中。这就像一个图像是一个问题，另一个图像是一个答案，它们将在表格中进行比较。我试图在网上搜索，但找不到任何实质性的东西。

```
<html>
  <head>
    <title>Game Selection</title>
    <script type="text/javascript">
      function gameddselected() {
        var gamedd = document.getElementById('gamedd');
        var x =document.getElementById('scoretable').rows
        var a=x[0].cells
        var b=x[1].cells
        var c=x[2].cells
        if (gamedd.value=='1') {
          a[0].innerHTML="Game1 Score Table"
        } else if (gamedd.value=='2') {
          a[0].innerHTML="Game2 Score Table"
        } else if (gamedd.value=='3') {
          a[0].innerHTML="Game3 Score Table"
        } else if (gamedd.value=='4') {
          a[0].innerHTML="Game4 Score Table"
        }
      }
    </script>
  </head>
  <body background="http://1.bp.blogspot.com/_68sk2PaFt3Q/Sl8n81IoRcI/AAAAAAAAEUw/AlnMPEC9uc0/s1600/Disable+File+Indexing+In+Windows++Speed+Up+Windows+By+Disabling+Search+Index+2.jpg" width="80%" height="80%">
    <h2 style="text-align: center;">
      <span style="font-size:18px;">
        <span style="font-family: arial, helvetica, sans-serif;">Please select a Game&nbsp;
        </span>
      </span>
    </h2>
    <form action="" method="POST" name="form2">
      <div align="center">Select:
        <select name="gamedd" id="gamedd" style="width:200px" onChange="gameddselected()">
          <option value="1">Game1</option><option value="2">Game2</option>
          <option value="3">Game3</option><option value="4">Game4</option>
        </select>
      </div>
    </form>
    <TABLE BORDER="5" WIDTH="50%" CELLPADDING="4" CELLSPACING="3" ALIGN="CENTER" id="scoretable">
      <TR>
        <TH COLSPAN="3"><BR><H3>TABLE TITLE</H3></TH>
      </TR>
      <TR>
        <TH>Question Images</TH>
        <TH>Answer Images</TH>
        <TH>Score</TH>
      </TR>
      <TR ALIGN="CENTER">
        <TD>Data 1</TD>
        <TD>Data 2</TD>
        <TD>Data 2</TD>
      </TR>
    </TABLE>
  </body>
</html> 
```

我希望生成一个图像来代替表中的 Data1。怎么可能呢？

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:51:07.853

**HTML**

```
<TABLE BORDER="5" WIDTH="50%" CELLPADDING="4" CELLSPACING="3" ALIGN="CENTER" id="scoretable">
  <TR>
    <TH COLSPAN="3"><BR><H3>TABLE TITLE</H3></TH>
  </TR>
  <TR>
    <TH>Question Images</TH>
    <TH>Answer Images</TH>
    <TH>Score</TH>
  </TR>
  <TR ALIGN="CENTER">
    <TD>Data 1</TD>
    <TD>Data 2</TD>
    <TD>Data 2</TD>
  </TR>
</TABLE> 
```

**CODE**使用 jquery 和伪代码

```
$("#gamedd").change(function(){
    if selected == urCriteria then; 
    var img = $("<img />").attr('src', 'http://somedomain.com/image.jpg');
    $(table tr:lastchild td:firstchild).append(img );
 }); 
```

您甚至可以使用 ajax 调用加载图像字符串 url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T05:37:41.537

* * *

## HTML

```
 <TR ALIGN="CENTER">
    <TD id="Data1">Data 1</TD>
    <TD id="Data2">Data 2</TD>
    <TD id="Data3">Data 3</TD>
  </TR> 
```

* * *

## 代码

```
for(i=1;i<4;i++) {
  x=document.getElementById("Data"+i);
  x.innerHTML="<img src='/path/to/image"+i+".jpg' />";
// Assuming your images are named [something]NUMBER.jpg
// You could instead use an array
} 
```

* * *

## 结果

```
<div>​
  <td id=​"Data1">​&lt;img src=​"/​path/​to/​image1.jpg">​&lt;/td>​
  <td id=​"Data2">​&lt;img src=​"/​path/​to/​image2.jpg">​&lt;/td>​
  <td id=​"Data3">​&lt;img src=​"/​path/​to/​image3.jpg">​&lt;/td>​
</div>​ 
```

# spring - 为什么 Spring 自动装配会失败？

> ID：13437741
> 
> 赞同：1
> 
> 时间：2012-11-18T05:24:01.033
> 
> 标签：spring, timer, autowired

```
@Service
public class LogProcessorServiceImpl {
    @Autowired
    private static ApplicationConfigurationService applicationConfigurationService;

    public static void processPageRequestsLogs() {
        if(applicationConfigurationService==null) {
            System.out.println("autowire failed");
        } 
```

我有 ApplicationConfigurationService 服务像这样在整个地方自动连接，它工作正常。正在扫描此类的包，所以这不是问题。它可能与调用此特定方法的方式有关。我有一个在所有其他 servlet 之后加载的 servlet，它会触发一个计时器，该计时器以 60 秒的延迟执行上述方法。我认为应该完成所有自动装配。

```
public class ProcessSchedulerServlet implements javax.servlet.Servlet {
    Timer timer=new Timer();

     @Override
     public void init(ServletConfig arg0) throws ServletException {
         timer.scheduleAtFixedRate(new TimerTask() {
             public void run() {
                 LogProcessorServiceImpl.processPageRequestsLogs();
             }
         }, 60*1000, 120*1000);
     } 
```

这是我真正使用 ApplicationConfigurationService 后会发生的情况：

```
autowire failed
Exception in thread "Timer-1" java.lang.NullPointerException
at com.siteadmin.services.impl.LogProcessorServiceImpl.processPageRequestsLogs(LogProcessorServiceImpl.java:39)
at com.siteadmin.servlets.ProcessSchedulerServlet$1.run(ProcessSchedulerServlet.java:20)
at java.util.TimerThread.mainLoop(Timer.java:555)
at java.util.TimerThread.run(Timer.java:505) 
```

=== 2012-11-18 ========================================== ===================

另请参阅：[如何进行 Spring 自动装配？](https://stackoverflow.com/questions/13437913/how-to-go-about-spring-autowiring)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T05:39:42.033

您不能在 Spring 中自动装配静态字段，这在[此处进行了讨论](https://stackoverflow.com/questions/1018797/autowired-static-field-spring-2-5)

作为替代方案，如果您`LogProcessorService`驻留在[根 Web 应用程序上下文中，则可以使用 Spring](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring) [WebApplicationContextUtils](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html)实用程序类自动装配它。

```
public class ProcessSchedulerServlet implements javax.servlet.Servlet {
     Timer timer=new Timer();

     @Autowired
     LogProcessorService logProcessorService;

     @Override
     public void init(ServletConfig arg0) throws ServletException {
         WebApplicationContextUtils.getWebApplicationContext(arg0.getServletContext())
            .getAutowireCapableBeanFactory().autowireBean(this);

         final LogProcessorService svc = this.logProcessorService;
         timer.scheduleAtFixedRate(new TimerTask() {
         public void run() {
             svc.processPageRequestsLogs();
         }
         }, 60*1000, 120*1000); 
```

通常，您应该避免使用 Java 单例，因为使用 Spring 单例就足够了。

此外，如果您`LogProcessorServiceImpl`使用`@Service`注释声明，则意味着它是 Spring 单例，因此您根本不应该在那里使用静态字段。

PS这个答案是关于自动装配的，它假设TimerTask的想法是正确的，在真正的应用程序中考虑使用[Spring Scheduling API](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html)

# c++ - 将 inet_ntop 的结果转换为字符串

> ID：13437743
> 
> 赞同：2
> 
> 时间：2012-11-18T05:25:28.813
> 
> 标签：c++, string, sockets, inet-ntop

如何将函数的返回`inet_ntop`(const char *) 转换为`string`？

编码：

```
string ip = inet_ntop(b->ifa_addr->sa_family,tempAddrPtr,addressOutputBuffer, sizeof(addressOutputBuffer)); 
```

总是导致段错误...

```
struct ifaddrs *a;
void *tempAddrPtr = NULL;
struct ifaddrs *b;
char addressOutputBuffer[INET6_ADDRSTRLEN];
int i=0;
i=getifaddrs(&a);
cout << i;
b=a;
cout << name;
for (b = a; b; b = b->ifa_next) {
        cout << b->ifa_name;

        if(b->ifa_addr->sa_family == AF_INET)
            tempAddrPtr = &((struct sockaddr_in *)b->ifa_addr)->sin_addr;
          else
            tempAddrPtr = &((struct sockaddr_in6 *)b->ifa_addr)->sin6_addr;
        printf(" Internet Address:  %s \n",
                     inet_ntop(b->ifa_addr->sa_family,
                               tempAddrPtr,
                               addressOutputBuffer,
                               sizeof(addressOutputBuffer)));
                     string ip = inet_ntop(b->ifa_addr->sa_family,tempAddrPtr,addressOutputBuffer, sizeof(addressOutputBuffer));

}
freeifaddrs(a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:31:20.767

inet_ntop 返回 char*，如果您的 inet_ntop 返回，将正确生成字符串 ip 对象。突兀的部分是inet_ntop参数，带指针的参数。

一些调试提示：

```
1\. check b is null or not
2\. tempAddrPtr is valid or not
3\. addressOutputBuffer is valid or not 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-18T22:17:18.977

问题是你的铸造：

```
if(b->ifa_addr->sa_family == AF_INET)
    tempAddrPtr = &((struct sockaddr_in *)b->ifa_addr)->sin_addr;
else
    tempAddrPtr = &((struct sockaddr_in6 *)b->ifa_addr)->sin6_addr; 
```

应该：

```
tempAddrPtr = &(reinterpret_cast<struct sockaddr_in*>(b->ifa_addr)->sin_addr);
tempAddrPtr = &(reinterpret_cast<struct sockaddr_in6*>(b->ifa_addr)->sin_addr); 
```

或 C：

```
tempAddrPtr = &((struct sockaddr_in*)(b->ifa_addr)->sin_addr);
tempAddrPtr = &((struct sockaddr_in6*)(b->ifa_addr)->sin_addr); 
```

# android - 如何修复错误 setBeamPushUris？

> ID：13437745
> 
> 赞同：1
> 
> 时间：2012-11-18T05:25:42.873
> 
> 标签：android, eclipse, nfc

我想找到修复错误的方法（![在此处输入图像描述](../Images/be76e09fe3ed0ef51af74490a56923e9.png)）我使用了 android 4 API Level 14，下面的代码

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.JELLY_BEAN) {

            adapter.setBeamPushUris(null, this);
        } 
```

使用此代码，请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:17:50.373

我认为如果您更改构建目标，这应该可以编译。

```
In Project -> properties -> Android-> Select 4.1 
```

编辑：你的情况也不正确。这个 api 是在 JellyBean 中引入的，所以

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) 
```

# matlab - 对具有相同 zoneID 的相邻单元格进行分组，MATLAB

> ID：13437746
> 
> 赞同：2
> 
> 时间：2012-11-18T05:25:54.950
> 
> 标签：matlab, grouping, classification, zones

假设我有以下“区域”矩阵

```
brk_group =

     1     1     1     1
     3     2     2     3
     3     3     3     3 
```

我想为这些值创建一个“分组矩阵”。一个组被定义为具有相同区域值的相邻单元格（上、右、下、左）。

一个区域值可以有多个组，因为区域不必在空间上连接。

数据：

```
brk_group = [1 1 1 1; 3 2 2 3; 3 3 3 3] 
```

下面的“我的当前代码”有什么问题......

单元格（2,4）中的区域值“3”连接到单元格（2,1）中的区域值“3”但是当我当前答案中的循环达到（2,4）时，看不到这种连接性并且将创建一个新组，错误地对单元格 (2,1) 和 (2,4) 进行分组...

编辑：只想使用基本的 MATLAB，请不要使用图像处理工具箱！=)

澄清：区域被定义为具有相同区域值的所有单元格。组被定义为具有相同区域值的所有空间连接（上、下、左、右）单元。

我当前的代码：

```
function [groupMat groupIds] = createZoneGroups(zoneMat)
%
% groupMat = createZoneGroups(zoneMat)
%
% Groups zones spatially.
%
%   Input:
%       zoneMat: nxm matrix of "zones".
%
%   Output:
%       groupMat: nxm matrix of group ID's
%       groupIds: An array of unique group ID's
%
%   Note: A group is defined as spatially connected same zones. Diagonal
%       cells are not spatially connected.
%
%   Author: Kyle W. Purdon
%
groupIds = [];
groupMat = nan(size(zoneMat));
for rowIdx = 1:size(zoneMat,1)
    for colIdx = 1:size(zoneMat,2)

        % Check if the cell is nan, if so group(r,c)=nan
        if isnan(zoneMat(rowIdx,colIdx))
            continue;
        end

        % Check if the current cell has a group, if it does, break.
        if ~isnan(groupMat(rowIdx,colIdx))
            continue;
        end

        % Check the surrounding cells for groups, if any of the surrounding
        % cells (1) have a group, and (2) are in the same zone, assighn the
        % current cell that group. If not assign the current cell a new
        % group.

        % Check top cell
        if rowIdx > 1 && ~isnan(groupMat(rowIdx-1,colIdx))
            if isequal(zoneMat(rowIdx,colIdx),zoneMat(rowIdx-1,colIdx));
                groupMat(rowIdx,colIdx) = groupMat(rowIdx-1,colIdx);
                continue;
            end
        end
        % Check right cell
        if colIdx < size(zoneMat,2) && ~isnan(groupMat(rowIdx,colIdx+1))
            if isequal(zoneMat(rowIdx,colIdx),zoneMat(rowIdx,colIdx+1));
                groupMat(rowIdx,colIdx) = groupMat(rowIdx,colIdx+1);
                continue;
            end
        end
        % Check bottom cell
        if rowIdx < size(zoneMat,1) && ~isnan(groupMat(rowIdx+1,colIdx))
            if isequal(zoneMat(rowIdx,colIdx),zoneMat(rowIdx+1,colIdx));
                groupMat(rowIdx,colIdx) = groupMat(rowIdx+1,colIdx);
                continue;
            end
        end
        % Check left cell
        if colIdx > 1 && ~isnan(groupMat(rowIdx,colIdx-1))
            if isequal(zoneMat(rowIdx,colIdx),zoneMat(rowIdx,colIdx-1));
                groupMat(rowIdx,colIdx) = groupMat(rowIdx,colIdx-1);
                continue;
            end
        end

        % If the loop gets to this point, assign a new groupId to the cell.
        if isempty(groupIds)
            groupIds = 1;   % Start with group #1
        else
            groupIds(end+1) = groupIds(end)+1;  %Increment the last group by 1.
        end

        groupMat(rowIdx,colIdx) = groupIds(end);

    end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:24:03.100

由我必须在 MATLAB 交换中真正挖掘的代码解决。

它本质上是使用“Union-Find”算法的 bwlabel() 的“通用”版本。

[http://www.mathworks.com/matlabcentral/fileexchange/26946-label-connected-components-in-2-d-array](http://www.mathworks.com/matlabcentral/fileexchange/26946-label-connected-components-in-2-d-array)

# c++ - 在 malloc_error_break 中设置断点以在 C++ 中进行调试

> ID：13437748
> 
> 赞同：4
> 
> 时间：2012-11-18T05:26:33.750
> 
> 标签：c++, memory-leaks, gdb, valgrind

我正在编写一个带有 2 个命令行参数的程序：`a`和`b`分别。

只要一切都好`a <= 17.5`

一旦`a > 17.5`程序抛出以下错误：

已释放对象的校验和不正确 - 对象可能在被释放后被修改

我已将问题缩小到以下代码：

```
for(int a=0; a < viBrickWall.size(); a++) {
    vector<int64_t> viTmp(iK-i);
    fill(viTmp.begin(),viTmp.end(),2);

    for(int b = 0; b < viBrickWall[a].size(); b++) {
         viTmp[viBrickWall[a][b]] = 3;
    }

    viResult.push_back(viTmp);
    viTmp.clear();
} 
```

删除后一段代码，消除了错误。

我也在使用 valgrind 来调试内存，但我还没有找到任何解决方案。

这是 valgrind 报告的副本：

[在 pastebin 中托管的报告](http://pastebin.com/ZNwc0mh9)

**编辑**

我用调试标志编译了程序：

`g++ -g -O0 -fno-inline program.cpp`

并使用 valgrind 运行它，如下所示：

` valgrind --leak-check=full --show-reachable=yes --dsymutil=yes ./a.out 48 10 `

我注意到以下行：

```
 ==15318== Invalid write of size 8
 ==15318==    at 0x100001719: iTileBricks(int) (test.cpp:74)
 ==15318==    by 0x100001D7D: main (test.cpp:40) 
```

第 74 行是：

`viTmp[viBrickWall[a][b]] = 3;`

第 40 行是：

`viBrickWall = iTileBricks(iPanelWidth);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:34:23.767

您使用此行导致对堆内存的无效写入：

`viTmp[viBrickWall[a][b]] = 3;`

这意味着当时`viBrickWall[a][b]`正在索引之外`viTmp`。添加

```
int i = viBrickWall[a][b];
assert(0 <= i && i < viTmp.size()); 
```

到店前`viTmp[i] = 3`。

提示：也许将 viTmp 的大小增加一可以解决它：

```
-vector<int64_t> viTmp(iK-i);
+vector<int64_t> viTmp(iK - i + 1); 
```

我不知道内容，`viBrickWall`所以这只是 Valgrind 输出的有根据的猜测。

我不确定您使用的是 GNU`libstdc++`还是`libc++`Mac OSX。如果您正在使用`libstdc++`或手边有一个 Linux 机器，请声明`viTmp`它`std::__debug::vector`会很快发现这个问题。

# python - 如何迭代一维数组并在 Numpy 中构建一个二维数组？

> ID：13437749
> 
> 赞同：2
> 
> 时间：2012-11-18T05:26:47.970
> 
> 标签：python, numpy, 2d, loops, multidimensional-array

如果我有一个要矢量化的 1D`numpy.ndarray` `b`和一个 Python `function` `f`，则使用该`numpy.vectorize`函数非常容易：

`c = numpy.vectorize(f)(a)`.

但是如果`f`返回一维`numpy.ndarray`而不是标量，我该如何构建二维`numpy.ndarray`呢？（也就是说，我希望`numpy.ndarray`从返回的每个 1D`f`成为新 2D 中的一行`numpy.ndarray`。）

例子：

```
def f(x):
    return x * x

a = numpy.array([1,2,3])
c = numpy.vectorize(f)(a)

def f_1d(x):
    return numpy.array([x, x])

a = numpy.ndarray([1,2,3])
d = ???(f_1d)(a) 
```

在上面的例子`c`中会变成`array([1, 4, 9])`. 什么应该`???`替换为 if`d`应该成为`array([[1, 1], [2, 2], [3, 3]])`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:16:40.657

可以这样做：

```
def f_1d(x):
    return (x,x)
d = numpy.column_stack(numpy.vectorize(f_1d)(a)) 
```

将输出：

```
array([[1, 1],
       [2, 2],
       [3, 3]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:33:19.500

我认为您正在寻找[重塑](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.reshape.html)和[重复](http://docs.scipy.org/doc/numpy/reference/generated/numpy.repeat.html)

```
def f(x):
    return x * x
a = numpy.array([1,2,3])
b= numpy.vectorize(f)(a)
c = numpy.repeat(b.reshape( (-1,1) ),2, axis=1)
print c 
```

输出：

```
[[1 1]
 [4 4]
 [9 9]] 
```

您也可以直接设置 array.shape 元组。**如果**您需要编写纯 python ，可能值得知道您可以完成与`vectorize`using相同的操作。会成为`map`**`b= numpy.vectorize(f)(a)``b=map(f,a)`**

 **使用这种方法，完全没有必要拥有您`f_1d`的信息，因为它似乎所做的只是重复信息，而`numpy.repeat`.

此外，此版本要快一些，但这仅在您处理大型数组时才重要。**

# git - Git push origin master 有公钥问题

> ID：13437750
> 
> 赞同：2
> 
> 时间：2012-11-18T05:27:42.790
> 
> 标签：git, github, ubuntu-11.10

我在将默认的 Rails 应用程序提交到 git 时遇到了一些麻烦，而且我在解决问题时遇到了困难。我目前正在运行 Ubuntu 11.10。我正在运行 git 版本 1.7.5.4。我浏览了一系列

```
git init
git add .
git commit -m "first commit"
git remote add origin git@github.com:username/first_app.git
git push -u origin master 
```

我也在 github.com 上进行了 repo，但后来我收到了这个错误：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:30:06.870

您需要将系统的公钥添加到 github.com 上的 git 管理界面。

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

# jquery - Colorbox 和 Volusion 不起作用

> ID：13437751
> 
> 赞同：1
> 
> 时间：2012-11-18T05:27:43.257
> 
> 标签：jquery, html, colorbox, volusion

我无法弄清楚为什么我的 Colorbox 没有显示在我正在处理的 Volusion 网站上。我已经从该站点获取了代码并将其放入 JSFiddle 中，它工作正常。

当它在网站上完成时，它会放置半透明覆盖并打开颜色框，但随后会立即关闭该框。覆盖仍然就像颜色框已启动，如果我在 Chrome 中使用检查元素工具或在 Firefox 中使用 Firebug，则颜色框存在于网站上但未显示。如果我点击离开（就像使用普通的 Colorbox 一样），覆盖消失，网站又回来了。

我的手有点束缚，因为我无法展示该网站，因为它是为客户服务的，但有人知道为什么会发生这种情况。我不认为这是 jQuery 冲突，因为它实际加载了所有内容，而且我不知道为什么内容不显示，因为它在 jsFiddle 中运行良好。任何帮助将不胜感激，如果没有示例，我理解这是否很难。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T19:52:20.450

没有更多信息很难说，但我知道当我尝试在 Volusion 网站上使用 jQuery 创建购物车总对话框时，我遇到了问题。

最后我不得不为我的脚本使用 noConflict 模式：

```
<script type="text/javascript">
$.noConflict();
jQuery(document).ready(function($) {
// Code that uses jQuery's $ can follow here.
});
// Code that uses other library's $ can follow here.
</script> 
```

我还通过[JSLint](http://www.jslint.com/)运行了我的 .js，因为在 Volusion 环境中，格式似乎真的很重要。总的来说，我发现你在 Volusion 上尝试做的任何事情都需要更多的戳戳和刺激。

不确定这是否会有所帮助，但它可能是一个开始的地方。

# xcode - 如何使用 CALayer 的“+ (id) defaultValueForKey”等返回原始属性值？

> ID：13437752
> 
> 赞同：2
> 
> 时间：2012-11-18T05:27:45.567
> 
> 标签：xcode, cocoa, core-animation, calayer, kvc

所以.. `CALayer`KVC“扩展”处理所有怪人的......比如......

```
+ (id) defaultValueForKey: (NSString*)key    {
   return [key isEqualToString:@"borderColor"] 
        ? (id)cgPINK 
        : [super defaultValueForKey:key];    } 
```

如果您不提供值， [Apple 的文档会提到](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)如何最好地对结构进行编码，当它们引用默认值时......

> 例如，如果 key 的值是 CGSize 结构，则该方法返回一个包含 (0.0,0.0) 的大小结构，该结构包含在 NSValue 对象中。

但是，我不知道如何提供***正常的、臭的、原始***的，即`CGFloat`

我试过`@VAL`-type`NSNumber`编码，

~~`return ![key isEqualToString:@"lineWidth"] ?: @3;`~~

并且没有可行`NSValue`的方法，甚至拼命尝试将它们投向`id`

~~`return ![key isEqualToString:@"zPosition"] ?: (id)262453;`~~`// lol`

这是怎么回事？由于 CALayer 的奇数性质，这只是“哦，你不能”的情况吗？我尴尬地忽略了一个明显的解决方案？或者它只是一个阴暗的 API - 拒绝记录它自己的缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:12:31.007

您应该能够返回一个 NSNumber。

我还没有尝试过使用 Objective C 文字。暂时跳过它以限制并发症。只需使用这样的代码：

```
return [NSNumber numberWithFloat: 3.0]; 
```

或 numberWithBool，或 numberWithInt，或任何合适的。

# asp.net - 图像按钮错误：System.ArgumentException：回发或回调参数无效

> ID：13437753
> 
> 赞同：1
> 
> 时间：2012-11-18T05:27:56.000
> 
> 标签：asp.net

在网格视图中，我上传了带有图像图标的文件。为了在网格视图中有图像图标并在行中获取上传文件的类型（命令参数），我使用了图像按钮，它显示图像图标，但是当我单击图像按钮时，出现错误“System.ArgumentException：无效的回发或回调参数”如果我可以使用图像控件而不是图像按钮对我来说更好，但我不知道如何从行中获取扩展文件类型。此外，如果我们可以在这种情况下禁用链接图像按钮，也没问题。

**tblfile 的数据库设计如下：**

```
Fileid(int)
Docid(int)
TransId(int)
Content type varchar(75)
Data varbinary(max)
Extention varchar(50) 
```

**CS：**

```
protected void GridViewEfile_DataBound(object sender, EventArgs e)
 {
    foreach (GridViewRow gvr in GridViewEfile.Rows)                   //loop each row
    {
        ImageButton ib = (ImageButton)gvr.FindControl("ib1");    //find imagebutton

        string exten = ib.CommandArgument;;      //get index of '.'
        if (exten == ".pdf")
            ib.ImageUrl = @"~/Images/iconpdf.gif";                      //set image for imagebutton in each row

        else if (exten == ".docx")

            ib.ImageUrl = @"~/Images/icondoc.gif";

    }
}

protected void ib1_Command(object sender, CommandEventArgs e)
{

       _DataContext = new EDMSDataContext();
       //you can get your command argument values as follows
       string FileId = e.CommandName.ToString();
       int _FileId = Convert.ToInt32(FileId);
       tblFile Efile = (from ef in _DataContext.tblFiles
                        where ef.FileId == _FileId
                        select ef).Single();
       if (Efile != null)
       {

           download(Efile);

       }
   } 
```

**.aspx：**

```
<asp:GridView ID="GridViewEfile" runat="server" AutoGenerateColumns="False" CellPadding="4"
    OnDataBound="GridViewEfile_DataBound" ForeColor="Black" DataKeyNames="FileID"
    GridLines="None" ShowHeader="False">
    <AlternatingRowStyle BackColor="Yellow" />
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:ImageButton runat="server" ID="ib1" OnCommand="ib1_Command" CommandName='<%#Eval("FileID")%>'
                    CommandArgument='<%# Eval("Exten") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" OnCommand="LinkButton1_Command" CommandName="Download"
                CommandArgument='<%#Eval("FileID")%>'><%#Eval("FileName")%></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="ContentType" />
    </Columns>
    <EditRowStyle BackColor="#7C6F57" />
    <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="Red" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
   <RowStyle BackColor="#E3EAEB" />
   <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
</asp:GridView> 
```

# android - Android：如何使绘制的形状移动以及如何仅绘制形状的一部分，例如 3/4 实心圆

> ID：13437755
> 
> 赞同：2
> 
> 时间：2012-11-18T05:28:30.417
> 
> 标签：android, android-animation

动画：

我阅读的 Android 书籍上的所有动画都是在现有图像上制作的。他们在 SD 卡上加载图像并使用动画功能（如 alpha、缩放、平移和旋转）使其移动。但是，如果我想让我绘制的形状在屏幕上移动怎么办。例如，我只是在屏幕上画了一个圆圈，想让它从左向右移动。我怎样才能做到这一点？

绘画：

drawCircle 之类的函数可以绘制完整的几何形状，但我只想绘制形状的一部分，例如 3/4 实心圆。我应该怎么做？如果我使用drawArc，圆圈上会有一个“V”形凹槽，我希望它是平的。

# android - 验证 Android 应用程序

> ID：13437756
> 
> 赞同：1
> 
> 时间：2012-11-18T05:28:36.110
> 
> 标签：android, authentication, oauth-2.0

我是 android 新手，我正在构建一个我想使用本地用户 google 帐户进行身份验证的应用程序。不幸的是，我在查看 Auth 2.0 并通过谷歌服务登录时让自己陷入了困境。

推荐的认证途径是什么（希望不需要输入登录名）？我尝试了许多我看到的样本，但其中大部分似乎已被弃用。

任何示例代码也会非常有帮助。

我正在使用本教程，但它有点过时了，我相信它现在更简单了。

[http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)

谢谢，克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:30:07.337

这是我解决它的方法。不知道这是否是推荐的方法，但它有效......

在我的条目活动（主要）的 OnCreate 中，我放了......

```
 AccountManager accountManager = AccountManager.get(this);
 Account[] accounts = accountManager.getAccountsByType("com.google");
 AccountManagerFuture<Bundle> futur;
 futur = accountManager.getAuthToken(accounts[0],AUTH_TOKEN_TYPE_USERINFO_PROFILE, null, null,
                new OnTokenAcquired(), new Handler(new OnError())); 
```

在我创建的同一个活动中......

```
private class OnTokenAcquired implements AccountManagerCallback<Bundle> {
        @Override
        public void run(AccountManagerFuture<Bundle> result) {
            // Get the result of the operation from the AccountManagerFuture.
            Bundle bundle;
            try {
                bundle = result.getResult();
                // The token is a named value in the bundle. The name of the
                // value
                // is stored in the constant AccountManager.KEY_AUTHTOKEN.
                String token = bundle.getString(AccountManager.KEY_AUTHTOKEN);
                //If token isn't null then let them in and also make sure Crunchy accounts are created
                if(token!=null){
                    ProcessToken pt = new ProcessToken(token);
                    pt.execute("");
                    }

                Intent launch = (Intent) bundle.get(AccountManager.KEY_INTENT);
                if (launch != null) {
                    startActivityForResult(launch, 0);
                    return;
                }
            }catch (OperationCanceledException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (AuthenticatorException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

我还创建了一个 asyncTask 来处理令牌（因为我做了更多的逻辑来设置帐户和设置 cookie）。看起来像这样（我的大部分处理/cookie 逻辑还没有完成）

```
 package com.craig.activities.login;

import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import android.os.AsyncTask;
import android.util.Log;

public class ProcessToken extends AsyncTask<String,Integer,Long>{

    private static final String AUTH_ACCESS_TOKEN_URL = "https://www.googleapis.com/oauth2/v1/userinfo?access_token=";
    private static final String DEBUG_TAG = "OnTokenAcquired.class";
    private static String token="";

    public ProcessToken(String tokenValue){
        token=tokenValue;
    }

    @Override
    protected Long doInBackground(String... params) {
        try {
            URL url = new URL(AUTH_ACCESS_TOKEN_URL+token);
            HttpURLConnection con = (HttpURLConnection) url.openConnection();
            int serverCode= con.getResponseCode();
            if(serverCode==200){
                Log.i(DEBUG_TAG, "code 200!!!");
                                //PUT MY LOGIC IN HERE....
                }
            else{
                Log.i(DEBUG_TAG, "Oops, We had an error on authentication");
            }
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
     } 
```

不确定这是否是最好的，但它似乎对我有用....

# c - printk loff_t 类型的格式说明符？

> ID：13437758
> 
> 赞同：12
> 
> 时间：2012-11-18T05:29:43.250
> 
> 标签：c, linux, linux-kernel, linux-device-driver, printk

我正在为学校作业开发 Linux 字符设备驱动程序，但不知道如何将`*ppos`传递给我的 read 类型的函数打印出来`loff_t`。

我知道我必须使用内核`printk`中的标准库而不是标准库`printf`，但我似乎无法找出正确的格式说明符。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T14:02:49.240

loff_t 只是一个类型定义。要确定要使用的格式说明符，您应该查找它的定义：

*   [typedef __kernel_loff_t loff_t](http://lxr.linux.no/#linux+v3.6.7/include/linux/types.h#L54)
*   [typedef long long __kernel_loff_t](http://lxr.linux.no/#linux+v3.6.7/include/asm-generic/posix_types.h#L87)

然后您可以参考[内核的文档](http://www.kernel.org/doc/Documentation/printk-formats.txt)以了解如何格式化“long long”（％lld）。

# java - JCheckBox 在运行时不会取消选择

> ID：13437760
> 
> 赞同：1
> 
> 时间：2012-11-18T05:29:54.330
> 
> 标签：java, swing, jcheckbox

我创建了一个使用单选按钮、按钮和复选框的基本程序。我的问题是在运行时可以选中复选框但不能取消选中。我很确定它很简单，但是我尝试了 oracle 网站上的代码片段，但似乎没有用。任何人都可以指出我正确的方向吗？谢谢。

这是一个处理复选框事件的内部类。假设接收事件并将变量设置为适当的价格。我试过`else`了，但这似乎不起作用。

```
private void buildPanel()
{
    //Create the label, radio buttons, check boxes, and buttons
    messageLabel = new JLabel("Select the package of your choice: ");
    min1 = new JRadioButton("300 Minutes - $45.00 per month.");
    min2 = new JRadioButton("800 Minutes - $65.00 per month.");
    min3 = new JRadioButton("1500 Minutes -  $99.00 per month.");

    model1 = new JRadioButton("Model 100 - $29.95");
    model2 = new JRadioButton("Model 110 - $49.95 ");
    model3 = new JRadioButton("Model 200 - $99.95");

    vMail = new JCheckBox("Voice Mail  - $5.00 per month.");
    vMail.setSelected(false);
    textMes = new JCheckBox("Text Messaging - $10.00 per month.");
    textMes.setSelected(false);

    okButton = new Button("OK");

    //Group the radio buttons
    radiogroupmin = new ButtonGroup();
    radiogroupmin.add(min1);
    radiogroupmin.add(min2);
    radiogroupmin.add(min3);

    radiogroupmodel = new ButtonGroup();
    radiogroupmodel.add(model1);
    radiogroupmodel.add(model2);
    radiogroupmodel.add(model3);

    //Group the check boxes
    checkboxgroup = new ButtonGroup();

    checkboxgroup.add(vMail);
    checkboxgroup.add(textMes);

    //Add action listener to the radio buttons
    min1.addActionListener(new RadioButtonListener());
    min2.addActionListener(new RadioButtonListener());
    min3.addActionListener(new RadioButtonListener());

    model1.addActionListener(new RadioButtonListener());
    model2.addActionListener(new RadioButtonListener());
    model3.addActionListener(new RadioButtonListener());

    //Add action listener to the check boxes
    vMail.addItemListener(new CheckBoxListener());
    textMes.addItemListener(new CheckBoxListener());

    //Add action listener to the button
    okButton.addActionListener(new ButtonListener());

    //create a panel and add the components to it
    panel = new JPanel(new BorderLayout());
    panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));

    panel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
    panel.add(messageLabel);
    panel.add(min1);
    panel.add(min2);
    panel.add(min3);

    panel.add(model1);
    panel.add(model2);
    panel.add(model3);

    panel.add(vMail);
    panel.add(textMes);     

    panel.add(okButton);
}

public static class RadioButtonListener implements ActionListener
{       
        public static double minPrice;
        public static String model;
        public static double modelPrice = 0.0;

    public void actionPerformed(ActionEvent e)
    {
        if (e.getSource() == min1)
        {
            minPrice = 45.00;
        }
        else if(e.getSource() == min2)
        {
            minPrice = 65.00;
        }
        else if(e.getSource() == min3)
        {
            minPrice = 99.00;
        }

        if(e.getSource() == model1)
        {
            model = "Model 100";
            modelPrice = 29.00;
        }
        else if(e.getSource() == model2)
        {
            model = "Model 110";
            modelPrice = 49.99;
        }
        else if(e.getSource() == model3)
        {
            model = "Model 200";
            modelPrice = 99.99;
        }
    }

    public static double getMinPrice()
    {
        return minPrice;
    }

    public static  String getModel()
    {
        return model;
    }

    public static double getModelPrice()
    {
        return modelPrice;
    }
}

public static class CheckBoxListener implements ItemListener
{

    static double voicePrice;
    static double  textPrice;
    public void itemStateChanged(ItemEvent e) 
    {
        if(e.getSource() == vMail)
        {
            if (e.getStateChange() == ItemEvent.SELECTED)
            {
            voicePrice = 5.00;
            }
            else
            {
            voicePrice = 0.0;
            }
        }           

        if(e.getSource() == textMes)
        {
            if(e.getStateChange() == ItemEvent.SELECTED)
            {
                textPrice = 10.00;
            }
            else
            {
                textPrice = 0.0;
            }
        }
    }

    public static double getVoicePrice()
    {
        return voicePrice;
    }

    public static double getTextPrice()
    {
        return textPrice;
    }   

}
private  class ButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == okButton)
        {
            DecimalFormat df = new DecimalFormat("$00.##");

            double total;
            final double tax = 0.6;
            final double modelTax = (RadioButtonListener.getModelPrice() * tax) + RadioButtonListener.getModelPrice();
            total = RadioButtonListener.getMinPrice() + 
                    modelTax + CheckBoxListener.getVoicePrice() + CheckBoxListener.getTextPrice(); 
            JOptionPane.showMessageDialog(null, "Your total is: " + df.format(total));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:05:00.620

也许尝试改变两者：

```
if(vMail.isSelected()) 
```

和：

```
if(textMes.isSelected()) 
```

至：

```
if(e.getStateChange() == ItemEvent.SELECTED) 
```

**下面根据新信息修改答案**

好的，有几个问题：

1.  删除所有与`checkboxgroup`. 您不想使用`ButtonGroup`from 复选框！这是你的主要问题。仅一般`ButtonGroup`用于`JRadioButtons`
2.  只创建一个实例`CheckBoxListener`，即：

```
 // Add action listener to the check boxes
    CheckBoxListener checkBoxListener = new CheckBoxListener();
    vMail.addItemListener(checkBoxListener);
    textMes.addItemListener(checkBoxListener); 
```

# ruby-on-rails - Rails：使用 Yield，调用多个视图页面

> ID：13437762
> 
> 赞同：2
> 
> 时间：2012-11-18T05:30:45.040
> 
> 标签：ruby-on-rails, yield, content-for

**问题：如何从不同的控制器渲染多个视图页面？**

在我的**views/layouts/application.html.erb**中，我使用 yield 方法调用**views/posts/index.html.erb 。**

```
<div class='span10'>
    <%= yield %>
</div> 
```

最重要的是，我想用 yield 调用**views/good_posts/index.html.erb**。所以在那个特定的索引文件中，我用 content_for 方法包​​装了所有代码。

```
<%= content_for :good_post do %> all my content in good_post/index.html.erb <% end %> 
```

我回到application.html.erb，我尝试用yield方法调用good_post的索引文件。

```
<div class='span10'>
    <%= yield :good_post %>
</div>
<div class='span10'>
    <%= yield %>
</div> 
```

我认为这会导致 good_post/index 在 post/index 之上呈现，但它不起作用；只有 post/index 像以前一样正确呈现。有人可以解释为什么会这样，并告诉我解决这个问题的正确方法吗？我感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:52:36.847

正如@cdesrosiers 所说，您应该将`index.html.erb`文件重命名`good_posts`为`_index.html.erb`. 然后你可以像这样在你的应用程序中呈现这个视图：

```
<div class='span10'>
    <%= render 'good_posts/index' %>
    <%= yield :good_post %>
</div>
<div class='span10'>
    <%= yield %>
</div> 
```

就个人而言，我会将文件夹中的文件更改为`index.html.erb`文件`good_posts`夹`_good_posts.html.erb`中的`app/views/posts`文件。您的代码将具有更好的含义，并且您可以知道在哪里找到它，因为它与`posts`. 因此，如果您更改此设置，请使用以下代码：

```
<div class='span10'>
    <%= render 'posts/good_posts' %=
    <%= yield :good_post %>
</div>
<div class='span10'>
    <%= yield %>
</div> 
```

另一个你应该改变的是`content_for :good_post`-> `content_for :good_posts`，因为好的帖子可能有很多帖子，所以你应该使用复数形式的帖子。

# java - 将字符串添加到 ArrayList

> ID：13437768
> 
> 赞同：3
> 
> 时间：2012-11-18T05:32:17.547
> 
> 标签：java, string, arraylist

我需要确保我正在正确地构建这个程序。我必须编写一个使用 ArrayList 容器并在其中放入 5 个字符串的程序，然后从 ArrayList 中打印出 5 个字符串。我是 ArrayList 的新手，所以想确保满足要求。

我的问题是：“这是创建字符串、创建 ArrayList、将字符串添加到列表然后打印列表的正确方法吗？”

```
public static void main(String[] args) 
{

ArrayList<String> names_and_numbers = new ArrayList<>();
String bob = "bob";
String nancy = "nancy";
String jim = "jim";
String claire = "claire";

names_and_numbers.add( bob ); 
names_and_numbers.add( nancy ); 
names_and_numbers.add( jim );
names_and_numbers.add( claire );      

for (String e : names_and_numbers)  
{  
 System.out.println(e);  
} 

int six = 6;
String numbers = "";

ArrayList<Integer> myList = new ArrayList<>();

myList.add( 1 ); 
myList.add( 2 ); 
myList.add( 3 );
myList.add( 4 );
myList.add( 5 );
myList.add(six);        

for (int x : myList)  
{  
 System.out.println(x);  
}     

//System.out.println(myList);   
//System.out.println(names_and_numbers);   
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:38:39.487

你做得很好，我没有看到问题，但我认为 arraylists 存储对象，所以如果你想要一个整数，就构建一个对象。我想如果你可以编译它，这是自动完成的。

```
Integer i = new Integer(1);
myList.add(i); 
```

或在 1 行

```
myList.add(new Integer(1)); 
```

**编辑：**

正如 Paul Bellora 所说，`new Integer(i)`没有必要，您可以将其替换为 just `i`。我只是想指出 ArrayLists*存储对象*（不知何故我忘了提及），而不是原始数据类型`int`，当您尝试这样做时，如果可能（到编译器）将数据转换为`Object`就像`Integer`.

# c# - 使用 EntityTypeConfiguration 时的抽象域模型基类

> ID：13437769
> 
> 赞同：6
> 
> 时间：2012-11-18T05:32:34.693
> 
> 标签：c#, ef-code-first

获取 Base 对象属性的中央映射是否有一些技巧？使用 EntityTypeConfiguration 时是否有一些抽象类的简单模式。
非常感谢任何提示。我无法声明一个类

```
Public class BaseEntityConfig<T> : EntityTypeConfiguration<T> 
```

类似的问题，我无法获得工作的答案 [如何创建和使用通用类 EntityTypeConfiguration<TEntity>](https://stackoverflow.com/questions/12762404/how-to-create-and-use-a-generic-class-entitytypeconfigurationtentity) 和 [生成 EntityTypeConfiguration 的动态方式：类型“TResult”必须是不可为空的值类型](https://stackoverflow.com/questions/13424165/dynamic-way-to-generate-entitytypeconfiguration-the-type-tresult-must-be-a-n)

```
public  abstract class BosBaseObject
{
  public virtual Guid Id { set; get; }
  public virtual string ExternalKey { set; get; }
  public byte[] RowVersion { get; set; }
}
  public class News : BosBaseObject
{
    public String Heading { set; get; }
}

public class NewsMap : EntityTypeConfiguration<News>
{
    public NewsMap()
    {
      //Base Object Common Mappings
      // How can we use a central mapping for all Base Abstract properties  

     }
 }
// Something like this but very open to any suggestion....
public class BosBaseEntityConfig<T> : EntityTypeConfiguration<T>
{
  public void BaseObjectMap( )
    { 
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.Id).HasDatabaseGeneratedOption(databaseGeneratedOption: DatabaseGeneratedOption.None);

        this.Property(t => t.RowVersion)
            .IsRequired()
            .IsFixedLength()
            .HasMaxLength(8)
            .IsRowVersion();

        //Column Mappings
        this.Property(t => t.Id).HasColumnName("Id");
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-16T09:28:01.090

上面的答案肯定有效，尽管这可能稍微干净一些，并且在 DbContext 中注册配置时具有相同的工作优势。

```
public abstract class BaseEntity
{
    public int Id { get; set; }
}

public class Company : BaseEntity
{
    public string Name { get; set; }
}

internal class BaseEntityMap<T> : EntityTypeConfiguration<T> where T : BaseEntity
{
    public BaseEntityMap()
    {
        // Primary Key
        HasKey(t => t.Id);
    }
}

internal class CompanyMap : BaseEntityMap<Company>
{
    public CompanyMap()
    {
        // Properties
        Property(t => t.Name)
            .IsRequired()
            .HasMaxLength(256);
    }
}

public class AcmeContext : DbContext
{
    public DbSet<Company> Companies { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new CompanyMap());
    }
} 
```

一天一大早，克里斯蒂安·威廉姆斯和我自己就提出了上述解决方案……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T12:26:57.767

6小时后，我破解了它。我认为这是一个相当干净的结果。诀窍是忘记在派生自 EntityTypeConfiguration 的类中执行所有操作并构建自定义 BaseConfig，然后获取此实例并添加该类的细节。希望它可以帮助其他人先用摘要做代码......

```
public  abstract class BosBaseObject
{
  public virtual Guid Id { set; get; }
  public virtual string ExternalKey { set; get; }
  public byte[] RowVersion { get; set; }
}
 public abstract class BosObjectDateManaged   :  BosBaseObject
{
    public DateTimeOffset ValidFrom { set; get; }
    public DateTimeOffset ValidTo { set; get; }
}
public class News : BosObjectDateManaged
{
    public String Heading { set; get; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var conf = new BosBaseEntityConfiguration<News>();//Construct config for Type
        modelBuilder.Configurations.Add( conf );  // this has base mapping now
        var newsConf = new NewsConfiguration(conf); // now the Object specific properties stuff

    }

}
public class BosBaseEntityConfiguration<T> : EntityTypeConfiguration<T> where T : BosBaseObject
{
   public BosBaseEntityConfiguration()
   {
       // Primary Key
       this.HasKey(t => t.Id);

       //// Properties
       this.Property(t => t.Id).HasDatabaseGeneratedOption(databaseGeneratedOption: DatabaseGeneratedOption.None);

       this.Property(t => t.RowVersion)
           .IsRequired()
           .IsFixedLength()
           .HasMaxLength(8)
           .IsRowVersion();

       //Column Mappings
       this.Property(t => t.Id).HasColumnName("Id");
   }
}
 public class NewsConfiguration  
{
    public  NewsConfiguration(BosBaseEntityConfiguration<News> entity)
    {
        // Table Specific & Column Mappings
        entity.ToTable("News2");
        entity.Property(t => t.Heading).HasColumnName("Heading2");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T15:00:56.293

抱歉，我无法发表评论，但我会像你一样只交换这两行

```
 modelBuilder.Configurations.Add( conf );  // this has base mapping now
      var newsConf = new NewsConfiguration(conf); // now the Object specific properties stuff
   to
       new NewsConfiguration(conf); // now the Object 
       modelBuilder.Configurations.Add( conf );  // this has base mapping now 
```

这有助于 EF 的专业领域。

# function - 什么是适用于多个参数的函数组合算法，例如 h(x,y) 。f(x) 。g(x) = h(f(x),g(x))？

> ID：13437773
> 
> 赞同：1
> 
> 时间：2012-11-18T05:33:05.677
> 
> 标签：function, functional-programming, composition, currying

例如，假设我们有函数`double(x) = 2 * x`和。什么是函数？请注意，我问的是一个可用于任何数量的函数的函数。例如，您可以用, , into组成。`square(x) = x ^ 2``sum(x,y) = x + y``compose``compose(compose(sum, square), double) = x^2 + 2*x``f(x,y,z)``g(x)``h(x)``i(x)``f(g(x), h(x), i(x))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T17:15:57.383

这是一个常见的 Haskell 习语，[applicative functors](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#t%3aApplicative)：

```
composed = f <$> g1 <*> g2 <*> ... <*> gn 
```

（可以在[这里](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#applicative-functors)找到更好的介绍）。

由于自动部分应用，这看起来非常干净，并且工作方式如下：

```
(<*>) f g x = f x (g x)
(<$>) f g x = f (g x) -- same as (.) 
```

例如，

```
f <$> g <*> h <*> i ==>
(\x -> f (g x)) <*> h <*> i ==>
(\y -> (\x -> f (g x)) y (h y)) <*> i ==>
(\y -> f (g y) (h y)) <*> i ==>
(\z -> (\y -> f (g y) (h y)) z (i z)) ==>
(\z -> f (g z) (h z) (i z)). 
```

不过，应用函子更通用。它们不是“算法”，而是一个*概念*。您也可以在树上执行相同的操作，例如（如果定义正确）：

```
(+) <$> (Node (Leaf 1) (Leaf 2)) <*> (Node (Leaf 3) (Leaf 4)) ==>
Node (Leaf 4) (Leaf 6) 
```

但我怀疑应用程序是否真的可以在大多数其他语言中使用，因为缺乏简单的部分应用程序。

# javascript - Javascript onkeydown 函数运行然后显示消失

> ID：13437777
> 
> 赞同：1
> 
> 时间：2012-11-18T05:33:43.707
> 
> 标签：javascript, forms, function, onkeydown

第一次在网站上，无论如何我的问题是当我使用onkeydown然后使用GetChar检查是否按下了回车键时，当操作运行时，函数的结果只在屏幕上显示大约一秒钟然后消失，如果用户使用onclick（点击回车按钮），则不会出现此问题。使用 onkeydown 时，如何让操作的结果留在屏幕上。如果您想了解我的意思，该网站是 sqrtcalc.comze.com

[sqrtcalc](http://www.sqrtcalc.comze.com)

```
<!DOCTYPE html>

<html>
<head> 
```

```
<title>Square Root Calculator</title>

    <script language="javascript">
        function operAtion (form){
            var x = form.inputbox.value;
                if (isNaN(x)){
                    //document.write("lawl");
                    var y = "Enter a number";
                    document.getElementById("failsafe").innerHTML = y;
                    document.getElementById("demo").innerHTML = "";
                } else if (x < 0){
                    var y = "Number must be positive";
                    document.getElementById("failsafe").innerHTML = y;
                    document.getElementById("demo").innerHTML = "";
                } else if (x == ""){
                    var y = "uhm, you didnt enter anything";
                    document.getElementById("failsafe").innerHTML = y;
                    document.getElementById("demo").innerHTML = "";
                } else {
                    var y = Math.pow(x, 1/2)
                    document.getElementById("demo").innerHTML = "The square root of " + x + " is " + y;
                    document.getElementById("failsafe").innerHTML = "";
                }
        }
        function GetChar (event,form){
            var keyCode = event.keyCode;
                if (keyCode == 13){
                operAtion(form);
                }
        }
    </script>

<p></p>
</head>
<body>

<form name="myform" action="" method="get" style = "font-size:50px"><strong>Square Root Calculator</strong></br>
    </br>
<input type="text" name="inputbox" value = "" onkeydown = "GetChar(event,this.form);"> </br>
    </br>
<input id="button" type="button" name="button" value="     Enter      " onclick="operAtion(this.form)" >
</form>

<h1 id = "failsafe"></h1>
</br>
</br>
</br>
<h1 id = "demo"></h1>
</br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br></br>
<img border="0"  src="http://counter.rapidcounter.com/counter/1353157574/a"; ALIGN="middle" HSPACE="4" VSPACE="2" style = "padding-left:1400px;">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:44:10.630

添加此代码：

```
 window.onload = function(){
            document.getElementById("myform").onsubmit = function(){
                return false;
            }
        } 
```

并将 id 属性添加`id="myform"`到`<form>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:12:12.910

我稍微重构了你的代码：

*   我删除了你的内联函数（内联 JS 并不是最佳实践）
*   我在您的表单中添加了一个 ID，以便可以引用它
*   我添加`return false;`以防止表单提交
*   onsubmit 处理单击和输入

**Javascript**

```
document.getElementById('myform').onsubmit = function() {
    var x = this.inputbox.value;

    if (isNaN(x)) {
        //document.write("lawl");
        var y = "Enter a number";
        document.getElementById("failsafe").innerHTML = y;
        document.getElementById("demo").innerHTML = "";
    } else if (x < 0) {
        var y = "Number must be positive";
        document.getElementById("failsafe").innerHTML = y;
        document.getElementById("demo").innerHTML = "";
    } else if (x == "") {
        var y = "uhm, you didnt enter anything";
        document.getElementById("failsafe").innerHTML = y;
        document.getElementById("demo").innerHTML = "";
    } else {
        var y = Math.pow(x, 1 / 2)
        document.getElementById("demo").innerHTML = "The square root of " + x + " is " + y;
        document.getElementById("failsafe").innerHTML = "";
    }

    return false;
}​ 
```

**HTML**

```
<form name="myform" action="" method="get" style="font-size:50px" id="myform"><strong>Square Root Calculator</strong><br>
    <br>
<input type="text" name="inputbox"> <br>
    <br>
<input id="button" type="submit" name="button" value="     Enter      ">
</form>

<h1 id="failsafe"></h1>

<h1 id="demo"></h1> 
```

[工作演示](http://jsfiddle.net/EasyCo/hvJbk/)​</p>

# ruby-on-rails - 在不更新密码的情况下更新个人资料

> ID：13437778
> 
> 赞同：0
> 
> 时间：2012-11-18T05:33:47.143
> 
> 标签：ruby-on-rails, validation, params

我希望能够更新我的用户信息，而不必让用户在每次编辑任何其他属性时都设置密码。

我目前的验证是：

```
 validates :password, presence: true, length: { minimum: 8 }
  validates :password_confirm, presence: true 
```

我怎样才能使这个有条件？如果密码和密码确认属性在参数中，那么只需要这些验证是很聪明的。我可以使用一些关于如何实现这一点的想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:57:21.453

我认为应该这样做：

```
validates :password, presence: true, length: { minimum: 8 }
validates :password_confirm, presence: true, :if => Proc.new { |a| a.password_changed? || a.new_record? } 
```

有关方法的更多信息，请参阅[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)`_changed?`上的文档。`password`每次更改属性时运行存在验证应该没有问题，因为这将持续存在于数据库中，因此它将始终通过（而`password_confirm`不会持续存在，因此需要条件）。

# c++ - OpenMP 和部分

> ID：13437782
> 
> 赞同：2
> 
> 时间：2012-11-18T05:34:07.433
> 
> 标签：c++, multithreading, parallel-processing, openmp

我有以下代码：

```
#pragma omp parallel sections num_threads(2) {
  #pragma omp section
   Function_1;
   #pragma omp section
   Function_2;
} 
```

但在 Function_1 和 Function_2 中，我有一个并行但只有一个线程运行它。那么，如何并行运行 Function_1 和 Function_2 并在这些函数中运行多个线程呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:38:09.840

将一个`parallel`区域包含在另一个区域中称为嵌套。默认情况下，嵌套区域是非活动的，这意味着它们是串行执行的。为了使它们处于活动状态，您可以：

*   将环境变量设置`OMP_NESTED`为`true`
*   `parallel`在封闭区域之前插入以下调用：`omp_set_nested(1);`

还可以通过以下方式限制嵌套并行性起作用的级别数：

*   将环境变量设置`OMP_MAX_ACTIVE_LEVELS`为`num`, 或
*   打电话`omp_set_max_active_levels(num);`

其中`num`是所需的最大活动级别，例如 的值`3`将呈现所有`parallel`区域，嵌套超过`3`级别深度，处于非活动状态。

# javascript - 此对象中的数字是否与 UTF-8 兼容？

> ID：13437783
> 
> 赞同：1
> 
> 时间：2012-11-18T05:34:14.693
> 
> 标签：javascript, utf-8

此对象中的数字是 UTF-8 兼容/允许的吗？我不太确定，但我听说 UTF-8 是一个标准，我想确定如果我在整个 Javascript 中使用这个对象，它将在 UTF-8 兼容的上下文中工作。

```
var specialOnes = {
        0 : "cero",
        1 : "uno",
        2 : "d\xF3s", // "dos" with accent
        3 : "tr\xE9s", // "tres" with accent
        4 : "cuatro",
        5 : "cinco",
        6 : "s\xE9is", // "seis" with accent
        7 : "siete",
        8 : "ocho",
        9 : "nueve",
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:46:53.097

通过兼容，您会问字符串是否在所有环境中都被解释为相同？

如果是这样，那么**是**的，它们被正确编码，现代浏览器、javascript 中断器等的所有实现都能够读取各种 utf 编码。

唯一可能出现的错误是您错误地输入了所述字符串，或者您没有指定字符集为 utf-8。

# java - Java 输入检测文件类型

> ID：13437784
> 
> 赞同：0
> 
> 时间：2012-11-18T05:35:14.847
> 
> 标签：java, file, input

我正在编写一个程序，给定一个由单词和相关对象组成的文件，创建一个字典。例如，我可能将单词“Apple”与字符串对象“A red fruit”相关联

现在，有些对象是图像文件，有些是音频文件。在图像文件中，仅会考虑扩展名“.jpg”和“.gif”（即包含在文件中）。同样，对于音频文件，只会考虑“.wav”和“.mid”。

我已经有类来处理显示图像文件和播放音频文件，但我现在正试图弄清楚（在输入信息时）如何检测对象是图像文件还是音频文件，或者两者都不是。我正在考虑以某种方式检查对象的最后三个字符，例如，如果它是“jpg”，那么我会将其标记为图像类型对象。或者，如果它是上面“Apple”示例中的“uit”，那么它将被标记为两者都不是。但是，我不知道如何只检查字符串的最后三个字符。是否有一些内置方法可以自动执行此字符串检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T05:39:11.140

我认为检查文件名的最后 3 个字符不是一个好方法。**您可以检查从'.'**的最后一个索引开始的字符。**（点）**就像在这个实用方法中一样：

```
public static String getFileExtension(String fileName) 
{
    if (fileName == null || fileName.equals("") || !fileName.contains("."))
        return "";

    return fileName.substring(fileName.lastIndexOf('.'), fileName.length());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:08:48.990

检查文件的扩展名并不是查找文件类型的好方法。

我有一个非常相似的情况，过了一段时间我发现最好的方法是检查`mimeType`. 我自己用`mimemagic`. [在这里](http://sourceforge.net/projects/jmimemagic)你可以找到更多关于它的信息。

# html - div 链接内的链接

> ID：13437785
> 
> 赞同：22
> 
> 时间：2012-11-18T05:35:28.647
> 
> 标签：html, hyperlink

我想要一个包含图像的 div 和一些文本作为链接。这样人们就可以单击 div 中的任何位置（不一定是图像或文本）并被带到一个位置。但是，我还希望在文本末尾有另一个链接，将用户带到另一个位置。但是，一旦我添加了第二个链接，整个 div 就不再是链接，而只是图像和文本是链接。我想做的事可能吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-18T06:59:26.267

这在 HTML 中是不可能的，因为`a`元素内的`a`元素是不允许的。根据现有的 HTML 规范，您不能`div`在`a`其中包含例如，但浏览器从未真正强制执行此限制，并且已在 HTML5 草案中取消。嵌套`a`元素是一个不同的问题，因为它会在活动中创建活动区域，并且需要定义其含义并且会令人困惑。

实际使用时会发生什么

```
<a href=foo>bla bla <a href=bar>inner link</a> stuff</a> 
```

是它以您想要的方式工作，只是`a`内部元素之后的外部元素的`a`内容根本不是链接。显然浏览器还没有准备好处理这样的结构。实际上，当元素打开`</a>`时遇到标签时，它们意味着结束标签。就像他们为元素做的一样。`<a>``a``p`

因此，链接末尾的内部链接会起作用。当然，不能保证它会在未来版本的浏览器中继续工作，或者它可以在所有浏览器上工作。

您可以连续使用两个单独的非嵌套`a`元素，并使用 CSS 定位将第二个元素可视地放置在第一个元素内。但这会变得有些复杂。一个更简单的方法是设置一个 JavaScript 伪链接：

```
<span onclick="document.location.href = 'foo'; return false">inner link</span> 
```

缺点是当 JavaScript 被禁用时，它不会以类似链接的方式运行，搜索引擎也不会将其视为链接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-03T06:27:33.393

有一种方法可以在没有任何 javascript 的情况下使用绝对和相对定位来做到这一点。这也保持了 SEO 的代码语义，这是 javascript 难以做到的。

```
 .outside-container {
      width: 900px;
      margin: 0 auto;
      position: relative;
      background: #888;
      padding: 5px;
    }

    .overlay {
      position: absolute;
      height: 100%;
      width: 100%;
      top: 0; bottom: 0; right: 0; left: 0;
      background: white;
      opacity: 0;
    }

    .overlay:hover {
      opacity: .2;
    }

    .text-box {
      position: absolute;
      top: 5px; right: 5px;
      width: 30%;
      color: white;
      font: georgia, serif 700 14px;
    }

    .image-box {
      width: 68%;
    }
```

```
<div class = "outside-container">
<img src="https://upload.wikimedia.org/wikipedia/commons/b/bc/George_Berkeley_by_Jonh_Smibert.jpg" alt="george_wiki" class = "image-box">
         <a class = "overlay" href = "#div"></a>
         <div class = "text-box">
           I was considering the odd fate of those men who have in all ages, through an affectation of being distinguished from the vulgar, or some unaccountable turn of thought, pretended either to believe nothing at all, or to believe the most extravagant things in the world. This however might be borne, if their paradoxes and scepticism did not draw after them some consequences of general disadvantage to mankind. But the mischief lieth here; that when men of less leisure see them who are supposed to have spent their whole time in the pursuits of knowledge professing an entire ignorance of all things, or advancing such notions as are repugnant to plain and commonly received principles, they will be tempted to entertain suspicions concerning the most important truths, which they had hitherto held sacred and <a href = "#text">unquestionable.</a>
         </div>
       </div>
```

我自然以为我是唯一一个想到这个的人，但这个问题之前已经回答[过](https://stackoverflow.com/questions/15070722/link-within-a-link)了。我添加了这个，因为所有其他答案都是 javascript 或 jQuery，并且觉得纯 HTML/CSS 可能有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-21T00:08:35.553

小菜一碟，如果你不介意使用一点 jQuery。您可以使用容器 div 上的 'click' 事件将您带到一个位置，然后使用内部锚链接上的 'event.stopPropagation' 方法来阻止外部点击事件触发。

[http://jsfiddle.net/timcuculic/a7p13rdy/2/](http://jsfiddle.net/timcuculic/a7p13rdy/2/)

```
 <script>
    $(".containerdiv").click(function () {
        window.open(
          'https://www.google.com/',
          '_blank'
        );
    });

    $("a").click(function (event) {
        event.stopPropagation();
    });
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-18T05:39:16.780

尝试

```
 <a href="your link"><div></div></a> 
```

或者用很少的 javascript

```
<a href="link1">
    <div>outer  link
        <img  src="image" />
        <p onclick="window.location.href='otherlink'"> inner link</p>
    </div>another
</a> 
```

[**jsfiddle**](http://jsfiddle.net/m3wfF/)

# search - 基于内容的搜索的数据结构

> ID：13437787
> 
> 赞同：0
> 
> 时间：2012-11-18T05:35:44.730
> 
> 标签：search, data-structures, trie, virtualfilesystem

我正在实现一个虚拟文件系统。作为其中的一部分，我正在尝试向其中添加基于内容的搜索功能。基本上基于内容的搜索功能允许用户搜索“单词”，系统返回所有在其内容中包含“单词”的文件名。在我看来，特里将达到我的目的。但它的空间效率不高，在构建它时，似乎我需要用整个内容中的所有单词填充机智。请建议我提供更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:06:06.940

帕特里夏尝试可能比普通尝试更节省空间。检查它们是否可以达到您的目的，尽管我不太确定。

# javascript - 将任何字符串时间转换为秒

> ID：13437796
> 
> 赞同：0
> 
> 时间：2012-11-18T05:38:17.383
> 
> 标签：javascript

我正在尝试将 15:00（15 分钟）转换为秒，尽管当我在下面使用它时得到 54,000。

我正在尝试将 15 分钟转换为秒。

```
S = '15:00';
D = "1/1/1 "
s = ( new Date(D+S) - new Date(D) )/1000
alert(s); 
```

虽然当我做数学时，它是 60 x 15 = 900。我如何得到 900，因为时间是一个随机字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:49:23.387

JavaScript 中的时间字符串 '15:00' 指的是一天中的时间 1500 小时，或美式风格的下午 3:00。那是午夜后的 15 小时。这就解释了为什么你有 54,000 秒。

如果您想使用处理日期字符串的方法来表示 15 分钟，请尝试“00:15:00”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T05:51:22.720

好吧，如果您的格式始终为“mm：ss”，您可以进行圆顶字符串解析并手动进行数学运算，当然这需要根据输入格式进行调整。

```
S = '15:25';
var times = S.split(":");
var minutes = times[0];
var seconds = times[1];
seconds = parseInt(seconds, 10) + (parseInt(minutes, 10) * 60);
alert(seconds);​ 
```

请注意，在示例中，我明确添加了 25 秒作为演示。

[http://jsfiddle.net/Jg4gB/](http://jsfiddle.net/Jg4gB/)

# .net - ASP + 限制子页面使用 css 文件

> ID：13437800
> 
> 赞同：0
> 
> 时间：2012-11-18T05:39:17.067
> 
> 标签：.net, css

我有一个母版页和一些子页。

我已经为 css 定义了几个类。现在我希望某些子页面可以使用该 css 但不是每个子页面。母版页应使用该 css 文件。如何限制css文件的使用？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:02:33.213

**详细信息：**这取决于您的意思....您说您制作了课程，因此您不需要将它们包含在子页面中。

**CSS**

```
.Main{ background-color:blue; } 
```

**普通页面**

```
<body class="Main">
      ....
</body> 
```

**您不想要 CSS 类的其他页面**

```
<body>
    .....
</body> 
```

或者，如果您将 CSS 添加到其中一个选择器，那么您将需要在子页面中覆盖它们，例如

**CSS**

```
body{ background-color:blue; } 
```

**您不想要样式的子页面**

```
 <style type="text/css">
      body {background-color:green;}
 </style>
 </head>
 <body>
    ...... 
 </body> 
```

# image - Silverlight：ImageTools.ExtendedImage 加载外部 URL 图像根本不工作

> ID：13437801
> 
> 赞同：0
> 
> 时间：2012-11-18T05:39:27.380
> 
> 标签：image, silverlight, url

我正在使用 ImageTools 库 (imagetools.codeplex.com) 从外部 URL 加载图像。

```
<Canvas x:Name="LayoutRoot" Background="Blue"
        Width="466" Height="204" >

    <Image Name="theImage" />

    <Button x:Name="btnTest" Canvas.Top="0" Canvas.Left="-200" Click="btnTest_Click"
                Width="100" Height="23"
                Content="Test Button">
    </Button>

</Canvas> 
```

在里面：

```
 public MainPage()
    {
        InitializeComponent();

        Encoders.AddEncoder<PngEncoder>();
        Decoders.AddDecoder<PngDecoder>();
        Encoders.AddEncoder<JpegEncoder>();
        Decoders.AddDecoder<JpegDecoder>();
    } 
```

然后：

```
 private void btnTest_Click(object sender, RoutedEventArgs e)
    {
        ExtendedImage ei = new ExtendedImage();
        // ei.UriSource = new Uri(@"https://www.google.com/images/srpr/logo3w.png"); // NOT working
        ei.UriSource = new Uri(@"/Images/header.png", UriKind.Relative); // Working

        ei.LoadingCompleted += new EventHandler((ss, ee) =>
        {
            Dispatcher.BeginInvoke(() =>
            {
                theImage.Source = ei.ToBitmap();
            });
        });
    } 
```

我发现加载本地文件`/Image/header.png`可以正常工作，但加载外部 URL 图像 ( `https://www.google.com/images/srpr/logo3w.png`) 根本不工作。

它表现得很疯狂：一旦我单击测试按钮，LayoutRoot 画布就会消失。

但是，根据此讨论： http: [//imagetools.codeplex.com/discussions/250624](http://imagetools.codeplex.com/discussions/250624) 加载外部 URL 图像应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:54:58.100

它可以与 UriType 相关吗？

相对、绝对、相对或绝对

```
ei.UriSource =
new Uri(@"https://www.google.com/images/srpr/logo3w.png"
,UriKind.RelativeOrAbsolute); // works ? 
```

[http://msdn.microsoft.com/en-us/library/system.urikind(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.urikind(v=vs.95).aspx)

希望有所帮助！

**编辑：**您需要一个类似[http://twitter.com/crossdomain.xml](http://twitter.com/crossdomain.xml)的文件，否则 SL 会正常抛出 SecurityException。

对于跨域实现，请参见

[https://stackoverflow.com/a/1325011/413032](https://stackoverflow.com/a/1325011/413032)

[http://www.silverlighthack.com/post/2008/11/08/Silverlight-clientaccesspolicyxml-files-for-the-Enterprise-(Part-1-of-2).aspx](http://www.silverlighthack.com/post/2008/11/08/Silverlight-clientaccesspolicyxml-files-for-the-Enterprise-(Part-1-of-2).aspx)

# spring - Spring 框架 javadoc 错误

> ID：13437806
> 
> 赞同：0
> 
> 时间：2012-11-18T05:40:27.277
> 
> 标签：spring, spring-data, spring-data-mongodb

我是 Spring 框架的新手。我在以下链接：

[http://www.springsource.org/spring-data/mongodb](http://www.springsource.org/spring-data/mongodb)

当我单击“API JAVADOC”时，在以下链接上出现 404 错误。

[http://static.springsource.org/spring-data/data-mongodb/docs/current/apidocs/](http://static.springsource.org/spring-data/data-mongodb/docs/current/apidocs/)

有人可以指导我 url 有什么问题以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:23:50.947

包含所有文档的主目录[在这里](http://static.springsource.org/spring-data/data-mongo/docs/)

所以你可以去任何版本的文档。例如对于[1.1.0.GA](http://static.springsource.org/spring-data/data-mongo/docs/1.1.0.RELEASE/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:45:41.183

最新的 javadoc 总是可以在[http://static.springsource.org/spring-data/data-mongodb/docs/current/api/](http://static.springsource.org/spring-data/data-mongodb/docs/current/api/)下找到。我已经修复了 Spring Data MongoDB 项目主页上的断开链接。

# node.js - 使用客户端和服务器模仿 node-webkit 的功能

> ID：13437809
> 
> 赞同：1
> 
> 时间：2012-11-18T05:41:23.207
> 
> 标签：node.js, chromium

我试图找出是否可以从网页调用 node.js 函数。有什么方法可以让 Google Chrome 访问 node.js 函数（以便它们在 node.js 服务器上运行），如此处所示？

（我知道可以在不修改代码的情况下使用[node-webkit](https://github.com/rogerwang/node-webkit)（一种非标准 Chromium 实现）来执行此操作，但我更喜欢使用未修改的浏览器来执行此操作，这将需要下面显示的代码以某种方式修改。）

```
<html>
    <body>
        <script type = "text/javascript">
            var exec = require('child_process').exec; //node.js function
        </script>
        <p onclick = "exec('firefox')">
            Click here to launch the Firefox web browser.
        </p>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:42:03.757

NW 有自己的方法，例如 node exec ：

```
var gui = require('nw.gui');
gui.Shell.openItem('firefox', ,function(error, stdout, stderr) { }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T05:43:39.907

不，这是不可能的，出于明显的安全原因。

您只能使用浏览器为您提供的内容。 `node-webkit`是最接近可用的东西，并且不符合您的要求。

# sencha-architect - 如何使用适用于 iOS 和 Android 的 Sencha 框架单独设置 HTML5 应用程序的样式？

> ID：13437812
> 
> 赞同：0
> 
> 时间：2012-11-18T05:42:17.383
> 
> 标签：sencha-architect

原生应用程序中的应用程序开发分别针对 iPhone 和 Android 进行。但在 HTML5 Sencha 框架应用程序中，使用相同的 HTML5 代码。我们应该为两个平台的警报框或按钮使用相同的视觉样式，还是应该根据平台看起来不同？

由于使用相同的 HTML5 代码，您如何处理两个平台的不同外观？例如，iPhone 的菜单栏位于底部，而 android 的菜单栏位于顶部。或者对于Android，我们需要隐藏顶部的后退按钮或者如何为两个平台设置不同的警报框或按钮？

我们是否需要为 iOS 和 An 使用不同的 CSS 文件集？

我正在通过厨房同步 Sencha 应用程序，它显示了警报框的非常基本的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:36:04.160

您可以使用 Sencha Touch 在检测用户代理时添加的 iOS/Android 类。例如，如果设备运行 iOS，则 body 元素具有类“x-ios”。对于 android，它将是“x-android”。这也适用于特定的操作系统版本（例如：“x-ios-4”）。尝试在 Chrome 中覆盖您的用户代理并检查不同代理下的元素以了解类。使用这些类，您可以避免使用多个样式表，只需根据类相应地设置 CSS。

至于无法用简单的 CSS 执行的特定布局调整 - 这是配置文件发挥作用的地方 (http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Profile)。为 Android 和 iOS 设置配置文件，并根据需要使用启动功能来操作特定组件。

使用这些方法，您应该能够使事情井井有条，并最大限度地减少所需的单独文件的数量。

# php - php undefined index..using isset() with is_array()

> ID：13437814
> 
> 赞同：1
> 
> 时间：2012-11-18T05:43:01.333
> 
> 标签：php

这是我的代码：

```
if(is_array($ItemAttr["Actor"])){
  $Actors = implode(", ", $ItemAttr["Actor"]);
} else {
  $Actors = $ItemAttr["Actor"];
} 
```

我越来越`undefined index: Actor in **line 1** and **line 3**`

我想我应该使用 isset() 函数。谁能告诉我如何将该函数与 is_array() 函数结合使用..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T05:46:05.503

不确定这是否是您的意思，但是：

```
if( isset($ItemAttr["Actor"]) && is_array($ItemAttr["Actor"])){
    ....
} 
```

在这种情况下，您在访问索引值之前检查索引是否存在。

# button - 我怎样才能让我的按钮位于其单元格的中心？

> ID：13437819
> 
> 赞同：0
> 
> 时间：2012-11-18T05:44:01.753
> 
> 标签：button, windows-8, winrt-xaml, windows-store-apps, grid-layout

我在网格的第 0 行第 0 列有一个后退按钮。

它把自己放在单元格的顶部；我想要它在中心。我尝试设置 VerticalAlignment="Center" 并没有奏效。也没有将其设置为“底部”：

```
<Button x:Name="buttonBack" VerticalAlignment="Bottom" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"></Button> 
```

……一点也不让步。我怎样才能把它拉下来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:39:21.660

确保您没有将行高设置为自动调整大小。如果使用 Auto，BackButtonStyle 将下边距设置为 36，这使您的按钮看起来“固定”在行的顶部。看起来你应该能够“移动”它，因为底部边距空间，但你不能因为行是自动调整大小的。

我将带有 BackButtonStyle 的精确标记放入网格中，只要我在行上使用像素或星号大小，我就可以随意定位它。

# c# - 如何将对象列表存储到 ViewState 中

> ID：13437820
> 
> 赞同：13
> 
> 时间：2012-11-18T05:44:05.263
> 
> 标签：c#, asp.net, .net, list, viewstate

我有一个 type 列表`List<JobSeeker>`。我想将它存储在 ViewState 中。如何做到这一点？

```
private List<JobSeeker> JobSeekersList { get; set; } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-18T05:56:43.783

基本上你只需要使用`get`, 然后让你从视图状态中获取发布的数据，或者第一次在视图状态下设置它。这是更健壮的代码，可以避免每次调用的所有检查（视图状态集、存在等），并直接保存和使用视图状态对象。

```
// using this const you avoid bugs in mispelling the correct key.
const string cJobSeekerNameConst = "JobSeeker_cnst";

public List<JobSeeker> JobSeekersList
{
    get
    {
        // check if not exist to make new (normally before the post back)
        // and at the same time check that you did not use the same viewstate for other object
        if (!(ViewState[cJobSeekerNameConst] is List<JobSeeker>))
        {
            // need to fix the memory and added to viewstate
            ViewState[cJobSeekerNameConst] = new List<JobSeeker>();
        }

        return (List<JobSeeker>)ViewState[cJobSeekerNameConst];
    }
} 
```

避免的替代方案`is`

```
// using this const you avoid bugs in mispelling the correct key.
const string cJobSeekerNameConst = "JobSeeker_cnst";

public List<JobSeeker> JobSeekersList
{
    get
    {
        // If not on the viewstate then add it
        if (ViewState[cJobSeekerNameConst] == null)                
            ViewState[cJobSeekerNameConst] = new List<JobSeeker>();

        // this code is not exist on release, but I check to be sure that I did not 
        //  overwrite this viewstate with a different object.
        Debug.Assert(ViewState[cJobSeekerNameConst] is List<JobSeeker>);

        return (List<JobSeeker>)ViewState[cJobSeekerNameConst];
    }
} 
```

并且`JobSeeker`课程必须`[Serializable]`是

```
[Serializable]
public class JobSeeker
{
    public int ID;
    ...
} 
```

并且您通常将其简单地称为对象，并且永远不会为空。回发后也将返回保存的视图状态值

```
JobSeekersList.add(new JobSeeker(){ID=1});
var myID = JobSeekersList[0].ID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T06:27:48.383

```
private IList<JobSeeker> JobSeekersList
{
    get
    {
        // to do not break SRP it's better to move check logic out of the getter
        return ViewState["key"] as List<JobSeeker>;
    }
    set
    {
        ViewState["key"] = value;
    }
} 
```

# backbone.js - 如何验证 Backbone.Form 字段中的错误：模糊事件？

> ID：13437822
> 
> 赞同：0
> 
> 时间：2012-11-18T05:44:29.767
> 
> 标签：backbone.js

我想在模糊事件中验证一些表单字段。我怎么能用[Backbone.Form](https://github.com/powmedia/backbone-forms.git)做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:37:45.793

我找到了。可能对其他人有用。

```
var oldText= Backbone.Form.editors.Text;
var newText= oldText.extend({
    initialize: function(options) {
        oldText.prototype.initialize.call(this,options);
        this.on("blur",function(){
            this.form.fields[this.options.key].validate();
        });
    }         
});
Backbone.Form.editors.Text=newText; 
```

此代码更改基本文本编辑器，所有 input[type="text"] 和其他扩展字段将在 blur 事件上验证。

如果您想创建一个“模糊验证字段”。您可以创建新的编辑器。

```
Backbone.Form.editors.BlurText=  Backbone.Form.editors.Text.extend({
    initialize: function(options) {
        Backbone.Form.editors.Text.prototype.initialize.call(this,options);
        this.on("blur",function(){
            this.form.fields[this.options.key].validate();
        });
    }         
}); 
```

现在您可以在架构中使用它：

```
var User = Backbone.Model.extend({
    schema: { 
        username: {
            type:'BlurText',
            validators: ['required']
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:00:24.680

你应该能够做到这一点：

```
form.on('password:blur', function() { 
    form.fields.password.validate();
}); 
```

# java - 使用 JNI 从 Java 调用本机 (C++) 函数的访问冲突：这是我的代码的问题，还是已知问题？

> ID：13437824
> 
> 赞同：2
> 
> 时间：2012-11-18T05:44:32.433
> 
> 标签：java, c++, java-native-interface

我有一个在我的 C++ 代码中定义的本机函数，它在 Java 中调用（在 C++ 调用 Java 代码之后）。

(1) C++中native函数的声明/定义：

```
// C++ declaration/definition of the native function:

JNIEXPORT void JNICALL setEncoderProgressStatus (JNIEnv * env, jobject theClass, jlong jEncoderDecoderDlg, jstring status)
{
    // Do nothing.  Obviously, the real function does something.
    // But an access violation is reported even in the do-nothing case.
} 
```

(2) C++中native函数的注册

```
// Registration of this function with JNI in the C++ code

JNINativeMethod commandLineEncoderMethods[] =
{
    {"setEncoderProgressStatus","(JLjava/lang/String;)V", (void*)setEncoderProgressStatus}
};

// pEnv is a valid JNIEnv *
// jCommandLineEncoderClass has already been initialized
pEnv->RegisterNatives(jCommandLineEncoderClass, commandLineEncoderMethods, sizeof(commandLineEncoderMethods)/sizeof(JNINativeMethod)) 
```

（3）Java中native函数的声明：

```
// The Java code, in turn, declares the native function as follows:

public static native void setEncoderProgressStatus(long EncoderDecoderDlg, String status); 
```

(4)在Java代码中调用native函数：

```
// Finally, the Java code calls the native function as follows:

// The real code passes different args,
// but an access violation is reported even in the do-nothing case.
// Commenting out the following line of code makes the access violation disappear.

setEncoderProgressStatus(0, ""); 
```

请注意，此代码 100% 成功运行，并且已经运行了很长时间。我刚刚注意到，在 Visual Studio 2010 的调试器中运行时，会报告访问冲突。简单地注释掉对 Java 中本机函数的调用，就会导致访问冲突消失。

如果我在 VS 2010 中以调试模式运行应用程序时知道这是 JNI 的一个已知“侥幸”，并且它并不代表我的代码有问题，那么我会很满意。

但是，我想确认我的代码没有问题。

...

*** 附录 ***

访问冲突不会导致程序执行停止。相反，访问冲突的唯一指示是“输出”窗口中的一行。我不确定这是否意味着访问冲突已得到处理；但是，我猜这意味着它已被处理。但是，即使已处理，我也想知道它是否一定表明我的代码存在问题。

这是“输出”窗口中的消息：

> EncoderDecoder.exe 中 0x03fbb256 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x003d0100

...

*** 第二个附录 ***

我发现当 C++ 应用程序保持连接到 JVM 时，我再次从 C++ 应用程序执行相同的代码（导致调用相同的 Java 代码，进而导致 Java 代码调用相同的 JNI 函数），即访问冲突*不会*出现。

（在我的实际程序中，在许多不同的类中调用了许多不同的本机函数，因此要准确隔离何时报告访问冲突以及何时停止报告并不简单 - 但到第三次运行没有退出 C++ 应用程序的相同功能，使用相同的加载 JVM，**没有**第一次机会访问冲突错误（也没有普通访问冲突错误））。

这让我相信，结合下面 Ben Voigt 的回答（和相关评论），JVM 代码*确实*会导致 a`first-chance exception (access violation)`作为其正常处理的一部分发生，并且这不是我的代码的问题。

...

*** 附录 3 ***

来自[http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)：

> 首次机会异常消息通常并不意味着代码中存在问题。

仍然有可能碰巧是*访问冲突*的第一次机会异常更有可能代表一个真正的问题，在这种情况下，我的问题仍然悬而未决；但是 - 我认为证据表明这可能就是 JVM 的工作方式，并不代表我的代码有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:54:26.233

它是未处理的访问冲突，还是如果您继续（让异常处理程序运行）调用是否继续？

JIT 编译器有一大堆技巧可以为函数生成本机代码，而无需每次调用​​都承受条件成本以查看函数是否已被 JIT 化。一种这样的技术是拦截第一个调用，因为它会生成访问冲突以触发 JIT 编译器。代码生成一次后，以后的调用将毫无例外地进行。

我不熟悉任何 Java JIT 编译器是否真的这样做，但是如果不提供有关您正在运行的 JIT 的具体信息，您将无法获得明确的答案。是 Sun/Oracle HotSpot 编译器吗？x86 或 x86_64 或其他平台？您深入了解因实施而异的实施细节。

# facebook-graph-api - 如何使用 facebook api 从我的 ios5 应用程序中的 fb 个人资料页面获取“突出显示的帖子”信息？

> ID：13437829
> 
> 赞同：3
> 
> 时间：2012-11-18T05:45:42.067
> 
> 标签：facebook-graph-api, ios5

我正在为 iPhone（ios5）开发一个应用程序，我需要我在我的 facebook 个人资料中突出显示的帖子的信息。使用 facebook-graph api 可以获取用户个人资料的所有数据，但是有什么方法可以获得突出显示的帖子数据？例如，我想计算并跟踪我在 fb 时间线中突出显示的帖子数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:14:29.920

您可以使用`[pageid]?fields=posts.fields(timeline_visibility)`

每个突出显示的帖子都将timeline_visibility 设置为“已加星标”

# asp.net - 如何将一个下拉列表依赖于第一个下拉列表的项目？

> ID：13437832
> 
> 赞同：2
> 
> 时间：2012-11-18T05:46:19.350
> 
> 标签：asp.net, c#-4.0

我有两个名为 SportsName 和 Category 的下拉列表。我希望类别列表依赖于 SportsName 列表中的选定项目。这是我用来执行此操作的代码，但它不起作用

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            SportsName.Items.Insert(0,new ListItem("Select", string.Empty));
            SportsName.Items.Insert(1,new ListItem("Badminton", "Badminton"));
            SportsName.Items.Insert(2,new ListItem("Tennis", string.Empty));
            SportsName.Items.Insert(3,new ListItem("Table Tennis", string.Empty));
            SportsName.Items.Insert(4,new ListItem("Swimming", string.Empty));
            SportsName.Items.Insert(5,new ListItem("Sports Ball", string.Empty));
            SportsName.Items.Insert(6,new ListItem("Bats", string.Empty));
            SportsName.Items.Insert(7,new ListItem("Sports Cap", string.Empty));
            SportsName.Items.Insert(8,new ListItem("Gym Equipments", string.Empty));
            SportsName.Items.Insert(9,new ListItem("Darts", string.Empty));
            SportsName.Items.Insert(10,new ListItem("Billards", string.Empty));
            SportsName.Items.Insert(11,new ListItem("Fitness", string.Empty));
            SportsName.Items.Insert(12,new ListItem("Sports Medicine", string.Empty));
            SportsName.Items.Insert(13,new ListItem("Contact Sports", string.Empty));
            SportsName.Items.Insert(14,new ListItem("Outdoor", string.Empty));
            SportsName.Items.Insert(15,new ListItem("LifeSyle", string.Empty));
            SportsName.Items.Insert(16,new ListItem("Shoes and Apprel ", string.Empty));
            SportsName.Items.Insert(17,new ListItem("Hockey", string.Empty));
            SportsName.Items.Insert(18,new ListItem("Golf", string.Empty));
            SportsName.SelectedIndex=0;
        }
    }
    protected void Category_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (SportsName.SelectedIndex == 1)
        {
            Category.Items.Clear();
            Category.Items.Add(new ListItem("Rackets", string.Empty));
            Category.Items.Add(new ListItem("Sets", string.Empty));
            Category.Items.Add(new ListItem("Shuffle", string.Empty));
        }

        if (SportsName.SelectedIndex == 2)
        {

            Category.Items.Clear();
            Category.Items.Add(new ListItem("Golf", string.Empty));

        }

        if (SportsName.SelectedIndex == 3)
        {
            Category.Items.Clear();
            Category.Items.Add(new ListItem("Ball", string.Empty));
        }

        } 
```

请告诉我正确的方法来做到这一点。因此，如果我选择 Badminton，那么它的所有设备都会显示在第二个下拉列表中，就像在国家和城市的情况下一样。

html代码

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <style type="text/css">
        .style8
        {
            width: 100%;
        }
        .style9
        {
            width: 215px;
        }
    </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <table class="style8">
        <tr>
            <td class="style9">
                Sports Name</td>
            <td>
                <asp:DropDownList ID="SportsName" runat="server" AutoPostBack="True" 
                    Height="26px" Width="126px">
                </asp:DropDownList>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Category</td>
            <td>
                <asp:DropDownList ID="Category" runat="server" Height="26px" 
                    onselectedindexchanged="Category_SelectedIndexChanged" Width="126px">
                </asp:DropDownList>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Sub Category</td>
            <td>
                <asp:DropDownList ID="SubCategory" runat="server" Height="26px" Width="126px">
                </asp:DropDownList>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Brand</td>
            <td>
                <asp:DropDownList ID="Brand" runat="server" Height="26px" Width="128px">
                </asp:DropDownList>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Image</td>
            <td>
                <asp:FileUpload ID="FileUpload1" runat="server" />
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                MRP</td>
            <td>
                <asp:TextBox ID="mrp" runat="server"></asp:TextBox>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Our Price</td>
            <td>
                <asp:TextBox ID="ourprice" runat="server"></asp:TextBox>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                You Save</td>
            <td>
                <asp:TextBox ID="yousave" runat="server"></asp:TextBox>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Shipping Charges</td>
            <td>
                <asp:TextBox ID="shippingcharges" runat="server"></asp:TextBox>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                Expected Delivery</td>
            <td>
                <asp:TextBox ID="expecteddelivery" runat="server"></asp:TextBox>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <asp:Button ID="submit" runat="server" Text="Button" />
            </td>
            <td>
                <asp:Button ID="reset" runat="server" Text="Button" />
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style9">
                &nbsp;</td>
            <td>
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
    </table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:19:32.220

你的代码没有错。如果你不使用数据库。
就放

```
Category.Items.Clear(); 
```

如下

```
 protected void Category_SelectedIndexChanged(object sender, EventArgs e)
{
     Category.Items.Clear();
    if (SportsName.SelectedIndex == 1)
    {
        Category.Items.Add(new ListItem("Rackets", string.Empty));
        Category.Items.Add(new ListItem("Sets", string.Empty));
        Category.Items.Add(new ListItem("Shuffle", string.Empty));
    }
    if (SportsName.SelectedIndex == 2)
    {
        Category.Items.Add(new ListItem("Golf", string.Empty));
    }
    if (SportsName.SelectedIndex == 3)
    {
         Category.Items.Add(new ListItem("Ball", string.Empty));
    }
} 
```

在函数的顶部。这样您就不需要在每个 if else 条件下都编写它。
但是您是否使用数据库。
应该如下

```
 <tr>
        <td class="style9">
            Sports Name</td>
        <td>
            <asp:DropDownList ID="SportsName" runat="server" AutoPostBack="True" 
                onselectedindexchanged="Category_SelectedIndexChanged" Height="26px" Width="126px">
            </asp:DropDownList>
        </td>
        <td>
            &nbsp;</td>
    </tr>
    <tr>
        <td class="style9">
            Category</td>
        <td>
            <asp:DropDownList ID="Category" runat="server" Height="26px" 
                 Width="126px">
            </asp:DropDownList>
        </td>
        <td>
            &nbsp;</td>
    </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:52:54.517

您没有在 html 代码中设置已选择的索引更改事件。进行如下更改。 **替换此代码**

```
<asp:DropDownList ID="SportsName" runat="server" AutoPostBack="True" Height="26px" Width="126px">
</asp:DropDownList> 
```

**使用此代码**

```
<asp:DropDownList ID="SportsName" runat="server" SelectedIndexChanged="Category_SelectedIndexChanged" 
         AutoPostBack="True" Height="26px" Width="126px">
</asp:DropDownList> 
```

您已经完美地完成了所有工作，但您放弃了将 SelectedIndexChange 事件方法放入 html 代码中。
它看起来像一个家庭作业。

# c# - 为什么 dataTables 不能与 ASP.NET MVC 4 Razor 一起使用

> ID：13437833
> 
> 赞同：0
> 
> 时间：2012-11-18T05:46:27.733
> 
> 标签：c#, asp.net-mvc, linq, datatables, jquery-datatables

我正在尝试将 dataTables.js 与我的 ASP.NET 4 MVC 项目一起使用。我有从控制器获取数据然后使用 Razor 语法生成表的表。由于它是 C#，它是服务器端的，所以它应该可以工作。下面是我的代码，有人可以告诉我我缺少什么吗？

**视图模型**

```
 public class ClassViewModel
    {
        public int Id { get; set; }
        [Required(ErrorMessage="Name is required")]
        public string Name { get; set; }
        [Required(ErrorMessage = "Abbreviation is required")]
        public string Abbreviation { get; set; }
        [Required(ErrorMessage = "Description is required")]
        public string Description { get; set; }
        public string DescriptionFrench { get; set; }
        [Required(ErrorMessage = "Semesters is required")]
        public string Semesters { get; set; }
        [Required(ErrorMessage = "Year is required")]
        public string Year { get; set; }
        [Required(ErrorMessage = "Date is required")]
        public string Date { get; set; }
        [Required(ErrorMessage = "Time is required")]
        public string Time { get; set; }
        public bool French { get; set; }
        public bool Shared { get; set; }
        public bool Concentration { get; set; }
        public IEnumerable<DepartmentViewModel> Departments { get; set; }
    } 
```

**控制器动作**

```
 public ActionResult Index()
    {            
        IEnumerable<ClassViewModel> classes = db.classes.AsEnumerable().ToList()
            .Select(c => new ClassViewModel()
            {
                Id                = c.CID,
                Name              = c.Classname,
                Abbreviation      = c.Abbreviation,
                Description       = c.Description,
                DescriptionFrench = c.DescriptionFR,
                Semesters         = c.Semesters,
                Year              = c.Year,
                Date              = c.DateTime.ToShortDateString(),
                Time              = c.DateTime.ToShortTimeString(),
                French            = c.French,
                Shared            = c.shared,
                Concentration     = c.Concentration
            });
        return View(classes);
    } 
```

**布局文件包含一个 Scripts 部分，其中包含以下内容**

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/Scripts/knockout-2.1.0.js")
@Scripts.Render("~/Scripts/jquery.dataTables.js")
@Scripts.Render("~/content/themes/bootstrap/js/bootstrap.js")
@Scripts.Render("~/Scripts/hideshow.js")
@Scripts.Render("~/Scripts/jquery.validate.js")
@Scripts.Render("~/Scripts/fullcalendar.min.js")    
@Scripts.Render("~/Content/themes/admin/js/changePassword.js")
@RenderSection("scripts", required: false) 
```

**看法**

```
@model IEnumerable<IAUCollege.Models.ClassViewModel>

@{
    ViewBag.Title = "Classes";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
<h2>Classes</h2>
<p>
    Type the class name, abbreviation and/or semester to filter the results.
</p>
<div class="searchbox-container">
    @Html.ActionLink("Add Class", "Create", new {}, new {@class="btn btn-primary pull-right"})
    <input type="text" class="searchbox pull-right" id="classSearch" placeholder="Search Classes"/>
</div>  
<table id="classesTable" class="table white-table table-striped table-bordered table-hover">
    <tr>    
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Abbreviation)
        </th>     
        <th>
            @Html.DisplayNameFor(model => model.Semesters)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>        
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Abbreviation)
            </td>          
            <td>
                @Html.DisplayFor(modelItem => item.Semesters)
            </td>        
            <td>
                <div class="btn-group">
                    <a href="/admin/classes/edit/@item.Id" rel="tooltip" title="Edit"><i class="icon-edit"></i></a>
                    <a href="/admin/classes/details/@item.Id" rel="tooltip" title="Details"><i class="icon-list-alt"></i></a>
                    <a href="/admin/classes/delete/@item.Id" rel="tooltip" title="Delete"><i class="icon-remove"></i></a>
                </div>
            </td>
        </tr>
    }

</table>
@section Scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $("#classesTable").dataTable();
        });
    </script>
} 
```

当我查看该页面时，我收到以下 javascript 错误。 ***未捕获的类型错误：无法读取未定义的属性“asSorting”***

请告诉我我缺少什么才能让这个工作......我认为这与按钮列有关，但我不确定。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:23:22.763

好的。所以我想通了.. 我需要一个`<thead>`and`<tbody>`标记，因为表格需要正确格式化，才能使 dataTables 工作。

# sql-server-2008 - 负载平衡 SQL Server

> ID：13437835
> 
> 赞同：0
> 
> 时间：2012-11-18T05:46:56.990
> 
> 标签：sql-server-2008, iis-7, windows-server-2008, nlb

这只是提高sql server性能的一种尝试。

我们有一个带有 Sql Server 2008 企业版实例的 Windows Server 2008 服务器。SQL Server 的二进制文件、操作系统文件、MDF 文件、LDF 文件都驻留在一个磁盘上。

过去我们使用 NLB 为 IIS 提供负载平衡。我们有 2 台 Windows Server 2008 机器，并且在两台机器上配置了相同的网站，并且有一台单独的机器为网站提供数据。用户将访问虚拟 IP 地址，根据每个节点上的当前负载，集群将划分流量。

现在我想知道我是否可以尝试同样的方法来平衡 SQL Server 流量。我的计划是：

1.  在 2 台不同的机器上安装 2 个 SQL 服务器实例。
2.  将 MDF、LDF 文件放在对两个实例均可见的共享介质（例如 SAN、RAID 5）上，并将 MDF 和 LDF 附加到两个实例上。
3.  将两个节点组成一个集群，让应用程序访问集群 IP 地址。

在这种情况下，就像 IIS 一样，集群会在 2 个节点之间分配流量，并且由于正在访问单个 MDF 和 LDF，我想不会有任何同步问题。

我的问题是：

1.  这实际上会提高 SQL Server 的性能吗？
2.  会不会有其他影响（我们在代码中使用了很多事务）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:39:17.073

两个或多个 SQL Server 实例不能共享相同的 MDF/LDF 文件。每个 SQL 服务器都需要独占访问它自己的数据库文件。所以你不能以这种方式对 SQL 服务器进行负载平衡。

基本上有三种选择来处理这个问题。可能还有更多，但这是最常用的三个。

**选项1：主从**

一种选择是在主从场景中设置多个 SQL 服务器实例。一台数据库服务器是主服务器，它是您向其中写入所有数据和更改的数据库。从站与主站同步，您让 Web 服务器使用从站进行读取操作。由于大多数网站通常读取的数据多于写入的数据，这有助于提高数据库吞吐量。您将不得不更改您网站的代码，以使其与单独的数据库一起进行读写操作。从站可以位于负载均衡器之后，因此您的代码只需要支持一台写入数据库服务器和一台读取数据库服务器。读取时，负载均衡器会将负载平均分配给所有从属服务器。

**选项 2：分片**

在这种情况下，您将数据分布在多个数据库服务器上。一个简单的示例是分布在两个数据库服务器上的用户数据库。所有具有奇数 UserID（例如 1、3、5 等）的用户都存储在数据库服务器 1 上，所有具有偶数 UserID 的用户（例如 2、4、6 等）都存储在数据库服务器 2 上。这有平均而言，每个数据库服务器承担大约一半负载的优点。这也可以很好地扩展，因为您可以添加越来越多的数据库服务器并使用您自己的自定义模式越来越多地分发数据。您的代码必须更改以支持多个数据库服务器，但如果您有良好的多层设计，则必须更改一层以支持此模型。

**选项 3：不要使用 SQL 数据库**

使用非 SQL 数据库解决方案。这些在通用名称下变得越来越流行：NoSQL。这意味着“不仅仅是 SQL”。这并不意味着您根本不应该使用 SQL，而是意味着：不要将它用于所有事情。与 SQL 相比，还有许多其他数据库系统具有优势（和劣势），这可能是您问题的解决方案。这篇博文很好读：[35+ 选择下一个 NoSQL 数据库的用例](http://highscalability.com/blog/2011/6/20/35-use-cases-for-choosing-your-next-nosql-database.html)。

您选择哪个选项取决于您的应用程序和数据库模型。您也可以同时使用这两种情况。例如，用户数据库的分片和订单表的主从（在网上商店中）。如果您需要事务支持或有大量连接操作，则在决定采用哪种方案时必须考虑到这一点。扩展数据库是一个相当复杂的话题，没有一个解决方案可以解决所有问题。

# forms - 如何在 Oracle Forms Builder 中显示对话框画布？

> ID：13437837
> 
> 赞同：2
> 
> 时间：2012-11-18T05:48:17.300
> 
> 标签：forms, oracle, plsql, oracleforms

我已经构建了一个表单，用户可以在其中查看从表中提取的多行数据。用户可以选择一行，然后按下按钮拒绝该行中的数据（在某些状态字段中标记为拒绝）。

我还设计了一个拒绝确认对话框，用户可以输入一些评论或拒绝理由。

我已将对话框画布设置为出现在其自己的窗口中，并将 Type proeperty 设置为 Dialog。

当用户选择要拒绝的行时，执行以下代码：

```
BEGIN
  GO_BLOCK('BLK_ALL_RECORDS');

  FIRST_RECORD;

    IF :FRM_ALL_ROWS.CHK_SELECT = 1 THEN
      :FRM_REJECTION.ID := :FRM_ALL_ROWS.ID;
        GO_BLOCK('BLK_REJECTION');
        SHOW_VIEW('CNV_REJECTION');
        EXIT;
     ELSE
         NEXT_RECORD;
     END IF;   

END; 
```

并且拒绝表有两个按钮，一个是确认，一个是取消。现在让我们只关注取消按钮。这是按下取消按钮后执行的代码：

```
:BLK_ALL_ROWS.CHK_SELECT := 0;  /* Forces removal of the check mark */
GO_BLOCK('BLK_ALL_RECORDS'); 
HIDE_VIEW('CNV_REJECTION'); 
```

唯一的问题是：一旦对话框表单出现，它就会隐藏父表单，直到表单被关闭。如何在父表单的顶部显示对话框表单，并且它们都可见（以模态方式？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:21:20.313

不同画布之间的导航可能有点棘手。很难说没有表格在我面前有什么问题，但我应该做的第一件事是确保“主”画布的“进入时提升”画布属性设置为“是”。当您将光标移回块“BLK_ALL_RECORDS”时，这应该会强制显示此画布。

另一种选择是在取消对话框逻辑中使用 SHOW_VIEW() 来强制显示主画布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:54:11.590

我终于发现了问题所在。父 Window 有一个属性 [ `Hide On Exit`] ，它是默认的，`Yes`并且每次显示另一个窗口时都会使父窗体消失。我将其设置为`NO`并调用了另一种形式。这次两个窗口都是可见的，模态窗口始终位于顶部。

# php - 扩展 mysqli_stmt 以使用自定义 mysqli_result

> ID：13437846
> 
> 赞同：8
> 
> 时间：2012-11-18T05:50:08.707
> 
> 标签：php, mysql, oop, mysqli

我一直在寻找这个问题的答案已经有一段时间了，但似乎以前没有人解决过这个问题。也许你们中的一些人能够并且愿意在这方面帮助我……那太好了！

我目前正在研究 mysqli 包装器，并尝试**为准备好的语句实现自定义结果类，**就像我已经为标准查询所做的那样！似乎结果是在 stmt 的“执行”方法中生成的，但我仍然无法理解幕后发生的事情！

有没有办法（或破解）将生成的结果指向我的结果类，而不是像常规查询那样简单的 mysqli_result ？

**只是为了让您了解一下，这里是代码中的一些粘贴：**

```
class extended_mysqli extends mysqli
{
    public function __construct()
    {
        call_user_func_array(array(get_parent_class($this), 'mysqli'), func_get_args());

        if ( $this->connect_errno )
        {
            throw new extended_mysqli_exception('database connection failure');
        }
    }

    public function query ($query, $binds = array())
    {
        if ( empty( $binds ) )
        {
            if ( $this->real_query($query) )
            {
                if ( $this->field_count )
                {
                    return new extended_mysqli_result($this, $query); // select, show, describe
                }
                else return true; // insert, update, delete
            }
            else return false; // fix 
        }
        else
        {
            $stmt = $this->prepare($query);

            if ( $stmt->bind_array($binds) )
            {
                return $stmt->execute() ? $stmt->get_result() : false;
            }
            else return false; 
        }
    }

    public function prepare($query)
    {
        return new extended_mysqli_stmt($this, $query);
    }

    // ...
}

class extended_mysqli_stmt extends mysqli_stmt
{
    public function __construct($link, $query)
    {
        parent::__construct($link);

        $this->prepare($query);
    }

    public function execute()
    {
        //  what do i do here ???
    }
}

class extended_mysqli_result extends mysqli_result implements countable, iterator, arrayaccess
{
    public function __construct($link, $mode = MYSQLI_STORE_RESULT)
    {
        parent::__construct($this->link = $link, $mode);
    }

    // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:28:47.233

这些类按原样使用，因此如果您想要自己的 mysqli 实现，您应该使用 mysqli_* 函数编写自己的包装器。

mysqli 对象可以扩展，但如果您希望对其结构或层次结构进行任何更改，这种方法最终将失败。

此外，这些方法中的大多数都信任您的输入数据，因此，如果您尝试维护安全连接，为什么不尝试使用 999 个数据库抽象层之一并扩展该代码以满足您的需求？

# apache - htaccess 只重写第一个查询

> ID：13437853
> 
> 赞同：1
> 
> 时间：2012-11-18T05:51:30.113
> 
> 标签：apache, .htaccess

我是 .htaccess 的新手。我有很多搜索，没有一个效果很好。

我想将我的动态页面转换为静态页面。

```
test.com/?gender=pop&rows=1&page=2 to
```

```
test.com/gender/pop.html?rows=1&page=2
```

也为

```
test.com/?gender=pop to
```

```
test.com/gender/pop.html
```

只需重写第一个查询。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:21:24.927

Why you like to keep dynamic parameters ? Test something like this :

```
RewriteRule ^gender/([a-z]+)\.html\?rows\=([0-9]+)\&page\=([0-9]+)$   gender=$1&rows=$2&page=$3  [L] 
```

I hoe this help, Mike

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T00:54:35.053

这应该有效：

```
RewriteEngine On
RewriteRule ^gender/(.+)\.html$ /\?gender=$1 [L,QSA] 
```

PS：这适用于任何性别。（例如：gender=pop、gender=male、gender=female、gender=123、...）如果您需要更具体的信息，请告诉我。

# android - doInBackground 进程中的问题

> ID：13437859
> 
> 赞同：0
> 
> 时间：2012-11-18T05:53:37.067
> 
> 标签：android, android-asynctask

上课时遇到问题。我没有为我的确切问题找到解决方案。直到我的工作是：

**任务.java：**

```
public class Task extends AsyncTask<Void, Void, String>
{
    Context context;
    FragmentActivity currentActivity;
    ProgressDialog dialog;
    public Task(FragmentActivity activity)
    {
        currentActivity = activity;
        context=Constant.getContext();
    }
    @Override
    protected void onPreExecute()
    {
        dialog=ProgressDialog.show(currentActivity, "Please wait...", "Loading..."); 

}

@Override
protected String doInBackground(Void... params)
{
    ActivityWeatherSetting hh = new ActivityWeatherSetting();
    hh.initialize();
    return "success";
}

@Override
protected void onPostExecute(String params)
{
    //asyncclass.dismissProgressDialog();
    dialog.dismiss();
}
} 
```

**AsyncClass.java：**

```
public abstract class AsyncClass extends Activity
{
    protected static final String TAG = AsyncClass.class.getSimpleName();

public ProgressDialog progressDialog;

private boolean destroyed = false;

Context context;

@Override
protected void onDestroy()
{
    super.onDestroy();
    destroyed = true;
}

public void showLoadingProgressDialog()
{
    context=Constant.getContext();
    this.showProgressDialog("Loading. Please wait...");
    Log.d("this",this.toString());
}

public void showProgressDialog(CharSequence message)
{
    if (progressDialog == null)
    {
        progressDialog = new ProgressDialog(this);
        progressDialog.setIndeterminate(true);
    }

    progressDialog.setMessage(message);
    progressDialog.show();
}

public void dismissProgressDialog()
{
    if (progressDialog != null && !destroyed)
    {
        progressDialog.dismiss();
    }
}
} 
```

**ActivityWeatherSetting.java：**

```
public void initialize()
    {
        LayoutInflater layout = new LayoutInflater(Constant.getContext()) {

        @Override
        public LayoutInflater cloneInContext(Context newContext) {
            return null;
        }
    };
    view=(View)layout.inflate(R.layout.activity_grid_layout, null);
    boolean bResult = initializeData();

    if (bResult != false ){
        bResult = initializeView();
    }

    if (bResult == false){
        Log.e(TAG,"Init data failed");
        return;
    }
        drawWeatherScreen();
}    

private void updateDataOfCurrentLocation(){
    requestUpdateWeather();
}
private void requestUpdateWeather(){
    Message msgFetchData = new Message();
    msgFetchData.what = REG_GET_WEATHER_START;
    m_HandleRequest.sendMessage(msgFetchData);      
}

private void initializeHandleRequest(){
    m_Runnable = new Runnable(){

        //@Override
        public void run() {
            requestUpdateWeather();
        }           
    };
    /* Setting up handler for ProgressBar */
    m_HandleRequest = new Handler(){
        @Override
        public void handleMessage(Message message) {
            int nRequest = message.what;

            switch(nRequest){
            case REG_GET_WEATHER_START:
                String strWOEID = m_Preferneces.getLocation();
                if (strWOEID == null){
                    Log.e(TAG,"Can not get WOEID");
                    //m_ProgressDialog.dismiss();
                    //displayNotifyCation(R.string.strFetchFailed);
                    return;
                } else {
                     //Get weather information 
                    m_WeatherInfo = m_DataModel.getWeatherData(strWOEID);           
                }

                Message msgRegSearch = new Message();
                msgRegSearch.what = REG_GET_WEATHER_FINISH;
                sendMessage(msgRegSearch);
                break;

            case REG_GET_WEATHER_FINISH:
                if (m_WeatherInfo != null){
                    updateWeatherInfo(m_WeatherInfo);
                    //notifyUpdateTime();
                }                   
                //m_ProgressDialog.dismiss();
                m_HandleRequest.postDelayed(m_Runnable, (ONE_MINUTE*m_Preferneces.getTimeUpdate()));
                break;

                 default:
                     Log.e(TAG,"Can not handle this message");
                     break;
            }
        }
    };      
}    

private boolean initializeView(){
    m_TextLocation = (TextView)view.findViewById(R.id.weatherset_location_txtview);
    m_Temperature = (TextView)view.findViewById(R.id.weatherset_temp_txtview);
    m_Humimidy = (TextView)view.findViewById(R.id.weatherset_humidity_txtview);
    m_Visibility = (TextView)view.findViewById(R.id.weatherset_visibility_txtview);
    m_WeatherIcon = (ImageView) view.findViewById(R.id.weather_icon);
    m_Date = (TextView)view.findViewById(R.id.dateTime);

    if ((m_TextLocation == null) || (m_Temperature == null) || 
            (m_Humimidy == null) || (m_WeatherIcon == null) ||
            (m_Visibility == null) || (m_Date == null)){
        Log.e(TAG,"View init failed");
        return false;
    }

    return true;
}

private boolean initializeData(){
    /* Get application context */
    Context appContext = view.getContext();

    /* Get preference instance */
    m_Preferneces = WeatherPreferences.getInstance(appContext);
    if (m_Preferneces == null){
        Log.e(TAG, "Get preference instance failed, check please");
        return false;
    }

    /* Get instance of data model */
    m_DataModel = WeatherDataModel.getInstance();
    if (m_DataModel == null){
        Log.e(TAG,"Can not get data model");
        return false;
    }

    initializeHandleRequest();

    return true;
}    
private void drawWeatherScreen(){
    /
    updateDataOfCurrentLocation();
}
private void updateWeatherInfo(WeatherInfo weatherInfo)
{
    try
    {
    if (weatherInfo == null){
        Log.e(TAG,"Weather is null");
        return;
    }

    String strCode = weatherInfo.getCode();
    int nCode = getImageByCode(strCode);
    m_WeatherIcon.setImageResource(nCode);

    boolean bIsC = m_Preferneces.getTempFmt();

    String strFmt;
    String strTemp = weatherInfo.getTemperature(WeatherInfo.TEMPERATURE_FMT_CELSIUS);
    if (bIsC == true){
        strFmt = view.getContext().getString(R.string.str_temperature_fmt); 
    } else {
        strFmt = view.getContext().getString(R.string.str_temperature_fmt_f);
        strTemp = WeatherDataModel.convertC2F(strTemp);
    }

    //String strTemperature = String.format(strFmt, strTemp);
    strTemperature = String.format(strFmt, strTemp);

    m_TextLocation.setText(weatherInfo.getCity());
    m_Temperature.setText(strTemperature);
    m_Date.setText(weatherInfo.getDate());

    TextView humidity=(TextView)view.findViewById(R.id.humidityValue);
    TextView visibility=(TextView)view.findViewById(R.id.visiValue);
    strFmt = view.getContext().getString(R.string.str_humidity_fmt);
    String strHumidity = String.format(strFmt, weatherInfo.getHumidity());
    //m_Humimidy.setText(strHumidity);
    humidity.setText(strHumidity);
    strFmt = view.getContext().getString(R.string.str_visi_fmt);
    String strVisi = String.format(strFmt, weatherInfo.getVisibility());
    //m_Visibility.setText(strVisi);
    visibility.setText(strVisi);
    }
    catch(Exception e)
    {
        //Toast.makeText(ActivityWeatherSetting.this, e.getMessage(), Toast.LENGTH_LONG).show();
    }
private int getImageByCode(String strCode){
    int nImageCode = R.drawable.a0;

    if (strCode == null){
        Log.e(TAG,"Code is null");
        return nImageCode;
    }

    int nCode = Integer.parseInt(strCode);

    int nNumber= YahooWeatherHelper.m_ImageArr.length;
    for (int i=0; i < nNumber; i++){
        if (nCode == YahooWeatherHelper.m_ImageArr[i][1]){
            return YahooWeatherHelper.m_ImageArr[i][0];
        }
    }
    return nImageCode;
} 
```

**LogCat 中的异常：**

```
11-18 13:38:20.510: E/AndroidRuntime(585): FATAL EXCEPTION: AsyncTask #1
11-18 13:38:20.510: E/AndroidRuntime(585): java.lang.RuntimeException: An error occured while executing doInBackground()
11-18 13:38:20.510: E/AndroidRuntime(585):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-18 13:38:20.510: E/AndroidRuntime(585):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.lang.Thread.run(Thread.java:856)
11-18 13:38:20.510: E/AndroidRuntime(585): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-18 13:38:20.510: E/AndroidRuntime(585):  at android.os.Handler.<init>(Handler.java:121)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.ActivityWeatherSetting$3.<init>(ActivityWeatherSetting.java:384)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.ActivityWeatherSetting.initializeHandleRequest(ActivityWeatherSetting.java:384)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.ActivityWeatherSetting.initializeData(ActivityWeatherSetting.java:561)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.ActivityWeatherSetting.initialize(ActivityWeatherSetting.java:137)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.Task.doInBackground(Task.java:44)
11-18 13:38:20.510: E/AndroidRuntime(585):  at com.net.elderlyhealth.weather.Task.doInBackground(Task.java:1)
11-18 13:38:20.510: E/AndroidRuntime(585):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-18 13:38:20.510: E/AndroidRuntime(585):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-18 13:38:20.510: E/AndroidRuntime(585):  ... 5 more
11-18 13:38:23.420: I/dalvikvm(585): threadid=3: reacting to signal 3
11-18 13:38:23.561: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
11-18 13:38:23.920: I/dalvikvm(585): threadid=3: reacting to signal 3
11-18 13:38:24.032: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
11-18 13:38:24.940: E/WindowManager(585): Activity com.net.elderlyhealth.view.ViewPagerFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4149f628 that was originally added here
11-18 13:38:24.940: E/WindowManager(585): android.view.WindowLeaked: Activity com.net.elderlyhealth.view.ViewPagerFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4149f628 that was originally added here
11-18 13:38:24.940: E/WindowManager(585):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
11-18 13:38:24.940: E/WindowManager(585):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
11-18 13:38:24.940: E/WindowManager(585):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
11-18 13:38:24.940: E/WindowManager(585):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
11-18 13:38:24.940: E/WindowManager(585):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
11-18 13:38:24.940: E/WindowManager(585):   at android.app.Dialog.show(Dialog.java:278)
11-18 13:38:24.940: E/WindowManager(585):   at android.app.ProgressDialog.show(ProgressDialog.java:116)
11-18 13:38:24.940: E/WindowManager(585):   at android.app.ProgressDialog.show(ProgressDialog.java:99)
11-18 13:38:24.940: E/WindowManager(585):   at android.app.ProgressDialog.show(ProgressDialog.java:94)
11-18 13:38:24.940: E/WindowManager(585):   at com.net.elderlyhealth.view.SampleGridTwoFragment$1.onItemClick(SampleGridTwoFragment.java:119)
11-18 13:38:24.940: E/WindowManager(585):   at android.widget.AdapterView.performItemClick(AdapterView.java:292)
11-18 13:38:24.940: E/WindowManager(585):   at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
11-18 13:38:24.940: E/WindowManager(585):   at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
11-18 13:38:24.940: E/WindowManager(585):   at android.widget.AbsListView$1.run(AbsListView.java:3168)
11-18 13:38:24.940: E/WindowManager(585):   at android.os.Handler.handleCallback(Handler.java:605)
11-18 13:38:24.940: E/WindowManager(585):   at android.os.Handler.dispatchMessage(Handler.java:92)
11-18 13:38:24.940: E/WindowManager(585):   at android.os.Looper.loop(Looper.java:137)
11-18 13:38:24.940: E/WindowManager(585):   at android.app.ActivityThread.main(ActivityThread.java:4424)
11-18 13:38:24.940: E/WindowManager(585):   at java.lang.reflect.Method.invokeNative(Native Method)
11-18 13:38:24.940: E/WindowManager(585):   at java.lang.reflect.Method.invoke(Method.java:511)
11-18 13:38:24.940: E/WindowManager(585):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-18 13:38:24.940: E/WindowManager(585):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-18 13:38:24.940: E/WindowManager(585):   at dalvik.system.NativeStart.main(Native Method) 
```

我在 SO 中的 AsyncTask 问题中看到了很多问题，但没有一个对我有帮助。我需要帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:05:06.773

问题是当你调用时`hh.initialize()`，你已经在后台线程中，创建一个`Handler`. 事实上，您的代码正在尝试从后台线程执行大量 UI 工作。您应该将实际需要在 UI 线程之外完成的工作分离到一个单独的方法中，并且只从`doInBackground`您的 AsyncTask 中调用该方法。

# gmail - Gmail - 导入到联系人链接

> ID：13437860
> 
> 赞同：0
> 
> 时间：2012-11-18T05:53:43.147
> 
> 标签：gmail, google-apps-script

当您转到联系人 >> 更多 >> vCard 格式 >> 导出 - 这将创建一个联系人文件。

如果您随后撰写新邮件，请附加该 .vcf 文件，发送到 Gmail 地址 - Gmail 将向收件人显示一个不错的“导入联系人”快捷方式链接。 ![在此处输入图像描述](../Images/b40ad350e43bfecb00fdb4e4b01a1f3d.png)

当您在 GAS 中以与导出文件相同的格式重新创建 .vcf 文件并使用 GmailApp 将其作为附件发送时，Gmail 不会显示“导入到联系人”。它只显示“视图”。 ![在此处输入图像描述](../Images/722b558dc1fa6b00089774326750676c.png)

但是，如果您在使用 GAS 创建的文件上单击“下载”，然后附加并发送手动撰写的新邮件，Gmail 将显示“导入”链接。

在使用 GmailApp 将 vCard 文件作为附件发送时，Apps 脚本是否可以执行任何操作来确保显示“导入到联系人”链接，或者这真的更像是 Gmail 问题吗？

```
var layout = 'BEGIN:VCARD' + '\n' +
'VERSION:3.0' + '\n' +
'FN: Forrest Gump' + '\n' +
'N:Gump;Forrest;;;' + '\n' +
'EMAIL;TYPE=INTERNET:forrestgump@example.com' + '\n' +
'END:VCARD' + '\n';

var vCard = [{fileName:"new contacts.vcf", content:layout}];

GmailApp.sendEmail("example@gmail.com", "Subject", "Body...", {attachments: vCard}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:25:57.560

It's because you sent it as plain text. If you want Gmail to recognize it as vCard. You need to send it as octet-stream.

To fix this just put `mimeType:"application/octet-stream"` to your attach file description

e.g.

```
var vCard = [{fileName:"new contacts.vcf", content:layout, mimeType:"application/octet-stream"}]; 
```

# asp.net - 在浏览器中打开 ms 字或类似的组件

> ID：13437863
> 
> 赞同：0
> 
> 时间：2012-11-18T05:53:52.170
> 
> 标签：asp.net, ms-word, asp.net-4.0

我用 asp.net 编程，想在浏览器中使用和打开（打开和编辑 doc 文件）ms word 或类似的组件。我应该使用组件或程序来完成这项工作吗？

前任：

[http://inspic.com/7822594D](http://inspic.com/7822594D)

我想要一个类似于上面的组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:20:32.363

祝你好运。

有一些免费的 Javascript WYSIWYG 组件可以为您提供有限的富文本编辑功能，例如[CKEditor](http://ckeditor.com/)和[TinyMCE](http://www.tinymce.com/)，但肯定没有 Microsoft Word 级别的功能。打开和编辑 Word 文档也会有问题——这些编辑器都直接在 HTML 上工作，而不是其他格式。

最终，如果您想在线处理 Word 文档，您可能最终需要自己构建一些东西，而且与 Word 相比，它会非常有限。

# c++ - 将字节写入 .Bin 文件

> ID：13437864
> 
> 赞同：0
> 
> 时间：2012-11-18T05:53:58.873
> 
> 标签：c++, binaryfiles, fstream, ofstream, writetofile

我有一个 C++ 中的向量，我想将它写入 .bin 文件。这个向量的类型是`byte`，字节数可能很大，可能是数百万。我这样做是这样的：

```
if (depthQueue.empty())
    return;

FILE* pFiledep;

pFiledep = fopen("depth.bin", "wb");

if (pFiledep == NULL)
    return;

byte* depthbuff = (byte*) malloc(depthQueue.size() * 320 * 240 * sizeof(byte));

if(depthbuff)
{
  for(int m = 0; m < depthQueue.size(); m++)
  {
    byte b = depthQueue[m];
    depthbuff[m] = b;
  }

  fwrite(depthbuff, sizeof(byte),
        depthQueue.size() * 320 * 240 * sizeof(byte), pFiledep);
  fclose(pFiledep);
  free(depthbuff);
} 
```

`depthQueue`是我的向量，它包含字节，可以说它的大小是 100,000。
有时我没有收到此错误，但 bin 文件为空。
有时我得到堆错误。
有时当我调试它时，malloc 似乎没有分配空间。问题出在空间上吗？

还是顺序内存块太长而无法写入bin？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:57:12.260

你几乎不需要这些。 `vector`内容保证在内存中是连续的，因此您可以直接从中写入：

```
fwrite(&depthQueue[0], sizeof (Byte), depthQueue.size(), pFiledep); 
```

请注意代码中可能存在的错误：如果向量确实是`vector<Byte>`，则不**应将**其大小乘以 320*240。

**编辑：**对调用的更多修复`fwrite()`：第二个参数已经包含`sizeof (Byte)`因子，所以也不要在第三个参数中再次进行乘法运算（即使`sizeof (Byte)`可能是 1，所以没关系）。

# java - Java - 滚动到 JTextArea 内的特定文本

> ID：13437865
> 
> 赞同：10
> 
> 时间：2012-11-18T05:54:17.657
> 
> 标签：java, swing, text, jtextarea, caret

我正在尝试在我正在编写的当前程序中实现一个功能，我想学习如何向下滚动到 JTextArea 中的特定文本。例如，假设我有以下内容：

```
JTextArea area = new JTextArea(someReallyLongString); 
```

someReallyLongString 将代表一个段落，或一段非常大的文本（其中垂直滚动条可见）。所以我想做的是向下滚动到该文本区域内的特定文本。例如，假设 someReallyLongString 在滚动条中间附近包含单词“the”（这意味着该单词不可见），我将如何向下滚动到该特定文本？

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-18T07:57:41.973

这是一个非常基本的例子。这基本上是遍历文档以找到单词在文档中的位置，并确保将文本移动到可视区域。

也突出了比赛

![在此处输入图像描述](../Images/2e0879e5af4619df639085659660221e.png)

```
public class MoveToText {

    public static void main(String[] args) {
        new MoveToText();
    }

    public MoveToText() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FindTextPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FindTextPane extends JPanel {

        private JTextField findField;
        private JButton findButton;
        private JTextArea textArea;
        private int pos = 0;

        public FindTextPane() {
            setLayout(new BorderLayout());
            findButton = new JButton("Next");
            findField = new JTextField("Java", 10);
            textArea = new JTextArea();
            textArea.setWrapStyleWord(true);
            textArea.setLineWrap(true);

            Reader reader = null;
            try {
                reader = new FileReader(new File("Java.txt"));
                textArea.read(reader, null);
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    reader.close();
                } catch (Exception e) {
                }
            }

            JPanel header = new JPanel(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            header.add(findField, gbc);
            gbc.gridx++;
            header.add(findButton, gbc);

            add(header, BorderLayout.NORTH);
            add(new JScrollPane(textArea));

            findButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Get the text to find...convert it to lower case for eaiser comparision
                    String find = findField.getText().toLowerCase();
                    // Focus the text area, otherwise the highlighting won't show up
                    textArea.requestFocusInWindow();
                    // Make sure we have a valid search term
                    if (find != null && find.length() > 0) {
                        Document document = textArea.getDocument();
                        int findLength = find.length();
                        try {
                            boolean found = false;
                            // Rest the search position if we're at the end of the document
                            if (pos + findLength > document.getLength()) {
                                pos = 0;
                            }
                            // While we haven't reached the end...
                            // "<=" Correction
                            while (pos + findLength <= document.getLength()) {
                                // Extract the text from teh docuemnt
                                String match = document.getText(pos, findLength).toLowerCase();
                                // Check to see if it matches or request
                                if (match.equals(find)) {
                                    found = true;
                                    break;
                                }
                                pos++;
                            }

                            // Did we find something...
                            if (found) {
                                // Get the rectangle of the where the text would be visible...
                                Rectangle viewRect = textArea.modelToView(pos);
                                // Scroll to make the rectangle visible
                                textArea.scrollRectToVisible(viewRect);
                                // Highlight the text
                                textArea.setCaretPosition(pos + findLength);
                                textArea.moveCaretPosition(pos);
                                // Move the search position beyond the current match
                                pos += findLength;
                            }

                        } catch (Exception exp) {
                            exp.printStackTrace();
                        }

                    }
                }
            });

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T06:15:16.573

这应该有效：

```
textArea.setCaretPosition(posOfTextToScroll); 
```

您可以`posOfTextToScroll`通过`Document`模型获得。在 Javadoc 中阅读它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T07:10:25.800

首先获取您在文本区域中设置的文本，并使用地图构建索引来保存字符和您找到它的位置。

基于此，先前的答案建议使用 setCaretPosition 使用从地图中检索到的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-29T18:28:10.430

添加到 MadProgrammer 的评论中：

`scrollRectToVisible(viewRect)`自 Java SE9 起已弃用，已被替换为`scrollRectToVisible2D(viewRect)`

在不使用不推荐使用的函数的情况下显示文本的正确方法是：

```
java.awt.geom.Rectangle2D view = area.modelToView2D(pos); // View where pos is visible
area.scrollRectToVisible(view.getBounds()); // Scroll to the rectangle provided by view
area.setCaretPosition(pos); // Sets carat position to pos 
```

# ruby-on-rails - Rails 资产管道不工作

> ID：13437868
> 
> 赞同：2
> 
> 时间：2012-11-18T05:54:26.107
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

Rails 资产管道似乎在我的开发环境中无法正常运行。我遇到以下问题：

1.  除其他文件外，还提供清单文件。
2.  文件未连接。
3.  提供的一些文件是完全空的。

这些问题适用于 CSS 和 JavaScript 资产。下面是 HTML 输出的副本（我没有编辑默认的 rails 布局）。请注意清单文件和所有资产的存在（应连接到一个文件中）。

```
<!DOCTYPE html>
<html>
<head>
<title>Jackeyes</title>
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/universal.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.waitforimages.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<meta content="authenticity_token" name="csrf-param" />
<meta content="0AZh7mNJS7R1jsHKyZ5eKBrAON10Jra2677A8Lg3wzw=" name="csrf-token" />
</head>
<body> 
```

我是 Rails 的新手，所以我不确定如何开始解决这个问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T06:36:07.730

这是开发环境中 Rails 的默认行为。我建议阅读[rails guides](http://guides.rubyonrails.org/asset_pipeline.html#in-development)中有关资产管道的信息。

在开发过程中，如果您的资产位于单独的文件中，它往往会使调试变得更容易。例如，如果您在 Firefox 中使用 firebug，您可以查看每个单独的 javascript 文件以查看编译后的咖啡输出、设置断点等。在每个请求上连接资源也可能变得低效，这在一个您不断更改资产和加载页面的开发环境。

但是，如果您想在开发过程中将所有内容连接起来，请设置`config.assets.debug = false`.`app/config/environments/development.rb`

# jquery - Floating Div - 停止清除/包装

> ID：13437869
> 
> 赞同：0
> 
> 时间：2012-11-18T05:54:28.237
> 
> 标签：jquery, css, css-float

我有一系列浮动 div，我想在水平线上旋转到无穷大（继续浮动）。这些 div 需要在有限宽度的 div 内继续。最终，我想按下左右的 div/按钮来滚动项目（与使用滚动条相比）。

我无法让 div 保持在浮动范围内。一旦它们在父 div 中用完空间，它们就会开始换行。

有没有办法绕过包装？一旦我弄清楚了，下一步就是使用 jQuery 让水平在单击时向左/向右移动，这样它就可以复制水平滚动。

这是我完成的小提琴和代码：

[http://jsfiddle.net/stfzy/8/](http://jsfiddle.net/stfzy/8/)

HTML：

```
<div id='container'>
    <div id='arrowL'>
    </div>
    <div id='arrowR'>
    </div>
    <div class='list'>
        <div class='item'>
        </div>
        <div class='item'>
        </div>
        <div class='item'>
        </div>
        <div class='item'>
        </div>

    </div> 
```

CSS：

```
#container{
width:340px;
    height:50px;
}

.list{
    background:grey;
width:300px;
    height:50px;
    float:left;
}

#arrowR{
background:yellow;
    width:20px;
    height:50px;
    float:right;
}

#arrowL{
background:yellow;
    width:20px;
    height:50px;
    float:left;
}

.item{
    background:green;
width:140px;
    height:40px;
    margin:5px;
    float:left;
} 
```

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:11:23.133

试试这个，通过将列表类包装在一个带有溢出的容器中：隐藏。然后，您可以使用 JQuery 对内部 div 执行任何操作。

[样品小提琴](http://jsfiddle.net/stfzy/10/)

```
#list-container {
overflow:hidden;    
width: 300px;   
}

.list{
background:grey;
min-width:700px;
float:left;
} 
```

# ncurses - 使用 curses.h 的函数调用

> ID：13437883
> 
> 赞同：0
> 
> 时间：2012-11-18T05:59:01.227
> 
> 标签：ncurses

这是我第一次使用 curses.h。我已经在上面发布了我的代码。当按下右箭头或左箭头时，我需要进行一些函数调用。当我将绘图函数调用添加到我的代码时，按下箭头键时它不会绘制，但在用户按下“q”后程序终止时它会绘制。有任何想法吗？

```
int main(int argc, char * argv[] )
    {
      setup_curses();  
      c = getch();

      while(1)
      {   
        if (c != ERR)
        {
          move(5,0);
          printw("left arrow key rotates counter-clockwise, right clockwise, space for thrust, q to quit.");
          if (c == KEY_LEFT)
            draw();
          else if (c == KEY_RIGHT) 
            draw();
          else if (c == ' ')
            printw("do something");
          else if (c == 'q')
            break;
          refresh();

        }

        c = getch();

      }

    unset_curses();
    exit(EXIT_SUCCESS);
    }

        void setup_curses()
        {
          initscr();
          cbreak();
          noecho();
          keypad(stdscr, true);
        }

        void unset_curses()
        {
          keypad(stdscr, false);
          nodelay(stdscr, false);
          nocbreak();
          echo();
          endwin();
        } 
```

# c++ - 从私有类变量中释放内存

> ID：13437884
> 
> 赞同：1
> 
> 时间：2012-11-18T05:59:19.683
> 
> 标签：c++

```
#include <stdio.h>
#include <iostream>
#include <string>

using namespace std;

class myClass{

public:
    int *num1;
    myClass();

};

myClass::myClass(){
    num1 = new int[1];
    num1[0] = 10;
}

int main()
{
    myClass *myclass;

    myclass = new myClass[10];

    cout << myclass[0].num1[0] << endl;

    delete &myclass[0];
    cout << myclass[0].num1[0] << endl;

} 
```

我想删除 myclass 的第一个实例（myclass[0]）。

此代码运行不正确，在删除部分失败。我可能缺少一些东西。

我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:46:52.710

您不能只删除使用创建的数组的一部分`new`。`new`分配一块只能一起`delete`编辑的内存块。

如果你想让一个对象释放它自己的内部数据，你必须安排这个应该封装和隐藏它自己的内部资源的类来自己做。

如果您想要一个较小的内存块来保存您分配的数组，那么您必须分配一个较小的块并将您希望保留的内容移动到新块中，然后删除整个旧块：

```
int *arr = new int[10];

int *tmp = new int[9];
std::copy(arr+1, arr+10, tmp);
delete [] arr;
arr = tmp; 
```

* * *

你需要设计你的类来管理它自己的资源，并处理复制或移动。您的 current`myClass`分配了一个数组，但依赖于其他代码来处理清理。这不是做这件事的好方法，因为通常没有其他代码可以做正确的事情，即使你可以，你也会经常犯错误。

由于您在构造函数中进行分配，因此您需要一个处理释放的析构函数。然后，由于您实现了三个特殊操作之一（copy-ctor、copy-assignment、析构函数），您需要考虑全部实现它们。（这被称为“三法则”。在 C++11 中，它变成了“五法则”，并添加了 move-ctors 和 move assignment。）

```
class myClass {
public:
    myClass();

    // destructor to handle destroying internal resources correctly
    ~myClass();

    // copy constructor and copy assignment operator, to handle copying correctly
    myClass(myClass const &rhs);
    myClass &operator=(myClass const &rhs);

    // move constructor and move assignment operator, to handle moves correctly (C++11)
    myClass(myClass && rhs);
    myClass &operator= (myClass &&rhs);

private:
   int *num1; // private so external code can't screw it up

public:
   // limited access to num1
   int size() const { if (num1) return 1; else return 0; }
   int &operator[] (size_t i) { return num1[i]; }
}; 
```

您可以像以前一样实现构造函数，也可以使用初始化列表和 C++11 统一初始化：

```
myClass::myClass() : num1(new int[1]{10}) {} 
```

现在，您想要的析构函数取决于您希望类具有的语义以及您想要维护的特定不变量。“值”语义是 C++ 中的规范（如果您熟悉 Java 或 C#，这些语言鼓励或要求用户定义类型的“参考”语义）。如果您想要值语义，并且如果您维护一个 num1 始终拥有内存或为空的不变量，则可以使用下面的析构函数。

```
myClass::~myClass() { delete num1; } 
```

可以以不同的方式处理复制和移动。如果你想完全禁止它们，你可以说（在 C++11 中）：

```
myClass::myClass(myClass const &rhs) = delete;
myClass &myClass::operator=(myClass const &rhs) = delete;

myClass::myClass(myClass && rhs) = delete;
myClass &myClass::operator= (myClass &&rhs) = delete; 
```

或者，如果您想允许复制和/或移动（并保持值语义和上面提到的不变量），那么您可以实现这对函数中的一个或两个：

```
myClass::myClass(myClass const &rhs) : num1( rhs.size() ? new int[1]{rhs[0]} : nullptr) {}
myClass &myClass::operator=(myClass const &rhs) {
    if (num1)
        num1[0] = rhs[0];
}

myClass::myClass(myClass && rhs) : num1(rhs.num1) { rhs.num1 = nullptr; } // remember to maintain the invariant that num1 owns the thing it points at, and since raw pointers don't handle shared ownership only one thing can own the int, and therefore only one myClass may point at it. rhs.num1 must be made to point at something else...
myClass &myClass::operator= (myClass &&rhs) { std::swap(num1, rhs.num1); } // steal rhs.num1 and leave it to rhs to destroy our own num1 if necessary. We could also destroy it ourselves if we wanted to. 
```

有了这个实现，您现在可以像对待`int`任何其他“值”类型一样对待 myClass 对象。您不再需要担心管理其内部资源；它会自己照顾他们。

```
int main() {
    std::vector<myClass> myclassvec(10);

    cout << myclassvec[0][0] << '\n';

    myclassvec.erase(myclassvec.begin()); // erase the first element

    cout << myclassvec[0][0] << '\n'; // access the new first element (previously the second element);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:05:10.823

在您的类中创建一个函数来处理其私有成员的删除，可能称为`FreeMem(int index)`

```
void myClass::FreeMem()
{
    delete [] num1
} 
```

但老实说，在这类程序中不使用析构函数就释放对象的内存是危险的，而且是非常糟糕的做法。我建议释放析构函数中的内存，因此当对象终止时，它会释放内存，

```
myClass::~myClass()
{
    delete [] num1;
} 
```

需要注意的另一件事是，如果您只在动态变量中创建一个值，则将其写为：

```
int * pnum = new int;
//or in your class..
pnum = new int; 
```

除其他外，您的程序中有很多缺陷。我建议重新阅读课程。

# android - com.android.internal.R.attr 和 android.R.attr 是否具有相同的值集？

> ID：13437885
> 
> 赞同：2
> 
> 时间：2012-11-18T05:59:42.957
> 
> 标签：android

我需要使用来自 Android 资源的内置值。该值被存储`com.android.internal.R.attr.listViewStyle`。由于无法从我的代码中得到它，我试图找到我可以使用 insted 的适当值。嗯，我刚刚找到了`android.R.attr.listViewStyle`。

问题 1：这些值是否相同？

问题 2：我在哪里可以找到 XML 的`com.android.internal.R.attr.listViewStyle`？也许我必须创造自己的风格而不是那种风格。为了找到它，我应该查看该文件。

对不起，如果这些问题很愚蠢。我是 Android 开发的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:59:44.833

`com.android.internal`类是 android 内部的，它们只能在框架内访问。

我认为`com.android.internal.R.attr.listViewStyle`和`android.R.attr.listViewStyle`相同。

如果您想创建自己的风格，可以[在这里查看](http://androidxref.com/4.0.4/xref/frameworks/base/core/res/res/values/themes.xml#428)。这包含两个`listViewStyle`. 它们基于设备默认主题（浅色或深色）使用。

如果你想使用这种风格，那么我认为你不需要在你的代码中指定任何东西，这是默认主题，所以如果没有指定属性，它会自动选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T10:35:40.800

您可以使用以下代码在 values/attr.xml 中添加 listViewStyle：

`<attr name="listViewStyle" format="reference" />`

`com.android.internal.R.attr.listViewStyle`将您的代码 更改为`R.attr.listViewStyle`

我在[这个找到](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/attrs.xml)

attr.xml 的示例

`< ?xml version="1.0" encoding="utf-8"?>`

`< resources>`

`< attr name="listViewStyle" format="reference" />`

`</resources>`

# c# - 在 ListView 中显示项目的上下文菜单

> ID：13437889
> 
> 赞同：28
> 
> 时间：2012-11-18T06:01:04.263
> 
> 标签：c#, winforms

我知道如何制作一个在我右键单击 listView 时弹出的 contextMenu，我想要的是当我右键单击**item**时它会弹出。我正在尝试制作聊天服务器和客户端，现在...现在我想在右键单击已连接客户端的项目时查看客户端信息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-18T06:44:15.557

```
private void listView1_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        var focusedItem = listView1.FocusedItem;
        if (focusedItem != null && focusedItem.Bounds.Contains(e.Location))
        {
            contextMenuStrip1.Show(Cursor.Position);
        }
    } 
} 
```

您可以将连接的客户端信息放在 contextMenuStrip1 中。当您右键单击一个项目时，您可以显示来自该 contextMenuStrip1 的信息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T06:40:35.353

您将不得不使用 ListViews 上下文菜单，但要根据您右键单击的 ListView 项目来更改它。

```
private void listView1_MouseDown(object sender, MouseEventArgs e)
{
    bool match = false;

    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        foreach (ListViewItem item in listView1.Items)
        {
            if (item.Bounds.Contains(new Point(e.X, e.Y)))
            {
                MenuItem[] mi = new MenuItem[] { new MenuItem("Hello"), new MenuItem("World"), new MenuItem(item.Name) };
                listView1.ContextMenu = new ContextMenu(mi);
                match = true;
                break;
            }
        }
        if (match)
        {
            listView1.ContextMenu.Show(listView1, new Point(e.X, e.Y));
        }
        else
        {
            //Show listViews context menu
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T06:38:46.733

您可以通过使用并提供与该选定项目相关的上下文菜单来触发其中的事件`MouseDown`或其中`MouseUp`的事件。`ListView``MouseButton.Right`[`ListView.Hittest`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.hittest.aspx)

有关更清晰的信息，您可以通过此**[链接](https://stackoverflow.com/q/1718389/1577396)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-11T03:39:46.773

完全解决方案

*   当用户右键单击 listView 中的项目时弹出。
*   如果列表没有项目，请避免异常。
*   如果选择了一个项目，则显示删除和编辑选项。

[![在此处输入图像描述](../Images/fb89f0f11e57ae0c7a0f040cbbbad3ba.png)](https://i.stack.imgur.com/mXPex.jpg)

代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    listView1.MouseUp += new MouseEventHandler(listView1_MouseClick);

}

private void listView1_MouseClick(object sender, MouseEventArgs e)
{
    string id = "xxx";//extra value

    if (e.Button == MouseButtons.Right)
    {
        if (listView1.FocusedItem != null && listView1.FocusedItem.Bounds.Contains(e.Location) == true)
        {
            ContextMenu m = new ContextMenu();
            MenuItem cashMenuItem = new MenuItem("編輯");
            cashMenuItem.Click += delegate (object sender2, EventArgs e2) {
                ActionClick(sender, e, id);
            };// your action here 
            m.MenuItems.Add(cashMenuItem);

            MenuItem cashMenuItem2 = new MenuItem("-");
            m.MenuItems.Add(cashMenuItem2);

            MenuItem delMenuItem = new MenuItem("刪除");
            delMenuItem.Click += delegate (object sender2, EventArgs e2) {
                DelectAction(sender, e, id);
            };// your action here
            m.MenuItems.Add(delMenuItem);

            m.Show(listView1, new Point(e.X, e.Y));

        }
    }
}

private void DelectAction(object sender, MouseEventArgs e, string id)
{
    ListView ListViewControl = sender as ListView;
    foreach (ListViewItem eachItem in ListViewControl.SelectedItems)
    {
        // you can use this idea to get the ListView header's name is 'Id' before delete
        Console.WriteLine(GetTextByHeaderAndIndex(ListViewControl, "Id", eachItem.Index) );
        ListViewControl.Items.Remove(eachItem);
    }
}

private void ActionClick(object sender, MouseEventArgs e, string id)
{
    //id is extra value when you need or delete it
    ListView ListViewControl = sender as ListView;
    foreach (ListViewItem tmpLstView in ListViewControl.SelectedItems)
    {
        Console.WriteLine(tmpLstView.Text);
    }

}

public static string GetTextByHeaderAndIndex(ListView listViewControl, string headerName, int index)
{
    int headerIndex = -1;
    foreach (ColumnHeader header in listViewControl.Columns)
    {
        if (header.Name == headerName)
        {
            headerIndex = header.Index;
            break;
        }
    }
    if (headerIndex > -1)
    {
        return listViewControl.Items[index].SubItems[headerIndex].Text;
    }
    return null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T14:29:22.430

这个话题很老了，但我会留下我的解决方案以供参考。

在 xaml ListView 定义中放置您的上下文菜单：

```
<ListView Name="m_list" >
    <ListView.ContextMenu>
        <ContextMenu>
            <MenuItem Header="menuItem1" Click="ContextMenuItem1Clicked" />
            <MenuItem Header="menuItem2" Click="ContextMenuItem2Clicked" />
        </ContextMenu>
    </ListView.ContextMenu>
...
</ListView> 
```

现在，在代码中，定义两个将在单击相应菜单项时触发的事件处理程序：

```
private void ContextMenuItem1Clicked(object sender, RoutedEventArgs e)
{
    // handle the event for the selected ListViewItem accessing it by
    ListViewItem selected_lvi = this.m_list.SelectedItem as ListViewItem;
}

private void ContextMenuItem2Clicked(object sender, RoutedEventArgs e)
{
    // handle the event for the selected ListViewItem accessing it by
    ListViewItem selected_lvi = this.m_list.SelectedItem as ListViewItem;
} 
```

ListView 可以容纳对象，这意味着 selected_lvi 可以是您的对象的类型。只是转换为正确的类型。

我希望这有帮助。

最好的祝福，

麦克风

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-20T14:21:09.610

我找到了一个不依赖鼠标事件处理程序的新解决方案。ContextMenu 有一个“弹出”事件处理程序。

在弹出窗口中，我根据我的上下文添加我需要的相关菜单项。

例子 ：

```
private MenuItem[] standardMenuItems;
private MenuItem[] selectedMenuItems;

public SomePanel() {
    InitializeComponent();

    // These are list of menu items (name / callback) that will be
    // chosen depending on some context
    standardMenuItems = new MenuItem[] { new MenuItem("New", OnNew) };
    selectedMenuItems = new MenuItem[] { new MenuItem("Delete", OnDelete), new MenuItem("Edit", OnEdit) };

    ContextMenu contextMenu = new ContextMenu();

    // begin with "standard items"
    contextMenu.MenuItems.AddRange(standardMenuItems);
    listview.ContextMenu = contextMenu;

    // add the popup handler
    contextMenu.Popup += OnMenuPopup;
}

// Called right before the menu comes up
private void OnMenuPopup(object sender, EventArgs e) {
    ContextMenu menu = sender as ContextMenu;
    if (menu == null)
        return;

    // If an item was selected, display Delete and Edit options
    if (listview.SelectedItems.Count > 0) {
        menu.MenuItems.Clear();
        menu.MenuItems.AddRange(selectedMenuItems);
    }

    // Else display only the New option
    else {
        menu.MenuItems.Clear();
        menu.MenuItems.AddRange(standardMenuItems);
    }
} 
```

我在 C# 和 Winforms 中不够流利，无法确保这种技术没有缺点，但它是依赖鼠标事件的替代方法（如果上下文菜单可以出现在其他键盘或鼠标事件上怎么办？）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-27T05:21:13.047

```
 private void contextMenuStripExport_Opening(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (exportview.SelectedItems.Count <= 0)
        {
            uploadToolStripMenuItem.Visible = false;
            exportToolStripMenuItem.Visible = false;
        }
        else
        {
            uploadToolStripMenuItem.Visible = true;
            exportToolStripMenuItem.Visible = true;
        }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-06-24T19:00:17.430

使用 DevExpress 20.2 核心... Winforms。这类似于在 GridView 中处理菜单项。

```
Private WithEvents _menuViewLabelitem As MenuItem
    Private Sub lvShipTracking_MouseClick(sender As Object, e As MouseEventArgs) Handles lvShipTracking.MouseClick

    If e.Button = MouseButtons.Right Then

        If lvShipTracking.FocusedItem IsNot Nothing AndAlso lvShipTracking.FocusedItem.Bounds.Contains(e.Location) = True Then
            Dim m As ContextMenu = New ContextMenu()
            _menuViewLabelitem = New MenuItem("View Label")

            AddHandler Click, AddressOf Handle_ViewLabel

            m.MenuItems.Add(_menuViewLabelitem)
            m.Show(lvShipTracking, New Point(e.X, e.Y))
        End If
    End If

End Sub

Private Sub Handle_ViewLabel(sender As Object, e As EventArgs) Handles _menuViewLabelitem.Click
    MsgBox("it worked!")
End Sub 
```

# javascript - 在javascript中动态创建变量

> ID：13437899
> 
> 赞同：0
> 
> 时间：2012-11-18T06:05:06.673
> 
> 标签：javascript, variables

我正在尝试创建一个可以动态创建变量以将精灵添加到游戏中的函数。这是我到目前为止所拥有的：

```
function SpriteSetUp(name,src){
    var Sprites = [];

    var i = Sprites.length;

    if(Sprites[Sprites.indexOf(name)] == name){
      return Sprites[Sprites.indexOf(name)];
    }else{
      Sprites[i] = name;
      Sprites[i].src = src;
      return Sprites[Sprites.indexOf(name)];
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:31:16.603

如何创建精灵对象并将它们推送到您的精灵数组中？

```
function SpriteContainer() {
    this.sprites = [];

    this.addSprite= function(name, src) {
        var newSprite = new Sprite(name,src);       
        sprites.push(newSprite);
    }

    function Sprite(name, src) {
        this.name = name;
        this.src = src;
    }
}​ 
```

# regex - 无法找出特定的正则表达式

> ID：13437906
> 
> 赞同：2
> 
> 时间：2012-11-18T06:06:09.307
> 
> 标签：regex

我试图让一个正则表达式在没有运气的情况下工作。我已经能够将表达式限制为具有 10 位数字的字母数字：

`(^[a-zA-Z0-9]{10}+$)`

但是我也试图让它允许 $ 字符在任何位置只有 1 个匹配项。

对于类似的东西，它应该是正确的，`pQp3b8ar$8`或者`k7DdRoB$5W`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T06:11:42.837

三个一般注意事项：

```
^[a-zA-Z0-9$]{10}$
```

*   括号不是必需的
*   `{10}+`没有多大意义，去掉加号（在固定计数上不需要[所有格量词）](http://www.regular-expressions.info/possessive.html)
*   如果您想允许使用美元符号，只需将其添加到字符类

* * *

要只允许一个美元符号，您可以使用上述的扩展版本：

```
^(?=[^$]*\$[^$]*$)[a-zA-Z0-9$]{10}$
```

这`(?=[^$]*\$[^$]*$)`是一个前瞻，读取

```
(?=        # start look-ahead
  [^$]*    #   any number of non-dollar signs
  \$       #   a dollar sign
  [^$]*    #   any number of non-dollar signs
  $        #   the end of the string
)          # end of look-ahead 
```

它允许字符串上的任何字符，但美元只允许一次。

* * *

另一种变体是使用两个前瞻，如下所示：

```
^(?=[^$]*\$[^$]*$)(?=[a-zA-Z0-9$]{10}$).*
```

在这里，您可以使用`.*`匹配字符串的其余部分，因为这两个条件由前瞻检查。例如，这种方法对于[密码复杂性检查](https://stackoverflow.com/questions/3802192/regexp-java-for-password-validation)很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:15:25.463

您可以尝试匹配包含任意数量的字母数字字符的两个字符串的字符串，其中 a`$`位于中间。

```
(^[a-zA-Z0-9]+\$[a-zA-Z0-9]+$) 
```

您始终可以在正则表达式之后检查十的长度。

# javascript - 为 Javascript 访问命名 HTML 元素的属性是什么

> ID：13437908
> 
> 赞同：0
> 
> 时间：2012-11-18T06:07:16.187
> 
> 标签：javascript, html, custom-data-attribute

我应该使用什么 HTML 属性来命名我想通过 Javascript 处理的 HTML 元素。例如，如果我可以使用`name`：

```
<table id="some_table">
  <tr>
    <th name="date">Date</td>
    <th name="time">Time</td>
    <th name="name">Name</td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table> 
```

我可以像这样使用 jQuery 选择它们：

```
$('#some_table th[name=time]') 
```

但是，这是无效的，`name`因为`td`. `id`必须是唯一的，所以我也不能使用它。`class`如果有 CSS 类，可能会影响样式`.time`。也许像`data-name`什么？首选方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:33:11.087

要扩展我的评论，您不需要“为 td 提供一些带有列名的属性”。标准方法是从列名中获取列索引，然后使用该索引检索所有 td。

例如，如果时间是第二列（索引 1），则所有时间 tds 都是：

```
getElementById("some_table").rows[i].cells[1] 
```

（JavaScript 有遍历表的原生方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:13:11.080

您可以通过它们的 id 值、它们的名称、它们的 tagName、它们与其他元素的接近度、它们的任何值，甚至通过选择器字符串来选择元素。没有*单一*的首选方法；这一切都取决于你想要做什么。

在您的情况下，您可以根据需要通过索引选择表格行和单元格。正如您所指出的，您还可以使用数据属性 - 任何一种方法都会呈现您想要的结果，这是一种访问元素的方式。

# vb.net - 打印活动子表单

> ID：13437910
> 
> 赞同：0
> 
> 时间：2012-11-18T06:07:36.310
> 
> 标签：vb.net, printing

我是 VB 新手，今天我编写了第一个使用父表单和子表单的表单。作业要求“打印活动的子表格”，我有点卡住了。到目前为止，这个学期的印刷还没有真正成为作业的重要组成部分，我似乎在书中找不到太多东西。

分配的编码方式是在父表单中有一个菜单条，我在菜单中创建了一个打印点击事件。我想我不确定从哪里开始使它能够仅打印活动的子表单。我打印表单的范围是从 VB 电源包中删除一个打印表单，然后对表单进行编码以打印以进行预览。

有人可以指出我正确的方向吗？任何提示都会很大，所以我至少知道要在书中寻找什么。这是为了家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:16:31.657

我找到了自己问题的答案。这是我使用的代码的片段。我最终将我的打印表单从电源包中保留下来，我刚刚挂断了如何告诉程序找到活动表单。

这是我使用的代码。

```
Private Sub PrintToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PrintToolStripMenuItem.Click, PrintToolStripButton.Click

    If Me.ActiveMdiChild Is Nothing Then
        Return
    End If

    PrintForm1.Form = Me.ActiveMdiChild
    PrintForm1.PrintAction = Printing.PrintAction.PrintToPreview

    PrintForm1.Print()
End Sub 
```

# google-apps-script - 如何将下拉列表中的项目添加到弹性表？

> ID：13437911
> 
> 赞同：0
> 
> 时间：2012-11-18T06:07:40.197
> 
> 标签：google-apps-script

我想使用下面的按钮将下拉列表中的选定项目添加到弹性表中。有人可以编辑我现有的代码以使其工作或向我展示我需要使用的处理程序吗？

我希望将项目放置在弹性表的第一列和第一行中。

链接到包含脚本的电子表格：[这里](https://docs.google.com/spreadsheet/ccc?key=0AgBEgZ2go9LydEM2MmV2dm5BNmtpOTNkRlF3cXg4N0E)

```
//Create button that adds items to flex table   
    var button = app.createButton('+'); 
```

PS：我是航空工程师，不是程序员。我还有很多东西要学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:29:45.683

这是一些示例代码，展示了如何做你想做的事。基本上，创建一个将列表框作为回调元素的处理程序。然后，在处理函数中，使用 e.parameter.listBoxName 引用活动列表框条目以使用它。

```
function doGet() {
  var app = UiApp.createApplication();
  var listBox = app.createListBox();
  listBox.addItem("item 1").addItem("item 2").addItem("item 3").setName("myListBox");

  var handler = app.createServerHandler("buttonHandler");
  // pass the listbox into the handler function as a parameter
  handler.addCallbackElement(listBox);

  var table = app.createFlexTable().setId("myTable");

  var button = app.createButton("+", handler);
  app.add(listBox);
  app.add(button);
  app.add(table);
  return app;
}

function buttonHandler(e) {
  var app = UiApp.getActiveApplication();
  app.getElementById("myTable").insertRow(0).insertCell( 0, 0).setText( 0, 0, e.parameter.myListBox);
  return app;
} 
```

# spring - 如何进行 Spring 自动装配？

> ID：13437913
> 
> 赞同：2
> 
> 时间：2012-11-18T06:08:02.080
> 
> 标签：spring, autowired

```
public class ProcessSchedulerServlet implements javax.servlet.Servlet {
    Timer timer=new Timer();

    @Override
    public void init(ServletConfig arg0) throws ServletException {
        timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            LogProcessorService logProcessorService=new LogProcessorServiceImpl();
            logProcessorService.processPageRequestsLogs();
        }
     }, 60*1000, 120*1000);
} 
```

这很丑陋，无论如何也不起作用。LogProcessorServiceImpl 具有带有 @Autowired 注释的属性。当此代码运行时，这些属性不会自动装配。这可能是意料之中的。

真正的问题是：如何使这个 run() 方法起作用。在我看来，Spring 希望 logProcessorService 自动装配，以便在 LogProcessorServiceImpl 中自动装配属性。

=== 场景 1 ============================================== ==================

```
public void run() {
    final LogProcessorService logProcessorService=null;
    WebApplicationContextUtils.getWebApplicationContext(arg0.getServletContext()).getAutowireCapableBeanFactory().autowireBean(logProcessorService);
    logProcessorService.processPageRequestsLogs();
} 
```

结果：编译时错误：无法引用以不同方法定义的内部类中的非最终变量 arg0

=== 场景 2 ============================================== ==================

```
@Autowired
LogProcessorService logProcessorService;
public void run() {
    logProcessorService.processPageRequestsLogs();
} 
```

结果：运行时错误：logProcessorService 为空；

====解决方案（来自鲍里斯）========================================== ==============

```
public class ProcessSchedulerServlet implements javax.servlet.Servlet {
    Timer timer=new Timer();

    @Autowired
    LogProcessorService logProcessorService;

    @Override
    public void init(ServletConfig arg0) throws ServletException {
        final AutowireCapableBeanFactory autowireCapableBeanFactory=WebApplicationContextUtils.getWebApplicationContext(arg0.getServletContext()).getAutowireCapableBeanFactory();
        autowireCapableBeanFactory.autowireBean(this);

        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                logProcessorService.processPageRequestsLogs();
            }
        }, 60*1000, 120*1000);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:56:42.243

`Timer`如果 Spring 具有[内置的调度支持](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled)，为什么还要使用 servlet 和类：

```
@Service
public class LogProcessorService {

    @Scheduled(fixedRate=120*1000, initialDelay=60*1000)
    public void processPageRequestsLogs() {
        //...
    }

} 
```

而已！没有计时器、runnables 和 servlet。注意：`initialDelay`在 Spring 3.2 M1 中引入（参见[SPR-7022](https://jira.springsource.org/browse/SPR-7022)）。

# c# - Azure 移动服务身份验证 - App.MobileService 不存在

> ID：13437914
> 
> 赞同：5
> 
> 时间：2012-11-18T06:08:07.400
> 
> 标签：c#, windows, azure

我有一个 Windows 8 应用商店应用程序，我想向它添加 Azure 身份验证。我遵循了 MSDN 页面中的示例。但是，以下行给我带来了问题：

```
MobileServiceUser loginResult = await App.MobileService.LoginAsync(result.Session.AuthenticationToken); 
```

错误是：App 不包含 MobileService 的定义。何时将 MobileService 的实例添加到 App 类？

我添加了对 Microsoft.Live 和 Azure 移动服务库的引用。这是整个 Authenticate 函数：

```
private async System.Threading.Tasks.Task Authenticate()
        {
        LiveAuthClient liveIdClient = new LiveAuthClient("<< INSERT REDIRECT DOMAIN HERE >>");

        while (session == null)
        {
            // Force a logout to make it easier to test with multiple Microsoft Accounts
            if (liveIdClient.CanLogout)
                liveIdClient.Logout();

            LiveLoginResult result = await liveIdClient.LoginAsync(new[] { "wl.basic" });
            if (result.Status == LiveConnectSessionStatus.Connected)
            {
                session = result.Session;
                LiveConnectClient client = new LiveConnectClient(result.Session);
                LiveOperationResult meResult = await client.GetAsync("me");
                MobileServiceUser loginResult = await App.MobileService.LoginAsync(result.Session.AuthenticationToken);

                string title = string.Format("Welcome {0}!", meResult.Result["first_name"]);
                var message = string.Format("You are now logged in - {0}", loginResult.UserId);
                var dialog = new MessageDialog(message, title);
                dialog.Commands.Add(new UICommand("OK"));
                await dialog.ShowAsync();
            }
            else
            {
                session = null;
                var dialog = new MessageDialog("You must log in.", "Login Required");
                dialog.Commands.Add(new UICommand("OK"));
                await dialog.ShowAsync();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-17T04:31:18.277

You have to add the class yourself.

On the Azure Mobile Services "Getting Started Page", select "Windows Store", and then "CONNECT AN EXISTING WINDOWS STORE APP" (don't mean to shout, it's literally in all caps on the page like that!).

It will tell you to do the following:

> Add "using Microsoft.WindowsAzure.MobileServices;", then copy and paste the following code into your App.xaml.cs file:
> 
> ```
> public static MobileServiceClient MobileService = new MobileServiceClient(
>     "https://[your website].azure-mobile.net/",
>     "[your key]"
> ); 
> ```

# r - 使用 multiarch 在开发过程中快速安装包

> ID：13437915
> 
> 赞同：3
> 
> 时间：2012-11-18T06:08:14.327
> 
> 标签：r, package, rcpp

我正在开发一个使用带有多个 cpp 文件的 Rcpp 的包“xyz”。当我只更新 R 代码时，我想`R CMD INSTALL xyz`在包目录上运行，而不必重新编译所有未更改的共享库。`--no-multiarch`如果我指定了标志，那效果很好：源目录`src`第一次被编译的对象填充，如果源没有改变，下次它们会被重新使用。`src`然而，在启用多架构的情况下，R 决定制作`src-i386`和的两个副本`src-x86_64`。*总是*重新运行所有编译`R CMD INSTALL`似乎令人困惑。有什么解决方法吗？

 *（我知道有其他方法，例如`devtools::load_all`，但如果可能的话，我宁愿坚持`R CM INSTALL`）。

平台是MacOS 10.7，我有最新版本的R。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T14:04:43.257

我有一个部分答案给你。使用 ccache 提供了一种*非常容易*加速的方法，您可以通过以下方式全局启用所有 R 编译（例如，通过以下方式`R CMD whatever`获取`inline`、`attributes`、`RStudio`使用 ...）`.R/Makevars`：

```
edd@max:~$ tail -10 .R/Makevars

VER=4.6
CC=ccache gcc-$(VER)
CXX=ccache g++-$(VER)
SHLIB_CXXLD=g++-$(VER)
FC=ccache gfortran
F77=ccache gfortran
MAKE=make -j8

edd@max:~$ 
```

它负责编译单元的所有缓存。

现在，这并没有“明确”解决`--no-multiarch`我不喜欢的方面；因为我们在 Linux 上仍然主要是“单一拱门”。这最终会改变，但还没有。然而我怀疑，但通过让编译器决定缓存你也会得到净效果。

其他方面也可以控制，例如`~/.R/check.Renviron`可以用来打开或关闭某些测试。我倾向于让他们都开着——在这里浪费几秒钟比从维也纳得到一个讨厌的图要好。*

# java - errno 优于 java 异常

> ID：13437921
> 
> 赞同：-1
> 
> 时间：2012-11-18T06:08:57.103
> 
> 标签：java, c++, c

试图找出 errno 的优势。

与基于异常的 Java 系统相比，C 方法（使用 errno 或返回值）表示错误有什么优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:15:26.293

除了实现简单之外没有其他优点——但仅适用于单线程代码。 `errno`可以追溯到任何流行语言中都存在异常之前。

**编辑**：如今`errno`实际上评估为提取每个线程错误状态的宏，因此在多线程代码中使用是安全的（感谢 Jesus Ramos 和 Dietrich Epp）。

# java - 为什么在java中嵌套抽象类

> ID：13437922
> 
> 赞同：19
> 
> 时间：2012-11-18T06:09:14.060
> 
> 标签：java, abstract-class

我想知道嵌套抽象类是什么意思？例如，

```
 abstract class A{

          abstract class B{

          }
   } 
```

是否有我们可能需要的用例或场景，例如设计？或者这种模式有什么有用的吗？为什么 Java 允许我们这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T06:20:30.083

在设计中，您希望基类`class A`只为其派生类提供一个接口。这意味着，您不希望任何人实际实例化基类的对象。您只想*向上*转换（隐式向上转换，它为您提供多态行为），以便可以使用它的接口。这是通过使用 abstract 关键字使该类抽象来实现的。另一方面，您只想使用部分功能，`class A`因此您创建`class B`（作为子项）以 **减少系统之间的耦合或实现依赖关系并防止重复**。

但是请记住，当您定义内部类时，没有内部类的代码更易于维护和阅读。当您访问外部类的私有数据成员时，JDK 编译器会在外部类中创建包访问成员函数，以供内部类访问私有成员。这留下了一个安全漏洞。一般来说，我们应该避免使用内部类。仅当内部类仅在外部类的上下文中相关和/或内部类可以设为私有时才使用内部类，以便只有外部类可以访问它。**内部类主要用于实现在外部类的上下文中使用的辅助类，如迭代器、比较器等。关于`abstract class`，对助手来说应该是抽象的**，假设你的*助手*为他们写抽象形式应该太复杂了。

就您而言，我不记得嵌套抽象类的广泛使用，也许在`Swing`世界上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T06:27:01.770

abstract classes are used to provide a partial implementation of a class for inheritance. it allows you to define the scheme of a class without providing the full definiton, so that it can be specified in a child class. it works somewhat like a Interface in that you can perform any operation specified in the abstract class upon an instance of any classes derived from it. Nested abstracted classes are designed to be inherited by other inner classes (even anonymous ones I think) but not by classes defined outside the outermost class.

```
public class HelloEveryone{
    abstract class Hello{
        void SayHello(){
            System.out.println("Hello!");
        }

        abstract void SayHelloAlt();
    }

    public class HelloWorld extends Hello{
        public void SayHelloAlt(){
            System.out.println("HelloWorld!");
        } 
    }

    public class HelloUniverse extends Hello{
        public void SayHelloAlt(){
            System.out.println("HelloUniverse!");
        } 
    }

    void Go(){
        ArrayList<Hello> hellos = new ArrayList<Hello>();
        hellos.add(new HelloWorld());
        hellos.add(new HelloUniverse());

        for (Hello h : hellos){
            h.SayHello();
            h.SayHelloAlt();
        }
    }   

}

static void main(){
    HelloEveryone hello = new HelloEveryone();
    hello.Go();
} 
```

# css - 需要 Bootstrap 的大集合，但需要更多的灵活性

> ID：13437925
> 
> 赞同：0
> 
> 时间：2012-11-18T06:10:20.490
> 
> 标签：css, twitter-bootstrap, styles, css-frameworks

我发现 Bootstrap 不够灵活。例如，没有直接的方法来更改`font`或`line-height`属性。我想要一种单行方法来更改这些属性。

我还能用什么类似于 Bootstrap （我肯定不会那么富有）？我只需要一些可以灵活应对这些变化的样式集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:31:10.793

[您可以更改自定义页面](http://twitter.github.com/bootstrap/customize.html)上的所有排版值（以及几乎所有其他内容）。这些链接位于 Bootstrap 站点大多数页面顶部的工具栏中。

# delphi - 为什么我在调用此终结部分时收到 217 错误？

> ID：13437933
> 
> 赞同：1
> 
> 时间：2012-11-18T06:12:03.553
> 
> 标签：delphi

我收到了一个运行时 217 错误，我已经追踪到我的一个单元的最终确定部分。这是代码：

```
finalization
begin
  for I:= 0 to CacheList.Count - 1 do
  begin
    tempRecord := CacheList.Items[I];
    for k := 0 to length(tempRecord.details) - 1 do
    begin
      tempRecord.Details[k].free;
    end;
    tempRecord.free;
  end;
  CacheList.Free;
end; 
```

和 tempRecord 是：

```
Record = class
 Details : array of CachedDetails;
 key : string;
end;

CachedDetails = class
 EDate : TDateTime;
 A     : Real;
 B     : Real;
 C     : Real;
end; 
```

即使我收到错误，该过程也完全成功。如果我简单地注释掉整个终结，错误就会消失，但我显然不想泄漏内存。我是否不正确地调用免费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:10:14.143

当列表中的免费项目属于列表时，这不是一个好建议。您必须检查它是否是一种 TObjectList 以及该 List 是否拥有这些对象。

或者您从列表中提取项目并释放它。

```
finalization
begin
  while CacheList.Count > 0 do
  begin
    tempRecord := CacheList.Extract( CacheList.First );
    for k := 0 to length(tempRecord.details) - 1 do
    begin
      tempRecord.Details[k].free;
    end;
    tempRecord.free;
  end;
  CacheList.Free;
end; 
```

但是仔细想想，如果您将销毁责任移交给 Record 类并 CacheList 一个 TObjectList 与 OwnsObjects=True 那么您的完成代码将如下所示

```
finalization

CacheList.Free; 
```

# python - 存储这些向量，但在 Python 中使用哪种数据结构

> ID：13437934
> 
> 赞同：2
> 
> 时间：2012-11-18T06:12:19.653
> 
> 标签：python, numpy, matplotlib

以下循环的每次迭代都会生成一个尺寸为 50x1 的向量，以便将来自循环的所有向量共同存储在一个数据结构中。

```
 def get_y_hat(y_bar, x_train, theta_Ridge_Matrix):
     print theta_Ridge_Matrix.shape
     print theta_Ridge_Matrix.shape[0]
     for i in range(theta_Ridge_Matrix.shape[0]):
        yH = np.dot(x_train, theta_Ridge_Matrix[i].T)
        print yH 
```

我应该使用哪种数据结构？我是 Python 新手，但根据我在网上研究的内容，有 2 个选项：numpy 数组和列表列表

稍后我将需要在此方法之外访问每个包含 50 个元素的向量。我将存储 200 到 500 个向量。

有人也可以给我这种数据结构的示例代码吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:16:17.780

我认为将循环中的数据存储在 a 中`dict`，然后将其转换为 a [`pandas.Dataframe`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#intro-to-data-structures)（构建在 numpy 数组之上）应该是一种有效的解决方案，允许您将数据作为一个整体或作为单个向量进一步处理。

举个例子：

```
import pandas as pd
import numpy as np

data = {}
# this would be your loop
for i in range(50):
    data['run_%02d' % i] = np.random.randn(50)
data = pd.DataFrame(data) # sorted keys of the dict will be the columns 
```

您可以将单个向量作为属性或通过键访问：

```
print data['run_42'].describe() # or data.run_42.describe()

count    50.000000
mean      0.021426
std       1.027607
min      -2.472225
25%      -0.601868
50%       0.014949
75%       0.641488
max       2.391289 
```

或进一步分析整个数据：

```
print data.mean()

run_00   -0.015224
run_01   -0.006971
..
run_48   -0.115935
run_49    0.147738 
```

或使用`matplotlib`（当您使用 标记问题时`matplotlib`）查看您的数据：

```
data.boxplot(rot=90) 
plt.tight_layout() 
```

![example_boxplot](../Images/9d718c9c53e12d500d24aa22af677b7a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:21:53.370

你可以简单地做

```
import numpy as np

def get_y_hat(y_bar, x_train, theta_Ridge_Matrix):
     print theta_Ridge_Matrix.shape
     print theta_Ridge_Matrix.shape[0]
     yH = np.empty(theta_Ridge_Matrix.shape[0], theta_Ridge_Matrix[0].shape[0])
     for i in range(theta_Ridge_Matrix.shape[0]):
        yH[i, :] = np.dot(x_train, theta_Ridge_Matrix[i].T)
     print yH 
```

如果您将 存储`theta_Ridge_Matrix`在 3D 数组中，您还可以`np.dot`使用 来完成工作`yH = np.dot(x_train, theta_Ridge_Matrix)`，这将在矩阵的倒数第二个维度上求和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:40:34.167

我建议您使用 numpy 来安装它

在此站点的 Windows 上：

[http://sourceforge.net/projects/numpy/files/NumPy/](http://sourceforge.net/projects/numpy/files/NumPy/)

一些示例如何使用它。

```
import numpy as np 
```

我们将创建一个数组，我们将其命名为 mat

```
>>> mat = np.random.randn(2,3)
>>> mat
array([[ 1.02063865, 1.52885147, 0.45588211],
       [-0.82198131, 0.20995583, 0.31997462]]) 
```

使用动词“T”转置数组

```
>>> mat.T
array([[ 1.02063865, -0.82198131],
       [ 1.52885147, 0.20995583],
       [ 0.45588211, 0.31997462]]) 
```

使用 \verb"reshape" 方法改变任何数组的形状

```
>>> mat = np.random.randn(3,6)
array([[ 2.01139326, 1.33267072, 1.2947112 , 0.07492725, 0.49765694,
         0.01757505],
       [ 0.42309629, 0.95921276, 0.55840131, -1.22253606, -0.91811118,
         0.59646987],
       [ 0.19714104, -1.59446001, 1.43990671, -0.98266887, -0.42292461,
        -1.2378431 ]])
>>> mat.reshape(2,9)
array([[ 2.01139326, 1.33267072, 1.2947112 , 0.07492725, 0.49765694,
         0.01757505, 0.42309629, 0.95921276, 0.55840131],
       [-1.22253606, -0.91811118, 0.59646987, 0.19714104, -1.59446001,
         1.43990671, -0.98266887, -0.42292461, -1.2378431 ]]) 
```

我们可以使用 \verb"shape" 属性来改变变量的形状。

```
>>> mat = np.random.randn(4,3)
>>> mat.shape
(4, 3)
>>> mat
array([[-1.47446507, -0.46316836, 0.44047531],
       [-0.21275495, -1.16089705, -1.14349478],
       [-0.83299338, 0.20336677, 0.13460515],
       [-1.73323076, -0.66500491, 1.13514327]])
>>> mat.shape = 2,6
>>> mat.shape
(2, 6)

>>> mat
array([[-1.47446507, -0.46316836, 0.44047531, -0.21275495, -1.16089705,
        -1.14349478],
       [-0.83299338, 0.20336677, 0.13460515, -1.73323076, -0.66500491,
         1.13514327]]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T06:51:06.143

我无法评论 numpy 数组，因为我以前没有使用过，但是对于使用列表列表，Python 已经内置了支持。

例如这样做：

```
AList = [1, 2, 3]
BList = [4, 5, 6]
CList = [7, 8, 9]
List_of_Lists = []

List_of_Lists.append(AList)
List_of_Lists.append(BList)
List_of_Lists.append(CList)

print(List_of_Lists) 
```

这会产生：

```
[[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

还有其他方法可以创建列表，而不是从一开始就将它们全部初始化，例如：

```
ListCreator = int(input('Input how many lists are needed: '))
ListofLists = [[] for index in range(ListCreator)] 
```

有更多的方法可以解决它，但我不知道你打算如何实施它。

# objective-c - 为什么在我的 Objective-C 代码中间接调用这个 C 数组 NULL？(cocos2d)

> ID：13437935
> 
> 赞同：1
> 
> 时间：2012-11-18T06:12:25.240
> 
> 标签：objective-c, ios, c, arrays, cocos2d-iphone

我有两个 Objective-C 类，比如 ParentLayer 和 ChildLayer。在我的子实例中，我想在我的父实例中访问一个 C-Array。所以我的 cocos2d 代码中有这样的东西：

```
#define kNumOfElements 10
@implementation ParentLayer{
    int array[kNumOfElements];
}
-(id)init{
    //...
    for(int i=0;i<kNumOfElements;i++){
        array[i] = i;
    }
    [self addChild:childLayer];
    [childLayer initializeValues];
    //...
}
-(int *)getArray{
    return array;
}
@end

//meanwhile in my child layer...
//...
-(void)initializeValues{
    int *arr = [(ParentLayer *)[self parent] getArray];
    //NSLog(@"%d",arr[0]);   <------- this gives you bad exec access point, and looks like it's 0x00 for memory address
}
//... 
```

*   这样做的正确方法是什么？
*   也许我不了解 C 数组背后的正确内存管理。我的印象是不需要分配 C 数组，并且它们可以在堆栈上按值传递？
*   另外，我的父实例不应该还在吗？我想如果我把一个 C 数组作为我父母的 ivar，它不应该被破坏

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:26:38.883

In **Objective C**, you can use property for this.

```
#define kNumOfElements 10

@interface  ParentLayer: NSObject
{
    int *array;
}
@property(nonatomic, assign) int *array;
@end

@implementation ParentLayer
-(id)init{
    //...
    self.array =(int*)malloc(sizeof(int) * kNumOfElements);

    for(int i=0;i<kNumOfElements;i++){
        self.array[i] = i;
    }
    [self addChild:childLayer];
    [childLayer initializeValues];
    //...
}
//-(int *)getArray{
//    return array;
//}

-(void)dealloc
{
   if(self.array)
   {
      free(self.array); self.array = NULL;
   }
   [super dealloc];
}    

@end

-(void)initializeValues{

    ParentLayer *player = (ParentLayer *)[self parent] ;
    int *arr = player.array;
    //NSLog(@"%d",arr[0]);   <------- this gives you bad exec access point, and looks like it's 0x00 for memory address
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:23:26.487

似乎无法回复 benzado 的帖子。但取决于如何声明您的对象，它可能会被自动释放。要确保它被保留，请使用 retain 关键字。

```
[obj retain]; 
```

特别是使用 cocos2d 框架，它们有相当多的自动释放对象。通常 initWith 不应该是自动释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T06:35:20.533

> 这样做的正确方法是什么？

理想情况下，您*永远不*应该在拥有它的对象之外传递 C 样式的数组指针。如果一段代码在对象被释放后尝试使用数组，或者写到末尾，或者其他什么东西，你就会面临各种各样的问题。如果您可以确保引用永远不会离开对象的源文件，则更容易保证不会发生这种情况。

> 也许我不了解 C 数组背后的正确内存管理。我的印象是不需要分配 C 数组，并且它们可以在堆栈上按值传递？

事情没那么简单。

C 风格的数组只是一个内存地址。而已。它不携带对象可能保留的其他有用信息，例如元素数。

如果你声明一个这样的数组：

```
int array[100]; 
```

然后根据您放置声明的位置，在堆栈或堆中分配内存。如果它是函数或方法中的局部变量，则它在堆栈上。如果它在全局范围内或对象的成员变量中，则它在堆上。

此外，如果它是一个实例变量，您实际上是在分配用于保存该对象的内存块中留出 100 个整数的内存。这不是一个单独的东西。

由于`array`只是一个内存地址，因此您基本上是通过引用传递它。从技术上讲，您是按值传递地址，但是任何查看相同地址的人都会看到您对内存所做的任何更改，因此它的作用类似于通过引用传递。

> 另外，我的父实例不应该还在吗？我想如果我把一个 C 数组作为我父母的 ivar，它不应该被破坏

按照您对其进行编码的方式，只要父对象在附近，该数组就会有效。一旦父级被释放，该内存就可以被回收。但是，由于`array`变量只是一个内存地址，因此您无法知道它指向的数据是否有效。这是使用 C 风格的数组而不是对象的危险。

由于最后一行是给你 NULL (0) 地址，我猜那`[self parent]`是 nil。那会在`arr`; 当你尝试取消引用 NULL 时，你会得到一个异常。

# jquery - slideUp 单个元素

> ID：13437942
> 
> 赞同：1
> 
> 时间：2012-11-18T06:13:22.390
> 
> 标签：jquery, ajax, forms

我正在使用 jQuery/Ajax 脚本提交表单而不重新加载页面。我在页面上有多个表单，它们都有相同的类（并且没有 id）。这可以很好地使用以下方式提交表单：

```
 $('document').ready(function()
{
    $('.form').ajaxForm( {
        success: function() {
            //$('.form').addClass("clicked");
            //$(this).slideUp('fast');
        }
    });
}); 
```

但是一旦我想在提交成功后做某事，似乎就没有办法引用提交的表单。使用 this 运算符是有意义的，但它不起作用。我想做这样的事情：

```
$(this).slideUp('fast'); 
```

根据提交的表单分别为每个元素。（使用 .form 作为选择器不起作用，因为它隐藏了所有表单）。

我尝试向表单添加一个类（尽管似乎也无法引用正确的元素），然后用于调用 slideUp 函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:21:32.927

您使用的 ajaxForm 插件在成功回调中提供了对表单的引用：

```
success: function (responseText, statusText, xhr, $form) {
    $form.slideUp("fast");
} 
```

文档：http: [//jquery.malsup.com/form/#ajaxForm](http://jquery.malsup.com/form/#ajaxForm)

如果您没有使用此插件，则必须自己维护该引用。`this`一种流行的方法是通过将其分配给以下内容来保留对适当的引用`self`：

```
$(".form").on("submit", function () {
    var self = this;
    $.ajax({
        success: function () {
            $(self).slideUp();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T06:56:06.420

该插件为您提供了另一种方法 - `ajaxSubmit()`- 可以按如下方式使用：

```
$('.form').submit(function() { 
    var $form = $(this);
    $form.ajaxSubmit({
        success: function() {
            $form.addClass("clicked").slideUp('fast');//or whatever
        }
    });     
    return false; //suppress natural form submission
}); 
```

# jquery-mobile - 如何使用 Optimizely 测试使用 jQuery Mobile 构建的移动 Web 应用程序？

> ID：13437944
> 
> 赞同：1
> 
> 时间：2012-11-18T06:14:16.263
> 
> 标签：jquery-mobile, optimizely

我用 jQuery Mobile 构建了一个移动网络应用程序。在 index.php 文件中，有多个页面声明为 data-role="some_page_name"，它们的 url 类似于 index.php#my_profile。

现在我想使用[Optimizely](http://www.optimizely.com)在其中一个页面上进行 A/B 测试。我创建了一个变体，让它将 index.php#my_profile 重定向到一个新页面，url：index_b.php#my_profile。但我无法将此页面链接到其他非测试页面。

例如，如果我有这样的链接`index_b.php#my_profile`：

```
<a href="index.php#favorite">My Favorite</a> 
```

它无法链接到 index.php 中的收藏页面。有时如果是这样，您导航到其他页面，您将永远不会回到 B 版本/变体。

看起来 Optimizely 无法适应 jQuery Mobile 多页面结构。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T00:33:40.853

您可以尝试在 href 链接中添加更多标签，例如，

```
<a href="index.php#favorite" rel="external">My Favorite</a>
<a href="index.php#favorite" data-ajax='false'>My Favorite</a> 
```

您还可以使用带有 http:// 前缀的完整链接路径。

```
<a href="http://yourdomain/yourpath/index.php#favorite">My Favorite</a> 
```

另一个选项是添加链接单击 JavaScript 方法。您可以控制 JavaScript 内容。

在优化或视觉网站优化器上应该没问题。

# c# - 清理 C# Visual Studio 2010 的 bin obj 文件夹

> ID：13437947
> 
> 赞同：2
> 
> 时间：2012-11-18T06:15:16.463
> 
> 标签：c#, visual-studio-2010

有没有办法清理所有依赖项和应用程序的 bin/ 和 obj/ 文件夹？我正在努力更改一些引用，我必须手动从驱动器中为每个依赖项清理它。这是一个痛苦的过程。Visual Studio 2010 中是否有一个选项可以在我构建解决方案之前清理这些文件夹。清理解决方案不会清理复制的 dll，而只会清理应用程序可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T15:30:54.390

从以下位置导入 Get-Directory： [https ://stackoverflow.com/a/3270377/89584](https://stackoverflow.com/a/3270377/89584)

```
Function Get-Directory([string[]]$path, [string[]]$include, [switch]$recurse) 
{ 
    Get-ChildItem -Path $path -Include $include -Recurse:$recurse | `
         Where-Object { $_.PSIsContainer } 
} 
```

然后做：

```
Get-Directory -Path SOLUTION_DIR -Include obj,bin -Recurse \
| Remove-Item -Force -Recurse 
```

SOLUTION_DIR 是您的解决方案根目录所在的位置。

你可以很容易地把它变成一个构建事件。

# c# - WPF 在内容流中动态放置图像（图像呈现在窗口中间）

> ID：13437949
> 
> 赞同：0
> 
> 时间：2012-11-18T06:15:25.100
> 
> 标签：c#, wpf

我正在尝试动态放置内容，其中一个项目是图像。我可以让图像加载到网格中，但是虽然标签都很好地对齐，但图像出现在屏幕中间。我不相信我做对了，我想知道我是否应该使用列表？但是，我愿意接受建议。目前，我正在编写具有足够左边距空间的标签来分隔它们，但是当图像呈现时，它会出现在窗口的中间。

```
...    
Uri imguri = new Uri("/MyName;Component/Resources/myimage.png", UriKind.RelativeOrAbsolute);
BitmapImage ni = new BitmapImage(imguri);
gridEvents.Children.Add(new Label { Content = "Travel:", Margin = new Thickness(300, 0, 0, 0), FontSize = 18 });
gridEvents.Children.Add(new Image() { Source = ni, Height = 15, Width = 15 });
... 
```

我相信这个问题类似于我用硬编码边距强制标签位置的方式。我是 wpf 的新手，所以如果你知道更好的方法 - 我已经准备好学习了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:30:47.657

图像出现在网格中间是因为您没有设置任何定位属性，例如边距或对齐。位于网格中心的位置只是默认行为。

其实你最好使用ItemsControl 或ListView。要更好地理解 ItemsControl，请阅读[本](http://drwpf.com/blog/itemscontrol-a-to-z/)系列文章。

# c - 将文件输入存储到 C 中的结构中

> ID：13437952
> 
> 赞同：2
> 
> 时间：2012-11-18T06:16:14.527
> 
> 标签：c, file, file-io, input, struct

我可以导入文件并阅读它，但我认为它不会保存到结构中。我想弄清楚如何将它保存在结构中，以便我可以搜索/删除联系人。不幸的是，冗长的代码如下：

```
#include <stdio.h> 
#include <string.h>
#include <stdlib.h>
#include <conio.h>
#define BUFFSIZE 500
//Structure for contacts. These are now pointers.
typedef struct friends_contact{

  char *First_Name;
  char *Last_Name;
  char *home;
  char *cell;
}fr;
//Function declarations 
void menu(fr*friends ,int* counter,int i,char buffer[]);
void setFirst(fr*,int *,int i,char buffer[]);
char getFirst(fr*,int i);
void setLast(fr*friends, int* counter, int i,char buffer[]);
char getLast(fr*friends , int i);
void setHome(fr*friends, int* counter, int i,char buffer[]);
char getHome(fr*friends, int i);
void setCell(fr*friends, int* counter, int i,char buffer[]);
char getCell(fr*friends, int i);
void add_contact(fr*friends,int* counter,int i,char buffer[]);
void print_contact(fr*friends ,int* counter, int i,char user_entry3[50]);
char delete_contact(fr*friends ,int* counter, int i);
int show_contact(fr*friends ,int* counter, int i);
void file(fr*friends ,int* counter, int i,char user_entry3[50]);
void file2 (fr*friends ,int* counter, int i,char buffer[],FILE*read);

int main() 
{
  fr friends[5];
  char buffer[BUFFSIZE];
  int counter=0;
  int i=0;

  menu(friends, &counter,i,buffer);

  getch();
  return 0;
}
//Menu function
void menu(fr*friends,int* counter, int i,char buffer[]) 
{
 int user_entry=0;
 int user_entry1=0;
 int user_entry2=0;
 char user_entry3[50]={'\0'};
 FILE *read;
 printf("Welcome! Would you like to import a file? (1)Yes or (2) No");
 scanf("%d",&user_entry1);
 if(user_entry1==1)
   {
    printf("Please enter a file name");
    scanf("%s",user_entry3); 
    read=fopen(user_entry3,"r");
   }else;

 do{
  int result;

  printf("\nPhone Book Application\n");
  printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show  phonebook\n5)Exit\n");   
  scanf("%d", &user_entry);
if(user_entry==1)
  {
    add_contact(friends,counter,i,buffer);
  }
if(user_entry==2)
  {
    delete_contact(friends ,counter,i);
  } 
if(user_entry==3)
  {
    result=show_contact(friends ,counter,i);
    if(result==0){
                  printf("\nName not Found\n");
                  }else{
                        result;
                        }

 }                  
if(user_entry==4)
 {
   print_contact(friends, counter,i,user_entry3);
   if(user_entry1==1)
     {
   file2(friends ,counter,i,buffer,read);
      }else;
 } 

}while(user_entry!=5);
  if(user_entry==5)
    {
      printf("Would you like to save entries to a file? (1)yes or (2) no");
      scanf("%d",&user_entry2);
      if(user_entry2 == 1)
        {
          printf("Please name your file");
          scanf("%s",user_entry3); 
          file(friends, counter,i,user_entry3);
          printf("Goodbye!"); 

     }else if(user_entry2 == 2)
        {
     printf("Goodbye!"); 
        }

    }

 }
//Start of Set functions. Each entry has its own set function that gathers the data
//For each interaction, we have a buffer and a malloc.
void setFirst(fr*friends, int* counter, int i,char buffer[]) 
{
  printf("Enter a first name \n");
  scanf("%s",buffer);

  friends[*counter].First_Name=malloc(BUFFSIZE*strlen(buffer));
  strcpy(friends[*counter].First_Name, buffer);

}

void setLast(fr*friends, int* counter, int i,char buffer[]) 
{

  printf("Enter a last name \n");
  scanf("%s",buffer);

  friends[*counter].Last_Name=malloc(BUFFSIZE*strlen(buffer));
  strcpy(friends[*counter].Last_Name, buffer);
}
void setHome(fr*friends, int* counter, int i,char buffer[]) 
{

  printf("Enter a home number \n");
  scanf("%s",buffer);

  friends[*counter].home=malloc(BUFFSIZE*strlen(buffer));
  strcpy(friends[*counter].home, buffer);
}
void setCell(fr*friends, int* counter, int i,char buffer[]) 
{

  printf("Enter a cell number \n");
  scanf("%s",buffer);

  friends[*counter].cell=malloc(BUFFSIZE*strlen(buffer));
  strcpy(friends[*counter].cell, buffer);
}
//Start of Get functions. Each function sends the data to the executing function.
char getFirst(fr*friends , int pos) 
{

   printf("%s ", friends[pos].First_Name);
   return *friends[pos].First_Name;
}

char getLast(fr*friends , int pos)
{

   printf("%s\n", friends[pos].Last_Name);
   return *friends[pos].Last_Name;

}

char getHome(fr*friends , int pos) 
{

   printf("(Home) ""%s\n", friends[pos].home);
   return *friends[pos].home;
}

char getCell(fr*friends , int pos) 
{

   printf("(Cell) ""%s\n", friends[pos].cell);
   return *friends[pos].cell;
}
//This function allows for the all the set functions to be added.
void add_contact(fr*friends,int* counter,int i,char buffer[]) 
{
   setFirst(friends,counter,i,buffer); 
   setLast(friends,counter,i,buffer);
   setHome(friends,counter,i,buffer);
   setCell(friends,counter,i,buffer);
   (*counter)++;
}

//This is used to delete a name out of the book.
char delete_contact(fr*friends ,int* counter, int i)
{
   char name_search[50]={'\0'};
   char Delete[5]={'\0'};

   printf("Search by last name\n");
   scanf("%s",name_search);//Name entry
   for(i=0;i<*counter;i++)
      {
       if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
         {                                       
          strcpy(friends[i].Last_Name,Delete);
         }
       }
    //Freeing up memory.
    free(friends[i].First_Name);
    free(friends[i].Last_Name);
    free(friends[i].home);
    free(friends[i].cell);   

    printf("\nName(s) has been deleted\n");             
}
//This function prints out all the contact information
void print_contact(fr*friends ,int* counter, int i,char user_entry3[50]) 
{
    for( i = 0; i < *counter; i++)
    if (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name)&&        strlen(friends[i].home)&& strlen(friends[i].cell ))
       {

          getFirst(friends, i);
          getLast(friends, i);
          getHome(friends, i);
          getCell(friends, i);
        }
}
//Displays the contact in which you are searching for.
int show_contact(fr*friends ,int* counter, int i) 
{  
   char name_search2[50]={'\0'};
   int flag=0;
   printf("Please enter a last name\n");
   scanf("%s",name_search2);
   for(i=0;i<*counter;i++)
      {
      //If the name is found, it reaturns the contact info.Now works for duplicate last names.
        if(strcmp(name_search2,friends[i].Last_Name)==0)
          {
             (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name)&& strlen(friends[i].home)&& strlen(friends[i].cell ));

            getFirst(friends, i);
            getLast(friends, i);
            getHome(friends, i);
            getCell(friends, i);
            flag++;
          }
     }         

    return flag;
}    
void file(fr*friends ,int* counter, int i,char user_entry3[5])
{
FILE*fp;
char flag2;
fp=fopen(user_entry3,"w");

for( i = 0; i < *counter; i++)
   {
     if (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name)&&    strlen(friends[i].home)&& strlen(friends[i].cell ))
        {

        fprintf(fp,"\n""%s ",friends[i].First_Name);
        fprintf(fp,"%s ""\n",friends[i].Last_Name);
        fprintf(fp,"<Home>""%s""\n",friends[i].home);
        fprintf(fp,"<Cell>""%s""\n",friends[i].cell);

        }
  }
   fclose(fp);
}

void file2(fr*friends ,int* counter, int i,char buffer[],FILE*read)
{
  fseek(read, 0, SEEK_SET); 

  while (fscanf(read,"%s", buffer) != EOF) 
     {
       friends[*counter].Last_Name=malloc(BUFFSIZE*strlen(buffer));

       strcpy(friends[*counter].Last_Name, buffer);

       printf("%s\n",friends[*counter].Last_Name);

      }

} 
```

我知道代码并不完美，并且可能有一些与这个问题无关的缺陷，但我已经尝试了一段时间来解决这个问题。如果有人可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:44:43.173

您正在将文件读入函数 file2 中的朋友结构中，但仅当输入的选项为 4 时才调用 file2 - 在以下代码段中。

```
if(user_entry==4)
 {
   print_contact(friends, counter,i,user_entry3);
   if(user_entry1==1)
     {
   file2(friends ,counter,i,buffer,read);
      }else;
 } 
```

在搜索或删除（user_entry = 2 或 user_entry = 3）的情况下，文件永远不会被读入结构，因此会出现问题。对于这些情况，您还需要确保调用 file2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:35:24.670

`r+`您可以在模式下打开文件。如果您的代码需要在内存中的数据和磁盘中的数据之间进行同步，您可以通过在此模式下打开文件并根据需要更新文件来实现，例如当用户完成输入时。

# node.js - Node.js 不推送所有通知

> ID：13437957
> 
> 赞同：2
> 
> 时间：2012-11-18T06:17:40.373
> 
> 标签：node.js, push-notification

我刚开始学习 Node.js，因为我发现它是创建推送通知服务器的正确工具。

所以我在这里得到了这个狡猾的脚本，我使用一些互联网教程一起破解了：

```
// ------------------------------------------------------------
// HTTP Server stack using Node.js
// ------------------------------------------------------------

// import the HTTP module that ships with Node.js 
var http = require("http");
var url = require("url");

// push notification helper modules
var crypto = require("crypto");
var tls = require("tls");
var fs = require("fs");
var stream = null;

process.chdir(__dirname);

//connect(function(){});

function connect(next)
{
    filepath = 'cert_and_key_dev.pem';  
    var certPem = fs.readFileSync(filepath, encoding='ascii');
    var keyPem = fs.readFileSync(filepath, encoding='ascii');
    var options = { key: keyPem, cert: certPem };

    var apnshost_dev = 'gateway.sandbox.push.apple.com';
    var apnsport = 2195;

    stream = tls.connect(apnsport, apnshost_dev, options, function() {
        // connected
        console.log('I am connected to APNS, WOO HOO!');
        //next(!stream.authorized, stream);

        pushTest();
    });
}

function pushTest()
{
    var pushnd = { aps: { alert: 'This is a test' }, customParam: { foo: 'bar' } } // aps is required
    var hextoken = '...my push token here....';

    // construct the protocol data unit
    var payload = JSON.stringify(pushnd);
    var payloadlen = Buffer.byteLength(payload, 'utf-8'); // encoded UTF-8 string length, max 255 bytes
    var tokenlen = 32;
    var buffer = new Buffer(1 + 4 + 4 + 2 + tokenlen + 2 + payloadlen);
    var i = 0;
    buffer[i++] = 1; // command
    var msgid = 0xbeefcace; // message identifier, can be left 0
        buffer[i++] = msgid >> 24 & 0xFF;
    buffer[i++] = msgid >> 16 & 0xFF;
        buffer[i++] = msgid >> 8 & 0xFF;
    buffer[i++] = msgid & 0xFF;

    // expiry in epoch seconds (1 hour)
    var seconds = Math.round(new Date().getTime() / 1000) + 1*60*60; // expire in epoch seconds (1 hour)
    buffer[i++] = seconds >> 24 & 0xFF;
    buffer[i++] = seconds >> 16 & 0xFF;
    buffer[i++] = seconds >> 8 & 0xFF;
    buffer[i++] = seconds & 0xFF;

    buffer[i++] = tokenlen >> 8 & 0xFF; // token length
    buffer[i++] = tokenlen & 0xFF;
    token = hextobin(hextoken);
    token.copy(buffer, i, 0, tokenlen);
    i += tokenlen;

    buffer[i++] = payloadlen >> 8 & 0xFF; // payload length
    buffer[i++] = payloadlen & 0xFF;

    payload = Buffer(payload);
    payload.copy(buffer, i, 0, payloadlen);

    var j = 0;

    // try sending multiple copies of the notification in one stream
    for(var j = 0; j < 5; j++)
    {
        var writable = stream.write(buffer); // write push notification to socket stream (send it out)
    }

    console.log('Test notification sent!');

    // Handling error messages
    stream.on('data', function(data) {
        var command = data[0] & Ox0FF // always 8
        var status = data[1] & 0x0FF // error code
        var msgid = (data[2] << 24) + (data[3] << 16) + (data[4] << 8) + (data[5]);

        console.log(command + ':' + status + ':' + msgid);
    });
}

function hextobin(hexstr)
{
    buf = new Buffer(hexstr.length / 2);

    for(var i = 0; i < hexstr.length/2; i++)
    {
        buf[i] = (parseInt(hexstr[i * 2], 16) << 4) + (parseInt(hexstr[i * 2 + 1], 16));
    }

    return buf;
}

function start(route, handle)
{
    function onRequest(request, response) 
    {
        // using url module to handle routing and mapping
        // of each request
        var pathname = url.parse(request.url).pathname;
        console.log("Request for " + pathname + " received.");
        route(handle, pathname, response, request);

        /*
        request.setEncoding("utf8");

        // POST data callback function for each chunk of data
        request.addListener("data", function(postDataChunk) {
            postData += postDataChunk;
            console.log("Received POST data chunk '" +
            postDataChunk + "' .");
        });

        // POST data callback function for completion of data download
        request.addListener("end", function() {
            route(handle, pathname, response, postData);
        });

        // depedency injective response object to allow
        // request handler to use it
        route(handle, pathname, response);
        */
    }

    http.createServer(onRequest).listen(8888);
    console.log("Server has started.");
}

exports.start = start;
exports.connect = connect; 
```

在 for 循环中：

```
// try sending multiple copies of the notification in one stream
for(var j = 0; j < 5; j++)
{
    var writable = stream.write(buffer); // write push notification to socket stream (send it out)
} 
```

我最多只能收到 5 个通知中的 2 个。

我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T17:53:33.993

Apple 会检查推送消息是否重复，以防止垃圾邮件。
尝试更改消息内容。

# php - 使用 mysqli 插入 mysql 数据库时遇到问题

> ID：13437969
> 
> 赞同：0
> 
> 时间：2012-11-18T06:20:38.930
> 
> 标签：php, mysql, mysqli

我无法让这个工作。我搜索了这个网站并找到了许多其他关于此的帖子，但似乎没有一个有效。

这是我的简单代码：

```
if (isset($_POST['submit']))
{
$startDate = strtotime($_POST['from']);
$endDate = strtotime($_POST['to']);

for($i = $startDate; $i <= $endDate; $i = strtotime('+1 day', $i))
{
$date = date('Y-m-d',$i);
//echo $date . "<br>";
$sql = ("INSERT INTO `calendar` (`Cal_Date`) VALUES (`$date`)");
}
   if(!$result = $db->query($sql))
   {
   die('There was an error running the query [' . $db->error . ']');
   }

} 
```

表格同样简单，日期以“YYYY-MM-DD”格式输入。我想要做的是用一系列日期填充我的数据库表。唯一发生的事情是插入了一行，它是“0000-00-00”，我怀疑这是因为我将该列设置为日期，而不是空值。当我回显结果时，一切正常，只是将其放入数据库似乎不起作用。我尝试了许多其他组合，`INSERT`包括：

```
$sql = $db->query("INSERT INTO `calendar` (`Cal_Date`) VALUES (`$date`)"); 
```

（$db 来自 db_connect.php ）

```
$sql = ("INSERT INTO `calendar` (`Cal_Date`) VALUES (`{$date}`)");

$sql = ("INSERT INTO calendar ('Cal_Date') VALUES ($date)");

$sql = ("INSERT INTO `calendar` (`Cal_Date`) VALUES (`$date`)"); 
```

...我认为甚至还有其他几个。我知道我的 db_connect.php 正在连接到数据库，因为我得到了：

```
$sql = ("SELECT * FROM calendar"); 
```

在页面下方，它工作正常。我已经这样做了太久了，我确信我只是错过了一些明显的东西。我会很感激你的反馈。

mySQL 5.5.24 PHP 5.3.13 Apache 2.2.22

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:37:54.880

尝试不使用 ` 以获得您的价值，然后返回 php...，如下所示：

```
$sql = ("INSERT INTO calendar (`Cal_Date`) VALUES (".$date.")"); 
```

如果这没有帮助，请回显 SQL 并让我们确切知道构建的 SQL 是什么，这将为您提供更快的修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:23:50.370

[字符串文字](http://dev.mysql.com/doc/en/string-literals.html)应该用单引号`'`（或双引号`"`，如果[`ANSI_QUOTES`](http://dev.mysql.com/doc/en/server-sql-mode.html#sqlmode_ansi_quotes)禁用）字符引用，而不是反引号（在 MySQL 中仅用于引用 SQL 标识符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T13:39:25.080

首先，无需将字符串包裹在圆括号中！

这应该可以解决问题！

```
$sql = "INSERT INTO `calendar` (`Cal_Date`) VALUES ('$date')"; 
```

一个更好但更难理解的解决方案（就引号而言）：

```
$sql = 'INSERT INTO `calendar` (`Cal_Date`) VALUES (\''.$date.'\')'; 
```

这个也应该工作：

```
$sql = "INSERT INTO calendar (Cal_Date) VALUES ('$date')"; 
```

**注意：反引号（`）仅用于字段名和表名，并且仅当您的表名或字段名中有空格时才需要！**

使用单引号或双引号来分隔 SQL 中的字符串、日期、字符、varchars，而布尔值、空值和数值则不使用任何东西！

希望这有帮助！

# javascript - Javascript 和 Java servlet 中的 URL 编码

> ID：13437979
> 
> 赞同：0
> 
> 时间：2012-11-18T06:23:39.310
> 
> 标签：javascript, url-encoding

我有一个 Java 脚本，它应该使用 url 编码调用和传递参数 servlet。java 脚本从 html 表单中获取参数。我已经这样做并验证了输入。我不确定如何在 java 脚本中编码 url。

参数为 title=XXXX 和 type=YYYY。servlet url 是 www.xxxx:Port#/folder/servlet。我有代码可以从 servlet 中的 url 检索参数。我想知道如何使用 url 编码来构建 url。

此外，Javaservlet 应该检索参数并调用 perl 函数。再次在这里使用 url 编码。我很感激这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:34:00.223

看看这个答案：[Encode URL in JavaScript?](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)
例子：

```
var myOtherUrl = 
       "http://example.com/index.html?url=" + encodeURIComponent(myUrl); 
```

# javascript - 使用 AngularJS 创建幻灯片效果？

> ID：13437981
> 
> 赞同：2
> 
> 时间：2012-11-18T06:24:07.067
> 
> 标签：javascript, angularjs

我是 AngularJS 框架的新手，我正在尝试获得与 jQuery 提供的相同的幻灯片效果，我用谷歌搜索了太多，但没有找到任何相关的东西。因此，如果有人对此有任何想法，请指导我实现这一目标，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:10:49.550

如果您想要动画 DOM 对象插入（检查 animate 指令），您可能会发现[AngularUI很有用。](http://angular-ui.github.com/)

- - 更新 - - -

较新版本的 Angular（我相信是 1.1.4+）添加了一个 ngAnimate 指令，专门用于向 Angular 应用程序添加 CSS 动画。检查官方文档（[http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngAnimate](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngAnimate)）或[http://www.nganimate.org/](http://www.nganimate.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T19:06:28.580

您可以（并且应该）使用 jQuery 幻灯片，但将其包装在 angular 指令中。检查有关指令的文档以及[此视频](http://www.youtube.com/watch?v=iB7hfvqyZpg&feature=youtu.be)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T19:19:54.993

一般来说，你不应该直接在 Angular 中使用 jQuery，即使在指令中也是如此。这是最后的手段。这是关于 SO 的另一篇关于该主题的好帖子。

[“在 AngularJS 中思考”如果我有 jQuery 背景？](https://stackoverflow.com/questions/14994391/how-do-i-think-in-angularjs-if-i-have-a-jquery-background)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-04T08:28:59.327

在我看来 ui.bootstrap 涵盖了这个问题，例如这个基本示例[http://surecode.me](http://surecode.me)

# linux - 将传递给 shell 脚本的参数 ${1} 保存在 shell 脚本中的变量中

> ID：13437982
> 
> 赞同：2
> 
> 时间：2012-11-18T06:24:26.793
> 
> 标签：linux, shell, unix

我想将`${1}`传递给我的脚本的参数（`${1}`是一个文件路径）保存到同一个 shell 脚本中的一个字符串变量中，然后`echo`使用路径`echo variable`而不是`echo ${1}`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T06:25:54.207

Simply try doing this :

```
myvar="$1"
echo "$myvar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T08:37:58.997

将参数保存到变量“var”::

```
local var="${1}" 
```

回显变量 ::

```
echo "${var}" 
```

# c - What is this C syntax?

> ID：13437984
> 
> 赞同：2
> 
> 时间：2012-11-18T06:24:29.483
> 
> 标签：c, bit-fields

I have no idea what to call it, so I have no idea how to search for it.

`unsigned int odd : 1;`

Edit:

To elaborate, it comes from this snippet:

```
struct bitField {
    unsigned int odd : 1;
    unsigned int padding: 15; // to round out to 16 bits
}; 
```

I gather this involves bits, but I'm still not all the way understanding.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T06:29:49.220

它们是位域。`odd`并将`padding`存储在一个`unsigned int`（16 位）中，其中`odd`将占用最低位和`padding`高 15 位`unsigned int`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T06:27:00.897

It's a bitfield - Check the [C FAQ](http://c-faq.com/struct/bitfield0.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:11:23.003

它的：

*   1 位“奇数”（例如 1）
*   15 位“填充”（例如 0000000000000001）
*   和（可能）任何其他位使`unsigned int`. 在现代 32 位平台中，这是 32 位，您会在内存中看到另外 16 个 0（但不在结构中）。（在这种情况下`sizeof`返回 4）

位域可以节省内存，但可能会为计算添加指令。在某些情况下，编译器可能会忽略您的位域设置。您不能对编译器将如何选择实际布局您的位字段做出任何假设，这可能取决于您平台的字节序。

我使用位域的主要目的是当我知道我将对数据进行大量复制，而不必对位域中的特定字段进行大量计算或引用时。

# jquery - Updating jQuery version Volusion

> ID：13437985
> 
> 赞同：0
> 
> 时间：2012-11-18T06:24:55.317
> 
> 标签：jquery, volusion

Does anyone know how to update the version of jQuery being used on a Volusion site? Volusion runs a lot of ASP code that's server side so it's generated dynamically but currently they are running:

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

It's way outdated and preventing me from doing a lot of things. Just curious if anyone knows of a workaround since I can't find out how to edit it and Volusion support can't give me an answer. Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:50:56.123

您无法更改 jQuery 版本，因为它是由 Volusion 硬编码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:29:24.273

您可以在一个页面上运行多个版本的 jquery，我必须在 volusion 网站上一直这样做。

阅读 4 年前的这篇文章[http://blog.nemikor.com/2009/10/03/using-multiple-versions-of-jquery/](http://blog.nemikor.com/2009/10/03/using-multiple-versions-of-jquery/)

希望能帮助到你！

# asp.net - Property value returned by DirectorySearcher and SearchResponse are of different type System._comobject and Byte array

> ID：13437986
> 
> 赞同：1
> 
> 时间：2012-11-18T06:25:21.883
> 
> 标签：asp.net, c#-4.0, active-directory, ldap, openldap

I am working on a website to manage active directory. I want to check that whether user has permission to change password or not. So I have to find **"ntSecurityDescriptor"** property value after that I have to cast it into IADsSecurityDescriptor.

Now if I use DirectorySearcher class then property value is of type **System._ComObject** and easily casted to **IADsSecurityDescriptor**. But when I use LdapConnection and SearchResponse I get property value of type.

```
byte[] array which is unale to cast to IADsSecityDescriptor. 
```

I am getting error

```
Unable to cast System.Byte[] to IADsSecurityDescriptor 
```

Is there some problem with SearchResponse or I have use some kind of casting technique to achieve this? I have some problem to use DirectoryEntry class so I can only use LdapConnction class.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:38:43.017

我终于找到了我的问题的答案。此类将 byte[] 转换为有效的安全描述符 comobject。

```
ActiveDs.ADsSecurityUtility secUtility = new ActiveDs.ADsSecurityUtility();
ActiveDs.IADsSecurityDescriptor sd = (IADsSecurityDescriptor)secUtility.ConvertSecurityDescriptor((byte[])attribute[0], (int)ADS_SD_FORMAT_ENUM.ADS_SD_FORMAT_RAW, (int)ADS_SD_FORMAT_ENUM.ADS_SD_FORMAT_IID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:34:48.140

我认为您应该努力尝试使用 DirectoryEntry 方法。您将**很难**尝试使用 LdapConnection 操作 AD 对象。

如果你想继续 Ldap 的方式，在快速搜索之后，我会尝试一下原生的（这个词说明了一切）自动化功能。里面似乎有一些有趣的东西，比如：

ConvertStringSecurityDescriptorToSecurityDescriptor

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa376401%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376401%28v=vs.85%29.aspx)

```
 C# syntax

[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("Advapi32.dll", CharSet=CharSet.Unicode, SetLastError=true)]
internal static extern bool ConvertStringSecurityDescriptorToSecurityDescriptor(string StringSecurityDescriptor, uint StringSDRevision, ref IntPtr SecurityDescriptor, IntPtr SecurityDescriptorSize); 
```

# php - how to count files in a folder php

> ID：13437989
> 
> 赞同：2
> 
> 时间：2012-11-18T06:25:36.717
> 
> 标签：php, directory, subdirectory, dir

this code showing directory only but i want to show directory with counts files inside the folder

example count files inside the folder

*   FolderA (2 Files Found)
*   FolderB (19 Files Found)
*   FolderD (1 Files Found)
*   FolderD (13 Files Found)

    ```
    function folderlist(){
      $startdir = './';
      $ignoredDirectory[] = '.'; 
      $ignoredDirectory[] = '..';
       if (is_dir($startdir)){
           if ($dh = opendir($startdir)){
               while (($folder = readdir($dh)) !== false){
                   if (!(array_search($folder,$ignoredDirectory) > -1)){
                     if (filetype($startdir . $folder) == "dir"){
                           $directorylist[$startdir . $folder]['name'] = $folder;
                           $directorylist[$startdir . $folder]['path'] = $startdir;
                       }
                   }
               }
               closedir($dh);
           }
       }
    return($directorylist);
    }

    $folders = folderlist();
        foreach ($folders as $folder){
        $path = $folder['path'];
        $name = $folder['name'];

    echo '<li><a href="' .$path .'index.php?album=' .$name . '" class="style1"><font face="Tahoma" class="ws10"><B>' . $name . '</B></a><br /></li>';
      }
    ?> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:33:54.873

这样的事情应该可以帮助你：

```
$count = iterator_count(new DirectoryIterator($path)); 
```

[http://au1.php.net/iterator_count](http://au1.php.net/iterator_count)

所以：

```
<?php
function folderlist(){
  $directoryist = array();
  $startdir = './';
  $ignoredDirectory[] = '.';
  $ignoredDirectory[] = '..';
   if (is_dir($startdir)){
       if ($dh = opendir($startdir)){
           while (($folder = readdir($dh)) !== false){
               if (!(array_search($folder,$ignoredDirectory) > -1)){
                 if (filetype($startdir . $folder) == "dir"){
                       $directorylist[$startdir . $folder]['name'] = $folder;
                       $directorylist[$startdir . $folder]['path'] = $startdir;
                   }
               }
           }
           closedir($dh);
       }
   }
return($directorylist);
}

$folders = folderlist();

$total_files = 0;
foreach ($folders as $folder){
    $path = $folder['path'];
    $name = $folder['name'];
    $count = iterator_count(new DirectoryIterator($path . $name));
    $total_files += $count;

    echo '<li>';
    echo '<a href="' .$path .'index.php?album=' .$name . '" class="style1">';
    echo '<strong>' . $name . '</strong>';
    echo ' (' . $count . ' files found)';
    echo '</a>';
    echo '</li>';
}
  echo "Total Files:". $total_files;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:30:52.493

使用 Sizeof()

[http://php.net/manual/en/function.sizeof.php](http://php.net/manual/en/function.sizeof.php)

```
<?php
    function folderlist(){
      $startdir = './';
      $ignoredDirectory[] = '.'; 
      $ignoredDirectory[] = '..';
       if (is_dir($startdir)){
           if ($dh = opendir($startdir)){
               while (($folder = readdir($dh)) !== false){
                   if (!(array_search($folder,$ignoredDirectory) > -1)){
                     if (filetype($startdir . $folder) == "dir"){
                           $directorylist[$startdir . $folder]['name'] = $folder;
                           $directorylist[$startdir . $folder]['path'] = $startdir;
                       }
                   }
               }
               closedir($dh);
           }
       }
    return($directorylist);
    }

    $folders = folderlist();

        foreach ($folders as $folder){
        $path = $folder['path'];
        $name = $folder['name'];

    echo '<li><a href="' .$path .'index.php?album=' .$name . '" class="style1"><font face="Tahoma" class="ws10"><B>' . $name . '</B></a><br /></li>';
      }
      echo "Total Files:". sizeof($folders);
    ?> 
```

# java - 如何将图像存储到 Oracle 数据库？

> ID：13437994
> 
> 赞同：1
> 
> 时间：2012-11-18T06:26:32.333
> 
> 标签：java, oracle10g

如何将图像存储到 Oracle 数据库中？以及如何从该数据库中检索图像？这是我的代码：

```
import java.io.*; 
import java.sql.*; 
import java.util.*; 
class Pic3 
{ 
    public static void main(String args[]) throws Exception 
    { 
        Statement s; 
        Connection c; 
        FileInputStream fis; 
        PreparedStatement ps; 
        File file; 
        try 
        { 
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
            c=DriverManager.getConnection("Jdbc:Odbc:sidhu","system","system"); 
            s=c.createStatement(); 
            s.execute("Create table Img1(Image_No number(5),Photo blob)"); 
        } 
        catch(Exception e1) 
        { 
            e1.printStackTrace(); 
        } 

        try 
        { 
            file=new File("f:/image.jpeg"); 
            fis=new FileInputStream(file); 

            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
            c=DriverManager.getConnection("Jdbc:Odbc:sidhu","system","system"); 

            String str="insert into Img1 values(?,?)"; 
            ps=c.prepareStatement(str); 
            ps.setInt(1,(int)file.length()); 
            ps.setBinaryStream(2,fis,(int)file.length()); 

            //System.out.println("success"); 
            ps.execute(); 

            ps.close(); 
            c.close(); 
        } 
            catch(SQLException e) 
        { 
            e.printStackTrace(); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:31:33.413

像这样更改论文行

```
Class.forName("oracle.jdbc.driver.OracleDriver");
ps.setBinaryStream(2,fis,(byte)file.length()); 
```

代替

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
ps.setBinaryStream(2,fis,(int)file.length()); 
```

因为

`JDBC-ODBC bridge driver`不支持 blob，即使底层数据库支持。