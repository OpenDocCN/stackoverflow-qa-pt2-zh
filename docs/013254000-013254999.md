# StackOverflow 问答 13254000-13254999

# c - G-wan C Sha1 哈希

> ID：13254000
> 
> 赞同：3
> 
> 时间：2012-11-06T15:17:35.347
> 
> 标签：c, sha, g-wan

我在让 sha1 函数在 G-WAN 中工作时遇到了一个小问题。

基本上我有我想要散列的字符串，我一般是 C 的新手，所以任何指针都会很棒。

这是我试图 sha1 哈希的字符串，我尝试了几种方法，但我不确定我做错了什么。

```
u8 *input = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"; 
```

我几乎有 websockets 与 G-wan 一起工作，最后一件事是让这个 sha1 函数与我合作。

G-wans sha1 函数的文档如下

```
// u8 dst[20]; // the resulting 160-bit hash
// sha1_t ctx;
// sha1_init(&ctx);
// int i = 10;
// while(i--)
//    sha1_add(&ctx, data[i].ptr, data[i].len);
// sha1_end(&ctx, dst);

typedef struct { u8 x[220]; } sha1_t;
void sha1_init(sha1_t *ctx);
void sha1_add (sha1_t *ctx, u8 *src, int srclen);
void sha1_end (sha1_t *ctx, u8 *dst);
// a wrapper on all the above SHA-160 calls
void sha1(u8 *input, int ilen, u8 *dst); 
```

链接到那里 api [http://gwan.com/api](http://gwan.com/api)

如果有人可以在这里给我扔一根骨头，那会让我在 C 的最后几个小时有点宽容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:25:22.833

这是一个关于如何使用 sha1 函数的示例。

```
u8 input[] = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
u8 result[20];

sha1(input, sizeof(input) - 1, result);
xbuf_xcat(get_reply(argv), "SHA1 Result: %20B", result); 
```

结果是二进制的，因此您需要将其转换为 B64 或 HEX 以使其可读。'%B' 是 G-WAN 中的 B64 转换。'%20B' 告诉它转换前 20 个字节。

结果：

> SHA1 结果：Kfh9QIsMVZcl6xEPYxPHzW8SZ8w=

# oracle - 如果发生内部提交，我可以在 Oracle 中做什么以保留保存点？

> ID：13254006
> 
> 赞同：2
> 
> 时间：2012-11-06T15:17:43.363
> 
> 标签：oracle, unit-testing, plsql, refactoring

**背景：** 我正在做一些 Oracle plsql 重构；我想要完成的第一个想法是对主要组件进行单元测试。

为此，我将 ruby​​ 与 gem plsq-spec [https://github.com/rsim/ruby-plsql-spec一起使用](https://github.com/rsim/ruby-plsql-spec)

为了多次执行测试，我在打开数据库连接后使用 Oracle Savepoints，并在关闭连接之前回滚到保存点

**问题：** 一些测试不能执行超过一次，因为一些过程有内部提交。

*如果发生内部提交/回滚，我可以在 Oracle 中做什么以保留保存点？*

有了注释中的这些信息，我想要的显然是不可能的 [http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm)

> 一个简单的回滚或提交会擦除所有保存点。当您回滚到某个保存点时，该保存点之后标记的所有保存点都将被删除。您回滚到的保存点仍然存在。

那么，唯一的解决方案是？：

*   修改程序
*   在执行测试之前擦除所有数据？

tks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:07:13.180

闪回功能在这里可以帮助您，因为您可以将数据库或单个表恢复到其上一个时间点的状态。

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9012.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9012.htm)

# java - 我可以将 grails 项目构建到独立的 jar 中并从 Spring 应用程序中使用它吗？

> ID：13254007
> 
> 赞同：0
> 
> 时间：2012-11-06T15:17:43.883
> 
> 标签：java, spring, grails

我们正在使用一个开源 grails 项目，我们希望使用消息队列将它与我们的系统集成。

我们可以将消息队列的代码添加到 grails 项目中。但是我们更愿意做的是让 grails 项目构建一个独立的 jar 文件，然后我们可以从我们的项目中使用它。

在我们的应用程序中，我们希望启动开源 grails 项目的休眠/GORM 层，我们不需要 Web 层，因为我们正在使用消息传递。

理想情况下，我们希望我们的项目是 Spring/Java，但是如果这不切实际，那么我们将使用 grails 项目。

这是否可能，或者它们是扩展现有 grails 项目的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:43:32.200

没有开箱即用的方式在 Spring/Java 应用程序中重用 Grails 应用程序，尽管有一些方法可以在 Spring 应用程序中独立使用 GORM（[如此处所述](https://stackoverflow.com/questions/1636664/using-grails-gorm-standalone)）

我的建议是扩展 Grails 应用程序。如果不需要 Groovy 或某些 Grails 功能，您仍然可以像使用基于 Java 的普通 Spring 项目一样使用该项目，方法是向 中添加 Java 源`src/java`，使用单独的`beans.xml`Spring bean 配置文件和其他“回退”。

# regex - 帮助用户编写正则表达式

> ID：13254008
> 
> 赞同：0
> 
> 时间：2012-11-06T15:17:51.367
> 
> 标签：regex

我正在开发一个项目，其中有某些文本字段的格式规则。

用户可以编辑这些规则。目前，规则是正则表达式。用户认为正则表达式非常令人生畏，并希望以一种更简单、更用户友好的方式来编写它们。

我想到了一些简单的翻译工具……用户可以在其中输入# 表示数字……X 表示字母等。但我知道有一天他们需要的不仅仅是字母和数字。

我想知道是否存在简单的翻译工具，或者是否有更好的方法来做到这一点？

感谢您的阅读，欢迎所有建议和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:29:54.710

1.  将字符串拆分为单个字符并应用

    *   将每个替换`X`为`[a-zA-Z]`

    *   将每个替换`#`为`\d`

    *   将每个替换`^`为`\^`

    *   所有其他替换为，您要替换的字符`[*]`在哪里`*`

2.  将所有模式加入一个最终的正则表达式模式

3.  如果要将正则表达式模式应用于整个字符串，`^`请在开头和`$`结尾添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:23:46.420

创建一个像你提议的工具应该是相当简单的。只需将占位符扩展为相应的正则表达式值：

```
var input= "XX##*"
var regex = input.replace('#', '[0-9]')
regex = regex.replace('X', '[a-zA-Z]')
regex = regex.replace('*', '.*')
# etc 
```

当然，您必须定义您的占位符以及您希望为用户提供的任何其他选项。`/`您还可以发挥创意并允许高级用户通过使用（或其他标识符）包围输入来直接输入正则表达式。

```
var input= '/\d\d\w\w.*/'
var regex = undefined;
if (input.matches('^/(.*)/$')) {
    regex = $1  (group 1 from regex)
} else {
  regex = input.replace('#', '[0-9]')
  regex = regex.replace('X', '[a-zA-Z]')
  regex = regex.replace('*', '.*')
} 
```

当然，这完全是一种用于演示解决方案的组合语言……如果您找到编译它的方法，我会最感兴趣。:)

# vim - 根据部分行比较删除重复行

> ID：13254010
> 
> 赞同：5
> 
> 时间：2012-11-06T15:17:55.683
> 
> 标签：vim

我有一个包含数千行文本的文本文件，如下所示。

```
123 hello world
124 foo bar
125 hello world 
```

我想通过检查该行的一个子部分来测试重复项。对于上面它应该输出：

```
123 hello world
124 foo bar 
```

有没有一个**vim**命令可以做到这一点？

**更新**：我在**Windows**机器上，所以不能使用 uniq

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T15:24:30.093

这是一个 bash 命令：

```
sort -k2 input | uniq -s4 
```

*   `sort -k2`排序时将跳过第一个字段
*   `uniq -s4`将跳过前 4 个字符

* * *

在 vim 中，你可以调用上面的外部命令：

```
:%!sort -k2 % | uniq -s4 
```

*   第二个`%`将扩展为当前文件名。

* * *

实际上，您可以使用以下命令在 vim 中排序：

```
:sort /^\d*\s/ 
```

*   vim 将在排序时跳过匹配的数字

排序后，使用此命令删除重复的行：

```
:%s/\v(^\d*\s(.*)$\n)(^\d*\s\2$\n)+/\1/ 
```

*   为了避免过多的反斜杠转义，我`\v`在模式中使用打开**VERY MAGIC**。
*   在多行模式中，`$`将匹配 newline( ) 之前的位置`\n`。不过，我认为这里没有必要。
*   您可以制作自己的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:37:40.573

使用 awk：

```
$ awk '!a[$2$3]++' file
123 hello world
124 foo bar 
```

进入数组时的第一个元素将计数设置为 1，因此进一步出现的元素不会进入数组，因为否定使其为假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:25:33.673

我不确定在 vim 中，但你可以用 uniq 命令做一些事情。它有一个 --skip-fields 参数，可用于跳过每行的第一部分。

```
$ cat test.txt
123 hello world
124 foo bar
125 hello world

$ cat test.txt | sort -k 2 | uniq --skip-fields=1 | sort
123 hello world
124 foo bar 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-17T14:12:50.337

在 VIM 中，我可以使用以下命令对重复项进行排序和删除

```
:sort u 
```

# c# - 我需要将哪些计算机设置更改为其他语言的文本字符串比较

> ID：13254011
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:17:56.993
> 
> 标签：c#, string

C# WinForms：这个程序也将用于非美国英语国家，比如土耳其。所以我想确保如果我进行字符串比较，我正在为美国的客户和土耳其的客户做正确的事情。所以我了解了文化，CurrentCulture 和 InvariantCulture。但现在有点困惑：

如果我像这样将文化更改为土耳其语，并且我也想要一个不区分大小写的比较：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("tr-TR"); 
```

那么这似乎是一个很好的代码。你同意吗？

```
string.Equals(s1, s2, StringComparison.CurrentCultureIgnoreCase) 
```

在此代码中，“istanbul”和“İstanbul”之类的字符串将相等。但是“伊斯坦布尔”和“伊斯坦布尔”将不相等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:49:40.067

检查这篇[文章](https://stackoverflow.com/questions/417954/c-sharp-string-comparisons-difference-between-currentcultureignorecase-and-inva)：

来自帖子中的一条评论：“......土耳其语 i 是一个特例。他们有一个带有大写“I”的小写无点“ı”和一个带有大写“İ”的小写“i”。它被认为是文化差异的典型案例。”

# .net - 当只有 CLSID 不同时，创建对两个 COM 组件的 .NET 项目引用？

> ID：13254013
> 
> 赞同：1
> 
> 时间：2012-11-06T15:18:00.683
> 
> 标签：.net, com, unmanaged, typelib, clsid

简短的：

如何在 .NET 项目中创建两个对除了 CLSID 之外相同的非托管 COM 组件的两个引用？它们具有相同的 ProgID 和相同的类型库。

当我尝试创建第二个引用时，类型库是 Visual Studio 抱怨的：

> *无法添加对“XXX 类型库”的引用。已存在对此类型库的引用。在添加此之前，您必须删除引用“XXX”。*

提前致谢。

* * *

详细的：

我正在创建一个 WPF 应用程序，它提供与另一个应用程序的集成。另一个应用程序有点不寻常，因为它的版本作为单独的应用程序安装。用户可以在他们的计算机上同时运行多个版本的应用程序。

我的单个 WPF 应用程序应该允许用户选择他们想要使用的其他应用程序的版本。另一个应用程序为每个安装的版本都有一个非托管 COM DLL，我用它来创建我的 WPF 应用程序和这个其他应用程序之间的集成。

我的 WPF 应用程序在使用对版本 1 的非托管 COM 组件的引用的其他应用程序的第一个版本中运行良好。当我尝试引用第二个版本的 COM 组件时，问题就开始了。

在 WPF 项目中使用“添加引用”时出现以下错误： *无法添加对“XXX 类型库”的引用。已存在对此类型库的引用。在添加此之前，您必须删除引用“XXX”。*

对注册表的检查表明，两个版本的 COM 组件的注册表信息的唯一区别是 CLSD 和实际 DLL 的路径。两个组件的 ProgID 和 TypeLib 值相同。

由于其他应用程序的版本确实被视为单独的应用程序，我希望将 COM 组件安装为不同的应用程序，并且我正在与公司合作开发下一个版本。

现在我一直在尝试将第 2 版集成到我的 WPF 应用程序中。我看过很多关于 *外部别名*以及如何手动编辑项目文件以引入别名的帖子，但它们似乎都是从托管程序集而不是非托管 COM 组件开始的。对于引用的非托管 COM 组件，项目文件的内容是不同的，并且由于我无法创建第二个引用，因此向项目文件中的引用添加*别名*标记对我没有帮助。

我见过人们谈论使用 System.Addin 和反射，但我想确认在研究更复杂的方法之前没有更直接的方法。

感谢您阅读到这里！

* * *

按照 CasperOne 的建议，我做了以下事情：

1.  使用 Visual Studio 命令提示符运行以下命令：*tlbimp "c:\xxx1.dll" /out:"c:\NETxxx1.dll"*
2.  使用 Visual Studio 命令提示符运行以下命令：*tlbimp "c:\xxx2.dll" /out:"c:\NETxxx2.dll"*
3.  添加了两个新创建的 DLL（我猜是互操作的）作为对我的测试项目的引用。我使用“浏览”选项卡来查找它们。
4.  我添加了几乎遵循 casperOne 的代码示例的代码。

我对为我的 COM 接口使用什么名称感到有点恐慌。在我使用的 COM 对象的情况下，有一个主接口对象，并且我从该 COM 对象使用的所有其他对象都是从该主接口对象内实例化的（即，我进行如下调用：Foo x = y. GetNewFoo();)。

```

`using X1 = NETXXX1; 
using X2 = NETXXX2;

Guid clsid1 = new Guid("xxx..."); 
Type type1 = Type.GetTypeFromCLSID(clsid1); 
X1.IApplication a1 = (X1.IApplication)Activator.CreateInstance(type1); 
X1.FooList f1 =a1.GetFooList();

Guid clsid2 = new Guid("yyy..."); 
Type type2 = Type.GetTypeFromCLSID(clsid2); 
X2.IApplication a2 = (X2.IApplication)Activator.CreateInstance(type2); 
X2.FooList f2 = a2.GetFooList();

foreach(X1.Foo f in f1) Console.WriteLine(f.Name);
Console.WriteLine("*****"); 
foreach(X2.Foo f in f2) Console.WriteLine(f.Name);` 

            回答 #1

赞同：1

时间：2012-11-06T18:35:24.313

在这种情况下，我建议不要通过 Visual Studio 中的“添加引用”对话框添加引用。

相反，使用[类型库导入](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.110%29.aspx)器从命令行生成引用，然后在您的项目中正常设置对它的引用（它将是一个 .NET 程序集）。

完成此操作后，您将拥有两组类型，两个类实现的接口集，以及这些接口实现的类定义之一。

[您将使用类](http://msdn.microsoft.com/en-us/library/42892f65.aspx)上的[`GetTypeFromCLSID`方法](http://msdn.microsoft.com/en-us/library/980t1w1t.aspx)来获取COM 对象的 .NET ，而不是使用构造函数来创建此类。[`Type`](http://msdn.microsoft.com/en-us/library/42892f65.aspx)`Type`

然后，您将`Type`在调用中使用它[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)（因为所有 COM 对象都有默认构造函数，这将起作用）并将结果转换为*接口*定义，如下所示：

```
// The CLSID of the implementation you want to use.
Guid clsid = ...;

// Get the type.
Type type = Type.GetTypeFromCLSID(clsid);

// Create and cast to your interface.
var i = (IMyComInterface) Activator.CreateInstance(type); 
```

当`Activator.CreateInstance`遇到一个 COM 对象类型时，它会创建一个`System.__ComObject`CLR 支持的（所有 COM 互操作实例的根）（就像[`IUnkown::QueryInterface`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682521%28v=vs.85%29.aspx)在转换时调用，就像在上面的代码中一样）。

此外，如果您愿意，您可以在代码中定义接口，然后转换为这些接口，您不一定需要类型库导入器来生成它们。

```

# android - webservice返回错误而不是使用soap的预期值

> ID：13254017
> 
> 赞同：2
> 
> 时间：2012-11-06T15:18:28.940
> 
> 标签：android, web-services

这是我编写的使用[此视频](https://www.youtube.com/watch?v=v9EowBVgwSo)调用 web 服务的代码。当我运行它时，我收到一个错误字符串而不是 89.6。

```
package com.flafel.myTest;

import android.app.Activity;
import android.net.http.AndroidHttpClient;
import android.os.Bundle;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.SoapEnvelope;
import android.widget.*;

public class FirstScreen extends Activity {
    /** Called when the activity is first created. */
    private static final String SQAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    private static final String METMOD_NAME = "CelsiusToFahrenheit";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                tv = (TextView) findViewById(R.id.textView1);

                SoapObject Request = new SoapObject(NAMESPACE, "Method_Name");
                Request.addProperty("Celsius", "32");

                SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                soapEnvelope.dotNet = true;
                soapEnvelope.setOutputSoapObject(Request);

                HttpTransportSE aht = new HttpTransportSE(URL);
                aht.debug=true;

                try {

                    aht.call(SQAP_ACTION, soapEnvelope);

                    SoapPrimitive resultString = (SoapPrimitive) soapEnvelope
                            .getResponse();
                    int count = resultString.getAttributeCount();
                    tv.setText("Status:" + resultString);

                } catch (Exception e) {
                    e.printStackTrace();
                }

            }       
} 
```

输出是：

```
Hello World,FirstScreen!
Status:Error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:31:53.300

因为您没有将 method_name 写入自己的位置。

你的代码：

```
SoapObject Request = new SoapObject(NAMESPACE, "Method_Name"); 
```

真实代码：

```
SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

# usb - 启动 ubuntu 10.04 后以编程方式重新安装 USB 集线器

> ID：13254018
> 
> 赞同：1
> 
> 时间：2012-11-06T15:18:39.573
> 
> 标签：usb, ubuntu-10.04, boot

我正在运行 ubuntu 10.04 和内核 2.6.32-28-server。

有 4 个 USB 集线器连接到服务器，每个集线器有 4 个 USB 端口。在启动时，只有两个或三个被挂载。如果我在启动后将它们插入，那么一切都安装得很好。在具有更强大电源的另一台服务器上，usb 集线器在启动时安装得很好，所以这让我认为启动时集线器没有足够的电力。我没有每次都能够重新插入它们的奢侈，所以我必须想办法在启动后的某个时间以编程方式重新安装 USB 集线器。

到目前为止，我已经尝试过其他建议，例如。

删除并重新加载 usb_storage：

```
sudo modprobe -w -r usb_storage; sudo modprobe usb_storage 
```

我也试过：

```
sudo modprobe -vr ehci_hcd
sudo modprobe -v ehci_hcd 
```

但这只会导致：

```
FATAL: Module ehci_hcd is builtin 
```

非常绝望，我在成功安装后复制了 /sys/devices 中的一些文件，方法是在启动后将集线器插入单独的文件夹中。重新启动系统后，我尝试将这些文件复制回 /sys/devices 但即使以 root 身份我也无法复制它们。

# mysql - Mysql 范围检查而不是内部连接上的索引使用情况

> ID：13254023
> 
> 赞同：15
> 
> 时间：2012-11-06T15:18:54.233
> 
> 标签：mysql, indexing, range, inner-join

我在使用 MySQL (innoDB) 5.0 时遇到了严重问题。

一个非常简单的 SQL 查询执行一个非常意外的查询计划。

查询：

```
SELECT 
SQL_NO_CACHE
mbCategory.*

FROM 
MBCategory mbCategory 

INNER JOIN ResourcePermission as rp
    ON rp.primKey = mbCategory.categoryId 

where mbCategory.groupId = 12345 AND mbCategory.parentCategoryId = 0 
limit 20; 
```

MBCategory - 包含 216583 行

ResourcePermission - 包含 3098354 行。

在 MBCategory 中，我有多个索引（列顺序与索引相同）：

```
Primary (categoryId)
A (groupId,parentCategoryId,categoryId)
B (groupId,parentCategoryId) 
```

在 ResourcePermission 我有多个索引（列顺序与索引相同）：

```
Primary - on some column
A (primKey). 
```

当我查看查询计划时，Mysql 首先更改表序列并从 ResourcePermission 中选择行，然后加入 MBCategory 表（疯狂的想法），这需要很长时间。所以我添加`STRAIGHT_JOIN`了强制innodb引擎使用正确的表序列：

```
SELECT

STRAIGHT_JOIN SQL_NO_CACHE
mbCategory.*

FROM 
MBCategory
 mbCategory 

INNER JOIN ResourcePermission as rp
    ON rp.primKey = mbCategory.categoryId 

where mbCategory.groupId = 12345 AND mbCategory.parentCategoryId = 0 
limit 20; 
```

但是这里的第二个问题materialzie：在我看来，mysql应该`index A (primKey)`在连接操作上使用，而不是它对每条记录执行范围检查（索引映射：0x400），这又需要很长时间！强制索引没有帮助，mysql 仍在为每条记录执行 Range 检查。

MBCategory 中只有 23 行满足 where 条件，加入后只有 75 行。如何让 mysql 在此操作中选择正确的索引？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-07T08:50:05.610

好的，初级问题。我欠自己一杯啤酒。我最近调整的系统不是我开发的系统 - 我的管理层已分配给我以提高绩效（原始团队不了解此主题）。

经过数周的改进 SQL 查询、索引、应用程序正在执行的 sql 查询数量后，我没有检查这种情况下最重要的事情之一！

列类型不同！

编写过代码的开发人员应该得到相当多的讨论。

感谢帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-30T15:45:20.117

我遇到了同样的问题，但原因不同。我正在加入一个大表，并且 ON 子句使用 OR 将主键 (ii.itemid) 与两个不同的列进行比较：

```
SELECT *
FROM share_detail sd
JOIN box_view bv ON sd.container_id = bv.id
JOIN boxes b ON b.id = bv.shared_id
JOIN item_index ii ON ii.itemid = bv.shared_id OR b.parent_itemid = ii.itemid; 
```

幸运的是，结果 parent_itemid 比较是多余的，所以我能够删除它。现在该索引正在按预期使用。否则，我将尝试将 item_index 连接拆分为两个单独的连接。

# sql-server - 在 SQL Server 中一次对多个表应用压缩？

> ID：13254027
> 
> 赞同：0
> 
> 时间：2012-11-06T15:19:07.703
> 
> 标签：sql-server

我正在使用 MS SQL Server 2008，我正在尝试`SELECT INTO`从一个数据库到另一个数据库，但是我需要在构建新表后使用行压缩对其进行压缩。

我之前使用触发器默认对所有表设置压缩，但效果不佳，因为触发器更改了架构并且不允许插入数据。这是我尝试过的：

我还可以使用什么其他方法一次在所有表上设置压缩？#新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:04:12.310

你可以使用这样的脚本：

```
DECLARE @SQL NVARCHAR(MAX) =
(
SELECT 'ALTER TABLE ' + Name + ' REBUILD WITH (DATA_COMPRESSION = ROW); ' AS [data()]
FROM sys.Tables
FOR XML PATH('')
)

EXEC(@SQL) 
```

# windows-8 - 使用 Windows 8 Push Toast 通知发送附加数据

> ID：13254028
> 
> 赞同：1
> 
> 时间：2012-11-06T15:19:13.127
> 
> 标签：windows-8, notifications, microsoft-metro

我正在构建一个 Windows 8 应用程序希望推送通知。我知道当点击 toast 时，应用程序就会启动，可能能够看到启动它的 toast 的有效负载。

但是，我是否可以发送可以由客户端解释的附加数据（如唯一 ID），但未在 toast 上显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:36:31.160

看一下[Toast 模式的](http://msdn.microsoft.com/en-us/library/windows/apps/br230846.aspx)**启动**属性。你在那里放什么取决于你。当用户单击 toast 时，将使用 Launch 的 ActivationKind 激活应用程序，**您**[可以](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.activationkind.aspx)从传递给[OnLaunched](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.application.onlaunched.aspx)处理程序的 args 中获取字符串（请参阅[如何处理来自 toast 通知的激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868212%28v=win.10%29.aspx)）

# javascript - 在nodejs中删除浏览器关闭时的会话

> ID：13254029
> 
> 赞同：4
> 
> 时间：2012-11-06T15:19:17.960
> 
> 标签：javascript, jquery, html, node.js, express

浏览器关闭时可以删除节点js中的会话吗？

我想检查用户是否没有选择保持登录复选框，然后关闭窗口。他应该要求重新登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:22:46.227

这是特定于 cookie 的设置：如果您将会话数据存储在仅会话 cookie 中，它会在浏览器关闭时消失。

请参阅此答案以使用 express 制作浏览器会话 cookie：[Node.js/Express.js session management cookie to be session cookie](https://stackoverflow.com/questions/8842389/nodejs-express-session-management-cookie-to-be-session-cookie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T14:32:37.380

您可以在事件“断开连接”上编写自己的会话删除功能

```
socketServer.sockets.on('connection', function onSocket(client) {
    client.on('disconnect', function() {
        console.log("disconnect");
        // some code
    });
    -----
}); 
```

# c# - 确定什么类称为方法？

> ID：13254032
> 
> 赞同：7
> 
> 时间：2012-11-06T15:19:30.043
> 
> 标签：c#, .net, reflection

我有一个应用程序，但我不确定如何执行此操作。假设我在一个不带参数的 DLL 文件中有一些可公开访问的方法。这种方法有可能知道它叫什么吗？它可以判断它是从静态上下文还是实例化上下文中调用的吗？来自特定的班级？一个方法如何知道它是如何被调用的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T15:22:43.990

您可以从堆栈跟踪中获取调用者信息：

```
StackTrace stackTrace = new StackTrace();
MethodBase methodBase = stackTrace.GetFrame(1).GetMethod(); 
```

此方法可能知道调用它的名称：

```
string typeName = methodBase.DeclaringType.Name;
string methodName = methodBase.Name; 
```

它可以判断它是从静态上下文还是实例化上下文中调用的：

```
bool isStaticCall = methodBase.IsStatic 
```

从一个特定的类：

```
bool isGeneric = methodBase.DeclaringType.IsGenericType; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T15:26:44.443

你可以这样做：

```
var callingClass = new StackFrame(1).GetMethod().ReflectedType; 
```

The `1` tells the constructor to skip the currently executing method.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T15:23:00.953

如果您的程序有足够的权限，它可以构造 a[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)并逐帧检查它以确定谁是调用者。这将为您提供调用方法、调用类等。

# zend-framework - 如何在 Zend 框架（bsc）中将变量从一个动作传递到另一个动作而不重定向到另一个动作

> ID：13254033
> 
> 赞同：0
> 
> 时间：2012-11-06T15:19:31.390
> 
> 标签：zend-framework

```
public function helloAction() {
    $a =10;

}
public function thanksAction() {
    $b = 20;
    $b = $b + $a; //`enter code here` how can i get this $a variable value from helloAction() to thanksAction()
// without use _redirect() and i mean don't send url helloAction() to thanksAction() by any method
} 
```

在zend框架中给出解决方案。在此处输入代码`我如何在不使用 _redirect() 的情况下将这个 $a 变量值从 helloAction() 获取到 ThanksAction()，我的意思是不要通过任何方法将 url helloAction() 发送到 ThanksAction()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:32:32.390

有不同的选择，所有这些都取决于您的确切要求：

选项 1：转发 - 从问题来看，您似乎想先执行 helloAction，然后执行 ThanksAction()，以便将 $a 设置为 10，然后传递给 ThanksAction。为此，您可以使用 _forward 方法。它不会更改 url，但会将执行传递给指定的操作。

```
 public function helloAction() {
               $a =10;
               $this->_forward("thanks","index", null, array('a' => $a));
        }
        public function thanksAction() {
               $a = $this->_getParam("a");
               $b = 20;
               $b = $b + $a; 
         }
 Note the _forward() will process all statements in helloAction(), skip its view script, and process all the statements in thanksAction and display its view script.` 
```

选项 2：将变量 $a 设置为类参数，在您的操作中使用 $this 访问它。

```
 public function helloAction() {
            $this->a =10;

      }
      public function thanksAction() {
            $b = 20;
            $b = $b + $this->a; 
      } 
```

选项 3：在会话或 Zend 注册表中设置值并在需要的地方访问。

正如@vascowhite 在他的回答中指出的那样，一切都已完成，如果您遇到需要在操作之间传递参数而不是通过 GET、POST 或 SESSION 的情况，那么您可能会遇到一些设计问题。您可以做的一件事是将语句移动到常规函数并从 helloAction 调用它，例如：

```
 public function helloAction() {
            $a =10;
            $c = $this->processA($a);

      }
      protected function processA($a) {
            $b = 20;
            $b = $b + $a; 
            return $b;
      } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:00:20.617

你不应该这样做。控制器永远不需要相互交谈。如果存在多个控制器共有的功能，则应将其移至模型层之一。

您应该努力寻找具有最少逻辑的瘦控制器。您对一个控制器访问另一个控制器的要求是代码异味，表明您需要进行一些重构。认真、批判地审视你的设计，思考如何避免这种情况，如果你继续下去，它只会变得更加复杂。

经过 4 年的 ZF 开发和 10 个完成的项目，作为一个单独的开发人员，我从痛苦的经历中说出来，尤其是在维护旧项目时。我现在有一个牢不可破的规则，即控制器从不共享任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:48:32.880

**janenz00**几乎涵盖了所有内容，但我想补充一点，您不应该忘记每个控制器都是一个类，每个动作都是一个函数，并且可以这样调用。

```
 public function helloAction() {
            $a =10;
            $this->thanksAction($a);

      }
      public function thanksAction($a) {
            $b = 20;
            $b = $b + $a; 
      } 
```

请注意，在 ZF 世界中，您正在执行 helloAction，因此两个操作完成后将显示的视图是 hello 视图。当不需要 actionHelper 时，您还可以使用它来处理控制器中的常见逻辑/验证/代码。

# php - 以小时和分钟计算两个日期之间的差异

> ID：13254037
> 
> 赞同：0
> 
> 时间：2012-11-06T15:19:42.547
> 
> 标签：php, mysql, date, time

我使用此代码以小时和分钟计算两个日期之间的差异：

```
$all = round(($date1timestamp - $date2timestamp) / 60);
$d = floor ($all / 1440);
$h = floor (($all - $d * 1440) / 60);
$m = $all - ($d * 1440) - ($h * 60); 
```

完美运行，但是当我必须多次计算日期之间的差异时，我必须再次编写代码并更改值是否有任何简单的方法来计算多次而无需再次重写代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T15:25:24.713

尝试：

功能：

```
function date_difference ($date1timestamp, $date2timestamp) {
$all = round(($date1timestamp - $date2timestamp) / 60);
$d = floor ($all / 1440);
$h = floor (($all - $d * 1440) / 60);
$m = $all - ($d * 1440) - ($h * 60);
//Since you need just hours and mins
return array('hours'=>$h, 'mins'=>$m);
} 
```

调用函数：

```
$result = date_difference($date1timestamp, $date2timestamp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:23:41.007

如果我理解正确，您需要将此代码封装在一个函数中，然后您可以在需要再次使用它时调用该函数，而不是重写它。

```
function dateDiffHoursMins($date1timestamp, $date2timestamp)
{
   $all = round(($date1timestamp - $date2timestamp) / 60);
   $d = floor ($all / 1440);
   $h = floor (($all - $d * 1440) / 60);
   $m = $all - ($d * 1440) - ($h * 60);

   return array('d' => $d, 'h' => $h, 'm' => $m);
} 
```

要使用它，只需调用`dateDiffHoursMins()`并传递两个时间戳。它将返回一个数组，因此您可以像这样获取值：

```
$diff = dateDiffHoursMins($time1, $time2);
$hours = $diff['h'];
echo("Hours: " . $hours); 
```

这种将代码封装在函数中的过程通常被称为保持代码**干燥**，这是一个首字母缩写词，代表**Dont Repeat Yourself**。这是您应该始终为之奋斗的目标。它使代码更快地编写并且更容易调试。想象一下，如果您在整个文件中复制/粘贴了该片段 20 次，然后在其中发现了一个错误。您必须在所有 20 个地方修复它，而对于一个功能，您只需在一个地方修复它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T15:27:47.137

解决这个问题的一个好方法是以秒为单位来考虑它。

第一步是在 SQL 中以秒为单位提取时间戳差异（$dbc 是我的数据库连接）：

```
$timeQuery= mysqli_query($dbc,
                "SELECT TIMESTAMPDIFF(second,TIME1,TIME2) AS DIFF, 
```

然后将其分配给一个变量

```
while ($row = mysqli_fetch_array($timeQuery)) {
    $totalTime = $row["DIFF"]; 
```

然后开始你的转换：

```
//Seconds in an hour
$unith =3600;       
//Seconds in a minute
$unitm =60;

//Number of hours and then the seconds remaining for minute calc
$hh = intval($totalTime / $unith);    
$ss_remaining = ($totalTime - ($hh * 3600));        
//Number of minutes and then the seconds remaing        
$mm = intval($ss_remaining / $unitm);    
$ss = ($ss_remaining - ($mm * 60)); 
```

然后你可以像这样打印它：

```
$hh . ' : ' . $mm . ' : ' . $ss 
```

# java - java 从匿名方法中引用“this”

> ID：13254043
> 
> 赞同：0
> 
> 时间：2012-11-06T15:19:51.170
> 
> 标签：java, anonymous-class

> **可能重复：**
> [来自匿名内部类的外部类的关键字？](https://stackoverflow.com/questions/56974/keyword-for-the-outer-class-from-an-anonymous-inner-class)

我的班级（我们称之为`MyClass`）有`m_listener`用于通知目的的成员。在匿名方法中使用它没有问题：

```
private void myMethod(SomeObj myObj)
{
    ...
    myObj.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            m_listener.myOnClick(this);
            return false;
        }
    });
    ...
} 
```

在代码`this`中指的是匿名`OnTouchListener`实例。我应该写什么而不是`this`引用`MyClass`实例（就像`m_listener`引用`MyClass.m_listener`，而不是引用`OnTouchListener.m_listener`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:22:19.607

用于`MyClass.this`引用外部`MyClass`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:22:36.940

要引用 MyClass 实例，请使用`MyClass.this`

# python - 如何将 InteractiveInterpreter 对象的当前状态存储在数据库中？

> ID：13254044
> 
> 赞同：0
> 
> 时间：2012-11-06T15:19:51.127
> 
> 标签：python, interactive-shell, python-interactive

我正在尝试构建一个在线 Python Shell。我通过创建一个实例来执行命令`InteractiveInterpreter`并使用命令`runcode`。为此，我需要将解释器状态存储在数据库中，以便可以跨命令使用全局和局部命名空间中的变量、函数、定义和其他值。有没有办法存储`InteractiveInterpreter`可以稍后检索并作为参数传递`local`给`InteractiveInterpreter`构造函数的对象的当前状态，或者如果我不能这样做，我必须有哪些替代方法来实现上述功能？
下面是我想要实现的伪代码

```
 def fun(code, sessionID):
     session = Session()
     # get the latest state of the interpreter object corresponding to SessionID
     vars = session.getvars(sessionID)
     it = InteractiveInterpreter(vars)
     it.runcode(code)
     #save back the new state of the interpreter object
     session.setvars(it.getState(),sessionID) 

```

在这里，会话是一个包含所有必要信息的表的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:28:29.960

我相信这个`pickle`包应该适合你。您可以使用`pickle.dump`或`pickle.dumps`来保存大多数对象的状态。（然后`pickle.load`或`pickle.loads`取回它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:43:24.410

好的，如果 pickle 不起作用，您可以尝试使用如下格式（大致）重新实例化该类：

```
class MyClass:
    def __init__(self, OldClass):
        for d in dir(OldClass):
            # go through the attributes from the old class and set
            # the new attributes to what you need 
```

# python - 模块名称与目录名称不同？

> ID：13254047
> 
> 赞同：22
> 
> 时间：2012-11-06T15:19:59.607
> 
> 标签：python, pythonpath

假设我有一个名为`bestpackage`.

约定规定也`bestpacakge`将是一个目录，`sys.path`其中包含一个 `__init__.py`使解释器假设它可以从中导入。

有什么方法可以为包名称设置一个变量，以便可以将目录命名为与我导入它时使用的指令不同的名称？有什么方法可以让命名空间不关心目录名称而是尊重其他一些配置？

我的超级时尚客户端开发人员非常喜欢这些性感`something.otherthing.js`的项目名称，用于我们的一个较小的副项目！

**编辑**：

澄清一下，我的问题的主要目的是让我的客户端人员继续使用他们现有的约定（some.app.js）调用他们的“项目”（我们都添加到我们的路径中的那个）文件夹中的目录，即使在某些情况下，它们实际上是 python 包，它们将在路径上并在`import`内部获取语句。我意识到这在实践中是一件非常可怕的事情，所以出于好奇我问了更多。所以这里的部分大问题是规避`.`目录名称中的 （以及由此假定的包名称）意味着属性访问的事实。无法解决这个问题并不让我感到惊讶，我只是好奇是否有可能更深入地了解导入背后的“魔力”。

这里有一些很好的回应，但都依赖于执行某种经典导入，其中属性访问器`.`将与目录名称发生冲突。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T15:22:53.490

包含`__init__.py`文件的目录称为*包*。

不，包名称*始终*与目录相同。这就是 Python 发现包的方式，它将它与在搜索路径上找到的目录名进行匹配，如果`__init__.py`该目录中有文件，它会找到匹配项并导入`__init__.py`包含的文件。

`from module import something`您始终可以使用或`import module as alias`语法以更短、更易于使用的名称将某些内容导入本地模块命名空间：

```
from something.otherthing.js import foo
from something.otherthing import js as bar
import something.otherthing.js as hamspam 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T19:59:51.383

有一种解决方案需要在某处进行一次初始导入

```
>>> import sys
>>> sys.modules['blinot_existing_blubb'] = sys
>>> import blinot_existing_blubb
>>> blinot_existing_blubb
<module 'sys' (built-in)> 
```

如果不更改导入机制，您将无法从其他名称导入。我认为这是为了让 Python 更容易理解。

但是，如果您想更改导入机制，我建议您这样做：[Getting the Most Out of Python Imports](http://www.youtube.com/watch?v=kdZuUIj4lMo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T15:30:40.423

好吧，首先我会这么说`Python is not Java/Javascript/C/C++/Cobol/YourFavoriteLanguageThatIsntPython`。当然，在现实世界中，我们中的一些人必须对不同意的老板做出回应。因此，如果您想要的只是一些间接性，请使用烟雾和镜子，只要他们不太关注引擎盖下的内容。以 Python 的方式编写你的模块，然后以你的同事想要的点重风格提供一个 API。前任：

`pythonic_module.py`

```
def func_1():
    pass

def func_2():
    pass

def func_3():
    pass

def func_4():
    pass 
```

`indirection`

`/dotty_api_1/__init__.py`

```
from pythonic_module import func_1 as foo, func_2 as bar 
```

`/dotty_api_2/__init__.py`

```
from pythonic_module import func_3 as foo, func_4 as bar 
```

现在他们可以随心所欲地点点滴滴，但你可以在底层以 Pythonic 的方式编写东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:30:50.147

其实，是！你可以做一个规范`import Whatever`或`newmodulename = __import__("Whatever")`

python 跟踪您的模块，您可以通过执行以下操作进行检查：

```
import sys
print sys.modules 
```

看[这篇文章](http://lucumr.pocoo.org/2011/9/21/python-import-blackbox/)更多细节

但这也许不是你的问题？让我们猜一猜：您在不同的路径中有一个模块，您当前的项目无法访问它，因为它不在系统路径中？

好吧，只需添加：

```
import sys
sys.path.append('path_to_the_other_package_or_module_directory') 
```

在您`import`发表声明之前或查看此 SO - [post](https://stackoverflow.com/questions/3402168/permanently-add-a-directory-to-pythonpath)以获得更永久的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-25T00:49:26.017

我一直在寻找在 sdist 和安装时使用 setup.py 发生这种情况，而不是运行时，并找到了指令`package_dir`：

*   [https://docs.python.org/3.5/distutils/setupscript.html#listing-whole-packages](https://docs.python.org/3.5/distutils/setupscript.html#listing-whole-packages)

# javascript - Javascript：制作单独的表单提交

> ID：13254050
> 
> 赞同：0
> 
> 时间：2012-11-06T15:20:08.737
> 
> 标签：javascript

这是我的 javascript，我正在通过创建 4 个虚拟用户为我的网站手动编写压力测试。

```
<html>
 <head>
 <script type="text/javascript">
function test() {
var myStringArray = [ "user1", "user2" , "user3" , "user4" ]
var len = myStringArray.length;
for (var i=0; i<len; ++i) {
document.inform.cid.value=myStringArray[0];
document.inform.pw.value="xxxxxx";
document.inform.submit();
}
}
</script>
 </head>

 <body>
  <form name="inform" method="post"  target="newWin" action="http://localhost:8080/logon?debug=1">
  <input type="text" name="cid" >
 <input type="password" name="pw" />
<input type="hidden" name="throttle" value="999" />
    <input type="submit" value="go" onclick="test()">
  </form>
 </body>
</html> 
```

当我运行上述程序时，它只提交一次，即最后一个用户。

我的要求是，我想用 4 个虚拟用户打开 4 个新窗口。

请让我知道，我怎样才能用 4 个虚拟用户打开 4 个新窗口。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:27:16.517

您需要为表单的`target`属性提供不同的值，以便它们在新窗口/选项卡中打开：

例如：

```
for (var i=0; i<len; ++i) {

    document.inform.target = i; // a different target each time

    document.inform.cid.value=myStringArray[0];
    document.inform.pw.value="xxxxxx";
    document.inform.submit();
} 
```

检查此**演示**（*使用 jQuery，但概念相同*）：http: [//jsfiddle.net/dvJMx/](http://jsfiddle.net/dvJMx/)

* * *

**编辑**

要在每次提交之间引入延迟，您可以执行以下操作：

**演示：http:** [//jsfiddle.net/dvJMx/1/](http://jsfiddle.net/dvJMx/1/)

```
var windowCounter = 1; // make sure you declare this globally

for (var i=0; i<len; ++i) {

    setTimeout(function() {
        document.inform.target = windowCounter++; // a different target each time

        document.inform.cid.value=myStringArray[0];
        document.inform.pw.value="xxxxxx";
        document.inform.submit();

    }, i*1000); // change 1000 to the interval you need in milliseconds

} 
```

# sql - 按列重新排序列表

> ID：13254052
> 
> 赞同：1
> 
> 时间：2012-11-06T15:20:14.303
> 
> 标签：sql, sql-server-2008

我在表中有一个“SortIndex”列，我想添加一个“案例更新”以通过传入 ID 和所选表的新位置来重新排序该表。

[SQL小提琴](http://sqlfiddle.com/#!3/d41d8/5831)

```
DECLARE @T TABLE
(
    ID int,
    Name char(1),
    SortIndex int
)

INSERT @T 
SELECT 21, 'A', 1 UNION ALL
SELECT 23, 'B', 2 UNION ALL
SELECT 35, 'C', 3 UNION ALL
SELECT 45, 'D', 4 UNION ALL
SELECT 55, 'E', 5

SELECT * FROM @T    

DECLARE @SortIndex int

/* MOVE A -> 4 */

SET @SortIndex = (SELECT SortIndex FROM @T WHERE ID = 23)

/*
UPDATE @T
    SET 
        SortIndex = CASE ... ??
*/      

/* MOVE D -> 2 */

SELECT * FROM @T 
```

这是否可以通过仅使用 case 语句来重建 sortindex 来解决这个问题？

*更新*

期望的结果

```
A -> 4

    Name SortIndex
    B     1 
    C     2
    D     3
    A     4
    E     5

    D -> 2

    A     1 
    D     2
    B     3
    C     4
    E     5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:56:21.607

使用以下代码移动和重建索引，它在所需元素之后添加元素并移动其他元素（根据注释说明回答）：

这是更苗条的版本：

```
 DECLARE @SortIndex int,@MoveTo int, @CurrentSortIndex int

SET @CurrentSortIndex  = (SELECT SortIndex FROM @T WHERE ID = 45) --D
SET @MoveTo = 2

UPDATE--D
  @T
SET
  SortIndex = @MoveTo
WHERE
  ID = 45

UPDATE
  @T
SET
  SortIndex = SortIndex - ((@MoveTo-@CurrentSortIndex)/(ABS(@MoveTo-@CurrentSortIndex)))
WHERE
(
    SortIndex BETWEEN @CurrentSortIndex AND @MoveTo
 OR
    SortIndex BETWEEN @MoveTo AND @CurrentSortIndex  
)
AND
  ID != 45 
```

将 A 移动到位置 2 的完整示例，也是 sqlfiddle 链接[http://sqlfiddle.com/#!3/d41d8/5918](http://sqlfiddle.com/#!3/d41d8/5918)：

```
DECLARE @T TABLE
(
    ID int,
    Name char(1),
    SortIndex int
)

INSERT @T 
SELECT 21, 'A', 1 UNION ALL
SELECT 23, 'B', 2 UNION ALL
SELECT 35, 'C', 3 UNION ALL
SELECT 45, 'D', 4 UNION ALL
SELECT 55, 'E', 5

DECLARE @SortIndex int,@MoveTo int, @CurrentSortIndex int
DECLARE @IDToMove INT 
SET @IDToMove = 21--A

SET @CurrentSortIndex  = (SELECT SortIndex FROM @T WHERE ID = @IDToMove) 
SET @MoveTo = 2

UPDATE
  @T
SET
  SortIndex = @MoveTo
WHERE
  ID = @IDToMove

UPDATE
  @T
SET
  SortIndex = SortIndex - ((@MoveTo-@CurrentSortIndex)/(ABS(@MoveTo-@CurrentSortIndex)))
WHERE
(
    SortIndex BETWEEN @CurrentSortIndex AND @MoveTo
 OR
    SortIndex BETWEEN @MoveTo AND @CurrentSortIndex  
)
AND
  ID != @IDToMove

SELECT * FROM @T ORDER BY SortIndex 
```

初始版本：

```
DECLARE @SortIndex int,@MoveTo int, @CurrentSortIndex int

SET @CurrentSortIndex  = (SELECT SortIndex FROM @T WHERE ID = 21) --A
SET @MoveTo = 2

UPDATE--A
  @T
SET
  SortIndex = @MoveTo
WHERE
  ID = 21

IF @MoveTo > @CurrentSortIndex

UPDATE
  @T
SET
  SortIndex = SortIndex - 1
WHERE
  SortIndex BETWEEN @CurrentSortIndex AND @MoveTo
AND
  ID != 21

 IF @MoveTo < @CurrentSortIndex

UPDATE
  @T
SET
  SortIndex = SortIndex + 1
WHERE
  SortIndex BETWEEN @MoveTo AND @CurrentSortIndex
AND
  ID != 21 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:27:24.493

```
UPDATE @T
SET SortIndex = CASE Name 
        when 'A' then 4 
        when 'D' then 2 
        else Name 
    end 
```

# android - 应用程序和服务器之间的 SQLite db 一对一同步

> ID：13254057
> 
> 赞同：2
> 
> 时间：2012-11-06T15:20:33.997
> 
> 标签：android, ios, database, sqlite, couchdb

在我的应用程序中，我有一个 SQLite DB 想要备份到服务器，但我想要的是离线备份的一对一同步（例如独立 SQLite 文件而不是集中式 MySQL 服务器，主要是性能原因，我不需要实时询问）

理想情况下，我不想每次需要同步时都上传数据库，而只希望同步更改？

是否有任何现有的解决方案？（我可以考虑使用其他文件数据库，因为目前我主要使用 SQLite 作为键值数据库）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:32:51.690

由于您愿意考虑使用不同的数据库，请查看[TouchDB-Android](https://github.com/couchbaselabs/TouchDB-Android)。这会将 Android 设备上的数据库同步到 CouchDB 服务器。有一个相关的项目 SyncPoint，它可以自动为每个用户设置一个数据库。

我们目前正在为我们的产品使用 TouchDb-iOS，并计划很快在 Android 版本上使用 TouchDB-Android。

开发社区很活跃。查看[用户组](https://groups.google.com/forum/#!forum/mobile-couchbase)。

# java - 为多个 JPanel 注册 1 个 mouseDragged 事件

> ID：13254058
> 
> 赞同：0
> 
> 时间：2012-11-06T15:20:36.237
> 
> 标签：java, swing, jpanel, mouseevent, mousemotionevent

我有一个主 JPanel，上面有两个其他 JPanel（面板 A 和面板 B），如下图所示：

![在此处输入图像描述](../Images/b362c346514add63dfc524a9276967b4.png)

我想跟踪这些 JPanel 上的 mouseDragged 事件，目前我正在为所有 3 个 JPanel 跟踪它：

```
mainPanel.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
    public void mouseDragged(java.awt.event.MouseEvent evt) {

    }
});

panelA.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
    public void mouseDragged(java.awt.event.MouseEvent evt) {

    }
});

panelB.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
    public void mouseDragged(java.awt.event.MouseEvent evt) {

    }
}); 
```

有没有办法通过只注册 1 个侦听器而不是我上面的 3 个来跟踪所有 3 个 JPanel 的 mouseDragged 事件？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:27:28.373

```
class MyMouseMotionListener implements MouseMotionListener{
    public void mouseDragged(java.awt.event.MouseEvent evt) {

    }
}

...

MouseMotionListener myListener = new MyMouseMotionListener();

mainPanel.addMouseMotionListener(myListener);
panelA.addMouseMotionListener(myListener);
panelB.addMouseMotionListener(myListener); 
```

# c# - 将二进制转换为字符串不起作用

> ID：13254060
> 
> 赞同：0
> 
> 时间：2012-11-06T15:20:44.100
> 
> 标签：c#

我创建了一个简单的程序。

我创建一个字符串并通过以下方法对其进行压缩，并将其存储在 sql server 2008 中的二进制数据字段类型（`binary(1000)`字段类型）中。

当我读取二进制数据和结果字符串时，它就像具有相同长度和数据的原始字符串数据一样，但是当我想解压缩它时，它给了我一个错误。

我使用这种方法来获取字节：

```
 System.Text.ASCIIEncoding.ASCII.GetBytes(mystring) 
```

而这种获取字符串的方法：

```
System.Text.ASCIIEncoding.ASCII.GetString(binarydata) 
```

在 VS2012 编辑器的硬代码中，结果字符串工作正常，但是当我从 sql 读取它时，它在解压方法的第一行给我这个错误：

```
 The input is not a valid Base-64 string as it contains a
 non-base 64 character, more   than two padding characters, 
 or a non-white space character among the padding characters. 
```

我的代码有什么问题？这两个字符串是相同的，但是

```
string test1=Decompress("mystring"); 
```

...此方法工作正常，但这给了我错误并且无法解压缩检索到的字符串

```
string temp=System.Text.ASCIIEncoding.ASCII.GetString(get data from sql) ;
string test2=Decompress(temp); 
```

比较这些字符串不显示任何尊重

```
int result = string.Compare(test1, test2); // result=0 
```

我的压缩方法：

```
 public static string Compress(string text)
   {
       byte[] buffer = Encoding.UTF8.GetBytes(text);
       var memoryStream = new MemoryStream();
       using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress, true))
       {
           gZipStream.Write(buffer, 0, buffer.Length);
       }

       memoryStream.Position = 0;

       var compressedData = new byte[memoryStream.Length];
       memoryStream.Read(compressedData, 0, compressedData.Length);

       var gZipBuffer = new byte[compressedData.Length + 4];
       Buffer.BlockCopy(compressedData, 0, gZipBuffer, 4, compressedData.Length);
       Buffer.BlockCopy(BitConverter.GetBytes(buffer.Length), 0, gZipBuffer, 0, 4);
       return Convert.ToBase64String(gZipBuffer);
   } 
```

我的解压方法：

```
 public static string Decompress(string compressedText)
   {
       byte[] gZipBuffer = Convert.FromBase64String(compressedText);
       using (var memoryStream = new MemoryStream())
       {
           int dataLength = BitConverter.ToInt32(gZipBuffer, 0);
           memoryStream.Write(gZipBuffer, 4, gZipBuffer.Length - 4);

           var buffer = new byte[dataLength];

           memoryStream.Position = 0;
           using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Decompress))
           {
               gZipStream.Read(buffer, 0, buffer.Length);
           }

           return Encoding.UTF8.GetString(buffer);
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:55:27.853

最可能的问题是您从 SQL 二进制文件中获取字符串的方式。

目前（我猜，您还没有展示如何从 SQL 存储或检索数据）

*   压缩：`Text -> UTF8.GetBytes -> compress -> base64 string-> Send to Sql (transformed to binary)`
*   解压：`Binary -> String representation of binary -> base64 decode -> decompress -> UTF8.GetString`

您的问题是`String representation of binary`步骤与`Send to Sql (transformed to binary)`. 如果您将其存储为 a`varbinary`您应该从 compress 和 decompress 返回字节数组应该接受一个字节数组。

```
public byte[] string Compress(string text)
{
  //Snip
}

public static string Decompress(byte[] compressedText)
{
   //Snip
} 
```

这会将您的流程更改为

*   压缩：`Text -> UTF8.GetBytes -> compress -> Send to Sql`
*   解压：`Binary -> decompress -> UTF8.GetString`

# .net - 第一个 linq 的第一个问题

> ID：13254064
> 
> 赞同：3
> 
> 时间：2012-11-06T15:20:58.830
> 
> 标签：.net, vb.net, linq, visual-studio-2008, .net-3.5

我正在使用 vs2008 框架 3.5，我第一次关注 linq，遵循这些[http://msdn.microsoft.com/it-it/library/bb385164(v=vs.90).aspx](http://msdn.microsoft.com/it-it/library/bb385164(v=vs.90).aspx)

创建像这样的数据源[http://msdn.microsoft.com/it-it/library/bb385204(VS.90).aspx](http://msdn.microsoft.com/it-it/library/bb385204(VS.90).aspx)

但我无法导入/使用 linq。制作 consoleApplication System.Core.dll 引用和导入 System.Linq 应该是自动的吧？！

主要写：

```
Dim students = GetStudents()
'Dim students As List(Of Student) = GetStudents() 'the same thing with this one
Dim studentQuery = From currentStudent In students _
                   Where currentStudent.Rank <= 10 _
                   Select currejt 
```

IDE 不喜欢查询中的学生并说：

```
Error   1   Expression of type 'System.Collections.Generic.IEnumerable(Of ConsoleApplication1.Module1.Student)' 
is not queryable. Make sure you are not missing an assembly reference and/or namespace 
import for the LINQ provider. ConsoleApplication1 
```

我哪里错了！？

如果我尝试“导入 System.Linq”，它会说

> 警告 1 在 Imports 'System.Linq' 中指定的命名空间或类型不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:28:22.530

引用和导入是不同的 - 您必须从您的项目（System.Core，System.Linq 命名空间所在的位置）引用该 dll，以便能够将其导入您的类...

右键单击 Project / References，选择添加引用，转到选项卡“.NET”并选择 System.Core。

# javascript - 如何在矩阵旋转后获得正确的 x,y 位置？

> ID：13254068
> 
> 赞同：1
> 
> 时间：2012-11-06T15:21:09.820
> 
> 标签：javascript, matrix, svg, transform, inkscape

我在论坛和当然在这里搜索了很多，但我还没有找到一个明确的解决方案。我发现了[类似的问题](https://stackoverflow.com/questions/11535621/how-we-get-x-and-y-from-the-transfrom-matrix)，但它不起作用。

当我画一个矩形时，Inkscape 会给出准确的 x 和 y 位置。但是，当我旋转时，它会将 x 和 y 位置更改为难以理解的值。例如：

```
<rect
   id="rect2985"
   width="100"
   height="100"
   x="100"
   y="100" /> 
```

没关系，但是当旋转时，看看“transform”属性和x，y：

```
<rect
   id="rect2985"
   width="100"
   height="100"
   x="4.9038105"
   y="154.90381"
   transform="matrix(0.8660254,-0.5,0.5,0.8660254,0,0)" /> 
```

我如何计算从 x=4.9... 和 y=154.9... 或矩阵值获得 x=100 y=100？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:52:55.143

如果要保留这些`x=100 y=100`值，则必须计算不同的转换矩阵。在正方形中心上的旋转相当于 3 次变换：

```
 translate(-(x + centerX), -(y + centerY))
 rotate(angle)
 translate(x + centerX, y + centerY) 
```

在您的情况下，转换属性将类似于：

```
 transform = "translate(150, 150) rotate(45) translate(-150, -150)" 
```

我不确定您是否对数学感兴趣，或者只是想要转换矩阵。如果你只想要最终的矩阵值，你可以看看这个小提琴：http: [//jsfiddle.net/mihaifm/PQvBj/](http://jsfiddle.net/mihaifm/PQvBj/)

我曾经`getCTM`获取矩阵`a,b,c,d,e,f`值。

最终结果（假设旋转 45 度）：

```
<rect
   id="rect4"
   width="100"
   height="100"
   x="100"
   y="100"
   transform="matrix(0.7071067811865476, 0.7071067811865475, -0.7071067811865475, 0.7071067811865476, 150, -62.132034355964265)" /> 
```

# javascript - 如何获得相对于屏幕的视口位置？

> ID：13254070
> 
> 赞同：9
> 
> 时间：2012-11-06T15:21:15.827
> 
> 标签：javascript

### 我的问题

什么 JavaScript 代码会告诉我**浏览器的****视口**相对于**屏幕**的位置？

 ****### 语境

我的 Web 应用程序包含一个小程序，它允许通过*java.awt.Robot*拍摄快照（小程序的 jar 当然是签名的，并且有权执行此操作）。

问题是机器人的*createScreenCapture*使用相对于整个屏幕的矩形，而我想捕获相对于视口的矩形。

浏览器显然可以在屏幕上的任何位置，但即使它被最大化（因此从屏幕的左上角开始，即 {0,0}）我仍然不知道内容被向下推了多少，因为窗口标题或一些工具栏。

### 到目前为止我的研究

似乎只有 IE 通过*window.screenTop/Left*给出视口位置。

Chrome 支持这些，但它们占据了浏览器的位置。

FF 不支持这些，而是​​具有*screenX/Y*，但与 Chrome 一样，它们占据了浏览器的位置。

### 确保我们都使用相同的术语

**屏幕**- 又名桌面。例如，我有一个 WSXGA+ (1680x1050) 显示器。我使用 Windows，我的任务栏总是显示在底部，因此它垂直消耗大约 50 像素。

**浏览器**- 一个可能有也可能没有各种工具栏的窗口：顶部的地址和/或书签栏，底部的状态/附加栏等。

**视口**- 实际呈现 URL 的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:56:34.923

Jon Hulka 的回答完全赢得了他的赞誉——对我来说非常完美！

如果其他人来到这里并需要不使用小程序的解决方案（我的问题要求 JavaScript 代码），他们可以尝试下面的（妥协*）解决方案。

*= 它假定浏览器的窗口底部没有太多东西。

```
function cacheElemImage(element) {
    var x, y, pos = findPosition(element);
    // screenTop/Left supported on all except FF. screenX/Y supported on all except IE.
    // In addition IE returns viewport top/left while FF & Chrome return browser window top/left.
    // Opera & Safari yet to be tested.
    if (isIE()) {
        x = window.screenLeft;
        y = window.screenTop;
    } else {
        var borderWidth = (window.outerWidth - window.innerWidth) / 2;
        x = window.screenX + borderWidth;
        y = window.screenY + window.outerHeight - window.innerHeight - borderWidth;
    }
    x += pos[0]; // adjust for the element position
    y += pos[1];
    var width  = element.offsetWidth;
    var height = element.offsetHeight;
    cacheImage(x, y, width, height); // call the applet with the Robot
}

function findPosition(oElement) {
    if (typeof(oElement.offsetParent) != 'undefined') {
        for (var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent) {
            posX += oElement.offsetLeft;
            posY += oElement.offsetTop;
        }
        return [posX, posY];
    } else {
        return [oElement.x, oElement.y];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:23:44.867

您的小程序通过 getLocationOnScreen() 知道它的位置

这是一个 Java 小程序，当您在其中时，它会打印鼠标光标的屏幕位置：

ScreenTest.java：

```
import java.awt.Point;
import java.awt.Graphics;
import java.applet.Applet;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseEvent;
public class ScreenTest extends Applet implements MouseMotionListener
{
    public ScreenTest()
    {
        this.addMouseMotionListener(this);
    }
    public void mouseDragged(MouseEvent e)
    {
    }
    public void mouseMoved(MouseEvent e)
    {
        Graphics g = getGraphics();
        Point loc=getLocationOnScreen();

        String s=(loc.getX()+e.getX())+":"+(loc.getY()+e.getY());
        g.clearRect(0,0,1000,100);
        g.drawString(s, 10, 10);
    }
} 
```

屏幕测试.html：

```
<html>
    <head></head>
    <body>
        <applet code="ScreenTest.class" name="screenTest" height=100 width=1000></applet>
    </body>
</html> 
```

这是一个由 javascript 调用的更简单的示例。小程序在页面的左上角是 1px x 1px。

ScreenTest2.java：

```
import java.awt.Point;
import java.applet.Applet;
public class ScreenTest2 extends Applet
{
    public String test(int x, int y)
    {
        Point loc=getLocationOnScreen();
        return (loc.getX()+x)+":"+(loc.getY()+y);
    }
} 
```

屏幕测试2.html：

```
<html>
    <head></head>
    <body onclick="buttonClick(event);" style="margin:0; border:0; height:800px">
        <applet code="ScreenTest2.class" name="screenTest2" height=1 width=1></applet>
    </body>
    <script>
        function buttonClick(evt)
        {
            alert(screenTest2.test(evt.clientX,evt.clientY));
        }
    </script>
</html> 
```****

# shell - 可以在 unix bash 脚本中嵌套 Here Document 吗？

> ID：13254077
> 
> 赞同：19
> 
> 时间：2012-11-06T15:21:33.400
> 
> 标签：shell, unix, heredoc

是否可以在另一个heredoc 中编写heredoc？

```
ssh -T -q yxz@server1 <<-"END_TEXT"
.
.
    ssh -T -q abc@server2 <<-"SUB_TEXT"
    .
    .
    SUB_TEXT
.
.
END_TEXT 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-06T15:29:52.867

### 是的

但是，如果缩进是用实际的制表符完成的，嵌套的 heredoc 终止符只会在缩进时被识别。空间将不起作用。

所以你可能想做更多类似的事情：

```
ssh s1 << \eof1
  ssh s2 << \eof2
    hostname
eof2
eof1 
```

# c# - 阻止 dll 使用 exe.config 文件

> ID：13254078
> 
> 赞同：2
> 
> 时间：2012-11-06T15:21:34.163
> 
> 标签：c#, .net, xml, app-config

我有一个 C#.NET dll，它被插入到由 VC++ 代码构建的主可执行文件中（不针对 .NET）。这个主 exe 有一个 exe.config 文件，它只是用作普通的 xml 文件（使用非验证解析器） .但是当dll中的一些内部代码（oledbconnection）试图加载配置文件并且因为它发现这个配置文件无效时，问题就来了，它崩溃了。我什至不需要 exe.config 文件中的任何值，所以我可以放心地忽略它。所以我需要在这里做的是阻止 dll 使用 exe.config 或告诉 dll 它的有效配置文件（即使它不是）。我怎样才能做到这一点？还是有其他方法？

PS：我无法更改 exe.config 文件并将其设为有效文件

# android - 使用除文件名外的首选项编辑文本

> ID：13254079
> 
> 赞同：0
> 
> 时间：2012-11-06T15:21:36.847
> 
> 标签：android, preferences

我有一个应用程序，可以在外部存储中搜索我想要的文件。例如名为 sound1.mp3 的歌曲`String path = getFullFilePath(getApplicationContext(), "sound1.mp3);`。我将加载的声音用于 soundpool。我想从 Preference Edittext 获取文本并使用它，除了“sound1.mp3”。我试过这个：

```
super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         SharedPreferences getPrefs = PreferenceManager
                    .getDefaultSharedPreferences(getBaseContext());
            SharedPreferences settings = getSharedPreferences("EditText",0);
            String zipStr = settings.getString("ime", "");   
        sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
        String path = getFullFilePath(getApplicationContext(), zipStr);
        Log.d("ime", "Path: " + path);
        mSoundId = sp.load(path, 1); 
```

LogCat 给出了这个：

```
11-06 15:57:59.169: D/ime(5688): Path: /mnt/sdcard
11-06 15:57:59.539: E/SoundPool(5688): Unable to load sample: (null)
11-06 15:58:01.149: W/asset(5688): deep redirect failure from 0x0103003e => 0x02060007, defStyleAttr=0x00000000, defStyleRes=0x00000000, style=0x00000000
11-06 15:58:17.509: W/SoundPool(5688):   sample 1 not READY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:50:39.810

根据您的 LogCat，您存储的路径`zipStr`是，`/mnt/sdcard`

`SoundPool.load`需要音频文件的路径（参见文档：[SoundPool.load()](http://developer.android.com/reference/android/media/SoundPool.html#load%28java.lang.String,%20int%29)）。

确保你`zipStr`的等于`/mnt/sdcard/sound1.mp3`.

# single-sign-on - 使用 ssoadmin 创建 sp.xml 时出现异常

> ID：13254083
> 
> 赞同：0
> 
> 时间：2012-11-06T15:21:51.170
> 
> 标签：single-sign-on, openam

当我尝试使用 ssoadmin 创建 sp.xml 时，我遇到了这个异常：

com.sun.identity.cli.CLIException：AdminTokenAction：致命错误：无法获取应用程序 SSO 令牌。检查 AMConfig.properties 以获得以下属性 com.sun.identity.agents.app.username com.iplanet.am.service.password at com.sun.identity.cli.LogWriter.log(LogWriter.java:109) at com。 sun.identity.cli.Authenticator.ldapLogin(Authenticator.java:170) 在 com.sun.identity.cli.AuthenticatedCommand.ldapLogin(AuthenticatedCommand.java:144) 在 com.sun.identity.federation.cli.CreateMetaDataTemplate.handleRequest( CreateMetaDataTemplate.java:113) 在 com.sun.identity.cli.SubCommand.execute(SubCommand.java:291) 在 com.sun.identity.cli.CLIRequest.process(CLIRequest.java:212) 在 com.sun.identity .cli.CLIRequest.process(CLIRequest.java:134) 在 com.sun.identity.cli.CommandManager.serviceRequestQueue(CommandManager.java:

我还尝试在 ssoamdin.bat 中添加类似的内容：-D"com.iplanet.am.naming.map.site.to.server=https://lb.example.com:443/openam=http:/ /server1.example.com:8080/openam"

但同样的例外......如何解决它？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:32:52.627

仅当您配置了站点且运行 ssoadm 的主机无法与 siteURL 通信时，才需要“map-to-site”属性。

您可以在 ssoadm.bat 中将 -Dcom.iplanet.services.debug.level=message -Dcom.iplanet.services.debug.directory=WRITABLE_EXISTING_DIRECTORY' 设置为 JVM 选项。

然后，您可以查看调试目录，您应该会发现一个指针出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:05:58.230

当我转到 ssoadmin 文件夹 openam/bin 并找到 ssoadm.bat 文件并在编辑模式下打开它并在 java comaand 中添加以下两行时，上面的内容得到了排序：

-D"javax.net.ssl.trustStore=F:\tomcatsslkeystore"（tomcat 密钥库路径） -D"javax.net.ssl.trustStorePassword=tomcatsslkeystore"（tomcat 密钥库密码）

# oop - “访客”有很多不同类型的对象

> ID：13254091
> 
> 赞同：1
> 
> 时间：2012-11-06T15:22:30.477
> 
> 标签：oop, design-patterns

在一个应用程序中，我有很多 dirrerent 对象，比如说：正方形、圆形等......很多不同的形状 ---> 我很抱歉这个微不足道的例子。

对于所有这些对象，我想创建一个不同类型的文档：xml、txt、html 等。（例如：我想扫描所有对象（形状）树并生成 xml 文件。

我认为的自然方法是访问者模式，我尝试过并且它有效:-) - 所有对象都有一个接受 IVisitor 接口的访问方法。- 对于我想要创建的每一种类型，我都有一个具体的访问者：（`XmlVisitor`、、`TxtVisitor`等）。每个访问者对每种对象都有一个“访问”方法。

我的疑问是......如果我有很多对象，它似乎不能很好地扩展......从逻辑的角度来看没关系，我只需在具体的访问者中添加新的形状和方法，就这样。

你怎么看 ？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:04:26.147

我认为您已经正确实现了访问者模式，因此您还实现了双重调度机制。如果您认为“不能很好地缩放”是在添加新形状和/或访问者的情况下需要添加一堆方法，那么它只是模式的副作用。有些人认为这种“方法爆炸”是有害的，并选择了不同的实现方式，例如使用“决策矩阵”对象。特别是对于这个例子，我认为 DD 方法是要走的路，实际上它确实可以很好地扩展，因为您在添加新要求时添加新方法（即在添加新形状或添加新形状时添加新的 visit* 方法一个新的访问者类，因为需要新的文档类型）。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:58:10.853

在我看来，您最担心的是您正在匹配许多不同类型的对象，并且担心随着越来越多的对象类型添加，性能会受到影响。不过，我认为您不必担心：访问者模式的性能不会真正受到潜在对象或访问者数量的影响，因为它基于虚拟表查找 - 传递的对象将包含指向（链接到）应该调用的方法。

因此，访问者模式虽然在间接访问方面相对昂贵，但在这方面是可扩展的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:10:45.827

我相信你有：

1.  类层次结构（`Shape`在您的示例中为 s ）和
2.  对类层次结构的操作（您的示例中`exportXML`的`exportToHTML`等）

你必须考虑什么更有可能改变——

1.  如果类层次结构或多或少是固定的，但您希望将来添加更多操作，您应该选择**访问者模式。**访问者模式将允许您在不触及现有类层次结构的情况下添加更多操作（例如 JSON 导出）。

2.  OTOH，如果操作或多或少是固定的，但可以添加更多 Shape 对象，那么您应该使用常规继承。定义一个`ShapeExport`接口，该接口具有诸如等方法`exportToXML`。`exportToHTML`让所有形状实现该接口。现在您可以添加实现相同接口的新形状，而无需触及现有代码。

# javascript - 是否可以在 CSS3 或 Javascript 中将字母映射到圆柱体或球体？

> ID：13254094
> 
> 赞同：3
> 
> 时间：2012-11-06T15:22:36.187
> 
> 标签：javascript, css

我在 CSS3 中看到一张映射到圆柱体的图片，我想知道这是否可以通过文本实现。更好的方法是将文本映射到一个球体。如果纯 CSS 无法实现，则可以选择 Javascript。

它必须在所有主流浏览器上运行，包括那些没有 -webkit- 的浏览器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:01:45.477

正如评论中提到的，CSS3 仅支持旋转和倾斜元素，不支持球体。

尽管您可以使用 Raphael.js 之类的东西在 SVG 中[伪造一个球体](http://raphaeljs.com/ball.html)，但我认为没有任何真正支持使用矢量图形进行 3D 工作。您必须自己使用一些疯狂的数学来映射/包装/倾斜文本，而且它甚至可能仍然不可能。

我认为你唯一真正的希望是使用像 three.js 这样的东西来创建一个实际的立方体对象。然后，您可以将文本写入隐藏的画布元素以获取文本的图像，并将图像作为材质映射到立方体上，[如本例所示](http://mrdoob.github.com/three.js/examples/webgl_materials_cubemap_escher.html)。

# makefile - makefile 中的冒号

> ID：13254095
> 
> 赞同：1
> 
> 时间：2012-11-06T15:22:40.433
> 
> 标签：makefile

我曾经在 Makefile 中的代码中看到以下内容。中间的冒号是什么意思？

```
 export LD_LIBRARY_PATH=/e3rd/lib:/3rd/im/lib 
```

它看起来与来自冒号的[冒号和 makefile 中的 $](https://stackoverflow.com/questions/784392/colon-and-in-makefile)不同。

如果您也能告诉我它的潜在用途是什么，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:26:09.910

这只是路径的分隔符。这是在 LD_LIBRARY_PATH 中分隔路径的语法。与makefile无关。

# android - 让它在后台运行 X 小时后如何测试应用程序？

> ID：13254098
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:22:42.927
> 
> 标签：android, testing

我的应用程序中遇到的错误仅在应用程序在后台运行数小时后才会出现。有时“许多小时”是 24 或 36。如果我必须等待那么长时间，很难尝试修复这些错误。我有哪些选择？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:46:22.397

我知道一种不幸的是依赖于 Android 版本和提供程序 ROM 的方法。

```
Settings->Developer Options->Do not keep activities. 
```

设置此项，然后将您的应用程序置于后台。您的活动将立即被销毁。然后恢复您的应用程序。错误将显示。

您可能还想查看如何以及何时在 onPause() 和 onResume() 之间保存实例状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:28:01.990

`onResume()`一个可能的问题是，由于内存管理以及当您的应用程序在获得空异常后通过生命周期返回时，您的某些变量（例如全局变量）被清除了。

您可以尝试做的是将其中一些变量保留在 sharedpreferences 中，`onPause()`或者在 onResume、onStart 和 onCreate 中进行空检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:31:11.310

如果您需要在后台长时间运行进程，请使用[服务](http://developer.android.com/guide/components/services.html)

# jquery - 将过滤器添加到列表

> ID：13254102
> 
> 赞同：1
> 
> 时间：2012-11-06T15:22:50.090
> 
> 标签：jquery

> **可能的重复：**
> [jquery 删除重复的 li](https://stackoverflow.com/questions/3838845/jquery-remove-duplicate-li)

我有一个如下所示的列表：http: [//jsfiddle.net/UwPTF/](http://jsfiddle.net/UwPTF/)

```
<ul class="uol">
      <li>beta</li>
      <li>gamma</li>
      <li>alpha</li>
    <li>beta</li>
    <li>zeta</li>
    <li>BETA</li>            
</ul> 
```

我有 2 个按钮，一个用于突出显示重复的项目，另一个用于删除重复的项目。

我正在尝试使用过滤器功能。如果您能解释您的代码，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:03:14.137

**HTML**

```
<ul id="list" class="uol">
  <li>beta</li>
  <li>gamma</li>
  <li>alpha</li>
  <li>beta</li>
  <li>zeta</li>
  <li>BETA</li>            
</ul>

<input id="find" type="button" value="Find" />
<input id="remove" type="button" value="Remove" />​ 
```

**JavaScript**

```
$('#find').click(function(){
  $('#list li').filter(function(){
    return $(this).siblings().text().toUpperCase().indexOf($(this).text().toUpperCase()) != -1;
  }).addClass('selecteditems');
});

$('#remove').click(function(){
  var removed = [];
  $('.selecteditems').each(function(i, item){
    if($.inArray($(item).text().toUpperCase(), removed) != -1){
      $(item).remove();
    }
    else{
      removed.push($(item).text().toUpperCase());
      $(item).removeClass('selecteditems');
    }
  });
});​ 
```

当您单击查找按钮时，过滤器将应用于`<li>`无序列表中带有 id 的每个项目`list`。然后它获取所有其他`<li>`项目的，将它们的文本一起添加到一个字符串中并将其大写。然后它检查当前`<li>`项目是否包含在该字符串中。如果它在那里，它会返回 true 以便将类`selecteditems`添加到其中。

当您单击删除按钮时，它会删除除第一`<li>`项之外的所有内容`selecteditems`，并从第一项中删除该类`<li>`。

[**在这里查看。**](http://jsfiddle.net/UwPTF/7/)

* * *

如果您想绝对确定您正在检查单个项目而不是检查所有项目的字符串，您可以将查找代码更改为：

```
$('#find').click(function(){
  $('#list li').filter(function(){
    var sibs = [];
    $.map($(this).siblings(), function(sibling){
      sibs.push($(sibling).text().toUpperCase());
    });
    return $.inArray($(this).text().toUpperCase(), sibs) != -1;
  }).addClass('selecteditems');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:01:53.997

好吧，您必须将每个项目与所有其他项目进行比较。为了有效地完成它，我将对所有列表项进行两个普通循环：在第一个循环中计算每个项目根据其文本出现的次数，然后在第二个循环中仅过滤计数大于 1 的项目。

代码如下所示：

```
function GetDupeItems() {
    var oList = $(".uol");
    var allItems = oList.find("li");
    var mapping = {};
    allItems.each(function(index) {
        var text = $(this).text().toLowerCase();
        if (!mapping[text])
            mapping[text] = 0;
        mapping[text]++;
    });

    return allItems.filter(function() {
        return (mapping[$(this).text().toLowerCase()] > 1);
    });
} 
```

现在标记重复项有：

```
GetDupeItems().addClass('duplicate'); 
```

它会添加一个类（例如红色）并隐藏：（基本上从显示中删除）

```
GetDupeItems().hide(); 
```

[现场测试用例](http://jsfiddle.net/UwPTF/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:06:07.067

以下将起作用，利用该`filter`功能。

```
$('#find, #remove').click(function(e) {
  $('.uol > li').each(function() {
    var $this = $(this);
    var thisText = $this.html().toUpperCase();

    var count = $('.uol > li').filter(function() {
      return $(this).html().toUpperCase() == thisText;
    }).length;

    if (count > 1) {
      if (e.target == $('#find')[0]) {
        $this.addClass('duplicate');
      } else {
        $('.uol > li').removeClass('duplicate');
        $this.remove();   
      }     
    }

  });
}); 
```

所以基本上，循环遍历每个列表元素，然后使用该`filter`函数检索列表中有多少元素与当前具有相同文本的元素的计数，如果该计数大于 1，则为元素指定类`duplicate`（注意：这是未优化）。

[这是一个小提琴](http://jsfiddle.net/vPHrc/10/)

# c# - 如何动态调整 GridView 项的大小？

> ID：13254107
> 
> 赞同：4
> 
> 时间：2012-11-06T15:23:22.193
> 
> 标签：c#, xaml, gridview, windows-8, windows-runtime

我有一个网格视图，用于显示“标签”，它是大小动态的字符串列表。使用以下代码：

```
<GridView ItemsSource="{Binding Tags}" 
          ItemTemplate="{StaticResource TagTemplate}" 
          VerticalAlignment="Bottom"
          Grid.RowSpan="2"
          SelectionMode="None"
          /> 
```

我对这些项目使用以下模板：

```
<DataTemplate x:Name="TagTemplate">
    <Border BorderBrush="Gray" BorderThickness="1" Opacity="75">
        <TextBlock Text="{Binding}"/>
    </Border>
</DataTemplate> 
```

添加到 Grid 时，每个项目的大小与第一个项目的大小相同：

![在此处输入图像描述](../Images/559f9aa86c9f7ca76e148b6b8cb86c3a.png)

如何动态调整 GridView 中的项目大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:01:48.883

所以像;

```
<ScrollViewer>
    <ItemsControl ItemsSource="{Binding Tags}">
        <!-- ItemsPanelTemplate -->
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
                <!-- Or use WrapPanel depending on its display -->
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <!-- ItemContainerStyle -->
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border BorderBrush="Gray" BorderThickness="1" Opacity="75" Padding="3" Margin="3,0">
                     <TextBlock Text="{Binding}"/>
                </Border>                             
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</ScrollViewer> 
```

# php - facebook PHP api停止工作

> ID：13254108
> 
> 赞同：0
> 
> 时间：2012-11-06T15:23:30.057
> 
> 标签：php, facebook

我正在尝试编写一个应用程序，它将用户制作的图像发布到 Facebook 用户的墙上，它一直工作到大约一个小时前，现在我收到一个错误“必须使用活动访问令牌来查询信息”关于当前用户。”。希望有人能快速回答:)

这是我获取用户并检查专辑的起始 PHP

```
<?php
    include 'src/facebook.php';
    $facebook = new Facebook(array(
        'appId' => ID,
        'secret' => SECRET,
        'cookie' => true
        ));

    $me = null;
    $thisPhoto = null;
    $album_name = NAME;
    $album_message = MESSAGE;

    try {
        $me = $facebook->api('/me');
        $facebook->setFileUploadSupport(true);      
        // check if album with name exists...if not create it
        $albums = $facebook->api('/me/albums');
        foreach($albums['data'] as $album)  {
            if($album['name'] == $album_name) {
                $album_uid = $album['id'];
                }
            }
        if (!$album_uid) {
            $album_details = array(
                'message'=> $album_message,
                'name'=> $album_name
                );
            $create_album = $facebook->api('/me/albums', 'post', $album_details);
            $album_uid = $create_album['id'] . "MADE";
            }
        //echo "<!-- $album_uid -->\n";
        }
    catch (FacebookApiException $e) {
        echo "<!-- " . $e->getMessage() . " -->\n";
        }
?> 
```

这是我的主要 HTML（上面是在 doctype 之前调用的）

```
<!doctype>
<html>
    <head>
        <meta charset=utf-8>
        <title>'TITLE</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css" media="screen">
            html, body { width:100%; background-color: #FFF;}
            body {  margin:0 auto; padding:0; width:760px}
            #flashContent { width:100%; height:100%; }
        </style>
    </head>
<body>

<?php   
    //print_r($me);
    //echo $facebook->getUser();
    //echo $facebook->getAccessToken();

    // START
    if($me) {
        // true makes print_r give human readable instead of just a screen dump
        //echo '<pre>' . print_r($VARIABLE, true) . '</pre>';
        $appName = NAME.SWF;
        $appWidth = "760";
        $appHeight = "640";
        $appID = "stache_yerself";
        $appAlt = "Square Shooters app - 'Stache Yerself";
        // ECHOS out HTML used for the APP
    }
    else {
        $loginUrl = $facebook->getLoginUrl(array('scope' => 'publish_stream,read_friendlists,user_photos'));
        echo '<a href="' . $loginUrl . '">Login</a>';
    }
?>
</body>
</html> 
```

上面的 else 给出了一个链接；但是，它什么也不做，只是转到一个空白页面。我在应用程序的开发者页面上重置了“秘密”，但没有帮助。我不知道它为什么停止工作（Facebook 是否再次更改了他们的代码？）。甚至 HTML 部分的登录内容在之前和现在都可以正常工作......什么也没有。我很困惑为什么这只是停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:26:28.010

您是否达到了开发帐户的 API 限制？

您可以在 600 秒内进行 600 次查询。

此外，这可能会有所帮助

[https://www.facebook.com/help/210701362295828/](https://www.facebook.com/help/210701362295828/)

# mysql - 如何确定一行在有序 SQL 表中的位置？

> ID：13254109
> 
> 赞同：1
> 
> 时间：2012-11-06T15:23:32.473
> 
> 标签：mysql, sql

我有一个用户表和一个“积分”列。我想确定按“点”排序的所有用户的行数/位置。

我可以获取所有用户数据的结果，然后执行 while 循环，并在 id 等于必要用户时停止。但我相信有一种更有效的方法可以做到这一点，因为我的表将包含约 100 000 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:27:44.283

尝试这个：

```
SET @rownum = 0; 
Select sub.*, sub.rank as Rank
FROM
(
   Select *,  (@rownum:=@rownum+1) as rank
   FROM   users
   ORDER BY points 
) sub
WHERE rank = 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:27:53.510

您需要记录的行号

[这是](http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/)在 MySQL 中执行此操作的好方法

它看起来像这样

```
SELECT rank_user.* 
FROM 
(
   SELECT @rownum:=@rownum+1 ‘rank’, p.* 
   FROM user u, (SELECT @rownum:=0) r   
   ORDER BY points DESC
) rank_user 
WHERE rank BETWEEN 2 AND 4; 
```

# python - 根据用户来自哪个页面来区分用户。姜戈

> ID：13254113
> 
> 赞同：2
> 
> 时间：2012-11-06T15:23:50.587
> 
> 标签：python, django, django-templates

我想知道是否有办法根据用户来自哪个页面来区分用户。

在我的模板中，我只想在用户来自特定视图时才显示某些内容（我不想显示我为其他用户显示的同一页面，而是添加一个弹出窗口告诉他一些事情）。

有没有办法做到这一点？

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:36:20.670

如果可能，请使用[HTTP_REFERER 请求标头](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.META)。这在大多数情况下都有效。如果没有，那么您必须在会话中维护它。

要了解 URL 调用的视图函数，请使用`django.core.urlresolvers.resolve`. 我认为这没有记录，但它非常简单，例如：

```
In [1]: from django.core import urlresolvers

In [2]: urlresolvers.resolve('/admin/')
Out[2]: ResolverMatch(func=<function index at 0xadb1924>, args=(), kwargs={}, url_name='index', app_name='admin', namespace='admin')

In [3]: urlresolvers.resolve('/admin/').func
Out[3]: <function django.contrib.admin.sites.index> 
```

[现在，在自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)中对 HTTP_REFERER 使用它可能如下所示：

```
from django import template
from django.core import urlresolvers

from yourapp.views import specific_view

register = template.Library()

@register.filter
def comes_from_specific_view(request):
    if not request.META.get('HTTP_REFERER', None):
        return False

    return urlresolvers.resolve(request.META['HTTP_REFERER']).func == specific_view 
```

在模板中：

```
{% if request|comes_from_specific_view %}show popup{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:33:53.010

有几种方法可以做到这一点：

*   您可以在第一个视图中设置 cookie，并在目标视图中检查其值。如果用户在两者之间浏览另一个页面，请不要忘记清理 cookie。缺点是用户可以在其浏览器中禁用 cookie。
*   根据用户转到目标视图（链接或表单）的方式，您可以使用 GET 或 POST 参数。
*   使用[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:37:26.490

我能想到的最直接的通用方法是制作一个中间件类，将先前的请求路径保存在用户会话中，然后`{{ user.session.previous_page }}`在模板中使用。例如：

```
class ReferrerMiddleware(object):
    def process_request(self, request):
       if request.user.is_authenticated():
           request.user.session['previous_page'] = request.session['current_page']
           request.user.session['current_page'] = request.path 
```

# r - 在列表上应用嵌套循环时遇到问题

> ID：13254114
> 
> 赞同：0
> 
> 时间：2012-11-06T15:23:55.077
> 
> 标签：r

我有一个由 3 个元素组成的列表：

```
datalist=list(a=datanew1,b=datanew2,c=datanew3) 
```

数据列表$a：

```
 Inv_ret Firm size  leverage        Risk  Liquidity Equity
17  0.04555968  17.34834 0.1323199 0.011292273 0.02471489      0
48  0.01405835  15.86315 0.6931730 0.002491093 0.12054914      0
109 0.04556252  16.91602 0.1714068 0.006235836 0.01194579      0
159 0.04753472  14.77039 0.3885720 0.007126830 0.06373028      0
301 0.03941040  16.94377 0.1805346 0.005450653 0.01723319      0 
```

数据列表$b：

```
 Inv_ret Firm size   leverage        Risk  Liquidity      Equity
31  0.04020832  18.13300 0.09326265 0.015235240 0.01579559 0.005025379
62  0.04439078  17.84086 0.11016402 0.005486982 0.01266566 0.006559096
123 0.04543250  18.00517 0.12215307 0.011154742 0.01531451 0.002282790
173 0.03960613  16.45457 0.10828643 0.011506857 0.02385191 0.009003780
180 0.03139643  17.57671 0.40063094 0.003447233 0.04530395 0.000000000 
```

数据列表$c：

```
 Inv_ret Firm size   leverage       Risk   Liquidity      Equity
92  0.03081029  19.25359 0.10513159 0.01635201 0.025760806 0.000119744
153 0.03280746  19.90229 0.11731517 0.01443786 0.006769735 0.011999005
210 0.04655847  20.12543 0.11622403 0.01418010 0.003125632 0.003802365
250 0.03301018  20.67197 0.13208234 0.01262499 0.009418828 0.021400052
282 0.04355975  20.03012 0.08588316 0.01918129 0.004213846 0.023657440 
```

我正在尝试`cor.test`在`datalist`上面创建一个：

```
Cor.tests=sapply(datalist,function(x){ 
  for(h in 1:length(names(x))){

    for(i in 1:length(names(x$h[i]))){
      for(j in 1:length(names(x$h[j]))){
      cor.test(x$h[,i],x$h[,j])$p.value 

    }}}}) 
```

但我得到一个`error`：

```
Error in cor.test.default(x$h[, i], x$h[, j]) : 
  'x' must be a numeric vector 
```

关于我做错了什么的任何建议？

PS如果我只有一个数据框，`datanew1`：

```
 Inv_ret Firm size  leverage        Risk  Liquidity Equity
17  0.04555968  17.34834 0.1323199 0.011292273 0.02471489      0
48  0.01405835  15.86315 0.6931730 0.002491093 0.12054914      0
109 0.04556252  16.91602 0.1714068 0.006235836 0.01194579      0
159 0.04753472  14.77039 0.3885720 0.007126830 0.06373028      0
301 0.03941040  16.94377 0.1805346 0.005450653 0.01723319      0 
```

我用这个`loop`：

```
results=matrix(NA,nrow=6,ncol=6)
for(i in 1:length(names(datanew1))){
  for(j in 1:length(names(datanew1))){
    results[i,j]<-cor.test(datanew1[,i],datanew1[,j])$p.value 

}} 
```

输出是：

```
results :
             [,1]         [,2]         [,3]         [,4]         [,5]        [,6]
[1,] 0.000000e+00 7.085663e-09 3.128975e-10 3.018239e-02 4.806400e-10 0.475139526
[2,] 7.085663e-09 0.000000e+00 2.141581e-21 0.000000e+00 2.247825e-20 0.454032499
[3,] 3.128975e-10 2.141581e-21 0.000000e+00 2.485924e-25 2.220446e-16 0.108643838
[4,] 3.018239e-02 0.000000e+00 2.485924e-25 0.000000e+00 5.870007e-15 0.006783324
[5,] 4.806400e-10 2.247825e-20 2.220446e-16 5.870007e-15 0.000000e+00 0.558827862
[6,] 4.751395e-01 4.540325e-01 1.086438e-01 6.783324e-03 5.588279e-01 0.000000000 
```

这正是我想要的。但我想得到 3 个矩阵，一个用于`datalist`上述每个元素。

`EDIT`: 如果我按照 Joran 所说的那样做：

```
Cor.tests=lapply(datalist,function(x){ 

  results=matrix(NA,nrow=6,ncol=6)
  for(i in 1:length(names(x))){
    for(j in 1:length(names(x))){
      results[i,j]<-cor.test(x[,i],x[,j])$p.value 
    }}}) 
```

我得到：

```
$a
NULL

$b
NULL

$c
NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:14:14.550

这可以在没有`for`循环的情况下完成。

1) 以 R 为底的解决方案：

```
lapply(datalist,
       function(datanew) outer(seq_along(datanew),
                               seq_along(datanew),
                               Vectorize(function(x, y)
                                            cor.test(datanew[ , x],
                                                     datanew[ , y])$p.value))) 
```

2）包装解决方案`psych`：

```
library(psych)
lapply(datalist, function(datanew) corr.test(datanew)$p) 
```

* * *

问题中方法的修改版本：

```
lapply(datalist, function(x) { 
                    results <- matrix(NA,nrow=6,ncol=6)
                    for(i in 1:6){
                       for(j in 1:6){
                          results[i,j]<-cor.test(x[,i],x[,j])$p.value 
                       }
                    }
                    return(results)
                 }) 
```

这些命令有两个主要问题：

1.  `results`未返回矩阵。我添加`return(results)` 到函数中。

2.  您想要一个 6 x 6 矩阵，而您的数据框有七列。我在 循环中`1:length(names(x))`替换为。`1:6``for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:59:05.897

我不会尝试为您提供工作代码，但希望接下来的内容将有助于解释您尝试的内容为何不起作用。

`sapply`让我们看一下您通话的前几行：

```
Cor.tests=sapply(datalist,function(x){ 
  for(h in 1:length(names(x))){
    for(i in 1:length(names(x$h[i]))){ 
```

让我们在这里停下来想一想`x$h[i]`。此时，`x`参数是否传递给您的匿名函数`sapply`（可能是数据框或矩阵，我无法从您的问题中确定它是什么）。

此时在您的代码中，什么是`h`？`h`是前一个`for`循环中的索引变量，因此初始`h`值为 1。该运算符用于按*名称*`$`从对象中选择项目。有什么东西在命名吗？我想不是。*`x``h`*

 *但是，当您尝试在名为inside`i`的这个不存在的事物中选择第 th 个元素时，情况会变得更糟。老实说，我什至不确定 R 的解释器会用它做什么，因为您在表达式中引用了应该定义. 圆形的，有人吗？`h``x``i``i`

如果您只是在第三个 for 循环中删除所有尝试，您应该有更多的运气。只需获取工作版本，将其放入匿名函数的主体中，然后将每次出现的地方都替换`datanew1`为`x`.

祝你好运。

`lapply`（PS - 您可能希望对而不是的输出更满意`sapply`）*

# javascript - 如何创建一个精美的文件上传按钮？

> ID：13254118
> 
> 赞同：1
> 
> 时间：2012-11-06T15:24:12.583
> 
> 标签：javascript, jquery, html, css

我知道已经有很多关于这个话题的问题被问到了，这些问题的最佳答案可能参考了 quirksmode 网站，我想让你看看这个页面 [http://dekho.com.pk/new](http://dekho.com.pk/new) 有一个上传图片的上传按钮，我只想知道“你如何创建这样的按钮”？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:31:18.670

Uploadify™ 是一个 jQuery 插件，可让您轻松地将多个文件上传功能添加到您的网站。两个不同的版本（HTML5 和 Flash）允许您灵活地为您的站点选择正确的实现，而后备方法使其优雅地降级。

[演示链接](http://www.uploadify.com/demos/)

*   极致定制
*   多个文件上传
*   拖放
*   实时进度指示器
*   自定义上传限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:26:47.790

我们最终决定使用[**UniformJS**](http://uniformjs.com/)文件控件，并且到目前为止对它很满意。它很容易设置并且（到目前为止）不像其他实现那样容易出错。

但当然，有不止一种方法可以做到这一点。常见的技巧是使文件控件透明（使用`opaque: 0`规则）并在下方显示图像。这样您就不会`click`在文件输入上模拟事件（因为 IE 会阻止提交“人为”激活的文件输入）。这里是这个过程的[**详细解释**](http://www.quirksmode.org/dom/inputfile.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T12:11:40.927

Uploadify™ 是一个 jQuery 插件，可让您轻松地将多个文件上传功能添加到您的网站。两个不同的版本（HTML5 和 Flash）允许您灵活地为您的站点选择正确的实现，而后备方法使其优雅地降级。

演示链接

极端自定义多个文件上传拖放实时进度指示器自定义上传限制

# ios - iOS：CALayer 的辅助功能标签

> ID：13254122
> 
> 赞同：6
> 
> 时间：2012-11-06T15:24:31.170
> 
> 标签：ios, accessibility, calayer

我想为我的一些 CALayer 添加accessibilityLabel。这是示例：

```
CALayer *testLayer = [CALayer layer];
[self.view.layer addSublayer:testLayer];
testLayer.backgroundColor = [UIColor purpleColor].CGColor;
testLayer.isAccessibilityElement = YES;
testLayer.accessibilityLabel = @"Some text";
testLayer.frame = CGRectMake(0, 300, 100, 100); 
```

这种方法对我不起作用。是否可以使可访问性适用于 CALayers？
我不想在 superview 中使用可访问性容器（有复杂的层次结构）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:15:36.587

AFAIK，从 CALayers 构建的自定义视图不支持可访问性，所以我想对您的问题的简单回答是否定的！您可能需要查看[Apple 的指南来为 Dynamic Elements 创建 Accessibility](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW5)。

# tfs - 如果变更集从一个分支合并到另一个分支，则获取信息

> ID：13254123
> 
> 赞同：1
> 
> 时间：2012-11-06T15:24:32.283
> 
> 标签：tfs

在 TFS2010 中，如果变更集从一个分支合并到另一个分支，是否可以获得**信息？“查询”将源分支和目标分支作为参数，然后如果每个变更集被合并，则返回是/否信息。

** 获取——通过普通查询？或者也许以更复杂的方式。我是集合管理员，无权访问 TFS 数据库，但如果我有，那么编写该查询代码会不会很困难？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:38:56.767

[TF 合并命令](http://msdn.microsoft.com/en-us/library/656cs2x5)应该会有所帮助，使用变更集作为版本规范

# knockout.js - 淘汰赛推送不更新 GUI

> ID：13254129
> 
> 赞同：2
> 
> 时间：2012-11-06T15:24:58.883
> 
> 标签：knockout.js, viewmodel

当我将一个项目添加到 observableArray 时，我正在与淘汰赛作斗争并让 UI 也更新。初始列表和 deleteEmployee 工作正常并适当更新 UI，但是当我尝试添加员工时，UI 根本没有更新。下面是viewmodel和html。感谢我能得到的任何帮助。

**视图模型：**

```
function viewModel() {
        var self = this;
        self.employees = ko.observableArray();

        self.deleteEmployee = function () {
            var employee = this;
            dataservice.del(this.id, function () {
                self.employees.remove(employee);
            })
        },

        self.addEmployee = function () {
            var emp = {};
            emp.Name = $("#newName").val();
            emp.Email = $("#newEmail").val();
            dataservice.add(emp, function (data) {
                var employee = new Employee(data.id, emp.Name, emp.Email);
                self.employees.push(employee);
            });
        }.bind(self);

        $.each(data.rows, function (index, row) {
            self.employees.push(new Employee(row.value.Id, row.value.Name, row.value.Email));
        });

        return {
            employees: self.employees,
            deleteEmployee: self.deleteEmployee,
            addEmployee: self.addEmployee
        }
    };

    ko.applyBindings(new viewModel()); 
```

**html**

```
<article data-bind="foreach: employees">
                <div class="emp">
                    <div class="empTop">
                        <span data-bind="text: name"></span>
                        <div class="del" data-bind="click: $parent.deleteEmployee, clickBubble: false"></div>
                    </div>
                    <div class="empContent">
                        <div class="row">
                            <label for="name">Name</label>
                            <input name="name" type="text" data-bind="value: name">
                        </div>
                        <div class="row">
                            <label for="name">Email</label>
                            <input name="email" type="text" data-bind="value: email">
                        </div>
                        <div class="row">
                            <input type="button" value="Update">
                        </div>
                    </div>
                </div>                 
            </article>

            <aside>
                <h3>Create</h3>
                <div>
                    <div class="row">
                        <label for="newName">Name</label>
                        <input id="newName" name="newName" type="text">
                    </div>
                    <div class="row">
                        <label for="newEmail">Email</label>
                        <input id="newEmail" name="newEmail" type="text">
                    </div>
                    <div class="row">
                        <input type="button" value="Create" data-bind="click: addEmployee">
                    </div>
                </div>
            </aside> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:00:27.133

看来，问题不在于淘汰赛。我将您的代码放入 JSFiddle，在 javascript 中注释掉了几行，但没有触及您的 HTML，并且创建工作正常。

看小提琴：http: [//jsfiddle.net/mshmelev/ZF5pC/](http://jsfiddle.net/mshmelev/ZF5pC/)

所以，问题可能是：

1.  `dataservice.add()`函数没有调用你的回调
2.  你的课出了点问题`Employee`（我在小提琴中创建了一个存根）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:58:48.547

结果是渲染的项目，但是，这很尴尬，我有一些 jquery 隐藏了添加 $('.emp').hide() 的元素。这个小错误让我困惑了好几个小时。谢谢你的所有建议。

# jquery - 无法从内联 VF 页面中的 jQuery 访问标准页面的 DOM 元素

> ID：13254137
> 
> 赞同：0
> 
> 时间：2012-11-06T15:25:12.127
> 
> 标签：jquery, salesforce, visualforce

我创建了一个简单的 vf 页面，并在 vf 页面中放置了一个小的 jQuery 脚本（代码如下）。我已将此 vf 页面添加为案例详细信息页面中的内联 VF 页面。在 jQuery 中，我试图通过传递案例编号所在的 div 的 id 并提醒结果来获取案例编号。但我得到一个空白的弹出窗口。但是当我尝试同样的方法时，通过将 jQuery 放在侧边栏中，它工作得很好。

```
<apex:page standardController="Case">
<script src="/resource/jQueryLatest" type="text/javascript"></script>
<script type="text/javascript">
j$(document).ready(function(){
    var caseNumber = j$("#cas2_ileinner").text();
    alert(caseNumber);
});
</script>
</apex:Page> 
```

问题：无法从放置在同一页面的内联 vf 页面中的 jQuery 脚本访问标准详细信息页面的 DOM 元素。

请帮忙！

问候山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:35:17.993

是的，这“按预期工作”。Visualforce 由不同的域 (*.visual.force.com) 提供服务，您的浏览器会阻止跨站点 Javascript。

改用VF页面中的merge字段，不需要JS来获取:)

```
var caseNumber = '{!Case.CaseNumber}'; 
```

* * *

**编辑：**

在节标题中嵌入静态资源的讨厌技巧：

您需要一个具有纯 JavaScript 代码、没有标签、样式等的静态资源。

```
alert('Hello StackOveflow!'); //is OK,
<script>alert('Hello StackOveflow!');/* is not OK */</script> 
```

然后您只需在页面块部分名称中引用它：![页面布局编辑器](../Images/86a75229e4ce1b76814ea7f7b4e6e5ba.png)

**注意事项：**

1.  如果您有依赖项（首先加载 jQuery，然后是一些依赖它的代码），我认为最好使用 2 个节标题（您也可以将代码放在 jQuery 代码之后，但这违背了可重用库的目的）。使用复选框来控制何时显示它。
2.  最好将这些部分放在“详细信息”的底部——它们看起来有点难看（尤其是在编辑页面上），如果他们想引用页面上的字段，则必须已经加载这些字段。
3.  Javascript 完全按照静态资源中的编写方式注入。`{!megefields}`语法不会用您期望的值替换服务器端。

# java - 乐观锁定：需要更新的两个字段

> ID：13254139
> 
> 赞同：0
> 
> 时间：2012-11-06T15:25:20.520
> 
> 标签：java, jpa, glassfish-3, optimistic-locking

在我们旧的数据库结构中，我们在一个表中有两个字段，当我们更改数据时它们会更新。

```
create table dbo.example(
   name varchar(50),
   ...,
   changed smalldatetime,   -- here we save the last update date
   version int              -- and here we increase the number
) 
```

不要问。就像是这样:-)

现在我使用 Eclipselink 和 Glassfish v3 实现乐观锁定。

我设法通过使用`@Version`注释来增加版本。但是只有当名称字段真正更改时，我才能更新更改的字段。每次只需设置更改的字段，JPA 每次都会更新行。即使名称字段没有真正的变化。而且我不想检查名称字段是否真的被“手”改变了。

我也可以将`@Version`注释设置为第二个字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:01:15.917

我找到了：

```
@PreUpdate
private void update() {
    changed = new Date();
} 
```

它仅在 EntityManager 决定进行更新时调用。

# c# - 跨线程：在显示对话框之前调用

> ID：13254148
> 
> 赞同：1
> 
> 时间：2012-11-06T15:25:47.650
> 
> 标签：c#, invoke, multithreading

可能我没有正确理解这个主题。这里有个问题...

C# Windows 应用程序 (.NET 2.0)。MainForm 有一个“查询”按钮。当用户推送它时，应该会发生以下情况：

```
private void btnQuery_Click(object sender, EventArgs e)
{
    querier = new Querier();
    OutputForm outputForm = new OutputForm();
    querier.ProcessAll(outputForm.OutputReceived);
    outputForm.ShowDialog();
} 
```

`Querier`是工人。它创建一个后台线程并运行它来做一些事情。这`OutputForm`是一个带有`txtOutput`多行文本框的简单表单，应该显示工作线程的输出。

为了允许工作线程发送其输出，`querier.ProcessAll()`方法接收一个回调处理程序。这是它的实现：

```
public void OutputReceived(string message)
{
    if (this.InvokeRequired)
        this.Invoke((MethodInvoker)delegate() { this.OutputReceived(message); });
    else if (!string.IsNullOrEmpty(message))
        txtOutput.AppendText(message + Environment.NewLine);
} 
```

所以基本上工作线程运行并使用使用 的`OutputReceived()`方法发送输出`Invoke()`，因为工作线程不能直接访问 txtOutput 字段。

请注意，这`outputForm.ShowDialog()`称为 AFTER `querier.ProcessAll()`。那是因为`ShowDialog()`正在阻塞。

但问题就在这里。如果工作线程在实际显示对话框之前发送任何输出，我会收到有关跨线程操作的异常！`this.InvokeRequired()`当我调试它时，我在方法中看到由于某种原因`OutputReceived()`返回`"false"`！这就是为什么工作线程尝试`txtOutput`直接访问并崩溃的原因。

问题显然是关于线程和`ShowDialog()`. 如果我`Thread.Sleep()`在工作线程的开头添加，则会显示对话框，然后一切正常。

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:02:28.040

最好的办法是确保长时间运行的任务在第一次显示另一个表单之前不会真正开始。`Shown`多亏了 中的事件，这并不难`Form`。

```
private void btnQuery_Click(object sender, EventArgs e)
{
    querier = new Querier();
    OutputForm outputForm = new OutputForm();
    outputForm.Shown += delegate { querier.ProcessAll(outputForm.OutputReceived); };
    outputForm.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:02:44.837

对不起，我找到了答案！

有一种特殊情况何时`InvokeRequired()`返回`"false"`。这是尚未创建控件句柄的时候。在这种情况下，禁止打电话`Invoke()`- 所以`InvokeRequired()`试图保护你，有点。

现在我`CreateHandle()`在 的 CTOR 中调用方法`OutputForm`。通过这种方式，甚至在显示对话框之前就创建了句柄，因此`InvokeRequired()`可以按预期工作。

# c++ - 缩放 mandelbrot 设置第二次不会让它放大到所需的位置

> ID：13254149
> 
> 赞同：1
> 
> 时间：2012-11-06T15:25:46.807
> 
> 标签：c++, c, opengl, mandelbrot

我正在使用 opengl/c++ 来绘制 mandelbrot 集并尝试放大。我可以第一次缩放并缩放到我想要的位置（通过单击），但是当我下次尝试缩放时，它不会缩放我想要缩放的位置，而是移动并缩放到离我想要的位置有点远的地方飞涨。我用

```
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

double dividecubesby  = 700;
double left = -2.0;
double right = 2.0;
double bottom = -2.0;
double top = 2.0;
int maxiteration = 128;
int zoomlevel = 3;
double baseSize = 4.0;
double Size = 0.0;
double xco=0.0;
double yco=0.0;

    void   SetXYpos(int px,int py)
    {
        xco = left+(right-left)*px/dividecubesby;
        yco = top-(top-bottom)*py/dividecubesby;
    }

   void keyPressed(unsigned char key, int x, int y)
   {

       int xx= x;
       int yy= y;
       setXYpos(xx,yy);

       Size = 0.5*(pow(2.0, (-zoomlevel)));

       switch(key){

       case 'z':

      left   =  xco -  Size;
      right  =  xco +  Size;
      bottom =  yco -  Size;
      top    =  yco +  Size;

      dividecubesby = dividecubesby+100;        
      maxiteration  = maxiteration+100; 
  zoomlevel=zoomlevel+1;

      glutPostRedisplay();
      break;
      }

  }

    int mandtest(double Cr, double Ci)
 {

    double Zr = 0.0;
    double Zi = 0.0;
    int times = 0;
    double temp;
    Zr = Zr+Cr;
    Zi = Zi+Ci;

    while ((((Zr*Zr)+(Zi*Zi))<=4) && (times < maxiteration)){

       temp = (Zr*Zr)-(Zi*Zi);
       Zi = 2*Zr*Zi;

       Zr = temp+Cr;
       Zi = Zi+Ci;                 

       times = times+1;  

    }

  return times;

}

        void display(void)
 {

    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0f,1.0f,1.0f);
    double deltax = ((right - left)/(dividecubesby-1));
    double deltay = ((top- bottom)/(dividecubesby-1));

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    gluOrtho2D(left,right,bottom,top);

    glBegin(GL_POINTS);

    for(double x= left;x<=right;x += deltax ){
        for(double y= bottom; y<=top;y +=  deltay ){
        if((mandtest(x,y))==maxiteration){
            glColor3f(1.0f,1.0f,1.0f); 
            glVertex2f(x,y);

        }
        else {
        glColor3f((float)mandtest(x,y)/10,0.0f,(float)mandtest(x,y)/30);
                    glVertex2f(x,y);
            }

        }
     }
    glEnd();

glFlush();
} 
```

根据笛卡尔坐标 [-2,2] 计算鼠标点击的位置

px 和 py 是像素坐标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:34:39.197

你的变量太多了。什么定义了图像的宽度？`(right - left)`? `baseSize + f(zoomLevel)`? `SizeReal`? 目前尚不清楚谁的工作是设置谁以及谁由谁使用，因此您不能希望始终如一地更新所有内容。

另外，为什么`dividecubesby`每次缩放图像大小都会增加 500 倍？定义单击坐标限制的窗口系统窗口的宽度/高度在哪里？

我的建议是从头开始，也许画一张谁更新谁的图表（`left/right -> imageWidth`）。确保您获得正确的单击坐标，而与您的绘图窗口（左/右/上/下）无关，然后从那里继续。事实上，我认为您的第一次缩放是偶然正常工作的。

# c# - C# WMEncoder 错误 C00D002E

> ID：13254151
> 
> 赞同：1
> 
> 时间：2012-11-06T15:26:03.033
> 
> 标签：c#, encoding, converter, windows-media-encoder

我编写了一个 Windows 服务代码来将 AVI 转换为 WMV 文件。我在 Windows Vista 中使用 XviD 和 Windows Media 9。服务开始转换，并在完成作业之前停止，状态为 WMENC_ENCODER_STOPPED，但文件未完全转换。并且生成的文件永远锁定到这个应用程序，直到我停止服务。当我这样做时，生成的文件会被自动删除。有人可以帮忙吗？这很重要 ！！

编辑：该程序不断工作，执行转换任务。如果文件无法按上述方式转换，并且我使用函数 GC.WaitForPendingFinalizers()，我仍然有锁定问题。但服务继续，并选择另一个任务。成功或失败这个新任务，当我使用 GC.WaitForPendingFinalizers() 时，第一个被解锁并自动删除。

```
 public WMENC_ENCODER_STATE EncoderStatus
    {
        get { return _encoderStatus; }
        set { _encoderStatus = value; }
    }

    IWMEncFile2 File;
    IWMEncAudioSource[] SrcAud;
    IWMEncVideoSource2[] SrcVid;
    IWMEncSourceGroup2[] SrcGrp;
    WMEncoder glbEncoder = new WMEncoder();
    WMEncProfile2[] Pro = null;
    IWMEncSourceGroupCollection SrcGrpColl = null;

    public WMVEnconder(ConvertGroup[] sourceGroup, string targetFile, string profilefile)
    {
        glbEncoder.OnStateChange += new _IWMEncoderEvents_OnStateChangeEventHandler(Encoder_OnStateChange);
        glbEncoder.OnError +=new _IWMEncoderEvents_OnErrorEventHandler(Encoder_OnError);

        // Creates source group.
        SrcGrpColl = glbEncoder.SourceGroupCollection;

        int[] intProVBRModeAudio = new int[sourceGroup.Length];
        int[] intProVBRModeVideo = new int[sourceGroup.Length];
        Int32[] intProContentType = new int[sourceGroup.Length];
        Pro = new WMEncProfile2[sourceGroup.Length];
        for (int i = 0; i < Pro.Length; i++)
        {
            Pro[i] = new WMEncProfile2();
            Pro[i].LoadFromMemory(profilefile);
            intProContentType[i] = Pro[i].ContentType;
            intProVBRModeAudio[i] = (int)Pro[i].get_VBRMode(WMENC_SOURCE_TYPE.WMENC_AUDIO, 0);
            intProVBRModeVideo[i] = (int)Pro[i].get_VBRMode(WMENC_SOURCE_TYPE.WMENC_VIDEO, 0);
        }

        SrcGrp = new IWMEncSourceGroup2[sourceGroup.Length];
        for (int i = 0; i < SrcGrp.Length; i++)
            SrcGrp[i] = (IWMEncSourceGroup2)SrcGrpColl.Add(i.ToString());

        SrcAud = new IWMEncAudioSource[sourceGroup.Length];
        SrcVid = new IWMEncVideoSource2[sourceGroup.Length];

        for (int i = 0; i < sourceGroup.Length; i++)
        {
            if (intProContentType[i] == 1)
            {
                SrcAud[i] = (WMEncoderLib.IWMEncAudioSource)SrcGrp[i].AddSource(WMENC_SOURCE_TYPE.WMENC_AUDIO);
                SrcAud[i].SetInput(sourceGroup[i].AudioFile, "", "");

                SrcAud[i].MarkIn = sourceGroup[i].AudioMarkin;
                SrcAud[i].MarkOut = sourceGroup[i].AudioMarkout;
            }
            else if (intProContentType[i] == 16)
            {
                SrcVid[i] = (WMEncoderLib.IWMEncVideoSource2)SrcGrp[i].AddSource(WMENC_SOURCE_TYPE.WMENC_VIDEO);
                SrcVid[i].SetInput(sourceGroup[i].VideoFile, "", "");

                SrcVid[i].MarkIn = sourceGroup[i].VideoMarkin;
                SrcVid[i].MarkOut = sourceGroup[i].VideoMarkout;
            }
            else if (intProContentType[i] == 17)
            {
                SrcAud[i] = (WMEncoderLib.IWMEncAudioSource)SrcGrp[i].AddSource(WMENC_SOURCE_TYPE.WMENC_AUDIO);
                SrcAud[i].SetInput(sourceGroup[i].AudioFile, "", "");

                SrcVid[i] = (WMEncoderLib.IWMEncVideoSource2)SrcGrp[i].AddSource(WMENC_SOURCE_TYPE.WMENC_VIDEO);
                SrcVid[i].SetInput(sourceGroup[i].VideoFile, "", "");

                SrcAud[i].MarkIn = sourceGroup[i].AudioMarkin;
                SrcAud[i].MarkOut = sourceGroup[i].AudioMarkout;
                SrcVid[i].MarkIn = sourceGroup[i].VideoMarkin;
                SrcVid[i].MarkOut = sourceGroup[i].VideoMarkout;
            }
            else
                throw new Exception("erro - não suporta este tipo de profile");

            SrcGrp[i].set_Profile(Pro[i]);

            if (i + 1 < sourceGroup.Length)
                SrcGrp[i].SetAutoRollover(-1, (i + 1).ToString());
        }

        File = (IWMEncFile2)glbEncoder.File;
        File.LocalFileName = targetFile;

        glbEncoder.PrepareToEncode(true);
    }
    /// <summary>
    /// Inicia os processos do codificador.
    /// </summary>
    public void Start()
    {
        glbEncoder.Start();
    }
    /// <summary>
    /// Pára os processos do codificador.
    /// </summary>
    public void Stop()
    {
        glbEncoder.Stop();
    }
    /// <summary>
    /// Elimina as configurações atuais.
    /// </summary>
    public void Reset()
    {
        glbEncoder.Reset();
    }
    /// <summary>
    /// Evento deflagrado pela mudança no estado do codificador.
    /// </summary>
    /// <param name="enumState">Enumerador indicador do estado do codificador.</param>
    private void Encoder_OnStateChange(WMEncoderLib.WMENC_ENCODER_STATE enumState)
    {
        _encoderStatus = enumState;
        string strRunState = "";
        switch (enumState)
        {
            case WMENC_ENCODER_STATE.WMENC_ENCODER_STARTING :
                strRunState = "Encoder Starting";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_RUNNING:
                strRunState = "Encoder Running";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_END_PREPROCESS:
                strRunState = "Encoder End Preprocess";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_PAUSING:
                strRunState = "Encoder Pausing";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_PAUSED:
                strRunState = "Encoder Paused";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_STOPPING:
                strRunState = "Encoder Stopping";
                break;
            case WMENC_ENCODER_STATE.WMENC_ENCODER_STOPPED:
                strRunState = "Encoder Stopped";
                break;
        }
        _strEncoderStatus = strRunState;
    }
    /// <summary>
    /// Evento deflagrado pela ocorrência de um erro durante o processo de codificação.
    /// </summary>
    /// <param name="hr">Valor numérico do erro que ocorreu.</param>
    private void Encoder_OnError(int hr)
    {
        string errorReceived = "";

        switch (hr)
        {
            case -1074600792:
                errorReceived = "The starting time must be greater than zero and less than the ending time.";
                break;
            case -1074600793:
                errorReceived = "The ending time must be greater than the starting time and less than the file duration.";
                break;
            case -1074600804:
                errorReceived = "The video capture device is in use and cannot be opened.";
                break;
            case -1074600808:
                errorReceived = "The video capture driver returned an unrecoverable error.";
                break;
            case -1074600809:
                errorReceived = "The video capture device did not start.";
                break;
            case -1074600813:
                errorReceived = "The video capture window was not created.";
                break;
            case -1074600820:
                errorReceived = "The specified operation is not allowed when the file is being archived.";
                break;
            case -1074600825:
                errorReceived = "The archive file name is not properly specified.";
                break;
            case -1074600831:
                errorReceived = "The specified operation is not allowed when the encoder engine is not running.";
                break;
            case -1074600833:
                errorReceived = "Inverse telecine cannot be specified when the frame rate does not equal 30 frames per second.";
                break;
            case -1074600834:
                errorReceived = "Internal problems are preventing the preview or postview.";
                break;
            case -1074600835:
                errorReceived = "One or more required codecs cannot be found.";
                break;
            case -1074600840:
                errorReceived = "The display size or color setting has changed since the encoding session was defined.";
                break;
        }

        try
        {
            if (Directory.Exists(@"C:\MediaDNA_V2\Data\Conversion\Exception"))
            {
                MediaDNAException mdnaException = new MediaDNAException(Modulo.CONVERSION, 0, "C_110018", TipoErro.INFORMACAO, new Exception(errorReceived),
                    ErrorMessageConstants.C_110018, new object[] { hr.ToString("X") });
                ExceptionManager.RegisterException(mdnaException, @"C:\MediaDNA_V2\Data\Conversion\Exception");
            }
        }
        catch { }
    }

    #region IDisposable Members
    /// <summary> Release everything. </summary>
    public void Dispose()
    {
        glbEncoder.Stop();
        glbEncoder.Reset();
        GC.SuppressFinalize(this);
        CloseInterfaces();
    }
    #endregion

    /// <summary>
    /// Fecha as interfaces utilizadas pelo codificador.
    /// Obs: O processador precisa estar "STOPPED" para executar este processo.
    /// </summary>
    private void CloseInterfaces()
    {
        if (glbEncoder != null)
        {
            if (File != null)
                Marshal.FinalReleaseComObject(File);
            if (Pro != null)
            {
                for (int i = 0; i < Pro.Length; i++)
                    Marshal.FinalReleaseComObject(Pro[i]);

                Pro = null;
            }
            if (SrcVid != null)
            {
                for (int i = 0; i < SrcVid.Length; i++)
                    Marshal.FinalReleaseComObject(SrcVid[i]);

                SrcVid = null;
            }
            if (SrcAud != null)
            {
                for (int i = 0; i < SrcAud.Length; i++)
                    Marshal.FinalReleaseComObject(SrcAud[i]);

                SrcAud = null;
            }
            if (SrcGrpColl != null)
                Marshal.FinalReleaseComObject(SrcGrpColl);
            if (SrcGrpColl != null)
                Marshal.FinalReleaseComObject(SrcGrpColl);
            if (glbEncoder != null)
                Marshal.FinalReleaseComObject(glbEncoder);
            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:35:44.143

我附加了我将 wav 文件转换为 wma 的函数。
确保你这样做`encoder.Stop();`并且`encoder.Reset();`偏离路线释放你所有的 com 对象。

我很确定一旦你发布了你的 COM 对象，你的问题就会得到解决。

```
 // Create a WMEncoder object.
    WMEncoder encoder = new WMEncoder();

    // Retrieve the source group collection.
    IWMEncSourceGroupCollection srcGrpColl = encoder.SourceGroupCollection;

    // Add a source group to the collection.
    IWMEncSourceGroup srcGrp = srcGrpColl.Add("SG_1");

    // Add a video and audio source to the source group.
    IWMEncSource srcAud = srcGrp.AddSource(WMENC_SOURCE_TYPE.WMENC_AUDIO);
    srcAud.SetInput(wavFileName, "", "");

    // Specify a file object in which to save encoded content.
    IWMEncFile file = encoder.File;
    file.LocalFileName = wmaFileName;

    // Create a profile collection object from the WMEncoder object.
    encoder.ProfileCollection.ProfileDirectory = 
        string.Format("{0}Profiles", Request.PhysicalApplicationPath);
    encoder.ProfileCollection.Refresh();
    IWMEncProfileCollection proColl = encoder.ProfileCollection;

    // Create a profile object
    IEnumerator profEnum = proColl.GetEnumerator();
    IWMEncProfile profile = null; ;
    IWMEncProfile2 newProfile = null;
    while (profEnum.MoveNext())
    {
        profile = (IWMEncProfile)profEnum.Current;
        if (profile.Name == "WavToWma")
        {
            // Load profile
            newProfile = new WMEncProfile2();
            newProfile.LoadFromIWMProfile(profile);

            // Specify this profile object as the profile to use in source group.
            srcGrp.set_Profile(newProfile);
        }
    }

    // Start the encoding process.
    // Wait until the encoding process stops before exiting the application.
    encoder.PrepareToEncode(true);
    encoder.Start();
    while (encoder.RunState != WMENC_ENCODER_STATE.WMENC_ENCODER_STOPPED)
    {
        Thread.Sleep(500);
    }
    encoder.Stop();
    encoder.Reset();

    try
    {
        #region Release com objects
        if (file != null)
            Marshal.FinalReleaseComObject(file);
        if (profile != null)
            Marshal.FinalReleaseComObject(profile);
        if (newProfile != null)
            Marshal.FinalReleaseComObject(newProfile);
        if (srcAud != null)
            Marshal.FinalReleaseComObject(srcAud);
        if (srcGrp != null)
            Marshal.FinalReleaseComObject(srcGrp);
        if (srcGrpColl != null)
            Marshal.FinalReleaseComObject(srcGrpColl);
        if (proColl != null)
            Marshal.FinalReleaseComObject(proColl);
        if (encoder != null)
            Marshal.FinalReleaseComObject(encoder);
        // GC collect is explicitly called because of a memory leak issue of WMEncoder.
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
        #endregion
    }
    catch { }
} 
```

# c# - .NET Framework 的字符串比较中的错误

> ID：13254153
> 
> 赞同：42
> 
> 时间：2012-11-06T15:26:02.737
> 
> 标签：c#, .net, sorting, string-comparison

任何[比较排序](http://en.wikipedia.org/wiki/Comparison_sort)都要求底层的顺序运算符是[*传递*的和*反对称*](http://en.wikipedia.org/wiki/Partially_ordered_set)的。

在 .NET 中，某些字符串并非如此：

```
static void CompareBug()
{
  string x = "\u002D\u30A2";  // or just "-ア" if charset allows
  string y = "\u3042";        // or just "あ" if charset allows

  Console.WriteLine(x.CompareTo(y));  // positive one
  Console.WriteLine(y.CompareTo(x));  // positive one
  Console.WriteLine(StringComparer.InvariantCulture.Compare(x, y));  // positive one
  Console.WriteLine(StringComparer.InvariantCulture.Compare(y, x));  // positive one

  var ja = StringComparer.Create(new CultureInfo("ja-JP", false), false);
  Console.WriteLine(ja.Compare(x, y));  // positive one
  Console.WriteLine(ja.Compare(y, x));  // positive one
} 
```

您会看到`x`严格大于`y`，并且`y`严格大于`x`。

因为`x.CompareTo(x)`等等都给零（`0`），很明显这不是一个命令。毫不奇怪，当我在`Sort`数组或列表中包含`x`和之类的字符串时，我会得到不可预知的结果`y`。虽然我还没有对此进行测试，但如果字符串和用于键的字符串一样，我肯定`SortedDictionary<string, WhatEver>`会在保持排序顺序和/或定位项目时遇到问题。`x``y`

**这个错误是众所周知的吗？**哪些版本的框架受到影响（我正在尝试使用 .NET 4.0）？

**编辑：**

这是一个符号为负的示例：

```
x = "\u4E00\u30A0";         // equiv: "一゠"
y = "\u4E00\u002D\u0041";   // equiv: "一-A" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T17:11:52.767

如果正确排序在您的问题中如此重要，只需使用序号[字符串比较](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)而不是文化敏感。只有这一个可以保证您想要的传递和反对称比较。

[什么 MSDN 说：](http://msdn.microsoft.com/en-us/library/dd465121.aspx#the_details_of_string_comparison)

> 在方法调用中指定 StringComparison.Ordinal 或 StringComparison.OrdinalIgnoreCase 值表示忽略自然语言特征的非语言比较。使用这些 StringComparison 值调用的方法基于简单的字节比较而不是由区域性参数化的大小写或等价表来确定字符串操作决策。在大多数情况下，这种方法最适合字符串的预期解释，同时使代码更快、更可靠。

它按预期工作：

```
 Console.WriteLine(String.Compare(x, y, StringComparison.Ordinal));  // -12309
    Console.WriteLine(String.Compare(y, x, StringComparison.Ordinal));  // 12309 
```

是的，它没有解释为什么文化敏感的比较会给出不一致的结果。嗯，奇怪的文化——奇怪的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T23:02:08.093

在我发现原因是 .Net 40 及更高版本比较器（a1 < a2 和 a2 < a3，但 a1 > a3)。

我想弄清楚发生了什么的努力可以在这里找到：[c# SortedList<string, TValue>.ContainsKey for successful added key 返回 false](https://stackoverflow.com/questions/17599084/c-sharp-sortedliststring-tvalue-containskey-for-successfully-added-key-return)。

您可能想查看我的 SO 问题的“更新 3”部分。似乎该问题已于 2012 年 12 月向 Microsoft 报告，并在 2013 年 1 月结束前以“无法修复”而关闭。此外，它还列出了可以使用的解决方法。

我创建了这个推荐的解决方法的实现，并验证它解决了我遇到的问题。我也刚刚验证这解决了您报告的问题。

```
public static void SO_13254153_Question()
{
    string x = "\u002D\u30A2";  // or just "-ア" if charset allows
    string y = "\u3042";        // or just "あ" if charset allows        

    var invariantComparer = new WorkAroundStringComparer();
    var japaneseComparer = new WorkAroundStringComparer(new System.Globalization.CultureInfo("ja-JP", false));
    Console.WriteLine(x.CompareTo(y));  // positive one
    Console.WriteLine(y.CompareTo(x));  // positive one
    Console.WriteLine(invariantComparer.Compare(x, y));  // negative one
    Console.WriteLine(invariantComparer.Compare(y, x));  // positive one
    Console.WriteLine(japaneseComparer.Compare(x, y));  // negative one
    Console.WriteLine(japaneseComparer.Compare(y, x));  // positive one
} 
```

剩下的问题是这种解决方法太慢了，几乎不适合用于大型字符串集合。所以我希望微软会重新考虑关闭这个问题，或者有人知道更好的解决方法。

# c# - 在 IIS 7 上的 ASP.NET MVC 4 应用程序中运行 PHP 文件？

> ID：13254155
> 
> 赞同：3
> 
> 时间：2012-11-06T15:26:11.407
> 
> 标签：c#, php, asp.net, iis

我有一个只有 php api 的支付网关。是否可以在运行 MVC4 的应用程序上的 IIS 服务器中运行该脚本？

当我添加`1.php`到我的根文件夹并尝试导航它时，它会显示`HTTP Error 404.3 - Not Found`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:48:40.000

您必须在 IIS 服务器上安装 PHP 和 FastCGI。那应该将其配置为支持 .php 扩展名。它可以通过[http://www.microsoft.com/web/downloads/platform.aspx安装](http://www.microsoft.com/web/downloads/platform.aspx)

接下来，您必须配置路由以忽略对该页面的请求（否则它将假定该名称实际上是控制器的名称）。

# grails - 在 Grails 选择列表上设置选项键和值？

> ID：13254163
> 
> 赞同：5
> 
> 时间：2012-11-06T15:26:41.097
> 
> 标签：grails, key, key-value, selectlist

我目前正在开发 Grails 应用程序，我正在寻找在页面上放置一个选择列表并将其 Key 设置为一个值，将 Value 设置为另一个。所有相关元素的代码如下：

**域对象：**

```
class Cars {
  String carType
  String car
} 
```

**控制器：**

```
def create() {
  List cars = Cars.list()
  [dealerInstance: new Dealer(params), cars: cars]
  render(text:"This site in curently under Maintainence!")
} 
```

**看法：**

```
<g:select name="cars.id" from="${cars}" optionKey="${carType}" optionValue="${car}"/> 
```

现在，当我运行此代码时，列表确实会被填充，但是数据如下所示：

```
<select id="cars.id" name="cars.id">
  <option value="com.app.Cars : 1">com.app.Cars : 1</option>
  <option value="com.app.Cars : 2">com.app.Cars : 2</option>
  <option value="com.app.Cars : 3">com.app.Cars : 3</option>
</select> 
```

然后当我尝试这个时：

**看法：**

```
<g:select name="cars.id" from="${cars.car}" optionKey="${carType}" optionValue="${car}"/> 
```

我得到以下信息：

```
<select id="cars.id" name="cars.id">
  <option value="Audi">Audi</option>
  <option value="BMW">BMW</option>
  <option value="Scoda">Scoda</option>
</select> 
```

这根本不是我想要的我希望能够在此选择列表上设置不同的键值对，以便我可以在我的应用程序中使用该数据，我希望生成以下内容：

```
<select id="cars.id" name="cars.id">
  <option value="Saloon">Audi</option>
  <option value="Hatch Back">BMW</option>
  <option value="Estate">Scoda</option>
</select> 
```

有人可以告诉我如何在 Grails 中实现这一目标吗？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T16:16:43.407

尝试这个：

```
<g:select id="cars.id" name="cars.id" from="${cars}" optionKey="carType" optionValue="car"/> 
```

基本上会发生什么：

当您使用**from**属性时，标签会遍历您作为参数传递的列表。optionKey 和 optionValue 应该是表示您要在当前对象（被迭代器访问）中访问的属性的字符串。

# jquery - 使用jQuery从String中第一个找到的数字的子字符串

> ID：13254168
> 
> 赞同：0
> 
> 时间：2012-11-06T15:26:50.753
> 
> 标签：jquery, string, frontend

从第一个找到的数字中拆分 jQuery 中的字符串的最佳方法是什么。

例子：`Speelhof(STE) 0 /W301`

我想将字符串分成两部分（拆分必须发生在第一个找到的数字上）

结果应该是两部分： `Speelhof(STE)`和`0 /W301`

字符串可以与不同的数字不同，所以我需要一种方法来从任何数字中提取字符串......

谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:29:08.370

你不想要`.split`，因为它消耗了分隔符。您可以使用`.match`正则表达式：

```
"Speelhof(STE) 0 /W301".match(/^(\D+)(.*)$/); 
```

这将给出一个包含三个元素的数组：字符串本身、匹配的部分`\D+`（一个或多个非数字）和`.*`（其余部分）。因此，您可以将其用作：

```
var arr = "Speelhof(STE) 0 /W301".match(/^(\D+)(.*)$/);
var first = arr[1];   // "Speelhof(STE) "
var second = arr[2];  // "0 /W301" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:29:58.040

这个问题是正则表达式的完美候选：

```
var match = "Speelhof(STE) 0 /W301".match(/^(.+)(\d.+)$/); 
```

然后，您可以将这两个组件作为返回数组的元素访问：`match[1]`和`match[2]`.

这里不需要使用 jQuery。

解释模式是如何工作的：`^`表示字符串的开头；表示任何字符 ( ) 中的`(.+)`一个或多个 ( ) ，括号捕获此组并允许您在返回的数组中访问它。第二组包括一个数字 ，后跟一个或多个任意字符 ，，就像在第一组中一样。表示字符串的结尾。`+``.``\d``.+``$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:42:39.280

假设您提到的字符串中有数字。您可以遍历字符串并找到第一个数字作为字符串的分割点。

**[现场演示](http://jsfiddle.net/xRRfn/)**

```
str = "Speelhof(STE) 0 /W301";

for(i=0; i < str.length; i++)
{    
    if(parseInt(str[i]) >= 0  && parseInt(str[i]) <= 9)
          break;                        
}       

firstPart = str.substring(0, i);
secondPart = str.substring(i+1, str.length); 
```

# java - 将 &-sign 从 java 导出到 xml

> ID：13254169
> 
> 赞同：0
> 
> 时间：2012-11-06T15:26:50.837
> 
> 标签：java, xml, export, ampersand

> **可能重复：**
> [如何在 Java-XML 中禁用/避免与符号转义？](https://stackoverflow.com/questions/7469202/how-to-disable-avoid-ampersand-escaping-in-java-xml)

我需要创建类似的东西：（`&#8743;`在 xml 文件中），问题是，我使用的 java 技术将它转换为`&amp;#8743;`对我不起作用的东西。我需要第一种格式。所以，问题是，有没有办法以某种方式逃避它，或者以什么方式得到它：`&#8743;`？对于导出，我使用与此处相同的方法：[link](http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:14:25.640

这是你想要的吗？

```
 DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = f.newDocumentBuilder();

    Document d = builder.newDocument();
    Element root = d.createElement("root");
    d.appendChild(root);
    root.setTextContent("this text contains the \u2227 character");

    Transformer t = TransformerFactory.newInstance().newTransformer();
    t.setOutputProperty(OutputKeys.ENCODING, "US-ASCII");
    t.setOutputProperty(OutputKeys.INDENT, "yes");
    t.transform(new DOMSource(d), new StreamResult(System.out)); 
```

产生

```
<?xml version="1.0" encoding="US-ASCII" standalone="no"?>
<root>this text contains the &#8743; character</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:29:26.373

这样做的方法是使用`&amp;`. 通常它会起作用。如果它不适合您，请发布一些代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:02:50.940

我认为问题在于您正在尝试手动编码 XML。

尝试：

*   将用户输入转换为 Java 字符串
*   让 XML 库负责从 Java 字符串到 XML 字符串的转换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:00:31.257

你可以试试：

```
Document doc = documentBuilder.newDocument();
Element root= doc.createElement("root");
doc.appendChild(root);

Document newDoc = documentBuilder.parse(new InputSource(new StringReader("<element defaulttext=\"&#8743;\">some text or XML</element>")));

Element newElement = newDoc.getDocumentElement();
Node node = doc.importNode(newElement, true);

root.appendChild(node); 
```

# php - PHP MySqlI 无意义的错误信息。它可能是什么？

> ID：13254176
> 
> 赞同：0
> 
> 时间：2012-11-06T15:27:20.900
> 
> 标签：php, mysql

致命错误：在第 47 行的 myFile.php 中的非对象上调用成员函数 bind_param()

```
45 $statement = $con->prepare('call aProcedure(?,?,?)');
46 $statement->bind_param("sss", $str1, $str1, $str1);
47 $statement->execute(); 
```

为什么？

PS：它可以在我的本地系统上运行（F€#%"#€ 我不想这么说）该过程在我的本地系统和生产环境中都成功执行。MySQL Workbench。只是拒绝从 PHP 在生产环境中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:29:46.920

这不是 mysql 而是 php 错误消息，`$statement`变量不是对象。`false`可能吗？尝试调试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:06:26.937

感谢大家。

我不得不更新我正在重用的连接（在我的本地系统上工作 :// ）。

```
$con = new mysqli($mysql_hostname, $mysql_user, $mysql_password, $mysql_database);
$statement = $con->prepare('call aProcedure(?,?,?)'); 
```

我不习惯 PHP 足以理解为什么应该有任何区别。我会接受为什么会这样的第一个理智的答案:)

# winapi - 如何从 IAudioSessionManager2 获取进程 ID

> ID：13254178
> 
> 赞同：1
> 
> 时间：2012-11-06T15:27:22.870
> 
> 标签：winapi, core-audio

背景：枚举所有使用系统音频的活动会话。

我正在尝试从 IAudioSessionManager2 获取进程信息。但我找不到这样的功能。有谁知道如何得到它？

示例代码： http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd368281 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368281(v=vs.85).aspx)

IAudioSessionControl 只提供了这样的方法：GetDisplayName，但我得到的显示名称只是空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:49:34.417

您必须使用[`IAudioSessionControl2`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368248%28v=vs.85%29.aspx)接口和[`GetProcessId`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368250%28v=vs.85%29.aspx)方法。

# sharepoint-2010 - 如何在 Sharepoint 2010 列表中将列表列从超链接或图片更改为单行文本

> ID：13254181
> 
> 赞同：0
> 
> 时间：2012-11-06T15:27:28.480
> 
> 标签：sharepoint-2010, sharepoint-list

我在共享点列表中有一个列，该列当前是超链接或图片。当我转到列表设置并单击该列以更改类型时，我看不到任何此类选项。有什么方法可以将超链接更改为单行文本，以便该列中的项目与以前一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:47:00.617

1.  创建单行类型的新列
2.  将项目的值从当前列复制到新列，例如。带电源外壳
3.  删除当前列。

# c# - Web Api 调用未在 JSON 响应中返回 __type

> ID：13254185
> 
> 赞同：1
> 
> 时间：2012-11-06T15:27:43.497
> 
> 标签：c#, .net, asp.net-mvc-3, wcf, asp.net-web-api

我们有一个通过 WCF Restful 服务调用的 MVC 网站，但我们现在用 Web Api 调用替换它们。问题是一些 MVC 控制器中的现有代码依赖于为 JSON 中的每个对象返回的“__type”属性，因此它可以根据对象的类型执行不同的操作。

但是，在新的 Web Api 响应中，返回的每个对象都没有 JSON 中的“__type”条目，因此代码失败。

有谁知道这是怎么做到的？我发现很多关于删除 WCF 服务的 __type 条目，但还没有确保它们适用于 Web Api。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:26:16.200

该`__type`字段是`DataContractJaonSerializer`（DCJS）的一个特性，特别是它用于 ASP。NET AJAX 兼容性，适用于配置了`enableWebScript`应用行为的端点。更具体地说，此功能是通过将`DataContractSerilizerSettings::EmitTypeInformation`属性设置为`AsNeeded`或来控制的`Always`。

开箱即用的 WebAPI 必然会使用 JSON.NET 作为其 JSON 媒体的格式化程序，虽然它的功能确实支持类似的概念`TypeNameHandling`，但它与 DCJS 不兼容。

现在您可以像这样轻松切换 WebAPI 以使用 DCJS：

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.UseDataContractJsonSerializer = true; 
```

但是，这仍然对您没有帮助，因为在这些情况下它们在内部创建的 DCJS 实例未配置，`EmitTypeInformatiom`这意味着它们默认为`None`.

因此，获得所需内容的唯一解决方案是编写自己的`MediaTypeFormatter`子类，该子类使用所需的设置创建/配置其 DCJS 实例，`EmitTypeInformation`然后注册它以处理 JSON 媒体类型，而不是内置的 JsonMediaTypeFormatter。幸运的是，因为 ASP。NET Web API 是开源的，您应该能够复制[现有的实现](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/6b5687093715#src/System.Net.Http.Formatting/Formatting/JsonMediaTypeFormatter.cs)并很容易地对其进行调整以适应这种特定情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:24:52.403

更多谷歌搜索后，我找到了答案。

在 WebApi 控制器项目方面，在 Global App_Start 函数中我添加了：

```
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Objects; 
```

然后在我即将反序列化时，在客户端 C# 端，我添加了：

```
JsonSerializerSettings settings = new JsonSerializerSettings();
settings.TypeNameHandling = TypeNameHandling.Objects; 
```

所以本质上，它是序列化程序的 TypeNameHandling.Objects 设置，它将为每个对象输出 $type 而不是 __type 但它仍然对我有用。

# osx-lion - Applescript 等待 AppleMail 下载邮件。

> ID：13254188
> 
> 赞同：0
> 
> 时间：2012-11-06T15:27:49.940
> 
> 标签：osx-lion, applescript, osx-mountain-lion, apple-mail

在 10.7.x 之前，此 AppleScript 用于 AppleMail：

```
tell application "Mail"
   activate
   check for new mail
   repeat until (background activity count) = 0
       do shell script "sleep 1"
   end repeat
end tell 
```

但是，从 10.7.x+ 开始，这似乎不再起作用。它甚至不进入重复循环。我的猜测是 AppleMail 已经改变了它下载电子邮件的方式并且不再使用“后台活动”。

任何人都知道如何使用 AppleScript 等待所有电子邮件在 AppleMail 5+ 中下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:41:01.290

我检查了 10.8.2 并且它有效。也许检查在您的系统上真的很快，并且在评估重复直到条件时它已经完成。但我不明白剧本的目的是什么。此外，如果您将 do shell 脚本“sleep 1”替换为更简单的延迟 1，效果会更好。

# c++ - 编写调试器

> ID：13254189
> 
> 赞同：10
> 
> 时间：2012-11-06T15:27:50.473
> 
> 标签：c++, windows, debugging

我对编写 Windows 调试器的信息太少感到非常不满。

我的大部分代码都是经过长时间的反复试验而编写的，文档显然“认为”大多数主题都过于琐碎，同时详细解释了明显和无用的东西。

我找到了 2 篇左右的文章，但没有多少我不知道的东西来自它。

是否有任何文档，我的意思是完整的文档，或者一些关于调试器的好文章（不是如何在 vb.NET 中将字节更改为 0xCC，而是现实世界的东西）？带有内存断点的高级调试器。

目前我还没有找到一种方法，例如如何找出在 GUARD_PAGE_VIOLATION 中写入了多少字节。我只是在代码执行和比较之前和之后制作一个缓冲区。

还有在哪里可以找到信息是什么`debug_event.u.Exception.ExceptionRecord.ExceptionInformation`？（以及 debug_event 中的其他内容）

我真的必须自己扭转倒车环境吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T14:22:22.113

这确实是一些可用的信息。

DEBUG_EVENT（和调试 API 的其余部分）在 MSDN 中正式描述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms679308 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679308%28v=vs.85%29.aspx)

有一篇很好的 CodeProject 文章：[编写一个基本的 Windows 调试器](http://www.codeproject.com/Articles/43682/Writing-a-basic-Windows-debugger)及其续集：[编写 Windows 调试器 - 第 2 部分](http://www.codeproject.com/Articles/132742/Writing-Windows-Debugger-Part-2)

最后，来自 Devon Strawn 的完整参考资料列表：[如何编写 (Windows) 调试器 - 参考资料](http://devonstrawntech.tumblr.com/post/15878429193/how-to-write-a-windows-debugger-references)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T19:28:13.197

您可以在 Windows SDK 中找到“旧”但很好的示例：查看：.\Program Files\Microsoft SDKs\Windows\v7.1\Samples\winbase\debug\

debbughandler 展示了如何处理异常。

# php - PHP / 正则表达式：检查字符串是否被复制粘贴

> ID：13254190
> 
> 赞同：1
> 
> 时间：2012-11-06T15:27:50.023
> 
> 标签：php, regex, string, validation

我正在尝试为要检查字符串是否为复制+粘贴工作的字符串编写验证函数。

背景：

我们有一个 CMS，用户可以在其中输入最少 - 例如 - 200 个字符的描述文本。很多用户写的文字太短，并得到“你必须使用超过 200 个字母”的错误信息。为了避免这种情况，他们复制粘贴文本或一些虚拟字符串，如“AAAAA”以达到限制。

我现在正在寻找一个函数/方法/正则表达式来检测此类复制+粘贴字符串并通过显示消息来防止它们。

我知道没有 100% 的解决方案来防止虚拟文本，但我们想减少一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:57:13.117

不会有快速、可靠、无懈可击的解决方案。但我可以想到一个折衷方案：

```
preg_match('/(.{1,4})\1{3,}/', $subject) 
```

将返回`True`包含一到四个字符的重复序列的字符串（当它们至少重复三次时）。

所以它会匹配像这样的字符串

```
AAAAAAA
asdasdasdasd
foo bar baz glglglglglglglgl 
```

它不会检测到更长的重复，例如

```
asdfgasdfgasdfgasdfg 
```

但是如果你尝试匹配更长的重复，正则表达式的复杂性将成倍增长，所以我认为四个字符是一个可行的折衷方案。

或者，您可能希望将重复锚定到字符串的末尾（这是大多数人放置填充符的地方）：

```
preg_match('/(.+)\1{3,}$/', $subject) 
```

但当然，然后是一个字符串

```
LOL OMG!!!!!!!!!!!!!!!!!!!!!!!!!!!. 
```

不会被检测到。你的选择 ：）

# c++ - MySQL Windows c api命名管道错误：“在'等待初始通信数据包'时丢失与MySQL服务器的连接，系统错误：0

> ID：13254196
> 
> 赞同：0
> 
> 时间：2012-11-06T15:28:08.647
> 
> 标签：c++, windows, api, mysql

我正在编写一个将所有内容存储在 mysql 数据库中的 c++ 程序。我想避免弹出 Windows 安全窗口并询问 mysqld 是否可以拥有特权。如果我单击取消（响应防火墙窗口），程序仍然可以正常运行，因为一切都是本地的。

我正在尝试使用带有 --skip-networking 标志的命名管道来避免这个防火墙窗口。

开始编辑：

我正在使用 mysqld 的便携式版本。它没有管理员权限。（感谢 Ben 指出这是一条重要信息）

结束编辑

我正在使用以下命令启动 mysqld 服务器：

```
C:\tmp_report\12345\mysqld\mysql\bin\mysqld --user=root \
--basedir="C:\tmp_report\12345\mysqld\\mysql" \
--datadir="C:\tmp_report\12345\mysqld\data" \
--pid-file="C:\tmp_report\12345\mysqld\mysql.pid" \
--log-error="C:\tmp_report\12345\mysqld\mysql.err" \
--skip-networking \
--enable-named-pipe 
```

这可行，我可以使用以下命令行语句连接到数据库：

```
mysql --pipe -uroot 
```

我正在尝试通过 c-api 连接如下：

```
unsigned int mysql_timeout=200;
unsigned int protocol=MYSQL_PROTOCOL_PIPE;
bool mysql_reconnect=true;
bool mysql_local_infile=true;

if (mysql_options(conn,MYSQL_OPT_CONNECT_TIMEOUT, (char *)&mysql_timeout)){*logstream<<"mysql option error connect_timeout";}

if (mysql_options(conn,MYSQL_OPT_READ_TIMEOUT, (char *)&mysql_timeout)){*logstream<<"mysql option error read_timeout";}

if (mysql_options(conn,MYSQL_OPT_WRITE_TIMEOUT, (char *)&mysql_timeout)){*logstream<<"mysql option error write_timeout";}

if (mysql_options(conn,MYSQL_OPT_RECONNECT,                   &mysql_reconnect)){*logstream<<"mysql option error reconnect";}

if (mysql_options(conn,MYSQL_OPT_LOCAL_INFILE,                &mysql_local_infile)){*logstream <<"mysql option error local_infile";}

if (mysql_options(conn,MYSQL_OPT_NAMED_PIPE,                  NULL)){*logstream<<"mysql option error MYSQL_OPT_NAMED_PIPE";}
if (mysql_options(conn,MYSQL_OPT_PROTOCOL,            (char *)&protocol))          {*logstream<<"mysql option error protocol";}

if (!mysql_real_connect(conn,
        "localhost", // SERVER
        "root",      // USER
        NULL,   // PASS
        NULL,   // DATABASE
        0,    // port
        NULL, // socket
        0     // client_flag
    )){
    *logstream<<"Database::connect mysql_real_connect failed"<<endl;
    *logstream<<mysql_error(conn)<<endl;
    conn=NULL;
} 
```

这个 mysql_real_connect 调用的结果是：

```
Database::connect mysql_real_connect failed
Lost connection to MySQL server at 'waiting for initial communication packet', system error: 0 
```

如果我使用 TCPIP 连接，除了弹出 Windows 防火墙外，一切正常。我真的很想在不需要用户单击防火墙窗口上的取消的情况下完成这项工作。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:44:18.527

如果 MySQL 有意仅本地化，您只需将其配置为仅侦听本地地址。把它放在你的`my.cnf`文件中：

```
bind-address     = 127.0.0.1 
```

否则使用`netsh advfirewall`或类似配置防火墙以允许 MySQL。这通常会在您安装 MySQL 时完成。

例子：

*   [http://support.microsoft.com/kb/947709](http://support.microsoft.com/kb/947709)

或从脚本：

*   [http://technet.microsoft.com/en-us/library/cc737845(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/cc737845(v=WS.10).aspx)

对于没有或不需要管理员权限的一次性安装，您可以使用不可路由的 IP 地址和随机端口配置本地通信。

您可以通过添加`--bind-address=127.0.0.1 --port=62190`到命令行来实现此目的。

除非您是管理员，否则您将无法更改防火墙规则，并且侦听命名管道通常也需要管理权限。创建共享内存部分需要 SeCreateGlobalPrivilege，因此基本上适用相同的限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T16:50:21.987

即使在当前 C 连接器 6.0.2 中使用管理员运行的 mysql 服务器也是一个问题。这里报告了错误：[http](http://bugs.mysql.com/bug.php?id=41860) ://bugs.mysql.com/bug.php?id=41860 我需要找到一个版本没有它的mysql C连接器。

# facebook - 我们如何使用已经存在的 facebook 页面作为 facebook 开放图形应用程序对象的页面？

> ID：13254199
> 
> 赞同：0
> 
> 时间：2012-11-06T15:28:17.263
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-opengraph, facebook-page

我想创建具有内置对象类型和自定义操作类型的 facebook 开放图形应用程序。对于对象，我不想为每个对象创建一个页面，并且希望使用已经存在的 facebook 粉丝页面（facebook 在添加喜欢时使用的页面）。就像我的对象是书籍类型一样，我不想为每本书创建页面，而是我想使用已经存在的代表书籍的页面（在为书籍添加喜欢时显示的页面或为喜欢的页面显示的页面图书）。我想对这些对象使用自定义操作。

我怎样才能做到这一点 ？

提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:43:57.627

如果您使用书籍页面的 URL，它们应该在图中用作“配置文件”对象。很快它们将成为“书籍”对象，但与此同时，您可以将它们用作配置文件。

# javascript - 由于 window.handleApiReady 未加载 Google Maps API 不是函数错误

> ID：13254201
> 
> 赞同：1
> 
> 时间：2012-11-06T15:28:26.957
> 
> 标签：javascript, google-maps, google-maps-api-3

我在使用 Google Maps API 时遇到问题。

一页加载得到错误`window.handleApiReady is not a function`，它肯定是。查看下面的代码，您可以看到我将其用作回调函数：

```
 /**
    * Load GoogleMaps API
    */
    $(function(){
        script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'http://maps.google.com/maps/api/js?sensor=false&callback=handleApiReady';
        document.body.appendChild(script);
    });

    /**
         * Show map once GoogleMaps API is ready
         */
    function handleApiReady() {     
        if ( $("#map_canvas").length > 0 ) {                
            var latlng = $("#store_lat_long").html();
            var details = latlng.split(',');
            initialize(Number(details[0]), Number(details[1]), 'map_canvas');
        }
    } 
```

在第一行添加或突出显示`alert`它似乎没有找到该功能。为什么会这样？`console.log``handleApiReady`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:46:39.750

问题是由于我提供的代码位于`document.ready`. 将其移出`document.ready`解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:35:42.310

该代码看起来没有任何问题，我没有收到错误。您的错误一定是由其他地方引起的。

[http://jsbin.com/adakuc/1/edit](http://jsbin.com/adakuc/1/edit)

# mysql - 查询和数据库的 Vb.net 错误

> ID：13254204
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:28:32.200
> 
> 标签：mysql, vb.net

Dim datetimepicker1 As String = Format(System.DateTime.Now, "yyyy-MM-dd HH:mm:ss")

```
 Try
        Dim cmd As MySqlCommand = New MySqlCommand
        With cmd
            .CommandText = "INSERT INTO tbl_product (`prod_name`,`prod_desc`, `cat_id`, `uom_id`,`uom_num`, `dept_id`, `brand_id`, `size_id`, `type_id`, `remarks`, `date`) values (@prod_name,@prod_desc,@cat_id,@uom_id,@uom_num,@dept_id,@brand_id,@size_id,@type_id,@remarks,@date)"
            .Connection = SQLConnection
            .CommandType = CommandType.Text
            .Parameters.AddWithValue("@prod_name", TextBox1.Text)
            .Parameters.AddWithValue("@prod_desc", TextBox2.Text)
            .Parameters.AddWithValue("@cat_id", ComboBox1.Text)
            .Parameters.AddWithValue("@uom_id", ComboBox2.Text)
            .Parameters.AddWithValue("@uom_num", TextBox3.Text)
            .Parameters.AddWithValue("@dept_id", ComboBox3.Text)
            .Parameters.AddWithValue("@brand_id", ComboBox4.Text)
            .Parameters.AddWithValue("@size_id", ComboBox5.Text)
            .Parameters.AddWithValue("@type_id", ComboBox6.Text)
            .Parameters.AddWithValue("@remarks", RichTextBox1.Text)
            .Parameters.AddWithValue("@date", datetimepicker1)
            .ExecuteNonQuery()

        End With

            MsgBox(" SIze Successfully added")
        Catch ex As Exception
            MsgBox(ex.Message.ToString)

        End Try 
```

无法添加或更新子行外键约束失败这是我的错误

这是我的表结构* ***** ** *** ** *** ****** *8

* * *

--

## -- 表的表结构`tbl_brand`

如果不存在则创建表`tbl_brand`( `brand_id`int(11) NOT NULL AUTO_INCREMENT, `brand_name`varchar(200) NOT NULL, `brand_desc`varchar(200) DEFAULT NULL, PRIMARY KEY ( `brand_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=4;

--

## -- 为表转储数据`tbl_brand`

插入`tbl_brand`( `brand_id`, `brand_name`, `brand_desc`) 值 (1, 'Nike ', 'Nike Air '), (2, 'Crocs ', 'Class A '), (3, 'SafeGuard ', 'SafeGuard ');

* * *

--

## -- 表的表结构`tbl_category`

如果不存在则创建表`tbl_category`( `cat_id`int(11) NOT NULL AUTO_INCREMENT, `cat_name`varchar(200) NOT NULL, `cat_desc`varchar(200) NOT NULL, PRIMARY KEY ( `cat_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=3;

--

## -- 为表转储数据`tbl_category`

插入`tbl_category`( `cat_id`, `cat_name`, `cat_desc`) 值 (1, '沐浴皂', '沐浴皂'), (2, '洗涤剂', '洗涤剂');

* * *

--

## -- 表的表结构`tbl_dept`

如果不存在则创建表`tbl_dept`( `dept_id`int(11) NOT NULL AUTO_INCREMENT, `dept_name`varchar(200) NOT NULL, `dept_desc`varchar(200) NOT NULL, PRIMARY KEY ( `dept_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=3;

--

## -- 为表转储数据`tbl_dept`

插入`tbl_dept`( `dept_id`, `dept_name`, `dept_desc`) 值 (1, '鞋', '鞋'), (2, '肥皂', '肥皂');

* * *

--

## -- 表的表结构`tbl_product`

如果不存在则创建表`tbl_product`( `prod_id`int(11) NOT NULL AUTO_INCREMENT, `prod_name`varchar(200) NOT NULL, `prod_desc`varchar(200) DEFAULT NULL, `cat_id`int(11) NOT NULL, `dept_id`int(11) NOT NULL, `brand_id`int(11) NOT NULL, `type_id`int (11) NOT NULL, `uom_id`int(11) NOT NULL, `size_id`int(11) NOT NULL, `date`datetime NOT NULL, `remarks`varchar(200) DEFAULT NULL, `uom_num`int(60) DEFAULT NULL, PRIMARY KEY ( `prod_id`), KEY `tbl_product_ibfk_9`( `type_id`), KEY `tbl_product_ibfk_10`( `uom_id`) , 键`tbl_product_ibfk_11`( `size_id`), 键`tbl_product_ibfk_12`( `dept_id`), 键`tbl_product_ibfk_13`( `cat_id`), 键`tbl_product_ibfk_14`( `brand_id`) ); 引擎=InnoDB 默认字符集=latin1 AUTO_INCREMENT=3 ；

* * *

--

## -- 表的表结构`tbl_size`

如果不存在则创建表`tbl_size`( `size_id`int(11) NOT NULL AUTO_INCREMENT, `size_name`varchar(100) NOT NULL, PRIMARY KEY ( `size_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=4;

--

## -- 为表转储数据`tbl_size`

插入`tbl_size`( `size_id`, `size_name`) 值 (1, 'Small(S) '), (2, 'Medium(M) '), (3, 'Large(L) ');

* * *

--

## -- 表的表结构`tbl_type`

如果不存在则创建表`tbl_type`( `type_id`int(11) NOT NULL AUTO_INCREMENT, `type_name`varchar(200) NOT NULL, PRIMARY KEY ( `type_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=9;

--

## -- 为表转储数据`tbl_type`

INSERT INTO `tbl_type`( `type_id`, `type_name`) VALUES (1, 'BaskertBall Shoes '), (2, 'Jersey Shorts '), (3, '跑鞋'), (8, 'Bath Soap ');

* * *

--

## -- 表的表结构`tbl_uom`

如果不存在则创建表`tbl_uom`( `uom_id`int(11) NOT NULL AUTO_INCREMENT, `uom_name`varchar(200) NOT NULL, PRIMARY KEY ( `uom_id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=8;

--

## -- 为表转储数据`tbl_uom`

插入`tbl_uom`( `uom_id`, `uom_name`) 值 (1, '公斤(kg) '), (2, '克(g) '), (3, '毫克(Mg) '), (4, '升(L) '), （5，'毫升（ml）'），（6，'件（pcs）'），（7，'英尺（ft）'）；

* * *

--

## -- 表的表结构`tbl_user`

如果不存在则创建表`tbl_user`（ `user_id`int(11) NOT NULL AUTO_INCREMENT, `user_code`varchar(200) DEFAULT NULL, `user_password`varchar(200) DEFAULT NULL, `user_name`varchar(200) DEFAULT NULL, `user_level`int(1) DEFAULT NULL, `datetime`datetime NOT NULL, `com_code`varchar(11)非空，主键（`user_id`），唯一键`user_code`（`user_code`））引擎=InnoDB 默认字符集=latin1 AUTO_INCREMENT=10；

--

## -- 为表转储数据`tbl_user`

插入`tbl_user`( `user_id`, `user_code`, `user_password`, `user_name`, `user_level`, `datetime`, `com_code`) 值 (1, '1024', '1024', 'Vincent Dematera', 3, '2012-01-10 18:18:33', '001'), (7, '14', '14', 'Megan Bueno', 1, '2012-10-30 21:56:14', '002'), (8, '13', '13', '匿名', 1, '2012-10-20 21:51:00', '002'), (9, '9', '9', 'boom', 1, '0000-00-00 00:00:00', '003 ');

--

## -- 转储表的约束

--

## -- 表格约束`tbl_product`

更改表`tbl_product`

添加约束外`tbl_product_ibfk_9`键（`type_id`）引用`tbl_type`（`type_id`），添加约束外`tbl_product_ibfk_10`键（`uom_id`）引用`tbl_uom`（`uom_id`），添加约束外`tbl_product_ibfk_11`键（`size_id`）引用`tbl_size`（`size_id`），添加约束外`tbl_product_ibfk_12`键（`dept_id`）引用`tbl_dept`（`dept_id`），添加约束外`tbl_product_ibfk_13`键（`cat_id`）引用`tbl_category`（`cat_id`），添加约束外`tbl_product_ibfk_14`键（`brand_id`）引用`tbl_brand`（`brand_id`），添加约束外`tbl_product_ibfk_2`键（`type_id`）引用`tbl_type`（`type_id`），添加约束外`tbl_product_ibfk_3`键（`uom_id`）引用`tbl_uom`（`uom_id`），添加约束`tbl_product_ibfk_4`外键（`size_id`）引用`tbl_size`（`size_id`），添加约束外`tbl_product_ibfk_5`键（`dept_id`）引用`tbl_dept`（`dept_id`），添加约束外`tbl_product_ibfk_6`键（`cat_id`）引用`tbl_category`（`cat_id`），添加约束外`tbl_product_ibfk_7`键（`brand_id`）引用`tbl_brand`（`brand_id`）；设置 FOREIGN_KEY_CHECKS=1;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:02:32.267

您的表产品有大量外键约束。例如，您在表格产品中输入的任何“size_id”都必须对应于表格大小中的“size_id”。

您的 vb.net 程序告诉您的是，您输入到表产品中的 id 值之一在其对应的表中不存在。我最好的猜测是您的 id 值之一（即`size_id`、`uom_id`等）为空、空白或零。

您有多种选择 - 您可以：

*   如果您愿意，请关闭表的外键`SET foreign_key_checks = 0;`
*   您可以完全删除外键
*   您可以修复代码以确保在尝试插入值之前遵守外键

# c# - c# for 循环算术

> ID：13254205
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:28:35.757
> 
> 标签：c#

我为一个班级编写的这个程序使用“随机”数字来生成工作的到达（到达[i]）和服务时间（服务[i]）。我目前的问题是到达时间。为了获得到达时间，我调用了一个名为指数的函数，并将返回值添加到数组中的前一个到达时间 (arrival[i-1])。出于某种我不明白的原因，该程序没有使用数组的先前值进行加法，而是使用看似随机的值（1500,1600 等）。但我知道数组中设置的实际值都低于 5。这应该是 for 循环中的简单数组算术，但我无法弄清楚出了什么问题。

```
namespace ConsoleApplication4
{

class Program
{
    static long state;

    void putseed(int value)
    {
        state = value;
    }

    static void Main(string[] args)
    {
        Program pro = new Program();
        double totals = 0;
        double totald = 0;
        pro.putseed(12345);
        double[] arrival = new double[1000];
        double[] service = new double[1000];
        double[] wait = new double[1000];
        double[] delay = new double[1000];
        double[] departure = new double[1000];
        for (int i = 1; i < 1000; i++)
        {
            arrival[i] = arrival[i - 1] + pro.Exponential(2.0);
            if (arrival[i] < departure[i - 1])
                departure[i] = departure[i] - arrival[i];
            else
                departure[i] = 0;
            service[i] = pro.Uniform((long)1.0,(long)2.0);
            totals += service[i];
            totald += departure[i];
        }
        double averages = totals / 1000;
        double averaged = totald / 1000;
        Console.WriteLine("{0}\n",averages);
        Console.WriteLine("{0}\n", averaged);
        Console.WriteLine("press any key");
        Console.ReadLine();
    }

    public double Random()
    {
        const long A = 48271;
        const long M = 2147483647;
        const long Q = M / A;
        const long R = M % A;
        long t = A * (state % Q) - R * (state / Q);
        if (t > 0)
            state = t;
        else
            state = t + M;
        return ((double)state / M);
    }

    public double Exponential(double u)
    {
        return (-u * Math.Log(1.0 - Random()));
    }

    public double Uniform(long a, long b)
    {
        Program pro = new Program();
        double c = ((double)a + ((double)b - (double)a) * pro.Random());
        return c;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:43:01.467

鉴于您当前的逻辑，您的输出对我来说听起来完全正确。也许你的逻辑有缺陷？

`for`我将循环的前三行更改为：

```
var ex = Exponential(2.0);
arrival[i] = arrival[i - 1] + ex;
Console.WriteLine("i = " + arrival[i] + ", i-1 = " + arrival[i-1] + ", Exponential = " + ex); 
```

这是输出的开始和结束：

```
i = 0.650048368820785, i-1 = 0, Exponential = 0.650048368820785
i = 3.04412645597466, i-1 = 0.650048368820785, Exponential = 2.39407808715387
i = 4.11006720700818, i-1 = 3.04412645597466, Exponential = 1.06594075103352
i = 5.05503853283036, i-1 = 4.11006720700818, Exponential = 0.944971325822186
i = 6.77397334440211, i-1 = 5.05503853283036, Exponential = 1.71893481157175
i = 8.03325406790781, i-1 = 6.77397334440211, Exponential = 1.2592807235057
i = 9.99797822010981, i-1 = 8.03325406790781, Exponential = 1.964724152202
i = 10.540051694898, i-1 = 9.99797822010981, Exponential = 0.542073474788196
i = 10.6332298644808, i-1 = 10.540051694898, Exponential = 0.0931781695828122
....
i = 1970.86834655692, i-1 = 1968.91989881306, Exponential = 1.94844774386271
i = 1971.49302600885, i-1 = 1970.86834655692, Exponential = 0.62467945192265
i = 1972.16711634654, i-1 = 1971.49302600885, Exponential = 0.674090337697884
i = 1974.5740025773, i-1 = 1972.16711634654, Exponential = 2.40688623075635
i = 1978.14531015105, i-1 = 1974.5740025773, Exponential = 3.5713075737529
i = 1979.15315663014, i-1 = 1978.14531015105, Exponential = 1.00784647908321 
```

这里的数学对我来说看起来完全正确。

* * *

旁注：您可以将所有额外的方法（ 、 等）声明`Exponential`为`Uniform`，`static`因此您不必`Program`为了使用它们而创建新方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:40:17.010

您的方法返回的值`Exponential`可能非常大。非常非常大。实际上，如果您的`Random`值接近 1，它们会趋向于无穷大...

我并不惊讶您在到达数组中的值往往很大。我实际上希望他们这样做。

另外：尝试根据它们的作用命名您的方法。您的`Exponential`方法与数学指数无关。

并且尽量不要自己实现随机数生成器。使用`Random`.Net Framework 中包含的类。如果您希望始终拥有相同的伪随机数序列（如您所愿），您可以使用常量对其进行播种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:40:47.410

额外的建议，

```
public double Uniform(long a, long b)
{
    double c = ((double)a + ((double)b - (double)a) * Random());
    return c;
} 
```

像这样改变你的统一功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:31:53.777

您没有设置到达 [0] 的值，它在 for 循环之前没有初始化，因此数组中的其他值计算错误。

# ruby - 我可以在模型实例上覆盖 AcitveRecord::Base#to_json 吗？

> ID：13254207
> 
> 赞同：1
> 
> 时间：2012-11-06T15:28:39.330
> 
> 标签：ruby, mixins

在 Rails 2.3 中，我有一个 Rails 引擎，它有自己的命名空间控制器，但它将使用主应用程序的模型。

但是，我想覆盖 ActiveRecord::Base#to_json 方法的默认行为，*但仅在从 Engine 使用模型时*。

所以在引擎控制器中做类似的事情是合理的......

```
category.questions.each do |qst|
  # override ActiveRecord::Base#to_json somehow on the qst instance 
end 
```

...如果在概念上是合理的，我将如何真正去做这样的事情？

如果不合理，那么仅针对引擎而不是主应用程序覆盖 ActiveRecord::Base#to_json 的最佳方法是什么？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:30:44.707

您可以使用以下方法执行此操作`instance_eval`：

```
category.questions.each do |qst|
  qst.instance_eval do
    # do something here
  end
end 
```

但是，我不确定这是否真的是您想要做的适当策略。一种更简单的方法是创建一个不同命名的方法并`to_json`在您的引擎中使用它来代替。

# java - 霍夫曼编码文件保存

> ID：13254210
> 
> 赞同：0
> 
> 时间：2012-11-06T15:28:47.143
> 
> 标签：java

我编写了一个程序，它使用霍夫曼编码来获取一个 .txt 文件并对其进行压缩。该程序采用压缩代码并将其保存为 .hzip 文件。在我尝试压缩并保存包含换行符的文件之前，代码工作正常。这是我保存文件的代码：

```
private void codeToFile() {

    String code = "";
    char letter;

    String fileName = this.encodeFileName.replace(".txt", ".hzip");

    FileOutputStream byteWriter = null;
    FileInputStream reader = null;
    try {

        byteWriter = new FileOutputStream(fileName);
        reader = new FileInputStream(this.encodeFileName);

        while (reader.available() > 0) {
            letter = (char) reader.read();

            code += hCode.get(letter);

            if (code.length() > 7) {
                int c = Integer.parseInt(code.substring(0, 8), 2)
                        + Byte.MIN_VALUE;
                byteWriter.write((byte) c);
                code = code.substring(8);
            }
        }

        if (code.length() > 0 && code.length() <= 7) {
            code += "0000000";
            int c = Integer.parseInt(code.substring(0, 8), 2)
                    + Byte.MIN_VALUE;
            byteWriter.write((byte) c);
        }
        byteWriter.close();

    } catch (IOException ex) {
        ex.printStackTrace();
    }
    System.out.println("===============================");
    System.out.println("File Created: " + fileName);

} 
```

我的错误总是出现在这一行：

```
int c = Integer.parseInt(code.substring(0, 8), 2)
                        + Byte.MIN_VALUE; 
```

我得到的具体错误是：线程“AWT-EventQueue-0”中的异常 java.lang.NumberFormatException：对于输入字符串：“110001nu”。我不明白为什么换行符会导致此问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:36:08.523

可能您的`hCode`地图不包含换行“字母”的条目，因此`hCode.get(letter)`返回“null”，您输入的前两个字母`code.substring(0, 8)`

# c# - 如何将字符串转换为 UTC 格式的 DateTime 就这么简单

> ID：13254211
> 
> 赞同：20
> 
> 时间：2012-11-06T15:28:49.687
> 
> 标签：c#, datetime, datetimeoffset

假设我有这个字符串：如何将它转换为具有 UTC 时间的 DateTimeOffset 对象 - 意味着 -00:00 作为时区 - 即使我在特定时区的机器上运行它？

假设字符串：“2012-10-08T04:50:12.0000000”

Convert.ToDateTime("2012-10-08T04:50:12.0000000" + "Z");

--> DateTime d = {10/8/2012 6:50:12 AM} 我希望它是 **DateTime d = {10/8/2012 4:50:12 AM}** 好像它会明白我想要日期就这么简单（顺便说一句 - 我的机器在时区 +02:00）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-06T15:32:07.987

使用`DateTimeOffset.Parse(string).UtcDateTime`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-29T05:37:04.100

接受的答案对我不起作用。使用`DateTimeOffset.Parse(string)`或`DateTimeOffset.ParseExact(string)`与`.UtcDateTime`转换器正确地将类型更改`DateTime`为 UTC，但也转换了时间。

要获得`DateTime`与原始字符串时间相同的时间，但在 UTC 中使用以下命令：

```
DateTime dt = DateTime.ParseExact(string, "yyyy-MM-ddTHH:mm:ss.fffffff",
    CultureInfo.InvariantCulture);
dt = DateTime.SpecifyKind(dt, DateTimeKind.Utc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-17T14:32:26.070

```
var universalDateTime = DateTime.Parse(your_date_time_string).ToUniversalTime(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-07T14:21:21.073

我通过检查来做到这一点`DateTimeKind`。在我的功能上，有两种不同类型的日期时间即将到来。我想要的是从下面的函数将 UTC 时间转换为本地时间。输入参数`date`始终为 UTC。

例如输入：`2021-01-19 07:43:00 AM`和`01/07/2021 02:16:00 PM +00:00`

```
public static DateTime GetDateTime(string date)
    {
        try
        {
            DateTime parsedDate = DateTime.Parse(date, GetCulture()); //invarient culture

            if (parsedDate.Kind == DateTimeKind.Unspecified)
            {
                parsedDate = DateTime.SpecifyKind(parsedDate, DateTimeKind.Utc);
            }

            return parsedDate.ToLocalTime();
        }
        catch (Exception e)
        {
            throw;
        }
    } 
```

# debugging - 跳转到 cgdb 中正在执行的当前行

> ID：13254212
> 
> 赞同：4
> 
> 时间：2012-11-06T15:28:51.677
> 
> 标签：debugging, terminal, gdb, cgdb

是否可以跳转到源窗口中正在执行的当前行`cgdb`？

有一个命令或快捷方式来执行此操作会很棒，尤其是在文件对话框模式下浏览文件很长时间之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:46:34.307

事实证明，您可以轻松跳转到当前行：只需使用`frame`不带参数的 gdb 命令，或者简单地使用`f`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:48:52.647

我认为我们没有捷径。我通常在 gdb 中做一个快速`up`和`down`（反之亦然）。

# winforms - 如何防止在程序化调整大小时重绘托管的winform？

> ID：13254213
> 
> 赞同：1
> 
> 时间：2012-11-06T15:28:56.583
> 
> 标签：winforms, flicker, redraw

我有一个 .net 4.0 winforms 项目，我需要在其中以编程方式设置窗口（System.Windows.Forms.Form）的边界（又名大小）并同时在其中添加/删除控件，而不会出现可见闪烁. 表单不是用户可调整大小的，唯一改变其大小的地方是 this.Bounds = foo / this.DesktopBounds = foo / ... 调用。

我已经阅读了有关通过使用 p/invoke 发送 WM_SETREDRAW 来防止闪烁的信息，以及有关 SuspendRedraw/SuspendLayout 和朋友的信息。我仍然看到闪烁发生，并将问题确定为：

Windows 在设置其边界/大小时重绘表单，即使重绘被禁用。

我猜这不是由表单本身引起的，而是由窗口管理器引起的？

那么 - 有没有办法在任何情况下绝对防止重绘任何东西，然后重新启用重绘并在之后手动刷新？那种“冻结窗口并显示快照”、更改内容和“一次性用更新的窗口（包括位置和大小）替换快照”？

谢谢，干杯，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:34:17.897

使用窗体的 ResizeRedraw 属性。将其设置为假。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resizeredraw.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resizeredraw.aspx)

之后您还需要手动重绘窗口。

# yaml - YAML 中没有正确显示换行符？

> ID：13254214
> 
> 赞同：2
> 
> 时间：2012-11-06T15:29:02.087
> 
> 标签：yaml, minecraft

我正在查看数据库的 YAML 配置文件，我看到的只是一大堆文本。但是，我注意到有时会丢失一个字符，如果我使用键盘的箭头键四处导航，我注意到偶尔会有光标卡住的地方，需要我按两次箭头键而不是一。我目前假设这是一个只有 YAML 解析器才能读取的换行符。当我按 强制换行时`ENTER`，YAML 解析器不再理解配置文件。如何在不使用非 Windows 程序的情况下克服这个限制？此换行符的十六进制值为 0A。

* * *

根据要求，可以在下面的链接中找到当前 YAML 文本的外观和我希望它的外观的片段（由于 StackExchange 对缩进的使用有限。请注意，这是游戏配置的两个不同文件。解析器的 API 在[这里](http://dl.bukkit.org)。

* * *

[我希望配置看起来像](http://pastebin.com/HhuzXMUS)
[什么配置当前看起来像什么](http://pastebin.com/Jxgba2Pj)

我还注意到第二个链接可能将其显示为 YAML 文件，因为它将换行符注册为换行符。但是，下面的代码块可能会让您了解它在我看来是什么样的。

> RWtorchLight：MYCRAFTisbest 制作的 1.2 版 indent1：'' 注意：'元数据值是 :' 后面的数字 例如：黑色羊毛，在 Light_Block 中放入 35，在元数据中放入 15 Light_Block：89 Meta_Deta_LB：0 重要提示：手电筒和靴子尚不兼容元数据 Torch_Item: 50 Helmet_Item: 314 Boot_Item: 317 indent2: '' Torch_Use: true Helmet_Use: true Boot_Use: true T-or-T 模式：穿着南瓜和以下所有功能时会产生昏暗的灯光-or-Treat Mode: true C of C: Chance of Cookie 是不给糖就捣蛋的人获得糖果的几率 设置为: '"0" 表示没有机会' Cookie 的几率: 5000 N of C: '将随机收到 Cookie 时选择 1 到 # 之间的数字'Cookie 数量：5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:21:24.633

**背景**

在查看了您的问题和评论中的相关讨论后，您的 YAML 文件很可能被以下原因损坏：

*   记事本.exe；
*   您的 FTP/SFTP/网页/用于上传文本的任何内容；或者
*   以上两者的结合

**问题**

YAML 语法对空格和缩进敏感，不推荐使用 MSFT notepad.exe，因为它可能不支持 YAML 文件中指定的编码。

由于 YAML 使用空格来分隔数据，因此任何与原始 YAML 的原始编码和空格不一致的文本修改都可能导致文件不可用。

这是 YAML 的一个方面，它可能比 JSON 或 XML 等替代格式更脆弱。

**解决方案**

使用其他编辑器，例如 Notepad++（在评论中推荐），或者，如果您没有足够的权限安装其他文本编辑器，请使用在线文本编辑器，例如 editpad (http://www.editpad.org/) 进行编辑并将 YAML 保存到您机器上的本地文件中。

使用除 notepad.exe 之外的文本编辑器将文件保存到本地计算机后，使用不对文本应用任何类型的文本过滤器的选项上传文件。

例如，一些网站会从用户上传的文本中删除字符，以防止数据损坏和安全风险。

**一步步**

*   从一个已知的格式良好的 YAML 文件开始，例如您在“我希望配置看起来像什么”中指定的文件
*   将其粘贴到 Notepad++（本地计算机）或 editpad（基于 Web 的编辑器）
*   修改 YAML 文件，使其与您想要的设置相匹配
*   将您的修改保存到原始文件
*   通过 SFTP 或其他保留原始编码的方式上传文件

# php - 从 php 执行 jquery 代码

> ID：13254216
> 
> 赞同：0
> 
> 时间：2012-11-06T15:29:06.003
> 
> 标签：php, javascript, jquery

```
$("#bt-potrdi").click( function(e) {    
        e.stopPropagation();        
        $("#belina").css({"z-index":200}); $("body").addClass("ext");
        $("#vpisok_frame").css({"z-index":250}).fadeIn(200);        
    }); 
```

当我单击按钮时，此 jquery 代码被执行并且工作正常。我可以在没有点击事件的情况下执行此代码吗？

当某些数据成功执行时，我想从 php 执行此代码，例如

```
if ($ok) {
?>
//execude ajax code
e.stopPropagation();        
            $("#belina").css({"z-index":200}); $("body").addClass("ext");
            $("#vpisok_frame").css({"z-index":250}).fadeIn(200);    
<?php
} 
```

这可能吗？PHP是服务器端代码，所以如果可能的话，我没有找到任何好的例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:34:47.057

与其他建议类似，但这并不依赖于拥有相同代码的 2 个副本......

```
if ($ok) {
?>
<script type="text/javascript">
    $(function() {
        $("#bt-potrdi").trigger("click");
    });
</script>
<?php 
```

如果您更改了单击事件处理程序，这仍然有效。这意味着您将来不需要在 2 个地方进行任何更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:32:57.333

`$ok`如果我理解这个问题，如果是真的，你想在页面加载时执行一些 javascript 。为此，您应该能够执行以下操作：

```
if ($ok) {
?>
<script type="text/javascript">
   //execute ajax code
   $("#belina").css({"z-index":200}); $("body").addClass("ext");
   $("#vpisok_frame").css({"z-index":250}).fadeIn(200);    
</script>
<?php
} 
```

编辑：另外，`e.stopPropagation();`不会工作，因为`e`没有在任何地方定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:35:24.043

我会设计我的代码，以便我可以在呈现 html 时直接添加类并设置 z-index，但是如果你想用 jquery 做这些，jsut 将它们包装起来`<script>`，`$(document).ready(function({});`这样它们就会在 dom 准备好时执行。

例如。

```
if ($ok) {
?>
//execude ajax code
<script>
$(document).ready(function{

    $("#belina").css({"z-index":200}); $("body").addClass("ext");
    $("#vpisok_frame").css({"z-index":250}).fadeIn(200);    
});
</Script>
<?php
} 
```

**编辑** 好吧，我假设`e.stopPropagation();`之前设置在某个地方，因为它也是问题示例。暂时将其删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:37:37.917

当你的 PHP 脚本被执行时，如果 $ok 计算结果为真，那么你的 jquery 代码将包含在生成的文档中，如果没有，则将其省略。但是此时还没有事件，所以下面这行就行不通了。

```
e.stopPropagation(); 
```

但是，正如 jdwire 建议的那样，您可以将 javascript 包装在脚本标签中，并以这种方式执行，而不会被事件触发。所以......像这样：

```
<?php
if ($ok) {
?>
<script type="text/javascript">
    $("#belina").css({"z-index":200}); $("body").addClass("ext");
    $("#vpisok_frame").css({"z-index":250}).fadeIn(200);    
</script>
<?php
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:30:45.540

您可以`echo`在`<script/>`标签中输出代码，它将作为 JavaScript 运行，或者使用您拥有的代码，只需将其放在标签之间就可以了 :)

但是你不能做到这一点“现场”。仅当页面被请求一次时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T15:45:34.817

您也可以通过这种方式将 PHP 变量传递给 javaScript。我觉得它干净了很多。

```
$check = 1;

?>

...

<script type="text/javascript">

    var check = <?= $check; ?>;

    ...

    if (check)
    {
        $("#bt-potrdi").trigger("click");
    } 
```

# c - 在 C 中反转单链表

> ID：13254218
> 
> 赞同：1
> 
> 时间：2012-11-06T15:29:16.123
> 
> 标签：c, linked-list, singly-linked-list

> **可能重复：**
> [如何仅使用两个指针来反转单链表？](https://stackoverflow.com/questions/1801549/reverse-a-singly-linked-list)

这是反转链表的 C 代码。但这并没有产生所需的输出。

```
struct node *temp,*prev;
while(head->next!=NULL)
  {
    temp=prev=head;
    while(temp->next->next!=NULL)
      {
    temp=temp->next;
    prev=prev->next;
      }
    temp=temp->next;
    temp->next=prev;
    prev->next=NULL;
  } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:33:01.667

在你的职业生涯中，你会经常问自己这个问题，所以为这个问题想出一个解决方案很重要。这里有一些提示：

1.  [为您的代码编写单元测试](https://stackoverflow.com/questions/65820/unit-testing-c-code)。从一个空列表开始，一个包含一个元素的列表，然后是两个，然后是三个。

2.  在调试器中运行代码。

3.  添加调试`printf()`语句，向您展示代码在执行时的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:36:33.947

您没有提供足够的信息来获得更多详细信息，所以我猜这是一个非常喜欢的列表。如果是这样，您需要遍历您的列表一次。

```
void reverse(struct node **p) {
    struct node *buff = NULL;
    struct node *head = *p;

    while (head != NULL) {
        struct node *temp = head->next;
        head->next = buff;
        buff = head;
        head = temp;
    }   

    *p = buff;
} 
```

# json - Windows 电话 8 JSON

> ID：13254221
> 
> 赞同：7
> 
> 时间：2012-11-06T15:29:31.277
> 
> 标签：json, json.net, windows-phone-8

我开始在 windows phone 8 上进行开发，著名的 JSON.NET 还不支持 windows phone 8，是否有任何其他库可以用于此目的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T17:48:32.860

JSON.NET [codeplex 站点](http://json.codeplex.com/)表示支持 WP8。

**更新：** JSON.NET NuGet 包应该只适用于 Windows Phone 8.0 项目。在 VS2012 NuGet 管理器中添加它会引入 WP7 版本的 JSON.NET。( `packages\Newtonsoft.Json.4.5.10\lib\sl3-wp\Newtonsoft.Json.dll`)

JSON.NET 现在也可用作可移植类库，您可以从 WP8 使用它（以 NuGet 或源形式提供）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-20T15:13:38.700

有完全相同的问题 - 结果我没有最新版本的 NuGet。

要升级，请单击`tools -> extensions and updates`，然后单击`Updates`- 选项卡。更新所有内容，重新启动程序并重试。:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-01T23:34:32.970

I was having this issue. I was able to compile the source for Windows Phone 8 instead of Windows 7.1 and it worked. NuGet would not work for me.

Here is how I did it:

1.  Open up solution JsonXXrXX.zip\Source\Src\Newtonsoft.JSON.WindowsPhone.sln
2.  Go to properties for Newtonsoft.Json.WindowsPhone Project(Right click on the project then properties)
3.  For the dropdown of "Target Windows Phone OS Version" select Windows 8.X
4.  Compile.
5.  Grab the DLL, PDB, and XML from the output directory
6.  Add Reference to the DLL file in your Windows Phone 8 Project

Thats it. I can't vouch that it works 100% or that you'll be able to submit your app. But it should hold you over until there is official support.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:19:47.010

对于复杂的 json，您可能会发现这个网站很有帮助：http: [//json2csharp.com/#](http://json2csharp.com/#)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:49:57.140

如果您不想制作太花哨的东西（或需要字典）支持，您也可以使用内置的 DataContractJsonSerializer ( [http://msdn.microsoft.com/en-us/library/system.runtime.serialization。 json.datacontractjsonserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx) )

顺便说一句：至少在[https://json.codeplex.com/discussions/401305](https://json.codeplex.com/discussions/401305)中，有些人报告说 WP7.1 dll 适用于他们，使用此文件：“Newtonsoft.Json.4.5.7\lib\sl4-windowsphone71\ Newtonsoft.Json.dll”。

# java - 正则表达式 NOT 运算符不起作用

> ID：13254222
> 
> 赞同：1
> 
> 时间：2012-11-06T15:29:32.507
> 
> 标签：java, regex

我正在尝试过滤文件夹中的文件。我需要不以“.xml-test”结尾的文件。以下正则表达式按预期工作（ok1，ok2，ok3 = false，ok4 = true）

```
String regex = ".+\\.xml\\-test$";
boolean ok1 = Pattern.matches(regex, "database123.xml");
boolean ok2 = Pattern.matches(regex, "database123.sql");
boolean ok3 = Pattern.matches(regex, "log_file012.txt");
boolean ok4 = Pattern.matches(regex, "database.xml-test"); 
```

现在我只需要否定它，但由于某种原因它不起作用：

```
String regex = "^(.+\\.xml\\-test)$"; 
```

我仍然得到 ok1,ok2,ok3 = false, ok4 = true

有任何想法吗？（正如人们指出的那样，这可以在没有正则表达式的情况下轻松完成。但为了论证，假设我必须使用单个正则表达式模式而没有别的（即 !Pattern.matches(..); 也是不允许的））

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:33:36.523

我认为您正在寻找：

```
if (! someString.endsWith(".xml-test")) {
  ...
} 
```

不需要正则表达式。将其放入 a[`FilenameFilter`](http://docs.oracle.com/javase/7/docs/api/java/io/FilenameFilter.html)中，如下所示：

```
public accept(File dir, String name) {
  return ! name.endsWith(".xml-test");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T15:32:48.703

的含义`^`取决于其在正则表达式中的位置。当符号`[]`作为第一个字符在字符类中时，表示字符类的否定；当它在字符类之外时，它意味着行的开头。

否定匹配结果的最简单方法是在正则表达式中使用正模式，然后`!`在 Java 端添加 a 来进行否定，如下所示：

```
boolean isGoodFile = !Pattern.matches(regex, "database123.xml"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T16:02:51.300

以下 Java 正则表达式断言字符串不以: 结尾`.xml-test`：

```
String regex = "^(?:(?!\\.xml-test$).)*$"; 
```

此正则表达式一次遍历字符串一个字符，并断言在每个位置字符串的其余部分不是`.xml-test`.

简单的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:35:06.453

^ - 不是正则表达式中的否定，这是一个符号，表示您可能需要 (?!X) X 的行开头，通过零宽度负前瞻

但我建议您将 File#listFiles 方法与 FilenameFilter 实现一起使用：name.endsWith(".xml-test")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T15:52:55.790

[如果您真的需要使用正则表达式对其进行测试，那么您应该使用Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)类中的否定后视：

```
String reges = "^.*(?<!\\.xml-test)$" 
```

这个怎么运作：

1.  首先匹配整个字符串：从开始 (^) 所有字符 (.*)，
2.  您检查已经匹配的内容是否最后没有“.xml-test”（在您已经匹配的位置向后看），
3.  你测试它是否是字符串的结尾。

# boost - RWLock 使用 boost shared_mutex、unique_lock 和 shared_lock

> ID：13254223
> 
> 赞同：1
> 
> 时间：2012-11-06T15:29:31.940
> 
> 标签：boost, synchronization, rwlock

我正在尝试实现 RWLock 接口

```
interface IRWLock
{
    void acquireLockShared();   //< LockRead.
    void releaseLockShared();   //< UnLockRead.
    void acquireLockExclusive();    //< LockWrite.
    void releaseLockExclusive();    //< UnLockWrite.
}; 
```

通过使用`boost::shared_mutex`和。`boost::unique_lock``boost::shared_lock`

我遇到的问题是`boost::shared_lock`/`boost::unique_lock`正在使用 RAII 并且应该是每个线程一个实例（不是我需要的共享）。我没有设法根据需要在两个单独的操作中中断获取和释放。

这可以以某种方式解决吗？

# c# - 浮点列的 SQL 排序不起作用

> ID：13254224
> 
> 赞同：4
> 
> 时间：2012-11-06T15:29:33.160
> 
> 标签：c#, sql, entity-framework

我的数据库中有以下行：

```
ID       Weight
-----------------------------
897      1.46357497509608E-11
689      6.67145488899268E-12
896      6.63573718293682E-12
615      5.14817058560092E-12
822      5.14806820534293E-12 
```

当我执行以下 SQL 查询时：

```
SELECT * 
FROM mytable 
ORDER BY weight DESC 
```

数据以相同的顺序返回。

PS 同样的事情发生在 ASP.NET C# 应用程序中的 Linq 查询中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T15:32:08.463

这个顺序是正确的。

降序意味着最大值在前。您的数字以[科学计数法](http://en.wikipedia.org/wiki/Scientific_notation)显示。1.46E-11 表示 1.46 × 10 ^(-11)等于 0.0000000000146。

查看普通十进制形式的数字可能有助于理解为什么顺序是正确的：

```
身份证重量
897 0.00000000001463574975096080
689 0.00000000000667145488899268
896 0.00000000000663573718293682
615 0.00000000000514817058560092
822 0.00000000000514806820534293

```

# java - android复杂的onDraw（）方法与自定义布局

> ID：13254232
> 
> 赞同：5
> 
> 时间：2012-11-06T15:29:47.043
> 
> 标签：java, android, user-interface

我是 android 开发的新手，我想创建一个自定义图表视图（我知道有一些库，但我想制作一个视图）。我希望它有一个图表、轴和一个图表名称（一个标签）。我看到两个选项如何实现这一点。

1）子类化视图并具有复杂的绘制方法。像这样的东西（可能使用辅助类来绘制轴、标签等）

```
drawChart();
drawAxes();
drawLabels(); 
```

2）创建一个`View`用于绘制图表本身的`View`子类，一个用于水平轴的`View`子类，一个用于垂直轴的子类，以及一个`Label`. 然后创建一个`ViewGroup`子类并实现自定义布局。

哪种方法更可取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:55:34.363

我的观点是您应该使用自定义布局，这样您就不必重新绘制可能很复杂的图表，而可以集中在收集和管理数据上。

如果您在完成后制作自己的库，则更适合重用；）

# c++ - 使用 Opencv CvNormalBayesClassifier 训练皮肤像素

> ID：13254234
> 
> 赞同：4
> 
> 时间：2012-11-06T15:29:50.667
> 
> 标签：c++, xcode, opencv, bayesian, classification

我对 OpenCV 很陌生。我正在尝试使用 CvNormalBayesClassifier 来训练我的程序来学习皮肤像素颜色。

目前，我在不同的光照条件和背景下获得了大约 20 张人体照片（面部/其他身体部位）。我也得到了 20 个相应的响应，其中皮肤部分标记为红色，其他部分标记为绿色。

我无法理解如何使用该功能

```
bool CvNormalBayesClassifier::train(const CvMat* _train_data, const CvMat* _response, const Cv*Mat _var_idx = 0, const CvMat* _sample_idx=0,, bool update=false); 
```

我应该如何使用我必须准备可以作为_train_data和_responses传入的值的当前两个图片库？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T22:27:15.333

您需要将训练图像中的像素值放入 train_data 中，并在响应中输入与该像素的类别相对应的索引（例如，1 表示皮肤类，0 表示非皮肤类）。var_idx 和 sample_idx 可以保持原样，它们用于屏蔽训练集中的一些描述符或样本。根据您是否一次获得所有描述符（所有训练图像的所有像素）将更新设置为真/假，以防您可以让它为假，或者您逐步处理训练图像（这可能更好地解决内存问题)，在这种情况下，您需要更新模型。

让我用代码澄清一下（未检查，并使用我强烈推荐的 OpenCV 的 C++ 接口而不是旧的 C）

```
int main(int argc, char **argv)
{

  CvNormalBaseClassifier classifier;
  for (int i = 0; i < argc; ++i) {
    cv::Mat image = // read in your training image, say cv::imread(argv[i]);
    // read your mask image
    cv::Mat mask = ...
    cv::Mat response = mask == CV_RGB(255,0,0); // little trick: you said red pixels in your mask correspond to skin, so pixels in responses are set to 1 if corresponding pixel in mask is red, 0 otherwise.
    cv::Mat responseInt;
    response.convertTo(responsesInt, CV_32S); // train expects a matrix of integers

    image = image.reshape(0, image.rows*image.cols); // little trick number 2 convert your width x height, N channel image into a witdth*height row matrix by N columns, as each pixel should be considere as a training sample.
    responsesInt = responsesInt.reshape(0, image.rows*image.cols); // the same, image and responses have the same number of rows (w*h).

    classifier.train(image, responsesInt, 0, 0, true); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:31:09.770

我对这个类进行了谷歌搜索，但没有找到太多信息，实际上即使是官方的opencv文档也没有提供参数的直接说明。但我确实注意到 opencv 文档中的一件事

> 该方法训练 Normal Bayes 分类器。它遵循通用 CvStatModel::train() 方法的约定，但有以下限制：

它引导我进入 CvStatModel 类，从那里我发现[了一些](http://docs.opencv.org/modules/ml/doc/statistical_models.html#cvstatmodel-train)有用的东西。也许你也可以从第 471 页看这本书，它为你提供了更多关于这门课的细节。[这本书](http://books.google.com/books?isbn=0596516134)是免费的谷歌图书。

# python - 从字典列表中删除键值对

> ID：13254241
> 
> 赞同：10
> 
> 时间：2012-11-06T15:30:14.553
> 
> 标签：python, list-comprehension

我有一个字典列表，例如：

```
[{'mykey1':'myvalue1', 'mykey2':'myvalue2'}, {'mykey1':'myvalue1a', 'mykey2':'myvalue2a'}] 
```

我需要从键等于 mykey1 的所有字典中删除所有键值对。我可以通过循环和使用 del 语句来做到这一点，但我想知道如何使用列表推导或 lambdas 创建一个新列表，它只会删除键为 mykey1 的所有键值对。

非常感谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T15:33:05.267

如果您真的想使用列表推导，请将其与字典推导结合起来：

```
[{k: v for k, v in d.iteritems() if k != 'mykey1'} for d in mylist] 
```

如果您使用的是 python 3，请替换`.iteritems()`。`.items()`

在 python 2.6 及更低版本上，您应该使用：

```
[dict((k, v) for k, v in d.iteritems() if k != 'mykey1') for d in mylist] 
```

因为`{key: value ...}`dict 理解语法仅在 Python 2.7 和 3 中引入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T15:32:47.023

```
def new_dict(old_dict):
    n = old_dict.copy()
    n.pop('mykey1',None)
    return n

new_list_of_dict = map(new_dict,list_of_dict) 
```

或者

```
new_list_of_dict = [ new_dict(d) for d in list_of_dict ] 
```

我没有使用`del`，而是选择了`dict.pop`因为如果密钥不存在，`pop`将抑制。`KeyError`

* * *

如果您真的只想获得某些密钥，这会变得容易一些。

```
from operator import itemgetter
tuple_keys = ('key1','key2','key3')
get_keys = itemgetter(*tuple_keys)
new_dict_list = [ dict(zip(tuple_keys,get_keys(d)) for d in old_dict_list ] 
```

`KeyError`如果键不在旧字典中，则会引发

或者：

```
new_dict_list = [ dict( (k,d.get(k,None)) for k in tuple_keys ) for d in old_dict_list ] 
```

`key:None`如果`key`不在旧字典中，它也会添加。如果你不想要那个`None`，你可以这样做：

```
new_dict_list = [ dict( (k,d[k]) for k in tuple_keys if k in d) for d in old_dict_list ] 
```

根据您包含/排除的字典百分比和字典的大小，这可能比@MartijnPieters 的解决方案略快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:35:41.217

`[d.pop('mykey1', None) for d in list]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T11:39:47.197

在 python 3.5 上这工作成功'''结果是我的列表字典'''

```
[{key: value for key, value in dict.items() if key != 'EQUITY'} for dict in result] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-06T04:09:35.060

您可以按照以下简单步骤操作：

```
arr = [{'mykey1':'myvalue1', 'mykey2':'myvalue2'}, {'mykey1':'myvalue1a', 'mykey2':'myvalue2a'}]

for i in arr:
    del i["mykey1"]

print(arr) 
```

输出：

```
[{'mykey2': 'myvalue2'}, {'mykey2': 'myvalue2a'}] 
```

# parsing - LL 解析器堆栈状态

> ID：13254242
> 
> 赞同：0
> 
> 时间：2012-11-06T15:30:15.640
> 
> 标签：parsing, generics, tree, stack

我认为LL解析器堆栈的初始状态是0，但我不确定最终状态，它可能是空的吗？谁能给我解释一下？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:37:30.530

也许您可以阅读[http://en.wikipedia.org/wiki/LL_parser](http://en.wikipedia.org/wiki/LL_parser) 似乎最初堆栈不是空的。最终状态似乎是空的。

# java - Active MQ - 合并配置代理

> ID：13254243
> 
> 赞同：0
> 
> 时间：2012-11-06T15:30:22.753
> 
> 标签：java, spring, activemq

```
<bean id="myTopic" class="org.apache.activemq.command.ActiveMQTopic">
    <property name="physicalName" value="feed.topic" />
</bean>

<bean id="myConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="failover:tcp://localhost:61616" />
</bean>

<bean id="myJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="myConnectionFactory" />
    <property name="defaultDestination" ref="myTopic" />
</bean>

<bean id="sender" class="com.feed.publish.PublishMessages">
    <property name="jmsTemplate" ref="myJmsTemplate" />
</bean> 
```

我使用 spring 框架进行了上述设置，该框架允许我将消息发布到队列。但是，如果 activemq 实例在进程中终止，我希望它将消息写入磁盘/文件，直到可以重新建立连接。我在 activemq 的网站上找到了示例代码，但是我不确定如何将它集成到我当前的设置中

```
<amq:broker useJmx="true" persistent="true" brokerName="localhost">
    <amq:persistenceAdapter>
        <amq:kahaPersistenceAdapter directory="activemq-data"
            maxDataFileLength="33554432" />
    </amq:persistenceAdapter>
    <amq:transportConnectors>
        <amq:transportConnector name="vm" uri="vm://localhost" />
    </amq:transportConnectors>
</amq:broker> 
```

有人可以告诉我如何合并这两种风格吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:06:31.333

AMQ persistenceAdapter 配置是允许**AMQ Broker**将消息持久化到磁盘，**而不是客户端**。如果代理连接终止，您的客户端代码应捕获异常，将消息写入磁盘并提供一种稍后重播它们的方法。

沿着这些思路，我通常使用 Apache Camel 的[异常处理](http://camel.apache.org/exception-clause.html)和[文件](http://camel.apache.org/file2.html)组件来处理这些类型的场景......

# search - 搜索然后复制并到位置 - 如果退出则重命名

> ID：13254256
> 
> 赞同：0
> 
> 时间：2012-11-06T15:30:58.670
> 
> 标签：search, batch-file, copy, dos, rename

好的，我需要一个执行以下操作的批处理文件，而在我的一生中，我似乎无法让它工作。

1.  在整个`C:\`驱动器中搜索所有*`*.PST`*文件
2.  将这些文件复制到网络驱动器位置 ( *`j:\@PCBackup\PST`*)
3.  如果存在多个同名文件，则重命名而不是覆盖

因此，如果存在以下情况：

```
c:\archive.pst
c:\user\archive.pst 
```

输出将类似于：

```
:\@PCBackup\PST\archive1.pst
:\@PCBackup\PST\archive2.pst 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:38:42.140

可以按如下方式完成：

```
@echo off

FOR /F "usebackq delims=;" %%I IN (`dir C:\*.pst /s /b`) DO (
    IF NOT EXIST "j:\@PCBackup\PST\%%~nxI" (
        CALL :COPYFILE "%%I"
    ) ELSE (
        CALL :RENAME "%%I"
    )
)

GOTO :EOF

:COPYFILE
COPY "%1" "j:\@PCBackup\PST"
GOTO :EOF

:RENAME
FOR /L %%N IN (1, 1, 1000) DO (
    IF NOT EXIST "j:\@PCBackup\PST\%~n1%%N%~x1" (
        COPY "%1" "j:\@PCBackup\PST\%~n1%%N%~x1"
        GOTO :EOF
    )
) 
```

请注意，在最后一个`FOR`循环中，每当发生文件名冲突时，我都会尝试查找要使用的下一个文件名。我已将最大计数器值设置为 1000，这应该足以防止所有类似的文件名问题。

# scheme - 比较列表中的项目？方案

> ID：13254259
> 
> 赞同：-3
> 
> 时间：2012-11-06T15:31:09.613
> 
> 标签：scheme, mit-scheme

如果您有一个列表（ (1 4 5) 5 (6 2 5) ）和另一个列表（5 1 3 7 5 (9 2 4) ），我需要编写一个程序来比较第一个列表中的项目并查看如果他们在第二个。例如，(1 4 5) 在 (5 1 3 7 5 (9 2 3) ) 中出现 0 次。5 在此列表中出现 2 次， (9 2 4) 出现 0 次。所以列表将返回 (0 2 0)

我需要帮助编写一个包含两个列表的方案过程频率，第一个是比较每个组件的那个，第二个是计算第一个列表出现次数的那个。该过程应返回事件列表。

到目前为止，我被告知要做两个程序，一个计算每个项目的出现次数（计数器），另一个在列表中跟踪它（频率）。到目前为止，我已经这样做了：

`(define (counter ele lst)`

```
 `(cond ((null? lst)  `                          
       '()) 
        `((equal? ele lst)`                
            `(+ 1 (counter ele (cdr lst))))`    
        `(else`
        `(counter ele (cdr lst)))))` 
```

`(define (frequency els lst)`

```
 `(if (null? els)` 
      `'()`
      `(cons <???>`
      `(frequency <???> lst))))` 
```

我不确定如何处理频率过程，以及如何从中调用计数器过程

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:04:13.813

对于这样的事情，你将不得不使用像对这样的东西？因为您使用的是列表列表的树。

例如 (list (list 1 2) 3 4) 的汽车将成为列表 1 2。这意味着如果您尝试比较值，您将得到一个错误。您需要从对中分离出叶子（单个数字）才能进行比较。

# javascript - 谷歌图表工具 - 重叠标签

> ID：13254262
> 
> 赞同：6
> 
> 时间：2012-11-06T15:31:22.510
> 
> 标签：javascript, google-api, google-visualization

我正在使用谷歌图表工具显示一个简单的折线图，原因不明，无论我如何设置“图例”参数，标签都会重叠。在下面的屏幕截图中，您可以看到`legend: {position: 'in', alignment:'center'}`. 如何解决这个问题？![标签重叠](../Images/381178254806b35a91096fdc50ef8fd2.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-12T04:14:40.193

> “..当人们通常抱怨标签重叠时，那是由于试图在一个不可见的容器中绘制。我们目前不支持这个，所以你需要确保你的容器不是 display:none 当你绘制图表时。” - 谢尔盖

链接：[https ://groups.google.com/forum/#!topic/google-visualization-api/c-KpZk--8p0](https://groups.google.com/forum/#!topic/google-visualization-api/c-KpZk--8p0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-01T20:52:08.577

我在一个非常复杂的页面底部附近加载了一个图表，这个问题就开始了。我决定在页面加载后执行图表的创建，以给父 div 时间呈现。 `$(document).ready(function(){ makeChart(data); })` 父 div 的 css 具有固定的高度和宽度。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-04T06:31:08.870

我在弹出窗口上渲染图表，标签重叠。我尝试执行渲染`$(document).ready()`以及`$(window).load()`- 没有任何结果。

在单击事件上，将出现弹出窗口。

```
$(document).ready(function()
{
    $('.view_graphs').click(function(){
        setTimeout(function(){
            renderGraph();
        },500)
    })
})

function renderGraph() {
    google.charts.setOnLoadCallback(column_chart);
    function column_chart() {
        var data = new google.visualization.arrayToDataTable(<?php echo $visitlang_json_data ?>); 
        var chart = new google.visualization.ColumnChart(document.getElementById('visit_lang_chart'));
        var options = {'title':'Report based on language',
                         'width':600,
                         'height':500
                     };
        chart.draw(data,options);
    }
} 
```

`setTimeout`在点击事件的函数上渲染它对我有用

# c - C 宏，返回错误的参数号

> ID：13254264
> 
> 赞同：4
> 
> 时间：2012-11-06T15:31:25.553
> 
> 标签：c, c-preprocessor

我有以下宏：

```
#define CONCATENATE(arg1, arg2)  arg1##arg2

#define FOR_EACH_1(what, x, ...) what(x)
#define FOR_EACH_2(what, x, ...) what(x) FOR_EACH_1(what, __VA_ARGS__)
#define FOR_EACH_3(what, x, ...) what(x) FOR_EACH_2(what, __VA_ARGS__)
#define FOR_EACH_4(what, x, ...) what(x) FOR_EACH_3(what, __VA_ARGS__)
#define FOR_EACH_5(what, x, ...) what(x) FOR_EACH_4(what, __VA_ARGS__)
#define FOR_EACH_6(what, x, ...) what(x) FOR_EACH_5(what, __VA_ARGS__)
#define FOR_EACH_7(what, x, ...) what(x) FOR_EACH_6(what, __VA_ARGS__)
#define FOR_EACH_8(what, x, ...) what(x) FOR_EACH_7(what, __VA_ARGS__)

#define FOR_EACH_NARG(...) FOR_EACH_NARG_(__VA_ARGS__, FOR_EACH_RSEQ_N())
#define FOR_EACH_NARG_(...) FOR_EACH_ARG_N(__VA_ARGS__)
#define FOR_EACH_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N
#define FOR_EACH_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0

#define FOR_EACH_(N, what, x, ...) CONCATENATE(FOR_EACH_, N)(what, x, __VA_ARGS__)
#define FOR_EACH(what, x, ...) FOR_EACH_(FOR_EACH_NARG(x, __VA_ARGS__), what, x, __VA_ARGS__) 
```

这些是我的测试用例：

```
// does not work as intended (with one argument)
#define SOME(x) int x;
FOR_EACH(SOME, y)

// fine with 2 and more
FOR_EACH(SOME, y1, y2);
FOR_EACH(SOME, y3, y4, y5, y6);

// works fine even for one argument
#define ONLY(x) x
int FOR_EACH(ONLY, x); 
```

请有人向我解释我在这个案子中做错了什么，只有一个论点，`#define SOME(x) int x`??

用 编译它`gcc -E macro.c -o macro.lol`，给出结果：

```
int y; int ;  /* <-- that's wrong, why??? */

int y1; int y2;;
int y3; int y4; int y5; int y6;;

int x ;       /* <-- works as supposed */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:43:18.220

问题是，当您将两个参数传递给`FOR_EACH`（只是`what`and `x`）时，`__VA_ARGS__`扩展为空，并且您在对 的调用中有一个尾随逗号`FOR_EACH_NARG`，因此它扩展为 2 并因此扩展`FOR_EACH_2`。

你想摆脱那个尾随的逗号。您可以通过使用 using 的[非标准扩展](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)而`##__VA_ARGS__`不是来做到这一点`__VA_ARGS__`，它仅在逗号`__VA_ARGS__`为空时删除它之前的逗号。对于更符合标准的版本，您可以将`x`and组合`__VA_ARGS__`成一个参数：

```
#define FOR_EACH_(N, what, ...) CONCATENATE(FOR_EACH_, N)(what, __VA_ARGS__)
#define FOR_EACH(what, ...) FOR_EACH_(FOR_EACH_NARG(__VA_ARGS__), what, __VA_ARGS__) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:39:15.610

你应该已经从你的编译器中看到了一些你没有告诉我们的警告。

我的猜测是你的宏在这里

```
#define FOR_EACH_1(what, x, ...) what(x) 
```

是错误的，因为它从来没有看到过`__VA_ARGS__`一部分。我看到了两种治疗方法

```
#define FOR_EACH_1(what, ...) what(__VA_ARGS__)

#define FOR_EACH_1(what, x) what(x) 
```

使用此类宏可能会伤害您的另一件事是参数编号的计数与您习惯使用 C 时不同。

```
#define MUCH(...)
#define NONE()

NONE   //<- this is considered receiving no argument
MUCH   //<- this receives one argument, the empty token list 
```

如果你这样做是为了学习预处理器，这很好:)如果你真的是这类问题的通用解决方案，你可以看看 Boost（但这主要是 C++）和[P99](http://p99.gforge.inria.fr/)

# python - SQL建表查询的拆分列定义

> ID：13254268
> 
> 赞同：0
> 
> 时间：2012-11-06T15:31:51.600
> 
> 标签：python, sql

我想将 sql 查询的所有列定义拆分为单独的字符串。

所以：

```
 `citizen_group` int(10) NOT NULL,
  `container_group` int(10) NOT NULL,
  PRIMARY KEY (`citizen_group`,`container_group`),
  KEY `fk_containergroup_readeraccess` (`container_group`) 
```

进入：

```
['`citizen_group` int(10) NOT NULL', '`container_group` int(10) NOT NULL','PRIMARY KEY (`citizen_group`,`container_group`)',' KEY `fk_containergroup_readeraccess` (`container_group`)'] 
```

首先我使用`split(',')`. 但是当 sql 具有多列主键时，这会产生问题。我不能指望每个定义都在一个新行上，所以我不能在换行上拆分。

如何拆分这些列定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:41:18.540

这个解决方案有点老套，我确信有更好的解决方案，但至少它可以完成工作。

编辑：更好的代码：

```
data = '''\
    `citizen_group` int(10) NOT NULL,
    `container_group` int(10) NOT NULL,
    PRIMARY KEY (`citizen_group`,`container_group`),
    KEY `fk_containergroup_readeraccess` (`container_group`)'''

data = data.replace('\n', '')
last = 0
result = []
paren = False
for i, j in enumerate(data):
    if j == '(':
        paren = True
    elif j == ')':
        paren = False
    if j == ',':
        if not paren:
            result.append(data[last:i])
            last = i + 1
result.append(data[last:])
result = map(str.strip, result)

print result 
```

结果是

```
['`citizen_group` int10 NOT NULL', '`container_group` int(10) NOT NULL',
 'PRIMARY KEY (`citizen_group`,`container_group`)',
 'KEY `fk_containergroup_readeraccess` (`container_group`)'] 
```

# magento - Magento - 如何为注册实施自定义问题字段？

> ID：13254273
> 
> 赞同：0
> 
> 时间：2012-11-06T15:32:10.900
> 
> 标签：magento, captcha

我在垃圾邮件注册方面遇到了一些麻烦，因为我试图避免验证码我想实施一个问题。

那么如何将自定义字段添加到必须输入特定文本的注册中？

例如我想问：香蕉是什么颜色的？

这个问题没有改变，它可能整天都是一样的，因为我不希望机器人适应。

# android - 用户浏览时是否可以启动另一个应用程序弹出窗口

> ID：13254274
> 
> 赞同：0
> 
> 时间：2012-11-06T15:32:14.303
> 
> 标签：android

如果员工使用他们的 Android 手机访问被视为“危险”的 URL，我的公司需要在浏览器中显示警告弹出窗口。不是我的想法，我也不是特别同意，但我的工作是研究解决方案。

我认为有两个主要问题我会很感激回答：1）有没有办法监控访问的 URL（1-2 秒的轮询可能是可以接受的）？2）后台应用程序可以在浏览器中启动弹出窗口或注入DOM吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:52:38.653

如果您创建一个自定义浏览器，一个带有 WebView 的 Activity，您将加载 URL 并基于此执行一些操作。

```
mWebView.setWebViewClient(new WebViewClient() {         
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        if (isDangerous(url)) {
            //show some dialog
        }               
        mWebView.loadUrl(url);

        return true;
    }
}); 
```

# c# - 通过 webrequest 和 webresponse c# 获取文件

> ID：13254275
> 
> 赞同：0
> 
> 时间：2012-11-06T15:32:21.137
> 
> 标签：c#, webrequest, webresponse, file-listing

我正在寻找一种方法来“扫描”我的网站位置（使用流和 webrequest/webresponse）来确定该特定文件夹中的文件。我想列出这些文件。

这可能吗？我在网上尝试了几个例子，但没有一个给我我正在寻找的文件列表。

Webdav 和其他本地选项不是解决方案，因为我的 weblocation 无法绑定。

如果有其他解决方案（例如使用 webclient 或其他任何东西，请告诉我。我也会很高兴听到这个消息！），我不仅限于 webrequest 和 webresponse。

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(sharepointsiteUrl);
   request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:39:30.003

你问的基本上不是 HTTP 1.1 标准定义的。

已经定义了一些允许这种行为的 HTTP 扩展——一些是专有的（如 MS 的 Frontpage）和一些标准化的（如 WebDAV）。

其他可能的选项是：如果您的 Web 服务器配置为通过 HTML 返回目录列表（也称为目录浏览，不推荐，因为它会带来潜在的安全问题）或者正在运行一些 FTP 守护程序或...

我强烈推荐 WebDAV，因为它是标准化的并且基于 HTTP。

顺便说一句：您刚刚添加到问题中的 URL 提到 SharePoint-IIRC [Sharepoint 具有基于 HTTP 的 API](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.aspx)（例如，请参见[此处](http://msdn.microsoft.com/en-us/library/ms470176.aspx)），并且还可以配置为提供[WebDAV 访问](http://msdn.microsoft.com/en-us/library/138422cf-c140-466a-bcd8-cacba51ef886#bb2_WebDAV)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:34:59.427

如果 Web 服务器未配置为用于目录浏览，则不能强制 Web 服务器为您提供文件列表。

# android-ndk - 调试 HelloJni 的原生代码

> ID：13254276
> 
> 赞同：5
> 
> 时间：2012-11-06T15:32:24.537
> 
> 标签：android-ndk

几天来，我一直在尝试调试示例 hello-jni 的 c 代码，但没有成功。我已经安装了所有要求并遵循了许多博客文章（每次都重复该过程）以尝试使其正常工作。

我在用

*   视窗 7 64 位
*   带有 CDT 8.0.2 的 Eclipse Juno
*   安卓 NDK r8b
*   安卓 SDK 20.0.3
*   安装了 make、gcc-core 和 gcc-g++ 的最新 cygwin（尽管我**认为**NDK r8b 不需要这个？）

我已按照此 [http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html) 设置和构建 apk。它可以很好地构建和安装，如果作为 Android 应用程序启动，我可以调试 java 代码

我关注了这篇关于 NDK 插件 [http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)的文章， 但是当作为 Android 原生应用程序启动时，在 c 代码中带有断点时，应用程序启动并正常运行，没有断点被命中和没有错误信息！

任何帮助将不胜感激。谢谢！

编辑：

下面是一些在控制台中出现半秒后被清除的错误

警告：解析目标库列表时（第 2 行）：没有为 /system/bin/linker 定义段

警告：无法加载 52 个库的共享库符号，例如 /system/bin/linker。

使用“info sharedlibrary”命令查看完整列表。

你需要“set solib-search-path”还是“set sysroot”？

警告：无法找到动态链接器断点函数。

GDB 将无法调试共享库初始化程序和跟踪显式加载的动态代码。

退出（程序恢复时期待信号 SIGINT）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:28:12.877

事实证明，我使用的上述指南就是我所需要的，并且一切正常。

警告消息只是......警告，因此本机代码的调试一直有效。我的问题是我的断点被立即调用的本机函数调用 - 在 gdb 可以附加之前。我将 JNI 函数调用放入 onClick 中，发现我的断点毕竟被击中了。

我希望上面的链接和这个答案可以帮助别人。谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:34:20.023

根据 NDK 文档。“目前，'ndk-gdb' 需要 Unix shell 才能运行。这意味着需要 Cygwin 在 Windows 上运行它。我们希望在未来的 NDK 版本中摆脱这个限制。”

JeffG 你能在没有 cygwin 的情况下在 Windows 上调试本机代码吗？

# arrays - VB.NET 集合的窗口

> ID：13254280
> 
> 赞同：0
> 
> 时间：2012-11-06T15:32:40.887
> 
> 标签：arrays, vb.net, object, collections, udp-data-transfer

我想访问一组窗口（只是当前在用户会话中打开的窗口）。我将使用 EnumerateWindows，但我不知道如何使它们像 .NET 那样可用，例如用于进程。

我希望能够以

```
For Each window in Windows
    Debug.Print window.Text
    Debug.Print window.Handle
Next 
```

我想我需要一堂课来做到这一点，但我不知道这在实践中是谁做的。

非常感谢。

# selenium - 硒夜间回归

> ID：13254282
> 
> 赞同：0
> 
> 时间：2012-11-06T15:32:45.950
> 
> 标签：selenium, regression

我目前正在为使用 Selenium 的接口开发一组新的回归测试。我想知道是否有可能做一种在夜间运行的批处理，它可以启动一组测试（而且，我不知道......也许同时配置一些东西）。有谁知道如何做到这一点，或者是否有与 Selenium 集成的工具？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:02:46.607

您可以使用 Jenkins/Hudson，这是一个持续集成工具。它也有 Selenium 的插件。更多信息[在这里](http://jenkins-ci.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:28:04.280

Jenkins、Hudson、CruiseControl 或 TeamCity 都可以通过 Selenium 轻松设置。

# php - 计算所有列的聚合增量 IC

> ID：13254288
> 
> 赞同：2
> 
> 时间：2012-11-06T15:32:59.290
> 
> 标签：php, matrix

1）给定一个密文矩阵，我想计算每一列的重合指数。我想通过堆叠将密文与自身进行比较，就像在wiki的这个例子中所做的那样：[http ://en.wikipedia.org/wiki/Index_of_coincidence#Example](http://en.wikipedia.org/wiki/Index_of_coincidence#Example)

我已经有了用于通用 delta IC 的 PHP，我在想我可能需要做的就是改变一些事情来让它工作，有人可以帮我解决这个问题吗？

2）我已经有单独的 PHP 脚本，用于将文本操作成不同的块，但没有像矩阵一样堆叠它们。我如何获得脚本（在上面的第 1 部分）来测试所有可能的矩阵（假设矩阵很小）。

这是我到目前为止所得到的：

```
<?php
  $showTable = false;
  if (isset($_POST['submitx'])) {
    $showTable = true;
    $ciphertext = strtoupper($_POST['ciphertext']);
    // compress out spaces
    $i = 0;
    $cols = 10; 
    $cells = 1; 
    $compressed = '';
    while ( $ciphertext[ $i ])
    {
        if (( $ciphertext[ $i ] >= 'A' ) && ( $ciphertext[ $i ] <= 'Z' ) ) {
            $compressed .= $ciphertext[ $i ];
        }
        $i++;
    }
    $inLen = strlen( $compressed );

    // text is now collected without spaces in $compressed
    $history=array_fill(0,99,0);
    for ($shift = 1; $shift < 100; $shift++ ) {

        // test coincidence at this shift
        $coinc = 0;
        for ( $i = 0; $compressed[ $i + $shift ]; $i++ ) {
            if ( $compressed[ $i ] == $compressed[ $i + $shift ] ) $coinc++;
        }
        $coef = 100.0 * $coinc / ( 3.85 * ($inLen - $shift));
        $history[ $shift ] = $coef;
    }
      for ( $keyLen = 1; $keyLen < 50; $keyLen++ ) {
        $freqSum = 0.0;
        $index = $keyLen;
        $count = 0;
        while ( $index < 100 ) {
            // step through the history array by stepsize = keyLen
            $freqSum += $history[ $index ];
            $count++;
            $index += $keyLen;
        }
        $freqSum = $freqSum / $count; // average of all the values
        $history[ $index ] = $freqSum; // put it back for later
    }
    }
?> 
```

# xcode - 如何在 Xcode 中设置特定的预编译头文件？

> ID：13254294
> 
> 赞同：4
> 
> 时间：2012-11-06T15:33:19.357
> 
> 标签：xcode, xcode4

有没有办法在 Xcode 中设置一个非默认的预编译头文件？例如，我可以将其设置为 SomeOtherHeader.h，而不是 Project_Prefix.pch 作为预编译头文件吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T15:48:43.920

选择目标，选择 Build Settings，搜索 Prefix Header 并更改设置

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-04T17:23:43.900

在 XCode 6.1 中，它位于 Build Settings > Apple LLVM 6.0 - Language

# php - ajax 拆分面板示例

> ID：13254296
> 
> 赞同：0
> 
> 时间：2012-11-06T15:33:43.887
> 
> 标签：php, jquery, ajax

任何人都可以为 ajax/php 拆分面板推荐一个好的教程或框架。这个想法是创建 2 个面板，并且在面板 1 中有一个菜单，单击该菜单会在面板 2 中打开内容。我花了很长时间试图在谷歌上找到示例，但没有运气。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:18:36.957

示例：您有两个`<div>`id 为 div1 和 div2。

div1 包含一个带有`<li>`-objects 的菜单。第一个有 id menu1

```
$("#menu1").click(function() {
    $.get('your/path_to_php.php', function(data) {
        $("#div2").html(data);
    });
}); 
```

这是，ofc，如果 path_to_php.php 文件返回 html 结构化数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:38:06.893

如果您使用 javascript，则非常简单。

1.  使用标准 html 创建 2 个面板
2.  将菜单添加到面板 1。
3.  在菜单项上设置 onclick 事件并使用 javascript 在面板 2 中使用 ajax 加载内容。例如（jquery、$('#divid').html(newcontent) 等）。

    ```
    $('#panel1').click(function(){
    $('#panel2').text('new content!');
    });​ 
    ```

    [http://jsfiddle.net/harendra/JQY9S/](http://jsfiddle.net/harendra/JQY9S/)

# android - 使应用程序仅适用于三星

> ID：13254304
> 
> 赞同：0
> 
> 时间：2012-11-06T15:34:05.117
> 
> 标签：android, google-play

我有一个应用程序，并希望它仅适用于三星设备。通过设备可用性对话框，我必须排除每个设备。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:40:47.760

用于`String str = android.os.Build.MANUFACTURER;`获取设备名称或`android.os.Build.MODEL`. `false`验证结果并在关闭您的活动后显示任何对话框。

其他方式，配置市场发布者以阻止其他设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:52:08.147

[看看这个页面](http://developer.android.com/reference/android/os/Build.html)它几乎包含您需要了解的有关用户设备的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:34:50.387

```
String mf = android.os.Build.MANUFACTURER;

if (mf.equals("samsung")) {
    //device is samsung
} else {
    //device not samsung
} 
```

# iphone - 将我的 iOS 设备限制为特定应用

> ID：13254309
> 
> 赞同：4
> 
> 时间：2012-11-06T15:34:29.267
> 
> 标签：iphone, ios, ipad, security

我正在寻找一种将我的 iOS 设备限制为特定应用程序的方法。

我找到了一种通过[**iOS 的 Kiosk 模式禁用我的 iPad 主页按钮功能的好方法**](http://joris.kluivers.nl/blog/2012/03/02/kiosk-mode-for-ios/)

那么是否可以在不越狱的情况下将我的 iOS 设备限制为特定的应用程序？

如果我这样做了，App-Store 会拒绝我的申请吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:49:34.150

呼……终于找到了。[**Guided Access**](http://support.apple.com/kb/HT5509) 是 iOS 6 中的一项新功能，它将执行该功能。它是一个内置功能。

为特定应用程序激活引导访问，iOS 设备每次都会自动启动该应用程序。

您可以通过按住“电源+主页”按钮关闭设备。

如果您想了解如何在 iOS 6 中使用引导式访问，您可以[在此处查看更多详细信息](http://support.apple.com/kb/HT5509)

![在此处输入图像描述](../Images/8631f9c4b6ea2218af5ae81c66959682.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:36:59.553

就 App Store 而言，这是一个巨大的安全违规行为。对于企业应用程序，您可能会找到一种方法。但对于公开的 App Store 下载来说，这不仅几乎是不可能的，而且肯定会被拒绝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:39:30.847

> 那么是否有可能在 iPad 每次启动后自动启动我的应用程序而无需越狱？

不会。越狱只会让你弄乱系统的默认行为，例如启动项

> 如果我实施该行为，Apple-Store 会拒绝我的申请吗？

如果您以某种方式找到规避问题的方法（即利用安全漏洞），那么您的应用程序**将**被拒绝。 [应用审核指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)，第 2.4、2.5 节

# c# - C#如何foreach循环一个XML文档并修改一个值

> ID：13254311
> 
> 赞同：0
> 
> 时间：2012-11-06T15:34:31.770
> 
> 标签：c#, xml

我有一个想要修改连接字符串的 XML 文档。如何执行 foreach 循环并在此示例中修改 LocalSqlServer 的值？

```
<connectionStrings>
    <clear />
    <add name="Localip" connectionString="Data Source=db01;Initial Catalog=TestA;Integrated Security=True;"
     providerName="System.Data.SqlClient" />
    <add name="LocalSqlServer" connectionString="Data Source=db02;Failover Partner=db01;Initial Catalog=TestB;Integrated Security=True;"
     providerName="System.Data.SqlClient" />
    <add name="ServerAp" connectionString="Data Source=LAPTOP;Initial Catalog=testc;Integrated Security=True;" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

这是我尝试过的，但我真的只想修改值而不是整个内容。对于这个例子，我想改变：

```
<add name="LocalSqlServer" connectionString="Data Source=db02;Failover Partner=db01;Initial Catalog=TestB;Integrated Security=True;"
     providerName="System.Data.SqlClient" />

<add name="LocalSqlServer" connectionString="Data Source=db07;Failover Partner=db07;Initial Catalog=TestB;Integrated Security=True;"
     providerName="System.Data.SqlClient" /> 
```

这是我尝试过的：

```
System.Xml.XmlDocument xmlDocument = new System.Xml.XmlDocument();
        xmlDocument.Load(@"C:\xml.xml");
        XmlNodeList elemList = xmlDocument.GetElementsByTagName("connectionStrings");
        for (int i = 0; i < elemList.Count; i++)
        {
            foreach (XmlNode chldNode in elemList[i].ChildNodes)
            {
                Console.WriteLine(chldNode.Name.ToString());
                if (chldNode.Name.ToString() == "add")
                {
                    foreach (XmlAttribute xmlAtt in chldNode.Attributes)
                    {
                        if (xmlAtt.Value == "LocalSqlServer")
                        {
                            xmlAtt.InnerXml = "MyNewValue";
                            xmlDocument.Save(@"C:\xml2.xml");
                            break;
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:40:43.577

```
var xDoc = XDocument.Load(@"C:\xml.xml")
var node = xDoc.XPathSelectElement("//add[@name='LocalSqlServer']");
node.Attribute("connectionString").Value = "some value"; 
```

或史蒂夫B建议

```
var node = xDoc.XPathSelectElement("//connectionStrings/add[@name='LocalSqlServer']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:38:25.800

使用`System.Xml.Linq`：

```
var xml = XDocument.Load(fileName);
var localSqlServer = xml.Descendants("connectionStrings").Elements("add").FirstOrDefault(o => o.Attribute("name").Value == "LocalSqlServer");
if (localSqlServer != null)
    localSqlServer.SetAttributeValue("connectionString", "Your New Connection String");
xml.Save(fileName); 
```

# ruby - Marshal 类，有没有办法找出数据是否已经序列化？

> ID：13254312
> 
> 赞同：2
> 
> 时间：2012-11-06T15:34:33.320
> 
> 标签：ruby, serialization

我正在使用`Marshal`类来序列化 Ruby 对象，使用函数：`dump()`并且`load()`一切正常，但是当传递与任何序列化数据无关的值时，`load()`函数返回预期的逻辑错误：

```
incompatible marshal file format (can't be read)
format version 4.8 required; 45.45 given 
```

我需要的是在加载之前检查这些数据是否已经序列化。我的目标是避免这个错误并做其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T08:57:49.867

行。我遇到了非常相似的问题，根据这篇文章[http://lists.danga.com/pipermail/memcached/2007-December/006062.html](http://lists.danga.com/pipermail/memcached/2007-December/006062.html)的提示，我发现当你尝试加载之前未编组的数据*或*数据存储不当（例如，不在数据库的二进制字段中）。

在我的情况下，我在数据库中使用*文本*类型而不是*二进制*字段，并且编组数据被破坏了。

将列类型从文本更改为二进制有帮助。不幸的是，您无法转换旧的（损坏的）数据，因此您必须删除该列并再次将其创建为二进制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T16:07:05.110

也许只是从错误中拯救？

```
begin
  Marshal.load("foobar")
rescue TypeError
  # not a marshalled object, do something else
  puts "warning: could not load ..."
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T00:02:25.677

我已经应用了 Padde 方式，但是使用了一个可以为我完成这项工作并让我取回对象的函数，无论是预先存在的还是新创建的，如下所示：

```
def get_serialized_banner
  begin
    @banner_obj = Marshal.load(self.path)
  rescue TypeError
    self.path = Marshal.dump(Banner.new())
    self.save
    @banner_obj = Marshal.load(self.path)
  end
  return @banner_obj 
end 
```

# php - 标记内的 Smarty 条件

> ID：13254316
> 
> 赞同：2
> 
> 时间：2012-11-06T15:34:49.010
> 
> 标签：php, html, smarty

我想在一个条件适用的情况下创建一个属性。假设我在这样的 var 中有一个条件：

我正在尝试做：

```
<a {if $mycondition} attribute = "test" {{/if}} href="...">link</a> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:38:38.007

只需尝试在`if`条件结束时删除双括号。另外，不要在属性和它的值之间留空格。这应该适合你：

```
<a {if $mycondition}attribute="test"{/if} href="...">link</a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T15:38:46.127

看一下 smarty 的分配功能。[这](http://www.smarty.net/docs/en/language.function.assign.tpl)是文档的链接。你可以做类似的事情

```
 <{if $mycondition}><{assign var="attribute" value="test"}<{/if}> 
```

然后，您可以`<{$attribute}>`在代码中使用属性。那会奏效吗？

# c# - 如何防止我的第一个按钮在创建新按钮时消失？

> ID：13254318
> 
> 赞同：2
> 
> 时间：2012-11-06T15:34:56.703
> 
> 标签：c#, picturebox

我正在尝试在运行时绘制图片框，就像我可以直接从工具箱中所做的那样。也就是说，在鼠标位置设置位置，在我按住按钮并将其拖过表单时调整它的大小。我在代码中完成的所有工作。但是当我开始绘制第二个图片框时，第一个图片框消失了，我想继续向表单添加更多图片框，如果我删除`MouseMove`事件并向下移动`PictureBox pb1 = new PictureBox();`到`MouseDown`事件，它可以让我添加更多按钮，但是我无法调整大小他们显然。

```
 int cellSize = 10;
    int numOfCells = 500;

    PictureBox pb1 = new PictureBox();
    int Mx, My;

    public Form1()
    {
        InitializeComponent();
        this.DoubleBuffered = true;
    }

    public void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        Point p = new Point(e.X, e.Y);
        Mx = p.X;
        My = p.Y;
        int xSnap = (Mx / cellSize) * cellSize;
        int ySnap = (My / cellSize) * cellSize;

        pb1.BackColor = (Color.Red);

        if (e.Button == MouseButtons.Left)
        {
            pb1.Size = new Size(xSnap - pb1.Left, ySnap - pb1.Top);
        }
    }

    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
    {
        Point p = new Point(e.X, e.Y);
        Mx = p.X;
        My = p.Y;
        int xSnap = (Mx / cellSize) * cellSize;
        int ySnap = (My / cellSize) * cellSize;

        pb1.Location = new Point(xSnap, ySnap);
        pictureBox1.Controls.Add(pb1);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:37:58.023

你总是重复使用同一个`PictureBox`实例。

每次要添加新实例时，您都需要创建一个新实例，方法是编写`new PictureBox()`.

# php - PHP通过变量计算数学函数

> ID：13254321
> 
> 赞同：-2
> 
> 时间：2012-11-06T15:35:04.697
> 
> 标签：php, math

> **可能重复：**
> [PHP：计算字符串中的数学函数 f(x)](https://stackoverflow.com/questions/4216858/php-calculate-a-math-function-fx-in-a-string)

请任何人帮我解决一个数学函数，例如我想解决 3x+2y+4z 变量的值应该在 php 中声明，比如 $x=4, $y=2, $z=1 我知道有[PHP: Calculate a math function f(x) in a string](https://stackoverflow.com/questions/4216858/php-calculate-a-math-function-fx-in-a-string)，但有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:37:31.207

您可以创建一个简单的方程式：

```
$val = (3*$x)+(2*$y)+(4*$z) 
```

# iphone - 当用户按下主页按钮时，如何让我的 Radio Streaming 应用程序继续播放？

> ID：13254342
> 
> 赞同：0
> 
> 时间：2012-11-06T15:36:07.710
> 
> 标签：iphone, ios, xcode

我刚刚完成了我的广播电台 IOS 应用程序，但我这里有 1 个问题.. 当您收听流媒体并按下主页按钮时，应用程序停止工作....我做了一些研究，发现一些应用程序在按下主页按钮。

它是 Xcode 中的一个选项我可以启用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:07:59.100

我解决了这个问题，我只是在 Plist 中设置了一个条目

```
Required background modes : App plays audio 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:52:23.777

您需要正确设置音频会话类别：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

还要检查这个问题：[iPhone OS 4 Multitasking - Playing Audio In background](https://stackoverflow.com/questions/3007527/iphone-os-4-multitasking-playing-audio-in-background?lq=1)

# php - HTML5 输入时间从 24 小时到 12 小时

> ID：13254343
> 
> 赞同：1
> 
> 时间：2012-11-06T15:36:11.130
> 
> 标签：php, mysql, html, time

我有一个 HTML5，它使用一个`<input>`标签，`type"time"`使用 PHP 提交到 MySQL。问题是，`"time"`它使用的是 24 小时格式`00:00:00`，这对最终用户来说没有意义。

我希望能够让用户以 12 小时格式输入它，并让它显示在一个单独的页面上，结果以 12 小时格式从 MySQL 发布。

最简单的方法是什么？这是一个跟踪客户何时走进和离开实验室的网站。因此，能够减去这些结果至关重要。我现在所拥有的（24 小时格式）对于我们的目的来说工作得很好（并减去以显示总花费的时间），但 24 小时格式是一个问题，如果解决它可能对我们非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:00:20.883

我能看到这样做的唯一方法是将输入的最小值和最大值分别设置为`01:00:00`和`12:59:59`，并在其旁边添加一个用于选择 AM 或 PM 的下拉菜单。

当然，通过这样做，您将在用户提交表单时将所有时间转换回 24 小时，因此您可以将它们存储在数据库中。

# web - APE ajax push engine tcp socket (jabber web client)

> ID：13254344
> 
> 赞同：2
> 
> 时间：2012-11-06T15:36:11.453
> 
> 标签：web, xmpp, chat, ape

我正在尝试使用 APE 进行基于 Web 的聊天以创建 TCP 套接字。一切正常，但是当我尝试发送许多消息时，套接字中断并且我得到原始的 BAD_CHL。

```
var aux='<message from="'+user+'" to="'+rec+'"  xml:lang="en" type="chat">'           aux+=mensaje;
aux+='</message>';               
chat.get_socket().send(aux); 
```

这是我发送消息的代码示例。有人对 APE 及其 tcpsockets 有同样的问题吗？

# javascript - 带有 jQ uery UI 的可排序菜单项（进入子菜单）

> ID：13254345
> 
> 赞同：0
> 
> 时间：2012-11-06T15:36:13.340
> 
> 标签：javascript, jquery, jquery-ui, menu, jquery-ui-sortable

我有一个带有选项的水平 jQuery 菜单项`sortable`。它有一个子菜单。我想要：

1.  将菜单项与子菜单锁定在列表末尾
2.  能够将菜单项从主菜单拖动到子菜单并自动更改样式
3.  能够保存页面再次打开时的布局

目前我可以移动所有菜单项，但我不能将它们从一个级别移动到另一个级别。我尝试使用该`connect`选项，但它不起作用。

对不起，如果我遗漏了一些明显的东西；我对 jQuery UI（不是 jQuery）非常陌生。

演示：http: [//jsfiddle.net/3sUvm/12/](http://jsfiddle.net/3sUvm/12/)

编辑：更新了不正确的演示链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:18:11.157

好的，你的问题是因为收容，但我认为你正在寻找这样的东西......

[http://jqueryui.com/sortable/#connect-lists-through-tabs](http://jqueryui.com/sortable/#connect-lists-through-tabs)

`$( "#sortable1, #sortable2" ).sortable().disableSelection();`

在最后添加一个类`li`where`more`是：

```
$('.dop-here').droppable({
            accept: ".googlebar li",
            hoverClass: "ui-state-hover",
            drop: function( event, ui ) {
                // do something here...
            }
        }); 
```

我希望这有帮助，

因此，您希望使其可`drop`放置，并且一旦放置了一个项目并且如果它是一个项目，该功能将被触发......

# asp.net - IE9 在 Quirks 5.5 模式下渲染 Twitter Bootstrap

> ID：13254346
> 
> 赞同：0
> 
> 时间：2012-11-06T15:36:19.820
> 
> 标签：asp.net, html, twitter-bootstrap

我的 html5.Master 文件中有以下代码，用于使用 Twitter Bootstrap 的 C# ASP.NET 页面。IE 9 仍以 Quirks 5.5 模式呈现某些页面。还有什么其他方法可以让它们正确渲染和打印吗？

```
<!DOCTYPE html>
<html lang="en">
<head runat="server">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="author" content="">
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="bootstrap.css" rel="stylesheet">

      <!-- CSS concatenated and minified via ant build script-->
      <link href="<%=Page.ResolveUrl("~/css/bootstrap.css?v=2")%>" rel="stylesheet">
      <link href="<%=Page.ResolveUrl("~/css/docs.css?v=2")%>" rel="stylesheet">
      <link href="<%=Page.ResolveUrl("~/css/prettify.css?v=2")%>" rel="stylesheet">
      <link rel="stylesheet" media="print" href="<%=Page.ResolveUrl("~/css/print.css?v=2")%>" />

      <script src="js/libs/modernizr-2.0.6.min.js"></script>
      <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
      <script>      window.jQuery || document.write("<script src='/scripts/libs/jquery-1.7.1.min.js'>\x3C/script>")</script>

    <!--[if IE 6]>    
        <link href="ie6.css" rel="stylesheet">
    <![endif]-->

</head> 
```

# python - 对文件内容进行排序

> ID：13254351
> 
> 赞同：1
> 
> 时间：2012-11-06T15:36:31.750
> 
> 标签：python, file, sorting, unix

在 unix 中（具体来说，我正在使用`bash`），我可以轻松地对文件的内容进行排序；鉴于我有一个文件：

```
chris@chris:~$ cat testSort.txt 
3       1       test01
8       2       test02
6       3       test03
7       4       test04
1       5       test05 
```

运行`sort`将返回基于第一列的排序值

```
chris@chris:~$ sort testSort.txt
1       5       test05
3       1       test01
6       3       test03
7       4       test04
8       2       test02 
```

我可以根据需要将其结果通过管道传输到文件或程序中；在python中有没有像这样简单的方法，还是我需要读取我的文件，将其保存为某种数据结构，然后再次保存？

**困惑**

我不知道为什么我收到了反对票——我问是否有像在 unix 中一样简单的方法（即一个 1 字命令）来实现排序。我什至提供了一个例子来说明我想要什么？这在什么方面意味着“这个问题没有研究工作，不清楚或没有用”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:39:29.370

你想做到这一点有多容易？这按字典顺序排序，但您可以通过将附加`key`函数传递给`sorted`.

```
with open('input') as f:
    sorted_file = sorted(f)

#save to a file
with open('output') as f:
    f.writelines(sorted_file)

#write to stdout
import sys
sys.stdout.writelines(sorted_file) 
```

# r - 包名称 = 主函数名称时的文档

> ID：13254353
> 
> 赞同：2
> 
> 时间：2012-11-06T15:36:50.857
> 
> 标签：r

我正在写一个 R 包名称`slidify`。包中的主要功能也被命名为`slidify`. 当我运行时`devtools::check`，我收到一条警告，指出 Rd 文件中存在冲突。

我不想重命名该函数，因为它简洁地传达了包的用途。在这种情况下，最佳做法是什么？打字应该`? slidify`导致功能文档还是包文档？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:49:06.150

我会制作一个“slidify-package.Rd”文件，（或一个只有 roxygen 注释块的“slidify-package.R”文件）

`?slidify`应该指向函数文档，并且`slidify?package`应该指向包文档，并且两个帮助页面都应该有一个指向另一个的链接（例如，在 seealso 部分中）

# c# - 如何将字符串（类json）转换为对象

> ID：13254355
> 
> 赞同：1
> 
> 时间：2012-11-06T15:36:52.177
> 
> 标签：c#, asp.net-web-api

在我的控制器中，我得到一个 JSON 字符串：

```
String json_string = this.Request.Content.ReadAsStringAsync().Result; 
```

看起来像这样：

```
{
    "21": {"Id":21,"DisplayOrder":3, ... snip ... },
    "333":{"Id":333,"DisplayOrder":2, ... snip ... },
    "591":{"Id":591,"DisplayOrder":1, ... snip ... }
} 
```

我对此 JSON 的结构没有发言权，因此无法将其格式化为没有键的东西。它们的键不是必需的，因为 ID 在该字典的值内。

无论如何，`json_string`当我迭代该结构中的“行”时，我如何以一种允许我提取出我想要的仅有的两个项目的方式进行转换...... Id，DisplayOrder？

像这样：

```
int Id = row_item.Id;
int DisplayOrder = row_item.DisplayOrder; 
```

谢谢！埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:06:55.110

```
string json = @"{
    ""21"": {""Id"":21,""DisplayOrder"":3},
    ""333"":{""Id"":333,""DisplayOrder"":2},
    ""591"":{""Id"":591,""DisplayOrder"":1}}";

var list = new JavaScriptSerializer()
               .Deserialize<Dictionary<string, Dictionary<string, object>>>(json)
               .Values
               .ToList();

Console.WriteLine(list[0]["Id"]); // <--21 
```

[你也可以用Json.Net](http://json.codeplex.com/)做同样的事情

```
var jObj = JsonConvert
           .DeserializeObject<Dictionary<string, Dictionary<string, object>>>(json)
           .Values
           .ToList();

Console.WriteLine(jObj[0]["Id"]); 
```

`dynamic`也可以使用

```
var jObj = JsonConvert.DeserializeObject<Dictionary<string, dynamic>>(json)
            .Values
            .ToList();

Console.WriteLine(jObj[0].DisplayOrder); 
```

# ssrs-2008 - 如何从总值 SSRS 中排除隐藏的行值

> ID：13254358
> 
> 赞同：1
> 
> 时间：2012-11-06T15:37:19.133
> 
> 标签：ssrs-2008, reporting-services

我有一个 SSRS 项目，我想从总数中排除我隐藏的行。

我已经根据行可见性的表达式隐藏了该行，如果：

```
=IIF(IIF(ReportItems!CUST_CNT2.Value = 0, 0, ReportItems!Total_Contribution5.Value / IIF(ReportItems!CUST_CNT2.Value = 0, 1, ReportItems!CUST_CNT2.Value)) > 0, True, False) 
```

所以基本上报告的列总计只是总计所有行，包括我隐藏的上述行，我需要总计来排除这一行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:24:09.290

最简单的方法是提前过滤掉这些数据：通过定义 tablix 过滤器、数据集过滤器或更改查询。那么你就不需要再做任何事情了。您是否真的因为其他原因需要数据中的行？

但是你也可以在聚合中使用你的表达式，稍微扭曲一下。将总数设置为：

```
=SUM( IIF( IIF(ReportItems!CUST_CNT2.Value = 0, 
               0,
               ReportItems!Total_Contribution5.Value /
                 IIF(ReportItems!CUST_CNT2.Value = 0,
                     1,
                     ReportItems!CUST_CNT2.Value)
              ) > 0,
           0,
           ReportItems!Total_Contribution5.Value) ) 
```

对表达式的更改是现在隐藏行返回 0，而可见行返回要总计的字段。（我猜测了您想要总计的内容。根据需要更改字段。）这一切都包含在聚合中`SUM(...)`

# javascript - JavaScript 对象：正则表达式对象如何被传递？

> ID：13254359
> 
> 赞同：1
> 
> 时间：2012-11-06T15:37:19.750
> 
> 标签：javascript, regex, oop, object

为了更好地理解 JavaScript/OOP，我很好奇 JavaScript 中如何处理正则表达式参数参数。我已经对正则表达式了解很多，所以这与解释模式无关。这是关于确定 JavaScript 如何处理它。

例子：

```
newStr = str.replace(/(^\W*|\W*$)/gi,''); 
```

这基本上会从字符串中修剪任何特殊字符和空格。但是，`/(^\W*|\W*$)/gi`它*不是*一个封装的字符串，因此，理解这个概念让我感到困惑，因为 JS 对象不是字符串，也不是数字。这个对象类型是单独的（即，仅正则表达式），还是用于其他目的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T15:41:23.373

它只是JavaScript 用于正则表达式的一种特殊*语法。*它评估为一个对象，与以下内容没有什么不同：

```
var rex = /(^\W*|\W*$)/gi;
decision = str.replace(rex, ''); 
```

或者：

```
var rex = new RegExp('^\\W*|\\W*$', 'gi'); 
```

[RegExp MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)有大量详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:42:00.700

正则表达式是 JavaScript 中的一等公民，即它们是一个单独的对象类型。

`RegExp`您可以使用其标准构造函数构造一个新对象：

```
var regex = new RegExp("(^\\W*|\\W*$)", "gi"); 
```

或使用允许您减少反斜杠的特殊“正则表达式文字”表示法：

```
var regex = /(^\W*|\W*$)/gi; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T15:43:21.947

`/(^\W*|\W*$)/gi`是一个[正则表达式字面量](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，它是 JavaScript 中的一种对象类型。这种类型可以作为第一个参数传递给该[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法，该方法接受正则表达式或子字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T15:44:48.790

> 仅此对象类型（即，仅正则表达式）

这是对的。[`RegExp`object](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)是语言内置的一种特殊类型的值。它们是 JavaScript 中少数具有“文字”表示的类型之一。

这确实使它们相当独特。该语言中没有任何其他特殊用途的文字。其他文字是通用类型，例如：

*   `null`
*   布尔值 ( `true`/ `false`)
*   数字 ( `1.0`, `2e3`, `-5`)
*   字符串 ( `'hello'`, `"goodbye"`)
*   `Array`s ( `[1, 2, 3]`)
*   `Object`s ( `{ name: "Bob", age: 18 }`)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T15:45:06.237

添加到人们说的大致相同的事情：

除了它是具有自己语法的文字之外，您实际上可以以文字形式访问其方法：

```
/bob/gi.exec(" My name is Bob "); 
```

...只要您使用的浏览器足够年轻以确实支持 RegEx 文字（现在很难找到不支持的浏览器，如果您这样做，浏览器是否支持 CSS？）。

# git - 您如何合并已恢复的提交？

> ID：13254367
> 
> 赞同：4
> 
> 时间：2012-11-06T15:37:34.583
> 
> 标签：git, git-merge, git-revert

我最近遇到了一种情况，我将功能分支中的更改合并到我的主分支和生产分支中。然后我需要从我的生产分支中删除更改，所以我使用了**git revert**。我现在需要将这些更改合并回生产分支，但是如果我执行*git merge sha1*我会收到以下消息：

`Already up-to-date`

谁能帮我这个？

**更新** 所以我最终从我的生产分支创建了一个分支，应用了我在该分支中恢复的文件的差异，然后将该更改合并到生产中。我不喜欢它，但它奏效了。如果有办法使用相同的 sha1，我仍然很想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:59:36.223

> 我现在需要将这些更改合并回生产分支

`git revert`，如果在`production`分支上完成，将创建一个新的提交，取消您要删除的提交。

由于该新提交已在该分支 (' `production`') 上，因此您无法合并它。

如果您的意思是“合并回*`feature`*分支”，那么您在分支上应用新提交的合并，`feature`同时从分支中删除更改`feature`。

# plone - 如何将“显示布局”/“view_method”添加到文件夹？

> ID：13254369
> 
> 赞同：3
> 
> 时间：2012-11-06T15:37:38.953
> 
> 标签：plone

当您在 plone 中访问文件夹时，其默认视图取决于您之前在“显示”菜单中选择的内容，例如“摘要视图”、“标准视图”等。这些选项在 Products/CMFPlone 中定义/profiles/default/types/Folder.xml，带有 view_methods 标签：

```
<property name="view_methods">
  <element value="folder_summary_view"/>
  <element value="folder_full_view"/>
  <element value="folder_tabular_view"/>
  <element value="atct_album_view"/>
  <element value="folder_listing"/>
</property> 
```

这些视图在 Products/CMFPlone/skins/plone_content 中定义。

如何使用另一个包将我自己的元素添加到文件夹中的 view_method？如何覆盖 Folder.xml？我在哪里放置新模板？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:56:42.250

您必须创建配置文件/默认/类型/Folder.xml，其中包含：

```
<?xml version="1.0"?>
<object name="Folder">
 <property name="view_methods" purge="False">
  <element value="my_view"/>
 </property>
</object> 
```

然后将其注册到profiles/default/types.xml：

```
[...]
<object name="Folder"
        meta_type="Factory-based Type Information with dynamic views" />
[...] 
```

# php - mysql选择数组中的位置（php，mysql）

> ID：13254377
> 
> 赞同：1
> 
> 时间：2012-11-06T15:38:07.487
> 
> 标签：php, mysql, arrays

假设我的 mysql 行中有一个数组：

```
a:3:{i:1;a:3:{i:0;s:1:"1";i:1;s:1:"3";i:2;s:1:"5";}i:4;a:3:{i:0;s:2:"21";i:1;s:2:"25";i:2;s:2:"29";}i:5;a:1:{i:0;s:2:"33";}} 
```

它看起来像这样：

```
Array
(
    [1] => Array
        (
            [0] => 1
            [1] => 3
            [2] => 5
        )

    [4] => Array
        (
            [0] => 21
            [1] => 25
            [2] => 29
        )

    [5] => Array
        (
            [0] => 33
        )

) 
```

现在，我通过 _GET 传递一个数组，我想打印出在我的 mysql 和传递的数组中包含相同值的所有行。例如，如果我传递这个数组：

```
 Array
    (
        [1] => Array
            (
                [0] => 5
            )
) 
```

应该显示结果，因为我传递的数组包含选项 5。我尝试这样做：

```
$pecul = serialize($array);
$q=mysql_query("SELECT id from table WHERE options like '%$pecul%'")or die(mysql_error()); 
```

但它只打印出具有相同数组的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:45:34.373

like 运算符仅匹配它不理解的相同，例如您`dem`在 like 中，它也会显示`demolish`so

我认为为此您需要首先取消序列化，然后通过循环或 in_array() 函数通过 php 查找

`%like%`假设这是表`Persons`，并且您使用了查询，该怎么办

```
SELECT * FROM Persons WHERE City LIKE '%tav%'

+-------------+-------------+
|   id        |  city       |
+-------------+-------------+
|   1         |   Sandnes   |        
+-------------+-------------+
|   2         |   Stavanger |
+-------------+-------------+ 
```

所以结果将是

```
+-------------+-------------+
|   id        |  city       |
+-------------+-------------+
|   2         |   Stavanger |  <----it has tav (s-tav-anger)
+-------------+-------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:49:25.740

您可能希望首先对数据库中的数据进行反序列化。一旦它在 PHP 数组中，您就可以检查这些选项，比如：

```
if(in_array("5",$array)) {
  $q=mysql_query("SELECT id from table WHERE options=5")or die(mysql_error());
} 
```

如果您需要对所有选项进行查询，可以执行如下循环：

```
foreach($array as $option) {
  $q=mysql_query("SELECT id from table WHERE options='$option'")or die(mysql_error());
} 
```

但就像马里奥说的那样，您可能想考虑选项机制，也许序列化数据不是您需要的。不过，这应该希望对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:45:08.793

**IN()** 检查一个值是否在一组值内

```
mysql> SELECT 2 IN (0,3,5,7);
        -> 0
mysql> SELECT 'wefwf' IN ('wee','wefwf','weg');
        -> 1

SELECT val1 FROM tbl1 WHERE val1 IN (1,2,'a'); 
```

[查看：在 MySql 中](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_in)

# java - 服务器处理程序的 Netty 异步响应

> ID：13254378
> 
> 赞同：1
> 
> 时间：2012-11-06T15:38:10.163
> 
> 标签：java, netty

服务器处理程序。对于每条收到的消息，都会有多个响应。业务逻辑涉及将请求放入队列、从队列中删除、处理请求和响应。

我如何异步处理请求，异步响应，同时保持队列的完整性？

下面的代码是同步运行的。

```
public class TestHandler extends SimpleChannelHandler {

    @Override
    public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
        // Send greeting for a new connection.
        e.getChannel().write(
                "Welcome to " + InetAddress.getLocalHost().getHostName() + "!\r\n");
        e.getChannel().write("It is " + new Date() + " now.\r\n");

    }

    @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {      
        String XMLFromClient = (String) e.getMessage() ;

        ReadXML2 rx = new ReadXML2();
        String response = null;
        response = rx.processInput(XMLFromClient);
        ChannelFuture future = e.getChannel().write(response);
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
        e.getCause().printStackTrace();
        Channel ch = e.getChannel();
        ch.close();
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:16:33.890

在 netty 中写入始终是异步的，但写入同一通道的消息将按顺序排队。在阅读时，如果你想要异步操作，那么你需要添加一个[ExecutionHandler](http://static.netty.io/3.5/api/org/jboss/netty/handler/execution/ExecutionHandler.html)到`ChannelPipeline`. 如果排序很重要，则使用[OrderedMemoryAwareThreadPoolExecutor](http://static.netty.io/3.5/api/org/jboss/netty/handler/execution/OrderedMemoryAwareThreadPoolExecutor.ChildExecutor.html)实现。您需要将其添加到`ChannelPipeline`您自己的`TestHandler`. 新的[Netty 4 API](https://github.com/netty/netty)提供了对异步管道处理程序的更好控制，但它仍在开发中。

# php - 将输入字段表单值传递给应该返回该值的 php 脚本和 javascript 以警告它最终以 null

> ID：13254383
> 
> 赞同：0
> 
> 时间：2012-11-06T15:38:21.683
> 
> 标签：php, javascript, jquery, ajax

所以，我有一个带有一个输入文本字段（search_term）和一个提交按钮的表单。

我要做的是在输入文本字段中输入一个关键字，按提交，关键字被发送到一个 php 脚本，该脚本将对其进行 json_encode 并将其发送回表单页面，其中应该出现一个警告框并显示关键词。

相反，我在按下提交后一直`null`显示在警报框中。

如果我实际上在 url 中键入它并传递了关键字，PHP 脚本就可以正常工作：

`localhost/filter.php?search_term=hey`

**JavaScript**提交表单并异步获取值（*无需重新加载页面*）：

```
$('#filter_form').on('submit', function(e){
                    var filtered_data = null;

                    e.preventDefault();

                    $.ajax({
                        type: 'GET',
                        dataType: 'json',
                        url: 'filter.php',
                        async: false,
                        success: function(json)
                        {
                            filtered_data = json;
                        }
                    });

                    alert(filtered_data);
                }); 
```

**过滤器.php**：

```
$search_term = $_GET['search_term'];
    echo json_encode($search_term); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:42:01.200

您需要将输入的值发布到处理页面。

```
$('#filter_form').on('submit', function(e) {
    e.preventDefault();
    $inputValue = $('#search_term').val(); //if the id of the input is "search_term"
    $.ajax({
        type: 'POST',
        data: {
            'inputValue': $inputValue
        },
        url: 'filter.php',
        success: function(json) {
            alert(json);
        }
    });
});​ 
```

filter.php 应更改为：

```
$search_term = $_POST['inputValue'];
echo json_encode($search_term); 
```

# javascript - 计算gridview中选中的复选框

> ID：13254388
> 
> 赞同：4
> 
> 时间：2012-11-06T15:38:36.173
> 
> 标签：javascript, asp.net, gridview, checkbox

我需要计算我的gridview中选中的复选框，但我不知道该怎么做。也许我可以使用 JavaScript 并将计数保存在不显示样式的文本框中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T17:49:38.930

我写了客户端和服务器端的方法，看看它们并选择最适合你的方法！

请注意，我已将[jQuery](http://jquery.com/)用于客户端逻辑，因为它是在客户端上操作 DOM 的更现代的方式

**资源：**

%>

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script src="http://code.jquery.com/jquery-1.8.2.js" type="text/javascript"></script>
    <script type="text/javascript">
        function GetMarriedEmployees() {
        var counter = 0;
        $("#<%=gvEmployees.ClientID%> input[id*='chkIsMarried']:checkbox").each(function (index) {
            if ($(this).is(':checked'))
                counter++;
        });
        alert(counter);
        }
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:GridView ID="gvEmployees" AutoGenerateColumns="false" runat="server">
        <Columns>
            <asp:BoundField DataField="EmployeeId" />
            <asp:BoundField DataField="EmployeeName" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:CheckBox ID="chkIsMarried" runat="server" Checked='<%# Bind("IsMarried") %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:Button ID="btnGetMarried" runat="server" Text="Server" OnClick="btnGetMarried_Click" /><br />
    <input type="button" value="Client" onclick="GetMarriedEmployees()" />
</asp:Content> 
```

**后面的代码：**

```
namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                List<Employees> employees = new List<Employees>()
            {
                new Employees{EmployeeId=1, EmployeeName="Bob", IsMarried=true},
                new Employees{EmployeeId=2, EmployeeName="John", IsMarried=true}
            };

                gvEmployees.DataSource = employees;
                gvEmployees.DataBind();
            }
        }

        protected void btnGetMarried_Click(object sender, EventArgs e)
        {
        int marriedEmployees = 0;
        foreach (GridViewRow row in gvEmployees.Rows)
        {
            var isMarried = (CheckBox)row.FindControl("chkIsMarried");
            if(isMarried.Checked)
                marriedEmployees++;
        } 

        Response.Write(String.Format("Number of married employees = {0}",marriedEmployees.ToString()));
    }

    public class Employees
    {
        public int EmployeeId { get; set; }
        public string EmployeeName { get; set; }
        public bool IsMarried { get; set; }
    }
} 
```

**编辑：**

我怀疑您可能是 VB.NET 开发人员，所以这里是服务器端代码的 VB 版本：

```
Public Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not Page.IsPostBack Then

            Dim employees As New List(Of Employees)

            Dim employee1 As Employees = New Employees()
            employee1.EmployeeId = 1
            employee1.EmployeeName = "Bob"
            employee1.IsMarried = False

            Dim employee2 As Employees = New Employees()
            employee2.EmployeeId = 2
            employee2.EmployeeName = "John"
            employee2.IsMarried = True

            employees.Add(employee1)
            employees.Add(employee2)

            gvEmployees.DataSource = employees
            gvEmployees.DataBind()

        End If
    End Sub

    Protected Sub btnGetMarried_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnGetMarried.Click
        Dim marriedEmployees As Integer = 0
        For Each row As GridViewRow In gvEmployees.Rows

            Dim isMarried As CheckBox = row.FindControl("chkIsMarried")
            If isMarried.Checked Then
                marriedEmployees += 1
            End If
        Next

        Response.Write(String.Format("Number of married employees = {0}", marriedEmployees))

    End Sub
End Class

Public Class Employees
    Public Property EmployeeId As Integer
    Public Property EmployeeName As String
    Public Property IsMarried As Boolean
End Class 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T15:51:43.387

一个javascript解决方案：

```
function CheckBoxCount() {
    var gv = document.getElementById("<%= Gridview1.ClientID %>");
    var inputList = gv.getElementsByTagName("input");
    var numChecked = 0;

    for (var i = 0; i < inputList.length; i++) {
        if (inputList[i].type == "checkbox" && inputList[i].checked) {
            numChecked = numChecked + 1;
        }
    }
    alert(numChecked);
} 
```

**标记**：

```
 <asp:GridView AllowSorting="true" ID="Gridview1" Width="98%" AutoGenerateColumns="False" runat="server">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:CheckBox ID="cb_count" runat="server" onclick="CheckBoxCount();"></asp:CheckBox>
                    </ItemTemplate>
                </asp:TemplateField>
                ...
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:42:56.740

```
Dim cnt as Integer = 0
For i=0 to GridView1.Rows.Count -1
   Dim chk as CheckBox = TryCast( GridView1.Row(i).Controls.Find("nameOfCheckBoxControlColum"),CheckBox)
if chk.Checked=True Then cnt += 1
Next

'Now cnt holds the number of Checked Boxes. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T18:55:35.040

```
var count = $('input[name="numbChecked"]:checked').length; 
```

这是获得计数的最简单方法，无需任何麻烦和额外解释！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-21T06:38:03.817

这将帮助你

```
function Calculation()
{
    var grid = document.getElementById("<%=grdSelectFees.ClientID%>"); //grdSelectFees GridViewId
    for (var i = 0; i < grid.rows.length - 1 ; i++) 
    {
        var CheckBox1 = $("input[id*=chkRow]")//chkRow Id of Check box
        if (CheckBox1[i].type == "checkbox" && CheckBox1[i].checked)
        {
            //Code For If check Box Is Checked
        }
    }
} 
```

# javascript - 使用外部工具创建的 Jenkins 多模块构建和检查样式文件

> ID：13254390
> 
> 赞同：1
> 
> 时间：2012-11-06T15:38:42.100
> 
> 标签：javascript, jenkins, continuous-integration, checkstyle

我们有一个 JavaScript 项目的多模块 Maven 构建设置。对于静态代码分析，我们有一个外部工具，它在整个构建结束时通过“Windows Batch”运行，如果发现违规则让构建失败。

这可行，但我们无法运行违规插件报告。它总是显示空报告并且没有图表。我认为这是一个路径问题。

构建在主/从配置中运行。所以绝对路径不同。我不知道违规插件在哪里（主或从）实际执行其报告创建。

违规插件如何工作，它是否在构建模块时为每个子模块创建报告？我猜它不能工作，在聚合构建的最后运行检查。

当前设置：

```
Project root
|-src
|  |-sub-project1/pom.xml
|  |-sub-project2/pom.xml
|  `-pom.xml
`-checkresult.xml (with absolute file paths) 
```

是否可以通过 exec-maven-plugin 将 checktool 集成到子模块 poms 中？

此外，目前我们的 checkstyle 报告未命名为 checkstyle-result.xml，但可以在违规插件中指定模式。我不知道这是否有效。

谢谢！

# c# - 从 C# 访问 Visual Cobol

> ID：13254393
> 
> 赞同：0
> 
> 时间：2012-11-06T15:38:49.697
> 
> 标签：c#, com, cobol, microfocus

我们在 Visual Studio 2010 中使用 Micro Focus Visual Cobol 2.1。（注意这不是 Cobol.Net）

我们想从 C# 程序访问 Cobol 中的功能。

我们曾希望能够生成 COM 包装器并通过 COM 包装器调用 Cobol 代码，但找不到创建 COM 包装器的设置。

有人知道我们如何从 C# 访问 Cobol 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:25:17.920

您应该查看 Micro Focus 自己的 Visual COBOL 站点，它是 Visual Cobol 论坛。有相关文章和问答 - [http://community.microfocus.com/microfocus/cobol/](http://community.microfocus.com/microfocus/cobol/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:52:39.637

AcuCobol 的 Extend Cobol（已被 MicroFocus 收购）具有 C 例程，您可以将其编译成 C 程序以调用 Cobol 程序。您可能想询问 MicroFocus 销售/支持，以了解他们可以为您做什么。

# wpf - ListBoxItem 绑定到字符串列表时的工具提示

> ID：13254395
> 
> 赞同：1
> 
> 时间：2012-11-06T15:39:00.167
> 
> 标签：wpf, mvvm, listbox, tooltip

当 ListBox 控件绑定到字符串列表时，我们如何显示 ListBoxItem 的工具提示。下面是我的 ListBox 的源代码，其中 ConcernedConditions 是 List 类型。

```
<ListBox ItemsSource="{Binding ConcernedConditions}" Style="{StaticResource CustomStyle}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Template"> 
                <Setter.Value> 
                    <ControlTemplate TargetType="{x:Type ListBoxItem}"> 
                        <ContentPresenter /> 
                    </ControlTemplate> 
                </Setter.Value> 
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:48:35.200

您可以设置列表框的项目模板的样式并在其中放置一个文本块，然后使用它的工具提示属性吗？

```
<ListBox ItemsSource="{Binding Strings}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" ToolTip="Here is a tooltip"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# xcode - 使代码可写

> ID：13254396
> 
> 赞同：2
> 
> 时间：2012-11-06T15:39:04.707
> 
> 标签：xcode, gcc, mprotect

下午好。

我在一本书上得到了下面的代码。我正在尝试执行它，但我不知道 MakeCodeWritable 函数上的“第一个”和“最后一个”参数是什么，或者在哪里可以找到它们。有人可以帮忙吗？这段代码是关于 C 混淆方法的。我正在使用 Xcode 程序和 LLVM GCC 4.2 编译器。

```
#include <stdio.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

typedef unsigned int uint32;
typedef char* caddr_t;
typedef uint32* waddr_t;

#define Tam_celula  64

#define ALIGN __attribute__((aligned(Tam_celula)))

void makeCodeWritable(char* first, char* last) {

 char* firstpage = first - ((int)first % getpagesize());

   char* lastpage = last - ((int)last % getpagesize());

    int pages = (lastpage-firstpage)/getpagesize()+1;

    if (mprotect(firstpage,pages*getpagesize(), PROT_READ|PROT_EXEC|PROT_WRITE)==-1)         perror("mprotect");

}

void xor(caddr_t from, caddr_t to, int len){
    int i;
    for(i=0;i<len;i++){
        *to ^= *from; from++; to++;
    } }
void swap(caddr_t from, caddr_t to, int len){
    int i;
    for(i=0;i<len;i++){
        char t = *from; *from = *to; *to = t; from++; to++;
    } }
#define CELLSIZE 64
#define ALIGN asm volatile (".align 64\n");

void P() {
    static int firsttime=1; if (firsttime) {
        xor(&&cell5,&&cell2,CELLSIZE);
        xor(&&cell0,&&cell3,CELLSIZE);
        swap(&&cell1,&&cell4,CELLSIZE);
        firsttime = 0; }

    char* a[] = {&&align0,&&align1,&&align2,&&align3,&&align4,&&align5};
    char*next[] ={&&cell0,&&cell1,&&cell2,&&cell3, &&cell4,&&cell5};
    goto *next[0];

align0: ALIGN
cell0: printf("SPGM0\n");
    xor(&&cell0,&&cell3,3*CELLSIZE);
    goto *next[3];

align1: ALIGN
cell1: printf("SPGM2\n"); xor(&&cell0,&&cell3,3*CELLSIZE);
    goto *next[4];

align2: ALIGN
cell2: printf("SPGM4\n"); xor(&&cell0,&&cell3,3*CELLSIZE);
    goto *next[5];

align3: ALIGN
cell3: printf("SPGM1\n"); xor(&&cell3,&&cell0,3*CELLSIZE);
    goto *next[1];

align4: ALIGN
cell4: printf("SPGM3\n"); xor(&&cell3,&&cell0,3*CELLSIZE);
    goto *next[2];

align5: ALIGN
cell5: printf("SPGM5\n");
    xor(&&cell3,&&cell0,3*CELLSIZE);

}

int main (int argc, char *argv[]) {

     makeCodeWritable(...);
    P(); P();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:24:49.430

`first`参数应该是`(char *)P`，因为看起来您想修改函数内部的代码`P`。第二个参数是函数的结束地址`P`。可以先编译代码，然后使用`objdump -d`查看开始和结束的地址`P`，然后计算函数的大小，SIZE，然后在`makeCodeWritable( (char *)P, ((char *)P) + SIZE`.

第二种方法是利用`as`来获取 function 的大小`P`，但这取决于您平台上的汇编语言。这是我从您的代码中修改的代码狙击，它应该能够在 Linux 平台上的 GCC 4.x 中的 x86、x86_64 中编译和运行。

```
align5: ALIGN
cell5: printf("SPGM5\n");
    xor(&&cell3,&&cell0,3*CELLSIZE);

  // adding an label to the end of function P to assembly code
  asm ("END_P: \n");
  ;
}

extern char __sizeof__myfunc[];

int main (int argc, char *argv[]) {
    // calculate the code size, ending - starting address of P
    asm (" __sizeof__myfunc = END_P-P \n");
    // you can see the code size of P
    printf("code size is %d\n", (unsigned)__sizeof__myfunc);
    makeCodeWritable( (char*)P, ((char *)P) + (unsigned)__sizeof__myfunc);
    P(); P();
} 
```

经过一些修改以支持`LLVM GCC`和`as`在 Mac OS X 中

```
int main (int argc, char *argv[]) {
    size_t sizeof__myfunc = 0;
    asm volatile ("movq $(_END_P - _P),%0;"
            : "=r" (sizeof__myfunc)
            : );
    printf("%d\n", sizeof__myfunc); 
```

# jquery - 如何在自动完成中获得滚动位置

> ID：13254397
> 
> 赞同：0
> 
> 时间：2012-11-06T15:39:12.343
> 
> 标签：jquery, asp.net

我正在使用 Jquery 自动完成。`http://api.jqueryui.com/autocomplete/`

我面临的问题是，当这个 jquery 自动完成获取我的结果时，它在一行中显示了我所有的结果。我希望它应该显示 10 个结果并在滚动中休息。

```
$("#<%=txtProductName.ClientID %>").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '<%=ResolveUrl("~/Service.asmx/GetProductAutoComplete") %>',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.split('-')[0],
                                    ID: item.split('-')[1],
                                    rt: item.split('-')[2]

                                };
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#<%=txtQuantity.ClientID %>").val('1');
                    $("#<%=hdfProductID.ClientID %>").val(i.item.ID);

                },
                minLength: 0,
                autoFocus: true,
                scroll:true

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:50:32.807

```
<style>
.ui-autocomplete {
    max-height: 100px;
    overflow-y: auto;
    /* prevent horizontal scrollbar */
    overflow-x: hidden;
    /* add padding to account for vertical scrollbar */
    padding-right: 20px;
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
    height: 100px;
}
</style> 
```

# python - 使用 RequestContext 时出现 UnknownTimeZoneError

> ID：13254409
> 
> 赞同：1
> 
> 时间：2012-11-06T15:39:30.553
> 
> 标签：python, django, pytz

使用 Django 1.4 时，我在使用 RequestContext 时得到了一个`UnknownTimeZoneError`for `America/Chicago`，但是没有它它就可以工作......有什么想法吗？

**错误信息**

```
UnknownTimeZoneError at /my_proj/bad_view/
'America/Chicago' 
```

**来源**

```
# This works
def good_view(request):
    data = {}
    return render_to_response('mytemplate.html',
                              data)

# This doesn't
def bad_view(request):
    data = {}
    return render_to_response('mytemplate.html',
                              data,
                              context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:11:02.177

如果你不关心时区支持，你应该添加`USE_TZ = False`到你的`settings.py`.

如果你想要时区支持，你应该安装`pytz`：

```
pip install pytz 
```

我相信该错误是由 django`America/Chicago`从请求中获取模板引起的，但是 django 的有限时区数据没有这个时区。`pytz`如果安装，错误将消失。

您应该阅读[django 的时区文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones)以了解 django 1.4 如何处理时区。

# php - 我将如何对具有副作用的方法进行单元测试？

> ID：13254411
> 
> 赞同：4
> 
> 时间：2012-11-06T15:39:37.387
> 
> 标签：php, unit-testing, phpunit

给定以下实现：

```
class Foo {
    public function helper() {
        // Does something with external side effects, like updating
        // a database or altering the file system.
    }

    public function bar() {
        if ($this->helper() === FALSE) {
            throw new Exception(/* ... */);
        }
    }
} 
```

我将如何进行单元测试`Foo::bar()`而不产生测试期间的副作用`Foo::helper()`？

我知道我可以模拟`Foo`和存根`Foo::helper()`：

```
public function testGoodBar() {
    $mock = $this->getMock('Foo', array('helper'));
    $this->expects($this->once())
        ->method('helper')
        ->will($this->returnValue(TRUE));

    $this->assertTrue($mock->bar());
} 
```

...但这使得测试对引入其他可能有副作用的方法的代码更改开放。然后，如果在没有更新的情况下再次运行测试，测试本身就会产生永久性的副作用。

我也可以 mock `Foo`，这样它的所有方法都会被嘲笑并且不会产生副作用：

```
public function testGoodBar() {
    $mock = $this->getMock('Foo');
    $this->expects($this->once())
        ->method('helper')
        ->will($this->returnValue(TRUE));

    $this->assertTrue($mock->bar());
} 
```

...但随后甚至`Foo::bar()`被嘲笑，这很糟糕，因为这是我们想要测试的方法。

我能想出的唯一解决方案是显式地模拟*除*被测方法之外的所有方法：

```
public function testGoodBar() {
    $mock = $this->getMock('Foo', array_diff(
        get_class_methods('Foo'),
        'bar'
    ));

    $this->expects($this->once())
        ->method('helper')
        ->will($this->returnValue(TRUE));

    $this->assertTrue($mock->bar());
} 
```

...但这看起来很笨拙，我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:22:09.843

[（在此答案中考虑问题下的评论。）]

如果您要扩展一个唯一目的是产生副作用的类，我希望所有扩展代码也会产生副作用。因此，您必须在测试中考虑到这一点，并设置一个环境，您可以在其中测试具有副作用的代码（即：为该测试启动并运行一个 memcached 实例）。

如果您不想要这个（可以理解），最好以可模拟的方式将代码编写为副作用类的包装器。因此，您`Foo::__construct`接受产生副作用的类的实例或工厂，因此您可以在测试中模拟它以仅测试无副作用的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T15:49:24.227

看起来您应该更关心测试 helper() 调用的方法，而不是在这种情况下关心 bar() 。

有时当一个方法做了很多事情时，最好将它分解并让其他方法来做这些事情。执行此操作时，您希望得到与以前相同的输出，但代码被分解成更易于管理的部分。首先测试最小的部分很重要。当您开始测试 bar() 时，您不需要进行太多测试，因此您不必一遍又一遍地模拟它。因为很多情况都会在 helper() 的支持方法中覆盖。

# sql - 尝试创建一个触发器来检查插入的年龄，如果小于 18 则将其放入另一个表中

> ID：13254417
> 
> 赞同：0
> 
> 时间：2012-11-06T15:40:13.853
> 
> 标签：sql, sql-server, tsql, triggers

开发一个触发器，该触发器将放置在营销列表表中，一旦尝试插入，该触发器将在此人的年龄小于 18 岁时将一条记录插入到子表中。

请参阅下面的代码：

```
Create Trigger on_insert_marketing_list
On marketing_list for insert
As
BEGIN
        Declare @Name varchar (100)
        Declare @Dob date
        Declare @Gender char(1)
        Declare @Parish VARCHAR(50)
        Declare @Mobile varchar(50)
        Declare @Provider varchar(50)
        Declare @age int

        Select @age = datediff(year,@dob,getdate())from inserted

        If (@age) < 18      
        BEGIN
        Insert Into Childlist values(@Name,@Dob,@Gender,@Parish,@Mobile,@Provider)
        END

End

insert into marketing_list (Name, Dob, Gender,  Parish,  Mobile, Mobile_Provider) values
('Kendrick Lamar', '3/4/2005','M','Kingston', '18764532345','LIME') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:54:15.553

只是想发布我计算某人年龄的函数：

```
create function [dbo].[CalculateAge] ( @p_BirthDate date, @p_ReferenceDate date )
returns int as
begin

  return DateDiff( Year, @p_BirthDate, @p_ReferenceDate ) - 
         ( Case When DateAdd( Year, DateDiff( Year, @p_BirthDate, @p_ReferenceDate ), @p_BirthDate ) > @p_ReferenceDate Then 1 Else 0 End )

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:49:33.860

而不是有`ChildsList`表，为什么不是这个视图：

```
CREATE VIEW ChildsList
AS
   SELECT
       Name,
       DOB,
        Gender,
       Parish,
       Mobile,
       Mobile_Provider
    FROM
        marketing_list
    WHERE
       DOB >= DATEADD(year,-18,CURRENT_TIMESTAMP) 
```

这是 a) 始终是最新的，并且 b) 不尝试直接计算他们的年龄，因此不必摆弄正确的计算。

* * *

如果您仍然想要触发器，请执行以下操作：

```
Insert Into Childlist 
select Name,Dob,Gender,Parish,Mobile,Mobile_Provider
from
    inserted where DOB >= DATEADD(year,-18,CURRENT_TIMESTAMP) 
```

但正如我所说，一旦日期更改，它就会立即过时。

这将正确地将一行插入`ChildList`表中，以进行如下插入：

```
INSERT INTO marketing_list (Name, Dob, Gender,  Parish,  Mobile, Mobile_Provider) values
('Kendrick Lamar', '20050403','M','Kingston', '18764532345','LIME'),
('Phillip Lamar', '198550403','M','Elsewhere', '18764532346','ORANGE'), 
```

# ios - Phonegap，Cordova watchposition 每 1 秒触发一次成功

> ID：13254420
> 
> 赞同：5
> 
> 时间：2012-11-06T15:40:19.300
> 
> 标签：ios, cordova, geolocation

平台：iOS6/OSx Lion。

我试图弄清楚 Phonegap/Cordova 使用`navigator.geolocation.watchPosition`.

文档说选项“ `maximumAge`”是要求系统检索位置的选项。

因此，使用这些选项：

```
{ maximumAge: 3000, timeout: 5000, enableHighAccuracy: true } 
```

我认为位置请求将每 3 秒触发一次？

而且无论`maximumAge`我放什么，每 1 秒就会触发一次成功...

任何人都可以解释一下吗？

谢谢再见
罗伯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T17:31:49.473

我目前正在通过`getCurrentPosition`使用`setInterval`. 我不确定后果可能是什么，但这似乎给了我最大的控制权，并且似乎是跨平台最一致的方法。

```
// call this once
setupWatch(3000);

// sets up the interval at the specified frequency
function setupWatch(freq) {
    // global var here so it can be cleared on logout (or whenever).
    activeWatch = setInterval(watchLocation, freq);
}

// this is what gets called on the interval.
function watchLocation() {
    var gcp = navigator.geolocation.getCurrentPosition(
            updateUserLoc, onLocationError, {
                enableHighAccuracy: true
            });

    // console.log(gcp);

}

// do something with the results

function updateUserLoc(position) {

var location = {
    lat : position.coords.latitude,
    lng : position.coords.longitude
};

console.log(location.lat);
console.log(location.lng);
}

// stop watching

function logout() {
    clearInterval(activeWatch);
} 
```

# cakephp - 为 AppHelper 操作 $data 还是使用条件解析其中的 $data 更好？

> ID：13254421
> 
> 赞同：1
> 
> 时间：2012-11-06T15:40:22.270
> 
> 标签：cakephp, helper

这些天来，我在思考如何更好地使用`AppHelper`s in `CakePHP`。我想`AppHelper`根据我需要的上下文使用使链接和其他 html 元素保持一致，例如，因为`users`我有方法

```
$this->AppUser->profile($data, $options, $attributes); 
```

此方法返回一个为用户设置样式的链接，带有特定的 css 类，可能是这样的：

```
<a class="user female" href="http://url/profiles/username">Username</a> 
```

我的问题是数据的结构因情况而异，在某些情况下，我有一个这样的数组：

```
$data['User']['id']
$data['User']['username']
$data['Profile']['user_id']
$data['Profile']['sex']
$data['Profile']['other'] 
```

在其他一些情况下，我有不同的查询和不同的实体：

```
$data['User']['id']
$data['User']['username']
$data['User']['Profile']['user_id']
$data['User']['Profile']['sex']
$data['User']['Profile']['other'] 
```

所以我想了解我是否遗漏了数据层次结构中的某些内容，因为它应该始终以相同的方式构造？

那么我是否应该始终以相同的方式向 Helper 发送数据？

我是否应该让助手根据情况解析数据，以便在有条件的情况下找到数据的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:02:29.720

这很常见，是在多个层次上找到相关项目的结果。我通常在 Helper 上有一个帮助方法来规范化数据。

我总是将数据按原样发送给助手，然后在助手中根据需要对其进行重组。它看起来像这样：

```
function normalizeUserData($data) {
  foreach ($data['User'] as $field => $value) {
    if (is_array($value)) {
      // move it to the same level as User
      $data[$field] = $value;
      unset($data['User'][$field]);
    }
  }
} 
```

现在，您的函数始终可以期待与 User 键处于同一级别的 Profile 数据。这个函数并不完美，也不是递归的，但应该给你一个好的开始。

# database - 数据库算法缩放

> ID：13254422
> 
> 赞同：0
> 
> 时间：2012-11-06T15:40:25.840
> 
> 标签：database, algorithm, oracle, scaling

我最近的任务是使用现有的 Oracle 数据库做一些“大数据”工作。相关表有 3 亿个条目，而且速度慢得离谱。有没有什么好书可以解释数据库构建中的各种选项如何影响各种查询的算法缩放（O（n）等）？以及不同的查询操作本身如何影响缩放？

我更愿意了解底层算法的工作原理，而不仅仅是临时建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:02:21.113

乔纳森·刘易斯 (Jonathan Lewis) 关于基于成本的 Oracle 基础知识的书可能正是您想要的。

对于有关查询大型数据集的特定技术，Oracle 数据仓库文档将是一个好的开始。

# bash - 在 Bash 中使用变量作为案例模式

> ID：13254425
> 
> 赞同：24
> 
> 时间：2012-11-06T15:40:37.400
> 
> 标签：bash, pattern-matching, switch-statement

*我正在尝试编写一个在case*语句中使用变量作为模式的 Bash 脚本。但是，我就是无法让它工作。

案例陈述：

```
case "$1" in
    $test)
        echo "matched"
        ;;
    *)
        echo "didn't match"
        ;;
esac 
```

我已经尝试过分配`$test`as `aaa|bbb|ccc`、`(aaa|bbb|ccc)`和`[aaa,bbb,ccc]`其他几种组合。我还尝试了这些作为案例陈述中的模式：`@($test)`, `@($(echo $test))`, `$($test)`. 也没有成功。

为清楚起见，我希望变量代表多种模式，如下所示：

```
case "$1" in
    aaa|bbb|ccc)
        echo "matched"
        ;;
    *)
        echo "didn't match"
        ;;
esac 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-06T16:07:12.817

您可以使用以下`extglob`选项：

```
#! /bin/bash

shopt -s extglob         # enables pattern lists like +(...|...)
test='+(aaa|bbb|ccc)'

for x in aaa bbb ccc ddd ; do
    echo -n "$x "
    case "$x" in
        $test) echo Matches.
        ;;
        *) echo Does not match.
    esac
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:48:28.130

这里有点不同：

```
#!/bin/bash

pattern1="aaa bbb ccc"
pattern2="hello world"
test=$(echo -e "$pattern1\n$pattern2" | grep -e $1)

case "$test" in
    "$pattern1")
        echo "matched - pattern1"
        ;;
    "$pattern2")
        echo "matched - pattern2"
        ;;
    *)
        echo "didn't match"
        ;;
esac 
```

这`grep`用于为您进行模式匹配，但仍然允许您指定要在 case-statement 结构中使用的多个模式集。

例如：

*   如果`aaa`,`bbb`或`ccc`是脚本的第一个参数，这将输出`matched - pattern1`。
*   如果其中一个`hello`或是`world`第一个参数，这将输出`matched - pattern2`.
*   否则会输出`didn't match`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-01T20:23:07.127

使用*[eval](https://linux.die.net/man/1/bash)*也可以：

```
eval 'case "$1" in

    '$test')
        echo "matched"
        ;;
    *)
        echo "did not match"
        ;;
esac' 
```

# json - 在数据库中存储 JavaScript 文件的文件名

> ID：13254427
> 
> 赞同：0
> 
> 时间：2012-11-06T15:40:46.103
> 
> 标签：json, jquery

我在数据库中有 JavaScript 文件名，并且在客户端页面上有一个 jQuery ajax 脚本，它返回包含 JavaScript 文件名的 JSON 数据。

我不得不做这样可怕的事情：

`$( "head" ).append( "<scr" + "ipt type='text/javascript' src='js/" + widget_data.d[i].script + "'></scr" + "ipt>" );`

是否有推荐/首选的方式将脚本动态添加到 HTML 页面头部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:20:13.747

您正在使用 jQuery，最简单的方法是使用`$.getScript()`，例如在此示例中：[http ://www.mkyong.com/jquery/how-to-load-javascript-at-runtime-with-jquery/](http://www.mkyong.com/jquery/how-to-load-javascript-at-runtime-with-jquery/)

文档：[getScript()](http://api.jquery.com/jQuery.getScript/)

# c - 通过套接字打包和发送二进制数据的问题 - 序列化

> ID：13254428
> 
> 赞同：0
> 
> 时间：2012-11-06T15:40:46.370
> 
> 标签：c, sockets, serialization

我已经尝试、调试和哭了几个小时，希望让我的程序正确发送/打包和接收/解包我的数据。我唯一的希望是一些好的帮助！

为了打包/解包数据，我实现*了 Beej 的网络编程指南* [示例 pack2.c](http://beej.us/guide/bgnet/examples/pack2.c)

代码工作包/解包在同一程序内部工作。但是，当我尝试通过套接字将打包数据发送到同一台计算机上的另一个程序时，它将无法正常工作！我的想法是 recv() 和 send() 函数在某种程度上可能会使数据损坏或类似的东西，我试图调试这是几种方法：

**我需要一些帮助才能使其正常工作，我认为问题在于发送和接收 buf 的方式，因为 pack()/unpack() 函数在程序内部工作。**

***谢谢***

**客户端：**

```
unsigned char buf[1024];

    int16_t packetsize = pack(buf, "h", (int16_t)37);
    packi16(buf+1, packetsize);
    int len = packetsize;

    uint16_t header = htons(packetsize); //Convert from host -> network

    //Sends info to receiver about next pack coming.

    printf("HEADER SIZE %d\n", packetsize);

    if(send(sock, &header, packetsize, 0) == -1) {
        perror("sendall");
    }

    /*==========SEND PACKAGE======================*/

    int bytessendt = send(sock, buf, len, 0);//server_send_all(sock, buf, &len);

    if(bytessendt == -1) {
        perror("sendall");
    }

    printf("BYTES SENT OVER SOCKET: %d \n", bytessendt);

    close(sock); 
```

**服务器端：**

```
 uint16_t buf;
                int len = sizeof(buf);

                if(recv(i, &buf, len, 0) == -1) {
                    printf("****Error when receiving");
                }

                int header = ntohs(buf);

                printf("HEADER SIZE: %d\n", header);

                /*========REICIVE PACK AND UNPACK================*/

                unsigned char buf2[1024];
        int16_t monkeycount;

                int bytesreaded = recv(i, buf2, header, 0);

                if(bytesreaded == -1) {
                    printf("Feil ved mottakelse\n");
                }

                printf("BYTES READED: %d\n", bytesreaded);
                printf("BYTES SHOULD BE READED: %d\n", header);

                unpack(buf2, "h", &monkeycount);

                printf("CONTENT: %d\n", monkeycount);

                close(i);

int server_send_all(int socket, unsigned char *buf, int *len) {

    int total = 0;              //Total amout of data to send
    int bytesleft = *len;       //Amount of data left to send
    int n;                      //Holds return from send()

    printf("SOCKET -DATA TO SEND: %d\n", *len);

    while(total < *len) {
        n = send(socket, buf+total, bytesleft, 0);

        if(n == -1) { //send() returns error
            break;
        }

        total += n;
        bytesleft -= n;
    }

    *len = total; //Returns actually sent

    return n == -1?-1:0;
} 
```

**发送字符串**

*来自客户：*

```
int packetsize = 0;
packetsize += pack(buf + packetsize, "h", (int16_t)37);
packetsize += pack(buf + packetsize, "s", "Hello World");

    send(sock, &header, packetsize, 0) 
```

*到服务器：*

```
 char s2[30];
                        unpack(buf2, "h30s", &monkeycount, s2);                  

                        printf("CONTENT: %d %s\n", monkeycount, s2); 
```

**给出输出**

内容：37 你好，工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:01:02.773

该解包代码需要一个`int *`参数来解包`int16_t`：将您的声明更改为`int monkeycount;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:56:17.050

你打包一个`int16_t`2*个字节*，然后只增加`buf`1*个字节*，应该是 2 个字节：

```
int16_t packetsize = pack(buf, "h", (int16_t)37);
packi16(buf+2, packetsize); 
```

每次将某些内容打包到缓冲区中时，`pack()`再次调用时都应将缓冲区指针增加该数量：

```
pack(buf, 2 bytes);
pack(buf+2, 4 bytes);
pack(buf+6, 2 bytes);
... 
```

所以我认为你应该这样做：

```
int packetsize =0;
packetsize += pack(buf+packetsize, "h", (int16_t)37);
packetsize += pack(buf+packetsize, "h", (int16_t)38);
... 
```

**注意1**：`packetsize`应该是`int`as`pack()`返回 an `int`，我不明白为什么您使用`packi16()`第二次而不是更通用的`pack()`函数。

**注意2**：数据包大小也是错误的，你忘了加上`packetsize`. 实际上，我认为您根本不是要将数据包大小添加到数据包中，因为您要分别发送数据包大小和数据包

# jquery - IE8中的setTimeout与jquery jstween动画循环

> ID：13254431
> 
> 赞同：3
> 
> 时间：2012-11-06T15:40:48.367
> 
> 标签：jquery, animation, internet-explorer-8, settimeout, jstween

以下动画在 chrome 和 firefox 中运行良好，但在 IE8 上无法无限循环运行。 [http://jsbin.com/acokus/5/edit](http://jsbin.com/acokus/5/edit)

我认为 setTimeout 有问题，或者我做了一些根本错误的事情..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:39:12.887

**解决方案：**

我不知道为什么它现在可以在 IE8 中工作，但它可能对喜欢使用 jsTween 编写循环的人有所帮助：

[http://jsbin.com/acokus/17/edit](http://jsbin.com/acokus/17/edit)

# tcp - MODBUS，设备可以响应的最长时间吗？

> ID：13254432
> 
> 赞同：1
> 
> 时间：2012-11-06T15:41:02.667
> 
> 标签：tcp, serial-port, communication, serial-communication, modbus

在与 MODBUS 设备通信时，设备在被视为超时之前可以响应多长时间是否有上限？我正在尝试确定将读取超时设置为什么。MODBUS RTU 和 TCP 的答案都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T08:44:20.217

在[*MODBUS over serial line specification and implementation guide V1.0*](http://www.modbus.org/docs/Modbus_over_serial_line_V1.pdf) section *2.5.2.1 MODBUS Message ASCII Framing*建议在慢速 WAN 配置中最多 5 秒的字符间延迟是合理的。

*2.6 错误检查方法*表示超时配置未指定任何值。

当前的[*Modicon Modbus 协议参考指南 PI–MBUS–300 Rev. J*](http://modbus.org/docs/PI_MBUS_300.pdf)也没有为这些设置提供定量建议。

您的应用程序时间敏感性以及网络强制执行的约束将在很大程度上决定您的选择。

如果您确定了您可以容忍的最坏情况延迟，请花一半的时间让单次重传失败，减去最大长度消息的合理传输时间，那么您应该有一个很好的超时候选者。这将允许您从单个错误中恢复，而不会不必要地经常报告错误。

当然，真正的问题是，发生错误时该怎么办。它可能是暂时的问题，还是需要注意的永久性故障的结果？

Alexandre Vinçon 对致谢的评论也是相关的。可能是您的设备没有实现这一点，并且可能会延长延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:08:47.100

规范没有提到超时的特定值，因为不可能为大范围的 MODBUS 从站标准化超时值。

但是，您应该在几百毫秒内收到回复，这是一个很好的假设。

我通常使用 RTU 将超时定义为 1 秒，使用 TCP 将超时定义为 500 毫秒。

此外，如果设备需要很长时间来回复，它应该返回一个 ACK​​NOWLEDGE 消息以防止超时到期。

# ruby-on-rails - 如何设置到目录的剩余默认路由？

> ID：13254433
> 
> 赞同：2
> 
> 时间：2012-11-06T15:41:06.270
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-routing

也许仅仅是因为缺乏好的关键字，我无法找到任何有用的解决方案来解决一个应该几乎是微不足道的问题……</p>

在我的*routes.rb*中，我如何判断：“如果没有其他路由匹配**request**，则传递 /foo/bar/ **request** ”？

（注：**请求**≠'/'）

更加具体：

如果*http://example.com/somedir/test/1/2/3*不匹配，请尝试*/for/bar/somedir/test/1/2/3*，如果不存在，则传递 *APP_DIR/public /404.html*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:55:24.323

尝试这个：

`match "/home/*request" => redirect{|params| "/foo/bar/#{params[:request]}"}`

[http://guides.rubyonrails.org/routing.html#route-globbing](http://guides.rubyonrails.org/routing.html#route-globbing)

# objective-c - 从 UISearchBar 对 NSArray 执行搜索

> ID：13254435
> 
> 赞同：2
> 
> 时间：2012-11-06T15:41:10.473
> 
> 标签：objective-c, ios, nsarray, nspredicate

我正在尝试对来自 JSON 提要的某些结果进行搜索，这些结果已加载到名为 tableData 的 NSArray 中，然后显示在 UITable 中。

searchResults NSArray 已被声明为 .h 文件。问题是目前 searchResults 是空的，并且没有向控制台输出任何内容。我不确定为什么...

我想知道是否缺少某些东西

```
searchResults = [tableData filteredArrayUsingPredicate:resultPredicate]; 
```

下面的代码行

谢谢你的帮助。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    searchResults = [tableData filteredArrayUsingPredicate:resultPredicate];

    NSLog(@"searchResults: %@", searchResults);

    NSLog(@"tableData results: %@", tableData);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:49:59.020

如果您正在字典中查找名为“cat”的字段，而不是在 SELF 中查找谓词，它应该在 SELF.cat 中查找。

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"SELF.cat CONTAINS[cd] %@", searchText]; 
```

如果您仍需要检查对象中包含的其他字段，则可以创建复合谓词。谓词的详细信息可以在[Apple 的谓词编程指南中找到。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001789)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T15:45:12.007

尝试替换 [cd] -> [c]：

```
NSPredicate *resultPredicate = [NSPredicate predicateWithFormat:@"self.youProperty contains[c] %@", searchString]; 
```

like[cd] 的意思是“不区分大小写和变音符号的like”。</p>

# .net - 如何找到用于创建源过滤器的 IMoniker？

> ID：13254440
> 
> 赞同：1
> 
> 时间：2012-11-06T15:41:23.127
> 
> 标签：.net, directshow, reverse-engineering, directshow.net, graphedit

目前我正在编写一个基于 DirectShow 的应用程序，它应该可以帮助用户配置他们的电视采集卡，因为 GraphEdit 对于大多数人来说似乎太难理解了。这个想法是这个应用程序将生成的 Graph 导出到一个[.GRF 文件](http://msdn.microsoft.com/en-us/library/aa451348.aspx)，该文件将在另一个应用程序中使用。

用户可以选择应该使用哪个设备（ [IMoniker ）来创建源过滤器，并且可以更改有关视频/音频的一些设置。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679705%28v=vs.85%29.aspx)

除了导出 .GRF 文件之外，我的应用程序还应该具有导入此类文件的功能。我的问题是：如何在导入的图表中找到用于创建源过滤器的名字对象/设备？

我尝试为所有连接的设备创建源过滤器列表，并将它们与导入图中的源过滤器进行比较，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:39:43.683

您无法从创建的实例中分辨出名字对象。要区分名字对象并能够找到您需要的名字，请将其`IMoniker::GetDisplayName`字符串用作唯一的持久标识符。

# r - 在ggplot2中添加一条水平线来绘制和图例

> ID：13254441
> 
> 赞同：42
> 
> 时间：2012-11-06T15:41:23.560
> 
> 标签：r, ggplot2

这段代码创建了一个很好的图，但我想在 y=50 处添加一条水平黑线，并让图例在图例中显示一条带有文本“cutoff”的黑线，​​但在图例中为源留点。我可以用 geom_line 添加线，但无法在图例中获取线。

```
 library(ggplot2)
    the.data <- read.table( header=TRUE, sep=",", 
    text="source,year,value
    S1,1976,56.98
    S1,1977,55.26
    S1,1978,68.83
    S1,1979,59.70
    S1,1980,57.58
    S1,1981,61.54
    S1,1982,48.65
    S1,1983,53.45
    S1,1984,45.95
    S1,1985,51.95
    S1,1986,51.85
    S1,1987,54.55
    S1,1988,51.61
    S1,1989,52.24
    S1,1990,49.28
    S1,1991,57.33
    S1,1992,51.28
    S1,1993,55.07
    S1,1994,50.88
    S2,1993,54.90
    S2,1994,51.20
    S2,1995,52.10
    S2,1996,51.40
    S3,2002,57.95
    S3,2003,47.95
    S3,2004,48.15
    S3,2005,37.80
    S3,2006,56.96
    S3,2007,48.91
    S3,2008,44.00
    S3,2009,45.35
    S3,2010,49.40
    S3,2011,51.19") 
    ggplot(the.data, aes( x = year, y = value ) ) + 
        geom_point(aes(colour = source)) + 
        geom_smooth(aes(group = 1)) 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-06T15:55:58.343

(1) 试试这个：

```
cutoff <- data.frame( x = c(-Inf, Inf), y = 50, cutoff = factor(50) )
ggplot(the.data, aes( year, value ) ) + 
        geom_point(aes( colour = source )) + 
        geom_smooth(aes( group = 1 )) + 
        geom_line(aes( x, y, linetype = cutoff ), cutoff) 
```

![截屏](../Images/97f245158a70bcc716613b91aaa3db2f.png)

(2) 关于您的评论，如果您不希望将截止值列为单独的图例，则只需在图上标记截止线会更容易：

```
ggplot(the.data, aes( year, value ) ) + 
    geom_point(aes( colour = source )) + 
    geom_smooth(aes( group = 1 )) + 
    geom_hline(yintercept = 50) + 
    annotate("text", min(the.data$year), 50, vjust = -1, label = "Cutoff") 
```

![截屏](../Images/457b83c69d30dca5c4f897dd214628e9.png)

## 更新

这似乎更好，并推广到多行，如图所示：

```
line.data <- data.frame(yintercept = c(50, 60), Lines = c("lower", "upper"))
ggplot(the.data, aes( year, value ) ) + 
        geom_point(aes( colour = source )) + 
        geom_smooth(aes( group = 1 )) + 
        geom_hline(aes(yintercept = yintercept, linetype = Lines), line.data) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-07-10T21:36:19.770

另一个解决方案：

```
gg <- ggplot(the.data, aes( x = year, y = value ) ) + 
        geom_point(aes(colour = source)) + 
        geom_smooth(aes(group = 1))

cutoff <- data.frame(yintercept=50, cutoff=factor(50))
gg + 
  geom_hline(aes(yintercept=yintercept, linetype=cutoff), data=cutoff, show_guide=TRUE) 
```

此代码生成的图形与@G 的点 (1) 中的图形完全相同。格洛腾迪克。但更容易适应具有多层的图形。

# python - Pymacs 助手在 30 秒后没有启动

> ID：13254442
> 
> 赞同：3
> 
> 时间：2012-11-06T15:41:28.770
> 
> 标签：python, emacs, ropemacs, pymacs

我已经看到了其他关于此的问题，但实际上没有一个问题得到回答，而且都不是我的问题。

我有一个新系统，emacs 23.1，Centos 6.2（我认为）。我下载了最新的 pymacs 并安装了它。但是，我得到：

```
error: Pymacs helper did not start within 30 seconds 
```

这是以前一直有效的 .emacs 和 .bashrc 。此外，似乎当我从 gnome 运行时，它确实找到了 pymacs 助手（但ropemacs 没有运行），但在 KDE 中（这是我实际尝试使用的）它给出了 pymacs 助手错误。

编辑，因为我在几个月后再次遇到这个问题时发现了这个问题。

现在，我也在 gnome 中遇到了 pymacs helper 错误。我已经注释掉了这一行：

```
(autoload 'python-mode "python-mode" "Python editing mode" ) 
```

但这似乎没有帮助。这是最新的pymacs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:54:22.703

作者`Pymacs`指出，这是一个与旧版本相关的问题，该版本`python-mode.el`加载了自己的`Pymacs`. 他提出了两种不同的解决方案（见[这里](https://github.com/pinard/Pymacs#python-modeel-difficulty)）：

*1）*注释掉`python-mode`初始化（我猜`pymacs`然后加载它）
*2）*将变量设置`py-load-pymacs-p`为`nil`

如果我没记错的话，第二个修复程序不适用于我的 emacs，但第一个修复程序可以。此外，据我所知，它现在是在 github 上开发的，因此可能需要更新您的版本`Pymacs`，因此您可以使用上述 repo 中的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:04:07.930

如果加载了较旧的 pymacs.el，则会发生该错误。检查这样的事情是否仍然在你的路上。

如果问题仍然存在，请使用 python-mode 内联 Pymacs：

bzr 分支 lp:python-mode/components-python-mode

# ruby - ruby 中 A::B 类名的含义是什么？

> ID：13254443
> 
> 赞同：4
> 
> 时间：2012-11-06T15:41:30.520
> 
> 标签：ruby, class, module, namespaces

我有一个实体类，在这个类中我曾经有一个名为 Config 的内部类。

```
class Entity
 class Config
 end
end 
```

Config 类已经变得相当大，所以我决定把它放到它自己的文件中。但是，我仍然想保留命名空间，所以我在 Config 类前面加上一个 Entity:: 让我在两个不同的文件中有两个类，就像这样。

```
 #In entity.rb file
 class Entity
   require 'entity_config.rb'
 end

 #In entity_config.rb file
 class Entity::Config
 end 
```

现在我可以使用 Entity::Config.new 实例化配置

但是，我不明白这样命名类名的含义。有人可以向我解释这里到底发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:54:58.607

当您编写时`class Something`，`Something`您提供的是常量的名称，因此使用`::`运算符提供名称等同于首先打开外部类并以这种方式创建内部类。`::`运算符只是一种从类或模块外部访问类或模块中的常量的方法。例如，这样的事情是完全有效的：

```
class Outer
  class Inner
  end

  class Inner::EvenMoreInner
  end
end

class Outer::Inner::EvenMoreInner::InnerMost
end 
```

请注意，您不能只编写`class Some::New::Class::Hierarchy`并自动创建所有包含类。即`Some::New::Class`必须首先存在。这就是为什么我在我对该问题的评论中询问您所写代码的确切顺序的原因。

# javascript - javascript窗口中的window.open（）和window.close（）在关闭后不会重新打开

> ID：13254444
> 
> 赞同：1
> 
> 时间：2012-11-06T15:41:32.407
> 
> 标签：javascript, window.open

我正在使用 开发基于网络的游戏`processing.js`，我的问题与用于管理浏览器窗口的纯 JavaScript 代码有关。

游戏是一个迷宫般的小浏览器窗口（200px*200px），每个边框可以是一面墙，也可以是通往另一个窗口的通道。我的问题是，如果我关闭来自的窗口，然后我尝试取回它不会重新打开，即使我使用以前使用过的相同功能。

我在这里运行了一个 git 存储库：[GitHub - TheMidst](https://github.com/b2renger/TheMidst)。

如果要重现“错误”：

从 github 拉取代码：

1.  启动`index.html`（在你最喜欢的浏览器中，我使用 chrome）。
2.  不要等待并单击`start button -> level0.html`打开。
3.  通过单击打开的右侧转到右侧`canvas->` `level1.html`。
4.  回到你的`steps -> level0.html`仍然打开。
5.  回到右边`level1.html`，它不会重新生成... =>这是我的问题。

/js -> 包含一个windowScripts.js，它通过函数处理窗口的打开和关闭，这是我的窗口管理器的核心，它有问题。

/levels -> 包含每个级别作为 html 页面。

/pd -> 包含纯数据补丁的游戏声音（是的！）

游戏还远未完成，所以一切都远非完美。任何帮助将不胜感激。

干杯。

编辑添加一些代码

打开我使用的弹出窗口：popUp(1); //1 是我要打开的关卡的编号。

这与这个js函数有关

函数弹出（winNum）{

```
var windowFeatures = "toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=0,left="+(winVars[winNum][0])+",top="+(winVars[winNum][1])+",width="+winVars[winNum][2]+",height="+winVars[winNum][3];

windows[winNum] = window.open( "level"+winNum+".html", "myWindow"+winNum, windowFeatures);

windows[winNum].moveTo(winVars[winNum][0],winVars[winNum][1]); 
```

}

我所有的 Windows 属性都存储在数组中

关闭我使用的窗口：closeWindows(0); // 0 是我要关闭的窗口的编号。

函数 closeWindows(winNum2){

setTimeout (widows[winNum2] = window.close(),50); }

* * *

实际上我在父窗口等之间有点困惑......

使用“window.opener.popUp(myPopup)”确实解决了问题

github repo 已经做了一些改动，如果你有同样的问题，你仍然可以参考 github repo。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:51:32.933

作为一般规则，使用多个浏览器窗口是一个坏主意，因为它与各种浏览器恶意软件使用的界面完全相同，例如弹出窗口和背后弹出窗口。事实上，这完全有可能是你得到你所看到的行为的原因。

相反，由于您需要多个图块，因此只需使用绝对定位`div`的元素。

# java - 为什么我对 Exchange Web 服务的 JAX-WS 调用在 Java 6 下工作，但在 Java 7 下失败，并显示“请求需要 HTTP 身份验证：未经授权”？

> ID：13254445
> 
> 赞同：0
> 
> 时间：2012-11-06T15:41:44.557
> 
> 标签：java, web-services, exchange-server, exchangewebservices

我有一个用 Java 编写的 Web 应用程序，它使用 Exchange Web 服务对交换服务器进行 JAX-WS Web 服务调用。

当我使用 Java 1.6.0_34 编译和运行应用程序时，它工作正常。

如果我使用 Java 1.7.0_07 编译并运行它，我会收到以下错误：

```
com.sun.xml.ws.client.ClientTransportException: request requires HTTP authentication: Unauthorized
    at com.sun.xml.ws.transport.http.client.HttpClientTransport.checkResponseCode(HttpClientTransport.java:212)
    at com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:149)
    at com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:86)
    at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:595)
    at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:554)
    at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:539)
    at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:436)
    at com.sun.xml.ws.client.Stub.process(Stub.java:248)
    at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)
    at $Proxy62.getUserAvailability(Unknown Source)
    ... 
```

如果我用 1.6.0_34 编译它并用 1.7.0_07 运行它，也会发生这种情况。

我查找了 Java 6 和 7 之间对 JAX-WS 的更改，但我只发现了一些关于可能的编译错误的[注释。](http://docs.oracle.com/javase/7/docs/technotes/guides/xml/jax-ws/index.html)

我不确定接下来要看什么，因为显然身份验证代码没有更改，那为什么会失败？

这是我认为应该设置身份验证的方法：

```
/**
 *  Set up Authentication
 *
 */
protected void setupAuthenticator(){
    if(authenticator == null){
        authenticator = new Authenticator(){
            protected PasswordAuthentication getPasswordAuthentication(){
                String superusername = ExchangeServerPortFactory.this.adDomain
                                + "\\" 
                                + ExchangeServerPortFactory.this.username;
                String superPassword = ExchangeServerPortFactory.this.password;
                return new PasswordAuthentication(superusername
                                         ,superPassword.toCharArray());
            }
        };
        Authenticator.setDefault(authenticator);
    }
} 
```

我尝试更改`"\\"`为，`"\\\\"`因为我在某个论坛上发现了一条消息，该消息解决了类似的问题，但这对我没有任何好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:20:47.447

好的，这就是我到目前为止所得到的，您正在调用交换服务，但是您现在使用的是基本身份验证方法，您需要的是 NTML 身份验证，我不知道为什么这适用于 j6 而不是 j7 ，但我认为客户端正在根据服务的 wsdl 解析您的请求，该服务可能定义它是一个交换服务，并且可能 j7 具有用于 NTML 身份验证的特定身份验证器，但同样，这是一个很长的镜头，我假设许多事。

**[（ Marcel Levy](https://stackoverflow.com/a/5994706/1660087)的所有学分）**

首先，创建一个身份验证器：

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;

public class NtlmAuthenticator extends Authenticator {

  private final String username;
  private final char[] password;

  public NtlmAuthenticator(final String username, final String password) {
    super();
    this.username = new String(username);
    this.password = password.toCharArray(); 
  }

  @Override
  public PasswordAuthentication getPasswordAuthentication() {
    return (new PasswordAuthentication (username, password));
  }
} 
```

在您的应用程序中，将身份验证器设置为默认值：

```
String username = "DOMAIN\\USERNAME";
String password = "PASSWORD"

NtlmAuthenticator authenticator = new NtlmAuthenticator(username, password);
Authenticator.setDefault(authenticator); 
```

你可能试过这个，如果是这样，请忽略这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T14:35:23.140

它似乎在 1.7.0u10 或更高版本中工作。

我只能猜测这是因为该版本中已修复的[错误 8003948](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8003948)。

# cocos2d-x - cocos2d-x：JPG图像变暗

> ID：13254446
> 
> 赞同：0
> 
> 时间：2012-11-06T15:41:45.323
> 
> 标签：cocos2d-x

我在游戏中使用 JPG 图片作为背景图片以减小尺寸。它在 >iOS 5 中运行良好。但在 iOS 4.3.3 中它变暗了。如果有人能准确解释为什么会发生这个问题以及如何解决这个问题，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:19:02.140

可以在[此处](http://www.cocos2d-x.org/boards/6/topics/17929?r=17955)找到此问题的解决方案。同时我们应该记住另一件事，“JPG 格式比 PNG 格式需要更长的时间来加载”

# c# - C# 动态创建的下拉列表在 FormView 更新后没有绑定

> ID：13254452
> 
> 赞同：0
> 
> 时间：2012-11-06T15:42:02.293
> 
> 标签：c#, formview, html.dropdownlistfor

更新 sqldatasource 或更改 FormView 模式后，我无法填充下拉列表。下拉列表是从后面代码中的数组创建的。我将在下面发布代码片段。在这些事件之前，下拉列表会按预期绑定。

任何关于为什么这不起作用的帮助都会很棒。

```
<asp:FormView ID="FormView1" runat="server" DataKeyNames="ID" DataSourceID="tbl_PreRegistration"
    Width="100%" CssClass="c2wForm" DefaultMode="Edit">
<EditItemTemplate>
    <asp:DropDownList ID="stateDDL" runat="server" OnSelectedIndexChanged="State_DDL_SelectedIndexChanged"
                                CausesValidation="false" AutoPostBack="true">
                            </asp:DropDownList>
<asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" CommandName="Update"
            Text="Update" CssClass="button blue" />
        &nbsp;<asp:LinkButton ID="btnReset" runat="server" CausesValidation="False"
             Text="Cancel" CssClass="button white" OnClick="btnReset1_Click" />
             </ContentTemplate></asp:UpdatePanel>
    </EditItemTemplate>
</asp:FormView> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {      

        if (!IsPostBack)
        {
            populateStateDDL("stateDDL", "CA");
        }
    }

protected void populateStateDDL(string DDL_ID, string getCurrentValue)
    {
        DropDownList strDDL_ID = (DropDownList)FormView1.FindControl(DDL_ID);
        ArrayList states = new ArrayList();

        strDDL_ID.DataValueField = "Value";
        strDDL_ID.DataTextField = "Text";
        strDDL_ID.DataSource = formating.GetAllStates();
        strDDL_ID.DataBind();
        strDDL_ID.SelectedValue = getCurrentValue.ToUpper();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:19:48.917

您需要每次都创建控件，而不仅仅是在 postback = false 时。控件应该在 Init 事件中呈现，以便它可以连接到视图状态和所有其他 webforms 的东西。

这是一些伪代码

```
private DropDownList ctrl;

protected override void Init(EventArgs e)
{
      base.Init(e);

      ctrl = new DropDownList
              {
                   Id = "name of control",
                   DataValueField = "Value", 
                   DataTextField = "Text"
              };

      Controls.Add(ctrl);
}

protected override void Load(EventArgs e)
{
      base.Load(e);

      if(ispostback) return;

      ctrl.DataSource = GetData();

      DataBind();
} 
```

# php - 如何使用 PHP 和 jquery 将 JSON 转换为对象文字

> ID：13254459
> 
> 赞同：0
> 
> 时间：2012-11-06T15:42:39.467
> 
> 标签：php, javascript, jquery

有没有一种简洁的方法可以将 XML 提要转换为 JavaScript 对象文字？

我有这个 XML 提要

```
<jobs>
    <industry>
        <name>Technology</name>
        <area>Refrigiration</area>
        <area>Information Technology</area>
        <area>Electronics</area>
        <area>Avionics</area>
    </industry>

    <industry>
        <name>Agriculture</name>
        <area>Agri-Tourism</area>
        <area>Animal Husbandry</area>
        <area>Harvesting</area>
        <area>Poultry</area>
    </industry>
</jobs> 
```

并希望将其转换为：

```
var jobs = [
    {
        "name"  : "Technology",
        "areas" : [ "Refrigiration" , "Information Technology", "Electronics", "Avionics" ]
    },

    {
        "name"  : "Agriculture",
        "areas" : [ "Agri-Tourism" , "Animal Husbandry", "Harvesting", "Poultry" ]      
    },

    {
        "name"  : "Media",
        "areas" : [ "Journalism" , "Camera person", "Reality tv person", "Commentator" ]        
    }       
]; 
```

我成功地使用 php 对 JSON 对象进行了编码。我缺少的是其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:47:45.047

两种解决方案：

**纯查询**

使用[jQuery 的 parseXML](http://api.jquery.com/jQuery.parseXML/)，结合[jQuery get](http://api.jquery.com/jQuery.get/)你可以得到你需要的对象：

```
$.get("http://www.example.com/path/to/file.xml", function(data){
   var xml = $.parseXML(data);
   console.log(xml);
}); 
```

**PHP+JQUERY**

如果您已经将对象解析为 json，只需将其打印到 html 文件中并使用[jquery 的 getJSON获取该文件](http://api.jquery.com/jQuery.parseJSON/)

```
$.getJSON("http://www.example.com/json/feed",function(data){
   console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:49:30.540

如果您在 javascript 回调中接收到 JSON 编码的字符串，您可能需要运行 $.parseJSON() 以使 jQuery 将其视为 JSON 对象而不是字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:45:33.040

```
echo json_encode(simplexml_load_string("<jobs>
    <industry>
        <name>Technology</name>
        <area>Refrigiration</area>
        <area>Information Technology</area>
        <area>Electronics</area>
        <area>Avionics</area>
    </industry>

    <industry>
        <name>Agriculture</name>
        <area>Agri-Tourism</area>
        <area>Animal Husbandry</area>
        <area>Harvesting</area>
        <area>Poultry</area>
    </industry>
</jobs>")); 
```

这给了你：

```
{
    "industry": [
        {
            "name": "Technology",
            "area": [
                "Refrigiration",
                "Information Technology",
                "Electronics",
                "Avionics"
            ]
        },
        {
            "name": "Agriculture",
            "area": [
                "Agri-Tourism",
                "Animal Husbandry",
                "Harvesting",
                "Poultry"
            ]
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:45:50.183

您需要将 XML 转换为数组，[https://stackoverflow.com/questions/4844476/xml-to-php-array](https://stackoverflow.com/questions/4844476/xml-to-php-array)

然后你需要使用 php json_encode() 将数组转换为 json

# jquery - 使下一个 contenteditable 元素可编辑

> ID：13254460
> 
> 赞同：2
> 
> 时间：2012-11-06T15:42:47.240
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, html, contenteditable

我有以下结构

```
<div>
<ul id='t1'>
  <li id='l1' contenteditable='true' class='editable'> Lorem ipsum </li>
  <li id='l2' contenteditable='true' class='editable'> Lorem ipsum </li>
  <li id='l3' contenteditable='true' class='editable'> Lorem ipsum </li>
</ul>
</div> 
```

我在这里想要的是当用户编辑说 li l3 并且当他按 Enter 键时，我想添加新的 li，其中 contenteditable = true 并在新的 li 上设置焦点，以便用户可以开始在那里输入。我能够在输入时添加一个新条目，但无法将焦点放在它上面。

**更新**

```
 if(e.keyCode == 13){//enter Key or tab key 9
    e.preventDefault();
    var taskId = this.id;
    jQuery.ajax({
        url : 'update_current',
        type : 'put',
        success : function(resp){ //resp is the new li tag
          var li =  this_is_current_elemtn;
          jQuery(li).append(resp);

          //$('#t1 .editable').each(function(){
            // $(this).attr('editable', 'false');
          //});
          console.log(jQuery(li).next());

           jQuery(li).next().focus();
         // $('#t1 .editable').each(function(){
         //    $(this).attr('contentEditable', 'true');
         // });
        }
    }); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T15:02:29.363

我知道这有点晚了，但无论如何，如果你将 contenteditable='true' 添加到父 ol 或 ul，它就可以了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:53:00.980

试试这个：http: [//jsfiddle.net/t7GJc/](http://jsfiddle.net/t7GJc/)

```
$('#t1').on('keydown', 'li', function(e){
    var c = e.which || e.keyCode;
    if(c === 13){
        e.preventDefault();                    
        if($(this).is($('#t1 li:last'))){
            $(this).after($('<li id="l'+($('#t1 li').length + 1)+'" contenteditable="true"/>'));
        }
        $(this).next().focus();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:59:12.410

[jsfiddle](http://jsfiddle.net/WUExt/1/)

```
 $("ul").on("keyup", "li",function(e){
    if(e.keyCode == 13){
     var elem = $( "<li contenteditable='true'> Lorem ipsum </li>").appendTo ($(this).parent());
         elem.focus();
}
        return false;

    });​ 
```

# iphone - glReadPixels 在 iPhone 上不起作用

> ID：13254462
> 
> 赞同：0
> 
> 时间：2012-11-06T15:42:50.247
> 
> 标签：iphone, objective-c, c, opengl-es, glreadpixels

我正在尝试在 iPhone 上截取 GLView 的屏幕截图。我写了以下代码：

```
[self setContext];

GLint backWidth, backHeight;

glGetRenderbufferParameterivOES( GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backWidth );
glGetRenderbufferParameterivOES( GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backHeight );

int         dataLength  = backWidth * backHeight * 4;
uint32_t*   pData       = (uint32_t*)malloc( dataLength * sizeof( char ) );
memset( pData, 0xff, dataLength ); // This is here to confirm some writing occurs in glReadPixels

// Read pixel data from the framebuffer
//glPixelStorei( GL_PACK_ALIGNMENT, 4 );
glReadPixels( 0, 0, backWidth, backHeight, GL_RGBA, GL_UNSIGNED_BYTE, pData );
fprintf( stderr, "%d\n", glGetError() );

CGDataProviderRef   cgDataProvider  = CGDataProviderCreateWithData( NULL, pData, dataLength, DataProviderReleaseDataCallback );
CGColorSpaceRef     cgColorSpace    = CGColorSpaceCreateDeviceRGB();
CGImageRef          cgImage         = CGImageCreate(    backWidth, backHeight, 8, 32, backWidth * 4, cgColorSpace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                                        cgDataProvider, NULL, true, kCGRenderingIntentDefault );

//NSData*       pNSData         = [[NSData alloc] initWithBytes: pData length: dataLength];
UIImage*    pRetImage       = [UIImage imageWithCGImage: cgImage scale: 1.0f orientation: UIImageOrientationDownMirrored];
CFRelease( cgDataProvider );
CFRelease( cgColorSpace );
CGImageRelease( cgImage );
//free( pData );

return pRetImage; 
```

在模拟器中完美运行。不幸的是，当我尝试在 iPhone 4S glReadPixels 上运行它时，什么也没做。我故意将数组设置为 0xff 以查看是否可以查看它是否在做任何事情，而我将数组设置为什么也没关系 glReadPixels 什么都不做。它也不会报告任何错误。

除非 iPhone 为我进行设置，否则我不会使用多重采样缓冲区。

```
glGenRenderbuffers( 1, &mGlRenderBuffer );
glBindRenderbuffer( GL_RENDERBUFFER, mGlRenderBuffer );

[mGlContext renderbufferStorage: GL_RENDERBUFFER fromDrawable: mGlLayer];

GLuint frameBuffer;
glGenFramebuffers( 1, &frameBuffer );
glBindFramebuffer( GL_FRAMEBUFFER, frameBuffer );
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, mGlRenderBuffer ); 
```

有没有人知道发生了什么？它让我发疯:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:06:04.880

原来是 iOS6 对设置 kEAGLDrawablePropertyRetainedBacking 有点挑剔...

```
eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:YES],
                                    kEAGLDrawablePropertyRetainedBacking,
                                    kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                                    nil]; 
```

看[这里](https://stackoverflow.com/a/12887681/131140)

# database - 使用点分隔符在访问文本文件时导出数据

> ID：13254467
> 
> 赞同：1
> 
> 时间：2012-11-06T15:43:06.160
> 
> 标签：database, export, specifications

我正在使用 Access 2007，我希望能够将我的数据导出到文本文件，同时具有允许我使用“。”的导出规范。而不是逗号或给我的其他默认字符。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:28:14.713

here's one way of doing it:

1.  select the table/query you want to export on the navigation pane
2.  right-click your table/query and select "Export" > "Text File" (or click the "Text File" button on the "Export" section of the "External Data" tab of the ribbon.
3.  choose a location to save the text file and click the "OK" button
4.  on the next screen of the wizard dialog box, select "Delimited" and click the "Next" button
5.  choose "Other" as your delimiter and type a dot into the box next to it
6.  choose a text qualifier from the dropdown if you want text fields to be quoted in your output
7.  check the "Include Field Names on First Row" box if you like
8.  click the "Advanced" button for more options
9.  change the "Decimal Symbol" option to something other than a dot. (this is necessary because your output field delimiter cannot match your decimal symbol or else the export operation will fail.)
10.  click the "OK" button
11.  click the "Finish" button

that should handle it. i'm assuming that there are no decimal numbers or dots in any of your text fields, or else you'll have problems parsing the output...

# ios - 如何使具有视差滚动的单页网站同时适用于桌面和移动设备（也包括 iOS）？

> ID：13254474
> 
> 赞同：-2
> 
> 时间：2012-11-06T15:43:33.977
> 
> 标签：ios, mobile, scroll, desktop, parallax

如何使具有**视差**滚动的单页网站同时适用于*桌面*和*移动*设备（还有**iOS**）？

这是我现在的代码......它在触发滚动时加速 1 div，但在 iphone 上，它仅在您将手指从屏幕上移开时才会移动，我希望它通过漂亮的幻灯片滚动更顺畅:)

```
$(function(){
  $(window).scroll(function(){
    var top = $(this).scrollTop();

    $('#speedup').css('margin-top', (top/10)*-5);      

  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:05:02.523

首先，您必须使用 css2 媒体查询，或者为您的 css 样式使用 em 而不是 px，以确保您的浏览器同时支持移动/桌面网络版本。

然后，当然你需要 javascript 来帮助你为你的网页游戏/应用程序做视差滚动

# c++ - std::for_each signature and type specifications of parameters

> ID：13254475
> 
> 赞同：0
> 
> 时间：2012-11-06T15:43:39.467
> 
> 标签：c++

Please explain how someone should reason to deduce the type specifications of the _Func parameter of std::for_each?

Motivation behind the questions is to understand the type requirements from method signature.

```
template<class _InIt, class _Fn1> inline
_Fn1 for_each(_InIt _First, _InIt _Last, _Fn1 _Func) {
    _DEBUG_RANGE(_First, _Last);
    _DEBUG_POINTER(_Func);
    _For_each(_Unchecked(_First), _Unchecked(_Last), _Func);

    return (_STD move(_Func));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:52:14.263

This particular signature doesn't say anything about types at all. It's a template which will accept 3 arguments, 2of them being of the same type.

To see what restrictions are imposed on the types of input arguments you should read the implementation of `_For_each`, which I bet in turn will have two dozens of specialisations and delegations.

Reading STL source code is a sheer nightmare.

So, as suggsted in comments, give it up and go read the documentation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:52:39.610

Take a look at some documentation, and see the samples.

[http://msdn.microsoft.com/en-us/library/e5sk9w9k(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/e5sk9w9k(v=vs.100).aspx)

Essentially, your predicate function should accept a parameter that is the same type as the `container::value_type`.

```
std::vector<int> myNumbers;
std::for_each(std::begin(myNumbers), std::end(myNumbers), [](const int number)
{
    // Do something with the number
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:57:49.003

This is the implementation of `std::for_each` from [libcxx](https://github.com/llvm-mirror/libcxx/blob/master/include/algorithm#L788).

```
template <class _InputIterator, class _Function>
inline _Function
for_each(_InputIterator __first, _InputIterator __last, _Function __f)
{
    for (; __first != __last; ++__first)
        __f(*__first);
    return _VSTD::move(__f);
} 
```

Here's it fairly clear what the "contract" is for `_Function`. However, this is merely one implementation, and other implementations could more closely follow the standard, or allow other things to work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:01:51.560

Basically, `std::for_each` does this:

```
_Fn1 for_each(_InIt _First, _InIt _Last, _Fn1 _Func)
{
  for (; _First < _Last; ++_First)
    _Func(*_First);

  return _Func;
} 
```

So, as you can see, `_Func` is a function that takes a `*_InIt` and returns nothing (in fact, it can return whatever, but the return value is discarded). So `_Fn1` can be either a pointer to a function taking a `*_InIt` or a functor whose operator `()` takes a `*_InIt`.

Even though the return value of the function, if any, is discarded, if `_Fn1` is actually a functor it can have internal state that you can check after executing `std::for_each`. That's the reason why this algorithm returns `_Fn1`.

# php - 从本地网站执行 .exe 文件

> ID：13254477
> 
> 赞同：0
> 
> 时间：2012-11-06T15:43:43.537
> 
> 标签：php, html

我正在用 html/php 制作一个应用程序，作为我工作的露营客户的信息（触摸）面板。该网站将仅托管在本地计算机上，无法通过 XAMPP for windows 访问它（计算机运行 windows XP）

所以我需要添加一个按钮来打开一个外部应用程序，允许客户打开他们露营场地的电源。然后他们可以关闭外部应用程序，他们将被重新调整到在​​全屏模式下在后台运行的网站（网络应用程序或任何你想调用的东西）（你知道，当你在浏览器中按 F11 时）

这是可能吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:45:21.130

您可以使用`exec`，它将在 cmd 中运行命令。

因此，如果您的文件位于 c:，您只需运行`C:\file.exe`

阅读更多关于[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:48:38.790

利用`exec`

[文档](http://php.net/manual/en/function.exec.php)中的示例：

```
<?php
// outputs the username that owns the running php/httpd process
// (on a system with the "whoami" executable in the path)
echo exec('whoami');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:18:04.563

[是的 exec](http://uk1.php.net/manual/en/function.exec.php)是您需要查看的内容。

# google-bigquery - 如何配置 Google BigQuery 命令行工具以使用服务帐户？

> ID：13254479
> 
> 赞同：14
> 
> 时间：2012-11-06T15:43:47.127
> 
> 标签：google-bigquery

我使用 Google API 控制台创建了一个服务帐户，并希望将此服务帐户与[Google BigQuery CLI](http://developers.google.com/bigquery/docs/cli_tool) (bq) 工具一起使用。

我一直在使用命令行工具使用 ~/.bigquery.v2.token 中的有效 OAuth2 凭据成功访问 BigQuery 服务，但是我似乎找不到任何有关如何修改此文件（或以其他方式配置该工具）改为使用服务帐户。

这是我当前的 .bigquery.v2.token 文件

```
{
    "_module": "oauth2client.client",
    "_class": "OAuth2Credentials",
    "access_token": "--my-access-token--",
    "token_uri": "https://accounts.google.com/o/oauth2/token",
    "invalid": false,
    "client_id": "--my-client-id--.apps.googleusercontent.com",
    "id_token": null,
    "client_secret": "--my-client-secret--",
    "token_expiry": "2012-11-06T15:57:12Z",
    "refresh_token": "--my-refresh-token--",
    "user_agent": "bq/2.0"
} 
```

我的另一个文件：~/.bigqueryrc 通常如下所示：

```
project_id = --my-project-id--
credential_file = ~/.bigquery.v2.token 
```

我尝试将 credential_file 参数设置为我的服务帐户的 .p12 私钥文件，但没有运气，它给了我以下错误

```
******************************************************************
** No OAuth2 credentials found, beginning authorization process **
****************************************************************** 
```

并要求我转到浏览器中的链接以再次设置我的 OAuth2 凭据。

命令行工具的初始配置选项“init”：

```
bq help init 
```

没有显示有关如何设置此工具以使用服务帐户的有用信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T16:30:35.537

我最终找到了一些关于如何设置的文档

```
$ bq --help

....

--service_account: Use this service account email address for authorization. For example, 1234567890@developer.gserviceaccount.com.
(default: '')

--service_account_credential_file: File to be used as a credential store for service accounts. Must be set if using a service account.

--service_account_private_key_file: Filename that contains the service account private key. Required if --service_account is specified.
(default: '')

--service_account_private_key_password: Password for private key. This password must match the password you set on the key when you created it in the Google APIs Console. Defaults to the default Google APIs Console private key password.
(default: 'notasecret')

.... 
```

您可以在每个 bq（bigquery 命令行客户端）请求上专门设置这些，即：

```
$ bq --service_account --my-client-id--.apps.googleusercontent.com -- service_account_private_key_file ~/.bigquery.v2.p12 ... [command] 
```

或者您可以像这样在 ~/.bigqueryrc 文件中设置默认值

```
project_id = --my-project-id--
service_account = --my-client-id--@developer.gserviceaccount.com
service_account_credential_file = /home/james/.bigquery.v2.cred
service_account_private_key_file = /home/james/.bigquery.v2.p12 
```

服务帐户可以在 Google API 控制台中找到，并且您在创建服务帐户时设置了 service_account_private_key_password（默认为“notasecret”）。

**注意：** .bigqueryrc 中的文件路径必须是完整路径，我无法使用 ~/.bigquery...

需要一些额外的依赖项，您需要通过 yum/apt-get 安装 openssl

```
--yum--
$ yum install openssl-devel libssl-devel

--or apt-get--
$ apt-get install libssl-dev 
```

和 pyopenssl 通过简单的安装/pip

```
--easy install--
$ easy_install pyopenssl

--or pip--
$ pip install pyopenssl 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-11T21:01:03.347

现在不推荐使用 bq 授权标志

[bq 文档](https://cloud.google.com/bigquery/docs/reference/bq-cli-reference)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-28T19:19:30.567

**[1.) 告诉 gcloud 以您的服务帐户身份进行身份验证](https://cloud.google.com/sdk/gcloud/reference/auth/activate-service-account)**

```
gcloud auth activate-service-account \
test-service-account@google.com \
--key-file=/path/key.json \
--project=testproject 
```

**[2.) 像使用用户帐户一样运行 bq 命令](https://cloud.google.com/bigquery/docs/reference/bq-cli-reference)**

```
# ex: bq query
bq query --use_legacy_sql=false 'SELECT CURRENT_DATE()' 
```

**[3\. 可选）将 gcloud 身份验证恢复为您的用户帐户](https://cloud.google.com/sdk/gcloud/reference/config/set)**

```
gcloud config set account you@google.com 
```

**[3a。可选）查看 gcloud 使用谁进行身份验证](https://cloud.google.com/sdk/gcloud/reference/auth/list)**

```
gcloud auth list 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-23T01:51:40.493

bq 工具需要两个配置文件，由 --bigqueryrc 和 --credential_file 标志控制。如果两者都没有找到，bq 将在启动期间尝试自动初始化。

为避免 --bigqueryrc 文件出现这种情况，您可以将“.bigqueryrc”文件放置在默认位置，或使用 --bigqueryrc 将其覆盖到某个可写文件路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T06:42:02.997

对于其他任何努力使用 bq 和服务帐户的人......我很难使用gitlab-ci 上的[Google Cloud SDK docker 图像在 CI/CD 管道内工作。](https://hub.docker.com/r/google/cloud-sdk/)原来对我来说缺少的一点是确保设置默认项目。在我的笔记本电脑上，gcloud 很高兴从服务帐户推断出默认项目，但由于某种原因，docker 映像中的版本默认为公共免费项目。

```
- gcloud auth activate-service-account --key-file=${PATH_TO_SVC_ACCT_JSON};
- gcloud config set project ${GOOGLE_BIGQUERY_PROJECT} 
```

在此之后，我能够将该`bq`实用程序用作服务帐户。我想在 .bigqueryrc 文件中设置默认项目也可以解决问题，这就是 OP 没有遇到这个问题的原因。

# mysql - 如何安全地让用户在 MySQL 和 PDO 中构建 WHERE 子句？

> ID：13254480
> 
> 赞同：1
> 
> 时间：2012-11-06T15:43:55.487
> 
> 标签：mysql, pdo, sql-injection

如果您有复杂的、用户指定的 WHERE 子句并且您想使用 PDO 和 MySQL，那么最佳实践是什么？

我的用户需要能够为他们正在查询的表的一个或多个列指定一个或多个选择标准。在 PHP 端的 case 语句中有太多可能的组合无法预料。另一方面，允许他们直接输入标准会破坏参数化查询应该提供的针对 SQL 注入攻击的保护。

我正在尝试完全按照这个人所做的事情：

[如何使用多个 WHERE 子句执行 MySQL 查询？](https://stackoverflow.com/questions/5093123/how-can-execute-a-mysql-query-with-multiple-where-clauses)

...除了我想成为一个优秀的小 codemonkey 并使用 PDO 而不是 php_mysql，并且不依赖字符串清理，除非这真的是人们在这种情况下所做的。

哦，还有一件事：

我想我可以将每个用户提供的标准作为一个`[column, operator, value]`数组（例如`[ "age", ">", "30" ]`）传递。我可以验证该数组的前两个元素分别与有效的列名和运算符名完全匹配，将最后一个元素强制为一个数字，然后将它们附加到 PHP 脚本中包含 WHERE 子句的字符串中。但是像这样的标准`["fullname","like","M_rty M%cFly"]`呢？现在我又开始清理用户创建的字符串了，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:25:09.800

> 但是像这样的标准`["fullname","like","M_rty M%cFly"]`呢？

对于列名和运算符（包括`LIKE`），使用白名单来验证它们。如果用户输入与已知的有效选择不匹配，请不要使用该输入。

对于任何文字字符串值，例如“M_rty M%cFly”，使用查询参数。数字或日期文字相同。查询参数最适合在 SQL 表达式中应被视为文字值的任何动态内容。

对值使用查询参数，对其他情况使用白名单。

# c - 为什么我在 StartService 上收到错误代码 6？

> ID：13254487
> 
> 赞同：6
> 
> 时间：2012-11-06T15:44:17.020
> 
> 标签：c, windows, winapi, wdk

出于我的目的，我需要为 Windows 编写一个内核模式驱动程序。目前我正试图让它在 Windows 7 x64 下工作。

我在 Visual Studio 2012 中使用 KMDF 驱动程序的默认代码创建了一个简单的项目。我编译了带有测试签名的代码。驱动程序已编译和签名。我还启用了测试签名，清楚地显示在我的桌面左下角。

在尝试将驱动程序作为服务启动时，我总是收到错误代码 6：无效句柄错误。（我已经简化了代码，只是尝试启动它，但仍然没有工作；默认代码也没有工作）

基本上，我遇到的问题与此处提出的问题相同

[https://stackoverflow.com/questions/12080157/startservice-error-6](https://stackoverflow.com/questions/12080157/startservice-error-6)

不幸的是，他从未得到答复。我尝试了提供的解决方案，但它也没有帮助。

我试图启动驱动程序的代码是

```
int _cdecl main(void)
{
    HANDLE hSCManager;
    HANDLE hService;
    SERVICE_STATUS ss;

    hSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);

    printf("Load Driver\n");

    if(hSCManager)
    {
        printf("Create Service\n");

        hService = CreateService(hSCManager, "Example", 
                             "Example Driver", 
                              SERVICE_ALL_ACCESS | SERVICE_START | DELETE | SERVICE_STOP , 
                              SERVICE_KERNEL_DRIVER,
                              SERVICE_DEMAND_START, 
                              SERVICE_ERROR_IGNORE, 
                              "\\path\\to\\driver\\KMDFDriver1.sys", 
                              NULL, NULL, NULL, NULL, NULL);

        if(!hService)
        {
            hService = OpenService(hSCManager, "Example", 
                   SERVICE_ALL_ACCESS | SERVICE_START | DELETE | SERVICE_STOP);

            if(!hService)
            {
                // If initial startup of the driver failed, it will fail here.
                process_error();
                return 0;
            }
        }

        if(hService)
        {
            printf("Start Service\n");

            if(StartService(hService, 0, NULL) == 0)
            {
              // Start service ALWAYS returns 0\. Only when executed for the first time. Next time it fails on OpenService.
                process_error();
                printf("Did not start!\n");
            }
            printf("Press Enter to close service\r\n");
            getchar();
            ControlService(hService, SERVICE_CONTROL_STOP, &ss);
            DeleteService(hService);
            CloseServiceHandle(hService);   
        }

        CloseServiceHandle(hSCManager);
    }

    return 0;
} 
```

这是驱动程序代码

```
DRIVER_INITIALIZE DriverEntry;
#ifdef ALLOC_PRAGMA
#pragma alloc_text (INIT, DriverEntry)
#endif

NTSTATUS
DriverEntry(
    _In_ PDRIVER_OBJECT  DriverObject,
    _In_ PUNICODE_STRING RegistryPath
    )
{

    WDF_DRIVER_CONFIG config;
    NTSTATUS status;

    DbgPrint("Hello World!\n");
    WDF_DRIVER_CONFIG_INIT(&config,
                       NULL
                       );

    config.DriverInitFlags = WdfDriverInitNonPnpDriver;

    status = WdfDriverCreate(DriverObject,
                         RegistryPath,
                         WDF_NO_OBJECT_ATTRIBUTES,
                         &config,
                         WDF_NO_HANDLE
                         );

    if (!NT_SUCCESS(status)) {
        KdPrint( ("WdfDriverCreate failed with "
              "status 0x%x\n", status));
    }

    return status;
} 
```

该函数`process_error()`是一个包装器`GetLastError()`，除了提供数值外，它还显示错误代码的文本版本。我已经用尽了提供给我的所有选项来解决这个问题。谷歌搜索仅显示此问题的一次出现，并在此处提出了该问题。

问题可能是什么？

额外说明：驱动是用 Visual Studio 2012 Ultimate 编译的，而我的启动代码是用 MinGW-W64（使用 GCC）编译的。但是启动代码不应该像驱动程序那么重要。

附注2：想了半天我开始想是不是test-sign证书的问题，因为我尝试了MSDN提供的驱动源码，编译成功后还是出现ERROR_INVALID_HANDLE(Error Code 6)的时候试图启动它。我还没有找到解决办法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-16T22:15:02.480

我将此追踪到驱动程序的项目设置。项目中缺少 KMDF 版本。

调整以下（在驱动程序模型设置下）：
  - KMDF 主要版本 = 1
  - KMDF 次要版本 = 9

点击 OK，重新编译并重新安装。为我工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:22:34.680

一些想法：

您正在使用 HANDLE hSCManager && HANDLE hService，它们应该被声明为 SC_HANDLE

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682450(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682450(v=vs.85).aspx)

" **lpBinaryPathName [in, optional] 服务二进制文件的完全限定路径。如果路径包含空格，则必须用引号引起来以便正确解释。例如，“d:\my share\myservice.exe”应该指定为 "\"d:\my share\myservice.exe\""。**

尝试使用驱动程序的完整路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-31T05:09:24.593

以管理员权限运行 Visual Studio

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T09:48:46.240

我在启动内核驱动程序时遇到了同样的问题：

* * *

启动服务失败 6：

## 句柄无效

结果发现驱动程序的“classID GUID”与另一个相同（通过设备管理器发现，查看事件显示不同的驱动程序名称）。

使用在线生成器创建一个新的 GUID 并替换项目的 .inf 文件中的那个（在 VS 中，不是任何文本编辑器或一些）。在目标机器上重建和部署后，一切正常。

希望这可以帮助...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-06T19:23:21.390

您的调用`OpenSCManager()`只是请求`SC_MANAGER_CREATE_SERVICE`其本身的许可，这不足以`OpenService()`或`StartService()`成功。

# android - 如何在 XML 中使用转义字符

> ID：13254489
> 
> 赞同：0
> 
> 时间：2012-11-06T15:44:23.397
> 
> 标签：android, xml

如何在 XML 中使用转义字符？

情况是，我是一个新的 android 开发人员，我需要一个需要打印成 2 行的字符串（否则没有空格）。此字符串位于**string.xml**文件中。我需要使用**/n**换行符来打破字符串，但我不知道如何在 XML 文件中执行此操作。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:48:35.417

我不熟悉 Android 开发，但您检查过 CDATA 吗？请参阅[此链接](http://www.w3schools.com/xml/xml_cdata.asp)。

基本上，你像这样包装你的字符串值：

```
<![CDATA[string value]]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:48:48.380

您可以使用双引号：

```
<string name="mystring">"One line\nAnother line"</string> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:49:08.443

您可以使用字符实体`&#xA;`来指示换行符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:51:08.350

请参阅参考[http://developer.android.com/guide/topics/resources/string-resource.html#String](http://developer.android.com/guide/topics/resources/string-resource.html#String)

换行符是 \n

/n - 错误。你可以像这样用xml编写它。

例子：

```
 <string name="multiline_text">line 1.\nline2.</string> 
```

# z3 - Z3的.datalog输入格式查询

> ID：13254491
> 
> 赞同：2
> 
> 时间：2012-11-06T15:44:28.157
> 
> 标签：z3

Bddbddb 支持 "Gt("a", "d")?" 形式的查询。我将此查询添加到“基本数据记录”部分下的定点 Z3 文档中给出的示例数据记录程序的末尾，并运行了 bddbddb 和 Z3。Z3 似乎不支持这种语法。Z3的“.datalog”输入格式是否有另一种语法查询？

# ssis - 为什么即使用户属于本地管理员组，我也会收到拒绝访问错误？

> ID：13254492
> 
> 赞同：7
> 
> 时间：2012-11-06T15:44:33.367
> 
> 标签：ssis, sql-server-2012

环境 SQL Server 2012 on Windows Server 2008 R2 开发环境。

安装数据库、SSRS、SSAS (OLAP) 和表格（单独实例）和 SSIS 后，一切都很好并且可以访问。

几周后，一位高级用户（具有本地管理员权限）报告说，他在尝试登录 SSIS 时收到了“拒绝访问”消息。这几乎与日志挂载点填满同时发生。我立即缩小了日志并解决了日志填充背后的问题，但是在尝试登录 SSIS 时我也收到了相同的消息。

解决此问题的常见端点是 URL[**连接到远程集成服务服务器（SSIS 服务）**](http://msdn.microsoft.com/en-us/library/aa337083.aspx)，它是将任何非本地管理员添加到 DCOM 用户组。但由于这个用户和我都是本地管理员组的成员，这不是一个解决方案。另一个具有本地管理员权限的高级用户在问题之前工作得很好，但之后就不行了。

我执行了标准重启无济于事，然后卸载/重新安装 SSIS，再次无济于事。我的下一个选择是重新安装 SQL Server。虽然这是一种可能性，但如果问题再次发生，它不会减轻必须重新做一遍。

有没有人遇到过这个问题或者你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:00:32.487

这几乎肯定是一个**DCOM**问题。如果您想通过注册表解决这些问题，则键如下： 抱歉，我不知道 GUID。

```
HKEY_CLASSES_ROOT\AppID\{GUID}\AccessPermission
HKEY_CLASSES_ROOT\AppID\{GUID}\AuthenticationLevel
HKEY_CLASSES_ROOT\AppID\{GUID}\LaunchPermission 
```

# markdown - 如何在 multimarkdown 中创建 sql 注释？

> ID：13254494
> 
> 赞同：1
> 
> 时间：2012-11-06T15:44:46.813
> 
> 标签：markdown, multimarkdown

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:14:51.963

Your question is actually flawed in its premise --- there are no "fenced code blocks" in MultiMarkdown. So this is not a MultiMarkdown question, it's actually a Byword question, if that's where you're using it, or a question for whatever other markup language you are using.

MultiMarkdown itself does not convert dashes, or other characters like that, in code blocks or code spans.

```
Dashes aren't converted here --- see? 
```

`And they aren't converted here either --- see?`

(And yes, I realize that this site isn't actually using MMD, but the output would be the same.)

# log4net - 当 SmtpAppender 的 bufferSize 大于 1 时忽略 Log4Net LevelEvaluator

> ID：13254495
> 
> 赞同：11
> 
> 时间：2012-11-06T15:44:49.807
> 
> 标签：log4net, log4net-configuration

我已经使用 RollingLogFileAppender 和 SmtpAppender 配置了 log4net，目的是将 DEBUG 级别记录到 RollingLogFileAppender 并将 FATAL 仅记录到 SmtpAppender：

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="test@test.com" />
  <from value="test@test.com" />
  <subject value="Fatal Error" />
  <smtpHost value="smtp.test.com" />
  <SMTPPort value="366"/>
  <Username value="test@test.com"/>
  <Password value="password"/>      
  <bufferSize value="1" />
  <lossy value="true" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="FATAL"/>
  </evaluator>      
  <layout type="log4net.Layout.PatternLayout">
  <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline"                             />
  </layout>
</appender>

<root>
  <level value="DEBUG" />
  <appender-ref ref="RollingLogFileAppender" />
  <appender-ref ref="SmtpAppender" />
</root> 
```

在我增加 bufferSize 之前，这非常有效。当我这样做时，所有级别都通过电子邮件发送，并且 log4net.Core.LevelEvaluator 似乎被忽略了。我也尝试过使用 LevelRangeFilter 和 LevelMatchFilter 但是配置了这些我似乎根本没有收到任何电子邮件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T13:37:29.567

评估器不会被忽略，但它不会按照您的预期进行：您的设置指示附加程序将所有日志消息放在缓冲区中，并且仅在记录了 FATAL 级别的消息时才发送电子邮件。如果缓冲区已满，则最旧的消息将被丢弃（这是有损设置；没有它，您也会在缓冲区满时立即收到一封电子邮件）。

如果要过滤消息，则需要使用过滤器。例如像这样：

```
<filter type="log4net.Filter.LevelMatchFilter">
   <acceptOnMatch value="true" />
   <levelToMatch  value="FATAL" />
</filter>
<filter type="log4net.Filter.DenyAllFilter" /> 
```

我不确定我是否会考虑这样的邮件附加程序，因为如果我的应用程序有问题需要以 FATAL 级别记录它，我希望立即得到通知。

# c# - UIImage长度与图片长度

> ID：13254497
> 
> 赞同：2
> 
> 时间：2012-11-06T15:44:59.747
> 
> 标签：c#, xamarin.ios, uiimage, base64, jpeg

我正在尝试转换`UIImage`为`Base64`字符串，然后将其发送到 Web 服务 SOAP，然后发送到数据库。

所以，我用我的应用程序选择了一张图片，并尝试用这种方法转换它：

```
public static string GetBase64FromImage (UIImage picture_)
{
    if (picture_ == null)
        return string.Empty;

    NSData data = picture_.AsJPEG();
    Console.WriteLine("JPEG length: " + data.Length);

    byte[] byteArray = new byte[data.Length];
    System.Runtime.InteropServices.Marshal.Copy(data.Bytes, byteArray, 0, Convert.ToInt32(data.Length));
    string base64 = Convert.ToBase64String(byteArray);
    Console.WriteLine("Base64 length: "+base64.Length);

    return base64;
} 
```

我的意思是图片的总长度。如果我将图片保存在文件系统中并导入它，图片大小大约为 1 Mo。但是用我的方法，JPEG 是它的两倍（几乎 2Mo）。所以我的 Base64 转了 3 个月，这是巨大的。

为什么 JPEG 中的 NSData 大小是“正常”的两倍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:26:47.893

JPEG 是一种压缩数据格式。根据您保存图像的方式（到文件、流...），您可以获得不同的结果。

`AsJPEG()`有一个接受 a 的重载`float compressionQuality`。如果您不提供值，`1.0f`则将使用该值（默认情况下）。由于这会调用默认情况下[`UIImageJPEGRepresentation`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)您将获得**最少**的压缩（最好的图像但最大的尺寸）。OTOH，如果您提供`0.0`，您将获得**最大**压缩（最小尺寸）。

# c++ - MFC 应用程序中奇怪的控制显示损坏

> ID：13254500
> 
> 赞同：0
> 
> 时间：2012-11-06T15:45:12.380
> 
> 标签：c++, visual-studio-2010, mfc, corruption

我有一个奇怪的问题，我一直无法诊断，希望有人至少能指出我正确的方向。我有一个 C++ MFC 应用程序，它从各种来源收集数据并将其显示在屏幕上。然而，在随机间隔（通常大约 5-10 分钟）之后，显示器以我从未见过或能够追踪到的方式“损坏”，如下图所示（左边是正常的，右边是损坏的):

![显示损坏示例](../Images/bfbfa688e99a33d57a4840d32003fefc.png)

基本症状是：

*   向上/向下箭头图像变成“5”和“6”。
*   打开组合框列表只会显示项目文本（未显示列表边框和滚动条）。
*   某些控件上的背景颜色无法正确更新或显示。
*   Z-order 被破坏，应用程序控制通过放置在顶部的其他窗口“泄漏”。
*   在应用程序处于焦点时按 Print-Screen 不再将窗口捕获到剪贴板。
*   关闭和重新打开窗口什么都不做。
*   重新启动应用程序会使事情恢复正常。

我试图消除的可能原因包括：

*   **操作系统和计算机：**从 Windows 7-64 位到 Windows Xp-32 位的各种系统都存在同样的问题。
*   **多线程：**我添加了一个互斥锁以防止同时发生显示更新，但它没有效果（如预期的那样）。
*   **内存损坏：**这一直是我的假设，但根本没有内存损坏的迹象。基本显示代码已使用多年，没有类似问题以及基本网络消息库。
*   **特定代码：**我已将问题缩小到一个特定对话中的各种其他显示没有问题的对话。它们都使用相同的基本代码，这似乎表明问题在于对话框的特定显示代码。到目前为止，问题发生的具体方式或原因一直困扰着我。

关于原因可能是什么或如何缩小范围的任何想法都会很棒。

**更新 1：** 做一些更多的计时/可重复测试，看起来让这个对话框运行一会儿会导致问题。在问题出现之前，时间量始终在 300-400 秒之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:47:18.107

听起来您的应用程序可能正在泄漏 GDI 对象。要检查是否是这种情况，请打开您的任务管理器并启用该`GDI Objects`列。观察您的流程的数字，看看它是否在持续增加。

如果确实如此，您应该阅读[Detect and Plug GDI Leaks in Your Code with Two Powerful Tools for Windows XP](http://msdn.microsoft.com/en-us/magazine/cc188782.aspx)。该 MSDN 文章还提供了一个名为的工具`GDILeaks.exe`，可以帮助您识别 GDI 泄漏。

在这些症状在短时间内出现的情况下，应该是重复绘制的东西没有正确释放 GDI 资源。可能在 Windows 过程中（或在其中调用）（例如 OnPaint）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:08:47.793

如果我没记错的话，Windows 的 GUI 对这些小图标使用 ttf(?) 字体，看起来字体会以某种方式被破坏（使用字体句柄调用 DeleteObject？）

# ibm-midrange - SQLRPGLE 源大小限制

> ID：13254503
> 
> 赞同：3
> 
> 时间：2012-11-06T15:45:22.383
> 
> 标签：ibm-midrange, rpgle, rpg

SQL 预编译器可以为 SQLRPGLE 源对象处理的内容是否有限制？

我在编译 25,000 行程序时遇到了一些问题，而行数限制是唯一可以解释我遇到的错误的东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:06:52.527

一些想法...

1.  编译时遇到什么错误？25k 行程序可能导致 SQL 预编译出现问题的想法并非不可能……考虑到预编译器创建了一个新的源成员（在 QTEMP 中），该成员通过正常编译传递，并且这个新的源成员比原来的要大。早在我在 SSA 工作时，我们遇到了用 AS/SET 编写的~~问题~~（弗洛伊德滑倒）*程序*，导致编译器在它生成的源成员的大小上窒息。我不记得有限制。
2.  一个 25k 行的程序非常庞大……仔细查看程序并查看它是否可以分解为绑定在一起成为程序对象的逻辑模块可能不是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:39:27.233

正如@WarrenT 所说，告诉我们这些消息是什么。

我们确实有超过 25k 行的 SQLRPGLE 源代码并且编译得很好。如果使用 RPG IV，则没有限制（据我所知）。仅当使用 SEU 编辑器时才限制 32k 左右的行数。如果我没记错的话，RPG III 和更早的版本确实有一些限制。

如果您的代码大于 32k，请使用 Websphere RSE（远程系统资源管理器或现在的任何名称）。

同意@david 和其他人的观点——25k 是巨大的。我们通常不会编写大量代码，我们拥有的代码来自第三方，使用 AS/SET 等工具编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:39:56.763

我见过一个大约有 40k 行的程序。编译器对此大小没有问题，但您无法在 SEU 中打开它。Eclipse 没问题，但由于页边距中行数的大小，SEU 有 32k 行的限制。

我们必须做的是创建第二个源成员并在底部/复制它。一个可怕的解决方法，但你还要用这么大的程序做什么！

# sql - 连接 ON 子句的聚合

> ID：13254504
> 
> 赞同：4
> 
> 时间：2012-11-06T15:45:22.923
> 
> 标签：sql, sql-server

我有一张`item_table`这样的桌子：

```
item   age
--------------    
1      1 
1      6 
2      2 
```

我有另一个`price_table`这样的表：

```
item    pricetype    price
--------------------------    
1       O             5
1       P             6
1       V             7
2       O             8
2       P             9
2       V             10 
```

所以，我想在两个表上进行内部连接。

```
select *
from item_table i
inner join price_table p
on ... 
```

有一些条件`on`：

1.  如果一个项目**的平均年龄**大于`3`，那么我会：`inner join price_table on pricetype = 'O' or pricetype = 'P'`
2.  如果没有，那么我这样做：`inner join price_table on pricetype = 'O' or pricetype = 'P' or pricetype = 'V'`

所以有条件`on`有条件。

然后我写这样的查询：

```
select i.item, i.type, p.pricetype, p.price
from item_table i
inner join price_table p on i.item = p.item 
    and (avg(i.age) >= 3 and p.pricetype in ('O', 'P'))
        or (avg(i.age) < 3 and p.pricetype in ('O', 'P', 'V')) 
```

给出的错误是：`An aggregate cannot appear in an ON clause unless it is in a subquery contained in a HAVING clause or select list, and the column being aggregated is an outer reference.`

我不能移动到`avg`，`Having`因为其他条件取决于`avg`.

**如何编写选择查询？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T15:54:01.803

```
select *
from (
    select item, avg(age) as AvgAge
    from item_table
    group by item
) ia
inner join price_table p on ia.item = p.item 
    and ((ia.AvgAge >= 3 and p.pricetype in ('O', 'P'))
        or (ia.AvgAge < 3 and p.pricetype in ('O', 'P', 'V'))) 
```

[SQL 小提琴示例 1](http://sqlfiddle.com/#!3/b4d08/11)

这可以简化为：

```
select *
from (
    select item, avg(age) as AvgAge
    from item_table
    group by item
) ia
inner join price_table p on ia.item = p.item 
    and (p.pricetype in ('O', 'P')
        or (ia.AvgAge < 3 and p.pricetype = 'V')) 
```

[SQL 小提琴示例 2](http://sqlfiddle.com/#!3/b4d08/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:49:39.110

您是否尝试将聚合放在子查询中，然后您有在子句`avg()`中使用的值：`JOIN`

```
select i.item, i.type, p.pricetype, p.price
from
(
    select avg(i.age) age, i.item, i.type  -- not sure where type is coming from in your OP as it is not in the table you showed
    from item_table i
    group by i.item, i.type
)   i
inner join price_table p 
    on i.item = p.item 
    and ((i.age>= 3 and p.pricetype in ('O', 'P'))
        or (i.age < 3 and p.pricetype in ('O', 'P', 'V'))) 
```

# c - GCC 扩展 asm，struct 元素偏移编码

> ID：13254512
> 
> 赞同：8
> 
> 时间：2012-11-06T15:45:48.210
> 
> 标签：c, gcc, inline-assembly, i386

我正在尝试以 GCC 样式扩展 asm（x86-64 目标）编写一小段代码，并且在编码结构偏移量时遇到问题。

我有一个`struct s`with a member `size_t a[]`，一个指向这种结构的指针和一个索引，它们都是在 asm 块中生成的。

现在我需要在 asm 中处理该元素

```
asm (
    "mov %[displ](%[s], %[index], 8), %%rbx"
    : [s] "+r" (s)
    , [index] "+r" (i)
    : "memory", "cc", "rax", "rbx"
); 
```

如何编码`displ`到 asm 块中？`offsetof(struct s, a)`作为直接前缀传递`$`并生成无效程序集。

```
asm (
    "mov %[displ](%[s], %[index], 8), %%rbx"
    : [s] "+r" (s)
    , [index] "+r" (i)
    : [displ] "i" (offsetof(struct s, a))
    : "memory", "cc", "rax", "rbx"
); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T09:51:04.307

实际上*是*可能的，使用`%c...`操作数修饰符：

```
#include <stddef.h>
#include <stdint.h>

struct s
{
  int a, b;
};

int foo (struct s *s, int i)
{
  int r;
  asm (
       "movl %c[displ](%[s],%[index],8), %[r]\n\t"
       : [r] "=r" (r)
       : [s] "r" (s) , [index] "r" ((uintptr_t)i),
         [displ] "e" (offsetof(struct s, b))
       :
       );

  return r;
}
```

感谢应得的感谢 - 在[这里](http://www.osdever.net/tutorials/view/a-brief-tutorial-on-gcc-inline-asm)找到。有[一个 gcc 邮件列表](http://gcc.gnu.org/ml/gcc/1999-10n/msg00488.html)也提到了这个；那里的关键字是“输出替换”。
stackoverflow 发布的[%c 在 GCC 内联汇编代码中是什么意思？](https://stackoverflow.com/questions/1672900/what-does-c-mean-in-gcc-inline-assembly-code)也有关于`%c`特别的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:24:15.597

您唯一的选择是使用 Intel 语法。当然，GCC 可以生成 insn like `mov off(base, index, scale)`，但是在整个`MEM`RTL 表达式的级别上执行此操作，即没有偏移量、基数等，例如单个操作数。

因此，英特尔语法，编译以下内容`gcc -c -masm=intel x.c`：

```
#include <stddef.h>

struct s
{
  int a, b;
};

int foo (struct s *s, int i)
{
  int r;
  asm (
       "mov %[r], dword ptr [%[s]+%[index]*8 + %[displ]] "
       : [r] "=r" (r)
       : [s] "r" (s) , [index] "r" (i),
         [displ] "e" (offsetof(struct s, b))
       :
       );

  return r;
} 
```

# objective-c - 如何使切换按钮影响 Xcode 4.3 中的用户脚本 (cmix)

> ID：13254516
> 
> 赞同：1
> 
> 时间：2012-11-06T15:46:08.950
> 
> 标签：objective-c, xcode, uibutton, xcode4.3

我正在 IRTcmix（iphone/ipad 的 RTcmix 版本）中构建一个简单的步进音序器，使用 UI 按钮来控制序列中哪些音符是打开或关闭的。

我一直在使用其他应用程序的一组 RTcmix 示例，并尝试将我自己的示例拼凑在一起，但我不确定如何使用切换样式的 UIButton 更改 .sco（分数文件）中变量的值。

以下是工作中的 RTcmix 应用程序的一些片段：

从 RTcmix 管理器 .h：

```
@interface RTcmixManager : RTcmixPlayer {
RTcmixScore     *polyScore;

}

@property (nonatomic, retain)   RTcmixScore     *polyScore;

- (void)noteOn:(int)note;
- (void)noteOff:(int)note;

@end 
```

和 RTcmix 管理器 .m

```
- (void)noteOn:(int)note {
[polyScore.mainScoreParameters replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:note]];
[polyScore.mainScoreParameters replaceObjectAtIndex:1 withObject:[NSNumber numberWithInt:1]];
[self parseScoreWithRTcmixScore:polyScore];
polyScore.setupIsActive = YES;
}

- (void)noteOff:(int)note {
    [polyScore.mainScoreParameters replaceObjectAtIndex:0 withObject:[NSNumber numberWithInt:note]];
    [polyScore.mainScoreParameters replaceObjectAtIndex:1 withObject:[NSNumber numberWithInt:0]];
    [self parseScoreWithRTcmixScore:polyScore];
} 
```

视图控制器.h：

```
@interface RTPolyphonyViewController : UIViewController {
RTcmixManager       *rtcmixManager;
}

- (IBAction)keyDown:(UIButton *)sender;
- (IBAction)keyUp:(UIButton *)sender;

@end 
```

视图控制器.m：

```
- (IBAction)keyDown:(UIButton *)sender {
[rtcmixManager noteOn:sender.tag]; 
}

- (IBAction)keyUp:(UIButton *)sender {
    [rtcmixManager noteOff:sender.tag]; 
} 
```

以及来自 .sco 文件的片段（“%@”是用户输入更改的变量）：

```
NoteNumber = %@
NoteVelocity = %@

alreadySounding = note_exists(oscNotes[NoteNumber])
MAXMESSAGE(0, alreadySounding) 
```

我对目标 C 和 xcode 非常陌生，我想知道如何在乐谱文件中的两个值之间切换 UI 按钮（充当开关），例如，切换时的按钮使 NoteNumber 的值（在乐谱文件中) 设置为 1，而关闭时值为 0。因为我是 Xcode（和 Objective C）的初学者，所以我不确定使按钮能够打开和关闭的正确语法，我也不确定如何将所述按钮与我的 .sco 文件连接起来，尽管我查看示例代码，但我似乎无法弄清楚它们是如何连接的。

# ios - 对 modelIdentifierForElementAtIndexPath:inView: (UIDataSourceModelAssociation) 的奇怪调用

> ID：13254518
> 
> 赞同：8
> 
> 时间：2012-11-06T15:46:19.083
> 
> 标签：ios, ios6

我目前正在仅 iOS6 的应用程序中实现自动状态保存/恢复。

为了恢复表视图，我将`UIDataSourceModelAssociation`协议添加到我的表视图控制器并实现

`- (NSString *)modelIdentifierForElementAtIndexPath:(NSIndexPath *)idx inView:(UIView *)view`

和

`- (NSIndexPath *)indexPathForElementWithModelIdentifier:(NSString *)identifier inView:(UIView *)view`

当按下主页按钮时，状态保存方法（包括`modelIdentifierForElementAtIndexPath:iView:`）将按预期调用并返回给定索引路径的有效标识符字符串。

杀死应用程序并重新启动它时，状态恢复或多或少会起作用。即应用程序重新打开正确的表格视图。然而，表格视图总是滚动到顶部，即使它之前滚动到另一个位置。

这是`UIDataSourceModelAssociation`我的表视图控制器中方法的实现。那里没有什么特别的事情（该`NdlFriend::accountUid`属性返回给定 NdlFriend 记录的唯一标识符字符串）：

```
#pragma mark - UIDataSourceModelAssociation
- (NSString *)modelIdentifierForElementAtIndexPath:(NSIndexPath *)idx inView:(UIView *)view
{
    NSString* identifier = nil;
    NSArray* content = self.contentArray;

    // Sometimes idx might be nil...
    if(idx && idx.row<content.count)
    {
        NdlFriend* friend = content[idx.row];
        identifier=friend.accountUid;
    }
    return identifier;
}

- (NSIndexPath *)indexPathForElementWithModelIdentifier:(NSString *)identifier inView:(UIView *)view
{
    NSIndexPath * indexPath=nil;
    NSArray* content = self.contentArray;
    NSInteger count = content.count;
    for(NSInteger i=0;i<count;i++)
    {
        NdlFriend* friend = content[i];
        if([identifier isEqualToString:friend.accountUid])
        {
            indexPath = [NSIndexPath indexPathForRow:i inSection:0];
            break;
        }
    }
    return indexPath;
} 
```

我在这两种方法中都设置了断点。

为了测试这些方法，我打开了表格视图并向下滚动了一点。然后，当按下主页按钮时：

*   `modelIdentifierForElementAtIndexPath:inView:`被调用一次，带有最顶部可见行的索引路径。该方法返回此行的正确 uid。

到目前为止，一切都很好。

然后我停止并重新启动应用程序。这是发生的事情（我对第一个命中断点特别困惑）：

*   `modelIdentifierForElementAtIndexPath:inView:`被调用，`nil`作为索引路径（视图参数包含表视图的正确指针）。
*   `indexPathForElementWithModelIdentifier:inView:`使用有效的标识符字符串调用（并且该方法返回有效的索引路径）。
*   `indexPathForElementWithModelIdentifier:inView:`再次被调用（使用相同的标识符字符串）。
*   表格视图已刷新，但滚动到最顶部。

有人知道，为什么滚动位置的恢复失败？`modelIdentifierForElementAtIndexPath:inView:`with `nil`as indexPath的调用是否与它有关（或者这是正常行为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T19:55:44.877

iOS 6 中有一个关于导航控制器中表视图状态恢复的错误。

你可以在这里看到开放的雷达：[rdar://13438788](https://openradar.appspot.com/13438788)

如您所见，它是重复的，因此 Apple 意识到了这一点。

此外，请参阅下一个链接，发布开放雷达的人也发表了这篇博文，其中包含 Apple 工程师告诉他的建议解决方法。

它使状态保存/恢复对我来说不是一个令人愉快的功能，但请记住，这是为您的用户准备的！所以无论如何你都应该做解决方法。

请注意，有 2 种解决方法，一种用于恢复表视图的视图信息（例如滚动偏移），另一种用于在实现时使用的解决方法`UIDataSourceModelAssociation`是您的情况。

[http://useyourloaf.com/blog/2013/04/07/bug-table-view-state-not-restored-when-embedded-in-navigation-controller.html](http://useyourloaf.com/blog/2013/04/07/bug-table-view-state-not-restored-when-embedded-in-navigation-controller.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:21:32.043

我同意 Aky 的观点，这可能确实是 iOS 6 中的一个错误。请参阅我对相关问题的回答：[https ://stackoverflow.com/a/14567551/322548](https://stackoverflow.com/a/14567551/322548)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T21:30:45.270

确保您没有对数据执行异步提取。如果您从 viewDidLoad 获取数据，请确保使用 [myManagedObjectContext performBlockAndWait:^{}] 调用而不是 [myManagedObjectContext performBlock:^{}]。

当调用 indexPathForElementWithModelIdentifier 时，您可能有一个竞争条件 self.contentArray 为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:12:13.473

我认为您在重置表格视图的滚动位置时遇到的问题与 UIDataSourceModelAssociation 方法无关。

我相信嵌入在导航控制器中的表格视图控制器存在错误，导致它在恢复后重置其滚动位置。据我了解，如果您的表格视图中的单元格没有重新排序，则您不需要实现 UIDataSourceModelAssociation 方法，并且您应该“免费”获得滚动位置（即，只要您选择了状态保存并设置修复体 ID）。我不能从文档中明确地确认这一点，除了指出 UITableView 来自 UIScrollView，它保存了它的滚动位置。我已经测试过，如果将表视图控制器设置为根控制器，或者将表视图控制器嵌入标签栏控制器，则滚动位置*会*恢复。

我已经提交了一个错误报告，如果你还没有，你也应该这样做。

# c# - 用已经是字符串的值用前导零填充字符串？

> ID：13254519
> 
> 赞同：1
> 
> 时间：2012-11-06T15:46:24.887
> 
> 标签：c#, .net-4.0, string.format

```
string n = string.Format("{0:000}-{1:00}-{2:00}-{3:00}-{4:000000}-{5:000000}"
                        ,"20G","34","41","1","3G","2004"); 
```

如果值是整数，则上述方法有效，但在这种情况下它们不能。是否可以使用 string.Format 中的字符串值进行填充，或者我必须执行以下操作：

```
string n = string.Format("{0}","20G".PadLeft(3,'0')); 
```

# yii - 来自 DataProvider 的 Yii 分页变量

> ID：13254524
> 
> 赞同：8
> 
> 时间：2012-11-06T15:46:46.943
> 
> 标签：yii

我的控制器操作中需要某些分页变量。

如：

1.当前页码

2.当前页面偏移量

3.显示的总记录

***即显示 2005 条记录中的 31 到 40 条***

我尝试了以下方法：

```
$dataProvider = NodesTerms::getNodesDataFromTerms($nodeId) ;     
  $pagination = $dataProvider->getPagination();
  var_dump($pagination->getPageCount());
  //var_dump($pagination->currentPage); 
```

我可以得到分页对象，但零（0）`$pagination->currentPage` 或`$pagination->offset`等......

我需要这些信息来动态生成元页面`title`和`description`带有页面列表的操作，例如 pagetitle: page 3 of 10 for American Recipes...

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:56:36.643

尝试[`itemCount`](http://www.yiiframework.com/doc/api/1.1/CPagination#itemCount-detail "http://www.yiiframework.com/doc/api/1.1/CPagination#itemCount-detail")在你的明确设置`dataProvider`：

```
'pagination'=>array(
    'pageSize'=>10,
    'itemCount'=>$count
) 
```

或者使用一个新`CPagination`对象：

```
$pagination = new CPagination($count);

$dataProvider = new CSqlDataProvider($sql, array(
    // ... other config
    'pagination' => $pagination
)); 
```

* * *

这是如何工作的：

分页`itemCount`是在创建数据提供者期间设置的，并再次[在`CSqlDataProvider`'`fetchData`](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/CSqlDataProvider.php#L95 "https://github.com/yiisoft/yii/blob/1.1.12/framework/web/CSqlDataProvider.php#L95")函数中设置：

```
 $pagination->setItemCount($this->getTotalItemCount()); 
```

在创建 data-provider 期间，仅使用传递给`pagination`属性的值，如果我们不传递`itemCount`值，则使用默认值 of `0`。
因此，如果我们想在调用**之前**`offset`访问or`pageCount`或`currentPage`or ，我们必须显式设置。`itemCount` **`fetchData``itemCount`**

 **但是，如果我们在调用之后想要这些值，`fetchData`那么由于对`setItemCount`within的调用，这些值已经正确填充`fetchData`。

一个清晰的例子（`itemCount`在数据提供者创建期间没有传递）：

```
$dataProvider = NodesTerms::getNodesDataFromTerms($nodeId);     
$pagination = $dataProvider->getPagination();
var_dump($pagination->getPageCount()); // this will be zero

$data=$dataProvider->getData(); // getData calls fetchData()

var_dump($pagination->getPageCount()); // now this will be correct value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:08:13.483

getCurrentPage 返回“当前页面的从零开始的索引”

[http://www.yiiframework.com/doc/api/1.1/CPagination#getCurrentPage-detail](http://www.yiiframework.com/doc/api/1.1/CPagination#getCurrentPage-detail)

所以如果你在第一页，它应该返回 0。

并且您知道页面大小和足以让您生成页面标题的记录总数。**

# php - 如何查看 Base64 编码和 GZInflated 的 PHP 代码？

> ID：13254527
> 
> 赞同：-3
> 
> 时间：2012-11-06T15:46:50.803
> 
> 标签：php, base64, gzip

> **可能重复：**
> [有没有办法解码这个 PHP 代码？](https://stackoverflow.com/questions/6907581/is-there-a-way-to-decode-this-php-code)
> [这个编码的字符串说明了什么，你是怎么发现的？](https://stackoverflow.com/questions/8612892/what-does-this-encoded-string-say-and-how-did-you-find-out)

所以我的客户购买了一个 Wordpress 模板，并要求更改模板附带的内容。我弄清楚需要在哪个文件中进行修改，但是该文件中的代码如下所示：

```
<?php eval(gzinflate(base64_decode('[a bunch of alphanumerical values here'))); ?> 
```

据我了解，这段代码是现场渲染的，它的编码和压缩。但是，我需要在那里进行修改，那么我将如何从该代码中获取可编辑的文件？

如果您想知道我如何知道这是我需要编辑的文件，则翻译文件指向该文件的特定行以影响副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:48:19.463

只需替换`eval()`为`echo`（注意括号），或`file_put_contents('somefile.php', ....`将原始脚本保存到`somefile.php`文件中。

# symfony - Symfony2：如果缺少某些字段，则让用户在登录后完成注册

> ID：13254531
> 
> 赞同：8
> 
> 时间：2012-11-06T15:47:06.623
> 
> 标签：symfony, oauth, symfony-2.1, hwioauthbundle

我正在使用 HWIOAuthBundle 让用户使用 Oauth 登录，我创建了一个自定义用户提供程序，它创建一个用户以防万一它不存在：

```
public function loadUserByOAuthUserResponse(UserResponseInterface $response)
{
    $attr = $response->getResponse();
    switch($response->getResourceOwner()->getName()) {
        case 'google':
            if(!$user = $this->userRepository->findOneByGoogleId($attr['id'])) {
                if(($user = $this->userRepository->findOneByEmail($attr['email'])) && $attr['verified_email']) {
                    $user->setGoogleId($attr['id']);
                    if(!$user->getFirstname()) {
                        $user->setFirstname($attr['given_name']);
                    }
                    if(!$user->getLastname()) {
                        $user->setLastname($attr['family_name']);
                    }
                    $user->setGoogleName($attr['name']);
                }else{
                    $user = new User();
                    $user->setUsername($this->userRepository->createUsernameByEmail($attr['email']));
                    $user->setEmail($attr['email']);
                    $user->setFirstname($attr['given_name']);
                    $user->setLastname($attr['family_name']);
                    $user->setPassword('');
                    $user->setIsActive(true);
                    $user->setGoogleId($attr['id']);
                    $user->setGoogleName($attr['name']);
                    $user->addGroup($this->groupRepository->findOneByRole('ROLE_USER'));
                    $this->entityManager->persist($user);
                }
            }
            break;
        case 'facebook':
            if(!$user = $this->userRepository->findOneByFacebookId($attr['id'])) {
                if(($user = $this->userRepository->findOneByEmail($attr['email'])) && $attr['verified']) {
                    $user->setFacebookId($attr['id']);
                    if(!$user->getFirstname()) {
                        $user->setFirstname($attr['first_name']);
                    }
                    if(!$user->getLastname()) {
                        $user->setLastname($attr['last_name']);
                    }
                    $user->setFacebookUsername($attr['username']);
                }else{
                    $user = new User();
                    $user->setUsername($this->userRepository->createUsernameByEmail($attr['email']));
                    $user->setEmail($attr['email']);
                    $user->setFirstname($attr['first_name']);
                    $user->setLastname($attr['last_name']);
                    $user->setPassword('');
                    $user->setIsActive(true);
                    $user->setFacebookId($attr['id']);
                    $user->setFacebookUsername($attr['username']);
                    $user->addGroup($this->groupRepository->findOneByRole('ROLE_USER'));
                    $this->entityManager->persist($user);
                }
            }
            break;
    }

    $this->entityManager->flush();

    if (null === $user) {
        throw new AccountNotLinkedException(sprintf("User '%s' not found.", $attr['email']));
    }

    return $user;
} 
```

问题是，例如 twitter 不提供电子邮件，或者我希望在创建新用户之前包含一些额外的字段。有没有办法在创建之前将用户重定向到“完整注册”表单？

我尝试添加一个请求侦听器，在每个请求上，如果用户已登录，则检查电子邮件是否存在，如果不存在，它会重定向到 complete_registration 页面，但如果用户去，它也会重定向到主页，注销或其他任何东西，我只想在他尝试访问某些用户限制页面时重定向他。

或者更好的是，在他提供所有必需的信息之前不要创建它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T08:55:58.723

我自己找到了解决方案，我手动创建了一个新异常：

```
<?php

namespace Acme\UserBundle\Exception;

use Symfony\Component\Security\Core\Exception\AuthenticationException;
use HWI\Bundle\OAuthBundle\Security\Core\Exception\OAuthAwareExceptionInterface;

/**
 * IncompleteUserException is thrown when the user isn't fully registered (e.g.: missing some informations).
 *
 * @author Alessandro Tagliapietra http://www.alexnetwork.it/
 */
class IncompleteUserException extends AuthenticationException implements OAuthAwareExceptionInterface
{
    private $user;
    private $accessToken;
    private $resourceOwnerName;

    /**
     * {@inheritdoc}
     */
    public function setAccessToken($accessToken)
    {
        $this->accessToken = $accessToken;
    }

    /**
     * {@inheritdoc}
     */
    public function getAccessToken()
    {
        return $this->accessToken;
    }

    /**
     * {@inheritdoc}
     */
    public function getResourceOwnerName()
    {
        return $this->resourceOwnerName;
    }

    /**
     * {@inheritdoc}
     */
    public function setResourceOwnerName($resourceOwnerName)
    {
        $this->resourceOwnerName = $resourceOwnerName;
    }

    public function setUser($user)
    {
        $this->user = $user;
    }

    public function getUser($user)
    {
        return $this->user;
    }

    public function serialize()
    {
        return serialize(array(
            $this->user,
            $this->accessToken,
            $this->resourceOwnerName,
            parent::serialize(),
        ));
    }

    public function unserialize($str)
    {
        list(
            $this->user,
            $this->accessToken,
            $this->resourceOwnerName,
            $parentData
        ) = unserialize($str);
        parent::unserialize($parentData);
    }
} 
```

这样，在自定义 Oauth 用户提供程序中，当我检查用户是否存在或创建新用户时，我会检查是否缺少必填字段：

```
if (!$user->getEmail()) {
    $e = new IncompleteUserException("Your account doesn't has a mail set");
    $e->setUser($user);
    throw $e;
} 
```

在这种情况下，用户将被重定向到登录表单，会话中出现异常，所以在登录页面中我这样做：

```
if($error instanceof IncompleteUserException) {
    $session->set(SecurityContext::AUTHENTICATION_ERROR, $error);
    return $this->redirect($this->generateUrl('register_complete'));
} 
```

并且它将被重定向到异常中带有 $user 的表单，因此它只能询问缺少的信息，然后登录用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:47:46.190

我在迁移到 sf 网站时遇到了类似的问题。迁移后，我希望迁移的用户完成他们的个人资料，而新注册的用户可以立即开始。

我使用 RequestListener 解决了与您的想法类似的问题，但添加了允许用户在未完成其个人资料的情况下允许的页面白名单。根据您希望用户在未完成其个人资料的情况下访问的页面数量，您也可以考虑使用黑名单。

在重定向到配置文件完成页面时，我没有检查特定字段的存在，但在迁移用户数据库时添加了角色“ROLE_MIGRATION”。在您的情况下，您可以在通过 oauth 创建用户时添加角色。

这是我的请求侦听器的代码：

```
public function onRequest(GetResponseEvent $evt)
{

    if (HttpKernelInterface::MASTER_REQUEST !== $evt->getRequestType())
    {
        return;
    }

    $token = $this->securityContext->getToken();

    if(!is_object($token)) or not migrating
    {
        // user is not logged in
        return;
    }

    $user = $token->getUser();

    if(!$user instanceof User || !$user->hasRole('ROLE_MIGRATING'))
    {
        // different user class or already migrated
        return;
    }

    $openPaths = array(
        '/start-2.0',
        '/css',
        '/js',
        '/images',
        '/media',
        '/geo',
        '/_wdt',
        '/logout', or not migrating
        '/terms',
        '/contact',
        '/about',
        '/locale/set'
    );

    foreach($openPaths as $p)
    {
        if(strpos($evt->getRequest()->getPathInfo(),$p)===0)
        {
            // path is open for migrating users
            return;
        }
    }

    header('Location: /start-2.0');
    exit;
} 
```

# eclipse - 通过 svn+ssh 连接时，Subclipse + SVNKit 不断询问凭据

> ID：13254536
> 
> 赞同：6
> 
> 时间：2012-11-06T15:47:19.290
> 
> 标签：eclipse, credentials, subclipse, svnkit

我正在使用 Subclipse 通过 svn+ssh 和私钥（服务器具有配对的公钥）连接到 SVN 存储库。接口是SVNKit（纯Java）。输入 svn+ssh://repository... 地址后，系统会提示我输入凭据。我指定了用户名和私钥文件（我没有设置密码，所以它留空）并确认。窗口再次弹出，并且无限期地继续。没有提供控制台消息。

注意1：标记“保存信息”似乎没有效果。如果有缓存我应该删除这可能会有所帮助。我已经在 Eclipse 中删除了密钥环文件。

注 2：我不确定私钥应该是 SSH2 还是 OpenSSH 格式，但我都试过了，没有区别。

注意 3：我在 eclipse 的插件下找不​​到 org.tmatesoft.svn 文件夹。我从 Eclipse 更新站点[http://eclipse.svnkit.com/1.7.x](http://eclipse.svnkit.com/1.7.x)安装了 SVNKit 。

规格：Windows 7 64 位、eclipse 4.2.1 64 位、Subclipse 1.8.16、Subversion 客户端适配器 1.8.3、SVNKit 客户端适配器 1.7.5.1。

如果我应该提供任何其他信息或日志文件，我将很乐意这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-29T12:25:35.840

我遇到了类似的问题，发现我尝试使用 puttygen 生成的私钥，但**SVNKit 需要一个 OpenSSH**密钥。

我的解决方案是：

1.  启动 PuTTY 密钥生成器
2.  加载私钥
3.  转换\导出 OpenSSH 密钥
4.  在 Eclipse 中选择 openSSH 密钥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T16:24:27.213

1- 在 Window => Preferences SVN （或 team => svn 取决于您的版本）下，确保您选择了您的系统中可用的库...例如 SVNKIT(Pure Java) .... 而不是 JAvaHL...经常失踪

2- 在 Window => Preferences 下，搜索“Secure Storage”并设置主密码（通常单击 Change Passowrd...）。这不是您的 svn 密码，但由于某些原因我忽略了，如果未设置此主密码，当您单击保存密码时，Eclipse 将无法存储和检索您的 svn 密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-11T21:13:15.223

最终发现他们的密钥有问题。它是用 DSA 而不是 RSA 加密的，并且没有为它设置服务器。

为什么我没有收到有关错误密钥对的消息，这超出了我的理解，但是使用正确的密钥它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-29T00:59:17.440

我通过生成 PEM 格式的 SSH 密钥来解决这个问题

```
ssh-keygen -m pem 
```

您可以通过在 eclipse 主目录中创建一个 .options 文件来启用 SVNKIT 日志记录。该文件应包含以下文本：

```
org.tmatesoft.svnkit/debug=true
org.tmatesoft.svnkit/debug/error=true
org.tmatesoft.svnkit/debug/warning=true
org.tmatesoft.svnkit/debug/info=true
org.tmatesoft.svnkit/debug/fine=true
org.tmatesoft.svnkit/debug/trace=true 
```

然后使用 -debug 命令行参数运行 eclipse

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-06T16:03:38.147

我不会担心注释 3。如果您打开 Eclipse Preferences 并转到 Team > SVN 并且您可以选择 SVNKit，那么它已安装并可用。在我的系统上，它是 plugins 文件夹中的一个 JAR。

SVNKit 负责 SSH 过程，因此您可以访问他们的论坛并发送电子邮件至 support@svnkit.com 以获取信息和想法。

我记得他们通常会在 Eclipse 会话期间缓存信息，所以不确定发生了什么。如果您不断响应所有提示，是否一切正常？如果没有，那么可能会提示您，因为它无法成功使用您的凭据？

他们的 wiki 中有一个疑难解答部分： [http ://wiki.svnkit.com/Troubleshooting](http://wiki.svnkit.com/Troubleshooting)

# c# - 来自 ViewData 的 NullReferenceException 实际上不是 Null

> ID：13254539
> 
> 赞同：1
> 
> 时间：2012-11-06T15:47:36.500
> 
> 标签：c#, asp.net, asp.net-mvc

[截屏](http://i.stack.imgur.com/Mm6e6.png)

我认为截图说明了一切。我该如何解决这个问题？即使数据不为空，它也会给出空引用异常..

堆栈跟踪如下：

```
 at ASP._Page_Views_Profile_Index_cshtml.Execute() in c:\aaaaaa\aaa\aaaaaa\Views\Profile\Index.cshtml:line 17
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:54:50.917

我打赌线程问题。当 ViewEngine 尝试显示/绑定值（MobilePhone）时，它为 null 并引发异常，但与此同时，负责加载数据的线程完成，并且在调试器中期望/查看值时，该值存在。

# c# - 在运行时创建具有类型对象的实例

> ID：13254545
> 
> 赞同：5
> 
> 时间：2012-11-06T15:48:05.383
> 
> 标签：c#, reflection, types, initialization

我有以下代码

```
//^process a aquery and return DataTable
DataTable d t= dbConnect.ProcessQuery(strquery);
Type t = dt.Columns[0].DataType.GetType(); 
```

如何创建`t`将接收的类型的对象`dt[0][..]`？

我知道那`dt.Rows[][]`将是类型`t`

我需要创建类型的 anagrammatically 变量`t`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T15:49:35.443

第一步是检索您要创建的实际类型。最有可能的是，类型的名称作为字符串存储在数据库中。所以你打电话

```
var typeName = "System.Int32";
var type = System.Type.GetType(typeName); 
```

现在您有了要实例化的实际类型，请调用

```
var obj = System.Activator.CreateInstance(type); 
```

在大多数情况下，您将为在每种情况下使用的所有类型都有一个通用的基本接口：

```
var i = (IFormattable)obj; 
```

现在您可以调用接口上的方法，它们将在实际类型上执行。

```
Console.WriteLine(i.ToString("0", System.Globalization.CultureInfo.InvariantCulture)); 
```

文档：http: [//msdn.microsoft.com/en-us/library/wccyzw83.aspx](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:22:21.763

Knaģis 已经提供了适当的答案，但我想指出这行代码是不正确的：

```
Type T =dt.Columns[0].DataType.GetType(); 
```

这将始终返回`Type`, not `string`,`int`等。那是因为 Type of `DataType`is `Type`。改用这个：

```
Type T =dt.Columns[0].DataType; 
```

此外，您正在使用泛型类型的命名约定。虽然在第一次阅读时有点混乱，但它并没有什么“错误”。请注意，*泛型类型和变量之间存在差异*。例如，在您的问题中给出代码，您将**无法**使用此代码：

```
var x = new List<T>; 
```

在您的代码上下文中，`T`是一个变量，而不是泛型类型，因此上述内容会导致编译时错误。

See this question for more information:
[Generics in C#, using type of a variable as parameter](https://stackoverflow.com/questions/2107845/generics-in-c-using-type-of-a-variable-as-parameter)

# ruby-on-rails - Railstutorial (Michael Hartl) Chatper 10 练习 2：分页中断 Feed 测试

> ID：13254547
> 
> 赞同：0
> 
> 时间：2012-11-06T15:48:18.463
> 
> 标签：ruby-on-rails, railstutorial.org

我使用以下内容为 static_pages_spec.rb 中的第 10 章练习 1 和 2 编写测试，当我通过其他测试时，出现以下错误：

```
 1) Static pages Home page for signed-in users should render the user's feed
     Failure/Error: page.should have_selector("li##{item.id}", text: item.content)
       expected css "li#1138" with text "Lorem ipsum" to return something
     # ./spec/requests/static_pages_spec.rb:25:in `block (5 levels) in <top (required)>'
     # ./spec/requests/static_pages_spec.rb:24:in `block (4 levels) in <top (required)>' 
```

显然，一旦 FactoryGirl 创建了 30 多个微博，line item.id 测试就以某种方式中断了。

这是 static_pages_spec.rb：

```
 describe "Home page" do
    before { visit root_path }

    it { should have_selector('h1', text: 'Sample App') }
    it { should have_selector('title', text: full_title('')) }

    describe "for signed-in users" do
      let(:user) { FactoryGirl.create(:user) }
      before do
        31.times { FactoryGirl.create(:micropost, user: user) }
        sign_in user
        visit root_path
      end

      after { user.microposts.delete_all }

      it "should render the user's feed" do
        user.feed.each do |item|
          page.should have_selector("li##{item.id}", text: item.content)
        end
      end

      it "should have micropost count and pluralize" do
        page.should have_content('31 microposts')
      end

      it "should paginate after 31" do
        page.should have_selector('div.pagination')
      end
    end

  end 
```

这是我的 _feed_item.html.erb 部分：

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if current_user?(feed_item.user) %>
    <%= link_to "delete", feed_item, method: :delete,
                                     data: { confirm: "You sure?" },
                                     title: feed_item.content %>
  <% end %>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:45:20.230

我不知道它是否相关，但无论如何我都会发布它，这样它可能会帮助其他人。

您的主页仅显示 30 个提要项目（因为分页），但您的循环检查是否所有提要都存在于您的主页中，而它们不存在，这就是您收到错误的原因...

我对您的问题的解决方案与您的类似，使用分页而不是范围

```
it "should render the user's feed" do
  user.feed.paginate(page: 1).each do |item|
    page.should have_selector("li##{item.id}", text: item.content)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:57:32.933

我通过将 Feed 行项目测试限制为仅检查前 28 个帖子来解决此问题。

```
 it "should render the user's feed" do
    user.feed[1..28].each do |item|
      page.should have_selector("li##{item.id}", text: item.content)
    end
  end 
```

但是，我不知道这是修复它的最佳方法。

# node.js - 在 Express 中，app.router 究竟做了什么？

> ID：13254549
> 
> 赞同：28
> 
> 时间：2012-11-06T15:48:25.297
> 
> 标签：node.js, express

当我使用 express 二进制文件创建示例 Express 应用程序时，引导代码具有以下几行：

```
...

var app = express();
...
app.use(app.router); 
```

我没有找到太多关于 app.router 的信息。我认为这是处理路由（app.get()、app.post() 等）规则的中间件，但是当我删除 app.use(app.router); 时这些规则也会被执行；线。

那么这个中间件的确切用途是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-11T22:36:45.720

在 Express 3.x 中，app.router 是[连接中间件路由器](https://github.com/senchalabs/connect/blob/7d96c75960c9a6502d44bc367c97ab8101d660e6/lib/middleware/router.js)的增强版本。正如赫克托所说，这是 Express 处理使用 , 等注册的请求处理程序的`app.get`地方`app.post`。

如果您没有`app.use(app.router)`显式调用，那么 express 将在您第一次使用`app.get(...)`,`app.post(...)`等时隐式调用它。但是，您可能希望`.use`显式调用它，因为您选择了所有中间件的顺序。

```
app.use(express.favicon());
app.use(express.bodyParser());
app.use(express.methodOverride());
// app.get, app.post, etc called before static folder
app.use(app.router); 
app.use(express.static(path.join(__dirname, 'public'))); 
```

[在此处](https://github.com/visionmedia/express/blob/85834fd146392dafb98211dc89472fe3ed2f329d/lib/application.js#L64-L72)查看如何在 Express 3 源中检索路由器。

请注意，[Express 4 不需要 app.router](https://github.com/visionmedia/express/wiki/New-features-in-4.x#no-more-appuseapprouter)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-06T16:29:54.930

这是来自 Express 2.x 指南[http://expressjs.com/2x/guide.html](http://expressjs.com/2x/guide.html)

> “注意 app.router 的使用，它可以（可选）用于挂载应用程序路由，否则第一次调用 app.get()、app.post() 等将挂载路由。”

我怀疑这也适用于 Express 3.x。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-14T17:56:30.283

就我而言，我没有导出模块

```
module.exports = router; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-18T10:31:50.537

此方法已弃用

为什么我们使用路由器..因为我们需要将我们的子应用程序连接到我们的主应用程序。

# javascript - $(document).Ready() 加载 Flexigrid，但在 $(document).Ready() 之外的其他函数再次调用时不会

> ID：13254555
> 
> 赞同：0
> 
> 时间：2012-11-06T15:48:41.187
> 
> 标签：javascript, jquery, asp.net, flexigrid

我有一个名为“loadTimeTrackersGrid()”的函数，它加载一个 flexigrid。设置如下所示：

```
 $(document).ready(function () {
        var editTrackerID = 0;
        loadTimeTrackersGrid();
)}; 
```

函数的开头如下所示：

```
function loadTimeTrackersGrid(caseStatus) {
        var url = 'Utilities/DataViewHandlers/ViewTimeTrackers.ashx?CaseFileID=' + $('#hidCaseFile').val();

        if ($('#hidTaskID').val() !== "")
            url += '&TaskID=' + $('#hidTaskID').val();

        if (caseStatus == "NI") {
            url += '&NonInvoiced=1';
        }

        $('#viewTimeTrackersGrid').flexigrid({
            url: url,
            dataType: 'json',
            method: 'get', 
```

如您所见，它调用另一个页面，其中包含一个存储过程，该过程返回一组行和一个 jsonwriter，然后将返回的列放入 flexigrid。

但是我遇到的问题在（document）.ready（）之外，当我有一个调用“loadTimeTrackersGrid（）”的函数时，它永远不会重新加载flexigrid或调用包含存储过程的文件。

我的功能（我试图开始工作）看起来像这样：

```
 function returnInvoicedItems() {
            loadTimeTrackersGrid();
        $('.menuBtn img').parent().children('ul').removeClass('menuShow');
    } 
```

这就是我调用“returnInvoicedItems”函数的方式：

```
<li><a href="#" onclick="returnInvoicedItems()">Non Invoiced Tracker</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:40:00.313

我不确定，但我想我可以看到问题所在。你的第二个函数**returnInvoicedItems()**调用**loadTimeTrackersGrid()**，它确实有一个 jQuery 代码（在行中`$('.menuBtn img').parent().children('ul').removeClass('menuShow');`。现在，如果你有一个 jQuery 调用，你不必在**$(document).ready( )** ?

尝试将**returnInvoicedItems()**移动到**$(document).ready()**中，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:18:51.757

这就像一个宝石：

```
 $('#viewTimeTrackersGrid').flexOptions({ url: 'Utilities/DataViewHandlers/ViewTimeTrackers.ashx?' + invoicedUrl + '&NonInvoiced=1' }).flexReload(); 
```

# heroku - Heroku buildpack - 安装 texlive 二进制包

> ID：13254558
> 
> 赞同：8
> 
> 时间：2012-11-06T15:48:46.557
> 
> 标签：heroku, latex, installation, tex, buildpack

我正在尝试`texlive-full`通过制作自定义 buildpack 在 heroku 上安装该软件包。我正在开发 django 应用程序，所以我目前使用的是`heroku-buildpack-python`（[https://github.com/heroku/heroku-buildpack-python](https://github.com/heroku/heroku-buildpack-python)）版本。

根据本教程： [https ://devcenter.heroku.com/articles/buildpack-binaries 我在](https://devcenter.heroku.com/articles/buildpack-binaries)[http://packages.ubuntu.com/lucid/texlive-binaries](http://packages.ubuntu.com/lucid/texlive-binaries) 上找到了 texlive 的二进制包（右栏中的链接 -*下载源包*），我在部分的python默认heroku buildpack中添加了这些代码行，`#Build time`以便在heroku上提取和安装texlive-full。

```
# Build Time

# Switch to the repo's context.
cd $BUILD_DIR

TEXLIVE_BINARY="http://archive.ubuntu.com/ubuntu/pool/main/t/texlive-base/texlive-base_2012.20120611-5.debian.tar.gz"
TEXLIVE_VENDOR="vendor/texlive"

# vendor awesome-vm
mkdir -p $1/$TEXLIVE_VENDOR
curl $TEXLIVE_BINARY -o - | tar -xz -C $1/$TEXLIVE_VENDOR -f - 
```

将 django 应用程序推送到 heroku 后，我可以看到 slug 有 58.0 MB 大（之前它只有 10.0 MB），所以它可能添加了 texlive-full 二进制包（大约 44 MB）。但是网站上的乳胶方程式仍然没有显示，并且出现了同样的错误；（未安装 texlive 时出现）

**ValueError at / latex 返回代码 32512 的公式：**

有没有更简单的方法在 heroku 上安装 texlive-full？或者在 buildpack 或任何其他类型的 debian 包中安装 texlive-full 的正确符号是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-16T15:31:16.667

基于[这个 buildpack](https://github.com/holiture/heroku-buildpack-tex)我构建了我自己的版本：[https ://github.com/syphar/heroku-buildpack-tex](https://github.com/syphar/heroku-buildpack-tex)

它在你的 slug 中安装了一个小版本的 TeX-Live 2013，你可以通过添加你自己的包（来自 CTAN 的集合或单个包）来扩展它。

由于您在 Heroku 上的（压缩）slug 大小限制为 300 MB，因此您无法在应用程序中进行 texlive-full。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T20:24:11.263

这个 buildpack 对我有用： [https ://github.com/holiture/heroku-buildpack-tex](https://github.com/holiture/heroku-buildpack-tex)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:54:58.943

[由于您的路径（ https://tex.stackexchange.com/questions/21692/latex-compilation-failure-on-mac-os-x-from-python-script](https://tex.stackexchange.com/questions/21692/latex-compilation-failure-on-mac-os-x-from-python-script)）有问题，往往会返回该错误代码本教程的最后一步在这里[https://devcenter.heroku.com/articles/buildpack-binaries](https://devcenter.heroku.com/articles/buildpack-binaries)并将构建包工作的目录添加到您的路径中。

# android - 带边框颜色的圆角

> ID：13254561
> 
> 赞同：27
> 
> 时间：2012-11-06T15:48:53.270
> 
> 标签：android, xml-drawable

我正在使用以下代码来获得圆角和彩色轮廓：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<gradient 
    android:startColor="@color/white" 
    android:endColor="@color/white" /> 

<corners 
    android:bottomRightRadius="2dp" 
    android:bottomLeftRadius="2dp" 
    android:topLeftRadius="2dp" 
    android:topRightRadius="2dp"/> 

<stroke
    android:width="5dip"
    android:color="@color/black" /> 
```

![带边框颜色的圆角](../Images/3262ffc8f6eff461910c71716ff1c943.png)

该图像显示了我现在得到的。由于`stroke`，圆角仅位于布局的外边缘，黑色轮廓的内边缘形成一个边缘锐利的矩形。如何将锋利的边缘转换为圆角？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-06T15:52:41.657

使用该`<shape>`标签在 XML 中创建一个圆角的可绘制对象。（您也可以使用形状标签做其他事情，例如定义颜色渐变）。

以下代码可以帮助您：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#ffffffff"/>    

<stroke android:width="3dp"
        android:color="#ff000000"
        />

<padding android:left="1dp"
         android:top="1dp"
         android:right="1dp"
         android:bottom="1dp"
         /> 

<corners android:bottomRightRadius="7dp" 
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-18T13:46:26.820

根据您的需要使用此自定义。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@android:color/transparent" />
    <stroke
        android:width="4dp"
        android:color="@android:color/holo_blue_light" />
    <corners android:radius="6dp" />
</shape> 
```

# java - 通过将另一个函数添加到参数来调用另一个函数

> ID：13254562
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:48:54.033
> 
> 标签：java, function, parameter-passing

我想知道是否可以通过将函数名称添加到参数来调用另一个函数。因此，例如，我想制作一个包含 4 个部分的脚本。每个部分都需要输入（我使用的是扫描仪，不要问为什么 :P 它的任务），然后需要将其传递给另一个脚本，例如计算和其他东西。

我从这个开始：

```
static int intKiezer(String returnFunctie, String text) {

    Scanner vrager = new Scanner(System.in);
    while (true) {

        System.out.println(text);
        int intGekozen = vrager.nextInt();

        if (vrager.hasNextInt()) {

            returnFunctie(intGekozen);
        }

        else {

            vrager.next();
            System.out.println("Verkeerde invoer!");
        }
    } 
```

如您所见，我试图通过调用它（returnFunctie（intgekozen））将获得的值推送到另一个函数。它应该以 intgekozen 作为参数调用 returnFunctie。但它不工作

我会这样调用函数：`intKiezer(sphereCalculations, "What radius do you want to have?")`. 所以输入的答案，如果正确的话，应该传递给另一个名为 sphereCalculations 的函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:59:06.723

这是一个想法。

定义一个接口，该接口具有一个可以执行您想要执行的任何计算的方法。例如：

```
interface Algorithm {
    int execute(int value);
} 
```

然后定义一个或多个实现接口的类并执行您希望它们执行的任何计算。例如：

```
class MultiplyByTwo implements Algorithm {
    public int execute(int value) {
        return value * 2;
    }
}

class AddThree implements Algorithm {
    public int execute(int value) {
        return value + 3;
    }
} 
```

然后，编写您的方法，使其接受 a`Algorithm`作为参数。使用所需的值执行算法。

```
static int intKiezer(Algorithm algo, String text) {
    // ...

    return algo.execute(intGekozen);
} 
```

通过传入 interface 的实现类之一的实例来调用您的方法`Algorithm`。

```
int result = intKiezer(new MultiplyByTwo(), "Some question");
System.out.println("Result: " + result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:24:41.083

正如@Jesper 所说，反射是可能的，而且可能只有反射。反射是对象可以分析自身并遍历其成员（属性和方法）的过程。就您而言，您似乎正在寻找一种方法。

从您的代码看起来，实际上您想要的似乎是将一个函数对象传递给您的代码，其中可以应用一个参数。这在 Java 中是不可能的。通过添加闭包，Java 8 中可能会出现类似的情况。您可以在 Groovy 中通过将闭包作为参数传递，或者其他支持闭包或函数的语言来做到这一点。

您可以通过定义抽象类/接口，将其实例传递给您的方法，然后调用将参数传递给它的方法来接近您想要的，例如：

```
interface Function <T> {
  public Integer call(T t);
}

public class TestFunction {
    static int intKiezer(Function<Integer> returnFunctie, String text) 
    {
        int a = 10;
        System.out.println(text);

        return returnFunctie.call(a);
    }

    public static void main(String[] args)
    {
        Function<Integer> function = new Function<Integer>() {
          public Integer call(Integer t) { return t * 2; }
        };

        System.out.println( intKiezer(function, "Applying 10 on function") );
    }
} 
```

如果您的意图是调用一个方法，那么您最好使用一些反射库。[我想到了Apache Common 的 MethodUtil](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/reflect/MethodUtils.html)。我认为这是你的男人：

```
invokeMethod(Object object, String methodName, Object arg)
    Invoke a named method whose parameter type matches the object type. 
```

# iphone - UITextField 隐藏键盘但 Reamin First Responder？

> ID：13254566
> 
> 赞同：3
> 
> 时间：2012-11-06T15:49:16.697
> 
> 标签：iphone, ios, ipad, uitextfield

我将 UITextField 子类化为显示 UIDatePicker 而不是键盘。输入日期是我们的应用程序经常发生的事情。当我们容纳键盘的另一个自定义类需要知道第一响应者是什么时，就会出现问题。

有没有办法在隐藏键盘的同时保持第一响应者的身份？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:51:42.780

不，您必须辞去响应者的职务（放弃焦点）才能关闭键盘。

**编辑：**看来我撒谎了。`[self.view endEditing:YES];`
仅供参考：它仅适用于 iOS 3.2+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:26:01.853

实际上，您应该为您的文本字段创建一个自定义 inputView 而不是子类化，它使用日期选择器作为自定义“键盘”。然后，它将保持第一响应者，甚至从不首先调用系统键盘。

# matlab - matlab如何从单元格中提取数字？

> ID：13254567
> 
> 赞同：3
> 
> 时间：2012-11-06T15:49:16.280
> 
> 标签：matlab

我在这里遇到了一个问题，我有一个像下面这样的单元格。两个向量，每一行有一个数字或一个首字母缩写词

```
'  33572'                                    '  AGCHIN'  
'  46058'                                    '  ABCHIN'  
'  Commercial Bank'                          '  48188'   
'  45913'                                    '  NINGBO'  
'  Commercial Bank'                          '  46701'   
'  Commercial Bank'                          '  30118'   
'  Commercial Bank'                          '  33076'   
'  Commercial Bank'                          '  46799'   
'  40749'                                    '  BITICLTD'
'  40440'                                    '  PARICHIN'
'  Commercial Bank'                          '  18925'   
'  16911'                                    '  CHANGSHA'
'  40220'                                    '  CHENGDU' 
'  32748'                                    '  CHISO'   
'  Commercial Bank'                          '  32378'   
'  48206'                                    '  CCBIAS'  
'  Non-banking Credit Institution'           '  23729'   
'  Specialised Governmental Credit Inst.'    '  43960'   
'  Commercial Bank'                          '  38203'   
'  38600'                                    '  CHMBIAS' 
'  45809'                                    '  MINSHENG'
'  23601'                                    '  PINGANTI'
'  Commercial Bank'                          '  42330'   
'  45550'                                    '  CHINESE' 
'  49481'                                    '  CHONGS'  
'  Investment Bank/Securities House'         '  32365'   
'  23602'                                    '  CITITI'  
'  39611'                                    '  LUOYANG' 
'  19950'                                    '  DALICITY'
'  23603'                                    '  DAILIANH'
'  17360'                                    '  DONGGUAN'
'  23604'                                    '  DONGGUTI'
'  39612'                                    '  DONGYING'
'  39060'                                    '  EVERGBC' 
'  42596'                                    '  EXPO'    
'  46703'                                    '  SINOBKU' 
'  34608'                                    '  FUJIAN'  
'  29182'                                    '  FUZHOU'  
'  35965'                                    '  GUANGDON'
'  29375'                                    '  GRCCOOP' 
'  29462'                                    '  GUOLIAN' 
'  29490'                                    '  HAITONG' 
'  18565'                                    '  HANGZIAS'
'  23730'                                    '  HANGZICT'
'  23758'                                    '  HARBIN'  
'  23420'                                    '  HEFEI'   
'  48411'                                    '  HETLONG' 
'  44174'                                    '  HUAX'    
'  Commercial Bank'                          '  29149'   
'  23421'                                    '  HUNAN' 
```

我想提取数字并将数字放入一个列中，谁能告诉我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:07:52.793

如果我理解正确，您想提取数字并将它们放入单个列中。为此，您必须过滤掉非数字。

```
Cstr = cellfun(@str2num, {C{:}}, 'Uniform', 0); % # Convert strings to numbers
Cnums = Cstr(cellfun(@(v)~isempty(v), Cstr));   % # Remove empty strings 
```

删除空单元格是因为`str2num`当它对包含非数字字符的字符串进行操作时会产生一个空向量。

现在我们有了一个只包含数字的元胞数组。要将元胞数组转换为列向量，只需执行以下操作：

```
nums = [Cnums{:}].' 
```

它应该产生以下内容：

```
nums =

       33572
       46058
       45913
       40749
       40440
       16911
       40220
       32748
       48206
       ... 
```

# sql-server - Azure VM 可用性、镜像

> ID：13254577
> 
> 赞同：2
> 
> 时间：2012-11-06T15:49:35.173
> 
> 标签：sql-server, azure, load-balancing, failover, windows-server

为菜鸟问题道歉，我以前从未处理过故障转移。

目前，我们有一个运行 Windows Server、SQL Server、ASP.NET 和一个（非常大的）Web 应用程序的硬件服务器。我们正在考虑将其迁移到 Azure VM。

我在 SLA 中看到，如果我运行**多个**Azure VM 实例，Microsoft 将只保证 99.95% 的可用性，以允许失败和重新启动等。

这是否意味着我因此需要管理和维护两台服务器？例如，两个版本的 SQL，每个版本都有一个数据库，以及两组 ASP.NET 应用程序文件？如果正确，这会使价格大幅上涨。

我认为没有办法将一台服务器“镜像”到另一台服务器以减少这种工作量？

此外，我们的硬件服务器上有 25,000 个上传的文件。我们是否需要将它们放在 VHD 上，然后将它们“链接”到正在运行的任何实时服务器，还是 Azure 会自动执行此操作？还是必须将它们从实时服务器镜像到故障转移服务器？

任何指针将不胜感激。我已经阅读了所有 Azure 文档，但并没有真正让事情变得更清楚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:39:23.560

好像你有多个你应该关注的主题。

让我们从数据库开始。最简单的事情是，如果您可以将您的 sql 服务器迁移到 sql azure 中。比你不需要维护它和维护你应该使用的机器。这会给您带来好处，即您的中心组件可以被 1 到多个应用程序使用。

第二个是你上传的文件。我假设您的应用程序允许上传文件以进行共享或其他。最好的办法是，如果您可以将这些文件写入 Windows azure blobstorage。通常这意味着您必须重写连接器，但这会集中另一个组件。第一步，您可以使它们可用，客户可以通过链接下载它。如果没有，您可以从他们那里加载文件并将它们交付给客户。

如果您不想重写组件，则必须使用 VHD。一个 VHD 只能有一个租约。所以只能使用一个实例。我见过的一种常见方式是，如果应用程序正在启动，它会尝试“恢复”租约。（试错之类的）

最后但并非最不重要的是您的 ASP.NET 应用程序。如果您有这样的应用程序，我会看看云实例。尽量不要考虑虚拟机，因为你必须做所有的管理。虚拟机是 IaaS。使用 .NET 应用程序应该能够轻松地对其进行转换和部署实例。比你不必考虑故障转移等。只需部署 2 个实例，负载均衡器将完成其余工作。

如果您能够“外包”SQL 服务器，您可以将您的机器最小化以用于 ASP.net 应用程序。尝试使用横向扩展而不是纵向扩展。这意味着使用更多的小节点，而不是一个大节点。（如果可能的话）

如果你真的要走虚拟机的路，你必须自己管理所有的东西，是的，你需要 2 个虚拟机。您还需要 3 个虚拟机，因为您没有自动负载平衡器，如果您只有 2 个，则只有一台机器可以导出端口 80。

高温高压

# sql-server - 从表中删除 LOB 列。Lob 已用页数不等于 0

> ID：13254583
> 
> 赞同：1
> 
> 时间：2012-11-06T15:49:49.813
> 
> 标签：sql-server, sql-server-2005

我更改了一个用于包含 Lob 列 (VarBinary(MAX)) 的表。

当我跑

```
select * from sys.dm_db_partition_stats
where [object_id] = object_id('MyTable') 
```

lob_used_pa​​ge_count 是 1014969。我以为它会是 0。我错了还是我需要做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:59:52.163

试试`ALTER TABLE MyTable REBUILD`。

似乎从下面的测试中得到了诀窍。

```
CREATE TABLE LobTest
  (
     PK INT IDENTITY PRIMARY KEY CLUSTERED,
     A  CHAR(7000),
     B  VARCHAR(MAX)
  )

INSERT INTO LobTest
SELECT 'A', REPLICATE(CAST('A' AS VARCHAR(MAX)), 10000) UNION ALL
SELECT 'A', REPLICATE(CAST('A' AS VARCHAR(MAX)), 10000) UNION ALL
SELECT 'A', REPLICATE(CAST('A' AS VARCHAR(MAX)), 10000)

ALTER TABLE LobTest
  DROP COLUMN B

SELECT *
FROM   sys.dm_db_partition_stats
WHERE  [object_id] = object_id('LobTest')

ALTER TABLE LobTest REBUILD

SELECT *
FROM   sys.dm_db_partition_stats
WHERE  [object_id] = object_id('LobTest')

DROP TABLE LobTest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:31:09.307

重建聚集索引。当您在 SQL Server 中删除一列时，它实际上并没有被物理删除，直到重新生成聚集索引。

# java - 在特定时间内为 Java 创建多个线程

> ID：13254587
> 
> 赞同：2
> 
> 时间：2012-11-06T15:50:01.143
> 
> 标签：java, multithreading, runnable

在 5 秒内创建 500.000 个线程的最佳方法是什么。（可运行）我创建了 for 循环，但它需要很多时间。例如;

```
startTime = System.currentTimeMills();

for (int i=0;i<500.000; i++){
 // create thread
  thread.start();
}

resultTime = (System.currentTimeMills() - startTime); 
```

所以 resultTime 大于 5 秒。我知道这取决于我的硬件和操作系统配置，但我只想知道在特定时间创建多个线程的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T15:54:07.177

我真的无法想象这是个好主意。每个线程占用合理数量的资源（默认情况下，每个线程占用 512k 堆），因此即使您创建了所有线程，您的 JVM 也会为资源而战。

如果您需要 500,000 个工作单元，我认为您最好将这些创建为`Runnable`s（而不是一次全部！）并将它们传递给调整到您的 environment.machine 的[ThreadPool](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)（例如，天真/简单的调整将是每个 CPU 一个线程）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:04:09.213

创建许多任务的最快方法是使用 ExecutorService

```
int processors = Runtime.getRuntime().availableProcessors();
ExecutorService es = Executors.newFixedThreadPool(processors);

long start = System.nanoTime();
int tasks = 500 * 1000;
for (int i = 0; i < tasks; i++) {
    es.execute(new Runnable() {
        @Override
        public void run() {
            // do something.
        }
    });
}
long time = System.nanoTime() - start;
System.out.printf("Took %.1f ms to create/submit %,d tasks%n", time / 1e6, tasks);
es.shutdown(); 
```

印刷

```
Took 143.6 ms to create/submit 500,000 tasks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:06:37.830

也许这个期望你的电脑抽得更好：概念：在每个核心之间共享工作。

```
public class Example {

    public static void main(String[] args) {
        for (int i = 0; i < 3; i++) {
            new Thread(new ThreadCreator()).start();  // with 4 cores on your processor
        }
    }

}

class ThreadCreator implements Runnable {

    @Override
    public void run() {
        for (int i = 0; i < 125000; i++) {
            new Thread().start();         // each core creating remaining thread
        }
    }
} 
```

**只用了 0,6 毫秒**！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:56:44.137

也许您可以制作几个特殊线程，每个线程生成 250000 个线程。

# java - 从大型 XML 文件创建 JAXB 对象

> ID：13254590
> 
> 赞同：1
> 
> 时间：2012-11-06T15:50:12.397
> 
> 标签：java, xml, object, jaxb

我正在寻找可以轻松创建对象以访问大型 XML 文件的东西。

XML 文件如下所示：

```
<?xml version="1.0" encoding="WINDOWS-1252"?>
    <vzg:vzg erstellt_von="##" erstellt_am="###" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:vzg="###" xsi:schemaLocation="###">
      <auswahl sicht="B" basisfplp_id="0" basisve_id="0">
        <fplp vzg_id="0" periode="2012/2013"/>
        <version vzg_id="###" name="###"/>
        <strecke name="11801">
          <von baukms_nr="###" km="#.#"/>
          <bis baukms_nr="###" km="#.#"/>
        </strecke>
        <bst vzg_id="#" name="#" kurzbez="##" bez="####" kritart="#"/>
        <bst vzg_id="#" name="#" kurzbez="##" bez="####" kritart="#"/>
        <bst vzg_id="#" name="#" kurzbez="##" bez="####" kritart="#"/>
        <bst vzg_id="#" name="#" kurzbez="##" bez="####" kritart="#"/>
        <bst vzg_id="#" name="#" kurzbez="##" bez="####" kritart="#"/>
        ... 
```

我想要一个对象来计算一些 XML 属性。

像：

列表 vzg_id=vzg.auswahl.bst;

int res=vzg_id.get(3) * vzg.auswahl.strecke.von.baukms_nr；

由于 XML 有大约 16000 行，因此很难为每个 XMLElement 创建一个类。

我现在所做的：

主类

```
import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

import java.io.File;

import javax.xml.bind.JAXB;

public class Main
{
    public static void main(String[] args)
    {
        VZG vzg = JAXB.unmarshal(new File("./XMLVZG.xml"), VZG.class);

        System.out.println(vzg.erstellt_am+ " "+vzg.erstellt_von+"\n"+vzg.aw.sicht);
    }
} 
```

VZG级

```
import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class VZG
{
    @XmlElement(name="auswahl")
    AuswahlSicht aw;
    @XmlAttribute(name="erstellt_von")
    String erstellt_von;
    @XmlAttribute(name="erstellt_am")
    String erstellt_am;
    @XmlAttribute(name="xsi")
    String xmlns_xsi;   
} 
```

类奥斯瓦尔

```
import java.util.List;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="auswahl")
public class AuswahlSicht
{
    @XmlAttribute(name="basisfplp_id")
    int basisfplp_id;
    @XmlAttribute(name="basisve_id")
    int basisve_id;
    @XmlAttribute(name="sicht")
    String sicht;

} 
```

因此，我现在能够获取 Root 和 Cild 的属性，但我仍然有大约 1000 个具有属性的孩子，我正在寻找一种自动解析 XML 以获取对象的方法。简单描述：XML 文件

```
<root>
 <child>
   <Subchild id="1"/>
    <subsubchild id=2/>
    <subsubchild id=33/>
 </child>
</root> 
```

对象应该是这样的：

列出 subsubchilds = root.child.subchild.subsubchild；int id_one=subsubchilds.get(0);

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:19:58.193

为现有的 XML 手动编写 JAXB 类很少是一个好主意。JDK 具有特殊的命令行工具，可以从 XML 模式为您 (xjc) 生成这些类。如果架构不可用，您可以尝试从 XML 生成架构（各种工具都可以做到这一点 - 例如 XMLSpy），然后使用 xjc 生成类。

# google-cloud-storage - 导入 gs://bucket_name/Cloud.sql 失败

> ID：13254592
> 
> 赞同：1
> 
> 时间：2012-11-06T15:50:15.280
> 
> 标签：google-cloud-storage, google-cloud-sql

我已将数据库所需的所有内容存储在 phpmyadmin 中，并从中导出了我的数据库。那已保存为 Cloud.sql ，所以现在我借助此链接[https://developers.google.com/cloud-sql/docs/import_export](https://developers.google.com/cloud-sql/docs/import_export)将这个 sql 文件导入到 Google Cloud Storage 。

现在，在使用实例操作中的 Import 选项导入 .sql 的内容后，它显示绿色的工作标志，过了一会儿它停止了，当我签入 Logs 时，它显示 Failed to import gs:// bucket_name/Cloud.sql：发生了未知问题（ERROR_RDBMS）所以，由于不清楚，我无法找出错误背后的原因，以及如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T02:12:18.220

Google Cloud Sql probably doesn't know to which database the gs://bucket_name/Cloud.sql commands apply.

From [https://groups.google.com/forum/#!topic/google-cloud-sql-discuss/pFGe7LsbUaw](https://groups.google.com/forum/#!topic/google-cloud-sql-discuss/pFGe7LsbUaw):

> The problem is the dump doesn't contain the name of the database to use. If you add a 'USE XXX' at the top the dump where XXX is the database you want to use I would expect the import to succeed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-06T12:40:20.353

我有一些问题正在吐出`ERROR_RDBMS`错误。

事实证明google现在确实有更精确的错误，但你必须去这里

`https://console.cloud.google.com/sql/instances/{DATABASE_NAME}/operations`

您将看到操作失败原因的描述。

# extjs - 突出显示 extjs4 折线图的一部分

> ID：13254593
> 
> 赞同：5
> 
> 时间：2012-11-06T15:50:19.990
> 
> 标签：extjs, charts, extjs4

在 extjs 4.1.1a 中，下面的代码是折线图的工作示例。现在我需要在给定的最小和最大时间戳上突出显示该图表的一部分。

```
{'xtype' : 'chart',
'store' : 'ChartData',
'height' : '100%',
'width' : '100%',
'legend' : {'position' : top},
'axes': [{
    'title': 'Power',
    'type': 'Numeric',
    'position': 'left',
    'fields': ['power']
},{
    'title': 'Timestamp',
    'type': 'Numeric',
    'position': 'bottom',
    'fields': ['timestamp'],
    'minorTickSteps': 3
}],
'series': [{
    'type': 'line',
    'fill': true,
    'axis' : 'left',
    'xField': 'timestamp',
    'yField': 'power'
}]} 
```

我搜索了 sencha 论坛，并没有找到特别符合我要求的内容。现在，我设法使用自定义渲染器更改折线图上点的颜色。

```
'renderer': function(sprite, record, attr, index, store) {
var item = store.getAt(index);
if(item != undefined && (item.get('timestamp') < startdate || item.get('timestamp') > enddate)){
    return Ext.apply(attr, {'fill': '#00cc00', 'stroke-width': 3, 'radius': 4});
}else{
    return Ext.apply(attr, {'fill': '#ff0000', 'stroke-width': 3, 'radius': 4});
}} 
```

但我还没有找到改变线条下方颜色的方法。对此有何建议？

**更新 - 现在工作正常**

我根据科伦坡给出的答案实施了一个解决方案。

```
doCustomDrawing: function () {: function (p){
var me = this, chart = me.chart;
if(chart.rendered){
    var series = chart.series.items[0];
    if (me.groupChain != null) {
        me.groupChain.destroy();
        me.groupChain = null;
    }
    me.groupChain = Ext.create('Ext.draw.CompositeSprite', {
        surface: chart.surface
    });
    if(series != null && series.items != null){
        var surface = chart.surface;
        var pathV = 'M';
        var first = true;
        // need first and last x cooridnate
        var mX = 0,hX = 0;
        Ext.each(series.items, function(item){
            var storeItem = item.storeItem,
                    pointX = item.point[0],
                    pointY = item.point[1];
            // based on given startdate and enddate start collection path coordinates
            if(!(storeItem.get('timestamp') < startdate || storeItem.get('timestamp') > enddate)){
                if(hX<pointX){
                    hX = pointX;
                }
                if(first){
                    first = false;
                    mX = pointX;
                    pathV+= + pointX + ' ' + pointY;
                }else{
                    pathV+= ' L' + pointX + ' ' + pointY;
                }
            }
        });
        var sprite = Ext.create('Ext.draw.Sprite', {
            type: 'path',
            fill: '#f00',
            surface: surface,
            // to draw a sprite with the area below the line we need the y coordinate of the x axe which is in my case items[1]
            path : pathV + ' L'+ hX + ' ' + chart.axes.items[1].y + ' L'+ mX + ' ' + chart.axes.items[1].y + 'z'
        });
        me.groupChain.add(sprite);
        me.groupChain.show(true);
    }
}} 
```

这看起来非常好，并且具有我希望的效果**，**如果您调整容器的大小，新的精灵将从图表**中**清除。再次感谢科伦坡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:15:24.067

这是可以实现的。这是我将如何做到的。

**`afterrender`1\. 添加事件监听器`series`。**

```
listeners: {
                afterrender: function (p) {
                    this.doCustomDrawing();
                },
                scope: me
} 
```

**2\. 创建一个 CompositeSprite**

```
doCustomDrawing: function () {
    var me = this, chart = me.chart;

    if (chart.rendered) {
        var series = chart.series.items[0];
        if (me.groupChain != null) {
            me.groupChain.destroy();
            me.groupChain = null;
        }

        me.groupChain = Ext.create('Ext.draw.CompositeSprite', {
            surface: chart.surface
        });

        // Draw hilight here
        Ext.each(series.items, function (item) {
            var storeItem = item.storeItem,
                pointX = item.point[0], 
                pointY = item.point[1];

            //TODO: Create your new line sprite using pointX and pointY
            // and add it to CompositeSprite me.groupChain  

        });

        me.groupChain.show(true);
    }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:30:54.880

没有“内置”的方法可以解决这个问题。您可能在寻找它时遇到了一些困难，因为“突出显示”折线图目前在 ExtJS API 中意味着完全不同的东西。它通常是指将鼠标悬停在数据系列上时使线条和标记变为粗体。

不管你的想法听起来很有趣，我可能需要在我即将推出的项目中使用它。

我现在没有时间制定确切的代码，但这可以通过创建一个矩形[**精灵**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.draw.Sprite)并将其添加到图表的[**表面属性**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.chart.Chart-property-surface)来完成。

即使在使用文档`Ext.draw.Surface.add`中描述的方法[**全部**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.draw.Surface-method-add)呈现图表之后，您也可以这样做。

您将不得不提出确定宽度和定位的逻辑，如果我正确地记住了图表 API，您应该能够通过在图表内对象的`items`属性中查找来提取单个记录的 x 坐标（水平位置）。`Ext.chart.series.Line`

不过，突出显示的高度应该很容易 - 只需阅读图表的高度。

# r - 具有大型外部资产的 R 包

> ID：13254595
> 
> 赞同：5
> 
> 时间：2012-11-06T15:50:24.380
> 
> 标签：r, package

这是我之前发布的[问题](https://stackoverflow.com/questions/11314342/managing-external-assets-in-r-package)的后续。总而言之，我正在编写一个名为 Slidify 的 R 包，它使用了几个基于非 R 的外部库。我之前的问题是关于如何管理依赖关系。

提出了几种解决方案，其中最有吸引力的解决方案是将外部库打包为不同的 R 包，并使其成为 Slidify 的依赖项。这是包所遵循的策略`xlsx`，它将 java 依赖项打包为不同的包`xlsxjars`。

对我来说，另一种选择是提供外部库作为下载并`install_libraries`在 Slidify 中打包一个函数，它会自动获取所需的文件并将其下载到包目录中。我还可以添加一个`update_libraries`功能，如果事情发生变化，它会更新。

我的问题是，为不基于 R 的外部库进行 CRAN 舞蹈是否有任何特定优势。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:35:51.920

As discussed in the comment-thread, for a package like slidify with a number of large, (mostly) fixed, and portable files, a "resource" package makes more sense:

*   you will know the path where it installed (as the package itself will tell you)
*   users can't accidentally put it somewhere else
*   you get CRAN tests
*   you get CRAN distribution, mirrors, ...
*   users already know `install.packages()` etc
*   the more nimble development of your package *using* these fixed parts is not held back by the large support files

# java - 如何在 org.eclipse.epf.richtext.RichTextEditor 中禁用水平滚动

> ID：13254601
> 
> 赞同：0
> 
> 时间：2012-11-06T15:51:00.177
> 
> 标签：java, swt, eclipse-rcp, rich-text-editor

我有一个 Eclipse RCP 应用程序，它有一个使用`org.eclipse.epf.richtext.RichTextEditor`. 所以所有的代码都对我开放，可以改变我认为合适的方式。我发现 rte 使用浏览器来显示文本。

我的问题是我希望 rte 包装文本而不是放置水平滚动条。所以我希望看看是否有人使用过这个 rte 并想出了如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:57:19.127

检查显示在[SWT 浏览器小部件](http://www.eclipse.org/swt/snippets/#browser)中的 HTML （调用`getText()`）。这应该让您了解它是如何组织的。找到包装编辑器的 HTML 元素，将其宽度设置为`100%`并确保对`body`和`html`元素执行相同操作，以使小部件的宽度传播到编辑器元素。

这应该已经解决了这个问题，除非编辑器中的文本包含比小部件更宽的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:56:49.230

我认为在每个 SWT 小部件的构造函数中，您都可以传递一个样式。因此，例如，如果您想要垂直滚动但没有水平滚动，您可以这样做：

```
new MyWidget(parent, SWT.V_SCROLL); 
```

这样小部件就不会水平滚动。它`RichTextEditor`本身在其 API 中没有任何关于文本换行的内容，所以我想你不能直接改变它。

关于 SWT 样式的更多信息：[SWT 样式位](http://wiki.eclipse.org/SWT_Widget_Style_Bits)

# forms - 防止表单提交错误的验证码值

> ID：13254604
> 
> 赞同：0
> 
> 时间：2012-11-06T15:51:15.583
> 
> 标签：forms, captcha, form-submit

嗨，我使用了一个基本的验证码脚本，如下所示。我面临的问题是，尽管验证码值错误，但仍提交了表单。如果 Captcha 的值输入错误，我需要阻止表单提交。

```
<?php
  if(isset($_POST['submit']))
{
  $hash = (!empty($_POST['hash'])) ? preg_replace('/[\W]/i', '', trim($_POST['hash'])) : ''; // Remove any non alphanumeric characters to prevent exploit attempts
  $captchacode = (!empty($_POST['captchacode'])) ? preg_replace('/[\W]/i', '', trim($_POST['captchacode'])) : ''; // Remove any non alphanumeric characters to prevent exploit attempts
  // function to check the submitted captcha
  function captchaChars($hash)
  {
    //  Generate a 32 character string by getting the MD5 hash of the servers name with the hash added to the end.
    //  Adding the servers name means outside sources cannot just work out the characters from the hash
    $captchastr = strtolower(md5($_SERVER['SERVER_NAME'] . $hash));
    $captchastr2 = '';
    for($i = 0; $i <= 28; $i += 7)
    {
      $captchastr2 .= $captchastr[$i];
    }
    return $captchastr2;
  }
  if(!empty($captchacode))
  {
    if(strtolower($captchacode) == captchaChars($hash))  // We convert submitted characters to lower case then compare with the expected answer
    {
      echo '<h3>The submitted characters were correct</h3>';

    }
    else
    {
      echo '<h3>The submitted characters were WRONG!</h3>';
       return true;
    }

  }

  else
  {
    echo '<h3>You forgot to fill in the code!</h3>';
    return true;
  }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:54:14.953

我在我的网站上启动并运行了验证码，但它并没有阻止垃圾邮件。恐怕它已作为一种垃圾邮件预防机制受到损害。

除此之外，如果验证码不正确，则需要返回 false 并且不会提交表单。

# objective-c - 组织数据模型目标c

> ID：13254605
> 
> 赞同：0
> 
> 时间：2012-11-06T15:51:23.907
> 
> 标签：objective-c, ios, data-modeling

我的应用程序中有这个视觉部分。我在下面附上了文件：

有下一个用户界面控件：

第一个 UIScrollView (_blueScrollView) 位于`UIViewController`可以包含许多其他视图的主视图上，每个视图称为 _magentaView... 每个 _magentaView 都包含用于存储 UILabel 对象的 UIView (_labelView...)。所以有一些类似`UITableView`in 的结构`UITableView`。

在我的情况下，所有对象都有`UIViewController`类。

我需要访问存储在标签视图中的所有标签。我需要获取这些对象的属性文本的值。

所以如果我在标准情况下做这将是这样的

```
for (UIViewController *magentaVC in scrollViewObjects) {
for (UIViewController *labelVC in magentaObjects) {
and get my UILabel objects here.
}
} 
```

但我认为这是不正确的。因为我需要为此使用数据模型来使用 UIViewController 对象。您对此有何看法，我需要选择哪种方式？

![在此处输入图像描述](../Images/b592df7d10c3fe7c8f659993f220ae79.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:13:08.760

这正是`UITableView`. 表格本身嵌入了一个滚动视图；magentaView 1 和 2 将是表格的部分，而 labelViews 将是表格视图单元格。

# c# - 强制服务在 Windows 关闭时关闭 - Prism

> ID：13254606
> 
> 赞同：0
> 
> 时间：2012-11-06T15:51:28.820
> 
> 标签：c#, mvvm, service, prism

我正在使用 Prism 和 MVVM 模式

我有一个在我的容器中注册的存储库中运行的服务，如下所示：

```
_container.RegisterType<ITheService, TheService>();
_container.RegisterType<IRepository<Order>, Repository>(new ContainerControlledLifetimeManager()); 
```

存储库的构造函数将订阅该服务，然后该服务将接收新元素（例如每秒 5 到 10 个）。问题是由于这个订阅，当我关闭我的 GUI 窗口时，保存服务的模块没有关闭，服务继续运行，而不是被 dispose 关闭。

如果我不在 MVVM 中，我会在关闭窗口时取消订阅该服务，但 shell 窗口不能这样做。

我看到 2 个解决方案 * 有一个 eventtaggregator 可以让我的存储库知道 shell 何时关闭，然后取消订阅服务（虽然不确定它是否会工作） * 从 shell 解析存储库（因为它已注册为单例），并取消订阅当服务，但那会很丑陋....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:02:00.683

所以我尝试了我的第一个想法，即使用 EventAggregator。

当 Closed 事件被触发时，shell 在 EventAggregator 中发布一个事件。保存服务的存储库已订阅该事件，并会在 shell 关闭时收到通知。所以我只需要在收到通知时关闭服务...

# javascript - 如何将来自异步回调的字符串加在一起？

> ID：13254608
> 
> 赞同：0
> 
> 时间：2012-11-06T15:51:32.123
> 
> 标签：javascript, asynchronous, google-chrome-extension, callback

此扩展程序调用 Goo.gl URL 缩短器，然后尝试将其回复添加到一个字符串中（用于发送电子邮件）。但是，由于它是异步的，因此代码会在将缩短的 URL 加在一起之前继续运行。在继续之前，我怎样才能让它添加到字符串中？

```
for(i;i<length;i++){
      getShortURL(tabs[i].url, function(short_url) { 
      string += encodeURL(short_url); 
      });
    }
//do something with string... 

//
function getShortURL(long_url, callback ){
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:55:19.943

`callback`您可以在 url 字符串返回后继续您的操作。

```
for(i;i<length;i++){
      getShortURL(tabs[i].url, function(short_url) { 
      string += encodeURL(short_url); 
      //do something with string... 
      });
    }

//
function getShortURL(long_url, callback ){
...
} 
```

如果代码需要在所有 url 返回后运行，请使用条件检查这是您的最后一个代码。

这可能对您有用：

```
for(var i=0,x=0;i<length;i++){
      getShortURL(tabs[i].url, function(short_url) { 
          string += encodeURL(short_url); 
          x++;
          if (x === length) {
              //do something with string... 
          }
      });
    }

//
function getShortURL(long_url, callback ){
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:01:32.577

你实际上有两个问题。一是您的异步​​方法立即返回，二是由于您的调用是异步的，因此无法保证它们会按照您发送它们的顺序返回。

你可以这样做：

```
var strings = [];
for(i;i<length;i++){
      getShortURL(tabs[i].url, function(short_url) { 
          string[i] = encodeURL(short_url);
      });
}

// wait until the array is filled (use setTimeout) and then construct the final string from the array. 
```

# ruby - 如何在没有 Rails 的情况下使用 Liquid？

> ID：13254613
> 
> 赞同：1
> 
> 时间：2012-11-06T15:51:45.840
> 
> 标签：ruby, liquid

如何在没有 Rails的情况下使用[Liquid ？](https://github.com/Shopify/liquid "液体")[Liquid Wiki](https://github.com/Shopify/liquid/wiki/Using-liquid-without-rails "使用不带导轨的液体")上没有关于此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:31:19.880

看看这个[Sinatra 食谱](http://recipes.sinatrarb.com/p/views/liquid)，你可以。

如果您需要非基于红宝石的东西，您可能还想检查像[LiquidNode这样的分叉？](https://github.com/sirlantis/liquid-node)

# ajax - 使用对 cakephp 的 ajax 调用的内容填充我的 jquery 自动完成功能

> ID：13254617
> 
> 赞同：0
> 
> 时间：2012-11-06T15:52:06.260
> 
> 标签：ajax, jquery-ui, autocomplete, cakephp-2.1

我有一个输入字段，我正在变成一个 jqueryUI 自动完成：

```
$( "#autocomplete" ).autocomplete({
    autoFocus: true,
    source: mylist
 }); 
```

mylist 变量只是一个数组格式的字符串`['Value1','Value2,'Blah']`，我最初只是硬编码到脚本中。

现在我希望 mylist 变量成为我的 cakephp 应用程序中对函数的 ajax 调用的结果。函数基本如下，就是把所有的数据抓取成一个list，json编码。

```
public function source() {
    $this->layout = 'ajax';
    $countries=$this->Country->find('list',array('fields'=>'Country.country'));
    ChromePhp::log($countries);
    echo json_encode($countries);
} 
```

这输出：

```
{"1":"Afghanistan","2":"Albania ","3":"Algeria ","5.. 
```

我的问题是将这个函数的输出（最终在 ajax 成功回调中作为“数据”）转换为正确的格式，以放入自动完成的选项数组中。

我可以在控制台记录每个值，但我很难过。基本上以正确的语法抓住稻草。

```
$.ajax({
    type: "GET",
    dataType: "json",
    url: "/source/",
    success: function(data){
        /*
        magic array string creation code would go here instead of my code below...
        */
        $.each(data, function(i, item) {
            console.log(item);
        });
        console.log('data',data);

    }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:48:47.040

如果您以正确的格式为其提供内容，自动完成插件可以为您完成很多工作。

我首先将变量重新索引为`$countries`从 0 开始。您可以使用该`array_values()`函数：

```
echo json_encode(array_values($countries)); 
```

这应该为您提供以下格式的 JSON：

```
['Afghanistan','Albania','Algeria',...] 
```

然后，您可以将自动完成代码中的源属性更改为源操作的 url。

```
$( "#autocomplete" ).autocomplete({
    autoFocus: true,
    source: "/your_controller/source"
}); 
```

自动完成插件不会为您过滤结果，而是将查询字符串添加到带有`term`字段（例如 /your_controller/source?term=foo）的 url，因此您需要修改`find()`方法以使用它。

```
$countries = $this->Country->find('list', array(
    'fields' => 'Country.country',
    'conditions' => array(
        'Country.country LIKE' => $this->request->query['term'] . '%'
    )
)); 
```

[您可以在API 文档](http://api.jqueryui.com/autocomplete/#option-source)的自动完成中阅读有关该`source`选项可以接受的不同类型的更多信息。

# spring - Spring 的 DataSourceUtils.applyTransactionTimeout() 使用的方法目的和值是什么？

> ID：13254619
> 
> 赞同：0
> 
> 时间：2012-11-06T15:52:07.577
> 
> 标签：spring, spring-jdbc

Spring 的 DataSourceUtils 定义了一个应用事务超时的[方法](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/DataSourceUtils.html#applyTransactionTimeout%28java.sql.Statement,%20javax.sql.DataSource%29)，而没有明确指定它。Javadoc 内容如下：

```
public static void applyTransactionTimeout(Statement stmt,
                                           DataSource dataSource)
                                    throws SQLException
Apply the current transaction timeout, if any, to the given JDBC Statement object. 
```

我的问题是：

1.  超时值从何而来？
2.  为什么需要调用？如果事务是通过 Spring 获取的，无论如何都不会应用任何超时（或默认超时）？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:05:06.910

1.  价值来自当前交易，如果有的话（即`@Transactional(..., timeout = ...)`）。

2.  Spring`DataSourceUtils.getConnection()`不代理它返回的连接，因此 Spring 不能将任何配置应用于`Statement`由这些连接自动创建的 s。

实际上，在 Spring 中使用 JDBC 的推荐方法是通过`JdbcTemplate`. `JdbcTemplate`是完全事务感知的，因此如果需要，它会在内部调用有问题的方法。

但是如果你需要使用原始`Connection`的JDBC，你可以使用这种方法来配置它们`@Transactional(...)`，依此类推。

# java - 使用 Gradle 的 JAR 中的 META-INF/服务

> ID：13254620
> 
> 赞同：30
> 
> 时间：2012-11-06T15:52:11.787
> 
> 标签：java, plugins, jar, gradle

我想构建一个可以加载的插件模块[`ServiceLoader`](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)。这需要向`META-INF/services`目录中添加一个文件，该文件以服务接口命名，并包含实现它的类的限定路径。然后你可以通过调用来加载这些服务`ServiceLoader.load()`。

这是一个例子：

假设我们要提供一个名为`org.example.plugins.PluginService`. 然后，我们在类中提供此服务的实现`org.example.plugins.impl.ExamplePlugin`。

如果我们想要某种插件机制，我们可以创建一个包含实现的 JAR 文件。此 JAR 文件还必须包含该文件`META-INF/services/org.example.plugins.PluginService`。此文件必须包含一行

```
org.example.plugins.impl.ExamplePlugin 
```

使`ServiceLoader`找到实现。如果该 JAR 文件在构建路径中，则可以通过调用加载插件

```
Iterator<PluginService> it = ServiceLoader.load(PluginService.class).iterator(); 
```

该迭代器将使您也可以访问`ServiceLoader`.

`META-INF`出于某种原因，Gradle默认不将文件包含到目录中。有没有办法让生成的 JAR 包含这样的文件？

我已经[`metaInf`](http://gradle.org/docs/current/groovydoc/org/gradle/api/tasks/bundling/Jar.html#metaInf%28groovy.lang.Closure%29)在课堂上找到了方法`Jar`。但是我不知道 groovy 足够好，无法自己找到解决方案。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-06T19:23:07.057

你放在`META-INF/services/org.example.plugins.PluginService`，`src/main/java`但它不是源文件，它是资源文件，因此它应该根据 Maven 目录布局约定放在资源文件夹中，即

```
src/main/resources/META-INF/services/org.example.plugins.PluginService 
```

在这种情况下，一切都应该开箱即用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T19:10:44.530

[同时，我在（有点）类似的问题](https://stackoverflow.com/questions/6683375/how-do-i-add-a-properties-file-into-my-war-using-gradle)中找到了解决我的问题的方法。

将以下内容添加到`gradle.build`文件中，解决了我的问题

```
jar {
  from ('./src/main/java') {
    include 'META-INF/services/org.example.plugins.PluginService'
  }
} 
```

现在 JAR 文件看起来像预期的那样

```
.
|- org
|  `- example
|     `- plugins
|        `- impl
|           `- ExamplePlugin.class
`- META-INF
   |- MANIFEST.MF
   `- services
      `- org.example.plugins.PluginService 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T14:24:39.257

如果您碰巧继承了一些不遵循 maven 约定的基于 ant 的遗留代码，以下可能会有所帮助。

定义您的源集以匹配旧结构，并包括这样的一行：

`include 'META-INF/services/**'`

在您的源集中。这种模式是通用的，将获取您所有的元信息服务。

下面的完整示例。

```
sourceSets {
    main {
        java {
            srcDir 'src'
            exclude '**/Test*.java'
        }
        resources {
            srcDir 'src'
            include '**/*.xml'
            include 'META-INF/services/**'
        }
    }
    test {
        java {
            srcDir 'src'
            include '**/Test*.java'

        }
        resources { srcDir 'resources' }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T07:29:46.990

希望他们能像 ant 一样在 jar 任务中实现这一点。有人已经在研究它： http: [//fgaliegue.blogspot.fr/2013/06/gradle-serviceloader-support.html](http://fgaliegue.blogspot.fr/2013/06/gradle-serviceloader-support.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-21T03:15:21.037

嗨可以试试这个：[https ://plugins.gradle.org/plugin/com.github.harbby.gradle.serviceloader](https://plugins.gradle.org/plugin/com.github.harbby.gradle.serviceloader)

用法

```
serviceLoader {
    serviceInterface 'org.example.plugins.PluginService'
    serviceInterface 'org.example.plugins.PluginService2'
} 
```

# mongodb - 存储用于分析的统计数据的最佳做法是什么？

> ID：13254622
> 
> 赞同：0
> 
> 时间：2012-11-06T15:52:16.733
> 
> 标签：mongodb, redis, analytics, metrics

我想存储用户访问我网站的页面的数据。如果每个页面都有一个`page_id`，并且每个用户都有一个`session_id`和`user_id`，那么使用 Redis 之类的东西会不会过大，或者我应该只使用基本的文本日志文件？

我考虑使用 session_id 的原因是忽略从同一个 session_id 访问同一个页面。我想跟踪 user_id，这样我就可以构建用户查看页面的图表。

该应用程序使用 MySQL，我当然可以使用它，我只考虑 Redis，因为它的写入速度快。我也可以使用 MongoDB，但如果这些是不必要的方法，那么我不必这样做。从理论上讲，这些指标的规模可能会变得非常大——在这一点上，Redis 是一个可行的选择吗？只是想弄清楚你在什么方面取得了成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:06:00.327

在此处阅读 MongoDB 站点上相关的真实世界用例。10gen.com/use-case/high-volume-data-feeds 这可以给你一些见解

# jquery - 使用 JQuery 动态对齐图像中心

> ID：13254625
> 
> 赞同：0
> 
> 时间：2012-11-06T15:52:30.057
> 
> 标签：jquery, html, firefox, internet-explorer-8, opera

我正在尝试以网格类型格式动态对齐图像中心。每个图像都是从具有最大高度和最大宽度的 CDN 动态加载的`.thumbnail img`。容器 div 的宽度和高度是固定的。

```
#storeItems .thumbnail {
border:1px solid #637678;
width:136px;
height:151px;
padding:1px;
position:relative;
margin:0 auto;
display:block;
overflow:hidden;
}
#storeItems .thumbnail img {
max-width:130px;
max-height:130px;
display:block;
position:relative;
} 
```

我创建的 JavaScript 可以在 IE8+、Chrome、Opera、Safari 和 Firefox 中正确对齐图像。但是，我的问题出现在 IE8+、Opera 和 Firefox 中，当您第一次加载页面时，它不会对齐，直到您刷新页面。一旦页面被缓存，它就会保持对齐。这似乎只是在没有缓存页面的初始页面加载之后。

```
(function($) {
$("#storeItems .thumbnail").each(function(i){
    var img = $(this).find('img');

    var y = $(this).height(),
        x = $(this).width();
    /**
     * WebKit browsers which incorrectly calculates margin
     */
    if($.browser.webkit) {
        $(this).css({
            'display': 'table-cell',
            'vertical-align': 'middle',
            'text-align': 'center'
        });
        img.css({
            'margin': 'auto auto'
        });
    }
    else {
        img.css({
            'margin-top': ((y-img.height())/2)+'px',
            'margin-left': ((x-img.width())/2)+'px'
        });
    }
});
})(jQuery); 
```

我在页面底部加载了 JavaScript。我尝试将其加载到标题中。我也在`$(document).ready();`标题和底部都使用过；尝试后它根本没有对齐。有什么我想念的吗？似乎在第一次运行时这些浏览器中不会发生计算。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:56:44.630

做这个：

```
(function($) {
    $(document).ready(function() {
        $("#storeItems .thumbnail").each(function(i){
            var img = $(this).find('img');

            var y = $(this).height(),
                x = $(this).width();
            /**
             * WebKit browsers which incorrectly calculates margin
             */
            if($.browser.webkit) {
                $(this).css({
                    'display': 'table-cell',
                    'vertical-align': 'middle',
                    'text-align': 'center'
                });
                img.css({
                    'margin': 'auto auto'
                });
            }
            else {
                img.css({
                    'margin-top': ((y-img.height())/2)+'px',
                    'margin-left': ((x-img.width())/2)+'px'
                });
            }
        });
    });
})(jQuery); 
```

# c++ - 实现 CException c++ 类时需要考虑哪些事项

> ID：13254632
> 
> 赞同：0
> 
> 时间：2012-11-06T15:52:44.013
> 
> 标签：c++, visual-c++

我尝试了一个简单的 C++ CException 实现类，它派生自 std::exception。我做错了什么，我应该添加什么，我应该改进什么？应该考虑的 C++ 异常还有什么？目的是使其尽可能独立于平台。代码如下： 编辑：

```
class CeException: public std::exception {
public:
    char* getascii(const wchar_t* msg)
    {
        char* pasc = new char[wcslen(msg) + 1 ];
        wcstombs(pasc, msg, wcslen(msg) + 1);
        return pasc;
    }
    CeException(const wchar_t* msg, char* pasc = NULL ):
    exception(pasc = getascii(msg))
    {

        delete[] pasc;
    }
    CeException(const string msg) 
    {   

    }
    virtual ~CeException()
    {       
    }
    BOOL GetErrorMessage(LPTSTR lpszError, UINT nMaxError, PUINT pnHelpContext = NULL )
    {

        const char* pasc = this->what();

        wchar_t* puni = new wchar_t[strlen(pasc)+1];
            mbstowcs(puni,pasc, strlen(pasc) + 1);

        wcscpy_s(lpszError,nMaxError, puni);
        delete[] puni;
        return 0;
    }
    void Delete()
    {
        delete this;
    }

}; 
```

我使用您的指示对我的最终实现进行了编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:57:36.687

通常你不需要在异常类中实现方法，所以它可能看起来像这样：

```
class YourException : public std::runtime_error
{
public:
    explicit YourException(const std::string & msg) :
        std::runtime_error(msg)
    {
    }
}; 
```

我不明白有其他方法的原因。

你不应该从它的构造函数中抛出异常。相反，客户端代码应该抛出你的异常：

```
 throw YourException("Some error"); 
```

# mule - 具有请求-响应交换模式的 Mule 自定义聚合器

> ID：13254636
> 
> 赞同：1
> 
> 时间：2012-11-06T15:53:03.190
> 
> 标签：mule

我正在尝试向使用`<recipient-list>`和自定义聚合器组合多个结果的入站 http 端点发出请求。如何让我的入站 http 端点“等待”自定义聚合器的结果？

这是我的示例流程。聚合器完美运行。但由于是异步的，入站 http 端点会立即返回。我真正想做的是从自定义聚合器返回结果作为对 http 端点的响应。我觉得我错过了一些简单的东西。

```
<flow name="AggregationExample">
    <http:inbound-endpoint
        exchange-pattern="request-response"
        host="localhost"
        port="8082"
        path="test/aggregate"
        />  

    <recipient-list evaluator="groovy" expression="['vm://source1','vm://source2']"></recipient-list>

        <!-- How do I wait for result of custom aggregator? -->
</flow>

<flow name="SourceAggregation">
    <vm:inbound-endpoint path="sourceresult" />

    <custom-aggregator failOnTimeout="true" class="com.example.MySourceAggregator"/>

    <logger message="RESULTS: #[payload]"/>
</flow>

<flow name="Source1">
    <vm:inbound-endpoint path="source1" />

    <set-payload value="#[groovy:Thread.currentThread().getContextClassLoader().getResourceAsStream('example-source1.json').text]"/>

    <vm:outbound-endpoint path="sourceresult" />
</flow>

<flow name="Source2">
    <vm:inbound-endpoint path="source2" />

    <set-payload value="#[groovy:Thread.currentThread().getContextClassLoader().getResourceAsStream('example-source2.json').text]"/>

    <vm:outbound-endpoint path="sourceresult" />
</flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:54:40.637

在流中使用`request-reply`路由器`AggregationExample`而不是收件人列表：分派到另一个执行分派到`Source1`和的流`Source2`。

一般来说，我不确定你想要实现什么：你构建这个装置只是为了并行读取两个文件吗？或者还有更多？如果只是为了这个，你确定它真的值得吗：并发文件读取没有任何物理限制吗？如果这一切都是为了优化，那么缓存可能是一条更好的路径。

另外，如果收件人`recipient-list`是静态的，为什么要使用这个路由器而不是`all`路由器？

最后，您是否对使用 Groovy 表达式来读取文件的 MEL 有问题？

# ruby-on-rails-3 - 根据用户的 CanCan 能力过滤模型的关联集合

> ID：13254639
> 
> 赞同：0
> 
> 时间：2012-11-06T15:53:07.300
> 
> 标签：ruby-on-rails-3, cancan

用户属于一个组织。用户可以查看所有组织，但只能查看其组织内的用户。当用户查看组织时，我必须将过滤逻辑添加到视图中，因此`@organizations.users`变为`@organizations.users.select{|u| can?(:read, u)}`.

有没有办法更透明或更优雅地管理这个？有没有办法摆脱`select{|u| can?(:read, u)}`或将其移至干燥的地方？

**相关代码：**

```
class Organization < ActiveRecord::Base
  has_many :users
  ...
end

class Ability
  ...
  can :read, User, :organization => @user.organization
end 
```

组织/show.html.erb：（当前，糟糕的版本）

```
<% if @organization.users.select{|u| can?(:read, u)}.any? %>
  <h4>Contacts</h4>
  <ul class="unstyled">
    <% for user in @organization.users.select{|u| can?(:read, u)} %>
      <li>
        <%= link_to user, user, class: "user" %>
      </li>
    <% end %>
  </ul>
<% end %> 
```

我想要更接近这个观点的东西：

组织/show.html.erb：

```
<% if @organization.users.any? %>
  <h4>Contacts</h4>
  <ul class="unstyled">
    <% for user in @organization.users %>
      <li>
        <%= link_to user, user, class: "user" %>
      </li>
    <% end %>
  </ul>
<% end %> 
```

**更新：**

我正在避免`accessible_by`，因为我有一个使用块的能力定义。

```
class Ability
  ...
  can :read, User, :organization => @user.organization
  can :read, User do |user|
    user.is? :technical_contact
  end
end 
```

我知道这`accessible_by`可以与块一起使用，但前提是提供了 SQL 片段。由于我的用户有很多角色并且存储为位掩码，因此我没有 SQL 片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:58:03.263

`accessible_by`CanCan使用您的活动记录模型上可用的方法内置了对此的支持。

有关更多信息，请参阅[https://github.com/ryanb/cancan/wiki/Fetching-Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)。

# c# - 在 Visual Studio 2010 Ultimate 的上下文菜单中找不到“解决”

> ID：13254640
> 
> 赞同：6
> 
> 时间：2012-11-06T15:53:11.723
> 
> 标签：c#, visual-studio-2010

在主题中，我在 Visual Studio 2010 Ultimate 的上下文菜单中找不到“解决”。我在互联网上的老师电脑上看到过它，但我在上下文菜单中找不到它，请查看屏幕。如何得到它？

![在此处输入图像描述](../Images/d19e509c75b1403839d4f5bf5cb3ea8b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:56:02.993

为了显示“解决”菜单，您必须定位在 VS 认为它能够解决的关键字上。如果您输入错误的关键字或没有引用程序集，VS 将无法解决任何问题。

如果您考虑一下，您可以在代码中键入任何合法关键字，并且可能在*某处*可能包含该类的程序集，并且如果您引用了该程序集，则您的关键字将是可解析的。由于 VS 不仅不可能知道，而且还需要更改项目才能引用该程序集，因此超出“解决”对话框的范围是有道理的。

如果您想看到它的实际效果，只需创建一行代码，其中缺少一个类：

```
namespace ResolveTest
{
    class Program
    {
        static void Main(string[] args)
        {
            OtherClass.OtherMethod();
        }
    }
} 
```

请注意，OtherClass 已被标记，因为它无法找到。如果您右键单击它，则没有 Resolve。

现在，添加一个类定义（在另一个命名空间中）：

```
namespace NotInTheSameSpace
{
    public class OtherClass
    {
        public static void OtherMethod()
        {

        }
    }
} 
```

通常，这将完全位于另一个文件或另一个程序集中，但出于演示目的，您可以将其放在现有代码的正下方。您现在应该会在 Main() 中看到“解决”菜单。

我相信你在这里看到的另一件事是，当“解决”对话框没有任何要解决的问题时，它会从上下文菜单中丢失，而不是被禁用但可见。这可能看起来有点令人困惑，但它确实是保持上下文菜单与您当前上下文相关的努力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:04:00.810

输入`File.Open("Test.txt");`然后单击`File`en 看看你是否可以找到解决方案。应该可以解决`System.IO.File`。

为了记录，你打开了一个函数的上下文菜单。一个函数不能只解析类型。因此，您可以改为键入：`Debug`然后打开上下文菜单并将其解析为`System.Diagnostics`. 然后你可以调用该`WriteLine`函数。

所以除了你的问题，你需要`System.Diagnostics.Debug.WriteLine(object)`而不是`System.Diagnostics.Debugger.WriteLine`which 不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:08:32.023

长镜头 - 也许你写错了函数的名称。所以VS就是不能为你解决？

如果不是，则 resolve 仅`Using`在文件开头添加语句以解决问题。为此，您的项目必须正确引用具有该功能的库。您可以使用“解决方案资源管理器”（所附图片中的右侧菜单）并在项目下您有“参考”选项卡，确保它在那里，如果没有右键单击并“添加参考...”

# android - Android TextView 智能引号

> ID：13254641
> 
> 赞同：1
> 
> 时间：2012-11-06T15:53:12.573
> 
> 标签：android, textview

我无法在 Android 中显示左双引号和右双引号。怎么做？例如：“你想要什么，Bec？” 我不是在说双引号，例如："

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:00:16.920

尝试：

```
textview.setText(Html.fromHtml("&ldquo;What do you want Bec?&rdquo;")); 
```

您正在寻找的引号可以在这里找到：http: [//www.degraeve.com/reference/specialcharacters.php](http://www.degraeve.com/reference/specialcharacters.php)

# c# - 从 C# 导出 xls 文件 - 不保存特殊字母

> ID：13254642
> 
> 赞同：3
> 
> 时间：2012-11-06T15:53:12.590
> 
> 标签：c#, asp.net

我从网站 asp.net (C#) 导出 .xls 文件的功能有问题。
它将所有内容保存`<tr>`到一个字符串中。函数运行良好，但不能正确保存波兰字符（Ł、ó、ę - 等）。
我该如何解决这个问题？

这是我的代码：

```
string ExcelExport;
string StringExport;

 (..)

protected void lvUsers_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item is ListViewDataItem)
    {
        (..)

        StringExport = StringExport + string.Format("<tr><td>{0}</td><td>{1}</td><td>{2}</td><td>{3}</td></tr>", currentUser.name, currentUser.surname, tel, currentUser.email);
    }
}

protected void btnDownloadList_Click(object sender, EventArgs e)
{
    ExcelExport = "<table><tr><td>Name</td><td>Surname</td><td>Telephone</td><td>E-mail</td></tr><tr><td> </td><td> </td><td> </td><td> </td></tr>" + StringExport + "</table>";

    Response.AddHeader("Content-disposition", "attachment; filename=raport.xls");
    Response.Charset = "utf-8";
    Response.ContentType = "application/ms-excel";
    Response.Write(ExcelExport);
    Response.End();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:02:29.723

尝试按照此[类似解决方案中的建议使用](http://forums.asp.net/post/4308531.aspx)[字节顺序标记 (BOM)](http://en.wikipedia.org/wiki/Byte_order_mark)

```
protected void btnDownloadList_Click(object sender, EventArgs e)
{
    ExcelExport = "<table><tr><td>Name</td><td>Surname</td><td>Telephone</td><td>E-mail</td></tr><tr><td> </td><td> </td><td> </td><td> </td></tr>" + StringExport + "</table>";

    Response.AddHeader("Content-disposition", "attachment; filename=raport.xls");
    Response.ContentType = "application/ms-excel";
    byte[] BOM = { 0xEF, 0xBB, 0xBF }; // The BOM for UTF-8 encoding.
    Response.BinaryWrite(BOM);
    Response.Write(ExcelExport);
    Response.End();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:59:47.407

utf-8 字符集不包含波兰字符。快速搜索显示[ISO 8859-2](http://nl.ijs.si/gnusl/cee/charset.html)确实如此。我会尝试更改字符集并查看是否可以解决您的问题。

# php - 将图像上传到具有唯一名称的图像文件夹

> ID：13254643
> 
> 赞同：0
> 
> 时间：2012-11-06T15:53:18.503
> 
> 标签：php

这是我的图片上传页面。我想要的是 lil bit 版。我希望图像名称看起来像（文件夹）image/userid_time.jpg

所以我想将图像上传到图像文件夹，

我希望所有图像都有新名称，或者我们可以说唯一的名称。

请在此添加任何内容。

```
<?php // upload2.php
echo <<<_END
<html><head><title>PHP Form Upload</title></head><body>
<form method='post' action='upload2.php' enctype='multipart/form-data'>
Select a JPG, GIF, PNG or TIF File:
<input type='file' name='filename' size='10' />
<input type='submit' value='Upload' /></form>
_END;
if ($_FILES) {
    $name = $_FILES['filename']['name'];
    switch ($_FILES['filename']['type']) {
        case 'image/jpeg':
            $ext = 'jpg';
            break;
        case 'image/gif':
            $ext = 'gif';
            break;
        case 'image/png':
            $ext = 'png';
            break;
        case 'image/tiff':
            $ext = 'tif';
            break;
        default:
            $ext = '';
            break;
    }
    if ($ext) {
        $n = "image.$ext";
        move_uploaded_file($_FILES['filename']['tmp_name'], $n);
        echo "Uploaded image '$name' as '$n':<br />";
        echo "<img src='$n' />";
    } else
        echo "'$name' is not an accepted image file";
} else
    echo "No image has been uploaded";
echo "</body></html>";
?> 
```

**谢谢 ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:03:22.017

您可以使用[uploadify](http://www.uploadify.com/about/)，因为：

*   多个文件上传
*   拖放
*   实时进度指示器
*   自定义上传限制
*   极致定制

和 ...

```
...$verifyToken = md5('unique_salt' . $_POST['timestamp']);... 
```

看[演示](http://www.uploadify.com/demos/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:07:22.157

假设您可以将用户 ID 放入名为 $userId 的变量中，您可以按照之前的建议更改 $n 变量。

```
$timestamp = time();
$n = "image/$userId_$timestamp.$ext"; 
```

当您执行 move_uploaded_file() 方法时，文件将被移动到**相对于您的上传脚本位置**的图像目录中。您可能需要确保图像文件夹已经存在并且是可写的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:54:20.077

您可以拥有文件名，然后可以将其附加到`uniqid("{$filename}_")`. 所以输出会是这样的`filename_4b3403665fea6`，然后你可以添加扩展名:)

这里的文档：http: [//uk.php.net/manual/en/function.uniqid.php](http://uk.php.net/manual/en/function.uniqid.php)

编辑：我很抱歉，我误读了你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:57:23.060

只是改变`$n`。由于您始终将其设置为，因此`"image.$ext"`您将始终获得相同的文件名。

相反，您需要将其命名为您想要的名称。类似的东西`$userid."_".time().".".$ext`，假设用户的 ID 在`$userid`.

# php - 在多个多维数组中的相同键处添加元素

> ID：13254645
> 
> 赞同：1
> 
> 时间：2012-11-06T15:53:20.807
> 
> 标签：php, mysql, arrays

我正在尝试使用 php 和 MySQL 做一个 Web 应用程序，它可以根据存储在数据库中的数据绘制一个人的估计工作量

```
$luna_start = date('n',  strtotime($row_task['data_i']));
$luna_end   = date('n',  strtotime($row_task['data_s']));
$luna_curenta=$luna_start;
$ultimazi_luna_curenta=  cal_days_in_month(CAL_GREGORIAN, $luna_curenta,"2012");
while ($luna_curenta<=$luna_end){
//construieste vectorul
    for ($i = 1; $i <= $ultimazi_luna_curenta; $i++) {
        $data_curenta=  date("Y-m-d", mktime(0, 0, 0, $luna_curenta, $i, 2012));
        if (($data_curenta>=$row_task['data_i'])&&($data_curenta<=$row_task['data_s'])){
            $efort_a['a'.$row_task['task_id']][$data_curenta]=$efort_mediu;
        }
    }
$luna_curenta++;
} 
```

获取数组的所有麻烦，以便我可以绘制图表。数组 $efort_a 如下所示：

```
Array(
   [a19] => Array(
        [2012-09-20] => 2.84
        [2012-09-21] => 2.84
       .......
        [2012-10-21] => 2.84
        [2012-10-22] => 2.84
    )

[a22] => Array
    (
        [2012-10-01] => 0.1
        [2012-10-02] => 0.1
       .....
        [2012-11-05] => 0.1
        [2012-11-06] => 0.1
        [2012-11-07] => 0.1
      ......
        [2012-11-25] => 0.1
      ......
        [2012-11-30] => 0.1
    )

[a16] => Array
    (
        [2012-10-08] => 4
        [2012-10-09] => 4
        [2012-10-10] => 4
        [2012-10-11] => 4
       ......
        [2012-10-18] => 4
        [2012-10-19] => 4
    )

) 
```

此外，我正在做更多的数组处理。

```
extract($efort_a);
$graf_data=  array_add($a19,$a22,$a16);
$data = new GoogleChartData($graf_data);
$chart->addData($data); 
```

所有这些代码的问题在于它不是动态的。数组 a19、a22、a16 是静态命名的，在这种特殊情况下，用户只有 3 个任务（任务 ID 19、22 和 16）......但是如果用户有多个任务怎么办？

1.  所以问题是这个代码可以重新组织，也许作为一个我不知道如何的函数，成为一个动态的？
2.  是否有可能做一个功能来绘制所有用户的努力（一张图，多条线 - 每个用户一条）

ps：基于键添加数组的功能是：

```
 function array_add($a1, $a2) {
            // adds the values at identical keys together
            $aRes = $a1;
            foreach (array_slice(func_get_args(), 1) as $aRay) {
              foreach (array_intersect_key($aRay, $aRes) as $key => $val) $aRes[$key] += $val;
              $aRes += $aRay; 
             }
            return $aRes;
    } 
```

=========================================== 第 2 天 ======= =================

经过一番思考，我想再试一次......所以为了动态命名数组 force_a 的键，我需要知道在哪里停止递增，所以：

```
$sql_nrtask='SELECT *, COUNT(user) AS nr_task
                FROM task
                WHERE user="ASD"
                ORDER BY data_i ASC
               ';
    $query_nrtask=  mysql_query($sql_nrtask) or die ('rrr');
    while ($row_nrtask=  mysql_fetch_array($query_nrtask)) {
        $nr_task=$row_nrtask['nr_task']; // no we know how many sub-arrays we'll have
    }
for ($j++;$j<=$nr_task;$j++){
while ($luna_curenta<=$luna_end){
            //construieste vectorul
            for ($i = 1; $i <= $ultimazi_luna_curenta; $i++) {
                $data_curenta=  date("Y-m-d", mktime(0, 0, 0, $luna_curenta, $i, 2012));
                if (($data_curenta>=$row_task['data_i'])&&($data_curenta<=$row_task['data_s'])){
                    $efort_a['$a'.$j][$data_curenta]=$efort_mediu;
                }
            }
            $luna_curenta++;
        }
} 
```

问题是知道我不知道如何将 $efort_a 中的数组与 2 个条件合并：

*   将索引保持在相同的位置并添加值
*   添加一个新索引，它是一个新元素

# c# - 用户输入后应用程序关闭

> ID：13254648
> 
> 赞同：0
> 
> 时间：2012-11-06T15:53:31.177
> 
> 标签：c#

我正在尝试在控制台上构建游戏，但在要求玩家输入 A 或 B 后，应用程序将关闭。它不应该！

我有两节课。这个是 Window.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyAdventure
{
public class Window
{
    public static void theWindow()
    {
        string playerInput = Console.ReadLine();

        Console.Clear();
        Console.WriteLine("You approach the window, and you look outside.");
        Console.WriteLine("You see lots of trees, but you can't put a name on the location.");
        Console.WriteLine("You pull the handle on the window in an attempt to open it.");
        Console.WriteLine("You succeed and escape the room through the window.");
        Console.WriteLine("\nAs you look around, you still don't know where you are.");
        Console.WriteLine("You suddenly hear someone approaching from behind.");
        Console.WriteLine("You turn around and see a man drenched in blood.\nHe's pale, and he looks sick. He moans at you.");
        Console.WriteLine("\n\nWhat do you do?\nA. Ask if he's alright and who he is\nB. Try to find something tod defend yourself with, just in case...");

        if (playerInput.StartsWith("A", StringComparison.CurrentCultureIgnoreCase))
        {
            Console.WriteLine("You ask if he's alright, but he doesn't respond.\nYou ask then who he is, but he still doesn't respond.");
            Console.WriteLine("Before you even get to think, he lunges towards you in a surprise!");
            Console.WriteLine("He holds on to you and tries to bite you.\nUnfortunately, he manages to do so and takes a chunk from your neck.");
            Console.WriteLine("As he's consuming you, you scream aloud in pain as you slowly fade away...");
            Console.WriteLine("\n\nGAME OVER!\nUnfortunately, your choices got you killed.\nPlease, restart the game and try again.");
            Console.WriteLine("\n\n(Press any key to exit");
            Console.ReadKey();
            Environment.Exit(0);
        }
        else if (playerInput.StartsWith("B", StringComparison.CurrentCultureIgnoreCase))
        {
            //Insert next class and method here...
        }

    }
}
} 
```

我的另一门课是 Program.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyAdventure
{
class Program
{
    static void Main(string[] args)
    {

        Console.WriteLine("You cannot feel your body. You don't know where you are.\nThe room you're in is dark. You cannot see much.");
        Console.WriteLine("You decide to stand up, and take a look around. You see a door and a window.\nWhich do you check out first?");
        Console.WriteLine("A. Window\nB. Door");

        string playerInput = Console.ReadLine();

        if (playerInput.StartsWith("A", StringComparison.CurrentCultureIgnoreCase))
        {
            Window.theWindow();
        }
        else if (playerInput.StartsWith("B", StringComparison.CurrentCultureIgnoreCase))
        {
            Console.Clear();
            Console.WriteLine("You chose the door.");
            Console.WriteLine("\nUnfortunately, the door is locked.\nYou cannot leave through the door.");
            Console.WriteLine("You turn to the window.");
            Console.WriteLine("\n(Press Enter to continue...)");
            Console.ReadKey();
            Window.theWindow();
        }

        Console.ReadKey();

    }
}
} 
```

有人可以帮忙吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:56:34.667

为什么你有 Environment.Exit(0); 在那里？当玩家 A 采取行动时，这是该条件下的最后一行代码......它应该关闭是有道理的，不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:59:47.947

目前，当读取输入字符串时，控制台窗口会关闭，因为没有下一个代码。您应该做的是在您的逻辑上方创建一个 while 循环，该循环将读取输入键，直到按下 Q 为止。

```
class Program
{
    static void Main(string[] args)
    {
        string playerInput = "";
        while(playerInput!="q"){
            //your code
            playerInput = Console.ReadLine();
        }
    }
} 
```

# memory - 32 位 PC，指针大小

> ID：13254649
> 
> 赞同：1
> 
> 时间：2012-11-06T15:53:59.953
> 
> 标签：memory, pointers, byte, 32bit-64bit, 32-bit

对于 4G 内存，有 4 * 1024 * 1024 * 1024 * 8 = 2^(32+3) 位。我的问题是 32 位 PC 如何访问 4G 内存。我能想到的是“一个字节是存储单元，一个字节不能存储一个数据”。这个对吗？

另一个问题是：在这样的 PC 中，指针的大小是否总是 32 位？这对我来说似乎是合理的，因为我们有 2^32 个存储单元来存储数据。但是在[这个答案和下一个他们的评论中](https://stackoverflow.com/a/6751830/565739)，这被认为是错误的。如果是错的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:59:45.127

通过读取包含它的字节的地址、修改字节并在必要时回写来访问各个位。

在某些体系结构中，最小的可寻址单元是双字，在这种情况下，不能“按原样”访问单个字节。从理论上讲，可以设计一种体系结构，该体系结构可以使用 32 位唯一地址来寻址 16 GB 的内存。几年前也发生过类似的事情，当时硬盘的可寻址单元被限制为 2^28 个 512 字节左右的扇区。

说 PC 有 32 位指针并不是完全错误的。这只是一些旧信息，因为较新的型号是内部 64 位系统，并且可以根据操作系统访问高达 2^48 字节的内存。目前大多数现有的 PC 都是 32 位的，对此无能为力。

好吧，StuartLC 仍然在讨论寻呼。即使在当前的 32 位系统中，*也可以*使用旧段寄存器来使用 48 位寻址。（不记得是否存在段寄存器低三位为零的限制......）但无论如何，这将允许 2^45 个字节的单个地址，其中只有一小部分可能同时在主存储器中. 如果开发了支持该寻址模式的操作系统，则可能会为指针分配完整的 64 位。就像今天使用 64 位处理器一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:05:01.857

> 我的问题是32位PC如何访问4G内存

您可能会混淆地址总线（可寻址内存）和处理器寄存器的大小。这个[超级用户帖子详细介绍了这些差异](https://superuser.com/questions/446395/is-it-the-address-bus-size-or-the-data-bus-size-that-determines-8-bit-16-bit)。

分页是一种通常用于允许超出操作系统能力大小的内存寻址的技术，例如，参见[PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)

> 指针总是大小为 32 位吗

不，不一定——例如在 16 位 DOS 和 Windows 上，指针也可能与段相关。

> 不能一点点存储数据吗？

是的，您可以，例如在 C 中，可以[在结构中进行位打包](https://stackoverflow.com/questions/1490092/c-c-force-bit-field-order-and-alignment)，尽管以性能和可移植性为代价。

如今，性能变得更加重要，出于性能原因，编译器通常会尝试将数据与其[机器字长对齐。](http://en.wikipedia.org/wiki/Word_(computer_architecture))

# html - 我可以覆盖样式吗？

> ID：13254650
> 
> 赞同：1
> 
> 时间：2012-11-06T15:54:00.750
> 
> 标签：html, css

我可以覆盖我的`<p>`样式，让我的类 mainbookingleftadditional 字体样式代替吗？

代码：

```
<div class="mainbookingleftadditional"><p>Please inform us of anything you... </p></div> 
```

CSS：

```
p  {font-size:14px;}

.mainbookingleftadditional {
    float: left;
    width: 228px;
    height: auto;
    padding: 0px 20px 0px 0px;
    font: 8px "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    color: #FFFFFF;
    text-align: left;
    vertical-align: top;
    clear:both;
} 
```

问候，茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:58:58.543

如果您只想更改 every `p`inside each的属性`mainbookingleftadditional`，可以使用以下命令：

```
.mainbookingleftadditional p  {font-size:8px;} 
```

这将覆盖常规`p`定义，因为它具有更高的[特异性](http://reference.sitepoint.com/css/specificity)（更具体）

特殊性决定了您的元素将使用哪些 css 定义，以防某些元素具有多个定义。

**编辑：**

看到其他答案，我必须补充一点，在这种情况下使用 !important 是个坏主意。

!important 是一个非常强大的案例，只有在所有其他选项都用尽时才应使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:56:32.810

你使用`inherit`你的字体属性来确保它使用你的`mainbookingleftadditional`类中定义的字体样式。

```
p {
   font: inherit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:03:57.327

您需要做的是删除因为`p {font-size:14px;}`子节点中指定的 stlye 优先于父样式或将`mainbookingleftadditional`类添加到`p`.

```
 <div class="mainbookingleftadditional"><p class="mainbookingleftadditional">Please inform us of anything you... </p></div> 
```

看到[这个](http://jsfiddle.net/TcHnd/)JsFiddle

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T15:55:46.573

是的，您只需要在样式末尾添加 !important 即可。

```
p  {font-size:14px !important;} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-06T15:58:24.207

```
.mainbookingleftadditional p {
    font:inherit;
    } 
```

另外，如果要删除段落顶部的边距：

```
.mainbookingleftadditional p:first-child {
    margin-top:0;
    padding-top:0;
    } 
```

# javascript - 如何使用 Javascript 在 Adob e InDesign 中获取区域作为图像

> ID：13254655
> 
> 赞同：0
> 
> 时间：2012-11-06T15:54:17.650
> 
> 标签：javascript, adobe, adobe-indesign

我想为 InDesign CS5 开发一个脚本。我需要选择一个区域并将其转换为图像。有没有办法做到这一点。我还需要将该图像发布到网页。

我可以通过 Javascript 做到这一点还是需要学习使用 c 进行 InDesign 插件开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:34:49.653

好的，我找到了，通过脚本可以导出选定的对象或对象，如下所示..

假设您已在文档上进行了选择

```
var myObj = app.activeWindow.activePage.groups.add(app.selection);
myObj.exportFile(ExportFormat.JPG, myFile, false);
myObj.ungroup(); 
```

# php - 在 DDD 聚合中实现排序/过滤业务逻辑

> ID：13254657
> 
> 赞同：1
> 
> 时间：2012-11-06T15:54:24.337
> 
> 标签：php, domain-driven-design, aggregate, aggregateroot, aggregates

我对 DDD 相当陌生，对我来说，我实际上是在寻找一个好的聚合函数。我有一长串用户 ( `User`) 并为此创建了一个聚合 ( `UserAggregate`)。

现在在我看来，我可能会根据不同的标准显示用户。假设在这里我没有对我的数据库查询中的列表进行排序，可以在聚合中进行排序吗？我无法想出可以正确执行此操作的应用程序的另一部分，但我可能会误解聚合的功能。

```
$users = new UserAggregate(array(
 $user1, $user2, $user3, $user4
));

foreach ($users->sortBySurname(), $user) {
 //
}

foreach ($users->sortByLastLoggedIn(), $user) {
 //
} 
```

顺便说一下，过滤也是如此。当我阅读有关 DDD 聚合的信息时，我立即想到了`Doctrine\Common\Collections\Collection`（[链接](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Collections/Collection.php)）。对我来说，那种东西看起来像是一个聚合体。所以DDD专家，请赐教:-)

**更新**

顺便说一句，我想的唯一方法是使聚合相当不相互，并让助手创建新的聚合。但这似乎不是要走的路：

```
$aggregate = new UserAggregate(array($user1, $user2));
$helper    = new FilterSomething;
$aggregate = $helper->filter($aggregate); 
```

第二个聚合是一个新实例，所以助手看起来像这样：

```
class FilterSomething
{
  public function filter(Aggregate $aggregate)
  {
    $items = $aggregate->getItems();
    $items = $this->doFilter($items);

    return new Aggregate($items);
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T06:12:11.987

根聚合不是存储库。根聚合代表单个用户及其所有域特定信息。

该排序和过滤应该在存储库中应用。

# android - 为什么有些 SQLite 方法需要作为 Object[] 的参数，而另一些则需要 String[]？

> ID：13254665
> 
> 赞同：4
> 
> 时间：2012-11-06T15:55:02.600
> 
> 标签：android, sqlite

我对[Android SQLite API](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)的设计很好奇。例如，我们有

```
public void execSQL(String sql, Object[] bindArgs) 
```

对于不返回数据的 SQL，我们也有

```
public Cursor rawQuery(String sql, String[] selectionArgs) 
```

对于确实返回数据的 SQL。

为什么在前一种情况下参数预期为 Object 数组，而在后一种情况下为 String 数组？[我知道由于 SQLite 的类型亲和力](http://www.sqlite.org/datatype3.html#affinity)，只接受字符串可能是有意义的。但是，如果是这样，为什么不始终使用字符串数组作为参数呢？是否有一些非字符串参数对 有意义`execSQL`但对 没有意义`rawQuery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-14T02:04:36.523

有一个。例如，如果您想比较 BLOB 值。看看这个[例子](https://stackoverflow.com/questions/9543595/how-to-delete-blob-element-from-a-table-in-sqlite-android/27465556#27465556)。

UUID 存储为 BLOB

```
db.execSQL("DELETE FROM "+USER_TABLE+" WHERE "+USER_UUID+"=?",
        new Object [] { uuid.toByteArray } 
```

根据文档，bindArgs 支持**byte[] 、String、Long 和 Double。**但是，**不**建议使用此方法执行 SELECT/INSERT/UPDATE/DELETE 语句。

我只是不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:51:56.203

实际上，只接受字符串是*没有*意义的，因为字符串永远不会与数字相等，即像这样的查询

```
c.rawQuery("SELECT * FROM mytable WHERE some_number_column = ?", args); 
```

永远不会返回任何带有数字的记录。（您必须将所有列声明为`TEXT`，并且永远不要使用表达式或将它们转换为类似的东西`CAST(... AS TEXT)`。）

Jens 提到了一种可能的解释，但这并不是不一致和明显糟糕设计的借口。

# ruby-on-rails - rails mechanize 遍历 postgres 表中的每个 url

> ID：13254667
> 
> 赞同：1
> 
> 时间：2012-11-06T15:55:06.730
> 
> 标签：ruby-on-rails, postgresql, mechanize

*编辑：根据我下面的评论，我想一个更好的问题是，'让 mechanize 遍历每个 url 并更新其名称列的正确方法是什么？（每个名称对于 url 来说都是唯一的）' 下面是我练习的基础。*

* * *

我有一个 postgres 表，类似于... | 名称（字符串）| 网址（文本）|

url 列已经填充了各种 url，看起来像这样： [http ://www.a4apps.com/Websites/SampleCalendar/tabid/89/ctl/Register/Default.aspx](http://www.a4apps.com/Websites/SampleCalendar/tabid/89/ctl/Register/Default.aspx)

我正在尝试运行一个 mechanize rake 任务，该任务将通过每个 url 运行并根据它在 css 标记处找到的文本更新名称。

```
namespace :db do
  desc "Fetch css from db urls"
  task :fetch_css => :environment do

    require 'rubygems'
    require 'mechanize'
    require 'open-uri'

    agent = Mechanize.new
    url = Mytable.pluck(:url)
    agent.get(url)
    agent.page.search('#dnn_ctr444_ContentPane').each do |item|
      name = item.css('.EventNextPrev:nth-child(1) a').text
      Mytable.update(:name => name)
    end 
  end
end 
```

当我运行 rake 任务时，它返回：

```
rake aborted!
bad URI(is not URI?): %255B%2522http://www.a4apps.com/Websites/SampleCalendar/tabid/89/Default.aspx%2522,%2520%2522http://www.a4apps.com/Websites/SampleCalendar/tabid/89/ctl/Privacy/Default.aspx%2522,%2520%2522http://www.a4apps.com/Websites/SampleCalendar/tabid/89/ctl/Terms/Default.aspx%2522,%2520%2522http://www.a4apps.com/Websites/SampleCalendar/tabid/89/ctl/Register/Default.aspx%2522%255D 
```

谢谢你的帮助。如果有什么方法可以让问题更容易回答，请告诉我。麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:01:59.177

我最近在回答自己的问题时感到有点孤独，但如果其他人发现自己处于同样的困境中，我会发布我的答案。另外，也许其他人会告诉我我的解决方案是否有我还没有看到的致命缺陷。这是我最后的 rake 似乎正在工作，从我的表中获取 url，在它们上运行 mechanize 并使用在 url 中找到的信息更新表......

```
namespace :db do
  desc "Fetch css from db urls"
  task :fetch_css => :environment do

    Mytable.all.each do |info|  # for each row do...
      require 'rubygems'
      require 'mechanize'
      require 'open-uri'
      agent = Mechanize.new
      agent.get(info.url)             # get the url column data for the current db row...
      nombre = agent.page.search('.EventNextPrev:nth-child(1) a').text  # plug it into mech.
      info.update_attributes(:name => nombre)  # and update the db with the css result.
    end

  end
end 
```

谢谢。麦克风

# c++ - QSystemtrayicon：Mac 上没有图像

> ID：13254672
> 
> 赞同：3
> 
> 时间：2012-11-06T15:55:20.600
> 
> 标签：c++, qt

我`QSystemTrayIcon`在 Mac 和 Linux 上的课程有问题。

我做了一个程序来创建一个系统托盘图标，我在 Windows 上没有问题，但是在 Linux（ubuntu 12）和 Mac（OSX 10.8）下，托盘图标在这里，但它上面的图像没有出现。

这就是我在`ctor`课堂上正在做的事情：

```
icon = new QIcon("trayIcon.png");
m_pTrayIcon = new QSystemTrayIcon();
m_pTrayIcon->setIcon(*icon);
m_pTrayContextMenu = new QMenu();
m_pTrayContextMenu->addAction(openSettings);
m_pTrayContextMenu->addAction(switchSyncMode);
m_pTrayContextMenu->addAction(openFolder);
m_pTrayContextMenu->addSeparator();
m_pTrayContextMenu->addAction(quit);
m_pTrayIcon->setContextMenu(m_pTrayContextMenu);
m_pTrayIcon->show(); 
```

我正在使用 Qt 4.8 库。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T21:34:38.617

两种可能

1.  它找不到文件。试试如果你给出全局路径会发生什么。
2.  它无法加载png；看看加载 QT 模块多媒体是否有帮助。

# mercurial - 重新开放已关闭的分行

> ID：13254673
> 
> 赞同：1
> 
> 时间：2012-11-06T15:55:21.903
> 
> 标签：mercurial, tortoisehg

我将 Mercurial 与 TortoiseHG 工作台一起使用。我不小心关闭了一家分店。我尝试对其进行更新并提交以查看它是否会重新打开（因为似乎没有重新打开分支的选项）

我可以提交并推送，但在 TortoiseHG 上，它仍然说 Head is Closed！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:17:56.117

重新打开分支的选项不存在，因为在关闭的头部**顶部提交有效地****打开**了这个头部（并且提交的头部*不能“关闭”*：它是来自先前变更集的元数据）：使用`hg branches`and|or测试它`hg heads`

补充阅读：

*   [是否可以在 Mercurial 重新开放已关闭的分行？](https://stackoverflow.com/questions/4099345/is-it-possible-to-reopen-a-closed-branch-in-mercurial)
*   [已关闭分支上的新变更集必须使其成为默认值](http://mercurial.808500.n3.nabble.com/New-changesets-on-a-closed-branch-that-must-make-it-to-default-td3772174.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:28:27.573

我发现发生了什么事。

在 TortoiseHG 上，我单击了 Branch: 按钮来关闭一个分支。当我更新到正确的分支时，我注意到我忘记检查按钮是否显示“关闭当前分支”。

一个简单的提交应该可以解决这个问题

# php - MySQL 错误：“字段列表”PHP/MySQL 中的未知列

> ID：13254677
> 
> 赞同：0
> 
> 时间：2012-11-06T15:55:27.300
> 
> 标签：php, mysql

嘿伙计们，我的 MySQL 有问题，我正在尝试在表中插入数据，但它返回此错误消息

> 致命错误：SQL: SELECT e.idtarea AS 'idTarea', e.detalle AS 'detalle', e.precio AS 'precio', e.idor AS 'idOrdenReparacion', e.fecha AS 'fecha', concat('Editar ', 'Eliminar' ) AS Opciones FROM Tarea e WHERE e.idtarea like '%%' ORDER BY e.idtarea;, 错误：/opt/lampp/htdocs/scep 中的 'field list' 中的未知列 'e.idor' /tareas.php 在第 76 行

**这是我的代码：**

```
$SQL="

  SELECT 
    e.idtarea AS 'idTarea', 
    e.detalle AS 'detalle', 
    e.precio AS 'precio', 
    e.idor AS 'idOrdenReparacion', 
    e.fecha AS 'fecha', 
    concat('<a href=\'editarTarea.php?id=',e.idtarea,'\'>Editar</a>&nbsp;','<a href=\'eliminarTarea.php?id=',e.idtarea,'\' onclick=javascript:confirm(\'Eliminar?>\')>Eliminar </a>') AS Opciones 
  FROM Tarea e ".$FILTRAR_POR." 
  ORDER BY e.idtarea;";

  $RESULT = mysql_query($SQL) or trigger_error("SQL: $SQL, Error: " . mysql_error(), E_USER_ERROR); 
```

**来自数据库的表 Tarea：**

```
 CREATE TABLE IF NOT EXISTS `Tarea` (
   `idTarea` int(11) NOT NULL AUTO_INCREMENT,
   `detalle` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,
   `precio` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,
   `idOrdenReparacion` int(11) NOT NULL DEFAULT '0',
   `fecha` date DEFAULT NULL,
   PRIMARY KEY (`idTarea`,`idOrdenReparacion`),
   KEY `fk_Tarea_OrdenReparacion1_idx` (`idOrdenReparacion`)
  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=2 ;

.....

  ALTER TABLE `Tarea`
  ADD CONSTRAINT `fk_Tarea_OrdenReparacion1` FOREIGN KEY (`idOrdenReparacion`) 
  REFERENCES `OrdenReparacion` (`idOrdenReparacion`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:57:42.697

您没有表格中的`idor`列`Tarea`，但您正在尝试选择它。

# image - 3 个相关问题 - 内容包装/边框的间隙、图像高度降低和内容 div 的定位

> ID：13254680
> 
> 赞同：1
> 
> 时间：2012-11-06T15:55:30.363
> 
> 标签：image, html, positioning, gaps-in-visuals

问题可以在这里看到： [http ://www.skicoloradorentals.com/secondary.html](http://www.skicoloradorentals.com/secondary.html)

1) contentBorderImg 下方的间隙 2) contentBorderImg 减少到 69 像素高度而不是 87 (18 px diff = 与间隙相同) 3) 即使我为它分配了高 z-index，内容 div 也不位于 contentBorderImg 上方

# contentBorder - 这是带有 1-px 边框的内容区域的包装器/边框

# contentBorderImg - 这是显示在包装顶部的圆角图像

.content - 我想驻留在 contentBorderImg 上的实际内容 div

我能够在左栏中使相同的概念起作用。我尝试复制该代码无济于事。我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:11:34.147

尝试给 contentBorderImg 的

```
Z-index = -1; 
```

然后用于#contentBorder

```
border-radius:9px 9px 0px 0px; 
```

我已经使用border-radius根据圆角图像来塑造边框。

# javascript - 多次调用ajax脚本不起作用

> ID：13254684
> 
> 赞同：1
> 
> 时间：2012-11-06T15:55:36.323
> 
> 标签：javascript, ajax, javascript-events

好的，所以我对所有 ajax 都非常陌生（实际上不到几天），但这是我为我的雇主构建的表单所必需的。

基本上，无论我做什么，它都不能用于超过 1 个功能。详细地说，我正在尝试使用“onchange”基于一个下拉菜单更新页面的 4 个不同部分。现在更新 1 部分工作正常，更新任何更多失败......但不仅失败，它也会失败，例如，如果我调用 ajax 部分，那么只是一个简单的警报......但如果我用警报来做首先它起作用，然后如果我在 ajax 调用之后放任何东西，它就会再次跌倒。我希望这是有道理的。例如，如果我这样做，它也可以工作。onchange 和 onblur 在同一个元素上，它会执行两次。我将发布代码，然后希望它会更有意义，而不是我喋喋不休地大声笑。

```
<select name="pType" id="ptype" onchange="dostuff()"> 
```

这就是输入元素...

```
<script type="text/javascript">
function dostuff(){
ajaxpage('adminincludes/popoptions.php?pID=<?= $sql['pID']; ?>&pType=' + ptype.value,'options');
alert('test');
}
</script> 
```

...这就是 dostuff 代码或示例，忽略 php 部分，因为无论如何它都会失败，该部分工作正常。

现在其余的代码都在一个外部文件中，我相信问题出在某个地方......但是我是 ajax 新手，并且不是 js 最棒的，因为我从来没有真正需要过它只是在我需要的时候学到了我需要的东西。

```
 var bustcachevar = 1 //bust potential caching of external pages after initial request? (1=yes, 0=no)
var loadedobjects = ""
var rootdomain = "http://" + window.location.hostname
var bustcacheparameter = ""

function ajaxpage(url, containerid) {
    var page_request = false
    if (window.XMLHttpRequest) // if Mozilla, Safari etc
    page_request = new XMLHttpRequest()
    else if (window.ActiveXObject) { // if IE
        try {
            page_request = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (e) {
            try {
                page_request = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (e) {}
        }
    } else
    return false
    page_request.onreadystatechange = function () {
        loadpage(page_request, containerid)
    }
    if (bustcachevar) //if bust caching of external page
    bustcacheparameter = (url.indexOf("?") != -1) ? "&" + new Date().getTime() : "?" + new Date().getTime()
    page_request.open('GET', url + bustcacheparameter, true)
    page_request.send(null)
    page_request.send(null)
}

function loadpage(page_request, containerid) {
    if (page_request.readyState == 4 && (page_request.status == 200 || window.location.href.indexOf("http") == -1)) document.getElementById(containerid).innerHTML = page_request.responseText
}

function loadobjs() {
    if (!document.getElementById) return
    for (i = 0; i < arguments.length; i++) {
        var file = arguments[i]
        var fileref = ""
        if (loadedobjects.indexOf(file) == -1) { //Check to see if this object has not already been added to page before proceeding
            if (file.indexOf(".js") != -1) { //If object is a js file
                fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript");
                fileref.setAttribute("src", file);
            } else if (file.indexOf(".css") != -1) { //If object is a css file
                fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet");
                fileref.setAttribute("type", "text/css");
                fileref.setAttribute("href", file);
            }
        }
        if (fileref != "") {
            document.getElementsByTagName("head").item(0).appendChild(fileref)
            loadedobjects += file + " " //Remember this object as being already added to page
        }
    }
} 
```

现在就像我说的，代码在仅调用 ajaxpage() 一次或通过不同事件多次调用时完美运行，即使将多个实例放入 dostuff() 函数，它也不会从一个事件多次运行。

任何帮助将不胜感激，因为这真的开始让我更加恼火。谢谢。

更新：现在这不像我做了一个“解决方法”那样紧急，它在更新链接上使用多个事件，如鼠标悬停、鼠标悬停等。这意味着它可以按我的需要工作，但是无论如何它都不优雅，我仍然很想知道为什么在 1 个事件中多次调用它时它不起作用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:56:25.243

我注意到您重复的示例的第 26 行和第 27 行：

```
 page_request.send(null) 
```

值得在继续之前消除它。我们可以在任何地方看到一个实时链接，以便我们可以检查生成的源吗？

# c# - 第一次尝试编译到发布模式并出现错误

> ID：13254686
> 
> 赞同：-2
> 
> 时间：2012-11-06T15:55:39.210
> 
> 标签：c#, .net, vb.net, visual-studio-2010, visual-studio

谁能告诉我为什么当我尝试在调试中构建我的解决方案时它工作正常，但是当我尝试在发布中这样做时，我得到了很多错误，尤其是一些引用的 .dll 不再被引用。

我已经在这个项目上工作了一段时间，它非常大，并且有很多依赖项。我现在已经为它的第一个版本做好了准备，但我不能让它继续下去，我觉得我错过了一些东西。分发软件的调试副本是否有任何缺陷？

我的下一个问题是我应该尝试编译到任何 CPU 还是只编译到 x86。我希望每个人都能够使用该软件？什么是规范？

软件位于 vb.net 中，使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:24:10.767

除非您发布特定的错误消息，否则很难给出解决方案，但这很可能只是将 dll 从调试复制到发布文件夹的问题。

# android - BoringLayout 的可用性

> ID：13254688
> 
> 赞同：8
> 
> 时间：2012-11-06T15:55:43.923
> 
> 标签：android, android-custom-view

我正在编写一个自定义布局来管理文本。在我开始实现该`ViewGroup#onMeasure()`方法之前，我开始挖掘 EditText 源代码，特别是该`EditText#onMeasure()`方法。所以我遇到了 [`BoringLayout`](http://developer.android.com/reference/android/text/BoringLayout.html). 我阅读了文档，但没有找到太多关于它的解释以及如何在实际的自定义实现中使用它。然后我的问题是如何以正确的方式使用它以及何时真正需要它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-19T10:23:20.477

[`BoringLayout`](https://developer.android.com/reference/android/text/BoringLayout.html)用于在视图上绘制文本。它被称为“无聊”，因为它只处理一行从左到右的文本，没有任何有趣的字符，例如表情符号。这种简化允许类`onDraw`使用比默认更有效的逻辑覆盖。如果您想亲自查看，[这里是源代码。](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/text/BoringLayout.java)

与[`StaticLayout`](https://developer.android.com/reference/android/text/StaticLayout.html)and一样[`DynamicLayout`](https://developer.android.com/reference/android/text/DynamicLayout.html)，`BoringLayout`也是抽象类的子[`Layout`](https://developer.android.com/reference/android/text/Layout.html)类。正如文档所说，除非您正在制作自己的文本处理小部件，否则您可能不会直接使用这些类。你怎么知道你是否应该使用这些类之一？如果您正在考虑[`Canvas.drawText`](https://developer.android.com/reference/android/graphics/Canvas.html#drawText(java.lang.CharSequence,%20int,%20int,%20float,%20float,%20android.graphics.Paint))在自定义视图中使用，那么您可能应该考虑使用`Layout`. 他们最终也调用`Canvas.drawText`，但他们事先做了很多其他处理。

如果您正在制作自己的文本小部件，那么您将只使用`BoringLayout`单行、简单、从左到右的文本。对于多行和更复杂的文本，请使用`StaticLayout`. 如果您需要在创建后动态更改文本，则使用`DynamicLayout`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T08:51:04.200

从技术上讲，您可以使用 `canvas.drawText("text"); 在画布上绘制文本；
但是，文本是一个非常笼统的术语，可能会变得非常复杂：它是 LeftToRight 还是 RightToLeft ？是椭圆形的吗？是单行还是多行？...

android.text.Layout 就是来处理这一切的。

使用它的典型方法是：

```
 BoringLayout.Metrics boring = BoringLayout.isBoring(mText, mPaint);
    if (boring != null) {
        // this is boring !
        if (mSavedLayout != null) {
            mLayout = mSavedLayout.replaceOrMake(mText,
                    mPaint,
                    availableWidth,
                    Layout.Alignment.ALIGN_NORMAL,
                    SPACING_MULT,
                    SPACING_ADD,
                    boring,
                    true,
                    TextUtils.TruncateAt.END,
                    availableWidth);
        } else {
            mLayout = BoringLayout.make(mText,
                    mPaint,
                    availableWidth,
                    Layout.Alignment.ALIGN_NORMAL,
                    SPACING_MULT,
                    SPACING_ADD,
                    boring,
                    true,
                    TextUtils.TruncateAt.END,
                    availableWidth);
        }
        mSavedLayout = (BoringLayout) mLayout;
    } else {
        mLayout = new StaticLayout(mText,
                0,
                mText.length(),
                mPaint,
                availableWidth,
                Layout.Alignment.ALIGN_NORMAL,
                SPACING_MULT,
                SPACING_ADD,
                true,
                TextUtils.TruncateAt.END,
                availableWidth);
    } 
```

# database - java me数据库和floggy

> ID：13254693
> 
> 赞同：3
> 
> 时间：2012-11-06T15:56:03.737
> 
> 标签：database, java-me, gis, mobile-application

我正在开发一个 gis java me 移动应用程序，我需要简单的数据库来存储我的 ATM 和银行分行，以便在地图上进行简单搜索。我决定使用 floggy 作为数据库。有没有人知道我的情况更好的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:03:15.770

如果它是一个离线数据库（如与应用程序一起存储），那么为什么不使用 SQLite？它可以将空间数据存储在 WKB（众所周知的二进制 - 标准）中，并具有[相当多的 java 包装器](https://stackoverflow.com/questions/41233/java-and-sqlite)。然后，如果您将来确实想进行空间查询，可以[更新到 SpatiaLite](http://www.gaia-gis.it/spatialite/)。

# php - 用选择插入

> ID：13254694
> 
> 赞同：1
> 
> 时间：2012-11-06T15:56:04.223
> 
> 标签：php, mysql, sql

你好我想从选择查询的列中插入值

```
insert into (cmts) stat_alert 
values(SELECT stat_alert.cell,stat_alert.cmts,cell_cmt.cmts FROM stat_alert`LEFT OUTER JOIN cell_cmt ON cell_cmt.`cell`=stat_alert.cell WHERE stat_alert.`cell`=cell_cmt.cell ) 
```

我有语法错误谁能帮助我？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:57:41.667

您不需要`VALUES`关键字和圆括号：

```
INSERT INTO <table name> (<comma separated column list>)
SELECT <comma separated column list> FROM <table name> 
```

阅读[`INSERT ... SELECT`手册中的语法](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:58:39.747

你想使用`INSERT INTO otherTable (cols) SELECT <yourColumns> FROM <yourtable>`not `INSERT INTO ... VALUES()`：

```
insert into stat_alert (cmts)  -- list your columns here to insert into
SELECT cell_cmt.cmts  -- your values to be inserted are here
FROM stat_alert
LEFT OUTER JOIN cell_cmt 
    ON cell_cmt.`cell`=stat_alert.cell 
WHERE stat_alert.`cell`=cell_cmt.cell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:58:58.517

看起来你有：

1.  表名前的列列表
2.  要插入一列，但选择了三列
3.  `values`此类查询中不需要关键字时的关键字。

# javascript - 有没有办法制作具有第三方工具效果的电子邮件按钮？

> ID：13254695
> 
> 赞同：0
> 
> 时间：2012-11-06T15:56:05.117
> 
> 标签：javascript, asp.net, email

现在，我只是在我的 asp.net 网站的每个母版页上使用一个基本的 javascript 图像按钮。单击该按钮会打开您的默认电子邮件客户端。它的编码如下：

```
<td>
<input type="image" src="../images/button-email.jpg" id="btnEmail"  
onclick="parent.location='mailto: @.com?subject=Check out USS Vision'" value="Email" 
alt="Email this page" />
</td> 
```

有没有办法在不使用第三方工具的情况下让最终用户单击电子邮件按钮，然后它会在 Web 浏览器中直接打开，比查找默认电子邮件客户端更顺畅？我想我正在尝试获得与第 3 方工具相同的效果，而不必使用第 3 方工具以及第 3 方工具附带的所有滞后、外部 javascript 文件等。我不确定这是否可能。任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:07:55.350

除非某些用户在他/她的浏览器中安装了电子邮件客户端插件，否则这似乎是不可能的，这不是一个常见的解决方案。我建议构建一个 HTML 表单，该表单将提交给配置了 POP3/SMTP 的服务器。

# javascript - 如何在jQuery中获取然后迭代一个复选框数组？

> ID：13254697
> 
> 赞同：0
> 
> 时间：2012-11-06T15:56:11.817
> 
> 标签：javascript, jquery, dom

我有一个有 8 列的表。最后一列的`<th>`标题是**Refactor?** 并简单地为表格中的每一行显示一个复选框。如果用户想要重构表中的特定记录，他们检查该行的**Refactor?** 复选框，然后提交表单。

我正在尝试在表格上方实现一个“全选”复选框，用户单击“全选”复选框，表格中的每一行都会得到它的重构？复选框选中。我正在尝试在 jQuery 中实现这一点，并且已经做到了这一点：

```
$("#checkAll").click(function() {
    alert("Check All has been checked!");

    var checkboxArray = null;
    $.each(checkboxArray, function(key, value) {
        $(key).prop("checked", true);
    });
}); 
```

显然，这不起作用，但是当我注释掉下面的所有内容`alert`时，当我单击“全部选中”复选框时，我可以成功弹出警报对话框，所以我已经做到了。

我正在尝试获取`checkboxArray`所有*Refactor 的数组 ()？*表中的复选框。一旦我有了那个数组，我只需要一种方法来遍历每个复选框并将其`checked`属性设置为 true。但我很难在这里连接这些点。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:59:43.177

有两种方法，您可以选中所有复选框

```
$('input[type=checkbox]').prop('checked', true); 
```

或者你可以给那些重构框一个类，只检查那些

```
$('.refactorClass').prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:58:47.703

只需选择表`:checkbox`中的所有`th:last-child` ，然后使用[`.prop()`](http://api.jquery.com/prop/).

```
$("#checkAll").click(function() {
    alert("Check All has been checked!");

    $("#myTable th:last-child :checkbox").prop("checked",true);
}); 
```

***演示：http:*** [//jsfiddle.net/9BRA3/](http://jsfiddle.net/9BRA3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:59:33.223

如果您将一个类添加到所有复选框的类似选择中，这会更干净，那么您可以这样做

```
$("#checkAll").click(function() {
   $(".seleciton").attr("checked", true);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:01:38.190

我不确定您为什么要先将它们放入数组中。

[这对我有用](http://jsfiddle.net/kBmA5/2/)：

```
$('#checkall').click(function(){
    $('input[type="checkbox"]').prop('checked', true);
}); 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T16:02:11.820

鉴于它们位于第 8 列，您可以按以下方式进行操作：

```
$("#checkAll").click(function() {
    alert("Check All has been checked!");

    $('#yourtable td:nth-child(8) :checkbox').each(function() {
         $(this).prop("checked", true);
    });
}); 
```

查看工作[**演示**](http://jsfiddle.net/9BRA3/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T16:03:13.873

```
$("#checkAll").click(function() {
    alert("Check All has been checked!");

    $('input[type="checkbox"]').not($(this)).prop('checked' , this.checked);
}); 
```

如果这些是您页面中唯一的复选框，那么您可以使用上述方法。首先不需要迭代..

```
$("#checkAll").click(function() {
      alert("Check All has been checked!");

      $('tbody input[type="checkbox"]').not($(this)).prop('checked' , this.checked);
 }); 
```

# google-maps - 融合表 KML 导入

> ID：13254701
> 
> 赞同：5
> 
> 时间：2012-11-06T15:56:22.937
> 
> 标签：google-maps, kml, google-fusion-tables

我以前可以毫无问题地将 kmls 导入融合表并制作很多很棒的地图，但现在它只引入了三列 - 名称、描述和地理。其余属性会在单击某个功能时显示，但您无法根据其中任何一个进行任何地图设置/主题更改，并且它们不会显示在表格视图中。表格视图似乎仅限于名称、描述和地理位置。我已经尝试过多个数据集。

有没有其他人有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T18:58:24.790

如果您在 KML 中使用`<Schema>`和元素，则[Google Fusion 表格](https://support.google.com/fusiontables/answer/181717?hl=en&ref_topic=1652595)会将这些元素作为列导入。`<SchemaData>`

```
<ExtendedData>                   
  <SchemaData schemaUrl="anyURI">
    <SimpleData name=""> ... </SimpleData>
  </SchemaData>
</ExtendedData> 
```

同样，如果您`<Data>`在[ExtendedData](https://developers.google.com/kml/documentation/kmlreference#extendeddata)中使用元数据，那么它也将作为导入中的列导入。

```
<ExtendedData>                       
  <Data name="string">
    <value>...</value>
  </Data>
</ExtendedData> 
```

请参阅带有示例的相关教程：
[https ://developers.google.com/kml/documentation/extendeddata](https://developers.google.com/kml/documentation/extendeddata)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-25T20:55:55.630

我在 KML 文档的前几个地*标*中没有出现这个问题。

解决方法是重新排列地标，或者向所有地标添加具有某些默认值的缺失属性。

如果您使用*Data*或*SchemaData*没有区别。

# mysql - 更改 MySQL 中的数字格式（欧洲格式）

> ID：13254702
> 
> 赞同：1
> 
> 时间：2012-11-06T15:56:25.150
> 
> 标签：mysql, formatting

我需要将字段中的所有数字（输入 longtext）从`xxxxxx,yy`更改为`xxx.xxx,yy`

是“x”整数和“y”十进制数。

例子：

> 6000,00 至 6.000,00
> 
> 100000,00 至 100.000,00

我试过`format`了，但它改变了一个数字：

> xxxxxx,yy 到 xxx,xxx.yy

例子：

> 1200,00 至 1,200.00

任何建议如何实现这一目标？

**更新**

我必须使用当前的数据类型，我不能更改它，这不是我的决定。我已经知道这不是处理事情的正确方法。

我需要的是与此更新等效的内容：

```
UPDATE <table> SET <field> = FORMAT(<field>, 2, 'de_DE'); 
```

但是这只适用于 MySQL 5.5（因为第三个参数），我只能在使用 MySQL 5.1 的机器上执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:18:17.577

有一个数据库来存储和获取数据。不是为了好看。在其他地方处理。

更新：没有看到您已将其存储在长文本列中。只要没有重要的理由（我敢打赌没有）保持这种状态，最好也是唯一的答案是，您应该更改该列的数据类型。

更新2：如果你坚持...

```
create table lt(lt longtext);
insert into lt values ('6000,00'), ('1234567,12');
select 
lt,
replace(replace(replace(format(convert(replace(lt, ',', '.'), decimal(10,2)), 2), ',', 'x'), '.', ','), 'x', '.')
from lt 
```

更新3：如果一切`x,00`顺利，您可以节省转换并这样做：

```
replace(replace(replace(format(lt, 2), ',', 'x'), '.', ','), 'x', '.') 
```

# java - Seam 2.2 使用反射改变注入的场值

> ID：13254710
> 
> 赞同：0
> 
> 时间：2012-11-06T15:56:44.417
> 
> 标签：java, reflection, seam, seam2

我使用Seam 2.2。我想使用反射从 Seam 组件中获取私有字段。所以我有：

```
 LocalizationEditActionRoot localizationEditActionRoot = (LocalizationEditActionRoot) Component
                        .getInstance(LocalizationEditActionRoot.class, true);
    Class currentClass = localizationEditActionRoot.getClass();
    WebDavMockClient mockClient = new WebDavMockClient();
    Field f = currentClass.getDeclaredField("davClient");
    f.setAccessible(true);
    f.set(localizationEditActionRoot, mockClient); 
```

如果我想获得一个名为的字段，`davClient(WebDavClient)`我会得到一个 NoSuchFieldException。该领域当然是注入。如果我尝试这样的事情：

```
 Class currentClass = Class.forName("fr.isiom.bpms.admin.session.ext.action.root.LocalizationEditActionRoot");
    WebDavMockClient mockClient = new WebDavMockClient();
    Field f = currentClass.getDeclaredField("davClient");
    f.setAccessible(true);
    f.set(localizationEditActionRoot, mockClient); 
```

我得到了这个字段`davClient`，但值没有改变。他仍然是 WebDavClient 的实例，而不是 WebDavMockClient。如何更改该字段值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:48:42.487

我还没有设法通过反思来做到这一点。相反，我找到了一个更简单的想法/解决方案。在我的测试类中，在 Create/setUp 方法中，我从 Seam Context 获取 sessionContext，并将 webDavClient 名称更改为与 WebDavMockClient 而不是 WebDavClient 绑定。这就是你如何用一条线来解决整个问题：

```
// Setting webDavClient to be injected by seam as WebDavMockClient to mock the actual delete
Contexts.getSessionContext().set("webDavClient", new WebDavMockClient()); 
```

# java - BufferedReader.readLine() 会阻塞一段时间

> ID：13254714
> 
> 赞同：0
> 
> 时间：2012-11-06T15:56:52.160
> 
> 标签：java, android, tcp, bufferedreader

我正在尝试获取一个 http 响应字符串（只是一个 JSON 对象），有时这段代码会等待无限时间

> `line = reader.readLine()`

可能是，这种行为的原因是互联网连接不好（我使用 3G 调制解调器），但我需要一个稳定的解决方案来避免这种无限锁定。在这里可以做些什么来避免它？

```
HttpResponse response = httpClient.execute(httpPost);

InputStream content = null;
JSONObject json_obj;
if (response.getStatusLine().getStatusCode() == 200) {
    HttpEntity entity = response.getEntity();

    try {
        content = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(content, "UTF-8"), 256);
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
        }
    } catch (Exception e) {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:09:10.457

您可以指定读取超时：

```
HttpClient client = new DefaultHttpClient();
client.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, 30000); 
```

应将读取超时设置为 30 秒。可能，您还想指定连接超时：

```
client.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 30000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:11:03.983

```
readLine() 
```

或者任何网络/IO 都应该在后台线程中完成，以防止锁定主线程。

如果您在 Android 4.0+ 上测试您的代码，您还会看到主线程上不再允许联网，并且会引发异常。

看看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它是一种在后台线程上运行此类任务的简单、轻松的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:15:28.373

避免“无限”锁定的一个很好的解决方案是在单独的线程中执行此 http 调用，并使用 Handler 通知主线程该信息已加载并且可以根据需要使用它。

这是我自己使用 SaxParser 的示例：

```
public void SearchFromSuperClass(String text)
{   
    mHandler = new Handler();
    Thread t = new Thread(){
        public void run() {
            try {
              String strurl="URLTOPATH";
              URL url = new  URL(strurl);
              SAXParserFactory factory = SAXParserFactory.newInstance();

              SAXParser parser = factory.newSAXParser();
              FundsHandlerRanking handler = new FundsHandlerRanking();
              parser.parse(url.openConnection().getInputStream(), handler);
              search_response = handler.getrankings();

              mHandler.post(mUpdateResults);
            } catch (Exception e) {
                search_response = null;
                mHandler.post(mUpdateResults);

            }

        }
    };

    t.start();
}
final Runnable mUpdateResults = new Runnable() {
    public void run() {
        updateResultsInUi();
    }
};

private void updateResultsInUi() {

    try
    {
        if(search_response != null)
        {
            lview.setAdapter(new SearchRankingAdapter(mycontext, search_response, false));
        }
        Pdialog.dismiss();
    }
    catch (Exception e) {
        lview.setAdapter(null);
        if (Pdialog.isShowing())
        {
            Pdialog.dismiss();
        }
    }
} 
```

使用 mHandler.post(...) 您将调用放入队列中以发送到主 UI 线程，在那里，您可以毫无问题地修改 UI 对象（不能在主线程之外修改 UI 对象）。

希望这可以帮助

# database - 使用 Spring 3 和 Hibernate 3 进行身份验证（基于注释）

> ID：13254715
> 
> 赞同：2
> 
> 时间：2012-11-06T15:56:58.347
> 
> 标签：database, spring, hibernate, spring-mvc, spring-security

我的应用程序基于 Spring 3、Hibernate 3、MySQL。我阅读了 Spring Security 文档并了解到我可以实现如下所示的身份验证，

```
<authentication-manager>
   <authentication-provider>
    <jdbc-user-service data-source-ref="dataSource"

       users-by-username-query="
          select username,password, enabled 
          from users where username=?" 

       authorities-by-username-query="
          select u.username, ur.authority from users u, user_roles ur 
          where u.user_id = ur.user_id and u.username =?  " 

    />
   </authentication-provider>
</authentication-manager> 
```

我理解上述部分，但我担心的是，在我的应用程序中，用户表不仅存储用户名、密码和启用字段。它还存储名字和姓氏、emailID、电话等。在成功验证后，我希望下一个 jsp 自动填充所有用户详细信息，而不是向用户询问与未注册用户相同的信息。

1.  我想使用基于注解的配置而不是基于 xml 的配置（与 spring 2.5 示例中提到的不同）
2.  spring 文档不使用休眠来保证安全。我应该使用hibernate还是jdbc-user-service？如果休眠，那怎么办？
3.  我看到几个例子使用定制的 UserService。我也需要这样做吗？

有人可以用好的例子提出建议吗？对其他帖子的任何引用也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:21:41.733

至于现在 Spring Security 大部分配置是没有注解的，但是你可以使用特殊的 XML 命名空间来简单的定制 Spring Security。

您需要实现自己的`UserDetailsService`，它将负责从持久存储中加载用户的详细信息。

`UserDetailsService`接口只有一种方法

```
UserDetails loadUserByUsername(String username) throws UsernameNotFoundException; 
```

在实现和创建组件的 bean 之后，您需要注入它：

```
<authentication-manager>
   <authentication-provider user-service-ref="myUserDetailsService"/>
</authentication-manager> 
```

Spring Security Docs 中的更多内容：

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#tech-userdetailsservice](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#tech-userdetailsservice)

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-authentication-provider](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-authentication-provider)

如果您的数据库中没有类似的信息`enabled`，您将始终必须为该字段`true`的对象添加值。`UserDetails`

# c# - 等待后台工作人员完成而不阻塞 UI 线程

> ID：13254716
> 
> 赞同：1
> 
> 时间：2012-11-06T15:57:05.807
> 
> 标签：c#, multithreading, backgroundworker

我有一个应用程序需要等待后台工作人员完成才能继续。后台工作人员负责将一些值写入初始化它的 USB 设备。后台工作人员的问题是我的主程序可以在后台工作人员完成初始化之前尝试访问 USB 设备。

在后台工作人员工作时，UI 线程会显示“请稍候”，并带有动画进度条。进度条并**不能**反映后台工作人员的距离，它只是“旋转”。

我已经阅读了一些说不要使用后台工作人员的问题，因为我真的不希望它异步运行（这是真的），但是，如果不使用后台工作人员，我的“请稍候”对话框会阻塞并且不会t 显示动画。我还阅读了很多内容，告诉我只使用一个 UI 线程，然后支持使用后台工作程序。

我还尝试将“请稍候”微调器放在单独的线程中，但这会引入复杂性和奇怪的竞争条件，“请稍候”窗口在打开之前尝试关闭。

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:02:09.077

这正是`BackgroundWorker`设计的目的。尽管还有其他方法可以做到这一点，但您所做的一切都很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:02:18.680

> 我读过一些问题，说不要使用后台工作人员

真的不知道为什么人们建议*不要*使用它，因为它正是它的设计目的。理想情况下，您想要做的是显示一个带有微调器的**模式**对话框和一个取消选项，这样用户就会被 UI 阻止中断 USB 上的写入过程。

甚至在写入过程中简单地禁用按钮就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T16:29:28.393

我认为您正在尝试解决两个不同的问题。

第一个是如何防止主 (UI) 线程访问未初始化的 USB 设备。另一个是处理“请稍候”微调器对话框。

我的建议是：

1.  继续`BackgroundWworker`处理 USB 设备初始化。
2.  向您的类添加一个布尔字段，以标记 USB 设备何时完成初始化，例如

    `private volatile bool _usbDeviceInited = false;`

3.  您的后台工作人员要做的最后一件事就是将此标志设置为`true`.

4.  通过属性集中访问 USB 设备。如果 USB 初始化尚未完成，getter 方法可以检查布尔字段并返回空值（或者如果您愿意，可以引发异常）。
5.  修改您的代码以检查是否由授予对 USB 设备的访问权限的属性返回 null（或处理异常，如果您选择引发一个），这意味着它尚未准备好使用。您可以处理此情况以提醒用户 USB 设备未准备好。

前面的步骤是解决第一个问题的一种方法。现在，对于微调器。

我建议订阅`RunWorkerCompleted`你的事件`BackgroundWorker`。如果您`BackgroundWorker`是从主 UI 线程创建的，则该事件将在主 UIThread 中触发（这意味着与用户界面元素交互是安全的）。从那里您可以简单地关闭并处理您的“请稍候”对话框。您还应该检查该`AsyncCompletedEventArgs.Error`属性以确保在初始化 USB 设备时没有从 BackgroundWorker 线程引发错误情况。

**编辑：** 我刚刚读到您的应用程序可能会运行一个立即尝试访问 USB 设备的脚本。使用我建议的模式，您可以在运行脚本之前“轮询”属性，直到它返回一个不同于 null 的值，如下所示：

```
bool timedOut = false;
DateTime timeout = DateTime.Now.AddSeconds(timeoutSeconds);
while ( MyClass.MyUsbDevice == null ) {
   if( DateTime.Now > timeout ) {
      timedOut = true;
      break;
   }
   Thread.Sleep(0); // Avoid pegging the CPU, yield it to other processes
}

if( !timedOut ) {
   // run the script
} else {
   // Handle timeout
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T16:30:22.477

将`BackgroundWorker`完成后必须执行的部分（-脚本）放入`BackgroundWorker`的`RunWorkerCompleted`事件处理程序中。

# event-handling - ABAP：CL_SIMPLE_TREE_MODEL 的事件 CONTEXT_MENU_SELECT - 无法触发它

> ID：13254719
> 
> 赞同：3
> 
> 时间：2012-11-06T15:57:20.343
> 
> 标签：event-handling, contextmenu, abap

我有一个实例`CL_SIMPLE_TREE_MODEL`，我设法触发并处理了`CONTEXT_MENU_REQUEST`事件，并构建了我的上下文菜单。

我按照我想要的方式添加了我的功能。

问题是，当我从上下文菜单中选择一个选项时，什么也没有发生。换句话说，程序流不会进入`CONTEXT_MENU_SELECT`.

我当然假设当我单击上下文菜单中的功能时会触发此事件。

我找到了官方文档，但仅适用于您使用 Shift+F10 访问的“默认上下文菜单”，它需要程序中的某些子例程才能触发。

我做了什么：

1.  我确实定义并实现了一个方法，该方法是该事件的处理程序。
2.  我确实在为事件设置处理程序的同一位置设置了`CONTEXT_MENU_REQUEST`事件处理程序
3.  我没有注册该事件，`SET_REGISTERED_EVENTS`因为在该事件的类属性中没有定义任何 ID - 例如该`CONTEXT_MENU_REQUEST`事件。

编码：

```
REPORT.

CLASS lcl_tree_handler DEFINITION.

  PUBLIC SECTION.
    METHODS:
      pbo,
      on_ctx_menu_request FOR EVENT node_context_menu_request OF cl_simple_tree_model
        IMPORTING node_key menu sender, "TYPE TM_NODEKEY CL_CTMENU
      on_ctx_menu_select FOR EVENT node_context_menu_select OF cl_simple_tree_model
        IMPORTING node_key fcode. "TYPE TM_NODEKEY SY-UCOMM
    DATA:
      po_tree_model TYPE REF TO cl_simple_tree_model,
      gt_tree       TYPE TABLE OF treemsnodt,
      control       TYPE REF TO cl_gui_control.
ENDCLASS.

CLASS lcl_tree_handler IMPLEMENTATION.

  METHOD pbo.
    DATA: lt_events TYPE cntl_simple_events,
          ls_event  TYPE cntl_simple_event.
    FIELD-SYMBOLS <gs_tree> TYPE treemsnodt.

    CHECK po_tree_model IS NOT BOUND.

    CREATE OBJECT po_tree_model
      EXPORTING
        node_selection_mode = po_tree_model->node_sel_mode_single.

    APPEND INITIAL LINE TO gt_tree ASSIGNING <gs_tree>.
    <gs_tree>-node_key = 'Node key 1'.
    <gs_tree>-text = 'First node'.
    <gs_tree>-isfolder = 'X'.
    APPEND INITIAL LINE TO gt_tree ASSIGNING <gs_tree>.
    <gs_tree>-node_key = 'Node key 2'.
    <gs_tree>-relatkey = 'Node key 1'.
    <gs_tree>-relatship = cl_tree_model=>relat_last_child.
    <gs_tree>-text = 'First child'.
    po_tree_model->add_nodes(
          node_table = gt_tree ).

    ls_event-eventid = cl_simple_tree_model=>eventid_node_context_menu_req.
    ls_event-appl_event = 'X'.              "tried with space too
    APPEND ls_event TO lt_events.

    CALL METHOD po_tree_model->set_registered_events
      EXPORTING
        events = lt_events.

    SET HANDLER on_ctx_menu_request FOR po_tree_model.
    SET HANDLER on_ctx_menu_select FOR po_tree_model.

    po_tree_model->create_tree_control(
      EXPORTING
        parent = cl_gui_container=>screen0
      IMPORTING
        control = control ).

  ENDMETHOD.

  METHOD on_ctx_menu_request.                 "I initialize the context menu object here.
    DATA: lt_chidren_keys TYPE treemnotab,
          ls_child_key    TYPE tm_nodekey,
          lv_text         TYPE gui_text.

    CALL METHOD sender->node_get_children
      EXPORTING
        node_key       = node_key
      IMPORTING
        node_key_table = lt_chidren_keys
      EXCEPTIONS
        OTHERS         = 2.

    LOOP AT lt_chidren_keys INTO ls_child_key.
      lv_text = ls_child_key.
      CALL METHOD menu->add_function
        EXPORTING
          fcode = 'ONE'
          text  = lv_text
          ftype = 'B'.
    ENDLOOP.

    menu->add_separator( ).
    CALL METHOD menu->add_function
      EXPORTING
        fcode = 'ALL'
        text  = 'All the work groups'
        ftype = 'W'.

  ENDMETHOD.

  METHOD on_ctx_menu_select.
    BREAK-POINT.                 "tried actual code here too.
  ENDMETHOD.

ENDCLASS.

DATA: go_tree_handler TYPE REF TO lcl_tree_handler.

PARAMETERS dummy.

INITIALIZATION.
  CREATE OBJECT go_tree_handler.

AT SELECTION-SCREEN OUTPUT.
  go_tree_handler->pbo( ).

AT SELECTION-SCREEN ON EXIT-COMMAND.
  go_tree_handler->control->free( ). 
```

显示树，右键单击上下文菜单。

但是当我选择一个菜单项时没有任何反应。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:51:44.933

不支持您指定的函数类型 (`ftype = 'W'`和)（检查底层域的固定值）。在这种情况下，什么都不会发生。`'B'``CUA_FUNTYP`

经典的解决方案是使用`ftype = ' '`（正常功能）：

```
 LOOP AT lt_chidren_keys INTO ls_child_key.
      lv_text = ls_child_key.
      CALL METHOD menu->add_function
        EXPORTING
          fcode = 'ONE'
          text  = lv_text
          ftype = ' '.
    ENDLOOP.

    menu->add_separator( ).
    CALL METHOD menu->add_function
      EXPORTING
        fcode = 'ALL'
        text  = 'All the work groups'
        ftype = ' '. 
```

可能的`ftype`值是（来源：域`CUA_FUNTYP`）：

*   ' ' : 正常功能
*   'H' : 帮助功能 (PROCESS ON HELP REQUEST)
*   'S' : 系统函数（由 DYNP 直接处理）
*   'T' : 交易调用 (LEAVE TO TRANSACTION)
*   'E' : 'AT EXIT COMMAND' 的访问模块 -> /E 作为前缀
*   'I' ：包括菜单（在运行时替换 - 不支持）
*   'N' : 'AT EXIT COMMAND' 功能，> DYNP > /N 作为前缀

备注：问题的第一个版本中的代码缺少第二个事件处理程序的注册`SET HANDLER go_tree_handler->on_ctx_menu_select FOR po_tree_model.`（现在可以了）

# c - 在 C 中的循环中使用字符数组引用

> ID：13254721
> 
> 赞同：0
> 
> 时间：2012-11-06T15:57:23.240
> 
> 标签：c, string, pointers, arrays

如果我在 CI 中有一个 char 数组，则在循环中使用它：

```
char arr [100];
while (1) {
    fill arr from some source
    store arr in some where
} 
```

现在，通过这种方法，我释放了所有后续数组，我只维护一个指向最后一个数组的指针。我怎样才能保持这种状态？

请不要向我建议使用字符串:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:01:25.703

使用备用数组存储以前的字符串：

```
char arr [100];
char* arrOfStrings[100];

int i = 0;
while (1) {
    //fill arr
    arrOfStrings[i] = malloc(strlen(arr)+1);
    strncpy(arrOfStrings[i], arr, strlen(arr));
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:00:36.627

用于`strcpy()`制作副本。

```
char arr[100];
while(1) {
    /* fill arr */
    char *str = malloc(strlen(arr) + 1);
    strcpy(str, arr);
    /* store str in some where */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:53:54.077

我会使用链表，因为您不知道要存储的行数：

```
char arr[100];
struct listOfLines
{
    char *line;
    struct listOfLines *next;
};

struct listOfLines *myListOfLines = NULL;
struct listOfLines *tempLine = NULL;
while(1)
{
    /* Fill array from some source */
    myListOfLines = tempLine;
    tempLine = malloc(sizeof(struct listOfLines));
    tempLine->line = strdup(arr);
    tempLine->next = NULL;
} 
```

# android - 如何在android表格布局中动态居中图像

> ID：13254723
> 
> 赞同：1
> 
> 时间：2012-11-06T15:57:28.287
> 
> 标签：android, dynamic, imageview, center, android-tablelayout

我正在制作一个应用程序，我正在动态添加 TableRows，其中包括 3 个 imageViews 和一个 textview，它看起来像这样（单个 tableRow）：

```
IV1 --- TEXTVIEW ----- IV2 ----- IV3 
```

（希望它有助于理解我想要实现的目标）我对 TextView 居中没有任何问题，但我无法将 ImageViews 居中我试图这样做：

```
TableLayout.LayoutParams tparams = newTableLayout.LayoutParams(
    TableLayout.LayoutParams.WRAP_CONTENT,
    TableLayout.LayoutParams.WRAP_CONTENT, 
    Gravity.CENTER_VERTICAL);
iv1.setLayoutParams(tparam);
iv2.setLayoutParams(fparams);
iv3.setLayoutParams(fparams); 
```

但我得到错误 wchich 从那个开始：

```
11-06 16:37:06.809: E/AndroidRuntime(6578): java.lang.ClassCastException: android.widget.TableLayout$LayoutParams
11-06 16:37:06.809: E/AndroidRuntime(6578): at android.widget.TableRow.getColumnsWidths(TableRow.java:295) 
11-06 16:37:06.809: E/AndroidRuntime(6578): at android.widget.TableLayout.findLargestCells(TableLayout.java:500)
11-06 16:37:06.809: E/AndroidRuntime(6578): at android.widget.TableLayout.measureVertical(TableLayout.java:465) 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:04:15.687

尝试使用[TableRow.LayoutParams](http://developer.android.com/reference/android/widget/TableRow.LayoutParams.html)而不是`TableLayout.LayoutParams`. 您得到一个类转换异常，这意味着它试图将您的 LayoutParams 转换为错误类型的 LayoutParams。由于视图实际上是 the 的子级`TableRow`，而不是 the `TableLayout`，您应该使用`TableRow.LayoutParams`.

# ruby - 是否有一些工具或模式可以在 emacs 中重构 ruby 代码？

> ID：13254724
> 
> 赞同：4
> 
> 时间：2012-11-06T15:57:35.590
> 
> 标签：ruby, emacs, refactoring

我正在寻找一些支持我重构 ruby​​ 代码的工具。

我知道很难为像 ruby​​ 这样的动态语言实现这些工具，但我也知道[RubyMine](http://www.jetbrains.com/ruby/features/ruby_ide.html#Intelligent_Code_Improvement)和[Vim](https://github.com/ecomba/vim-ruby-refactoring)有不同的解决方案来帮助处理“提取方法”和“重命名方法”等基本内容。

打开多个编辑器/IDE 似乎不太实用，所以我正在寻找专门针对 emacs 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:14:19.663

我不知道这是否正是你想要的，但也许你可以看看 [Rdefs](https://github.com/knsmr/rdefs)

> Rdefs 是一个小型 Rub​​y 脚本，它从给定的 Ruby 源代码中提取类、模块、方法、属性定义。
> 
> **在 Emacs 中使用 Rdef**
> 
> 您可能希望将 etc/rdefs.el 放入您的 elisp 目录，然后在您的 dot.emacs 中添加类似这样的内容：
> 
> （需要'rvm）
> 
> (rvm-使用-​​默认)
> 
> （需要'rdefs）

希望它有点帮助......但无论如何，目前似乎没有其他选择。

您也可以尝试检查[Rsense](http://cx4a.org/software/rsense/)状态：

> **RSense**是一款 Ruby 开发工具，专为 Emacs、Vim 等高性能文本编辑器开发。RSense 遵循 UNIX 理念，具有高透明度，易于用户学习、扩展和修复。采用 copyleft 许可证，它也一直是免费软件。
> 
> 将来，将提供以下功能：
> 
> ```
> Static code checking
> Caller jump
> Refactoring 
> ```

但是项目[github](https://github.com/m2ym/rsense)页面上已经有 1 年没有活动了（[v 2.0 的新分支](https://github.com/m2ym/rsense/tree/2.0)）

也许你可以尝试与作者取得联系...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T18:30:26.550

最近有一个名为[ruby​​-refactor](https://github.com/ajvargo/ruby-refactor)的项目。它可以通过 MELPA 安装。它的灵感来自于 Vim 的一个名为`vim-refactoring-ruby`. 在我的第一印象中，它似乎运作良好。

# java - 将 Microsoft Office 文档中的复制/粘贴文本正确存储到 MySQL 数据库中

> ID：13254739
> 
> 赞同：1
> 
> 时间：2012-11-06T15:58:17.343
> 
> 标签：java, encoding, utf-8

我知道 Microsoft Office 使用不同的编码，当有人将文本从 Office 复制并粘贴到 Java 文本面板时，它看起来不错。但是您随后将其存储到 MySQL 数据库中并检索它。它突然变成了各种垃圾拉丁字符。

我试图将其转换为`utf-8`之前的存储，但似乎不起作用。

想知道您是否可以检测到文本中是否有任何拉丁字符，所以我可以简单地弹出一个警报，让用户在保存之前知道。

或者，如果无论如何要禁用 jTextField 以仅以 UTF-8 字符显示所有内容，这样当用户从 word 复制和粘贴时，它会自动显示所有随机代码而不是看起来很好（在开始时）

示例：用户在 word 中输入内容，然后粘贴到 jTextField，我们直接传递字符串（注意我们的 sql 数据库是`utf8_general_ci`），然后我们将其获取到 JPanel，我们得到：

> ÃƒÆ'Ã†â€™Ãƒâ€ Ã¢â‚¬â„¢ÃƒÆ'Ã¢â‚¬Å¡Ãƒâ€šÃ‚Â¢ÃƒÆ'Ã†â€™Ãƒâ€šÃ‚Â¢ÃƒÆ'Ã‚Â ¢ÃƒÂ¢Ã¢â‚¬Å¡Ã‚Â¬Ãƒâ€¦Ã‚Â¡ÃƒÆ'Ã¢â‚¬Å¡Ãƒâ€šÃ‚Â¬ÃƒÆ'Ã†â€™Ãƒâ€šÃ‚Â¢ÃƒÆ 'Ã,Â¢ÃƒÂ¢Ã¢â€š

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:17:40.940

我有过类似的问题。首先要做的是找出确切写入数据库的内容。使用 MySQL 非常简单，只需登录并运行

```
SELECT HEX( column ) FROM table; 
```

这将为您提供已写入表的字节。然后，您可以使用[我为此目的编写的应用程序](https://github.com/chooban/Whats-That-Character-Set)。获取从 MySQL 返回的十六进制字符串，并使用 -b 字节标志[将其提供给主类。](https://github.com/chooban/Whats-That-Character-Set/blob/master/src/com/rosshendry/whatcharacterset/WhatCharacterSet.java)你会得到一大堆输出，希望其中一个是你最初的输出。

一旦你知道它被存储为什么，你就有了调试的起点。

# php - 会话变量未存储

> ID：13254743
> 
> 赞同：0
> 
> 时间：2012-11-06T15:58:16.380
> 
> 标签：php, sql

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

为什么这不起作用？我希望看到在 first.php 中的文本框中输入的任何内容都显示在 test.php 中。

```
 <html>
<body>
<form action="test.php">
Test: <input type="text" name="test" />
<br> <input type="submit" name="submit" />
    <?php
    session_start();
    $_SESSION['test'] = $_POST['test'];
    ?>

</body>
</html> 
```

这是test.php

```
 <?php
    session_start();
    $check = $_SESSION['test'];
    echo $check; 
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:00:09.013

**session_start() 必须在向浏览器输出任何内容（甚至不是空格）之前调用。**

您在页面的第一行上的 html 开始会话之后开始会话，例如

```
<?php
session_start();
print_r($_SESSION);
if(isset($_POST['submit'])){
    $_SESSION['test'] = $_POST['test'];
}
?>
<html>
    <body>
        <form method="post" action="addimageprocess.php">
            Test: <input type="text" name="test" />
            <br>
            <input type="submit" name="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:00:38.403

`session_start()`应该在发送任何标题之前设置（即在页面的最顶部）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:01:21.803

PHP 代码在实际`POST`完成之前执行，因为 PHP 是一种服务器端语言。那时，实际上没有 $_POST 数组。

此代码，来自您的例如。

```
 <?php
  session_start();
  $_SESSION['test'] = $_POST['test'];
 ?> 
```

已`$_POST`发布（或存在）到 test.php 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:02:09.853

您的主脚本中的 PHP 没有做您希望它做的事情，实际上只是在最好的情况下保存垃圾和/或 null。你需要反转 PHP 脚本，把

```
<?php
session_start();
$_SESSION['test'] = $_POST['test'];
?> 
```

在 test.php 和

```
<?php
session_start();
$check = $_SESSION['test'];
echo $check; 
?> 
```

在你的主要 php

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T16:32:28.003

如果您使用的是网络服务器，并且您确实有

```
<?php 
 session_start();
 $_SESSION['test'] = $_POST['test'];
?> 
```

但它仍然没有存储会话，那么您需要检查 saved_pa​​th

```
 <?php
    phpinfo():
  ?> 
```

检查会话标头下是否设置了 session:save_path 并确保它存在于服务器上。如果它是一个网络服务器，那么您将不得不联系您的主机为您设置保存路径。

# android - 如果 API-jar 具有此方法和实现，为什么会引发 NoSuchMethodError 异常

> ID：13254749
> 
> 赞同：0
> 
> 时间：2012-11-06T15:58:52.993
> 
> 标签：android

```
File f = new File(fullPath);            
long freeSpace = f.getFreeSpace(); 
```

我在 android 应用程序中使用上面的代码片段。我的应用程序编译良好，使用 sdk-15 jar。

我运行应用程序的安卓手机是 Froyo

我在运行时收到以下错误

```
 java.lang.NoSuchMethodError: java.io.File.getFreeSpace 
```

我查找了 getFreeSpace() 的文档，它说自 API-9 以来。据我了解，froyo 符合 API-8（我猜是更高版本？）所以我有点知道（但不太明白）我不能在 froyo 平台上调用此函数，但我可以在 API 之上的平台上调用它-8

**所以我的问题/歧义是这样的**

鉴于应用程序编译得非常好，我假设函数 f.getFreeSpace() 及其实现在我正在使用的 API-15 的 jar 中可用。当我的应用程序使用 API-15 的 jar 文件编译并且它应该在 jar 中实现 getFreeSpace() 时，为什么 android 会抛出运行时异常？如果 API-15 jar 中有实现，为什么平台 Froyo - API-8 会导致问题。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:55:23.263

> 我会假设函数 f.getFreeSpace() 及其实现在我正在使用的 API-15 的 jar 中可用

“API-15 的罐子”不是你想象的那样。

在编译时，您编译的 JAR*不是*APK 的一部分。它是一系列存根类和方法，足以让编译继续进行。这些类和方法的真正实现是在设备的固件中。

> 当我的应用程序使用 API-15 的 jar 文件编译并且它应该在 jar 中实现 getFreeSpace() 时，为什么 android 会抛出运行时异常？

您已经`getFreeSpace()`在编译时使用了 compile-tile JAR。您不会`getFreeSpace()`在 API 级别 8 设备上运行时拥有，因为该方法在该版本的 Android 中不存在。

> 如果 API-15 jar 中有实现，为什么平台 Froyo - API-8 会导致问题。?

因为您认为“API-15 jar”仅在编译时使用，而不是在运行时使用。

Android 开发者网站上曾经有更多关于此的材料，但它似乎已作为 2012 年初重新设计的一部分而丢失。

# javascript - iOS - UIWebViewDelegate 拦截 javascript 调用

> ID：13254751
> 
> 赞同：0
> 
> 时间：2012-11-06T15:58:56.297
> 
> 标签：javascript, ios, uiwebviewdelegate

我在这里使用了这个过程来允许javascript从我的iPad应用程序调用objective c：

[http://www.stevesaxon.me/posts/2011/window-external-notify-in-ios-uiwebview/](http://www.stevesaxon.me/posts/2011/window-external-notify-in-ios-uiwebview/)

我注入页面的 javascript 代码是：

```
<script type="text/javascript">;
window.external =
{
'Set_A': function(s) { document.location = 'qms://Set_A?param=' + s; },
'Get_A': function(s) { document.location = 'qms://Get_A'; },

'Set_B': function(s) { document.location = 'qms://Set_B?param=' + s; },
'Get_B': function(s) { document.location = 'qms://Get_B'; },

'Set_C': function(s) { document.location = 'qms://Set_C?param=' + s; },
'Get_C': function(s) { document.location = 'qms://Get_C'; },

'Get_Version': function(s) { document.location = 'qms://Get_Version'; }
};
</script>; 
```

而调用上述方法进行初始化的html代码中的javascript为：

```
<html>
<body>
...
<script type="text/javascript">

Get_Version();

Set_A(true);
Set_B(false);
Set_C(true);

<script>
</body>
</html> 
```

在上面的 html 中，Objective C 中调用的唯一方法是最后一个方法 Set_C(true);

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:05:57.743

因此，我使用此博客条目使事情正常进行：http: [//blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript /](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

# jquery - Flot - x 轴刻度未与实际数据对齐

> ID：13254757
> 
> 赞同：0
> 
> 时间：2012-11-06T15:59:18.187
> 
> 标签：jquery, flot

如下图所示，我遇到了以下问题，其中水平刻度似乎是随机的，并且不尝试与数据对齐。我的数据和代码也在下面。对此的任何帮助表示赞赏。

图片位于[http://imgur.com/VVrvi](http://imgur.com/VVrvi)（抱歉还不能附上图片）

代码：

```
 $.plot(placeholder,
            data, 
            {
               yaxes: [ { tickFormatter: centFormatter, max: 101, min: -0.1, tickSize: 20 }, { position: "right", min: -0, } ],
               xaxes: [ { mode: "time", minTickSize: [1, "day"],  } ],
               series: {
                   lines: { show: true },
                   points: { show: true }
               },
               grid: { hoverable: true, clickable: true },
    }); 
```

蓝线数据：

```
[2012-08-19] => 3612220
[2012-08-26] => 3570080
[2012-09-02] => 3576040
[2012-09-09] => 3597380
[2012-09-16] => 3593040
[2012-09-23] => 3579480
[2012-09-30] => 3638840
[2012-10-21] => 13 
```

我已经尝试过各种刻度选项、minTickSize 等。没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:23:07.150

问题是您的日期数据来自您服务器的时区，然后通过浏览器中的浮点数以 UTC 呈现。您需要仔细阅读[文档的](https://github.com/flot/flot/blob/master/API.md#time-series-data)**时间序列数据**部分。

> 默认行为是 Flot 始终根据 UTC 显示时间戳。原因是核心 Javascript Date 对象不支持其他固定时区。通常您的数据位于另一个时区，因此可能需要进行一些调整才能解决此限制。

假设您的服务器的时区是 UTC+8 小时。当您在服务器上为 2012 年 8 月 19 日创建时间戳时，您实际得到的是 2012 年 8 月 19 日上午 8 点。解决此问题的最简单方法是以 UTC 生成时间戳（这在许多语言中都是可能的，示例在 flot 文档中给出）。如果这不可能，只需将正确的毫秒数添加到生成的时间戳中，在我们的示例中，它看起来像这样（在伪代码中）：

```
myTz = new Date('2012-08-19').toTimestamp(); //this is 8am on the 19th in milliseconds
myTz = myTz - 8*60*60*1000; //this is 8 hours 
```

# android - EditText 光标与最后一个字母重叠

> ID：13254758
> 
> 赞同：0
> 
> 时间：2012-11-06T15:59:25.563
> 
> 标签：android, user-interface, android-edittext, user-input, textinput

在我用于测试的其中一台设备上（HTC One S，以防万一），`EditText`光标将与最后一个字母重叠，而不是位于字母之后。在随附的屏幕截图中，黑线是实际光标，红线是光标应该在的位置。这只发生在光标位于最后一个位置时；在其他位置，它正确出现在字母之间（如果在开头，则在第一个字母之前）。

![在此处输入图像描述](../Images/c8fd01f0ff3b02e14e2d45e138a80435.png)

我什至不知道这里可能是什么问题。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:33:33.313

我通过执行以下操作解决了这个问题：

```
int flags = editText.getPaintFlags() | Paint.ANTI_ALIAS_FLAG | Paint.SUBPIXEL_TEXT_FLAG;
editText.setPaintFlags(flags); 
```

# java - Java throw e 在 Android 上变为 null

> ID：13254759
> 
> 赞同：18
> 
> 时间：2012-11-06T15:59:30.790
> 
> 标签：java, android

我有以下内容：

```
 try {
        response.statusCode = urlConnection.getResponseCode();    
     } catch(IOException e) {
        throw e;
     } 
```

我看着调试器和`e = UnknownHostException`

投掷后我有：

```
 try {
        NetworkResponse response = NetworkHelper.getByURL(url);
     } catch(Exception e) {   <------- IT LANDS HERE, BUT e=null
        ExceptionHelper.announce(e);        
        throw e;
    } 
```

所以在抛出后，我的 catch 块得到了异常，但它是空的。调试器显示 e=null。

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:26:59.913

如果您立即重新抛出异常，我什至看不到捕获异常的意义。`throws IOException`向该方法添加一个并让另一个`catch`处理它。

# cross-domain - ServiceStack 条件 CROS

> ID：13254767
> 
> 赞同：1
> 
> 时间：2012-11-06T15:59:55.220
> 
> 标签：cross-domain, servicestack

我想知道是否只有在将“供应商密钥”提供给授权的第 3 方时才可以对服务进行有条件的跨域调用。

**远程：**

当服务被某个授权的远程服务器调用时，服务启用 CROS 功能，但需要“供应商密钥”作为参数或 cookie。

**本地：**

当服务被它自己的 web 服务器调用时，ajax 调用照常被接受。当本地服务器命中 CROS 服务时，不需要“供应商密钥”参数。

你能给我一些关于如何实施它的指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:02:50.093

这是[EnableCors 请求过滤器](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Cors/EnableCorsAttribute.cs#L32)属性的实现。

只需更改实现以查看传入的内容`IHttpRequest`，并且仅在满足您的条件时打印标题。

您也可以在您的[服务实现中手动使用](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)[全局请求过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)或 adhoc来执行此操作。

# php - 未经用户授权获取 Facebook 访问令牌

> ID：13254769
> 
> 赞同：0
> 
> 时间：2012-11-06T16:00:02.663
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

是否可以在没有 PHP 用户授权的情况下获取访问令牌？我需要用户访问令牌才能从 Facebook 粉丝页面获取照片：

```
$photoQuery = urlencode('SELECT pid,src_big,src_small,caption,link,position FROM photo WHERE aid = "'.$albumId.'"');    
$photoFQL = 'https://api.facebook.com/method/fql.query?query='.$photoQuery .'&access_token='.$access_token.'&format=xml';   
$photoResults = file_get_contents($photoFQL); 
```

有了用户授权，它工作得很好，但没有它我不知道如何获得正确的访问令牌。我试图这样得到它：

```
$url = 'https://graph.facebook.com/oauth/access_token?client_id=xxx&client_secret=xxx&grant_type=client_credentials';
$x = curl_setopt($ch, CURLOPT_URL, $url);       
$accessToken = curl_exec($ch);
curl_close($ch); 
```

所以实际上我得到了访问令牌，但它不适用于照片检索。也许问题在于 Facebook 粉丝页面与酒精相关，因此未经授权无法获得正确的令牌，或者我做错了什么。

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:16:14.450

如果 Facebook 页面有任何用户限制，例如酒精、年龄或国家/地区，您只能使用`access_token`符合设定条件的用户获取该页面的帖子。

这是为了防止不应该看到该页面信息的用户通过应用程序访问它。

# php - 基于列中值的PHP分页

> ID：13254772
> 
> 赞同：0
> 
> 时间：2012-11-06T16:00:09.763
> 
> 标签：php, mysql, pagination

我希望这个问题不是一个骗局。我一直在使用 php 进行分页，但我所看到的是基于条目总数和每页上固定数量的记录。如何根据特定列中出现的值使用分页？

所以例如`SELECT answers, name FROM table`

假设有 5 个`answers`可供选择，我想为每个使用分页`answer`。并非所有答案都分配了相同数量的记录。

这显然只会返回 5 页类似数量的记录：

```
$per_page = 5; 
$sql = "SELECT answer, name FROM table";
$result = mysql_query($sql);
$count = mysql_num_rows($result);
$pages = ceil($count/$per_page)

//Pagination Numbers
for($i=1; $i<=$pages; $i++)
{
echo '<li id="'.$i.'">'.$i.'</li>';
} 
```

# javascript - 覆盖主干同步以使用不同的调用获取/保存/销毁

> ID：13254778
> 
> 赞同：3
> 
> 时间：2012-11-06T16:00:30.260
> 
> 标签：javascript, backbone.js, backbone-model

我迟到骨干派对的原因是因为我担心它不会与我现有的网络服务很好地配合。我什至已经到了使用我自己版本的主干控制器和模型的地步，但是仅仅编写我自己的（当然）更糟糕的实现是徒劳的。

我正在使用 Asp.net Web 服务，因此，假设我们正在更新用户模型，我使用以下三个调用：

```
myservice/deleteUser.aspx?id=1
myService/getUser.aspx?id=1
myService/setUser.aspx? //post model 
```

我不明白这如何与骨干一起使用`sync`？我想我必须覆盖`fetch`/`save`和`destroy`?

我真的很感激一些很好的例子。我已经阅读了这个主题，包括带注释的来源，但我正在为“啊哈”的时刻而奋斗。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T16:21:17.380

您可以为您的集合或模型提供自定义`sync`函数，而不是`Backbone.sync`在您获取/更新/销毁元素时调用该函数。然后，您可以定制选项以发出与您的服务器设置匹配的请求。例如，

```
var M = Backbone.Model.extend({

    sync: function(method, model, options) {
        options || (options = {});

       // passing options.url will override 
       // the default construction of the url in Backbone.sync

        switch (method) {
            case "read":
                options.url = "/myservice/getUser.aspx?id="+model.get("id");
                break;
            case "delete":
                options.url = "/myservice/deleteUser.aspx?id="+model.get("id");
                break;
            case "update":
                options.url = "/myService/setUser.aspx";
                break;
        }

        if (options.url)
            return Backbone.sync(method, model, options);
    }

});

var c = new M({id: 1});
c.fetch();
c.save();
c.destroy(); 
```

还有一个模拟这些调用的小提琴[http://jsfiddle.net/nikoshr/4ArmM/](http://jsfiddle.net/nikoshr/4ArmM/)

如果使用 PUT 和 DELETE 作为 HTTP 动词让您感到困扰，您可以通过添加`Backbone.emulateHTTP = true;` See [http://jsfiddle.net/nikoshr/4ArmM/1/](http://jsfiddle.net/nikoshr/4ArmM/1/)来强制发布一个修订版。

# spring - 如何将 Java-config 类导入 XML-config 以便两个上下文都有 bean？

> ID：13254779
> 
> 赞同：51
> 
> 时间：2012-11-06T16:00:33.737
> 
> 标签：spring, configuration

我有一个项目，我需要将 @Configuration java-config 类引导到 XML 配置中。

为此，我读到我还需要包含以下 bean 定义（以及使用 @Configuration 注释的类的 bean 定义）。

```
<bean class="org.springframework.config.java.process.ConfigurationPostProcessor" /> 
```

但是，我最终收到以下错误：

```
Caused by: java.lang.ClassNotFoundException: org.springframework.config.java.process.ConfigurationPostProcessor 
```

我不得不假设我在某处丢失了一个罐子，但我的各种网络搜索还没有得到答案。任何帮助将不胜感激。谢谢。

**编辑**：显然，我正在阅读不再是最新的旧文档。让我备份。我的项目包含较旧的基于 XML 的配置。较新的代码都使用“Java-config”。话虽如此，上下文显然是完全分开的。我想将一个 java-config 类“导入”到 XML 配置中，以便两个上下文都有那些特定的 bean。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-09T20:12:59.520

这实际上最终变得相当简单。要将 Java-config bean 定义放入 xml-config，只需将 Java-config 类定义为 XML-config 中的 bean。不需要额外的罐子。

```
@Configuration
public class SomeJavaConfig {

    @bean
    ... [bean definition]
} 
```

在 XML-config 中，您将此类定义为 bean。

```
<!-- needed to pick up the annotated java-config -->
<context:annotation-config />

<!-- Importing java-config class, which are annotated with @Configuration -->
<bean name="SomeJavaConfig" class="[fully qualified path].SomeJavaConfig" /> 
```

XML-config 可能是不同上下文的一部分，现在具有在 JavaConfig 类中定义的所有 bean 定义。

**更新**- 在答案中包含 Alan Franzoni 的评论。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-30T10:54:41.587

或者，`annotation-config`您可以使用`component-scan`. 那么您不必在 XML 中包含配置 Bean：

```
<context:component-scan base-package="[fully qualified package path]" /> 
```

有关详细信息，请参阅[<context:annotation-config> 与 <context:component-scan> 之间的差异](https://stackoverflow.com/questions/7414794/difference-between-contextannotation-config-vs-contextcomponent-scan)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T16:21:08.597

应该在：

```
spring-javaconfig-<version>.jar 
```

# c# - MongoDB Linq 是否有“解释查询”？

> ID：13254784
> 
> 赞同：13
> 
> 时间：2012-11-06T16:00:40.867
> 
> 标签：c#, linq, mongodb, query-optimization, mongodb-.net-driver

有没有办法`.explain()`在 Linq 查询上运行或等效？我想知道

*   实际 JSON 查询的文本
*   `.explain()`（使用的索引等）的输出
*   有查询的执行时间也很好

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T00:00:26.923

如果你有一个查询包装器，你可以很容易地获得 Json；

```
var qLinq = Query<T>.Where(x => x.name=="jim");
Console.WriteLine(qLinq.ToJson()); 
```

MongoCursor 上还有一个 Explain() 方法，所以你可以这样做；

```
var exp = Collection.FindAs<T>(qLinq).Explain()
Console.WriteLine(exp.ToJson()); 
```

因此，如果您想要花费时间，“毫秒”就在那里；

```
var msTaken = exp.First(x => x.Name == "millis").Value.AsInt32; 
```

如果你有一个`IQueryable`，试试这样的；

```
void Do(MongoCollection col, IQueryable iq)
{
        // Json Mongo Query
        var imq = (iq as MongoQueryable<Blob>).GetMongoQuery();
        Console.WriteLine(imq.ToString());

        // you could also just do;
        // var cursor = col.FindAs(typeof(Blob), imq);
        var cursor = MongoCursor.Create(typeof(Blob), col, imq, ReadPreference.Nearest);
        var explainDoc = cursor.Explain();

        Console.WriteLine(explainDoc);
    }//Do() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-06T00:53:28.897

如果您希望在库中使用此功能，我刚刚创建了一个名为 GitHub 的项目

**.NET 的 MongoDB 查询助手**

[https://github.com/mikeckennedy/mongodb-query-helper-for-dotnet](https://github.com/mikeckennedy/mongodb-query-helper-for-dotnet)

它会：

*   将 LINQ 查询解释**为强类型对象**（例如，它是否使用索引）
*   将 LINQ 查询转换为在 MongoDB 中运行的 JavaScript 代码

如果您觉得有趣，请查看并贡献。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-25T17:06:05.297

就在这里。它显示了所有内容`.explain`，并且有一个用于详细说明的布尔值（它包括执行所花费的时间）：

```
var database = new MongoClient().GetServer().GetDatabase("db");
var collection = database.GetCollection<Hamster>("Hamsters");

var explanation = collection.AsQueryable().Where(hamster => hamster.Name == "bar").Explain(true);
Console.WriteLine(explanation); 
```

但它没有显示查询。这是一个扩展方法：

```
public static string GetMongoQuery<TItem>(this IQueryable<TItem> query)
{
    var mongoQuery = query as MongoQueryable<TItem>;
    return mongoQuery == null ? null : mongoQuery.GetMongoQuery().ToString();
} 
```

用法：

```
var query = collection.AsQueryable().Where(hamster => hamster.Name == "bar").GetMongoQuery();
Console.WriteLine(query); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-25T16:43:53.997

在 mongodb 3 C# 中，我使用了以下内容：

```
var users = Mongo.db.GetCollection<User>("Users");
var r = users(m => m._id == yourIdHere)
    .Project(m => new { m._id, m.UserName, m.FirstName, m.LastName })
    .Limit(1);

Console.WriteLine(r.ToString()); 
```

**结果：**

```
find({ "_id" : ObjectId("56030e87ca42192008ed0955") }, { "_id" : 1, "UserName" : 1, "FirstName" : 1, "LastName" : 1 }).limit(1) 
```

# java - Java 未捕获异常

> ID：13254792
> 
> 赞同：2
> 
> 时间：2012-11-06T16:01:13.657
> 
> 标签：java, logging, exception-handling, stack-trace, java1.4

不幸的是，我无法控制`getUserByUserId(String)`. 它的行为方式是如果找到用户则返回一个用户，`OntNoObjectExistsException`如果没有找到用户则抛出一个。`OntNoObjectExistsException`我的问题是，由于某种原因，当它被抛出时，它没有捕捉到。

此异常的类型层次结构是：`OntNoObjectExistsException`-> `OntException`-> `Exception`-> `Throwable`。

```
public boolean isUserIdAvailable(String userId) {
    try {
        return super.getUserByUserId(userId) == null;
    } catch (OntNoObjectExistsException e){
        return true;
    } catch (Exception ex) {
        appLog.error(ex.getMessage());
    }
    return false;
} 
```

我尝试了这段代码来测试水域，但问题仍然存在。注意，我在抓`Throwable`。

```
public boolean isUserIdAvailable(String userId) {
    try {
        return super.getUserByUserId(userId) == null;
    } catch (Throwable ex) {
        appLog.error(ex.getMessage());
    }
    return false;
} 
```

**这是堆栈跟踪：**

```
com.opennetwork.exception.OntNoObjectExistsException: User not found
    at com.bcbst.dsmart.api.WebUser.getUserByUserId(WebUser.java:411)
    at com.bcbst.dsmart.api.WebProspectiveMemberBean.isUserIdAvailable(WebProspectiveMemberBean.java:71)
    at com.bcbst.dsmart.api.EJSLocalStatelessWebProspectiveMember_ce00ef7b.isUserIdAvailable(EJSLocalStatelessWebProspectiveMember_ce00ef7b.java:120)
    at com.bcbst.prospectivememberweb.actions.UsageagreementAction.execute(UsageagreementAction.java:61)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525) 
```

另请注意，这是 java 1.4。还有一些我现在无法控制的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:03:15.917

让我提出一个假设。`WebUser.getUserByUserId`包含此代码：

```
if (userNotFoundCondition) {
  OntNoObjectExistsException e = new OntNoObjectExistsException("User not found");
  logger.error("User not found", e);
  throw e;
} 
```

该假设与您提交的所有证据 100% 一致。为了继续你的调查，你必须首先反驳这个假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:12:03.070

您在抛出 new 的超类中捕获异常`Throwable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:14:45.667

我同意另一个答案，即使用异常进行流控制是非常糟糕的做法，但要实际回答您的问题，您是否尝试捕获 Throwable 而不是 Exception？

```
catch (Throwable t) {
    // handle here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T17:10:10.790

你无法控制`getUserByUserId()`；但是，它似乎在同一个包`com.bcbst.dsmart.api`中，所以**这个答案假设**（以便继续）在同一个项目中它不在你的责任范围内，**但你有它的源文件**。

类`getUserByUserId()`所属的源与运行时使用的编译版本之间是否存在不匹配？

如果`throws`语句在编译后在该类中进行了修改，或者异常本身已更改，这可以解释您的这种明显荒谬的情况。

有关该假设的更多信息，请参见 SO 上的[答案。](https://stackoverflow.com/a/9275314/326294)

=> 重新编译一切，然后重新部署。

# php - 使用带有闭包的高级用法的模型 Crud 中的变量

> ID：13254795
> 
> 赞同：0
> 
> 时间：2012-11-06T16:01:20.410
> 
> 标签：php, fuelphp

```
echo $slot->id;
$slot->players = (Model_Players::find(function ($query)
{
    return $query->join('users')
        ->on('players.player', '=', 'users.id')
        ->where('players.slot', $slot->id);
})) ?: array(); 
```

回报：

```
4

ErrorException [ Notice ]: Undefined variable: slot  
APPPATH/classes/controller/booking.php @ line 98:  
98: ->where('players.slot', $slot->id); 
```

如何将`$slot`对象发送到函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:37:47.297

您必须在查询中“使用” $slot 变量

```
echo $slot->id;
$slot->players = (Model_Players::find(function ($query) use ($slot)
{
    return $query->join('users')
        ->on('players.player', '=', 'users.id')
        ->where('players.slot', $slot->id);
})) ?: array(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:44:29.507

需要使用`use`。

```
Model_Players::find(function ($query) use ($slot) 
```

干杯。

# python - Python 元组操作 - 获取值

> ID：13254797
> 
> 赞同：0
> 
> 时间：2012-11-06T16:01:21.710
> 
> 标签：python, list, dictionary, tuples

我有一个包含省数据的元组。

```
CHOICES = (
        ('', ''),
        ('United States', (
                ('AL', 'Alabama'),
                ('AK', 'Alaska'),
                ('AZ', 'Arizona'),
                ('AR', 'Arkansas'),
                ('CA', 'California'),
                ('CO', 'Colorado'),
                ('CT', 'Connecticut'),
                ('DE', 'Delaware'),
                ('DC', 'District of Columbia'),
                ('FL', 'Florida'),
                ('GA', 'Georgia'),
                ('GU', 'Guam'),
                ('HI', 'Hawaii'),
                ('ID', 'Idaho'),
                ('IL', 'Illinois'),
                ('IN', 'Indiana'),
                ('IA', 'Iowa'),
                ('KS', 'Kansas'),
                ('KY', 'Kentucky'),
                ('LA', 'Louisiana'),
                ('ME', 'Maine'),
                ('MD', 'Maryland'),
                ('MA', 'Massachusetts'),
                ('MI', 'Michigan'),
                ('MN', 'Minnesota'),
                ('MS', 'Mississippi'),
                ('MO', 'Missouri'),
                ('MT', 'Montana'),
                ('NE', 'Nebraska'),
                ('NV', 'Nevada'),
                ('NH', 'New Hampshire'),
                ('NJ', 'New Jersey'),
                ('NM', 'New Mexico'),
                ('NY', 'New York'),
                ('NC', 'North Carolina'),
                ('ND', 'North Dakota'),
                ('OH', 'Ohio'),
                ('OK', 'Oklahoma'),
                ('OR', 'Oregon'),
                ('PA', 'Pennsylvania'),
                ('PR', 'Puerto Rico'),
                ('RI', 'Rhode Island'),
                ('SC', 'South Carolina'),
                ('SD', 'South Dakota'),
                ('TN', 'Tennessee'),
                ('TX', 'Texas'),
                ('UT', 'Utah'),
                ('VT', 'Vermont'),
                ('VA', 'Virginia'),
                ('VI', 'Virgin Islands'),
                ('WA', 'Washington'),
                ('WV', 'West Virginia'),
                ('WI', 'Wisconsin'),
                ('WY', 'Wyoming')
            )
        ),
        ('Canada', (
                ('AB', 'Alberta' , 1.05),
                ('BC', 'British Columnbia', 1.12),
                ('MB', 'Manitoba', 1.05),
                ('NB', 'New Brunswick', 1.13),
                ('NL', 'Newfoundland and Labrador', 1.13),
                ('NT', 'Northwest Territories', 1.05),
                ('NS', 'Nova Scotia', 1.15),
                ('NU', 'Nunavut', 1.05),
                ('PE', 'Prince Edward Island', 1.05),
                ('SK', 'Saskatchewan', 1.05),
                ('ON', 'Ontario', 1.13),
                ('QC', 'Quebec', 1.05),
                ('YT', 'Yukon', 1.05)
            )
        )
    ) 
```

如果选择了加拿大省，是否有一种基于省代码获取号码的优雅方法。例子。如果我将省设置为 ON，是否可以使用元组操作来获取值 1.13。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:17:06.197

这些评论突出了您的主要问题——不幸的数据结构。但是，您可以轻松地将嵌套元组转换为字典。在 Python >=2.7 上：

```
>>> choices = {country: {t[0]: t[1:] for t in st} for country, st in CHOICES}
>>> choices['Canada']['ON'][1]
1.13 
```

注意：这将使`choices['United States']`dict 包含单元素元组作为值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:18:28.113

```
 Canada={CHOICES[2][1][x][0]:CHOICES[2][1][x][2]for x in range(len(a[2][1]))}
   Canada["ON"] 
```

# asp.net - 在我的网站中获取大量不需要的 404 日志

> ID：13254800
> 
> 赞同：0
> 
> 时间：2012-11-06T16:01:26.040
> 
> 标签：asp.net, http-status-code-404

从过去的几个月开始，我遇到了由于请求一些错误的 URL 而导致的 404 错误的问题。我不知道这些链接是从哪里来的。在我们的网站上没有这样的链接。几个例子是：

有如下链接：

www.abc.com/definition/1333/text/javascript

www.abc.com/undefined

www.abc.com/twitter.json

以上只是示例，我每天都会收到 100 个带有不同关键字的示例。

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:04:59.207

如果普通（即人类）访问者无法通过您网站上的链接到达这些位置，那么您无需担心。

有许多爬虫在网上搜索可利用的软件。这些爬虫使用他们知道的 URL 从一个网站跳转到另一个网站，这些 URL 会告诉他们某个应用程序是否正在运行。

* * *

但是，您应该小心并仔细检查，以免出现标记错误或类似错误将您的访问者引导至 404。

总是在责备别人之前责备自己。查看是否是您的错的一种方法是开始登录`Referer`标题（以查看指向 的页面`404`），即使这很容易被伪造，您仍然会面临足够的事实来排除其中一个或另一个。

# qt - 黑莓级联中 Windows 7 Phone PhoneCallTask 、EmailCompmoseTask 和 BingMapsTask 的等效项是什么

> ID：13254801
> 
> 赞同：0
> 
> 时间：2012-11-06T16:01:29.160
> 
> 标签：qt, windows-phone-7, qml, email-client, blackberry-cascades

我正在尝试在 Blackberry Cascades Beta 3 SDK 中找到 Windows 7 Phone PhoneCallTask​​、EmailComposeTask 和 BingMapsTasks 的等价物 - 我找到了一个 PhoneCallTask​​ 是 (bb::system::phone::Phone phone) - 它有一个名为requestDialpad，它应该调出一个拨号盘，但它没有这样做（我使用的是 Blackbery 10 Dev Alpha Simulator） - 所以我想知道如何解决这个问题，或者是否有更好的电话类。也适用于 EmailComposeTask - 我还没有找到任何东西。对于 BingMapsTasks - 我正在使用 WebView 在我想要的位置显示 Bing 地图 - 但它没有显示地图（它只是黑色） - 也许这是模拟器的问题 - 但我想知道是否有更好的东西为此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:34:09.580

为此，您需要使用调用框架来调出卡片。然而，这方面的文档尚未完全发布。但是，您需要查看 MapView 示例应用程序。

# java - 使用哪个 java 包来读取通过 Internet 传递的数据包并过滤它们

> ID：13254817
> 
> 赞同：-3
> 
> 时间：2012-11-06T16:02:29.583
> 
> 标签：java, firewall

我正在用java开发项目，它将充当防火墙。我使用对主机文件的读/写操作阻止了特定的 url。

现在，我想阻止/过滤打开的网站上的广告。我尝试使用`jpcap,java.net`但它没有帮助我？

你能建议我使用哪个包来读取通过互联网传递的数据包并使用java编程语言过滤它们。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:21:17.333

> 我想阻止/过滤打开的网站上的广告。

一个更简单的阻止网站的解决方案是将虚拟地址放入这些网站的主机文件中。如果你添加

```
127.0.0.1 www.ads.com 
```

并且您的 PC 将无法联系该网站。在 Unix 上你可以找到主机`/etc/hosts`，在 Windows 上它`C:\Windows\System32\drivers\etc\hosts`

如果您不想阻止整个地址，您可以实现自己的代理服务器并让浏览器使用此代理服务器。

顺便说一句：许多浏览器都有插件来支持广告拦截。你可能想先试试这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:49:10.033

Jpcap 无法过滤数据包。

过滤数据包是高度特定于平台的：

*   Linux：你使用`netfilter_queue`和`iptables`
*   MacOS：您使用转移套接字和`ipfw`
*   Windows：您要么编写驱动程序，要么使用[WinDivert](http://reqrypt.org/windivert.html)（LGPL，我的项目）或[WinPkFilter](http://www.ntkernel.com/?Products%3aDevelopment_Toolkits%3aWindows_Packet_Filter_Kit)等商业替代品。

这些用于数据包级过滤。这对于过滤 URL 并不理想，因为单个 URL 可以拆分为多个数据包。然而，它在实践中运作良好。

此外，我不知道 Java 绑定，因此您需要使用 JNI 编写自己的绑定。

# android - 为什么 getHandler() 返回 null？

> ID：13254819
> 
> 赞同：9
> 
> 时间：2012-11-06T16:02:32.490
> 
> 标签：android, android-mapview, handler

我有以下问题。我在单独的线程中在 mapview 上绘制路线，如下所示：

```
 public void drawRoute(final MapView mapView) { 
          new Thread(new Runnable() {
          public void run() {
          try {
           //Do something useful
          } catch (SomeException se) {
           Handler handler = mapView.getHandler();
           handler.post(/*show error in UI thread*/)
          }}
        }).start();
      } 
```

但是当我得到处理程序时，它返回 null，尽管在调试模式下处理程序返回并显示错误消息。问题可能是什么？

PS可能是获取Handler的方法不正确，但我找不到有关它的信息。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-19T08:55:00.113

该`getHandler`方法返回`null`，因为未附加视图：

```
public Handler getHandler() {
    if (mAttachInfo != null) {
        return mAttachInfo.mHandler;
    }
    return null;
} 
```

`mAttachInfo`在 中设置`dispatchAttachedToWindow`并为空`dispatchDetachedFromWindow`。

而不是`mapView.getHandler().post()`你可以直接使用**`mapView.post()`**（这似乎使用`getHandler().post()`or `ViewRootImpl.getRunQueue().post()`）。

# java - 有没有办法阻止用户访问 resteasy 中的 PUT、POST 和 DELETE 资源？

> ID：13254823
> 
> 赞同：2
> 
> 时间：2012-11-06T16:02:45.013
> 
> 标签：java, rest, authorization, jax-rs, resteasy

我的程序中有很多方法，也有很多用户。我该怎么做才能使特定的用户配置文件只被允许访问在 RestEasy 中标有 @GET 的方法？

**更新**

我有一些用户资料，如管理员、所有者、经理、员工和演示。

我想拒绝对个人资料为演示的用户进行除 GET 之外的所有操作。我阻止某些用户执行某些方法的方式只是检查他们属于哪个配置文件（IF）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:23:35.790

如果您的系统已经定义了用户和角色，并且您可以使用 JAAS 实现标准身份验证和授权，那么您可以使用 Jboss 安全注释来保护您的方法。请参阅此链接了解更多详情 -

[http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Securing_JAX-RS_and_RESTeasy.html](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/Securing_JAX-RS_and_RESTeasy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:10:37.003

在 REST 服务之前，您还可以添加反向 HTTP 代理（如 Apache）并使用您想要的身份验证提供程序（LDAP 或其他）。

例子：

```
<Location /myService/>
   AuthType Basic
   AuthName Foo
   AuthBasicProvider ldap
   AuthzLDAPAuthoritative off
   AuthLDAPURL ldap://ldap.acme.org/dc=acme,dc=org?cn
   <LIMIT POST PUT DELETE>
     require ldap-group cn=employee,dc=acme,dc=org
   </LIMIT>
</Location> 
```

# android - 当工作线程工作时，UI 变得不稳定

> ID：13254824
> 
> 赞同：10
> 
> 时间：2012-11-06T16:02:45.757
> 
> 标签：android, multithreading, user-interface, touch

我有一个手写识别应用程序 - 用户用手指绘制，应用程序识别字符。识别引擎在具有最低可能优先级的工作线程中运行 - `Thread.MIN_PRIORITY`。这是一个纯粹的 CPU/内存算法，没有任何 I/O。尽管如此，当线程正在积极工作时，UI 变得相当不稳定。手指敲击需要明显延迟才会出现。我还注意到触摸事件丢失了。

这不正是线程应该帮助避免的吗？为什么 UI 线程缺乏 CPU？如何说服系统将工作线程视为低优先级后台线程？

看起来系统正在（自愿或由于 CPU 饥饿）在`invalidate()`和之间引入延迟`onDraw()`。我能以某种方式降低延迟吗？

在相对较旧的硬件上进行测试 - 使用 Android 2.1 的 HTC Magic。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:26:39.193

有同样的问题，所以我做了我的线程：

1.  处理大量工作后的 Thread.yield()。

2.  以最少 500 毫秒的间隔发布到 UI 线程的有限更新（导致重绘少得多）。

3.  让工作人员处理优先的数据桶，这侧重于更新用户当前正在与之交互的视图。

现在整个 UI 真的很懒惰，但没有滞后。

这是我的工人的调度方法的样子（实际工作由 Process 方法完成）：

```
//--low priority
Thread.currentThread().setPriority(Thread.MIN_PRIORITY);

//--as long as there's more work to do, and not cancelled--
while (mPriorityBuffer.hasNext() && !isCancelled()) {

    //--get the work with highest priority--
    Work next = mPriorityBuffer.getNext();

    //--do work--
    Update u = mProcessor.process(next);

    // collect updates for main thread
    mUpdates.push(u);

    long timeNow = Calendar.getInstance().getTimeInMillis();
    if(timeNow - timeLast > 500){
        //--its been quite a while now, update ui--
        postUpdatesToMainThread();
        timeLast = timeNow;
    }

    //--let UI thread work on updates--
    Thread.yield();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:07:48.283

尝试`Thread.sleep(1)` 在字符识别方法中加入主循环

```
@Override
public void run() {
  while (!recognited) {

    //do some script

    try {
      Thread.sleep(1);
    } catch (InterruptedException e) {
      e.printStackTrace();
    }
  }
} 
```

这种睡眠让虚拟机可以提前并经常恢复其他线程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:19:17.160

您的 GUI 线程可能会加载触摸事件，如果是这样，那么解决方案是在 UI 线程上引入几毫秒的等待并提升您的工作线程。更多关于这里：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Oe6k1_bm38o](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Oe6k1_bm38o)

另外，也许您正在处理太多数据，例如实际上没有发生任何运动，或者运动不够显着。

# objective-c - Objective-C ivar 行为

> ID：13254830
> 
> 赞同：0
> 
> 时间：2012-11-06T16:03:11.157
> 
> 标签：objective-c, class, properties

我对我在 Objective-C 中看到的一些行为感到困惑。

我有一个方法如下：

```
-(void)showFormWithId:(NSString*)formId andMode:(int)mode
{
    HPSModelForm* model = [HPSDbUtilities getForm:formId];
    HPSFormController* formVC = [ [ HPSFormController alloc ] init ];
    [(UINavigationController*) self.view.window.rootViewController pushViewController:formVC animated:YES];

} 
```

在 HPSFormController 类中，我的实现包含以下内容：

```
@implementation HPSFormController
NSArray* _arrayOfPageNosWithSummaryElements; 
```

即 _arrayOfPageNosWithSummaryElements 不是属性，而是对 HPSFormController 类中的任何方法可见的 ivar。它根本没有在头文件中声明。

当我第一次调用 showFormWithId 时，_arrayOfPageNosWithSummaryElements 为零。但是，当我第二次调用 showFormWithId 时，在我看来 _arrayOfPageNosWithSummaryElements 不是 nil，而是具有上一个 HPSFormController 实例的值。我不明白这一点 - 肯定是因为 formVC 的范围是 showFormWithId 方法，然后我第二次调用 showFormWithId 然后应该创建一个全新的 HPSFormController 实例，而 _arrayOfPageNosWithSummaryElements 未初始化并因此设置为 nil？

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:05:16.833

它实际上根本不在实例变量中（实例变量在`interface`类的部分中声明）。在正常的 C 意义上，您正在声明一个全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:06:19.047

```
@implementation HPSFormController
NSArray* _arrayOfPageNosWithSummaryElements; 
```

不是 ivar 声明，而是全局变量的声明。你必须使用括号：

```
@implementation HPSFormController {
   NSArray* _arrayOfPageNosWithSummaryElements;
} 
```

# javascript - 正则表达式 - 允许使用字母、撇号、句号、逗号和连字符

> ID：13254831
> 
> 赞同：2
> 
> 时间：2012-11-06T16:03:11.840
> 
> 标签：javascript, java, jquery, html, regex

我正在为这个小而令人困惑的要求挠头。

我需要一个名称字段的正则表达式，它只允许使用字母、撇号、句号、逗号和连字符。名称字段也不应允许超过 150 个字符。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T16:15:25.353

使用正则表达式模式

```
^[a-zA-Z'.,-]{0,150}$ 
```

如果还需要最小长度，请替换`0`为这样的数字...

# ruby-on-rails-3 - 从嵌套的 has_many 关系访问项目

> ID：13254837
> 
> 赞同：2
> 
> 时间：2012-11-06T16:03:27.673
> 
> 标签：ruby-on-rails-3

我有 3 个模型：用户、学校和申请人。

一个用户`has_many :schools`、一个学校`has_many :applicants`和`belongs_to :user`一个申请人`belongs_to :school`。

我希望能够列出属于特定用户的任何学校的申请人。我想我应该可以做到

```
current_user.schools.applicants.paginate(page: params[:page]) 
```

这不起作用，因为它给出了这个错误：

```
undefined method `applicants' for #<ActiveRecord::Relation:0x007fb9da274110> 
```

如何访问这些申请人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:25:11.383

你不能`has_many`像那样链接关联。在用户模型上创建`has_many :through`关联：

```
# app/models/user.rb
has_many :applicants, :through => :schools 
```

然后你可以打电话

```
current_user.applicants.paginate(page: params[:page]) 
```

来自[ActiveRecord 关联指南](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)：

> has_many :through 关联对于通过嵌套的 has_many 关联设置“快捷方式”也很有用。[...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:24:38.097

你不能这样做。只要先前的关联解析为单个记录，关联就可以被链接（即，您可以链接`belongs_to.belongs_to.has_many`，但永远不要`has_many.has_many`——这就是`has_many :through`目的）。

如果你想要申请者，你需要实际选择申请者：

```
Applicant.where(school_id: current_user.schools.pluck(:id)).paginate(page: params[:page]) 
```

# java - 在 5 或 6 个图像之后使用 Java 应用程序从网络摄像头捕获图像

> ID：13254842
> 
> 赞同：-2
> 
> 时间：2012-11-06T16:03:34.880
> 
> 标签：java, image, webcam, capture

我正在使用 java 应用程序。在此应用程序中，在捕获 4 或 5 张图像后，使用 jmf 和 java 从网络摄像头捕获图像，然后进入视频模式。当时我无法再次捕获图像，显示一些错误“堆错误内存异常”请任何人告诉我想法。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:41:33.583

首先检查您是否正在调用created via ，然后在您不想再使用此图像时检查您是否正在调用`dispose()`您已创建的方法。如果这没有帮助，您可以尝试使用现成的解决方案，例如利用这个项目：`Graphics2D``BufferedImage.createGraphics()``flush()``BufferedImage`

[https://github.com/sarxos/webcam-capture](https://github.com/sarxos/webcam-capture)

代码示例（从网络摄像头拍照并保存在 test.png 文件中）：

```
Webcam webcam = Webcam.getDefault();
BufferedImage image = webcam.getImage();
ImageIO.write(image, "PNG", new File("test.png")); 
```

使用此库，您无需在不再使用后处理图形或刷新缓冲图像 - 底层驱动程序将为您完成。

# php - 在php中捕获鼠标点击

> ID：13254845
> 
> 赞同：3
> 
> 时间：2012-11-06T16:03:45.643
> 
> 标签：php, click, mouse, capture

我正在开发一个遇到问题的网站。问题是，用户必须从我显示的 3 个图像中选择一个图像。如何捕获该点击并将该特定点击的图像存储在数据库中？我的 sql 是分贝。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:05:50.340

PHP（通常）与图形用户界面无关。您可能正在谈论的用户界面是浏览器中的 HTML。执行此操作的 HTML 方法是带有提交按钮的表单中的复选框/单选按钮。可能图像可以是提交按钮。对于更动态的东西，您需要使用 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-26T15:04:11.543

这种情况下的问题似乎是用户点击的图像的记录。

1.  如果图像是 3 个单独的图像，则`img`标签可能会记录单击的图像，作为表单（服务器端）或 javascript（客户端）的一部分

2.  如果这 3 张图像是一张较大图像的一部分，那么**图像映射**可能就是您所追求的：

> `ismap`属性表示[服务器端图像映射](https://www.w3schools.com/tags/att_img_ismap.asp)；单击时，坐标将作为 URL 查询字符串发送到服务器。
> 该`usemap`属性将图像指定为客户端图像映射（图像映射是具有可点击区域的图像）。

# c# - 读取具有子对象列表的对象时，需要无参数的默认构造函数以允许出现简洁的物化错误

> ID：13254846
> 
> 赞同：3
> 
> 时间：2012-11-06T16:03:46.497
> 
> 标签：c#, asp.net-mvc-3, dapper

我有这个：

```
public class object_a
{
    public int ta_Id { get; set; }
    public string ta_Label { get; set; }
    public IEnumerable<table_c> SomeName { get; set; }
}

public class table_b
{
    public int Id {get;set;}
    public int SomeId {get;set;}
    public int FK_A {get;set;}
}

public class table_c
{
    public int Id {get;set;}
    public int Max {get;set;}
    public string Label {get;set;}
    public int FK_A {get;set;}
} 
```

使用 Dapper 我检索`object_a`具有任意数量的子对象的列表`table_c`

```
using (System.Data.SqlClient.SqlConnection sqlConnection = new System.Data.SqlClient.SqlConnection(_con))
{
        sqlConnection.Open();
        var sql = string.Format(
        @"
        select ta.Id as ta_Id, ta.Label as ta_label, splitLimit = '', tc.Id, tc.Max, tc.Label
        from table_a as ta
        left join table_b as tb
        on tb.FK_A = ta.Id
        left join table_c as tc
        on tc.FK_A = ta.Id
        where tb.SomeId = SomeInt);

        var items = sqlConnection.Query<object_a, IEnumerable<table_c>, object_a>(sql, (a, c) => { a.c = table_c; return a; }, splitOn: "splitLimit");
        return items;
    } 
```

从控制器调用 Dapper 代码时，我收到此错误：

> *需要一个无参数的默认构造函数来实现简洁的物化*

我也试过这个：

```
var items = sqlConnection.Query<object_a,IEnumerable<table_c>, object_a>(sql, (a, c) => 
{ 
                    if (c!= null) 
                    {
                        a.SomeName = c;
                    } 
                    return a; 

                }, splitOn: "splitLimit"); 
```

我认为这可能与，`IEnumerable<table_c>`但我不明白我在这里做错了什么。我已经阅读了 SO 建议的相关问题，但我不“明白”它。

我想知道我做错了什么以及正确的代码是什么。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T07:29:45.017

问题是`IEnumerable<>`，这里：

```
Query<object_a, IEnumerable<table_c>, object_a> 
```

dapper 无法创建`IEnumerable<table_c>`，而且永远不会。此方法的工作方式旨在：

```
Query<object_a, table_c, object_a> 
```

然后对于每一行，dapper 将从该行创建一个`object_a`和一个`table_c`，然后使用您的用户提供的方法将两者结合起来。目前，我们没有任何内置代码来执行基于身份的聚合，但可以在自定义方法中添加 - 例如以下尝试汇总重复`object_a`实例：

```
var identityMap = new Dictionary<int, object_a>();
var data = Query<object_a, table_c, object_a>(sql, (a, c) => {
    object_a master;
    if(!identityMap.TryGetValue(a.ta_id, out master)) {
        identityMap[a.ta_id] = master = a;
    }
    var list = (List<table_c>)master.SomeName;
    if(list == null) {
        master.SomeName = list = new List<table_c>();
    }
    list.Add(c);
    return master;
}, ...).Distinct().ToList(); 
```

# javascript - 使用 phonegap 提取动态内容的常见做法？

> ID：13254847
> 
> 赞同：0
> 
> 时间：2012-11-06T16:03:49.957
> 
> 标签：javascript, ajax, cordova, mobile, dynamic

因此，我最近一直在使用 phonegap 跨多个平台开发移动应用程序。我意识到要提取动态内容，您必须在 JavaScript 中使用 AJAX 调用。

我想知道，这是 HTML5 应用程序中的常见做法吗？从另一台服务器动态提取内容是否被认为是不好的做法？（因为它需要手机在 wifi 或某种数据计划上运行）。

只是想知道这在应用程序开发中是好还是坏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:08:18.540

这完全取决于您的应用程序！

考虑两个主要示例：

1.  Facebook。没有持续的联系，一文不值。
2.  文档编辑器。此应用应仅在 wifi 可用时与云端同步，并且不应在 wifi 不可用时无法运行

这两个简单的示例应该有助于从使您的应用程序有价值的方面提出问题。如果价值来自网络，那么要求和使用它肯定是可行的。如果该值没有（或者如果网络功能是“增值”），则不需要它。在后一种情况下，请注意网络功能正在成为一种期望（云同步等），但不应成为功能要求。

# asp.net - 为什么在 post 数据不加密时 ViewState 应该加密？

> ID：13254849
> 
> 赞同：1
> 
> 时间：2012-11-06T16:03:53.313
> 
> 标签：asp.net

正是这样。我不太明白。

提供 ViewState 加密是为了保护用户数据隐私，但是如果例如使用 http（不是 https）发布的表单数据对于来自 http 消息正文的拦截器来说是清晰可见的，那么设置 ViewState 加密的意义何在？

感谢您的澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:11:25.050

ViewState 加密的目的是确保数据不*被篡改*，而不是保护数据不被查看。从[文档](http://msdn.microsoft.com/en-us/library/ms178199%28v=vs.85%29.aspx)：

> 通过创建哈希值，ASP.NET 页面框架可以测试视图状态数据是否被篡改。但是视图状态数据仍然可以查看，并且可能被恶意用户截取和读取。... 虽然 MAC 编码有助于防止篡改查看状态数据，但它不会阻止用户查看数据。

**更新**

我最初的评论可能看起来有点误导 - 您*可以*通过使用加密来保护 ViewState 的查看，但是，这**不会**加密实际`POST`数据（这就是我要说的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:12:34.610

由于 ViewState 用于在无状态环境中合成状态，因此它可以包含页面内部使用的信息，以在用户与其交互时跟踪页面的状态。

因此，它可能被用于提取、修改或畸形视图状态信息以影响页面的工作方式。特别是，它可以防止“一键式攻击”（其中完整状态是预先构建并一次性发布的）。发布数据没有被加密（除了传输，如果你使用 SSL），因为 A）在 HTTP 或 HTML 中并没有真正的机制，B）它是一次单程，客户端无论如何都会产生数据。

如果你根本不使用 ViewState（对你有好处！），或者确信它不能被用来恶意操纵或提取用户信息，那么就不要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:16:31.627

如果您将敏感数据保持在视图状态，您可能希望对其进行加密。默认情况下，视图状态不加密，除非页面上的控件请求加密。

# c - 未分配重新分配的指针

> ID：13254859
> 
> 赞同：4
> 
> 时间：2012-11-06T16:04:24.430
> 
> 标签：c, pointers, malloc, realloc

```
#include <stdio.h>
#include "stdlib.h"

int main(int argc, const char * argv[])
{
    int i,j;
    char takimlar[4][8]= { "TAKIM A ","TAKIM B","TAKIM C","TAKIM D"};
    char *var = malloc(sizeof(char)*1);
    int sonuclar[4][4] = {
        {0,3,4,2},
        {1,2,3,1},
        {2,3,2,3},
        {0,2,1,4}
    };

    for (i=0; i<4; i++) {
        if (sonuclar[i][2]>sonuclar[i][3]) {
            var = realloc(var,8);
            for (j=0; j<8; j++) {
                var += takimlar[i][0];
            }
        }
        else if(sonuclar[i][2]<sonuclar[i][3]){
            var = realloc(var,8);
            for (j=0; j<8; j++) {
                var += takimlar[i][1];
            }
        }
    }
    printf("%s",var);

    return 0;
} 
```

我想为变量动态分配内存，然后我想使用 realloc 函数分配更多内存。当我运行这个程序时，我得到了这个错误：

> 对象 0x100100c17 的错误：未分配重新分配的指针。在 malloc_error_break 中设置断点进行调试

当我查看*`malloc.c`*文件时，我看到了这些行：

```
zone = find_registered_zone(old_ptr, &old_size);
    if (!zone) {
        malloc_printf("error for object %p: pointer being realloc'd was not allocated.\n"
        "set a breakpoint in malloc_error_break to debug\n", old_ptr);
        malloc_error_break(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:19:18.797

此行正在递增指针`var`：

```
var += takimlar[i][0]; 
```

在循环的后续迭代中，当`var`传递给`realloc()`它时不是`realloc()`or返回的值`malloc()`。*看起来*好像代码正在尝试将 a 附加`char`到 a ，而这`char*`不是如何实现这一点的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:18:25.210

```
var += takimlar[i][0]; 
```

`var`是 a `char*`，因此您正在向地址添加一个字符。我不确定这是你想要做的。然后，当您调用 时`realloc`，指针不再等于返回的地址`malloc`。因此，您有运行时错误。

# c# - C# 中的西班牙语字符

> ID：13254864
> 
> 赞同：2
> 
> 时间：2012-11-06T16:04:38.967
> 
> 标签：c#, unity3d, .net-assembly, utf

我目前正在开发一个使用 HtmlDocument 访问 Google 翻译网站的西班牙语翻译程序。我在 Unity 中用汇编 C# 编程。下面显示的是我当前访问 Google 的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using UnityEngine;
using System.Collections;
using System.Net;
using HtmlAgilityPack;

public class Dictionary{
    string[] formatParams;
    HtmlDocument doc;
    string returnString;
    char[] letters;
    public Dictionary(){
        formatParams = new string[2];
        doc = new HtmlDocument();
        returnString = "";
    }
    public string Translate(String input, String languagePair, Encoding encoding)
    {
        formatParams[0]= input;
        formatParams[1]= languagePair;
        string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text={0}&langpair={1}", formatParams);

        string result = String.Empty;

        using (WebClient webClient = new WebClient())
        {
            webClient.Encoding = encoding;
            result = webClient.DownloadString(url);
        }       
        doc.LoadHtml(result);
        input = alter (input);
        return doc.DocumentNode.SelectSingleNode("//span[@title='"+input+"']").InnerText;
    }
    // Use this for initialization
    void Start () {

    }
    string alter(string inputString){
        returnString = "";
        letters = inputString.ToCharArray();
        for(int i=0; i<inputString.Length;i++){
            if(letters[i]=='\''){
                returnString = returnString + "&#39;";  
            }else{
                returnString = returnString + letters[i];   
            }
        }
        return returnString;
    }
} 
```

代码通过以下方式访问：

```
 search = new Dictionary();
    input = " ";
    temp = " ";
    returnString = "";
    code = Encoding.UTF8;

    search.Translate(input,"en|es",code); 
```

此代码确实可以成功运行，如果您输入“Hello”作为输入，它将返回“Hola”。但是，如果您将输入设置为“你好吗？” 它将返回“Cmo ests”。我进行了研究，发现使用 UTF8 不会显示特殊字符，而我需要西班牙语（和其他语言）。我已经读到使用 UTF16 将修复这个错误，但是，当我写：

```
code = Encoding.UTF16; 
```

弹出另一个错误说：

```
Assets/GUIScript.cs(26,33): error CS0117: `System.Text.Encoding' does not contain a definition for `UTF16' 
```

如果有人知道正确实现 UTF16 或用特殊字符解决我的问题的代码，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:16:02.227

首先，你不需要 UTF16。西班牙字符（实际上，任何 Unicode 字符）都可以用 UTF8 表示。但要回答您的直接问题，您应该使用`System.Text.UnicodeEncoding`UTF16（[链接](http://msdn.microsoft.com/en-us/library/system.text.unicodeencoding.aspx)）。

您遇到的问题在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:12:29.383

如下图所示，我确实检查了翻译器和编码。似乎 UTF-8 是您唯一应该使用的东西，因为我确信这一点。如您所见，翻译器响应的编码也是 UTF-8。它是世界上使用自然语言最完整的编码。

![在此处输入图像描述](../Images/fd45b7b4a34c783451c80111575f77e9.png)

干杯

# php - Preg_replace 用正则表达式和正斜杠

> ID：13254868
> 
> 赞同：0
> 
> 时间：2012-11-06T16:04:50.043
> 
> 标签：php, regex, preg-replace

这是代码：

```
$string = "/My-Item-Here-p/sb-p36abbg.htm";
$str = preg_replace('/^.*-p\s*/', '', $string);
$str = substr($str, 1);
echo $str; 
```

这吐出来`6abbg.htm`，我想让它只删除之前的所有内容，包括“-p/”（注意带有正斜杠）。

所以我希望它吐出来`sb-p36abbg.htm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:09:47.777

试试这个正则表达式：`/^.*-p\/(.*)$/`

```
<?php
$sourcestring="/My-Item-Here-p/sb-p36abbg.htm";
echo preg_replace('/^.*-p\/(.*)$/','\1',$sourcestring);
?> 
```

[键盘链接。](http://codepad.org/VPKHa3qz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:20:02.313

```
$string = "/My-Item-Here-p/sb-p36abbg.htm";
$str = preg_replace('/^.*?(?=-p\/)', '', $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:12:19.720

我认为您没有理由在这种特定情况下使用正则表达式。只需使用[strpos](http://www.php.net/manual/en/function.strpos.php)和[substr](http://php.net/manual/en/function.substr.php)。

```
$string = "/My-Item-Here-p/sb-p36abbg.htm";
$str = substr($string, strpos($string, '-p/') + 3);
echo $str; 
```

考虑到在不需要的地方使用正则表达式会浪费计算资源。

# c++ - 调用转换运算符

> ID：13254873
> 
> 赞同：11
> 
> 时间：2012-11-06T16:05:06.690
> 
> 标签：c++, operators

以下行为的原因是什么？

```
class BoolWrapper
{
public:
    BoolWrapper(bool value) : value(value) {}

    operator bool() const { return value; }
    operator int() const { return (int) value; }

private:
    bool value;
};

BoolWrapper bw(true);

if (bw) { ... }            // invokes operator bool()
if (bw == true) { ... }    // invokes operator int() -- why? 
```

这种行为是预期的吗？（使用 GCC 4.7.2。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:12:53.877

从 5/9 开始：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：

[一些无关紧要的浮点项目。]

> 否则，应在两个操作数上执行积分提升 (4.5)。

从 3.9.1/6 开始，我们看到 bool 有资格进行积分提升：

> bool 类型的值为真或假。42) [注意：没有带符号、无符号、短或长布尔类型或值。] 如下所述，布尔值表现为整数类型。bool 类型的值参与积分促销 (4.5)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T16:33:25.977

您的期望基于您的信念，即语言已经知道如何比较两个`bool`值。实际上并没有，无论听起来多么令人惊讶。更准确地说，语言“不知道”如何*直接*做到这一点。

在概念级别，C++ 没有专门的内置相等比较运算符用于`bool vs. bool`比较。即使您`true == false`在代码中编写代码，它实际上也被语言解释为`(int) true == (int) false`. 隐式转换`int`由*通常的算术转换*规则引入，然后`int vs. int`使用比较。

`bool`可以比较两个值的最直接的内置运算符是用于`int vs. int`比较的运算符。这也是编译器在您的情况下尝试使用的运算符。相同的运算符将用于`char vs. char`和`short vs. short`比较。

换句话说，编译器可以在表达式中使用`bool`转换运算符的唯一方法是`bw == true`

```
(int)(bool) bw == (int) true 
```

这肯定不如直接“最佳”

```
(int) bw == (int) true 
```

这是驱动语言选择后一种变体的逻辑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T16:13:05.180

在第一种情况下，`if`子句需要一个`bool`条件，因此这是选定的转换。

在第二种情况下，您要求比较 a`BoolWrapper`和 a `bool`。由于不`operator ==`存在重载来执行此操作，因此编译器必须将这些参数转换为合适的参数。根据标准（第 4.5 节，*积分促销*），转换的首选积分类型是`int`. 由于两者`BoolWrapper`和`bool`都可以转换为`int`，因此这是选定的转换。

# android - 检测何时绘制片段？

> ID：13254879
> 
> 赞同：26
> 
> 时间：2012-11-06T16:05:31.867
> 
> 标签：android

基本上我需要的功能，`onWindowFocusChanged()`但在一个`Fragment`. 不幸的是，`onWindowFocusChanged()`侦听器实际上对片段不可用，所以我不确定该怎么做。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-06T16:18:32.160

片段是通过`View`您返回的“绘制”的`onCreateView()`。您可以在其中使用事件处理程序。通常，如果有一个命令需要在`View`第一次查看时运行，您可以将其分配在 a 中，并通过方法`Runnable`将其附加到。`View``post()`

```
getView().post(new Runnable() {
    @Override
    public void run() {
      // code you want to run when view is visible for the first time
    }
  }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T09:40:38.310

onWindowFocusChanged(boolean hasFocus) 方法在活动中调用，但是在绘制片段时我们可以通过 onActivitycreated() 方法进行检查。检查这篇文章 [https://stackoverflow.com/a/32819850/2732632](https://stackoverflow.com/a/32819850/2732632)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-06T16:19:23.930

OnWindowFocusChanged 不提供有关绘制视图（或没有看到）的信息 在可以在片段中具有焦点的每个视图上实现 OnWindowFocusChanged。在伪代码中：

```
Fragment implements OnWindowFocusChanged{

onCreate(){

btn.OnWindowFocusChanged(this);
editTxt.OnWindowFocusChanged(this);
....

}

public void OnWindowFocusChanged(boolean hasFocus){
// your fragment has focus
}

} 
```

# sql - 通过 WHERE 访问结果

> ID：13254884
> 
> 赞同：0
> 
> 时间：2012-11-06T16:05:54.633
> 
> 标签：sql, select, where

好吧，在我[在这里](https://stackoverflow.com/questions/13230685/fetching-a-result-twice-with-deferend-name)的第一个问题之后，我得到了以下正确且经过测试的代码：

```
SELECT DISTINCT
id, title, description, expires,
creator_id,executer_id,
oc_opentask.priority_id,
oc_opentask.status_id, priority_name, status_name,
oc_user1.username AS executer_username,
oc_user2.username AS creator_username
FROM oc_opentask
INNER JOIN oc_opentask_priority 
ON oc_opentask.priority_id=oc_opentask_priority.priority_id
INNER JOIN oc_opentask_status 
ON oc_opentask.status_id=oc_opentask_status.status_id
INNER JOIN oc_user AS oc_user1 
ON oc_opentask.executer_id=oc_user1.user_id
INNER JOIN oc_user AS oc_user2 
ON oc_opentask.creator_id=oc_user2.user_id 
```

我的下一个问题是：我想访问它们`executer_username`并`creator_username`使用 WHERE 属性将其与值进行比较，所以我正在尝试的是：

```
SELECT DISTINCT
id, title, description, expires,
creator_id,executer_id,
oc_opentask.priority_id,
oc_opentask.status_id, priority_name, status_name,
oc_user1.username AS executer_username,
oc_user2.username AS creator_username
FROM oc_opentask
INNER JOIN oc_opentask_priority 
ON oc_opentask.priority_id=oc_opentask_priority.priority_id
INNER JOIN oc_opentask_status 
ON oc_opentask.status_id=oc_opentask_status.status_id
INNER JOIN oc_user AS oc_user1 
ON oc_opentask.executer_id=oc_user1.user_id
INNER JOIN oc_user AS oc_user2 
ON oc_opentask.creator_id=oc_user2.user_id
WHERE oc_opentask.creator_username='bill' 
```

bill 确实存在于 db 中，但我访问该值的命令不正确，any1 可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:15:15.627

您有一个列别名：

```
oc_user2.username AS creator_username 
```

在你的 where 子句中，你正在使用别名。您需要使用实际的列名，因此将其更改为：

```
where oc_user2.username = 'bill' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T02:59:24.587

如果这是 MySQL，只需使用 HAVING 代替 WHERE。然后，无论您是指定原始列名还是您定义的别名，您都不会遇到问题。HAVING 还允许您使用聚合函数的结果，即 HAVING MAX(salary) > 40，而 WHERE 也失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:15:51.543

**您使用错误的表来获取 where 子句中的创建者名称。**使用`oc_user2`表获取用户名（创建者名称）。另外我只是想仍然可能存在`case`相关问题，因此建议`LOWER`在比较之前使用函数，如下所示：

```
 SELECT DISTINCT
       id, title, description, expires,
       creator_id,executer_id,
       oc_opentask.priority_id,
       oc_opentask.status_id, priority_name, status_name,
       oc_user1.username AS executer_username,
       oc_user2.username AS creator_username
    FROM oc_opentask
    INNER JOIN oc_opentask_priority 
       ON oc_opentask.priority_id=oc_opentask_priority.priority_id
    INNER JOIN oc_opentask_status 
       ON oc_opentask.status_id=oc_opentask_status.status_id
    INNER JOIN oc_user AS oc_user1 
       ON oc_opentask.executer_id=oc_user1.user_id
    INNER JOIN oc_user AS oc_user2 
       ON oc_opentask.creator_id=oc_user2.user_id
    WHERE LOWER(oc_user2.username)=LOWER('bill') 
```

我只是`LOWER`在右侧使用，使其与大小写无关，`any valid name`无论大小写如何。

# facebook - “致命错误：无法重新声明类 FacebookApiException

> ID：13254885
> 
> 赞同：0
> 
> 时间：2012-11-06T16:05:59.703
> 
> 标签：facebook, class

我已经安装了 instabuilder 插件，但不知何故 SEO Facebook C. 插件与它发生冲突。

只有当`SEO Facebook C.`插件处于活动状态时才能访问此页面：[http](http://www.jmuller777.com/blog/?mode=facebook_tab) ://www.jmuller777.com/blog/?mode=facebook_tab 给了我以下错误：

> “致命错误：无法在第 107 行的 /home/denrrou/public_html/jmuller777.com/blog/wp-content/plugins/InstaBuilder/inc/facebook/base_facebook.php 中重新声明类 FacebookApiException”

我读过这应该是一个班级问题，但我不知道在哪里解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:17:50.167

例如，重新声明可能意味着您将类文件包含两次。确保您使用`include_once(...)`

或者您有 2 个使用相同类的插件。您可以在插件代码中搜索“FacebookApiException”。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T08:26:04.127

这很简单。只需停用可能发生冲突的插件，激活导致错误的插件，然后激活您之前停用的插件。

# jsf - 在 p:fileDownload 开始时显示状态并在完成时隐藏状态

> ID：13254887
> 
> 赞同：10
> 
> 时间：2012-11-06T16:06:04.940
> 
> 标签：jsf, primefaces, download, monitor

我想在执行 zipManager.makeZip() 时显示 ajaxStatus ......直到下载开始。如果 ajax=false，文件下载有效，但 ajaxStatus 不显示。如果 ajax=true，显示 ajaxStatus 但无法下载！

知道如何使 ajaxStatus 和 fileDownload 一起工作。

提前致谢

凯姆

```
<h:form id="form">
    <p:commandLink id="download" value="Download"
        onstart="showStatus()" oncomplete="hideStatus()" 
        actionListener="#{zipManager.makeZip()}">
        <p:fileDownload value="#{zipManager.zip}"/>  
    </p:commandLink>
</h:form>

<p:ajaxStatus id="status" widgetVar="st" style="position:fixed;right:50%;bottom:50%">  
    <f:facet name="start">  
        <p:graphicImage value="images/wait.gif" />  
    </f:facet>  
</p:ajaxStatus> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T16:23:46.987

> *如果 ajax=false，文件下载有效但 ajaxStatus 不显示*

那是因为下载不是通过 ajax 请求进行的。

* * *

> *如果 ajax=true，显示 ajaxStatus 但无法下载！*

那是因为无法通过 ajax 请求进行下载。JS/Ajax 将成功检索文件，但不知道如何处理它。没有办法强制与 JS 进行*另存为*对话。无法使用 JS 访问本地磁盘文件系统（否则将是一个巨大的安全漏洞）。

* * *

> *知道如何使 ajaxStatus 和 fileDownload 一起工作。*

使用 PrimeFaces 提供的`PrimeFaces.monitorDownload()`JS 函数。一个完整的例子可以在[他们自己的`<p:fileDownload>`展示页面](http://www.primefaces.org/showcase/ui/file/download.xhtml)上找到，下面复制粘贴以供参考（特别注意`onclick`文件下载命令按钮的属性）：

```
<p:dialog modal="true" widgetVar="statusDialog" header="Status" 
    draggable="false" closable="false" resizable="false">  
    <p:graphicImage value="/design/ajaxloadingbar.gif" />  
</p:dialog>  

<h:form id="form">  
    <p:commandButton id="downloadLink" value="Download" ajax="false"
        onclick="PrimeFaces.monitorDownload(start, stop)"
        icon="ui-icon-arrowthichk-s">  
        <p:fileDownload value="#{fileDownloadController.file}" />  
    </p:commandButton>  
</h:form>  

<script type="text/javascript">  
    function start() {  
        statusDialog.show();  
    }  

    function stop() {  
        statusDialog.hide();  
    }  
</script> 
```

这可以通过更改命令链接应用于*您的特定情况*，如下所示：

```
<p:commandLink id="download" value="Download" ajax="false"
    onclick="PrimeFaces.monitorDownload(showStatus, hideStatus)"
    actionListener="#{zipManager.makeZip()}"> 
```

并用`<p:ajaxStatus>`一个简单的替换，`<p:dialog>`如展示示例中所示。

* * *

这一切都在后台使用特殊的 cookie 进行，JS 会在短时间内（每 100 毫秒左右）轮询一次。在创建文件下载响应期间，将在其标题上设置一个特殊的 cookie。一旦文件下载响应标头到达浏览器，就会在浏览器中设置 cookie。当 JS 轮询器在浏览器 cookie 空间中找到它时，它会关闭进程。

# build - 使用 Spine.js 和 Hem 时，有没有办法阻止它压缩 Javascript？

> ID：13254888
> 
> 赞同：3
> 
> 时间：2012-11-06T16:06:04.727
> 
> 标签：build, spine.js

我刚开始使用 Spine，并且正在使用 Hem 的默认实现。我基本上正在运行“hello world”待办事项示例应用程序，但试图替换服务器后端而不是本地存储。

但是当我从 hem 运行应用程序时，出现了错误。现在错误可能是我的，但是由于 Javascript 已被压缩，因此很难调试。（Hem 编译和压缩咖啡脚本文件）。

有没有办法在 slug.json 之类的东西中指定不压缩文件以便我可以调试？我不认为压缩文件是默认的咖啡脚本编译器选项，所以它必须要么让咖啡来做，要么自己做。

对 Javascript MVC 世界和 Coffeescript 来说都是全新的，但在我调试我的第一个（肯定会有很多）错误之前取得了进展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T18:19:04.010

你可以试试

```
hem --debug=true build 
```

使用这个，hem 不会缩小生成的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:35:33.857

如果调试你通常会使用 hem 服务器功能

在 hem 的最新版本中 --debug 别名为 -d

```
hem server -d 
```

# uicollectionviewcell - UICollectionView 单元格不可见

> ID：13254891
> 
> 赞同：5
> 
> 时间：2012-11-06T16:06:13.673
> 
> 标签：uicollectionviewcell

我最近在我的故事板中添加了一个 UICollectionView，它当前被另一个视图推入视图，这似乎工作正常但是，使用故事板编辑器我将视图设置为包含 35 个在编辑器中看起来很好的单元格，但是当我运行应用单元格是不可见的。一些单元格内部有 UIButtons，这些也不会呈现。

为了仔细检查视图是否正在渲染，我在编辑器中更改了背景颜色并再次运行它，颜色更新正确。我是否正确假设设置应该自动呈现单元格，如果它们已在编辑器中设置，我不必运行任何委托代码？

任何帮助，将不胜感激。

谢谢

编辑 - -

好的，我已经在我的第二个视图控制器中实现了适当的委托方法，然后推送一个 segue 以调出 collectionview 控制器，我还添加到我的第二个视图控制器头文件中，并将以下代码添加到 .M 文件中：

```
// number of sections for the view
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

// numbers of items in section
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return 1;
}

// cell to return (uses the custom identifier of the cell in the storyboard)
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"quickNoteCell" forIndexPath:indexPath];
    return cell;
} 
```

我还确保故事板上单元格中的标识符使用 quickNoteCell，并将其默认颜色更改为蓝色，但是我仍然没有看到单元格有任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-08T14:20:06.973

您没有看到任何单元格，因为您生成了一个 UICollectionViewController 子类，该子类在`viewDidLoad:`. 据我了解，这会产生空白单元格，在使用自动布局时会压缩到 0,0 大小。

**删除此行以查看您在情节提要中定义的单元格，而不是不可见的 UICollectionViewCells**

```
 // Register cell classes
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:reuseIdentifier]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:56:16.760

就像杰伊说的那样，把这条线放在你的@interface 下，它应该可以工作。您发布的代码没有任何问题。

```
<UICollectionViewDelegate, UICollectionViewDataSource> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:31:09.123

你实现了 UICollectionViewDelegate 和 UICollectionViewDataSource 协议了吗？

collectionView:cellForItemAtIndexPath: 是否被调用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T09:04:56.980

如果您正在使用自定义 collectionViewItems 并且您想将数据从 nib 文件寄存器的第一个 nib 加载到 collectionView：

```
let nib = UINib(nibName: reuseIdentifier, bundle: Bundle.main);
self.collectionView?.register(nib, forCellWithReuseIdentifier: reuseIdentifier); 
```

并在集合视图委托中调用：

```
collectionView.dequeueReusableCell(withReuseIdentifier: reuseIdentifier, for: indexPath) 
```

# oracle - Oracle 查询以填补分组记录之间的时间间隔

> ID：13254895
> 
> 赞同：0
> 
> 时间：2012-11-06T16:06:26.997
> 
> 标签：oracle, plsql

不太确定从哪里开始查询，但我有两个表，TEST_A 和 TEST_B。

TEST_B 包含特定 ID 的特定日期范围，而 TEST_A 包含具有提供的 ASSIGNMENT 值的 ID 的日期范围。

下面是用于创建和填充表的 DDL。

```
CREATE TABLE TEST_A
(
  ID          VARCHAR2(5),
  START_DATE  DATE,
  END_DATE    DATE,
  ASSIGNMENT  VARCHAR2(25)
)
STORAGE    (
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
NOMONITORING;

CREATE TABLE TEST_B
(
  ID          VARCHAR2(5),
  START_DATE  DATE,
  END_DATE    DATE
)
STORAGE    (
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
NOMONITORING; 
```

以及填充表格的脚本：

```
INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('A', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('01/31/2010', 'MM/DD/YYYY'), 'Lot A');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('A', TO_DATE('02/01/2010', 'MM/DD/YYYY'), TO_DATE('02/15/2010', 'MM/DD/YYYY'), 'Lot A');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('A', TO_DATE('02/18/2010', 'MM/DD/YYYY'), TO_DATE('02/28/2010', 'MM/DD/YYYY'), 'Lot C');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('A', TO_DATE('03/01/2010', 'MM/DD/YYYY'), TO_DATE('03/31/2010', 'MM/DD/YYYY'), 'Lot D');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('B', TO_DATE('08/01/2010', 'MM/DD/YYYY'), TO_DATE('08/31/2010', 'MM/DD/YYYY'), 'Lot E');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('B', TO_DATE('09/15/2010', 'MM/DD/YYYY'), TO_DATE('09/30/2010', 'MM/DD/YYYY'), 'Lot E');

INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)
VALUES('C', TO_DATE('09/15/2010', 'MM/DD/YYYY'), TO_DATE('09/30/2010', 'MM/DD/YYYY'), 'Lot E');

INSERT INTO TEST_B(ID, START_DATE, END_DATE)
VALUES('A', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY'));

INSERT INTO TEST_B(ID, START_DATE, END_DATE)
VALUES('B', TO_DATE('08/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY'));

INSERT INTO TEST_B(ID, START_DATE, END_DATE)
VALUES('C', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY')); 
```

从数据中，我需要按作业对 TEST_A 中的这些记录进行分组，并填补其间缺失的天数。每个 ID 的记录还应涵盖表 TEST_B 中提供的整个开始和结束日期。为了进一步解释，我需要的结果数据如下所示：

```
ID  START_DATE  END_DATE     ASSIGNMENT
A   01/01/2010  02/15/2010   Lot A
A   02/16/2010  02/17/2010   {NULL}
A   03/01/2010  03/31/2010   Lot D
A   04/01/2010  12/31/2099   {NULL}
B   08/01/2010  08/31/2010   Lot E
B   09/01/2010  09/14/2010   {NULL}
B   09/15/2010  09/30/2010   Lot E
B   10/01/2010  12/31/2099   {NULL}
C   01/01/2010  09/14/2010   {NULL}
C   09/15/2010  09/30/2010   Lot E
C   10/01/2010  12/31/2099   {NULL} 
```

感谢有关为此构建查询的任何帮助。想到了 LAG 函数，但我不确定如何正确注销它。谢谢。

另外：如果存储过程将提供处理此问题的灵活性，那么这仍然是一个可接受的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:03:22.500

流水线函数方法（我在这里添加了另一个 Lot A (id = A) 行只是为了显示结果）。

```
create type test_typ as object(id varchar2(5),
                               start_date date,
                               end_date date,
                               assignment varchar2(25)
                              );
/
create type test_tab as table of test_typ;
/

create or replace function test_pipe 
return test_tab pipelined is

begin

  for r_row in (select a.id, a.start_date, a.end_date, 
                       a.assignment, 
                       lead(a.start_date, 1) over (partition by a.id order by a.start_date) next_start_date,
                       lead(a.id, 1) over (order by  a.id, a.start_date) next_id,
                       lag(a.id, 1) over (order by  a.id, a.start_date) prior_id,
                       b.start_date min_start, b.end_date max_end
                  from (select id, min(start_date) start_date, max(end_date) end_date, assignment
                          from (select id, start_date, end_date, assignment, rn, max(rn) over (partition by id order by start_date) r
                                  from (select id, start_date, end_date, assignment, 
                                       case 
                                         when lag(end_date, 1) over (partition by id, assignment order by start_date) = start_date-1 
                                         then null 
                                         else row_number() over (order by start_date) 
                                       end rn
                                  from test_a)
                                 order by id, start_date)
                         group by id, assignment, r) a,
                       test_b b
                 where b.id = a.id
                 order by id, start_date)
  loop
     if ((r_row.prior_id != r_row.id or r_row.prior_id is null) and r_row.start_date > r_row.min_start)
     then
       pipe row(test_typ(r_row.id, r_row.min_start, r_row.start_date-1, null));
     end if;
     pipe row(test_typ(r_row.id, r_row.start_date, r_row.end_date, r_row.assignment));
     if (r_row.next_start_date != r_row.end_date + 1)
     then
       pipe row(test_typ(r_row.id, r_row.end_date + 1, r_row.next_start_date-1, null));
     elsif ((r_row.next_id != r_row.id or r_row.next_id is null) and r_row.end_date < r_row.max_end)
     then
       pipe row(test_typ(r_row.id, r_row.end_date + 1, r_row.max_end, null));
     end if;
  end loop;
end test_pipe; 
```

有数据：

```
SQL> select * from test_a order by 1, 2;

ID    START_DAT END_DATE  ASSIGNMENT
----- --------- --------- -------------------------
A     01-JAN-10 31-JAN-10 Lot A
A     01-FEB-10 15-FEB-10 Lot A
A     18-FEB-10 28-FEB-10 Lot C
A     01-MAR-10 31-MAR-10 Lot D
A     01-APR-10 30-MAY-10 Lot A
B     01-AUG-10 31-AUG-10 Lot E
B     15-SEP-10 30-SEP-10 Lot E
C     15-SEP-10 30-SEP-10 Lot E

SQL> select *
  2    from table(test_pipe()) b;

ID    START_DAT END_DATE  ASSIGNMENT
----- --------- --------- -------------------------
A     01-JAN-10 15-FEB-10 Lot A
A     16-FEB-10 17-FEB-10
A     18-FEB-10 28-FEB-10 Lot C
A     01-MAR-10 31-MAR-10 Lot D
A     01-APR-10 30-MAY-10 Lot A
A     31-MAY-10 31-DEC-99
B     01-AUG-10 31-AUG-10 Lot E
B     01-SEP-10 14-SEP-10
B     15-SEP-10 30-SEP-10 Lot E
B     01-OCT-10 31-DEC-99
C     01-JAN-10 14-SEP-10
C     15-SEP-10 30-SEP-10 Lot E
C     01-OCT-10 31-DEC-99

13 rows selected.

SQL> 
```

# mysql - MySQL 字符集和排序规则

> ID：13254896
> 
> 赞同：1
> 
> 时间：2012-11-06T16:06:27.510
> 
> 标签：mysql, database, character-encoding

好的，关于字符集/排序规则的快速问题。

如果我有一个数据库，其中 collat​​ion_database=latin1_swedish_ci 但所有表和列都是使用 utf8 创建的，它与 collat​​ion_database=utf8_general_ci 具有相同表/列的数据库不同吗？（我意识到除非指定，否则创建新表将使用 latin1）。

我是否认为 collat​​ion_database（和 character_set_database）只是默认值，它们可以在创建表时被覆盖？

干杯，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:10:34.210

是的，它们只是默认值。列是在 MySQL 中具有编码的东西。如果您没有为列指定编码，则应用下一个更高的默认值（表编码、数据库编码、服务器编码）。就这样。

# bluetooth - 蓝牙配对可以用作近距离身份验证机制吗？

> ID：13254898
> 
> 赞同：0
> 
> 时间：2012-11-06T16:06:33.947
> 
> 标签：bluetooth

是否可以使用蓝牙配对作为身份验证机制？例如汽车的无钥匙进入系统。从安全的角度来看，我正在评估将您的汽车与手机配对以打开车门是否可行。

是否存在任何可以破坏此类安全性的攻击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:21:26.977

在“蓝牙配对安全”上搜索，第二个结果是以下链接：[对蓝牙配对过程的攻击](http://www.schneier.com/blog/archives/2005/06/attack_on_the_b_1.html)。这是从 2005 年开始的。

> 有一个针对蓝牙的新加密结果。以色列特拉维夫大学的 Yaniv Shaked 和 Avishai Wool 已经想出了如何通过窃听配对过程来恢复 PIN。

还有更多，但结果是，如果你想使用配对，你会想要依赖于它上面的其他东西，而不是配对本身。

# tridion - 如何在 Tridion 2011 中获取 Tridion FieldType？

> ID：13254904
> 
> 赞同：6
> 
> 时间：2012-11-06T16:07:02.380
> 
> 标签：tridion, tridion-2011

是否可以在 Tridion 2011 TOM.NET 中获取字段类型？

ItemField 类有名称和定义，但我看不到旧的受信任 ItemType 属性。

我觉得我需要使用 Definition 属性，但不确定什么是最干净的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T16:51:26.033

您可以使用以下方式检查字段类型：

```
itemField is EmbeddedSchemaField

itemField is KeywordField 
```

和 Itemfield GetType 也提供相同的信息。

```
switch (itemField.GetType().Name)
{
case "EmbeddedSchemaField":
   fieldType = "EmbeddedSchema";
   break;
case "DateField":
   fieldType = "Date Field";
   break;
case "MultiLineTextField":
   fieldType = "RTF Text";
   break;
default:
    break;
} 
```

# active-directory - 当我将 Windows 机器加入 Active Directory 域时实际发生了什么

> ID：13254905
> 
> 赞同：3
> 
> 时间：2012-11-06T16:07:03.243
> 
> 标签：active-directory

我无法在任何地方找到此信息，而且我真的没有时间自己设置 AD 服务器来玩弄。我不是 AD 方面的专家，所以如果我的某些术语有问题，请原谅我。

当用户尝试将 Windows（我们会说 Windows 7）机器加入 AD 控制的域时，实际发生了什么？这意味着 AD 服务器检查哪些权限和帐户？从我能够搜集到的内容来看，似乎一个计算机对象必须以特定的计算机名称存在于 AD 中。然后看起来如果当前计算机在域中，并且用户正在尝试更改名称，那么旧计算机会从域中删除？（没有把握）。

我真的想弄清楚在加入域的过程中“加入域”会失败的地方。

就像这样：AD检查计算机名称是否存在，然后检查这些用户权限，然后检查这些属性等，直到“允许计算机加入具有指定名称的域”。

根据我在网上找到的“加入 AD 域的问题”线程的数量，我认为这对很多其他人会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:33:37.343

*假设这是一台新计算机，它没有映射到以前在域中的旧计算机名称...*

在非常高的级别：您在域加入操作中提供信用。在 AD 端，它会检查您要加入的计算机的计算机名称是否存在计算机帐户，在这种情况下它不存在。所以它继续创建一个新的（受为加入操作提供的凭据部分的权限和限制）。此时，计算机帐户和 DC 执行一些操作来设置关键属性（其中最重要的是秘密，也就是计算机帐户上的密码）和机器加入的本地状态被操纵......记住了 SID，存储的秘密等。在结束时，您会被告知重新启动。

如果前面的假设不正确并且一个压缩帐户已经存在，它会重用一个现有的计算机帐户，而不是创建一个新帐户。但它确保您可以向计算机帐户写入一个新的秘密，这是加入域所需的一部分（在 99% 的情况下，它映射到拥有该压缩帐户，因为很少有人重新访问他们的计算机帐户以允许这样做允许）。

无论如何，这就是高水平正在发生的事情。:) 如果您想深入了解它，请启用 netlogon 日志记录并加入，然后查看日志。如果您还想更深入，请查看 AD 协议文档，该文档将非常深入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T14:04:04.003

任何已加入域的系统的名为 NETSETUP.LOG（路径“%systemroot%\debug\NETSETUP.LOG”）的文件名中都提到了所有细节。

# c# - 如何创建匹配的 HMAC 值以在 .NET 中验证 Shopify WebHook？

> ID：13254907
> 
> 赞同：4
> 
> 时间：2012-11-06T16:07:08.733
> 
> 标签：c#, .net, shopify, hmac, sha256

我已经设置了一个端点来接收来自 Shopify 的 webhook 请求。

Shopify 发出的请求包括一个 HMAC 标头，该标头是从共享密钥和请求正文创建的。

我需要计算我服务器上的 HMAC 并将其与请求标头中的值相匹配，以确保请求是真实的。

我似乎无法在 .NET 中创建适当的机制来创建匹配的 HMAC 值。

我此时的算法如下：

```
public static string CreateHash(string data)
    {
        string sharedSecretKey = "MY_KEY";

        byte[] keyBytes = Encoding.UTF8.GetBytes(sharedSecretKey);
        byte[] dataBytes = Encoding.UTF8.GetBytes(data);

        //use the SHA256Managed Class to compute the hash
        System.Security.Cryptography.HMACSHA256 hmac = new HMACSHA256(keyBytes);
        byte[] hmacBytes = hmac.ComputeHash(dataBytes);

        //retun as base64 string. Compared with the signature passed in the header of the post request from Shopify. If they match, the call is verified.
        return System.Convert.ToBase64String(hmacBytes);
    } 
```

[可以在此处](http://wiki.shopify.com/Verifying_Webhooks)找到用于验证其 webhook 的 Shopify 文档，但仅包含 PHP 和 Ruby 示例。

谁能看到我可能做错了什么？我是否应该将整个 JSON 请求正文作为字符串传递到此方法中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-14T02:55:18.567

```
 private static bool Validate(string sharedSecretKey)
    {
        var data = GetStreamAsText(HttpContext.Current.Request.InputStream, HttpContext.Current.Request.ContentEncoding);
        var keyBytes = Encoding.UTF8.GetBytes(sharedSecretKey);
        var dataBytes = Encoding.UTF8.GetBytes(data);

        //use the SHA256Managed Class to compute the hash
        var hmac = new HMACSHA256(keyBytes);
        var hmacBytes = hmac.ComputeHash(dataBytes);

        //retun as base64 string. Compared with the signature passed in the header of the post request from Shopify. If they match, the call is verified.
        var hmacHeader = HttpContext.Current.Request.Headers["x-shopify-hmac-sha256"];
        var createSignature = Convert.ToBase64String(hmacBytes);
        return hmacHeader == createSignature;
    }

    private static string GetStreamAsText(Stream stream, Encoding encoding)
    {
        var bytesToGet = stream.Length;
        var input = new byte[bytesToGet];
        stream.Read(input, 0, (int)bytesToGet);
        stream.Seek(0, SeekOrigin.Begin); // reset stream so that normal ASP.NET processing can read data
        var text = encoding.GetString(input);
        return text;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:08:01.437

正如您在问题中提到的那样，您应该在您的方法中散列整个 json 请求正文。

我的 .NET 不太好，但下面是 ruby​​ 示例的一部分，它向您展示了该怎么做：

```
post '/' do

  . . .

  data = request.body.read
  verified = verify_webhook(data, env["HTTP_X_SHOPIFY_HMAC_SHA256"])

  . . .

end 
```

您可以看到我们只是获取请求的主体（作为字符串）并将其逐字逐句地投入到验证方法中。试一试，希望你有更多的运气。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-06T01:13:34.623

作为对上述代码的改进，您可以将其转换为属性，只需进行一些小改动：

```
public class VerifyShopifyAttribute : ActionFilterAttribute
{
    private readonly string sharedSecret = "abc";

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (!ValidateHash(actionContext))
        {
            // reject the request with a 400 error
            var response = actionContext.Request.CreateErrorResponse(HttpStatusCode.BadRequest, "Bad Request");
            actionContext.Response = response;
        }
    }

    private bool ValidateHash(HttpActionContext actionContext)
    {
        var context = (HttpContextBase)actionContext.Request.Properties["MS_HttpContext"];
        context.Request.InputStream.Seek(0, SeekOrigin.Begin);

        using (var stream = new MemoryStream())
        {
            context.Request.InputStream.CopyTo(stream);
            string requestBody = Encoding.UTF8.GetString(stream.ToArray());

            var keyBytes = Encoding.UTF8.GetBytes(sharedSecret);
            var dataBytes = Encoding.UTF8.GetBytes(requestBody);

            //use the SHA256Managed Class to compute the hash
            var hmac = new HMACSHA256(keyBytes);
            var hmacBytes = hmac.ComputeHash(dataBytes);

            //retun as base64 string. Compared with the signature passed in the header of the post request from Shopify. If they match, the call is verified.
            var hmacHeader = HttpContext.Current.Request.Headers["x-shopify-hmac-sha256"];
            var createSignature = Convert.ToBase64String(hmacBytes);
            return hmacHeader == createSignature;
        }
    }
} 
```

然后你可以像这样对所有的 webhook 使用它：

```
[RoutePrefix("api")]
public class ShopifyWebHookController : ApiController
{
    [VerifyShopify]
    [HttpPost]
    public IHttpActionResult HandleWebhook(...)
    {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-28T00:02:51.867

我在使用 .NET Core 3.1 上的 C# 的 Azure Functions 3.0 框架中遇到了这个问题。受上述答案和我自己的修补的启发，我能够使用以下代码完成此操作。

```
// replace the appsettings variable with however you get your pre-shared signature
// req is passed in after being injected through the Azure Functions framework
private static async Task<bool> ValidateShopifySignature(HttpRequest req, AppSettings appSettings)
        {
            var hmacHeader = req.Headers["X-Shopify-Hmac-Sha256"];

            var sharedSignatureBytes = Encoding.UTF8.GetBytes(appSettings.ShopifyWebhookSignature);
            using var hmac = new HMACSHA256(sharedSignatureBytes);

            //copy the request body to a memory stream then convert it to a byte[]
            using MemoryStream dataStream = new();
            await req.Body.CopyToAsync(dataStream);
            var dataBytes = dataStream.ToArray();

            //compute a hash of the body based on the signature 
            var generatedHmacHashBytes = hmac.ComputeHash(dataBytes);
            var generatedSignature = Convert.ToBase64String(generatedHmacHashBytes);

            //compare that signature to the one that Shopify generated and sent over
            return hmacHeader == generatedSignature;
        } 
```

# ruby-on-rails - Rails 3：为什么在用换行符重新填充 text_areas 时会出现缩进？

> ID：13254909
> 
> 赞同：2
> 
> 时间：2012-11-06T16:07:14.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, formatting, textarea, newline

我正在尝试编写一些包含`text_area`Rails 3.1.3 中标签的表单。通常，这些文本区域填充有多个段落（即它们包括换行符）。如果我保存文本并用 显示`simple_format`，段落显示正确，但如果我重新填充相同的表单进行编辑，格式似乎在每个换行符后添加一个缩进。因此，例如，如果我在表单的文本区域中输入以下内容：

```
Item 1
Item 2
Item 3 
```

然后我保存它，下次加载表单以编辑数据时，text_area 将填充以下内容：

```
Item 1
    Item 2
    Item 3 
```

有谁知道为什么会发生这种情况以及如何解决它？显示此内容的表单视图部分如下：

```
 <fieldset>
        <section class="field">
            <%= f.label "Títulos, seminarios, cursos" %>
            <%= f.text_area :titles_seminars_courses %>
        </section>
        ...
    </fieldset> 
```

保存到数据库时我没有做任何特别的事情（没有 gsub 或任何东西），只是直接保存`'Item 1\r\nItem 2\r\nItem 3\r\n'`字符串。我对这些数据的初始创建和编辑使用相同的表单。

提前感谢您对此问题的任何帮助。

编辑1：

正确显示数据的视图如下（但它不在 text_area 中）：

```
<section class="titles_seminars_courses">
    <%= simple_format(@academic_background.titles_seminars_courses, :class => "other_study") %>
</section> 
```

编辑2：

```
<textarea cols="40" id="academic_background_titles_seminars_courses" name="academic_background[titles_seminars_courses]" rows="20">Item 1
        Item 2
        Item 3</textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:29:26.540

好的，问题似乎是应用程序中的视图`html.haml`和`html.erb`视图之间的混合。所以要么`.erb`视图没有正确渲染，要么它们与其他`.haml`视图不兼容。例如，在 mi 情况下，应用程序布局视图是 haml，但表单是 erb。

不管是什么原因，最重要的是 text_area_tags 不能在 erb 中正确呈现，但在 haml 中却可以。所以我的解决方法，虽然我知道它很hacky而且不漂亮，但是在haml中做一个小部分，它只`_text_area.html.haml`呈现表单的textarea：

_text_area.html.haml：

```
-if defined? options
    = f.text_area field, options
-else
    = f.text_area field 
```

所以每次我想在表单中有一个 text_area 标记时，我都必须像这样调用渲染：

```
<%= form_for @instance do |f| %>
    ...
    <%= render :partial => 'common/text_area', :locals => {:f => f, :field => :some_field_from_instance, :options => {:cols => 40, :rows => 10}} %>
    <%= render :partial => 'common/text_area', :locals => {:f => f, :field => :some_other_field} %>
    ...
<% end %> 
```

这完美呈现。这就是为什么我认为问题在于haml及其对缩进的解释。如果有人有更好的解决方案，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T20:24:02.083

对于 HAML，如果您使用：

```
 ~ f.text_area 
```

代替：

```
= f.text_area 
```

它与保存的文本字符串中的空格具有相同的效果，`Haml::Template.options[:ugly] = true`并且会保留空格，而不是试图美化它。

[在此处](http://haml.info/docs/yardoc/file.REFERENCE.html#tilde)的文档中阅读更多信息

# wordpress - 我如何检测我是否在论坛页面上

> ID：13254914
> 
> 赞同：0
> 
> 时间：2012-11-06T16:07:37.923
> 
> 标签：wordpress, wordpress-theming, bbpress

我制作了一个 WordPress 主题，并设法检测是否安装了 bbpress，我想要一个正确的方法来查看我是否在论坛、主题列表或主题页面上。

据我了解，网址结构如下：

*   ?post_type=论坛
*   ?forum=test-2
*   ?topic=测试

对于不使用子表单等的非常基本的安装。我的问题是，我会使用 GET 和/或 POST 还是缺少一些内置的 wordpress 功能？

我试图做：

```
if('forum' == get_post_type() || 'topic' == get_post_type()){
    echo "I am here"; exit;
} 
```

但这没有用。所以....我想知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:13:41.723

不确定这是否仍然是一个问题，但这对我有用（WP3.x，bbPress 插件 2.x）；

```
$posttype=get_post_type(); 

if (($posttype=='forum')||($posttype=='topic')) 
  { echo "I am here"; } 
```

# jquery-mobile - jquery移动自定义按钮

> ID：13254919
> 
> 赞同：1
> 
> 时间：2012-11-06T16:07:50.890
> 
> 标签：jquery-mobile

我正在尝试使用 Jquery Mobile 1.2 创建一个自定义按钮。我的按钮显示，但使用现有的自定义圆角默认按钮。我需要按钮来显示这样的。 [http://i.imgur.com/RFeeQ.png](http://i.imgur.com/RFeeQ.png)

[http://i.imgur.com/MaQ2h.png](http://i.imgur.com/MaQ2h.png)

```
#homepage .my-button {
background-image: url('../images/icons/btn_panel.png') !important;
width:307px;
height:50px;
padding-top:0px auto;
}

#homepage  .ui-icon-about-icon {
border-radius:0px;
background-image: url('../images/icons/about_up.png');
background-color: rgba(0, 0, 0, 0);
width:36px;
height: 36px;
}

<div data-role="content" class="content">   
     <a href="about.html" data-transition="fade" data-role="button" data-icon="about-icon" data-iconshadow="false" class="my-button">About</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:48:44.567

这是一个好的开始，继续操作 CSS...我调整了高度，因为填充，但可以自由地在自己周围玩耍...

```
 <style>
  #homepage .my-button {
    background-image: url("btn_panel.png");
    width:307px;
    height:75px;
    padding-top:0px auto;
  }

  #homepage .my-button .ui-btn-inner {
    padding-top: 25px;
  }

  #homepage .my-button .ui-btn-text {
    left: -80px;
  }

  .ui-icon-about-icon {
    border-radius:0px;
    background-image: url("logo36.png");
    background-color: rgba(0, 0, 0, 0);
    width:36px;
    height:36px;
  }
 </style> 
```

要删除圆角，只需使用`data-corners="false"`：

```
 <a href="about.html" data-transition="fade" data-role="button" data-icon="about-icon" data-iconshadow="false" data-corners="false" class="my-button">About</a> 
```

我玩了一下，得出了这个结果（我没有你的图像，但使用了另一个......） ![截屏](../Images/c4c8548743dc48c43c08f37448b57cef.png)

您还可以使用[主题滚轮](http://jquerymobile.com/themeroller/index.php)来自定义您的 CSS...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:04:56.043

我会查看按钮的文档：

*   [http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-options.html)

现场示例：

*   [http://jsfiddle.net/Pjvvx/](http://jsfiddle.net/Pjvvx/)（宽度）
*   [http://jsfiddle.net/3DSGT/](http://jsfiddle.net/3DSGT/)（高度）

JS：

```
// For all buttons use something like this
$('.ui-btn').css('width','50%');

// For individual buttons use something like this
$('#theButton1').parent().css('width', '75%');

// Or this for HREF data-role buttons
$('#hrefButton4').css('width', '45%'); 
```

我想这就是你要找的

```
// this changes the height for all buttons
$('.ui-btn-text').css('font-size','50px');

// This changes the height for a single element 
$('#hrefButton3').children().children().css('font-size','30px'); 
```

HTML：

```
<div data-role="page" id="home"> 
    <div data-role="content">
        <input type="button" id="theButton1" value="Press Me 1" />
        <input type="button" id="theButton2" value="Press Me 2" />
        <input type="button" id="theButton3" value="Press Me 3" />
        <input type="button" id="theButton4" value="Press Me 4" />
        <br />
        <a href="#" data-role="button" id="hrefButton1">HREF Me 1</a>
        <a href="#" data-role="button" id="hrefButton2">HREF Me 2</a>
        <a href="#" data-role="button" id="hrefButton3">HREF Me 3</a>
        <a href="#" data-role="button" id="hrefButton4">HREF Me 4</a>
    </div>
</div> 
```

有关的：

*   [通过 CSS 调整按钮的大小](https://stackoverflow.com/questions/7303035/resizing-a-button-through-css)

# iphone - 在Xcode中单击按钮后限制滚动视图范围

> ID：13254924
> 
> 赞同：0
> 
> 时间：2012-11-06T16:08:04.000
> 
> 标签：iphone, objective-c, ios, xcode

我有一个带有信息块的滚动视图。我正在寻找的功能的一个例子是。.. 按钮 A 按钮 B 按钮 C ScrollView - 高度为 3000，宽度为 320（iOS 中的纵向布局）

按钮 A 我设置 cgPointMake [scrollViewSettings setContentOffset:CGPointMake(0,0)];

按钮 B 我设置 cgPointMake [scrollViewSettings setContentOffset:CGPointMake(0,1000)];

按钮 C 我设置 cgPointMake [scrollViewSettings setContentOffset:CGPointMake(0,2000)];

关于设置滚动限制或滚动范围，我没有任何超出此范围的代码。我需要的是

按钮 A 具有从 y=0 到 y=1000 的滚动高度范围，因此用户无法滚动查看按钮 B 或 C 将带它们的数据。

按钮 B 具有从 y=1000 到 y=2000 的滚动高度范围，因此用户无法向上或向下滚动以查看按钮 A 或 C 将带它们的数据。

按钮 C 具有从 y=1000 到 y=2000 的滚动高度范围，因此用户无法向上滚动以查看按钮 A 或 B 将带它们的数据。

我希望这是有道理的。

先感谢您。

这是我用于每个滚动视图的代码

```
scrollViewMain.frame = CGRectMake(0, 54, 320,426); /*set the viewable frame of the scroll view*/
[scrollViewMain setContentSize:CGSizeMake(320,1708)]; /*set the content size of the scroll view*/

scrollViewSettings.frame = CGRectMake(0, 0, 320,426); /*set the viewable frame of the scroll view*/
[scrollViewSettings setContentSize:CGSizeMake(320,650)]; /*set the content size of the scroll view*/

scrollViewBMI.frame = CGRectMake(0, 426, 320,426); /*set the viewable frame of the scroll view*/
[scrollViewBMI setContentSize:CGSizeMake(320,570)]; /*set the content size of the scroll view*/

scrollViewBFC.frame = CGRectMake(0, 1278, 320,426); /*set the viewable frame of the scroll view*/
[scrollViewBFC setContentSize:CGSizeMake(320,568)]; /*set the content size of the scroll view*/

ViewBMR.frame = CGRectMake(0, 852, 320,426); /*set the viewable frame of the view*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:32:50.077

你为什么不使用 3 个不同的 UIView 并在滚动视图中显示你想要的视图。

前任 ：

创建包含与您的范围（0 到 1000）相同的 UI 的第一个视图创建包含与第二个范围（1000 到 2000）相同的 UI 的第二个视图等...

并在按下按钮 A 或 B 或 C 时添加您需要的视图（删除前一个视图）。

希望它会帮助你。

# stumbleupon - 使用单个 URL 创建 Stumbleupon 按钮

> ID：13254926
> 
> 赞同：2
> 
> 时间：2012-11-06T16:08:25.490
> 
> 标签：stumbleupon

我希望能够在我的所有网站页面上都有 stumbleupon 按钮，但总是让它“绊倒”我的主页。如何将此功能添加到按钮？

**这是 Stumbleupon 给我的：**

< !-- 将此标签放置在您希望 su 徽章呈现的位置 -->

```
< su:badge layout="5" >< /su:badge > 
```

< !-- 将此代码段放在适当的位置 -->

```
< script type="text/javascript"><br>
  (function() {
    var li = document.createElement('script'); li.type = 'text/javascript'; li.async = true;
    li.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + '//platform.stumbleupon.com/1/widgets.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(li, s);
  })();
< /script> 
```

这是我的网站[fairivy.com](http://www.fairivy.com)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:09:55.160

在您希望徽章显示的位置，编辑以下代码：

```
 <su:badge layout="5"></su:badge> 
```

对此：

```
 <su:badge layout="5" location="http://www.fairivy.com/"></su:badge> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:17:52.253

您可能需要自定义 stumblupon 提供的 js 脚本，尝试在 JS 中更改此行，并将其托管在您自己的网站上：

```
if(this.type=='follow')
return scheme+'www.'+ this.domain+ followBase+'?id='+ this.ref+'&l='+ this.layout;else if(this.type=='bestof')
return scheme+'www.'+ this.domain+ bestofBase+'?'+ this.request.join('&')+'&l='+ this.layout+'&title='+ encodeURIComponent(this.title); 
```

如果您使用此解决方案，您可能必须仅使用您的主域制作一个单独的 .js。

您还需要将此行更改为您的自定义位置：

```
'//platform.stumbleupon.com/1/widgets.js' 
```

# sublimetext2 - Sublime Text 2 ctrl+d 并不总是选择下一个匹配的字符串

> ID：13254928
> 
> 赞同：4
> 
> 时间：2012-11-06T16:08:40.487
> 
> 标签：sublimetext2

> **可能重复：**
> [如何选择具有相同名称的变量（不是文本）？](https://stackoverflow.com/questions/13184437/how-to-select-variables-not-text-with-the-same-name)

```
$project_id = $this->user_model->get_project_id();
$project_id = 'yo'; 
```

如果我双击 的第一个实例`project_id`，它将突出显示它，然后按 ctrl+d 将`project_id`在`get_project_id`ctrl+d 内部再次选择将`project_id`在第 2 行选择。

或者，如果我将光标放在第一个上`project_id`，然后按 ctrl+d，它会为我选择它。但是，我第二次按 ctrl+d 时，它会跳过`get_project_id`并转到第 2 行。

我希望有人可以遵循这一点。这是一个错误，还是一个功能？我为什么要它这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T17:20:16.693

我不认为这是一个错误。

如果您选择一个字符串，`CTRL`+`D`将搜索该字符串的每次出现，即使它是另一个字符串的一部分。

如果您将光标放在一个字符串上，`CTRL`+`D`将查找该字符串的确切出现。

我发现这很有用，即使它是一个错误。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:16:17.783

[这种行为是一个错误](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8573)。你可以在 Sublime Text 的[UserEcho 论坛](http://sublimetext.userecho.com/)上报告它。

# c# - 我可以有一个 DataGridView 单元格，我可以在其中键入或从下拉列表中选择吗？

> ID：13254929
> 
> 赞同：3
> 
> 时间：2012-11-06T16:08:40.440
> 
> 标签：c#, winforms, datagridview

这是我第一次使用 DataGridView，它有点不知所措（这么多选择！）。

我想显示一个属性列表，每行一个。每行都是一个名称/值对。属性的名称是固定的，但用户可以自由输入任何值。

现在，由于每个属性都有一个**已使用值的列表**，我希望用户可以在**下拉列表**中使用这些值。但是，我还希望用户能够**键入新值**。理想情况下，该值应在用户键入时自动完成。

我尝试使用 DataGridViewComboBoxColumn 样式的列，并且由于标准组合框支持类型或编辑的工作方式，我认为这会起作用。但是，它似乎*只*允许从列表中选择（另外，按下一个键将自动从列表中选择第一个匹配的条目）。似乎没有办法输入新值。

我应该设置 844 个属性中的哪一个？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:15:34.070

您必须更改组合框 DropDownStyle 以允许用户在组合框处于编辑模式时输入文本，但标准 DataGridView 在设计时不允许此行为，因此您必须采取一些技巧，处理 CellValidating、EditingControlShowing 和 CellValidated事件。

这是代码（来自 MSDN 论坛，对我有用）。

```
 private Object newCellValue;
         private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
         {
             if (dataGridView1.CurrentCell.IsInEditMode)
             {
                 if (dataGridView1.CurrentCell.GetType() ==
                 typeof(DataGridViewComboBoxCell))
                 {
                     DataGridViewComboBoxCell cell =
                     (DataGridViewComboBoxCell)dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex];

                     if (!cell.Items.Contains(e.FormattedValue))
                     {
                         cell.Items.Add(e.FormattedValue);

                         cell.Value = e.FormattedValue;

                         //keep the new value in the member variable newCellValue
                         newCellValue = e.FormattedValue;
                     }
                 }
             }
         }

         private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
         {
             if (e.Control.GetType() ==
typeof(DataGridViewComboBoxEditingControl))
             {
                 ((ComboBox)e.Control).DropDownStyle = ComboBoxStyle.DropDown;
             }
         }

         private void dataGridView1_CellValidated(object sender, DataGridViewCellEventArgs e)
         {
             if (dataGridView1.CurrentCell.GetType() ==
                 typeof(DataGridViewComboBoxCell))
             {
                 DataGridViewCell cell =
                 dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex];
                 cell.Value = newCellValue;
             }
         } 
```

# dojo - 数据文本框中的 DOJO 日历小部件

> ID：13254933
> 
> 赞同：1
> 
> 时间：2012-11-06T16:09:21.500
> 
> 标签：dojo, calendar

我想使用 Dojo 日期文本框选择 40 年前的日期，但是在 Dojo 中使用日期文本框的日历小部件，很难逐月导航，而且要花很多时间才能到达 40 年前日期 。

如果我们可以有一个不弹出日历小部件的日期文本框，请建议我，因此用户可以直接在文本框中键入他想要的任何日期。

谢谢，普拉塔普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:16:52.917

可以通过设置`popupClass`属性覆盖弹出窗口小部件。空字符串应该只产生文本。无论有没有弹出窗口小部件，用户都应该能够直接将文本修改到 dijit/form/DateTextBox 中，并且会在用户键入时自动进行验证。

诚然，dijit/Calendar 小部件在选择遥远的年份时优化不佳。另请注意，您可以通过单击日历底部的上一年/下一年从一年切换到下一年。

# php - 尽管有 mysql 条目，但 iOS 中的 NSArray 为空

> ID：13254934
> 
> 赞同：3
> 
> 时间：2012-11-06T16:09:26.103
> 
> 标签：php, ios, xml, nsarray

我一直在尝试用 php 脚本的 xml 输出填充 Xcode 中的数组，以便 ios 可以连接到 mysql。但是，尽管 mysql 中有信息，但我的数组仍然是一个空值。这一定意味着我的属性部分或我对 xml 的解析是错误的，但我真的不知道实际上是什么错误（并且没有多少星标似乎有帮助）。我没有从 php 或 xcode 中得到任何错误。有任何想法吗？

**编辑：我遵循了以下建议，但我仍然得到一个空值，尽管我相信它来自我的 php ......**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    char *cStr = "YES";
    NSString *str3 = [NSString stringWithUTF8String:cStr];

    NSString *urlString = [NSString stringWithFormat:@"(censored)", _login];

    NSXMLParser *Parser = [[[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]] autorelease];
    [Parser setDelegate:self];
    [Parser parse];

NSDictionary *itemAtIndex =(NSDictionary *)[oneam objectAtIndex:0];
  oneam = [[NSMutableArray alloc] init];   
    if (([[itemAtIndex objectForKey:@"its"]isEqualToString:str3 ])) {
            [switch1 setOn:YES animated:YES];
    }
    else {
            [switch1 setOn:NO animated:YES];
    }

}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ( [elementName isEqualToString:@"location"]) {
        [oneam addObject:[[NSDictionary alloc] initWithDictionary:attributeDict]];
    NSLog(@"The array is %@", oneam);
    }
} 
```

这是我的php ...

```
<?php

$login = "hello";
$dbh = new PDO('(censored)');
$sql = "SELECT oneam FROM login WHERE username = '$login'";

$q = $dbh->prepare( $sql );

$doc = new DOMDocument();
$r = $doc->createElement( "oneam" );
$doc->appendChild( $r );
foreach ( $q->fetchAll() as $row) {
    $e = $doc->createElement( "location" );

    $e->setAttribute( 'its', $row['oneam']);

    $r->appendChild( $e );

}
print $doc->saveXML();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:59:32.903

> 那么我应该在哪里放置“oneam = [[NSMutableArray alloc] init];”。我放置的所有地方似乎都声明它为空或为空......

每当我使用任何类型的数组时，我总是使用延迟初始化，所以如果它为 null，它会在 getter 方法中初始化，如下所示：

```
-(NSMutableArray *)oneam
{
    if (!_oneam){
        _oneam = [[NSMutableArray alloc] init];
    }

    return _oneam;
} 
```

当我@synthesize 时，我确保它的定义如下：

```
@synthesize oneam = _oneam; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:47:52.170

我不知道您是否可能在其他地方有它们，但是您缺少我在进行 .xml 解析时一直使用的两种方法：foundCharacters 和 didEndElement。我按照[这个教程集](http://www.youtube.com/watch?v=2tUxV_66Q4U&feature=related)（所有 3 个视频 - 大约 40 分钟），在几个不同的实例上使用它之后，它真的帮助我理解了如何使用 NSXMLParsers。也许尝试遵循他的方法，看看是否可以为您解决问题。

# batch-file - 批处理文件比较目录中的相似文件名，然后复制最后修改的文件并保存到其他目录

> ID：13254935
> 
> 赞同：0
> 
> 时间：2012-11-06T16:09:26.683
> 
> 标签：batch-file, compare, filenames, last-modified, save-as

我有一个批处理文件，它将检查目录中的更新，然后将任何新文件或最近修改的文件复制到另一个选定的目录，但是我不确定如何检查源目录中只有一个修订号的两个文件或字母区别：example.pdf 和 exampleA.pdf。我需要通过字符串和修改日期以某种方式比较文件。因此，如果源目录有一个保存为 exampleB.pdf 的新文件，我需要批处理将该文件作为 example.pdf 而不是新文件名复制到目标目录中。如果您愿意，我希望复制的文件具有核心文件名，只是 example.pdf

任何帮助将非常感激。

谢谢

```
 @Echo Off
:: variables
set drive=G:\Backup
set backupcmd=xcopy /s /c /d /e /h /i /r /y

set revchk=if 

Set _Delay=10
Set _Monitor=C:\Users\me\Desktop\Test Source Folder
Set _Base=%temp%\BaselineState.dir
Set _Chck=%temp%\ChkState.dir
Set _OS=6
Ver|Findstr /I /C:"Version 5">Nul
If %Errorlevel%==0 Set _OS=5 & Set /A _Delay=_Delay*1000
:_StartMon
Call :_SetBaseline "%_Base%" "%_Monitor%"
:_MonLoop
If %_OS%==5 (Ping 1.0.0.0 -n 1 -w %_Delay%>Nul) Else Timeout %_Delay%>Nul
Call :_SetBaseline "%_Chck%" "%_Monitor%"
FC /A /L "%_Base%" "%_Chck%">Nul
If %ErrorLevel%==0 Goto _MonLoop

echo ### Backing up...
%backupcmd% "C:\Users\me\Desktop\Test Source Folder" "C:\Users\me\Desktop\Test Destination Folder"

echo ### Checking for new file revisions...

Echo.Backup Complete!
Goto :_StartMon
:::::::::::::::::::::::::::::::::::::::::::::::::::
:: Subroutine
:::::::::::::::::::::::::::::::::::::::::::::::::::
:_SetBaseline
If Exist "%temp%\tempfmstate.dir" Del "%temp%\tempfmstate.dir"
For /F "Tokens=* Delims=" %%I In ('Dir /S "%~2"') Do (
Set _Last=%%I
>>"%temp%\tempfmstate.dir" Echo.%%I
)
>"%~1" Findstr /V /C:"%_Last%" "%temp%\tempfmstate.dir"
Goto :EOF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:51:04.977

下面的批处理程序假定较新的文件具有按字母升序排列的修订号或字母，因此最后列出的文件是最新的。这样，程序会识别一组以相同名称开头的文件，并使用该组中第一个文件的名称复制该组中的最后一个文件。

```
@echo off
setlocal EnableDelayedExpansion
set baseName=
for %%a in (*.*) do (
   if not defined baseName (
      rem Is first name of first set
      set baseName=%%~Na
      set baseExt=%%~Xa
      set lastName=%%~Na
   ) else (
      rem Check if this name begin with same baseName
      set name=%%~Na
      for %%b in (!baseName!) do set name=!name:*%%b=!
      if "!name!" neq "%%~Na" (
         rem Yes: Is next name of same set
         set lastName=%%~Na
      ) else (
         rem No: Is first name of next set: copy previous set and pass to next one
         ECHO copy "!lastName!!baseExt!" "C:\dest\dir\!baseName!!baseExt!"
         set baseName=%%~Na
         set baseExt=%%~Xa
         set lastName=%%~Na
      )
   )      
)
rem Copy last set
ECHO copy "!lastName!!baseExt!" "C:\dest\dir\!baseName!!baseExt!" 
```

测试程序并删除 ECHO 命令，如果它按您的意愿工作。

# magento - Magento 发送订单方法

> ID：13254937
> 
> 赞同：1
> 
> 时间：2012-11-06T16:09:28.707
> 
> 标签：magento, sendmail

我一直在寻找几个小时来找到在付款后将订单发送给客户的正确方法。我找到了这个文件：/app/code/_core/Mage/Sales/Model/order.php 其中包含方法

```
/**
 * Send email with order data
 *
 * @return Mage_Sales_Model_Order
 */
public function sendNewOrderEmail() 
```

当我完全删除这个类时，订单仍然被发送。（嗯？）是的，我清除了我的缓存！

什么是正确的 sendMail 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:17:36.947

要将订单电子邮件发送给客户，您可以这样做

```
$_order = Mage::getModel('sales/order')->load($order_id);
$_order->sendNewOrderEmail(); 
```

sendNewOrderEmail() 在 /app/code/core/Mage/Sales/Model/Order.php 中定义（假设没有修改它的自定义模块）

# asp.net - Web.config - 用于设置的多个值

> ID：13254940
> 
> 赞同：1
> 
> 时间：2012-11-06T16:09:34.177
> 
> 标签：asp.net, web-config

下面给出的是现有 asp.net Web 服务程序的 web.config 文件（.asmx 文件）

以下代码将 TEST 的值设置为 EEE。

```
 <setting name="TEST" serializeAs="String">
       <value>EEEE</value>
      </setting> 
```

这是从代码中使用的

TESTIntegrationWS.Properties.Settings.Default.TEST

**如何为名称“TEST”设置多个值并从代码中访问它？**

**Web.config 文件**

```
<?xml version="1.0" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0,             Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="TESTIntegrationWS.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            requirePermission="false" />
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <TESTIntegrationWS.Properties.Settings>
            <setting name="TEST" serializeAs="String">
                <value>EEEE</value>
            </setting>
            <system.web>
                <compilation debug="true" targetFramework="4.0" />
            </system.web>
        </TESTIntegrationWS.Properties.Settings>
    </applicationSettings>
    <system.web>
        <compilation debug="true" />
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:15:23.120

如果您想为 TEST 分配多个值，那么您可以使用一些在值中不需要的分隔符可能是逗号或分号，并且在代码中您可以使用 split 来获取值数组。

# visual-c++ - 将 char buf[] 传递给函数参数 unsigned char * value

> ID：13254941
> 
> 赞同：1
> 
> 时间：2012-11-06T16:09:38.160
> 
> 标签：visual-c++

我有功能：

```
string f1 (unsigned char * value, int len)
{
...
} 
```

我想传递给它的变量是

```
char buf[4096]; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:09:43.047

您可以将缓冲区的声明更改为预期的类型吗？如果是这样，我会推荐：

```
const unsigned int BUFFER_SIZE = 4096;
unsigned char buf[BUFFER_SIZE];
string result = f1(buf, BUFFER_SIZE); 
```

如果您无法控制该变量，您可能会这样做

```
string result = f1(reinterpret_cast<unsigned char*>(buf), sizeof(buf)/sizeof(buf[0])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:16:06.587

我猜`len`是指缓冲区中的元素数量（最好在 的文档中查找`f1`）。您可以通过以下方式获得：

```
sizeof(buf) // as `sizeof(char)==1`
// or
sizeof(buf)/sizeof(buf[0])  // more commonly used, works with all types 
```

这在这里作为`sizeof(char) == sizeof(unsigned char) == 1`.

另一点是你不能打电话

```
f1(buf, len); 
```

即使“`buf`数组*到 4096 个字符”*可以隐式转换为*“指向字符*的指针”：如果没有`/J`编译选项，Visual-C++ 的`char`默认[签名是](http://msdn.microsoft.com/en-us/library/cc953fe1%28v=VS.71%29.aspx)-> `signed char`。对于 A 和 B 两种类型，只有当 B 是 A 的基类（§4.10 conv.ptr）时，C++ 才会执行从“指向 A 的指针”到“指向 B 的指针”的转换。`unsigned char`由于and不是这种情况`signed char`，因此转换不是隐式的（不在标准转换序列中，§4 conv）。

但是，您可以使用 a 显式转换它`reinterpret_cast`：

```
signed char as[4096];
int const len = sizeof(as)/sizeof(as[0]);
unsigned char* pu = reinterpret_cast < unsigned char* > (as);
f1(pu, len); 
```

**这是传递数组的最佳方式吗？** 有一个微妙之处：如果该函数明确专门用于`unsigned char`，它可能会“误解”传递的`signed char`缓冲区的内容。此外，如果`f1`更改数组，解释`signed char`缓冲区的人可能会与所做的事情发生冲突`f1`（如`f1`在 的数组上工作的那样`unsigned char`）。但是，如果您知道`f1`缓冲区的作用和解释方式，则可以进行此转换。

**重点是什么？为什么`static_cast`这里不允许隐含或允许？**`signed`指针和类型 之间的转换可能存在特殊情况`unsigned`（具有相同的对象表示），但我没有找到。基本上，一个人想避免像这样的演员：

```
short s = 42;
long* pl = &s;
*pl = 4000; // possibly stack corruption

long l = 4200;
short* ps = &l;
*ps = 42;
//- value of l dependent e.g. on endianess 
```

* * *

**背景/标准** 我对它的`reinterpret_cast`实际作用有点（或更多）好奇，所以这里的其余部分是关于标准所说的细节。实际上，`reinterpret_cast`解析为（§5.2.10/7 expr.reinterpret.cast）：

```
unsigned char* pu = static_cast < unsigned char* > ( static_cast < void* > (as) ); 
```

让我们详细介绍一下。

Inner `static_cast < void* > (as)`: `static_cast`允许进行“数组到指针”转换（§5.2.9/8 expr.static.cast）和标准转换序列（§5.2.9/4，比较§4/3 conv）。标准转换序列允许从*"pointer to A"*到*"pointer to void"*的转换。它保证指向操作数的内存位置的开始。这很好，因为数组由一组连续分配的元素组成（§8.3.4 dcl.array）。

外部`static_cast < unsigned char* >`：这是标准转换的逆 - 即，*“指向无符号字符的指针”*到*“指向 void 的指针”*（§5.2.9/7 + 13）。*当我们从"pointer to signed char"*通过*"pointer to void"*转换为*"pointer to unsigned char"*时，没有定义结果是什么（未指定）。注意`char`和`unsigned char`是不同的类型（§3.9.1/1 basic.fundamental）。但是在任何健全的机器/实现上都应该没问题，`signed char`并且`unsigned char`具有相同的对象表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:07:19.567

令人惊讶的是`f1((unsigned char*)buf, len);`会成功的。

# c# - 此代码立即将文本框更改为红色。我想要它，点击按钮然后是红色，然后是绿色

> ID：13254942
> 
> 赞同：3
> 
> 时间：2012-11-06T16:09:39.550
> 
> 标签：c#, button, if-statement

此代码立即将文本框更改为红色。我想要它，单击按钮然后是红色，然后是绿色。

```
private void button1_Click(object sender, EventArgs e)
{

    textBox1.BackColor = System.Drawing.Color.Black;

    if (textBox1.BackColor.Equals(System.Drawing.Color.Black)) 
    {
        textBox1.BackColor = System.Drawing.Color.Red;
    }

    if (textBox1.BackColor.Equals(System.Drawing.Color.Red))
    {
        textBox1.BackColor = System.Drawing.Color.Green;
    }

    if (textBox1.BackColor.Equals(System.Drawing.Color.Green))
    {
        textBox1.BackColor = System.Drawing.Color.Blue;
    }

    if (textBox1.BackColor.Equals(System.Drawing.Color.Blue))
    {
        textBox1.BackColor = System.Drawing.Color.Red;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T16:11:19.703

一开始您总是将颜色设置为黑色。

最终的逻辑是：

```
Set the color to black.

Is it black? Yes - change to red.
Is it red? Yes - change to green.
Is it green? Yes - change to blue.
Is it blue? Yes - change to red. 
```

不要那样做。

将初始设置移至类构造函数，并在设置颜色（或使用`if/elseif/else`构造）后立即从函数返回。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T16:12:23.380

您想使用`else if`：

```
if (textBox1.BackColor.Equals(System.Drawing.Color.Black)) 
{
    textBox1.BackColor = System.Drawing.Color.Red;
} 
else if (textBox1.BackColor.Equals(System.Drawing.Color.Red))
{
    textBox1.BackColor = System.Drawing.Color.Green;
} 
else if (textBox1.BackColor.Equals(System.Drawing.Color.Green))
{
    textBox1.BackColor = System.Drawing.Color.Blue;
} 
else if (textBox1.BackColor.Equals(System.Drawing.Color.Blue))
{
    textBox1.BackColor = System.Drawing.Color.Red;
} 
```

您所做的是将其更改为`red`，然后检查是否是`red`并将其更改为`green`. 通过使用`else if`，您将不会执行`if red`if it is `black`。

此外，正如蒂姆在评论中指出的那样，如果每次点击都需要删除该行`textBox1.BackColor = System.Drawing.Color.Black`以停止。在表单的构造函数中将`black`其设置为。`black`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T16:11:48.310

您在第一行将 BackColor 设置为黑色，因此您总是会遇到第一个案例，它会变为红色。

如果你愿意的话，一个 switch 语句可能会让你的代码看起来更好看……

```
private void button1_Click(object sender, EventArgs e)
{
        switch (textBox1.BackColor.ToKnownColor())
        {
            case KnownColor.Red:
                textBox1.BackColor = Color.Green;
                break;
            case KnownColor.Green:
                textBox1.BackColor = Color.Blue;
                break;
            default:
                textBox1.BackColor = Color.Red;
                break;
        }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:13:48.367

您可以创建一个`Queue<Color>`来确定`Color`下一个，并在单击按钮时始终切换它。

```
private Queue<Color> colors = new Queue<Color>();
public Form1()
{
    InitializeComponent();

    //Here you set the order that the colors will be set in.
    colors.Enqueue(System.Drawing.Color.Black);
    colors.Enqueue(System.Drawing.Color.Red);
    colors.Enqueue(System.Drawing.Color.Gray);
    colors.Enqueue(System.Drawing.Color.Blue);
}

private void button1_Click(object sender, EventArgs e)
{
    textbox1.BackColor = colors.Peek();

    //move the color at the front to the back of the queue
    colors.Enqueue(colors.Dequeue());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T21:06:05.177

这是开玩笑的。我测试了这段代码，它可以工作，任何时候都没有推荐给任何人，这只是愚蠢的，因为我们还没有 LINQ 答案，如果需要，我会删除它，但是，这是一个使用内联的示例如果在 LINQ 语句中查找您正在寻找的颜色。我有没有提到这个作品？

```
 textBox1.BackColor = Color.FromKnownColor(((KnownColor[])Enum.GetValues(typeof(KnownColor)))
            .Where(c => c + (textBox1.BackColor == Color.Red ?
                (int)KnownColor.DarkSlateBlue : textBox1.BackColor == Color.Green ?
                (int)KnownColor.Chartreuse : (int)textBox1.BackColor.ToKnownColor() - (int)KnownColor.Red)
                == textBox1.BackColor.ToKnownColor())
                .FirstOrDefault()); 
```

# php - Ajax 数组到 PHP 等于 null

> ID：13254947
> 
> 赞同：0
> 
> 时间：2012-11-06T16:09:58.923
> 
> 标签：php, javascript, jquery, ajax

我有这个 ajax 表单，最后我有一个数组中的值。代码在下面..但我在这些项目的 php 响应中一直为空。我想我做这个 .ajax 调用是错误的，任何想法都会有很大帮助。我也不知道在 .ajax 调用的成功部分写什么。那是我想念的吗？请看下面：

```
$('#submit_third').click(function(){
    //update progress bar
    $('#progress_text').html('100% Complete');
    $('#progress').css('width','339px');
    //prepare the fourth step

   var fields = new Array(
        $('#usernameReg').val(),
        $('#passwordReg').val(),
        $('#email').val(),
        $('#firstname').val(), 
        $('#lastname').val(),
        $('#city').val(),
        $('#phone').val(),
        categoryResult,
        $("#msg").val()                     
    );

    var tr = $('#fourth_step tr');
    tr.each(function(){
        //alert( fields[$(this).index()] )
        $(this).children('td:nth-child(2)').html(fields[$(this).index()]);
    });

    //slide steps
    $('#third_step').fadeOut(1000);
    $('#fourth_step').delay(1000).fadeIn(1000);          

    $('#submit_fourth').click(function(){
        //send information to server
        console.log(fields);
       $.ajax({
            type: "POST",
            data: 'fields',
            dataType: 'json',
            url: "php/postEngine.php",
            success: function(html){

            }
        });

    });     
}); 
```

php 信息（我正在使用蓬勃发展：

```
include_once($_SERVER['DOCUMENT_ROOT'] . '/../inc/init.php');
include_once($_SERVER['DOCUMENT_ROOT'] . '/dev/form_data.php');
include_once($_SERVER['DOCUMENT_ROOT'] . '/dev/db_handling.php');
ini_set('display_errors', 'On');
try {

    $tbl_user   =   'tbl_users';

    $statement = $db->prepare("INSERT INTO $tbl_user 
        (username,
        email,
        firstname,
        lastname,
        city,
        phone)
        VALUES 
        (%s,
        %s,
        %s,
        %s,
        %s,
        %s
        )"
    );

    $db->query($statement,
        $un,
        $email,
        $firstname,
        $lastname,
        $city,
        $phone
        );

    //  Update of Email_Replied to 1

    //$db->execute("UPDATE accommodation SET Email_Replied = '1' WHERE ID = %i", $user_id); 

} catch (Exception $e) {
    echo $error_msg;
    echo $un;
    echo $email;
    echo $firstname;
    echo $lastname;
    echo $city;
    echo $phone;
    echo json_encode($un);
    $error_msg = 'An error occured on postEngine.php';

} 
```

?>

```
$un         =   fRequest::get('fields[0]');
$email      =   fRequest::get('fields[2]');
$firstname  =   fRequest::get('fields[3]');
$lastname   =   fRequest::get('fields[4]');
$city       =   fRequest::get('fields[5]');
$phone      =   fRequest::get('fields[6]'); 
```

?>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:13:16.247

它应该是 ：

```
data: fields, 
```

不是

```
data: 'fields', 
```

现在您所做的只是将字符串“字段”发送到服务器，而不是变量`fields`？

还要确保您期望服务器上有一个数组，并将 JSON 返回到客户端等，因为您在 中指定了 JSON `dataType`，但是在您的成功函数中，您将其称为 HTML，它不是，不是它会问题`html`只是一个变量，但看起来您并不期待 JSON，但仍然期待 JSON，并且当`dataType`设置为 JSON 时，任何包含无效 JSON（如 HTML）的响应都会失败？

# php - 带有 JSON 的 PHP 关联数组语法

> ID：13254948
> 
> 赞同：1
> 
> 时间：2012-11-06T16:10:00.610
> 
> 标签：php, arrays, json, associative

这是一个两部分的问题。`graph.facebook.com`首先，我有代码可以使用用户可以输入的参数进行调用。这会在调用时返回一个 json。

**代码如下：**

```
$RAW_DATA = json_decode(file_get_contents($URL_FINAL)); 
```

如果我在浏览器中访问 URL，一切都井井有条，但如果我使用 a `var_dump()`，看起来浏览器中没有显示额外的字段，是我的解码有问题还是`var_dump()`显示了我看不到的东西我的浏览器？

其次，在检索 JSON 后，试图访问其中的数据子字段已被证明是有问题的。

**例如：**

```
 {
   "data": [
      {
         "id": "11111111_111111111",
         "from": {
            "name": "John",
            "id": "111111111"
         },
         "story": "John shared We Are Change's photo.",
         "picture": "http://photos-e.ak.fbcdn.net/hphotos-ak-prn1/35552_10151311513538690_352701444_s.jpg",
         "link": "http://www.facebook.com/photo.php?fbid=10151311513538690&set=a.10150159213018690.338979.86518833689&type=1",
         "name": "Timeline Photos",
         "caption": "Happy election day everybody!",
         "properties": [
            {
               "name": "By",
               "text": "We Are Change",
               "href": "http://www.facebook.com/WeAreChange.org?ref=stream"
            }
         ] 
} 
```

这就是 URL 返回的内容，我将如何从中提取“故事”？

我尝试了几种不同的语法样式，但唯一返回任何内容的是`$RAW_DATA->{'data'};`，这只是打印“数组”。一旦我尝试进入下一层，我就无法打印任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:12:33.877

那是因为“数据”是一个对象数组（或关联数组）。

```
$RAW_DATA->{'data'}[0]; 
```

如果你总是知道它只有一个元素，那么它会起作用，否则你应该遍历 $RAW_DATA->{'data'}。

或简化：

```
$RAW_DATA['data'][0]['story'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:12:48.743

尝试以下操作：

```
var_dump($RAW_DATA['data']);
var_dump($RAW_DATA['data']['id']); 
```

这将 $RAW_DATA 视为一个数组，并且可以工作。

$RAW_DATA->data 会将其视为对象，并且会失败。

# c++ - 预期表达式错误

> ID：13254958
> 
> 赞同：-4
> 
> 时间：2012-11-06T16:10:43.523
> 
> 标签：c++, syntax, expression

我试图让这段代码工作，但遇到了这个错误，我不知道如何修复。我试过搜索谷歌，但没有任何帮助。

```
Ghost::Ghost()
{
    ghost = SDL_LoadBMP("media/ghost.bmp");
    lightning = SDL_LoadBMP("media/light.bmp");
    monsterDead = false;
    deathCounted = false;

    posX = 4450;
    posY = 490;

    xVel = 200;
    yVel = 300;

    monsterPos = {posX, posY, 122, 130};
// Error Here    ^

} 
```

这只是代码的一部分......突出显示的地方的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:15:49.453

啊，是的，难以捉摸的**缺少右括号错误**。众所周知，这会困扰全世界的程序员，研究表明，可以通过在末尾添加右括号来解决：

```
Ghost::Ghost()
{
    ghost = SDL_LoadBMP("media/ghost.bmp");lightning = SDL_LoadBMP("media/light.bmp");monsterDead = false;deathCounted = false;

    posX = 4450;posY = 490;

    xVel = 200;yVel = 300;

    monsterPos = {posX, posY, 122, 130};//

} //<--- HERE!!! 
```

**根据您的编辑：**

```
monsterPos = {posX, posY, 122, 130}; 
```

您的编译器似乎不支持，因为它不是初始化，而是赋值。您必须`monsterPos`一一分配成员。

# c# - 将新项目添加到列表后如何基于模板创建新的共享点站点

> ID：13254959
> 
> 赞同：2
> 
> 时间：2012-11-06T16:10:49.297
> 
> 标签：c#, sharepoint-2007, workflow, sharepoint-designer

在将新项目添加到列表后，如何基于模板创建新的共享点站点，例如，我有共享点站点“A”，其中包含有关项目的信息的列表，想法是在我添加一个新项目到该列表，我需要为该项目自动创建一个新的共享点站点（团队空间）。

另外我想知道是否可以使用工作流创建它，或者我是否可以使用工作流调用 webservice(c#)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:36:22.930

你也许可以通过工作流来做到这一点，但我真的怀疑它，至少它不会特别容易。

我建议在列表中添加一个事件接收器，这是我在需要遵循此模型的几次情况下所做的，这对我来说非常成功。

您可以将 ItemCreated（或 ItemCreating，如果您愿意）处理程序附加到列表，以在将项目添加到列表时基于模板创建站点，并且它也是对新站点进行任何配置的选项（可能基于您刚刚创建的列表项中的值）。您可以通过功能装订来配置它，但我发现不太方便，特别是如果您需要查看新创建的项目的值。

如果编辑父列表上的项目需要影响子列表，您还可以处理 ItemUpdated（或更新）事件。如果删除它应该删除子站点，您还可以处理 ItemDeleted（或删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:26:28.253

好的，首先你必须在其中创建一个带有 Visual Studio 的共享点项目，你可以编写 c#

在 C# 中创建一个站点

```
 SPSite topLevelSite = new SPSite("http://localhost");
 SPWeb spWebInstance = topLevelSite.OpenWeb();
 String siteTemplate = spWebInstance.WebTemplate;
 try
 {
SharePointWebInstance.Webs.Add("the name", "name", "new site added",    (UInt32)System.Globalization.CultureInfo.CurrentCulture.LCID, siteTemplate, false, false);
  }
 catch(Exception ex)
 {
  //...
 }
 finally
 {
 topLevelSite.Close();
 SharePointWebInstance.Dispose();
 } 
```

只是为了让你开始，顺便说一句，如果你只使用共享点设计器，你就不能使用 c#，c# 与 Visual Studio 一起使用。

从列表中检索某些东西

```
using Microsoft.SharePoint;  

class SPTest {  

public void ReadList() {  

// Use using to make sure resources are released properly  
using(SPSite oSite = new SPSite(pathToSite)) {  
using(SPWeb oWeb = oSite.AllWebs[nameOfWeb]) {   
  // Alternately you can use oSite.RootWeb if you want to access the main site  

  SPList oList = oWeb.Lists[listName];  // The display name, ie. "Calendar"  

  foreach(SPListItem oItem in oList.Items) {  
    // Access each item in the list...  
    DateTime startTime = (DateTime)oItem["Start Time"];  
    // etc....  
  }  

  }  
  }  
  }  
  } 
```

只是为了让你开始，我会推荐 youtube 来看看你如何同时使用 sharepoint 和 Visual Studio，或者更好地遵循上面的微软官方课程 10175A（我做过）代码，这些代码来自互联网而不是书本。

我认为它不可能用正常的工作流程或用 javascript 来做到这一点，尽管一些 java 代码在 ajax 等方面非常强大。所以你应该花时间在 Visual Studio 中弄清楚这一点。（c# 并不难读，慢慢来）

哦，我看到你使用的是 2007，从编程的角度来看，它的使用不太友好，如果这段代码在它上面不起作用，我认为它仍然接近它可以完成的方式，只需检查对象以及你用它做什么，它可能会略有不同.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T16:30:38.940

你确定要创建这么多网站吗？我不建议这样做，我的意思是想想你在 2 年后让自己从事的管理任务，这样的事情往往会变得疯狂。

我认为如果可能的话，您应该为所有项目考虑 1 个站点，但您仍然可以在积极的方面调整具有权利等的东西，人们会发现通常在 1 个站点中找到东西更容易。

好吧，只是我的几块钱，我不得不处理基于项目的静坐，我发现这是一场噩梦。但如果你喜欢我不会阻止你，但请确保你也想要..

# c# - 更改/重命名命名空间前缀

> ID：13254960
> 
> 赞同：0
> 
> 时间：2012-11-06T16:10:57.403
> 
> 标签：c#, namespaces, linq-to-xml, xelement

我有一个包含这些元素的 XELEMENT

```
<customer>
    <ns8:title xmlns:ns8="http://ws.xxx.com/xxx/model/common">B< /ns8:title>
    <ns9:firstname xmlns:ns9="http://ws.xxx.com/xxx/model/common">Bob< /ns9:firstname>
    <ns10:lastname xmlns:ns10="http://ws.xxx.com/xxx/model/common">Petier< /ns10:lastname>
    <ns11:bday xmlns:ns11="http://ws.xxx.com/xxx/model/common">19310227< /ns11:bday>
    <ns12:rank xmlns:ns12="http://ws.xxx.com/xxx/model/common">1< /ns12:rank>
</customer> 
```

我想像这样转换前缀。

```
<customer>
    <ns1:title xmlns:ns1="http://ws.xxx.com/xxx/model/common">B< /ns1:title>
    <ns2:firstname xmlns:ns2="http://ws.xxx.com/xxx/model/common">Bob< /ns2:firstname>
    <ns3:lastname xmlns:ns3="http://ws.xxx.com/xxx/model/common">Petier< /ns3:lastname>
    <ns4:bday xmlns:ns4="http://ws.xxx.com/xxx/model/common">19310227< /ns4:bday>
    <ns5:rank xmlns:ns5="http://ws.xxx.com/xxx/model/common">1< /ns5:rank>
< /customer> 
```

我试图删除属性，但没有运气..

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:21:05.753

您应该删除现有的命名空间定义属性（如果有的话）并添加一个新属性：

```
element.Add(new XAttribute(XNamespace.Xmlns + "ns1", "http://ws.xxx.com/xxx/model/common")); 
```

通过添加显式命名空间属性，您将强制 XElement 使用它进行序列化。

# wcf - 无法同时调用 WCF Web 服务工作

> ID：13254962
> 
> 赞同：3
> 
> 时间：2012-11-06T16:11:01.617
> 
> 标签：wcf, concurrency

我有一个 WCF Web 服务，作为测试，它包含一个调用存储过程的方法，该过程等待 10 秒然后返回。

我有一个测试程序，它启动了 20 个线程，所有线程都同时调用这个 Web 服务方法。我得到的结果是两个电话在 10 秒内返回，然后 10 秒后又两个电话返回，依此类推。因此，Web 服务一次只处理两个调用。

现在简单的答案可能是将 ConcurrencyMode 更改为 Multiple，并可能更改节流设置，但是当我这样做时，它没有任何效果。

Web 服务托管在 IIS 7.5 上。目前所有设置都是默认设置，尽管正如我所说，我已经尝试将 ConcurrencyMode 设置为 Multiple。

如果有人可以帮助我，我将不胜感激。

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:54:30.597

尝试在调用者的配置文件中将 maxconnection 从默认值 (2) 增加到更大的值。

```
<system.net>
    <connectionManagement>
      <add address="*" maxconnection="10" />
    </connectionManagement>
</system.net> 
```

# facebook - 从服务器端登录 Facebook

> ID：13254966
> 
> 赞同：-1
> 
> 时间：2012-11-06T16:11:06.113
> 
> 标签：facebook, facebook-graph-api

有没有办法从服务器端（Java、php、asp ...）登录 facebook？到目前为止我发现的内容包括一个弹出对话框和一个redirect_uri。我想要的是从我的服务器代码中调用一个登录 url，并以 JSON 格式（或纯文本，或 xml ......）

我已阅读[文档](http://developers.facebook.com/docs/reference/api/)但没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:58:09.547

登录 Facebook 使用 OAuth，这需要用户在场，因此实际登录不能仅从服务器端进行。但是，使用通过 OAuth 获得的令牌不需要用户。

# debugging - Debugging stored procedures in Visual Studio 2012

> ID：13254967
> 
> 赞同：3
> 
> 时间：2012-11-06T16:11:08.547
> 
> 标签：debugging, stored-procedures, visual-studio-2012

Has anybody used Visual Studio 2012 to debug a stored procedure?

I am trying to do so. I have opened the view `Server Explorer` and created *new connection to the database* and selected my database.

Now if I go the stored procedure that I want to debug and right click I can't see the option **Step into stored procedure**! It should be there!

However I can put breakpoints inside the stored procedure. But if I run the code which uses that procedure the breakpoint won't get hit!

Any idea?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T16:13:38.297

You need to use the SQL Server Object Explorer, not the Server Explorer. Unfortunate confluence of names.

# c# - Razor View Engine 中的 LoginView 密码恢复

> ID：13254969
> 
> 赞同：0
> 
> 时间：2012-11-06T16:11:13.757
> 
> 标签：c#, sql-server-2008, loginview

我有一个在剃刀视图引擎中使用 MVC4 构建的网站。我将正在执行加密的数据库表从本地数据库移动到我们的生产数据库，并更改了 web.config 文件以适应此更改。它现在工作正常，但我需要恢复密码。所以我最终得到了散列密码。有没有办法翻译它来恢复密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:24:35.420

这就是哈希的重点-> 一种方式。它并不意味着被解密。相反，重置用户的密码并通知用户他们的新密码。他们可以随时登录并再次更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:22:16.410

不容易。这就是哈希的意义所在，它是一种单向函数。您将不得不以某种方式破解它。

# javascript - 如何将图像放置在 取决于图像尺寸？

> ID：13254970
> 
> 赞同：1
> 
> 时间：2012-11-06T16:11:13.467
> 
> 标签：javascript

我希望根据图像尺寸将图像放置在 div 中。例如：

*   Div1：任何宽度> 600的图像都放在这里。
*   Div2：任何高度> 800的图像都放在这里。

*   img1 尺寸 = 宽度：601 像素；高度：300px；将此图像放在 Div1 上。

*   img2 尺寸 = 宽度：400 像素；高度：850px；将此图像放在 Div2 中。

我怎样才能使用 javascript 做到这一点？

这就是我试图做到的方式。

```
#Div1{
    width:600px;
    height:auto;
}
#Div2{
    width:auto;
    height:600px;
} 
```

```
var imageUrl = new Array();
    imageUrl[2] = '<img id="checkfunctionfirst" src="img1.jpg">'
    imageUrl[3] = '<img id="checkfunctionfirst" src="img2.jpg">'
    imageUrl[5] = '<img id="checkfunctionfirst" src="img3.jpg">'

function checkfunctionfirst () {

    for(i=0;i<=imageUrl.length;i++){
        if(imageUrl[i].width>600){
            //place this image on Div1
        } 
        if(imageUrl[i].height>800){
            //place this image on Div2
        }

    }    
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:20:07.850

您的代码示例存在许多问题和疑问，因此很难指出从哪里开始以及要更改的内容。但我会给你一个例子，说明你的代码如何工作，我希望它会有所帮助：

```
var imageUrl = ['img1.jpg','img2.jpg','img3.jpg'], // the images to use
    i = 0, len = imageUrl.length, img; // some vars used later

for( ; i<len; i++ ) { // loop through the image URLs

    img = new Image(); // create a new image

    img.onload = function() { // you need this to get the width/height

        if ( this.height > 800 ) { // "this" is the Image element
            document.getElementById('Div2').appendChild(this); // append to to the div
        } else if ( this.width > 600 ) {
            document.getElementById('Div1').appendChild(this);
        }
    };
    img.src = imageUrl[i]; // give the Image element a source
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:18:57.893

很高兴看到您尝试在没有 jquery 或任何其他插件的情况下自己做事。你是男人！

首先，我应该说，对于每个图像元素，您应该等到图像加载后才能找出该元素的尺寸。我认为你应该`"onload"`用javascript处理事件。只要图像完全加载，它就会触发。如果你有静态尺寸，你应该在每个元素的属性中设置它们`"width"`和`"height"`属性。`"style"``"img"`

在您拥有所有维度之后，我相信您的代码似乎没问题，您应该使用该`"appendChild"`方法将元素附加`"img"`到`"div"`元素。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:18:29.240

好的，如果图像符合条件，则将图像标签添加到字符串的末尾...

```
var div1Cont = "";
if(imageUrl[i].width>600){
    div1Cont += imgUrl[i];
} 
```

然后在 for 语句之后，将该字符串放在您的 div 中。

```
document.getElementById("Div1").innerHTML = div1Cont; 
```

然后与您的 div 2 类似。

# oracle-apex - APEX LOV 显示值参考

> ID：13254971
> 
> 赞同：2
> 
> 时间：2012-11-06T16:11:16.347
> 
> 标签：oracle-apex, lov

这个与我们相关的问题： APEX LOV 显示值在 Tony Andrews 建议的地方[查找：](https://stackoverflow.com/questions/6707683/apex-lov-display-value-look-up?answertab=votes#tab-top)

```
select display_value
from apex_application_lov_entries
where application_id = 123
and list_of_values_name = 'DEPT_LOV'
and return_value = :p1_deptno; 
```

这似乎引用了应用程序级 LOV 条目；有什么方法可以查询页面项中定义的 LOV？

我想做的是使用变量来引用 LOV 的显示值，而不是它的返回值。因此，如果我在一个名为的项目中有一个 LOV，`P2_TERM_SELECT`那么 `:P2_TERM_SELECT.`将给出它的返回值，但是它的显示值是否还有另一个变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:19:30.957

1.  在 apex 中没有像页面级 lov 这样的东西。当您创建 lov 时，它始终是共享组件的一部分并且是应用程序级别的。

2.  P2_TERM_SELECT lov 项总是返回您在返回值中给出的值。

    因此，在您的场景中，如果您想要来自 :P2_TERM_SELECT 的描述值，那么一个想法是进行 LOV 查询，如下例所示：

    选择显示值显示，返回值 || ':' || 来自 some_table 的 display_value ret。

    然后从 P2_TERM_SELECT 项目中获取他的显示值然后执行 substr(:P2_TERM_SELECT,INSTR(:P2_TERM_SELECT,':') + 1,LENGTH(:P2_TERM_SELECT))

谢谢

MK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:20:36.253

为方便起见，为什么不将页面项 lov 转换为共享组件中的 lov 呢？我的意思是，可能有一种方法可以从项目中检索它，但这不会同样混乱吗？您在哪里需要显示值：在 plsql 中还是在页面本身？如果在页面本身上，总是有 javascript。

Tony 使用的查询将从静态 LOV 中检索条目。当 LOV 包含 SQL 时，就不太清楚了。

您可以检索页面项目 LOV 的设置：

```
SELECT lov_definiation
FROM APEX_APPLICATION_PAGE_ITEMS
WHERE application_id = 123
AND page_id = 1
AND item_name = 'P1_DEPTNO'; 
```

但是，这将只返回一个字符串。选择语句将是一个字符串。如果您定义了一个静态值列表，那么返回也将是一个字符串：与您在定义中看到的相同。例子：

```
STATIC2:SALES;10,RESEARCH;20 
```

除了可能在 apex_plugin_util 中之外，我不知道一种内置的解析方式，但我认为这几乎不是使用它的地方。除非您想自己推出（编辑：我尝试使用`apex_plugin_util.get_data`，但它不适用于该`STATIC2`格式）。

我会认真考虑你在做什么以及它会如何增加复杂性。如果您要使用静态 lov，我建议使用共享组件 LOV，或者考虑使用查找表来查找您的值。

# asp.net - 将视频插入 HTML

> ID：13254973
> 
> 赞同：0
> 
> 时间：2012-11-06T16:11:21.407
> 
> 标签：asp.net, html

我试图在 处插入视频`HTML`，所以我有视频 URL、宽度和高度。是否足以构建正确的对象？我找到了如何为 .SWF 构建对象，但如何构建任何其他格式？

PS 我在服务器上没有视频文件，我使用外部视频 URL 作为来源。

这是我的 .SWF 格式代码：

```
private string GetVideoType(string filename, out string formatHtml)
        {
            string videoType = formatHtml = "";

            if (filename.EndsWith(".swf"))
            {
                videoType = "swf";
                formatHtml = @"
                <object width='{0}' height='{1}' data='{2}' type='application/x-shockwave-flash'>
                    <param name='src' value='{2}'></param>
                    <param name='allowfullscreen' value='true'></param>
                    <param name='allowscriptaccess' value='always'></param>
                    <param name='allowScriptAccess' value='always'></param>
                    <param name='pluginspage' value='http://www.adobe.com/go/getflashplayer'></param>
                    <param name='wmode' value='window'></param>
                    <param name='flashvars' value='playerForm=LVPPlayer&mediaId=a46002fd61264c09a36a90ca66c994cb'></param>
                </object>";
            }
            else if (filename.EndsWith(".flv"))
            {
                videoType = "flv";
                formatHtml = "???"
            }
            else if (filename.EndsWith(".mp4"))
            {
                videoType = "mp4";
                formatHtml = "???"
            }
            else if (filename.EndsWith(".wmv"))
            {
                videoType = "wmv";
                formatHtml = "???"
            }

            return videoType;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:20:03.460

或者看看这个播放器：[http ://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)

它工作得很好。

您可以使用 mp4 视频文件，它们在 Firefox 中可见

html代码：

```
<div id="q1">Loading the player ...</div> 
```

javascript

```
<script type="text/javascript">
    jwplayer("q1").setup({
        flashplayer: "/public/javascript/jwp/player.swf",
        file: "/videos/q1.mp4",
        image: "/videos/q1.jpg",
        height: 349,
        width: 620
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:14:08.087

不确定您的要求，但如果您查看 HTML5 Video 标签，可能值得。这里有一些细节：http: [//www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:15:28.713

也许应该看看 HTML5 标签。

代码在这里：

```
<video src="/video/example.ogg" width="320" height="240" controls>
<p>If you are reading this, it is because your browser does not support the HTML5 video element.</p>
</video> 
```

# c++ - 包含包含类的结构的类“列表”

> ID：13254976
> 
> 赞同：0
> 
> 时间：2012-11-06T16:11:31.103
> 
> 标签：c++, list, class, structure

我正在尝试编写复数的动态链接列表。基本上：我有一个类`list`，其中包含一个`number`包含 class的结构`complex`。盒中盒中盒。我在引用复数本身时遇到问题（我只有添加节点的函数。到目前为止我的代码：

### 复杂的.h

```
class complex
    {
    public:   
        float r;
        float i;
    }; 
```

### 列表.h

```
#include "complex.h"
class list

{

public: 
typedef struct number
{
    complex a;

    struct number *next;
}number;

number *number;

public:
        void add(number* number,complex b);
        list();
        ~list();

}; 
```

### list.cpp（包含函数添加，不起作用）

```
void list::add(number* number, complex b)
{
        number *newo=new number;        

         while (number->next != NULL)         
             { 
             number = number->next;
             }

          newo = malloc (sizeof(number)); 
          newo->a::r = b::r;  
          newo->a::i = b::i; 
          newo->next = NULL;                
          number->next = newo; 
```

}

感谢帮助 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:17:36.027

这些线

```
 newo->a::r = b::r;  
      newo->a::i = b::i; 
```

应该

```
 newo->a.r = b.r;  
      newo->a.i = b.i; 
```

或者更简单地说，你可以写

```
 newo->a = b; 
```

您遇到的其他问题是

1）您分配 number 节点两次，一次 with`new`和一次 with `malloc`。只做一次，然后使用`new`.

2）该数字似乎是您`list`班级中未初始化的指针。这将使您的程序崩溃。`list`为将 number 初始化为 NULL编写一个构造函数。

3) 的逻辑`list::add`是错误的，即使 number 为 NULL，那么您要做的第一件事就是`number->next`这也会使您的程序崩溃。

4）名字到处都是（正如其他人指出的那样）。尝试为所有内容取个好名字，它会帮助你理解你自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:21:24.707

在 list.h 中更改成员编号（我猜这是您列表的开头编号 *head;

该功能`Add`没有意义。我会这样做：

```
void list::add(complex b)
{
        number *newo = new number;        
        newo->a::r = b.r;  
        newo->a::i = b.i; 
        newo->next = NULL;                

        if(!head)
        {
            //first item
            head = newo;
        }
        else
        {
            number *itr = head;
            while (itr->next != NULL)         
            { 
                itr = itr->next;
            }
            itr->next = newo;
        }
} 
```

# android - 应用 9-patch 时出现白线

> ID：13254977
> 
> 赞同：0
> 
> 时间：2012-11-06T16:11:42.043
> 
> 标签：android, imageview, nine-patch

用作背景时，我遇到了 9-patch 的问题。我添加了一张图片来澄清它。

图片：

![在此处输入图像描述](../Images/1ae372f8649a60c737af1b0bd87408b9.png)

这是 9 补丁：

![在此处输入图像描述](../Images/f23ede1a2fbdf75ad563139147c09530.png)

为什么那条白线在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:24:12.583

好的，首先，你有比你需要的更多的拉伸像素。这不是问题的原因，但您只需要在顶部和左侧有一个黑色像素。其次，您应该将内容区域定义为仅包含白色区域（如下所示）。最后，我相信您的问题是 Android 正在缩放您的图形。您的 9-patch 是否在适当的密度文件夹中？（即，如果您使用的是 XHDPI 设备，那么 9-patch 在`drawable-xhdpi`吗？）。您可以做的一件事是完全避免缩放，将 9-patch 放入 中`res/drawable-nodpi`，但这将对所有密度使用相同的图形。这可能是也可能不是您需要的。

这是一个修订后的 9 补丁，您应该与上面的文件夹位置建议一起尝试：

![在此处输入图像描述](../Images/a26937af19cfd0ca034de8e35104d386.png)

# json - 使用 JavaScript/jQuery 使用 JSON Web 服务

> ID：13254980
> 
> 赞同：0
> 
> 时间：2012-11-06T16:11:56.793
> 
> 标签：json, dynamics-crm-2011

*我知道，我知道，JSON 中的“JS”和 jQuery 中的“j”代表 JavaScript。如果您发现更好的表述，请随时编辑标题。*

当我在浏览器中输入 URL“http://beep-beep”时，我会得到一个格式很好的 JSON 文件，其中包含“{sound: 'beep',occurrence: 2}”，这意味着 Web 服务按预期工作。然后我想：让我们在 CRM 中这样做，在`onLoad`功能上创建一个实体。所以，我正在尝试执行以下操作，直接从 SDK 复制。

```
alert("Commence.");

$.ajax({
  type: "POST",
  url: "http://beep-beep",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (msg) {
    alert("Yippi!");
  }
});

alert("Finish."); 
```

但是，代码崩溃告诉我“$”不是一个定义的符号。jQuery 不是 CRM JavaScript 引擎不可或缺的一部分吗？！我在这里想念什么？有没有更简单的方法来使用 JSON 提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:34:28.983

不，jQuery 不是 CRM 的一个组成部分。有一个使用 jQuery 使用 REST 端点的 SDK 示例，它显示在表单中包含 jQuery Web 资源。

[http://msdn.microsoft.com/en-us/library/gg309549.aspx](http://msdn.microsoft.com/en-us/library/gg309549.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:16:28.483

您是否包含了 jquery 库？您是否遇到与此相同的问题... [Object Expected error, javascript, jQuery](https://stackoverflow.com/questions/4679459/object-expected-error-javascript-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:15:52.257

尝试改变

```
$.ajax({ 
```

至

```
jQuery.ajax({ 
```

# apache-flex - flex post到安全服务器

> ID：13254993
> 
> 赞同：0
> 
> 时间：2012-11-06T16:12:35.920
> 
> 标签：apache-flex, internet-explorer, spring-mvc, https

我将数据从 Flex 应用程序发布到 Tomcat 安全 Web 服务器。Url 参数在 Chrome 和 FireFox 中到达 Spring 控制器。但是，在 IE 中我得到 null ！在 Https 中在 IE 中发布数据有什么问题吗？

# c# - WCF 抛出随机 ServiceActivationException

> ID：13254994
> 
> 赞同：1
> 
> 时间：2012-11-06T16:12:45.773
> 
> 标签：c#, wcf, silverlight, iis

我正在开发一个使用 WCF 作为后端的 Silverlight 项目。该项目使用 Autofac for IoC（前端作为后端）。

WCF 服务托管在 IIS7 中并已正确配置（端点、aspnetcompatibilityenabled、..）。

在 VS 2012 中调试项目时，随机服务有时会抛出 ServiceActivationException，而没有任何信息。有时重建修复问题，有时 IISReset，有时使用 wcftestclient 调用服务。最后一个解决方案总是有效..

有没有人遇到过类似的问题？

如果需要，请随时询问更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:59:42.193

我发现是什么导致了这个问题。我在一个在 IIS 中托管多个 WCF 服务的 VM 中工作。虚拟机只分配了两个演出的 ram。后者没有引起任何性能问题，但是对于托管服务的 w3p 进程来说是个问题。

> 内存门检查失败，因为可用内存（43732992 字节）小于总内存的 5%。因此，该服务将无法用于传入请求。要解决此问题，请减少机器上的负载或调整 serviceHostingEnvironment 配置元素上的 minFreeMemoryPercentageToActivateService 的值。

我的服务仅在可用内存不足时失败。添加配置元素并升级虚拟机中的 ram-memory 解决了这个问题。