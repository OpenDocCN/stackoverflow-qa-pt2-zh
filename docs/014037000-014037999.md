# StackOverflow 问答 14037000-14037999

# javascript - 本地的还是全球的？

> ID：14037003
> 
> 赞同：0
> 
> 时间：2012-12-26T06:53:12.063
> 
> 标签：javascript

我有很多这样的函数，不知道要不要把j和ka做成局部变量还是会出现异常问题？

```
var j=10,k=20;
var i=j+k*2;
console.log('helloworld'+i);
function plus(j,k){
 var i=j+k;
 console.log('plus '+i);
 //...etc
}

function formular(j,k){
 var i=j*k+123;
 console.log('formular '+i);
 //...etc
}
plus(-10,-20);
setInerval(function(){formular(22,33)},1000);
setInerval(function(){plus(-102,-33)},1000); 
```

或者我应该像这样写

```
function(var j, var k){ } 
```

??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:59:08.730

这是非常糟糕的做法。在 javascript 中应谨慎使用全局变量。使用与全局变量相同的名称来命名函数参数会更糟糕，并且会很快变得混乱。

不，你不应该写函数(var r,var k)

尽可能尝试使用局部变量，永远不要将它们命名为与命名全局变量相同的方式来混淆自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:40:45.187

```
var j=10,k=20;
var i=j+k*2;
console.log('helloworld'+i); 
```

在这里，`i`和`j`都是`k`全局的（假设您的代码在全局下）；

```
function plus(j,k){
 var i=j+k;
 console.log('plus '+i);
 //...etc
} 
```

这里, `j`, `k`and also`i`是局部的，因为`j`and`k`是在函数参数列表中定义的，并且是在函数`i`内部定义的。

以上两者不会冲突；试试这个：[小提琴演示](http://jsfiddle.net/mD9dm/)。按任意顺序按下这两个按钮。

不过，我并不是说您的代码是一个好习惯。请记住，**应谨慎使用全局变量**。

# java - 如何验证正则表达式中的可选子字符串

> ID：14037007
> 
> 赞同：1
> 
> 时间：2012-12-26T06:53:33.520
> 
> 标签：java, android, regex

我有一个验证 14 个字符长度的正则表达式。但现在我想验证它是否可以乘以 2 长度。

我目前的正则表达式是`"(0[0-1][0-9][0-9][0-9][0-9]0[0-2]0[0-4]0[0-2]0[0-2])"`

它只接受 14 长度的字符串

```
match : `00000002000102 00000002000101`
do not match : `00 , 0000 , 00000200,` 
```

我也想接受这些不匹配的字符串。

我在下面解释了我想要做什么

**编辑：**

在这里我将再次解释我的要求

看到我的字符串长度将是 14 位，现在在我的字符串中前 2 位是强制性的。我的字符串有 6 个不同的验证部分，我将在下面提到。

```
first part would be  : 00 or 01 only  : Sting length should be 2 only
second part would be : 0000-9999 any value between this.    : Sting length should be 6 only
third part would be  : 00 or 02 only             : Sting length should be 8 only
fourth part would be : 00 or 01 or 04 only even not 03.: Sting length should be 10 only
fifth part would be  : 00 or 01 or 02            : Sting length should be 12 only
sixth part would be  : 00 or 01 or 02            : Sting length should be 14 only 
```

*   因此，当我的输入字符串包含强制性的第一部分时。
*   如果它包含第 2 部分，它将强制第 1 和第 2 部分，并且两个部分都应按照上述验证进行验证。
*   如果字符串包含第三部分也意味着它的长度应该是 8 并且它包括第一部分和第二部分，那么它将根据上述条件强制验证第一、第二和第三部分
*   如果字符串包含第 4 部分也意味着它的长度为 10 并且它包括第 1、第 2 和第 3 部分，那么它也将根据上述条件强制验证第 1、2、3 和第
*   像上面一样继续到第 6 部分。

请帮助我，让我知道在我当前的 reg ex 实施中我必须改变什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:09:29.433

**编辑：针对已编辑问题中的规范：**

像这样的东西；现在这真的是你的功课；）

```
^(0[0-1](?:[0-9]{4}(?:0[02](?:0[014](?:0[0-2](?:0[0-2])?)?)?)?)?)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:53:16.080

你对第四组的定义

> 第四部分是：00 或 01 或 04 甚至不是 03。

不清楚。你需要02吗？

第四部分允许 02

```
/^((0[01])|(0[01][0-9]{4})|(0[01][0-9]{4}0[02])|(0[01][0-9]{4}0[02]0[0124])|(0[01][0-9]{4}0[02]0[0124]0[0-2])|(0[01][0-9]{4}0[02]0[0124]0[0-2]0[0-2]))$/ 
```

第四部分不允许使用 02

```
/^((0[01])|(0[01][0-9]{4})|(0[01][0-9]{4}0[02])|(0[01][0-9]{4}0[02]0[014])|(0[01][0-9]{4}0[02]0[014]0[0-2])|(0[01][0-9]{4}0[02]0[014]0[0-2]0[0-2]))$/ 
```

请注意您的初始模式接受超过 14 个符号的字符串，因为您没有使用 ^ 和 $

# android - 在 requestNewReadPermissions 然后 requestNewPublishPermissions 之后未调用 StatusCallback

> ID：14037010
> 
> 赞同：22
> 
> 时间：2012-12-26T06:53:50.810
> 
> 标签：android, facebook, facebook-authentication, facebook-android-sdk

我正在开发一个与 Facebook 集成的 Android 应用程序。我想：

1.  让用户使用 Facebook 登录
2.  在 Facebook 上获取用户的电子邮件地址（可以是[代理的电子邮件地址](https://developers.facebook.com/blog/post/355/)，这很好）
3.  代表他/她发布到用户的墙上/时间线

从技术上讲，这将是：

1.  验证用户
2.  请求[`email`许可](http://developers.facebook.com/docs/reference/login/email-permissions/)
3.  请求[`publish_stream`许可](http://developers.facebook.com/docs/reference/login/extended-permissions/)

### 1\. 对用户进行身份验证

我打[`Session.openActiveSession()`](http://developers.facebook.com/docs/reference/android/3.0/Session#openActiveSession(Activity,%20boolean,%20StatusCallback))了电话[`Session.StatusCallback`](http://developers.facebook.com/docs/reference/android/3.0/Session.StatusCallback)（我已经事先检查过没有活动的打开会话）：

```
final Session.StatusCallback sessionStatusCallback = new Session.StatusCallback() {
    public void call(final Session session, SessionState state, Exception exception) {
        // If there is an exception...
        if(exception != null)
        {
            // Handle fail case here.
            return;
        }

        // If session is just opened...
        if(state == SessionState.OPENED)
        {
            // Handle success case here.
            return;
        }
    };
};

// Start Facebook Login.
Session.openActiveSession(activity, true, sessionStatusCallback); 
```

成功登录后调用我的回调。到现在为止还挺好。

### 2.请求[`email`许可](http://developers.facebook.com/docs/reference/login/email-permissions/)

这是我的状态回调：

```
new Session.StatusCallback() {
    public void call(final Session session, SessionState state, Exception exception) {
        // If there is an exception...
        if(exception != null)
        {
            // Handle fail case here.
            return;
        }

        // If token is just updated...
        if(state == SessionState.OPENED_TOKEN_UPDATED)
        {
            // Handle success case here.
            return;
        }
    };
}; 
```

我请求许可[`Session.requestNewReadPermissions()`](http://developers.facebook.com/docs/reference/android/3.0/Session#requestNewReadPermissions(NewPermissionsRequest))：

```
final Session session = Session.getActiveSession();
final static String[] PERMISSION_ARRAY_READ = {"email"};
final List<String> permissionList = Arrays.asList(PERMISSION_ARRAY_READ);

// If all required permissions are available...
if(session.getPermissions().containsAll(permissionList))
{
    // Handle success case here.
    return;
}

// Request permissions.
session.requestNewReadPermissions(new Session.NewPermissionsRequest(activity, permissionList)); 
```

授予权限后调用我的回调。到现在为止还挺好。

### 3.请求[`publish_stream`许可](http://developers.facebook.com/docs/reference/login/extended-permissions/)

这是我的状态回调：

```
new Session.StatusCallback() {
    public void call(final Session session, SessionState state, Exception exception) {
        // If there is an exception...
        if(exception != null)
        {
            // Handle fail case here.
            return;
        }

        // If token is just updated...
        if(state == SessionState.OPENED_TOKEN_UPDATED)
        {
            // Handle success case here.
            return;
        }
    };
}; 
```

我请求许可[`Session.requestNewPublishPermissions()`](http://developers.facebook.com/docs/reference/android/3.0/Session#requestNewPublishPermissions(NewPermissionsRequest))：

```
final Session session = Session.getActiveSession();
final static String[] PERMISSION_ARRAY_PUBLISH = {"publish_stream"};
final List<String> permissionList = Arrays.asList(PERMISSION_ARRAY_PUBLISH);

// If all required permissions are available...
if(session.getPermissions().containsAll(permissionList))
{
    // Handle success case here.
    return;
}

// Request permissions.
session.requestNewPublishPermissions(new Session.NewPermissionsRequest(activity, permissionList)); 
```

这一次，我的回调在被授予权限后**没有被调用。**

### 调查

经过进一步调查，我发现我的回调是由以下触发的[`com.facebook.Session#postStateChange(SessionState, SessionState, Exception)`](https://github.com/facebook/facebook-android-sdk/blob/sdk-version-3.0/facebook/src/com/facebook/Session.java#L1160-1164)：

```
void postStateChange(final SessionState oldState, final SessionState newState, final Exception exception) {
    if (oldState == newState && exception == null) {
        return;
    }

    /* ... */
} 
```

因为`oldState`和`newState`相等（两者都是[`SessionState.OPENED_TOKEN_UPDATED`](http://developers.facebook.com/docs/reference/android/3.0/SessionState#OPENED_TOKEN_UPDATED)，所以我的回调没有被调用。

### 问题

第二次获得许可后如何收到通知？我应该进行[`close()`](http://developers.facebook.com/docs/reference/android/3.0/Session#close())会话并[从缓存中重新打开它](http://developers.facebook.com/docs/reference/android/3.0/Session#openActiveSessionFromCache(Context))吗？

### 附加信息

我的 Facebook Android SDK 3.0 是从[这里](https://developers.facebook.com/resources/facebook-android-sdk-3.0.zip)下载的，这在 Facebook 的[Android 版 Facebook SDK 入门中有说明](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T22:15:39.173

这是一个错误。

*[编辑：正如盖伊在评论中指出的那样，这已在 3.0.1 中修复，因此不再需要此解决方法]*

您提到的解决方法基本上是正确的，尽管您不需要调用 close。如果您使用的是单个活动会话，则在调用 requestNewPublishPermissions() 之前只需调用：

```
Session.openActiveSessionFromCache(myContext); 
```

如果使用多个会话，则需要使用 TokenCachingStrategy 初始化一个新的 Session，验证它是否处于 CREATED_TOKEN_LOADED 状态，然后调用 openForRead(null);

完成其中一项后， requestNewPublishPermissions() 应该在完成后调用您的通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:28:53.313

### 基于[rightparen答案的工作代码](https://stackoverflow.com/a/14046916/1402846)

在第二次（即之前[`Session.requestNewPublishPermissions()`](http://developers.facebook.com/docs/reference/android/3.0/Session#requestNewPublishPermissions(NewPermissionsRequest))）请求许可之前，请执行以下操作：

```
// Re-initialize Facebook session.
session.removeCallback(sessionStatusCallback);          // Remove callback from old session.
session = Session.openActiveSessionFromCache(context);  // Create new session by re-opening from cache.
session.addCallback(sessionStatusCallback);             // Add callback to new session. 
```

如问题所示，代码仍然基于 Facebook Android SDK 3.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T20:52:39.857

我遇到的另一件事是我的 requestCode`NewPermissionRequest`没有被设置为我用来打开我`Session`的 for Read 的相同 requestCode，因此`Session.StatusCallback`在授予新权限时我从未被调用。

例如，在我`onActivityResult`的检查中，我检查了 requestCode 并相应地委派了调用，因为我有其他东西进入这个方法。

```
public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {
    if (requestCode == FACEBOOK_AUTH_RESULT_CODE) {
        Session session = Session.getActiveSession();
        if(session != null) {
            session.onActivityResult(activity, requestCode, resultCode, data);
        }
    }       
} 
```

然后我`Session`用以下代码打开了我的：

```
 Session.getActiveSession().openForRead(
            new Session.OpenRequest(activity).
                setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK).
                setRequestCode(FACEBOOK_AUTH_RESULT_CODE).
                setPermissions(MY_READ_PERMISSIONS)); 
```

然后我在构建我的`NewPermissionRequest`.

这就是正确`NewPermissionRequest`的样子：

```
 Session.getActiveSession().requestNewPublishPermissions(
            new NewPermissionsRequest(activity, MY_PUBLISH_PERMISSIONS)
                .setRequestCode(FACEBOOK_AUTH_RESULT_CODE)); 
```

# asp.net - 如何使用 GridView 上的 RowDataBound 声明导航到具有特定窗口大小的新 .aspx 页面

> ID：14037012
> 
> 赞同：0
> 
> 时间：2012-12-26T06:53:49.760
> 
> 标签：asp.net, gridview, new-window, rowdatabound

我在 rowdatabound 事件中使用了以下代码

```
if (e.Row.RowType == DataControlRowType.DataRow)
 {
 e.Row.Attributes["onClick"] = string.Format("window.location = 'CandidateProfile.aspx?candidateID={0}';", DataBinder.Eval(e.Row.DataItem, "candidateID"))

} 
```

我想更改它，以便单击事件在具有指定高度和宽度的新窗口中打开

我该怎么做，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:06:11.520

似乎您可以申请`window.open(url)`并在那里设置一些参数来控制该窗口。

# actionscript-3 - AS3 对象索引导致 Flixel 行为不端——这段代码有什么问题？

> ID：14037014
> 
> 赞同：0
> 
> 时间：2012-12-26T06:53:58.557
> 
> 标签：actionscript-3, flixel

我被 AS3、Flixel 和组件/实体系统弄湿了（是的，同时所有），而且我的实体（FlxSprite 的子类）没有被正确添加（即，根本没有）。我刚刚花了整整两个小时来确定违规路线。如果我删除它，游戏的其余部分就会愉快地进行。

这段代码有什么问题？

```
public function addComponent(c:Component):void                                       
{                                                                                    
  var type:String = Object(c).constructor.toString();                                
  FlxG.log("type=" + type);                                                          
  this._components[type] = c; // The evil line                                       
  FlxG.log("now type=" + _components[type]);                                         
  c.setData(this);                                                                   
} 
```

`components`是用作地图/字典的对象字段。`type`设置为`[class PlayerComponent]`. 根据谷歌搜索，这是有效的，应该按预期工作。

根据控制台的输出，它只是在那条线之后放弃——并没有完全崩溃。这是怎么回事？我们很乐意应要求提供更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-01T00:00:43.000

我不确定`Component`——不是我的强项——但我知道它`FlxGroup`及其子项（包括`FlxState`）有一个名为的方法`add()`，可以将子项添加到它们中。

因此，如果您有`FlxSprite`，将其添加到要更新/绘制的事物链中的正确方法（在 flixel 中）是使用它；您可以将其直接添加到您的州或该州的子组。

函数文档： http: [//flixel.org/docs/org/flixel/FlxGroup.html#add()](http://flixel.org/docs/org/flixel/FlxGroup.html#add())

# java - 在 Java 中，我应该使用 ArrayList 还是长[]？

> ID：14037016
> 
> 赞同：3
> 
> 时间：2012-12-26T06:54:07.760
> 
> 标签：java, arrays, performance, arraylist

我正在编写一个程序，它接受 400 个类型`long`，并将根据运行时的条件修改其中一些，我想知道是否使用`ArrayList<Long>`或`long[]`.

哪个会更快使用？我正在考虑使用`long[]`，因为大小是固定的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T06:56:12.433

当大小固定时，`long[]`速度会更快，但它允许的 API 可维护性较差，因为它不实现`List`接口。

注意 a`long[]`更快有两个原因：

1.  使用原始`long`s 而不是 box object `Long`s（也可以实现更好的缓存性能，因为`long`s 是连续分配的，并且`Long`s 不能保证）
2.  数组是更简单和更有效的 DS。

尽管如此，为了更简单的可维护性 - 我会使用`List<Long>`, 除非性能在程序的这一部分非常关键。

如果你经常在一个紧密的循环中使用这个集合——并且你的分析器说它确实是一个瓶颈——那么我会切换到一个更有效的`long[]`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T06:56:53.160

就速度而言，400 个项目的列表几乎无关紧要。如果您需要动态增加列表，`ArrayList<Long>`那就更好了；如果大小是固定的，`long[]`可能会更好（并且速度会更快，尽管在大多数情况下您可能不会注意到差异）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-26T08:43:27.613

其他答案中没有提到的几件事：

*   泛型集合实际上是`Object`s 的集合，或者更好地说，这就是 Java 编译器将对其进行的处理。这段时间`long[]`将永远保持现状。

*   第一个要点的结果是，如果您做某事最终将其他内容`Long`放入您的集合中，在某些情况下编译器会允许它通过（因为 Java 类型系统不健全，例如，它允许您upcast 然后重新转换为完全不同的类型）。

*   这两者的一个更普遍的结果是 Java 泛型是半生不熟的，在一些不那么琐碎的情况下，例如反射、序列化等，可能会让您“吃惊”。事实上，使用普通数组比使用泛型更安全。

* * *

```
package tld.example;

import java.util.List;
import java.util.ArrayList;

class Example {

    static void testArray(long[] longs) {
        System.out.println("testArray");
    }

    static void testGeneric(List<Long> longs) {
        System.out.println("testGeneric");
    }

    @SuppressWarnings("unchecked")
    public static void main(String... arguments) {
        List<Long> fakeLongs = new ArrayList<Long>();
        List<Object> mischiefManaged = (List<Object>)(Object)fakeLongs;
        mischiefManaged.add(new Object());
        // this call succeeds and prints the value.
        // we could sneak in a wrong type into this function
        // and it remained unnoticed
        testGeneric(fakeLongs);

        long[] realLongs = new long[1];
        // this will fail because it is not possible to perform this cast
        // despite the compiler thinks it is.
        Object[] forgedLongs = (Object[])(Object)realLongs;
        forgedLongs[0] = new Object();
        testArray(realLongs);
    }
} 
```

这个例子有点做作，因为很难想出一个简短的令人信服的例子，但相信我，在不那么琐碎的情况下，当你必须使用反射和不安全的强制转换时，这是很有可能的。

现在，您必须考虑，除了合理之外，还有一个传统。每个社区都有一套它的习俗和传统。有很多肤浅的信念，例如这里所说的那些。当有人声称实现`List`API 是无条件的善，如果这没有发生，那么它一定是坏的......这不仅仅是一种主流观点，这是绝大多数 Java 程序员所相信的。毕竟，它没有没*那么*重要，而 Java，作为一门语言还有很多其他的缺点......所以，如果你想确保你的工作面试或只是避免与其他 Java 程序员发生冲突，那么无论出于何种原因，请使用 Java 泛型. 但是，如果您不喜欢它-好吧，也许只是使用其他语言；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T06:57:38.047

long[] 既快得多，又占用更少的内存。阅读“Effective Java”第 49 条：“Prefer primitive types to boxed primitives”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-26T07:13:20.160

我认为使用 ArrayList 更好，因为它更容易长期维护。将来，如果您的数组大小增加到超过 400，那么维护 long[] 会产生很多开销，而 ArrayList 会动态增长，因此您无需担心大小增加。
此外，ArrayList 以比静态数组 (long[]) 更好的方式处理元素的删除，因为它们会自动重新组织元素，以便它们仍然显示为有序元素。静态数组在这方面更糟糕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-29T19:18:48.430

为什么不使用适用于原始类型的众多列表实现之一呢？[例如TLongArrayList](http://trove4j.sourceforge.net/javadocs/gnu/trove/list/array/TLongArrayList.html)。它可以像 Javas List 一样使用，但基于 long[] 数组。所以你有双方的优势。

HPPC 简要概述了一些库：[https ://github.com/carrotsearch/hppc/blob/master/ALTERNATIVES.txt](https://github.com/carrotsearch/hppc/blob/master/ALTERNATIVES.txt)

# node.js - 如何在 mongodb 的输出查询中添加条件字段？

> ID：14037017
> 
> 赞同：1
> 
> 时间：2012-12-26T06:54:25.920
> 
> 标签：node.js, mongodb, mongoose

我的架构如下所示：

```
var productSchema = new Schema({
    name : String,
    likes : [{
        user_id : Schema.Types.ObjectId,
        date : Date
    }]
}); 
```

假设我有这个集合

`{ name : A, likes : [ {user_id : id1, date : blahblah}, {user_id : id2, date : balh}] }`

`{ name : B, likes : [ {user_id : id1, date : blahblah}] }`

`{ name : C }`

然后我想显示，通过查询它来跟踪输出

（使用 user_id = id1）`{ name : A, like : 1}, { name : B, like : 1}, { name : C, like : 0}`

（使用 user_id = id2）`{ name : A, like : 1}, { name : B, like : 0}, { name : C, like : 0}`

可以这么说，我想在这里添加一个名为“like”的新字段。

如果user_id存在于array(likes)中，like为1，否则为0。

我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:03:27.317

最好的方法是在用户模式中收集喜欢的产品 ID。因此，当有人喜欢产品时，您必须将 userId 添加到产品集合中，并将产品 ID 添加到用户集合中。这是在 mongodb 中实现多对多关系的常用方法。可选，为了提高读取性能，您可以将产品名称非规范化为用户：

```
var userSchema = new Schema({
    name : String,
    likedProducts : [{
        _id : Schema.Types.ObjectId,
        productName: String
    }]
}); 
```

但请记住，非规范化会增加写入操作的开销。在产品名称更新时，您也将在用户集合中更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:51:47.720

对于您的架构，您应该执行以下查询：

```
db.collection.find({ likes: { $elemMatch: { user_id: idX }}}); 
```

这样，您将获得带有`idX`userId 条目的产品。`likes`所有其他的在数组中都没有 userId 。使用此方法，您需要将输出与*1*相加，而其他不在输出中的输出与*0*相加。

您没有提到 userId 是否可能在同一个数组中有不同的条目，因为这会改变问题。

# eclipse - 在 Mac 机器上的 Eclipse Java EE Indigo 中安装 IBM Worklight Studio 时出错

> ID：14037018
> 
> 赞同：0
> 
> 时间：2012-12-26T06:54:29.537
> 
> 标签：eclipse, macos, ibm-mobilefirst

请帮帮我。当我尝试在 Eclipse 中安装 IBM Worklight Studio 时，出现以下错误。

```
Cannot complete the install because one or more required items could not be found.

Software being installed: IBM Worklight Studio 5.0.30.v20120808_2026 (com.ibm.imp.tools.feature.feature.group 5.0.30.v20120808_2026)

Missing requirement: Model Plug-in 7.0.400.v20120731_1538 (com.ibm.etools.webtools.model 7.0.400.v20120731_1538) requires 'bundle org.eclipse.gmf.runtime.emf.type.core [1.0.0,2.0.0)' but it could not be found

Cannot satisfy dependency:

From: Web Page Generation Core Plugin 7.2.300.v20120731_1538 (com.ibm.etools.webtools.webpage.core 7.2.300.v20120731_1538)

To: bundle com.ibm.etools.webtools.model [7.0.0,8.0.0)

Cannot satisfy dependency:

From: IBM Worklight Studio 5.0.30.v20120808_2026 (com.ibm.imp.tools.feature.feature.group 5.0.30.v20120808_2026)

To: com.ibm.wdt.webtools.ajax.feature.feature.group 1.0.0

Cannot satisfy dependency:

From: AJAX Web Tools 1.0.0.v20120731_1538 (com.ibm.wdt.webtools.ajax.feature.feature.group 1.0.0.v20120731_1538)

To: com.ibm.etools.webtools.webpage.core _http://7.2.300.v20120731_1538 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:32:24.693

是否选中了“安装期间联系所有更新站点以查找所需”复选框？你连接到互联网了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:57:19.943

嗨，我认为 WTP 插件已正确安装在您的 Eclipse 中，请删除该插件并尝试安装最新的 WTP 插件。您使用的是 Helios 还是 Indigo 第 2 版。尝试更新eclipse并重新安装Worklight

# android - Android - 操作栏样式

> ID：14037025
> 
> 赞同：3
> 
> 时间：2012-12-26T06:54:55.777
> 
> 标签：android, android-actionbar, contextual-action-bar

我想显示如下所示的**操作栏**。

* * *

![在此处输入图像描述](../Images/0e5f5cd99698d711c17de0d4f3cc00f8.png)

* * *

![在此处输入图像描述](../Images/236e6864daaf4454261f6526f10ab3fe.png)

* * *

![在此处输入图像描述](../Images/bdfb9971f4e22b82d1c3fb5755cde9d3.png)

* * *

我已经用过这个库[点击这里](http://actionbarsherlock.com/)

但它只需要操作栏上的两个图标。如果我添加四个项目，那么最后两个会像菜单一样显示给我。我希望操作栏中的所有内容与上图相同。

是否可以？如果是，那么如何？我可以更改设备中可用的操作栏颜色或其默认样式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:06:17.263

我建议你使用这个：

[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

为您的 ActionBar 设置样式。

如果您希望所有 4 个图标都在那里，只需将此属性添加到所有菜单项：

```
android:showAsAction="always" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T06:10:52.463

你好试试这个[库](https://i.stack.imgur.com/o0kez.png)

它肯定对你有帮助而且你可能必须在下面`2.3 Android OS`和上面添加你自己的逻辑来处理这个问题`3.0 Android OS`。

有许多演示示例，如下所示：

![在此处输入图像描述](../Images/6665988ed59ffecd2beccbec3f369c5a.png)

![在此处输入图像描述](../Images/fcddcb92bb703c3865232622b0790247.png)

![在此处输入图像描述](../Images/2c18416d8bc4bb8725a965909c955a1a.png)

![在此处输入图像描述](../Images/92664163764b8d1992572da81ff6e24d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:06:33.550

您无法确定操作栏中显示的图标数量。那里有各种各样的 Android 设备，它们都有不同的屏幕尺寸。这就是为什么您必须优先考虑菜单中可用的操作：最重要的将显示为操作栏中的操作，而其他操作将显示在“菜单”中：操作溢出。

您应该以功能的方式而不是图形的方式来考虑操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:22:59.467

参考您附加的图像，您应该决定要在应用程序中使用哪种设计模式，有许多可用于手机、平板电脑的 UI 模式。您附加的图像看起来像 **[侧面导航](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)**UI 模式。最好决定哪种**[UI 模式](http://www.androiduipatterns.com/p/android-ui-pattern-collection.html)**最适合您的应用程序。然后开始使用自定义操作栏库（如果您想要低于 Android 3.0 版本的操作栏）或任何其他方式来实现它。

# visual-studio-2010 - f10 不单步执行循环

> ID：14037029
> 
> 赞同：0
> 
> 时间：2012-12-26T06:55:12.303
> 
> 标签：visual-studio-2010

我正在逐步浏览 VS2010 中的一些代码。我注意到侧栏中的这个图标：

![VS 图标](../Images/120357b2699665aa7ad015067797136a.png)

而且由于该图标的出现，我无法使用 F10 循环代码。

我尝试更改许多设置，但没有任何帮助。我更改了项目属性，将 VS 重置为默认值，但无济于事。

我确定这是一个简单的答案，但我无法弄清楚。

更新：仅当循环包含 TRACE 宏时才会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:16:33.580

如果要删除书签，请检查“清除书签”的工具，或者这里是删除所有书签的快捷方式“ctrl+k 然后 ctrl+l”

# windows - 在 Windows 中将多个视频文件制作成流

> ID：14037031
> 
> 赞同：0
> 
> 时间：2012-12-26T06:55:27.080
> 
> 标签：windows, file, video-streaming

我有几个视频文件保存在硬盘中，它们属于整个视频。为了在打开不同的视频文件之间没有间隙地播放它们，我必须考虑使这些文件成为流的策略。有人建议我在 Windows 中使用管道，但由于看不到管道文件，我无论如何都无法播放它们。另一个想法是将文件发送到某种本地主机，然后我可以使用支持此功能的视频播放器从预定义的 url 读取它。但我不知道该怎么做。任何建议都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:27:40.047

您可能想使用[ffmpeg](http://www.ffmpeg.org/)将文件连接到一个文件中：

[http://www.ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f](http://www.ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f)

[http://ulyssesonline.com/2009/12/03/concatenate-video-files-using-ffmpeg/](http://ulyssesonline.com/2009/12/03/concatenate-video-files-using-ffmpeg/)

[https://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join%2C%20merge%29%20media%20files](https://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join%2C%20merge%29%20media%20files)

# jquery - 如何在asp.net中将文本附加到Div表单jQuery？

> ID：14037036
> 
> 赞同：1
> 
> 时间：2012-12-26T06:55:56.667
> 
> 标签：jquery, asp.net, html, checkbox

如何通过Jquery将`CheckBox`名称添加到`Div control`复选框状态为真时`Checked`

我试过下面的代码。但没有得到结果。

ASP 代码：

```
<div align="center" id="chkBoxes">
    <asp:CheckBox ID="chbIceCream" Text ="Ice Cream" runat="server" />
    <asp:CheckBox ID="chbCake" Text ="Cake" runat="server" />
    <asp:CheckBox ID="chbChocolet" Text ="Cho colet" runat="server" />
</div>

<div id="ContentDiv">

</div> 
```

jQuery代码：

```
$(document).ready(function () {
    $('#chbIceCream').click(function () {
        debugger;
        var Text = $('#chbIceCream').text();
        if ($(this).attr('checked'))
            $('#ContentDiv').append(Text);
    });
}); 
```

如果有人帮助，请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T06:57:06.017

如果您想在 javascript 中使用服务器端 id 或在 javascript 中使用 CliendID，请设置您的控件[ClientIDMode="static" 。](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

**使用 ClientIDMode="static"**

```
<asp:CheckBox ID="chbIceCream" Text ="Ice Cream" runat="server" ClientIDMode="static" /> 
```

*控件 ID 的 jQuery 选择器没有变化*

```
$(document).ready(function () {
    $('#chbIceCream').click(function () {
        debugger;
        var Text = $('#chbIceCream').text();
        if ($(this).attr('checked'))
            $('#ContentDiv').append(Text);
    });
}); 
```

**使用客户端 ID**

```
$(document).ready(function () {
  $('#<%= chbIceCream.ClientID %>').click(function () {
    debugger;
    var Text = $('#chbIceCream').text();
    if ($(this).attr('checked'))

        $('#ContentDiv').append(Text);
   })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T06:58:31.260

使用它作为选择器

```
 $('#<%= chbIceCream.ClientID %>').click(function(){
  .... 
```

**更新**

添加`ClientIDMode="static"`你的html

# javascript - 如何将元素附加到没有 id 的 div

> ID：14037048
> 
> 赞同：1
> 
> 时间：2012-12-26T06:56:49.417
> 
> 标签：javascript

我想使用 javascript 在 div 中添加一个链接，这个 div 没有 id ，但它确实有一个类：

```
<div class="details">
  <div class="filename">test.xml</div>
  <div class="uploaded">25/12/2012</div>

  <a href="#" class="delete">Delete</a>

  <div class="compat-meta"></div>
</div> 
```

如何在“详细信息” div 内和“删除”链接上方添加链接？我要添加的链接是：

```
<a href="#edit_link" class="edit">Edit</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:16:11.177

选择jquery，它简单干净。

你可以抓住任何具有特定类的元素说

```
<div class="className" ></div> 
```

像这样

```
<script>
$('.className'); 
</script> 
```

现在您想在具有类的锚之前附加一些其他元素`delete` ，而不是您可以这样做：

```
$('.delete').before('<a href="#edit_link" class="edit">Edit</a>'); 
```

还有其他方法可以在任何其他元素或 dom 中附加元素

```
 1\. $('.className').append('<div> i will be appended at the bottom of this element</div>');
 2\. $('.className').after('<div> i will be appended right after this element</div>'); 
```

要使用 jquery，您将需要它的 api，直接在您的页面中使用[此](https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)链接，或者，下载最新的 jQuery api 并使用它。它更简单，更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:06:08.040

```
function hasClass(element, className) {
    var s = ' ' + element.className + ' ';
    return s.indexOf(' ' + className + ' ') !== -1;
}

 /**
 * from: http://www.dustindiaz.com/getelementsbyclass
 */
function $class(className, context, tag) {
    var classElements = [],
        context = context || document,
        tag = tag || '*';

    var els = context.getElementsByTagName(tag);
    for (var i = 0, ele; ele = els[i]; i++) {
        if (hasClass(ele, className)) {
            classElements.push(ele);
        }
    }
    return classElements;
} 
```

然后使用`$class('delete')`定位元素，然后添加新元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:06:19.523

最好按 id 搜索，这是最有效的。但是，如果涉及到它，您也可以按类或标签名称找到元素。

我建议使用 jQuery，并更改您拥有的现有标签：

```
$('a').attr('href', '#edit_link').text('Edit').removeClass('delete').addClass('edit'); 
```

如果无法向您要查找的元素添加 id，请在树中较高位置找到具有 id 的元素，然后从那里开始：

```
$('#someHigherId > div > a')... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:13:05.463

你可以使用 jQuery：

```
$('div.details a.delete').before('<a href="#edit_link" class="edit">Edit</a>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T07:32:23.433

使用纯 JavaScript：

```
var div = document.getElementsByClassName('details')[0],
    deleteLink = div.getElementsByClassName('delete')[0],
    editLink = document.createElement('a');

editLink.textContent = 'Edit';
editLink.className = 'edit';
editLink.href = '#edit_link';

div.insertBefore(editLink, deleteLink); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T07:47:08.447

```
You can do it using javascript like this

<script type="text/javascript">
    function addtext(what){
        if (document.createTextNode){
            var link = document.createElement('a');
            link.setAttribute('href', '#edit_link');
            link.setAttribute('id', 'edit');
            link.setAttribute('class', 'edit');
            document.getElementsByTagName("div")[0].appendChild(link)
            document.getElementById("edit").innerHTML = what;
        }
    }
</script>

<div class="details" id="mydiv" onClick="addtext('Edit')">
    <div class="filename">test.xml</div>
    <div class="uploaded">25/12/2012</div>

    <a href="#"  class="delete">Delete</a>

    <div class="compat-meta"></div>
</div> 
```

# sql - SQL server 服务启动失败

> ID：14037061
> 
> 赞同：4
> 
> 时间：2012-12-26T06:58:10.110
> 
> 标签：sql, sql-server, sql-server-2008

我一直在尝试从过去 12 小时开始启动 sql 服务器，但不太确定发生了什么。我收到错误 1814，它是“tempdb 的空间不足”，但我在 C: 驱动器中有 60GB 的数据。此外，它正在尝试从 E: 驱动器打开表，这是我的 DVD 驱动器，这是不应该发生的。

在这里通过添加日志。请让我知道有什么问题。

```
2012-12-26 12:24:06.34 Server      Microsoft SQL Server 2008 (SP1) - 10.0.2531.0 (Intel X86) 
Mar 29 2009 10:27:29 
Copyright (c) 1988-2008 Microsoft Corporation
Express Edition on Windows NT 6.1 <X86> (Build 7601: Service Pack 1)

2012-12-26 12:24:06.34 Server      (c) 2005 Microsoft Corporation.
2012-12-26 12:24:06.34 Server      All rights reserved.
2012-12-26 12:24:06.34 Server      Server process ID is 3456.
2012-12-26 12:24:06.34 Server      System Manufacturer: 'WIPRO', System Model: 'WNB7PBM4930R-0007'.
2012-12-26 12:24:06.34 Server      Authentication mode is WINDOWS-ONLY.
2012-12-26 12:24:06.34 Server      Logging SQL Server messages in file 'c:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\Log\ERRORLOG'.
2012-12-26 12:24:06.34 Server      This instance of SQL Server last reported using a process ID of 5716 at 12/26/2012 12:15:10 PM (local) 12/26/2012 6:45:10 AM (UTC). This is an informational message only; no user action is required.
2012-12-26 12:24:06.34 Server      Registry startup parameters: 
 -d c:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\master.mdf
 -e c:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\Log\ERRORLOG
 -l c:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\mastlog.ldf
2012-12-26 12:24:06.36 Server      SQL Server is starting at normal priority base (=7). This is an informational message only. No user action is required.
2012-12-26 12:24:06.36 Server      Detected 2 CPUs. This is an informational message; no user action is required.
2012-12-26 12:24:06.41 Server      Using dynamic lock allocation.  Initial allocation of 2500 Lock blocks and 5000 Lock Owner blocks per node.  This is an informational message only.  No user action is required.
2012-12-26 12:24:06.48 Server      Node configuration: node 0: CPU mask: 0x00000003 Active CPU mask: 0x00000003\. This message provides a description of the NUMA configuration for this computer. This is an informational message only. No user action is required.
2012-12-26 12:24:06.50 spid6s      Starting up database 'master'.
2012-12-26 12:24:06.62 spid6s      FILESTREAM: effective level = 0, configured level = 0, file system access share name = 'SQLEXPRESS'.
2012-12-26 12:24:06.65 spid6s      SQL Trace ID 1 was started by login "sa".
2012-12-26 12:24:06.65 spid6s      Starting up database 'mssqlsystemresource'.
2012-12-26 12:24:06.66 spid6s      The resource database build version is 10.00.2531\. This is an informational message only. No user action is required.
2012-12-26 12:24:06.91 spid6s      Server name is 'L--COMPUTER\SQLEXPRESS'. This is an informational message only. No user action is required.
2012-12-26 12:24:06.91 spid10s     Starting up database 'model'.
2012-12-26 12:24:06.91 spid6s      Informational: No full-text supported languages found.
2012-12-26 12:24:06.91 spid6s      Starting up database 'msdb'.
2012-12-26 12:24:07.19 spid10s     Error: 17204, Severity: 16, State: 1.
2012-12-26 12:24:07.19 spid10s     FCB::Open failed: Could not open file e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\model.mdf for file number 1\.  OS error: 21(The device is not ready.).
2012-12-26 12:24:07.19 spid10s     Error: 5120, Severity: 16, State: 101.
2012-12-26 12:24:07.19 spid10s     Unable to open the physical file "e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\model.mdf". Operating system error 21: "21(The device is not ready.)".
2012-12-26 12:24:07.20 spid6s      Error: 17204, Severity: 16, State: 1.
2012-12-26 12:24:07.20 spid6s      FCB::Open failed: Could not open file e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\MSDBData.mdf for file number 1\.  OS error: 21(The device is not ready.).
2012-12-26 12:24:07.20 spid6s      Error: 5120, Severity: 16, State: 101.
2012-12-26 12:24:07.20 spid6s      Unable to open the physical file "e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\MSDBData.mdf". Operating system error 21: "21(The device is not ready.)".
2012-12-26 12:24:07.20 Server      A self-generated certificate was successfully loaded for encryption.
2012-12-26 12:24:07.20 Server      Server local connection provider is ready to accept connection on [ \\.\pipe\SQLLocal\SQLEXPRESS ].
2012-12-26 12:24:07.20 Server      Server local connection provider is ready to accept connection on [ \\.\pipe\MSSQL$SQLEXPRESS\sql\query ].
2012-12-26 12:24:07.20 Server      Dedicated administrator connection support was not started because it is disabled on this edition of SQL Server. If you want to use a dedicated administrator connection, restart SQL Server using the trace flag 7806\. This is an informational message only. No user action is required.
2012-12-26 12:24:07.22 Server      The SQL Server Network Interface library could not register the Service Principal Name (SPN) for the SQL Server service. Error: 0x54b, state: 3\. Failure to register an SPN may cause integrated authentication to fall back to NTLM instead of Kerberos. This is an informational message. Further action is only required if Kerberos authentication is required by authentication policies.
2012-12-26 12:24:07.22 Server      SQL Server is now ready for client connections. This is an informational message; no user action is required.
2012-12-26 12:24:07.45 spid10s     Error: 17207, Severity: 16, State: 1.
2012-12-26 12:24:07.45 spid10s     FileMgr::StartLogFiles: Operating system error 2(The system cannot find the file specified.) occurred while creating or opening file 'e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\modellog.ldf'. Diagnose and correct the operating system error, and retry the operation.
2012-12-26 12:24:07.45 spid10s     File activation failure. The physical file name "e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\modellog.ldf" may be incorrect.
2012-12-26 12:24:07.45 spid10s     Error: 945, Severity: 14, State: 2.
2012-12-26 12:24:07.45 spid10s     Database 'model' cannot be opened due to inaccessible files or insufficient memory or disk space.  See the SQL Server errorlog for details.
2012-12-26 12:24:07.45 spid10s     Could not create tempdb. You may not have enough disk space available. Free additional disk space by deleting other files on the tempdb drive and then restart SQL Server. Check for additional errors in the event log that may indicate why the tempdb files could not be initialized.
2012-12-26 12:24:07.45 spid10s     SQL Trace was stopped due to server shutdown. Trace ID = '1'. This is an informational message only; no user action is required.
2012-12-26 12:24:07.45 spid6s      Error: 17207, Severity: 16, State: 1.
2012-12-26 12:24:07.45 spid6s      FileMgr::StartLogFiles: Operating system error 2(The system cannot find the file specified.) occurred while creating or opening file 'e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\MSDBLog.ldf'. Diagnose and correct the operating system error, and retry the operation.
2012-12-26 12:24:07.48 spid6s      File activation failure. The physical file name   "e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\MSDBLog.ldf" may be incorrect. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:01:24.507

看看这些链接：

*   [http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/922fe202-a2a8-47e4-8f77-402ef14944f8/](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/922fe202-a2a8-47e4-8f77-402ef14944f8/)

*   [http://blogs.msdn.com/b/sanchan/archive/2006/06/04/617585.aspx](http://blogs.msdn.com/b/sanchan/archive/2006/06/04/617585.aspx)

1）确保您取消选中文件*tempdb.mdf*的“压缩内容以节省磁盘空间”

2) 确保您*没有*将 tempdb 保存在压缩文件夹中

还：

这是什么错误：

`e:\sql10_main_t\sql\mkmastr\databases\objfre\i386\model.mdf`

也许您只想让“模型”离线？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-06T15:11:15.793

在 SQL Server 2008 中为我工作。实际上 tempdb 移动到了在系统重新启动时无法访问的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-21T13:35:41.213

我对 SQL Express 也有同样的问题。MS SQL 安装程序有很多错误。有几次我遇到了我只需要重新安装操作系统的情况。对于这个特定问题，解决方案在这里：[https](https://social.technet.microsoft.com/wiki/contents/articles/31786.sql-server-not-starting-after-fresh-installation.aspx) ://social.technet.microsoft.com/wiki/contents/articles/31786.sql-server-not-starting-after-fresh-installation.aspx 。

基本位是：

使用以下命令从命令行启动服务

```
NET START MSSQLSERVER /f /T3608 
```

运行命令行查询处理器：

```
SQLCMD –S .\ 
```

或者

```
SQLCMD –S .\INSTANCENAME 
```

检查数据库的路径：

```
SELECT name, physical_name, state_desc FROM sys.master_files ORDER BY database_id;
go 
```

修复数据库路径：

```
ALTER DATABASE model MODIFY FILE ( NAME = modeldev, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\model.mdf');
ALTER DATABASE model MODIFY FILE ( NAME = modellog, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\modellog.ldf');
ALTER DATABASE msdb MODIFY FILE ( NAME = MSDBData, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\MSDBData.mdf');
ALTER DATABASE msdb MODIFY FILE ( NAME = MSDBLog, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\MSDBLog.ldf');
ALTER DATABASE tempdb MODIFY FILE ( NAME = tempdev, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\temp.mdf');
ALTER DATABASE tempdb MODIFY FILE ( NAME = templog, FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\temp.ldf');
go 
```

退出并重启服务：

```
exit
NET STOP MSSQLSERVER
NET START MSSQLSERVER 
```

# javascript - 对象的JQuery Ajax未捕获类型错误

> ID：14037066
> 
> 赞同：0
> 
> 时间：2012-12-26T06:58:20.243
> 
> 标签：javascript, jquery, ajax, hash, jquery-bbq

我目前正在使用 JQuery BBQ Js 插件对我的网站进行 ajaxified 导航，当我使用 ajax 导航整个网站时，有一个链接会显示此错误。

这是我的标记

```
<ul>
<li><a id="thankyou" href="#views/thankyou.jsp">Ajaxified Thank You Message</a></li>
<li><a id="register" href="#views/ajaxvalidation.jsp">Ajaxified Register Register</a></li>
<li><a id="register" href="#views/othermessage.jsp">Ajaxified Other Message</a></li>

</ul> 
```

所有这两个链接都有效，但是当我单击第二个链接并提交表单时，当我单击其他锚标记时会显示此错误。

```
Uncaught TypeError: Object function (e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")} has no method 'fragment' 
```

该错误是由该脚本触发的。

```
$(function(){
      var cache = {
        '': $('.bbq-default')
      };

      $(window).bind( 'hashchange', function(e) {

        var url = $.param.fragment();

        $( 'a.bbq-current' ).removeClass( 'bbq-current' );

        $( '.bbq-content' ).children( ':visible' ).hide();

        url && $( 'a[href="#' + url + '"]' ).addClass( 'bbq-current' );

        if ( cache[ url ] ) {

          cache[ url ].show();

        } else {
          // Show "loading" content while AJAX content loads.
          $( '.bbq-loading' ).show();

          // Create container for this url's content and store a reference to it in
          // the cache.

          cache[ url ] = $( '<div class="bbq-item"/>' )

            .appendTo( '.bbq-content' )
            .load( url +"#content");//loads the content and get the div you want
        }
      })
      $(window).trigger( 'hashchange' );
    }); 
```

特别是这一行

```
 var url = $.param.fragment(); 
```

是什么导致了这个错误？

这也是第二个链接的样子..

```
<!DOCTYPE HTML>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $('#content').on('submit','#result',function(e){
        e.preventDefault();
        var data = $(this).serialize();
        $.ajax({
            //this is the php file that processes the data and send mail
            url: "register.action", 
            type: "POST",  
            data: data,
            //Do not cache the page
            cache: false,
            //success
            success: function (html) {
               $('#content').html(html);       
            }       
        });
    })
})
</script>
</head>
<body>
    <h3>Simple Ajax Validation.</h3>
    <div id="divErrors"></div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <div id = "content">
    <s:form action="register" id="result">
        <label>UserName</label>
        <s:textfield name="userBean.username" />
        <s:fielderror />
        <input type ="submit" id = "result_0" value="AJAX Submit" />
    <!--  Test if Even Outside  the main page can access the other elements -->
    </s:form>  
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:06:57.383

我找到了解决方案，Jquery-bbq js 没有包含在 Ajaxvalidation.jsp 中，我所做的是我将 jquery-bbq.js 及其 AJAX 请求包含在另一个 JS 文件中，并且如果分别导入它们页面提出了请求

# linux-kernel - 为什么每秒进行一次非自愿上下文切换？

> ID：14037070
> 
> 赞同：6
> 
> 时间：2012-12-26T06:58:33.893
> 
> 标签：linux-kernel, operating-system, scheduling, kernel

操作系统是 RHEL 6 (2.6.32)。我已经隔离了一个核心，并在其上运行了一个计算密集型线程。/proc/{thread-id}/status 每秒显示一次非自愿上下文切换。

有问题的线程是 SCHED_NORMAL 线程，我不想更改它。

如何减少非自愿上下文切换的数量？这是否取决于 /proc/sys/kernel 中的任何调度参数？

**编辑**：一些回应提出了替代方法。在走这条路之前，我**首先**想了解为什么即使在运行数小时后，我每秒也只能获得一次非自愿的上下文切换。例如，这是由 CFS 引起的吗？如果是这样，哪些参数以及如何？

**EDIT2**：进一步澄清-我想回答的第一个问题如下：为什么我每秒进行一次非自愿上下文切换，而不是说每半秒或两秒切换一次？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T19:27:03.607

这是一个猜测，但有根据 - 因为您使用一个独立的 CPU，所以调度程序不会在其上调度除您自己的任务之外的任何任务，但有一个例外 - 内核中的 vmstat 代码有一个计时器，该计时器在每个任务上调度一个工作队列项CPU 每秒一次来计算内存使用统计信息，这就是您所看到的每秒调度的内容。

工作队列代码足够聪明，如果内核 100% 空闲，则不会调度工作队列内核线程，但如果它正在运行单个任务，则不会。

[您可以使用ftrace](http://www.mjmwired.net/kernel/Documentation/ftrace.txt)验证这一点。如果 sched_switch 跟踪器显示您每隔一秒左右切换一次的实体（该值四舍五入到最接近的 jiffie 事件，并且当 cpu 空闲时计时器不计数，因此这可能会扭曲计时）是 events/CPU_NUMBER 任务（或旧内核的 keventd ），那么几乎 100% 的原因确实是[vmstat_update](http://lxr.linux.no/linux+v3.7.1/mm/vmstat.c#L1161)函数将其计时器设置为在事件内核线程运行时每秒排队一个工作队列项。

请注意，vmstat 设置其计时器的周期是可配置的 - 您可以通过 vm.stat_interval [sysctl](http://linux.die.net/man/8/sysctl)旋钮将其设置为其他值。增加此值会降低此类中断的发生率，但会降低内存使用统计的准确性。

[我在此处](https://github.com/gby/linux/wiki)维护一个 wiki，其中包含对隔离 CPU 工作负载的所有中断源。如果在一个 vmstat 工作队列运行到下一个运行之间没有变化，我也有一个补丁可以让 vmstat 不安排工作队列项目 - 例如，如果你在 CPU 上的单个任务不使用任何动态内存，就会发生这种情况分配。不过，不确定它是否会让您受益——这取决于您的工作量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:13:44.030

我强烈建议您尝试优化代码本身，以便当它在 CPU 上运行时，您可以充分利用它。
无论如何，**我不确定这是否可行**，但无论如何都要尝试一下，让我们知道：

我基本上要做的只是将调度策略设置为 FIFO，然后为进程提供可能的最大优先级。

```
#include<sched.h>
struct sched_param sp = sched_get_priority_max(SCHED_FIFO);
int ret;

ret = sched_setscheduler(0, SCHED_FIFO, &sp);
if (ret == -1) {
  perror("sched_setscheduler");
  return 1;
} 
```

请记住，您的进程所做的任何阻塞语句很可能会导致调度程序将其从 CPU 中取出。

[源](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_MRG/2/html/Realtime_Reference_Guide/sect-Realtime_Reference_Guide-Using_library_calls_to_set_priority-sched_setscheduler.html)
[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)
**编辑：**
抱歉，刚刚注意到`pthread`标签；这个概念仍然成立，所以请查看此手册页： [http ://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedparam.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedparam.3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:39:55.790

如果你的专用 CPU 上每秒一个中断仍然太多，那么你真的不需要通过正常的调度程序。我是否可以建议实时和等时优先级，这可以让您的进程比通常的抢先机制更可靠地安排？

# php - 避免用户使用不同的浏览器或系统登录

> ID：14037071
> 
> 赞同：0
> 
> 时间：2012-12-26T06:58:33.630
> 
> 标签：php, mysql

我有一个由不同用户使用的网络应用程序。我需要做的是避免同一个用户在不同的浏览器或系统中登录。有人可以帮忙吗？？？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:08:07.420

很多答案（即“已登录标志”）都有一个很大的问题！如果浏览器出现问题怎么办？（机器被格式化，缓存/cookies被清除，等等）然后你有一个服务器认为已经登录的用户，但就用户而言……并且无法登录在。您必须添加一个超时，并监视每个请求（以重置超时）。

我建议您每次登录时向用户颁发新凭据。颁发新凭据的行为会使以前的凭据无效。最简单的方法是创建一个（随机）令牌并将该令牌保存到 cookie 和数据库行中。根据数据库值检查 cookie 并确保它是最新的。

请注意，这与其他答案相反（我不清楚这是否与您的意图相反） - 不会阻止用户再次登录，但他之前的登录被禁用。

**编辑：**

我在伪代码中所说的：

```
//to authenticate user
if ($user = sql('select * from users where id = ' . intval($_COOKIE['user_id']) && $_COOKIE['token'] == $user['token']) {
    //user is authenticated. the token in their cookie is the same as the token in the db
} else {
    //user is not authenticated. 
}

//to log user in
if ($user = sql('select * from users where  = ' . intval($_REQUEST['user_id']) && $user['password'] == $_REQUEST['password']) {
    //user is authenticated and can be logged in now. the user id they passed and password match (though you'll probably be accepting email address and hasing the password...).
    $token = rand();
    setcookie('user_id', $user['user_id']);
    setcookie('token', $token);
    sql('update users set token = '$token' where user_id = ' . $user['user_id']);
    //now the token in the db has been updated, and only the user that just logged in has it. other instances of this users login don't have it, so can't authenticate
} else {
    //user is not authenticated and can't be logged in
} 
```

尽管该代码比伪代码更像 PHP，但它并不意味着按原样运行。**您需要**为您的数据库库、表模式进行自定义，确保安全（通过在密码上使用 md5() 等）。我只是想说明这个概念。

**编辑：**如上所述，这种方法的目的是允许用户再次登录，但使他们以前的登录无效。（这与不允许用户第二次登录相反。）无论哪种方式，用户只登录一次——问题是您允许第一次还是最后一次。但是，从您现在的评论来看，这似乎不是您（认为）您想要的。

试图阻止用户第二次登录充满了陷阱。从最简单的设置开始，用户登录，您在数据库中设置一个“isLoggedIn”值，然后在清除该值之前不要让他们再次登录（可能来自您的 logout.php）。（这是其他人的建议——继续并标记他们的答案之一。）如果他们无法注销，您会怎么做？如果他们从桌面登录，然后需要从办公室登录？

您是否禁止他们登录？或者，也许您的礼物是“您确定要登录”消息，并允许他们覆盖之前的登录。如果是这样，您需要一种方法来使之前的登录无效。所以你回到我的象征性建议。（在这种情况下，使用 db 中存在的令牌来表示他们仍然登录到以前的会话（相当于 isLoggedIn），并在他们注销时将其清除。）

是否仍要阻止第二次登录？那么你不能依赖你的用户主动注销。如果他们在办公室怎么办？或者他们从手机登录然后丢失了手机？或者清除他们的cookies。您将不得不依靠超时。不要太长或者用户到办公室时无法登录，也不要太短或者用户每次喝咖啡都必须登录。（会话 cookie 可能对她有帮助，但你不能依赖它们，因为很多人会打开浏览器窗口好几天。）

在这种情况下，每次他们在登录时点击页面时，您都会更新数据库中的 lastActivity。然后检查 lastActivity >= now() - x 分钟。如果没有，那么您将它们注销。当他们尝试登录时，您必须做同样的事情。如果 lastActivity >= now() - x 分钟，您告诉他们他们无法登录。

（你可以依赖 PHP 会话，但我不得不承认我没有足够的经验来配置这些来推荐任何东西。我寻找了一个处理程序以在会话到期时插入，但我没有找到任何看起来很简单的东西，可能是因为会话可能在下一次调用 PHP 页面前几天过期。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:01:45.503

您可以在 mysql 表中有一个标志，例如`login_staus`. 设置为`1`如果用户登录，否则设置为`0`。根据标志，您可以做进一步的事情。这也不是唯一的方法，请与其他人核实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:03:25.633

好吧，您可以在具有用户的表中添加一个标志（字段）。
当用户登录时，设置标志。即设为1。
在允许任何用户登录之前，只需检查标志是1还是0。仅当相应标志为0时才允许用户登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:04:16.657

我会通过mysql

经过

```
creating a filed in user table wtih column logged_in

when user logs in update that to 1 

 when he logs outs set it to 0 
```

并且当用户登录时只需检查logged_in的值是否存在

这只是一个想法，我认为它可以在没有任何 cookie 或会话问题的情况下工作

因为您正在参考不同的计算机和不同的浏览器

# git - 如何在 gitignore 中使用条件

> ID：14037075
> 
> 赞同：0
> 
> 时间：2012-12-26T06:58:49.463
> 
> 标签：git, gitignore

我正在用 git 管理几个文件`pdf`。`graffle`我只想在不存在相同文件名的情况下将`pdf`文件添加到存储库，例如`graffle`

仅在目录中添加`foo.pdf`并`bar.graffle`进入存储库

```
$ ls
foo.pdf
bar.pdf
bar.graffle 
```

如果仅使用 不能完成这样的目标`gitignore`，是否存在任何变通方法？

`bar.pdf`只能`bar.graffle`通过 GUI 中的几个步骤生成，所以我想让它们保持提交。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T07:25:00.603

请注意，它`.gitignore`的存在仅作为提示，`git`哪些文件、目录或文件类型将被`git add`.

但是，`.gitignore`如果您使用`git add -f`.

长话短说，`.gitignore`这是一种相当简单的机制，有助于避免意外添加典型的垃圾文件（如编辑器备份、目标文件、可执行文件等），但它还不够复杂，无法满足您的要求——比如改变行为取决于一些外部条件。

如果您不想要某些文件，请注意不要添加它们，或者添加忽略的文件，`git add -f`从而覆盖现有的简单规则。

或者，您可以创建一些脚本并将其注册为 git 宏，这样`git addc`就可以进行高级过滤。

# jquery - jQuery关于滚动z-index问题的位置：固定

> ID：14037078
> 
> 赞同：0
> 
> 时间：2012-12-26T06:59:03.927
> 
> 标签：jquery, css, z-index

我正在处理父 div 具有 100% 宽度和高度的窗口大小的布局。

它的子 div 有固定尺寸说：400px 溢出：auto 因为我想显示滚动条。

这个子 div 有一个我想添加位置的元素：固定在滚动事件上。

我的问题是每当我添加位置时：使用 jQuery 固定到子 div 内的元素之一

滚动事件，即使是子 div 也会弹出子 div 具有更高的 z-index 和溢出：自动

这是工作[代码和小提琴](http://jsfiddle.net/nWH3S/1/)

这里有什么问题？需要修复什么？？

html

```
<div id="wrapper">
    <div id="content">
        <p id="head">Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
        <p>Lorem ipsum dolor sit amet</p>
    </div>
</div> 
```

CSS

```
body, html {
    height: 100%
}
#wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    background: #bbb;
    z-index: 999
}
#content {
    position: relative;
    width: 400px;
    height: 400px;
    overflow: auto;
    background: #eee;
    z-index: 99
}
p {
    width: 100%;
    padding: 40px;
}
#head {
    background: green
}
.fixed {
    position: fixed;
} 
```

JS

```
$("#content").scroll(function() {
    if( $(this).scrollTop() > 0) {
        $('#head').addClass('fixed');
    } else {
        $('#head').removeClass('fixed');
    }         
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:07:25.220

固定位置始终相对于视口，因此您应用到它的 100% 的宽度将始终做到这一点。

您可以将宽度继承应用于固定元素，这在某些浏览器中可以解决问题，但是由于您在元素上也有填充，因此父宽度也不会解决问题

在这种情况下，您必须将 320px 的宽度硬编码到 p 元素或 javascript 解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:09:17.440

```
Please set 

.fixed {
    position: fixed;
z-index: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:18:35.750

如果有帮助，你可以玩这个：http: [//jsfiddle.net/nWH3S/3/](http://jsfiddle.net/nWH3S/3/)

```
$("#content").scroll(function() {
  if ($(this).scrollTop() > 0) {

    $('#head').addClass('fixed').css({
        width: $("#content").innerWidth()-20+"px"
    });
  } else {
    $('#head').removeClass('fixed').css({
        width: $(this).width()
    });
  }
}); 
```

并检查小提琴。

这个需要像这样修复：

```
p {
  width: 100%;
  padding: 40px 0;// just made the padding for top bottom.
  margin:0;
} 
```

# css - CSS3关键帧动画的位置根据窗口大小变化

> ID：14037084
> 
> 赞同：0
> 
> 时间：2012-12-26T06:59:36.017
> 
> 标签：css, css-animations

我在使用 CSS3 的关键帧动画方面遇到了一些问题。动画图像的位置根据窗口/屏幕大小而变化。我试图找到解决这个问题的方法，但我迷路了。我试图指定一个边界，所以动画只在其中播放，但它不起作用。

请参见[此处](http://www.theprophec.com/tdr)，并尝试调整窗口大小。我知道这与`position:absolute`. 我的最终目标是让空间背景从左向右移动，但如果有意义的话，仍然在中心位置。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:30:24.393

* * *

问题是 margin-left 和 margin-right 属性被设置为 auto ，这会调整 的左边距`tdr-main`，而`space-bg`的动画会修改绝对左边的位置。当窗口被调整到更小的尺寸时，左边距`tdr-main`缩小到 45px，但背景图像的左边位置仍然在 342px 和 450px 之间移动。

如果您嵌入`space-bg`到具有自动边距的同一个容器中，

```
<div id="tdr-main">
        <div id="space-bg">
        </div>
        [...]
</div> 
```

那么两者都将保持居中，并且 space-bg 上的位置将相对于居中的容器 div。只需使用具有绝对或相对定位的 z-index 来保持正确堆叠。

# php - 将滑块中的缩略图链接到主显示图像并正确弹出

> ID：14037087
> 
> 赞同：3
> 
> 时间：2012-12-26T07:00:06.410
> 
> 标签：php, jquery, html, joomla2.5

我想在这里实现三件事，即

1.  灯箱
2.  缩略图滑块
3.  云变焦

我能够使 3) 云缩放和 2) 缩略图滑块[正常工作](http://webclicks.biz/test/365/index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=143&virtuemart_category_id=7)，但我不确定如何将滑块中的缩略图链接到主显示图像并弹出正确的选择。

任何人都可以发光吗？提前致谢！

### 我在顶部声明了这一点：

```
<pre>$document->addScriptDeclaration("     
jQuery(document).ready(function() {
     jQuery('#flexible-zoom-additionalImagesWrap').jCarouselLite({
                btnNext: '.next',
                btnPrev: '.prev',
                visible: 2,
                scroll: 1,
                circular: false             
                 });     
  });

jQuery(document).ready(function() { 
    jQuery('.flexibleGallery').colorbox({rel:'flexibleGallery'});
   });   

jQuery.fn.flexibleZoom.defaults = {
        position: 'right',
        zoomWidth: '360',
        zoomHeight: '470',
        lensOpacity: 0.5, 
        smoothMove: 7,
        adjustX: 10,
        adjustY: 0,
        showTitle: true,        
    }; 
");
</pre> 
```

### 这里是 html/php 代码

```
<?php // Product Main Image
if (!empty($this->product->images[0])) {
?>
<div class="main-image">
  <?php 
echo $this->product->images[0]->displayMediaFull('class="medium-image modal" id="medium-image"', true, 'class="flexible-zoom"', true, 'alt="Zoom Type 1: Standard"', true); ?>
</div>
<div class="flexible-zoom-magnify"> <a id="flexible_lightbox" class="flexibleGallery"> <span class="flexible-zoom-magnify"></span> </a> </div>
<?php } // Product Main Image END ?>

<?php
// Showing The Additional Images
if (!empty($this->product->images) and count ($this->product->images)>1) {
    ?>
<div class="additional-images"> 
  <?php          
     // Product Images slider    
     if($this->product->images[0]->virtuemart_media_id!=0 && count($this->product->images)>0)  {
        echo " < div id=\"flexible-zoom-additionalImagesWrap\" class=\"flexible-zoom-additionalImagesWrap\">";      
        echo " <div class=\"more-views-arrow prev\">
</div>";        
        echo " <div class=\"flexible-zoom-additionalImages\">";
         echo "<ul class=\"additionalImagesslider\">";
         foreach($this->product->images as $a=>$b){
            $imgsrc = JURI::root().$b->file_url;
            $imgsrc_thumb = JURI::root().$b->file_url_thumb;    
            echo "<li class=\"flexible-zoom-additionalImages-slide\">
            <a name=\"$imgsrc_thumb\"  rel=\"useZoom: 'zoom1', smallImage: '$imgsrc_thumb\" class=\"flexible-zoom-gallery\" href=\"".$imgsrc."\">
            <img class=\"zoom-tiny-image-additional\" src=\"".$imgsrc_thumb."\"/>
            </a>
            <a class=\"flexibleGallery cboxElement\" href=\"".$imgsrc."\"></a>
            </li>";
         }       
         echo "</ul>";
         echo "</div>";
        echo "<div class=\"more-views-arrow next\"></div>";     
         echo "</div>";  }
     ?>
  <div class="clear"></div>
</div>
<?php
} // Showing The Additional Images END ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:02:11.947

我有一个我认为你想要的实时实施工作。看看[这里](http://www.flyhobbies.com/Stick-40-Plus)。

我有一个可以在鼠标悬停时放大的主图像，主图像下方最多 6 个缩略图，单击时将显示为主图像，并且在主图像下方有一个链接，可单击以在灯箱中放大。甚至可以让缩略图成为代替主图像播放的视频。

# c++ - 解释器始终可以使用源代码是什么意思？

> ID：14037090
> 
> 赞同：4
> 
> 时间：2012-12-26T07:00:35.613
> 
> 标签：c++, compiler-construction, interpreter

来自**C++ 中的思考 - 卷。1**：

> 口译员有很多优点。从编写代码到执行代码的转换几乎是立即***的，并且源代码始终可用***，因此当发生错误时解释器可以更加具体。

粗线是什么意思？
这是否意味着除非整个程序都在内存中，否则解释器无法工作？这意味着我们不能将程序划分为模块，然后在需要时解释模块（就像我们对编译器所做的那样）？

如果是，那么这背后的原因是什么？

* * *

## 更新：

来自**C++ 中的思考 - 卷。1**：

> **大多数解释器要求将完整的源代码一次全部带入解释器。**

那么，这是否表明我在上面写的内容？

![在此处输入图像描述](../Images/26ecb273db989c6592a9e74237ebe33f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:05:16.487

对于*编译语言*，当你运行程序时，你没有源代码——你已经编译了机器/字节码，它在机器上执行（或者在 Java 的情况下是 VM）。

解释器处理*源代码*并立即解释它并使用某种内部机制执行它。由于他们的工作数据是源代码本身，因此他们始终可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:07:24.963

> 这是否意味着除非整个程序都在内存中，否则解释器无法工作？

不，整个程序不需要在内存中。零件在需要时被加载到内存中。

> 意味着我们不能将程序分成模块，然后在需要时解释模块（就像我们对编译器所做的那样）？

你可以很好地模块化你的程序。但是当解释器需要时，所需的模块应该可用。

和粗线：**源代码始终可用**

这意味着它是运行的源代码，即在运行时转换为机器特定指令。*逐行*转换，而无需转换为不同的（中间）格式。（由编译器完成）

来自维基百科：

> [解释器](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)可以是使用以下策略之一执行程序的程序：
> 
> 1.  直接执行源代码
> 2.  将源代码转换为一些有效的中间表示（代码）并立即执行
> 3.  显式执行由编译器生成的存储的预编译代码[1](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)，该编译器是解释器系统的一部分
> 
> **效率**
> 
> 解释器的主要缺点是，当程序被解释时，它的运行速度通常比编译时慢。速度差异可能很小或很大；通常是一个数量级，有时甚至更多。在解释器下运行程序通常比运行已编译的代码需要更长的时间，但解释它所花费的时间可能比编译和运行它所需的总时间要少。当编辑-解释-调试周期通常比编辑-编译-运行-调试周期短得多时，这在原型设计和测试代码时尤其重要。

# eclipse - XSD 导入另一个 XSD 文件

> ID：14037091
> 
> 赞同：1
> 
> 时间：2012-12-26T07:00:54.717
> 
> 标签：eclipse, xsd

我对导入的 xsd 有问题。我有 3 个 xsd service.xsd、header.xsd 和 inputmessage.xsd inputmessage.xsd 包含根元素。

service.xsd 导入 header.xsd 和 inputmessage xsd。

在 Eclipse 中生成 service.xsd 的示例 xml 时，我收到以下错误“不存在根元素，因为提供的方案没有全局元素”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:28:24.070

您看到的错误通常是由于使用了未声明外部元素（“根元素”）的模式文档。您正在使用的模式可能只定义复杂类型（可能带有封闭的元素）。创建元素wrt文件的意义在于，元素定义了xml文件中某个类型的具体实现（即schema中的元素名称成为xml文件中的标签名称）。复杂类型定义了适用于该类型元素的结构。

在您的 service.xsd 文件中，尝试插入以下内容（您可能需要使用前缀绑定以与您的架构文件保持一致）：

```
<element name="rootElement" type="tns:LocallyDefinedType" /> 
```

其中“tns”绑定到模式目标命名空间，“LocallyDefinedType”是模式文档中定义的复杂类型的名称（您希望在生成的 xml 文档中看到的类型）。

如果这没有帮助，请发布您的模式文档（或一些适当的虚拟示例），并且可以提供更有针对性的元素声明。

# php - 读取 CSV 文件或进行 MySQL 查询

> ID：14037092
> 
> 赞同：0
> 
> 时间：2012-12-26T07:01:11.333
> 
> 标签：php, mysql, csv

我正在制作一个 CMS，一旦用户搜索某个内容，就会使用 MySQL 生成一个缓存文件 (CSV)，然后 PHP 会包含相同的 CSV 并为相同的搜索提供服务。

现在我想允许用户使用 jQuery 从同一个缓存/静态文件中过滤数据。

我有两种选择

1.  进行数据库查询以根据用户的过滤参数生成结果
2.  读取该缓存/静态（CSV 格式）并仅使用 PHP 根据用户参数生成结果。

我的数据库和 CSV 文件在 MySQL 数据库中都很小，大约 2000 行，在 CSV 文件中最多 500 行。CSV 文件的平均长度约为 50 行。将有几个（比如大约 100 个）CSV 文件用于不同的搜索。

哪种技术更快更有效？我在共享主机上。

搜索结果就像电子商务网站上的产品信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:37:26.090

因为你在一个共享主机上，总数2K不是问题，但是硬盘的IO是问题。

把数据库搜索结果放到内存中，比如mysql内存引擎表，让redis用TTL管理缓存更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:58:12.957

共享主机上下文中的 MySQL 服务器大部分时间都超负荷了，有时可能非常慢/无响应。

如果你想解决这个问题，你可以让你的 php 脚本从数据表中为当天的第一个用户创建一个 CSV 文件，然后在一天的剩余时间里读取 CSV 文件。

# javascript - 无法在动态加载的页面上启动 .datepicker() 函数

> ID：14037093
> 
> 赞同：0
> 
> 时间：2012-12-26T07:01:21.890
> 
> 标签：javascript, jquery, datepicker

我对 JS 还是很陌生，并且在让 JS 在动态加载的页面上运行时遇到了一些问题。

通过 .load 方法动态加载“在线申请”页面后，我无法将 jquery 日期选择器附加到“appDataOfBirth”输入字段。在阅读了几篇类似的帖子后，我尝试了诸如 .live 之类的东西，但是即使这适用于说警报，它也不会初始化日期选择器。

我一直在玩下面的链接，其中“applyOnlineBtn”是打开显示表单的应用程序部分的 carasel 链接——但这似乎不起作用。

```
$('#applyOnlineBtn').live("click", function(){
alert('test message');
$("#appDateOfBirth").datepicker();
}); 
```

如果有人可以帮助我完成这项工作，将不胜感激。

资源： 网址：[http ://www.kingsroad.net.au/qutproject/index.php](http://www.kingsroad.net.au/qutproject/index.php)

将内容加载到中间 div 的 JS 位于 kingsroad.net.au/qutproject/js/general.js （这是我尝试使用我的代码激活日期选择器的地方）。

在线申请内容位于 kingsroad.net.au/qutproject/content/applyOnline.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:04:33.803

你检查过javascript错误控制台吗？：

```
Uncaught TypeError: Object [object Object] has no method 'datepicker 
```

因此，请检查您的日期选择器库，也许您的页面中没有包含日期​​选择器库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:27:49.070

你可以使用

```
$('your_element').load(URL_TO_LOAD,function(){
  $("#appDateOfBirth").datepicker();
}); 
```

这会将 datepicker 应用于新加载的内容。

# java - 在 Netbeans 中查找非法字符 \0

> ID：14037095
> 
> 赞同：3
> 
> 时间：2012-12-26T07:01:26.600
> 
> 标签：java, regex, netbeans

我在 netbeans 中打开了一个文件，最后一行用 character 填充`\0`。该字符仍然不可见，并导致 netbeans 给出“非法字符”错误。

我尝试在 Nebeans 中查找`[\\0]`, `[\0]`, `\0`,`\\0`并检查正则表达式但没有运气。`[\0]`并`\0`给出“非法八进制转义序列错误”。

我可以从这个文件中使用 Notepad++ 轻松查找和替换 \0。如何在 Netbeans 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:52:43.467

，`\0`我假设您的意思是`NUL`ASCII 值为零的 ASCII 字符（或等效的 Unicode 字符，其在 Java 中的转义序列为`\u0000`）。

要使用正则表达式在 Netbeans 查找对话框中查找此字符，要使用的正确转义序列是控制序列`\c@`、十六进制序列`\x00`、八进制序列`\00`或 Unicode 序列`\u0000`。请注意，这些序列中的每一个的格式都很重要，并且由[`Pattern`class](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)记录。您尝试使用`\0`无效，因为该序列表示八进制序列的开头，但您没有提供实际的八进制数（斜线后面的第一个零是一个标记，实际上不是八进制数的一部分）。典型的 *Nix`\0`转义不被`Pattern`.

例如，`\u0000`在“查找和替换”函数的“查找：”字段中输入*(NUL)*，并在“正则表达式”选项选中的情况下，将`NUL`字符的所有实例替换为五个-字符串*(NUL)*。这将适用于单个打开文件的查找和替换，或使用*编辑*|整个项目。*在项目中替换...*对话框。

# php - 函数Mysql-connect错误

> ID：14037096
> 
> 赞同：0
> 
> 时间：2012-12-26T07:01:35.177
> 
> 标签：php, mysql

我在 connection.php 文件上遇到问题，该文件在本地主机上运行良好，但是当上传到托管时出现如下错误：

```
Warning: mysql_connect () [function.mysql-connect]: Can not connect to local MySQL server through socket '/ var / lib / mysql / mysql.sock' (2) in / home/content/84/10207284/html / koneksi.php on line 6 
```

我的脚本是这样的：

```
<? php
    $server = "localhost";
    $username = "*******";
    $password = "******";
    $database = "*****";
    mysql_connect ("$server", "$username", "$password") or die ("Failed");/ /  the error Line
    mysql_select_db ("holidayhappy") or die ("Database not found");
?> 
```

我曾尝试使用服务器 IP ann 端口更改 localhost，但它也不起作用。

有人可以帮我解决这个问题吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:30:33.467

如果您使用服务器托管，并且 mysql 服务器安装在同一主机上

然后尝试 servername 作为 localhost

如果没有，请确保启用远程访问

按照下面提到的链接中的教程

[http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

# image - 是否可以在 Mac 中提供图像动画？

> ID：14037105
> 
> 赞同：0
> 
> 时间：2012-12-26T07:02:31.327
> 
> 标签：image, macos, animation, core-animation

我想在 mac 应用程序中提供图像动画，就像我有图像数组一样，我想为这些图像设置动画，那么我如何在 Mac 应用程序中提供该动画。

提前致谢....

# android - android中的ListView分页

> ID：14037108
> 
> 赞同：3
> 
> 时间：2012-12-26T07:02:57.153
> 
> 标签：android, listview, paging

如何在 android 中为我的 ListView 进行这样的分页：

```
<< LAST   Page 1 Of 5   NEXT >> 
```

我一直在谷歌搜索并没有找到任何解决方案，请建议。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T07:08:12.803

这是一个演示试试这个>

[http://www.androidhive.info/2012/03/android-listview-with-load-more-button/](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

[如何在android的listview中实现分页？](https://stackoverflow.com/questions/10553437/how-can-i-implement-paging-in-listview-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:28:13.360

带有分页示例的列表视图

[简单视图寻呼机](http://techdroid.kbeanie.com/2011/10/simple-viewpager-for-android.html)

[Android分页示例](https://github.com/paulononaka/Android-PaginationLayoutSample)

[列表视图的分页](https://stackoverflow.com/questions/6465978/pagination-for-listview-in-android)

[用于列表视图和分页的无尽适配器](http://androidtrainningcenter.blogspot.in/2012/03/endless-apapter-in-android-listview.html)

# javascript - Media Source Api 不适用于自定义 webm 文件（Chrome 版本 23.0.1271.97 m）

> ID：14037112
> 
> 赞同：4
> 
> 时间：2012-12-26T07:03:13.707
> 
> 标签：javascript, html, video, streaming, media-source

我指的是此[链接上给出的媒体源 api 演示](http://html5-demos.appspot.com/static/media-source.html)

对于给定的测试 webm 文件，它工作正常，但是当我尝试将文件名更改为自定义 webm 文件时，代码停止工作。

它正在生成以下错误：`Uncaught Error: INVALID_STATE_ERR: DOM Exception 11`在以下代码中： `sourceBuffer.append(new Uint8Array(e.target.result));`

为了检查自定义 webm 文件是否正常工作，我创建了一个测试页面，我在其中定义了一个包含该自定义 webm 文件源的视频标签。当我运行代码时，它工作正常。

我无法理解这种奇怪行为的原因。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T01:30:03.987

最可能的问题是您的 WebM 文件包含不以关键帧开头的集群。

在 Chrome 开发通道构建（即 Chrome 25 或更高版本）中，您可以通过以下步骤验证这一点。

1.  在另一个选项卡中打开 chrome:media-internals。
2.  返回带有测试页的选项卡并重新加载它。
3.  当错误再次发生时，切换回 chrome:media-internals 选项卡并在“活动媒体播放器：”标题下查找底部条目。它应该具有您传递给 video 元素 src 属性的相同 blob: URL。
4.  单击 blob: URL 以展开播放器数据。
5.  单击“日志：”条目以显示播放器日志数据。
6.  在“事件：”列中搜索具有“MEDIA_SOURCE_ERROR”的条目。这些条目应提供有关传递给浏览器的内容有什么问题的信息。

如果您看到类似“媒体片段不是以关键帧开头”的消息。那么这意味着您的文件具有不以关键帧开头的集群。这在 FFmpeg 生成的内容中很常见。您可以通过以下方式之一修复文件：

1.  [运行WebM自适应流指南](https://sites.google.com/a/webmproject.org/wiki/adaptive-streaming/instructions-to-playback-a-webm-dash-presentation)2.2.5节中提到的sample_muxer程序
2.  运行我作为[mse-tools](http://github.com/acolwell/mse-tools)项目的一部分编写的 mse_webm_remuxer 程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T12:29:02.863

**更新：在我的案例中没有显示内部错误（接受的答案建议检查）但仍然是同样的问题**

当我尝试使用**媒体源扩展**(MSE)通过**MediaRecorder API**播放录制的 .webm 文件时遇到了同样的问题。Chrome (51) 录音格式错误，Firefox (46) 似乎还可以。

 **要使其正常工作，您必须修复 .webm 文件中的提示：

1.  克隆[https://github.com/webmproject/libwebm](https://github.com/webmproject/libwebm)
2.  确保您的 cmake 版本 >= 3.2 ( [https://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04](https://askubuntu.com/questions/610291/how-to-install-cmake-3-2-on-ubuntu-14-04) )
3.  `cmake .`
4.  `make`
5.  `./sample_muxer -i original.webm -o fixed.webm`
6.  将 fixed.webm 加载到 DASH / 您自己的播放器中！

希望它对某人有所帮助。在没有 DASH 关键字的情况下搜索任何信息非常困难（我没有使用 DASH，仅使用相同的底层技术 - MSE）:)**

# java - 如何在 StringBuilder.AppendFormat 中存储特殊字符“{”和“}”

> ID：14037114
> 
> 赞同：0
> 
> 时间：2012-12-26T07:03:24.830
> 
> 标签：java, web-services, rest

我正在使用**RESTFUL WEBSERVICES**创建一个项目，但在我提供时在 url

```
url: "http://localhost:8080/RestfulWebservicesNewVersion2/REST/webservices/GetFriend" 
```

我得到这个输出：

```
"\u0027EmployeeList\u0027:{{\u0027emp_id\u0027:\u00272\u0027,\u0027emp_ename\u0027:

\u0027rkjha\u0027,\u0027emp_phoneno\u0027:\u00273232323232\u0027,\u0027emp_email\u0027 
```

你能告诉我如何删除“U0027”部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:00:34.020

您可以使用[java.text.normalizer](http://download.oracle.com/javase/6/docs/api/java/text/Normalizer.html)删除不在“正常”ASCII 字符集中的 Unicode 字符。

# iphone - Restkit 版本 0.20.0-pre2。: 问题：post object 中没有键。如何发布？

> ID：14037118
> 
> 赞同：0
> 
> 时间：2012-12-26T07:03:43.350
> 
> 标签：iphone, objective-c, ios, ipad, restkit

我有一个带有值数组作为输入的发布请求。问题是，该数组没有用于发布内部值的键！如何设置映射？

必须发这个

```
 "group_ids": [
                "1",
                "2",
                "3"
        ] 
```

如何使用 restkit 2.0 映射值并发布帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:46:18.207

好的，经过大量搜索和实验，找到了解决问题的方法。无需为里面的值添加映射！

只需在响应主对象中创建一个`NSMutableArray`，然后将其映射到根键 [即`group_ids`] 到可变数组名称。

这可以正确映射值并且帖子工作正常

# xml - 我需要来自这个 XML 的 xslt 动态菜单

> ID：14037121
> 
> 赞同：0
> 
> 时间：2012-12-26T07:03:56.617
> 
> 标签：xml, xslt

```
<xml>
  <HeaderMenu>
    <headerMenuId>1</headerMenuId>
    <headerMenuName>Enterprise</headerMenuName>
    <headerMenuSort>1</headerMenuSort>
    <subMenu>
      <subMenuId>1</subMenuId>
      <submenuname>Full fill ment </submenuname>
      <submenuDispayOrderId>1</submenuDispayOrderId>
      <PageSections>
        <pagesectionId>1</pagesectionId>
        <PageSecName>First Sub-Navigation</PageSecName>
        <PageSecDescription>Dummy</PageSecDescription>
        <PageSecDispayOrderId>1</PageSecDispayOrderId>
      </PageSections> 
    </subMenu> 
 </HeaderMenu> 
</xml> 
```

我需要来自这个 XML 的 2 个级别的 xslt 动态菜单和子菜单。我在这里需要这样的输出：

```
Enterprise
  ->Full fill ment 
             ->First Sub-Navigation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:32:14.427

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:template match="/xml/HeaderMenu">
  <xsl:value-of select="headerMenuName" />
  <xsl:apply-templates select="subMenu" />
</xsl:template>

<xsl:template match="subMenu">
  -> <xsl:value-of select="submenuname" />
  <xsl:apply-templates select="PageSections" />
</xsl:template>

<xsl:template match="PageSections">
    -> <xsl:value-of select="PageSecName" />
</xsl:template>

</xsl:stylesheet> 
```

XSLT 是一种声明性语言：您不必使用条件或循环。始终尝试使用`apply-templates`代替`xsl:for-each`和 xpath 条件代替`xsl:if`. 请注意，如果您的 XML 文件结构是递归的，这将变得非常强大。您的代码将非常通用且非常简短。

# javascript - Yabble - 访问由 yabble 加载的函数

> ID：14037123
> 
> 赞同：0
> 
> 时间：2012-12-26T07:04:17.513
> 
> 标签：javascript

我遇到了我无法解决的 Yabble 问题。

从我的主要 html 中，我使用 yabble 加载我的所有 js

```
<script>
require.setModuleRoot('./javascript/');
require.run('main')
</script> 
```

我有一堆js（与gamejs相关）。在一个文件中，我有函数 changeSimulationSettings()。稍后在同一页面中，我想获取用户输入并访问 gamejs 对象并更改它们的状态。我遇到的问题是我无法调用 changeSimulationSettings。它没有在当前上下文中定义。Yabble 做了很多魔法，我无法找到它的定义或访问方式。

```
<div>
<button type="button" onclick="updateSettings()">Update-Settings</button>
</div>
<script type="text/javascript">
function updateSettings(){
        // access function defined in a js loaded by yabble 
        i.e. changeSimulationSettings()
}
</script> 
```

所有的 js 肯定都被加载了，因为我有从不同文件相互调用的函数，这些函数确实有效。但是，我无法从入口网页中嵌入的 js 调用任何内容。

任何帮助将不胜感激，因为我已经坚持了几个小时。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:30:36.393

模块中定义的代码是隔离的，不能全局使用。

我会反过来做：从模块中附加一个事件处理程序。不要使用“onclick=”，而是在`changeSimuSettings`可用的模块中执行类似的操作（例如，使用 jquery 或纯 DOM）：

```
$('button').click(changeSimulationSettings) 
```

这更干净，您不会泄漏全局变量。如果您坚持按照自己的方式进行操作，您可以导出`changeSimulationSettings`到全局并使用您已有的代码。像这样（我不建议这样做）：

```
window.changeSimulationSettings = function() {... 
```

# javascript - 使用 JavaScript 动态显示和隐藏多个 div

> ID：14037125
> 
> 赞同：0
> 
> 时间：2012-12-26T07:04:25.767
> 
> 标签：javascript, jquery, html

[在这里](http://jsfiddle.net/saikiranmarripati/f8VL8/9/)，我有四个`td`可点击的 s，还有四个`td`在其中包含`id`s 和相关数据的 s。我想在点击相关 clickable 时显示数据`td`。这是我想用 JavaScript 做的。

这是我的 JavaScript 代码：

```
var _hidediv = null;
function showdiv(id) {
    var div = document.getElementById(id);
    div.style.display = 'block';
    if(_hidediv)
        _hidediv();
    _hidediv = function () {
         div.style.display = 'none';
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:16:24.513

这是你需要的吗？

[http://jsfiddle.net/f8VL8/11/](http://jsfiddle.net/f8VL8/11/)

```
var showed = 'news1';

function showdiv(id) {
    if(showed && showed !== id) {
        document.getElementById(showed).style.display = 'none';
    } 
    document.getElementById(id).style.display = 'block';
    showed = id;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:24:26.980

在 jquery 版本中重写

[http://jsfiddle.net/f8VL8/13/](http://jsfiddle.net/f8VL8/13/)

## js

```
$('.content').click(function(){
    var target = $(this).attr('href');
    //console.log(target);
    if(target){
        $('.result td').hide();
        $(target).show();
    }
}); 
```

## HTML

```
<tr >
      <td><a href="#news1" class="content" >iCMS</a></td>
 </tr>
 <tr>
       <td><a href="#news2" class="content" >SMSC</a></td>
 </tr>
 <tr>
       <td><a href="#news3" class="content">SMS Gateway</a></td>
 </tr>
 <tr>
      <td><a href="#news4" class="content">WAP Gateway</a></td>
 </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:30:43.840

在 JSfiddle 的左侧，更改`onLoad`为`no wrap (head)`，您的脚本将起作用。

[http://jsfiddle.net/f8VL8/14/](http://jsfiddle.net/f8VL8/14/)

# objective-c - 将 NSData 转换为 NSString 的空结果

> ID：14037129
> 
> 赞同：3
> 
> 时间：2012-12-26T07:04:53.687
> 
> 标签：objective-c, ios, asyncsocket

转换`NSData`为`NSString`. 我正在使用`UTF8Enconding`，但结果是`null`！

这是我收到的数据，`<100226ab c0a8010b 00000000 00000000>`它必须是`192.168.1.11`或`192.168.1.17`。

这是我用来转换的方法：

```
 NSString *ipAddress = [[NSString alloc] initWithData:address encoding:NSUTF8StringEncoding]; 
```

有什么不对的吗？！

顺便说一句，这是图书馆的`did receive data`代表。`GCDAsyncUdpSocket`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:12:43.443

从以下文档`GCDAsyncUdpSocket`：

> 该`localAddress`方法返回包装在 NSData 对象中的 sockaddr 结构。

以下代码将数据解包为[sockaddr 结构](http://pubs.opengroup.org/onlinepubs/009696799/basedefs/sys/socket.h.html)，并将 IP 地址转换为`NSString`. 它适用于 IPv4 和 IPv6 地址。

```
#include <sys/socket.h>
#include <netdb.h>

NSData *data = ...; // your data
NSLog(@"data = %@", data);

// Copy data to a "sockaddr_storage" structure.
struct sockaddr_storage sa;
socklen_t salen = sizeof(sa);
[data getBytes:&sa length:salen];

// Get host from socket address as C string:
char host[NI_MAXHOST];
getnameinfo((struct sockaddr *)&sa, salen, host, sizeof(host), NULL, 0, NI_NUMERICHOST);

// Convert C string to NSString:
NSString *ipAddress = [[NSString alloc] initWithBytes:host length:strlen(host) encoding:NSUTF8StringEncoding];
NSLog(@"strAddr = %@", ipAddress); 
```

*输出：*

```
data = <100226ab c0a8010b 00000000 00000000>
strAddr = 192.168.1.11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:17:27.597

这不是字符串响应。这是二进制数据。如果考虑`<100226ab c0a8010b 00000000 00000000>`，请查看`coa8010b`：`c0`十六进制等于十进制的 192，`a8`= 168、`01`= 1 和`0b`= 11。简而言之，这是 192.168.1.11 的二进制表示，而不是字符串表示。

您可能需要更仔细地检查`GCDAsyncUdpSocket`文档以了解您应该得到的响应的性质，因为它显然是二进制数据，而不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:11:46.283

我猜编码有问题。我也遇到过类似的问题并通过以下方式解决：

```
NSString *responseString =[[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUnicodeStringEncoding]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T13:29:34.783

使用以下方法找到了一种更快的方法`inet_ntoa()`：

```
//Get the bytes from the data and cast it to the correct struct
struct sockaddr_in *addr = (struct sockaddr_in *)[address bytes];
//inet_ntoa converts from the binary format to a C string
NSString *IP = [NSString stringWithCString:inet_ntoa(addr->sin_addr) encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T07:18:43.600

```
First try with other encoding formats available

 1\. NSASCIIStringEncoding
 2\. NSMacOSRomanStringEncoding
 3\. NSShiftJISStringEncoding.

even if it not works,try like the following ways

 1\. NSData *data = [NSData dataWithContentsOfURL:URL];
// Assuming data is in UTF8.
NSString *string = [NSString stringWithUTF8String:[data bytes]];

 2\. This is like as you done.

// if data is in another encoding, for example ISO-8859-1
NSString *string = [[NSString alloc]
            initWithData:data encoding: NSISOLatin1StringEncoding]; 
```

# python - 编写 Python 等效的 Perl 代码

> ID：14037131
> 
> 赞同：2
> 
> 时间：2012-12-26T07:05:03.100
> 
> 标签：python, perl, http

我对 perl 一无所知，但是从一个大的 perl 脚本中，我设法获取了相关部分并发出了 HTTP 请求。因此，这个 perl 代码可以完美运行。

```
#!/usr/bin/perl -w

use strict;
use LWP::UserAgent;
use HTTP::Request::Common;

my $ua = new LWP::UserAgent;

my $request = "X-CTCH-PVer: 0000001\r\n";

my $method_url =  "http://localhost:8088/ctasd/GetStatus";
my $response = $ua->request (POST $method_url,Content => $request);

my $data = $response->status_line . "\n";
print $data;
print $response->content; 
```

上面的代码输出：

```
200 OK
X-CTCH-PVer: 0000001 
```

据我了解，它正在对具有指定数据的 URL 进行 POST。有了这个基础，我的 python 代码看起来像：

```
#!/usr/bin/python

import urllib

url = "http://localhost:8088/ctasd/GetStatus"
data = urllib.urlencode([("X-CTCH-PVer", "0000001")])

print urllib.urlopen(url, data).read() 
```

但是，这将返回响应为：

```
X-CTCH-Error: Missing protocol header "X-CTCH-PVer" 
```

请帮助我制作与 perl 代码等效的 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:08:59.253

所以，实际情况是，`$request`Perl 中的 POST 数据实际上是作为 POST 数据发送的，没有任何更改。现在我明白了为什么`content`Perl 中的名称是这样的。

```
#!/usr/bin/python

import urllib

url = "http://localhost:8088/ctasd/GetStatus"
print urllib.urlopen(url, "X-CTCH-PVer: 0000001").read() 
```

工作。在两种情况下捕获流量并在wireshark中分析后，我实际上发现了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:09:37.440

错误是因为您没有发送标头，您正在制作/发送 urlencoded 字符串，因此该函数`urllib.urlencode`

尝试使用实际标头设置请求：

```
#!/usr/bin/python

import urllib2

request = urllib2.Request("http://localhost:8088/ctasd/GetStatus", headers={"X-CTCH-PVer" : "0000001"})
contents = urllib2.urlopen(request).read() 
```

# bash - 如何在 shell 脚本中测试我是否在 Scratchbox2 中运行

> ID：14037132
> 
> 赞同：1
> 
> 时间：2012-12-26T07:05:06.547
> 
> 标签：bash, cross-compiling, embedded-linux, scratchbox

在旧的[Scratchbox](http://scratchbox.org/faq/faqlist.html)中，可以执行以下操作：

```
if [ -f /targets/links/scratchbox.config ]; then 
    echo "here goes my sbox-dependent stuff" 
fi 
```

但是[Scratchbox2](http://maemo.gitorious.org/scratchbox2)呢，有没有办法找到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:44:15.077

如何测试环境变量'LD_PRELOAD'

```
if [[ $LD_PRELOAD =~ "sb2" ]]; then 
    true # is running under sb2
fi 
```

# javascript - 无线安装需要 IPA 文件 + plist？

> ID：14037135
> 
> 赞同：0
> 
> 时间：2012-12-26T07:05:25.763
> 
> 标签：javascript, ios, html, ios5

我遇到了一个问题，我有一个 ipa 文件，我需要为可以共享的无线安装程序准备这个文件。我有一个windows环境。我需要单独上传一个 .ipa 文件。但是我从各种博客中了解到，我需要创建具有捆绑标识符、版本和应用程序 URl 的 .plist 文件。根据我的调查，我发现这些信息在 .ipa 文件中可用，它存储在 Info.plist 文件中，在 .ipa 中。我想知道如何在 javascript 环境中从 .ipa 文件中读取这些信息并准备无线安装所需的 plist 文件。

请问有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:26:00.580

当您发布您的应用程序以进行企业分发时，将为您生成您关心的 .plist 文件（与 .ipa 一起）。如果您确实想使用 Ad Hoc 证书进行分发，只需在签署应用程序以进行企业分发时使用 Ad Hoc 证书。

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/8439127/ios-enterprise-distribution-through-ota)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:21:58.607

那么你收到ipa文件了吗？然后，您需要确保您的设备已链接到它所在的帐户。然后，您可以将 ipa 文件导入 iTunes（mac 或 windows）同步您的设备，它就会在那里。

所有设置都是通过网络浏览器中的临时门户完成的。一旦您拥有了 ipa 文件并使用正确的证书（无论如何都需要）对其进行签名，您就可以开始使用了。info.plist 或任何其他 plist 不再需要 - 这是应用程序的一部分，可以由任何 ios 设备读取。

如果您想在比构建 ipa 文件之前计划的更多设备上安装证书，那么证书将是您的主要问题。

# html - 用于就地编辑的 CSS

> ID：14037136
> 
> 赞同：0
> 
> 时间：2012-12-26T07:05:39.553
> 
> 标签：html, css

如何创建可编辑的标签？我在表格中显示数据，并希望为显示的数据提供就地编辑。我可以使用哪些 CSS 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:07:58.717

在此处放置一个文本输入框，使其背景与其容器的背景相同，并在其上放置0边框，并使用与表格中其他项目相同的字体样式和颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:08:27.893

> 我可以使用哪些 CSS 样式？

这不是真正的 CSS 问题（除非您的问题仅与实现特定样式有关）。

你可以：

1.  使所有表格单元格包含输入。这有一个（可能很重要的）缺点，即如果表单已发布，所有数据都将提交到服务器。我不会推荐这种方法，除非表格很小或者您从未完全提交整个页面。

2.  将标签更改为单击时的输入。提交表单后，此值现在将成为请求的一部分。

3.  将标签更改为输入以响应其他地方的操作（例如聚焦行、单击行旁边的编辑按钮等）

4.  在元素上设置[contenteditable="true" 。](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)这允许丰富的格式，但也要求您跟踪用户所做的更改；除非将它们放入表单域，否则它们不会被提交到服务器。

您可能需要/需要一段 JavaScript 来将标签更改为输入（#2 和 #3）。您将需要 JavaScript 以使用方法 #4 将数据发送到服务器。

# python - 在 Python 2.7 中使用嵌套生成器表达式

> ID：14037145
> 
> 赞同：5
> 
> 时间：2012-12-26T07:06:08.600
> 
> 标签：python, google-app-engine

在 appengine 应用程序中，我想为对象列表构建一组所有属性名称。这应该相当简单：

```
users = security.User.all().fetch(1000)
props = set([k for k in u.properties().keys() for u in users]) 
```

但是，上面的代码会导致错误：

```
File "/Users/paulkorzhyk/Projects/appengine-flask-template/app/app.py", line 70, in allusers
props = set([k for k in u.properties().keys() for u in users])
UnboundLocalError: local variable 'u' referenced before assignment 
```

在调试器中进行了一些实验后，我注意到添加一个虚拟表达式可以修复代码：

```
users = security.User.all().fetch(1000)
[u.properties().keys() for u in users]
props = set([k for k in u.properties().keys() for u in users]) 
```

这对我来说非常违反直觉，为什么原始版本在 Python 2.7 中失败了？为什么在中间添加“无用”表达式可以解决问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T07:08:50.640

只需更改评估顺序

```
props = set([k for k in u.properties().keys() for u in users]) 
```

到

```
props = set([k for u in users for k in u.properties().keys() ]) 
```

你也不需要列表推导，但带有集合推导的生成器表达式可以在这里工作

```
props = set(k for u in users for k in u.properties().keys() ) 
```

评价顺序是从右到左

在你原来的表达

```
set([k for k in u.properties().keys() for u in users]) 
```

可以分解为

```
for k in u.properties().keys(): # Here u is undefined
    for u in users:
        #what ever 
```

使用 Dummy 表达式的有趣现象是 List Comprehension Leaks Variables，这会导致`u`在全局范围内泄漏

所以

```
[u.properties().keys() for u in users] 
```

全球范围内的泄漏`u`，

这使得

```
set([k for k in u.properties().keys() for u in users]) 
```

合法的

以下示例显示了列表理解如何泄漏变量

```
>>> del i
>>> foo = [range(1,10) for _ in range(10)]
>>> globals()['i']

Traceback (most recent call last):
  File "<pyshell#84>", line 1, in <module>
    globals()['i']
KeyError: 'i'
>>> [i for i in foo]
[[1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9], [1, 2, 3, 4, 5, 6, 7, 8, 9]]
>>> globals()['i']
[1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:09:55.693

您的原始示例失败的原因是您的`for`子句顺序错误。列表/生成器推导式中的`for`子句与将代码编写为嵌套 for 循环时的顺序相同。即最左为最外，最右为最内。切换`for`子句的顺序以使其工作。

虚拟表达式改变行为的原因是虚拟表达式是一个列表推导，而在 Python 2 中，列表推导（与生成器推导不同）将其循环变量泄漏到封闭范围。泄露的内容`u`允许您的第二个示例运行，但它并没有按照您的想法执行，因为您`for`在该行中的子句`props = ...`仍然是错误的顺序。它只循环一个 的值`u`，即`u`来自虚拟表达式的最后一个值。

# java - 将字符串转换为Java中的浮点数而不对其进行舍入

> ID：14037150
> 
> 赞同：7
> 
> 时间：2012-12-26T07:06:19.763
> 
> 标签：java

> **可能重复：**
> [java Float.parseFloat 中的舍入](https://stackoverflow.com/questions/3440833/rounding-in-java-float-parsefloat)

我想将字符串转换为浮点数我说：

```
System.out.println(Float.parseFloat("1553781.9829")); 
```

输出：

```
1553782.0 
```

我说：

```
System.out.println(Float.valueOf("1553781.9829")); 
```

输出：

```
1553782.0 
```

如何在不损失精度的情况下获得浮点数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T07:09:59.010

`System.out.println(Double.parseDouble("1553781.9829"));`改为使用

float 有较小的大小（4 字节）的限制，因此它不适合大小数，double 具有双倍大小（8 字节）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T07:12:24.240

如果您正在寻找**准确性**，我建议您使用**BigDecimal**

这就像为您的所有操作提供方法的普通包装类一样。是的，它也需要参数作为字符串。

```
 BigDecimal bd = new BigDecimal("1553781.9829");
  System.out.println(" bd :"+ bd);  //prints the same value 
```

网址：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:16:07.293

您不能使用 float 或 double 而不会有丢失精度的风险。首先，它们的精度是有限的，对于浮点数，它大约是 7-8 位十进制数字，对于双 ~16 位数字。除此之外，Java 浮点类型在内部是二进制的，因此它们不能在不丢失精度的情况下存储一些小数。如果您确实需要精确的小数部分，请使用 java.math.BigDecimal。阅读“Effective Java”第 48 条：“如果需要准确答案，请避免使用 float 和 double”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:20:54.190

而不是`Float`你可以使用`Double`

```
System.out.println(Double.valueOf("1553781.9829"));
System.out.println(Double.parseDouble("1553781.9829")); 
```

# android - TextView Android中的自动滚动文本

> ID：14037153
> 
> 赞同：0
> 
> 时间：2012-12-26T07:06:28.117
> 
> 标签：android, android-asynctask, android-scrollview, autoscroll

我正在创建具有大量文本的 textview 并希望执行自动垂直滚动直到文本结束的应用程序。但我没有办法执行自动滚动。

我已经引用了[https://github.com/blessenm/SlideshowDemo](https://github.com/blessenm/SlideshowDemo)项目。但是无法使用此代码获得成功..

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
 xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/vertical_scrollview_id"
android:layout_width="wrap_content"
android:layout_height="0dip"
android:layout_weight="1.0"   
android:fadingEdge="none"
android:scrollbars="none"
 >

<LinearLayout
    android:id="@+id/vertical_outer_layout_id"
    android:layout_width="fill_parent"
    android:layout_height="350dp"
    android:orientation="vertical"
    android:layout_marginTop="67dp"
    android:paddingBottom="100dp"
   >

    <TextView
        android:id="@+id/lyricView"
        android:layout_width="fill_parent"
        android:layout_height="250dp"
        android:layout_marginTop="67dp"
        android:background="#000000"
        android:gravity="center"
        android:maxLines="16"
        android:paddingBottom="5dp"
        android:paddingTop="8dp"            
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:width="200dp" />

    <ProgressBar
        android:id="@+id/showLoading"
        style="?android:attr/progressBarStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="-150dp"
        android:background="#000000" />
</LinearLayout>   
</ScrollView> 
```

请给我一些想法。提前谢谢。我的简单滚动功能运行良好。但我想执行自动垂直滚动..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:09:25.970

尝试将文本视图单独放在滚动视图中，如下所示：

```
<ScrollView
        android:id="@+id/content_scroll"
        android:layout_width="fill_parent"
        android:layout_height="250dp"
        android:layout_margin="7dip"
        android:scrollbars="none" >
    <TextView
        android:id="@+id/lyricView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="67dp"
        android:background="#000000"
        android:gravity="center"
        android:maxLines="16"
        android:paddingBottom="5dp"
        android:paddingTop="8dp"            
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:width="200dp" />
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:09:56.627

当您有适合您的屏幕且不需要滚动视图的内容时，它不会出现。但是当您的内容超出屏幕时，滚动视图就会出现。您必须更改 textview 的 height 属性`wrap_content`以使其根据内容自动增加其高度。

尝试这个：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#e6e6fa"
    android:padding="5dp">

<LinearLayout
    android:id="@+id/vertical_outer_layout_id"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_marginTop="67dp"
    android:paddingBottom="100dp"
   >

    <TextView
        android:id="@+id/lyricView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="67dp"
        android:background="#000000"
        android:gravity="center"
        android:maxLines="16"
        android:paddingBottom="5dp"
        android:paddingTop="8dp"            
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:width="200dp" />

    <ProgressBar
        android:id="@+id/showLoading"
        style="?android:attr/progressBarStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="-150dp"
        android:background="#000000" />
</LinearLayout>   
</ScrollView> 
```

# ios - UITapGestureRecognizer 手势识别器中的 iOS6 错误：shouldReceiveTouch:?

> ID：14037158
> 
> 赞同：1
> 
> 时间：2012-12-26T07:07:22.583
> 
> 标签：ios, ios6, exc-bad-access, uitapgesturerecognizer

`EXC_BAD_ACCESS`我的视图控制器中的以下代码导致`touch.view`调用：

```
- (BOOL)handleSingleTap:(UITapGestureRecognizer *)recognizer shouldReceiveTouch:(UITouch *)touch {

    if ([touch.view isKindOfClass:[UIControl class]]) {   // <<<< EXC_BAD_ACCESS HERE
        // we touched a button, slider, or other UIControl
        return NO; // ignore the touch
    }
    [self.view endEditing:YES];  // dismiss the keyboard
    return YES; // handle the touch    
} 
```

`touch`似乎是僵尸。具体来说，`touch`设置为一个地址，调试器认为这是一个`UITouch`指针，但它没有任何属性：

![可以在调试器中看到](../Images/a460e1dbd7e18b5c853599c452fff139.png)

这在 iOS 4.x 中没有发生。所以 iOS 6 错误还是我的错？

手势识别器设置如下（在 ViewController 中）：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:shouldReceiveTouch:)];
[tapRecognizer setDelegate:self];
[tapRecognizer setNumberOfTapsRequired:1];
[tapRecognizer setNumberOfTouchesRequired:1];
tapRecognizer.cancelsTouchesInView = NO;
[self.view addGestureRecognizer:tapRecognizer];
[tapRecognizer release]; 
```

**更新/解决方案：**

感谢 Rob 指出我的用户错误。不仅如此，我实际上并不需要 TapRecognizer，因为我只想知道发生了触摸。

这是在 UIControl 以外的任何位置通过触摸关闭屏幕键盘的正确代码：

在 ViewController 中`viewDidLoad`：

```
UIGestureRecognizer *myRecognizer = [[UIGestureRecognizer alloc] init];
[myRecognizer setDelegate:self];
myRecognizer.cancelsTouchesInView = NO;
[self.view addGestureRecognizer:myRecognizer];
[myRecognizer release]; 
```

和：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch  {

if ([touch.view isKindOfClass:[UIControl class]]) {
    // we touched a button, slider, or other UIControl
    return NO; // ignore the touch
}

[self.view endEditing:YES];  // dismiss the keyboard
return YES; // handle the touch 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:56:06.630

您正在使用一种方法，`handleSingleTap:shouldReceiveTouch:`其签名不符合允许的签名。请参阅*UIGestureRecognizer 类参考的*[概述](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009279-CH1-DontLinkElementID_1)部分。它应该只有一个参数，手势识别器。

 *我认为您可能会将处理程序与`UIGestureRecognizerDelegate`协议方法混淆[`gestureRecognizer:shouldReceiveTouch:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009280-CH1-SW1)。*

# c# - 在窗口内放置窗口

> ID：14037163
> 
> 赞同：0
> 
> 时间：2012-12-26T07:07:38.560
> 
> 标签：c#, wpf, controls

在 WPF 中是否可以将窗口视为控件？
例如：将窗口添加到网格或另一个控件的子项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:21:40.087

也许您正在寻找**MDI**或多**文档界面**。你可以看看这个：

*   [WPF 的多窗口界面](http://www.codeproject.com/Articles/22927/Multiple-Window-Interface-for-WPF)
*   [WPF MDI](http://wpfmdi.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:28:08.720

如果关闭、最小化和最大化按钮不重要，我认为这可以通过声明简单地完成：

```
FrameWorkElement content  = yourWindow.Content 
```

并添加`content`到 Grid 或 ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:46:31.087

你想从中获得什么？如果您想要一个不创建新窗口的多屏幕应用程序，您可以创建用户控件并即时加载它们。

# python - 我可以合并这两种 URL 模式吗？

> ID：14037165
> 
> 赞同：0
> 
> 时间：2012-12-26T07:07:44.020
> 
> 标签：python, django

我想知道是否有必要在我的 urls.py 中有这两种模式：

```
url(r'^books/author/(?P<id>\d+)/$', 'books.views.author'),
url(r'^books/author/(?P<id>\d+)/(?P<slug>[-\w]+)/$', 'books.views.author'), 
```

基本上，slug 是可选的。而视图函数定义是这样的：

```
def author(request, id, slug=None): 
```

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:09:12.837

您可以将第二组和斜线包装在一个非捕获组中，并使整个组可选：

```
r'^books/author/(?P<id>\d+)/(?:(?P<slug>[-\w]+)/)?$' 
```

# iphone - 在以下情况下保存应用程序状态数据的最佳方法是什么？

> ID：14037166
> 
> 赞同：2
> 
> 时间：2012-12-26T07:07:53.480
> 
> 标签：iphone, objective-c

我已在单击按钮时启用应用程序的推送通知。单击按钮时也将禁用推送通知。当我停止应用程序时，所有数据都会丢失，因此即使启用了推送通知，然后下次我运行应用程序时它也会被禁用。我必须将推送通知的状态存储在它是否启用或disabled 哪个是存储状态的最佳位置？一个是我知道的数据库不是数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:11:05.567

采用[`NSUserDefaults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

NSUserDefaults 是保存应用程序状态的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:21:57.420

使用以下代码`NSUserDefaults`来保存状态。

```
-(IBAction)disableNotification:(id)sender
{

[NSUserDefaults standardUserDefaults]setValue:@"Disabled" forKey:@"NotificationState"]

}

-(IBAction)EnableNotification:(id)sender
{

[NSUserDefaults standardUserDefaults]setValue:@"Enabled" forKey:@"NotificationState"]

} 
```

如果你想为国家做点什么

```
if ([[[NSUserDefaults standardUserDefaults]valueforkey:@"NotificationState"]isEqualsToString:@"Enabled"])
{
// Do Some Stuff  

// Enabled State
}

else
{
// Do some Stuff

// Disabled state

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:11:15.267

如果需要存储长文本，您可以使用[核心数据。](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)如果您可以使用字典值进行管理，则可以使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:13:20.710

您可以将推送通知的状态存储在“NSUserDefaults”中。因此，当您重新打开应用程序时，您可以获得它的价值。

请查看下面的“NSUserDefaults”教程。

[http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)

干杯。

# html - mousedown 不适用于 kineticjs 中的图层

> ID：14037174
> 
> 赞同：2
> 
> 时间：2012-12-26T07:08:20.837
> 
> 标签：html, kineticjs

我一直在使用 kineticjs 游戏，其中我为背景保留了一层，为玩家角色保留了一层，以及其他的，所有这些都具有相同的动力学阶段。

然后我遇到了一种情况，我需要一个图层的形状，我可以添加多个事件，但是虽然鼠标事件在舞台上工作，但它们没有被特定形状调用。我试过 layer.on('mousedown' ,函数(),假); 它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:25:52.653

尝试 shape.on('mousedown', function().....); 正如阿尼所说

# silverlight - 如何在silverlight mvvm中从视图到视图模型获取texbox值？

> ID：14037178
> 
> 赞同：0
> 
> 时间：2012-12-26T07:08:27.123
> 
> 标签：silverlight, mvvm, prism

在我的项目中，我使用 Silverlight5 和 MVVM 模式。我有以下内容：

```
View        : Manager.xaml
Code-Behind : Manager.Xaml.cs
ViewModel   : ManagerViewModel.cs 
```

在我看来，我有一个文本框，我分配的值为 10。

管理器.xaml

```
<TextBox Name="gid" Visibility="Collapsed" /> 
```

管理器.xaml.cs

```
gid.Text=(((TextBlock)DG.Columns[5].GetCellContent(DG.SelectedItem)).Text);
ManageViewModel vm = DataContext as ManageViewModel;
            if (vm != null)
            {
                vm.EditCommand.Execute();
            } 
```

ManagerViewModel.cs：

```
private DelegateCommand _editCommand;
    public DelegateCommand EditCommand
    {
        get
        {

            if (_editCommand == null)
                _editCommand = new DelegateCommand(() =>
                {
                    **//Here i need to get the value that is assigned in the textbox.**
                    ANCViewModel.Show();
                });
            return _editCommand;
        }
    } 
```

在这里，我的问题是我必须如何获取在文本框中从视图到 ViewModel 分配的值。任何帮助..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:02:42.230

正如我从您的代码中了解到的那样。

```
ManageViewModel vm = DataContext as ManageViewModel; 
```

你的 DataContext 是 ManageViewModel 所以你应该使用这个上下文......

```
< TextBox Name="gid" Text={Binding MyTextPropertyInMyViewModel} 
  Visibility="Collapsed" why ? /> 
```

您的委托命令也在 ViewModel 中，因此您可以轻松地在视图模型中使用 MyTextPropertyInMyViewModel。

如果您使用 MVVM，则意味着您使用 DataContext（或者它可以是资源）。您应该将它用于 UI 元素源和命令。

通过这种方式，您可以将业务和 UI 分开。ViewModel 是我们的业务对象，您可能认为 Model 是我们的实体。

因此，您应该在 DataContext 上为 DataGrid、TextBlock 和其他可视元素使用绑定，并在 viewModel 上管理您的业务。通过这种方式，您可以在其他地方使用您的视图模型。即在您的移动应用程序中。

# java - 可以从类外部访问java私有数据成员吗？

> ID：14037180
> 
> 赞同：3
> 
> 时间：2012-12-26T07:08:31.383
> 
> 标签：java, private, data-members

> **可能重复：**
> [在 Java 中是否可以通过反射访问私有字段](https://stackoverflow.com/questions/1555658/is-it-possible-in-java-to-access-private-fields-via-reflection)

有什么办法可以让我们在java中调用一个类的私有数据成员，可以在类外访问。我想要一个棘手的问题库。根据我的 Java 经验，我认为这是可能的，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T07:57:36.583

1）如果 SecurityManager 允许，您可以使用反射来完成

```
class B {
    private int x = 2;
}

public class A {

    public static void main(String[] args) throws Exception {
        Field f = B.class.getDeclaredField("x");
        f.setAccessible(true);
        f.get(new B());
    }
} 
```

2) 在内部类的情况下

```
class A {
    private int a = 1;

    class B {
        private int b = 2;

        private void xxx() {
            int i = new A().a;
        };
    }

    private void aaa() {
        int i = new B().b;
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T07:11:44.443

根据 Java 语言规范，第 3 版：

```
6.6.8 Example: private Fields, Methods, and Constructors

A private class member or constructor is accessible only within the body of the top level class (§7.6) that encloses the declaration of the member or constructor. It is not inherited by subclasses. 
```

您可以`reflection`在 java 中使用来访问私有字段。理想情况下，您应该使用公共 setter 和 getter 方法从类外部访问此类数据（正如其他人发布的那样）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:23:44.850

有关访问修饰符的更多信息，请查看以下链接

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

这用于通过反射访问 Java 中的私有变量

[通过反射访问Java中的私有变量](https://stackoverflow.com/questions/1771744/accessing-private-variables-in-java-via-reflection)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:31:04.683

您可以使用返回/设置私有字段值的公共方法来执行此操作。

```
public Class A{

   private String myData;

   public String getMyData(){
        return myData;
   }

   public void setMyData(String data){
        this.myData=data;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T07:17:49.270

1.  没有私有成员不能在课堂外使用
2.  为此，您可以使用 getter 和 setter 方法

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-26T07:16:11.020

定义一个公共`get`方法来获取你的类的私有字段。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-26T07:16:44.093

不，您不能以任何方式访问 java 中的私有变量。

您可以提供公共 getter 和 setter 方法来访问或更改私有成员变量的值。

# excel - 如何在没有用户提示保存文件的情况下保存 Excel？

> ID：14037182
> 
> 赞同：3
> 
> 时间：2012-12-26T07:08:38.487
> 
> 标签：excel, vbscript, save

嗨，我在 Excel 表上使用 VBScript 编写了一些代码，如下所示。现在，每当脚本完成处理时，它都会提示用户使用它`Save`。但我不想要这个，而是希望它在没有提示的情况下自动保存。

**代码**

```
 Option Explicit

    Dim objExcel1,strPathExcel1,objSheet1,objSheet5

    Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump
    strPathExcel1 = "D:\VA\GE_Wing_To_Wing_Report.xlsx"
    objExcel1.Workbooks.Open strPathExcel1
    Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
    Set objSheet5 = objExcel1.ActiveWorkbook.Worksheets(5)

    '=====================================================================================
    'Here Bad sheet will be copied by the data from First sheet master data sheet
    '=====================================================================================
       ParentPIDFromMasterSheet objSheet1,objSheet5

    '=====================================================================================
    'Here Bad sheet will be copied by the data from First sheet master data sheet
    '=====================================================================================
       BadDataSelectionDel objSheet5

    '=======================
    objExcel1.ActiveWorkbook.SaveAs strPathExcel1
    objExcel1.Workbooks.close
    objExcel1.Application.Quit
    '====================== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:14:01.433

**未经测试（试试这个）**

您需要设置工作簿，然后在保存后将其关闭。此外，在使用后在代码末尾清理对象也是一个好习惯。:)

```
Option Explicit

Dim objExcel1, objWB, strPathExcel1, objSheet1, objSheet5

Set objExcel1 = CreateObject("Excel.Application") 'Object for Condition Dump
strPathExcel1 = "D:\VA\GE_Wing_To_Wing_Report.xlsx"
Set objWB = objExcel1.Workbooks.Open(strPathExcel1)
Set objSheet1 = objWB.Worksheets(1)
Set objSheet5 = objWB.Worksheets(5)

'=====================================================================================
'Here Bad sheet will be copied by the data from First sheet master data sheet
'=====================================================================================
   ParentPIDFromMasterSheet objSheet1, objSheet5

'=====================================================================================
'Here Bad sheet will be copied by the data from First sheet master data sheet
'=====================================================================================
   BadDataSelectionDel objSheet5

'=======================
objWB.Save
objWB.Close
objExcel1.Quit

'~~> Cleanup
Set objSheet1 = Nothing
Set objSheet5 = Nothing
Set objWB = Nothing
Set objExcel1 = Nothing
'====================== 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-22T13:03:56.297

您只需要在保存文件之前添加这行代码：

```
objExcel1.Application.DisplayAlerts = False 'Prevents prompts from appearing 
```

我试过了，它奏效了。

# python - 在python中读取多行字符串

> ID：14037183
> 
> 赞同：0
> 
> 时间：2012-12-26T07:08:43.040
> 
> 标签：python

我需要解析一个字符串并从中读取一个特定的子字符串。我需要解析的字符串如下：

```
domain
(
    (device
          (console
               (xxxxxx)
               (XXXXXX)
          )
    )
)

domain
(
    (device
          (vfb
               (xxxxxx)
               (location : 5903)
          )
    )
) 
```

这只是一个示例字符串。实际的字符串可能包含许多这样的子字符串。我需要仅从“vfb”子字符串中获取位置字段的值。我尝试了 findall 和 search 功能如下

```
import re
text=re.search('(device(vfb(.*?)))',stringname) 
```

和

```
import re
text=re.findall('(device(vfb(.*?)))',stringname,re.DOTALL) 
```

但我总是得到空字符串。有没有简单的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:14:47.633

你为什么不只寻找`location`键值对呢？

```
>>> re.findall(r'(\w+) : (\w+)', s)
    [('location', '5903')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:21:26.647

简单的python脚本：

```
fp = open("input.txt", "r")

data = fp.readlines()
for line in data:

    if "location" in line:
        print line.split(":")[1].split(")")[0].strip()

fp.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:54:53.597

```
re.findall(r'device.*?\(vfb.*\(.*\).*(\(.*?\))', s, re.DOTALL) 
```

# sql-server - 我应该始终为表创建一个身份列主键吗？

> ID：14037185
> 
> 赞同：0
> 
> 时间：2012-12-26T07:09:01.437
> 
> 标签：sql-server, indexing, primary-key, identity

如果我创建一个带有标识列的表，我是否应该始终将其设为表的 PK。我知道当我们这样做时，它会自动为该表创建一个聚集索引。将所有标识列保留在表中而不使它们成为 PK 是否有任何性能影响？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:12:33.057

如果您想使用 linq 在 C# 中使用该表，则需要放置 PK。

# xamarin.ios - 如何将 Visual Studio C# 应用程序迁移到 monotouch

> ID：14037188
> 
> 赞同：2
> 
> 时间：2012-12-26T07:09:14.787
> 
> 标签：xamarin.ios

我有一个使用 Microsoft Visual Studio 2010 C# 开发的现有应用程序。我刚刚购买了 Xamarin 的 Monotouch 产品，它允许我使用他们的 IDE MonoDev 通过 C# 编码从头开始创建 iPhone/iPad 应用程序。现在我不想编写新的应用程序。我想将我现有的 C# 应用程序导入到 monodev/monotouch 并让结果在 iPhone/iPad 上运行。我现有的 C# 应用程序旨在使用 Xamarin 的 Android 产品在 Android 手机/平板电脑上进行部署。效果很好！我已经开始涉足 Xamarin 文档、示例、教程等。但我需要立即将现有应用程序移植到 iPhone/iPad。我真的没有奢侈的时间花时间从头开始学习。我必须相信有人已经走上了这条迁移之路。如果您有，我们可以交谈、发送电子邮件，或者您是否知道是否有指南描述了完成此操作的具体步骤？TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T07:24:16.143

Xamarin MonoTouch 不允许您运行任何 C# 应用程序并立即在 iPhone 上运行它。UI 层是本机的，因此构造 UI 的 C# 代码必须使用 Xamarin 绑定到 Apple UI API。

“标准”迁移过程是创建一个空的 MonoDevelop 项目，然后开始添加您现有的 C# 业务逻辑文件，解决出现的任何编译问题。

# jquery - Jquery：从选择中只选择一些集合

> ID：14037193
> 
> 赞同：0
> 
> 时间：2012-12-26T07:09:32.537
> 
> 标签：jquery, jquery-selectors

我有一个要求，我必须只过滤整个选择的一部分。这是示例

```
<li class="link">one</li>
<li class="link">two</li>
<li class="link">three</li>
<li class="link">four</li>
<li class="link">five</li>
<li class="link">six</li>
<li class="link">seven</li>
<li class="link">eight</li>
<li class="link">nine</li>
<li class="link">ten</li> 
```

我的要求是将元素从“三”过滤到“五”，并且必须在它们上应用一些亮点。我不想使用循环并寻找一些优雅的过滤语法。我尝试了类似 $(".link:gt(2),lt(5)") 的方法，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:12:57.857

使用[.slice()](http://api.jquery.com/slice/)

```
$(".link")​.slice(2,5) 
```

[http://jsfiddle.net/JYLpr/](http://jsfiddle.net/JYLpr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:13:45.840

通常一个接一个地应用选择器，`:gt`并且`:lt`也是从零开始的

```
 $(".link:gt(1):lt(3)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:33:40.867

试试这个代码它对我有用

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
for(var i=1;i<=10;i++){
 $("#test"+i).css('display','none');
}
for(var i=4;i<=8;i++)
{
    $("#test"+i).css('font-family','Rupee Foradian,Verdana,Arial,Helvetica,sans-serif');
 $("#test"+i).css('font-weight','bold');
 $("#test"+i).css('display','block');
}
  });
});
</script>
</head>
<body>
<li class="link" id="test1">one</li>
<li class="link" id="test2">two</li>
<li class="link" id="test3">three</li>
<li class="link" id="test4">four</li>
<li class="link" id="test5">five</li>
<li class="link" id="test6">six</li>
<li class="link" id="test7">seven</li>
<li class="link" id="test8">eight</li>
<li class="link" id="test9">nine</li>
<li class="link" id="test10">ten</li>
<button>Click me</button>
</body>
</html> 
```

# c - 使用 C 程序在终端中定位光标

> ID：14037202
> 
> 赞同：0
> 
> 时间：2012-12-26T07:10:12.477
> 
> 标签：c, cursor-position

我的程序将打开一个文件并在终端中打印内容。由于文件很大，终端会转到两页或更多页。我必须滑到文件的第一行才能从头开始阅读。可以使用C程序吗？

```
void hfile()
{
printf("\033[2J");
printf("\033[0;0H");
FILE *ffp;
char c;

ffp=fopen("help.txt","r");
while((c=getc(ffp))!=EOF)
    printf("%c",c);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:24:50.873

不是通过标准库。您将不得不使用一些第三方库，例如 ncurses。

# magento - 单击自定义选项卡在销售订单视图页面上显示网格和表格

> ID：14037203
> 
> 赞同：0
> 
> 时间：2012-12-26T07:10:12.397
> 
> 标签：magento

当我们在管理员的销售订单视图页面上时，左侧有标签。我想在与发票标签完全相同的下方添加我自己的自定义标签。

我试图在单击自定义选项卡时获取网格及其形式，但没有得到它。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:29:49.347

要将选项卡添加到订单视图页面，您需要使用 adminhtml 布局 xml 创建自己的模块，在此处添加

```
<adminhtml_sales_order_view>
    <reference name="sales_order_tabs">
        <action method="addTab">
            <name>my_tab</name>
            <block>module/adminhtml_module_edit_tab_mytab</block>
        </action>
    </reference>
</adminhtml_sales_order_view> 
```

所以现在你只需要像往常一样创建块模块/adminhtml_module_edit_tab_mytab 后端网格

# javascript - 在 RSA 中将 .net 公共 xml 密钥导入到 javascript

> ID：14037204
> 
> 赞同：2
> 
> 时间：2012-12-26T07:10:38.610
> 
> 标签：javascript, rsa, public-key-encryption

我有用 C# 创建的 XML 中的公钥，格式为：

```
<Modulus>rYDd94biRAJ1P6j68xjARl......and so on</Modulus>
<Exponent>A**B</Exponent> 
```

我想在 Javascript 中创建这个密钥，并用它加密字符串，我该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T21:29:55.830

经过这么多小时的研究、测试、放弃、再次研究等，对于 .NET 和 Javascript 的 RSA 互操作性的解决方案，我找到了这个库：

[http://www.jocys.com/Common/JsClasses/Documents/](http://www.jocys.com/Common/JsClasses/Documents/)

它们的类与服务器上的 RSACryptoServiceProvider 具有相同的工作代码。

你必须做的：

1.  从他们的 Github 下载源代码： [https ://github.com/JocysCom/JsClasses/archive/master.zip](https://github.com/JocysCom/JsClasses/archive/master.zip)

2.  将文件从 *.debug.js 重命名为 *.js。请参阅下面 (3) 上的文件列表。

3.  将所需文件添加到您的 html 页面

    ```
     <script type="text/javascript" src="js/System.js"></script>
     <script type="text/javascript" src="js/System.IO.js"></script>
     <script type="text/javascript" src="js/System.Text.js"></script>
     <script type="text/javascript" src="js/System.Convert.js"></script>
     <script type="text/javascript" src="js/System.BigInt.js"></script>
     <script type="text/javascript" src="js/System.BitConverter.js"></script>
     <script type="text/javascript" src="js/System.Security.Cryptography.js"></script>
     <script type="text/javascript" src="js/System.Security.Cryptography.SHA1.js"></script>
     <script type="text/javascript" src="js/System.Security.Cryptography.HMACSHA1.js"></script>
     <script type="text/javascript" src="js/System.Security.Cryptography.RSA.js"></script> 
    ```

4.  添加此 javascript 代码以加密您的文本：

    ```
     function RsaEncrypt()
     {
         //a public key generated from their sample.
         //your should generate yours and stamp it here.
         var xmlParams =
         "<RSAKeyValue>" +
             "<Modulus>pxtmFnrGI6Sb8ziyY+NRUDuQ4b/ETw5WabQ4daFQqzsCEr/6J/LLBU/2D5mO5/Wu5U/Rya1E55aYFZeaZMNqAw==</Modulus>" +
             "<Exponent>AQAB</Exponent>" +
             "<P>2TsVXWPEvDIJv/gd2rX9k0UOyXuaYgoAchIH6vUicis=</P>" +
             "<Q>xO4+OYREQfqYRQK7y73+RaUG0IxobT0OQ0c+Ok2hc4k=</Q>" +
             "<DP>K7/xgpiIU9rECeyfnp/OjS14V+3T3vDivBaTj6eFI3c=</DP>" +
             "<DQ>K4N9ClZ4gp+tn6oP9t//XEIvtEsiE+kmyqTmUhmvMAk=</DQ>" +
             "<InverseQ>p7o4BOlKZQZ693R1ViZ66y5gTjUkNNTd2za7/1YGBCs=</InverseQ>" +
             "<D>XZqFVrYy4qhECruJgVZFp/GVuD5Y0gev88nVjl5r911QT+I8vgJSklTso7jTlpMtf2oe7UZ0WRWEtgPS3tZn4Q==</D>" +
         "</RSAKeyValue>";
         var rsa = new System.Security.Cryptography.RSACryptoServiceProvider();
         rsa.FromXmlString(xmlParams);

         // Encrypt
         var decryptedBytes = System.Text.Encoding.UTF8.GetBytes(text);
         var doOaepPadding = true;
         var encryptedBytes = rsa.Encrypt(decryptedBytes, doOaepPadding);
         var encryptedString = System.Convert.ToBase64String(encryptedBytes);
         return encryptedString;
     } 
    ```

查找有关如何生成私钥和公钥的文档（上面的链接）。该代码与您在服务器上手动编写 .NET 完全相同。

你也可以查看他们的[测试页面](http://www.jocys.com/Common/JsClasses/Examples/System.Security.Cryptography.RSA.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T09:33:59.653

您还可以在 C# 中以 PEM 格式保存公钥：

```
private static string ExportPublicKey(RSACryptoServiceProvider csp)
    {
        var parameters = csp.ExportParameters(false);
        using (var stream = new MemoryStream())
        {
            var writer = new BinaryWriter(stream);
            writer.Write((byte)0x30); // SEQUENCE
            using (var innerStream = new MemoryStream())
            {
                var innerWriter = new BinaryWriter(innerStream);
                EncodeIntegerBigEndian(innerWriter, new byte[] { 0x00 }); // Version
                EncodeIntegerBigEndian(innerWriter, parameters.Modulus);
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent);
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.D
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.P
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.Q
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.DP
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.DQ
                EncodeIntegerBigEndian(innerWriter, parameters.Exponent); // instead of parameters.InverseQ
                var length = (int)innerStream.Length;
                EncodeLength(writer, length);
                writer.Write(innerStream.GetBuffer(), 0, length);
            }

            char[] base64 = Convert.ToBase64String(stream.GetBuffer(), 0, (int)stream.Length).ToCharArray();
            StringBuilder res = new StringBuilder();
            res.AppendLine("-----BEGIN RSA PUBLIC KEY-----");
            for (int i = 0; i < base64.Length; i += 64)
            {
                int l = Math.Min(64, base64.Length - i);
                for (int j = 0; j < l; j++) res.Append(base64[i + j]);
                res.AppendLine();
            }
            res.AppendLine("-----END RSA PUBLIC KEY-----");
            return res.ToString();
        }
    }

    private static void EncodeIntegerBigEndian(BinaryWriter stream, byte[] value, bool forceUnsigned = true)
    {
        stream.Write((byte)0x02); // INTEGER
        var prefixZeros = 0;
        for (var i = 0; i < value.Length; i++)
        {
            if (value[i] != 0) break;
            prefixZeros++;
        }
        if (value.Length - prefixZeros == 0)
        {
            EncodeLength(stream, 1);
            stream.Write((byte)0);
        }
        else
        {
            if (forceUnsigned && value[prefixZeros] > 0x7f)
            {
                // Add a prefix zero to force unsigned if the MSB is 1
                EncodeLength(stream, value.Length - prefixZeros + 1);
                stream.Write((byte)0);
            }
            else
            {
                EncodeLength(stream, value.Length - prefixZeros);
            }
            for (var i = prefixZeros; i < value.Length; i++)
            {
                stream.Write(value[i]);
            }
        }
    }

    private static void EncodeLength(BinaryWriter stream, int length)
    {
        if (length < 0) throw new ArgumentOutOfRangeException("length", "Length must be non-negative");
        if (length < 0x80)
        {
            // Short form
            stream.Write((byte)length);
        }
        else
        {
            // Long form
            var temp = length;
            var bytesRequired = 0;
            while (temp > 0)
            {
                temp >>= 8;
                bytesRequired++;
            }
            stream.Write((byte)(bytesRequired | 0x80));
            for (var i = bytesRequired - 1; i >= 0; i--)
            {
                stream.Write((byte)(length >> (8 * i) & 0xff));
            }
        }
    } 
```

# php - 模态不触发验证电子邮件但发送电子邮件 - 引导

> ID：14037210
> 
> 赞同：1
> 
> 时间：2012-12-26T07:10:59.560
> 
> 标签：php, jquery, twitter-bootstrap

我正在尝试设置一个模式，使用引导程序获取错误或成功消息，但它没有被触发？如果填写了所有字段（没有成功消息），电子邮件将发送，如果一个或多个字段留空（没有成功消息）则不会发送？[您可以在此处](http://www.couchguard.com.au/boot/contact/contact.php)查看表格：

这个网站正在进行中，我对所有这些引导程序都是新手！

我错过了什么？

这是html和触发脚本：

```
 <div class="row">
      <div class="span8">
           <div id="formMode" class="modal fade">
              <div class="modal-header"></div>
              <div class="modal-body"></div>
              <div class="modal-footer"></div>
           </div>
           <form action="contact.php" method="POST" id="contactform" class="form-horizontal">
              <fieldset>
                 <legend>Please fill in the form bellow and a sales representive will be in contact swiftly.</legend>
              //form details
             </div>
           </fieldset>
          </form>
        </div>
     </div>
     <script type="text/javascript">
        $(document).ready(function () {
                var mode_value = getQuerystring('mode');

                switch (mode_value) {
                case '':
                $('#formMode').modal('hide');
                break
                case 'POST':
                $('.modal-header').html('h1>Form submitted...</h1>');
                $('.modal-body').html('<h2>Everything <em>seemed</em> to be correct.</h2>');
                $('.modal-footer').html('<a href="#" class="btn" data-dismiss="modal">Close</a>');
                $('#formMode').modal('show');
                break
                case 'success':
                $('.modal-header').html('');
                $('.modal-body').html('<div class="alert alert-block alert-success"><h4 class="alert-heading">Your message was sent</h4>We will respond to you shortly</div>');
                $('.modal-footer').html('<a href="index.html" class="btn btn-success" data-dismiss="modal">Close</a>');
                $('#formMode').modal('show');
                break
                case 'fail':
                $('.modal-header').html('');
                $('.modal-body').html('<div class="alert alert-block alert-error"><h4 class="alert-heading">The message was not sent</div>');
                $('.modal-footer').html('<a href="#" class="btn btn-danger" data-dismiss="modal">Close</a>');
        $('#formMode').modal('show');

                };
        })
     </script>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T07:35:32.670

**您必须在文档末尾放置**后设置联系表单中的脚本行，以便页面加载更快的脚本。之后它对我有用。

# android - java.lang.OutOfMemoryError on line httpPost.setEntity(new UrlEncodedFormEntity(params)) 同时在android中以字符串格式发送图像

> ID：14037213
> 
> 赞同：1
> 
> 时间：2012-12-26T07:11:09.260
> 
> 标签：android, image, web-services, bitmap, out-of-memory

我正在尝试通过调用 web 服务上传设备相机拍摄的图像，服务器代码在 PHP 中。

首先我将位图转换为字符串

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        byte[] byteArray = stream.toByteArray();
        String imageInString = Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

然后构造名称值对对象

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("image", imageInString));
    params.add(new BasicNameValuePair("img_desc", img_desc));
    params.add(new BasicNameValuePair("amount", amount));
    params.add(new BasicNameValuePair("request_type", "INSERT")); 
```

进而，

```
DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        InputStream inputStream = httpEntity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 8);
        StringBuilder stringBuilder = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            stringBuilder.append(line + "\n");
        }
        inputStream.close(); 
```

这段代码昨天工作正常，但今天我`java.lang.OutOfMemoryError`在网上遇到错误`httpPost.setEntity(new UrlEncodedFormEntity(params));`

那么如何消除这个错误呢？

日志猫是

```
 FATAL EXCEPTION: AsyncTask #1
 java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:266)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
at java.lang.Thread.run(Thread.java:1020)
 Caused by: java.lang.OutOfMemoryError
at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:96)
at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:147)
at java.lang.StringBuilder.append(StringBuilder.java:217)
at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:165)
at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:71)
at com.network.GetJSONFomURL.getJSONSrtringFromUrl(GetJSONFomURL.java:24)
at com.network.WebServices.uploadImage(WebServices.java:51)
at com.markphoto_activities.UploadActivity$MyAsyncTaskUploadImage.doInBackground(UploadActivity.java:130)
at com.markphoto_activities.UploadActivity$MyAsyncTaskUploadImage.doInBackground(UploadActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:252)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 4 more

    Activity com.markphoto_activities.UploadActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@407aafc8 that was originally added here
 android.view.WindowLeaked: Activity com.markphoto_activities.UploadActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@407aafc8 that was originally added here
    at android.view.ViewRoot.<init>(ViewRoot.java:285)
    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:152)
    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T06:48:05.967

而不是名称值对，试试这个代码

```
 MultipartEntity reqEntity = new MultipartEntity();
    try {
        reqEntity.addPart("email", new StringBody(email));
        reqEntity.addPart("image", new FileBody(new File(imagePath)));
        reqEntity.addPart("img_desc", new StringBody(img_desc));
        reqEntity.addPart("amount", new StringBody(amount));
        reqEntity.addPart("request_type", new StringBody("INSERT"));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } 
```

其中 imagePath 是图像文件的路径。然后代替`httpPost.setEntity(new UrlEncodedFormEntity(params));`使用

```
httpPost.setEntity(reqEntity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:21:26.007

我认为对于手机来说，字符串中的图像数据太多了。您可以改用[FileEntity](http://developer.android.com/reference/org/apache/http/entity/FileEntity.html)。

那应该可以解决您的记忆问题。

# php - column <> 1 对 NULL 值返回 False

> ID：14037216
> 
> 赞同：0
> 
> 时间：2012-12-26T07:11:24.253
> 
> 标签：php, mysql, sql

我有两张桌子。`offers`和`offer_status`。我想从`offers`该`offer_status`行丢失或该`disabled`表中的列为 0 的位置返回行。

这是我尝试这样做的方法：

```
SELECT offers.id,network,campid,name,url FROM offers
LEFT JOIN offer_status ON offers.id = offer_status.sql_id
AND offer_status.user_id='3'
WHERE country='US'

AND offer_status.disabled != '1'

ORDER BY epc DESC LIMIT 7 
```

但是，如果 in 中的行`offer_status`不存在（并且 JOIN 失败），这将不起作用。对我来说，它似乎仍然可以工作，因为 offer_status.disabled 为空。

这确实有效：

```
SELECT offers.id,network,campid,name,url FROM offers
LEFT JOIN offer_status ON offers.id = offer_status.sql_id
AND offer_status.user_id='3'
WHERE country='US'

AND (offer_status.disabled IS NULL OR offer_status.disabled=0)

ORDER BY epc DESC LIMIT 7 
```

但对我来说，这似乎更糟糕的表现，我仍然很失望我最初的想法没有奏效。

上面的 OR 语句是唯一的方法吗？有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:21:00.423

SQL 逻辑是具有 TRUE、FALSE 和 UNKNOWN 状态的三态逻辑。WHERE 子句选择条件评估为 TRUE 的行。

如果您将 NULL 值与任何非 null 值进行比较，您将获得第三个逻辑状态 UNKNOWN（不是您标题中声称的 FALSE）。这与 TRUE 不同，因此不会选择条件评估为 UNKNOWN 的行。

您可以使用显式 IS NULL 测试来检查是否为空。

```
AND (offer_status.disabled != '1' OR offer_status.disabled IS NULL) 
```

请注意额外的括号，以确保安全、清晰和准确。

如果这对性能影响太大，请对`offer_status.disabled`列强制执行 NOT NULL 约束，然后您就不必摆弄 IS NULL 测试或 OR'd 条件。通常，可能为 NOT NULL 的每一列都应为 NOT NULL；它使您的数据库更易于使用。

* * *

请注意，如果`offer_status.disabled`为 NULL，则：

```
WHERE offer_status.disabled  = '1' -- evaluates to UNKNOWN and the row is not selected
WHERE offer_status.disabled != '1' -- evaluates to UNKNOWN and the row is not selected 
```

这是标题中声称的不正确的“与 NULL 比较返回 FALSE”与“与 NULL 比较返回 UNKNOWN”的实际行为之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:21:29.103

`NULL`将（使用`=`, `<>`,`<`等`>`）与另一个值进行比较得出`NULL`. 而且`NULL`既不是真的，也不是假的。其次，为了满足`WHERE`子句，条件必须评估为真。

因此，您的第二个查询实际上是正确的方法。

为了完整起见，可以（但不推荐）使用 和 等函数重写您的查询[`IF`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)，[`IFNULL`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)例如：

```
WHERE IFNULL(offer_status.disabled, 0) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:21:36.553

引用[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/type-conversion.html)：

> 如果一个或两个参数为 NULL，则比较结果为 NULL，但 NULL 安全 <=> 相等比较运算符除外。对于 NULL <=> NULL，结果为真。

所以我认为是的，`(disabled IS NULL OR disabled=0)`是必要的。

# jquery - 如何在新页面加载时点击一个类？

> ID：14037219
> 
> 赞同：1
> 
> 时间：2012-12-26T07:11:27.907
> 
> 标签：jquery

我有一个类名“searchIcon”，我为那个类写了一个点击函数。

在 HTML 中

```
 <div class="searchIcon">Icon</div> 
```

在 Js 文件中

```
 $(".searchIcon").click(function(){
   //class function
  }); 
```

我希望在页面加载时单击此功能。

最大我需要它在 jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:13:21.087

您可以在绑定事件后立即调用`.click()`或调用。`.trigger('click')`

```
$(function() {
    $(".searchIcon").click(function(){
        //class funstion
    }).click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:14:52.593

您可以在 document.ready 函数中使用 JQuery[触发器：-](http://api.jquery.com/trigger/)

> $(".searchIcon").trigger('click');

```
$(function() {
    $(".searchIcon").click(function(){

    });
    $(".searchIcon").trigger('click');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:22:34.440

您可以让点击处理程序直接调用一个函数，然后在页面加载调用相同的函数（[jsFiddle 示例](http://jsfiddle.net/cteegarden/rB9Us/3/)）：

```
$(".searchIcon").click(function(){
   //class function
    clickFunction();
});

var clickFunction = function(){
      alert("clicked!");  
};

clickFunction();
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:49:36.230

您的代码在页面加载时需要点击触发器：

```
$(function(){ // ready handler
    $(".searchIcon").click(function(){
       //class function
    });
    $(".searchIcon").click(); // this fires when doc gets ready
}); 
```

# vb.net - 如何区分单词字符和非单词字符？

> ID：14037220
> 
> 赞同：0
> 
> 时间：2012-12-26T07:11:29.807
> 
> 标签：vb.net, unicode

Unicode 有字符类别。有些是字母数字。有些是标点符号。

如果我想知道一个词是否属于关键字呢？

例如，

A,a,b,c 倾向于属于单词。Ƈ,Ǝ,ǟ也是如此，所有汉字也是如此。

像这样的句子

```
Hello World, I "like" (to)  eat ƇƎǟ and 款开源 © 
```

有关键字：

```
Hello
World
I
like
to
eat
ƇƎǟ
款
开
源 
```

这里, , (),© 不是单词字符，因此应该被忽略和使用。

© 也不算标点符号。'©'.IsPunctuation 在 vb.net 中返回 false，但我也想摆脱它。

现在我想制作一个可以将句子拆分为关键字的程序。为此，我需要知道哪些字符是单词字符，哪些不是。

是否有 vb.net 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:33:26.323

Do it the other way round: use `IsLetter` for your test. Or better yet, use regular expressions to split your string by words:

```
Dim str = "Hello World, I ""like"" (to)  eat ƇƎǟ and 款开源 ©"
Dim wordPattern As New Regex("\p{L}+")

For Each match in wordPattern.Matches(str))
    Console.WriteLine(match)
Next 
```

Here, `\p{L}` matches any word character. However, the above matches “款开源” in a *single* rather than in separate matches since there is no separator between the characters.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-26T07:19:51.287

您需要处理“键码”
，例如如果您只想要字母 [az]
那么

```
 for(c>='a' && c<='z'){
       } 
```

或者

```
 for(c>=97 && C<=122){
        } 
```

# javascript - 骨干model.destroy没有触发删除请求

> ID：14037226
> 
> 赞同：4
> 
> 时间：2012-12-26T07:11:53.533
> 
> 标签：javascript, node.js, backbone.js

这是我的模型。

```
library.BookModel = Backbone.Model.extend({
    urlRoot: '/api/books',
    defaults: {
        id      : null,
        imageurl: 'noimage.jpg', 
    }
}); 
```

我正在尝试通过调用 book.destroy 来发出删除请求。但它不会触发请求。应用程序初始化时。该模型由来自服务器的数据填充。模型中设置了两个 ID 属性。`id`（客户端 id）和`_id`（mongodb id）。我在模型初始化函数中将客户端 ID 初始化为 book.attributes.id = book.attributes._id。所以一切都准备好了。但我似乎无法发起删除请求。请告诉我哪里出错了。我在这里错过了什么吗？

我的后端路由器被定义为处理删除请求。

`app.delete('/api/books/:id', function(req, res){...});`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T08:34:02.887

[尝试使用idAttribute](http://backbonejs.org/#Model-idAttribute)设置 id 属性，对于您的情况（mongodb）是`_id`. 这是服务器设置的id。

```
library.BookModel = Backbone.Model.extend({

    urlRoot: '/api/books',

    idAttribute: '_id',

    defaults: {
        imageurl: 'noimage.jpg', 
    }

}); 
```

Backbone 在客户端自动设置的 id 是[cid](http://backbonejs.org/#Model-cid)而不是 id。cid 可以使用，直到模型在服务器上同步并获得服务器 ID。

# mysql - 异步写入多个 MySQL 数据库

> ID：14037229
> 
> 赞同：0
> 
> 时间：2012-12-26T07:12:22.367
> 
> 标签：mysql, amazon-web-services, load-balancing, multi-master-replication

我正在使用 AWS RDS，因此区域之间的数据库复制是不可能的。

我的应用程序用 PHP 编写并部署在所有区域，我正在寻找一种快速可靠的方法来实现这一目标。

我要建立 MySQL 连接：

SET @@auto_increment_increment= NUM​​BER_OF_WRITEABLE_DATABASES；

SET @@auto_increment_offset = REGION_ID ;

所以AI pk在所有地区都是独一无二的。

我目前的计划是保留一个查询日志表，其中包含字段 => id、queries、status、user_id。它将所有插入、更新、删除查询记录到同一页面加载的查询字段中。

**状态码：**

状态 0 => 未执行

状态 1 => 在所有区域上成功执行

状态 2 => 失败

状态 3 => 失败，受影响的行不匹配

**示例行：**

id=>1 个查询=> INSERT INTO PROFILES VALUES (1,{USER_ID},'Username','Email')##SEPERATOR##AFFECTED_COUNT UPDATE USERS SET last_modified='2012-12...' where id={USER_ID }##SEPERATOR##AFFECTED_COUNT 状态=0 user_id=>{USER_ID}

并且将有一个守护进程读取 status != 1 的记录，并将在所有区域上处理它们而不提交，一旦所有区域都运行没有错误，它将提交或回滚以防出错。

这就是我的想法并打算使用。

我的问题是该场景是否有更体面/经过测试的方法，或者我的方法有任何问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:56:04.883

我最初的想法是，如果您尝试使用 RDS 作为跨多个区域强制执行唯一记录 ID 的解决方案，那么您将走错路。我认为您可能需要重新考虑您对跨区域唯一性的实际需求或使用多个列（即自动增量加上区域标识符）强制唯一性。这可以被读取并放入一些最终一致的数据存储中以用于读取目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:23:41.240

您正在做出值得称赞的努力，但正如其他评论者所说，由于多种原因，您的解决方案不可行。

您真的不想在会话级别使用 auto_increment_offset 和 auto_increment_increment。您想在服务器级别设置它们。如果 RDS 不允许您这样做，这就是 RDS 可能不是最佳解决方案的另一个原因。

如果我出来建议您在多主环中部署 MySQL 服务器（EC2，而不是 RDS）的全球网络，其中数据复制 1 => 2 => 3 => 4 => 1 并且每个服务器忽略传入的复制带有自己的服务器 ID 的消息，我的 MySQL DBA 同事会指责我失去了理智，让你陷入了难以管理的境地；**但是**，我相信这会*容易得多*解决方案比您建议的解决方案，因为至少，那么，世界各地的数据将以几乎与实际更改相同的顺序发生变化——这将减少来自多个位置的冲突更新的可能性。MySQL 复制是异步的，因为服务器 1 在向客户端返回成功（表明事务已提交）之前不会等待服务器 2 上的事务提交，但不要将该事实与它的事实混淆*是*顺序的——事务按照提交的顺序在每台服务器上复制。（MySQL 5.6 中的新选项允许通过并行复制线程对此进行一些例外处理，但这对本次讨论并不重要）。

由于您已经设计了一个避免冲突的自动增量值的方案，您更大的问题可能来自更新和删除。在我刚刚描述的场景中，如果服务器 2 删除了一条记录，并且服务器 4 同时删除了同一条记录，那么服务器 4 将在收到来自服务器 2 的删除时停止复制传入事件，因为“受影响的行”将有所不同。您的方案同样会失败。不同之处在于，使用实际的 MySQL 复制，在冲突事件发生后什么也没有发生，所以在你解决冲突之前，至少你的数据不会因为上面讨论的顺序性质和 MySQL 复制*完全停止的事实而进一步分化为不一致*每当遇到冲突。在主服务器环中，已停止复制的服务器继续从上游系统收集复制事件日志，但执行停止并且该服务器上的数据被冻结，除非在本地进行更改，直到冲突解决并重新启动复制。

另请注意，在您的场景中，您需要在更新时为每一列保留“from”和“to”值，因为除非您知道它回滚到，否则您无法回滚任何内容。

值得注意的是，回滚需要实时发生，而不是稍后发生。如果我在两个银行账户之间转账，并且由于某种原因需要回滚，我需要在使用银行的网站时看到——银行不能在中间回滚该交易晚上只是因为他们的一个服务器在我的银行账户中有不同的余额。

这里有一个想法：在你的场景中，如果我转移“到”的帐户在所有服务器之间是一致的，但我转移“来自”的帐户不是，那么我想知道......你的设置是否会回滚从“from”账户，但将存款留在“to”账户？我认为可能。

请记住，您受到[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)的限制。没有一个系统可以是全局一致的、可用的，并且可以容忍节点之间的隔离。充其量，您可以选择任何两个。

有了这个想法，我的问题是：为什么你的全局系统中的所有节点都需要同步？如果主要原因是性能，请考虑部署单个全局主服务器的可能性，其中只读副本分布在各个区域之间。使用两个数据库连接线程池编写应用程序，以便大多数`SELECT`查询转到本地只读副本，而`INSERT`、`DELETE`、`UPDATE`和`CALL`（更新数据的存储过程）发送到全局主服务器。那么，你最大的担心变成了你只有[最终一致性的事实](http://en.wikipedia.org/wiki/Eventual_consistency)在只读副本上。使用适当大小的服务器和编写良好的查询，这是非常快的（受制于光学和电信号全球传播的物理定律），但它不是瞬时的。您必须做的是对于最近对数据库进行更改的会话，它们的读取可能需要访问全局主服务器——如果您下订单，您需要立即查看订单，因此主服务器可能是最好的地方，马上。稍后，查看本地副本将起作用。由于跨区域问题，您仍然超出 RDS 的范围......但是 EC2 上的 MySQL 非常适合。

只读副本对主服务器施加了非常小的负载，但即使是这种负载也可以通过将单个只读副本连接到主服务器，然后将下游只读副本连接到该中间服务器来减轻。

在主服务器和副本上设置`slave_compressed_protocol`= 1 将使机器能够使用压缩连接来传输复制事件。我发现这个比例在 3:1 到 10:1 之间，具体取决于被复制数据的性质，并且压缩和解压缩数据的延迟似乎微不足道。

此外，您可以设置第二个主控，与主主控相邻（可能在不同的 A/Z 中），将这两个服务器与主控复制链接，将只读副本链接到第二个主控，使用自动增量增量和偏移量适当，但在正常情况下**不要写入或读取**第二个主机。你为什么要这样做？这样，您就有了第二个全局主节点，如果主主节点发生故障，您可以通过重定向您的应用程序访问它来立即投入使用。

当然，您的应用程序的性质在实际需要多少全局集成方面起着重要作用。解决这个问题需要您重新考虑应用程序的工作方式，以确定是否需要进行架构更改。

作为一名 DBA，我不喜欢 RDS 强加给我的一些限制和灵活性约束。作为失去控制的回报，我真正得到的只是备份和时间点恢复的相对简单性……我喜欢……但是，对我来说，这些并不能弥补限制。

* * *

脚注：在第 3 段中，我说“事务按照提交的顺序在每个服务器上复制。” 但这并不一定意味着在现实世界的挂钟实际顺序中它们被提交......它实际上意味着它们被提交到每个服务器相对于该服务器提交的其他事务的顺序。 .. 因此，在服务器 #3 上的不同事务之前实际提交的服务器 #1 上的事务可能会在来自 #3 的事务之后而不是之前到达服务器 #4，具体取决于事务通过服务器 #2 传播所需的时间并在服务器 #3 上提交。然而，这在原则上仍然“足够真实”，因为如果 #1 上的事务在服务器 #3 上被认为与 #3 上发生的任何事情相冲突，

# artificial-intelligence - 用于模拟 AI 汽车的优秀 3D 引擎？

> ID：14037235
> 
> 赞同：0
> 
> 时间：2012-12-26T07:13:02.107
> 
> 标签：artificial-intelligence, neural-network, simulation, game-engine

我正在尝试制造一辆汽车，它可以使用来自使用神经网络的车载 Android 摄像头的视频帧自动驾驶。我还没有买硬件（汽车+安卓）。

同时，我想通过流式传输来自 3D 模拟器的视频帧来模拟驱动程序应用程序（在我的笔记本电脑上），看看是否可以正常工作。

什么是易于学习且大部分为预配置的引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:27:42.037

我认为没有简单的方法可以做到这一点。在我们的机器人实验室中，我们使用[**ROS**](http://www.ros.org/wiki/)进行此类模拟。

它包括一个 3D 模拟器（Gazebo）、相机和传感器模拟以及许多其他东西。[您可以在此视频](https://www.youtube.com/watch?v=W8z_rJyEVZg)中看到 3D 机器人/相机模拟的示例。

不幸的是，ROS 并不容易学习，也没有完整的文档。

另一种可能性是使用**Blender**（用于 3D 的开源、跨平台工具套件）。有一些使用 Blender 的机器人项目（您可以查看[此页面](http://wiki.blender.org/index.php/Community%3aScience/Robotics)了解更多信息），但我没有个人经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:15:35.917

您可以尝试[V-Rep](http://www.coppeliarobotics.com/)，尽管它是一种商业产品，其性能要优越得多。它已经内置了自动驾驶汽车的模型。如果您来自印度，请联系 [Asimov Robotics](http://asimovrobotics.com/)，他们是经销商

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-26T18:00:18.527

为了更新 2017 年的答案，Gazebo 似乎是当今可用的领先 3D 模拟引擎之一。绝对值得研究这种应用程序。

他们主页的摘录：

> 机器人仿真是每个机器人专家工具箱中必不可少的工具。精心设计的模拟器可以使用真实场景快速测试算法、设计机器人、执行回归测试和训练 AI 系统。Gazebo 提供了在复杂的室内和室外环境中准确有效地模拟机器人群体的能力。强大的物理引擎、高质量的图形以及方便的程序和图形界面触手可及。最重要的是，Gazebo 是免费的，拥有一个充满活力的社区。

[http://gazebosim.org/](http://gazebosim.org/)

此外，游戏 Grand Theft Auto 已被用于测试自动驾驶汽车算法。有 API 可以做所有事情，从改变行人交通、灯光、天气等等。

# c# - 将字节数组（从读取文件）转换为字符串

> ID：14037240
> 
> 赞同：2
> 
> 时间：2012-12-26T07:13:27.823
> 
> 标签：c#, type-conversion

所以，我使用`ReadFile`from`kernel32`来读取文件。`SetFilePointer`这是我在和的帮助下读取文件的代码`ReadFile`。

```
public long ReadFileMe(IntPtr filehandle, int startpos, int length, byte[] outdata)
{
    IntPtr filea = IntPtr.Zero;
    long ntruelen = GetFileSize(filehandle, filea);
    int nRequestStart;
    uint nRequestLen;
    uint nApproxLength;
    int a = 0;
    if (ntruelen <= -1)
    {
        return -1;
    }
    else if (ntruelen == 0)
    {
        return -2;
    }

    if (startpos > ntruelen)
    {
        return -3;
    }
    else if (length <= 0)
    {
        return -5;
    }
    else if (length > ntruelen)
    {
        return -6;
    }
    else
    {
        nRequestStart = startpos;
        nRequestLen = (uint)length;

        outdata = new byte[nRequestLen - 1];

        SetFilePointer(filehandle, (nRequestStart - 1), ref a, 0);
        ReadFile(filehandle, outdata, nRequestLen, out nApproxLength, IntPtr.Zero);
        return nApproxLength; //just for telling how many bytes are read in this function
    }
} 
```

当我使用这个函数时，它可以工作（用于另一个目的），所以这个代码已经过测试并且可以工作。

但主要问题是，我现在需要将`outdata`函数放入字节的参数转换为`string`.

我尝试使用`Encoding.Unicode`等（所有UTF），但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:32:22.170

嗯... Encoding.Name_of_encoding.GetString 必须工作...尝试这样的事情：

```
var convertedBuffer = Encoding.Convert(
             Encoding.GetEncoding( /*name of encoding*/),Encoding.UTF8, outdata);
var str = Encoding.UTF8.GetString(convertedBuffer); 
```

**更新**：那这个呢？

```
using (var streamReader = new StreamReader(@"C:\test.txt", true))
        {
            var currentEncoding = streamReader.CurrentEncoding.EncodingName;
            Console.WriteLine(currentEncoding);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:30:55.217

尝试使用[`Encoding.GetString (Byte[], Int32, Int32)`](http://msdn.microsoft.com/en-us/library/system.text.encoding.getstring.aspx)方法。`byte`这会将指定`byte`数组中的 s 序列解码为 a `string`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:51:24.773

您可能需要在参数上添加 out 参数`outdata`： [使用 ref 和 out 传递数组](http://msdn.microsoft.com/en-us/library/szasx730%28v=vs.90%29.aspx)

```
public long ReadFileMe(IntPtr filehandle, int startpos, int length, out byte[] outdata) 
```

# asp.net - Telerik 控件在设计页面上出现错误，但可以正常工作

> ID：14037241
> 
> 赞同：0
> 
> 时间：2012-12-26T07:13:33.627
> 
> 标签：asp.net, telerik

![在此处输入图像描述](../Images/a5dbb8257b1f02cd6782b51941c3f770.png)

在设计视图上给我这个错误，但它在代码视图和代码隐藏中有效。笏可能是什么原因？我有 Telerik 的旧 .dll

我正在使用 Visual Studio 2010。我没有使用任何 Telerik 安装。我将“Telerik.Web.UI.dll”复制到 Bin 目录中，然后添加对我的项目的引用

我只有 1 个 dll ("Telerik.Web.UI.dll" ) 我是否还需要其他 dll 才能在设计视图上工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:51:32.730

I think that you must install Telerik controls to be able to use them in designer.

# django - 将裸 URL 映射到等效的 www URL

> ID：14037242
> 
> 赞同：0
> 
> 时间：2012-12-26T07:13:35.173
> 
> 标签：django, dns

我目前正在为应用程序使用 dotcloud 托管，我正在使用我的域名注册商 namecheap 重定向我的裸 url（通过“@”主机名和“*”主机名作为 URL 直接 - 然后将 www 的 cname 重定向到 dotcloud）

这适用于将人们重新引导回主 www。

我的问题是我想将访问者映射到他们试图访问的等效裸域 url。例如[http://example.com/websitepage1](http://example.com/websitepage1)到[http://www.example.com/websitepage1](http://www.example.com/websitepage1)。现在访问网站上的任何页面减去“www”只会将您重定向到主页。

有什么想法或建议吗？？我暂时不希望退出 dotcloud 托管，但如果无法让它以另一种方式工作，我会这样做。

谢谢！

**更新** 需要重定向的 url 是动态创建的，因此对它们进行硬编码并非不可能。DNS 不一定要便宜。如果有允许将裸 url 重定向到 www 等价物的选项，我可以将名称服务器放在其他位置。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:25:41.630

您需要在 nginx.conf 中添加重写规则：

```
 server {
        server_name  hostname.org;
        rewrite ^(.*) http://www.hostname.org$1 permanent;
    } 
```

您可以通过在应用程序顶部创建一个名为 nginx.conf 的文件来指定自定义重写规则（实际上几乎是任何 Nginx 设置）。[http://docs.dotcloud.com/0.9/guides/nginx/](http://docs.dotcloud.com/0.9/guides/nginx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:54:35.387

鉴于他们的文档 (0)，似乎可以使用 Namecheap 的转发选项进行以下 301/302 重定向：

1.  设置裸域重定向从`example.com`到`www.example.com`
2.  `example.com/url/ to`使用来自www.example.com/url/的 url 设置裸域重定向

我在文档中没有看到它说他们支持通配符选项，因此对于您想要支持的每个 url，似乎您可能必须创建一个转发条目。

(0): [http://www.namecheap.com/support/knowledgebase/article.aspx/385/77/how-do-i-setup-url-forwarding-for-a-domain](http://www.namecheap.com/support/knowledgebase/article.aspx/385/77/how-do-i-setup-url-forwarding-for-a-domain)

# spring - JtaTransaction 与 Resin

> ID：14037243
> 
> 赞同：1
> 
> 时间：2012-12-26T07:13:41.197
> 
> 标签：spring, hibernate, jta, resin, xa

我使用 Resin 的 JtaTransactionManager 来管理 Resin Server 中的 jta 事务，下面是事务管理器的 spring 配置。

```
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="allowCustomIsolationLevels">
        <value>true</value>
    </property>
</bean> 
```

以下是数据源配置。

```
<bean id="dataSourceFinance" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName"><value>${hibernate.connection.driver_class}</value></property>
    <property name="url"><value>${hibernate.connection.finance.url}</value></property>
    <property name="username"><value>${hibernate.connection.finance.username}</value></property>
    <property name="password"><value>${hibernate.connection.finance.password}</value></property>
</bean> 
```

1.  我想知道为什么公共连接也支持两阶段提交，因为这个配置可以很好地工作。
2.  当我必须用 xa 连接替换 dbcp 的连接时。
3.  dbcp 的连接是否支持两阶段提交。

# javascript - 如何使用 java 脚本检测互联网连接类型？

> ID：14037249
> 
> 赞同：0
> 
> 时间：2012-12-26T07:14:42.280
> 
> 标签：javascript, web-applications, servlets, connection

在基于 Web 的应用程序中，我使用 JSP 和 servlet。当用户从他的计算机访问应用程序时，用户应该知道他/她正在使用什么连接。如何检测用户的互联网连接类型并将其显示在页面上？

实际上，我想检测连接类型，即用户是使用代理还是直接（使用 USB 调制解调器）互联网。

有没有可能使用 java-script 检查这个？如果不是，那么有什么可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:57:40.410

你可以试试：

var online = navigator.onLine;

签出以下几行：

```
var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

function updateConnectionStatus() {
  alert("Connection bandwidth: " + connection.bandwidth + " MB/s");
  if (connection.metered) {
    alert("The connection is metered!");
  }
}

connection.addEventListener("change", updateConnectionStatus);
updateConnectionStatus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:23:52.147

我很想知道是否有一个，但我确定 javascript 没有足够的 previlleges 来检测它

# c# - C#为什么有时线程在睡眠后不唤醒

> ID：14037251
> 
> 赞同：1
> 
> 时间：2012-12-26T07:14:48.527
> 
> 标签：c#, thread-sleep, wakeup

我有一个线程，有一个循环：

```
While (IsRunning){
     Scan DB
     If (having Data) then Enqueue
     Else {
        Log.Debug("No Data");
        Sleep(onePeriod);
     }
} 
```

为什么有时候我的线程在睡眠一段时间后没有醒来？

我检查日志（Log by `Common.Logging.Log4Net`），当没有数据时，我的线程会定期写入日志，而当其他线程仍在继续运行时突然什么也不做。

请帮我。

我的代码：

```
while (_isRunning)
{
#region Check if not Online
try
{
    if (!Tw2iConfig.IsOnlineEnable())
    {
        if (Tw2iConfig.CheckShowDebugLoop(ref loopViewTimeIncasOnline))
            Log.Debug(string.Format("{0}Check Server online: Time OFFLINE! Sleep {1}ms truoc khi recheck!"
                , prefixLog, Tw2iConfig.SleepWhenCheckOnlineIncas));
        Thread.Sleep(Tw2iConfig.SleepWhenCheckOnlineIncas);
        continue;
    }
} catch(Exception ex)
{
    Log.Error(string.Format("{0}Check config error", prefixLog), ex);
    if (!_isRunning) break;
    Thread.Sleep(Tw2iConfig.SleepScanCMSRequest);
    continue;
}
#endregion

#region Loop get Data from DB
bool requireSleep = false;
try
{
    //Neu ko trong thoi gian Online day => Sleep
    var requestDatas = requestDataDal.GetRequestData((int)RequestStatus.NewRequest);
    if (requestDatas == null || requestDatas.Count == 0)
    {
        Log.Debug(string.Format("{0}Query DB: no RequestData(s) found! Sleep {1}ms before re-scan DB!"
                        , prefixLog, Tw2iConfig.SleepScanCMSRequest));              
        requireSleep = true;
    }
    else
    {
        Log.Info(string.Format("{0}Query DB: found {1} RequestData(s)! Loop & enqueue!"
                    , prefixLog, requestDatas.Count));
        foreach (RequestData requestData in requestDatas)
        {
            try
            {
                if (!_isRunning)
                    break;
                // While Queue Full -> no Enqueue more data!!!
                DateTime loopView = DateTime.Now;
                while (MsgQueue.ShareInstance.IsFull())
                {
                    if (!_isRunning)
                        break;
                    if (Tw2iConfig.CheckShowDebugLoop(ref loopView))
                        Log.Debug(string.Format("{0}Query full, hang Request {2}. Wait & sleep {1}ms"
                                    , prefixLog, Tw2iConfig.SleepQueueFull, requestData.RequestId));
                    Thread.Sleep(Tw2iConfig.SleepQueueFull);
                }
                // Add CmsChannel to RequestData to be able to response right!!!
                requestData.CmsChannel = cmsChannel;
                ProcessOne(requestData);
            }
            catch (Exception ex)
            {
                Log.Error(string.Format("{0}Error when wait & enqueue RequestData [Id: {1}]",
                    prefixLog, requestData == null ? -1 : requestData.RequestId), ex);
            }
        }
    }
} catch(Exception ex)
{
    Log.Error(string.Format("{0}Loi query RequestData(s)", prefixLog), ex);
    requireSleep = true;
}
#endregion

if (!_isRunning) break;
if (requireSleep)
        Thread.Sleep(Tw2iConfig.SleepScanCMSRequest);   
} 
```

# android - How to pass Cursor Object to next Activity using Intents

> ID：14037254
> 
> 赞同：5
> 
> 时间：2012-12-26T07:14:58.103
> 
> 标签：android, android-activity, android-cursor

I'm familiar with how to pass Raw Data(String, int, boolean etc) from one Activity to another Activity. But in my application, I want to pass a `Cursor` object to next Activity. I'm extending my class from the `Activity` Class.

Though I have looked at this [post](https://stackoverflow.com/questions/11098736/how-can-i-pass-cursor-to-another-activity). but it provides cotradictory solutions. However, as described by one of the users, one should extend `Application class` to pass cursor data. But I want to extend `Activity` class. So is there any way to pass `Cursor` data from an Activity to another Activity.

**Note-** If it helps, the fact why I want to use the cursor is, I'm `querying` data for a particular contact clicked from the list and saving it in the cursor and I want to pass the same cursor data to the next Actvity.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:04:50.297

*   Re-query your cursor on the destination side.
*   Store the cursor data in a class which implements Parcelable.(when your cursor data is in small size).

Above both method will work perfectly, concern really coming when you dealing with Static ones.

*Remember: To open/close cursor and database when required.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:33:30.570

your Cursor is just a reference of your requites query you executed to SQLite and passing Cursor it not good idea . Although if your data is not much sized then you can get data from Cursor and save it in any collection and pass it as serialized form to another activity via intent .

# javascript - 跟踪 Facebook 评论插件中的按钮点击

> ID：14037255
> 
> 赞同：0
> 
> 时间：2012-12-26T07:15:14.423
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk, facebook-social-plugins

有没有办法跟踪 Facebook 评论插件中的按钮点击？例如，为了增加我自己数据库中的评论计数器。这个插件有回调吗？提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:35:58.263

您可以使用标签获取计数：

> FB：评论数

见：[评论](https://developers.facebook.com/docs/reference/plugins/comments/)

**更新**

```
FB.Event.subscribe('comment.create', function(response) 
{  
   //comment is created
});

FB.Event.subscribe('comment.remove', function(response) 
{  
   //comment is removed
}); 
```

# html - 通过knockoutjs获取html中的数组值

> ID：14037256
> 
> 赞同：0
> 
> 时间：2012-12-26T07:15:14.673
> 
> 标签：html, knockout.js

我从如下数组中获取价值：

```
self.users = ko.computed(function(){
var list = ko.utils.arrayMap(self.tasks(), function(item){
return item.members + item.skype
});
var val = ko.utils.arrayGetDistinctValues(list);
alert(val);
return val;}); 
```

它的显示值如下：

```
user1skype_user1, user2skype_user2 
```

但我的问题是我需要在用户的 foreach 循环中的 html 中显示这个值。我的html代码如下：

```
<tbody data-bind="foreach: users">
<tr>
 <td>
  <b><span data-bind="text: //membername" /></b>
 </td>
 <td>
  <span data-bind="text : //skypeid"></span>
 </td>
 </tr>
//another fareach loop</tbody> 
```

我通过采用另一种方法创建了 jsfiddle。但它根据tasknos重复。 [jsfiddle 在另一种方法](http://jsfiddle.net/TQXja/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:12:55.737

我的需要是获得一组用户，无论任务是什么。我添加了一个 javascript 函数来获取单组用户并将其放入 self.users。我已经更新了我的 jsfiddle [http://jsfiddle.net/TQXja/9/](http://jsfiddle.net/TQXja/9/)

```
self.users = ko.computed(function(){
var distinctUsers = "";
var distinctList = new Array();;

var list = ko.utils.arrayMap(self.tasks(), function(item){
    if(distinctUsers.indexOf("|"+ item.members) == -1)
    {
        distinctUsers += "|"+ item.members;
        return item;
    }
});

//clean empty objects
for(i = 0; i < list.length; i++)
{
    if(list[i] != null)
    {
        distinctList.push(list[i]);
    }
}

return ko.utils.arrayGetDistinctValues(distinctList);}); 
```

现在它的工作。

# c++ - 在 C++ 中使用 OpenCV 在给定中心像素值的情况下设置矩形 ROI

> ID：14037259
> 
> 赞同：0
> 
> 时间：2012-12-26T07:15:27.260
> 
> 标签：c++, image-processing, opencv, roi

我正在尝试在图像上创建一个矩形 ROI，其中某个像素的位置是矩形的中心。我该怎么做呢？

```
image= imread("C:\\image.png",1);
watermark=imread("C:\\watermark.png",0);
split(image,yuv_channels);

ROI=yuv_channels[0](Rect(100,100,watermark.cols,watermark.rows)); 
```

我应该如何修改它，使位置 (100,100) 位于 ROI 的中心？

预先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:23:42.197

我之前在 c# 中做过，Image 类中有一个函数。名为“SetROI()”的方法，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:38:03.383

使用以下代码创建一个以 x,y 为中心的 MxM 矩形。点 a,b 可以作为 OpenCV rect 函数中矩形的锚点

```
 Point a;
    Point b;
    //MxM rectangle
    a.x = x - M/2;
    a.y = y - M/2;
    b.x = x + M/2;
    b.y = y + M/2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T22:15:31.820

我不确定我是否理解，但如果你只想指出 (rect.x, rect.y) 位于矩形的中间，只需使用以下代码：

```
Rect rect = Rect(100, 100, 234, 456);
rect -= Point(rect.width/2, rect.height/2) 
```

或者如果您想在一行中执行此操作：

```
Rect rect = Rect(100 - watermatk.cols/2, 100 - watermark.rows/2, watermark.cols, watermark.rows); 
```

# wordpress - 将多个复选框值添加到 wordpress 中的用户元框

> ID：14037261
> 
> 赞同：1
> 
> 时间：2012-12-26T07:15:34.173
> 
> 标签：wordpress, user-profile

我发现了一篇关于向用户个人资料页面添加额外字段的帖子。之后，我想将额外的字段保存到 usermeta 表中。我通过以下代码完成的。

```
add_action( 'personal_options_update', 'my_save_badge_profile_fields' );
add_action( 'edit_user_profile_update', 'my_save_badge_profile_fields' );

function my_save_badge_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;

    /* Copy and paste this line for additional fields. Make sure to change 'twitter' to the field ID. */
    update_usermeta( $user_id, 'badge', $_POST['badge'] );
} 
```

但是现在我想将一组值存储到“徽章”名称中，因为我在管理员的用户个人资料页面中添加了多个复选框，并且我在用户个人资料页面中添加更多复选框的代码如下所示。

```
add_action( 'show_user_profile', 'my_show_badge_profile_fields' );
add_action( 'edit_user_profile', 'my_show_badge_profile_fields' );

function my_show_badge_profile_fields( $user ) { 

?> <h3>User Badges</h3> 
    <table class="form-table">
        <tr>
            <th><label for="twitter">Badges:</label></th>

<?php
    $args = array(
            'post_type' => 'badge',
        );
        // The query itself
        $sb_user_query = new WP_Query( $args );
        // The loop
        while ( $sb_user_query->have_posts() ) : $sb_user_query->the_post();
            $badge_id = $sb_user_query->post->ID;
            $badge_title = get_the_title();
            $badge_image_small = get_the_post_thumbnail( $badge_id, array(16,16) );

        ?>
            <td>
              <?php echo $badge_image_small; ?> <input type="checkbox" value="<?php echo $badge_title; ?>" name="badge">
            </td>
<?php 
  endwhile;
?>
        </tr>

    </table>
<?php
} 
```

现在我想将数据库中的 usermeta 表中的数据像数组一样保存，就像复选框中的名称是 'badge' 而值是像 {'a','b','c'} 这样的数组。

# macos - 从 AWS S3 存储桶加载图像作为缩略图

> ID：14037262
> 
> 赞同：0
> 
> 时间：2012-12-26T07:15:41.143
> 
> 标签：macos, amazon-s3, nstableview, nsimagecell

我的 Mac OSX 应用程序将图像从 mac 上传到 AWS S3。我正在尝试从 AWS S3 存储桶上的文件加载图像表。我不想在台式电脑上下载图像，而只是将其作为缩略图加载到 NSTableView 上以供查看。是否有任何 S3 方法可以从 AWS S3 加载图像内容？

# c - 如何使用 C 压缩字符串并用其计数替换重复项？

> ID：14037263
> 
> 赞同：4
> 
> 时间：2012-12-26T07:15:51.503
> 
> 标签：c, string, compression

我有一个大字符串 char myStr="AAAABBBCCCCCCDDDEFGHHIJJ"。我将把这个字符串传递给我的字符串压缩函数，它应该以以下格式返回字符串 myStr ="A4B3C6D3EFGH2IJ2" 此外，新的字符串替换应该只发生在相同的传递字符串中。无法创建临时数组。

下面是我的函数，我无法找出删除重复项并用同一字符串中的计数替换。

```
 #include<stdio.h>
 #include<string.h>

 char* StrCompress(char myStr[])
 {
char *s = myStr;
int len = strlen(myStr);
char *in = myStr;
int count =0;
int i=0;

while(*(s) != '\0')
{
    if(*(s)==*(s+1))
    {
        count++;

        if(count == 1)
        {
            in = s;
        }
        s++;

    }
    else
    {
        //myStr[count-1]=count;
        memcpy(in+1,s+1,count);
        s=in;
        count =0;

    }
    i++;
}

return myStr;

}

int main(){

char myStr[] ="AAAABBBCCCCCEEFGIIJJJKLMNNNNOOO";

printf("Compressed String is : %s\n",StrCompress(&myStr));

return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:37:29.767

稍作修改的版本：

```
char* StrCompress(char myStr[])
{
  char *s, *in;
  for (s = myStr, in = myStr; *s; s++) {
    int count = 1;
    in[0] = s[0]; in++;
    while (s[0] == s[1]) {
      count++;
      s++;
    }   
    if (count > 1) {
      int len = sprintf(in, "%d", count);
      in += len;
    }   
  }
  in[0] = 0;
  return myStr;
} 
```

此外，在使用数组名称调用时，不应使用运算符的地址：

```
StrCompress(myStr); // not StrCompress(&myStr) 
```

如果您假设一个字符不能重复超过 9 次，那么您可以使用`in[0] = '0' + count`以下内容代替`sprintf`：

```
if (count > 1) {
  in[0] = '0' + count;
  in++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:15:22.257

```
#include<stdio.h>

char* StrCompress(char myStr[])
{
    char *s = myStr;
    char *r, *p;
    int count, i;

    while (*s)
    {
        /*initially only 1 character of a kind is present*/
        count = 1;

        /*we check whether current character matches the next one*/
        while (*s && *s == *(s+1))
        {
            /*if yes,then increase the count due to the match 
            and increment the string pointer to next */
            count++;
            s++;
        }

        if (count > 1) /*if more than one character of a kind is present*/
        {
            /*assign the value of count to second occurence of a particular character*/
            *(s - count + 2) = count + '0';

            /*delete all other occurences except the first one and second one using array shift*/
            for (i = 0; i < count - 2; i++)
            {
                p = s + 1;
                r = s;

                while (*r)
                    *r++ = *p++;

                s--;
            }
        }
        s++;
    }

    return myStr;
}

int main()
{
    char myStr[] = "AAAABBBCCCCCCDDDEFGHHIJJ";

    printf("Compressed String is : %s\n", StrCompress(myStr));

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-12T06:00:48.083

```
public static void main(String...args) {
    Scanner sc=new Scanner(System.in);
    System.out.println("Enter the String:");
    String str=sc.next();
    int count=1;
    for(int i=0;i<str.length()-1;i++) {
        Character ch1=str.charAt(i);
        Character ch2=str.charAt(i+1);
        if(ch1.equals(ch2)) {
            count++;
        }
        else
        {
            System.out.print((char)(str.charAt(i)));
            if(count>1) {
                System.out.print(count);
            }
            count=1;
        }
        if(i==(str.length()-2)) 
        {
            if(ch1.equals(ch2))
            {System.out.print(ch1+""+count);}
            else {System.out.print(ch2);}
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T05:08:38.997

```
public static String compress(String str) {
    StringBuilder result = new StringBuilder();
    int i = 0;
    int count = 0;
    while(i < str.length() - 1) {
        count++;
        if (str.charAt(i) != str.charAt(i + 1)) {
            result.append(str.charAt(i)).append(count);
            count = 0;
        }
        i++;
    }
    result.append(str.charAt(i)).append(count + 1);
    return result.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-06T08:14:06.330

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.print("enter the string");
    String s=(new Scanner(System.in)).nextLine();
    String s2=new String("");
    int count=0;

    for(int i=0;i<s.length();i++)
    {
        count=1;

        s2=s2+(s.charAt(i));

        while(i+1<s.length() && s.charAt(i+1)==s.charAt(i)  )
        {
            count++;

            i++;

        }

        s2=s2.concat(count+"");

        }

        System.out.print(s2);
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-04T04:50:58.690

下面是另一个实现，以防万一有人需要它。仅供参考，这种方法称为游程编码

```
#include <iostream>

void CompressString (std::string str)
{
    //count will keep track of the number of occurences of any given character
    unsigned int count = 1;

    //new string to store the values from the original string
    std::string str2 = "";

    //store the first letter of the string initially
    char ch = str[0];

    //run a loop from the second character of the string since first character if stored in "ch"
    for (unsigned int i = 1; i < str.length(); i++)
    {
        if (str[i] == ch)
            count++;
        else
        {
            str2 = str2 + ch + std::to_string (count);
            ch = str[i];
            count = 1;
        }
    }

    //for cases like aabbb
    str2 = str2 + ch + std::to_string (count);

    //check if after compression, the length of the string reduces or not
    if (str.length() > str2.length())
        std::cout << str2 << std::endl;
    else
        std::cout << str << std::endl;
}

int main ()
{
    std::cout << "Enter a string to compress: ";
    std::string str;
    getline (std::cin, str);

    std::cout << "Compressed string is: ";
    CompressString (str);
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T14:15:18.860

这是另一个就地 java 程序。我们可以使用 StringBuilder 代替字符串

```
public static void main(String[] args) {

    String a = "aaabbccaaaddj";

        for(int i=0;i<a.length();i++){
            int c=i+1;
            int duplicateCharCount=1;
            while(c<a.length()&&a.charAt(c)==a.charAt(i)){
                ++c;
                ++duplicateCharCount;
            }

                a=a.substring(0,i+1)+duplicateCharCount+a.substring(i+duplicateCharCount);
                i++;

        }
        System.out.println(a);
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-10T17:31:25.563

```
public class StringCompression {
    public static String compress(String str) {
        StringBuilder result = new StringBuilder();
        int i;
        int count = 0;
        for(i=0; i< str.length() - 1;i++,count++) {
            if (str.charAt(i) != str.charAt(i + 1)) {
                result.append(str.charAt(i)).append(count);
                count = 0;
            }
        }

        result.append(str.charAt(i)).append(count);
        return result.toString();
    }

    public static void main(String[] args) {
        String string = "aaassssdddaaaggghhhfgreeeeeeedrrrrr";
        String x= compress(string);
        System.err.println(x);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-11T12:04:48.570

```
#include<stdio.h>
#include<conio.h>

char* compress(char* str);

int main(){
  clrscr();
  char str[1000];
  scanf("%[^\n]s", str);
  char* s = compress(str);
  printf("\n%s", s);
  getch();
  return 0;
}

char* compress(char* str){
 char* s = str;
 int count = 1;
 char str2[1000] = "\0";
 char* n = str2;
 while(*(s) != '\0'){
    if(count == 1){
      *n = *s;
      n++;
    }
    if(*(s) == *(s+1)){
      count++;
      s++;
    }
    else{
     *n = '0' + count;
     n++;
     count = 1;
     s++;
    }
}
 return str2;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-03T11:06:40.980

这是 ES6 的另一个解决方案：

```
 // aaeezaa : a4e2z1
    function compressString(str) {
        const obj = {};
        const sortedArr = [...str].sort();

        for(i = 0; i<sortedArr.length; i++) {
            let c = 1;

            while((sortedArr[i] === sortedArr[i+1]) && sortedArr[i+1]) {
                c++;
                i++;
            }

            obj[sortedArr[i]] = c;
        }

        return Object.keys(obj).reduce((compressedStr, k) => compressedStr + k + obj[k], '');
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-26T05:38:18.137

我做了两个假设并编写了这段代码，

1.  我们的空间是我们正在编码的字符串大小的两倍。即，假设我们正在编码“ab”，那么分配的空间空间应该至少为 4 个字节。

2.  字母的连续条纹最多可以是 999。如果有可能在相邻位置有 1000 个相同的字符，那么我们必须相应地增加“count_str”字符数组的大小。

```
 #include <stdio.h>
    #include <string.h>

    char *compress(char *input)  {

        int i = 0;

        int count = 1;

        int k = 0;

        int j = 0;

        int len = 0; 

        int digits_in_count = 0;

        char count_str[3];

        int m = 0;

        for(i = 0; i < strlen(input); i++) {

            j = i+1;

            m = 0;

            count = 1;

            len = strlen(input);

            printf("\niteration: %d, string = %s",i, input);

            while((input[j] != '\0') && (input[j] == input[i])) {
                count++;
                j++;
            }

            sprintf(count_str, "%d", count);

            digits_in_count = strlen(count_str);

            //this means we have reaced last alphabet in the string
            if(input[j] == '\0' && count == 1) {

                k = k+1;
                goto count_append;

            }

            input[k++] =  input[i];

            // we are assuming that we have enough space in the end, to move string.
            // we are memmove for remaining portion of the string.
            // if the string is "aaab", then we have to move 'b' one step ahead 
            // and it will look like "aab", later in the end we are adding count,
            // and making it as "a3b".
            // if the string is "ab", then we have to move 'b' one step away,
            // to make space for adding 'count'.
            // and the new string after memmove will looklike "abb",
            // in the end we are adding count and making it as "a1b"
            // memmove will not hit for last character in the string, because there
            // is already enough space for appending 'count'.
            memmove((input+i+digits_in_count+1) , input+j, len-j+1);

            i = i+digits_in_count;

            count_append:
            {
                while(digits_in_count) {

                    input[k++] =  *(count_str+m);

                    m = m+1;
                    digits_in_count--;

                }
            }

        }   

        return input;

    }

    void main()
    {
        char arr[50] = "aaab";
        printf("\n%s\n", compress(arr));
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-25T16:35:38.070

```
void gen_compressed_str(string str){ 
        int len = str.length(); 
        for (int i = 0; i < len; i++) { 

        int count = 1; 
        while (i < len - 1 && str[i] == str[i + 1]) { 
            count++; 
            i++; 
        }
        if (count == 1){
          cout << str[i];
        }
        else{
          cout << str[i]<<count;
        }

    } 
    cout<<endl;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-19T15:49:13.540

```
void stringCompression(char a[]) {
    int i, count=1,j=0;
    for(i=0;a[i]!='\0';i++){
        if(a[i]==a[i+1]){
            count++;
        }
        else if(a[i]!=a[i+1]){
            if(count>1){
                a[j++]=a[i];
                a[j++]=(char)(48+count);
            }
            else if(count==1){
                a[j++]=a[i];
            }
            count=1;
        }
    }
    a[j]='\0';
} 
```

# c# - 如何在 JQuery ajax 中将 json 响应读取为名称值对

> ID：14037267
> 
> 赞同：0
> 
> 时间：2012-12-26T07:16:09.447
> 
> 标签：c#, jquery, json

我想在我的代码`json`中将响应读取为名称和值对。`JQuery`这是我从 dotnet 代码返回的示例 JSON 响应：

```
const string format = "\"HasCases\": \"{0}\""; 
StringBuilder json = new StringBuilder(128); 
json.Append("{"); 
json.AppendFormat(format, JSONString("true"));
json.Append("}"); 
Response.Clear(); 
Response.AppendHeader("Content-type", "application/json; charset=utf-8");                                                                               Response.Write(json.ToString()); 
Response.End(); 
```

要获取 Json 值，是否有必要使用响应代码？在我的 Json 页面中，我能够将输出作为 HasCases：true。

这是我的 JQuery 代码

```
<span id="testSpan" runat="server">inactive</span>
<script type="text/javascript">
inactive 
$.ajax({ 
        type: 'POST',
        url: "~/Pages/UserCaselistnonEmptyAjax.aspx", 
        dataType: "json", 
        success: function (response){
        $('#testSpan').innerHTML = response.HasCases; 
       }, 
     error: function (e1, e2, e3) {
  $('#testSpan').innerHTML = 'Error';
      }
   });
 </Script> 
```

当我在调试表单时，`firebug`我的控件不会。`"$('#testSpan').innerHTML = response.HasCases; "`它是从循环中出来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:18:51.337

jQuery 对象不实现`.innerHTML`. 改用`.html()`：

```
$('#testSpan').html(response.HasCases); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T06:02:42.420

我正在使用返回我的 json

```
return (new JavaScriptSerializer().Serialize(request)); 
```

在我的 c# 代码中。我正在调用在页面加载事件中返回此值的函数。输出是这个

```
{"registration_ids":["1","2"],"data":{"message":"Your message","tickerText":"Your ticker","contentTitle":"Your content"}} 
```

但我无法用 jquery ajax 读取这个返回的 json fomrat 我的 ajax 在下面

```
function as()
  {

                $.ajax({
                      type:"get",
                      url:"mydjson.aspx",
                      contentType: 'application/json;charset=utf-8', 
                      dataType: {'json':'datas'}, 
                      //data: JSON.stringify(request),//{ get_param: 'value' },
                      success:function (msg) {

                                         $("#table").html("<h1>" + msg+ "</h1>").fadeIn("slow");

                                    },
                                      //  function (data, status)

                     error: function (xhr, textStatus, error) 
                            {
                               var errorMessage = error || xhr.statusText;

                                $("#table").html("<h3>" + errorMessage + "</h3>").fadeIn("slow");
                            }
                   });
        return false;
   //   }); 
```

}

我收到错误“Ivalid json”以及页面“mydjson.aspx”的内容。请帮帮我。

# python - 如何将一个函数变量用于另一个函数？

> ID：14037269
> 
> 赞同：-1
> 
> 时间：2012-12-26T07:16:16.077
> 
> 标签：python, django, django-forms, django-templates, cartridge

我在**Django 模板中有两个功能。**

```
def cart(request, template="shop/cart.html"):
 cart_formset = CartItemFormSet(instance=request.cart)

def checkout_steps(request): 
```

**我如何在我的checkout_steps 函数**中使用**cart_formset**变量。.

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:26:08.260

> 我如何在我的 checkout_steps 函数中使用 cart_formset 变量..

1.  如果这两个函数相关，则使用一个类（如 Shopping）并将 cart 和 checkout_steps 添加为成员函数。

    ```
    class Shopping(object):
        def __init__(self):
            self.cart_formset = None
        def cart(self, request, template="shop/cart.html"):
            self.cart_formset = CartItemFormSet(instance=request.cart)
        def checkout_steps(self, request):
            #Use self.cart_formset 
    ```

2.  您还可以将变量 cart_formset, 作为全局变量，使其在整个模块中全局可用

    ```
    def cart(request, template="shop/cart.html"):
         global cart_formset
         cart_formset = CartItemFormSet(instance=request.cart)
    def checkout_steps(self, request):
         #Use self.cart_formset 
    ```

3.  如果函数评估的顺序是确定性的，那么您可以使用装饰器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:24:02.227

你不能。这就是局部变量：它们对于它们所在的函数是局部的。`cart_formset`除了执行时，该变量不存在`cart`。

您可以`cart_formset`从函数返回，然后调用`cart`from`checkout_steps`以获取值。或者您可以将该变量存储在其他地方。我对 Django 的了解还不够，不知道最好的地方在哪里。鉴于您正在做的事情看起来像一个购物车设置，我猜您想将该信息与会话一起存储，因此您可以查看 Django 的会话处理。**

# java - Applet 在 Eclipse 中运行但不在浏览器中运行 - java 安全性

> ID：14037271
> 
> 赞同：-1
> 
> 时间：2012-12-26T07:16:22.970
> 
> 标签：java, security, applet, accesscontrolexception, policyfiles

下面是小程序代码，它使用 jna.jar ( [https://github.com/twall/jna](https://github.com/twall/jna) ) 来访问 system32 中的 DLL 文件。

```
import javax.swing.*;
import javax.print.*;

import java.security.*;
import java.util.ArrayList;
import com.sun.jna.Library;
import com.sun.jna.Native;
import java.awt.*;
import java.awt.event.*;
import java.io.PrintWriter;
import java.io.StringWriter;

import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.platform.win32.WinUser;
import com.sun.jna.platform.win32.WinUser.WNDENUMPROC;
import com.sun.jna.win32.StdCallLibrary;

public class CallApplet extends JApplet implements ActionListener {

    /**
     * 
     */
    private static final long serialVersionUID = 4654357272074276081L;
    static JTextField output;
    private final String ButtonText = "Print";

    public void init() {

        Container contentHolder = getContentPane();

        contentHolder.setLayout(new BorderLayout(18,18));

        output = new JTextField(20);
        //add(output);

        contentHolder.add(output, BorderLayout.CENTER);

        JPanel buttonPanel = new JPanel();

        JButton b = new JButton(ButtonText);
        b.addActionListener(this);

        buttonPanel.add(b);
        contentHolder.add(buttonPanel, BorderLayout.SOUTH);
        validate();
    }

    public void actionPerformed(ActionEvent evt)
    {
        //get the text of the button that was pushed
        String command = evt.getActionCommand();

        output.setText(command);

        // if myButton was pressed, output a message
        if(ButtonText.equals(command)) {
            try {
                this.mprintt("TSC TTP-244 Plus");
            } catch (Exception e) {

            }
        }
    }

    public void setMessage(String message) {
        output.setText(message);
    }

    public interface TscLibDll extends Library {
        TscLibDll INSTANCE = (TscLibDll) Native.loadLibrary ("TSCLIB", TscLibDll.class);
        int about ();
        int openport (String pirnterName);
        int closeport ();
        int sendcommand (String printerCommand);
        int setup (String width,String height,String speed,String density,String sensor,String vertical,String offset);
        int downloadpcx (String filename,String image_name);
        int barcode (String x,String y,String type,String height,String readable,String rotation,String narrow,String wide,String code);
        int printerfont (String x,String y,String fonttype,String rotation,String xmul,String ymul,String text);
        int clearbuffer ();
        int printlabel (String set, String copy);
        int formfeed ();
        int nobackfeed ();
        int windowsfont (int x, int y, int fontheight, int rotation, int fontstyle, int fontunderline, String szFaceName, String content);
    }

    public void mprintt(String printer) {

        try {
            //TscLibDll.INSTANCE.about();
            TscLibDll.INSTANCE.openport(printer);
            //TscLibDll.INSTANCE.downloadpcx("C:\\UL.PCX", "UL.PCX");
            TscLibDll.INSTANCE.sendcommand("REM ***** This is a test by JAVA. *****");
            TscLibDll.INSTANCE.setup("35", "15", "3", "8", "0", "3", "-1");
            TscLibDll.INSTANCE.clearbuffer();
            //TscLibDll.INSTANCE.sendcommand("PUTPCX 550,10,\"UL.PCX\"");
            TscLibDll.INSTANCE.printerfont ("290", "8", "3", "0", "1", "1", "ARTICLE NO");
            TscLibDll.INSTANCE.barcode("290", "35", "128", "50", "1", "0", "2", "2", "123456789");
            //TscLibDll.INSTANCE.windowsfont(400, 200, 48, 0, 3, 1, "arial", "DEG 0");
            //TscLibDll.INSTANCE.windowsfont(400, 200, 48, 90, 3, 1, "arial", "DEG 90");
            //TscLibDll.INSTANCE.windowsfont(400, 200, 48, 180, 3, 1, "arial", "DEG 180");
            //TscLibDll.INSTANCE.windowsfont(400, 200, 48, 270, 3, 1, "arial", "DEG 270");
            TscLibDll.INSTANCE.printlabel("1", "1");
            TscLibDll.INSTANCE.closeport();
            output.setText("printed");
        } catch (Exception e) {
            StringWriter sw = new StringWriter();
            PrintWriter pw = new PrintWriter(sw);
            e.printStackTrace(pw);
            output.setText(sw.toString());
        }
    }
} 
```

我的 HTML 代码

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<applet codebase ="." code="CallApplet.class"
        archive="CallApplet.jar,jna.jar,platform.jar"
        height="100" width="100"/>
</body>
</html> 
```

当我尝试单击打印时，我可以看到加载的小程序和浏览器中的所有摆动元素，它不会做任何事情。在eclipse运行它工作正常。

我知道这是安全问题，所以我还添加了策略（C:\Program Files\Java\jre7\lib\security\java.policy 文件）

```
grant codeBase "http://localhost:8080/appletproj/*" {
    permission java.security.AllPermission;
}; 
```

堆栈跟踪

```
Exception in thread "AWT-EventQueue-7" java.lang.NoClassDefFoundError: com/sun/jna/Library
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at CallApplet.mprintt(CallApplet.java:185)
    at CallApplet.actionPerformed(CallApplet.java:60)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.sun.jna.Library
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 55 more 
```

但即使这样也无济于事。请指导我哪里出错了。

解决方案

坦率地说，我没有得到解决方案，而是这不是一个安全问题，所以用实际错误创建新问题

因此，要获得我启用了 java 控制台的确切错误（由 andrew 建议），您可以[转到此处](http://www.java.com/en/download/help/javaconsole.xml)了解如何操作。

更新

几天后我让它工作了，问题是 jna.jar 和 platform.jar 已经签名所以每当我使用 jarsigner 签名它们时它从来没有工作过，我从来没有遇到任何错误（所以我从来没有看过它们），当我验证时它使用 jarsigner 我想通了。然后我取消签名并使用与我的 jar 相同的密钥对其进行签名（希望它会帮助其他人）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:25:22.037

> ..还添加了政策..但即使这样也无济于事。

策略文件很少（如果有的话）是一个好主意。如果需要信任代码，请对存档进行数字签名。

# java - 检票口模式弹出关闭问题

> ID：14037276
> 
> 赞同：0
> 
> 时间：2012-12-26T07:16:41.387
> 
> 标签：java, wicket, wicket-1.5

我有一个页面，我称之为模式弹出窗口。再次在保存操作中，我调用了另一个确认模式弹出窗口。现在，当我单击确定时，我应该关闭两个模式弹出窗口。它在除 IE9 和 Chrome 之外的所有浏览器中都能正常工作。

错误：

```
Wicket.Ajax: Wicket.Ajax.Call.failure: Error while parsing response: 
Could not find root <ajax-response> element wicket-ajax-debug-ver-1356005121064.js:91
WicketAjaxDebug.logError wicket-ajax-debug-ver-1356005121064.js:91
Wicket.Log.error wicket-ajax-ver-1356005121064.js:116
Wicket.Ajax.Call.failure wicket-ajax-ver-1356005121064.js:1098
Wicket.Ajax.Call.loadedCallback wicket-ajax-ver-1356005121064.js:1297
Wicket.Ajax.Request.stateChangeCallback wicket-ajax-ver-1356005121064.js:1048
Wicket.Window.close modal-ver-1356005121079.js:822
close`enter code here` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:55:11.183

我已经解决了这个问题。只是认为其他人可以使用这种方式来解决，所以分享我的想法。在这里，我首先关闭了顶部模态弹出窗口，然后关闭了顶部模态弹出窗口的回调。我已经关闭了第二个模态弹出窗口。

# javascript - 如何更改 Morris.js 折线图中的点点颜色和样式？

> ID：14037281
> 
> 赞同：6
> 
> 时间：2012-12-26T07:17:32.580
> 
> 标签：javascript, graph, charts, raphael, morris.js

我使用[morris.js](http://www.oesmith.co.uk/morris.js/)绘制折线图，​​但我不知道如何改变折线图中的点颜色和样式。有谁知道如何改变点样式？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T22:23:40.390

使用该`pointFillColors`物业。从文档中：

> pointFillColors 系列点的颜色。默认情况下使用与 lineColors 相同的值

这是带有蓝线和绿点的图表示例：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="raphael-min.js"></script>
<script type="text/javascript" src="morris.min.js"></script>
<script type="text/javascript">
function drawChart() {
    Morris.Line({
        element: 'chart',
        data: [
            {y: '2012', a: 100},
            {y: '2011', a: 75},
            {y: '2010', a: 50},
            {y: '2009', a: 75},
            {y: '2008', a: 50},
            {y: '2007', a: 75},
            {y: '2006', a: 100}
        ],
        xkey: 'y',
        ykeys: ['a'],
        labels: ['Test series'],
        lineColors: ['#0b62a4'],
        pointFillColors: ['#00ff00']
    });
}

window.onload = drawChart;
</script>
<div id="chart" style="width: 400px; height: 250px;"></div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T18:13:52.550

而不是“lineColors”，尝试这样的“颜色”：

```
function drawChart() {
Morris.Line({
    element: 'chart',
    data: [
        {y: '2012', a: 100},
        {y: '2011', a: 75},
        {y: '2010', a: 50},
        {y: '2009', a: 75},
        {y: '2008', a: 50},
        {y: '2007', a: 75},
        {y: '2006', a: 100}
    ],
    colors: ['#0b62a4','#D58665','#37619d','#fefefe','#A87D8E','#2D619C','#2D9C2F']
}); 
```

}

每一行都应该有一种颜色。

# visual-studio-2010 - Visual Studio 2010：预定义的命名空间

> ID：14037283
> 
> 赞同：0
> 
> 时间：2012-12-26T07:17:49.713
> 
> 标签：visual-studio-2010, namespaces, installation

我只想知道是否可以在创建新项目（例如 Web 表单）后立即放置其他名称空间

默认（预定义）命名空间：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls; 
```

我想补充

```
using System.Data.SqlClient;
using System.Data; 
```

作为预定义的命名空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:37:52.193

请检查以下链接：

[http://www.rhyous.com/2010/02/17/how-to-modify-the-default-new-class-template-in-visual-studio-2008/](http://www.rhyous.com/2010/02/17/how-to-modify-the-default-new-class-template-in-visual-studio-2008/)

# java - 在面板内绘制图像

> ID：14037284
> 
> 赞同：1
> 
> 时间：2012-12-26T07:17:51.210
> 
> 标签：java, image, swing, jlabel

我有一个带有两个按钮的面板。我正在尝试在面板内插入图像，并且我想在单击按钮后在图像内画线。我使用了下面的代码，但这似乎不起作用。

```
public class Try_Panel extends JFrame {
  // start attributes
  private JPanel jPanel1 = new JPanel(null, true);
  private JButton jButton1 = new JButton();
  private JButton jButton2 = new JButton();
  // end attributes

  public Try_Panel(String title) {
    // Frame-Init
    super(title);
    setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    int frameWidth = 300; 
    int frameHeight = 300;
    setSize(frameWidth, frameHeight);
    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (d.width - getSize().width) / 2;
    int y = (d.height - getSize().height) / 2;
    setLocation(x, y);
    setResizable(false);
    Container cp = getContentPane();
    cp.setLayout(null);
    // start components

    jPanel1.setBounds(48, 24, 209, 145);
    jPanel1.setOpaque(false);
    cp.add(jPanel1);
    jButton1.setBounds(88, 208, 75, 25);
    jButton1.setText("jButton1");
    jButton1.setMargin(new Insets(2, 2, 2, 2));
    jButton1.addActionListener(new ActionListener() { 
      public void actionPerformed(ActionEvent evt) { 
        jButton1_ActionPerformed(evt);
      }
    });
    cp.add(jButton1);
    jButton2.setBounds(184, 208, 75, 25);
    jButton2.setText("jButton2");
    jButton2.setMargin(new Insets(2, 2, 2, 2));
    jButton2.addActionListener(new ActionListener() { 
      public void actionPerformed(ActionEvent evt) { 
        jButton2_ActionPerformed(evt);
      }
    });
    cp.add(jButton2);
    // end components

    setVisible(true);
  } // end of public Try_Panel

  // start methods
  public void jButton1_ActionPerformed(ActionEvent evt) {
      BufferedImage image=new BufferedImage(jPanel1.getWidth(), jPanel1.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
        JLabel l=new JLabel(new ImageIcon(image));
        Graphics graphics = image.getGraphics();
        Graphics2D g = (Graphics2D) graphics;
        g.fillRect(0, 0, image.getWidth(), image.getHeight());
        g.setColor(Color.BLUE);
        g.drawLine(0, 0, 300, 400);
        jPanel1.add(l);
  } // end of jButton1_ActionPerformed

  public void jButton2_ActionPerformed(ActionEvent evt) {
    // TODO add your code here
  } // end of jButton2_ActionPerformed

  // end methods

  public static void main(String[] args) {
    new Try_Panel("Try_Panel");
  } // end of main

} // end of class Try_Panel 
```

最大的问题是在我的其他课程中使用相同的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:31:27.210

尝试在更新后将其包裹`image`起来`ImageIcon`。此外，您还应该`Graphics#dispose`在完成对图形上下文的渲染时调用。

```
public void jButton1_ActionPerformed(ActionEvent evt) {
    BufferedImage image=new BufferedImage(jPanel1.getWidth(), jPanel1.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
    Graphics2D g = image.createGraphics();
    g.fillRect(0, 0, image.getWidth(), image.getHeight());
    g.setColor(Color.BLUE);
    g.drawLine(0, 0, 300, 400);
    g.dispose();
    JLabel l=new JLabel(new ImageIcon(image));
    jPanel1.add(l);
} 
```

您还应该依靠布局管理器而不是尝试自己做，它只会让您的生活更轻松。

就个人而言，我认为直接绘制到自定义组件会更容易，比如`JPanel`. 查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)以获取更多详细信息

**更新示例**

基本上，我将您的示例更改为

1.  使用布局管理器
2.  在 EDT 的上下文中加载 UI
3.  `revalidate`这`jPanel1`

```
public class BadLabel extends JFrame {
    // start attributes

    private JPanel jPanel1 = new JPanel(new BorderLayout(), true);
    private JButton jButton1 = new JButton();
    private JButton jButton2 = new JButton();
    // end attributes

    public BadLabel(String title) {
        // Frame-Init
        super(title);
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        int frameWidth = 300;
        int frameHeight = 300;
        setSize(frameWidth, frameHeight);
        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (d.width - getSize().width) / 2;
        int y = (d.height - getSize().height) / 2;
        setLocation(x, y);
//        setResizable(false);
        Container cp = getContentPane();
//        cp.setLayout(null);
        // start components

//        jPanel1.setBounds(48, 24, 209, 145);
        jPanel1.setOpaque(true);
        jPanel1.setBackground(Color.RED);
        cp.add(jPanel1);

        JPanel buttons = new JPanel();
//        jButton1.setBounds(88, 208, 75, 25);
        jButton1.setText("jButton1");
        jButton1.setMargin(new Insets(2, 2, 2, 2));
        jButton1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButton1_ActionPerformed(evt);
            }
        });
        buttons.add(jButton1);
//        jButton2.setBounds(184, 208, 75, 25);
        jButton2.setText("jButton2");
        jButton2.setMargin(new Insets(2, 2, 2, 2));
        jButton2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButton2_ActionPerformed(evt);
            }
        });
        buttons.add(jButton2);
        // end components

        cp.add(buttons, BorderLayout.SOUTH);

        setVisible(true);
    } // end of public BadLabel

    // start methods
    public void jButton1_ActionPerformed(ActionEvent evt) {
        BufferedImage image = new BufferedImage(jPanel1.getWidth(), jPanel1.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
        Graphics2D g = image.createGraphics();
        g.fillRect(0, 0, image.getWidth(), image.getHeight());
        g.setColor(Color.BLUE);
        g.drawLine(0, 0, 300, 400);
        g.dispose();
        JLabel l = new JLabel(new ImageIcon(image));
        l.setBorder(new LineBorder(Color.BLUE));
        jPanel1.add(l);
        jPanel1.revalidate();
    } // end of jButton1_ActionPerformed

    public void jButton2_ActionPerformed(ActionEvent evt) {
        // TODO add your code here
    } // end of jButton2_ActionPerformed

    // end methods
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                }
                new BadLabel("BadLabel");
            }
        });
    } // end of main
} // end of class BadLabel} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:21:07.413

像这样的东西：

![Try_Panel](../Images/417ceabb5cfbf2c589f0431dd6961071.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.border.EmptyBorder;

public class Try_Panel {
    // start attributes

    private JButton jButton1 = new JButton("jButton1");
    private JButton jButton2 = new JButton("jButton2");
    private JLabel imageView;
    BufferedImage image;
    int x = 300;
    int y = 50;
    // end attributes

    public Component getGui() {
        JPanel gui = new JPanel(new BorderLayout(5, 5));
        gui.setBorder(new EmptyBorder(3, 3, 3, 3));

        image = new BufferedImage(300, 100, BufferedImage.TYPE_INT_RGB);
        imageView = new JLabel(new ImageIcon(image));

        gui.add(imageView, BorderLayout.CENTER);

        JPanel buttons = new JPanel(new FlowLayout(FlowLayout.CENTER, 15, 15));
        gui.add(buttons, BorderLayout.PAGE_END);

        jButton1.setMargin(new Insets(2, 2, 2, 2));
        jButton1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                jButton1_ActionPerformed(evt);
            }
        });
        buttons.add(jButton1);

        jButton2.setMargin(new Insets(2, 2, 2, 2));
        jButton2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                jButton2_ActionPerformed(evt);
            }
        });
        buttons.add(jButton2);
        // end components

        return gui;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            public void run() {
                // Frame-Init
                JFrame f = new JFrame("Try Panel");
                f.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
                f.setLocationByPlatform(true);
                Container cp = f.getContentPane();
                cp.setLayout(new BorderLayout(3, 3));

                Try_Panel tp = new Try_Panel();
                cp.add(tp.getGui());

                f.pack();
                f.setMinimumSize(f.getSize());
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    } // end of public Try_Panel

    // start methods
    public void jButton1_ActionPerformed(ActionEvent evt) {
        Graphics graphics = image.getGraphics();
        Graphics2D g = (Graphics2D) graphics;
        g.setColor(Color.RED);
        g.drawLine(0, 0, x, y);
        x -= 4;
        y += 2;
        g.dispose();

        imageView.repaint();
    } // end of jButton1_ActionPerformed

    public void jButton2_ActionPerformed(ActionEvent evt) {
        // TODO add your code here
    } // end of jButton2_ActionPerformed
} // end of class Try_Panel 
```

# php - 这在 PHP 中意味着什么 -> 或 =>

> ID：14037290
> 
> 赞同：229
> 
> 时间：2012-12-26T07:18:35.313
> 
> 标签：php, syntax

> **可能重复：**
> [我们在 php 参考中使用对象运算符“->”的地方](https://stackoverflow.com/questions/3037526/where-we-use-object-operator-in-php)
> [- 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我一直在 PHP 中看到这些，但我不知道它们的实际含义。做什么`->`和做`=>`什么。我不是在谈论运营商。他们是别的东西，但似乎没有人知道......

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2012-12-26T07:27:25.527

双**箭头运算符**, `=>`, 用作数组的访问机制。这意味着它左侧的内容将在数组上下文中与右侧的内容具有对应的值。这可用于将任何可接受类型的值设置为数组的相应索引。索引可以是关联的（基于字符串的）或数字的。

```
$myArray = array(
    0 => 'Big',
    1 => 'Small',
    2 => 'Up',
    3 => 'Down'
); 
```

**对象运算符**,用于在对象范围内访问对象的`->`方法和属性。它的意思是说，操作符右边的东西是实例化到操作符左边变量中的对象的成员。实例化是这里的关键术语。

```
// Create a new instance of MyObject into $obj
$obj = new MyObject();
// Set a property in the $obj object called thisProperty
$obj->thisProperty = 'Fred';
// Call a method of the $obj object named getProperty
$obj->getProperty(); 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-12-26T07:25:14.760

`->`用于调用类对象的方法或访问属性

`=>`用于将值分配给数组的键

例如：

```
 $ages = array("Peter"=>32, "Quagmire"=>30, "Joe"=>34, 1=>2); 
```

并且由于**PHP 7.4** + 运算符`=>`也用于添加的[*箭头函数*](https://www.php.net/manual/en/functions.arrow.php)，[*匿名函数*](https://www.php.net/manual/en/functions.anonymous.php)的语法更加简洁。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-12-26T07:21:43.627

`=>`用于关联数组键值分配。看一眼：

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)。

`->`用于访问对象方法或属性。示例：`$obj->method()`。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-12-26T07:24:09.463

**->**

调用/设置对象变量。前任：

```
$obj = new StdClass;
$obj->foo = 'bar';
var_dump($obj); 
```

**=>** 为数组设置键/值对。前任：

```
$array = array(
    'foo' => 'bar'
);
var_dump($array); 
```

# php - 是否需要在 GII 中运行 Bootstrap？

> ID：14037297
> 
> 赞同：0
> 
> 时间：2012-12-26T07:19:48.030
> 
> 标签：php, javascript, ajax, twitter-bootstrap, yii

如果需要为引导运行 Gii，那么我应该运行哪个生成器以及应该运行哪个名称？

这是我的代码：

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap');

return array(
'theme'=>'bootstrap', // requires you to copy the theme under your themes directory
'modules'=>array(
    'gii'=>array(
        'generatorPaths'=>array(
            'bootstrap.gii',
        ),
    ),
),
'components'=>array(
    'bootstrap'=>array(
        'class'=>'bootstrap.components.Bootstrap',
    ),
),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T15:45:43.597

```
`enter code here` 'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'admin',
            'generatorPaths'=>array(
                'bootstrap.gii',
            ),
        ), 
```

# makefile - Makefile：测试头文件的目标

> ID：14037301
> 
> 赞同：1
> 
> 时间：2012-12-26T07:20:04.363
> 
> 标签：makefile

我的开源项目分发了一个 Makefile。只要用户安装了 Boost 和 OpenSSL，“make”本身就可以正常工作。如果没有，他会得到一个编译错误。

我想向用户显示一条错误消息，其中包含有关如何修复的说明，而不是让他从编译器输出中辨别出问题。

我已经编写了一个小脚本嵌入到 Makefile 中，它将进行快速而肮脏的编译，以在允许构建核心代码之前验证是否存在先决条件头文件。如果代码无法编译，它会显示错误消息并中止编译。它似乎运作良好。

```
# BOOST_INCLUDE := -I/home/jselbie/boost_1_51_0

all: myapp

testforboost.o:
    @echo "Testing for the presence of Boost header files..."
    @rm -f testforboost.o
    @echo "#include <boost/shared_ptr.hpp> " | $(CXX) $(BOOST_INCLUDE) -x c++ -c - -o testforboost.o 2>testerr; true
    @rm -f testerr
    @if [ -e testforboost.o ];\
    then \
        echo "Validated Boost header files are available";\
    else \
        echo "* ********************************************";\
        echo "* Error: Boost header files are not avaialble";\
        echo "* Consult the README file on how to fix";\
        echo "* ********************************************";\
        exit 1;\
    fi

myapp: testforboost.o
    $(CXX) $(BOOST_INCLUDE) myapp.cpp -o myapp 
```

我的脚本是做到这一点的好方法吗？我假设它可以移植到 Linux（Solaris、BSD、MacOS）之外。还是有其他标准做法可以做到这一点？我知道 Autotools 可以做类似的事情，但我对学习所有 Autotools 和重写我的 Makefile 并不太兴奋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:46:31.740

原则上是可以的。但是由于您只是进行预处理，并且可以使用任何命令作为条件，因此可以将其简化为：

```
.PHONY: testforboost
testforboost:
    @echo "Testing for the presence of Boost header files..."
    @if echo "#include <boost/shared_ptr.hpp> " | $(CXX) -x c++ -E - >/dev/null 2>&1;\
    then \
        echo "Validated Boost header files are available";\
    else \
        echo "* ********************************************";\
        echo "* Error: Boost header files are not avaialble";\
        echo "* Consult the README file on how to fix";\
        echo "* ********************************************";\
        exit 1;\
    fi 
```

OTOH，既然您在变量中有 boost 包含路径，为什么不直接查找文件呢？那将需要一些字符串操作。可能很难制作，但使用[makepp](http://makepp.sourceforge.net/)会是`$(map $(BOOST_INCLUDE),s/^-I//)`

# mqtt - MQTT：如何知道 puback 用于哪个味精？

> ID：14037302
> 
> 赞同：4
> 
> 时间：2012-12-26T07:20:09.767
> 
> 标签：mqtt

我正在尝试设置一个 MQTT 服务器，它将客户端发送的消息保存到本地数据库中。每条消息都有一个“成功接收”标志，当接收客户端为收到的每条消息（QOS = 1）返回一个 puback 时，我想翻转该标志。

问题是：

当我发布消息时，服务器会正​​确接收来自接收客户端的 puback。但是，messageId 与发布客户端数据包中的不同。我知道这是故意的。但随后我将无法在 DB 中找到正确的消息来翻转标志。如果客户端 A 背靠背向客户端 B 发送 2 条 QOS = 1 的消息怎么办？服务器如何区分返回的 2 个 puback？

也许 MQTT 客户端正在做一些神奇的事情来映射我缺少的 messageIds？

我正在使用 mqttjs 和 paho mqttv3 顺便说一句。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T23:47:00.160

具有 QoS 1 或 2 的 MQTT PUBLISH 消息需要消息 id 作为数据包的一部分。消息 ID 用于标识 PUBACK（或 QoS 2 的 PUBREC/PUBREL/PUBCOMP）所指的消息。这是一个重要的功能，因为您可能同时有多个“正在运行”的消息。

您可能遗漏的重要一点是客户端彼此完全分开。这意味着消息 ID 对于客户端（以及消息流的方向、代理到客户端或客户端到代理）是唯一的。代理为来自代理的消息生成消息 ID，客户端为来自客户端的消息生成消息 ID；每个方向的消息 ID 都是独立的，因此代理和客户端无需跟踪对方在做什么。

如果您想跟踪哪些传入消息已发送到所有订阅客户端，则需要跟踪哪些传出消息与传入消息相关，并且只有在收到这些传出消息的所有 PUBACK 后才触发您的数据库. 这将告诉您哪些消息已成功发送到在收到消息时订阅的所有客户端。

如果您只想要发送到代理的所有消息的日志并且可以假设发送工作正常，那么生活会容易得多。只需在代理主机上创建一个侦听“#”主题或您感兴趣的任何内容的客户端，然后使用客户端 on_message() 回调（或者您的库管理它）来处理消息并将其存储在数据库中.

# php - 获取请求被视为发布

> ID：14037303
> 
> 赞同：0
> 
> 时间：2012-12-26T07:20:28.113
> 
> 标签：php, post, module, yii

我有奇怪的问题。我创建了一个链接：

```
<a href="/module/default/editEvent" style="font-size: 14px;">Edit Event</a> 
```

和一个动作

```
public function actionEditEvent(){
      if(isset($_POST)){
          echo '<pre>';
          print_r($_POST);
          die;
      }
     $this->render('editEvent');
    } 
```

当我单击链接时，它会打印空白数组。

谁能告诉我原因？<

![](../Images/6835719f06ebd5c6a88330d4be3f9ced.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:25:59.627

检查 $_SERVER['REQUEST_METHOD'] 以确定它是 GET 还是 POST 请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:34:02.943

`$_POST`是一个超全局数组，所以无论它是否有任何值，它都会被设置。改为使用`empty()`。您也可以`$_SERVER['REQUEST_METHOD']`按照 Alexander Taver 的建议使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:24:55.330

正如丹所说 $_POST 是超级全局数组，因此它将始终被设置

相反，您应该使用

!empty($_POST)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:33:49.790

`$_POST`是一个 PHP 全局数组，它在 php 中的每个地方都可用

你喜欢这些`if(count($_POST)>0)`

```
if($_SERVER['REQUEST_METHOD']=="POST") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:21:27.943

实际上，由于您使用的是 yii，因此您可以使用：

```
if (Yii::app()->request->isPostRequest) {
    // Post request
} 
```

# opengl-es - OpenGL ES 2.0 - glDrawElements 和顶点和其他缓冲区的不同索引（法线，例如颜色）

> ID：14037316
> 
> 赞同：0
> 
> 时间：2012-12-26T07:21:34.080
> 
> 标签：opengl-es

我的问题与[这个密切相关](https://stackoverflow.com/a/9279668/1433387)

所以这似乎当我想要平面阴影时我不能使用glDrawElements（或者在网格中制作一个具有特定颜色的面，例如），因为我需要相同顶点的不同法线（颜色）（一个正常值这个顶点参与的每个三角形（面），对吧？所以 glDrawArrays(banch of tris) - 处理这些事情的唯一方法，对吧？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:58:17.187

您需要重复顶点或从 glDrawArrays 中删除该面并仅使用该面（但具有不同的法线）运行第二个。OpenGL ES 2.0 中没有平面着色

# emacs - 以 imenu 样式查看最近使用的命令

> ID：14037319
> 
> 赞同：1
> 
> 时间：2012-12-26T07:21:40.757
> 
> 标签：emacs, menubar

在 emacs 中，我喜欢看到最近使用的命令总是可见的，用于缓冲区操作，所以我可以从菜单中以 imenu-tree 样式选择它们。我知道 smex，我可以用 Meta-x 调用它。但是除非您输入 Meta-x，否则可见性是隐藏的。这些命令可以像'end-of-line'、kill-word 等一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T21:26:34.133

我刚刚写了一个小库，[`cmds-menu.el`](http://www.emacswiki.org/emacs-en/download/cmds-menu.el)，它可以做到这一点。它将子菜单添加`Recent Commands`到菜单栏`Tools`菜单。

当您加载 library 时，该库会自动加载（如果可用）[`menu-bar+.el`](http://www.emacswiki.org/emacs-en/download/menu-bar%2b.el)。有关该库的更多信息，请参阅[MenuBarPlus](http://www.emacswiki.org/MenuBarPlus)。

# c# - 将图像转换为十六进制纯文本与存储在 SQL 服务器中的内容相同

> ID：14037322
> 
> 赞同：3
> 
> 时间：2012-12-26T07:21:53.317
> 
> 标签：c#, sql-server, image, byte

我有一个 Winforms 应用程序，它可以将图像作为`Image`SQL Server 列的数据类型上传到 SQL Server 2005，其中包含两种方法`Single`和`Multiple`.

使用单个我将参数从 C# 发送到 SP 作为二进制图像。

但是有多个我需要将它们作为 XML 纯文本发送到数据库，并使用 SP 将它们转换为图像

```
convert(image, @myimageFromXML, 2) 
```

我尝试了其他网站的许多功能，例如

```
 public static string ByteArrayToString(byte[] ba)
     {
         StringBuilder hex = new StringBuilder(ba.Length * 2);
         foreach (byte b in ba)
             hex.AppendFormat("{0:x2}", b);
         return hex.ToString();
     }
     public static string ByteArrayToString(byte[] ba)
     {
         string hex = BitConverter.ToString(ba);
         return hex.Replace("-", "");
     }

     public static string ByteArrayToString(byte[] Bytes)
     {
         char[] hexes = new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
         char[] Result = new char[Bytes.Length << 1];
         int Offset = 0;
         for (int i = 0; i != Bytes.Length; i++)
         {
             Result[Offset++] = hexes[Bytes[i] >> 4];
             Result[Offset++] = hexes[Bytes[i] & 0x0F];
         }
         return new string(Result);
     }
     public static String ByteArrayToString(byte[] Source)
     {
         return "0x" + BitConverter.ToString(Source).Replace("-", "");
     }

     public static string ByteArrayToString(byte[] barray)
     {
         char[] c = new char[barray.Length * 2];
         byte b;
         for (int i = 0; i < barray.Length; ++i)
         {
             b = ((byte)(barray[i] >> 4));
             c[i * 2] = (char)(b > 9 ? b + 0x37 : b + 0x30);
             b = ((byte)(barray[i] & 0xF));
             c[i * 2 + 1] = (char)(b > 9 ? b + 0x37 : b + 0x30);
         }

         return new string(c);
     } 
```

但他们每个人都返回不正确的数据，我无法显示它们，因为它不能呈现为图像

我在单个文档上传中保存的二进制图像中的正确图像以

```
 0x49492A008C040600803FA04FF004160D0784.......... 
```

但是多次上传保存的错误数据以

```
 0x310033003700380030003700380037............. 
```

请帮助我找到如何从 C# byte[] 获取正确的二进制数据，以便将它们作为 XML 作为文本发送到 SQL Server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:41:53.610

尝试将您的图像转换为 Base64 字符串：

```
// Convert byte[] to Base64 String
string base64ImageString = Convert.ToBase64String(imageBytes); 
```

您需要的一些方法：

***图片转Base64字符串***

```
public string ImageToBase64(Image image, 
  System.Drawing.Imaging.ImageFormat format)
{
  using (MemoryStream ms = new MemoryStream())
  {
    // Convert Image to byte[]
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();

    // Convert byte[] to Base64 String
    string base64String = Convert.ToBase64String(imageBytes);
    return base64String;
  }
} 
```

***Base64 字符串转图像***

```
public Image Base64ToImage(string base64String)
{
  // Convert Base64 String to byte[]
  byte[] imageBytes = Convert.FromBase64String(base64String);
  MemoryStream ms = new MemoryStream(imageBytes, 0, 
    imageBytes.Length);

  // Convert byte[] to Image
  ms.Write(imageBytes, 0, imageBytes.Length);
  Image image = Image.FromStream(ms, true);
  return image;
} 
```

来自[这里](http://www.dailycoding.com/Posts/convert_image_to_base64_string_and_base64_string_to_image.aspx)的代码。

# image - ul 列表中的图像最大宽度

> ID：14037324
> 
> 赞同：1
> 
> 时间：2012-12-26T07:22:03.167
> 
> 标签：image, html-lists, css

`max-width:100%`将图像放置在 div 内时正在工作，但是当我将其添加到 li 时它不工作。

这是[演示](http://jsfiddle.net/cfQSL/2/)

但奇怪的事实是，如果我`.pro ul`完全删除样式，它会起作用。由于定义了 ul 的样式以完成 UI 部分，因此我无法从代码中删除任何现有样式。

**PS - max-width:100% 用于仅将图像拉伸到图像原始大小的范围。width:100% 使图像适合我不想要的设备尺寸。**

检查这个[**DEMO**](http://jsfiddle.net/cfQSL/9/)这就是我希望它在 ul 列表中的工作方式。您可以调整窗口大小以检查其工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:48:52.860

[这](http://jsfiddle.net/uTVqM/)是你想要的吗？我对css进行了以下更改。

```
.pro ul{margin:0; padding:0;  list-style:none; width:100%; white-space: nowrap; overflow:hidden;}
.pro li{  display:block; margin:0; padding:0;  }
.pro li a {display:block}
.pro ul li img{     margin:0 auto; width:100%; max-width:100%} 
```

**更新：**

检查[这个](http://jsfiddle.net/kvE96/)更新的小提琴。当我检查 chrome 和 firefox 时，我得到了完全相同的输出。否则请指定您使用的浏览器。

我刚刚删除了`width:100%`from`.pro ul li img`样式

**更新 2：**

如果您`overflow:hidden;`从小提琴中的样式中删除该属性，`.pro ul`它将按预期[工作。](http://jsfiddle.net/kEpu3/)但是如果你没有办法编辑你的 CSS，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:50:29.827

我试了一下，我想我明白了

检查这个**[小提琴](http://jsbin.com/udasiq/1/edit)**

我在这里使用定位..

```
 .pro ul li img{ position:absolute;} 
```

如果您不想使用定位，则从 ul 标记中删除`width`和`white-space`属性。（我不知道为什么，但是删除后它起作用了）

```
 .pro ul{margin:0; padding:0;  list-style:none; overflow:hidden;  height:243px} 
```

检查这个**[小提琴](http://jsbin.com/udasiq/2/edit)**

# objective-c - 从 NSString 中的 pdf 获取文本

> ID：14037328
> 
> 赞同：1
> 
> 时间：2012-12-26T07:22:43.413
> 
> 标签：objective-c, ios

我正在尝试制作一个 iOS 应用程序，该应用程序将从 pdf 文件中提取纯文本并将其显示在`UITextView`. 它根本不是用于查看 pdf 文件的 pdf 阅读器，但我稍后希望对该文本执行某些操作。我已经用谷歌搜索了很多，但仍然无法获得确切的解决方案。

我已经尝试使用[https://github.com/zachron/pdfiphone](https://github.com/zachron/pdfiphone) 但文件使用的是 ARMV6 架构，这在 xcode 4.5 中似乎已经过时

如果有人可以使用 iOS 的 Quartz-2d 框架提出一些准确且不混淆的代码，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:25:12.773

[这](https://github.com/zachron/pdfiphone)是从 PDF 中提取文本的示例代码，希望对您有所帮助。

[https://github.com/zachron/pdfiphone](https://github.com/zachron/pdfiphone)

这是一个用于从 iPhone 的 PDF 中获取文本的库。

另一个演示是使用[OCR 技术](https://github.com/nolanbrown/Tesseract-iPhone-Demo)找到下面的链接

[https://github.com/nolanbrown/Tesseract-iPhone-Demo](https://github.com/nolanbrown/Tesseract-iPhone-Demo)

另请查看[Quartz 2D Programming Guide](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)[的页面](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html#//apple_ref/doc/uid/TP30001066-CH220-TPXREF101)，它涵盖了在 iOS 中打开和解析 PDF 文件所需的一切。请注意，这不是一项简单的任务，因为没有方法可以在一行中提取全文。您必须使用数据作为输入流，使用`CGPDFScanner`

其他两个库

1.  [https://github.com/KurtCode/PDFKitten/](https://github.com/KurtCode/PDFKitten/)
2.  [https://github.com/mobfarm/FastPdfKit](https://github.com/mobfarm/FastPdfKit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T04:22:38.653

这个问题无时无刻不在出现。一般来说，从 PDF 中提取文本非常困难。PDF 规范在设计时并未考虑到文本提取。有许多库试图完成这项工作，主要是通过从各个字形的几何位置重构文本。这些库有不同程度的成功，但在某些 PDF 文档上都会失败。事实上，一些 PDF 文档有字形，但无法将字形与字符相关联。对于这些文档，根本不可能提取文本，除非使用某种 OCR 方法。

PDF 被设计为一种可移植的只读格式，因为 PDF 文档将在任何平台上以相同的方式呈现。这是它最擅长的，也是它应该用于的。

如果要编辑文本，请不要使用 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T11:46:52.897

[在这里（使用objective-c从pdf中提取文本）](https://stackoverflow.com/questions/3384916/extracting-text-from-pdf-using-objective-clibz-dylib)，我找到了您问题的答案并且它有效。但没有我需要的那么好:(

*   它只能提取ascii
*   它只给我一个段落

祝你好运。

# jquery - 如何从标签中检索值

> ID：14037330
> 
> 赞同：-4
> 
> 时间：2012-12-26T07:22:59.790
> 
> 标签：jquery, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:29:22.440

```
$('#content').attr('href'); // gives you the link
$('#content').attr('class'); //gives you the class name 
```

像这样，您可以访问任何属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:32:46.933

仍然困惑你需要提取什么价值......这里有一些例子

```
 $('#content').attr('class'); //extract class by id
 $('#content').attr('href');  //extract href by id
 $('#content').html();  //extract value in <a> tag 
```

使用`ajax`或者`post`如果你想将值存储在 db..

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

**查询**

```
 $.post("test.php", { data: $('#content').attr('class')}, //assuming you want class value to be posted.
   function(data) {
      alert("succesfully inserterd");
 }); 
```

**PHP 测试.php**

```
 $value= $_POST['data'];
 //do your stuff like insreting it to db 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:01:07.767

.attr() 方法仅获取匹配集中第一个元素的属性值。要单独获取每个元素的值，请使用循环构造，例如 jQuery 的 .each() 或 .map() 方法。

有关更多详细信息，请参阅此[链接](http://api.jquery.com/attr/)

```
<script type="text/javascript">
  $(".test").live("click",function(){
  alert($(this).attr('class'));
});
</script>

<a href="#" class="test" id="content">Test</a> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T07:32:15.560

另一种方法是为 value 属性赋值

这是示例代码：

```
<script type="text/javascript">
$(".test").live("click",function(){
    alert($(this).attr('value'));
});
</script>
<a href="#" class="test" id="content" value="Test">Test</a> 
```

试试看！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-26T07:29:29.333

尝试这个

```
 //with javascript
 document.getElementById('content').innerHTML;

//with jQuery
$('#content').html(); 
```

# android - Microsoft Sync Framework 离线存储与 SQLite 数据库

> ID：14037333
> 
> 赞同：0
> 
> 时间：2012-12-26T07:23:08.900
> 
> 标签：android, sqlite, android-sqlite, microsoft-sync-framework

我遵循了 Microsoft Sync Framework 工具和教程。

[http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e](http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e)

我正在尝试使用 SQLite 作为我的客户端数据库，对于我的服务器，我有 SQL Server 2008 R2，我配置了我的服务器数据库，并且我能够使用浏览器缓存运行一个用于本地存储的示例。但我想使用 SQLite 数据库。`when clicking on the "sync" button, the SQLite database in the Android devices should be synchronized with SQL Server database`. 你能指导我吗？

```
 this.sendRequest = function (serviceUri, successCallback, errorCallback, dir) {

        TraceObj("[" + dir + " Request]:", serviceUri, this.dataObject());
        // Construct HTTP POST request
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("POST", serviceUri);
        xmlHttp.setRequestHeader("Accept", "application/json");
        xmlHttp.setRequestHeader("Content-Type", "application/json");
        // Handle success & error response from server and then callback
        xmlHttp.onreadystatechange = function () {
            if (xmlHttp.readyState == 4) {
                if (xmlHttp.status == 200) {
                    var res = new SyncFormatter();
                    if (res.parse(xmlHttp.responseText)) {
                        TraceObj("[" + dir + " Response]:", serviceUri, res.dataObject());
                        alert("[" + dir + " Response]:", serviceUri, res.dataObject());
                        successCallback(res);
                        return;
                    }
                }
                TraceMsg("[" + dir + " Response Error]: ", xmlHttp.status + " Response: " + xmlHttp.responseText);
                errorCallback(xmlHttp.responseText);
            }
        };
        xmlHttp.send(this.toString());
    };
} 
```

在上面我得到**xmlHttp.status 是 500。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:46:21.110

SQLLite 没有开箱即用的同步提供程序，因此如果您想将其用作客户端数据库，则必须自己构建一个。

如果您已下载 Sync Framework Toolkit，您将找到一个用于 SQL CE 的示例同步提供程序，您可以在编写自己的 SQLLite 同步提供程序时使用该同步提供程序。

# sql - 使用 decode 检查负值和正值

> ID：14037334
> 
> 赞同：8
> 
> 时间：2012-12-26T07:23:12.367
> 
> 标签：sql

嗨，有没有办法使用解码来检查 sql 中的正值和负值？

例如

```
select decode(money_return, **<0**, abs(money_return), **>0**, 
money_return*10, money_return) from cash_t; 
```

如果逻辑被编码在 if else 语句中，它将是这样的：

```
if(money_return<0){money_reutrn = abs(money_return);}
else if(money_return>0){money_reutrn = money_return*10;}
else {money_return = money_return;}
end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T21:43:01.587

您可以将“符号”与解码一起使用。Sign 将返回 -1 表示任何负数，0 表示 0，1 表示任何正数：

```
select decode(sign(money_return), -1, abs(money_return), 
                                   1, money_return*10, 
                                   money_return) 
from cash_t; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T07:25:11.670

你需要案例陈述

```
select CASE 
 WHEN money_return < 0 THEN abs(money_return)
 WHEN money_return > 0 THEN money_return*10
 ELSE money_return END money_return from cash_t; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-21T17:50:03.800

使用 SIGN()。它返回“0”表示 0，“1”表示正值，“-1”表示负值。

```
SELECT
    DECODE(
        SIGN(money_return),
        0,
        money_return,
        1,
        money_return * 10,
        - 1,
        ABS(money_return)
    )
FROM
    CASH_T; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T07:29:07.607

你可以像这样使用，

```
SELECT supplier_name,
decode(supplier_id, 10000, 'IBM',
                    10001, 'Microsoft',
                    10002, 'Hewlett Packard',
                    'Gateway') result
FROM suppliers; 
```

上面的 decode 语句等价于下面的 IF-THEN-ELSE 语句：

```
IF supplier_id = 10000 THEN
   result := 'IBM';

ELSIF supplier_id = 10001 THEN
   result := 'Microsoft';

ELSIF supplier_id = 10002 THEN
   result := 'Hewlett Packard';

ELSE
   result := 'Gateway';

END IF; 
```

所以你的最终代码应该是这样的，

```
select decode(money_return, money_return<0, abs(money_return),
                            money_return>0, money_return*10,
                                            money_return) result
from cash_t; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-23T05:00:51.547

我使用函数“最大”和“最小”找到正值或负值。

例子。

> 从对偶中选择 decode(greatest(value,0), 0,'Negative','Positive')

或者

> 从对偶中选择 decode(least(value,0), 0,'Positive','Negative')

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T07:27:54.637

```
select CASE money_return  
  WHEN money_return < 0 THEN abs(money_return) 
  WHEN money_return > 0 THEN money_return*10
  ELSE money_return END money_return from cash_t; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T07:29:24.483

如果这是您使用的唯一公式，您可以这样做：

```
select (11 *abs(money_return) + 9 *money_return)/2 as money_return
from cash_t 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/5027f/2)检查结果。

现在，这是非常非常脆弱的，如果场景发生变化，它将无法工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-26T10:13:09.513

```
SELECT
    decode(
        money_return - Abs(money_return),
        0,
        money_return * 10,
        abs(money_return)
    )
FROM
    cash_t; 
```

如果值为正，则从自身中扣除将返回 0，并应用第一个条件。否则，它是否定的并且应用第二个条件。0 将适合第一个条件并返回 0（如 0*10）。

# javascript - 获取 XMLHttpRequest 请求的绝对 URL？

> ID：14037337
> 
> 赞同：0
> 
> 时间：2012-12-26T07:23:42.930
> 
> 标签：javascript

假设`http://example.com/js/script.js`针对某个相对 URL 触发 AJAX 请求，我如何获得最终被请求的绝对 URL？

例如，如果我向我提出请求`image.png`，`http://example.com/js/script.js`我希望得到 back `http://example.com/js/image.png`。但是，如果我`/image.png`从同一个 URL 请求，我希望返回`http://example.com/image.png`.

这个问题很棘手，原因有两个：

1.  ~~我不相信可以从其中获取脚本的 URL。~~ **更新**：我错误地认为 AJAX 请求是相对于脚本位置发出的。事实证明，它们是相对于 发行的`location.href`。这简化了情况。
2.  我不相信这会`XMLHttpRequest`暴露请求 URL，更不用说它的绝对形式了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:38:04.190

> 我不相信可以从其中获取脚本的 URL。

为此，只需使用`location.href`

从相对地址获取绝对网址的快速破解方法可能是：

```
function getAbsoluteURL(relative) {
    var a = document.createElement('a');
    a.href = relative;
    return a.href;
} 
```

根据[这个问题](https://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue)，它不能在 Ie6 上工作，但这真的重要吗？

# java - 调查 JAVA 中的 SSL 握手细节

> ID：14037345
> 
> 赞同：2
> 
> 时间：2012-12-26T07:24:10.823
> 
> 标签：java, ssl, handshaking

我的一个应用程序使用套接字为网络消息处理建立连接。它使用 https 并且消息处理一切正常。

我需要记录握手过程中发生的任何 SSL 连接处理中可能出现的问题。有没有办法在java代码中做到这一点。甚至是否有任何工具可以监控握手过程。

开发环境是windows server 2003，使用JDK 6。

# python - Apache/WSGI 进程死亡

> ID：14037348
> 
> 赞同：3
> 
> 时间：2012-12-26T07:24:33.177
> 
> 标签：python, django, apache, permissions, mod-wsgi

我最近更改了一些 Django/Python 站点的服务器，但我立即遇到了麻烦。我的 Apache 实例或 WSGI 守护进程直接死掉了！没有日志，没有警告或错误。我必须以 root 身份重新启动 Apache，我认为这是某个地方的严重权限缺陷。我的 Linux 知识有限，显然我是唯一一个遇到这个问题的人，因为我无法与迄今为止找到的其他答案联系起来。

Debian 机器上的 WSGI 版本是 3.3（`multiprocess = True`和`multithread = True`）、Python 2.7 和 Django 1.4。我需要的一些 python 库，包括 Django，并非来自 Debian 的存储库；我让它们“手动”安装。

有时，我不知道它是否重要，我收到此错误：

> “ImportError：导入 _strptime 失败，因为导入锁被另一个线程持有。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T20:37:34.860

读：

*   [http://modwsgi.readthedocs.io/en/develop/user-guides/frequently-asked-questions.html#apache-process-crashes](http://modwsgi.readthedocs.io/en/develop/user-guides/frequently-asked-questions.html#apache-process-crashes)
*   [http://modwsgi.readthedocs.io/en/develop/user-guides/installation-issues.html](http://modwsgi.readthedocs.io/en/develop/user-guides/installation-issues.html)
*   [http://modwsgi.readthedocs.io/en/develop/user-guides/application-issues.html](http://modwsgi.readthedocs.io/en/develop/user-guides/application-issues.html)

确保您没有同时加载 mod_python。

确保您使用的是 mod_wsgi 守护程序模式而不是嵌入式模式。

强制应用程序在主解释器应用程序组中运行。

_strptime 问题是一个 Python 错误（仅在 3.3 中修复）。显式`import _strptime`模块位于 WSGI 脚本文件的开头。

# ios - 如何通过 URL Schemes 添加 Game Center 的好友？

> ID：14037350
> 
> 赞同：0
> 
> 时间：2012-12-26T07:24:36.287
> 
> 标签：ios, game-center, url-scheme

在 App SNS 或 App Forum 中，用户希望显示他们的 Game Center ID 以结交朋友。我的问题是如何通过*gamecenter://* URL 方案添加朋友？

[本专题](https://stackoverflow.com/questions/6226195/game-center-url-scheme)讨论了*gamecenter://*打开指定游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T16:10:30.153

我怀疑我们是否有权以编程方式为用户添加朋友。

带有详细正则表达式的链接线程似乎表明最好的方法是转到该玩家的游戏中心个人资料页面并让用户单击“发送好友请求”按钮。我尝试了以下方案，但我只能进入空白的朋友个人资料页面，而不是实际的个人资料。我为“id”尝试了几种不同的方法。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"gamecenter://static.gc.apple.com/players/player/<id>/"]]; 
```

即使有人确实弄清楚了，因为它是无证的，Apple 可能会在未来随时更改，所以我不会将这样的 URL 硬编码到应用程序中。

# java-me - com.sun.kvem.midletsuite.invalidjadexception 原因 = 打开 jar 文件时出现 36 错误

> ID：14037351
> 
> 赞同：0
> 
> 时间：2012-12-26T07:24:39.320
> 
> 标签：java-me

大家好 我在 J2ME 中有一个客户端服务器交互。当我在模拟器上运行应用程序时，出现这样的错误

com.sun.kvem.midletsuite.invalidjadexception 原因 = 打开 jar 文件时出现 36 错误

我找不到解决方案。我在谷歌搜索，但它没有给出任何合适的解决方案。

请帮助我。我正在寻找过去三天。请给出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:52:56.237

该异常通常来自格式错误的 .jar、.jad 或可能的 .mf 文件。[https://forums.oracle.com/forums/thread.jspa?messageID=7276882](https://forums.oracle.com/forums/thread.jspa?messageID=7276882)列出了可以尝试的解决方案。

# iphone - html文件的来源，phonegap

> ID：14037363
> 
> 赞同：0
> 
> 时间：2012-12-26T07:25:37.850
> 
> 标签：iphone, html, cordova, payload

我在 phonegap ( xcode ) 中制作了一个应用程序。我所有的代码和文件都在应用程序有效负载文件夹的 www 文件夹中。用户可以访问所有这些，有没有办法限制访问www文件夹或加密文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:43:44.623

[其他人已经在 Android 上解决了这个问题](https://stackoverflow.com/questions/6160554/how-to-encrypt-htmljs-assets-in-android-phonegap-mobile-app)，其中一个答案指向本教程，可能对 iOS 有很好的提示：

[http://www.oleksiy.pro/2011/09/20/phonegap-application-encryption/](http://www.oleksiy.pro/2011/09/20/phonegap-application-encryption/)

# iphone - iOS 将 ViewController 和 AppDelegate 设置为 CoreLocation 模型类的侦听器

> ID：14037364
> 
> 赞同：3
> 
> 时间：2012-12-26T07:25:56.303
> 
> 标签：iphone, objective-c, ios, core-location, nsnotificationcenter

您如何设置`AppDelegate`和 a`ViewController`作为模型核心定位类的侦听器？什么是正确的设计选择？

我对有一个模型类来实现`CoreLocation`和位置更新很感兴趣。我猜这个类应该是 a `sharedSingleton`，因为我`AppDelegate`和我都`ViewController`希望访问它。

当我`viewController`调用它时，我想要`CLLocationManager`使用`startUpdatingLocation`.

当应用程序进入后台时，我想使用 startMonitoringSignificantLocationChanges 监视 AppDelegate 中的位置更新。

我的问题是，如何设置模型类来处理这些不同类型的位置更新，以及通知 ViewController 或 AppDelegate 找到新位置？使用`NSNotification`? 委派似乎不起作用，因为它是一对一的关系。

感谢您帮助弄清楚如何设计它。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T09:36:48.930

您可以在 AppDelagete 中拥有 locationManager。并让应用程序委托为您处理所有应用程序的位置更新。

**AppDelegate.h**

```
@interface AppDelegate : NSObject <UIApplicationDelegate,CLLocationManagerDelegate...> {
    ...
    CLLocationManager* locationManager;
    CLLocationCoordinate2D myLocation;
    ...
}
@property(nonatomic) CLLocationCoordinate2D myLocation;
...
@end 
```

**AppDelegate.m**

```
@implementation AppDelegate
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
    ...
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
   locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [locationManager startMonitoringSignificantLocationChanges];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    myLocation = newLocation.coordinate;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"updateControlersThatNeedThisInfo" object:nil userInfo:nil];   
}

... 
```

在您的控制器中：

**视图控制器.m**

```
...
- (void)viewDidAppear:(BOOL)animated
{
   [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourFunction) name:@"updateControlersThatNeedThisInfo" object:nil];
}

-(void)yourFunction{
   AppDelegate *app = [[UIApplication sharedApplication] delegate];
   CLLocation myLocation = app.myLocation;
   if(app.applicationState == UIApplicationStateBackground)
          //background code
   else
          //foreground code
   ...
} 
```

# python - 如何从网络位置为 python 使用 win32 扩展

> ID：14037367
> 
> 赞同：1
> 
> 时间：2012-12-26T07:25:59.120
> 
> 标签：python, windows, networking, pywin32, maya

我们有大量运行 Win XP 和 win 7 的系统。

我们将在系统上安装 Python x32 和 x64。所需的模块（如 PyQt4、win32 等）保存在中心位置，所有人都可以从那里访问这些模块。

根据 x32 和 x64，模块保存在不同的文件夹中。

**x32 蟒蛇**

\\share\Python26_x32

**x32 模块保持在**

\\share\模块\x32

**x64 蟒蛇**

\\share\Python26_x64

**x64 模块保持在**

\\share\模块\x64

所有模块从网络位置都可以正常工作。但是我需要 `\\share\Python26_x32\python.exe \\share\\Python26_x32\Scripts\pywin32_postinstall.py -install`在每个系统上运行 win32 模块才能工作。

我有一种情况，本地 python 将是 x32 和 Maya x64。如果我为 x32 运行 post 脚本，win32 模块将不会导入 Maya x64。

是否有任何替代方法可以使用 win32 而无需为 win32 模块运行 postinstall 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:59:17.920

经过长时间的尝试，我终于能够解决这个问题。

正如我所说，我安装了 Python x32 和 Maya x64。

安装 Python x32 后，我执行了`\\share\Python26_x32\python.exe \\share\\Python26_x32\Scripts\pywin32_postinstall.py -install`

之后我`x64 pywin32 dlls`从`\\share\modules\x64\pywin32_system32`

```
pythoncom26.dll
pythoncomloader26.dll
pywintypes26.dll 
```

到`%SystemRoot%\system32`

这解决了我在 python x32 上使用 maya x64 的问题

# c# - 如何确定 C# 中子类的类型？

> ID：14037370
> 
> 赞同：1
> 
> 时间：2012-12-26T07:26:35.617
> 
> 标签：c#, casting

在 c# 中，我想找到一种方法来执行以下操作：

```
(cast_by_variable)some_class.some_method(); 
```

所以，我想以某种方式确定子类的类型，将信息存储在变量中，然后在父类使用强制转换时使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:35:20.853

```
Object obj;

 if (some_class is Class1) 
      {
          obj = (Class1)some_class;
         // do something with obj
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:34:18.530

投射对象不会改变它的类型，所以你总是可以用

```
some_class.GetType();

Type type = some_class.GetType(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:42:11.410

c# 中没有像您建议的那样直接运行时强制转换，但有解决此问题的方法。您可以执行以下操作：

```
Type t = some_class_obj.GetType();
object result =t.GetMethod("some_method").Invoke(some_class_object,new object[]{parameter1,parameter2}); 
```

# javascript - 以相同初始名称开头的类的jquery单击事件

> ID：14037375
> 
> 赞同：6
> 
> 时间：2012-12-26T07:27:14.400
> 
> 标签：javascript, jquery, jquery-click-event

我动态添加了多个 div。类名以“result_”+id 的形式给出，其中 id 来自数据库表。

```
<div class="result_137">Gaurab Dahal</div>
<div class="result_138">saurab dahal</div> 
```

* * *

![在此处输入图像描述](../Images/f071523fd188b1c2546fe111391825af.png)

如何编写单击事件，以便它可以添加单击它的 div。

例如，我可以编写如下所示的 css 来处理所有类名以字符串“result”开头的 div。

```
div[class^="result"]{
    padding:5px;
    width:490px;
    background: rgba(204,204,204,0.5);
    font: 12px arial, verdana, sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T07:28:35.843

对于动态添加的 div，您需要我们[**on()**](http://api.jquery.com/on/)来绑定事件。您可以将事件委托给文档或动态添加元素的父元素。

**[现场演示](http://jsfiddle.net/rajaadil/yPwfc/1/)**

```
$(document).on('click', 'div[class^=result]', function(){
    alert($(this).text());                              
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T07:36:50.677

由于您已动态添加 div，因此：

```
$(function(){    // ready handler required
    $(document).on('click', 'div[class^=result]', function(){ // .on in your case
        alert($(this).text());                               // will be helpful
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:45:55.393

您可以像这样获取 div 的 id，`var selection = $(ev.target).attr("id");`其中 ev 是事件，然后您可以像这样应用 jquery 的点击功能`$(selection).live('click',function(){//ur code here });`

# javascript - 使网格半可点击

> ID：14037377
> 
> 赞同：3
> 
> 时间：2012-12-26T07:27:30.677
> 
> 标签：javascript, html, html5-canvas, dom-events

我正在用 HTML5 制作填字游戏。为此，我使用 Javascript 中的矩形在画布上创建了一个网格。我只希望蓝色矩形可点击，其余矩形不可点击。for 循环用于将特定矩形填充为蓝色。这是代码：

```
var canvas;
var context;
var i=0;
var j=0;
var size=40;
var x;
var y;

function display()
{
    alert("a");
    canvas = document.getElementById("myCanvas");
    c = canvas.getContext("2d");
    drawBox();
    canvas.addEventListener('click', handleClick);
}
function drawBox() {
    c.beginPath();
    c.fillStyle = "white";
    c.lineWidth = 3;
    c.strokeStyle = 'black';
    for (var row = 0; row < 14; row++) {
        for (var column = 0; column < 13; column++) {
            var x = column * 40;
            var y = row * 40;
            c.rect(x, y, 40, 40);
            c.fill();
            c.stroke();
        }
    }
    for(i=0;i<=11;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(80, j,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=40;
    for(i=0;i<=11;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(j, 40,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=0;
    for(i=0;i<=12;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(240, j,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=160;
    for(i=0;i<=9;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(160, j,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=120;
    for(i=0;i<=9;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(j, 480,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=200;
    for(i=0;i<=8;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(360, j,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    j=200;
    for(i=0;i<=8;i++)
    {
            c.fillStyle = "blue";
            c.fillRect(480, j,40, 40);
            j=j+40; 
            //alert(i+"   "+j);
    }
    c.closePath();
}

function handleClick(e) {

    c.fillStyle = "red";
    c.fillRect(Math.floor(e.offsetX/40)*40, 
               Math.floor(e.offsetY/40)*40,
               40, 40);
    x=e.offsetX;
    y=e.offsetY;
    //alert(e.currentTarget);
    //alert(x+"   "+y);
    var sign = prompt("Input letter");
    //alert(sign);
    //sign=sign.toLowerCase();
    switch (sign)
{
case "a":
    //drawtext("a");
    c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("a",x,y);
    alert("a");
  break;
case "b":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("b",x,y);
  alert("b");
  break;
case "c":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("c",x,y);
  alert("c");
  break;
case "d":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("d",x,y);
  alert("d");
  break;
case "e":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("e",x,y);
  alert("e");
  break;
case "f":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("f",x,y);
  alert("f");
  break;
case "g":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("g",x,y);
  alert("g");
  break;
case "h":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("h",x,y);
    alert("h");
  break;
case "i":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("i",x,y);
  alert("i");
  break;
case "j":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("j",x,y);
  alert("j");
  break;
case "k":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("k",x,y);
  alert("k");
  break;
case "l":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("l",x,y);
  alert("l");
  break;
case "m":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("m",x,y);
  alert("m");
  break;
case "n":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("n",x,y);
  alert("n");
  break;
case "o":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("o",x,y);
    alert("o");
  break;
case "p":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("p",x,y);
  alert("p");
  break;
case "q":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("q",x,y);
  alert("q");
  break;
case "r":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("r",x,y);
  alert("r");
  break;
case "s":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("s",x,y);
  alert("s");
  break;
case "t":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("t",x,y);
  alert("t");
  break;
case "u":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("u",x,y);
  alert("u");
  break;
case "v":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("v",x,y);
    alert("v");
  break;
case "w":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("w",x,y);
  alert("w");
  break;
case "x":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("x",x,y);
  alert("y");
  break;
case "y":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("y",x,y);
  alert("y");
  break;
case "z":
c.font = '20pt Calibri';
    c.textAlign = 'center';
    c.fillStyle="black";
    c.fillText("z",x,y);
  alert("z");
  break;
}          
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:03:37.913

在函数 handleClick(e) 中，您可以编写以下代码片段

var x = e.pageX - this.offsetLeft; var y = e.pageY - this.offsetTop;

```
var imageData2 = c.getImageData(x, y, 40, 40);

if (imageData2.data[0] == 255) {
    return false;
} 
```

这将忽略在白色方块中所做的点击。如果单击蓝色方块，它将提示输入字母。

您的 handleClick 函数将如下所示 - function handleClick(e) {

```
c.fillStyle = "red";
c.fillRect(Math.floor(e.offsetX/40)*40, 
           Math.floor(e.offsetY/40)*40,
           40, 40);
x=e.offsetX;
y=e.offsetY;

var x = e.pageX - this.offsetLeft;
var y = e.pageY - this.offsetTop;

var imageData2 = c.getImageData(x, y, 40, 40);

if (imageData2.data[0] == 255) {
    return false;
}

var sign = prompt("Input letter");
switch (sign)
{
    case "a":
        //drawtext("a");
        c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("a",x,y);
        alert("a");
      break;
    case "b":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("b",x,y);
      alert("b");
      break;
    case "c":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("c",x,y);
      alert("c");
      break;
    case "d":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("d",x,y);
      alert("d");
      break;
    case "e":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("e",x,y);
      alert("e");
      break;
    case "f":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("f",x,y);
      alert("f");
      break;
    case "g":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("g",x,y);
      alert("g");
      break;
    case "h":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("h",x,y);
        alert("h");
      break;
    case "i":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("i",x,y);
      alert("i");
      break;
    case "j":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("j",x,y);
      alert("j");
      break;
    case "k":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("k",x,y);
      alert("k");
      break;
    case "l":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("l",x,y);
      alert("l");
      break;
    case "m":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("m",x,y);
      alert("m");
      break;
    case "n":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("n",x,y);
      alert("n");
      break;
    case "o":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("o",x,y);
        alert("o");
      break;
    case "p":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("p",x,y);
      alert("p");
      break;
    case "q":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("q",x,y);
      alert("q");
      break;
    case "r":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("r",x,y);
      alert("r");
      break;
    case "s":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("s",x,y);
      alert("s");
      break;
    case "t":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("t",x,y);
      alert("t");
      break;
    case "u":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("u",x,y);
      alert("u");
      break;
    case "v":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("v",x,y);
        alert("v");
      break;
    case "w":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("w",x,y);
      alert("w");
      break;
    case "x":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("x",x,y);
      alert("y");
      break;
    case "y":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("y",x,y);
      alert("y");
      break;
    case "z":
    c.font = '20pt Calibri';
        c.textAlign = 'center';
        c.fillStyle="black";
        c.fillText("z",x,y);
      alert("z");
      break; 
```

}
}

# c# - 将数组的每个值分配给队列集合

> ID：14037384
> 
> 赞同：0
> 
> 时间：2012-12-26T07:27:54.920
> 
> 标签：c#, .net

我有一个队列集合

```
var queue = new Queue<ExchangeEmailInformation>(mailInformation); 
```

其中包含两条记录。我也有 Guid 数组

```
public static List<Guid> FolderId { get; set; } 
```

其中包含两个 guid 记录。我需要将这些 guid 重新分配给属性 FolderId 的队列集合。我怎样才能做到这一点？下面是 ExchangeEmailInformation 类

```
 public class ExchangeEmailInformation:IEmailInformation
    {
        public string Subject { get; set; }
        public string Sender { get; set; }
        public AttachmentCollection Attachment { get; set; }
        public Guid FolderId { get; set; }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:57:29.080

而不是将值复制到列表中，您可以枚举队列并保留一个计数器

```
int i =0;
foreach (var email in queue)
{
    email.FolderId = this.FolderID[i];
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:46:49.330

```
var currentQueue = queue.ToList();
                            for (int i = 0; i < currentQueue.Count; i++)
                            {
                                currentQueue[i].FolderId = FolderId[i];
                            } 
```

# bash - /bin/bash 和 /bin/sh 和直接调用脚本的区别

> ID：14037385
> 
> 赞同：0
> 
> 时间：2012-12-26T07:28:03.027
> 
> 标签：bash

这是我脚本的内容

```
#!/bin/bash
# test.sh
# Note: Set permissions on this script to 555 or 755,
# then call it with ./test.sh or sh ./test.sh.
echo
echo "This line appears ONCE in the script, yet it keeps echoing."
echo "The PID of this instance of the script is still $$."
# Demonstrates that a subshell is not forked off.
echo "==================== Hit Ctl-C to exit ===================="
sleep 1
exec $0 # Spawns another instance of this same script
#+ that replaces the previous one.
echo "This line will never echo!" # Why not?
exit 99 # Will not exit here!
# Exit code will not be 99! 
```

这是我使用 /bin/bash 运行脚本时的输出

```
[user@localhost ~]$ /bin/bash test.sh 

This line appears ONCE in the script, yet it keeps echoing.
The PID of this instance of the script is still 4872.
==================== Hit Ctl-C to exit ====================
test.sh: line 11: exec: test.sh: not found 
```

这是我使用 /bin/sh 运行脚本时的输出

```
[user@localhost ~]$ /bin/sh ./test.sh 

This line appears ONCE in the script, yet it keeps echoing.
The PID of this instance of the script is still 4934.
==================== Hit Ctl-C to exit ====================

This line appears ONCE in the script, yet it keeps echoing.
The PID of this instance of the script is still 4934.

==================== Hit Ctl-C to exit ==================== 
```

我不得不使用 Ctl-C 来阻止它。

为什么相同的脚本会根据不同的执行模式表现出不同的行为。仅供参考：我必须使用 Ctl-C 执行脚本，如下所示：`./test.sh`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:36:36.437

第一次使用`/bin/bash test.sh`. 第二次，您使用`/bin/sh ./test.sh`. 注意区别：`test.sh`vs `./test.sh`。

无论出于何种原因，该脚本都无法生成运行该脚本的第二个进程，因为它无法找到`test.sh`. （我不确定这是为什么。我猜`PATH`可能是个问题？）请参阅以下错误消息：

```
[user@localhost ~]$ /bin/bash test.sh 

This line appears ONCE in the script, yet it keeps echoing.
The PID of this instance of the script is still 4872.
==================== Hit Ctl-C to exit ====================
test.sh: line 11: exec: test.sh: not found 
```

脚本无法执行`test.sh`，因为它不知道在哪里`test.sh`；`./test.sh`是脚本的完整路径，可以找到。

第二次运行时，子进程愉快地生成，因为`./test.sh`找到了。

尝试运行：`/bin/bash ./test.sh`并`/bin/sh ./test.sh`查看输出是否有任何差异（不应该）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:38:06.357

您收到错误`test.sh: not found`是因为您的 PATH 中没有当前目录。

当您使用 运行它时`./test.sh`，路径名是相对的并且不参考 PATH，因此找到了该命令。

请注意，它`/bin/bash ./test.sh`会迭代，并且`/bin/sh test.sh`会失败；`/bin/bash`这不是和之间的区别问题`/bin/sh`。

# javascript - 我的弹出式 javascript 代码无法在 asp.net 中传递 ID 或会话

> ID：14037389
> 
> 赞同：0
> 
> 时间：2012-12-26T07:28:27.433
> 
> 标签：javascript, asp.net, popup

我在 asp.net 中使用上述代码弹出按钮。一切正常，弹出窗口打开它的控件。但是有一个大问题！我在每个按钮中传递了 ID 和会话，当我使用这个 cod 时，我的所有 asp 代码都没有执行，因为 Css 代码首先执行，并且通过“onclientclick”代码它退出到另一个页面，并且 asp 后面的代码将不再执行。任何机构都可以帮助我在“onclientclick”代码之前执行我的 asp.net 代码吗？谢谢：这是我的javascript代码：

```
 function pop_up(url) {
        newwindow = window.open(url, 'name', 'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120');
        if (window.focus) { newwindow.focus() }
        return false;
    } 
```

对于按钮：

```
<asp:Button ID="Button2" runat="server" 
                                                                                                        CommandArgument="<%# Container.DataItemIndex %>" Font-Names="Tahoma" 
                                                                                                        Height="25px"  
                                                                                                        oncommand="Button2_Command" Text="Submission details" Width="180px" 
                                                                                                        Font-Size="9pt"  OnClientClick="return pop_up('CompleteInfo.aspx')" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:34:41.540

请尝试代码

```
Page.ClientScript.RegisterStartupScript(GetType(), "popup", "pop_up('CompleteInfo.aspx');", true); 
```

在分配会话等后单击按钮并删除按钮的 OnClientClick 属性。

# android - 创建水平列表视图时出错

> ID：14037391
> 
> 赞同：-1
> 
> 时间：2012-12-26T07:28:41.393
> 
> 标签：android, listview

我正在研究水平列表视图的一个[示例。](http://www.dev-smart.com/archives/34)只是将包名修改为`package com.example.horizaontal;`并修改了布局`listviewdemo`

```
<com.example.horizaontal.HorizontialListView
      android:id="@+id/listview" 
      android:layout_width="fill_parent" 
      android:layout_height="wrap_content" 
      android:background="#ddd"/> 
```

但是它为线性布局的膨胀类抛出了错误，上面的代码在`LinerLayout`. 请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:38:16.123

检查你的清单文件，

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your modified package"
    android:versionCode="1"
    android:versionName="1.0" >
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="your packagename .your class name"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden|orientation">
         </activity>
  </application>
</manifest> 
```

更正此错误后，请清理您的项目。

项目 -> 清洁

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:52:42.727

检查您的 xml 文件。在那里，您会发现您自定义的Horizo​​ntialListView 的完全限定类名（类似于com.youroldpackagename.Horizo​​ntialListView）作为旧类名。用新的包名替换它。

# c++ - 成员类型是如何实现的？

> ID：14037392
> 
> 赞同：22
> 
> 时间：2012-12-26T07:28:44.653
> 
> 标签：c++

我在看这个资源：

[http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

例如，类向量上的迭代器*成员类型。*

“成员类型”会简单地实现为 typedef 或向量类中的类似内容吗？我不清楚“成员类型”实际上是什么意思，而且我看过几本 C++ 教科书，他们甚至根本没有提到这个短语。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-26T07:42:06.493

C++ 标准也不使用这个短语。相反，它会将其称为*嵌套类型名称*（第 9.9 节）。

有四种获取方式：

```
class C
{
public:
   typedef int int_type;       // as a nested typedef-name
   using float_type = float;   // C++11: typedef-name declared using 'using'

   class inner_type { /*...*/ };   // as a nested class or struct

   enum enum_type { one, two, three };  // nested enum (or 'enum class' in C++11)
}; 
```

嵌套类型名称是在类范围内定义的，为了从该范围之外引用它们，需要名称限定：

```
int_type     a1;          // error, 'int_type' not known
C::int_type  a2;          // OK
C::enum_type a3 = C::one; // OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:31:24.953

成员类型仅代表作为（该类的）成员的类型。它可能是`typedef`您所说的 a （如果`vector`它可能是`T*`），也可能是嵌套的`class`（或`struct`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T07:35:21.430

成员类型可以指“嵌套类”或“嵌套结构”。这意味着另一个类中的类。如果您想参考教科书，请搜索“嵌套类”。

# asp.net - 对 mysql 数据库使用 asp.net "membership" 会抛出不支持的关键字。参数名称：元数据错误

> ID：14037393
> 
> 赞同：1
> 
> 时间：2012-12-26T07:28:58.707
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, datacontext, mysql-connector

我正在尝试为我的 asp.net mvc3 应用程序使用 Membership 类和实体框架来使用 Mysql 数据库。我正在使用 EF DbContext。在一些线程之后，我将 machine.config 的 MySQLMembershipProvider 更改为

```
<add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.4.3.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="book_shelfEntities" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="false" passwordFormat="Clear" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="" autogenerateschema="true"/> 
```

其中 book_shelfEntities 是我的连接字符串的名称。

我在 web.config 中的 connectionStrings 是

```
<connectionStrings>
    <add name="ApplicationServices" 
    connectionString="data source=.\SQLEXPRESS;Integrated  Security=SSPI;        AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="book_shelfEntities" connectionString="metadata=res://*/Models.libs.csdl|res://*/Models.libs.ssdl|res://*/Models.libs.msl;provider=MySql.Data.MySqlClient;provider connection string='server=localhost;User Id=root;password=root;Persist Security Info=True;database=book_shelf'" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

web.config 中的成员身份为

```
<membership defaultProvider="MySqlMembershipProvider">
    <providers>
    <clear />
        <add name="MySqlMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.4.3.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="book_shelfEntities" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="100" minRequiredPasswordLength="2" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
    </providers>
</membership> 
```

我有一个名为 users 的表，其中包含用户名和密码字段。当我尝试使用 Membership.ValidateUser VS2010 时抛出错误

不支持关键字。参数名称：我的 web.config 文件中的元数据对应于我的会员提供者名称

请帮我解决这个问题，因为我对 asp.net 很陌生（我可以在其他部分使用 Mysql 表来添加、编辑等）

# java - ByteBuffer 中的 NullPointerException

> ID：14037400
> 
> 赞同：0
> 
> 时间：2012-12-26T07:29:28.337
> 
> 标签：java, nullpointerexception

```
byteArray = new byte[10000];

-- some code here ----

byteBuffer.wrap(byteArray);
for (int i=0; byteBuffer.hasRemaining(); i++)
{
    shortArray[i] = byteBuffer.getShort();
    System.out.println(shortArray[i]);
} 
```

尽管我已经为它提供了一个支持数组，但它被`byteBuffer.hasRemaining()`标记为 a 。`NullPointerException`

*   这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:33:58.157

请检查你如何初始化`byteBuffer`它应该是这样的，因为`wrap`它是一个静态方法

```
byte[] byteArray = new byte[10000];    
ByteBuffer byteBuffer = ByteBuffer.wrap(byteArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:46:22.880

代码似乎没问题。我怀疑这是（由于一些错误）因为 byteBuffer variable = null

# java - Java 读取 7000 万行文本的大型文本文件

> ID：14037404
> 
> 赞同：45
> 
> 时间：2012-12-26T07:29:54.737
> 
> 标签：java, io

我有一个包含 7000 万行文本的大型测试文件。我必须逐行读取文件。

我使用了两种不同的方法：

```
InputStreamReader isr = new InputStreamReader(new FileInputStream(FilePath),"unicode");
BufferedReader br = new BufferedReader(isr);
while((cur=br.readLine()) != null); 
```

和

```
LineIterator it = FileUtils.lineIterator(new File(FilePath), "unicode");
while(it.hasNext()) cur=it.nextLine(); 
```

是否有另一种方法可以使这项任务更快？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-26T07:40:34.680

1）我确信在速度上没有区别，两者都在内部使用 FileInputStream 并缓冲

2）您可以自己测量并查看

3）虽然没有性能优势，但我喜欢 1.7 方法

```
try (BufferedReader br = Files.newBufferedReader(Paths.get("test.txt"), StandardCharsets.UTF_8)) {
    for (String line = null; (line = br.readLine()) != null;) {
        //
    }
} 
```

4) 基于扫描仪的版本

```
 try (Scanner sc = new Scanner(new File("test.txt"), "UTF-8")) {
        while (sc.hasNextLine()) {
            String line = sc.nextLine();
        }
        // note that Scanner suppresses exceptions
        if (sc.ioException() != null) {
            throw sc.ioException();
        }
    } 
```

5）这可能比其他的更快

```
try (SeekableByteChannel ch = Files.newByteChannel(Paths.get("test.txt"))) {
    ByteBuffer bb = ByteBuffer.allocateDirect(1000);
    for(;;) {
        StringBuilder line = new StringBuilder();
        int n = ch.read(bb);
        // add chars to line
        // ...
    }
} 
```

它需要一些编码，但由于`ByteBuffer.allocateDirect`. 它允许操作系统`ByteBuffer`直接从文件中读取字节，而无需复制

6）并行处理肯定会提高速度。制作一个大字节缓冲区，运行多个任务，将文件中的字节并行读取到该缓冲区中，当准备好找到第一个行尾时，制作一个`String`，找到下一个......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-26T07:33:56.980

如果您正在关注性能，您可以查看`java.nio.*`软件包 - 据说这些软件包比`java.io.*`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-24T12:29:02.960

在 Java 8 中，对于现在希望逐行读取文件大文件的任何人，

```
Stream<String> lines = Files.lines(Paths.get("c:\myfile.txt"));
lines.forEach(l -> {
  // Do anything line by line   
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-06T21:57:49.217

我有一个类似的问题，但我只需要文件中的字节。我通读了各种答案中提供的链接，并最终尝试在 Evgeniy 的答案中写一个类似于 #5 的链接。他们不是在开玩笑，这需要很多代码。

基本前提是每一行文本的长度都是未知的。我将从 SeekableByteChannel 开始，将数据读入 ByteBuffer，然后遍历它以查找 EOL。当某些东西是循环之间的“结转”时，它会增加一个计数器，然后最终移动 SeekableByteChannel 位置并读取整个缓冲区。

它很冗长......但它有效。这对于我需要的东西来说已经足够快了，但我相信还有更多的改进可以做。

**处理**方法被简化为开始读取文件的基础。

```
private long startOffset;
private long endOffset;
private SeekableByteChannel sbc;

private final ByteBuffer buffer = ByteBuffer.allocateDirect(1024);

public void process() throws IOException
{
    startOffset = 0;
    sbc = Files.newByteChannel(FILE, EnumSet.of(READ));
    byte[] message = null;
    while((message = readRecord()) != null)
    {
        // do something
    }
}

public byte[] readRecord() throws IOException
{
    endOffset = startOffset;

    boolean eol = false;
    boolean carryOver = false;
    byte[] record = null;

    while(!eol)
    {
        byte data;
        buffer.clear();
        final int bytesRead = sbc.read(buffer);

        if(bytesRead == -1)
        {
            return null;
        }

        buffer.flip();

        for(int i = 0; i < bytesRead && !eol; i++)
        {
            data = buffer.get();
            if(data == '\r' || data == '\n')
            {
                eol = true;
                endOffset += i;

                if(carryOver)
                {
                    final int messageSize = (int)(endOffset - startOffset);
                    sbc.position(startOffset);

                    final ByteBuffer tempBuffer = ByteBuffer.allocateDirect(messageSize);
                    sbc.read(tempBuffer);
                    tempBuffer.flip();

                    record = new byte[messageSize];
                    tempBuffer.get(record);
                }
                else
                {
                    record = new byte[i];

                    // Need to move the buffer position back since the get moved it forward
                    buffer.position(0);
                    buffer.get(record, 0, i);
                }

                // Skip past the newline characters
                if(isWindowsOS())
                {
                    startOffset = (endOffset + 2);
                }
                else
                {
                    startOffset = (endOffset + 1);
                }

                // Move the file position back
                sbc.position(startOffset);
            }
        }

        if(!eol && sbc.position() == sbc.size())
        {
            // We have hit the end of the file, just take all the bytes
            record = new byte[bytesRead];
            eol = true;
            buffer.position(0);
            buffer.get(record, 0, bytesRead);
        }
        else if(!eol)
        {
            // The EOL marker wasn't found, continue the loop
            carryOver = true;
            endOffset += bytesRead;
        }
    }

    // System.out.println(new String(record));
    return record;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-09T05:31:58.193

[![在此处输入图像描述](../Images/ac554b730bb300640071246abf4aceea.png)](https://i.stack.imgur.com/IlHTl.png)实际上，我在空闲时间对这个主题进行了几个月的研究，并提出了一个基准，这里是一个代码，用于对逐行读取文件的所有不同方式进行基准测试。个人性能可能因底层系统而异。我在 Windows 10 Java 8 Intel i5 HP 笔记本电脑上运行：这是代码。

```
import java.io.*;
import java.nio.channels.Channels;
import java.nio.channels.FileChannel;
import java.nio.file.Files;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import java.util.regex.Pattern;
import java.util.stream.Stream;

public class ReadComplexDelimitedFile {
    private static long total = 0;
    private static final Pattern FIELD_DELIMITER_PATTERN = Pattern.compile("\\^\\|\\^");

    @SuppressWarnings("unused")
    private void readFileUsingScanner() {

        String s;
        try (Scanner stdin = new Scanner(new File(this.getClass().getResource("input.txt").getPath()))) {
            while (stdin.hasNextLine()) {
                s = stdin.nextLine();
                String[] fields = FIELD_DELIMITER_PATTERN.split(s, 0);
                total = total + fields.length;
            }
        } catch (Exception e) {
            System.err.println("Error");
        }

    }

    //Winner
    private void readFileUsingCustomBufferedReader() {

        try (CustomBufferedReader stdin = new CustomBufferedReader(new FileReader(new File(this.getClass().getResource("input.txt").getPath())))) {
            String s;
            while ((s = stdin.readLine()) != null) {
                String[] fields = FIELD_DELIMITER_PATTERN.split(s, 0);
                total += fields.length;
            }
        } catch (Exception e) {
            System.err.println("Error");
        }

    }

    private void readFileUsingBufferedReader() {

        try (BufferedReader stdin = new BufferedReader(new FileReader(new File(this.getClass().getResource("input.txt").getPath())))) {
            String s;
            while ((s = stdin.readLine()) != null) {
                String[] fields = FIELD_DELIMITER_PATTERN.split(s, 0);
                total += fields.length;
            }
        } catch (Exception e) {
            System.err.println("Error");
        }
    }

    private void readFileUsingLineReader() {

        try (LineNumberReader stdin = new LineNumberReader(new FileReader(new File(this.getClass().getResource("input.txt").getPath())))) {
            String s;
            while ((s = stdin.readLine()) != null) {
                String[] fields = FIELD_DELIMITER_PATTERN.split(s, 0);
                total += fields.length;
            }
        } catch (Exception e) {
            System.err.println("Error");
        }
    }

    private void readFileUsingStreams() {

        try (Stream<String> stream = Files.lines((new File(this.getClass().getResource("input.txt").getPath())).toPath())) {
            total += stream.mapToInt(s -> FIELD_DELIMITER_PATTERN.split(s, 0).length).sum();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    }

    private void readFileUsingBufferedReaderFileChannel() {
        try (FileInputStream fis = new FileInputStream(this.getClass().getResource("input.txt").getPath())) {
            try (FileChannel inputChannel = fis.getChannel()) {
                try (CustomBufferedReader stdin = new CustomBufferedReader(Channels.newReader(inputChannel, "UTF-8"))) {
                    String s;
                    while ((s = stdin.readLine()) != null) {
                        String[] fields = FIELD_DELIMITER_PATTERN.split(s, 0);
                        total = total + fields.length;
                    }
                }
            } catch (Exception e) {
                System.err.println("Error");
            }
        } catch (Exception e) {
            System.err.println("Error");
        }

    }

    public static void main(String args[]) {
        //JVM wamrup
        for (int i = 0; i < 100000; i++) {
            total += i;
        }
        // We know scanner is slow-Still warming up
        ReadComplexDelimitedFile readComplexDelimitedFile = new ReadComplexDelimitedFile();
        List<Long> longList = new ArrayList<>(50);
        for (int i = 0; i < 50; i++) {
            total = 0;
            long startTime = System.nanoTime();
            //readComplexDelimitedFile.readFileUsingScanner();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingScanner");
        longList.forEach(System.out::println);
        // Actual performance test starts here

        longList = new ArrayList<>(10);
        for (int i = 0; i < 10; i++) {
            total = 0;
            long startTime = System.nanoTime();
            readComplexDelimitedFile.readFileUsingBufferedReaderFileChannel();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingBufferedReaderFileChannel");
        longList.forEach(System.out::println);
        longList.clear();
        for (int i = 0; i < 10; i++) {
            total = 0;
            long startTime = System.nanoTime();
            readComplexDelimitedFile.readFileUsingBufferedReader();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingBufferedReader");
        longList.forEach(System.out::println);
        longList.clear();
        for (int i = 0; i < 10; i++) {
            total = 0;
            long startTime = System.nanoTime();
            readComplexDelimitedFile.readFileUsingStreams();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingStreams");
        longList.forEach(System.out::println);
        longList.clear();
        for (int i = 0; i < 10; i++) {
            total = 0;
            long startTime = System.nanoTime();
            readComplexDelimitedFile.readFileUsingCustomBufferedReader();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingCustomBufferedReader");
        longList.forEach(System.out::println);
        longList.clear();
        for (int i = 0; i < 10; i++) {
            total = 0;
            long startTime = System.nanoTime();
            readComplexDelimitedFile.readFileUsingLineReader();
            long stopTime = System.nanoTime();
            long timeDifference = stopTime - startTime;
            longList.add(timeDifference);

        }
        System.out.println("Time taken for readFileUsingLineReader");
        longList.forEach(System.out::println);

    }
} 
```

我不得不重写 BufferedReader 以避免同步和一些不需要的边界条件。（至少这是我的感受。它没有经过单元测试，所以使用它需要您自担风险。）

```
import com.sun.istack.internal.NotNull;

import java.io.*;
import java.util.Iterator;
import java.util.NoSuchElementException;
import java.util.Spliterator;
import java.util.Spliterators;
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;
import java.util.stream.Stream;
import java.util.stream.StreamSupport;

/**
 * Reads text from a character-input stream, buffering characters so as to
 * provide for the efficient reading of characters, arrays, and lines.
 * <p>
 * <p> The buffer size may be specified, or the default size may be used.  The
 * default is large enough for most purposes.
 * <p>
 * <p> In general, each read request made of a Reader causes a corresponding
 * read request to be made of the underlying character or byte stream.  It is
 * therefore advisable to wrap a CustomBufferedReader around any Reader whose read()
 * operations may be costly, such as FileReaders and InputStreamReaders.  For
 * example,
 * <p>
 * <pre>
 * CustomBufferedReader in
 *   = new CustomBufferedReader(new FileReader("foo.in"));
 * </pre>
 * <p>
 * will buffer the input from the specified file.  Without buffering, each
 * invocation of read() or readLine() could cause bytes to be read from the
 * file, converted into characters, and then returned, which can be very
 * inefficient.
 * <p>
 * <p> Programs that use DataInputStreams for textual input can be localized by
 * replacing each DataInputStream with an appropriate CustomBufferedReader.
 *
 * @author Mark Reinhold
 * @see FileReader
 * @see InputStreamReader
 * @see java.nio.file.Files#newBufferedReader
 * @since JDK1.1
 */

public class CustomBufferedReader extends Reader {

    private final Reader in;

    private char cb[];
    private int nChars, nextChar;

    private static final int INVALIDATED = -2;
    private static final int UNMARKED = -1;
    private int markedChar = UNMARKED;
    private int readAheadLimit = 0; /* Valid only when markedChar > 0 */

    /**
     * If the next character is a line feed, skip it
     */
    private boolean skipLF = false;

    /**
     * The skipLF flag when the mark was set
     */
    private boolean markedSkipLF = false;

    private static int defaultCharBufferSize = 8192;
    private static int defaultExpectedLineLength = 80;
    private ReadWriteLock rwlock;

    /**
     * Creates a buffering character-input stream that uses an input buffer of
     * the specified size.
     *
     * @param in A Reader
     * @param sz Input-buffer size
     * @throws IllegalArgumentException If {@code sz <= 0}
     */
    public CustomBufferedReader(@NotNull final Reader in, int sz) {
        super(in);
        if (sz <= 0)
            throw new IllegalArgumentException("Buffer size <= 0");
        this.in = in;
        cb = new char[sz];
        nextChar = nChars = 0;
        rwlock = new ReentrantReadWriteLock();
    }

    /**
     * Creates a buffering character-input stream that uses a default-sized
     * input buffer.
     *
     * @param in A Reader
     */
    public CustomBufferedReader(@NotNull final Reader in) {
        this(in, defaultCharBufferSize);
    }

    /**
     * Fills the input buffer, taking the mark into account if it is valid.
     */
    private void fill() throws IOException {
        int dst;
        if (markedChar <= UNMARKED) {
            /* No mark */
            dst = 0;
        } else {
            /* Marked */
            int delta = nextChar - markedChar;
            if (delta >= readAheadLimit) {
                /* Gone past read-ahead limit: Invalidate mark */
                markedChar = INVALIDATED;
                readAheadLimit = 0;
                dst = 0;
            } else {
                if (readAheadLimit <= cb.length) {
                    /* Shuffle in the current buffer */
                    System.arraycopy(cb, markedChar, cb, 0, delta);
                    markedChar = 0;
                    dst = delta;
                } else {
                    /* Reallocate buffer to accommodate read-ahead limit */
                    char ncb[] = new char[readAheadLimit];
                    System.arraycopy(cb, markedChar, ncb, 0, delta);
                    cb = ncb;
                    markedChar = 0;
                    dst = delta;
                }
                nextChar = nChars = delta;
            }
        }

        int n;
        do {
            n = in.read(cb, dst, cb.length - dst);
        } while (n == 0);
        if (n > 0) {
            nChars = dst + n;
            nextChar = dst;
        }
    }

    /**
     * Reads a single character.
     *
     * @return The character read, as an integer in the range
     * 0 to 65535 (<tt>0x00-0xffff</tt>), or -1 if the
     * end of the stream has been reached
     * @throws IOException If an I/O error occurs
     */
    public char readChar() throws IOException {
        for (; ; ) {
            if (nextChar >= nChars) {
                fill();
                if (nextChar >= nChars)
                    return (char) -1;
            }
            return cb[nextChar++];
        }
    }

    /**
     * Reads characters into a portion of an array, reading from the underlying
     * stream if necessary.
     */
    private int read1(char[] cbuf, int off, int len) throws IOException {
        if (nextChar >= nChars) {
            /* If the requested length is at least as large as the buffer, and
               if there is no mark/reset activity, and if line feeds are not
               being skipped, do not bother to copy the characters into the
               local buffer.  In this way buffered streams will cascade
               harmlessly. */
            if (len >= cb.length && markedChar <= UNMARKED && !skipLF) {
                return in.read(cbuf, off, len);
            }
            fill();
        }
        if (nextChar >= nChars) return -1;
        int n = Math.min(len, nChars - nextChar);
        System.arraycopy(cb, nextChar, cbuf, off, n);
        nextChar += n;
        return n;
    }

    /**
     * Reads characters into a portion of an array.
     * <p>
     * <p> This method implements the general contract of the corresponding
     * <code>{@link Reader#read(char[], int, int) read}</code> method of the
     * <code>{@link Reader}</code> class.  As an additional convenience, it
     * attempts to read as many characters as possible by repeatedly invoking
     * the <code>read</code> method of the underlying stream.  This iterated
     * <code>read</code> continues until one of the following conditions becomes
     * true: <ul>
     * <p>
     * <li> The specified number of characters have been read,
     * <p>
     * <li> The <code>read</code> method of the underlying stream returns
     * <code>-1</code>, indicating end-of-file, or
     * <p>
     * <li> The <code>ready</code> method of the underlying stream
     * returns <code>false</code>, indicating that further input requests
     * would block.
     * <p>
     * </ul> If the first <code>read</code> on the underlying stream returns
     * <code>-1</code> to indicate end-of-file then this method returns
     * <code>-1</code>.  Otherwise this method returns the number of characters
     * actually read.
     * <p>
     * <p> Subclasses of this class are encouraged, but not required, to
     * attempt to read as many characters as possible in the same fashion.
     * <p>
     * <p> Ordinarily this method takes characters from this stream's character
     * buffer, filling it from the underlying stream as necessary.  If,
     * however, the buffer is empty, the mark is not valid, and the requested
     * length is at least as large as the buffer, then this method will read
     * characters directly from the underlying stream into the given array.
     * Thus redundant <code>CustomBufferedReader</code>s will not copy data
     * unnecessarily.
     *
     * @param cbuf Destination buffer
     * @param off  Offset at which to start storing characters
     * @param len  Maximum number of characters to read
     * @return The number of characters read, or -1 if the end of the
     * stream has been reached
     * @throws IOException If an I/O error occurs
     */
    public int read(char cbuf[], int off, int len) throws IOException {
        int n = read1(cbuf, off, len);
        if (n <= 0) return n;
        while ((n < len) && in.ready()) {
            int n1 = read1(cbuf, off + n, len - n);
            if (n1 <= 0) break;
            n += n1;
        }
        return n;
    }

    /**
     * Reads a line of text.  A line is considered to be terminated by any one
     * of a line feed ('\n'), a carriage return ('\r'), or a carriage return
     * followed immediately by a linefeed.
     *
     * @param ignoreLF If true, the next '\n' will be skipped
     * @return A String containing the contents of the line, not including
     * any line-termination characters, or null if the end of the
     * stream has been reached
     * @throws IOException If an I/O error occurs
     * @see java.io.LineNumberReader#readLine()
     */
    String readLine(boolean ignoreLF) throws IOException {
        StringBuilder s = null;
        int startChar;

        bufferLoop:
        for (; ; ) {

            if (nextChar >= nChars)
                fill();
            if (nextChar >= nChars) { /* EOF */
                if (s != null && s.length() > 0)
                    return s.toString();
                else
                    return null;
            }
            boolean eol = false;
            char c = 0;
            int i;

            /* Skip a leftover '\n', if necessary */

            charLoop:
            for (i = nextChar; i < nChars; i++) {
                c = cb[i];
                if ((c == '\n')) {
                    eol = true;
                    break charLoop;
                }
            }

            startChar = nextChar;
            nextChar = i;

            if (eol) {
                String str;
                if (s == null) {
                    str = new String(cb, startChar, i - startChar);
                } else {
                    s.append(cb, startChar, i - startChar);
                    str = s.toString();
                }
                nextChar++;
                return str;
            }

            if (s == null)
                s = new StringBuilder(defaultExpectedLineLength);
            s.append(cb, startChar, i - startChar);
        }
    }

    /**
     * Reads a line of text.  A line is considered to be terminated by any one
     * of a line feed ('\n'), a carriage return ('\r'), or a carriage return
     * followed immediately by a linefeed.
     *
     * @return A String containing the contents of the line, not including
     * any line-termination characters, or null if the end of the
     * stream has been reached
     * @throws IOException If an I/O error occurs
     * @see java.nio.file.Files#readAllLines
     */
    public String readLine() throws IOException {
        return readLine(false);
    }

    /**
     * Skips characters.
     *
     * @param n The number of characters to skip
     * @return The number of characters actually skipped
     * @throws IllegalArgumentException If <code>n</code> is negative.
     * @throws IOException              If an I/O error occurs
     */
    public long skip(long n) throws IOException {
        if (n < 0L) {
            throw new IllegalArgumentException("skip value is negative");
        }
        rwlock.readLock().lock();
            long r = n;
            try{
            while (r > 0) {
                if (nextChar >= nChars)
                    fill();
                if (nextChar >= nChars) /* EOF */
                    break;
                if (skipLF) {
                    skipLF = false;
                    if (cb[nextChar] == '\n') {
                        nextChar++;
                    }
                }
                long d = nChars - nextChar;
                if (r <= d) {
                    nextChar += r;
                    r = 0;
                    break;
                } else {
                    r -= d;
                    nextChar = nChars;
                }
            }
        } finally {
            rwlock.readLock().unlock();
        }
        return n - r;
    }

    /**
     * Tells whether this stream is ready to be read.  A buffered character
     * stream is ready if the buffer is not empty, or if the underlying
     * character stream is ready.
     *
     * @throws IOException If an I/O error occurs
     */
    public boolean ready() throws IOException {
        rwlock.readLock().lock();
        try {
            /*
             * If newline needs to be skipped and the next char to be read
             * is a newline character, then just skip it right away.
             */
            if (skipLF) {
                /* Note that in.ready() will return true if and only if the next
                 * read on the stream will not block.
                 */
                if (nextChar >= nChars && in.ready()) {
                    fill();
                }
                if (nextChar < nChars) {
                    if (cb[nextChar] == '\n')
                        nextChar++;
                    skipLF = false;
                }
            }
        } finally {
            rwlock.readLock().unlock();
        }
        return (nextChar < nChars) || in.ready();

    }

    /**
     * Tells whether this stream supports the mark() operation, which it does.
     */
    public boolean markSupported() {
        return true;
    }

    /**
     * Marks the present position in the stream.  Subsequent calls to reset()
     * will attempt to reposition the stream to this point.
     *
     * @param readAheadLimit Limit on the number of characters that may be
     *                       read while still preserving the mark. An attempt
     *                       to reset the stream after reading characters
     *                       up to this limit or beyond may fail.
     *                       A limit value larger than the size of the input
     *                       buffer will cause a new buffer to be allocated
     *                       whose size is no smaller than limit.
     *                       Therefore large values should be used with care.
     * @throws IllegalArgumentException If {@code readAheadLimit < 0}
     * @throws IOException              If an I/O error occurs
     */
    public void mark(int readAheadLimit) throws IOException {
        if (readAheadLimit < 0) {
            throw new IllegalArgumentException("Read-ahead limit < 0");
        }
        rwlock.readLock().lock();
        try {
            this.readAheadLimit = readAheadLimit;
            markedChar = nextChar;
            markedSkipLF = skipLF;
        } finally {
            rwlock.readLock().unlock();
        }
    }

    /**
     * Resets the stream to the most recent mark.
     *
     * @throws IOException If the stream has never been marked,
     *                     or if the mark has been invalidated
     */
    public void reset() throws IOException {
        rwlock.readLock().lock();
        try {
            if (markedChar < 0)
                throw new IOException((markedChar == INVALIDATED)
                        ? "Mark invalid"
                        : "Stream not marked");
            nextChar = markedChar;
            skipLF = markedSkipLF;
        } finally {
            rwlock.readLock().unlock();
        }
    }

    public void close() throws IOException {
        rwlock.readLock().lock();
        try {
            in.close();
        } finally {
            cb = null;
            rwlock.readLock().unlock();
        }

    }

    public Stream<String> lines() {
        Iterator<String> iter = new Iterator<String>() {
            String nextLine = null;

            @Override
            public boolean hasNext() {
                if (nextLine != null) {
                    return true;
                } else {
                    try {
                        nextLine = readLine();
                        return (nextLine != null);
                    } catch (IOException e) {
                        throw new UncheckedIOException(e);
                    }
                }
            }

            @Override
            public String next() {
                if (nextLine != null || hasNext()) {
                    String line = nextLine;
                    nextLine = null;
                    return line;
                } else {
                    throw new NoSuchElementException();
                }
            }
        };
        return StreamSupport.stream(Spliterators.spliteratorUnknownSize(
                iter, Spliterator.ORDERED | Spliterator.NONNULL), false);
    }
} 
```

现在结果：

readFileUsingBufferedReaderFileChannel 所用时间 2902690903 1845190694 1894071377 1815161868 1861056735 1867693540 1857521371 1794176251 1768008762 1853089582

readFileUsingBufferedReader 所用时间 2022837353 1925901163 1802266711 1842689572 1899984555 1843101306 1998642345 1821242301 1820168806 1830375108

readFileUsingStreams 所用时间 1992855461 1930827034 1850876033 1843402533 1800378283 1863581324 1810857226 1798497108 1809531144 1796345853

readFileUsingCustomBufferedReader 所用时间 1759732702 1765987214 1776997357 1772999486 1768559162 1755248431 1744434555 1750349867 1740582606 1751390934

readFileUsingLineReader 所用时间 1845307174 1830950256 1829847321 1828125293 1827936280 1836947487 1832186310 1820276327 1830157935 1829171481

进程以退出代码 0 结束

推论：测试是在一个 200 MB 的文件上运行的。该测试重复了几次。数据看起来像这样

```
Start Date^|^Start Time^|^End Date^|^End Time^|^Event Title ^|^All Day Event^|^No End Time^|^Event Description^|^Contact ^|^Contact Email^|^Contact Phone^|^Location^|^Category^|^Mandatory^|^Registration^|^Maximum^|^Last Date To Register
9/5/2011^|^3:00:00 PM^|^9/5/2011^|^^|^Social Studies Dept. Meeting^|^N^|^Y^|^Department meeting^|^Chris Gallagher^|^cgallagher@schoolwires.com^|^814-555-5179^|^High School^|^2^|^N^|^N^|^25^|^9/2/2011 
```

底线 BufferedReader 和我的 CustomReader 之间没有太大区别，它非常小，因此您可以使用它来读取您的文件。

相信我，您不必伤脑筋。将 BufferedReader 与 readLine 一起使用，它经过了适当的测试。最糟糕的是，如果您觉得可以改进它，只需覆盖并将其更改为 StringBuilder 而不是 StringBuffer 即可节省半秒

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-26T07:42:58.720

[这篇文章](http://www.javapractices.com/topic/TopicAction.do?Id=42)是一个很好的开始。

此外，您需要创建测试用例，在其中读取前 10k（或其他内容，但不应太小）行并相应地计算读取时间。

线程可能是一个不错的方法，但重要的是我们知道您将如何处理数据。

要考虑的另一件事是，您将如何存储该大小的数据。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-12T08:57:59.347

我尝试了以下三种方法，我的文件大小为1M，得到了结果：

[![在此处输入图像描述](../Images/3d673f56461d8b97a73712c8085e4a1f.png)](https://i.stack.imgur.com/D2fWt.png)

我多次运行该程序，它看起来 BufferedReader 更快。

```
@Test
public void testLargeFileIO_Scanner() throws Exception {

    long start = new Date().getTime();

    String fileName = "/Downloads/SampleTextFile_1000kb.txt"; //this path is on my local
    InputStream inputStream = new FileInputStream(fileName);

    try (Scanner fileScanner = new Scanner(inputStream, StandardCharsets.UTF_8.name())) {
        while (fileScanner.hasNextLine()) {
            String line = fileScanner.nextLine();
            //System.out.println(line);
        }
    }
    long end = new Date().getTime();

    long time = end - start;
    System.out.println("Scanner Time Consumed => " + time);

}

@Test
 public void testLargeFileIO_BufferedReader() throws Exception {

    long start = new Date().getTime();

    String fileName = "/Downloads/SampleTextFile_1000kb.txt"; //this path is on my local
    try (BufferedReader fileBufferReader = new BufferedReader(new FileReader(fileName))) {
        String fileLineContent;
        while ((fileLineContent = fileBufferReader.readLine()) != null) {
            //System.out.println(fileLineContent);
        }
    }
    long end = new Date().getTime();

    long time = (long) (end - start);
    System.out.println("BufferedReader Time Consumed => " + time);

}

@Test
public void testLargeFileIO_Stream() throws Exception {

    long start = new Date().getTime();

    String fileName = "/Downloads/SampleTextFile_1000kb.txt"; //this path is on my local
    try (Stream inputStream = Files.lines(Paths.get(fileName), StandardCharsets.UTF_8)) {
        //inputStream.forEach(System.out::println);
    }
    long end = new Date().getTime();

    long time = end - start;
    System.out.println("Stream Time Consumed => " + time);

} 
```

# ruby - 使用命名空间获取 XML 属性的值

> ID：14037407
> 
> 赞同：3
> 
> 时间：2012-12-26T07:30:21.257
> 
> 标签：ruby, xml, nokogiri

我正在解析一个 pptx 文件并遇到了问题。这是源 XML 的示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<p:presentation xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" xmlns:p="http://schemas.openxmlformats.org/presentationml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
  <p:sldMasterIdLst>
    <p:sldMasterId id="2147483648" r:id="rId2"/>
  </p:sldMasterIdLst>
  <p:sldIdLst>
    <p:sldId id="256" r:id="rId3"/>
  </p:sldIdLst>
  <p:sldSz cx="10080625" cy="7559675"/>
  <p:notesSz cx="7772400" cy="10058400"/>
</p:presentation> 
```

我需要获取标签`r:id`中的属性值。`sldMasterId`

```
doc = Nokogiri::XML(path_to_pptx)
doc.xpath('p:presentation/p:sldMasterIdLst/p:sldMasterId').attr('id').value 
```

返回`2147483648`但我需要`rId2`，这是 `r:id`属性值。

我找到了`attribute_with_ns(name, namespace)`方法，但是

```
doc.xpath('p:presentation/p:sldMasterIdLst/p:sldMasterId').attribute_with_ns('id', 'r') 
```

返回零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:01:10.527

您可以像引用元素命名空间一样引用 xpath 中的属性命名空间：

```
doc.xpath('p:presentation/p:sldMasterIdLst/p:sldMasterId/@r:id') 
```

如果你想使用`attribute_with_ns`，你需要使用*实际的命名空间*，而不仅仅是*前缀*：

```
doc.at_xpath('p:presentation/p:sldMasterIdLst/p:sldMasterId')
  .attribute_with_ns('id', "http://schemas.openxmlformats.org/officeDocument/2006/relationships") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:10:38.777

[http://nokogiri.org/Nokogiri/XML/Node.html#method-i-attributes](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-attributes)

如果您需要区分具有相同名称的属性，则使用不同的命名空间使用 attribute_nodes 代替。

```
doc.xpath('p:presentation/p:sldMasterIdLst/p:sldMasterId').each do |element| 
  element.attribute_nodes().select do |node|
    puts node if node.namespace && node.namespace.prefix == "r"
  end  
end 
```

# c# - 无法访问excel文件

> ID：14037412
> 
> 赞同：12
> 
> 时间：2012-12-26T07:30:49.143
> 
> 标签：c#, excel, windows-services, interop

我正在开发 Windows 服务，生成报告。该报告有一个模板。这个模板是在一个 excel 文件中准备的。该文件被复制到输出文件夹。

在开发过程中，我像控制台应用程序一样启动了该服务，并且访问该文件没有问题。

然后我准备了一个服务安装程序。该服务安装在`Local System`帐户下。所以这个excel模板文件被标记为*内容*并与可执行文件一起复制到安装目录。

但是，当服务启动时，excel 似乎无法访问此文件。该服务安装到`c:\Program Files (x86)\Our Company\Service Name\`. 目标操作系统是 Windows Server 2008。在测试时，我使用的是 Windows 7 并遇到了同样的问题。

我使用以下代码访问excel。

```
using Excel = Microsoft.Office.Interop.Excel;    
//...
Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
//the following line throws an exception
Excel.Workbook xlWorkBook = xlApp.Workbooks.Open(@"path"); 
```

我还尝试将 excel 模板文件复制到某个临时目录（服务有权写入该目录 - 这是经过测试的）并尝试从那里打开它，但没有成功（虽然这个变体在控制台应用程序中运行良好好）。

错误消息是：

> Microsoft Office Excel 无法访问文件 /path/。有几个可能的原因：
> 
> ```
> 1\. The file name or path does not exist.
> 2\. The file is being used by another program.
> 3\. The workbook you are trying to save has the same name as a currently open workbook. 
> ```

如何让 windows 服务访问这个 excel 模板文件？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-26T12:48:05.120

要使用本地系统帐户在用户服务下安全运行 Office 应用程序（Excel 和其他），您必须了解两个重要事项：1) 在 Windows Server 2008/2008 R2 中，您必须手动创建两个文件夹：C:\Windows\system32\config\systemprofile \desktop
C:\Windows\SysWow64\config\systemprofile\desktop（仅适用于 x64 版本） 如果没有此文件夹，您将无法从本地 SystemAccount 更正运行办公应用程序

2）如果您的服务配置为没有桌面交互，那么在第一次启动办公应用程序（例如 Excel）时冻结用户凭据对话框 - 在此模式下您看不到此窗口 - 要解决此问题，请启用桌面交互，切换到办公窗口后您服务运行它并手动输入凭据。

[那里](http://strongcpp.blogspot.ru/2013/04/blog-post_8.html)的其他信息（使用谷歌翻译阅读）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-26T14:07:54.350

有一篇详细的 MS 知识库文章，标题[为“Office 服务器端自动化的注意事项”](http://support.microsoft.com/kb/257757)。一些关键摘录：

> *   **用户身份**：Office 应用程序在应用程序运行时假定用户身份，即使自动化启动应用程序时也是如此。应用程序尝试根据启动应用程序的用户的用户注册表配置单元中的设置来初始化工具栏、菜单、选项、打印机和一些加载项。许多服务在没有用户配置文件的帐户下运行（例如 SYSTEM 帐户或 IWAM_[servername] 帐户）。因此，Office 可能无法在启动时正确初始化。在这种情况下，Office 在 CreateObject 函数或 CoCreateInstance 函数上返回错误。即使可以启动 Office 应用程序，如果不存在用户配置文件，其他功能也可能无法正常工作。
>     
>     
> *   **与桌面的交互**性：Office 应用程序假定它们在交互式桌面下运行。在某些情况下，可能需要使应用程序可见，某些自动化功能才能正常工作。如果发生意外错误，或者需要未指定的参数来完成某项功能，Office 旨在通过一个模式对话框提示用户，询问用户想要做什么。无法关闭非交互式桌面上的模式对话框。因此，该线程无限期地停止响应（挂起）。尽管某些编码实践可以帮助降低出现此问题的可能性，但这些实践并不能完全防止该问题。**仅这一事实就使得从服务器端环境运行 Office 应用程序存在风险且不受支持。**

显然，正如评论中指出的那样，使用该`SYSTEM`帐户是一个错误。您需要在具有用户配置文件的帐户下运行该服务。

但即使你解决了这个问题，另一个要点也会杀了你。Office 应用程序确实假设它们在交互式桌面下运行。我的建议是放弃尝试通过服务自动化 Office。改用 Aspose 之类的库。或者在交互式桌面上运行该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T10:10:17.120

我刚刚遇到了同样的问题。

我制作了一个 .bat 文件，我在其中调用了 .exe 文件。

最后，我从任务调度程序操作中调用了 .bat 文件。

它工作正常。

# mongodb - 哪些原因会导致 MongoDB 更新操作失败？

> ID：14037414
> 
> 赞同：3
> 
> 时间：2012-12-26T07:30:53.720
> 
> 标签：mongodb, transactions

我正在使用 MongoDB 实现一些事务。由于我必须实现自己的回滚（并且回滚可能会失败），我想知道什么类型的错误会阻止更新操作成功。

以下是我希望见面的原因：

1.  **网络问题**（在这种情况下我们需要稍后重试），
2.  **查询没有找到我要更新的对象**（在这种情况下，回滚应该忽略更新并继续其他步骤）

是否有任何其他原因可能阻止更新操作成功？

**更新：** 这个问题是关于了解不同类型的可能失败，以便应用程序的代码可以相应地对它们做出反应。

# asp.net-mvc-3 - 实体框架 MVC3 上的嵌套查询

> ID：14037421
> 
> 赞同：0
> 
> 时间：2012-12-26T07:31:37.973
> 
> 标签：asp.net-mvc-3, nested, entity

我已经尝试了几件事，但它不起作用。基本上，我想在 EF MVC3 上添加嵌套查询。

SQL查询：

> select * from Book where Book_PK in ( select Book_Ref from Library where Library_Ref='18bd9526-f3e9-4d5b-86cd-ccfea64b6f7b' )
> 
> Book_PK 是 Book 的主键
> Book_ref 是 Book 的外键
> 
> Library_Ref 只是过滤 Book_ref 的属性

我有 2 个表：通过外键连接的 Book 和 Library。

我只有一个输入，即 id，但这不是 Library 的主键。我试过了：

```
`
School.Models.Entities.SchoolAll db = new Models.Entities.SchoolAll(); // db consists whole database

var temp = db.Books.Where(e => e.Book_PK.Contains(db.Libraries.Where(f => f.Library_Ref == id))).ToList();
// where id is one of the field of Library` 
```

每个图书馆实体可能有一个或可能有图书实体。因此，查询的结果应该是列表。我需要将此列表保存到一个变量中。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:17:09.270

您可以使用 Singl 方法 insetead Of Where，如下所示

```
var temp = db.Books.Single(e => e.Book_PK.Contains(db.Libraries.Where(f => f.Library_Ref == id))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:24:49.687

成功完成，转换以下查询：

> select * from Book where Book_PK in ( select Book_Ref from Library where Library_Ref='18bd9526-f3e9-4d5b-86cd-ccfea64b6f7b' )

进入以下实体框架：

> db.Books.Where(y => y.L​​ibraries.Any(r => r.Library_Ref == id)).ToList()

感谢stackoverflow

# css - Chrome中的双倍大小复选框

> ID：14037422
> 
> 赞同：6
> 
> 时间：2012-12-26T07:31:45.583
> 
> 标签：css, google-chrome

除 Chrome 之外的所有浏览器都显示这种样式：

```
.my-checkbox {
    width: 20px;
    height:20px;
    color:#fff;
    -moz-appearance:none;
    -webkit-appearance:none;
    -o-appearance:none;
    border: 0px inset ThreeDFace ! important;
    margin: 5px;
    padding: 5px;
} 
```

示例：http: [//jsfiddle.net/sJxst/](http://jsfiddle.net/sJxst/)

这种方法在 Chrome 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:37:32.090

有一个用于此的 jquery 插件.. 我不知道 Chrome 的任何其他方法

[http://archive.plugins.jquery.com/project/ui-checkbox](http://archive.plugins.jquery.com/project/ui-checkbox)

还要检查这个：

```
input.checkbox { display: none }
input.checkbox + label > span.checkbox-span { display: inline-block; color: #FFF; border: 1px solid #000; width: 30px; line-height: 30px; font-size: 24px; text-align: center }
input.checkbox:checked + label > span.checkbox-span { color: #000 } 
```

[http://jsfiddle.net/KfjuS/4/](http://jsfiddle.net/KfjuS/4/)

# java - 在 Spring Security 中保护两个或多个 /** url

> ID：14037424
> 
> 赞同：4
> 
> 时间：2012-12-26T07:32:00.147
> 
> 标签：java, spring, jakarta-ee, spring-security

我无法使用 Springs Security 保护两个 URL。我想保护 /admin/** 和 /user/**。主要问题是我有单独的 ADMIN 表作为 ADMIN & ADMIN_ROLES 和 USER 作为 USER & USER_ROLES。我也有单独的管理员和用户登录页面。我在下面分享我的代码。请帮我解决这个问题。

我需要的是，当一些进入 /admin URL 时，它应该显示 Admin Login Page 并将我重定向到 /admin/embassy，当一些打开 / URL 它应该到 User Login Page 并且成功登录时应该将我重定向到 /user/embassy .

> 弹簧安全.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
    <intercept-url pattern="/user/**" access="ROLE_USER" />
    <form-login login-page="/" default-target-url="/user/embassy"
        authentication-failure-url="/loginfailed" />
    <logout invalidate-session="true" logout-success-url="/logout" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select USERNAME, PASSWORD, ENABLED from USER where USERNAME = ?"
            authorities-by-username-query="select u.USERNAME, ur.AUTHORITY from USER u, USER_ROLES ur where u.ID = ur.USER_ID and u.USERNAME =?"
        />
    </authentication-provider>
</authentication-manager>

<http auto-config="true">
    <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
    <form-login login-page="/admin" default-target-url="/admin/embassy"
        authentication-failure-url="/adminloginfailed" />
    <logout invalidate-session="true" logout-success-url="/adminlogout" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select USERNAME, PASSWORD, ENABLED from ADMIN where USERNAME = ?"
            authorities-by-username-query="select a.USERNAME, ar.AUTHORITY from ADMIN a, ADMIN_ROLES ar where a.ID = ar.USER_ID and a.USERNAME =?"
        />
    </authentication-provider>
</authentication-manager> 
```

> web.xml

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?><web-app 
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" 
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<servlet>
    <servlet-name>Admin</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Admin</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>User</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>User</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>
              org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/User-servlet.xml,
                    /WEB-INF/Admin-servlet.xml,
        /WEB-INF/Spring-Datasource.xml,
        /WEB-INF/spring-security.xml
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
              org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
        <param-name>services</param-name>
        <param-value/>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:55:05.223

阅读评论后，我猜你对一张桌子没有问题，所以我假设它。
所以你`spring-security.xml`应该看起来像：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
    <intercept-url pattern="/user/**" access="ROLE_USER" />
    <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
    <form-login login-page="/" authentication-success-handler-ref="mySuccessHandler"
        authentication-failure-url="/loginfailed" />
    <logout invalidate-session="true" logout-success-url="/logout" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select USERNAME, PASSWORD, ENABLED from USER where USERNAME = ?"
            authorities-by-username-query="select u.USERNAME, ur.AUTHORITY from USER u, USER_ROLES ur where u.ID = ur.USER_ID and u.USERNAME =?" />
    </authentication-provider>
</authentication-manager> 
```

我假设您的所有用户和管理员现在都在用户表中。
现在实现。[`AuthenticationSuccessHandler`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AuthenticationSuccessHandler.html)，并将其注册为与 aboves 的值同名的 bean `athentication-success-handler-ref`，重定向到您想要的页面。

```
public class MySuccessHandler implements AuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws IOException, ServletException {
        Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
        if (roles.contains("ROLE_ADMIN")){
            response.sendRedirect("/admin/embassy");   
            return;
        }
        response.sendRedirect("/user/embassy");
    }    
} 
```

所以我们添加到`spring-security.xml`

```
<beans:bean id="mySuccessHandler" class="my.domain.MySuccessHandler" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:08:26.100

您正在尝试获得一个非常定制的身份验证方案，您需要绕过许多 `http`命名空间功能才能使其工作。您将需要一些东西：

*   两个[`AuthenticationEntryPoint`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint.html)实例，每个登录页面一个
*   一个自定义[`AuthenticationDetailsSource`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationDetailsSource.html)注入到您的[`UsernamePasswordAuthenticationFilter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html), 以便将一些上下文存储到[`Authentication`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/Authentication.html)允许您确定用户登录的登录页面是 ADMIN 还是 USER 的实例中。
*   `AuthenticationManager`使用 检索该上下文的自定义实例`Authentication.getDetails()`，并决定对 ADMIN 访问或 USER 访问进行身份验证。
*   两个[`DaoAuthenticationProviders`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/dao/package-summary.html)，每个都有一个[`JdbcDaoImpl`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/jdbc/JdbcDaoImpl.html)，一个定义 ADMIN 表的查询，另一个定义 USER 表的查询。

如您所见，这需要一些工作。如果可能，我强烈建议对用户使用统一的表结构和统一的登录页面。这将为您提供一个非常标准的 Spring Security 配置。然后，您可以稍微自定义该配置，以便在登录成功时根据用户角色动态重定向。

# delphi - TDataSet 和 TClientDataset 内存管理有什么区别？

> ID：14037431
> 
> 赞同：4
> 
> 时间：2012-12-26T07:32:33.157
> 
> 标签：delphi, firebird, delphi-2007, tclientdataset

我正在使用`TIBDataSet`Delphi 2007 从 Firebird 数据库表中获取记录。该表中有大约 100 万条记录，我得到了`Out of memory`错误。不过，相同的查询可以正常运行`TClientDataset`。

你能告诉我内存管理`TClientDataset`之间的区别吗？`TDataSet`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T09:52:18.853

@alzaimar 有一点，无论您使用什么数据集组件，在 32 位平台上加载到内存中的数百万条记录都将是一个挑战。

所以盒子上的内存是至关重要的。

我们对用 Delphi 2006 编写的应用程序做类似的事情。我们所做的是在 Windows7 64 位或服务器 2008 64 位上运行它们。

利用操作系统和其他应用程序的额外内存。

试试[Delphi 最好的内存管理器](http://sourceforge.net/projects/fastmm/)

还将 {$SetPEFlags IMAGE_FILE_LARGE_ADDRESS_AWARE} 放在你项目的源代码中，以便在 64 位机器上从 32 位 delphi 中获得高达 4GB 的空间。

```
program Project15;

uses
  Forms,
  Unit15 in 'Unit15.pas' {Form15};

{$R *.res}

{$SetPEFlags IMAGE_FILE_LARGE_ADDRESS_AWARE}

begin
  Application.Initialize;
  Application.CreateForm(TForm15, Form15);
  Application.Run;
end. 
```

执行上述操作将让您了解哪个最适合您的应用程序 TDataSet 或 TClientDatset。

您还可以考虑使用一些第三方数据连接组件，这些组件在基本的 Delphi 数据对象上改进了性能和内存管理。

我们使用 Devart 组件和 SQL 工具，它们确实物有所值。[Devart Data 工具网站](http://www.devart.com/)

# android - 无法在 Android 4.0 上启动活动 ComponentInfo

> ID：14037438
> 
> 赞同：0
> 
> 时间：2012-12-26T07:33:28.807
> 
> 标签：android, android-camera

我的应用程序行为随机退出。当我在 API 级别 10 上运行它时。它运行良好。但是当我在 API 级别 14 上运行它时，它显示以下异常：

```
12-26 12:19:18.021: W/dalvikvm(1594): threadid=1: thread exiting with uncaught exception (group=0xb5f18288)
12-26 12:19:18.051: E/AndroidRuntime(1594): FATAL EXCEPTION: main
12-26 12:19:18.051: E/AndroidRuntime(1594): java.lang.RuntimeException: Unable to start activity ComponentInfo{tariq.buynow3/tariq.buynow3.CameraTestActivity}: java.lang.NullPointerException
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.os.Looper.loop(Looper.java:137)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at java.lang.reflect.Method.invoke(Method.java:511)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at dalvik.system.NativeStart.main(Native Method)
12-26 12:19:18.051: E/AndroidRuntime(1594): Caused by: java.lang.NullPointerException
12-26 12:19:18.051: E/AndroidRuntime(1594):     at tariq.buynow3.CameraTestActivity.onCreate(CameraTestActivity.java:76)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.Activity.performCreate(Activity.java:5008)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-26 12:19:18.051: E/AndroidRuntime(1594):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-26 12:19:18.051: E/AndroidRuntime(1594):     ... 11 more 
```

CameraTestActivity如下

```
/*
 * Basic no frills app which integrates the ZBar barcode scanner with
 * the camera.
 * 
 * Created by lisah0 on 2012-02-24
 */
package tariq.buynow3;

import net.sourceforge.zbar.Config;
import net.sourceforge.zbar.Image;
import net.sourceforge.zbar.ImageScanner;
import net.sourceforge.zbar.Symbol;
import net.sourceforge.zbar.SymbolSet;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.PreviewCallback;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.TextView;
/* Import ZBar Class files */

public class CameraTestActivity extends Activity
{
    private Camera mCamera;
    private CameraPreview mPreview;
    private Handler autoFocusHandler;

    TextView scanText;
    Button scanButton;

    ImageScanner scanner;

    @SuppressWarnings("unused")
    private boolean barcodeScanned = false;
    private boolean previewing = true;

    static {
        System.loadLibrary("iconv");
    } 

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        autoFocusHandler = new Handler();
        mCamera = getCameraInstance();

        /* Instance barcode scanner */
        scanner = new ImageScanner();
        scanner.setConfig(0, Config.X_DENSITY, 3);
        scanner.setConfig(0, Config.Y_DENSITY, 3);
        FrameLayout preview = (FrameLayout)findViewById(R.id.cameraPreview);
        mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);
        preview.addView(mPreview);
        scanText = (TextView)findViewById(R.id.scanText);
        Intent in = new Intent();
        setResult(-1,in);

        /*scanButton = (Button)findViewById(R.id.ScanButton);

       /* scanButton.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    if (barcodeScanned) {
                        barcodeScanned = false;
                        scanText.setText("Scanning...");*/
                        mCamera.setPreviewCallback(previewCb);
                        mCamera.startPreview();
                        previewing = true;
                        mCamera.autoFocus(autoFocusCB);/*
                    }
                }
            });*/
    }

    public void onPause() {
        super.onPause();
        releaseCamera();
    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera c = null;
        try {
            c = Camera.open();
        } catch (Exception e){
        }
        return c;
    }

    private void releaseCamera() {
        if (mCamera != null) {
            previewing = false;
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    }

    private Runnable doAutoFocus = new Runnable() {
            public void run() {
                if (previewing)
                    mCamera.autoFocus(autoFocusCB);
            }
        };

    PreviewCallback previewCb = new PreviewCallback() {
            public void onPreviewFrame(byte[] data, Camera camera) {
                Camera.Parameters parameters = camera.getParameters();
                Size size = parameters.getPreviewSize();

                Image barcode = new Image(size.width, size.height, "Y800");
                barcode.setData(data);

                int result = scanner.scanImage(barcode);

                if (result != 0) {
                    previewing = false;
                    mCamera.setPreviewCallback(null);
                    mCamera.stopPreview();
                    SymbolSet syms = scanner.getResults();
                    String resultStr="";
                    for (Symbol sym : syms) {
                        resultStr += sym.getData();
                        barcodeScanned = true;
                    }
                    scanText.setText("Done");
                    Intent intent=new Intent();
                    intent.putExtra("Text",resultStr);
                    setResult(1, intent);
                    finish();
                }
            }
        };

    // Mimic continuous auto-focusing
    AutoFocusCallback autoFocusCB = new AutoFocusCallback() {
            public void onAutoFocus(boolean success, Camera camera) {
                autoFocusHandler.postDelayed(doAutoFocus, 1000);
            }
        };

    public void CancelScan(View view){
        barcodeScanned = false;
        /*Intent in = new Intent();
        setResult(-1,in);*/
        finish();
    }

} 
```

本次活动布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <FrameLayout
    android:id="@+id/cameraPreview"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
  />

  <TextView
      android:id="@+id/scanText"
      android:layout_width="106dp"
      android:layout_height="wrap_content"
      android:text="@string/scanning" />

  <Button
      android:id="@+id/button1"
      style="?android:attr/buttonStyleSmall"
      android:layout_width="144dp"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:text="@string/Cancel"
      android:onClick="CancelScan" />

</LinearLayout> 
```

我的申请清单如下：

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="tariq.buynow3.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="tariq.buynow3.CameraTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>
        <activity
            android:name="tariq.buynow3.BuyingActivity"
            android:label="@string/title_activity_buying" >
        </activity>
    </application>

</manifest> 
```

这与[此](https://stackoverflow.com/questions/13728594/unable-to-start-activity-componentinfo)有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:12:04.033

`mCamera.setPreviewCallback(previewCb);`这是第 76 行，由于`mCamera`is导致异常`null`，请确保正确初始化`mCamera`变量，因为该方法`getCameraInstance()`可能会返回，因此您必须在进一步执行之前像使用或检查`null`一样相应地处理它。`try catch``null`

实际的问题`Camera.open()`是返回 null，

看看这些帖子

1.  [Camera.open() 返回 null](https://stackoverflow.com/q/12054022/593709)
2.  [Camera.open() 返回 NULL Android 开发](https://stackoverflow.com/q/12586736/593709)

# c# - 我应该为此 UI 使用什么控件？

> ID：14037442
> 
> 赞同：2
> 
> 时间：2012-12-26T07:33:41.887
> 
> 标签：c#, wpf, wpf-controls

我对 WPF 比较陌生，所以任何人都可以给我一些关于如何构建这个 UI 的指导（它是 Windows 上 Paint 的主面板） ![在此处输入图像描述](../Images/a4fb42de667d7e4eebad96eb41c15df9.png)

我更喜欢代码风格而不是 XAML（只是为了学习目的），所以关于应该使用哪些控件的一般概念就足够了，我可以处理每个元素的细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:41:45.493

有在线模板。我认为您正在搜索[**Ribbon Control Template**](http://blogs.msdn.com/b/wpf/archive/2010/08/03/introducing-microsoft-ribbon-for-wpf.aspx)。然后，[Codeproject](http://www.codeproject.com/Articles/23199/WPF-C-Ribbon-Control-Library)有一篇很棒的文章。

你也可以查看[这篇](http://msdn.microsoft.com/en-us/library/ff799534.aspx)msdn 文章。

在这些链接中，您有很多示例。

要使用它，您将使用在线模板创建一个新项目，如下图所示（您会看到：它已选择*WPF Ribbon Application*： ![在此处输入图像描述](../Images/faa4d8c57e48a3c039db9481ea647c87.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:37:49.627

那是一个功能区控件。你可以看看这个：我[为 WPF 介绍 Microsoft Ribbon](http://blogs.msdn.com/b/wpf/archive/2010/08/03/introducing-microsoft-ribbon-for-wpf.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:37:22.877

可能想使用功能区控件？[http://www.microsoft.com/en-us/download/details.aspx?id=11877](http://www.microsoft.com/en-us/download/details.aspx?id=11877)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T08:54:41.747

当我想到同样的问题时，我对所有功能区控件进行了分析并收集了它们的链接。

这是他们

[http://fluent.codeplex.com/](http://fluent.codeplex.com/)

[http://wpf.codeplex.com/wikipage?title=WPF%20Ribbon%20Preview&ProjectName=wpf](http://wpf.codeplex.com/wikipage?title=WPF%20Ribbon%20Preview&ProjectName=wpf)

[http://www.microsoft.com/en-us/download/details.aspx?id=11877](http://www.microsoft.com/en-us/download/details.aspx?id=11877)

代码项目链接：

[http://www.codeproject.com/Articles/24062/A-Demonstration-for-WPF-Ribbon-Control-Library](http://www.codeproject.com/Articles/24062/A-Demonstration-for-WPF-Ribbon-Control-Library) http://www.codeproject.com/Articles/23199/WPF-C-Ribbon-Control-Library [http://www.codeproject.com/Articles/23343/A-Graphical-WPF-Ribbon-Control-Builder](http://www.codeproject.com/Articles/23343/A-Graphical-WPF-Ribbon-Control-Builder)

# c# - 类设计质量

> ID：14037448
> 
> 赞同：1
> 
> 时间：2012-12-26T07:34:11.640
> 
> 标签：c#, class

我写的这个类是否足以（我的意思是专业人士的做法）包含在代码/项目中？还是我错过了重要的事情？我不知道如何使用构造函数等，所以我没有使用相同的（我只是 C# 的初学者），但如果需要，请发表评论。

```
using System;
using System.Collections.Generic;
using System.Text;

namespace RandBit
{
    /// <summary>
    /// By: Author
    /// Version 0.0.1
    /// Pseudo-Random 16-Bit (Max) Generator.
    /// </summary>
    public class RandomBit
    {
        /// <param name="input">The Bit-size(int)</param>
        /// <returns>Random Bit of Bit-size(string)</returns>
        public static string Generate(int input)
        {
            int bitSize = 0;
            Random choice = new Random();
            if (input == 0 || input > 16)
            {
                bitSize = 0;
            }
            else if (input == 1)
            {
                bitSize = 1;
            }
            else
            {
                int randomChoice = choice.Next(0, (1 << input));
                bitSize = randomChoice;
            }
            string binary = Convert.ToString(bitSize, 2);
            binary = binary.PadLeft(input, '0');
            return binary;
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:35:30.107

你只能改变一件事，因为你的类只包含一个静态成员，为什么不把类设为静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:37:34.097

看来您使用`Random`不正确。我建议从[Jon Skeet 关于这个主题的文章](http://csharpindepth.com/Articles/Chapter12/Random.aspx)开始。相关报价：

> 如果您启动一个具有相同初始状态（可以通过种子提供）的 Random 实例并对其进行相同的方法调用序列，您将获得相同的结果。
> 
> 那么我们的示例代码出了什么问题呢？我们在循环的每次迭代中都使用了一个新的 Random 实例。Random 的无参数构造函数将当前日期和时间作为种子 - 在内部计时器计算出当前日期和时间已更改之前，您通常可以执行大量代码。因此，我们重复使用相同的种子 - 并重复获得相同的结果。

换句话说，由于`Random`每次调用都会创建一个新实例，因此返回值不会像您期望的那样“随机”的可能性会大大增加。

还值得一提的是，.Net BCL 中已经有[可能更好](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)的 PRNG 类。这是编写类似代码的另一种方式。

```
private static readonly RNGCryptoServiceProvider _crypto = new RNGCryptoServiceProvider();

public static long Generate(){
    // use whatever size you want here; bigger has a better chance of 
    // being unique in a given scope
    byte[] bytes = new byte[8];

    // puts random bytes into the array
    _crypto.GetBytes( bytes );

    // do something (your choice) with the value...
    return BitConverter.ToInt64( bytes, 0 );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:45:07.773

如果我是项目团队负责人，我会要求您删除摘要/作者/版本评论。它们是多余的（源代码控制有该信息），需要一些时间来编写/修改并且模棱两可（在由 7 个作者修改的文件中？）。

这是关于这个主题的讨论，也许不是唯一的：[https ://softwareengineering.stackexchange.com/q/48562/30927](https://softwareengineering.stackexchange.com/q/48562/30927)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:46:02.060

将变量“Choice”移到其用法附近，即在 else 循环中。否则，即使未使用，您也会为随机对象分配不必要的内存。看[这里](https://stackoverflow.com/questions/6133586/should-i-declare-variables-as-close-as-possible-to-the-scope-where-they-will-be)

# perl - 用于 Android Mobile 的 perl 中良好的自动化系统测试框架

> ID：14037450
> 
> 赞同：0
> 
> 时间：2012-12-26T07:34:21.537
> 
> 标签：perl

**操作系统：安卓**

我正在寻找 perl 下的良好端到端测试框架，其中测试可以用 perl 编写并以舒适的方式进行管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:49:12.283

尽管我很喜欢 Perl，但我不建议这样做。

相反，您应该坚持使用原生 Android 测试框架，它是带有少量 Android 扩展的 JUnit。它有很好的文档记录，并且完全支持在使用 Android 检测框架 ( `am instrument ...`) 的设备上运行。

任何其他方式都只是自找麻烦。原因有很多，但最重要的一个可能是 Android 不支持原生运行任何脚本语言（Perl、Python 等）。嗯，有一个[SL4A 框架](http://code.google.com/p/android-scripting/)应该能够运行 Python、Perl、Lua 等，但它仍然是非常 alpha 质量的软件，使用它需要太多的东西才能在没有痛苦的情况下使用。

# php - preg_replace 与模式和主题数组返回空数组

> ID：14037451
> 
> 赞同：4
> 
> 时间：2012-12-26T07:34:24.127
> 
> 标签：php, preg-replace, str-replace, array-difference

我想要一种从 $keywords 中删除 $badwords 元素的简单方法。

我有什么（例如）

```
$keywords = array('sebastian','nous','helene','lol'); //it could be anything in fact
$badwords = array('nous', 'lol', 'ene', 'seba'); //array full of stop words that I won't write here
$filtered_keywords = array_filter(preg_replace($badwords,'',$keywords), 'strlen');
print_r($filtered_keywords); 
```

我所期望的

```
Array ( [0] => samaha [1] => helene ) 
```

我得到了什么

```
 Sweet nothing :) 
```

我尝试使用`str_ireplace`但它变坏了，因为它在我的数组中的字符串中替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:39:25.667

```
$keywords = array('sebastian','nous','helene','lol');

$badwords = array('nous', 'lol', 'ene', 'seba'); 

$filtered_keywords=array_diff($keywords,$badwords); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:39:02.093

采用`array_diff`

```
var_dump(array_diff($keywords, $badwords));
array(2) {
  [0]=>
  string(9) "sebastian"
  [2]=>
  string(6) "helene"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:36:52.280

最有可能的数组名称不正确

```
$filtered_keywords = array_filter(preg_replace($excluded_words,'',$keywords), 'strlen'); 
```

它不是**$excluded_words**，而是**$badwords**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T07:38:52.453

您在之后缺少一个分号

```
$keywords = array('sebastian','nous','helene','lol') 
```

[你可以使用`array_diff`：](http://ideone.com/xCIbhw)

```
$filtered_keywords = array_diff($keywords, $badwords); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T07:41:30.460

您错过了`/`$badwords 中的斜线。你错过了`;`第一行末尾的分号。试试这个代码：

```
<?php

$keywords = array('sebastian','nous','helene','lol'); //it could be anything in fact
$badwords = array('/nous/', '/lol/', '/ene/', '/seba/'); //array full of stop words that I won't write here

$filtered_keywords = array_filter(preg_replace($badwords,'',$keywords), 'strlen');

echo print_r($filtered_keywords);

?> 
```

# android - 科尔多瓦：android 4.1 中的 facebook 登录错误“为 facebook 登录配置错误”

> ID：14037454
> 
> 赞同：0
> 
> 时间：2012-12-26T07:34:58.950
> 
> 标签：android, facebook, cordova

当我在我测试 l'app 的设备上运行我的带有 fb 的 android phonegap 应用程序时遇到问题，当我想登录时出现错误：“为 facebook 登录配置错误......”我的问题出现在 app facebook安装在 android 4.1 中；未安装应用程序 facebook 时，一切正常。但是当我在 android 2.3.6 中运行我的应用程序时，即使安装了 facebook 应用程序，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T01:25:17.193

如果您在 App Dashboard 设置中输入的密钥哈希与您拥有的签名不匹配，这是一个常见问题。这仅在针对 Facebook for Android 应用程序进行身份验证时才会显示。

去看看故障排除部分：[https ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#troubleshooting](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#troubleshooting)

它讨论了如何处理这个问题。

# android - Innetrnet 连接检查线程 Android

> ID：14037455
> 
> 赞同：1
> 
> 时间：2012-12-26T07:35:00.900
> 
> 标签：android, multithreading, internet-connection

在我的主要活动中，有一个互联网状态 TextView 。在那个 TextView 中，我想显示是否启用了互联网连接。我必须每 10 秒刷新一次状态。

我知道我必须在单独的线程中执行此操作，但我尝试了很多。我没有得到完美的解决方案。

```
public class MainActivity extends Activity {
ImageView imageView;
TextView internetStausTextView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    internetStausTextView = (TextView) findViewById(R.id.tv1);

    new InternetChecker();
}

public class InternetChecker implements Runnable {
    Thread t;
    boolean internetStatus;
    ConnectivityManager conMgr;

    public InternetChecker() {
        t = new Thread(this);
        t.start();
        conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    }

    public void run() {
        while (true) {

            if (conMgr.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED
                    || conMgr.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING) {
                internetStatus = true;

            } else if (conMgr.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED
                    || conMgr.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
                internetStatus = false;

            }
            runOnUiThread(new Runnable() {
                public void run() {
                    if (internetStatus)
                        internetStausTextView.setText("connected");
                    else
                        internetStausTextView.setText("Not connected.");
                }
            });

            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {

            }
        }
    }
} 
```

}

这是我的代码....但它正在影响应用程序的性能。

任何人都可以帮我将子类 InternetChecker 取出到一个单独的文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:49:32.400

试试这个 ：

**编辑：**

首先创建一个`Handler`运行`Thread`标志：

```
Handler mHandler = new Handler();
boolean isRunning = true; 
```

然后，从你的 onCreate() 方法中使用这个线程：

```
new Thread(new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                while (isRunning) {
                    try {
                        Thread.sleep(10000);
                        mHandler.post(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
                                // Write your code here to update the UI.
                                displayData();
                            }
                        });
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            }
        }).start(); 
```

然后，声明处理程序每​​ 10 秒调用一次的此方法：

```
private void displayData() {
        ConnectivityManager cn=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo nf=cn.getActiveNetworkInfo();
        if(nf != null && nf.isConnected()==true )
        {
            Toast.makeText(this, "Network Available", Toast.LENGTH_SHORT).show();
            myTextView.setText("Network Available");
        }
        else
        {
            Toast.makeText(this, "Network Not Available", Toast.LENGTH_SHORT).show();
            myTextView.setText("Network Not Available");
        }       
    } 
```

**要停止线程调用这个：**

```
isRunning = false; 
```

就是这样。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:45:52.800

***不要使用服务。***

*用户 TimerTask 和 Timer 定期检查和更新互联网连接。* [从 Timer 更新 UI](http://jayxie.com/mirrors/android-sdk/resources/articles/timed-ui-updates.html)是满足您需求的最佳示例。

***快乐编码:)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T08:00:00.573

首先，您需要创建一个 Timer 任务来检查网络连接

```
 _tv = (TextView) findViewById( R.id.TextViewTime );

    UpdateNetworkInfo();
  Timer _t = new Timer();
  String conn;
        _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                ConnectivityManager cn=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo nf=cn.getActiveNetworkInfo();
    if(nf != null && nf.isConnected()==true )
    {
        conn = " Avaialable";
    }
    else
    {
        conn = " Not Available";
    }   
            }
        }, 1000, 1000 ); 
```

然后在 UI 线程中更新网络信息。

```
protected void UpdateNetworkInfo() 
{
     runOnUiThread(new Runnable() 
     {
    public void run() 
    {
            _tv.setText( "Network" + conn );
        }
     });
} 
```

不要忘记为清单文件添加适当的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:49:37.447

```
public boolean isNetworkAvailable(){
     ConnectivityManager cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
     NetworkInfo networkInfo = cm.getActiveNetworkInfo();
     if(networkInfo != null && networkInfo.isConnected()){
         Toast.makeText(this, "Network is available", Toast.LENGTH_LONG).show();
     } else {
         Toast.makeText(this, "Network is not available", Toast.LENGTH_LONG).show();
     }
    return true;
 } 
```

# blackberry - 生成条码 EAN13 blackberry os 7

> ID：14037460
> 
> 赞同：0
> 
> 时间：2012-12-26T07:35:22.500
> 
> 标签：blackberry, barcode

我在黑莓操作系统 7 上生成 EAN 13 条码时遇到了一些问题我实际上已经创建了一些代码来生成 EAN 13 并且它在模拟器 9800 os 6 上工作正常但是当我在模拟器 9900 dakota os 7 上时，条码全黑了有人可以请帮我解决我的问题

这是我的代码

```
public void ean13writer(String ang){
    try {
        EAN13Writer ean13 = new EAN13Writer();
        ByteMatrix barcode = ean13.encode( ang , BarcodeFormat.EAN_13 , width , height );
        System.out.println("barcode : "+barcode);

        jajal= ByteMatrix2Bitmap(barcode);
        VerticalFieldManager cardcodemanager = new VerticalFieldManager(){

        };
        Bitmap borderBitmap = Bitmap.getBitmapResource("rounded-border.png");
        BitmapField cardcode = new BitmapField(jajal);

        cardcodemanager.add(cardcode);
        cardcodemanager.setMargin(2, 40, 2, 40);
        cardcodemanager.setPadding(2, 10, 2, 10);
        cardcodemanager.setBorder(
                BorderFactory.createBitmapBorder(
                        new XYEdges(12,12,12,12), borderBitmap
                    )
                );

        cardScreen.add(cardcodemanager);
    }catch (Exception e) {
        //add( new RichTextField( "gagal coy : " + e ) );
        String a = String.valueOf(e).toString();
        Dialog.alert(a);
    }
}
private static Bitmap ByteMatrix2Bitmap(ByteMatrix matrix){
    int width = matrix.getWidth(); 
    int height = matrix.getHeight();
        //matrix is a 0-1 matrix
        byte[][] array = matrix.getArray(); 
        int[] imgdata = new int[width*height];
        Bitmap bitmap  = new Bitmap(width, height); 

        //System.out.println("hasil array byte [] [] ="+matrix.getArray());

        for (int y = 0; y < height; y++) { 
            for (int x = 0; x< width; x++){
                if (array[y][x] == 0){
                        imgdata[y * width + x] = Bitmap.TRUE_WHITE;
                        //System.out.println("KALO 0 = "+imgdata[y * width + x]);
                }else{
                        imgdata[y * width + x] = Bitmap.TRUE_BLACK;
                        //System.out.println("KALO BUKAN = "+imgdata[y * width + x]);
                }
            }
        }
        bitmap.setARGB(imgdata, 0, width, 0, 0, width, height);
        Bitmap retmap = new Bitmap(2*width ,10*height );
        bitmap.scaleInto(retmap, Bitmap.FILTER_BILINEAR, Bitmap.SCALE_TO_FIT);  

        return retmap;  
} 
```

最好的问候阿迪亚·埃卡·普特拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:57:45.163

我已经解决了这个问题:)，问题是 Bitmap.TRUE_WHITE 在 os 7 上不起作用所以我用 (0xFFFFFF) 替换它也许它可以帮助以后的人

# mysql - 两个内连接查询不运行？

> ID：14037463
> 
> 赞同：0
> 
> 时间：2012-12-26T07:35:33.817
> 
> 标签：mysql, inner-join

我想在两个表中使用内部。
我的桌子是`users`和`relations`（`users`再次）。我想加入`relations`on`users`并`sender_id`再次加入`reveiver_id`。
我的示例代码是：

```
select * from 
(relations inner join users on relations.sender_id = users.userid) 
inner join users on relations.reciever_id = users.userid 
```

但是这段代码没有运行。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:40:31.013

如果你想使用子查询，那么你可以使用这个查询 -

```
SELECT * FROM 
  (SELECT * FROM `relations`
   INNER JOIN `users`
     ON `relations`.`sender_id` = `users`.`userid`) t
INNER JOIN `users`
  ON t.`reciever_id` = `users`.`userid` 
```

但它与 -

```
SELECT * FROM `relations`
INNER JOIN `users`
  ON `relations`.`sender_id` = `users`.`userid`
INNER JOIN `users`
  ON `relations`.`reciever_id` = `users`.`userid` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:40:51.193

```
SELECT * 
FROM `relations` AS r INNER JOIN 
`users` AS u1 on r.`sender_id` = u1.`userid` INNER JOIN 
`users` AS u2 on r.`reciever_id` = u2.`userid` 
```

# c# - 无法完成该操作，因为该文件已在 IIS 工作进程中打开

> ID：14037466
> 
> 赞同：0
> 
> 时间：2012-12-26T07:35:47.987
> 
> 标签：c#, asp.net, .net, c#-4.0, file-upload

我正在为用户上传图像并将其保存在指定位置。该代码在正常情况下工作正常，即用户选择图像并保存它，它可以工作。

当**用户选择图像**（可能由于错误而导致错误图像）**并且不保存它，但再次选择新图像然后保存它时，会发生挑战。** 这种情况给了我错误：

**“该进程无法访问该文件，因为它正被另一个进程使用。”**

当我尝试在出错时从该位置删除图像时，无法删除文件并显示以下消息：

**“操作无法完成，因为文件在 IIS 工作进程中打开关闭文件并重试。”**

代码是这样的：

```
 try
            {
                if (!Directory.Exists(folder))
                    Directory.CreateDirectory(folder);

                msf = new MemoryStream();
                bytes=FileUpload1.FileBytes;
                msf.Write(bytes, 0, bytes.Length);

                using (FileStream stream = new FileStream(folder + "/" + filename, FileMode.Create, FileAccess.ReadWrite, FileShare.ReadWrite))
                {
                    //converting any graphic file type to jpeg format
                    Image img = Image.FromStream(msf);
                    img.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);

                    msf.WriteTo(stream);
                    IsuploadSuccess = true;
                    img.Dispose();
                }
            }
            catch
            {
                IsuploadSuccess = false;
            }
            finally
            {
                if (msf != null)
                {
                    msf.Close();
                    msf.Dispose();
                }
            } 
```

我尝试在文件流中添加**“FileAccess.ReadWrite”**和**“FileShare.ReadWrite”**，但也不适用于文件流中的所有选项。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:35:51.103

我最终没有解决问题，而是改变了方法来摆脱挑战的根源。我使用 UserID（唯一）更改文件名，并附加 CurrentDateTime 转换为字符串并将其存储到临时文件夹，直到用户保存更改。每次挑战场景都会形成一个不同的文件。将每个文件保存在用户创建的临时文件夹（前面是唯一的用户 ID）中后，将删除最后的更改并保存到相应的目录。

# android - 如何防止一个片段被多次添加？

> ID：14037479
> 
> 赞同：9
> 
> 时间：2012-12-26T07:37:12.023
> 
> 标签：android, android-fragments, android-ui, android-button

当点击按钮等 UI 元素时，通常会将 Fragment 添加到布局中。如果用户非常快速地多次点击按钮，则可能会多次添加 Fragment，从而导致各种问题。

如何防止这种情况？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T07:37:12.023

我创建了一个辅助方法，确保仅在片段尚不存在时才添加片段：

```
public static void addFragmentOnlyOnce(FragmentManager fragmentManager, Fragment fragment, String tag) {
    // Make sure the current transaction finishes first
    fragmentManager.executePendingTransactions();

    // If there is no fragment yet with this tag...
    if (fragmentManager.findFragmentByTag(tag) == null) {
        // Add it
        FragmentTransaction transaction = fragmentManager.beginTransaction();
        transaction.add(fragment, tag);
        transaction.commit();
    }
} 
```

来自 Activity 或另一个 Fragment 的简单调用：

```
addFragmentOnlyOnce(getFragmentManager(), myFragment, "myTag"); 
```

这适用于 android.app.* 和 android.support.app.* 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-04T08:51:21.937

这是我的解决方案，我尝试通过点击按钮多次快速单击显示对话框片段。

```
 FragmentManager fm = getSupportFragmentManager();
            Fragment oldFragment = fm.findFragmentByTag("wait_modal");

            if(oldFragment != null && oldFragment.isAdded())
                return;

            if(oldFragment == null && !please_wait_modal.isAdded() && !please_wait_modal.isVisible()){
                fm.executePendingTransactions();
                please_wait_modal.show(fm,"wait_modal");
            } 
```

# c# - 多次插入和更新导致死锁 c#

> ID：14037489
> 
> 赞同：0
> 
> 时间：2012-12-26T07:37:39.967
> 
> 标签：c#, sql, entity-framework, deadlock

我的应用程序有两个部分，它们分别进行大量插入和更新，并且由于管理不善，存在死锁。

我正在使用实体框架进行插入和更新。

以下是我的 TestSpool 程序的代码。该程序的目的是在给定的时间间隔内插入 x 条记录。

```
using System;
using System.Linq;
using System.Threading;
using System.Transactions;
namespace TestSpool
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var db = new TestEntities())
            {
                decimal start = 700001;
                while (true)
                {
                    using (TransactionScope scope = new TransactionScope())
                    {
                        //Random ir = new Random();
                        //int i = ir.Next(1, 50);
                        var objs = db.BidItems.Where(m => m.BidItem_Close == false);
                        foreach (BidItem bi in objs)
                        {
                            for (int j = 0; j <= 10; j++)
                            {
                                Transaction t = new Transaction();
                                t.Item_Id = bi.BidItemId;
                                t.User_Id = "Ghost";
                                t.Trans_Price = start;
                                t.Trans_TimeStamp = DateTime.Now;
                                start += 10;
                                db.Transactions.AddObject(t);

                            }
                            Console.WriteLine("Test Spooled for item " + bi.BidItemId.ToString() + " of " + 11 + " bids");
                            db.SaveChanges();
                        }

                        scope.Complete();
                        Thread.Sleep(5000);
                    }
                }
            }
        }
    }
} 
```

程序的第二部分是testserverclass，该serverclass应该处理来自testspool的大量事务，并确定事务的最大数量并更新到另一个表。

```
using System;
using System.Linq;
using System.Transactions;
public class TestServerClass
{

    public void Start()
    {
        try
        {

            using (var db = new TestServer.TestEntities())
            {

                while (true)
                {
                    using (TransactionScope scope = new TransactionScope())
                    {
                        var objsItems = db.BidItems.Where(m => m.BidItem_Close == false);
                        foreach (TestServer.BidItem bi in objsItems)
                        {
                            var trans = db.Transactions.Where(m => m.Trans_Proceesed == null && m.Item_Id == bi.BidItemId).OrderBy(m => m.Trans_TimeStamp).Take(100);

                            if (trans.Count() > 0)
                            {
                                var tran = trans.OrderByDescending(m => m.Trans_Price).FirstOrDefault();

                                // TestServer.BidItem bi = db.BidItems.FirstOrDefault(m => m.BidItemId == itemid);
                                if (bi != null)
                                {
                                    bi.BidMinBid_LastBid_TimeStamp = tran.Trans_TimeStamp;
                                    bi.BidMinBid_LastBidAmount = tran.Trans_Price;
                                    bi.BidMinBid_LastBidBy = tran.User_Id;

                                }
                                foreach (var t in trans)
                                {
                                    t.Trans_Proceesed = "1";
                                    db.Transactions.ApplyCurrentValues(t);
                                }

                                db.BidItems.ApplyCurrentValues(bi);
                                Console.WriteLine("Processed " + trans.Count() + " bids for Item " + bi.BidItemId);
                                db.SaveChanges();

                            }

                        }
                        scope.Complete();

                    }

                }

            }

        }
        catch (Exception e)
        {
            Start();
        }
    }

} 
```

但是，由于两个应用程序同时运行，它会从第一个测试或服务器应用程序随机快速进入死锁。我如何优化双方的代码以防止死锁？我期待来自测试池应用程序的大量插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:05:06.173

由于它们处理相同的数据并相互获取，我相信最干净的方法是避免同时执行这两个。

可能在数据库上定义一个全局静态变量、互斥体或某种标志。开始执行的人举起旗帜，其他人等待旗帜下降。当标志下降时，另一个升起标志并开始执行。

为避免每个班级的等待时间过长，您可以更改两个班级以每轮仅处理有限数量的记录。您还应该为标志引入最大等待时间。应仔细选择最大记录限制，以确保每个类在比最大等待时间更短的时间内完成其工作。

# c# - 在 aspx 页面中查找文字

> ID：14037501
> 
> 赞同：0
> 
> 时间：2012-12-26T07:39:26.557
> 
> 标签：c#, asp.net

我的网页上有 42 个文字及其 ID，例如 ltr1、ltr2、...、ltr41、ltr42。我想在 for 循环中更改它们的文本属性。

这是html代码：

```
<table class="calendar">
    <tr>
        <td>
            <div class="day">
                <asp:Literal ID="day1" runat="server">
                </asp:Literal></div>
        </td>
    </tr>
 </table> 
```

C＃

```
for(int i=1;i<43;i++)
{
    ("ltr"+i).Text="something"; //I don't know which method I must use, so wrote like this
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:40:54.853

您可以使用加载集合中的所有文字，`OfType`稍后您可以修改它们的文本属性。

```
var literals = this.Page.Controls.OfType<Literal>();
foreach (Literal literal in literals)
{
    literal.Text = "Your Text";
} 
```

**编辑：**

由于您在页面上的另一个控件中拥有控件，因此您需要对控件进行嵌套搜索。您可以尝试以下扩展方法。[取自这篇文章](https://stackoverflow.com/a/3613678/961113)。

首先为扩展方法创建一个类：

```
public static class ExtensionMethod
{
    public static IEnumerable<Control> FindAll(this ControlCollection collection)
    {
        foreach (Control item in collection)
        {
            yield return item;

            if (item.HasControls())
            {
                foreach (var subItem in item.Controls.FindAll())
                {
                    yield return subItem;
                }
            }
        }
    }

    public static IEnumerable<T> FindAll<T>(this ControlCollection collection) where T : Control
    {
        return collection.FindAll().OfType<T>();
    }
} 
```

稍后您可以像这样使用它：

```
protected void Button1_Click(object sender, EventArgs e) 
{
    var literals = this.Controls.FindAll<Literal>();
    foreach (Literal literal in literals)
    {
        literal.Text = "Your Text";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:58:02.987

Page.FindControl() 方法怎么样？

```
for(int i=1;i<43;i++)
{
    Literal li = (Literal)Page.FindControl("ltr"+i);
    li.Text="something";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:35:29.537

当您使用母版页时，您的控件没有直接来自 Page.FindControl() 方法。所以你需要深入 1 级才能从 asp:ContentPlaceHolder id 中找到控件。

**母版页：**

```
<asp:ContentPlaceHolder ID="cphContent" runat="server" /> 
```

**页面：**

```
<asp:Content ID="Content2" ContentPlaceHolderID="cphContent" runat="server">
    <asp:Literal ID="day1" runat="server"></asp:Literal>
</asp:Content> 
```

**aspx 页面.cs：**

```
var literals = Page.Master.FindControl("cphContent").Controls.OfType<Literal>();
foreach (Literal literal in literals)
{
     literal.Text = "Your Text";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:17:54.913

您需要对页面上的控件进行递归查找。默认情况下，性能 .net 不要这样做。

[在此处](http://ardalis.com/recursive-findcontrol)阅读有关递归 FindControl的更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T10:00:57.847

你可以这样做，像这样在顶层包装 a ：

```
 <div id="Content" runat="Server">

    <table border="0" cellspacing="0" cellpadding="0" width="100%">
        <tr>
            <td><asp:Literal ID="Literal1" runat="server"></asp:Literal></td>
            <td><asp:Literal ID="Literal2" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal3" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal4" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal5" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal6" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal7" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal8" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal9" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal10" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal11" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal12" runat="server"></asp:Literal></td>
<td><asp:Literal ID="Literal13" runat="server"></asp:Literal></td>

        </tr>
    </table>

    </div> 
```

你可以这样编码：

```
 for (int i = 1; i < 10; i++)
        {
            Literal li = (Literal)Content.FindControl("Literal"+i);
        } 
```

# android - Activity 的背景图片

> ID：14037503
> 
> 赞同：1
> 
> 时间：2012-12-26T07:39:37.010
> 
> 标签：android, eclipse, android-layout, android-emulator, android-2.2-froyo

如何**包含图像作为背景**以及在应用程序中放置图像的位置和方式，我正在使用 Eclipse 和所有开发工具。

***到目前为止***，这是我在 main_activity.xml 中所做的：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:background="#C0C0C0"
       tools:context=".MainActivity">
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T07:43:41.707

将您的图像放在 res/drawable 目录中

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/your_imagename"
tools:context=".MainActivity" >

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:45:02.663

只需搜索，您就会得到它。

只需将您的图像放入`res/drawable`文件夹并更改

```
android:background="#C0C0C0" 
```

至

```
android:background="@drawable/your_image_name" (dont give extension of image) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:46:46.970

将 .jpg 或 .png 图像放在 res/drawable 文件夹中，并将背景属性更改为：

```
android:background="@drawable/image-name" 
```

`image-name`图像的实际名称在哪里。

如您所见，有几个可绘制文件夹，如 drawable-mdpi 或 drawable-hdpi。它们旨在为具有不同屏幕密度的设备存储图像。为确保您的应用程序在不同设备上看起来不错，请为每种密度提供替代图像。该`@drawable/image-name`属性不需要更改，Android 将为您选择正确的可绘制文件夹。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T07:49:35.527

您只能使用`.jpg`和`.png`格式化图像。之后，复制您的图像并将其粘贴到`res`应用程序的文件夹中。如果您的图像名称是`image.png`

使用此代码..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/image"
tools:context=".MainActivity" >

</RelativeLayout> 
```

# asp.net - MVC.Net 中的缓存

> ID：14037504
> 
> 赞同：0
> 
> 时间：2012-12-26T07:39:58.460
> 
> 标签：asp.net, asp.net-mvc

我面临一个问题，从网站注销后，我可以使用浏览器后退按钮查看所有页面，我的理解是如果我在注销时清除所有缓存，那么我可以阻止它，但我担心的是，如果我删除所有的缓存那么我的网站性能会变差吗？

也可以只为特定页面制作 nocache 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:48:02.160

是的，您可以`OutputCache`在返回视图的控制器操作上使用该属性。例如，要防止在视图上缓存，请使用以下命令：

```
[OutputCache(NoStore = true, Duration=1)] 
```

性能会受到影响，因为你告诉浏览器不要缓存，这样它就会向你的网站发出另一个请求。但这不一定会产生*重大*影响，因为您只会将它们重定向到我期望的“会话过期”页面。

# iphone - 适用于 iOS 的 FacebookSDK，Facebook 登录无法返回我的 iOS 应用

> ID：14037507
> 
> 赞同：0
> 
> 时间：2012-12-26T07:40:23.000
> 
> 标签：iphone, objective-c, ios, facebook

我正在尝试将 Facebook sdk 与我的 iOS 应用程序一起使用，

1.  我正在使用带有 SDK v6.0 的 xcode 4.5.2
2.  我的设备是 iPod touch v6.0.1
3.  我有一个配置文件集
4.  我已订阅为 facebook 开发人员并注册了一个 facebook 应用程序，包括
    *   '捆绑 ID'
    *   '启用'Facebook登录'。
    *   ...
5.  我已经在“URL 类型”->“项目 0”->“URL Scemes”->“项目 0”下的 plist 文件中设置了 facebook AppId。

使用物理设备时，我的应用程序正在切换到 facebook 登录页面，但是，登录后，它**并没有回到**我的应用程序！！！
**令人惊讶**的是，当使用模拟器时一切正常，我的应用程序从 facebook 登录页面来回切换。

我可能做错了什么？为什么在物理设备上登录后我无法返回我的应用程序，而在使用模拟器时我可以？这可能与配置文件有某种关系吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:42:56.620

在年初，我遇到了同样的问题，我正在用`HACKBOOK`示例进行测试，并且与您的问题相同。我可以在模拟器中运行良好，但是当我在设备中进行测试时，我遇到了同样的问题，然后我就放了下面的代码并且工作得很好。

只是你只需要在你的应用程序委托中添加这个方法：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [self.facebook handleOpenURL:url];
} 
```

此方法适用于使用 fbApp 或 safari 登录。从 facebook 登录页面重定向回我们的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:45:42.023

转到 SDK 中的 facebook.m 类，找到此方法：

```
- (void)authorize:(NSArray *)permissions
         delegate:(id<FBSessionDelegate>)delegate 
```

然后替换你的最后一行：`[self authorizeWithFBAppAuth:YES safariAuth:YES];`

用这一行：`[self authorizeWithFBAppAuth:YES safariAuth:NO;`&检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T12:20:25.680

问题是基类正在实现 'applicationDidBecomeActive' 和 'applicationWillTerminate' （其中 '[FBSession.activeSession handleDidBecomeActive]' 和 '[self.session close]' 被相应地调用），而继承类实现了相同的方法 w/o调用基 [super] 类实现。

# ruby-on-rails - 如何将动态 SEF URL 添加到 Rails 3.1？

> ID：14037509
> 
> 赞同：0
> 
> 时间：2012-12-26T07:40:33.167
> 
> 标签：ruby-on-rails

我试图弄清楚如何将动态 SEF URL 添加到我一直在研究的 rails 3.1 项目中。我无法通过谷歌找到很多东西。

任何指导或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:56:16.800

有几种方法可以做到这一点。但是你可以简单地使用 gem 来达到这个目的[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)，Ryan Bates 有一个关于它的演员[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)。

# bash - 在 bash 脚本中正确转义 Json 命令行选项

> ID：14037514
> 
> 赞同：4
> 
> 时间：2012-12-26T07:41:09.270
> 
> 标签：bash

我有接受 JSON 作为参数的实用程序。如何正确转义 json 以传递给实用程序？例子：

```
ip="127.0.0.1"
action='{\"server_ip\":\"$ip\",\"action\":\"stop\"}'
./fix-utility -e $action 
```

但是 JSON 没有正确转义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T07:56:52.360

如果你想`$ip`在字符串中插入 eg，你需要使用双引号。值中的双引号需要反斜杠转义。

```
ip="127.0.0.1"
action="{\"server_ip\":\"$ip\",\"action\":\"stop\"}"
./fix-utility -e "$action" 
```

实际上，我建议不要将操作存储在变量中，除非您的示例省略了一些必要的关键内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:45:11.017

bash 解释器认为双引号和单引号不同：虽然双引号让 bash 扩展包含的变量，但单引号不会。尝试简单：

```
echo "$BASH_VERSION"
4.1.5(1)-release
echo '$BASH_VERSION'
$BASH_VERSION 
```

总之，有一个很好的可重用 bash 方式：

```
declare -A jsonVar
toJsonString() {
    local string='{'
    for var in ${!jsonVar[*]} ;do
        string+="\"$var\":\"${jsonVar[$var]}\","
      done
    echo ${string%,}"}"
}

jsonVar[action]=stop
jsonVar[server_ip]=127.0.1.2

toJsonString
{"action":"stop","server_ip":"127.0.1.2"} 
```

最后：

```
./fix-utility -e "$(toJsonString)" 
```

`"`如果像双引号这样的特殊字符必须是某些字符串的一部分，则可以改进这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-15T14:42:26.707

用更新的工具更新这个老问题。这个解决方案依赖于 python，`jq`因为它是处理 JSON 文件和字符串的好工具。

使用本机 bash 字符串连接，无需手动转义任何内容并依赖于`jq`执行所有转义。

```
# let's say I have need to include a variable within a string containing characters to escape
> my_string='a'"b"'c'
> echo -e "$my_string"
abc

> my_string='!(){'"$variable"'}[]'
> echo -e "$my_string"
!(){my_value_here}[]

# in effect, I'm concatenating these 3 strings together:
'!(){'
"$variable"
'}[]' 
```

单引号防止 bash 解释，双引号允许 bash 解释变量。

现在，为了逃避，我建议使用 python 的`jq`程序 ( `pip install jq`)。

```
> ip="127.0.0.1"
> action='{"action":"stop","server_ip":"'"$ip"'"}'
> echo -e "${action}" | jq -cM '. | @text '
"'{\"action\":\"stop\",\"server_ip\":\"127.0.0.1\"}'" 
```

对于上下文，以下是我正在使用的 bash 和 jq 版本：

```
> bash --version
GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin18)
Copyright (C) 2007 Free Software Foundation, Inc.
> jq --version
jq-1.6 
```

# csv - 使用漂亮的汤将抓取的数据更新到现有的 csv 的问题

> ID：14037518
> 
> 赞同：1
> 
> 时间：2012-12-26T07:41:48.150
> 
> 标签：csv, python-2.7, screen-scraping, beautifulsoup

我想将网页中的抓取数据更新为已经存在的 csv，这是我第一次运行抓取代码时生成的。我希望将新数据附加到已抓取的行下方。

下面是我用来抓取数据和写入 csv 的代码：

```
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from itertools import islice
page = urllib2.urlopen('http://shop.ee.co.uk/mobile-phones/pay-monthly/').read()
soup = BeautifulSoup(page)
soup.prettify()
with open('EE_AppendTesting.csv', 'a') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')
    #spamwriter.writerow(["Date","Month","Day of Week","Device Name","Price","Plan Monthly Price"])    
    items = soup.findAll('h2', {"class":"heading2 no-margin-top"})
    prices = soup.findAll('span', {"class": "price"})
    monthly = soup.findAll('div',{"class":"mrc-holder"})
    for item, price, monthly1 in zip(items, prices, monthly):
        textcontent = u' '.join(islice(monthly1.stripped_strings, 2, 3, 1))
        if textcontent:
            spamwriter.writerow([time.strftime("%Y-%m-%d"),time.strftime("%B"),time.strftime("%A") ,unicode(item.string).encode('utf8').strip(),unicode(price.string).encode('utf8').replace('Â£','£').strip(),unicode(textcontent).encode('utf8').replace('Â£','£').strip()]) 
```

现在，每次我运行代码时，新数据都会在每个数据条目之间附加**空行。**以下是附加 csv 的示例：

```
26-12-2012  December    Wednesday   Nokia Lumia 920 White   £ 19.99 £46.00
26-12-2012  December    Wednesday   iPhone 5 64GB Black £ 139.99    £56.00

26-12-2012  December    Wednesday   Nokia Lumia 820 FREE    £36.00

26-12-2012  December    Wednesday   iPhone 5 16GB White £ 19.99 £56.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:38:05.817

我在代码中使用了“lineterminator='\n'”方法来解决上述问题。更新后的代码如下所示：

```
with open('EE_AppendTesting.csv', 'a') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',',lineterminator='\n') 
```

# ios - What is the limit number of operations currently in NSOperationQueue queue

> ID：14037523
> 
> 赞同：2
> 
> 时间：2012-12-26T07:42:16.850
> 
> 标签：ios, nsoperation

I cannot find any documents that mention "What is the limit number of operations currently in NSOperationQueue queue?"

Can my queue still work if it has 1000 Facebook-graph-request operations?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:47:05.320

可以添加到队列的操作数量没有 API 强制限制，就像可以添加到 NSArray 的对象数量一样。

任何限制都是设备施加的限制，特别是可用内存。如果您要添加如此多的操作，那么您的内存就会耗尽来保存它们，更不用说执行它们了，那么您就做错了。

# ruby-on-rails - Rails 中的重定向格式错误

> ID：14037524
> 
> 赞同：0
> 
> 时间：2012-12-26T07:42:26.443
> 
> 标签：ruby-on-rails, ruby, redirect

我想`:user_id`在重定向时向我的索引控制器发送一个：

```
format.html { redirect_to @employee_personal, notice: 'Personal was successfully updated.'} 
```

在我的索引控制器中，我必须发送：

```
@user_id = @employee_personal.user_id 
```

多变的。

我怎样才能发送这个？在重定向中我尝试过：

```
format.html { redirect_to @employee_personal(:user_id => @user_id), notice: 'Personal was successfully updated.' } 
```

这是错误的。

```
format.html { redirect_to :action => :index, :user_id => @user_id  } 
```

是正确的。

我怎样才能以这种格式正确地犯那个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:26:42.843

尝试：

```
format.html { redirect_to @employee_personal, user_id: @user_id, notice: 'Personal was successfully updated.'} 
```

此外，您可以使用参数指定路径，如下所示：

```
format.html { redirect_to employee_personal_path(@employee_personal, user_id: @user_id), notice: 'Personal was successfully updated.'} 
```

# mysql - 根据今天的日期获取最后一条记录

> ID：14037527
> 
> 赞同：-1
> 
> 时间：2012-12-26T07:42:51.503
> 
> 标签：mysql

您好，我有一张足球比赛桌，我需要根据今天的日期获取上一场比赛和下一场比赛。

我试图使用这个查询

```
SELECT DATE( match_date ) AS yesterday
FROM matches
WHERE DATE( match_date ) = DATE( DATE_SUB( NOW( ) , INTERVAL 0 DAY ) ) 
GROUP BY yesterday 
```

但记录可以在 2 天或 3 天等之前...

此外，对于`Next Game`如果我使用明天的日期，我将不确定游戏是否存在于第二天或之后。

我使用此查询来获取今天日期之前的所有游戏。

```
 SELECT *
 FROM matches
 WHERE DATE( match_date ) < DATE( DATE_SUB( NOW( ) , INTERVAL 0 DAY ) ) 
```

我需要的是如果今天是`12-26-2012`这样的表格

```
----------------------------------------------
    id         Date         Home        Away
----------------------------------------------
    1       2012-12-26       23          85
    2       2012-12-25       11          23
    3       2012-12-01       23          43
    4       2012-12-29       14          23
    5       2013-01-14       23          192
    6       2013-01-17       23          77

INPUT:  GET THE NEXT GAME FOR TEAM = 23 
OUTPUT: 4

INPUT: GET THE LAST GAME FOR TEAM = 23 
OUTPUT: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:50:46.543

获得最后一场比赛：

```
SELECT DATE( match_date ) AS last_game
FROM matches
WHERE DATE( match_date ) < CURDATE()
ORDER BY match_date DESC
LIMIT 1; 
```

要获得下一场比赛：

```
SELECT DATE( match_date ) AS last_game
FROM matches
WHERE DATE( match_date ) > CURDATE()
ORDER BY match_date ASC
LIMIT 1; 
```

# mysql - MySQL 上的 LIKE 查询有多慢？（自定义字段相关）

> ID：14037533
> 
> 赞同：0
> 
> 时间：2012-12-26T07:43:25.873
> 
> 标签：mysql, custom-fields

抱歉，如果这是多余的，而且可能是这样，我看了看，但在这里找不到与我想知道的问题相符的问题。

基本上我们有一个大约有 50000 行的表，并且预计它会比这大得多。我们需要能够允许管理员用户根据其类别将自定义数据添加到项目中，并且用户可以选择他们想要添加信息的管理员定义的字段。

最初，我使用了 item_categories_fields 表，该表将 item_fields 和 item_categories 中的条目配对，因此管理员可以添加自定义字段并跨类别重复使用它们以保持一致性。item_fields 与 item_field_values 有关系，后者将值与字段联系起来，这就是我们在 .NET 中处理事情的方式。该项目使用的是 CAKEPHP，我们只是边学习边学习，所以有时会有点烦人。

然而，我正在考虑可能只是添加一个 item_custom_fields 表，该表本质上是 item_id 和一个存储 XMLish 格式数据的文本字段。这仅适用于自定义字段的值。

如果我想通过它的 id 获取项目没有问题，因为所需的数据存储在 items 表中，但是如果我想基于自定义字段进行搜索怎么办？会不会

```
SELECT * FROM item_custom_fields 
WHERE custom_data LIKE '%<material>Plastic</material>%' 
```

（抛开用户输入相关的问题）如果我想在这种情况下获取塑料制成的物品，是否可行？就像那会有多慢？

谢谢。

编辑：我担心这一点实际上在启动时该表将有大约 400k 行，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:57:26.363

任何`LIKE`以开头的查询`%`都不会使用列上的任何索引，因此查询将*扫描整个表*以查找结果。

响应时间很大程度上取决于您的机器和桌子的大小，但它绝对不会在任何形状或形式下都有效。

您以前/现有的解决方案（如果索引良好）应该快得多。

# android - Android 无法在未调用 Looper.loop 的内部创建处理程序

> ID：14037538
> 
> 赞同：0
> 
> 时间：2012-12-26T07:43:45.270
> 
> 标签：android, listview, progressdialog

我正在从 facebook 获取朋友列表并在列表视图中填充它工作正常但现在我正在尝试添加进度条直到列表视图填充但出现异常我已经尝试搜索但没有找到我的问题的解决方案，这是我的代码：

```
public class FriendsProgress extends AsyncTask<Object, Void, Boolean>
    {
        @Override
        protected Boolean doInBackground(Object... Params)
        {
            try
            {
                getFriendList();                                                                    
                friendAdapter = new FriendAdapter(Friends.this, R.layout.activity_friends, friendsList);

                Friends.this.runOnUiThread(new Runnable()
                {
                @Override
                public void run()
                {

                    list.setAdapter(friendAdapter);
                    //list.setOnItemClickListener(EditStaff.this);

                }
                });

            }
            catch (Exception e)
            {
                System.out.println("StaffProgess Exception Caught:"+e.getMessage());
            }
            return Boolean.TRUE;
        }

        @Override
        protected void onPreExecute()
        {

            friendsProgress=new ProgressDialog(Friends.this);
            friendsProgress.setProgressStyle(ProgressDialog.STYLE_SPINNER); 
            friendsProgress.setIndeterminate(true);
            friendsProgress.setMessage("Loading...");       
            friendsProgress.setOwnerActivity(Friends.this);
            friendsProgress.show();

        }

        @Override
        protected void onPostExecute(Boolean Result) 
        {
            friendsProgress.dismiss();
            friendAdapter.notifyDataSetChanged();

        }
    } 
```

这里是 getFriendsList 函数实现：

```
public void getFriendList(){

        Request request = Request.newMyFriendsRequest(Session.getActiveSession(), new Request.GraphUserListCallback() {

            @Override
            public void onCompleted(List<GraphUser> users, Response response) {
                // TODO Auto-generated method stub

                for(int i=0; i<users.size();i++)
                {
                GraphUser user =    users.get(i);
                Friend objFriend = new Friend();
                objFriend.setFriendID(user.getId());
                objFriend.setFriendName(user.getName());
                Drawable dd =Friends.LoadImageFromWebOperations("http://graph.facebook.com/" + objFriend.getFriendID() + "/picture");
                objFriend.setFriendPic(dd);
                //objFriend.setFriendPic("http://graph.facebook.com/" + objFriend.getFriendID() + "/picture");
                friendsList.add(objFriend);
                //friendAdapter.notifyDataSetChanged();
                Log.d("Friend's Id", objFriend.getFriendID());
                Log.d("Friend's Name", objFriend.getFriendName());
                //Log.d("Friend's Pic", objFriend.getFriendPic());
                Log.d("Friend's List Count", Integer.toString(friendsList.size()));
                }

        }
    });
    Request.executeBatchAsync(request); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:54:23.803

您不应该实例化 an`Adapter`并将其链接到方法`ListView`内部`doInBackground()`，因为它在工作线程上运行，并且`Views`不允许在工作线程上执行连接到 Android 的任何操作。相反，您可能想要移动此代码

```
friendAdapter = new FriendAdapter(Friends.this, R.layout.activity_friends, friendsList);

            Friends.this.runOnUiThread(new Runnable()
            {
            @Override
            public void run()
            {

                list.setAdapter(friendAdapter);
                //list.setOnItemClickListener(EditStaff.this);

            }
            }); 
```

到`onPostExecute()`方法。这无疑是一个设计更好的解决方案。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:14:17.083

运行 Ui Thread inside`onPostExecute()`方法如下：

```
 runOnUiThread(new Runnable() {

            @Override
            public void run() {                                         
                 friendAdapter = new FriendAdapter(Friends.this, R.layout.activity_friends, friendsList);
                 list.setAdapter(friendAdapter);
                 friendsProgress.dismiss();
                 friendAdapter.notifyDataSetChanged();

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:55:54.473

尝试这个，

```
 ProgressDialog dialog;
    protected void onPreExecute()
    {
        dialog = new ProgressDialog(Friends.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMax(100);
        dialog.show(); 
    } 
```

# python - 将 Python 列表写入 csv 文件

> ID：14037540
> 
> 赞同：216
> 
> 时间：2012-12-26T07:43:47.673
> 
> 标签：python, file, csv, file-io, python-2.7

我有一长串以下形式的列表---

```
a = [[1.2,'abc',3],[1.2,'werew',4],........,[1.4,'qew',2]] 
```

即列表中的值具有不同的类型——浮点数、整数、字符串。如何将其写入 csv 文件，以便我的输出 csv 文件看起来像

```
1.2,abc,3
1.2,werew,4
.
.
.
1.4,qew,2 
```

* * *

## 回答 #1

> 赞同：376
> 
> 时间：2012-12-26T07:46:09.880

Python 的内置[CSV 模块](http://docs.python.org/2/library/csv.html)可以轻松处理这个问题：

```
import csv

with open("output.csv", "wb") as f:
    writer = csv.writer(f)
    writer.writerows(a) 
```

这假设您的列表定义为`a`，因为它在您的问题中。您可以通过各种可选参数调整输出 CSV 的确切格式，`csv.writer()`如上面链接的库参考页面中所述。

**Python 3 的更新**

```
import csv

with open("out.csv", "w", newline="") as f:
    writer = csv.writer(f)
    writer.writerows(a) 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-01-22T19:42:07.240

你可以使用`pandas`：

```
In [1]: import pandas as pd

In [2]: a = [[1.2,'abc',3],[1.2,'werew',4],[1.4,'qew',2]]

In [3]: my_df = pd.DataFrame(a)

In [4]: my_df.to_csv('my_csv.csv', index=False, header=False) 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-12-26T07:48:26.957

```
import csv
with open(file_path, 'a') as outcsv:   
    #configure writer to write standard csv file
    writer = csv.writer(outcsv, delimiter=',', quotechar='|', quoting=csv.QUOTE_MINIMAL, lineterminator='\n')
    writer.writerow(['number', 'text', 'number'])
    for item in list:
        #Write item to outcsv
        writer.writerow([item[0], item[1], item[2]]) 
```

官方文档：[http ://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-28T03:15:03.133

在我非常大的列表中使用 csv.writer 需要很长时间。我决定使用 pandas，它更快更容易控制和理解：

```
 import pandas

 yourlist = [[...],...,[...]]
 pd = pandas.DataFrame(yourlist)
 pd.to_csv("mylist.csv") 
```

好的部分是你可以改变一些东西来制作一个更好的 csv 文件：

```
 yourlist = [[...],...,[...]]
 columns = ["abcd","bcde","cdef"] #a csv with 3 columns
 index = [i[0] for i in yourlist] #first element of every list in yourlist
 not_index_list = [i[1:] for i in yourlist]
 pd = pandas.DataFrame(not_index_list, columns = columns, index = index)

 #Now you have a csv with columns and index:
 pd.to_csv("mylist.csv") 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-03-04T19:44:06.953

如果出于某种原因您想手动执行此操作（不使用`csv`,`pandas`等模块`numpy`）：

```
with open('myfile.csv','w') as f:
    for sublist in mylist:
        for item in sublist:
            f.write(item + ',')
        f.write('\n') 
```

当然，滚动您自己的版本可能容易出错且效率低下……这通常就是为什么有一个模块的原因。但有时自己编写可以帮助您了解它们的工作原理，有时它会更容易。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-07-16T08:29:45.160

如果您不想为此导入`csv`模块，则可以仅使用 Python 内置函数将列表列表写入 csv 文件

```
with open("output.csv", "w") as f:
    for row in a:
        f.write("%s\n" % ','.join(str(col) for col in row)) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-12-20T09:40:02.463

Ambers 的解决方案也适用于 numpy 数组：

```
from pylab import *
import csv

array_=arange(0,10,1)
list_=[array_,array_*2,array_*3]
with open("output.csv", "wb") as f:
    writer = csv.writer(f)
    writer.writerows(list_) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-02-14T00:54:28.180

将列表列表转储到 pickle 并使用[pickle 模块](https://www.quora.com/How-do-you-save-and-restore-lists-in-Python)恢复它怎么样？这很方便。

```
>>> import pickle
>>> 
>>> mylist = [1, 'foo', 'bar', {1, 2, 3}, [ [1,4,2,6], [3,6,0,10]]]
>>> with open('mylist', 'wb') as f:
...     pickle.dump(mylist, f) 

>>> with open('mylist', 'rb') as f:
...      mylist = pickle.load(f)
>>> mylist
[1, 'foo', 'bar', {1, 2, 3}, [[1, 4, 2, 6], [3, 6, 0, 10]]]
>>> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-02T21:03:14.103

确保`lineterinator='\n'`在创建作者时注明；否则，当数据源来自其他 csv 文件时，可能会在每个数据行之后将额外的空行写入文件...

这是我的解决方案：

```
with open('csvfile', 'a') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter='    ',quotechar='|', quoting=csv.QUOTE_MINIMAL, lineterminator='\n')
for i in range(0, len(data)):
    spamwriter.writerow(data[i]) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-20T16:24:08.663

如果将`lll` **列表****列表**导出到.csv，这将在 Python3 中工作**：**

```
import csv
with open("output.csv", "w") as f:
    writer = csv.writer(f)
    for element in lll:
        writer.writerows(element) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-16T19:55:24.777

在 csv.writer 函数中使用**换行符**参数执行示例时，我收到一条错误消息。以下代码对我有用。

```
 with open(strFileName, "w") as f:
    writer = csv.writer(f, delimiter=',',  quoting=csv.QUOTE_MINIMAL)
    writer.writerows(result) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-09T10:57:34.063

在此页面上甚至没有看到一个答案，其中包括如何包含标题以及创建文件。这是一种结合了它的方法。方法适用于 python 3

```
csv_filename = 'abc.csv'
fieldnames = ['Col_1','Col_2','Col_3','Col_4']
with open(csv_filename, mode='w') as csv_file:
    writer = csv.DictWriter(csv_file, fieldnames=fieldnames)
    writer.writeheader()
    for i in my_list:
        writer.writerow({fieldnames[0]: i[0], fieldnames[1]: i[1], fieldnames[2]: i[2],fieldnames[3]: i[3]}) 
```

# ruby-on-rails - 当前控制器路径，未在 rails 中指定操作

> ID：14037552
> 
> 赞同：1
> 
> 时间：2012-12-26T07:45:17.370
> 
> 标签：ruby-on-rails, ruby

我有一个 Rails 应用程序，它有 2 个菜单，其中的菜单会根据用户当前访问的页面而变化。有没有办法告诉 Rails，如果用户正在访问这个控制器，无论访问者是否在 index、edit、create、update、delete 方法上？

我目前正在使用这样的助手，它确实有点乱。

```
def which_page
  current_page?(root_path) || 
  current_page?(skate_movies_path) ||
  current_page?(new_skate_photos_path(@user)) || 
  current_page?(skate_photos_path) || 
  current_page?(skate_tricks_path)
end 
```

在我看来部分

```
 <% if which_page %>    
   <%= default_menu %> #upload, #photos, #trick-tips, #goals
 <% else %>
   <%= skate_menu %> #dashboard, #shared-videos, #profile
 <% end %> 
```

问题是这行得通，但在整个应用程序中，我总是找到一两个页面，它给我一个路由错误。有什么方法可以在不指定任何操作的情况下告诉用户正在使用哪个控制器和操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:01:36.380

`before_filter`你可以在你的定义一个`ApplicationController`并命名它`set_menu`

```
class ApplicationController < ActionController::Base
  before_filter :set_menu

  protected

  def set_menu
    @menu = 'default'
  end

end 
```

然后在您想要为您显示不同菜单的每个控制器中覆盖`set_menu`，例如：

```
class SkateMoviesController < ApplicationController

   protected

   def set_menu
     @menu = 'skate'
   end

end 
```

您可以使用 helper 方法`action_name`来`set_menu`访问控制器中的当前操作。

那么在你看来：

```
<% if @menu == 'default' %>
  <%= default_menu %>
<% else %>
  <%= skate_menu %>
<% end %> 
```

# ios - 在 shouldAutoRotateToInterfaceOrientation iOS Phonegap 中使用 stringByEvaluatingJavascriptFromFstring

> ID：14037553
> 
> 赞同：0
> 
> 时间：2012-12-26T07:45:30.803
> 
> 标签：ios, cordova

`StringByEvaluatingJavascriptFromString`使用它正在读取`javascript`函数时，我得到空字符串。我使用`StringByEvalutaingJavascriptFromString`in`ShouldAutoRotateToInterfaceOrientation`是因为我想控制特定页面上支持的方向。

看来我需要使用它`webViewDidFinishLoad`。但是如何使用`StringByEvalutaingJavascriptFromString`. 或者如何在 ShouldAutoRotateToInterfaceOrientation 中使用它。

我遵循了本教程：[链接](http://www.web-garden.co.uk/blog/2012/7/26/how-to-control-the-page-orientations-in-your-ios-phonegap-application)

他正在使用它`ShouldAutoRotateToInterfaceOrientation`而不是在`webViewDidFinishLoad`

这是我在 MainViewController.m 中的代码：

```
- (BOOL) shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation
{
    NSString *isFirstPage = [self.webView stringByEvaluatingJavaScriptFromString:   @"isFirstPage();"];
    NSString *truth = @"true";
    if ([isFirstPage isEqualToString:truth]) {
        return [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
    }
    else {
        return interfaceOrientation==UIInterfaceOrientationPortrait;
    }
} 
```

isFirstPage 返回一个空字符串@""。

```
function isFirstPage(){
  return true;
} 
```

# jquery - 页面加载时的 Ajax 调用增加了加载时间

> ID：14037554
> 
> 赞同：0
> 
> 时间：2012-12-26T07:45:31.050
> 
> 标签：jquery, web-applications

在我的应用程序中，我在`$(document).ready()`函数中进行了多个 ajax 调用。问题是浏览器一直处于“**加载**”状态，直到 ajax 调用返回。由于这些 ajax 调用大约需要 15-20 秒才能完成，这让我的页面加载时间长得令人作呕。
我的期望是，由于`ajax`调用是异步的，一旦所有页面加载请求完成，浏览器应该退出“加载状态”，而不关心 ajax 调用何时完成。

是否有其他事件之后我应该`ajax`拨打电话？我也尝试将`ajax`调用放在`window.onload`事件回调中，但我仍然遇到同样的问题。

编辑：代码非常简单。我在加载脚本的头部有一个带有一些脚本标签的 HTML 文件：

```
<head>
    <script src="script1.js"></script>
    <script src="script2.js"></script>
</head> 
```

在我的一个脚本中，我有：

```
$(document).ready( 
     // 3 ajax calls
 ); 
```

我使用 Ajax 调用获取 JSON。现在，我在开发工具包中看到，只有当所有这三个 ajax 调用都返回时，浏览器才会退出“加载”状态。我还注意到，当我的页面加载网络请求被缓存时，浏览器不会等待这些 ajax 调用。但是对于空缓存，完成所有页面加载请求大约需要 3-4 秒，在这种情况下，ajax 调用也会导致浏览器保持“加载状态”。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:09:15.400

好的！为什么不在成功函数中调用 ajax 调用。

```
$.ajax({
.........
    success:function(){
        your load stuff here

       $.ajax({
           .........
           success:function(){
               your load stuff here
           }
      });
    }      // end of success of first ajax call
}); 
```

或者您可以在以下位置使用它`complete function`：

```
$.ajax({
    .........
    success:function(){
        your load stuff here
    },
    complete:function(){
       $.ajax({
          .........
          success:function(){
               your load stuff here
          },
          complete:function(){

          }
       });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:54:19.333

我猜您正在尝试使用 AJAX 加载 DOM，对吗？因为如果同时存在 DOM 元素或另一个网页，那么加载您的页面就会出现问题，因为有多个页面要构建您的一个页面。因为`$(document).ready()`看起来你正在使用 JQuery 并且没有问题，并且正如你所提到的，你同时也有回调，那么调试一定还可以。如果您尝试执行上述操作，您可能会遇到问题，否则 ajax 应该不会很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T07:55:27.953

据我所知 .ready() 是一个在 DOM 完全加载时执行的函数。这意味着“加载”状态可能不是由您的 ajax 调用引起的。检查您的 DOM 是否包含 iframe 或在此处发布您的代码。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-26T08:44:03.413

Ajax 调用并不是真正的异步，Ajax 有助于在没有页面回发的情况下进行服务器调用。

假设您从 JavaScript 调用服务器端方法，在调用服务器端方法后，您的 JavaScript 将不会移动到下一行，直到它收到来自服务器的响应。

如果您使用 jQuery 进行 Ajax 调用，请将 asynch 属性设置为 true，然后它不会等待服务器响应。

# java - 在 JTabbedpane 中检索 Textarea 的内容

> ID：14037555
> 
> 赞同：2
> 
> 时间：2012-12-26T07:45:31.957
> 
> 标签：java, swing, jtextarea, jtabbedpane

我正在编写一个使用 JTabbedpane 的摇摆应用程序。可以在选项卡中打开日志文件并根据需要将其“解析”到另一个选项卡。将解析的内容保存到文本文件时遇到问题。每个选项卡都由 JPanel 中的一个 JTextarea 组成。

```
<pre>
 private void setContentsOfParsedLogFile(JPanel content) {
    JTextArea textArea = new JTextArea();
    addContentsToTextArea(textArea);
    content.add(new JScrollPane(textArea));
    content.setLayout(new GridLayout(1, 1));
    pane.addTab(parsedTabName(), content);
  }

  private void addContentsToTextArea(JTextArea textArea) {
    if (!parsedFileAlreadyOpen()) {
      PortLogParser lp = new PortLogParser();
      lp.parseLogFile(new File(activeTabFullName));
      ArrayList<String> sb = lp.getParsedMsg();
      for (String s : sb) {
        textArea.append(s + System.getProperty("line.separator"));
      }
    }
  }
</pre> 
```

希望我可以使用以下方式获取文本：

String text = ((JTextArea) pane.getSelectedComponent()).getText();

在 actionPerformed 中：

```
<pre>
  private void createSaveFileMenuItem() {
    saveLogFile = new JMenuItem("Save Log File");
    saveLogFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, InputEvent.ALT_MASK));
    saveLogFile.addActionListener(new ActionListener() {

      @Override
      public void actionPerformed(ActionEvent e) {
        saveContentOfActiveTab();
      }
    });
  }

  private void saveContentOfActiveTab() {
    JFileChooser fc = new JFileChooser();
    int returnVal = fc.showSaveDialog(this);
    if (returnVal == JFileChooser.APPROVE_OPTION) {
      File file = fc.getSelectedFile();
      try {
        saveContentsToFile(file);
      } catch (IOException e1) {
        e1.printStackTrace();
      }
    }
  }

  private void saveContentsToFile(File file) throws IOException {
    createNewFileIfItDoesntExist(file);
    BufferedWriter bw = new BufferedWriter(new FileWriter(file.getAbsoluteFile()));
    //System.out.println(pane.getSelectedIndex());
    //System.out.println(pane.getSelectedComponent());
    /*
    TODO
    the component is the container JPanel. How do I select the textarea and it's content??
    */
    //    String text = ((JTextArea) pane.getSelectedComponent()).getText();
    //    bw.write(text);
    bw.close();
  }

  private void createNewFileIfItDoesntExist(File file) throws IOException {
    if (!file.exists()) {
      file.createNewFile();
    }
  }
</pre> 
```

但选定的组件是 JPanel。有没有办法在 JPanel 中包含的 textarea 中选择文本？我没有唯一标识每个文本区域，所以这可能是一个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:22:54.460

一种方法是创建一个`JPanel`具有关联的子类`JTextArea`：

```
class LogTextPanel extends JPanel {

    private final JTextArea textArea;

    public LogTextPanel() {
        super(new GridLayout(1, 1));

        textArea = new JTextArea();
        add(new JScrollPane(textArea));
    }

    public void append(String text) {
        textArea.append(text);
    }

    public String getText() {
        return textArea.getText();
    }
} 
```

然后，您可以使用以下方法从所选面板中检索文本：

```
String text = ((LogTextPanel)pane.getSelectedComponent()).getText(); 
```

# node.js - node.js 中 SSL 连接的大约内存开销是多少

> ID：14037558
> 
> 赞同：3
> 
> 时间：2012-12-26T07:45:44.877
> 
> 标签：node.js, memory, ssl, openssl

我正在使用节点版本 v0.8.16。它与 openssl 1.0.0f 捆绑并包含`SSL_OP_NO_COMPRESSION`和`SSL_MODE_RELEASE_BUFFERS`.

我的测试 ssl 服务器只是在传入 https 请求时回显 hello world 并保持连接打开。根据我的测试，每个 ssl 连接的内存开销约为 150k。

node 中 ssl 连接的近似内存开销是多少？在这种情况下如何减少 ssl 内存使用量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T02:57:49.700

SSL 需要每个连接空间：

*   套接字FD
*   最大可能 SSL 记录的接收缓冲区大约为 16k，这与密码套件略有不同
*   一个输出缓冲区，可能也大约 16k
*   计算每个消息 MAC 的空间
*   握手状态、连接状态、握手MAC等
*   指向 SSL 会话的指针，可在与同一目标的连接之间共享，并且必须包含密码套件、协议、预主密钥、共享密钥、会话 ID、对等证书链、超时变量……
*   还有什么我没有想到的。

此外，TCP 连接将消耗内核空间，例如用于套接字发送和接收缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:17:06.510

SSL 每个连接需要大约 128K 甚至更多（取决于实现）用于内存缓冲区，因此您可能无法减少使用的内存量。

# c# - 将 onclick 事件添加到 asp.net DetailsView 中的命令字段

> ID：14037568
> 
> 赞同：0
> 
> 时间：2012-12-26T07:46:32.243
> 
> 标签：c#, asp.net

我有这个`command field`。`DetailsView`

```
<asp:CommandField ShowInsertButton="True" CancelText="Reset" /> 
```

当用户单击此链接时，它将用户填写的数据`DetailsView`插入到数据库中。但是我想`DetailsView`在插入之前将文本设置为两个文本框。我可以在后面的代码中做到这一点。我已经通过将`OnItemInserting`事件添加到`DetailsView`. 但它不起作用。代码中的数据集未插入到数据库中。

后面的代码

```
protected void ABC_DV_ItemInserting(Object sender, DetailsViewInsertEventArgs e)
        {

  TextBox p = (TextBox)LKArea_DV.FindControl("txt_p");

  TextBox x= (TextBox)ABC_DV.FindControl("txt_x");
  TextBox y= (TextBox)ABC_DV.FindControl("txt_y");

  string[] q = p.Text.Trim().Split(',');

  x.Text = q[0];
  y.Text = q[1];

       } 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:54:39.320

使用 ItemCommand 事件

1.  从 DetailView 控件中获取控件，如 Textbox。
2.  检查它们是否为 NULL
3.  如果不为空，则获取值
4.  执行 Insert ，更新你喜欢的任何操作
5.  提交更改
6.  重新绑定您的控件

它应该工作。希望有帮助

# c# - 需要创建日期时间的字符串表示

> ID：14037572
> 
> 赞同：-2
> 
> 时间：2012-12-26T07:46:47.883
> 
> 标签：c#

我需要将日期时间解析为以下字符串：

```
Nov 30 2012
Dec  1 2012 
```

请注意日期格式。对于第二个示例，那里只有一个字符，并且在开始时用空格填充。

现在我正在这样做：

```
 string month = DateTime.Now.ToString("MMM");
    string day = DateTime.Now.Day.ToString().PadLeft(2, ' ');
    string year = DateTime.Now.Year.ToString();

    string myFormat = month + " " + day + " " + year; 
```

需要更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:01:37.590

如果您需要从 DateTime 获取字符串（如您的示例中所示），那么您可以使用简单的：

```
if (DateTime.Now.Day > 9)
    myFormat = DateTime.Now.ToString("MMM dd YYYY");
else
    myFormat = DateTime.Now.ToString("MMM  d YYYY"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:56:34.283

您的解析问题是字符串中的可变数量的空格。您可以在`" "`(space) with上拆分字符串`RemoveEmptyEntries`，然后使用`string.Join`它创建一个带有单个空格的新字符串。稍后您可以使用该`"MMM d yyyy"`格式`DateTime.ParseExact`

```
string str = "Dec  1 2012";
string newStr = string.Join(" ", str.Split(" ".ToCharArray(),StringSplitOptions.RemoveEmptyEntries));
DateTime dt = DateTime.ParseExact(newStr, "MMM d yyyy", CultureInfo.InvariantCulture); 
```

编辑：

由于现在已编辑问题，并且它需要日期的字符串格式。以下可用于格式化。

```
string formattedDate = dt.Day < 10 ? dt.ToString("MMM  d yyyy"): //multiple spaces
                                     dt.ToString("MMM d yyyy"); //single space 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T08:01:32.937

干得好。我相信这是关于生成输出而不是阅读它。

```
 DateTime dt = new DateTime(2013, 1, 1);
 Console.WriteLine(string.Format("{0:MMM} {0,2:%d} {0:yyyy}", dt)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T08:06:24.363

使用字符串格式

```
DateTime dt = new DateTime(2012, 12, 1);
MessageBox.Show(String.Format("{0:MMM d yyyy}", dt)); 
```

编辑：示例

如果您希望数字对齐，那么类似

```
//call
MessageBox.Show(GetNewDateString(new DateTime(2012, 11, 30)) + "\n" + GetNewDateString(new DateTime(2012, 12, 1)));

public String GetNewDateString(DateTime dt)
{
   return dt.Day > 9 ? String.Format("{0:MMM d yyyy}", dt) : String.Format("{0:MMM   d yyyy}", dt);
} 
```

# c# - 用于部署的 C# 如何将库项目的设置添加到主可执行项目

> ID：14037576
> 
> 赞同：0
> 
> 时间：2012-12-26T07:47:07.090
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio 2010 中工作，我有一个主项目和两个其他库项目，并且在主项目中添加了参考。每个项目都有一个设置文件。构建解决方案后，主项目只有一个 .config 文件，但库项目没有 .config 文件。因此，我无法从外部更改这些库项目的设置。

那么这个问题的解决方案是什么，我可以将库项目的 .config 文件放入我的调试/发布文件夹中？

应用程序配置

```
<?xml version="1.0"?>
<configuration>
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <section name="Communicator.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        <section name="DatabaseManager.Database.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
</configSections>
<applicationSettings>
    <Communicator.Properties.Settings>
        <setting name="ApplicationConfigsDirectory" serializeAs="String">
            <value>\Application_Configs</value>
        </setting>
        <setting name="MaxMeterConn" serializeAs="String">
            <value>10000</value>
        </setting>
        <setting name="MaxPhyConn" serializeAs="String">
            <value>20000</value>
        </setting>
        <setting name="ServerIP" serializeAs="String">
            <value>0.0.0.0</value>
        </setting>
        <setting name="Port" serializeAs="String">
            <value>1114</value>
        </setting>
        <setting name="TCPTimeOut" serializeAs="String">
            <value>3900000000</value>
        </setting>
        <setting name="isTCPTimeOut" serializeAs="String">
            <value>True</value>
        </setting>
        <setting name="SchedulerPoolingTime" serializeAs="String">
            <value>480000</value>
        </setting>
        <setting name="startKAScheduler" serializeAs="String">
            <value>True</value>
        </setting>
        <setting name="MinCacheAge" serializeAs="String">
            <value>00:02:00</value>
        </setting>
        <setting name="MaxCahceAge" serializeAs="String">
            <value>00:05:00</value>
        </setting>
        <setting name="SaveLogToDBFlag" serializeAs="String">
            <value>True</value>
        </setting>
        <setting name="Instance" serializeAs="String">
            <value>MDC_Tester</value>
        </setting>
    </Communicator.Properties.Settings>

    <DatabaseManager.Database.Properties.Settings>
      <Setting Name="Server" Type="System.String" Scope="Application">
        <Value Profile="(Default)">192.168.30.181</Value>
      </Setting>
      <Setting Name="Database" Type="System.String" Scope="Application">
        <Value Profile="(Default)">tester</Value>
      </Setting>
      <Setting Name="UserID" Type="System.String" Scope="Application">
        <Value Profile="(Default)">root</Value>
      </Setting>
      <Setting Name="pswd" Type="System.String" Scope="Application">
        <Value Profile="(Default)">nothing</Value>
      </Setting>
      <Setting Name="MaxPoolSize" Type="System.Int32" Scope="Application">
        <Value Profile="(Default)">512</Value>
      </Setting>
    </DatabaseManager.Database.Properties.Settings>
</applicationSettings>
<system.runtime.caching>
<memoryCache>
  <namedCaches>
    <add name="default"
         cacheMemoryLimitMegabytes="1024"
         pollingInterval="00:01:30" />
  </namedCaches>
</memoryCache>
</system.runtime.caching>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:13:39.957

这是设置和配置文件的预期行为。您需要将库项目中的配置部分复制到主项目中。您还需要将相应的部分元素添加到 applicationSettings 部分组：

```
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="SomeLibrary.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      <section name="MainProject.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
</configSections> 
```

然后在主配置中：

```
<applicationSettings>
     <SomeLibrary.Properties.Settings>
         <setting name="SomeSetting" serializeAs="String">
            <value>Whatever</value>
         </setting>
     </SomeLibrary.Properties.Settings>
     <MainProject.Properties.Settings>
        <setting name="MainSetting" serializeAs="String">
            <value>Yada yada</value>
        </setting>
    </MainProject.Properties.Settings>
</applicationSettings> 
```

在上面，在主项目中声明了“SomeLibrary”设置类型，然后在主配置文件中设置与库相关的设置以及主项目的设置。

# android - 如何检查 Intent 中是否存在 Extras

> ID：14037578
> 
> 赞同：3
> 
> 时间：2012-12-26T07:47:13.313
> 
> 标签：android

当我尝试获取 Extras 时，我得到了 Fatal Eroorr

```
try{
        Sdacha=getIntent().getExtras().getString("Sdacha");
        }
        catch(NullPointerException e){} 
```

如何检查是否存在 Extras？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T07:49:31.977

尝试这个，

```
if(getIntent().getExtras().containsKey("Sdacha"))
        {
        String  preview=getIntent().getExtras().getString("Sdacha");

        } 
```

**编辑**

同样正如 Evos 所建议的，也可以在上面的代码中再添加一层 Null 检查。如果您确定 extras 不会为 null，那么上述方法很好。如果不遵循以下一项。

```
 if(getIntent().getExtras()!=null)
        {
        if(getIntent().getExtras().containsKey("Sdacha"))
        {
        String  preview=getIntent().getExtras().getString("Sdacha");
        }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T07:49:34.257

`Extras`在从中获取某些内容之前检查它是否不为空很容易：

```
if (getIntent().getExtras() != null){
     Sdacha=getIntent().getExtras().getString("Sdacha");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:51:52.790

```
 Bundle bundle = getIntent().getExtras();
 if (bundle != null) {
      String preview = bundle.getString("Sdacha");
      if (preview != null) {
          // do anything  .....
      }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:55:21.847

为了防止这种情况发生，我喜欢将我的调用封装到一个静态 startActivity 方法中，与片段中的 newInstance() 模式相同：

```
public static void startActivity(Activity activity, int param, int flags){
    Intent intent = new Intent(activity, MainActivity.class);
    intent.setFlags(flags);
    intent.putExtra(PARAM, param);
    activity.startActivity(intent);
} 
```

当然，如果您在其他活动中使用此方法，您将永远不会有 NPE。

# mysql - 如何确定 phpmyadmin 中事件的开始时间？

> ID：14037579
> 
> 赞同：0
> 
> 时间：2012-12-26T07:47:19.087
> 
> 标签：mysql, sql, phpmyadmin

如果我尝试在此页面中创建事件：

![event_shecduler](../Images/cd57a4b635090cbb7e07217ad1a72249.png)

现在我已将其设置为每 1 个月运行一次，但我如何设置在什么时间？我希望报告将上个月的所有记录保存到使用表中

```
l.created_on <= DATE_SUB(NOW(), INTERVAL 1 month) 
```

所以我猜它会运行，`1/1/12 00:00:00`但我宁愿等待 2 分钟，以防万一在同一时刻插入了一些东西，所以我可以**在使用 phpMyAdmin 时**设置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:58:44.123

我的意思是在这里设置时间......这是日期和时间的常见触发器

![MySQL cron 作业](../Images/7ab3998d91689dcf1f4aa66ece4bef30.png)

# opengl - 在关闭多重采样的情况下使用多重采样 OpenGL 上下文会降低性能吗？

> ID：14037580
> 
> 赞同：1
> 
> 时间：2012-12-26T07:47:49.200
> 
> 标签：opengl, multisampling

创建一个多重采样的OpenGL上下文，通过glDisable关闭多重采样，与使用非多重采样的上下文相比，性能如何受到影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:54:59.740

MSAA（或FSAA）级别肯定会影响性能。只需制作一个带有几个基元的基本OpenGL应用程序（最好是大尺寸，这样片段着色器就必须做很多工作），你会注意到性能下降。当然这取决于在你的硬件规格上，但是是的，毕竟有一个明显的影响。为什么会发生这种情况？因为像素被多次采样，这意味着片段着色器需要更多的工作。阅读[这个](http://www.opengl.org/wiki/Multisampling)以获得全面的解释。

# wordpress - Wordpress 插件问题 css 和 js 未加载

> ID：14037581
> 
> 赞同：0
> 
> 时间：2012-12-26T07:47:55.887
> 
> 标签：wordpress

我`captain slider plugin`在我的频道主题中使用 wordpress 我不知道为什么 css 和 js 没有加载。没有权限问题任何帮助？？？

这些加载在 wp-contents/plugins/captain-slider/captain-slider.php

```
function ctslider_load_scripts() {
    wp_register_style( 'flexslider-style',  CTSLIDER_PLUGIN_URL . 'includes/css/flexslider.css', array(  ), CTSLIDER_VERSION );

    wp_register_script( 'flexslider',  CTSLIDER_PLUGIN_URL .  'includes/js/jquery.flexslider-min.js', array( 'jquery' ), CTSLIDER_VERSION, false );
    wp_register_script( 'fitvids',  CTSLIDER_PLUGIN_URL . 'includes/js/jquery.fitvids.js', array( 'jquery' ), CTSLIDER_VERSION, false );

    wp_enqueue_script( 'jquery' );
    wp_enqueue_script( 'flexslider' );
    wp_enqueue_script( 'fitvids' );

    wp_enqueue_style( 'flexslider-style' ); 
}
add_action( 'wp_enqueue_scripts', 'ctslider_load_scripts' ); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T09:10:51.493

这段代码似乎完全错误。当 wp_enqueue_scripts 动作被触发时，函数 ctslider_load_scripts() 正在执行。因此，在动作触发后，所有脚本都会排队。这是错误的。

不要使用动作。只需像这样将脚本排入队列：

```
wp_register_style( 'flexslider-style',  CTSLIDER_PLUGIN_URL . 'includes/css        /flexslider.css', array(  ), CTSLIDER_VERSION );

wp_register_script( 'flexslider',  CTSLIDER_PLUGIN_URL .  'includes/js/jquery.flexslider-min.js', array( 'jquery' ), CTSLIDER_VERSION, false );
wp_register_script( 'fitvids',  CTSLIDER_PLUGIN_URL . 'includes/js/jquery.fitvids.js', array( 'jquery' ), CTSLIDER_VERSION, false );

wp_enqueue_script( 'jquery' );
wp_enqueue_script( 'flexslider' );
wp_enqueue_script( 'fitvids' );

wp_enqueue_style( 'flexslider-style' ); 
```

# asp.net-mvc - HTML 5 实时数据

> ID：14037586
> 
> 赞同：2
> 
> 时间：2012-12-26T07:48:35.513
> 
> 标签：asp.net-mvc, html, real-time

寻找一种解决方案来绘制一个反映一些服务器端数据但以某种方式实时的 html 表。有些人可能会建议使用计时器异步刷新表，但这不是解决方案。换句话说，每次将记录插入表中时，需要来自服务器的某种推送通知，以反映在屏幕上。我的 Web 应用程序是使用 ASP.net MVC 4 构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:58:54.420

如果您不需要从客户端到服务器的双向数据，还可以考虑[服务器发送事件 (SSE) 。](https://developer.mozilla.org/en-US/docs/Server-sent_events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:53:15.663

HTML 5 Websockets 最适合此类事情。

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

# java - 我可以在 contains 方法中使用正则表达式吗

> ID：14037587
> 
> 赞同：-5
> 
> 时间：2012-12-26T07:48:46.813
> 
> 标签：java, regex, string

这是我的代码

```
public class regMatch {

    public static void main(String... args)
    {
        String s = "1";
        System.out.println(s.contains("/[0-9]/"));
    }
} 
```

其印刷错误；

我想在`contains`方法中使用正则表达式。

我该如何使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T07:53:19.333

> 我想在 contains 方法中使用正则表达式。
> 
> 我该如何使用它

你**不能**`contains`在方法中使用正则表达式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T07:53:33.030

您不需要（也不应该使用）Java 正则表达式中的分隔符

而且该`contains()`方法不支持正则表达式。你需要一个正则表达式对象：

```
Pattern regex = Pattern.compile("[0-9]");
Matcher regexMatcher = regex.matcher(s);
System.out.println(regexMatcher.find()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T07:53:11.700

您可以使用[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)类来测试正则表达式匹配。但是，如果您只是测试字符串中是否存在数字，则直接测试它比使用正则表达式更有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T07:54:56.747

您可以使用`matches()`正则表达式`.*[0-9].*`来查找是否有任何数字：

```
System.out.println(s.matches(".*[0-9].*")); 
```

（或对于多行字符串，请改用正则表达式`(.|\\s)*[0-9](.|\\s)*`）

另一种选择 - 如果您渴望使用`contains()`从 0 到 9 迭代所有字符，并检查每个字符串是否包含它：

```
 boolean flag = false;
    for (int i = 0; i < 10; i++) 
        flag |= s.contains("" + i);
     System.out.println(flag); 
```

# opengl-es - 我可以将 OpenCL 与 Monogame 一起使用吗？

> ID：14037594
> 
> 赞同：1
> 
> 时间：2012-12-26T07:49:27.557
> 
> 标签：opengl-es, opencl, opentk, monogame, cloo

我正在寻找用于开发的 Monogame。该网站提到它“在引擎盖下”有 OpenTK。这是否意味着我可以使用 Monogame 可靠地访问 OpenCL，或者 OpenCL 已被拆分为 Cloo？我的主要目标是跨平台、高性能的 OpenGL ES 和 OpenCL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:03:24.587

啊，我的理解是 Cloo 是 OpenCL 的 .NET 包装器，所以如果您正在做 MonoGame 开发，我认为您会使用 Cloo，它可以让您访问 OpenCL 中所需的一切。稍微浏览一下源代码，我注意到 XNA 库被大量使用。就 OpenTK 而言，我主要注意到它在 linux 和 MacOS 中用于音频。它还使用了 Tao.SDL 包装器。要回答您的问题，afik，是的，您可以在 MonoGame 中使用 OpenCL，是的，我认为这非常适合您的目的。干杯

# tfs - 在 TFS 2010 中收到电子邮件时自动创建任务

> ID：14037605
> 
> 赞同：0
> 
> 时间：2012-12-26T07:50:42.447
> 
> 标签：tfs, tfs-alerts

我有自己的 TFS 服务器插件，当任何工作项分配给我时，它会在本地向我发送一封电子邮件。现在，我必须执行以下操作：

当我收到一封电子邮件时，将自动在 TFS 的项目 [我的项目名称] 中创建一个任务

我怎样才能实现这个目标？

# mysql - MySQL 服务未在 Windows 中启动

> ID：14037607
> 
> 赞同：0
> 
> 时间：2012-12-26T07:50:54.683
> 
> 标签：mysql

```
FROM C:\ProgramData\MySQL\MySQL Server 5.5\Data\purplista.err:

121226 13:12:06  [Note] Plugin 'FEDERATED' is disabled.

121226 13:12:06  InnoDB: The InnoDB memory heap is disabled

121226 13:12:06  InnoDB: Mutexes and rw_locks use Windows interlocked functions

121226 13:12:06  InnoDB: Compressed tables use zlib 1.2.3

121226 13:12:06  InnoDB: Initializing buffer pool, size = 107.0M

121226 13:12:06  InnoDB: Completed initialization of buffer pool

121226 13:12:06  InnoDB: highest supported file format is Barracuda. 
```

从 mySql 工作台启动 Mysql 时，我遇到了上述问题。如果我从 Windows 服务启动它，它会在几秒钟内自动停止。

**注意：**如果我卸载并重新安装它一段时间，但几天后我又遇到了这个问题

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:21:31.037

为了

```
121226 13:12:06  InnoDB: The InnoDB memory heap is disabled 
```

您可以尝试设置`innodb_use_sys_malloc = 0`在`my.cnf`. 更多参考文档在[这里](http://www.innodb.com/doc/innodb_plugin-1.0-doc-single/innodb-plugin.html#innodb-performance-use_sys_malloc)。

还：

*   您可以尝试清除`mysql-bin.index`. 相关问题在[这里](https://stackoverflow.com/questions/11702051/access-denied-when-opening-phpmyadmin)。

*   如果您有一些防病毒/防火墙软件，请尝试将其关闭并检查功能，bec。这可能是某些问题的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T07:56:33.410

我认为问题可能是。

1.  让 MySql 访问防火墙修复此问题
2.  您应该允许 MySQL 服务器 (mysqld.exe) 启动并允许访问端口 3306。
3.  然后尝试减少 my.ini 文件中的 innodb_buffer_pool_size 。将其设置为 1G 并检查这是否允许服务启动。

`note`mysql使用tcp连接

# wordpress - Wordpress - wp_enqueue_style 将样式添加到页脚，而不是页眉

> ID：14037609
> 
> 赞同：1
> 
> 时间：2012-12-26T07:51:38.203
> 
> 标签：wordpress, wordpress-theming

我正在尝试将样式和脚本添加到我的插件中，所以我使用：

```
function add_my_scripts() {
    wp_register_script( 'test_scripts', plugins_url('test_scripts.js', __FILE__) );
    wp_enqueue_script( 'test_scripts' );
}

add_my_scripts(); 
```

在我的插件页面中，但它将脚本添加到页脚而不是标签内。wp_enqueue_style 也会发生同样的事情。我读到它应该默认将脚本或样式添加到头部。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:01:14.370

可能的原因： `wp_head()`标题中缺少或在错误的位置或以某种方式没有被调用。其他脚本是否正确加载到头部？

另外，您是否尝试将“false”作为最后一个参数传递`enqueue_script()`以强制它进入标题？这确实不能解决问题，但如果我无法解决其他问题，我会尝试这样做。

# ios - uiwebview中的杂志电子纸应用程序pdf - 应用程序崩溃

> ID：14037613
> 
> 赞同：1
> 
> 时间：2012-12-26T07:51:55.773
> 
> 标签：ios, pdf, uiwebview

我开发了一个杂志电子纸应用程序，可以在 UIWebView 中打开 PDF 文件。我一次创建了一组 3 个 web 视图并显示 PDF 页面以处理平滑滚动。加载某些页面或缩放应用程序崩溃并且无法跟踪崩溃。它只发生在客户的 iPad 上，不会发生在我们的 iPad 上。但是我在LOG中不断显示以下错误。

```
ePaper[576] <Error>: FAFONG+Helvetica: FT_Select_Charmap failed: error 6.
ePaper[576] <Error>: FAFOOH+TimesNewRomanPSMT: FT_Select_Charmap failed: error 6.
ePaper[576] <Error>: FAFONG+Helvetica: FT_Select_Charmap failed: error 6.
ePaper[576] <Error>: FAFOOH+TimesNewRomanPSMT: FT_Select_Charmap failed: error 6.

JJBOOI+DixielandPSMT: FT_Select_Charmap failed: error 38.
ePaper[576] <Error>: JJEANE+STMZH---040: FT_Select_Charmap failed: error 6.
ePaper[576] <Error>: JJDADE+ITRFK-Tam7-PalmleafM-Bold-Bold: FT_Select_Charmap failed: error 6. 
```

谁能指导我？

# shell - 从unix中的文件中提取两个括号之间的文本

> ID：14037615
> 
> 赞同：-1
> 
> 时间：2012-12-26T07:52:27.147
> 
> 标签：shell, unix

> **可能重复：**
> [awk 脚本 - 提取括号之间的文本](https://stackoverflow.com/questions/11673754/awk-script-extract-text-between-parenthesis)

我正在尝试在 unix 中提取文件的两个括号之间的文本。喜欢关注

```
abc(

xyz,
abc,
mnr,
puc,

) 
```

我尝试使用 awk，例如：

```
awk 'BEGIN {FS="abc"} {print $2}' file.txt 
```

但这不起作用。

请在这方面帮助我

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:30:56.030

您可以`sed`像这样使用“提取文本”：

```
sed -n '/abc(/,/)/ { //d; /^\s*$/!p }' file 
```

结果：

```
xyz,
abc,
mnr,
puc, 
```

解释：

*   `-n`使用开关禁用默认打印
*   使用[范围运算符](http://www.grymoire.com/Unix/Sed.html#uh-29)在两个模式之间“选择”一个模式，`abc(`然后`)`
*   `//d`删除选定的花样：`abc(`和`)`。
*   并`/^\s*$/!p`告诉 sed 打印除空行之外的任何内容。

* * *

或与`awk`：

```
awk '/abc\(/ { r=""; f=1 } f && !/^(abc\(|\)|\s*)$/ { r = (r ? r ORS : "") $0 } /\)/ { if (f) print r; f=0 }' file 
```

结果：

```
xyz,
abc,
mnr,
puc, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:09:38.737

方式1：

如果`abc(`前后总是有空行`)`：

```
awk -vRS="" '/abc\($/{f=1;next};/\)/{f=0}f' file 
```

方式2：

如果您不确定空行：

```
awk '/abc\($/{f=1;next;} /^ *\) *$/{f=0}f' file 
```

请注意，在方式 2 中，某些情况下不起作用。例如，`)`您的 abc(...) 块中有嵌套的 " " 行。但你可以测试它。根据您问题中的给定输入。两者都有效。

# javascript - 使用 JavaScript 在 div 上随机分布 HTML 元素

> ID：14037616
> 
> 赞同：1
> 
> 时间：2012-12-26T07:52:34.777
> 
> 标签：javascript

我希望创建类似虚拟森林的东西。

我有：

*   固定大小的 div，我希望在其中散布树木
*   随机数量的树（每棵树都是 PNG）
*   中心的小方形 div，应该远离树木

我怎样才能散布树木，使它们：

*   不会互相重叠
*   不会进入中央 div
*   计算它们的大小（css），以便所有树都适合 div

谢谢

**根据要求提供更多信息：**

*   所有树图像具有相同的尺寸
*   容器 div 的固定尺寸为 500x300 像素
*   小中央 div 的固定尺寸为 30x30 像素
*   png 原始分辨率为 60x60 像素

我创建了以下 php 脚本，但它不处理空位置，也不准确地将图像放入 div：

```
$forest1 = null;
for ($a=1; $a < 201; $a++) {

    // width * height (500*280)
    $total_area_in_pixels = 140000;
    $total_elements = 200;
    $area_per_object = $total_area_in_pixels / $total_elements;
    $element_height = round (sqrt($area_per_object) / 100 * 70);

    $random_margin = rand(0, $element_height / 5);
    $tree_type = rand(1,4);
    $style = "height: {$element_height}px; margin: {$random_margin}px;";
    $forest1 .= "<img src='images/trees/tree{$tree_type}.png' alt='{$a}' title='tree' style='{$style}'>\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:11:54.230

你需要先弄清楚你想如何进行定位。您可以将树绝对基于 div 父级设置为容器，也可以将树绝对基于整个页面定位为容器。

要将父级用作容器，您可以这样做： 将 div 设置为 position: relative。编写 javascript 来创建 IMG 元素，然后将它们的位置设置为“绝对”。确保在创建元素时将它们创建为要包含它们的 DIV 的子元素。

要将页面用作容器，您可以这样做：编写 javascript 来创建 IMG 元素并将它们的位置设置为“绝对”。不要费心让它们成为 DIV 的子元素，因为这无关紧要。使用 jQuery 或基本的 javascript 测试找出容器 div 的确切页面位置。每次放置树时，都需要计算其相对于容器 div 的位置。

定位树基本上是这样的：编写一个简单的算法来生成随机的 x 和 y 坐标对来定位每个元素并这样做。然后对照您不想被覆盖的正方形区域检查每棵树的位置、宽度和高度。如果您在该区域找到一棵树，请将其移动一些以将其移出该区域，或将其删除。请务必记住，如果您绝对定位在整个页面内，您将始终需要添加或减去页面容器位置作为偏移量，以获取页面上您想要的树。

这应该足以让你开始。

# android - 将图像数据发送到服务器

> ID：14037622
> 
> 赞同：0
> 
> 时间：2012-12-26T07:53:10.067
> 
> 标签：android

我想将图像数据从 android 客户端发送到服务器。但是有一个问题，有的时候我把接收到的消息发送成功了，但是有的时候虽然服务器已经接收到了数据，但是我发送了却什么也没有收到。

函数上传

```
 public void upload()
{
    try
    {
        // nén hình lại và gửi lên server
        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        alteredBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bao);

        // chyển hình ảnh về dạng byte
        byte[] ba = bao.toByteArray();

        // dùng thư viện Base64 chuyển mảng Byte về chuỗi String
        String ba1 = Base64.encodeBytes(ba);

        // Đường dẫn đến server
        String sampleURL = SERVICE_URL + "/uploadimage.php";

        // Tạo mới một lớp CallUrl
        CallUrl wst = new CallUrl(CallUrl.POST_TASK, this, "Uploading data...", 2, "");

        // Thêm data
        wst.addNameValuePair("image", ba1);
        wst.addNameValuePair("mahoadon", mahoadon);

        // Gửi lên server
        wst.execute(new String[] {
                sampleURL
        });
    } catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

带有标志 = 2 的类 Callurl

```
public class CallUrl extends AsyncTask<String, Integer, String> {

public static final int POST_TASK = 1;
public static final int GET_TASK = 2;
private static final String TAG = "WebServiceTask";
// thời gian chờ của một kết nối, tính theo milliseconds (waiting to
// connect)
private static final int CONN_TIMEOUT = 3000;
// thời gian chờ của một socket, tính bằng milliseconds (waiting for data)
private static final int SOCKET_TIMEOUT = 5000;
private int taskType = GET_TASK;
private Context mContext = null;
private String processMessage = "Processing...";
private ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
private int flag = 0;
private String ID;
private ProgressDialog progressDialog;

// Khởi tạo
public CallUrl(int taskType, Context mContext, String processMessage, int flag, String ID) {

    this.taskType = taskType;
    this.mContext = mContext;
    this.processMessage = processMessage;
    this.flag = flag;
    this.ID = ID;
}

@Override
protected void onPostExecute(String response) {

    progressDialog.dismiss();
    // Khai báo các thành phần cần thiết
    TextView txtusername = (TextView) ((Activity) mContext).findViewById(R.id.loginUsername);
    TextView txtpassword = (TextView) ((Activity) mContext).findViewById(R.id.loginPassword);
    CheckBox checkBox = (CheckBox) ((Activity) mContext).findViewById(R.id.checkBox1);
    DB_Adapter mDb = new DB_Adapter(mContext);
    final ArrayList<String> phonenumberArray = new ArrayList<String>();
    final ArrayList<String> codeInvoiceArray = new ArrayList<String>();
    final ArrayList<String> nameArray = new ArrayList<String>();
    final ArrayList<String> addressArray = new ArrayList<String>();
    final ArrayList<String> urlArray = new ArrayList<String>();

    // Nếu flag=0 tương đương với việc lấy thông tin đăng nhập từ server
    if (flag == 0)
    {
        try
        {
            // Dùng Json đọc thông tin nhận được từ server
            JSONObject json_data = new JSONObject(response);
            String result = json_data.getString("result");

            // Nếu kết quả trả về là đúng sẽ hiển thị activity invoice
            if (result.equalsIgnoreCase("User Found"))
            {

                Toast.makeText(mContext, "Đăng nhập thành công",
                        Toast.LENGTH_SHORT).show();

                // đăng nhập thành công sẽ chuyển vào activity Invoice
                Intent j = new Intent(mContext, Invoice.class);
                j.putExtra("ID", txtusername.getText().toString());
                mContext.startActivity(j);
                checkBox.setChecked(false);
            }

            // Nếu sai sẽ yêu cầu nhập lại
            else
            {
                String mess = "Tên đăng nhập hoặc mật khẩu không đúng!Làm ơn nhập lại!";
                Alert alert = new Alert(mContext, mess, false);
                alert.AlertDialog();
                txtpassword.setText("");
                txtusername.setText("");
            }
        } catch (Exception e)
        {
            e.printStackTrace();
        }

        // flag=1 lấy thông tin hóa đơn từ server
    } else if (flag == 1)
    {
        String phonenumber, name, address, url, code, status;
        JSONArray jArray;
        codeInvoiceArray.clear();
        nameArray.clear();
        phonenumberArray.clear();
        addressArray.clear();
        urlArray.clear();
        try
        {
            // kiểm tra chuỗi trả về
            // nếu rỗng thông báo hôm nay chưa có sản phẩm để giao
            // nếu có, dùng Json lấy thông tin nhận được
            if (response.equalsIgnoreCase(""))
            {
                notification("Hôm nay không còn gì để giao!");
            }
            else
            {
                JSONObject json_data = null;
                JSONObject jsonObject = new JSONObject(response);
                jArray = jsonObject.getJSONArray("Orders");
                // Mở kết nối đến database
                mDb.openDB();

                // sử dụng json lấy các giá trị thông qua các key
                // gán nó vào các mảng tương ứng
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);

                    // Lây thông tin theo mã id của người giao hàng
                    if (json_data.getString("DeliveryId").equalsIgnoreCase(ID))
                    {
                        // Lấy thông tin theo value thông qua các key
                        phonenumber = json_data.getString("PhoneNumber");
                        address = json_data.getString("Address");
                        name = json_data.getString("CustomerName");
                        url = json_data.getString("Url");
                        code = json_data.getString("CodeInvoice");
                        status = json_data.getString("Status");

                        // gán thông tin vào các mảng
                        phonenumberArray.add(phonenumber);
                        codeInvoiceArray.add(code);
                        nameArray.add(name);
                        addressArray.add(address);

                        // Gọi class load thông tin từ mảng lên listview
                        LoadListView load = new LoadListView(mContext, codeInvoiceArray,
                                nameArray, phonenumberArray, addressArray, ID);
                        load.loaddatalistview();
                        // Kiểm tra mã hóa đơn này đã có trong database chưa
                        // nếu chưa sẽ thêm data vào databse
                        // nếu đã có rồi sẽ cập nhật lại thông tin thông qua
                        // mã
                        // hóa đơn
                        if (mDb.test(code) == true)
                        {
                            mDb.insert(code, name, phonenumber, address, url, status,
                                    ID);
                            // Lưu thông tin hình ảnh hóa đơn vào sdcard
                            // save(code, url);
                            new LoadImageInvoice().execute(new String[] {
                                    url, code
                            });

                        }
                        else
                        {
                            // Nếu trùng với thông tin trong database sẽ
                            // edit lại thông tin
                            // Trong trường hợp sửa thông tin trên server
                            mDb.editAll(code, name, phonenumber, address, url, ID, status);

                        }
                    }
                }
                // Thực hiện xong, đóng kết nối
                mDb.closeDB();

            }
        } catch (Exception e)
        {
            e.printStackTrace();
        }
        // Nếu flag=2 tải hình ảnh hóa đơn đã ký lên server, và thông báo
        // gửi thành công
    } else if (flag == 2)
    {
        try
        {
            // thông tin báo thành công được trả về từ server
            JSONObject json_data = new JSONObject(response);
            String result = json_data.getString("str");
            if (result.equalsIgnoreCase("success"))
            {
                // Hiển thị khi tải lên thành công
                String mess = "Tải lên server thành công!";
                Alert alert = new Alert(mContext, mess, true);
                alert.AlertDialog();
            } else if (result.equalsIgnoreCase("faill"))
            {
                // Hiển thị khi tải lên server thất bại
                String mess = "Tải lên server thất bại!";
                Alert alert = new Alert(mContext, mess, false);
                alert.AlertDialog();
            }
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}

// Thông báo dạng Toast
public void notification(String mess)
{
    Toast.makeText(mContext, mess, Toast.LENGTH_SHORT).show();
}

// thêm thông tin cần thiết để gửi lên server
public void addNameValuePair(String name, String value) {

    params.add(new BasicNameValuePair(name, value));
}

// hiển thị dialog trên UI cho người dùng biết app đang trong quá trình làm
// việc
@Override
protected void onPreExecute() {

    // showProgressDialog();
    this.progressDialog = ProgressDialog.show(mContext, "",
            processMessage);
}

// kết nối đến server thông url
protected String doInBackground(String... urls) {
    String url = urls[0];
    String result = "";
    HttpResponse response = doResponse(url);
    if (response == null) {
        return result;
    } else {
        try {

            result = inputStreamToString(response.getEntity().getContent());

        } catch (IllegalStateException e) {
            Log.e(TAG, e.getLocalizedMessage(), e);

        } catch (IOException e) {
            Log.e(TAG, e.getLocalizedMessage(), e);
        }
    }
    return result;
}

// khởi tạo socket và kết nối
private HttpParams getHttpParams() {

    HttpParams htpp = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(htpp, CONN_TIMEOUT);
    HttpConnectionParams.setSoTimeout(htpp, SOCKET_TIMEOUT);
    return htpp;
}

// thao tác xử lý khi kết nối đến server
private HttpResponse doResponse(String url) {

    HttpClient httpclient = new DefaultHttpClient(getHttpParams());
    HttpResponse response = null;

    try {
        switch (taskType) {

            //kiểm tra tác vụ cần thực hiển 
            //post gửi yêu cầu kèm thông tin
            //Get gửi yêu cầu
            case POST_TASK:
                HttpPost httppost = new HttpPost(url);
                // Add parameters
                httppost.setEntity(new UrlEncodedFormEntity(params));
                response = httpclient.execute(httppost);
                break;
            case GET_TASK:
                HttpGet httpget = new HttpGet(url);
                response = httpclient.execute(httpget);
                break;
        }
    } catch (Exception e) {

        Log.e(TAG, e.getLocalizedMessage(), e);

    }

    return response;
}

// Chuyển thông tin nhận về thành dạng chuỗi
private String inputStreamToString(InputStream is) {

    String line = "";
    StringBuilder total = new StringBuilder();
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    try {
        // đọc thông tin nhận được cho đến khi kết thúc
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }
    } catch (IOException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }

    // Trả về giá trị chuỗi đầy đủ
    return total.toString();
}

} 
```

错误

```
12-26 14:36:18.539: E/WebServiceTask(9063): null
12-26 14:36:18.539: E/WebServiceTask(9063): java.net.SocketTimeoutException
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-26 14:36:18.539: E/WebServiceTask(9063):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-26 14:36:18.539: E/WebServiceTask(9063):     at Url.CallUrl.doResponse(CallUrl.java:308)
12-26 14:36:18.539: E/WebServiceTask(9063):     at Url.CallUrl.doInBackground(CallUrl.java:265)
12-26 14:36:18.539: E/WebServiceTask(9063):     at Url.CallUrl.doInBackground(CallUrl.java:1)
12-26 14:36:18.539: E/WebServiceTask(9063):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-26 14:36:18.539: E/WebServiceTask(9063):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-26 14:36:18.539: E/WebServiceTask(9063):     at java.lang.Thread.run(Thread.java:856)
12-26 14:36:18.539: W/System.err(9063): org.json.JSONException: End of input at character 0 of 
12-26 14:36:18.539: W/System.err(9063):     at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
12-26 14:36:18.547: W/System.err(9063):     at org.json.JSONTokener.nextValue(JSONTokener.java:97)
12-26 14:36:18.547: W/System.err(9063):     at org.json.JSONObject.<init>(JSONObject.java:154)
12-26 14:36:18.547: W/System.err(9063):     at org.json.JSONObject.<init>(JSONObject.java:171)
12-26 14:36:18.547: W/System.err(9063):     at Url.CallUrl.onPostExecute(CallUrl.java:217)
12-26 14:36:18.547: W/System.err(9063):     at Url.CallUrl.onPostExecute(CallUrl.java:1)
12-26 14:36:18.547: W/System.err(9063):     at android.os.AsyncTask.finish(AsyncTask.java:602)
12-26 14:36:18.547: W/System.err(9063):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
12-26 14:36:18.547: W/System.err(9063):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
12-26 14:36:18.547: W/System.err(9063):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 14:36:18.547: W/System.err(9063):     at android.os.Looper.loop(Looper.java:137)
12-26 14:36:18.547: W/System.err(9063):     at android.app.ActivityThread.main(ActivityThread.java:4514)
12-26 14:36:18.547: W/System.err(9063):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 14:36:18.547: W/System.err(9063):     at java.lang.reflect.Method.invoke(Method.java:511)
12-26 14:36:18.547: W/System.err(9063):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-26 14:36:18.547: W/System.err(9063):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-26 14:36:18.555: W/System.err(9063):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:06:20.747

在看到你的整个代码和日志之后，我发现了一些东西并且有一个查询。

**查询**：

1）为什么要使用 base64 将图像上传到服务器。还有许多其他方法可以将图像上传到服务器。

**发现问题**：

在第二个代码中，您设置了套接字连接超时，并且在查看日志后，我可以看到与服务器的连接需要时间，因此您的应用程序无法将任何内容上传到服务器，并且您会收到此超时异常。

**解决方案**：

1）增加你的套接字连接超时时间，然后再次检查。
2）使用一些不同的方式将图像上传到服务器

# java - KeyListener - 调用 keyPressed 但未调用 KeyReleased

> ID：14037631
> 
> 赞同：2
> 
> 时间：2012-12-26T07:53:51.580
> 
> 标签：java, swing, jpanel, keylistener

无需发布太多代码，简而言之，我有一个行为有趣的 KeyListener

我有一个 JPanel，我像这样实现我的 KeyListener：

```
keyboard = new KeyBoard(); // implements KeyListener
KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
manager.addKeyEventDispatcher(new DefaultKeyEventDispatcher(keyboard)); 
```

我以前也试过这样：

```
theJPanel.addKeyListener(myKeyListener);
theJPanel.setFocusable(true);
theJPanel.requestFocusInWindow(); 
```

**主要问题：**

当问题发生时，`public void keyPressed(KeyEvent e)` **总是**被调用，但`public void keyReleased(KeyEvent e)` **永远不会**被调用。

当它发生时似乎是不可预测的，因为其他时候一切都按应有的方式运行。如果我等待大约 5 分钟并重新运行程序，该错误就会消失：/

编辑：（忘记发布 DefaultKeyEventDispatcher 代码）

```
package game.keyboard;

import java.awt.KeyEventDispatcher;
import java.awt.event.KeyEvent;

public class DefaultKeyEventDispatcher implements KeyEventDispatcher {

    private KeyBoard keyboard;

    public DefaultKeyEventDispatcher(KeyBoard keyboard) {
        this.keyboard = keyboard;
    }

    @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (e.getID() == KeyEvent.KEY_PRESSED) {
            keyboard.keyPressed(e);
        } else if (e.getID() == KeyEvent.KEY_RELEASED) {
            keyboard.keyReleased(e);
        } else if (e.getID() == KeyEvent.KEY_TYPED) {
            keyboard.keyTyped(e);
        }
        return false;
    }
} 
```

编辑 2\. KeyBoard 类的示例

```
package game.keyboard;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class KeyBoard implements KeyListener {

    private boolean[] keys;

    private long[] keyPressedTime;

    public KeyBoard() {
        keys = new boolean[KeyEvent.KEY_LAST];
        keyPressedTime = new long[KeyEvent.KEY_LAST];
    }

    @Override
    public void keyTyped(KeyEvent e) {
    }

    @Override
    public void keyPressed(KeyEvent e) {
        keys[e.getKeyCode()] = true;
        keyPressedTime[e.getKeyCode()] = System.currentTimeMillis();
    }

    @Override
    public void keyReleased(KeyEvent e) {
        keys[e.getKeyCode()] = false;   
        keyPressedTime[e.getKeyCode()] = -1;
    }

    public long keyPressedTime(int k) {
        return keyPressedTime[k];
    }

    public boolean isKeyPressed(int k) {
        return keys[k];
    }

    public boolean isKeyCombo(int[] k) {
        boolean ret = true;
        for(int i = 0;i < k.length; i++) {
            ret &= keys[k[i]];
        }
        return ret;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:01:19.120

这...

```
keyboard = new KeyBoard(); // implements KeyListener
KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
manager.addKeyEventDispatcher(new DefaultKeyEventDispatcher(keyboard)); 
```

是不是注册的方式`KeyListener`。这将允许您查看应用程序处理的所有密钥。 `KeyEventDispatcher`没有`keyPressed`or`keyReleased`方法，只有`dispatchKeyEvent`.

JDK中没有这样`DefaultKeyEventDispatcher`的类，因此您必须使用自定义版本，这意味着我们将不知道问题究竟是什么，因为我们既无法复制它，也无法研究它。

如果不知道您要达到什么目标，就不可能提供准确的指导，但您可能希望从[如何编写关键监听器开始](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:42:19.157

使用密钥处理，如

```
textfield.addKeyListener(new  KeyListener(){

            @Override
            public void keyTyped(KeyEvent e) 
            {
               //Key Type Action
               //example
               int code = e.getKeyCode();
               switch(code)
               {
                case KeyEvent.VK_UP:
                {
                JOptionPane.showMessageDialog(rootPane,"UP Key pressed");
                break;
                }

                case KeyEvent.VK_DOWN:
                {
                   JOptionPane.showMessageDialog(rootPane,"DOWN Key pressed");
                  break;
                }

                case KeyEvent.VK_LEFT:
                {
                  JOptionPane.showMessageDialog(rootPane,"LEFT Key pressed");
                  break;
                }

                case KeyEvent.VK_RIGHT:
                {
                  JOptionPane.showMessageDialog(rootPane,"RIGHT Key pressed");
                  break;
                }
               }
            }

            @Override
            public void keyPressed(KeyEvent e) {
                // key pressed action
            }

            @Override
            public void keyReleased(KeyEvent e) {
                // key released action
            }
        }); 
```

# sql-server - SQL Server 为一列创建多个非聚集索引与在一个索引中创建多个列

> ID：14037644
> 
> 赞同：6
> 
> 时间：2012-12-26T07:55:05.503
> 
> 标签：sql-server, multiple-columns, non-clustered-index

假设我有下表

*   `UserID`（身份）PK
*   `UserName`- 唯一非空
*   `UserEmail`- 唯一非空

推荐什么以获得最佳性能？

*   `UserName`为和`UserEmail`单独创建非聚集索引

或者

*   只有一个包括两列

请分享你的想法，为什么一个比另一个更可取。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T10:12:14.340

另一个需要考虑的重点是：复合索引（由多列组成）只有在最左边的 n 列被引用时才会使用（例如，在`WHERE`子句中）。

所以如果你有一个单一的复合索引

```
(UserID, UserName, UserEmail) 
```

那么这个索引*可能*会在以下场景中使用：

*   当您`UserID`单独搜索时（仅使用最左侧的 1 列 - `UserID`）
*   当您搜索`UserID`和时`UserName`（使用最左边的 2 列）
*   当您搜索所有三列时

但是这个单一的复合索引将**永远**无法用于搜索

*   只是- 它是索引中的第二列，因此永远不能使用**该**`UserName`索引
***   只是- 它是索引中的第三列，因此永远不能使用**该**`UserEmail`索引**

 ****请记住这一点 - 仅仅因为列是索引的一部分并不一定意味着该索引将支持和加速单独搜索该单个列！

因此，如果您的使用模式和您的应用程序确实需要单独搜索`UserName`和/或`UserEmail`单独搜索（不提供其他搜索值），那么您**必须**在这些列上创建单独的索引 - 只有一个复合索引**根本**没有任何好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T08:22:21.990

定义索引的最佳方式完全取决于您将如何使用该表。仅通过查看表定义来选择索引是不明智的。

如果您的代码使用用户名搜索您的表或通过用户名将您的表与另一个表连接，那么在该列上定义索引是明智的。如果您的代码使用两列（用户名和用户邮件）将表与另一个表连接起来，那么为这两列定义索引是明智的。由于您的所有列都被定义为唯一的，我几乎不相信会出现这种情况，因此您不需要该表上的多个列索引。

关于使用多列索引可能有一些额外的建议：多列索引也用于部分适合索引但有条件的过滤器。
示例：如果您在用户名和用户邮件上定义一个两列索引（按给定顺序），您将在通过两列（用户名和用户邮件）过滤的搜索中获得性能提升。使用该索引，您还将在仅使用用户名的过滤器中获得性能提升，因为这是索引的第一列，但在通过 usermail 进行搜索时却没有，这是因为不能单独使用索引的第二列。
规则是：索引可用于过滤精确匹配的列或过滤与索引定义中后续顶部列匹配的列子集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T08:27:20.423

> 请分享你的想法，为什么一个比另一个更可取。

这取决于你做什么。

看，索引仅用于“从左到右”。因此，用户 ID 上的索引；如果我选择仅按用户名过滤，用户名将毫无用处。

一般来说，我会在这里假设三个指数：

*   Uniuqe 索引，聚集在 UserID 中，作为主键。
*   用户名的唯一索引，非聚集。
*   UserEMail 上的唯一索引，非集群。

原因完全不是为了性能，而是：

*   您将需要第一个作为外键关系的主键。
*   您需要另外两个来正确处理唯一约束 - 没有索引就无法做到这一点。

此外，您需要灵活地通过 UserName 和 UserEMail 进行搜索，这意味着不能仅将它们组合在一起。

性能确实排在最后——出于性能原因，所有这些索引都可能包含所有附加字段（不是作为索引的一部分，而是作为包含的列。但实际上，除非您允许多个注册，否则没有其他明智的方法可以让这个表工作对于同一个用户。****

# ruby-on-rails - 如何使用has_key？轨道中的方法？

> ID：14037653
> 
> 赞同：1
> 
> 时间：2012-12-26T07:56:30.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想检查一个关键的“测试”是否包含在带有 Rails 的哈希中。我尝试了`has_key?`('test') 方法，但出现以下错误。

> 未定义的方法“has_key？”

如何检查密钥是否包含？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:02:20.083

```
h = {a:1, b:2, c:3}

h.has_key? :a

=>true 
```

这应该在rails中工作。您的代码肯定有另一个问题。请分享。

# c++ - 如何在带有输入的地图元素方法上使用 std::for_each？

> ID：14037656
> 
> 赞同：3
> 
> 时间：2012-12-26T07:56:40.233
> 
> 标签：c++, stl, map

我有：

```
struct Mystruct
{
    void Update(float Delta);
}

typedef std::map<int, Mystruct*> TheMap;
typedef TheMap::iterator         TheMapIt;

TheMap Container; 
```

并想做：

```
for(TheMapIt It = Container.begin(), Ite = Container.end(); It != Ite; ++It)
{
    It->second->Update(Delta);
} 
```

使用`std::for_each`，如何做到这一点？

我想我可以声明如下函数：

```
void Do(const std::pair<int, Mystruct*> Elem)
{
    Elem->Update(/*problem!*/); ---> How to pass Delta in?
} 
```

或者制作另一个结构：

```
struct Doer
{
    Doer(float Delta): d(Delta) {}

    void operator(std::pair<int, Mystruct*> Elem)
    {
        Elem->Update(d);
    }
} 
```

但这需要一个新的结构。

我想要实现的是使用简单`std::for_each`的东西`std::bind_1st`，`std::mem_fun`比如使用的方式`std::vector`，有可能吗？

使用前请考虑使用`std`方式`boost`，谢谢！

我已经引用了这个，但它没有提到带有输入的成员函数...... [我将如何使用 for_each 删除 STL 映射中的每个值？](https://stackoverflow.com/questions/2463528/how-would-i-use-for-each-to-delete-every-value-in-an-stl-map)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T08:22:02.910

这只是编码风格之间的交易，for循环和for_each没有太大区别，下面是除了for循环之外的另外两种方法：

如果您使用 C++11，可以尝试 lambda：

```
std::for_each(TheMap.begin(), TheMap.end(), 
              [](std::pair<int, Mystruct*>& n){ n.second->Update(1.0); }); 
```

或者在 C++03 中，您可以向包装类添加一个成员函数，然后调用`std::bind1st`和`std::mem_fun`

```
struct MapWrapper
{
  MapWrapper(int value=1.0):new_value(value) {}

  void Update(std::pair<int, Mystruct*> map_pair)
  {
    map_pair.second->Update(new_value);
  }
  void setValue(float value) { new_value = value; }
  float new_value;
  std::map<int, Mystruct*> TheMap;
};

MapWrapper wrapper;
wrapper.setvalue(2.0);
std::for_each(wrapper.TheMap.begin(), 
              wrapper.TheMap.end(),std::bind1st(std::mem_fun(&MapWrapper::Update), &wrapper)); 
```

写一个函子不是一个坏的选择，你为什么反对它？函子提供了更好的设计，因为它提供了干净和明确的目的。

```
struct Doer
{
    Doer(float Delta): d(Delta) {}

    void operator()(std::pair<int, Mystruct*> e)
    {
      e.second->Update(d);
    }
    float d;
};
Doer doer(1.0);
std::for_each(wrapper.TheMap.begin(), wrapper.TheMap.end(), doer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T14:40:04.020

只是想指出 lambda 可以用更好的语法编写，您已经通过为地图定义 typedef 开始了这条路。下一步是使用 ValueType，这样您就不必记住映射元素是 std::pairs，也不必写出模板参数。

```
 using namespace std;
 for_each(begin(Container), end(Container), 
          [](TheMap::ValueType& n){ n.second->Update(1.0); }); 
```

更容易阅读，并且可以让您更改一些细节，而不必将这些更改传播到很多不同的地方。

# django - PyDev中文件名的Django视图

> ID：14037663
> 
> 赞同：1
> 
> 时间：2012-12-26T07:57:39.867
> 
> 标签：django, aptana, pydev

快速提问：有时，当我打开两个或多个应用程序的类似文件时，PyDev 会将选项卡名称缩短为“views.py | app1”和“views.py | app2”之类的名称。有时，它只是给了我整个文件路径。有没有办法强制第一个视图？

# openid - 将网站的 Open ID 与现有用户集成

> ID：14037665
> 
> 赞同：2
> 
> 时间：2012-12-26T07:58:11.427
> 
> 标签：openid, connect, accounts

我正在将 Open ID 与已经拥有用户帐户的网站集成。我已经检查了相关的代码文档，到目前为止一切都很简单，现在在我继续实施之前，我想问一下将 Open ID 与现有成员集成的最佳方式是什么。

**我的计划**
我有一个特定的计划，想知道这是否是一个好方法，或者它会在以后造成问题。

说，我有一个存储用户和密码的主表（这是针对现有用户，直接订阅我们的网站而没有打开 id）现在我将创建一个 OpenId 表，它将用户与开放 id 提供者进行一对多映射.

**注意**：如果第一次通过 open id 注册，它总是会在 master user 表中创建一个帐户，然后在 open id 映射表中进行相应的映射。

我要做的是，当用户点击雅虎登录，并在雅虎提供商处进行身份验证并返回我们的网站时，我们的应用程序会弹出一个问题：-

1) 你已经在这个网站上拥有一个帐户了吗？如果是这样，那么会给用户一个选项来登录到站点用户名和密码，如果正确完成，那么它将将该现有用户映射到雅虎，将一条记录插入到打开的 id 表中，将现有用户映射到雅虎，但是在这个场景 我将使用什么元素来唯一标识雅虎帐户？电子邮件？雅虎的用户名？

一个可能的困境出现了，如果用户最初使用 open id 注册说 google 而不是通过正常的登录/注册，我需要让用户通过 google 进行身份验证然后返回然后如果那成功将 yahoo 帐户映射到帐户。将一条记录插入到与 yahoo 映射现有用户的开放 id 映射表中，默认情况下它也已经映射了 google。

2) 新用户？在这种情况下，它将获取用户名/电子邮件，并在主表中使用随机生成的密码创建帐户，并将该用户与 open id 表中的 open id 映射。

这种方法听起来合理吗？如果不是为什么？我还可以通过哪些其他可能的方式集成 open id。

# jasper-reports - 如何设置子报表的背景与主报表相同

> ID：14037668
> 
> 赞同：0
> 
> 时间：2012-12-26T07:58:25.153
> 
> 标签：jasper-reports

我对*JasperReports*有疑问。

我有一个主报告，我在其中设置页眉和页脚带、边距和背景。现在我有多个子报告。我需要在子报告中，背景与主报告中的背景相同，但我无法做到这一点。

如果我不能这样做，我将被迫为我拥有的每个子报告复制粘贴页边距、背景和页眉和页脚。

这可以做到吗？

**编辑：**好的，找到问题了。我将背景图片嵌入到报表中，作为Base64变量，图片表达式为：

```
new java.io.StringBufferInputStream( new org.w3c.tools.codec.Base64Decoder($V{BACKGROUND_IMAGE_STRING}).processString()) 
```

**编辑2**：发现问题。对于每个变量都必须设置评估时间：无，并且值表达式而不是初始值表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:56:39.917

如果您想在报表中使用嵌入图像，您必须确保： 1\. 保存 base64 字符串的变量设置了“值表达式”而不是“初始值表达式” 2\. 重置类型设置为“无”，以避免在报告生成期间多次重置相同的变量

此外，不是将代码放入问题中，StringBufferInputStream 作为图像表达式，而是可以添加一个额外的变量来实例化图像一次，其参数设置与我上面提到的相同。

因此，这将导致： 1 张图像在整个报告生成过程中被多次使用。

# c# - 在 Metro 中，当 QueryOptions 的 FolderDepth 属性设置为 FolderDepth.Shallow 时，ContentsChanged 将被触发两次

> ID：14037670
> 
> 赞同：1
> 
> 时间：2012-12-26T07:58:33.287
> 
> 标签：c#, microsoft-metro, windows-runtime

我已经阅读了有关文件系统更改通知的两篇文章。

[链接 1](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/7934ba5a-f1fd-445d-9f3b-0012801fe0f4) [链接 2](http://lunarfrog.com/blog/2012/10/03/filesystem-change-notifications/)

`QueryOptions.FolderDepth`当我将属性设置为`FolderDepth.Shallow`（对比）时，ContentsChanged 将被触发两次`FolderDepth.Deep`。

在受监视文件夹中创建新文件时，`ContentsChanged`将被触发两次。如果删除文件夹中的一个文件，`ContentsChanged`只会正确触发一次。

这似乎是一个错误。

# c# - 搜索文件到 Ntfs

> ID：14037677
> 
> 赞同：3
> 
> 时间：2012-12-26T07:59:17.737
> 
> 标签：c#, pinvoke

我是 Pinvoke 的新手。当我可以访问目录时，我想在找到 root 后获得 mft。我想使用`DeviceIoControl`如下代码：

```
BOOL DeviceIoControl(
   (HANDLE) hDevice,           // handle to device
   FSCTL_GET_NTFS_VOLUME_DATA, // dwIoControlCode
   NULL,                       // lpInBuffer
   0,                          // nInBufferSize
   (LPVOID) lpOutBuffer,       // output buffer
   (DWORD) nOutBufferSize,     // size of output buffer
   (LPDWORD) lpBytesReturned,  // number of bytes returned
   (LPOVERLAPPED) lpOverlapped // OVERLAPPED structure
   ); 
```

我不知道`FSCTL_GET_NTFS_VOLUME_DATA`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:03:49.947

[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364569.aspx)列为`WinIoCtl.h`相关标题。当我们查看宏声明时，我们看到：

```
#define FSCTL_GET_NTFS_VOLUME_DATA \
    CTL_CODE(FILE_DEVICE_FILE_SYSTEM, 25, METHOD_BUFFERED, FILE_ANY_ACCESS) 
```

这给我们留下了一些工作要做。这样做的懒惰方法是编写一个程序来发出值：

```
#include <Windows.h>
#include <iostream>
#include <iomanip>

int main()
{
    DWORD code = FSCTL_GET_NTFS_VOLUME_DATA;
    std::cout << "0x" << std::hex << std::setfill('0') << std::setw(8) << code;
    return 0;
} 
```

这会输出我们想要的值：

```
0x00090064

```

# ruby-on-rails - 用回形针上传附件后，如何在线查看附件？

> ID：14037678
> 
> 赞同：0
> 
> 时间：2012-12-26T07:59:34.093
> 
> 标签：ruby-on-rails, ruby, paperclip

我用回形针上传了一个附件，可以是从.txt到.cpp的任何格式，我想添加一个功能，就是在线查看这个附件。但我不知道从哪里开始？谁能给我一些帮助？谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:12:16.330

```
<%= link_to image_tag(@result.image.url,:size => "150x180" ) %> 
```

在表演中尝试这种甲酸盐。@result 是您的 => 变量，您的所有数据字段都在其中，图像是字段名称.. 试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:43:54.727

在 Rails 中，应该有一个`Show`页面，一个`Edit`页面。上传附件后，应该在`Edit`页面上完成，重定向到`Show`页面，并显示附件文件，无论是 .txt 还是 .cpp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:59:11.697

尝试这个，

```
<%=link_to  'Show Attachment',@object.file_attribute.url(:original,false), :title=>"Show" %> 
```

# javascript - 在javascript中将指数数转换为整数

> ID：14037684
> 
> 赞同：3
> 
> 时间：2012-12-26T08:00:10.123
> 
> 标签：javascript, math, random

我需要在 url 中使用 23 位数字。我正在使用 Math.random() 生成数字，但我得到指数形式的结果。

我的代码是

```
var id = (Math.random()*11111111111111111111111).toFixed(23); 
```

但我得到了结果`6.286119436349295e+21`

如何将“id”中的随机值存储为整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:14:35.087

JavaScript 可以连续表示 -9007199254740992 和 9007199254740992 之间的整数。它实际上*可以*表示更大（和更小）的整数，但不是全部！实际上，在 9007199254740992 之后的“下一个”整数是 9007199254740994。它们有一段时间是两个，然后变成 4，然后是 8，等等。正如您所注意到的，当它们变得非常大时，它们会以科学计数法显示。即使 的结果`toFixed`也不能保证以仅由数字组成的形式显示。

因此，当您计算 23 位十进制数字范围内的整数时，您将无法使用 JavaScript 的本机`Number`类型（IEEE-754 64 位）来表示其中的一堆。

如果您不关心随机数的特定分布，则`0..9`可以使用字母表上的随机字符串，也可以将较小的整数粘贴在一起，但是如果您*正在*寻找特定的分布，那么您应该（如 Ignacio Vasquez 所建议的那样- Abrams）使用支持任意长度精度的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:02:58.143

JavaScript 数字对此不够精确。您将永远无法获得完整的 23 个随机数字。获得几个较小的数字并将它们作为字符串粘贴在一起会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:10:53.780

将数字分成两部分并将它们组合成一个字符串。

```
var id1 = Math.floor( Math.random() * 10e10 ); // 11 digits
var id2 = Math.floor( Math.random() * 10e11 ); // 12 digits

var id = id1+''+id2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:02:39.417

你不能；它甚至不适合 64 位整数，更不用说 32 位整数了。使用任意长度的整数库。

# php - 找到给定范围内的最高质数

> ID：14037688
> 
> 赞同：0
> 
> 时间：2012-12-26T08:00:32.147
> 
> 标签：php, arrays, primes

我需要找到给定范围内的最高质数。
这是我的代码，适用于 0-100，但如果我给出 0-125，它将显示素数为 125。

```
<?php
    $flag=0;
    $b=125;
    for($i=$b;$i>=0;$i--)
    {
        if($i%2!=0)
        {
            for($b=3;$b<10;$b++)
            {
                if($flag==0)
                {
                    echo('<br>');
                    if($i%$b!=0)
                    {
                        echo('highest prime number is'.$i);
                        $flag=1;
                        break;
                    }
                    elseif ($i%$b==0)
                    {
                        break;
                    }
                }
            }
        }
    }
?> 
```

在上面的代码中，我取的范围是 0-125

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T08:06:16.593

[gmp_nextprime()](http://php.net/manual/en/function.gmp-nextprime.php)

```
<?php
$start = 125;
$stop = 0;
for($x=$start;$x>=$stop;$x--){
    if(($prime = gmp_intval(gmp_nextprime($x)))<$start){
        echo 'The highest prime is '.$prime;
        break;
    }
}?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:37:53.290

> [感谢您的回复 Samuel Cook ..但我需要不使用 'gmp_nextprime()' 函数.. iamgetting 消息 'Call to undefined function gmp_intval() in C:\wamp\www\highprime.php on line 5' – user1659450 16 mins前](https://stackoverflow.com/questions/14037688/find-the-highest-prime-number-in-a-given-range#comment19392983_14037733)

由于您很难`gmp functions`上班，因此您可以使用

**示例 1：无 GMP 功能**

```
$range = range(125, 0); // create the range
foreach ( $range as $v ) {
    if (isPrime($v)) {
        printf('highest prime number is %d', $v);
        break;
    }
} 
```

如果您能够使 gmp 正常工作，那么您可以使用`gmp_prob_prime` Function Used

**示例 1：使用 gmp 函数**

```
foreach ( $range as $v ) {
    if (gmp_prob_prime($v) == 2) {
        printf('highest prime number is %d', $v);
        break;
    }
} 
```

**输出**

```
highest prime number is 113 
```

**使用的功能**

```
function isPrime($num) {
    if ($num == 1)
        return false;

    if ($num == 2)
        return true;

    if ($num % 2 == 0) {
        return false;
    }

    for($i = 3; $i <= ceil(sqrt($num)); $i = $i + 2) {
        if ($num % $i == 0)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:30:06.740

是的，问题是算法...

1）在这种情况下，您需要检查到`sqrt($b)`即 11

2）`$flag`逻辑有点混乱，没有用改变标志然后突然爆发......

```
<?php
        $flag=0;
        $b=125;
        $sq=sqrt($b); 

        for($i=$b;$i>=0;$i--)
        {

            if($i%2!=0)
            {
                    for($b=3;$b<=$sq;$b++)
                    {
                            if($i%$b!=0)
                            {
                                $flag=1;
                            }
                            elseif($i%$b==0)
                            {
                                $flag=0;
                                break;
                            }
                    }
            if($flag==1){ 
                echo('highest prime number is '.$i);  
                break;
            }
        }
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:16:50.823

您可以使用的最简单的方法是将一个从 3 开始的数字除以一个由 2 填充的数组，如果模数 (%) 给出的答案不是 0，则它是质数。然后在你得到一个工作代码之后，想想我能做什么更好？

*   你可以说我想忽略偶数！那么为什么要迭代呢？只需使用 i = i + 2 （并从使用 3 作为种子素数开始）
*   我除数太多了！你真的需要检查 21%11, 21%13, 21%17, 21%19 吗？它们总是小于 2，所以让我们忽略 > 一半的素数
*   优化更多？在您的代码中限制使用根作为最大值会如何影响它？为什么？
*   甚至更多？为什么我不能事先消除所有非素数并检查剩下的？

尝试将这些应用到您的代码上，或者只是谷歌一个工作版本。

# php - 错误：请求此资源时需要用户访问令牌，同时尝试在用户供稿中发帖

> ID：14037690
> 
> 赞同：1
> 
> 时间：2012-12-26T08:00:51.000
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk

**问题- 1**

我想在用户的墙上发帖，但有时我会收到：*请求此资源需要用户访问令牌。*

这是我做的：

```
$access_token = $facebook->getAccessToken();
$facebook->setAccessToken($access_token);

$params = array(
                'access_token'  =>  $access_token,
                'link'          =>  "http://www.facebook.com/PaginaRomanilor?sk=app_".APP_ID,
                'message'       =>  $caption." - Amuză-ți și tu prietenii cu aplicația întrebări pentru prieteni.",
                'name'          =>  $caption,
                'description'   =>  'Răspuns: '.ucfirst($raspuns).'. '.$mesaj,
                'caption'       =>  'TS',
                'picture'       =>  LINK."images/".$raspuns.".png",
                'tags'          => $friendpost['uid'],
                'place'         => 155021662189
            );

        if(!($sendMessage = $facebook->api('/me/feed/','post',$params))){
            $errors= error_get_last();
            echo "Facebook publish error: ".$errors['type'];
            echo "<br />\n".$errors['message'];
        } 
```

当我个人使用该应用程序时，我没有收到错误消息，只有部分用户会收到错误消息。

**问题2**

在链接中，我提供了指向我的页面的链接。标题被忽略并被*Page: 7,726 取代，就像这样。*

但我想在那篇文章中给出定制的标题。

**更新：**

用户访问令牌错误不是来自这部分代码，而是来自选择朋友数据库，所以我在那里解决了，我现在遇到的问题是我的自定义标题被禁用并替换为来自链接的页面之类的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:14:16.177

当用户登录您的应用程序并授权它执行特定任务时，您将获得一个用户访问令牌。您还可以像这样要求扩展访问令牌：-

```
$facebook->setExtendedAccessToken(); 
```

在用户缺席时代表用户完成任务。

至于您的第二个问题，关于 Facebook 如何解析传递给它的链接存在一些特殊问题。每当它是来自 Facebook 域的 URL 时，它都会覆盖一些参数，禁用一些参数并添加一些值。页面选项卡应用程序链接就是这种情况，该链接从它们所在的页面获取点赞数。

虽然有一种方法可以让您获得自己喜欢的结果，但它是使用任何 URL 缩短服务（如[bit.ly ）来缩短 URL](https://bitly.com/)

# ember.js - Emberjs：将数据加载到控制器中的首选方式是什么？

> ID：14037697
> 
> 赞同：2
> 
> 时间：2012-12-26T08:02:03.447
> 
> 标签：ember.js, ember-data

我可以想到4个选项：

1）在路由器中：

```
connectOutlets: function(router) {
    router.get('applicationController').connectOutlet(outlet, controller/view, router.get('store').findAll(Model);
} 
```

这将在每次调用时调用`connectOutlet`findAll

2）在控制器的初始化中：

```
App.MyController = Ember.ArrayController.extend({
    init: function() {
        this._super();
        this.set('content', App.router.get('store').findAll(Model));
    }
}); 
```

这将仅在第一次实例化控制器时调用 findAll。

3）直接分配给控制器的内容：

```
App.MyController = Ember.ArrayController.extend({
    content: App.router.get('store').findall(Model)
}); 
```

这也只会在第一次实例化控制器时调用 findAll ，但是如果我这样做，我会收到一个错误 -`Uncaught TypeError: Cannot call method 'get' of undefined`所以路由器可能还没有被实例化。

4) 从路由器调用控制器的函数来分配数据：

```
connectOutlets: function(router) {
    router.get('applicationController').connectOutlet(outlet, controller/view, router.get('store').findAll(Model);
    router.get('myController').getData();
}

App.MyController = Ember.ArrayController.extend({
    getData: function() {
        this.set('content', App.router.get('store').findAll(Model));
    }
}); 
```

与第一个选项相同的评论。

我的问题是，在控制器中分配数据的首选方式或“Ember 方式”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:43:45.047

我很有信心说选项 1 是 Ember 方式。

```
connectOutlets: function(router) {
  router.get('applicationController').connectOutlet(outlet, Model.find());
} 
```

2 和 3 的问题是，您不希望在默认情况下在控制器初始化时加载数据，因为这会使数据的延迟加载/分页变得困难。

听起来您的主要问题是`findAll`每次进入路线时的呼叫。但是，如果您使用的是`DS.RESTAdapter`或类似的，这不是问题，因为身份映射将捕获第二次调用，因此服务器只会在第一次被查询。

# mysql - 如何使用 mysql workbench 将文本文件中的数据导入 mysql 数据库？

> ID：14037704
> 
> 赞同：0
> 
> 时间：2012-12-26T08:02:46.780
> 
> 标签：mysql, import

除了“LOCAL DATA INFILE”还有什么方法可以将数据导入Mysql数据库。我很有趣 mYsql 工作台。有没有办法使用工作台导入数据。让我知道比使用 LOCAL DATA INFILE 更容易的任何其他方式。

感谢广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:23:41.947

MySQL Workbench 目前不支持加载 CSV 或其他数据文件。

但是，如果您有数据库转储，则可以通过工作台导入。在主屏幕上，请参阅“管理导入/导出”。

其他方法可能是“加载数据文件”查询或使用 mysqlimport.exe

# maven - Maven不同的输出与不同的版本

> ID：14037705
> 
> 赞同：2
> 
> 时间：2012-12-26T08:02:55.540
> 
> 标签：maven, version

我关心的部分`pom.xml`是

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>servlet-api</artifactId>
        <version>6.0.14</version>
    </dependency> 
```

maven 程序集插件用于构建，它还将一些 shell 脚本复制到目标文件夹。我能够成功地构建它，所有文件都被复制到目标目录中的适当位置，并使用 maven 版本`Apache Maven 2.1.0 (r755702; 2009-03-19 00:40:27+0530)`。我验证了两次。

### 问题

我们的团队使用 Jenkins 服务器来构建它以进行发布，它使用`Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100)`. 基于此的构建也以`Build Successfull`消息退出，并创建主项目 jar。但是上述`servlet api`jar 和 shell 脚本没有被复制到所需的位置。

那么，我需要在这里进行什么更改，以便文件在获取时被复制`2.1.0`？
有谁知道这两个版本的maven在这方面有什么区别，即`2.1.0`和`2.2.1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:33:14.620

从我这边解决了这个愚蠢的错误。

我忽略了jenkins的全局配置。jenkins 正在执行的目标是`clean install`，应该是`assembly:assembly`，结果是按预期构建。

保持这篇文章原样，将来可能会有其他 mtk 再次出现相同的查询；）

# objective-c - 使用 CGImageDestination 从 NSImage 获取数据并将 BMP 数据写入 NSData，但我最终错过了我的 alpha 通道

> ID：14037707
> 
> 赞同：1
> 
> 时间：2012-12-26T08:03:00.010
> 
> 标签：objective-c, cocoa, bitmap, core-graphics

我正在尝试从一个对象中获取数据`NSImage`并将其作为 RGBA（每通道 8 位）的 32 位 BMP 数据写出`NSData`。这是我的代码：

```
- (NSData *)dataRepresentation {
    NSImage *textureImage = self.textureImage;
    NSSize size = [textureImage size];
    NSImageRep *imageRep = [[textureImage representations] objectAtIndex:0];
    NSRect rect = NSMakeRect(0, 0, size.width, size.height);

    CGImageRef outputImage = [imageRep CGImageForProposedRect:&rect context:NULL hints:nil];
    CFMutableDataRef textureData = CFDataCreateMutable(kCFAllocatorDefault, size.width*size.height*4+54);
    CGImageDestinationRef imageDestination = CGImageDestinationCreateWithData(textureData, kUTTypeBMP, 1, NULL);

    CFStringRef keys[1] = {kCGImagePropertyHasAlpha};
    CFBooleanRef values[1] = {kCFBooleanTrue};
    CFDictionaryRef options = CFDictionaryCreate(kCFAllocatorDefault, (const void **)keys, (const void **)values, 1, NULL, NULL);

    CGImageDestinationAddImage(imageDestination, outputImage, options);
    CFRelease(options);
    CGImageDestinationFinalize(imageDestination);
    CFRelease(imageDestination);
    return (NSData *)CFBridgingRelease(textureData);
} 
```

结果数据缺少 Alpha 通道。它正确地每个组件有 8 位，但完全缺少 alpha 通道。我认为带有`kCGImagePropertyHasAlpha`属性的选项字典可以解决它，但它没有。无论如何，我不确定这是否真的是正确的方法，有人可以在这里指出我正确的方向吗？

# php - 是否有我想要实现的本机功能？

> ID：14037710
> 
> 赞同：2
> 
> 时间：2012-12-26T08:03:27.753
> 
> 标签：php, arrays, function

我写了一个似乎是一项常见任务的函数，我一直在查看 php 文档，但找不到这个函数

```
/**
 * Move certain key/values from an array to a new one
 * @param array $array the original array
 * @param array $keys
 * @return $array
 */
function array_rip(array &$array, array $keys){
    $new = array();
    foreach($keys as $key){
        if(isset($array[$key])){
            $new[$key] = $array[$key];
            unset($array[$key]);
        }
    }
    return $new;
} 
```

是否已经有这样的功能而我只是错过了显而易见的功能？

这是行为

```
<?php
$a = array('color'=>'green', 'fruit'=>'apple','item_id'=>33,'owner_id'=>420);
$b = array_rip($a,array('owner_id','item_id'));

print_r($a);
print_r($b);
?> 
```

上面的示例将输出：

```
Array
(
    [color] => green
    [fruit] => apple
)

Array
(
    [owner_id]  => 420
    [item_id]  => 33
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:30:17.127

你可以把它缩短到这个；我不认为它会更有效率。

```
function array_rip(array &$array, array $keys)
{
  $new = array_intersect_key($array, array_flip($keys));
  $array = array_diff($array, $new);
  return $new;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:34:51.140

如果您像@Artem L 建议的那样使用数组翻转功能，您可以实现您想要的，但它需要一点额外的处理时间，因为它调用 array_flip 3 次来实现您想要的。

array_combine 不能满足您的需要。

array_rip 在 php 中不可用。所以我建议你为你的函数准备好算法，即逻辑。在您的项目中创建 functions.php 并将您的函数添加到此文件中。在你的代码中包含这个文件，然后你就可以使用这个函数了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:12:23.060

尝试使用[array_combine()](http://php.net/manual/en/function.array-combine.php)。

```
$array = array_combine(array_keys($array1), array_values($array2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:08:27.877

如果您使用的是 PHP 5.1.0 或更高版本，则可以使用[array_intersect_key()](http://php.net/manual/en/function.array-intersect-key.php)，如以下代码所示。

```
function array_rip(array &$array, array $keys) {
  $result = array_intersect_key($array, array_flip($keys));
  $array = array_diff($array, $result);

  return $result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T08:22:05.157

没有这样的功能，但是您可以使用以下代码来实现您正在尝试的功能

```
$arr1 = array('one' => 'one_v', 'two' => 'two_v', 'three' => 'three_v');
$arr2 = array('one', 'three');

// flip, so keys become values
$arr1_flipped = array_flip($arr1);

array_flip(array_diff($arr1_flipped, $arr2)); // returns Array([two] => two_v)

array_flip(array_intersect($arr1_flipped, $arr2)) // returns Array ([one] => one_v  [three] => three_v) 
```

# java - Selenium 套件在运行时失败并显示错误消息“Liastener interface org.testng.ITestListener must be one of ITestListener ...”

> ID：14037711
> 
> 赞同：0
> 
> 时间：2012-12-26T08:03:32.497
> 
> 标签：java, selenium, listener, testng

我正在尝试将 retryAnalyzer 和侦听器添加到我的测试框架中，以在失败时重试测试。

在我的套件运行时出现以下错误：“侦听器接口 org.testng.ITestListener 必须是 ITestListener、ISuiteListener、IReporter、IAnnotationTransformer、IMethodInterceptor 或 IInvokedMethodListener 之一”。由于 ITestListener 在“...之一”的列表中，因此我无法找到我弄错的地方。

每个 testNG 类都有

```
@Test(retryAnalyzer=RetryAnalyzer.class)
@Listeners({test.base.RetryTestListener.class}) 
```

套房有

```
<listeners>
    <listener class-name="test.base.RetryTestListener" />
  </listeners> 
```

在 RetryTestListener 我覆盖 onTestSuccess 和 onTestFailure 方法：

```
public class RetryTestListener extends TestListenerAdapter  {
private int count = 0; 
private int maxCount = 3; 
@Override
public void onTestFailure(ITestResult result) {     
    if(result.getMethod().getRetryAnalyzer().retry(result)) {    
        count++;
        result.setStatus(ITestResult.SKIP);
    }else{count = 0;}
    Reporter.setCurrentTestResult(null);
}
@Override
public void onTestSuccess(ITestResult result)
{count = 0;} 
```

TestListenerAdapter 的声明和实现的接口是：

```
public class TestListenerAdapter implements IResultListener2 
```

IResultListener2：

```
public interface IResultListener2 extends IResultListener, IConfigurationListener2 { 
```

IResultListener：

```
public interface IResultListener extends ITestListener, IConfigurationListener { 
```

也许有人曾经遇到过这样的错误信息。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:19:35.537

该错误表明您定义的侦听器未实现 testng 公开的任何侦听器接口。它必须实现要添加到侦听器的上述侦听器之一。

您可以在测试中指定实现类，就像在 @Test 注释中所做的那样。

# c++ - 与编译器相比，为什么在发生错误时调试器更加具体？

> ID：14037712
> 
> 赞同：0
> 
> 时间：2012-12-26T08:03:41.060
> 
> 标签：c++, debugging, compiler-construction, interpreter

来自**C++ 中的思考 - 卷。1**：

> 口译员有很多优点。从编写代码到执行代码的转变几乎是立即的，源代码始终可用***，因此当发生错误时解释器可以更加具体***。

解释器总是直接在源代码上工作（在将它逐行翻译成机器代码之后），因此可能是它在发生错误时可以更加具体的原因。

来自：[说源代码始终可供解释器使用是什么意思？](https://stackoverflow.com/questions/14037090/what-does-it-mean-to-say-that-the-source-code-is-always-available-to-interpreter/14037160#comment19392261_14037160)

> 速度是使用解释器的标准之一。是的，发生错误时可以直接参考源代码。***但是当运行时运行编译后的代码时，它不能引用发生错误的确切行。***

现在，调试器呢？
GDB 处理编译器产生的输出，所以这里 GCC 和 GDB 有相同的文件可以处理。

**与编译器相比，为什么 GDB 能够在准确的行（在运行时）上显示准确的错误？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:13:12.967

> 与编译器相比，为什么 GDB 能够在准确的行（在运行时）上显示准确的错误？

这是两个具有不同目的的不同软件。首先你应该明白这一点。

> 所以这里 GCC 和 GDB 有相同的文件可以处理

不完全是，Debugger 需要在编译期间生成更多文件。（称为符号）。这些符号是编译代码和源代码之间的桥梁。

我不太确定 GCC，但它应该有`debug`和`release`构建选项。在调试模式下编译时，默认情况下会生成帮助 GDB 调试的符号。但在发布模式下，默认符号不会生成，GDB 无法调试发布版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:54:10.343

我们`GDB`可以`-g`选择构建用于调试目的的代码。当使用`-g`选项构建代码时，将关联一个符号故事`exe`以帮助`gdb`获取变量和函数的位置信息。当你运行时`gdb`，这个符号表将有助于`gdb`了解代码的行号。如果你想知道你`exe`是否有符号表，试试这个命令 -`file <exe>` 这个命令会给你信息你是否`exe`有符号表。如果您`exe`有符号表，则此命令的结果将包含 ----- 未剥离的关键字。

此外，如果您尝试`gdb`在`exe`没有符号表信息的情况下附加，则会`gdb`警告您无法找到符号表并且无法附加`exe`。`gdb`

当您附加到`exe`with `gdb`- 时，您需要键入`run`命令来运行`exe`. 希望这可以帮助。

# sql-server-2008 - Red Gate SQL 比较的键盘快捷键

> ID：14037713
> 
> 赞同：0
> 
> 时间：2012-12-26T08:04:06.160
> 
> 标签：sql-server-2008, redgate, sqlcompare

在 Red Gate SQL compare 中是否有任何键盘快捷键可以从我们必须勾选的窗格移动到显示实际差异的窗格，以便我可以向下滚动以查看差异。

就像如果差异很明显，那么我只需用空格标记更改，然后使用向下键移动到下一个。但是，如果下部窗格中的更改被隐藏并且必须滚动，那么有没有办法只使用键盘来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:53:23.597

我正在使用的版本 (10.3.1.140) 具有用于设置差异预览高度的键盘快捷键。

`Ctrl`+`PgUp`将预览设置为最大尺寸。

`Ctrl`+`PgDn`折叠预览。

`Ctrl`+`Home`将预览设置为半高。

我通常做的是保持预览窗格折叠，然后（如果我想检查差异）点击`Ctrl`+`PgUp`以尽可能多地查看脚本，然后使用`Ctrl`+再次折叠预览`PgDn`。

# c# - 在返回错误号上抛出异常（C#）

> ID：14037715
> 
> 赞同：0
> 
> 时间：2012-12-26T08:04:08.960
> 
> 标签：c#, .net, exception-handling

NEW WAY（异常抛出）与 OLD WAY（错误号）的优缺点是什么。

我总是听到老一代程序员说返回的错误号更加健壮和可控，而在调试时抛出异常则很好。

哪一个是更好的编程实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:18:58.473

异常为您提供了更多上下文信息，例如堆栈跟踪，这对于在开发过程中诊断问题以及在生产系统中记录异常详细信息时很有用。

没有理由不使用这两种方法。您可以使用错误代码属性定义自己的异常类型，也可以编写包装器从[数据集合](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)中提取错误号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:08:42.107

当您使用异常时，您可以跟踪产生异常的执行路径，因此这非常适合调试，并且现代编程语言具有一些功能（如try/catch块）来处理异常，所有这些都适合调试.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:20:35.390

在 java 或 c# 中使用错误返回代码（其中使用异常是一种选择）将创建错误代码。

这将混合两种不同的东西，错误处理和正常流程。

不要使用返回值来表示错误状态，这是不好的做法，不好的风格，在现代编程语言中只是简单的愚蠢。

如果有人觉得有必要对此进行辩论，请通过示例或参考文献来进行辩论，而不仅仅是断言。

# sockets - Java 套接字服务器不能与 Ruby EventMachine 客户端一起工作

> ID：14037716
> 
> 赞同：1
> 
> 时间：2012-12-26T08:04:19.087
> 
> 标签：sockets, eventmachine

我有一个非常简单的 Java Socket 服务器，如下所示：

```
public class NatsServer3 {
    public static void main(String[] args) throws IOException
       {
        ServerSocket serverSocket = null;

        try {
            serverSocket = new ServerSocket(10000);
            }
        catch (IOException e)
            {
            System.err.println("Could not listen on port: 10000.");
             System.exit(1);
            }

        Socket clientSocket = null;
        System.out.println ("Waiting for connection.....");

        try {
             clientSocket = serverSocket.accept();
            }
        catch (IOException e)
            {
             System.err.println("Accept failed.");
             System.exit(1);
            }

        System.out.println ("Connection successful");
        System.out.println ("Waiting for input.....");

        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(),
                                          true);
        BufferedReader in = new BufferedReader(
                new InputStreamReader( clientSocket.getInputStream()));

        String inputLine;

        while ((inputLine = in.readLine()) != null) {
            System.out.println("From client: " + inputLine);
            // out.println(inputLine);

            if (inputLine.equals("Bye.")) {
                break;
            } else if (inputLine.equals("PING")) {
                System.out.println("Sending PONG");
                out.println("PONG \r\n");
            } else if (inputLine.contains("CONNECT")) {
                System.out.println("Sending +OK");
                out.println("+OK\r\n");
            } else {
                System.out.println("Sending back");
                out.println(inputLine);
            }
        }
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
       }
} 
```

我想使用基于 EventMachine 的客户端连接此服务器：

```
require 'eventmachine'

class Echo < EM::Connection
  attr_reader :queue

  def initialize(q)
    @queue = q

    cb = Proc.new do |msg|
      send_data(msg)
      q.pop &cb
    end

    q.pop &cb
  end

  def post_init
    # send_data('Hello')
  end

  def receive_data(data)
    p data
  end
end

class KeyboardHandler < EM::Connection
  include EM::Protocols::LineText2

  attr_reader :queue

  def initialize(q)
    @queue = q
  end

  def receive_line(data)
    @queue.push(data)
  end
end

EM.run {
  q = EM::Queue.new
  # hit Control + C to stop
  Signal.trap("INT") { EventMachine.stop }
  Signal.trap("TERM") { EventMachine.stop }
  EM.connect('127.0.0.1', 10000, Echo, q)
  EM.open_keyboard(KeyboardHandler, q)
} 
```

所以问题是我可以远程登录服务器并输入单词并很好地看到服务器的响应，但是当我使用我的 EM 客户端时，发生了一些奇怪的事情：我依次输入了两个单词 hello1 hello2

仅当我使用 Ctrl+C 停止 EM 客户端时，服务器端没有任何反应，然后服务器输入：“hello1hello2”。

任何人都可以给我一些提示？

# spring - Spring Roo multimodule.roo 无法编译：无法解析本地工件

> ID：14037720
> 
> 赞同：0
> 
> 时间：2012-12-26T08:04:37.697
> 
> 标签：spring, jakarta-ee, spring-mvc, spring-roo

我已经使用 spring roo 1.2.3 提供的 multimodule.roo 建立了一个项目。

但是，当我运行“mvn tomcat:run”时，会出现以下错误：

```
[INFO] Scanning for projects...
[INFO] Reactor build order: 
[INFO]   core
[INFO]   mvc
[INFO]   ui
[INFO]   petclinic
[INFO] Searching repository for plugin with prefix: 'tomcat'.
[INFO] ------------------------------------------------------------------------
[INFO] Building core
[INFO]    task-segment: [tomcat:run]
[INFO] ------------------------------------------------------------------------
[INFO] Preparing tomcat:run
[INFO] [aspectj:compile {execution: default}]
[WARNING] advice defined in org.springframework.mock.staticmock.AnnotationDrivenStaticEntityMockingControl has not been applied [Xlint:adviceDidNotMatch]
[WARNING] advice defined in org.springframework.mock.staticmock.AbstractMethodMockingControl has not been applied [Xlint:adviceDidNotMatch]
[WARNING] advice defined in org.springframework.scheduling.aspectj.AbstractAsyncExecutionAspect has not been applied [Xlint:adviceDidNotMatch]
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [tomcat:run {execution: default-cli}]
[INFO] Skipping non-war project
[INFO] ------------------------------------------------------------------------
[INFO] Building mvc
[INFO]    task-segment: [tomcat:run]
[INFO] ------------------------------------------------------------------------
[INFO] Preparing tomcat:run
[INFO] snapshot com.example.petclinic:core:0.1.0.BUILD-SNAPSHOT: checking for updates from spring-maven-release
[INFO] snapshot com.example.petclinic:core:0.1.0.BUILD-SNAPSHOT: checking for updates from spring-maven-milestone
[INFO] snapshot com.example.petclinic:core:0.1.0.BUILD-SNAPSHOT: checking for updates from spring-roo-repository
Downloading: http://maven.springframework.org/release/com/example/petclinic/core/0.1.0.BUILD-SNAPSHOT/core-0.1.0.BUILD-SNAPSHOT.jar
[INFO] Unable to find resource 'com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT' in repository spring-maven-release (http://maven.springframework.org/release)
Downloading: http://maven.springframework.org/milestone/com/example/petclinic/core/0.1.0.BUILD-SNAPSHOT/core-0.1.0.BUILD-SNAPSHOT.jar
[INFO] Unable to find resource 'com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT' in repository spring-maven-milestone (http://maven.springframework.org/milestone)
Downloading: http://spring-roo-repository.springsource.org/release/com/example/petclinic/core/0.1.0.BUILD-SNAPSHOT/core-0.1.0.BUILD-SNAPSHOT.jar
[INFO] Unable to find resource 'com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT' in repository spring-roo-repository (http://spring-roo-repository.springsource.org/release)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.

Missing:
----------
1) com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT

  Try downloading the file manually from the project website.

  Then, install it using the command: 
      mvn install:install-file -DgroupId=com.example.petclinic -DartifactId=core -Dversion=0.1.0.BUILD-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file

  Alternatively, if you host your own repository you can deploy the file there: 
      mvn deploy:deploy-file -DgroupId=com.example.petclinic -DartifactId=core -Dversion=0.1.0.BUILD-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

  Path to dependency: 
    1) com.example.petclinic.ui.mvc:mvc:war:0.1.0.BUILD-SNAPSHOT
    2) com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT

----------
1 required artifact is missing.

for artifact: 
  com.example.petclinic.ui.mvc:mvc:war:0.1.0.BUILD-SNAPSHOT

from the specified remote repositories:
  spring-maven-milestone (http://maven.springframework.org/milestone),
  central (http://repo1.maven.org/maven2),
  spring-roo-repository (http://spring-roo-repository.springsource.org/release),
  spring-maven-release (http://maven.springframework.org/release)

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 15 seconds
[INFO] Finished at: Wed Dec 26 13:43:06 BDT 2012
[INFO] Final Memory: 36M/286M
[INFO] ------------------------------------------------------------------------ 
```

这是我的根 pom.xml 的一部分

```
<modules>
        <module>core</module>
    <module>ui</module>
    </modules> 
```

现在，在 ui 模块中，还有另一个名为 mvc 的模块，其 pom.xml 包含：

```
<dependency>
            <groupId>com.example.petclinic</groupId>
            <artifactId>core</artifactId>
            <version>0.1.0.BUILD-SNAPSHOT</version>
        </dependency> 
```

核心模块的包装是jar。

现在，据我了解，Maven 正试图在偏远地区定位本地工件“核心”。这就是为什么它得到这个错误。

如何防止 maven 在偏远地区搜索这个本地工件？还是我遇到了其他问题？

**RE：我找到了一篇很棒的博客文章，我的问题似乎已经消失了**

请看一下这个链接：

[关联](http://www.brainwreckage.com/2012/03/project-synchronization-problems-with.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T09:17:54.240

尝试通过运行 mvc 模块时遇到同样的错误

```
mvn jetty:run 
```

我得到的错误是

> 找不到工件 com.example.petclinic:core:jar:0.1.0.BUILD-SNAPSHOT

问题是我没有在我的 Maven 存储库中安装工件*核心。*所以我回到了项目根目录和一个简单的

```
mvn install 
```

安装了工件。

之后，我能够启动码头服务器。

# java - Java NIO read() 流结束

> ID：14037721
> 
> 赞同：2
> 
> 时间：2012-12-26T08:04:42.387
> 
> 标签：java, nio, socketchannel

我正在使用 Java NIO 在我的服务器中接受、读取和写入。

在[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html#read%28java.nio.ByteBuffer%29)中它说该`SocketChannel.read()`函数将返回从套接字读取的字节数，如果到达流的末尾则返回-1。

现在 - 我真的不明白是什么`"End Of Stream"`意思？它和`borken pipe`错误一样吗？

这是否意味着双方的连接都丢失了，我应该关闭 SocketChannel ？

如果有人可以对此进行更多解释，我会非常满意-并给出一些根据它正确使用和行为的示例..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:25:13.457

End Of Stream 意味着没有更多可读取的内容，因为另一端已关闭流。

值`0`不是没有，它是零。

如果连接意外丢失，您将收到异常。即另一端没有优雅地关闭连接。

# backbone.js - 大型应用程序的最佳主干.js 和 require.js 样板

> ID：14037727
> 
> 赞同：2
> 
> 时间：2012-12-26T08:05:14.067
> 
> 标签：backbone.js, boilerplate

我正在为我的应用程序寻找一个好的backbone.js + require.js 样板，因为这将使我很好地了解如何模块化我的代码并让我开始。我正在使用backbone.js-AMD-Boilerplate（[链接](https://github.com/david0178418/BackboneJS-AMD-Boilerplate)），但我不确定是否有比这更好的样板。我不想让自己更多地沉迷于任何其他加载器或框架，以使我的项目保持简单。我刚开始，所以我只关注backbone.js 和require.js（text.js 来加载我的html 模板）。需要你对这个 guyz thnx 的意见

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:28:16.913

这似乎是最流行的[主干样板](https://github.com/tbranyen/backbone-boilerplate)...

关于 requirejs，您可能会重新考虑不要使用任何模块加载器，直到您的应用程序超过其初始阶段并且您确实有很多模块 - 以这种方式开发/调试要容易得多，并且稍后添加模块加载器并不困难当您避免使用全局变量并将模块封装在`function () { ... your module ... }`.

这只是我的个人观点，可能不会被那些忘记了你刚开始使用模块加载器时的情况的人支持；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T12:27:48.720

在这里，您可以找到更全面的解决方案，其中包含最新的依赖项、最新的错误修复和有用的示例。

(Backbone + CoffeeScript + Browserify + SASS/SCSS + Image-min + Jasmine) x Grunt

[https://github.com/antarasi/backbone-boilerplate](https://github.com/antarasi/backbone-boilerplate)

# phpmyadmin - 如何将 phpMyAdmin 徽标更改为我自己的徽标？

> ID：14037729
> 
> 赞同：1
> 
> 时间：2012-12-26T08:05:32.900
> 
> 标签：phpmyadmin

任何人都可以告诉我如何将 phpMyAdmin 徽标更改为我自己的徽标吗？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T08:51:06.757

如果您不想重写*phpmyadmin*映像并且可以访问*httpd.conf*文件，请按照以下方法操作。

将以下代码行附加到*httpd.conf*：

```
redirect /phpmyadmin/themes/original/img/logo_right.png /mypath/mylog.png 
```

然后重新启动网络服务器。

或者，如果要替换图像，只需找出`phpmyadmin`目录即可。在 Ubuntu 中，配置文件*/etc/apache2/conf.d/phpmyadmin.conf*包含*phpmyadmin*的位置：

```
Alias /phpmyadmin /usr/share/phpmyadmin 
```

这里的位置是*/usr/share/phpmyadmin*。所以标志文件是*/usr/share/phpmyadmin/themes/original/img/logo_right.png*

# c++ - 我需要在 C++ 中同步原语吗

> ID：14037730
> 
> 赞同：3
> 
> 时间：2012-12-26T08:05:35.037
> 
> 标签：c++, synchronization, primitive, concurrent-programming

我的班级中有一个 volatile bool 'play' 标志，该标志由一个线程设置并由另一个线程读取。

我是否需要将调用同步到该标志？例如在这个函数中：

```
void stop() 
{
   play = false;
} 
```

在 Windows 中他们有 _InterlockedExchange 而 OSX 有 OSAtomicAdd64Barrier，我已经看到这些函数与共享原语一起使用，我需要它们吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:10:45.860

是的，并且`volatile`绝不意味着线程安全或原子。如果可以，请使用`std::mutex`等，而不是平台细节。是不错的选择——在这种情况下可能是最好的。`std::unique_lock``std::atomic`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:33:31.193

依靠：

如果您使用的是具有总存储顺序内存模型（例如 x86 / x64）的 CPU 或任何只有 1 个 CPU 内核的机器，那么您的问题的答案是否定的，因为您声明只有 1 个线程写入标志，并且无论如何，屏障指令可能在 x86 上被优化掉了。如果您在具有宽松内存模型的 CPU 上编译相同的代码，那么情况会发生变化，然后您可能会发现在 x86 上完美运行的代码如果您在 ARM 上编译和运行它会产生一些奇怪且难以重现的错误或 PPC 例如

该`volatile`指令防止写入被缓存在某处，并且可能意味着读取线程比`volatile`指令不存在时更快地看到写入。是否要使用这个取决于这个间隔有多重要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:35:46.717

这取决于线程之间是否有任何*其他*数据共享。线程的问题是，一个线程可能会以与最初创建它们的线程不同的顺序看到来自不同线程的写入。在这种情况下，您需要使用某种 _Interlocked*/Atomic 函数或锁（在两个线程中），他们保证在标志之前所做的所有更改对另一个线程可见。

如果没有其他共享数据（或只有只读共享数据），或者您在 x86 上运行，使用 just`volatile`也应该可以。然而，它的工作在某种意义上只是偶然的，并且没有任何标准保证，所以如果你的平台支持它，仍然建议使用某种形式的原子/互锁/等。将来（即一旦有良好的编译器支持）您应该使用 C++11 `std::atomcic`，因为它可以在平台之间移植。

您不应该使用裸非易失性变量，如果这样做，编译器可能会决定优化检查。`volatile`正如 camelccc 所暗示的那样，与缓存几乎没有关系。

# c++ - c ++ memcpy从char数组到整数

> ID：14037734
> 
> 赞同：-2
> 
> 时间：2012-12-26T08:06:19.370
> 
> 标签：c++

我正在尝试`memcpy()`从 a`charArray`到整数变量。复制已完成，但在尝试打印复制的值时，会打印一些垃圾。按照我的代码。

填充有什么问题吗？

```
#include <iostream>
#include "string.h"

using namespace std;

int main()
{
    char *tempChar;
    string inputString;
    int tempInt = 3;

    cout << "enter an integer number" << endl;
    cin >> inputString;
    tempChar = new char[strlen(inputString.c_str())];   
    strcpy(tempChar, inputString.c_str());  
    memcpy(&tempInt, tempChar, sizeof(int));
    cout << endl;
    cout << "tempChar:" << tempChar << endl;
    cout << "tempInt:" << tempInt << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:08:09.650

是的：你搞砸了记忆。

使用：`stoi()`将 std::string 转换为整数：

```
int tempInt(stoi(inputString)); 
```

完整示例：

```
#include <cstdlib>
#include <iostream>
#include <string>

int main() {

   std::string tmpString;
   std::cin >> tmpString;

   int const tmpInt(stoi(tmpString));

   std::cout << tmpInt << std::endl;

  return 0;
} 
```

# html - 横向打印html表格

> ID：14037737
> 
> 赞同：1
> 
> 时间：2012-12-26T08:06:43.060
> 
> 标签：html, css, html-table, landscape

我有一个从数据库动态生成的报告，该报告的某个部分应该打印在一个表中。我想以横向轮廓打印此表，将报告的其余部分正常打印为“纵向”。

那么，有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:42:01.277

您可以在 CSS 中设置`@page`属性，请参见下面的代码：

```
@media print{@page {size: landscape}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:17:45.347

如果您创建一个表格并将其视为相对于页面的 100% 宽度，则打印机应自动打印到整个页面宽度。是横向还是纵向取决于您在实际打印时在打印设置中选择哪一个。您能够干净利落地完成此任务的唯一方法是制作两个单独的 html 文档——一个包含纵向部分，另一个包含横向部分。然后分别打印每个文档。

只有另外两种完成任务的理论方法：1）某种浏览器插件，它会为您发送单独的打印作业，确定文档的哪些部分应该以哪种方式打印。

2) 使用 CSS3 变换。生成要打印的表格的静态图像，然后在页面上将其转换（旋转）90 度，使其在屏幕上看起来是横向的。如果您旋转文档的某些部分，那么理论上您可以在一项工作中完成整个工作。但不要浪费你的时间。这将是一场彻头彻尾的噩梦。特别是如果你不得不问怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T14:55:11.443

您可以这样将桌子旋转 90 度：

```
 <div style="display: block; margin: 0; break-before: page; width: 297mm; height: 210mm; transform: rotate(270deg) translate(-296mm, 0);
    transform-origin: 0 0;" >

 <table style="word-wrap: break-word; table-layout: fixed; width: 100%;">
   <tr><td>A row</td></tr>
 </table>
</div>
```

word-wrap 和 table-layout 样式对于将表格保留在页面内而不覆盖自身是必要的。您可能需要摆弄 div 中的宽度、高度和平移值，但这些值对我来说适用于 A4 页面。它在 Chrome 中对我有用，没有检查过其他人。

# objective-c - 自动为 (@property) UIButton 添加方法

> ID：14037742
> 
> 赞同：1
> 
> 时间：2012-12-26T08:07:45.523
> 
> 标签：objective-c, uibutton

我在头文件中声明了一个 UIButton。

```
@property (nonatomic, retain) UIButton *fooButton; 
```

在实现文件中，我可以找到如下的保留方法。（我的意思是 xcode 帮助输入完成。）

```
- (void)removeFooButton:(NSSet *)objects 
```

我还找到“removeFooButtonAtIndexes:(NSIndexSet *)indexes”等等。实施这些方法的目的是什么？谢谢。

# linux-kernel - 从 RPM 源码包构建内核

> ID：14037749
> 
> 赞同：0
> 
> 时间：2012-12-26T08:08:20.157
> 
> 标签：linux-kernel, rpm, rpmbuild, rpm-spec

我在 Fedora 内核 src rpm 上执行以下操作：（1）`rpm -ivh kernel-xxx.rpm` （2）转到`~/rpmbuild/SPECS`目录（2）`rpmbuild -bp kernel.specs --nodeps`

然后在 ~/rpmbuild/BUILD/ 目录中，我得到 kernel-xxx 目录，其中有两个源目录-

(1) linux-xxx <-------- A

(2) vanilla-xxx <-------- B

为什么要创建这两个目录 - 如何使用配置文件 /boot/config-xxx 构建 vmlinuz 和 initrd 映像？

我应该使用哪个目录 A 或 B 来构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:47:53.430

Have you seen [this](http://fedoraproject.org/wiki/Building_a_custom_kernel)? Step-by-step howto.

# jquery - “导航栏中的页面重复初始化”或“页面在 Jquery Mobile 中基于 TabBar 的应用程序中的每个导航上重新初始化”-Chrome

> ID：14037752
> 
> 赞同：2
> 
> 时间：2012-12-26T08:08:27.027
> 
> 标签：jquery, html, jquery-mobile

我有以下标记（在第一个选项卡中）-

```
 <div data-role="navbar" class="myClass">
    <ul>
    <li><a rel="external" data-ajax="false" href="Tab1.html"  data-transition="slidefade" class="ui-btn-active ui-state-persist" id="favorite" data-icon="custom">Tab1</a></li>
    <li><a rel="external" data-ajax="false" href="Tab2.html" data-transition="slidefade" id="recent" data-icon="custom">Tab2</a></li> 
    <li><a rel="external" data-ajax="false" href="Tab3.html" data-transition="slidefade" id="contacts" data-icon="custom">Tab3</a></li>
    <li><a rel="external" data-ajax="false" href="Tab4.html"  data-transition="slidefade" id="keypad" data-icon="custom">Tab4</a></li>
     </ul>
</div> 
```

当我通过点击导航栏在页面之间切换时（通过 CSS 使其看起来像 iOS 原生 UITabBar），每当我导航到选项卡时都会初始化相应的 .html 文件（我希望页面在应用程序生命中只初始化一次循环）。

当我删除属性`rel="external" data-ajax="false"`时，问题得到解决，但仅在 Safari 浏览器中，Chrome 停止导航到该页面并给出错误 - “错误加载页面”。- **<----这是Chrome浏览器的已知行为吗？**

此外，如果我声明一个像这样的对象——一旦我离开页面`window.variable=xyz;` ，存储的值`window.variable`就会丢失，即应用程序在每次点击导航栏后都会重新初始化，我无法`window`在整个应用程序中共享该对象。

而且，如果我给——

```
<script>
            $(document).bind("mobileinit", function(){
            alert('Page inited');                     
});
 </script> 
```

在 Tab1.html、Tab2.html、Tab3.html 和 Tab4.html 的标题中，每当我导航到我不希望发生的相应标签页时，都会调用脚本，即标记中的整个标题。

**这是 Google Chrome 浏览器中的已知问题/功能吗？**Safari- 也是基于 Webkit 构建的，其行为方式有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:43:10.637

绝对删除**rel="external"** & **data-ajax="false"**属性，它们会阻止页面兑现。

然后你需要像这样打开兑现：

```
$(document).one("mobileinit", function () {
    $.mobile.page.prototype.options.domCache = true;
}); 
```

**仅**当您希望兑现每一页时才使用此选项。如果您只想兑现某些页面，请使用以下类比：

```
<div data-role="page" id="cacheMe" data-dom-cache="true"> 
```

您还可以像这样以编程方式缓存页面：

```
pageContainerElement.page({ domCache: true }); 
```

如果您在多个 html-s 中有多个页面，则需要像这样使用 data-prefetch 属性：

```
<a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

在这里你会找到我关于这种兑现的其他答案：[https ://stackoverflow.com/a/14019929/1848600](https://stackoverflow.com/a/14019929/1848600)

现在谈谈持久对象。如果您遵循了最重要的说明，您可以像这样简单地创建一个持久对象：

var someObject = { option1 : '', option2 : 0, option3 : '' //etc.. }

**rel="external"** & **data-ajax="false"**将阻止 jQM 情况下的对象持久性，这些属性就像页面刷新一样。

# objective-c - Xcode 本地化不起作用？

> ID：14037753
> 
> 赞同：4
> 
> 时间：2012-12-26T08:08:29.400
> 
> 标签：objective-c, macos, localization, xcode4.5, osx-mountain-lion

我正在尝试为我的 Mac OS X (Mountain Lion) 应用程序添加新的本地化。我在项目信息面板中添加了适当的本地化，并使所有`.xib`文件本地化。我还添加并翻译了 .strings 文件，并用翻译后的字符串文件替换了 .xib 文件。然后一切似乎都正常了，界面生成器为每个本地化`xib`文件显示了适当的翻译。但是，当我实际运行该应用程序时，它以英语显示，尽管我的系统的默认语言不是英语。我也有`Localizable.strings`一些标签的文件，对于我使用的标签来说`NSLocalizedString`效果很好。我不确定我在这里缺少什么？

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-26T08:11:27.727

1.  执行构建清理（Command-Option-Shift-K）
2.  从模拟器/设备中删除应用程序
3.  启动应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T11:39:12.050

检查您是否标记了 Target 的 Target Membership。我有同样的问题，因为我手动添加了我的字符串。

看图像。![在此处输入图像描述](../Images/26dc7ceffd8726d2fef0744704426003.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T16:26:23.570

就我而言，它不起作用，因为 UILabel 文本在 Attributes Inspector 中设置为“Attributed”而不是“Plain”。使用 .strings 文件进行本地化似乎不适用于属性字符串。我什至有一个混合了 Plain 和 Attributed 字符串标签的故事板，并且本地化只适用于 Plain 那些。

此外，检查 Localizable.strings 中是否没有语法错误（每行以“;”结尾）

# c# - 确定列表的类型？

> ID：14037754
> 
> 赞同：1
> 
> 时间：2012-12-26T08:08:39.883
> 
> 标签：c#, list

在 c# 中，我们可以在做其他事情之前确定 List 持有什么类型吗？例子：

```
List<int> listing = new List<int>();

if(listing is int)
{
    // if List use <int> type, do this...
}
else if(listing is string)
{
    // if List use <string> type, do this...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:16:43.770

你可以使用[`Type.GetGenericArguments()`](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)方法。

像：

```
Type[] types = list.GetType().GetGenericArguments();
if (types.Length == 1 && types[0] == typeof(int))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:11:44.903

您可以使用

```
if(listing is List<int>) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T19:20:57.180

当使用 C# 等面向对象语言进行编码时，我们通常更喜欢使用多态性，而不是在运行时类型上使用条件。下次试试这样的，看看你喜不喜欢！

```
interface IMyDoer
{
    void DoThis();
}

class MyIntDoer: IMyDoer
{
    private readonly List<int> _list;
    public MyIntClass(List<int> list) { _list = list; } 
    public void DoThis() { // Do this... }
}
class MyStringDoer: IMyDoer
{
    private readonly List<string> _list;
    public MyIntClass(List<string> list) { _list = list; } 
    public void DoThis() { // Do this... }
} 
```

像这样调用：

```
doer.DoThis(); // Will automatically call the right method
//depending on the runtime type of 'doer'! 
```

代码变得更短更清晰，您不必使用 if 语句。

通过这种排列代码（或分解）的方式，您可以自由地更改代码的内部结构而不会破坏它。如果您使用条件，您会发现代码在修复不相关的问题时很容易中断。这是代码的一个非常有价值的属性。希望你觉得这有帮助！

# c++ - 在我的 Qt 应用程序中运行另一个可执行文件

> ID：14037761
> 
> 赞同：1
> 
> 时间：2012-12-26T08:09:31.657
> 
> 标签：c++, qt, executable, qprocess

我写了两个 Qt 应用程序。一个是主路，另一个是副路。

我正在运行 Linux。我读过`QProcess`所以我写了这段代码：

```
 QApplication a(argc, argv);
    MainWindow w;

    w.show();
    QProcess P(&w);
    QString programPath;
    programPath=
    "/Documents/Qt/test1-build-desktop-Qt_4_8_1_in_PATH__System__Release/test1";
    P.start(programPath);

    return a.exec(); 
```

但是，什么也没发生，我的主应用程序 ( `w`) 运行。

我的错是什么？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:56:10.803

问题是这 `P.start(programPath);`是一个非阻塞操作。此外，应用程序输出被重定向，并且只能从 Qprocess 对象***访问***。

**编辑：**

似乎可执行文件的路径不正确。**以“/”**开头的任何内容都将被视为绝对路径。

您可能需要编写一个`QObject`子类来监视您启动的进程。正如kassak 指出的那样，该对象将捕获进程信号。

```
class ProcessMonitor : public QObject {
   Q_OBJECT

public slots:

void notifyStart();

void handleError( QProcess::ProcessError error );

void notifyStop(int exitCode, QProcess::ExitStatus ex);
} 
```

在每个插槽中，您可以只打印一条消息。然后你可以做连接

```
ProcessMonitor montinor;
QObject::connect(&P,SIGNAL(error(QProcess::ProcessError)), 
      &monitor,SLOT(handleError( QProcess::ProcessError error )) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:20:03.840

我的错在于可执行文件的路径。

我对其进行了编辑，非常简单并且可以正常工作。

```
QApplication a(argc, argv);
MainWindow w;
w.show();
QProcess P(&w);
QString programPath;
programPath=
    "/home/erfan/Documents/Qt/test1-build-desktop- Qt_4_8_1_in_PATH__System__Release/test1";
P.start(programPath);
return a.exec(); 
```

它工作正常。

另一种方法是将可执行文件直接放在根目录下：

> `(/ somthings)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T08:25:01.357

您可以使用

```
#include <cstdlib>
std::system("/path/to/executable &"); 
```

# python - 在 Python 中的类和 def __init__(self) 中编写代码有什么区别？

> ID：14037768
> 
> 赞同：1
> 
> 时间：2012-12-26T08:10:25.793
> 
> 标签：python, class, init

> **可能重复：**
> [类 __init__() 函数内部和外部的变量](https://stackoverflow.com/questions/1537202/variables-inside-and-outside-of-a-class-init-function)

我知道当一个类被调用时，它会先运行代码`__init__`。我仍然看不出这与直接在类下编写代码之间的区别。

例如：

```
class main():
  x = 1

  def disp(self):
    print self.x 
```

```
class main():
  def __init__(self):
    self.x = 1

  def disp(self):
    print self.x 
```

对我来说，两者都有相同的功能。（也许我错过了一些东西。）我想知道哪个更（咳咳）pythonic以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:28:40.787

是的，正如其他各种问题中所述，类主体中定义的变量是类的属性，而`def __init__(self)`块中定义的变量是类实例的属性。

[在 init 中定义成员与在 Python 中的类主体中定义成员之间的区别？](https://stackoverflow.com/q/1549722/1907098)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:29:49.347

这里有几个关键的区别，无论`__init__`是在课堂上还是在课堂上写，以及你写的东西。

### 与`x = 1`

首先，你是对的——这两条代码有效地为你的目的做同样的事情（特别是因为我们在`int`这里使用对象，这对于可变对象会有所不同）：

*请注意，他们**实际上**并没有做同样的事情——请参阅对此答案的评论以进行澄清。*

```
class main(object):
    x = 1 
```

```
class main(object):
    def __init__(self):
        self.x = 1 
```

这就是为什么许多非标准 Python 库（如模型`mongoengine`和`django`模型）都有一个标准，您可以在不使用`__init__`语句的情况下创建类，以免覆盖内置的类，但仍允许您创建类属性，例如 Django 示例：

```
class mymodel(models.model):
    name = models.CharField(max_length=20)
    url = models.UrlField() 
```

然而，正如另一张海报指出的那样，两者之间的区别在于，当`x=1`它在函数之外时`__init__`，即使没有初始化，它也是类本身的一部分——有关更多详细信息，请参见**Zagorulkin Dmitry**的回答。但是，在大多数情况下，这种区别与您无关。

### 其他注意事项

`__init__`除了设置变量之外，还有更多用途。最重要的一项是**在初始化期间接受参数的能力。** 据我所知，没有`__init__`函数就没有办法做到这一点。我会在这个例子中告诉你我的意思。

假设我们正在创建一个`Person`类，当我们创建一个 时`Person`，我们提供他们的年龄，然后他们的出生年份会自动为我们计算出来。

```
import datetime
class Person(object):
    def __init__(self, age):
        self.age = age
        self.birth_year = (datetime.date.today() - datetime.timedelta(days=age*365)).year 
```

正在使用：

```
>>>joe = Person(23)
>>>joe.age
23
>>>joe.birth_year
1990 
```

如果没有 ，这是不可能的`__init__`，因为否则我们无法将初始化传递给`age`参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T09:25:32.267

如前所述，类属性（在类级别分配）和实例属性（例如在 中分配为自身属性`__init__`）是不同的。

另一方面，在您的第一个类中，您定义了两个不同的属性（类`x`和实例`x`），它们共存，但可能相互干扰。下面的代码尝试显示如果以这种方式定义类可能会遇到的问题。

```
In [32]: class main():
   ....:     x = 1
   ....:     def disp(self):
   ....:         print(self.x)
   ....:

# I create 2 instances
In [33]: jim = main()
In [34]: jane = main()

# as expected...:
In [35]: main.x
Out[35]: 1

In [36]: jim.x
Out[36]: 1

In [37]: jane.x
Out[37]: 1

# now, I assign to jim attribute x
In [38]: jim.x = 5

# main class preserves its attribute value as well as jane instance  
In [39]: main.x
Out[39]: 1

In [40]: jane.x
Out[40]: 1

# But what happens if I change the class attribute ?
In [41]: main.x = 10

# nothing to jim (I overwrote before jim.x)
In [42]: jim.x
Out[42]: 5

# but jane did see the change 
In [43]: jane.x
Out[43]: 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:22:16.860

这是不同的。在第一个示例中，您`x`没有初始化。

```
>>> class main():
...     def __init__(self):
...             self.x =1
...
>>> test2 = main()
>>> dir(test2)
['__doc__', '__init__', '__module__', 'x']
>>> class main1():
...     x =1
...     def disp(self):
...             print self.x
...
>>> dir(main1)
['__doc__', '__module__', 'disp', 'x']
>>> dir(main)
['__doc__', '__init__', '__module__']
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T08:32:40.030

让我们考虑以下类定义：

```
class Main:
        x = 1

        def __init__(self):
            self.y = 5 
```

在这种情况下，我们可以像这样直接引用x：`Main.x`即它是一个类属性，它属于这个类的每个对象。

```
>>>Main.x
1 
```

但是，属性`y`特定于每个对象。我们不能像这样直接引用它：

```
>>> Main.y
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class Main has no attribute 'y' 
```

您需要实例化 Main 类的一个对象来引用 y：

```
>>> obj = Main()
>>> obj.y
5 
```

这类似于`static`C++ 和 Java 中的变量。

# android - 在工作区中导入现有项目

> ID：14037770
> 
> 赞同：0
> 
> 时间：2012-12-26T08:10:41.667
> 
> 标签：android

我正在尝试使用 pullToRefresh 示例：

[https://github.com/erikwt/PullToRefresh-ListView](https://github.com/erikwt/PullToRefresh-ListView)

因此，我下载了代码，并创建了两个项目，第一个项目`pullToRefresh`使用 pulltorefresh 代码和`pullToRefreshEx`pulltorefreshexample。

我尝试导入`pullToRefresh`项目，但出现错误：

```
Some projects cannot be imported because they already exist in the workspace 
```

它存在，因为我导入“工作区中的现有项目”，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:12:19.377

尝试这个

取消选中“**将项目复制到工作区**”选择框，然后单击“**刷新**”按钮，您将能够导入项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:14:39.550

我永远无法正确地将项目导入工作区。我最终这样做了：

1.  将源文件放在正确的文件夹中。
2.  在 Eclipse 中创建一个新项目（一个通用项目），并为其命名文件夹。
3.  右键单击项目，选择 Android 工具 | 修复项目属性。
4.  右键单击项目，转到“属性”，选择“Java 构建路径”，然后将“src”和“gen”文件夹添加为“源文件夹”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:19:01.940

另一种可能性是该项目有一个模糊的名称，如“库”，如果您已经有一个具有相同模糊名称的现有项目，您的 Eclipse 将不允许将其导入工作区。

尝试检查并将现有项目重命名为代表其内容真正含义的正常名称。

（明显的选择来自上面的答案）

# android - 我怎样才能顺序获得两个权限？

> ID：14037776
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:11:42.107
> 
> 标签：android, facebook, permissions

我正在使用新的 facebook SDK 3.0 开发 android 应用程序。我知道 facebook 的政策是我不能同时请求两个权限，也不能在登录按钮上请求写权限（publish_stream、publish_acition..etc）。

所以，我的问题是，如何在用户单击日志按钮后自动请求“publish_stream”权限？

在我下面的源代码中，

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {

    if (state.isOpened()) {

        if (pendingPublishReauthorization &&   state.equals(SessionState.OPENED_TOKEN_UPDATED)) {
            pendingPublishReauthorization = false;
            publishFeed(userName);
        }

        m_pd.show();
        Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            @Override
            public void onCompleted(GraphUser user, Response response) {
                if (user != null) {

                    String username=buildUserInfoDisplay(user);
                    userName=username;
                    saveAccount(username, "facebook");

                    Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "login success");
                    publishFeed(userName);
                    m_pd.dismiss();

                    //Activity GetActivity=getActivity();
                    //if(GetActivity != null) GetActivity.finish();

                }
            }
        });

    } else if (state.isClosed()) {
        Log.i(com.dress.folio.Constants.FACEBOOK_TAG, "Logged out..." + exception);
    }
} 
```

当用户单击登录按钮时，会调用 onSessionStateChange()。所以我尝试在 Request.executeMeRequestAsync(session, new Request.GraphUserCallback() 之后用 'publishFeed()' 请求 'publish_stream'。

```
Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
                if (user != null) {

                    String username=buildUserInfoDisplay(user);
                    userName=username;
                    saveAccount(username, "facebook");

                    Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "login success");
                    publishFeed(userName);
                    m_pd.dismiss();

                    //Activity GetActivity=getActivity();
                    //if(GetActivity != null) GetActivity.finish();

                }
            }
        }); 
```

publishFeed() 就像：

```
private void publishFeed(String username) {
    Session session = Session.getActiveSession();
    SessionState state= session.getState();

    if (session != null){
        Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "in publishstory(): "+ state);
        // Check for publish permissions    
        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions) ) {

            pendingPublishReauthorization = true;
            if(state == SessionState.OPENED_TOKEN_UPDATED) {
                Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "in publishstory() if : OPENED_TOKEN_UPDATED" );
                Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, PERMISSIONS);
                session.requestNewPublishPermissions(newPermissionsRequest);
            }

            return;
        }

        Bundle postParams = new Bundle();
        postParams.putString("name", username + " is logged in");
        // postParams.putString("caption", "Build great social apps and get more installs.");
        postParams.putString("description", "get the dress!!");
        postParams.putString("link", "https://www.facebook.com/pages/Dressfolio/183665935091337"); //dressfolio facebook page address
        postParams.putString("picture", "https://MY_APPLICATION.com/asset/facebook/app1/thumb2.png"); //thumbnail

        Request.Callback callback= new Request.Callback() {
            public void onCompleted(Response response) {
                Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "callback()" );

                FacebookRequestError error = response.getError();
                if (error != null) {
                    Log.d(com.dress.folio.Constants.FACEBOOK_TAG,"news feed error!" + error.toString());    
                } 
                else {
                    Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "News Feed Posting success()" );
                }
            }
        };

        Request request = new Request(session, "me/feed", postParams, 
                HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute(); 

    }

} 
```

但这总是不起作用，因为 Sessionstate 不处于“OPENED_TOKEN_UPDATED”状态。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:18:02.313

您一次可以请求多个权限，只是不能在同一个请求中混合 READ 和 PUBLISH 权限。

对于您的具体问题，这是因为您正在检查 SessionState.OPENED_TOKEN_UPDATED，而当会话首次打开时，它处于 SessionState.OPENED 状态。只有当您请求其他权限时，它才会转换为 OPENED_TOKEN_UPDATED 状态。

# mongodb - Mongo中的双向字典

> ID：14037779
> 
> 赞同：3
> 
> 时间：2012-12-26T08:11:56.607
> 
> 标签：mongodb, dictionary, bidirectional

我的应用程序是我正在使用 MongoDb 在 node.js 上编写的韩英词典。问题是组织数据库，这样我就可以使用相同的单词进行韩语-英语和英语-韩语方向。在 MySQL 中，我会使用所有单词的表和带有单词引用的多对多连接表。
例如，我有
A 是 C
A 是 D
B 是 C
A 的翻译是 C，D - 一个方向
C 的翻译是 A，B - 另一个方向
如何在 Mongo 中组织数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:45:33.027

如果我理解你的话。

假设你有这个集合。

```
db.collection({'en': 'word_en', 'kr':'word_kr'}) 
```

如果你想搜索`en`'korean' 词的等价物，只需写：

```
db.collection.find({'kr': 'word'}) 
```

反之亦然

```
db.collection.find({'en': 'word'}) 
```

不要忘记为集合创建索引。

此外，请确保您的索引不是唯一的，这样您就可以添加多个引用。因此，在扩展您的示例时，您会得到如下信息：

```
db.collection({'en': 'A', 'kr':'C'})
db.collection({'en': 'A', 'kr':'D'})
db.collection({'en': 'B', 'kr':'C'}) 
```

当您需要以下翻译时`A`：

```
db.collection.find({'en': 'A'}) 
```

你得到一个带有 C 和 D 的数组。与从移动类似`C`

# c# - 事务是删除子记录的好选择吗？

> ID：14037783
> 
> 赞同：1
> 
> 时间：2012-12-26T08:12:05.457
> 
> 标签：c#, entity-framework, transactions, cascading-deletes

我有两个表，一个表 A 是父表，另一个表 B 是子表（1：N 关系）。

如果我想在删除表A中的父时删除表B中的子记录，如果我不在数据库中使用级联删除，我会按照以下方式进行：

1.  用户 A 在她的上下文中加载父记录，然后在上下文中加载所有子记录，将所有记录标记为已删除。
2.  其他用户添加一个新的孩子。
3.  用户 A 保存更改。由于第二个用户添加的寄存器不在她的上下文中，因此出现引用完整性错误。

在这种情况下，第一个用户可以在引发异常时再次尝试加载所有子级，但第三个用户可以添加一个新的子级并遇到同样的问题。理论上，这可能一直发生，第一个用户不会删除父级。

出于这个原因，我正在考虑使用事务来完成这项工作。

1.  第一个用户开始交易。
2.  第一个用户标记为已删除父级并保存更改。父级在数据库中被阻止。
3.  第一个用户加载所有孩子，标记为已删除。
4.  第一个用户保存更改。

在这种情况下，我有一个疑问，当父注册被第一个用户阻止时，这个父的ID可以被其他用户用作子记录的外键吗？还是数据库不允许使用ID，因为理论上是一条已删除的记录？

如果数据库不允许使用该 ID，则第二个用户在尝试添加新子代时会出现异常，以确保引用完整性，因为父代不存在。所以问题就解决了。不需要做任何其他事情。

但是，如果数据库允许使用被阻止父级的 ID，我需要做两件事：

在删除父级的方法中：

1.  加载父级，将其标记为已删除并保存更改。这会阻止寄存器。
2.  加载孩子，将它们标记为已删除并保存更改。
3.  接受交易。

在添加孩子的方法中

1.  加载父级。如果被阻塞，则该方法等待直到寄存器空闲。
2.  添加新的孩子。
3.  接受更改。

确实不需要在上下文中加载父级来删除子级，这将是对数据库的额外查询。

如果父级不存在，则获取异常并且不需要执行任何其他操作，用户现在尝试添加新寄存器是因为父级已被删除。

如果父级存在，则可以添加子级。

所以我有两个问题。

1.  使用事务删除父记录以确保删除所有子记录是个好主意吗？

2.  如果事务是一个不错的选择，当父级被阻塞时，数据库不允许使用父级ID添加新记录或者我需要在删除子级的方法中加载父级的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:11:36.780

事务不会推迟删除操作。数据库中没有类似“标记为已删除”的内容。当您将实体标记为已删除并执行`SaveChanges`时，数据库中的记录将被删除。它总是发生在交易中。一旦记录即将被删除，就会检查 FK 约束，如果存在任何依赖记录，则会引发错误（除非`ON DELETE`约束规则未定义其他选项）。使用 FK 约束时，您必须始终在删除父级之前删除子级。

如果您的描述准确，您可以简单地使用您害怕的第一种方法并关闭查询并`SaveChanges`进入 single `TransactionScope`。它将以可序列化的隔离级别运行事务，这应确保在当前事务完成之前，没有其他事务能够将记录插入锁定的键范围（被查询锁定）。

虽然具有可序列化事务的解决方案可能会起作用，但它可能会带来其他问题 - 与应用程序中的其他事务发生死锁。因为重复失败的交易通常是最好的选择。如果您的系统具有如此大的并发负载，以至于删除事务可能“一直”失败，那么可能是时候彻底重新设计您的应用程序了。

# android - Android 相对布局

> ID：14037793
> 
> 赞同：1
> 
> 时间：2012-12-26T08:13:32.113
> 
> 标签：android, android-relativelayout

我有一个`relative layout`在 xml 中。我必须以编程方式添加一些文本视图来查看，现在我必须将文本视图对齐为 alignparentright。我只能使用`.addRule()`但我不想以编程方式创建相对布局然后使用该图层`object.addRule()`。相反我已经在 xml 中向 relativeview 添加了一个 id。

我如何`addRule()`在这个 xml 相关层中使用。我在活动中使用`findviewbyid`并分配了 id 类型 textview 但是当我这样做时`textview.addRule()`，这个相对布局类型变量不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:21:49.083

简单，这样走

```
 RelativeLayout rl = (RelativeLayout)findViewById(R.id.relative_layout_id);
    RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    TextView tv = new TextView(this);
    tv.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    rl.addView(tv); 
```

有任何问题请询问。

# amazon-web-services - Amazon SQS 签名错误

> ID：14037794
> 
> 赞同：0
> 
> 时间：2012-12-26T08:13:34.197
> 
> 标签：amazon-web-services, amazon-s3, amazon-sqs

我用来签名的字符串如下

```
GET
sqs.us-east-1.amazonaws.com
/XXXXXXXXXXX/Localhost
AWSAccessKeyId=XXXXXNGOTNJCTGAXXXXX&Action=ReceiveMessage&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-12-26T07%3A56%3A37Z&Version=2012-11-05 
```

前 3 行后面有 '\n' 字符，但最后没有，我也试过在最后加上 '\n'，但结果是一样的

我是他们计算

```
HMAC_SHA256(AWSKey,string) 
```

我已经分别验证了 HMAC_SHA256 的正确性，最后我调用了 HMAC Base 64 编码的 URL

```
https://sqs.us-east-1.amazonaws.com/XXXXXXXXXXX/Localhost?AWSAccessKeyId=XXXXXNGOTNJCTGAXXXXX&Action=ReceiveMessage&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-12-26T07%3A56%3A38Z&Version=2012-11-05&Signature=06nzru1EroDLJTJDjExLbyUyQzEcct3wAp%2Bm7TOBTjb0aPWSJTIXXXXX 
```

XX..XX 是我添加的。

在浏览了几次文档之后，我没有发现相同的错误，但我收到了一个签名不匹配错误。

```
<Code>SignatureDoesNotMatch</Code>
<Message>
The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method. Consult the service documentation for details.
</Message> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:34:15.630

Could the problem be the slash between the queue name and the question mark at the beginning of the query string in the URL? I don't think that should be there.

```
...Localhost/?AWSAccessKeyId...
            ^ remove this 
```

* * *

Hmmm, wasn't that, eh? Okay, here is another thought:

You say you verified the HMAC_SHA256 correctness, but are you sure this is the correct order for the arguments? Some implementations use this convention:

```
HMAC_SHA256($data,$key) 
```

You're doing the opposite.

# sql - 如何禁用 SQL Server 2008 R2 数据库复制

> ID：14037797
> 
> 赞同：0
> 
> 时间：2012-12-26T08:13:39.707
> 
> 标签：sql, sql-server, database, security, sql-server-2008-r2

我有必须安装到客户端的 SQL 数据库。我真的不希望我的数据库表和其他组件暴露。问题是我在 SQL Server 2008 R2 安全设置方面的工作经验有限。此外，是否可以从数据库所在的文件夹中禁用物理数据库副本？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:33:54.300

您可以在自己的用户下运行 SQL 服务器（无论如何都是安全的良好做法），并且只授予该用户对存储物理数据库的目录的权限。这将阻止其他一些受限用户复制物理数据库文件；但不会阻止管理员。

管理用户拥有`SeBackupPrivilege`和`SeTakeOwnershipPrivilege`，因此他们可以覆盖您可能设置的任何权限。

当然，如果客户端可以物理访问机器，他们实际上拥有该机器上的数据；你对此无能为力。一个好的软件安全系统始于一个好的物理安全系统。

# windows-phone-7 - 市场上的 Windows Phone 7.5 和 8.0 姐妹

> ID：14037798
> 
> 赞同：0
> 
> 时间：2012-12-26T08:13:42.077
> 
> 标签：windows-phone-7, windows-phone-8, marketplace

我一直在想这个问题。是否可以提交同一个应用程序的 2 个版本（一个针对 7.8，一个针对 8.0）并将它们都放在同一个市场提交上，以便在两个版本的操作系统上都可以下载，而不仅仅是针对 7.8 和 8.0用户使用缩放版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:53:52.517

有可能的。在开发中心提交应用程序或应用程序的新版本时，您可以上传面向 WP7 的 XAP 和面向 WP8 的 XAP。用户将自动下载相应的。

# deployment - 厨师自动更新配置

> ID：14037802
> 
> 赞同：2
> 
> 时间：2012-12-26T08:13:52.603
> 
> 标签：deployment, chef-infra

我使用`chef-server`和`chef-client`配置。

在主机配置的每次更改（通过引导添加的新主机或删除旧主机）时，我想在每个包含它的主机上重新运行一个配方，配方本身没有变化。

到目前为止，我只是`chef-client`在 cron 中每 5 分钟运行一次，这不是最好的解决方案。

一般来说，即使我更改了配方，是否`chef-client`知道它应该重新运行配方？（它是如何知道的，以及识别配方变化可能需要多长时间）

如果我需要在不改变配方本身的情况下重新运行配方，那么正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T04:36:35.833

这是一个 debian 启动脚本，它将使用 chef 的 -i 和 -s 参数并在系统启动时运行 chef：

[https://github.com/opscode/chef/blob/4edd48d5b546542ed566b1b3f491774e9f36065d/distro/debian/etc/init.d/chef-client](https://github.com/opscode/chef/blob/4edd48d5b546542ed566b1b3f491774e9f36065d/distro/debian/etc/init.d/chef-client)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T04:03:56.837

> 如果我需要在不改变配方本身的情况下重新运行配方，那么正确的方法是什么？

见马克的回应。厨师客户-i 3600 -s 600

> 一般来说，即使我更改了食谱，厨师客户是否知道它应该重新运行食谱？

不，它不知道。如果您更改并将接收者上传到厨师服务器，它将在下次向厨师服务器询问收敛所需的一组接收者时将该版本（假设没有基于环境的版本覆盖）提供给厨师客户端.

为了满足您的两个用例，最好有一个外部版本控制系统（例如 git）作为您的接收者的真实来源，编写一个 post-commit-hook 来上传接收者的每个新版本到 chef-server，甚至可能有一个 CI 服务器监听签入和协调 chef-client 运行。这里有一些很好的答案：

[https://serverfault.com/questions/283470/what-are-the-benefits-of-running-chef-server-instead-of-chef-solo](https://serverfault.com/questions/283470/what-are-the-benefits-of-running-chef-server-instead-of-chef-solo)

# r - 如何从预测函数中获得样本外预测

> ID：14037806
> 
> 赞同：1
> 
> 时间：2012-12-26T08:14:15.810
> 
> 标签：r, prediction

我正在使用该`vars`软件包并希望从计算模型中预测一些值：

```
# Get the model
x1 <- rnorm(15)
y1 <- x1 + rnorm(15)
trainFrame=data.frame(x1,y1);
model=VAR(trainFrame, p=3);
pr1=predict(model, trainFrame);
# Forecast values with new data
x2 <- rnorm(15)
y2 <- x2 + rnorm(15)
newFrame=data.frame(x2,y2);
pr2=predict(model, newFrame); 
```

比较两个预测向量`pr1`，`pr2`表明它们是相同的。我怎样才能得到实际的预测值，而不是再次从训练数据中得到预测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:14:16.560

在这里，您为具有类属性的对象调用 predict 方法`varest`。

> 预测（对象，...，n.ahead = 10，ci = 0.95，dumvar = NULL）

为估计的 VAR 递归计算 n.ahead 预测。

无需给训练 Frame 来预测。

```
 pr2=pr1=predict(model) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T16:32:20.970

我有同样的问题（我认为），所以我编写了这个函数来计算提前 n 步预测。它虽然没有给出误差带或 CI。

```
VAR.pred <- function(x, varest, n.ahead = 10)
{
 k <- ncol(varest$y)
 p <- varest$p
 Atemp <- matrix(NA, k, k*p + 1)

 for(i in 1:k) Atemp[i, ] <- (coef(varest)[[i]])[, 1]

 Const <- as.matrix(Atemp[, ncol(Atemp)])
 A <- Atemp[, -ncol(Atemp)]

 fcast <- matrix(NA, n.ahead, k)
 spoint <- as.matrix(x[nrow(x):(nrow(x)- p + 1), ])

 for(l in 1:n.ahead)
 {
  ftemp <- A[, 1:k]%*%t(spoint)[, 1]
  for(j in 2:p)   ftemp <- ftemp + A[, (1 + k*(j-1)):(k*j)]%*%t(spoint)[, j]
  ftemp <- ftemp + Const

  fcast[l, ] <- t(ftemp) 

  spoint <- rbind(t(ftemp), spoint)[1:p, ]
 }

 fframe <- data.frame(fcast)
 names(fframe) <- dimnames(x)[[2]]

 return(fframe)
} 
```

给 pr1

```
VAR.pred(x = model$y, varest = model) 
```

给 pr2

```
VAR.pred(x = newFrame, varest = model) 
```

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T06:08:08.407

它们不同的原因是 rnorm 函数生成两组不同的随机数据，即第 1 部分和第 2 部分中使用的数据根本不一样。

要检查，请参阅：

```
y1 <- rnorm(15)
y1
 [1] -0.05346192  0.34168852 -0.18398645  0.84534239 -0.97027620  0.39889488
 [7] -0.44039372  0.03008880  0.47940826 -0.73258837  1.06715936 -0.93316881
[13] -1.38306019 -0.42179145 -0.84193860

y2 <- rnorm(15) 
y2
 [1] -1.5849866  1.0203186  0.6242200 -0.5064240 -0.9497568 -0.2460866
 [7] -0.8262738  0.3100040  0.1352368  0.4030656 -0.7095272 -0.2856932
[13] -0.9061068  1.5968001  1.0259594 
```

你会发现 y1 和 y2 不一样。

为确保 rnorm 函数生成相同的数据集，您可以使用函数`"set.seed()"`，它确保您的工作是可重现的。

# antlr - Antlr - 如何使用 NEWLINE 终止的自由格式 unicode 字符串？

> ID：14037808
> 
> 赞同：2
> 
> 时间：2012-12-26T08:14:19.603
> 
> 标签：antlr, antlr3

我正在尝试使用 Antlr 处理一个简单的文本文件，主要是为了重新学习语法设计。

文本文件中的每一行都由一个关键字'BY:'和一个EOL终止的字符串组成；文件以一系列'-'结尾；像这样：

```
BY: abc123@gmail.com
BY: myCrazy@#$%ID
BY: first_name second_name
------------------- 
```

我将我的语法定义如下：

```
grammar authors;

prog    :   author+ DASHES;
author  :   BY STRING NEWLINE;

BY  :   'BY: ';
STRING  :   ('!'..'~')*;
NEWLINE :   '\r'? '\n' ;
DASHES  :   '-'+ NEWLINE; 
```

这个语法识别第一作者和第二作者，但由于空间的原因未能识别第三作者。所以我更改了 STRING 以包含一个空格`STRING:('!'..'~'|' ')*`，但随后它停止了一起工作（它抛出了`MisstingTokenException`）。

我认为这是因为 STRING 规则在匹配 BY 之前匹配整行。但是，当空间从 STRING 中排除时，为什么它会起作用？有没有办法可以强制词法分析器首先匹配 BY 规则？

一般来说，我怎样才能使用自由格式的 unicode 换行符终止的字符串（名称也可以有重音字符）？

谢谢！PS 我知道使用 java、perl、awk 等很容易做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T18:59:29.757

在 ANTLR 中，词法分析器处理字符，解析器处理抽象标记。因此，每当您发现自己说“从字符 ABC 开始，不加选择地读取每个字符，直到字符 XYZ”时，您可能最好编写词法分析器规则而不是解析器规则，因为“每个字符”对词法分析器有意义，但对解析器。

沿着这些思路，考虑`author`解析器规则的英文定义与 C++ 风格的单行注释的样板词法分析器规则之间的相似性：

*   An`author`是一些以 'BY: ' 开头的文本，后跟每个字符，直到行尾。
*   单行注释是一些以“//”开头的文本，后跟每个字符，直到行尾。

这种单行注释的词法分析器规则通常遵循以下形式：

```
SINGLE_LINE_COMMENT : '//' ~('\r'|'\n')*; 
```

作者行的词法分析器规则看起来相似：

```
AUTHOR : 'BY: ' ~('\r'|'\n')*; 
```

但这不会完全正确，因为`AUTHOR`生成的令牌将以“BY：”开头，而您只需要后面的内容。您可以修剪掉第一个字符，或者最好先将文本分开，如下所示：

```
AUTHOR: BY RESTOFLINE; //TODO ignore BY 
```

这种分离可以用词法分析器片段来完成：

```
AUTHOR  : BY RESTOFLINE; //TODO ignore BY

fragment BY :   'BY: ';
fragment RESTOFLINE  
        :   ~('\r'|'\n')*; 
```

词法分析器片段的行为类似于私有词法分析器级别的宏：只有在词法分析器规则中引用它时它才是“活动的”，并且只有词法分析器规则才能激活它。（解析器可以按名称引用片段，但通常不应该......但这是一个不同的主题。）

现在我们只需要包含' 文本的`AUTHOR`标记。`RESTOFLINE`使用词法分析器操作很容易：

```
 AUTHOR  : BY RESTOFLINE {setText($RESTOFLINE.text);}; 
```

现在，在`AUTHOR`规则完成读取`RESTOFLINE`片段后，`setText`调用将传出`AUTHOR`令牌的文本更改为仅来自`RESTOFLINE`片段的文本。

因此，在调整解析器规则以适应新的词法分析器规则之后，您最终会得到这样的语法：

```
grammar authors;

prog    :   author+ DASHES;
author  :   AUTHOR NEWLINE;

NEWLINE :   '\r'? '\n' ;
DASHES  :   '-'+ NEWLINE;

AUTHOR  : BY RESTOFLINE {setText($RESTOFLINE.text);};

fragment BY       
        :   'BY: ';
fragment RESTOFLINE  
        :   ~('\r'|'\n')*; 
```

这是一个快速测试用例：

### 输入

```
BY: abc123@gmail.com
BY: myCrazy@#$%ID
BY: first_name second_name
------------------- 
```

### 产生的代币

```
[AUTHOR : abc123@gmail.com] [NEWLINE : ] [AUTHOR : myCrazy@#$%ID] [NEWLINE : ] [AUTHOR : first_name second_name] [NEWLINE : ] [DASHES : -------------------] 
```

我不确定这对您的语法设计有多大帮助，但我希望它有助于显示标记解析器和字符解析器/词法分析器之间的区别，以及它们各自的一些限制。

# tomcat - 在 tomcat:run 上找不到类

> ID：14037809
> 
> 赞同：0
> 
> 时间：2012-12-26T08:14:28.990
> 
> 标签：tomcat, maven-3, jndi

我通过 jndi (java:/comp/env/mail/Session) 发送电子邮件。

如果我使用 tomcat/lib-folder 中的 mail-1.4.4.jar 启动下载的 tomcat，一切都很好，但是如果我想通过启动服务器

```
mvn tomcat:run 
```

它说：CNFE：javax.mail.Address

好的，我现在不确定，我认为依赖

```
 <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.4</version>
        <scope>provided</scope>
    </dependency> 
```

必须将 mail-1.4.4.jar 部署到 tomcat/lib 文件夹中（因为提供）。但它不是。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T10:19:14.733

提供的意思是依赖是由目标环境提供的。这意味着您需要将其传输到环境中，在这种情况下，将其传输到 tomcat 环境中的 lib 文件夹中。您可以尝试删除提供的范围并尝试它是否有效。

# scala - 这种自我类型是什么意思？

> ID：14037811
> 
> 赞同：1
> 
> 时间：2012-12-26T08:14:37.397
> 
> 标签：scala

> **可能重复：**
> [Scala this aliasing and self type](https://stackoverflow.com/questions/10836905/scala-this-aliasing-and-self-type)

我遇到了这段代码。

```
abstract class Tagged(private var t: Int) { self =>
...
} 
```

我知道下面的意思是Tagged和B的依赖关系，但是看不懂上面的，谁能解释一下区别？谢谢

```
abstract class Tagged(private var t: Int) { self:B  =>
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:36:37.987

第一种形式为`this`;引入了别名。第二种形式限制了自我类型。

例如，在 scala.Enumeration 中，`thisenum`用作`Enumeration.this`嵌套类的别名。在规范的更改日志附录中，它说别名被设计为替换语法。

# asp.net - 如何重现由 asp.net MVC 默认成员创建的密码哈希

> ID：14037815
> 
> 赞同：4
> 
> 时间：2012-12-26T08:15:25.397
> 
> 标签：asp.net, asp.net-mvc, hash, asp.net-mvc-4, asp.net-membership

我使用 asp.net MVC 4 默认会员系统，客户端需要发送一个签名，包括他的哈希密码，以进行身份​​验证。

我需要散列密码与服务器散列密码相同。

```
 private static bool IsAuthenticated(string hashedPassword, string message, string signature)
    {
        if (string.IsNullOrEmpty(hashedPassword))
            return false;

        var verifiedHash = ComputeHash(hashedPassword, message);
        if (signature != null && signature.Equals(verifiedHash))
            return true;

        return false;
    } 
```

**那么如何重现散列密码，如数据库中存储的密码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T06:25:30.377

请参阅**Class System.Web.Helpers.Crypto** Method **HashPassword**方法。SimpleMemberShip 提供者将此类用于加密服务。

您可以从 DB 中读取条目 :-)

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.web.helpers.crypto%28v=vs.111%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.helpers.crypto%28v=vs.111%29.aspx)

顺便说一句，不要忘记考虑 SALT。您的过程是否要求您在散列之前结合 Pass 和 salt ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T02:17:48.480

我不确定我是否理解您的问题，但无需比较散列密码。会员资格已经有一个验证用户的方法，你应该只使用

```
Membership.ValidateUser(username, password) 
```

如果您正在使用会员资格提供程序和表单身份验证，那么您可以检查用户是否已经登录

```
 User.Identity.IsAuthenticated 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:52:32.517

.net 成员资格提供程序使用 base64 编码的 HMACSHA1 哈希。您可以在客户端单独使用 javascript 重新创建相同的哈希。诀窍是确保您的密码和散列密钥相同并使用 utf-16le 编码。这是使用crypto-js的解决方案。不知道为什么 crypto-js utf-16le 函数不会产生相同的结果，所以我使用了不同的 utf 函数。

```
//not sure why crypt-js's utf16LE function doesn't give the same result
//words = CryptoJS.enc.Utf16LE.parse("test");
//utf16 = CryptoJS.enc.Utf16LE.stringify("test");

function str2rstr_utf16le(input) {
  var output = [],
      i = 0,
      l = input.length;

  for (; l > i; ++i) {
    output[i] = String.fromCharCode(
      input.charCodeAt(i)        & 0xFF,
      (input.charCodeAt(i) >>> 8) & 0xFF
    );
  }

  return output.join('');
}

var pwd = str2rstr_utf16le("test");
var hash = CryptoJS.HmacSHA1(pwd, pwd);

var encodedPassword = CryptoJS.enc.Base64.stringify(hash); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-21T07:42:42.243

来自 Crypto.cs @ System.Web.Helpers 的完整方法：

```
/// <summary>Returns an RFC 2898 hash value for the specified password.</summary>
/// <returns>The hash value for <paramref name="password" /> as a base-64-encoded string.</returns>
/// <param name="password">The password to generate a hash value for.</param>
/// <exception cref="T:System.ArgumentNullException">
/// <paramref name="password" /> is null.</exception>
public static string HashPassword(string password)
{
  if (password == null)
    throw new ArgumentNullException("password");
  byte[] salt;
  byte[] bytes;
  using (Rfc2898DeriveBytes rfc2898DeriveBytes = new Rfc2898DeriveBytes(password, 16, 1000))
  {
    salt = rfc2898DeriveBytes.Salt;
    bytes = rfc2898DeriveBytes.GetBytes(32);
  }
  byte[] inArray = new byte[49];
  Buffer.BlockCopy((Array) salt, 0, (Array) inArray, 1, 16);
  Buffer.BlockCopy((Array) bytes, 0, (Array) inArray, 17, 32);
  return Convert.ToBase64String(inArray);
} 
```

# tridion - Tridion 收藏夹 - 重命名收藏链接的能力

> ID：14037820
> 
> 赞同：16
> 
> 时间：2012-12-26T08:16:25.993
> 
> 标签：tridion, rename, favorites

我正在使用 Tridion 2011。我正在寻找一种方法让用户重命名最喜欢的链接。将组件、文件夹等添加到收藏夹很简单，但有没有办法让用户重命名这些收藏链接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T09:06:03.517

开箱即用，无法以不同于原始项目的方式重命名收藏链接。

该链接由 内部维护`TCM`，因此名称始终是共享的。

您最好的选择是开发一个 GUI 扩展，它维护链接的替代名称列表，但对于这样一个小功能来说似乎需要做很多工作。

# mysql - MySql存储过程调用错误

> ID：14037822
> 
> 赞同：2
> 
> 时间：2012-12-26T08:16:32.007
> 
> 标签：mysql, sql, stored-procedures, phpmyadmin

从 phpMyAdmin 调用 MySql 存储过程时出现以下错误

```
#1045 - Access denied for user 'root'@'localhost' (using password: NO) 
```

我在用

```
call get_ledger_name(2007); 
```

调用程序

我已经尝试更改root密码，创建一个新用户，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:46:24.760

**使用DEFINER=root@localhost**更改存储过程，然后调用此 SP。它会运行。

试试这个：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_test`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_test`()
BEGIN
/* Your Code Snippet */
/* Your Code Snippet */
/* Your Code Snippet */
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:26:41.360

其实你可以重设`root`密码。

*   [如何重置根密码](http://dev.mysql.com/doc/refman/5.1/en/resetting-permissions.html)

但请记住，*不建议*使用`root`没有密码的帐户。

# iphone - 以视频模式录制的快门声 (Ding)

> ID：14037823
> 
> 赞同：2
> 
> 时间：2012-12-26T08:16:33.607
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller, video-capture

我正在使用自定义相机。当我单击开始录制按钮时，“叮！” 声音出现，这是内置的。这导致该声音在记录的第一秒内被记录下来。

```
-(void)overlay_start_buttonAction
{

   overlay_start_button.hidden = TRUE;
   overlay_stop_button.hidden = FALSE;
   overlay_rec_label.hidden = FALSE;
   overlay_cancel_button.hidden = TRUE;
   overlay_rotate_camera_button.hidden = TRUE;

   [image_picker startVideoCapture];

} 
```

有没有可能抑制这种声音？

如果您想在这里查看我的完整代码，请访问[http://pastie.org/5579182](http://pastie.org/5579182)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:37:06.137

一些国家有立法，要求手机在录音开始时发出声音。它是操作系统的一部分，您无法禁用或替换它。

例如，当您尝试在有或没有对方许可的情况下录制电话时。录音开始时有音效，目的是通知对方通话录音已开始。

我想这和视频录制是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:14:22.360

您的代码没有任何声音选项或文件的参考。您将不得不查看框架内部。

您可以做的一件事是创建一个空 - 安静的声音文件，提供相同的名称并在您的项目中替换它。我知道这不是代码天才，但请在代码中查找声音文件名的引用，并检查是否有 BOOL 链接到它，或者是否可以从代码中删除它。

# jquery-ui - 如何动态创建jquery布局？

> ID：14037827
> 
> 赞同：0
> 
> 时间：2012-12-26T08:16:50.583
> 
> 标签：jquery-ui, jquery-droppable, jquery-layout

当我将图像拖放到 jquery 布局的一部分上时，我正在使用 jquery 布局插件并创建嵌套布局，第一次可以正常工作，但第二次无法正常工作。

我在图像的拖放功能上使用以下代码 - $("#mainContent").empty(); $("#mainContent").layout(DashboardGenerator.layoutSettings_Inner);

# java - Processing / java中文本到语音的长音节

> ID：14037830
> 
> 赞同：2
> 
> 时间：2012-12-26T08:17:09.527
> 
> 标签：java, processing, javasound, text-to-speech

我正在使用处理制作一个测试文本到语音程序。现在它基本上可以用作字母表音节的钢琴，但是当我按住“u”键时，它只会循环播放音频文件。我希望程序根据我按住“u”键的时间来提取音频的长度。

所以当我按住“u”时，我所拥有的会发出“uh uh uh uh uh uh uh”的声音

我想要的是当我按住“u”时发出“uuuuuuuuuuuuuuhh”的声音。

处理中是否有允许我延长这样的音频文件的功能？如果没有，有没有办法在 java 或 C 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:21:45.653

我认为您可以尝试研究一些基本概念的“粒度合成”。

如果您可以将核心声音分解为“颗粒”并将它们端到端放置（可能与插值有一些重叠以帮助平滑它们），这对于您尝试做的事情可能“足够好” . 要做到这一点，您自己可能需要具备足够的知识来编辑音频文件的 PCM 数据。

循环Java“剪辑”可能不起作用，因为连接处很可能会出现点击或静音。然而，我写了一个允许重叠的剪辑循环器——作为我正在研究的简单混音器的一部分。欢迎您尝试使用它。[http://www.java-gaming.org/topics/simple-audio-mixer-2nd-pass/27943/view.html](http://www.java-gaming.org/topics/simple-audio-mixer-2nd-pass/27943/view.html)。有帮助的关键工具是 PFClipLooper。但是 PFClipShooter 可以很好地处理短声音，因为它们允许以不同的音高播放 - 允许一些粗略的拐点近似值。

你是在使用 Audacity 还是其他 DAW？你也许可以把你的声音编辑成很短的东西，可以在那里循环，制作一个长的“uuuuuu”。给定长元音录音，您可以让该元音的回放检查由击键设置的布尔值。（您熟悉 Java 的播放代码吗？）您必须为声音停止编写一个干净的音量锥度。此外，这种方法仅适用于录制的元音的长度。

总的来说，这需要一些工作，这是肯定的。如果您正在寻找现有的图书馆，或者“简单的方法”，那么我不知道。我也不熟悉处理的所有细节以及使用 Java 库的难易程度。它可以利用 libpd（纯数据）或 csgrain 或其他合成器工具之类的工具吗？与我正在头脑风暴中的原始数据处理相比，这样的事情会更加精致。但也许我的建议会奏效。我想知道是否可以从处理中调用我的库？我从来没有测试过。源代码包含在内，因此您可以查看在那里循环剪辑的逻辑，以及以不同速度播放的逻辑。

# delphi - CreateBlobStream，流大小

> ID：14037832
> 
> 赞同：-1
> 
> 时间：2012-12-26T08:17:23.693
> 
> 标签：delphi, delphi-5, bde

我的代码：

```
 stream := qry.CreateBlobStream(qry.FieldByName('aaa'), bmRead); 
```

aaa 中的记录实际上大​​于流的大小，始终为 32786。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:34:50.213

根据我的网络搜索，需要在BDE管理员中增加BLOB SIZE参数：

*   [http://www.borlandtalk.com/blobstream-limited-to-32768-bytes-vt34635.html](http://www.borlandtalk.com/blobstream-limited-to-32768-bytes-vt34635.html)
*   [http://www.delphigroups.info/2/63/235340.html](http://www.delphigroups.info/2/63/235340.html)

这些线程中的第一个建议将 TQuery 的 RequestLive 设置为 True 的替代方法。

第二个线程可以追溯到 1902 年，这在 Y2K 错误的野外似乎是罕见的！

# opencv - OpenCV中的非连续范围

> ID：14037833
> 
> 赞同：0
> 
> 时间：2012-12-26T08:17:24.823
> 
> 标签：opencv

我需要从 OpenCV 矩阵中选择除一行之外的所有行。我想出的是从两个范围（从 0 到 i 和从 i + 1 到 matrix.rows）中选择行并将它们连接到一个新矩阵。

但是这个解决方案似乎很脏：连接将数据复制到一个新的矩阵，我不需要。而且，当i = 0或者matrix.rows时，拼接时会出错，因为其中一个子矩阵变空了，所以这种情况要单独处理。所有这些问题都造成了太多的痛苦，而我需要的是一个更优雅的解决方案。

# android - 用相机拍照并编辑

> ID：14037836
> 
> 赞同：1
> 
> 时间：2012-12-26T08:17:38.950
> 
> 标签：android, android-camera, android-camera-intent

我需要拍照并编辑它。我使用原始相机并返回大尺寸图像，所以当我尝试创建新的模板图像进行编辑时，应用程序将因为 outOfMemoryError 而被强制关闭。在将图像加载到我的应用程序之前，有什么方法可以帮助我调整图像大小吗？

我的代码在相机中拍照：

```
void loadImageFromCamera(){
    Intent takePicture = new Intent("android.media.action.IMAGE_CAPTURE");
    File photo = null;
    try{
        // place where to store camera taken picture
        photo = this.createTemporaryFile("picture", ".jpg");
        photo.delete();
    } catch(Exception e){

    }
    mImageUri = Uri.fromFile(photo);
    takePicture.putExtra(MediaStore.EXTRA_OUTPUT, mImageUri);
    startActivityForResult(takePicture, 0);
}
private File createTemporaryFile(String part, String ext) throws Exception{
    File tempDir = Environment.getExternalStorageDirectory();
    tempDir = new File(tempDir.getAbsolutePath() + "/.temp/");
    if(!tempDir.exists()){
        tempDir.mkdir();
    }
    return File.createTempFile(part, ext, tempDir);
}
public void grabImage(){
    this.getContentResolver().notifyChange(mImageUri, null);
    ContentResolver cr = this.getContentResolver();
    try {
        originImage = android.provider.MediaStore.Images.Media.getBitmap(cr, mImageUri);
    }catch (Exception e){

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:32:52.727

是的，您可以调整图像大小使用以下方法调整图像大小

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

# c# - 将值传递给 ObjectParameter 变量

> ID：14037838
> 
> 赞同：4
> 
> 时间：2012-12-26T08:18:01.627
> 
> 标签：c#, wcf, sql-server-2008, stored-procedures

我创建了一个带有一些参数的存储过程。这些是我的程序的参数：

```
ALTER Procedure [dbo].[SaveInvitation]
(
    @InvitationID INT OUTPUT,
    @UserID INT,
    @Email NCHAR(100),
    @InvitationGUID  UNIQUEIDENTIFIER OUTPUT
)
AS 
```

我的`function.cs`：

```
public SaveInvitation_Result SaveInvitation(int userID,string email)
{
        SaveInvitation_Result result = null;

        var results = this.DataContext.SaveInvitation(null,userID,email,null);

        if (results != null)
        {
            result = results.FirstOrDefault();
        }

        return result;
    } 
```

我将一些参数传递给我的函数`SaveInvitation`，如下所示：

我的`DataBaseModel.Designer.cs`：

```
public ObjectResult<SaveInvitation_Result> SaveInvitation(ObjectParameter invitationID, Nullable<global::System.Int32> userID, global::System.String email, ObjectParameter invitationGUID)
{
        ObjectParameter userIDParameter;
        if (userID.HasValue)
        {
            userIDParameter = new ObjectParameter("UserID", userID);
        }
        else
        {
            userIDParameter = new ObjectParameter("UserID", typeof(global::System.Int32));
        }

        ObjectParameter emailParameter;
        if (email != null)
        {
            emailParameter = new ObjectParameter("Email", email);
        }
        else
        {
            emailParameter = new ObjectParameter("Email", typeof(global::System.String));
        }

        return base.ExecuteFunction<SaveInvitation_Result>("SaveInvitation", invitationID, userIDParameter, emailParameter, invitationGUID);
} 
```

当我执行这个函数/程序时，我得到一个异常

> *参数数组中索引 0 处的参数为空。*

如何将值传递给`invitationID`and `invitationGUID`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T09:29:55.773

当`userID`或`email`为`null`时，您必须将参数的值设置为`DBNull.Value`：

```
public ObjectResult<SaveInvitation_Result> SaveInvitation(ObjectParameter invitationID, Nullable<global::System.Int32> userID, global::System.String email, ObjectParameter invitationGUID)
{
    ObjectParameter userIDParameter;
    if (userID.HasValue)
    {
        userIDParameter = new ObjectParameter("UserID", userID);
    }
    else
    {
        userIDParameter = new ObjectParameter("UserID", typeof(global::System.Int32));
        userIDParameter.Value = DBNull.Value;
    }

    ObjectParameter emailParameter;
    if (email != null)
    {
        emailParameter = new ObjectParameter("Email", email);
    }
    else
    {
        emailParameter = new ObjectParameter("Email", typeof(global::System.String));
        emailParameter.Value = DBNull.Value;
    }

    return base.ExecuteFunction<SaveInvitation_Result>("SaveInvitation", invitationID, userIDParameter, emailParameter, invitationGUID);
} 
```

# android - onPostExecute 未在 android 中调用

> ID：14037839
> 
> 赞同：0
> 
> 时间：2012-12-26T08:18:09.247
> 
> 标签：android, android-asynctask

`onPostExecute()`在我的应用程序中从 Web 服务获取值时，我无法调用`Android`。我在下面添加了代码。返回后线程退出`ArrayList`。你能检查我的代码中是否有任何问题吗？

```
public class searchuser extends AsyncTask<Void, Void,ArrayList<DeleteuserDetails>>{

        protected ArrayList<DeleteuserDetails> doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            path.setNamespace();
            path.setMethod_name("searchuser");
            path.setSoap_action();
            path.setUrl();
            selecteduserType=String.valueOf(utype.getSelectedItem());
            userid=edtTxtUserId.getText().toString();
            if(!String.valueOf(utype.getSelectedItem()).equals("select")){

            Webservice service=new Webservice(path.getNamespace(), path.getMethod_name(), path.getUrl(), path.getSoap_action());
            try{
            SoapObject searchUser=service.getRequest();
             PropertyInfo search_userid=new PropertyInfo();
             search_userid.setName("userID");
             search_userid.setValue(userid);
             searchUser.addProperty(search_userid);
            /* PropertyInfo search_utype=new PropertyInfo(); 
             search_utype.setName("utype");
             search_utype.setValue(selecteduserType);
             searchUser.addProperty(search_utype);*/
             SoapSerializationEnvelope envelope = service.getEnvelope(searchUser);
                SoapObject response = service.getResponse(envelope);
                int count = response.getPropertyCount();
                for (int i = 0; i < count; i++) {

                    SoapObject result = (SoapObject) response.getProperty(i);
                    DeleteuserDetails deleteuserDetails=new DeleteuserDetails();
                    if(result.getPropertyAsString(4)!=null){
                    deleteuserDetails.setUserId(result.getPropertyAsString(4));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(2)!=null){
                    deleteuserDetails.setUserName(result.getPropertyAsString(2));
                    }
                    else{

                    }
                    if(result.getPropertyAsString(3)!=null){
                        deleteuserDetails.setUserRole(result.getPropertyAsString(3));   
                    }
                    if(result.getPropertyAsString(1)!=null){
                        deleteuserDetails.setCreatedDate(result.getPropertyAsString(1));    
                    }
                    else{

                    }
                    try {
                        deleteuserDetails.setCreatedBy(result.getPropertyAsString(0).toString());
                    }
                    catch(NullPointerException npe) {
                        deleteuserDetails.setCreatedBy("null");
                    }
                    userdetail.add(deleteuserDetails);
                }

        }
            catch(Exception e){
                e.printStackTrace();
            }
            }
            else{
                alertbox.generateAlert(Deleteuser.this, "Please select usertype", "Default value Selected", R.drawable.noicon);

            }
            return userdetail;
        }
        protected void onPostExecute( ArrayList<DeleteuserDetails>deleteuserDetails) {
            deleteuserList = new TextView[deleteuserDetails.size()];

            for(int i=0;i<deleteuserDetails.size();i++){

                    TableRow deleteUserRow=new TableRow(Deleteuser.this);
                    deleteUserRow.setId(i);
                    deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    selectcheck = new CheckBox(Deleteuser.this);
                    selectcheck.setId(i);
                    selectcheck.setTag(i);

                    deleteUserRow.addView(selectcheck);

                    deleteuserList[i]=new TextView(Deleteuser.this);
                //  deleteuserList[i].setId(i);
                    deleteuserList[i].setTag(i);
                    deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                    deleteUserRow.addView(deleteuserList[i]);

                    uName=new TextView(Deleteuser.this);
                    uName.setId(i);
                    uName.setText(deleteuserDetails.get(i).getUserName());
                    deleteUserRow.addView(uName);

                    Userrole=new TextView(Deleteuser.this);
                    Userrole.setId(i);
                    Userrole.setPadding(20, 0, 0, 0);
                    Userrole.setText(deleteuserDetails.get(i).getUserRole());
                    deleteUserRow.addView(Userrole);

                    CreatedDate=new TextView(Deleteuser.this);
                    CreatedDate.setId(i);
                    CreatedDate.setPadding(20, 0, 0, 0);
                    CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                    deleteUserRow.addView(CreatedDate);

                    CreatedBy=new TextView(Deleteuser.this);
                    CreatedBy.setId(i);
                    CreatedBy.setPadding(20, 0, 0, 0);
                    CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                    deleteUserRow.addView(CreatedBy);
                    userdetailTable.addView(deleteUserRow,
                            new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));

                    selectcheck.setOnClickListener(listener);
                    Log.i("Exception",""+i);
                }
            TableRow addcomponentrow=new TableRow(Deleteuser.this);
            addcomponentrow.setId(200);
            addcomponentrow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            Button Deletecomponentbtn=new Button(Deleteuser.this);
            Deletecomponentbtn.setText("Delete");
            Deletecomponentbtn.setId(200);
            Deletecomponentbtn.setPadding(10, 0, 20, 2);
            Deletecomponentbtn.setBackgroundColor(color.red);
            addcomponentrow.addView(Deletecomponentbtn);

            userdetailTable.addView(addcomponentrow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            Deletecomponentbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    // TODO Auto-generated method stub
                    new DeleteUserid().execute(checkedValue);
                }
            });

        }
        final OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                int index = (Integer) v.getTag();
                checkedValue=(String) deleteuserList[index].getText();

            }
        };

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:23:01.267

改变

```
protected void onPostExecute( ArrayList<DeleteuserDetails>deleteuserDetails) {
                                                     // ^^^ 
```

到

```
@Override
protected void onPostExecute( ArrayList<DeleteuserDetails> deleteuserDetails) {
 // your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:23:01.473

初始化`DeleteuserDetails`如下：

```
 DeleteuserDetails deleteuserDetails = new DeleteuserDetails(); 
```

声明字符串变量并赋值

```
 String userId = "";
  String userName = "";
  String userRole = "";
  String createdDate = "";
  String createdBy = ""; 
```

在模型中，生成构造函数如下：

```
 DeleteuserDetails(String userId, String userName, String userRole, String createdDate, String createdBy) {
   this.userId = userId;
   this.userName = userName;
   this.userRole = userRole;
   this.createdDate = createdDate;
   this.createdBy = createdBy;
 } 
```

现在，您在`doInBackground(..)`

```
 if (result.getPropertyAsString(4) != null) 
             userId = result.getPropertyAsString(4);
   if (result.getPropertyAsString(2) != null) 
             userName = result.getPropertyAsString(2);
   if (result.getPropertyAsString(3) != null) 
             userRole = result.getPropertyAsString(3);
   if (result.getPropertyAsString(1) != null) 
             createdDate = result.getPropertyAsString(1);
    if (result.getPropertyAsString(0) != null) 
        createdBy = result.getPropertyAsString(0);

   deleteuserDetails = new  DeleteuserDetails(userId, userName, userRole, createdDate,  createdBy);

     userdetail.add(deleteuserDetails); 
```

现在`runOnUiThread()`在 onPostExecute() 方法中添加方法并按照以下步骤操作：

```
 runOnUiThread(new Runnable() {

            @Override
            public void run() {

            deleteuserList = new TextView[deleteuserDetails.size()];

            for(int i=0;i<deleteuserDetails.size();i++){

                    TableRow deleteUserRow=new TableRow(Deleteuser.this);
                    deleteUserRow.setId(i);
                    deleteUserRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    selectcheck = new CheckBox(Deleteuser.this);
                    selectcheck.setId(i);
                    selectcheck.setTag(i);

                    deleteUserRow.addView(selectcheck);

                    deleteuserList[i]=new TextView(Deleteuser.this);
                //  deleteuserList[i].setId(i);
                    deleteuserList[i].setTag(i);
                    deleteuserList[i].setText(deleteuserDetails.get(i).getUserId());
                    deleteUserRow.addView(deleteuserList[i]);

                    uName=new TextView(Deleteuser.this);
                    uName.setId(i);
                    uName.setText(deleteuserDetails.get(i).getUserName());
                    deleteUserRow.addView(uName);

                    Userrole=new TextView(Deleteuser.this);
                    Userrole.setId(i);
                    Userrole.setPadding(20, 0, 0, 0);
                    Userrole.setText(deleteuserDetails.get(i).getUserRole());
                    deleteUserRow.addView(Userrole);

                    CreatedDate=new TextView(Deleteuser.this);
                    CreatedDate.setId(i);
                    CreatedDate.setPadding(20, 0, 0, 0);
                    CreatedDate.setText(deleteuserDetails.get(i).getCreatedDate());
                    deleteUserRow.addView(CreatedDate);

                    CreatedBy=new TextView(Deleteuser.this);
                    CreatedBy.setId(i);
                    CreatedBy.setPadding(20, 0, 0, 0);
                    CreatedBy.setText(deleteuserDetails.get(i).getCreatedBy());
                    deleteUserRow.addView(CreatedBy);
                    userdetailTable.addView(deleteUserRow,
                            new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                    LayoutParams.WRAP_CONTENT));

                    selectcheck.setOnClickListener(listener);
                    Log.i("Exception",""+i);
                }
            TableRow addcomponentrow=new TableRow(Deleteuser.this);
            addcomponentrow.setId(200);
            addcomponentrow.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

            Button Deletecomponentbtn=new Button(Deleteuser.this);
            Deletecomponentbtn.setText("Delete");
            Deletecomponentbtn.setId(200);
            Deletecomponentbtn.setPadding(10, 0, 20, 2);
            Deletecomponentbtn.setBackgroundColor(color.red);
            addcomponentrow.addView(Deletecomponentbtn);

            userdetailTable.addView(addcomponentrow,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            Deletecomponentbtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    // TODO Auto-generated method stub
                    new DeleteUserid().execute(checkedValue);
                }
            });

        }
        final OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                int index = (Integer) v.getTag();
                checkedValue=(String) deleteuserList[index].getText();

            }
        };

            }
        });
    } 
```

# ehcache - 我们可以同时使用 ehcache 复制和 terracotta 吗？

> ID：14037841
> 
> 赞同：0
> 
> 时间：2012-12-26T08:18:33.093
> 
> 标签：ehcache, terracotta

我在两台服务器上使用带有兵马俑的分布式 ehcache。在我的缓存管理器中，我有多个缓存。但是现在我有一个要求，每当将一个元素添加到 1 个服务器上的 1 个特定缓存中时，我都希望收到有关该放置在第二个服务器上的通知。我尝试使用 CacheEventListener 但它在本地工作。你能帮我弄清楚我能做什么。我可以将复制机制与 terracotta 一起使用来解决这个问题吗，因为通过在 1 个缓存上使用复制，我将在其他服务器上获取该元素，而对于所有其他缓存，我可以使用 terracotta。请帮助它是非常紧急的。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:52:36.117

CacheEventListener 只能在本地工作，但您可以通过 Terracotta 将其配置为在集群上工作，也可以使用 listenFor 属性。它可以采用以下值：

*   all - 默认是传递所有本地和远程事件
*   local - 仅传递源自当前节点的事件
*   远程 - 仅传递源自其他节点的事件

检查[http://ehcache.org/documentation/apis/cache-event-listeners上的文档](http://ehcache.org/documentation/apis/cache-event-listeners)

希望这可以帮助！

更新：事实证明，您需要另一个 CacheEventListener 来使事件分布在集群上。您的配置将类似于以下内容：

```
<cache name="myCache"
       ...
       <cacheEventListenerFactory class="net.sf.ehcache.event.TerracottaCacheEventReplicationFactory" properties="" listenFor="all"/>
       <cacheEventListenerFactory class="foo.bar.MyListenerFactory" properties="" listenFor="all"/>
       <terracotta/>
</cache> 
```

# java - 方法 renderJSON(Map ) 未定义

> ID：14037842
> 
> 赞同：1
> 
> 时间：2012-12-26T08:18:45.027
> 
> 标签：java, playframework-2.0, response, render

我已经`Play framework 2.0.4`安装了。对于我拥有的 java 应用程序，我想以`JSON`格式呈现响应。

但是当我使用时`renderJSON`，编译器给出：

> 该方法`renderJSON(Map<String,String>)`未定义类型状态

我在这里想念什么？

```
public class Status extends Controller {

    public static void myMethod(String url) {
        Map<String, String> map = new HashMap<String, String>();
        map.put("id", "1069");
        map.put("url", url);
        renderJSON(map);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:44:58.443

我猜您正在尝试将应用程序从版本 1 移植到 2？在 Play 2 中，这是您返回 JSON 响应的方式：

```
ObjectNode result = Json.newObject();
result.put("id", "1069");
result.put("url", url);
return ok(result); 
```

您还应该查看[文档](http://www.playframework.org/documentation/2.0/JavaJsonRequests)。

# drupal - excel表格中的批量

> ID：14037847
> 
> 赞同：0
> 
> 时间：2012-12-26T08:19:22.207
> 
> 标签：drupal, drupal-6, drupal-7, drupal-modules

我们有一个excel表有类别和子类别我们需要使用drupe模块将它批量到数据库任何人都可以帮助我们吗？

表格格式： SongName 歌手名 专辑 [ToneName] [Discribtion] [ToneCode] 类别

```
category
   singerName
      album
        songName 
```

有没有drupal模块可以做到这一点？

我将这些数据保存为分类（术语）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:20:17.697

试试这个：[http ://drupal.org/project/taxonomy_csv](http://drupal.org/project/taxonomy_csv)

我曾经使用它来满足您的相同要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T16:26:29.813

您可能需要 drupal [Feeds](http://drupal.org/project/feeds)模块。它可以让您一次或多次进行 csv 导入。

# java - Java NetBeans IDE - JPanel 中的动画闪烁

> ID：14037848
> 
> 赞同：1
> 
> 时间：2012-12-26T08:19:38.570
> 
> 标签：java, swing, animation, graphics, ide

我目前正在 NetBeans 中学习 Java 动画和图形。

我决定从 JPanel 中的一个简单的球运动开始。

我在解决闪烁问题时遇到了一些问题。我看过很多论坛，但大多数都是针对使用双缓冲的 AWT，但我知道 SWING 组件不需要双缓冲。我试过 - 使用`repaint()`and 。`clearRect()`.

在 2 中，我发现使用 . `clearRect()`给了我更好的结果，但不是一直无缝的无闪烁动画。所以我想知道是否有更好的方法来消除闪烁。

这是我的代码：

```
public class NewJFrame extends javax.swing.JFrame {

int x;
int y;
int xspeed = 1;
int yspeed = 1;
int width;
int height;
Graphics g;

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }                             

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
g = jp.getGraphics();
width = jp.getWidth();
height = jp.getHeight();
final Timer timerCHK = new Timer();
timerCHK.schedule(new TimerTask() {
    public void run() {
        move();
        time();

    }
}, 1000, 10);

    }                                        
void time() {
    final Graphics g = jp.getGraphics();
    final Timer timerCHK = new Timer();
    timerCHK.schedule(new TimerTask() {
        public void run() {
            g.clearRect(0, 0, jp.getWidth() - 3, jp.getHeight() - 3);

        }
    }, 1000, 12);
}

void move() {
    x = x + xspeed;
    y = y + yspeed;
    Graphics mk = jp.getGraphics();
    if (x < 0) {
        x = 0;
        xspeed = -xspeed;
    } else if (x > width - 20) {
        x = width - 20;
        xspeed = -xspeed;
    }

    if (y < 0) {
        y = 0;
        yspeed = -yspeed;
    } else if (y == height - 20) {
        y = height - 20;
        yspeed = -yspeed;
    }

    mk.drawOval(x, y, 20, 20);

}
    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:29:19.900

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class NewJFrame extends JFrame {

    private JPanel jp;
    private Timer timer;

    public NewJFrame() {
        initComponents();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.pack();
        this.setLocationByPlatform(true);
        timer.start();
    }

    public void initComponents() {
        ActionListener al = new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                jp.repaint();
            }
        };
        timer = new Timer(50,al);

        jp = new JPanel() {

            int x;
            int y;
            int xspeed = 1;
            int yspeed = 1;

            Dimension preferredSize = new Dimension(300, 100);

            @Override
            public Dimension getPreferredSize() {
                return preferredSize;
            }

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                this.move();
                Graphics2D g2 = (Graphics2D)g;
                g2.setRenderingHint(
                        RenderingHints.KEY_ANTIALIASING, 
                        RenderingHints.VALUE_ANTIALIAS_ON);
                g.drawOval(x, y, 20, 20);
            }

            void move() {
                x = x + xspeed;
                y = y + yspeed;
                if (x < 0) {
                    x = 0;
                    xspeed = -xspeed;
                } else if (x > getWidth() - 20) {
                    x = getWidth() - 20;
                    xspeed = -xspeed;
                }

                if (y < 0) {
                    y = 0;
                    yspeed = -yspeed;
                } else if (y == getHeight() - 20) {
                    y = getHeight() - 20;
                    yspeed = -yspeed;
                }
            }
        };
        jp.setBackground(Color.ORANGE);

        this.add(jp);
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:31:44.267

***这不是一个答案（本身），而是一个扩展评论 - 评论没有足够的空间***

> 我想了解更多。你能推荐一些关于基本动画的教程（比如你提到的例子）来开始吗？

不幸的是，没有。几年前我参加了一个简短的 3D 动画课程，并将其中的许多基本原理应用到我的编程中。虽然许多理论对我们所做的事情来说是多余的，但理解它们仍然很重要。

您将面临的问题不仅是您需要对动画理论有很好的理解，还需要对 Swing 的内部工作原理和 API 有很好的理解。

在这方面有许多很好的 API 可以帮助您，但您仍然需要了解动画理论才能将它们用于盗版用途。

*   [TimingFramwork](http://java.net/projects/timingframework/pages/Home) - 在版本 1 之前，我一直在使用这个 API。我围绕它构建了一个合理的代码库，并且发现它非常灵活和有用。最新版本需要一些工作才能运行......
*   [Trident](http://kenai.com/projects/trident/pages/Home) - 与 TimingFramework 类似，但比 TimingFramework 更关注组件操作。
*   [通用补间引擎](http://code.google.com/p/java-universal-tween-engine/)- 我没有使用过这个，但我非常有兴趣看看......

Kirill Grouchnikov 在他的[Pushing Pixels](http://www.pushing-pixels.org/)网站上发表了一些出色的文章（以支持他的[Trident 动画](http://kenai.com/projects/trident/pages/Home)引擎），这可能是这两个学科之间的一个合适的折衷方案。

*   [动画 101 – 从 A 点到 B 点](http://www.pushing-pixels.org/2010/01/04/animations-101-from-point-a-to-point-b.html)
*   [动画 102 – 改变方向](http://www.pushing-pixels.org/2010/01/05/animations-102-changing-direction.html)
*   [动画 201 – 颜色](http://www.pushing-pixels.org/2010/01/07/animations-201-color.html)
*   [动画 202 - 滚动](http://www.pushing-pixels.org/2010/01/09/animations-202-scrolling.html)
*   [动画——大局](http://www.pushing-pixels.org/2010/01/11/animations-why-bother.html)

基里尔还强调了以下文章（我不得不承认，我还没有读过……还没有读过；））

*   [核心 Swing 组件的高级动画——第一部分](http://www.pushing-pixels.org/2007/07/08/advanced-animations-on-core-swing-components-part-i.html)
*   [核心 Swing 组件的高级动画 - 第二部分](http://www.pushing-pixels.org/2007/07/09/advanced-animations-on-core-swing-components-part-ii.html)
*   [核心 Swing 组件的高级动画——第三部分](http://www.pushing-pixels.org/2007/07/10/advanced-animations-on-core-swing-components-part-iii.html)
*   [核心 Swing 组件的高级动画——第四部分](http://www.pushing-pixels.org/2007/07/16/advanced-animations-on-core-swing-components-part-iv.html)
*   [核心 Swing 组件的高级动画——第五部分](http://www.pushing-pixels.org/2007/09/19/advanced-animations-on-core-swing-components-part-v.html)

**使用 Swing 侧更新**

对于事物的 Swing 方面，您需要很好地理解...

在 Swing 中绘画 - 查看[在 AWT 中绘画和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)并[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)。

这真的非常重要。这是开发人员第一次开始尝试在 Swing 中执行动画时最常见的误解之一。

您还需要了解[Java 中的并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)，尤其是它如何应用于[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T07:50:57.217

我有一个非常相似的闪烁问题，我用过

```
contentPane.updateUI(); 
```

并解决了我所有的问题，如果 updateUI() 解决了你的问题，请告诉我

# iphone - 从包含“&”的网络服务中获取数据不会给出正确的结果

> ID：14037853
> 
> 赞同：1
> 
> 时间：2012-12-26T08:20:52.627
> 
> 标签：iphone, objective-c, web-services

我从网络服务获取这个字符串“Rasberry & Banana Smoothies”，它把字符串作为三个不同的值而不是一个值：

覆盆子 香蕉
冰沙

如果我`&`从服务器数据库中删除符号，它会按原样获取完整的字符串。

我不明白为什么会这样，有人可以指导我吗？

提前致谢。

在这里，我发布了获取它的代码，这可能有助于理解问题：

```
- (void)viewDidLoad
{
[super viewDidLoad];

arrayTitle = [[NSMutableArray alloc]init];
arrayImage = [[NSMutableArray alloc]init];
arrayRecipe = [[NSMutableArray alloc]init];

self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"2-right-side-sheet-1.png"]];

NSString *url=[[NSString alloc]initWithFormat:@"http://smoktec.net/Monty/api/?"];

NSString *Action=@"action=";

NSString *compUrl=[[NSString alloc]initWithFormat:@"%@%@%@",url,Action,@"Recipes"];

NSURL *urlToPars= [NSURL URLWithString:compUrl];
NSLog(@"%@",compUrl);

[self parseWithUrl3:urlToPars];
}

-(void)parseWithUrl3:(NSURL *)compUrl
{
    parser=[[NSXMLParser alloc]initWithContentsOfURL:compUrl];
    [parser setDelegate:self];
    [parser parse];
    [parser release];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    stcurrentelement=[NSString stringWithFormat:@"%@",elementName];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if(!(stcurrentelement==nil))
    {
        if([stcurrentelement isEqualToString:@"Recipetitle"])
        {
            [arrayTitle addObject:string];
            NSLog(@"%@",string);
        }

        else if([stcurrentelement isEqualToString:@"RecipeImg"])
        {
            [arrayImage addObject:string];
            NSLog(@"%@",string);
        }

        else if([stcurrentelement isEqualToString:@"Recipeid"])
        {
            [arrayRecipe addObject:string];
            NSLog(@"%@",string);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:41:26.037

尝试这个：

```
NSString *compUrl=[[NSString alloc]initWithFormat:@"%@%@%@",url,Action,@"Recipes"];
NSString *URLEncodedText = [compURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

您需要在发出请求之前对 URL 字符串进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:39:22.447

最后是解决方案，在从服务器接收数据后连接字符串。

```
NSString *str = [arrayTitle objectAtIndex:3];
NSString *str1 = [arrayTitle objectAtIndex:4];
NSString *str2 = [arrayTitle objectAtIndex:5];

NSString *strring = [str stringByAppendingString:str1];
 NSString *strring1 = [strring stringByAppendingString:str2];

NSLog(@"strr:%@",strring1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:32:47.407

您应该对 Web 服务结果/响应进行编码，然后重试。

# javascript - 如何使用javascript（在Greasemonkey脚本中）计算一个单词出现在网页中的次数？

> ID：14037858
> 
> 赞同：0
> 
> 时间：2012-12-26T08:21:27.430
> 
> 标签：javascript, jquery, greasemonkey, word-count

我是 javascript 的初学者，不知道如何计算一个单词在网页中出现的次数。

我在不同的论坛上进行了研究，但没有得到任何帮助。我非常感谢任何实现此功能的建议或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T07:48:11.417

Four things to be aware of if you want to use a Greasemonkey script to count instances of a word:

1.  Use [the special `\b` character](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-word-boundary), in your regex to ensure that you actually get ***words***.
    For example, `/\bof\b/` matches "of" but not "offer".

2.  Always check that `match()` results are not null before trying to access their properties! `match(regex).length` will throw an exception much of the time.

3.  Beware that careless **scripts can mutually interfere with the web page.** This is part of why one of the other answers did not work.
    To avoid this, turn Greasemonkey's sandbox back on by specifying a `@grant` directive. GM scripts now default to `grant none` in many situations!

4.  Beware that many sites, like Google, **load content via AJAX**, long after the Greasemonkey script fires. There are many strategies to compensate for that. Perhaps the most straightforward is to use a timer.

Putting it all together, here is **a complete script** that compensates for all of these issues. You can also [**see the code in action at jsFiddle**](http://jsfiddle.net/TEGXC/):

```
// ==UserScript==
// @name     _Show word counts
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/
$("body").append ('<div id="gmWordCount"></div>');

checkWordCount ();  //-- Initial run, works for static HTML only.

//--- Check for AJAX loaded words... Over twice a sec is plenty fast.
var wordChkTimer = setInterval (checkWordCount, 444);

function checkWordCount () {
    //--- Search for "of" as a whole word.
    var wordStr     = "of";
    var wordRegex   = new RegExp ("\\b" + wordStr + "\\b", "gi");
    var matchRez    = $(document.body).text ().match (wordRegex);
    var wordCount   = matchRez ? matchRez.length : 0;

    //--- Display the results.
    var countReport = '';
    switch (wordCount) {
        case 0:
            countReport = '"of" was not found!'
        break;
        case 1:
            countReport = '"of" was found one time.'
        break;
        default:
            countReport = '"of" was found ' + wordCount + ' times.'
        break;
    }

    //--- Display results to the user.
    $("#gmWordCount").text (countReport);
}

//--- Position and style the display output,
GM_addStyle ( "                                 \
    #gmWordCount {                              \
        background:         orange;             \
        position:           fixed;              \
        top:                0;                  \
        left:               0;                  \
        width:              100%;               \
        z-index:            6666;               \
    }                                           \
" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:48:59.490

这对你来说是一个开始。就目前而言，它将匹配存在于其他单词中的实例，例如“coffee”将计入“of”，它会干扰其他页面，我没有检查 jQuery 是否已经存在。所以你需要自己做一些工作。

```
// ==UserScript==
// @name        Count words
// @namespace   count
// @version     1
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// ==/UserScript==

$(function(){
    var word='of'; // put your word here
    var regex = new RegExp(word, "gi")
    alert ($('body').text().match(regex).length);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:24:37.837

```
var text = document.body.textContent
    .replace(/\r?\n?/g, "") // removes lines
    .replace(/\s{2,}/g, " "), // removes duplicate spaces
word = new RegExp("of", "gi");

alert(text.match(word).length); 
```

# objective-c - 在 OSX 中更新 sqlite3 数据库的列

> ID：14037865
> 
> 赞同：1
> 
> 时间：2012-12-26T08:22:10.267
> 
> 标签：objective-c, macos, cocoa, sqlite

我是 OSX 应用程序开发的新手。我正在尝试在 sqlite 数据库中存储 4 个值（日期、值 1、值 2、值 3）。如果使用现有日期输入新记录，我需要更新记录的最后 3 个字段。我该怎么做。我插入数据库的代码如下

```
- (void) addToDatabase:(Day *)sampleDay
{
  databasePath = [Database_Access createDirectory];

  const char *dbpath = [databasePath UTF8String];

  if (sqlite3_open(dbpath, &database) == SQLITE_OK)
  {
    char *errMsg;

    NSString *str= [NSString stringWithFormat:@"INSERT INTO TABLEOBJ (DATE,NIDHIN,PAI,RUBEN ) VALUES ('%@',%li,%li,%li)", sampleDay.date, sampleDay.value1, sampleDay.value2, sampleDay.value3];

    const char *sql_stmt = [str UTF8String];

    if (sqlite3_exec(database, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
    {

    }

    sqlite3_close(database);

  } 
  else 
  {

  }
} 
```

为了满足这一要求，需要包括哪些内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T08:37:30.590

首先检查日期是否已经存在

```
if (sqlite3_open(dbpath, &quizDB) == SQLITE_OK)
{
        sqlite3_stmt *statement;

        // ================Read date with current date value table===================
        NSString *readDate = [NSString stringWithFormat: @"SELECT * FROM TABLEOBJ WHERE DATE = %@",sampleDay.date];

        const char *readDate_stmt = [readDate UTF8String];
        if (sqlite3_prepare_v2(quizDB, readDate_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            NSString *str;

            if (sqlite3_step(statement) == SQLITE_ROW) 
            {
                str = [NSString stringWithFormat:@"INSERT INTO TABLEOBJ (DATE,NIDHIN,PAI,RUBEN ) VALUES ('%@',%li,%li,%li)", sampleDay.date, sampleDay.value1, sampleDay.value2, sampleDay.value3];
            }
            else
            {
                 str = [NSString stringWithFormat:@"UPDATE TABLEOBJ SET NIDHIN = %li, PAI = %li, RUBEN = %li where DATE = %@", sampleDay.value1, sampleDay.value2, sampleDay.value3,sampleDay.date]; 
            }

            // Do the execution steps
            sqlite3_finalize(statement);
        }
    } 
```

# python - 在python中解析损坏的html页面

> ID：14037866
> 
> 赞同：2
> 
> 时间：2012-12-26T08:22:12.380
> 
> 标签：python, html-parsing, beautifulsoup, lxml

我正在尝试解析一个损坏的 html 页面，该页面在花药评论中有一个评论，所有著名的 htmlparsers（如 beautifulsoup、lxml 和 HTMLParser）都给出了语法错误。以下是代码。如何忽略损坏代码的部分并解析页面的其余部分？

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>

<script language="JavaScript">
<!--
     function setTimeOffsetVars (Link) { 
   // code removed
 } 

<!-- Image Preloader - takes an array of images to preload --> 
    function warningCheck(e, warnMsg) {
   // code removed
}
-->
</script>

</head>

<body topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0">
<!-- lot of useful code -->
</body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:24:05.550

如果您知道问题出在哪里，您可以进行预处理：首先使用像正则表达式这样的原始方法来去除有问题的内部注释，然后使用真正的解析器对其进行处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:00:59.100

我对这个 html 没有错误。我试过beautifulsoup4和lxml。

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(s)
print soup.prettify()

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <script language="JavaScript">
   &lt;!--
     function setTimeOffsetVars (Link) { 
   // code removed
 } 

&lt;!-- Image Preloader - takes an array of images to preload --&gt; 
    function warningCheck(e, warnMsg) {
   // code removed
}
--&gt;
  </script>
 </head>
 <body bottommargin="0" leftmargin="0" marginheight="0" marginwidth="0" rightmargin="0" topmargin="0">
  <!-- lot of useful code -->
 </body>
</html> 
```

# maven-2 - java.lang.NoSuchMethodError: com.google.gwt.inject.client.GinModules.properties()[Ljava/lang/String;

> ID：14037868
> 
> 赞同：0
> 
> 时间：2012-12-26T08:22:20.977
> 
> 标签：maven-2, mvp4g

我已经创建了 gwt maven 项目。我正在使用 mvp4g 并使用 maven 包含所有必需的 jar，并且 pom.xml 包含以下依赖项：

```
 <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-assisted-inject</artifactId>
            <version>2.0</version>
        </dependency>
<dependency>
            <groupId>com.google.gwt.inject</groupId>
            <artifactId>gin</artifactId>
            <version>2.0.0</version>
        </dependency>
<dependency>
            <groupId>com.googlecode.mvp4g</groupId>
            <artifactId>mvp4g</artifactId>
            <version>1.4.0</version>
        </dependency> 
```

但是我在编译时遇到了这个异常：

> java.lang.NoSuchMethodError: com.google.gwt.inject.client.GinModules.properties()[Ljava/lang/String; 在 com.google.gwt.inject.rebind.GinjectorGenerator.getPropertyNamesFromInjectorInterface(GinjectorGenerator.java:185) 在 com.google.gwt.inject.rebind.GinjectorGenerator.getPropertyModuleNames(GinjectorGenerator.java:155)

是否有任何 jar 丢失或版本问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:42:36.890

为什么要定义 gin 工件的不同版本，因为[mvp4g 工件](http://search.maven.org/remotecontent?filepath=com/googlecode/mvp4g/mvp4g/1.4.0/mvp4g-1.4.0.pom)已经具有依赖关系但对不同的版本：

```
 <dependency>
        <groupId>com.google.gwt.inject</groupId>
        <artifactId>gin</artifactId>
        <version>1.5.0</version>
    </dependency> 
```

我建议只删除对 gin artifact 的显式依赖并保留由 mvp4g artifact 定义的版本。此外，[gin 工件本身已经依赖](http://search.maven.org/remotecontent?filepath=com/google/gwt/inject/gin/1.5.0/gin-1.5.0.pom)于 guice-assistent 工件等。所以只需使用 mvp4g 作为唯一依赖项，让 maven 完成它的工作。如果这可行，您可以将版本更改为例如 google guice。

# c# - 在 asp .net 中返回上一页的超链接

> ID：14037870
> 
> 赞同：21
> 
> 时间：2012-12-26T08:22:48.950
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我在 asp .net 中有一个页面`(http://localhost/error/pagenotfound).`

页面中有一个链接，单击该链接必须返回到我来自的上一页。

```
<a href="#">Go Back to Previous Page.</a> 
```

如何从历史记录中返回上一页

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-26T08:27:45.210

你可以使用这个：

```
<a href='javascript:history.go(-1)'>Go Back to Previous Page</a> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-26T09:02:49.887

如果您使用的是 asp.net，请记住

```
javascript:history.go(-1) 
```

和

```
window.history.back() 
```

两者都将带您返回页面。
但前一页不会完全是前一页。

## 例如

假设您在页面上并且 当您单击按钮时`Default.aspx`有一个现在，并且**在这种情况下您又回到了上一页仍然是您的 Default.aspx**`asp:button`
`Default.aspx`

 ****再举一个例子** ， 您有两个页面`Default1.aspx`，`Default2.aspx`
**条件 1** :- 单击按钮`Default1.aspx`将您重定向到`Default2.aspx`
ok 您的上一页是`Default1.aspx`
**条件 2** :- 按钮单击`Default1.aspx`并在同一`Default1.aspx`页面 上发回
现在您的上一页仍然存在`Default1.aspx`

* * *

**编辑**

```
 protected void Page_Load(object sender, EventArgs e)
 {
     if( !IsPostBack )
     {
        ViewState["RefUrl"] = Request.UrlReferrer.ToString();
     }
  } 
```

并在后退按钮中使用它，如下所示

```
 protected void Button3_Click(object sender, EventArgs e)
 {
      object refUrl = ViewState["RefUrl"];
      if (refUrl != null)
          Response.Redirect((string)refUrl);
 } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-03T10:57:09.240

转到上一页

**第一种方法**

```
<a href="javascript: history.go(-1)">Go Back</a> 
```

**第二种方法**

```
<a href="##" onClick="history.go(-1); return false;">Go back</a> 
```

如果我们想多退一步然后增加

```
For going 2 steps back history.go(-2)
For going 3 steps back history.go(-3)
For going 4 steps back history.go(-4)
and so on........ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-26T08:37:37.117

使用此代码

```
 <html>
    <head>
    <script>
    function goBack()
      {
      window.history.back()
      }
    </script>
    </head>
    <body>

    <a href="#" onclick="goBack()">Back</a>

    </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-27T12:28:33.883

我找到了这个例子

```
<input type="button" value=" &lt;-- BACK " onclick="history.go(-1);return false;"> 
```

只需将此页面放在您的页面上，它就可以正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-26T09:11:10.823

您应该添加一个关于 onclick 的属性，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    yourButton.Attributes.Add("onClick", "javascript:history.back(); return false;");
}

protected void yourButtonClick(object sender, EventArgs e)
{
      Response.Write("Stackoverflow <br/>");
} 
```

这是关于使用按钮转到上一页，您可以根据您的更改进行修改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-24T13:11:21.397

我整个周末都在看这个，但没有找到我想要的答案。问题是，在回发 history.go(-1); 之后 不会回到您想去的地方 - 即让您到达那里的页面（进行任何更改）。

使用 Request.UrlReferrer.ToString(); 将重新加载您要返回的页面，您可能和我一样，不想丢失对页面所做的任何更改。在 2013 年的 Rizwan Gill 上方，您找到了您想要返回 2、3 或 4 页的答案，但他没有给出一个好的方法。

执行此操作的最佳方法实际上是在调用页面时使用弹出模式，如果您正在编写调用页面，但如果您想这样做并且有一个后退按钮，您必须记住每个回发并计算它们。

因此，从您的隐藏字段开始（在您的 .aspx 文件中）：

```
 <asp:hiddenfield id="fldPostbackCount"
        value="0" 
        runat="server"/> 
```

然后在每次回发时增加值（在您的 .aspx.vb 文件中）：

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not IsPostBack Then
        fldPostbackCount.Value = 1
    Else
        fldPostbackCount.Value = Int32.Parse(fldPostbackCount.Value) + 1
    End If

End Sub  '  Page_Load() 
```

（我确信 .cs 的人可以处理这个到 C 的转换）

现在回到你的 .aspx 文件，你必须有一个历史按钮：

```
 <a href="javascript:history.go(-<%: fldPostbackCount.Value %>)" title="Back to Previous Page">Back to Previous Page</a> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-12T20:59:56.347

以शेखर为例

我建议执行以下操作，并在回发时避免 url 上的任何循环。

```
string from = Request.UrlReferrer.ToString();
string here = Request.Url.AbsoluteUri.ToString();

if(from != here)
    Session["page"] = Request.UrlReferrer.ToString(); 
```

在您的按钮上单击

```
object refUrl = Session["page"];
if (refUrl != null)
    Response.Redirect((string)refUrl); 
```

这将始终保存您来自的 PAGE。

希望能帮助到你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-05T12:53:02.657

在您的 C# 代码中，只需编写以下代码：

```
Response.Write("<script>history.go(-1);</script>"); 
```**

# java - Struts form 不适用于 struts tile

> ID：14037875
> 
> 赞同：2
> 
> 时间：2012-12-26T08:23:01.460
> 
> 标签：java, jakarta-ee, struts

我正在设计一个购物车项目，其中我的内容区域单独更改，因此我使用 struts 磁贴对其进行了配置，并且一切正常，直到我在项目中遇到表单。每当我尝试使用图块显示表单（struts 表单）时。表格没有编译它只是这样`<html:text property="username"/>`请帮助。

我的瓷砖 def 是

```
<tiles-definitions>
<definition name="main-layout" path="/WEB-INF/layout.jsp">
    <put name="title" value="" />
    <put name="header" value="/WEB-INF/layout/header.jsp"/>
    <put name="secmenu" value="/WEB-INF/layout/secmenu.jsp"/>
    <put name="menu" value="/WEB-INF/layout/menu.jsp"/>
    <put name="content" value=""/>
    <put name="footer" value="/WEB-INF/layout/footer.jsp"/>
</definition>    
<definition name="index" extends="main-layout">
    <put name="title" value="The Mobile Store"/>
    <put name="content" value="/WEB-INF/pages/homecontent.jsp"/>
</definition>
<definition name="login" extends="main-layout">
    <put name="title" value=":: Login ::"/>
    <put name="content" value="/WEB-INF/pages/login.jsp"/>        
</definition> 
```

我使用的表格是

```
<html:form action="login.html" method="post">
    <table align="center" id="logintable">
        <tr>
            <td>Enter Your UserName : </td>
            <td><html:text property="username"/></td>
        </tr>
        <tr>
            <td>Enter Your Password : </td>
            <td><html:password property="password"/></td>
        </tr>
        <tr>                
            <td colspan="2"><html:submit value="LOGIN"/></td>                
        </tr>
    </table>            
</html:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:00:15.470

我认为您遇到了问题，因为您试图访问 WEB-INF 文件夹中的 jsp 文件。如果您正在尝试使用 struts 1.x，请尝试使用 struts 2.0。教程使用这个[http://viralpatel.net/blogs/struts-2-tiles-plugin-tutorial-with-example-in-eclipse/](http://viralpatel.net/blogs/struts-2-tiles-plugin-tutorial-with-example-in-eclipse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:33:29.037

您必须在 ; 中包含磁贴插件`struts-config`；请点击以下链接了解更多信息：

[http://www.mkyong.com/struts/struts-tiles-framework-example/](http://www.mkyong.com/struts/struts-tiles-framework-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T08:59:42.233

查看您的 struts 配置文件。在您的动作标记中的动作映射中，您必须指定formName。它看起来像这样

```
<action-mappings>
        <action path="/Action" name="form"> 
```

在你的jsp页面之后你必须添加taglib`<%@taglib uri="struts.apache.org/tags-html"; prefix="html"%>`

你可以像这样使用html标签：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T09:28:28.407

在你的 struts-config 中写下：

```
<message-resources parameter="properties.labels" /> 
```

在我的应用程序标签属性中：![在此处输入图像描述](../Images/ab4f31b9101508608671e053d9f897c1.png)

在你的jsp中：

```
<%@taglib uri="http://struts.apache.org/tags-bean" prefix="bean"%> 
```

并像这样使用bean标签：

```
 <bean:message key="password" /> 
```

# c# - System.InvalidCastException 在

> ID：14037876
> 
> 赞同：0
> 
> 时间：2012-12-26T08:23:04.870
> 
> 标签：c#, asp.net, list, viewstate

```
 System.InvalidCastException: [A]System.Collections.Generic.List`1[UploadImages] cannot be cast to [B]System.Collections.Generic.List`1[UploadImages].

  if (ViewState["CurrentList"] != null)
            {
        ObjUpload.AddRange((List<UploadImages>)ViewState["CurrentList"]); // Getting the above error  
            } 
```

UploadImages ObjUp = new UploadImages();

```
 List<UploadImages> ObjUpload = new List<UploadImages>();

    ObjUp.AlternateText = TxtAlternatetext.Text;
    if (TxtFre.Text != "")
    {

        ObjUp.frequency = Convert.ToInt16(TxtFre.Text);
    }
    ObjUp.ImageURL = FileUpload1.PostedFile.FileName;

    ObjUp.URL = TxtUrlToNavigate.Text;
    ObjUp.ID = i;

    ObjUpload.Add(ObjUp); 
```

我已经完成了我的课程 [Serializable]

**此代码有时有效，但有时无效**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:27:50.197

使用[`as`](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)运算符确保：

```
List<UploadImages> uploadImages = ViewState["CurrentList"] as List<UploadImages>;

if(uploadImages != null)
{
    ObjUpload.AddRange(uploadImages); 
} 
```

# python - MySQL 在 Python 中整理 utf8 样式的字符串比较

> ID：14037882
> 
> 赞同：3
> 
> 时间：2012-12-26T08:23:51.763
> 
> 标签：python, mysql, string-comparison, collate

我有以下 MySQL 表

```
mysql> show create table names;
+-------+-----------------------------------------------------+
| Table | Create Table                                        |
+-------+----------------------------- -----------------------+
| names | CREATE TABLE `names` (
`name` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
 UNIQUE KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci  |
+-------+-----------------------------------------------------+ 
```

现在，该表有以下记录

```
mysql> select * from names;
+--------+
| name   |
+--------+
| Luísa  |
+--------+ 
```

请注意，该条目是**Luísa**。它实际上是一个'í'。如您所见，我已将名称字段的排序规则指定为 COLLATE utf8_unicode_ci。我有一个 Python 脚本，可以将一些名称加载到此表中，并且由于字段名称是唯一的并且排序规则设置为 utf8_unicode_ci，因此我无法在此表中插入**Luisa**，因为它认为**i**和**í**相同。

现在，为了检查该条目是否已经存在于 python 的表中，我最初将表中存在的所有名称加载到一个集合中，并且我尝试仅在它不存在于表中时才插入。现在，问题是 python 将**i**和**í**视为不同。

我在 [http://www.cmlenz.net/archives/2008/07/the-truth-about-unicode-in-python](http://www.cmlenz.net/archives/2008/07/the-truth-about-unicode-in-python)中读到 Python 不支持排序规则，并且我们有一个由 uca编写的[python 实现](http://jtauber.com/blog/2006/01/27/python_unicode_collation_algorithm/)詹姆斯陶伯。但是，这有助于排序，但在比较两个字符串是否会在 MySQL 中使用 utf8 Unicode CI 排序规则时被视为相同则无济于事。

Python中有没有办法以MySQL方式比较这两个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:30:05.377

> 现在，为了检查该条目是否已经存在于 python 的表中，我最初将表中存在的所有名称加载到一个集合中，并且我尝试仅在它不存在于表中时才插入。

你这样做是错的。对表执行查询以查看条目是否已存在，或者尝试插入并捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:31:15.080

怎么样`COLLATE utf8_bin`？

它用于比较二进制格式的字符（*严格比较*）。

# c - 全屏C程序应用程序在Windows 7/8中不起作用

> ID：14037886
> 
> 赞同：0
> 
> 时间：2012-12-26T08:24:07.377
> 
> 标签：c, graphics

嗨伙计们，我写了一个程序来在 C 编程中画一条线。众所周知，windows7/8 不直接支持全屏，当我从 turboC++ 编译时，它可以正确运行，但是当我构建它并转到 turboC++ 文件夹并从那里执行时，它给了我一个消息，这个平台不支持支持全屏应用程序，现在我应该怎么做才能在 Windows 7/8 中运行。我写的代码是：

```
#include <graphics.h>
#include <stdlib.h>
#include <stdio.h>
#include <conio.h>
int main(void)
{
   clrscr();
   /* request auto detection */
   int gdriver = (DETECT)/3, gmode, errorcode;
   int midx, midy;

   /* initialize graphics and local variables */
   initgraph(&gdriver, &gmode, "C:/TURBOC3/BGI/");

   /* read result of initialization */
   errorcode = graphresult();
   if (errorcode != grOk)  /* an error occurred */
   {
      printf("Graphics error: %s\n", grapherrormsg(errorcode));
      printf("Press any key to halt:");
      getch();
      exit(1); /* terminate with an error code */
   }

   midx = getmaxx() / 2;
   midy = getmaxy() / 2;
   setcolor(getmaxcolor());

   line(midx, midy, midx/2,midy/2);

   /* clean up */
   getch();
   closegraph();
   return 0;
} 
```

可能是什么解决方案？我只是C的初学者......对不起，如果我不能让你清楚......我还附上了我得到的错误图片，..![我得到的错误...](../Images/684615de7b96b7ee7643b5253781f051.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:48:17.707

使用像 DosBox 这样的模拟器 - [http://www.dosbox.com/](http://www.dosbox.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:50:09.073

Turbo C++ 生成 16 位二进制应用程序，无法在 win7 32/64 位环境下运行。使用 DosBox 之类的模拟器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T19:11:20.617

为此目的使用 dosbox 请按照以下步骤操作

> 1.安装软件DOSBox[下载](http://sourceforge.net/projects/dosbox/files/dosbox/0.74/DOSBox0.74-win32-installer.exe/download)
> 
> 2.下载并提取TC
> 
> 3.确保DOSBox和TC在同一个目录下，并且TC.exe应用程序在TC>>BIN>>TC.exe文件夹中才能正常工作。
> 
> 4.运行 DOSBox 并在命令提示符**mount dc 下键入以下命令：**
> 
> 5.现在你应该得到一条消息，上面写着：**Drive D is mount as a local directory c:** Type d: to get into **d:**
> 
> 6.接下来按照以下命令： **cd tc**

**光盘盒**

和**tc 或 tc.exe**

> 7.在Turbo C Editor中，选择Options>Directories>Change Directories>Change the source of TC to the source directory [D]
> 
> 8.转到程序文件>DosBox文件夹。>DOSBox 0.74选项>并使用记事本编辑它（移动到文件末尾）

9>.并粘贴如下所示的代码。

挂载直流：\

d:

光盘

光盘盒

tc.exe

在这一步结束时，当您单击 DosBox 图标时，Turbo C 将自动加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-09T01:05:30.163

如果您不介意重新启动：`Control Panel > Device Manager > Display Adapters`并选择`Disable`.

# tcpdf - TCPDF：字体 helvetica 不适用于日语

> ID：14037887
> 
> 赞同：3
> 
> 时间：2012-12-26T08:24:18.607
> 
> 标签：tcpdf

我正在研究多语言 pdf 生成。我正在使用`tcpdf`version`5.9.20`和 font `helvetica`，它适用于英文字符，但显示 ???????? 用于日语字符。

我还尝试`arialunicid0`了这里建议的字体[http://community.impresscms.org/modules/newbb/viewtopic.php?post_id=43480](http://community.impresscms.org/modules/newbb/viewtopic.php?post_id=43480)。但是，它迫使用户下载 lang-package。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T00:47:24.927

试试字体“cid0jp”，它可能可以解决你的问题。

通过使用这种字体，我成功地显示了日文和中文字符。它可以在 tfpdf 的包中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:29:53.987

大多数字体不适用于日语，因为它需要数千个字符（而英语满足于一百个左右）。开发数千个字符很昂贵，因此日文字体很昂贵；存储数千个字符占用空间，这使得日文字体达到数兆字节。因此，大多数日本人通常仍然不使用自定义字体，而是依赖操作系统随附的预安装字体（或操作系统支持的软件包之一）。在日本做平面设计师有点贵。那些打算将其文档用于数字分发（HTML、PDF）的人根本不使用任何自定义字体。

# click - 自定义用户控制鼠标事件 c#

> ID：14037888
> 
> 赞同：3
> 
> 时间：2012-12-26T08:24:25.190
> 
> 标签：click, controls, custom-controls, mouse

我创建了一个自定义用户事件，其设计为

![在此处输入图像描述](../Images/d862d172d8e3ecc6096f0bafd7f5bde1.png)

我为该设计创建了一个鼠标单击事件

```
 protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);
        e.Control.Click += new EventHandler(Control_Click);
    }

    protected override void OnControlRemoved(ControlEventArgs e)
    {
        e.Control.Click -= new EventHandler(Control_Click);
        base.OnControlRemoved(e);
    }

    void Control_Click(object sender, EventArgs e)
    {
        this.OnClick(e);
    } 
```

仅当我单击不包括 PictureBoxes 区域和标签区域的区域时，鼠标事件才有效。

我的意思是当我单击用户控件的图片框区域或标签区域时，鼠标单击不起作用。在其他区域，鼠标单击工作。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-03T22:30:47.297

尝试这个：

向您的控件添加一个事件，例如：

```
public new event MouseEventHandler MouseClick
{
    add
    {
        base.MouseClick += value;
        foreach (Control control in Controls)
        {
            control.MouseClick += value;
        }
    }
    remove
    {
        base.MouseClick -= value;
        foreach (Control control in Controls)
        {
            control.MouseClick -= value;
        }
    }
} 
```

我认为这可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T14:35:36.530

[https://msdn.microsoft.com/ru-ru/library/ms171545(v=vs.110).aspx](https://msdn.microsoft.com/ru-ru/library/ms171545(v=vs.110).aspx)

> 只有前台窗口可以捕获鼠标。当后台窗口试图捕捉鼠标时，窗口只接收鼠标指针在窗口可见部分内时发生的鼠标事件的消息。此外，即使前台窗口已经捕获了鼠标，用户仍然可以单击另一个窗口，将其带到前台。捕获鼠标时，快捷键不起作用。

尝试寻找透明背景色的使用。

# c# - 找不到 ExpressionVisitor.VisistMemberAcess

> ID：14037892
> 
> 赞同：4
> 
> 时间：2012-12-26T08:25:03.090
> 
> 标签：c#, .net, linq, iqueryable

我正在关注[这个博客](http://blogs.msdn.com/b/mattwar/archive/2007/08/02/linq-building-an-iqueryable-provider-part-iv.aspx)，试图为我目前正在从事的项目创建一个用于 MSAccess 的 IQueryable 提供程序。

我已经到了上面链接到的页面，但是有几段代码创建了继承`ExpressionVisitor`并覆盖其`VisitMemberAccess`方法的类，例如在此方法中：

```
protected override Expression VisitMemberAccess(MemberExpression m)
    {
        if (m.Expression != null && m.Expression.NodeType == ExpressionType.Parameter)
        {
            if (this.sb.Length > 0)
            {
                this.sb.Append(", ");
            }
            this.sb.Append(m.Member.Name);
            return Expression.Convert(Expression.Call(this.row, miGetValue, Expression.Constant(iColumn++)), m.Type);
        }
        else
        {
            return base.VisitMemberAccess(m);
        }
    } 
```

问题是这不能编译，因为该`VisitMemberAccess`方法不再可用。我已经用谷歌搜索了一段时间，发现了一些对这种方法的引用，但它们似乎都可以追溯到 .NET 3.5（例如，请参见[此处）。](http://msdn.microsoft.com/en-us/library/bb882521%28v=vs.90%29.aspx)

我想知道那个方法发生了什么？更重要的是做什么而不是压倒一切`VisitMemberAccess`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T08:36:32.697

.NET 4.0 中.NET 3.5 框架的等效方法`ExpressionVisitor.VisitMemberAccess`是`ExpressionVisitor.VisitMember`. 我不确定他们为什么更改方法的名称。

# wiki - 为什么汇合 html 宏不允许插入 wiki 标记

> ID：14037894
> 
> 赞同：1
> 
> 时间：2012-12-26T08:25:36.007
> 
> 标签：wiki, markup, confluence

我有一个问题 html 宏。我意识到 html 宏不允许插入 wiki 标记。例如 - 我需要插入指向用户页面的链接。在 wiki 标记中，我输入“[test|~test1]”，仅此而已。但这不适用于 html 宏。也许有人知道该怎么做？谢谢。PS 我使用的是 Confluence wiki 版本 4.1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:51:19.367

您使用的是哪个版本的融合？

如果您需要将链接放在 wiki 标记中，而不是简单地使用 html 链接，而是希望页面的其余部分使用 html，那么您必须将 wiki 标记链接放在 html 标记之外.

所以它看起来像这样：

```
{html}
<p>Insert your html content here</p>
{html}
{wiki-markup}
[test|~test1]
{wiki-markup}
{html}
<p>Insert the rest of your html content here</p>
{html} 
```

根据您拥有的 Confluence 版本，在编辑器中插入此内容的方式可能会有所不同。

# javascript - 未捕获的 SyntaxError：意外的令牌 �

> ID：14037895
> 
> 赞同：0
> 
> 时间：2012-12-26T08:25:36.240
> 
> 标签：javascript, json

我对这个错误感到恼火/////m 试图从数据库中获取经度和纬度，据他们说我想在地图上显示标记.....并且我面临这个错误..请帮助我.. ..thanx 我的代码是：

```
 // Ban Jelacic Square - City Center
            var map;
    var center = new google.maps.LatLng(-34.397, 150.644);

    var geocoder = new google.maps.Geocoder();
    var infowindow = new google.maps.InfoWindow();

    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();

    function init() {

        var mapOptions = {
          zoom: 8,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions_panel'));

    /*  // Detect user location
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {

                var userLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

                geocoder.geocode( { 'latLng': userLocation }, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        document.getElementById('start').value = results[0].formatted_address;
                    }
                });

            }, function() {
                alert('Geolocation is supported, but it failed');
            });
        }
        */
        makeRequest('get_location.php', function(data) {
            var data = JSON.parse(data.responseText);
            for (var i = 0; i < data.length; i++) {
            displayLocation(data[i]);
            }
        });
    }

    function displayLocation(location) {

        var content =   '<div class="infoWindow"><strong>'  + location.name + '</strong>'
                        + '<br/>'   + location.address
                        + '<br/>'   + location.description + '</div>';

        if (parseInt(location.lat) == 0) {
            geocoder.geocode( { 'address': location.address }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {

                    var marker = new google.maps.Marker({
                        map: map, 
                        position: results[0].geometry.location,
                        title: location.name
                    });

                    google.maps.event.addListener(marker, 'click', function() {
                        infowindow.setContent(content);
                        infowindow.open(map,marker);
                    });
                }
            });
        } else {

            var position = new google.maps.LatLng(parseFloat(location.lat), parseFloat(location.lng));
            var marker = new google.maps.Marker({
                map: map, 
                position: position,
                title: location.name
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(content);
                infowindow.open(map,marker);
            });
        }
    }  
    function makeRequest(url, callback) {
        var request;
        if (window.XMLHttpRequest) {
            request = new XMLHttpRequest(); // IE7+, Firefox, Chrome, Opera, Safari
        } else {
            request = new ActiveXObject("Microsoft.XMLHTTP"); // IE6, IE5
        }
        request.onreadystatechange = function() {
            if (request.readyState == 4 && request.status == 200) {
                callback(request);
            }
        }
        request.open("GET", url, true);
        request.send();
    } 
```

/////get_location.php 文件

setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $sth = $db->query("SELECT * FROM data"); $locations = $sth->fetchAll(); 回声 json_encode( $locations ); } catch (Exception $e) { echo $e->getMessage(); } ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:49:52.227

试试这个，看看这是否有帮助：

```
<?php
require 'config1.php';

function removeNonUTF8( &$value, $key ) {
    $regex = <<<'END'
/
  (
    (?: [\x00-\x7F]
    |   [\xC0-\xDF][\x80-\xBF]
    |   [\xE0-\xEF][\x80-\xBF]{2}
    |   [\xF0-\xF7][\x80-\xBF]{3}
    )+                              # ...one or more times
  )
| .                                 # anything else
/x
END;

    $value = preg_replace( $regex, '$1', $value );
}

try { 
    $db = new PDO($dsn, $uname, $pass); 
    $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 

    $sth = $db->query("SELECT * FROM data"); 
    $locations = $sth->fetchAll(); 

    foreach( $locations as $location ) {
        array_walk( $location, 'removeNonUTF8' );
    }

    echo json_encode( $locations ); 
} catch (Exception $e) { 
    echo $e->getMessage(); 
}
?> 
```

另外，如果这不起作用，您可以打印您的`$locations`变量以便我们可以看到结构。

希望这可以帮助。

# iphone - Titan应用程序内的iOS消息编辑器视图

> ID：14037898
> 
> 赞同：2
> 
> 时间：2012-12-26T08:26:04.587
> 
> 标签：iphone, ios, titanium, appcelerator, mfmessagecomposeview

目前我正在使用以下代码来显示消息编写器，但它会打开本机 iOS 消息应用程序并且我的应用程序会进入后台。

```
Titanium.Platform.openURL('sms:'+e.rowData.value); 
```

但我想在我的应用程序中显示消息编写器。

有没有办法在我的钛应用程序中显示 iOS 的消息撰写窗口？

我搜索了很多，但没有得到任何解决方案。[appcelerator 文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI)中没有关于消息编写器的任何内容。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-06T14:28:55.397

我有更好的解决方案而不使用模块

Ti.Platform.openURL('sms://' +Your_phone_number + '&body=' + encodeURIComponent(MESSAGE_IN_STRING));

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:21:48.460

试试这个，

```
var SMS = require('ti.sms');
var sms = SMS.createSMSDialog({
    animated: true
});
sms.barColor = 'black';
sms.toRecipients = [
    '5678309' // who should receive the text? put their numbers here!
];
sms.messageBody = 'This is a text message.';
sms.addEventListener('complete', function(evt) {
    if (evt.success) {
        alert('SMS sent!');
    }
    else {
        switch (evt.result) {
            case SMS.CANCELLED:
                alert('User cancelled SMS!');
                break;
            case SMS.FAILED:
            default:
                alert(evt.error);
                break;
        }
    }
});
sms.open(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T05:18:46.730

目前（2013 年 1 月 1 日）Titanium SDK 中没有内置模块可将原生 iOS SMS 视图集成到 Titanium 应用程序。有很多第三方模块可以做到这一点。

1.  [**TiSMS对话框**](https://github.com/omorandi/TiSMSDialog)
2.  [**本编码短信**](https://github.com/benbahrenburg/benCoding.SMS)

我还为此开发了一个模块，你可以在这里找到它[**MMP_SMS**](https://github.com/Midhun-MP/MMP_SMS)。

# javascript - Azure 移动服务 - 服务器端脚本 - 使用 === 与零进行比较

> ID：14037901
> 
> 赞同：1
> 
> 时间：2012-12-26T08:26:43.700
> 
> 标签：javascript, windows-phone-8, azure-mobile-services

我刚刚开始玩 Azure 移动服务。这非常酷，但是在尝试更改服务器端数据库脚本时，我注意到了一些奇怪的事情。一个具体的事情是，在编写一个简单的语句时，例如：

如果（结果。长度 == 0）

它警告我说我应该在与零比较时使用 === 而不是 ==。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:32:47.587

在松散类型的语言中，使用 ===（严格相等运算符）而不是 ==（相等运算符）通常很有用，因为否则在相等检查期间对象的类型将被强制转换。

例如，`"0" == 0`、 和`"" == 0`、 和`[] == 0`。

但是，这些都不是`=== 0`。

因此，如果`results`碰巧是一个具有空属性的对象`length`，如下所示：

```
var results = {
  length: ""
} 
```

`results.length == 0`仍会评估为`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:29:51.310

因为

```
[] == 0 
```

是真的，但是

```
[] === 0 
```

不是。

阅读[JavaScript 比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)（尤其是*严格相等*）。

# javascript - 提交时修改 userInput

> ID：14037902
> 
> 赞同：0
> 
> 时间：2012-12-26T08:26:56.133
> 
> 标签：javascript

我需要有关此 javascript 的帮助，如果用户在该字段中输入任何内容，该字段将打印该值，但我想修改该值的特定部分。用户将提交具有我需要修改的特定字符串的图像 url。

例如用户输入类似： http: **//www.domain.com/photos/1.jpg**

结果应该是： http: **//www.domain.com/photos-d/1.jpg**

**这是代码：**

```
<script type="text/javascript">
function changeText2(){
    var userInput = document.getElementById('userInput').value;
    document.getElementById('result').innerHTML = userInput;
}
</script>

<input type='text' id='userInput' onblur="if(this.value.length == 0) this.value='Enter Image URL';" onclick="if(this.value == 'Enter Image URL') this.value='';"/>
<input type='button' onclick='changeText2()' value='Generate'/>

<p>Output: <a id='result'></a> </p> 
```

您的帮助将不胜感激 - 谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:38:01.683

```
<script>
function changeText2(){
    var userInput = document.getElementById('userInput').value;
    document.getElementById('result').innerHTML = userInput.replace("/photos/", "/photos-d/");
}
</script>

<input type='text' id='userInput' placeholder="Enter Image URL"/>
<input type='button' onclick='changeText2()' value='Generate'/>

<p>Output: <a id='result'></a> </p> 
```

PS：您可以使用[占位符](http://davidwalsh.name/html5-placeholder)（支持 html5）代替 onblur 和 onclick 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:42:54.517

所以基本上你想根据其中某个字符串的出现来修改一个字符串，即.jpg。

所以首先，看看你的 userInput 是否需要修改。

所以这样做

```
 <script type="text/javascript">
    function changeText2(){
        var userInput = document.getElementById('userInput').value;
         if(userInput.indexOf('.jpg') !== -1){

           userInput = userInput.replace('photos','photos-d');
         }
        document.getElementById('result').innerHTML = userInput;
    }
    </script> 
```

所以基本上你需要有效的[字符串替换](https://stackoverflow.com/questions/1789945/method-like-string-contains-in-javascript)算法和正则表达式来检测关键字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T08:33:16.437

您可以在输入之前将[http://www.domain.com/photos-d/](http://www.domain.com/photos-d/)作为标签，而不是要求用户键入此部分。如果他只需要输入图像文件名，则无需更改输入字段。

# php - 如何回显列的名称

> ID：14037903
> 
> 赞同：0
> 
> 时间：2012-12-26T08:27:01.157
> 
> 标签：php, mysql, sql, select, html-table

如何回显列的名称？我能够选择并回显内容（td），但我不知道如何在 th 中“加载值”。我的意思是从 MySql 数据库动态加载。

我想从数据库eee中从td的同一个地方“加载值”。我想显示字段名称：id、a、b、c

```
<table>

<tr>
    <th><input class="gris" type="text" name="a" value="load value"/></td>
    <th><input class="gris" type="text" name="b" value="load value"/></td>
    <th><input class="gris" type="text" name="c" value="load value"/></td>
    <th><input class="gris" type="text" name="d" value="load value"/></td>
</tr>

<?php
    $result = mysql_query("SELECT * FROM eee");
    while($row = mysql_fetch_array($result))  {
?>
<tr>
    <td> <input class="blanc" type="text" name="num" value="<?php echo $row['id']?>"/> </td>
    <td><input class="blanc" type="text" name="primer" value="<?php echo $row['a']?>"/></td>
    <td><input class="blanc" type="text" name="segon" value="<?php echo $row['b']?>"/></td>
    <td><input class="blanc" type="text" name="segon" value="<?php echo $row['c']?>"/></td>
</tr>

<?php } ?>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:31:51.707

使用 $row 数组上的 for each 来获取键/值对。键应包含表中的列名。请注意，mysql_fetch_array 的默认值返回一个同时具有关联值和索引值的数组，以防您遇到某种意外问题。但我 90% 确定您所要做的就是使用 $key => $value 组合的 foreach，如下所示：

[http://us3.php.net/manual/en/control-structures.foreach.php](http://us3.php.net/manual/en/control-structures.foreach.php)

这是 mysql_fetch_array 上的页面：http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

更明确的解释：

```
foreach ($row as $key => $value) {
    /*  echo your table row with the $key and $value here. */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:32:16.363

您可以[`describe`](http://dev.mysql.com/doc/refman/5.0/en/describe.html)以另一个查询为代价来创建该表。

```
<tr>
<?php
    $result = mysql_query("DESCRIBE eee");
    $inputName = "a";
    while($row = mysql_fetch_array($result))  {
?> 
    <th>
       <input class="gris" 
               type="text" 
               name="<?php echo inputName; ?>"     <!-- Generates unique names for the inputs too -->
               value="<?php echo $row['name']; ?>"/>
    </th>
<?php $inputName++; } ?>

</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:15:12.977

我是 php 的新手。我在这里尝试了所有答案，但没有奏效。可能是因为有些东西我不明白。这里的每个人都比我知道得多。在尝试了很多事情之后，我检查了这是否有效：

```
$result = mysqli_query($con, 'SELECT * FROM eee');
while ($property = mysqli_fetch_field($result)) {   
?>

<tr>
<th><input class="gris" type="text" name="<?php echo $property->name ?>" value="<?php echo $property->name ?>"/></th>
</tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T08:32:43.160

只需编写简单的列名，因为您已经知道名称..

```
<?php
$result1 = mysql_query("SELECT COLUMN_NAME FROM INFORMATION_SCHEMA WHERE TABLE_NAME ='eee'");
while($row = mysql_fetch_array($result1))  {
 ?>

<th><input class="gris" type="text" name="<?php echo $row['COLUMN_NAME ']?>" value="<?php echo $row['COLUMN_NAME ']?>"/></th>

<?php } ?>
</tr>

<?php
$result = mysql_query("SELECT * FROM eee");
while($row = mysql_fetch_array($result))  {
 ?>
<tr>
<td> <input class="blanc" type="text" name="num" value="<?php echo $row['id']?>"/> </td>
<td><input class="blanc" type="text" name="primer" value="<?php echo $row['primer']?>"/>          </td>
<td><input class="blanc" type="text" name="segon" value="<?php echo $row['segon']?>"/></td>
<td><input class="blanc" type="text" name="segon" value="<?php echo $row['tercer']?>"/>     </td>
</tr>

<?php } ?>

</table> 
```

# c++ - 无法在优化校准上显示 CBitmap

> ID：14037912
> 
> 赞同：4
> 
> 时间：2012-12-26T08:28:16.937
> 
> 标签：c++, visual-c++, mfc, gdi

我试图在图片控件上显示一个 jpeg 文件首先我使用 GDIpluse 加载它然后我将它转换为 CBitmap 之后我尝试将它放在名为图片控件的图片控件上，该控件`m_picture_control`在我的对话框中定义为 CStatic 但它无法显示

```
Bitmap* pBitmap = Bitmap::FromFile(FileDlg.GetPathName());
    Status status = pBitmap->GetLastStatus();
    if(Ok == status)
    {
       HBITMAP hBitmap = NULL;
       status = pBitmap->GetHBITMAP(Color(0,0,0), &hBitmap);
       if(Ok == status)
       {
           CBitmap* bitmap = new CBitmap();
          bitmap->Attach(hBitmap);
          m_picture_control.SetBitmap(*bitmap);
       } 
```

# android - 片段中的 EditText 和软键盘问题

> ID：14037915
> 
> 赞同：29
> 
> 时间：2012-12-26T08:29:33.813
> 
> 标签：android, android-layout, android-fragments

我目前正在构建一个 android 应用程序，使用户能够拍照并写下它的详细信息。该应用程序使用 Sherlock 库。

我已经实现了一个 SherlockFragment 来显示图像和一些 EditText 和 TextView 以使用户能够键入图像的信息。但是，当其中一个 EditText 处于焦点时，所有字段都被向上推，软键盘弹出。

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#FFFFFF">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="200dip"
        android:layout_above="@+id/textView"
        android:layout_marginTop="20dip"
        android:layout_marginBottom="20dip"
        android:contentDescription="desc" />

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="Title:"
        android:textStyle="bold"
        android:layout_above="@+id/editTextSimple" 
        android:layout_marginBottom="2dip"
        android:textSize="15sp"/>

     <EditText
        android:id="@+id/editTextSimple"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView1"
        android:layout_marginBottom="4dip">
        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="Description:"
        android:textStyle="bold"
        android:layout_above="@+id/editTextSimple1" 
        android:layout_marginBottom="2dip"
        android:textSize="15sp"/>

    <EditText
        android:id="@+id/editTextSimple1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView2"  
        android:layout_marginBottom="12dip">
    </EditText>

    <Button android:textColor="#FF000000" 
        android:id="@+id/submitButton" 
        android:text="@string/memorySubmit" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="24dip"
        android:onClick = "submit"/>
</RelativeLayout> 
```

据我了解，在一项活动中，必须将其放在`<activity android:windowSoftInputMode="...." >`Android Manifest 中才能在调用软键盘时调整视图。但是，我们如何为片段设置这个？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-07-10T22:16:20.890

这在我使用多个布局和一个viewstub来创建一个消息屏幕的场景中对我有用。把它放在 onCreate() 希望这会有所帮助。

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-26T08:43:25.133

one 的所有片段`Activity`都具有与其 parent 相同的行为`Activity`，但如果您需要不同的键盘行为来实现不同的`Fragments`，则可以从代码中动态更改此属性，`Fragment`如下所示：

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.softInputMode.SOFT_INPUT_ADJUST_PAN); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-17T10:07:06.523

This can be used in Fragment Class to move the Edit text up and Scroll till end.

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE|WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-07T13:50:06.153

```
android:windowSoftInputMode="adjustPan" 
```

与该活动相关的所有片段的行为都相同，如果您想更改特定片段的行为而不是使用以下片段

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-11T11:26:11.823

尝试这个`getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-19T11:47:07.527

我的项目中也出现了这个问题，我使用片段和选项卡开发了我的项目，

如果我们采用相对布局并保持上下依赖关系，最后使用按钮

> android:layout_alignParentBottom="true"

那么它会出现问题，解决方案是在根线性或相对布局中使用 ScrollView，在 ScrollView 内部将一个子视图作为线性或相对，并在 RelativeLayout 中将所有视图设置为彼此下方（如果在子视图中使用相对）或不需要在线性中设置依赖关系。

就是这样，它会工作...... :)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-07T05:11:54.643

如果您使用的是**Fragment** ，请使用

```
getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

如果您使用的是**DialogFragment**然后使用这个

```
getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-09-01T08:41:30.090

```
 android:launchMode="singleTask"
   android:windowSoftInputMode="adjustPan" 
```

清单的这种变化对我来说很好

# node.js - PKCS7 在 Node.js 中加密解密

> ID：14037917
> 
> 赞同：4
> 
> 时间：2012-12-26T08:29:46.030
> 
> 标签：node.js, openssl, pkcs#7

我在当前项目中使用 pkcs7 加密解密。我想从 PHP 更改为 Node.js。Node.js 中是否有 pkcs7 加密/解密？

在 PHP 中，

```
<?php

$data = <<<EOD
Hello world
EOD;

// load key
$key = file_get_contents("mypublickey.crt");

// save message to file
$fp = fopen("msg.txt", "w");
fwrite($fp, $data);
fclose($fp);

// encrypt it
if (openssl_pkcs7_encrypt("msg.txt", "enc.txt", $key,array())) {
    // message encrypted - send it!

}
?> 
```

解密

```
<?php
// The certification stuff
$public = file_get_contents("mypublickey.crt");
$private = array(file_get_contents("myprivatekey.pem"), "mypassword");

$infile = tempnam("", "enc");
file_put_contents($infile, $encrypted); 
$outfile = tempnam("", "dec");

if(openssl_pkcs7_decrypt("enc.txt", "dec.txt", $public, $private))
{
    // Decryption successful
    echo file_get_contents("dec.txt");
}
?> 
```

Node.js 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-06-18T21:15:49.883

我遇到了同样的问题并且花了太多时间，但最终我找到了方法。

我找到并使用了[伪造](https://github.com/digitalbazaar/forge)开源库。您可以通过以下方式简单地添加到您的项目中：

```
npm install node-forge 
```

然后，下面的代码片段使用`PKCS#7`格式执行加密。

```
var forge = require('node-forge');

// create cert object
var cert = forge.pki.certificateFromPem(certOrPemString);
// create envelop data
var p7 = forge.pkcs7.createEnvelopedData();
// add certificate as recipient
p7.addRecipient(cert);
// set content 
p7.content = forge.util.createBuffer();
p7.content.putString('content to be encrypted');

// encrypt
p7.encrypt();

// obtain encrypted data with DER format
var bytes = forge.asn1.toDer(p7.toAsn1()).getBytes(); 
```

此代码块将加密您提供的内容并返回具有`DER`输出格式的字节数组。

您可以通过以下方式将字节数组转换为`UTF-8`字符串：

```
var str = Buffer.from(bytes, 'binary').toString('utf8'); 
```

您可以按如下方式解密内容：

```
var recipient = p7.findRecipient(cert);
// decrypt
p7.decrypt(p7.recipients[0], privateKey); 
```

希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-20T17:31:25.943

解密数据

示例数据：

MIICTgYJKoZIhvcNAQcDoIICPzCCAjsCAQAxggHGMIIBwgIBADCBqTCBmzELMAkGA1UEBhMCREUxEjAQBgNVBAgMCUZyYW5jb25pYTEQMA4GA1UEBwwHQW5zYmFjaDEVMBMGA1UECgwMU3RlZmFuIFNpZWdsMRIwEAYDVQQLDAlHZWllcmxlaW4xFjAUBgNVBAMMDUdlaWVybGVpbiBERVYxIzAhBgkqhkiG9w0BCQEWFHN0ZXNpZUBicm9rZW5waXBlLmRlAgkA1FQcQNg14vMwDQYJKoZIhvcNAQEBBQAEggEAJhWQz5SniCd1w3A8uKVZEfc8Tp21I7FMfFqou + UOVsZCq7kcEa9uv2DIj3o7zD8wbLK1fuyFi4SJxTwxkR0a6V4bbonIpXPPJ1f615dc4LydAi2tv5w14LJ1Js5XCgGVnkAmQHDaW3EHXB7XT4w9PR3 + TCS / 5YAnWaM6Es38zCKHd7TnHpuakplIkwSK9rBFAyA1g / IyTPI + ktrEEHcVuJcz / 7eTlF6wJEa2HL8F1TVWuL0p / 0GsJP / 8y0MYGdCdtr + TIVO // 3YGhoBlN4tnheFT / jRAzfCZtflDdgAukW24CekrJ1sG2M42p5cKQ5rGFQtzNy / n8EjtUutOHD5YITBsBgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBmlpfy3WrYj3uWW7 + xNEiHgEAm2mfSF5xFPLEqqFkvKTM4w8PfhnF0ehmfQNApvoWQRQanNWLCT + Q9GHx6DCFjTUHl + 53x88BrCl1E7FhYPs92

```
 let data = '-----BEGIN PKCS7-----\r\n' + body + '\r\n-----END PKCS7-----\r\n';
        let p7d = forge.pkcs7.messageFromPem(data)
        let privateCert = forge.pki.decryptRsaPrivateKey(fs.readFileSync(privateCertPath),'password');
        p7d.decrypt(p7d.recipients[0], privateCert);
        console.log(p7d.content) 
```

# android - 如何使文本在android中的按钮内可滚动

> ID：14037926
> 
> 赞同：1
> 
> 时间：2012-12-26T08:30:23.247
> 
> 标签：android, android-layout, android-widget

我在android中动态声明了一个按钮，宽度和高度为wrap_content。我希望文本可以在按钮内滚动，而不是向下调整，这会增加按钮的高度。任何人都可以帮助解决这个问题。

提前致谢，

代码示例：

```
 LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            110,LinearLayout.LayoutParams.WRAP_CONTENT);
            Button  newButton = new Button(ctx);
    newButton.setLayoutParams(params);
    newButton.setText("some nameeeeeeeeeeeee");
            newButton.setScroller(new Scroller(getActivity())); 
    newButton.setVerticalScrollBarEnabled(true); 
    newButton.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:36:22.077

```
Button btn = new Button(context);
btn.setScroller(new Scroller(context)); 
btn.setVerticalScrollBarEnabled(true); 
btn.setMovementMethod(new ScrollingMovementMethod()); 
```

希望它必须有所帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:33:34.037

此属性可用于水平滚动文本：

```
android:scrollHorizontally 
```

# c# - 使用静态方法从字符串中解析 IP 地址

> ID：14037930
> 
> 赞同：0
> 
> 时间：2012-12-26T08:31:02.543
> 
> 标签：c#, .net, parsing, ip-address, system.net

是否有一种静态方法可以用来解析字符串以检查它是否是 IP 地址，而不必初始化新`System.Net.IPAddress`实例？

这就是我想要实现的目标

```
System.Net.IPAddress throwawayIpAddress = new System.Net.IPAddress(Encoding.ASCII.GetBytes("127.0.0.1"));

System.Net.IPAddress.TryParse(baseUri.Host, out throwawayIpAddress); 
```

`baseUri`是一个`Uri`变量，并且`Host`是一个`string`。我正在寻找更简单的东西，例如：

```
System.Net.IPAddress.TryParse(baseUri.Host, out  new System.Net.IPAddress(Encoding.ASCII.GetBytes("127.0.0.1")); 
```

由于该`TryParse()`方法需要一个`String`和一个`out IPAddress`引用，因此我不能`null`直接传递或丢弃对象。

感谢您对解析字符串以测试它是否是 IP 地址的更简单方法的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:36:27.693

```
public static bool IsValidIpAddress(this string s)
{
    IPAddress dummy;
    return IPAddress.TryParse(s, out dummy);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T08:43:19.193

IPAddress.TryParse 需要和 out 参数。该参数不必初始化。对于您的代码，它可以是：

```
System.Net.IPAddress throwawayIpAddress; //No need to initialize it
if(System.Net.IPAddress.TryParse(baseUri.Host, out throwawayIpAddress))
{
//valid IP address
}
{
//Invalid IP address
} 
```

如果解析成功，那么您的对象`throwawayIpAddress`将具有有效的 IP 地址，您可以在代码中进一步使用它，或者如果您愿意，可以忽略它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T08:47:07.393

你可以使用正则表达式

```
var isValidIP = Regex.IsMatch(stringValue, @"^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$") 
```

# html - 从图像的右上角开始放置文本

> ID：14037933
> 
> 赞同：1
> 
> 时间：2012-12-26T08:31:20.173
> 
> 标签：html, css

如何从图像的右上角开始放置文本？

**html**

```
<div class="img-text">
   <img>
</div>
<div class="div">
   <h4>Title</h4>
   <ul>
      <li>Image Caption</li>
      <li>Added on which date</li>
      <li>Description of the image?</li>
   </ul>
</div> 
```

**css**

```
.img-text img{
    width: 100px;
    height: 100px
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T08:41:54.257

您可以使用在同一行上同时`display:inline-block`获取 the`div`和 the 。`img`

```
.img-text, .div {
  display:inline-block;
} 
```

这是一个**[演示](http://jsbin.com/atezip/3/edit)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:56:38.267

将您的图像和文本添加到具有相对定位的公共容器中，然后将文本绝对定位到右侧。例如：

```
.container {
position: relative;
    width: 100px;
    height: 100px;
}

.container img {
    position: absolute;
}

.img-text{
    position: absolute;
    right: 0;
} 
```

在这里演示[http://jsfiddle.net/sJEKE/](http://jsfiddle.net/sJEKE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T12:54:32.177

这太令人费解了。相反，只需使用类

```
.text-wrap-right {
    float: right;
margin: 10px;
}
.text-wrap-left {
    float: left;
margin: 10px;
} 
```

并将它们放在您的图像上

```
<style>
  .text-wrap-right {
    float: right;
margin: 10px;
}
.text-wrap-left {
    float: left;
margin: 10px;
}
  </style>
<div > <img src="http://a.lgorithms.com/mobile/ArtStarModel.png" width="40%" alt="ArtStar Model" class="text-wrap-left" > 
     ArtStar is an "App Toy": a platform for art-related games and apps. 
        A.lgorithms created 2 games and a cross-platform app for ArtStar. In <a href="screenshots/TraceStar.png" class="thickbox" title='<img src="screenshots/TraceStar.png" width="300px" border="1" />'><strong>TraceStar</strong></a>,
        we developed a game in which the player, looking through the device, sees ArtStar drawing board and traces a drawing to
        get a good score - and make the drawing come alive. The game uses image recognition algorithms we developed in-house and some
        heavy duty video technologies. Click here 
        to see a video.

        </div>
```

# .net - 负载测试调试不起作用

> ID：14037934
> 
> 赞同：3
> 
> 时间：2012-12-26T08:31:38.507
> 
> 标签：.net, tfs, visual-studio-2012, load-testing

我有一个负载测试（使用 VS2012）。问题是调试不起作用（它只是在没有遇到任何断点的情况下运行），并且异常的堆栈跟踪不可用（它在相应的列中只显示“-”）。
任何想法如何解决这个问题？

UPD 我必须提醒一下，在 .NET 发布配置*中确实*包含调试信息，尽管细节不那么详细。在发布配置中构建*不会*删除堆栈跟踪，也不会禁用断点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:28:20.437

异常发生在 VS 负载测试器代码本身（但报告为从我的代码中抛出），这就是为什么它没有堆栈跟踪，并且我自己的代码的调试从未开始。

# jquery - 带有 Flask 的 jQuery AJAX 插件

> ID：14037936
> 
> 赞同：0
> 
> 时间：2012-12-26T08:31:51.073
> 
> 标签：jquery, python, flask

很多 jQuery 插件都支持 AJAX，例如[自动完成 jQuery UI 插件](http://jqueryui.com/autocomplete/#default)或表单[验证插件](http://docs.jquery.com/Plugins/Validation)。

大多数关于插件的 AJAX 支持的文档都是使用 PHP 显示的：

**自动完成：**

```
$(function() {
    $( "#birds" ).autocomplete({
        source: "search.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    });
}); 
```

**验证插件：**

```
$("#myform").validate({
  rules: {
    email: {
      required: true,
      email: true,
      remote: "check-email.php"
    }
  }
}); 
```

我的问题是知道**如何使用 Flask 框架来做到这一点？**我必须返回什么类型的对象？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:13:15.157

将插件配置为使用您的应用程序的 URL 之一，例如`source: '/search'`，并使用此路由定义视图：

```
@app.route('/search')
def search():
    # If it's a GET request, the data will be provided as request.args.  In case
    # of POST or PUT you'll have to use request.data or request.json (depends on
    # how the plugin is sending the data).
    query = request.args.get('query')
    # Perform the search here.
    results = ...
    # What to return here depends on what the plugin expects, consult the docs
    # to figure this out.  Most likely it'll be some JSON encoded data structure.
    return jsonify(results=results) 
```

# asp.net-mvc-3 - 浏览器中的报告编辑器

> ID：14037937
> 
> 赞同：0
> 
> 时间：2012-12-26T08:32:00.597
> 
> 标签：asp.net-mvc-3, report, reporting, report-designer

我需要在浏览器中设计报告。我的项目由 asp.net mvc 3 制作，因此生成报告系统必须支持该框架，或者（不是很好的情况）在 Java 平台上工作。我看到了一些生成报告系统，但没有找到正确的解决方案。

1) DevExpress - 不要在浏览器上重新设计报告

2) Telerik - 不要在浏览器上重新设计报告

3) Stimulsoft - 在浏览器上提供重新设计报告，但它使用 Flash。

4) Activereportsserver - 可以在浏览器上重新设计报告，但它使用 Flash，而且速度很慢。

5) Izenda - 在浏览器上重新设计报告并且不使用 Flash，但可用性很差

Mayby现有的其他具有良好可用性的报表系统，不使用Flash，基于ASP.NET并在浏览器上重新设计报表？

* * *

更新：抱歉，Stimulsoft 有 html 5 报表设计器，现在，我们更详细地探索解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:51:29.773

您可以查看[myDBR](http://mydbr.com)，它提供了用于创建和维护完整的基于 Web 的报告环境的全部功能。

# objective-c - 重新启动应用程序后，tableview 不显示 tableview 中的所有数据

> ID：14037938
> 
> 赞同：0
> 
> 时间：2012-12-26T08:32:08.450
> 
> 标签：objective-c, ios, ipad, uitableview, nsfetchedresultscontroller

我的表格视图有问题。我正在保存从核心数据库中的 Web 服务返回的所有数据。我实现了一个下拉刷新功能来刷新我的表格视图。当应用程序第一次启动时，一切都很好。所有数据都显示在表格视图中，我可以根据需要多次刷新。

我遇到的问题是，当应用程序重新启动时，我希望它自动刷新 tableview。所以我把它放在了我的 viewDidLoad 中。

```
- (void)viewDidLoad
{
      [self checkForWIFIConnection];
    if (!self.genkDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default appGenk Database"];
        // url is now "<Documents Directory>/Default Photo Database"
        self.genkDatabase = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
    }

     pull = [[PullToRefreshView alloc] initWithScrollView:(UIScrollView *) self.tableView];
    [pull setDelegate:self];
    [self.tableView addSubview:pull];
    [super viewDidLoad];
} 
```

此方法将查看是否已创建数据库。在此方法之后，它转到以下函数*UseDocument*

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"no database created yet");
             [self fetchNewsIntoDocument:self.genkDatabase];
           [self setupFetchedResultsController];
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        NSLog(@"closed");
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {
            if([self checkForData] == YES){
                NSLog(@"there is data in viewdidload");
                [self emptyNews];
                [self fetchNewsIntoDocument:self.genkDatabase];
            }
            [self setupFetchedResultsController];

        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [self setupFetchedResultsController];
    }
} 
```

这个方法要做的，就是查看文档的状态。重新启动应用程序后，文档将关闭。那么我要检查是否有数据。如果有，我将删除所有内容并再次将其全部提取到数据库中。这也有效。

**问题** 我现在的问题是它只在屏幕上显示特定时刻的单元格。所以当我向下滚动时，我得到空单元格。就像您在下面的屏幕截图中看到的那样。

![在此处输入图像描述](../Images/2e7f15ba4effbc53a9407383cec9bd28.png)

我也收到此错误。

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:1054
2012-12-26 09:34:54.831 Krc Genk[24584:c07] CoreData: error: Serious application error.  An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.  Invalid update: invalid number of sections.  The number of sections contained in the table view after the update (0) must be equal to the number of sections contained in the table view before the update (1), plus or minus the number of sections inserted or deleted (0 inserted, 0 deleted). with userInfo (null) 
```

希望任何人都可以帮助我。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:36:57.490

错误定义明确，您应该知道哪里出错了。它是部分的数量。

# statistics - Python SciPy 卡方测试从 Excel 和 LibreOffice 返回不同的 p 值

> ID：14037939
> 
> 赞同：2
> 
> 时间：2012-12-26T08:32:14.517
> 
> 标签：statistics, scipy, poisson

在阅读了[最近一篇](http://www.empiricalzeal.com/2012/12/24/are-mass-shootings-really-random-events-a-look-at-the-us-numbers/)关于泊松分布应用程序的博文后，我尝试使用 Python 的“scipy.stats”模块以及 Excel/LibreOffice 的“POISSON”和“CHITEST”函数来重现它的发现。

对于文章中显示的预期值，我简单地使用了：

```
import scipy.stats
for i in range(8):
    print(scipy.stats.poisson.pmf(i, 2)*31) 
```

这重现了博客文章中显示的表格 - 我还在 LibreOffice 中重新创建了它，使用单元格 A1、A2、...、A8 中值为 0 到 7 的第一列 A 和简单的公式 '=POISSON( A1, 2, 0)*31' 在 B 列的前 8 行重复。

到目前为止一切顺利 - 现在是卡方 p 检验值：

在 LibreOffice 下，我只是在单元格 C1-C8 中写下观察到的值，并使用 '=CHITEST(C1:C8, B1:B8)' 来重现文章报告的 p 值 0.18。但是，在 scipy.stats 下，我似乎无法重现此值：

```
import numpy as np
import scipy.stats

obs = [4, 10, 7, 5, 4, 0, 0, 1]
exp = [scipy.stats.poisson.pmf(i, 2)*31 for i in range(8)]

# we only estimated one variable (the rate of 2 killings per year via 62/31) 
# so dof will be N-1-estimates
estimates = 1
print(scipy.stats.chisquare(np.array(obs), np.array(exp), ddof=len(obs)-1-estimates))
# (10.112318133864241, 0.0014728159441179519)
# the p-test value reported is 0.00147, not 0.18...
#
# Maybe I need to aggregate categories with observations less than 5 
# (as suggested in many textbooks of statistics for chi-squared tests)?
observedAggregateLessThan5 = [14, 7, 5, 5]
expectedAggregateLessThan5 = [exp[0]+exp[1], exp[2], exp[3], sum(exp[4:])]
print(scipy.stats.chisquare(np.array(observedAggregateLessThan5), np.array(expectedAggregateLessThan5), ddof=len(observedAggregateLessThan5)-1-estimates))
# (0.53561749342466913, 0.46425467595930309)
# Again the p-test value computed is not 0.18, it is 0.46... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T19:10:46.300

您没有`ddof`正确使用该参数。 `ddof`是对默认自由度所做的*更改。*默认值比长度小一。因此，您根本不必指定`ddof`：

```
In [21]: obs
Out[21]: [4, 10, 7, 5, 4, 0, 0, 1]

In [22]: exp
Out[22]: 
[4.1953937803349941,
 8.3907875606699882,
 8.3907875606699882,
 5.5938583737799901,
 2.796929186889995,
 1.1187716747559984,
 0.37292389158533251,
 0.10654968331009501]

In [23]: chisquare(obs, f_exp=array(exp))
Out[23]: (10.112318133864241, 0.1822973566091409) 
```

# sql - 1 个大型 SQL Query 为 Zend 中的每一行执行多个单个查询

> ID：14037962
> 
> 赞同：0
> 
> 时间：2012-12-26T08:33:44.347
> 
> 标签：sql, postgresql, zend-framework

标题可能有点不清楚，但我会解释：

以下查询：

```
SELECT DISTINCT t.something FROM table1 as m  LEFT JOIN table2 as t ON
t.id = m.id  LEFT JOIN table3 as c ON t.id = c.id  WHERE ... LIMIT
1000; 
```

限制为 1000。现在这是特定操作中执行的唯一查询，现在安装了 Zend 调试工具，当我查看在该页面上执行的 sql 查询时，我看到该查询与以下查询一起执行1000 次（对于结果中的每一行 1 次，每行的 id：

```
SELECT "table1".* FROM table1 WHERE ((("table1"."id" = *id*))) 
```

这使得页面的性能真的很慢，我认为所有这些查询都是不必要的，所以我正在寻找一个解决方案，这样所有这些查询都不再执行，性能会更好。

有谁认识这种情况？

PS：也许很高兴知道我将 Postgresql 与 Zend 框架一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:22:57.263

这更像是一个古老的谜题，一个人必须*猜出*他的方式，而不是程序员的问题。

您似乎需要的不仅仅是`something`页面，但您的查询只检索`something`. 然后，您的智能应用程序会单独获取每一行 - 性能灾难。

我还*猜想*，您在问题中提供的查询是*错误*的（除了效率低下），应该阅读：

```
SELECT DISTINCT **m**.something
FROM   table1 as m
LEFT   JOIN table2 as t ON t.id = m.id
LEFT   JOIN table3 as c ON t.id = c.id
WHERE  ...
LIMIT  1000;
```

..这可能仍然是胡说八道，这取决于您对我们隐瞒的实际`WHERE`条款。

要使用有意义的表别名检索整行（或仅您需要的列）：

```
SELECT DISTINCT t1.*
FROM table1 t1
LEFT JOIN table2 t2 ON t2.id = t1.id
LEFT JOIN table3 t3 ON t3.id = t2.id
WHERE ...
LIMIT 1000; 
```

`table1`为了更有效地做同样的事情（假设一开始没有骗子）：

```
SELECT t1.*
FROM   table1 t1
WHERE EXISTS (
    SELECT 1 
    FROM   table2      t2
    LEFT   JOIN table3 t3 USING (id)
    WHERE  ON t2.id = t1.id
    )
AND ...
LIMIT 1000; 
```

# jsp - 单ip访问jsp

> ID：14037963
> 
> 赞同：0
> 
> 时间：2012-12-26T08:33:56.600
> 
> 标签：jsp, servlets

如何限制仅允许使用 JSP 访问的单个 IP 访问？我试图弄清楚如何避免在他/她登录时使用相同的用户名进行多个 ip 访问。提前致谢。任何片段都会受到高度重视。

# php - Code Igniter 上的会话问题

> ID：14037966
> 
> 赞同：1
> 
> 时间：2012-12-26T08:34:04.210
> 
> 标签：php, codeigniter, session

我对代码点火器的会话有疑问。首先，我想建立一个高级搜索功能。高级搜索功能将允许用户使用多个类别进行搜索。用户搜索某项内容并成功返回后，左侧边栏会显示搜索键和一个“编辑按钮”。编辑按钮将允许用户转到上一页并更改他们的搜索键。这就是为什么，我需要使用会话来存储搜索键。但是在我设置会话并尝试检索值之后，出现了问题。

这是工作流程。- 在 a.php 上设置会话 - 在 b.php 上的函数中获取会话值 - Ajax 到 b.php 以接收会话值并显示它。

有关信息，我在服务器端使用 php 和代码点火器。

这是代码：

一个.php

```
 if (!empty($params['modelname'])){
        $modelid = "";
        for($i = 0; $i < count($params['modelname']); $i++)
        {
            $modelid .= $params['modelname'][$i];
                if($i+1 < count($params['modelname']))
                {
                    $modelid .= ", ";
                }
        }
        $data = array(
            "modelname" => $modelid  
        );
        $this->session->set_userdata($data);
     ?>
     <span id="model"><strong><?php echo $modelid; ?><?php echo form_button('btnsearchmodel', 'Edit','class="btnsearchkata" id="btnsearchmodel"')?></strong></span>
     <div class="clear"></div>
     <?php } 
```

* * *

b.php

```
public function getselectedmodel()
{
    $data = $this->session->userdata('modelname');
    echo $data;
} 
```

* * *

c.php

```
function getCariModel()
   {
        var brandname = ""
        $(".brand").each(function(){
            if ($(this).is(':checked') ){
                brandname += $(this).val()+',';                    
            }
        });

        if(brandname != "")
        {
            $.ajax({
                type: "POST",  
                url: '<?php echo site_url("ajax_data/getselectedmodel"); ?>',
                dataType: 'json',
                data: {c: "ambilmodel"},
                success: function(data) {
                    alert(data);
                }
            });
        }
   } 
```

* * *

问题是：当我没有收到数据时。当我尝试提醒数据时，警报根本不起作用。好像请求不成功

我想问题出在我设置会话时。但我真的不知道我的代码有什么问题。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:41:25.290

您正在 javascript 中等待 JSON，但在您的控制器操作中`getselectedmodel`您没有[json_encode](http://php.net/json_encode)。试试这个：

```
public function getselectedmodel()
{
    $data = $this->session->userdata('modelname');
    $this->output->set_output(json_encode($data));
} 
```

如果你仍然没有输出。尝试直接执行您请求的操作并更新您的问题。

# actionscript-3 - AS3 如何访问变量并使用循环设置它们的值

> ID：14037968
> 
> 赞同：0
> 
> 时间：2012-12-26T08:34:22.773
> 
> 标签：actionscript-3, loops, dynamic, set

我有一个变量列表（a1 到 a4），我想使用 for 循环来访问所有变量并设置它们的值。如何在 AS3 中做到这一点？

```
var a1:Number = 0;
var a2:Number = 0;
var a3:Number = 0;
var a4:Number = 0;

// the primitive way
function setAllToFive():void{
                a1 = 5;
                a2 = 5;
                a3 = 5;
                a4 = 5;
}

// the smart way
function setAllToFiveAlt():void{
                for (var i:uint = 1; i<5; i++){
                  // how to get all the variables in one line ??

                }             
} 
```

如何在一行中获取所有变量？

谢谢，冉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:41:47.370

如果你只有四个固定变量，你也可以去：

```
//define multiple variables on 1 line
var a1:Number, a2:Number, a3:Number, a4:Number;

// set the value of all the variables on 1 line
a1 = a2 = a3 = a4 = 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:49:17.100

另一种方法是使用带有字符串的方括号表示法来引用属性/变量名称：

```
function setAllToFiveAlt():void
{
    for (var i:uint = 1; i<5; i++)
    {
        this["a" + i] = 5;
    }             
} 
```

请注意，我们使用`+`运算符将​​字符串“a”与整数连接起来`i`，它会自动调用`toString()`整数上的方法。

# python - 如何将 Flask 出色的调试日志消息写入生产中的文件？

> ID：14037975
> 
> 赞同：61
> 
> 时间：2012-12-26T08:35:36.270
> 
> 标签：python, logging, flask

我有一个运行良好的 Flask 应用程序，偶尔会产生错误，当它运行时可见`debug=True`：

```
if __name__ == '__main__':
    app.run(debug=True) 
```

我收到有用的错误消息，例如：

```
Traceback (most recent call last):
  File "./main.py", line 871, in index_route

KeyError: 'stateIIIII' 
```

当我在生产中运行应用程序（使用 Lighttpd + fastcgi）时，我希望将这些错误消息保存到文件中。

在查看了各种 StackOverflow 问题后（[http://flask.pocoo.org/docs/errorhandling/、http://docs.python.org/2/library/logging.html](http://docs.python.org/2/library/logging.html)[等](http://flask.pocoo.org/docs/errorhandling/)）；Flask 邮件列表；和一些博客，似乎没有简单的方法将所有重要的错误消息发送到文件 - 我需要使用 Python 日志记录模块来自定义内容。所以我想出了以下代码。

在我的应用程序文件的顶部，我有各种导入，然后是：

```
app = Flask(__name__)

if app.debug is not True:   
    import logging
    from logging.handlers import RotatingFileHandler
    file_handler = RotatingFileHandler('python.log', maxBytes=1024 * 1024 * 100, backupCount=20)
    file_handler.setLevel(logging.ERROR)
    app.logger.setLevel(logging.ERROR)
    app.logger.addHandler(file_handler) 
```

然后，我将每个路由的代码放在 try/except 语句中，并使用回溯来确定错误来自哪一行并打印出一条不错的错误消息：

```
def some_route():
    try:
        # code for route in here (including a return statement)

    except:
        exc_type, exc_value, exc_traceback = sys.exc_info()
        app.logger.error(traceback.print_exception(exc_type, exc_value, exc_traceback, limit=2))
        return render_template('error.html') 
```

然后在文件的末尾，我删除了该`debug=True`语句。虽然我认为我不需要这样做，因为该应用程序在生产中运行时由 fastcgi 服务器（？）运行。我的应用程序代码的最后两行如下所示：

```
if __name__ == '__main__':
    app.run() 
```

我正在努力让这个工作。我认为我所管理的最好方法是使用 () 将一条错误日志消息保存在文件中`app.logger.error('test message')`，但它只打印一条消息。在该错误之后直接记录另一个错误的尝试将被忽略。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-26T15:36:32.950

我不知道为什么它不起作用，但我可以告诉我是如何做到的。

首先，你不需要设置app.logger的级别。所以删除这一行`app.logger.setLevel()`。

您想为每个视图保存异常并返回错误页面。到处编写这段代码需要做很多工作。Flask 提供了一种方法来做到这一点。像这样定义一个错误处理程序方法。

```
 @app.errorhandler(500)
    def internal_error(exception):
        app.logger.error(exception)
        return render_template('500.html'), 500 
```

每当视图引发异常时，都会调用此方法并将异常作为参数传递。Python logging 提供了异常方法，用于保存异常的完整回溯。

由于这会处理所有异常，因此您甚至不需要将代码放入 try/except 块中。但是，如果您想在调用错误处理程序之前做一些事情（例如回滚会话或事务），请执行以下操作：

```
 try:
        #code
    except:
        #code
        raise 
```

如果您想为日志文件中的每个条目添加日期和时间，可以使用以下代码（代替问题中的类似代码）。

```
if app.debug is not True:   
    import logging
    from logging.handlers import RotatingFileHandler
    file_handler = RotatingFileHandler('python.log', maxBytes=1024 * 1024 * 100, backupCount=20)
    file_handler.setLevel(logging.ERROR)
    formatter = logging.Formatter("%(asctime)s - %(name)s - %(levelname)s - %(message)s")
    file_handler.setFormatter(formatter)
    app.logger.addHandler(file_handler) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-12-13T15:26:41.940

对于那些稍后阅读本文的人。

我认为将更多有用的信息推送到错误消息中是更好的主意。URL、客户端 IP、用户代理等。Flask使用函数在内部（在`app.debug==False`模式下）记录异常。`Flask.log_exception`因此，我没有手动记录内容，而是`@app.errorhandler`执行以下操作：

```
class MoarFlask(Flask):
    def log_exception(self, exc_info):
        """...description omitted..."""
        self.logger.error(
            """
Request:   {method} {path}
IP:        {ip}
User:      {user}
Agent:     {agent_platform} | {agent_browser} {agent_browser_version}
Raw Agent: {agent}
            """.format(
                method = request.method,
                path = request.path,
                ip = request.remote_addr,
                agent_platform = request.user_agent.platform,
                agent_browser = request.user_agent.browser,
                agent_browser_version = request.user_agent.version,
                agent = request.user_agent.string,
                user=user
            ), exc_info=exc_info
        ) 
```

然后，在配置时，绑定并`FileHandler`继续`app.logger`。我不使用`StreamHandler`因为许多服务器（例如 uWSGI）喜欢用他们自己专有的冗长无用的不可关闭消息来污染它。

不要害怕扩展 Flask。你迟早会被迫这样做；）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-09-02T05:05:48.603

我不是`logging`模块方面的专家，但考虑到我在这方面的经验 + 在 Python + Flask 上的几年经验，考虑到一些观察结果，您可以拥有一个良好的日志记录配置：

*   在每个函数（路由）的开头，创建一个**时间戳**对象，以便注册请求的确切时间，独立于请求是否成功

*   使用**@app.after_request**，用于注册每个成功的请求

*   使用**@app.errorhandler**，用于注册一般错误 + Tracebacks

这是一个演示这个想法的例子：

```
#/usr/bin/python3
""" Demonstration of logging feature for a Flask App. """

from logging.handlers import RotatingFileHandler
from flask import Flask, request, jsonify
from time import strftime

__author__ = "@ivanleoncz"

import logging
import traceback

app = Flask(__name__)

@app.route("/")
@app.route("/index")
def get_index():
    """ Function for / and /index routes. """
    return "Welcome to Flask! "

@app.route("/data")
def get_data():
    """ Function for /data route. """
    data = {
            "Name":"Ivan Leon",
            "Occupation":"Software Developer",
            "Technologies":"[Python, Flask, JavaScript, Java, SQL]"
    }
    return jsonify(data)

@app.route("/error")
def get_nothing():
    """ Route for intentional error. """
    return foobar # intentional non-existent variable

@app.after_request
def after_request(response):
    """ Logging after every request. """
    # This avoids the duplication of registry in the log,
    # since that 500 is already logged via @app.errorhandler.
    if response.status_code != 500:
        ts = strftime('[%Y-%b-%d %H:%M]')
        logger.error('%s %s %s %s %s %s',
                      ts,
                      request.remote_addr,
                      request.method,
                      request.scheme,
                      request.full_path,
                      response.status)
    return response

@app.errorhandler(Exception)
def exceptions(e):
    """ Logging after every Exception. """
    ts = strftime('[%Y-%b-%d %H:%M]')
    tb = traceback.format_exc()
    logger.error('%s %s %s %s %s 5xx INTERNAL SERVER ERROR\n%s',
                  ts,
                  request.remote_addr,
                  request.method,
                  request.scheme,
                  request.full_path,
                  tb)
    return "Internal Server Error", 500

if __name__ == '__main__':
    handler = RotatingFileHandler('app.log', maxBytes=10000, backupCount=3)        
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.ERROR)
    logger.addHandler(handler)
    app.run(host="127.0.0.1",port=8000) 
```

有关 logrotate 和同时登录 stdout 和文件的更多信息：[this Gist](https://gist.github.com/ivanlmj/dbf29670761cbaed4c5c787d9c9c006b)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-08T21:22:45.907

如果您使用 gunicorn 运行 Flask 应用程序，则可以通过将 gunicorn 错误处理程序添加到 Flask 记录器来将所有 Flask 异常记录到 gunicorn 日志中：

在`module/__init__.py`：

```
@app.before_first_request
def setup_logging():
    if not app.debug:
        import logging
        gunicorn_logger = logging.getLogger('gunicorn.error')
        for handler in gunicorn_logger.handlers:
            app.logger.addHandler(handler) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-11T07:57:29.007

在开发中，确保设置：app.config['PROPAGATE_EXCEPTIONS'] = False。默认为无：[https ://flask.palletsprojects.com/en/1.1.x/config/](https://flask.palletsprojects.com/en/1.1.x/config/)

# sql - 通过 SQL 合并两个不同表的数据

> ID：14037979
> 
> 赞同：1
> 
> 时间：2012-12-26T08:35:58.487
> 
> 标签：sql, database, merge

我有两个不同的表，**Country_m**和**State_m**

Table有`State`字段 like `StateId, Name, CountryId, etc`，并且`Country`Table 有文件 like `CountryId, Name, Currency, etc`。

我想得到一个状态表的数据网格，它应该在其中打印状态名称和相应的国家名称......如何执行这个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T08:40:41.793

```
SELECT S.NAME as STATE_NAME,C.NAME COUNTRY_NAME
FROM STATE_M S JOIN COUNTRY_M C
ON S.COUNTRYID=C.COUNTRYID; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T08:41:26.003

试试这个

```
 select s.name as STATENAME,c.name AS COUNTRYNAME from state s 
 inner join country c 
 on s.countryid=c.countryid 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T08:41:57.293

```
select t1.Name state_name, t2.Name Country_name from State_m t1,Country_m t2 where t1.CountryId=t2.CountryId; 
```

使用这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T08:42:11.770

这是一个连接。首先了解它们可能是个好主意：

[http://en.wikipedia.org/wiki/Join_(SQL](http://en.wikipedia.org/wiki/Join_(SQL) )

# sql-server - 关键字附近的语法不正确

> ID：14037982
> 
> 赞同：-2
> 
> 时间：2012-12-26T08:36:24.883
> 
> 标签：sql-server, vb.net

我有一个在 sql server 上成功运行的 sql 语句，但是在粘贴到 vb.net 时出现了不正确的语法问题。不正确的语法位于关键字`'.'`,`'endfrom'`和附近`'group'`。

```
sql = "select distinct y.supplierID, y.Name," & _
             "StatusDesc=CASE when  y.status='N' then 'NEW' " & _
             "when y.status='B' then 'BLACKLISTED'" & _
             "when y.status='Q' then 'QUALIFIED'" & _
             "when y.status='R' then 'REJECTED' end , " & _
             "FlowStatusDesc = CASE when y.flowstatus='RC' then 'UNDER REVIEW'" & _
             "when y.flowstatus='PE' then 'POTENTIAL EXCLUSIVE'" & _
             "when y.flowstatus='PO' then 'POTENTIAL ORDINARY' ELSE '' end," & _
             "orderno=case when y.status='N' and y.flowstatus='' then '1'" & _
             "when y.status='N' and y.flowstatus<>'' then '2'   " & _
             "when y.status='R' and y.flowstatus='' then '3'" & _
             "when y.status='R' and y.flowstatus<>'' then '4'" & _
             "when y.status='Q' and y.flowstatus='' then '5'" & _
             "when y.status='Q' and y.flowstatus<>'' then '6'" & _
             "when y.status='B' and y.flowstatus=''  then '7' " & _
             "when y.status='B' and y.flowstatus<>'' then '8' else '9' end " & _
             "from (select x.supplierID, x.Name,x.Status,x.FlowStatus,x.AddWho" & _
             "from dbo.AP_Supplier x where x.AddWho IN (Select  distinct b.UserID from dbo.SC_UserRole a left join dbo.SC_UserRole b ON a.RoleID=b.RoleID where a.UserID=@User)" & _
             "group by x.supplierID,x.Name,x.Status,x.FlowStatus,x.AddWho)y " & _
             "group by y.supplierID,y.name,y.status, y.flowstatus" & _
             "order by orderno" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:43:00.343

在所有行的末尾插入空格。例如

```
"group by y.supplierID,y.name,y.status, y.flowstatus" & _
"order by orderno" 
```

结果是字符串

```
group by y.supplierID,y.name,y.status, y.flowstatusorder by orderno 
```

这是一个语法错误。