# StackOverflow 问答 14454000-14454999

# django - 列出所有子网址并检查是否在 python 中损坏

> ID：14454001
> 
> 赞同：10
> 
> 时间：2013-01-22T08:01:54.583
> 
> 标签：django, django-urls

我有一个用 django 开发的网站，其中包含大约 25000 个子网址。我需要一些东西来列出网站中的所有网址并检查链接是否定期断开，所以我更喜欢做一些我可以作为脚本运行的事情。

我应该遵循哪种方法？任何的想法 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-03T14:50:15.190

这是基于出色的@sneawo 答案的改进课程。特点包括：

*   自动加载所有基于的 urlconfs `settings.ROOT_URLCONF`；
*   递归加载包含的 urlconfs；
*   测试期望关键字参数的 url 模式（通过默认参数）；
*   测试不同的http代码；
*   测试仅适用于登录用户的 url。

欢迎改进。

```
 from django import test
    from django.core.urlresolvers import reverse
    from django.conf import settings
    import importlib

    class UrlsTest(test.TestCase):

        def test_responses(self, allowed_http_codes=[200, 302, 405],
                credentials={}, logout_url="", default_kwargs={}, quiet=False):
            """
            Test all pattern in root urlconf and included ones.
            Do GET requests only.
            A pattern is skipped if any of the conditions applies:
                - pattern has no name in urlconf
                - pattern expects any positinal parameters
                - pattern expects keyword parameters that are not specified in @default_kwargs
            If response code is not in @allowed_http_codes, fail the test.
            if @credentials dict is specified (e.g. username and password),
                login before run tests.
            If @logout_url is specified, then check if we accidentally logged out
                the client while testing, and login again
            Specify @default_kwargs to be used for patterns that expect keyword parameters,
                e.g. if you specify default_kwargs={'username': 'testuser'}, then
                for pattern url(r'^accounts/(?P<username>[\.\w-]+)/$' 
                the url /accounts/testuser/ will be tested.
            If @quiet=False, print all the urls checked. If status code of the response is not 200,
                print the status code.
            """
            module = importlib.import_module(settings.ROOT_URLCONF)
            if credentials:
                self.client.login(**credentials)
            def check_urls(urlpatterns, prefix=''):
                for pattern in urlpatterns:
                    if hasattr(pattern, 'url_patterns'):
                        # this is an included urlconf
                        new_prefix = prefix
                        if pattern.namespace:
                            new_prefix = prefix + (":" if prefix else "") + pattern.namespace
                        check_urls(pattern.url_patterns, prefix=new_prefix)
                    params = {}
                    skip = False
                    regex = pattern.regex
                    if regex.groups > 0:
                        # the url expects parameters
                        # use default_kwargs supplied
                        if regex.groups > len(regex.groupindex.keys()) \
                            or set(regex.groupindex.keys()) - set(default_kwargs.keys()):
                            # there are positional parameters OR
                            # keyword parameters that are not supplied in default_kwargs
                            # so we skip the url
                            skip = True
                        else:
                            for key in set(default_kwargs.keys()) & set(regex.groupindex.keys()):
                                params[key] = default_kwargs[key]
                    if hasattr(pattern, "name") and pattern.name:
                        name = pattern.name
                    else:
                        # if pattern has no name, skip it
                        skip = True
                        name = ""
                    fullname = (prefix + ":" + name) if prefix else name
                    if not skip:
                        url = reverse(fullname, kwargs=params)
                        response = self.client.get(url)
                        self.assertIn(response.status_code, allowed_http_codes)
                        # print status code if it is not 200
                        status = "" if response.status_code == 200 else str(response.status_code) + " "
                        if not quiet:
                            print(status + url)
                        if url == logout_url and credentials:
                            # if we just tested logout, then login again
                            self.client.login(**credentials)
                    else:
                        if not quiet:
                            print("SKIP " + regex.pattern + " " + fullname)
            check_urls(module.urlpatterns) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T11:47:04.590

[在django-extensions](https://github.com/django-extensions/)中使用[show-urls](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/show_urls.py)命令作为起点。（[文档](http://django-extensions.readthedocs.org/en/latest/command_extensions.html?highlight=show_urls)）

```
python manage.py show_urls 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T08:19:51.500

对于没有参数的简单 url，可以使用这样的测试：

```
from django import test
from django.core.urlresolvers import reverse
from foo.urls import urlpatterns

class UrlsTest(test.TestCase):

    def test_responses(self):
        for url in urlpatterns:
            response = self.client.get(reverse(url.name))
            self.assertEqual(response.status_code, 200) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:48:36.893

另一种方法是添加一个像[Sentry](https://getsentry.com/welcome/)这样的记录器（使用[Raven](http://raven.readthedocs.org/en/latest/config/django.html)）并添加贡献的[404 中间件](http://raven.readthedocs.org/en/latest/config/django.html#logging)（或者简单地编写您自己的自定义 404 处理程序）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-02T19:16:22.643

如果您的页面已经上传到 Web 服务器，零编码解决方案是使用免费的[W3C Link Checker](http://validator.w3.org/checklink)。它将尝试在页面中找到的每个链接并提供一个很好的摘要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-10T11:57:34.350

在 Django 2.2.x 中，我不得不使用@sneawo 出色答案的这个稍微修改过的版本：

```
from django import test
from django.urls import reverse, URLPattern

from myapp.urls import urlpatterns

class MyAppUrlsTest(test.SimpleTestCase):

    def test_responses(self):
        for url in urlpatterns:
            # For now, perform only GET requests and ignore URLs that need arguments.
            if not isinstance(url, URLPattern) or url.pattern.regex.groups or not url.name:
                continue
            urlpath = reverse(url.name)
            response = self.client.get(urlpath, follow=True)
            self.assertEqual(response.status_code, 200) 
```

请注意，我还通过忽略它们来解释需要参数的视图。对于我特定的、简单化的用例，这也让我可以通过不在`name`我的`urlpatterns`.

另请参阅[https://github.com/encode/django-rest-framework/pull/5500#issue-146618375](https://github.com/encode/django-rest-framework/pull/5500#issue-146618375)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-12T01:41:59.603

我采用的方法与使用的方法略有不同`reverse`，而是实际加载站点并查找所有“href”，然后遵循所有这些等。下面的代码将所有调用打印为层次结构。目前它断言响应代码 200（在以下链接之后），如果您正在测试 25000 个子站点，那么只记录响应代码然后搜索输出可能是有意义的。

```
from django.conf import settings
from django.test.testcases import TestCase
import re
from urlparse import urlsplit, urljoin

class GenericTestCase( TestCase ):
    fixtures = []

    def test_links( self ):
        self.p1 = re.compile( r'href="([^"]*)"' )
        self.p2 = re.compile( r"href='([^']*)'" )
        self.visited_urls = set()
        self.visit( '/', 0 )

    def visit( self, url, depth ):
        print( '-' * depth + url ),
        self.visited_urls.add( url )
        response = self.client.get( url, follow=True )
        if response.redirect_chain:
            url = urlsplit( response.redirect_chain[-1][0] ).path
            print( ' => ' + url )
            if url in self.visited_urls:
                return
            self.visited_urls.add( url )
        else:
            print( '' )

        self.assertEquals( response.status_code, 200 )

        refs = self.get_refs( response.content )
        for relative_url in refs:
            absolute_url = urljoin( url, relative_url )
            if not self.skip_url( absolute_url, relative_url ):
                self.visit( absolute_url, depth + 1 )

    def skip_url( self, absolute_url, relative_url ):
        return absolute_url in self.visited_urls \
            or  ':' in absolute_url \
            or absolute_url.startswith( settings.STATIC_URL ) \
            or relative_url.startswith( '#' )

    def get_refs( self, text ):
        urls = set()
        urls.update( self.p1.findall( text ) )
        urls.update( self.p2.findall( text ) )
        return urls 
```

# ocaml - Ocaml OCamlSpotter

> ID：14454002
> 
> 赞同：2
> 
> 时间：2013-01-22T08:01:58.043
> 
> 标签：ocaml

我正在尝试使用 OCamlSpotter 浏览 ocaml 代码。我正在使用 opam，所以我所做的是，

%opam install spotinstall
现在我不确定该怎么做，

1-我必须制作，制作安装吗？2-没有命令手册，任何想法如何浏览代码？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:53:25.623

SpotInstall 不是 ocamlspotter。是安装OCamlSpotter、TypeRex等软件代码浏览所需的二进制注释文件的帮手。

SpotInstall 的文档位于其 hg 存储库：[https](https://bitbucket.org/camlspotter/spotinstall) ://bitbucket.org/camlspotter/spotinstall 。它也可以在源代码中作为 README.rst 获得。

OCamlSpotter 旨在通过 Emacs（或 Vim）使用。ocamlspot.el 上大致描述了如何使用。它应该可以通过 opam 安装：opam install ocamlspot。ocamlspot.el 位于您的 opam 目录 $HOME/.opam//system/lib/ocamlspot/ 下。

如果您正确配置 OCamlSpotter 配置，请将光标移动到 OCaml 源代码缓冲区中的 OCaml 标识符并键入 CTRL-c ;。如果源代码使用 -bin-annot 选项编译，则 ocamlspot.el 应显示其定义。

几点：

*   在您的 emacs 设置中设置您的 ocamlspot 二进制文件 (Mx customize-group => ocamlspot)
*   使用 -bin-annot 编译您的 OCaml 代码
*   如果您认为出现问题，请查看缓冲区 *ocamlspot-process*。
*   [在https://bitbucket.org/camlspotter/ocamlspot/issues?status=new&status=open](https://bitbucket.org/camlspotter/ocamlspot/issues?status=new&status=open)提交错误报告，而不是在 StackOverflow

如果你使用 Vim 用户，我写了 ocamlspot.vim，但它的测试很差。抱歉，我不使用 Vim。

# c++ - 确定程序的渐近复杂度

> ID：14454006
> 
> 赞同：5
> 
> 时间：2013-01-22T08:02:28.297
> 
> 标签：c++, complexity-theory, polynomial-math

我正在尝试确定我的程序的渐近复杂度，该程序接受输入并确定它是否是多项式。

“如果输入表达式的长度是 m 个字符，那么你的程序相对于 m 的复杂度是多少？”

我的猜测是 O(m*log m) 其中第一个 m 是迭代 m 次的 for 循环，而 log m 是计算大于 1 位的指数的 while 循环。

另外，我正在尝试保存一个“最大”值，该值包含最大指数，以计算多项式运行时复杂度。但是，我对正确存储指数感到困惑。谁能推荐一个更简单的方法？

示例输入：“n^23 + 4n^10 - 3”应该有 23 作为最大指数

```
#include <iostream>
#include <string>
using namespace std;

int main() {

string input;
int pcount = 1; //count for # of variables( min 3 to be poly)
int largest = 0; // used for complexity
int temp=0;

cout << "Enter equation below. " << endl;
getline(cin,input); //to input polynomial
cout << endl << input << endl;

if (input[0] == '-' || input[0] == '+') //to check for '-' as first char
pcount--;

bool pcheck = true; 

for (unsigned i = 0; i < input.size(); i++)
{
temp = 0;

cout << input[i] << endl;
if ( input[i] == '+' || input[i] == '-' )
pcount++;

if ( input[i] == 'n') //checks for integer
{

    if ( input[i+1] && input[i+1] == '^' )
    { 
        if (input[i+2] == 46 || input[i+2] == 43 || input[i+2] == 45)
         {
             cout << "fail" << endl;
             pcheck = false;
         }

        temp = input[i+2]-48; // to check for largest exp

        while ( input[i+2] != 43 && input[i+2] != 45) 
        {           

            if ( i+3 == input.size())
            {
                cout << "break";
                break;
            }
            if( input[i+2] < 48 || input[i+2] >57) // 48-57 is ascii 
            {
                cout << "fail" << endl;
                pcheck = false;     
            }                
            i++;

            temp = temp * 10;
            temp = temp + (input[i+2]-48);
            if (temp > largest)
            largest = temp;
        }
    }
}               
}

if ( pcheck == true && pcount >= 3) //valid ints and at least 3 variables
{
cout << "polynomial detected!" << endl << "The big-Oh complexity is O(n^" <<
largest << ")." << endl;
}
else            
cout << "not a poly" << endl;       

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:31:12.470

只要您跟踪迄今为止的最高指数，您的程序就应该对输入字符具有`O(N)`复杂性（线性） 。`N`这样，您就不必回头重新阅读以前的字符。

# android - 共享以外的内容提供者的使用

> ID：14454008
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:02:34.993
> 
> 标签：android, android-contentprovider

Content Provider 的用途之一是共享数据。谁能告诉我内容提供者的其他用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:07:36.330

读取共享数据、修改共享数据……

阅读电话簿，阅读用户词典，独立应用程序之间的通信，修改日历事件......等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:41:41.673

内容提供者必须作为抽象层来存储您可能需要的任何类型的数据。最常见的情况是包装一个 sqllite 数据库，但没有什么能阻止你包装一个 rest-ful 服务或原始文件。

您可以通过添加来选择不导出的事实也强化了这一点

```
android:exported="false" 
```

进入你的清单。与直接访问数据相比，使用内容提供者有很多优势，包括线程安全，以及使用游标加载器的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:44:13.997

A`ContentProvider`提供了一种使用`CursorLoader`. 然后它可以通过插入任何类型的存储、SQLite、文件、首选项、网络......

它提供了抽象，以便您以后可以更改存储方法。

# iphone - 尝试在从 segue 返回时运行代码

> ID：14454009
> 
> 赞同：6
> 
> 时间：2013-01-22T08:02:46.040
> 
> 标签：iphone, segue, viewcontroller

我正在尝试找到一种方法来捕获从 segue 到根控制器的返回，以便我可以运行自定义代码来决定下一步去哪里。我已经尝试了以下两种方法，但它们并没有起到作用，因为它们似乎（显然）关心展开 segue 堆栈。有什么想法吗？

```
-(UIStoryboardSegue *)segueForUnwindingToViewController
{
}

-(BOOL)canPerformUnwindSegueAction
{
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:44:18.923

**仅适用于 iOS 6：**

“在您希望返回的控制器中，实现一个返回 IBAction 的方法，该方法采用单个 UIStoryboardSegue 参数：

```
- (IBAction)returnActionForSegue:(UIStoryboardSegue *)returnSegue {

// do useful actions here.

} 
```

现在，在我们希望展开的场景中，从 UI 元素中按住 control 并拖动，这将触发返回到场景的退出图标（停靠栏中的绿色图标）。在弹出的菜单中，选择之前定义的返回项。”

更多信息：http: [//www.freelancemadscience.com/fmslabs_blog/2012/9/24/advanced-storyboard-techniques.html](http://www.freelancemadscience.com/fmslabs_blog/2012/9/24/advanced-storyboard-techniques.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:10:41.367

您的方法调用不完整。这是另一篇文章，它提供了一些关于如何使用 unwind 方法的好例子：

[什么是 unwind segues 以及如何使用它们](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-to-use-them)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-11T10:40:14.077

如果您只需要知道您的 VC 何时从堆栈中删除，那么请注意 boolean `isMovingFromParent`。

检查`isMovingFromParent`其中一个`viewWillDisappear`或`viewDidDisappear`以确保您的视图将不再存在。

# mongodb - MongoDB - 子文档搜索不起作用

> ID：14454016
> 
> 赞同：0
> 
> 时间：2013-01-22T08:03:25.887
> 
> 标签：mongodb, indexing, mongodb-query

我有一个将`variants`其`specifications`作为子文档调用的集合。使用点符号搜索变体对我有用（但不使用索引），而使用子文档格式返回零结果（但使用索引）。我做错了什么？

```
> db.variants.getIndexes();
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "automobile.variants",
        "name" : "_id_"
    },
    {
        "v" : 1,
        "key" : {
            "specifications" : 1
        },
        "ns" : "automobile.variants",
        "name" : "specifications_1"
    }
]
> db.variants.find({"specifications" : { "Body" : "SUV" }}).explain()
{
    "cursor" : "BtreeCursor specifications_1",
    "nscanned" : 0,
    "nscannedObjects" : 0,
    "n" : 0,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "specifications" : [
            [
                {
                    "Body" : "SUV"
                },
                {
                    "Body" : "SUV"
                }
            ]
        ]
    }
}
> db.variants.find({"specifications.Body" : "SUV" }).explain()
{
    "cursor" : "BasicCursor",
    "nscanned" : 787,
    "nscannedObjects" : 787,
    "n" : 176,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:16:17.077

您已将索引放在子文档本身上。

当你这样做时，MongoDB 索引数组的元素，如果你有：

```
{
    Specifications: [
        {Body: 'SUV'}
    ]
} 
```

如果您查询，MongoDB 可以使用索引：

```
db.col.find({Specifications: {Body: 'SUV'}}) 
```

由于它与元素匹配，但它无法通过该子文档的部分进行查询。

如果您希望使用索引查询子文档的各个部分，您应该索引这些部分，即：

```
ensureIndex({Specifications.body: 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:15:48.357

在这种情况下，您应该在要进行查询的确切字段上有一个索引`specifications.Body`。在您的第一个查询中，因为您在规范字段上有一个索引，所以查询使用该索引，但根据您的架构它是无效的。

# android - 如何更改 Android 应用程序开发的片段，每个片段内都有按钮？

> ID：14454021
> 
> 赞同：0
> 
> 时间：2013-01-22T08:03:43.530
> 
> 标签：android, button, android-fragments, android-fragmentactivity

我有一个 Android 活动，里面有两个片段，比如 A 和 B。我想单击 A 中的按钮，以便 B 切换到 C、D 或 E。

每个布局都引用一个.xml，所有布局都有不同的按钮调用其他片段或做其他事情......

现在在 main.java 中：

```
public void stackAFragment(int page) {

//depending on which button on the list is clicked, the corresponding fragment is replaced
if (npage = 1){
Fragment f = new FragmentB();}

if (npage = 2){
Fragment f = new FragmentC();}

if (npage = 3){
Fragment f = new FragmentD();}

FragmentTransaction ft = getFragmentManager().beginTransaction()
ft.replace(R.id.frag_content, f); 
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN); 
ft.addToBackStack(null); 
ft.commit();} 
```

然后在 A.java 中，有一个列表视图，并且对于侦听器

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
Main main = (Main) getActivity();
main.stackAFragment(arg2 + 1); } 
```

在 B.java 中：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
View c = inflater.inflate(R.layout.frag_b, container, false);
return c;} 
```

在 C.java 中：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
View c = inflater.inflate(R.layout.frag_c, container, false);
return c;} 
```

等等.....

所以现在，在第一页，它显示了片段 A 和 B。

但是当我点击更改为片段 C 时，片段 B 并没有消失，而是片段 C 出现在片段 B 下

当我单击以更改为片段 D 时，片段 C 消失但 B 仍然存在....

我怎么能解决我的问题？

非常感谢！！！非常感谢有人能指出我正确的方法......

附加信息:::: main.xml 的布局

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/frags"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".SlidingMenu" >

<fragment
    android:id="@+id/frag_content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    class="com.seapointcorp.enque01.ContentFragment" />

<fragment
    android:id="@+id/frag_title"
    android:layout_width="@dimen/titles_size"
    android:layout_height="match_parent"
    class="com.seapointcorp.enque01.TitleFragment" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:37:24.503

您的代码的主要问题是您正在使用布局文件`FragmentTransaction`中的项目的 id 进行替换（因此您基本上使用 id 在片段中进行替换（我假设是片段 B））。相反，您应该有一个包装布局（一个简单的等）作为内容片段将被添加/删除/替换的区域：`Fragment``frag_content``FrameLayout``RelativeLayout`

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/frags"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".SlidingMenu" >

    <FrameLayout android:id="@+id/content"     android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <fragment
           android:id="@+id/frag_content"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           class="com.seapointcorp.enque01.ContentFragment" />
    </FrameLayout>
    <fragment
        android:id="@+id/frag_title"
        android:layout_width="@dimen/titles_size"
        android:layout_height="match_parent"
        class="com.seapointcorp.enque01.TitleFragment" />

    </FrameLayout>
</FrameLayout> 
```

然后在您的`stackAFragment()`方法中，您将执行以下操作：

```
FragmentTransaction ft = getFragmentManager().beginTransaction()
ft.replace(R.id.content, new tagetFragment()); 
 ft.addToBackStack(null);

            // Commit the transaction
            ft.commit();
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:26:42.863

在您的主机中`activity`

```
public static FragmentListener sFragmentListener;    

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    // Do normal work.
    sFragmentListener = new FragmentListener();
    // Do more work.
}

public interface FragmentListener {
        void onNextFragment();
    }

    public final class FragmentListenerListener {

        @Override
        public void onShowNextFragment() {
            // Do Fragment Transition
            mFragmentTransition.replace(R.id.awesomeContainer, new A.class);
        }

    } 
```

在您`Fragment`的`OnClick`方法中只需调用：`HostActivity.sFragmentListener.onShowNextFragment()`执行该方法。

您可以根据需要进行修改。

# android - HTC 和索尼爱立信手机上的 Android 应用程序崩溃

> ID：14454024
> 
> 赞同：5
> 
> 时间：2013-01-22T08:03:52.993
> 
> 标签：android, crash-reports, sony, htc-android

我们今天在市场上推出了这款应用程序 - [Nomad](https://play.google.com/store/apps/details?id=com.m7.nomad)。我收到有关应用程序在 HTC 和索尼爱立信手机上崩溃的报告。我从其中一位用户那里得到了以下日志报告。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.m7.nomad/com.m7.nomad.SplashActivity}: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x3
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x3
at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:5459)
at android.widget.LinearLayout$LayoutParams.<init>(LinearLayout.java:1776)
at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:1700)
at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:56)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:741)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2707)
at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2767)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:247)
at android.app.Activity.setContentView(Activity.java:1835)
at com.m7.nomad.SplashActivity.onCreate(SplashActivity.java:46)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
... 11 more 
```

无法理解为什么会发生。

SplashActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this;

    // Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.activity_splash);

    // Shared Preferences
    settings = getSharedPreferences(SETTINGS_PREFS, 0);

    configRun = settings.getInt("database_version", 0);

    this.assetManager = this.getAssets();

} 
```

第 46 行指向`setContentView(R.layout.activity_splash);`

**activity_splash.java**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/primary_color" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="Splash Screen"
        android:gravity="center"
        android:src="@drawable/splash_logo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:29:29.517

崩溃的原因可能隐藏在您的风格中。它可能包含引用包含在 Android SDK 中的维度的属性，而您在不包含该维度的旧版本 SDK 上运行应用程序。

[在这个例子](https://stackoverflow.com/questions/11933392/custom-listview-design-doesnt-work-on-device-but-works-in-emulator)中，作者使用了以下属性：

```
android:paddingLeft="?android:attr/listPreferredItemPaddingLeft" 
```

但是，正如接受的答案所指出的那样，只能从 SDK 级别 14 开始使用该[`listPreferredItemPaddingLeft`条目。](http://developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft)`android.R.attr`

删除有问题的条目，替换它们，或分离资源文件以使其尊重 SDK 级别。例如，您可以在 中提供一种样式`res/values-14`，而另一种在 中省略这些条目`res/values`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:40:17.000

在你的项目中应用这个 xml，看看会发生什么:)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/primary_color"
    android:textAlignment="center" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="Splash Screen"
        android:gravity="center"
        android:src="@drawable/splash_logo" />

</RelativeLayout> 
```

评论这一行::

```
context = this;
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:56:39.440

在您的初始布局中使用它

```
<?xml version="1.0" encoding="utf-8"?>
 <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffe5492a"
android:contentDescription="Splash Screen"
android:scaleType="fitCenter"
android:src="@drawable/splash_logo" > 
```

# java - 设备通话时禁用自己的锁屏

> ID：14454025
> 
> 赞同：1
> 
> 时间：2013-01-22T08:03:54.427
> 
> 标签：java, android, telephonymanager, phone-call, phone-state-listener

我正在使用 `Intent.ACTION_SCREEN_OFF`and制作自己的 LockScreen `Intent.ACTION_SCREEN_ON`。但是当我有电话时它仍然有效。我提到了这段代码，但它没有用。

```
 StateListener phoneStateListener = new StateListener();
        TelephonyManager telephonymanager =  (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
        telephonymanager.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
    }catch(Exception e){ }

}
   class StateListener extends PhoneStateListener{
        @Override
   public void onCallStateChanged(int state, String incomingNumber)     {

              super.onCallStateChanged(state, incomingNumber);
              switch(state){
              case TelephonyManager.CALL_STATE_RINGING:
                    break;
              case TelephonyManager.CALL_STATE_OFFHOOK:
                    System.out.println("call Activity off hook");

        // Finish lock screen activity
                    finish();
                    break;
              case TelephonyManager.CALL_STATE_IDLE:
                    break;
              }
        }
  }; 
```

# asp.net-mvc - 带有 IoC 的存储库模式 - 它应该如何正确使用？

> ID：14454027
> 
> 赞同：3
> 
> 时间：2013-01-22T08:04:06.323
> 
> 标签：asp.net-mvc, repository, unity-container, ioc-container

我是一个孤独的开发人员，Pluralsight 是我的救星，它帮助我理解了 Repository 和 IoC 等我刚刚学习的东西。但是我发现这种模式使用起来很尴尬。

所以我正在使用 Unity IoC 和以下`ModelContainer`课程；

```
public static class ModelContainer
{
    private static IUnityContainer instance;

    static ModelContainer()
    {
        instance = new UnityContainer();
    }

    public static IUnityContainer Instance
    {
        get
        {
            instance.RegisterType<ISCD_CallDiaryRepository, SCD_CallDiaryRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<ICompanyRepository, CompanyRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<ISubcontractorRepository, SubcontractorRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<ITradeRepository, TradeRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<IEmployeeRepository, EmployeeRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<ISubcontractorTradeRepository, SubcontractorTradeRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<ICountyRepository, CountyRepository>(new HierarchicalLifetimeManager());
            instance.RegisterType<IAddressLineRepository, AddressLineRepository>(new HierarchicalLifetimeManager());
            return instance;
        }
    }
} 
```

允许我在控制器的构造函数中实例化存储库类；

```
public SubcontractorController(
        ISubcontractorRepository subcontractorRepository,
        ISubcontractorTradeRepository subcontractorTradeRepository, 
        ICompanyRepository companyRepository, 
        ISCD_CallDiaryRepository scdCallDiaryRepository,
        ITradeRepository tradeRepository,
        IAddressLineRepository addressLineRepository)
    {
        this.SubcontractorRepository = subcontractorRepository;
        this.SubcontractorTradeRepository = subcontractorTradeRepository;
        this.CompanyRepository = companyRepository;
        this.ScdCallDiaryRepository = scdCallDiaryRepository;
        this.TradeRepository = tradeRepository;
        this.AddressLineRepository = addressLineRepository;
    } 
```

我对此设置感到尴尬的是，如果我想在这些存储库类中使用 CRUD 功能，我必须在控制器中执行该功能，或者将我创建的存储库实例作为参数传递给模型类方法。我选择后者，控制器并不意味着做太多事情，但对我来说，必须不断传递存储库参数似乎是不对的。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T11:31:38.480

我将我的 MVC 应用程序分成几个不同的项目。

*   AppName.Configuration：处理应用程序的任何配置（即拉入 web.config/app 设置等）
*   AppName.Data：这是执行所有数据库访问的数据层（无业务逻辑）。DBML/EDMX 在这里，我的存储库类也在这里。
*   AppName.Models：这是我为 MVC 定义的所有 ViewModel 以及整个应用程序所需的其他模型对象的地方。
*   AppName.Services：这是我的业务层，一切都必须经过这里才能到达数据层或表示层。ViewModels 是从数据库对象构建的，数据验证发生在这里，等等。
*   AppName.Web：这将是 MVC 应用程序。AppName.Data.Test：数据应用的单元测试
*   AppName.Services.Test：服务的单元测试
*   AppName.Web.Test：MVC 控制器的单元测试
*   AppName.Web.UI.Test：Web 用户界面的单元测试（使用 WATIN）

我还有一组打包到 NuGet 包中的类，如果需要，我可以将它们添加到我的应用程序中，即（对于本示例）：

*   CompanyName.Data：数据层逻辑的通用库
*   CompanyName.MVC：用于 ASP.NET MVC 集成的通用库
*   CompanyName.Utilities：杂项实用程序的公共库

我的控制器除了从服务层获取视图模型以发送到视图，然后在从视图发布时接收数据并将其发送到服务层进行验证并保存回存储库之外什么都不做。

这是一个基本示例：

这是将在此示例中使用的视图模型：

```
public class CreateFocusViewModel
{
    public int CareerPlanningFormID { get; set; }

    public int PerformanceYear { get; set; }

    public IList<FocusModel> Focuses { get; set; }

    public string ResultsMeasuresFocusComments { get; set; }

    public byte MaximumFocusesAllowed { get; set; }
}

public class FocusModel
{
    public int FocusID { get; set; }

    public string FocusText { get; set; }

    public bool IsPendingDeletion { get; set; }
} 
```

带有 GET 和 POST 操作方法的示例控制器：

```
public class CPFController : Controller
{
    private readonly ICareerPlanningFormService careerPlanningFormService;

    public CPFController(ICareerPlanningFormService careerPlanningFormService)
    {
        this.careerPlanningFormService = careerPlanningFormService;
    }

    [HttpGet]
    public ViewResult CreateFocus(int careerPlanningFormID)
    {
        var model = this.careerPlanningFormService.BuildCreateFocusViewModel(careerPlanningFormID);
        return this.View(model);
    }

    [HttpPost]
    public ActionResult CreateFocus(int careerPlanningFormID, string button)
    {
        var model = this.careerPlanningFormService.BuildCreateFocusViewModel(careerPlanningFormID);
        this.TryUpdateModel(model);

        switch (button)
        {
            case ButtonSubmitValues.Next:
            case ButtonSubmitValues.Save:
            case ButtonSubmitValues.SaveAndClose:
                {
                    if (this.ModelState.IsValid)
                    {
                        try
                        {
                            this.careerPlanningFormService.SaveFocusData(model);
                        }
                        catch (ModelStateException<CreateFocusViewModel> mse)
                        {
                            mse.ApplyTo(this.ModelState);
                        }
                    }

                    if (!this.ModelState.IsValid)
                    {
                        this.ShowErrorMessage(Resources.ErrorMsg_WEB_ValidationSummaryTitle);
                        return this.View(model);
                    }

                    break;
                }

            default:
                throw new InvalidOperationException(string.Format(Resources.ErrorMsg_WEB_InvalidButton, button));
        }

        switch (button)
        {
            case ButtonSubmitValues.Next:
                return this.RedirectToActionFor<CPFController>(c => c.SelectCompetencies(model.CareerPlanningFormID));

            case ButtonSubmitValues.Save:
                this.ShowSuccessMessage(Resources.Msg_WEB_NotifyBarSuccessGeneral);
                return this.RedirectToActionFor<CPFController>(c => c.CreateFocus(model.CareerPlanningFormID));

            case ButtonSubmitValues.SaveAndClose:
            default:
                return this.RedirectToActionFor<UtilityController>(c => c.CloseWindow());
        }
    }
} 
```

构建 ViewModel 并验证/保存数据的服务层：

```
public class CareerPlanningFormService : ICareerPlanningFormService
{
    private readonly IAppNameRepository repository;
    private readonly IPrincipal currentUser;

    public CareerPlanningFormService(IAppNameRepository repository, IPrincipal currentUser)
    {
        this.repository = repository;
        this.currentUser = currentUser;
    }

    public CreateFocusViewModel BuildCreateFocusViewModel(int careerPlanningFormID)
    {
        var cpf = this.repository.GetCareerPlanningFormByID(careerPlanningFormID);

        // create the model using cpf
        var model = new CreateFocusViewModel
        {
            CareerPlanningFormID = cpf.CareerPlanningFormID,
            PerformanceYear = cpf.PerformanceYearID,
            ResultsMeasuresFocusComments = cpf.ResultsMeasuresFocusComments,
            MaximumFocusesAllowed = cpf.PerformanceYear.MaximumCareerPlanningFormFocusesAllowed
            // etc., etc...
        };

        return model;
    }

    public void SaveFocusData(CreateFocusViewModel model)
    {
        // validate the model
        this.ValidateCreateFocusViewModel(model);

        // get the current state of the CPF
        var cpf = this.repository.GetCareerPlanningFormByID(model.CareerPlanningFormID);

        // bunch of code saving focus data here...

        // update the ResultsMeasuresFocusComments
        cpf.ResultsMeasuresFocusComments = string.IsNullOrWhiteSpace(model.ResultsMeasuresFocusComments) ? null : model.ResultsMeasuresFocusComments.Trim();

        // commit the changes
        this.repository.Commit();
    }

    private void ValidateCreateFocusViewModel(CreateFocusViewModel model)
    {
        var errors = new ModelStateException<CreateFocusViewModel>();

        {
            var focusesNotPendingDeletion = model.Focuses.Where(f => f.IsPendingDeletion == false);

            // verify that at least one of the focuses (not pending deletion) has a value
            {
                var validFocuses = focusesNotPendingDeletion.Where(f => !string.IsNullOrWhiteSpace(f.FocusText)).ToList();
                if (!validFocuses.Any())
                {
                    var index = model.Focuses.IndexOf(model.Focuses.Where(f => f.IsPendingDeletion == false).First());
                    errors.AddPropertyError(m => m.Focuses[index].FocusText, Resources.ErrorMsg_CPF_OneFocusRequired);
                }
            }

            // verify that each of the focuses (not pending deletion) length is <= 100
            {
                var focusesTooLong = focusesNotPendingDeletion.Where(f => f.FocusText != null && f.FocusText.Length > 100).ToList();
                if (focusesTooLong.Any())
                {
                    focusesTooLong.ToList().ForEach(f =>
                    {
                        var index = model.Focuses.IndexOf(f);
                        errors.AddPropertyError(m => m.Focuses[index].FocusText, Resources.ErrorMsg_CPF_FocusMaxLength);
                    });
                }
            }
        }

        errors.CheckAndThrow();
    }
} 
```

存储库类：

```
public class AppNameRepository : QueryRepository, IAppNameRepository
{
    public AppNameRepository(IGenericRepository repository)
        : base(repository)
    {
    }

    public CareerPlanningForm GetCareerPlanningFormByID(int careerPlanningFormID)
    {
        return this.Repository.Get<CareerPlanningForm>().Where(cpf => cpf.CareerPlanningFormID == careerPlanningFormID).Single();
    }
} 
```

仓库界面：

```
public interface IAppNameRepository : IRepository
{
    CareerPlanningForm GetCareerPlanningFormByID(int careerPlanningFormID);
} 
```

CompanyName.Data 公共库中的类：

```
public abstract class QueryRepository : IRepository
{
    protected readonly IGenericRepository Repository;

    protected QueryRepository(IGenericRepository repository)
    {
        this.Repository = repository;
    }

    public void Remove<T>(T item) where T : class
    {
        this.Repository.Remove(item);
    }

    public void Add<T>(T item) where T : class
    {
        this.Repository.Add(item);
    }

    public void Commit()
    {
        this.Repository.Commit();
    }

    public void Refresh(object entity)
    {
        this.Repository.Refresh(entity);
    }
}

public interface IGenericRepository : IRepository
{
    IQueryable<T> Get<T>() where T : class;
}

public interface IRepository
{
    void Remove<T>(T item) where T : class;
    void Add<T>(T item) where T : class;
    void Commit();
    void Refresh(object entity);
} 
```

我有 LinqToSQL 和 EF，这是 LinqToSQL 的设置：

```
internal sealed class LinqToSqlRepository : IGenericRepository
{
    private readonly DataContext dc;

    public LinqToSqlRepository(DataContext dc)
    {
        this.dc = dc;
    }

    public IQueryable<T> Get<T>() where T : class
    {
        return this.dc.GetTable<T>();
    }

    public void Remove<T>(T item) where T : class
    {
        this.dc.GetTable<T>().DeleteOnSubmit(item);
    }

    public void Add<T>(T item) where T : class
    {
        this.dc.GetTable<T>().InsertOnSubmit(item);
    }

    public void Commit()
    {
        this.dc.SubmitChanges();
    }

    public void Refresh(object entity)
    {
        this.dc.Refresh(RefreshMode.OverwriteCurrentValues, entity);
    }
} 
```

这也在 CompanyName.Data 公共库中。它具有注册 LinqToSQL 或 EntityFramework 的方法

```
public static class UnityContainerExtensions
{
    public static IUnityContainer RegisterEntityFrameworkClasses<TDbContext>(this IUnityContainer container, string nameOrConnectionString) where TDbContext : DbContext
    {
        var constructor = typeof(TDbContext).GetConstructor(new Type[] { typeof(string) });
        container.RegisterType<DbContext>(new HierarchicalLifetimeManager(), new InjectionFactory(c => constructor.Invoke(new object[] { nameOrConnectionString })));
        container.RegisterType<IGenericRepository, EntityFrameworkRepository>();
        return container;
    }

    public static IUnityContainer RegisterLinqToSqlClasses<TDataContext>(this IUnityContainer container, string connectionString) where TDataContext : DataContext
    {
        var constructor = typeof(TDataContext).GetConstructor(new Type[] { typeof(string) });
        container.RegisterType<DataContext>(new HierarchicalLifetimeManager(), new InjectionFactory(c => constructor.Invoke(new object[] { connectionString })));
        container.RegisterType<IGenericRepository, LinqToSqlRepository>();
        return container;
    }
} 
```

在 CompanyName.Utilities 库中：

```
public interface IUnityBootstrap
{
    IUnityContainer Configure(IUnityContainer container);
} 
```

AppName.Data 中的 Unity 引导

```
public class UnityBootstrap : IUnityBootstrap
{
    public IUnityContainer Configure(IUnityContainer container)
    {
        var config = container.Resolve<IAppNameConfiguration>();

        return container.RegisterLinqToSqlClasses<AppNameDataContext>(config.AppNameConnectionString)
                        .RegisterType<IAppNameRepository, AppNameRepository>();
    }
} 
```

AppName.Services 中的 Unity 引导

```
public class UnityBootstrap : IUnityBootstrap
{
    public IUnityContainer Configure(IUnityContainer container)
    {
        new CompanyName.Security.UnityBootstrap().Configure(container);
        new AppName.Data.UnityBootstrap().Configure(container);

        container.RegisterSecureServices<AuthorizationRulesEngine>(typeof(UnityBootstrap).Assembly);

        return container.RegisterType<ICareerPlanningFormService, CareerPlanningFormService>()
                        .RegisterType<IStaffService, StaffService>();
    }
} 
```

AppName.Web 中的 Unity 引导

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        // Standard MVC setup
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        // Application configuration 
        var container = new UnityContainer();
        new CompanyName.Mvc.UnityBootstrap().Configure(container);
        new AppName.Configuration.UnityBootstrap().Configure(container);
        new AppName.Data.UnityBootstrap().Configure(container);
        new AppName.Services.UnityBootstrap().Configure(container);

        // Default MVC model binder is pretty weak with collections
        ModelBinders.Binders.DefaultBinder = new DefaultGraphModelBinder();
    }

    protected void Application_Error()
    {
        HttpApplicationEventHandler.OnError(this.Context);
    }

    protected void Application_EndRequest()
    {
        HttpApplicationEventHandler.OnEndRequest(this.Context);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T09:29:41.630

In provided sample, there is `SubcontractorController` controller with **six dependecies**, what is usually means that the controller tries to do too much at once, and could possibly violates Single responsibility principle. There are at least three way to improve situation:

*   Instead of injecting *repositories* into *a controller*, and passing *the repository* instance as *a parameter* into the *model class methods*, you could [refactor to Aggregate Services](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx), i.e. combine both models method and dependencies in single entity. This will also solve constructor over-injection.
*   Inject a factory of repositories into the controller, and later resolve dependencies using this factory
*   Inject models themselves, and make *repositories* to be their dependencies.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:10:17.577

在我职业生涯的早期，我也尝试过后者。结局并不好。您最终会遇到意外的性能下降和大型模型对象。我认为控制器是您提到的逻辑的理想场所。如果您担心同一类中的用户界面和业务问题，请将业务转移到服务类。

# jackson - 在杰克逊中使用自定义序列化器对集合进行多态序列化

> ID：14454028
> 
> 赞同：0
> 
> 时间：2013-01-22T08:04:23.653
> 
> 标签：jackson, resteasy

我如何告诉杰克逊为每个通用集合类型使用不同的序列化程序。我有一个 CustomProductsSerializer 和一个 CustomClientsSerializer

```
 public class ProductsListSerializer extends JsonSerializer<List<Products>>{

    // logic to insert __metadata , __count into json
    public void serialize(List<Products> value, JsonGenerator jgen, SerializerProvider provider) {
     .... .... .... 
     }
    // always returns ArrayList.class 
    public Class<List<Instrument>> handledType() {
    Class c = var.getClass();
    return c;
    }
    }

    public class CustomClientsSerializer extends JsonSerializer<List<Clients>>{

    // logic to insert __metadata , __count into json
    public void serialize(List<Clients> value, JsonGenerator jgen, SerializerProvider provider){
     .... .... .... 
     }
     .... .... .... 
    // always returns ArrayList.class 
    public Class<List<Clients>> handledType() {
    Class c = var.getClass();
    return c;
    }
    } 
```

我已经使用 SimpleModule 注册了两个序列化程序。问题是，由于这两种情况下的handledType都返回ArrayList.class，下面的客户端序列化失败并出现类转换异常。

```
 List<Clients> clients;
    // code to get clients from database. 
    String jsonString = mapper.writeValueAsString(clients); 
```

问题是如何告诉杰克逊使用哪个序列化程序？

我使用杰克逊作为resteasy的json序列化程序。

--编辑以响应@HiJon89 我有一个返回“列表”的业务对象和另一个返回列表的业务对象。我需要的方式是当 Busines 对象返回一个“列表”时，应该将 ProductsListSerializer 用于整个列表。并且当业务对象返回“列表”时，应将 CustomClientsSerializer 用于整个列表。在我的用例中，我将附加元素附加到序列化的 json 'eg:__count, __metadata, __references' 每个集合只有一个 __count。Contentusing 只能用于属性。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:32:27.903

您是否真的希望这种类型的序列化/反序列化在集合内时以不同方式处理？如果没有，您可以使用以下内容注释`Product`类：[`@JsonSerialize(using = ProductSerializer.class)`](http://fasterxml.github.com/jackson-databind/javadoc/2.1.1/com/fasterxml/jackson/databind/annotation/JsonSerialize.html#using%28%29)杰克逊将在遇到 a `Product`（包括集合内部）时使用您的序列化程序。

如果您在集合内部确实需要不同的处理，您可以使用以下内容对类进行注释：[`@JsonSerialize(using = ProductSerializer.class, contentUsing = ProductInCollectionSerializer.class)`](http://fasterxml.github.com/jackson-databind/javadoc/2.1.1/com/fasterxml/jackson/databind/annotation/JsonSerialize.html#contentUsing%28%29). 这将做与上面相同的事情，除了`ProductInCollectionSerializer`当 Jackson 遇到包含`Product`.

*根据评论编辑：*

Jackson 会将集合序列化为 JSON 数组，因此没有地方放置这些附加属性。听起来您希望 Jackson 返回一个 JSON 对象，其中包含一个 JSON 数组以及一些额外的元数据。在这种情况下，最好的方法是将 包装`List<Product>`在一个对象中，例如：

```
public class ProductListWrapper {
    private final List<Product> products;

    public ProductListWrapper(List<Product> products) {
        this.products = products;
    }

    public List<Product> getProducts() {
        return products;
    }

    @JsonProperty("_count")
    public int getCount() {
        return getProducts() == null ? 0 : getProducts().size();
    }
} 
```

Jackson 然后可以序列化这个对象，而无需编写任何自定义序列化程序，并将生成如下所示的 JSON：

```
{
    "products": [....]
    "_count": 25
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:01:13.107

它可以通过扩展 simplemodule 或扩展 com.fasterxml.jackson.databind.Module。我采取了第二种方法。以下是更改摘要

添加了将 JavaType 作为参数的方法。

```
 public <T> TypedModule addSerializer(JavaType type, JsonSerializer<T> ser)
{
    if (_serializers == null) {
        _serializers = new TypedSerializers();
    }
    _serializers.addSerializer(type, ser);
    return this;
} 
```

上述方法将新的串行器添加到

```
protected TypedSerializers _serializers = null; 
```

'TypedSerializers extends Serializers.Base' 类将所有类型化的序列化器存储在 HashMap 中。

更改了 TypedSerializers 中 findSerializer 方法的逻辑

```
public JsonSerializer<?> findSerializer(SerializationConfig config,
        JavaType type, BeanDescription beanDesc) {

    Class<?> cls = type.getRawClass();
    ClassKey key = new ClassKey(cls);
    JsonSerializer<?> ser = null;
    if (_javaTypeMappings != null) {
        ser = _javaTypeMappings.get(type.toString());
        if (ser != null) {
            return ser;
        }
    }
 ..... process normal serilaizers ... 
```

注册customerializer时需要进行以下更改

```
 TypedModule simpleModule = new TypedModule("TypedModule", new Version(1, 0, 0, null));       
    JavaType productlist = this.getTypeFactory().constructCollectionType(List.class, Product.class);
    JavaType clientlist = this.getTypeFactory().constructCollectionType(List.class, Client.class);
    simpleModule.addSerializer(productlist,  new prodctlistserializer());
    simpleModule.addSerializer(clientlist, new clientlistserializer() );
    this.registerModule(simpleModule); 
```

产生的行为是，当“产品类型列表”传递给 ObjectMapper 时，它会尝试找到合适的序列化器。我们在 _javaTypeMappings 的映射中维护通用序列化程序。Objecmapper 执行 findSerializer。findSerializer 首先检查 _javaTypeMappings 中的可用序列化程序。在这种情况下，它返回 prodctlistserializer。当传递“客户端类型列表”时，它返回客户端列​​表序列化器。

我已将 com.fasterxml.jackson.databind.Module 下的所有源代码放入我的项目中的一个包中，并添加了上述更改。

# python - 看不到任何输出

> ID：14454032
> 
> 赞同：-4
> 
> 时间：2013-01-22T08:04:33.837
> 
> 标签：python, paramiko

这是一些不提供任何输出的代码

```
#!/usr/bin/python

import sys
import paramiko

def remote_ssh(hostname, cmd):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(hostname, username='blahblah', password='blahblah')
    stdin, stdout, stderr = ssh.exec_command(cmd)
    out =  stdout.readlines()
for lines in out:
    print lines

remote_ssh(sys.argv[1],sys.argv[2]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:17:00.710

正确缩进后，您的代码对我有用：

**文件`ssh.py`：**

```
#!/usr/bin/python

import sys
import paramiko

def remote_ssh(hostname, cmd):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(hostname, username='changeme', password='changeme')
    stdin, stdout, stderr = ssh.exec_command(cmd)
    out =  stdout.readlines()

    for lines in out:
        print lines

remote_ssh(sys.argv[1],sys.argv[2]) 
```

叫像

```
$ ./ssh.py localhost ls 
```

列出给定用户的主目录中的文件。

# mysql - 连接日期函数mysql

> ID：14454035
> 
> 赞同：2
> 
> 时间：2013-01-22T08:04:42.530
> 
> 标签：mysql, sql, date, datetime

mysql 查询返回意外。我正在尝试连接一些包含日期查询的字符串，如下所示：

```
mysql> select month(timestamp) +'-'+ day(timestamp) + '-' + 
       year(timestamp) as date FROM table ORDER BY timestamp DESC LIMIT 1; 
```

我得到一个 4 位数的结果，我认为这是预期结果的总和：

```
+------+
| date |
+------+
| 2035 |
+------+ 
```

我也尝试过将每个都设置为`CHAR`不起作用：

```
mysql> select CAST(month(timestamp) as CHAR) +'-'+ CAST(day(timestamp) as CHAR) + '-' + 
CAST(year(timestamp) as CHAR) as date FROM table ORDER BY timestamp DESC LIMIT 1; 
```

有人可以让我知道我做错了什么吗？...我想如何解决它也会很好:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:06:37.383

In MySQL, use `CONCAT_WS`

```
CONCAT_WS('-', month(timestamp),day(timestamp),year(timestamp)) 
```

query,

```
SELECT CONCAT_WS('-', month(timestamp),day(timestamp),year(timestamp)) AS DATE
FROM   tablename
ORDER  BY timestamp DESC 
LIMIT  1 
```

or use `DATE_FORMAT`

```
SELECT DATE_FORMAT(timestamp, '%m-%d-%Y') AS DATE
FROM   Table1
ORDER  BY timestamp DESC 
LIMIT  1 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/8e9fd/4)

Other(s):

*   [DATE_Format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)
*   [CONCAT_WS](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:13:03.823

使用 CONCAT、DAY、MONTH、YEAR 等来格式化日期是愚蠢的。

如果`timestamp`是包含 UNIX 时间戳的整数列，请使用：

```
SELECT DATE_FORMAT(FROM_UNIXTIME(`timestamp`), '%m-%d-%Y') AS `Formatted Date`
... 
```

如果`timestamp`是日期/日期时间列，请使用：

```
SELECT DATE_FORMAT(`timestamp`, '%m-%d-%Y') AS `Formatted Date`
... 
```

# git - 如何从包含二进制文件更改的 svn 修订版创建与 git 兼容的补丁？

> ID：14454037
> 
> 赞同：3
> 
> 时间：2013-01-22T08:04:58.440
> 
> 标签：git, svn, diff, patch

我想将 SVN 版本的差异应用到某个目录。但该差异包含对二进制文件（.png 图像）的更改。我正在尝试使用 git-apply，如下所示：

```
svn diff --force --git -r 1:2 <remote url> | git apply --binary -p4 - 
```

但我得到关于`expected /dev/null on line 5`.

实现目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:30:23.397

真正的问题是关于`svn diff`，因为它不能很好地产生差异。解决方法如下：

```
svn diff --no-diff-deleted --show-copies-as-adds --force --diff-cmd /usr/bin/diff -x -au -r 1:2 <remote url> | patch -Np4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:32:54.290

为什么要通过 git 应用补丁？赶紧跑

```
svn diff --force -r 1:2 <remote url> | patch -p4 -i ~/patch.diff 
```

然后提交该命令引起的更改。

# postgresql - How to detect a Prepared Transaction inside a trigger

> ID：14454040
> 
> 赞同：0
> 
> 时间：2013-01-22T08:05:06.287
> 
> 标签：postgresql, transactions, postgresql-9.2

I have a problem with existing database code (a trigger) that call a function trigger that use the [NOTIFY](http://www.postgresql.org/docs/9.2/static/sql-notify.html) command, which is not supported in the context of a [prepared transaction](http://www.postgresql.org/docs/9.2/static/sql-prepare-transaction.html).

My question is simple : from the function trigger, is there a way to detect that we are in the context of a prepared transaction ?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:18:24.713

使用prepared transactions和两阶段提交没有办法检测到当前事务会被提交，因为你还没有`PREPARE`d事务；在触发器运行之前，事务不知道它会经历两阶段提交。PostgreSQL 不需要你`BEGIN TRANSACTION FOR TWO PHASE COMMIT`（想象的语法）或类似的东西。

您可以测试`max_prepared_transactions`> 0 in`pg_settings`以查看是否*启用*了准备好的事务，但是在它发生之前无法知道是否会使用 2PC。

# plsql - Creating a Dump File for Oracle table

> ID：14454043
> 
> 赞同：1
> 
> 时间：2013-01-22T08:05:40.877
> 
> 标签：plsql, oracle11g

I intend to export one table from My database as a dmp File. This is what I am doing:

```
expdp SYSTEM/manager@UATDB FILE=F:\LLT.dmp log=F:\llt.log tables=TBAADM.LLT 
```

The error I am getting is:

```
 LRM-00101: unknown parameter name 'FILE' 
```

What is my mistake. Please Help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:20:15.517

好的，伙计们，我找到了您需要首先创建 dmp 文件所在的目录的答案。然后像这样导入：

```
expdp USERNAME@server ip/SERVICE_NAME 
DIRECTORY=DIR_NAME DUMPFILE=FILE.dmp TABLES=SCHEMA.TABLE_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:54:33.527

你也可以使用

下面一个是shell命令，所以在shell中执行。数据导出完成后，`dpdump`在 oracle 安装目录中的搜索文件夹，您可以在其中找到您导出的带有 log 的文件。

```
expdp userid/pwd schemas=dbschema dumpfile=file.dmp logfile=file.log 
```

# awk - Field separators

> ID：14454044
> 
> 赞同：1
> 
> 时间：2013-01-22T08:05:44.573
> 
> 标签：awk, gawk

I have a lot of programming experience, but I am fairly new to awk. Something is not behaving as I expect. Can somebody put me straight?

On linux, my command: gawk -f do3 tmp6.txt

My source file do3

```
#!/bin/gawk -f
BEGIN {
FS="-"
}
{print "Two is " $2 "One is" $1 "zero is" $0} 
```

My input file, tmp6.txt

```
~BAND:3-10M
~MODE:2-CW
~QSO_DATE:8-20111130
~TIME_ON:6-175415
~eor-

~PFX:2-K4
~CQZ:1-5
~ITUZ:1-8
~eor- 
```

My output to the console:

```
One is~BAND:3zero is~BAND:3-10M
One is~MODE:2zero is~MODE:2-CW
One is~QSO_DATE:8zero is~QSO_DATE:8-20111130
One is~TIME_ON:6zero is~TIME_ON:6-175415
One is~eorzero is~eor-
zero isOne is
One is~PFX:2zero is~PFX:2-K4  
One is~CQZ:1zero is~CQZ:1-5
One is~ITUZ:1zero is~ITUZ:1-8
One is~eorzero is~eor-
zero isOne is 
```

Taking the first line as the example, what I could have expected was in every line, what I think should be the beginning would be

```
Two is followed by the value assigned to $2, the value after the "-" in each line. 
```

However, that is missing in every case.

Other cases that are more complex exhibit even more unusual behavior (like back-tabbing), but if I can figure this part out, maybe that will help me understand the rest.

Thanks in advance, JimR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:09:56.103

您的文件很可能在行尾包含 ^M。在运行`gawk`命令之前：

```
dos2unix tmp6.txt 
```

这将删除 ^M 字符。

# python - 作为 db.Blob() 的图像未从数据存储中显示

> ID：14454054
> 
> 赞同：0
> 
> 时间：2013-01-22T08:06:47.037
> 
> 标签：python, html, google-app-engine, jinja2

在我的 Google AppEngine 项目中，我试图保存电影的详细信息，包括图像，然后在我的主页上显示图像，但图像没有显示。我正在使用 Python 和 Jinja2。有谁知道为什么？

```
import webapp2
import jinja2
import os
import datetime
import time
import cgi
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.api import images

jinja_environment = jinja2.Environment(
loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class Movie(db.Model):
    name = db.StringProperty()
    release_date = db.StringProperty()
    duration = db.StringProperty()
    director = db.StringProperty()
    actors = db.StringProperty(multiline=True)
    summary = db.StringProperty(multiline=True)
    picture = db.BlobProperty()
    trailer = db.StringProperty(multiline=True)
    date = db.DateTimeProperty(auto_now_add=True)

class Image(webapp2.RequestHandler):
def get(self):
    movie = db.get(self.request.get('img_id'))
    if movie.picture:
        img = images.Image(movie.picture)
        self.response.headers['Content-Type'] = 'image/jpeg'
        self.response.out.write(img)
    else:
        self.response.out.write("No Image")

class Main(webapp2.RequestHandler):
def get(self):
    movies = db.GqlQuery("SELECT * "
                        "FROM Movie "
                        "ORDER BY release_date DESC LIMIT 5")
    template_values = { 'movies': movies}                                   
    template = jinja_environment.get_template('home_page.html')
    self.response.out.write(template.render(template_values))

class Admin(webapp2.RequestHandler):
def get(self):
    template_values = {}
    template = jinja_environment.get_template('admin.html')
    self.response.out.write(template.render(template_values))

def post(self):
    name = self.request.get('name')
    release_date = self.request.get('release_date')
    c = time.strptime(release_date,"%m/%d/%Y")
    release_date = time.strftime("%m%d%Y",c)
    duration = self.request.get('duration')
    director = self.request.get('director')
    actors = self.request.get('actors')
    summary = self.request.get('summary')
    picture = self.request.get('img')
    trailer = self.request.get('trailer')

    movie = Movie(key_name = name)
    movie.release_date = release_date
    movie.duration = duration
    movie.director = director
    movie.actors = actors
    movie.summary = summary
    movie.picture = db.Blob(str(picture))
    movie.trailer = trailer
    movie.put()
    self.redirect('/')

app = webapp2.WSGIApplication([('/admin', Admin), ('/', Main)], debug=True) 
```

这是 home_page.html 的 HTML：

```
<html>
<body>
    <table>
        <th>Top Movies</th>

        {% for movie in movies %}
        <tr>
            <td>{{movie.key().name() }} &nbsp</td>
        </tr>
        <tr>
            <td><a href = "/movie_data?movie_key = {{movie.key() }}"> <img src = "img?img_id={{movie.key()}}"> &nbsp &nbsp &nbsp </td>

        </tr>

        {% endfor %}

        <a href = "/admin">admin</a>

    </table>
</body>
</html> 
```

这是 admin.html：

```
html>
<body dir="ltr">
    <form action="/admin" method="post"> 
    <table>

        <th colspan="2"><h1>Add New Movie</h1><br/></th>

        <tr><td>Movie Name:</td><td><input type="text" name="name"/><br/></td></tr>

        <tr><td>Release Date (MM/DD/YYYY):</td><td><input type="text" name="release_date" /><br/></td></tr>

        <tr><td>Duration (minutes):</td><td><input type="text" name="duration" /><br/></td></tr>

        <tr><td>Director:</td><td><input type="text" name="director" /><br/></td></tr>

        <tr><td>Main Actors:</td><td><textarea name="actors" rows = "5" cols = "20"></textarea><br/></td></tr>

        <tr><td>Summary:</td><td><textarea name="summary" rows = "5" cols = "20"></textarea><br/></td></tr>

        <tr><td>Upload Picture</td><td><input type="file" name="img"/><br/></td></tr>

        <tr><td>Trailer Code:</td><td><textarea name="trailer" rows = "5" cols = "20"></textarea><br/></td></tr>

        <tr><td><br/><input type="submit" /> &nbsp &nbsp &nbsp <input type="reset" /></td></tr>

    </table>
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:30:56.860

没有路由到 Image 的处理程序

```
app = webapp2.WSGIApplication([('/admin', Admin), ('/', Main),('/img', Image)], debug=True) 
```

# python - Unknown error in sixohsix's Twitter API for Python

> ID：14454055
> 
> 赞同：4
> 
> 时间：2013-01-22T08:06:50.820
> 
> 标签：python, python-2.7, twitter, httplib

I have a small script that repeatedly (hourly) fetches tweets from the API, using sixohsix's [Twitter Wrapper for Python](https://github.com/sixohsix/twitter). I am successful with handling most, if not all of the errors coming from the Twitter API, i.e. all the 5xx and 4xx stuff.

Nonetheless I randomly observe the below error traceback (only once in 2-3 days). I mean the program exits and the traceback is displayed in the shell. I have no clue what this could mean, but think it is not directly related to what my script does since it has proved itself to correctly run most of the time.

This is where I call a function of the wrapper in my script:

```
KW = {
        'count': 200, # number of tweets to fetch (fetch maximum)
        'user_id' : tweeter['user_id'],
        'include_rts': 'false', # do not include native RT's 
        'trim_user' : 'true', 
     }
     timeline = tw.twitter_request(tw_endpoint,\
         tw_endpoint.statuses.user_timeline, KW) 
```

The function `tw.twitter_request(tw_endpoint, tw_endpoint.statuses.user_timeline, KW)` basically does `return tw_endpoint.statuses_user_timeline(**args)`, where `args` translate to `KW`, and `tw_endpoint` is an OAuthorized endpoint gained from using the sixohsix's library's

```
return twitter.Twitter(domain='api.twitter.com', api_version='1.1',
                    auth=twitter.oauth.OAuth(access_token, access_token_secret,
                    consumer_key, consumer_secret)) 
```

This is the traceback:

```
Traceback (most recent call last):
  File "search_twitter_entities.py", line 166, in <module>
    tw_endpoint.statuses.user_timeline, KW)
  File "/home/tg/mild/twitter_utils.py", line 171, in twitter_request
    return twitter_function(**args)
  File "build/bdist.linux-x86_64/egg/twitter/api.py", line 173, in __call__
  File "build/bdist.linux-x86_64/egg/twitter/api.py", line 177, in _handle_response
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "/usr/lib/python2.7/httplib.py", line 1030, in getresponse
    response.begin()
  File "/usr/lib/python2.7/httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python2.7/httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine: '' 
```

The only thing I can gain from that traceback is that the error happens somewhere deep inside another Python library and has something to do with an invalid HTTP stat coming from the Twitter API or the wrapper... But as I said, maybe some of you could give me a hint on how to debug/solve this since it is pretty annoying having to regularly check my script and restart it to continue fetching tweets.

**EDIT**: To clarify this a little, the first two functions in the traceback are already in a try-except block. For example, the try-except-Block in File "twitter_utils.py" filters out 40x and 50x exceptions, but also looks for general exceptions with only `except:`. So what I don't understand is why the error is not getting caught at this position and instead, the program is force-closed and a traceback printed? Shortly speaking I am in the situation where I cannot catch an error, just like a parse error in a PHP script. So how would I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:20:44.027

也许这将为您指明正确的方向。这是调用 BadStatusLine 时调用的内容：

```
class BadStatusLine(HTTPException):
    def __init__(self, line):
        if not line:
            line = repr(line)
        self.args = line,
        self.line = line 
```

我对 httplib 不太熟悉，但如果我不得不猜测，你会得到一个空的响应/错误行，而且，它无法被解析。在您的程序停止的行之前有注释：

```
 # Presumably, the server closed the connection before
    # sending a valid response.
    raise BadStatusLine(line) 
```

如果 twitter 在发送响应之前关闭连接，您可以再试一次，这意味着在“search_twitter_entities.py”第 166 行尝试/除几次（丑陋）。

```
try:
     timeline = tw.twitter_request(tw_endpoint,\
              tw_endpoint.statuses.user_timeline, KW)
except:
     try:
          timeline = tw.twitter_request(tw_endpoint,\
                   tw_endpoint.statuses.user_timeline, KW) # try again
     except:
          pass 
```

或者，假设您每次都可以将时间线重新分配为无，请执行一个 while 循环：

```
timeline = None
while timeline == None:
     try:
          timeline = tw.twitter_request(tw_endpoint,\
              tw_endpoint.statuses.user_timeline, KW)
     except:
          pass 
```

我没有对此进行测试。检查错误代码。

# ruby - 使用 mechanize gem 获取错误“getaddrinfo: No such host is known. (Socke tError)”

> ID：14454058
> 
> 赞同：2
> 
> 时间：2013-01-22T08:06:58.000
> 
> 标签：ruby, windows-xp, mechanize, mechanize-ruby

我尝试了以下代码：

```
require 'mechanize'

agent = Mechanize.new{|a| a.ssl_version, a.verify_mode = 'SSLv3', OpenSSL::SSL::VERIFY_NONE}
    page = agent.get "https://gegsltraining.aravo.com/"
page=page.link_with(:dom_class => "button").click() 
```

但我不好得到以下错误。

```
D:\WIPData\Ruby\Scripts>mechanize_dowload.rb
C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persist
ent/ssl_reuse.rb:29:in `initialize': getaddrinfo: No such host is known.  (Socke
tError)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent/ssl_reuse.rb:29:in `open'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent/ssl_reuse.rb:29:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent/ssl_reuse.rb:29:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:750:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:628:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:570:in `connection_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/net-http-persistent-2.8/lib/net
/http/persistent.rb:926:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize/h
ttp/agent.rb:258:in `fetch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mechanize-2.5.1/lib/mechanize.r
b:407:in `get'
        from D:/WIPData/Ruby/Scripts/mechanize_dowload.rb:5:in `<main>'

D:\WIPData\Ruby\Scripts> 
```

相同的脚本在我的个人机器上完美运行，但在我的公司却不行。

你能请我解决同样的问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:48:11.880

该错误意味着 dns 无法解析。根据我的经验，这通常是因为您的互联网已关闭。

# capybara - 如何使用 selenium webdriver (2.27.2) 在 capybara 1.4.1 中跳过 ajax

> ID：14454059
> 
> 赞同：0
> 
> 时间：2013-01-22T08:06:58.213
> 
> 标签：capybara, selenium-webdriver

由于使用 Ajax 加载图像，我收到超时错误，这需要很多时间，所以我想跳过/忽略 ajax 请求。（我正在使用 capybara 1.4.1 和 selenium 2.27.2）

webkit跳过加载图像但硒不是为什么？建议我是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:50:00.797

我认为您应该使用避免图像加载的 webkit-driver

# springmockito - 如何在方法java（mockito）中模拟来自另一个类的返回值

> ID：14454061
> 
> 赞同：1
> 
> 时间：2013-01-22T08:07:17.193
> 
> 标签：springmockito

我是 mockito 新手，我想为用户验证进行单元测试。请在下面找到我要执行单元测试的方法：

```
@RequestMapping(method = RequestMethod.POST, value = "/login")
public ModelAndView validateViewLogin(@ModelAttribute Person person,
        BindingResult result, HttpServletRequest request) {
    ModelAndView mav = new ModelAndView();

    String userName = person.getFirstName();
    String password = person.getPassword();
    boolean isUserValid = false;
    if (userName != null && password != null) {

        isUserValid = userManagerService.validateUserLogin(userName,
                password);

    }
    if (!isUserValid) {

         mav.setViewName("home");
         return mav;
    }
    mav.addObject("isUserValid", isUserValid);
    mav.setViewName("login");
    return mav;
} 
```

正如您在上面看到的，isUserValid 方法返回一个布尔值，而我要测试的方法返回一个 ModelAndView。

请看我下面的单元测试：

```
 `@Test public void testValidateOk() {

     MockHttpServletRequest request = new MockHttpServletRequest();
     MockHttpServletResponse response = new MockHttpServletResponse();
     Person person = new Person();
     ModelAndView mav = new ModelAndView();
     mav.setViewName("login");

     person.setFirstName("John");
     person.setPassword("123");

    LogInController controller = new LogInController();

    UserManagerServiceImpl mockpdao = mock(UserManagerServiceImpl.class);

    ReflectionTestUtils.setField(controller, "userManagerService", mockpdao);

    // given
     given(controller.validateViewLogin(person, result, request)).willReturn(mav);

    // when
     ModelAndView validateViewLogin=
             controller.validateViewLogin(person, result, request);
    // then
            assertEquals("home", validateViewLogin.getViewName());

}` 
```

当我运行单元测试时，出现以下错误：

> org.mockito.exceptions.misusing.WrongTypeOfReturnValue： validateUserLogin() 不能返回 ModelAndView validateUserLogin() 应该返回布尔值
> 
> * * *

如果您不确定为什么会出现上述错误，请继续阅读。由于上述语法的性质，可能会出现以下问题，因为： 1\. 此异常*可能*发生在错误编写的多线程测试中。有关并发测试的限制，请参阅 Mockito 常见问题解答。2\. 使用 when(spy.foo()).then() 语法对 spy 进行存根。使用 doReturn|Throw() 系列方法来存根间谍更安全。更多关于 Mockito.spy() 方法的 javadocs。

```
at com.gemstone.presentation.LogInControllerTest.testValidateOk(LogInControllerTest.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:50:38.320

我不熟悉 BDD 风格的 Mockito，但我猜这条线

```
given(controller.validateViewLogin(person, result, request)).willReturn(mav); 
```

意味着每当`validateViewLogin`使用指定的人员、结果和请求调用方法时，您都要求控制器返回给定的模型和视图。但是控制器不是模拟的，所以这可能是导致您的错误的原因。相反，您应该做的是指定模拟用户管理器服务的行为方式。

我注意到您正在创建`UserManagerServiceImpl`班级的模拟。鉴于它以 'Impl' 结尾，我猜想有一个对应的`UserManagerService`接口可以代替它进行模拟。Mocktio 可以模拟具体的类，但它不能像模拟接口那样简单。因此，如果确实有一个接口，那么为了安全起见，我会模拟它。

您正在使用`ReflectionTestUtils`. 这可能不是您的错误的原因，但如果您可以这样做，那么我建议您向控制器添加一个公共设置器，以便更安全、更轻松地注入它。

考虑到上述几点，我将编写您的测试，如下所示：

```
@Test public void validateViewLogin_validLogin_returnsHomePage() {
    MockHttpServletRequest request = new MockHttpServletRequest();
    MockHttpServletResponse response = new MockHttpServletResponse();

    Person person = new Person();
    person.setFirstName("John");
    person.setPassword("123");

    LogInController controller = new LogInController();
    UserManagerService mockUserService = mock(UserManagerService.class);

    // Configure mock user service to accept the person
    when(mockUserService.validateUserLogin("John", "123")).thenReturn(true);

    // Inject mock user service into controller
    controller.setUserManagerService(mockUserService);

    // Attempt the validation
    ModelAndView mav =
        controller.validateViewLogin(person, result, request);

    // Check the result
    assertEquals("home", mav.getViewName());
} 
```

由于我不熟悉 BDD 语法，因此我使用该行配置了模拟

`when(mockUserService.validateUserLogin("John", "123")).thenReturn(true);`

但我认为这相当于

`given(mockUserService.validateUserLogin("John", "123")).willReturn(true);`

# java - 如何制作计时器？

> ID：14454063
> 
> 赞同：3
> 
> 时间：2013-01-22T08:07:19.703
> 
> 标签：java, timer

我想做一个`Timer`等待 400 MSc 然后去打印“嗨！” （例如）。我知道如何通过`javax.swing.Timer`

```
 ActionListener action = new ActionListener()
{
    @Override
    public void actionPerformed(ActionEvent e)
    {
       System.out.println("hi!");
    }
}; 
```

加：

```
 timer = new Timer(0, action);
    timer.setRepeats(false);
    timer.setInitialDelay(400);
    timer.start(); 
```

但据我所知，这绝对不是一个好方法，因为这种方法`Timer`适用于 Swing 作品。如何以正确的方式做到这一点？（不使用`Thread.sleep()`）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T08:19:31.527

```
Timer t = new Timer();
t.schedule(new TimerTask() {

            @Override
            public void run() {
                System.out.println("Hi!");

            }
        }, 400); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:19:46.107

您可以考虑 Quartz 调度器，它是一个真正可扩展、易于学习和配置的解决方案。您可以查看官方网站上的教程。
[http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T16:11:58.677

```
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class currentTime {

    public static void main(String[] args) {
        Calendar cal = Calendar.getInstance();
        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
        System.out.println( sdf.format(cal.getTime()) );
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:11:51.760

`TimeUnit.MILLISECONDS.sleep(150L);`

是另一种选择；

你也可以看看[这个](https://stackoverflow.com/questions/9143719/java-alternative-to-thread-sleep)问题

这建议使用`while`仅等待的循环或 [ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)

# java - 从参数为结构且结构的属性为字符串的 c++ dll 调用函数

> ID：14454069
> 
> 赞同：1
> 
> 时间：2013-01-22T08:07:51.793
> 
> 标签：java, visual-c++, jna

我知道如何使用 , , 等基本类型`int`，`char*`但`struct`我不知道什么代表使用 . 的类的`C++`类型。我用of来表示of ，但是会发生错误，所以我认为它们可能不相等。哪位知道的可以帮帮我，谢谢！`string``jna``String``Java``string``C++`

公共类分类器{

```
public  static class sDoc extends Structure{
    public static class ByReference extends sDoc implements Structure.ByReference { }
    public String sTitle;
    public String sContent;
    public String sAuthor;
    public String sBoard;
    public String sDatatype;

}
 public interface CLibrary extends Library { 
        CLibrary INSTANCE = (CLibrary) 
            Native.loadLibrary((Platform.isWindows() ? "LJClassifier" : "c"), 
                               CLibrary.class); 

        boolean classifier_init(String conf, String sLicenseCode);
        String classifier_exec(sDoc.ByReference d, int iType);
        String classifier_detail(String classname);
        void classifier_exit();
    } 

 public static void main(String[] args) { 
     if(!CLibrary.INSTANCE.classifier_init("rulelist.xml",null)) {
            System.out.print("classifier_init failed!\n");
            return ;
        }
        sDoc.ByReference d= new sDoc.ByReference();
        d.sTitle = "天翼定制手机天语E600";  
        d.sContent = "全球旅行必备:天翼定制手机天语E600 新浪 2011-9-26 15:53手机——这项人们使用率最高的电子产品,其更新换代速度更是快得无法想象。那么对于我们消费者而言,应当如何选择呢? 显然,频繁的换机是非常不划算的,更会增加生活开支,平白增添生活负担。因此,我们在购机之初就应当选择一款满足自身需求的手机。..."; 

        d.sAuthor = "飞香";
        d.sBoard = "69"; 
        d.sDatatype = "论坛";
        System.out.print("-----------------------------------------");
        **String sResult = CLibrary.INSTANCE.classifier_exec(d,0);**
        //System.out.print(sResult);

 } 
```

}

//它停在 String sResult = CLibrary.INSTANCE.classifier_exec(d,0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:39:48.680

`std::string`在 JNA 中不能直接表示。您需要一个纯 C 接口，因此您需要转换`std::string`为`const char*`以便在 JNA 和 C++ 之间传输数据。

# jquery - 如何基于组从互联网加载图像？

> ID：14454071
> 
> 赞同：0
> 
> 时间：2013-01-22T08:08:02.413
> 
> 标签：jquery

我想加载一个基于块的互联网文件。我有 10 张图片，我想将其拆分为 2 个块以显示在我的网站上，每个块包含 5 张图片。块 1 完成后，块 2 将继续。我怎么能用 jQuery 做到这一点？

![http://i.stack.imgur.com/hCGj9.jpg](../Images/fe432f736c2529960b012b8a5d7b56a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:36:13.537

行，

首先是 HTML 代码

```
<div id="imagesPanel">
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   <img src="http://upload.wikimedia.org/wikipedia/en/7/7f/Mickey_Mouse.svg" />
   More Images
</div> 
```

接下来是 Jquery 代码

```
var countOfImages = 0;
var NumOfImagesPerBlock = 5;
var htmlStr = "";

$("#imagesPanel > img").each(function () {

   if (countOfImages == 0)
   {
       htmlStr += "<div class='imgblock'>";
       $("#imagesPanel").html("");
   }

   htmlStr += $(this)[0].outerHTML;
   countOfImages++;

   if (countOfImages % NumOfImagesPerBlock == 0)
   {
     htmlStr += "</div>";
     htmlStr += "<div class='imgblock'>";
     $("#imagesPanel").append(htmlStr);
     htmlStr = "<div class='imgblock'>";
    //alert("Mod" + countOfImages);
   }  
});

$('.imgblock').each(function(i) {
   $(this).delay(800 * i).fadeOut('fast', function() {
       $(this).fadeIn('slow');
   });
}); 
```

我将尽快解释：

1.  我创建了 3 个变量
2.  countOfImages - 计算每个函数中图像数量的助手
3.  NumOfImagesPerBlock - 保存每块图像数量设置的变量
4.  htmlStr - 将保存更新的 html。
5.  然后我将进入所有图像的循环，并在 div 中每 5 个图像排列一次。

基本上我正在基于现有的 HTML 创建新的 HTML。我将悬停所有图像并在每 5 个图像后添加。

[小提琴示例](http://jsfiddle.net/hwuy8/6/)

我想指出，如果您使用服务器端语言，您可能希望在服务器中执行此操作。

另一个注意事项：在我的 Fiddle 示例中，我已将图像的宽度和高度限制为 40px 上的 40px，因为如果图像到达页面末尾，它们会自动分解

希望它有所帮助

# groovy - 如何在 Groovy 中获取此给定列表中除最后一项之外的所有内容？

> ID：14454072
> 
> 赞同：3
> 
> 时间：2013-01-22T08:08:12.807
> 
> 标签：groovy

这听起来可能很简单，但我有点纠结于如何打印所有内容但忽略列表中的最后一个元素的逻辑。任何建议都会有所帮助。

## 代码

```
 def list = [
        'homePage',
        'productPage',
        'basketPage',
        'categoryPage'
    ]
    def counter = 1
    list.each { element ->
        if (element == list.last()){
            list.remove(3)
            println "Item $counter -" + element 
        }
    } 
```

## 预期产出

第 1项 - 主页 第
2 项 - productPage
第 3 项 - 篮子页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:00:49.983

它可以比@SteveD 答案短：

```
println list[0..-2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:15:05.750

Groovy 支持对集合的范围操作：

```
print list[0..list.size-2] 
```

这将打印：

```
[homePage, productPage, basketPage] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:23:51.840

解决方案：

```
list.take(list.size() - 1) 
```

​ 使用 println：

```
list.take(list.size() - 1).eachWithIndex { element, i ->
    println "Item " + i + " - " + element
} 
```

​</p>

# ruby - 数组到哈希红宝石

> ID：14454073
> 
> 赞同：0
> 
> 时间：2013-01-22T08:08:17.150
> 
> 标签：ruby, arrays, hash

我在 ruby​​ 中有这样的数组（文档语言 [偶数索引] 和单词数 [奇数索引]）

```
words = ["en",200,"ru","120","es",140,"ru",240] 
```

最终结果应如下所示：

```
{"en"=>200,"ru=>360","es"=>140} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T08:10:07.620

啊，你需要对重复的键求和。所以，这个`Hash::[]`方法在这里行不通。没问题，使用[`each_slice`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)+[`each_with_object`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_object)然后：

```
words = ["en",200,"ru","120","es",140,"ru",240]

hash = words.each_slice(2).each_with_object({}) do |(k, v), memo|
  memo[k] ||= 0
  memo[k] += v.to_i
end

hash # => {"en"=>200, "ru"=>360, "es"=>140} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:58:49.370

您可以使用[`each_slice`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)and[`inject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)首先将数组分割成块，然后添加值。

这个版本大致相当于 Sergio Tulentsev 的版本，但要短一些（在 Ruby 1.8 中工作）。

```
hash = words.each_slice(2).inject(Hash.new(0)) do |hash, (k, v)|
  hash[k] += v.to_i
  hash
end 
```

请注意，我使用默认值 0 初始化哈希。Sergio 也可以这样做，因此他的版本如下所示：

```
hash = words.each_slice(2).each_with_object(Hash.new(0)) do |(k, v), memo|
  memo[k] += v.to_i
end 
```

请注意，`each_with_object`Sergio 使用的方法是在 Ruby 1.9 中引入的，因此在较旧的 Ruby 版本中不可用，但这可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:15:42.190

```
words = ['en', 200, 'ru', 120, 'es', 140, 'ru', 240]

words.
 each_slice(2).
 each_with_object(Hash.new(0)) {|(lang, wordcount), acc| acc[lang] += wordcount } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-22T08:13:59.090

```
words = ["en",200,"ru","120","es",140,"ru",240]

h1 = Hash[*words.flatten] 
```

# sql - Oracle PL/SQL 数据类型

> ID：14454074
> 
> 赞同：4
> 
> 时间：2013-01-22T08:08:24.427
> 
> 标签：sql, oracle, plsql, sqldatatypes

了解 PL/SQL 中的 SQL 数据类型。我对以下表达式的数据类型有疑问：

```
temp := temp1 < (temp2/ 3); 
```

我对这可能是什么数据类型有点困惑。数据类型可以是数字、字符、布尔值、日期时间和间隔类型，但由于表达式 < 和 /，这让我很反感。这让我认为它是布尔值，但我不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T08:11:10.297

它**是**一个布尔值。它相当于：

```
boolean temp;
... 

if (temp1 < (temp2/3) then
  temp := true;
else
  temp := false;
end if; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:25:22.453

在这种情况下，Oracle 有点复杂。SQL 和 PL/SQL 由两个不同的引擎解释。他们每个人都有自己的一组数据类型，即使它们看起来很相似。简单地说，SQL 中的 VARCHAR2 与 PL/SQL 中的 VARCHAR2 不同。当您开始使用集合时，它会变得更加混乱。SQL 没有像 BOOLEAN 这样的任何数据类型，而 PL/SQL 有。唯一的例外是 SQL 函数 LNNVL，它接受一个条件作为参数，但无论如何你不能使用像“true”或“false”这样的文字是 SQL 查询。

# maven - 常春藤中的 convertopom 任务。如何向出版物字段添加更多工件

> ID：14454075
> 
> 赞同：0
> 
> 时间：2013-01-22T08:08:25.770
> 
> 标签：maven, ivy

当我`convertpom`在 Ivy 中使用 task 将 a 转换为`pom.xml`时`ivy.xml`，我得到默认出版物

```
<publications>
    <artifact name="XYZ" type="jar" ext="jar" conf="master"/>
</publications> 
```

如何修改`pom.xml`，以便在转换中添加更多工件。converttopom 从哪里获取工件。另外，如何更改类型？

是否可以在`ivy:publish`通话中覆盖这些？

在 convertpom ant 任务中找到了这段代码，不知道它是如何使用的。

```
 private void addSourcesAndJavadocArtifactsIfPresent(
         PomModuleDescriptorBuilder mdBuilder, ParserSettings ivySettings) {
     if (mdBuilder.getMainArtifact() == null) {
         // no main artifact in pom, we don't need to search for meta artifacts
        return;
     }
     ModuleDescriptor md = mdBuilder.getModuleDescriptor();
     ModuleRevisionId mrid = md.getModuleRevisionId();
     DependencyResolver resolver = ivySettings.getResolver(
         mrid);

    if (resolver == null) {
        Message.debug("no resolver found for " + mrid 
                         + ": no source or javadoc artifact lookup");
    } else {
        ArtifactOrigin mainArtifact = resolver.locate(mdBuilder.getMainArtifact());

        if (!ArtifactOrigin.isUnknown(mainArtifact)) {
            String mainArtifactLocation = mainArtifact.getLocation();

            ArtifactOrigin sourceArtifact = resolver.locate(mdBuilder.getSourceArtifact());
            if (!ArtifactOrigin.isUnknown(sourceArtifact)
                    && !sourceArtifact.getLocation().equals(mainArtifactLocation)) {
                Message.debug("source artifact found for " + mrid);
                mdBuilder.addSourceArtifact();
            } else {
                // it seems that sometimes the 'src' classifier is used instead of 'sources'
                // Cfr. IVY-1138
                ArtifactOrigin srcArtifact = resolver.locate(mdBuilder.getSrcArtifact());
                if (!ArtifactOrigin.isUnknown(srcArtifact)
                        && !srcArtifact.getLocation().equals(mainArtifactLocation)) {
                    Message.debug("source artifact found for " + mrid);
                    mdBuilder.addSrcArtifact();
                } else {
                    Message.debug("no source artifact found for " + mrid);
                }
            }
            ArtifactOrigin javadocArtifact = resolver.locate(mdBuilder.getJavadocArtifact());
            if (!ArtifactOrigin.isUnknown(javadocArtifact) 
                    && !javadocArtifact.getLocation().equals(mainArtifactLocation)) {
                Message.debug("javadoc artifact found for " + mrid);
                mdBuilder.addJavadocArtifact();
            } else {
                Message.debug("no javadoc artifact found for " + mrid);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:20:18.583

这确实证明了 Maven 和 ivy 之间的主要区别之一......

常春藤文件明确列出了模块中包含的所有文件。另一方面，Maven POM 没有。相反，可以在 Maven 中存储零个或多个附加文件，每个文件都具有不同的“分类器”，以使文件名唯一。

如果无法访问 Maven 模块的文件系统，我看不到任何方法可以在 ivy 中构建完整的“出版物”部分。你在使用 Maven 存储库管理器吗？Nexus 有一个 REST API，也许您可​​以调用它来获取模块中的所有文件（只是一个想法）

另一个想法是提交请求以扩展[convertpom](http://ant.apache.org/ivy/history/latest-milestone/use/convertpom.html)任务。创建一些可选的子标签，使您能够列出可用的分类器：

```
<ivy:convertpom pomFile="pom.xml" ivyFile="ivy.xml">
    <classifier name="sources"/>
    <classifier name="javadoc"/>
    <classifier name="archive" type="tar.gz/>
</ivy:convertpom> 
```

我不认为这种变化非常受欢迎（或有用）。[大多数人正在使用makepom](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html)任务向另一个方向转换。

# network-programming - 在嗅探时查找数据包的方向

> ID：14454077
> 
> 赞同：3
> 
> 时间：2013-01-22T08:08:50.767
> 
> 标签：network-programming, libpcap, packet-capture, tcpdump

我想要一个接口出站流量的源 IP 地址列表。如何使用 libpcap 找到数据包的方向，无论它是入站还是出站读取流量？我不知道任何一方的子网信息。并且两边都有客户端/服务器，所以我不能依靠端口号范围来过滤流量。

为什么 libpcap 数据包标头中没有关于方向的信息，或者像[pcap-filter](http://www.manpagez.com/man/7/pcap-filter/)`inbound`中的过滤选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T00:01:33.683

Netsniff-NG 虽然不依赖 libpcap，但支持 Linux 内核数据包类型扩展。他们记录 [在这里](http://lingrok.org/xref/linux-2.6-stable/include/linux/if_packet.h)

其中一种数据包类型是传出的，并被注释为“任何类型的传出”。以下示例将捕获离开您的接口的所有数据包。

```
$ netsniff-ng --in eth0 --out outgoing.pcap --type outgoing 
```

使用它，您可以利用其他命令行工具来读取 PCAP 文件并提取所有源地址。也许像这样的*nix-ey：

```
$ tcpdump -nnr outgoing.pcap  | cut -d " " -f3 | cut -d . -f1-4 
```

注意：我没有在路由器上试过这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T02:20:51.617

您可以使用“ether src”或“ether dst”来过滤数据包方向。这需要你知道接口的mac地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-11T14:55:41.667

您可以选择一个方向，数据包将被捕获调用`pcap_setdirection()`之前`pcap_loop()`。

例如，要捕获传入的数据包，您只需要编写：

```
handle = pcap_open_live("eth0", 65535, 1, 0, errbuf);
pcap_setdirection(handle, PCAP_D_IN);
pcap_loop(handle, -1, process_packet, NULL); 
```

可能的方向是：`PCAP_D_IN`, `PCAP_D_OUT`, `PCAP_D_INOUT`。

参见[tcpdump.org/manpages/pcap_setdirection.3pcap.txt](http://www.tcpdump.org/manpages/pcap_setdirection.3pcap.txt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T17:22:38.507

PCAP 文件格式不包含保存捕获期间使用的接口的字段。话虽如此，Wireshark 和 Tshark 目前使用的较新的 PCAP-NG 文件格式支持它以及数据包方向。

现有的 pcap-ng 功能：

*   丢包数
*   注释（评论）
*   本地 IP 地址
*   界面与方向
*   主机名 <-> IP 地址数据库

[电容率](http://wiki.wireshark.org/Development/PcapNg)

听起来您是从路由器或防火墙捕获的，因此以下内容不起作用。

ip src 192.168.1.1

将流量捕获到流中可能是一种选择，但它仍然不会为您提供方向信息。不过，您将能够轻松确定源地址和目标地址。如果您有现有的 pcap，您可以将其转换为 ARGUS 格式：

```
argus -r capture.pcap -w capture.argus
ra -nnr capture.argus 
```

可以轻松获取端点/主机的其他工具（一些带有示例）是：

```
ntop -f capture.pcap
tcpprof -nr capture.pcap 
```

Wireshark[端点](http://www.wireshark.org/docs/wsug_html_chunked/ChStatEndpoints.html)

流工具

你必须解析出你想要的信息，但我认为这不会太麻烦。如果您无法使用它，我建议您查看 PCAP-NG。

# mysql - mysql 触发器 - 从触发器中选择计数（*）

> ID：14454078
> 
> 赞同：0
> 
> 时间：2013-01-22T08:08:58.623
> 
> 标签：mysql, triggers

我想计算创建/内部（不知道它叫什么）触发器的行。

就像我有一个触发器：

```
CREATE
DEFINER=`root`@`localhost`
TRIGGER `mydb`.`tn_air_staff_leave_application`
AFTER INSERT ON `mydb`.`staff_leave_application`
FOR EACH ROW
BEGIN
----
----
----
END$$ 
```

并且想知道触发器将创建多少行，我需要在触发器中使用这个值：

```
set @newrows:= (select count(*) from tn_air_staff_leave_application); 
```

可能吗？？如果没有其他解决方案？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:23:55.003

触发器是一段纯粹的被动代码，在从数据库表中插入、更新或删除行之前或之后执行。

触发器无法主动执行，因此没有您可以读取的返回值。

您可以做的是让您的触发器将一个值写入另一个表或会话变量，然后可以在额外的查询中进行查询。

~~您不能像在示例中尝试的那样~~将整个结果行或多行的结果集存储到会话变量中。

 ~~在 MySQL 中，触发器总是被执行`FOR EACH ROW`，这意味着在触发器中你只会看一行，而不是几行。

**编辑：**

实际上，您的示例查询返回一个值，所以这会起作用。（会将表中的总记录量传递`tn_air_staff_leave_application`到本地会话变量中`@newrows`）

要获得更具体的帮助，您需要更具体地说明您正在尝试做的事情~~

# java - 在 jTable 中动态解析日期

> ID：14454082
> 
> 赞同：1
> 
> 时间：2013-01-22T08:09:23.183
> 
> 标签：java, swing, date, jtable

我有一个有四列的 jTable。第一列包含一些成员代码，第二列包含他们的入会日期，第三列包含他们的验证到期日期。如果到期日期距系统日期超过 10 天，我必须从列中删除行。

我正在编写这样的代码：

```
 public void expire(){

    try{
    DefaultTableModel model = (DefaultTableModel) empTbl.getModel();
    int col=2;
    int rows = empTbl.getRowCount();
    for(int row=0; row<=rows; row++){

     SimpleDateFormat formater = new SimpleDateFormat("dd-MM-yyyy");
     Calendar currentDate = Calendar.getInstance();
     String d = formater.format(currentDate.getTime());
     Date haatdinPisorTarikh = (Date)formater.parse(d);   

     String expdate = (String)empTbl.getValueAt(row, col);
     Date expire=(Date)formater.parse(expdate);
     Calendar expireDate = Calendar.getInstance();
     expireDate.add(Calendar.DATE, -10);

     if(expireDate.after(haatdinPisorTarikh)){
     model.removeRow(row);
     }
     }

      }catch(ParseException ex){}
       } 
```

这种方法不起作用。我在哪里做错了？请帮忙...

![在此处输入图像描述](../Images/3dcfa3394784ab038d0d524af3faed5a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:08:59.737

您可以从头开始组织。

```
int rows = empTbl.getRowCount(); 
for(int row=rows-1; row>=0; row--) {
    //delete from model won't harm your row indexes.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:34:53.767

最重要的问题是在你的循环中（显然）......

```
int rows = empTbl.getRowCount(); // <-- Get row count, good...
for(int row=0; row<=rows; row++){
    // Make your calculations...
    if(expireDate.after(haatdinPisorTarikh)){
        model.removeRow(row);
        // Uh-oh, the row count has changed
        // Also, the row index is no longer valid!!
    }
} 
```

您应该做的是将某种行标识符放入 a 中`java.util.List`（不要使用行索引，您会遇到同样的问题），将要删除的每一行添加到其中并在完成扫描后在模型中，遍历“删除”列表，通过标识符查找每行索引并将其删除。

否则你可以只使用我认为会更容易的[表格过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)......

# google-chrome-extension - Chrome扩展程序+在打开页面时出现任何对话时挂起

> ID：14454084
> 
> 赞同：0
> 
> 时间：2013-01-22T08:09:47.503
> 
> 标签：google-chrome-extension, alert

我创建了一个扩展来测试我的网站，它将打开页面并执行一些活动，例如设置文本、获取文本等。

我创建了一个 C# 应用程序，并通过 websocket 与扩展程序通信。

在我的扩展中，我添加了如下监听器，

```
document.addEventListener('DOMContentLoaded', function() {
    websocket.send(""); // Send signal to C# to execute next command
}); 
```

因此，当我打开任何网站（例如 www.google.com）时，它会触发上述事件并且我的下一个操作将开始执行，但问题是当我打开任何在加载页面的第一阶段会有警报框的网站时，会永远不要执行上面的监听器，例如如果我打开`http://www.crowderassoc.com/javascript/alertbox.html`，它会给你一个警告信息，直到你点击确定，页面会很忙，所以它会卡住。

我创建了自动化脚本，我将在其中放置一个 MSAA 命令以单击该“确定”按钮，但它只是被挂起。

有什么选择可以让它在这种情况下工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:16:15.023

移动`DOMContentLoaded`监听器的代码

```
document.addEventListener('DOMContentLoaded', function() {
    websocket.send(""); // Send signal to C# to execute next command
}); 
```

进入[tabs.onUpdated](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)`Content Scripts`的侦听器或任何[webRequest](https://developer.chrome.com/extensions/webRequest.html)、[webNavigation](https://developer.chrome.com/extensions/webNavigation.html)后台页面中的适当侦听器。

# ruby-on-rails - 如何将数据库记录附加到ruby on rails中的变量中

> ID：14454087
> 
> 赞同：2
> 
> 时间：2013-01-22T08:10:02.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我根据城市名称从数据库中获取所有用户。

**这是我的代码：**

```
@othertask = User.find(:all, :conditions => { :city => params[:city]})
@othertask.each do |o|
  @other_tasks = Micropost.where(:user_id => o.id).all 
end 
```

我的问题是当循环完成时，`@other_task`只保存最后一个记录值。

是否可以将所有 ids 记录附加到一个变量中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T08:22:14.603

您应该为这样的事情使用连接，而不是循环并进行 N 个额外的查询，每个用户一个。正如您现在所拥有的，您的代码首先获取具有给定城市属性值的*所有*用户，然后对于每个用户，您*再次*查询数据库以获取微博 ( `Micropost.where(:user_id => o.id)`)。这是极其低效的。

您正在搜索所有用户所在城市为 的微博，对`params[:city]`吗？那么就不需要先查找所有用户，而是直接查询微博表：

```
@posts = Micropost.joins(:user).where('users.city' => params[:city]) 
```

这将找到所有用户具有`city`等于的属性的帖子`params[:city]`。

ps 我强烈建议阅读[有关 ActiveRecord 关联的 Ruby on Rails 指南，](http://guides.rubyonrails.org/association_basics.html)以了解有关如何有效使用关联的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T08:12:57.650

你可以通过以下方式做到这一点

```
 @othertask = User.find(:all, :conditions => { :city => params[:city]})
 @other_tasks =  Array.new 
 @othertask.each do |o|
   @other_tasks << Micropost.where(:user_id => o.id).all 
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:18:22.683

这是更新的代码：

```
@othertask = User.find_all_by_city(params[:city])
@other_tasks = Array.new  
@othertask.each do |o|
  @other_tasks << Micropost.find_all_by_user_id(o.id)
end 
```

由于使用 '=' 运算符，您只能获取最后一条记录，而不是您需要在 ruby​​ 中使用 '<<' 运算符，它将传入的记录附加到指定的数组中。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:19:54.600

尝试：

用户型号：

```
has_many :microposts 
```

微贴模型：

```
belongs_to :user 
```

询问

```
@Microposts = Micropost.joins(:user).where('users.city' => params[:city]) 
```

# android - 如何在 Android 中为 EditText 设置最小和最大字符限制？

> ID：14454093
> 
> 赞同：5
> 
> 时间：2013-01-22T08:10:18.763
> 
> 标签：android, android-layout

我想为 EditText 框设置最小和最大输入值。我正在为 EditText 创建一个简单的验证；它需要 AZ 和 0-9 个值，最少 5 个和最多 8 个字符。

我将最大值和其他验证设置如下：

```
 <EditText 
        android:id="@+id/edittextKode_Listing"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dp"
        android:layout_marginLeft="5dp"
        android:layout_alignTop="@+id/textKode_listing"
        android:layout_toRightOf="@+id/textKode_listing"
        android:maxLength="8"
        android:inputType="textCapCharacters"
        android:digits="0,1,2,3,4,5,6,7,8,9,ABCDEFGHIJKLMNOPQRSTVUWXYZ"
        /> 
```

但无法设置最小值要求。我的 EditText 框位于警报对话框中。我尝试了以下代码来解决问题：

```
private void openInboxDialog() {

        LayoutInflater inflater = this.getLayoutInflater();
        // declare dialog view
        final View dialogView = inflater.inflate(R.layout.kirim_layout, null);

        final EditText edittextKode = (EditText) dialogView.findViewById(R.id.edittextKode_Listing);
        final EditText edittextalamat = (EditText) dialogView.findViewById(R.id.edittextAlamat);
        edittextKode.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub

                if(edittextKode.getText().toString().length() > 0){
                    if(edittextKode.getText().toString().length() < 5)
                    {
                        edittextKode.setError("Error");
                        Toast.makeText(GPSActivity.this, "Kode listing value not be less than 5", Toast.LENGTH_SHORT).show();
                        edittextKode.requestFocus();

                    }
                }
            }
        });
        final AlertDialog.Builder builder = new AlertDialog.Builder(GPSActivity.this);
        builder.setTitle("Kirim").setView(dialogView)
                .setNeutralButton("OK", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        gpsCoordinates = (TextView) findViewById(R.id.text_GPS_Coordinates);
                        kode = edittextKode.getText().toString();
                        alamat = edittextalamat.getText().toString();
                        catatan = edittextcatatan.getText().toString();
                        pengirim = edittextPengirim.getText().toString();
                        if (kode.length() > 0 && alamat.length() > 0
                                && catatan.length() > 0 && pengirim.length() > 0) {
                            message = "Kode listing : " + kode + "\nAlamat : "
                                    + alamat + " \nCatatan : " + catatan + " \n Pengirim : " + pengirim
                                    + "\nKoordinat GPS : "
                                    + gpsCoordinates.getText().toString();
                                sendByGmail();
                        } else {
                            Toast.makeText(
                                    getApplicationContext(),
                                    "Please fill all three fields to send mail",
                                    Toast.LENGTH_LONG).show();
                        }
                    }
                });
        builder.create();
        builder.show();
    }` 
```

在此警报对话框中，我有两个 EditText 框。我想在第一个 EditText 上应用我的验证。我调用了**setOnFocusChangeListener**来检查焦点更改时的最小长度。如果长度小于 5，则请求获得焦点，但仍会在第二个 EditText 框中键入。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-07T16:54:21.137

```
InputFilter[] lengthFilter = new InputFilter[1];
lengthFilter[0] = new InputFilter.LengthFilter(9); //Filter to 9 characters
mEditText.setFilters(lengthFilter); 
```

这将创建一个过滤器来限制字符数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T10:10:43.680

没有直接的方法可以做到这一点，据我所知，唯一的方法是当编辑文本失去焦点或当用户提交你做长度检查的信息时，看看它是否少于 5 个字符，例如

```
if (myTextBox.length() < 5)
{
Log.d("APP", "Sorry, you need to enter at least 5 characters";
}
else
{
Log.d("APP", "Input valid");
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-22T10:25:53.757

你可以这样做......在这个我检查了字符长度，如果它大于5然后editText失去焦点......并且在触摸它之后它又回到焦点......试试这个..i希望对你有帮助..

```
 edittextKode.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub
            if(arg0.length()>5)
            { 
                Toast.makeText(getApplicationContect(),"Max.value is 5",1).show();
                  edittextKode.setFocusable(false);
            }

        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
    });

 edittextKode.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1)
      {
            // TODO Auto-generated method stub
             edittextKode.setFocusableInTouchMode(true);
            return false;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-22T12:03:06.557

您可以在侦听器中尝试以下代码：

如果条件不满足，

```
edittextKode.setFocus( true) ;
edittextKode.setFocusableInTouchMode( true)  ;
edittextalamat.setFocus( false) ;
edittextalamat.setFocusableInTouchuha( false) ;
edittextKode.requestFocus(); 
```

# apache2 - apache日志入侵检测数据集

> ID：14454095
> 
> 赞同：2
> 
> 时间：2013-01-22T08:10:32.507
> 
> 标签：apache2, intrusion-detection, logfile-analysis, web-access

发现于：[HoneyNet 项目](http://www.honeynet.org)。在 scan31 和 scan34 中

[PHPIDS](http://phpids.org)有一个过滤规则来检测 Web 访问日志文件中的攻击模式。

我想问我怎么知道可以在日志访问文件`PHPIDS`中检测到攻击（`xss`, `sqli`，他们告诉他们可以检测到的任何攻击） 。`apache`（不是从使用它。）

使用什么数据集`PHPIDS`来确认他们的过滤规则可以检测到。

我真的希望该数据集知道我的检测程序可以检测到攻击。

（这里的数据集是指包含许多攻击模式的 Apache 日志文件，我知道它在日志文件中有多少攻击模式）。如果我的程序可以检测到该数据集中的所有攻击模式，则意味着我的程序有效！

我可以有一个网站链接，我可以在其中下载网络访问攻击的攻击数据集（apache 日志）吗？

我找到了 DARPA 的一些数据集。他们有关于网络访问日志的数据集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T15:25:48.020

[VELOS 数据集](http://velos-dataset.appspot.com)包含您的程序可以检测到的许多不同类型的攻击。它肯定包括网络访问攻击。流量主要在多个 pcap 文件和 tcpdump 文本文件中。此外，您确实可以检查 DARPA 数据集（1998-2000）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:08.760

是的，Darpa 1999 IDS 数据集具有您可以检查的 Web 访问日志。它包含 apache httpd 访问日志以及错误日志。

# java - 从以泰米尔语表示的 MySQL DB 字符串值设置 JLabel 文本

> ID：14454103
> 
> 赞同：-3
> 
> 时间：2013-01-22T08:10:54.313
> 
> 标签：java, mysql, swing, unicode, jlabel

我正在尝试从数据库中获取泰米尔语文本并将其显示在`JLabel`. 我尝试使用 Unicode，但无法在泰米尔语中显示特定字符​​串。它在 中有效，`SOP("")`但在 中无效`jlabel12.setText(myvariable)`。

如何`JLabel`使用泰米尔语表示的 MySQL DB 字符串值设置文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:30:42.450

以您提供的信息量，很难提供完整的解决方案。假设您想在 JLabel 上显示 Unicode 字符，请尝试以下程序。它对我来说很好用：

```
import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class Unicode {
    public static void main(String args[]) {
    UnicodeJFrame unicodeJFrame = new UnicodeJFrame();
    unicodeJFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    unicodeJFrame.setSize(350, 250);
    unicodeJFrame.setVisible(true);
 } 
}

class UnicodeJFrame extends JFrame {
    public UnicodeJFrame() {
       super("Demonstrating Unicode");
       setLayout(new GridLayout(8, 1));
       JLabel tamilJLabel = new JLabel("\u6B22\u8FCE\u4F7F\u7528"); //Replace this with actual Tamil unicode character
       add(tamilJLabel);

       //Remaining JLabels here
    }
} 
```

从这里开始，您可以更进一步。注意：现在你的作业是从数据库中获取并显示它，这是给你的提示。

# c - 如何在 C 程序中执行嵌入式 SQL 命令时出现错误？

> ID：14454114
> 
> 赞同：1
> 
> 时间：2013-01-22T08:11:54.713
> 
> 标签：c, embedded-sql

我正在从 Oracle 数据库中的表中获取一些记录。我的程序能够获取一些记录，但后来它突然停止而没有显示任何错误。

请检查下面的代码

```
void fetch_data()
{
char tran_dt[16];
trace("fetch_data(): Begin");
EXEC SQL declare log3 cursor for select NVL(type_code,0),
                                        NVL(pri_tran_code,' '),
                                        NVL(tran_datetime,to_date('0001','YYYY')),
                                        from log_record 
                                        WHERE sys_seq_nbr=:next_sys_seq_nbr1 and
                                        tran_datetime = :last_tran_datetime1;
dttostr(tran_dt, &last_tran_datetime1);
sprintf(str, "fetch_data(): tran date time of last ssn (%d): (%s)", next_sys_seq_nbr1, tran_dt);
trace(str);
trace("fetch_data(): Before open log3");
EXEC SQL open log3;
if(sqlca.sqlcode) 
{
    printf("Error : sqlcode(%d) for open log3\n", sqlca.sqlcode);
    sprintf(str, "(%d) for open log3\0",sqlca.sqlcode);
    trace(str);
    error(str);
    return;
}
printf("fetch_data(): After open log3");
for(;;) 
{
    trace("fetch_data(): Before fetch log3");
    EXEC SQL fetch log3
        into

        :type_code, :pri_tran_code, :tran_datetime;
        if(sqlca.sqlcode) 
        {
            if (sqlca.sqlcode != DB_NORECORDS) 
            {
                trace("Error : sqlcode(%d) for fetch log3\n", sqlca.sqlcode);
                sprintf(str, "fetch_data() : Error : sqlcode(%d) for fetch log3\0", sqlca.sqlcode);
                trace(str);
                error(str);
                return;
            }
            break;
        }

}
trace("fetch_data(): After fetch log3");
EXEC SQL CLOSE log3;
} 
```

函数**trace()**和**error()**将传递给它的字符串作为参数写入它们各自的文本文件中。所以我在文本文件中看到的最后一件事是“fetch_data()：在打开 log3 之前”。如果我们打开游标有什么问题，不应该是被**if(sqlca.sqlcode)**捕捉到了。

请帮我找出问题出在哪里。谢谢。

# c# - 在实体框架中创建新实体时违反唯一约束

> ID：14454117
> 
> 赞同：0
> 
> 时间：2013-01-22T08:12:17.530
> 
> 标签：c#, .net, wpf, entity-framework

我有，errr 有一个操作数据库信息的工作 wpf 应用程序（使用实体框架，首先使用数据库）。

数据的结构是 4 个财务信息表（全部 1:1 映射到 5 个主表），主表中有几个带有外键引用的查找表。

我在 SqlServer 中添加了一个表（另一个 1:1 映射到主表），然后运行“从数据库更新模型...”向导将新表添加到模型中。.edmx 文件中的一切看起来都很好，包括“0..1”关系链接。

但是，当我尝试保存时，我收到“违反唯一约束”错误。

我的创建代码：

```
private void AddNewStatementsQuery(LGFinanceEntities lGFinanceEntities)
{
  StatementsMain newStatement = StatementsMain.CreateStatementsMain(9999, this.LocalGovt.StakeholderID, 161, this.Year.FinancialYearID);
  StatementsIncome newInc = StatementsIncome.CreateStatementsIncome(newStatement.StatementsMainID);
  StatementsNote newNote = StatementsNote.CreateStatementsNote(newStatement.StatementsMainID);
  StatementsRSSFinPos newRSSFinPos = StatementsRSSFinPos.CreateStatementsRSSFinPos(newStatement.StatementsMainID);
  StatementsSurplusDeficit newSurplusDeficit = StatementsSurplusDeficit.CreateStatementsSurplusDeficit(newStatement.StatementsMainID);
  lGFinanceEntities.StatementsMains.Context.AddObject("StatementsMains", newStatement);
  lGFinanceEntities.StatementsMains.Context.AddObject("StatementsIncomes", newInc);
  lGFinanceEntities.StatementsMains.Context.AddObject("StatementsNotes", newNote);
  lGFinanceEntities.StatementsMains.Context.AddObject("StatementsRSSFinPos", newRSSFinPos);
  lGFinanceEntities.StatementsMains.Context.AddObject("StatementsSurplusDeficit", newSurplusDeficit);
  if (lGFinanceEntities.SaveChanges() != 1)  // this is causing the exception
  {
    MessageBox.Show("Error. New Statements not created", "Database Error");
  }
} 
```

在添加新表之前，上面的代码是有效的。唯一的变化是添加了以下行：

```
StatementsSurplusDeficit newSurplusDeficit = 
    StatementsSurplusDeficit.CreateStatementsSurplusDeficit(newStatement.StatementsMainID);
...
lGFinanceEntities.StatementsMains.Context.AddObject("StatementsSurplusDeficit", 
    newSurplusDeficit); 
```

有趣的*是*，某处正在创建一条记录，因为当我检查 SqlServer 时，我确实有 5 个表的新记录。同样有趣的是，每次我尝试某些东西并运行该方法时，主键都会增加 2。看起来同一条记录被添加了两次，但我不知道如何添加。

**编辑：** 根据评论建议，我更改了“AddNewStatementsQuery”，如下所示：

```
lGFinanceEntities.StatementsMains.Context.AddObject("StatementsMains", newStatement); 
```

改为：

```
lGFinanceEntities.StatementsMains.AddObject(newStatement); 
```

然后到：

```
lGFinanceEntities.AddObject("StatementsMains", newStatement); 
```

这并没有解决密钥冲突错误。

我如何找出数据被保存两次的位置/方式（即，除了`lGFinanceEntities.SaveChanges()`在 if 语句中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:55:56.870

唔。查看您的代码，我可以看到它被简化为：

```
// Create the new objects    
var statement = new StatementsMain()
{
    this.LocalGovt.StakeholderID, 161, this.Year.FinancialYearID
};

var income = new StatementsIncome()
{
    StatementsMain = statement
};

var note = new StatementsNote()
{
    StatementsMain = statement
};

var rss = new StatementsRSSFinPos()
{
    StatementsMain = statement
};

var surplus = new StatementsSurplusDeficit()
{
    StatementsMain = statement
};

// Add the objects into the context 
lGFinancialEntities.AddObject(statement);
lGFinancialEntities.AddObject(income);
lGFinancialEntities.AddObject(note);
lGFinancialEntities.AddObject(rss);
lGFinancialEntities.AddObject(surplus);

// Persist the objects to the data storage
lGFinancialEntities.SaveChanges(); 
```

或者，甚至更好：

```
// Create the main object
var statement = new StatementsMain()
{
    this.LocalGovt.StakeholderID, 161, this.Year.FinancialYearID
};

// Add the objects into the context
lGFinancialEntities.AddObject(statement);
lGFinancialEntities.AddObject(new StatementsIncome() { StatementsMain = statement });
lGFinancialEntities.AddObject(new StatementsNote() { StatementsMain = statement });
lGFinancialEntities.AddObject(new StatementsRSSFinPos() { StatementsMain = statement });
lGFinancialEntities.AddObject(new StatementsSurplusDeficit() { StatementsMain = statement });

// Persist the objects to the data storage
lGFinancialEntities.SaveChanges(); 
```

但是，这告诉我有很多关于您的数据模式的内容在这里并不明显。例如，对象中的值`161`引用了`StatementsMain`什么？

仅供参考，将主对象分配给它是外键的对象让 EF 完成将新 ID 分配给其他对象的工作，因为它们被持久化。

# lua - Lua设置连接超时

> ID：14454127
> 
> 赞同：1
> 
> 时间：2013-01-22T08:12:59.370
> 
> 标签：lua

看起来为 Lua 套接字[设置超时](http://w3.impa.br/~diego/software/luasocket/tcp.html#settimeout)`connect`仅在 之后有效，我不能使用`assert (socket.connect (..))`，因为我有多个服务器要试用。

我的情况是，当一台服务器关闭（无法连接而不是网络不稳定）时，我将求助于另一台服务器，因此我必须在连接时超时。

有什么建议么？

**编辑**

我找到了 Lua TCP 套接字，但是我无法检测到连接失败，

```
local tcp = socket.tcp()
tcp:settimeout(1)
tcp:connect(...) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T14:46:59.797

如果它不起作用，可能是因为您的 luasocket 太旧，请更新到版本 2：

> 从 LuaSocket 2.0 开始，settimeout 方法会影响 connect 的行为，导致它在超时的情况下返回错误。
> 
> （来源：[http](http://w3.impa.br/~diego/software/luasocket/tcp.html#connect) ://w3.impa.br/~diego/software/luasocket/tcp.html#connect ）

# sql - 从表中的对值中计数

> ID：14454130
> 
> 赞同：5
> 
> 时间：2013-01-22T08:13:09.793
> 
> 标签：sql, oracle, oracle11g

![count_temp 表](../Images/5b57e6b95e1a013a212ed580300f1d20.png)

将上述内容作为示例表的输出，我需要一个 sql 查询，其结果为“2”作为表中的计数。

我已经尝试过在第 4 列中发送，并且还可以；但更多行显示不正确的 o/p。给出了我的旧代码

```
SELECT COUNT(*)/2
     FROM 
     (SELECT sentby,sentto
     FROM
          (SELECT DISTINCT sentby, sentto FROM count_temp)
     WHERE sentto IN
          (SELECT DISTINCT sentby FROM count_temp )
      AND sentby IN
          (SELECT DISTINCT sentto FROM count_temp )
     ) ; 
```

在此先感谢:) 并表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:17:54.983

您的查询：

```
with cte as (
select distinct m1.sentby , m1.sentto
from m m1 
inner join m m2
   on m1.sentby = m2.sentto and
      m2.sentby = m1.sentto 
)
select count(*)/2 from cte; 
```

[在 sqlfiddle 测试它](http://sqlfiddle.com/#!4/2f918/4/0)

此外，简化：

```
select count( distinct m1.sentby ) / 2
from m m1 
inner join m m2
   on m1.sentby = m2.sentto and
      m2.sentby = m1.sentto 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:36:19.147

试试这个：

```
 SELECT count(*)/2
    FROM
      (SELECT sentby,
              sentto,
              max(rownum) AS rn
       FROM count_temp
       GROUP BY sentby,
                sentto) a,
      (SELECT sentby,
              sentto,
              max(rownum) AS rn
       FROM count_temp
       GROUP BY sentby,
                sentto) b
    WHERE a.rn != b.rn
      AND a.sentby = b.sentto
      AND a.sentto = b.sentby; 
```

# php - Ajax 文件上传插件

> ID：14454131
> 
> 赞同：0
> 
> 时间：2013-01-22T08:13:22.230
> 
> 标签：php, ajax

我正在使用[非常简单的 jQuery Ajax 文件上传插件](http://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html)的代码搜索完整示例， 但在访问下载链接后，没有完整的示例代码。请指导我可以从哪里得到..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:40:09.530

我使用[这个 Ajax 上传](http://malsup.com/jquery/form/)器上传带有文件附件的表单内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:33:43.090

可能下面的链接会有所帮助。

[http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html](http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html)

[http://www.saaraan.com/2012/06/ajax-file-upload-with-php-and-jquery](http://www.saaraan.com/2012/06/ajax-file-upload-with-php-and-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:16:21.260

看看 blueimp[在这里](https://github.com/blueimp/jQuery-File-Upload)

非常简单，可以在 github 上找到

# c# - 带有 Visual Studio 2012 的 Crystal Reports - 集成在哪里？

> ID：14454132
> 
> 赞同：1
> 
> 时间：2013-01-22T08:13:29.760
> 
> 标签：c#, asp.net-mvc, crystal-reports, visual-studio-2012

我想为我的 ASP.NET MVC 应用程序创建一些带有“水晶报告”的报告。所以我在[http://scn.sap.com/docs/DOC-35074](http://scn.sap.com/docs/DOC-35074) ( [http://stackoverflow.com/questions/12695563/crystal-reports ) 下载了 SAP Crystal Reports，Microsoft Visual Studio 的开发人员版本 - 2012' -for-vs2012/14384613#14384613](http://stackoverflow.com/questions/12695563/crystal-reports-for-vs2012/14384613#14384613) )

但是“添加新水晶报表”按钮在哪里？我需要任何插件来创建新的 Crystal Reports 吗？特色的 VS2012 集成在哪里？

谢谢

# algorithm - 找到所有四元组 [a, b, c, d] 其中 a^3 + b^3 = c^3 + d^3 当 1 <= a, b, c 或 d <= 10000

> ID：14454133
> 
> 赞同：25
> 
> 时间：2013-01-22T08:13:37.930
> 
> 标签：algorithm, complexity-theory

寻找算法或一些编码提示以找到解决方案

`a^3 + b^3 = c^3 + d^3`,`a, b, c and d`所有都在范围内`[1 .. 10000]`

是面试题。

我正在考虑优先级队列至少迭代`a`和`b`值。一些提示会很棒，会尝试从那里解决。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T09:36:01.970

使用哈希映射来存储`(cube,(a,b))`，您可以迭代所有可能的整数对，并在您发现所需的立方体总和已经在映射中时输出解决方案。

**伪代码：**

```
map <- empty hash_map<int,list<pair<int,int>>>
for each a in range(0,10^5):
  for each b in range(a,10^5): //making sure each pair repeats only once
     cube <- a^3 + b^3
     if map.containsKey(cube):
         for each element e in map.get(cube):
            output e.first(), e.last(), a, b //one solution            
     else:
         map.put(cube,new list<pair<int,int>>)
     //for both cases, add the just found pair to the relevant list
     map.get(cube).add(cube,new pair(a,b)) 
```

该解决方案平均为 O(n^2) 空间^((1))和 O(n^2 + OUTPUT) 时间，其中 OUTPUT 是输出的大小。

**编辑：**

所需空间实际上是`O(n^2 logn)`，`n`范围是 (10^5)，因为要表示`10^5`整数，您需要`ceil(log_2(10^15)) = 50`位。因此，您实际上需要大约 58.2 GB（+ 开销）的 500,000,000,000 位（+ 映射和列表的开销）。

因为对于大多数机器来说它有点太多了——你可能想要考虑将数据存储在磁盘上，或者如果你有 64 位机器——只需存储到“内存”中，让操作系统和[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)系统尽可能地做到这一点能够。

* * *

(1) 正如编辑澄清的那样，它实际上是`O(n^2log(n))`空间，但是如果我们将每个整数存储作为`O(1)`（通常是这种情况）我们得到`O(n^2)`空间。显然，相同的原则将适用于时间复杂度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T17:36:48.570

使用优先级队列几乎可以肯定是最简单的解决方案，也是最实用的解决方案，因为它是 O(n) 存储（如果您需要 bignums，则使用日志因子）。任何涉及计算所有可能的总和并将它们放入地图的解决方案都需要 O(n^2) 存储，这很快就会变得不切实际。

我使用优先级队列的天真、未优化的实现是 O(n^2 log(n)) 时间。即便如此，n = 10000 只用了不到 5 秒，n = 100000 只用了大约 750 秒，使用了几兆字节的存储空间。它当然可以改进。

根据您的评论，基本思想是用对 (a, a+1) 为范围 [1, N) 中的 a 初始化一个优先级队列，然后重复增加最小值的第二个值（通过立方体的总和) 元组，直到它达到 N。如果在任何时候队列中最小的两个元素相等，则您有一个解决方案。（我可以粘贴代码，但您只要求提示。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-10T17:42:25.410

**使用 Hashmap（O(n^2) 解决方案）：**

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import static java.lang.Math.pow;

/**
 * Created by Anup on 10-10-2016.
 */

class Pair {
    int a;
    int b;

    Pair(int x, int y) {
        a = x;
        b = y;
    }
}

public class FindCubePair {
    public static void main(String[] args) {
        HashMap<Long, ArrayList<Pair>> hashMap = new HashMap<>();
        int n = 100000;

        for(int i = 1; i <= n; i++) {
            for(int j = 1; j <= n; j++) {
                long sum = (long) (pow(i, 3) + pow(j, 3));

                if(hashMap.containsKey(sum)) {
                    List<Pair> list = hashMap.get(sum);
                    for(Pair p : list) {
                        System.out.println(i + " " + j + " " + p.a + " " + p.b);
                    }
                } else {
                    ArrayList<Pair> list = new ArrayList<>();
                    hashMap.put(sum, list);
                }

                hashMap.get(sum).add(new Pair(i, j));
            }
        }
    }
} 
```

不幸的是，由于资源限制，在我的计算机上打印的整数值甚至没有达到 1000。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T09:16:15.747

一个比简单的解决方案更快的解决方案如下：计算 a^3 + b^3 可以具有的所有值，并用它存储 a 和 b 的所有可能值。这是通过循环 a 和 b，将结果 (a^3 + b^3) 存储在二叉树中并具有与每个结果相关联的值列表（a's 和 b's）来完成的。

在这一步之后，您需要遍历列表并为每个值选择 a、b、c、d 的所有可能分配。

我认为这个解决方案需要 O(n^2 log n) 时间和 O(n^2) 空间，但我可能会遗漏一些东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-03T10:37:46.430

```
int Search(){
int MAX = 10000000;
for(int a = 0; a < MAX; a++){
    int a3 = a * a * a;
    if(a3 > MAX) break;
    for(int b = a; b < MAX; b ++){
        int b3 = b * b * b;
        if(a3 + b3 > MAX)break;             
        for(int c = 0; c < a; c++){
            int c3 = c*c*c;
            int m = a3 - c3; 
            int d = b+1;
            while(true){
                int d3 = d * d * d;
                if(d3-b3 <= m){
                    if((d3 - b3) == m){
                        count++;
                        PUSH_Modified(a3, b3, c3, b3, a, b, c, d);
                    }
                    d++;
                    continue;
                }
                else
                    break;
            }
        }
    }
}
return 0; 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T09:41:50.133

让我们假设一个解决方案：

`a=A, b=B, c=C, and d=D.`

给定任何解决方案，我们可以生成另外 3 个解决方案

```
abcd
ABCD

ABDC
BACD
BADC 
```

实际上，如果`A=B`或`C=D`，那么我们可能只有 1 或 2 个进一步的解决方案。

`A <= B`我们可以通过订购和选择我们首先寻找的解决方案`C <= D`。这将减少搜索空间。我们可以从找到的解决方案中生成遗漏的解决方案。

总会有至少一种解决方案，其中`A=C`和`B=D`。我们正在寻找的是何时`A>C`和`B<D`。这来自排序：`C`不能大于`A`，因为我们选择只查看 的解决方案`D>C`，立方和太大。

我们可以计算`A^3 + B^3`，将其放入 a`map`作为 key，以 a `vector`of pairs`A,B`作为 value。

会有`(n^2)/2`价值观。

如果它们中已经存在值，`vector`它们的值都会更低`A`，它们就是我们正在寻找的解决方案。我们可以立即输出它们以及它们的排列。

我不确定复杂性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-19T21:19:16.347

* * *

逻辑：
a^3 + b^3 = c^3 + d^3
然后，a^3+b^3-c*3-d^3 = 0
尝试通过将 a 的所有值组合来求解这个方程， b,c 和 d 在 [0 , 10^5] 的范围内。
如果方程已求解，则打印 a、b、c 和 d 的值

```
public static void main(String[] args) {

        //find all solutions of a^3 + b^3 = c^3 + d^3
        double power = 3; 
        long counter = 0; // to count the number of solution sets obtained
        int limit = 100000; // range from 0 to limit

        //looping through every combination of a,b,c and d
        for(int a = 0;a<=limit;a++)
        {
            for(int b = 0;b<=limit;b++)
            {
                for(int c = 0;c<=limit;c++)
                {
                    for(int d = 0;d<=limit;d++)
                    {
                        // logic used : a^3 + b^3 = c^3 + d^3 can be written as a^3 + b^3 - c^3 - d^3 = 0
                        long result = (long)(Math.pow(a,power ) + Math.pow(b,power ) - Math.pow(c,power ) - Math.pow(d,power ));
                        if(result == 0 )
                        { 
                            counter++; // to count the number of solutions
                            //printing the solution
                            System.out.println( "a = "+ a + "    b = " + b + "    c = " + c + "    d = " + d);
                        }
                    }
                }
            }
        }
        //just to understand the change in number of solutions as limit and power changes

        System.out.println("Number of Solutions =" + counter);
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-09T15:30:52.880

一种解决方案 - 使用在排序数组中查找 2 和的概念。这是 O(n3)

```
public static void pairSum() {
    int SZ = 100;
    long[] powArray = new long[SZ];
    for(int i = 0; i< SZ; i++){
        int v = i+1;
        powArray[i] = v*v*v;
    }
    int countPairs = 0;
    int N1 = 0, N2 = SZ-1, N3, N4;
    while(N2 > 0) {
        N1=0;
        while(N2-N1 > 2) {
            long ts = powArray[N1] + powArray[N2];
            N3 = N1+1; N4 = N2-1;
            while(N4 > N3) {
                if(powArray[N4]+powArray[N3] < ts) {
                    N3++;
                }else if(powArray[N4]+powArray[N3] > ts) {
                    N4--;
                }else{
                    //System.out.println((N1+1)+" "+(N2+1)+" "+(N3+1)+" "+(N4+1)+" CUBE "+ts);
                    countPairs++;
                    break;
                }
            }
            N1++;
        }
        N2--;
    }
    System.out.println("quadruplet pair count:"+countPairs);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-17T19:24:07.177

从蛮力方法开始，很明显它将 O(n^4) 时间来执行。如果空间不是限制，我们可以选择列表和地图的组合。代码是不言自明的，我们使用嵌套列表来跟踪特定总和（映射中的键）的所有条目。时间复杂度因此从 O(n^4) 降低到 O(n^2)

```
public void printAllCubes() {
  int n = 50;
  Map<Integer, ArrayList<ArrayList>> resMap = new HashMap<Integer, ArrayList<ArrayList>>();
  ArrayList pairs = new ArrayList<Integer>();
  ArrayList allPairsList = new ArrayList<ArrayList>();
  for (int c = 1; c < n; c++) {
    for (int d = 1; d < n; d++) {
      int res = (int) (Math.pow(c, 3) + Math.pow(d, 3));
      pairs.add(c);
      pairs.add(d);
      if (resMap.get(res) == null) {
        allPairsList = new ArrayList<ArrayList>();
      } else {
        allPairsList = resMap.get(res);
      }
      allPairsList.add(pairs);
      resMap.put(res, allPairsList);
      pairs = new ArrayList<Integer>();
    }
  }

  for (int a = 1; a < n; a++) {
    for (int b = 1; b < n; b++) {
      int result = (int) (Math.pow(a, 3) + Math.pow(b, 3));
      ArrayList<ArrayList> pairList = resMap.get(result);
      for (List p : pairList) {
        System.out.print(a + " " + b + " ");
        for (Object num : p)
          System.out.print(num + " ");
        System.out.println();
      }
    }
  }
} 
```

# c# - 嘲弄没有返回选项

> ID：14454135
> 
> 赞同：0
> 
> 时间：2013-01-22T08:13:56.113
> 
> 标签：c#, mocking, nunit, moq

我正在使用 moq farmework 进行 nunit 测试。由于某些原因，我无法获得退货选项，它应该如下所示

```
mock.Setup(foo => foo.Execute(It.IsAny<string>()))
    .Returns(true)
    .Callback((string s) => calls.Add(s));

but I can only write code like this 
mock.Setup(foo => foo.Execute(It.IsAny<string>()))
    .Callback((string s) => calls.Add(s)); 
```

它不会给我退货选项。有什么建议为什么要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:21:46.437

您在界面中的方法可能不会返回`bool`。请参见以下示例：

![在此处输入图像描述](../Images/cb62978326a7f24653cea45382a09c0c.png)

# android - 识别手动和编程按钮单击

> ID：14454142
> 
> 赞同：0
> 
> 时间：2013-01-22T08:14:42.350
> 
> 标签：android, android-layout

在我的应用程序中，我有一个用作“**暂停**”和“**恢复**”的按钮。在这里，用户可以手动单击此按钮来暂停和恢复。有时我正在使用`view.performClick()`方法以编程方式执行点击。

问题是......是否有可能知道点击了哪个点击按钮？

谢谢

**编辑：**

我在我的应用程序中使用计时器，我想暂停和恢复计时器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:24:11.650

以不同的方法处理点击：

```
private void handleClick(boolean manualClick) {
    //your code...
}

public void onClick(View view) {
    handleClick(true);
} 
```

并且不要使用`view.performClick()`自动调用它，而是调用`handleClick(false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:19:53.117

您可以在手动单击时设置标志真/假，并在执行单击操作时使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:26:09.557

```
if(button.getText().toString().trim().equalsIgnoreCase("pause")){
// puse your timer here or whatever you would like

}else{
//resume your time here or whatever you would like
} 
```

# winapi - 用新名称注册现有的 Windows 类是否安全？

> ID：14454148
> 
> 赞同：0
> 
> 时间：2013-01-22T08:15:02.770
> 
> 标签：winapi, heap-corruption, registerclass

我正在使用 VC2010 和混合 MFC/Win32 编写一个框架。我有许多控件类型，它们都注册了自己的窗口类，其中一些使用标准窗口类之一的 WindowProc - 类似于以下示例。

```
void Button::OnInitClass(WNDCLASS &wndClass)
{       
    Object::OnInitClass(wndClass);
    if(!GetClassInfo(NULL, WC_BUTTON, &wndClass)) {
        throw std::exception("Failed getting window class info.");
    }
    wndClass.lpszClassName = ButtonBase::GetWndClassName();
}

bool Button::Create(CWnd* parent)
{
    if(!WndClassInitialized) {
        static VSCriticalSection cs;
        cs.Enter();
        if(!WndClassInitialized) {
            WNDCLASS wndClass;
            memset(&wndClass, 0, sizeof(WNDCLASS));
            OnInitClass(wndClass);
            assert(wndClass.lpszClassName);
            if(!RegisterClass(&wndClass)) {
                throw std::exception("Error registering window class");
            }
            WndClassInitialized = true;
        }
        cs.Leave();
    }

    DWORD style =   WS_CHILD | WS_CLIPSIBLINGS | BS_PUSHBUTTON | BS_MULTILINE;
    DWORD exStyle = WS_EX_LEFT | WS_EX_LTRREADING;      
    Created = CWnd::CreateEx(exStyle, ButtonBase::GetWndClassName(), "", style , _attribAnchor.Rect, parent, 0) != FALSE;       
    SetFont(_font);
    return Created;
} 
```

这一切都工作了很长时间，但现在我现在遇到了堆损坏。但是，如果我在 CreateEx 调用中直接使用 WC_BUTTON 类，则不会出现堆损坏。

我怀疑这种从 WC_BUTTON 使用 WindowProc 注册窗口类的方式是否安全。**是吗？**

如果它是安全的，那么我当然需要在其他地方寻找堆损坏的过程。**但如果没有，有没有一种安全的方法来做我想做的事情？**（即使用新名称注册现有类 - 我这样做是为了能够从它们的窗口类名称中识别控件，给定任意窗口句柄）

我应该提到堆损坏发生在字符串分配中，并且所有参数似乎都是正确的——所以问题一定是在那之前的某个地方。

在此先感谢，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:00:56.277

恐怕混合 MFC/Win32 会使情况变得更糟。如果您的主要框架/SDK 是 MFC，那么为什么不遵循 MFC 的规则和风格呢？为什么使用 ::RegisterClass 而不是 AfxRegisterClass （简单得多）。为什么只为 UI 控件注册所有不同的类？

通常的 MFC 程序只为弹出窗口或顶级窗口注册新的窗口类（通过 AfxRegisterClass）。MFC CWnd 为此提供了基本的 WndProc。如果您想要自定义设计按钮控件，您可以使用窗口子类化机制。

# php - Yii Dropdownlist- 将响应数组显示为值

> ID：14454149
> 
> 赞同：1
> 
> 时间：2013-01-22T08:15:03.237
> 
> 标签：php, ajax, yii

在一个 ajax 请求之后，我从我的控制器获得了一个数组作为响应，我如何在我的下拉列表中使用这个数组值？

## 回答

在我看来我有

```
echo CHtml::dropDownList('client_id', '',CHtml::listData($model,'client_id','client_name'), array(
'ajax'=> array(
'type'=>'POST',
'url'=>Yii::app()->baseUrl.'/index.php?r=page/dynamicDropdownList',
'update'=>'#program_id',
'empty'=>'-Select a Client-')));

// I need to populate the response array in this dropdownlist
echo CHtml::dropDownList('program_id','', CHtml::listData($result,'program_id', 'program_name')); 
```

在我的控制器中

```
 public function actionDynamicDropdownList()
 {

    if($_POST['client_id'] > '0') {
        $result = Yii::app()->db->createCommand()->select('program_id, program_name')->from('program')->where('client_id='.$_POST['client_id'].'')->order('program_name')->queryAll();
        $this->render('admin', array(
            'result' => $result,
        ));

    }

   } 
```

## 另一个问题

现在，除了第二个下拉列表还显示了第一个下拉列表的值和结果之外，我一切都正常了。

解决方案：- 我已解析响应并将其显示在下拉列表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:30:04.700

这是您的控制器的外观：

```
public function actionIndex() {

        $model = new SearchForm();
        if ($_GET['SearchForm']) {
            $model->attributes = $_GET['SearchForm'];
        }

//here is where you put your criteria or query commands

        if ($_GET['ajax']) {
            $this->renderPartial('index', array(
                'model' => $model,
            ));
        } else {

            $this->render('index', array(
                'model' => $model,
            ));
        }
    } 
```

你从 ajax 或 GET 中捕获数据，然后用它做一些事情，然后将数据传递给视图；

这应该是 vies 包含的内容：

```
<? echo $form->dropDownList($model, 'position_type', CHtml::listData(PositionType::model()->findAll(array('condition' => 'status=1')), 'id', 'name'), array('class' => 'postdropdown2', 'empty' => array(-1 => 'All'), 'onchange' => 'showDiv(this.value,1);')); ?> 
```

您必须处理在控制器中使用 ajax 接收的数据，因为它在视图中不可见，如果它没有使用 render 或 renderpartial 传递

# c# - 响应文本未定义的 asp.net 代码后面

> ID：14454151
> 
> 赞同：0
> 
> 时间：2013-01-22T08:15:07.130
> 
> 标签：c#, .net, ajax, jquery, asp.net-ajax

```
var req = $.ajax({
            type: 'GET',
            cache: false,
            url: 'loc.aspx?count=' + str,
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            async: false,
            data:'{}',
            success: function (data) {
                alert(data.responseText);
            }
        });
        req.fail(function (data) {
        TINY.box.show({ html: 'Server Error. Try again: ' + data.responseText, animate: false, close: false, boxid: 'error', top: 100 });
        }); 
```

上面的代码曾经在 jsp 中正常工作，现在我正在尝试在 asp.net c# 中使用，无论如何我在错误块中获取正确的数据，我希望它在成功块中。甚至`data.d`没有帮助，

如果我写的东西就像`alert(data)`我得到了完整的 html，我只需要响应文本，当我这样使用`data.responseText`时，我会变得不确定。请有人帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:16:55.383

下面的代码应该可以正常工作。我在你做错的地方添加了一些评论

```
var req = $.ajax({
            type: 'GET',
            cache: false,
            url: 'loc.aspx?count=' + str,
            dataType: 'html',// as you return a simple html dataType:json will throw an error as jquery will not be able to parse received string
            contentType: "application/json; charset=utf-8",
            async: false,
            data:'{}',
            success: function (data) {
                alert(data);// data is not an XHR object. it is a processed response. In your case - simple string with HTML which, of course, has no method responseText
            }
        });
        req.fail(function (data) {
        TINY.box.show({ html: 'Server Error. Try again: ' + data.responseText, animate: false, close: false, boxid: 'error', top: 100 });
        }); 
```

在`.fail`函数中你有`data.responseText`因为在这种情况下 XHR 对象作为第一个参数传递（参见[this](http://api.jquery.com/jQuery.ajax/#jqXHR)）。同时`success`callback的第一个参数是request接收到的干净数据。如果没有细节，你可以认为`data == xhr.responseText`在成功回调中。[请参阅本](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)节中的成功属性描述

**更新**

正如出现的那样，问题不仅在于 JS。我猜你有一个`.aspx`用 ajax 调用的简单页面。有两种解决方案：

1）改用网络服务。它会更好，因为它不会经历完整的页面加载周期并且应该更快地执行。它不会产生未使用的 HTML

2）aspx页面默认会输出一些HTML。在您返回 ajax 请求的响应之前，您应该清除响应（因此已经生成的 HTML 不会发送到服务器），写下您的响应并立即结束它：

```
Response.Clear();
Response.Write("hello");
Response.End(); 
```

这种方式你应该只收到`hello`成功。

# jquery - 如何使用 struts/jQuery 创建像 stackoverflow 这样的自动完成功能？

> ID：14454152
> 
> 赞同：-2
> 
> 时间：2013-01-22T08:15:07.437
> 
> 标签：jquery, autocomplete, struts2

我想创建一个像stackoverflow这样的自动完成功能：

![在此处输入图像描述](../Images/57c06ffe271f28affe735780561413a6.png)

我知道如何创建自动完成，但 automcomple 显示匹配项目的列表，这不是我想要的。当用户输入关键字时，我只想显示一个具有 3 comlumn 样式的表单。

谁能给我一些提示，以便我可以解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:38:59.767

查看 URL [http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/](http://jquery.webspirited.com/2011/02/jquery-tagit-a-jquery-tagging-plugin/)。

这会很有帮助。

# php - 如果键的代码是“gb2312”，为什么array_search 找不到值？

> ID：14454158
> 
> 赞同：0
> 
> 时间：2013-01-22T08:15:46.693
> 
> 标签：php, arrays

我的问题：

```
$state=array("你"=>1); 
if(array_key_exists("你",$state)) 
{ 
$result = array_search("你",$state);echo $result;
}else
{
echo "No Exists";
} 
```

我期望“1”的结果，但是输出是“不存在”，我不知道为什么程序无法获得键“你”的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:22:23.787

[`array_search`](http://php.net/manual/function.array-search.php)将按值搜索给定的数组。尝试以下操作：

```
$state = array("你"=>1); 
if(array_key_exists("你", $state))  { 
  echo $state["你"];
} else {
  echo "No Exists";
}

// => 1 
```

[» 演示](http://codepad.viper-7.com/54sEwX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:44:21.667

```
the encoding type of  the show paper and the store paper  is GB2312.

    $state=array("你"=>1);   
    if(array_key_exists("你",$state)) 
    { 
    $result1 = $state["你"];
         echo $result1;  // can get the value  111
    }else
    {
    echo "No Exists";
    } 
```

上面的代码可以正确执行。我无法准确地展示我的问题。现在我粘贴我的代码，有一些问题。

```
<?php
  $file = file("GB2312-HanZiBianMa.txt");  // file encoding type ANSI 
   foreach ($file  as $line_num => $line)
    {
    list($no,$hex,$dec) = preg_split('[\t]',htmlspecialchars($line));;
    $result[$hex] = $dec;
    }
  $result_2 = array_flip($result);
 if(array_key_exists("你",$result_2))   // **can't find the value** 222
    { 
    $state= $result_2["你"];
    echo $state."<br/>";
    }else
    {
    echo "No Exists<br/>";
    }

foreach($result_2 as $k=>$each)   //can get the value using the preg_match  
        {
         if(preg_match('/你/', $k))
            echo $k."\t".$each."<br/>";     
        }   
  ?>

  the format of GB2312-HanZiBianMa.txt is as follows:
    1947    c4e3    你
    1948    c4e4    匿
    1949    c4e5    腻
    1950    c4e6    逆 
```

如果您想测试代码，您可以保存 php 代码并保存 GB2312.. 文件。问题是：为什么下面的函数不能得到正确的值？数据来自文件和一个存储在一起。

```
if(array_key_exists("你",$result_2))   // **can't find the value** 222
    { 
    $state= $result_2["你"];
    echo $state."<br/>";
    }else
    {
    echo "No Exists<br/>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:27:49.397

希望下面的功能会有所帮助。

```
<?php
    $array = array('arr1'=>array('find_me'=>'yes you did.'));

    function get_value_by_key($array,$key)
    {
        foreach($array as $k=>$each)
        {
            if($k==$key)
            {
                return $each;
            }

            if(is_array($each))
            {
                if($return = get_value_by_key($each,$key))
                {
                    return $return;
                }
            }

        }
    }
    echo get_value_by_key($array,'find_me');
?>
```

# c# - 打印机的纸张尺寸和我的图像

> ID：14454170
> 
> 赞同：0
> 
> 时间：2013-01-22T08:16:37.720
> 
> 标签：c#, image

我的打印机只能处理 B3 和 A4 尺寸，我正在开发一个应用程序来连接图像。这些图像大小不同。我想知道如何在用 A4 或 B3 打印之前将它们整齐地排列成一个图像文件。

对于连接，我得到了工作代码，但仍然坚持如何排列图像以适应上面的输出纸张尺寸。谢谢你的任何想法

```
public Image DrawLstOfItem(List<string> imgPath)
{
    string path = imgPath.First();
    Image img = Image.FromFile(path);
    Bitmap bmp = new Bitmap(img.Width, (int)(img.Height*imgPath.Count+(5.0f*(imgPath.Count-1))));
    using (Graphics g = Graphics.FromImage(bmp))
    {
        g.DrawImage(img, 0, 0);
        float nY = img.Height + 5.0f;
        float nX = 0.0f;
        for (int i = 1; i < imgPath.Count; i++)
        {
            Image nextImg = Image.FromFile(imgPath[i]);
            g.DrawImage(nextImg, nX, nY, nextImg.Width, nextImg.Height);
            nY += nextImg.Height + 0.5f;
        }
    }
    return bmp;
} 
```

我需要检测输入图像尺寸，计算可能的结果并在要求分别为 B3 或 A4 时排列它们。我被所有不同的想法搞砸了，真的需要有人来启发我，这样我才能找到一条可能的最佳路径继续前进。

# jboss7.x - 启动 jboss 服务器时出错

> ID：14454171
> 
> 赞同：3
> 
> 时间：2013-01-22T08:16:49.577
> 
> 标签：jboss7.x

我在 windows xp 中安装了 Jboss 服务器。当我尝试执行“run.bat”时出现错误

" 要启动 JBoss 应用服务器，请参见 C:\Program Files\jboss-as-7.1.1.Fin al\bin..\README.txt"

在执行“run.bat”之前，我设置了环境变量 JBOSS_HOME = C:\Program Files\jboss-as-7.1.1.Final;

收到错误后，我看到“readme.txt”，它说“这个 jar 应该只用于独立客户端，而不是部署到 AS7 实例的部署。” 问题是什么？我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:14:17.187

不要使用`run.bat`. 使用`%JBOSS_HOME%\bin\standanlone.bat`或`%JBOSS_HOME%\bin\domain.bat`。我会从独立开始，因为这可能是你想要的。域用于运行多个实例并希望一个管理界面与每个服务器进行交互。

# c# - 如何让 msbuild/VS 创建作为构建链接包含的文件的物理副本？

> ID：14454173
> 
> 赞同：0
> 
> 时间：2013-01-22T08:17:01.133
> 
> 标签：c#, visual-studio, msbuild

在我的 c# VS2012 解决方案中，我有 3 个项目：A、B 和 C。项目 B 和 C 使用以下包含来自 A 的文件（*.js 和其他）

```
<Content Include="..\A\**\*.js">
  <Link>%(RecursiveDir)%(Filename)%(Extension)</Link>
</Content> 
```

我可以在解决方案资源管理器的 B 和 C 项目中看到所有来自 A 的引用文件作为链接。

在构建 A、B 和 CI 之后，可以在项目 B 的文件系统中看到文件，但在项目 C 中看不到。我比较了 B 和 C 的项目文件，但我看不到任何可以控制这种行为的东西。一般来说，我找不到太多关于控制文件行为的信息，这些文件作为链接包含在 csproj 文件中。

底部问题：

如何让 msbuild/VS 创建作为构建链接包含的文件的物理副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:04:23.513

回答我自己的问题。

我按照@Ran 的建议做了（我一开始就应该这样做），然后我从两个项目中一点一点地删除了一些东西，以便找到不同之处。事实证明，以下几行使第二个项目物化*文件作为*构建时的链接包含在内。

```
<PropertyGroup>
 <OutputPath Condition="'$(TeamBuildOutDir)'=='' ">
   bin\$(Platform)\$(Configuration)
 </OutputPath>
 <OutputPath Condition="'$(TeamBuildOutDir)'!='' ">
   bin\$(Platform)\$(Configuration)
 </OutputPath>
</PropertyGroup> 
```

# hibernate - 如何在 Grails 中实现 Hibernate @Any？

> ID：14454177
> 
> 赞同：0
> 
> 时间：2013-01-22T08:17:08.603
> 
> 标签：hibernate, grails, grails-orm

Grails 是否以某种方式支持 Hibernates @Any 注释？我想知道是否以及如何。

我可以通过执行以下操作来实现@Any：

```
class A {
  String entityClass
  Long entityId // yes, only support type Long id's

  // dynamically load class (e.g. B), then call B.get(entityId)
} 
```

但我想做得更优雅。

[Eyal Lupu 关于 Hibernate 的博客 @Any](http://www.jroller.com/eyallupu/entry/hibernate_the_any_annotation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:53:24.787

由于 GORM 构建在 Hibernate 之上，因此您可以创建一个带有 Hibernate 注释的 java 类，该类将被映射为域类。

文档中有一个[部分](http://grails.org/doc/latest/guide/hibernate.html)涵盖了此集成。基本上你需要 hibernate( `hibernate.cfg.xml`) 的配置 xml 并在`./src/java`.

此外，动态 GORM 方法（如`findAll()`、`get()`等`list()`）将可用于您的类。

# cordova - 多个文件/ZIP 作为电子邮件附件发送

> ID：14454179
> 
> 赞同：2
> 
> 时间：2013-01-22T08:17:12.807
> 
> 标签：cordova, blackberry, phonegap-plugins, cordova-2.0.0

我正在使用 phonegap/cordova 创建一个黑莓应用程序，我必须用相机拍摄多张图像并将它们作为电子邮件发送。我可以拍照，但我的问题是**如何在 blackberry 中将多个文件作为附件发送**。我知道我可以将单个文件作为附件发送。

**或者**

如何制作一个包含所有要附加和发送的文件的 zip 文件

PS：我的文件是 xml 格式（.xls）和多个图像的 excel 表

# pdf - 我如何摆脱ghostscripts添加的边距？

> ID：14454182
> 
> 赞同：2
> 
> 时间：2013-01-22T08:17:23.423
> 
> 标签：pdf, image-processing, png, ghostscript

我想将 PDF 的第一页提取为 PNG，以使用以下命令对其进行一些图像处理：

```
$ gs -q -dNOPAUSE -dBATCH -dEPSCrop -sDEVICE=pngalpha -dLastPage=1 -sOutputFile='test.png' 'test2.pdf' 
```

它适用于大多数 PDF，但它增加了一个透明边距：http: [//ubuntuone.com/23676W4TJPyX6W2pkp5guG](http://ubuntuone.com/23676W4TJPyX6W2pkp5guG)

`Gimp`按预期进行（没有保证金），`convert`也有同样的问题`-sDEVICE=jpeg`。

有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:31:54.783

Ghostscript 不会添加边距，当然也不会添加透明边距。问题不在于 Ghostscript，而在于您的 PDF 文件。您的文件包含：

/MediaBox [0 0 595 842] /CropBox [27.5 61.0 567.5 781.0]

Ghostscript 使用 MediaBox，其他查看者可能使用也可能不使用 CropBox。如果您阅读 GS 文档，您会发现 -dUseCropBox 开关指示 GS 在设置媒体大小时使用 PDF 文件的 CropBox 而不是 MediaBox。

-dEPSCrop 根本不会对 PDF 文件做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:31:17.217

作为记录，如果有人遇到同样的问题，我只是找到了正确的开关：`-dUseCropBox`. 现在的最终命令是：

```
$ gs -q  -dUseCropBox -dNOPAUSE -dBATCH -sDEVICE=pngalpha -dLastPage=1 -sOutputFile='test.png' 'test2.pdf' 
```

# python - 软糖嘲笑 datetime.now

> ID：14454184
> 
> 赞同：1
> 
> 时间：2013-01-22T08:17:25.737
> 
> 标签：python, unit-testing

我想使用模拟库来替换结果`datetime.now()`来测试一些逻辑。所以我现在正在使用`mocker`它并且效果很好，但是我遇到了一些问题，也许是错误，所以我想继续更新一些东西。谷歌建议使用`fudge`所以......我不能让它嘲笑`datetime.now()`

```
from one import ClassName
def test_fudge():
    import fudge

    @fudge.patch('datetime.datetime.now')
    def a(dtn):
        dtn.expects_call().returns(1)
        print 'fudge:', 'yep' if ClassName().one() == 1 else 'nope'
    a()
test_fudge() 
```

one.py 文件：

```
from datetime import datetime, timedelta
class ClassName(object):
    def one(self):
        return datetime.now() 
```

结果：`fudge: nope`

有任何想法吗？

**嘲笑者的例子**：

```
import mocker
from one import ClassName
m = mocker.Mocker()
n = m.replace('datetime.datetime')
n.now()
m.result(123)
with m:
    print ClassName().one() 
```

**one.py**是一样的。结果：123

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:33:35.883

这是由于您在*one.py*`datetime`中导入模块的方式。相反，试试这个：

 *```
import datetime
class ClassName(object):
    def one(self):
        return datetime.datetime.now() 
```

这是由于 Python 导入的工作方式而出现的问题。如果您使用不同的模拟库（例如`mock`.

我会尝试解释，但在 StackOverflow 的某个地方有更好的答案，我找不到我想要的答案。

使用时`from datetime import datetime`，`datetime`会导入包并将`datetime.datetime`类引用绑定在*one.py*的本地范围内。

然而， fudge 被覆盖的名称是，它与*one.py*`datetime.datetime.now()`上的本地绑定的名称不同，因此不会发生修补。

 *换句话说，当`test_fudge()`运行时它正在寻找修补名称`datetime.datetime.now`，它如何知道*one.py*`datetime`中的名称与运行时引用的对象相同？*`datetime.datetime`***

# c# - 从 javascriptserializer 反序列化数据表中的 json

> ID：14454190
> 
> 赞同：1
> 
> 时间：2013-01-22T08:18:04.820
> 
> 标签：c#, .net, json

嗨，我必须将`json`数据解析为`datatable`对象。贝娄是我的`json`数据

```
{

"Figurative Expressions (Idioms)" : {

 "A" : [
         {
            "One word" : "Above all",
            "Phrase" : "chiefly, before everything else"
         },
         {
            "One word" : "Above-board",
            "Phrase" : "not open to question, honest, straight-forward, beyond reproach"
         },
         {
            "One word" : "Above-par",
            "Phrase" : "of superior quality"
         },
         {
            "One word" : "On account of ",
            "Phrase" : "for the sake of"
         },
         {
            "One word" : "On no account",
            "Phrase" : "not for any reason"
         },
         {
            "One word" : "To give a good account of oneself",
            "Phrase" : "to act with credit to oneself"
         }
      ]
   }

} 
```

我们如何解析这些`json`数据`datatable`？

当我尝试使用 时`javascriptserializer`，它被成功解析，但没有得到任何东西`datatable`。

```
JavaScriptSerializer js = new JavaScriptSerializer(); 
DataTable data1 = js.Deserialize<DataTable>(text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:06:13.030

这可能是因为您示例中的 Json 不是纯数组 - 而是具有一个名为 A 的属性的对象，这是实际数组。

我的建议是尝试仅反序列化定义 A 属性的文本（以方括号开头） - 如此纯 Json 数组。这应该反序列化为 Datatable 罚款。

# node.js - 是否可以在 Node.Js 中显示异步方法的实际进度

> ID：14454193
> 
> 赞同：0
> 
> 时间：2013-01-22T08:18:17.137
> 
> 标签：node.js, socket.io

我现在在 html 用户界面上显示移动进度线的简单 .gif 图像。这不会显示服务器上发生的实际进度（百分比）。我正在从带宽较低的服务器（MongoDB）中检索数据。

我有两个选择：

1.在用户界面上显示简单的加载/进度.gif图像，然后在服务器端进程完成后向用户弹出一条消息，说明它已完成。

2.当服务器端有相当大的进展时，可以以百分比向用户显示并行更新。

有一些node-upload-progress，node-progress。但是如何将它们与长时间运行的 MongoDB 查询一起使用。（而不是 node-upload-progress 的文件上传）。如何实现（第二选择）在 UI 上显示并行进度，是否可以在 Node.Js 中显示异步方法的实际进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:59:36.613

为此，我使用了[socket.io 。](http://socket.io)这是我提到的一个演示应用程序（[链接）。](https://github.com/dotcloud/socket.io-on-dotcloud)

因此，在服务器端每完成 5% 的进程时发出一个事件，并在客户端侦听以更新进度条上的百分比。

[如果Node.js](http://www.thefreedictionary.com/techie)存在任何其他有效的替代方案来实现相同的效果，欢迎技术人员回答

# c++ - Loki 序列可以有多少个元素？

> ID：14454198
> 
> 赞同：2
> 
> 时间：2013-01-22T08:18:33.063
> 
> 标签：c++, boost-mpl, loki, typelist

我知道 boost MPL 列表或向量的最大长度是半可定义的，但是在大约 30 个元素之后，编译器讨厌我。Loki 序列可以有多少个元素，用户可以定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:27:02.167

该[实现](http://loki-lib.sourceforge.net/html/a00681.html)显示了 18 个隐藏模板参数，所以这应该是上限

```
 template
     <
         typename T1  = NullType, typename T2  = NullType, typename T3  = NullType,
         typename T4  = NullType, typename T5  = NullType, typename T6  = NullType,
         typename T7  = NullType, typename T8  = NullType, typename T9  = NullType,
         typename T10 = NullType, typename T11 = NullType, typename T12 = NullType,
         typename T13 = NullType, typename T14 = NullType, typename T15 = NullType,
         typename T16 = NullType, typename T17 = NullType, typename T18 = NullType
     > 
     struct MakeTypelist { /* stuff */ }; 
```

# asp.net - 导入 Excel 工作表

> ID：14454200
> 
> 赞同：0
> 
> 时间：2013-01-22T08:18:56.323
> 
> 标签：asp.net

我想上传文件，但如果我选择了浏览文件然后点击它显示`Page not found error`我想上传文件但点击如果我选择浏览文件然后点击它显示页面未找到错误但是当我点击上传按钮时没有选择一个文件将我重定向到页面并通过异常`could not find a part of a path`在 Asp.net C#

```
protected void UploadFile_Click(object sender, EventArgs e)
        {
            if (!FileUpload1.HasFile)
            {

                string path = string.Concat(Server.MapPath("~/ExcelSheets/" + FileUpload1.FileName));

                FileUpload1.SaveAs(path);

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:13:44.687

应该是这个

```
if (!FileUpload1.HasFile) 
```

改成这个

```
if (FileUpload1.HasFile) 
```

当没有要上传的文件时，您正在尝试保存文件

# backbone.js - 将 Backbone 应用程序作为独立的 JS 应用程序运行 - 路由不起作用

> ID：14454201
> 
> 赞同：2
> 
> 时间：2013-01-22T08:19:01.173
> 
> 标签：backbone.js, trigger.io, backbone-routing

目前，我将骨干网作为我的 rails 3.2 应用程序的前端运行。我需要将它迁移到一个独立的 JS 应用程序中，作为我将它作为 Trigger.io 的一部分的一部分。

它现在作为自己的 index.html 文件存在，引用 assets 文件夹。

当我打开文件时，它会加载 Backbone 模块，但页面仍然是空的。当我运行 fetch() 命令时，它

所以，我得到了几个qns：

* * *

1）如何触发路由，使其默认进入指定页面？

我知道它会在 Backbone.History.Start 中触发，但我不确定在那之前该怎么做。

* * *

2）网址是“file://localhost/Users/mingyeow/Desktop/index.html”

如何手动设置根 url 以使用 localhost:3000/我的网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:35:41.110

```
// define router
var Router = Backbone.Router.extend({
  routes : {
    'index' : 'indexAction',
    '*default' : '_defaultAction'
  },
  indexAction : function() {
    // this will be executed when user navigate to #index
  },
  _defaultAction : function() {
    // this will be executed when user navigate anywhere else (#XXX)
  }
});

// on document ready
$(function() {
  // initialize router
  new Router();
  // and start history
  Backbone.history.start();
}); 
```

[您可以通过这种方式](http://backbonejs.org/#Router-navigate)导航。

或点击链接：`<a href="#index"">Index route</a>`

* * *

您可以使用 python 服务器。要启动它，请在终端中输入：

```
$ python -m SimpleHTTPServer 
```

并检查`http://localhost:8000`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:05:47.833

1) 要触发路由更改，您只需通过 href 或 JavaScript（如 window.location）导航到页面。阅读[Backbone Routes](http://backbonejs.org/#Router-routes)但本质上您需要为每个“页面”编写一个函数。每个函数都应该负责呈现页面。

2）这应该很简单。您需要一个本地 Web 服务器。我最近开始做的只是拥有一个简单的 Node 服务器。Node 非常易于安装，值得一试。下载一个静态网络服务器，例如[我制作的这个](https://github.com/ix-xerri/pong/blob/master/server.js)。要使用它，只需将您的主干应用程序放在名为“public”的目录中，然后在节点中运行 server.js。如果您不想这样做，您可以运行一个简单的 LAMP/WAMP/MAMP 安装并设置 Apache Web 服务器的根目录。

# xcode - 工具栏上的标签

> ID：14454210
> 
> 赞同：0
> 
> 时间：2013-01-22T08:19:29.320
> 
> 标签：xcode, interface-builder, label, toolbar

是否可以在工具栏上使用标签？我想在标签中显示一个数字。在视图中很容易，但现在我希望它显示在工具栏中。我可以将标签拖到工具栏上，没问题，但是那里看不到内容，即使名称Label在IB中可见。

更多信息：如果我将标签拖到单个视图的工具栏中，它可以完美地显示标签中的任何文本或数字，即使在工具栏中也是如此。但我似乎遇到的问题是，如果视图是滚动视图，它在工具栏上不起作用！按钮，条形按钮，没问题，但是当我运行应用程序时，标签不显示。

如果视图是滚动视图，为什么工具栏项的行为会有所不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:02:51.037

最好不要为工具栏使用标签，而是使用 UIBarButtonItem。然后您选择 IB 纯样式，您可以在标题中显示文本。

# linux - 在 Unix 中从文件中读取文件名并将文件从一个位置移动到另一个位置

> ID：14454212
> 
> 赞同：-2
> 
> 时间：2013-01-22T08:19:42.550
> 
> 标签：linux, shell, unix

我有一个包含文件名的文件。我想从该文件中读取这些文件名并将它们移动到特定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:23:18.073

您可以使用一个简单的循环：

```
#!/bin/bash

while read -r filename; 
do
  mv "$filename" /DESTINATION/PATH/
done < input_filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:36:42.257

```
awk '{old=$0;new=/path/pathsub/;system("mv \""old"\" "new)}' your_file_with_file_list 
```

# maven - 将 maven 项目部署到现有的 Tomcat 服务器中

> ID：14454215
> 
> 赞同：4
> 
> 时间：2013-01-22T08:19:52.993
> 
> 标签：maven, tomcat, deployment, pom.xml

目前我的项目设置是这样的，当我在我的 maven 项目上进行清理和安装时，它会下载 pom.xml 中提到的 tomcat 版本并将war文件部署到它上面。

我需要更改配置，以便将战争文件部署到我手动下载的 tomcat 上，而不是一个 maven 下载。这是为了利用我为手动下载的 tomcat 配置的设置。

可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:26:30.530

你可以试试[tomcat-maven-plugin](http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html)，它可以让你通过 context.xml、exploded war 或简单的 war 文件部署到现有的 tomcat 实例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:56:00.550

我知道你可能想要一个`Maven`-only 答案 - 我也这样做了。但是，我发现最简单但最灵活的做法是使用 Maven 构建战争，并使用`ANT`. tomcat-maven-plugin 对我来说不够强大，因为我需要将 .war 部署到本地`Tomcat`安装和使用`scp`.

这是我的`ANT` `build.xml`文件的样子：

```
<?xml version="1.0"?> 
```

```
<target name="deploy_local">
    <echo>Deploying .war to local Tomcat</echo>
    <copy file="target/My.war" todir="/tomcat/webapps">
    </copy>
</target>

<target name="deploy_production">
    <echo>Deploying .war to production Tomcat</echo>
    <move file="target/My.war" tofile="target/ROOT.war"/>
    <scp file="target/ROOT.war"
        trust="true"
        todir="me:password@154.14.232.122:/tomcat/webapps"
        port="22">
    </scp>
</target> 
```

您可以看到我什至将 .war 文件从 My.war 重命名为 ROOT.war 以用于生产部署。

完整的过程是：`mvn clean package`然后运行本地或生产`ANT`目标以进行部署。

# spring - 无法将作业参数传递给步骤 - Spring BatchJobs

> ID：14454218
> 
> 赞同：0
> 
> 时间：2013-01-22T08:19:57.057
> 
> 标签：spring, spring-batch

我们正在实施 Spring Batch Jobs，

我们需要将作业参数从 Client/MASTER 传递给 SLAVE。CLIENT/MASTER 是我们的作业和分区代码所在的位置。我们使用传递 JOB PARAMETER 的 J Unit 调用 JOB。

SLAVE 是定义所有步骤及其实现（读取器写入器和处理器）的位置。

我们能够以独立的方式实现这一点，但不能使用客户端和服务器的方式。我不确定为什么我们无法实现我们的设置，而我们能够在独立中实现？

我们正在使用 Weblogic 和 Spring Integration 以及 JMS 来实现相同的目标

请协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:05:15.373

我们可以在我们的 bean 配置文件中解决这个问题，如下所示：

```
<property name="load" value="#{jobParameters[load]}"></property> 
```

load 是从我们的 Shell 脚本传递的

**./esk200.sh esk200-context.xml TIMESTAMP load=full**

# emacs - 如何突出显示emacs中的特定行？

> ID：14454219
> 
> 赞同：14
> 
> 时间：2013-01-22T08:20:13.523
> 
> 标签：emacs, bookmarks

我需要突出显示 emacs 的功能，以便在使用它时标记文件中的某些行。它应该有点像`M-s h l`，但应该基于行号，而不是正则表达式。我想突出显示当前行，但`hl-line-mode`不适合，因为我需要突出显示许多行，每次按每个特定键时。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T08:58:02.053

我只是快速写了以下内容：

```
(defun find-overlays-specifying (prop pos)
  (let ((overlays (overlays-at pos))
        found)
    (while overlays
      (let ((overlay (car overlays)))
        (if (overlay-get overlay prop)
            (setq found (cons overlay found))))
      (setq overlays (cdr overlays)))
    found))

(defun highlight-or-dehighlight-line ()
  (interactive)
  (if (find-overlays-specifying
       'line-highlight-overlay-marker
       (line-beginning-position))
      (remove-overlays (line-beginning-position) (+ 1 (line-end-position)))
    (let ((overlay-highlight (make-overlay
                              (line-beginning-position)
                              (+ 1 (line-end-position)))))
        (overlay-put overlay-highlight 'face '(:background "lightgreen"))
        (overlay-put overlay-highlight 'line-highlight-overlay-marker t))))

(global-set-key [f8] 'highlight-or-dehighlight-line) 
```

（这里的 find-overlays-specifying 来自[手册页](http://www.gnu.org/software/emacs/manual/html_node/elisp/Finding-Overlays.html#Finding-Overlays)）

它将突出显示当前行，再次使用时会将其删除。

也许以下内容也可能有用：从缓冲区中删除所有突出显示（可能很危险，如果您突出显示重要的事情，您可能不想要它）

```
(defun remove-all-highlight ()
  (interactive)
  (remove-overlays (point-min) (point-max))
  )

(global-set-key [f9] 'remove-all-highlight) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T09:05:25.567

您可以使用[bm.el](https://github.com/joodland/bm)。您可以从 MELPA 安装 bm.el。

bm.el 提供`bm-toggle`突出显示和取消突出显示当前行。bm.el 还提供了`bm-bookmark-regexp`仅突出显示匹配的行。`bm-previous`您可以通过and在突出显示的行之间跳转`bm-next`

以下是 bm.el 的示例配置

```
(require 'bm)
(global-set-key (kbd "<f5>") 'bm-toggle)
(global-set-key (kbd "<f6>") 'bm-previous)
(global-set-key (kbd "<f7>") 'bm-next)
(global-set-key (kbd "<f8>") 'bm-bookmark-regexp) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-26T06:15:06.480

[Bookmark+](https://www.emacswiki.org/emacs/BookmarkPlus)可以满足您的要求。使用[`C-x p RET`](https://www.emacswiki.org/emacs/BookmarkPlus#AutonamedBookmarks)（默认情况下）在点设置书签。您可以为此类书签配置所需的[突出显示类型。](https://www.emacswiki.org/emacs/BookmarkPlus#DefiningHowtoHighlight)这类似于`bm.el`提供的（syohex 的答案），但更灵活。

# android - 如何删除recentTaskInfo的数据？

> ID：14454222
> 
> 赞同：0
> 
> 时间：2013-01-22T08:20:22.517
> 
> 标签：android, process, task

我已经杀死了后台进程，但`recentTaskInfo`仍然存在活动信息。我知道进程和活动返回堆栈是不同的，但不知道如何从这个堆栈中删除活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:22:42.580

从此堆栈中删除活动。

只需使用

```
MyActivity.this.finish(); 
```

有关更多信息，请参阅此链接 [http://developer.android.com/reference/android/app/Activity.html#finish%28%29](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

**编辑**

有关 Android 中的任务和返回堆栈的所有内容，包括您的问题，都可以在这里找到：http: [//developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)。

# javascript - 当有多个 http URL 时使用正则表达式获取 http URL

> ID：14454230
> 
> 赞同：1
> 
> 时间：2013-01-22T08:20:46.610
> 
> 标签：javascript, regex

我想为一个项目从不同站点提取不同的 .swf 文件。不同的站点使用不同的源方法，所以我不能在我的正则表达式中使用`src=`或`data=`。

我可以将文件名与 匹配`/[\w-]+.swf/g`，但是当我尝试匹配`http(.*?).swf`以 http 开头的完整路径（）时，它会匹配路径之前的另一个 http（代码中的第一个）。我也不能使用`src=`或`data=`等，它必须只是链接。

基本上，有没有办法将匹配限制为向后搜索时找到的第一个 http？

如果有人愿意看一下，那么这里是代码： http: [//pastebin.com/kT20UqqJ](http://pastebin.com/kT20UqqJ)。这里是测试正则表达式的好地方：[http ://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:41:00.013

尝试以下一种：

```
var regex = /http:[\.\/\w-%]+\.swf/g 
```

您需要转义`.`else 它将匹配任意字符，并且`/`因为它是表达式分隔符。

您可以在此处查看**[工作示例](http://jsfiddle.net/tEWqA/)**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T08:45:43.277

如果您有 url 编码字符（如空格）`%`，您的 url 中也会有 a。

这是一个适用于这种情况的示例：`/http:[\./\w%-]+\.swf/g`

这是一个可以测试正则表达式的工具：[http ://regexpal.com/](http://regexpal.com/)

还有一个你可以检查它的性能的地方：[http ://regexter.com/](http://regexter.com/)

# php - 查找数据库和 mysql 文件之间的差异

> ID：14454242
> 
> 赞同：0
> 
> 时间：2013-01-22T08:21:47.947
> 
> 标签：php, mysql

我有一个数据库和同一个数据库的 mysql 文件，并进行了一些修改（某些表可能已添加，有些可能已删除，表结构，某些表定义可能已更改）。如何使用（仅结构）查找两个数据库及其表之间的更改`PHP`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:35:54.497

我前段时间做过这种。归结为拥有两个数据库，将它们转储到一个文件中，然后将它们与 进行比较，并`diff`针对数据库名称等已知差异进行调整。

还有一些工具可以通过查询两个数据库并允许同步差异来交互地执行此操作。

不过，我不知道将转储文件与数据库进行比较的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:32:59.117

这是一个 MySQL 程序，正是这样做的：[http ://www.artfulsoftware.com/infotree/qrytip.php?id=624](http://www.artfulsoftware.com/infotree/qrytip.php?id=624)

希望它有所帮助（PS：这里有很多有用的查询：www.artfulsoftware.com/infotree/queries.php）

PS：要在 PHP 中获取数据，只需运行查询并获取信息，然后用它做任何你想做的事情。

PS2：将旧数据库转储导入另一个数据库，然后使用此过程比较数据库。

# php - 将非十进制数转换为十进制数

> ID：14454243
> 
> 赞同：1
> 
> 时间：2013-01-22T08:21:48.823
> 
> 标签：php

我想知道（因为我目前不知道也找不到答案）如何将没有小数点的数字变成带小数点的数字。

这就是我想要发生的事情。

```
Input         Output
1.20          1.20
1234          0.1234
0.23456       0.23456
4321          0.4321 
```

所以基本上我需要一个接受输入数字（来自表单字段、变量或其他）的 PHP 函数，如果一个整数在开头添加 0.（零点）。如果输入的数字已经按原样保留了小数点（之后我将使用 number_format）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:25:56.507

这个简单的解决方案应该可以做到。

```
function to_decimal($in){
    return (stripos($in, ".")!==false)? $in: "0.".$in;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:24:51.757

[你可以用is_float](http://php.net/manual/en/function.is-float.php)做这样的事情

```
if (!is_float($input))
{
  $result = "0." . $input
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:25:00.913

试试这个

```
function dPoint($number)
{
    if(is_float($number))
    {
    return $number;
    }
    else
    {
    return "0.".$number;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T08:29:28.777

这是我没有蹩脚字符串连接的解决方案

```
function leadingZero($num) {
  if (!ctype_digit($num)) {
     return $num/pow(10, strlen($num));
  }
  return $num;
}
// php> =leadingZero(4652)
// 0.4652
// php> =leadingZero(0.2)
// 0.2 
```

# c# - 带有事件的套接字包装器

> ID：14454244
> 
> 赞同：0
> 
> 时间：2013-01-22T08:21:53.180
> 
> 标签：c#, sockets, events, wrapper

如何以适当的方式为服务器设计一个由简单的客户端消息管理的类？该服务器使用事件模型来通知父应用程序有关客户端请求。它使用异步套接字。服务器负载可能非常有限。

这是我会尝试的：

```
class Client
{
private Socket sock;

public event EventHandler Start;
public event EventHandler Stop;
public event RequestEventHandler Request;

public Client(TcpClient Client)
//sock.BeginReceive

private void OnReceived(IAsyncResult ar)
//Dissect incoming stream into messages
//Call event handlers
//sock.BeginReceive

public void AnswerRequest(byte[] answer) //either this way or
private void OnSend(IAsyncResult ar)     //direct call of sock.BeginSend
}

class Server
{
private TcpListener Listener;
public List<Client> Clients;

public event EventHandler ClientConnected;

public Server(int port)
//Listener.BeginAcceptTcpClient

private void AcceptTcpClientCallback(IAsyncResult ar)
//Get TcpClient
//Create new Client with TcpClient as a parameter
//Launch ClientConnected, where one should sign for Client events
//Listener.BeginAcceptTcpClient
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:25:55.233

我正在使用 nito 异步库，它有 simpleserversocket 和简单的客户端。非常容易使用。 [Nito 异步](http://nitoasync.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:18:33.950

```
 How would one design a class for server, which is managed by simple client messages,
   in a proper way? 
```

这取决于使用哪种 I/O 策略。与 Winsock 通信有几种不同的约定，每种方法都有明显的优势。

*   阻塞套接字
*   纯非阻塞套接字
*   异步套接字
*   选择（）
*   事件对象
*   重叠 I/O

异步客户端套接字的类设计：使用回调添加 Stateobject。从客户端套接字读取数据需要一个在异步调用之间传递值的状态对象。

```
 public class StateObject 
         {
            public Socket workSocket = null; 
            public const int BufferSize = 256;   
            public byte[] buffer = new byte[BufferSize];
            public StringBuilder sb = new StringBuilder();
         } 
```

来源：有关详细设计，[请参阅 msdn 示例](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)。

# php - 如何升级libssl0.9.8安装php5-fpm

> ID：14454250
> 
> 赞同：2
> 
> 时间：2013-01-22T08:22:23.533
> 
> 标签：php, libssl

我需要在已经配置了 ROR 和 nginx 的服务器上设置 php。

当我安装 php5-fpm 时，有一个包 libssl0.9.8 版本依赖项。

我进行了很多搜索并尝试删除并重新安装软件包 libssl0.9.8 但版本未更新。

尝试安装 php5-fpm 时出现以下错误。

```
root@boxyroom:~#  sudo apt-get install php5-fpm -f
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
  php5-fpm: Depends: libssl0.9.8 (>= 0.9.8m-1) but 0.9.8k-7ubuntu8.13 is to be installed
            PreDepends: dpkg (>= 1.15.7.2) but 1.15.5.6ubuntu4.6 is to be installed
E: Broken packages 
```

请让我知道是否有人有安装 php5-fpm 或升级包 libssl0.9.8 的想法。

提前致谢 。

# jsf - 如何比较 EL 中的 char 属性

> ID：14454261
> 
> 赞同：8
> 
> 时间：2013-01-22T08:23:20.327
> 
> 标签：jsf, char, el

我有一个如下所示的命令按钮。

```
<h:commandButton value="Accept orders" action="#{acceptOrdersBean.acceptOrder}"
   styleClass="button" rendered="#{product.orderStatus=='N' }"></h:commandButton> 
```

即使`product.orderStatus`值等于`'N'`命令按钮也不会显示在我的页面中。

这`product.orderStatus`是一个字符属性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T11:34:11.097

# wordpress - 将图标分配给自定义帖子类型的类别

> ID：14454263
> 
> 赞同：0
> 
> 时间：2013-01-22T08:23:24.753
> 
> 标签：wordpress, plugins

我有自定义帖子类型。我想为自定义帖子类型的每个类别分配一个图标。我为此使用了类别和页面图标插件。但它不适用于自定义帖子类型。是否有任何用于自定义帖子类型类别的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:41:14.857

插件[高级自定义字段](http://www.advancedcustomfields.com/)能够做到这一点。它是一个非常好的插件，编码、文档和维护都很好。

在我的开发安装中进行快速测试。

**设置字段：**

> [![现场设置](../Images/75c96cc214eaf810a954c4c1f28e3fe4.png)](https://i.stack.imgur.com/DUckp.png)

**自定义分类屏幕中的结果**

> [![acf 自定义税务结果](../Images/c66b2b303c9acf647dea3b5700f29559.png)](https://i.stack.imgur.com/yy9rO.png)

# ios - 如何防止 Mobile Safari 访问网络以获取缓存的 web 应用程序？

> ID：14454265
> 
> 赞同：2
> 
> 时间：2013-01-22T08:23:31.457
> 
> 标签：ios, web-applications, mobile-safari

我有一个简单的网络应用程序，我想在本地使用（即我不希望它访问网络）。所有代码均根据 Safari Web Content Guide 打包。我成功地将我的网络应用程序下载到我的 iPhone 上。不过，我注意到，即使我的网络应用程序没有远程连接到任何东西，也会有网络访问（网络访问指示器会触发）。

我怀疑 iOS 正在检查网络应用程序是否新鲜（即检查缓存清单以查看它是否需要更新任何文件）。有没有办法防止这种情况？它真的搞砸了用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:24:22.963

永无止境的网络微调器是 iOS 中的一个错误；您将无法使用网络应用程序解决它：

[http://www.devthought.com/2012/09/22/understanding-the-ios6-ajax-bugs/](http://www.devthought.com/2012/09/22/understanding-the-ios6-ajax-bugs/)

# architecture - 一个人可以同时兼任“项目经理”和“软件架构师”吗？

> ID：14454267
> 
> 赞同：1
> 
> 时间：2013-01-22T08:23:49.557
> 
> 标签：architecture, project-management, roles

一个人是否可以在同一个项目中同时担任“项目经理”和“软件架构师”这两个角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:30:05.773

TL;DR 的答案是：是的，他们*可以*；这是*可能的*。

他们是否*应该*是一个不同的问题。

我认为这两个角色应该是独立的，因为他们需要对项目有两种截然不同的观点，并且可能对遵循的方法持有相互矛盾的意见。

当然，你需要决定谁拥有决定性的一票……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T07:09:12.657

出于不同的原因，一切皆有可能。然而，这是不可取的，因为在 RACI（角色、责任、咨询、知情）矩阵中，这会产生并维持潜在的冲突，因为各个角色有不同的驱动因素和动机。根据我的经验，这并不奏效，我不得不恢复由建筑师管理的项目，因为他们的重点和动机与项目生命周期不同。

# mongodb - 在 Mongo / Mongoose 中自动增加文档编号

> ID：14454271
> 
> 赞同：8
> 
> 时间：2013-01-22T08:23:55.517
> 
> 标签：mongodb, mongoose

我的应用程序有几个用户，每个用户都有文档。每个文档都需要有一个序列号，可能看起来像这样：2013-1、2013-2（年份和序列号），或者只是一个简单的数字：1、2、3...

目前，我在创建 Mongoose 文档时从用户设置中分配序列号。根据该序列号和用户设置的数字格式，我正在生成最终的文档编号。

我意识到，当同时创建 2 个文档时，它们将获得完全相同的编号，因为我在保存文档后在设置中增加了序列号。但是我在创建（尚未保存）文档时分配了序列号，因此两个文档的序列号将完全相同。

我显然需要一种方法来处理这个序列号在保存时自动递增......

我如何确保这个数字是唯一的并且自动递增/生成？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T13:12:21.640

@emre 和 @WiredPraire 为我指明了正确的方向，但我想为我的问题提供一个完全兼容 Mongoose 的答案。我最终得到了以下解决方案：

```
var Settings = new Schema({
  nextSeqNumber: { type: Number, default: 1 }
});

var Document = new Schema({
  _userId: { type: Schema.Types.ObjectId, ref: "User" },
  number: { type: String }
});

// Create a compound unique index over _userId and document number
Document.index({ "_userId": 1, "number": 1 }, { unique: true });

// I make sure this is the last pre-save middleware (just in case)
Document.pre('save', function(next) {
  var doc = this;
  // You have to know the settings_id, for me, I store it in memory: app.current.settings.id
  Settings.findByIdAndUpdate( settings_id, { $inc: { nextSeqNumber: 1 } }, function (err, settings) {
    if (err) next(err);
    doc.number = settings.nextSeqNumber - 1; // substract 1 because I need the 'current' sequence number, not the next
    next();
  });
}); 
```

请注意，使用此方法无法要求模式中的数字路径，也没有任何意义，因为它是自动添加的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T00:51:08.100

您可以通过以下方式实现：

1.  创建*序列生成器*，它只是另一个保存最后一个数字的计数器的文档。
2.  使用*mongoose 中间件*来更新所需字段的自动增量。

这是一个使用 todo 应用程序的工作和测试示例。

```
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/todoApp');

// Create a sequence
function sequenceGenerator(name){
  var SequenceSchema, Sequence;

  SequenceSchema = new mongoose.Schema({
    nextSeqNumber: { type: Number, default: 1 }
  });

  Sequence = mongoose.model(name + 'Seq', SequenceSchema);

  return {
    next: function(callback){
      Sequence.find(function(err, data){
        if(err){ throw(err); }

        if(data.length < 1){
          // create if doesn't exist create and return first
          Sequence.create({}, function(err, seq){
            if(err) { throw(err); }
            callback(seq.nextSeqNumber);
          });
        } else {
          // update sequence and return next
          Sequence.findByIdAndUpdate(data[0]._id, { $inc: { nextSeqNumber: 1 } }, function(err, seq){
            if(err) { throw(err); }
            callback(seq.nextSeqNumber);
          });
        }
      });
    }
  };
}

// sequence instance
var sequence = sequenceGenerator('todo');

var TodoSchema = new mongoose.Schema({
  name: String,
  completed: Boolean,
  priority: Number,
  note: { type: String, default: '' },
  updated_at: { type: Date, default: Date.now }
});

TodoSchema.pre('save', function(next){
  var doc = this;
  // get the next sequence
  sequence.next(function(nextSeq){
    doc.priority = nextSeq;
    next();
  });
});

var Todo = mongoose.model('Todo', TodoSchema); 
```

您可以在节点控制台中对其进行测试，如下所示

```
function cb(err, data){ console.log(err, data); }
Todo.create({name: 'hola'}, cb);
Todo.find(cb); 
```

随着每个新创建的对象，您将看到优先级增加。干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T08:40:09.767

此代码取自[MongoDB](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)手册，它实际上描述了使 _id 字段自动递增。但是，它可以应用于任何领域。您想要的是在插入文档后检查插入的值是否存在于数据库中。如果它已经插入，重新增加值然后尝试再次插入。通过这种方式，您可以检测重复值并重新增加它们。

```
while (1) {

    var cursor = targetCollection.find( {}, { f: 1 } ).sort( { f: -1 } ).limit(1);

    var seq = cursor.hasNext() ? cursor.next().f + 1 : 1;

    doc.f = seq;

    targetCollection.insert(doc);

    var err = db.getLastErrorObj();

    if( err && err.code ) {
        if( err.code == 11000 /* dup key */ )
            continue;
        else
            print( "unexpected error inserting data: " + tojson( err ) );
    }

    break;
} 
```

在此示例中， f 是文档中要自动递增的字段。要完成这项工作，您需要使您的字段 UNIQUE 可以使用索引来完成。

```
db.myCollection.ensureIndex( { "f": 1 }, { unique: true } ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-19T17:51:49.790

您可以`mongoose-auto-increment`按如下方式使用包：

```
var mongoose      = require('mongoose');
var autoIncrement = require('mongoose-auto-increment');

/* connect to your database here */

/* define your DocumentSchema here */

autoIncrement.initialize(mongoose.connection);
DocumentSchema.plugin(autoIncrement.plugin, 'Document');
var Document = mongoose.model('Document', DocumentSchema); 
```

您只需要初始化`autoIncrement`一次。

# c++ - vector 的 push_back 错误背后的原因是什么

> ID：14454272
> 
> 赞同：5
> 
> 时间：2013-01-22T08:23:56.463
> 
> 标签：c++

我有一个简单的 c++ std::vector 在里面，我正在存储线程，如下所示。您能否解释一下为什么带有注释“不编译”的行在编译期间显示错误？以及为什么带有注释“编译”的行有效？

```
#include<thread>
#include<vector>

using namespace std;
void abc() {}
int main()
{
   vector<thread> workers;
   workers.push_back(thread(abc)); // compiles
   thread t(abc);
   workers.push_back(t); // does not compile

   return 0;
 } 
```

更新：我在 linux 上使用 g++ 4.4.6。下面是错误

```
[jim@cola c++]$ g++ -std=c++0x -pthread -g -Wall t.cpp -o t
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/x86_64-redhat-linux/bits/c++allocator.h:34,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/allocator.h:48,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/string:43,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/locale_classes.h:42,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ios_base.h:43,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ios:43,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:40,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/iostream:40,
                 from t.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/thread: In member function ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Tp*, const _Tp&) [with _Tp = std::thread]’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_vector.h:737:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = std::thread, _Alloc = std::allocator<std::thread>]’
t.cpp:29:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/thread:122: error: deleted function ‘std::thread::thread(const std::thread&)’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ext/new_allocator.h:105: error: used here
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/vector:69,
                 from t.cpp:4:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/thread: In member function ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(__gnu_cxx::__normal_iterator<typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer, std::vector<_Tp, _Alloc> >, _Args&& ...) [with _Args = const std::thread&, _Tp = std::thread, _Alloc = std::allocator<std::thread>]’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_vector.h:741:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = std::thread, _Alloc = std::allocator<std::thread>]’
t.cpp:29:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/thread:122: error: deleted function ‘std::thread::thread(const std::thread&)’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/vector.tcc:314: error: used here 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T08:27:15.467

您收到错误是因为`std::thread`不可复制*，*并且您正在尝试将副本`t`插入向量中。

完成这项工作的唯一方法是：

```
workers.push_back(std::move(t)); 
```

然而，这意味着在你这样做之后，`t`不再代表一个线程（它所代表的线程被移动到向量中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:28:20.563

原因是它`std::thread`有一个移动构造函数，但没有一个复制构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T10:20:22.310

这是一种既不需要复制也不需要移动的更清洁、更快速的解决方案：

```
workers.emplace_back(abc); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T08:28:22.083

因为`std::thread`is not **copyable**，您可以将其移至 vector ：

```
 thread t(abc);
   workers.push_back(std::move(t)); 
```

更好的解决方案是将智能指针存储在向量中：

```
std::vector<std::shared_ptr<std::thread>> workers; 
```

因为在使用 lambda 时，无法捕获仅移动类型，因此解决方法是将仅移动类型存储在`std::shared_ptr<std::thread>`.

# c# - 如何在遵循 MVVM 设计模式的 WPF 应用程序中工作之前显示等待对话框？

> ID：14454274
> 
> 赞同：1
> 
> 时间：2013-01-22T08:24:08.247
> 
> 标签：c#, wpf, multithreading, mvvm

我正在开发一个遵循 MVVM 设计模式的 WPF 应用程序。对于线程，我打算使用 Backgroundworker。从视图模型中，我需要启动线程以执行耗时操作。请建议我如何在线程执行之前显示等待对话框。如果可能，请提供示例代码。问候， 阿尼尔班

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:28:52.820

您可以向 ViewModel 添加一个属性，指示后台工作程序（或其他异步操作）正忙。

视图可以绑定到此属性以显示进度条或其他忙碌指示符。

只需确保正确设置和重置属性即可。

**编辑**

请参阅此问题/答案以在 WPF 中制作模式对话框：[如何在 WPF 中制作模式对话框？](https://stackoverflow.com/questions/499294/how-do-make-modal-dialog-in-wpf)

作为替代方案，您可以使用此设置（伪代码）：

```
<Window>
    <Grid>
        <Grid x:Name="regularContent">
        </Grid>
        <Grid x:Name="Overlay" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <Progressbar Value="{Binding Path=Progress}" />
            </StackPanel>
        </Grid>
    </Grid>
</Window> 
```

后面的代码：

```
private void ShowPopup()
{
    RegularContent.IsEnabled = false;
    Overlay.Visibility = Visibility.Visible;
}

private void ClosePopup()
{
    RegularContent.IsEnabled = true;
    Overlay.Visibility = Visibility.Collapsed;
} 
```

确保禁用常规内容以防止用户使用标签。

您可以使用相同的结构来屏蔽视图的一部分，而不是像我所做的那样完全屏蔽它。

应该在 UI 线程上修改 ProgressBar 绑定到的 ViewModel 上的 Progress 属性。如果您正在使用将自动完成的后台工作程序，因为在 UI 线程上引发了 ReportProgress 事件。

如果您使用不同的方式创建工作线程，请确保您使用调度程序来更新 Progress 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:08:33.603

我在 Windows Phone 中使用它：

```
private readonly BackgroundWorker worker = new BackgroundWorker();
private PerformanceProgressBar loader = new PerformanceProgressBar();
worker.DoWork += worker_DoWork;
worker.RunWorkerCompleted += worker_RunWorkerCompleted;

private void worker_DoWork(object sender, DoWorkEventArgs e)
{
   bar.IsIndeterminate = true;
   Bar.Enabled = true;
}

private void worker_RunWorkerCompleted(object sender, 
                                       RunWorkerCompletedEventArgs e)
{
   bar.Enabled = false;
}

worker.RunWorkerAsync(); 
```

如果要定义一个 MVVM 结构： [PerformanceProgressBar "Invalid cross-thread access" 异常](https://stackoverflow.com/questions/8937525/performanceprogressbar-invalid-cross-thread-access-exception)

当然，类似的用户控件也存在于 WPF 中：[http ://wpftoolkit.codeplex.com/wikipage?title=Extended%20WPF%20Toolkit%20Controls](http://wpftoolkit.codeplex.com/wikipage?title=Extended%20WPF%20Toolkit%20Controls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:50:18.043

最简单的方法是使用 wpf busyindicator ( [http://elegantcode.com/2011/10/07/extended-wpf-toolkitusing-the-busyindicator/](http://elegantcode.com/2011/10/07/extended-wpf-toolkitusing-the-busyindicator/) )。

您可以将它绑定到模型模型中的一些 thread_is_busy_flag_property（我更喜欢通过定位器模式通过应用程序范围的资源访问的一些单音 - 它很容易在 xaml 和模型视图/代码后面共享）。

设置此标志时不要忘记线程安全（或者您可以使用[AutoResetEvent/ManualResetEvent](http://msdn.microsoft.com/en-us/library/3dasc8as%28VS.80%29.aspx)来捕获后台操作结束）。我建议使用 TPL 和任务（更强大的方式）而不是 BackgroundWorker/QueueUserWorkItem。

# asp.net-mvc - 为什么我的编辑器模板根本不渲染？

> ID：14454275
> 
> 赞同：1
> 
> 时间：2013-01-22T08:24:10.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

这是我的编辑器模板，用于显示固定的省份列表，每个省份都有一个复选框：

```
@model Comair.RI.UI.Models.ApplicantRelocateProvinceList
<table>
    <tr>
        <th style="display: none;"></th>
        <th>
            @Html.DisplayNameFor(model => model.HeaderItem.Province)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HeaderItem.WillRelocate)
        </th>
    </tr>
    @foreach (var item in Model.Items)
    {
        @Html.EditorFor(m => item)
    }
</table> 
```

这是`Model.Items`类型模型的编辑器模板：

```
@model Comair.RI.UI.Models.ApplicantRelocateProvinceItem
<tr>
    <td style="display: none;">
        @Html.HiddenFor(m => m.Id)
    </td>
    <td>
        @Html.DisplayFor(m => m.Province.Name)
    </td>
    <td>
        @Html.EditorFor(m => m.WillRelocate)
    </td>
</tr> 
```

我已经成功地将这个模型用于其他视图模型。这是`ApplicantRelocateProvinceList`模型：

```
public class ApplicantRelocateProvinceList : ViewModel
{        
    public ApplicantRelocateProvinceItem HeaderItem { get; set; }
    public ApplicantRelocateProvinceList()
    {
        HeaderItem = new ApplicantRelocateProvinceItem();
    }
    public void MapFromEntityList(IEnumerable<ApplicantRelocateProvince> applicantProvinces)
    {
        var service = new ProvinceService(DbContext);
        var selectedIds = applicantProvinces.Select(ap => ap.ProvinceId);
        Items = service.ReadProvinces()
                       .Where(i => !i.IsDeleted)
                       .Select(p => new ApplicantRelocateProvinceItem {Id = p.Id, Province = p, WillRelocate = selectedIds.Contains(p.Id)});
    }
    public IEnumerable<ApplicantRelocateProvinceItem> Items { get; set; }
} 
```

此代码读取我们九个省份的固定列表，以及申请人选择的可变省份列表。那些ID在申请者所在省份的固定省份被标记`WillRelocate`为真，以显示其复选框为选中状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:34:42.143

我认为问题可能出在这一行：

```
@Html.EditorFor(m => item) 
```

试试这个：

```
@Html.EditorForModel(item) 
```

类似的问题：[Why not use Html.EditorForModel()](https://stackoverflow.com/questions/6537220/why-not-use-html-editorformodel)

**添加：**

特殊文件夹必须命名`EditorTemplates`，父文件夹必须命名为控制器（例如`Home`）或`Shared`（对于所有控制器），视图名称必须`ApplicantRelocateProvinceItem.cshtml`为类名。

# angularjs - 与 ng-repeat 一起使用时，ui-bootstrap 工具提示不起作用

> ID：14454283
> 
> 赞同：3
> 
> 时间：2013-01-22T08:24:51.867
> 
> 标签：angularjs, tooltip, angular-ui

我想使用该`ui-bootstrap tooltip`指令将工具提示分配给由指令呈现的按钮数组`ng-repeat`，如下所示：

```
<button ng-repeat="label in labels" tooltip="{{label}}">{{label}}</button> 
```

但我面临一个奇怪的问题：ng-repeat 循环变量得到一个空白值，除了在工具提示本身中，例如在上面的示例中，标签值在按钮中将为空白。可以在[此链接](http://plnkr.co/edit/5LvfDXUcnvP6e7xDfW0T?p=preview)中看到显示该问题的片段。删除工具提示属性一切正常。有没有人一直在使用 ui-bootstrap 并且知道这些问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:12:16.947

您正在使用旧的 angular-ui 库，这似乎是 Angular-Ui 的一个错误，看起来他们已经在当前版本中修复了它。

演示：[http ://plnkr.co/edit/wSzIjgq6JDAAY06iNGrG?p=preview](http://plnkr.co/edit/wSzIjgq6JDAAY06iNGrG?p=preview)

# batch-file - 使用批处理脚本比较两个文件

> ID：14454291
> 
> 赞同：1
> 
> 时间：2013-01-22T08:25:28.373
> 
> 标签：batch-file

我有两个文件

文件 1：

> ## PROCESS_NAME
> 
> wf_1
> 
> wf_2
> 
> wf_3

文件 2：

> wf_1 - [运行]
> 
> wf_2 - [成功]
> 
> wf_2 - [成功]

所以现在我需要比较上述两个文件，并且必须删除 file1 中 file2 中状态为 [Succeeded] 的名称。挣扎了3天。

结果应该是

文件 1：

> wf_1

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:36:25.600

干得好

```
@echo off
setlocal enabledelayedexpansion
for /f "tokens=*" %%a in (file1.txt) do (
for /f "skip=1 tokens=*" %%b in ('find "[Succeeded]" file2.txt') do (
set check=%%b
set check=!check: - [Succeeded]=!
if "%%a"=="!check!" set bool=true
)
if not "!bool!"=="true" echo %%a >>new.txt
)
del file1.txt /f /q
ren new.txt file1.txt 
```

只需将`file1.txt`and替换`file2.txt`为您的实际文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-03T14:09:42.403

```
Const ForReading = 1
Const TextCompare = 1

Dim File1, File2, OutputFile

File1 = "D:\1t\test1\ddir11.txt"
File2 = "D:\1t\test1\ddir12.txt"
OutputFile = "D:\1t\test1\outfile.txt"

Dim objFSO : Set objFSO = CreateObject("Scripting.FileSystemObject")
If ObjFSO.FileExists(File1) Then
  Dim objFile1 : Set objFile1 = objFSO.OpenTextFile(File1, ForReading)
Else
  WScript.Quit
End If

' Dictionary object for reference file.
Dim RefDict : Set RefDict = CreateObject("Scripting.Dictionary")
RefDict.CompareMode = TextCompare

Dim StrLine, SearchLine, strNotFound

' Read reference file into dictionary object.
Do Until objFile1.AtEndOfStream
  StrLine = Trim(objFile1.ReadLine)
  'MsgBox (StrLine)
  if Not RefDict.Exists(StrLine) Then
    RefDict.Add StrLine, "1"
  End If
Loop

Dim a,s,i
a = RefDict.Keys
'read dictionary....
'For i = 0 To RefDict.Count -1 ' Iterate the array.
'   s = s & a(i) & "<BR>" ' Create return string.
'Next
objFile1.Close

' File that may have more or less lines.
If ObjFSO.FileExists(File2) Then
  Dim objFile2 : Set objFile2 = objFSO.OpenTextFile(File2, ForReading)
Else
  WScript.Quit
End If

' Search 2nd file with reference file.
Do Until objFile2.AtEndOfStream
  SearchLine = Trim(objFile2.ReadLine)
  If Not RefDict.Exists(SearchLine) Then
    If IsEmpty(strNotFound) Then
      strNotFound = SearchLine
    Else
      strNotFound = strNotFound & vbCrlf & SearchLine
    End If
  End If
Loop

objFile2.Close

If IsEmpty(strNotFound) or strNotFound = "" Then

End If

Dim objFile3 : Set objFile3 = objFSO.CreateTextFile(OutputFile, True)
MsgBox ("str:" & strNotFound)
objFile3.WriteLine strNotFound
objFile3.Close 
```

# google-app-engine - 仪表板图表被截断

> ID：14454293
> 
> 赞同：1
> 
> 时间：2013-01-22T08:25:36.807
> 
> 标签：google-app-engine

自过去几天以来，我的仪表板上的图表（适用于所有应用程序）都在 -24 小时被截断。这是一个新功能还是我错过了什么？

# ios - TableView 的 insertRowsAtIndexPaths 添加了错误的名称

> ID：14454295
> 
> 赞同：0
> 
> 时间：2013-01-22T08:25:40.117
> 
> 标签：ios, xcode, animation, tableview

我有一个奇怪的问题，当我将新用户名添加到 tableView 并以下列方式插入时（如果我只是简单地重新加载表数据，它不会发生），名称总是“出现”与用户名相同索引 0。当我切换视图并返回 tableView 一切正常时，新用户名将其名称更改为“恢复其应有的名称”。也许我在 NSIndexPath 上做错了什么？希望有人可以提供帮助。谢谢！

```
NSIndexPath *path1 = [NSIndexPath indexPathForRow:0 inSection:0];
NSArray *indexArray = [NSArray arrayWithObjects:path1,nil];

[self.tableView beginUpdates];

[self.tableView insertRowsAtIndexPaths:indexArraywithRowAnimation:UITableViewRowAnimationLeft];

[self.tableView endUpdates]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:48:53.910

您需要在新名称应该在的索引路径处插入行，而不是在第 0 行。因此，如果您做了类似`[self.mutableNames insertObject:@"name" atIndex:4]`将名称添加到数据中的操作，那么您需要为该行创建索引路径你像插入一样`[NSIndexPath indexPathForRow:4 inSection:0]`。

# iphone - ios中的facebook graph api错误-未知路径组件

> ID：14454300
> 
> 赞同：1
> 
> 时间：2013-01-22T08:25:46.967
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我在 ios 中使用 facebook graph api 来分享来自 iphone 的新闻提要。但我收到以下错误：

```
 {com.facebook.sdk:ParsedJSONResponseKey={
body =     {
    error =         {
        code = 2500;
        message = "Unknown path components: /http://newswatch.nationalgeographic.com/2013/01/20/top-25-wild-bird-photographs-of-the-week-34;
        type = OAuthException;
    };
};
code = 400;

}, com.facebook.sdk:HTTPStatusCode=400} 
```

以下是我在 btnClick 上共享新闻源的代码的一部分：

```
if ([strType isEqualToString:@"link"]) {

        text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"caption"];
        if (text == nil) {
            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"name"];
        }
        if (text == nil) {
            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"story"];
        }
        NSDictionary *dict = [resultArrFeed objectAtIndex:selectedIndex];

        dic=[NSDictionary  dictionaryWithObjectsAndKeys:text,@"message",nil];
        NSLog(@"%@", dict);
       // NSString *str = [dict valueForKey:@"link"];
        NSString *str = [dict valueForKey:@"link"];
        request=[NSMutableString stringWithString: @"me/feed/"];
        [request appendString:str];
         NSLog(@"appended : %@", request);
    } 
```

如果我尝试共享照片类型的新闻源，则相同的代码有效。我哪里错了？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T05:37:41.017

我得到了错误：正确的代码：

if ([strType isEqualToString:@"link"] || [strType isEqualToString:@"video"]) {

```
 text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"caption"];
        if (text == nil) {
            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"name"];
        }
        if (text == nil) {
            text = [[resultArrFeed objectAtIndex:selectedIndex] objectForKey:@"story"];
        }
        NSDictionary *dict = [resultArrFeed objectAtIndex:selectedIndex];

        NSLog(@"%@", dict);

        NSString *str = [dict valueForKey:@"link"];
        dic=[NSDictionary  dictionaryWithObjectsAndKeys:str,@"link",nil];
        request=[NSMutableString stringWithString: @"me/feed/"];

         NSLog(@" %@", dic);
    } 
```

在请求中我们只需要传递 me/feed 和 FBRequest *friendRequest = [FBRequest requestWithGraphPath:request parameters:dic HTTPMethod:@"POST"]; 我们需要传递链接=http://...

# c# - 通过远程桌面查看时表单最大化

> ID：14454301
> 
> 赞同：7
> 
> 时间：2013-01-22T08:25:47.713
> 
> 标签：c#, winforms, remote-desktop

我为某种机器编写了一个 HMI（人机界面）程序。该程序在带有“Windows Standard Embedded 7”的触摸面板上运行。我想它是 Windows 7 的嵌入式版本对我的问题没有任何影响。

*   我的`WindowState`程序的主窗体设置为`Normal`，大小设置为匹配触摸屏的分辨率（1280x800）。
*   `FormBorderStyle`设置`None`为 。
*   `StartPosition`设置`CenterScreen`为。

问题是：

*   当直接在触摸屏上启动程序时，程序会按原样显示，从上/左到右/下完全填满屏幕。还行吧！

*   当程序未运行并且您通过远程桌面（使用更大的屏幕，例如 1920x1200）登录触摸面板，然后启动程序（通过 rdp 会话）时，程序也按预期启动，如中间所示尺寸为 1280x800 的屏幕。还行吧！

*   当通过 rdp 登录时，程序已经在运行，程序显示为最大化，填满整个屏幕 (1920x1200)。这不好，因为我的程序的整个布局都是为 1280x800 制作的！

有谁知道我的程序为什么会这样，或者问题是否与 rdp 会话有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:55:34.577

这可能是由于系统试图保持相对于屏幕边框的窗口布局。我已经在一些应用程序中注意到了这一点。如果应用程序没有最大化，但在 RDPing 之后以更大的分辨率占用 100% 的屏幕宽度，它会保持 100%。

如果您想防止这种情况发生，您可以尝试在 Form 构造函数中将表单设置`MinimumSize`和属性设置`MaximumSize`为 1280x800。它应该工作

# mysql - convert_tz 返回 null

> ID：14454304
> 
> 赞同：116
> 
> 时间：2013-01-22T08:25:57.747
> 
> 标签：mysql, ubuntu-12.04, convert-tz

我知道这听起来很愚蠢，但是当我使用

```
SELECT CONVERT_TZ('2004-01-01 12:00:00','UTC','Asia/Jakarta') AS time 
```

它输出NULL。我在 Ubuntu 12.04 64 位中使用 MySQL Workbench，它适用于我的其他笔记本电脑/操作系统（也使用 MySQL Workbench）。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-01-22T08:37:38.193

如果您尚未将时区表加载到 mysql 中，则会发生这种情况。

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql 
```

`mysql`是保存 MySQL 特定配置数据的内置数据库的名称。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-08-13T17:01:00.563

我花了一些时间试图弄清楚为什么在接受的答案（这在 MySQL 的开发站点上相同）中运行命令后，我发现了这个线程，该命令无法在时区之间转换，例如

```
SELECT CONVERT_TZ('2004-01-01 12:00:00','UTC','MET') AS time 
```

事实证明，在 OS X 上有两个文件会导致问题：`/usr/share/zoneinfo/Factory`和`/usr/share/zoneinfo/+VERSION`.

修复...暂时将这些文件移动到不同的位置，例如`/usr/share/zoneinfo/.bak/`允许命令

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql 
```

完全填充所有预期的时区信息。

这可能是也可能不是我安装的 MySQL 版本中的错误：

```
$ mysql --version
mysql  Ver 14.14 Distrib 5.6.11, for osx10.6 (x86_64) using  EditLine wrapper 
```

我也在经营`STRICT_MODE`。

无论如何，我希望这可以为任何寻找修复程序的人省去一些麻烦。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-03-15T09:10:45.933

除了 Windows 环境，您可以通过以下方式设置时区

`mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql`

在**Windows**环境下，

`1\. download Time zone description tables from` [http://dev.mysql.com/downloads/timezones.html](http://dev.mysql.com/downloads/timezones.html)

`2\. Stop MySQL server`

`3\. Put then inside Mysql installation package`（即 C:\Program Files\MySQL\data\mysql）`

`4\. Start MySQL server`

..你的工作完成了..

如果您仍然`NULL`需要`CONVERT_TZ` 下载这些数据库表并将其插入 mysql 数据库[http://www.4shared.com/folder/Toba2qu-/Mysql_timezone.html](http://www.4shared.com/folder/Toba2qu-/Mysql_timezone.html)

现在你的问题将得到解决.. :)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-14T05:44:23.410

**MAMP PRO**

1.  打开`Terminal`
2.  `cd /usr/share/zoneinfo/`
3.  `sudo mv +VERSION ~/Desktop`
4.  `cd /applications/MAMP/Library/bin`
5.  `sudo ./mysql_tzinfo_to_sql /usr/share/zoneinfo | ./mysql -p -u root mysql`
6.  `sudo mv ~/Desktop/+VERSION /usr/share/zoneinfo/`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-04T17:24:03.430

如果您在 Windows 中并使用 MySQL 5.7，这些是使其工作的步骤。

1.  右键单击我的电脑/计算机/这台电脑或操作系统中的任何名称，然后选择属性。
2.  从左侧面板中选择“高级系统设置”。
3.  选择“环境变量”，输入你的 MySQL bin 目录的完整路径名（一般在 C:\Program Files\MySQL\MySQL Server 5.7\bin）。
4.  打开 cmd 提示符，使用`mysql -u root -p password`.
5.  输入`use mysql`以选择 MySQL 数据库。
6.  [从https://dev.mysql.com/downloads/timezones.html](https://dev.mysql.com/downloads/timezones.html)下载文件“timezone_YYYYc_posix_sql.zip”（代替 YYYY，替换该页面中可用的最大年份，如 2017 年或 2018 年）。
7.  提取它并在文本编辑器中打开文件。
8.  复制内容并在 cmd 提示符下执行。

成功完成后，您应该能够使用`CONVERT_TZ`和其他时区功能。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-12T23:08:28.657

`C:\Program Files\MySQL\`1）在 Windows 中，与其他答案一样，现在没有任何数据文件夹。

2) 在这种情况下，寻找`C:\ProgramData\MySQL\MySQL Server 5.x\Data\mysql`. `C:\ProgramData\`通常这个文件夹是隐藏的，你有时不会看到。

3）更改视图选项卡中的设置以查看隐藏文件和文件夹，如此处所述[https://irch.info/index.php?pg=kb.page&id=133](https://irch.info/index.php?pg=kb.page&id=133)

4) 通过在 Windows 开始按钮中搜索“服务”来停止 MySQL 服务。

5）然后解压timezone_2017c_posix.zip然后复制里面的文件（直接复制文件，不要自己复制整个文件夹），粘贴进去 `C:\ProgramData\MySQL\MySQLServer5.x\Data\mysql\`

6) 对于 MySQL 5.7，timezone_2017c_posix.zip 在解压后只会给出一个 .sql 文件，可能无法解决问题。因此，即使您正在运行 MySQL 5.7，也请继续下载 5.6 的 zip 文件并将这些文件复制到`C:\ProgramData\MySQL\MySQL Server 5.x\Data\mysql\`

7) 重启 MySQL 服务器。要检查 CONVERT_TZ () 是否正常工作，请运行此 sql 查询。

`SELECT CONVERT_TZ('2004-01-01 12:00:00','UTC','Asia/Jakarta');` 并检查非空输出。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-27T03:28:51.997

如果您在 Windows 上使用 MySql，则必须将时区数据加载到 mysql 架构中。这是一个很好的 HOWTO：[http ://www.geeksengine.com/article/populate-time-zone-data-for-mysql.html](http://www.geeksengine.com/article/populate-time-zone-data-for-mysql.html)

如果您不这样做，函数 CONVERT_TZ 将无法识别您输入的时区（即您的示例：'UTC'、'Asia/Jakarta'），并且只会返回 NULL。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-23T14:07:05.200

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql 
```

如果您收到错误`data too long for column 'abbreviation' at row 1` ，请参阅：[https ://bugs.mysql.com/bug.php?id=68861](https://bugs.mysql.com/bug.php?id=68861)

解决方法是运行以下

这将添加一行来禁用 mysql 模式并允许 mysql 插入截断的数据这是因为 mysql 错误，其中 mysql 会在末尾添加一个空字符（根据上面的链接）

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql
(if the above gives error "data too long for column 'abbreviation' at row 1")
mysql_tzinfo_to_sql /usr/share/zoneinfo > /tmp/zut.sql

echo "SET SESSION SQL_MODE = '';" > /tmp/mysql_tzinfo_to.sql
cat /tmp/zut.sql >> /tmp/mysql_tzinfo_to.sql

mysql --defaults-file=/etc/mysql/my.cnf --user=verifiedscratch -p mysql < /tmp/mysql_tzinfo_to.sql 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-01T12:34:49.643

在 Mac OS Catalina 上使用 XAMPP 时，

转到终端中的 /Applications/XAMPP/xamppfiles/bin 文件夹，然后运行以下命令。

./mysql_tzinfo_to_sql /usr/share/zoneinfo | sed -e "s/必须设置本地时区--参见zic手册页/local/" | ./mysql -u 根mysql

这对我有用。

# excel - 如何在 excel/google 电子表格函数中输出字符串？

> ID：14454309
> 
> 赞同：0
> 
> 时间：2013-01-22T08:26:41.450
> 
> 标签：excel, google-sheets

我正在使用 if 语句来检查单元格是否为数字。如果是，则只返回原始数字，否则，返回字符串 'Not a number'。但是，在输出字符串“不是数字”时遇到了一些麻烦。以下是我正在使用的功能，我该如何修改它？

```
=if(isnumber(A1), A1, 'Not a number') 
```

它在 A1 是数字时有效，但在不是数字时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:45:52.600

您缺少双引号。

试试这个

```
=if(isnumber(A1), A1,"Not a number") 
```

# java - android - 如何验证绘图

> ID：14454318
> 
> 赞同：0
> 
> 时间：2013-01-22T08:27:13.520
> 
> 标签：java, android, android-canvas, paint, touch-event

在我的应用程序中，客户必须在流程结束时签名。下面的代码是我如何使它工作。

绘图视图

```
public class DrawView 
extends View {

    private static final float STROKE_WIDTH = 5f;

    /** Need to track this so the dirty region can accommodate the stroke. **/
    private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

    private Paint paint = new Paint();
    private Path path = new Path();

    /** Optimizes painting by invalidating the smallest possible area. */
    private float lastTouchX;
    private float lastTouchY;
    private final RectF dirtyRect = new RectF();

    public DrawView(Context context) {
        super(context);

        paint.setAntiAlias(true);
        paint.setColor(Color.BLUE);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(STROKE_WIDTH);
    }

    /** Erases the signature. */
    public void clear() {
        path.reset();

        // Repaints the entire view.
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            // There is no end point yet, so don't waste cycles invalidating.
            return true;

        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            // Start tracking the dirty region.
            resetDirtyRect(eventX, eventY);

            // When the hardware tracks events faster than they are delivered,
            // the
            // event will contain a history of those skipped points.
            int historySize = event.getHistorySize();
            //Logger.debug("historySize : " + historySize);
            for (int i = 0; i < historySize; i++) {
                float historicalX = event.getHistoricalX(i);
                float historicalY = event.getHistoricalY(i);
                expandDirtyRect(historicalX, historicalY);
                path.lineTo(historicalX, historicalY);
            }
            path.lineTo(eventX, eventY);

            break;

        default:
            //Logger.debug("Ignored touch event: " + event.toString());
            return false;
        }

        // Include half the stroke width to avoid clipping.
        invalidate((int) (dirtyRect.left - HALF_STROKE_WIDTH), (int) (dirtyRect.top - HALF_STROKE_WIDTH), (int) (dirtyRect.right + HALF_STROKE_WIDTH), (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
    }

    /** Called when replaying history to ensure the dirty region includes all
     * points. */
    private void expandDirtyRect(float historicalX, float historicalY) {
        if (historicalX < dirtyRect.left) {
            dirtyRect.left = historicalX;
        } else if (historicalX > dirtyRect.right) {
            dirtyRect.right = historicalX;
        }
        if (historicalY < dirtyRect.top) {
            dirtyRect.top = historicalY;
        } else if (historicalY > dirtyRect.bottom) {
            dirtyRect.bottom = historicalY;
        }
    }

    /** Resets the dirty region when the motion event occurs. */
    private void resetDirtyRect(float eventX, float eventY) {

        // The lastTouchX and lastTouchY were set when the ACTION_DOWN
        // motion event occurred.
        dirtyRect.left = Math.min(lastTouchX, eventX);
        dirtyRect.right = Math.max(lastTouchX, eventX);
        dirtyRect.top = Math.min(lastTouchY, eventY);
        dirtyRect.bottom = Math.max(lastTouchY, eventY);
    }
} 
```

我使用 FrameLayout 像这样在应用程序中显示。

```
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
drawView = new DrawView(this);
drawView.requestFocus();
preview.addView(drawView); 
```

它工作正常。我的问题是如何对此进行验证。假设我弹出一个提示客户尚未签署的消息。请指教。

# sql - 用于合并和求和时间段的 SQL 查询

> ID：14454320
> 
> 赞同：2
> 
> 时间：2013-01-22T08:27:18.433
> 
> 标签：sql, sql-server, date, sum

我有一个包含时间段和金额的数据库表。将它们视为具有每日期限和价格的合同：

```
start      | end        | amount_per_day
2013-01-01 | 2013-01-31 | 100
2013-02-01 | 2013-06-30 | 200
2013-01-01 | 2013-06-30 | 100
2013-05-01 | 2013-05-15 | 50
2013-05-16 | 2013-05-31 | 50 
```

我想做一个查询，显示每个时期的总数，即：

2013-01-01-2013-01-31第一、三张合约活跃，所以每天总量为200。2013-02-01-2013-04-30，第二、三行活跃，所以总数为 300。从 2013-05-01 到 2013-05-15，第二、第三和第四行处于活动状态，因此总数为 350。从 2013-05-16 到 2013-05-31 第二，第三和第五行是活跃的，所以总数又是 350。最后，从 2013-06-01 到 2013-06-30，只有第二和第三行是活跃的，所以总数又回到了 300。

```
start      | end        | total_amount_per_day
2013-01-01 | 2013-01-31 | 200
2013-02-01 | 2013-04-30 | 300
2013-05-01 | 2013-05-31 | 350
2013-06-01 | 2013-06-30 | 300 
```

（没有必要检测间隔`2013-05-01 -> 2013-05-15`并`2013-05-16 -> 2013-05-31`具有相同的总数并合并它们，但这会很好）。

我更喜欢可移植的解决方案，但如果不可能的话，SQL Server 也可以工作。

我可以对表的结构进行一些小的更改，因此如果它可以使查询更简单，例如用结束日期独占来标记时间段（所以第一个时间段将是 start = 2013-01-01，end = 2013-02-01) 随时提出这样的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:53:01.377

我将从完整的查询开始，然后分解并解释它。这是特定于 SQL-Server 的，但稍作调整即可适用于任何支持分析功能的 DMBS。

```
WITH Data AS
(   SELECT  Start, [End], Amount_Per_Day
    FROM    (VALUES
                ('20130101', '20130131', 100),
                ('20130201', '20130630', 200),
                ('20130101', '20130630', 100),
                ('20130501', '20130515', 50),
                ('20130516', '20130531', 50)
            ) t (Start, [End], Amount_Per_Day)
), Numbers AS
(   SELECT  Number
    FROM    Master..spt_values
    WHERE   Type = 'P'
), DailyData AS
(   SELECT  [Date] = DATEADD(DAY, Number, Start),
            [AmountPerDay] = SUM(Amount_Per_Day)
    FROM    Data
            INNER JOIN Numbers
                ON Number BETWEEN 0 AND DATEDIFF(DAY, Start, [End])
    GROUP BY DATEADD(DAY, Number, Start)
), GroupedData AS
(   SELECT  [Date],
            AmountPerDay,
            [GroupByValue] = DATEADD(DAY, -ROW_NUMBER() OVER(PARTITION BY AmountPerDay ORDER BY [Date]), [Date])
    FROM    DailyData
)
SELECT  [Start] = MIN([Date]),
        [End] = MAX([Date]),
        AmountPerDay
FROM    GroupedData
GROUP BY AmountPerDay, GroupByValue
ORDER BY [Start], [End]; 
```

`Data`CTE 只是您的样本数据。

CTE 只是从 0 到 2047的`Numbers`数字序列（如果您的开始日期和结束日期相隔超过 2047 天，这将失败并且需要稍微调整）

Next CTE`DailyData`只是使用这些数字将您的范围扩展到它们各自的日期，所以

```
20130101, 20130131, 100 
```

变成

```
20130101, 100
20130102, 100
20130103, 100
....
20130131, 100 
```

然后，它只是在 ROW_NUMBER 函数的帮助下按每天的数量对数据进行分组，以查找它何时更改并定义每天相似数量的范围，然后获取每个范围的 MIN 和 MAX 日期。

我总是很难解释/演示这种分组范围方法的确切工作原理，如果它没有意义，如果你只是`SELECT * FROM DailyData`在最后使用查看原始未聚合数据，它可能最容易让你自己看到

# javascript - 为每个选定元素设置不同的超时

> ID：14454325
> 
> 赞同：1
> 
> 时间：2013-01-22T08:27:39.387
> 
> 标签：javascript, jquery, addclass

我目前正在`<li>`使用此脚本向项目添加类名“动画”：

```
$('.list-blocks li').addClass('animate'); 
```

但是这个脚本会立即将类设置为选定的元素。

如何使用一秒钟的缓冲区将类添加到下一个选定元素？

例如：页面加载后，脚本首先给出`li`“animate”类。1 秒后，第二个`li`获得类“动画”。2 秒后，第三个`li`获得“动画”类。

我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:30:14.240

循环所有元素并设置超时。

```
$('.list-blocks li').each(function(index, elm) {
    setTimeout(function () {
        $(elm).addClass('animate');
    }, index*1000);
}); 
```

应该管用。请参阅[http://api.jquery.com/each/](http://api.jquery.com/each/)和[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:04:37.910

尝试：

```
$('.list-blocks li').each(function (index) {
  var item = $(this);
  setTimeout(function () {
    item.addClass('animate');
  }, index * 1000);
}); 
```

[演示](http://jsfiddle.net/bKaUV/)

# service - Typo3 extbase 用户认证服务

> ID：14454329
> 
> 赞同：1
> 
> 时间：2013-01-22T08:28:02.253
> 
> 标签：service, login, typo3, authentication, extbase

我尝试编写一个服务模块，从网络服务中获取用户数据。我找到了本[教程](http://www.marc-willmann.de/typo3-tutorials/anleitungen/frontend-user-login-gegen-eigene-datenquelle/)，但它显示了构建扩展的“旧”方式。是否可以编写这样的 extbase-extension？它应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:21:04.480

`Extbase`（“新方式”）是关于`MVC`，而不是关于身份验证服务，因此本教程仍然有效。

Claus Due（`Extbase`专家）写了一个 auth 扩展，也许你想研究他的代码：[https ://github.com/NamelessCoder/google_auth](https://github.com/NamelessCoder/google_auth)

# php - 使用正则表达式返回 mysql 字符串

> ID：14454334
> 
> 赞同：3
> 
> 时间：2013-01-22T08:28:28.323
> 
> 标签：php, mysql

这是我的代码：

```
$sql = "SELECT `description` FROM `auctions` WHERE `description` REGEXP '[0-9]{10}'";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
  echo $row["description"];
} 
```

这将返回整个字段`description`，我只需要获取与 REGEXP 匹配的部分，我该如何使用 php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:31:58.057

```
$sql = "SELECT `description` FROM `auctions` WHERE `description` REGEXP '[0-9]{10}'";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
    preg_match('/\d{10}/', $row["description"], $match);
    echo $match[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:35:14.360

尝试这个：

```
$results = array();
$sql = "SELECT `description` FROM `auctions` WHERE `description` REGEXP '[0-9]{10}'";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
    // Checks for a match in the description and capture the match to $match
    preg_match("/[0-9]{10}/", $row['description'], $match);

    // Save the complete match (the ten digits) to the results array.
    $results[] = $match[0];
    // Or just echo them
    echo $match[0];
} 
```

顺便说一句，你还应该看看[prepared statements](http://php.net/manual/en/pdo.prepared-statements.php)，尤其是为了防止SQL注入。

# java - 以毫秒为单位将字符串转换为日期对象 (JAVA)

> ID：14454335
> 
> 赞同：0
> 
> 时间：2013-01-22T08:28:28.993
> 
> 标签：java

有没有办法以毫秒为单位将 String 转换为 Date 对象？

在我的程序中，我必须将 MM/dd/yyyy 格式的日期转换为毫秒，但随后我必须将其传递给日期对象。

下面，`dateStringFinal`已经是一个格式为“MM/dd/yyyy”的字符串。

```
Calendar dateInCal = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
    try {
        dateInCal.setTime(sdf.parse(dateStringFinal));
    } catch (java.text.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
String dateInMilli = String.valueOf(dateInCal.getTimeInMillis()); 
```

然后我必须设置一个日期变量

```
someBean.setBeginDate(dateInMilli); 
```

但`dateInMilli`应该是一个 Date 对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T08:29:57.467

```
new Date(Long.valueOf(dateInMs)); 
```

但是，`SimpleDateFormat.parse()`已经返回一个`Date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:30:25.837

如何使用[Long.parseLong(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)：

```
someBean.setBeginDate(Long.parseLong(dateInMilli)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:31:49.677

您可以使用`Date`立即从日历中获取`calendar.getTime()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-07T19:01:20.807

dateInCal.getTimeInMillis() 返回 Long。将其保存在 Long 而不是 String 中。然后使用需要 Long 的 Date 构造函数：

```
Long dateInMilli = dateInCal.getTimeInMillis();
someBean.setBeginDate(new Date(dateInMilli)); 
```

# matlab - Matlab - 8x8 窗口和寻找均值

> ID：14454338
> 
> 赞同：2
> 
> 时间：2013-01-22T08:29:00.983
> 
> 标签：matlab, matrix, window, mean

假设我有一个图像矩阵，我想做以下事情：

*   在矩阵上滑动一个`8x8`窗口
*   计算矩阵中每个像素的平均值

`matlab`如果我对 matlab 中的编码有点陌生，我怎么能做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:40:55.740

您还可以使用[`nlfilter`](http://www.mathworks.com/help/images/ref/nlfilter.html)：

```
fun = @(x) mean(x(:)); 
ans= nlfilter(img,[8 8],fun); 
```

但正如@s.bandara 所建议的那样，计算平均值`conv2`要**快得多**......请注意，使用`conv2`with时矩阵大小会发生变化`valid`。

![在此处输入图像描述](../Images/370ccdf0ae479ce7cfa352471a46e261.png)

`nlfilter`经过的时间是 0.433989 秒。

`conv2` 经过的时间是 0.000803 秒。

所以很明显，对于找到平均值的任务来说，`conv2`要快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T08:33:17.963

您可以使用`conv2`过滤`ones(8)`器，如`I2 = conv2(I, 1.0 / 64.0 * ones(8), 'valid');`. 我们除以 64.0 因为“过滤器”没有标准化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:49:01.077

尝试首先提取图像的子矩阵，如下所示：[MATLAB Submatrix](http://www.mathworks.com/help/dsp/ref/submatrix.html)

然后对每个子矩阵使用[mean(A)函数](http://www.mathworks.com/help/matlab/ref/mean.html)

# php - 结合magento storeviews

> ID：14454339
> 
> 赞同：1
> 
> 时间：2013-01-22T08:29:03.797
> 
> 标签：php, magento

我正在一个 Magento 网上商店工作，在那里我有两种语言、货币和国家/地区的两个商店视图。我现在面临的问题是这些国家之一是多语言的，因此我想将我的两个商店视图中已经存在的两种语言提供给相关国家。

简单的解决方案是只创建第三个商店视图，并在该国家/地区的这两个视图之间进行语言切换。但是由于所有语言已经存在于现有的两个视图中，我对如何最好地使用已经存在的东西有点困惑。

如果不是因为两国之间的货币和运输差异，我可以轻松地为第二个国家重用第一个商店视图，但我需要将第一个视图中的语言与第二个国家的货币和运输选项结合起来第三个店面。

关于如何在不为我的所有文本手动保留两组相同语言的情况下完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:45:32.683

通常，您会为不同的国家/地区使用商店（商店组）。但请记住，基础货币范围是网站（意味着您的客户不能使用与网站设置的货币不同的货币进行支付交易）。如果您对此感到满意，那么您的解决方案将是：

```
"Each Country" -> "Store"
"Each language in that country" -> "Store View" 
```

如果您有多个具有相同语言集的商店视图并不重要，Magento 只需要一个翻译文本（在 app/locale 下）。所以你不会得到任何重复的文本。

# visual-studio-2008 - R6034：尝试加载 C 运行时库不正确

> ID：14454341
> 
> 赞同：0
> 
> 时间：2013-01-22T08:29:16.773
> 
> 标签：visual-studio-2008, dll, unmanaged, side-by-side, winsxs

我正在使用 botan Libary 在 vs 2008 上生成二维码我收到错误“R6034：尝试错误地加载 C 运行时库”。其MFC/C++应用及
**MFC**的使用：在共享DLL
**代码生成**中使用MFC ：《多线程调试DLL（/MDd）》

我已经在四分钟内完成了线程，他们说需要添加清单文件，我已经有一个，请帮我解决这个问题

这是我的 App.exe.manifest.v **“sigcheck.exe - m QrCodeTest.exe”**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">

<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
 <security>
   <requestedPrivileges>
     <requestedExecutionLevel level="asInvoker" uiAccess="false">   </requestedExecutionLevel>
   </requestedPrivileges>
 </security>
</trustInfo>

<dependency>
 <dependentAssembly>
   <assemblyIdentity type="win32" name="Microsoft.VC90.DebugCRT" version="9.0.21022.8" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
  </dependentAssembly>
</dependency>

<dependency>
 <dependentAssembly>
   <assemblyIdentity type="win32" name="Microsoft.VC90.DebugMFC" version="9.0.21022.8" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
 </dependentAssembly>
</dependency>

<dependency>
 <dependentAssembly>
   <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" version="6.0.0.0" processorArchitecture="x86" publicKeyToken="6595b64144ccf1df" language="*"></assemblyIdentity>
 </dependentAssembly>
</dependency>

</assembly> 
```

**输出：**

```
'QrCodeTest.exe': Loaded 'D:\Project\QrCodeTest\Debug\QrCodeTest.exe', Symbols loaded.
 QrCodeTest.exe': Loaded 'C:\Windows\System32\ntdll.dll'
 QrCodeTest.exe': Loaded 'C:\Windows\System32\kernel32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\KernelBase.dll'
'QrCodeTest.exe': Loaded 'D:\Project\QrCodeTest\Debug\botan.dll', Binary was not built with debug information.
'QrCodeTest.exe': Loaded 'C:\Windows\System32\advapi32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\msvcrt.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\sechost.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\rpcrt4.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\user32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\gdi32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\lpk.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\usp10.dll'
'QrCodeTest.exe': Loaded 'D:\Project\QrCodeTest\Debug\msvcp90.dll'
'QrCodeTest.exe': Loaded 'D:\Project\QrCodeTest\Debug\msvcr90.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugmfc_1fc8b3b9a1e18e3b_9.0.30729.1_none_bfff6c932d60651e\mfc90ud.dll', Symbols loaded.
'QrCodeTest.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.30729.1_none_bb1f6aa1308c35eb\msvcr90d.dll', Symbols loaded.
'QrCodeTest.exe': Loaded 'C:\Windows\System32\shlwapi.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-con trols_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\comctl32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\msimg32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\oleaut32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\ole32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.30729.1_none_bb1f6aa1308c35eb\msvcp90d.dll', Symbols loaded.
'QrCodeTest.exe': Loaded 'C:\Windows\System32\imm32.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\msctf.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\uxtheme.dll'
'QrCodeTest.exe': Loaded 'C:\Windows\System32\dwmapi.dll'
The program '[2708] QrCodeTest.exe: Native' has exited with code -1073741502 (0xc0000142). 
```

**依赖关系** 我针对依赖关系运行了Debug exe，这里botan应该加载MSVCP90.dll和MSVCR90.dll而不是MSVCP90D.dll和MSVCR90D.dll。这是造成混乱的原因吗？如果是如何纠正它。

![在此处输入图像描述](../Images/77978e0414b9df86621f85e9315a3d72.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:17:29.957

这一定是Botan.dll的构建方式引起的问题。显然，您已经获得了此 DLL 的发布版本，因为它依赖于 CRT 的发布版本。通常，将其与使用 CRT 调试版本的调试版本混合在一起是非常不健康的，它可能会导致难以诊断运行时错误或内存泄漏。

DLL 应该有它自己的清单来说明它的依赖关系。嵌入为资源 ID 为 2 的 RT_MANIFEST。您可以检查 Botan.dll 在 Visual Studio 中是否有一个。使用 File + Open + File，选择 Botan.dll，你会看到资源。找到 RT_MANIFEST 节点并将其打开。验证资源 2 是否存在并且它声明它需要“Microsoft.VC90.CRT”

期望您看不到它，从而触发错误。使用正确的清单构建它并且通常尝试获取此 DLL 的调试版本对于取得成功很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:25:36.870

I have downloaded botan source code which is part of Qt Creator Source from
[ftp://ftp.qt-project.org/qtcreator/qt-creator-2.1.0-src](ftp://ftp.qt-project.org/qtcreator/qt-creator-2.1.0-src) and compiled it in Qt Creator. It will give you botand.dll and botand.lib which is debug version of botan lib.If you download the Windows binary from [http://botan.randombit.net/download.html,it](http://botan.randombit.net/download.html,it) won't contain debug version binary which obvious.It might run well for some but will also cause problem for others.So one generate debug binary in this way.

Hope it will help others

# web-services - AX2009 中的业务连接器用户数限制

> ID：14454345
> 
> 赞同：0
> 
> 时间：2013-01-22T08:29:42.133
> 
> 标签：web-services, dynamics-ax-2009, axapta, ax, business-connector

**背景**

我们提供一些网络服务来将一些数据导出和导入到网站。不幸的是，该网站的程序员似乎不或者不想理解，如果他们尝试三次并得到三个错误，那么第 1,000,000 次它也会出错。

因此，他们不断向 Web 服务打开新请求，从而导致新业务连接器用户不断涌入。这样做的问题是他们创建了数据库块，但是数据库将无法解决这个问题，因为当它超时时，有几 1000 个新的业务连接器用户等待再次阻塞该进程。今天早上，整个服务器没有响应，AOS 的重新启动需要大约 32 分钟才能完成。（通常需要 2 分钟）

**问题**

我正在寻找一种方法来限制业务连接器用户的数量。我发现的唯一相关帖子是这个： [http ://www.archivum.info/microsoft.public.axapta.programming/2010-01/00045/RE-.NET-business-connector-amp-Web-Services.html](http://www.archivum.info/microsoft.public.axapta.programming/2010-01/00045/RE-.NET-business-connector-amp-Web-Services.html)

不幸的是，他们的问题没有答案，我找不到更多主题。有谁知道我该如何解决这个问题？

任何朝着正确方向的帮助或指示都会受到极大的欢迎.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:03:59.680

听起来好像问题出在Web服务上。您可以对其进行返工以使其不会导致阻塞吗？

同时，查看 MaxConcurrenctBCSessions 设置。请参阅 [http://msdn.microsoft.com/en-us/library/aa569637(v=ax.10).aspx](http://msdn.microsoft.com/en-us/library/aa569637%28v=ax.10%29.aspx)

# tridion - 将 Tridion dreamweaver 标识符写为输出包

> ID：14454348
> 
> 赞同：2
> 
> 时间：2013-01-22T08:29:53.467
> 
> 标签：tridion, tridion-2011

在处理复合页面模板项目时，我发现了非常有趣的问题。客户在其自定义开发的应用程序中使用**${stringvalue-session-or-something-specific}**，这些应用程序使用 XSLT 在组件模板中保存和呈现。当尝试渲染包含保留的 Tridion dreamweaver 标识符 (${}) 的组件演示文稿时，我遇到了类似于以下内容的模板生成器错误

> JScriptException: Expression '""["scopedTarget.personalia"]."" != ""' 在 Tridion.ContentManager.Templating.Expression.JScriptEvaluator.EvaluateToObject(String statement) 在 Tridion.ContentManager.Templating 有错误 'Expected identifier'。 Expression.JScriptEvaluator.EvaluateToString(String 语句)

删除和替换此标识符不是客户可接受的解决方案。我想知道解决这个问题的最佳解决方案是什么？要么使用 C# 代码呈现组件演示文稿，要么创建一些自定义重写（如果可能的话，因为我从组件演示文稿中得到错误）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:13:32.007

如果客户在他们的应用程序中使用 JSP EL，也会发生类似的事情，这些应用程序使用相同的`${...}`语法，并希望将其封装在他们的模板中。

最常见的解决方案是用 Dreamweaver 模板中的类似语法替换此语法，并在 Dreamweaver 模板**之后**`$[...]`使用 .Net TBB ，该模板使用字符串替换或正则表达式对其进行转换。

 **有关执行此操作的示例 TBB，请参阅我的[要点。](https://gist.github.com/4593286)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T13:20:37.847

我通常使用此代码“在模板中启用 JSTL”。由于您无法更改 Tridion 以使用不同的代码标识符，因此您需要更改您的标记。在模板的末尾运行此 TBB 以转换`$[expression]`为`${expression}`

```
using System;
using System.Text.RegularExpressions;
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;

namespace TridionTemplates
{
    [TcmTemplateTitle("Enable JSTL")]
    public class EnableJSTL : ITemplate
    {
        private static readonly Regex JstlRegex = new Regex(@"\$\[.*\]");
        public void Transform(Engine engine, Package package)
        {
            Item outputItem = package.GetByName(Package.OutputName);
            string outputText = outputItem.GetAsString();
            Match match = JstlRegex.Match(outputText);
            while (match.Success)
            {
                String replaceJstl = match.Value.Replace("[", "{");
                replaceJstl = replaceJstl.Replace("]", "}");
                outputText = outputText.Replace(match.Value, replaceJstl);
                match = match.NextMatch();
            }
            outputItem.SetAsString(outputText);
            package.Remove(outputItem);
            package.PushItem(Package.OutputName, outputItem);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:42:40.720

如果您绝对无法更改 Dreamweaver 模板中的语法（正如我所说，我不确定我是否完全理解/同意这样做的原因），那么也许您可以改用[Razor Mediator](http://code.google.com/p/razor-mediator-4-tridion/)进行模板？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T11:21:00.553

正如我提到的，替换语法不是解决方案。我已经通过在 Dreamweaver 模板之前在单独的 C# tbb 中呈现组件表示来解决这个问题。当然，如果允许您更改语法，David 的建议很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T07:44:53.130

我使用 SDL Tridion 2011 SP1 HR1。TemplateBuilder 版本 6.1 Build 6.1.0.73。从以下 DWT 代码之前执行的 Page 中提取组件。

```
<!-- TemplateBeginRepeat name="Components" --> 
```

@@RenderComponentPresentation()@@

```
<!-- TemplateEndRepeat --> 
```

如果组件表示包含 ${sometext}，则从模板生成器记录输出错误。

> JScriptException: Expression '""["scopedTarget.personalia"]."" != ""' 在 Tridion.ContentManager.Templating.Expression.JScriptEvaluator.EvaluateToObject(String statement) 在 Tridion.ContentManager.Templating 有错误 'Expected identifier'。 Expression.JScriptEvaluator.EvaluateToString(String statement) at Tridion.ContentManager.Templating.Package.EvaluateExpression(String expression) at Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator.TransformValueReferences(Package package, StringReference templateReference, Regex startTagExpression, String endTag) 在 Tridion .ContentManager.Templating.Dreamweaver.DreamweaverMediator.TransformRegions(Package package, String dreamweaverTemplate) 在 Tridion.ContentManager.Templating.Dreamweaver.DreamweaverMediator。在 Tridion.ContentManager.Templating.Engine.ExecuteTemplate（模板模板，包包）在 Tridion.ContentManager.Templating.Engine.InvokeTemplate（包包，模板调用模板调用，模板模板）在 Tridion 的变换（引擎引擎，模板 templateToTransform，包包） .ContentManager.Templating.Compound.CompoundTemplateMediator.Transform(Engine engine, Template templateToTransform, Package package) at Tridion.ContentManager.Templating.Engine.ExecuteTemplate(Template template, Package package) at Tridion.ContentManager.Templating.Engine.InvokeTemplate(Package package , TemplateInvocation templateInvocation, Template template) 在 Tridion.ContentManager.Templating.Engine.TransformPackage(Template template, Package package) 在 Tridion.ContentManager.Templating.Debugging。Tridion.ContentManager.Templating.Debugging.DebugSession.Run() 处的 DebuggingEngine.Run() --- 原因：预期标识符 eval 代码：第 1 行 - 错误：预期标识符**

# java - 在 Tomcat 6.0 上加载持久会话时出现 IOException

> ID：14454353
> 
> 赞同：4
> 
> 时间：2013-01-22T08:30:10.570
> 
> 标签：java, spring, tomcat

我们在 flex 中有一个应用程序，它部署在负载平衡的 Tomcat 6.0 上（有一个负载平衡器将请求传递给 2 个 tomcat 服务器）。

访问应用程序时出现 404 错误。在挖掘 tomat 日志时，我们发现了以下错误

**日志跟踪**

```
2013-01-17 10:42:54,148 org.apache.catalina.session.ManagerBase - IOException while loading persisted sessions: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: bean.Login
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: bean.Login
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1332)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
..
2013-01-17 10:43:04,135 org.apache.catalina.session.ManagerBase - Exception loading sessions from persistent storage
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: bean.Login
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1332)
        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1946)
…
Caused by: java.io.NotSerializableException: bean.Login
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164) 
```

**原因**

此错误的可能原因是 Tomcat 在您关闭时尝试序列化所有活动会话的完整对象图，然后在您重新启动时尝试恢复它们。关键是Tomcat使用“普通”的java对象序列化，它要求所有对象都是Serializable。

我们在 Spring 中映射了 Login bean，如下所示

```
<bean id="currLogin" class="bean.Login" scope="session">
      <aop:scoped-proxy />
</bean> 
```

**补救**

**短期**

*   删除 catalina_home/work 目录下的 session.ser 文件
*   重启tomcat服务器

弹回服务器后，我们能够登录到应用程序而不会出现错误。

**长期**

*   通过实现 Serializable 接口使 bean.Login 可序列化。
*   没有 Tomcat 序列化会话（添加到 context.xml，在应用程序中或在 conf/ 目录中的全局 tomcat context.xml 中，在元素内。

请让我们知道解决此问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:52:19.773

我相信如果您希望 Tomcat 在重新启动之间将对象保留在 Session 中，您将需要实现该`Serializable`接口。几乎你已经回答了你自己的问题。

您是否希望它们在重新启动之间持续存在取决于您。

# c++ - 从二进制/随机访问文件中读取数据

> ID：14454356
> 
> 赞同：0
> 
> 时间：2013-01-22T08:30:21.810
> 
> 标签：c++, qt, binaryfiles, random-access

我有一个包含大量数据的二进制格式文件。

如果我了解文件结构，如何从二进制文件中读取信息并填充这些结构的记录？

数据很复杂。

我想用 Qt 来做，但如果需要，我也会用 C++ 来做。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:51:52.643

如果二进制文件真的很大，那么如果通过低级读取函数[http://crasseux.com/books/ctutorial/Reading-files-at-a-low有足够的 RAM 可用，最好将其加载为 (char*) 数组-level.html](http://crasseux.com/books/ctutorial/Reading-files-at-a-low-level.html) 然后你可以解析它。

但这只会帮助您加载大文件，而不是解析复杂的结构。

不确定，但你也可以看看 yacc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T14:02:38.670

这听起来不像 yacc 将是一个解决方案，他没有尝试解析文件，他想将二进制格式的数据读取到数据结构中。

您可以读取数据，然后将其映射到与格式匹配的结构。如果数据很复杂，您可能需要根据数据布局的工作方式以多种方式在其上放置结构。因此，基本上将文件读入 char* 或然后选择结构开始的元素，将该元素转换为指向您的结构的指针，然后访问该元素。没有更多细节，不可能比这更具体。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T08:36:59.403

[http://courses.cs.vt.edu/~cs2604/fall00/binio.html](http://courses.cs.vt.edu/~cs2604/fall00/binio.html)会对你有所帮助。我从那里学到了。（提示始终将您的数据转换为 (char*) ）。

# ubuntu - 在java应用程序中使用英语作为ui语言时，中文显示为小框？

> ID：14454360
> 
> 赞同：1
> 
> 时间：2013-01-22T08:30:33.873
> 
> 标签：ubuntu, visual-paradigm, chinese-locale

例如，在用例图中，我在用例的椭圆图标中输入中文“重组分析数据集”，它显示得很好，但是当我“打开用例详细信息..”时，“重组分析数据集”会在名称文本框中显示为小框，如果我将这些框复制到 chrome 的位置栏中，它显示为“重组分析数据集”。如果我将 vp 的 UI 语言切换为中文，一切都显示正常。那么，如何制作vp在英文UI下工作时始终显示中文？

![在此处输入图像描述](../Images/c68b0e4d12a5bcd3c40fc47bd058d013.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T02:31:01.387

原来我选择的字体不支持中文。

# html - 如何使用html在标题后插入长空格？

> ID：14454361
> 
> 赞同：6
> 
> 时间：2013-01-22T08:30:34.030
> 
> 标签：html

我正在使用带有标题标签的 html。

例如：

```
<html>
  <head>
    <title> Title Name  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;                                                                      </title>
  </head>
</html> 
```

在这个我想要使用 html 代码的“标题名称”之后的长空格。我尝试使用`&nbsp;`，但放置代码太长。标题后空格的任何其他替代方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:54:13.843

如果您的问题是您只想避免编写**冗长**的`&nbsp;`代码。如果你使用 PHP，那么我建议你这样做：

```
<title>Start <?php str_repeat("&nbsp;", 30); ?> End</title> 
```

否则我认为`&nbsp;`像你一样使用没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:20:10.800

关于 FeRtoll 的回答，由于您不想使用 PHP，您可以使用将一些 PHP 函数移植到 JS 的 JavaScript 库。

[http://phpjs.org/functions/str_repeat/](http://phpjs.org/functions/str_repeat/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:43:11.200

我不明白为什么长度会成为问题，但是您可以使用实际的 NO-BREAK SPACE U+00A0 字符而不是实体引用`&nbsp;`，例如

```
<title>Title Name                                                        </title> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T15:33:55.047

那么`&nbsp;`,`&thinsp;`和`&ensp;`呢`&emsp;`？

# c# - 可以暂时锁定 System.Windows.Forms.ComboBox 吗？

> ID：14454362
> 
> 赞同：0
> 
> 时间：2013-01-22T08:30:37.210
> 
> 标签：c#, combobox

我想知道是否可以以编程方式将 System.Windows.Forms.ComboBox 中的下拉列表暂时锁定为其当前值。

另一种方式（解锁）对于逻辑绑定的应用程序也很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:32:42.737

您是否尝试过[`Enabled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx)财产：

```
myCombobox.Enabled = false; 
```

?

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T08:32:56.540

您可以将其“启用”属性设置为 false，直到需要为止。

# wcf - 是列表 当 T 可序列化时，是否默认可序列化？

> ID：14454364
> 
> 赞同：0
> 
> 时间：2013-01-22T08:30:44.623
> 
> 标签：wcf, serialization

我的 WCF 服务中有一个数据合同（比如`EmployeeView`）。我已经用`Serializable`属性装饰了它，并且所有成员都被标记为`DataMember` WCF 中的 A 方法正在返回`List<EmployeeView>`。当我通过 WCF 测试客户端或 MVC 应用程序执行此方法时，它成功执行，但是在传输结果时它给出了一个错误`The underlying connection was closed: The connection was closed unexpectedly`。不是`List<EmployeeView>`序列化虽然`EmployeeView`被标记为序列化？

进一步补充，如果我执行一个只返回“EmployeeView”的 OperationContract，它会给我不同的错误说，`The service is offline or inaccessible; the client-side configuration does not match the proxy`这让事情变得很奇怪，因为其他操作返回字符串等工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:22:08.073

不，这取决于List的具体实现是否Serializable。

您还需要停止使用术语“序列化”和“可序列化”，就好像它们的含义相同。他们没有。

# java - 持久对象时出现“ org.apache.openjpa.persistence.PersistenceException：不允许空键”错误。

> ID：14454368
> 
> 赞同：2
> 
> 时间：2013-01-22T08:30:55.530
> 
> 标签：java, jpa-2.0, openjpa

我正在使用 OpenJPA 和 Eclipse 来持久化对象。我创建了一个简单的一对一单向应用程序。但它给出了外键空错误。

**学生实体**

```
@Entity
public class Student implements Serializable {

    @Id
    private int id;
    private String name;

    private static final long serialVersionUID = 1L;

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "dept_id", unique = true, nullable = true, insertable = true, updatable = true, referencedColumnName = "id")
    private Department department;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Department getDepartment() {
        return department;
    }

    public void setDepartment(Department department) {
        this.department = department;
    }

    public String toString() {
        return "\n\nID:" + id + "\nName:" + name + "\n\n" + department;
    }
} 
```

**部门实体**

```
@Entity
@Table(name = "department")
public class Department implements Serializable {

    @Id
    private int id;
    private String name;

    private static final long serialVersionUID = 1L;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String deptName) {
        this.name = deptName;
    }

    public String toString() {
        return "Department id: " + getId() + ", name: " + getName();
    }
} 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="IBMJPADemo" transaction-type="RESOURCE_LOCAL">

        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>

        <class>com.ibm.jpa.onetoone.model.Department</class>
        <class>com.ibm.jpa.onetoone.model.Student</class>

        <properties>
            <property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/test" />
            <property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver" />
            <property name="openjpa.ConnectionUserName" value="root" />
            <property name="openjpa.ConnectionPassword" value="root" />
            <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" />
            <property name="openjpa.RuntimeUnenhancedClasses" value="supported"/>           
            <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO"/>
            <!-- property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)" /-->
            <!-- property name="openjpa.jdbc.MappingDefaults"
                value="ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict" /-->
        </properties>

    </persistence-unit>
</persistence> 
```

**客户计划**

```
public class OneToOneClient {

    public static void main(String[] args) {

        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("IBMJPADemo");
        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = em.getTransaction();
        tx.begin();

        Student student = new Student();
        student.setId(2537);
        student.setName("K.Senthuran");

        Department dept = new Department();
        dept.setId(100);
        dept.setName("IT");
        student.setDepartment(dept);

        em.persist(student);

        em.flush();
        tx.commit();
        em.close();
    }
} 
```

**错误**

线程“主”org.apache.openjpa.persistence.PersistenceException 中的异常：在 org.apache.openjpa.kernel.DelegatingBroker 的 org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl.java:1817) 中不允许空键。 flush(DelegatingBroker.java:1037) at org.apache.openjpa.persistence.EntityManagerImpl.flush(EntityManagerImpl.java:652) at com.ibm.jpa.onetoone.client.OneToOneClient.main(OneToOneClient.java:32) : java.lang.NullPointerException: 在 org.apache.openjpa.kernel.ManagedCache.assignObjectId(ManagedCache.java:189) 的 org.apache.commons.collections.map.AbstractReferenceMap.put(AbstractReferenceMap.java:248) 不允许空键) 在 org.apache.openjpa.kernel.BrokerImpl.setStateManager(BrokerImpl.java:4046) 在 org.apache.openjpa.kernel.BrokerImpl.assignObjectId(BrokerImpl.java:4949) 在 org.org.apache.openjpa.kernel.StateManagerImpl.afterFlush(StateManagerImpl.java:1084) 上的 apache.openjpa.kernel.StateManagerImpl.assertObjectIdAssigned(StateManagerImpl.java:636) org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl. java:2162) 在 org.apache.openjpa.kernel.BrokerImpl.flushSafe(BrokerImpl.java:2037) 在 org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl.java:1808) ... 还有 3 个

请帮助解决这个问题。

谢谢和问候，
K.Senthuran

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:06:43.080

由于您使用的是`Uni-Directional`映射，所以坚持你的`Student`也不会坚持你的`Department`。因此，您需要确保在持久化 时`Student`，使用的`Department`实体引用已经持久化在数据库中，否则您将得到异常。

所以，只要坚持`department`，在坚持之前`student`。我认为这将解决您的问题。

如果你想要这样，坚持你`student`也坚持`department`，那么你需要使用`bi-directional mapping`. 即使用`Student`in的引用`Department`，与`@OneToOne`映射，指定一个`mappedBy`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:41:39.530

我找到了这个问题的解决方案。首先我们不得不提到带有@Id 和@Column 注释的主键属性。然后我们必须在persistence.xml 中添加以下行。

```
<property name="openjpa.jdbc.SchemaFactory" value="native(ForeignKeys=true)" /> 
```

# c++ - /usr/lib 似乎不是默认链接位置

> ID：14454375
> 
> 赞同：1
> 
> 时间：2013-01-22T08:31:39.053
> 
> 标签：c++, linux, linker

编辑：
经过更多的挖掘，我发现我有一个 libGL.so，`/usr/lib/i386-linux-gnu/libGL.so`如果我把它移开，那么链接会再次正常工作。在查看错误行一段时间后，我认为消息中 libGL.so 的完整路径是可疑的，因为它会一直在查看多个位置来找到它，并且通常它只显示库的名称而不是一个特定的完整路径小路。所以现在的问题是；为什么找到其他版本会导致搜索停止并显示令人困惑的错误消息？（我是 i386ness 在某种程度上使它不兼容）。

ORIG：
出于某种原因，我无法将 libGL.so 链接到我的应用程序中。问题似乎是 ld （或在这种情况下为 gold ）在尝试找到它时没有在 /usr/lib 中查找（从我能找到的所有内容中，它都是默认位置之一），而是在寻找它古怪的位置，例如

> /usr/bin/ld: 错误: 无法打开 /usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/libGL.so: 没有这样的文件或目录

现在 /usr/lib/libGL.so 肯定存在，如果我在 makefile 中做一个明确的 -L/usr/lib 一切链接正确。

我想知道有人知道这里发生了什么吗？

信息：
Ubuntu linux 12.10 x86
g++ 4.7
GNU 黄金链接器
CPU AMD Phenom 2 x6
uname -m 输出：i686

编辑：带有 -v 参数的链接输出：

```
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.7/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 
COMPILER_PATH=/usr/lib/gcc/i686-linux-gnu/4.7/:/usr/lib/gcc/i686-linux-gnu/4.7/:/usr/lib/gcc/i686-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.7/:/usr/lib/gcc/i686-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/i686-linux-gnu/4.7/:/usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.7/../../../../lib/:/lib/i386-linux-gnu/:/lib/../lib/:/usr/lib/i386-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/i686-linux-gnu/4.7/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-o' 'application' '-v' '-L/home/user/src/tutorials/application/builds/./vendor/ogre3d/./lib' '-shared-libgcc' '-mtune=generic' '-march=i686'
 /usr/lib/gcc/i686-linux-gnu/4.7/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_i386 --hash-style=gnu -dynamic-linker /lib/ld-linux.so.2 -z relro -o application /usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/crt1.o /usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/crti.o /usr/lib/gcc/i686-linux-gnu/4.7/crtbegin.o -L/home/user/src/tutorials/application/builds/./vendor/ogre3d/./lib -L/usr/lib/gcc/i686-linux-gnu/4.7 -L/usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu -L/usr/lib/gcc/i686-linux-gnu/4.7/../../../../lib -L/lib/i386-linux-gnu -L/lib/../lib -L/usr/lib/i386-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/i686-linux-gnu/4.7/../../.. /home/user/src/tutorials/application/builds/./src/most_basic_main.o /home/user/src/tutorials/application/builds/./src/QOgreWidget.o /home/user/src/tutorials/application/builds/./src/QtOgreApplication.o /home/user/src/tutorials/application/builds/./src/qt_gen/QtOgreApplication.moc.o /home/user/src/tutorials/application/builds/./src/qt_gen/QOgreWidget.moc.o -lpthread -lQtCore -lQtNetwork -lQtGui -lQtOpenGL -lRenderSystem_GLStatic -lOgreMainStatic -ldl -lfreetype -lXrandr -lGL -lGLU -lxcb -lX11 -lXext -lXpm -lXaw7 -lXt -lzzip -lfreeimage -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/i686-linux-gnu/4.7/crtend.o /usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/crtn.o
/usr/bin/ld: error: cannot open /usr/lib/gcc/i686-linux-gnu/4.7/../../../i386-linux-gnu/libGL.so: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:02:53.990

经过一堆挖掘，事实证明我是一个悬空符号链接的受害者（这基本上是一个没有链接到有效内容的符号链接）。所以发生的事情是链接器找到了一个`libGL.so`at`/usr/lib/i386-linux-gnu/libGL.so`并决定它的搜索已经结束，但是当它试图获取文件时，符号链接的末尾没有任何内容，这导致了我看到的错误消息。一旦我删除了悬空的符号链接，搜索就找不到 a `libGL.so`，直到它到达正确的版本`/usr/lib/libGL.so`，此时一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:39:39.987

似乎您的库路径由于某种原因没有设置。您的配置是否有设置 --libexecdir=/usr/lib 的选项。我有类似的问题，缺少 --libexecdir 的这个选项。

您可以通过在 makefile 中传递 LDFLAGS 来修复它。如何在 makefile 中使用 LDFLAGS 在[这里](https://stackoverflow.com/questions/13249610/how-to-use-ldflags-in-makefile)被取消了。您使用 -L/usr/lib 的选项也很完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-05T23:37:32.780

`gcc`当需要显式`-L/usr/lib`库搜索选项时，我刚刚遇到了类似的问题；即使它应该已经在默认库搜索路径中。奇怪的是，所有库都可用，`ldconfig`而且它们的位置也正确。

感谢@radman 的发现，我记得创建了一个指向 .a 静态库的符号链接，该库最初安装在 .a 中`/usr/lib`，但是我在寻找`/usr/lib/i386-linux-gnu`其他一些配置/构建问题时为其添加了一个符号链接。

删除该符号链接（有效，不悬空）清除了库搜索问题，因此 gcc 可以正确找到库而无需显式`-L/usr/lib`

# azure - VM 的 Azure 定价

> ID：14454378
> 
> 赞同：0
> 
> 时间：2013-01-22T08:31:50.457
> 
> 标签：azure

我想知道 azure 费用是否仅适用于我使用过的资源，无论我托管的 azure VM 中是否有多个站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:36:25.027

我认为你必须更具体一点。

通常，即使您不使用它们，云提供商也会对您分配资源的时间收费。

假设您在一个分配的实例中托管 100 个站点，您只需为一个实例付费。

如果您托管 0 个站点，您仍然需要为一个实例付费。

# hadoop - Namenode对所有文件块的元数据存储

> ID：14454382
> 
> 赞同：3
> 
> 时间：2013-01-22T08:32:28.087
> 
> 标签：hadoop, hdfs

在阅读 Hadoop: The Definitive Guide 一书时，我遇到了这个[页面](http://books.google.co.in/books?id=Wu_xeGdU4G8C&pg=PA46&dq=%22The+namenode+also+knows+the+datanodes+on+which+all+the+blocks+for+a+given+file+are+located%22&hl=en&sa=X&ei=lEz-UMKrL8eH0QGM_oDIBA&ved=0CC8Q6AEwAA#v=onepage&q=%22The%20namenode%20also%20knows%20the%20datanodes%20on%20which%20all%20the%20blocks%20for%20a%20given%20file%20are%20located%22&f=false)，其中包含以下内容：

namenode 还知道给定文件的所有块所在的数据节点，**但是，它不会永久存储块位置，因为此信息是在系统启动时从数据节点重建的**。

我正在努力理解这是如何工作的。假设我在一个 8 节点集群上复制了一个 1 GB 文件，复制因子为 3。因此每个数据节点将有 1 个块，这些块将被复制到其他节点上，从而有效地使每个节点上的块总数达到 3 . 现在namenode应该保存一个包含每个块位置的索引。但是根据文中的说法，如果namenode不*持久*存储块位置，那么在集群关闭重启后，它们是如何重建的。没有办法知道哪个块属于哪个文件。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:25:28.633

namenode 确实保留了一些关于文件的状态（名称、路径、大小、块大小、块 ID 等），而不是块所在的物理位置。

当数据节点启动时，它们有效地遍历 dfs 数据目录，发现它们拥有的所有文件块，一旦完成，就会向名称节点报告它所托管的块。

namenode 构建文件映射以阻止来自每个数据节点的报告中的位置。

这是集群首次启动时有时需要几分钟才能退出安全模式的原因之一 - 如果您有很多文件，每个数据节点可能需要一些时间来遍历树并发现它的块主机。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-02T22:09:10.700

每个 fsimage 文件都包含文件系统中所有目录和文件 inode 的序列化形式。每个 inode 是文件或目录元数据的内部表示，包含文件的复制级别、修改和访问时间、访问权限、块大小和文件组成的块等信息。对于目录，存储的是修改时间、权限和配额元数据。fsimage 文件不记录存储块的数据节点。相反，namenode 将此映射保存在内存中，它通过在 datanodes 加入集群时询问它们的块列表来构建它，并在之后定期确保 namenode 的块映射是最新的。

# workflow-foundation-4 - 在自定义 WF4 活动中访问 Receive 实现子活动的 OutArgument 值

> ID：14454384
> 
> 赞同：0
> 
> 时间：2013-01-22T08:32:40.180
> 
> 标签：workflow-foundation-4

使用 VS2012/.NET 4.5 我正在创建一个自定义活动，该活动实现了接收子活动（作为实现子活动）。以下示例中的参数仅固定为一个：Guid 类型的 OutValue。

我真的很想在 ReceiveDone 中访问传入参数值的值，因为我需要使用它并在从活动中返回它之前对其进行转换。请忽略我当前使用的是 Guid，它仍然无法使用 InvalidOperationException 访问该值：

*Activity 只能获取它拥有的参数的位置。活动“TestActivity”正在尝试获取活动“等待工作流启动请求 [TestActivity 内部]”拥有的参数“OutValue”的位置*

我已经尝试了我能想到的一切，但我惊呆了。一定有办法做这个非常简单的事情吗？

```
public class TestActivity : NativeActivity<Guid>
{
    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        var content = ReceiveParametersContent.Create(new Dictionary<string, OutArgument>()
            {
                // How to access the runtime value of this inside TestActivity?
                {"OutValue", new OutArgument<Guid>()}
            });

        startReceiver = new Receive()
        {
            DisplayName = string.Format("Wait for workflow start request [Internal for {0}]", this.DisplayName),
            CanCreateInstance = true,
            ServiceContractName = XName.Get("IStartService", Namespace),
            OperationName = "Start",
            Content = content
        };

        foreach (KeyValuePair<string, OutArgument> keyValuePair in content.Parameters)
        {
            metadata.AddImportedChild(keyValuePair.Value.Expression);
        }

        metadata.AddImplementationChild(startReceiver);
    }

    protected override void Execute(NativeActivityContext context)
    {
        context.ScheduleActivity(startReceiver, ReceiveDone);
    }

    private void ReceiveDone(NativeActivityContext context, ActivityInstance completedInstance)
    {
        var receive = completedInstance.Activity as Receive;
        ReceiveParametersContent content = receive.Content as ReceiveParametersContent;

        try
        {
            // This causes InvalidOperationException.
            // An Activity can only get the location of arguments which it owns.  
            // Activity 'TestActivity' is trying to get the location of argument 'OutValue' 
            // which is owned by activity 'Wait for workflow start request [Internal for TestActivity]'
            var parmValue = content.Parameters["OutValue"].Get(context);
        }
        catch (Exception)
        { }
    }

    private Receive startReceiver;
    private const string Namespace = "http://company.namespace";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:53:25.167

使用内部变量在内部活动之间传递值。

尽管与您的代码没有直接关系，但请参阅下面的示例，它应该会给您一些想法：

```
public sealed class CustomNativeActivity : NativeActivity<int>
{
    private Variable<int> internalVar;
    private Assign<int> internalAssign; 

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);

        internalVar = new Variable<int>("intInternalVar", 10);

        metadata.AddImplementationVariable(internalVar);

        internalAssign = new Assign<int>
            {
                To = internalVar,
                Value = 12345
            };

        metadata.AddImplementationChild(internalAssign);
    }

    protected override void Execute(NativeActivityContext context)
    {
        context.ScheduleActivity(internalAssign, (activityContext, instance) =>
        {
            // Use internalVar value, which was seted by previous activity
            var value = internalVar.Get(activityContext);

            Result.Set(activityContext, value);
        });
    }
} 
```

调用上述活动：

```
WorkflowInvoker.Invoke<int>(new CustomNativeActivity()); 
```

将输出：

```
12345 
```

**编辑：**

在您的情况下，您的*OutArgument*将是*internalVar*

```
new OutArgument<int>(internalVar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:26:48.493

您需要使用 OutArgument 并将它们用于变量。[请参阅文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.activities.receive.aspx)中的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T12:18:52.717

我可能已经尝试了我想到的一切，但我很固执，拒绝放弃，所以我一直在思考；）

我在这里更改了我的示例，改为使用 Data 类作为参数（它本身并没有改变任何东西，但我在现实世界的示例中需要它）。

下面的代码现在是一个关于如何访问传入数据的工作示例。实现变量的使用是关键：

```
runtimeVariable = new Variable<Data>();
metadata.AddImplementationVariable(runtimeVariable); 
```

和OutArgument：

```
new OutArgument<Data>(runtimeVariable) 
```

然后我可以通过以下方式访问该值：

```
// Here dataValue will get the incoming value.
var dataValue = runtimeVariable.Get(context); 
```

我还没有在其他地方看到过这样的例子。希望它对除我以外的任何人都有用。

编码：

```
[DataContract]
public class Data
{
    [DataMember]
    Guid Property1 { get; set; }

    [DataMember]
    int Property2 { get; set; }
}

public class TestActivity : NativeActivity<Guid>
{
    public ReceiveContent Content { get; set; }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        runtimeVariable = new Variable<Data>();
        metadata.AddImplementationVariable(runtimeVariable);

        Content = ReceiveParametersContent.Create(new Dictionary<string, OutArgument>()
            {
                {"OutValue", new OutArgument<Data> (runtimeVariable)}
            });

        startReceiver = new Receive()
        {
            DisplayName = string.Format("Wait for workflow start request [Internal for {0}]", this.DisplayName),
            CanCreateInstance = true,
            ServiceContractName = XName.Get("IStartService", Namespace),
            OperationName = "Start",
            Content = Content
        };

        metadata.AddImplementationChild(startReceiver);
    }

    protected override void Execute(NativeActivityContext context)
    {
        context.ScheduleActivity(startReceiver, ReceiveDone);
    }

    private void ReceiveDone(NativeActivityContext context, ActivityInstance completedInstance)
    {
        // Here dataValue will get the incoming value.
        var dataValue = runtimeVariable.Get(context);
    }

    private Receive startReceiver;
    private Variable<Data> runtimeVariable;
    private const string Namespace = "http://company.namespace";
} 
```

# java - PDFBox：如何“展平” PDF 表单？

> ID：14454387
> 
> 赞同：11
> 
> 时间：2013-01-22T08:32:48.440
> 
> 标签：java, pdfbox, pdf-form

如何使用 PDFBox “展平” PDF 表单（删除表单字段但保留字段文本）？

[在这里回答了同样的问题：](http://mail-archives.apache.org/mod_mbox/pdfbox-users/201009.mbox/%3C4C9A326F.60902@rayman2200.de%3E)

> 一种快速的方法是从 acrofrom 中删除字段。
> 
> 为此，您只需要获取文档目录，然后是 acroform，然后从此 acroform 中删除所有字段。
> 
> 图形表示与注释链接并保留在文档中。

所以我写了这段代码：

```
import java.io.File;
import java.util.ArrayList;
import java.util.List;

import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDDocumentCatalog;
import org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm;
import org.apache.pdfbox.pdmodel.interactive.form.PDField;

public class PdfBoxTest {
    public void test() throws Exception {
        PDDocument pdDoc = PDDocument.load(new File("E:\\Form-Test.pdf"));
        PDDocumentCatalog pdCatalog = pdDoc.getDocumentCatalog();
        PDAcroForm acroForm = pdCatalog.getAcroForm();

        if (acroForm == null) {
            System.out.println("No form-field --> stop");
            return;
        }

        @SuppressWarnings("unchecked")
        List<PDField> fields = acroForm.getFields();

        // set the text in the form-field <-- does work
        for (PDField field : fields) {
            if (field.getFullyQualifiedName().equals("formfield1")) {
                field.setValue("Test-String");
            }
        }

        // remove form-field but keep text ???
        // acroForm.getFields().clear();         <-- does not work
        // acroForm.setFields(null);             <-- does not work
        // acroForm.setFields(new ArrayList());  <-- does not work
        // ???

        pdDoc.save("E:\\Form-Test-Result.pdf");
        pdDoc.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-06-14T18:24:12.187

使用 PDFBox 2，现在可以通过调用对象`flatten`上的方法轻松地“展平” PDF 表单`PDAcroForm`。请参阅 Javadoc：[PDAcroForm.flatten()](https://pdfbox.apache.org/docs/2.0.13/javadocs/org/apache/pdfbox/pdmodel/interactive/form/PDAcroForm.html#flatten() "PDAcroForm.flatten()")。

带有此方法的示例调用的简化代码：

```
//Load the document
PDDocument pDDocument = PDDocument.load(new File("E:\\Form-Test.pdf"));    
PDAcroForm pDAcroForm = pDDocument.getDocumentCatalog().getAcroForm();

//Fill the document
...

//Flatten the document
pDAcroForm.flatten();

//Save the document
pDDocument.save("E:\\Form-Test-Result.pdf");
pDDocument.close(); 
```

**注意：**动态 XFA 表格不能展平。

对于从 PDFBox 1.* 迁移到 2.0，请查看[官方迁移指南](https://pdfbox.apache.org/2.0/migration.html "PDFBox 2.0 迁移指南")。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-01T08:52:38.510

这肯定有效 - 我遇到了这个问题，调试了一整夜，但最终想出了如何做到这一点:)

这*是*假设您有能力以某种方式编辑 PDF/对 PDF 有一些控制。

首先，使用 Acrobat Pro 编辑表单。使它们隐藏和只读。

然后你需要使用两个库：PDFBox 和 PDFClown。

PDFBox 删除了告诉 Adob​​e Reader 它是一个表单的东西；PDFClown 删除实际字段。必须先完成 PDFClown，然后是 PDFBox（按此顺序。反之则行不通）。

单字段示例代码：

```
// PDF Clown code
File file = new File("Some file path"); 
Document document = file.getDocument();
Form form = file.getDocument.getForm();
Fields fields = form.getFields();
Field field = fields.get("some_field_name");

PageStamper stamper = new PageStamper(); 
FieldWidgets widgets = field.getWidgets();
Widget widget = widgets.get(0); // Generally is 0.. experiment to figure out
stamper.setPage(widget.getPage());

// Write text using text form field position as pivot.
PrimitiveComposer composer = stamper.getForeground();
Font font = font.get(document, "some_path"); 
composer.setFont(font, 10); 
double xCoordinate = widget.getBox().getX();
double yCoordinate = widget.getBox().getY(); 
composer.showText("text i want to display", new Point2D.Double(xCoordinate, yCoordinate)); 

// Actually delete the form field!
field.delete();
stamper.flush(); 

// Create new buffer to output to... 
Buffer buffer = new Buffer();
file.save(buffer, SerializationModeEnum.Standard); 
byte[] bytes = buffer.toByteArray(); 

// PDFBox code
InputStream pdfInput = new ByteArrayInputStream(bytes);
PDDocument pdfDocument = PDDocument.load(pdfInput);

// Tell Adobe we don't have forms anymore.
PDDocumentCatalog pdCatalog = pdfDocument.getDocumentCatalog();
PDAcroForm acroForm = pdCatalog.getAcroForm();
COSDictionary acroFormDict = acroForm.getDictionary();
COSArray cosFields = (COSArray) acroFormDict.getDictionaryObject("Fields");
cosFields.clear();

// Phew. Finally.
pdfDocument.save("Some file path"); 
```

可能在这里和那里有些错别字，但这应该足以了解要点:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-18T15:11:19.277

setReadOnly 确实为我工作，如下所示 -

```
 @SuppressWarnings("unchecked")
    List<PDField> fields = acroForm.getFields();
    for (PDField field : fields) {
        if (field.getFullyQualifiedName().equals("formfield1")) {
            field.setReadOnly(true);
        }
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-23T17:37:37.537

在阅读了 pdf 参考指南之后，我发现您可以通过添加值为 1 的“Ff”键（字段标志）来非常轻松地为 AcroForm 字段设置只读模式。这就是文档的含义：

> 如果设置，用户可能不会更改该字段的值。任何关联的小部件注释都不会与用户交互；也就是说，它们不会响应鼠标点击或响应鼠标移动而改变其外观。此标志对于其值是从数据库计算或导入的字段很有用。

所以代码看起来像这样（使用pdfbox lib）：

```
 public static void makeAllWidgetsReadOnly(PDDocument pdDoc) throws IOException {

    PDDocumentCatalog catalog = pdDoc.getDocumentCatalog();

    PDAcroForm form = catalog.getAcroForm();

    List<PDField> acroFormFields = form.getFields();

    System.out.println(String.format("found %d acroFrom fields", acroFormFields.size()));

    for(PDField field: acroFormFields) {
        makeAcroFieldReadOnly(field);
    }
}

private static void makeAcroFieldReadOnly(PDField field) {

    field.getDictionary().setInt("Ff",1);

} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-15T19:04:51.117

使用 pdfBox 展平 acroform 并保留表单字段值的解决方案：

*   请参阅[https://mail-archives.apache.org/mod_mbox/pdfbox-users/201604.mbox/%3C3BC7E352-9447-4458-AAC3-5A9B70B4CCAA@fileaffairs.de%3E的解决方案](https://mail-archives.apache.org/mod_mbox/pdfbox-users/201604.mbox/%3C3BC7E352-9447-4458-AAC3-5A9B70B4CCAA@fileaffairs.de%3E)

使用 pdfbox 2.0.1 对我有用的解决方案：

```
File myFile = new File("myFile.pdf");
PDDocument pdDoc = PDDocument.load(myFile);
PDDocumentCatalog pdCatalog = pdDoc.getDocumentCatalog();
PDAcroForm pdAcroForm = pdCatalog.getAcroForm();

// set the NeedAppearances flag to false
pdAcroForm.setNeedAppearances(false);

field.setValue("new-value");

pdAcroForm.flatten();
pdDoc.save("myFlattenedFile.pdf");
pdDoc.close(); 
```

我不需要执行上述解决方案链接中的 2 个额外步骤：

```
// correct the missing page link for the annotations
// Add the missing resources to the form 
```

我在 OpenOffice 4.1.1 中创建了我的 pdf 表单并导出为 pdf。在 OpenOffice 导出对话框中选择的 2 个项目是：

1.  选择“创建 PDF 表单”
2.  提交“PDF”格式 - 我发现这提供了比选择“FDF”更小的 pdf 文件大小，但仍作为 pdf 表单操作。

使用 PdfBox，我填充了表单字段并创建了一个扁平化的 pdf 文件，该文件删除了表单字段但保留了表单字段值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-08T13:27:52.550

为了真正“扁平化”一个 acrobat 表单域，似乎要做的事情比乍一看要多得多。在检查了[PDF 标准](http://www.adobe.com/devnet/pdf/pdf_reference.html)后，我设法通过三个步骤实现了真正的扁平化：

1.  保存字段值
2.  删除小部件
3.  删除表单域

所有三个步骤都可以用 pdfbox 完成（我用的是 1.8.5）。下面我将概述我是如何做到的。为了了解发生了什么，一个非常有用的工具是[PDF 调试器](https://pdfbox.apache.org/commandline/#pdfDebugger)。

## 保存字段

这是三步中最复杂的一步。

为了保存字段的值，您必须将其内容保存到*每个*字段小部件的 pdf 内容中。最简单的方法是将每个小部件的外观绘制到小部件的页面。

```
void saveFieldValue( PDField field ) throws IOException
{
    PDDocument document = getDocument( field );
    // see PDField.getWidget()
    for( PDAnnotationWidget widget : getWidgets( field ) )
    {
        PDPage parentPage = getPage( widget );

        try (PDPageContentStream contentStream = new PDPageContentStream( document, parentPage, true, true ))
        {
            writeContent( contentStream, widget );
        }
    }
}

void writeContent( PDPageContentStream contentStream, PDAnnotationWidget widget )
        throws IOException
{
    PDAppearanceStream appearanceStream = getAppearanceStream( widget );
    PDXObject xobject = new PDXObjectForm( appearanceStream.getStream() );
    AffineTransform transformation = getPositioningTransformation( widget.getRectangle() );

    contentStream.drawXObject( xobject, transformation );
} 
```

外观是一个包含所有小部件内容（值、字体、大小、旋转等）的 XObject 流。您只需将其放置在页面上您可以从小部件的矩形中提取的正确位置。

## 删除小部件

如上所述，每个字段可能有多个小部件。小部件负责如何编辑、触发、在不编辑时显示表单字段等。

为了删除一个，您必须将其从其页面的注释中删除。

```
void removeWidget( PDAnnotationWidget widget ) throws IOException
{
    PDPage widgetPage = getPage( widget );
    List<PDAnnotation> annotations = widgetPage.getAnnotations();
    PDAnnotation deleteCandidate = getMatchingCOSObjectable( annotations, widget );
    if( deleteCandidate != null && annotations.remove( deleteCandidate ) )
        widgetPage.setAnnotations( annotations );
} 
```

请注意，注释可能不包含确切的 PDAnnotationWidget，因为它是一种包装器。您必须删除具有匹配 COSObject 的那个。

## 删除表单域

作为最后一步，您删除表单域本身。这与上面的其他帖子没有太大不同。

```
void removeFormfield( PDField field ) throws IOException
{
    PDAcroForm acroForm = field.getAcroForm();
    List<PDField> acroFields = acroForm.getFields();
    List<PDField> removeCandidates = getFields( acroFields, field.getPartialName() );
    if( removeAll( acroFields, removeCandidates ) )
        acroForm.setFields( acroFields );
} 
```

请注意，我在这里使用了自定义 removeAll 方法，因为 removeCandidates.removeAll() 对我来说没有按预期工作。

抱歉，我无法在此处提供所有代码，但有了以上内容，您应该可以自己编写代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-27T17:58:57.077

我没有足够的评论点，但 SJohnson 将字段设置为只读的回应对我来说非常有效。我在 PDFBox 中使用这样的东西：

```
private void setFieldValueAndFlatten(PDAcroForm form, String fieldName, String fieldValue) throws IOException {
    PDField field = form.getField(fieldName);
    if(field != null){
        field.setValue(fieldValue);
        field.setReadonly(true);
    }
} 
```

这将写入您的字段值，然后当您在保存后打开 PDF 时，它将具有您的值并且不可编辑。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-06T21:57:31.687

这是我在综合了我能找到的关于该主题的所有答案后得出的代码。这处理展平文本框、组合、列表、复选框和单选：

```
public static void flattenPDF (PDDocument doc) throws IOException {

    //
    //  find the fields and their kids (widgets) on the input document
    //  (each child widget represents an appearance of the field data on the page, there may be multiple appearances)
    //
    PDDocumentCatalog catalog = doc.getDocumentCatalog();
    PDAcroForm form = catalog.getAcroForm();
    List<PDField> tmpfields = form.getFields();
    PDResources formresources = form.getDefaultResources();
    Map formfonts = formresources.getFonts();
    PDAnnotation ann;

    //
    // for each input document page convert the field annotations on the page into
    // content stream
    //
    List<PDPage> pages = catalog.getAllPages();
    Iterator<PDPage> pageiterator = pages.iterator();
    while (pageiterator.hasNext()) {
        //
        // get next page from input document
        //
        PDPage page = pageiterator.next();

        //
        // add the fonts from the input form to this pages resources
        // so the field values will display in the proper font
        //
        PDResources pageResources = page.getResources();
        Map pageFonts = pageResources.getFonts();
        pageFonts.putAll(formfonts);
        pageResources.setFonts(pageFonts);

        //
        // Create a content stream for the page for appending
        //
        PDPageContentStream contentStream = new PDPageContentStream(doc, page, true, true);

        //
        // Find the appearance widgets for all fields on the input page and insert them into content stream of the page
        //
        for (PDField tmpfield : tmpfields) {
            List widgets = tmpfield.getKids();
            if(widgets == null) {
                widgets = new ArrayList();
                widgets.add(tmpfield.getWidget());
            }
            Iterator<COSObjectable> widgetiterator = widgets.iterator();
            while (widgetiterator.hasNext()) {
                COSObjectable next = widgetiterator.next();
                if (next instanceof PDField) {
                    PDField foundfield = (PDField) next;
                    ann = foundfield.getWidget();
                } else {
                    ann = (PDAnnotation) next;
                }
                if (ann.getPage().equals(page)) {
                    COSDictionary dict = ann.getDictionary();
                    if (dict != null) {
                        if(tmpfield instanceof PDVariableText || tmpfield instanceof PDPushButton) {
                            COSDictionary ap = (COSDictionary) dict.getDictionaryObject("AP");
                            if (ap != null) {

                                contentStream.appendRawCommands("q\n");
                                COSArray rectarray = (COSArray) dict.getDictionaryObject("Rect");
                                if (rectarray != null) {
                                    float[] rect = rectarray.toFloatArray();
                                    String s = " 1 0 0 1  " + Float.toString(rect[0]) + " " + Float.toString(rect[1]) + " cm\n";

                                    contentStream.appendRawCommands(s);
                                }
                                COSStream stream = (COSStream) ap.getDictionaryObject("N");
                                if (stream != null) {
                                    InputStream ioStream = stream.getUnfilteredStream();
                                    ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
                                    byte[] buffer = new byte[4096];
                                    int amountRead = 0;
                                    while ((amountRead = ioStream.read(buffer, 0, buffer.length)) != -1) {
                                        byteArray.write(buffer, 0, amountRead);
                                    }

                                    contentStream.appendRawCommands(byteArray.toString() + "\n");
                                }

                                contentStream.appendRawCommands("Q\n");
                            }
                        } else if (tmpfield instanceof PDChoiceButton) {
                            COSDictionary ap = (COSDictionary) dict.getDictionaryObject("AP");
                            if(ap != null) {
                                contentStream.appendRawCommands("q\n");
                                COSArray rectarray = (COSArray) dict.getDictionaryObject("Rect");
                                if (rectarray != null) {
                                    float[] rect = rectarray.toFloatArray();
                                    String s = " 1 0 0 1  " + Float.toString(rect[0]) + " " + Float.toString(rect[1]) + " cm\n";

                                    contentStream.appendRawCommands(s);
                                }

                                COSName cbValue = (COSName) dict.getDictionaryObject(COSName.AS);
                                COSDictionary d = (COSDictionary) ap.getDictionaryObject(COSName.D);
                                if (d != null) {
                                    COSStream stream = (COSStream) d.getDictionaryObject(cbValue);
                                    if(stream != null) {
                                        InputStream ioStream = stream.getUnfilteredStream();
                                        ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
                                        byte[] buffer = new byte[4096];
                                        int amountRead = 0;
                                        while ((amountRead = ioStream.read(buffer, 0, buffer.length)) != -1) {
                                            byteArray.write(buffer, 0, amountRead);
                                        }

                                        if (!(tmpfield instanceof PDCheckbox)){
                                            contentStream.appendRawCommands(byteArray.toString() + "\n");
                                        }
                                    }
                                }

                                COSDictionary n = (COSDictionary) ap.getDictionaryObject(COSName.N);
                                if (n != null) {
                                    COSStream stream = (COSStream) n.getDictionaryObject(cbValue);
                                    if(stream != null) {
                                        InputStream ioStream = stream.getUnfilteredStream();
                                        ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
                                        byte[] buffer = new byte[4096];
                                        int amountRead = 0;
                                        while ((amountRead = ioStream.read(buffer, 0, buffer.length)) != -1) {
                                            byteArray.write(buffer, 0, amountRead);
                                        }

                                        contentStream.appendRawCommands(byteArray.toString() + "\n");
                                    }
                                }

                                contentStream.appendRawCommands("Q\n");
                            }
                        }
                    }
                }
            }
        }

        // delete any field widget annotations and write it all to the page
        // leave other annotations on the page
        COSArrayList newanns = new COSArrayList();
        List anns = page.getAnnotations();
        ListIterator annotiterator = anns.listIterator();
        while (annotiterator.hasNext()) {
            COSObjectable next = (COSObjectable) annotiterator.next();
            if (!(next instanceof PDAnnotationWidget)) {
                newanns.add(next);
            }
        }

        page.setAnnotations(newanns);
        contentStream.close();
    }

    //
    // Delete all fields from the form and their widgets (kids)
    //
    for (PDField tmpfield : tmpfields) {
        List kids = tmpfield.getKids();
        if(kids != null) kids.clear();
    }

    tmpfields.clear();

    // Tell Adobe we don't have forms anymore.
    PDDocumentCatalog pdCatalog = doc.getDocumentCatalog();
    PDAcroForm acroForm = pdCatalog.getAcroForm();
    COSDictionary acroFormDict = acroForm.getDictionary();
    COSArray cosFields = (COSArray) acroFormDict.getDictionaryObject("Fields");
    cosFields.clear();
} 
```

完整课程： [https ://gist.github.com/jribble/beddf7620536939f88db](https://gist.github.com/jribble/beddf7620536939f88db)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-25T07:13:16.987

这是来自 PDFBox-Mailinglist 的 Thomas 的回答：

您将需要获取 COSDictionary 上的字段。试试这个代码...

```
PDDocument pdDoc = PDDocument.load(new File("E:\\Form-Test.pdf"));
PDDocumentCatalog pdCatalog = pdDoc.getDocumentCatalog();
PDAcroForm acroForm = pdCatalog.getAcroForm();

COSDictionary acroFormDict = acroForm.getDictionary();
COSArray fields = acroFormDict.getDictionaryObject("Fields");
fields.clear(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-10T20:32:13.500

我想我会分享我们与 PDFBox 2+ 一起使用的方法。

我们已经使用了这个 `PDAcroForm.flatten()`方法。

这些字段需要一些预处理，最重要的是必须遍历嵌套字段结构并检查 DV 和 V 的值。

最后起作用的是：

```
private static void flattenPDF(String src, String dst) throws IOException {
    PDDocument doc = PDDocument.load(new File(src));

    PDDocumentCatalog catalog = doc.getDocumentCatalog();
    PDAcroForm acroForm = catalog.getAcroForm();
    PDResources resources = new PDResources();
    acroForm.setDefaultResources(resources);

    List<PDField> fields = new ArrayList<>(acroForm.getFields());
    processFields(fields, resources);
    acroForm.flatten();

    doc.save(dst);
    doc.close();
}

private static void processFields(List<PDField> fields, PDResources resources) {
    fields.stream().forEach(f -> {
        f.setReadOnly(true);
        COSDictionary cosObject = f.getCOSObject();
        String value = cosObject.getString(COSName.DV) == null ?
                       cosObject.getString(COSName.V) : cosObject.getString(COSName.DV);
        System.out.println("Setting " + f.getFullyQualifiedName() + ": " + value);
        try {
            f.setValue(value);
        } catch (IOException e) {
            if (e.getMessage().matches("Could not find font: /.*")) {
                String fontName = e.getMessage().replaceAll("^[^/]*/", "");
                System.out.println("Adding fallback font for: " + fontName);
                resources.put(COSName.getPDFName(fontName), PDType1Font.HELVETICA);
                try {
                    f.setValue(value);
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            } else {
                e.printStackTrace();
            }
        }
        if (f instanceof PDNonTerminalField) {
            processFields(((PDNonTerminalField) f).getChildren(), resources);
        }
    });
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-23T22:19:06.780

如果 PDF 文档实际上不包含表单域，但您仍想展平其他元素（如标记），则以下操作非常有效。仅供参考，它是为 C# 实现的

```
 public static void FlattenPdf(string fileName)
            {
                PDDocument doc = PDDocument.load(new java.io.File(fileName));

                java.util.List annots = doc.getPage(0).getAnnotations();
                for (int i = 0; i < annots.size(); ++i)
                {
                    PDAnnotation annot = (PDAnnotation)annots.get(i);
                    annot.setLocked(true);
                    annot.setReadOnly(true);
                    annot.setNoRotate(true);
                }

                doc.save(fileName);
                doc.close();
    } 
```

这有效地锁定了文档中的所有标记，它们将不再可编辑。

[pdfbox](/questions/tagged/pdfbox "显示标记为“pdfbox”的问题") [c#](/questions/tagged/c%23 "显示标记为“c#”的问题") [注释](/questions/tagged/annotations "显示标记为“注释”的问题")

# jquery - 如何获取最后一行表的 ID 以将事件绑定到它？

> ID：14454394
> 
> 赞同：3
> 
> 时间：2013-01-22T08:33:03.547
> 
> 标签：jquery, events, datatable

我想要做的是在我的表验证函数中给出每一个新行，检查几天的所有事件并检查下拉列表的时间（从小时到小时），所以我需要新行的 ID为旧存在的行做了！我在这里堆积，我尝试了很多方法，但我的代码中总是有一个错误：表格是我公司拥有的黑盒组件，我可以阅读它的脚本但我无法编辑它们。它有一个错误，我必须处理它。单元格的 id 是通过增加一个计数器来给出的。因此，如果我们有 3 行，则单元格的 ID 为：

```
 id    | task name    |  day    | from hour      | to hour
==============================================================
 id0   | task_name0   |  day0   | from_hour0     | to_hour0
----------------------------------------------------------
 id1   | task_name1   |  day1   | from_hour1     | to_hour1
----------------------------------------------------------
 id2   | task_name2   |  day2   | from_hour2     | to_hour2 
```

当您添加新行时，新行的 ID 为：

```
id4   | task_name4   |  day4   | from_hour4     | to_hour4 
```

注意编号 4 ，它需要行数并将其分配为 id 。

当您从表中间删除隐藏输入 max_rows 不会减少的行时，就会出现问题，并且不能保持 ids 唯一！

所以，这是我的问题，我想为新 ID 提供事件，我不知道它是什么！（这种情况出现在从表中间删除行之后），我这样做的旧方法是获取行数并将其分配给这样的字符串：（这用于检查所有天并取消选中所有）

```
$(document).ready(function() 
    {
        $('#table_1_addRow').click(function()
        {

            var row=$('#table_1').find('tbody > tr').size();

            $('#col_task_days'+row+'_0').click(function(){
                for (var i=1;i<8;i++)
                {
                    //check all & make them readonly
                    if($('#col_task_days'+row+'_0').attr('checked')=='checked')
                    {
                        $('#col_task_days'+row+'_'+i).attr('checked','checked');
                        $('#col_task_days'+row+'_'+i).attr('disabled','disabled');
                    }
                    else
                    {
                        $('#col_task_days'+row+'_'+i).attr('disabled',false);
                    }
                }
            });
        });
    }); 
```

这种方式失败了！

我尝试使用另一种方式“最后一个孩子”，但它也失败了，因为检查所有被绑定到两个检查所有事件，一个为自身，一个为最后一个孩子！

```
 $(document).ready(function() 
    {
        $('#table_1_addRow').click(function()
        {
             //days columns in the nine column in  table
            var id=$('#table_1').find('tbody > tr:last-child').children()[4].children[0].id;

            $('#'+id).click(function(){
                for (var i=1;i<8;i++)
                {

                        var id_son=$('#table_1').find('tbody > tr:last-child').children()[4].children[i].id;

                        //check all & make them readonly
                        if($('#'+id).attr('checked')=='checked')
                        {
                            $('#'+id_son).attr('checked','checked');
                            $('#'+id_son).attr('disabled','disabled');
                        }
                        else
                        {
                            $('#'+id_son).attr('disabled',false);
                        }
                  }
          });
        });
    }); 
```

它也失败了

你能建议其他方法吗？希望我已经宣布了我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:24:23.570

您可以使用[:last-child](https://www.w3schools.com/cssref/sel_last-child.asp) CSS 选择器来解决这个问题。

查看代码片段了解更多详情。

```
$(function(){
  $('table#grid').on('click', 'tr:last-child', function () {
    alert($(this).attr('id'));
  });
});

// for binding to every row, you can just simply bind to 'tr' instead of 'tr:last-child' i.e.
//$(function(){
//  $('table#grid').on('click', 'tr', function () {
//    alert($(this).attr('id'));
//  });
//});
```

```
table
{
  border-collapse: collapse;
}

td
{
  padding: 10px;
  border: 1px solid #ccc;
}

tr:last-child
{
  cursor: pointer;
  color: green;
}
```

```
</script>
<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <table id="grid">    
    <tr id='first'>
      <td>
        first
      </td>
    </tr>

    <tr id='second'>
      <td>
        second
      </td>
    </tr>

    <tr id='third'>
      <td>
        third
      </td>
    </tr>

    <tr id='fourth'>
      <td>
        Click on me - I should alert: 'fourth'
      </td>
    </tr>
  </table>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:18:28.880

**事件委托**是新旧行的终极解决方案！

```
$("#table_1").on("click","tbody > tr > td[column=col_task_days] > input[type=checkbox]",function(event){
   console.log(event.target);
   var target = event.target;
   var currentCheckboxID = $(target).attr('id');
   if (!currentCheckboxID){
     return;
   }
   var isCheckAll = currentCheckboxID[currentCheckboxID.length-1] === '0';
   if (isCheckAll && $(target).is(":checked")){
        $(target).siblings("[type=checkbox]").attr("checked","checked");
        $(target).siblings("[type=checkbox]").attr("disabled","disabled");
   }else if (isCheckAll && !$(target).is(":checked")){
           $(target).siblings("[type=checkbox]").removeAttr("disabled");
   }

}) 
```

# ios - 如何在xcode中解析多级xml

> ID：14454401
> 
> 赞同：0
> 
> 时间：2013-01-22T08:33:41.893
> 
> 标签：ios, objective-c, xcode, xml-parsing, nsxmlparser

你能帮我处理这个程序吗？我正在尝试解析一个具有两个级别的 xml 文件（我不知道这个术语，所以我这样称呼）这是我的 xml 文件的示例

```
<?xml version="1.0" encoding="UTF-8"?>
<countries>
<country>
    <countryname>Philippines</countryname>
<subsidiaries>
    <subsidiary>
           <name>Sart Philippines Inc.</name>
           <address>Unit 10-A The World Empire Building, 330 Senator Gil Puyat Avenue  Philippines, Philippines</address>
           <phone>+63.2.929</phone>
           <fax>+63.932</fax>
           <email>enquiry.philippines@sarts.com</email>
           <website>http://www.sartorius-mechatronics.com.ph</website>
    </subsidiary>
</subsidiaries>
</country>
<country>
    <countryname>Denmark</countryname>
    <subsidiaries>
        <subsidiary>
           <name>Stedim Nordic A|S</name>
           <address>Hoerskaetten 6d 2630 Taastrup, Denmark</address>
           <phone>+45.7023.4400</phone>
           <fax>+45.4630.4030</fax>
           <email>ne.customersupport@sartorius.com</email>
           <website></website>
        </subsidiary>
        <subsidiary>
           <name>Nordic A|S</name>
           <address>Hoerskaetten 6D 2630 Taastrup, Denmark</address>
           <phone>+45.7523.8700</phone>
           <fax>+45.4130.4020</fax>
           <email>ne.customersupport@sartorius.com</email>
           <website></website>
       </subsidiary>
     </subsidiaries>
   </country>
</countries> 
```

我打算做的是你选择一个国家，然后你选择一个子公司来查看它的信息。我能够解析它，但我无法展示 Stedim Nordic A|S 子公司。

这是我的解析器类

```
@implementation Parser

-(id)initParser
{
    if (self == [super init])
    {
        app = (AppDelegate *) [[UIApplication sharedApplication]delegate];
    }
    return self;
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"countries"])
    {
        app.listArray = [[NSMutableArray alloc]init];

    }
  if ([elementName isEqualToString:@"country"])
    {
        theList = [[List alloc]init];

    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!currentElementValue)
    {
        currentElementValue = [[NSMutableString alloc]initWithString:string];
    }
    else
    {
        [currentElementValue appendString:string];
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName
{

   if ([elementName isEqualToString:@"country"])
    {
        [app.listArray addObject:theList];
    }

    else {

         if ([elementName isEqualToString:@"countryname"]) {
            theList.countryname = currentElementValue;
        }
        if ([elementName isEqualToString:@"name"])
        {
            theList.name = currentElementValue;
        }
        if ([elementName isEqualToString:@"address"])
        {
            theList.address = currentElementValue;
        }
        if ([elementName isEqualToString:@"phone"])
        {
            theList.phone = currentElementValue;
        }
        if ([elementName isEqualToString:@"fax"])
        {
            theList.fax = currentElementValue;
        }
        if ([elementName isEqualToString:@"email"])
        {
            theList.email = currentElementValue;
        }
        if ([elementName isEqualToString:@"website"])
        {
            theList.website = currentElementValue;

      }

       currentElementValue = nil;

    }

}
@end 
```

我不能很好地解释它，但我希望你能帮助我，如果你能给我发一个关于这类问题的教程的链接，我真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:17:02.740

那么你可以递归地调用解析器。如果您知道要查找的内容，请搜索它是否可用，如果存在则取其价值。我建议您查看**gdata xml 解析器**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:30:50.293

问题是因为在您的第二个`country`元素上有两个`subsidiary`. 所以你需要修改你的代码，如：

你需要另一个`NSString`来持有`Country Name`. 因为您的两个国家名称元素只有一个`subsidiary`。

```
NSString *temp = nil;

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"countries"])
    {
        app.listArray = [[NSMutableArray alloc]init];

    }
    if ([elementName isEqualToString:@"subsidiary"])
    {
        theList = [[List alloc]init];
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName
{

   if ([elementName isEqualToString:@"subsidiary"])
    {
        theList.countryname = temp;
        [app.listArray addObject:theList];
    }
    else
    {

         if ([elementName isEqualToString:@"countryname"])
         {
            temp = currentElementValue;
         }
        if ([elementName isEqualToString:@"name"])
        {
            theList.name = currentElementValue;
        }
        if ([elementName isEqualToString:@"address"])
        {
            theList.address = currentElementValue;
        }
        if ([elementName isEqualToString:@"phone"])
        {
            theList.phone = currentElementValue;
        }
        if ([elementName isEqualToString:@"fax"])
        {
            theList.fax = currentElementValue;
        }
        if ([elementName isEqualToString:@"email"])
        {
            theList.email = currentElementValue;
        }
        if ([elementName isEqualToString:@"website"])
        {
            theList.website = currentElementValue;
        }
        currentElementValue = nil;
    }
} 
```

# android - Android - 当更多库依赖于 support-v4 时，不会生成库 R 文件

> ID：14454403
> 
> 赞同：0
> 
> 时间：2013-01-22T08:33:58.583
> 
> 标签：android, android-support-library

我的 Android 项目依赖于 3 个库，其中一个（**A**）没有要求，其中两个（**B**，**C**）由于 Fragments 需要 support-v4 库。项目本身也需要 support-v4 库。该项目和库具有构建目标 Android 2.2 (API 8)。所有 android-support-v4.jar 库都是相同的构建和版本。

当我添加库**A**时，它的*R.java*在项目的*gen*文件夹中生成。但是当我添加库**B**或**C**时，他们的*R.java*不会生成，甚至**A**的*R.java*也会从项目的*gen*文件夹中删除。

有没有办法包含本身需要 support-v4 库的库？除了将他们的代码复制到项目中并且不将它们包含为库之外。

**更新：**

我发现了问题。问题是我的库 B 和 C 在 Manifest 中使用了相同的包名。当我更改一个库的包名时，所有 R.java 都出现了。

我的库包是 eu.anycode.android.app 作为扩展 com.android.app 类。但我不想将它们放在一个库中，因为我不需要将它们放在一起，因为有些项目我只需要其中一个，并且我不想将未使用的代码包含到最终的 APK 中。

所以我的另一个问题是是否可以设置它以便我可以为不同的库使用相同的包名称？

——马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:21:13.533

> 所以我的另一个问题是是否可以设置它以便我可以为不同的库使用相同的包名称？

不，这是不可能的。包名称是唯一的。

# gcc - 如何选择 GCC 使用的汇编器？

> ID：14454404
> 
> 赞同：8
> 
> 时间：2013-01-22T08:34:00.430
> 
> 标签：gcc, assembly

GCC 是否有一个选项可以改变它使用的汇编程序的路径？`/usr/ccs/bin/as`使用 GCC 尝试编译 Haskell 时，我从 Solaris 收到错误，但我的`as`路径中有 GNU 的副本，所以当我键入时`which as`，`as --version`他们使用的是 GNU 版本，而不是 Solaris 版本。不幸的是，GCC 似乎忽略了路径中的 GNU 版本并转到 Solaris 版本。我正在尝试在 Solaris 上构建 Haskell，但我认为它不适合 Solaris 汇编器。我希望我可以用一个简单的包装脚本来改变这种行为，这样我就不必重新编译 GCC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:24:23.033

无法在运行时指定要使用的汇编程序。配置gcc时必须这样做：

> **--with-gnu-as**
> 
> 指定编译器应该假定它找到的汇编器是 GNU 汇编器。但是，这不会修改查找汇编程序的规则，如果找到的汇编程序实际上不是 GNU 汇编程序，则会导致混淆。 *（如果编译器找到了 GNU 汇编器但没有配置 --with-gnu-as，也可能导致混淆。）*

注意我用斜体写的部分。当然，您可以暂时更改`/usr/ccs/bin/as`为调用 gnu 汇编程序（前提是您具有必要的权限），但以上似乎表明您很可能会遇到问题。gcc 构建过程实际上检查了汇编器支持的特性并为该汇编器生成代码。

我建议你先构建一个新版本的 gcc（配置为使用 gnu 工具），然后使用它来构建 ghc。

# sql - 在数据库中设置按需外键

> ID：14454405
> 
> 赞同：0
> 
> 时间：2013-01-22T08:34:00.907
> 
> 标签：sql, database, database-design

我的数据库中有这些规格的表格：

*   一PK
*   3个外键字段
*   一些统计字段

问题在这里：

在每一行中，只有一个 FK 字段将被填充。最佳解决方案 A 或 B 是什么？

A- 为我的桌子定义 3 个 FK

B- 将一个字段定义为 FK_TYPE，将一个字段定义为 DEMAND_FK，并使用检查 FK_TYPE 的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:47:23.613

选项 A - 如果您必须采用这种设计，则每个外键都需要一个单独的列。没有（标准）方法来定义“条件”外键。

如果您的系统支持检查约束，请包含一个检查约束，以便恰好有一个 FK 列不为空。如果它不支持检查约束，请添加强制执行相同检查的触发器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:52:37.617

如果我没记错的话，B 不可能出现在任何关系数据库中。外键只能引用一张表的一个主键。如果您使用 B 那么您必须在应用程序级别添加约束。否则使用 A。

# iphone - 无法在 UITableViewCell 上设置自定义 BackgroundColor

> ID：14454406
> 
> 赞同：0
> 
> 时间：2013-01-22T08:34:02.093
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

我正在使用此代码自定义单元格背景视图的颜色：

```
UIColor *cellBackgroundColor = [UIColor colorWithRed:255.0 green:255.0 blue:255.0 alpha:1.0];
cell.contentView.backgroundColor = cellBackgroundColor; 
```

问题是，它不起作用。不过，这段代码工作得很好：

```
cell.contentView.backgroundColor = [UIColor redColor]; 
```

这里有什么问题？我不能根据自己的喜好自定义单元格的颜色吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:35:14.403

只是改变 ：

```
UIColor *cellBackgroundColor = [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0];
cell.contentView.backgroundColor = cellBackgroundColor; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:36:13.157

您必须使用此委托设置单元格背景：-

```
- (void)tableView: (UITableView*)tableView
  willDisplayCell: (UITableViewCell*)cell
forRowAtIndexPath: (NSIndexPath*)indexPath
{

   // UIImage *img = [UIImage imageNamed:@"button.png"];  // get your background image

    UIColor *cellBackgroundColor = [UIColor colorWithRed:255/255.0 green:108/255.0 blue:61/255.0 alpha:1.0]; //if you want to set color then use this line

  //  UIColor *backgroundColor = [[UIColor alloc] initWithPatternImage: img];
    cell.backgroundColor = cellBackgroundColor;
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];
} 
```

你的桌子看起来像： -

![在此处输入图像描述](../Images/30c443e0f1fdb47ca3d1fccc4cf42fae.png)

[获取 RGB 颜色并在 iPhone 上使用 UIColor 对其进行标准化](https://stackoverflow.com/questions/821199/taking-an-rgb-color-and-normalizing-it-with-uicolor-on-the-iphone)

```
Your values are between 0 and 255\. Use them to create a UIColor:

    float r; float g; float b; float a;

    [UIColor colorWithRed:r/255.f
                    green:g/255.f
                     blue:b/255.f    
                    alpha:a/255.f]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:40:34.873

也许您可以`cell.contentView.backgroundColor = [UIColor clearColor]`在设置颜色之前添加。

原因是背景视图在底部。内容视图位于顶部。

**其他逻辑是**

```
UIView *myBackView = [[UIView alloc] initWithFrame:cell.frame];

myBackView.backgroundColor = [UIColor colorWithRed:1 green:1 blue:0.75 alpha:1];

[cell.contentView addSubview:myBackView];

[myBackView release]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T08:35:45.650

```
cell.backgroundView.backgroundColor 
```

您可以制作自定义视图并可以更改完整的背景视图

```
UIView *backgroundViewForCell = [[[UIView alloc] init] autorelease];
backgroundViewForCell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"row-bg.png"]];
UIView *selectedBackgroundViewForCell = [[[UIView alloc] init] autorelease];
selectedBackgroundViewForCell.backgroundColor = [[UIColor blueColor] colorWithAlphaComponent:.2];
cell.backgroundView = backgroundViewForCell;
cell.selectedBackgroundView = selectedBackgroundViewForCell; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T08:38:50.387

你在正确的轨道上。你只需要用这个替换你的颜色代码

```
UIColor *cellBackgroundColor = [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0]; 
```

享受编程！！

# operator-overloading - 为什么星号对于类型来说是重载的？

> ID：14454415
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:34:39.190
> 
> 标签：operator-overloading, ocaml, cartesian-product

我还是不明白动机。

为什么他们分别为整数和浮点数的乘法创建了两个不同的运算符（`*`和`*.`），好像他们害怕重载一样，但同时它们用来`*`表示类型的笛卡尔积？

```
type a = int * int ;; 
```

为什么他们突然变得如此勇敢？为什么不写

```
type a = int *.. int ;; 
```

或者其他的东西？

是否存在某种关系，使笛卡尔积更接近整数积而更远离浮点积？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T11:37:27.213

它没有重载，在您的右侧`type t =`定义另一种概念，您定义的是类型，而不是值。

在类似 ML 的语言中，您可以看到两种不同的语言：

1.  允许您定义类型的类型语言（值结构的规范）。
2.  允许您定义值的值语言（对应于类型的实际值，函数也是值）。这就是被评估的内容。

由于这两种语言的领域是真正分开的，因此在每种语言中重用相似的句法结构没有理论上的问题/歧义，因此与重载绝对无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:56:28.527

在数学中，您注意到使用乘法字符的笛卡尔积。因此，在 OCaml 中以相同的方式记录它是合乎逻辑的......

# jquery - 使用 ERB/jquery 链接到下一页

> ID：14454417
> 
> 赞同：2
> 
> 时间：2013-01-22T08:34:45.403
> 
> 标签：jquery, ruby-on-rails, url, counter, erb

在我的 Rails 应用程序中，我有以下 URL 路径“http://localhost/Teamleader/1”，这给了我第一个团队负责人并呈现视图。

我正在尝试在我的 show.html.erb 中添加下一个链接，到目前为止，我有以下代码：

```
<div id="home_link"> <%= link_to "Home" %> </div> 
```

为了测试，这是我的 jquery 代码：

```
$('#next_link').bind('click', function () {

      var url = "/teamleader/" + SOME_COUNTER_HERE
      if (url) { 
          window.location.replace(url);
      }
      return false;
  }); 
```

用户点击后，我希望页面转到“Teamleader/2”，然后从“Teamleader/2”转到“/3”等等。我是否以正确的方式解决这个问题？还是应该通过 rails 助手 path_to 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:50:40.083

你绝对应该使用路径助手

```
<%= link_to "next_link", teamleader_path(Teamleader.where("id > ?", @teamleader.id).order("id ASC").first) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:48:40.540

在控制器中：

```
@next_link_counter = LeaderBoard.where("id > ?", params[:id]).first 
```

鉴于：

```
<div id="next_link">
  <%= link_to "next_link", "/leaderboard/#{@next_link_counter}" %> 
</div> 
```

# java - 在 jboss 5.0 中部署 cxf 安全认证 Web 服务时出现 StackOverflowError

> ID：14454420
> 
> 赞同：0
> 
> 时间：2013-01-22T08:34:57.133
> 
> 标签：java, jakarta-ee, jboss5.x

在 jboss 5 中部署了 web 服务，其中提到了与 ws 身份验证相关的内容

beans.xml 文件。

相同的服务在 tomcat 6 中运行良好，当我部署相同的服务时

java.lang.StackOverflowError

在 jboss 5.in server.log 中除了这个错误我没有发现任何错误。

当我从那时起评论它的工作

美好的。

我怀疑 jars 与 cxf jars 和 jboss jars 冲突。

```
<jaxws:endpoint id="ping" implementor="cxfdemo.ws10.impl.PingServiceImpl"
              address="/PingService">

  <jaxws:inInterceptors>
        <bean id="xxx" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
            <property name="properties">
                <map>
                <entry key="action" value="UsernameToken"/>
                <entry key="passwordType" value="PasswordText" />
                </map>
            </property>
        </bean>
    </jaxws:inInterceptors>
     </jaxws:endpoint> 
```

2013-01-22 03:20:08,667 信息 QuartzScheduler_BpmClusteredScheduler-错过了他们的

预定的点火时间。

2013-01-22 03:20:32,559 错误 http-0.0.0.0-38080-3 [org.apache.catalina.core.ContainerBase

.[jboss.web].[localhost].[/PingWS].[cxf]] Servlet.service() for servlet cxf 抛出异常

java.lang.StackOverflowError

```
at java.security.AccessController.doPrivileged(Native Method)

at java.io.PrintWriter.<init>(PrintWriter.java:78)

at java.io.PrintWriter.<init>(PrintWriter.java:62)

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T15:27:27.250

是的，冲突在于 JBoss 作为其 web 服务库的一部分附带的 jar。我尝试了以下方法并且成功了：

从 /deployers 中
删除 jbossws.deployer 从 /deploy 中删除 jbossws.sar

# sql - CTE with Group By 返回与基本查询相同的结果

> ID：14454421
> 
> 赞同：2
> 
> 时间：2013-01-22T08:35:00.567
> 
> 标签：sql, sql-server, common-table-expression

我正在尝试按评级选择产品评论的数量，其中评级可以是 0 - 5。

以下基本选择有效，但不会给出基础表中不存在的评级计数。

```
SELECT Rating, COUNT(*)  AS 'Reviews' FROM  ProductReviews 
WHERE   ProductID = 'product1' 
GROUP BY Rating 
```

我尝试使用 CTE 生成缺失的结果，并使用外部连接加入评论表，只要我尝试包含“分组依据”表达式，结果就会回退以匹配基本查询的结果。

（我已经检查过 CTE 确实生成了所需值的全部范围）。

```
BEGIN

DECLARE @START AS INT = 0;
DECLARE @END AS INT = 5;

WITH CTE_Ratings AS
(
    SELECT @START as cte_rating
    UNION ALL
    SELECT 1 + cte_rating
    FROM CTE_Ratings
    WHERE cte_rating < @END
)

SELECT
    cte_rating AS 'ReviewRating'
    , ISNULL(COUNT(*), 0) AS 'ReviewCount'
FROM CTE_Ratings
LEFT OUTER JOIN Reviews ON Reviews.Rating = cte_rating
WHERE ProductReviews.ProductID = 'product1'
    AND cte_rating BETWEEN @START AND @END
    GROUP BY cte_rating
END 
```

（我还尝试构建一个包含所需值的临时表，连接到评论表，结果相同）。

在上述两个查询的情况下，结果是：

```
Rating  Reviews
0       1
3       3
4       9
5       47 
```

而我试图获得的相同数据是：

```
Rating  Reviews
0       1
1       0
2       0
3       3
4       9
5       47 
```

任何人都可以建议添加 Group By 聚合函数何时导致查询失败，或者如何改进它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:47:37.600

WHERE 将 OUTER JOIN 更改为 INNER JOIN，因为您正在过滤外部表中的可选行。
因此，将外部表过滤器移动到 JOIN

此外，您已经在 CTE 的开始和结束之间进行过滤

```
WITH ...
-- CTE here
SELECT
    C.cte_rating AS 'ReviewRating'
    , ISNULL(COUNT(PR.Rating), 0) AS 'ReviewCount'
FROM
   CTE_Ratings C
   LEFT OUTER JOIN
   ProductReviews PR ON C.cte_rating= PR.Rating AND PR.ProductID = 'product1'
GROUP BY
   C.cte_rating 
```

更清楚的是，您实际上正在这样做

```
WITH ...
-- CTE here
SELECT
    C.cte_rating AS 'ReviewRating'
    , ISNULL(COUNT(PR.Rating), 0) AS 'ReviewCount'
FROM
   CTE_Ratings C
   LEFT OUTER JOIN
   (
      SELECT PR.Rating
      FROM ProductReviews
      WHERE ProductID = 'product1'
   ) PR ON C.cte_rating= PR.Rating
GROUP BY
   C.cte_rating 
```

# css - 将媒体查询添加到 grails 资源插件

> ID：14454426
> 
> 赞同：2
> 
> 时间：2013-01-22T08:35:23.997
> 
> 标签：css, grails

我正在为我的 CSS 使用 grails 资源插件，并且想知道是否有办法将媒体查询添加到资源中。

所以我想从以下来源获取媒体查询：

```
<link rel="stylesheet" media="screen and (max-width:500px)" href="/css/stylesheet.css" type="text/css"> 
```

并将其添加到资源格式中：resource url: '/css/stylesheet.css'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:47:11.327

您可以在具有属性[的资源 DSL](http://grails-plugins.github.com/grails-resources/guide/single.html#3.1%20The%20resource%20DSL)中定义它`attrs`，例如：

```
modules = {
    core {
        dependsOn 'jquery, utils'
        defaultBundle 'ui'
        resource url:'/css/print.css', attrs:[media:'print']
        .....
    }
} 
```

# google-maps - 谷歌地图+浏览器返回最后查看位置和缩放值

> ID：14454428
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:35:31.970
> 
> 标签：google-maps, google-maps-api-3

当用户访问其他一些页面并返回到地图页面时，我试图将最后一个标记视图和缩放级别返回给用户。现在，我正在使用cookies来做到这一点。只是想知道是否有处理这个问题的传统方法，谢谢：

当用户点击标记时，将它们存储到 cookie 中：

```
 var latLng = map.getCenter();
   var currZoom = map.getZoom();    

   $.cookie("map_center", latLng);
   $.cookie("location_id", locationid);
   $.cookie("curr_zoom", currZoom); 
```

当他返回地图页面时，检索上次查看的标记位置和缩放级别：

```
 var lastViewedActivity = $.cookie('location_id');
   var lastViewedMapLocation = $.cookie('map_center');
   var lastViewMapZoom = $.cookie('curr_zoom'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:03:10.263

这绝对是要走的路；您的其他选择是：

*   存储在服务器上，使用会话或来回传递参数：这里不合适，因为它更复杂并且没有任何添加
*   html5 本地存储：支持不够，所以你仍然需要 cookie 的后备

# python - 如何使用 Python GDAL 镶嵌 MODIS hdf 文件？

> ID：14454432
> 
> 赞同：0
> 
> 时间：2013-01-22T08:35:51.903
> 
> 标签：python, hdf5, gdal, mosaic

我已经下载了大量 MODIS hdf 文件并从每个文件中提取了所需的波段。如何使用 Python 中的 GDAL lib 将所有 hdf 文件拼接在一起并重新投影？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:38:39.703

使用两个 GDAL 命令行工具：

1.  [gdal_merge.py](http://www.gdal.org/gdal_merge.html)将波段镶嵌成一个栅格
2.  [gdalwarp](http://www.gdal.org/gdalwarp.html)重新投影光栅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T21:32:42.400

您也可以尝试 pyModis [0]，它在开发版本中使用 Python GDAL（从今天开始，我需要对其进行更多测试）。

gdal_merge.py 不适用于 MODIS HDF（可能是一个错误），这是返回的错误

```
Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 510, in <module>
    sys.exit(main())
  File "/usr/local/bin/gdal_merge.py", line 390, in main
    file_infos = names_to_fileinfos( names )
  File "/usr/local/bin/gdal_merge.py", line 122, in names_to_fileinfos
    if fi.init_from_name( name ) == 1:
  File "/usr/local/bin/gdal_merge.py", line 147, in init_from_name
    self.band_type = fh.GetRasterBand(1).DataType
AttributeError: 'NoneType' object has no attribute 'DataType' 
```

[0] [https://github.com/lucadelu/pyModis](https://github.com/lucadelu/pyModis)

# c# - 为什么在为接口创建实例时它可以在 C# 中工作？

> ID：14454436
> 
> 赞同：0
> 
> 时间：2013-01-22T08:36:00.550
> 
> 标签：c#, com, ironpython

*编辑：我找到了关于 C# 和 COM 的相关页面*：[C# 编译器如何检测 COM 类型？](https://stackoverflow.com/questions/1093536/how-does-the-c-sharp-compiler-detect-com-types)

如标题所示，当我将 C# 中的程序转换为 IronPython 时，我无法创建类的实例。

原始 C# 程序：`IAgilent34980A2 host = new Agilent34980A();`

重写的 IronPython 程序：`host = Agilent34980A()`

C# 程序运行良好，而 IronPython 程序出现以下错误：

> 类型错误：无法创建 Agilent34980A 的实例，因为它是抽象的

实际上 Agilent34980A() 是一个接口，所以错误是合理的。

我的问题是**为什么它在 C# 中有效？实例也不能在作为接口的 C# 中创建，对吧？**

添加：

C# 代码来自测试机标记。

IAgilent34980A2 源代码定义部分如下：

> 使用 Ivi.Driver.Interop；
> 
> 使用系统；
> 
> 使用 System.Runtime.InteropServices；
> 
> 命名空间 Agilent.Agilent34980A.Interop
> 
> {
> 
> ```
>  //     IAgilent34980A interface.
> 
> [TypeLibType(256)]
> [Guid("07678A7D-048A-42A6-8884-6CC8C575BD1F")]
> [InterfaceType(1)]
> public interface IAgilent34980A2 : IIviDriver
> {
>    IAgilent34980AMeasurement Measurement { get; }
>    IAgilent34980AVoltage Voltage { get; }
>   //  There are some similar functions following.
> } 
> ```
> 
> }

Agilent34980A 定义部分

> 使用 System.Runtime.InteropServices；
> 
> 命名空间 Agilent.Agilent34980A.Interop
> 
> {
> 
> ```
>  //     Agilent34980A driver class.
> [Guid("07678A7D-048A-42A6-8884-6CC8C575BD1F")]
> [CoClass(typeof(Agilent34980AClass))]
> public interface Agilent34980A : IAgilent34980A2
> {
> } 
> ```
> 
> }

和 IIviDriver 定义部分

> 使用系统；
> 
> 使用 System.Runtime.InteropServices；
> 
> 命名空间 Ivi.Driver.Interop
> 
> {
> 
> ```
> //     IVI Driver root interface
> [TypeLibType(256)]
> [InterfaceType(1)]
> [Guid("47ED5184-A398-11D4-BA58-000064657374")]
> public interface IIviDriver
> {
>    //     Pointer to the IIviDriverOperation interface
>    [DispId(1610678272)]
>    IIviDriverOperation DriverOperation { get; }
>    
>    //     Pointer to the IIviDriverIdentity interface
>    [DispId(1610678273)]
>    IIviDriverIdentity Identity { get; }
>    //  There are some similar functions following.
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:55:50.523

`[CoClass]`实际上，您可以通过具有和`[Guid]`属性的共同类创建一个接口实例。

这使您可以：

```
[Guid("000208D5-0000-0000-C000-000000000046")] // Anything
[CoClass(typeof(Foo))]
[ComImport]
public interface IFoo { void Bar(); }

public class Foo : IFoo { public void Bar() { return; } }

void Main()
{
    IFoo instance = new IFoo();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:44:47.873

您不能在 C# 中创建接口的实例。示例代码：

```
void Main()
{
    var test = new ITest();
}

interface ITest {
    void Test();
} 
```

会报编译错误：

```
Cannot create an instance of the abstract class or interface "UserQuery.ITest" 
```

问题只是您的类未正确声明为库中的接口。

代码如下：

```
IAgilent34980A host = new Agilent34980(); 
```

有效，因为它意味着“变量'主机'是对某个对象的引用，该对象是实现 IAgilent34980A 接口的类的实例”。C# 非平凡对象是引用类型，因此这是有效的。

# java - 删除文件时 Jenkins SVN 插件失败（校验和不匹配）

> ID：14454446
> 
> 赞同：1
> 
> 时间：2013-01-22T08:36:39.300
> 
> 标签：java, bash, svn, jenkins, maven-3

我们今天遇到了 Jenkins 的一个奇怪错误。经过调查，我们发现是由于我们删除了SVN中的一些文件，导致Jenkin SVN插件出现问题。

在我调查时，似乎这个错误是已知的，但尚未修复。因此升级到更新的 SVN 插件版本不是解决方案（我们使用的是 Jenkins 1.474）。

我们的临时解决方案是“始终在构建之前结帐”。但这显然非常缓慢，并且对于大型项目需要很多时间。所以我正在寻找一种方法来（至少）在构建后脚本中检测到 SVN 问题，并可能会发送一封电子邮件通知开发人员。

有人对这个有经验么？我对詹金不太熟悉，因此任何帮助或指针将不胜感激。

这是错误日志：

```
Building in workspace /workspace-directory/workspace
Cleaning up /var/lib/jenkins/jobs/aaa/workspace/.
Deleting /var/lib/jenkins/jobs/aaa/workspace/logs
Deleting /var/lib/jenkins/jobs/aaa/workspace/target
Updating svn://address/trunk@HEAD
U         src/main/some_file.java
D         src/main/another_file.java
U         src/main/other_files.java
ERROR: Failed to update svn://address/trunk@HEAD
org.tmatesoft.svn.core.SVNException: svn: E155017: Checksum mismatch while updating '/var/lib/jenkins/jobs/aaa/workspace/src/main/address/.svn/text-base/StudioSignUpController.java.svn-base'; expected: '39fc987bbeb8cd332e6b94abfb934720', actual: 'e9fa300ee28a2b1e15b2273f4b14ae18'
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:85)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:69)
    at org.tmatesoft.svn.core.internal.io.svn.SVNEditModeReader.driveEditor(SVNEditModeReader.java:250)
    at org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryImpl.update(SVNRepositoryImpl.java:1503)
    at org.tmatesoft.svn.core.internal.wc16.SVNUpdateClient16.update(SVNUpdateClient16.java:557)
    at org.tmatesoft.svn.core.internal.wc16.SVNUpdateClient16.doUpdate(SVNUpdateClient16.java:414)
    at org.tmatesoft.svn.core.internal.wc16.SVNUpdateClient16.doUpdate(SVNUpdateClient16.java:324)
    at org.tmatesoft.svn.core.internal.wc2.old.SvnOldUpdate.run(SvnOldUpdate.java:27)
    at org.tmatesoft.svn.core.internal.wc2.old.SvnOldUpdate.run(SvnOldUpdate.java:11)
    at org.tmatesoft.svn.core.internal.wc2.SvnOperationRunner.run(SvnOperationRunner.java:20)
    at org.tmatesoft.svn.core.wc2.SvnOperationFactory.run(SvnOperationFactory.java:1221)
    at org.tmatesoft.svn.core.wc2.SvnOperation.run(SvnOperation.java:292)
    at org.tmatesoft.svn.core.wc.SVNUpdateClient.doUpdate(SVNUpdateClient.java:315)
    at org.tmatesoft.svn.core.wc.SVNUpdateClient.doUpdate(SVNUpdateClient.java:295)
    at org.tmatesoft.svn.core.wc.SVNUpdateClient.doUpdate(SVNUpdateClient.java:391)
    at hudson.scm.subversion.UpdateUpdater$TaskImpl.perform(UpdateUpdater.java:136)
    at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:144)
    at hudson.scm.SubversionSCM$CheckOutTask.perform(SubversionSCM.java:789)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:770)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:753)
    at hudson.FilePath.act(FilePath.java:842)
    at hudson.FilePath.act(FilePath.java:824)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:743)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:685)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1245)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:589)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
    at hudson.model.Run.execute(Run.java:1488)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: org.tmatesoft.svn.core.SVNException: svn: E155017: Checksum mismatch while updating '/xxxxx/.svn/text-base/SignUpController.java.svn-base'; expected: '39fc987bbeb8cd332e6b94abfb934720', actual: 'e9fa300ee28a2b1e15b2273f4b14ae18'
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
    at org.tmatesoft.svn.core.internal.wc.SVNUpdateEditor15.textDeltaEnd(SVNUpdateEditor15.java:637)
    at org.tmatesoft.svn.core.internal.wc.SVNAmbientDepthFilterEditor.textDeltaEnd(SVNAmbientDepthFilterEditor.java:221)
    at org.tmatesoft.svn.core.internal.wc.SVNCancellableEditor.textDeltaEnd(SVNCancellableEditor.java:130)
    at org.tmatesoft.svn.core.internal.io.svn.SVNEditModeReader.processCommand(SVNEditModeReader.java:176)
    at org.tmatesoft.svn.core.internal.io.svn.SVNEditModeReader.driveEditor(SVNEditModeReader.java:232)
    ... 29 more
Caused by: svn: E155017: Checksum mismatch while updating '/xxxx/.svn/text-base/SignUpController.java.svn-base'; expected: '39fc987bbeb8cd332e6b94abfb934720', actual: 'e9fa300ee28a2b1e15b2273f4b14ae18'
    at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
    at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:189)
    at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:141)
    at org.tmatesoft.svn.core.internal.wc.SVNUpdateEditor15.textDeltaEnd(SVNUpdateEditor15.java:634)
    ... 33 more
no change for svn://some_address/trunk since the previous build
No emails were triggered. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:27:42.240

我们偶尔会看到一些构建的问题，但我们通常只是清除工作区然后重新构建。（从詹金斯，导航到工作，然后是“工作区”。）

有几个不同的插件可能有助于检测并可能根据问题实际采取一些措施。

*   [警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)- 解析控制台输出并查找它报告为警告的内置和用户定义的模式。
*   [日志触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Log+Trigger+Plugin)- 如果在控制台日志中找到特定触发器，则触发下游作业。（也许触发了 SVN“清理”作业？）

其中，我自己只使用了警告插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:57:26.383

来自 Jenkins JIRA 和 JetBrains 的这些线程很有趣： [https :](https://issues.jenkins-ci.org/browse/JENKINS-14550) [//issues.jenkins-ci.org/browse/JENKINS-14550 http://youtrack.jetbrains.com/issue/IDEA-83673#comment=27-379397](http://youtrack.jetbrains.com/issue/IDEA-83673#comment=27-379397)

正如你所提到的，这个问题在 Jenkins 中仍然存在。JetBrains 相信他们已经用更新的 svnkit 纠正了 IDEA：svnkit 1.7.5-v1。

在 jetbrains 问题中还提到了一些使用商业工具 SmartSvn 解决问题的策略，SmartSvn 是一个具有特殊功能“验证管理区域”的 svn 客户端。

我将尝试使用有关 svnkit 的注释来更新 Jenkins JIRA 问题，以查看是否会导致修复。

编辑：实际上，一月的 Jenkins Subversion 插件 1.4.5 似乎解决了这个问题。安装并手动重新启动后，不匹配消失了。

# django - 在 django 中生成站点地图

> ID：14454449
> 
> 赞同：0
> 
> 时间：2013-01-22T08:36:43.140
> 
> 标签：django, sitemap

我的网站已经包含许多模型和视图以及超过 25000 个子 URL。我需要创建一个站点地图，但使用 django-sitemaps 框架并不容易，因为我们需要添加每个模型。

有什么简单的方法可以为 Django 网站创建站点地图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:29:12.533

您可以创建一个爬虫（[scrapy](http://scrapy.org/)）来索引您的站点，但是即使有很多模型，创建站点地图也不应该太难，您遇到任何问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-25T20:21:12.180

Django 站点地图和 wagtail 站点地图 [https://docs.wagtail.io/en/stable/reference/contrib/sitemaps.html](https://docs.wagtail.io/en/stable/reference/contrib/sitemaps.html) 就是这样做的。它处理您的所有模型。您可以自定义站点地图类以及模板。我使用 docker 容器并自定义模板和代码以满足特定需求。

当我添加新博客时，它会自动生成条目。

[https://www.fraydit.com/blogs/wagtail-sitemap-in-docker/](https://www.fraydit.com/blogs/wagtail-sitemap-in-docker/)

这是一个实现和自定义该模块的示例。

# jquery - 暂时禁用点击事件

> ID：14454452
> 
> 赞同：2
> 
> 时间：2013-01-22T08:36:53.357
> 
> 标签：jquery

我想在另一个事件发生时禁用两个按钮上的单击事件一段时间，然后重新启用它。.off 方法可以阻止它，但是使用 after .on 不能使按钮上的点击事件再次可用。

```
$('#button-block-1').click(function () {
    $('#block-1, #block-1-expansion-button').stop().fadeToggle('slow');
    if ($('#block-1, #block-1-expansion-button').is(':visible')) {$('#block-2').fadeOut('slow')}
});
$('#button-block-2').click(function () {
    $('#block-2').stop().fadeToggle('slow');
    if ($('#block-2').is(':visible')) {$('#block-1, #block-1-expansion-button').fadeOut('slow')}
});

$('#block-1-expansion-button').toggle(function () {
    $('#body-wrapper').animate({
        'top': '20px'
    }, 450);
    $('#button-block-1, #button-block-2').off('click');
    },
    function () {
    $('#body-wrapper').animate({
        'top': '0'
    }, 450);
    $('#button-block-1, #button-block-2').on('click');
}); 
```

[JsFiddle 示例](http://jsfiddle.net/DCdwf/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:39:26.817

您应该`prop()`改用：

```
$('#button-block-1, #button-block-2').prop('disabled',true);//disabled buttons
$('#button-block-1, #button-block-2').prop('disabled',false);//enabled buttons 
```

# iphone - 使用分组表视图时IOS键盘关闭

> ID：14454454
> 
> 赞同：0
> 
> 时间：2013-01-22T08:36:58.497
> 
> 标签：iphone, ios, uitableview, keyboard, dismiss

iPhone 应用程序：

*   我有一个带有 3 个文本字段的屏幕，用于输入姓名、电子邮件和位置。
*   我使用了 2 个部分的分组表视图。
*   在 tat 第一部分有三个单元格..每个单元格都有一个标签 na 文本字段..例如：名为名称的标签和一个用于输入名称的文本框.. 明智地我也有它用于电子邮件和位置..

已将界面中的 nameTextField、emailTextField、locationTextField 声明为变量而不是属性。所以请告诉我如何在这里关闭键盘

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CommonTableViewCell* cell = [[CommonTableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@""];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.textLabel.highlightedTextColor = [UIColor whiteColor];
    cell.textLabel.font = [UIFont fontWithName:@"Arial" size:14];//
    cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
    //cell.image = [UIImage imageNamed:@"resources_on.png"];
    cell.textLabel.frame = CGRectMake(TABLE_ROW_HEIGHT + 10, 5, self.view.frame.size.width , 25);

    if (indexPath.section == 0) {
        if (indexPath.row  == 0) {
            cell.textLabel.text = @"Username";

            nameTextField = [[UITextField alloc] initWithFrame:CGRectMake(140, 18, 300, 20)];
            [nameTextField setBackgroundColor:[UIColor clearColor]];
            [nameTextField setFont:[UIFont fontWithName:@"Arial" size:14]];
            nameTextField.placeholder = @"Enter anonymous name";
            [nameTextField setKeyboardType: UIKeyboardTypeNamePhonePad];
            [cell addSubview:nameTextField];
            [nameTextField release];

        }else if (indexPath.row == 1) {

            cell.textLabel.text = @"Email"; 
            emailTextField = [[UITextField alloc] initWithFrame:CGRectMake(140, 18, 300, 20)];
            [emailTextField setBackgroundColor:[UIColor clearColor]];
            [emailTextField setFont:[UIFont fontWithName:@"Arial" size:14]];
            emailTextField.placeholder = @"example@me.com";
            [emailTextField setKeyboardType:UIKeyboardTypeEmailAddress];
            [cell addSubview:emailTextField];
            [emailTextField release];

        }else if (indexPath.row == 2) {

            cell.textLabel.text = @"Location";
            locationTextField = [[UITextField alloc] initWithFrame:CGRectMake(140, 18, 300, 20)];
            [locationTextField setBackgroundColor:[UIColor clearColor]];
            [locationTextField setFont:[UIFont fontWithName:@"Arial" size:14]];
            locationTextField.placeholder = @"Fetch";
            [cell addSubview:locationTextField];
            [locationTextField release];

        }else if (indexPath.row == 3) {

            cell.textLabel.text = @"Terms of Use";

            cell.thumbnailView.image = [UIImage imageNamed:@"compensation_on.png"];

        }else if (indexPath.row == 4) {

            cell.textLabel.text = @"Privacy Policy";

            cell.thumbnailView.image = [UIImage imageNamed:@"compensation_on.png"];

        }else {

        }
    } else if (indexPath.section == 1) {
        if (indexPath.row == 0) {

            cell.textLabel.text = @"Terms of Use";

            cell.thumbnailView.image = [UIImage imageNamed:@"compensation_on.png"];

        }else if (indexPath.row == 1) {

            cell.textLabel.text = @"Privacy Policy";

            cell.thumbnailView.image = [UIImage imageNamed:@"compensation_on.png"];

        }else {

        }

    }

    return cell;
} 
```

这对我不起作用..

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField { 
    [textField resignFirstResponder]; 
    return YES; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:01:25.807

先试试谷歌：[search?q=textfield+resignfirstresponder+not+hiding+the+keyboard](https://www.google.com/search?q=textfield%20resignfirstresponder%20not%20hiding%20the%20keyboard)

stackoverflow上有很多这样的问题。

**例子：**

该字段是否在 a 内`UIModalPresentationFormSheet`？如果是这样，这是一个已知问题，您无法以编程方式关闭键盘，直到视图控制器被关闭。

有解决此问题的方法，请在[此处](https://stackoverflow.com/questions/6853613/resignfirstresponder-dont-work)查看问题。

来自：[https](https://stackoverflow.com/a/6854165/672989) ://stackoverflow.com/a/6854165/672989 ：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:24:15.217

您应该为您`UITextField`的 s 分配一个代表。

您的数据源（或任何其他对象，但这个似乎适合这项工作）应该符合`<UITextFieldDelegate>`协议。

```
 ...
 nameTextField = [[UITextField alloc] initWithFrame:CGRectMake(140, 18, 300, 20)];
 [nameTextField setBackgroundColor:[UIColor clearColor]];
 [nameTextField setFont:[UIFont fontWithName:@"Arial" size:14]];
 nameTextField.placeholder = @"Enter anonymous name";
 [nameTextField setKeyboardType: UIKeyboardTypeNamePhonePad];

 [nameTextField setDelegate:self]; //add this line

 [cell addSubview:nameTextField];
 //[nameTextField resignFirstResponder]; this doesn't really make sense - creating the text
 //field should not (and does not) bring up the keyboard
 [nameTextField release];
 .... 
```

对其他`UITextField`s 做同样的事情。

然后检查您的`delegate`方法是否被调用（例如使用 NSLog 或断点）：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    NSLog (@"should return?"); 
    [textField resignFirstResponder]; 
    return YES; 
} 
```

**编辑**：

您只需为每个**UITextField**设置一次委托- 通常是在创建它时。

要告诉编译器某个类符合`<UITextFieldDelegate>`协议，只需`@interface`在头文件中的类声明之后添加。

例如，如果您用作表的数据源的类名为 MyDataSource：

```
@interface MyDataSource: NSObject <UITableViewDelegate,UITextFieldDelegate> 
```

当然，您必须实现所有必需的方法才能正确符合某个协议。请查看文档：[UITextFieldDelegate 协议参考](https://stackoverflow.com/questions/14454454/ios-keyboard-dismissing-when-grouped-table-view-is-used/14455193#comment20131804_14455193)

**编辑**：至于检查电子邮件的有效性：你可以检查有效性（这实际上是另一个问题）你可以这样做`- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`

由于您的委托对象被委托给多个 UITextField 您必须首先检查正在编辑的文本字段是否是保存电子邮件的文本字段。而且由于您的文本字段位于表格单元格中，因此很难（并且不正确）保持对所有这些字段的引用。您可以使用标签将电子邮件文本字段与其他字段分开 - 让我们将其设为 44。稍微修改您的代码：

```
emailTextField = [[UITextField alloc] initWithFrame:CGRectMake(140, 18, 300, 20)];
emailTextField.tag = 44; //add this line 
```

然后添加委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.tag == 44)
    {
        //email checking code here
    }
    else
    {
        return YES;
    }
} 
```

至于如何查邮件，看看这个答案：[https ://stackoverflow.com/a/7707946/653513](https://stackoverflow.com/a/7707946/653513)

# django - 重定向后从会话中检索数据

> ID：14454458
> 
> 赞同：0
> 
> 时间：2013-01-22T08:37:17.923
> 
> 标签：django, forms, redirect

重定向后如何从模板中的会话中检索数据。实际上可能吗？

这是我的代码：

查看.py：

```
if request.POST:
user = request.POST.get('username')
passw = request.POST.get('password')
#password1 = ''
try:
    userdata = Employee.objects.get(username = user, password = passw)
    user_id = request.session["user_id"] = userdata.id
    employee_details = Employee.objects.get(id=user_id)
    request.session['emp_details'] = employee_details
    return HttpResponseRedirect('/home/')
except Employee.DoesNotExist:
    state = "Username or password incorrect !"
    return render_to_response('login.html',
        {'username' : username1,'state' : state},
        context_instance = RequestContext(request)) 
```

模板：home.html

```
<body>
<p>
<ul>
    <li><a href="">{{request.session.emp_details.emp_name}}</a></li>
</ul>
</p>
<p><a href="/logout/"><button>logout</button></a></p>
</body> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:12:21.883

确保已将 django.core.context_processors.request 添加到[模板上下文处理器](https://docs.djangoproject.com/en/1.4/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS)中。然后，您可以像在代码中一样访问会话变量。

您可能需要将以下行添加到您的视图中

```
request.session.modified = True 
```

这取决于`SESSION_SAVE_EVERY_REQUEST = True`您的设置中是否有。[查看保存会话](https://docs.djangoproject.com/en/1.4/topics/http/sessions/#when-sessions-are-saved)的文档。

最后，确保将[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django.template.RequestContext)对象传递给`render_to_response`视图中的函数`'/home/'`。`RequestContext`包括模板上下文中的对象`request`（使其在模板中可访问`{{ request }}`）。

警告

虽然这应该可以帮助您使会话正常工作-我必须同意 Daniel 的观点，但您不应该像这样进行用户身份验证。使用[django 自己的身份验证](https://docs.djangoproject.com/en/1.4/topics/auth/)。

# c# - 连接到 SMTP 客户端事件

> ID：14454463
> 
> 赞同：0
> 
> 时间：2013-01-22T08:37:33.687
> 
> 标签：c#, smtp, windows-server-2008-r2

**简介：**我支持在成功注册到站点后发送欢迎/确认邮件的一段代码。

SMTP 客户端在发送完成之前超时。根据我们的运营部门的说法，我使用了正确的凭据和 SMTP 服务器 IP 地址。

我想要做的是挂钩任何握手、连接、发送等事件，这样我就可以准确地找出进程超时的原因。我已在该页面上将 Server.ScriptTimeOut 设置为 500 秒，因此它不仅仅是一个繁忙的服务器问题。

我的问题是：在此过程中我可以处理哪些事件。我在 SMTPClient 中看到的唯一一个是 SendCompleted。但我想一定有一种方法可以访问更底层的东西？

作为参考，下面是代码：

```
//Create and send email
MailMessage mm = new MailMessage();
try
{
    mm.From = new MailAddress("admin@site.com");
    mm.To.Add(new MailAddress(Recipient));
    mm.Subject = Subject;
    mm.Body = MailBody;
    mm.IsBodyHtml = true;

    var c = new NetworkCredential("admin@site.com", "YeOlePassword");

    SmtpClient smtp = new SmtpClient("127.0.0.1");//not really, just hiding our SMTP IP from StackOverflow

    smtp.UseDefaultCredentials = false;
    smtp.Credentials = c;
    smtp.Send(mm);

}
catch (Exception x)
{
    DateTime CurrentDateTime = DateTime.Now;
    String appDateTime = CurrentDateTime.ToString();

    String transactionLogEntry = "To: " + Recipient + " " + appDateTime + " " + x.Message;
    StreamWriter streamwriter = new StreamWriter(File.Open(MapPath("~/TransactionLog.txt"), FileMode.Append, FileAccess.Write, FileShare.Write));

    //Append to file
    streamwriter.WriteLine(transactionLogEntry);
    //Close file
    streamwriter.Close();
} 
```

记录的错误只是向提供的电子邮件地址发送邮件时发生超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:55:54.930

我用它来获取隐藏的 SMTP 消息。

```
String transactionLogEntry = "To: " + Recipient + " " + appDateTime + " " + GetFullErrorMessage(x);

.
.
.

private string GetFullErrorMessage(Exception e)
    {
        string strErrorMessage = "";
        Exception excpCurrentException = e;

        while (excpCurrentException != null)
        {
            strErrorMessage += "\"" + excpCurrentException.Message + "\"";
            excpCurrentException = excpCurrentException.InnerException;
            if (excpCurrentException != null)
            {
                strErrorMessage += "->";
            }
        }

        strErrorMessage = strErrorMessage.Replace("\n", "");

        return strErrorMessage;
    } 
```

根据我的经验，根据您的描述，这与您的 SMTP 端口被 ISP 或您的服务器/网络主机阻止有关。祝你好运！

# android - Android：“android.support.v4.widget”与“android.widget”

> ID：14454466
> 
> 赞同：0
> 
> 时间：2013-01-22T08:37:38.720
> 
> 标签：android, widget, android-support-library

我不知道这之间的区别。我只知道从 API 4 到更高版本的“android.support.v4.widget”助手。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:04:15.610

支持包可以在 4.0 之前的版本、随它引入的小部件和功能上使用。

如果您确实为 4.0 和更早版本（例如 2.3）开发应用程序，则必须使用支持包而不是传统的小部件以避免这些版本上的运行时错误。

# macos - 在 macosx 上备份包的策略

> ID：14454467
> 
> 赞同：0
> 
> 时间：2013-01-22T08:37:44.057
> 
> 标签：macos, backup, packages

我正在编写一个程序，它可以像 rsync 一样跨文件系统同步文件，但是在处理包时我被卡住了。这些是系统识别为包含一组连贯文件的文件夹。Pages 和 Numbers 可以使用包而不是单一文件，例如，应用程序实际上是包。我的问题是我想保留最新版本并保留备份副本。据我所知，我有两个选择 -

1.  我可以将整个内容视为常规文件夹并逐项处理内容。
2.  我可以查看所有内容的所有修改日期，并为具有最近修改内容的那个保留完整的文件夹树。

我打算使用 (2)，然后我发现 iPhoto 库实际上是作为一个包存储的，这意味着即使只更改了一张照片，我也会复制整个库（10 甚至 100 千兆字节）。

我对（1）的担心是单独处理内容文件可能会破坏事情。我还没有真正想出一个好的解决方案来保证该软件包可以正常工作并且在某些情况下不会涉及不必要的巨大备份文件。如果只是 iPhoto，那么我可能会放入一个特殊情况，或者如果包大于某个用户指定的限制，则可能会更改策略。

包令人惊讶地神秘，系统将什么视为包似乎不仅仅是在文件夹上设置扩展属性的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:18:02.480

这取决于您如何对待“备份”版本。您是否保留每个文件的两个版本（当前和前一个），或两个版本的同步快照（即，如果文件在最近两次同步之间没有更改，您只存储一个版本）？

如果是同步的两个版本，包应该不是什么大问题——只需提供一种恢复“备份”版本的方法，如有必要，它将“备份”中更改的文件与当前未更改的文件拼接在一起同步。不过，有一些事情需要注意：确保正确处理在两个快照之间删除或添加的文件。

如果您要存储每个文件的两个版本，事情就会复杂得多——您需要一些方法来记录包中“一起”的文件版本。我认为在这种情况下，我很想只在包中的某些内容发生更改时仅将文件的备份版本存储在包中。例如，假设您同步了一个名为 preso.key 的包。在第二次同步时，修改了 preso.key/index.apxl.gz 和 preso.key/splash.png，因此这两个文件的旧版本存储在备份中。在第三次同步时， preso.key/index.apxl.gz 再次被修改，因此您存储它的新备份版本*并删除 preso.key/splash.png 的备份版本*。

顺便说一句，另一种节省空间的方法是硬链接。如果您想在不浪费空间的情况下存储一个大包的两个“完整”版本，只需存储每个未更改文件的副本并将其硬链接到两个备份中。

# sql-server - 数据库复制

> ID：14454474
> 
> 赞同：0
> 
> 时间：2013-01-22T08:38:20.750
> 
> 标签：sql-server, sql-server-2008

我有一个每分钟更新一次的数据库，我应该使用数据库进行一些事务。但是许多应用程序都使用同一个数据库，所以为了做我的交易，我可以在我的服务器中创建数据库的副本。当父数据库中的记录更新时，即使我的数据库中的值也应该更新。我只会使用重复的数据库来查询记录，不会有任何更新/插入。

有没有办法在 SQL SERVER 2008 中实现这一点

# android - 运动传感器有意义的图表 - 加速度计、陀螺仪和磁力计

> ID：14454475
> 
> 赞同：1
> 
> 时间：2013-01-22T08:38:31.773
> 
> 标签：android, sensors, android-sensors, tilt-sensor, sensor-fusion

我正在研究运动传感器 - 加速度计、陀螺仪和磁力计。我正在开发可以从这些硬件读取数据的 c 应用程序。我能够为他们的硬件板做到这一点。但我想以某种含义完整的形式向用户显示这些数据。我有一个图形库，可以为我绘制图形（折线图）、画线、圆、正方形和点。我想知道有什么特别的我可以用这些数据绘制的图表（意思是圆形、方形等）。我可以简单地显示 X、Y 和 Z 轴数据在转动运动传感器板时快速变化，但是是否有任何图表可以绘制并包含所有轴的这些传感器的数据，但可以生成有意义的图形/图表。像磁力计图表：[对于磁力计](http://www.google.co.in/imgres?hl=en&safe=active&sa=X&tbo=d&biw=1517&bih=705&tbm=isch&tbnid=5yYFxiZrPJ75FM%3a&imgrefurl=http://www.opticsinfobase.org/oe/fulltext.cfm?uri=oe-20-13-14201&docid=XDTUgQLbEgCZbM&imgurl=http://imagebank.osa.org/getImage.xqy%253Fimg%253DLmxhcmdlLG9lLTIwLTEzLTE0MjAxLWcwMDc&w=500&h=442&ei=-k7-UIvQKYPJmAWusIHYDw&zoom=1&iact=hc&vpx=256&vpy=163&dur=300&hovh=166&hovw=190&tx=120&ty=125&sig=100072393721147657172&page=2&tbnh=148&tbnw=168&start=32&ndsp=41&ved=1t:429,r:33,s:0,i:186)

我想知道用运动传感器值绘制完整图表的含义。Rgds，软软的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:53:26.463

您可以在 Android SDK 文档中找到一个不错的图表：

[http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-coords](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-coords)

# r - 以周、月、季度和年的形式获取日期之间的差异

> ID：14454476
> 
> 赞同：88
> 
> 时间：2013-01-22T08:38:32.210
> 
> 标签：r, date

我有两个日期让我们说`14.01.2013`和`26.03.2014`。

我想根据周（？）、月（在示例 14 中）、季度（4）和年（1）来获得这两个日期之间的差异。

你知道得到这个的最好方法吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-22T09:28:59.407

那这个呢：

```
# get difference between dates `"01.12.2013"` and `"31.12.2013"`

# weeks
difftime(strptime("26.03.2014", format = "%d.%m.%Y"),
strptime("14.01.2013", format = "%d.%m.%Y"),units="weeks")
Time difference of 62.28571 weeks

# months
(as.yearmon(strptime("26.03.2014", format = "%d.%m.%Y"))-
as.yearmon(strptime("14.01.2013", format = "%d.%m.%Y")))*12
[1] 14

# quarters
(as.yearqtr(strptime("26.03.2014", format = "%d.%m.%Y"))-
as.yearqtr(strptime("14.01.2013", format = "%d.%m.%Y")))*4
[1] 4

# years
year(strptime("26.03.2014", format = "%d.%m.%Y"))-
year(strptime("14.01.2013", format = "%d.%m.%Y"))
[1] 1 
```

`as.yearmon()`并且`as.yearqtr()`在包装中`zoo`。`year()`在包装中`lubridate`。你怎么看？

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-04-22T00:48:45.513

所有现有的答案都是不完美的（IMO），要么对所需的输出做出假设，要么不为所需的输出提供灵活性。

根据 OP 的示例和 OP 声明的预期答案，我认为这些是您正在寻找的答案（加上一些易于推断的其他示例）。

（这只需要基础 R，不需要 zoo 或 lubridate）

**转换为日期时间对象**

```
date_strings = c("14.01.2013", "26.03.2014")
datetimes = strptime(date_strings, format = "%d.%m.%Y") # convert to datetime objects 
```

**天数差异**

您可以在几天内使用差异来获得我们以后的一些答案

```
diff_in_days = difftime(datetimes[2], datetimes[1], units = "days") # days
diff_in_days
#Time difference of 435.9583 days 
```

**周差**

`units = "weeks"`周差是in的一个特例`difftime()`

```
diff_in_weeks = difftime(datetimes[2], datetimes[1], units = "weeks") # weeks
diff_in_weeks
#Time difference of 62.27976 weeks 
```

请注意，这与将 diff_in_days 除以 7（一周 7 天）相同

```
as.double(diff_in_days)/7
#[1] 62.27976 
```

**年差**

用类似的逻辑，我们可以从 diff_in_days 推导出年份

```
diff_in_years = as.double(diff_in_days)/365 # absolute years
diff_in_years
#[1] 1.194406 
```

您似乎期望年的差异为“1”，所以我假设您只想计算绝对日历年或其他东西，您可以通过使用轻松地做到这一点`floor()`

```
# get desired output, given your definition of 'years'
floor(diff_in_years)
#[1] 1 
```

**季度差异**

```
# get desired output for quarters, given your definition of 'quarters'
floor(diff_in_years * 4)
#[1] 4 
```

**月差**

可以将其计算为 diff_years 的转换

```
# months, defined as absolute calendar months (this might be what you want, given your question details)
months_diff = diff_in_years*12
floor(month_diff)
#[1] 14 
```

我知道这个问题很老，但鉴于我刚才还必须解决这个问题，我想我会添加我的答案。希望能帮助到你。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-22T09:20:16.137

数周以来，您可以使用函数`difftime`：

```
date1 <- strptime("14.01.2013", format="%d.%m.%Y")
date2 <- strptime("26.03.2014", format="%d.%m.%Y")
difftime(date2,date1,units="weeks")
Time difference of 62.28571 weeks 
```

但`difftime`不适用于持续数周的持续时间。
以下是`cut.POSIXt`用于这些持续时间的非常次优的解决方案，但您可以解决它：

```
seq1 <- seq(date1,date2, by="days")
nlevels(cut(seq1,"months"))
15
nlevels(cut(seq1,"quarters"))
5
nlevels(cut(seq1,"years"))
2 
```

然而，这是您的时间间隔所跨越的月数、季度数或年数，而不是以月、季度、年表示的时间间隔的持续时间（因为它们没有恒定的持续时间）。考虑到您对@SvenHohenstein 回答的评论，我认为您可以将`nlevels(cut(seq1,"months")) - 1`其用于您想要实现的目标。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-12-08T18:26:39.707

我只是为另一个问题写了这个，然后在这里偶然发现。

```
library(lubridate)

#' Calculate age
#' 
#' By default, calculates the typical "age in years", with a
#' \code{floor} applied so that you are, e.g., 5 years old from
#' 5th birthday through the day before your 6th birthday. Set
#' \code{floor = FALSE} to return decimal ages, and change \code{units}
#' for units other than years.
#' @param dob date-of-birth, the day to start calculating age.
#' @param age.day the date on which age is to be calculated.
#' @param units unit to measure age in. Defaults to \code{"years"}. Passed to \link{\code{duration}}.
#' @param floor boolean for whether or not to floor the result. Defaults to \code{TRUE}.
#' @return Age in \code{units}. Will be an integer if \code{floor = TRUE}.
#' @examples
#' my.dob <- as.Date('1983-10-20')
#' age(my.dob)
#' age(my.dob, units = "minutes")
#' age(my.dob, floor = FALSE)
age <- function(dob, age.day = today(), units = "years", floor = TRUE) {
    calc.age = interval(dob, age.day) / duration(num = 1, units = units)
    if (floor) return(as.integer(floor(calc.age)))
    return(calc.age)
} 
```

使用示例：

```
my.dob <- as.Date('1983-10-20')

age(my.dob)
# [1] 31

age(my.dob, floor = FALSE)
# [1] 31.15616

age(my.dob, units = "minutes")
# [1] 16375680

age(seq(my.dob, length.out = 6, by = "years"))
# [1] 31 30 29 28 27 26 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-22T08:51:52.763

这是一个解决方案：

```
dates <- c("14.01.2013", "26.03.2014")

# Date format:
dates2 <- strptime(dates, format = "%d.%m.%Y")

dif <- diff(as.numeric(dates2)) # difference in seconds

dif/(60 * 60 * 24 * 7) # weeks
[1] 62.28571
dif/(60 * 60 * 24 * 30) # months
[1] 14.53333
dif/(60 * 60 * 24 * 30 * 3) # quartes
[1] 4.844444
dif/(60 * 60 * 24 * 365) # years
[1] 1.194521 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-11-04T16:34:08.583

这里仍然缺少`lubridate`答案（虽然[Gregor 的功能](https://stackoverflow.com/a/27364453/7941188)是建立在这个包上的）

lubridate[时间跨度文档](https://www.rdocumentation.org/packages/lubridate/versions/1.7.4/topics/timespan)对于理解周期和持续时间之间的差异非常有帮助。我也喜欢[lubridate 备忘单](https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf)和[这个非常有用的线程](https://data.library.virginia.edu/working-with-dates-and-time-in-r-using-the-lubridate-package/)

```
library(lubridate)

dates <- c(dmy('14.01.2013'), dmy('26.03.2014'))

span <- dates[1] %--% dates[2] #creating an interval object

#creating period objects 
as.period(span, unit = 'year') 
#> [1] "1y 2m 12d 0H 0M 0S"
as.period(span, unit = 'month')
#> [1] "14m 12d 0H 0M 0S"
as.period(span, unit = 'day')
#> [1] "436d 0H 0M 0S" 
```

期间不接受以周为单位。但是您可以将*持续时间*转换为周数：

```
as.duration(span)/ dweeks(1)
#makes duration object (in seconds) and divides by duration of a week (in seconds)
#> [1] 62.28571 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 11 月 4 日创建)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-22T08:50:50.460

试试这个一个月的解决方案

```
StartDate <- strptime("14 January 2013", "%d %B %Y") 
EventDates <- strptime(c("26 March 2014"), "%d %B %Y") 
difftime(EventDates, StartDate) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-03T06:26:03.130

更“精确”的计算。也就是说，不完整的周/月/季度/年的周/月/季度/年数是该周/月/季度/年中日历天数的分数。例如，2016-02-22 和 2016-03-31 之间的月数是 8/29 + 31/31 = 1.27586

内嵌代码的解释

```
#' Calculate precise number of periods between 2 dates
#' 
#' @details The number of week/month/quarter/year for a non-complete week/month/quarter/year 
#'     is the fraction of calendar days in that week/month/quarter/year. 
#'     For example, the number of months between 2016-02-22 and 2016-03-31 
#'     is 8/29 + 31/31 = 1.27586
#' 
#' @param startdate start Date of the interval
#' @param enddate end Date of the interval
#' @param period character. It must be one of 'day', 'week', 'month', 'quarter' and 'year'
#' 
#' @examples 
#' identical(numPeriods(as.Date("2016-02-15"), as.Date("2016-03-31"), "month"), 15/29 + 1)
#' identical(numPeriods(as.Date("2016-02-15"), as.Date("2016-03-31"), "quarter"), (15 + 31)/(31 + 29 + 31))
#' identical(numPeriods(as.Date("2016-02-15"), as.Date("2016-03-31"), "year"), (15 + 31)/366)
#' 
#' @return exact number of periods between
#' 
numPeriods <- function(startdate, enddate, period) {

    numdays <- as.numeric(enddate - startdate) + 1
    if (grepl("day", period, ignore.case=TRUE)) {
        return(numdays)

    } else if (grepl("week", period, ignore.case=TRUE)) {
        return(numdays / 7)
    }

    #create a sequence of dates between start and end dates
    effDaysinBins <- cut(seq(startdate, enddate, by="1 day"), period)

    #use the earliest start date of the previous bins and create a breaks of periodic dates with
    #user's period interval
    intervals <- seq(from=as.Date(min(levels(effDaysinBins)), "%Y-%m-%d"), 
        by=paste("1",period), 
        length.out=length(levels(effDaysinBins))+1)

    #create a sequence of dates between the earliest interval date and last date of the interval
    #that contains the enddate
    allDays <- seq(from=intervals[1],
        to=intervals[intervals > enddate][1] - 1,
        by="1 day")

    #bin all days in the whole period using previous breaks
    allDaysInBins <- cut(allDays, intervals)

    #calculate ratio of effective days to all days in whole period
    sum( tabulate(effDaysinBins) / tabulate(allDaysInBins) )
} #numPeriods 
```

如果您发现上述解决方案不起作用的更多边界情况，请告诉我。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-29T19:43:51.200

这是找出`lubridate`包中年份差异的简单方法：

```
as.numeric(as.Date("14-03-2013", format = "%d-%m-%Y") %--% as.Date("23-03-2014", format = "%d-%m-%Y"), "years") 
```

这将返回 1.023956

`floor()`如果你不想要小数，你可以使用。

# titanium - Titanium Appcelerator - 我应该使用合金框架吗？

> ID：14454478
> 
> 赞同：10
> 
> 时间：2013-01-22T08:38:47.333
> 
> 标签：titanium, appcelerator, titanium-mobile

我正在使用 Titanium Appcelerator 开发一个应用程序。

这是一个简单的 iOS 抽认卡应用程序，允许用户滚动选择外来词，并在卡片的“另一面”查看等效的英文翻译（翻转过渡！）。每张卡都有一个音频链接，用户也可以选择一些选项。

**我想知道是否有人推荐使用[合金框架](https://github.com/appcelerator/alloy)？**
它是否加快了开发时间？
是否有不适合合金的用例？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T14:24:08.930

我认为您的应用程序绝对适用于合金，同样适用于钛合金的一般工作。要考虑的关键事项之一是使用 Alloy 不一定会加快开发时间。那不是目标，目标是分离关注点（模型视图控制器），并提供跨平台和多种形式因素的支持。如果您纯粹对开发速度感兴趣，请坚持使用常规 Titanium。

但是，它可以加快开发时间的地方在于您的持久性策略，模型的 sql 集成是内置在 Alloy 中的。所以，如果你想创建的这个抽认卡应用程序让用户在他们的手机上创建抽认卡，然后再使用它们，我肯定会选择 Alloy 来利用模型的东西。

请注意，文档有点稀疏，我将一个现有的客户项目移植到 Alloy 并且确实不得不在很多事情上找到我自己的方式，但这不是一个简单的应用程序。

本质上，如果你想 1) 发布到多个平台和形式因素并且没有偏头痛，2) 有一个内置的易于使用的持久性策略，3) 能够在以后维护你的代码，或者有其他人看看它，就能知道发生了什么，那么我肯定会使用合金。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T09:30:45.587

这里有一些链接可以帮助您了解更多关于合金框架的信息，

1[官方应用加速器文档](http://docs.appcelerator.com/titanium/latest/#!/guide/Alloy_Quick_Start)

2[关于合金框架的介绍](http://www.slideshare.net/karthi-anubavam/appcelerator-titanium-alloy)

3[谷歌组：Appc Ti Alloy](https://groups.google.com/forum/?fromgroups=#!forum/appc-ti-alloy)

4 [appcelerator/alloy in github](https://github.com/appcelerator/alloy)

# delphi - 如何从 Delphi 2010 中同时包含数字和字母的文件中读取一行？

> ID：14454482
> 
> 赞同：0
> 
> 时间：2013-01-22T08:39:01.333
> 
> 标签：delphi, file, delphi-2010

我有一个文本文件，在任何给定的行上都有以文本格式和数字格式表示的数据。像这样的东西：

```
Dog 5 4 7 
```

如何在 Delphi 中编写一个文件读取例程来读取这一行并将读取的值分配给正确的变量（“Dog”分配给字符串变量，“5”、“4”和“7”分配给实数或整数变量）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T09:01:30.463

您可以使用`SplitString`from`StrUtils`将字符串分成几部分。然后用于`StrToInt`转换为整数。

```
uses
  StrUtils;
....
var
  Fields: TStringDynArray;
....
Fields := SplitString(Row, ' ');
StrVar := Fields[0];
IntVar1 := StrToInt(Fields[1]);
IntVar2 := StrToInt(Fields[2]);
IntVar3 := StrToInt(Fields[3]); 
```

`StrToFloat`如果您有浮点值，显然可以替代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:47:51.670

从绝地代码库中获取 TJclStringList。

在第一步中，您获取一个列表并执行 .LoadFromFile 将文件拆分为行。在第二步中，您遍历了这些行并通过这些行设置辅助字符串列表，并以空格作为分隔符。然后你遍历辅助字符串列表并做你想做的事。

*   [http://wiki.delphi-jedi.org/wiki/JCL_Help:IJclStringList.Split@string@string@Boolean](http://wiki.delphi-jedi.org/wiki/JCL_Help:IJclStringList.Split@string@string@Boolean)
*   [根据分隔符将字符串拆分为字符串数组](https://stackoverflow.com/questions/2625707)
*   [https://stackoverflow.com/search?q=%5Bdelphi%5D+string+split](https://stackoverflow.com/search?q=%5Bdelphi%5D+string+split)

像那样

```
var slF, slR: IJclStringList; ai: TList<integer>; s: string; i: integer;
    action: procedure(const Name: string; Const Data: array of integer);

slF := TJclStringList.Create; slF.LoadFromFile('some.txt');
slR := TJclStringList.Create;
for s in slF do begin
    slR.Split(s, ' ', true);
    ai := TList<Integer>.Create;
    try
       for i := 1 to slR.Count - 1 do
           ai.Add(StrToInt(slR[i]));
       action(slR[0], ai.ToArray);
    finally ai.Free; end;
end; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T14:17:32.507

您可以将`File of TRecord`, 与 TRecord 一起使用。例如：

```
type TRecord = packed record
  FName : String[30];
  Val1: Integer;
  Val2: Integer;
  Val3: Integer;
end; 
```

和简单的程序：

```
procedure TMainForm.Button1Click(Sender: TObject);
var
  F: file of TRecord;
  Rec : TRecord;
begin
  AssignFile(F, 'file.dat');
  try
    Reset(F);
    Read(F, Rec);
  finally
    CloseFile(F);
  end;
end; 
```

# ember.js - EmberJs - 如何在视图加载后更新 Handlebars 模板内容？

> ID：14454483
> 
> 赞同：3
> 
> 时间：2013-01-22T08:39:02.357
> 
> 标签：ember.js, handlebars.js

Ember 中是否有任何方法可以更新 Handlebars 模板内容并动态重新渲染依赖视图？

我尝试使用`Ember.TEMPLATES`and`Ember.Handlebars.compile`方法，但没有奏效，[JSFiddle 在这里可用](http://jsfiddle.net/VTP4n/)，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:09:24.283

我不知道你为什么要这样做，但如果只是为了测试，这里有一个工作小提琴[http://jsfiddle.net/VTP4n/2/](http://jsfiddle.net/VTP4n/2/)。

Ember 将模板作为计算属性缓存在视图中，因此我将覆盖它并调用`rerender`视图。我什至不会考虑在生产中使用它。

直到最近，它就像覆盖模板然后调用一样简单`view.notifyPropertyChange('template')`，但是使用新的容器内容，干净地完成它要复杂得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:17:01.757

捕获您希望用户在模板中操作的任何内容作为视图/控制器的属性，并为其创建绑定作为计算属性或将观察者附加到它。通过这种方式，您可以动态创建视图并将其附加到文档中您想要的任何位置。

# node.js - Node.js：同一消息的多个副本

> ID：14454484
> 
> 赞同：1
> 
> 时间：2013-01-22T08:39:03.270
> 
> 标签：node.js, message, plc

我的应用程序使用 node.js 时遇到问题。我编写了一个小应用程序，允许网页和 PLC 之间的通信。与web页面的通信基于socket.io，与PLC的通信基于net.createConnection。

我的应用程序从网页接收命令，然后使用标准读取/写入协议创建消息并将这些消息发送到 PLC。PLC 响应也基于 F/W 协议，当从我的应用程序接收到响应消息时，它应该解码并仅将少量信息发送到网页。

所有过程都在工作，但我看到在每次操作之后（如果获取或写入并不重要），来自 PLC 的消息会再复制一次。例如：

```
Fetch operation -> Response: Data
Fetch operation -> Response: Data Data
Fetch operation -> Response: Data Data Data
... 
```

我已经使用wireshark检查这是否是PLC问题，但消息是正确的并且只有一个。我认为 node.js 缓冲区或类似的东西有问题。

有什么建议吗？

这是代码：

```
/***
    Fetch-Write protocol in Node.js
    Massimo Milluzzo - massimo.milluzzo@gmail.com
***/

// Packages needed
var httpd = require('http').createServer(handler);
var io = require('socket.io').listen(httpd);
var fs = require('fs');
var net = require('net');

// Connection variables
var host = "192.168.0.220";     // Ip of PLC
var port = 2002;                // Port for the comunication with PLC
httpd.listen(4000);             // Listening the browser on port 4000
var conn = null;                // Manage the connection
var message = null;             // Message

// Manage HTML request
function handler(req, res) {
    fs.readFile(__dirname + '/index.html',
        function(err, data) {
            if (err) {
                res.writeHead(500);
                return res.end('Error loading index.html');
            }
            res.writeHead(200);
            res.end(data);
        }
    );
}

// When is created the connection of the socket
io.sockets.on('connection', function (socket) {
    console.log('connected');

    // Test function
    socket.on('message', function(content) {
        console.log(content);
        socket.emit('serverMessage', 'I\'m here');
    });

    // Need to write -> set the message
    socket.on('write', function(content){
        // See fetch-write protocol documentation
        message = new Uint8Array([83,53,16,1,3,3,3,8,0x01,content[0],0,content[1],0,content[2],255,2,0,content[3]]);
        connect(content);
    });

    socket.on('fetch', function(content) {
        // See fetch-write protocol documentation
        message = new Uint8Array([83,53,16,1,3,5,3,8,0x01,content[0],0,content[1],0,content[2],255,2]);
        connect(content);
    });

    // Main function for the communication with PLC
    function connect(content){
        // Console writing
        console.log(content);
        socket.emit('serverMessage', 'Message received...try to comunicate with PLC');

        // If there isn't a connection create one
        if(conn == null)
            conn = net.createConnection(port,host);

        // If gets an error print it
        conn.on('error', function(err) {
            console.log('Error in connection:', err);
            socket.emit('error',""+err);
        });

        // On connection close write it
        conn.on('close', function() {
            console.log('connection got closed');
            socket.emit('serverMessage','connection got closed');
        });

        // When data is received decode the message
        conn.on('data', function(data) {
            console.log('some data has arrived:', ""+data);

            // See fetch-write protocol documentation
            if((data[0] == 0x53) && 
                (data[1] == 0x35) && 
                (data[2] == 0x10) && 
                (data[3] == 0x01) && 
                (data[4] == 0x03) && 
                ((data[5] == 0x06) || (data[5] == 0x04)) && // 06: fetch | 04: write
                (data[6] == 0x0F) && 
                (data[7] == 0x03) && 
                ((data[8] == 0x00) || (data[8] == 0x02) || (data[8] == 0x03) || (data[8] == 0x06)) && // Error code, see fetch-write protocol documentation
                (data[9] == 0xFF) && 
                (data[10] == 0x07))
            {
                switch(data[8]){
                    // No error
                    case 0x00:
                        // Fetch
                        if(data[5] == 0x06){
                            // Get the response of PLC
                            var i;
                            var mex = "";
                            for(i = 16; i<data.length; i=i+2){
                                mex = mex + "[" + data[i].toString(16) + " " + data[i+1].toString(16) + "]";
                            }
                            // Write it
                            socket.emit('serverMessage','Value read: ' + mex);
                            mex = "";
                        }
                        // Write
                        else if(data[5] == 0x06){
                            socket.emit('serverMessage','PLC updated');
                        }
                    break;
                    // Error 02: Requested block does not exist
                    case 0x02:
                        socket.emit('error','Requested block does not exist');
                    break;
                    // Error 03: Requested block is to small
                    case 0x03:
                        socket.emit('error','Requested block is to small');
                    break;
                    // Error 06: No valid ORG ID
                    case 0x06:
                        socket.emit('error','No valid ORG ID');
                    break;
                    // Any other code, warning because not exist in the protocol
                    default:
                        var temp = ""+data[8];
                        socket.emit('error','Unknown error ID ['+temp+']');
                    break;
                }
            }
            // The message doesn't correspond to the Fetch/Write protocol
            else{
                socket.emit('error','Error while talking with PLC');
            }
            data = "";
        });

        // Write the client message on the socket
        conn.write(new Buffer(message,'ascii'), function() {
            console.log('data was written out');
            socket.emit('serverMessage','data was written out');
        });
    }
}); 
```

**！！！更新 ！！！**

我做了一些其他的测试，结果是没有真正的消息排队，测试的结果是：

```
Data
Data1    Data1
Data     Data     Data
Data2    Data2    Data2    Data2
Data3    Data3    Data3    Data3    Data3
Data1    Data1    Data1    Data1    Data1    Data1 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:21:29.423

**解决了**

最后，我找到了一个解决方案，而且非常简单：问题是每次有操作时，都会添加一个*新*的“数据”监听器。

为避免这种情况，我不得不将代码更改为：

```
conn.on('data', function(data) {
    ...
} 
```

到：

```
conn.once('data', function(data) {
    ...
} 
```

# ruby - URI.parse 使“方案”部分冻结

> ID：14454494
> 
> 赞同：2
> 
> 时间：2013-01-22T08:39:34.337
> 
> 标签：ruby

谁能解释我以下的奇怪之处？

```
1.9.3-p286 :029 > u = URI.parse("http://www.nevermind.org")
 => #<URI::HTTP:0x007f87499a5c90 URL:http://www.nevermind.org>
1.9.3-p286 :030 > u.component.map {|c| u.send(c).frozen?}
 => [true, false, false, false, false, false, false] 
```

为什么看在上帝的份上（仅）解析的 url 的“方案”部分被冻结？查看 URI 源并没有带来任何合理的答案。

# php - Symfony2 身份验证自定义提供程序的“错误凭据”

> ID：14454498
> 
> 赞同：1
> 
> 时间：2013-01-22T08:39:44.420
> 
> 标签：php, authentication, symfony, provider

我有一个项目，通过 mysql 数据库使用用户名和密码进行简单身份验证。我有 3 个字段的简单身份验证表单：通过、用户和 yubico 密钥。我想要两种身份验证变体：通过 login+pass 和仅通过[yubico key](http://www.yubico.com/)。现在，我通过[本主题](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)中的教程创建了自定义身份验证提供程序。

结果，它不起作用。我得到这个错误日志：

> 异常 'Symfony\Component\Security\Core\Exception\BadCredentialsException' 与 E:\Dropbox\hmciAdmin\vendor\symfony\symfony\src\Symfony\Component\Security\Core\Authentication\Provider\UserAuthenticationProvider 中的消息 'Bad credentials'。 php:70 堆栈跟踪：#0 E:\Dropbox\hmciAdmin\app\cache\dev\classes.php(183): session_start() #1 E:\Dropbox\hmciAdmin\app\cache\dev\classes.php( 277): Symfony\Component\HttpFoundation\Session\Storage\NativeSessionStorage->start()

我的代码在这里：

*   [https://dl.dropbox.com/u/30086473/Authentication/Firewall/YubicoListener.php](https://dl.dropbox.com/u/30086473/Authentication/Firewall/YubicoListener.php)
*   [https://dl.dropbox.com/u/30086473/Authentication/Provider/YubicoProvider.php](https://dl.dropbox.com/u/30086473/Authentication/Provider/YubicoProvider.php)
*   [https://dl.dropbox.com/u/30086473/Authentication/Token/YubicoToken.php](https://dl.dropbox.com/u/30086473/Authentication/Token/YubicoToken.php)
*   [https://dl.dropbox.com/u/30086473/Authentication/Token/config/services.yml](https://dl.dropbox.com/u/30086473/Authentication/Token/config/services.yml)
*   [https://dl.dropbox.com/u/30086473/Authentication/Token/config/config/security.yml](https://dl.dropbox.com/u/30086473/Authentication/Token/config/config/security.yml)

**更新：**

*   [https://dl.dropbox.com/u/30086473/YubicoFactory.php](https://dl.dropbox.com/u/30086473/YubicoFactory.php) - 这里是工厂

**更新 2：**

我解决了这个问题。问题是我对两种类型的授权都使用了相同的 html 表单，但是有必要将 yubico 密钥发送到受保护页面的 url。现在一切正常。谢谢大家的帮助。

# usb - PC 到移动 USB 通信

> ID：14454501
> 
> 赞同：1
> 
> 时间：2013-01-22T08:40:08.577
> 
> 标签：usb

我在我的 PC 上使用**Windows 7 作为操作系统。**我正在寻找创建一个应用程序，我将在其中以编程方式向 Mobile 发送 AT 命令。到目前为止，我希望通过 PC 和移动设备之间的 USB 数据线连接来实现这一目标。我最初的方法是使用 JAVA。虽然我很快意识到大多数用于 JAVA 和 USB 端口之间通信的 API 开发对于 Windows 来说已经死了，而且这些 API 都不支持 Windows 7。有人可以建议哪种语言最适合这样做吗？

谢谢，伊山·阿加瓦尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:44:32.930

**Android**要与 PC 建立连接，您需要使用`adb`命令（Android SDK）转发相同的端口，例如：

```
adb forward tcp:7612 tcp:7612 
```

在**Java**中，它看起来像：

```
private int port = 7612;
....

/**
 * Runs the android debug bridge command of forwarding the ports
 *
 */
private void execAdb() {
    // run the adb bridge
    try {
        String runP = "adb forward tcp:" + port + " tcp:" + port + "";

        System.out.println("Run command through cmd: " + runP);

        Process p=Runtime.getRuntime().exec(runP);
        Scanner sc = new Scanner(p.getErrorStream());
        if (sc.hasNext()) {
            while (sc.hasNext()) System.out.println(sc.next());
            System.out.println("Cannot start the Android debug bridge");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

之后，您可以实现任何 TCP 客户端/服务器代码，因为端口已定义，并且您可以使用默认 IP，例如：127.0.0.1

对于**iOS** ，使用 Objective C 语言。

# android - SQLite 删除并重新创建表

> ID：14454508
> 
> 赞同：6
> 
> 时间：2013-01-22T08:40:19.233
> 
> 标签：android, sqlite, sql-drop

如何删除并重新创建包含更新信息的表？

例如; 我的应用程序中有一个包含 5 条记录的表。

```
ID     Entry
1      a
2      b
3      c
4      d
5      e 
```

现在，当我删除一条记录时，可以说 ID 3 表变为

```
 ID     Entry
1      a
2      b
4      d
5      e 
```

我怎样才能删除它，并重新创建它成为这样：

```
 ID     Entry
1      a
2      b
3      d
4      e 
```

实际上删除是由用户控制的，因此任何记录都可以随时删除。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T09:15:55.940

您可以执行以下操作：删除要删除的行：

```
 public boolean deleteRow(int id) 
      {
         return db.delete(YOUR_TABLE, ROW_ID + "=" + _id, null) > 0;
       } 
```

将剩余条目（仅条目，而不是 id）读入 ArrayList，删除您的表：

```
 db.execSQL("DROP TABLE IF EXISTS " + YOUR_TABLE); 
```

并重新创建您的表。然后 ID 编号将再次按顺序从 1-XX

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T16:20:07.360

我知道这是一篇旧帖子，但我想我会根据您的评论为可能与您做同样事情的其他人澄清事情：

> 删除记录时，删除过程由当前选定的行完成，因为我最多只能选择第 4 行，因此永远无法删除 ID 5。

你真的不应该重新创建你的 ID。如果它们被用作另一个表中的键，它会搞砸事情，另外，如果你有一个大型数据库，重新创建它们只会浪费时间，而实际上没有必要。

您应该做的是保存一个 id 数组和一个条目数组，这样您就可以根据他们选择的行知道要删除哪个 id（或链接 id 和值的其他方式，以便以后获取它们）。

在上面的示例中，在有人删除了 id 为 3 的行后，您的数组将如下所示：

```
entries = { "a","b","d","e" }
ids = { 1,2,4,5 } 
```

如果有人选择“e”，这是第四个项目，您只需从表中删除 id 等于 ids 数组中的第四个值，在本例中为 5。

这样，如果不断添加和删除项目，您的数据库可能会以 2、34、56 和 435 的 ID 结束。这没关系，因为您的代码将跟踪并知道要删除哪个 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T20:41:10.960

另一种方法

```
public boolean deleteTable(int id) {
    SQLiteDatabase database = dbHelper.getReadableDatabase();
    final String whereClause = DBHelper.COLUMN_ID + "=?";
    final String whereArgs[] = {String.valueOf(id)};
    int affectedRows = database.delete(DBHelper.TABLE_NAME_OGR, whereClause, whereArgs);
    return affectedRows > 0;
} 
```

# javascript - 如何检查 Facebook 页面是否被用户喜欢？

> ID：14454512
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:40:35.690
> 
> 标签：javascript, facebook

我的页面上有一个喜欢的按钮，我只想检查用户是否喜欢该页面的天气。以下是我的代码。我正在展示那些喜欢该页面的用户的面孔。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="my-page-url" data-width="175" height="400" data-show-faces="true" data-stream="false" data-header="false" border_color="#CCCCCC"></div> 
```

提前致谢， Asif Hameed

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:38:39.110

FB.api('/me', function(response) {
var user_id = response.id;
var page_id = your_page_id;
var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
var the_query = FB.Data.query(fql_query);
the_query.wait(function(rows) {
if (rows.length == 1 && rows[0].uid == user_id) { //做任何你想做的事情
} else {
//不喜欢.. }
});
});

# asp.net - ASP.Net 网页仅在 LAN 上可用

> ID：14454513
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:40:39.187
> 
> 标签：asp.net, iis-7

我有 asp.net web 应用程序，我希望人们只能从我的公司网络 (LAN) 使用它，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:46:32.623

你可以

*   使用防火墙阻止结果连接！这是最安全的。
*   使用登录页面并只允许注册用户。
*   不太安全的方法是检查应用程序内每个连接的 ips。

要检查 ips，请在 BeginRequest 上读取客户端 IP，检查其是否[在专用网络范围内，](http://en.wikipedia.org/wiki/Private_network)或者放置您喜欢的其他 ip，如果不是，则关闭连接：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    if(!IsPrivateNetwork(MyCurrentContent.Request.ServerVariables["REMOTE_ADDR"])
    {
        HttpContext.Current.Response.TrySkipIisCustomErrors = true;
        HttpContext.Current.Response.StatusCode = 403;
        HttpContext.Current.Response.End();
        return ;    
    }
}

public bool IsPrivateNetwork(string sMyIpString)
{
    long TheIpTranslate = AddressToNum(sMyIpString);

    if (TheIpTranslate >= 0)
    {
        // 192.168.0.0 192.168.255.255
        if (TheIpTranslate >= 3232235520 && TheIpTranslate <= 3232301055)
            return true;

        // 10.0.0.0 10.255.255.255
        if (TheIpTranslate >= 167772160 && TheIpTranslate <= 184549375)
            return true;

        // 172.16.0.0 172.31.255.255
        if (TheIpTranslate >= 2886729728 && TheIpTranslate <= 2887778303)
            return true;
    }

    return false;
}

public long AddressToNum(string cAddress)
{
    IPAddress MyIpToCheck = null;

    if (IPAddress.TryParse(cAddress, out MyIpToCheck))
    {
        return AddressToNum(MyIpToCheck);
    }
    else
    {
        return -1;
    }
}

public long AddressToNum(IPAddress Address)
{
    byte[] b = BitConverter.GetBytes(Address.Address);

    if (b.Length == 8)
        return (long)(((long)16777216 * b[0]) + ((long)(65536 * b[1])) + ((long)(256 * b[2])) + b[3]);
    else
        return 0;
} 
```

# .net - .NET 本地化工具

> ID：14454514
> 
> 赞同：15
> 
> 时间：2013-01-22T08:40:47.703
> 
> 标签：.net, localization, resx

是否有任何工具可以简化 .NET 中的本地化工作？我的意思是，从开发人员的角度来看，在 VS 中使用 resx 文件非常难看。例如，如果我需要将字符串添加到资源中，我必须手动将其添加到具有不同文化的所有资源文件中。而且我不知道有什么工具可以告诉我特定文化的资源文件中是否缺少字符串，等等。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T14:40:23.187

我刚刚找到了我正在寻找的简单 VS 插件！ [http://visualstudiogallery.msdn.microsoft.com/3b64e04c-e8de-4b97-8358-06c73a97cc68](http://visualstudiogallery.msdn.microsoft.com/3b64e04c-e8de-4b97-8358-06c73a97cc68) 它是免费的！资源管理器！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:12:43.760

我已经尝试过[crowdin.com](https://crowdin.com/)并且效果很好。这也是一个免费的在线。

*   很好，快速的支持。
*   编辑 resx 文件很容易。
*   还支持广泛的其他资源文件。
*   如果需要，很容易邀请志愿者帮助您翻译项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T12:56:56.933

我为 Visual Studio 开发人员及其翻译人员销售专业的本地化工具。它确实可以满足您的要求，但我可以从中获利，因此我不想在这里公开宣传它（以符合网站的规则）。请参阅我的个人资料以获取链接地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T10:04:41.290

Google for .NET Localization，你会发现很多 3rd 方工具。

我建议查看 Visual Studio 附带的 ResGen.exe [http://msdn.microsoft.com/en-US/library/ccec7sz1(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/ccec7sz1(v=vs.80).aspx)

另一个建议：使用您的资源创建一个 Excel 文件，并使用公式，构建最终输出以放置在 txt 文件中。

之后，只需使用 ResGen 创建 resx 文件。

相关说明：创建应用程序时始终使用 resx 文件。当有人问您：“这个应用程序可以本地化为意第绪语吗？”时，您将获得好处。希望你不会回答：Oy Vey。:D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T12:16:50.477

ResGen 与 Visual Studio 一起提供。它是一个基本编辑器，显示本地化 .net 时需要更改哪些文件。我不建议围绕它建立本地化流程。

专用于该任务的质量工具将为您提供更好的支持。它们促进最佳实践，并与行业标准翻译记忆库、术语等有联系。这些是本地化的重要概念。

更好的可以自动化，以便您的语言程序集在源语言的新构建之后立即生成。

谷歌 .net 软件本地化以获得良好的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T22:19:26.033

您可以将所有翻译键值对放在电子表格中，然后从那里生成源文件，而不是手动管理 .resx 文件。

这就是我在我的项目中解决它的方式。我用 VBA 宏创建了一个 Excel 电子表格，它生成 .resx 文件。管理电子表格要容易得多。您可以只插入或删除行，找出并填充缺失值，然后再次生成源文件。

您可以在这里下载我的示例（也适用于 xcode 或 eclipse btw）： http: [//members.home.nl/bas.de.reuver/files/multilanguage.zip](http://members.home.nl/bas.de.reuver/files/multilanguage.zip)

# c# - 将 JSON 对象发布到 WCF 服务对象始终为空

> ID：14454515
> 
> 赞同：3
> 
> 时间：2013-01-22T08:40:49.530
> 
> 标签：c#, asp.net, ajax, wcf, wcf-data-services

我在使用“帖子”时遇到了麻烦。我让用户对象总是为空。我不知所措，已经研究了好几天，所以如果有人有任何想法，请帮忙！提前致谢

我的 Jquery 看起来像这样

```
$(document).ready(function () {
        $("#register").click(function (e) {
            e.preventDefault(); //stop the submit event for the submit button
            var Name = $("#register_username").val();
            var Email = $("#register_email").val();
            var Password = $("#register_password").val();
            var Contact = $("#register_contactNumber").val();
            var Adress = "Seteelte Town";
            var chkUserType = document.getElementById("identity_type_2").checked;
            var userinfo = { "request": { "Action": { "Address": Adress, "Children": [], "CityId": 0, "Email": Email, "HomeUser": chkUserType, "ImagePath": "", "IpAdress": "", "IsActive": false, "LastLogin": "", "Name": Name, "Password": Password, "PhoneNumber": Contact, "ProfileHit": 0, "ShowEmail": false, "ShowPhoneNumber": false, "SubscribeNews": false, "UserID": 0}} };

            alert("Input: " + JSON.stringify(userinfo));
            $.ajax({
                type: "POST",
                url: '/Services/Membership.svc/AccountAdd',
                data: JSON.stringify(userinfo),
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    alert(data.Result);
                },
                error: onError
            });
        });
    }); 
```

我的 WCF 的 C# 代码是

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Membership : IMembership
    {

        public SMProcessResponse<bool> AccountAdd(SMProcess<User> request)
        {
            return new SMProcessResponse<bool>(MembershipController.AccountAdd(request.Action));
        }
} 
```

处理请求的 C# 代码是

```
[DataContract(Namespace = "")]
    public class SMProcess<T> : BaseRequest
    {

        public SMProcess(T obj)
        {
            // TODO: Complete member initialization
            this.Action = obj;

        }
        [DataMember]
        public T Action { get; set; }
    } 
```

这是我的 Web.config

```
<configuration>
        <connectionStrings>
   //here is connection string
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

  </system.web>
  <system.serviceModel>
    <services>
      <service name="SelectionMall.Services.Membership">
        <endpoint address="" behaviorConfiguration="Services.webHttpBehavior" binding="webHttpBinding" contract="SelectionMall.Services.IMembership" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="Services.webHttpBehavior">
          <webHttp defaultOutgoingResponseFormat="Json" automaticFormatSelectionEnabled="true"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:59:14.880

您需要将正确的[WebInvoke](http://msdn.microsoft.com/en-in/library/system.servicemodel.web.webinvokeattribute.aspx)属性应用于 WCF 操作。查看您的 JSON 请求，我相信它应该类似于

```
[OperationContract]
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json))]
SMProcessResponse<bool> AccountAdd(SMProcess<User> request) 
```

请注意，需要包装的主体样式（或`WrappedRequest`），以便将输入 JSON 视为已包装的（即参数名称将是传入 JSON 的属性）。

除此之外，您可能会遇到`SMProcess<T>`反序列化问题，因为它没有任何无参数构造函数。

无论如何，我建议您从简单的服务声明（和实现）开始，例如

```
public SMProcessResponse<bool> AccountAdd(User request)
{
   return new SMProcessResponse<bool>(MembershipController.AccountAdd(request));
} 
```

然后开始添加额外的嵌套等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:21:52.047

你的 JSON 请求应该是这样的

```
[OperationContract]
        [WebInvoke(UriTemplate = "AccountAdd", Method = "POST")]
        SMProcessResponse<bool> AccountAdd(SMProcess<User> request); 
```

和你的 JSon 数据

```
var userinfo = { "request": { "Action": { "Address": Adress, "Children": [], "CityId": 0, "Email": "waheed@gmail.com", "HomeUser": true, "ImagePath": "C:/Waheed.jpg", "IpAdress": "192.168.1.3", "IsActive": true, "LastLogin": "\/Date(1358852299323+0500)\/", "Name": "Waheed Iqbal", "Password": "111111", "PhoneNumber": "+923226270150", "ProfileHit": 10, "ShowEmail": true, "ShowPhoneNumber": true, "SubscribeNews": true, "UserID": 1}} } 
```

编辑 Web.config 后

```
<behavior name="Services.webHttpBehavior">
          <webHttp defaultOutgoingResponseFormat="Json" automaticFormatSelectionEnabled="true" defaultBodyStyle="WrappedRequest" />
        </behavior> 
```

干杯

# php - 将 DATETIME MySQL 列与 php 年进行比较

> ID：14454516
> 
> 赞同：1
> 
> 时间：2013-01-22T08:40:50.113
> 
> 标签：php, mysql, date, datetime

我有一个表格，其中包含带有`created_at` `DATETIME`类型列的项目。我想退回 2013 年生产的所有物品。

我想我可以这样做：

```
SELECT * FROM `items`
WHERE `created_at` > '2012' AND `created_at` < '2014' 
```

但理想情况下，我希望能够执行以下操作：

```
SELECT * FROM `items`
WHERE `created_at` = '2013' 
```

我认为这失败了，因为它会查找`DATETIME`2013-01-01 00:00:00 的项目。有没有办法通过`created_at`在比较时将 MySQL 转换为一年来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:42:36.063

使用列[`year`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)函数`created_at`

```
WHERE YEAR(`created_at`) = '2013' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T08:44:42.153

```
SELECT * FROM items WHERE YEAR(created_at) = 2013 
```

参考：[MySQL](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:45:39.743

使用 DATE_FORMAT mysql 函数。

```
SELECT * FROM `items`
WHERE DATE_FORMAT(created_at, ,'%Y') = '2013' 
```

# php - 会话自动停止

> ID：14454520
> 
> 赞同：1
> 
> 时间：2013-01-22T08:41:00.380
> 
> 标签：php

我从 stackoverflow 学到了很多东西。我遇到了一个奇怪的问题，就是这样。

我有代码检查会话是否已经开始，如果没有，我开始会话。那里没问题

这是我的代码

```
If (session-id = "")
{Session_start();
/* setting session ids */
} 
```

我有一个包含文件，可以将表单提交到同一个脚本（上面的脚本）

但是当通过 post 方法返回页面时，会话又开始了，就好像会话停止了一样。

编辑

如果 (session_id == "")

错误有一个错字。

我最初遇到的问题是，在第一次初始化时，我设置了会话数组

```
/* If statement */
$_Session['test'] = ['1','2','3','4','5'];
/* end of if statement */ 
```

当用户向同一个脚本提交数据时，会话数组将为空，报错。我解决它的方法是将 session_start 放在脚本的顶部，而不是放在 if 语句上。这似乎解决了问题，感谢您的所有投入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:45:30.963

我想你想要这个

```
if(session_id() == '') {
     Session_start();
    /* setting session ids */
} 
```

> [`session_id()`](http://php.net/manual/en/function.session-id.php)返回当前会话的会话 ID，如果没有当前会话（不存在当前会话 ID），则返回空字符串 ("")。

* * *

你也打电话 `session_start()`不止一个，因为没有问题

> [`session_start()`](http://php.net/manual/en/function.session-start.php)- 开始新的或恢复现有的会话

* * *

在php版本中**`>=5.4.0`**你也可以使用[`session_status()`](http://php.net/manual/en/function.session-status.php)它

> [`session_status()`](http://php.net/manual/en/function.session-status.php)用于返回当前会话状态。

* * *

**已编辑**

好吧，在某些情况下，两次启动会话似乎是个问题

我引用 [DaveRandom的评论](https://stackoverflow.com/users/889949/daverandom)

> 如果会话已经开始。你不能重新开始。你不能恢复没有停止的东西。这将阻止消息出现，但我不明白你为什么要首先打电话`session_start()`。另请注意，`session_write_close()`这不会破坏本地 $_SESSION 变量，因此请确保在关闭会话后不要尝试写入它。

所以你可以这样做

```
<?php

  var_dump(isset($_SESSION));
  session_start();
  var_dump(isset($_SESSION));
  session_write_close();
  var_dump(isset($_SESSION));
  session_start(); 
```

[键盘](http://codepad.viper-7.com/ucQElu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:46:01.283

检查是否`$_SESSION`设置。

```
isset($_SESSION) or session_start(); 
```

[http://codepad.viper-7.com/I3i9lv](http://codepad.viper-7.com/I3i9lv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:43:08.077

您需要在每个页面的顶部开始会话，以保持会话。这不会清除正在运行的会话，因此您可以删除它启动的条件。

# android - LibGdx 不能在浮动空间中正确绘制一个圆圈

> ID：14454522
> 
> 赞同：1
> 
> 时间：2013-01-22T08:41:13.937
> 
> 标签：android, math, libgdx

我的相机设置为标准化空间（高度为 1 个单位，宽度为 1.5 个单位）。但似乎 ShapeRenderer 的圆形算法仅适用于整数空间。有解决方法吗？

```
public void create() {
    camera = new OrthographicCamera();
    camera.setToOrtho(false, 1.5f, 1f);
    shapes = new ShapeRenderer();
}

public void drawScene() {
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    shapes.setProjectionMatrix(camera.combined);
    shapes.begin(ShapeType.Circle);
    shapes.setColor(1, 0, 0, 1);
    shapes.circle(0.75f, 0.5f,0.5f);
    shapes.end();
} 
```

![应该是一个圆圈](../Images/f74a02c567aef6769667539cc0d66c59.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:04:00.210

`ShapeRenderer`使用[6 倍半径的立方根](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/glutils/ShapeRenderer.java#L474)来估计画一个圆需要多少段。

在您的情况下，您最终得到 4 个段（6 * 0.793 大约为 4.76）。这就是你所看到的。

`ShapeRenderer`根据[文档](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html)假设单位是屏幕像素，因此这些是合理的估计。

# android - 从 Eclipse 创建新的 ActionBar 图标

> ID：14454523
> 
> 赞同：0
> 
> 时间：2013-01-22T08:41:16.110
> 
> 标签：android

当我想使用 Eclipse 的“创建新图标”创建一个 ActionBar 图标并从我的资源中选择我想要的那个时。而不是正确地创建它，它只会得到它的形状并将它全部涂成灰色。例如，如果我有一个带有箭头的圆形 .png，它只会得到圆形而不是箭头图像。我该如何克服它？

**编辑**

![在此处输入图像描述](../Images/38dcc785577e1d5fb1aaf8427fee11b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:01:07.833

[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html) （使用该工具需要 Chrome 浏览器）可以为您的应用自动生成许多不同的图形资产。它知道每种图标类型、每个 Android 版本的正确尺寸。更好的是，此工具已集成到 Android 开发人员工具 (ADT) 中，以允许将新资产无缝集成到您的应用程序中。

# mysql - mysql - 如何按仅给定月份和年份的日期范围获取数据

> ID：14454526
> 
> 赞同：2
> 
> 时间：2013-01-22T08:41:19.353
> 
> 标签：mysql

下面是我的mysql表：

```
--------------------------
ID  Date_From   Date_To
--------------------------
1   2011-02-01  2011-02-28
2   2012-09-01  2012-09-30
3   2012-10-01  2012-10-30
4   2012-11-01  2012-11-30
5   2012-12-01  2012-12-30
6   2013-01-01  2013-01-30
7   2014-03-01  2014-03-31 
```

我有这个mysql语句：

```
SELECT *
FROM TIME_PERIOD
WHERE
  (YEAR(DATE_FROM) >= '2012' AND MONTH(DATE_FROM) >= '10')
  AND (YEAR(DATE_TO) <= '2013' AND MONTH(DATE_TO) <= '12'); 
```

它只返回带有`ID` `3, 4,`和的记录`5`。我期望返回的是带有`ID` `3, 4, 5,`and的记录`6`。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:50:03.153

您需要使用这样的查询：

```
SELECT * FROM TIME_PERIOD WHERE 
(YEAR(DATE_FROM) >= '2013' OR (YEAR(DATE_FROM) >= '2012' AND
 MONTH(DATE_FROM) >= '10')) AND 
(YEAR(DATE_TO) <= '2013' AND MONTH(DATE_TO) <= '12'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:44:46.853

记录 6 中的月份似乎是 01。它不会返回，因为 MONTH(DATE_FROM) >= '10'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T08:46:50.433

在 id 6 中，起始日期是 2013-01-01，它失败了，`2013-01-01`因为月份是 01，小于 10。正如你提到的所有条件，所以任何 false 都不会包括该记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T09:03:45.943

您可以创建一个单独的列作为 year_month 像 YYYYMM 并创建两个触发器来自动更新列 ON INSERT 和 ON UPDATE 如果需要。

然后查询将很简单

WHERE year_month >= 201210 和 year_month <= 201312

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:07:44.100

你可以使用这个命令来得到你的结果......

```
SELECT * FROM `TIME_PERIOD` WHERE `DATE_FROM` >= '2012-10-01' AND `DATE_TO` <= '2013-01-30' 
```

# c# - 我想反编译使用 Visual Studio C# 创建的 dll，而不是 .NET dll。.NET Reflector 正在声明

> ID：14454534
> 
> 赞同：-4
> 
> 时间：2013-01-22T08:41:58.210
> 
> 标签：c#, decompiling

我想反编译使用 Visual Studio C# 创建的 dll，而不是 .NET dll。.NET Reflector 声明“不是 .NET 反编译器”。是否存在任何其他反编译器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T08:46:31.093

您确定错误消息不是“不是 .NET 程序集”吗？（或类似的东西）; .NET 反射器在*很大程度上*是一个 .NET 反编译器。

如果您使用“visual studio c#”创建它，那么它就是一个 .NET 程序集。它什么都不知道。你确定它没有被混淆？你确定它是从“visual studio c#”创建的吗？

您可以在“ildasm”中试用它以快速查看其中的内容。

我怀疑您尝试读取的文件与 .NET 无关，也不是 .NET 程序集。也许一些 C/C++/java/*其他任何东西*/...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:44:38.680

看看[Jetbrains 的 DotPeek，](http://www.jetbrains.com/decompiler/)它是免费的，并且可以完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:46:24.280

用 C# 创建的 DLL 怎么可能不是 .NET dll？据我所知，C# 仅编译为 MSIL（目前..），因此 dll 必须是“.NET dll”（程序集）。或者你在谈论 C++，也许？

首先，您应该检查 dll 是托管的 (.NET) 还是非托管的。我曾经使用 pedump 来完成这项工作，但那是很久以前的事了。您应该寻找这样的工具，然后采取相应的行动。如果它是非托管 DLL，则需要使用不同的（并且更复杂的）技术来反编译它。

# c# - Powershell Import-Module 命令不适用于 c# api

> ID：14454544
> 
> 赞同：3
> 
> 时间：2013-01-22T08:42:52.197
> 
> 标签：c#, powershell, virtual-machine

Import-Module 命令在 powershell windows 控制台上工作正常，但相同的命令在 c# api 上不起作用。我正在使用这个项目来执行 powershell 脚本： http: [//www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)

它执行其中许多命令，但不执行“Import-Module 'c:\vm\vm.psd1'”命令。我尝试导入微软模块，但它也不起作用。如何使用 c# api 执行“Import-Module”命令？

也`add-pssnapin 'virtualmachinemanager'` 行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:44:47.530

尝试这样的事情来加载管理单元并执行你的命令：

```
using System.Management.Automation.Runspaces;

//...

var rsConfig = RunspaceConfiguration.Create();
using (var myRunSpace = RunspaceFactory.CreateRunspace(rsConfig))
{
    PSSnapInException snapInException = null;
    var info = rsConfig.AddPSSnapIn("FULL.SNAPIN.NAME.HERE", out snapInException);

    myRunSpace.Open();
    using (var pipeLine = myRunSpace.CreatePipeline())
    {
        Command cmd = new Command("YOURCOMMAND");
        cmd.Parameters.Add("PARAM1", param1);
        cmd.Parameters.Add("PARAM2", param2);
        cmd.Parameters.Add("PARAM3", param3);

        pipeLine.Commands.Add(cmd);
        pipeLine.Invoke();
        if (pipeLine.Error != null && pipeLine.Error.Count > 0)
        {
            //check error
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:49:43.410

尝试以这种方式加载模块：

```
PowerShell powershell = PowerShell.Create();
powerShell.Commands.AddCommand("Import-Module").AddParameter("Name", "c:\vm\vm.psd1'"); 
```

或者

```
PowerShell powershell = PowerShell.Create();
powershell.Commands.AddCommand("Add-PsSnapIn").AddParameter("Name", "virtualmachinemanager"); 
```

使用管道尝试创建一个`InitialSessionState`

```
InitialSessionState iss = InitialSessionState.CreateDefault();
           iss.ImportPSModule(new string[] { @"C:\vm\vm.psd1"});
           Runspace runSpace = RunspaceFactory.CreateRunspace(iss);
           runSpace.Open(); 
```

然后使用您的代码`pipeline`从加载的模块运行 cmdlet

# jquery - 当fancybox打开时在浏览器中保留滚动条

> ID：14454546
> 
> 赞同：0
> 
> 时间：2013-01-22T08:42:55.480
> 
> 标签：jquery, fancybox

当fancybox打开时，有没有办法让滚动条在浏览器中保持活动状态？当我单击打开一个花式框窗口的链接时，整个页面会跳到右侧，因为当框打开时滚动条处于非活动状态。

提前非常感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:06:03.933

为fancybox 2.1.3 版找到了这个：

```
$(".fancybox").fancybox({
        helpers : {
            overlay : {
                locked : false
            }
        }       
    }); 
```

这解决了问题:-)

# r - 使用 seq() 在 R 中生成时间序列的问题

> ID：14454547
> 
> 赞同：2
> 
> 时间：2013-01-22T08:43:03.907
> 
> 标签：r, seq

我想以 10 分钟的间隔创建一个从开始日期和时间 (t1) 到结束日期和时间 (t2) 的时间序列。

下面的代码适用于所有其他 t2 时间栏 23:50:00

```
library(chron)
t1 <- chron("1/1/2006", "00:00:00")
t2 <- chron("1/3/2006", "23:50:00")
deltat <- times("00:10:00")
tt <- seq(t1, t2, by = times("00:10:00")) 
```

我已经在 linux 和 windows 平台上的 Rstudio 以及 linux 上的终端上尝试过这段代码，但无济于事。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:59:53.110

你有一个浮点问题。为了解决这个问题，您可以在`t2`

```
t2 = chron("1/3/2006", "23:50:01")
seq(t1, t2, by = times("00:10:00")) 
```

在堆栈溢出时搜索浮点数。在 R 中，经典的例子是

```
R> sqrt(2)^2 ==2
[1] FALSE 
```

# routing - 如何在 OMNET++ 中使用 EtherHost

> ID：14454548
> 
> 赞同：1
> 
> 时间：2013-01-22T08:43:04.767
> 
> 标签：routing, omnet++

我正在构建一个模拟 IP 网络的模拟。简单来说，我使用两个与路由器连接的主机节点。我使用 FlatNetworkConfigurator 分配 IP。而我的另外两个主机是“EtherHost”，如下面的 ned 文件所示

```
package swtichtest.simulations;
import swtichtest.Txc;
import inet.nodes.inet.Router;
import inet.nodes.inet.StandardHost;
import inet.nodes.ethernet.EtherHost;
import inet.nodes.ethernet.EtherSwitch;
import ned.DatarateChannel;
import inet.networklayer.autorouting.ipv4.FlatNetworkConfigurator;

channel cable extends DatarateChannel
{
parameters:
    delay = 0.1us;
    datarate = 100Mbps;
}

network Tictoc
{
@display("bgb=539,141");
submodules:
    tic: EtherHost {
        @display("p=291,114");
    }
    toc: EtherHost {
        @display("p=401,33");
    }
    Rout: Router {
        @display("is=s;p=173,25");
    }
    configurator: FlatNetworkConfigurator {
        @display("p=22,25");
    }
connections:
    Rout.ethg++ <--> cable <--> tic.ethg;
    Rout.ethg++ <--> cable <--> toc.ethg;

} 
```

但我的问题是我应该在哪里添加我的逻辑来生成数据包。如果我更改从我的简单模块继承的 tic 和 toc ，那么我如何生成 IP 数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:41:27.190

你在这里有点困惑。EtherHost 可用于生成 RAW 以太网帧，因此其中不存在网络和传输层协议。另一方面，路由器需要帧内的 IP 数据。

如果您需要 TCP/IP 流量，您必须使用 StandardHost。当然，StandardHosts 也有以太网接口，所以你可以用电缆连接这些接口。如果您需要 IP，请忘记 EtherHost。

# joomla - 前端用户配置文件上的 AUP 点 - Joomla

> ID：14454555
> 
> 赞同：0
> 
> 时间：2013-01-22T08:43:24.973
> 
> 标签：joomla

我正在尝试将 AUP 与创建的 K2 插件规则集成，并且社区点正在后端工作，但我想在前端的用户配置文件中显示这些点。我在几个相关论坛上搜索了很多，但无法获得它。我还尝试为 AUP 安装 Next Rank & Combined Module，但它们都不起作用。任何人都可以帮我解决这个问题。我是 Joomla 的新手，所以我可能无法设置位置或其他东西。请帮帮我。

当前系统是： - AUP - 1.8.1 - K2 - 2.5.7 - Joomla 2.5.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:05:53.250

K2 使用模板系统，因此您需要进行编辑。`components/com_k2/templates`. 但是模板覆盖（请参阅[此处](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)的文档链接）更可取，因为当有 k2 更新时它们不会被覆盖。

然而，对于 alpha 用户点，这里有一个 k2 集成的[示例](http://www.alphaplug.com/index.php/forum/38-k2/18761-anyone-figure-out-the-rules-for-k2-v256.html)。请注意此链接（但可能任何在没有插件的情况下集成 k2 和 AUP 的方法）也需要编辑 k2 模型 - 这意味着在 k2 更新的情况下这将被覆盖。如果您需要更新 k2，您应该牢记这一点！

# android - 如何在 Youtube Android Player API 中使用 Youtube 视频广告？

> ID：14454556
> 
> 赞同：0
> 
> 时间：2013-01-22T08:43:28.730
> 
> 标签：android, youtube-api

宣布新的 Android 视频播放器 API的[博客文章](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)指出，该 API 支持 YouTube 广告。但是，在文档中没有关于此广告的任何内容。

YouTube 广告如何整合到我的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:27:43.407

如果视频的所有者请求了广告并允许嵌入，则将播放广告。内容的所有者是获得报酬的人。

如果您拥有内容，您可以将您的内容标记为广告并允许嵌入，您将获得报酬。

# jquery - 单击父元素

> ID：14454557
> 
> 赞同：1
> 
> 时间：2013-01-22T08:43:36.727
> 
> 标签：jquery, tree-traversal

我有很多麻烦`elrte.min.js`。如果我有这样的页面：

```
<div id="#main">
<div class="el-rte">
<ul><li id="thisistheelement"></li></ul>
</div>
<span class="edit_submit"></span>
</div> 
```

如果' **this** '是，我可以通过运行以下jQuery`#thisisthelement`来触发点击吗？`.edit_submit`

```
this.parents(".el-rte").siblings(".edit_submit").trigger('click'); 
```

是的，我知道这不是一个非常漂亮的方法，但我无法弄清楚如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:45:48.153

```
<span class=".edit_submit"></span> 
```

更新为：

```
<span class="edit_submit"></span> 
```

# .htaccess - 为什么这个带有 1 个变量的 .htaccess 不起作用？

> ID：14454558
> 
> 赞同：0
> 
> 时间：2013-01-22T08:43:49.610
> 
> 标签：.htaccess, variables

我试图得到这个，但我真的不知道为什么行不通。我尝试更改事物和参数但不起作用：

```
RewriteCond %{QUERY_STRING} board=([0-9]+).0
RewriteRule ^forum/index\.php$ index.php?option=/$1? [R=301,L]

url:
www.abc.com/forum/index.php?board=13.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:20:33.937

它应该是这样的：

```
RewriteCond %{QUERY_STRING} board=([0-9]+)\.0
RewriteRule ^(forum/index\.php)/?$ index.php?option=/$1? [R=301,L] 
```

这样，反向引用 $1 `()`在正则表达式中获取组。

用圆括号内的内容进行相应的修改。

**更新**

```
RewriteCond %{QUERY_STRING} board=([0-9]+)\.0
RewriteRule ^forum/index\.php/?$ index.php?option=/%1? [R=301,L] 
```

反向引用 %1 获取前一个条件的正则表达式（板值）中的组。

# ruby-on-rails-3 - Rspec cookies.permanent，未定义的方法

> ID：14454565
> 
> 赞同：2
> 
> 时间：2013-01-22T08:44:20.233
> 
> 标签：ruby-on-rails-3, cookies, rspec

使用 bundle 运行 rspec 时出现错误，如下所示：

`undefined method 'permanent' for #<Rack::Test::CookieJar:0x00000003dd3990>`

我有以下代码`SessionsHelper`

```
cookies.permanent[:remember_token] = user.remember_token 
```

我正在使用`rvm`版本：

`rvm 1.17.9 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]`

红宝石版本：

`ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-linux]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T10:27:34.410

解决方案是定义ie 为哈希`sign_in`分配值的函数`cookies.permanent``spec/support/utilities.rb`

而不是赋值给`cookies.permanent[:remember_token]`，赋值给`cookies[:remember_token]`

# ruby-on-rails - 如何在 Rails 的循环中通过查询优化 has_many？

> ID：14454571
> 
> 赞同：1
> 
> 时间：2013-01-22T08:44:50.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, optimization, has-many-through, self-join

我有两个模型，具有这些关联：

```
class Product < ActiveRecord::Base
  has_many :side_orders
  has_many :garnishes, :through => :side_orders

  attr_accessible :garnishes_number
end 
```

装饰也是产品，所以它是一个自我加入的协会：

```
class SideOrder < ActiveRecord::Base
  belongs_to :product
  belongs_to :garnish, :class_name => "Product", :foreign_key => "garnish_id"

  attr_accessible :list_number
end 
```

一种产品可能有许多装饰物列表（以便客户在订购一种产品时可以选择不同的装饰物）。每个选择一个列表。一种产品的选择列表不超过“garnishes_number”。

在我的应用程序中，在管理部分，我必须执行以下操作：

```
<% Product.all.each do |product| %>
  <% for i in 0..(product.garnishes_number - 1) %>
     Lists of garnishes:
     <%= product.garnishes.where("side_orders.list_number = ?", i) %> <br />
  <% end %>
<% end %> 
```

这只是一个例子......问题是Rails对每个“i”值进行一次查询，所以如果一个产品有8个列表，Rails将对数据库执行8个查询......当产品超过数百个时，它变得非常缓慢......

有没有办法优化这样的查询？包含似乎不起作用...如果有人有任何想法或不同的逻辑，请不要犹豫回答。

**[编辑]**我想访问每个装饰列表这一事实很重要，因为我希望它们以这种方式出现在表格中：

```
<table>
  <thead>
    <td>Product</td>
    <td>List of garnishes </td>
  </thead>
  <tbody>
    <% Product.all.each do |product| %>
      <% for i in 0..(product.garnishes_number - 1) %>
        <tr>
          <td>product.name</td>
          <td>
              List number <%= i %>: 
              <%= product.garnishes.where("side_orders.list_number = ?", i) %>
          </td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table> 
```

我没有把它放在首位，因为我不希望我的问题太长......但是，我想我应该已经把它写下来以便我的问题可以更容易理解......对不起^ ^'

非常感谢！库尔加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:26:54.863

你可以通过以下方式做到这一点

```
<% Product.all.each do |product| %>
 <% temp = Array.new %>
 <% for i in 0..(product.garnishes_number - 1) %>
   <% temp.push(i) %>
 <%end%>   
  Lists of garnishes:
  <%= product.garnishes.where("side_orders.list_number in(?)", temp ) %> <br />
<% end %> 
```

这将为每个产品调用一次 where 查询

# sql - 简单的 Shell 脚本 - 如何在 PL/SQL 中做同样的事情

> ID：14454572
> 
> 赞同：0
> 
> 时间：2013-01-22T08:45:10.807
> 
> 标签：sql, oracle, shell, plsql, oracle10g

我有一个带有 SQL 代码的简单 shell 脚本：

*   使用 SQL*Plus（SQL 语句）生成批处理文件
*   检查 SQL*Plus 的输出是否超过 400 行（如果超过 400 行退出并将邮件写入运营团队）
*   如果少于 400 行 SQL*Plus 输出，则自动执行批处理文件

该脚本运行良好。我希望用 PL/SQL 编写相同的脚本（没有 Shell 代码）。这可能吗？你能给我提供代码吗（我正在学习 PL/SQL）。

数据库是 Solaris 上的 Oracle Database 10g Enterprise Edition Release 10.2.0.4.0。

```
#!/bin/ksh
. /opt/db/scripts/setpath.sh

generate_batch ()
{
sqlplus -S $DBUSER/$DBPASSWD@$ORACLE_SID <<EOF > /opt/db/scripts/tools/delete_connection/batchrun/batchrun.$(/bin/date '+%d%m%Y.%Hh')

set echo Off
set term On
set pages 0
set head off
set ver off
set feed off
set trims on
set linesize 20000

WITH data
    AS (SELECT user_id,
               jc_name,
               upd_time,
               RANK () OVER (PARTITION BY user_id ORDER BY upd_time ASC)
                  rk
          FROM user_jc
         WHERE user_id IN (  SELECT user_id
                               FROM user_jc
                              WHERE JC_NAME LIKE 'CFF\_S\_%' ESCAPE '\'
                           GROUP BY user_id
                             HAVING COUNT (user_id) > 1)
               AND JC_NAME LIKE 'CFF\_S\_%' ESCAPE '\')
SELECT    'DISCONNECT ent_user  FROM job_code WITH user_id = "'
   || user_id
   || '", jc_name = "'
   || jc_name
   || '";'
  FROM data
 WHERE rk = 1;

exit
EOF
}

sanity_check ()
{
line_nr=$(wc -l /opt/db/scripts/tools/delete_connection/batchrun/batchrun.$(/bin/date '+%d%m%Y.%Hh') | awk ' { print $1 } ')
if [ $line_nr -gt 400 ]; then
        (cat /opt/db/scripts/tools/delete_connection/mail_body.txt) | mailx -s "Alert: please manually execute /opt/db/scripts/tools/delete_connection/batchrun/batchrun.$DATE" -r test@example.com test2@example.com
        exit 1
        fi
}

run_batch ()
{
/opt/bmchome/bin/ess batchrun -A -i /opt/db/scripts/tools/delete_connection/batchrun/batchrun.$(/bin/date '+%d%m%Y.%Hh')
}

generate_batch && sanity_check && run_batch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:03:24.460

在 PL/SQL 中，我会反其道而行之：

1.  计算与您的查询匹配的连接数
2.  如果结果 > 400 发送电子邮件
3.  否则生成断开连接语句，可能带有`ALTER SYSTEM DISCONNECT SESSION`...

我当然不知道您的要求，但是可以通过资源配置文件来限制用户连接吗？

```
CREATE PROFILE myprofile LIMIT SESSIONS_PER_USER = 1;
ALTER USER myuser PROFILE myprofile; 
```

# asp.net - RFC 连接“错误的变体类型”

> ID：14454574
> 
> 赞同：0
> 
> 时间：2013-01-22T08:45:19.223
> 
> 标签：asp.net, abap, saprfc, sap-dotnet-connector

好吧，我正在使用 SapConnector dll 将 RFC 从 .Net 制作到 SAP。当我在 Windows 窗体应用程序中使用 dll 时，一切都很好，但是当我尝试在 ASP.Net 网站或 Web 应用程序中建立连接时，出现错误；

> 错误的变体类型

我的代码：

```
if (Connector.StartConnection())
    {
        try
        {
            Connector.AddFunction("Z_SCL_SOMETHING");
            Connector.AddFunctionInputParameter("WPERNR", "999999");
            Connector.CallFunction();
        }
   } 
```

我在这一行得到错误；

```
Connector.AddFunction("Z_SCL_SOMETHING"); 
```

另一个奇怪的情况是，在 Windows 窗体应用程序中，当我在**backgroundWorker**中进行此调用时，我再次遇到相同的错误。

关于这个错误的任何想法？

# php - 用正则表达式替换字符串

> ID：14454575
> 
> 赞同：1
> 
> 时间：2013-01-22T08:45:19.767
> 
> 标签：php, regex

我试图从这样的字符串中提取：

```
$message = #porrabarça per avui @RTorq el  @FCBar guanyarà per 3-1 al AC Milan 
```

'3-1'。作为数字 - 数字

我试过了

```
$message = preg_replace('/[0-9]\s*-\s[0-9]/i', '', $message); 
```

但它不起作用。它的输出与输入相同。

你能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T08:47:35.553

问题就`\s`在这里。

```
/[0-9]\s*-\s[0-9]/
           ^
           |
           +--- This makes a single space mandatory. 
```

你需要`\s*`那里。用来提取[`preg_match`](http://php.net/preg_match)任何东西。`preg_match`匹配并可选择将匹配设置为变量。从那里您可以提取匹配项。[`preg_replace`](http://php.net/preg_replace)替换匹配的内容。

```
preg_match("/\d+\s*-\s*\d+/", $message, $match);
$num = $match[0]; 
```

[http://ideone.com/BWKZQV](http://ideone.com/BWKZQV)

要替换使用此模式和空字符串作为替换字符串 in `preg_replace`。

更好的模式是使用 POSIX 字符类。它将匹配任何其他语言环境的任何类型数字字符。

```
/[[:digit:]]+[[:space:]]*-[[:space:]]*[[:digit:]]+/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:49:10.367

如果要替换字符串：

```
<?php  
$message="#porrabarça per avui @RTorq el  @FCBar guanyarà per 3-1 al AC Milan";

echo $message = preg_replace('/[0-9]+-[0-9]+/', '', $message);

?> 
```

如果您想获得匹配的组：

```
<?php  
$message="#porrabarça per avui @RTorq el  @FCBar guanyarà per 3-1 al AC Milan";

preg_match_all('/[0-9]+-[0-9]+/', $message, $matches);

print_r($matches);

?> 
```

# python - 使用python从excel中读取

> ID：14454577
> 
> 赞同：0
> 
> 时间：2013-01-22T08:45:25.503
> 
> 标签：python

我正在使用 xlrd 读取 excel 文件并将数据写入文件。现在我面临的问题是，在文件中，我从 excel 中获取整数数据作为浮点数，而在我有类似 000123 的地方，它被截断为 123。

我想从单元格中读取值并以相同的格式将其写入文件中。有没有办法我可以在任何地方将excel单元格作为文本读取？

请提出正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:56:24.050

您可以检查`cell.ctype`它是否是`XL_CELL_TEXT`或`XL_CELL_NUMBER`其他。

`XL_CELL_EMPTY, XL_CELL_DATE, XL_CELL_BOOLEAN, XL_CELL_ERROR, XL_CELL_BLANK`（其他可能的细胞类型：）

如果您的单元格是类型，`XL_CELL_TEXT`那么您应该能够获得“000123”的值。

如果您的单元格是类型，`XL_CELL_NUMBER`那么您`cell.value`可能是“123”。可以在 Excel 工作表中看到的“00123”值可能是 Excel 工作表中设置的格式设置的结果。我想这个格式信息也应该可以从工作表中提取出来。提取格式信息后，您应该能够通过结合格式信息和原始数字值“123”来重现值“000123”。

但是，我不确定 xlrd 模块是否可以提取您需要的所有格式信息。

查阅文档：[https ://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html)

或者源码来源：[https ://github.com/python-excel/xlrd/blob/master/xlrd](https://github.com/python-excel/xlrd/blob/master/xlrd)

# c# - RabbitMQ - 客户端未接收

> ID：14454582
> 
> 赞同：0
> 
> 时间：2013-01-22T08:45:45.377
> 
> 标签：c#, rabbitmq, messaging, windows-server-2008-r2

我已经在我的桌面 PC 上成功安装了 RabbitMQ，并且有一个小型控制台应用程序来发布消息和另一个来接收它们。这一切都很好。

现在我已经在我的应用服务器上安装了 RabbitMQ。使用管理控制台，我可以看到以下内容：

*   Exchange 已创建（主题模式，自动删除 = false
*   交换中不存在绑定（它们确实在桌面上运行）
*   客户端收不到消息
*   发布者和订阅者都不会引发任何异常

我在防火墙上打开了端口 5672（RabbitMQ）和 15672（管理控制台），并且可以成功地从我的桌面远程登录到这些端口上的服务器。此外，管理控制台工作正常。

## 版本详情

*   兔MQ：3.0.1
*   应用服务器：Windows 2008 Server R2 Standard
*   客户端：.Net 4.0
*   客户端库：RabbitMQ.Client（版本 3.0.1.0）

请询问您是否需要更多详细信息来提供帮助 - 很乐意提供。

谢谢，

格雷姆

# php - 想通过给出我自己的范围来阅读特定的行

> ID：14454590
> 
> 赞同：1
> 
> 时间：2013-01-22T08:46:05.717
> 
> 标签：php

我一直在准备一个代码，通过给出我的行范围来从文本文件中查找一些特定的行

```
$file         = new SplFileObject("TRIAL.txt");
$fileIterator = new LimitIterator($file, "40-01-0001", "40-01-0010");

foreach($fileIterator as $line) {
  echo $line, PHP_EOL;
  echo "<br>";
} 
```

我给这个代码。请有人告诉我这段代码中的错误。在此代码中，`"40-01-0001"`,`"40-01-0050"`是`X`逐行开始的`Y`。而且我需要阅读行与行之间的所有`X`行`Y`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:53:36.053

使用[splFileObject::seek](http://www.php.net/manual/en/splfileobject.seek.php)

```
$file = new SplFileObject('TRIAL.txt');
$file->seek(LINE_NUMBER);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:53:04.180

[`LimitIterator`](http://php.net/manual/en/class.limititerator.php)在构造函数中接受 3 个参数：

```
public __construct( Iterator $iterator [, int $offset = 0 [, int $count = -1 ]] ) 
```

所以它不能是字符串值 - 只是一个整数索引。

# c++ - 如何对任意排序的数据执行（几乎）无分支二进制搜索？

> ID：14454592
> 
> 赞同：3
> 
> 时间：2013-01-22T08:46:10.557
> 
> 标签：c++, binary-search, branch-prediction

如何以最好的可移植方式对任意排序数组执行（几乎）无分支二进制搜索？（例如，帮助编译器生成 CMOV 指令的代码对此非常有用。）

“几乎”是指“包含尽可能少的分支”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:46:10.557

这是我用 Visual C++ 2012（64 位）测试时`std::lower_bound`只有一个分支（即测试）的版本：`begin != end`

```
template<class FwdIt, class T, class P>
FwdIt branchless_lower_bound(FwdIt begin, FwdIt end, T const &val, P pred)
{
    while (begin != end)
    {
        FwdIt middle(begin);
        std::advance(middle, std::distance(begin, end) >> 1);
        FwdIt middle_plus_one(middle);
        ++middle_plus_one;
        bool const b = pred(*middle, val);
        begin = b ? middle_plus_one : begin;
        end = b ? end : middle;
    }
    return begin;
} 
```

支持 SSE2 的 32 位也可能能够使用 Conditional-Move 指令来获得类似的速度。

现在速度*应该*可以与小型阵列的线性搜索相媲美......但它可能值得检查。

* * *

有趣的是，我发现对于`vector<int>`我的 CPU 上最大（大约）45 的大小，线性搜索仍然更快！不知道为什么，或者我的测量是否准确......

* * *

事实证明，这并不比我的 i5 CPU 上的分支二进制搜索快。

# iphone - 如何将其中包含 HTML 标记的字符串显示为纯文本

> ID：14454600
> 
> 赞同：1
> 
> 时间：2013-01-22T08:46:48.590
> 
> 标签：iphone, ios

> **可能重复：**
> [从 iPhone 上的 NSString 中删除 HTML 标签](https://stackoverflow.com/questions/277055/remove-html-tags-from-an-nsstring-on-the-iphone)

我正在使用谷歌方向 api 在我的地图视图中显示地图，它给了我 HTML 方向字符串，其中包含 HTML 标记。

现在我想以纯文本形式显示该字符串我该怎么做。我的字符串在这里：

```
 Head <b>southwest</b> toward <b>GH Rd</b>
    Exit the roundabout onto <b>GH Rd</b><div style="font-size:0.9em">Go through 1 roundabout</div>
    At the roundabout, take the <b>1st</b> exit onto <b>Road Number 2</b><div style="font-size:0.9em">Pass by myonlinesearch.blogspot.com (on the left in 600&nbsp;m)</div>
    At the roundabout, take the <b>3rd</b> exit onto <b>CH Rd</b>
    At <b>Indroda Cir</b>, take the <b>2nd</b> exit onto <b>Gandhinagar Ahmedabad Rd/SH 71</b><div style="font-size:0.9em">Continue to follow Gandhinagar Ahmedabad Rd</div><div style="font-size:0.9em">Go through 1 roundabout</div>
    At the roundabout, take the <b>1st</b> exit onto <b>Sardar Patel Ring Rd</b>
    At <b>Ranasan Cir</b>, take the <b>3rd</b> exit onto <b>NH 8</b><div style="font-size:0.9em">Pass by Galaxy Restaurant (on the left in 4.3&nbsp;km)</div>
    Turn <b>left</b> onto <b>Galaxy Rd</b><div style="font-size:0.9em">Pass by Shiv Shakti Food Fort (on the left)</div>
    Turn <b>left</b> onto <b>NH 59</b>
    Turn <b>right</b><div style="font-size:0.9em">Go through 1 roundabout</div>
    Turn <b>right</b>
   Turn <b>left</b><div style="font-size:0.9em">Destination will be on the right</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:49:48.200

您可以使用正则表达式/谓词来删除 < & > 之间的所有字符。

**但是如果您的文本包含一些 <> 它将被删除**

```
 NSRange range;
  NSString *string;
  while ((range = [string rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound){
    string=[string stringByReplacingCharactersInRange:range withString:@""];
  }
  NSLog(@"Un block string : %@",string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:51:45.967

您将不得不通过解析器解析文本，解析这些文本非常容易，只需扫描行并在那里使用替换功能。

```
 [yourString stringByReplacingOccurrencesOfString:@"<b>"withString:""];
[yourString stringByReplacingOccurrencesOfString:@"</b>"withString:""]; 
```

这将为您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:57:04.047

要么你可以去..

```
-(NSString *) stringByStrippingHTML
{
  NSRange r;
  NSString *s = [[自我复制] autorelease];
  while ((r = [s rangeOfString:@"]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@""];
  返回 s;
}

```

或者更好地使用 NSString 类别从您的字符串中删除 HTML，即“GTMNSStringHTMLAdditions”。

# html - 在 html 表中显示 struts2 列表中的值

> ID：14454601
> 
> 赞同：2
> 
> 时间：2013-01-22T08:46:49.073
> 
> 标签：html, struts2

我有一个包含日期和状态的 Struts2 列表。前任。

```
listDate - listStatus 
12/12/12 - A 
13/12/12 - B 
14/12/12 - C 
15/12/12 - D 
16/12/12 - E 
17/12/12 - F 
18/12/12 - G 
19/12/12 - H 
```

我想将其显示为`html`.

`listDate`应该是列的标题，应该`listStatus`是数据值。

并且每一行应该只包含指定数量的 column ，比如 5。

像这样的前任

```
12/12/12 13/12/12 14/12/12

   A        B        C 
```

ETC

我使用了迭代器标签，如下所示：

```
 <s:iterator value="listvalues" var="lstdata" status="status">
    <s:if test="%{#status.index == 0}">
        <tr><td><s:property value="#lstdata.listDate"></s:property></td></s:if>
    <s:elseif test="%{#status.index%7 == 0}">
        </tr><tr><td><s:property value="#lstdata.listDate"></s:property></td>
    </s:elseif>
    <s:else>
    <td><s:property value="#lstdata.listDate"></s:property></td>
    </s:else> 
```

上面的代码可以逐行列出日期，每行包含 7 个日期。

我的要求是将状态放在每个日期下方。

此外，列应以星期日开始，以星期六结束。

因此，如果日期列表以星期二开始，前 2 个单元格中的数据应该是空的，但应该显示相应的日期。

我可以通过在 7 天内创建单独的列表来在操作类中执行此操作，但想知道是否有使用 html/`Struts2`标记的方法...请发送您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:33:42.173

你应该做这个：

1.构建自己的bean：

```
class MyBean {
    Date date;
    String status;
} 
```

2\. 填满你的豆子，`List<MyBean> list`确保它从星期天开始（试试`java.util.Calendar`）

3.展示你的bean使用`<s:iterator>`

```
<tr>
    <s:iterator value="list" var="var" status="status">
        <s:if test="#status.index%7==0"></tr><tr></s:if>
        <td>
            <s:property value="#var.date"/><br/>
            <s:property value="#var.status"/>
        </td>
    </s:iterator>
</tr> 
```

# jquery - 如何用 jquery 计算 tr 元素？

> ID：14454606
> 
> 赞同：2
> 
> 时间：2013-01-22T08:47:20.640
> 
> 标签：jquery

```
<table>
   <tr>
     <td>data</td>
     <td>data</td>
   </tr>
   <tr class='product_details'>
     <td>product details</td>
     <td>product details</td>
   </tr>
   <tr class='product_details'>
     <td>product details</td>
     <td>product details</td>
   </tr>
</table> 
```

我想计算类为 product_details 的表行。我如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:48:08.387

您可以使用`length`jQuery[类选择器的属性](http://api.jquery.com/class-selector/)

**[现场演示](http://jsfiddle.net/vw2SX/)**

```
len = $('.product_details').length //will find any element with class product_details 
```

如果您有与除 tr 以外的元素相同的类，那么

```
len = $('tr.product_details').length  //will find only tr with class product_details 
```

在表中查找，使用后代选择器，withing 表。

```
len = $('table tr.product_details').length 
```

如果您将 id 分配给表会更好，假设 id 是`table1`

```
len = $('#table1 tr.product_details').length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:48:53.457

```
var n = $("table tr.product_details").length;
alert(n); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:49:40.073

```
$(".product_details").length 
```

将返回具有`product_details`类的元素数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T08:54:13.220

尝试以下

```
$('table tr.product_details').length 
```

或者

```
$('table tr.product_details').size() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T08:48:36.197

```
var count = $('table tr.product_details').length;
```

# json - 同一页面上的多个dojo DataGrid不起作用

> ID：14454609
> 
> 赞同：1
> 
> 时间：2013-01-22T08:47:28.977
> 
> 标签：json, datagrid, dojo, dojox.grid

我需要在同一页面中显示三个 dojo Datagrid。每个数据网格都将使用自己的数据存储来显示数据。

我使用 JsonRestStore 来查询我的 REST 服务以显示在网格中。如果我在页面中使用一个 DataGrid，它可以正常工作。但是当我倾向于使用第二个数据网格时，它只显示第一个数据网格。如果我删除任何一个网格，它可以正常工作但不能一起工作。

我花了很多时间尝试了这么多替代方案，但我无法解决这个问题。我什至尝试调用 resize() 方法但没有用。

下面是我的代码示例代码。一个存储使用 json rest 存储，另一个使用带有 itemfile 读取存储的硬编码数据。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>My ECM Groups</title>
        <link rel="stylesheet" href="scripts/dojo/../dijit/themes/claro/claro.css">
        <style type="text/css">@import "scripts/dojo/../dojox/grid/resources/claroGrid.css";

            /*Grid needs an explicit height by default*/
            #grid {
                height: 60em;
            }</style>
 <script src='scripts/dojo/dojo.js'></script>
        <script> 

            dojo.require("dojox.grid.DataGrid");
            dojo.require("dojox.data.JsonRestStore");
            dojo.require("dojo.data.ItemFileWriteStore");

             dojo.require("dojo._base.lang");
              dojo.require("dojo.dom");
               dojo.require("dojo.domReady!");

            var allGroupsGrid, allGroupsStore;
            dojo.ready(function(){

  var data = {
      identifier: "id",
      items: []
    };
    var data_list = [
      { col1: "normal", col2: false, col3: 'But are not followed by two hexadecimal', col4: 29.91},
      { col1: "important", col2: false, col3: 'Because a % sign always indicates', col4: 9.33},
      { col1: "important", col2: false, col3: 'Signs can be selectively', col4: 19.34}
    ];
    var rows = 60;
    for(var i = 0, l = data_list.length; i < rows; i++){
        data.items.push(dojo._base.lang.mixin({ id: i+1 }, data_list[i%l]));
    }
    var store = new dojo.data.ItemFileWriteStore({data: data});

    /*set up layout*/
    var layout = [[
      {'name': 'Column 1', 'field': 'id', 'width': '100px'},
      {'name': 'Column 2', 'field': 'col2', 'width': '100px'},
      {'name': 'Column 3', 'field': 'col3', 'width': '200px'},
      {'name': 'Column 4', 'field': 'col4', 'width': '150px'}
    ]];

    /*create a new grid*/
    var grid = new dojox.grid.DataGrid({
        id: 'grid3',
        store: store,
        structure: layout,
        rowSelector: '20px'});

        /*append the new grid to the div*/
        grid.placeAt("gridDiv");

        /*Call startup() to render the grid*/
        grid.startup();

     allGroupsStore = new dojox.data.JsonRestStore({target:"resources/ecmgroups/allgroups/", idAttribute:"sid"});  
    var allGroupsLayout = [{'name': 'My ECM Groups', 'field': 'displayName', 'width': 'auto'}];

    /*create a new grid*/
    allGroupsGrid = new dojox.grid.DataGrid({
        id: 'grid',
        store: allGroupsStore,     
        structure: allGroupsLayout,
        rowSelector: '20px'});
          allGroupsGrid.placeAt("allGroupsGridDiv");
        allGroupsGrid.startup();

    });

</script>

<script>
    function renderSecondGrid()
    {
        alert(dijit.byId('grid'));

//dojo.query('div[id^="myGroupsGridDiv"]').forEach(function(node, index, arr) { 

    dijit.byId('grid3').resize(); 
    dijit.byId('grid').resize(); 
    }

</script>

    </head>
    <body>
        <input type="button" value="click" onclick="javascript:renderSecondGrid();">

        <div style="display:block ;width: 30%;height: 50%; float: right" id="allGroupsGridDiv">right</div>      
        <div style="display:block ;width: 30%;height: 50%; " id="gridDiv">custom</div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:03:37.893

我创建了一个包含多个 DataGrid 的页面。这是我页面中的一些示例代码。这都是javascript。

```
aHTML += "<div id='techDiv" + _userNumber + "'></div>";

...  aHTML has more <table> type tags too ...

var _optionsTable = dojo.create('table', {
    innerHTML : aHTML,
    id : 'optionsTable' + _userNumber,
    class : "UserTechTable"
});
_div.appendChild(_optionsTable);

_techStore = new dojo.data.ItemFileWriteStore({
    data : {
        identifier : 'uniqueId',
        items : techs
    }
});

...
var layout = [ [ {
    name : 'Delete',
    field : 'uniqueId',
    width : '80px',
    formatter : _makeDeleteButton
}, {
    'name' : 'Device',
    'field' : 'deviceCode',
    'width' : '40px'
}, {
    'name' : 'MAC',
    'field' : 'macCode',
    'width' : '40px'
}, {
    'name' : 'Layer',
    'field' : 'layerCode',
    'width' : '80px'
} ] ];

var _techGrid = new dojox.grid.DataGrid({
    id : 'techGrid' + _userNumber,
    store : _techStore,
    structure : layout
}, 'techDiv' + _userNumber);
_techGrid.startup(); 
```

如果您需要更多信息，请告诉我。

PS：您可能需要考虑将代码与标记分开。将 js 移至外部 *.js 文件。

# java - 尝试通过 ant 脚本运行 Java 服务器时无法分配请求的地址

> ID：14454610
> 
> 赞同：1
> 
> 时间：2013-01-22T08:47:32.197
> 
> 标签：java, linux, java-server

我必须通过 ant 任务执行已编译的 Java 服务器以进行分配，以便我可以为其构建客户端。我没有服务器的代码，但它应该在启动后在 localhost 的 8181 端口上运行。它可以在 Windows 和其他 linux 机器上运行，但我无法在这台机器上运行（crunchbang）。这是我得到的错误：

```
BUILD SUCCESSFUL
Total time: 1 second
root@drne:/home/wallen/uni/workspace/A5# ant run-server
Buildfile: /home/wallen/uni/workspace/A5/build.xml

setseed:

run-server:
     [java] Exception in thread "main" com.sun.xml.internal.ws.server.ServerRtException: Server Runtime Error: java.net.BindException: Cannot assign requested address
     [java]     at com.sun.xml.internal.ws.transport.http.server.ServerMgr.createContext(ServerMgr.java:102)
     [java]     at com.sun.xml.internal.ws.transport.http.server.HttpEndpoint.publish(HttpEndpoint.java:63)
     [java]     at com.sun.xml.internal.ws.transport.http.server.EndpointImpl.publish(EndpointImpl.java:171)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:113)
     [java]     at javax.xml.ws.Endpoint.publish(Endpoint.java:240)
     [java]     at it.polito.dp2.PJS.lab5.PJSInfoServer.main(Unknown Source)
     [java] Caused by: java.net.BindException: Cannot assign requested address
     [java]     at sun.nio.ch.Net.bind0(Native Method)
     [java]     at sun.nio.ch.Net.bind(Net.java:344)
     [java]     at sun.nio.ch.Net.bind(Net.java:336)
     [java]     at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199)
     [java]     at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
     [java]     at sun.net.httpserver.ServerImpl.<init>(ServerImpl.java:98)
     [java]     at sun.net.httpserver.HttpServerImpl.<init>(HttpServerImpl.java:50)
     [java]     at sun.net.httpserver.DefaultHttpServerProvider.createHttpServer(DefaultHttpServerProvider.java:35)
     [java]     at com.sun.net.httpserver.HttpServer.create(HttpServer.java:129)
     [java]     at com.sun.xml.internal.ws.transport.http.server.ServerMgr.createContext(ServerMgr.java:84)
     [java]     ... 5 more
     [java] Java Result: 1 
```

我尝试过的事情：

*   检查是否有另一台服务器在该端口上运行
*   以 su 运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:44:45.457

[该问题](https://stackoverflow.com/questions/8965155/cannot-assign-requested-address-jvm-bind)的答案表明，如果名称“localhost”无法解析为 IP 地址，则可能会发生这种情况。检查您的`/etc/hosts`文件并确保它具有`localhost`到地址的映射`127.0.0.1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:33:41.357

我设法解决了给我这个错误的原因，并且正如我在事情开始时所认为的那样，它与任何 java 代码都没有关系：我的环回接口奇怪地关闭了。 `ifconfig lo up`成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T21:44:46.883

确保仔细检查要部署到的服务器地址。我的服务器地址拼写错误，我得到了完全相同的错误......

我正在使用 Java 6 和 7 中包含的 Web 服务库：

```
Endpoint.publish("http://myservername.com/myapi", new ServiceHandler(appSettings)); 
```

仔细检查“myservername.com”的值，这是假设端口 80。如果您有其他端口（即 8080），那么命令将如下所示：

```
Endpoint.publish("http://yourservername.com:8080/myapi", new ServiceHandler(appSettings)); 
```

希望有帮助。

# c++ - 特征类中的成员函数“名称”？（通用适配器）

> ID：14454613
> 
> 赞同：1
> 
> 时间：2013-01-22T08:47:37.967
> 
> 标签：c++, adapter, policy, traits

我已经使用 CRTP 实施了一项策略。该策略要求`Base`该类具有一个名为 foo 的函数：

```
template<typename Base>
struct Policy<Base> {
  // ...
  Base* b(){ return static_cast<Base*>(this); }
  void do(){ b()->foo(); }
}; 
```

我有一个`Widget`使用我的策略的类。`Widget`实现`foo`，一切都很好：

```
struct Widget : Policy<Widget> {
  // ...
  void foo();
}; 
```

**问题：**我还有一个名为的类型，它在名为`OldWidget`的函数中实现了的功能：`foo``oldFoo`

```
struct OldWidget : Policy<OldWidget> {
  // ...
  void oldFoo();
}; 
```

我*不想*修改 OldWidget（除了使用策略扩展它）。我*不想*使用`AdaptedOldWidget`：

```
struct AdaptedOldWidget : OldWidget, Policy<AdaptedOldWidget> {
  void foo(){ oldFoo(); }
}; 
```

最好的办法是将我现有的`policy_traits`课程扩展到以下内容：

```
template<typename T>
struct policy_traits {};

template<>
struct policy_traits<Widget> {
  // typedefs...
  member_function_name = foo;
};

template<>
struct policy_traits<OldWidget> {
  // typedefs
  member_function_name = oldFoo;
}; 
```

这样我就可以像这样实施政策：

```
template<typename Base>
struct Policy<Base> {
  // ...
  Base* b() { return static_cast<Base*>(this); }
  void do(){ b()->policy_traits<Base>::member_function_name(); }
}; 
```

有没有在 C++ 中实现这样的东西？

**建议的解决方案**：我可以执行以下操作：

```
template<typename Base>
struct Policy<Base> : Policy_Member_Traits<Base> {
  // ...
  Base* b(){ return static_cast<Base*>(this); }
  void do(){ foo_wrapper(); }
};

template<typename T> struct Policy_Member_Traits { };
template<> struct Policy_Member_Traits<Widget> { 
  void foo_wrapper(){ static_cast<T*>(this)->foo(); }
};
template<> struct Policy_Member_Traits<OldWidget> { 
  void foo_wrapper(){ static_cast<T*>(this)->oldFoo(); }
}; 
```

必须希望有一种更好更简单的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:01:56.753

首先：所有函数的签名必须相同。然后你可以在你的内部设置一个带有成员函数地址的静态成员`policy_traits`，这样你以后就可以`Policy`使用它（从你的模板）调用所需的函数。

```
typedef void (*void_memfn_type)();

template<>
struct policy_traits<Widget> {
  static void_memfn_type const member_function_name = &Widget::foo;
};

template<>
struct policy_traits<OldWidget> {
  static void_memfn_type const member_function_name = &OldWidget::oldFoo;
}; 
```

然后：

```
template<typename Base>
struct Policy<Base> {
  // ...
  Base* b() { return static_cast<Base*>(this); }
  void do(){ b()->policy_traits<Base>::(*member_function_name)(); }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:19:07.783

这是一个如何选择性专业化的示例。首先，一些示例类：

```
#include <iostream>

struct Foo
{
    void foo() const { std::cout << "Foo::foo\n"; }
    void bar() const { std::cout << "Foo::foo\n"; }
};

struct Biz
{
    void old_foo() const { std::cout << "Fiz::old_foo\n"; }
    void bar() const { std::cout << "Fiz::foo\n"; }
};

struct Fiz
{
    void foo() const { std::cout << "Biz::foo\n"; }
    void old_bar() const { std::cout << "Biz::old_foo\n"; }
}; 
```

现在的特征：

```
template <typename T> struct Dispatch
{
    static void foo(T const & x) { x.foo(); }
    static void bar(T const & x) { x.bar(); }
};

template <> void Dispatch<Biz>::foo(Biz const & x) { x.old_foo(); }
template <> void Dispatch<Fiz>::bar(Fiz const & x) { x.old_bar(); } 
```

这是一个使用示例：

```
template <typename T> void dispatch(T const & x)
{
    Dispatch<T>::foo(x);
    Dispatch<T>::bar(x);
}

int main()
{
    Foo f;
    Biz b;
    Fiz c;

    dispatch(f);
    dispatch(b);
    dispatch(c);
} 
```

# java - Java字符串分割长度

> ID：14454616
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:47:58.873
> 
> 标签：java, string, split

```
System.out.println("neon.mems.cmu.edu/people/".split("/").length); // output is 2 
```

我正在做一些网址处理。令我惊讶的是，我刚刚得到了上面的结果。我认为元素的数量可能是拆分器的数量加一。

直到现在，我才意识到最后一个空字符串（或只是`null`）从拆分数组中截断。我想知道是否每种编程语言都是这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:49:30.297

不，并非每种编程语言都如此，并且没有通用规范，因此没有理由这样做。

**去**

```
a := strings.Split("neon.mems.cmu.edu/people/", "/")
fmt.Println(len(a)) // prints 3 
```

**Javascript**

在浏览器的控制台中输入：

```
"neon.mems.cmu.edu/people/".split('/') 
```

结果是

```
["neon.mems.cmu.edu", "people", ""] 
```

当匹配为空时你应该做什么并不是这个`split`概念显而易见或固有的。一个证明是旧的 Internet Explorer 版本[确实删除了那些空匹配](http://xregexp.com/cross_browser/)项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:56:58.413

> 为什么它被丢弃的空字符串？

`String#split(regx)`内部调用实际`String#split(regx,0)`执行`Pattern.compile(regex).split(this, limit);` -[代码片段](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/regex/Pattern.java#Pattern.split%28java.lang.CharSequence,int%29)

```
if (limit == 0)
        while (resultSize > 0 && matchList.get(resultSize-1).equals(""))
            resultSize--; 
```

如果 limit 为 0，则从 resultSize 中丢弃空字符串。

> 如何获得想要的结果？

`String#split(regx,limit)`使用得到想要的结果。

```
System.out.println("neon.mems.cmu.edu/people/".split("/",3).length); 
```

结果 ：

```
 3 
```

关于语言规范，我同意@dystroy

# export - 如何将带有代码的表导出到文件中

> ID：14454618
> 
> 赞同：4
> 
> 时间：2013-01-22T08:48:01.443
> 
> 标签：export, firebird

我想将 Firebird 数据库中的表导出到 CSV 文件中。使用 MySQL，我可以使用带有附加命令的 SQL，例如`INTO OUTFILE`. 这是一个例子：

```
SELECT a,b,a+b INTO OUTFILE '/tmp/result.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM test_table; 
```

此查询可以在多个 sql-query-tools（MySQL WB、HeidiSQL、ccenter）上提交。是否可以使用例如 FlameRobin 提交像上面这样的 SQL 语句来从 Firebird 导出数据？我可以通过菜单或其他工具（如 FBexport）使用 FlameRobin，但我更喜欢单代码解决方案，无需单击菜单或使用其他工具 (FBexport)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-05-30T13:37:34.310

我知道它有点晚了......但是有一种方法可以使用 OUTPUT ISQL 命令导出它。

它会像：

```
`OUTPUT C:\file_name.txt;`
`SELECT A, B, A+B FROM EXMAPLE_TABLE;`
`OUTPUT;` 
```

因此，您的 select 语句的内容将在您的 txt 文件中。

记得在使用 OUTPUT 之前创建空文件；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:37:58.510

Firebird 不直接支持。您必须使用一些工具（GUI 或 CLI）来执行此操作。

# c# - 如何使用 c# 中的 select 语句产生的值？

> ID：14454620
> 
> 赞同：-8
> 
> 时间：2013-01-22T08:48:07.847
> 
> 标签：c#, sql, database, select, collections

我有一个 SQL Server 2012 数据库，我希望使用 select 语句对其进行查询，并将出现的每个结果放在任何类型的集合类型中，例如：List

问题是我从来没有做过SQL Queering，我真的需要你的帮助，

> 我需要在名为“yt2016”的表中的标记列中搜索值...您可以通过编写代码来帮助我，我将非常感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:56:51.800

```
public class Foo
{
    // some properties
    public int Prop1 { get; set; }
    public string Prop2 { get; set; }
    // ...
}

public static IEnumerable<Foo> GetAllFoos(String columnFilter = null)
{

    const string sql = @"SELECT 
                    Columns ...
                 FROM 
                    dbo.TableFoo
                 WHERE
                    @SomeColumn IS NULL OR SomeColumn = @SomeColumn
                 ORDER BY
                     OrderColumn1 ASC, OrderColumn2 DESC";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        using (SqlCommand cmd = new SqlCommand(sql, connection))
        {
            if (columnFilter == null)
                cmd.Parameters.AddWithValue("@SomeColumn", DBNull.Value);
            else
                cmd.Parameters.AddWithValue("@SomeColumn", columnFilter);
            connection.Open();
            using (var rdr = cmd.ExecuteReader())
            {
                var list = new List<Foo>();
                while (rdr.Read())
                {
                    var foo = new Foo();
                    foo.Prop1 = rdr.GetInt32(0);
                    foo.Prop2 = rdr.GetString(0);
                    list.Add(foo);
                }
                return list;
            }
        }
    }
} 
```

一个更有针对性的例子可能是

```
using System;
using System.Data;
using System.Data.SqlClient;

public class DataAccess
{

    // This should be specific to your database.
    const string ConnectionString = 
        "Data Source=(local);Initial Catalog=Northwind;Integrated Security=true";

    const string TokenQuery @=
        "SELECT tokens FROM dbo.yt2016;"

    static IEnumerable<object> GetTokens()
    {
        using (var connection = new SqlConnection(connectionString))
        {
        // Create the Command and Parameter objects.
        var command = new SqlCommand(TokenQuery, connection);

        // Create and execute the DataReader, 
        // casting and yielding to the caller.
        connection.Open();
        using (var reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return reader[0];
            }
        }
    }
} 
```

# java - 空中应用程序 - faultCode:Client.Error.MessageSend

> ID：14454624
> 
> 赞同：0
> 
> 时间：2013-01-22T08:48:11.917
> 
> 标签：java, air, glassfish, blazeds

我有一个使用远程对象与服务器通信的 AIR 应用程序。当应用程序连接到我的本地主机服务器时，它可以完美运行。但是，一旦我将 url 更改为指向远程测试服务器，我就会收到以下错误：

```
fault.message: faultCode:Client.Error.MessageSend faultString:'Send failed'  
faultDetail:'Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: 
Failed: url: 'http://remoteserver:80/app/messagebroker/amf''
fault.name: Error
fault.faultcode: Client.Error.MessageSend
fault.faultstring: Send failed
fault.faultdetail: Channel.Connect.Failed error NetConnection.Call.Failed: HTTP:    
Failed: url: 'http://remoteserver:80/app/messagebroker/amf' 
```

什么可能导致此错误？我的本地服务器是 glassfish 3.1，远程服务器在 glassfish 前面使用 apache 进行负载平衡。当我在浏览器中导航到 amf 频道的 url 时，它会显示一个空白页面（这很好）。

我还注意到，当我使用 Eclipse 中的 tcp/ip 监视器时（我将 url 更改为指向 localhost 上的某个端口；tcp/ip 监视器将请求转发到远程服务器），应用程序工作正常，没有发生错误。尽管如此，它还是会在 url 上附加一个 jsessionid。

我该如何解决这个问题？

# javascript - 事务回调多次触发

> ID：14454626
> 
> 赞同：4
> 
> 时间：2013-01-22T08:48:39.503
> 
> 标签：javascript, sqlite, cordova, transactions, callback

今天我的应用程序遇到了一些非常奇怪的行为：我有这个函数来创建表，然后，成功后，继续编写代码。

```
db.transaction(function (tx) {
    tx.executeSql('CREATE TABLE IF NOT EXISTS newsDetail(id unique, title, text, created, createdTS, imageSmall, imageBig, facebook, gameNumber)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS lastModified(id unique, ts)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS teams(pos unique, name, games, gd, points, s, snv, gl, glo, goals)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS players(number unique, name, nickname, birthdate, height, married, children, profession, clubs, position, image)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS games(id unique, home, away, score, date, shortDate)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS galleryCategories(id unique, name, date, thumb, ordering)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS galleryImages(id unique, url, description, catid, ordering)');
    tx.executeSql('CREATE TABLE IF NOT EXISTS videos(id unique, url, title, image)');
}, errorCB, function () {
    loadData('newslist', createNewslist, true);
    loadData('refresh', loadNewOnes, true);
}); 
```

现在的问题是，成功回调函数被调用了 8 次。这是为什么？我已经使用这个代码几个月了，以前从来没有遇到过这个问题。有没有人遇到过类似的事情？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T07:18:15.950

很可能，您添加了一些多次调用该函数的代码。可能发生的情况是，由于该函数是异步的，如果您循环遍历它或运行不断调用该函数的代码，该代码将不会阻塞并等待您的函数完成执行。相反，它在不知道为什么会发生的情况下被多次调用。

您是否碰巧编写了围绕问题的测试，以便您知道什么被破坏了？

# windows-8 - Windows 8 Touch 桌面/笔记本电脑上的 Android 模拟器

> ID：14454637
> 
> 赞同：0
> 
> 时间：2013-01-22T08:49:13.573
> 
> 标签：windows-8, android-emulator

我知道为了支持多点触控，我们需要有一个设备来测试 Android 应用程序。

在这种情况下，我想知道是否可以通过在支持触摸的 Windows 8 笔记本电脑上运行的 Android 模拟器对 Android 应用程序上的基于触摸的操作进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:40:40.397

我不是该主题的权威，但我已经安装了[BlueStacks](http://www.bluestacks.com/)并在 Windows 8 上使用了带有触摸功能的 Android 应用程序，没有任何问题。至少基本的测试是可以做的，但是能不能做精细化或者性能测试我就不确定了。

# c# - 是否可以知道 RDLC 报告中的图像大小？

> ID：14454641
> 
> 赞同：1
> 
> 时间：2013-01-22T08:49:32.037
> 
> 标签：c#, reporting, rdlc

我正在研究使用 RDLC 做报告并且有一个有趣的问题。我们想在报告上显示一个图表，而内置图表只是不剪切它，所以我们将它们生成为位图。现在这可行，但为了获得最佳显示效果，最好知道报告上可用大小的大小。有可能以任何方式知道吗？

我可以将 RDLC 文件读取为 XML 并尝试找到类似的内容：

```
 <Image Name="Image1">
    <Source>Database</Source>
    <Value>=First(Fields!MyPicture.Value, "ThisPicture")</Value>
    <MIMEType>image/png</MIMEType>
    <Sizing>FitProportional</Sizing>
    <Top>2.83601cm</Top>
    <Left>0.15875cm</Left>
    <Height>4.43951cm</Height>
    <Width>7.79167cm</Width>
    <ZIndex>1</ZIndex>
    <Style>
      <Border>
        <Style>Solid</Style>
      </Border>
    </Style>
  </Image> 
```

并使用这些值并将它们转换为像素。笨拙，但可行。

# iphone - 为什么我的 iPhone 应用程序的下载量很高，尽管我没有在任何地方发布？

> ID：14454644
> 
> 赞同：-13
> 
> 时间：2013-01-22T08:49:40.587
> 
> 标签：iphone, ios, itunes, app-store-connect, itunes-store

我发布了一个应用程序，但在我开始推销它之前（没人知道），我在 2 个月内下载了 300 次。怎么来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T08:58:31.223

当您发布应用程序时，您的应用程序会自动进入 iTunes 的**新版本**部分。

此外，您可以随时管理/阻止您的应用程序在 iTunes 上显示而不是下载。登录到[iTunesconnect](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa)

希望这些信息对你有帮助..

# objective-c - 在这种情况下如何处理故事板而不是 xib 文件？

> ID：14454650
> 
> 赞同：0
> 
> 时间：2013-01-22T08:50:19.803
> 
> 标签：objective-c, uiviewcontroller, ios6, appdelegate

我有一个例子，当应用程序启动时我有动画。开始时会显示一个图像，然后从右向左移动，然后消失。下面是我的代码。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewwController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewwController;
    [self.window makeKeyAndVisible];

    //add the image to the forefront...
    UIImageView *splashImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [splashImage setImage: [UIImage imageNamed:@"Default"]];
    [self.window addSubview:splashImage];
    [self.window bringSubviewToFront:splashImage];

    //set an anchor point on the image view so it opens from the left
    splashImage.layer.anchorPoint = CGPointMake(0, 0.5);

    //reset the image view frame
    splashImage.frame = CGRectMake(0, 0, 320, 480);

    //animate the open
    [UIView animateWithDuration:1.0
                          delay:0.6
                        options:(UIViewAnimationCurveEaseOut) 
                     animations:^{

                         splashImage.layer.transform = CATransform3DRotate(CATransform3DIdentity, -M_PI_2, 0, 1, 0);
                     } completion:^(BOOL finished){

                         //remove that imageview from the view
                         [splashImage removeFromSuperview];
                     }];

    return YES;

} 
```

我想要的是使用情节提要来做到这一点，所以我将代码更改如下。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
MyBookViewController *myNew = [[MyBookViewController alloc] init];
self.myBookViewController = myNew;
self.window.rootViewController = self.myBookViewController;
[self.window makeKeyAndVisible]; 
```

但是我没有看到我的视图控制器（MyBookViewController）。我只看到图像从右向左移动，然后是黑屏。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:35:37.400

我只是在 的帮助下自己完成的[`this SO question`](https://stackoverflow.com/questions/8186375/storyboard-refer-to-viewcontroller-in-appdelegate)。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                         bundle: nil];
MyBook001ViewController *controller = (MyBook001ViewController*)[mainStoryboard
                                                                             instantiateViewControllerWithIdentifier: @"firstStory"];
self.window.rootViewController = controller;
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:55:17.233

我认为这是因为您正在分配新的 MyBookViewController。相反，您必须提供情节提要的参考，在上面您有 MyBookViewController 的 UI 设计，就像这样

```
MyBookViewController *myNew=[self.storyboard instantiateViewControllerWithIdentifier:@"MyBookViewController"]; 
```

确保 ViewController 标识符

更新1：

尝试

```
MyBookViewController *myNew=[self.window.rootViewController]; 
```

# powershell - 我可以使用 PowerShell SecureString 更改服务器管理员密码吗？

> ID：14454651
> 
> 赞同：1
> 
> 时间：2013-01-22T08:50:22.367
> 
> 标签：powershell, passwords, powershell-2.0, securestring

我正在寻找编写一个脚本，该脚本将使用 PowerShell 更改远程服务器上的管理员密码。以下命令将执行此操作

```
$Admin=[adsi]("WinNT://" + MyServer + "/Administrator, user")
$Admin.SetPassword("NewPassword") 
```

但我希望能够隐藏`"NewPassword"`在脚本中以使其更安全。

那么有没有办法将它保存`"NewPassword"`到一个安全的 .txt 文件中，然后就可以像这样使用它了？

```
$Admin.SetPassword("$secureFile") 
```

该脚本将作为计划任务运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:48:06.207

**是**的，您可以使用[ConvertTo-SecureString](http://technet.microsoft.com/en-us/library/hh849818.aspx)和[ConvertFrom-SecureString](http://technet.microsoft.com/en-us/library/hh849814.aspx) cmdlet 对密码进行加密，然后再将其保存到磁盘上的文件中。

但是，请记住，**您需要一个加密密钥**才能使用 cmdlet 加密/解密密码。从[文档中](http://technet.microsoft.com/en-us/library/hh849814.aspx)：

> 如果使用`Key`or`SecureKey` 参数指定加密密钥，则使用高级加密标准 (AES) 加密算法。指定密钥的长度必须为 128、192 或 256 位，因为这些是 AES 加密算法支持的密钥长度。

如果未指定密钥，则将使用 Windows 数据保护 API (DPAPI) 进行加密。这意味着**密钥将与**调用 cmdlet 的用户帐户相关联。现在，如果您将脚本作为计划作业运行，则此解决方案可以正常工作。

下面是几个脚本，它们将使用生成的密钥将加密密码保存并读取到磁盘上的 XML 文件中：

```
function Get-SecurePassword {
<#
.Synopsis
    Gets a password stored securely in an XML file.
.Parameter Path
    The path to the XML file to import the password from.
#>
[CmdletBinding()]
param(
    [Parameter(Position=1)]
    [string]$Path = "Password.xml"
)
    if (Test-Path $Path) {
        $cache = Import-Clixml $Path
        $key = [System.Convert]::FromBase64String($cache.Secret)
        $password = $cache.EncryptedPassword | ConvertTo-SecureString -Key $key
        $password
    }
}

function Set-SecurePassword {
<#
.Synopsis
    Stores a password securely in an XML file.
.Parameter Path
    The path to the XML file to export the password to.
#>
[CmdletBinding()]
param(
    [Parameter(Position=1)]
    [string]$Password,
    [Parameter(Position=2)]
    [string]$Path = "Password.xml"
)
    $key = New-StrongPasswordBytes -Length 32
    $textualKey = [System.Convert]::ToBase64String($key)
    $securePassword = $Password | ConvertFrom-SecureString -Key $key
    $cache = New-Object PSObject -Property @{ "EncryptedPassword" = $securePassword; "Secret" = $textualKey }
    $cache.PSObject.TypeNames.Insert(0, "SecurePassword")
    $cache | Export-Clixml $Path
}

function New-StrongPasswordBytes ($length) {
    Add-Type -Assembly System.Web
    $password = [System.Web.Security.Membership]::GeneratePassword($length, $length / 2)
    [System.Text.Encoding]::UTF8.GetBytes($password)
} 
```

# amazon-web-services - AWS::CloudFormation::Init 它是如何工作的？

> ID：14454657
> 
> 赞同：25
> 
> 时间：2013-01-22T08:50:51.237
> 
> 标签：amazon-web-services, xen, amazon-cloudformation

我们可以使用[AWS::CloudFormation::Init](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html)在启动实例后执行命令和上传文件。但是有人知道这个操作的内部结构是什么吗（从亚马逊方面）？

当我们传入一个模板时，文件或命令是在什么时候传输到 VM 的？这是 Xen 功能（通过特殊管道）还是通过网络？

```
"Resources": {
  "MyInstance": {
    "Type": "AWS::EC2::Instance",
    "Metadata" : {
      "AWS::CloudFormation::Init" : {
        "config" : {
          "packages" : {
            :
          },
          "sources" : {
            :
          },
          "commands" : {
            :
          },
          "files" : {
            :
          },
          "services" : {
            :
          },
          "users" : {
            :
          },
          "groups" : {
            :
          }
        }
      }
    },
    "Properties": {
      :
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-22T13:02:30.487

创建 AWS::CloudFormation::Init 资源作为 EC2 实例的元数据不会导致实例自行执行任何操作。

要使实例实际执行该资源中指定的所有操作，它必须运行`cfn-init`命令行工具。在 Amazon EC2 AMI 上，该命令已安装在`/opt/aws/bin/cfn-init`. 该命令有几个选项，包括 AWS::CloudFormation::Init 资源的名称、EC2 服务器资源的名称以及您正在运行的区域。您还需要提供 AWS 安全凭证。

如果您希望在创建新实例时自动运行（我确实这样做了），您必须使用 EC2 实例的 UserData 创建一个 shell 脚本，该实例将在第一次启动时运行，并将`cfn-init`命令放入其中.

我最近在我的博客中[写了关于这个特定问题的文章。](http://blog.engelke.com/2012/12/28/provisioning-a-server-with-cloudformation/)

# java - 为什么在 BER 编解码器中使用 Math.floor() 而不是整数除法

> ID：14454661
> 
> 赞同：18
> 
> 时间：2013-01-22T08:51:03.830
> 
> 标签：java, encoding, snmp

我正在查看可以在此[位置](http://gse.ufsc.br/~bezerra/disciplinas/tc/LucasWaechter/TC2/TC2/src/snmp/SNMPBERCodec.java)
看到的 SNMPBEECodec 特别是我正在查看`encodeLength()`
我感兴趣的功能片段

```
 int numBytes = 0;
        int temp = length;
        while (temp > 0)
        {
            ++numBytes;
            temp = (int)Math.floor(temp / 256);
        } 
```

（来自[Drexel SNMP 库](http://gicl.cs.drexel.edu/people/sevy/snmp/)）。

我想知道为什么`Math.floor()`使用它而不是像`temp/256`. 似乎简单的整数除法会给出相同的结果。还是有技术差异？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T15:11:48.530

要回答您问题的技术部分：

使用`math.floor()`是多余的：`temp / 256`是一个整数（根据 Java 的整数算术规则），`Math.floor()`对整数使用是没有意义的。你可以简单地使用`temp / 256`.

如果不阅读他们的想法，就无法回答作者为什么这样做。作者可能只是对 Java 中的除法行为感到困惑，并决定“谨慎行事”——但这只是猜测。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-26T16:09:43.823

好吧，不幸的是，作者也无法读懂他的想法——我写这篇文章已经有 12 年了，所以我忘记了我不只使用整数除法的原因。一些想法：假设通常的行为，我在其他地方使用整数除法，所以它不太可能对 Java 中的整数除法规则产生基本的混淆；有可能（尽管不太可能）我在某个时候使用非整数数据类型作为参数，并且在我更改时没有摆脱多余的 floor() ；或者也许（更有可能）我在开发算法时尝试向上而不是向下取整，使用 ceil() 作为一种廉价（= 更少字符）的方式来做到这一点，并且当我反射性地切换到 floor()改变了。

所以不幸的是，真正的原因在时间的迷雾中消失了……但我同意， floor() 是多余的。我真的应该在 Github 等上发布代码，以便人们可以改进和发展它。\乔恩

# c - 在 C 中扩展动态内存的最佳方法

> ID：14454663
> 
> 赞同：0
> 
> 时间：2013-01-22T08:51:16.170
> 
> 标签：c, memory, memory-management

我正在寻找一种在运行时为现有结构（最初已经分配了内存）分配额外内存（在 C 中）的方法。我有一种感觉，我可能可以使用[memmove](http://www.cplusplus.com/reference/cstring/memmove/)或类似的东西，但这仍然只是一个复制操作，并且不会增加运行时结构可用的内存量。此外，我不想每次需要复制整个结构，这将在程序期间进行数百次（结构已经很大）。任何人都可以帮忙吗？

更新：感谢大家的回复。为了提供更多详细信息，我正在尝试运行一个 MPI 并行代码，该代码最初创建该结构的许多实例（称为“S”）。该结构的每个实例都包含一个数组“T”，它记录了在代码运行时发生的特定事件的时间。这些事件在运行时发生，并且每个 S 实例的事件数量不同。例如，S[0] 可能看到 100 个事件（因此需要一个长度为 100 个元素的数组），但 S[1] 可能只看到 1事件（和 S[2] 30 个事件等）因此，在开始时为 S 的每个实例（有数百万个）分配大量内存是非常浪费的，因为有些可能会填满数组，而另一些则不会甚至接近。

我将在这里尝试一些想法并发布我的进展。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T08:56:41.130

您可能可以使用[`realloc()`](http://pubs.opengroup.org/onlinepubs/009696899/functions/realloc.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T08:56:33.050

无法按照您的描述进行操作，因为无法保证您的结构当前占用的内存旁边会有可用内存。

标准做法是分配更多内存并复制数据。当然，如果您知道（估计）您需要的内存分配的大小，您可以预先分配它并避免复制。

但是请注意，C 中的结构在声明后具有固定大小，因此您似乎不需要为现有结构分配更多内存......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:56:54.393

听起来您正在寻找称为*灵活数组成员*（[示例](https://stackoverflow.com/questions/3047530/flexible-array-member-in-c-structure)）的 C 功能。它仅适用于 C 标准 C99 或更高版本。

结构的最后一个成员必须声明为灵活的数组成员，最初是 malloc，然后是 realloc（当然还有 memcpy 来进行实际复制）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:55:12.473

`realloc`是扩展现有动态内存的唯一方法。`realloc`将尝试扩展现有缓冲区，如果扩展失败，它将为所需的总大小分配新缓冲区，并从旧缓冲区复制数据。如果您不想`realloc`每次都这样做（`memmove`大部分时间在内部），那么您可以尝试重新分配比实际需要更多的内存。

`realloc(buf_ptr, (actual_size + additional_size) * 2);`

这种方式将减少调用`realloc`（和`memmove`）的频率。

注意：`realloc`在某些架构中实现是不同的，它永远不会尝试扩展内存，它总是尝试为总大小分配缓冲区。因此，在这些平台`memmove`中，每次调用都会调用`realloc`.

# database - （1242，'子查询返回超过 1 行'）Django 中的错误？

> ID：14454664
> 
> 赞同：8
> 
> 时间：2013-01-22T08:51:29.617
> 
> 标签：database, django

我在 Django 中有这样的模型：

```
class File(models.Model):
    users = models.ForeignKey(User)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    end_date = models.TextField()
    duration = models.TextField()
    size = models.TextField()
    flag = models.TextField()
    #delete_date = models.CharField(max_length=100, null=True, blank=True)

class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField() 
```

我正在尝试提取登录用户共享的文件。我只是在 Share 中查询

```
file_s = Share.objects.filter(users_id=log_id) 
```

这将提取登录用户共享的文件。因为，现在我知道登录用户共享了哪个文件，所以我尝试从文件表中获取文件信息：

```
shared_file = File.objects.filter(users_id=file_s) 
```

但这又回来了：

```
DatabaseError at /shared_by_me/
(1242, 'Subquery returns more than 1 row')

#my_views
def shared_by_me(request):
    log_id = request.user.id
    username = request.user.username
    #shared_file = File.objects.filter(users_id=file)
    file_s = Share.objects.filter(users_id=log_id)
    shared_file = File.objects.filter(users_id=file_s)
    #b = Share.objects.filter(users_id=log_id)
    return render_to_response('shared_by_me.html', {'shared_by_me':shared_file, 'username':username}, context_instance=RequestContext(request))

#my_template
{% for choice in shared_by_me %}
            <tr class="oddclass">
              <td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" /></td>
              <td><label for="choice{{ forloop.counter }}">{{ choice.file_name }}</label></td>
              <td>{{ choice.type }}</td>
              <td>{{ i.size }}</td>
              <td>{{ i.end_date }}</td>
            </tr>
{% endfor %} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T08:56:30.973

因为`file`不是模型，而是您应该使用的查询集`__in`，例如：

```
shared_file = File.objects.filter(users_id__in=file_s) 
```

# instruments - UIAutomation logElementTree() 返回 UIAElementNil

> ID：14454667
> 
> 赞同：1
> 
> 时间：2013-01-22T08:51:46.803
> 
> 标签：instruments, ui-automation, xcode-instruments

当我们这行代码到 Instruments UIAutomation 中的 logElementTree() `target.frontMostApp().mainWindow().logElementTree();`

结果返回是`UIAElementNil`

即使当我录制脚本并点击屏幕时，唯一被录制的行是`target.frontMostApp().tap();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T12:18:15.780

您可能已启用主视图的辅助功能。
如果您为主视图提供可访问性标签，那么您将不会获得孩子的可访问性标签。尝试删除主视图的可访问性，您将获得完整的层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T03:20:22.490

不要设置`isAccessibilityElement = YES`。如果这样做，则该元素的子视图将被隐藏。

你应该设置`accessibilityItentifier = @"xxxx"; isAccessibilityElement = NO;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:20:28.607

不要使用`target.frontMostApp().mainWindow().logElementTree();` 而不是你的代码替换它：

```
var target = UIATarget.localTarget();
target.logElementTree(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:16:10.787

不要使用“target.frontMostApp().mainWindow().logElementTree();”，而是始终使用“target.logElementTree()”。它将显示当前屏幕上存在的所有元素。

# javascript - 为什么 $.when.apply 不能按预期工作

> ID：14454671
> 
> 赞同：1
> 
> 时间：2013-01-22T08:51:58.853
> 
> 标签：javascript, jquery

所以说我有一组 $.post 函数

```
var pa = [$.post(url0), $.post(url1),......];

$.when(pa[0],pa[1],...]) // works as expected 
```

但

```
$.when.apply(pa) // does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:53:04.883

你应该使用：

```
$.when.apply($, pa); 
```

的第一个参数`apply`是函数应该被调用的上下文（即`this`在函数的上下文中意味着什么）。第二个参数是一个包含函数参数的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:53:49.593

您忘记了 的第一个参数[`.apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，它是函数的 thisArg。由于[`$.when`](http://api.jquery.com/jQuery.when/)不关心它的值`this`，你可以传递任何东西：

```
$.when.apply(null, pa);
$.when.apply($, pa); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:54:05.207

`Function.prototype.apply`需要*上下文*作为第一个参数（在被调用函数中用作 的引用的对象`this`）

所以你可以这样称呼它

```
$.when.apply( null, pa ); 
```

我喜欢每次都使用一点“诡计”来避免这种情况。我们可以`Function.prototype.bind`像这样调用

```
var when = Function.prototype.apply.bind( jQuery.when, null ); 
```

现在，我们确实可以调用

```
when( pa ).done( /* ... */ ) { } 
```

# wpf - 为什么在这种情况下无法解析 StaticResource？

> ID：14454672
> 
> 赞同：15
> 
> 时间：2013-01-22T08:52:10.890
> 
> 标签：wpf, xaml, staticresource

我有一个异常**“找不到名为'mrg'的资源。资源名称区分大小写。”** 当我尝试执行以下操作时：

MainWindow.xaml：

```
<Window.Resources>
  <Thickness Left="0"
             Right="1"
             Bottom="2"
             Top="3"
             x:Key="mrg" />
</Window.Resources>
<Grid>
  <ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemTemplate>
      <DataTemplate>
        <local:UserControl1 />
      </DataTemplate>
    </ItemsControl.ItemTemplate>
  </ItemsControl>
</Grid> 
```

MainWindow.xaml.cs：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        List<string> source = new List<string>()
        {
            "item1",
            "item2",
            "item3",
            "item4",
            "item5",
        };
        DataContext = source;
    }
} 
```

和 UserControl1.xaml：

```
<Grid>
    <TextBlock Text="{Binding}" Margin="{StaticResource mrg}" />
</Grid> 
```

根据[msdn 文章](http://msdn.microsoft.com/en-us/library/ms750613(v=vs.100).aspx)：

静态资源查找行为

1.  查找过程在设置属性的元素定义的资源字典中检查请求的键。

2.  查找过程然后向上遍历逻辑树，到达父元素及其资源字典。这一直持续到到达根元素。

3.  接下来，检查应用程序资源。应用程序资源是由 WPF 应用程序的 Application 对象定义的资源字典中的那些资源。

因此，由于第 2 步，必须找到资源。但是，正如我在`Locals`捕获异常时在窗口中看到的那样，`UserControl1.Parent == null`.

我对这个问题感到困惑。我可以解决的方法是将资源放到应用程序级别。

我的问题是：为什么找不到 StaticResource ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T10:15:35.873

DataTemplate 形成自己的逻辑树，它与 ItemsControl 的逻辑树断开连接。因此，通过遍历逻辑树进行查找不会找到资源。

我无法在 MSDN 中找到参考，只有[CodeProject 上的这篇文章](http://www.codeproject.com/Articles/21495/Understanding-the-Visual-Tree-and-Logical-Tree-in)，其中内容如下：

> 作为扩展模板一部分的元素，以下称为“模板元素”，形成它们自己的逻辑树，该逻辑树与为其创建它们的对象的逻辑树断开连接。

* * *

使用`DynamicResource`代替`StaticResource`将克服这个问题。但是我不能确切地说出为什么。也许可以在静态和动态资源的[静态](http://msdn.microsoft.com/en-us/library/ms750613.aspx#staticdynamic)*资源查找行为* 和*动态资源查找行为*部分找到解释，但我不确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-01T15:29:17.573

代码清理后我遇到了类似的问题。代码看起来和编译都很好，但会在运行时产生“StaticResource not found 错误”。

将 StaticResource 更改为 DynamicResource 确实有效。但是，它实际上归结为 App.xaml 以及在该`<ResourceDictionary.MergedDictionaries>`部分下添加资源字典的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-17T09:12:20.743

StaticResources 必须在引用它们之前定义。

面对未知的资源静态链接，XAML解析器抛出异常。（这个问题可以通过使用动态资源来解决，但是需要额外的成本）

# c# - HttpClient 在 POST 期间未传递内容

> ID：14454680
> 
> 赞同：3
> 
> 时间：2013-01-22T08:52:45.480
> 
> 标签：c#, windows-store-apps, httpclient

我正在使用`HttpClient`. 问题是它似乎没有发送我提供的内容。服务器为此给了我一个错误，当我用 Fiddler 查看请求时，它没有显示应有的内容：

```
HttpContent content = new FormUrlEncodedContent(
                new List<KeyValuePair<string, string>> { 
                    new KeyValuePair<string, string>("key1", "value1"),
                    new KeyValuePair<string,string>("key2","value2"),
                    new KeyValuePair<string,string>("key3","value3"),
                    new KeyValuePair<string,string>("key4", "value4"),
                    new KeyValuePair<string, string>("key5", "value5"),
                    new KeyValuePair<string, string>("key6", "value6")
                });
content.Headers.ContentType = new MediaTypeHeaderValue("application/x-www-form-urlencoded");
content.Headers.ContentType.CharSet = "UTF-8";
HttpResponseMessage resposne = await client.PostAsync(new Uri("my_url"), content); 
```

关于什么可能是错误的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T00:32:17.807

UserAgent 可能是问题所在。 [MSDN 上的 HttpClient](https://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn440594.aspx)

> 默认情况下，HttpClient 对象不会将任何用户代理标头与 HTTP 请求一起发送到 Web 服务。某些 HTTP 服务器（包括某些 Microsoft Web 服务器）要求在从客户端发送的 HTTP 请求中包含用户代理标头。HTTP 服务器使用 user-agent 标头来确定如何格式化某些 HTTP 页面，以便它们在客户端上针对不同的 Web 浏览器和外形尺寸（例如手机）更好地呈现。如果客户端请求中没有用户代理标头，某些 HTTP 服务器会返回错误。我们需要使用 Windows.Web.Http.Headers 命名空间中的类添加用户代理标头以避免这些错误。我们将此标头添加到 HttpClient.DefaultRequestHeaders 属性。

# android - IntelliJ 错误地显示未解析的导入

> ID：14454682
> 
> 赞同：0
> 
> 时间：2013-01-22T08:52:55.427
> 
> 标签：android, import, intellij-idea

从昨天开始，我的 IntelliJ IDE 有点乱了。

导入（**例如**所有`android.support.v4`or`com.google.analytics`包）在编辑器中显示为未解析并以红色突出显示。尽管如此，编译和运行项目工作正常。

**任何想法如何解决这一问题？这是一个市长拦截器。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:24:57.267

如果一切构建和工作正常，而不是编辑器突出显示，首先要尝试的是`File`| `Invalidate Caches`并重新启动 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T22:21:58.613

我尝试了选择的答案，但没有奏效。相反，我注意到将光标放在缺少的类（标记为红色）上并等待建议工具提示，它有一个选项：`add library 'Gradle:yourmissinglabrary' to your classpath`

单击该选项后，`cannot resolve symbol 'ClassName'`消失

# android - android Rhino error can't load this type of class file

> ID：14454686
> 
> 赞同：10
> 
> 时间：2013-01-22T08:53:05.217
> 
> 标签：android, android-webview, rhino

我在 android 中使用 Rhino 在 Android(java) 中执行 JavaScript 函数代码并从此代码中获取结果，但我得到了这个异常

> 01-22 11:33:57.063: E/AndroidRuntime(29175): Caused by: java.lang.UnsupportedOperationException: can't load this type of class file

这是我的代码

```
String test = "function abc(x,y) {return x+y;}";
    org.mozilla.javascript.Context context = org.mozilla.javascript.Context.enter();
    try {
        ScriptableObject scope = context.initStandardObjects();
        Scriptable that = context.newObject(scope);
        Function fct = context.compileFunction(scope, test, "script", 1, null);
        Object result = fct.call(context, scope, that, new Object[] { 2, 3 });
        Log.i("JML...Info", "jajajajaj = " + org.mozilla.javascript.Context.jsToJava(result, int.class));
    } finally {
        org.mozilla.javascript.Context.exit();
    } 
```

我在方法上遇到了异常

> 函数 fct = context.compileFunction(scope, test, "script", 1, null);

我在加载 webview 后在方法 onCreate() 中编写了这段代码，并使用 rhino1_7R2.jar 作为 Rhino 的 jar。

请帮助我，如果你知道任何其他方式从 Android 中的 JavaScript（函数的返回值）获取值，请提供建议。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-08T08:44:52.157

我遇到了同样的问题，我在这里找到了解决方案：[Problems using Rhino on Android](https://stackoverflow.com/questions/3859305/problems-using-rhino-on-android)

默认情况下，rhino 会尝试通过动态生成 JVM 字节码来进行优化。Android 不运行 JVM 字节码 byt Dalvik 字节码。这就是为什么您必须禁用优化：

```
context.setOptimizationLevel(-1); 
```

此致

# jquery - 如何在 div #content 加载时显示 div #loading

> ID：14454688
> 
> 赞同：5
> 
> 时间：2013-01-22T08:53:17.917
> 
> 标签：jquery, html, loading

我想实施一个解决方案，其中：

1.  在加载 div #content 中的内容时，
2.  隐藏 div #content，
3.  显示 div #loading，
4.  然后当 div #content 已加载时，
5.  隐藏 div #loading，
6.  淡入 div #content

我试过了：

html:

```
<div id="content">
<!--this stuff takes a long time to load-->
<img src="http://lorempixel.com/1920/1920/">
</div>
<div id="loading">
<!-- this is the loading gif -->
<img src="http://lorempixel.com/400/200/">
</div> 
```

js：

```
// when user browses to page
$('#content').hide();
$('#loading').show();

// then when div #content has loaded, hide div #loading and fade in div #content
$('#content').bind('load', function() {
$('#loading').hide();
$('#content').fadeIn('slow');
}); 
```

这是我正在研究的jsfiddle：

[http://jsfiddle.net/rwone/Y9CQ4/](http://jsfiddle.net/rwone/Y9CQ4/)

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T09:33:51.137

根据[.load()](http://api.jquery.com/load-event/)，事件应该触发，当

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到**与 URL 关联的**任何元素：图像、脚本、框架、iframe 和窗口对象。

因此，您不能将加载事件处理程序绑定到`div`标签。当您希望事件处理程序在图像加载后触发时，您必须将其绑定到图像

HTML：

```
<div id="content">
<!--this stuff takes a long time to load-->
<img id="large" src="http://lorempixel.com/1920/1920/">
</div>
<div id="loading">
<!-- this is the loading gif -->
<img src="http://lorempixel.com/400/200/">
</div> 
```

JS：

```
// when user browses to page
$('#content').hide();
$('#loading').show();

// then when the #content div has loaded
$('#large').bind('load', function() {
$('#loading').hide();
$('#content').fadeIn('slow');
}); 
```

[JSFiddle](http://jsfiddle.net/Y9CQ4/1/)

或者您可以将事件绑定到`window`对象，该对象在

> 页面已完全加载，包括图形。

JS：

```
$(window).bind('load', function() {
$('#loading').hide();
$('#content').fadeIn('slow');
}); 
```

[JSFiddle](http://jsfiddle.net/Y9CQ4/2/)

第三种方法是在加载事件触发时测试是否加载了所有图像

```
function allImagesLoaded() {
    var imgs = $(this).closest('div').find('img');
    var loaded = 0;
    imgs.each(function() { if ($(this.complete)) ++loaded; });
    if (imgs.length == loaded) {
        $('#loading').hide();
        $('#content').fadeIn('slow');
    }
}

// when user browses to page
$('#content').hide();
$('#loading').show();

// then when the #content div has loaded
$('#content img').bind('load', allImagesLoaded); 
```

[JSFiddle](http://jsfiddle.net/Y9CQ4/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:09:18.877

例如，在您通过 JSON 或 Ajax 或 Javascript 从 CODEBEHINF 接收数据后，您必须在 DIV 中填写图片，您可以更改它

```
 $('#DIV').html('<img src="images/loadinfo.gif" />');//here u fill the picture in ur div
    $.get('Jquery.aspx', { command: 'CartLoader', Send_T: Send_T },
      function (response) {                
       $('#DIV').html(response);// after receiving  data from code behind u can change it
       }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-12T11:33:27.380

使用类加载器获取 div

CSS：

```
.loader {

    position: fixed;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 9999;
    background: url('images/loading.gif') 50% 50% no-repeat rgb(249,249,249);
    opacity: .7;
} 
```

JS：

```
function myFunction() {

     $(".loader").show();

    Ajax Call({

//Ajax Call Operation

    success:function(result){

//Operation

}

complete: function(){

             $(".loader").fadeOut("slow");
          }
   });

} 
```

# php - Cronjob 不工作 - 试图运行 PHP 脚本

> ID：14454689
> 
> 赞同：0
> 
> 时间：2013-01-22T08:53:24.810
> 
> 标签：php, cron

我正在运行一个运行 PHP 脚本的 cronjob 来做几件事；首先，它打开数据库并将表的内容存储到内存缓存中；其次，它创建一个基本上是几个数组的 Javascript 文件，以便客户端浏览器可以完成大量工作并避免服务器过载。这是新添加的。

该脚本手动运行得非常好，并且在一年多的时间里它已经完成了它的工作，每 10 分钟更新一次 memcache。添加的Javascript文件是这里的大问题；cronjob s/b 每 10 分钟创建一个新的、更新的文件版本，但似乎无法正常工作，除非我从命令行手动运行它。

我可以通过以下方式检查：

```
ls -al id_index.js 
```

并检查文件列表中的时间戳。

从 crontab 启动的脚本创建 Javascript 文件是否有问题？

顺便说一句，cronjob 文件条目如下所示：

```
# m h  dom mon dow   command
*/10 * * * * php /home/accountname/public_html/mc_store_arrays.php 
```

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:07:13.873

很可能您必须指定 php cli 解释器的绝对路径，因为 cron 环境很少定义可用的 PATH 环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:17:26.430

您希望在哪个目录中创建 javascript 文件？它可能*是*在某个地方创建的……脚本运行时 cron 的工作目录恰好在哪里（`/root/`也许？）。确保您的输出文件使用绝对路径或例如：

```
file_put_contents(__DIR__ . '/id_index.js', $content); 
```

它将根据正在运行的 php 脚本的路径而不是执行它的路径来创建文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T08:59:05.493

尝试使用 LYNX（就像使用网络浏览器一样）；

示例：**LYNX** [http://www.MyDomain.Com/MyScript.php?MyParameter=MyValue&And=SoOn](http://www.MyDomain.Com/MyScript.php?MyParameter=MyValue&And=SoOn)

# stored-procedures - 为 Oracle dbms_scheduler 作业存储过程设置命名参数

> ID：14454691
> 
> 赞同：4
> 
> 时间：2013-01-22T08:53:30.663
> 
> 标签：stored-procedures, plsql, oracle10g, named-parameters, dbms-scheduler

是否可以将命名参数传递给类型为 'stored_procedure' 的 dbms_scheduler 作业？我试过这样：

```
-- 1) example dummy procdure
CREATE OR REPLACE PROCEDURE my_test_proc (
 param1 IN NVARCHAR2,
 param2 IN NUMBER,
 param3 IN NUMBER
) IS
BEGIN
-- ...
END;

-- 2)Example dummy job:
BEGIN    
    dbms_scheduler.create_job(
        job_name => 'my_test_job'
        ,job_type => 'STORED_PROCEDURE'
        ,job_action => 'my_test_proc'
        ,start_date => sysdate
        ,number_of_arguments => 3
        ,enabled => FALSE
        ,auto_drop =>FALSE
    );
END;
-- 3)Set named param value:
BEGIN  
    dbms_scheduler.set_job_argument_value(
        job_name => 'my_test_job'
        ,argument_name => 'param1' 
        ,argument_value => 'some value'
    );
END; 
```

我收到以下错误：ORA

> -27484：没有程序的作业不支持参数名称。ORA-06512：在“SYS.DBMS_ISCHED”，第 207 行 ORA-06512：在“SYS.DBMS_SCHEDULER”，第 602 行 ORA-06512：在第 2 行

我通过使用 argument_position 设置成功地设置了 set_job_argument_value 参数值。但是在某些情况下，我需要运行存储过程，而我只需要为其设置某些参数，而这不起作用。有没有办法将命名参数传递给调度程序作业运行的存储过程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T09:55:38.890

如错误所述，首先创建一个程序，然后再创建一个作业。

```
dbms_scheduler.create_program(program_name        => 'YOUR_PROGRAM',
                              program_type        => 'STORED_PROCEDURE',                                                          
                              program_action      => 'my_test_proc', 
                              number_of_arguments => 2,
                              enabled             => false,
                              comments            => 'Comments you want');

dbms_scheduler.define_program_argument(program_name      => 'YOUR_PROGRAM',
                                       argument_name     => 'param1',
                                       argument_position => 1,
                                       argument_type     => 'VARCHAR2',
                                       default_value     => '');
    ..etc, do for all 3\.                                         

dbms_scheduler.enable (name => 'YOUR_PROGRAM');

dbms_scheduler.create_job(job_name        => 'my_test_job',
                          program_name    => 'YOUR_PROGRAM',
                          start_date      => systimestamp,
                          end_date        => null,
                          ...

dbms_scheduler.set_job_argument_value(job_name          => 'my_test_job',
                                      argument_position => 1,
                                      argument_value    => 'value');
  ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-29T17:04:27.827

我有一个程序的基本示例

1.- 创建我的程序

```
CREATE OR REPLACE PROCEDURE MY_TEST_PROCEDURE (P_VAR1 VARCHAR2, P_VAR_NUMBER NUMBER)
AS 
    V_RESULT_MSG VARCHAR2(300);
BEGIN
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MI'));
    V_RESULT_MSG := P_VAR1;
    V_RESULT_MSG := V_RESULT_MSG||' '||P_VAR_NUMBER;

    DBMS_OUTPUT.PUT_LINE(TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MI'));
    DBMS_OUTPUT.PUT_LINE(V_RESULT_MSG);
END MY_TEST_PROCEDURE; 
```

2.- 创建程序

```
BEGIN
    DBMS_SCHEDULER.CREATE_PROGRAM(
        PROGRAM_NAME => 'MY_TEST_PROGRAM'
        ,PROGRAM_TYPE => 'STORED_PROCEDURE'
        ,PROGRAM_ACTION => 'MY_TEST_PROCEDURE'
        ,NUMBER_OF_ARGUMENTS => 2
        ,ENABLED =>  FALSE
        ,COMMENTS => 'my test program'
    );

    DBMS_SCHEDULER.DEFINE_PROGRAM_ARGUMENT(
        PROGRAM_NAME => 'MY_TEST_PROGRAM',
        argument_name     => 'P_VAR1',
        argument_position => 1,
        argument_type     => 'VARCHAR2',
        default_value     => ''
    );

    DBMS_SCHEDULER.DEFINE_PROGRAM_ARGUMENT(
        PROGRAM_NAME => 'MY_TEST_PROGRAM',
        argument_name     => 'P_VAR_NUMBER',
        argument_position => 2,
        argument_type     => 'NUMBER',
        default_value     => ''
    );

    dbms_scheduler.enable (name => 'MY_TEST_PROGRAM');

END; 
```

3.- 创造工作

```
BEGIN
    DBMS_SCHEDULER.CREATE_JOB (
        job_name => '"XXFLM"."MY_TEST_JOB"',
        PROGRAM_NAME => 'MY_TEST_PROGRAM'
    );

END; 
```

4.- PL/SQL 代码测试

```
DECLARE
    V_VAR1 VARCHAR2(50) := 'HOLA';
    V_VAR2 NUMBER  := 2010;

BEGIN

    dbms_scheduler.set_job_argument_value(
        job_name          => 'MY_TEST_JOB',
        argument_position => 1,
        argument_value    => V_VAR1);

    dbms_scheduler.set_job_argument_value(
        job_name          => 'MY_TEST_JOB',
        argument_position => 2,
        argument_value    => V_VAR2);

    DBMS_SCHEDULER.RUN_JOB(
        JOB_NAME            => '"XXFLM"."MY_TEST_JOB"',
        USE_CURRENT_SESSION => FALSE);

END; 
```

5.- 结果

```
SELECT * FROM ALL_SCHEDULER_JOB_RUN_DETAILS ORDER BY 1 DESC; 
```

# android - java.net.SocketException：recvfrom 失败：ECONNRESET（对等方重置连接）

> ID：14454694
> 
> 赞同：4
> 
> 时间：2013-01-22T08:53:42.197
> 
> 标签：android, core, httpconnection

我在 Android 中有一个 HTTP 服务器。我为每个 HTTP 请求创建一个新线程，如提到的链接中所示：

[http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java)。

当我发出多个 GET 请求时，有时会收到如下异常：

```
01-22 10:28:22.779: W/System.err(2019): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)  
01-22 10:28:22.779: W/System.err(2019):     at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:552)  
01-22 10:28:22.779: W/System.err(2019):     at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
01-22 10:28:22.779: W/System.err(2019):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)  
01-22 10:28:22.779: W/System.err(2019):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)     
01-22 10:28:22.784: W/System.err(2019):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)   
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)  
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)  
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.impl.io.HttpRequestParser.parseHead(HttpRequestParser.java:71)  
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)  
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.impl.AbstractHttpServerConnection.receiveRequestHeader(AbstractHttpServerConnection.java:141)   
01-22 10:28:22.784: W/System.err(2019):     at org.apache.http.protocol.HttpService.handleRequest(HttpService.java:135)    
01-22 10:28:22.784: W/System.err(2019):     at com.example.devicecommunication.ConnectService$WorkerThread.run(ConnectService.java:744)    
01-22 10:28:22.784: W/System.err(2019): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer)   
01-22 10:28:22.784: W/System.err(2019):     at libcore.io.Posix.recvfromBytes(Native Method)   
01-22 10:28:22.784: W/System.err(2019):     at libcore.io.Posix.recvfrom(Posix.java:131)   
01-22 10:28:22.784: W/System.err(2019):     at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)   
01-22 10:28:22.789: W/System.err(2019):     at libcore.io.IoBridge.recvfrom(IoBridge.java:513)   
01-22 10:28:22.789: W/System.err(2019):     ... 10 more 
```

我不确定为什么会发生这种情况。下面是使用的代码，此异常发生在 handleRequest() 方法或 conn.close() 中。

```
 class WorkerThread extends Thread{
    HttpService httpService;
    HttpServerConnection conn;
    public WorkerThread(HttpService httpService, HttpServerConnection conn){
        super();
        this.httpService = httpService;
        this.conn = conn;
    }       
    public void run(){
        HttpContext context = new BasicHttpContext(null);

        try {
          Log.d(TAG,"Going to call Handle request here");
                this.httpService.handleRequest(this.conn, context);         
             } catch (ConnectionClosedException ex) {
            ex.printStackTrace();
            Log.d(TAG,"Client closed connection exception");
        } catch (IOException ex) {
            ex.printStackTrace();
            Log.d(TAG,"I/O exceptionnnnn " + ex.getMessage());
        } catch (HttpException ex) {
            Log.d(TAG,"Unrecoverable HTTP protocol violation: " + ex.getMessage());
        }
        finally {
           Log.d(TAG,"Inside Finally Block");
          try {              
            this.conn.close(); 
            Log.d(TAG,"Connection closed successfully");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }         
          }
    }
} 
```

知道为什么会发生这种情况或如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:12:53.927

当我使用以下代码片段将 DefaultHttpServerConnection 属性传递给 handle() 方法时，我没有收到此异常：

在 WorkerThread 类中，使用以下代码传递 DefaultHttpServerConnection 连接对象：

```
HttpContext context = new BasicHttpContext(null);
context.setAttribute("XXX",this.conn); 
```

在 handle() 方法中，使用以下方法获取连接对象，

```
(DefaultHttpServerConnection)context.getAttribute("XXX"); 
```

希望它可以帮助某人！

# c# - ListBox 在右键单击时抛出 SelectedItems 错误

> ID：14454705
> 
> 赞同：1
> 
> 时间：2013-01-22T08:54:24.550
> 
> 标签：c#, listbox, selecteditem, lync, lync-2010

我正在使用 Lync SDK 并将 ContactSearchResultList (listBox) 与`SelectionMode="Single"`.

但是，当我右键单击未选择的项目时，应用程序崩溃并显示以下堆栈跟踪：

```
System.InvalidOperationException wurde nicht behandelt.
  HResult=-2146233079
  Message=Can only change SelectedItems collection in multiple selection modes. Use SelectedItem in single select modes.
  Source=PresentationFramework
  StackTrace:
       bei System.Windows.Controls.Primitives.Selector.OnSelectedItemsCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
       bei System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
       bei System.Collections.ObjectModel.ObservableCollection`1.ClearItems()
       bei System.Windows.Controls.SelectedItemCollection.ClearItems()
       bei System.Collections.ObjectModel.Collection`1.Clear()
       bei Microsoft.Lync.Controls.UCListBoxItem.OnMouseRightButtonDown(MouseButtonEventArgs e)
       bei System.Windows.UIElement.OnMouseRightButtonDownThunk(Object sender, MouseButtonEventArgs e)
       bei System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       bei System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       bei System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       bei System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       bei System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
       bei System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e)
       bei System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       bei System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       bei System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       bei System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       bei System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       bei System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
       bei System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
       bei System.Windows.Input.InputManager.ProcessStagingArea()
       bei System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
       bei System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
       bei System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
       bei System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       bei System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       bei MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       bei MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       bei System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       bei MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       bei System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       bei MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       bei MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       bei System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       bei System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       bei System.Windows.Threading.Dispatcher.Run()
       bei System.Windows.Application.RunDispatcher(Object ignore)
       bei System.Windows.Application.RunInternal(Window window)
       bei System.Windows.Application.Run(Window window)
       bei System.Windows.Application.Run()
       bei LyncPresenceBrowser.App.Main() in D:\_effexx\_Kunden\DFG\LyncPresenceBrowser\obj\x86\Debug\App.g.cs:Zeile 0.
       bei System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       bei System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       bei Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       bei System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       bei System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

为什么会抛出这个错误？在我所引用的代码中`SelectedItems`，我始终使用`SelectedItem`. 我卡住了，请帮助我:)

//继承事件：

```
public void contactSearchResultList1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (contactSearchResultList1.SelectedItem != null && contactSearchResultList1.SelectedIndex != -1)
    {
        expander1.IsEnabled = true;
        expander2.IsEnabled = true;
        expander1.IsExpanded = true;
        showGroupMembersWindow();
     }
     else
     {
        expander1.IsEnabled = false;
        expander2.IsEnabled = false;
        //closeGroupMembersWindow();
        //closeContactCardWindow();
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:18:22.947

似乎`SelectionMode`on 的默认值`contactSearchResultList`是`Extended`。我更改了该值，现在一切似乎都正常了...感谢所有帮助！

# c++ - 有没有推荐的轻量级 pubsub 服务/库？

> ID：14454708
> 
> 赞同：16
> 
> 时间：2013-01-22T08:54:32.010
> 
> 标签：c++, linux, static-libraries, message-queue, publish-subscribe

我正在构建一个包含许多部件的小型系统，我想使用消息[发布/订阅](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)服务在部件之间进行通信。

我读过一些消息队列服务，比如 RabbitMQ 和 ZeroMQ，但我觉得它们太复杂了，感觉它是为分布式系统而生的。我系统的所有部分都将用 C++/Linux 编写并放置在一个小型 Raspberry Pi CPU 上，所以我不需要像可扩展、跨平台、其他语言客户端这样的功能......

你们能给我一些关于适合我需要的服务或图书馆的建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T09:22:23.853

其实做自己并不难。

首先，您需要定义要使用的协议。它可以很简单；就像消息类型字段、有效负载大小字段和实际有效负载一样。`SUBSCRIBE`您需要的消息类型`UNSUBSCRIBE`和`PUBLISH`。`SUBSCRIBE`和消息的有效负载`UNSUBSCRIBE`是要订阅/取消订阅的频道的名称。消息的有效负载`PUBLISH`是通道名称和实际数据（当然还有数据的大小）。

要连接所有订阅者，您需要一个中央服务器。所有订阅者/发布者都需要连接到此服务器。服务器程序保存一组队列，每个通道一个。当一个不存在的通道的订阅或发布消息到达服务器时，为该通道创建一个新的消息队列。对于每个频道，服务器还需要订阅该频道的所有客户端的集合。当发布消息到达服务器时，它会被添加到相关通道的队列末尾。当通道队列不为空时，将其副本发送给该通道的所有订阅者，当所有人都收到它时，可以从队列中删除消息。

服务器最难的部分可能是通信部分。最简单的部分是所有队列和集合，因为您可以为所有队列和集合使用[C++ 标准容器](http://en.cppreference.com/w/cpp/container)（例如[`std::queue`](http://en.cppreference.com/w/cpp/container/queue)，用于实际队列、[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)通道和[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)连接客户端的集合。）

客户端非常简单，只需要能够向服务器发送订阅和发布消息，并从服务器接收发布消息。困难的部分将再次成为实际的沟通部分。

* * *

后记：

我自己从来没有真正构建过这样的系统，以上所有内容都只是我的头脑。一个有经验的程序员不应该需要超过几个小时来实现基础知识，对于一个没有经验的程序员来说可能需要几天。

对于您可以使用的通信，例如[Boost ASIO](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html) ，可能每个通道使用一个[线程。](http://en.cppreference.com/w/cpp/thread)您可以使用[Boost 属性树之](http://www.boost.org/doc/libs/1_52_0/doc/html/property_tree.html)类的东西来构造/解析[JSON](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.json_parser)或[XML](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_propertytree/parsers.html#boost_propertytree.parsers.xml_parser)消息。

然而，所有这一切都是在重新发明轮子，当您可能在几个小时内开始使用 RabbitMQ 等现有系统之一时，为您节省了大量时间（还有很多错误！）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T09:38:59.813

就轻量级服务器而言，[Redis](http://redis.io/commands#pubsub)支持 pub/sub 命令。

Redis 代码本身非常紧凑（只有几个文件），它是单线程的（使用事件循环），并且内存消耗非常低（与我见过的其他排队系统相比）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-19T15:49:04.957

我知道它已经晚了，但可能对其他人有用。我使用 boost 在 C++ 中实现了一个基本的 pub/sub。

[CppPubSub](https://github.com/Anil8753/CppPubSub)

用法很简单。从一端在频道上发布您的数据（通用地图），另一端订阅同一频道并再次接收通用地图。

```
// you should create a singleton object of NotificationService class, make it accessible throughout your application. 
INotificationService* pNotificationService = new NotificationService();

// Subscribe for the event.
function<NotificationHandler> fnNotificationHandler = bind(&SubscriberClass::NotificationHandlerFunction, this, std::placeholders::_1);
subscriptionToken = pNotificationService->Subscribe("TEST_CHANEL", fnNotificationHandler);

// Publish event
NotificationData _data;
_data["data1"] = "Hello";
_data["data2"] = "World";
pNotificationService->Publish("TEST_CHANEL", _data);

// Unsubscribe event.
pNotificationService->Unsubscribe(subscriptionToken); 
```

# android - android动画可以改变视图的大小吗

> ID：14454710
> 
> 赞同：2
> 
> 时间：2013-01-22T08:54:45.013
> 
> 标签：android, animation

是否可以通过动画更改图像大小？我想要实现的是我有一个`imageView`，并且我想使用动画来调整它的大小。让它更大，就像我在 xml 文件中将它设置为**200dip**，在动画之后它变成**500dip**。这可能吗？我应该使用什么方法确切地说？任何帮助和指导都会非常受欢迎。谢谢：D。

或者可以实现这个效果。

编辑：

我想我需要更清楚一点，我有一个屏幕**800dip**和两个视图，第一个是**200dip**，另一个是**600dip**。所以第二个尺寸是通过计算的`screen size - first size`，我想知道我是否通过动画将第一个 imageView 尺寸更改为**600dip**，当然第二个 imageView 变成**200**自动，会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:26:28.860

您的动画更改了视图层次结构参数，因此您应该将新的布局参数 (lp) 应用于 ImageView。

创建自定义动画，将新的 lp 应用于 ImageView，在每一帧上设置不同的宽度/高度。所以你的图像视图会增加它的大小并移动其他视图。有很多例子如何实现这一点。[看看这个](https://stackoverflow.com/questions/5165682/how-to-implement-expandable-panels-in-android)。

```
 @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        android.view.ViewGroup.LayoutParams lp = mContent.getLayoutParams();
        lp.height = (int) (mStartHeight + mDeltaHeight * interpolatedTime);
        mContent.setLayoutParams(lp);
    } 
```

# php - 基于用户代理的推断网络电子邮件应用程序

> ID：14454718
> 
> 赞同：1
> 
> 时间：2013-01-22T08:55:51.117
> 
> 标签：php, email, email-client

**TL;DR**如何根据请求的 UA 字符串推断使用了哪个 Web 电子邮件客户端？

* * *

我最近遇到了一个有趣的问题。我解析用户代理字符串以获取操作系统和浏览器|移动设备|等。所以这不是关于解析用户代理的问题。

我的问题是您如何推断使用什么网络电子邮件应用程序打开电子邮件？

首先是一些数据：

```
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17

Browser: Chrome
OS: Windows 7 
```

这是发送到的电子邮件地址`example@gmail.com`，我从中访问了 gmail 应用程序。

UA 字符串将用于`Chrome`. 我意识到我不能假设`@gmail.com`电子邮件应用程序使用的电子邮件地址是 Gmail。

如果在移动或桌面平台上阅读电子邮件，则相当容易获得，因为它们的 UA 字符串不同。即使您收到`@gmail.com`电子邮件`Outlook 2010`，电子邮件客户端仍将是 Outlook 2010，因为它有自己的 UA 字符串。

这只是我所做的一些背景和一些假设。

编辑：所以我在[这里](https://stackoverflow.com/questions/5052893/email-tracking-gmail)看到这实际上是可以做到的。将您的跟踪图像托管在`HTTPS`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:01:14.137

我认为您无法知道仅检查 UA 的电子邮件客户端。正如您所说，有时您可以（例如“展望”）但并非总是如此。

也许您可以查看**“referer”**以查看请求是从哪里发送的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:05:45.437

我怀疑 UA 标头是否足以对用于创建电子邮件的软件做出可靠的猜测。除此之外，消息可能在中间发生了更改，还有一些客户端没有指定有意义的 UA 标头。

我猜想当考虑到消息的更多细节时，您可以获得更可靠的结果。你必须生成类似指纹的东西。所以一些基于规则/测试的框架可能是有意义的，测试某些解决方案的典型细节。详细信息，例如多部分消息的正式结构、标头条目的顺序等。

# php - 将 8 位数值更改为欧洲日期格式

> ID：14454724
> 
> 赞同：1
> 
> 时间：2013-01-22T08:56:19.997
> 
> 标签：php, date

使用 PHP，我将数据馈送到一个数组：`$index->indexDate`这给了我一个欧式 8 位日期（没有时间只有 8 位日期）。

例如：该值`28112012`应为`28-11-2012`or `28/12/2012`。我尝试了几种方法，但我不确定我应该怎么做，我一直以 1970 年的日期结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:00:53.617

有 DateTime 类及其`format`方法

```
$date = \DateTime::createFromFormat('Ymd', '28112012')->format('d-m-Y') 
```

如果您的应用程序需要处理完全国际化（“i18n”），那么您应该看看[PHP 的 Intl 扩展](http://php.net/manual/fr/intl.examples.basic.php)。基本上，它会针对每个国家/地区调整数字、日期、货币等的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:01:48.980

怎么用`substring`？[关联](http://php.net/manual/en/function.substr.php)

```
$date="28112012";
$new_date=substr($date,0,2)."-".substr($date,2,2)."-".substr($date,4,4); 
```

使用`-`或`/`。

# php - 如何改进 var_dump 以显示变量名并将变量值放入 ?

> ID：14454725
> 
> 赞同：3
> 
> 时间：2013-01-22T08:56:20.553
> 
> 标签：php

我`var_dump()`在脚本中多次使用函数来检查变量的实际值和类型。长期以来，足以使功能`vardump()`女巫定义如下：

```
function vardump($_var){
    echo '<pre>';
    var_dump($_var);
    echo '</pre>';
} 
```

但是今天我已经使用它很多次和很多地方了，以至于我对我真正检查的那个变量感到困惑。所以问题是如何确定我当前正在检查的值的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:00:26.230

经过一上午的搜索，我找到了这个解决方案：

```
/**
 * Functions that will display name of the variable, and it's value, and type
 * 
 * @param type $_var - variable to check
 * @param type $aDefinedVars - Always define it this way: get_defined_vars()
 * @return type
 */
function vardump(&$_var, &$aDefinedVars = null){
    if($aDefinedVars){
         foreach ($aDefinedVars as $k=>$v)
            $aDefinedVars_0[$k] = $v; 
        $iVarSave = $_var; // now I copy the $_var value to ano
        $_var     = md5(time());

        $aDiffKeys = array_keys (array_diff_assoc ($aDefinedVars_0, $aDefinedVars));
        $_var      = $iVarSave;
        $name      = $aDiffKeys[0];
    }else{
        $name = 'variable';
    }

    echo '<pre>';
    echo $name . ': ';
    var_dump($_var);
    echo '</pre>';
} 
```

要获取变量名称，您必须确保使用`vardump()`如下：

```
vardump($variable_name, get_defined_vars()); 
```

`get_defined_vars()` 此函数返回一个多维数组，其中包含所有已定义变量的列表，无论是环境变量、服务器变量还是用户定义变量，都在调用 get_defined_vars() 的范围内。

我将对代码进行更多解释，其中使用了一些奇特的函数。

```
/**
 * Functions that will display name of the variable, and it's value, and type
 * 
 * @param type $_var - variable to check
 * @param type $aDefinedVars - Always define it this way: get_defined_vars()
 * @return type
 */
function vardump(&$_var, &$aDefinedVars = null){
    // $aDefinedVars - is array of all defined variables - thanks to get_defined_vars() function
    if($aDefinedVars){
        // loop below is used to make a copy of the table of all defined variables
        foreach ($aDefinedVars as $k=>$v)
            $aDefinedVars_0[$k] = $v; // this is done like that to remove all references to the variables
        $iVarSave = $_var; // now I copy the $_var value to another variable to prevent loosing it
        $_var     = md5(time()); // completly random value
        // and the most tricky line
        $aDiffKeys = array_keys (array_diff_assoc ($aDefinedVars_0, $aDefinedVars)); 
```

因为我已经更改了`$_var`值数组`$aDefinedVars_0`并且`$aDefinedVars`除了`$_var`值之外是相同的（注意`$aDefinedVars_0`不要使用对变量的引用，所以`$_var`我没有影响chengin `$aDefinedVars_0`）。

现在该`array_diff_assoc`函数将`$aDefinedVars_0`（原始值）与`$aDefinedVars`（更改`$_var`值）进行比较，并返回与关联数组（仅包含一个位置`$_var`名称和`$_var`值的数组）的差异。

该`array_keys`函数从输入数组返回键、数字和字符串（输入数组只包含我要查找的一个位置）。

```
 $_var      = $iVarSave; // now I can restore old $_var value
        $name      = $aDiffKeys[0]; // name of the $_var is on the first (and the only position) in the $aDiffKeys array
    }else{ // is someone won't use get_defined_vars()
        $name = 'variable';
    }

    echo '<pre>';
    echo $name . ': ';
    var_dump($_var); // it can be changed by print_r($_var);
    echo '</pre>';
} 
```

PS。对不起我的英语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:16:54.087

我在互联网上看到许多奇怪的脚本来解决您的问题或类似的问题......

我认为，通常，最好的方法是将变量的名称（如果需要可以缩短）作为字符串参数传递：

```
function vardump($_var, $var_name){
echo '<pre> Variable <b>$var_name</b>: ';
var_dump($_var);
echo '</pre>';
} 
```

它不是那么快，但它是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:09:18.557

好吧，我想推荐一个名为 dump_r 的 php 类。该类以不同的颜色显示信息，它是 var_vump 和 print_r 的组合。您可以在 phpclasses.org 上找到它

[链接在这里](http://www.phpclasses.org/package/7733-PHP-Display-values-of-variables.html#download)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T09:00:58.957

由于 to 的参数`vardump`可能是表达式而不是变量，因此这是您可以获得的最接近的值：

```
function vardump($_var, $_label){
    echo '<pre>';
    if(!empty($_label)){
      echo $_label . ': ';
    }
    var_dump($_var);
    echo '</pre>';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:00:57.987

您不能将变量名称作为字符串获取。您可以使用[如何在 PHP 中将变量名作为字符串获取？](https://stackoverflow.com/questions/255312/how-to-get-a-variable-name-as-a-string-in-php)但如前所述，它并不完美。

我认为您最好的选择是自己添加或使用全局变量并将 var 名称作为字符串传递

```
function vardump($_var){
    echo '<pre>';
    var_dump($GLOBALS[$_var]);
    echo '</pre>';
}

vardump("foo"); 
```

# python - 如何在同一台服务器上使用多个 python 虚拟环境

> ID：14454729
> 
> 赞同：7
> 
> 时间：2013-01-22T08:56:35.297
> 
> 标签：python, virtualenv

如何在同一台服务器上同时部署和托管多个具有不同依赖关系的 python 项目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T09:25:36.660

当然，一次只能激活一个 virtualenv 是不正确的。是的，一次只能在 shell 会话中激活一个，但您的站点不是通过 shell 会话部署的。例如，每个 WSGI 进程都将创建自己的环境：因此您需要做的就是确保每个 wsgi 脚本激活正确的 virtualenv，就像（至少在 mod_wsgi 的情况下）[有据可查](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments)的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:16:56.133

对 python使用[virtualenv](http://pypi.python.org/pypi/virtualenv)。如果需要，您可以在其中安装任何其他版本的 python/包。

# wolfram-mathematica - Mathematica 中二维高斯与圆柱的卷积

> ID：14454731
> 
> 赞同：0
> 
> 时间：2013-01-22T08:56:46.057
> 
> 标签：wolfram-mathematica, 2d, gaussian, convolution

我想在 Mathematica 中将二维高斯与圆柱函数进行卷积。然而，Mathematica 只会创建一个没有错误消息的空函数（即它的行为正常），因此在绘制函数或使用它进行计算时，根本不会发生任何事情。这是二维高斯：

```
GaussFkt2D[x_, y_, mux_, muy_, sigmax_, sigmay_, A_] :=
A*E^-((x - mux)^2/(2 sigmax^2) + (y - muy)^2/(2 sigmay^2)) 
```

这是圆柱体功能：

```
cylFkt2D[x_, y_, w_] := 
Piecewise[{{0, x^2 + y^2 > (w)^2}, {1, x^2 + y^2 <= (w)^2}}] 
```

为了卷积，我使用：

```
ConvolutionCylinderGauss2D[u_, v_, mux_, muy_, sigmax_, sigmay_, A_,w_] =
Convolve[
         GaussFkt2D[x, y, mux, muy, sigmax, sigmay, A], 
         cylFkt2D[x, y, w], {x, y}, {u, v}
        ]; 
```

是否有可能以 Mathematica 不会破坏卷积的方式实现卷积？我想问题可能是在进行卷积时 Mathematica 只是过载了。

# c# - 清理 xml 文件 - 给定编码中的无效字符

> ID：14454733
> 
> 赞同：0
> 
> 时间：2013-01-22T08:56:52.413
> 
> 标签：c#, .net, xml, magento, deserialization

我正在使用他们的“SOAP”api 与 Magento 电子商务集成，并且 API 返回“XML”结果。问题是，这并不总是格式正确：

```
<product>
   <entity_id>18</entity_id>
   <price regular="2925  <span>Nok</span>"/>
   ... 
```

在这种特定情况下，价格常规属性在属性文本中既有不可见字符 0xa0（在 span 标记之前），又有 < >。

我似乎无法从 Magento 获得格式正确的 XML，因此另一种方法是在将其提供给`XmlSerializer`反序列化之前对其进行清理：

```
XmlSerializer serializer = new XmlSerializer(typeof(Responses.Product.product));
product = serializer.Deserialize(textReader) as Responses.Product.product; 
```

我可以使用简单的文本替换来摆脱不可见字符，但我更不确定属性文本中的 <>。

我的问题是，如何将其清理为有效的 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:03:16.877

字符 0x3c 是`<`字符。对于不可见的字符，您宁愿寻找像 0x09 TAB 字符这样的东西。

要修复损坏的标记，您可以在内容中查找特定的 HTML 标记，使用正则表达式来允许标记内的任何货币：

```
xml = Regex.Replace(xml, "<span>([A-Za-z]{3})</span>", "&lt;span&gt;$1&lt;/span&gt;"); 
```

只要`span`XML 代码本身中没有任何元素（具有三个字符的内容），这种方法就可以工作。您可以对其他 HTML 标记进行类似的替换，但尽量使模式保持特定，以避免误报。

# java - 我想获得特定月份的周数

> ID：14454736
> 
> 赞同：18
> 
> 时间：2013-01-22T08:56:57.260
> 
> 标签：java, android, calendar

我想获取当前月份的周数。包括上周的上个月天数和下个月的第一周天数。

像这样的东西：

[![简单是不是？](../Images/ebeddc5bbb944c157293608ba2d1517a.png)](https://i.stack.imgur.com/kMxiV.png)

我想在android上的某个gridview适配器中使用它，并试图操纵这个代码块：

```
 //FIRST_DAY_OF_WEEK =0;
    int lastDay = month.getActualMaximum(Calendar.DAY_OF_MONTH);
    int firstDay = (int) month.get(Calendar.DAY_OF_WEEK);
    int firstDayNextMonth = nextMonth.get(Calendar.DAY_OF_WEEK);
    int lastDayNextMonth=nextMonth.getActualMaximum(Calendar.DAY_OF_MONTH);
    int nextMonthdays=nextMonth.getMinimalDaysInFirstWeek();

    // figure size of the array
    if (firstDay == 1) {
        days = new String[lastDay + (FIRST_DAY_OF_WEEK * 6)];
    }

    else {
        days = new String[lastDay + firstDay - (FIRST_DAY_OF_WEEK + 1)];
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T09:04:39.920

Calendar 类的 WEEK_OF_YEAR 属性对您很有用。参考：[日历类](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)

创建一个新日期，该日期将是某个月份的第一天。获取这一天的一年中的一周，假设您获得了起始值。

创建一个新日期，该日期将是给定月份的最后一天。获取这一天的一年中的一周，所以现在你得到了最终值。

现在 end - start + 1 应该是你想要的。

当一周与另一年或类似的时间重叠时，您可能必须处理一些极端情况。但我认为一旦你做对了，你就可以用简单的逻辑做到这一点。

这是简单的示例代码。我认为你可以让它发挥作用并传递你想要的任何东西。

```
 Calendar cal = Calendar.getInstance();
        cal.set(Calendar.YEAR, 2013);
        cal.set(Calendar.MONTH, 1);
        cal.set(Calendar.DAY_OF_MONTH, 1);
        int start = cal.get(Calendar.WEEK_OF_YEAR);
        Log.d("BLA BLA", "Value is " + start);
        cal.set(Calendar.YEAR, 2013);
        cal.set(Calendar.MONTH, 1);
        cal.set(Calendar.DAY_OF_MONTH, 28);
        int end = cal.get(Calendar.WEEK_OF_YEAR);
        //Above line will not work for December Month, use following line for this
        int end = isDecember?53:cal.get(Calendar.WEEK_OF_YEAR);
        Log.d("BLA BLA", "Value is " + end);
        Log.d("BLA BLA", "Num weeks:: " + (end - start +1 )); 
```

**对于角落案例：**

极端情况只会发生在 Januaray 月份（例如 2010 年 1 月、2000 年 1 月），在这些情况下，大部分时间都是上一年最后一周的一部分，因此开始值将是 52，结束值将是 5。发生这种情况检查是否，

```
 if(start > end) {
                numweeks = end + 1;
             } 
```

PS：把它放到你得到的不同的测试输入中。如果您发现任何错误，请告诉我是否可以改进。

**甚至更简单的解决方案：**

```
 Calendar cal = Calendar.getInstance();
        for(int i = 0 ; i < 11;i++){
            cal.set(Calendar.YEAR, 2013);
            cal.set(Calendar.DAY_OF_MONTH, 1);
            cal.set(Calendar.MONTH, i);
            int maxWeeknumber = cal.getActualMaximum(Calendar.WEEK_OF_MONTH);
            Log.d("LOG","max week number" + maxWeeknumber);
        }

        01-22 01:49:03.591: D/LOG(573): max week number5
        01-22 01:49:03.602: D/LOG(573): max week number5
        01-22 01:49:03.602: D/LOG(573): max week number6
        01-22 01:49:03.671: D/LOG(573): max week number5
        01-22 01:49:03.671: D/LOG(573): max week number5
        01-22 01:49:03.671: D/LOG(573): max week number6
        01-22 01:49:03.681: D/LOG(573): max week number5
        01-22 01:49:03.691: D/LOG(573): max week number5
        01-22 01:49:03.691: D/LOG(573): max week number5
        01-22 01:49:03.711: D/LOG(573): max week number5
        01-22 01:49:03.711: D/LOG(573): max week number5 
```

**简单的解决方案适用于极端情况：**

```
 Calendar cal = Calendar.getInstance();
        for(int i = 0 ; i < 11;i++){
            cal.set(Calendar.YEAR, 2010);
            cal.set(Calendar.DAY_OF_MONTH, 1);
            cal.set(Calendar.MONTH, i);
            int maxWeeknumber = cal.getActualMaximum(Calendar.WEEK_OF_MONTH);
            // Month value starts from 0 to 11 for Jan to Dec
            Log.d("LOG","For Month :: "+ i + " Num Week :: " + maxWeeknumber);
        } 
```

日志：

```
 01-22 01:59:35.841: D/LOG(629): For Month :: 0 Num Week :: 6
        01-22 01:59:35.841: D/LOG(629): For Month :: 1 Num Week :: 5
        01-22 01:59:35.841: D/LOG(629): For Month :: 2 Num Week :: 5
        01-22 01:59:35.841: D/LOG(629): For Month :: 3 Num Week :: 5
        01-22 01:59:35.841: D/LOG(629): For Month :: 4 Num Week :: 6
        01-22 01:59:35.852: D/LOG(629): For Month :: 5 Num Week :: 5
        01-22 01:59:35.871: D/LOG(629): For Month :: 6 Num Week :: 5
        01-22 01:59:35.871: D/LOG(629): For Month :: 7 Num Week :: 5
        01-22 01:59:35.871: D/LOG(629): For Month :: 8 Num Week :: 5
        01-22 01:59:35.871: D/LOG(629): For Month :: 9 Num Week :: 6
        01-22 01:59:35.871: D/LOG(629): For Month :: 10 Num Week :: 5 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-26T06:30:30.180

我们可以使用日历类，然后做类似的事情

```
Calendar calendar = Calendar.getInstance();
System.out.println(calendar.getActualMaximum(Calendar.WEEK_OF_MONTH)); 
```

这将返回当前月份的周数

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-22T09:34:18.140

使用 WEEK_OF_MONTH 会更好，没有跨年问题。

```
public static void main(String[] args) throws Exception {
  for (String m : new String[] { "2012-11", "2012-12", "2013-01", "2013-02", "2013-03",
              "2013-04", "2013-05", "2013-06" }) {
      SimpleDateFormat format = new SimpleDateFormat("yyyy-MM");
      Date date = format.parse(m);
      Calendar c = Calendar.getInstance();
      c.setTime(date);

      int start = c.get(Calendar.WEEK_OF_MONTH);

      c.add(Calendar.MONTH, 1);
      c.add(Calendar.DATE, -1);
      int end = c.get(Calendar.WEEK_OF_MONTH);
      System.out.println(" # of weeks in " + format.format(c.getTime())
              + ": " + (end - start + 1));
  }
} 
```

结果：

```
# of weeks in 2012-11: 5
# of weeks in 2012-12: 6
# of weeks in 2013-01: 5
# of weeks in 2013-02: 5
# of weeks in 2013-03: 6
# of weeks in 2013-04: 5
# of weeks in 2013-05: 5
# of weeks in 2013-06: 6 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-21T14:03:10.343

## java.time

我建议您使用现代 Java 日期和时间 API java.time 来处理您的日期工作（坦率地说，我很惊讶地看到到目前为止没有任何答案表明这一点）。

```
public static int getTotalNumberOfWeeks(WeekFields wf, Temporal month) {
    YearMonth ym = YearMonth.from(month);
    int firstWeekNumber = ym.atDay(1).get(wf.weekOfMonth());
    int lastWeekNumber = ym.atEndOfMonth().get(wf.weekOfMonth());
    return lastWeekNumber - firstWeekNumber + 1; // Both weeks inclusive
} 
```

让我们首先尝试使用您问题中的示例月份，即 2013 年 1 月，因此我们知道预期结果是 5。由于您的周从星期日开始，我们也在通话中指定：

```
 System.out.println(getTotalNumberOfWeeks(
            WeekFields.SUNDAY_START, YearMonth.of(2013, Month.JANUARY))); 
```

输出是预期的：

> 5

对于一个较新的示例，我将在 2021 年 5 月（撰写本文时的下个月）。因为我住的地方我们使用 ISO 周（从星期一开始），所以我们也尝试一下：

```
 System.out.println(getTotalNumberOfWeeks(
            WeekFields.ISO, YearMonth.of(2021, Month.MAY))); 
```

> 6

如果您希望在 JVM 的默认语言环境中使用周数，请`WeekFields.of(Locale.getDefault())`用作第一个参数。如果你想要当前月份，你可以`YearMonth.now(ZoneId.systemDefault())`作为第二个传递。为方便起见，我声明了第二个参数 a `Temporal`。这允许您传递 a `LocalDate`、 a `YearMonth`、 a `ZonedDateTime`、任何定义月份和年份的 java.time 类。

ISO 8601 是可能在世界大部分地区使用的国际标准，它将每月的第 1 周定义为每月至少包含 4 天的第一周。这意味着月初最多三天可能在第 0 周。这就是为什么只查看月休的最大周数的答案的原因。相反，我从最大值中减去最小周数并加 1，因为我们希望这两个周都包含在计数中。

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T09:16:24.537

假设我们知道一个月的第一天（周六、周日等）。

*   如果该月的第一天是 a`Sunday`并且不是闰年，那么（更正编辑）`February`月份将只有 4 周。否则，在所有情况下，它应该至少有 5 周，最多 6 周。
*   现在，如果您的月份从 开始`Saturday`，您将始终有 6 周（不包括 2 月，届时将有 5 周）
*   现在，如果您的月份从 开始`Friday`，那么您将有 6 周的月份有 31 天，而其他月份有 5 周。
*   对于其他情况，将始终为 5 周。

找出每月的第一天应该不难，您可以使用`Calendar`或其他日期/时间实用程序库类。但是，我想可能会有更清洁的解决方案来消除极端情况和不必要的复杂性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-12T13:41:25.697

如果你想用“手”来做

用这个：

```
Date.prototype.getMonthWeek = function(monthAdjustement)
{    

    var firstDay = new Date(this.getFullYear(), this.getMonth(), 1).getDay();

    var returnMessage = (Math.ceil(this.getDate()/7) + Math.floor(((7-firstDay)/7)));

    return returnMessage;

} 
```

与今天的日期相比，哪里`monthAdjustement`只是调整您寻找的月份的整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-21T09:04:06.250

Java 的**Calendar API**对于这种用例非常有用。参考链接：[日历文档](https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

我假设你有一个月的开始日期。

1.  我们需要使用 setTime() 设置 Time(java.util.Date obj) 因为当您创建 Calendar 类的实例时，它默认将时间设置为***机器的当前时间和日期***。

    **如果您不需要计算特定月份的总周数，那么您可以简单地避免第一步。**

2.  我们只需要为名为 Calendar.WEEK_OF_MONTH 的字段名称调用 getActualMaximum()。

    ```
    public static int getTotalNumberOfWeeks() throws ParseException {

        Calendar calendar = Calendar.getInstance();

        Date monthStartingDate = new SimpleDateFormat("yyyy-MM- dd").parse("2021-04-01");

        calendar.setTime(monthStartingDate);

        return calendar.getActualMaximum(Calendar.WEEK_OF_MONTH);
    } 
    ```

您也可以通过打印日历的对象在控制台中查看给定日期的更多详细信息。

# python - 在站点包中安装我的 Python 单元测试是否有意义？

> ID：14454744
> 
> 赞同：15
> 
> 时间：2013-01-22T08:57:12.953
> 
> 标签：python, unit-testing, installation, setuptools, software-distribution

我正在开发我的第一个 Python 分发包。我在 Python 打包方面的学习曲线似乎正在趋于平稳，但我仍在努力解决一些悬而未决的问题。一个是我是否应该让我的单元测试与我的代码一起安装。

我知道[在源代码分发中包含测试很重要](https://stackoverflow.com/questions/14436912/what-are-the-use-cases-for-a-python-distribution "在源代码分发中包含测试很重要")。我想知道我是否应该实际配置它们以进行安装？

我已经看到至少一个流行的包似乎是故意这样做的（[PyHamcrest](https://github.com/hamcrest/PyHamcrest)），以及至少另一个似乎是偶然这样做的（[表现](https://github.com/jeamland/behave)）。

所以我的（多部分）问题是这样的：

*   将我的包单元测试与我的包代码一起安装是否有意义？

*   如果是这样，用例是什么？谁会使用它们以及用于什么目的？也就是说，谁会使用它们而不是完全乐意下载源分发并运行`python setup.py test`呢？

*   他们将如何使用已安装的单元测试？像`import test; test.run()`或类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-13T14:29:43.580

在我看来，正确的答案是否定的，但你会发现很多安装测试的发行版。不应安装测试，但应将它们包含在源代码分发中。在我看来，在理想情况下，测试安装的包应该是包管理器（pip）执行的任务，并且`site-packages`目录不应该被测试源污染。

我最近研究了这个主题并从各种来源收集了信息，并发现了几种不同的方法来构建包含库源和测试的发行版的目录/包层次结构。这些结构中的大多数似乎已经过时了，它们的发明是为了解决当时旧分发系统的不完整功能集。不幸的是，许多在线资源（较旧的博客文章/文档）仍在宣传过时的方法，因此通过在线搜索很容易找到过时的分发方法/教程。

假设您有一个名为“my_lib”的库，并且您想要构建您的发行版的源代码。我将展示两种流行且看似过时的方式来构建您的发行版，以及第三种我发现是最通用的方式。第三种方法也可能已经过时，但这是我在发布此答案时所知道的最好的方法。;-)

# 方法#1

（有意或无意地）安装测试的发行版通常使用这种方法。

**等级制度**

```
+- my_lib
|  +- __init__.py
|  +- source1.py
|  +- source2.py
|  +- tests
|     +- __init__.py
|     +- test_1.py
|     +- test_2.py
+- setup.py 
```

# 方法#2

未安装测试，但它们应通过`MANIFEST.in`文件包含在源代码分发中。

**等级制度**

```
+- my_lib
|  +- __init__.py
|  +- source1.py
|  +- source2.py
+- tests
|  +- __init__.py
|  +- test_1.py
|  +- test_2.py
+- setup.py 
```

# 方法#3（我更喜欢这个。）

这与方法#2 非常相似，但略有不同（`src`目录）。

**等级制度**

```
+- src
|  +- my_lib
|     +- __init__.py
|     +- source1.py
|     +- source2.py
+- tests
|  +- __init__.py
|  +- test_1.py
|  +- test_2.py
+- setup.py 
```

**setup.py 中的 setup() 调用**

```
from setuptools import setup, find_packages

setup(
    ...
    packages=find_packages('src'),
    package_dir={'': 'src'},
    ...
) 
```

**清单文件**

```
recursive-include tests *.py 
```

不会安装测试，但它们将通过我们的`MANIFEST.in`.

在方法#3 的情况下，您的`src`目录通常只包含一个包，该包是您的 lib 的根目录。将`my_lib`包放入`src`目录（目录而不是包，因此您不需要`src/__init__.py`）具有以下好处：

*   执行时`setup.py`包含的目录`setup.py`会隐式添加到 python 路径中。这意味着`setup.py`如果它的包与`setup.py`. 通过将`my_lib`包放入`src`我们可以避免这个问题。
*   您可以轻松地使用分布式测试源来测试分布式库源和已安装的库：

    *   当您使用调用`setup.py test`的`package_dir={'': 'src'}`一部分运行测试时，可以`setup()`保证您的测试将看到您`my_lib`保留的库包`src/my_lib`。
    *   您也可以在没有`setup.py`. 在最简单的情况下，您可以使用`python -m unittest`命令执行此操作。在这种情况下，`src`dir 不会是 python 路径的一部分，因此您可以使用此方法来测试已安装的库版本，而不是`src`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-31T01:44:26.430

在研究了这个问题之后，直到更有经验的人有一点时间来权衡，我的理解是简单的答案是：“不，不应该安装单元测试，只包含在*源代码分发*中”。

在我发现安装测试的少数几个案例中，所有结果都是**偶然**的，而且在没有注意到的情况下**犯错误比人们想象的要容易。**

这是如何发生的：

1.  该`packages=find_packages()`参数在 setup.py 中使用，因此无需明确列出即可找到包。
2.  该`test`文件夹被制成一个包（通过添加`__init__.py`），因此测试可以使用相对命名（如`from .. import pkg.mod`）引用他们测试的模块。
3.  `setuptools``test`与项目中的其他软件包一起作为单独的软件包安装。请注意，这意味着您可以`import test`在 python 解释器中执行它并且它可以工作，几乎可以肯定不是您想要的，特别是因为很多其他人使用该名称作为他们的测试目录:)

解决方法是使用设置：`packages=find_packages(exclude=['test'])`防止安装您的测试目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:14:40.383

但是我不是专家，我想分享一下我的观点。

如果我预计某些事情可能会因外部原因而失败，我总是会将测试与代码放在一起。无论是位顺序、奇怪的时区、字符编码、24 位整数还是您可以遇到并进行测试的任何其他奇怪的东西。

谁会不乐意下载源代码并运行测试？也许有些`debian`用户的包被从源中剥离（我知道你在谈论 python，但让我有点笼统）并且你的库有时会由于系统中的一些奇怪的事情而失败。

如果您的测试仅确保内部健全，我会跳过附加它们，因为没有源它们没有多大价值，因为您永远不会更改库的内部结构。

就个人而言，我听说过一个失败的事情，因为它被移到了一些具有不同位顺序的 IBM 机器上。我不记得它是依赖于位操作还是有一些预先计算和静态缓存的东西。但有时明智的做法是检查您是否加载了您认为已保存的内容。

编辑：也许改写它会更好。当您觉得可能存在可移植性警告时，我会安装测试。我认为当你在不同的系统上部署东西时检查东西总是好的。

# qt - 用于 MingW 的 Qt SDK 下载

> ID：14454745
> 
> 赞同：1
> 
> 时间：2013-01-22T08:57:13.657
> 
> 标签：qt, sdk

我正在寻找使用 MingW 作为编译器的 Windows Qt SDK。不幸的是，在官方下载站点上，我只能找到使用 MSVC 的那个。或者只是库而不是整个 SDK。

谁能告诉我在哪里可以找到我正在寻找的版本，或者解释如果我分别下载 QT 库、QT 创建者和 MingW 应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:16:35.057

在这里您可以找到使用 MinGW 4.7 的预发布版本。
[http://releases.qt-project.org/digia/5.0.1/latest/](http://releases.qt-project.org/digia/5.0.1/latest/)

它们与分布在此处的 MinGW 构建配合良好：http:
[//sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

Qt 构建随 Qt Creator 一起提供，因此您可以安装它，并且在设置您的工具包后应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:11:16.090

你可以在这里找到二进制文件：http: [//qt-project.org/forums/viewthread/23002/](http://qt-project.org/forums/viewthread/23002/) 但是你应该重新配置安装手册或者你可以使用[这个](http://www.runfastsoft.com/)工具。Digia 的某个人[承诺](http://blog.qt.digia.com/blog/2012/12/19/qt-5-0/)在 1 月底之前构建 MinGW，所以你可以等待。

# ruby-on-rails - Ruby 电子表格格式化字符串

> ID：14454754
> 
> 赞同：2
> 
> 时间：2013-01-22T08:57:54.187
> 
> 标签：ruby-on-rails, ruby, spreadsheet, xls

在我的 xls 文件中，我有这样的行：

```
8630025500  8630025500      MOBIS/KIA/HYUNDAI   ACCENT (ТаГаз)  ЭМБЛЕМА "HYUNDAI"   2   2       1   106 
```

在我的代码中，我获取第二行（8630025500），所以：

```
row[1].present? ? oem = row[1] : oem = nil 
```

但是在 db 中我看到`863002550.0`了，但是为什么呢？为什么它正在格式化我的数据？如何将数据设置为文件中的数据库？我也试过：

```
row[1].present? ? oem = row[1].to_s : oem = nil 
```

在 xls 中，此行格式是数字（如果我尝试将其设置为 common，我会得到相同的结果）...

这是文件示例，如果您需要：[xls 文件](https://dl.dropbox.com/u/59666091/%D0%BF%D0%BE%D1%81%D1%821.xls)

那么如何在db中导入数据，比如xls excel输出呢？

在 db 中，我的字段是 varchar！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T14:34:30.743

我玩了一下 SpreadSheet 库和您的文件，并检查了以下类别`row[1]`：

```
irb> sheet.each {|row| print row[1], ' ', row[1].class; puts }
866202F501 String
866201F000 String
866201G600 String
866201G800 String
8662026800.0 Float
866202H010 String
... 
```

明白了！它收费！一些值的类型是 Float，所以当你调用`to_s`它们时（或者 ActiveRecord，如果你不调用），它会添加`.0`. 这只是`to_s`方法 of的行为`Float`：它总是添加小数部分，即使它是零。**数据库在这里不相关。**

可能会有更优雅的解决方案（以某种方式配置电子表格库，修改 xls），但最快的破解是：**在转换为 string 之前看到 Float -> converts to int**。

相比：

```
irb> sheet.each {|row| puts row[1].is_a?(Numeric) ? row[1].to_i.to_s : row[1]  }
866202F501
866201F000
866201G600
866201G800
8662026800
866202H010 
```

~~因此，您可以将此检查添加到您的检查中`.present?`，可能会将其包装到一个函数中，以免看起来那么难看。~~在这里，我使用`Numeric`而不是`Float`: 它是所有数字的基类，所以如果你以某种方式得到十进制或其他东西，它也会被捕获。

**UPD：**这里是代码示例：您可以将您的行替换为以下内容：

```
oem = row[1].is_a?(Numeric) ? row[1].to_i.to_s : row[1] if row[1].present? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:14:00.350

您可以将数据保存为数据库中的 varchar 或字符串，这样它就不会更改您的数据。当您获取它时，您可以在那里应用转换

# ios - 如何将 NSData 转换为 UIImage？

> ID：14454755
> 
> 赞同：0
> 
> 时间：2013-01-22T08:57:56.503
> 
> 标签：ios, ios6, uiimage, nsdata, xcode4.5

我已成功将 UIImage 转换为 NSData 并使用 SBJson Web 服务将其发送到服务器。我正在使用这段代码：

```
img=mainImage.image;
NSData *imgdata=UIImagePNGRepresentation(img);

NSString *post =[[NSString alloc] initWithFormat:@"gid=%@&image=%@",[lblgid text],imgdata];

NSURL *url=[NSURL URLWithString:@"http://www.abchjahdkahdakjskahdk/updategameimage.php"]; 
```

这里*img*是 UIImage，*mainImage*是 UIImageView。从这开始一切都很好。现在在另一端，我必须在那里获得图像，我面临问题。我正在使用这段代码：

```
 NSData *imgdata=[abc valueForKey:@"image"];

    imge = [UIImage imageWithData:imgdata];

    imgview=[[UIImageView alloc]initWithImage:imge]; 
```

当我打印*imgdata*时，它返回的数据与我从另一端发送的数据相同，但是当我尝试将此数据转换回 UIImage（在上述代码的第二行中）时，它会引发异常。

> 2013-01-22 14:23:43.298 Drase[946:11303]-[__NSArrayI 长度]：无法识别的选择器发送到实例 0x7566800 2013-01-22 14:23:43.298 Drase[946:11303] *** 由于未捕获而终止应用程序exception 'NSInvalidArgumentException', reason: '-[__NSArrayI length]: unrecognized selector sent to instance 0x7566800' *** First throw call stack: (0x1ce1012 0x111ee7e 0x1d6c4bd 0x1cd0bbc 0x1cd094e 0x1cb1b2 0x881f3 0x87ef4 0x1c659 0x1132705 0x69920 0x698b8 0x12a671 0x12abcf 0x129d38 0x9933f 0x99552 0x773aa 0x68cf8 0x1c3cdf9 0x1c3cad0 0x1c56bf5 0x1c56962 0x1c87bb6 0x1c86f44 0x1c86e1b 0x1c3b7e3 0x1c3b668 0x6665c 0x29d2 0x2905）libc++abi.dylib：终止调用抛出异常。

我没有得到任何解决这个问题的方法，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:06:45.150

我认为 abc 是 NSArray 类型，即不可变，当您执行此行时

```
imge = [UIImage imageWithData:imgdata]; 
```

它引用了`abc NSArray`因为`imgdata`

在这里，您间接尝试修改它，这就是它调用`[__NSArrayI length]`. 但实际上没有这样的方法，因为我们可以计算 NSArray 但不能测量长度。这意味着没有这样的方法，这就是它给出错误的原因

`[__NSArrayI length]: unrecognized selector sent to instance`

更新1：

尝试做这样的事情：

```
NSData *imgdata=[[abc valueForKey:@"image"]objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:06:46.780

尝试

```
 NSData *data = yourData;

  UIImage *image = [UIImage imageWithData:data]; 
```

或者

```
 NSData *data = yourData;

  UIImage *image = [[UIImage alloc] initWithData:data];
  ....
  [image release]; 
```

# javascript - 如何使用复选框使用 Javascript 更改 bgcolor？

> ID：14454758
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:58:09.980
> 
> 标签：javascript, jquery, html, css, background-color

我有这个 html

```
<table border="1">
    <tr>
        <td>
            <input type="checkbox">
        </td>
        <td>
            Hello
        </td>
        <td>
            my friend!
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox">
        </td>
        <td>
            ...
        </td>
        <td>
            ...
        </td>
    </tr>
    ...
</table> 
```

`<tr>`如果我想在激活复选框时更改我的 bgcolor，我需要做什么？我想我可能需要做点什么`onclick()`。

编辑：我需要的是复选框应该只修改他的当前行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:07:54.743

一种可能的方法：

```
document.getElementById('table').onclick = function(e) {
    var e = e || event,
        el = e.srcElement || e.target;
    if (el.tagName == 'INPUT') {
        el.parentNode.parentNode.className = el.checked ? 'active' : '';
    }
}; 
```

[http://jsfiddle.net/TQbpH/2/](http://jsfiddle.net/TQbpH/2/)

在此示例中，事件冒泡到侦听它的父表，然后在需要时分派它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:03:09.690

[http://jsfiddle.net/L6xsB/](http://jsfiddle.net/L6xsB/)

```
$(function () {
    $('tr').on('click', 'input:checkbox', function () {
        $(this).parents('tr').toggleClass('active');
    });
}); 
```

CSS：

```
tr.active {
    background-color: #FFC;
} 
```

# java - 获取 XML 文档中子字符串的 XPath

> ID：14454762
> 
> 赞同：-1
> 
> 时间：2013-01-22T08:58:21.053
> 
> 标签：java, xml, xpath

我需要在 XML 文档中找到文本元素的确切 XPath。我认为这样做的一种方法是将 Document 转换为字符串，在子字符串周围添加一个临时标记，将其转换回 Document，然后找到 XPath。

这是我到目前为止所拥有的：

```
public String findXPathInXMLString(int startIndex, int endIndex, String string) throws IOException, ParserConfigurationException, SAXException {
    Conversion conversion = new Conversion();
    String xpath;

    //Step 1\. Replace start to end index with temporary tag in string document
    StringBuilder stringBuilder = new StringBuilder(string);
    stringBuilder.replace(startIndex, endIndex, "<findXPathInXMLStringTemporaryTag>" + string.substring(startIndex, endIndex) + "</findXPathInXMLStringTemporaryTag>");

    //Step 2\. Convert string document to DOM document & Find XPath of temporary tag in DOM document
    xpath = "/" + getXPath(conversion.stringToDocument(stringBuilder.toString()), "findXPathInXMLStringTemporaryTag");

    //Step 3\. Cut off last part of the XPath
    //xpath = xpath.substring(0, 2).replace("/documentXPathTemporaryTag", "");

    //Step 4\. Return the XPath
    return xpath;
}

public String getXPath(Document root, String elementName) {
    try {
        XPathExpression expr = XPathFactory.newInstance().newXPath().compile("//" + elementName);
        Node node = (Node) expr.evaluate(root, XPathConstants.NODE);

        if (node != null) {
            return getXPath(node);
        }
    } catch (XPathExpressionException e) {
    }

    return null;
}

public String getXPath(Node node) {
    if (node == null || node.getNodeType() != Node.ELEMENT_NODE) {
        return "";
    }
    return getXPath(node.getParentNode()) + "/" + node.getNodeName();
} 
```

到目前为止，我遇到的问题是该方法`getXPath`没有放置，`[x]`因此返回的 XPath 是错误的，因为子字符串可能位于`[3]`特定标记的 rd 实例中，在这种情况下，XPath 将应用于所有具有相同路径的节点。我想得到一个只能引用一个特定元素的确切路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:35:31.117

好的，这是怎么回事（以[ideone 为例](http://ideone.com/fW1LFX#)）：

我改变了`startIndex`，`endIndex`只是`index`。临时节点可以附加到文本中的单个点。

```
public static String findXPathInXMLString(int index, String string) throws XPathExpressionException, SAXException, ParserConfigurationException, IOException {
    String xpath;

    //Step 1\. Insert temporary tag in insert location
    StringBuilder stringBuilder = new StringBuilder(string);
    stringBuilder.insert(index, "<findXPathInXMLStringTemporaryTag />");

    Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(
        new ByteArrayInputStream(stringBuilder.toString().getBytes())
      );

    //Step 2\. Convert string document to DOM document & Find XPath of temporary tag in DOM document
    xpath = getXPath(document, "findXPathInXMLStringTemporaryTag");

    //Step 3\. Cut off last part of the XPath
    xpath = xpath.replace("/findXPathInXMLStringTemporaryTag", "");

    //Step 4\. Return the XPath
    return xpath;
}

private static String getXPath(Document root, String elementName) throws XPathExpressionException 
{
  XPathExpression expr = XPathFactory.newInstance().newXPath().compile("//"+elementName);
  Node node = (Node)expr.evaluate(root, XPathConstants.NODE);

  if(node != null) {
      return getXPath(node);
  }

  return null;
}

private static String getXPath(Node node) throws XPathExpressionException {
    if(node == null || node.getNodeType() != Node.ELEMENT_NODE) {
        return "";
    }

    return getXPath(node.getParentNode()) + "/" + node.getNodeName() + getIndex(node);
}

private static String getIndex(Node node) throws XPathExpressionException {
    XPathExpression expr = XPathFactory.newInstance().newXPath().compile("count(preceding-sibling::*[local-name() = '" + node.getNodeName() + "'])");
    int result = (int)(double)(Double)expr.evaluate(node, XPathConstants.NUMBER);

    if(result == 0){
        return "";
    }
    else {
        return "[" + (result + 1) + "]";
    }
} 
```

# c# - 创建一个读取流到最后的 Observable 的正确方法是什么

> ID：14454766
> 
> 赞同：7
> 
> 时间：2013-01-22T08:58:33.187
> 
> 标签：c#, system.reactive

我在这里挣扎。通常我会读一本书，但现在还没有。我发现了无数与使用 RX 读取流有关的各种示例，但我发现很难理解。

我知道我可以使用 Observable.FromAsyncPattern 创建 Stream 的 BeginRead/EndRead 或 BeginReadLine/EndReadLine 方法的包装。

但这只会读取一次——当第一个观察者订阅时。

我想要一个 Observable ，它将继续读取和泵送 OnNext 直到流错误或结束。

除此之外，我还想知道如何与多个订阅者共享该可观察对象，以便他们都获得项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-15T21:10:34.993

您可以使用`Repeat`为了保持阅读行直到流结束，`Publish`或者`Replay`为了控制跨多个阅读器的共享。

一个简单、完整的 Rx 解决方案的示例，用于从任何流中读取行直到结束：

```
public static IObservable<string> ReadLines(Stream stream)
{
    return Observable.Using(
        () => new StreamReader(stream),
        reader => Observable.FromAsync(reader.ReadLineAsync)
                            .Repeat()
                            .TakeWhile(line => line != null));
} 
```

该解决方案还利用了到达流末尾时`ReadLine`返回的事实。`null`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T13:37:45.440

添加到李的答案，使用[rxx](http://rxx.codeplex.com/)：

```
using (new FileStream(@"filename.txt", FileMode.Open)
       .ReadToEndObservable()
       .Subscribe(x => Console.WriteLine(x.Length)))
{
  Console.ReadKey();
} 
```

将输出读取缓冲区的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:06:43.067

嘿 - 将在这里重用我的其他答案之一（好吧，它的一部分，无论如何）：

参考：[从 NetworkStream 读取会破坏缓冲区](https://stackoverflow.com/questions/14439976/reading-from-networkstream-corrupts-the-buffer)

在那，我有一个这样的扩展方法：

```
public static class Ext
{        
    public static IObservable<byte[]> ReadObservable(this Stream stream, int bufferSize)
    {        
        // to hold read data
        var buffer = new byte[bufferSize];
        // Step 1: async signature => observable factory
        var asyncRead = Observable.FromAsyncPattern<byte[], int, int, int>(
            stream.BeginRead, 
            stream.EndRead);
        return Observable.While(
            // while there is data to be read
            () => stream.CanRead, 
            // iteratively invoke the observable factory, which will
            // "recreate" it such that it will start from the current
            // stream position - hence "0" for offset
            Observable.Defer(() => asyncRead(buffer, 0, bufferSize))
                .Select(readBytes => buffer.Take(readBytes).ToArray()));
    }
} 
```

您可能可以以如下形式使用它：

```
// Note: ToEnumerable works here because your filestream
// has a finite length - don't do this with infinite streams!
var blobboData  = stream
     .ReadObservable(bufferSize)
     // take while we're still reading data
     .TakeWhile(returnBuffer => returnBuffer.Length > 0)
     .ToEnumerable()
     // mash them all together
     .SelectMany(buffer => buffer)
     .ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T21:27:34.680

解决方案是使用 Observable.Create

这是一个可以适应读取任何类型流的示例

```
 public static IConnectableObservable<Command> GetReadObservable(this CommandReader reader)
    {

       return Observable.Create<Command>(async (subject, token) =>
        {

            try
            {

                while (true)
                {

                    if (token.IsCancellationRequested)
                    {
                        subject.OnCompleted();
                        return;
                    }

                    //this part here can be changed to something like this
                    //int received = await Task.Factory.FromAsync<int>(innerSocket.BeginReceive(data, offset, size, SocketFlags.None, null, null), innerSocket.EndReceive);

                    Command cmd = await reader.ReadCommandAsync();

                    subject.OnNext(cmd);

                }

            }

            catch (Exception ex)
            {
                try
                {
                    subject.OnError(ex);
                }
                catch (Exception)
                {
                    Debug.WriteLine("An exception was thrown while trying to call OnError on the observable subject -- means you're not catching exceptions everywhere");
                    throw;
                }
            }

        }).Publish();

    } 
```

不要忘记在返回的 IConnectableObservable 上调用 Connect()

# arrays - 使用 JSTL 或 EL 创建数组

> ID：14454769
> 
> 赞同：29
> 
> 时间：2013-01-22T08:58:50.013
> 
> 标签：arrays, jsp, jstl, el, scriptlet

我正在使用 Java 及其框架（Spring 3.1.1）开发一个 Web 应用程序。而且我试图尽可能避免使用scriptlet，但是我找不到除此之外的方法来定义数组：

```
<%
    String[] alphabet = {"A", "B", "C", ... , "Z"};
    pageContext.setAttribute("alphabet", alphabet);      
%> 
```

设置 pageContext 属性后，我可以将它与`${alphabet}`. 但我想知道，是否可以使用普通的 JSTL/EL 创建数组？

**更新：**我正在使用这个数组来创建链接。例如，如果用户单击“S”，则会出现名字以“S”开头的员工列表。所以，我不是一个一个地创建链接，而是迭代`${alphabet}`。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-22T15:08:41.407

[如果您已经在支持对集合对象](http://docs.oracle.com/javaee/7/tutorial/jsf-el004.htm)的新操作的 EL 3.0（Tomcat 8+、WildFly 8+、GlassFish 4+、Payara 4+、TomEE 7+ 等）上，您可以使用`${[...]}`语法构造一个列表，并且`${{...}}`构造集合的语法。

```
<c:set var="alphabet" value="${['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']}" scope="application" /> 
```

如果您还没有使用 EL 3.0，请`${fn:split()}`对单个字符串使用函数技巧，该字符串通过常用分隔符（例如逗号）分隔各个字符。

```
<c:set var="alphabet" value="${fn:split('A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z', ',')}" scope="application" /> 
```

但是，我同意您最好为此使用普通的 Java 代码。鉴于它显然是静态数据，只需创建此侦听器类：

```
@WebListener
public class ApplicationData implements ServletContextListener {

    private static final String[] ALPHABET = { "A", "B", "C", ..., "Z" };

    @Override
    public void contextInitialized(ServletContextEvent event) {
        event.getServletContext().setAttribute("alphabet", ALPHABET);
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        // NOOP.
    }

} 
```

它会在 webapp 启动时透明地自动注册，并将所需的数据放入应用程序范围内。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-12T10:32:13.933

如果您想遍历字符串中的标记，则只需使用`forTokens`：

```
<c:set var="alphabet">A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z</c:set>

<c:forTokens items="${alphabet}" delims="," var="letter">
    ${letter}
</c:forTokens> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-29T01:53:58.970

如果您使用 Java EE 7 / Expression Language 3.0，您可以创建一个`List`文字

```
<c:set var="alphabet" value="${['A', 'B', 'C', ... , 'Z']}" /> 
```

然后可以像`Array`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T09:23:12.343

JSP 不适用于这种东西。它们的目的是消费，而不是创造。如果你想创建一个数组，那么你可能需要一个`Servlet`here。

在 Servlet 中添加数组创建逻辑（甚至更好，创建列表），并使用它来*预处理*对 JSP 页面的请求。然后，您可以使用页面中`List`设置的属性。`servlet``JSP`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-27T09:03:36.967

不是纯 EL，但仍然是一个非常干净的解决方案：

```
<c:set var="alphabet" value='<%=new String[]{"A", "B"} %>'/> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-22T10:07:39.223

在不知道您使用哪个*框架*的情况下，使用 JSP 而不使用 scriptlet 的最佳方法是使用 Java bean（一个对象）支持每个 JSP（视图）：

支持豆：

```
public class MyBackingBean {

   private List<String> alphabet;

   public List<String> getAlphabet() {
      if (alphabet == null) {
         // Using lazy initialization here, this could be replaced by a
         // database lookup or anything similar
         alphabet= Arrays.asList(new String[]{ "A", "B", "C", ... });
      }
      return alphabet;
   }

} 
```

然后以这种方式在 JSP 中实例化 bean：

```
<jsp:useBean id="backingBean" scope="page" class="com.example.MyBackingBean" /> 
```

之后，您可以使用 EL`${backingBean.alphabet}`访问该列表。

**注意**：如果您需要更复杂的处理，则必须使用 Servlet 或任何框架提供的任何功能。

# jquery - 需要使用 jquery 添加选定的项目

> ID：14454770
> 
> 赞同：1
> 
> 时间：2013-01-22T08:58:54.900
> 
> 标签：jquery, css, jquery-ui

我有两个（命名为box1，box2）多个选定的表单和两个按钮，按设计在它们之间添加/删除。Box1 将具有值1、2、3、4、5 的项目a、b、c、d、e。我已经编写了添加和删除的代码。现在，当我从 box1 添加 a、b、c、d 到 box2 时，我需要获取所有要显示的项目的总和，即 10，当我从 box2 中删除一个项目时，即b 然后它应该告诉我 8.我想使用 jquery 和 css 来做。请帮助我或鼓励任何教程。我只是一个初学者，所以请帮助我。谢谢 :)

我试过这个

```
<script>

$(document).ready(function() {

    $('#btn-add').click(function(){
        $('#select-from option:selected').each( function() {
                $('#select-to').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");

        });
    });
    $('#btn-remove').click(function(){
        $('#select-to option:selected').each( function() {
            $(this).remove();
        });
    });

});
</script>

</head>
<body>
<form>
  <fieldset>

    <select name="selectfrom" id="select-from" multiple size="5">
      <option value="1">Item 1</option>
      <option value="2">Item 2</option>
      <option value="3">Item 3</option>
      <option value="4">Item 4</option>
    </select>

    <a href="JavaScript:void(0);" id="btn-add">Add &raquo;</a>
    <a href="JavaScript:void(0);" id="btn-remove">&laquo; Remove</a>

    <select name="selectto" id="select-to" multiple size="5">

    </select>

  </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:14:50.823

我不知道我是否理解正确，但是既然你知道如何复制元素，那么在完成之后（从 box1 和 box2）使用 jQuery 从 box2 中获取所有元素并使用`each`方法来解析每个`<option>`. 如果你在 ie 之前定义了一个变量。`var sum = 0;`然后为其添加值。然后你可以显示一个总和

-- 或者，您可以在复制时添加价值并立即更改选项值的总和

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:20:05.453

您是否要计算选择框中添加的选项的值 2 表示这将对您有所帮助。[演示](http://jsfiddle.net/T7bRc/)

```
<a href="JavaScript:void(0);" id="btn-count">&laquo; Count</a>  

$(document).ready(function() {

    $('#btn-add').click(function(){
        $('#select-from option:selected').each( function() {
                $('#select-to').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");

        });
    });
    $('#btn-remove').click(function(){
        $('#select-to option:selected').each( function() {
            $(this).remove();
        });
    });

    $('#btn-count').click(function(){
       var a =0;
         $('#select-to option').each( function() {
            a = a+ parseInt($(this).val());           
         });
         alert(a);
     });   
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:17:44.030

我认为你的意思的[演示](http://jsfiddle.net/mplungjan/uQHx7/)

注意：我`JavaScript:`从您的链接中删除了伪协议并添加了 e.preventDefault()

```
$(document).ready(function() {
    var val1 = 0;

    $('#btn-add').click(function(e){
        e.preventDefault();
        $('#select-from option:selected').each( function() {
           val1 += parseInt($(this).val(),10);
           $('#select-to').append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");

        });
        $("#val1").html(val1);
    });
    $('#btn-remove').click(function(e){
        e.preventDefault();
        $('#select-to option:selected').each( function() {
           val1 -= parseInt($(this).val(),10);                
            $(this).remove();
        });
        $("#val1").html(val1);
    });

}); 
```

# mvvm - BindableBase：绑定到嵌套属性不调用 setter

> ID：14454771
> 
> 赞同：0
> 
> 时间：2013-01-22T08:58:57.407
> 
> 标签：mvvm, binding, windows-runtime, winrt-xaml

我有以下型号：

```
public class Car : BindableBase
{
    private string _model;
    private string _wheels;

    public string Model
    {
        get { return _model; }
        set { SetProperty(ref _model, value); }
    }

    public string Wheels
    {
        get { return _wheels; }
        set { SetProperty(ref _wheels, value); }
    }
}

public class Customer : BindableBase
{
    private Car _car;

    public Car Car
    {
        get { return _car; }
        set { SetProperty(ref _car, value); }
    }
} 
```

绑定看起来像这样：

```
<Page.Resources>
    <viewModels:CustomerViewModelLocator x:Key="PageViewModel" />
</Page.Resources>

<StackPanel>
    <TextBox Background="AliceBlue" Text="{Binding ViewModel.Car.Model, Mode=TwoWay, Source={StaticResource PageViewModel}}"></TextBox>
    <TextBox Background="AliceBlue" Text="{Binding ViewModel.Car.Wheels, Mode=TwoWay, Source={StaticResource PageViewModel}}"></TextBox>
</StackPanel> 
```

我在设计时视图中使用 ViewModelLocator 模式，它看起来不错。但在运行时，我不会击中模型的设置器。

我究竟做错了什么？

将设置 Customer 模型中的琐碎类型...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:48:10.027

如果 Car 为空，就会发生这种情况。尝试在 Customer 中设置 _car = new Car()。

# android - googlemap 不显示在模拟器上

> ID：14454772
> 
> 赞同：0
> 
> 时间：2013-01-22T08:59:03.640
> 
> 标签：android

**xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

  </RelativeLayout> 
```

**活动**

```
 package com.example.googlemap;
 import android.annotation.SuppressLint; 
 import android.os.Bundle;
 import android.support.v4.app.FragmentActivity;

 import com.google.android.gms.maps.CameraUpdateFactory;
 import com.google.android.gms.maps.GoogleMap;
 import com.google.android.gms.maps.MapFragment;
 import com.google.android.gms.maps.model.BitmapDescriptorFactory;
 import com.google.android.gms.maps.model.LatLng;
 import com.google.android.gms.maps.model.Marker;
 import com.google.android.gms.maps.model.MarkerOptions;

 public class MainActivity extends FragmentActivity {

  static final LatLng HAMBURG = new LatLng(53.558, 9.927);
  static final LatLng KIEL = new LatLng(53.551, 9.993);
  private GoogleMap map;
//@SuppressLint("NewApi")

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // SupportMapFragment fragment = new SupportMapFragment();
      //  getSupportFragmentManager().beginTransaction()
         //       .add(android.R.id.content, fragment).commit();
    map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))   .getMap();
        Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
            .title("Hamburg"));
        Marker kiel = map.addMarker(new MarkerOptions()
            .position(KIEL)
            .title("Kiel")
            .snippet("Kiel is cool")
            .icon(BitmapDescriptorFactory
                .fromResource(R.drawable.ic_launcher)));

        // Move the camera instantly to hamburg with a zoom of 15.
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

        // Zoom in, animating the camera.
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);

}

} 
```

**显现**

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.googlemap"
  android:versionCode="1"
 android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<permission
    android:name="com.example.googlemap.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.googlemap.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.googlemap.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

      <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCcdbqI_CdaghJQ7VTeXIE1djmnlfZq_Qs" />
  </application>

</manifest> 
```

但代码不起作用，这样的错误

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.googlemap/com.example.googlemap.MainActivity}：android.view.InflateException：二进制 XML 文件第 7 行：膨胀类片段时出错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:13:45.003

确保您的模拟器支持 Google api。

如果不是启动包括 Google api 在内的新模拟器并使用这个新模拟器运行您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:13:55.960

我同意 Pratik 检查您的 Google Play 服务库是否已首先添加到您的项目中。

如果它已经在您的项目中，那可能是因为您的 minSDKversion 只有 8 并且不是至少 11 才能使 MapFragment 工作，因此您需要使用 SupportMapFragment 而不是使用 MapFragment。

```
map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

需要更改为 SupportMapFragment 等：

```
<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:08:03.877

`Google Map v2`需要`Google Play Services`运行并且模拟器不包含 AFAIK，因此`Google Play Services`您无法在模拟器中运行谷歌地图。

要在您的应用程序中使用 Google Maps Android API v2，您首先需要安装 Google Play 服务 SDK。

欲了解更多详情，请查看[链接](https://developers.google.com/maps/documentation/android/start)

# ant - 如何使用 Ant 删除符号链接？

> ID：14454775
> 
> 赞同：1
> 
> 时间：2013-01-22T08:59:06.587
> 
> 标签：ant, symlink

我正在尝试使用以下行删除 ant 脚本中的符号链接：

```
<symlink action="delete" link="/path/of/link/symlink"/> 
```

但它显示一个错误：

> 无法在 /directory/where/symlink/points 中创建临时文件

`/directory/where/symlink/points`应该是只读的。

有没有一种方法可以让我删除符号链接而不弄乱其他东西？这是一个大剧本的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:01:15.493

`<delete>`可以使用Ant 任务删除指向只读资源的符号链接。

```
<target name="delete-symlink">
<delete file="/path/of/link/symlink" followsymlinks="false"
      removenotfollowedsymlinks="true" />
</target> 
```

这是来自`delete`Ant 任务文档：

```
removeNotFollowedSymlinks  Whether symbolic links (not the files/directories 
                       they link to) should be removed if they haven't been 
                       followed because followSymlinks was false or the 
                       maximum number of symbolic links was too big. Since 
                       Ant 1.8.0 
```

希望它有效。

# php - 隐藏/显示按钮，刷新时也是如此

> ID：14454781
> 
> 赞同：0
> 
> 时间：2013-01-22T08:59:21.843
> 
> 标签：php, javascript, pdo

我正在制作一个显示“活动”的应用程序。每个活动都有自己的按钮。当您单击该按钮时，您将该特定活动添加到您的“指南”中。这个想法是您只能添加一次特定活动，因此该活动的按钮在添加到指南时必须消失。我可以在我的 javascript 中使用简单`$(this).hide()`的，但是当我刷新页面时这显然不起作用。所以我想我应该检查一下该活动是否存在于指南中。

在数据库中，我有 3 个表，1: `activity`(with an `ActivityID`)，2: `user`(with a `UserID`) 和 3: `user_activity`(with `ActivityID`and `UserID`，一个链接表)。

所以检查必须检查user_activity表中是否`ActivityID`存在，并且user_activity表中的`UserID`那个`ActivityID`与当前用户的ID相同。

此刻，我知道如何查看当前用户的UserID了：

```
//userid
$sql = "SELECT * FROM user WHERE Username = '".$_SESSION['Username']."' ";
$stm = $db->prepare($sql);
$result = $stm->execute(array());
while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
$userid = $row['UserID'];
} 
```

但我不知道如何检查是否`ActivityID`已经存在，以及我应该如何做出这个 if else 声明。

在我使用此脚本显示活动的那一刻（包括按钮）

```
$sql = "SELECT * FROM activity";
$stm = $db->prepare($sql);
$result = $stm->execute(array());   

while($row = $stm->fetch(PDO::FETCH_ASSOC))
{
    echo '<div id="activity'.$row['ActivityID'].'">';
    echo '<img src="data:image/jpeg;base64,' . base64_encode( $row['ActivityIMG'] ) . '" >', '<br>';
    $instantguide = $row['ActivityID'];
    echo '<input type="button" class="addActivity" onclick="MakeRequest(' . $instantguide . ')" value="Activiteit toevoegen" data-activity="' . $row['ActivityID'] . '">';
    echo '</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:25:26.520

你需要一个 LEFT JOIN 来查看已经有哪些活动

```
SELECT a.*, ua.ActivityID as added 
FROM activities a LEFT JOIN user_activity ua 
    ON a.ActivityID=ua.ActivityID AND UserID=:userid 
```

因此，您将`added`在结果集中有一个额外的字段，如果它已被选中，则填充一个 id，否则为空

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T09:20:27.577

```
// 首先你需要从你要搜索的表中获取所有的activityID，并将它们放入一个数组中
$sql2 = "SELECT * FROM user_activity";
$stm2 = $db->prepare($sql2);
$result2 = $stm2->执行（数组（））；  
$user_activityID = 数组（）；
而($row2 = $stm->fetch(PDO::FETCH_ASSOC))
{
    // 如果在 user_activity 表中，您尝试比较的列与活动中的名称相同 -- $row2['ActivityID']
    array_push($row2['ActivityID'], $user_activityID);
}

// 然后在遍历 user_activity 表时使用 in_array 进行比较
$sql = "SELECT * FROM 活动";
$stm = $db->prepare($sql);
$result = $stm->execute(array());
而($row = $stm->fetch(PDO::FETCH_ASSOC))
{
    if (in_array($row['ActivityID'], $user_activityID))
    {
        // 是的，活动表中的当前 $row['ActivityID'] 存在于 user_activity 表中
        // 你可以选择是否将它添加到你的数组中
        array_push($row['ActivityID'], $activityID);
    }

}

```

我确信还有其他更有效的方法可以做到这一点，使用一些我不知道的 pdo 东西，但这就是我会做的。

# google-maps - 如何将业务/“默认”位置标记和 infoWindow 添加到 Google 地图 (v3)

> ID：14454782
> 
> 赞同：2
> 
> 时间：2013-01-22T08:59:23.343
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

# 是否可以像 maps.google.com 中的那样添加带有“默认”信息窗口气泡的业务位置标记？

我正在为一家公司制作一个联系页面，其中自然有带有位置和标记的 GMaps 元素。

## 例子：

转到 maps.google.com 并搜索“Colosseum”（例如，任何“已知”位置/企业都可以）。当您单击 Colosseum 标记时，您会得到一个 infoWindow，其中包含窗口中的业务/景点/任何信息（屏幕截图：[https](https://dl.dropbox.com/u/1122582/colosseum.jpg) ://dl.dropbox.com/u/1122582/colosseum.jpg ）

## 我想看到的是：

*   当我在我的网页上单击我的地图上的标记时，它将打开与示例中相同的样式（或至少非常相似）的 infoWindow（这意味着徽标、地址、方向链接等，无论它有什么）。InfoWindow 由 API 选项提供，不是我手工制作的。

在伪代码中，我想像这样看到它：

```
myMarker.onClick({
    position: myBusinessLocation,
    useDefaultInfoWindow: true
    map: myMap
}); 
```

值得注意的是，由于坐标实际上只是坐标和命名位置，我需要让 API 理解标记点指向一个企业，而不仅仅是地图中的一个点。

## 要求

*   客户端 API 使用
*   不使用 Google 的 IFRAME 嵌入
*   没有制作一个看起来像示例中的自定义 infoWindow。重点是我会使用“默认”信息窗口（如果 GMaps API 甚至提供一个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:16:20.167

没有内置方法可以自动创建具有所需内容的此类 infoWindow。

这就是 API 的本质，它必须提供创建应用程序的能力，但不能自动创建应用程序。

您必须使用例如已实现的[infoWindow -object](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)自行创建 infoWindow 。

您还必须自行收集 infoWindow 的内容，您可以使用[Place-Details-Request检索地点的详细信息](https://developers.google.com/maps/documentation/javascript/places#place_details_requests)

# android - onConfigurationChanged(Configuration newConfig) 没有调用

> ID：14454792
> 
> 赞同：1
> 
> 时间：2013-01-22T09:00:39.840
> 
> 标签：android, onconfigurationchanged

在我的应用程序中，我只是覆盖了 onConfigurationChanged 方法，如下所示

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    System.out.println("Configuration Changed");
    Configuration c = getResources().getConfiguration();

    if (c.orientation == Configuration.ORIENTATION_PORTRAIT) {
        // portrait

    } else if (c.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        // landscape

    }
} 
```

但是在调用屏幕方向时不会调用它。

在清单中我的活动是这样的

```
<activity
        android:name=".MainActivity"
        android:configChanges="orientation"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:38:19.743

它没有被调用`super.onConfigurationChanged(newConfig);`，所以方法变成了

```
@Override
public void onConfigurationChanged(Configuration newConfig) {

  super.onConfigurationChanged(newConfig);

  System.out.println("Configuration Changed");
  Configuration c = getResources().getConfiguration();

  if (c.orientation == Configuration.ORIENTATION_PORTRAIT) {
    // portrait
  } else if (c.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    // landscape
  }

} 
```

并添加`android:configChanges="orientation|screenSize"`到清单中。

谢谢SSS :-)

# .net - 如何在 Visual Studio 2012 中执行自定义配置文件转换

> ID：14454802
> 
> 赞同：0
> 
> 时间：2013-01-22T09:01:21.670
> 
> 标签：.net, configuration, app-config, transform, .net-4.5

我正在构建一个 .NET 4.5 应用程序，我最终通过 ILMerge 运行它以在最后生成一个`.exe`和一个`.exe.config`。

我有一个构建后事件，它做了两件事。

1.  运行 ILMerge 并将组合程序集放在 $(ProjectDir)\Lib\
2.  Xcopy bin\orignial.exe.config => $(ProjectDir)\lib\combined.exe.config

我需要执行的最后一步是清理配置文件的内容。原始配置中的任何类型+程序集引用都需要替换，说明该类型现在位于新程序集中。例如，该应用程序还在`Unity`original.exe.config 中使用并合并了该部分条目是

```
<section name="unity" 
     type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection,
           ***Microsoft.Practices.Unity.Configuration***" /> 
```

而在合并的程序集中，它需要更改为

```
<section name="unity" 
     type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection,
           ***Combined***" /> 
```

我知道有一个内置的配置文件转换工具，用于根据您正在执行的构建（调试/发布）更改配置文件。只是想知道这可以用于自定义目的，还是我会被困在手工制作一些查找和替换代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:05:45.827

我决定使用 CTT；命令行 XDT 转换工具。

[http://ctt.codeplex.com/](http://ctt.codeplex.com/)

[http://outcoldman.com/en/blog/show/223](http://outcoldman.com/en/blog/show/223)

似乎它会与 ILMerge 一起完成我需要的工作。

# javascript - 用于 AJAX 目标跟踪的 Google Analytics 虚拟页面

> ID：14454814
> 
> 赞同：1
> 
> 时间：2013-01-22T09:02:11.650
> 
> 标签：javascript, google-analytics

我有一个检查表，它在下面的表单提交时触发。

```
function checkform() {

    if (!document.getElementById('terms').checked) {
        alert('Read terms of use');
        return false;
    }

    _gaq.push(['_trackPageview', '/subscribe-successful']);
    return true;

} 
```

我还在 if checked 语句之后放置了 trackPageview，所以如果验证通过，`gaq.push`就会执行。

Google Analytics 代码本身也在此代码之上，因此它之前已加载，我已将目标设置为`/subscribe-successful`

这是跟踪基于 AJAX 的目标的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:59:20.927

您的代码看起来正确，但请记住，Google Analytics 现在会认为您的访问者在该页面上，因为它的访问者流量和页面停留时间跟踪。

对于不涉及离开页面的事情，我更喜欢使用事件跟踪，如下所示：

```
_gaq.push(['_trackEvent', 'Subscribe', 'Success']); 
```

这将让您在不更改访问者 URL 的情况下在 Analytics 中跟踪成功订阅。（以及与此相关的失败，如果您想跟踪它。）

有时虚拟 URL（您的解决方案）会更好，例如当页面内容发生根本性变化时，它实际上不再是同一个页面。由您决定这是哪一个。

有关跟踪事件的信息，请参阅[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)。

# php - parse_ini_file 读取一个隐藏文件本地 win

> ID：14454817
> 
> 赞同：0
> 
> 时间：2013-01-22T09:02:31.080
> 
> 标签：php, ini

当我使用`parse_ini_file`函数读取ini文件时工作正常。但是当我读取隐藏的ini文件或系统文件时：

> [function.file-put-contents]：无法打开流：D:\wamp\www 中的权限被拒绝

当我创建我使用的ini文件时，我`file_put_contents`使用以下代码将文件转换为隐藏文件：

```
system('attrib +s +h ' . escapeshellarg($filename)); 
```

如何读取隐藏文件？

# css - What does mean [hidden] { ... } class in css?

> ID：14454819
> 
> 赞同：2
> 
> 时间：2013-01-22T09:02:44.353
> 
> 标签：css, hidden

I've found such code in html5boilerplate:

```
/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
  display: none;
} 
```

What address? What does it affect? Elements with attribute hidden like following example?

```
<div hidden></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:05:34.700

Yes, exactly like your example. The selector will match any element with a `hidden` attribute (there's an implied universal selector before the attribute selector).

The `hidden` attribute is a new addition to the HTML specification, and is therefore not supported in older browsers. By adding that rule to your stylesheet, you effectively polyfill the native behaviour of that attribute (which is, fairly obviously, to hide the element, similar to setting `display: none`).

The "known issue" in IE6 is caused by the fact that it doesn't support attribute selectors.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T09:05:18.337

**hidden** is an attribute in HTML5

Read Detailed description [here](https://stackoverflow.com/questions/6708247/what-is-the-difference-between-the-hidden-attribute-html5-and-the-displaynone). Also read a good explanation [here](http://dev.w3.org/html5/spec/Overview.html#the-hidden-attribute)

The comment would seem to suggest that that CSS solution is to address those browsers which are not compatible with the new hidden behavior by default

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:13:55.480

You can also create your own attributes using the prefix "data-". For example Jquery Mobile uses it.

Example :

Your HTML

```
<div data-role="header" data-position="top">
   // content here
</div> 
```

Your CSS

```
[data-role=header] 
{
     font-family:arial;
     font-size:20px;
}

[data-position=top]
{
     top:5px;
} 
```

A good explanation is available [here](http://ejohn.org/blog/html-5-data-attributes/).

[The W3C documentation](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)

# oracle11g - Oracle 数据泵（expdp 和 impdp）

> ID：14454821
> 
> 赞同：0
> 
> 时间：2013-01-22T09:03:01.653
> 
> 标签：oracle11g, remote-access, datapump

目前我正在使用`expdp and impdp`在我的电脑中导出和导入我的架构。我编写了两个脚本来导出和导入，并在需要时使用批处理文件运行该脚本。

现在我将在远程服务器上托管我的应用程序。我需要在我的远程服务器中备份模式，就像我在我的电脑上做的那样。（使用脚本，当我需要时使用批处理文件调用脚本）。

目前我正在使用以下语法

```
expdp scott/tiger schemas=SCOTT directory=TEST_DIR dumpfile=SCOTT.dmp logfile=expdpSCOTT.log

impdp scott/tiger schemas=SCOTT directory=TEST_DIR dumpfile=SCOTT.dmp logfile=impdpSCOTT.log 
```

但是我如何从远程服务器导出和导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:13:19.253

`dbms_datapump` [您可以使用提供的包](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_datpmp.htm#ARPLS356)在远程服务器上运行数据泵导出和导入。

但是，这只会导出/导入远程服务器本身的文件。因此，如果要从其他数据库导入转储，或将此导出复制到单独的数据库，则需要访问此服务器。

请注意，数据泵实际上并不是一种备份方法。如果您将其用于备份和恢复策略（而不仅仅是复制数据），您应该使用[RMAN](http://docs.oracle.com/cd/B28359_01/backup.111/b28273/rcmsynta040.htm#RCMRF111)。

# ios - 返回 ViewController 时按钮更改位置

> ID：14454824
> 
> 赞同：0
> 
> 时间：2013-01-22T09:03:11.710
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我有一个`view`包含 a`TableView`和`UIImage`a 的 a `UIButton`。在`UIButton`IB 中配置并定位如下：`self.camButton.frame = CGRectMake(0, 410,127,49);`我的问题是`UIButton`当我弹回第一个`ViewController`. 在第一次加载时，它的位置很好，但是当我回到`ViewController`按钮时，它位于视图中大约 20 像素的位置。我正在尝试记录按钮的位置，所以我进去了`viewWillAppear`： `NSLog(@"Bug Fixes: %f",self.camButton.frame.origin.y); NSLog(@"Bug Fixes: %f",self.view.frame.origin.y);`但我总是在第一次加载时得到 410 和 0，当按钮放错位置时。我正在玩`View`其他的位置`ViewControllers`（例如，在显示键盘时我向上推`view`），但我认为这不是导致它的原因，因为当我返回第一个位置时视图保持在同一位置`ViewController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:06:26.500

如果您启用了自动布局，则查找约束。

第二种方法是使用 initWithFrame: 每当您返回该视图时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:06:58.177

![在此处输入图像描述](../Images/e7135cf8d098284ad9fd4ba3f53dfd3c.png)

你需要设置`autoresizingMask`

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

有关更多信息，请查看此[链接](http://nachbaur.com/blog/basics-positioning-uiviews)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:15:07.650

把你的代码

```
self.camButton.frame = CGRectMake(0, 410,127,49); 
```

在 `-(void)viewWillAppear:(BOOL)animated`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:21:31.693

您在哪里设置按钮的框架（loadview、viewwillappear 等）以及在哪里分配按钮？您是否取消了dealloc中的按钮？尝试设置 UIViewAutoresizingFlexibleTopMaring | UIViewAutoresizingFlexibleBottomMargin。

# mysql - MYSQL 查询不等于不按预期工作

> ID：14454832
> 
> 赞同：0
> 
> 时间：2013-01-22T09:03:44.993
> 
> 标签：mysql

**我正在尝试做的事情：**多词搜索，当用户从下拉列表中选择 pub 时，它只需要检索表中 pub 不等于“-”的记录。

**出了什么问题：**它进行了一些过滤，但最后一条记录是带有“-”的记录

**我试过的：**

我在 MySQL 控制台中尝试了以下查询。

我的查询：

```
SELECT * FROM ticker where pub <> '-' AND (summary LIKE '%funny%' OR cust_exp LIKE '%funny%') OR (summary LIKE '%joke%' OR cust_exp LIKE '%joke%') OR (summary LIKE '%impact%' OR cust_exp LIKE '%impact%') ORDER BY `created` DESC 
```

上述查询是通过以下方式生成的：

构建多词搜索..

```
$words = explode(" ",$keywords);

        $queryWords = '';
        $i=0;  

        foreach($words as $each){
            $i++;

            if ($i == 1){
                $queryWords.=" (summary LIKE '%$each%' OR cust_exp LIKE '%$each%') ";   
            }
            else{
                $queryWords.=" OR (summary LIKE '%$each%' OR cust_exp LIKE '%$each%') ";    
            }
          } 
```

查询代码片段..

```
elseif ($ticket_type == 'Pub'){
                if ($status == 'All'){
                        if (empty($product)){
                            $query="SELECT * FROM ticker where pub <> '-' AND".$queryWords."ORDER BY `$order_by` DESC";
                        } 
```

编辑：示例搜索字符串是“有趣的笑话影响”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:08:26.340

试试这个：

```
SELECT * FROM ticker 
WHERE TRIM(pub) != '-' 
  AND (
    (summary LIKE '%funny%' OR cust_exp LIKE '%funny%') 
    OR
    (summary LIKE '%joke%' OR cust_exp LIKE '%joke%')
    OR 
    (summary LIKE '%impact%' OR cust_exp LIKE '%impact%')
  ) 
ORDER BY `created` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:06:25.080

检查您的查询

> AND".$queryWords."ORDER 你在“AND”和“ORDER BY”之间没有空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:15:19.467

$Where[] = "pub <> '-'";

$words = explode(" ", $keywords);

foreach($words as $ThisWord)$WhereWord[] = "summary LIKE '%{$ThisWord}%' OR cast_exp LIKE '%{$ThisWord}%'";

$Where[] = "(".implode(" OR ", $WhereWord).")";

$queryWords = "SELECT * FROM MyTable WHERE ".implode(" AND ", $Where)." ORDER BY '{$order_by}' DESC";

打印 $queryWords;

# web - 访问使用 WebGL 的页面时自动启用 WebGL？

> ID：14454838
> 
> 赞同：1
> 
> 时间：2013-01-22T09:04:11.773
> 
> 标签：web, webgl

如果网站使用它，有没有办法在浏览器中自动启用 webgl？

我知道你需要在 Safari 中手动启用它，并且有一个 IE 插件。

# javascript - 我可以将数据从 excel 表导入到仪器 UIAutomation 中吗？

> ID：14454842
> 
> 赞同：2
> 
> 时间：2013-01-22T09:04:19.187
> 
> 标签：javascript, instruments, ios-ui-automation, import-from-excel, xcode-instruments

我想为有两个字段的屏幕编写脚本，我只想测试这些字段的值的不同可能性，它是否会导航到进一步的屏幕。但是要输入这些字段的数据组合太大。那么我可以从已经存储了我的数据的 excel/任何其他文件中导入数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T13:19:00.730

对的，这是可能的。您可以获取能够在 bash 脚本中获取的所有数据。编写一个脚本文件，将所需信息打印到标准输出。例如

```
#!/bin/bash
cat myfile 
```

您可以从 UIAutomation 运行此 bash 脚本并使用此命令获取它的输出

```
var result = target.host().performTaskWithPathArgumentsTimeout(full_path_to_your_script, [""], 10); 
```

现在您可以使用 bash 脚本的输出：

```
element.setValue(result.stdout); 
```

在此处参考 fabe 的答案，[https: //stackoverflow.com/a/19016573/344798](https://stackoverflow.com/a/19016573/344798)

参考[https://stackoverflow.com/a/20626488/344798](https://stackoverflow.com/a/20626488/344798)

# mysql - 如何将数据库表中的每个字段链接到新的唯一表？

> ID：14454843
> 
> 赞同：1
> 
> 时间：2013-01-22T09:04:20.010
> 
> 标签：mysql, database, database-design

我正在使用 MySQL 作为数据库在 Java 中设计一个分类帐应用程序。数据库结构是这样的：

**表：账户**
--Account_No--Account_Holder--Address--Phone--

**表分类帐**（每个帐户都有）--日期-- 详细信息--借方--贷方-- Dr/Cr-- Bal

这种数据库的一个例子是：
--Account_No --Account_Holder--Address--Phone--
10001 -----------Joe Smith-------XXXYYYXXX--9283910203
10002 - ----------Jamie Mackie------YYYYXXYYS--999​​2929292
等等..

--Date--Details--Debit--Credit--Dr/Cr--Bal
（此表属于账户号 10001）
5 月 5 日 --- Prod XYZ -- 290-- 500 -------- -- - 210
5 月 8 日--- 现金点--- 210 - - ------------------0

每个帐户都类似...

现在的问题是每个帐户都会有一个分类帐表，并且我需要为每个新帐户创建一个表，但这似乎不对。还有其他方法吗？或者我看错了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:06:03.420

正常的做法是你有一个单一的分类帐表，其中有一列将其标记为该行所属的帐户。

包含相同信息的多个表是维护的噩梦。

# java - 位置改变时调用类

> ID：14454844
> 
> 赞同：-1
> 
> 时间：2013-01-22T09:04:21.213
> 
> 标签：java, android

在我的位置改变后，我需要指导来上课。谁能帮助我。我认为问题在于以下代码：

```
Intent i = new Intent(getApplicationContext(), CreateNewProduct.class);
startActivity(i); 
```

这是整个代码：

（当我的位置发生变化时，我在这里设置了一些条件，这也是我必须在下面调用下一个类的部分。）

```
class myLocationlistener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            if (location != null) {
                double pLong = location.getLongitude();
                double pLat = location.getLatitude();
                textLat.setText(Double.toString(pLat));
                textLong.setText(Double.toString(pLong));

                Intent i = new Intent(getApplicationContext(), CreateNewProduct.class);
                startActivity(i);
            }
        }
        @Override
        public void onProviderDisabled(String provider) {
        }
        @Override
        public void onProviderEnabled(String provider) {
        }
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    } 
```

（要调用的类）

```
class CreateNewProduct extends AsyncTask<String, String, String> {
        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Sample.this);
            pDialog.setMessage("Sending Location");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }
        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String latitude = textLong.getText().toString();
            String longitude = textLat.getText().toString();
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("latitude", latitude));
            params.add(new BasicNameValuePair("longitude", longitude));
            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);
            // check log cat fro response
            Log.d("Create Response", json.toString());
            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    Toast.makeText(getBaseContext(), "Success",
                            Toast.LENGTH_SHORT).show();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }
        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:11:38.000

您应该执行 aynctask 作为

```
new CreateNewProduct().execute(); 
```

因为 startActivity() 顾名思义只是用于启动活动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:17:11.937

CreateNewProduct 类不是 Activity。您无法使用 Intent 和 startActivity() 方法启动它。最好的解决方案是创建此类的对象并从此类中调用方法。

代码示例：

```
@Override

        public void onLocationChanged(Location location) {

            if (location != null) {

                double pLong = location.getLongitude();

                double pLat = location.getLatitude();

                textLat.setText(Double.toString(pLat));

                textLong.setText(Double.toString(pLong));

               CreateNewProduct p = new CreateNewProduct();
               p.execute();

            }
        } 
```

我希望我有所帮助。如果您有更多问题，请询问！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T11:19:04.873

您可以使用 LocationManager 类为所需位置添加邻近度，而不是调用类。

您可以使用 addProximityAlert() 方法和 PendingIntent 来实现它。

将要在位置更改上执行的代码放在 PendingIntent 中。

[Android 接近警报](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html)

# c - PulseAudio 录制和播放失败

> ID：14454852
> 
> 赞同：0
> 
> 时间：2013-01-22T09:04:47.707
> 
> 标签：c, linux, centos, pulseaudio

我正在尝试使用 centOS 6.2 中的脉冲音频 API 录制和播放音频数据。但它什么也不记录和回放。我正在使用[pulseaudio](http://jan.newmarch.name/LinuxSound/Sampled/PulseAudio/)的代码。我需要帮助才能让它在我的电脑上运行。我该怎么办？我的代码也在下面给出 -

```
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>

#include <pulse/simple.h>
#include <pulse/error.h>

#define BUFSIZE 32

int main(int argc, char*argv[]) {

/* The Sample format to use */
static const pa_sample_spec ss = {
    .format = PA_SAMPLE_S16LE,
    .rate = 44100,
    .channels = 2
};

pa_simple *s_in, *s_out = NULL;
int ret = 1;
int error;

/* Create a new playback stream */
if (!(s_out = pa_simple_new(NULL, argv[0], PA_STREAM_PLAYBACK, NULL, "playback", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
}

  if (!(s_in = pa_simple_new(NULL, argv[0], PA_STREAM_RECORD, NULL, "record", &ss, NULL, NULL, &error))) {
    fprintf(stderr, __FILE__": pa_simple_new() failed: %s\n", pa_strerror(error));
    goto finish;
}

for (;;) {
    uint8_t buf[BUFSIZE];
    ssize_t r;

#if 1
    pa_usec_t latency;

    if ((latency = pa_simple_get_latency(s_in, &error)) == (pa_usec_t) -1) {
        fprintf(stderr, __FILE__": pa_simple_get_latency() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    fprintf(stderr, "In:  %0.0f usec    \r\n", (float)latency);

    if ((latency = pa_simple_get_latency(s_out, &error)) == (pa_usec_t) -1) {
        fprintf(stderr, __FILE__": pa_simple_get_latency() failed: %s\n", pa_strerror(error));
        goto finish;
    }

    fprintf(stderr, "Out: %0.0f usec    \r\n", (float)latency);
#endif

    if (pa_simple_read(s_in, buf, sizeof(buf), &error) < 0) {

        fprintf(stderr, __FILE__": read() failed: %s\n", strerror(errno));
        goto finish;
    }

    /* ... and play it */
    if (pa_simple_write(s_out, buf, sizeof(buf), &error) < 0) {
        fprintf(stderr, __FILE__": pa_simple_write() failed: %s\n", pa_strerror(error));
        goto finish;
    }
}

/* Make sure that every single sample was played */
if (pa_simple_drain(s_out, &error) < 0) {
    fprintf(stderr, __FILE__": pa_simple_drain() failed: %s\n", pa_strerror(error));
    goto finish;
}

ret = 0;

finish:

if (s_in)
    pa_simple_free(s_in);
if (s_out)
    pa_simple_free(s_out);

return ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:43:45.747

顺利完成。这是我的操作系统中的一个错误，因为我有一段时间没有更新插件了。重新安装操作系统后，它工作。谢谢

# javascript - Flowplayer 禁用 OVA 自动播放

> ID：14454853
> 
> 赞同：2
> 
> 时间：2013-01-22T09:05:00.307
> 
> 标签：javascript, flowplayer, vast

我有一个可能很容易解决的问题，但我还没有找到解决方案。我尝试使用 OVA（广告管理）插件初始化 Flowplayer。如果我在剪辑上设置参数“autoPlay”=false，则播放器在初始化时不会自动播放。就像我不想要一样。但是，如果我有，让我们说一个由 OVA 插件管理的前贴片，它会在您点击播放按钮后播放。但是，一旦前贴片结束，主剪辑就不会自动播放。用户必须再次点击“播放”。

所以问题是：如何将 Flowplayer 与 OVA 一起使用，并且播放器在用户点击“播放”之前不应自动播放，但是一旦播放了前贴片（或任何其他广告），它应该继续播放下一个剪辑？

```
flowplayer( "elementID", "flowplayer.commercial-3.2.15.swf",
    {
        clip:
        {
            url: "video.mp4",
            autoPlay: false
        },
        plugins:
        {
            ova:
            {
                url: "ova.swf",
                ads:
                {
                    schedule:
                    [
                        {
                            position: "pre-roll",
                            server:
                            {
                                type: "direct",
                                tag: "vast.url"
                            }
                        }
                    ]
                }
            }
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-16T15:11:43.007

也许现在回复为时已晚，但对于以后访问这篇文章的人来说，答案是放在对象`autoPlay:false`内部`"ova"`，而不是放在对象内部`"clip"`：

```
ova: {
    url: "ova.swf",
    autoPlay: false,
    // ----- "general" options here -----
} 
```

# c# - 将数字添加到日期中的日、月或年

> ID：14454854
> 
> 赞同：-9
> 
> 时间：2013-01-22T09:05:03.243
> 
> 标签：c#, java, algorithm, date

> **可能重复：**
> [如何在 Java 中为日期添加天数](https://stackoverflow.com/questions/2507377/how-to-add-days-to-a-date-in-java)

考虑日期为**19/05/2013**，数字为**14**。我想在将数字添加到月份后得到结果日期。

预期结果是：2014 年 7 月 19 日。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T09:05:50.647

在 .NET 中，您可以使用以下[`AddMonths`](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)方法：

```
DateTime date = new DateTime(2013, 5, 19);
DateTime newDate = date.AddMonths(14); 
```

至于使用指定格式从字符串中解析日期，您可以使用以下[`TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.TryParseExact.aspx)方法：

```
string dateStr = "19/05/2013";
DateTime date;
if (DateTime.TryParseExact(dateStr, "dd/MM/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
{
    // successfully parsed the string into a DateTime instance =>
    // here we could add the desired number of months to it and construct
    // a new DateTime
    DateTime newDate = date.AddMonths(14);
}
else
{
    // parsing failed => the specified string was not in the correct format
    // you could inform the user about that here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:06:37.083

您可以[DateTime.AddMonths](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)添加月份。

```
DateTime date = new DateTime(2013, 5, 19);
DateTime newDate = date.AddMonths(14); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:08:20.890

在 Java 中：

```
Calendar c = Calendar.getInstance();
c.setTime(new Date()); // today is the default
c.add(Calendar.DATE, 1);  // number of days to add (1)
c.getTime();  // The new date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:09:46.587

只需使用**[AddMonths](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)**将指定的月数添加到此实例的值中。

```
DateTime date = new DateTime(2013, 5, 19);   // (yyyy,MM,dd)
DateTime dt = date.AddMonths(14); 
```

# android - 图像未在 Android 中下载

> ID：14454857
> 
> 赞同：0
> 
> 时间：2013-01-22T09:05:09.887
> 
> 标签：android

我有一些可以工作的代码，但现在不行，我不知道为什么。我正在尝试从 URL 下载图像，但没有检索到任何内容。我有以下代码：

```
URL u;
u = new URL("https://sites.google.com/site/mymoneymobilesite/rugbynut/leagues/league%20six%20nations.png");
URLConnection ucon = u.openConnection();
InputStream is = ucon.getInputStream();
Bitmap tmp_bmp = BitmapFactory.decodeStream(is); 
```

就像我说的，这是几个月前的工作，但我来更新一些其他代码，发现它不再是了。

有人可以帮忙吗？

更新：我已经尝试过代码：

```
InputStream iStream = (InputStream) u.getContent();
Drawable d = Drawable.createFromStream(iStream, "test"); 
```

但 d 为空。我使用与上面相同的 URL（图像是公开的）并且应用程序连接到互联网没有问题，因为它正在管理下载其他数据。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:08:35.833

1.  您可能没有在清单文件中授予互联网访问权限。

2.  请注意，要从 URL 获取图像，请使用 AsyncTask 或其他线程，因为无法在主线程中执行获取操作。

3.  尝试其他链接上的图像可能您尝试的链接无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:09:04.507

使用此代码

```
public static Drawable LoadImageFromWebOperations(String url) {
  try {
      InputStream is = (InputStream) new URL(url).getContent();
      Drawable d = Drawable.createFromStream(is, "src name");
      return d;
  } catch (Exception e) {
      return null;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:54:25.777

您可以使用此代码..

```
public static Drawable ImageOperations(String url) {
    try {
        InputStream is = (InputStream) fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");

        return d;
    } catch (MalformedURLException e) {
        return null;
    } catch (IOException e) {
        return null;
    }
}

public static Object fetch(String address) throws MalformedURLException,IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content;
} 
```

这对我来说很酷。我以前也遇到过这种错误，很难找到确切的错误。基本上，当互联网速度慢或图像很大时，就会发生这种情况。但是这段代码每次都有效..

# mysql - 将多行转换为表中的列

> ID：14454859
> 
> 赞同：1
> 
> 时间：2013-01-22T09:05:16.430
> 
> 标签：mysql, sql

我有一个包含以下行的表：

```
╔══════════╦═══════════╦════════╗
║ PK_VALUE ║ RATING_ID ║ RATING ║
╠══════════╬═══════════╬════════╣
║       11 ║         1 ║     90 ║
║       11 ║         2 ║     80 ║
║       11 ║         3 ║     90 ║
║       12 ║         1 ║     90 ║
║       12 ║         2 ║     80 ║
║       12 ║         3 ║     90 ║
╚══════════╩═══════════╩════════╝ 
```

我希望上表为：

```
╔══════════╦════════════╦════════════╦════════════╗
║ PK_VALUE ║ RATING_ID1 ║ RATING_ID2 ║ RATING_ID3 ║
╠══════════╬════════════╬════════════╬════════════╣
║       11 ║         90 ║         80 ║         90 ║
║       12 ║         90 ║         80 ║         90 ║
╚══════════╩════════════╩════════════╩════════════╝ 
```

我尝试了一些在 Google 搜索中找到的建议，但它表明我们必须插入表格。我不确定这一点。欢迎任何建议...

`I have uploaded the screenshots related to my doubt..`![在我用来获取之前结果查询的图像..](../Images/6f00ccbea3452289cdc2a38a3447fa10.png)

`In this image we can see two review ID's for the same pk_value.. But I am receiving only one review ID after including your query..` ![包含您的查询后的结果..](../Images/07a6030a76060f96ececcd8f713d3f49.png)

在上述 `How can I get result of both the review ID's???`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:06:37.487

使用`CASE`和`MAX`

```
SELECT  pk_value,
        MAX(CASE WHEN rating_ID = 1 THEN rating ELSE NULL END) AS r1,
        MAX(CASE WHEN rating_ID = 2 THEN rating ELSE NULL END) AS r2,
        MAX(CASE WHEN rating_ID = 3 THEN rating ELSE NULL END) AS r3
FROM    tableName
GROUP   BY pk_value 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/16164/2)

否则，如果您的数量未知`Rating_ID`并且不想不断更新查询，`Dynamic SQL`建议使用 a，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN rating_ID = ',
      rating_id,
      ' then rating ELSE NULL end) AS `rating_id', rating_id, '`')
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  pk_value, ', @sql, ' 
                   FROM    tableName
                   GROUP   BY pk_value');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/16164/14)
*   [SQLFiddle 演示（添加了新的 rating_id）](http://www.sqlfiddle.com/#!2/e32de/1)

上面的两个查询都有相同的结果，

```
╔══════════╦════════════╦════════════╦════════════╗
║ PK_VALUE ║ RATING_ID1 ║ RATING_ID2 ║ RATING_ID3 ║
╠══════════╬════════════╬════════════╬════════════╣
║       11 ║         90 ║         80 ║         90 ║
║       12 ║         90 ║         80 ║         90 ║
╚══════════╩════════════╩════════════╩════════════╝ 
```

# ibm-mq - 通过 MQ runmqckm 创建证书请求的问题

> ID：14454865
> 
> 赞同：1
> 
> 时间：2013-01-22T09:05:36.157
> 
> 标签：ibm-mq

我正在尝试通过以下命令行创建证书请求并返回错误：

```
./runmqckm -certreq -create -db 
/var/mqm/qmgrs/QMGR01/ssl/sslreceiver.kdb -pw password123 -label 
ibmwebspheremqsslreceiver -dn "CN=SSLCLIENT,O=IBMIBM,C=US" -file 
/var/mqm/sslreceiverreq.arm

 The keystore already contains an entry with label
'ibmwebspheremqsslreceiver'.

 Choose a different label and try again. 
```

但是，我当前的密钥库文件中没有**ibmwebspheremqsslreceiver这样的条目，**

```
**@/usr/mqm/bin $ ./runmqckm -cert -list -db
/var/mqm/qmgrs/QMGR01/ssl/sslreceiver.kdb -pw password123 
Certificates in database /var/mqm/qmgrs/QMGR01/ssl/sslreceiver.kdb:    
ssl_ca 
```

那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:02:22.240

第一个命令创建一个证书请求。
第二个命令列出证书。

如果要列出证书*请求*，请使用`-certreq -list`命令而不是`-cert -list`命令。

# selenium - WebDriver findElement by xPath，如果找不到元素，则没有 TIMEOUT，屏幕就挂在那里。

> ID：14454866
> 
> 赞同：3
> 
> 时间：2013-01-22T09:05:41.727
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

由于我的测试语句无法找到该元素，我面临一些问题，即测试只是挂在那里（浏览器打开并且无法进行下一个测试）。

我的 TestStatemet 是这样的：

```
driver.findElement(By.xpath("//input[@name='AID' and contains(@value,'sampleDataThatwillNotFound')]")); 
```

测试仅在通过 XPATH 查找时挂起，在通过 NAME/ID 查找时没有问题。我已将超时设置为 60 秒，在 60 秒后，它仍然挂起。

以前有人遇到过这个问题吗？或者有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T11:45:19.310

好吧，我遇到了同样的问题，并在**webdriver api doc**中发现了这一点： `findElement`不应该用于查找不存在的元素，`findElements(By)`而是使用并断言零长度响应。

所以我使用类似的东西

```
List<WebElement> found = driver.findElements(By.id("elementid"));
if (found.size() > 0) 
{
    // get the 1st element
} else {
    // time out
} 
```

来解决这个问题。`findElements`在我的情况下，隐式超时可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:13:41.260

试试这个定位器

```
driver.findElement(By.xpath("//input[@name='AID'][contains(@value,'sampleDataThatwillNotFound')]")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T01:56:44.013

我从 Google Groups 的 darrell 那里得到了一些反馈，我同意他的看法，以下是他的反馈： [https ://groups.google.com/forum/#!topic/webdriver/Vt0DuQHOAg8](https://groups.google.com/forum/#!topic/webdriver/Vt0DuQHOAg8)

***我还没有看到这些定位器挂起，但一切皆有可能。通常，如果 DOM 很大和/或复杂，则组合定位器（一个包含包含加和的）可能会使其非常慢。我的一般经验是定位器越复杂，它需要的时间就越长。花费的时间越长，您看到 NoSuchElementException 的可能性就越大。可能是您正在做的其他事情导致了第二个问题，即挂起。and 语句是乘法的。所以 @name='AID' 比较快。没有子字符串检查。它要么匹配，要么不匹配。所以这个定位器将按 n 顺序运行，其中 n 是输入标签的数量。像 contains(@value, 'someString') 这样的定位器必须扫描每个属性的每个标签，以匹配每个可能的子字符串。如果 contains() 实现得好，它可能比蛮力快一点，但 DOM 中的数据类型将决定此搜索需要多长时间。肯定会很慢。现在，如果您使用 contains() 搜索（相对较慢）和完全匹配（相对较快），然后查找两个匹配项的 AND，您就是将它们相乘。两个完全匹配将是 n 次 n 次（或 n 次方）。不是很好。一个包含的精确匹配时间真的很糟糕。根据 DOM，它可能是 n 立方的。这意味着如果 n 需要 10 秒，则 n 的立方为 10 * 10 * 10 秒（1000 秒或超过 16 分钟）。如果 DOM 导致事情变得更糟，您可能会看到精确匹配是几秒钟，而组合是几小时。达雷尔* 现在，如果您使用 contains() 搜索（相对较慢）和完全匹配（相对较快），然后查找两个匹配项的 AND，您就是将它们相乘。两个完全匹配将是 n 次 n 次（或 n 次方）。不是很好。一个包含的精确匹配时间真的很糟糕。根据 DOM，它可能是 n 立方的。这意味着如果 n 需要 10 秒，则 n 的立方为 10 * 10 * 10 秒（1000 秒或超过 16 分钟）。如果 DOM 导致事情变得更糟，您可能会看到精确匹配是几秒钟，而组合是几小时。达雷尔* 现在，如果您使用 contains() 搜索（相对较慢）和完全匹配（相对较快），然后查找两个匹配项的 AND，您就是将它们相乘。两个完全匹配将是 n 次 n 次（或 n 次方）。不是很好。一个包含的精确匹配时间真的很糟糕。根据 DOM，它可能是 n 立方的。这意味着如果 n 需要 10 秒，则 n 的立方为 10 * 10 * 10 秒（1000 秒或超过 16 分钟）。如果 DOM 导致事情变得更糟，您可能会看到精确匹配是几秒钟，而组合是几小时。达雷尔* 这意味着如果 n 需要 10 秒，则 n 的立方为 10 * 10 * 10 秒（1000 秒或超过 16 分钟）。如果 DOM 导致事情变得更糟，您可能会看到精确匹配是几秒钟，而组合是几小时。达雷尔* 这意味着如果 n 需要 10 秒，则 n 的立方为 10 * 10 * 10 秒（1000 秒或超过 16 分钟）。如果 DOM 导致事情变得更糟，您可能会看到精确匹配是几秒钟，而组合是几小时。达雷尔***

所以为了解决这个问题，我认为是时候强制开发团队应用通用开发实践为每个元素/控件设置唯一的 id。这样测试自动化脚本就可以直接通过 ID 执行任何验证/输入，而不是 xPath。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T02:38:30.597

我在上面尝试了一些答案，但仍然遇到同样的问题..我切换回旧的 firefox 版本 17.0.3 ....一切都解决了..有点有趣..那些面临同样问题的人可以在 FF 版本 17.0 中尝试.3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T14:17:59.250

升级 Firefox（25 到 26）和 Selenium（2.37.1 到 2.39.0 驱动程序 + 服务器）后，我遇到了同样的问题。没有抛出异常，永远挂起等。它通过删除`implicitlyWait`声明得到了“解决”。不是一个真正的解决方案，但在我的情况下已经足够好了。

# twitter - 通过代理使用 twitter oauth 登录

> ID：14454872
> 
> 赞同：4
> 
> 时间：2013-01-22T09:05:57.567
> 
> 标签：twitter, proxy, twitter-oauth

看看这个网站： [http ://premium.fluppy.me/oauthproxy/authorize?oauth_token=ac7FOow2Bj3N3Ob1O1FX0fRrCftwn3qj9lwMId7WQ](http://premium.fluppy.me/oauthproxy/authorize?oauth_token=ac7FOow2Bj3N3Ob1O1FX0fRrCftwn3qj9lwMId7WQ)

在此站点中，您可以通过代理使用 twitter 登录。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:09:21.887

该网站只获取您的用户名和密码，并像 twitter 客户端一样工作。

您的请求作为代理转到此服务器，然后您会看到服务器响应。

就像工作一样`PHProxy`

当然 twitter 有许多简单的工作的 api，比如推特或关注某人

见这些例子：

*   最佳 Twitter PHP 库 - 堆栈溢出 -> [https://stackoverflow.com/questions/422879/best-twitter-php-library](https://stackoverflow.com/questions/422879/best-twitter-php-library)
*   推特库 | Twitter 开发人员 -> [https://dev.twitter.com/docs/twitter-libraries](https://dev.twitter.com/docs/twitter-libraries)
*   tijsverkoyen/TwitterOAuth · GitHub -> [https://github.com/tijsverkoyen/TwitterOAuth](https://github.com/tijsverkoyen/TwitterOAuth)
*   dg/twitter-php · GitHub -> [https://github.com/dg/twitter-php](https://github.com/dg/twitter-php)
*   themattharris/tmhOAuth · GitHub -> [https://github.com/themattharris/tmhOAuth](https://github.com/themattharris/tmhOAuth)

# iphone - iPhone通过滑动表格视图来滚动UITableview

> ID：14454875
> 
> 赞同：4
> 
> 时间：2013-01-22T09:06:03.133
> 
> 标签：iphone, ios, ipad, uitableview

就我而言，我有 UIView 和 UITableView 控制器。我想要的是通过滑动 UIView 来滚动表格视图。我为 UIView 添加了向上滑动和向下滑动手势。当我在此视图上滑动时，沿滑动方向滚动表格视图。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T05:24:34.133

//让 myView 成为您要从中滚动 tableview(myTableview) 的视图

//现在在您的 viewdidload 方法中添加以下行

```
UISwipeGestureRecognizer * swipegesture = [[UISwipeGestureRecognizer alloc]init];
swipegesture =[myTableview.gestureRecognizers objectAtIndex:1];
[myView addGestureRecognizer:swipegesture]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:28:24.007

从您的 viewDidLoad 调用此方法。此方法将禁用 tableview 的滚动以防止手动滚动。假设您有 100 行高度为 30 并且 myview 是必须执行滚动的视图。myview上添加了滑动手势，设置滑动方向很重要

-（无效）初始设置{

```
[self.tableView setScrollEnabled:NO];  
int numberOfRows=100;
int rowHeight=30;
myview=[[UIView alloc]initWithFrame:CGRectMake(280, 0, 30, numberOfRows*rowHeight)];
[myview setBackgroundColor:[UIColor yellowColor]];
[self.view addSubview:myview];
UISwipeGestureRecognizer *swipeDown=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(motion:)];
[swipeDown setDirection:UISwipeGestureRecognizerDirectionDown];
[myview addGestureRecognizer:swipeDown];
UISwipeGestureRecognizer *swipeUp=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(motion:)];
[swipeUp setDirection:UISwipeGestureRecognizerDirectionUp];
[myview addGestureRecognizer:swipeUp];} 
```

当 swipeUp 或 swipeDown 发生滑动手势时，将调用以下方法。当方法接收到 swipeUp 手势时，它将 tableview 中的最后一个当前可见行滚动到顶部 当方法接收到 swipeDown 时，它将当前第一个可见行滚动到底部

-(void)motion:(UISwipeGestureRecognizer *)sender {

```
if (sender.direction==UISwipeGestureRecognizerDirectionUp) {
    [self.tableView scrollToRowAtIndexPath:[self.tableView.indexPathsForVisibleRows objectAtIndex:[self.tableView.indexPathsForVisibleRows count]-1]  atScrollPosition:UITableViewScrollPositionTop animated:YES];
}else if(sender.direction==UISwipeGestureRecognizerDirectionDown)
{
   [self.tableView scrollToRowAtIndexPath:[self.tableView.indexPathsForVisibleRows objectAtIndex:0 ] atScrollPosition:UITableViewScrollPositionBottom animated:YES];
} 
```

}

# cakephp - 将数据保存在多个表中

> ID：14454876
> 
> 赞同：0
> 
> 时间：2013-01-22T09:06:03.187
> 
> 标签：cakephp

我有一张`Products`桌子和一张`Products_Prices`桌子。该`Products_Prices`表有这些字段`product_id, size_id, price`

在 ProductsController 的添加操作中，我得到了类似的数据。产品保存有效

但我不知道保存产品后我应该如何获得`ID`新创建的产品以及如何保存价格信息。

```
array(
    'id' => '',
    'name' => 'Pizza Salami',
    'description' => 'some description here',
    'active' => '1',
    'offered' => '1',
    'category_id' => '15',
    'Price' => array(
        (int) 0 => array(
            'size_id' => '2',
            'price' => '5'
        ),
        (int) 1 => array(
            'size_id' => '3',
            'price' => '6'
        ),
        (int) 2 => array(
            'size_id' => '4',
            'price' => '7'
        ),
        (int) 3 => array(
            'size_id' => '5',
            'price' => '9'
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:00:45.473

你检查过[文档](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)吗？

你可以用`$id = $this->Model->id;`

您还可以使用`$this->Model->saveAssociated($this->request->data);`一次保存多个模型数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:19:11.177

如果*saveAll*和*saveAssociated 无法*将行插入表中，您可以使用 `$this->ModelName->getLastInsertID();`在表 Products 中获取最后插入的 id。

# php - php命令行更改文本输出

> ID：14454881
> 
> 赞同：2
> 
> 时间：2013-01-22T09:06:09.663
> 
> 标签：php, terminal, command-line-interface, onchange

我想知道是否可以更改特殊 php cli 基础应用程序的某些输出以更改终端上的某些值而不是回显新的值。例如，这是 cli 应用程序。

```
#!/usr/bin/env php
<?php

$percent = 0;

for ($i = 0; $i <= 100; $i++) {

    echo $percent . "\n";

    sleep(1);

    $percent++;
}

/**
0
1
...
*/ 
```

这是一个向用户显示百分比的简单应用程序。所以我们必须在这个例子中的每个循环之后更新它，而不是追加它。我想改变百分比不显示新的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T09:12:03.070

使用`\r`而不是`\n`. `\r`是回车，它会跳回到行首而不换行。

```
$percent = 0;
for ($i = 0; $i <= 100; $i++) {
    echo $percent . "\r";
    sleep(1);
    $percent++;
} 
```

这适用于 Windows、Linux 和 MacOS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:34:53.050

像这样的东西应该可以满足您的需要（在 Linux（CentOS）机器上测试和验证）：

```
for ($percent = 0; $percent <= 100; $percent++) {
    echo $percent;
    sleep(1);
    // Print one or more backspaces, erasing current character(s)
    echo str_repeat("\x08", strlen($percent));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:12:33.847

这实际上取决于您的终端（模拟器）类型，而不是使用的语言。尝试使用退格字符 (0x08) 来“擦除”当前内容，然后输出新内容。

# delphi - Firebird SQL 脚本命令字符串限制

> ID：14454886
> 
> 赞同：3
> 
> 时间：2013-01-22T09:06:31.693
> 
> 标签：delphi, firebird

有人知道，Firebird 中是否有命令字符串大小限制？

当执行一个小的“插入”脚本时，它可以完美运行，但是当脚本有很多行时，它会返回以下错误：`"Unexpected end of command - line X, column Y"`.

有趣的是，行号和列号因实际脚本大小而异。

我正在使用火鸟 2.5

这是执行脚本：

```
set term ^ ;
EXECUTE BLOCK AS BEGIN
insert into TABLE (COLUMNA) values (13);
...
insert into TABLE (COLUMNA) values (14);
END^
set term ; ^ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T09:26:45.080

Firebird 2.5 及更早版本的查询文本[限制为 64 KB](http://www.firebirdfaq.org/faq197/)，对于 Firebird 3.0，当使用新 API 时，此限制增加到 10 MB。An`EXECUTE BLOCK`是一个查询，因此不应超过 64 KB。

# capistrano - 无论何时/capistrano `method_missing_with_variables'：未定义的方法 `role_names_for_host'

> ID：14454887
> 
> 赞同：2
> 
> 时间：2013-01-22T09:06:33.803
> 
> 标签：capistrano, whenever, whenever-capistrano

在使用 capistrano 部署时，我正在使用when/capistrano 来更新我的 cron_tab，直到最近我的部署在更新 cron_tab 时开始失败。

```
.rvm/gems/ruby-1.9.3-p362-turbo@psg-web/gems/capistrano-2.8.0/lib/capistrano/configuration/variables.rb:122:in `method_missing_with_variables': undefined method `role_names_for_host' for #<Capistrano::Configuration:0x000000018e6a10> (NoMethodError) 
```

我正在设置 *role_names_for_host*

```
set_default(:whenever_roles, [:workers]) 
```

我的任务看起来像这样

```
namespace :whenever do
  desc "Stop whenever"
  task :stop , roles: [:workers] do
    clear_crontab
  end

  desc "Start whenever"
  task :start , roles: [:workers] do
    update_crontab
  end

  desc "Restart whenever"
  task :restart , roles: [:workers] do
    update_crontab
  end

  after 'deploy:symlink', 'whenever:update_crontab'
  %w[start stop restart].each do |command|
    after "deploy:#{command}", "whenever:#{command}"
  end
end 
```

关于我可能做错的任何想法？

**宝石版本**

*   卡皮斯特拉诺 (2.8.0)
*   每当（0.8.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:09:01.600

在 capistrano 2.9.0 之后引入了缺少的方法。

补丁：您可以将其添加到 Capfile 或 deploy.rb 文件的顶部：

```
require 'capistrano/server_definition'
require 'capistrano/role'
class Capistrano::Configuration
  def role_names_for_host(host)
    roles.map {|role_name, role| role_name if role.include?(host) }.compact || []
  end
end 
```

我建议每当更新它的 gem 依赖项时:)

（来源：[https](https://github.com/javan/whenever/issues/302#issuecomment-14962350) ://github.com/javan/whenever/issues/302#issuecomment-14962350 ）

# php - 获取 URL 的路径名，然后使用 htaccess 将其存储在变量 (php) 中

> ID：14454890
> 
> 赞同：0
> 
> 时间：2013-01-22T09:06:39.477
> 
> 标签：php, apache, .htaccess

我正在尝试在我的根目录上配置我的 htaccess，这样如果有人键入：

```
www.example.com/link1/stuff 
```

在他们的浏览器中，“stuff”将被存储为变量，稍后供 PHP 文件使用。

我认为最好的方法是将其重定向到另一个 url 并使用 php $_GET 获取 php。

```
www.example.com/link1/file.php?var="stuff" 
```

有没有更好的方法来做到这一点？

注意：我希望链接保持与

```
www.example.com/link1/stuff 
```

即使它会被重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:10:07.433

使用 htaccess

```
Options +FollowSymLinks
RewriteEngine On

RewriteBase www.example.com/

RewriteRule (.*)/(.*)  www.example.com/$1/file.php?var=$2 
```

或者

```
Options +FollowSymLinks
RewriteEngine On

RewriteBase www.example.com/

RewriteRule link1/(.*)  www.example.com/link1/file.php?var=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:12:34.490

您不必重定向到不同的页面并将其作为 $_GET var 传递。只需使用`parse_url`和访问您需要的片段，例如通过：

```
$uri = 'www.example.com/link1/file.php?var="stuff'
$uri = parse_url($uri);

echo $uri['path'] //returns /file 
```

[http://de3.php.net/manual/en/function.parse-url.php](http://de3.php.net/manual/en/function.parse-url.php)

# xml - 如何在 Eclipse 中的“源”、“预览”和“源和预览”选项卡之间切换

> ID：14454892
> 
> 赞同：1
> 
> 时间：2013-01-22T09:06:44.807
> 
> 标签：xml, eclipse, preview, editing

在 Eclipse 中编辑 xml 文件时，我必须经常在“源”和“预览”选项卡之间切换。因此，试图找到一种无需离开键盘即可快速完成此操作的方法。有人知道吗？我说的是两个，最多三个，按键长的快捷方式。好吧，我想应该有一种方法可以自定义组合键。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:27:20.660

检查`Preferences Dialog > General > Keys`并找到`Previous/Next Sub-Tab`命令。

如果您在 Windows 中，则绑定到`Alt`+`PageUp`和`Alt`+ `PageDown`。

在 MacOSX(Mac Book Air )中，它绑定到`fn`++和`alt`++ 。`Arrow up``fn``alt``Arrow down`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T06:28:38.303

`Alt``F7`是“下一页”，`Shift``Alt``F7`是“上一页”。这些肯定适用于 Android 图形编辑器及其两个选项卡。

请注意，至少在 Ubuntu 上，第一个组合已经是 Ubuntu 热键，因此默认情况下不起作用（您必须将其更改为另一个组合）。

# mysql - innodb 和 myisam 表一起使用

> ID：14454893
> 
> 赞同：3
> 
> 时间：2013-01-22T09:06:44.727
> 
> 标签：mysql, replication, innodb, myisam

我有一个将日志写入数据库的软件，这些日志将存储大约 2-3 个月。少数人想随时查询这些日志。系统每秒平均写入 5000 行（1000 次批量插入），主键不存在，但不同列有 6 个索引。顺便说一句，表有 20 列，没有任何外键。

由于需要巨大的磁盘大小，我不想使用 innodb 表。如您所知，MyISAM 表的大小大约比相同的 innodb 表小三倍（或更多）。我计划每月使用不同的表并压缩比本月更早的表。myisam 表的压缩比使用 myisampack 实用程序的 innodb 更容易。由于这些原因，我想使用 myisam 表。

但我们知道 myisam 对腐败并不安全。如果 myisam 表已损坏，我不想丢失它们。它指示我将 innodb 用于实时日志。经过一小段时间（5 分钟或 1 小时或午夜）后，我想将我的记录放到 myisam 表中。但是使用“alter table ... engine=myisam”命令转换表需要很多时间来处理大量数据。

我可以使用不同的数据库并将 innodb 数据复制到 myisam 表，这是一种选择。但是我之前在复制时遇到了一些问题，我不确定是否会使用它。我认为的其他选项是双写记录（同时包括 innodb 和 myisam 表）。但这会降低查询和磁盘性能。

你对这种情况有什么建议？它可以是引擎转换建议或全新的架构建议。

谢谢，塞利姆

# android - 如何使用 RelativeLayout.LayoutParams 将子视图添加到 ViewGroup

> ID：14454896
> 
> 赞同：0
> 
> 时间：2013-01-22T09:06:54.303
> 
> 标签：android, viewgroup

我编写了一个扩展 ViewGroup 的类并覆盖了如下方法：

```
 @Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    for(int index = 0; index < getChildCount(); index++){
            int width = MeasureSpec.getSize(widthMeasureSpec);
            int height = MeasureSpec.getSize(heightMeasureSpec);
            View child = getChildAt(index);
            child.measure(View.MeasureSpec.makeMeasureSpec(width,
                    View.MeasureSpec.UNSPECIFIED), View.MeasureSpec
                    .makeMeasureSpec(height, View.MeasureSpec.UNSPECIFIED));
    }
} 
```

当我将 subView 添加到此 viewGroup 时，如下所示：

```
String word = words[random.nextInt(words.length)];
            RelativeLayout layout = new RelativeLayout(DraggableGridViewSampleActivity.this);
            TextView text = new TextView(DraggableGridViewSampleActivity.this);
            text.setText(word);
            ImageView view = new ImageView(DraggableGridViewSampleActivity.this);
            view.setImageBitmap(getThumb(word));
            layout.addView(view);

            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            layout.addView(text, params);
            dgv.addView(layout); 
```

效果是这样的：textView 不能完全显示。似乎父视图没有为文本视图提供足够的空间来显示。

如何让 textView 完全显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:55:50.437

> textView 无法完全显示。似乎父视图没有为文本视图提供足够的空间来显示。

你到底想用这个`onMeasure`方法做什么？现在你让超类处理 children( `super.onMeasure`) 的初始测量，然后你再次重新测量孩子，这次给他们 a `MeasureSpec.UNSPECIFIED`，基本上告诉孩子他们可以像他们想要的一样大。

`MeasureSpec`当您测量孩子（或父母应该允许滚动）时，您应该始终尊重。如果父母说孩子应该是`AT_MOST`500 px，那么在测量孩子时不要潜在地跨过这个值，给他们一个`MeasureSpec`.`UNSPECIFIED`

# android - 当我单击它时，操作栏中的搜索视图会向左移动

> ID：14454900
> 
> 赞同：2
> 
> 时间：2013-01-22T09:07:05.763
> 
> 标签：android, android-actionbar, searchview

我将搜索视图放在操作栏中使用

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >  
    <item
        android:id="@+id/menu_search"
        android:actionViewClass="android.widget.SearchView"
        android:icon="@drawable/action_search"
        android:showAsAction="ifRoom|collapseActionView"
        android:title="search"

        />
</menu> 
```

当我点击它时，它会从操作栏的右侧移动到左侧，我怎样才能让它留在操作栏的右侧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T11:11:38.397

只需删除此**collapseActionView**

变成这样

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >  
<item
    android:id="@+id/menu_search"
    android:actionViewClass="android.widget.SearchView"
    android:icon="@drawable/action_search"
    android:showAsAction="ifRoom"
    android:title="search"

    /> 
```

# vim - vim 缓冲区尝试逐字符转换

> ID：14454901
> 
> 赞同：2
> 
> 时间：2013-01-22T09:07:06.450
> 
> 标签：vim

它可能是在 unix/linux 问题中打开的 Windows 保存文件，我不太确定如何解决它。

当我打开一个以前由另一个开发人员使用 windows 保存的文件时，我的 vim 缓冲区有时会显示

```
Trying char-by-char conversion... 
```

在我的文件中间，我无法在缓冲区中编辑此消息下方的代码/文本/字符。

为什么会这样做，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:21:37.567

此消息来自`mac_string_convert()`. `src/os_mac_conv.c`它附有以下评论：

> 整个字符串的转换失败，但也许它适用于每个字符

似乎您正在编辑的文件包含无法转换为 Vim 内部编码的字节序列。如果没有更多详细信息，很难提供帮助，但通常，这些帮助：

1.  确保您有`:set encoding=utf-8`
2.  检查`:set filencodings?`并确保您尝试打开的文件被覆盖，或明确指定编码`:edit ++enc=... file`
3.  该`8g8`命令可以找到非法的 UTF-8 序列，以便您可以将其删除，以防文件损坏。二进制模式`:set binary`/`:edit ++bin`也可能有帮助。

# java - 具有泛型方法参数、返回类型和接口的工厂

> ID：14454908
> 
> 赞同：2
> 
> 时间：2013-01-22T09:07:37.963
> 
> 标签：java, generics, interface, factory

我有一个用于创建模型实例的工厂。工厂提供了这个方法：

```
public <Model> Model createFromJson(String json, final Class<Model> model) { 
    Model modelInstance = gson.fromJson(json, model);
    ((IModel)modelInstance).onCreateFromJson();
    return modelInstance;
} 
```

如您所见，我将模型的实例（以前作为类方法参数给出）转换为接口，因此我可以调用特定的方法。此外，通用返回类型也很好用，因为调用者不能强制转换任何对象。只需调用：

```
MyModel myModel = ModelFactory.getInstance().createFromJson(json, MyModel.class); 
```

但是，不幸的是，我可以使用任何类型的对象调用工厂方法，例如：

```
Integer myTest = ModelFactory.getInstance().createFromJson(json, Integer.class); 
```

所以我想将工厂方法参数定义为 IModel 类型。但我不知道如何，因为我传递的是一个类，而不是模型（IModel）的实例。

所以，实际上我正在寻找这样的东西：

```
public <Model<? extends IModel>> Model 
    createFromJson(String json, final Class<Model<? extends IModel>> model) 
```

谁能给我建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:19:04.503

使用`Model`as name 为您的类型参数是令人困惑的，因为您似乎也有一个名为`Model`. 而是使用`M`或其他一些字母。

要指定类型必须扩展的类，您需要使用以下命令：

```
M extends IModel 
```

或将其用于您的示例代码：

```
public <M extends IModel> M createFromJson(String json, final Class<M> model) {
  // Method code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T09:17:23.757

我想这就是你想要的

```
public <T extends IModel> T createFromJson(String json, Class<T> model) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:17:31.913

该方法应定义模板参数的边界，如下所示：

```
public <T extends Model> T createFromJson(String json, final Class<T> model)
{
    T modelInstance = gson.fromJson(json, model);
    ((IModel) modelInstance).onCreateFromJson();
    return modelInstance;
} 
```

顺便说一句，在您的定义中，所有引用`Model`实际上都是指模板参数而不是 Model 类，我想您明白这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T09:20:12.273

我原以为这就是你想要的：

```
public <T extends IModel<T>> T createFromJson(String json, final Class<T> model)
{
    T modelInstance = gson.fromJson(json, model);
    ((IModel) modelInstance).onCreateFromJson();
    return modelInstance;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T09:19:10.350

从有效的java：

> PECS **Producer-extends consumer-super**

所以你可以试试这个..

```
public <E extends IModel> E createFromJson(String json, final Class<E> model) 
```

# javascript - Javascript 从 clipboardData.getData("text/html") 解析 htmlstring

> ID：14454914
> 
> 赞同：0
> 
> 时间：2013-01-22T09:08:05.037
> 
> 标签：javascript, clipboard

我将样式文本从 MS word 复制/粘贴到在线文本编辑器。当我使用 JavaScript`clipboardData.getData("text/html")`获取 htmlstring 时，我可以看到文本已经转换为 HTML/CSS 样式，例如 indent 将转换为`text-indent="10dp"`. 并将`"\t"`替换为`"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"`. 有没有办法保留文本中的所有控制字符？

另外，我不知道CRLF来自哪里？

从 HTML 字符串

```
THE BOAT did not sail until late afternoon, but so eager was **CRLF**
Robert Townsend to get home that he thought, had there been a day as long as **CRLF**
this. 
```

原来的

```
THE BOAT did not sail until late afternoon, but so eager was Robert Townsend to get home that he thought, had there been a day as long as this. 
```

编辑

对不起，也许我的问题之前不够清楚。当我通过 doc.body.textContent||doc.body.innerText 剥离 html 字符串时，我仍然在结果字符串中得到 CRLF，那么如何摆脱那些样式标记。就像 clipboardData.getData("text") 一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:13:53.520

多余的空格和 CRLF 在 HTML 中是没有意义的，你可以忽略它们；你会在需要的地方找到硬休息（

# wpf - 绑定到 EF 实体时向 WPF DataGrid 添加行（以编程方式执行“UserCanAddRows”）

> ID：14454925
> 
> 赞同：0
> 
> 时间：2013-01-22T09:08:47.300
> 
> 标签：wpf, entity-framework, binding, datagrid, wpfdatagrid

DataGrid 有一个名为“UserCanAddRows”的功能，它为用户提供一个空行，他可以使用它来向 DataGrid 添加新行。但是，我想为我的用户提供一个额外的控件来添加新行，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/224e328cb583d381b3430c71291de176.png)

但现在问题出现了。我将 DataGrid 绑定到 Microsoft Entity Framework 的 ObjectSet。将项目添加到 ObjectSet 时，除非我将更改保存到数据库，否则它不会出现在那里。因此，addedObject 被保存到一些额外的列表中，其中包含所有“挂起的更改”。但是，当我以编程方式添加它们时，我的 DataGrid 并不知道这种“待定更改或 ObjectStateList”。因此，它们不会出现在 DataGrid 中，刷新视图后也不会出现。

**但是，当使用“UserCanAddRows”-Feature 时，DataGrid 知道它们！所以，我想做的就是以编程方式使用此功能或模仿该功能所做的事情。**

现在，我的相关代码：

```
 private readonly MyEntities m_db;
        private CollectionViewSource m_workItemViewSource;
        private ObjectSet<WorkItem> m_workItems;

        public SettingsWindow(MyEntities db)
        {
            m_db = db;
            InitializeComponent(); 
            m_workItemViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("workItemViewSource")));

        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            m_workItems = m_db.WorkItems;
            m_workItemViewSource.Source = m_workItems;
        }

       private void AddWorkItemButton_Click(object sender, RoutedEventArgs e)
        {
            WorkItem workItem = m_db.CreateObject<WorkItem>();
            workItem.name = AddWorkItemTextBox.Text;
            workItem.is_shown = true;
            AddWorkItemTextBox.Text = "";
            m_workItems.AddObject(workItem);
            m_workItemViewSource.View.Refresh();
        } 
```

这里是 XAML

```
 <Window.Resources>
        <CollectionViewSource x:Key="workItemViewSource" d:DesignSource="{d:DesignInstance my:WorkItem, CreateList=True}" />
    </Window.Resources>

   <DockPanel Name="WindowDockPanel"  LastChildFill="True" DataContext="{StaticResource workItemViewSource}">

    <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True"  ItemsSource="{Binding}" Name="workItemDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" Width="280" CanUserAddRows="True" CanUserDeleteRows="False">
     <DataGrid.Columns>
      <DataGridCheckBoxColumn x:Name="is_shownColumn" Binding="{Binding Path=is_shown, Mode=TwoWay}" Header="{x:Static Resources:EntityStrings.isShown}" Width="SizeToHeader" >
      </DataGridCheckBoxColumn>
      <DataGridTextColumn x:Name="nameColumn" Binding="{Binding Path=name, Mode=TwoWay}" Header="{x:Static Resources:EntityStrings.workItem}" Width="*" />
     </DataGrid.Columns>  
    </DataGrid>  

  </DockPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:24:18.577

我已经继续前进并以不同的方式实现它。但我现在获得了一些经验。我学到的是，来自 EF 上下文的集合（在我的例子中是 m_db）没有实现 INotifyChange 接口。他们的列表中也不包含新添加的条目。我在另一个地方再次遇到了这个问题，这次“正确”地修复了它：

关键是不要使用上下文给出的集合。如果你把它们放在不同的集合中，比如 ObservableCollection，它不会有害。所以它应该适用于这个变化，但是我不能再测试它了：

```
 private readonly MyEntities m_db;
    private CollectionViewSource m_workItemViewSource;
    private ObserverableCollection<WorkItem> m_workItems; //changed!
    public SettingsWindow(MyEntities db)
    {
        m_db = db;
        InitializeComponent(); 
        m_workItemViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("workItemViewSource")));

    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        m_workItems = new ObservableCollection( m_db.WorkItems ); //changed!
        m_workItemViewSource.Source = m_workItems;
    }

   private void AddWorkItemButton_Click(object sender, RoutedEventArgs e)
    {
        WorkItem workItem = m_db.CreateObject<WorkItem>();
        workItem.name = AddWorkItemTextBox.Text;
        workItem.is_shown = true;
        AddWorkItemTextBox.Text = "";
        m_workItems.AddObject(workItem);
        m_workItemViewSource.View.Refresh();
    } 
```

# java - 使用 Apache Commons Compress 创建 gzip 存档

> ID：14454926
> 
> 赞同：1
> 
> 时间：2013-01-22T09:08:52.743
> 
> 标签：java, compression, gzip, archive, apache-commons

我成功创建`gz`了包含预期内容的存档，但是如何在存档中设置文件名？

我的意思是，如果`myfile.gz`创建了存档，其中的文件将被命名为“ `myfile`”，但我想将它命名为源文件，例如，“ `1.txt`”

当前代码：

```
public static void gz() throws FileNotFoundException, IOException {
    GZIPOutputStream out = null;
    String filePaths[] =  {"C:/Temp/1.txt","C:/Temp/2.txt"}; 
    try {
         out = new GZIPOutputStream(
              new BufferedOutputStream(new FileOutputStream("C:/Temp/myfile.gz")));

            RandomAccessFile f = new RandomAccessFile(filePaths[0], "r");
            byte[] b = new byte[(int)f.length()];
            f.read(b);
            out.write(b, 0, b.length);

            out.finish();
            out.close();
    } finally {
         if(out != null) out.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:23:26.733

GZip 压缩流。通常，当人们使用 GZip 处理多个文件时，他们也会使用 tar 将它们组合在一起。 [gzip 存档，里面有多个文件](https://stackoverflow.com/questions/10653683/gzip-archive-with-multiple-files-inside)

# validation - ZF2 - 验证器链不在空元素上运行

> ID：14454927
> 
> 赞同：2
> 
> 时间：2013-01-22T09:08:54.870
> 
> 标签：validation, zend-framework2, xor

我创建了一个自定义验证器，需要填写“门牌号”或“单位号”，但不能同时填写（XOR）。

如果两个字段都已填写（失败）或一个字段已填写（通过），则验证器可以正常工作。但是如果两个字段都为空，则验证器根本不会运行。

这是两个元素的输入过滤器规范：

```
$input = new Input('flat_number');
$input->setRequired(true);
$input->setAllowEmpty(true);
$input->setValue($this->flatNumber);
$input->getValidatorChain()
        ->addValidator(new \Si\Validator\HouseFlatCheck('house_number'))
        ->addValidator(new \Zend\Validator\StringLength(array('max' => 30)));
$input->getFilterChain()->attach($this->defaultFilterChain);
$inputFilter->add($input);

$input = new Input('house_number');
$input->setRequired(true);
$input->setAllowEmpty(true);
$input->setValue($this->houseNumber);
$input->getValidatorChain()
        ->addValidator(new \Si\Validator\HouseFlatCheck('flat_number'))
        ->addValidator(new \Zend\Validator\StringLength(array('max' => 30)));
$input->getFilterChain()->attach($this->defaultFilterChain);
$inputFilter->add($input); 
```

从表面上看，如果字段为空并且通过了“required”和“allowEmpty”要求，验证器就不会运行。

尽管两个字段都是空的，有什么方法可以让“HouseFlatCheck”验证器针对我的两个元素运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:46:13.707

经过一整天的研究，我找到了解决问题的方法。

首先，Zend\InputFilter\BaseInputFilter 类为 isValid() 包含以下内容：

```
public function isValid()
{
    if (null === $this->data) {
        throw new Exception\RuntimeException(sprintf(
            '%s: no data present to validate!',
            __METHOD__
        ));
    }

    $this->validInputs   = array();
    $this->invalidInputs = array();
    $valid               = true;

    $inputs = $this->validationGroup ?: array_keys($this->inputs);
    foreach ($inputs as $name) {
        $input = $this->inputs[$name];
        if (!array_key_exists($name, $this->data)
            || (null === $this->data[$name])
            || (is_string($this->data[$name]) && strlen($this->data[$name]) === 0)
        ) {
            if ($input instanceof InputInterface) {
                // - test if input is required
                if (!$input->isRequired()) {
                    $this->validInputs[$name] = $input;
                    continue;
                }
                // - test if input allows empty
                if ($input->allowEmpty()) {
                    $this->validInputs[$name] = $input;
                    continue;
                }
            }
            // make sure we have a value (empty) for validation
            $this->data[$name] = '';
        }

        if ($input instanceof InputFilterInterface) {
            if (!$input->isValid()) {
                $this->invalidInputs[$name] = $input;
                $valid = false;
                continue;
            }
            $this->validInputs[$name] = $input;
            continue;
        }
        if ($input instanceof InputInterface) {
            if (!$input->isValid($this->data)) {
                // Validation failure
                $this->invalidInputs[$name] = $input;
                $valid = false;

                if ($input->breakOnFailure()) {
                    return false;
                }
                continue;
            }
            $this->validInputs[$name] = $input;
            continue;
        }
    }

    return $valid;
} 
```

由于我的 Input 的 allowEmpty 为 true，因此该 Input 的验证停止并继续移动到数组中的下一个 Input 元素。在我的 Input 上将 allowEmpty 更改为 false 可以解决该问题，但会创建另一个问题，因为 'Zend\InputFilter\Input' 类在其 isValid() 函数期间调用以下函数：

```
protected function injectNotEmptyValidator()
{
    if ((!$this->isRequired() && $this->allowEmpty()) || $this->notEmptyValidator) {
        return;
    }
    $chain = $this->getValidatorChain();

    // Check if NotEmpty validator is already first in chain
    $validators = $chain->getValidators();
    if (isset($validators[0]['instance'])
        && $validators[0]['instance'] instanceof NotEmpty
    ) {
        $this->notEmptyValidator = true;
        return;
    }

    $chain->prependByName('NotEmpty', array(), true);
    $this->notEmptyValidator = true;
} 
```

因为我的字段是必需的并且 allowEmpty 现在为 false，所以会自动将“NotEmpty”验证器添加到我的链中。一旦发现，解决方案很简单。我在我的自定义库中创建了一个“输入”类，它覆盖了 injectNotEmptyValidator 函数，迫使它什么也不做：

```
namespace Si\InputFilter;

class Input extends \Zend\InputFilter\Input {
    protected function injectNotEmptyValidator() {
        return;
    }
} 
```

执行上述操作，'NotEmpty' 不会添加到我的验证器链中，因此我的 XOR 验证器可以正确运行。我现在要做的就是使用我更正后的 Si\InputFilter\Input 类来为这两个元素填充 InputFilter。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T12:19:27.237

我会以不同的方式执行此操作：我将创建一个自定义输入，该输入接受一组值，代表门牌号和公寓号。然后，输入将包含一个执行 XOR 逻辑的自定义验证器，它会根据存在的情况选择适当的验证链。（类似地，在表单方面，我将其表示为复合元素。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T14:17:51.913

从 2.2.0 开始，这似乎已被修复：[https ://github.com/zendframework/zf2/pull/4165](https://github.com/zendframework/zf2/pull/4165)

# c# - 单行创建一个包含一个条目的字典

> ID：14454929
> 
> 赞同：49
> 
> 时间：2013-01-22T09:09:02.807
> 
> 标签：c#, dictionary

我有一个将 a`Dictionary<int, int>`作为参数的方法

```
public void CoolStuff(Dictionary<int, int> job) 
```

我想用一个字典条目调用该方法，例如

```
int a = 5;
int b = 6;
var param = new Dictionary<int, int>();
param.Add(a, b);
CoolStuff(param); 
```

我怎样才能在一行中做到这一点？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-22T09:10:04.210

就是这样，如果您不需要`a`and`b`变量：

```
var param = new Dictionary<int, int> { { 5, 6 } }; 
```

甚至

```
CoolStuff(new Dictionary<int, int> { { 5, 6 } }); 
```

请阅读[如何：使用集合初始化程序初始化字典（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb531208.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-22T09:10:19.337

```
var param = new Dictionary<int, int>() { { 5, 6 } }; 
```

# html - SVG时间线图

> ID：14454933
> 
> 赞同：1
> 
> 时间：2013-01-22T09:09:10.060
> 
> 标签：html, svg, charts

我正在尝试构建一个类似于此 excel 的图表[http://www.mrexcel.com/articles/timeline-chart-in-excel.php](http://www.mrexcel.com/articles/timeline-chart-in-excel.php) 我正在寻找的是一个嵌入的 SVG 时间线，其中包含我的数据提供。我对这个 excel 教程没有任何问题，但现在我试图在 HTML 或 SVG 中做同样的事情，我很迷茫。谁能告诉我任何建议，或者我可以从哪里开始？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:17:07.197

我建议您查看[Highcharts](http://www.highcharts.com/)而不是自己制作。看看[演示页面](http://www.highcharts.com/demo/bar-stacked)，我想你会找到你需要的。

Highcharts 在标准浏览器上使用 SVG 进行图形渲染，在旧版 IE 浏览器上使用 VML。

[jqPlot](http://www.jqplot.com/)是另一种选择，但我不太熟悉。

# javascript - iOS：在 UIWebview 中使用 javascript 调用 obj-c 方法

> ID：14454935
> 
> 赞同：4
> 
> 时间：2013-01-22T09:09:14.360
> 
> 标签：javascript, iphone, ios, objective-c, xcode

我正在编写一个与 JS 网页协作的函数。我使用 UIWebView 来包含网页，然后当我希望网页与我的应用程序进行通信时情况变得复杂。

在 UIWebView 中调用 javascript 函数很容易使用该`– stringByEvaluatingJavaScriptFromString:`方法

但是有没有更简单的方法在网页中调用 obj-c 函数，使用 javascript？我尝试使用 UIWebView 委托方法，但我认为它太 hacky。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T09:29:07.487

我想使用委托是您可以在 iOS WebView 中使用的唯一（一两个）方法。但是有几个包装器可以帮助您轻松解决问题。

1.  [EasyJSWebView](https://github.com/dukeland/EasyJSWebView) - 这复制了 Android 中的开发体验。在 Android 中，您可以简单地使用 WebView 中的 addJavascriptInterface() 方法将 Javascript 桥接到 Java。EasyJSWebView 提供了同步样式和异步样式来获取 Objective-C 方法的返回值。

2.  [WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge) - 代码可能看起来有点像套接字编程。您可以在 Objective-C 中的“服务器”和 Javascript 中的“客户端”之间来回传递数据。

3.  [GAJavaScript](https://github.com/newyankeecodeshop/GAJavaScript) - 这可以提供更好的 DOM 操作体验。

看看所有这些，然后选择一个适合您需要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T09:15:24.997

是的，它确实感觉很笨拙并且有点滞后，但是您需要使用 UIWebViewDelegate 来完成

```
function init()
{
  $('input').on('click', function(e) { answerBoxShouldBeginEditing(e); });
}

function answerBoxShouldBeginEditing(e)
{
  var object = e.toElement;

  var answer = $(object).attr('name');
  var request = 'engine:' + answer;

  var iframe = document.createElement('IFRAME');
  iframe.setAttribute('src', request);
  document.documentElement.appendChild(iframe);
  iframe.parentNode.removeChild(iframe);
  iframe = null;
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
  NSString *requestString = [[request URL] absoluteString];
  if ([requestString hasPrefix:@"engine:"]) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    return NO;
  }
  return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T15:21:08.733

如果您正在考虑升级到 WKWebView，[XWebView](https://github.com/XWebView/XWebView)可能是最好的解决方案。

# opencv - 从预测函数获取所有距离

> ID：14454937
> 
> 赞同：1
> 
> 时间：2013-01-22T09:09:19.187
> 
> 标签：opencv, face-recognition

我想从**预测函数中获得****所有距离**（置信度），所以我决定更改函数，但我的程序仍然使用默认函数（我认为它从 dll 和库中读取）所以我该如何**更改函数**？我应该使用 cmake 吗？如果是怎么办？请帮我

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:19:41.923

由于 OpenCV 不提供默认函数，因此您必须通过创建具有距离和标签的向量来创建自己的函数。您可以如下编写自己的函数，并将距离和标签存储在向量中。这里需要重建opencv。

```
virtual void predict(InputArray src, int &label, double &confidence,  Vector <variable>) const = 0; 
```****

# java - paintComponent() 有条件的

> ID：14454938
> 
> 赞同：-1
> 
> 时间：2013-01-22T09:09:23.883
> 
> 标签：java, swing, graphics, jpanel, documentlistener

这是我的问题：Traffic 是一个 JTextArea，我在其中插入来自串行端口的文本，并且我确实实现了 DocumentListener：

Java 代码：

```
 Traffic.getDocument (). AddDocumentListener (new MyDocumentListener ()); 
```

JTextArea“交通”告诉我我想要什么，程序运行没有任何问题。现在我想做的是逐行（这就是测试的目的）对插入的内容（仅在插入事件中）采取行动，我将举一个例子：

==> 当我收到“ON-HOOK”时，如果我收到“OFF-HOOK”，我会将图像放在电话挂机的 JPanel 中，我将图像放在电话摘机的 JPanel 中，然后列表会...

我不明白怎么做，怎么在我想要的时候调用paintComponent，让它画出我想要的，因为我只能在paintComponent()中进行图形操作。这是 DocumentListener 的类：

```
 protected class MyDocumentListener  extends JPanel implements javax.swing.event.DocumentListener
{
 @Override
   public void changedUpdate(javax.swing.event.DocumentEvent e) {
     // text has been altered in the textarea

     }

 @Override
  public void insertUpdate(javax.swing.event.DocumentEvent e) 
  {
         // text has been added to the textarea 
     try { 

         if  (!Traffic.getText(Traffic.getLineStartOffset(Traffic.getLineCount()-1),Traffic.getLineEndOffset(Traffic.getLineCount()-1)-Traffic.getLineStartOffset(Traffic.getLineCount()-1)).contains(">>"))
         {

           if (Traffic.getLineCount()  == (lastreplace + 2) ) 
           {
               System.err.println(Traffic.getText(Traffic.getLineStartOffset(lastreplace),Traffic.getLineEndOffset(lastreplace) - Traffic.getLineStartOffset(lastreplace)));
            lastreplace +=1;

            }

          else
          {
            System.err.println(Traffic.getText(Traffic.getLineStartOffset(lastreplace),
                         Traffic.getLineEndOffset(lastreplace) - 
                                 Traffic.getLineStartOffset(lastreplace)));
          }
       }
        Traffic.setCaretPosition(Traffic.getDocument().getLength());

     } catch (BadLocationException ex) {
         Logger.getLogger(TrafficSerialPort.class.getName()).log(Level.SEVERE, null, ex);
     }

 }

 @Override
 public void removeUpdate(javax.swing.event.DocumentEvent e) {
   // text has been removed from the textarea

 }

} 
```

我尝试使用一种名为`"PortArchitecture (..)"`will draw what I want and I use的方法，`getGraphics()`但有人告诉我不应该使用它`paintComponent()`，现在我真的卡住了，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:29:35.720

首先，我不会在文档侦听器中这样做。当从串行端口读取一行时，您已经有了一些更新 JTextAea 的方法。我会用同样的方法改变显示的图像：

```
private void lineReceivedFromSerialPort(String line) {
    traffic.append(line);
    updateImage(line);
} 
```

而要更改图像，我根本不会使用`paintComponent()`。只需在您的面板中放置一个 JLabel somwe，当收到一行时，加载适当的图像图标并将其设置为标签：

```
private void updatImage(String line) {
    ImageIcon iconToDisplay = null;
    if (line.equals("ON-HOOK")) {
        iconToDisplay = phoneOnIcon;
    }
    else if (line.equals("OF-HOOK")) {
        iconToDisplay = phoneOffIcon;
    }
    ...
    imageLabel.setIcon(iconToDisplay);
} 
```

# java - HttpURLConnection ifModifiedSince 生成 UTC 时间而不是 GMT

> ID：14454942
> 
> 赞同：2
> 
> 时间：2013-01-22T09:09:39.610
> 
> 标签：java, android

我有以下方法：

```
public void GetBackground(final int width, final int height, final Long ifModifiedSince,
        final GetBackgroundListener listener)
{
    new Thread(new Runnable()
    {
        public void run()
        {
            try {
                String urlString = serviceUri + "/DownloadBackground?width=" + width
                        + "&height=" + height;
                URL url = new URL(urlString);
                HttpURLConnection connection = (HttpURLConnection)url.openConnection();
                if (ifModifiedSince != null) {
                    Log.d(TAG, "Background last modified: " + ifModifiedSince);
                    connection.setIfModifiedSince(ifModifiedSince);
                }
                InputStream stream = (InputStream)connection.getContent();
                if (connection.getResponseCode() == HttpURLConnection.HTTP_NOT_MODIFIED) {
                    listener.onNotModified();
                    Log.d(TAG, "Background not modified");
                } else {
                    Bitmap background = BitmapFactory.decodeStream(stream);
                    listener.onSuccess(background, connection.getLastModified());
                    Log.d(TAG, "New background");
                }
            } catch (Exception e) {
                listener.onError(e);
            }
        }
    }).start();
} 
```

在 Android 2.2 上，它会生成以下包：

```
GET /QurrentService.svc/DownloadBackground?width=480&height=480 HTTP/1.1
if-modified-since: Thu, 13 Dec 2012 09:11:23 GMT
User-Agent: Dalvik/1.2.0 (Linux; U; Android 2.2; sdk Build/FRF91)
Host: qurrentfeed1.1.aliencms.nl
Connection: Keep-Alive 
```

在 Android 4.1 上：

```
GET /QurrentService.svc/DownloadBackground?width=800&height=800 HTTP/1.1
User-Agent: Dalvik/1.6.0 (Linux; U; Android 4.1.2; sdk Build/MASTER)
Host: qurrentfeed1.1.aliencms.nl
Connection: Keep-Alive
Accept-Encoding: gzip
If-Modified-Since: Thu, 13 Dec 2012 09:11:23 UTC 
```

我不确定是否允许将 If-modified-since 日期作为 UTC 时间发送，但服务器无法解析日期。有没有办法强制 HttpURLConnection 生成 GMT 格式？或者我应该像这样手动设置标题？

```
String ifModifiedSinceString = DateUtils.formatDate(new Date(ifModifiedSince), "EEE, d MMM yyyy HH:mm:ss 'GMT'");
connection.addRequestProperty("If-Modified-Since", ifModifiedSinceString); 
```

# youtube - 无法获得唯一身份，estimatedMinutesWatched，averageViewDuration，averageViewPercentage - Youtube Analytics Api

> ID：14454945
> 
> 赞同：1
> 
> 时间：2013-01-22T09:09:48.173
> 
> 标签：youtube, analytics

我正在使用 Youtube Analytics Api，一切正常，但是当我尝试获取这些参数的结果时 - uniques、estimatedMinutesWatched、averageViewDuration、averageViewPercentage - 我从 Google 收到此错误：

*'不支持查询'*。

我阅读了文档，一切都很好（身份验证正常，维度和指标也很好，其他查询也很好），但仍然没有运气..

如果有人遇到这个问题，并且知道如何解决，请告诉，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:05:24.433

您不能将唯一性与观看时间指标结合起来。

查看列出支持的查询的文档： [https](https://developers.google.com/youtube/analytics/v1/available_reports) ://developers.google.com/youtube/analytics/v1/available_reports 您只能将唯一性与同一表格单元格中的指标结合起来。

# python - 如何在 websocket python 客户端中添加更多标头

> ID：14454949
> 
> 赞同：12
> 
> 时间：2013-01-22T09:10:06.777
> 
> 标签：python, websocket, tornado

我正在尝试通过 websocket 连接（我正在使用 python websocket 客户端）发送会话 id（我在对 http 服务器进行身份验证后得到它），我需要将它作为**标头**参数传递，其中服务器（Tornado Websocket 服务器）将读取所有标题并检查它们。

问题是：如何添加标头以使用现有的客户端 python Websocket 实现之一，我发现它们都不能做到这一点，或者我是否首先采用了错误的方法进行身份验证？

**-- 更新 --**，下面是我使用的代码模板：

```
def on_message(ws, message):
    print 'message received ..'
    print message

def on_error(ws, error):
    print 'error happened .. '
    print error

def on_close(ws):
    print "### closed ###"

def on_open(ws):

    print 'Opening Websocket connection to the server ... '

    ## This session_key I got, need to be passed over websocket header isntad of ws.send.
    ws.send(session_key)

if __name__ == "__main__":
    websocket.enableTrace(True)
    ws = websocket.WebSocketApp("ws://localhost:9999/track",
                                on_open = on_open,
                                on_message = on_message,
                                on_error = on_error,
                                on_close = on_close, 
                                )
    ws.on_open = on_open

    ws.run_forever() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-09T17:37:06.773

自从提出这个问题以来，似乎 websocket-client 已更新为包含 websocket 标头。现在您可以简单地将标头参数列表作为字符串传递：

```
custom_protocol = "your_protocol_here"
protocol_str = "Sec-WebSocket-Protocol: " + custom_protocol
ws = websocket.WebSocketApp("ws://localhost:9999/track",
                            on_open = on_open,
                            on_message = on_message,
                            on_error = on_error,
                            on_close = on_close, 
                            header = [protocol_str]
                            ) 
```

如果您对有效标头的完整列表感兴趣，请参阅 websocket RFC6455 文档：[https ://www.rfc-editor.org/rfc/rfc6455#section-4.3](https://www.rfc-editor.org/rfc/rfc6455#section-4.3)

GitHub来源：[https ://github.com/liris/websocket-client/blob/master/websocket.py](https://github.com/liris/websocket-client/blob/master/websocket.py)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T05:37:04.897

没有什么比阅读源代码更有趣的了:))

我修改了 Websocket 客户端库的源代码，使其能够在初始化程序中接收标头作为普通参数，如下所示：

```
ws = websocket.WebSocketApp("ws://localhost:9999/track",
                                on_open    = on_open,
                                on_message = on_message,
                                on_error   = on_error,
                                on_close   = on_close, 
                                header     = {'head1:value1','head2:value2'} 
                                ) 
```

这可以通过在库的 websocket.py 源代码中编辑 3 行来完成：

1-添加标题参数：

```
 ## Line 877
   class WebSocketApp(object):
        """
        Higher level of APIs are provided.
        The interface is like JavaScript WebSocket object.
        """
        def __init__(self, url,
                     on_open = None, on_message = None, on_error = None,
                     on_close = None, keep_running = True, get_mask_key = None, header = None):

self.url = url
        self.on_open = on_open
        self.on_message = on_message
        self.on_error = on_error
        self.on_close = on_close
        self.keep_running = keep_running
        self.get_mask_key = get_mask_key
        self.sock = None
        self.header = header 
```

2- 然后，将 self.header 作为 header 参数传递给 websocket connect 方法，如下所示：

```
## Line 732
self.sock.connect(self.url, header = self.header) 
```

实际上我试图导入 WebSocketApp 类，但它没有工作，因为整个 websocket.py 模块是相互依赖的，我发现自己导入了很多东西来使它工作，猴子补丁在这种情况下更容易和更可靠.

就是这样，享受使用您需要的所有标题的修补库。

# android - Android滚动到列表视图的底部

> ID：14454953
> 
> 赞同：12
> 
> 时间：2013-01-22T09:10:19.797
> 
> 标签：android, listview, scroll

这不是另一个问题的重复……它更多的是扩展。我希望 ：）

我有一个包含数百个项目的列表视图。它们是另一个视图中的日期标记条目。

当我显示屏幕时，我希望它滚动到底部，以便显示最近的项目，但是以一种合乎逻辑的“事情结束”的方式。

```
m_list.setSelection(m_list.getCount()-1); 
```

Kewl as...但是:(现在我的列表不会滚动。它似乎卡在底部。我可以看到“卡车”，它很小而且在底部。

好的..所以我的任务是这样的..我如何从滚动到底部开始，但仍然允许用户（我）在他们（我再次）想要向上滚动时向上滚动。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-22T09:22:03.200

`listview`在 XML 中设置以下内容。

```
android:stackFromBottom="true"
android:transcriptMode="alwaysScroll" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T09:13:43.507

您可以使用以下代码到达列表视图的底部。

```
listView.postDelayed(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(listView.getCount());
        }
    }, 500); 
```

这将设置 500 毫秒的延迟。或者你可以使用

```
listView.post(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(listView.getCount());
        }
    }); 
```

这将实用地滚动您的列表视图。

# asp.net - 路径、文件名或两者都太长。名称必须少于 260 个字符，目录名称必须少于 248 个字符

> ID：14454956
> 
> 赞同：1
> 
> 时间：2013-01-22T09:10:40.987
> 
> 标签：asp.net, ssis, c#-3.0

错误：System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Net.WebException：WebClient 请求期间发生异常。---> System.IO.PathTooLongException：**指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。**

我正在使用此代码；

```
public void Main()
{
    System.Net.WebClient myWebClient = new System.Net.WebClient();
    myWebClient.DownloadFile(Dts.Variables[0].Value.ToString(),
                             Dts.Variable[1].Value.ToString());
    Dts.TaskResult = (int)ScriptResults.Success;
} 
```

在哪里：

`Dts.Variables[0].Value.ToString() == https://secure.f-prot.com/keyportal/cgi-bin/keyportalorder.pl?u=l&p=ooetcetcd&product_id=1&number_of_u=3&type=1&length=a&partner_id=2932&order_ref=4&account_reference_name=audney&account_reference_value=margaretculclagers%sbcglobal.net`

`Dts.Variables[1].Value.ToString() == C:\Audiney_API_File\keyportal_accountinfo.pl.xml`

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:54:27.527

我的错误已解决..

根本原因：我使用了错误的变量..

IE; 而不是这样写 (URL,LocalFolder )

我已经写了（LocalFolder，URL）。:)..

# python - Pyserial 格式 - 超过 127 的字节返回 2 个字节，而不是 1 个字节

> ID：14454957
> 
> 赞同：4
> 
> 时间：2013-01-22T09:10:42.820
> 
> 标签：python, utf-8, ascii, arduino, pyserial

我有一个在我的 Arduino 上运行的程序，它接受串行输入，并将其保存到一个变量中。很有魅力。使用串行监视器中内置的 Arduino 应用程序，我已成功发送和接收 0-255 之间的字节。

使用 pyserial 发送任何高于 127（或`0b01111111`）的字节，`pyserial`返回 2 - 高于 127 的值的含义，例如`0b10000000`，将发送 2 个字节，而不是一个。

我相信我的问题是`pyserial`，因此。

```
ser.write(chr(int('01000000', base=2)).encode('utf-8')) 
```

完美运行，并在 Arduino 端正确接收。

```
ser.write(chr(int('10000000', base=2)).encode('utf-8')) 
```

然而，返回 2 - 并在 Arduino 上显示为`0b11000010`和`0b10000000`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:00:18.047

正如 NPE 所说，这是 UTF-8 的编码 - 128 和 2047（8 - 11 位）之间的一个字节被转换为两个字节：如果原始的 11 位是 abcdefghijk，那么 utf-8 版本是 110abcde 10fghijk。在您的示例中（填充左 0 以形成 11 位），00010000000 将转换为 11000010 10000000 或 \xc2\x80，这正是您所看到的。有关更多信息，请参阅[有关 UTF-8 的 Wikipedia 文章](http://en.wikipedia.org/wiki/UTF-8)

您可以使用以下代码在 python 中看到这一点（我将 int('10000000', base=2) 替换为 128）：

```
>>> unichr(128).encode('utf-8')
'\xc2\x80' 
```

让我感到困惑的是，您可以使用 chr(int('10000000',base=2)).encode('utf-8') 或等效的 chr(128).encode('utf-8)'。当我这样做时，我得到：

```
>>> chr(int('10000000', base=2)).encode('utf-8')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 0: ordinal not in range(128) 
```

您是否更改了默认编码？

您需要的是一种使用一个字节表示 0 - 255 并匹配 unicode 的编码。所以尝试使用 'latin_1' 代替：

```
>>> unichr(128).encode('latin_1')
'\x80' 
```

# asp.net - 访问蓝牙设备的网页

> ID：14454963
> 
> 赞同：0
> 
> 时间：2013-01-22T09:11:29.623
> 
> 标签：asp.net, web-applications, bluetooth

我制作了一个旨在管理和优化仓库统计信息的 asp.net 应用程序。用户必须手动收集和输入所有信息，所以我认为最好使用一些使用蓝牙进行通信的条形码设备，以便在自动化过程中获取这些信息。

因此，我开发了一个 Internet Explorer 扩展程序，用于管理蓝牙设备的页面请求，并在控制容器中使用数据发布帖子。

事实是，这个扩展给我带来了很多问题，不得不时不时地重新配对设备，因为它在一些未知事件之后失去了它的功能。我不知道它是否与 Windows 更新或帐户管理和权限有关。

有谁知道替代方案，那会更稳定？也许与Java？跨浏览器将是一个加号。事实上，我正致力于使用 android 的移动设备。目前，只有 Windows 平板电脑兼容。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:12:31.590

如果您的目标是 Windows 平板电脑，为什么不使用 HTML5+Phonegap。这可能会有所帮助。 [http://phonegap.com/blog/2012/10/30/announcing-apache-cordova-support-for-windows-phone-8/](http://phonegap.com/blog/2012/10/30/announcing-apache-cordova-support-for-windows-phone-8/)

# java - 从 Java SE 转换为 Java ME

> ID：14454964
> 
> 赞同：0
> 
> 时间：2013-01-22T09:11:30.117
> 
> 标签：java, java-me

我有在 Java SE 中运行的代码。我想转换它们以便我可以通过 Java ME 运行它。如何将这些代码从 Java SE 转换为 Javca ME？有没有简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:22:57.400

Java ME 仅限于 Java 1.3，因此您的某些代码（例如泛型）可能无法工作。此外，如果你有一个`Swing`GUI，那显然也行不通。

简而言之：您需要重做 GUI 并重写 Java 1.3+ 代码。

编辑：我对 Java ME 几乎没有经验，但[这个](https://stackoverflow.com/questions/1987689/porting-java-se-game-to-java-me/1990986#1990986)答案的作者指出，实际上将代码从 Java SE 移植到 Java ME 非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:29:47.680

没有真正的好方法可以以自动化的方式做到这一点。最快的方法是尝试为 J2ME 编译您的代码并查看无法编译的内容。从那里修复它。但克里斯蒂安是对的，它基本上是 1.3（没有泛型，没有拳击等）并且没有摇摆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:28:01.380

直接使用 Java ME 是不可能的，因为编码风格不同。

有一个名为 LWUIT 的工具包，它与 Swings 非常相似。如果您使用它，花费一些时间和精力，您将能够移植您的应用程序。[你可以在这里](http://lwuit.java.net/)找到它的教程和文档

# performance - 大型项目中的 NetBeans 加载缓慢

> ID：14454965
> 
> 赞同：0
> 
> 时间：2013-01-22T09:11:36.317
> 
> 标签：performance, netbeans-7

我对 NetBeans 有一个大问题。我正在处理一个包含超过 8,000,000 个文件的项目！我已将它添加为 NetBeans 中的项目。但是当我启动 NetBeans 时加载项目文件真的很慢。

如何加快加载过程？我可以将 NetBeans 配置为逐步加载文件还是仅加载某些特定文件夹？

我的 NetBeans 版本是 7.2

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:19:54.020

有一个插件。不确定它是否仍然有效。[http://wiki.netbeans.org/ScanOnDemand](http://wiki.netbeans.org/ScanOnDemand)

# r - 删除对象后如何释放内存

> ID：14454968
> 
> 赞同：3
> 
> 时间：2013-01-22T09:11:51.753
> 
> 标签：r, memory

我直接与您联系，因为我自己无法找到解决方案。我正在`shapePoly`使用该`readShapePoly`功能加载大量内容。我对它们和减法进行了一些处理，以便处理减法而不是整体`ShapePolyDataFrame`。我的麻烦是我无法在 R 上释放内存。

例如，假设我打开了一个`Shapepoly`：

```
tmp <- readShapePoly("C:/…/clc06_c112.shp", verbose=TRUE, repair=FALSE) 
```

然后我尝试擦除变量`tmp`：gc()

```
 *used  (Mb) gc trigger  (Mb)  max used (Mb)
Ncells  5314951 142.0   15726413 420.0  19658017  525
Vcells 26412646 201.6  101851119 777.1 117429418  896*

rm(tmp)
gc()
         used (Mb) gc trigger  (Mb)  max used (Mb)
Ncells 482945 12.9   12581130 336.0  19658017  525
Vcells 588952  4.5   81480895 621.7 117429418  896 
```

尽管它似乎对 R 有影响，但在 windows 系统中跟踪它时，它对内存没有影响。我认为该变量`tmp`可能是一个指针，但我无法解决它。

# php - GSiteCrawler 服务器测试显示错误？

> ID：14454969
> 
> 赞同：0
> 
> 时间：2013-01-22T09:11:56.527
> 
> 标签：php, redirect, seo

在这段代码中，我给出了重定向 $searchLink

```
$urlCity = strtolower($_COOKIE['UserCityName']);
 $searchLink = '/properties-in-'.$urlCity.'.php'; 
 if($_SERVER['REQUEST_URI'] != $searchLink)
 {
    Header("HTTP/1.1 301 Moved Permanently" );
    Header("Location: http://".$_SERVER['HTTP_HOST'].$searchLink);   
 } 
```

但是在 GSiteCrawler Server-Test 中显示错误

```
'http://legacy.com/properties-in-.php' 
Result code: 200 (OK / OK)

'http://legacy.com/properties-in-chennai.php'  like this it should come 
```

我该如何解决这个问题

# javascript - Node.js：调用纯 Javascript 函数

> ID：14454971
> 
> 赞同：3
> 
> 时间：2013-01-22T09:12:01.617
> 
> 标签：javascript, node.js

我正在使用 Nodejs 编写一些示例程序。我在从 Nodejs 中调用 Javascript 文件时遇到问题。假设我有 3 个 .js 文件：A.js、B.js、C.js。A.js 是用 Node.js 编写的。B.js 和 C.js 是用纯 Javascript 编写的。现在我需要从 A.js 调用 B.js 中存在的函数 b()。所以我 eval() B.js 并导出方法 b()。这工作正常。但问题是当我在 B.js 中的函数 b() 调用 C.js 中的函数 c() 时。

```
B.js:

function b()
{
    console.log('In function b');
    c();
}

C.js:

function c()
{
    console.log('In function c');
} 
```

只是为了补充这个问题。我在 B.js 中有一个 var：var abc，在 B.js 的全局空间中。在 C.js 中，我可以将其引用为： var a = abc; 如何确保我的 C.js 可以访问我的变量 abc？

我如何确保解决依赖关系？任何帮助，将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:21:57.403

您应该在 Node.js 中使用[模块。](http://nodejs.org/api/modules.html)这很简单，只需阅读文档即可。

B.js

```
var c = require('./C');

function b() {
    console.log('In function b');
    c();
} 
```

C.js

```
module.exports = function() {
    console.log('In function c');
} 
```

# notepad++ - 如何从 Wine 执行 linux bash 命令

> ID：14454973
> 
> 赞同：2
> 
> 时间：2013-01-22T09:12:03.350
> 
> 标签：notepad++, wine

我正在使用带有插件的 Notepad++`NPPExec`在 MS Windows 上运行 Perl 脚本。

喜欢：

```
cmd/c perl script.pl arg1 arg2 
```

是否可以在 Linux 上使用 wine 调用本地 Perl 解释器来做同样的事情。

我尝试了下面的链接，它似乎只适用于 GUI 应用程序。

[7.5 如何在 Wine 中将原生程序与文件类型相关联？](http://wiki.winehq.org/FAQ#head-bc5b677c29daa2cd16b83bca8c88f31b2341cb98)

对于命令行输出（控制台输出），我遇到如下错误：

```
fixme:shell:IShellBrowser_fnOnViewWindowActive stub, 0x1387b8 (0x155a78)
fixme:exec:SHELL_execute flags ignored: 0x0000000c 
```

有什么解决方法吗？

# java - 嵌入式 Jetty 9 HTML 表单向应用程序发送数据

> ID：14454974
> 
> 赞同：1
> 
> 时间：2013-01-22T09:12:04.910
> 
> 标签：java, ssl, jetty

我创建了一个简单的登录表单，使用 servlet 通过 HTTP POST 通过嵌入式 Jetty 9 服务器上的 SSL 连接接收信息。servlet 按预期接收信息，但我一直无法找出 servlet 应如何与正在运行的应用程序 jetty 进行通信。在嵌入式模式下使用 Jetty 的文档似乎非常缺乏，我还没有对该主题进行一般搜索的任何成功。简而言之：如何从托管在嵌入式 Jetty 9 服务器上的 HTML 登录表单获取信息到 Jetty 正在运行的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:00:25.957

有关嵌入式模式示例，请参阅 git 存储库。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/)

对于从 servlet 到您的应用程序的通信，您有很多选择，但它们最终都是在应用程序端由事件驱动的。

2 示例选项（有很多方法可以实现，这只是两个简单的示例）：

1.  只需在单例中调用方法`MyApplication`。

    *   将对对象的引用`MyApplication`放入静态`MyServlet.app`字段。
    *   `app.somethingHappened()`当您想传达发生的事情时，请在 servlet 中调用您。
2.  听者隐喻。
    *   `MyServletListener`使用表示您希望应用程序了解的事件的方法创建
    *   制作`MyApplication`工具`MyServletListener`
    *   在[`MyServlet.init()`](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html#init%28javax.servlet.ServletConfig%29)获取对 MyApplication 的引用
    *   在各种[`MyServlet.doGet()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)或[`MyServlet.doPost()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)样式处理调用中，`MyServletListener`为您要传达的操作调用适当的事件。

*注意：这些都是幼稚的例子，不涉及线程和线程。但这完全是另一个话题。*

# php - 从mysql（组）和数组生成表

> ID：14454975
> 
> 赞同：0
> 
> 时间：2013-01-22T09:12:11.947
> 
> 标签：php, html

我想用数据库中的数据生成一个表。在一张表中，我有关于员工、任务、日期、时间的数据。

```
CREATE TABLE IF NOT EXISTS `wh_task_worktime` (
`id_worktime` int(11) NOT NULL AUTO_INCREMENT,
`id_task` int(11) NOT NULL,
`id_worker` int(11) NOT NULL,
`id_customer` int(11) NOT NULL,
`date` date NOT NULL,
`time` int(11) NOT NULL,
PRIMARY KEY (`id_worktime`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=16 ;

INSERT INTO `wh_task_worktime` (`id_worktime`, `id_task`, `id_worker`, `id_customer`, `date`, `time`) VALUES
(12, 1, 3, 1, '2013-01-18', 8),
(11, 2, 3, 2, '2013-01-18', 8),
(9, 2, 3, 2, '2013-01-16', 5),
(7, 2, 3, 2, '2013-01-15', 6),
(10, 2, 3, 2, '2013-01-13', 6),
(13, 1, 3, 1, '2013-01-16', 6), 
```

生成表：

```
echo '<table style="width: 300px; clear:both;" class="list">';
echo '<tr class="bold">';
echo '<td style="width:100px;">Date</td>';

// Headlines tasks
$query0 = "SELECT z.name FROM ".$prefix."task_worktime cp INNER JOIN ".$prefix."task z ON cp.id_task = z.id WHERE `id_worker`= ".$id_worker." GROUP BY cp.id_task HAVING count(z.name) > 0 ";
$news0 = mysql_query($query0) or die ('Error: ' . mysql_error());
while ($rekord0 = mysql_fetch_assoc($news0)) {
echo '<td>'.$rekord0[name].'</td>';
}
echo "</tr>";

// Here shows VERSES WITH DATE and the number of hours worked (depending on the task)
$query = "SELECT date, time, id_worktime, id_task FROM ".$prefix."task_worktime WHERE id_worker = ".$id_worker." order by date ASC";
$news1 = mysql_query($query) or die ('Error: ' . mysql_error());
$daty = array();
while ($row = mysql_fetch_array($news1)) {
$id_date = $row['date'];
if (!isset($daty[$id_date]))
$daty[$id_date] = array('date' => $row['date'], 'time' => array());

if (!empty($row['time']))
$daty[$id_date]['time'][] = array('time' => $row['time']);
}

/ / DISPLAY HOUR AND DATE
foreach ($daty as $id => $data){
echo '<tr><td>'.$data['date'].' </td>';
foreach ($data['time'] as $worktime){
echo '<td>'.$worktime['time'].'</td>';
}
echo '</tr>';
}
echo '</table>';
echo '<pre>';
print_r($daty);
echo '</pre>'; 
```

结果是一张带有空白诗句的表格，而不是我希望它们为零的洞

![在此处输入图像描述](../Images/b66e3177ca05723b5194468cc11060b8.png)

```
DATE        Task1   Task2
2013-01-13      6
2013-01-15      6
2013-01-16      5   6
2013-01-18      8   8 
```

作为当天的员工，它不适用于数据库中的任何条目。最终，我想在这里创建这样一个表：

```
DATE        Task1   Task2   Task3
2013-01-01  6       0       2
2013-01-02  4       2       0
2013-01-03  0       8       0 
```

就在我从头开始的地方，它在数据库中没有任何条目。每个员工的任务数量可能不同。

感谢您提供有关如何正确生成表格的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:23:03.250

```
SELECT name the columns you want returned
  FROM task_worktime cp 
  LEFT
  JOIN task z 
    ON cp.id_task = z.id 
 WHERE id_worker = '$id_worker' 
 GROUP 
    BY cp.id_task 
HAVING COUNT(*) > 1 
```

?

请注意，使用这种方式， GROUP BY 会产生意想不到的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:20:33.637

尝试这个：-

```
echo '<td>'.(isset($worktime['time'])?$worktime['time']:'0').'</td>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:16:56.590

在您输出工作时间的行中，检查如下值：

```
echo '<td>'.($worktime['time']?$worktime['time']:'0').'</td>'; 
```

# javascript - 单击图像时不显示div

> ID：14454977
> 
> 赞同：1
> 
> 时间：2013-01-22T09:12:16.527
> 
> 标签：javascript, image, html

我在页面的右上角有一张图片。单击图像时，我必须显示一个看起来像有很多行的表格的 div。div 必须正好位于图像下方。我尝试了下面的代码片段。

```
<div><a href="javascript:Test()"><img align=right src="Test.png" /></a></div> 
```

测试功能的示例代码片段

```
Test(){
var hNode = document.createElement('div');
hNode.style.display = "block";
hNode.style.overflow="hidden";enter code here
hNode.style.position = "absolute"; 
hNode.style.width = "400px";
hNode.style.height = "30px";
hNode.style.border = "1px solid  #666666";
hNode .appendChild(document.createTextNode("Test"));
} 
```

但是 div 没有出现。这个片段有什么问题？任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:19:44.050

也许`onclick="Test()"`在你的`<a>`标签中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:48:20.770

```
function Test(){
   var hNode = document.createElement('div');
   hNode.style.display = "block";
   hNode.style.overflow ="hidden";
   hNode.style.position = "absolute";
   hNode.style.width = "400px";
   hNode.style.height = "30px";
   hNode.style.border = "1px solid #666666";
   var t = document.createTextNode("Test");
   hNode.appendChild(t)
   document.body.appendChild(hNode);
 } 
```

虽然所有其他答案都在解决您的代码问题，但为什么它没有出现的答案是您实际上并没有将新创建的附加`div`到，`document.body`因此尽管它存在，但它不是 dom 的一部分。

您可以使用其他答案中描述的任何方法调用此函数；我更喜欢类似的东西

```
 <a href="javascript_policy.html" onclick="myFunction(); return false;">my link</a> 
```

将没有启用 javascript 的用户引导到一个页面，告诉他们为什么该特定链接需要 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:26:12.173

第一个：更改`a`为`<a href="javascript:void(0)" onclick="Test();">link</a>`

第二：在函数实现`function`之前添加关键字`Test()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:26:43.103

```
 <div onclick="Test()"><img align=right src="Test.png" /></div> 
```

可能会有所帮助。

# java - 如何在 servlet 中获取 html 请求 URL

> ID：14454979
> 
> 赞同：0
> 
> 时间：2013-01-22T09:12:19.670
> 
> 标签：java, servlets

我正在使用这样的 HTML 表单，

```
<form action="/myservlet?userid=12345" method="post" enctype="multipart/form-data">
<input type="file" name="file">
<input type="submit" value="Submit">
</form> 
```

这个 HTML 表单的路径例如[http://www.mywebapp.com/sample.html](http://www.mywebapp.com/sample.html)

在我的 servlet 中，当我使用`String url = req.getRequestURL().toString();`并打印出字符串时，它会打印表单操作 URL [http://www.mywebapp.com/myservlet?userid=12345](http://www.mywebapp.com/myservlet?userid=12345)而不是 HTML URL。

预期的 HTML URL：[http](http://www.mywebapp.com/sample.html) ://www.mywebapp.com/sample.html （只有我从这里请求并且我需要这个 URL）

谁能建议我如何在 servlet 中获取 HTML url 路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T09:49:04.647

如果我理解正确，您希望在发出后续请求（`form`帖子）时获取一个请求（加载 html 的请求）的 URL。

HTTP 是无状态的，因此无法可靠地做到这一点。

需要这样做有一点代码味道，但如果你真的需要 URL，你将不得不将 URL 作为隐藏`input`在`form`. 有多种方法可以做到这一点，无论您是使用 JSP/JSTL 还是使用 JavaScript 在客户端做一些事情，但基本上您试图获得`form`这样的结果：

```
<form action="/myservlet?userid=12345" method="post" enctype="multipart/form-data">
   <input type="file" name="file">
   <input type="hidden" name="url" value="http://www.mywebapp.com/sample.html"/>
   <input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T10:01:29.267

这是某种问题，因为用户在编写时加载了页面`http://www.mywebapp.com/sample.html`，并且在此初始请求中，您将`request.getRequestURL().toString`完全从该值中获得

在使用表单（来自客户端）的下一个请求中，url 不再是这个`http://www.mywebapp.com/sample.html`，而是在属性中指定的`form action`那个。

有很多建议以表单或类似的方式传递隐藏值，但您可以轻松使用简单的 HTTP。每次执行 GET 请求时，您都会在浏览器（或其他客户端）窗口中获得一个新 URL，但是当您在浏览器中执行 POST 请求时，URL 不会改变。因此，现在在您的代码中，如果您知道这是一个 POST 请求并且您想从该请求发出的位置获取页面，您可以轻松地从 Http Header "Referer" 中读取它：

```
String URLfromWherePostWasMade = request.getHeader("Referer"); 
```

这应该与所有“隐藏字段”示例相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T10:15:22.447

您的“HTML 页面”称为“Referrer”，您可以通过这种方式获取它

```
HttpServletRequest.getHeader("Referer"); 
```

在您的情况下，它将返回提交表单的页面

```
http://www.mywebapp.com/sample.html 
```

# recursion - OCaml 中的记忆？

> ID：14454981
> 
> 赞同：7
> 
> 时间：2013-01-22T09:12:26.357
> 
> 标签：recursion, wolfram-mathematica, ocaml, fibonacci, memoization

可以改进“原始”斐波那契递归过程

```
Fib[n_] := If[n < 2, n, Fib[n - 1] + Fib[n - 2]] 
```

和

```
Fib[n_] := Fib[n] = If[n < 2, n, Fib[n - 1] + Fib[n - 2]] 
```

在 Wolfram 数学中。

第一个版本将遭受指数爆炸，而第二个版本则不会，因为 Mathematica 将在表达式中看到重复的函数调用并记忆（重用）它们。

是否可以在 OCaml 中做同样的事情？

怎么提高

```
let rec fib n = if n<2 then n else fib (n-1) + fib (n-2);; 
```

以相同的方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T14:22:10.367

rgrinberg 提供的解决方案可以泛化，以便我们可以记忆任何函数。我将使用关联列表而不是哈希表。但这并不重要，您可以轻松地将我的所有示例转换为使用哈希表。

首先，这里有一个函数`memo`，它接受另一个函数并返回它的记忆版本。这是 nlucaroni 在其中一条评论中建议的：

```
let memo f =
  let m = ref [] in
    fun x ->
      try
        List.assoc x !m
      with
      Not_found ->
        let y = f x in
          m := (x, y) :: !m ;
          y 
```

该函数`memo f`保留`m`到目前为止计算的结果列表。当被要求计算`f x`时，首先检查`m`是否`f x`已经计算过。如果是，则返回结果，否则实际计算`f x`，将结果存储在 中`m`，然后返回。

在递归的情况下，上述`memo`情况存在问题。`f`一旦`memo`调用`f`了 compute `f x`，任何由 进行的递归调用`f`都不会被`memo`. 为了解决这个问题，我们需要做两件事：

1.  在这种递归的定义中，`f`我们需要将递归调用替换为对“稍后提供”的函数的调用（这将是 的记忆化版本`f`）。

2.  我们`memo f`需要提供`f`承诺的“当你想要进行递归调用时应该调用的函数”。

这导致以下解决方案：

```
let memo_rec f =
  let m = ref [] in
  let rec g x =
    try
      List.assoc x !m
    with
    Not_found ->
      let y = f g x in
        m := (x, y) :: !m ;
        y
  in
    g 
```

为了演示它是如何工作的，让我们记住朴素的斐波那契函数。我们需要编写它以便它接受一个额外的参数，我将其称为`self`. 这个参数是函数应该使用的，而不是递归调用自身：

```
let fib self = function
    0 -> 1
  | 1 -> 1
  | n -> self (n - 1) + self (n - 2) 
```

现在为了得到记忆`fib`，我们计算

```
let fib_memoized = memo_rec fib 
```

欢迎您尝试一下，看看它会`fib_memoized 50`立即返回。（对于通常的幼稚递归定义`memo f`，情况并非如此。）`f`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-22T10:18:43.230

您几乎可以执行mathematica 版本所做的操作，但需要手动操作：

```
let rec fib = 
  let cache = Hashtbl.create 10 in
  begin fun n ->
    try Hashtbl.find cache n
    with Not_found -> begin
      if n < 2 then n
      else 
        let f = fib (n-1) + fib (n-2) in
        Hashtbl.add cache n f; f
    end
  end 
```

在这里，我选择一个哈希表来存储已经计算的结果，而不是重新计算它们。请注意，您仍然应该注意整数溢出，因为我们使用的是普通整数而不是大整数。

# java - 尝试将邮件发送到动态电子邮件 ID 时出错

> ID：14454983
> 
> 赞同：0
> 
> 时间：2013-01-22T09:12:30.113
> 
> 标签：java, android, jakarta-mail, sendmail

我必须开发一个使用 javamailapi 的 android 发送邮件应用程序。

```
message.setRecipients(Message.RecipientType.TO,
                        InternetAddress.parse("mercy.krishnaveni@gmail.com,demo@mercuryminds.com")); 
```

使用上面的代码邮件发送给收件人但现在我想发送 Id 写在以下字符串中的邮件。

```
 string Email="mercy.krishnaveni@gmail.com"
 message.setRecipients(Message.RecipientType.TO,InternetAddress.parse("Email,demo@mercuryminds.com")); 
```

当我使用上面的代码时，邮件没有正确发送，它给了我以下错误：

```
01-22 07:13:31.609: E/AndroidRuntime(959): FATAL EXCEPTION: main
01-22 07:13:31.609: E/AndroidRuntime(959): java.lang.RuntimeException: javax.mail.SendFailedException: Invalid Addresses;
01-22 07:13:31.609: E/AndroidRuntime(959):   nested exception is:
01-22 07:13:31.609: E/AndroidRuntime(959):  com.sun.mail.smtp.SMTPAddressFailedException: 553-5.1.2 We weren't able to find the recipient domain. Please check for any
01-22 07:13:31.609: E/AndroidRuntime(959): 553-5.1.2 spelling errors, and make sure you didn't enter any spaces, periods,
01-22 07:13:31.609: E/AndroidRuntime(959): 553 5.1.2 or other punctuation after the recipient's email address. ni8sm10202402pbc.70 
```

请帮我解决我的错误，我该如何发送电子邮件？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:20:28.590

我认为你需要更换

```
message.setRecipients(Message.RecipientType.TO,InternetAddress.parse("Email,demo@mercuryminds.com")); 
```

和

```
message.setRecipients(Message.RecipientType.TO,InternetAddress.parse(Email+",demo@mercuryminds.com")); 
```

未找到电子邮件地址，因为它试图查找“电子邮件”而不是电子邮件的值（“mercy.krishnaveni@gmail.com”）。

希望有帮助，

# c# - 如何使用 selenium 框架测试 C# 控制台应用程序？

> ID：14454984
> 
> 赞同：0
> 
> 时间：2013-01-22T09:12:30.363
> 
> 标签：c#, selenium

我必须使用 Selenium 测试一个简单的控制台程序。例如：

```
public class demo
{
    public static void Main(string[] args)
    {
        Console.WriteLine("Hello World");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T09:14:59.953

您不能使用 Selenium 来测试控制台应用程序。Selenium 用于自动化浏览器。

从其网站：

> **什么是硒？**
> 
> *Selenium 使浏览器自动化。*而已。你用这种力量做什么完全取决于你。主要是为了测试目的而自动化 Web 应用程序，但当然不仅限于此。无聊的基于 Web 的管理任务也可以（而且应该！）自动化。

# jquery - 在鼠标悬停时添加内容

> ID：14454989
> 
> 赞同：6
> 
> 时间：2013-01-22T09:12:43.083
> 
> 标签：jquery, html, jquery-ui

我正在用 CSS 制作动画，它几乎完成了。现在我希望我有动画元素的区域应该自动说“悬停在这里”。我怎么能用jquery做到这一点？

**我有我的代码在这里-**

```
<!DOCTYPE html>
<html>
<head>
<style>
#D {
  background: #fff;
  height: 180px;
  position: justify;
border:1px dotted #ccc;

}

#S{
  font: 5em 'Bree Serif', Helvetica, sans-serif;
  margin: 50px;
  opacity: 0;
  text-transform: uppercase;
  position:absolute;
}
#S:nth-child(5) {
  -webkit-transition: all 2s ease-in-out ;
     -moz-transition: all 2s ease-in-out ;
       -o-transition: all 2s ease-in-out ;
      -ms-transition: all 2s ease-in-out ;
          transition: all 2s ease-in-out ;

}

#S:nth-child(4) {
  -webkit-transition: all 1s ease ;
     -moz-transition: all 1s ease ;
       -o-transition: all 1s ease ;
      -ms-transition: all 1s ease ;
          transition: all 1s ease ;
}

#S:nth-child(3) {
  -webkit-transition: all 2s ease ;
     -moz-transition: all 0.1s ease 0s ;
       -o-transition: all 0.1s ease ;
      -ms-transition: all 0.1s ease ;
          transition: all 1s ease  0s;
}

#S:nth-child(2) {
  -webkit-transition: all 1s ease ;
     -moz-transition: all 0.1s ease ;
       -o-transition: all 0.1s ease ;
      -ms-transition: all 0.1s ease ;
          transition: all 1s ease ;
}

#S:nth-child(1) {
  -webkit-transition: all 1s ease;
     -moz-transition: all 0.5s ease 0s;
       -o-transition: all 0.1s ease;
      -ms-transition: all 0.1s ease;
          transition: all 1s ease 0s;
}
#D:hover #S:nth-child(1) {
  opacity: 1;
  left: 50px;
  -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
       -o-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
          transform: rotate(360deg);
color:#ccc;
    text-shadow: 1px 4px 6px black;

}
#D:hover #S:nth-child(2) {
  opacity: 1;
  -webkit-transform: rotate(-360deg);
     -moz-transform: rotate(-360deg);
       -o-transform: rotate(-360deg);
      -ms-transform: rotate(-360deg);
          transform: rotate(-360deg);
}
#D:hover #S:nth-child(3) {
  opacity: 1;
  -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
       -o-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
          transform: rotate(360deg);
}
#D:hover #S:nth-child(4) {
  opacity: 1;

  -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
       -o-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
          transform: rotate(360deg);
}
#D:hover #S:nth-child(5) {
  opacity: 1;

  -webkit-transform: rotate(-360deg);
     -moz-transform: rotate(-360deg);
       -o-transform: rotate(-360deg);
      -ms-transform: rotate(-360deg);
          transform: rotate(-360deg); 

}

#D:hover #S:nth-child(6) {
  opacity: 1;

  -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
       -o-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
          transform: rotate(360deg);
}
#D:hover #S:nth-child(7) {
  opacity: 1;

  -webkit-transform: rotate(-360deg);
     -moz-transform: rotate(-360deg);
       -o-transform: rotate(-360deg);
      -ms-transform: rotate(-360deg);
          transform: rotate(-360deg);
}
#D:hover #S:nth-child(8) {
  opacity: 1;

  -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
       -o-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
          transform: rotate(360deg);
}

#S:nth-child(6)
{
-webkit-transition: all 1s ease;
     -moz-transition: all 0.5s ease 0s;
       -o-transition: all 0.1s ease;
      -ms-transition: all 0.1s ease;
          transition: all 1s ease 0s;
}
#S:nth-child(7)
{
-webkit-transition: all 1s ease;
     -moz-transition: all 0.5s ease 0s;
       -o-transition: all 0.1s ease;
      -ms-transition: all 0.1s ease;
          transition: all 1s ease 0s;
}
#S:nth-child(8)
{
-webkit-transition: all 1s ease;
     -moz-transition: all 0.5s ease 0s;
       -o-transition: all 0.1s ease;
      -ms-transition: all 0.1s ease;
          transition: all 1s ease 0s;
font-size:10em;
margin-top:4px;
color:#ccc;
    text-shadow: 1px 4px 6px black;
}
#D:hover #S:nth-child(2) {
  left: 120px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(3) {
  left: 175px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(4) {
  left: 260px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(5) {
  left: 313px;
margin-top:20px;
font-size:8em;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(6)
{left:390px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(7)
{
left:450px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}

#D:hover #S:nth-child(8)
{
left:500px;
color:#ccc;
    text-shadow: 1px 4px 6px black;

}
</style>
</head>
<body>
<div id="D">
 <span id="S">c</span><span  id="S">s</span><span  id="S">s</span><span  id="S">H</span><span  id="S" >()</span><span  id="S">V</span><span  id="S">E</span><span  id="S">R</span>
</div>
</body>
</html> 
```

演示在这里-http [://jsfiddle.net/stackmanoz/CeVgT/](http://jsfiddle.net/stackmanoz/CeVgT/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:17:16.803

添加`content: "hover here"`

```
#D {
  background: #fff;
  line-height: 180px;
  position: justify;
  border:1px dotted #ccc; text-align:center
}
#D:before {
content:"Hover here"; 
} 
```

**[演示](http://jsfiddle.net/CeVgT/1/)**

添加`#D:hover:before{ visibility:hidden }`以隐藏悬停时的文本。

**[演示 2](http://jsfiddle.net/CeVgT/13/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:08:27.163

希望这可以通过单独使用CSS来解决......下面的代码

```
#D:before{content:"Hover here";}
#D:hover::after {content:"";}
#D:hover::before {content:"";} 
```

在此处检查输出

[http://jsfiddle.net/r1webs/C6QTn/](http://jsfiddle.net/r1webs/C6QTn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:20:03.567

/在你的主容器中添加这个

`<div id='hover'>Hover here<div>`

在javascript部分你可以添加监听器

```
$(document).ready(function() {
    $('#D').hover(function(){ $('#hover').hide()}, function(){ $('#hover').show()});
}); 
```

演示：http: [//jsfiddle.net/CeVgT/7/](http://jsfiddle.net/CeVgT/7/)

# c# - async 修饰符和 await 运算符与委托和线程有何不同？

> ID：14454991
> 
> 赞同：2
> 
> 时间：2013-01-22T09:12:58.553
> 
> 标签：c#

例如 Winform 中的一个场景，当我们 `HttpWebRequest`同步使用时 UI 线程将被阻塞，这反过来又请求 Internet 上的资源。在这里，我们可以使用 async 方法执行该方法，而某些任务的 await 关键字允许用户与 winform 交互，即使请求仍在运行。

这甚至可以通过委托来实现，那么异步功能的优势是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:22:13.623

我假设“委托”是指从后台线程调用同步方法。

正如其他人所指出的，使用`async`and更容易阅读和编写代码`await`，但还有另一个重要区别。

当您使用同步方法时，调用线程会被阻塞，直到操作完成。

当您从后台线程使用同步方法时，UI 线程不会被阻塞，但后台线程仍然会阻塞。

当您使用异步方法时，不会阻塞任何线程。这允许更有效地使用您的资源，对线程池的压力更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:16:26.073

async 和 await 术语要简单得多，您基本上可以像编写同步应用程序一样编写代码，只需添加一些关键字。

来自 MSDN：

> 通过使用异步编程，您可以避免性能瓶颈并提高应用程序的整体响应能力。然而，编写异步应用程序的传统技术可能很复杂，使得它们难以编写、调试和维护。
> 
> Visual Studio 2012 引入了一种简化的方法，即异步编程，它利用 .NET Framework 4.5 和 Windows 运行时中的异步支持。编译器完成了开发人员过去常做的艰巨工作，并且您的应用程序保留了类似于同步代码的逻辑结构。因此，您只需付出很少的努力即可获得异步编程的所有优势。

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T09:17:18.977

在我看来，最大的优势之一是用更少的代码行更简洁地理解异步编程模式。如果您想更清楚地了解它是如何工作的，请查看 Jon Skeet 回答的这个问题：[Task<int> 如何成为 int？](https://stackoverflow.com/questions/13159080/how-does-taskint-become-a-int)

# iphone - 为什么在 iphone 应用程序中保存 NSArray 总是失败

> ID：14454992
> 
> 赞同：0
> 
> 时间：2013-01-22T09:13:02.053
> 
> 标签：iphone, ios, objective-c

我想保存`NSArray`，但是失败了，为什么？

```
 -(void)SaveDataAll:(NSMutableArray *)dataToSave:(NSString *)name
    {  
            NSArray *array = [NSArray arrayWithArray:dataToSave];

            // save path
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                                 NSUserDomainMask, YES);

            if ([paths count] > 0)
            {
                // Array path
                NSString  *arrayPath = [[paths objectAtIndex:0]
                                        stringByAppendingPathComponent:name];

                NSLog(@"SaveDataAll   array====%@",array);
                 NSLog(@"SaveDataAll   dataToSave====%@",dataToSave);  
                // save array
                [array writeToFile:arrayPath atomically:YES];

                // getout
                NSArray *arrayFromFile = [NSArray arrayWithContentsOfFile:arrayPath];

                NSLog(@"SaveDataAll   ====%@",arrayFromFile);  
            }
    } 
```

这是打印的数组。

```
2013-01-22 16:51:45.010 [49227:c07] SaveDataAll   array====(
    "\U4ee5\U8272\U5217\U548c\U4f0a\U6717\Uff1a\U4e00\U500b\U611b\U60c5\U6545\U4e8b\Uff1f",
    "\U53f2\U63d0\U82ac\Uff0e\U611b\U5ef8\U65af: \U4e00\U500b\U7236\U89aa\U8207\U5973\U5152\U7684\U9023\U7e6b\Uff0c\U4e00\U6b21\U4e00\U5f35\U7167\U7247",
    "Molly Crockett \U8ac7\U5c0f\U5fc3\U300c\U795e\U7d93\U80e1\U8aaa\U300d",
    "Maz Jobrani: \U7576\U4e00\U500b\U6c99\U70cf\U5730\U963f\U62c9\U4f2f\U4eba\U3001\U5370\U5ea6\U4eba\U3001\U548c\U4f0a\U6717\U4eba\U8d70\U9032\U5361\U9054\U7684\U9152\U5427....",
    "Ellen 't Hoen: \U85e5\U7269\U5c08\U5229\U806f\U76df\Uff0c\U62ef\U6551\U751f\U547d",
    "Nina Tandon\Uff1a \U7d44\U7e54\U5de5\U7a0b\U5b78\U662f\U91ab\U7642\U500b\U4eba\U5316\U7684\U9060\U666f?",
    "\U5091\U592b\Uff0e\U53f2\U5bc6\U65af\Uff1a\U5f9e\U76e3\U7344\U5b78\U5230\U7684\U7d93\U5546\U4e4b\U9053",
    "Bobby Ghosh: \U70ba\U4f55\U5168\U7403\U8056\U6230\U5df2\U7d93\U8f38\U4e86",
    "\U4fdd\U7f85\U00b7\U5361\U8fea\U5c3c\Uff08Paolo Cardini\Uff09\Uff1a \U5225\U518d\U4e00\U5fc3\U591a\U7528\U4e86\Uff01\U8a66\U8a66\U5c08\U5fc3\U4e00\U81f4\U5427\Uff01",
    "Munir Virani: \U6211\U5982\U4f55\U611b\U4e0a\U79bf\U9df9",
    "\U73cd\U59ae\Uff0e\U96ea\U666e\Uff1a\U7834\U788e\U7684\U8eab\U9ad4\U4e0d\U4ee3\U8868\U7834\U788e\U7684\U4eba",
    "Ernesto Sirolli: \U60f3\U8981\U5e6b\U52a9\U4eba\U55ce? \U9589\U4e0a\U5634\Uff0c\U7136\U5f8c\U807d\U5427!",
    "14:57",
    "03:38",
    "11:18",
    "07:11",
    "11:16",
    "06:19",
    "05:00",
    "16:31",
    "02:52",
    "06:41",
    "18:57",
    "17:09",
    "14:57",
    "03:38",
    "11:18",
    "07:11",
    "11:16",
    "06:19",
    "05:00",
    "16:31",
    "02:52",
    "06:41",
    "18:57",
    "17:09",
    "<UIImage: 0x95075d0>",
    "<UIImage: 0xa297da0>",
    "<UIImage: 0xa29c480>",
    "<UIImage: 0xa27bae0>",
    "<UIImage: 0xa29b5c0>",
    "<UIImage: 0x950c0d0>",
    "<UIImage: 0xa29fcb0>",
    "<UIImage: 0x950cee0>",
    "<UIImage: 0xa2a0310>",
    "<UIImage: 0x9509310>",
    "<UIImage: 0x95509a0>",
    "<UIImage: 0xa297fe0>",
    "/talks/lang/zh-tw/israel_and_iran_a_love_story.html",
    "/talks/lang/zh-tw/steven_addis_a_father_daughter_bond_one_photo_at_a_time.html",
    "/talks/lang/zh-tw/molly_crockett_beware_neuro_bunk.html",
    "/talks/lang/zh-tw/maz_jobrani_a_saudi_an_indian_and_an_iranian_walk_into_a_qatari_bar.html",
    "/talks/lang/zh-tw/ellen_t_hoen_pool_medical_patents_save_lives.html",
    "/talks/lang/zh-tw/nina_tandon_could_tissue_engineering_mean_personalized_medicine.html",
    "/talks/lang/zh-tw/jeff_smith_lessons_in_business_from_prison.html",
    "/talks/lang/zh-tw/bobby_ghosh_why_global_jihad_is_losing.html",
    "/talks/lang/zh-tw/paolo_cardini_forget_multitasking_try_monotasking.html",
    "/talks/lang/zh-tw/munir_virani_why_i_love_vultures.html",
    "/talks/lang/zh-tw/janine_shepherd_a_broken_body_isn_t_a_broken_person.html",
    "/talks/lang/zh-tw/ernesto_sirolli_want_to_help_someone_shut_up_and_listen.html"
) 
```

但`NSLog(@"SaveDataAll ====%@",arrayFromFile);` arrayFromFile 总是为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:32:00.737

您在数组中有 UIImage - 它们无法保存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:07:42.873

你的阵列也有图像。所以你不能直接保存到你的位置。所以你必须将 NSArray 转换为 NSData 格式。并将该数据存储到您的位置。

```
NSData *data=[NSKeyedArchiver archivedDataWithRootObject:yourarrayName];
                [data writeToFile:yourfullpath atomically:YES]; 
```

同样，在检索文件时使用以下代码。

```
NSData *NewData=[NSData dataWithContentsOfFile:yourfullpath];
NSArray *arrayNew=[NSKeyedUnarchiver unarchiveObjectWithData:NewData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:25:46.527

谢谢罗兰达斯

因为`UIImage`在数组中 - 它们无法保存

这是一种简单的方法，通过----"archivedDataWithRootObject"--------可以得到数组的根对象来解决这个问题。

> -(void)SaveDataAll :(NSMutableArray *)dataToSave:(NSString *)name {
> 
> ```
> [self  Save_str:dataToSave:name];
>  } 
> ```
> 
> -(void)Save_str:(NSMutableArray *)dataToSave1:(NSString *)name {
> 
> ```
> // -(void)SaveData:(NSInteger)rowChoice
> {
> 
>     //change from nsmutalblearray to nsarray
>     NSArray *array = [NSArray arrayWithArray:dataToSave1];
> 
>     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
>                                                          NSUserDomainMask, YES);
> 
>     if ([paths count] > 0)
>     {
>         // Array的保存路径
>         NSString  *arrayPath = [[paths objectAtIndex:0]
>                                 stringByAppendingPathComponent:name];
> 
>         NSData *data=[NSKeyedArchiver archivedDataWithRootObject:array];
> 
>         bool saveok=[data writeToFile:arrayPath atomically:YES];
> 
>         if (saveok) {
>             NSLog(@"SaveDataAll   saveok====true");
> 
>         }
>         else{
>             NSLog(@"SaveDataAll   saveok====false");
>         }
> 
>     }
> 
> }
>  } 
> ```

# android - android中用于服务器-客户端通信的任何消息传递框架？

> ID：14454994
> 
> 赞同：0
> 
> 时间：2013-01-22T09:13:17.097
> 
> 标签：android, database, remote-server

我已经浏览了互联网上的几篇文章，但没有得到一个直接明确的答案。

我正在android上做一个应用程序，它需要通过互联网从数据库发送/接收数据。那么如何在我的 android 设备上发送/接收来自远程数据库的消息？

android 中是否有当前可用的消息传递框架来执行此类任务？

我想到的一种方法是在我的 Web 服务器上安装 PHP 脚本，然后我将从我的 android httpClient 调用这些 php 脚本。但它有点累，错误检查也有点问题，重试机制也不存在。

请推荐一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:16:08.513

谷歌为此提供服务。

[适用于 Android 的 Google 云消息传递](http://developer.android.com/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:28:46.450

Google Cloud Messaging 可能仅适用于向 android 设备发送推送通知等。XMPP 可用于将消息从一个 android 发送到另一个。所以你所采取的，使用 PHP 脚本并使用 URLConnection 或 HTTPConnection 调用它是与远程数据库进行事务的更好方法