# StackOverflow 问答 15164000-15164999

# deployment - 临时 WP8/WinRT-Store-Licence 和部署的应用程序

> ID：15164007
> 
> 赞同：0
> 
> 时间：2013-03-01T17:59:44.907
> 
> 标签：deployment, windows-8, microsoft-metro, windows-runtime, windows-phone-8

如果我不想编写 WindowsPhone8-/WinRT-App 代码，我会收到一个临时许可证。如果我调试我的应用程序，它将安装在本地或远程设备上（我添加到调试器中）。

我的问题是，我可以在许可证密钥过期后使用已安装的应用程序吗？或者我是否需要将我的平板电脑再次连接到电脑以使用新密钥“重建”应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:55:16.970

**对于 Windows 手机：**

Windows Phone 模拟器没有限制（但是当您重新启动模拟器时，所有应用程序都会再次被擦除）。

对于您已注册的 Windows Phone 开发人员设备，您可以在[开发人员门户](http://dev.windowsphone.com)上查看到期日期。

它在仪表板>>帐户>>电话下。

这通常是从解锁开发者手机之日起一年。到期后，应用程序将不再运行，您需要重新解锁手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:21:55.797

如果许可证过期，您将无法再次启动您的应用程序，您需要在延长许可证后重新构建它。

您可以使用 Windows 应用商店帐户或创建企业帐户将 30 天延长至 90 天。

# windows - 为什么我无法恢复 NTFS 文件系统上已删除的文件夹？

> ID：15164012
> 
> 赞同：-3
> 
> 时间：2013-03-01T18:00:19.950
> 
> 标签：windows, ntfs, recovery

如果我删除了某个文件夹中的某些文件，我可以使用 GetDataBack NTFS 之类的工具通过快速扫描来恢复它们，但是一旦删除的文件夹就无法恢复，并且该文件夹中的文件会丢失（它们可以恢复但数据会丢失）并且没有文件名）。我只需要一些信息，我怎样才能以某种方式存储我的文件，以便在删除后可以轻松恢复它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:07:11.447

在 NTFS 文件系统上，文件夹只是文件的索引。基本上，它是一个将文件名映射到 MFT 中所需文件条目的索引（对小目录使用向量，对大目录使用 B+ 树）。

这就是为什么您可以使用例如硬链接为文件创建多个名称的原因。该名称来自目录索引中文件的“指针”。

如果您希望能够轻松恢复文件，则首先不需要删除它们。将它们移动到某个“存档”位置。

# javascript - JSON 用于初始化服务中的数据

> ID：15164013
> 
> 赞同：1
> 
> 时间：2013-03-01T18:00:34.987
> 
> 标签：javascript, angularjs

我正在开发一个小型 AngularJS 应用程序，目前正在努力创建服务。

我有一个服务作为提供联系人（姓名，地址......）的后端。到目前为止，它们在服务 ( `instance.contacts=[...]`) 中被硬编码为数组，但现在我正试图从 json 文件中读取它们：

```
myModule.factory('contactService', ['$http',function ($http) {
    var instance = {};

    $http.get('contacts.json').success(function (data) {
        instance.contacts = data;
    });

    return instance;
}]); 
```

**我在浏览器控制台中看到文件已成功读取，但我在屏幕上看不到任何更改。**

所以我尝试了以下方法，它起作用了：

```
myModule.factory('contactService', ['$http',function ($http) {
    var instance = {
        contacts:[]
    };

    $http.get('contacts.json').success(function (data) {
        angular.forEach(data, function(item) {
            instance.contacts.push(item);
        });
    });

    return instance;
}]); 
```

我不知道为什么第二个代码片段有效，而不是第一个。有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:12:33.280

`$http`是异步的，所以你不能返回一个数组，因为当你返回它时，它可能还没有任何数据。您实际上必须返回承诺：

```
var instance = $http('contacts.json');

return instance; 
```

然后在您的控制器（或其他服务）中：

```
contactService.then(function(response) {
  $scope.contacts = response.data;
}); 
```

请记住，无论您在何处访问您的服务，都必须使用`then`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:12:34.400

使用 可能会更好`ngResource`，在这种情况下，您的代码应如下所示：

```
myModule.factory('contactService', function ($resource) {
    return $resource('contacts.json', {}, {
        get: {method: 'GET', isArray: true}
    });
}) 
```

确保 myModule`ngResource`在其依赖项列表中。然后在您的控制器中，您可以使用`contactService.get()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T19:21:59.600

举一个完整的例子，这里是 plunker [http://plnkr.co/edit/VsuAKNavPbHL7RWbrvKD?p=preview](http://plnkr.co/edit/VsuAKNavPbHL7RWbrvKD?p=preview)。随后的想法与 Josh David Miller 提到的相同。

# actionscript-3 - 在 AS3 中设置动画剪辑的宽度/高度

> ID：15164016
> 
> 赞同：2
> 
> 时间：2013-03-01T18:00:53.643
> 
> 标签：actionscript-3

我有这个 Player 类，它是一个影片剪辑，我试图从中设置它的宽度和高度，然后让它自己添加到舞台上，但是由于某种原因，无论我做什么，this.width 都会返回 0 并设置大小仅适用于父类..为什么会这样？

```
public class Player extends MovieClip {

    public var head:MovieClip = new Head_normal_front();

    public function Player(stage:Stage){
        this.addChild(head);
        this.width = 10;
        this.height = 10;
        stage.addChild(this);

    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:29:32.600

尝试以下操作：

```
public class Player extends MovieClip {

    public var head:MovieClip = new Head_normal_front();

    public function Player(stage:Stage){
        this.addChild(head);
        this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        stage.addChild(this);
    }

    private function onAddedToStage(e:Event):void
    {
        this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        this.width = 10;
        this.height = 10;
    }
} 
```

您应该在将显示对象添加到舞台后修改它们的宽度/高度。我可能也会将 stage.addChild(this) 移到 Player 之外。

# javascript - Jquery .ready 对于部分项目无法正常工作

> ID：15164017
> 
> 赞同：0
> 
> 时间：2013-03-01T18:00:54.087
> 
> 标签：javascript, jquery, dom

这是我的功能：

```
 $().ready(function() {
    console.log('DOM is ready');
    var songtoload = $(".soundcloudid").first().html();
    console.log(songtoload)
    if (songtoload == undefined) {
      console.log('Hide the widget');
      $("#sc-widget").hide();
    }
    if (songtoload !== undefined) {
      console.log('Show the widget');
      $("#sc-widget").show();
    }
  }); 
```

出于某种原因，即使我在 Chrome 控制台中收到以下响应，songtoload 也会一直显示为“未定义”：

```
$(".soundcloudid").first().html();
"31204641" 
```

我是否错误地使用了 .ready？

**编辑** 这样做的目的是仅在播放列表部分中存在歌曲时才显示 SC 播放器小部件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:13:04.677

由于 songcloudid 对象是动态加载的...切换小部件的检查应移至动态加载这些对象的函数。：

```
function refreshPlaylist() {
    // ... some code to refresh it
    $.ajax({
        // your ajax call to refresh it
        success: function (data) {
            // ... load your data first and put it on the page
            var $songToLoad = $('.soundcloudid:first');
            if ($songToLoad.length == 1) {
                console.log($songToLoad.html())
                console.log('Show the widget');
                $("#sc-widget").show();
            }
            else {
                console.log('Hide the widget');
                $("#sc-widget").hide();
            }
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:19:35.560

`$().ready`将等到结果`$()`准备好。`$()`是一个空集。我相信你想要的是`$(document).ready(function() {...})`或者它的捷径：`$(function() {...})`

# php - 数组中的嵌套页面 - PHP

> ID：15164018
> 
> 赞同：3
> 
> 时间：2013-03-01T18:00:57.183
> 
> 标签：php, arrays

我正在为自定义 CMS 检索数据库中的所有页面。页面是嵌套的，并且有 parent_id 来查找父页面的子页面。

检索代码的代码是：

```
public function get_nested ()
{
    $pages = $this->db->get( 'pages' )->result_array();

    $array = array();
    foreach ( $pages as $page )
    {
        if ( !$page['parent_id'] )
        {
            $array[$page['id']] = $page;
        }
        else
        {
            $array[$page['parent_id']]['children'][] = $page;
        }
    }

    return $array;
} 
```

由于某种原因，else 条件不适用于 $array[$page['parent_id']]。

$pages 的转储给了我

```
Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Homepage
            [slug] => /
            [order] => 1
            [body] => Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do     eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat.
            [parent_id] => 0
        )

    [1] => Array
        (
            [id] => 3
            [title] => Contact
            [slug] => contact
            [order] => 0
            [body] => <p>This is my contact page.</p>
            [parent_id] => 4
        )

    [2] => Array
        (
            [id] => 4
            [title] => About
            [slug] => about
            [order] => 0
            [body] => <p>All about our company.</p>
            [parent_id] => 0
        )

) 
```

所以我期待联系出现在条件的其他部分。我已经尝试在条件中回显“父”和“子”并且它可以工作，但是在编写 $array[$page['parent_id']] 时什么都没有出现，甚至没有一个块说它是空的。我目前得到的回应是：

```
Array
(
    [1] => Array
        (
            [id] => 1
            [title] => Homepage
            [slug] => /
            [order] => 1
            [body] => Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do     eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat.
            [parent_id] => 0
        )

    [4] => Array
        (
            [id] => 4
            [title] => About
            [slug] => about
            [order] => 0
            [body] => <p>All about our company.</p>
            [parent_id] => 0
        )

) 
```

有谁知道为什么 $array[$page['parent_id']] 没有做任何事情？我认为它会在 [4] 内给我一个 children 数组，但那里什么都没有。我已经检查了数据库中 parent_id 的类型，它是 INT(11)，所以不应该造成问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:26:57.433

它会将孩子设置在您的数组中。但是这段代码有一个错误。当孩子出现在它的父母之前，它会先设置孩子，但是当父母出现在孩子之后，你会覆盖 $array 在以下条件下..

```
if ( !$page['parent_id'] )
{
    $array[$page['id']] = $page;
} 
```

所以它不会保留已经设置的孩子。

你必须做这样的事情：

```
if ( !$page['parent_id'] )
{
    if(!isset($array[$page['id']]))
        $array[$page['id']] = $page;
    else
       $array[$page['id']] = array_merge($page,$array[$page['id']]);
} 
```

它会保护孩子们。让我知道这是否有效。

* * *

更新：我只是尝试在上述条件下运行您的程序......它的输出如下：

```
array
  1 => 
    array
      'id' => int 1
      'title' => string 'homepage' (length=8)
      'parent_id' => int 0
  4 => 
    array
      'id' => int 4
      'title' => string 'about' (length=5)
      'parent_id' => int 0
      'children' => 
        array
          0 => 
            array
              'id' => int 3
              'title' => string 'contact' (length=7)
              'parent_id' => int 4 
```

# php - 缺少行的每月循环

> ID：15164020
> 
> 赞同：0
> 
> 时间：2013-03-01T18:01:02.880
> 
> 标签：php, sql

我正在尝试做一个循环来显示月份链接旁边的条目计数，但是由于当查询中没有条目时计数只是跳过一行，所以链接的计数不起作用。由于缺少行，我无法执行简单的数组循环，我将如何解决这个问题。这是我一直在尝试的：

查询结果

```
count   month
1   1
63  3
21  4
7   5
3   6
6   7 
```

PHP

```
// NEW MONTH COUNT
public function new_month_count() {

    $year = $this->chosen_year();
    $main_sql = $this->month_count_sql() . " AND YEAR(exp_date) = " . $year . " GROUP BY MONTH(exp_date) ORDER BY MONTH(exp_date), month";
    $res = $this->conn->query($main_sql);

    $array = array();
    $array[0] = 0;
    $i = 1;
    while ($row = $res->fetch_assoc()) {
        $array[$i] = ($row['month'] == $i ? $row['count'] : 0);
        $i += 1;
    }

    return $array;  

}

// CREATE MONTHLY LINKS
public function monthly_links() {

    $count = $this->new_month_count();

    $months = array('','January','February','March','April','May','June','July','August', 'September','October','November','December');
    for ($i=1 ; $i <= 12 ; $i++) {
        $array[] = "<a href='monthly.php?month=" . $i . "&status=3'>" . $months[$i] . " " . $this->chosen_year() . "&emsp; ( " . $count[$i] . " )</a>";
    }
    return $array;

} 
```

如果查询结果中没有跳过的月份，则输出有效，但如果跳过该行，则只有第 6 个月会显示计数为 6... 奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:18:07.370

如果我是你，我会将数组视为字典并检查结果是否包含月份的值：

```
// NEW MONTH COUNT 
```

公共函数 new_month_count() {

```
$year = $this->chosen_year();
$main_sql = $this->month_count_sql() . " AND YEAR(exp_date) = " . $year . " GROUP BY MONTH(exp_date) ORDER BY MONTH(exp_date), month";
$res = $this->conn->query($main_sql);

$array = array();

while ($row = $res->fetch_assoc()) {
    $array[$row['month']] = $row['count'];
}

return $array; 
```

}

// 创建每月链接 public functionmonthly_links() {

```
$count = $this->new_month_count();

$months = array('','January','February','March','April','May','June','July','August', 'September','October','November','December');
for ($i=1 ; $i <= 12 ; $i++) {

    $tempCount = 0;

    if(isset($count[$i]) ) {
        $tempCount = $count[$i]
    }

    $array[] = "<a href='monthly.php?month=" . $i . "&status=3'>" . $months[$i] . " " . $this->chosen_year() . "&emsp; ( " . $tempCount . " )</a>";
}
return $array; 
```

}

注意：这未经测试，但希望这会有所帮助

# c++ - 前向声明语法具有不同的行为

> ID：15164021
> 
> 赞同：3
> 
> 时间：2013-03-01T18:01:10.507
> 
> 标签：c++, forward-declaration

当向前声明一个类的成员时，你可以做`class Bar; Bar* m_bar`或者更短`class Bar* m_bar`。但是名称解析的行为似乎有所不同。

例如，这可以完美编译：

```
struct Foo {
  Foo();
  struct Bar;
  Bar* m_bar;
  struct Bar {
      int m_baz;
  };
};

Foo::Foo(){
    m_bar = new Foo::Bar;
} 
```

虽然这不是，因为编译器认为的类型`m_bar`不仅仅是：`Foo::Bar``Bar`

```
struct Foo {
  Foo();
  struct Bar* m_bar;
  struct Bar {
      int m_baz;
  };
};

Foo::Foo(){
    m_bar = new Foo::Bar;
} 
```

我的问题更多是出于好奇而不是实际问题（我知道前向声明和嵌套类是 C++ 中的一个敏感主题），但为什么编译器将第二个版本解释为全局名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:42:09.283

规范在 3.3.2p6bullet2 中说明了这一点（它实际上只是说明了将声明的名称添加到哪个范围内。如果我没记错的话，没有明确的规则表明该类是该名称空间的成员）。

我认为这是一个重要的 C 兼容性特性。如果不是这样，则该类在 C 中将是全局的，但在 C++ 中是类成员。

# functional-programming - 我应该在 OCaml 中的列表上实现 PriorityQueue（堆）吗？

> ID：15164023
> 
> 赞同：2
> 
> 时间：2013-03-01T18:01:20.243
> 
> 标签：functional-programming, ocaml

我知道这`priorityQueue`是完美的，`Array`因为它的性质已经到位。

**我应该在 OCaml 中的列表上实现 PriorityQueue（堆）吗？**

如果我这样做`List`，那么我必须删除这个`in-place`东西并想办法`every time`在每一步中创建一个新列表。所以我想知道是否值得。

* * *

其实，我对此有更深的思考。

因此，许多`fundamental`算法/数据结构是从发明的`in-place`（我使用`invented`是因为我知道许多就地可以转换为`not-in-place`）。

不过，`FL`不推荐`mutable`的东西。我的另一个问题是**如何在 和 之间进行`in-place / mutable`选择`immutable`？**或者**在 OCaml 中，我什么时候应该在 和 之间进行`list`选择`array`？**

* * *

例如，在上述`priorityqueue`情况下，如果我被要求`priorityqueue`在 OCaml 中编写 a，我应该更喜欢`array`它更自然、更容易，还是应该选择 list 以保持不变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:19:43.347

使用不可变数据在模块化和可靠性方面带来了惊人的好处。本质上，数据不可能通过其他模块的修改而损坏。模块不再需要担心其他模块，以及谁“拥有”数据。在您不再需要这样做之前，您不会意识到这是多么繁重。另一个意想不到的好处是推理代码的行为变得更加容易，因为它就像一个数学函数。我在实践中经历了这两种情况，这使我成为了 FP 的信徒。成本通常出人意料地适中，要么是一个很小的常数因子，要么可能是额外的*log n*。

不可变数据的另一个优点是持久性，即无需额外努力即可维护数据的历史状态的能力。（在不可变环境中实现*撤消操作很有趣。）*

也就是说，我有时确实使用可变数据，因为它可以更快。

作为元评论，我建议您花一些时间在 OCaml 中仅使用不可变数据。如果没有别的，它最初是一个非常有趣的谜题。在一些直接的经验之后，您将能够判断在特定情况下的权衡取舍所在。所以我建议你尝试实现一个不可变的优先级队列（或阅读其他人是如何做到的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T19:19:42.877

电池在这里有一个有效的功能堆：http: [//ocaml-batteries-team.github.com/batteries-included/hdoc2/BatHeap.html](http://ocaml-batteries-team.github.com/batteries-included/hdoc2/BatHeap.html) find_min 为 O(1) 并且所有其他堆操作都是 log(n)

我相信该实现是冈崎中描述的标准二项式堆。看看这里：[https ://github.com/ocaml-batteries-team/batteries-included/blob/master/src/batHeap.ml](https://github.com/ocaml-batteries-team/batteries-included/blob/master/src/batHeap.ml)

但是，如果您仍然坚持使用破坏性操作的堆，那么我认为核心有一个从 .NET 中删除的实现。你得仔细看看。

更重要的是，我同意 Jeffrey 的观点，并建议您首先对函数式数据结构感到非常熟悉，并且仅在绝对必要时才使用命令式数据结构。我敢肯定，以前有人向您建议过，但此类信息的最佳来源是冈崎的纯函数数据结构书。我不能高度推荐它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T22:43:43.090

二进制堆（您可能正在考虑的优先级队列的实现）通常在*动态*数组（在某些语言中称为“向量”）上实现，即您可以向其中添加元素或从中删除元素的数组。`array`不适合，因为它是固定大小的；创建时它的大小是固定的。您可以首先在 之上实现一个动态数组结构`array`，然后在其之上实现二进制堆，如果您愿意的话。

优先级队列的另一个选择是使用自平衡二叉搜索树；OCaml 标准库已经有几个使用自平衡二叉搜索树的数据结构——`Set`并且`Map`，它们被实现为不可变的功能数据结构。自平衡二叉搜索树为大多数操作提供与二叉堆相同的时间复杂度（删除最小元素和添加元素；这两种结构的时间复杂度为 O(log n)）。使最小元素达到峰值的效率较低（二进制堆为 O(1)；树为 O(log n)），但它通常不单独使用。using 的一个问题`Set`是它不允许重复元素。理想情况下，您会想要一个“multiset”，但 OCaml 在标准库中没有；如果你不关心重复元素，

我不建议`list`为此使用。

# c# - 临时为选定范围着色边框

> ID：15164024
> 
> 赞同：2
> 
> 时间：2013-03-01T18:01:25.210
> 
> 标签：c#, excel, vsto, highlighting, excel-addins

我正在制作一个 Excel 插件，并且正在使用一个输入框来允许用户选择要导出的范围。选择过程运行良好，但我希望通过在已使用范围周围实现彩色边框来显示当前使用的单元格（类似于在 Excel 中进行求和时，每个被求和的单元格都被分配了不同的颜色边框）。

我不能只应用一个新边框然后清除它，因为这不会保持文档以前的格式。

有没有人有什么建议？

以下链接的目标非常相似，但从未提供过解决方案

[VSTO：在 Excel 工作表上绘图](https://stackoverflow.com/questions/5952032/vsto-drawing-on-top-of-excel-worksheet)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:15:05.780

绘制一个位置和大小由范围决定的形状怎么样？您可以使用您选择的边框使其透明。无需自己修改单元格。

只需找到所需的坐标和大小，调用 AddShape ( [http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.shapes.addshape(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.shapes.addshape%28v=office.14%29.aspx) ) 并存储对它的引用，以便您可以在需要时将其删除。

# django - Django 与预期的模式不匹配，并在重定向时附加斜线

> ID：15164026
> 
> 赞同：1
> 
> 时间：2013-03-01T18:01:27.963
> 
> 标签：django, apache, redirect, django-views

我有一个问题，我的 Django 站点与 urls.py 中的模式不匹配：

```
url(r'label/(?P<name_value>.*)$', 'name.views.label', name='label'), 
```

当我请求网址时

```
http://<site>/name/label/foo 
```

...而不是转到视图“标签”，它 302 使用附加的斜杠重定向。

注意：这仅在我将站点移动到我们的测试环境时才有效。当我使用 Django 的内置迷你服务器（manage.py runserver）执行此操作时，它不会附加斜线，而是完全按照我的意图进入“标签”视图。

在测试环境中，我们使用的是 Django 1.3 和 Apache 2.2.8

这是 /etc/apache2/sites-available/default：

```
<VirtualHost *:80>
    ServerName ******************
    ServerAdmin ******************
    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
    ServerSignature On

    Alias /media /home/media
    <Location /media>
        SetHandler None
    </Location>

    <Directory /home/media>
        Options +FollowSymLinks
    </Directory>

    SetHandler python-program
    PythonHandler django.core.handlers.modpython
    PythonDebug On
    SetEnv DJANGO_SETTINGS_MODULE site.settings
    PythonPath "['/home/code', '/home/code/site'] + sys.path"
</VirtualHost> 
```

有人知道我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:04:03.497

[根据 Django 文档](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)，您应该将以下内容放入您的 Django 设置文件中：

```
APPEND_SLASH = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:06:36.397

尝试这个：

```
url(r'label/(?P<name_value>[\w_-]+)$', 'name.views.label', name='label'), 
```

# c# - 无法确定关系的主体结束 - 多个添加的实体可能具有相同的主键

> ID：15164028
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:01:32.253
> 
> 标签：c#, entity-framework, exception-handling, ef-code-first

套装有卡片和套装。这是我的模型中的内容，使用 EF Code First：

```
public class Set
{
    // Primitive Properties 
    [Required]
    [Key]
    public virtual int SetId { get; set; }

    // Navigation Properties 
    [Required]
    public virtual List<Set> Sets { get; set; }

    // Navigation Properties
    [ForeignKey("ParentSet")]
    public int ParentSetId { get; set; }
    public virtual Set ParentSet { get; set; }
} 
```

然后对于卡片：

```
public class Card
{
    // Primitive Properties
    [Required]
    [Key]
    public virtual int CardId { get; set; }

    // Navigation Properties
    [Required]
    [ForeignKey("ParentSet")]
    public int ParentSetId { get; set; }
    public virtual Set ParentSet { get; set; }
} 
```

我正在尝试使用包管理器控制台中的“update-database”重建数据库，这是我得到的错误：

> 无法确定“App.Core.Set_ParentSet”关系的主体端。多个添加的实体可能具有相同的主键。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:15:07.457

对我来说，在 Set 实体中有这个是没有意义的。它不能引用自身并且是必需的

```
// Navigation Properties 
[Required]
public virtual List<Set> Sets { get; set; } 
```

如果一个`Set`HAS要有一个列表`Sets`，你怎么能创建第一个 `Set`？

请注意，从错误中所写的内容来看，它与 Card 类无关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:20:08.457

如果您只是想避免`Set`使用 no新实例化的 null 错误`Sets`，那么处理此问题的正确方法是`Sets`在构造函数中实例化：

```
public class Set
{
    public Set()
    {
        Sets = new List<Set>();
    }

    ...
} 
```

# vba - 将数据重新格式化为另一个 Excel 工作表

> ID：15164034
> 
> 赞同：0
> 
> 时间：2013-03-01T18:01:56.397
> 
> 标签：vba, excel

我正在为文件夹中的多个文本文件进行主题建模。我已将最终综合文本文件中的数据导入到 Excel 中。它的格式如下。整数代表主题，小数代表该主题在该文本文件中所占的百分比。

> | C | | D | | E | | F | | 克| | H | | 我 | | Ĵ |
> | 2 | |0.85| | 1 | |0.05| | 0 | | 0.012| | 3 | | 0.004 |....
> | 0 | |0.50| | 2 | |0.31| | 3 | |0.146 | | 1 | | 0.068 | ...

主题编号需要成为列标题，百分比在下方。我需要将数据重新格式化为以下格式的另一张表：

> | D | | E | | F | | 克|
> | 0 | |1 | | 2 | | 3 | ... | n |
> | 0.012 | |0.05| | 0.85 | |0.004|
> | 0.50 | |0.068| | 0.31 | |0.146|

每个文本文件将具有相同数量的主题，但主题数量可能会有所不同。所以，这个例子有 4 个主题，但另一个可能有 20、25 等。我尝试使用 items 方法，但看起来我必须对其中的值进行硬编码。还有另一种方法可以做到这一点吗？

这是我的源数据的样子：

[Excel 中的源数据](http://dl.dropbox.com/u/39753409/sourceData.jpg)

我试过了，但一直卡住：

```
Sub Items_Ex()

Dim myColumn As Long myRow = 2
While Worksheets("Input_Format_A").Cells(2, myColumn).Value <> ""

Dim myRow As Long myRow = 3
While Worksheets("Input_Format_A").Cells(myRow, 3).Value <> ""
Dim d As Dictionary Dim a, i 'Create some variables
Set d = New Dictionary
d.Add "1", Worksheets("Input_Text").Cells(1, 8).Value
d.Add "2", Worksheets("Input_Text").Cells(1, 6).Value
d.Add "3", Worksheets("Input_Text").Cells(1, 4).Value 'Do until there are no more topics
a = d.Items 'Get the items For i = 0 To d.Count - 1 'Iterate the array
Debug.Print a(i) 'Print item Next

Debug.Print d.Item("b")
myRow = myRow + 1
Wend
Wend

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:26:21.363

*   首先，它获取源工作表（活动工作表）**的源范围内的最高主题。**
*   然后在源范围内搜索每个主题编号，找到后将**邻居复制到新工作表**

    ```
    Private Const NEW_SHEET_NAME As String = "NewSheetName"
    Private Const FIRST_TARGET_ROW = 9
    Private Const FIRST_TARGET_COLUMN = 4
    Private Const FIRST_SOURCE_CELL As String = "c2"

    Sub test()

        Dim sourceSheet As Worksheet
        Set sourceSheet = ActiveSheet
        If (sourceSheet.UsedRange Is Nothing) Then Exit Sub

        Dim sourceRange As Range
        Set sourceRange = Application.Intersect(sourceSheet.UsedRange, sourceSheet.Range(FIRST_SOURCE_CELL & ":" & sourceSheet.UsedRange.Cells.SpecialCells(xlCellTypeLastCell).Address))

        Dim maxTopic As Byte
        maxTopic = CByte(Application.WorksheetFunction.Max(sourceRange))

        Dim data() As Variant
        data = sourceRange.Value

        Dim newSheet As Worksheet
        Set newSheet = ThisWorkbook.Worksheets.Add
        newSheet.Name = NEW_SHEET_NAME

        Dim topic As Byte
        Dim i As Integer
        Dim j As Integer
        Dim item As Variant
        For topic = 0 To maxTopic
            newSheet.Cells(FIRST_TARGET_ROW, FIRST_TARGET_COLUMN + topic).Value = topic
            For i = LBound(data, 1) To UBound(data, 1)
                For j = LBound(data, 2) To UBound(data, 2)
                    item = data(i, j)
                    If (IsEmpty(item)) Then GoTo next_item
                    If (item = topic) Then
                        With newSheet
                            If (j + 1 <= UBound(data, 2)) Then
                                .Cells(.Cells(.Rows.Count, FIRST_TARGET_COLUMN + topic).End(xlUp).Row + 1, FIRST_TARGET_COLUMN + topic).Value = data(i, j + 1)
                            End If
                        End With
                    End If
    next_item:
                Next j
            Next i
        Next topic

    End Sub 
    ```

# python - 安装 Python 模块

> ID：15164035
> 
> 赞同：4
> 
> 时间：2013-03-01T18:02:01.357
> 
> 标签：python, module, installation

我一直自学如何编写程序，几乎没有受过正规教育，所以我总觉得我错过了正规教育可能提供的一些东西。在这种情况下，我想为 Python 安装一个新模块。它是[pyhk](http://www.schurpf.com/?wpdmact=process&did=MS5ob3RsaW5r)热键模块。我正在帮助同事使用热键。模块的问题是，它们让我完全不知道如何在我的计算机上安装以供使用。

我很少得到可执行文件，这很容易，但有时我认为您必须复制和粘贴 .dll 或运行命令提示符并导入 .dll 但我真的不知道该怎么做，我只是觉得奇怪的是很少有文档可以帮助解决这个问题....因此我相信我可能会遗漏一些东西。谁能帮我解释一下如何安装python模块？

谢谢，迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:24:24.207

让设置工具为您担心目录和 python 路径。避免手工复制，在python中以正确的方式做事实际上比即兴创作和手工复制要简单。

首先，如何使用 setuptools 改进这个有用的模块？作者帮助你提供了有用的代码，现在你也可以通过帮助他打包来回馈！

创建一个更好的目录结构，将单个源文件放在一个模块中，以尽量减少命名空间冲突的机会，并创建 setup.py

所有你需要的都可以在这里找到：http: [//pythonhosted.org/an_example_pypi_project/setuptools.html](http://pythonhosted.org/an_example_pypi_project/setuptools.html)

下面是一个例子：

```
import os
from setuptools import setup

setup(
    name = "pyhk",
    version = "0.0.4",
    author = "Someone",
    author_email = "someone@gmail.com",
    description = ("Some desc"),
    license = "Some license",
    packages=['pyhk'],
    classifiers=[
        "Development Status :: 3 - Alpha",
        "Topic :: Utilities",
    ],
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T18:04:33.497

**更新**

首先安装[pywin32](http://sourceforge.net/projects/pywin32/files/pywin32/)和[pyHook](http://sourceforge.net/projects/pyhook/files/pyhook/) ...

* * *

1.  提取档案的内容
2.  将文件复制`pyhk.py`到您的 python`Lib`目录。

在 Windows 中，`Lib`目录将是

```
<PATH TO PYTHON>\Lib 
```

例子：

```
c:\python\Lib 
```

在 Linux 中，它通常位于

```
/usr/lib/python2.7/ 
```

# java - 单击按钮后如何切换活动/布局？

> ID：15164037
> 
> 赞同：0
> 
> 时间：2013-03-01T18:02:05.490
> 
> 标签：java, android, android-layout, adt, android-menu

我正在尝试创建在单击它们后将切换到不同布局/活动的按钮。有人可以帮忙吗？

```
package com.example.darsh.popup;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.WindowManager;
import android.widget.PopupWindow;
import android.widget.Toast;

public class Main extends Activity {

private LayoutInflater inflater;
private PopupWindow pw;
private View popupView;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
popupView = inflater.inflate(R.layout.menu_layout, null, false);
}

public void showPopup(View view) {
pw = new PopupWindow(getApplicationContext());
pw.setTouchable(true);
pw.setFocusable(true);
pw.setOutsideTouchable(true);
pw.setTouchInterceptor(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
            pw.dismiss();

            return true;
        }

        return false;
    }
});

pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
pw.setOutsideTouchable(false);
pw.setContentView(popupView);
pw.showAsDropDown(view, 0, 0);

}

public void clickOne(View view) {
pw.dismiss();
Toast.makeText(getBaseContext(), "Link New User", Toast.LENGTH_SHORT)
        .show();

}

public void clickTwo(View view) {

pw.dismiss();
Toast.makeText(getBaseContext(), "Edit Core Device 1", Toast.LENGTH_SHORT)
        .show();
}

public void clickThree(View view) {
pw.dismiss();
Toast.makeText(getBaseContext(), "Delete Core Device 1", Toast.LENGTH_SHORT)
        .show();
} 
```

我需要做的就是 `LinkMenu.Java/linkmenu.xml`在用户单击*“链接新用户”*、*“编辑核心设备 1”*或*“删除核心设备 1”*后切换到，但我不知道要在当前源代码中添加什么来这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:04:12.093

使用 Intent 切换到不同的活动。

```
Intent intent = new Intent(Context, YourClass.class);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:20:01.600

活动主.xml：

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="sendMessage"
    android:text="@string/button_send" /> 
```

MainActivity.java

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString()
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

按钮点击后调用`sendMessage(View view)`函数。该函数获取文本字段值并将其“映射”到共享内存中。函数的最后一行创建并启动新活动，旧活动不再可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:11:28.820

嗨试试下面的代码：

```
 Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(){    
    public void onCLick(View v){
        Intent i =new Intent(YouCurrentClass.this, NameOfsecondactivity.class);
        startActivity(i);
      }
    }; 
```

# knockout.js - 阻止 KnockoutJS 使用 jQuery.tmpl

> ID：15164052
> 
> 赞同：4
> 
> 时间：2013-03-01T18:03:02.147
> 
> 标签：knockout.js, jquery-templates

我正在将 Knockout 添加到大型应用程序的特定部分。其他部分使用 jQuery 模板（并且它嵌入在基本 JS 文件中），因此它位于全局 jQuery 对象上，我无法删除它。

`foreach`在模板中使用绑定时遇到以下错误消息：

```
This template engine does not support the 'foreach' binding within its templates 
```

使用带有 Knockout 的 jQuery 模板引擎时，这似乎是一个问题。有什么方法可以让 Knockout 使用其默认模板引擎而不是 jQuery 模板？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T18:11:30.307

您可以`ko.setTemplateEngine(new ko.nativeTemplateEngine());`在调用之前使用`ko.applyBindings`。

# c++ - 每次我重新运行项目时，Visual Studio 2012 LNK1168

> ID：15164060
> 
> 赞同：0
> 
> 时间：2013-03-01T18:03:36.487
> 
> 标签：c++, visual-studio, linker-errors

假设我有一个项目 X。在它上面按 CTRL-F5 无需调试即可运行，一切正常，但是当我关闭项目时（通过输入，通过 ESC 或使用叉号）它仍保留在进程中，我无法第二次运行它，因为我收到 LNK1168 错误，唯一的解决方案是每次尝试运行项目时手动关闭进程。我正在使用最新版本的 Avast，我尝试在我的项目文件夹中添加一个例外，并且我正在使用 Windows 7 和 Visual Studio 2012 express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:14:14.273

尝试下载`handle.exe`并检查是什么阻止您的程序结束。

[处理下载](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)。

只需打开管理员命令提示符并运行

```
handle.exe processname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T01:00:51.450

检查以确保您没有在后台运行该程序。找到打开的控制台窗口并关闭它。

如果这不起作用，请尝试启用“应用程序体验”服务。

# sql - 仅当同一记录在单独的表中具有其他事件时，才更新表中的列以获取记录

> ID：15164061
> 
> 赞同：0
> 
> 时间：2013-03-01T18:03:36.700
> 
> 标签：sql, sql-server, sql-server-2012

仅当同一记录在单独的表中具有其他事件时，我才想更新表中的列以获取记录。这是我到目前为止所拥有的：

> t1 - 表 1 t2 - 表 2 c* - 通用列

```
Update t1 
Set c ='6'
From t1
Inner Join t2 on t1.c = t2.c 
Where t2.c1 = '339' and t2.c2 ='0' 
```

基本上，我想知道 where 子句中的细节是否足以检查 t2 中与 t1 内的记录相对应的事件。希望这是有道理的。如果我解释得不好，请随时告诉我，我倾向于认为每个人都在我的脑海中并且知道我的想法，所以我可能会遗漏一些重要的细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:11:01.847

既然`t2.c = '339' and t2.c ='0'`不会是真的，我猜你在找`IN`或`OR` *不* `AND`找；

```
Update t1 
Set t1.c ='6'
From t1
Inner Join t2 on t1.c = t2.c 
Where t2.c in ('339','0') 
```

或者（在你更正之后）

```
Update t1 
Set t1.c ='6'
From t1
Inner Join t2 on t1.c = t2.c 
Where t2.c1 ='339' and t2.c2 ='0' 
```

# xcode - 在 xcode 的详细视图中执行从带有搜索栏的表到 UIImage 的 Segue

> ID：15164064
> 
> 赞同：1
> 
> 时间：2013-03-01T18:03:55.650
> 
> 标签：xcode, uiimage, segue, searchbar

我对 xcode 很陌生，所以我在执行此任务时遇到了麻烦。我创建了一个带有搜索栏的表格，其名称被传递到带有 UILabel 的详细视图，该 UILabel 显示单击的单元格的相应名称。搜索栏有效并过滤结果。我使用本教程来帮助我：

[http://www.appcoda.com/how-to-add-search-bar-uitableview/](http://www.appcoda.com/how-to-add-search-bar-uitableview/)

现在我想在详细视图中而不是 UILabel 中有一个图像，它对应于每个单元格，但我无法弄清楚如何做到这一点。这是我正在使用的代码：

表视图控制器.h：

```
@interface SearchViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource>
@property (nonatomic, strong) IBOutlet UITableView *tableView; 
```

表视图控制器.m：

```
@interface SearchViewController ()

@end

@implementation SearchViewController {
    NSArray *cards;
    NSArray *searchResults;}

@synthesize tableView = _tableView;
-(void)viewDidLoad
{
    [super viewDidLoad];
    cards = [NSArray arrayWithObjects:
             @"Snivy",
             @"Servine",
             @"Serperior",
             @"Tepig",
             @"Pignite",
             @"Emboar",
             @"Oshawott",
             @"Dewott",
             @"Samurott", nil];

}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    searchResults = [cards filteredArrayUsingPredicate:resultPredicate];}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString
                               scope:[[self.searchDisplayController.searchBar scopeButtonTitles]
                                      objectAtIndex:[self.searchDisplayController.searchBar
                                                     selectedScopeButtonIndex]]];

    return YES;
}
- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [searchResults count];

    } else {
        return [cards count];
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SearchCardCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [cards objectAtIndex:indexPath.row];
    }

    return cell;}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"ShowSearchCard"]) {
        SearchCardViewController *destViewController = segue.destinationViewController;

        NSIndexPath *indexPath = nil;

        if ([self.searchDisplayController isActive]) {
            indexPath = [self.searchDisplayController.searchResultsTableView indexPathForSelectedRow];
            destViewController.cardName = [searchResults objectAtIndex:indexPath.row];

        } else {
            indexPath = [self.tableView indexPathForSelectedRow];
            destViewController.cardName = [cards objectAtIndex:indexPath.row];
        }
    }

}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        [self performSegueWithIdentifier: @"ShowSearchCard" sender: self];
    }
} 
```

UIViewController.h：

```
@property (strong, nonatomic) IBOutlet UILabel *cardLabel;
@property (strong, nonatomic) NSString *cardName;
@property (strong, nonatomic) NSArray *searchCardDetail; 
```

UIViewController.m:

```
@implementation SearchCardViewController

@synthesize cardLabel;
@synthesize cardName;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    cardLabel.text = cardName;

    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {

    [super viewDidUnload];
} 
```

所以详细地说，“卡片”是表中的名称。现在，它转到卡片名称的 UILabel ，我想要它，在搜索时转到常规表和过滤表中的卡片的相应图像。感谢您的时间和帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:19:03.940

我不确定我是否正确理解了您的问题，但我会使用以下三种方法之一：

第一：最简单的方法是遵循[本教程](http://www.appcoda.com/improve-detail-view-controller-storyboard-segue/)

第二：创建您将使用的自定义单元格，而不是默认单元格。为了让你走上正轨，你可以查看这个很好的教程[How to create custom cell](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)。在您的自定义单元格中，您将声明额外的变量 UIImage，它将显示或不会显示在您的表格视图中。重点是，您可以在*prepareForSegue*方法中将其发送到您的 detailViewController。

第三：创建*NSDictionary*，您将在其中为键（项目名称）提供值（项目的图像）。然后，将它在*prepareForSegue*中传递给您的 NSDictionary 中的 detailViewController。之后，只需根据您收到的项目名称将您的 UIImage 分配给您 detailViewController 中的 UIImageView。（所以你仍然会发送 name 然后 detailImage = [yourdict objectForKey:myItemName];）

我在我的 Windows 笔记本电脑上写这个，因为我现在不在工作（那是我的 mac mini 的地方），所以我的回答中可能有一些语法错误:)

# ios - iPad App 在左侧横向打开时添加边距，而不是在横向右侧打开

> ID：15164066
> 
> 赞同：4
> 
> 时间：2013-03-01T18:04:11.957
> 
> 标签：ios, ipad, cocoa-touch, uiviewcontroller, uikit

我在横向 iPad 应用程序中遇到了一个非常奇怪的布局错误。

当应用程序以横向启动时，它会启动并完美运行。但是，当以横向左侧开始时，主视图顶部会添加 20 像素的边距。

这个应用程序的设计在顶部有一个标题栏，在底部有一个导航栏（两者都只是带有几个 UILabels/UIButtons 的 UIViews）。当您在有问题的横向左模式下启动应用程序并切换到横向右时，顶部和底部栏会在它们应该定位的位置*上方*移动 20 像素 - 即顶部栏位于状态栏下方，而底栏浮在框架底部上方 20 像素处。

这真的很奇怪。正如我所说，如果您以横向打开它，它会*完美运行。*

有人有什么想法吗？看到这个错误了吗？

我正在使用 iOS SDK 6.1 和 Xcode 4.6

**编辑[更多细节]**

我添加的一些日志中的一些可能的线索——主视图的帧为 (0,0,1024,748)，而对 [[UIScreen mainScreen] applicationFrame] 的调用返回的帧为 (20,0,748,1024)，是肖像。当然很好奇，但不一定能解释启动状态之间的不一致——错误状态和功能模式之间的日志是相同的。

**编辑[情节变厚]**

所以我检查了所有的视图框架，并创建了一个可重现的错误。

应用程序中有一个全屏“幻灯片”模式，其中隐藏了状态栏。当应用程序以这种全屏模式旋转时，我能够旋转 20px 间隙错误。

所以过程是：

-应用程序正常工作，旋转正常 -进入全屏显示，显示正常 -全屏旋转，布局移动 20px -关闭幻灯片，布局保持移动 -第一次旋转时，布局恢复正常

到达那里......有没有类似于 setWantsFullScreenLayout 的东西我需要在这里调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:51:33.753

20 像素是状态栏的高度，相对于旋转的 20 像素偏移几乎总是与（根）视图控制器的框架有关。尝试将根视图控制器的视图框架设置为具有`0,0`原点。

# java - 字节缓冲区视图

> ID：15164068
> 
> 赞同：1
> 
> 时间：2013-03-01T18:04:15.053
> 
> 标签：java, nio

您是否知道 java.nio.ByteBuffer 的任何实现，它包装了 ByteBuffer 实例数组，使它们看起来像单个实例，而无需将字节复制到新缓冲区中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:24:05.577

java.nio 中不存在实现，但几乎所有通道都实现`GatheringByteChannel`并且`ScatteringByteChannel`可以直接读取和写入 ByteBuffers 数组。

[`GatheringByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/GatheringByteChannel.html)：

> `long write(ByteBuffer[] srcs)`
> 
> 从给定的缓冲区将字节序列写入此通道。

和[`ScatteringByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/ScatteringByteChannel.html)：

> 长`read(ByteBuffer[] dsts)`
> 
> 从此通道中读取一个字节序列到给定的缓冲区中。

上述方法也有部分版本，请参见上面的链接。

NIO 的重点是尽可能降低开销，并且这种方式（与使用单独的对象包装缓冲区相反）不会产生比简单数组更多的开销。我认为你的是这个及其实现的预期用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:31:16.863

标准 Java API 中没有一个。Grizzly NIO 框架有一个 CompositeBuffer，但它使用它自己的缓冲区作为包装器：

```
import org.glassfish.grizzly.Buffer;
import org.glassfish.grizzly.memory.BuffersBuffer;
import org.glassfish.grizzly.memory.CompositeBuffer;    

....

ByteBuffer byteBuffer = ....;
HeapMemoryManager mm = new HeapMemoryManager();
CompositeBuffer buffer = BuffersBuffer.create();
Buffer b = mm.wrap(byteBuffer);
buffer.append(b); 
```

# javascript - 放大/动画地图或更改 viewBox

> ID：15164069
> 
> 赞同：0
> 
> 时间：2013-03-01T18:04:20.397
> 
> 标签：javascript, svg, d3.js

我有这个[http://bl.ocks.org/nkhine/raw/3150901/](http://bl.ocks.org/nkhine/raw/3150901/)如果你点击一个国家，代码会重新渲染地图（只有美国、英国和阿富汗的地形文件存在）

我被困在如何为“国家”设置动画，使其“移动”到屏幕的中心，并使地图适合用户的视口？

我正在做的是淡出然后删除 id='countries' [https://gist.github.com/nkhine/3150901#file-client-js-L120](https://gist.github.com/nkhine/3150901#file-client-js-L120)的 'svg g' 元素，然后添加 id=我根据提供的拓扑文件在其中绘制国家/地区的“国家/地区”。

我试图删除整个 svg 并重新创建它，但这并不“感觉”是正确的方法！

在不必重绘整个 SVG 的情况下更改 viewBox 的正确方法是什么？

非常感谢任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:38:41.400

我相信您需要更改 .on("click") 函数以使用已点击国家的质心来翻译图像，请参见此处的 d3 示例[http://bl.ocks.org/mbostock/2206590](http://bl.ocks.org/mbostock/2206590)。

# java - 遍历集合并继续

> ID：15164074
> 
> 赞同：3
> 
> 时间：2013-03-01T18:04:44.283
> 
> 标签：java, iterator

我遍历一个集合。如果未设置 CarDetail 的值，我希望循环从下一个 CarDetail 重新开始。但不知何故，我的继续不起作用。是否可以将 continue 与迭代器一起使用？

```
final Set<CarDetail> tmpDetail = new HashSet<CarDetail>(details);
   for(Iterator<CarDetail> iter = tmpDetail.iterator(); iter.hasNext();){                       
      CarDetail detail = iter.next();
      if(detail.getBack() == null){
      continue;
   }
   ... do something
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:10:48.523

将 continue 与迭代器一起使用并没有错。您甚至可以将其与增强的 for 循环一起使用（对于每个循环）：

```
final Set<CarDetail> tmpDetail = new HashSet<CarDetail>(details);
for(CarDetail detail : tmpDetail) {                           
      if(detail.getBack() == null) {
         System.out.println("Skipping over " + detail.toString() );
         continue;
      }
      System.out.println("Processing car detail: " + detail.toString() );
     //... do something
} 
```

您如何确定您发布的代码中忽略了 continue 语句？通过一些小的 println 语句，我们可以验证 continue 是否按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:12:08.800

如果您愿意，您可以直接遍历 a`Set`而无需在循环中`Iterator`使用 and 。`continue`这是一个例子：

```
Set<Integer> intSet = new HashSet<Integer>();
intSet.add(1);intSet.add(2);intSet.add(3);

for(Integer setElem : intSet)
{
    if(setElem.intValue() == 2) continue;

    System.out.println("Current set element is " + setElem);
} 
```

仅打印

```
Current set element is 1
Current set element is 3 
```

因为`continue`如果是 2，则存在 a。由于无法保证 a 中的排序`Set`，因此输出也可能是

```
Current set element is 3
Current set element is 1 
```

# android - 无法转储本机库的符号：loadDataForPdb 和 loadDataFromExe 失败

> ID：15164080
> 
> 赞同：0
> 
> 时间：2013-03-01T18:05:18.547
> 
> 标签：android, google-breakpad

我复制了适用于 Android 的 Google breakpad 示例并将其添加到我的项目中。我首先遇到了获取 minidump 的问题（我触发了 SIGSEGV 错误，但我的 SD 卡上没有写入任何内容）。我终于设法得到了一些小型转储（我真的不知道如何，但这不是我的主要问题）。

我的问题是我无法转储本机库的符号，它显示以下错误消息：

```
dump_syms.exe libcppinterface.so > libcppinterface.so.sym
loadDataForPdb and loadDataFromExe failed
Open failed 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:25:26.723

Breakpad 工具对跨平台不是很友好。您需要在 Linux 机器上构建 dump_syms 以获得可以读取 ELF/DWARF 并从您的 Android 二进制文件生成调试符号的 dump_syms 二进制文件。Windows dump_syms.exe 仅用于从 MSVC 生成的 PDB 文件中转储符号。

# rest - Apache Wink 客户端 - 使用表单身份验证测试 REST 服务

> ID：15164081
> 
> 赞同：1
> 
> 时间：2013-03-01T18:05:22.283
> 
> 标签：rest, jax-rs, junit4, functional-testing, apache-wink

我正在尝试使用 Wink RestClient 对 Rest 服务端点进行功能测试。我使用模拟进行单元测试，但我想将其作为端点消费者进行功能测试。

我知道有些人会反对我在使用基于表单的身份验证时将其称为 REST 端点，但这是我目前的架构。

我要测试的大部分资源都是受保护的资源，并且应用程序（在 Tomcat6 上运行）受表单身份验证的保护。（如下面的 web.xml 片段）。

到目前为止，我尝试的是对未受保护的资源进行初始调用，以获取包含 JSESSIONID 的 set-cookie 标头，并在后续请求中的标头（通过 Resource.cookie() ）中使用该 JSESSIONID，但是不结果子。

```
web.xml

<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.html</form-login-page>
        <form-error-page>/login.html?failure=true</form-error-page>
    </form-login-config>
</login-config> 
```

我的 Wink RestClient 代码如下所示。所有响应都是 200，但我注意到两件事是对 /j_security_check/ 的调用的响应不包括 jsessionid cookie，对受保护资源的调用说我登录失败。调用 j_security_check 的有效负载是直接从拦截的先前成功的浏览器请求中捕获的。

```
ClientConfig config = new ClientConfig();
config.setBypassHostnameVerification(true);
RestClient restClient = new RestClient(config);

Resource unprotectedResource = restClient.resource( BASE_URL + "/");
unprotectedResource.header( "Accept", "*/*" );
ClientResponse clientResponse = unprotectedResource.get();
String response = clientResponse.getEntity(String.class);

// get jSession ID
String jSessionId = clientResponse.getHeaders().get("set-cookie").get(0);
jSessionId = jSessionId.split(";")[0];
System.out.println(jSessionId);

// create a request to login via j_security_check
Resource loginResource = restClient.resource(BASE_URL + "/j_security_check/");
loginResource.accept("text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
loginResource.header("referer", "http://localhost:8080/contextroot/");
loginResource.cookie( jSessionId );
loginResource.header("Connection", "keep-alive");
loginResource.header("Content-Type", "application/x-www-form-urlencoded");
loginResource.header("Content-Length", "41");

ClientResponse loginResponse = loginResource.post("j_username=*****&j_password=*************");

/*  the loginResponse, as this point, does not have the jsessionid cookie, my browser client does */

Resource protectedResource = restClient.resource(BASE_URL + "/protected/test/");
systemResource.accept("application/json");
systemResource.cookie( jSessionId );

ClientResponse systemResponse = systemResource.get();
response = clientResponse.getEntity(String.class);
System.out.println(response); 
```

任何有关使用 Wink RestClient 行使受表单身份验证保护的资源的想法或经验将不胜感激。我想我会接受其他框架，我听说过 REST-Assured 和其他框架，但是由于应用程序使用 Wink 并且 RestClient 似乎为我提供了我需要的东西，我想我会坚持下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:13:47.537

发现了问题，解决了

j_security_check 使用#302/redirect 响应我的 POST 请求（进行身份验证）。紧随其后的是 wink RestClient，但我的 JSESSIONID cookie 没有附加到它上面。这导致响应（来自重定向的 URL）包含一个带有新标头的 set-cookie 标头。我随后的调用（我从第一次调用中插入了 JSESSIONID）失败了，因为该 cookie 已过期。我需要做的就是指示 RestClient 不要遵循重定向。如果重定向是必要的，我会自己构建它，包含适当的 cookie。

Chromium 和 Firefox 将 cookie 从原始请求传送到重定向请求，所以一切都很好。

这是一些对我有用的代码，使用来自 Apache Wink 项目（和 Jackson ObjectMapper）的 JUnit4、RestClient

```
@Test
public void testGenerateZipEntryName() throws JsonGenerationException, JsonMappingException, IOException
{
    final ObjectMapper mapper = new ObjectMapper();

    final String BASE_URL = "http://localhost:8080/rest";

    // Configure the Rest client
    ClientConfig config = new ClientConfig();
    config.proxyHost("localhost");    // helpful when sniffing traffic
    config.proxyPort(50080);          // helpful when sniffing traffic
    config.followRedirects(false);    // This is KEY for form auth
    RestClient restClient = new RestClient(config);

    // Get an unprotected resource -- to get a JSESSIONID
    Resource resource = restClient.resource( BASE_URL + "/");
    resource.header( "Accept", "*/*" );
    ClientResponse response = resource.get();
    // extract the jSession ID, in a brittle and ugly way
    String jSessId = response.getHeaders().get("set-cookie").get(0).split(";")[0].split("=")[1];

    // Get the login resource *j_security_check*
    resource = restClient.resource(BASE_URL + "/j_security_check");
    resource.cookie("j_username_tmp=admin; j_password_tmp=; JSESSIONID=" + jSessId);
    resource.header("Content-Type", "application/x-www-form-urlencoded");
    resource.header("Content-Length", "41");

    // Verify that login resource redirects us
    response = resource.post("j_username=admin&j_password=***********");
    assertTrue( response.getStatusCode() == 302 );

    // Grab a public resource
    resource = restClient.resource(BASE_URL + "/");
    resource.cookie("j_username_tmp=admin; j_password_tmp=; JSESSIONID=" + jSessId);
    response = resource.get();
    // verify status of response
    assertTrue( response.getStatusCode() == 200 );

    // Grab a protected resource
    resource = restClient.resource(BASE_URL + "/rest/system");
    resource.cookie("j_username_tmp=admin; j_password_tmp=; JSESSIONID=" + jSessId);

    // Verify resource returned OK
    response = resource.contentType("application/json").accept("*/*").get();
    assertTrue( response.getStatusCode() == 200 );

    // Deserialize body of protected response into domain object for further testing 
    MyObj myObj = mapper.readValue(response.getEntity(String.class), MyObj.class );
    assertTrue( myObj.customerArchived() == false );
} 
```

# mysql - 插入信息表 (column_Name) 从 Table2 中选择 column_name #1062 - 键 2 的重复条目“”

> ID：15164084
> 
> 赞同：0
> 
> 时间：2013-03-01T18:05:25.790
> 
> 标签：mysql, sql, database

好的，所以这个问题已经在这里被问死了，但我仍然没有找到实际的 MySql 语句答案。只是它不起作用的原因很多。对于对 SQL 没有帮助但对我没有帮助的新手，我需要一个示例。这就是我所拥有的：

```
**Table One**

    key             bigint(4)               UNSIGNED                     auto_increment                         
    username        varchar(10)             utf8_general_ci                                          
    score           bigint(5)               UNSIGNED                                                
    password        varchar(60)             utf8_general_ci              NULL   

PRIMARY      PRIMARY 15      key
username     UNIQUE  15      username

**Table Two**
key             bigint(4)                               No      auto_increment                          
username        varchar(10)     utf8_general_ci         No                                   
score_old       bigint(11)                              No                                  
score_high      bigint(11)                              No  .

PRIMARY          PRIMARY    16   key
username         UNIQUE     16   username 
```

两个表中都有数据。我想用表一的分数列填充表二的 score_high。当我尝试

```
INSERT INTO Table2( score_high ) 
SELECT score
FROM Table1 
```

我明白了

**> > MySQL 说：**

> **> #1062 - 键 2 的重复条目 ''**

一个清晰的，外行的，解释将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:32:02.120

让我们从

```
INSERT INTO Table2( score_high ) 
SELECT score
FROM Table1 
```

您正在将 Table1 中的分数插入 Table2，仅填充 score_high 列

# 问题：什么独特的专栏阻碍了？

看table2的定义。它有两个唯一键

*   首要的关键
*   用户名

由于 PRIMARY KEY 是一个 auto_increment 列，因此排除了这一点。

用户名上的唯一键如何妨碍？

当您只在 score_high 列中插入一个分数（比如 100,000）时，用户名的值是多少？很可能是一个空白字段。一行可以使用 NULL 用户名进入。当您将另一个分数放入表中时尝试插入另一行时会发生什么？另一行带有空白用户名。table2 中不能同时存在用户名为空的两行。

回顾 MySQL 所说的

> 1062 - 键 2 的重复条目 ''

键 2 是用户名上的唯一键

条目是 ''（一个空字符串）

谜团解开（[QED](http://en.wikipedia.org/wiki/Q.E.D.)）

# 问题：如何填充`table2`？

```
INSERT INTO Table2( username,score_high ) 
SELECT username,score
FROM Table1 
```

这应该可以正常工作，因为用户名在 table1 中是唯一的。table1 中的行应该进入 table2 没有任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:13:35.527

```
UPDATE Smuckers_Users SET score_high = (SELECT score FROM Smuckers_Info WHERE Smuckers_Users.username = Smuckers_Info.username) 
```

# c - 从终端设置 Ad-hoc 网络时遇到问题

> ID：15164087
> 
> 赞同：1
> 
> 时间：2013-03-01T18:05:49.347
> 
> 标签：c, linux, sockets, networking, adhoc

我正在尝试连接到我在无线 ad-hoc 网络上的计算机上以 C 语言运行的服务器。问题是当我使用 telnet 从网络上的另一台计算机连接时，它不起作用。我可以 ping IP 地址 (192.168.0.1) 但使用：

```
 telnet 192.168.0.1 8889 
```

导致错误“连接被拒绝”（服务器正在侦听我已验证的端口 8889）。

我进行了进一步调查，发现使用网络管理器设置我的 ad-hoc 网络可以解决这个问题。目前我正在通过终端设置我的 ad-hoc 网络，我想保持这种方式。正在使用以下命令设置 ad-hoc 网络：

```
 sudo service network-manager stop
 sudo iwconfig wlan0 mode ad-hoc essid 'rgd' channel AUTO key OFF 
```

wlan0 是我的无线设备。我不确定为什么会发生此错误。有人可以帮我吗？

编辑：@Huygens netstat -tlpen 显示以下内容

```
Proto Recv-Q Send-Q  Local Address  Foreign Address  State    User  Inode   PID/Program name

tcp     0      0     0.0.0.0:48727      0.0.0.0:*    LISTEN   1000  302920      13098/socket    
tcp     0      0     127.0.0.1:631      0.0.0.0:*    LISTEN      0  273220      933/cupsd     
tcp     0      0     0.0.0.0:54880      0.0.0.0:*    LISTEN   1000  304089      13148/socket    
tcp     0      0     127.0.1.1:53       0.0.0.0:*    LISTEN      0  12886       1606/dnsmasq    
tcp6    0      0        ::1:631           :::*       LISTEN      0  273219      933/cupsd       
tcp6    0      0        ::1:54822         :::*       LISTEN   1000  46736       3297/java 
```

由于某种原因，我在这里看不到我的服务器:(

我在此处添加了正在运行的服务器代码以供进一步参考：

```
#include<stdio.h>
#include<string.h>  //strlen
#include<sys/socket.h>
#include<arpa/inet.h>   //inet_addr
#include<unistd.h>  //write

int main(int argc , char *argv[])
{
int socket_desc , new_socket , c;
struct sockaddr_in server , client;
char *message;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1) 
{
printf("Could not create socket");
}

//Prepare the sockaddr_in structure
server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8889 );

//Bind
if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
{
puts("bind failed");
return 1;
}
puts("bind done");

//Listen
listen(socket_desc , 3);

//Accept and incoming connection
puts("Waiting for incoming connections...");
c = sizeof(struct sockaddr_in);
new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c);
if (new_socket<0)
{
  perror("accept failed");
  return 1;
}

puts("Connection accepted");

//Reply to the client
message = "Hello Client , I have received your connection. But I have to go now, bye\n";
write(new_socket , message , strlen(message));

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:06:22.710

我认为你必须按照正确的顺序做事。

首先，您应该设置网络接口。完成后，您应该检查您是否可以 ping 您的网络接口，并且如果您有防火墙，它将允许端口 8889 上的传入连接。查看您是否激活了防火墙：`iptables -L`如果有任何规则，那么您有防火墙. 此外，请确保每个网络接口都有预期的 IP 地址：`ifconfig`.

出于测试目的并且如果您在安全的网络上，您可以暂时禁用防火墙：（`iptables -F`如果您需要超级用户权限，请在它之前使用 sudo）。

然后，您可以启动您的服务器。检查它是否已启动并运行（通过`ps wux`）并检查它是否处于侦听模式通过`netstat -tlpen`。

现在尝试通过 telnet 访问它`telnet 192.168.0.1 8889`。

PS：当然，您的 ad-hoc 网络应该与本地网络位于不同的子网中。因此，如果您同时使用以太网（有线）网络和 ad-hoc wifi 网络，则每个网络都应位于不同的子网中：例如 192.168.0.1/24 和 192.168.1.1/24。

# javascript - 无法设置未定义的属性“new_form”

> ID：15164088
> 
> 赞同：0
> 
> 时间：2013-03-01T18:05:50.407
> 
> 标签：javascript, backbone.js

我在使用 Treehouse 的 Backbone.js 教程时遇到问题。这是我的代码：

```
var NotesApp = (function () {
    var App = {
        stores: {}
    }

    App.stores.notes = new Store('notes');
    // Note Model
    var Note = Backbone.Model.extend({
        //Local Storage
        localStorage: App.stores.notes,

        initialize: function () {
            if (!this.get('title')) {
                this.set({
                    title: "Note at " + Date()
                })
            };

            if (!this.get('body')) {
                this.set({
                    body: "No Body"
                })
            };
        }

    })

    //Views
    var NewFormView = Backbone.View.extend({
        events: {
            "submit form": "createNote"
        },

        createNote: function (e) {
            var attrs = this.getAttributes(),
                note = new Note();

            note.set(attrs);
            note.save();
        },

        getAttributes: function () {
            return {
                title: this.$('form [name=title]').val(),
                body: this.$('form [name=body]').val()
            }
        }

    });

    window.Note = Note;

    $(document).ready(function () {

        App.views.new_form = new NewFormView({
            el: $('#new')
        });

    })

    return App
})(); 
```

我得到了错误：`Cannot set property 'new_form' of undefined`

我试图返回并尽可能接近地复制代码，但我仍然无法让它工作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:07:02.187

`stores: {}`添加后`, views: {}`。

您需要一个对象来附加您的视图 - JavaScript 没有活力

# oauth - 是雅虎！PlaceFinder 是 OAuth 的合适用例吗？

> ID：15164092
> 
> 赞同：2
> 
> 时间：2013-03-01T18:06:16.380
> 
> 标签：oauth, geolocation, dotnetopenauth, yahoo-api, yahoo-boss-api

`<context>`我昨天很沮丧，并发布了一个火焰问题，该问题很快（并且适当地）被我的 SO 同伙关闭并删除。雅虎！关闭了其标准 PlaceFinder API 端点并用付费服务取而代之。不过，这并不是让我感到沮丧的部分，主要是因为他们将访问模型更改为需要 OAuth。我的问题的关闭者之一评论了一些内容：

> 你没有关注你所依赖的 API 的弃用，OAuth 对用户来说更好，接受吧。

虽然我可以通过再次指责雅虎在去年 10 月 / 11 月首次宣布弃用 API 时破坏链接来争论我的 API 观看的事实，但我认为尝试将其变成智能的会更有成效问题。`</context>`

我使用过 OAuth。我喜欢 OAuth。它不仅可以让您验证用户身份并简化应用程序的登录，还可以让您请求授权以从其他应用程序访问该用户的数据。但 PlaceFinder 数据不是私人用户数据。它适用于每个人都可以共享的已知地名和全球标识符 (WOE ID)。

今天早上我给了雅虎！BOSS GEO 我的信用卡信息，并开始使用 OAuth API 消费者进行测试。我从过去使用过的[DotNetOpenAuth开始。](http://www.dotnetopenauth.net/)我通读了 Yahoo! 的[OAuth 指南](http://developer.yahoo.com/oauth/guide/)`DotNetOpenAuth.OAuth.ServiceProviderDescription`，并使用 Yahoo! 的所有 OAuth 6.1、6.2 和 6.3 端点 URL创建了一个实例。然后我开始尝试弄清楚如何使用`DotNetOpenAuth.OAuth.WebConsumer`PlaceFinder API 并开始向 Yahoo! 捐款。

但它没有用。我必须克服许多认知失调，最后，要么是流行且广泛使用的[DotNetOpenAuth](http://www.dotnetopenauth.net/)库本身的限制，要么是 OAuth 的可能滥用。当我终于意识到[BOSS 文档与](http://developer.yahoo.com/boss/search/boss_api_guide)[BOSS GEO 文档](http://developer.yahoo.com/boss/geo/docs/)是分开的，并找到了一个[可以使用 Yahoo! 的 PlaceFinder API 的 C# 代码示例时](http://developer.yahoo.com/boss/geo/docs/codeexamples.html#oauth_csharp)，我发现了所有这些不和谐的来源。

Yahoo! 的 PlaceFinder API 虽然使用 OAuth，但不需要访问令牌即可获取 API 的端点或数据。当您发送 PlaceFinder 请求时，您会将应用程序的所有信息（消费者密钥和秘密）以及时间戳、随机数和签名*发送到 PlaceFinder 端点本身*。当我过去使用 OAuth 时，这些元素被发送到 6.1 端点以获取请求令牌。然后，您可以使用它来验证/授权用户 (6.2) 并获取访问令牌 (6.3) 以发出进一步的请求。

这是迄今为止我无法克服的[DotNetOpenAuth](http://www.dotnetopenauth.net/)限制，所以如果我无知并且在这里做错了，请告诉我。在[Yahoo! 网站上的示例 C# 代码中](http://developer.yahoo.com/boss/geo/docs/codeexamples.html#oauth_csharp)，他们没有使用 DotNetOpenAuth。相反，它们有一个`OAuthBase`类，您可以使用它来生成随机数、时间戳和签名。但是*他们为 access token 和 secret 发送空字符串*。我尝试使用 DotNetOpenAuth 执行此操作，但它不允许您使用 null 或空访问令牌构造任何请求。

那么问题来了：这是对 OAuth 标准的不当使用吗？如果没有，DotNetOpenAuth 库中是否存在限制，使得无法向 RequestToken (6.1) 以外的端点发送未经授权的请求？如果这两个问题的答案是否定的，**您如何使用 DotNetOpenAuth 来请求 PlaceFinder 数据而无需发送访问令牌或密码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:57:09.933

这是一个很好的问题。我认为 oAuth 为 BOSS 开发者提供了两个好处

1.  由于您注册 BOSS 一次，然后可以将该密钥用于多项服务，因此 BOSS 团队希望能够灵活地在未来提供更多需要令牌的服务。从一开始就从 oAuth 开始允许这种灵活性。

2.  该团队希望确保在网络通信期间不会嗅出密钥。由于请求已签名且实际密钥未传递，因此我们可以确保不会发生嗅探。

关于 DotNetOpenAuth 上的问题，我建议在 BOSS Y 上提问！组（[http://tech.groups.yahoo.com/group/ysearchboss/](http://tech.groups.yahoo.com/group/ysearchboss/)），因为我们有许多用 C#、VB.Net 编写的人可以为您提供建议。事实上，众所周知 VB.Net oAuth 库 ( [http://oauth.googlecode.com/svn/code/vbnet/oAuth.vb](http://oauth.googlecode.com/svn/code/vbnet/oAuth.vb) ) 存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T15:04:17.850

雅虎使用两种类型的 oAth。一个需要钥匙，一个不需要。您可能想要不用于一般 API 的那个。只需添加安全协议 http:// -> https:// 然后将 /public/ 放在旧网址的适当位置，例如

`https://somePartOfURL/public/otherPartOfURL`

# java - Java中的二维数组操作

> ID：15164096
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:06:29.033
> 
> 标签：java, arrays, oop, multidimensional-array

我正在尝试使用这个二维数组，它代表图像的灰度...我想通过平均 2x2 块并将每个值替换为 2x2 网格的平均值来像素化图像...例如，如果输入是数组

```
 2,  4, 31, 31   
   3,  3, 21, 41
   1,  2, 10, 20
   3,  2, 20, 30 
```

然后您首先查看第一个 2x2 子数组（从左上角开始）

```
 2,  4
   3,  3 
```

并找到这个子数组的平均值（即 (2+4+3+3)/4 = 3）。在返回的数组中，第一个 2x2 子数组将是

```
 3,  3
   3,  3 
```

然后我们看下一个 2x2 块

```
 31,  31
   21,  41 
```

平均为 31，输出中的下一个 2x2 块将是

```
 31,  31
   31,  31 
```

我想知道哪种方法最能解决这个问题。不太清楚如何解决它......提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:12:45.213

你可以很容易地在 Java 中声明一个多维数组：

```
double matrix[][] = new double[size][size]; 
```

然后，您可以使用标准下标来处理各个元素。例如：

```
int row = 2;
int col = 3;
double val = matrix[row][col]; // etc.
matrix[row][col] = 7; 
```

然而，从技术上讲，Java 没有多维数组。相反，它具有数组数组。访问多维数组元素可能比访问（一维）数组要慢一些。您始终可以编写自己的`Matrix`类，将值维护为单个数组并根据矩阵坐标计算下标。我不确定在性能方面这是否值得。此外，还有很多可用于 Java 的矩阵包。*对java 矩阵包*的网络搜索会发现很多高质量的点击。对于您正在尝试做的事情，它们可能都过大了。

# asp.net - 将全局变量设置为仅客户端 asp.net

> ID：15164100
> 
> 赞同：1
> 
> 时间：2013-03-01T18:06:38.900
> 
> 标签：asp.net, variables, client, global-variables

不久前，我创建了一个简单的登录表单，该表单进入数据库并下拉用户登录信息。现在我通过使用来做到这一点`global variables`；没有意识到它们是服务器端变量而不是客户端。所以发生的情况是，假设我在一台计算机上登录，使用该站点的所有其他用户都将以我的身份登录。

所以我的问题是。

> A）有没有办法将全局变量设置为客户端，这样只有使用该电脑的人才会受到变量变化的影响。
> 
> B）是否有使用全局变量的替代方法；这样我就可以在页面之间传递数据，就像全局变量一样。

我尝试过使用查询字符串。虽然他们工作。我发现它们有点繁琐，因为您必须解析它们，并且每次离开每一页时；您必须将它们发送到新页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:21:21.617

我认为[ASP.NET 会话状态](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)将非常适合您的需求。另一种方法是使用[cookie](http://www.codeproject.com/Articles/31914/Beginner-s-Guide-To-ASP-NET-Cookies)，如果您需要在给定用户的*浏览器会话*中保存信息，这可能是一个更好的解决方案。但请注意，cookie 不应用于存储敏感信息（如密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:35:54.630

创建一个类，该类包含您在用户登录时从数据库中检索到的所有用户信息：

```
public class User {
   public string Name {get; set;}
   public int Id {get; set;}
} 
```

创建访问 User 属性的会话级属性。此属性应存在于引用 User 对象的每个页面上。或者，您可以创建一个包含此属性的基本页面。

```
public User CurrentUser
{
   get {
      if(Session["User"] == null)
         return null;

      return (User)Session["User"];
   }
   set {
      Session["User"] = value
   }
} 
```

现在，每次你引用这个属性时，你只需要检查对象是否为空。如果为空，则没有登录用户：

```
if(this.CurrentUser == null) {
   //no logged-in user
}
else {
   //the user is logged in
} 
```

# c++ - 游戏状态管理器，暂停和恢复

> ID：15164103
> 
> 赞同：0
> 
> 时间：2013-03-01T18:06:53.343
> 
> 标签：c++, vector, copy-constructor

我试图在我的游戏中允许暂停。目前，我有一个运行良好的更改状态。对于暂停，我有：

```
void PushState(int newState)
{
    pauseID = stateID; ///save state number

    Gstates.push_back(currentState); ///Set Current state to vector

    nextState =  newState; ///acquire new state

    switch( nextState )
    {
    case STATE_INTRO:
        currentState = new CIntroState(); ///create new state
        break;
    }

    //Change the current state ID
    stateID = nextState;

    //NULL the next state ID
    nextState = STATE_NULL;
} 
```

上述部分似乎运作良好。

这是我的简历部分

```
void Resuming()
{
    nextState = pauseID;

    if( nextState != STATE_EXIT )
    {
         delete currentState; ///deletes current state
    }

    switch( nextState )
    {
    case STATE_INTRO:
        currentState = Gstates.back(); ///sets current state to the saved state
        Gstates.pop_back(); ///delets saved state 
        break;
    }

    //Change the current state ID
    stateID = nextState;

    //NULL the next state ID
    nextState = STATE_NULL;
} 
```

我收到一些奇怪的多线程错误。大约 50% 的时间它按预期工作大声笑，但其余时间它崩溃了。

该错误基本上是说，“很可能这是一个多线程客户端，并且没有调用 XInitThreads。

客户端不是多线程的；）..无论如何，有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:20:50.340

你那里有一些危险的代码。这：

```
if( nextState != STATE_EXIT )
{
     delete currentState; ///deletes current state
} 
```

将使您的“currentState”指向不存在的对象，因为它仅在 nextState 为 STATE_INTRO 时才会更新：

```
switch( nextState )
{
case STATE_INTRO:
    currentState = Gstates.back(); ///sets current state to the saved state
    Gstates.pop_back(); ///delets saved state 
    break;
} 
```

这很可能是崩溃的原因。

# javascript - 用Javascript选择特定的词？

> ID：15164104
> 
> 赞同：6
> 
> 时间：2013-03-01T18:06:54.030
> 
> 标签：javascript

我有以下代码选择元素的全部内容：

```
function selectElement(element) {
    var sel = window.getSelection();
    sel.removeAllRanges();
    var range = document.createRange();
    range.setStart(element, 0);
    range.setEnd(element, 1);
    sel.addRange(range);
    console.log(range);
} 
```

我打电话给：

```
selectElement(document.getElementById("input")); 
```

如果`#input`看起来像这样：

```
<div id="input">
Lorem Ipsum Dolor Sit
</div> 
```

如何选择字符`0-7`，以便选择：

```
<div id="input">
[Lorem I]psum Dolor Sit
</div> 
```

我认为设置`setStart`and`setEnd`会起作用，但我只能从`0-1`.

我可以选择节点内的文本，而不是节点本身吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:14:18.160

您将整个 div 节点传递给`setStart`/ `setEnd`，这就是为什么您只能在 0 和 1 之间进行选择。您必须传递 div`firstChild`节点，它是一个文本节点。例如，要选择“Ipsum”：

```
range.setStart(element.firstChild, 7);
range.setEnd(element.firstChild, 12); 
```

[http://jsfiddle.net/JJ86n/](http://jsfiddle.net/JJ86n/)

注意：处理跨浏览器的范围一直是一团糟。我已经有一段时间没有处理它了，但上次我检查了一下，让像[rangy](https://code.google.com/p/rangy/)这样的库来处理令人讨厌的细节似乎是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:14:17.100

您需要从元素内的文本节点中选择它。

```
range.setStart(element.childNodes[0], 0);
range.setEnd(element.childNodes[0], 7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:28:20.070

您正在处理整个元素，它是一个具有不同对象作为属性的对象。要处理字符串，您必须首先获取 String(text) 子元素。您可以通过从元素子节点数组中获取子节点来做到这一点。尝试直接在 Selection 对象上使用 JavaScript 字符串属性或方法（如 length 或 substr）如果没有该属性或方法将导致错误，如果有，则可能返回意外结果。

# entity-framework - LinqPad 在第一次运行 EF 查询时查询 __MigrationHistory

> ID：15164105
> 
> 赞同：1
> 
> 时间：2013-03-01T18:06:54.913
> 
> 标签：entity-framework, linqpad

我的项目是 EF 5，使用 DbContext。

我刚刚注意到，我第一次在 LinqPad 中运行任何 Linq 查询时，都会有轻微的延迟，并且生成的 SQL 开头如下。随后的运行，没有延迟，也没有额外的 SQL。

谁能向我解释一下这个 SQL 是什么，我是否应该担心它？

```
SELECT TABLE_SCHEMA SchemaName, TABLE_NAME Name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE'
GO

SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[__MigrationHistory] AS [Extent1]
)  AS [GroupBy1]
GO

SELECT TOP (1) 
[Extent1].[Id] AS [Id], 
[Extent1].[ModelHash] AS [ModelHash]
FROM [dbo].[EdmMetadata] AS [Extent1]
ORDER BY [Extent1].[Id] DESC
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:03:59.850

首先是 EF 代码，验证您的数据库是否与模型匹配，以确保一切正常。

别担心！

# php - 如何使用 PHP QueryPath 从 MySQL SELECT 查询结果中提取文本/字符串，而不会获得我得到的“额外 HTML”？

> ID：15164111
> 
> 赞同：0
> 
> 时间：2013-03-01T18:07:12.670
> 
> 标签：php, mysql, querypath

我创建了一个小型测试数据库，如下所示：

```
mysql> select * from person;
+-----------+-------------+
| firstName | lastName    |
+-----------+-------------+
| matt      | butcher     |
| emanuel   | garbaciovas |
+-----------+-------------+
2 rows in set (0.00 sec) 
```

然后我写了一个简单的 QueryPath 脚本，如下所示：

```
<?php

    require 'src/QueryPath/QueryPath.php';
    require 'src/QueryPath/Extension/QPDB.php';

    $input = qp(QueryPath::XHTML_STUB,'body')
      ->dbInit('mysql:host=localhost;dbname=qpdb',
        array(username=>'my_username',password=>'my_password'))
      ->queryInto('SELECT firstName FROM person WHERE lastName="butcher"')
      ->doneWithQuery()->writeHTML()->find('body')->text();

    print $input;

?> 
```

现在，我需要我得到的查询的字符串[文本值] [即我得到我想要的，然后我将其用作 web/excel/csv/etc 上 html 文本表单的输入]，但问题是，当我从命令行运行这个脚本时，我得到了我不需要的额外的 HTML 代码/文档块，即输出如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/x
html1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
  <title>Untitled</title>
  </head>
  <body>matt</body>
  </html>
matt 
```

所以基本上我想要的是“马特”，这是我得到的，但我也得到了所有这些“额外”，你可以看到我不想要的。有谁知道如何只提取“马特”？

我显然不能直接从 MySQL 查询中提取文本，因为它是一个资源/对象，所以有人知道一种方法/破解它吗？QueryPath 或 No QueryPath 很好 [虽然 QueryPath hack 更好！]

# java - 如何使用 MULE ESB 将邮件附件传递给 POJO 对象

> ID：15164112
> 
> 赞同：1
> 
> 时间：2013-03-01T18:07:14.673
> 
> 标签：java, attachment, mule

我正在尝试将邮件附件从 IMAP 入站端点传递到 JAVA 组件，但它失败了。错误消息显示“消息有效负载的类型为：MimeBodyPart$MimePartDataHandler”。

附件中的文件是 Excel 文件，我可以连接 Indound File 端点，但我想改用 IMAP 端点。

如何获取传递给 typw FILE 的 JAVA 组件的消息？

这是我的骡子配置：

```
<flow name="imaptestflow" doc:name="imaptestflow">
    <imap:inbound-endpoint user="XXXXXXXX"
        password="XXXXX" host="XXXXXXX" port="143" doc:name="IMAP" disableTransportTransformer="true"/>
    <expression-transformer evaluator="attachments-list" expression="*.xls" doc:name="Expression"/>

    <collection-splitter doc:name="Collection Splitter"/>
    <all doc:name="All">
        <processor-chain>
            <component class="xlsFileRead" doc:name="Java"/>
        </processor-chain>
        <processor-chain>
            <file:outbound-endpoint path="c:\out" outputPattern="#[groovy:payload.getName()]" doc:name="File"/>
        </processor-chain>
    </all>
</flow> 
```

Java 类是：

```
import java.io.File;
import java.io.IOException;
import java.util.List;
import jxl.Cell;
import jxl.CellType;
import jxl.Sheet;
import jxl.Workbook;
import jxl.read.biff.BiffException;
public class xlsFileRead {
public void readFromFile(Object input)throws IOException  {
        Workbook w;
        try {
          w = Workbook.getWorkbook((File)input);
          // Get the first sheet
          Sheet sheet = w.getSheet(0);
          // Loop over first 10 column and lines
          for (int i = 5; i < sheet.getRows(); i++) {
          for (int j = 0; j < sheet.getColumns(); j++) {
              Cell cell = sheet.getCell(j, i);
              CellType type = cell.getType();
              if (type == CellType.LABEL) {
                System.out.print(cell.getContents() + ";");
              }
              if (type == CellType.NUMBER) {
                System.out.print(cell.getContents() + ";");
              }
            }
          System.out.println(i);
          }
        } catch (BiffException e) {
          e.printStackTrace();
        }
}
} 
```

Mule 控制台的异常是：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Started app 'imaptest'                                   +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
INFO  2013-03-03 19:35:17,592 [[imaptest].imaptestflow.stage1.02] org.mule.api.processor.LoggerMessageProcessor: [rtdata2.xls, rtdata.xlsx]
INFO  2013-03-03 19:35:17,598 [[imaptest].imaptestflow.stage1.02] org.mule.lifecycle.AbstractLifecycleManager: Initialising: 'connector.file.mule.default.dispatcher.1635258243'. Object is: FileMessageDispatcher
INFO  2013-03-03 19:35:17,598 [[imaptest].imaptestflow.stage1.02] org.mule.lifecycle.AbstractLifecycleManager: Starting: 'connector.file.mule.default.dispatcher.1635258243'. Object is: FileMessageDispatcher
INFO  2013-03-03 19:35:17,601 [[imaptest].imaptestflow.stage1.02] org.mule.transport.file.FileConnector: Writing file to: C:\OUT\18a0c736-8431-11e2-b133-e9e7c6fca1c6rtdata2.xls
ERROR 2013-03-03 19:35:17,674 [[imaptest].imaptestflow.stage1.02] org.mule.exception.DefaultMessagingExceptionStrategy: 
********************************************************************************
Message               : Component that caused exception is: DefaultJavaComponent{imaptestflow.commponent.569080239}. Message payload is of type: MimeBodyPart$MimePartDataHandler
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
    1\. javax.mail.internet.MimeBodyPart$MimePartDataHandler cannot be cast to java.io.File (java.lang.ClassCastException)xlsFileRead:18 (null)
    2\. Component that caused exception is: DefaultJavaComponent{imaptestflow.commponent.569080239}. Message payload is of type: MimeBodyPart$MimePartDataHandler (org.mule.component.ComponentException) org.mule.component.DefaultComponentLifecycleAdapter:352 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
java.lang.ClassCastException: javax.mail.internet.MimeBodyPart$MimePartDataHandler cannot be cast to java.io.File
at xlsFileRead.readFromFile(xlsFileRead.java:18)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:30:36.200

我现在已经解决了。我将附件写入文件，然后再次读取。它有效，现在已经足够了。

这是代码：

```
public class xlsFileRead {

public void readFromFile(Object input)throws IOException  {

    DataHandler handler = (DataHandler)input;
    String tempfilenm = handler.getName();
    InputStream is = handler.getInputStream();
    File tempfile =new File("c:\\tempdev\\" + tempfilenm);
    OutputStream os = new FileOutputStream(tempfile);
    byte[] buffer = new byte[1024];
    int bytesRead = 0;
    while ((bytesRead = is.read(buffer)) != -1) {
    os.write(buffer,0,bytesRead);
         }      
 Workbook w;
    try {
      w = Workbook.getWorkbook(tempfile);
      // Get the first sheet
      Sheet sheet = w.getSheet(0);
      // Loop over first 10 column and lines
      for (int i = 5; i < sheet.getRows(); i++) {
      for (int j = 0; j < sheet.getColumns(); j++) {

          Cell cell = sheet.getCell(j, i);
          CellType type = cell.getType();
          if (type == CellType.LABEL) {
            System.out.print(cell.getContents() + ";");
          }

          if (type == CellType.NUMBER) {
            System.out.print(cell.getContents() + ";");
          }

        }
      System.out.println(i);
      }
    } catch (BiffException e) {
      e.printStackTrace();
    } 
```

} }

# ios6 - Facebook (web) 对话框开始在 iOS6/SDK3.1|3.2 上立即关闭

> ID：15164113
> 
> 赞同：0
> 
> 时间：2013-03-01T18:07:18.587
> 
> 标签：ios6, facebook-ios-sdk

我有一些代码要发布到朋友的 Facebook 墙上，在通过 Open Graph 弃用此代码后，我更改为使用已弃用的标题和 Facebook 对话框来将用户包含在发布中。这已经工作了数周，但似乎在生产应用程序中停止工作（周二工作正常，周三失败）（即没​​有代码更改或重新构建。）

我花了几个小时尝试各种事情（在主线程上运行，断言会话是实时的，重新写入 SDK 3.2，卸载应用程序/重新安装，完全更改对话框类型和发布内容）以恢复能力，但无论如何我做的对话框立即解散。[注意：我们的应用程序没有开发者警报，我相信应用程序的设置都没有改变。]

这是代码。facebookManager“performConnectedAction”来自 Facebook 示例，以确保活动会话（我断言它没有问题。）：

```
NSMutableDictionary *wallPost = [NSMutableDictionary dictionary];

  // Content populating not show (and I've tried various simplifications)

// Who to...
[wallPost setObject:_selectedUser.id forKey:kFB_FIELD_TO];

[facebookManager performConnectedAction:^{
    FBSession *facebookSession = facebookManager.facebookSession;
    Assert( facebookSession.isOpen, @"Need an open Facebook session.");

    [FBWebDialogs presentFeedDialogModallyWithSession:facebookSession parameters:wallPost handler:^(FBWebDialogResult result, NSURL *resultURL,NSError *error) {
        if ( !!error ) {
            [self logEventWithFormat:@"Failed to invite on Facebook [%@]", error];
        }
    }];
}]; 
```

基本上......不仅对话框向上/向下闪烁，而且没有给出回调（没有提供错误或结果。）Facebook应用程序的所有其他部分继续运行（我们的图形调用，我们的Facebook好友对话框，等等.)

我将不胜感激有关进一步调查此问题的方法的任何想法。我已经提交了错误报告：

[http://developers.facebook.com/bugs/165456656937602?browse=search_5130e2d7663dd6543665811](http://developers.facebook.com/bugs/165456656937602?browse=search_5130e2d7663dd6543665811)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:32:29.753

I had the same issue and fixed it by delaying the method call like this. My method is `fbWallPost`

```
[self performSelector:@selector(fbWallPost) withObject:nil afterDelay:0.5]; 
```

# java - Bouncycastle：如何创建 RSA 私钥的加密 PKCS8 表示？

> ID：15164114
> 
> 赞同：3
> 
> 时间：2013-03-01T18:07:24.400
> 
> 标签：java, rsa, bouncycastle

在我的应用程序中，我有一个`AsymmetricCipherKeyPair keyPair`and `KeyParameter key`。由此，我需要生成一个 PKCS#8 形式的私钥表示

```
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY----- 
```

任何人都可以给我一个关于我如何做到这一点的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:05:34.260

您可以使用 org.bouncycastle.crypto.util.PrivateKeyInfoFactory 从私有 KeyParameter 创建 PrivateKeyInfo 对象。getEncoded() 将返回代表密钥的 PKCS#8 版本的字节。

您提供的 PEM 标题确实表明您可能需要 OpenSSL 编码 - 在这种情况下，您应该能够将 BC PEMWriter 与 PrivateKeyInfo 对象结合使用，或者与使用 KeyFactory 生成的 PrivateKey 对象结合使用，并传递 PrivateKeyInfo 的编码作为 PKCS8EncodedKeySpec （取决于您使用的 BC 版本）。

问候，

大卫

# java - 应用程序翻译字符串资源消耗和模式编译

> ID：15164116
> 
> 赞同：0
> 
> 时间：2013-03-01T18:07:39.620
> 
> 标签：java, android

从一开始就犯了不将我的应用程序构建为对翻译友好的错误，我现在正处于追溯这样做的艰巨过程中......

我的应用程序涉及语音识别，因此语言差异在代码本身中很常见，而不仅仅是在可能更常见的布局和描述中。

因此，我可能比大多数人更关心使用 XML 字符串资源的性能成本，并再次权衡为每种语言编写新代码/类的巨大努力。

这是一个示例类，我希望通过一点想象力可以让您了解我的困惑：

```
private static Pattern pWIFI = Pattern.compile(".*\\bwifi\\b.*");
private static Pattern pMOBD = Pattern.compile(".*\\bdata\\b.*");
private static Pattern pBLUE = Pattern.compile(".*\\bbluetooth\\b.*");
private static Pattern pAIRPLANE = Pattern.compile(".*\\bairplane\\b.*");
private static Pattern pAEROPLANE = Pattern.compile(".*\\baeroplane\\b.*");

public class MatchingAndReplacingStuff {

        for (String vd : voiceData) {

            vd = vd.toLowerCase(loc).trim();

            if (vd.startsWith(ctx.getString(R.string.KEYBOARD_)) || vd.startsWith(ctx.getString(R.string.KEY_BOARD_))
                    || vd.startsWith(ctx.getString(R.string.KEYBOARDS_))
                    || vd.startsWith(ctx.getString(R.string.KEY_BOARDS_)) || vd.startsWith(ctx.getString(R.string.KEYBORD_))
                    || vd.startsWith(ctx.getString(R.string.KEYBORDS_))) {

                vd = vd.replaceFirst(ctx.getString(R.string.KEYBOARDS_), "");
                vd = vd.replaceFirst(ctx.getString(R.string.KEYBOARD_), "");
                vd = vd.replaceFirst(ctx.getString(R.string.KEY_BOARD_), "");
                vd = vd.replaceFirst(ctx.getString(R.string.KEY_BOARDS_), "");
                vd = vd.replaceFirst(ctx.getString(R.string.KEYBORD_), "");
                vd = vd.replaceFirst(ctx.getString(R.string.KEYBORDS_), "");

                vd = vd.replaceFirst(ctx.getString(R.string.GOOGLE_VOICE_TYPING), ctx.getString(R.string.GOOGLE_SEARCH));
                vd = vd.replaceFirst(ctx.getString(R.string.VOICE_TYPING), ctx.getString(R.string.GOOGLE_SEARCH));
                vd = vd.replaceFirst(ctx.getString(R.string.VOICE_INPUT), ctx.getString(R.string.GOOGLE_SEARCH));
                vd = vd.replaceFirst(ctx.getString(R.string.VOICE_KEYBOARD), ctx.getString(R.string.GOOGLE_SEARCH));
                vd = vd.replaceFirst(ctx.getString(R.string.VOICE_KEYBORD), ctx.getString(R.string.GOOGLE_SEARCH));
                vd = vd.replaceFirst(ctx.getString(R.string.VOICE_KEY_BOARD), ctx.getString(R.string.GOOGLE_SEARCH));

                voiceDataUpdated.add(vd.trim());

                    }
                }

    // loop again and compare Strings in voiceDataUpdated to Patterns compiled above

        } 
```

假设蓝牙和 WiFi 以及上述所有其他 R.String 在每种语言中都不同，我会遇到以下性能/正确性/翻译问题：

1）是否应该`ctx.getString(R.string`在循环之前将每个都分配给一个字符串？语音数据字符串的最大数量约为 30 - 那么性能是否值得考虑？对于将来阅读这个问题的其他人，是否有一个应该考虑的阈值？

2）作为编译模式需要一个上下文（当获取字符串资源时），下面的变体是否可能？

```
Pattern.compile(".*\\bctx.getString(R.string.SOMETHING\\b.*"); <-- pseudo code 
```

3）如果问题 2 的答案是否定的，但是 Patterns 可以以这种方式编译，我应该编译它们，还是只构建一个 String 来比较 - 或者甚至不打扰？！

最后一个问题是：当我处理循环最多包含 300 个条目的字符串数组时，我是否应该完全忘记性能（在合理范围内）！？

^ 我喜欢认为在构建我的代码时，我在可读性和性能之间找到了一个快乐的媒介，但是如果我忘记了性能（仅由于上述原因以及我的循环大小有限），我真的需要一些人们向我保证这是正确的做法！

我提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:45:13.103

> 是否应该在循环之前将每个`ctx.getString(R.string...)`都分配给一个字符串？语音数据字符串的最大数量约为 30 - 那么性能是否值得考虑？对于将来阅读这个问题的其他人，是否有一个应该考虑的阈值？

是的，如果您的字符串被重复使用，则没有必要。没有阈值，只能根据您的用例进行优化。

> 由于编译模式需要一个上下文（当获取字符串资源时），下面的变体是否可能？

```
Pattern.compile(".*\\bctx.getString(R.string.SOMETHING)\\b.*"); 
```

不，您不能以这种方式使用它，我考虑过在类构造函数中创建和编译模式。

> 如果问题 2 的答案是否定的，但 Patterns 可以以这种方式编译，我应该编译它们，还是只构建一个 String 来比较 - 或者甚至不打扰？！

模式不能以这种方式编译，您不能将方法调用用作模式定义中的字符串。

答案来自：[java.util.regex - Pattern.compile() 的重要性？](https://stackoverflow.com/questions/1720191/java-util-regex-importance-of-pattern-compile)

> **Compile 解析正则表达式并构建内存中的表示。与匹配相比，编译的开销很大。因此，如果您重复使用某个模式，缓存已编译的模式将获得一些性能。**

# google-maps-api-3 - 谷歌地图标记图像精灵

> ID：15164119
> 
> 赞同：2
> 
> 时间：2013-03-01T18:07:45.420
> 
> 标签：google-maps-api-3, sprite

这是我在这里的第一篇文章，希望有人能提供帮助。

我正在使用谷歌地图建立一个地图网站。

该地图根据类型类别显示多达 14 个不同的图标，我了解精灵图像的理论以及服务器调用的减少，因此我有一个包含所有标记的图像。

问题：如何设置精灵的位置，但只调用一次图像？我看过这篇文章 [谷歌地图标记精灵图像位置](https://stackoverflow.com/questions/13785226/google-map-marker-sprite-image-position)

但这仅显示更改一个标记的图像

这是代码

```
 //set the image once
var img = {
    url:'images/site/type_sprite.png',
    size: new google.maps.Size(32,32),
    origin: new google.maps.Point(0,0)
};

idx = 0;
for (var i = 0; i < l; i++) {
     lat = parseFloat(markers[i].getAttribute("lt"));
     lng = parseFloat(markers[i].getAttribute("ln"));
     var type = markers[i].getAttribute("typ");

     if ((lat < latUpper && lat > latLower) && (lng < lngUpper && lng > lngLower) && (jQuery.inArray(type,filter_arr)>=0)) {

             //change the position of the icon sprite depending on type
             switch(type) {
                  case 'AA':
                    img(origin, new google.maps.Point(0,0));
                    break;
                case 'AC':
                    img(origin = new google.maps.Point(0, 42));
                    break;
                  case 'ACF':
                    img(origin= new google.maps.Point(0,84));
                    break;
                  default:
                    img(origin= new google.maps.Point(0,0));
            }
            var id = markers[i].getAttribute("id");
            var name = markers[i].getAttribute("nme");
            //var icon = 'images/pins/' + type + '.png';
            var point = new google.maps.LatLng(lat, lng);
            var marker = new google.maps.Marker({
                map: map,
                position: point,
                title: name,
                icon: img
            });
        //add to valid array
        markersArray.push(marker);

        //build infowindow string
        str = '<div class="iw_h">' + id + ' ' + name + '</div>';
        bindInfoWindow(marker, map, infoWindow, str);
        bounds.extend(point);
        map.fitBounds(bounds);
        idx++;
    }
} //end of loop
} 
```

如果我把代码

```
 var img = {
    url:'images/site/type_sprite.png',
    size: new google.maps.Size(32,32),
    origin: new google.maps.Point(0,0)
}; 
```

在循环内部，这是否意味着图像被重复下载（并且它将是比单个图标更大的图像）从而破坏了使用精灵的对象？

这是网站 btw [http://www.searchforsites.co.uk/full_screen.php](http://www.searchforsites.co.uk/full_screen.php)

# c - 通过指向指针数组的指针递增

> ID：15164124
> 
> 赞同：2
> 
> 时间：2013-03-01T18:07:53.883
> 
> 标签：c, pointers

我希望有人能够通过我的以下代码告诉我我是对还是错。

我正在尝试从函数打印返回的数据，该数据`mpg123_decoders()`具有值`char**`（**或**“CPU 支持的以 NULL 结尾的解码器数组”）。

```
const char ** pdecoders;
pdecoders = mpg123_decoders();
do {
    con_msg(MSG_BAD, "%s\n", *pdecoders);
    pdecoders += 1;
} while(*pdecoders != NULL); 
```

我不相信我的以下代码可以正确执行，因为我确信有更多可用的解码器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:54:54.070

您的代码示例对我来说并不坏。以防万一根本没有任何数据，我会改变

```
do {
    con_msg(MSG_BAD, "%s\n", *pdecoders);
    pdecoders += 1;
} while(*pdecoders != NULL); 
```

到

```
while(*pdecoders != NULL){
    con_msg(MSG_BAD, "%s\n", *pdecoders);
    pdecoders += 1;
} 
```

但其余的看起来还不错。

尽管由于 const 关键字在 C 中的处理方式首先听起来有点令人困惑，但实际上指向的数据是 const 并且根本没有改变，所以应该没有问题。

尝试完全按照给出的方式阅读声明，您会发现它没有问题：

```
const char **pdecoders 
```

读作“pdecoders 是指向 const char 的指针的指针”。

有问题的情况改为

```
char** const pdecoders 
```

因为这将成为“指向 char 指针的 const 指针”

# android - 从应用程序启动谷歌地图 - Android

> ID：15164125
> 
> 赞同：0
> 
> 时间：2013-03-01T18:07:56.010
> 
> 标签：android, google-maps

我想在我的应用程序中使用 Google 地图 - 从我的应用程序启动 Google 地图。我创建了这段代码（在这个论坛上以不同的方式询问）：

```
String uri = String.format(Locale.ENGLISH, "geo:%f,%f", latitude, longitude);
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
FinishActivity.this.startActivity(intent); 
```

它工作得很好——它启动了谷歌地图，**但没有任何标签（这个带有“A”的绿色指针）并且缩放非常大。我怎样才能改变它？有什么方法可以显示两个点和它们之间的路线？**

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:39:02.250

```
 public class MapRouteActivity extends MapActivity {    
          LinearLayout linearLayout;
   MapView mapView;
     private Road mRoad;    
  @Override
  public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
setContentView(R.layout.main);
mapView = (MapView) findViewById(R.id.mapview);
mapView.setBuiltInZoomControls(true);    
new Thread() {
@Override
public void run() {
 double fromLat = 49.85, fromLon = 24.016667; 
 double toLat = 50.45, toLon = 30.523333;
 String url = RoadProvider
  .getUrl(fromLat, fromLon, toLat, toLon);
 InputStream is = getConnection(url);
 mRoad = RoadProvider.getRoute(is);
 mHandler.sendEmptyMessage(0);
 }
 }.start();
 }

 Handler mHandler = new Handler() {
 public void handleMessage(android.os.Message msg) {
  TextView textView = (TextView) findViewById(R.id.description);
  textView.setText(mRoad.mName + " " + mRoad.mDescription);
  MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
  List<Overlay> listOfOverlays = mapView.getOverlays();
   listOfOverlays.clear();
   listOfOverlays.add(mapOverlay);
   mapView.invalidate();
    };
    };

 private InputStream getConnection(String url) {
 InputStream is = null;
  try {
  URLConnection conn = new URL(url).openConnection();
  is = conn.getInputStream();
  } catch (MalformedURLException e) {
  e.printStackTrace();
   } catch (IOException e) {
   e.printStackTrace();
   }
  return is;
  }    
   @Override
 protected boolean isRouteDisplayed() {
  return false;
  }
 } 
```

查看完整代码（[https://code.google.com/p/j2memaprouteprovider/source/browse/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route/android/MapRouteActivity.java](https://code.google.com/p/j2memaprouteprovider/source/browse/trunk/J2MEMapRouteAndroidEx/src/org/ci/geo/route/android/MapRouteActivity.java)）

地图的缩放级别

MapController myMC myMapView.getController();

myMC.setZoom(int value);

# php - 无法在 DOM 中导航动态创建的页面

> ID：15164126
> 
> 赞同：2
> 
> 时间：2013-03-01T18:07:55.837
> 
> 标签：php, ajax, json, jquery-mobile

经过这么多尝试，我终于设法使用 PHP、JSON 和 AJAX 动态创建页面并将它们加载到 DOM 中。但现在的问题是我无法动态调用/导航这些页面，而是手动，即`gallery.html#page1 ...etc`.

我寻求指导而不是加重你的负担，因为我是来这里学习的。

**PHP -*照片.php* **

```
$photos = array();
$i=0;
while ($row = mysqli_fetch_array($query)){
 $img = $row["fn"];
 $photos[] = $img;
 $i++;
}

$count = count($photos);
echo json_encode(array('status' => 'success', 'count' => $count, 'items' => $photos)); 
```

**JSON 数组**

```
{
"status":"success",
"count":3,
"items":
 [
"img1.jpg",
"img2.jpg",
"img3.jpg"
 ]
} 
```

我使用下面的方法来获取和存储所需画廊的 ID，

```
<input type="hidden" value="<?php echo $id; ?>" id="displayid" /> 
```

然后我将其回调以在 AJAX 中使用它。

```
var ID = $('#displayid').val(); 
```

**AJAX 和 JQM**

```
$.ajax({
Type: "GET",
url: 'photos.php',
data: { display: ID }, // = $('#displayid').val();
dataType: "json",
contentType: "application/json",
success: function(data) {
 var count = data.count;
 var number = 0;
 $.each(data.items, function(i,item) {
  var newPage = $("<div data-role=page data-url=page" + number + "><div data-role=header><h1>Photo " + number + "</h1></div><div data-role=content><img src=" + item + " /></div></div");
  newPage.appendTo( $.mobile.pageContainer );
  number++;
  if (number == count) { $.mobile.changePage( newPage ); }; // it goes to last page 
```

我从[这里](https://stackoverflow.com/questions/15121019/jquery-mobile-add-next-and-previous-buttons)得到了这段代码，感谢[Gajotres](https://stackoverflow.com/users/1848600/gajotres)在页面之间动态导航。它在同一个代码中。

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){       
 var nextpage = $(this).next('div[data-role="page"]');
 if (nextpage.length > 0) {    
  $.mobile.activePage.find('[data-role="header"]').append($('<a>').attr({'href':'#'+nextpage.attr('id'),'data-theme':'b'}).addClass('ui-btn-right').html('Next').button());
 }  
}); // next button 
}); // each loop 
} // success
}); //ajax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:07:24.433

我发现了你的问题。

这部分代码不能像这样在这里使用：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){       
    var nextpage = $(this).next('div[data-role="page"]');
    if (nextpage.length > 0) {    
        $.mobile.activePage.find('[data-role="header"]').append($('<a>').attr({'href':'#'+nextpage.attr('id'),'data-theme':'b'}).addClass('ui-btn-right').html('Next').button());
    }  
}); 
```

这就是问题。先去掉pagebeforeshow事件绑定，这里不能这样用。其余代码不会做任何事情，因为当前有任何下一页（下一页将在下一次循环迭代期间生成），因此删除整个块。

现在，在每个块结束并生成所有页面之后（这是主要的，此时所有页面都应该存在），添加以下代码：

```
$('[data-role="page"]').each(function(){
    var nextpage = $(this).next('div[data-role="page"]');
    if (nextpage.length > 0) {    
        $(this).find('[data-role="header"]').append($('<a>').attr({'href':'#'+nextpage.attr('id'),'data-theme':'a'}).addClass('ui-btn-right').html('Next').button());
    }         
}); 
```

这就是将要发生的事情。每个循环将遍历每个可用页面（我们现在已经拥有它们），如果它不是最后一个，它将添加下一个按钮。

这是一个活生生的例子：http: [//jsfiddle.net/Gajotres/Xjkvq/](http://jsfiddle.net/Gajotres/Xjkvq/)

好的，在此示例中页面已经存在，但要点是相同的。在添加下一个按钮之前，它们需要存在（无论是动态添加还是预先存在）。

我希望这有帮助。

# android - 在android中添加地图而不使用xml？

> ID：15164129
> 
> 赞同：0
> 
> 时间：2013-03-01T18:08:16.740
> 
> 标签：android, google-maps, android-maps-v2

您可以在不通过 xml 文件添加的情况下将 v2 谷歌地图添加到 android 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:22:48.257

是的，您可以按如下方式使用支持地图片段：

```
public class LocationFragment extends SupportMapFragment {  

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = super.onCreateView(inflater, container, savedInstanceState);   
        return v;
    }

} 
```

您可以将此 Location 片段添加到您的容器中，如下所示：

```
LocationFragment mapFragment = new LocationFragment();
            FragmentTransaction ft = getFragmentManager.beginTransaction();
            ft.add(R.id.your_container_id, mapFragment);
            ft.commit(); 
```

# macos - 枚举 OS X 上所有已安装的应用程序

> ID：15164132
> 
> 赞同：9
> 
> 时间：2013-03-01T18:08:21.633
> 
> 标签：macos, osx-mountain-lion, launch-services

# 基本问题

我正在寻找一种解决方案来枚举安装在（Mac）OS X 系统上的所有应用程序，即使用[LaunchServices](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html)注册的所有应用程序包。

# 无效的简单方法

（请注意：`lsregister`可以在下面找到`/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister`）。

目前我正在使用 的输出`lsregister -dump | grep -E '^.*[ \\t]*path:[ \\t]+(\/.*)$' | grep -Eo '\/.*'`，它有一些问题：

*   `.app`未正确处理带有换行符（`\n`在 UNIX 上有效）的捆绑包（此问题可以通过编写适当的解析器来解决）
*   `lsregister`不能正确处理奇怪的文件名（例如包含[RTL 标记](http://en.wikipedia.org/wiki/Right-to-left_mark)）。`lsregister`似乎只是忽略了名称中带有 RTL 标记的文件。如果您愿意，您可以通过运行以下命令创建一个名称中包含 RTL 的文件。

    ```
    python -c 'import shutil; shutil.copytree(u"/Applications/TextEdit.app", u"/Applications/ThisIsAWeird\u202EApp.app")' 
    ```

    这样做之后，`lsregister -dump | grep ThisIsAWeird`就*不会*暴露了。但是，当您右键单击文本文件并转到“打开方式”时，您会发现 LaunchServices 和 Finder 仍然支持该文件。 ![看到自己](../Images/f9b00b58eeaeca9c374cf37314807c2e.png)

简单地枚举`/Applications`和其他目录中的所有文件是行不通的，因为 LaunchServices 知道任意文件夹中的应用程序包，我也需要这些应用程序。

# 我没有上班的其他方法

显然，有一个名为的私有 API 函数`_LSFindApplications`可以完全满足我的需要，但我无法让它工作，也没有在互联网上找到任何非官方文档。（证明它存在`nm /System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/LaunchServices | grep __LSFindApplications$`：）

# 更新： system_profiler 方法似乎也不起作用

到目前为止，我虽然`system_profiler`@Anoop 建议的方法有效，但今天我发现它`lsregister`仍然可以获取更多二进制文件。在所有机器上都有一些或丢失，一些似乎只有在`system_profiler`您安装了另一个安装 OS X 的外部卷时才会丢失。这是我的一台机器上`system_profiler`（但存在于`lsregister`）输出中缺少的列表：

```
/Applications/Automator.app/Contents/Resources/Application Stub.app
/Applications/Google Chrome.app/Contents/Versions/30.0.1599.69/Google Chrome Framework.framework/Resources/app_mode_loader.app
/Applications/Google Chrome.app/Contents/Versions/30.0.1599.69/Google Chrome Framework.framework/Resources/crash_report_sender.app
/Applications/Google Chrome.app/Contents/Versions/30.0.1599.69/Google Chrome Helper EH.app
/Applications/Google Chrome.app/Contents/Versions/30.0.1599.69/Google Chrome Helper NP.app
/Applications/Google Chrome.app/Contents/Versions/30.0.1599.69/Google Chrome Helper.app
/System/Library/CoreServices/AddPrinter.app
/System/Library/CoreServices/AirPlayUIAgent.app
/System/Library/CoreServices/AppleFileServer.app
/System/Library/CoreServices/AppleGraphicsWarning.app
/System/Library/CoreServices/AppleScript Runner.app
/System/Library/CoreServices/AppleScript Utility.app
/System/Library/CoreServices/CalendarFileHandler.app
/System/Library/CoreServices/Certificate Assistant.app
/System/Library/CoreServices/CoreLocationAgent.app
/System/Library/CoreServices/CoreServicesUIAgent.app
/System/Library/CoreServices/CoreTypes.bundle
/System/Library/CoreServices/Database Events.app
/System/Library/CoreServices/DiskImageMounter.app
/System/Library/CoreServices/Expansion Slot Utility.app
/System/Library/CoreServices/File Sync.app
/System/Library/CoreServices/FileSyncAgent.app
/System/Library/CoreServices/Folder Actions Dispatcher.app
/System/Library/CoreServices/Folder Actions Setup.app
/System/Library/CoreServices/HelpViewer.app
/System/Library/CoreServices/Image Events.app
/System/Library/CoreServices/Install in Progress.app
/System/Library/CoreServices/Jar Launcher.app
/System/Library/CoreServices/Java Web Start.app
/System/Library/CoreServices/KeyboardSetupAssistant.app
/System/Library/CoreServices/Language Chooser.app
/System/Library/CoreServices/LocationMenu.app
/System/Library/CoreServices/MRTAgent.app
/System/Library/CoreServices/Memory Slot Utility.app
/System/Library/CoreServices/NetAuthAgent.app
/System/Library/CoreServices/Network Diagnostics.app
/System/Library/CoreServices/Network Setup Assistant.app
/System/Library/CoreServices/ODSAgent.app
/System/Library/CoreServices/Pass Viewer.app
/System/Library/CoreServices/Printer Setup Utility.app
/System/Library/CoreServices/RegisterPluginIMApp.app
/System/Library/CoreServices/Screen Sharing.app
/System/Library/CoreServices/SecurityAgent.app
/System/Library/CoreServices/SecurityFixer.app
/System/Library/CoreServices/SocialPushAgent.app
/System/Library/CoreServices/System Events.app
/System/Library/CoreServices/System Image Utility.app
/System/Library/CoreServices/SystemUIServer.app
/System/Library/CoreServices/Ticket Viewer.app
/System/Library/CoreServices/UniversalAccessControl.app
/System/Library/CoreServices/UnmountAssistantAgent.app
/System/Library/CoreServices/UserNotificationCenter.app
/System/Library/CoreServices/VoiceOver.app
/System/Library/CoreServices/ZoomWindow.app
/System/Library/CoreServices/backupd.bundle/Contents/Resources/TMLaunchAgent.app
/System/Library/CoreServices/loginwindow.app
/System/Library/CoreServices/rcd.app
/System/Library/Frameworks/PubSub.framework/Versions/A/Resources/PubSubAgent.app
/System/Library/Frameworks/Quartz.framework/Versions/A/Frameworks/QuickLookUI.framework/Versions/A/Resources/QuickLookUIHelper.app
/System/Library/Frameworks/QuickLook.framework/Versions/A/Resources/quicklookd.app
/System/Library/PrivateFrameworks/DiskImages.framework/Versions/A/Resources/DiskImages UI Agent.app
/System/Library/Services/AppleSpell.service
/System/Library/Services/ChineseTextConverterService.app
/System/Library/Services/ImageCaptureService.app
/System/Library/Services/OpenSpell.service
/System/Library/Services/SpeechService.service
/System/Library/SocialServices/Facebook.socialplugin
/System/Library/SocialServices/Twitter.socialplugin
/System/Library/SocialServices/Weibo.socialplugin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-08T18:08:51.647

首先，您的要求不太正确：

> 我正在寻找一种解决方案来枚举安装在（Mac）OS X 系统上的所有应用程序，即向 LaunchServices 注册的所有应用程序包。

这些不是一回事。使用 LaunchServices 注册的应用程序包是`lsregister -dump`. 这与“已安装所有应用程序”不同。“所有已安装的应用程序”没有确切的查询。OS X 甚至没有真正有这样的概念。

的输出`system_profiler`相当于 Spotlight 所知道的。这并不完全是已安装应用程序的完整列表，并且在某些情况下可能不正确。例如，Spotlight 可能已被禁用，或者它可能尚未完成第一次扫描。（不支持询问 Spotlight 是否已完成第一次扫描；雷达 15177626。）

还有`pkgutil --pkgs`一个会为您提供额外的“已安装的东西”。它也不完整，可能会列出未安装的内容。

您还可以使用`mdfind`遍历整个磁盘并查看自称为应用程序的内容。这非常有效，但速度很慢。

`locate .app | grep '\.app$'`如果定位数据库是最新的并且您只需要应用程序包，您也可以使用非常有效的方法。

我在 WWDC 上向 Apple 询问了这个问题。没有简单的、受支持的答案。打开雷达。您可以要求欺骗 15177489。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T15:24:30.060

在终端：

`system_profiler SPApplicationsDataType > list_of_all_apps.txt`

... 将 system_profiler 查询的输出写入该文本文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T02:30:05.843

[使用Cocoa](http://cocoadev.com/AllApplications)应用程序/代码查找怎么样？

此外，您还可以使用`system_profiler -xml SPApplicationsDataType`并解析生成的 XML 数据以获取您感兴趣的应用程序。

# c# - 最小化 Outlook 约会项目

> ID：15164134
> 
> 赞同：0
> 
> 时间：2013-03-01T18:08:37.040
> 
> 标签：c#, outlook, add-in, appointment

我正在创建一个能够创建新会议/约会邀请的新 Outlook 功能区。客户请求最小化新约会窗口的能力，但该按钮当前被禁用并且焦点无法从窗口移动。有没有办法启用最小化按钮或改变焦点远离约会窗口？

```
Outlook.Application outlook = new Outlook.Application();
Outlook.AppointmentItem appointment = (Outlook.AppointmentItem)outlook.CreateItem(Outlook.OlItemType.olAppointmentItem);
appointment.ReminderSet = true;
appointment.BusyStatus = Outlook.OlBusyStatus.olBusy;
appointment.ReminderMinutesBeforeStart = 15;
appointment.Duration = 30;
appointment.MeetingStatus = Outlook.OlMeetingStatus.olMeeting;
appointment.Display(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:48:12.100

AppointmentItem 的 .Display 函数采用一个参数。它被设置为“true”，我认为这是为了显示表单。“真”实际上是被激活的模态选项。从 Display() 函数中删除“True”解决了这个问题。

# mysql - Hibernate 的 hbm2ddl 过度创建唯一索引的问题

> ID：15164135
> 
> 赞同：3
> 
> 时间：2013-03-01T18:08:36.913
> 
> 标签：mysql, hibernate, jpa, hbm2ddl, unique-index

我遇到了 Hibernate 的 hbm2ddl 和 MySQL 的一个严重问题：**Hibernate 系统地为我的 OneToMany 关联的一个字段创建了一个唯一索引，**如下所示：

![屏幕截图](../Images/ce6d4ea8803bfcbf9d0b50b90ddeb93f.png)

请注意，选中**UQ**框以查找`day_to_time_slots`没有任何意义的字段...

这是`Advertisement`实体中的关系：

```
@OneToMany
private List<DayToTimeSlot> dayToTimeSlots; 
```

这是`DayToTimeSlot`实体：

```
@RooJavaBean
@RooToString
@RooEquals
@RooJpaEntity
@Entity
public class DayToTimeSlot {

    @NotNull(groups = { Default.class, Validation.AdvertisementCreation.class })
    @Enumerated
    private Day day;

    @NotNull(groups = { Default.class, Validation.AdvertisementCreation.class })
    @Enumerated
    private TimeSlot timeSlot;
} 
```

谁能告诉我如何防止这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:06:17.920

这是完全有道理的——它完全按照它应该的方式工作。表是实体之间的`advertisement_day_to_time_slots`连接表。这些实体之间的关系是通过连接表建立的，因为关联是单向的一对多。`Advertisement``DayToTimeSlot`

**此连接表在 day_to_time_slot 列中确实具有唯一约束，因为每个 DayToTimeSlot 只能连接到一个广告实体。**OneToMany 的逆是ManyToOne。一个广告可以连接到多个 DayToTimeSlot 实体，但一个 DayToTimeSlot 仅与一个广告相关联。如果这种限制不是首选，则应使用[@ManyToMany](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToMany.html)关联而不是 OneToMany。

# ios - iOS - 循环过程中应用程序崩溃而没有错误

> ID：15164139
> 
> 赞同：0
> 
> 时间：2013-03-01T18:08:52.593
> 
> 标签：ios, objective-c, arrays, loops, crash

在循环过程中，我的应用程序崩溃而没有错误。数组计数等于 175260。使用 profiler 我没有泄漏，所以我不知道为什么 App 退出，也许 CPU 使用率在很长一段时间内都是 100%？

谢谢您的帮助。

只是以下代码使应用程序崩溃：

```
 for(unsigned int i = 0; i <14;i++)
    {
        if(findSensor[i]==YES)
        {
            for(unsigned int j = 1; j <[array count];j++)
            {
                @autoreleasepool {

                    if([[[[array objectAtIndex:j] componentsSeparatedByString:@";"] objectAtIndex:0] isEqualToString:[NSString stringWithFormat:@"%d",10*(i+1)]])
                    {
                        //Code here 
                    }
                }
            }
        }
    } 
```

完整的代码是：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fileName = [NSString stringWithFormat:@"%@/%@",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase];

NSFileHandle *fh = [NSFileHandle fileHandleForReadingAtPath:fileName];

NSFileHandle *output = [NSFileHandle fileHandleForReadingAtPath:[NSString stringWithFormat:@"%@/%@10",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase]];

if(output == nil)
{

    NSManagedObjectContext *context = [self managedObjectContext];
    _recordlocal = [NSEntityDescription insertNewObjectForEntityForName:@"RECORD" inManagedObjectContext:context];
    _recordlocal.date = [ibNavSettings interfaceSettings].selectedFileToDataBase;

    NSData *inputData = [NSData dataWithData:[fh readDataToEndOfFile]];

    NSString *inputString = [[NSString alloc] initWithData:inputData encoding:NSUTF8StringEncoding];

    NSArray *array = [[NSArray alloc] initWithArray:[inputString componentsSeparatedByString:@"\n"]];

    for(unsigned int i = 0; i <14;i++)
    {
        if(findSensor[i]==YES)
        {
            [[NSFileManager defaultManager] createFileAtPath:[NSString stringWithFormat:@"%@/%@%d",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase,10*(i+1)] contents:nil attributes:nil];

            NSMutableString *saveString = [[NSMutableString alloc] init];

            int count = 0;

            for(unsigned int j = 1; j <[array count];j++)
            {
                @autoreleasepool {

                    if([[[[array objectAtIndex:j] componentsSeparatedByString:@";"] objectAtIndex:0] isEqualToString:[NSString stringWithFormat:@"%d",10*(i+1)]])
                    {
                        [saveString appendString:[array objectAtIndex:j]];
                        [saveString appendString:@"\n"];
                        if(i == 0)
                            count++;
                        progress++;
                        pourcent = progress/total;
                        load = pourcent*100;
                        if(load%5==0)
                            [self performSelectorInBackground:@selector(changeUI:)withObject:[NSNumber numberWithFloat:(pourcent)]];

                    }
                }
            }

            [saveString writeToFile:[NSString stringWithFormat:@"%@/%@%d",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase,10*(i+1)] atomically:YES encoding:NSUTF8StringEncoding error:nil];
            if(i == 0)
                _recordlocal.count = [[NSNumber alloc] initWithInt:(count/50)];
        }

    }

    _recordlocal.load = [[NSNumber alloc] initWithBool:YES];

    NSError *error = nil;
    if (![context save:&error]) {
        NSLog(@"Core data error %@, %@", error, [error userInfo]);
        abort();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:31:46.380

我猜您的应用程序在没有可读异常的情况下崩溃，因为它用完了可用的 RAM，特别是因为您指出它正在运行大量迭代。

对于测试，我建议按照 Rikkles 对自动释放池的建议进行操作。此外，由于 i 的值（以及因此比较字符串）很少更改，我也会在 j 循环之外创建该字符串。这将避免产生大量额外的字符串。

除此之外，由于您似乎正在寻找由分号分隔的字符串开头的字符串，因此我建议您不要执行 componentsSeparatedByString 然后检查您使用 NSString 方法 hasPrefix 来检查条件的元素零你正在寻找。

这是一个例子：

```
for(unsigned int i = 0; i <14;i++)
{
    NSString *searchString = [NSString stringWithFormat:@"%d;", 10*(i+1)];
    if(findSensor[i]==YES)
    {
        for(unsigned int j = 1; j <[array count];j++)
        {
            if([[array objectAtIndex:j] hasPrefix:searchString])
            {
                //Code here 
            }
        }
    }
} 
```

（我希望它可以编译并运行，如果不是，它应该只需要一些小的调整。我现在不在我的 Mac 上。）

如果这没有帮助，那么内部发生的事情//这里的代码一定是罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:18:18.050

你为什么要创建`[array count]`自动释放池？创造这么多它们有什么意义？它可能因此而崩溃。将`@autoreleasepool`外部放在 for 循环中。我认为您会这样做的唯一原因是，如果您在 for 循环的每次迭代中创建了如此多的瞬态对象，以至于您希望在退出迭代后立即摆脱它们。但是还有其他方法可以做到这一点，包括在每次迭代中重用这些对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:34:01.593

### 第一个建议

只需对内部循环使用快速枚举，您实际上并没有将索引“j”用于任何事情

[https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/Enumeration.html](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/Enumeration.html)

### 第二个建议

放置一些 NSLog，它会减慢一切，但你需要弄清楚你失败的地方。这将有助于为每个人指明正确的方向。

### 第三个建议

如果抛出错误，实际使用 NSError 对象并输出它们的值：

```
NSError *writeError = nil;
[saveString writeToFile:[NSString stringWithFormat:@"%@/%@%d",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase,10*(i+1)] 
             atomically:YES 
               encoding:NSUTF8StringEncoding 
                  error:&writeError];
if(error != nil) NSLog(@"error writing file: %@", [[writeError userInfo]description]); 
```

### 第四项建议

您似乎试图从后台线程更新 UI。这将不起作用或将导致崩溃。UI 代码只能从主线程调用。所以不要这样做：

```
[self performSelectorInBackground:@selector(changeUI:)withObject:[NSNumber numberWithFloat:(pourcent)]]; 
```

如果您已经在后台线程上，这可能会崩溃，因为您正在线程上的线程上创建线程。相反，您想致电：

```
[self performSelectorOnMainThread:@selector(changeUI:)withObject:[NSNumber numberWithFloat:(pourcent)]]; 
```

### 第五条建议

您可能会超过 NSString 的最大长度（它很大，但我之前偶然做过一次）。您可能应该只是在循环的每次迭代中附加文件，因此您没有不断增长的 NSMutableString：

```
NSString *path = [NSString stringWithFormat:@"%@/%@%d",documentsDirectory,[ibNavSettings interfaceSettings].selectedFileToDataBase,10*(i+1)]
NSFileHandle *fh  = [NSFileHandle fileHandleForWritingAtPath:filePath];

NSData *newLine = [@"\n" dataUsingEncoding:NSUTF8StringEncoding];
for(NSString *rowString in array)
{
    if([[[rowString componentsSeparatedByString:@";"] objectAtIndex:0] isEqualToString:[NSString stringWithFormat:@"%d",10*(i+1)]])
    {
        NSData *stringData = [rowString dataUsingEncoding:NSUTF8StringEncoding];
        [fh truncateFileAtOffset:[fh seekToEndOfFile]];
        [fh writeData:stringData];
        [fh truncateFileAtOffset:[fh seekToEndOfFile]];
        [fh writeData:newLine];
        if(i == 0)
            count++;
        progress++;
        pourcent = progress/total;
        load = pourcent*100;
        if(load%5==0)
            [self performSelectorOnMainThread:@selector(changeUI:)withObject:[NSNumber numberWithFloat:(pourcent)]];

        }
    }
} 
```

这还有一个额外的好处是可以帮助您放弃自动释放池

### 这是无效的

如果您的阵列确实有 175260 行，那可能是您的问题。您正在使用 unsigned int 作为索引变量进行循环。c 中无符号整数的最大值仅为 65535。使用无符号长整数，最大值为 4294967295。

# python - 在 Python 中增加 split 的索引

> ID：15164142
> 
> 赞同：1
> 
> 时间：2013-03-01T18:08:57.353
> 
> 标签：python, indexing, split

好吧，我在 Python 脚本中有一个问题，我需要做的是拆分函数的索引随着循环的每次迭代而自动增加。我这样做：

```
tag = "\'"
while loop<=302:
        for line in f1.readlines():
            if tag in line:
                word = line.split(tag)[num] #num is the index I need to increase

        text = "Word: "+word+"."

        f.write(text)

        num = num + 1
        loop = loop + 1 
```

但是......索引上的“num”变量没有改变......它只是保持不变。num 索引表示我需要取的单词。所以这就是为什么“num = num + 1”必须增加......

循环中的问题是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:13:57.133

你的问题令人困惑。但我认为你想`num = num + 1`进入 for 循环和 if 语句。

```
tag = "\'"
while loop<=302:
    for line in f1.readlines():
        if tag in line:
            word = line.split(tag)[num] #num is the index I need to increase
            num = num + 1

    text = "Word: "+word+"."

    f.write(text)
    loop = loop + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:31:17.637

正如您在评论中提到的，我对您的问题有不同的方法。考虑 input.txt 有以下条目：

```
this is a an input file. 
```

那么以下代码将为您提供所需的输出

```
lines = []
with open (r'C:\temp\input.txt' , 'r') as fh:
    lines = fh.read()

with open (r'C:\temp\outputfile.txt' , 'w') as fh1:
    for words in lines.split():
        fh1.write("Words:"+ words+ "\n" ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:21:10.717

根据 Benyi 在问题中的评论 - 你只想要单个句子吗？您可能不需要索引。

```
>>> mystring = 'hello i am a string'
>>> for word in mystring.split():
         print 'Word: ',word

Word:  hello
Word:  i
Word:  am
Word:  a
Word:  string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:21:54.300

这似乎有很多问题。
第一的

```
while loop <= 302:
   for line in f1.readlines(): 
```

f1.readlines() 在第一次之后的每次迭代中都将是 []

第二

```
for line in f1.readline():
   word = line.split(tag)[num]
   ...
text = "Word: "+word+"." 
```

即使您使 for 循环工作，`text`也将始终使用`word`. 也许这是期望的行为，但这似乎很奇怪。

第三

```
while loop<=302:
    ...
    loop = loop += 1 
```

似乎它会更好地写成

```
for _ in xrange(302): 
```

由于在该范围内根本不使用循环。这是假设循环从 0 开始，如果不是，那么您只需将 302 调整为您想要的迭代次数。

最后

```
num = num + 1 
```

`f1.readlines()`这在您的内部循环之外，因此第一次迭代的 num 将始终相同，然后因为前面所述的空而后者无关紧要。

# android - 在Android中实现Singleton以在活动之间共享数据的正确方法？

> ID：15164144
> 
> 赞同：2
> 
> 时间：2013-03-01T18:09:02.653
> 
> 标签：android, design-patterns, singleton

我已经为这个问题苦苦挣扎了很长时间，实际上我已经在 stackoverflow 中查看了很多帖子，都在谈论同样的问题，但没有任何确定性。

如何实现**Singleton模式**来实现Android Activity之间的数据共享？我说的是活动之间，而不是课程之间，**哪一个是正确的方式？**

这是我找到的所有信息：

1- 推荐标准 Singleton 表单的人，你可以用 Java、C 等实现的人，这里有一个例子：

[http://es.wikipedia.org/wiki/Singleton](http://es.wikipedia.org/wiki/Singleton)

2-建议在 OnCreate 方法中实现它，如下所示：

[http://androidcookbook.com/Recipe.seam?recipeId=1218](http://androidcookbook.com/Recipe.seam?recipeId=1218)

3-使用应用程序实现方法的那些（不太确定这个）：

[使用单例对象在活动之间保存状态或共享数据是否可以接受？](https://stackoverflow.com/questions/3483403/is-it-acceptable-practice-to-use-singleton-objects-to-save-state-or-share-data-b)

4-使用“singleTask”方法的那些，在清单中定义它：

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

5-还有更多像这样的公开方式（实际上我认为这不是单例）：

[http://www.jameselsey.co.uk/blogs/techblog/android-implementing-global-state-share-data-between-activities-and-across-your-application/](http://www.jameselsey.co.uk/blogs/techblog/android-implementing-global-state-share-data-between-activities-and-across-your-application/)

建议？注释？例子？

谷歌 Android 人员推荐它作为在活动之间共享复杂信息的一种方式，但不知道 Android 中的最佳方法。

[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

请帮助我澄清这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:18:26.197

我已经使用应用程序来保存“单例”实例以及静态最终变量。在我工作的框架中，[Transfuse](http://androidtransfuse.org/)和 Singleton 的范围是通过 @Singleton 注释来确定的。这些将给定的单例保存在静态最终映射中：

```
@Singleton
public class SingletonExample{
    ...
} 
```

[http://androidtransfuse.org/documentation.html#singleton](http://androidtransfuse.org/documentation.html#singleton)

这是包含给定单例实例的映射：

```
public class ConcurrentDoubleLockingScope implements Scope {

    private final ConcurrentMap<Class, Object> singletonMap = new ConcurrentHashMap<Class, Object>();

    @Override
    public <T> T getScopedObject(Class<T> clazz, Provider<T> provider) {
        Object result = singletonMap.get(clazz);
        if (result == null) {
            Object value = provider.get();
            result = singletonMap.putIfAbsent(clazz, value);
            if (result == null) {
                result = value;
            }
        }

        return (T) result;
    }
} 
```

# ruby-on-rails-3 - 如何在 Rails 中搜索关键字？

> ID：15164152
> 
> 赞同：1
> 
> 时间：2013-03-01T18:09:29.933
> 
> 标签：ruby-on-rails-3, search, keyword, keyword-search

我有一个运行良好的搜索表单，但我想为其添加关键字功能。我不确定如何。搜索条件如下所示：

```
def search
conditions = {}
conditions[:targ_lang] = params[:targ_lang] unless params[:targ_lang].blank?
conditions[:inst_lang] = params[:inst_lang] unless params[:inst_lang].blank?
conditions[:start_level] = params[:start_level] unless params[:start_level].blank?
conditions[:end_level] = params[:end_level] unless params[:end_level].blank?
conditions[:skill] = params[:skill] unless params[:skill].blank?
conditions[:subject] = params[:subject] unless params[:subject].blank?
conditions[:inst_name] = params[:inst_name] unless params[:inst_name].blank?
conditions[:creator] = params[:creator] unless params[:creator].blank?
#conditions = Material.where("keywords like ?", "%#{keywords}") unless params[:keywords].blank?  
@results = Material.find(:all, :conditions => conditions)
end 
```

我已经注释掉了关键字行，因为它目前不起作用。显然它与其他的不同，因为我们不想找到完全匹配，我们希望从几个可能的关键字中找到一个匹配。

任何人都可以帮忙吗？菜鸟问题我知道，但我已经研究了一段时间。

# clojure - “错误”：“invalid_token：无法解析身份验证令牌。” 在 Clojure 中为 Firebase 生成 JWT 时

> ID：15164159
> 
> 赞同：0
> 
> 时间：2013-03-01T18:10:04.560
> 
> 标签：clojure, firebase, jwt

尝试围绕 Firebase REST API 编写一个包装器（请参阅[https://github.com/cloudfuji/taika](https://github.com/cloudfuji/taika)以获取完整源代码），并且身份验证令牌似乎失败了。这些函数是 Firebase 提供的 Java 库选项 ( [https://github.com/firebase/firebase-token-generator-java](https://github.com/firebase/firebase-token-generator-java) )的简单包装器

代码很简单：

```
(ns taika.auth
  (:require [clojure.string :as string]
            [clj-http.client :as client]
            [cheshire.core :as json])
  (:import [com.firebase.firebase-token-generator.security.token]
           [org.json.JSONOBject]))

(defn token-generator [secret-key]
  (com.firebase.security.token.TokenGenerator. secret-key))

(defn create-token [token-generator auth-data & [admin?]]
  (let [token-options (doto (com.firebase.security.token.TokenOptions.)
                        (.setAdmin (or admin? false)))]
    (.createToken token-generator (org.json.JSONObject. auth-data) token-options))) 
```

生成令牌，看起来很合理（例如密钥，当然）：

```
(let [tg (token-generator "abc123")
                  auth-data {:email "example@example.com" :api_key "my-api-key"}
                  admin? false]
              (create-token tg auth-data admin?))

 => "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2IjowLCJpYXQiOjEzNjIxNjEzMDJ9.8701406fad76b2dff83bf38a18d91a95ed7787f255e7dd534a77e7daa0c58c59" 
```

但是在 REST API 请求中使用令牌时，它会失败并显示：

```
{ "error" : "invalid_token: Could not parse auth token." } 
```

ruby 库似乎没有同样的问题。

同样，完整的源代码位于[https://github.com/cloudfuji/taika/blob/master/src/taika/auth.clj](https://github.com/cloudfuji/taika/blob/master/src/taika/auth.clj)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:08:57.770

此错误是由 Java 令牌生成器库中的错误引起的。现在已经修复了。拉下更改并再试一次。

[https://github.com/firebase/firebase-token-generator-java](https://github.com/firebase/firebase-token-generator-java)

# html - 无法居中此绝对元素

> ID：15164161
> 
> 赞同：1
> 
> 时间：2013-03-01T18:10:19.780
> 
> 标签：html, css, margin, center

我目前正在将 PSD 设计更改为 HTML 网站。然而，我遇到了一个问题。我无法将某个元素居中。我已经尝试了所有常用的技巧。

[http://lowhop.net/](http://lowhop.net/)

请参阅此处，主要的蓝色标题不符合要求（未居中）。我试过了

`#slider{ position:absolute; left:0; right:0; margin-left:auto; margin-right:auto;`

但是，以前它不能可靠地工作。（似乎只适用于我的屏幕分辨率/浏览器）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:12:07.770

`width`使用`margin: 0 auto`to center时需要在元素上显式定义 a 。

除非您明确地为它们指定宽度，否则块元素会占用完整的可用视口宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:18:30.807

由于您明确设置了滑块 DIV 的宽度，您可以使用另一个技巧将其居中：

```
#slider 
{
  z-index: 2;
  background-image: url(../img/sliderbg_09_09.png);
  position: absolute;
  display: block;
  width: 982px;
  height: 251px;
  left: 50%;
  margin-left: -491px; /** half DIV width */
} 
```

我可能会避免将其作为绝对位置 DIV，看起来不需要它，但这是一个快速而肮脏的居中:)

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:18:38.560

如果您*必须*使用绝对定位，您可以使用[类似我的回答here](https://stackoverflow.com/questions/9998260/css-absolute-position-wont-work-with-margin-leftauto-margin-right-auto/9998332#9998332)。

基本上，你为你的元素声明一个明确的宽度，然后给它

```
left: 50%;
margin-left: -[your width/2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:19:21.837

就像用户 showdev 提到的：

> 需要绝对定位吗？它甚至需要居中吗？看起来您只是通过添加 margin-left: 85px 来定位 div#navBar。看来您可以对 div#slider 使用相同的方法。

你有

```
#navBar {
  background-image: url("../img/navbg_07.png");
  display: block;
  height: 38px;
  margin-left: 85px; /* attention on this */
  margin-top: 31px;
  position: relative;
  width: 879px;
  z-index: 1;
} 
```

和这个

```
#slider {
  background-image: url("../img/sliderbg_09_09.png");
  display: block;
  height: 251px;
  position: absolute;
  width: 982px;
  z-index: 2;
} 
```

所以，试试'margin-left：85px;' 你的#slider。

# javascript - JSON - 访问字段的字段

> ID：15164164
> 
> 赞同：0
> 
> 时间：2013-03-01T18:10:26.193
> 
> 标签：javascript, json

假设我有：

```
 A = {

       B: {
          key : "value1"
       },

       C: {
          key : "value2"
       }
       ..............
} 
```

如何使用循环获取键的值？

我试过类似的东西：

```
for(ob in A)
{
    console.log(ob);
    console.log(ob.key);
} 
```

但我得到：

```
B
undefined
C
undefined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:11:58.317

`ob`保存属性名称，而不是值。

你想记录`A[ob]`和`A[ob].key`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:12:02.860

```
for(var propName in A)
{
    console.log(A[propName].key);
} 
```

在这种情况下，popName 是 B 和 C。代码将记录 A["B"] 和 A["C"] 的结果

# solr - Solr：FileListEntityProcessor 正在多次执行子实体

> ID：15164166
> 
> 赞同：0
> 
> 时间：2013-03-01T18:10:30.267
> 
> 标签：solr, dataimporthandler, dih

我已经配置了一个 dih-import.xml，如下所示。`FileListEntityProcessor`遍历一些文件夹，然后为每个文件执行一个 XPathEntity 和一个 DB-Entity 。

当我对大约 30.000 个文件执行完全导入时，导入花了将近 3 个小时。回到 DIH 调试控制台，它向我显示，对于找到的第一个文件，进行了 2 个 db 调用，对于第二个 4，然后是 6、8、..

谷歌没有向我展示关于这个主题的任何内容，所以我希望你:)

提前致谢

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
    <dataSource 
        name="cr-db"
        jndiName="xyz"
        type="JdbcDataSource" />
    <dataSource 
        name="cr-xml" 
        type="FileDataSource" 
        encoding="utf-8" />

    <document name="doc">
        <entity 
            dataSource="cr-xml" 
            name="f" 
            processor="FileListEntityProcessor" 
            baseDir="/path/to/xml" 
            filename="*.xml" 
            recursive="true" 
            rootEntity="true" 
            onError="skip">
            <entity
                name="xml-data" 
                dataSource="cr-xml" 
                processor="XPathEntityProcessor" 
                forEach="/root" 
                url="${f.fileAbsolutePath}" 
                transformer="DateFormatTransformer" 
                onError="skip">
                <field column="id" xpath="/root/id" /> 

                <field column="A" xpath="/root/a" />
            </entity>

            <entity 
                name="db-data" 
                dataSource="cr-db"
                query="
                    SELECT  
                        id, b
                    FROM 
                        a_table
                    WHERE 
                        id = '${f.file}'">
                <field column="B" name="b" />
            </entity>
        </entity>
    </document>
</dataConfig> 
```

* * *

**编辑** 在谷歌发现问题，但也没有答案：http: [//osdir.com/ml/solr-user.lucene.apache.org/2010-04/msg00138.html](http://osdir.com/ml/solr-user.lucene.apache.org/2010-04/msg00138.html)

* * *

**和另一个编辑**

将 solr 从 3.6 更新到 4.1 并执行导入程序。问题仍然存在，只是不再有 2n (2, 4, 6, 8, ..) 调用子实体，而只有 n。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:17:45.867

如果主要问题是使用 JdbcDataSource 时数据库的命中次数，您可以尝试切换到[CachedSqlEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#CachedSqlEntityProcessor)。

您可能还想跟踪[SOLR-2943](https://issues.apache.org/jira/browse/SOLR-2943)，因为他们想准确解决您的问题，希望即将推出的 Solr 4.2

# objective-c - 从 iOS 到 WCF 服务的参数传递

> ID：15164167
> 
> 赞同：0
> 
> 时间：2013-03-01T18:10:31.593
> 
> 标签：objective-c, wcf, argument-passing

我需要将信息从应用程序传递到服务器，特别是文本格式的 a 和 b。这是 WCF 服务的代码：

```
public class iOSService 
{
// To use HTTP GET, add [WebGet] attribute. (Default ResponseFormat is WebMessageFormat.Json)
// To create an operation that returns XML,
// add [WebGet(ResponseFormat=WebMessageFo rmat.Xml)],
// and include the following line in the operation body:
// WebOperationContext.Current.Outgoin gResponse.ContentType = "text/xml";
[OperationContract]
public void DoWork()
{
// Add your operation implementation here
return;
}

// Add more operations here and mark them with [OperationContract]

[OperationContract]
public string iOSTest2(string a, string b)
{
string res = "";
try
{
res=(int.Parse(a) + int.Parse(b)).ToString();
}
catch (Exception exp)
{
res = "Not a number";
}
return res;
}

} 
```

服务器接收到 a 和 b 后，将它们相加，并返回它们的总和。

这是我将参数发送到 iOS 应用程序服务器的代码：

```
- (IBAction)test:(id)sender {

    NSArray *propertyNames = [NSArray arrayWithObjects:@"23", @"342", nil];
    NSArray *propertyValues = [NSArray arrayWithObjects:@"a", @"b",  nil];

    NSDictionary *properties = [NSDictionary dictionaryWithObjects:propertyNames forKeys:propertyValues];

    NSMutableArray  * arr;

    arr=[[NSMutableArray alloc]initWithObjects:properties, nil];
    NSLog(@"%@",arr);

    NSError * error;
    NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:arr options:NSJSONWritingPrettyPrinted error:&error];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mathforyou.net/iOSservice.svc/iOSTest2"]];
    NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];

    [request setValue:@"appliction/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:jsonData2];
    NSLog(@"JSON String: %@",jsonString);
    NSError *errorReturned = nil;
    NSURLResponse *theResponse =[[NSURLResponse alloc]init];
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];
    if (errorReturned) {
        //...handle the error
        NSLog(@"error");
    }
    else {
        NSString *retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

        NSLog(@"%@",retVal);
    }
} 
```

但是服务器回复了我以下消息：

```
"ExceptionDetail":null,"ExceptionType":null,"Message":"The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.","StackTrace":null 
```

这是来自 Xcode 的日志：

```
2013-03-01 17:38:28.657 2231233122[3442:c07] (
        {
        a = 23;
        b = 342;
    }
)
2013-03-01 17:38:28.659 2231233122[3442:c07] JSON String: [
  {
    "a" : "23",
    "b" : "342"
  }
]
2013-03-01 17:38:29.054 2231233122[3442:c07] {"ExceptionDetail":null,"ExceptionType":null,"Message":"The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.","StackTrace":null} 
```

**PS**我请朋友帮助我，但由于他不知道objective-c为C++编写了一个程序并且代码有效，所以问题不在服务器上。这是代码：

```
string data = "{\"a\":\"560\",\"b\":\"90\"}";

byte[] bd = Encoding.UTF8.GetBytes(data);

HttpWebRequest wr = (HttpWebRequest)HttpWebRequest.Create("http://www.mathforyou.net/IOSService.svc/iOSTest2");
wr.ContentType = "application/json";
wr.Method = "POST";
wr.ContentLength = bd.Length;
Stream sw = wr.GetRequestStream();
sw.Write(bd, 0, bd.Length);
sw.Close();
HttpWebResponse resp = (HttpWebResponse)wr.GetResponse();
Stream s = resp.GetResponseStream();
byte[] bres = new byte[resp.ContentLength];
s.Read(bres, 0, bres.Length);
string ans = Encoding.UTF8.GetString(bres);
Console.WriteLine(ans); 
```

请帮忙，我累坏了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:25:29.000

如果您复制并粘贴了代码，看起来您可能拼错了您的`Content-Type`值。它应该是`application/json`，你有它作为`appliction/json`。

另外，我不确定这是否重要，但您也没有明确设置内容长度。我不确定这是否`setHTTPBody:`适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T08:08:25.430

我不确定您是否仍然需要这个，但请尝试以下操作：

```
[request addValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:jsonString forHTTPHeaderField:@"json"]; //<-- I added this line
[request setHTTPMethod:@"POST"];
[request setHTTPBody:jsonData2]; 
```

# c# - Google API 关键字列表

> ID：15164173
> 
> 赞同：0
> 
> 时间：2013-03-01T18:11:06.460
> 
> 标签：c#, google-api, oauth-2.0

## 在 Google OAuth 2.0 然后给出了以下详细信息来调用 UserInfo API。

调用 Google API

在您的应用程序获得访问令牌后，您的应用程序可以通过将其包含在 access_token 查询参数或 Authorization: Bearer HTTP 标头中来访问 Google API。

例如，使用 access_token 查询字符串参数调用 UserInfo API 如下所示：

## 获取[https://www.googleapis.com/oauth2/v1/userinfo?access_token=432563532432545436](https://www.googleapis.com/oauth2/v1/userinfo?access_token=432563532432545436)

这里 userinfo 是用于 userinfo API 的关键字。我想要其他 API 的关键字。有人知道吗？

# list - 通过分发 [] 来简化代码

> ID：15164180
> 
> 赞同：3
> 
> 时间：2013-03-01T18:11:32.250
> 
> 标签：list, haskell, monads

我有以下功能

```
type Assignment = [(Ref, Val)]

predi2 :: [(Val,Val)] -> Ref -> Ref -> (Maybe Assignment -> [Maybe Assignment])
predi2 f k1 k2 = \ma -> case ma of
    Nothing -> [Nothing]
    Just a -> case lookup k1 a of
        Nothing -> [Nothing]
        Just e1 -> case lookup k2 a of
            Nothing -> [Nothing]
            Just e2 -> if elem (e1, e2) f
                then [Just a]
                else [] 
```

鉴于 Maybe 的所有实例，我想我可以在 Maybe monad 中将其简化为更简单的东西：

```
predi2 :: [(Val,Val)] -> Ref -> Ref -> (Maybe Assignment -> [Maybe Assignment])
predi2 f k1 k2 = [\ma -> do
    a <- ma
    e1 <- lookup k1 a
    e2 <- lookup k2 a
    if elem (e1, e2) f then (return a) else ???] 
```

但我的问题是最后的 else，我不需要返回任何东西。

这是我的问题：是否有可能以 [fa] = [] 的方式返回任何内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T18:30:15.510

不，这不对。

我会写你的`predi2`函数更像这样：

```
predi2 f k1 k2 ma = fromMaybe [Nothing] $ do
    a <- ma
    e1 <- lookup k1 a
    e2 <- lookup k2 a
    if elem (e1, e2) f then return [Just a] else return [] 
```

IE

*   后处理一元计算，使用`fromMaybe`
*   将列表放在 monadic 计算内部，而不是在其外部
*   让 if 语句的 False 分支算成功（根据单子计算的标准）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T17:11:57.253

如果我正确理解了这个问题，我认为这是可能的。

令我印象深刻的是，您正在尝试跟踪两种不同类型的故障，空列表表示最终`elem`查找失败。`Maybe`表示 (1) 原件失败`Maybe Assignment`或`Nothing`(2)`lookup`失败。我们可以更明确地说明这一点。返回类型应该类似于

```
data FailureType = Existence | SeenInF
Either FailureType Assignment 
```

然后我们将使用[errors](http://hackage.haskell.org/package/errors)模块将`Maybe`类型失败转换为`Either`s 。

```
import Control.Error
predi2 :: [(Val, Val)] -> Ref -> Ref -> Maybe Assignment -> Either FailureType Assignment
predi2 f k1 k2 ma = do a  <- note Existence ma
                       e1 <- note Existence $ lookup k1 a
                       e2 <- note Existence $ lookup k2 a
                       note SeenInF $ guard $ (e1, e2) `elem` f
                       return a 
```

这个解决方案有点奇怪，因为它涉及在两个失败单子之间进行转换，`Maybe`并且`Either`, 但是[`note`](http://hackage.haskell.org/packages/archive/errors/latest/doc/html/Control-Error-Util.html#v%3anote)对于这个目的来说是一个非常有用的函数。

# ruby-on-rails - Rails http请求 - 不要等待响应

> ID：15164186
> 
> 赞同：1
> 
> 时间：2013-03-01T18:11:48.563
> 
> 标签：ruby-on-rails, net-http

我正在用 Ruby-on-Rails 编码

我想向另一个服务发送一个 http 请求，但不等待响应。

伪代码：

```
 def notification
     require 'net/http'

     ...
     # send net/http request
     Net::HTTP.post_form(url, params)

     render :text => "Rendered quickly as did not wait for response from POST"
 end 
```

有什么方法可以发送 POST 请求而不是等待响应而只是快速呈现页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:19:49.827

你可以试试[delay_job](https://github.com/collectiveidea/delayed_job)。它主要用于在后台运行进程。安装后`delayed_job`，您可以这样做。

```
 require 'net/http'

   def notification

     ...
     your_http_request  #calling method
     render :text => "Rendered quickly as did not wait for response from POST"
   end

   def your_http_request
     # send net/http request
     Net::HTTP.post_form(url, params)
     #do your stuff like where to save response
   end

   handle_asynchronously :your_http_request 
```

# c# - 我什么时候应该更喜欢属性而不是方法？

> ID：15164187
> 
> 赞同：3
> 
> 时间：2013-03-01T18:11:49.767
> 
> 标签：c#, .net, c#-4.0

我什么时候应该更喜欢属性而不是方法？因为当我使用属性时，下面的代码更具可读性。

```
string agency = base.GetAgencyDetails();

string agency = base.Agency; //I could write same logic in getter of the property. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T18:15:11.920

就个人而言，我会遵循[MSDN 指南](http://msdn.microsoft.com/en-gb/library/vstudio/ms229054.aspx)。

> 一般来说，方法代表动作，属性代表数据。属性旨在像字段一样使用，这意味着属性不应计算复杂或产生副作用。如果不违反以下准则，请考虑使用属性而不是方法，因为经验不足的开发人员会发现属性更易于使用。

如果您考虑一下，这是非常有意义的，一种方法将更适合可能以某种方式*改变*数据的东西，并且当您检索某些数据并缓存它时，属性是完美的。

如果您使用的是显式支持的属性，您甚至可以在转换的情况下将两者结合起来：

```
private ObjType _myObjWithStringification;
private string _stringRepOfData;

public string StringRepresentation
{
    get {
        if (_stringRepOfData == null) {
            _stringRepOfData = _myObjWithStringification.ToString();
        }
        return _stringRepOfData;
    }
} 
```

* * *

回复：您的可维护性评论，我不确定它是否非常有效。如果你`F12`要进入你正在使用的属性的声明，无论如何你都会直接进入`get`ter，就像你使用方法时你会进入方法体一样。

我不确定假设属性*不会*有任何自定义检索逻辑是否安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:14:36.767

如果你必须写很多逻辑，那么方法，而不是属性。

如果您在逻辑中进行方法调用，则再次调用方法，而不是属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:15:35.480

参考在[这里输入链接描述](http://msdn.microsoft.com/en-us/library/vstudio/ms229054%28v=vs.100%29.aspx)

一般来说，方法代表动作，属性代表数据。属性旨在像字段一样使用，这意味着属性不应计算复杂或产生副作用。如果不违反以下准则，请考虑使用属性而不是方法，因为经验不足的开发人员会发现属性更易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:16:15.147

属性只是围绕支持字段的一组包装方法（get/set）。

首选方法是使用属性，这样您的外部合约就不会更改，但是您可以稍后向属性方法添加额外的逻辑或验证。

还使代码更清洁作为奖励。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T18:19:29.417

它们的核心属性旨在成为字段访问的包装器，并提供普通字段和计算字段之间的统一。任何类似于字段访问的操作都应尽可能表示为属性。

这不是一个绝对的规则，而是一个指导方针。很难为方法上的属性制定明确的规则。然而，反过来是不正确的；何时应该优先使用方法而不是属性，这一点非常清楚。

*   该操作对类型有明显的副作用。例如，如果它明显地改变了对象中的任何状态，则该操作永远不应该是一个属性。
*   长时间运行的操作，包括昂贵的操作，永远不应该是属性

# c++ - 未定义的引用捕获 lambda 中的静态变量

> ID：15164199
> 
> 赞同：2
> 
> 时间：2013-03-01T18:12:28.770
> 
> 标签：c++, gcc, c++11, lambda

我在函数内部有一个 lambda，该函数使用 lambda 内部的`[&]`局部静态变量进行捕获，然后使用该变量。我不确定这是否有效，但这可以很好地编译和链接：

```
void Foo()
{
    static int i = 5;

    auto bar = [&]()
    {
        i++;
    };

    bar();
}

int main()
{
    Foo();
} 
```

但是通过制作`Foo`模板函数：

```
template <typename T>
void Foo()
{
    static int i = 5;

    auto bar = [&]()
    {
        i++;
    };

    bar();
}

int main()
{
    Foo<int>();
} 
```

我收到以下错误：

> g++-4.7 -std=c++11 main.cpp
> /tmp/cctjnzIT.o：在函数'void Foo()::{lambda()#1}::operator()() const'中：
> main.cpp： (.text+0x1a): 未定义引用'i'
> main.cpp:(.text+0x23): 未定义引用'i'
> collect2: 错误: ld 返回 1 退出状态

所以，我有两个问题：

1.  `i`在第一个示例中使用甚至是有效的 c++ 吗？
2.  如果#1，那么第二个例子有什么问题？或者这是一个 gcc 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:16:27.550

1）是的，您甚至可以`&`从定义中删除，因为`static`在 lambda 函数中始终可以访问。2）这是错误：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=54276](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54276)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-01T18:18:01.983

1）是的，假设您打算在通话之间保持“i”的值。

2）这不是编译器中的错误。静态实例变量也需要通过模板定义。请参考[这篇文章](https://stackoverflow.com/questions/1553854/template-static-variable)。

# jquery - 使用 AJAX 提交表单并在灯箱中显示结果

> ID：15164200
> 
> 赞同：0
> 
> 时间：2013-03-01T18:12:31.010
> 
> 标签：jquery, ajax, lightbox

我想要做的是当有人单击图像时，对 php 文件进行 AJAX 调用，返回的数据将显示在灯箱弹出窗口中。

这是我正在使用的代码

```
 $(".infoimg").on("click",function() {
    var theid = $(this).attr('id');
    var infofile = "http://www.mydomain.ext/info.php";
        $('.spinners').show().css({"display":"inline-block", "margin":"0 0 0 5px"});
              $.post( infofile,
                    { "theid": theid },
                        function(data){
                            $('.spinners').hide();
                            $('.infobox').html(data);
                        }
             );
    }); 
```

`.infobox`现在，我想在其中填充数据后在灯箱中显示其内容。或者，更好的是，在灯箱弹出窗口中显示返回的数据，而不将其输入任何 div。

一个页面中会有多个`.infoimg`具有不同 ID 的图像类。var`theid`实际上是图像的 ID。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:45:23.893

我根本无法让灯箱在[jsFiddle](http://jsfiddle.net)中工作，但我觉得如果你安排你的图像，它会工作的

```
<a href="http://www.mydomain.ext/info.php?theid=thisImageId">
   <img src="thisThumbnailImageSrc" id=thisImageId/>
</a> 
```

我在本地机器上尝试了我的想法，它似乎有效。Lightbox 一直等到它完成接收图像数据。它不关心扩展名是什么，只要你的php返回的数据是图像，你就可以使用这个解决方案。我还没有让它加载像 HTML 这样的任意数据，但如果我想通了，我会继续努力并更新这个答案。

# fancybox - JS图片库

> ID：15164208
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:12:54.253
> 
> 标签：fancybox

我正在建立一个投资组合网站，并想使用花哨的盒子来创建一个简单的画廊。

我希望一个部分的所有图像都驻留在一个文件夹（'gallery1'）中，并且我希望用户能够单击该文件夹中的所有图像。

这是我的html：

```
<div class="content_image" rel="gallery" href="image01_large.jpg" ><img src="gallery1/image01_small.jpg"/></div> 
```

我正在尝试使用这个 jQuery 脚本，但它不起作用：

```
<script type="text/javascript">

$("div[rel=gallery]").fancybox({
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'titlePosition'     : 'over',
                'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                    return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                }
            });

</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:22:18.790

[您可以在此处](http://www.1stwebdesigner.com/design/jquery-image-2012/)找到 jQuery 库插件列表，[在此处](http://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/)更新版本。

你想使用一个图库插件，而不是一小段脚本，因为它们被编码来处理所有流行的浏览器，并且可以巧妙地高效工作。我建议在那里找到合适的选项并尝试插件的示例用法。

**编辑**

也试试这个：

```
<script type="text/javascript">

$(function(){$("div[rel=gallery]").fancybox({
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'titlePosition'     : 'over',
                'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                    return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                }
            })});

</script> 
```

# javascript - Unable to get Dojo custom module working with ASP.net MVC

> ID：15164211
> 
> 赞同：0
> 
> 时间：2013-03-01T18:13:19.723
> 
> 标签：javascript, html, asp.net-mvc, dojo

New to Dojo and I am just trying to get a basic Hello world module working in dojo/MVC and can't seem to get it to work. I keep getting either

> no response / errors at all or cryptic Syntax errors in dojo.js e() h.injectUrl/h()

is what it says when using FireFox / Firebug. I am using 1.8 and have tried both the CDN and local copies.

Here is the code below.

**Index.cshtml**

```
 <script src="~/Scripts/dojo/dojo.js" data-dojo-config="async: true, isDebug: true, parseOnLoad: true"></script><script>
    // Require default stuff and new module
    require([
                "~/Scripts/dojoDemo/newModule"
    ],
    function (newModule) {
        newModule.setText("greetings", "Hello peoples");
        settimeout(function () {
            newModule.restoreText("greeting");
        }, 3000);
    });</script><h1 id="greetings">What up</h1>

<br/>
<br/> 
```

**newModule.js**

```
define([
    // Define the dependencies
    "dojo/dom"], 
    // Create this function to call new module
    function (dom) {
        var oldText = {};
        return {
            setText: function (id, text) {
                var node = dom.byId(id);
                oldText[id] = node.innerHTML;
                node.innerHTML = text;
            },
            restoreText: function (id) {
                var node = dom.byId(id);
                node.innerHTML = oldText[id];
                delete oldText;
            }
        };
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:31:13.167

You need to specify the path to the module in the dojo config and not the `require` call. `paths` map the top level module name to where the files are located to the server. By default, the file path is relative to dojo.js

```
<script src="~/Scripts/dojo/dojo.js" 
  data-dojo-config="async: true, isDebug: true, parseOnLoad: true, 
     paths: { dojoDemo: '../dojoDemo' }">
</script>
<script>
  require(["dojoDemo/newModule", "dojo/domReady!"], function (newModule) {
      newModule.setText("greeting", "Hello peoples");
      setTimeout(function () {
          newModule.restoreText("greeting");
      }, 3000);
  });
</script> 
```

# lazy-loading - ZF2 ServiceManager 工厂对象实例存储还是延迟加载？

> ID：15164214
> 
> 赞同：0
> 
> 时间：2013-03-01T18:13:29.800
> 
> 标签：lazy-loading, zend-framework2, service-locator

我正在做一个大型项目，其中数据库有许多表，出于不同的原因在不同的模块中访问这些表。所以想出了使用`Service Manager`to 指向工厂类的想法，该类将实例化`TableGateway`模型并根据请求返回它们，从而有效地延迟加载`TableGateway`模型。

但是我仍然不确定ServiceManager中的工厂是延迟加载还是使用ServiceManager实例化？

即，如果我的配置文件中有类似的内容

```
array(
    'service_manager' => array(
        'factories => array(
            'giftcard_table' => 'Giftcard\Factory\GiftcardTableFactory',
        ),
    ),
); 
```

`Giftcard\Factory\GiftcardTableFactory`每次我打电话都会创建一个新的实例`$sm->get('giftcard_table')`吗？`ServiceManager`或者无论我是否调用，这是否与每个 HTTP 请求开始时一起实例化`$sm->get('giftcard_table')`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T19:32:19.017

当您通过服务管理器的`get`方法请求它们时，工厂将被实例化。该方法调用[create](https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L481)方法，在请求工厂的情况下又调用[createFromFactory](https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L863-L864)方法。根据最后一个链接上突出显示的行，您可以看到它确实在请求时实例化了工厂。您还可以看到它存储了工厂。这是因为从服务管理器获取的服务默认是共享的。共享意味着在后续请求中将返回相同的实例。你可以把它想象成一个缓存。如果您愿意，可以[禁用此](http://framework.zend.com/manual/2.1/en/modules/zend.service-manager.quick-start.html#using-configuration)功能，以便在每个请求上创建给定服务的实例。

在配置文件中：

```
// Some configuration omitted
'service_manager' => array(
    /* ... */

    'shared' => array(
        'MyFactory' => false,
    )
); 
```

通过访问服务管理器对象：

```
$service_manager->setShared('MyFactory', false); 
```

前段时间写[了一篇关于服务管理器的文章](http://codingexplained.com/coding/php/zend-framework/zend-framework-2-service-manager)，里面有一段关于共享服务的概念（靠近底部），可能对你有用。

# sql - Oracle SQL：选择必须是字母的字符串

> ID：15164228
> 
> 赞同：0
> 
> 时间：2013-03-01T18:14:36.717
> 
> 标签：sql, oracle

如何从该字符串必须至少包含字母的列中排序字符串，而不是oracle中的所有数字？

例如，它应该能够找出

```
"28473a22" or "23D987w" 
```

但跳过

```
"25618792" and "845179" 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:18:22.710

```
select * from YourTable where regexp_like(col1, '[a-zA=Z]') 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!4/3b06c/1/0)

# r - 在 R 中使用 strptime 的意外结果

> ID：15164229
> 
> 赞同：0
> 
> 时间：2013-03-01T18:14:44.403
> 
> 标签：r, datetime, strptime

去年，我使用下面的代码将字符串转换为日期时间并且它工作，但现在我在运行后得到了意想不到的结果`strptime`。

```
Data <- structure(list(time = c("12:00 AM", "1:00 AM", "2:00 AM",
  "3:00 AM", "4:00 AM", "5:00 AM", "6:00 AM", "7:00 AM", "8:00 AM",
  "9:00 AM", "10:00 AM", "11:00 AM")),
  .Names = "time", class = "data.frame", row.names = c(NA, -12L)) 
```

为什么这会给我来自 strptime 的预期结果：

```
strptime(Data$time[1:10], format="%l:%M %p")
#  [1] "2013-03-01 00:00:00" "2013-03-01 01:00:00" "2013-03-01 02:00:00"
#  [4] "2013-03-01 03:00:00" "2013-03-01 04:00:00" "2013-03-01 05:00:00"
#  [7] "2013-03-01 06:00:00" "2013-03-01 07:00:00" "2013-03-01 08:00:00"
# [10] "2013-03-01 09:00:00" 
```

但是当我尝试用新的数据格式替换现有数据时，我收到警告和以下意外结果：

```
Data$time[1:10] <- strptime(Data$time[1:10], format="%l:%M %p")
# Warning message:
# In Data$time[1:10] <- strptime(Data$time[1:10], format = "%l:%M %p") :
#   number of items to replace is not a multiple of replacement length
Data
#                                                time
# 1                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0
# 2                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0
# 3                      0, 1, 2, 3, 4, 5, 6, 7, 8, 9
# 4                      1, 1, 1, 1, 1, 1, 1, 1, 1, 1
# 5                      2, 2, 2, 2, 2, 2, 2, 2, 2, 2
# 6  113, 113, 113, 113, 113, 113, 113, 113, 113, 113
# 7                      5, 5, 5, 5, 5, 5, 5, 5, 5, 5
# 8            59, 59, 59, 59, 59, 59, 59, 59, 59, 59
# 9                      0, 0, 0, 0, 0, 0, 0, 0, 0, 0
# 10                     0, 0, 0, 0, 0, 0, 0, 0, 0, 0
# 11                                         10:00 AM
# 12                                         11:00 AM 
```

* * *

当我运行上述`Data$time[1:10] <- strptime(Data$time[1:10], format="%l:%M %p")`问题中的代码以及`View(Data)`标准 RGui 中的结果数据时，它看起来与预期的一样，但是当我`View(Data)`在 RStudio 中时，会显示上面的意外结果。在 RGui 和 RStudio 中，函数`class(Data$time)`返回`[1] "POSIXlt" "POSIXt"`并按预期运行。这似乎是在 RStudio 中显示数据的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:13:47.893

我不知道这在过去是如何工作的，除非它在早期版本的 R 中得到支持......

`strptime`返回一个`POSIXlt`对象，它是一个包含多个组件的列表（`?POSIXlt`有关元素的描述，请参阅 ）。出现问题是因为您尝试用`POSIXlt`对象替换字符向量的一部分。这会将整个列转换为一个列表，其中前 10 个元素是`POSIXlt`对象的组件，后两个是字符向量中的原始元素。

如果您用来自的结果替换*整个*列`strptime`或用来自的结果创建一个新列，一切都会正常工作`strptime`：

```
Data$time2 <- strptime(Data$time, format="%l:%M %p")
Data$time  <- strptime(Data$time, format="%l:%M %p") 
```

# c++ - C++ 输出：GUI 还是控制台？

> ID：15164235
> 
> 赞同：4
> 
> 时间：2013-03-01T18:15:12.317
> 
> 标签：c++

我正在用 C++ 制作一个运行健身俱乐部模拟的应用程序。用户只需在开始时输入模拟数据（3 个整数值）并按下运行。之后没有用户输入 - 非常简单。

开始模拟后，很多逻辑都深入到较低的类中，但其中很多需要将简单的输出消息打印到 UI。无法返回消息，因为对象需要打印到 UI 但要继续工作。

我打算将对 UI 对象的引用传递给所有需要它的类，但我最终将它传递了很多——一定有更好的方法。

**我真正需要的是可以使调用 UI 的 printOutput(string) 函数比 cout << string;**

UI 还有一个 displayConnectionStatus(bool[] connections) 方法。

请记住，UI 继承了一个抽象的“UserInterface”类，因此可以轻松地更改简单的控制台 UI 和 GUI。

你如何建议我实现这个到 UI 的链接？

如果我要使用全局函数，如何将其重定向到调用我选择使用的 UserInterface 实现的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:18:35.780

不要害怕全局变量。

全局对象会损害封装，但对于不考虑立即可重用性的有针对性的解决方案，全局对象就可以了。

公开一个处理模拟事件的全局对象。然后，您可以选择打印事件、通过电子邮件发送、使用 OpenGL 或任何您喜欢的方式渲染它们。制作一个统一的接口，通过报告回调捕捉模拟内部发生的事情，然后您可以子类化这个全局对象以满足您的需求。

如果该对象不是全局的，您将在所有代码库中传递一个指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:26:12.723

我建议使用日志框架，即您自己的类 LogMessages，它具有获取数据和记录数据的功能，它可以是 UI、文件、网络或任何东西。

每个需要记录的类都可以使用你的记录类。

这样您就可以避免全局变量和通用解决方案，还可以查看[http://www.pantheios.org/](http://www.pantheios.org/)这是开源 C/C++ 诊断日志 API 库，您也可以使用它...

# java - 如何在 Excel 中将 Unix 纪元时间戳转换为人类可读的日期/时间？

> ID：15164237
> 
> 赞同：39
> 
> 时间：2013-03-01T18:15:28.083
> 
> 标签：java, excel, datetime, excel-formula

我有一个包含来自 Java 应用程序的 Unix 纪元时间戳的 Excel 文档。我想看看它们翻译成什么并将它们表示为 Excel 中人类可读的日期。

例如，以下长：**1362161251894**应评估为可读的内容，例如：**2013 年 3 月 1 日 11:07:31,894**

我假设我可以为此创建一个公式，但我不确定如何。谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-01T18:25:59.420

是的，您可以创建一个公式来为您执行此操作。Java 和 Unix/Linux 计算自 1970 年 1 月 1 日以来的毫秒数，而 Microsoft Excel 从 1900 年 1 月 1 日开始计算 Windows，从 1/1/1904 开始计算 Mac OS X。您只需要执行以下操作即可转变：

对于 Windows 上的 GMT 时间

```
=((x/1000)/86400)+(DATEVALUE("1-1-1970") - DATEVALUE("1-1-1900")) 
```

Mac OS X 上的 GMT 时间

```
=((x/1000)/86400)+(DATEVALUE("1-1-1970") - DATEVALUE("1-1-1904")) 
```

对于 Windows 上的本地时间（将 t 替换为您当前与 GMT 的偏移量）

```
=(((x/1000)-(t*3600))/86400)+(DATEVALUE("1-1-1970") - DATEVALUE("1-1-1900")) 
```

对于 Mac OS X 上的本地时间（将 t 替换为您当前与 GMT 的偏移量）

```
=(((x/1000)-(t*3600))/86400)+(DATEVALUE("1-1-1970") - DATEVALUE("1-1-1904")) 
```

* * *

在您的特定情况下，您似乎处于山区时间（GMT 偏移量为**7**）。因此，如果我将给定的值**1362161251894**粘贴到单元格 A1 的新 Excel 电子表格中，然后粘贴以下公式，我会得到 41333.46356 的结果，如果我随后告诉 Excel 格式化为日期（在单元格上按 ctrl+1 ) 是：**2013 年 2 月 28 日上午 11:07**

```
=(((A1/1000)-(7*3600))/86400)+(DATEVALUE("1-1-1970") - DATEVALUE("1-1-1900")) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-01T18:20:59.123

[这似乎在这里得到了回答](http://www.mrexcel.com/forum/excel-questions/49217-converting-normal-time-epoch-time-format-using-excel.html)，

> =(A1/86400)+25569

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-06T21:36:03.063

纪元时间以毫秒 ( `1523060201838`) 为单位提供。用户正在寻找转换为 NY 时区（*GMT -04:00*或*DST -14400*）。

Excel 上的单元格 A1 具有 13 位值纪元时间。

```
((A1/1000)-14400)/86400 + 25569 
```

转换为`4/6/18 8:16 PM`（在将单元格格式化为日期之后）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-11T16:23:02.213

我发现最容易记住和阅读的公式是：

在 Excel 中从 Unix/Epoch 时间戳转换为日期（假设时间戳在 A2 中）：

```
=(A2/86400)+DATE(1970,1,1) 
```

这将生成 GMT Excel 时间值。然后，您需要将单元格的格式设置为其中一种日期格式，或者创建您自己的自定义格式。我倾向于使用：

```
dd-mmm-yy                --> gives 05-Oct-18
dd-mmm-yyyy hh:mm:ss     --> gives 05-Oct-2018 09:45:12 
```

从日期转换为纪元时间戳（假设日期在 A2 中）：

```
=(A2-DATE(1970,1,1))*86400 
```

我发现这个页面很有帮助： [Extendoffice excel-timestamp-to-date](https://www.extendoffice.com/documents/excel/2473-excel-timestamp-to-date.html)

注意：如果您需要从GMT（以纽约为例）调整为当地时间，请在末尾添加时差。下面显示了 -5 小时的偏移量。

```
=(A2/86400)+DATE(1970,1,1)+(-5/24) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-12T08:32:08.763

尝试

```
=(A2/86400)+DATE(1970,1,1)+TIME(5,30,0) 
```

这将有助于当地的时间，比如印度是格林威治标准时间 + 5:30。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-08T20:42:18.513

Excel 将天数表示为整数值，将时间表示为小数值。因此，如果从 UNIX 提供自 1970 年 1 月 1 日以来以毫秒为单位的纪元时间，那么我们希望除以一年中的毫秒数，并添加[Excel 对 1970 年 1 月 1 日的表示](https://support.office.com/en-us/article/DATEVALUE-function-DF8B07D4-7761-4A93-BC33-B7471BBFF252)以提供人类可读的 UTC 时间。如果您的值在单元格 A1 中，则 Excel 需要：

```
=A1/86400/1000+DATEVALUE("1-1-1970") 
```

请注意，如果您的纪元时间以秒为单位而不是毫秒，则可以删除 /1000。要转换为本地时间，其中 't' 是您的本地 UTC 偏移量（如果您有负 UTC 偏移量，请记住使用负值），您可以添加/减去 UTC 偏移量：

```
=A1/86400/1000+DATEVALUE("1-1-1970")+t/24 
```

请注意，您的 UTC 偏移量可能会根据您所在位置是否采用夏令时而有所不同，因此对于在单个电子表格中显示全年本地时间来说，这是一个不完整的解决方案。

# java - Java - 如何检查一个点是否在一个圆的切片内

> ID：15164240
> 
> 赞同：0
> 
> 时间：2013-03-01T18:15:37.037
> 
> 标签：java, math, geometry

我画了一个圆圈，我想做它，这样我就可以得到多于四个的切片。我可以轻松地做四个象限，因为我只检查鼠标是否在圆圈内和盒子内。

这就是我检查点是否在圆圈中的方式。

```
if( Math.sqrt((xx-x)*(xx-x) + (yy-y)*(yy-y)) <= radius)
{
    return true;
}
else
{
    return false;
} 
```

如果圆圈被分成 4 个以上的区域，我该如何修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:24:23.533

对于径向切片（圆形扇区），您有几种选择：

1.  用于`Math.atan2`计算圆心到该点的直线的 4 象限角。比较切片角度以确定切片索引。
2.  对于特定切片，您可以测试该点落在每个切片边缘的哪一侧。相应地对点进行分类。这计算起来更复杂，但可能比调用更快（对于单个切片）`Math.atan2`。

以下示例代码计算特定点的切片索引：

```
int sliceIndex(double xx, double yy, double x, double y, int nSlices) {
    double angle = Math.atan2(yy - y, xx - x);
    double sliceAngle = 2.0 * Math.PI / nSlices;
    return (int) (angle / sliceAngle);
} 
```

上面的代码做了以下假设：

*   切片都是相同的（角度）宽度
*   切片是逆时针索引的
*   切片 0 从 +x 轴开始
*   切片拥有右边缘但不拥有左边缘

如果这些假设不适用，您可以调整计算。（例如，您可以减去起始角度`angle`以消除假设 3。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:26:45.153

首先，我们可以像您一样检查该点是否在圆圈内。但我不会将它与检查哪个象限结合起来（这就是你有 radius/2 的原因吗？）

```
if( (xx-x)*(xx-x) + (yy-y)*(yy-y) > radius*radius)
   return false; 
```

现在我们可以使用 atan2 函数查看该点所在的区域。`atan2`与 Arctan 类似，只是 Arctangent 函数总是返回介于 -pi/2 和 pi/2 之间的值（-90 和 +90 度）。我们需要极坐标方式的实际角度。现在假设 (x,y) 是您的圆的中心，我们对我们拥有的点 (xx,yy) 的位置感兴趣

```
 double theta = Math.atan2(yy-y,xx-x);
  //theta is now in the range -Math.PI to Math.PI
  if(theta<0)
     theta = Math.PI - theta;
  //Now theta is in the range [0, 2*pi]
  //Use this value to determine which slice of the circle the point resides in.
  //For example:
  int numSlices = 8;
  int whichSlice = 0;
  double sliceSize = Math.PI*2 / numSlices;
  double sliceStart;
  for(int i=1; i<=numSlices; i++) {
      sliceStart = i*sliceSize;
      if(theta < sliceStart) {
          whichSlice = i;
          break;
      }
  }
  //whichSlice should now be a number from 1 to 8 representing which part of the circle
  // the point is in, where the slices are numbered 1 to numSlices starting with
  // the right middle (positive x-axis if the center is (0,0). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T20:22:43.947

这更像是一个三角问题尝试这样的事情。

```
 int numberOfSlices=8;

   double angleInDegrees=(Math.toDegrees(Math.atan2(xx-x ,yy-y)));

   long slice= Math.round(( numberOfSlices*angleInDegrees )/360 ); 
```

# jquery-selectors - 父 父 下一个 子 子选择器？

> ID：15164248
> 
> 赞同：1
> 
> 时间：2013-03-01T18:16:29.127
> 
> 标签：jquery-selectors, parent-child

如何简化这个 jquery 选择器？ **$(this).parent().parent().next().children().children().slideDown('normal');**

它有效，但我想学习如何改进它。谢谢！:)

**更新：**这是代码示例。

```
<tr>
    <td><div class="LinkHeader accordionButton">TRAINING VIDEOS<span class="right"></span></div></td>
  </tr>
  <tr>
    <!-- Content of Training Videos -->
    <td align="left" valign="top">
    <div class="accordionContent"> (I want to select this div)
        <div id="yunero"></div>
    </div>
    </td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:56:31.713

根据您的标记，这样写会更短（并且可以说更清晰）：

```
$(this).closest("tr").next().find(".accordionContent").slideDown(); 
```

在这里，[closest()](http://api.jquery.com/closest/)将遍历祖先链并匹配`<tr>`它找到的第一个元素，然后[next()](http://api.jquery.com/next/)将匹配其直接下一个兄弟元素，最后[find()](http://api.jquery.com/find/)与[类选择器](http://api.jquery.com/class-selector/)将返回`<div>`您感兴趣的元素。

顺便提一下，严格来说，动画没有`"normal"`持续时间。唯一受支持的字符串是`"fast"`(200 ms) 和`"slow"`(600 ms)，任何其他字符串都将被解释为 400 ms，就好像您完全省略了该参数一样。例如，将表现与or plain`slideDown("superFast")`完全相同。`slideDown("normal")``slideDown()`

# batch-file - 有例外的批量移动？还是使用 xcopy 并在之后删除原始文件？

> ID：15164249
> 
> 赞同：3
> 
> 时间：2013-03-01T18:16:31.773
> 
> 标签：batch-file, move, xcopy, file-organization

我有一个脚本，可以从所有子目录中提取所有文件，然后删除空子目录，提取的部分内容如下：

```
for /r %%a in (*.*) do move "%%a" "%~dp0" 
```

除了名为“_Unsorted”的子目录外，有没有办法做到这一点？我知道 xcopy 有一个`/exclude`选项，所以像

```
for /r %%a in (*.*) do xcopy "%%a" "%~dp0" /exclude "\_Unsorted\" 
```

几乎可以工作，但我不确定如何在复制原件后删除原件，以得到与`move`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:27:58.730

你可以使用robocopy吗？

```
robocopy from\path to\path *.* /mov /e /xd _Unsorted 
```

`/mov`：移动而不是复制（复制后删除源）

`/e`: 递归（包括空子目录）

`/xd _Unsorted`: 排除名为 _Unsorted 的目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T22:36:58.163

一些仅限批处理的选项：

1.  在循环体中添加一个过滤器：

    ```
    for /r %%a in (*.*) do (
      (echo %%~dpa | find /i "\_Unsorted\" 1>nul) || move "%%a" "%~dp0"
    ) 
    ```

    或者：

    ```
    for /r %%a in (*.*) do (
      (echo %%~dpa | find /i /v "\_Unsorted\" 1>nul) && move "%%a" "%~dp0"
    ) 
    ```

    在这两个版本中，该`find`命令都用于将文件的路径与 substring 进行匹配`\_Unsorted\`。在第一个版本中，如果有匹配则`find`返回，否则返回。该命令仅在 的情况下被调用，这是operator` 的效果。`success``fail``move``fail``||`

    在第二个版本中，`/v`开关反转结果，`find`现在`success`意味着*不*匹配。因此，`&&`运算符用于`move`在 的情况下调用`success`。

2.  将过滤器应用于文件列表，以便循环永远不会遍历`_Unsorted`条目。

    ```
    for /f "delims=" %%a in (
      'dir /s /b ^| find /i /v "\_Unsorted\"'
    ) do move "%%a" "%~dp0" 
    ```

    与前一个选项相比，这是对原始脚本更重要的更改，因为它用循环替换了`for /r`循环`for /f`。

    基本上，`for /f`循环用于读取/解析一段文本、文本文件或命令的输出。在这种情况下，该`dir`命令会提供当前目录树中文件的完整列表，并且该`find`命令会过滤掉包含`\_Unsorted\`在其路径中的文件。循环在`for /f`被 过滤后读取列表`find`，这意味着它永远不会命中存储在`_Unsorted`（子）文件夹中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T16:46:08.407

上面的答案 3 使用 ROBOCOPY 创建了一个（可能是空的）子目录树。

以下需要获取xxcopy

```
xxcopy c:\filematch d:\dest\ /SGF /RC 
```

从 c: 复制到文件夹 d:\dest

/SGF 递归子目录，但在目标处展平结果。在文件名冲突的情况下，它将 .0001 附加到第一个重复文件名。因此 /SGF 将每个匹配的文件从源驱动器复制到指定的目标文件夹中，无论它占据什么子目录。

/RC 在成功复制后从源中删除文件，也就是移动它们。

不确定这是否是 OP 想要的，但这个讨论帮助了我！

# asp-classic - 循环遍历 SQL 结果并执行 IF、ELSE

> ID：15164251
> 
> 赞同：1
> 
> 时间：2013-03-01T18:16:37.767
> 
> 标签：asp-classic, vbscript

我有一个选择，例如：

```
SELECT item, group, paid FROM table WHERE group=120 
```

结果将是：

```
item    group    paid
A       120      1
B       120      1
C       120      1
D       120      0 
```

我需要遍历结果并检查是否所有项目都已支付 = 1 做某事，而不是做另一件事。谢谢。

这就是我所拥有的：

```
<%      
    SET Lista= MSSQL.Execute("SELECT item, group, paid FROM table WHERE group=120")
        Do While Not Lista.EOF
        paid= Lista("paid")
            IF paid= 1 THEN
                Response.Write "1"
            ELSE
                Response.Write "0"      
            END IF
        Loop
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:13:45.643

尝试这个：

```
SET Lista= MSSQL.Execute("SELECT item, group, paid FROM table WHERE group=120")
Lista.Filter = "paid = 0"
If (Lista.Eof) Then
Response.write("0")
Else
Response.Write("1")
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:26:32.103

这个小改动怎么样...

```
 <%      
        SET Lista= MSSQL.Execute("SELECT item, group, paid FROM table WHERE group=120")
            While Not Lista.EOF
            paid = Lista("paid")
                IF paid= 1 THEN
                    Response.Write "1"
                ELSE
                    Response.Write "0"      
                END IF
           Lista.MoveNext
           Wend
    %> 
```

# php - GET 请求错误，Uncaught SyntaxError: Unexpected identifier OPTIONS

> ID：15164254
> 
> 赞同：1
> 
> 时间：2013-03-01T18:16:54.607
> 
> 标签：php, javascript, http, get, xmlhttprequest

发送 get 请求时，我似乎遇到了一个非常奇怪的错误，我在同一台服务器上同时运行 PHP 和 javascript 代码，所以没有来源问题。错误：

```
Uncaught SyntaxError: Unexpected identifier
OPTIONS http://localhost/Scores.php
Uncaught SyntaxError: Unexpected identifier 
```

在这条线上：

```
 req.send("&name="+username+"&pw="+password); 
```

我的完整代码：

```
function initiateLoginSequence() {
    var isnewplayer=prompt("Hello! Are you new?(Y/N)");
    if(isnewplayer == "N") {
        var username = prompt("Enter username.");
        var password = prompt("Enter Password.");
    } else {
        var username = prompt("Enter a username. This will be used for future logins.");
        var password = prompt("Enter a password. This will be used for future logins.","*");
        var req = new XMLHttpRequest();  
        req.open('GET', 'http://localhost/Scores.php', true);   
        req.send("&name="+username+"&pw="+password);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:20:19.307

尝试这个：

```
req.open('GET', 'http://69.144.34.106/Scores.php?name='+username+'&pw='+password, true);   
req.send(); 
```

# php - PHP 跨站 XML

> ID：15164256
> 
> 赞同：-2
> 
> 时间：2013-03-01T18:17:04.443
> 
> 标签：php, xml, web-services, simplexml

我在名为 abc.php 的文件中有这个，这将返回一个有效的 xml 文档，而不是在末尾显示 -string- 标签并开始

```
header('Content-type: application/xml');
$xml = file_get_contents("http://www.xxx.asmx/test?id=1"); //External web service
$xmlstr = simplexml_load_string($xml);
echo $xmlstr; 
```

我想使用 abc.php 的有效 xml 数据，提取某些数据，将其存储在我的数据库中，并定期检查另一台服务器的输出，我试过这个：

```
ob_start();
include 'abc.php';
$result = ob_get_clean() 
```

还有这个：

```
$xml = file_get_contents("abc.php"); 
$xmlstr = simplexml_load_string($xml); 
```

没有成功，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:12:10.180

`file_get_contents("abc.php")`将返回文件*“abc.php”的**内容*；它不会执行该 PHP 代码。with output buffering 技巧应该做大致正确的事情，但我不确定你为什么要这样做，所以不值得弄清楚为什么会失败。*`include`*

 *如果您可以访问 中的代码`abc.php`，则只需将其制成一个 PHP 函数，该函数将返回处理后的 XML：

```
function get_the_actual_xml()
{
    $xml = file_get_contents("http://www.xxx.asmx/test?id=1"); // External web service
    $xml_obj = simplexml_load_string($xml); // Load into SimpleXML object
    return (string)$xml_obj; // Convert contents back to a string
} 
```

如果由于某种原因您的两个 PHP 文件需要位于不同的服务器上，您将需要引用指向 的URL **，**`abc.php`而不仅仅是它在磁盘上的位置。这样，PHP 代码将被执行，而您将得到的是该`echo`语句的结果。如果您的服务器启用[了`allow_url_fopen`设置](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，这很简单`$remotely_processed_content = file_get_contents('http://sanjosecostarica.org/test/abc.php')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:02:04.820

最后我无法得到“abc.php”的结果，但只有内容，我成功地尝试了不同的方法：

```
$xml = file_get_contents("http://www.xxx.asmx/test?id=1"); //External web service
$xmlstr = simplexml_load_string($xml);
$xmlok = <<<XML
$xmlstr
XML;

$xml = simplexml_load_string($xmlok); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:21:12.830

确保您也输出 MIME 类型，否则服务器会将 text/html 提供给它，这将是错误的。把这个函数

```
header("Content-type: application/xml"); 
```

在 abc.php 中，因此客户端会将其识别为 XML。*

# lucene - 如何在 Elasticsearch 中使用修饰符执行全文搜索

> ID：15164259
> 
> 赞同：0
> 
> 时间：2013-03-01T18:17:17.243
> 
> 标签：lucene, full-text-search, nlp, elasticsearch

我正在使用带有 Playframework[Java] 和全文搜索选项的 Elasticsearch 构建一个 Web 应用程序。我想处理“ 300 美元**以下的**索尼爱立信手机”或“ 3g 三星手机”之类**的东西。**由于我是 Lucene/Elasticsearch 的新手，所以想知道最好的方法是什么。

我是否需要在我的代码中解析诸如“上、下、与”等术语，然后为 Elasticsearch 生成相关查询，或者有更好/标准的方法来做到这一点？我知道 NLP 是一个非常复杂的领域，但想知道其他人是如何做到的，以及需要付出多少努力。我想补充一点，它不需要完美。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:38:17.953

开箱即用，Elasticsearch 支持稍微修改的[Lucene 查询语法](http://lucene.apache.org/core/3_6_2/queryparsersyntax.html)，我不知道有任何插件可以执行您所描述的操作。因此，您可能需要在应用程序中进行解析并生成 Elasticsearch 查询。

# ruby-on-rails - 使用 Rubber 部署时启用 hstore

> ID：15164262
> 
> 赞同：0
> 
> 时间：2013-03-01T18:17:21.483
> 
> 标签：ruby-on-rails, postgresql, amazon-ec2, hstore, rubber

我正在部署一个使用 PostgreSQL 和 HSTORE 的 Rails 应用程序。

为了部署它，我使用了[Rubber](http://github.com/rubber/rubber)。

一切正常，除了 HSTORE 没有正确启用。当包含`execute("CREATE EXTENSION hstore")`运行的迁移时，我收到以下错误：

```
** [out :: production.---] 
** [out :: production.---] -- execute("CREATE EXTENSION hstore")
** [out :: production.---] 
** [out :: production.---] rake aborted!
** [out :: production.---] An error has occurred, this and all later migrations canceled:
** [out :: production.---] 
** [out :: production.---] PG::Error: ERROR:  permission denied to create extension "hstore"
** [out :: production.---] HINT:  Must be superuser to create this extension. 
```

创建 postgres 实例的脚本具有以下代码：

```
create_user_cmd = "CREATE USER #{env.db_user} WITH NOSUPERUSER CREATEDB NOCREATEROLE" 
```

所以我认为问题可能与`NOSUPERUSER`此处设置的属性有关。

有什么方法可以使用橡胶启用 hstore，同时保持大部分生成的文件不变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:59:18.963

问题是橡胶将数据库用户创建为`NOSUPERUSER`. 我的解决方法是创建在 capistrano 之前和之后运行的任务，`deploy:migrate`这将改变用户`SUPERUSER`来回切换。

这是代码：

```
namespace :rubber do

  namespace :project do

    before "deploy:migrate", "rubber:project:add_pg_superuser_and_enable_hstore"
    after "deploy:migrate", "rubber:project:remove_pg_superuser"

    task :add_pg_superuser_and_enable_hstore,
         :roles => [:postgresql_master, :postgresql_slave] do
      alter_user_cmd = "ALTER USER #{rubber_env.db_user} SUPERUSER"
      create_hstore_cmd = "CREATE EXTENSION IF NOT EXISTS hstore;"
      rubber.sudo_script "add_superuser_create_hstore", <<-ENDSCRIPT
        sudo -i -u postgres psql -c "#{alter_user_cmd}"
        sudo -i -u postgres psql -c "#{create_hstore_cmd}"
      ENDSCRIPT
    end

    task :remove_pg_superuser, :roles => [:postgresql_master,
                                          :postgresql_slave] do
      alter_user_cmd = "ALTER USER #{rubber_env.db_user} NOSUPERUSER"
      rubber.sudo_script "add_superuser_create_hstore", <<-ENDSCRIPT
        sudo -i -u postgres psql -c "#{alter_user_cmd}"
      ENDSCRIPT
    end

  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T09:57:55.703

另一种选择是在部署时不涉及 postgres 超级用户，而是创建一个模板（或使用默认模板）并在模板上安装扩展。然后，当您创建数据库时，它将安装扩展。

很好的答案[在这里](http://clarkdave.net/2012/09/postgresql-error-type-hstore-does-not-exist/)和[这里](https://github.com/diogob/activerecord-postgres-hstore/issues/99)。

# mysql - MySQL SELECT 行响应其中一列中的特定 MULTIPLE 值

> ID：15164264
> 
> 赞同：1
> 
> 时间：2013-03-01T18:17:38.360
> 
> 标签：mysql, select, multiple-value

我浏览了整个网络，也浏览了 StackOverflow，发现了许多类似的主题，但没有一个能具体满足我的需求。所以我把它发送出去，我知道我可能缺少一些小东西才能让它工作。

让我们想象一下下表：

```
 location  |   title   | description | quantity 
    ============|===========|=============|==========
      shelf     |   apple   |    red      |    2
      drawer    |   banana  |    yellow   |    4
      shelf     |   kiwi    |    green    |    2
      cupboard  |   lemon   |    yellow   |    1
      fridge    |   melon   |    orange   |    3
      drawer    |   peach   |    orange   |    1 
```

我想要做的是从该表中选择所有在(so AND ) 中`drawer`或上的项目，然后按例如位置升序和数量降序对它们进行排序。`shelf``drawer``shelf`

所以我所拥有的（在整个网络上搜索之后）是以下代码，这是唯一不返回错误的代码，**但它也不返回任何项目：**

`SELECT * FROM items WHERE location = 'shelf' AND location = 'drawer' ORDER BY location ASC, quantity DESC`

我哪里错了？任何反馈将不胜感激！

通常问题涉及如何从多个表中选择值然后将它们连接起来。但是，我只需要一张表中的值；然而，这些价值观需要回应它们共享的特定多重价值观。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:19:03.317

```
SELECT * FROM items WHERE location = 'shelf' or location = 'drawer'
ORDER BY location ASC, quantity DESC 
```

或者

```
SELECT * FROM items WHERE location in ('shelf','drawer')
ORDER BY location ASC, quantity DESC 
```

虽然只有两个项目，我可能会自己选择第一个，3个或更多，我可能会使用 in()

附加信息：您没有返回任何记录的原因是因为您使用`AND`的是您的状况。请记住，一行中的每一列都有一个且只有一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:27:59.473

尝试使用这个......

如果您想在 php 中使用它，您可以修改我的代码并将其替换为您的代码。我在开发这个时遇到了类似的问题：

```
$data = mysql_query("SELECT * FROM cancer WHERE Age ='1'OR Age = '2' OR Age = '3'OR Age = '4'OR Age = '5'OR Age = '6'OR Age = '7'OR Age = '8'OR Age = '9'") 
```

如果是 sql，请使用：

```
SELECT * FROM items WHERE location = 'shelf' or location = 'drawer'
ORDER BY location ASC, quantity DESC 
```

# asp.net-mvc - JW Player 在弹出配置中打开视频

> ID：15164269
> 
> 赞同：1
> 
> 时间：2013-03-01T18:17:55.913
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, jwplayer

如何在 JWPlayer 中配置视频的弹出窗口

```
 jwplayer("mediaplayer").setup({
                    flashplayer: "player.swf",
                    file: 'http://youtu.be/wi8N0pwiEuzc',
                    width: '280',
                    height: '150',
                    image: "Content/images/thumb.jpg",
                    popup:'true'

                }); 
```

# matlab - 使用 Matlab 数字化显示空间区域的文件

> ID：15164270
> 
> 赞同：1
> 
> 时间：2013-03-01T18:17:58.890
> 
> 标签：matlab, image-processing, plot, coordinates, contour

我有以下区域的扫描图像，我想根据**坐标**和**深度**对其进行数字化，其中深度以轮廓线的形式显示。深度在上图中由轮廓线上的数字显示。我想根据网格/像素划分这个图像，并为每个网格/像素获取两个数据 - 代表它的 (x, y) 坐标和深度。

Matlab 中是否有一些 Matlab 函数或文件交换可用于执行此任务而不是手动执行？我想比手动完成这项任务更快。谢谢！

![在此处输入图像描述](../Images/bc216f90c79e62e8498bb5ddd46ea139.png)

# sql - 使用 GROUP BY 跨多个列的 SQL MIN

> ID：15164273
> 
> 赞同：4
> 
> 时间：2013-03-01T18:18:14.457
> 
> 标签：sql, grouping, min

我正在尝试获取包含以下信息的表格：

```
+----+---+---+
| ID | X | Y |
+----+---+---+
| A  | 1 | 3 |
| A  | 1 | 1 |
| A  | 1 | 2 |
| A  | 1 | 7 |
| B  | 2 | 2 |
| B  | 3 | 3 |
| B  | 1 | 9 |
| B  | 2 | 4 |
| B  | 2 | 1 |
| C  | 1 | 1 |
+----+---+---+ 
```

我希望能够在两列中选择最小值，按第一列分组——“X”列比 Y 列更重要。例如，查询应该返回如下内容：

```
+----+---+---+
| ID | X | Y |
+----+---+---+
| A  | 1 | 1 |
| B  | 1 | 9 |
| C  | 1 | 1 |
+----+---+---+ 
```

有任何想法吗？我已经经历了几十个帖子和实验，到目前为止还没有运气。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:20:28.260

您似乎想要具有最小 x 值的*行*。并且，如果 x 上有重复项，则取 y 最小的那个。

为此，请使用`row_number()`：

```
select id, x, y
from (select t.*,
             row_number() over (partition by id order by x, y) as seqnum
      from t
     ) t
where seqnum = 1 
```

如果你的数据库不支持窗口函数，你仍然可以用 SQL 来表达：

```
select t.id, t.x, min(t.y)
from t join
     (select id, MIN(x) as minx
      from t
      group by id
     ) tmin
     on t.id = tmin.id and t.x = tmin.minx
group by t.id, t.x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:20:58.157

如果您的 RDBMS 支持窗口函数，

```
SELECT ID, X, Y
FROM
        (
            SELECT ID, X, Y,
                    ROW_NUMBER() OVER (PARTITION BY ID ORDER BY X, Y) rn
            FROM    tableName
        ) d
WHERE   rn  = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/58c38/1)

# java - 除了使用 Cursor 之外，还有其他方法可以从 SQLite 数据库中获取数据吗？

> ID：15164275
> 
> 赞同：2
> 
> 时间：2013-03-01T18:18:18.430
> 
> 标签：java, android, android-sqlite, android-cursor

我只是很有趣：我可以使用其他东西从数据库中检索数据，而不是`Cursor`像这样使用：

```
Cursor fetch_ = database_.rawQuery("SELECT " + USER_ID + " FROM " + TABLE_NAME, null);
if (fetch_.moveToFirst()) {
    do {
        String data_ = fetch_.getString(fetch_.getColumnIndex("userId"));
    } while (fetch_.moveToNext());
}
fetch_.close(); 
```

那么还有其他一些方法吗？可能我可以直接在 Java 数据结构`HashMap<>`或其他东西中获取数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:34:03.757

是的，您可以使用一些 ORM 库，请参阅：[Any good ORM tools for Android development？](https://stackoverflow.com/questions/371538/any-good-orm-tools-for-android-development)

我个人最喜欢的是`ActiveAndroid`图书馆（[https://www.activeandroid.com/](https://www.activeandroid.com/)）

请参阅文档：[https ://github.com/pardom/ActiveAndroid/wiki](https://github.com/pardom/ActiveAndroid/wiki)

* * *

例如

```
@Table(name = "Items")
public class Item extends Model {
    @Column(name = "Name")
    public String name;

    @Column(name = "Category")
    public Category category;
} 
```

获取所有内容应该像

```
List<Item> items = new Select().from(Item.class).execute(); 
```

# css - css 可调整大小的横幅

> ID：15164278
> 
> 赞同：0
> 
> 时间：2013-03-01T18:18:25.473
> 
> 标签：css

好的，我找到了本教程“[带有 CSS 的 Stretchy Image Header Banner](http://www.electrictoolbox.com/css-stretchy-image-header-banner/) ”，但问题（如本教程中列出的那样）是高度。随着浏览器放大，高度变得非常大。有没有办法解决这个问题？由于横幅会按比例扩大，因此高度必须变大，但我想知道是否有更好的方法来做到这一点。随着横幅变大，有没有办法从顶部按一定百分比开始裁剪横幅？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:23:31.677

在图像上设置 a`max-height`以防止其垂直变大。

[http://jsfiddle.net/8C9ms/](http://jsfiddle.net/8C9ms/)

# android - 在 DialogFragment 中更改 ProgressDialog 的字体

> ID：15164280
> 
> 赞同：9
> 
> 时间：2013-03-01T18:18:29.290
> 
> 标签：android

`ProgressDialog`我可以知道是否可以在 内更改消息显示的字体`DialogFragment`？

```
public class LoadFromCloudTaskFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        this.progressDialog = new ProgressDialog(this.getActivity());
        this.progressDialog.setMessage(progressMessage);
        this.progressDialog.setCanceledOnTouchOutside(false);

        return progressDialog;
    } 
```

通过继承创建自定义类`ProgressDialog`可能是其中一种方式。但是，我想知道有没有更好的选择？可悲的是，我们没有`ProgressDialog.Builder`.

我尝试过的一种选择是

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    this.progressDialog = new ProgressDialog(this.getActivity());
    this.progressDialog.setMessage(progressMessage);
    this.progressDialog.setCanceledOnTouchOutside(false);

    Utils.setCustomFont(this.progressDialog.findViewById(android.R.id.message), Utils.ROBOTO_LIGHT_FONT);

    return progressDialog;
} 
```

但这会给我错误

> android.util.AndroidRuntimeException: requestFeature() 必须在添加内容之前调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-05T15:22:27.503

```
Typeface font = Typeface.createFromAsset(getContext().getAssets(), "fonts/Roboto-Regular.ttf");
SpannableStringBuilder spannableSB = new SpannableStringBuilder(getString(R.string.text_please_wait));
spannableSB.setSpan (new CustomTypefaceSpan("fonts/Roboto-Regular.ttf", font), 0, spannableSB.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
loadDialog = ProgressDialog.show(this, null, spannableSB, true, false); 
```

* * *

```
public class CustomTypefaceSpan extends TypefaceSpan {

    private final Typeface newType;

    public CustomTypefaceSpan(String family, Typeface type) {
       super(getContext(),family);
       newType = type;
    }

    @Override
    public void updateDrawState(TextPaint ds) {
         applyCustomTypeFace(ds, newType);
    }

    @Override
    public void updateMeasureState(TextPaint paint) {
        applyCustomTypeFace(paint, newType);
    }

    private static void applyCustomTypeFace(Paint paint, Typeface tf) {
        int oldStyle;
        Typeface old = paint.getTypeface();
        if (old == null) {
            oldStyle = 0;
        } else {
            oldStyle = old.getStyle();
        }

        int fake = oldStyle & ~tf.getStyle();
        if ((fake & Typeface.BOLD) != 0) {
            paint.setFakeBoldText(true);
        }

        if ((fake & Typeface.ITALIC) != 0) {
            paint.setTextSkewX(-0.25f);
        }

        paint.setTypeface(tf);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:30:00.487

从文档中可以看出：http: [//developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

```
public static class MyDialogFragment extends DialogFragment {
    static MyDialogFragment newInstance() {
        return new MyDialogFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.hello_world, container, false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText("This is an instance of MyDialogFragment");
        return v;
    }
} 
```

我怀疑您可以为 DialogFragment 提供自定义布局 XML。

在我继续使用此实用程序类设置字体之后：

```
import java.util.Hashtable;
import java.util.Map;

import android.content.Context;
import android.graphics.Typeface;
import android.widget.TextView;

/**
 * Taken from bug on b.android.com
 * https://code.google.com/p/android/issues/detail?id=9904
 * <p>
 * Optimizes way to work with typefaces and avoids context related memory leak
 * */
public class Typefaces {

    private static final Map<String, Typeface> cache = new Hashtable<String, Typeface>();

    public static Typeface get(Context c, String name) {
        synchronized (cache) {
            if (!cache.containsKey(name)) {
                Typeface t = Typeface.createFromAsset(c.getAssets(),
                        String.format("fonts/%s.ttf", name));
                cache.put(name, t);
            }
            return cache.get(name);
        }
    }

    public static Typeface _default(Context c) {
        return get(c, "verdana");
    }

    public static void setFonts(Context c, TextView... tvs) {
        for (TextView t : tvs) {
            if (t != null)
                t.setTypeface(_default(c));
        }
    }

} 
```

假设您放置了自定义字体`assets/fonts/verdana.ttf`（如果使用`_default()`方法）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T18:41:48.850

**建议的解决方案之一如下。但我认为这不是一个好方法。非常欢迎任何进一步的建议。**

```
public class ProgressDialogEx extends ProgressDialog {
    public ProgressDialogEx(Context context) {
        super(context);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        View view = this.findViewById(android.R.id.message);
        if (view != null) {
            // Shouldn't be null. Just to be paranoid enough.
            Utils.setCustomTypeface(view, Utils.ROBOTO_LIGHT_FONT);
        }
    }
} 
```

* * *

```
public class LoadFromCloudTaskFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        this.progressDialog = new ProgressDialogEx(this.getActivity());
        this.progressDialog.setMessage(progressMessage);
        this.progressDialog.setCanceledOnTouchOutside(false);

        return progressDialog;
    } 
```

## Utils.setCustomTypeface

```
public static final Typeface ROBOTO_LIGHT_TYPE_FACE = Typeface.createFromAsset(MyApplication.instance().getAssets(), "fonts/Roboto-Light.ttf");

public static void setCustomTypeface(View view, Typeface typeFace) {
    if (view instanceof TextView) {
        ((TextView)view).setTypeface(typeFace);
    } else if (view instanceof EditText) {
        ((EditText)view).setTypeface(typeFace);
    } else if (view instanceof ViewGroup) {
        ViewGroup viewGroup = (ViewGroup)view;
        int count = viewGroup.getChildCount();
        for (int i = 0; i < count; i++) {
            setCustomTypeface(viewGroup.getChildAt(i), typeFace);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-15T01:04:39.423

虽然这是一个老问题，但我整理了一些可能对未来访客有所帮助的信息。

在我开始之前，这不是即时设置。它只能在 ProgressDialog 初始化时完成，并且只适用于内置字体。既然都说了，那我们就开始吧！首先，我们需要在您的文件中使用 的父级创建一个样式`android:Theme.Holo.Dialog`，如下所示。`styles.xml`

```
<style name="CustomFontDialog" parent="android:Theme.Holo.Dialog">
    <item name="android:typeface">monospace</item>
</style> 
```

然后在你的初始化中添加一点：

```
ProgressDialog prog = new ProgressDialog(new ContextThemeWrapper(context, R.style.CustomFontDialog))); 
```

不过，为了使这个答案尽可能接近这个问题的答案，我正在研究一个名为[Calligraphy](https://github.com/chrisjenx/Calligraphy/)的库，通过[对问题的响应](https://github.com/chrisjenx/Calligraphy/issues/164)，开发人员计划将功能添加到对话框中。书法最终可能是您想要使用的，但现在您必须对非系统字体使用自定义 View hack。无论如何，我希望这可以帮助一些像我一样正在寻找这个答案的访问者。

# sql - 插入后触发方法

> ID：15164286
> 
> 赞同：0
> 
> 时间：2013-03-01T18:18:43.147
> 
> 标签：sql, sql-server

我正在尝试构建触发器，当用户在删除后删除一行时，用户将能够查看他删除的行。

我已经尝试过我的代码如下请帮助。

```
create trigger insertion
before insert on client
for each row
as
select * from client 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:30:10.190

尝试这个：

```
create trigger deltrig 
on client 
for delete 
as 
   select deleted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:32:28.870

```
delete from [<YourTable>] output deleted.*
/* where ... */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:28:35.870

这不是你想要的吗？

```
create table #deleted(nr int)
create table #teste_d(nr int)
insert into #teste_d 
values(1),(2),(3)

delete from #teste_d
OUTPUT deleted.nr INTO #deleted
where nr = 2

select * from #deleted

drop table #deleted
drop table #teste_d 
```

结果集将被删除

或者如果你真的想使用触发器应该改为删除或更新

你应该做类似的事情

```
 insert into ##Data_deleted (col1,col2,...)
 select col1,col2,... from deleted 
```

# html - 浮动两个 50% 宽度的 div，中间有 10px 的边距

> ID：15164288
> 
> 赞同：18
> 
> 时间：2013-03-01T18:18:53.867
> 
> 标签：html, css

我想在我的页面上浮动一对流体 div，每个占据其容器宽度的一半，但它们之间的边距为 10px。我已经完成了这个 JSFiddle [http://jsfiddle.net/andfinally/sa53B/5/](http://jsfiddle.net/andfinally/sa53B/5/)，这是 HTML：

```
<div class="clearfix">
    <a class="prev" href="#">Previous</a>
    <a class="next" href="#">Next</a>
</div> 
```

和 CSS：

```
.prev {
    background: black;
    color: white;
    font-size: 16px;
    margin-bottom: 10px;
    display: block;
    float: left;
    box-sizing: border-box;
    width: 50%;
    margin-right: 5px;
}

.next {
    background: black;
    color: white;
    font-size: 16px;
    margin-bottom: 10px;
    display: block;
    float: right;
    box-sizing: border-box;
    width: 50%;
    margin-left: 5px;
} 
```

box-sizing 规则不足以完成这项工作 - div 的宽度超过 50%。在[这个问题](https://stackoverflow.com/questions/8805150/css-two-columns-with-variable-width-and-a-fixed-gap-between-them)的一个答案中，有人建议使用 CSS display-table。谁能解释如何在这种情况下进行这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T18:21:56.743

您可以 a) 降低`50%`并`48%`设置边距`2%`或 b) 使用 CSS3 `calc`，并非所有地方都支持，但在不久的将来应该是一个选项。（具体来说，当 IE8 不可用时）（请参阅[http://caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)以了解兼容性）

使用百分比的示例：http: [//jsfiddle.net/sa53B/9/](http://jsfiddle.net/sa53B/9/)

```
.prev {
    background: black;
    color: white;
    font-size: 16px;
    display: block;
    float: left;
    box-sizing: border-box;
    width: 48%;
    margin: 0 2% 10px 0
}

.next {
    background: black;
    color: white;
    font-size: 16px;
    display: block;
    float: right;
    box-sizing: border-box;
    width: 48%;
    margin: 0 0 10px 2%
} 
```

使用示例：http `calc`: [//jsfiddle.net/sa53B/6/](http://jsfiddle.net/sa53B/6/)

```
.prev {
    background: black;
    color: white;
    font-size: 16px;
    display: block;
    float: left;
    box-sizing: border-box;
    width: 47%;
    width: -webkit-calc(50% - 5px);
    width: calc(50% - 5px);
    margin: 0 5px 10px 0;
}

.next {
    background: black;
    color: white;
    font-size: 16px;
    display: block;
    float: right;
    box-sizing: border-box;
    width: 47%;
    width: -webkit-calc(50% - 5px);
    margin: 0 0 10px 5px;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T18:22:32.113

边距将添加到您的容器宽度。如果您使用基于百分比的宽度，您也应该将边距值设置为百分比。

例如，如果你想要两个 50% 的 div。您还需要考虑保证金。为此，您需要从总宽度中减去边距。如果您想要左右 1% 的边距，则总共需要从总宽度中删除 2%。

```
div {
float: left;
width: 48%;
margin: 0 1%;
} 
```

**你更新的小提琴：http: [//jsfiddle.net/sa53B/8/](http://jsfiddle.net/sa53B/8/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T20:21:08.960

为时已晚，但有人可能对这种修复方式感兴趣：

用 divs 将要显示的元素包装在列中：

```
<div class="left"><a ....></a></div>
<div class="right"><a ....></a></div> 
```

只需设置这些样式：

```
.left {
    float:left;
    width:50%;
}

.right {
    float:right;
    width:50%;
} 
```

无论 div 内容的边距如何，它都不会影响 50% 的宽度。在听说有用的 css calc 之前，我曾经这样做过。

见[JSFiddle](http://jsfiddle.net/sa53B/125/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-24T13:22:38.273

最近在我的任务中，我需要两个浮动列，它们之间有 8px 固定边距。

所以，我使用了没有任何计算魔法的边框和框大小属性。

所以，解决方案是：

```
.wrapper__col {
   width: 50%;
   box-sizing: border-box; // used to change box-model
   overfow: hidden; // clearfix hack
}
.wrapper__col:nth-child(odd) {
   float: left;
   border-left: 4px solid transparent;
}

.wrapper__col:nth-child(even) {
   float: right;
   border-right: 4px solid transparent;
}
```

```
<div class="wrapper">
   <div class="wrapper__col">1</div>
   <div class="wrapper__col">2</div>
</div>
```

所以，就是这样；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T18:26:54.077

您尝试做的事情不适用于固定边距。您需要使用百分比边距进行计算。

盒子大小只影响填充和边框空间，不影响边距空间。所以 50% + 50% =100% +5px+5px > 100%。

使用 % margins，你的问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-11T05:00:53.743

这是我的做法，但它使用了以下之间的可变差距：

**CSS：**

```
.left {
  float:left;
  width:59%;
  margin-right: 1%;
  background-color:red;
}
.right {
  float:left;
  width:39%;
  margin-left: 1%;
  background-color:blue;
} 
```

**html:**

```
<div>
  <div class="left">left</div>
  <div class="right">right</div>
</div> 
```

**jsfiddle：http:** [//jsfiddle.net/gkmjLfgx/](http://jsfiddle.net/gkmjLfgx/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-07T09:15:21.157

有时，您希望水平和垂直间距相同 10 像素，并且仍然具有相同大小的列。

您可以通过在每列内的额外 DIV 中添加“border-left：10px 纯白色”并在列容器中添加“margin-left：-10px”来吃掉左列的边框来做到这一点。

小提琴 128psahu

# java - 使用 JFileChooser 命名为 PDF

> ID：15164292
> 
> 赞同：0
> 
> 时间：2013-03-01T18:19:02.413
> 
> 标签：java, swing, pdf, jfilechooser

我使用此代码从 Mysql 将 pdf 文件保存在桌面上，但保存的文件没有扩展名，我如何使用扩展名 pdf 自动保存它，？！！

```
JFileChooser JFileChooser = new JFileChooser(".");
        Activiter ac = new Activiter();

        int status = JFileChooser.showDialog(null,"Saisir l'emplacement et le nom du fichier cible");

              if(status == JFileChooser.APPROVE_OPTION)
              {
                try
                {
                  ac.chargeIMG(jTable3.getValueAt(rec, 6).toString(),JFileChooser.getSelectedFile().getAbsolutePath());
                }
                catch(Exception ex)
                {
                  JOptionPane.showMessageDialog(null,"Une erreur s'est produite dans le chargement de documents.");
                  ex.printStackTrace();
                }
              } 
```

感谢 ac.chargeIMG 收集的方法 ChargeIMG 的帮助

chargeIMG 是从 MySQL 提供 pdf 文件，代码是

```
public void chargeIMG(String idpro, String location) throws Exception
    {
        // cnx 

      File monImage = new File(location);
      FileOutputStream ostreamImage = new FileOutputStream(monImage);

      try {

        PreparedStatement ps = conn.prepareStatement("SELECT img FROM projet WHERE idpro=?");

        try
        {
          ps.setString(1,idpro);
          ResultSet rs = ps.executeQuery();

          try
          {
            if(rs.next())
            {
              InputStream istreamImage = rs.getBinaryStream("img");

              byte[] buffer = new byte[1024];
              int length = 0;

              while((length = istreamImage.read(buffer)) != -1)
              {
                ostreamImage.write(buffer, 0, length);
          }
        }
          }
          finally
          {
            rs.close();
          }
        }
        finally
        {
          ps.close();
        }
      }
      finally
      {
        ostreamImage.close();
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:26:16.177

覆盖[`getSelectedFile()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#getSelectedFile%28%29)：

```
import java.io.File;
import javax.swing.JFileChooser;

public class MyFileChooser extends JFileChooser
{
    private static final long serialVersionUID = 1L;
    private String extension;

    public MyFileChooser(String currentDirectoryPath, String extension)
    {
        super(currentDirectoryPath);
        this.extension = extension;
    }

    @Override
    public File getSelectedFile()
    {
        File selectedFile = super.getSelectedFile();
        if(selectedFile != null && (getDialogType() == SAVE_DIALOG || getDialogType() == CUSTOM_DIALOG))
        {
            String name = selectedFile.getName();
            if(!name.contains(".")) selectedFile = new File(selectedFile.getParentFile(), name + "." + extension);
        }
        return selectedFile;
    }
} 
```

然后像这样使用它：

```
JFileChooser chooser = new MyFileChooser(".", "pdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:25:16.823

最简单的解决方案，获取路径（`File.getPath`），检查它是否以预期的扩展名结束，如果不是，则用另一个扩展名存在的文件替换它：`new File(path+".pdf")`;

# python - Feedparser - KeyError：'fullcount'

> ID：15164294
> 
> 赞同：1
> 
> 时间：2013-03-01T18:19:12.957
> 
> 标签：python, pyserial, feedparser, keyerror

我已尝试遵循[本指南](http://j4mie.org/blog/how-to-make-a-physical-gmail-notifier/)。它是关于制作一个物理 gmail 通知器。当我输入相同的代码时，它发现了一个错误：

```
Traceback (most recent call last):
  File "C:/Python27/Projects/gmailnotifier.py", line 20, in <module>
    )["feed"]["fullcount"])
  File "C:\Python27\lib\site-packages\feedparser-5.1.3-py2.7.egg\feedparser.py", line 375, in __getitem__
    return dict.__getitem__(self, key)
KeyError: 'fullcount' 
```

我不知道为什么，这就是我问的原因。我正在使用 Windows 7、python 2.7.3、feedparser 5.1.3 和 pyserial 2.6

这是完整的代码：

```
import serial, sys, feedparser

#Settings - Change these to match your account details
USERNAME="mymain@gmail.com"
PASSWORD="mypassword"
PROTO="https://"
SERVER="mail.google.com"
PATH="/gmail/feed/atom"

SERIALPORT = "COM3" # Change this to your serial port!

# Set up serial port
try:
    ser = serial.Serial(SERIALPORT, 9600)
except serial.SerialException:
    sys.exit()

newmails = int(feedparser.parse(
    PROTO + USERNAME + ":" + PASSWORD + "@" + SERVER + PATH
)["feed"]["fullcount"])

# Output data to serial port
if newmails > 0: ser.write('M')
else: ser.write('N')

# Close serial port
ser.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:19:34.057

刚刚从 REPL 中看了一下。该代码将按原样为我工作。但是，我能够通过输入错误的密码来重现您的错误。

`feedparser.parse()['feed']`如果您未能通过身份验证，这就是：

```
>>> feedparser.parse(PROTO + USERNAME + ":" + INCORRECT_PASSWORD + "@" + SERVER + PATH)['feed']
{'summary': u'<h1>Unauthorized</h1>\n<h2>Error 401</h2>'}
>>> 
```

如果您正确进行身份验证，它应该是这样的：

```
>>> import pprint
>>> pprint.pprint(feedparser.parse(PROTO + USERNAME + ":" + PASSWORD + "@" + SERVER + PATH)['feed'])
{'fullcount': u'0',
 'link': u'http://mail.google.com/mail',
 'links': [{'href': u'http://mail.google.com/mail',
            'rel': u'alternate',
            'type': u'text/html'}],
 'subtitle': u'New messages in your Gmail Inbox',
 'subtitle_detail': {'base': u'https://mail.google.com/mail/feed/atom',
                     'language': None,
                     'type': u'text/plain',
                     'value': u'New messages in your Gmail Inbox'},
 'title': u'Gmail - Inbox for xxxxxxx@gmail.com',
 'title_detail': {'base': u'https://mail.google.com/mail/feed/atom',
                  'language': None,
                  'type': u'text/plain',
                  'value': u'Gmail - Inbox for xxxxxxx@gmail.com'},
 'updated': u'2013-03-01T20:11:03Z',
 'updated_parsed': time.struct_time(tm_year=2013, tm_mon=3, tm_mday=1, tm_hour=20, tm_min=11, tm_sec=3, tm_wday=4, tm_yday=60, tm_isdst=0)}
>>> 
```

您应该打印结果`feedparser.parse()`以检查这是否确实是您遇到的问题，但我怀疑只需确保您的用户名/密码正确就可以解决您的问题

# c - OpenGL 如何使用鼠标拾取方块并拖动它？

> ID：15164295
> 
> 赞同：0
> 
> 时间：2013-03-01T18:19:19.060
> 
> 标签：c, opengl

这是我的一些代码！~~为什么我改变了正方形的颜色，但它不起作用？谁能帮我？我怎样才能用鼠标移动这三个方块？

```
#include <GL/glut.h>
#include <stdio.h>
const GLint pickSize = 32;
int winWidth = 400, winHeight = 300;

void Initial(void)
{
  glClearColor(1.0f, 1.0f, 1.0f, 1.0f);        
}

void DrawRect(GLenum mode)
{
  if(mode == GL_SELECT) glPushName(1); 
  glColor3f(1.0f,0.0f,0.0f);
  glRectf(60.0f,50.0f,150.0f,150.0f);

  if(mode == GL_SELECT) glPushName(2); 
  glColor3f(0.0f,1.0f,0.0f);
  glRectf(230.0f,50.0f,330.0f,150.0f);

  if(mode == GL_SELECT) glPushName(3); 
  glColor3f(0.0f,0.0f,1.0f);
  glRectf(140.0f,140.0f,240.0f,240.0f);
}

void ProcessPicks(GLint nPicks, GLuint pickBuffer[])
{
  GLint i;
  GLuint name, *ptr;
  ptr=pickBuffer;
  for(i=0;i<nPicks; i++){
    name=*ptr;    
    ptr+=3;       
    ptr+=name-1; 
```

为什么我在这里改变颜色，但它不起作用？谁能帮我？我怎样才能用鼠标移动这三个方块？

```
 if(*ptr==1) {glColor3f(1.0f,1.0f,1.0f);}
    //printf("The color is red\n");
    if(*ptr==2) printf("The colour is green.\n");
    if(*ptr==3) printf("The colour is blue.\n");
    ptr++;
  }
  printf("\n\n");
}

void ChangeSize(int w, int h)
{
  winWidth = w;
  winHeight = h;
  glViewport(0, 0, w, h);
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  gluOrtho2D(0.0,winWidth,0.0,winHeight);
}

void Display(void)
{
  glClear(GL_COLOR_BUFFER_BIT);
  DrawRect(GL_RENDER);
  glFlush();
}

void MousePlot(GLint button, GLint action, GLint xMouse, GLint yMouse)
{
  GLuint pickBuffer[pickSize];
  GLint nPicks, vp[4];

  if(button == GLUT_LEFT_BUTTON && action == GLUT_DOWN){
    glSelectBuffer(pickSize,pickBuffer); 
    glRenderMode(GL_SELECT); 
    glInitNames();   
    glMatrixMode(GL_PROJECTION);
    glPushMatrix();
    glLoadIdentity();
    glGetIntegerv(GL_VIEWPORT, vp);
    gluPickMatrix(GLdouble(xMouse), GLdouble(vp[3]-yMouse),10.0,10.0,vp);
    gluOrtho2D(0.0,winWidth,0.0,winHeight);
    DrawRect(GL_SELECT);

    glMatrixMode(GL_PROJECTION);
    glPopMatrix();
    glFlush();

    nPicks = glRenderMode(GL_RENDER);
    ProcessPicks(nPicks, pickBuffer);
    glutPostRedisplay();
  }
}

int main(int argc, char* argv[])
{
  glutInit(&argc, argv);
  glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB); 
  glutInitWindowSize(400,300);                 
  glutInitWindowPosition(100,100);             
  glutCreateWindow("Picking");                  
  glutDisplayFunc(Display);
  glutReshapeFunc(ChangeSize);
  glutMouseFunc(MousePlot);
  Initial();                                   
  glutMainLoop();                              
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:29:34.130

OpenGL 是一个绘图 API，而不是场景图。如果要更改可见场景中的某些内容，则必须重新绘制它。在事件处理程序中执行一些随机的 OpenGL 状态命令只会设置 OpenGL 状态，但不会改变任何可见的东西。

在事件处理程序中，更改变量的值，然后发出重绘（通过调用发出 GLUT 重绘`glutPostRedisplay()`）。在绘图代码中，使用变量的值来控制绘图过程，例如设置用于下一个绘制的颜色。

### 更新

这是一个非常简单的基于 GLUT 的程序的代码，该程序在单击窗口时通过白色、红色、绿色、蓝色、白色……循环四边形颜色

```
/* Language: ANSI-C */
#include <GL/glut.h>

#define N_COLORS 4
static GLfloat colors[4][3] = {
    {1,1,1},
    {1,0,0},
    {0,1,0},
    {0,0,1}
};
static int colorindex = 0;

static GLfloat const quad[][2] = {
    -1, -1,
     1, -1,
     1,  1,
    -1,  1
};

static void cycle_color(void)
{
    colorindex = (colorindex+1) % N_COLORS;
}

static void redraw(float width, float height)
{
    float const aspect = width/height;

    glClearColor(0,0,0,1);
    glClear(GL_COLOR_BUFFER_BIT);

    glViewport(0,0, width, height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-1.5*aspect, 1.5*aspect, -1.5, 1.5, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_FLOAT, 0, quad);

    glColor3fv(colors[colorindex]);
    glDrawArrays(GL_QUADS, 0, 4);
}

static void onMouseClick(int btn, int state, int x, int y)
{
    if( GLUT_DOWN == state ) {
        cycle_color();
    }
    glutPostRedisplay();
}

static void onDisplay(void)
{
    int const win_width  = glutGet(GLUT_WINDOW_WIDTH);
    int const win_height = glutGet(GLUT_WINDOW_HEIGHT);

    redraw(win_width, win_height);

    glutSwapBuffers();
}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
    glutCreateWindow("click to change color");
    glutDisplayFunc(onDisplay);
    glutMouseFunc(onMouseClick);
    glutMainLoop();
    return 0;
} 
```

# javascript - JavaScript 函数声明中是否需要分号

> ID：15164297
> 
> 赞同：1
> 
> 时间：2013-03-01T18:19:24.010
> 
> 标签：javascript

是否有必要在函数定义的末尾添加分号，如下所示

```
function helloWorld() {
     //some code 
}; //note the semicolon here at the end is it ever necessary? Ever 
```

我有一个朋友发誓这是可选的。我认为它永远不是可选的我从来没有读过任何关于它在函数末尾是可选的。我从来没有见过任何人做过“除了他”。分号是可选的。

```
var hellWorld = function (){

}; // the semicolon here it is optional because you are defining a variable this is OK and optional 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:23:14.913

分号分隔表达式。您可以在一个之后添加任意数量的分号，因为它们会分隔空语句。

```
function() {
   // Works.
};;;;;;;;;;;;;;;;;;;;; 
```

函数后面的分号不是“可选的”，它完全是多余的。

至于实际可选的，它们之所以如此，是因为在大多数情况下，Javascript 会在换行符之前添加分号。这些你**应该**明确地写出来。您迟早会被缺少自动分号所困扰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:37:31.313

在这种情况下，是的，它不需要。

这工作正常：

```
function foo() {} var x = "hi"; 
```

然而，这是一个语法错误：

```
var foo = function() {} var x = "hi"; 
```

在 之后使用换行符`}`或使用分号就可以了。您不需要两者 - 通常如果程序在没有它的情况下无效，则在换行符或右大括号之前插入分号。但在某些情况下，没有它，该程序仍然*有效*，但意味着其他东西。所以你必须小心依赖分号插入。

例子：

```
var x = "foo"
/foo/.test(x) 
```

在这里，我想在第一行的末尾插入分号，但因为`/`我的 RegEx 中的也可能是除法运算符而被烧毁了。所以没有分号插入。当您到达时这是无效的事实`.`并不能拯救您，`var x = "foo" /`这是一个有效的程序片段，因此没有分号插入。

这就是为什么有人说“永远不要依赖分号插入”的原因。

但是在函数定义之后仍然不需要分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:22:45.760

不需要。它是隐式插入的，但依赖隐式插入会导致微妙的、难以调试的问题。不要这样做。你比那更好。

有几个地方缺少分号特别危险：

```
// 1.
MyClass.prototype.myMethod = function() {
  return 42;
}  // No semicolon here.

(function() {
  // Some initialization code wrapped in a function to create a scope for locals.
})();

var x = {
  'i': 1,
  'j': 2
}  // No semicolon here.

// 2\.  Trying to do one thing on Internet Explorer and another on Firefox.
// I know you'd never write code like this, but throw me a bone.
[normalVersion, ffVersion][isIE]();

var THINGS_TO_EAT = [apples, oysters, sprayOnCheese]  // No semicolon here.

// 3\. conditional execution a la bash
-1 == resultOfOperation() || die(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T18:43:52.860

没有必要，但风格很好。但是，当使用**删除**无关空格、缩短变量等的缩小器时，遗漏的分号通常会出现问题。

# android - Eclipse IDE：Android 远程设备设置在哪里？

> ID：15164299
> 
> 赞同：1
> 
> 时间：2013-03-01T18:19:33.287
> 
> 标签：android, eclipse

我正在使用最新版本的 Eclipse（和 ADT），但无法找到添加远程 android 设备进行调试的位置。我希望使用 YouWave，因为我的 PC 上的 AVD 模拟器太慢了。过去，我已经能够为远程设备添加我自己选择的主机和端口，但我再也找不到在哪里执行此操作了。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:41:26.227

你不能在日食中做到这一点。我一直在研究一个插件，但还没有准备好。现在使用他的命令行。

```
adb connect 192.168.1.5:5555 
```

你会在 Eclipse 中看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:47:36.290

嗨，您可以参考本教程，他们提供了如何创建 Android 远程设备并调试使用它，**[请单击此处](http://blog.doityourselfandroid.com/2010/12/07/debug-remote-android-proces-eclipse/)**

# git - 由于更改了未更改的文件，Git 拒绝合并

> ID：15164300
> 
> 赞同：8
> 
> 时间：2013-03-01T18:19:36.173
> 
> 标签：git, merge, git-merge

我遇到了一个 git 问题，我想将分支合并到 master 但它拒绝合并，因为它认为我对文件进行了本地更改。执行状态显示没有任何更改，并且对文件进行差异化不会产生任何结果。这是终端输出：

```
$ git checkout ProductsAndContents
Switched to branch 'ProductsAndContents'

$ git status
# On branch ProductsAndContents
nothing to commit (working directory clean)

$ git checkout master
Switched to branch 'master'

$ git status
# On branch master
nothing to commit (working directory clean)

$ git merge ProductsAndContents
error: Your local changes to the following files would be overwritten by merge:
    tests/unit/src/models/BrandTests.js
Please, commit your changes or stash them before you can merge.
Aborting 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:05:43.890

感谢 Andrew Myers 对我最初的问题的评论，我发现`core.trustctime`了`false`解决问题的设置。

```
git config core.trustctime false 
```

关于 inode 更改时间不匹配的问题。我猜这是因为 repo 位于与我正在使用的文件系统不同的机器上的文件共享上。

感谢所有的建议！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:27:08.670

好吧，如果您确信自己不会丢失任何工作，请尝试以下操作：

```
rm tests/unit/src/models/BrandTests.js
git checkout -- tests/unit/src/models/BrandTests.js 
```

这应该重置任何让它认为它发生变化的机制。如果它不起作用，请让其他可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T22:37:12.087

我猜这是你的场景：

```
$ git checkout ProductsAndContents
Switched to branch 'ProductsAndContents' 
```

分支`ProductsAndContents`包含文件`tests/unit/src/models/BrandTests.js`，因此上面`checkout`创建它和/或确保它与请求的特定提交是最新的。

```
$ git status
# On branch ProductsAndContents
nothing to commit (working directory clean) 
```

您没有进行任何更改，并从一个干净的工作目录开始，所以这很好。

```
$ git checkout master
Switched to branch 'master' 
```

这确保了最新提交中包含的所有文件在`master`工作目录中都是最新的。但是，它不会删除或更新不包含在`master`中或被忽略的文件。在这里，无论出于何种原因，我假设`master`当前不包含有问题的文件。

```
$ git status
# On branch master
nothing to commit (working directory clean) 
```

同样，您没有进行任何修改。此处未将相关文件作为未跟踪文件提及这一事实可能意味着它被忽略（在`.gitignore`或 中`.git/info/exclude`）。`master`不包含该文件，因此它不关心它是否存在。

```
$ git merge ProductsAndContents
error: Your local changes to the following files would be overwritten by merge:
    tests/unit/src/models/BrandTests.js
Please, commit your changes or stash them before you can merge.
Aborting 
```

在这里，您在另一个分支中合并的尝试想要引入一个`master`当前没有的文件，这通常很好。但是，该文件存在于您的工作目录中，并且`git`不想丢弃不确定是否保留在存储库中的内容。正如其他地方所建议的那样，您可以（假设您知道它是安全的）只需删除该文件并重新尝试合并。

根据您提供的信息，我不能 100% 确定这就是您所拥有的；但是，您可以运行这两个命令来检查该情况：

```
git ls-files master -- tests/unit/src/models/BrandTests.js
git ls-files ProductsAndContents -- tests/unit/src/models/BrandTests.js 
```

如果我的猜测是正确的，第一个命令不会显示文件存在，而第二个会。然后检查`.gitignore`它`.git/info/exclude`是否被忽略（对于`.gitignore`，您可能需要检查两个分支中每个分支上存在的版本）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-01T18:23:07.373

仅仅因为每个分支都没有要提交的内容并不意味着它们是相同的。我有兴趣使用查看两个文件之间的差异

```
git diff 
```

您可以使用

```
git checkout -- tests/unit/src/models/BrandTests.js 
```

# asp.net-mvc - 使用 ASP.NET MVC，有没有办法捕获所有 POST 请求，而不管主机的 URL 是什么？

> ID：15164303
> 
> 赞同：4
> 
> 时间：2013-03-01T18:19:45.920
> 
> 标签：asp.net-mvc, http-post

我在调试一个 MVC 应用程序时遇到了问题，我希望它有一个依赖部分来发布。

是否有一种简单的方法来配置 MVC 4 应用程序以拦截所有 POST 请求，以便我可以看到它试图发布到哪个 URL 以及响应是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:53:43.783

通常，您需要一个全局过滤器。但是，由于在确定路线之前不会触发，因此在这种情况下它可能对您没有帮助。

您可以尝试的一件事是`Application_BeginRequest`在 global.asax 中添加一个方法。它甚至*不需要做*任何事情。只需在其中设置一个断点，然后检查`Request.AppRelativeCurrentExecutionFilePath`（或 Request 的其他成员）以查看入站路径是什么。

```
 protected void Application_BeginRequest()
    {
        if (Request.HttpMethod.Equals("post", StringComparison.InvariantCultureIgnoreCase))
        { // Breakpoint here

        }
    } 
```

* * *

“[全局过滤器](http://msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx)”是将行为等注入管道的首选方法。MVC 已经实现了其中的一些，您也可以扩展或实现自己的。

我去年实现的一个具体示例：客户端站点具有使密码过期的功能。伟大的; 工作正常，当用户被告知立即更改它时。但他们发现他们可以导航到网站的另一部分，直到他们下次登录时才会再次提示。所以我们添加了一个全局过滤器来检查密码是否过期（以及我们是否已经检查过在此会话中），如果是，则重定向到“更改密码”屏幕。改变之后，他们可以回到原来的地方。

但是，在找出路由或绑定问题时，这样做的缺点是：路由引擎在全局过滤器获取请求之前已经评估了请求。如果它无法识别目标操作，您的过滤器甚至不会被命中。因此，在这种情况下，像这样的低级功能`Application_BeginRequest`是您唯一现实的选择。

# macos - 如何在 Mac (Visual Studio for Mac) 上启动多个 Xamarin Studio 实例？

> ID：15164304
> 
> 赞同：46
> 
> 时间：2013-03-01T18:19:46.893
> 
> 标签：macos, xamarin.ios, xamarin-studio, xamarin.mac, xamarin.android

我希望同时运行多个 Xamarin Studio 副本。运行一个副本后，双击 Xamarin Studio 图标`/Applications`或单击当前运行的 Dock 图标只会将当前副本置于前台。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-01T18:19:46.893

## 只是想要一个工具？

如果您只是想下载为您执行此操作的内容，还有[MS 解决方案启动器](https://github.com/Redth/MSSolutionLauncher)或较旧的[Xamarin Studio Launcher v3](http://redth.codes/Xamarin-Studio-Launcher-v3/)。据推测，它的功能类似于下面的脚本，但它带有一个漂亮的预构建应用程序，带有一个独特的图标，您只需将其复制到应用程序文件夹即可。此外，它甚至可以设置为打开`.sln`文件的目标，允许您在双击解决方案文件时启动新的 Xamarin Studio 实例。

## 自己做

就像[对 MonoDevelop 的描述](https://stackoverflow.com/a/1562956/48700)一样，您可以从命令行强制创建一个新实例。同样，通过[为 MonoDevelop 描述的 AppleScript side-trip](https://stackoverflow.com/a/6081311/48700)，您可以以应用程序图标的形式获得它。

MonoDevelop 脚本和新 Xamarin Studio 版本之间的唯一区别是需要一个额外的转义字符，因为新应用程序的名称中有一个空格。

1.  打开 AppleScript 编辑器并输入以下内容（注意双重转义空间以使外壳不受干扰）。

    `do shell script "open -n /Applications/Xamarin\\ Studio.app/"`

2.  **使用“Xamarin Studio Launcher”之**类的名称保存，并确保为文件格式指定**应用程序。**

3.  将图标拖到您的停靠栏中。

每次运行这个新的“应用程序”都会启动一个新的 Xamarin Studio 实例。

从那里，如[MonoDevelop answer 的评论中所述](https://stackoverflow.com/a/6081311/48700)，您可以使用 Xamarin Studio 图标而不是默认的小程序图标。

1.  右键单击原始 Xamarin Studio 应用并选择“显示包内容”。

2.  导航到`/Contents/Resources/`并复制该`XamarinStudio.icns`文件（或者`monodevelop.icns`，对于较旧的 XS 版本）。

3.  右键单击您创建的启动器应用程序，然后选择“显示包内容”。

4.  导航到它`/Contents/Resources/`并粘贴该文件的新副本`icns`。

5.  删除原始`applet.icns`图标并将新图标重命名`monodevelop.icns`为`applet.icns`以代替它。

# c# - 选择默认组合框值

> ID：15164309
> 
> 赞同：0
> 
> 时间：2013-03-01T18:19:52.170
> 
> 标签：c#, combobox

当我的程序加载时，我的组合框没有默认值。我希望第一个是加载程序时的默认值。我怎样才能做到这一点？

```
using Gtk;
using System;

class SharpApp : Window
{
    Label label;
    Label label2;
    Label label3;
    Label label4;

    public SharpApp() : base(" VALUTASOFFAN")
    {
        SetDefaultSize(411, 199);
        SetPosition(WindowPosition.Center);
        SetIconFromFile("..\\..\\web.png");

        DeleteEvent += new DeleteEventHandler(OnDelete);

        string[] valutor = new string[] 
        {    
            "YEN",
            "SEK",
            "EURO" 
        };

        //BOX1
        Fixed fix = new Fixed();
        ComboBox cb = new ComboBox(valutor);
        ComboBox cb2 = new ComboBox(valutor);
        Entry entry = new Entry ();
        Entry entry2 = new Entry ();
        cb.Changed += OnChanged;
        cb2.Changed += OnChanged2;
        entry.Changed += onChanged3;
        entry2.Changed += onChanged4;

        ComboBox combo = ComboBox.NewText(); 
        combo.Active = 0
        cb.Active = 0;

        label = new Label("-");
        label2 = new Label("-");
        label3 = new Label("-");
        label4 = new Label("-");

        fix.Put(entry, 100, 30);
        fix.Put(entry2, 100, 100);
        fix.Put(cb, 300, 30);
        fix.Put(cb2, 300, 100);
        //fix.Put(label3, 10, 30);
        //fix.Put(label4, 10, 100);
        Add(fix);

        ShowAll();      
    }

    void OnChanged(object sender, EventArgs args)
    {
        ComboBox cb = (ComboBox) sender;
        label.Text = cb.ActiveText;
    }

    void OnChanged2(object sender2, EventArgs args)
    {
        ComboBox cb2 = (ComboBox) sender2;
        label2.Text = cb2.ActiveText;
    }

    void onChanged3(object sender3, EventArgs args)
    {
        Entry entry = (Entry)sender3;
        label3.Text = entry.Text;
    }

    void onChanged4(object sender4, EventArgs args)
    {
        Entry entry2 = (Entry)sender4;
        label4.Text = entry2.Text;
    }

    public static void Main()
    {
        Application.Init();
        new SharpApp();
        Application.Run();
    }

    void OnDelete(object obj, DeleteEventArgs args)
    {
        Application.Quit();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:38:59.087

> 我希望第一个是加载程序时的默认值。我怎样才能做到这一点？

给定项目的索引基础

```
yourComboBox.SelectedIndex = 0; 
```

[`.ValueMember`](http://msdn.microsoft.com/en-us/library/microsoft.dynamics.mobile.framework.controls.combobox.valuemember%28v=mag.11%29.aspx)的基础`ComboBox`

```
 yourComboBox.SelectedValue = 1; 
```

# php - mySQL MAX() 从 phpmyadmin 工作但不是从 php 脚本工作？

> ID：15164310
> 
> 赞同：0
> 
> 时间：2013-03-01T18:20:00.763
> 
> 标签：php, mysql, select, max

编辑：已解决 - 像往常一样，错误代码与可疑代码无关。我使用变量代替 table_name 并且在运行查询之前它被切换到错误的表。

对于任何感兴趣的人，所有建议的解决方案以及下面发布的原始代码现在都为我工作。感谢所有的帮助！对不起我的白痴。

原始帖子：我发生了一个奇怪的错误。

我正在尝试使用以下代码从 mysql 数据库列中获取最大值到我的 php 脚本中：

```
$q = "SELECT MAX(item_id) AS maxid FROM table_name";
$q = mysql_query($q);
while($row=mysql_fetch_assoc($q)){
    $maxItemNum = $row['maxid'];
}
echo $maxItemNum; 
```

但是，回显的 $maxItemNum 是表行数，而不是“item_id”列的最大值。

奇怪的是，当我通过 phpmyadmin 运行以下命令时，我得到了正确的结果（225）：

```
SELECT MAX(item_id) FROM table_name 
```

关于这个问题的任何想法？我被难住了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:35:56.450

```
echo $maxItemNum = mysql_result(mysql_query("SELECT MAX(item_id) AS maxid FROM table_name LIMIT 1"),0); 
```

一根线就好！至少为此（：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:49:54.947

和这个：

```
$q = "SELECT max(item_id) AS max_value FROM table_name";
$q = mysqli_query($q);
$row=mysqli_fetch_assoc($q) ; //just one set of data
$maxItemNum = $row['max_value'];

echo $maxItemNum; 
```

它对我有用....在 wamp 2.2 上测试过。

萨卢多斯 ;)

# jquery - 同时切换 1 个容器中的 2 个 div + 另一个容器中的 2 个

> ID：15164316
> 
> 赞同：1
> 
> 时间：2013-03-01T18:20:10.430
> 
> 标签：jquery

我不知道如何搜索：在画廊页面上，我希望能够通过单击图像在其原始大小和 2x 之间切换图像，**也可以**通过单击另一个容器中更改状态的缩放按钮（表明您可以根据图像 div 当前状态放大或缩小）

我通过单击它或按钮来切换图像，但我不知道如何也切换按钮。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:41:06.960

您可以使用 jquery `toggleClass()`。例如[http://jsbin.com/uhiguv/1/edit](http://jsbin.com/uhiguv/1/edit)

并且还可以使用`hasClass`您可以专门针对元素。例如：http: [//jsbin.com/uhiguv/2/edit](http://jsbin.com/uhiguv/2/edit)

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  .image.active{width:64;height:64;}
  .active{border:2px solid black;}
</style>
</head>
<body>

  Click the image or the button<br><br>

  <img 
    class="ctrl image"
    src="http://www.gravatar.com/avatar/f9dc5de7822b1679d7133691ec616174?s=32&d=identicon&r=PG">

  <br><button class="ctrl button">Grow</button>

<script>
  jQuery(function(){

    $('.ctrl').bind('click', function(){

      $('.ctrl').toggleClass('active');

      if ($('.ctrl.button').hasClass('active')) {
        $('.ctrl.button').text('Shrink');
      }
      else {
        $('.ctrl.button').text('Grow');
      }

    });

  });

</script>
</body>
</html> 
```

# navbar - 将谷歌黑色导航栏添加到网站

> ID：15164317
> 
> 赞同：0
> 
> 时间：2013-03-01T18:20:10.640
> 
> 标签：navbar

有没有办法将[黑色的 Google 导航栏](http://2.bp.blogspot.com/-Fs0BwTW_I14/Tw69Xyjmx6I/AAAAAAABD9I/UceEWXiUdc8/s640/google-old-ui.png)添加到我的网站？有没有我可以使用的片段？

# c# - C# 中 switch 的空情况是否与下一个非空情况相结合？

> ID：15164318
> 
> 赞同：1
> 
> 时间：2013-03-01T18:20:14.423
> 
> 标签：c#, switch-statement, language-design

使用以下代码：

```
case "GETSITES":
case "SITESETUP":
    MessageBox.Show("Help! I am suffering from the Air-Conditioned Nightmare!!!");
    // ... 
```

将`MessageBox.Show`执行开关值是`"GETSITES"`还是`"SITESETUP"`？

或者**仅**当开关值为`"SITESETUP"`?

由于`"GETSITES"`没有休息，我想是的，但不确定。

* * *

**更新**

我想我应该把我的问题表述为：

这两个代码片段在语义上是等价的吗？

*   片段 1

    ```
    case 0:
    case 1:
        // bla bla bla;
        break; 
    ```

*   片段2（伪代码）

    ```
    case 0, 1:
        // bla bla bla;
        break; 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:23:14.007

您所描述的是同一案例有两个标签。C# 确实允许这样做。但是，您不能以 C 允许的相同方式进入下一个 case 语句，也就是说，您的标签不能有一些代码，然后进入下一个 case 语句。这是禁止的，会导致编译错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T19:34:32.580

> C# 中的空 case 语句是否与下一个非空语句相结合？

我原来说：

> 这个问题假设了一个谎言。在合法的 C# 程序中不存在空的 switch 部分。

这并不*完全*正确。C#*规范*要求 switch 部分至少包含一个语句，但实现实际上没有。

我将我的陈述修改如下：

问题假设有一个空的 switch 部分（注意 switch 部分不是*statements*），但在非常不寻常的情况下只能有一个空的 switch 部分。首先，让我们清楚地描述 switch 语句的结构。

当你有：

```
switch(x) 
{ 
   case 1: 
   case 2: 
       Console.WriteLine("Hello");
       break;
} 
```

只有一个*开关部分*。案例1之后没有“空白部分”；一个部分由*所有*case 子句组成，后跟零个或多个语句。（规范需要一个或多个语句，但实现实际上允许零个语句。）语句列表必须有一个不可到达的端点。

唯一的方法是让一个空语句列表在 switch 部分内无法到达其端点是使 switch 部分本身不可达。有两种可能发生的方式。整个交换机可能无法访问，或者交换机可能会持续打开。简而言之，制作空 switch 部分的唯一方法是：

```
switch(1) { case 2: } 
```

或者

```
if (false) switch(x) { case 2: } 
```

根据规范，两者都不合法，但 C# 编译器允许两者。幸运的是，这是一个非常无害的错误。

在这两种情况下，该部分的终点都是不可到达的，因此空部分是可到达的。但是 case*之间*永远不会有空白部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T18:26:06.537

根据测试，您可以执行以下操作：

```
switch(i)
{
    case 0:
    case 1:
    case 2:
        doSomething();
        break;
    default:
        doNothing();
        break;
} 
```

但你不能：

```
switch(i)
{
   case 0:
      doSomething();
   case 1:
      doSomethingElse();
      break;
   default:
      doNothing();
      break;
} 
```

所以，答案是，是的，您可以将多个案例堆叠在一起，但您不能让控制从一个案例运行到另一个案例。

# c# - TabPageCollection.RemoveByKey 索引 0 超出范围

> ID：15164320
> 
> 赞同：1
> 
> 时间：2013-03-01T18:20:18.963
> 
> 标签：c#, .net, winforms

所以我有一个非常奇怪的问题。我正在使用 jabber 框架开发一个聊天应用程序。我正在尝试从 TabControl 中删除 TabPage（从聊天窗口中删除聊天选项卡）。每个 TabPage 都由用户的 JID (user@server.com) 字符串作为键。每当我尝试按其键删除 TabPage 时，都会收到 ArgumentOutOfRangeException。下面是我用于显式删除聊天选项卡的代码。我有另一个函数来监听表单本身的关闭事件，它只是在允许表单关闭之前从每个 TabPage 中删除第一个（也是唯一一个）控件。

奇怪的是，当聊天表单没有关闭时，这段代码可以正常工作。可以使用此功能明确删除每个聊天选项卡。当我在表单关闭并重新打开（当前打开的聊天被重新添加到它们自己的选项卡中）之后删除选项卡时，就会出现问题。

需要了解的一些关键事项：

*   我可以成功检索到要关闭的 TabPage 的索引`chatTabs.TabPages.IndexOfKey(...)`
*   `chatTabs.TabPages[...]`我可以通过使用索引值成功检索 TabPage 对象本身`IndexOfKey(...)`
*   当我尝试通过将值从`chatTabs.TabPages[...]`into传递来删除页面`chatTabs.TabPages.Remove(...)`时，没有任何反应
*   当我尝试关闭`catch`块中的表单时，没有任何反应，并且表单保持打开状态

显然这是一个非常奇怪的问题，我已经没有办法调试它了。有什么想法吗？

`RemoveChat(...)`功能：

```
private void RemoveChat(JID userJID)
{
    if (chatTabs.TabPages.ContainsKey(userJID.Bare))
    {
        try
        {
            // remove the chat tab
            if (chatTabs.TabPages[userJID.Bare].Controls.Count > 0)
            {
                chatTabs.TabPages[userJID.Bare].Controls.RemoveAt(0);
            }
            chatTabs.TabPages.RemoveByKey(userJID.Bare);
        }
        catch (Exception ex)
        {
            log.Error(ex.Message + "\r\n" + ex.StackTrace);
            this.Close(); return;
        }

        // select the first available chat tab
        if (chatTabs.TabCount > 0)
        {
            chatTabs.SelectedIndex = 0;
        }
        // close the chat window
        else
        {
            this.Close();
        }
    }
} 
```

表单关闭监听器/处理函数：

```
private void ChatForm_FormClosing(object sender, FormClosingEventArgs e)
{
    // remove each chat control so they do not get disposed
    foreach (TabPage tab in chatTabs.TabPages)
    {
        tab.Controls.RemoveAt(0);
    }
} 
```

我得到的错误`RemoveByKey(...)`：

```
2013-03-01 12:39:42,963: ERROR <10> [ChatForm] - Index 0 is out of range.
Parameter name: index
   at System.Windows.Forms.Control.ControlCollection.get_Item(Int32 index)
   at System.Windows.Forms.TabControl.TabPageCollection.RemoveByKey(String key)
   at <...>.ChatForm.RemoveChat(JID userJID) in c:\Work\[...]\ChatForm.cs:line 87 
```

其中第 87 行是调用`RemoveByKey(...)`

# javascript - 应该做的时候没有出现确认

> ID：15164323
> 
> 赞同：0
> 
> 时间：2013-03-01T18:20:28.870
> 
> 标签：javascript, jquery, html

在所有验证通过后，确认不会显示，而是显示验证消息，说明没有学生被选中添加，即使我已经这样做了。我怎样才能得到显示的确认信息？

这是一个您可以自己查看和使用的应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text20.php)

1.  从下拉菜单中选择一门课程

2.  在`Avialable Students to Enrol`框中，您将看到学生列表。选择一个学生并单击`Add`下方的按钮，您将看到该学生已添加到下方的框中。

3.  单击`Submit Students`底部的按钮，它会显示验证消息，说明您没有选择要添加到课程的学生，但是您已经这样做了，因此应该会出现确认。这就是问题

显示整个代码的 jsfiddle 在这里：

[http://jsfiddle.net/PhWbm/3/](http://jsfiddle.net/PhWbm/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:37:28.290

您正在检查`children`具有 ID 的元素，`courseadd`而您应该查看的 ID 是`studentadd`. 尝试更改`select`或选择器的 ID。

# html - 使用 CSS 平均分配高度

> ID：15164327
> 
> 赞同：2
> 
> 时间：2013-03-01T18:20:45.437
> 
> 标签：html, css, grid

我有一个非常棘手的 HTML 问题，我不确定是否有基于 CSS 的解决方案。基本上我有一个三列网格。第一列和第三列可以包含可变数量的行。第二列总是正好有一行。每行都有一个最小高度。

因此，具有最多行的列将所有高度设置为最小高度的行。其他列中的行应在高度上等量扩展以占用剩余空间。

假设第一列有三行，每行 50px 高。第二列必须有一行 150 像素高。如果第三列有 2 行，则每行必须为 75px 高。下面是一些图片，以进一步说明我所追求的。

这甚至可以用 CSS 实现吗？

![在此处输入图像描述](../Images/050cb5b569f7837acf9545f1b7b120eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:58:11.823

如果您不介意只在少数几个浏览器中工作，那么您完全可以使用纯 CSS 来做到这一点。继续，添加和删除任意数量的孙 div：

[http://codepen.io/cimmanon/pen/ldmtJ](http://codepen.io/cimmanon/pen/ldmtJ)

```
/* line 5, ../sass/test.scss */
.wrapper {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
}
@supports (display: flex) and (flex-wrap: wrap) {
  /* line 5, ../sass/test.scss */
  .wrapper {
    display: flex;
  }
}

/* line 9, ../sass/test.scss */
.a, .b, .c {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-flow: row wrap;
  -ms-flex-flow: row wrap;
  flex-flow: row wrap;
}
@supports (display: flex) and (flex-wrap: wrap) {
  /* line 9, ../sass/test.scss */
  .a, .b, .c {
    display: flex;
  }
}
/* line 13, ../sass/test.scss */
.a div, .b div, .c div {
  border: 1px solid;
  -webkit-flex: 1 0 100%;
  -ms-flex: 1 0 100%;
  flex: 1 0 100%;
}

/* Fancy it up! */
/* line 21, ../sass/test.scss */
.a {
  background: #ff9999;
  -webkit-flex: 1 1 10em;
  -ms-flex: 1 1 10em;
  flex: 1 1 10em;
}

/* line 26, ../sass/test.scss */
.b {
  background: #00e600;
  -webkit-flex: 1 1 10em;
  -ms-flex: 1 1 10em;
  flex: 1 1 10em;
}

/* line 31, ../sass/test.scss */
.c {
  background: #9999ff;
  -webkit-flex: 1 1 40%;
  -ms-flex: 1 1 40%;
  flex: 1 1 40%;
}

<div class="wrapper">
  <div class="a">
    <div>a</div>
    <div>a</div>
    <div>a</div>
    <div>a</div>
    <div>a</div>
  </div>

  <div class="b">
    <div>b</div>
  </div>

  <div class="c">
    <div>c</div>
    <div>c</div>
  </div>
</div> 
```

浏览器支持：Opera、Chrome、IE10。*当 Firefox 终于开始支持包括*flex-wrap 在内的当前 Flexbox 草案时，它也将在那里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:25:40.893

你基本上必须伪造它。您需要确保三列都有包装器 - 并且整个东西都有一个包装器。然后你可以做一些类似[CSS Faux 列](http://alistapart.com/article/fauxcolumns)的事情，使第二列看起来和其他两列一样高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:37:29.303

根据一些人的建议，我最终使用了一些简单的 javascript 来完成这项工作：

```
$(document).ready(function() {
   var c1Rows = $(".col1 .row").length;
   var c3Rows = $(".col3 .row").length;

   var minHeight = 50;
   var max = Math.max(c1Rows, c3Rows);
   var totalHeight = max * minHeight;

   $(".col1 .row").css("height", totalHeight / c1Rows);
   $(".col2 .row").css("height", totalHeight);
   $(".col3 .row").css("height", totalHeight / c3Rows);
}); 
```

# javascript - Javascript“全局”变量问题

> ID：15164329
> 
> 赞同：0
> 
> 时间：2013-03-01T18:20:50.870
> 
> 标签：javascript, jquery, xml-parsing, global-variables

```
 var desc;
    $.ajax({
        url: "data/step2.xml",
        dataType: "xml",
        success: function(data){
            $(data).find('date').each(function(){
                var day = $(this).find('day').text();
                var date = $("#txtDate").datepicker("getDate");
                date = (date.getDate()+"-"+date.getMonth()+1+"-"+date.getFullYear());
                if (day==date){
                    $(this).find('availability').each(function(){
                        var prod = $(this).find('product').text();
                        var time = $(this).find('starttime').text();
                        if (prod==label){
                            desc="!";
                        }
                    });
                }
            });
        }
    }); 
```

我在访问`desc`变量时遇到了一些问题...我想操纵它的值，正如您在 中看到的那样`desc="!"`，但它返回未定义。有没有办法使变量成为全局变量或其他东西？或其他方式访问它？...哦，所有这些代码都在一个函数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:24:39.227

在这种特殊情况下，问题不在于`desc`变量的范围。您在回调中操作的`desc`变量`success`与在 ajax 调用之前声明的变量相同。

这里的问题是时机。该`success`方法不会在进行 ajax 调用的同时执行。它会在 ajax 调用完成后的一段时间后执行。只有在那个时候才会写入值`desc`。任何处理该`desc`值的代码都必须从`desc`设置值的位置调用

```
if (prod == labe) { 
  desc = "!";
  onDescChanged();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:29:41.417

我假设您的代码正在尝试类似：

```
function foo() {
    var desc;
    $.ajax({
        ....
        success: function() {
            ...
            desc = "!";
        }
    });
    return desc; // this will return undefined, as success() hasn't completed
} 
```

为了解决这个问题，请使用 JaredPar 的回答中的回调函数。

# c++ - C ++ 11强制转换常量迭代器指向shared_ptr对象的容器

> ID：15164330
> 
> 赞同：2
> 
> 时间：2013-03-01T18:20:51.027
> 
> 标签：c++, c++11, iterator, constants, shared-ptr

我有一个 STL 容器，其元素类型为`const std::shared_ptr<MyClass>`.

我想为用户提供两种迭代器类型：

1.  `MyContainer::iterator`

typedefed as `std::vector<const std::shared_ptr<MyClass>>::iterator` （应该与`std::vector<const std::shared_ptr<const MyClass>>::const_iterator`

1.  `MyContainer::const_iterator`

typedefed as `std::vector<const std::shared_ptr<const MyClass>>::iterator` （应该与`std::vector<const std::shared_ptr<const MyClass>>::const_iterator`

换句话说，我希望“ `const`”指的是`MyClass`常数，而不是`shared_ptr`常数。我找到的获取第二个迭代器类型的解决方案是获取第一个，这很容易（例如使用`vector::begin`），然后使用`static_cast`(fixme: 不需要使用`const_cast`，因为我正在添加 constness，而不是删除它）将其转换为第二种类型）。

这会是实现这一目标的常见良好设计方式，还是有更好/更常见的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:25:36.457

> typedefed as `std::vector<const std::shared_ptr<MyClass>>::iterator`（应该与`std::vector<std::shared_ptr<const MyClass>>::const_iterator`

但它可能不是同一类型。迭代器不仅仅是指针。如果`iterator`and`const_iterator`类型在内部定义，`vector`那么它们是完全不相关的类型：

```
template<typename T>
class vector
{
    class iterator;
    class const_iterator;
    // ... 
```

`vector<const int>`是不同的类型`vector<int>`，因此它们的嵌套类型也不同。就编译器而言，它们是完全不相关的类型，即您不能只移动`const`到此类型的任何点并获得兼容的类型：

```
vector<const shared_ptr<const T>>::iterator 
```

您不能用于`const_cast`在不相关的类型之间进行转换。您可以使用`static_cast`将 a 转换`vector<T>::iterator`为 a`vector<T>::const_iterator`但它不是真正的演员，您正在从前者构造后者，这是允许的，因为标准要求进行转换。

您可以将 a 转换`shared_ptr<const T>`为 a `shared_ptr<T>`with `const_pointer_cast<T>`but 只是因为它被定义为按标准工作，而不是因为这些类型本质上是兼容的，也不是因为它像普通的 ol' 指针一样“工作”。

由于`vector`'s 的迭代器不能提供你想要的深度常量，你需要自己编写，但这并不难：

```
class MyClass { };

class MyContainer
{
    typedef std::vector<std::shared_ptr<MyClass>> container_type;

    container_type m_cont;

public:

    typedef container_type::iterator iterator;

    class const_iterator
    {
        typedef container_type::const_iterator internal_iterator;
        typedef std::iterator_traits<internal_iterator> internal_traits;

        const_iterator(internal_iterator i) : m_internal(i) { }
        friend class MyContainer;

    public:

        const_iterator() { }
        const_iterator(iterator i) : m_internal(i) { }

        typedef std::shared_ptr<const MyClass> value_type;
        typedef const value_type& reference;
        typedef const value_type* pointer;
        typedef internal_traits::difference_type difference_type;
        typedef internal_traits::iterator_category iterator_category;

        const_iterator& operator++() { ++m_internal; return *this; }
        const_iterator operator++(int) { const_iterator tmp = *this; ++m_internal; return tmp; }

        reference operator*() const { m_value = *m_internal; return m_value; }
        pointer operator->() const { m_value = *m_internal; return &m_value; }

        // ...

    private:
        internal_iterator m_internal;
        mutable value_type m_value;
    };

    iterator begin() { return m_cont.begin(); }
    const_iterator begin() const { return const_iterator(m_cont.begin()); }

    // ...    
}; 
```

该迭代器类型缺少一些东西（`operator--`, `operator+`），但它们很容易添加，遵循与已经显示的相同的想法。

需要注意的关键点是，为了`const_iterator::operator*`返回引用，需要有一个`shared_ptr<const MyClass>`对象存储为迭代器的成员。该成员充当该`shared_ptr<const MyClass>`值的“缓存”，因为底层容器的真实元素是不同的类型，`shared_ptr<MyClass>`因此您需要在某个地方缓存转换后的值，以便可以返回对它的引用。NB 这样做会稍微破坏迭代器的要求，因为以下内容无法按预期工作：

```
MyContainer::const_iterator ci = c.begin();
const shared_ptr<const MyClass>& ref = *ci;
const MyClass* ptr = ref.get();
++ci;
(void) *ci;
assert( ptr == ref.get() );  // FAIL! 
```

断言失败的原因是`*ci`它没有返回对容器底层元素的引用，而是返回到迭代器的成员，该迭代器通过以下增量和取消引用进行修改。如果这种行为不可接受，您将需要从迭代器返回一个代理，而不是缓存一个值。或者在取消引用`shared_ptr<const MyClass>`时返回 a 。`const_iterator`（获得 100% 正确的困难是 STL 容器不尝试对深度常量建模的原因之一！）

定义您自己的迭代器类型的许多工作都是由该[`boost::iterator_adaptor`](http://www.boost.org/libs/iterator/doc/iterator_adaptor.html) 实用程序为您完成的，因此上面的示例仅对说明有用。使用该适配器，您只需执行此操作即可获得具有所需行为的自定义迭代器类型：

```
struct iterator
: boost::iterator_adaptor<iterator, container_type::iterator>
{
    iterator() { }
    iterator(container_type::iterator i) : iterator_adaptor(i) { }
};

struct const_iterator
: boost::iterator_adaptor<const_iterator, container_type::const_iterator, std::shared_ptr<const MyClass>, boost::use_default, std::shared_ptr<const MyClass>>
{
    const_iterator() { }
    const_iterator(iterator i) : iterator_adaptor(i.base()) { }
    const_iterator(container_type::const_iterator i) : iterator_adaptor(i) { }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:31:45.823

`boost::iterator_adaptor`使得基于另一种迭代器类型定义自己的迭代器类型变得非常容易。因此，您可以根据`*iter`需要进行设置。`const shared_ptr<MyClass>&``const shared_ptr<const MyClass>&`

尽管在这种`const_iterator`情况下，取消引用不能返回 a`const shared_ptr<const MyClass>&`如果您实际拥有的是`shared_ptr<MyClass>`. 所以我们将定义`const_iterator::reference`为just`shared_ptr<const MyClass>`并按值返回。

```
#include <boost/iterator/iterator_adaptor.hpp>

class MyContainer {
public:

    class iterator;
    class const_iterator;

    class iterator :
        public boost::iterator_adaptor<
            iterator,                         // This class, for CRTP
            std::vector<const std::shared_ptr<MyClass>>::const_iterator,
                                              // Base type
            const std::shared_ptr<MyClass> >  // value_type
    {
    public:
        iterator() {}
        iterator(const iterator&) = default;

    private:
        friend class MyContainer;                 // allow private constructor
        friend class boost::iterator_core_access; // allow dereference()
        explicit iterator(base_type iter) : iterator_adaptor(iter) {}
        const std::shared_ptr<MyClass>& dereference() const
            { return *base_reference(); }
    };

    class const_iterator :
        public boost::iterator_adaptor<
            const_iterator,                        // This class, for CRTP
            std::vector<const std::shared_ptr<MyClass>>::const_iterator,
                                                   // Base type
            const std::shared_ptr<const MyClass>,  // value_type
            boost::use_default,                    // difference_type
            std::shared_ptr<const MyClass> >       // reference_type
    {
    public:
        const_iterator();
        const_iterator(const const_iterator&) = default;

        // Implicit conversion from iterator to const_iterator:
        const_iterator(const iterator& iter) : iterator_adaptor(iter.base()) {}

    private:
        friend class MyContainer;                 // allow private constructor
        friend class boost::iterator_core_access; // allow dereference()
        explicit const_iterator(base_type iter) : iterator_adaptor(iter) {}
        std::shared_ptr<const MyClass> dereference() const
            { return *base_reference(); }
    };

    iterator begin() { return iterator(mVec.begin()); }
    iterator end() { return iterator(mVec.end()); }
    const_iterator begin() const { return cbegin(); }
    const_iterator end() const { return cend(); }
    const_iterator cbegin() const { return const_iterator(mVec.begin()); }
    const_iterator cend() const { return const_iterator(mVec.end()); }

private:
    std::vector<const std::shared_ptr<MyClass>> mVec;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:25:15.980

shared_ptr 和其他标准智能指针在设计时并未考虑到深度常量。他们试图尽可能接近原始指针的使用，并且原始指针的 const-ness 不会影响指针的 const-ness。

Andrei Alexandrescu 的[Loki::SmartPtr](http://loki-lib.sourceforge.net/html/a00529.html)（在他的*Modern C++ Design*中进行了描述）将引用计数和深度 const-ness 实现为策略，这将为您提供您正在寻找的效果。如果您不介意切换到非标准智能指针以获得非标准行为，那可能是一种方法。

# javascript - 我不明白为什么我的 nodejs/javascript 正则表达式不起作用

> ID：15164331
> 
> 赞同：1
> 
> 时间：2013-03-01T18:20:50.403
> 
> 标签：javascript, regex, node.js

我有一些要解析的简单文本：

```
total 4.0K
-rw-rw-r-- 1 346 Mar  1 08:50 save_1
-rw-rw-r-- 1   0 Feb 28 17:28 save_2
-rw-rw-r-- 1   0 Feb 28 17:28 save_3 
```

我有一个在不同的正则表达式测试网站上测试过的正则表达式：

```
\w{3}\s+\d{1,2}\s\d{2}\:\d{2}\s\w{4}\_\d 
```

我试图将示例文本作为 Node.js 应用程序中以下函数的输入，并返回一个具有 3 个不同匹配项的对象或数组，从月份到行尾。

```
function parse(str) {
    var regex = new RegExp("\w{3}\s+\d{1,2}\s\d{2}\:\d{2}\s\w{4}\_\d");
    return regex.test(str);
    //return str.match(regex);
} 
```

我不明白为什么 .test() 的布尔值是假的，而 .match() 的对象是空的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:40:08.467

与其尝试解析错误的输出`ls`，[不如](http://mywiki.wooledge.org/ParsingLs)简单地使用 node.js 提供的文件系统操作。使用文件系统操作，您可以确保您的程序将在（几乎）任何边缘情况下工作，因为输出定义良好。如果该文件夹将来包含的文件多于或少于三个，它甚至可以工作！

正如您在评论中所说，您想要文件夹中文件的名称和日期/时间。那么让我们来看看：

[`fs.readdir(path, callback)`](http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback):`fs.readdir`将为您提供路径中指定的文件夹中的文件名数组。您可以将它们传递`fs.stat`给以找出 mtime：

[`fs.stat(path, callback)`](http://nodejs.org/api/fs.html#fs_fs_fstat_fd_callback):`fs.stat()`会给你一个[`fs.Stats`](http://nodejs.org/api/fs.html#fs_class_fs_stats)包含属性中的 mtime的对象`mtime`。

因此，您的代码之后将如下所示：

```
fs.readdir('dir', function (err, files) {
    for (var i = 0; i < files.length; i++) {
        (function () {
            var filename = files[i]
            fs.stat('dir/' + filename, function (err, stats) {
                console.log(filename + " was last changed on " + stats.mtime);
            });
        })();
    }
}); 
```

输出是：

```
[timwolla@~/test]node test.js
5 was last changed on Fri Mar 01 2013 20:24:35 GMT+0100 (CET)
4 was last changed on Fri Mar 01 2013 20:24:34 GMT+0100 (CET)
2 was last changed on Fri Mar 01 2013 20:24:33 GMT+0100 (CET) 
```

如果您需要返回值，请使用`Sync`这些方法的相应版本。然而，这些会阻塞你的 node.js 事件循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:08:22.107

您的正则表达式失败，因为您需要`\`在将字符串传递给 RegExp 构造函数时转义，即`\s`应该是`\\s`.

```
var regex = new RegExp( "\\w{3}\\s+\\d{1,2}\\s\\d{2}:\\d{2}\\s\\w{4}_\\d", "g" ); 
```

添加标志以`g`获取所有匹配项。

# eclipse - 进入新编辑器时，Eclipse 中的调试会散焦

> ID：15164338
> 
> 赞同：0
> 
> 时间：2013-03-01T18:21:13.177
> 
> 标签：eclipse

我最近从 Eclipse Galileo 切换到 Eclipse Juno。在 Juno 上，我发现了一个非常烦人的不便：每当我在调试时从一个编辑器进入另一个编辑器（按 F5 进入另一个文件时），焦点会丢失，我必须单击新编辑器才能继续使用F5 或 F6。在 Galileo 中，我将通过按 F5 继续调试，而无需重新调整编辑器的焦点。这是一个错误、一个变化或一个我可以关闭选项的功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:28:32.613

在朱诺看来，你并不孤单。看一下eclipse中的这个错误也许它会对你有所帮助：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372941)

# python - 如何在此 python 代码中增加每个按钮的大小？

> ID：15164341
> 
> 赞同：1
> 
> 时间：2013-03-01T18:21:30.963
> 
> 标签：python, gtk

如果我想让下面代码中的每个按钮都变大 5 倍，我该怎么做？我需要设置任何特定的属性吗？

```
from gi.repository import Gtk

class GridWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Grid Example")

        grid = Gtk.Grid()
        self.add(grid)

        button1 = Gtk.Button(label="Button 1")
        button2 = Gtk.Button(label="Button 2")
        button3 = Gtk.Button(label="Button 3")
        button4 = Gtk.Button(label="Button 4")
        button5 = Gtk.Button(label="Button 5")
        button6 = Gtk.Button(label="Button 6")

        grid.add(button1)
        grid.attach(button2, 1, 0, 2, 1)
        grid.attach_next_to(button3, button1, Gtk.PositionType.BOTTOM, 1, 2)
        grid.attach_next_to(button4, button3, Gtk.PositionType.RIGHT, 2, 1)
        grid.attach(button5, 1, 2, 1, 1)
        grid.attach_next_to(button6, button5, Gtk.PositionType.RIGHT, 1, 1)

win = GridWindow()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:26:59.590

```
width = 5 * button1.get_allocation().width
height = 5 * button1.get_allocation().height

button1.set_size_request(width, height) 
```

[http://zetcode.com/gui/pygtk/firststeps/](http://zetcode.com/gui/pygtk/firststeps/)

# sorting - 如何使用自然排序顺序对 solr 中的文本/字符串进行排序？

> ID：15164342
> 
> 赞同：5
> 
> 时间：2013-03-01T18:21:42.973
> 
> 标签：sorting, solr, natural-sort

我想按照以下方式对值列表进行排序：

> *   4
> *   5xa
> *   8kdjfew454
> *   9
> *   10
> *   999cc
> *   b
> *   c9
> *   c10cc
> *   c11

换句话说，有时被称为“自然排序”，其中文本在有文本的地方按字母/字典顺序排序，但在有数字的地方按数字排序，即使两者混合在同一个字符串中。

我无论如何都找不到在 Solr (4.0 atm) 中执行此操作。有没有标准的方法来做到这一点，或者至少有一个可行的“食谱”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T11:21:52.603

[本文](http://www.andornot.com/blog/post/Make-numbers-behave-when-sorting-alphanumerically-in-Solr.aspx)描述了您可以实现的最接近的事情

**来自文章：**

> 要强制数字按数字排序，我们需要用零填充任何数字：2 变为 0002，10 变为 0010，100 变为 0100，等等。然后，即使是词法排序也会像这样排列值：
> 
> 标题 1 标题 2 标题 10 标题 100
> 
> **字段类型**
> 
> 此字母数字排序字段类型将找到的任何数字转换为 6 位数字，并用零填充。（如果您希望字段值中的数字大于 6 位，则需要在填充时增加零的数量。）
> 
> 字段类型还会删除英语和法语的前导冠词、小写字母，并清除任何非字母数字字符。它以英语为中心，并假设变音符号已被折叠成 ASCII 字符。

```
<fieldType name="alphaNumericSort" class="solr.TextField" sortMissingLast="false" omitNorms="true">
  <analyzer>
    <!-- KeywordTokenizer does no actual tokenizing, so the entire
         input string is preserved as a single token
      -->
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <!-- The LowerCase TokenFilter does what you expect, which can be
         when you want your sorting to be case insensitive
      -->
    <filter class="solr.LowerCaseFilterFactory" />
    <!-- The TrimFilter removes any leading or trailing whitespace -->
    <filter class="solr.TrimFilterFactory" />
    <!-- Remove leading articles -->
    <filter class="solr.PatternReplaceFilterFactory"
            pattern="^(a |the |les |la |le |l'|de la |du |des )" replacement="" replace="all"
    />
    <!-- Left-pad numbers with zeroes -->
    <filter class="solr.PatternReplaceFilterFactory"
            pattern="(\d+)" replacement="00000$1" replace="all"
    />
    <!-- Left-trim zeroes to produce 6 digit numbers -->
    <filter class="solr.PatternReplaceFilterFactory"
            pattern="0*([0-9]{6,})" replacement="$1" replace="all"
    />
    <!-- Remove all but alphanumeric characters -->
    <filter class="solr.PatternReplaceFilterFactory"
            pattern="([^a-z0-9])" replacement="" replace="all"
    />
  </analyzer>
</fieldType>
```

> **样本输出**
> 
> 标题编号 1 => titleno000001 标题编号 2 => titleno000002
> 标题编号 10 => titleno000010
> 标题编号 100 => titleno000100

# javascript - 使用事件表单 onchange 时更改表格单元格文本颜色

> ID：15164343
> 
> 赞同：0
> 
> 时间：2013-03-01T18:21:44.330
> 
> 标签：javascript, html, css, getelementbyid

当表单中的内容使用 onchange 事件发生更改时，我正在寻找正确的方法（适用于所有浏览器）来更改单元格表文本颜色（这是一个链接）。我正在使用这个：

JavaScript 代码

```
function changeColor(num){
    if (num == "1"){
               cont = num - 1;
               answer[cont] = 1;
               document.getElementById("cell_1").className="cellNumFilled";
        } 
```

HTML 代码

```
<table border="1" cellspacing="0" cellpadding="2">
  <tr>  
   <td><a class="cellNum" HREF="#preg1" title="1" id="cell_1">1</a></td> 
   <td><a class="cellNum" HREF="#preg2" title="2" id="cell_2">2</a></td> 
   <td><a class="cellNum" HREF="#preg3" title="3" id="cell_3">3</a></td> 
  </tr>
</table>

<div id="quesItem">
<p><b>1\. [ 1 Pts.]</b> bla bla bla</p>
<p>Answer: 
  <input type="text" name="a6" maxlenght="200" size="20" onchange="changeColor(1)" />
  <input type="button" value="Preview"/> 
</p>
</div> 
```

完整的“功能代码”在这个[jsfiddle](http://jsfiddle.net/edwinfg/rMSV2/)中。

当输入框中的内容发生变化时，表格顶部的颜色也必须发生变化。我为 tag 使用了两个类，一个是默认的，另一个是当内容通过 'document.getElementById("idName").className="newClassName";' 但不起作用。知道为什么吗？或者更好更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:37:45.913

在设置类之前，只需像这样删除该属性

```
document.getElementById("cell_1").removeAttribute("class") 
```

接着

```
document.getElementById("cell_1").setAttribute("class","cellNumFilled") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:02:05.963

试试下面的：

```
document.getElementById("idName").setAttribute('class', 'className'); 
```

我希望它有所帮助。

# extjs - Sencha Touch手机网站启动时间

> ID：15164344
> 
> 赞同：1
> 
> 时间：2013-03-01T18:21:50.403
> 
> 标签：extjs, sencha-touch-2.1

这可能是一个新手问题，但是....

我正在使用 Sencha Touch 2 开发我的第一个移动网站。我现在将应用程序部署到我的托管服务器，但是.....它甚至需要大约 11 秒才能启动？

这是我在我的开发机器上的 Chrome 中运行它的时候。它执行 247 个请求，总共 1.8 MB。

```
247 requests  ❘  1.8 MB transferred  ❘  10.65 s (onload: 10.66 s, DOMContentLoaded: 352 ms) 
```

这是正常的吗？我的意思是，这只是框架的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:10:19.797

您需要将使用的所有文件连接并最小化为一个大文件

Sencha Touch 2.1使用[Sencha 命令](http://docs.sencha.com/touch/2-1/#!/guide/command)

```
sencha app build 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:30:08.250

如果您直接在服务器上部署了开发版本，那么整体加载时间将会增加。要部署应用程序，您应该使用压缩的 css 和 js 构建您的应用程序。请按照[本指南](http://docs.sencha.com/touch/2-1/#!/guide/building)开始。成功构建后，您将获得 js 文件的缩小版本。考虑压缩 css 文件。要压缩 CSS 文件，您可以使用[compass](http://compass-style.org/)。尽管您已经开发了应用程序，但请考虑转到涵盖如何压缩 css 文件以用于生产版本的[主题指南。](http://docs.sencha.com/touch/2-1/#!/video/theming)

正如您所提到的，应用程序正在发出 247 请求。我认为这也包括图像。您可以将图像直接base64编码到CSS文件中，以避免与服务器频繁通信。另一种减少图像请求的方法是使用**css sprites**。

SO 还对这里看到的不同图像使用 css 精灵。

# android - 带Phonegap的推杆不工作

> ID：15164345
> 
> 赞同：0
> 
> 时间：2013-03-01T18:21:52.900
> 
> 标签：android, cordova, pusher

我正在开发一个 Android + Phonegap + jQuery-Mobile 应用程序，我计划使用 Pusher 来实现推送通知。我正在使用此链接中的入门项目测试 Pusher 服务：http: [//blog.pusher.com/pusher-on-phonegap-for-android/](http://blog.pusher.com/pusher-on-phonegap-for-android/)

项目详情：

Android API 目标 15

科尔多瓦 2.3.0

Pusher JavaScript 库 v1.12.7

jQuery Mobile 1.3.0（最终版本）

我将所有必要的 .java 文件和 .js 文件复制到我的项目中。这是我实例化推送器连接的方式：

```
 var CONFIG = {
                    PUSHER: {
                    APP_KEY: 'my-key'
                    }
            };
         // Connect
            var pusher = new Pusher(CONFIG.PUSHER.APP_KEY);
            pusher.connection.bind('state_change', connectionStateChange);

            function connectionStateChange(state) {
                $('#connectionStatus').html(state.current);
            }

            // Subscribe
            var channel = pusher.subscribe('my-channel');
            channel.bind('pusher:subscription_succeeded', subscriptionSucceeded);

            function subscriptionSucceeded() {
                $('#subscriptionStatus').html('succeeded');
            }

            channel.bind('my-event', handleMyEvent);

            function handleMyEvent( data ) {
            //  window.plugins.statusBarNotification.notify("You have a notification", data.message);
              $('#pusher-data').append('<pre>'+data.message+'</pre>');
            } 
```

但是，一旦我运行我的项目，我就无法看到任何有关 Pusher 连接的日志条目，而是在 Logcat 中看到类似这样的内容：

```
03-01 23:11:23.997: E/Web Console(3631): Uncaught TypeError: Object function (url) {

03-01 23:11:23.997: E/Web Console(3631):         // get a new websocket object from factory (check com.strumsoft.websocket.WebSocketFactory.java)

03-01 23:11:23.997: E/Web Console(3631):         this.socket = WebSocketFactory.getInstance(url);

03-01 23:11:23.997: E/Web Console(3631):         // store in registry

03-01 23:11:23.997: E/Web Console(3631):         if(this.socket) {

03-01 23:11:23.997: E/Web Console(3631):             WebSocket.store[this.socket.getId()] = this;

03-01 23:11:23.997: E/Web Console(3631):         } else {

03-01 23:11:23.997: E/Web Console(3631):             throw new Error('Websocket instantiation failed! Address might be wrong.');

03-01 23:11:23.997: E/Web Console(3631):         }

03-01 23:11:23.997: E/Web Console(3631):     } has no method '__addTask' at file:///android_asset/www/pusher.js:1288 
```

在这一点上，我真的被困住了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:13:32.510

这里的首选解决方案是放弃使用 WebSocket Java 包装器，而是使用我们的 HTTP 回退。

Pusher JavaScript 库的新测试版可通过[http://js.pusher.com/2.0.0-pre/pusher.min.js获得](http://js.pusher.com/2.0.0-pre/pusher.min.js)

通过 HTTPS： [https ://d3dy5gmtp8yhk7.cloudfront.net/2.0.0-pre/pusher.min.js](https://d3dy5gmtp8yhk7.cloudfront.net/2.0.0-pre/pusher.min.js)

我们需要在 PhoneGap 中进行额外的测试，但 HTTP 回退应该是一个更好的解决方案。

# javascript - 如何根据单选按钮列表选择显示或隐藏 texbox

> ID：15164346
> 
> 赞同：1
> 
> 时间：2013-03-01T18:21:52.853
> 
> 标签：javascript, jquery, asp.net

老实说，我认为这很简单。

我有一个带有两个值的 radioButtonList，Approved 或 Rejected。

如果选定的值已批准，则隐藏 texbox。如果选择了拒绝，则显示文本框，以便可以在框中输入拒绝的原因。

我不能让它工作。我试过了：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('input:[name=<%= apr_rej.ClientID %>]').click(function () {
            if ($(this).val() == 'Approved') {
                $('#<%= divReason.ClientID %>').hide();
            } else {
                $('#<%= divReason.ClientID %>').show();
            }
        });
    });
</script> 
```

我得到了 divReason 必须声明。

然后我尝试了：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('input:[name=<%= apr_rej.ClientID %>]').click(function () {
            if ($(this).val() == 'Approved') {
                $('#divReason').hide();
            } else {
                $('#divReason').show();
            }
        });
    });
</script> 
```

没有错误但没有触发事件。

这是标记：

```
 <tr>
         <td align="left" class="style1" style="border: thin solid #6699FF">
             <h3 style="text-align: left">
                 2.<strong> Select One:</strong></h3>
           </td>
            <td style="border: thin solid #6699FF" class="style5"><asp:RadioButtonList runat="server" 
                    ID="apr_rej" repeatdirection="Horizontal" TextAlign="Left" CellPadding="0" 
                    CellSpacing="0" style="font-weight:700; text-align: center;" 
                    Height="21px" Width="406px" >
                    <asp:ListItem Text="Approve" Value="Approved" />
                    <asp:ListItem Text="Reject" Value="Rejected" />
               </asp:RadioButtonList>
           </td>
       </tr>
       <tr id="divReason">
          <td align="left" class="style3" style="border: thin solid #6699FF">
             <h3 class="style4">
3\. Enter Comments:</h3>
          </td>
          <td style="border: thin solid #6699FF;font-Weight:bold;" class="style5">Comments:(If this form is Rejected, you must give a reason.)<br />
              <asp:TextBox id="txtreason" runat="server" TextMode ="MultiLine" 
                 style="border: 1px solid #6699FF" BorderColor="White" Height="114px" 
                  Width="574px"></asp:TextBox><br />
         </td>
      </tr> 
```

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:25:58.540

您在选择器中将名称与 id 进行比较，您应该使用包含通配符的 id 属性选择器。你不能使用`ClientID`with`divReason`因为它没有*runat="server"*。

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('input:[id*=<%= apr_rej.ClientID %>]').click(function () {
            if ($(this).val() == 'Approved') {
                $('#divReason').hide();
            } else {
                $('#divReason').show();
            }
        });
    });
</script> 
```

# delphi - 使用“A Simple Delphi Wrapper for SQLite3”插入日期

> ID：15164354
> 
> 赞同：2
> 
> 时间：2013-03-01T18:22:19.903
> 
> 标签：delphi, sqlite, delphi-2010

我正在使用 delphi 2010 和 Tim Anderson 的 SQLite3 包装器 - [http://www.itwriting.com/blog/?page_id=659](http://www.itwriting.com/blog/?page_id=659) - 但我无法插入日期

这是我的数据库创建

```
DB.ExecSql('CREATE TABLE Tags (No Integer NOT NULL, Title VarChar(25) NOT NULL, Creator VarChar(25) NULL, Born Date NULL, Charter Boolean Default False NULL, Owned Boolean Default False NULL, Image Blob NULL, CONSTRAINT PK_No PRIMARY KEY (No));'); 
```

哪个构建和工作正常。我用 SQLite 管理员测试了它 - [http://sqliteadmin.orbmu2k.de/](http://sqliteadmin.orbmu2k.de/) 我什至可以使用管理员手动输入日期

这是我的插入

```
DB.ExecSql('Insert into Tags (No, Title, Creator, Born, Charter, Owned) ' +
             'values (' + quotedStr(frmTag.edtTagNo.Text) + ',' + quotedStr(frmTag.edtTitle.Text) + ',' +
                          quotedStr(frmTag.edtCreator.Text) + ',' + quotedStr(frmTag.edtBorn.Text) + ',' +
                          quotedStr(BoolToStr(frmTag.cbxCharter.Checked)) + ',' + quotedStr(BoolToStr(frmTag.cbxOwned.Checked)) + ');'); 
```

日期字段由 edtBorn 控件 (TRzDateEdit) 提供

我在插入之前检查了 edtBorn.Text 和 edtBorn.date 的值，并且日期始终正确。

我尝试插入以下方式：

```
frmTag.edtBorn.Text 
FormatDateTime('mm/dd/yyyy',frmTag.edtBorn.Text)
quotedStr(frmTag.edtBorn.Text)
quotedStr(FormatDateTime('mm/dd/yyyy',frmTag.edtBorn.Text)) 
```

我什至尝试过使用参数

```
 DB.AddParamText('@ABorn', frmTag.edtBorn.Text);
 DB.AddParamFloat('@ABorn', frmTag.edtBorn.Date); 
```

似乎没有任何效果！我没有例外，但我的字段从未获得 dat 值！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:08:10.783

**日期和时间数据类型**

SQLite 能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

*   TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
*   REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
*   INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

**例如此处显示 REAL 和 INTEGER 部分。**

修改后的 SQLite3 包装器测试文件：`uTestSqlite`

```
sSQL := 'CREATE TABLE testtable ([ID] INTEGER PRIMARY KEY,[OtherID] INTEGER NULL,';
sSQL := sSQL + '[Name] VARCHAR (255),[Number] FLOAT,[Date] INTEGER, [notes] BLOB,
       [picture] BLOB COLLATE NOCASE);';
sldb.execsql(sSQL);
sldb.execsql('CREATE INDEX TestTableName ON [testtable]([Name]);');

//begin a transaction
sldb.BeginTransaction;

sSQL := 'INSERT INTO testtable(Name,OtherID,Number,Date) VALUES ("Some Name", 4,
         julianday("now"), strftime("%s","now"));';
sldb.ExecSQL(sSQL);

sSQL := 'INSERT INTO testtable(Name,OtherID,Number,Date,Notes) VALUES ("Another Name",12,
         julianday("2013-03-01"),strftime("%s","2013-03-01"), "More notes");';
sldb.ExecSQL(sSQL);

//end the transaction
sldb.Commit;

[...]

//query the data
sltb := slDb.GetTable('SELECT * FROM testtable');
if sltb.Count > 0 then
begin
//display first row
updateFields;
end; 
```

显示值：

```
procedure TForm1.updateFields;
var
Notes: string;
myDate :TDateTime;

begin
ebName.Text := sltb.FieldAsString(sltb.FieldIndex['Name']);
ebID.Text := inttostr(sltb.FieldAsInteger(sltb.FieldIndex['ID']));

if TryJulianDateToDateTime(sltb.FieldAsDouble(sltb.FieldIndex['Number']),myDate)
   then
   ebNumber.Text := DateTimeToStr(myDate)
   else
   ShowMessage('Not a valid Julian date');

myDate:=UnixToDateTime(sltb.FieldAsInteger(sltb.FieldIndex['Date']));
ebDate.Text := DateTimeToStr(myDate);

[...]
end; 
```

输出：

![在此处输入图像描述](../Images/2d379ba36d2564410862becf230b643f.png)

在你的问题中`DB.ExecSql('CREATE TABLE Tags (..., Born Date NULL,...);');`

替换`DB.ExecSql('Insert into Tags (....) VALUES (...`

```
+ quotedStr(frmTag.edtBorn.Text) 
```

和

```
'strftime("%Y-%m-%d","'+frmTag.edtBorn.Text+'")' 
```

的值`frmTag.edtBorn.Text`必须像`1975-10-21`

您可以通过以下方式获得它：

```
ebDate.Text := sltb.FieldAsString(sltb.FieldIndex['Born']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:12:09.077

我已经制作了自己的“非常轻巧”的 SQLite3 包装器，但使用 Variants 来决定是否使用哪种 sqlite3 内部类型：[https ://github.com/stijnsanders/TSQLite](https://github.com/stijnsanders/TSQLite)

在那里，我发现“松散类型”sqlite3 在内部工作得非常好，我发现存储在 Variant 中的 Delphi 日期变成了 SQLite3 中的浮点值（顺便说一下，TDateTime 实际上是）。一个可能的缺点是从 SQL 操作日期值有点笨拙。我很遗憾看到您已经尝试过 AddParamFloat（和 FieldAsFloat），但这似乎不起作用。

所以我建议你将日期存储为一个字符串，如果是 sqlite 日期格式，则使用一个字符串，例如使用`FormatDateTime('yyyy-mm-dd hh:nn:ss.zzz',d)`. 在这里查看更多信息：[http ://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T08:23:01.337

我使用 Delphi 2010 和 Tim Anderson 的 SQLite3 包装器。
这是我用来创建和使用日期时间字段的内容。它相当直截了当，一直在为我工作。我相信您可以通过我为您编写一个演示程序来弄清楚下面说明的概念。

创建字段的 SQL：

```
 sSQL :=  'CREATE TABLE [someTable] (' +
            '  [somefield1] VARCHAR(12),' +
            '  [somefield2] VARCHAR(12),' +
            '  [myDateTime] DATETIME );'; 
```

填充字段的 SQL：

```
 sSQL := 'INSERT INTO someTable(somefield1, somefield2, myDateTime)' + 
         '  VALUES ( "baloney1", "baloney2","' + FloatToStr(Now) + '");'; 
```

从字段中检索数据的示例：

```
var
sDBFilePathString: string;
sl3tbl: TSqliteTable;
fsldb : TSQLiteDatabase;
FromdbDTField : TDateTime;

begin
   ...
   ... 
    fsldb := TSQLiteDatabase.Create(sDBFilePathString); 
    sl3tbl := fsldb.GetTable('SELECT * FROM someTable');
    FromdbDateTime := StrToFloat(sl3tbl.FieldAsString(sl3tbl.FieldIndex['myDateTime']));
    Showmessage('DT: ' + DateTimeToStr(FromdbDTField));
end; 
```

结果：

```
 **DT: 10/10/2013 1:09:53 AM** 
```

我把它留给你，让事情变得更漂亮或更优雅。

# c++ - 如何在 Eigen 中进行 colwise 操作

> ID：15164355
> 
> 赞同：6
> 
> 时间：2013-03-01T18:22:24.597
> 
> 标签：c++, eigen

我经常这样做：

```
auto f_conj = f.conjugate(); //f is a MatrixXcf, so is C;
for(n=0;n<X.cols();++n)
    C.col(n) = X.col(n).cwiseProduct(f_conj); 
```

我不应该做类似的事情吗

```
C.colwise() = X.colwise().cwiseProduct(f_conj) 
```

反而？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T08:56:09.897

您真正在做的是对角积，所以我建议您使用以下表达式：

```
C = f.conjugate().asDiagonal() * X; 
```

如果要使用 colwise() 表达式，请不要将其放在左侧：

```
C = X.colwise().cwiseProduct(f.conjugate()); 
```

此外，让我警告您有关 auto 关键字的使用。在这里，让我强调这`f_conj`不是 a `VectorXcf`，而是 a 的共轭表达式`VectorXcf`。所以使用`f_conj`or`f.conjugate()`是完全一样的。由于将两个复数或一个复数和一个共轭复数相乘的成本相同，因此在这种精确的情况下，可以使用 auto 关键字。但是，如果`f_conj`是例如：`auto f_conj = (f+g).conjugate()`，那么`f+g`将在您的 for 循环中多次重新计算。不过，做`(f+g).conjugate().asDiagonal() * X`是非常好的，因为 Eigen 知道该做什么。

# salesforce - 如何使用 Javascript 获取 pageblock 元素？

> ID：15164363
> 
> 赞同：0
> 
> 时间：2013-03-01T18:22:40.290
> 
> 标签：salesforce, apex-code, visualforce

我想更改 visualforce 页面的 DOM。那么如何使用 Javascript 获取 pageblock 元素呢？

```
<apex:page>

<apex:pageblock title="Filter" id="block">

</apex:pageblock>

</apex:page> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:34:22.733

在 JavaScript 中引用组件的支持方式是使用`$Component`，例如使用`{!$Component.idName}`来获取由 生成的 HTML 元素的 DOM ID `<apex:outputPanel id="idName">`。

[http://www.salesforce.com/us/developer/docs/pages/Content/pages_access.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_access.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:55:03.303

这是一个关于如何访问它的 jquery 示例：

```
$("*[id$=block]"); 
```

这将返回一个 jquery 对象，您可以进一步与 jquery 一起使用，或调用

```
$("*[id$=block]").get(0); 
```

获取底层 DOM 元素。

如果您使用的是纯 Javascript，则必须查看生成的 HTML 以找出完整的 ID 是什么。使用 DOM 获取元素：

```
document.getElementById("j54:j01:block"); // the Id is made up, but it will be at least as ugly as this 
```

jQuery 的`$=`操作减轻了对此的需求。直接 DOM 解决方案不那么可靠，因为如果您更改 pageBlock 所在的位置，生成的 ID 会发生变化。换句话说，pageBlock 祖先的任何变化都会导致 Id 发生变化。

# view - UICollectionView 嵌入 youtube 视频仍在另一个视图中播放

> ID：15164366
> 
> 赞同：1
> 
> 时间：2013-03-01T18:22:46.357
> 
> 标签：view, ios6, youtube, embed, uicollectionview

我在 UICollectionView 单元格中播放了一个视频，基本上是一个嵌入了 youtube 链接的 UIWebView。当我单击另一个进入另一个视图的单元格时，视频仍在后台播放。由于我有这么多单元格，因此很难跟踪视频播放。此外，当您点击带有 UIWebVIew（嵌入 youtube 视频）的单元格时，它并没有真正检测到 didSelectItemAtIndexPath。

任何建议都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:59:09.207

两个想法。

结帐 NSNotificationCenter，您可以在按下播放时创建一个事件，然后观察它。 [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

另一种选择是不在集合视图中播放视频，而是转到播放视频的另一个视图。我不确定这是否与您想要的功能相差太大，但它似乎更简单。

# grails - 如何在子查询中实现计数

> ID：15164374
> 
> 赞同：1
> 
> 时间：2013-03-01T18:23:20.087
> 
> 标签：grails, grails-orm

我有以下表结构：

```
TABLE A:
ID
COL1
COL2
...
COL(n)

TABLE B:
ID
A_ID (id in table A)
VALUE 
```

存在从 A->B 的一对多关系

```
class A {
    int id
    ...
    coln
    Set<String> bSet

    static hasMany = [bSet: B]

    static mapping = {
        restrictions joinTable: [name: "B", key: "A_ID", column: "VALUE"]
    }
} 
```

如何构建一个条件，以便它执行如下查询：

```
select table1.* from A table1 where (select count(*) from B table2 where table2.A_ID = table1.ID and table2.VALUE in ('excluded_value_1','excluded_value_2')) = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:42:19.090

试试这个，显然未经测试，但可能会给你一些开始

```
def a = A.createCriteria()
a.list {
 createAlias("bSet", "b", CriteriaSpecification.LEFT_JOIN)
 not {
    'in'("b",['excluded_value_1','excluded_value_2'])
 }
} 
```

# jquery - CSS 未应用于 ajax 调用

> ID：15164376
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:23:29.577
> 
> 标签：jquery, jquery-mobile

使用 jquery mobile 添加即时消息。

所以我使用 ASP.Net MVC，并在布局页面中粘贴 CSS、jquery 等。所以在初始加载页面看起来不错

![在此处输入图像描述](../Images/67015f538e1f5668c3a63df727b67e56.png)

然后，当日期更改时，我调用 ajacx 返回部分视图，这会发生

![在此处输入图像描述](../Images/1a11c0d8bec21510f9c2c144886a703a.png)

**那么解决方案是什么？**

布局页面

```
@{
    Layout = null;

}

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" rel="stylesheet" />
        <link href="~/Scripts/jquery-ui-timepicker/jquery.ui.timepicker.css" rel="stylesheet" />
        <link href="../../Content/CheckBoxToggle/style.css" rel="stylesheet" type="text/css" />
       <script src="~/Scripts/JQuery/jquery.1.9.1.min.js"></script>
        <script src="~/Scripts/JQuery/Mobile/jquerymobile-1.3.0.min.js"></script>
        <script src="~/Scripts/JQuery/UI/jqueryUI-1.10.1.min.js"></script>

    </head>
    <body>

        @RenderBody();
  </body>

</html> 
```

看法

```
@model WebUI.ViewModels.ScheduleMobileDisplay
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_AppHomeLayout.Iphone.cshtml";

}

@using (Html.BeginForm())
{
    <div data-role="page" id="pageAccount">
        <link href="~/Content/CSS/jquery-ui-1.10.1.custom.min.css" rel="stylesheet" />
        <script>
            $(function () {
                $("#datepicker").datepicker(
                    {
                        showButtonPanel: true,
                        dateFormat: "dd-M-yy",
                        onSelect: function (dateText, inst) {
                            var date = $(this).val();
                            UpdateSchedule(date);
                        }
                    });
            });
            function UpdateSchedule(date) {
                var baseUrl = '@Url.Action("GetMobileScheduleResults")';

                 $.ajax({
                     url: baseUrl,
                     type: 'GET',
                     data: { date: date }
                 }).done(function (response) {
                     $('#schedule').html(response);
                 });
             }
        </script>
        @RenderPage("~/Views/Shared/_MobileMenu.Iphone.cshtml")
        <div data-role="content">

            <input type="text" id="datepicker"  placeholder="Select Date" />
            <div id="schedule">
              @{ Html.RenderPartial("MobileScheduleList", Model); }
            </div>

        </div>

    </div>

} 
```

局部视图

```
@model WebUI.ViewModels.ScheduleMobileDisplay
        <script src="~/Scripts/JQuery/Mobile/jquerymobile-1.3.0.min.js"></script>
<ul data-role="listview" data-divider-theme="b" data-inset="true">
                <li data-role="list-divider" role="heading">
                    @Model.AppointmentDate
                </li>
                @foreach (var item in Model.Appointments)
                {
                    <li data-theme="c">
                        <a href="/Schedule/MobileAppointmentEdit/@item.Id" data-transition="slide">
                            @item.StartTime @item.PetName
                        </a>
                    </li>
                }

            </ul> 
```

更新：//

试过这个但不起作用

```
$.ajax({
                     url: baseUrl,
                     type: 'GET',
                     data: { date: date },
                     success: function (response) {
                         alert('hi1');
                         $('#schedule').html(response);
                     },
                     complete:function() {
                         alert('comp');

                         $('#lst').listview('refresh');
                     },

                 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:28:43.973

在 ajax OnComplete 方法中，调用下面的代码来应用样式

```
$('#listId').listview('refresh'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:54:08.097

解决方案是这样做

```
success: function (response) {
   $('#schedule').html(response);
   $("#schedule ul").listview();
}, 
```

# php - php网站连接到数据库服务器

> ID：15164387
> 
> 赞同：1
> 
> 时间：2013-03-01T18:23:54.333
> 
> 标签：php, mysql, database, localhost, connect

我正在尝试将我的 php 网站连接到数据库，以供用户注册、登录和其他操作。每次我尝试使用我在 mysql 数据库中创建的虚拟帐户测试登录页面时，当我输入信息时，我不断收到内部 500 错误，这意味着我的代码有问题。我尝试了来自不同教程的不同代码安排，看看是否是问题所在，但没有任何效果。我知道有不同的编码风格，例如使用 " " ，而不是 ' ' 。在代码中，我已经测试了它们，一无所获。请帮忙。下面是我的代码，全部在 MAMP、htdocs 中。SD 是文件夹和数据库名称。

```
**connect.php** :

    <?php
    $connect_error= 'Sorry, we are experiencing connection problems.';
    $db_name = "SD";
    $connection = @mysql_connect("localhost:8888", "root","root") or die($connect_error);
    $db = @mysql_select_db($db_name,$connection) or die($connect_error);
    ?>

**login.php** : 

        <?php
    include 'SD/init.php';

    if (empty($_POST) == false){
        $username = $_POST['username'];
        $password = $_POST['password'];

        if (empty($username) == true || empty($password) == true){
            $errors[] = 'Please enter a username and password';
        }else if (user_exists($username) == false) {
            $errors[] = 'We cannot find that username.  Have you registered yet?';
        }else{  
            $login = login($username, $password);
            if ($login == false){
                $errors[] = 'That username/password combination is incorrect';
            }else {
                $_SESSION['user_id'] = $login;
                header('Location: index.php');
                exit();
            }
        }

        print_r($errors);
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:40:42.887

对我来说 500 错误指向权限问题。我会检查以确保您的文件属于我的正确用户 ls -lah。我也同意检查 apache 错误日志是个好主意。尾 -f /var/log/apache2/error.log

要检查的另一件事是确保您可以使用用户名和密码登录到 mysql mysql -u username -p

# mysql - SQLintersects 查询无法正常工作

> ID：15164391
> 
> 赞同：0
> 
> 时间：2013-03-01T18:24:08.140
> 
> 标签：mysql, geospatial, spatial, point-in-polygon

我正在尝试从我的表中选择位于特定多边形中的点。
这里我的表 test1 有几何类型的 data4 列，它包含：

```
2,3  
5,6  
7,10 
```

当我尝试以下查询时，它返回空行。请帮我解决错误。

```
DECLARE @g geometry;   
SET @g = geometry::STGeomFromText('POLYGON((0 0, 4 0, 4 4, 0 4, 0 0))', 0);  
SELECT        *  
FROM            test1  
WHERE data4.STIntersects(@g) = 1; 
```

我也试过：

```
WHERE @g.STContains(geometry::STGeomFromText(test1.data4, 0))='True' 
```

这也没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:49:10.523

如果您在标记问题时真的在谈论 MySQL，那么您使用的是完全错误的方法。STGeomFromText 是一个 SQL Server 函数。

做你想做的事的[MySQL 查询很简单：](http://dev.mysql.com/doc/refman/5.1/en/functions-for-testing-spatial-relations-between-geometric-objects.html)

```
SELECT * 
FROM test1 
WHERE MBRContains(GeomFromText('Polygon((0 0,0 4,4 4,4 0,0 0))'), data4) 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/957754/1)

作为奖励，这里是如何为 SQL Server 编写它；

```
SELECT * 
FROM test1 
WHERE geometry::STGeomFromText('Polygon((0 0,0 4,4 4,4 0,0 0))',0)
          .STContains(data4) = 1 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!6/771e8/6)。

# ruby-on-rails - 轻松集成 socket.io 和 rails

> ID：15164392
> 
> 赞同：8
> 
> 时间：2013-03-01T18:24:16.280
> 
> 标签：ruby-on-rails, node.js, socket.io, faye, private-pub

我使用 Rails 已有 2 年多了，现在我正在构建一个简单的社交网络的实时应用程序，使用 private_pub gem 进行评论和通知，我阅读了有关 nodejs 的信息，现在我正在第三周学习它，nodejs真是一个了不起的平台，但我想知道如何将 nodejs 和 socket.io 与我的 rails 应用程序集成，以提供在线/离线功能以及聊天。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T04:29:01.630

你可以查看这篇文章，这是一个集成 Rails + node.js + socket.io + redis 的教程

[http://liamkaufman.com/blog/2013/02/27/adding-real-time-to-a-restful-rails-app/](http://liamkaufman.com/blog/2013/02/27/adding-real-time-to-a-restful-rails-app/)

# c++ - Boost.序列化警告

> ID：15164399
> 
> 赞同：0
> 
> 时间：2013-03-01T18:24:33.237
> 
> 标签：c++, compiler-warnings, boost-serialization

不确定是什么导致了以下警告，正如我所读，可以安全地忽略 32 位：

```
conversion from 'std::streamsize' to 'size_t', possible loss of data 
```

我正在执行例行的 Boost 序列化，程序运行良好。唯一的问题是编译器在以下代码中存在问题：

```
while compiling class template member function 'void boost::archive::basic_binary_iprimitive<Archive,Elem,Tr>::load_binary(void *,size_t)' 
```

知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:20:13.753

[std::streamsize](http://en.cppreference.com/w/cpp/io/streamsize)是有符号整数类型。[size_t](http://en.cppreference.com/w/cpp/types/size_t)是无符号整数类型。

这是不安全的转换，因为它可能会导致数据丢失。编译器检测到不安全的转换并发出警告。

# bash - 在 bash 脚本中查找“缺少参数”错误

> ID：15164402
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:24:42.707
> 
> 标签：bash, shell, unix

我正在设置一个脚本，它将`svn add`所有新的非颠覆文件转换为颠覆，然后进行提交。

```
#!/bin/bash
find /path/to/uploads -type f -mmin -5 -not -iwholename
'*.svn*'|xargs -r /usr/bin/svn add
sleep 2
/usr/bin/svn commit /path/to/uploads -m auto_upload 
```

当我从 shell 运行它时，我得到：

```
find: missing argument to `-iwholename'
upload_images.sh: line 3: *.svn*: command not found 
```

我需要避开星号还是什么？我很困惑。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:26:11.067

`find`您的命令中间有一个换行符。这将导致`bash`将其解释为两个单独的命令。要么使它成为单行：

```
find /path/to/uploads -type f -mmin -5 -not -iwholename '*.svn*'|xargs -r /usr/bin/svn add 
```

或使用 a`\`继续：

```
find /path/to/uploads -type f -mmin -5 -not -iwholename \
'*.svn*'|xargs -r /usr/bin/svn add 
```

听起来可能是复制+粘贴错误。

# node.js - GridFS：光标定位在“寻找”后仅工作一次

> ID：15164407
> 
> 赞同：0
> 
> 时间：2013-03-01T18:24:58.067
> 
> 标签：node.js, mongodb, gridfs

我使用 GridStore.seek (GridStore.IO_SEEK_CUR) 将光标定位在一个文件中，但它只能工作一次。随着下一个`read`和所有即将到来的读取和查找，光标不再定位。如果我省略了 seek all read 的正确移动光标：

这是一个演示该行为的小示例：

```
var Db = require('mongodb').Db,
    Server = require('mongodb').Server,
    ObjectID = require('mongodb').ObjectID,
    GridStore = require('mongodb').GridStore;

var db = new Db('test', new Server("localhost", 27017, 
    {auto_reconnect: false, poolSize: 1}), {w:0, native_parser: false});

db.open(function(err, db) {
    var gridStore = new GridStore(db, "test_gs_seek_with_buffer", "w");
    gridStore.open(function(err, gridStore) {
        gridStore.write(new Buffer("012345678901234567890", "utf8"), function(err, gridStore) {
            gridStore.close(function(result) {
                var gridStore = new GridStore(db, "test_gs_seek_with_buffer", "r");
                gridStore.open(function(err, gridStore) {
                    gridStore.read( 5, function(err, data) {
                        console.log( data.toString() ); // "01234" --> CORRECT!
                        gridStore.seek(-2, GridStore.IO_SEEK_CUR, function(err, gridStore) {
                            gridStore.read( 5, function(err, data) {
                                console.log( data.toString() ); // "34567" --> CORRECT!
                                gridStore.seek(-2, GridStore.IO_SEEK_CUR, function(err, gridStore) {
                                    gridStore.read( 5, function(err, data) {
                                        console.log( data.toString() ); // "34567" --> FALSE! SHOULD BE "67890"!!!
                                        db.close();
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
}); 
```

错误、功能或开发人员？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:34:38.803

在此期间，该问题已得到修复。见这里：[https ://github.com/mongodb/node-mongodb-native/commit/85d0f7da21c3bcc1dfc2d4a3f91a8df8102daacc](https://github.com/mongodb/node-mongodb-native/commit/85d0f7da21c3bcc1dfc2d4a3f91a8df8102daacc)

# c# - 无锁并发队列

> ID：15164408
> 
> 赞同：3
> 
> 时间：2013-03-01T18:25:02.777
> 
> 标签：c#, lock-free

此代码片段来自[此处](http://referencesource.microsoft.com/netframework.aspx)`ConcurrentQueue`给出的实现。

```
internal bool TryPeek(out T result) 
{
    result = default(T); 
    int lowLocal = Low;
    if (lowLocal > High)
        return false;
    SpinWait spin = new SpinWait(); 
    while (m_state[lowLocal] == 0)
    { 
        spin.SpinOnce(); 
    }
    result = m_array[lowLocal]; 
    return true;
} 
```

它真的是无锁而不是旋转吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T19:36:53.813

旋转是一把锁。这在[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.spinlock.aspx)、[维基百科](http://en.wikipedia.org/wiki/Spinlock)和许多其他资源中都有说明。这与文字无关。无锁是一种保证。这并不意味着代码不应该使用 lock 语句。如果保证系统范围内的进度，则算法是[无锁的。](http://en.wikipedia.org/wiki/Non-blocking_algorithm)我看不出这段代码和使用锁的代码有什么区别。唯一的区别是自旋使用忙等待和线程让步，而不是将线程置于睡眠模式。我看不出这如何保证系统范围的进程，所以我个人认为这不是无锁实现。至少没有这个功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:27:18.117

无锁意味着不使用锁。旋转等待没有锁定。有许多方法可以在不使用锁的情况下同步对数据的访问。执行旋转等待是（众多）选项之一。并非所有无锁代码都会使用自旋等待。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T18:32:12.933

旋转将 CPU 置于一个紧密的循环中，而不会占用其当前处理器时间的其余部分，从而避免了用户提供的循环可能产生的问题。如果知道状态更改即将发生，这将很有用。这很少成为普通代码的最佳选择，并且代表了针对这种特殊情况的锁定*替代方案。*

所以是的，代码是无锁的，因为 .NET Framework 中使用了术语锁。

[http://msdn.microsoft.com/en-us/library/hh228603.aspx](http://msdn.microsoft.com/en-us/library/hh228603.aspx)

# bash - 用其他变量重击新变量

> ID：15164428
> 
> 赞同：0
> 
> 时间：2013-03-01T18:26:45.477
> 
> 标签：bash, sed

我得到这样的IP地址：

```
Ip=`ifconfig | grep inet | grep -v -E 'inet6|127.0.0.1' | \
    tr -d [:alpha:] | tr -s [:space:] | cut -d: -f2` 
```

例如，我有一个这样的 ip：`10.1.0.76`

我想用 Ip 变量创建一个新变量以获得另一个 ip，例如我的新变量将返回：`10.1.0.178`

只是最后一个数字更改，所以我只想获取 Ip 变量（10.1.0.）的一部分并在末尾添加另一个数字。

我尝试使用 sed，但我总是遇到诸如“没有文件调用...”之类的错误

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:02:52.600

您可以使用参数扩展：它很简单：`${Ip%.*}.178`

`${Ip%.*}`是带有最后一个点的 ip 以及删除后的所有内容。这`.178`是你想要在之后附加的内容。

这是在上下文中：

```
# Your original expression
Ip=`ifconfig | grep inet | grep -v -E 'inet6|127.0.0.1' | \
    tr -d [:alpha:] | tr -s [:space:] | cut -d: -f2`

# assign a new variable with the ip with different end octet
newIp=${Ip%.*}.178

# Show new ip
echo "$newIp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:30:18.680

好吧，假设你有 xyzw 格式的 IP，你可以使用 perl 正则表达式：

```
$ echo "120.20.31.78" | perl -pe 's/(.*)\..*/$1\.123/'
120.20.31.123 
```

这将用“123”替换最后一个数字（“78”）。

因此，在您的情况下（假设您的“Ip”变量设置正确），它将是：

```
Ip=ifconfig | grep inet | grep -v -E 'inet6|127.0.0.1' | tr -d [:alpha:] | tr -s [:space:] | cut -d: -f2 | perl -pe 's/(.*)\..*/$1\.123/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:31:49.533

看到这个，我希望这是你想要的：

```
kent$  echo $ip
10.1.0.76

kent$  echo $part
178

kent$  sed -r "s/(.*\.).*/\1$part/" <<< $ip
10.1.0.178 
```

用新值设置 $ip：

```
kent$  ip=$(sed -r "s/(.*\.).*/\1$part/" <<< $ip)

kent$  echo $ip
10.1.0.178 
```

# coldfusion - How can I read image metadata from binary blobs?

> ID：15164435
> 
> 赞同：1
> 
> 时间：2013-03-01T18:27:13.937
> 
> 标签：coldfusion, coldfusion-9, cfimage

I have some images (in PNG and JPG format), stored as blobs in the database. I am retrieving them with a query and would like to take action by reading the metadata without writing the image to disk.

I am looking for the file type and image width.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:56:51.680

You should be abe to convert the data to a ColdFusion Image type using the `ImageNew` function [as documented here](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-796f.html) (set the `source` to be the variable you pulled out of the query).

Once you have the image, you can use [the `ImageInfo` function](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7972.html) to retrieve image properties.

This will give you the width. CF won't tell you the original file format, though--it might be easiest to look at magic numbers for that. Wikipedia gives a good summary of what those are and what the values for jpeg and png are: [http://en.wikipedia.org/wiki/Magic_number_(programming)](http://en.wikipedia.org/wiki/Magic_number_(programming))

# jquery - jQuery插件绑定问题

> ID：15164436
> 
> 赞同：0
> 
> 时间：2013-03-01T18:27:15.357
> 
> 标签：jquery, jquery-plugins, bind, instance

这个问题参考了我之前的问题（[jQuery插件点击实例问题&设计模式反馈](https://stackoverflow.com/questions/15163082/jquery-plugin-click-instance-issue-design-pattern-feedback)）。我之前的问题更多地集中在我使用的设计方法上。

我想将点击事件绑定到我调用脚本的元素：

main.js

```
$('nav ul li a.has-sub').sidebarNav(); 
```

切换的问题：**self 不返回实际实例，但总是返回最后一个实例** - 如何解决这个问题？

```
toggle : function(){
    console.log(self); // Should return the right instance, but it doesn't!
} 
```

在我的插件中：

```
_bindEvents : function(){
    self.$elem.bind('click.sidebarNav', self.toggle);
}, 
```

jquery.sidebarNav.js

```
;(function($){

"use strict";

var SidebarNav = function(element, options){
    this._init(element, options);   
}

SidebarNav.prototype = {
    _init : function(element, options){
        var self = this;
            self.elem = element;
            self.$elem = $(element);
        self.options = $.extend( {}, $.fn.sidebarNav.defaults, options);
        self._bindEvents();
    },

    _bindEvents : function(){
        self.$elem.bind('click.sidebarNav', self.toggle);
    },

    toggle : function(){
        console.log(self);
    }
}

$.fn.sidebarNav = function(options) {
    return this.each(function(){
        var instance = new SidebarNav(this, options);
        $.data(this, 'sidebarNav', instance);
    });
}

$.fn.sidebarNav.defaults = {}

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:47:46.773

您可以使用`this`而不是`self`. `self`当您在嵌套函数中使用什么时使用，`this`例如`bind`where`this`引用另一个对象。正如我所看到的，该`self`变量未绑定到函数中的任何`_bindEvents`内容`toggle`。但是，如果要使用，请通过编写将其`self`声明为 的属性并将其用作。`SidebarNav``this.self=...``console.log(this.self)`

# android - 填充 TextView 列表时动态设置 contentDescription

> ID：15164439
> 
> 赞同：3
> 
> 时间：2013-03-01T18:27:23.547
> 
> 标签：android

我正在尝试更新 Android 的示例代码“API Demos”应用程序，以便默认活动列表中的 TextView 项目具有可访问性所需的“内容描述”。这是此活动中列表的初始化外观：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String path = intent.getStringExtra("com.example.android.apis.Path");

    if (path == null) {
        path = "";
    }

    setListAdapter(new SimpleAdapter(this, getData(path),
            android.R.layout.simple_list_item_1, new String[] { "title" },
            new int[] { android.R.id.text1 }));
    getListView().setTextFilterEnabled(true);
} 
```

`getData`当有人点击 TextView 列表元素之一时，该函数会创建一个具有适当意图的 Map。在内部，它使用这个函数：

```
protected void addItem(List<Map<String, Object>> data, String name, Intent intent) {
    Map<String, Object> temp = new HashMap<String, Object>();
    temp.put("title", name);
    temp.put("intent", intent);
    data.add(temp);
} 
```

这就是使用 填充 Map 的方式`title`，正如您在上面看到的那样，它`@android/text1`在布局 XML 中被映射到。

我想将每个 TextViews 的内容描述设置为与`name`. 我尝试过的事情：

(1)：循环遍历生成的 ListView 的子项并调用`item.setContentDescription(xxx)`它们中的每一个。这没有用；显然，此时我正在遍历它们不可见/不可访问/不存在的项目，并且无论哪种方式尝试调用 setContentDescription 都会爆炸。

(2)：为这个修改后的 TextView 创建一个新的布局 XML，其中包括`android:contentDescription`. 布局 XML 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1" 
    android:contentDescription="@android:id/text2"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:gravity="center_vertical" 
    android:paddingLeft="6dip" 
    android:minHeight="?android:attr/listPreferredItemHeight">
</TextView> 
```

然后，我确保将“contentDescription”添加到返回的 Map 中`addItem`，并将初始化代码更改为如下所示：

```
 setListAdapter(new SimpleAdapter(this, getData(path),
            R.layout.simple_list_item_with_desc, new String[] { "title", "contentDescription" },
            new int[] { android.R.id.text1, android.R.id.text2 })); 
```

换句话说，我试图从我的静态数据映射中获取“contentDescription”，以填充由 .xml 定义的布局 XML 中的字段`android.R.id.text2`。

这也不起作用——没有失败，但是当我检查 uiautomatorviewer 中的列表时，没有可用的内容描述。这可能是因为我不明白什么`android.R.id.text2`意思，除了作为某种价值的占位符。我也尝试`android.R.id.content`过同样的结果。

所以我的问题是，如何动态设置这些 TextView 的 contentDescription？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:34:20.090

> 我想将每个 TextViews 的内容描述设置为与名称相同的值。我尝试过的事情：
> 
> (1)：遍历生成的 ListView 的子项，并在每个子项上调用 item.setContentDescription(xxx)。这没有用；显然，此时我正在遍历它们不可见/不可访问/不存在的项目，并且无论哪种方式尝试调用 setContentDescription 都会爆炸。

你是对的，你的第一个方法失败了，因为还没有创建任何 TextView。问题是它们*永远不会*同时可见（除非您只有几行并且它们适合屏幕而不滚动。）

解决方案：扩展 SimpleAdapter 并覆盖`getView()`. 每次显示一行时都会调用此方法。它使您可以访问 TextView，以便您可以`setContentDescription()`在此处调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T22:47:44.863

@Sam 提供了一个解决方案，我还想将代码回馈给我的扩展类，以防它对其他人有用：

```
package com.example.android.apis;

import java.util.List;
import java.util.Map;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class SimpleAdapterWithDesc extends SimpleAdapter {

    public SimpleAdapterWithDesc(Context context,
            List<? extends Map<String, ?>> data, int resource, String[] from,
            int[] to) {
        super(context, data, resource, from, to);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        TextView myView = (TextView)super.getView(position, convertView, parent);
        myView.setContentDescription(myView.getText());
        return myView;
    }

} 
```

# facebook - 使用 Facebook 的 Open Graph API 更新现有的时间线帖子

> ID：15164440
> 
> 赞同：1
> 
> 时间：2013-03-01T18:27:35.247
> 
> 标签：facebook, facebook-opengraph, scrape

POST 到`graph.facebook.com/?id={id}&scrape=true`（如此[处](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/#update)所述）是否应该使缓存过期并立即更新已发布的时间线数据？

我注意到，当我更新 Open Graph 对象页面的 og:image 值时，在 Facebook 调试器中输入对象的 URL，然后刷新我朋友的 Facebook 时间线，我会立即看到更新后的 og:image。

`graph.facebook.com/?id={id}&scrape=true`但是，在使用该方法时，我没有看到现有的时间线打开图形操作发布已更新。似乎我的 POST 抓取不起作用，但我得到的响应是一个 JSON，其中包含我期望的所有更新数据。我还注意到，同一对象的任何新时间轴帖子都会立即引用新的 og:image，因此看起来抓取正在工作 - 但不会更新现有帖子。有没有办法强制更新现有的时间线帖子，或者这是否适用于其他人？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:06:47.413

经过更多研究，我似乎在这里遇到了比赛条件问题。在持久对象更改解决了我的问题后，添加延迟以强制 Facebook 发布几秒钟。

# ms-access - 将 ListIndex 设置为 -1 时 ms 访问运行时错误“2115”

> ID：15164445
> 
> 赞同：0
> 
> 时间：2013-03-01T18:27:56.027
> 
> 标签：ms-access, listbox, runtime-error

我有查找表单，它基本上是一个带有一些过滤器、排序和操作按钮以及一些文本框来实现过滤器的大型列表框。

我已经使用这些表格很长一段时间没有问题。除非选择列表框中的项目，否则 SELECT 按钮将被禁用。我试图在更改过滤或排序时取消选择任何列表框条目。

为此，我将焦点设置到列表框（没有多选选项）为 -1。有许多等效的操作，我已经尝试了其中的大部分。一旦 ListIndex 设置为 -1，如果我在列表框上执行重新查询操作或在包含表单上执行刷新操作，则会收到“2115”运行时错误。此外，我无法将焦点设置到表单上的任何文本框或按钮上，出现各种运行时错误，表明必须保存该字段。

有人对这应该如何运作有想法吗？

在代码片段中，实际出现错误的代码是 Unselect 列表框注释之后靠近底部的 .requery 行

这是我发生这种情况的一种方式的代码片段：

```
 With Me.lbxFoundItems
        If strCurrentSearchText = vbNullString Then    'Nothing to search for
            .Visible = False
            Call ButtonSettings
            Exit Sub
        End If
        strQry = strSql & strWhere & strOrderBy
        If Nz(.RowSource, vbNullString) = vbNullString Then       'First time through
            Set qry = Nothing
            On Error Resume Next
            Set qry = CurrentDb.CreateQueryDef(strQname, strQry)
            If qry Is Nothing Then
                Set qry = CurrentDb.QueryDefs(strQname)
                qry.sql = strQry
            End If
            colGarbage.Add CurrentDb.QueryDefs(qry.Name), qry.Name
            .RowSource = qry.Name
        Else
            CurrentDb.QueryDefs(qry.Name).sql = strQry
        End If
'       Unselect the listbox entry
        .SetFocus                           
        .Selected(.ListIndex + 1) = False
        .Requery
        Me.Refresh

        Me.tbxListCount = .ListCount - 1
        .Visible = True

    End With 
```

# android - 如何通过 C/C++ 从 Linux 命令获取输出？并且适合安卓？

> ID：15164450
> 
> 赞同：4
> 
> 时间：2013-03-01T18:28:22.600
> 
> 标签：android, c++, c, linux, android-ndk

我尝试运行 Linux 命令并使用 C/C++ 代码从中读取输出。我搜索 exec 但这不处理输入/输出。

我想要实现的是通过使用此命令获取有关无线 LAN 的信息`iwconfig`，从 C/C++ 代码中调用它。

我还需要一个合适的代码来使用 NDK 将其用作 android 的 lib。

我在android开源中看到他们称之为这个函数

你觉得这段代码怎么样？

```
int wpa_ctrl_request(struct wpa_ctrl *ctrl, const char *cmd, size_t cmd_len,
                 char *reply, size_t *reply_len,
                 void (*msg_cb)(char *msg, size_t len))
                {
        DWORD written;
        DWORD readlen = *reply_len;

if (!WriteFile(ctrl->pipe, cmd, cmd_len, &written, NULL))
    return -1;

if (!ReadFile(ctrl->pipe, reply, *reply_len, &readlen, NULL))
    return -1;
*reply_len = readlen;

return 0; 
```

}

这是[链接](http://androidxref.com/4.2_r1/xref/external/wpa_supplicant_6/wpa_supplicant/src/common/wpa_ctrl.c#505)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:43:20.453

您可以尝试运行命令并将结果输出到文件，然后读取它

```
system("iwconfig > temp.txt");
FILE *fp=fopen("temp.txt","w"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:52:26.037

我在android开源中看到他们称之为这个函数

你觉得这段代码怎么样？

```
int wpa_ctrl_request(struct wpa_ctrl *ctrl, const char *cmd, size_t cmd_len,
                     char *reply, size_t *reply_len,
                     void (*msg_cb)(char *msg, size_t len))
{
    DWORD written;
    DWORD readlen = *reply_len;

    if (!WriteFile(ctrl->pipe, cmd, cmd_len, &written, NULL))
        return -1;

    if (!ReadFile(ctrl->pipe, reply, *reply_len, &readlen, NULL))
        return -1;
    *reply_len = readlen;

    return 0;
} 
```

这是[链接](http://androidxref.com/4.2_r1/xref/external/wpa_supplicant_6/wpa_supplicant/src/common/wpa_ctrl.c#505)

# javascript - 如何将对象转换为查询字符串？

> ID：15164451
> 
> 赞同：-2
> 
> 时间：2013-03-01T18:28:25.230
> 
> 标签：javascript

我想将一个对象字符串化为一个查询字符串。

例如，

```
{ hello: '123', goodbye: "789" } 
```

会给我...

```
hello=123&goodbye=789 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:32:10.797

有一个出色的 URL 库[URL.js](http://medialize.github.com/URI.js/)，它的工作原理与您描述的查询非常相似。

对于您的示例，代码将是：

```
URI().addSearch({ hello: '123', goodbye: "789" }).toString() 
```

这会产生带有前置的结果`?`，但它对于构建和操作真实 URL 非常方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T18:34:49.023

如果您在项目中使用 jQuery，则不需要 lib：

```
$.param({ hello: '123', goodbye: "789" }) 
```

但是由于没有 jQuery 标签，请看一下`Barney`答案，这可能是您需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:51:20.857

以下是简单案例的代码示例：

```
var params={ hello: '123', goodbye: "789" },
    pairs=[];
for (var key in params) {
    if (params.hasOwnProperty(key)) {
        pairs.push(key+"="+encodeURIComponent(params[key]));
    }
};
var qs=pairs.join("&"); 
```

对于更复杂的场景，您可能希望使用其他回复中建议的 URLjs 之类的库。

# java - 客户端对 gae 服务器的身份验证

> ID：15164457
> 
> 赞同：0
> 
> 时间：2013-03-01T18:28:35.977
> 
> 标签：java, google-app-engine, client-server, oauth-2.0

我需要你提供一些通用的设计建议。我计划使用 gae 服务器作为消息路由器来实现客户端到客户端的通信。有几个客户端与特定用户相关联。我计划使用谷歌帐户进行用户识别。

但我不确定如何保护用户数据，以便他们的数据只能由他们自己访问。我是否有权使用 OAuth 来保护通信？

谁能指导我如何使用它？我找到了[google-oauth-java-client](http://code.google.com/p/google-oauth-java-client/)，但没有找到任何易于理解的关于如何在客户端和 gae 服务器之间实现安全通信的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:05:15.327

过度的谷歌搜索把我带到了那个博客文章： http: [//fabiouechi.blogspot.de/2011/11/using-google-oauth-java-client-to.html](http://fabiouechi.blogspot.de/2011/11/using-google-oauth-java-client-to.html)

连同链接的博客文章中的链接：http: [//ikaisays.com/2011/05/26/setting-up-an-oauth-provider-on-google-app-engine/](http://ikaisays.com/2011/05/26/setting-up-an-oauth-provider-on-google-app-engine/)

我能够让我的示例正常工作！

# cakephp - 有没有办法使用 CakePHP 将服务器端代码设置为客户端脚本

> ID：15164458
> 
> 赞同：1
> 
> 时间：2013-03-01T18:28:39.877
> 
> 标签：cakephp, cakephp-2.3

我的 CakePHP 项目中有几个 js 文件需要 ajax 调用的路径。我在服务器上生成路径并希望以通用方式将它们传递给 javascript。我不想将它们作为参数添加到函数中，因为它们是静态的。现在我这样做：

```
<?php
    $categories = Router::url(array('controller' => 'categories', 'action' => 'getChildCategories'));
    $brands = Router::url(array('controller' => 'brands', 'action' => 'autoComplete'));

    // first add the variables
    echo $this->Html->scriptBlock(
       'var CATEGORIE_GETSUBCATEGORY = "' . $categories . '";
       var BRAND_AUTOCOMPLETE = "' . $brands . '";',
       array('inline' => false)
    );

    // then include the file that uses them
    echo $this->Html->script('add'); 
?> 
```

有没有更好的方法来做到这一点而不将它们作为参数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:06:03.967

你目前的做法完全没有问题。任何性能提升都可以忽略不计，我认为没有明确的更优雅的方式来做到这一点。

# java - 如何获得一个实际的单词 Iterator 包装 breakIterator？

> ID：15164461
> 
> 赞同：2
> 
> 时间：2013-03-01T18:28:49.463
> 
> 标签：java, parsing, text, standard-library

我正在使用`java.text.breakIterator`迭代单词（这不是迭代器，是的，我注意到了，无需告诉我）。为什么我不能*把*它作为一个实际的迭代器？即为什么我不能这样做：

```
Iterator<String> iter = BreakIteratorMagicWrapper.getWordIterator(sourceString);
while(iter.hasNext()) {
    System.out.println("got word %s", iter.next());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:31:50.337

> 为什么我不能把它作为一个实际的迭代器？

因为[`BreakIterator`既不实现`Iterator<Foo>`也不实现`Iterable<Foo>`。](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)

但是，没有什么能阻止您编写自己的`Iterator`或`Iterable`由 a 支持的实现`BreakIterator`。无论好坏，它都不是标准库的一部分。

# javascript - 在不使用 Ext.getCmp 的情况下获取复选框值

> ID：15164463
> 
> 赞同：0
> 
> 时间：2013-03-01T18:28:50.970
> 
> 标签：javascript, scope, extjs4.1

我正在尝试获取此复选框的值

```
 Ext.define('myRoot.myExtApp.myForm', {
    extend: 'Ext.form.Panel',
    layout: {
      type: 'vbox',
      align: 'stretch'
    },
    scope: this,
    constructor: function() {
       this.callParent(arguments);

       this.myFieldSet = Ext.create('Ext.form.FieldSet', {
         scope: this,
         columnWidth: 0.5,
         collapsible: false,
         defaultType: 'textfield',
         layout: {
             type: 'hbox', align: 'stretch'
         }
       });

       this.mySecondForm = Ext.create('myRoot.myExtApp.myForm2', {
         scope: this,
         listener: this,
         margin: '1 3 0 0'
       });
       this.myCheckBox = Ext.create('Ext.form.Checkbox', {
           scope: this,
           //id: 'myCheckBox',
           boxLabel: 'Active',
           name: 'Active',
           checked: true,
           horizontal: true
       });

       this.myFieldSet.add(this.mySecondForm);
       this.myFieldSet.add(this.myCheckBox);

       this.add(this.myFieldSet);
     }
 }); 
```

如您所见，我有另一种形式

```
Ext.define('myRoot.myExtApp.myForm2', { 
```

我有一个处理程序，它应该从“myForm”获取复选框的值

如何在不使用 Ext.getCmp 的情况下从 Form2 获取我的复选框的值？我知道我可以得到复选框的值，如果我这样做

```
Ext.getCmp('myCheckBox').getValue(); 
```

但使用

```
this.myCheckBox.getValue(); 
```

给我未定义的错误。

**更新**- 有了 Wared 的建议，我在 myForm2 中尝试了这个

```
this.temp=Ext.create('myRoot.myExtApp.myForm'), {});
var tempV = this.temp.myCheckBox.getValue(); 
```

我能够获得价值，但即使我取消选中该框，我也会获得相同的真实价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:00:31.340

一种解决方案可能是：

```
myRoot.myExtApp.myForm.myCheckBox.getValue(); 
```

**小心，错误的答案。请参阅下面的评论以获取有效的解决方案。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:38:19.523

我假设您担心由于过度使用组件查询而导致性能损失。最小化组件查询的一个好技巧是在闭包内定义一个新方法，以缓存第一次`getCmp`调用的结果。将方法的定义包装在闭包中可以避免使用全局范围或无用的类属性。

```
getMyCmp: function (cmp) { 
    // "cmp" does not exist outside this function
    return function () { 
        return cmp = cmp || Ext.getCmp('#myCmp'); 
    }; 
}() 
```

# javascript - 从数组访问图像？

> ID：15164465
> 
> 赞同：0
> 
> 时间：2013-03-01T18:29:12.540
> 
> 标签：javascript, arrays, image

我需要创建一个功能，用户可以访问输入问题，他们可以看到不同的结果。这是一个神奇的八球模拟。我需要使用一个数组，但我不确定如何处理图像。

这就是我现在所拥有的。

```
function eightBall() {
            var answer = document.getElementById('questBox').value;
            answer = answer.toLowerCase();

            if (answer.search(/[?]/) > -1) {
                var no = '../images/eightBallNo.png';
                $('#answerImages').html(no);
            }
        } 
```

我不知道如何做到这一点，所以任何帮助将不胜感激。另外，我需要使当用户输入相同的问题时，它总是返回相同的结果。我的指示是通过 if 语句来做到这一点。再次，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:40:18.600

使用对象创建地图并将每个问题和生成的随机法师存储在其中。当有人提出问题时，请检查您是否已经将该问题映射到某个东西。如果是这样，请使用缓存的结果。如果没有，请从数组中获取随机图像，然后将其添加到缓存中：

```
// empty cache to use
var answerMap = {}
// array of your images
var images = ['image_1.png', 'image_2.png', ... 'image_n.png'];

function eightBall() {
   var imageToUse = false;
   var answer = document.getElementById('questBox').value;
   answer = answer.toLowerCase();
   // this syntax could be wrong, I forget the check as my JS is rusty
   // check the cache to see if we got asked this before
   if (answerMap[answer] != undefined) {
      // if so, use the cached image value
      imageToUse = answerMap[answer];
   } else {
      // otherwise, get a random image, and add it to the cache
      var randomIndex = Math.floor(Math.random()*images.length);
      imageToUse = images[randomIndex];
      answerMap[answer] = imageToUse;
   }
   // do whatever you need to do with the image
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:35:09.920

在 IMG 标记中使用该 URL，如下所示：

```
var no = '../images/eightBallNo.png';
$('#answerImages').html('<img src='+no+'/>'); 
```

但是，这不使用数组。您需要在哪里使用数组？一组图片网址？

# jquery - 表排序插件记录数不正确

> ID：15164473
> 
> 赞同：0
> 
> 时间：2013-03-01T18:29:40.570
> 
> 标签：jquery, tablesorter, jquery-pagination

我有以下代码来加载 tablesorter 插件中的数据。在这里，我显示了 pgl 中的记录数，但是当我单击 50 并返回到 25 时，总计数显示不正确。

知道为什么会这样吗？

```
<div class="rowsPerPage">
 <a href="javascript:void(0);" onclick="test1(25);">25</a>
 <a href="javascript:void(0);" onclick="test1(50);">50</a>
 <a href="javascript:void(0);" onclick="test1(toalnoofrecords);">All</a>
</div>
 <div id="pg">
  <div id="pgl"></div>
  <div id="pgR"></div>
 </div>      

<table id="testtable">
   datas comes here
</table>

<!---- javascript function -->
 function test1(val)
 { 
    $(jQuery('#testtable').tablesorterPager({container: $("#pgR"), positionFixed: false,size: value }));

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:11:41.983

如果您使用的是原始的 tablesorter 插件 (v2.0.5)，请使用以下代码 ( [demo](http://jsfiddle.net/Mottie/eY8uH/380/) )：

```
jQuery(function($){
    $('#testtable')
    .tablesorter()
    .tablesorterPager({
        container: $("#pgR"),
        positionFixed: false,
        size: 10
    });
});

function test(val){
    $t = jQuery('#testtable');
    $t[0].config.size = val;
    $t.trigger('appendCache');
} 
```

*   注意：原始的 tablesorter 不适用于 jQuery 1.9+，因为它使用`$.browser.msie`.

* * *

如果使用我[的 tablesorter 分叉版本](http://mottie.github.com/tablesorter/docs/)，则使用此代码（[演示](http://jsfiddle.net/Mottie/4mVfu/150/)）：

HTML

```
<div class="rowsPerPage">
  <a href="#">10</a>
  <a href="#">20</a>
  <a href="#">All</a>
</div>
<div id="pg">
  <div id="pgl"></div>
  <div id="pgR"></div>
</div> 
```

Javascript

```
jQuery(function($){
    $('#testtable')
    .tablesorter({
        theme: 'blue'
    })
    .tablesorterPager({
        container: $("#pgR"),
        size: 10
    });

    $('.rowsPerPage a').click(function(){
        var val = $(this).text();
        if (/all/i.test(val)) {
            val = 99999; // pick some huge number
        }
        $('#testtable').trigger('pageSize', val);
        return false;
    });

}); 
```

*   注意：此代码使用不[显眼的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，允许您轻松添加更多页面大小，而无需包含更多内联 javascript。

# c# - 访问静态成员

> ID：15164475
> 
> 赞同：2
> 
> 时间：2013-03-01T18:29:57.207
> 
> 标签：c#

我知道我们可以使用这样的类名访问静态成员

```
Myclass.MyStaticMember 
```

并且不需要初始化它

但我的问题是为什么我们不能从初始化对象访问静态成员

```
Myclass.MyStaticMember obj =new  Myclass.MyStaticMember()
obj.MyStaticMember 
```

是否有相关的 via`CLR`或 .net 框架架构或编译器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:32:39.140

这是一个语言决定，让你的代码更清晰。（对于 C# 编译器来说，根据变量的编译时类型将代码编译成静态访问是完全*可行的。）如果你写：*

```
obj.StaticMember 
```

看起来*该*成员特定于`obj`- 但事实并非如此。代码不应该撒谎。

举例说明这可能会造成多大的混乱，请考虑以下有效的 Java 代码（假设有一个`Runnable`名为 的变量`runnable`）：

```
Thread thread = new Thread(runnable);
thread.start();
thread.sleep(1000); 
```

哪个线程进入睡眠状态？当然是新的 - 看，它正在调用`sleep()`引用新线程的变量。当然除了`Thread.sleep`是一个静态方法，它*总是*使当前执行的线程休眠。**这一点从上面的代码中**并不明显。幸运的是，它在 C# 中无效。

这是 C# 团队显然从 Java 的错误中吸取教训的一个领域，对此我感到非常高兴。（对其他一些方面感到羞耻，但是嘿......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:34:18.807

静态成员“不属于”任何给定的 a 实例——在某种意义上，`Type T`它属于*类型本身。*

实际的“值”与 CLR 详细信息中的相应`EEClass`深层相关联，该详细信息在该类型的所有实例之间共享。

# erlang - 如何在erlang中获得一点十进制整数

> ID：15164476
> 
> 赞同：2
> 
> 时间：2013-03-01T18:29:57.543
> 
> 标签：erlang

给定一个数字，例如 16877，我想测试一个位位置 (pos) 以查看是 0 还是 1。

例如，我知道上面的数字按数字表示为 100000111101101。

*   位 1 = 1
*   位 2 = 0
*   位 3 = 1

考虑到数字应该已经作为二进制存储在 erlang 的 vm 中，我可以使用什么函数，比如：

```
Pos = 1,
Bit = getBit ( Pos , 16877 ). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T19:56:24.633

这个应该可以的。

```
bit(Number, Bit) ->
  (Number bsr Bit) band 1. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T19:19:17.807

使用位运算符，卢克！

```
getBit(Pos, Number) ->
    case (1 bsl Pos) band Number of
        0 -> 0;
        _ -> 1
    end. 
```

该函数接受从 0 开始的位置，但如果您喜欢基于 1 的索引，请随意减小 Pos：

```
1> Fun = fun(Pos, Num) -> case (1 bsl Pos) band Num of 0 -> 0; _ -> 1 end end.
#Fun<erl_eval.12.82930912>
2> Fun(0, 16877).
1
3> Fun(1, 16877).
0
4> Fun(2, 16877).
1
5> Fun(3, 16877).
1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T19:19:39.883

我不知道库中是否有类似的东西，但这里有一个实现：

```
get_bit(1, Num) -> Num rem 2;
get_bit(Pos, Num) -> get_bit(Pos-1, Num div 2). 
```

和输出：

```
1> test:get_bit(2, 16877).
0
2> test:get_bit(3, 16877).
1
3> test:get_bit(6, 16877). 
1
4> test:get_bit(10, 16877).
0
5> test:get_bit(11, 16877).
0 
```

# python - 在 Qscintilla/PyQt4 中使用 SCI_SEARCHINTARGET

> ID：15164482
> 
> 赞同：1
> 
> 时间：2013-03-01T18:30:17.103
> 
> 标签：python, qt, pyqt, scintilla, qscintilla

我正在尝试在 Qscintilla 窗口中搜索字符串的位置。

这是一段（可运行的）模拟代码：

```
import sys
from PyQt4 import QtGui, Qsci

app = QtGui.QApplication(sys.argv)
window = Qsci.QsciScintilla()
window.show()

# Search in target for string
text = "Hello world"
window.setText(text)
messenger = window.SendScintilla
messenger(window.SCI_SETTARGETSTART, 0)
messenger(window.SCI_SETTARGETEND, len(text))
pos = messenger(window.SCI_SEARCHINTARGET, len(text), "world")
print(pos);

app.exec_() 
```

`"world"`它在当前保存该字符串的文本编辑器窗口中搜索该字符串`"Hello world"`。但是`-1`，当字符串清楚地存在于文本编辑器窗口中时，搜索会返回（找不到字符串）。

问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:19:40.943

请参阅[http://www.scintilla.org/ScintillaDoc.html#SCI_SEARCHINTARGET](http://www.scintilla.org/ScintillaDoc.html#SCI_SEARCHINTARGET)：`length`参数是您正在搜索的文本的长度，而不是您正在搜索的文本的长度。

这会给你你想要的：

```
pos = messenger(window.SCI_SEARCHINTARGET, len("world"), "world") 
```

# linux - 何时调用 sem_unlink()？

> ID：15164484
> 
> 赞同：15
> 
> 时间：2013-03-01T18:30:20.280
> 
> 标签：linux, semaphore

我对 Linux API sem_unlink() 有点困惑，主要是何时或为何调用它。我在 Windows 中使用信号量已经很多年了。在 Windows 中，一旦您关闭命名信号量的最后一个句柄，系统就会删除底层内核对象。但是在 Linux 中，开发人员需要通过调用 sem_unlink() 来删除内核对象。如果您不这样做，内核对象将保留在 /dev/shm 文件夹中。

我遇到的问题是，如果进程 A 调用 sem_unlink() 而进程 B 锁定了信号量，它会立即破坏信号量，现在当进程 C 出现时，进程 B 不再受到信号量的“保护”。更重要的是，手册页充其量是令人困惑的：

“信号量名称立即被删除。一旦所有其他打开信号量的进程关闭它，信号量就会被销毁。”

如果必须等待其他进程关闭信号量，它如何立即销毁对象？

显然我不明白在 Linux 上正确使用信号量对象。谢谢你的帮助。下面是我用来测试的一些示例代码。

```
int main(void)
{
    sem_t *pSemaphore = sem_open("/MyName", O_CREAT, S_IRUSR | S_IWUSR, 1);
    if(pSemaphore != SEM_FAILED)
    {
        if(sem_wait(pSemaphore) == 0)
        {
            // Perform "protected" operations here

            sem_post(pSemaphore);
        }

        sem_close(pSemaphore);
        sem_unlink("/MyName");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-22T23:16:40.920

**回答您的问题：**

1.  与您描述的窗口的信号量行为相比，POSIX 信号量是内核持久的。这意味着即使没有进程打开信号量，信号量也会保留其价值。（信号量的引用计数为 0）

2.  如果进程 A 调用 sem_unlink() 而进程 B 已锁定信号量。这意味着信号量的引用计数不为 0，不会被破坏。

sem_close vs sem_unlink的基本操作，我觉得会有助于整体理解：

**sem_close：**关闭是一个信号量，当进程退出时也会这样做。信号量仍保留在系统中。

**sem_unlink：**只有当引用计数达到 0 时才会从系统中删除（即在所有打开它的进程之后，调用 sem_close 或退出）。

**参考资料：** W.Richard Stevens 所著的书 - Unix 网络编程 - 进程间通信，第 2 卷，第 10 章

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-03T09:32:39.197

该`sem_unlink()`函数删除由名称标识的信号量，并在所有进程停止使用它时将其标记为销毁（这可能意味着立即，如果所有打开信号量的进程都已经关闭它）。

# java - 使单个组件全屏

> ID：15164485
> 
> 赞同：1
> 
> 时间：2013-03-01T18:30:22.003
> 
> 标签：java, swing, jpanel, fullscreen, focusable

我试图让 JPanel 在您单击按钮时全屏显示，并在您按下转义键时再次返回。

我已经设法让窗口全屏显示，但是由于添加组件从其他容器中删除它们的整个过程，我最终得到了一个空白的 JPanel。

我选择单独制作一个JFrame来渲染全屏，其类如下（注意这是一个内部类，所以myPanel指的是MyJFrame中已经存在的一个面板）：

```
public class FullScreen extends JFrame {

    private static final long serialVersionUID = 1L;

    private GraphicsDevice device;

    private boolean isFullScreen;

    public FullScreen() {
        this.setContentPane(myPanel);
        this.setUndecorated(true);

        // Fullscreen return
        this.addKeyListener(new KeyListener() {
            @Override
            public void keyPressed(KeyEvent e) {
                // Exit fullscreen when ESC pressed
                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    exitFullScreen();
                }
            }

            @Override
            public void keyReleased(KeyEvent e) {
            }

            @Override
            public void keyTyped(KeyEvent e) {
            }
        });
    }

    public void enterFullScreen() {
        if (!isFullScreen) {
            // Get the current device
            GraphicsEnvironment graphicsEnvironment = 
                    GraphicsEnvironment.getLocalGraphicsEnvironment();
            device = graphicsEnvironment.getDefaultScreenDevice();

            if (device.isFullScreenSupported()) {
                // Make the current window invisible
                MyJFrame.this.setVisible(false);
                // Set the full screen window
                device.setFullScreenWindow(this);
                isFullScreen = true;
            }
        }
    }

    public void exitFullScreen() {
        if (isFullScreen) {
            // Reset the full screen window
            device.setFullScreenWindow(null);
            MyJFrame.this.setVisible(true);
            isFullScreen = false;
        }
    }
} 
```

关于如何实现这一目标的任何其他好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:07:24.327

像这样的东西似乎没问题（有待改进和适应）：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

class TestFullScreenPanel {

    private static class FSPanel implements ActionListener {
        private JPanel panel;
        private JButton button;
        private boolean fullScreen = false;
        private Container previousContentPane;

        public FSPanel(String label) {
            panel = new JPanel(new BorderLayout());
            button = new JButton(label);
            button.addActionListener(this);
            panel.add(button);
        }

        public JComponent getComponent() {
            return panel;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (!fullScreen) {
                goFullScreen();
            } else {
                ungoFullScreen();
            }
        }

        private void goFullScreen() {
            Window w = SwingUtilities.windowForComponent(button);
            if (w instanceof JFrame) {
                JFrame frame = (JFrame) w;
                frame.dispose();
                frame.setUndecorated(true);
                frame.getGraphicsConfiguration().getDevice().setFullScreenWindow(w);
                previousContentPane = frame.getContentPane();
                frame.setContentPane(button);
                frame.revalidate();
                frame.repaint();
                frame.setVisible(true);
                fullScreen = true;
            }
        }

        private void ungoFullScreen() {
            Window w = SwingUtilities.windowForComponent(button);
            if (w instanceof JFrame) {
                JFrame frame = (JFrame) w;
                frame.dispose();
                frame.setUndecorated(false);
                frame.getGraphicsConfiguration().getDevice().setFullScreenWindow(null);
                frame.setContentPane(previousContentPane);
                panel.add(button);
                frame.revalidate();
                frame.repaint();
                frame.setVisible(true);
                fullScreen = false;
            }
        }
    }

    TestFullScreenPanel() {
        final JFrame f = new JFrame(TestFullScreenPanel.class.getSimpleName());
        f.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        f.add(new FSPanel("Center").getComponent(), BorderLayout.CENTER);
        f.add(new FSPanel("North").getComponent(), BorderLayout.NORTH);
        f.add(new FSPanel("South").getComponent(), BorderLayout.SOUTH);
        f.add(new FSPanel("West").getComponent(), BorderLayout.WEST);
        f.add(new FSPanel("East").getComponent(), BorderLayout.EAST);
        f.setSize(800, 600);
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        // start the GUI on the EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestFullScreenPanel();
            }
        });
    }
} 
```

PS：处置的`JFrame`只是那里改变setUndecorated状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:26:44.460

*   不要`extend JFrame`，将此对象创建为局部变量

*   `JFrame`默认情况下从不响应`KeyEvents`, 设置`KeyListener`为`JPanel`

*   不要将[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)用于[Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)，否则必须使用[JPanel#setFocusable](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setFocusable%28boolean%29)

*   使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是`KeyListener`

*   [通过@camickr](http://tips4java.wordpress.com/2010/10/17/escape-key-and-dialog/)使用Escape

.

```
import java.awt.Dimension;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class FullScreen {

    private static final long serialVersionUID = 1L;
    private GraphicsDevice device;
    private JButton button = new JButton("Close Meeee");
    private JPanel myPanel = new JPanel();
    private JFrame frame = new JFrame();

    public FullScreen() {
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        myPanel.setFocusable(true);
        myPanel.add(button);
        frame.add(myPanel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        frame.getRootPane().getActionMap().put("clickENTER", new AbstractAction() {
            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                exitFullScreen();
            }
        });
        enterFullScreen();
        frame.setVisible(true);

        // code line for @MOD 
        // from http://stackoverflow.com/questions/15152297/how-to-get-extendedstate-width-of-jframe

        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                System.out.println(frame.getBounds());
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    private void enterFullScreen() {
        GraphicsEnvironment graphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();
        device = graphicsEnvironment.getDefaultScreenDevice();
        if (device.isFullScreenSupported()) {
            device.setFullScreenWindow(frame);
            frame.validate();
        }
    }

    private void exitFullScreen() {
        device.setFullScreenWindow(null);
        myPanel.setPreferredSize(new Dimension(400, 300));
        frame.pack();
    }

    public static void main(String[] args) {
        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                FullScreen fullScreen = new FullScreen();
            }
        };
        SwingUtilities.invokeLater(doRun);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:35:36.753

这是我的类内置到一个运行良好的示例中。我确定我没有正确处理和验证框架，所以请评论它，以便我可以更新它。

```
public class FullScreenExample extends JFrame {

    public class FullScreen {
        private GraphicsDevice device;
        private JFrame frame;
        private boolean isFullScreen;

        public FullScreen() {
            frame = new JFrame();
            JPanel content = new JPanel();
            content.setLayout(new BorderLayout());
            frame.setContentPane(content);
            frame.setUndecorated(true);

            // Full screen escape
            frame.addKeyListener(new KeyListener() {
                @Override
                public void keyPressed(KeyEvent e) {
                    // Exit full screen when ESC pressed
                    if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                        exitFullScreen();
                    }
                }

                @Override
                public void keyReleased(KeyEvent e) {}

                @Override
                public void keyTyped(KeyEvent e) {}
            });
        }

        public void enterFullScreen() {
            if (!isFullScreen) {
                // Get the current device
                GraphicsConfiguration config = FullScreenExample.this.getGraphicsConfiguration();
                device = config.getDevice();

                // Remove the panel from the wrapper
                myWrapper.remove(myPanel);
                // Add the panel to the full screen frame
                frame.getContentPane().add(myPanel);
                // Set the full screen window
                device.setFullScreenWindow(frame);
                isFullScreen = true;
            }
        }

        public void exitFullScreen() {
            if (isFullScreen) {
                // Remove the fractal from the full screen frame
                frame.getContentPane().remove(myPanel);
                // Add the panel back to the wrapper
                myWrapper.add(myPanel);
                // Disable full screen
                device.setFullScreenWindow(null);
                // Dispose frame
                frame.dispose();
                // Revalidate window
                FullScreenExample.this.validate();
                isFullScreen = false;
            }
        }
    }

    /*
     * This example uses a main content panel, myPanel
     * and a wrapper to host the panel in the main JFrame, myWrapper.
     */
    private JPanel myPanel, myWrapper;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                FullScreenExample frame = new FullScreenExample();
                frame.init();
                frame.setVisible(true);
            }
        });
    }

    public void init() {
        // Generate example main window
        JPanel content = new JPanel();
        content.setBorder(new EmptyBorder(5, 5, 5, 5));
        content.setLayout(new BorderLayout());
        this.setContentPane(content);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        myPanel = new JPanel();
        myPanel.setBackground(Color.BLUE);

        // Full screen button and listener
        JButton fullscreen = new JButton("Full Screen");
        final FullScreen fs = new FullScreen();
        fullscreen.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                fs.enterFullScreen();
            }
        });

        myWrapper = new JPanel();
        myWrapper.setLayout(new BorderLayout());
        myWrapper.add(myPanel);

        content.add(myWrapper, BorderLayout.CENTER);
        content.add(fullscreen, BorderLayout.SOUTH);
        this.setBounds(100, 100, 350, 350);
    }
} 
```

# python - 理解程序

> ID：15164493
> 
> 赞同：1
> 
> 时间：2013-03-01T18:30:48.923
> 
> 标签：python, python-3.x, sudoku

```
def cross(A, B):
    "Cross product of elements in A and elements in B."
    return [a+b for a in A for b in B]

digits   = '123456789'
rows     = 'ABCDEFGHI'
cols     = digits
squares  = cross(rows, cols)
unitlist = ([cross(rows, c) for c in cols] +
            [cross(r, cols) for r in rows] +
            [cross(rs, cs) for rs in ('ABC','DEF','GHI') for cs in ('123','456','789')])
units = dict((s, [u for u in unitlist if s in u]) 
             for s in squares)
peers = dict((s, set(sum(units[s],[]))-set([s]))
             for s in squares) 
```

有人可以帮我理解（简单来说）最后两行是什么意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:33:18.253

```
units = dict((s, [u for u in unitlist if s in u]) 
             for s in squares) 
```

是相同的

```
units = dict()
for s in squares:
    units[s] = [u for u in unitlist if s in u] 
```

甚至类似于以下低效版本

```
units = dict()
for s in squares:
    units[s] = []
    for u in unitlist:
        if s in u:
            units[s].append(u) 
```

# python - 使用类 - 解决 NameError: global name

> ID：15164497
> 
> 赞同：0
> 
> 时间：2013-03-01T18:31:10.157
> 
> 标签：python, class, debugging, optimization

我正在使用类对象以提高我的编程技能。我有三个文件 *.py。很抱歉这个基本示例，但请帮助我了解我的错误在哪里：

```
/my_work_directory
   /core.py *# Contains the code to actually do calculations.*
   /main.py *# Starts the application*
   /Myclass.py *# Contains the code of class* 
```

在`Myclass.py`

```
class Point(object):
    __slots__= ("x","y","z","data","_intensity",\
                "_return_number","_classification")
    def __init__(self,x,y,z):
        self.x = float(x)
        self.y = float(y)
        self.z = float(z)
        self.data = [self.x,self.y,self.z]

   def point_below_threshold(self,threshold):
        """Check if the z value of a Point is below (True, False otherwise) a
            low Threshold"""
        return check_below_threshold(self.z,threshold) 
```

在`core.py`

```
def check_below_threshold(value,threshold):
    below = False
    if value - threshold < 0:
        below = not below
    return below

def check_above_threshold(value,threshold):
    above = False
    if value - threshold > 0:
        above = not above
    return above 
```

当我设置 main.py

```
import os
os.chdir("~~my_work_directory~~") # where `core.py` and `Myclass.py` are located

from core import *
from Myclass import *

mypoint = Point(1,2,3)
mypoint.point_below_threshold(5) 
```

我得到：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "Myclass.py", line 75, in point_below_threshold
    return check_below_threshold(self.z,threshold)
NameError: global name 'check_below_threshold' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:34:13.340

其他模块中的功能在您的`Myclass`模块中不会自动可见。您需要显式导入它们：

```
from core import check_below_threshold 
```

或导入`core`模块并将其用作命名空间：

```
import core

# ...
    return core.check_below_threshold(self.z,threshold) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:37:08.067

您缺少导入。你必须在你使用它们的地方导入你的函数。这意味着，您也必须在 core.py 中导入 check_below_threshhold，因为它在那里被使用。

# c# - 输入字符串的格式不正确 C#

> ID：15164499
> 
> 赞同：1
> 
> 时间：2013-03-01T18:31:13.073
> 
> 标签：c#, exception, loops, for-loop

我目前正在编写一个带有人名和 5 个变量的程序。然后使用这 5 个变量，我的任务是找到平均/样本方差。我目前的代码如下：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    namespace ConsoleApplication1
    {
        class Program
        {
        static void Main(string[] args)
        {
            string userName = "";
            string variables = "";
            int[] vars = parseVariableString(variables);
            vars = new int[5];
            int sum = 0;

            Console.Write("Please enter your name: ", userName);
            userName = Console.ReadLine();
            Console.ReadLine();
            Console.Write("Please enter 5 numbers with a space or coma inbetween: ", vars);

            for (int i = 0; i < vars.Length; i++)
            {
                int number = vars[i];
                sum += number;
            }
            float avg = sum/(float)vars.Length;
            float variance = 0;
            for (int i = 0; i < vars.Length; i++)
            {
                int number = vars[i];
                float f = number - avg;
                variance += (float)Math.Pow(f, 2);
            }
            float sv = variance / (vars.Length - 1);

            Console.Write(" Your name is: ", userName);
            Console.ReadLine();
            Console.Write("The average of your numbers is: ", avg);
            Console.ReadLine();
            Console.Write("The sample variance of your numbers is: ", sv);
            Console.ReadKey();
        }

        private static int[] parseVariableString(String variables)
        {
            String[] varArray = variables.Split(' ', ',');
            int[] intArray = new int[varArray.Length];

            for (int i = 0; i < varArray.Length; i++)
            {
                String variable = varArray[i];
                int integer = Convert.ToInt32(variable);
                intArray[i] = integer;
            }
            return intArray;
        }
    }
} 
```

我得到了

> 输入字符串的格式不正确

错误`int integer = Convert.ToInt32(variable);`。我不明白为什么我会收到这个错误。我在网上查看了它的含义，很多人说要使用 int.parse 但从我读到的内容中，您会得到这个，因为该变量无法识别出与之关联的值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T18:36:13.383

```
 string variables = "";
    int[] vars = parseVariableString(variables); 
```

您正在声明一个空字符串，然后尝试将该字符串转换为 int。

```
private static int[] parseVariableString(String variables)
{
    String[] varArray = variables.Split(' ', ',');
    int[] intArray = new int[varArray.Length];

    for (int i = 0; i < varArray.Length; i++)
    {
        String variable = varArray[i];
        int integer = Convert.ToInt32(variable);
        intArray[i] = integer;
    }
    return intArray;
} 
```

以及当您传入一个空字符串时，没有什么可拆分的，因此您的数组是空的。

# wpf - 以递归方式应用于所有子元素的边框样式

> ID：15164503
> 
> 赞同：0
> 
> 时间：2013-03-01T18:31:17.317
> 
> 标签：wpf, wpf-controls, wpf-4.0

我是 WPF 新手，需要您帮助解决我的样式问题。

我已将边框样式应用于 GRID，如下所示

```
<Border CornerRadius="5" BorderBrush="Gainsboro" BorderThickness="1,1,0,0" Name="border1" Margin="90,54,20,50" >
                    <Border BorderBrush="Gray" CornerRadius="5" BorderThickness="0,0,1,1" >
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="10" Direction="-50" ShadowDepth="7" />
                        </Border.Effect>
                        <Border.Child>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="356*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="446*" />
                                </Grid.ColumnDefinitions>

                                <TextBox Name="TB1" Style="{StaticResource CustomTextBoxStyle}" Grid.Column="1" Margin="46,79,400,277" Grid.Row="1" />
                                <ComboBox Height="24" Name="comboBox1" Width="110" Grid.Column="1" Margin="304,86,232,276" Grid.Row="1" />

                            </Grid>
                        </Border.Child>

                    </Border>                    
                </Border> 
```

然后我在网格中放置了自定义样式的文本框和组合框。

问题是父 GRID 的边框样式连同其自己的自定义样式属性一起应用于子 TEXTBOX。

你能帮我解决这个问题吗？

谢谢巴拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:47:41.483

根据 MSDN 文档 -

> 当 BitmapEffect 应用于布局容器（例如 DockPanel 或 Canvas）时，效果将应用于元素或视觉对象的视觉树，包括其所有子元素。

[但是，这里](http://social.msdn.microsoft.com/Forums/en/wpf/thread/542cc6c4-a364-4db6-bd6f-ff481cfea72a)和[这里](http://diptimayapatra.wordpress.com/2010/04/05/bitmap-effects-in-wpf-part-ii/)描述的一种解决方法是让另一个边界具有相同的位置但没有效果，这将解决问题 -

```
<Grid>
  <Border Margin="10" BorderBrush="Red" BorderThickness="1">
   <Border.Effect>
    <DropShadowEffect Color="Gray"/>
   </Border.Effect>
  </Border>
  <Border Margin="10">
   <!-- controls -->
  </Border>
 </Grid> 
```

# python - 如何将 json 数据定义为 X 和 Y sklearn 决策树数组

> ID：15164506
> 
> 赞同：1
> 
> 时间：2013-03-01T18:31:25.150
> 
> 标签：python, json, scikit-learn, decision-tree

假设我的数据由水果组成，由它们的颜色和形状以及更多具有任意值的特征（纹理大小、果皮类型等）来描述。

我想使用[sklearn.tree将我的数据拟合到决策树](http://scikit-learn.org/0.13/modules/tree.html#classification)

如何在 sklearn.tree 中构建决策树。X定义的样本和特征数组是什么，Y是什么。对于我使用mongodb的数据库，因此数据集在json中：

`{"_id":2323, "shape":"round", "color":[red,green], "texture":"A", "pill":"X", "more":[1,2,3]}`

`{"_id":2324, "shape":"round", "color":[orange], "texture":"C", "pill":"", "more":[1,2]}`

是否有将数据拟合/转换为在 sklearn.tree 中构建决策树所需的 python 数据类型的教程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:16:48.840

查看[有关特征提取的文档](http://scikit-learn.org/stable/modules/feature_extraction.html)。

**编辑**：我刚刚注意到您的 json 构造中有嵌套结构。和`DictVectorizer`类`FeatureHasher`都期望平面字典作为输入。你可以扁平化你自己的构造，例如：

```
{"_id": 2323, "shape": "round", "color/red": 1 "color/green": 1, "texture": "A",
 "pill": "X", "more/1": 1, "more/2": 1, "more/3": 1} 
```

然后调用`DictVectorizer`或`FeatureHasher`在这样的平面 python dicts 列表上。

# c# - 如何查询货币或百分比数字格式的访问字段？

> ID：15164507
> 
> 赞同：0
> 
> 时间：2013-03-01T18:31:27.810
> 
> 标签：c#, winforms, ms-access

我有一个 Access 数据库，在一个表中我有这个字段：

```
Field Name: FieldA
Data Type: Number
Field Size: Double
Format: Percent 
```

在表单上，​​有一个名为 tBD 的文本框。用户输入一个值，单击 Button1 并运行一个查询。结果存储在名为 tV 的文本框中。这是我的代码：

```
OleDbConnection conn = null;
conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=c:\\mydatabase.accdb");
conn.Open();

double bd = Convert.ToDouble(tBD.Text);

string sql = string.Format("SELECT Something FROM Table1 where [FieldA] = {0}", bd);
OleDbCommand cmd = new OleDbCommand(sql, conn);
OleDbDataReader dr = cmd.ExecuteReader();

if (dr.HasRows == true)
{
    while (dr.Read())
    {
        tV.Text = dr.GetValue(0).ToString();
    }
}
else
{
    tV.Text = "0";
} 
```

当我在 Access 中查看 FieldA 时，它的值如下：

-15.00%
-13.25%
-18.00%
-12.50%

我只是不确定如何让用户格式化他们在 tBD.Text 中输入的值，和/或如何在代码中格式化它以便在查询中有意义。

此外，当数据类型为货币时，我遇到了同样的问题。用户应该如何格式化他们输入的值，以及如何在代码中格式化它？

有任何想法吗？谢谢！

编辑：

我试过

```
string sql = string.Format("SELECT Something FROM Table1 where [FieldA] = {0:0.00%}", bd); 
```

但它会将 -15.00 变成 -1500.00% .. 我只是不确定格式化它的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:47:29.503

我想通了..必须改变

```
double bd = Convert.ToDouble(tBD.Text); 
```

到

```
double bd = Convert.ToDouble(tBD.Text)/100; 
```

Access 想要查看 -.1325，而不是 -13.25

# windows - 无法启动由 Disk2VHD 创建的 VHD

> ID：15164516
> 
> 赞同：2
> 
> 时间：2013-03-01T18:32:08.567
> 
> 标签：windows, vhd, windows-virtual-pc

我首先使用 Windows 备份创建系统映像，然后意识到这些 VHD 文件无法使用 Virtual PC 启动。

所以我找到了实用程序 Disk2VHD 并花了几个小时制作了一个新的 VHD 并尝试使用 Virtual PC 启动它，但它也无法启动。

它给出了错误：PXE-E53：没有收到引导文件名

我按照网上找到的一些说明进入 Virtual PC 设置并确保我设置了正确的 vhd，但我也无法使用集成功能。

然后我进入 Virtual PC 的 BIOS 和启动菜单，它在硬盘驱动器 [Virtual HD] 下显示，在启动优先级中，第一个启动设备是硬盘驱动器。

这个 VHD 是从我的 C: 创建的，这是我的主要 Windows 安装（Windows 7 Pro 64 位）

这样做的全部目标是我想格式化我的驱动器并安装新的 Windows，但我希望能够制作一个可启动的映像，以便稍后根据需要恢复内容，并查看如果我忘记了这些内容是如何设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T20:20:00.240

当您转换它时，您是否选中了允许该文件在 Virtual PC 中使用的复选框？我忘记了它的名称，但是在转换之前必须单击一个复选框。

还要确保驱动器不大于 127GB，否则 Virtual PC 将无法识别它。

# linux - 确定 Redhat Linux 版本

> ID：15164520
> 
> 赞同：19
> 
> 时间：2013-03-01T18:32:24.347
> 
> 标签：linux, release, redhat

如何确定`RedHat`我运行的是哪个 Linux 版本？

这是我读过的：

*   `/etc/redhat-release`文件包含版本，但任何人都可以篡改该文件。
*   人们说`uname`命令，但你可以在 Redhat 上安装任何内核。

如果我正在运行 redhat 5.1 并且有人用 5.2 或 5.x 升级它，那么什么决定了 RedHat 的版本？

甚至`lsb_release -a` 读取 /etc/redhat-release 文件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-29T15:00:41.793

试试这个命令：

```
rpm -qa | grep release 
```

例如在我的机器上我得到这个

> redhat-release-workstation-6Workstation-6.4.0.4.el6.x86_64

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-01T18:45:19.953

如果“任何人”对您的机器具有 root 访问权限以更改 /etc/redhat-release 或安装备用内核，那么您很可能比确定系统的 redhat 版本遇到更大的麻烦。

只需使用 /etc/redhat-release 指出的值，或者在可移植性方面甚至更好，使用 lsb_release 的输出，因为这正是它们的目的。

“任何人”都可以对您的系统做任何事情，根本没有其他机会。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-04T08:41:18.433

您可以在最近的 linux 发行版上使用 lsb_release 命令。如果您发出：

```
lsb_release -i -r 
```

或者

```
uname -r 
```

并映射输出。2.6.9 内核是 RHEL4，2.6.18 内核是 RHEL5。如有必要，您可以将完整版本映射到 Red Hat 的特定更新版本（即 2.6.9-89 是 RHEL5 U4）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-05T14:31:38.360

注意：[自 2012 年 7 月以来](http://0pointer.de/blog/projects/os-release)，**`/etc/os-release`**应该是查找任何操作系统版本的标准文件。

> *   它减轻了只想知道他们正在运行的发行版的应用程序开发人员检查大量单独的发布文件的工作。
> *   它提供了一个“漂亮”的名称（即向用户显示的名称）和机器可解析的版本/操作系统标识符（即用于构建系统）。
> *   它是可扩展的，如果需要可以轻松学习新领域。

请参阅其[手册页](http://www.freedesktop.org/software/systemd/man/os-release.html)。

[红帽示例](https://linuxconfig.org/how-to-check-what-redhat-linux-version-is-my-system-running)：

```
# cat /etc/os-release 
NAME="Red Hat Enterprise Linux Server"
VERSION="7.0 (Maipo)"
ID="rhel"
ID_LIKE="fedora"
VERSION_ID="7.0"
PRETTY_NAME="Red Hat Enterprise Linux Server 7.0 (Maipo)" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-04T17:52:22.220

适用于众多 Linux 发行版的技巧：

```
cat /etc/issue 
```

* * *

**红帽 6 上的示例**：

```
$ cat /etc/issue
CentOS release 6.7 (Final)
Kernel \r on an \m

$ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-30T20:14:20.377

最简单的命令是：

```
lsb_release -d 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-05T16:15:42.550

尝试

```
uname -r 
```

或者

```
cat /etc/issue 
```

对于最近的 linux 机器

```
lsb_release -d 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-15T17:40:54.080

对于今天或将来正在阅读本文的人：
正在运行的内核版本是您的 RedHat 版本。可能安装了其他版本，但未运行。
因此，如果机器上安装了 RedHat 5.1、5.2 和 5.x，一次只能运行 1 个。这是在系统启动 uop 时启动的版本。要确定实际运行的版本，请使用`uname`命令：
`uname -r`
这将返回内核版本号。对于 RedHat 5，它将是 2.6.18-[something]
RH 5.1 是 2.6.18-53
RH 5.2 是 2.6.18-92

要将内核版本号转换为 Redhat 版本号，请参阅此链接：
[Red Hat Enterprise Linux Release Dates](https://access.redhat.com/articles/3078)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-29T19:56:42.230

该文件`/etc/redhat-release`是获取供应商版本（包括 5.X）的标准方式。我认为你不应该忽视这种方式。当然，您可以使用其他软件的各种技巧来显示当前的操作系统版本，但无论如何，其中许多都在解析 /etc 文件。如上所述，您可以使用 rpm 查询来获取版本。获取此类信息的另一种方法：`rpm -q <vendor-name>-release`

顺便说一句，我同意上面的评论者的观点，如果有人可以篡改标准 /etc/redhat-release 文件或其他系统配置文件，那么您了解版本的方式是您的问题最少的问题。

此外，由于 RHEL 7.X 版本，您还可以尝试`hostnamectl | grep 'Operating System'`

# html - IE8/9 + Quirks 模式不透明度不起作用

> ID：15164532
> 
> 赞同：0
> 
> 时间：2013-03-01T18:33:31.923
> 
> 标签：html, css, internet-explorer, internet-explorer-9, quirks-mode

我正在开发 quirks 模式（啊...），并在某些图标上添加了不透明度（悬停时没有不透明度），但它在 IE8/9 + Quirks 中不起作用。

```
 .icons {
      display: inline;
      height: auto !important;
      height: 100%;
      margin: 0 1%;
      position:relative;
      zoom: 1;
     -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
      filter: alpha(opacity=50);
      opacity: 0.5;
    }

    .icons:hover {
      zoom: 1;
     -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
      filter: alpha(opacity=100);
      opacity: 1;
    } 
```

这是我的 jsfiddle：http: [//jsfiddle.net/for3v3rforgott3n/C3atq/](http://jsfiddle.net/for3v3rforgott3n/C3atq/)

JSFiddle 在 Quirks 模式下看起来很糟糕，所以有点难以展示......我在某处读到 IE9 不透明度在元素上没有宽度/高度时不起作用，我的高度基于 % 并且没有宽度，因为我我正在使用媒体查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T19:29:22.187

我还必须支持 quirks 模式并且*不*支持JQuery，但对我来说，我需要使用“display：inline-block”而不是“display：inline”。

以下对我有用：

“显示：内联块；不透明度：0.5；过滤器：alpha（不透明度 = 50）；”；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:56:04.760

仍然不确定到底是什么问题，但我用 jQuery 解决了它：

```
$(function() {
    $('div.icons img').css('opacity', '0.6');
    $('div.icons img').hover(function(){
        $(this).css('opacity', '1.0');
        $('div.icons img').mouseout(function(){
            $(this).css('opacity', '0.6');
        });
    });
}); 
```

# java - webdav 协议期间的 microsoft word url 编码问题

> ID：15164536
> 
> 赞同：0
> 
> 时间：2013-03-01T18:33:51.013
> 
> 标签：java, ms-word, webdav

我们有 ：

*   在 Linux 上运行的 webdav 服务器（java 应用程序）
*   Windows 7 上的客户端，使用 ms-word 2010

打开文件的 url 以文件名结尾，并在发送到 UI 之前以 UTF-8 编码：

> server.com/path/my_file_name.doc

它与没有特殊字符的文件名完美配合，但具有丑陋的 url，如

> server.com/path/En-tête de lettre + 大写字母 1 050 000 €.doc

，我们的服务器无法访问该文件。在堆栈跟踪中，我们可以看到服务器接收到的 url 是

> server.com/path/En-tÃªte de lettre + 大写字母 1 050 000 â?¬.doc

，但是 ms-word 显示的错误信息包含正确的 url，所以我认为原始 url 是正确的。

最后但同样重要的是：当服务器在 Windows 平台上运行时，它可以工作。

我想 ms-word 在将 url 传输到服务器之前对其进行重新编码，但我无法猜测如何对其进行解码。

欢迎大家提出建议^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:29:36.413

我是[http://milton.io](http://milton.io) (java webdav server lib) 的作者，我看到了一个问题，即 MS 客户端对某些 url 进行了不正确的编码，而 milton 对此有一些解决方法。您使用的是什么 webdav 框架/服务器？

但是，**给出的示例看起来更像 mangling**，正如 Marc B 所建议的那样。您的服务器可能正在以 UTF-8 输出 propfind 响应，但 Windows 将其解释为 win-1252。

因此，您应该查看响应标头并检查为响应提供的字符编码，并检查它是否与 PROPFIND 响应中使用的实际编码匹配。

请注意，早期版本的 milton 存在使用服务器默认编码但始终报告 UTF-8 的问题，因此在任何不使用 UTF-8 作为默认字符编码的服务器上都会出现此问题。

# php - 刷新页面后记住选择的值

> ID：15164540
> 
> 赞同：0
> 
> 时间：2013-03-01T18:34:06.567
> 
> 标签：php, javascript, jquery

在包含带有选择字段的表单的页面中，我需要记住之前的选择（如果有的话），例如选中状态。我想通过嵌入在 JS 中的 PHP 来做到这一点，我错了？

```
<script>
<?php
if(isset( $_GET["state"] )){
$selected_state =  $_GET["state"];
?>
$("#state option[<?php echo $selected_state ?>]").attr("selected", "selected");
<?php } ?>
</script> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:36:18.920

您可以在 PHP 中使用会话来记住某些数据。

例如：

```
session_start();

$foo = 'John';
$_SESSION['user'] = $foo;
// Refresh the browser.
echo $_SESSION['user'];
// Outout: 'John'. 
```

如果您想了解更多信息，请查看[http://php.net/manual/en/ref.session.php 。](http://php.net/manual/en/ref.session.php)

不过要小心你在会话中存储的内容，不要在其中存储关键数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:45:36.690

代替：

```
$("#state option[<?php echo $selected_state ?>]").attr("selected", "selected"); 
```

和：

```
$("#state option[value='<?php echo $selected_state ?>']").attr("selected", "selected"); 
```

* * *

问题出在 jQuery 选择器`#state option[SOMETHING]`上，它检查元素`option`是否有一个名为 的属性`SOMETHING`，您想在其中查看选项的值是否等于，`SOMETHING`所以我们使用`#state option[value='SOMETHING']`.

您可以在此处找到 jQuery 选择器文档：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# abcpdf - ABCPDF 版本 8 HTML 到 PDF 图像不显示

> ID：15164542
> 
> 赞同：0
> 
> 时间：2013-03-01T18:34:13.713
> 
> 标签：abcpdf

我有一个带有日历控件的 aspx 页面。当我尝试将此页面打印为 PDF 时，我的图像或日历网格线都没有出现。但是，当我直接转到该页面时，一切都很好。我也在我们的开发服务器上进行了这项工作，但是一旦将其移至新服务器，所有图像和网格线都停止出现。我在这里尝试了一些建议，例如对图像使用完整文件路径但没有成功。有没有人遇到过类似的问题？我将用于创建 PDF 的代码放在下面，尽管我认为这不是问题，因为我之前在不同的服务器上工作过。

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
int lastDash = url.LastIndexOf('/');
url = url.Remove(lastDash + 1);
url += "print.aspx";
theDoc.AddImageUrl(url, true, width , true);
theDoc.Flatten();

theDoc.Clear(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:39:06.937

我添加了下面的代码行，现在出现了图像和线条。虽然这回答了我的问题，但打印的页面现在非常糟糕，需要修复。

```
Doc theDoc = new Doc();
theDoc.HtmlOptions.Engine = EngineType.Gecko; 
```

# python - 为什么python shell只执行第一行？

> ID：15164547
> 
> 赞同：2
> 
> 时间：2013-03-01T18:34:39.653
> 
> 标签：python, python-idle

为什么 python shell (IDLE) 只执行第一行？我只是在一行上简单地打印'hello world'，然后在第二行上打印'my world'。按回车只返回“hello world”

代码

```
print 'Hello world!'
print 'My world!' 
```

* * *

结果

```
Hello world! 
```

# .net - EndpointNotFoundException 的可能原因是什么？

> ID：15164550
> 
> 赞同：4
> 
> 时间：2013-03-01T18:34:47.060
> 
> 标签：.net, wcf, wcf-4

我试图在下面找到 EndpointNotFoundException 异常的潜在原因（发生在客户端，异常是间歇性的）。异常消息描述了两个可能的原因：

*   没有端点监听。
*   不正确的 SOAP 操作。

我验证了这两个端点以及 SOAP 操作都可用。网络配置似乎是正确的，所有机器都已启动、运行且负载非常轻。我还检查了诸如代理（没有）、并发（maxConcurrentConnection 增加）和性能计数器（一切看起来都很正常）之类的东西。这可能是由于客户端库中的错误（我们正在合并代理）导致代理处于故障状态或某些套接字从未关闭吗？

简而言之，我想知道在客户端代理中间歇性地导致该异常的原因是什么。

```
Exception: System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at https://production.com/MyService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. ---> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 11.11.111.11:443 
at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) 
at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception) 
--- End of inner exception stack trace --- 
at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context) 
at System.Net.HttpWebRequest.GetRequestStream() 
at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream() 
--- End of inner exception stack trace --- 

Server stack trace: 
at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream() 
at System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout) 
at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.SendRequest(Message message, TimeSpan timeout) 
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout) 
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout) 
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 

Exception rethrown at [0]: 
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-22T17:29:23.113

我有同样的问题。就我而言，**用 IP 替换计算机名称是可行的**。我知道这没有多大意义。

不起作用：

```
<endpoint address="http://MyComputerName:82/MyApplication/MyPath/MyWebService.asmx" 
```

是否有效：

```
<endpoint address="http://172.XX.X.X:82/MyApplication/MyPath/MyWebService.asmx" 
```

我应该补充一点，浏览器可以使用计算机名称完全访问端点。但是，当应用程序进行调用时，它根本不起作用。

# javascript - 如何在 Backbone 中绑定按键？

> ID：15164553
> 
> 赞同：0
> 
> 时间：2013-03-01T18:34:52.977
> 
> 标签：javascript, backbone.js

```
events:{
    'kepressUp input#price': 'submitForm'
}, 
```

我将如何检测 keypress up ？

当有人在价格部分输入内容时，我想自动提交表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:38:28.017

`kepressUp`事件不存在。您可以使用[`keyup`](http://api.jquery.com/keyup/),[`keydown`](http://api.jquery.com/keydown/)和[`keypress`](http://api.jquery.com/keypress/)

```
events:{
    'keyup input#price': 'submitForm'
}, 
```

# android - 动态 Android 应用程序语言

> ID：15164559
> 
> 赞同：1
> 
> 时间：2013-03-01T18:35:35.420
> 
> 标签：android

很多时候，我看到显示有语言列表的 Android 应用程序，我可以点击任何一种语言并为这个特定的应用程序下载它（GO 天气小部件具有此功能）。

我感兴趣的是这是如何实现的，以及在 Android 应用程序中动态加载语言的最佳方式是什么？在应用程序项目中添加 100 个 string.xml 资源不是解决方案，此外，如果我想提供某种“有趣的节日语言”包或添加一种新语言，我需要一次又一次地将项目上传到 Google Play...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:52:12.367

虽然可以使用[扩展文件](http://developer.android.com/google/play/expansion-files.html)添加到您的应用程序中，但它们在某些方面受到限制。您的主要问题是您只能拥有有限数量的扩展文件。如果您想要 100 种语言，您唯一的选择是将它们*全部*加载到扩展文件中，然后下载整个内容。虽然这可能不是问题，但由于翻译后的字符串列表可能没有那么大，您可能想走不同的路线。

我看到下载*单独*的语言插件的最佳选择是`strings.xml`完全放弃使用。只需使用一个简单的 CSV 文件来保存您的字符串，将名称映射到字符串。当你的程序启动时，将它读入一个字符串数组/映射/任何东西，你所有的字符串都准备好了。这样，如果您想添加一种语言，就像下载一个文本文件并将其保存到您的数据目录一样简单。

此外，您可以在同一服务器上保留列出所有可用语言的文件，因此如果您想添加季节性或仅限时间的语言，则无需更新应用程序，就像您提到的那样。只需读入文件以获取列表。

请注意，您需要在某个地方托管文件，但这在当今时代几乎不是障碍。

# python - 用pycharm调试，如何步入项目，无需进入django库

> ID：15164565
> 
> 赞同：10
> 
> 时间：2013-03-01T18:35:55.227
> 
> 标签：python, django, debugging, pycharm

想想这个场景：

我调试了我的 Django 项目，并逐步完成了代码（进出）。调试器有时会进入 Django 库或其他外部库。

有谁知道如何防止调试器输入外部代码？或者至少是“大”一步让调试器回到项目代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T13:36:49.247

> 有谁知道如何防止调试器输入外部代码？

是的，德米特里·特罗菲莫夫[知道](http://forum.jetbrains.com/thread/PyCharm-1385?message=PyCharm-1385-7)；

> （...）添加您不想跟踪到 dict`DONT_TRACE`的模块，`<pycharm-distr>/helpers/pydev/pydevd.py`
> 这是一个 hacky 解决方案（...）

如果您希望此功能不那么 hacky，您可以通过访问 issue
[PY-9101 为 Python 调试器实现“不要步入类”选项对其进行投票](http://youtrack.jetbrains.com/issue/PY-9101)

* * *

那些使用 pdb 的人可能有兴趣知道 pdb 中有这样的功能；

从 Python 3.1 开始，`Pdb`class 有一个新参数，称为[`skip`](http://docs.python.org/dev/library/pdb.html#id3)-

`class pdb.Pdb(completekey='tab', stdin=None, stdout=None, skip=None, nosigint=False)`

> 如果给定，skip 参数必须是 glob 样式的模块名称模式的可迭代。调试器不会单步执行源自与这些模式之一匹配的模块的帧。[1](http://forum.jetbrains.com/thread/PyCharm-1385?message=PyCharm-1385-7)
> 
> [1](http://forum.jetbrains.com/thread/PyCharm-1385?message=PyCharm-1385-7)帧是否被认为源自某个模块由`__name__`帧中的全局变量决定。

文档中给出的示例显示了如何跳过 Django 的包 -

`import pdb; pdb.Pdb(skip=['django.*']).set_trace()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:13:10.947

调试器看起来一切都一样，它无法区分您的代码或 Django 的代码——它都是 Python。所以它会运行一切，但是如果你想阻止它向下钻取这么低，你将不得不开始“跳过”代码行而不是“步入”它们。

根据[PyCharm 文档](http://www.jetbrains.com/pycharm/webhelp/running-and-debugging.html)`F8`，当你看到一行代码看起来像是进入 Django 内部的入口时，你会想要使用它。如果你不小心发现自己在 Django 的源代码中，你可以`Shift+F8`一直打到你离开它。

# c# - 并发使用时静态类中的静态属性

> ID：15164567
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:35:57.267
> 
> 标签：c#, static-members, static-class

我有一个静态类 'Logger' 和一个名为 'LogLevels' 的公共属性，如下面的代码所示。

**当该属性**在多用户或多线程环境中并发使用时，会不会引起问题？

**我是否需要对**属性“LogLevels”中的代码使用线程同步？

```
 public class Logger
{
    private static List<LogLevel> _logLevels = null;

    public static List<LogLevel> LogLevels
    {
        get
        {
            if (_logLevels == null)
            {
                _logLevels = new List<LogLevel>();
                if (!string.IsNullOrWhiteSpace(System.Configuration.ConfigurationManager.AppSettings["LogLevels"]))
                {

                    string[] lls = System.Configuration.ConfigurationManager.AppSettings["LogLevels"].Split(",".ToCharArray());
                    foreach (string ll in lls)
                    {

                        _logLevels.Add((LogLevel)System.Enum.Parse(typeof(LogLevel), ll));
                    }
                }
            }

            if (_logLevels.Count == 0)
            {
                _logLevels.Add(LogLevel.Error);
            }
            return _logLevels;
        }
    }
} 
```

**更新：**我最终使用线程同步来解决静态类中的并发问题，如下面的代码所示。

```
public class Logger
{
    private static readonly System.Object _object = new System.Object();

    private static List<LogLevel> _logLevels = null;

private static  List<LogLevel> LogLevels
    {
        get
        {
            //Make sure that in a multi-threaded or multi-user scenario, we do not run into concurrency issues with this code.
            lock (_object)
            {
                if (_logLevels == null)
                {
                    _logLevels = new List<LogLevel>();
                    if (!string.IsNullOrWhiteSpace(System.Configuration.ConfigurationManager.AppSettings["SimpleDBLogLevelsLogger"]))
                    {

                        string[] lls = System.Configuration.ConfigurationManager.AppSettings["SimpleDBLogLevelsLogger"].Split(",".ToCharArray());
                        foreach (string ll in lls)
                        {

                            _logLevels.Add((LogLevel)System.Enum.Parse(typeof(LogLevel), ll));
                        }
                    }
                }

                if (_logLevels.Count == 0)
                {
                    _logLevels.Add(LogLevel.Error);
                }
            }
            return _logLevels;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:37:56.187

> 当该属性在多用户或多线程环境中并发使用时，会不会引起问题？

绝对地。`List<T>`不是为多线程设计的，除了*只有*多个读取器（没有写入器）的情况。

> 我是否需要对属性“LogLevels”中的代码使用线程同步？

嗯，这是一种方法。或者只是在类型初始化时对其进行初始化，然后在它周围返回一个*只读*包装器。（你真的不希望多个线程修改它。）

请注意，一般来说，在静态构造函数中做大量工作是个[坏主意](http://ericlippert.com/tag/static-constructors/)。您是否足够高兴，如果这失败了，每次对该属性的访问都将永远失败？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:38:49.743

此代码具有竞争条件，不能从多个线程安全地执行。主要问题是该`List<T>`类型不是线程安全的，但此代码将自由写入。这意味着写入可以并行发生，因此打破了隐含的契约`List<T>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:39:52.550

简短的回答是“是”和“是”，您确实需要线程同步。另一个问题是，为什么要重新发明轮子？您可以使用 log4net 或 .NET 日志框架之类的东西。

# perl - perl中的字符串数组排序问题

> ID：15164568
> 
> 赞同：3
> 
> 时间：2013-03-01T18:36:04.643
> 
> 标签：perl, sorting

我在下面运行代码来对字符串进行排序，但没有得到预期的结果。

**代码：**

```
use warnings;
use strict;

my @strArray= ("64.0.71","68.0.71","62.0.1","62.0.2","62.0.11");
my @sortedStrArray = sort { $a cmp $b } @strArray;

foreach my $element (@sortedStrArray ) {
    print "\n$element";
} 
```

**结果：**

```
62.0.1
62.0.11   <--- these two
62.0.2    <---
64.0.71
68.0.71 
```

**预期结果：**

```
62.0.1
62.0.2    <---
62.0.11   <---
64.0.71
68.0.71 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T18:41:37.913

“1”字符 0x31。“2”是字符 0x32。0x31 小于 0x32，因此“1”排在“2”之前。你的期望是不正确的。

要获得您希望获得的结果，您可以使用以下内容：

```
my @sortedStrArray =
   map substr($_, 3),
   sort
   map pack('CCCa*', split(/\./), $_),
   @strArray; 
```

或者对于更广泛的输入：

```
use Sort::Key::Natural qw( natsort );
my @sortedStrArray = natsort(@strArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:51:21.707

cmp 是按字典顺序比较（如字典），而不是按数字比较。这意味着它将逐个字符地遍历您的字符串，直到出现不匹配。在“62.0.11”与“62.0.2”的情况下，字符串在“62.0”之前是相等的。然后它在下一个字符处发现不匹配。由于 2 > 1，它排序“62.0.2”>“62.0.11”。我不知道您使用字符串的目的是什么，或者您是否可以控制它们的格式，但如果您要将格式更改为“62.00.02”（每个段有 2 位数字）而不是“62.0 .2" 那么它们将按照您的预期进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:49:43.440

试试 Perl 模块`Sort::Versions`，它旨在为您提供您所期望的。

[http://metacpan.org/pod/Sort::Versions](http://metacpan.org/pod/Sort%3a%3aVersions)

它也支持字母数字版本 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T19:13:07.987

[**Schwartzian_transform**](http://en.wikipedia.org/wiki/Schwartzian_transform)

这是randal schwartz transofm的用法：

首先，了解您想要什么：
按第一个数字排序，然后是第二个，然后是第三个：

让我们这样做：

```
use warnings;
use strict;
use Data::Dumper;
my @strArray= ("64.0.71","68.0.71","62.0.1","62.0.2","62.0.11");
my @transformedArray = map{[$_,(split(/\./,$_))]}@strArray;

=pod
  here @transformedArray have such structure: 
  $each_element_of_array: [$element_from_original_array, $firstNumber, $secondNumber, $thirdNumber];
  for example:
  $transformedArray[0] ==== ["64.0.71", 64, 0, 71];
  after that we will sort it 
  first by first number
  then: by second number
  then: by third number
=cut

my @sortedArray =  map{$_->[0]} # save only your original string.
                  sort{$a->[3]<=>$b->[3]}
                  sort{$a->[2]<=>$b->[2]}
                  sort{$a->[1]<=>$b->[1]} 
                                         @transformedArray;
print Dumper(\@sortedArray); 
```

# node.js - Mongoose 模型选项字段

> ID：15164573
> 
> 赞同：4
> 
> 时间：2013-03-01T18:37:01.017
> 
> 标签：node.js, mongoose

嗨，我刚开始玩猫鼬。看起来非常棒！

现在来自 Django 背景，如何实现一种类型的选项字段，例如：

```
STATUS_OPTIONS : [{"Open",1},{"Closed",2},{"Pending",3"}]
status: { type:String, required:true, options:STATUS_OPTIONS }, 
```

这样它就可以设置为 status = Open 或类似的东西。

或者这应该只是一个普通的字符串字段，我在我的应用程序中相应地设置它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T20:35:06.870

您可以使用以下属性将 Mongoose 模式字符串字段限制为一组枚举值[`enum`](http://mongoosejs.com/docs/api.html#schema_string_SchemaString-enum)：

```
var s = new Schema({
    status: { type: String, enum: ['Open', 'Closed', 'Pending'] }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:09:07.313

您可能正在尝试做的是参考一些可能性，对吗？可能像`enum`字段类型。

好吧，直接使用 String*或*使用另一个 Schema 可能会更好（但如果您只需要字符串 Closed、Open、Pending，则不需要）。

# jquery - 按屏幕大小删除图像大小

> ID：15164574
> 
> 赞同：1
> 
> 时间：2013-03-01T18:37:03.057
> 
> 标签：jquery, html

我想知道当我的屏幕分辨率低于 980 像素时，是否有某种方法可以删除图像的宽度和高度？通过 jquery 什么的？

像这样的图像：

```
<img width="477" height="299" src="/uploads/2012/01/415.jpg" class="attachment-portfolio2 wp-post-image"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:40:58.783

您可以使用以下 CSS：

```
/* for all screens in general */
.wp-post-image {
   width: 477px;
   height: 299px;
}

/* specifically for screens smaller than (or equal to) 980px */    
/* make sure this comes *after* the general rule */
@media (max-width: 980px) {
  .wp-post-image {
    width: auto;
    height: auto;
  } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:43:12.490

您可以使用 jQuery[`removeAttr()`](http://api.jquery.com/removeAttr/)方法：

```
var images;

$(function() {  
    images = $('img.wp-post-image');
    removeSize();
});

$(window).resize(removeResize);

function removeSize()
{
    if($(window).width() < 980 && images.length > 0)
    {
        images.removeAttr('width').removeAttr('height');
    }
} 
```

# c# - 当前上下文中不存在名称“WebMail”

> ID：15164576
> 
> 赞同：0
> 
> 时间：2013-03-01T18:37:07.000
> 
> 标签：c#, asp.net-mvc

以下代码在本地运行良好，但是当我将其发布到服务器时，出现错误 The name 'WebMail' does not exist in the current context。不知道为什么会发生这种情况，特别是如果它在本地工作。谢谢你的帮助。

```
public void SendMessage()
        {
            WebMail.SmtpServer = SmtpServer;
            WebMail.UserName = ServerUsername;
            WebMail.Password = ServerPassword;
            WebMail.From = this.From;
            var recipents = string.Join(",", this.To);
            WebMail.Send(recipents, this.Subject, this.Body);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:37:47.240

谢谢你。VS 2012 中的发布没有添加 helper.dll。添加它，现在可以工作了！感谢所有的建议。

# redirect - 根据省份重定向用户（在加拿大）

> ID：15164580
> 
> 赞同：0
> 
> 时间：2013-03-01T18:37:25.907
> 
> 标签：redirect, geolocation, location

我已经进行了一些挖掘，但是我完全缺乏任何基于地理定位或基于 IP 位置的服务的经验，这使得我很难找到最好、最简单和最具成本效益的解决方案来解决我的问题。

我有一个网站询问访问者他们来自哪个省（在主页上，在页眉/页脚中，以便在网站的任何页面上轻松访问）。我们提供四个省份供您选择，（BC、AB、SK、ONT）。当他们尝试访问主页时，我想将访问者重定向到他们适当的省份，这样他们就可以完全避免这第一步。

如果访问者不是来自这些省份中的任何一个，他们只会被发送到主页。

希望这不是太难实现。任何方向都很棒

# hsqldb - 使用 hsqldb 作为键值存储

> ID：15164581
> 
> 赞同：1
> 
> 时间：2013-03-01T18:37:27.493
> 
> 标签：hsqldb

我想将 hsqldb 用作简单的键值存储，其中键和值都是字符串。该值将是一些数据的 JSON，例如大小不超过 10K。

值列的类型是 LONGVARCHAR。

我想知道这种类型是否适合这个目的。

附言

一点背景。我们想使用 MongoDB 或 CouchDB，但最新的 MongoDB 不支持 Windows XP，最新的 CouchDB 不支持 Windows 32 位，这两者都是必需的。在我们的案例中，使用像 Cassandra 这样的数据库似乎是一种巨大的矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:02:02.313

如果值已经采用 UTF-8 或其他 8 位编码形式，则可以使用 BLOB 或 VARBINARY。否则，对 Unicode 字符使用 CLOB 或 VARCHAR。两种形式都适用于高达 10K 的值。注意 LONGVARCHAR 只是一个长 VARCHAR。

如果访问速度很重要，您可以测试这两种类型并确定哪一种最适合您的数据。当值相对较小 (10k) 时，可以对 BLOB/VARBINARY 或 CLOB/VARCHAR 使用相同的访问 API。

# java - JAVA StAX 提取

> ID：15164584
> 
> 赞同：0
> 
> 时间：2013-03-01T18:37:45.957
> 
> 标签：java, stax

我无法弄清楚如何在 XML 文件中提取开始标记元素名称。我很接近〜意味着没有错误，我正在获取标签名称，但我正在获取标签名称和信息。我得到的是：

```
{http://www.publishing.org}author
{http://www.publishing.org}Date
{http://www.publishing.org}ISBN 
```

我的最终结果，我希望我的程序给我：

```
Author
Data
ISBN 
```

首先，这是我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<BookCatalog xmlns = "http://www.publishing.org">
    <Book>
        <Title>Yogasana</Title>
        <author>Dhirenda</author>
        <Date>1966</Date>
        <ISBN>81-40</ISBN>
        <Publisher>Dhirenda</Publisher>
        <Cost Currency = "INR">11.50</Cost>
    </Book>
    <Book>
        <Title>Yogasana</Title>
        <author>J. K</author>
        <Date>1954</Date>
        <ISBN>0-06</ISBN>
        <Publisher>Harper</Publisher>
        <Cost Currency = "INR">2.95</Cost>
    </Book>
</BookCatalog> 
```

我试过 System.out.println("Start Element GetName: " + se.getName()); System.out.println("开始元素GetEventType:" + se.getEventType()); System.out.println("属性名：" + attribute.getValue()); System.out.println("属性名：" + attribute.getName());

getname 产生：{ [http://www.publishing.org](http://www.publishing.org) } 日期。

getEventType 产生：1

attribute.getValue 产生：INR

attribute.getName 产生：货币。

如何获得仅包含元素名称的结果：日期、作者 ISBN 等？

为什么是 getName，我认为这是附加文本的正确方法：{ [http://www.publishing.org](http://www.publishing.org) }？

这是我的代码：

```
public static void main(String[] args) throws FileNotFoundException, XMLStreamException
{
    // TODO code application logic here
    //System.out.println("Here");
    //String filename = null;
    String filename = "BookCatalog.xml";
    XMLInputFactory factory = XMLInputFactory.newInstance();
    XMLEventReader reader = factory.createXMLEventReader(new FileReader(filename));

    String dataread = null;

    while(reader.hasNext())
            {
                XMLEvent event = reader.nextEvent();
                XMLEvent nextEvent = reader.peek();
                switch (event.getEventType())
                        {
                    case XMLEvent.START_ELEMENT:
                        StartElement se = event.asStartElement();

                        //StartElement se = (StartElement) event;
                        System.out.println("Start Element GetName: " + se.getName());
                        System.out.println("Start Element GetEventType: " + se.getEventType());

                        Iterator iterator = se.getAttributes();
                        while (iterator.hasNext()) {
                           Attribute attribute = (Attribute) iterator.next();
                            QName name = attribute.getName();
                            //String value = attribute.getValue();
                            //System.out.println("Attribute name/value: " + name + "/" + value);
                            //System.out.println("Attribute name: " + name);
                            System.out.println("Attribute Value: " + attribute.getValue());
                            System.out.println("Attribute name: " + attribute.getName());
                        }

                        //System.out.println("Here");
                        //System.out.print("<" + se.getName());

                        //System.out.print(" " + se.getName());
                        //Iterator iterator = se.getAttributes();
                        //System.out.print(" " + se.getAttributes());

                        System.out.printf("\n");
                        String elem = se.getName().toString();
                        //String elem = se.getAttributes().toString();
                        //String ele = event.getAttributeName();
                        //if( se.getName().toString() == "{http://www.publishing.org}Date")
                        if( se.getName().toString().equals("{http://www.publishing.org}Date"))
                        //if( elem == "1")
                        {
                         dataread = reader.getElementText();
                         //System.out.printf("data = %s\n",reader.getElementText());
                         System.out.printf("data = %s\n",dataread);

                        }
                        Iterator attributes = se.getNamespaces();

                        while(attributes.hasNext())
                        {
                            Attribute attr= (Attribute)attributes.next();
                            //System.out.print(" " + attr.getName() + "=\"" +attr.getValue() +"\"");
                            //System.out.printf("\n");
                        }//end while loop
                    //System.out.print(">");
                        if(nextEvent.isCharacters())
                        {
                            Characters c = reader.nextEvent().asCharacters();
                            if(!c.isWhiteSpace())
                            //System.out.print(c.getData());
                            System.out.printf("\n");
                        }// end if
                    /*case XMLEvent.END_ELEMENT>
                        EndElement ee = event.asEndElement();
                        System.out.print("</"+ee.getName()+">");
                        break;
                        * */
                        }// end witch
            }// end while
    System.out.printf("FINAL data = %s\n",dataread);

    reader.close();
}//end Main 
```

}//公共类

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:52:48.633

答案很简单：您在 xml 中为 BookCatalog 定义了一个命名空间

```
<BookCatalog xmlns = "http://www.publishing.org"> 
```

如果您在不同的命名空间中有同名的标签，这就是您的区别！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T04:33:55.003

1）尝试

```
System.out.println("Start Element GetName: " + se.getName().getLocalPart()); 
```

2) XMLStreamReader 可以做同样的工作，但速度更快

# database - 海量异构数据的数据库存储设计

> ID：15164585
> 
> 赞同：10
> 
> 时间：2013-03-01T18:37:46.273
> 
> 标签：database, database-design, data-structures

这是我很长一段时间以来一直想知道的事情，但还没有看到真正的（好的）解决方案。这是我想象很多游戏都会遇到的问题，而且我无法轻易想到如何解决（好吧）。欢迎提出想法，但由于这不是一个具体的问题，所以不要费心询问更多细节 - 只是弥补它们！（并解释你的编造）。

好的，所以，许多游戏都有（库存）物品的概念，而且通常有数百种不同种类的物品，所有物品的数据结构通常都非常不同 - 有些物品非常简单（“一块石头”），其他物品可以有疯狂的复杂性或背后的数据（“一本书”、“一个编程的计算机芯片”、“一个装有更多物品的容器”）等。

现在，这样的编程很容易——只要让所有东西都实现一个接口，或者扩展一个抽象的根项。由于编程世界中的对象不必在内部和外部看起来相同，因此任何类型的项目具有多少和什么样的私有字段确实没有问题。

但是当涉及到数据库序列化（二进制序列化当然没问题）时，您将面临一个难题：您将如何在典型的 SQL 数据库中表示它？

我已经看到了一些解决方案的尝试，但没有一个令我满意：

1.  项目的二进制序列化，数据库只保存一个 ID 和一个 blob。

    *   专业人士：实施大约需要 10 秒。
    *   缺点：基本上牺牲了所有数据库功能，难以维护，几乎不可能重构。
2.  每个项目类型的表。

    *   优点：干净、灵活。
    *   缺点：随着种类繁多的表出现数百个，每次搜索项目都必须查询它们，因为 SQL 没有表/类型“引用”的概念。
3.  一张表，其中包含许多并非每个项目都使用的字段。

    *   专业人士：实施大约需要 10 秒，仍然可以搜索。
    *   缺点：浪费空间，性能，从数据库中混淆以判断正在使用的字段。
4.  一些带有一些“基本配置文件”的表用于存储，其中相似的项目被放在一起，并为不同的数据使用相同的字段。

    *   专业人士：我什么都没有。
    *   缺点：浪费空间，性能，从数据库中混淆以判断正在使用的字段。

你有什么想法？您是否见过另一种效果更好或更差的设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T19:31:50.500

这取决于您是否需要对这些属性进行排序、过滤、计数或分析。

如果你使用 EAV，那么你会很好地搞砸自己。尝试对 EAV 模式进行报告。

最好的选择是使用表继承：

```
PRODUCT
id pk
type
att1

PRODUCT_X
id pk fk PRODUCT
att2
att3

PRODUCT_Y
id pk fk PRODUCT
att4
att 5 
```

对于不需要搜索/排序/分析的属性，请使用 blob 或 xml

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-28T20:17:35.847

我有两种选择：

5.  基本类型的一个表和每个专业类型“类”的补充表。

    在此模式中，所有“对象”共有的属性存储在一个表中，因此您对游戏中的每个对象都有唯一的记录。对于书籍、容器、可用物品等特殊类型，您可以为这些物品所需的每组独特的属性或关系提供另一个表。因此，每个特殊类型将由两条记录表示：基本对象记录和特定特殊类型表中的补充记录。

    优点：您可以使用数据库的基于列的功能，例如自定义域、检查和 xml 处理；您可以在某些类型上使用更简单的触发器；您的查询在不同的关注点上完全不同。

    缺点：许多对象需要两个插入。

6.  对特殊类型数据使用“种类”枚举字段和类似 JSONB 的字段。

    这有点像你的#1 或#3，除了一些数据库帮助。Postgres 添加了 JSONB，为您提供了对旧 EAV 模式的改进。其他数据库也有类似的复杂字段类型。在此策略中，您滚动存储在 JSONB 字段中的自己的迷你模式。kind 字段声明了您希望在该 JSONB 字段中找到的内容。

    优点：您可以在查询中提取特殊类型的数据；可以添加检查约束并有一个简单的模式来处理；即使您的数据是异构的，您也可以从索引中受益；您的查询和插入很简单。

    缺点：您在类似 JSONB 的字段中的数据类型非常有限，您必须进行自己的验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:48:52.193

是的，设计这样的数据库格式很痛苦。我正在设计一个通知系统并遇到了同样的问题。然而，我的通知系统没有你的那么复杂——它保存的数据最多是 id 和用户名。我当前的解决方案是 1 和 3 的混合 - 我序列化与每个通知不同的数据，并为 2 个用户名使用一列（有些可能有 2 或 1）。我回避方法 2，因为我讨厌那种设计，但它可能只是我。

但是，如果您负担得起，我建议您在 RDBMS 领域之外思考 - 听起来非 RDBMS（尤其是键/值存储的）可能更适合存储这些数据，特别是如果第 1 项和第 2 项不同从每个项目很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T19:36:53.600

我敢肯定这已经在这里被问过一百万次了，但是除了您在问题中讨论的选项之外，您还可以查看非常灵活的 EAV 模式，但它有自己的缺点。

另一种选择是非关系数据库系统。有对象数据库以及各种键/值存储和文档数据库。

通常，当您需要查询灵活属性时，所有这些事情都会在某种程度上分解。然而，这是一个内在的问题。从概念上讲，准确查询非结构化事物的真正含义是什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T22:51:59.147

首先，你真的*需要*真实数据库的并发性、可扩展性和 ACID 事务吗？除非您正在构建 MMO，否则您的游戏结构无论如何都可能适合内存，因此您可以直接在那里搜索和操作它们。在这种情况下，“数据库”只是序列化对象的存储，您可以将其替换为文件系统。

* * *

**如果您得出结论（需要数据库），那么关键是从数据管理的角度**弄清楚[“原子性”](http://en.wikipedia.org/wiki/1NF#Atomicity)的含义。

 **例如，如果一个游戏项目有一堆属性，但这些属性都没有在数据库级别单独操作（即使它们很可能在应用程序级别），那么它可以被认为是数据中的“原子”管理视角。OTOH，如果需要在其中一些属性上搜索项目，那么您需要一种在数据库中索引它们的好方法，这通常意味着它们必须是单独的字段。

一旦从数据库的角度确定了应该“可见”的属性与应该“不可见”的属性，将后者序列化为 BLOB（或其他），然后忘记它们并专注于构建前者。

这就是乐趣开始的地方，您可能需要使用“以上所有”策略以获得合理的结果。

顺便说一句，一些数据库支持可以进入异构数据结构的“深度”索引。例如，看看 Oracle 的[XMLIndex](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm#CHDFCGGI)，尽管我怀疑你会在游戏中使用 Oracle。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T23:19:00.123

您似乎正在尝试针对游戏环境解决此问题，因此也许您可以考虑使用**基于组件的**方法。我不得不说我个人还没有尝试过，但我已经研究了一段时间，在我看来，类似的东西可以应用。

这个想法是你游戏中的所有实体基本上都是一袋组件。例如，这些组件可以是`Position`，`Energy`或用于您的库存案例`Collectable`。然后，对于这个`Collectable`组件，您可以添加自定义字段，例如类别、numItems 等。

当您要呈现库存时，您可以简单地在实体系统中查询具有该`Collectable`组件的项目。

你怎么能把它保存到数据库中？您可以在它们自己的表中独立定义组件，然后为实体（每个实体也在它们自己的表中）添加一个“组件”列，该列将包含引用这些组件的 ID 数组。这些 ID 实际上就像外键，尽管我知道这并不是您在关系数据库中建模事物的确切方式，但您明白了。

然后，当您在运行时加载实体及其组件时，您可以根据正在加载的组件在其组件包中设置相应的标志，以便您知道该实体具有哪些组件，然后它们将变得可查询。

[这](http://piemaster.net/2011/07/entity-component-primer/)是一篇关于基于组件的实体系统的有趣读物。**

# ruby-on-rails - Sidekiq UI 不加载资产（Rails 3）

> ID：15164591
> 
> 赞同：0
> 
> 时间：2013-03-01T18:38:16.657
> 
> 标签：ruby-on-rails, sidekiq

我在 Rails 应用程序中使用 Sidekiq，但无法让 UI 正常工作。

当我去`http :// servername/sidekiq`sinatra 应用程序加载时，但看起来像这样：[http ://cl.ly/NHBT](http://cl.ly/NHBT)

日志中的错误是：

`Started GET "/sidekiq/javascripts/application.js" for 127.0.0.1 at 2013-03-01 11:32:48 -0700`

`NoMethodError (undefined method `empty?' for #<Rack::File:0x007faf004527c8>): bullet (4.3.0) lib/bullet/rack.rb:31:in`empty?' bullet (4.3.0) lib/bullet/rack.rb:12:in `call' warden (1.2.1) lib/warden/manager.rb:35:in`block in call' warden (1.2.1) lib/warden/manager.rb:34:in `catch' warden (1.2.1) lib/warden/manager.rb:34:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' rack (1.4.5) lib/rack/etag.rb:23:in`call' rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'`

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:20:58.590

我也有同样的问题。显然，[子弹宝石](http://librelist.com/browser//sidekiq/2013/1/11/assets-not-loading-in-development-mode-as-of-2-6-x/#720c07c4a83fd48213452ff84e1dc26d)造成了这种情况。

现在我刚刚决定禁用 Bullet，因为[文档中没有办法跳过 Bullet 以安装应用程序](https://github.com/flyerhzm/bullet)或类似配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T22:32:07.730

我最初的问题最终通过更新版本的 sidekiq 得到解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T18:44:46.510

好吧，我仍然遇到问题，但想出了以下解决方法：

添加到`config/initializers/sidekiq_bullet_workaround.rb`（或类似的）：

```
module Rack
  class File
    def empty?
      false
    end
  end
end 
```

# c# - CA1001 Visual Studio 2012 代码分析警告。这是什么意思？

> ID：15164592
> 
> 赞同：6
> 
> 时间：2013-03-01T18:38:18.857
> 
> 标签：c#, code-analysis, idisposable

这并不重要，但我想弄清楚它告诉我什么，这是一个合法的警告吗？有人可以简单地为我解释这个错误吗？

> **CA1001**拥有一次性字段的类型应该是一次性的
> 
> 在“MemVoteManager”上实现 IDisposable，因为它会创建以下 IDisposable 类型的成员：“CongressDBEntities”。如果 'MemVoteManager' 之前已发布，则将实现 IDisposable 的新成员添加到此类型被视为对现有使用者的重大更改。

```
 public class MemVoteManager : AbstractDataManager, IMemVoteManager
{
    private CongressDBEntities context = new CongressDBEntities();

    public int AddMemVote(tMemVoteScore mvs)
    {
        //Insert Model
        context.tMemVoteScores.Add(mvs);
        context.SaveChanges();

        int newPK = mvs.MemVoteScoresID;

        //Update funky column ID with PK as well
        var memVoteItem = (from m in context.tMemVoteScores
                           where m.MemVoteScoresID == newPK
                           select m).SingleOrDefault();

        memVoteItem.ID = memVoteItem.MemVoteScoresID;
        context.SaveChanges();
        return newPK;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:55:11.537

您*可以*实现`IDisposable`，以便在消费者使用完您的类后处理上下文，但最好不要让上下文成为该类的成员。只需在需要时创建它，并在完成后处理它：

```
public int AddMemVote(tMemVoteScore mvs)
{
    //Insert Model
    using(CongressDBEntities context = new CongressDBEntities())
    {
        context.tMemVoteScores.Add(mvs);
        context.SaveChanges();

        int newPK = mvs.MemVoteScoresID;

        //Update funky column ID with PK as well
        var memVoteItem = (from m in context.tMemVoteScores
                           where m.MemVoteScoresID == newPK
                           select m).SingleOrDefault();

        memVoteItem.ID = memVoteItem.MemVoteScoresID;
        context.SaveChanges();
    }
    return newPK;
} 
```

上下文是轻量级的，因此每次创建它们都不会造成巨大的损失。另外，您不必担心消费者会通知您处理上下文，并且如果多次使用该类的一个实例，您也不会在内存中进行大量累积更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T18:43:21.500

它让您知道该字段`context`包含一次性成员。这意味着这些成员需要`Dispose()`呼吁他们才能进行垃圾收集。因此，它希望您实现接口`IDisposable`，`MemVoteManager`以便您可以调用`Dispose()`上下文和/或其一次性成员。

所以修改你的代码：

```
public class MemVoteManager : AbstractDataManager, IMemVoteManager, IDisposable 
```

然后`IDisposable`像这样实现接口的成员：

```
public void Dispose()
{
    // call dispose on the context and any of its members here
} 
```

# python - Python新手，在给定n个游戏时创建一个掷骰子游戏

> ID：15164594
> 
> 赞同：0
> 
> 时间：2013-03-01T18:38:24.647
> 
> 标签：python

我是编程新手，特别是 python，我在做作业时遇到了问题。

这是问题所在：

掷骰子是在五月赌场玩的基于骰子的游戏。像二十一点一样，玩家与庄家对战。游戏从玩家投掷一对标准的六面骰子开始。如果玩家总共掷出 7 或 11，则玩家获胜。如果玩家总共掷出 2、3 或 12，则玩家输。对于所有其他掷骰值，玩家将重复掷这对骰子，直到她再次掷出初始值（在这种情况下她赢）或 7（在这种情况下她输了）

实现以正整数 n 作为输入的函数 testCraps()，模拟 n 次掷骰子游戏，并返回玩家赢得的游戏分数。

```
>>> testCraps(1000)
0.4844

>>> testCraps(1000)
0.492 
```

这是我到目前为止所拥有的：

```
import random

def roll():
   dice = (random.randrange(1,7) + random.randrange (1,7))
   return dice

def testCraps(n):
    dice = roll()
    total = 0
    count = 0

    for i in range (n):
        total = total + 1

        if dice == 2 or dice == 3 or dice == 12:
            count = count + 0
        elif dice == 7 or dice == 11:
            count += 1
        else:
            dice1 = roll()
             while dice1 != 7 or dice1 != dice:
                  if dice1 == 7:
                     count = count + 0
                  elif dice1 == dice:
                     count += 1
                  else: 
                     dice1 = roll()

     return(float(count/total)) 
```

我错过了什么吗？任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:02:16.267

你的缩进搞砸了。

从线路开始

```
for i in range (n): 
```

此代码不再是函数“testcraps()”的一部分。

这可能不是唯一的错误，但绝对要从正确的缩进开始。

缩进已修复，因此我将编辑我的答案。

我不会为你的作业编写代码，但我会给你这个建议。您现在的问题是“合乎逻辑的”问题。您需要将问题分解为更容易理解和测试的更简单的步骤。首先编写一个函数，它只模拟一个**游戏**并根据该游戏的输赢返回 0/1（或 True/False，如果您愿意）。让它工作，其余的将是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:29:18.133

我认为您在程序中遇到“挂起”，或者永远循环的情况，这意味着它无法完成执行。你循环 while`dice1 != 7 or dice1 != dice`这意味着循环不会停止，直到 dice1 等于 7 和，这意味着如果不是 7 `dice`，它将永远循环。`dice`

```
while dice1 != 7 or dice1 != dice: 
```

现在是第二个问题，这是带有注释的固定代码：

```
dice1 = roll()
while True: # Loop until either lost or won
    if dice1 == 7:
        break # Player lost, don't do anything
    elif dice1 == dice:
        count += 1 # Player won, increase count
        break
    else:
        dice1 = roll() 
```

# javafx - 获取tablecell行索引

> ID：15164596
> 
> 赞同：2
> 
> 时间：2013-03-01T18:38:26.243
> 
> 标签：javafx, tablecell, tablecolumn

我遇到的问题的简化视图....

*   TableView TV 包含两个 TableColumn（名称、值）。

*   数据结构类 obj_data 包含两个数据项，SimpleStringProperty 位置和双 X。多个 obj_data 对象存储在可观察列表中，并与 TableView TV 作为数据源一起使用

*   在 TableColumn Name 的渲染中，我需要获取并询问相应 X 的值，以更改位置 tableCell 的某些视觉属性。

我玩过...

nameColumn.setCellValueFactory(new Callback, ObservableValue>()...

返回 obj_data 元素的值，但在尝试获取表格单元格的索引时遇到困难，因此我可以正确呈现“位置”字段。希望这是有道理的！

PS：这比使用 cellrenderers 的 pre-javaFX 简单得多，因为我可以在回调参数中获取行和列位置！提前致谢！

# python - Python - 如何向整数/字符串添加零？

> ID：15164598
> 
> 赞同：0
> 
> 时间：2013-03-01T18:38:28.593
> 
> 标签：python

我不知道如何在 Python 中做到这一点。问题如下：例如，我有一个订单号，例如：

```
1
2
...
234567 
```

我只需要提取订单号的最后 4 位，如果订单号少于 4 位，我将用零替换。

所需的输出是这样的：

```
0001
0002
...
4567 
```

有什么线索吗？我对这个有点迷茫。

最好的祝福，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:41:08.263

试试这个：

```
>>> n = 234567
>>> ("%04d"%n)[-4:]
'4567' 
```

说明（[文档](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)）：

```
"%04d"%n --> get a string from the (d)ecimal n, putting leading 0s to reach 4 digits (if needed) 
```

但此操作保留所有数字：

```
>>> n = 7
>>> "%04d"%n
'0007'   
>>> n = 234567
>>> "%04d"%n
'234567' 
```

因此，如果您想要最后 4 位数字，只需从位置 -4 获取字符（即右侧的 4 个字符，在处理“切片表示法”时请参见[此处）：](http://docs.python.org/2/tutorial/introduction.html#strings)

```
>>> n = 234567
>>> ("%04d"%n)[-4:]
'4567' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:42:16.463

类似于以下内容：

```
>>> test = [1, 234567]
>>> for num in test:
        last4 = str(num)[-4:]
        print last4.zfill(4)

0001
4567 
```

# php - 在 ajax 调用后加载视图，CodeIgniter

> ID：15164599
> 
> 赞同：6
> 
> 时间：2013-03-01T18:38:31.773
> 
> 标签：php, ajax, codeigniter, controller

我有一个从 javascript 到控制器中的方法的 ajax 调用，控制器中的方法应该加载一个视图（比如，在屏幕上显示一个新页面），虽然一切看起来都很好，但新视图似乎没有加载屏幕上。我不能使用 header 或 windows.location，因为我正在传递一个数组变量，其中包含要在视图中使用的数据。

该页面在 Chrome 调试控制台的网络选项卡（预览子选项卡，同时选择 ajax）下可见。但主屏幕保持原样。

如果有人遇到过类似的问题，或者有解决方案，请帮助我。

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T18:57:43.910

好的，这就是你做错了什么。

当您使用 ajax 请求页面时，它不会返回该页面。

当你使用 $this->load->view('pagename',$datapassed); 它加载视图，这就是为什么你什么也看不到。

你要做的就是使用

```
$data=$this->load->view('pagename',$datapassed, TRUE); 
```

它会做的是，它将返回该页面并将其保存在 $data 之后，您可以使用打印它

```
$this->set_output($data); 
```

并在 ajax 结果中接收它并将其加载到 div 中。

如果你想刷新整个页面，你可以使用

```
$(body).html(result); 
```

您必须了解您需要通过在加载视图中提供第三个参数来发送 html 页面。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-17T07:43:15.047

在控制器类

```
function get_view_ajax()
{
   $data['username] = $_POST['username];
   $response = $this->load->view('radius/radius_corporate_graph',$data,TRUE);
   echo $response;
} 
```

在您发起 ajax 调用的视图文件中

```
$('#button').click(function(){
var username = $('#username').val();

$.ajax({
   type:'POST',
   url:"<?php echo base_url(); ?>controller_name/get_view_ajax/",
   data: "username="+username,
   success:function(msg){
    $("#div_result").html(msg);
   },
   error: function(result)
   {
      $("#div_result").html("Error"); 
   },
   fail:(function(status) {
      $("#div_result").html("Fail");
   }),
   beforeSend:function(d){
    $('#div_result').html("<center><strong style='color:red'>Please Wait...<br><img height='25' width='120' src='<?php echo base_url();?>img/ajax-loader.gif' /></strong></center>");
   }

  }); 
});

<div id="div_result">
<a href="#" id="button">Click here </a> 
```

在 get_view_ajax 函数中引用的控制器函数 (extra_info.php) 上要加载的另一个视图文件

```
<h1>This page is called from ajax function </h1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-21T01:13:13.610

请记住 dataType 必须是“html”

```
$.ajax({
        type: 'POST',
        url: '<?php echo base_url(); ?>/controllerName/functionName',
        dataType: "html",
        success: function (response) {
                   $("#oh").html(response);
                },
        error: function (error_) {
                    MYLOG(error_);
                }
       }); 
```

# php - Using traits over classes, why?

> ID：15164600
> 
> 赞同：4
> 
> 时间：2013-03-01T18:38:37.493
> 
> 标签：php, traits

This is how classes do it?

```
Class Main 
{
    $this->a = new A();
    $this->b = new B();
    $this->c = new C();

    $this->b->doTranslate($this->a->saySomething());
} 
```

And this is how traits do it, not?

```
Class Main {
    use A;
    use B;
    use C;

    $this->doTranslate($this->saySomething());
} 
```

I don't have much knowledge about traits at all, but by looking at new PHP 5.4 trait examples, they only seem to help in a single case. `A class only be extended once to use $this together, but we can use multiple traits.`

**Question 1:** Is it the only advantage of using traits over basic classes?

**Question 2:** If `trait A, B, and C` all have a function named `example()`, when I try `$this->example();` how PHP is going to determine which trait will be used? What's going to happen?

Additionally, instead of writing a wall of text; just provive me a short code example with a short brief that I can have a look and undertstand. I'm not familiar with traits and don't know what they truly are.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:56:50.043

You can do many things with traits. I used it in my framework for example as Singleton and Getter/Setter.

```
trait Singleton
{
    protected static $_instance;

    protected function __construct(){}

    public static function getInstance()
    {
        if (null === self::$_instance) {
            self::$_instance = new static();
        }
        return self::$_instance;
    }
} 
```

Another interesting use is for Aspect Oriented Programming. The answer would be to long to explain. Have a look [here](https://gist.github.com/commuterjoy/1476082) and [here](http://go.aopphp.com/).

Question 2: If the traits have the same method than there will be a fatal error. You have to use the `insteadof` operator for conflict resolution. Look [here](http://php.net/manual/en/language.oop5.traits.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T12:12:00.323

Traits are a mechanism for code reuse in single inheritance languages such as PHP. A Trait is intended to reduce some limitations of single inheritance by enabling a developer to reuse sets of methods freely in several independent classes living in different class hierarchies. Traits have been available in PHP since 5.4\. A trait is a PHP file that uses the trait keyword instead of class.One of the benefits of traits over classes and inheritance is the ability to use multiple traits inside one class. This is sometimes compared to multiple inheritance which is a feature PHP does not support.

A Trait is similar to a class, but only intended to group functionality in a fine-grained and consistent way. It is not possible to instantiate a Trait on its own. It is an addition to traditional inheritance and enables horizontal composition of behavior; that is, the application of class members without requiring inheritance.

Read full article from here [What are traits in PHP ?](https://laramust.com/post/what-is-tarit-in-php.html)

# css - CSS 按钮 - 文本不在按钮上

> ID：15164604
> 
> 赞同：0
> 
> 时间：2013-03-01T18:38:44.013
> 
> 标签：css

[我确实在http://www.cssbuttongenerator.com/](http://www.cssbuttongenerator.com/)的帮助下创建了一些 CSS 按钮，但由于某种原因，文本并未完全位于按钮上，而是穿过按钮的底部。 ![在此处输入图像描述](../Images/90c6584edb077495183204caa42e84da.png)

我认为这是由于我的一些主要 CSS 造成的？有什么方法可以覆盖它，我必须使用哪个属性？

CSS代码：

```
 <style type="text/css">
.classname {
    -moz-box-shadow:inset 0px 1px 0px 0px #fce2c1;
    -webkit-box-shadow:inset 0px 1px 0px 0px #fce2c1;
    box-shadow:inset 0px 1px 0px 0px #fce2c1;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffc477), color-stop(1, #fb9e25) );
    background:-moz-linear-gradient( center top, #ffc477 5%, #fb9e25 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffc477', endColorstr='#fb9e25');
    background-color:#ffc477;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #eeb44f;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #cc9f52;
}.classname:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fb9e25), color-stop(1, #ffc477) );
    background:-moz-linear-gradient( center top, #fb9e25 5%, #ffc477 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fb9e25', endColorstr='#ffc477');
    background-color:#fb9e25;
}.classname:active {
    position:relative;
    top:1px;
}
/* This imageless css button was generated by CSSButtonGenerator.com */
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:45:35.097

上面的代码没有任何问题，请参见这个 JS fiddle： http: [//jsfiddle.net/fQ6h7/](http://jsfiddle.net/fQ6h7/)必须是样式表中的其他内容，可能是同名的类或类似的东西？或者适用于所有按钮的东西？

```
<input type="submit" name="button" id="button" value="Submit" class="classname"> 
```

# ruby-on-rails - Rails Refinery 样式不会出现在生产中

> ID：15164606
> 
> 赞同：0
> 
> 时间：2013-03-01T18:38:51.530
> 
> 标签：ruby-on-rails, refinerycms

当我在生产环境中转到 Refinery pages 索引或编辑器时，我看不到大多数链接或按钮，因为没有出现任何 Refinery 样式。（但它们确实出现在我的开发机器上。）

![在此处输入图像描述](../Images/f6adeaffa798a73b0f784730ecb74fab.png)

有谁知道我可以做些什么来让这些样式和图像出现？

我的“config/refinery”目录中的所有配置文件都保持不变。

# ruby-on-rails - 使用方法调用在 Ruby on Rails 控制器中重定向

> ID：15164609
> 
> 赞同：0
> 
> 时间：2013-03-01T18:39:19.130
> 
> 标签：ruby-on-rails, ruby

这目前正在打破对控制器文件的测试。由于某种原因没有正确重定向：

```
def edit
  redirect_if_nil(@user)
end

def redirect_if_nil(user)
  if user.nil?
    redirect_to :register_invalid_token, notice: "Your token was invalid" and return
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:44:20.363

有两个错误。首先，`:register_invalid_token`不是有效的重定向选项。您应该传递一个选项哈希来组成路由或路由路径。

其次，`return`将返回`redirect_if_nil`，而不是控制器。因此它是没有用的。

假设`register_invalid_token_path`是路线：

```
def edit
  redirect_if_nil(@user)
end

def redirect_if_nil(user)
  unless user
    redirect_to register_invalid_token_path, notice: "Your token was invalid"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:43:10.360

代替：

```
redirect_to :register_invalid_token, notice: "Your token was invalid" and return 
```

至：

```
redirect_to :register_invalid_token, notice: "Your token was invalid" 
return 
```

# listview - ListView 上的线性布局

> ID：15164618
> 
> 赞同：1
> 
> 时间：2013-03-01T18:39:57.397
> 
> 标签：listview, android-linearlayout

首先对不起我的英语不好。我在android中有一个非常简单的应用程序。它有 4 个用于启动 ListView 的按钮。我想要做的是，当您按下列表项时，会打开一个新布局，其中包含从 Internet 下载的图像。我最新的问题，获取列表中的每个项目以打开布局。

```
this is my class for control the list

        public class precat extends ListActivity {
    public static ImageView imageView;
    EditText filterEditText;
        //ulo contains my links
    String[] urlo = {"links of my images"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.precat);
        imageView = (ImageView) findViewById(R.id.image_view);
        String[] precat = getResources().getStringArray(R.array.precat);
        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, precat);
        setListAdapter(adapter);
        filterEditText = (EditText) findViewById(R.id.filterText);
        filterEditText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                adapter.getFilter().filter(s.toString());
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
            }
        });
    }

    @Override
    protected void onListItemClick(ListView listView, View view, int position,
            long id) {

        super.onListItemClick(listView, view, position, id);
        Object o = getListAdapter().getItem(position);
        String url = urlo[position];

                //This method show the image. And for now it works XD
        Main.downloadFile(imageView, url);

    }
}

precat.xml is my xml file that contains the ListView an a ImageView to prove that I can see the image.

so... What can i do? 
```

# html - 使用纯 javascript 调整 html canvas 元素的大小

> ID：15164619
> 
> 赞同：0
> 
> 时间：2013-03-01T18:39:59.513
> 
> 标签：html, html5-canvas

我正在开发只使用 html5 画布元素和 javascript 的游戏。我需要能够重新调整它的大小，但不想使用任何库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:46:03.313

您可以通过将画布分配给变量来简单地更改画布的宽度和高度，并使用宽度和高度属性。

```
var canvas = document.getElementById("ID of canvas here");
canvas.width = 500;
canvas.height = 500; 
```

# jquery - 小脚本产生冲突

> ID：15164621
> 
> 赞同：0
> 
> 时间：2013-03-01T18:40:12.383
> 
> 标签：jquery

这是我的脚本。它适用于所有浏览器。但。在浏览器中，火狐是不断加载链接图片的。加载图像后。也就是favicon旋转下载过程在哪里。如何阻止它。我不知道。

由于这个脚本不起作用。我重复。当图片完全加载脚本继续工作......请帮我解决这个问题。

```
$(function(){
LoadImage();
function LoadImage(){
        var img_url = $("#img_url").val();
        if(img_url == ''){
            img_url = "preload_image/images/me-banner.png";
        }
        var img = new Image();
        $(img).load(function(){
            $(this).hide();
            $('#img_holder').removeClass('loadit').append(img);
            $(img).fadeIn();

        }).attr('src',img_url);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:51:04.670

代码是为了什么？图标？如果它是针对网站图标的，那么您应该做一些更有效的事情，这将很容易跟踪任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:46:48.493

如果您在准备好的文档中这样尝试会怎样

```
$(document).ready(function() {
    LoadImage();
});

// and outside the document ready
function LoadImage() {
    var img_url = $("#img_url").val();
    if(img_url == ''){
        img_url = "preload_image/images/me-banner.png";
    }
    var img = new Image();
    $(img).load(function(){
        $(this).hide();
        $('#img_holder').removeClass('loadit').append(img);
        $(img).fadeIn();

    }).attr('src',img_url);
} 
```

你的函数看起来像它再次调用自己

# sms - 如何使用 Google 脚本和 Google 电子表格发送 SMS（文本）消息

> ID：15164624
> 
> 赞同：3
> 
> 时间：2013-03-01T18:40:21.410
> 
> 标签：sms, google-apps-script

[这个 Google Script 页面](http://productforums.google.com/forum/#!forum/apps-script)说 stackoverflow 是发布 Google Script 问题的地方，所以我在这里。

我想使用 Google 脚本自动向 Google 电子表格中的所有手机号码发送短信 (SMS)。

[可以按照本教程](https://developers.google.com/apps-script/articles/sending_emails)将电子邮件发送到电子表格中的所有电子邮件地址，但是当我尝试在电子表格中使用电话号码代替电子邮件地址时，我收到一个错误，即这些不是有效的电子邮件地址。很公平。如果我知道与每个手机号码相关联的手机公司，我可以将这些电话号码转换为电子邮件地址（这是一个常见的选项，有几个指南解释它，[比如这个](http://www.speedofcreativity.org/2011/08/27/use-a-google-docs-spreadsheet-to-send-text-message-alerts-to-students-gct/)），但我没有那个手机提供商信息。

我当然不是第一个尝试从电脑而不是手机自动发送短信的人。 [这个问题](https://stackoverflow.com/questions/4269/programmatic-sms)是询问它的更流行（但也更老）的问题之一。 [Twilio](http://www.twilio.com/sms/pricing)在我浏览过的几个答案中弹出，但这不是一项免费服务（虽然它很便宜，我承认。）不过，谷歌有免费选项，所以我想我会尝试这些。 [Google Voice 可以发送免费短信](http://www.google.com/mobile/sms/voice/)，您甚至可以[通过 Gmail](http://www.google.com/mobile/sms/mail/)发送免费短信。

我知道很多人都在[搜索 API 以使用 Google 服务发送短信](https://stackoverflow.com/questions/1668619/is-there-a-google-voice-api)，但似乎没有。有一些有趣的项目，如[google-voice-java](http://code.google.com/p/google-voice-java/)，但这些项目比任何事情都更有效。

因此，我想我只需使用一个 Google 服务（Google Docs 电子表格）通过使用第 3 个（Google Script）来调用另一个（Google Voice 或 GMail）。有没有办法做到这一点？有没有办法让谷歌脚本发送短信？例如，`MailApp.sendEmail`发送电子邮件 - 是否有发送短信 (SMS) 的邮件？如果没有，是否可以`MailApp.sendEmail`通过按摩/陪审团操纵发送文本（无需将电话号码转换为电子邮件地址，如 [phonenumber]@txt.att.net）？是否可以使用其他脚本选项，可能与 Google Chat 相关（因为 GMail 短信选项与 Google Chat 相关）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-21T00:55:21.577

我最近加入了一个团队，该团队制作了一个名为[Text gBlaster](https://chrome.google.com/webstore/detail/text-gblaster-sms-texting/pbbgimdnldlfkdichlcaonmmbfnddibh?utm_source=permalink)的 Google 插件，它完成了我相信您所要求的。这很容易，所以请随意尝试。

除此之外，如果您想在不通过运营商的电子邮件服务发送的情况下自己进行操作（Bill 上面提到过，这是一个很好的解决方案），那么您将需要使用像 Twilio 这样的第三方（我们正在使用） . 您基本上使用电子表格将请求发送到 Twilio，然后 Twilio 将消息发送出去。

如果您走这条路，这里有一些可以与 Twilio 一起使用的基本代码。您将需要定义 toNumber、bodyMessage、SID、Token 和 twilioNumber。toNumber 是接收消息的号码，bodyMessage 是文本消息的正文，SID 和令牌在您创建 Twilio 帐户时提供给您，twilioNumber 是您通过 Twilio 拥有的用于发送消息的电话号码从。

```
 function sendSms(toNumber,bodyMessage, SID, Token, twilioNumber) {
    var url = "https://api.twilio.com/2010-04-01/Accounts/" +            // URL used to enter correct Twilio acct
      SID + "/SMS/Messages.json";                                           
    var options = {                                                      // Specify type of message             
      method: "post",                                                    // Post rather than Get since we are sending
      headers: {                                                         
        Authorization: "Basic " + 
        Utilities.base64Encode(SID + ":" + Token)
      },
      payload: {                                                         // SMS details
        From: twilioNumber,
        To: toNumber,
        Body: bodyMessage
      }
    };
    var response = UrlFetchApp.fetch(url, options);                   // Invokes the action
    Logger.log(response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T21:08:36.457

It depends on the cell phone carrier. To send a text to a Sprint number, for example, put the message in an email addressed in this manner:

2013456789@messaging.sprintpcs.com

(yes, they still have the "pcs" in the domain name...)

# git - 为什么执行 shell 脚本时 cmd.exe 窗口中会出现 git 提示？

> ID：15164625
> 
> 赞同：4
> 
> 时间：2013-03-01T18:40:27.867
> 
> 标签：git, cmd

当我执行一个 shell 脚本——任何目录中的任何 shell 脚本——我会收到一个“欢迎使用 git”的问候语。它似乎没有做任何事情（脚本按预期运行），但很奇怪，我想了解它的来源。

例如，这里我有一个回显短字符串的 shell 脚本，这就是我所看到的： ![截屏](../Images/2a31ab8c92b6744fa531b959c3e0de14.png)

这是 vanilla cmd.exe（在安装了 UnixUtils 的系统上）。我确实在其他目录中使用了 git，但不是在这里。会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T22:37:18.630

好吧，就像 Windows 上的任何其他文件一样，当您尝试执行它时，Windows 将尝试调用其标准文件处理程序。如果 msysgit 附带的 bash 是为`.sh`文件设置的（默认情况下不是这样），那么输出将与您显示的完全相同。

正在显示的输出存储在`<msysgit-folder>\etc\motd`其中，由位于 的 shell 配置文件加载`<msysgit-folder>\etc\profile`。

您还可以通过将 Bash 更改为没有参数的启动来摆脱所有 Git 特定的东西`--login`（默认情况下在 Git Bash 快捷方式中提供）。您可能需要调整注册表以在`.sh`文件处理程序中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:24:07.177

您直接调用 Bash 脚本的事实，即

```
foo.sh 
```

而不是

```
bash foo.sh 
```

让我相信你实际上是在运行 Bash 而不是`cmd.exe`. 话虽如此，您可以像这样检查[启动文件](http://linux.die.net/man/1/bash)

```
grep 'Welcome to Git' /etc/profile ~/.bash_profile ~/.profile ~/.bashrc 
```

# silverlight - 为什么 WP8 LongListSelector 会错误地重用 CheckBox 的 Checked 状态？

> ID：15164627
> 
> 赞同：5
> 
> 时间：2013-03-01T18:40:35.947
> 
> 标签：silverlight, checkbox, windows-phone-8, longlistselector

我有一个带有以下模板的 WP8 LongListSelector：

```
 <DataTemplate x:Key="ItemTemplate">
        <Grid Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="110"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <controls:BlockImageControl 
                        Grid.Column="0"
                        Width="110"
                        Height="110"
                        Background="Transparent" />
            <TextBlock x:Name="Name" 
                            Grid.Column="1"
                            Text="{Binding ScreenName}" 
                            FontSize="{StaticResource PhoneFontSizeLarge}"
                            FontWeight="Bold"
                            VerticalAlignment="Center"/>
            <CheckBox x:Name="Unblock" Grid.Column="2" VerticalAlignment="Center"
                      Tap="BlocksList_Tap"
                      IsChecked="false"
                      />
        </Grid>
    </DataTemplate> 
```

如您所见，每个单元格项目的末尾都有一个复选框，使用户可以选择多个项目。IsChecked 默认为 false。

问题是 LongListSelector 似乎正在缓存我的复选框的 Checked 状态。如果我检查第一个项目，然后中途向下滚动，大约 30 个项目后，我会看到另一个我没有选择的项目被选中。其余的绑定工作。就好像它忽略了模板中的“IsChecked”属性。我尝试将 IsChecked 属性绑定到属性，但没有运气。

有谁知道这是否是一个错误，如果不是，我该如何纠正这种行为？

谢谢！

![在此处输入图像描述](../Images/5348d64a3748978eb8207d2274e45a3d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T20:51:22.843

不是一个错误，虽然它一开始可能看起来像一个错误。你看到的是ui虚拟化的效果，基本上LongListSelector回收数据模板而不是创建新的模板来提高性能。回收的一个已知副作用是，如果您的数据模板包含保持自己状态的控件，例如 CheckBox，则该状态将延续到新项目。

要解决这个问题，您需要在外部管理控制状态，即在视图模型中。在您的特定情况下， CheckBox 的 IsChecked 属性必须绑定到视图模型的属性。并确保使用双向绑定。

# function - 类似带括号的函数类型之间的区别

> ID：15164630
> 
> 赞同：3
> 
> 时间：2013-03-01T18:40:49.913
> 
> 标签：function, haskell, types, currying

我真的很喜欢 Haskell 中的函数类型。给出了两种函数的类型，我无法解释它们之间的真正区别是什么。

```
a :: Int -> (Int -> (Int -> (Int -> Int)))

b :: (((Int -> Int) -> Int) -> Int) -> Int 
```

我还是不明白这一点。我知道柯里化的目的是什么——但在这个例子中我看不到柯里化的概念！

function a: an`Int`被传入，结果是 another 接受一个`Int`... 以此类推。

功能 b：这与功能 A 有何不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:49:08.410

也许最好的办法是考虑两个更简单的函数：

```
f :: a -> (b -> c)
g :: (a -> b) -> c 
```

让我们依次看看这些功能。

第一个函数 ,`f`接受一个类型的参数`a`，并返回一个类型的函数`b -> c`。换句话说，假设`x :: a`、`y :: b`和，您可以编写如下内容`z :: c`：

```
f :: a -> (b -> c)
f x = f'
  where f' :: b -> C
        f' y = z 
```

另一种书写签名的`f`方式如下：

```
f :: a -> b -> c 
```

这是有效的，因为默认情况下我们绑定`->`到右侧。它还为我们提供了另一种等效的理解方式`f`：可以将其视为一个函数，该函数接受两个类型为`a`and的参数，`b`并产生一个类型为 的结果`c`。

第二个函数`g`接受一个参数，它是一个类型为 的函数`a -> b`。

```
g :: (a -> b) -> c
g h = z
  where h :: a -> b 
```

因此，两者是非常不同的。

将此应用于您的函数，第一个函数采用 4 个类型值`Int`并返回一个`Int`. 第二个函数接受一个 type`((Int -> Int) -> Int) -> Int`的函数，这个函数接受第三个 type 的函数`(Int -> Int)`并产生一个`Int`，依此类推。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:47:36.360

函数`b`将函数作为其参数 - 它不会产生函数作为其结果。这是一个很大的区别：

`a 42`将产生一个带有附加参数的函数。`b 42`将产生类型错误，因为`42`它不是函数。`b myfun`where `myfun`has type`((Int -> Int) -> Int) -> Int)`将产生一个`Int`. `a myfun`将导致类型错误，因为`myfun`不是整数。

# c# - 如何创建一个类的对象，其中类名存储在 C# 中的字符串变量中

> ID：15164632
> 
> 赞同：2
> 
> 时间：2013-03-01T18:40:53.440
> 
> 标签：c#

我有一个关于在 C# 中创建类的对象的问题，其中类名存储在字符串变量中

例如。字符串 str="飞行员"

```
As we create object of the class like this
ClassName objectname=new ClassName(); 
```

由于某种原因而不是 ClassName 我需要使用存储我的类名的字符串变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:43:53.750

您将使用[`Type.GetType(string)`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)然后[`Activator.CreateInstance(Type)`](http://msdn.microsoft.com/en-gb/library/wccyzw83.aspx)：

```
Type type = Type.GetType(str);
object instance = Activator.CreateInstance(type); 
```

笔记：

*   类型名称必须包含命名空间，例如`Foo.Bar.SomeClassName`
*   除非您指定程序集限定的类型名称，`Type.GetType(string)`否则只会查看当前正在执行的程序集和`mscorlib`. 如果要使用其他程序集，请使用程序集限定名称或[`Assembly.GetType(string)`](http://msdn.microsoft.com/en-gb/library/y0cd10tb.aspx)改用。
*   这假设该类型有一个公共的无参数构造函数
*   您的变量类型必须是，因为变量的类型是*编译*时`instance`所需的一部分

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:43:23.953

这是一个例子。您可能需要指定完整的命名空间路径。

```
Namespace.Pilot config = (Namespace.Pilot)Activator.CreateInstance(Type.GetType("Namespace.Pilot")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:44:08.290

您将使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.110%29.aspx)来这样做：

```
var type = Assembly.Load("MyAssembly").GetTypes().Where(t => t.Name.Equals(str));
return Activator.CreateInstance(type); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:44:38.113

您可以通过使用来做到这一点`Activator`：

```
var type = "System.String";
var reallyAString = Activator.CreateInstance(
        // need a Type here, so get it by type name
        Type.GetType(type), 
        // string's has no parameterless ctor, so use the char array one
        new char[]{'a','b','c'});
Console.WriteLine(reallyAString);
Console.WriteLine(reallyAString.GetType().Name); 
```

输出：

```
abc
String 
```*

# jsf - 如何将 Primefaces 单元格编辑与 selectonemenu 与对象一起使用

> ID：15164635
> 
> 赞同：1
> 
> 时间：2013-03-01T18:41:01.393
> 
> 标签：jsf, primefaces

我有一个带有 SelectItem 类型对象列表的 selectOneMenu，如何在一个单元格编辑中使用带有对象列表的 selectOneMenu。渲染页面时加载数据但更改单元格编辑中的 Sucursales 显示以下 util.SucursalUtil @ 52d68a，我该如何显示适当的值。

```
<p:column headerText="Sucursal" style="width:25%">
    <p:cellEditor>
        <f:facet name="output">
            <h:outputText value="#{car.nombreSucursal}" />
        </f:facet>
        <f:facet name="input">
            <h:selectOneMenu value="#{car.nombreSucursal}" style="width:100%">
            <f:selectItems value="#{clientesMB.itemsSucursal}" var="man" itemLabel="#{man}"
                           itemValue="#{man}" />
            </h:selectOneMenu>
        </f:facet>
    </p:cellEditor>
</p:column> 
```

`private List<SelectItem> itemsSucursal = new LinkedList<SelectItem>();`

* * *

* * *

现在代码看起来像这样

```
<p:column headerText="Sucursal" style="width:25%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.nombreSucursal}" /></f:facet>  
                                    <f:facet name="input">  
                                        <h:selectOneMenu value="#{car.sucBanc}" style="width:100%" converter="sucursalConverter">  
                                            <f:selectItems value="#{clientesMB.itemsSucursal}"/>  
                                        </h:selectOneMenu>  
                                    </f:facet>  
                                </p:cellEditor>  
                            </p:column> 
```

* * *

```
 <p:ajax event="cellEdit" listener="#{clientesMB.modiCell}" update=":form2:formgen" /> 
```

* * *

```
 public void modiCell(CellEditEvent event) throws Exception {
    try {
        Object oldValue = event.getOldValue();
        Object newValue = event.getNewValue();
        //SucursalUtnewValueil c = (SucursalUtil) event.getNewValue();
        int row = event.getRowIndex();
        this.empClienteEditar.getCuentasBancarias().get(row).setNombreSucursal(newValue.toString());
        if (newValue != null && !newValue.equals(oldValue)) {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Cell Changed", "Old: " + oldValue + row + ", New:" + newValue);
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, "Error: modiCliente() " + e.getMessage());

    }
} 
```

* * *

那是问题，当第一次更改值时在表格中显示对象的 id（一个数字），不显示标签......

# java - 除法后获取数字中的所有小数位

> ID：15164636
> 
> 赞同：7
> 
> 时间：2013-03-01T18:41:02.763
> 
> 标签：java, formatting, bigdecimal

我目前正在使用 BigDecimal，它给了我更多的小数，但对于我想要做的事情来说还远远不够。我需要能够一直到达 10^6 位。这是我当前的代码

```
BigDecimal num = new BigDecimal(103993/33102.0);
    pw.println(num.toString()); 
```

它输出**3.14159265301190249175533608649857342243194580078125**

这个数字实际上有更多的小数：[http ://www.wolframalpha.com/input/?i=103993%2F33102](http://www.wolframalpha.com/input/?i=103993%2F33102)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T18:50:16.853

评估时，您会失去精度：

```
103993/33102.0 
```

作为双师。实际上，如下：

```
BigDecimal num = new BigDecimal(103993/33102.0); 
```

相当于：

```
double d = 103993/33102.0;
BigDecimal num = new BigDecimal(d); 
```

相反，使用：

```
int scale = 100;
BigDecimal num1 = new BigDecimal(103993);
BigDecimal num2 = new BigDecimal(33102);
System.out.println(num1.divide(num2, scale, RoundingMode.HALF_UP).toString()); 
```

**输出：**

```
3.1415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737296840070086399613316415926530119026040722614947737 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:47:10.527

问题是你如何制作你的号码。在类参与之前，它`103993/33102.0`被评估为双精度浮点表达式 ( `double`) 。`BigDecimal`您应该制作单独的`BigDecimal`对象并使用`BigDecimal.divide`来获得您想要的数字。

由于您想要准确的结果，因此我可能会在开始时将您的两个数字都作为整数传递。

即使这样做了，我怀疑你能否达到 10^6 位。您可能需要实现自己的除法算法才能达到该级别，因为任意精度数学的任何合理实现都将在该点之前很久停止（至少默认情况下）。

# javascript - 如何在 MongoDB MapReduce 中生成累积结果

> ID：15164637
> 
> 赞同：3
> 
> 时间：2013-03-01T18:41:04.873
> 
> 标签：javascript, mongodb, mapreduce

我刚刚开始在 mongo 中使用 MapReduce，并使用复合键（日期，候选人）进行查询，该查询返回与该键关联的值（当天该候选人的总票数）。我真正想要的是每个日期的票数都是累积的。也就是说，对于每个日期/候选人键，该值是在该日期和之前为该候选人投出的所有选票的总和。

这是我当前的代码：

**示例输入：**

```
{
    "interaction" : {
        "type" : "draft",
        "parameters" : {
            "value" : [
                {
                    "candidate" : 453510,
                    "votes" : 2
                },
                {
                    "candidate" : 325786,
                    "votes" : 2
                }
            ]
        }
    },
    "created_at" : 1360796255
} 
```

**地图：**

```
var mapFn = function() {
  var right = function(str, n) {
    return str.substring(str.length, str.length - n);
  }
  var toDate = function(epochTimeSec) {
    var d = new Date(1000 * epochTimeSec);
    var yr = d.getYear() + 1900;
    var mn = d.getMonth() + 1;
    var dt = d.getDate();
    return '' + right('0000' + yr, 4) + '-' + right('00' + mn, 2) + '-' + right('00' + dt, 2);
  }

  for(var i=0; i<this.interaction.parameters.value.length; i++)
  {
    vote = this.interaction.parameters.value[i];
    var creationDate = toDate(this.created_at);
    var votedCandidate = vote.candidate;
    emit( {date: creationDate, candidate: votedCandidate}, { quantity: candidate.quantity } );
  }
} 
```

**减少：**

```
var reduceFn = function(key, values) {
  var sum = 0;
  values.forEach(function(doc) {
    sum += doc.quantity;
  });
  return { quantity: sum };
} 
```

**输出：**

```
db.collection_mr.drop();
db.collection.mapReduce(mapFn, reduceFn, { out: 'collection_mr' } );

function printData(r) {
  print(r._id.date + ", " + r._id.candidate + ", " + r.value.quantity);
}

db.collection_mr.find().forEach(printData); 
```

感谢您的任何帮助！

**编辑**

作为对评论的回应，我提供了一个示例输入。澄清一下——上面的代码正确地返回了每个日期所有投票的总和。但是，我想对其进行修改，以返回每个日期在该日期或之前投票的所有投票总数。

回答 Asya Kamsky，这是临时手动运行的，因此需要在输入日期（可能不是当前日期）之前输出所有数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:10:13.447

使用聚合框架而不是 mapReduce 可以更轻松地解决该问题。[手册](http://docs.mongodb.org/manual/applications/aggregation/)摘录：

> MongoDB 聚合框架提供了一种无需使用 map-reduce 即可计算聚合值的方法。虽然 map-reduce 功能强大，但对于许多简单的聚合任务（例如合计或平均字段值）来说，它通常比必要的难度更大。

此聚合命令返回您的预期结果：

```
// target date as unix timestamp, example: 2013-02-28T23:59:59)
targetDate = Date.UTC(2013,1,28,23,59,59)/1000; // month -1 !!

db.xx.aggregate([
    // select documents created_at up to target date
    // note: this match uses an index, if defined on created_at
    { $match: { 
        "created_at": { $lte: targetDate }
    }},
    // unwind the "value" array
    { $unwind: "$interaction.parameters.value" },
    // group by candidates, sum up votes
    { $group: { 
        _id: "$interaction.parameters.value.candidate",
        votes: { $sum: "$interaction.parameters.value.votes" }
    }},
]) 
```

结果：

```
{
    "result" : [
        {
            "_id" : 325786,
            "votes" : 2
        },
        {
            "_id" : 453510,
            "votes" : 2
        }
    ],
    "ok" : 1
} 
```

# .htaccess - 如何从特定的动态页面重写到我选择的不存在的目录？

> ID：15164640
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:41:16.163
> 
> 标签：.htaccess

我正在尝试根据最初动态生成的文件包含的主题，使用我的 htaccess 文件将各种特定的已知动态 URL 重定向到我选择的各种“不存在”目录。以下是我的最新尝试（仍然无法正常工作）。

```
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteCond %{QUERY_STRING} ^ID=([8][3])$

RewriteRule ^comedy-routines/television/just-plane-silly\.html$ /show_rss_item.php?%1 
```

我想做什么：

我有两个目标：

1) 当有人键入“show_rss_item.php?ID=83”时，他们应该会看到他们的 URL 栏读出：comedy-routines/television/just-plane-silly.html

2) 当有人输入comedy-routines/television/just-plane-silly.html

他们应该看到由 show_rss_item.php?ID=83 创建的“幕后”内容

我在网上找到了很多关于在重写规则中使用变量的信息，但请注意，这不是我在这里所做的，尽管原始内容是动态生成的。就我而言，我只是想为我的数据库中的每篇文章硬编码一种“一次性”重写规则，这样我就可以在我的 htaccess 文件中分配一个适当的虚拟人类可读目录位置，而不是让网站访问者在浏览器地址栏中看到动态 URL。

在我的例子中，这些动态 URL 始终采用以下形式：show_rss_item.php?ID=article_number_here。

几周以来，我一直在尝试这样做。事实上，我刚刚输给了一位 Guru “专业人士” 50 美元，经过一个多小时的交谈后，他发现对这个主题的了解比我还少，最后建议我尝试 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:43:44.220

你在这里有两条规则，重定向`show_rss_item.php?ID=83`到`.../just-plane-silly.html`

```
RewriteCond %{QUERY_STRING} ^ID=83$
RewriteRule ^/?show_rss_item.php$ /comedy-routines/television/just-plane-silly.html [R,L] 
```

并显示真实内容，如果您收到请求`.../just-plane-silly.html`

```
RewriteRule ^/?comedy-routines/television/just-plane-silly\.html$ /show_rss_item.php?ID=83 [L] 
```

# html - 灯箱 2.51 不工作。我点击缩略图并在新页面中打开大图

> ID：15164645
> 
> 赞同：1
> 
> 时间：2013-03-01T18:41:39.253
> 
> 标签：html, image, lightbox

这个灯箱在踢我的屁股。我正在尝试使用 2.51，当我单击缩略图时，它只会在另一页而不是灯箱上打开大图像。我不确定我做错了什么。我很好奇你是否知道我哪里出错了。我将 rel="lightbox" 添加到所有链接属性，但它仍然不起作用。感谢您的帮助。这是编码：

网址：[http ://www.traydius.com/html/digital_thumb_PAGE4.html](http://www.traydius.com/html/digital_thumb_PAGE4.html)

```
<script src="js/jquery-1.7.2.min.js"></script>
 <script src="js/lightbox.js"></script>
 <link href="css/lightbox.css" rel="stylesheet" />

<script type="text/javascript" src="js/prototype.js"></script>
 <script type="text/javascript" src="js/scriptaculous.js?load=effects,builder"></script>
 <script type="text/javascript" src="js/lightbox.js"></script>
 <link rel="stylesheet" href=" css/lightbox.css" type="text/css" media="screen" />
 <script type="text/javascript">
 <!--
 function MM_swapImgRestore() { //v3.0
 var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
 }
 function MM_preloadImages() { //v3.0
 var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
 var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
 if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
 }

function MM_findObj(n, d) { //v4.01
 var p,i,x; if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
 d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
 if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
 for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
 if(!x && d.getElementById) x=d.getElementById(n); return x;
 }

function MM_swapImage() { //v3.0
 var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
 if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
 }
 //-->
 </script>
 <style type="text/css">
 <!--
 .style1 {
 font-family: "Times New Roman", Times, serif
 }
  .style4 {
 font-family: "Times New Roman", Times, serif;
 font-weight: bold;
 font-size: 20px;
 }
 .style6 {
 font-size: 20px
 }
 -->
 </style>
 </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T19:12:55.160

Sorry for replying on a verry old topic. It seems that lightbox doesn't load the images if you display them by using the "[gallery link" tag in the WP post.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T04:13:46.240

如果您使用的是 Wordpress，则可能是另一个插件出错或主题的页脚文件冲突。

请参阅此链接： [http ://wordpress.org/support/topic/2011-gallery-images-open-in-new-window-not-lightbox?replies=23](http://wordpress.org/support/topic/2011-gallery-images-open-in-new-window-not-lightbox?replies=23)

*   由于永久链接问题，灯箱可能不会出现，请转到设置>>永久链接并将永久链接重置为“帖子名称”，保存更改>清除浏览器缓存并重试

*   插件兼容性问题：转到插件选项卡并停用所有插件（包括 NextGEN）并仅重新激活 NextGEN。如果可行，请一次重新激活所有其他插件，直到它再次停止工作以查找插件冲突

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T16:01:45.253

Lightbox 2.51 仅使用 Jquery...

擦除这些行 // script type="text/javascript" src="js/prototype.js">

// 脚本类型="text/javascript" src="js/scriptaculous.js?load=effects,builder">

// 脚本类型="text/javascript" src="js/lightbox.js">

// 链接 rel="stylesheet" href="css/lightbox.css" type="text/css" media="screen" />

# python - Python：如何使用 Python 访问 mp3 文件的元数据？

> ID：15164646
> 
> 赞同：1
> 
> 时间：2013-03-01T18:41:41.457
> 
> 标签：python, file-io, metadata

假设我想查看艺术家姓名？或者添加 BPM 信息？我可以使用哪些 Python 工具来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:44:23.423

有一个名为[Python-ID3](http://id3-py.sourceforge.net/)的模块正是这样做的。如果你在 Debian/Ubuntu 机器上，它的包名是`python-id3`，并且它的网站上有示例代码：

```
from ID3 import *
try:
    id3info = ID3('/some/file/moxy.mp3')
    print id3info
    id3info['TITLE'] = "Green Eggs and Ham"
    id3info['ARTIST'] = "Moxy Früvous"
    for k, v in id3info.items():
        print k, ":", v
except InvalidTagError, message:
    print "Invalid ID3 tag:", message 
```

# extjs - 成功登录后ExtJS mvc加载视图

> ID：15164649
> 
> 赞同：0
> 
> 时间：2013-03-01T18:41:58.223
> 
> 标签：extjs, extjs-mvc

我正在尝试使用 MVC 在 ExtJS 中开发应用程序。设计应用程序的目的是： 1\. 创建一个登录页面以进行身份​​验证 2\. 成功登录后，我必须在单个页面中显示 3 个网格。这 3 个网格有不同的商店和模型。

我能够设计登录页面，但在登录后我在进入下一个视图时遇到问题。=====>控制器/Login.js

```
Ext.define('MyApp.controller.Login', {
    extend: 'Ext.app.Controller',

views: ['Login'],

    refs: [
        {
            ref: 'viewportmain',
            selector: 'viewportmain'
        }
      ],

    init: function () {
        this.control({
        'viewport > panel': {
                render: this.onPanelRendered
            },

            'button[action=submitLogin]': {
                click: this.submitLoginForm
            }
        });
    },

onPanelRendered: function() {
        console.log('The panel was rendered');
    },

    submitLoginForm: function (button) {
///// DO NOT BOTHER ABOUT LOGIN AUTHENTICATION PROCESS

        console.log('submitLoginForm function');
       // var view = Ext.create('MyApp.view.Order', {});

        var OrderController = this.getController('MyApp.controller.Order');
        OrderController.showNext(button);
// I HAVE TRIED CERTAIN WAYS IN COMMENTED SECTION
       // var view1 = OrderController.getOrderView();
       // var form = button.up('form').getForm();
        //var view1 = this.getOrder();
        var form = button.up('form').getForm();
        form.owner.up('viewport').getLayout().next();
        //this.getViewportmain();
    console.log('The ');

    }

}); 
```

======> 控制器/Order.js

```
Ext.define('MyApp.controller.Order', {
    extend: 'Ext.app.Controller',
    alias: 'controller.order',

    stores:['Order'],
    models:['Order'],
    views: ['Order'],
    init: function () {
        this.getOrderStore().load();

    },

    showNext: function(button) {

        var view = Ext.create('MyApp.view.Order');
        view.show();

    }

}); 
```

=======> 视图/viewport.js

```
Ext.define('MyApp.view.Viewport', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.viewportmain',

    requires: [
        'MyApp.view.Login',
        'MyApp.view.Order',
        'MyApp.view.DisplayGrids'
    ],

    layout: 'fit',

    items: [{
        xtype: 'login'
    }, {
        xtype: 'form',
        layout: 'fit',
        title: 'new form'
    }]
}); 
```

=======> app.js

```
Ext.Loader.setConfig({enabled:true});

Ext.application({
    name: 'MyApp',

    appFolder: 'App',

    models:['Order'],
    stores:['Order'],
   controllers: [
        'Login'//, 'Order'
    ],

    autoCreateViewport: true
}); 
```

我正在尝试使这些网格组合在公共面板中 ========> view/DispalyGrid.js

```
Ext.define('MyApp.view.DisplayGrids' ,{
    extend: 'Ext.form.Panel',

    alias: 'widget.displaygrids',

    layout: 'fit',

    items: [{
      xtype: 'order'
    }]
}); 
```

我试图从 DisplayGrid 调用 Order，最终给出错误，所以我尝试直接使用视图/订单。

请指导我，我一直在尝试这个东西，但我做错了。我试过[这个](https://stackoverflow.com/questions/8248643/extjs-4-how-to-create-and-display-a-new-controller-view-from-another-controller)，但每次它都给我错误

```
Cannot read property 'buffered' of undefined 
```

提前致谢。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:03:06.250

好吧，一个问题是您正在使用`layout: 'fit'`但随后尝试将两个项目放入视口中。`layout: 'fit'`用于包含应该“适合”父级主体的单个组件。如果您的登录表单是一个窗口组件，它不需要是视口的子项。使用应用程序的[init 模板方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-init)来实例化登录表单并将回调附加到表单窗口的`close`事件。在回调中，您将需要`load()`您的商店和`show()`“DisplayGrids”视图。您需要将商店设置为，`autoload: false`以便在您登录之前它不会尝试加载。

更好的是：不要将整个事情作为一项任务来处理。把它分解。使用登录表单创建一个视口，当它关闭时，会显示一个带有一些纯文本的面板。在你开始工作*之后*，你就可以开始弄乱你的商店和网格——否则，你很可能会遇到多种干扰，从而降低你有效完成工作的能力（比如`cannot read property 'buffered'`错误消息。）

# android - Android应用程序关闭时没有响应

> ID：15164651
> 
> 赞同：2
> 
> 时间：2013-03-01T18:42:06.637
> 
> 标签：android, surfaceview, forceclose

我正在开发一款安卓游戏，当我关闭应用程序时它崩溃了。我认为这是因为我正在使用空画布进行渲染。当我进行空检查时，程序不会崩溃，但在关闭后不会重新打开。这是我的线程的运行：

```
public void run() {
    Canvas canvas;
    Log.d(TAG, "Starting game loop");

    long beginTime;     // the time when the cycle begun
    long timeDiff;      // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 

    sleepTime = 0;

    while (running) {
        canvas = null;
        // try locking the canvas for exclusive pixel editing
        // in the surface
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0;  // resetting the frames skipped
                // update game state 
                this.gamePanel.update();
                // render state to the screen
                // draws the canvas on the panel
                this.gamePanel.render(canvas);              
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int)(FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    // if sleepTime > 0 we're OK
                    try {
                        // send the thread to sleep for a short period
                        // very useful for battery saving
                        Thread.sleep(sleepTime);    
                    } catch (InterruptedException e) {}
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                    // we need to catch up
                    this.gamePanel.update(); // update without rendering
                    sleepTime += FRAME_PERIOD;  // add frame period to check if in next frame
                    framesSkipped++;
                }
            }
        } finally {
            // in case of an exception the surface is not left in 
            // an inconsistent state
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }   // end finally
    }
} 
```

这是表面类中的相关方法。

```
 @Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // at this point the surface is created and
    // we can safely start the game loop
    thread.setRunning(true);
    thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    Log.d(TAG, "Surface is being destroyed");
    // tell the thread to shut down and wait for it to finish
    // this is a clean shutdown
    boolean retry = true;
    while (retry) {
        try {
            thread.setRunning(false);
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
            // try again shutting down the thread
        }
    }
    Log.d(TAG, "Thread was shut down cleanly");
} 
```

空检查是否正确，我只是缺少恢复活动的方法？

没有 nullcheck 时的 Logcat：

```
03-01 10:37:19.557: E/AndroidRuntime(25129): FATAL EXCEPTION: Thread-16380
03-01 10:37:19.557: E/AndroidRuntime(25129): java.lang.NullPointerException
03-01 10:37:19.557: E/AndroidRuntime(25129):    at org.awesome.AndroidGame.MainGamePanel.render(MainGamePanel.java:192)
03-01 10:37:19.557: E/AndroidRuntime(25129):    at org.awesome.AndroidGame.MainThread.run(MainThread.java:73)
03-01 10:37:23.357: E/BitmapFactory(25280): Unable to decode stream: java.io.FileNotFoundException: /level_1_1.png: open failed: ENOENT (No such file or directory)
03-01 10:37:36.097: E/AndroidRuntime(25280): FATAL EXCEPTION: Thread-16395
03-01 10:37:36.097: E/AndroidRuntime(25280): java.lang.NullPointerException
03-01 10:37:36.097: E/AndroidRuntime(25280):    at org.awesome.AndroidGame.MainGamePanel.render(MainGamePanel.java:192)
03-01 10:37:36.097: E/AndroidRuntime(25280):    at org.awesome.AndroidGame.MainThread.run(MainThread.java:73)
03-01 11:02:49.227: E/AndroidRuntime(26150): FATAL EXCEPTION: Thread-16425
03-01 11:02:49.227: E/AndroidRuntime(26150): java.lang.NullPointerException
03-01 11:02:49.227: E/AndroidRuntime(26150):    at org.awesome.AndroidGame.MainGamePanel.render(MainGamePanel.java:192)
03-01 11:02:49.227: E/AndroidRuntime(26150):    at org.awesome.AndroidGame.MainThread.run(MainThread.java:73)
03-01 11:02:53.717: E/AndroidRuntime(26177): FATAL EXCEPTION: Thread-16428
03-01 11:02:53.717: E/AndroidRuntime(26177): java.lang.NullPointerException
03-01 11:02:53.717: E/AndroidRuntime(26177):    at org.awesome.AndroidGame.MainGamePanel.render(MainGamePanel.java:192)
03-01 11:02:53.717: E/AndroidRuntime(26177):    at org.awesome.AndroidGame.MainThread.run(MainThread.java:73) 
```

使用 nullcheck 时的 Logcat：

```
03-01 11:58:50.297: E/AndroidRuntime(32292): FATAL EXCEPTION: main
03-01 11:58:50.297: E/AndroidRuntime(32292): java.lang.IllegalThreadStateException: Thread already started.
03-01 11:58:50.297: E/AndroidRuntime(32292):    at java.lang.Thread.start(Thread.java:1045)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at org.awesome.AndroidGame.MainGamePanel.surfaceCreated(MainGamePanel.java:83)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:231)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.View.dispatchWindowVisibilityChanged(View.java:7537)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:1039)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:1039)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:1039)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1211)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.Choreographer.doFrame(Choreographer.java:532)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.os.Handler.handleCallback(Handler.java:725)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.os.Looper.loop(Looper.java:137)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-01 11:58:50.297: E/AndroidRuntime(32292):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:55:44.460

在你开始你的线程之前，我相信你应该检查它是否已经存在。

据我了解，您无法在 Android 中重新启动线程，因此您应该检查它以前是否存在，如果存在，请像这样启动一个新线程：

```
if(thread.getState()==Thread.State.TERMINATED){            //Exists?        
 thread = new Thread(holder, context, handler);}           //Re-Create

thread.setRunning(true);
    thread.start(); 
```

至于 null 画布，如果您的意思是在您的 run 方法（主 w'hile 循环）中检查 null，请在解锁和发布之前的“finally”部分中，是的，这是正确的。

但是我有一种感觉，你并不是说这张支票。当我按下后退键时，我遇到了类似的问题，由于某种原因，空画布被间歇性地传递给我的 onDraw/Render 方法。实际上，我必须将该方法中的整个代码封装在针对空画布的检查中，这样它只会在检查返回负数时呈现！它工作并且在那之后非常稳定。

如果我没记错的话，在互联网上进行了大量研究后，这似乎是少数人遇到的问题。

# performance - 高效并行独立任务

> ID：15164652
> 
> 赞同：1
> 
> 时间：2013-03-01T18:42:12.750
> 
> 标签：performance, parallel-processing, processing-efficiency

我有 [;N;] 工作单元 [;w_n;]，它们实际上是可并行化的，令人尴尬。每个都需要大约给定的时间长度，[;t_n;]，这是我们事先知道的。

鉴于我可能需要处理工作单元的某些子集，以及我可能使用最多 [;P;] 进程的约束，每个进程都在单独的 CPU 上，我如何提前有效地分配工作单元，以使所有进程尽可能（及时）彼此接近地完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:39:45.143

A）如果它们在统计上都是相同的持续时间，并且你无法控制它们中的任何一个运行多长时间，我猜平均而言，你不能做得比“一个处理器完成一个工作单元，需要任何未完成的工作单元并执行直到完成”。您的平均运行时间将为 Sum(1..N,t_n)/P。

B）如果他们有一些可预测的时间，我很想要求每个进程选择估计时间最长的剩余工作单元，然后运行它。这首先运行所有昂贵的工作，留下大量的小工作来回填剩余的时间。

C) 如果您坚持预先选择的静态计划，请离线运行算法 B) 并为流程预先分配工作单元。与动态计划相比，这可能会为您提供更长的总运行时间，动态计划可以在一定程度上考虑实际变化。

# javascript - 从二维 JavaScript 数组生成 HTML 表格

> ID：15164655
> 
> 赞同：46
> 
> 时间：2013-03-01T18:42:19.740
> 
> 标签：javascript, html-table

在 JavaScript 中，是否可以从 2D 数组生成 HTML 表格？编写 HTML 表格的语法往往非常冗长，因此我想从 2D JavaScript 数组生成 HTML 表格，如下所示：

```
[
  ["row 1, cell 1", "row 1, cell 2"], 
  ["row 2, cell 1", "row 2, cell 2"]
] 
```

会成为：

```
<table border="1">
  <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
  </tr>
  <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
  </tr>
</table> 
```

因此，我正在尝试编写一个 JavaScript 函数，该函数将从 2D JavaScript 数组中返回一个表，如下所示：

```
function getTable(array){
  // take a 2D JavaScript string array as input, and return an HTML table.
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-01T19:01:16.107

这是一个将使用 dom 而不是字符串连接的函数。

```
function createTable(tableData) {
  var table = document.createElement('table');
  var tableBody = document.createElement('tbody');

  tableData.forEach(function(rowData) {
    var row = document.createElement('tr');

    rowData.forEach(function(cellData) {
      var cell = document.createElement('td');
      cell.appendChild(document.createTextNode(cellData));
      row.appendChild(cell);
    });

    tableBody.appendChild(row);
  });

  table.appendChild(tableBody);
  document.body.appendChild(table);
}

createTable([["row 1, cell 1", "row 1, cell 2"], ["row 2, cell 1", "row 2, cell 2"]]); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-01T18:50:16.560

使用双 for 循环很容易做到这一点。

```
function makeTableHTML(myArray) {
    var result = "<table border=1>";
    for(var i=0; i<myArray.length; i++) {
        result += "<tr>";
        for(var j=0; j<myArray[i].length; j++){
            result += "<td>"+myArray[i][j]+"</td>";
        }
        result += "</tr>";
    }
    result += "</table>";

    return result;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-10T23:36:57.270

另一个innerHTML-less 版本。

```
function makeTable(array) {
    var table = document.createElement('table');
    for (var i = 0; i < array.length; i++) {
        var row = document.createElement('tr');
        for (var j = 0; j < array[i].length; j++) {
            var cell = document.createElement('td');
            cell.textContent = array[i][j];
            row.appendChild(cell);
        }
        table.appendChild(row);
    }
    return table;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-01T05:58:11.073

Daniel Williams 答案的 es6 版本：

```
 function get_table(data) {
    let result = ['<table border=1>'];
    for(let row of data) {
        result.push('<tr>');
        for(let cell of row){
            result.push(`<td>${cell}</td>`);
        }
        result.push('</tr>');
    }
    result.push('</table>');
    return result.join('\n');
  } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-19T16:51:34.303

这是使用[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)的版本。它[`maps`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)在数据上创建从模板文字构建的新字符串数组，然后将它们添加到文档中[`insertAdjacentHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML)：

```
let data = [
  ['Title', 'Artist', 'Duration', 'Created'],
  ['hello', 'me', '2', '2019'],
  ['ola', 'me', '3', '2018'],
  ['Bob', 'them', '4.3', '2006']
];

function getCells(data, type) {
  return data.map(cell => `<${type}>${cell}</${type}>`).join('');
}

function createBody(data) {
  return data.map(row => `<tr>${getCells(row, 'td')}</tr>`).join('');
}

function createTable(data) {

  // Destructure the headings (first row) from
  // all the rows
  const [headings, ...rows] = data;

  // Return some HTML that uses `getCells` to create
  // some headings, but also to create the rows
  // in the tbody.
  return `
    <table>
      <thead>${getCells(headings, 'th')}</thead>
      <tbody>${createBody(rows)}</tbody>
    </table>
  `;
}

// Bang it altogether
document.body.insertAdjacentHTML('beforeend', createTable(data));
```

```
table { border-collapse: collapse; }
tr { border: 1px solid #dfdfdf; }
th, td { padding: 2px 5px 2px 5px;}
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-24T14:43:06.097

请参阅[小提琴演示以从数组创建表](https://jsfiddle.net/6urdwdtf/1/)。

```
function createTable(tableData) {
  var table = document.createElement('table');
  var row = {};
  var cell = {};

  tableData.forEach(function(rowData) {
    row = table.insertRow(-1); // [-1] for last position in Safari
    rowData.forEach(function(cellData) {
      cell = row.insertCell();
      cell.textContent = cellData;
    });
  });
  document.body.appendChild(table);
} 
```

你可以像这样使用它

```
var tableData = [["r1c1", "r1c2"], ["r2c1", "r2c2"], ["r3c1", "r3c2"]];
createTable(tableData); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-26T15:56:11.997

基于公认的解决方案：

```
function createTable (tableData) {
  const table = document.createElement('table').appendChild(
    tableData.reduce((tbody, rowData) => {
      tbody.appendChild(
        rowData.reduce((tr, cellData) => {
          tr.appendChild(
            document
              .createElement('td')
              .appendChild(document.createTextNode(cellData))
          )
          return tr
        }, document.createElement('tr'))
      )
      return tbody
    }, document.createElement('tbody'))
  )

  document.body.appendChild(table)
}

createTable([
  ['row 1, cell 1', 'row 1, cell 2'],
  ['row 2, cell 1', 'row 2, cell 2']
]) 
```

通过简单的更改，可以将表格作为 HTML 元素返回。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-24T20:19:34.037

使用 es6 reduce 的单线

```
function makeTableHTML(ar) {
  return `<table>${ar.reduce((c, o) => c += `<tr>${o.reduce((c, d) => (c += `<td>${d}</td>`), '')}</tr>`, '')}</table>`
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-20T19:21:34.897

生成表格并支持 HTML 作为输入。

灵感来自@spiny-norman [https://stackoverflow.com/a/15164796/2326672](https://stackoverflow.com/a/15164796/2326672)

和@bornd [https://stackoverflow.com/a/6234804/2326672](https://stackoverflow.com/a/6234804/2326672)

```
function escapeHtml(unsafe) {
    return String(unsafe)
         .replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/"/g, "&quot;")
         .replace(/'/g, "&#039;");
 }

function makeTableHTML(myArray) {
    var result = "<table border=1>";
    for(var i=0; i<myArray.length; i++) {
        result += "<tr>";
        for(var j=0; j<myArray[i].length; j++){
            k = escapeHtml((myArray[i][j]));
            result += "<td>"+k+"</td>";
        }
        result += "</tr>";
    }
    result += "</table>";

    return result;
} 
```

[在此处使用 JSFIDDLE 进行测试 - 直接从 Microsoft Excel 粘贴以获取表格](https://jsfiddle.net/punnerud/juof6hLr/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-01-04T07:38:50.577

```
let data = [
  ['Title', 'Artist', 'Duration', 'Created'],
  ['hello', 'me', '2', '2019'],
  ['ola', 'me', '3', '2018'],
  ['Bob', 'them', '4.3', '2006']
];

function getCell (cell, type='td') {
        return `<${type}>${cell}</${type}>`
}
function getCells(cells, type='td') {
        return cells.map(cell => getCell(cell, type)).join('');
}

function getRow(row) {
        return `<tr> ${getCell(row[0], 'th')} ${getCells(row.slice(1))} </tr>`
} 

function createTable(data) {
  const [headings, ...rows] = data;

    return `
          <table>
            <thead>${getCells(headings, 'th')}</thead>
            <tbody>${rows.map(getRow).join('')}</tbody>
          </table>
    `;
}

document.body.insertAdjacentHTML('beforeend', createTable(data));
```

```
table { border-collapse: collapse; }
tr { border: 1px solid #dfdfdf; }
th, td { padding: 4px;}
```

这是[@Andy 的答案](https://stackoverflow.com/a/52896796/5078847)的精确副本，稍作修改，因此每行的第一个单元格将是`th`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-23T20:52:59.757

我知道这是一个老问题，但对于像我这样浏览网络的人来说，这是另一个解决方案：

在逗号上使用`replace()`并创建一组字符来确定行的结尾。我只是添加`--`到内部数组的末尾。这样你就不必运行一个`for`函数。

这是一个 JSFiddle：[https ://jsfiddle.net/0rpb22pt/2/](https://jsfiddle.net/0rpb22pt/2/)

首先，您必须在 HTML 中获取一个表格并为其指定一个 ID：

```
<table id="thisTable"><tr><td>Click me</td></tr></table> 
```

这是为此方法编辑的数组：

```
thisArray=[["row 1, cell 1__", "row 2, cell 2--"], ["row 2, cell 1__", "row 2, cell 2"]]; 
```

`--`请注意在每个数组的末尾添加。

*因为您在*数组中也有逗号，所以您必须以某种方式区分它们，以免最终弄乱您的表格 -`__`在单元格之后添加（除了一行中的最后一个）有效。如果您的单元格中没有逗号，则无需执行此步骤。

现在这是你的功能：

```
function tryit(){
  document
    .getElementById("thisTable")
    .innerHTML="<tr><td>"+String(thisArray)
    .replace(/--,/g,"</td></tr><tr><td>")
    .replace(/__,/g,"</td><td>");
} 
```

它是这样工作的：

1.  打电话给你的桌子，开始设置`innerHTML`。`document.getElementById("thisTable").innerHTML`
2.  首先添加 HTML 标记以开始一行和数据。`"<tr><td>"`
3.  添加`thisArray`为`String()`.`+String(thisArray)`
4.  用数据和行的关闭和打开替换`--`在新行之前结束的每一个。`.replace(/--,/g,"</td></tr><tr><td>")`
5.  其他逗号表示行*内的*单独数据。所以替换所有逗号关闭和打开数据。在这种情况下，并非*所有*逗号都在行之间，因为单元格有逗号，所以我们必须用`__`:来区分它们`.replace(/__,/g,"</td><td>")`。通常你会这样做`.replace(/,/g,"</td><td>")`。

只要您不介意将一些杂散字符添加到数组中，它占用的代码就会少得多，并且易于实现。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-27T15:25:48.220

这是带有“表头”实现的 holmberd 答案

```
function createTable(tableData) {
  var table = document.createElement('table');
  var header = document.createElement("tr");
  // get first row to be header
  var headers = tableData[0];

  // create table header
  headers.forEach(function(rowHeader){
    var th = document.createElement("th");
    th.appendChild(document.createTextNode(rowHeader));
    header.appendChild(th);
  });      
  console.log(headers);

  // insert table header 
  table.append(header);
  var row = {};
  var cell = {};

  // remove first how - header
  tableData.shift();
  tableData.forEach(function(rowData, index) {
    row = table.insertRow();
    console.log("indice: " + index);
    rowData.forEach(function(cellData) {
      cell = row.insertCell();
            cell.textContent = cellData;
    });
  });
  document.body.appendChild(table);
} 
```

createTable([["第 1 行，第 1 行单元格"，"第 1 行，第 2 行单元格"]，["第 2 行，第 1 行单元格"，"第 2 行，第 2 行单元格"]，["第 3 行，第 1 行单元格"，"行3、单元格2"]]);

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-13T23:13:59.543

这是一个示例，说明如何在 JavaScript 中从矩阵 mx n... 生成和读取数据

```
let createMatrix = (m, n) => {
      let [row, column] = [[], []],
          rowColumn = m * n
      for (let i = 1; i <= rowColumn; i++) {
        column.push(i)
        if (i % n === 0) {
          row.push(column)
          column = []
        }
      }
      return row
    }

let setColorForEachElement = (matrix, colors) => {
  let row = matrix.map(row => {
    let column = row.map((column, key) => {
      return { number: column, color: colors[key] }
    })
    return column
  })
  return row
} 

const colors = ['red', 'green', 'blue', 'purple', 'brown', 'yellow', 'orange', 'grey']
const matrix = createMatrix(6, 8)
const colorApi = setColorForEachElement(matrix, colors)

let table ='<table>'
colorApi.forEach(row => {
  table+= '<tr>'
    row.forEach(column =>  table += `<td style='background: ${column.color};'>${column.number}<td>` )
  table+='</tr>'
})
table+= '</table>'
document.write(table); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-07T19:39:25.933

**没有新线的纯功能表**（只是为了好玩）

```
const pureFunctionalTable = data => 
    [document.createElement('table')].filter(table => !table.appendChild(
        data.reduce((tbody, row) =>
            !tbody.appendChild(row.reduce((tr, cell) =>
                !tr.appendChild(document.createElement('td'))
                   .appendChild(document.createTextNode(cell)) || tr
                , document.createElement('tr'))
            ) || tbody, document.createElement('tbody'))) || table)[0]; 
```

**用法**

```
document.body.appendChild(pureFunctionalTable([
    ['row 1, cell 1', 'row 1, cell 2'],
    ['row 2, cell 1', 'row 2, cell 2']
])); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-22T13:33:44.417

我的 10cent 以 ar 为数组：

`'<table><tr>'+ar.map(e=>'<td>'+e.join('</td><td>')+'</td>').join('</tr><tr>')+'</tr></table>'`

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-10-02T13:19:42.097

如果你不介意 jQuery，我正在使用[这个](https://jsfiddle.net/mjankowski/Lzv4eaeb/)：

```
<table id="metaConfigTable">
    <caption>This is your target table</caption>
    <tr>
        <th>Key</th>
        <th>Value</th>
    </tr>
</table>

<script>

    function tabelajzing(a){ 
    // takes (key, value) pairs from and array and returns
    // corresponding html, i.e. [ [1,2], [3,4], [5,6] ] 
      return [
        "<tr>\n<th>",
        a.map(function (e, i) {
          return e.join("</th>\n<td>")
        }).join("</td></tr>\n<tr>\n<th>"),
        "</td>\n</tr>\n"
      ].join("")
    }

  $('#metaConfigTable').find("tr").after(
      tabelajzing( [ [1,2],[3,4],[5,6] ])
  );
</script> 
```

# asterisk - 如何从星号拨号计划中的用户获取电子邮件ID

> ID：15164657
> 
> 赞同：0
> 
> 时间：2013-03-01T18:42:47.230
> 
> 标签：asterisk

有没有一种方法或应用程序可以在不使用语音邮件的情况下从星号拨号计划中的用户获取电子邮件 ID？实际上我想根据电子邮件 ID 注册用户，但我不知道如何在 ivr 通话期间从用户那里获取电子邮件 ID。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:26:32.907

您需要使用 AGI 根据呼叫者 ID 或基于用户 DTMF 输入（如帐户代码）进行数据库查找。从那里，您将从数据库中检索用户记录，并且可以使用它。

Asterisk 本身并不知道电子邮件地址是什么。您需要在外部保存该信息。

也就是说，您的网站使用 ruby​​/rails 之类的东西可以让客户使用他们的电子邮件地址注册，然后使用 ruby​​/adhearsion 来管理通话并在通话期间保存用户记录，效果非常好。我已经为一些客户这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:51:13.060

一般来说，如果在传入的 SIP 请求中提供了有关传入呼叫的​​详细信息，则星号只能知道有关传入呼叫的​​详细信息，通常在 INVITE 中，并且通常在标头部分中。如果您可以以某种方式对用户的电话进行编程以提供呼叫者的“电子邮件 ID”（我假设您的意思是“电子邮件地址”）作为 INVITE 标头，您可以使用[SIP_HEADER](http://www.voip-info.org/wiki/view/Asterisk+func+sip_header)函数在拨号计划中获取标头的值。否则，正如 Michel 建议的那样，您将不得不从将用户的呼叫者 ID 与他们的“电子邮件 ID”相关联的外部数据库中获取所需的信息。

# javascript - 判断字符串是像素还是百分比，然后除以二

> ID：15164665
> 
> 赞同：2
> 
> 时间：2013-03-01T18:43:10.517
> 
> 标签：javascript, jquery

所以我有一个函数可以很好地允许用户将自定义宽度定义为像素或百分比。

问题是我需要得到他们提供的数量的一半。这是我正在尝试做的一个例子：

用户输入---------预期结果

```
50%            25%
300px          150px 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:49:19.097

这可行，尽管您可能应该首先验证他们的输入。

```
parseInt(str) / 2 + str.match(/(%|px)$/)[0] 
```

`%`如果没有验证，如果输入没有以or `px`(can't do )结尾，则会引发错误`null[0]`。相反，如果您希望将丢失或无法识别的单位视为`%`默认值，您可以这样做：

```
parseInt(str) / 2 + (str.match(/(%|px)$/)||["%"])[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:49:30.487

结合使用基于正则表达式`String.replace`的回调：

```
"50px".replace(/(\d+)(%|px)/, function (_, value, unit) { 
    return String(value / 2) + unit; 
});
// returns 25px 
```

# ruby-on-rails - 货币下拉

> ID：15164667
> 
> 赞同：1
> 
> 时间：2013-03-01T18:43:14.620
> 
> 标签：ruby-on-rails, ruby

我有三个带有大括号中指定字段/列的表：

国家 (name,currency_id) 货币 (name) 用户 (name ,country_id,currency_id)

我的要求是在创建用户选择国家时，需要首先显示默认货币，然后在下一个选择行中显示剩余货币。EX：如果我们在国家下拉列表中选择美国，则需要首先显示美元，然后在下一个显示剩余货币

我的想法是用户属于任何国家默认货币是他的国家货币，他也可以选择其他货币。

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:48:35.260

请看我的博文。您可以根据第一个下拉列表中的选定值填充下一个下拉列表，或更改值的顺序。

[http://marcofranssen.nl/knockout-that-c​​ascading-dropdown/](http://marcofranssen.nl/knockout-that-cascading-dropdown/)

# r - 从 R 中的 GAMLSS 对象中提取信息

> ID：15164675
> 
> 赞同：0
> 
> 时间：2013-03-01T18:43:36.887
> 
> 标签：r

我正在使用**gamlss**包中的`lms`函数进行百分位回归。运行函数 a 后得到一个对象，但我不知道如何显示百分位曲线。**`lms()`**

 **如何提取参数，以便我可以自己绘制百分位曲线。我测试了这个`fitted.plot()`函数，但是有一个错误说这个函数不存在。我已经下载了 4.2.0 版本。我想知道是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T10:47:35.873

看看文档：[这里](http://cran.r-project.org/web/packages/gamlss/gamlss.pdf)

据我所见，该`lms`命令只是`gamlss`拟合的另一个版本，并且是使用该`centiles`命令绘制的。**

# ios - MonkeyTalk 表行值在 iOS 上验证

> ID：15164677
> 
> 赞同：0
> 
> 时间：2013-03-01T18:43:38.480
> 
> 标签：ios, verification, monkeytalk

我正在使用 MonkeyTalk 来自动化 iOS 测试。尝试验证值时出现以下错误。

失败：应为“Joe Smith”，但找到“(null)”

MonkeyTalk 代码是：

`Table "Empty list" Verify "Joe Smith" item(1)`

基本上，我搜索了一个用户字段，该字段返回一个包含用户列表的表。我想验证单元格是否具有正确的值。

有人得到这个工作吗？或者知道解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:50:53.350

这是适合您的完美答案:-)

`Table * Verify "Hydrogen" item(1)` 如果您使用默认 UITableViewCell TextLabel `Table * Verify "Hydrogen" detail(1)`将起作用 如果您使用默认 UITableViewCell DetailTextLabel 将起作用

否则你有很好的方法来做到这一点。

[MonkeyTalk：验证自定义 UITableViewCell 标签文本而不选择单元格](https://stackoverflow.com/questions/16304129/monkeytalk-verify-custom-uitableviewcell-label-text-without-select-the-cell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T04:57:39.153

对于自定义列表，您可以通过在循环中更改所有标签来做到这一点。像这样：

```
 var i=1;
    while(i)    
    {    
       try    
       {    
         app.label.verify("Joe Smith","value","Label doesn't match.");    
         i++;    
       }    
       catch(err)    
       {    
         app.debug().print("No More Labels in Table");    
       }    
   } 
```

# mysql - 如何使用 Visual Basic 6 中的存储过程在 phpmyadmin 中创建查询？

> ID：15164678
> 
> 赞同：1
> 
> 时间：2013-03-01T18:43:38.773
> 
> 标签：mysql, stored-procedures, vb6, xampp

我的非常简单的系统使用存储过程，我的数据库在 xampp(phpmyadmin, mysql) 中存在问题——这是必需的数据库。

我的问题是：

*是否可以像在 Ms Access 查询工具中一样在 xampp 中创建查询（追加、更新、选择、删除）？

*是否可以使用vb6中的存储过程在xampp中添加、更新、选择和删除记录？（使用参数）

使用 xampp 的数据库让我感到困惑！我希望你能帮助我。

# atomic - 使用 DerbyJS 的原子操作

> ID：15164679
> 
> 赞同：1
> 
> 时间：2013-03-01T18:43:39.627
> 
> 标签：atomic, derbyjs

DerbyJS 是否有任何原子操作？[从文档](http://derbyjs.com/#mutators)中似乎没有像 MongoDB 这样的操作`addToSet`？如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T06:47:20.503

有`model.setNull`和`model.setDiff`操作。但没有等价于`addToSet`。

# javascript - 如何阅读 DIV 的上边距

> ID：15164680
> 
> 赞同：0
> 
> 时间：2013-03-01T18:43:40.833
> 
> 标签：javascript, css, margin

这是我的代码

```
<script>
function showin(box) {

       cur = parseInt(document.getElementById(box).style.marginTop);
       alert(cur);
    }
 showin('child');

</script>

<div id="parent" class="parent">
    <div id="child" class="child" style="margin-top:-10px;">
    </div>
</div> 
```

为什么它没有给我任何警报信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:46:31.820

它不起作用，因为您在 DOM 准备好并且可以计算边距之前调用它。

你应该这样做：

```
function showin(box) {
   cur = parseInt(document.getElementById(box).style.marginTop);
   alert(cur);
}
window.onload = function() { 
   showin('child'); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:49:44.217

您在创建 DOM 之前调用该函数，

如果您使用的是 jquery，请尝试包装 showin('child'); 在准备好的文件中：

```
$(document).ready(function(){
  showin('child');
}); 
```

这将等到所有内容都创建完成

编辑：或使用 window.onload :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:49:46.477

试试这个：

```
<script>
    function showin(box) {
        cur = parseInt(document.getElementById(box).style.marginTop);
        alert(cur);
    }
    window.onload = function(){
        showin('child');
    }
</script>

<div id="parent" class="parent">
    <div id="child" class="child" style="margin-top:-10px;">
    </div>
</div> 
```

由于您试图在 HTML 之上运行您的 showin javascript 函数，因此在运行 javascript 时，div#child 尚未呈现。

您必须查看并了解[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:55:43.770

这是因为您的脚本在您的窗口准备好之前执行并且没有获取您传递的元素并引发错误。此错误会导致执行中断和 javascript 中断。请谷歌查询 Jquery 的 $(document).ready 方法以了解更多信息

# jquery - 加载/显示 Flexslider 时出现问题

> ID：15164684
> 
> 赞同：1
> 
> 时间：2013-03-01T18:43:57.473
> 
> 标签：jquery, flexslider

我正在尝试使用 Flexslider，但无法将 Flexslider 包装在另一个 div 中，将其隐藏，然后在单击按钮时尝试显示整个 div。我没有使用 AJAX 调用来加载滑块或我的任何其他 div，而是（因为该站点相对简单且较小）使用 JQ 来隐藏然后在单击按钮时显示内容。

```
**//This is the JQuery I've tried using**
<script type="text/javascript" charset="utf-8">
$('#projectsPage').hide();
$('#projectsLink').click(function(){
$('#projectsPage').fadeIn(1000).load(function(){
  $('.flexslider').flexslider({
    animation: "fade",
    slideshow: true,
    animationLoop: true,
    animationSpeed: "3000",
    slideshowSpeed: "8000",
    controlNav: false,
    directionNav: false
  });
});
});
</script>

**<!-- HTML-->**

<!--Click this link to show the div containing the flexslider-->
<a href="#projectsPage" id="projectsLink">link</a>

<!--Div containing the flexslider div (which is part of the source code)-->
<div id="projectsPage">
<div class="flexslider">
  <ul class="slides">
    <li>
      <img src="js/flexslider/images/img2.jpg" />
    </li>
    <li>
      <img src="js/flexslider/images/img3.jpg" />
    </li>
    <li>
     <img src="js/flexslider/images/img4.jpg" />
   </li>
 </ul>
</div>
</div> 
```

这段代码是一个更宏大的文档的一部分，但并不是那么复杂。有人可以告诉我我是否正在破坏某些东西或需要包含更多信息吗？

此外，JS 控制台中似乎没有错误，所以我很困惑为什么它不会显示。它“加载”#projectsPage div，如 URL 中所示，但随后在窗口中不显示任何内容。

我对 JQuery 很陌生，所以很好:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T06:32:59.760

滑块无法在隐藏的 div 内初始化。

我在 div 中隐藏多个 flexslider 时遇到了同样的问题，这些 flexslider 仅在单击其缩略图时才显示。为了使这个工作，在元素上设置一个 jquery click() 监听器，这将导致滑块显示，并在包含的 div 被取消隐藏后初始化滑块。

类似于以下内容：

```
$('.show_slider_link_class').click( function(){

    //show containing element
    $('.hidden_slider_container').show();

            // now you can init the flexslider
    $('.flexslider_').flexslider({
        animation: "slide",
        controlNav: "thumbnails",
        minItems: 1,
        start: function(slider){
          $('body').removeClass('loading');
        }
      });
}); 
```

# c# - 如何检查 .Text 值的数组

> ID：15164685
> 
> 赞同：3
> 
> 时间：2013-03-01T18:43:58.460
> 
> 标签：c#, arrays, tic-tac-toe

这适用于井字游戏，其中网格可以调整为任意数字（3x3 4x4 8x8 等）

当表单加载时，一个方法读取网格大小并使用一维按钮数组中的许多按钮填充表单。该数组称为按钮数组。

仅使用一维 buttonArray 而不使用 LINQ，我如何比较 buttonArray 中按钮的 .Text 值，以查看它们对于 CheckWinner() 函数是“X”还是“O”。

创建按钮网格后，我有一个按钮点击事件处理程序：

```
private void button_click(object sender, EventArgs e)
    {
        Button b = (Button)sender;
        b.Text = "X";
        b.Enabled = false;
        CheckWinner(buttonArray);
} 
```

然后我调用我的 CheckWinner 函数并传入数组 buttonArray。

同样，我只是在寻找一种不使用 LINQ 来检查/比较值的原始方法。如果我知道网格每一边的长度，我可以说对于水平获胜线，我正在寻找以“X”作为其 .Text 属性的那么多按钮。

因此，如果我有一个 5x5 的网格，并且我在 buttonArray 中有 25 个按钮，我如何从网格的 0 索引开始检查每 5 个的 .Text 值是否为“X”，然后打印一条消息，如果连续 5 个相同，在这种情况下为“X”。

```
for (int z = 0; z < root; z++) //increments the column to start on
        {
            vCount = 0; //Starts the win counter at zero when moving to the next column
            for (int i = z; i < arrLength; i=i+root) //starts at the first column and increments it by root to test the next button in the column
            {
                string bText = buttonArray[i].Text;
                if (bText == "X")
                    vCount++;
                if (vCount == root)
                {
                    MessageBox.Show("Vertical row winner found !");
                    break;
                }
            }
        }//end of vertical column test 
```

我做了这样的垂直测试？但我认为将它们合二为一会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:01:26.653

假设您要检查*是否* `Button.Text == "X"` *在* `every element of a horizontal row`. 以下是一个非常基本的方法......

```
public void CheckWinner(Buttons[] buttonArray)
{
    int arrLength = buttonArray.Length; 
    int hCount = 0;
    //int vCount = 0;
    int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));  

    for (int i = 0; i < arrLength ; i++)
    { 
        string bText = buttonArray[i].Text;

        hCount = i % root == 0? 0 : hCount;

        if(bText == "X") 
            hCount++;

        if(hCount == root) 
        {
            Console.WriteLine("Horizontal row winner found !");
            break;
        }
    }

} 
```

要检查垂直和/或水平赢家：

```
public void CheckWinner(Buttons[] buttonArray)
{
    int arrLength = buttonArray.Length; 
    int hCount = 0;
    Int vCount = 0;
    int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));  

    for (int i = 0;  i < root;  i++)
    {
        hCount = 0;
        vCount = 0;
        for(int j = 0;  j < root; j++)
        {
           if(buttonArray[ (i * root) + j ].Text == "X")
              hCount++;

           if(buttonArray[ i + (root * j) ].Text == "X")
              vCount++;
        }

        if( hCount + vCount == 2 * root)
        {
           Console.WriteLine("Horizontal and Virtical winner found !");
           break;
        } 
        else if ( hCount == root )
        { 
           Console.WriteLine("Horizontal winner found !");
           break;
        }
        else if ( vCount == root )
        { 
           Console.WriteLine("Virtical winner found !");
           break;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T19:13:06.860

尽管看起来所有其他答案也都有效，但我会将我的选择权投入到戒指中。我的是一个基本的实现。它只是沿着每一行进行，并检查每一行中是否有相同的值。垂直版本就像重新排列我的两个 for 循环一样简单，对角线也不会太难。

在我看来，这个问题的主要技巧只是展示对数组行和列的理解，以及如何在仅给定一维数组的情况下模拟二维数组。

对于水平：

```
string CheckWinnerHorizontal(Button[] buttonArray) {
    int N = (int)Math.Sqrt(buttonArray.Length);
    for (int row = 0; row < N; ++row)
    {
        string winner = "";
        for (int col = 0; col < N; ++col)
        {
            string value = buttonArray[row * N + col].Text;
            if (winner == "") { winner = value; }
            else if (winner != value) { winner = "none"; }
        }
        if (winner != "none" && winner != "")
        {
            return winner;
        }
    }
    return ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T19:01:17.640

当然，你可以试一试——我会在这里逐行做，by-cols 应该非常相似：

（编辑 - 哈，显然我看不懂......但对其他人来说可能仍然是一个有用的答案......因为我已经证明我没有关注 OP，让我对此进行扩展并填写垂直/对角线...）

（LINQPad 就绪）

```
void Main()
{
    // Quickish and very dirty way to generate the grid
    var lineLength = 3;
    var rnd = new Random();
    var gridSrc = 
        from r in Enumerable.Range(0, lineLength)
        from c in Enumerable.Range(0, lineLength)
        select new { Row = r, Col = c, Text = rnd.Next(0,2) > 0 ? "X" : "O" };
    var grid = gridSrc.ToArray();

    // ok, now for the query
    var horizontalWinners =
        // need the cell and it's index - this is one way to do that
        from cellTuple in grid.Select((cell, idx) => Tuple.Create(idx, cell))
        let idx = cellTuple.Item1
        let cell = cellTuple.Item2
        // figure out which row its in
        let row = idx / lineLength
        // figure out which column its in
        let col = idx % lineLength
        // for rows, group by row #
        group cell by row into byRow
        // only count if all cells in that row are same
        where byRow.All(rowCell => rowCell.Text == "X") 
             || byRow.All(rowCell => rowCell.Text == "O")
        // tell us what row (and who won)
        select new { byRow.Key, byRow.First().Text };

var verticalWinners =
    from cellTuple in grid.Select((cell, idx) => Tuple.Create(idx, cell))
    let idx = cellTuple.Item1
    let cell = cellTuple.Item2
    let row = idx / lineLength
    let col = idx % lineLength
    group cell by col into byCol
    where byCol.All(colCell => colCell.Text == "X") 
                 || byCol.All(colCell => colCell.Text == "O")
    select new { byCol.Key, byCol.First().Text };

var topLeftBottomRightDiagonalWinners =
    from cellTuple in grid.Select((cell, idx) => Tuple.Create(idx, cell))
    let idx = cellTuple.Item1
    let cell = cellTuple.Item2
    let row = idx / lineLength
    let col = idx % lineLength
    let fwdSlash = (row == col)
    group cell by fwdSlash into byDiag
    where byDiag.Key && byDiag.All(d => d.Text == byDiag.First().Text)
    select new { 
                 Text = byDiag.First().Text, 
                 Pos = string.Join("", byDiag.Select(c => Tuple.Create(c.Col, c.Row).ToString())) 
            };

var topRightBottomLeftDiagonalWinners =
    from cellTuple in grid.Select((cell, idx) => Tuple.Create(idx, cell))
    let idx = cellTuple.Item1
    let cell = cellTuple.Item2
    let row = idx / lineLength
    let col = idx % lineLength
    let backSlash = (row + col) == (lineLength - 1)
    group cell by backSlash into byDiag     
    where byDiag.Key && byDiag.All(d => d.Text == byDiag.First().Text)
    select new { 
               Text = byDiag.First().Text, 
               Pos = string.Join("", byDiag.Select(c => Tuple.Create(c.Col, c.Row).ToString())) 
            };

for(int r=0;r<lineLength;r++)
{
    for(int c=0;c<lineLength;c++)
    {
        Console.Write(grid[r*lineLength+c].Text + " ");
    }
    Console.WriteLine();
}
foreach(var row in horizontalWinners)
{
    Console.WriteLine("{0} wins on row {1}", row.Text, row.Key);
}
foreach(var col in verticalWinners)
{
    Console.WriteLine("{0} wins on col {1}", col.Text, col.Key);
}
foreach (var diag in topLeftBottomRightDiagonalWinners
                .Concat(topRightBottomLeftDiagonalWinners)) 
{
    Console.WriteLine("{0} wins on diagonal {1}", diag.Text, diag.Pos);     
}
} 
```

# c# - 避免在收到信号之前读取服务器内存中的大量用户提交的表单数据？

> ID：15164688
> 
> 赞同：0
> 
> 时间：2013-03-01T18:44:08.600
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个 ASP.NET 应用程序。在这个应用程序中，我有一个页面，用户可以在其中向服务器提交大量数据。但有时我只需要检查一些请求标头并可能完全拒绝请求。在这些情况下，我不希望我的服务器内存在一段时间内保存大量不必要的用户提交数据。ASP.NET 中是否有任何方法不保留任何用户提交的数据，直到我在读取标头后发出信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:14:55.080

都是随请求一起发送的。为了做你想做的事，你需要两个请求，因为整个“直到我发出信号”意味着一个服务器响应和另一个客户端请求。

根据您要检查的内容，您*可以*执行两阶段请求，让客户端首先提交一个简单请求，获取一些授权码以提交更大的请求，然后将该授权码与更大的请求一起发送。这基本上就是大多数 Web API 中授权的工作方式，但这完全取决于客户端是否符合规范。

在文档化的 API 中，这应该不是问题，因为客户会明白，除非他们遵循程序，否则他们将无法与 API 交互。对于通用网站来说，这是一个更大的问题，浏览器本身无法正确处理此问题，即使可以，最终用户也可能不会合作。

但是，即使在 API 环境中，您仍然会收到来自不合格客户端的大量未经授权的请求。它们将被阻止，但您的服务器仍然必须对其进行处理才能阻止，这违背了阻止它的目的。您还不如在那个时候继续完成它，而不是引发额外的请求，包括在经过适当授权时重复大型请求。

总而言之，试图阻止它真的没有意义。您最好的选择是将表单或其他内容简单地分解为多个步骤，以便各个发布的步骤不会那么大，如果有问题，您可以在第一个较小的请求时停止它。

# ruby-on-rails-3 - Rails 3 - 根据关联模型的属性计算模型的属性

> ID：15164689
> 
> 赞同：0
> 
> 时间：2013-03-01T18:44:17.320
> 
> 标签：ruby-on-rails-3, activerecord, model

我有三个模型 - Usage(month, elec, gas), Project(project_type, date_implemented, manual_elec_savings, manual_gas_savings) 和monthly_project_savings(elec, gas, usage_id, project_id)。协会设立如下：

```
Project has_many :monthly_project_savings,
    has_many :usages, through :monthly_project_savings

Usage   has_many :monthly_project_savings
    has_many :projects, through :monthly_project_savings

monthly_project_saving belongs_to :usage, :project 
```

我的项目模型中有一个方法，因此在保存项目后，它会根据 project_type 计算关联的monthly_project_savings：

```
def calc_monthly_project_saving

//destroy all previous records
  self.monthly_project_saving.destroy_all

//calculate monthly savings
    Usage.all.each do |u|

    if self.project_type = "General" && self.date_implemented <= u.month
      self.monthly_project_savings.create(usage_id: u.id, elec: self.manual_elec_savings, gas: self.manual_gas_savings)
    elsif self.project_type="Elec" && self.date_implemented <= u.month
      self.monthly_project_savings.create(usage_id: u.id, elec: u.elec, gas:0)
    elsif self.project_type="Gas" && self.date_implemented <= u.month
      self.monthly_project_savings.create(usage_id: u.id, elec: 0, gas:u.gas)
    end
  end
end 
```

然后我使用`after_save :calc_monthly_project_saving`.

我的问题是，如果我使用“after_save”调用该方法，第一个 if 语句将始终传递 true，即使 project_type 不同。除此之外，如果我将第一个`self.monthly_project_savings.create(elec:)`从更改`self.manual_elec_savings`为`u.elec`，那么它将以 elec 的形式返回monthly_project_savings。

如果我将其更改为调用 before_save，则会引发错误：`"You cannot call create unless the parent is saved"`，这是有道理的。虽然在编辑现有项目记录时会以这种方式工作，但有时 date_implemented 会更改为“t”或“f”。我不知道如何做到这一点，帮助？

另外顺便说一句，如果我在编辑现有记录时调用 before_save 方法，为什么 rails 会将 date_implemented 的值设置为“f”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:30:22.477

我的上帝！我花了一整天的时间试图解决这个问题......我通过将 if 语句中的“=”更改为“==”来解决它。他妈的错别字！

# css - Safari 在悬停时用浅色@font-face 字体加粗

> ID：15164693
> 
> 赞同：2
> 
> 时间：2013-03-01T18:44:24.777
> 
> 标签：css, fonts, safari, webkit, font-face

出于某种原因，Safari 在过渡期间将我的浅色@font-face 字体加粗。

当您将鼠标悬停在产品图片上时，您可以看到 safari 在瞬间为文本添加粗体：

[http://fine-grain-2.myshopify.com](http://fine-grain-2.myshopify.com)

这是我的@font-face 声明：

```
@font-face {
font-family: Avenir;
font-weight: normal;
font-style: normal;
src: url("AvenirLTStd-Medium.otf") format("opentype");
}

@font-face {
font-family: AvenirBold;
font-weight: normal;
font-style: normal;
src: url("AvenirLTStd-Black.otf") format("opentype");
}

@font-face {
font-family: AvenirLight;
font-weight: lighter;
font-style: normal;
src: url("AvenirLTStd-Light.otf") format("opentype");
} 
```

这是我在主 CSS 中声明字体系列的地方：

```
body {
    background: none repeat scroll 0 0 #999999;
    font-family: AvenirLight;
    font-weight: lighter;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T22:36:22.553

我想你的问题是 WebKit 的抗锯齿。具体来说，在过渡或变换期间，抗锯齿**仅适用于全像素**，但当元素上没有过渡或变换时，LCD 显示器将默认使用亚**像素**抗锯齿。

亚像素抗锯齿通常是您想要的，因为它有助于提高可读性，但是当过渡中涉及的某些内容停止并且亚像素抗锯齿接管时，差异会很不协调。

**仅**`-webkit-font-smoothing: antialiased;`在问题元素上使用以始终强制全像素抗锯齿，您将失去该过渡。有关Safari 抗锯齿的详细说明，请参阅[此页面。](http://www.usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:23:37.790

我可以在那里发现的一件事是：

```
@font-face {
    font-family: AvenirLight;
    font-weight: lighter;
    font-style: normal;
    src: url("AvenirLTStd-Light.otf") format("opentype");
} 
```

打火机不是 font-weight 属性的有效值。在这种情况下，有效值为： normal | 粗体 | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900

更多详细信息请[参见](http://www.w3.org/TR/css3-webfonts/#font-descriptions)第 4.4 节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T12:27:13.593

尽量避免使用`-webkit-font-smoothing: antialiased;`，因为字体权重在不同的浏览器上会不一致。

我发现问题只发生在 opacity 属性的转换中。在某些情况下，rgba 背景可以解决问题。**

# c++ - 提升 lambda 递归？

> ID：15164695
> 
> 赞同：0
> 
> 时间：2013-03-01T18:44:40.817
> 
> 标签：c++, boost-lambda

boost::lambda 可以**递归**使用吗？

这不编译：

```
using namespace boost::lambda;

auto factorial = (_1 == 0) ? 1 : factorial(_1-1); 
```

有建议的解决方法吗？

编辑：关于使用 C++11 lambdas：以下内容无法在 VS2012 上编译：

```
std::function<int(int)> factorial;
factorial = [&factorial](int p)->int { return (p == 0) ? 1 : p*factorial(p-1); };

int main(int argc, char* argv[])
{
    int i = factorial(5);
return 0;
} 
```

另一个编辑：奇怪的是，这个工作正常：

```
std::function<int(int)> factorial =
    [&](int p)->int { return (p == 0) ? 1 : p*factorial(p-1); };

int main(int argc, char* argv[])
{
    int i = factorial(5);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:51:16.707

Lambda 函数不能直接调用自己，因为它们没有名称。

解决方法很简单：使用命名函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:51:05.357

我发现使用常规 C++11 lambda 的最简单方法是先声明将包含 lambda 的变量，然后定义它并创建 lambda。已经声明允许在定义/lambda 本身中使用声明。例如：

```
std::function<int (int)> factorial = nullptr;
factorial = [](int x) -> int {
     if (x <= 1) {
         return 1;
     } else {
         return (x * factorial(x-1));
     }
 }; 
```

到目前为止，我对该方法没有任何问题，尽管您确实必须知道声明的签名并且我不知道它是否适用于 boost::lambda （我会假设如此？）。

# r - 在嵌套列表中使用 R 和复杂数据框进行子集化

> ID：15164696
> 
> 赞同：3
> 
> 时间：2013-03-01T18:44:50.253
> 
> 标签：r, spp

我有一个来自 ChIP-seq 实验的非常大而复杂的数据框。该数据框包含小 DNA 测序读数的结合位置和分数。输出来自程序 spp。数据由带有名称（spp_output$npl）的染色体组织，给出了所有染色体的列表。如果我选择一个染色体（比如说 chr1），输出

```
> names(spp_output$npl$chr1)
 [1] "x"          "y"          "evalue"     "fdr"        "nt"        
 [6] "nbgt"       "enr"        "enr.ub"     "enr.mle"    "nbgt.5"    
[11] "enr.5"      "enr.ub.5"   "enr.mle.5"  "nbgt.10"    "enr.10"    
[16] "enr.ub.10"  "enr.mle.10" 
```

我需要按分数（“y”）对每个染色体的数据集进行子集化。如果我似乎不起作用

```
`spp_sub <- subset(spp_output, spp_output$npl$chr1$y > 40);` 
```

即便如此，我还是必须为每个 chr 输入一行。您将如何对这些数据进行子集化？str(spp_output) 看起来像这样

```
 > str(bp)
List of 3890
 $ npl                 :List of 21
  ..$ chr1 :'data.frame':   5988 obs. of  17 variables:
  .. ..$ x         : num [1:5988] 3480459 3662576 3720354 4043865 4078829 ...
  .. ..$ y         : num [1:5988] 3.47 3.97 3.5 3.64 3.19 ...
  .. ..$ evalue    : num [1:5988] 162 88 159 135 283 ...
  .. ..$ fdr       : num [1:5988] 0.00296 0.00226 0.00305 0.00279 0.00445 ...
  .. ..$ nt        : int [1:5988] 6 5 5 0 5 4 3 5 1 1 ...
  .. ..$ nbgt      : int [1:5988] 1 1 1 3 2 0 4 2 0 0 ...
  .. ..$ enr       : num [1:5988] 3.033091 2.40555 2.40555 0.000391 1.656698 ...
  .. ..$ enr.ub    : num [1:5988] 207.74 176.66 176.66 3.79 47.37 ...
  .. ..$ enr.mle   : num [1:5988] 13.594 11.503 11.503 0.448 6.902 ...
  .. ..$ nbgt.5    : int [1:5988] 4 2 7 10 11 8 15 10 5 1 ...
  .. ..$ enr.5     : num [1:5988] 6.668665 8.28349 3.364963 0.000622 2.296721 ...
  .. ..$ enr.ub.5  : num [1:5988] 89.4 236.83 35.41 4.51 20.01 ...
  .. ..$ enr.mle.5 : num [1:5988] 22.657 34.509 11.503 0.747 7.502 ...
  .. ..$ nbgt.10   : int [1:5988] 7 4 16 11 20 17 30 14 19 11 ...
  .. ..$ enr.10    : num [1:5988] 8.69484 10.39636 3.29297 0.00113 2.68587 ...
  .. ..$ enr.ub.10 : num [1:5988] 81.36 154.57 25.68 8.13 19.91 ...
  .. ..$ enr.mle.10: num [1:5988] 27.19 38.34 10.46 1.36 8.42 ...
  ..$ chr10:'data.frame':   3907 obs. of  17 variables:
  .. ..$ x         : num [1:3907] 3030162 3047828 3077057 3086391 3163429 ...
  .. ..$ y         : num [1:3907] 3.26 6.06 3 4.43 3.6 ...
  .. ..$ evalue    : num [1:3907] 256 12 426 44 145 ...
  .. ..$ fdr       : num [1:3907] 0.00416 0.00103 0.00638 0.00139 0.00283 ...
  .. ..$ nt        : int [1:3907] 2 6 3 4 3 6 4 0 3 3 ...
  .. ..$ nbgt      : int [1:3907] 0 1 1 1 1 1 4 0 2 4 ...
  .. ..$ enr       : num [1:3907] 1.49 3.03 1.2 1.79 1.2 ...
  .. ..$ enr.ub    : num [1:3907] 17463 208 114 146 114 ...
  .. ..$ enr.mle   : num [1:3907] 15.69 13.59 7.32 9.41 7.32 ...
  .. ..$ nbgt.5    : int [1:3907] 11 7 12 8 10 4 12 4 8 9 ...
  .. ..$ enr.5     : num [1:3907] 0.519 4.347 0.964 2.167 1.135 ...
  .. ..$ enr.ub.5  : num [1:3907] 11.1 40.7 12.8 25.4 15.9 ...
  .. ..$ enr.mle.5 : num [1:3907] 3.41 13.59 4.39 8.3 5.23 ...
  .. ..$ nbgt.10   : int [1:3907] 21 13 17 10 18 15 12 11 19 22 ...
  .. ..$ enr.10    : num [1:3907] 0.567 5.158 1.401 3.577 1.328 ...
  .. ..$ enr.ub.10 : num [1:3907] 10.7 37.4 17.1 38.4 16.1 ...
  .. ..$ enr.mle.10: num [1:3907] 3.65 15.1 6.27 13.44 5.94 ... 
```

...对于其余的染色体。非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:45:56.993

这是Split-Apply-Combine 工作的经典案例。

```
require(plyr)
llply(spp_output$npl, subset, y > 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:53:43.057

您似乎只想从`bp$npl`y 值大于 40 的那些字符中进行选择。如果是这样，以下内容应该会给您想要的结果：

```
# find which chrs have a y value greater than 40
Indxs <- lapply(bp$npl, function(n) n$y > 40)

# subset just those
croppedList <- mapply(function(m, i) m[i, ], bp$npl, Indxs, SIMPLIFY=FALSE) 
```

* * *

```
 ## BEFORE:

  > bp
  $npl
  $npl$chr1
         x  y evalue   fdr
  1  -0.63 77  -0.04 -0.06
  2   0.18 40  -0.02 -0.16
  3  -0.84 63   0.94 -1.47
  4   1.60 36   0.82 -0.48
  5   0.33 43   0.59  0.42
  6  -0.82 49   0.92  1.36
  7   0.49 30   0.78 -0.10
  8   0.74 49   0.07  0.39
  9   0.58 74  -1.99 -0.05
  10 -0.31 47   0.62 -1.38

  $npl$chr2
         x  y evalue   fdr
  1  -0.41 42   0.40  2.40
  2  -0.39 33  -0.61 -0.04
  3  -0.06 62   0.34  0.69
  4   1.10 74  -1.13  0.03
  5   0.76 69   1.43 -0.74
  6  -0.16 70   1.98  0.19
  7  -0.25 53  -0.37 -1.80
  8   0.70 50  -1.04  1.47
  9   0.56 71   0.57  0.15
  10 -0.69 60  -0.14  2.17

  ## AFTER: 

  > croppedList
  $chr1
         x  y evalue   fdr
  1  -0.63 77  -0.04 -0.06
  3  -0.84 63   0.94 -1.47
  5   0.33 43   0.59  0.42
  6  -0.82 49   0.92  1.36
  8   0.74 49   0.07  0.39
  9   0.58 74  -1.99 -0.05
  10 -0.31 47   0.62 -1.38

  $chr2
         x  y evalue   fdr
  1  -0.41 42   0.40  2.40
  3  -0.06 62   0.34  0.69
  4   1.10 74  -1.13  0.03
  5   0.76 69   1.43 -0.74
  6  -0.16 70   1.98  0.19
  7  -0.25 53  -0.37 -1.80
  8   0.70 50  -1.04  1.47
  9   0.56 71   0.57  0.15
  10 -0.69 60  -0.14  2.17 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:59:12.990

似乎问题在于您正在处理嵌套列表。这是一个与您类似的最小示例：

```
# Some sample data. This is a nested list
set.seed(123)
myList <- list(
  npl = list(
    chr1 = data.frame(x = rnorm(10),
                      y = sample(30, 10, replace = TRUE)),
    chr2 = data.frame(x = rnorm(10),
                      y = sample(30, 10, replace = TRUE))
  )
)

# Compare the structure
str(myList)
# List of 1
#  $ npl:List of 2
#   ..$ chr1:'data.frame':  10 obs. of  2 variables:
#   .. ..$ x: num [1:10] -0.5605 -0.2302 1.5587 0.0705 0.1293 ...
#   .. ..$ y: int [1:10] 27 21 20 30 20 22 17 18 9 5
#   ..$ chr2:'data.frame':  10 obs. of  2 variables:
#   .. ..$ x: num [1:10] 1.787 0.498 -1.967 0.701 -0.473 ...
#   .. ..$ y: int [1:10] 2 14 24 4 17 7 4 23 27 12 
```

那么，我们如何从所有这些子列表的“y”列中提取某些值呢？使用`lapply`with `unlist`with`recursive = FALSE`如下：

```
lapply(unlist(myList, recursive=FALSE), function(x) x[x$y > 5, ])
# $npl.chr1
#             x  y
# 1 -0.56047565 27
# 2 -0.23017749 21
# 3  1.55870831 20
# 4  0.07050839 30
# 5  0.12928774 20
# 6  1.71506499 22
# 7  0.46091621 17
# 8 -1.26506123 18
# 9 -0.68685285  9
# 
# $npl.chr2
#             x  y
# 2   0.4978505 14
# 3  -1.9666172 24
# 5  -0.4727914 17
# 6  -1.0678237  7
# 8  -1.0260044 23
# 9  -0.7288912 27
# 10 -0.6250393 12 
```

要查看发生了什么，请尝试`str(unlist(myList, recursive = FALSE))`. 您会看到该列表现在已在一定程度上“扁平化”。这使您可以使用直接`lapply`访问个人`data.frame`s。

# java - 特定的 Java EJB 约束冲突错误。为什么？

> ID：15164698
> 
> 赞同：0
> 
> 时间：2013-03-01T18:44:59.080
> 
> 标签：java, jpa-2.0, bean-validation

我收到此错误：

```
 javax.ejb.EJBException: javax.validation.ConstraintViolationException: Validation
failed for classes [EntityBeans.PwVersions] during update time for groups 
[javax.validation.groups.Default, ] List of constraint violations:
[ ConstraintViolationImpl{interpolatedMessage='size must be between 0 and 45', 
propertyPath=directory, rootBeanClass=class EntityBeans.PwVersions, messageTemplate='{javax.validation.constraints.Size.message}'} ] 
```

在运行时，我很沮丧。当我尝试将查询结果转换为 PwVersions 对象时，就会出现问题。我需要使用下面的代码行（或等效代码），所以我想知道我必须在其他地方更改什么（除了更改数据库）才能使其正常工作？也许有一种方法可以改变被违反的约束（我不熟悉在 Java 中处理约束）（主要/次要都是正确的）

```
PwVersions pwv= (PwVersions)em.createQuery("select pwv from PwVersions pwv where 
major= :major and minor = :minor").getSingleResult(); 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:53:32.697

此注释很可能引发验证异常：

```
@javax.validation.constraints.Size(min = 0, max = 45) 
```

放在类的一个属性前面`EntityBeans.PwVersions`。要摆脱它，要么调整 db 表中字段的长度，要么调整[Size](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Size.html)注释本身以匹配 db 字段的最大大小（或者如果不需要它，请删除注释完全）。

EJB 异常只是捕获验证异常并重新抛出它，因为您的代码片段放置在 EJB 中。

# neo4j - 在更复杂的 MATCH 语句中使用 neo4j 和 cypher 的可选相关路径

> ID：15164700
> 
> 赞同：1
> 
> 时间：2013-03-01T18:45:08.463
> 
> 标签：neo4j, cypher

我有一个查询，它正在查看公司、组、监视列表和成员的图表。有关数据库中的数据，请参阅[geoff 格式的虚拟数据的要点](https://gist.github.com/Jmaharman/534ee95e807aa193faf2)。我还设置了一个[控制台 neo4j](http://console.neo4j.org/r/vtrcct)供任何人使用。

查询的目的是获取组列表以及与组及其相关监视列表有关系的成员（成员是个人或公司的通用术语）的数量。

通过下面的查询，我得到了正确的警报号码，但我缺少“空组”，因为它没有任何成员或监视列表。我尝试将各种关系设为可选，但最终导致警报计数错误，因为它使用的是与该组相关的监视列表。我已经尝试了无数种编写查询的方法，但就是无法解决这个问题。

```
START company=node(233), group=node:node_auto_index("_type:group")
MATCH company-[:OWNS]->group-[?:LINKED_TO]->watchlist-[:WATCHING|APPOINTMENT*1..2]-member<-[:WATCHING]-group
RETURN group, COUNT(DISTINCT(member)) as alerts
ORDER BY group.name 
```

理想情况下，我想让整个路径段将一个组连接到成员，然后作为可选的监视列表，但是我无法在文档中找到如何做到这一点，或者这是不可能的。除了做两个查询之外，还有其他方法吗？

正确的结果是组和警报应该是：

```
Big Dot Coms, 1
Big Hitters, 4
Empty group, 0
Old CEOs, 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:08:12.143

我希望我理解正确，但我认为这就是你要找的：

```
START company=node:node_auto_index("name:\"Finance Ltd\""), group=node:node_auto_index("_type:group") 
MATCH company-[:OWNS]->group-[?:WATCHING]->member,group-[?:LINKED_TO]->watchlist 
WITH group, member, watchlist 
MATCH watchlist-[:WATCHING|APPOINTMENT*1..2]-member
RETURN group, count(distinct( member)) 
ORDER BY group.name 
```

基本上，您可以使用`WITH`关键字来逐步建立您的查询。首先获取所有组<->成员配对，包括不存在的配对。然后可以选择在监视列表中进行匹配，然后使用最终匹配来应用您的条件并返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:20:42.477

恐怕这对于 cypher 来说永远不可能，因为遍历模式： - 你想计算空组，这意味着没有节点`member`。想象一下这个简单的回溯：一旦搜索算法没有更多的节点可以进入，它就简单地返回一步。由于没有节点`member`，匹配模式永远不会匹配整个模式`company-[:OWNS]->group-[?:LINKED_TO]->watchlist-[:WATCHING|APPOINTMENT*1..2]-member<-[:WATCHING]-group`，而只会匹配`company-[:OWNS]->group-[?:LINKED_TO]->watchlist`. 因此，当没有找到匹配模式时，结果中也没有数据。

-i 建议在计数节点处完成匹配模式，即类似`company-[:OWNS]->group-[?:LINKED_TO]->watchlist-[:WATCHING|APPOINTMENT*1..2]-member`. 比你可能在计数结果中得到零。我尝试使用控制台，但它的数据中似乎没有任何空组，所以我无法为您创建最终查询。

# ember.js - Ember.js：从当前活动的路由中获取 id

> ID：15164703
> 
> 赞同：3
> 
> 时间：2013-03-01T18:45:18.027
> 
> 标签：ember.js, ember-data, ember-router

可能是我最近问过的最直接的问题。

给定这样设置的路线：

```
Social.Router.map(function() {
    this.resource('accounts', function(){
        this.resource('account', { path: ':account_id'});
    });
}); 
```

和这样的网址：

```
/accounts/12 
```

如果我想获取当前活动的帐户记录，我将如何获取 account_id？最终目标是我正在这样做：

```
acct = App.Account.find(12) 
```

当我更愿意这样做时

```
acct = App.Account.find(account_id) 
```

**更新 1**

这是 AccountsRou​​te：

```
Social.AccountsRoute = Ember.Route.extend({
    model: function() {
        return Social.Account.find();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:57:16.600

Ember 中没有规范的机制来存储和检索当前用户。最简单的解决方案可能是将您当前用户的帐户 ID 保存到`Social.currentAccountId`用户通过身份验证时（即在您的 ajax 请求的成功回调中）。然后你可以执行

```
Social.Account.find(Social.get('currentAccountId')) 
```

当您需要获取当前用户时。

# asp.net-mvc - 如何使用 JSON 后响应？MVC 4如何访问？

> ID：15164705
> 
> 赞同：1
> 
> 时间：2013-03-01T18:45:21.987
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4

我有以下内容：

```
 $.post('@Url.Action("getName")', postData, function(data) {

    // Can I use my json post data?

    }, 'json'); 
```

我的帖子回复我有

```
 {"Id":1,"Name":"John", "Age": 24} 
```

我不知道如何让这个帖子回复显示在我的页面视图上。

我正在使用 MVC 4，并且我已经在此页面中有一个模型，下拉选择更改会触发此帖子。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:57:15.490

您可以通过属性名称访问 JSON 数据：

```
$.post('@Url.Action("getName")', postData, function(data) {

    // Can I use my json post data?
    // Yes...
    // Given: data == {"Id":1,"Name":"John", "Age": 24}
    $('#someField').val(data.Name);
    $('#someOtherField').val(data.Age);
    // etc...

}, 'json'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:58:20.087

检查这个[http://docs.jquery.com/Ajax/jQuery.post](http://docs.jquery.com/Ajax/jQuery.post)

这应该像这样简单：

```
 $.post('@Url.Action("getName")', postData, function(data) {    
     alert(data.Id);
     console.log(data.Name);
     console.log(data.Age);
    }, 'json'); 
```

如果您需要遍历 json 结果，请使用[$.each](https://stackoverflow.com/questions/2342371/jquery-loop-on-json-data-using-each)

# c++ - C++ 从类方法返回一个对象数组

> ID：15164706
> 
> 赞同：1
> 
> 时间：2013-03-01T18:45:23.327
> 
> 标签：c++, arrays, oop

我试图返回一个二维的“房间”对象数组，作为数组中内容的一种打印/显示。

```
Room* m_map[10][10]; 
```

像这样生成：

```
//Initialise array to NULL
for(int x=0;x<10;x++)
{
    for(int y=0;y<10;y++)
        m_map[x][y] = NULL;
}

for(int n=0; n<10; n++)
{       
    for(int ran=0; ran<3; ran++)
    {
        int r_n = rand() % 10 ;

        Room* r = new Room(n, "Normal", true, false, false, true);
        m_map[r_n][n] = r;
    }       

} 
```

所以这给出的是数组中房间的分散。

然后，我想参考 NULL 为用户显示/打印这些房间所在的位置。

所以我可以例如如果NULL显示'#'，如果它是一个房间离开一个''。

我不确定我应该在方法中返回的位。

任何帮助或指出正确的方向将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T18:46:42.233

`std::array<Room, N>`如果数组是固定大小（并且大小在编译时已知），或者`std::vector<Room>`如果不是，则使用 a 会更容易。

```
#include <array> // or <tr1/array> if no C++11

std::array<Room, TheSize> returnArray() const
{
    return m_map;
} 
```

不过要小心，根据用例，您*可能*希望返回引用，而不是副本：

```
const std::array<Room, TheSize>& returnArray() const
{
    return m_map;
} 
```

也就是说，如果您只想打印一些对象，那么不要公开诸如数组之类的实现细节。您可以提供打印功能，更好的是，覆盖`std::ostream& operator<<`您的类型。

```
// inside your class declaration:
friend 
std::ostream& operator<<(std::ostream& o, const MyClassWithRooms& r)
{
  // loop over r.m_map and print to o
} 
```

**编辑**如果数组是二维的（如评论中所述），则有一些选项：嵌套数组结构（`std::array<std::array<T,N>,M>`或“平面”`N*M`数组，以及一些小心使用索引）。

**编辑 2**：如果您需要存储可以设置或不设置的东西，您可以使用数组或向量`std::unique_ptr<Room>`代替`Room`raw 的普通旧 s `Room*`。另一种选择是简单地使用 2D 地图，一个`std::map<int, std::map<int, Room>>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:47:12.667

最简单的方法是`std::vector< Room >`为您的数组使用 a 。这样您就不必担心内存管理，并且大小内置在数组中。

# sql - 创建加权平均值 - 删除 NULL 值的权重

> ID：15164707
> 
> 赞同：13
> 
> 时间：2013-03-01T18:45:25.293
> 
> 标签：sql, sql-server, weighted-average

所以有一个 SQL 函数 AVG()，它取一列中所有值的平均值，忽略所有 NULL 值。如果需要进行加权平均，那么他们只需将 SUM(value * weight)/SUM(weight) 与 Group By 子句一起使用。

如果我想做后者，但我的一些值是 NULL，那么我将如何告诉 SQL 忽略 SUM(weight) 函数中具有 NULL 值观察的权重？

我的另一个问题是我一次平均取 90 个不同的列，所以我想避免为这个计算创建 90 个新的权重变量。

让我知道我是否已经说清楚了。

我正在使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-01T18:46:38.217

您将使用条件求和作为分母：

```
select sum(value*weight) / sum(case when value is not null then weight else 0 end) 
```

如果权重总是大于 0，那么您不必担心除以 0。只有当所有值都为 NULL 时才会发生这种情况。并且，在这种情况下，分子将为 NULL。

您也可以将其表述为：

```
select sum(value*weight) / sum(case when value is not null then weight end) 
```

或作为：

```
select sum(case when value is not null then value*weight end) / sum(case when value is not null then weight end) 
```

这更冗长，但很清楚您忽略了分子和分母中的 NULL 值。

# visual-studio-2010 - 如何在解决方案资源管理器中打开 TFS 工作区

> ID：15164708
> 
> 赞同：0
> 
> 时间：2013-03-01T18:45:27.133
> 
> 标签：visual-studio-2010, version-control, tfs

为什么我在项目中的图标旁边看不到任何 TFS 图标？我在 TFS 2012 Express 中有这个项目，我使用 get 命令将它下载到我的本地路径。然后我转到 Visual Studio 的文件 > 打开项目命令并打开文件。这不是您将团队项目添加到解决方案资源管理器的方式吗？

请注意，在下面的屏幕截图中，没有蓝色锁或加号来指示服务器上文件的状态。

![在此处输入图像描述](../Images/804eacf0e4f2357359a7fd45ef2799ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:20:43.377

当我双击解决方案文件时，解决方案未绑定到 TFS。我得到了一个带有绑定按钮的对话框，它将解决方案绑定到 TFS，现在一切都受版本控制。

# mediawiki - MediaWiki 模板继承参数。

> ID：15164710
> 
> 赞同：2
> 
> 时间：2013-03-01T18:45:29.613
> 
> 标签：mediawiki, mediawiki-templates

是否可以让一个模板从另一个模板继承参数？我想不出更好的方式来表达这个问题，所以请允许我举个例子。

假设您有两个模板`{{test1}}`，`{{test2}}`并且正在一个名为“测试页”的页面上使用。

**模板：测试1：**

```
{{{par1}}}<br>
{{{par2}}}<br>
{{test2}}
<!--{{test2|par3={{{par3}}}|par4={{{par4}}}}}--> 
```

**模板：Test2：**

```
{{{par3}}}<br>
{{{par4}}}<br> 
```

**测试页面：**

```
{{test1|par1=aaa|par2=bbb|par3=ccc|par4=ddd}} 
```

所以我想要发生的是让它显示：

```
aaa
bbb
ccc
ddd 
```

执行此操作的正常方法是包含在`Template:Test1`. 反正有没有让它自动传递参数？对于如此平凡的事情，明确地说出来并不是问题，`par3={{{par3}}}`但是当模板变得更加复杂时，它可能真的很有帮助。任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:52:26.893

您要描述的是参数转发。不，仅使用 mediawiki 模板是不可能的。

正在开发的新 Lua 引擎（可作为 Extension:Lua 进行测试，最终旨在成为核心的一部分）似乎使这成为可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:30:15.220

您可以使用

```
{{test2|{{{arg1}}}={{{par1}}}|{{{arg2}}}={{{par2}}}}} 
```

in `test1`，并将其称为

```
{{test1|arg1=par1|arg2=par2|par1=foo|par2=bar}} 
```

但是你可以通过等待 Lua 来节省相当多的理智。（它已经部署在一些较小的维基百科上，并将在 3 月份部署到所有维基百科上，所以等待时间并不长。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T21:26:11.280

首先，您的 Test1 模板在没有参数的情况下调用 Test2 是没有意义的。您将其调用为 {{test2}}（无参数）。

如果你想要页面全局变量，我建议使用 Mediawiki 变量插件。 [http://www.mediawiki.org/wiki/Extension:变量](http://www.mediawiki.org/wiki/Extension:Variables)

此外，最好使用竖线“默认”模板参数，例如 {{{par1|}}} 或 {{{par2|None}}}。否则，如果未给出参数，则生成的 wikitext 将是带有大括号的参数名称。例如：{{{par1|}}} 如果未给出该参数，则返回一个空白字符串，但如果该参数不存在，{{{par1}}} 实际上会生成“{{{par1}}}”作为字符串，这可能没有用。

回到我使用变量的示例，我已经修改了您的示例（par1 是进入 test1 模板的参数，par2 是进入 test2 模板的参数）：

模板 test1 变为：

```
{{{par1|}}}<br/>
{{#vardefine: par2|{{{par2|}}} }}
{{test2}} 
```

模板 test2 变为：

```
{{#var:par2}}<br/> 
```

# windows-phone-7 - 是否可以在代码中设置或更改样式资源的属性？

> ID：15164715
> 
> 赞同：0
> 
> 时间：2013-03-01T18:45:49.050
> 
> 标签：windows-phone-7, xaml, staticresource

在我的 xaml 页面上，我有使用相同样式的严格按钮。

```
<phone:PhoneApplicationPage.Resources>
    <Style x:Key="NumberButtonStyle" TargetType="Button">
        ::
        <Setter Property="Width" Value="183" />
        <Setter Property="Height" Value="130" />
        ::
    </Style>
</phone:PhoneApplicationPage.Resources>

<Button Style="{StaticResource NumberButtonStyle}" Click="NumberButtonClick" CommandParameter="1">1</Button> 
```

是否可以在不设置每个按钮的值的情况下设置按钮的宽度？

（宽度是使用代码隐藏中的屏幕分辨率计算的）

# javascript - 使用与窗口顶部相同的协议加载嵌入式 iframe 以防止违反同源策略

> ID：15164717
> 
> 赞同：0
> 
> 时间：2013-03-01T18:45:55.387
> 
> 标签：javascript, sdk, cross-domain, same-origin-policy, easyxdm

我们正在开发嵌入式应用程序（作为 IFRAME 注入我的网站）使用的 Javascript SDK，以帮助他们使用一些资源，例如加载一些对话框：例如授权对话框或共享框（如 Facebook）。

我们的 SDK 使用 easyXDM 或多或少地像这样工作：

**HTML 页面**
------------------------------------------------ -------------------------------------------------- --------------------------
| http / https：**www.mysite.com** /embedded-app/
| （一些 JS 类）
|
|- - - - - | -------------------------------------------------- -------------------------------------------------- --------------
|- - - - - | (IFRAME)
|- - - - - | https://www.some-embedded-app-domain.com **/page.html** |
- - - - - | （从使用easyXDM的“http/https:www.mysite.com/sdk.js”加载并实例化SDK）
|- - - - - |
|- - - - - | - - - - - |----- -------------------------------------------------- ------------------------------------------
|- - - - - | - - - - - | （easyXDM注入的IFRAME）
|- - - - - | - - - - - | http / https: **www.mysite.com** /embedded_provider.html
|- - - - - | - - - - - | （与 window.top 通信以使用那些 wndow.top JS 类）
|- - - - - | - - - - - |
|- - - - - | - - - - - |
|- - - - - | - - - - - |
|- - - - - | - - - - - |

我的网站可以同时使用 http/https 加载，但嵌入式应用程序必须**始终**使用HTTPS 提供服务。为了让easyXDM注入的内部iframe与我的站点通信，两个url中的主机和协议**必须匹配**，否则会出现同源策略违规。

问题：我如何告诉从外部应用程序 URL 加载的 SDK 中的代码，外部窗口（我的站点）正在使用 http 或 https，以使用相同的协议呈现 embedded_provider.html，从而允许 JS 通信他们两个之间？

我能想到的唯一解决方案是以某种方式通知嵌入式应用程序我们当前正在从 http / https 浏览，然后它可以正确实例化它（使用标志 use_https 左右），但我宁愿不强制应用程序来了解我们正在使用的协议。

你知道还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T21:01:13.070

我能想到的唯一解决方案（虽然还没有测试过）是让 easyXDM 放入 2 个测试 iframe - 一个在[http://www.mysite.com/url_test](http://www.mysite.com/url_test)上，一个在[https://www.mysite 上。 com/url_test](https://www.mysite.com/url_test)。

然后让您的 /url_test 网页尝试访问 window.top.location.href。如果 /url_test 可以看到该位置，则它必须在同一个域上。然后成功的 /url_test 页面将通过 easyXDM 与父 iframe（在 some-embedded-app.com 上）通信，以在正确的主机上创建您真正想要的 iframe。

注意：错误主机上的 /url_test 页面将开始在控制台中转储同源 iframe 警告。:)

注意＃2：如果这种方法有效，您可以通过说“由于产品域，我知道这些嵌入中的 80% 将在 http 上进行迭代改进。我将首先在 http 上创建 /url_test，然后尝试https 作为备份。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:47:42.603

使用 // 代替 http:// 或 https://

浏览器会整理出来

# javascript - iOS / Android HTML javascript相机减小图片大小

> ID：15164718
> 
> 赞同：0
> 
> 时间：2013-03-01T18:45:55.777
> 
> 标签：javascript, android, html, ios

我在`<input type='file'/>`IOS 和 Android 设备上使用了相当标准的设备。如果我选择浏览，它会让我用相机拍照并上传。

我遇到的问题是这些 jpeg 的平均大小很大（每个约 1.4 mb），尤其是通过 3G 连接上传。有没有办法在上传它们之前使用 javascript 或其他东西使它们变小？

# maven-3 - maven插件冲突

> ID：15164719
> 
> 赞同：1
> 
> 时间：2013-03-01T18:45:58.313
> 
> 标签：maven-3, wsdl2java, maven-jaxb2-plugin

我是 Maven 的新手。我的 maven 项目中有两个 maven 插件，当我生成源时，其中一个始终生成源（`jaxb2-maven-plugin`）但其他不（`wsdl2java`）生成源。他们彼此冲突。我非常需要他们两个，他们过去工作过，但现在不工作了。我尝试注释掉，`jaxb2-maven-plugin`然后其他插件`wsdl2java`就可以工作了。有什么我需要做的吗？

```
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>jaxb2-maven-plugin</artifactId>
 <version>1.3</version>
 <executions>
   <execution>
<phase>generate-sources</phase>
<goals>
        <goal>xjc</goal>
</goals>
</execution>
</executions>
<configuration>
    <packageName>com.x.x.model</packageName>                           
<generatePackage>com.x.x.model</generatePackage>
<schemaDirectory>src/main/resources/DavisTemplates</schemaDirectory>
<outputDirectory>${project.build.directory}/generated-sources/</outputDirectory>
</configuration>
</plugin>

    <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>axistools-maven-plugin</artifactId>
            <version>1.4</version>
            <configuration>
                <!-- SourceDirectory should only refer to the directory where the wsdl 
                    resides and not the actual wsdl file itself -->
                <sourceDirectory>src/main/resources/wsdl/</sourceDirectory>
                <outputDirectory>${project.build.directory}/generated-sources/</outputDirectory>
                <packageSpace>com.paypal.touchstone.posapiserv</packageSpace>
                <!-- <wsdlFile>${posApiVersion}.wsdl</wsdlFile> -->
                <serverSide>false</serverSide>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# cdma - 通过语音通话发送数据

> ID：15164720
> 
> 赞同：0
> 
> 时间：2013-03-01T18:45:58.460
> 
> 标签：cdma

是否可以通过语音通话发送一些二进制数据？即“客户端”调用“服务器”号码并将编码数据作为声音发送？使用 CDMA 可以达到什么样的估计速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:00:01.517

从技术上讲，是的。它被称为带内信令，但它很棘手。当这些位通过电话、语音开关、压缩器等时，很多可能会出错。（二进制数据真的不喜欢那些东西——没有 0.8 位 :-)）我们过去常常做这样的事情在 90 年代中期，允许您在蜂窝语音通道上使用调制解调器。它有效吗？有点 - 但波特率很差，漫游和其他各种项目使它变得更糟。

# android - Android - 如何使用视图布局尺寸裁剪 jpeg

> ID：15164721
> 
> 赞同：3
> 
> 时间：2013-03-01T18:46:00.110
> 
> 标签：android, graphics, android-camera

新手用户问题：

我已经搜索和试验了几天，需要一些帮助。我可能已经阅读了有关此主题的所有 SO 帖子，但我仍然无法弄清楚。

我正在尝试裁剪相机预览图像的特定区域。问题是蓝色框由顶部 = 150 和左侧 = 38、高度 = 292 和宽度 = 600 的布局定义。图像的高度 = 2448 和宽度 = 3264。

大框是相机预览屏幕，小框是我要裁剪的部分（显然我还没有发布图片的能力）。

```
-----------------------------------------
| |
| |
| |
| --------- |
| | | |
| --------- |
| |
-----------------------------------------

```

如何裁剪图像，以便只剩下框中的部分？我将在另一个活动中展示它，所以我不担心那部分。

只是为了使事情复杂化，盒子大小和图像大小会根据手机而变化，我需要使用 API 8（2.2 版，Froyo）。

我也不想将图像保存到文件中，因为那样我必须对其进行加密（图片将是存款支票的图像）。

我正在使用 Camera.takePicture() 和 jpegCallback，如下面的代码片段所示（initialBitmap 是上面的“大盒子”，而 rl 是“小盒子”）：

```
 PictureCallback jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        if ( data != null && data.length > 0 ) {
            Bitmap initialBitmap = BitmapFactory.decodeByteArray(data, 0, data.length);

            int bitmapHeight = initialBitmap.getHeight();
            int bitmapWidth = initialBitmap.getWidth();

            // get the "picture" frame
            RelativeLayout rl = (RelativeLayout) findViewById( R.id.clear_layout );

            int frameX = rl.getLeft();
            int frameY = rl.getTop();
            int frameHeight = rl.getHeight(); 
```

希望视图坐标/尺寸和位图之间存在简单的数学关系。

我也对任何更好的处理方式持开放态度，但尝试使用预览数据本身（太小）并操纵位图（内存不足错误）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T20:13:28.413

万一有人在乎，我从来没有找到这个问题的答案。我最终以不同的方式解决了这个问题。我使用了完整的预览区域，只是让我的“拍照”按钮足够透明，不会碍事。我也从未裁剪过，但图像大小接近裁剪后的大小。

根据我去年学到的所有知识，我认为预览大小和生成的 jpg 文件大小之间没有关系。对于不同的手机摄像头，这种关系似乎有所不同。

如果有人找到了关系，我仍然很乐意了解它。

# excel - 将 *.asc 文件保存为 Excel 文件

> ID：15164722
> 
> 赞同：3
> 
> 时间：2013-03-01T18:46:03.130
> 
> 标签：excel, excel-2010, vba

我有 *.asc 文件要打开、重新格式化，然后另存为与原始文件同名的 Excel 文件（扩展名为 xls）。

我使用宏记录器和我在网上找到的代码来打开单个文件并根据需要重新格式化它们。这部分代码有效。

我无法保存为 Excel 文件。它给了我`Run Time error of 1004 Method ‘SaveAs’ of object ‘_Workbook’ failed`. 我已经尝试了很多我在网上找到的不同代码（仍然在那里，只是注释掉了）但没有一个工作。

两个问题：

1.  您能否提供解决 SaveAs 问题的建议？

2.  您能否提供有关如何自动打开和保存一个文件夹中的所有文件的建议？

这是我的代码：

```
Sub OpenFormatSave()
'
' OpenFormatSave Macro
'

Dim StrFileName As String
Dim NewStrFileName As String
    ChDir _
        "C:\Users\Owner\Documents\work_LLRS\GoM\NASA_data\Satellite_files_GoM_3Dec2012"
    StrFileName = Application.GetOpenFilename("NASA Files (*.asc), *.asc")
    If TypeName(StrFileName) <> "Boolean" Then
        Workbooks.OpenText Filename:=StrFileName, _
        Origin:=437, StartRow:=1, DataType:=xlDelimited, TextQualifier:= _
        xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=True, Semicolon:=False, _
        Comma:=False, Space:=True, Other:=False, FieldInfo:=Array(Array(1, 1), _
        Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), Array(7, 1), Array(8, 1), _
        Array(9, 1), Array(10, 1)), TrailingMinusNumbers:=True
    End If
    Rows("1:1").Select
    Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
    Range("A1").Select
    ActiveCell.FormulaR1C1 = "Year"
    Range("B1").Select
    ActiveCell.FormulaR1C1 = "Day_of_Year"
    Range("C1").Select
    ActiveCell.FormulaR1C1 = "Longitude"
    Range("D1").Select
    ActiveCell.FormulaR1C1 = "Latitude"
    Range("E1").Select
    ActiveCell.FormulaR1C1 = "Chla_mg_m-3"
    Range("F1").Select
    ActiveCell.FormulaR1C1 = "POC_mmolC_m-3"
    Range("G1").Select
    ActiveCell.FormulaR1C1 = "SPM_g_m-3"
    Range("H1").Select
    ActiveCell.FormulaR1C1 = "aCDOM355_m-1"
    Range("I1").Select
    ActiveCell.FormulaR1C1 = "DOC_mmolC_m-3"
    Range("J1").Select
    ActiveCell.FormulaR1C1 = "L2_flags"

    Columns("A:B").Select
    Selection.NumberFormat = "0"
    Columns("C:D").Select
    Selection.NumberFormat = "0.0000"
    Columns("E:E").Select
    Selection.NumberFormat = "0.000"
    Columns("F:F").Select
    Selection.NumberFormat = "0.0"
    Columns("G:H").Select
    Selection.NumberFormat = "0.000"
    Columns("I:I").Select
    Selection.NumberFormat = "0.0"
    Columns("J:J").Select
    Selection.NumberFormat = "0.00E+00"

'Mid(StrFileName, 1, InStrRev(StrFileName, ".")) = "xlsm"

'With ActiveWorkbook
     'NewStrFileName = Replace(.StrFileName, ".asc", ".xls")
   ' .SaveAs Filename:=FullName, FileFormat:=xlsx, AddToMRU:=False
   ' .Close SaveChanges:=True
'End With

StrFileName = ThisWorkbook.Name
GetName:
StrFileName = Application.GetSaveAsFilename(NewStrFileName, _
    fileFilter:="(*.xlsm), *.xlsm, (*.xlsx), *.xlsx,(*.xls), *.xls")

' FileMonth is the Workbook name, filter options to save a older version file
'If Dir(NewStrFileName) = "" Then
 '   ActiveWorkbook.SaveAs NewStrFileName
'Else
 '   If MsgBox("That file exists. Overwrite?", vbYesNo) = vbNo Then GoTo GetName
  '  Application.DisplayAlerts = False
   ' ActiveWorkbook.SaveAs Filename:=NewStrFileName, FileFormat:=xlsx, AddToMRU:=False
    'Application.DisplayAlerts = True
'End If
    'ActiveWorkbook.Close SaveChanges:=True

ActiveWorkbook.SaveAs Filename:=NewStrFileName, FileFormat:=xlsx, CreateBackup:=False

'With ThisWorkbook
    'FullName = Replace(.StrFileName, ".asc", ".xlsx")
    '.Save
    '.SaveAs StrFileName, FileFormat:=xlsx
    '.Close
    'SaveChanges:=True
'End With

'StrFileName = Split(ActiveWorkbook.FullName, ".xls")(0)

'ActiveWorkbook.SaveAs Filename:="...", FileFormat:=xlsx, AddToMRU:=False
'ActiveWorkbook.Close SaveChanges:=True

'ActiveWorkbook.Save
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:20:16.997

将 SaveAs 方法的 FileFormat 部分更改为：

```
FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:44:55.257

要遍历文件夹中的所有文件，您有两种选择。

1.  使用[内置的 VBA Dir 函数](http://msdn.microsoft.com/en-us/library/gg278779%28v=office.14%29.aspx)。
2.  使用[FileSystemObject](http://msdn.microsoft.com/en-us/library/hww8txat%28v=vs.84%29.aspx)中的方法。

我将举一个 Dir 的示例，因为它不需要在您的 VBA 项目中添加引用。不幸的是，Dir 界面远不如 FileSystemObject 直观和现代。

```
Dim path As String

path = Dir("C:\Users\example\Documents\AscFiles\*.asc")
Do
    If path = vbNullString Then Exit Do

    ' do something with path here
    Debug.Print path

    path = Dir
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:20:21.103

您有两个变量`StrFileName`（可能是当前文件名）和`NewStrFileName`（可能是新文件名）。

在这段代码中：

```
StrFileName = Application.GetSaveAsFilename(NewStrFileName, _
    fileFilter:="(*.xlsm), *.xlsm, (*.xlsx), *.xlsx,(*.xls), *.xls") 
```

您错误地使用了这些变量。“另存为”对话框打开时建议的文件名基于`NewStrFileName`但从未被赋予值，因此是一个空字符串`""`。然后将用户选择的值保存到`StrFileName`

当您使用此代码保存文件时：

```
ActiveWorkbook.SaveAs Filename:=NewStrFileName, FileFormat:=xlsx, _
    CreateBackup:=False 
```

该`NewStrFileName`变量仍然包含`""`，因此您试图保存文件而不给它一个显然会产生错误的名称。

对于一个简单的修复，只需将调用中的两个变量交换为`GetSaveAsFilename`：

```
NewStrFileName = Application.GetSaveAsFilename(StrFileName, _
    fileFilter:="(*.xlsm), *.xlsm, (*.xlsx), *.xlsx,(*.xls), *.xls") 
```

这不是实现您想要的最佳方式，但它至少应该有效

# java - 接收数据报包

> ID：15164724
> 
> 赞同：1
> 
> 时间：2013-03-01T18:46:09.770
> 
> 标签：java, udp, datagram

在`DatagramPacket`类中，所有构造函数都需要一个 int 参数作为“长度”。为什么我`DatagramPacket`在尝试接收时需要设置a的长度，因为我不一定知道数据包有多长？我应该将其设置为哪个数字？

编辑：让我把我的问题改成这样：

如果`DatagramSocket.receive`方法有签名

```
public DatagramPacket receive() {}; 
```

代替

```
public void receive(Datagrampacket p) {}; 
```

这不是更有意义吗？如上所述，接收者通常不知道数据包的样子。

由于交付服务类比经常应用于 UDP，假设：

DatagramSocket 就像一个邮箱。DatagramPacket 就像包裹信封。DatagramPacket.data 是信封内的内容。对于送货服务，收件人提供邮箱但不提供信封。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:49:28.160

好吧，您要求它写入您*也*提供的字节数组。因此，请确保您的字节数组与您希望处理的最大数据包一样大，并为`length`参数传入数组的长度。

编辑：对于已编辑的问题，该 API 意味着接收代码每次都必须创建一个新缓冲区。使用现有的 API，同一个字节数组可以用于多个调用，因为调用者可以决定何时使用完它。

现在诚然，这样的重载是有意义的：

```
public DatagramPacket(byte[] buffer)
{
    this(buffer, buffer.length);
} 
```

……但那是另一回事。

# c# - LINQ查询日期范围？

> ID：15164725
> 
> 赞同：-1
> 
> 时间：2013-03-01T18:46:12.030
> 
> 标签：c#, asp.net, linq

我需要一些棘手的日期范围函数。

时间表有两件事……开始日期和时间。

结束日期可以通过以下方式计算：

```
 ResolveEndDate(DateTime start, double hours)
   {
       int days = (int)Math.Floor(hours / GetDayHours());

       DateTime dt = start.AddDays(days);
   } 
```

这是因为一个工作日有 N 个小时等等。

基于此，我需要找到以下项目：

*   在范围之前开始，在范围之后结束
*   开始之前和结束之内
*   从内开始，从内结束
*   开始于之后结束

我怎么能写一个 LINQ 查询来做到这一点？

鉴于这样的事情：

```
 public static IEnumerable<Project> GetProjectRange(IEnumerable<Project> projects, DateTime start, DateTime end)
       {
           return from p in projects
                  where p.Schedule.DateFrom.Value...
                  select p;
       } 
```

另一个棘手的事情是只应考虑月日和年。不应该考虑时间。

1 个满足所有 4 个条件的查询。

我写这个查询没有问题，但我这样做的方式将是一个巨大的混乱。我希望有更好的方法来做日期范围。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:00:54.143

像这样的东西？

```
return 
    from p in projects
    where 
        (      p.Schedule.DateFrom.Value < start 
            && p.Schedule.DateTo.Value > end
        ) || // 1.
        (      p.Schedule.DateFrom.Value < start 
            && p.Schedule.DateTo.Value > start 
            && p.Schedule.DateTo.Value < end
        ) || // 2\.              
        (      p.Schedule.DateFrom.Value > start
            && p.Schedule.DateFrom.Value < end
            && p.Schedule.DateTo.Value > start
            && p.Schedule.DateTo.Value < end
        ) || // 3\.        
        (      p.Schedule.DateFrom.Value > start
            && p.Schedule.DateFrom.Value < end
            && p.Schedule.DateTo.Value > end
        )    // 4.
    select p; 
```

# forms - JDeveloper 10g 表单设计视图错误

> ID：15164727
> 
> 赞同：0
> 
> 时间：2013-03-01T18:46:23.047
> 
> 标签：forms, oracle-adf, jdeveloper

我在 JDeveloper 10g 中有一个奇怪的问题。

某些表单在“视图”窗口中看不到，因此我无法在 Poperty 检查器中选择和编辑属性，在 UI 中也缺少完整的结构。 ![没有 UI 的表单](../Images/0f139df8d7d845bcd3b837a1b99a81d8.png)

除此之外，表格工作正常。

这个还行。

![在此处输入图像描述](../Images/b4b9301b20822c3ffc489371bb367437.png)

**如何在不需要重新创建 od 表单的情况下解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:37:24.393

确保你有 JBinit 方法。将工作形式与非工作形式进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:16:23.117

此更改解决了问题。我还不知道是什么导致这个表单被错误地创建。

```
 //JScrollPane scPane = new JScrollPane(dataPanel); //This was surplus
    //topPanel.add(scPane, BorderLayout.CENTER);    //This was surplus
    topPanel.add(dataPanel, BorderLayout.CENTER); //This was missing 
```

# php - 多语言网站：Cookie 或 URL 元素

> ID：15164728
> 
> 赞同：2
> 
> 时间：2013-03-01T18:46:27.063
> 
> 标签：php, codeigniter, multilingual

我正在使用 CodeIgniter 制作一个动态多语言网站。

**我应该如何在语言之间进行导航？**

最优雅的解决方案是在访问者单击标记时使用 cookie，并记住最长可能时间的决定并给他翻译的语言字符串。每种语言的 URL 都相同。只是内容和元标记会根据所选语言而有所不同。

另一种方法是在 URL 中添加语言片段，例如 /en/ /fr/ /es/ ...

对于 SEO 优化和稳定性，最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T19:06:56.863

SEO 的最佳做法是将其放在您的 url 字符串 /en/ /fr/ /es/ 中。否则，您的网站将仅以一种语言编入索引，或者某些页面以一种语言编入索引，而另一些页面以另一种语言编入索引。

最好将每个不同的内容（页面+语言）放在不同的页面上，以避免被搜索引擎混淆。

在元数据中设置语言也是一个好习惯：

```
<meta http-equiv="Content-Language" content="EN"/> 
```

# c# - 在 C# 类型化 TableAdapter 查询中向 GET_LOCK 查询提供参数

> ID：15164729
> 
> 赞同：2
> 
> 时间：2013-03-01T18:46:29.980
> 
> 标签：c#, mysql, .net, innodb

我试图在访问单个 MySQL (InnoDB) 数据库的多个自动化服务之间保持数据一致性。目前，我正在尝试使用 GET_LOCK 来完成此操作。我正在使用自动生成的类型化数据集，并配置了以下查询：

```
SELECT GET_LOCK('@id', 1) 
```

适配器也接受一个`Int32`作为参数。问题是该`'@id'`字段被解释为字符串文字，因此我无法获得动态分配的锁定字符串。我的问题是这是否可能。

我目前的解决方法是：

```
DataSetTableAdapters.myTableAdapter typedAdapter = new DataSetTableAdapters.myTableAdapter();

MySql.Data.MySqlClient.MySqlCommand selectCommand_backup = typedAdapter.Adapter.SelectCommand;

typedAdapter.Adapter.SelectCommand = new MySql.Data.MySqlClient.MySqlCommand();
typedAdapter.Adapter.SelectCommand.Connection = typedAdapter.Connection;
typedAdapter.Adapter.SelectCommand.CommandText = string.Format("SELECT GET_LOCK('{0}_{1}', 1)", tableName, id);
typedAdapter.Adapter.SelectCommand.CommandType = System.Data.CommandType.Text;

typedAdapter.Connection.Open();
typedAdapter.Adapter.SelectCommand.ExecuteScalar();
typedAdapter.Connection.Close();

typedAdapter.Adapter.SelectCommand = selectCommand_backup; 
```

我也对其他想法持开放态度。如果可能，我想防止冲突解决，因为处理自动化系统将是一项挑战。

# git - git commit -v [file] 显示完整差异而不是通过 git add -e [file] 创建的手动补丁

> ID：15164734
> 
> 赞同：0
> 
> 时间：2013-03-01T18:46:40.737
> 
> 标签：git

我已经手动添加了对索引的更改

```
git add -e [file] 
```

..并手动编辑已干净应用的补丁。

```
Git diff --cached [file] 
```

...正确显示我要应用的更改。

但是，当我这样做时

```
git commit -v [file] 
```

提交消息底部显示的差异显示了自上次提交以来对文件的所有更改，而不仅仅是我手动编辑的补丁。

这是一个错误吗？或正确的行为？似乎应该通过将索引与最新提交进行差异来生成此差异......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:07:48.670

不要在`git commit`命令中列出文件名。Saying`git commit foo`将提交所有更改，`foo`无论已经上演了什么。

# jquery - 使用 jquery 从 .ascx 访问 .aspx div

> ID：15164738
> 
> 赞同：0
> 
> 时间：2013-03-01T18:46:57.040
> 
> 标签：jquery, asp.net, dom, web-controls

我正在 VS 2010 中开发一个 ASP.NET 4.0 webforms 应用程序。

我有一个带有 Web 控件 (A.ascx) 的 .aspx 页面 (A.aspx)。

现在 A.aspx 有一个 id="divToggle" 的 div。我希望能够使用 jquery 从 A.ascx 中访问“divToggle”。我尝试使用 $('#divToggle') 和 $.find('#divToggle') 但都返回 null。我在同一个控件/页面上以这种方式访问​​元素没有问题。

有没有办法可以在 jquery 中从 A.ascx 访问 A.aspx 的“divToggle”？

在此先感谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:55:55.490

脚本代码在哪里添加到页面中？如果找不到元素，则在将元素添加到 DOM 之前运行脚本代码。尝试将代码放入[.ready()](http://api.jquery.com/ready/)：

```
$(document).ready(function() {  
    // code
}); 
```

# ruby - 将隐式等待和显式等待结合在一起会导致意外的等待时间

> ID：15164742
> 
> 赞同：17
> 
> 时间：2013-03-01T18:47:15.913
> 
> 标签：ruby, selenium, selenium-webdriver, webdriver

我的两种情况-

1) 首先

```
@driver.manage.timeouts.implicit_wait = 30
@wait = Selenium::WebDriver::Wait.new(:timeout => 45) # Time greater than implicit
@wait.until {@driver.find_element(:tag_name => "body").text.include?("hey")} 
```

这使驱动程序有 45 秒的时间来搜索文本（这是预期的）

2) 第二

```
@driver.manage.timeouts.implicit_wait = 30
@wait = Selenium::WebDriver::Wait.new(:timeout => 5) # Time less than implicit
@wait.until {@driver.find_element(:tag_name => "body").text.include?("hey")} 
```

现在这给了驱动程序**30 秒**的时间来搜索文本（不是预期的）

有没有办法让硒只`explicit`等待等待时间而不是两者中的较大者？

注意 - 不声明隐式等待时间不是一种选择，因为每次驱动程序无法找到某些东西时，我都无法让 selenium 挂起。

使用 Selenium 版本 30、windows、ff

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-02T13:24:22.223

不要混合隐式和显式等待。部分问题在于隐式等待通常（但可能并不总是！）在 WebDriver 系统的“远程”端实现。这意味着它们被“嵌入”到 IEDriverServer.exe、chromedriver.exe、安装到匿名 Firefox 配置文件中的 WebDriver Firefox 扩展以及 Java 远程 WebDriver 服务器 (selenium-server-standalone.jar)。显式等待仅在“本地”语言绑定中实现。使用 RemoteWebDriver 时事情会变得更加复杂，因为您可能会多次使用系统的本地端和远程端。

这就是它的工作方式：本地代码 -> Java 远程服务器 -> 远程服务器上的本地 Java 语言绑定 -> “远程”组件，如 Firefox 扩展、chromedriver.exe 或 IEDriverServer.exe。在网格的情况下它甚至更复杂，因为在它们之间可能还有其他的跃点。

因此，当您尝试混合隐式等待和显式等待时，您就误入了“未定义的行为”。您可能能够弄清楚该行为的规则是什么，但随着驱动程序的实现细节发生变化，它们会发生变化。所以不要这样做。

如果您不使用隐式等待，则当找不到元素时，您不应该遇到“挂起”。驱动程序应立即引发 NoSuchElement 异常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-04T09:48:46.347

最佳实践是在每次测试开始时设置implicitlyWait()，并使用WebDriverWait() 等待元素或AJAX 元素加载。

但是，implicitlyWait() 和 WebDriverWait() 在同一个测试中不能很好地协同工作。您必须在调用 WebDriverWait 之前使 implicitlyWait() 无效，因为 implicitlyWait() 还设置“driver.findElement()”等待时间。

每当您使用 WebDriverWait() 和 implicitlyWait() 已经设置了一些初始值时，请按照以下步骤操作 -

1.  取消隐式Wait()
2.  执行WebDriverWait()，并返回元素
3.  再次隐式重置Wait()

示例 Java 代码 -

```
driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS); //nullify implicitlyWait() 

WebDriverWait wait = new WebDriverWait(driver, timeOutInSeconds); 
element = wait.until(ExpectedConditions.visibilityOfElementLocated(by));

driver.manage().timeouts().implicitlyWait(DEFAULT_WAIT_4_PAGE, TimeUnit.SECONDS); 
```

# ios - 播放列表的 MPMediaQuery（在 iPod 上）包括一些专辑

> ID：15164743
> 
> 赞同：0
> 
> 时间：2013-03-01T18:47:16.650
> 
> 标签：ios, objective-c, collections, playlist, mpmediaquery

我已经实例化了一个查询来请求我 iPod Touch 上所有播放列表的集合。从 MPMediaQuery 集合属性返回的结果包含 43 个项目。其中包括原生音乐应用程序显示的所有 17 个播放列表。但是，该集合还包含 26 个“播放列表”，它们实际上是我的 iPod 库中的专辑。这代表了 iPod 上的一些（但不是全部）专辑。

我试图查看是否有 MPMediaPlaylist 属性可以将专辑与实际播放列表区分开来，但无济于事。我查看了收藏的各个部分，看看真正的播放列表是否保存在与专辑不同的部分中，但只有一个部分。最后，我查看了专辑是否有 PersistantID，文档表明它是播放列表独有的。数组中的所有项目都有一个 PersistantID。

音乐应用程序只显示 17 个实际播放列表没有问题，所以一定有我遗漏的东西。这是用于构建查询的代码：

```
MPMediaQuery * myPlaylistsQuery = [ MPMediaQuery playlistsQuery ];
NSArray      * playlists        = [ myPlaylistsQuery collections ]; 
```

以下是询问“播放列表”数组的内容时记录的数据示例：

==================================================== ===
播放列表列表
.... 播放列表集合中有 01 个部分.... 播放列表集合 Bach
中有 43 个 MPMediaPlaylist 对象 .... Persistant ID: 17002820337772537981 Best of Simon and Garfunkel .... Persistant ID: 2965021518813542622 Blue .... 持久 ID: 11514004552991695558 Blues .... 持久 ID: 14243796139384893728 .... (etc)

在上面的列表中，条目“Bach”、“Best of Simon and Garfunkel”和“Blue”代表专辑。条目“Blues”代表了我在 iTunes 上定义的第一个真正的播放列表。

我想我可以将播放列表查询返回的项目与专辑查询中的项目进行比较，并消除任何匹配项。有没有更直接的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:56:10.813

我`[[MPMediaQuery playlistsQuery] collections]`经常使用并且从来没有得到一张专辑作为结果返回。我想您的代码中的其他地方存在问题。例如，您仍然可以在手动添加/删除参数创建 playlistsQuery 后自定义它，如果您更改太多，您甚至可以让查询返回专辑而不是播放列表。

特别是检查查询的`groupingType`属性。对于 playlistQuery 它应该设置为`MPMediaGroupingPlaylist`默认值，但也许您已经为您的查询手动覆盖或删除了此属性。

否则，您的设备系统 API 或 iTunes 库中只会存在错误的可能性。但这非常、非常、非常不可能！

# javascript - MooTools / LinkedIn JS (jQuery?) 冲突

> ID：15164745
> 
> 赞同：0
> 
> 时间：2013-03-01T18:47:27.660
> 
> 标签：javascript, jquery, mootools, linkedin

我需要在依赖 Mootools 的页面上添加一个 LinkedIn 小部件（所谓的[Company Insider Plugin ），但它似乎导致 JSON 编码器实现发生冲突。](http://developer.linkedin.com/plugins/company-insider-plugin)

`Uncaught TypeError: Object #<Object> has no method 'encode'`执行 LinkedIn 脚本时，以下 Mootools 代码中发生错误：

```
Native.implement([Hash, Array, String, Number], {
toJSON: function(){
    return JSON.encode(this);
}
}); 
```

[我尝试按照建议](http://developer.linkedin.com/forum/conflict-mootools-js-framework)“重置”冲突实体，但没有任何效果（但这可能是针对不同类型冲突的建议）。

我还可以做些什么？页面上的 LinkedIn 代码之后没有关键的 Mootools 代码，所以如果我可以以某种方式“禁用”Mootools 以使该脚本正常工作，那仍然可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:34:42.737

通过 iframe 解决我需要的链接片段。

不回答问题，但解决问题。

# java - 在这种多线程情况下同步有哪些好的策略？

> ID：15164747
> 
> 赞同：0
> 
> 时间：2013-03-01T18:47:29.653
> 
> 标签：java, multithreading, synchronization

我有两个主线程。一个产生新线程，另一个监听结果，如下所示：

```
//Spawner
while(!done) {
    spawnNewProcess(nextId, parameters);

    myListener.listenFor(nextId);

    nextId ++;
} 
```

spawnNewProcess 方法需要大量可变的时间。当它完成时，它会将一个结果对象放入一个可以通过 Id 访问的映射中。

侦听器线程运行如下：

```
//Listener
while(!done) {
    for (int id : toListenFor) {
        if (resultMap.contains(id)) {
            result = resultMap.get(id);

            toListenFor.remove(id);

            process(result);
        }
    }
} 
```

我无法更改 spawnNewProcess 方法，也无法更改它存储结果的方式。我想要做的是设置可以同时进行的最大限制。我的第一个倾向是让一个变量跟踪那个数字。如果超过最大值，则生成器将等待。当结果返回时，侦听器将通知它。像这样：

```
//Spawner2

AtomicInteger numSpawns = new AtomicInteger(0);
int maxSpawns = 10;

while(!done) {
    if (numSpawns.intValue() >= maxSpawns) {
        this.wait(0);
    }
    numSpawns.getAndIncrement;

    spawnNewProcess(nextId, parameters);

    myListener.listenFor(nextId);

    nextId ++;
} 
```

听者是：

```
//Listener2
while(!done) {
    for (int id : toListenFor) {
        if (resultMap.contains(id)) {
            result = resultMap.get(id);

            toListenFor.remove(id);

            numSpawns.getAndDecrement();
            Spawner.notify();

            process(result);
        }
    }
} 
```

这行得通吗？是否存在我遗漏的潜在死锁？如果以某种方式同时运行 11 个或 9 个产卵而不是 10 个，那将不是什么大不了的事。还是有更好的方法我没有注意到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:51:27.333

使用[`Semaphore`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html).

```
import java.util.concurrent.Semaphore;
private Semaphore sem = new Semaphore(NUM_MAX_CONCURRENT);

// Spawner
while(!done) {

    sem.acquire(); // added by corsiKa

    spawnNewProcess(nextId, parameters);

    myListener.listenFor(nextId);

    nextId ++;
}

// listener
while(!done) {
    for (int id : toListenFor) {
        if (resultMap.contains(id)) {
            result = resultMap.get(id);

            toListenFor.remove(id);
            sem.release(); // added by corsiKa
            process(result);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:59:55.327

要控制运行的生成器数量，请使用 a `Executors.newFixedThreadPool(size)`，它一次运行的任务数量始终不超过固定数量。然后将生成任务包装在 a 中`Runnable`并将它们传递给`ExecutorService`.

```
while(!done) {
    task = new Runnable() { public void run() {
        spawnNewProcess(nextId, parameters);
    } });

    exec.submit(task);;

    nextId ++;
} 
```

要返回结果，请使用`SynchronousQueue`or `ConcurrentLinkedQueue`，这将允许您在线程之间传递对象，而无需使用较低级别的并发对象。

# r - 在 ddply 中使用 ifelse 和 transform

> ID：15164759
> 
> 赞同：5
> 
> 时间：2013-03-01T18:48:09.627
> 
> 标签：r, plyr, lubridate

我正在尝试使用`ddply`with在数据框中`transform`填充一个新变量 ( `summary_Date`)，其中包含变量`ID`和`Date`. 变量的值是根据正在评估的片段的长度选择的`ifelse`：

如果在给定月份中对 ID 的观察少于五个，我希望`summary_Date`通过将日期四舍五入到最近的月份来计算（使用`round_date`from package `lubridate`）；如果在给定的月份中有超过五个 ID 的观察值，我希望它`summary_Date`只是`Date`.

```
require(plyr)
require(lubridate)

test.df <- structure(
  list(ID = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,1, 1, 1, 1, 1, 1, 1, 1, 1
                , 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,2, 2, 2, 2, 2, 2, 2, 2)
       , Date = structure(c(-247320000, -246196800, -245073600, -243864000
                            , -242654400, -241444800, -126273600, -123595200
                            , -121176000, -118497600, 1359385200, 1359388800
                            , 1359392400, 1359396000, 1359399600, 1359403200
                            , 1359406800, 1359410400, 1359414000, 1359417600
                            , 55598400, 56116800, 58881600, 62078400, 64756800
                            , 67348800, 69854400, 72964800, 76161600, 79012800
                            , 1358589600, 1358676000, 1358762400, 1358848800
                            , 1358935200, 1359021600, 1359108000, 1359194400
                            , 1359280800, 1359367200), tzone = "GMT"
                          , class = c("POSIXct", "POSIXt"))
       , Val=rnorm(40))
  , .Names = c("ID", "Date", "Val"), row.names = c(NA, 40L)
  , class = "data.frame")

test.df <- ddply(test.df, .(ID, floor_date(Date, "month")), transform
                 , summary_Date=as.POSIXct(ifelse(length(ID)<5
                                                  , round_date(Date, "month")
                                                  ,Date)
                                           , origin="1970-01-01 00:00.00"
                                           , tz="GMT")
                 # Included length_x to easily see the length of the subset
                 , length_x = length(ID))

head(test.df,5)
#   floor_date(Date, "month") ID                Date        Val summary_Date length_x
# 1                1962-03-01  1 1962-03-01 12:00:00 -0.1037988   1962-03-01        3
# 2                1962-03-01  1 1962-03-14 12:00:00  0.2923056   1962-03-01        3
# 3                1962-03-01  1 1962-03-27 12:00:00  0.4435410   1962-03-01        3
# 4                1962-04-01  1 1962-04-10 12:00:00  0.1159164   1962-04-01        2
# 5                1962-04-01  1 1962-04-24 12:00:00  2.9824075   1962-04-01        2 
```

该`ifelse`语句似乎有效，但“summary_Date”中的值似乎是为转换正在处理的子集计算的第一个值，而不是特定于行的值。例如在第 3 行，`summary_Date`应该是`1962-04-01`因为日期`1962-03-27 12:00:00'`应该向上取整（因为子集中的行少于五行），而是在该子集中的所有行中重复`summary_Date`( ) 的第一个计算值。`1962-03-01`

**编辑：**我受到里卡多的回答的启发，`data.table`使用`ddply`. 它也可以：

```
test.df <- ddply(test.df, .(ID, floor_date(Date, "month")), transform
                 , length_x = length(ID))

test.df <- ddply(test.df, .(ID, floor_date(Date, "month")), transform
                 , summary_Date=as.POSIXct(ifelse(length_x<5
                                                  , round_date(Date, "month")
                                                  ,Date)
                                           , origin="1970-01-01 00:00.00"
                                           , tz="GMT"))

head(test.df,5)[c(1,3:7)]
#   floor_date(Date, "month") ID                Date        Val length_x summary_Date
# 1                1962-03-01  1 1962-03-01 12:00:00 -0.1711212        3   1962-03-01
# 2                1962-03-01  1 1962-03-14 12:00:00 -0.1531571        3   1962-03-01
# 3                1962-03-01  1 1962-03-27 12:00:00  0.1256238        3   1962-04-01
# 4                1962-04-01  1 1962-04-10 12:00:00  1.4481225        2   1962-04-01
# 5                1962-04-01  1 1962-04-24 12:00:00 -0.6508731        2   1962-05-01 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T20:15:24.950

一步`ddply`解决方案（也作为评论发布）

```
ddply(test.df, .(ID, floor_date(Date, "month")), mutate, 
  length_x = length(ID), 
  summary_Date=as.POSIXct(ifelse(length_x < 5, round_date(Date, "month") ,Date)
    , origin="1970-01-01 00:00.00", tz="GMT")
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:46:18.167

```
# transform to data.table
library(data.table)
test.dt <- data.table(test.df)

# calculate length of id by month-year. 
test.dt[, idlen := length(ID),  by=list(month(Date), year(Date)) ]

# calculate the summary date
test.dt[, summary_Date := ifelse(idlen<5, as.Date(round_date(Date, "month")), as.Date(Date))]

# If you would like to have it formatted add the following: 
test.dt[, summary_Date := as.Date(summary_Date, origin="1970-01-01")] 
```

### 结果：

```
 > test.dt
    ID                Date         Val idlen summary_Date
 1:  1 1962-03-01 12:00:00  0.42646422     3   1962-03-01
 2:  1 1962-03-14 12:00:00 -0.29507148     3   1962-03-01
 3:  1 1962-03-27 12:00:00  0.89512566     3   1962-04-01   <~~~~~
 4:  1 1962-04-10 12:00:00  0.87813349     2   1962-04-01
 5:  1 1962-04-24 12:00:00  0.82158108     2   1962-05-01
 6:  1 1962-05-08 12:00:00  0.68864025     1   1962-05-01 
```

* * *

## 更新：

### 解释为什么需要两个步骤

无法一步完成的原因与您每组只能获得一个值有关。当您将该值分配给组的成员时，您将 1 个元素分配给多个。`R`知道如何很好地处理这种情况：`recycling`单一元素。

但是，在这种特定情况下，您不想回收；相反，您不想将该`1`元素应用于`many`. 因此，您需要独特的组，这是我们在第二步中所做的。然后，组的每个元素（行）都被分配了自己的特定值。

### 更新 2：

@Ramnath 给出了使用`mutate`. 看一下`?mutate`，它给出了：

> 此函数与 transform 非常相似，但它迭代地执行转换......以后的转换可以使用早期转换创建的列

这正是您想要做的！

# java - 如何使用 Java 的 breakIterator 标记来自多个语言环境的数字？

> ID：15164762
> 
> 赞同：1
> 
> 时间：2013-03-01T18:48:16.763
> 
> 标签：java, parsing, text, locale, multilingual

我希望 Java 的 breakIterator 将 ,123 和 .123 都视为十进制数 123/1000（即同时接受 . 和 ，作为小数点），同时接受 .123 和 .123 。和，作为千位分隔符等。这可以做到吗？如果没有，是否有其他（简单）Java 库具有此功能？

**注意：**这不是关于值的解析，只是关于标记化。123,456 可能意味着不同地区的不同数字，我只是不希望它被解释为两个数字。

# java - 如何根据 JTree 选择优化显示不同的 JPanel

> ID：15164763
> 
> 赞同：1
> 
> 时间：2013-03-01T18:48:18.207
> 
> 标签：java, swing, jtree

我有一个带有多个节点的 JTree，每个节点都有一个不同的关联 JPanel，我想向用户显示。我使用了自定义 TreeCellRenderer 并且我的代码目前按原样工作，但是（我认为）它有点太笨重了，我对此感到担忧

1）如果我只是选择了一个树节点，我的代码将一遍又一遍地刷新 JPanel。一旦选定的节点显示 JPanel 一次，我不希望它再次显示，除非在两者之间选择了另一个节点。

2) 如果用户在我的计时器为 node1 运行时选择了不同的节点（比如说 node2），我不想费心显示 node1 的 JPanel，因为用户已经离开它。

这是我感兴趣的代码：

```
Component ret = super.getTreeCellRendererComponent(tree, value,
            selected, expanded, leaf, row, hasFocus);

    DefaultMutableTreeNode entry = (DefaultMutableTreeNode)value;

    // if the node is selected
    if(sel)
    {
// set the background of the node
        setBackgroundNonSelectionColor(new Color(0x91, 0xC5, 0xFF));
// display the JPanel for the node
        displayPanel(entry);
    }
    else
    {
// if the node isn't selected then no background selection color
        setBackgroundNonSelectionColor(Color.WHITE);
    }

    return ret; 
```

显示面板功能：

```
// display the node's JPanel after sleeping for 1s
private void displayPanel(final DefaultMutableTreeNode entry)
{
    Thread thr = new Thread(){

        public void run(){

                // sleep for 1000ms
                    CF.sleep("1000");

// display the panel for this node
                    CF.displayPanel(entry);
            }
          };
    thr.start();
} 
```

老实说，DefaultTreeCellRenderer 对我来说还是有点混乱。我将不胜感激有关如何使其有效运行的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:54:40.230

也许我在这里遗漏了一些东西，但你不能只在树上使用 Tree Selection 侦听器吗？

```
tree = new JTree(treeModel);
tree.addTreeSelectionListener(new TreeSelectionListener() {     
    public void valueChanged(TreeSelectionEvent arg0) {
       //Code here to get selection and display panel
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:54:54.990

`TreeCellRenderer`用于“渲染”目的。给定对象的表示是什么？是标签吗？是复选框吗？更复杂的东西？基本上，它用于在显示屏上“打印”JTree 的每个节点的表示。渲染可能会在不可预知的时刻发生多次，因此不是聆听选择的好地方。

您正在寻找的是一种`TreeSelectionListener`具有单一实现方法的方法，并且每次 JTree 的选择发生变化时都会触发该方法。

用 .添加你的监听器`javax.swing.JTree.getSelectionModel().addTreeSelectionListener()`。

```
final JTree tree = ...;
tree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener() {
    public void valueChanged(TreeSelectionEvent e) {
         if (tree.getSelectionPath()!=null)
             displayPanel((DefaultMutableTreeNode) tree.getSelectionPath().getLastPathComponent());
    }
}); 
```

# php - Eclipse PHP - 找不到验证部分以从验证中排除 .xml 文件

> ID：15164772
> 
> 赞同：0
> 
> 时间：2013-03-01T18:49:00.697
> 
> 标签：php, eclipse, eclipse-pdt

Using Eclipse for PHP Developers 版本：3.0.2（[Zend 最新下载](http://www.zend.com/en/community/pdt/downloads)）

我想要做的是从验证中排除一些**单个** `.xml`/`.html`文件。似乎是直截了当。

1.  所以“ [https://stackoverflow.com/a/5288496/356726](https://stackoverflow.com/a/5288496/356726) ”说要使用`Project / Properties / Validation`，但我没有这个菜单项。
2.  SO“[如何在 Eclipse 中从验证中排除特定文件夹或文件？](https://stackoverflow.com/questions/2272237/how-to-exclude-specific-folders-or-files-from-validation-in-eclipse) ”是指`Window / Preferences`。我检查了这些部分以找到排除部分，但我无法找到它。我可以设置项目特定设置，但我在哪里排除单个文件？

我想念什么？我相信这很简单。

项目属性：

![项目属性](../Images/76a7140a5c6704fa0fc4aa58d25280cf.png)

窗口/首选项：

![喜好](../Images/b88cbc06648ae1c6eccb4347f8cb54fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T11:46:37.123

这对我有用（Eclipse Indigo，Java 项目）：

1.  项目->右键单击->属性->验证
2.  检查启用项目特定设置
3.  XmlValidator：勾选Manual，勾选Build，点击“...”进行设置
4.  添加排除组，选择它
5.  添加规则 -> 文件夹或文件名 -> 选择要忽略的文件
6.  刷新项目（或关闭并打开）

此说明假定已启用步骤 4 中的添加排除组按钮。但是，在我的情况下，该按钮被禁用。我不知道原因，但我发现了以下解决方法：

4a。添加（空）包括组
4b。打开文件 PROJECT_HOME.settings\org.eclipse.wst.validation.prefs
4c。
编辑键 vals/org.eclipse.wst.xml.core.xml/groups - 将字符串4d末尾附近的 07include00 更改为 07exclude00 。刷新项目，再次打开项目属性

# python - 与布尔 numpy 数组 VS PEP8 E712 的比较

> ID：15164775
> 
> 赞同：7
> 
> 时间：2013-03-01T18:49:15.090
> 
> 标签：python, numpy, pep8

`PEP8 E712`要求“比较`True`应该是`if cond is True:`或`if cond:`”。

但是如果我遵循这个`PEP8`，我会得到不同/错误的结果。为什么？

```
In [1]: from pylab import *

In [2]: a = array([True, True, False])

In [3]: where(a == True)
Out[3]: (array([0, 1]),)
# correct results with PEP violation

In [4]: where(a is True)
Out[4]: (array([], dtype=int64),)
# wrong results without PEP violation

In [5]: where(a)
Out[5]: (array([0, 1]),)
# correct results without PEP violation, but not as clear as the first two imho. "Where what?" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T19:00:04.677

Numpy 的“真”与 Python 的“真”不同，因此`is`失败：

```
>>> import numpy as np
>>> a = np.array([True, True, False])
>>> a[:]
array([ True,  True, False], dtype=bool)
>>> a[0]
True
>>> a[0]==True
True
>>> a[0] is True
False
>>> type(a[0])
<type 'numpy.bool_'>
>>> type(True)
<type 'bool'> 
```

此外，具体来说，PEP 8 说[不要](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)对布尔值使用 'is' 或 '=='：

```
Don't compare boolean values to True or False using ==:

Yes:   if greeting:
No:    if greeting == True:
Worse: if greeting is True: 
```

一个空的 numpy 数组确实会像空的 Python 列表或空的 dict 一样测试错误：

```
>>> [bool(x) for x in [[],{},np.array([])]]
[False, False, False] 
```

与 Python 不同，单个 falsey 元素的 numpy 数组确实会测试 false：

```
>>> [bool(x) for x in [[False],[0],{0:False},np.array([False]), np.array([0])]]
[True, True, True, False, False] 
```

但是您不能将该逻辑与具有多个元素的 numpy 数组一起使用：

```
>>> bool(np.array([0,0]))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

因此，带有 Numpy 的 PEP 8 的“精神”可能只是测试每个元素的真实性：

```
>>> np.where(np.array([0,0]))
(array([], dtype=int64),)
>>> np.where(np.array([0,1]))
(array([1]),) 
```

或使用`any`：

```
>>> np.array([0,0]).any()
False
>>> np.array([0,1]).any()
True 
```

请注意，这不是您所期望的：

```
>>> bool(np.where(np.array([0,0])))
True 
```

由于`np.where`返回一个非空元组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T18:55:40.137

该建议仅适用于`if`测试值“真实性”的语句。`numpy`是另一种野兽。

```
>>> a = np.array([True, False]) 
>>> a == True
array([ True, False], dtype=bool)
>>> a is True
False 
```

请注意，`a is True`总是`False`因为`a`是一个数组，而不是布尔值，并且会进行简单的引用相等测试（例如`is`，只有`True is True`; ）。`None is not True`

# javascript - 内容适合并重新调整到 div 容器的大小

> ID：15164777
> 
> 赞同：0
> 
> 时间：2013-03-01T18:49:23.153
> 
> 标签：javascript, html, dynamic, height, autoresize

我正在尝试制作一个像图像一样设置的页面。A & B 是动态高度，它们的宽度是静态的。C 是一个静态大小，高度为 500 像素，宽度为 500 像素。

我如何使每个 A 和 B 中的内容高度相互调整而不超过 500px 的高度

[http://i47.tinypic.com/zvyd7d.png](http://i47.tinypic.com/zvyd7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:53:24.057

将此添加到 a 和 b 的 CSS 中。

`max-height:500px;`.

只要你正确地逃离你的浮动（如果有的话），它就会在那里切断它。

您可能需要添加

`overflow:hidden;`

如果您在 a 或 b 中的内容扩展了 500 像素，这将使其无法在页面中看到。

据我了解问题的完整代码是

CSS

```
#wrap { width: 700px; height:500px; } /* this combines both static widths and height stays dynamic */
.a, .b { float:left; background-color:#F03; width: 200px; height:50%; min-height:100px; max-height: 500px; }
.c { background-color:#990; width: 500px; height: 500px; float: right; } 
```

HTML

```
<div id="wrap">
  <div class="c">C</div>
  <div class="a">A</div>
  <div class="b">B</div>
<div style="clear:both;">
</div> 
```

请注意 C 在顶部。那是因为它漂浮到容器的右侧，其余的试图找到 C 没有填充的空间。背景颜色仅用于视觉辅助。

**[http://jsfiddle.net/QW5MQ/](http://jsfiddle.net/QW5MQ/)** <-- 这些是你的朋友。

# email - CDO / MAPI 是否仍可与 Exchange 2013 一起使用？

> ID：15164782
> 
> 赞同：1
> 
> 时间：2013-03-01T18:49:32.467
> 
> 标签：email, exchange-server, vb6-migration, mapi, cdonts

我有一个旧的 VB 应用程序，它使用 Mapi.Session 以这种方式发送邮件

```
Set objSession = New mapi.Session
strProfileInfo = strServeurExchange & vbLf & strSender_I
objSession.Logon NewSession:=True, NoMail:=False, ShowDialog:=False, ProfileInfo:=strProfileInfo 
```

现在我们的交换服务器将从2008年升级到2013年。我的应用程序仍然可以连接和发送邮件吗？如果不是，我该如何转换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:20:40.653

不，它不会起作用。CDO 1.21 不知道 RPC-over-HTTP 连接 (ROH) 并在不使用 ROH 的情况下创建临时配置文件，这是 Exchange 2013 接受的唯一类型的连接。

您或许可以为此使用 Redemption - Redemption 即将发布的版本将支持具有 ROH 连接的 RDOSession.LogonExchangeMailbox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T16:55:59.977

有几个 MAPI CDO 更新现在适用于 E2013。最新的是 2013 年 5 月更新，可在此处找到：[Microsoft Exchange Server MAPI 客户端和协作数据对象 1.2.1 2013 年 5 月更新](http://www.microsoft.com/en-us/download/details.aspx?id=39045)

正如 Dmitry 所提到的，您将需要使用 ROH。

# jquery - HTML5 localStorage，如何排除某些字段

> ID：15164783
> 
> 赞同：3
> 
> 时间：2013-03-01T18:49:34.370
> 
> 标签：jquery, html

按照本教程[http://css-tricks.com/video-screencasts/96-localstorage-for-forms/](http://css-tricks.com/video-screencasts/96-localstorage-for-forms/)，我能够使用我的表单重新创建 localStorage 功能，但是我希望它排除某些字段，比如信用卡号码。

我可以通过以某种方式定位与信用卡输入相关联的 ID 而不是将其保存到 localStorage 来做到这一点吗？

这是保存功能，

```
 $("#saveData")
        .click(function(e) {

            e.preventDefault();

            localStorage.setItem("flag", "set");

            var data = $("#form1").serializeArray();

            $.each(data, function(i, obj) {

                localStorage.setItem(obj.name, obj.value);
            });             

        }); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:53:57.850

您只需要根据信用卡元素中的输入名称进行排除。这是最简单的答案，但也是最不可重复使用的。根据您所做的事情，您可能希望添加标志以不保存到您的 html 中或设置一个永远不应保存的已知输入名称的映射等，以提高可重用性。

```
 $("#saveData")
    .click(function(e) {

        e.preventDefault();

        localStorage.setItem("flag", "set");

        var data = $("#form1").serializeArray();

        $.each(data, function(i, obj) {
            if(obj.name != "creditCard") {
                localStorage.setItem(obj.name, obj.value);
            }
        });             

    }); 
```

# windows-phone-8 - Windows Phone 8 加速度计模拟爆震

> ID：15164784
> 
> 赞同：2
> 
> 时间：2013-03-01T18:49:40.820
> 
> 标签：windows-phone-8, windows-phone, accelerometer

我正在使用 Windows Phone 8 API，特别是加速度计。我没有要发布到的设备，所以我正在使用模拟器来测试我的应用程序。

我想模拟敲手机，模拟大于1G的加速度。

我正在计算这样的总加速度：

```
private static double CalculateGForce(double x, double y, double z)
{
    return Math.Sqrt(x*x + y*y + z*z);
} 
```

我可以使用模拟器实现这一点吗？当我拖动红球时，我永远不会得到 G > 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:10:15.200

Windows Phone 模拟器带有一组名为 Shake 的“记录数据”。一个想法可能是创建您自己的一组记录，以提供所需的 g 力。

[这是一篇关于如何找到 Shake 数据的原始代码、制作副本、然后编辑/删除/添加值以获得所需动作的帖子。](http://en.maciejgrabek.com/2012/01/21/windows-phone-emulator-not-only-shake/)

适用于 Windows Phone 7.1

> C:\Program Files (x86)\Microsoft XDE\1.0\sensordata\acc

对于 Windows 电话 8

> C:\Program Files (x86)\Microsoft XDE.0\sensordata\acc

正如帖子所提到的，“偏移”是更改之间的时间，因此您需要 X、Y、Z 值集之间的小偏移和较大的变化。

```
<AccData offset="1" x="-00.08400000" y="-01.02100003" z="-00.41700000" />
<AccData offset="5" x="-00.14200000" y="-00.95099998" z="-00.39700001" /> 
```

# symfony - 使用 Symfony 表单构建器在选择选项中显示连接字段数据

> ID：15164790
> 
> 赞同：1
> 
> 时间：2013-03-01T18:49:59.977
> 
> 标签：symfony, join, doctrine-orm, formbuilder

我正在尝试制作一个用于将比赛结果添加到事件的表单，但无法弄清楚如何在一个选择框的选项中显示连接在一起的表中的信息。

这是我的数据库结构：

人员表：

```
id | name
----------
1  | fred
2  | dave
3  | james 
```

参赛者表（代码是参赛者的比赛编号——你别在衬衫上的那种东西）：

```
id | code | person_id | category_id
---------------------------------
1  | 210  | 1         | 1
2  | 211  | 2         | 1
3  | 212  | 3         | 1
4  | 156  | 1         | 2
6  | 157  | 3         | 2 
```

结果表：

```
id | time | entrant_id
---------------------
1  | 1:20 | 1
2  | 1:35 | 2
3  | 2:02 | 3 
```

将结果添加到 Category=1 时的所需输出：

```
<select>
    <option>210 - Fred</option>
    <option>211 - Dave</option>
    <option>212 - James</option>
</select> 
```

我目前在我的 ResultType 中获得的代码只是让我得到了 person.name，这是一个好的开始（以每个名称 1 个额外查询为代价），但不是 entrant.code：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('time')
        ->add('entrant', 'entity', array(
            'class'=>'KP\EventsBundle\Entity\Entrant', 
            'property' => 'person.name',
            ));
} 
```

如何在同一个选项列表中同时获得 entrant.code 和 person.name？

我只用了几个星期的 Symfony，所以请对我温柔一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:51:19.577

我想到的最简单的`__toString()`方法是在类中实现该方法`Entrant`：

```
public function __toString()
{
    return sprintf("%d %s", $this->code, $this->person->getName());
} 
```

从表单类型的字段中删除`property`选项`entrant`以使其使用该方法。

要解决额外的查询问题，您可以在类型选项中执行[fetch join](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#joins)。`query_builder``entity`

# asp.net - ASP.NET - 无需缓存即可安全显示 PDF

> ID：15164797
> 
> 赞同：1
> 
> 时间：2013-03-01T18:50:21.407
> 
> 标签：asp.net, pdf, ssl, cache-control

我正在寻找一种在网络浏览器中*安全地*显示 PDF 的方法。下载文件以外的其他内容，这些文件将存储在临时 Internet 文件中。

我在想这样的事情：

[http://www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re](http://www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re)

但是图像会被缓存。我希望能够在 PDF 的数据上设置`no-cache`和`no-store`标题。

到目前为止，我想出的想法是将 PDF 中的页面读入图像并将图像作为 base 64 嵌入页面的 HTML（它将具有适当的响应标头）。不过，我预计这将是一种非常缓慢的做事方式。

有没有更好的解决方案，甚至可能是一个不错的 ASP.NET 控件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:55:39.927

将以下内容添加到您的 .htaccess 文件中

代码：

```
<FilesMatch "\.pdf$">
FileETag None
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"

</FilesMatch> 
```

这应该关闭所有缓存。

# php - 如何模块化 php 应用程序的插件/扩展功能？

> ID：15164798
> 
> 赞同：0
> 
> 时间：2013-03-01T18:50:22.390
> 
> 标签：php, plugins, module, hook

我正在开发用于我公司的任务管理应用程序。规范的一部分是创建一个插件系统，允许用户根据需要或部门需要自定义和扩展功能。我很想以一种非常优雅和模块化的方式来做这件事，但我很难弄清楚如何做。

考虑一个作为任务列表的视图：生成循环的每次迭代都会在任一端添加一个`pre_task()`and`post_task()`调用，这会在任务标题的任一端构建交互式片段（完成复选框、评论链接等）。现在，当系统检测到并包含插件文件`plugin_time_tracking.php`时，插件应该向 post_task() 添加功能 - 除了其他所有内容之外，还添加一个“跟踪时间”按钮。

我想要完成的是使插件“挂钩”到 pre_task() 或 post_task() - 让它通过将自身附加到适当的功能并扩展它们来完成所有的工作，而不是拥有核心排序插件并放牧它们功能到正确的地方。PHP 是否提供这样的功能？我会以错误的方式解决这个问题吗？让我知道是否需要澄清 - 感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:32:48.117

Qafoo 的男孩们在 2012 年的 PHPBenelux 会议上发表了关于模块化的演讲。他们提出了创建模块化应用程序的各种选项，例如挂钩、修补和继承。

[您可以在此处](http://qafoo.com/talks/11_06_ipc_spring_modular_application_architecture.pdf)查看该演示文稿的幻灯片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:50:30.860

我认为您应该真正使用具有内置插件基础架构的框架，该基础架构具有覆盖/继承功能。例如，让我们说 Symfony2。在 sf2 中，您可以创建 FormType 类来构建表单对象（然后将某些数据传递给他的视图）。因此，在这种情况下，要添加字段，另一个团队只需要扩展您的 FormType 并修改构建以添加新字段。此外，Form Api 支持嵌入子表单，因此如果他们想要时间跟踪，那么只需将其嵌入到任务表单中或通过您提供的任何配置工具“打开它”。

与渲染事物类似，您可以简单地通过在不同级别提供或引用不同的 Bundle（某种插件）来定义覆盖视图模板。

现在 Symfony2 非常复杂，学习曲线很高，所以它可能是也可能不是你应该选择的框架，但沿着这些思路的东西会更合适。“钩子”函数的 WP/Drupal 模式使用起来非常烦人，尤其是当它们在更深的层上构建 HTML 字符串并且没有按照您认为合适的方式为您提供要输出的原始数据时。

# javascript - Jquery 1.8.3，elFinder - 单击图像并在 textarea 中插入 img 标签

> ID：15164800
> 
> 赞同：2
> 
> 时间：2013-03-01T18:50:46.027
> 
> 标签：javascript, jquery, elfinder

我正在为我的项目使用 elFinder。一切运行良好，但我还需要一个功能。我想，当我双击图像时，在 textarea 中插入**img**标签。我怎样才能做到这一点。我正在使用 elFinder 的标准配置，那里没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-26T10:10:58.410

添加`getFileCallback`功能以在您的文本区域中放置 img 标签：

```
$('#elfinder').elfinder({
    // ...
    onlyMimes: ["image"],
    getFileCallback: function(file) {
        var parent = (window != window.top) ? window.parent : window.opener;
        var textarea = window.opener.document.querySelector('#id_textarea_to_insert_img_tag');
        var startPos = textarea.selectionStart;
        var endPos = textarea.selectionEnd;
        textarea.value = textarea.value.substring(0, startPos)
            + '<img src=\"' + file.url + '\" title=\"\" alt=\"\" />'
            + textarea.value.substring(endPos, textarea.value.length);
    },
}).elfinder('instance'); 
```

# c# - 创建一个类数组

> ID：15164801
> 
> 赞同：1
> 
> 时间：2013-03-01T18:50:47.587
> 
> 标签：c#, arrays, object

我需要创建另一个类的数组。例子：

```
namespace std
{
      public class Car
      {
           double number,id;

           public Car()
           {
               // initializing my variables for example:
               number = Random.nextdouble();
           }

      }
      public class Factory
      {
           public Factory(int num)
           {
               Car[] arr = new Car(num);
           }
      }
} 
```

问题是我收到此错误：

> “Car”不包含采用“1”参数的构造函数

我只需要一个类中的数组`Car`（`Factory`汽车变量用它的构造函数初始化）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T18:52:41.073

您刚刚使用了错误的括号。您总是对数组和索引器使用方括号。圆括号用于调用方法、构造函数等。您的意思是：

```
car[] arr = new car[num]; 
```

请注意，传统上 .NET 类型是 Pascal 大小写的，因此您的类型应该是`Car`and`Factory`而不是`car`and `factory`。

另请注意，创建数组后，每个元素都将是一个空引用 - 所以你*不应该*写：

```
// Bad code - will go bang!
Car[] cars = new Car[10];
cars[0].SomeMethod(0); 
```

反而：

```
// This will work:
Car[] cars = new Car[10];
cars[0] = new Car(); // Populate the first element with a reference to a Car object
cars[0].SomeMethod(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:54:08.597

声明数组或索引器时需要使用`[]`not 。`()`

```
car[] arr = new car[num]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:55:40.833

```
using System;
namespace ConsoleApplication1
{
    public class Car
    {
        public double number { get; set; }
        public Car()
        {
            Random r = new Random();            
            number = r.NextDouble();// NextDouble isn't static and requires an instance
        }
    }
    public class Factory
    {
        //declare Car[] outside of the constructor
        public Car[] arr;
        public Factory(int num)
        {
            arr = new Car[num]; 
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            Factory f = new Factory(3);
            f.arr[0] = new Car();
            f.arr[1] = new Car();
            f.arr[2] = new Car();
            foreach (Car c in f.arr)
            {
                Console.WriteLine(c.number);
            }
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:58:56.187

如果您的要求不限于仅使用 Array，则可以使用类型化列表。

```
List<Car> = new List<Car>(num); 
//num has to be the size of list, but a list size is dinamically increased. 
```

您的代码中的错误是该数组应按如下方式初始化：

```
public class factory
      {
           public factory(int num)
           {
           car[] arr = new car[num];
           }
      } 
```

问候，

# python - 如何设置为此只有大写字母？随机选择

> ID：15164804
> 
> 赞同：0
> 
> 时间：2013-03-01T18:50:52.707
> 
> 标签：python

```
code = ''.join(random.choice(string.letters) for i in xrange(6)) 
```

如何设置为这个唯一的大写字母并在之前添加“RF”？

RF（6个随机大写字母）

例子：

```
RFQXCZLN 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:51:26.060

改用[`string.ascii_uppercase`](http://docs.python.org/2/library/string.html#string.ascii_uppercase)：

```
>>> import random
>>> import string
>>> 'RF' + ''.join(random.choice(string.ascii_uppercase) for i in xrange(6))
'RFOCJTGN' 
```

使用`random.choice()`将产生一个*可以*有重复字符的随机字符串：

```
>>> 'RF' + ''.join(random.choice(string.ascii_uppercase) for i in xrange(6))
'RFBYBXHM' 
```

注意这两个`B`字符。如果您不希望字符重复，请[`random.sample()`](http://docs.python.org/2/library/random.html#random.sample)改用：

```
>>> 'RF' + ''.join(random.sample(string.ascii_uppercase, 6))
'RFEVKZHD' 
```

并且保证6个随机字符不包含重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:53:19.837

使用[random.sample](http://docs.python.org/2/library/random.html#random.sample)和[string.ascii_uppercase](http://docs.python.org/2/library/string.html#string.ascii_uppercase)

```
>>> "RF" + ''.join(random.sample(string.ascii_uppercase, 6))
'RFBGHZMW' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:54:46.160

```
>>> def getCode(length = 10, char = string.ascii_uppercase):
       return ''.join(random.choice( char) for x in range(length))

>>> import random
>>> import string
>>> getCode(6)
'ADKCGW' 
```

如果您想要其他字符和长度

```
>>> getCode(5, "mychars")
'ahssh' 
```

在键盘上[运行](http://codepad.org/hGwXI98O)

**编辑** 在随机字符前面添加“RE”

```
>>> "RE" + getCode(6)
REIUXWUE 
```

# html - DIV 内不需要的空间

> ID：15164805
> 
> 赞同：1
> 
> 时间：2013-03-01T18:51:04.030
> 
> 标签：html, css

如果页面，我正在尝试将幻灯片图像放在中心。我几乎完成了，问题是图像的每一块内部都有一个小空间，就像它有一些小填充（它没有）一样，是否有人在代码中看到了错误？

```
<style type="text/css">
  html, body, #wrapper, images {
    height: 100%;
    width: 100%;
    margin: 0px;
    padding: 0px;
    border: 0px;
    background-color: #000;
  }

  img {
    margin: 0px;
    padding: 0px;
    border: 0px;
  }

  .center {
    width: 800px;
    height: 600px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -400px;
    margin-top: -300px;
  }

  .center_mini {
    margin: 0px;
    padding: 0px;
    border: 0px;
  }

  .center_mini_float {
    float: left;
    margin: 0px;
    padding: 0px;
    border: 0px;
  }
</style>
<div class="center">
  <div class="center_mini">
    <img src="images/background_01.png" width="800" height="144" alt="bg">
    <div class="center_mini">
      <div class="center_mini_float">
        <img src="images/background_02.png" width="503" height="456" alt="bg">
      </div>
      <div class="center_mini_float">
        <div class="center_mini">
          <div class="center_mini">
            <img src="images/background_03.png" width="246" height="89" alt="bg">
          </div>
          <div class="center_mini">
            <img src="images/background_05.png" width="246" height="106" alt="bg">
          </div>
          <div class="center_mini">
            <img src="images/background_06.png" width="246" height="102" alt="bg">
          </div>
          <div class="center_mini">
            <img src="images/background_07.png" width="246" height="159" alt="bg">
          </div>
        </div>
      </div>
      <div class="center_mini_float">
        <img src="images/background_04.png" width="51" height="456" alt="bg">
      </div>
    </div>
  </div>

  <!--<img src="images/background.jpg" width="800" height="600" alt="bg">-->
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:53:38.997

尝试添加：

```
img { display: block; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:58:31.353

问题是 IMG 标记具有“INLINE”的自然 DISPLAY 值。在某些情况下，这会导致图像周围出现额外的空白。

根据您的布局需求，尝试

```
img { display: block; } 
```

或者

```
img { display:inline-block; } 
```

如果您的图像以其他方式工作，则 inline-block 将导致最少的抖动。

更多信息： [http ://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp) [http://www.tequilafish.com/2009/04/29/css-removing-extra-space-underneath-an-image/](http://www.tequilafish.com/2009/04/29/css-removing-extra-space-underneath-an-image/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T19:00:49.227

我认为更好的解决方案是使用

```
img { vertical-align: middle; } 
```

这样您就不会交替显示默认浏览器图像。另外，确保图像容器的 line-height: 100%，这也可能导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T19:21:56.677

默认情况下，图像具有`display:inline;`，这就是导致图像之间出现空白的原因。你可以做三件事来防止这种情况：

```
float:left; 
```

或者

```
display:inline-block; 
```

或者

```
display:block; 
```

# windows-8 - 如何从 Windows 8 查询远程索引

> ID：15164817
> 
> 赞同：1
> 
> 时间：2013-03-01T18:51:45.507
> 
> 标签：windows-8, full-text-search

我有一台使用内置 Windows 索引功能运行 Windows 2008 Server 的机器。我有一台运行 Windows 8 的单独机器。我需要从 Windows 8 机器查询 Windows 2008 索引。我曾经可以使用 MSIDXS 提供程序来执行此操作，但在 Windows 8 中不再提供此选项。

有没有新的方法来处理这种情况？我的互联网搜索没有出现太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:51:35.187

Windows 应用商店应用使用合同和扩展来实现应用之间以及应用与 Windows 之间的通信。有关此主题的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx)。我没有与 MSIDXS 提供商合作，但根据您的描述，您将无法像以前那样直接访问驻留在服务器上的数据。

一种选择是将索引数据作为服务公开给您的 Windows 应用商店应用程序。这可能没有针对您的情况进行优化，但是当您需要与 Windows 应用商店应用程序之外的资源进行通信时，这是一种通用的考虑方法。

# sql - 在为表格的每一行创建一个分隔字符串时选择项目的类别和子类别时出现问题

> ID：15164818
> 
> 赞同：2
> 
> 时间：2013-03-01T18:52:00.803
> 
> 标签：sql, oracle, join, inner-join, outer-join

一些背景：数据库是甲骨文。我正在尝试为表格的每一行创建一个分隔字符串。分隔字符串需要包含项目的两个类别（如果可用，则始终至少有一个类别）。有 3 个表，ITEM、ITEM_CAT 和 ITEM_ITEM_CAT。ITEM 表包含所有项目。ITEM_CAT 表包含所有可能的项目类别。ITEM_ITEM_CAT 包含项目 ID 和类别 ID 之间的所有映射，本质上是一个键值表。

我创建了下面的 SQL，它能够获取特定项目的分隔字符串，但我需要一个可以针对整个表运行的查询。

```
SELECT 'ITEM'||'%#'|| outerTable.ITEM_ID ||'%#'|| 
    (SELECT midTable.item_cat_nam
     FROM
            (SELECT innerTable.item_cat_nam AS item_cat_nam, innerTable.item_id AS item_id, ROWNUM AS rn
             FROM
                    (SELECT ic.ITEM_CAT_NAM AS item_cat_nam, i.ITEM_ID AS item_id
                     FROM ITEM_CAT ic, ITEM_ITEM_CAT iic, ITEM i
                     WHERE i.ITEM_ID = iic.ITEM_ID 
                     AND iic.ITEM_CAT_CD = ic.ITEM_CAT_CD
                     AND 287484 = i.item_id
                    ) innerTable
            ) midTable
    WHERE rn = 1
    ) ||'%#'||
    (SELECT midTable.item_cat_nam
     FROM
            (SELECT innerTable.item_cat_nam AS item_cat_nam, innerTable.item_id AS item_id, ROWNUM AS rn
             FROM
                    (SELECT ic.ITEM_CAT_NAM AS item_cat_nam, i.ITEM_ID AS item_id
                     FROM ITEM_CAT ic, ITEM_ITEM_CAT iic, ITEM i
                     WHERE i.ITEM_ID = iic.ITEM_ID 
                     AND iic.ITEM_CAT_CD = ic.ITEM_CAT_CD
                     AND 287484 = i.item_id
                    ) innerTable
            ) midTable
    WHERE rn = 2
    )
FROM OFR outerTable
WHERE outerTable.ITEM_ID = 287484; 
```

我需要能够将外部表的 ITEM_ID 向下传递到最后一个内部连接。当我只需要类别时（通过下面的 SQL 语句，只需要一个内连接），但引入多个类别时，我可以这样做；我需要 rownum （以获得多个类别），然后需要更多的内部连接，我似乎无法将 ITEM_ID 向下传递超过一个内部连接，这就是问题所在......

```
SELECT 'ITEM'||'%#'|| outerTable.OFR_ID ||'%#'|| 
    (SELECT ic.ITEM_CAT_NAM
     FROM ITEM_CAT ic, ITEM_ITEM_CAT iic, ITEM i
     WHERE i.ITEM_ID = iic.ITEM_ID 
     AND iic.ITEM_CAT_CD = ic.ITEM_CAT_CD
     AND outerTable.OFR_ID = i.item_id
             AND rownum = 1
    ) innerTable
FROM OFR outerTable; 
```

有人能帮忙吗？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T21:39:03.540

不用担心。你需要这样的东西...

```
SELECT 'ITEM' || '%#' || Item_ID || '%#' || CatName1 || '%#' || CatName2
FROM outerTable
INNER JOIN (
  SELECT
    Item_ID,
    MAX(CASE WHEN rn = 1 THEN Item_Cat_Nam ELSE NULL END) CatName1,
    MAX(CASE WHEN rn = 2 THEN Item_Cat_Nam ELSE NULL END) CatName2
  FROM (
    SELECT
      Item_ID,
      Item_Cat.Item_Cat_Nam,
      ROW_NUMBER() OVER (PARTITION BY Item_ID ORDER BY Item_ID) rn
    FROM Item
    INNER JOIN Item_Item_Cat USING (Item_ID)
    INNER JOIN Item_Cat USING (Item_Cat_Cd)
  ) GROUP BY Item_ID
) USING (Item_ID) 
```

最里面的查询使用 ROW_NUMBER 函数将 1、2、3 等分配给为每个项目找到的每个类别。PARTITION BY 将每个项目的编号从 1 重新开始。ORDER BY 是必需的，所以我使用了 Item_ID，因为嘿，为什么不呢？如果您有一个首选列，只需使用它即可 - 它将用于分配行号。内部查询将输出如下内容：

```
Item_ID  Item_Cat_Nam  rn
-------  ------------  --
      1  Category aa    1
      1  Category xy    2
      1  Category ef    3
      2  Category xy    1
      2  Category ax    2
      3  Category ef    1 
```

围绕最内层查询的查询使用 MAX 将`rn`每个 Item_ID 的前两个值展平为一行。rn=1 的 Item_Cat_Nam 进入 CatName1 列，而 rn=2 的 Item_Cat_Nam 进入 CatName2 列。当它输入上面显示的结果时，您将得到以下结果：

```
Item_ID  CatName1     CatName2
-------  -----------  -----------
      1  Category aa  Category xy  (note Category ef is rn=3 so it's ignored)
      2  Category xy  Category ax
      3  Category ef               (note only one row for Item_ID 3) 
```

然后非常外部的查询只是连接所有内容。

另一件事：我使用了“JOIN ... USING”语法，因为在这种情况下，它可以让您消除所有别名（innerTable、i、ic、iic、midTable 等）。这纯粹是因为我对它更舒服，所以它帮助我更快地解决了这个问题。您应该随意使用自己的连接样式 - 毕竟您将成为维护它的人:)

# jquery - 全局数组上的 jQuery $.each

> ID：15164819
> 
> 赞同：1
> 
> 时间：2013-03-01T18:52:12.093
> 
> 标签：jquery

您知道为什么此功能会中断吗？

我使用窗口检索全局数组的值。我使用console.log 获取arr 对象值但是如果我尝试在foreach 中使用arr 对象，它会破坏代码。任何想法为什么？

```
function setDropDownList(raw_id, val){
    // Get the ID
    var the_id = '#'+raw_id;
    // Get the array name as a string
    var arrname = val+"Array";
    // get the arr object using the arrname string
    var arr = window[arrname];
    // if I place a console.log here, i get the values for the arr object, but it brakes the .each below:

    // do a simple foreach
    // using arr breaks the foreach loop
    // if I use the actual array declared globally in he header it works.
    jQuery.each(arr, function(key, value) {
        var test = value.split('|');
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:53:36.967

这是因为数组中的一个（或所有）项目是/不是字符串。

当你这样做时`value.split('|')`，它要求值是一个字符串。否则，它会破裂。

# python - BeautifulSoup 找不到父母

> ID：15164824
> 
> 赞同：3
> 
> 时间：2013-03-01T18:52:38.790
> 
> 标签：python, beautifulsoup

我真的无法弄清楚这一点。我用 BeautifulSoup 解析了以下[链接](http://www.imdb.com/find?q=batman&s=all)，我这样做了：

```
soup.find(text='Title').find_parent('h3') 
```

它什么也没找到。如果您查看链接页面的代码，您会看到一个`h3`包含单词的标签`Titles`。确切的点是：

```
<h3 class="findSectionHeader"><a name="tt"></a>Titles</h3> 
```

如果我让 BS 只解析上面的行，它就可以完美地工作。我也试过：

```
soup.find(text='Title').find_parents('h3')
soup.find(text='Title').find_parent(class_='findSectionHeader') 
```

两者都只适用于在线，但不适用于整个 html。

如果我这样做，`soup.find(text='Titles').find_parents('div')`它适用于整个 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:08:21.477

在`findSectionHeader`H3 标签之前，文本中还有*另一个*标签：`Title`

```
>>> soup.find(text='Title').parent
<a href="/find?q=batman&amp;s=tt&amp;ref_=fn_tt">Title</a> 
```

您需要在搜索中更加具体，`Titles`改为搜索，然后循环查找正确的：

```
>>> soup.find(text='Titles').parent
<option value="tt">Titles</option>
>>> for elem in soup.find_all(text='Titles'):
...     parent_h3 = elem.find_parent('h3')
...     if parent_h3 is None:
...         continue
...     print parent_h3
... 
<h3 class="findSectionHeader"><a name="tt"></a>Titles</h3> 
```

`find(text='...')`只匹配*全文*，不匹配部分。如果您需要部分匹配，请使用正则表达式：

```
>>> import re
>>> soup.find_all(text='Title')
[u'Title']
>>> soup.find_all(text=re.compile('Title'))
[u'Titles', u'Titles', u'Titles', u'Title', u'Advanced Title Search'] 
```

# python - 在python中搜索json输出

> ID：15164827
> 
> 赞同：0
> 
> 时间：2013-03-01T18:52:41.980
> 
> 标签：python, json

所以我正在尝试学习如何搜索 trakt.tv 的 api 的输出并只返回某个节目的信息。json输出如下

```
[
  {
      "title": "NCIS",
      "year" : 2003,
      "url": "blah"
    },
   {   
       "title": "Jeffersons",
       "year" : 1902,
       "url": "notreally"
     }
] 
```

：编辑了正确格式的代码。

我试图只查找标题 NCIS 的信息。我在获取信息时遇到了问题。可能是因为我所看到的所有内容都与 json.dump 或 json.loads 相关，而我正在尝试使用`data = json.load(urllib2.urlopen(url))`

如果标题与 NCIS 匹配，我基本上只想显示 show:0。我只是不确定如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T19:17:35.370

[`/search/shows`API 方法](http://trakt.tv/api-docs/search-shows)会返回与您的搜索匹配的节目列表（每个都有一个映射）。

您可以简单地循环这些并匹配特定的标题：

```
data = json.load(urllib2.urlopen(url))

for show in data:
    if show['title'] == 'NCIS':
        # matching show 
```

或者您可以使用生成器表达式来获得一个匹配的节目：

```
try:
    ncis_show = next(show for show in data if show['title'] == 'NCIS')
except StopIteration:
    ncis_show = None  # not found 
```

# php - Javascript函数作为php？

> ID：15164828
> 
> 赞同：0
> 
> 时间：2013-03-01T18:52:43.023
> 
> 标签：php, javascript, function, redirect, timer

我正在使用 WebIM 在网站上提供聊天支持。我希望能够为客户端启动聊天会话时设置一个计时器，如果操作员/技术人员在“x”秒内没有响应，我希望页面重定向到客户端可以留言的另一个页面。

有点像“我们尝试联系你时请稍等”。这样，如果所有技术人员都太忙或帮助其他客户，等待的客户可以稍后再试或留言（例如当聊天离线时）。

我仔细查看了聊天脚本的创建者 mibew.org，没有关于此功能的任何内容，而且看起来他们的网站似乎即将被放弃。

我想出了一个使用 Javascript setTimeout 函数在“x”时间后运行一些 php 的想法。php 基本上会查询数据库以查看技术人员是否已进入相关会话，如果没有，则将客户端重定向到另一个页面，说明目前没有人可用，但他们可以留言等。

问题是，我对 JS 没有太多经验。

这是一种可能吗？是否有另一种更有效/更有效率的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:56:41.447

是的，你可以这么做。

您可以使用 timeout 函数每 x 秒执行一次 javascript 函数。

```
var time = 200;
setTimeout(function()
{ 
    func(); 
}, time); 
```

然后让函数执行一个ajax调用，从数据库中请求一些结果，并根据结果做一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:58:33.517

根本不会太难。当您的超时方法要求时：

```
 $.post('url/of/phpscript', 
        $data /* data you'd like to send*/,
        function(returnData) { doSomethingWithThisPhpValue(data) });

 function doSomethingWithThisPhpValue(data) {
     if (data == signed_in) //...
 } 
```

当然，值测试和变量最终将取决于您从 php 方法返回的数据，所以我不能更准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:08:06.360

一个如何使用使 javascript 和 PHP 一起工作而不混淆它的示例（ajax）：

首先你需要一个javascript函数：

```
function example()
{
    var select = true;
    var url = '../scripts/ajax.php';

    $.ajax(
    {
        // Post select to url.
        type : 'post',
        url : url,
        dataType : 'json', // expected returned data format.
        data : 
        {
                'select' : select // the variable you're posting.
        },
        success : function(data)
        {
            // This happens AFTER the PHP has returned an JSON array,
            // as explained below.
            var result1, result2, message;

            for(var i = 0; i < data.length; i++)
            {
                // Parse through the JSON array which was returned.
                // A proper error handling should be added here (check if
                // everything went successful or not)

                result1 = data[i].result1;
                result2 = data[i].result2;
                message = data[i].message;
                // Do something with result and result2, or message.
                // For example:
                $('#content').html(result1);
            }
        },
        complete : function(data)
        {
            // do something, not critical.
        }
    });
} 
```

现在我们需要在 ajax.php 中接收发布的变量：

```
$select = isset($_POST['select']) ? $_POST['select'] : false; 
```

如果未设置，三元运算符让 $select 的值变为 false。

确保您可以在此处访问您的数据库：

```
$db = $GLOBALS['db']; // En example of a PDO database connection 
```

现在，检查是否请求了 $select (true)，然后执行一些数据库请求，并使用 JSON 返回它们：

```
if($select)
{
    // Fetch data from the database.
    // Return the data with a JSON array (see below).
]
else
{
    $json[] = array
    (
        'message' => 'Not Requested'
    );
}
echo json_encode($json);
flush(); 
```

您如何从数据库中获取数据当然是可选的，您可以使用 JSON 从数据库中获取单行，也可以使用它返回多行。

让我举一个例子，说明如何使用 json 返回多行（您将在 javascript（数据）中迭代）：

```
function selectMultipleRows($db, $query)
{
    $array = array();
    $stmt = $db->prepare($query);
    $stmt->execute();
    if($result = $stmt->fetchAll(PDO::FETCH_ASSOC))
    {
        foreach($result as $res)
        {
            foreach($res as $key=>$val)
            {
                $temp[$key] = utf8_encode($val);
            }
            array_push($array, $temp);
        }
        return $array;
    }
    return false;
} 
```

然后你可以做这样的事情：

```
if($select)
{
    $array = array();
    $i = 0;

    $query = 'SELECT e.result1, e.result2 FROM exampleTable e ORDER BY e.id ASC;';
    foreach(selectMultipleRows($db, $query) as $row)
    {
        $array [$i]["result1"] = $row['result1'];
        $array [$i]["result2"] = $row['result2'];
        $i++;
    }

    if(!(empty($array))) // If something was fetched
    {
        while(list($key, $value) = each($array))
        {
             $json[] = array
             (
                 'result1' => $value["result1"],
                 'result2' => $value["result2"],
                 'message' => 'success'
             );
       }
    }
    else // Nothing found in database
    { 
        $json[] = array
        (
             'message' => 'nothing found'
        );
    }
}
// ... 
```

或者，如果你想亲吻（保持简单愚蠢）：

初始化一个从数据库中选择一些值并返回单行的基本函数：

```
function getSingleRow($db, $query)
{
    $stmt = $db->prepare($query);
    $stmt->execute();
    // $stmt->execute(array(":id"=>$someValue)); another approach to execute.
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if($result)
    {
        $array = (
            'result1' => $result['result1'], 
            'result2' => $result['result2']
        );
        // An array is not needed for a single value.
        return $array;
    }
    return false;
} 
```

然后获取行（或单个值）并使用 JSON 返回：

```
if($select)
{
    // Assume that the previously defined query exists.
    $results = getSingleRow($db, $query);
    if($results !== false)
    {
         $json[] = array
         (
             'result1' => $results['result1'],
             'result2' => $results['result2'],
             'message' => 'success'
         );
    }
    else // Nothing found in database
    { 
        $json[] = array
        (
             'message' => 'nothing found'
        );
    }
}
// ... 
```

无论如何，我希望我不会因为如此精确而在腿上开枪，但我喜欢这种技术，@Sabyre 想要一个例子，所以就在这里。如果您发现发生了奇怪的事情，请发表评论。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T19:18:30.347

像这样的东西会起作用

```
function callAfter5Seconds() {
  // your redirect or any other work goes here
}

// the second argument is the time, in milli-seconds (5000 = 5 seconds)
var myTimeout = setTimeout(callAfter5Seconds, 5000); 
```

...如果接线员确实接机，请不要忘记取消您的超时

```
clearTimeout(myTimeout); 
```

# java - 自签名证书的 HttpClient 4.1.x 错误（javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated）

> ID：15164831
> 
> 赞同：1
> 
> 时间：2013-03-01T18:52:53.777
> 
> 标签：java, tomcat, apache-httpclient-4.x

我正在尝试使用带有 clientAuth=true 的自签名证书配置 Tomcat6，然后使用 HttpClient 4.1.x 在客户端调用 Tomcat 服务器。

我按照[http://virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/](http://virgo47.wordpress.com/2010/08/23/tomcat-web-application-with-ssl-client-certificates/)中提供的说明进行操作，当我从浏览器或从 openssl 客户端（我运行了命令“openssl s_client -cert client.crt -key client.key -CAfile ca.crt -connect localhost:8443”）。

我面临的问题是 HttpClient。我编写了以下代码来创建 HttpClient

```
 private DefaultHttpClient creatHttpClient(KeyStore keyStore, 
        char[] keyStorePassword, KeyStore trustStore, char[] trustStorePassword) {
    try {

        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(
                TrustManagerFactory.getDefaultAlgorithm());
        trustManagerFactory.init(trustStore); // This contains CA certs
        TrustManager[] tm = trustManagerFactory.getTrustManagers();

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(
                KeyManagerFactory.getDefaultAlgorithm());
        keyManagerFactory.init(keyStore, keyStorePassword); // This contain client private key
        KeyManager[] km = keyManagerFactory.getKeyManagers();

        SSLContext sslContext = SSLContext.getInstance("TLS");
        sslContext.init(km, tm, new SecureRandom());

        SSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext, 
                SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 30000);

        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("https", 
                443, sslSocketFactory));

        ClientConnectionManager clientConnectionManager = 
                new ThreadSafeClientConnManager(schemeRegistry);

        final DefaultHttpClient httpClient = new DefaultHttpClient(
                clientConnectionManager, params);
        return httpClient;
    } catch(Exception e) {
        throw e;
    }
} 
```

为此，我收到了

```
 javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated 
```

我启用了调试

```
 static
    { System.setProperty("javax.net.debug", "ssl,handshake,trustmanager"); } 
```

我收到以下调试日志

```
 main, handling exception: java.lang.RuntimeException: Unexpected error:                      java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    main, SEND TLSv1 ALERT:  fatal, description = internal_error 
    main, WRITE: TLSv1 Alert, length = 2
    main, called closeSocket()
    main, IOException in getSession():  javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    main, called close()
    main, called closeInternal(true)
    main, called close()
    main, called closeInternal(true) 
```

在这种情况下可能会出现什么问题？我不想忽略 ssl 证书错误，而是想正确进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:31:48.020

我解决了我自己的问题。问题是我正在使用加载密钥库和信任库

```
InputStream ksin = this.getClass().getResourceAsStream("client.jks");
InputStream tsin = this.getClass().getResourceAsStream("cacerts.jks"); 
```

& 在 Junit 测试中使用这些行 & 它无法找到 .jks 文件。

我通过输入以下内容来解决这个问题

```
if(0 == keyStore.size()) { throw new RuntimeException("Keystore is empty"); }
if(0 == trustStore.size()) { throw new RuntimeException("Truststore is empty"); } 
```

在密钥库和信任库初始化之后。

所以，我把线改成

```
InputStream ksin = Thread.currentThread().getContextClassLoader().getResourceAsStream("client.jks");
InputStream tsin = Thread.currentThread().getContextClassLoader().getResourceAsStream("cacerts.jks"); 
```

& 一切正常。

# javascript - Javascript - 读取文件并迭代句子

> ID：15164832
> 
> 赞同：1
> 
> 时间：2013-03-01T18:52:59.533
> 
> 标签：javascript, html, file

我正在尝试读取本地文本文件以执行计算音节、字符等功能，

我试图通过这样做来做到这一点：

```
var txtFile = new XMLHttpRequest();
        txtFile.open("GET", "file://path/to/my/file.txt", true);
        txtFile.onreadystatechange = function() {
    if (txtFile.readyState === 4) {  // Makes sure the document is ready to parse.
            if (txtFile.status === 200) {  // Makes sure it's found the file.
            allText = txtFile.responseText;
            //lines = txtFile.responseText.split("\r\n"); // Will separate each line into an array
        } //"\r\n" 
    }
} 
```

当我尝试将 'txtFile' 记录到它打印 [ObjectHtmlRequest] 的命令行时，我如何查看我正在加载的内容并因此对其进行迭代？

当我尝试执行这段代码时，我也会收到一条错误消息

```
var text = txtFile
//$(this).val();
//document.text_input.my_text.value = newtext;
var words = new Array(text.replace(/\s/g, ' ').split(' ')); 
```

以前有效，但我猜现在不是，因为我不再使用文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:16:38.480

大多数浏览器不允许 JavaScript 使用本地文件系统。Chrome 肯定不会，我不确定 Firefox 和其他。

在这种情况下，我要做的是：

*   如果您要读取的文件是静态的，请使用**基于本地目录的本地 Web 服务器。**我通常从`python -mhttp.server`(Python 3) 或`python -mSimpleHTTPServer`(Python 2) 开始。

*   如果您想让用户选择文件，请使用最新的**HTML5 File API 。**更多信息[在这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。

*编辑：嗯，我说的并不完全正确。Chrome 允许您使用本地文件，但您必须在命令行上使用特殊的开关 ( `--allow-file-access-from-files`) 启动它，坦率地说，这很麻烦，而且仅用于开发。不要在生产中依赖它！*

# c# - 从日期构造时文件名获得不同的文件扩展名

> ID：15164834
> 
> 赞同：3
> 
> 时间：2013-03-01T18:53:12.510
> 
> 标签：c#, savefiledialog

我正在尝试将带有文本的文件保存到特定位置：

```
saveFileDialog.FileName = "Info_" + 
     System.DateTime.Now.ToString("yyyyMMddhmmss" + ".txt");
string Info = "";
TextFormat(ref Info);
File.WriteAllText(Path.Combine(dir.ToString(),saveFileDialog.FileName), Info); 
```

所以现在当我按下按钮时，如果给我文件名：（`Info_2013030114511.PxP`注意“.PxP”而不是“.txt”），但如果我将更改为：

```
saveFileDialog.FileName = "Info_" +
   System.DateTime.Now.ToString("yyyyMMddhmmss" + ".TXT"); 
```

给我正确的结果：`Info_2013030114511.TXT`

我想知道这是一个错误还是我做错了什么......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T18:55:12.693

您提供`"yyyyMMddhmmss.txt"`给 DateTime 格式功能。它将 the 解释`'t'`为 am/pm 说明符。你的意思是：

```
saveFileDialog.FileName = "Info_" + 
                          System.DateTime.Now.ToString("yyyyMMddhmmss") + ".txt"; 
```

# c# - 从指定 xsi:type 属性的 XML 元素返回正确的数据类型

> ID：15164837
> 
> 赞同：1
> 
> 时间：2013-03-01T18:53:26.300
> 
> 标签：c#, .net, xml, xsd

.NET 框架是否具有用于解析 XML Schema 的一些原始数据类型并将它们转换为适当的 .NET 数据类型的内置 API？例如：

```
<someElement 
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:type="xs:dateTime">2013-03-01T18:36:00Z</someElement> 
```

我想编写一些 C# 代码来关闭该`xsi:type`属性并为我提供等效的 .NET 数据类型，最好使用一些来自 .NET 的内置 API。我最近才发现这个`XmlConvert`类有几个`ToXXX()`静态方法（比如`ToDateTime()`，但我希望它自动选择合适的类型。

**重要警告：**如果可能的话，我强烈希望避免使用`xsd.exe`基于 XML 模式文件自动生成 C# 类声明的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:41:21.447

不，没有什么可以在 .NET 中自动执行您想要的操作。

最接近的是由 objecte 序列化器/反序列化器自动生成的代码——在反序列`xsi:type`化 XML 元素时，它实际上可以读取并用于生成不同类的对象，但它不适用于像日期这样的原始类型（而且相当使用起来很麻烦——你必须声明类并反序列化它们）。

# jsf - Tomcat 6、Primefaces、JSF

> ID：15164846
> 
> 赞同：0
> 
> 时间：2013-03-01T18:53:50.587
> 
> 标签：jsf, tomcat, primefaces

发生了一个非常奇怪的问题。我在本地计算机上的 tomcat 6 上的 JSF 和 Primefaces 下开发了一个应用程序。一切都很完美。但是当我在远程 tomcat 6（企业 RedHat Linux 下）上部署应用程序时，primefaces 停止工作。最有趣的部分：响应需要很多时间，它会返回生成的 html（所以它看起来像是在调用生命周期）。但是没有渲染任何组件（有很多 html 与 javascript 函数混合在一起） - p:tabView 和其他组件的内容被渲染为简单的文本行。但至于 Javascript，它指出 - ReferenceError: PrimeFaces is not defined。Catalina 日志文件没有说明任何内容。

我不知道它会是什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:23:09.770

1) Check what dependencies your project has in eclipse build path. Verify all of them are available in your remote server . All the dependencies in build path should be copied to the lib folder in war file you are generating(unless they are runtime like tomcat,jdk etc).

2) Verify your web.xml and faces-config.xml is same in your eclipse and war deployed in remote.

If it doesn't work then you can compare the temp folder in your eclipse to the war you are deploying contains everything that is in local.

You can find your local war by searching for your project file in eclipse under your workspace

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:42:38.893

问题在于 Tomcat 的安全性。它不允许任何重定向，因此 js 文件列在链接中，但没有获取任何内容。通过重新安装tomcat解决了问题。

# macos - Maven 任务中的 SVN 版本与 MacOS 上的 SVNKit

> ID：15164850
> 
> 赞同：0
> 
> 时间：2013-03-01T18:53:59.120
> 
> 标签：macos, svn, maven, osx-mountain-lion

我在带有 Mountain Lion 的 Mac 上的 Maven 构建（mvn clean install）中收到此错误

`org.tmatesoft.svn.core.SVNException: svn: The path 'XYZ' appears to be part of Subversion 1.7 (SVNKit 1.4) or greater working copy rooted at '/Users/XYZ/workspace/XYZ'. Please upgrade your Subversion (SVNKit) client to use this working copy.`

我将 SVN 作为 Apple 命令行工具包的一部分安装，并安装在 /usr/bin 中。我也安装了最新的 SVN，但它安装在 /usr/local/bin。当 maven 构建运行时，它不会选择最新的 SVN，而是选择较旧的 SVN 并失败。以前有人遇到过这种问题吗？我认为有 2 个选项 - 1）以某种方式强制 maven 使用新安装的 SVN。2) 将作为 Apple 命令行工具的一部分安装的 SVN 升级到最新的 SVN。我已经用最新版本重新安装了命令行工具，但它仍然坚持旧版本。

我不控制 pom.xml 所以修改它不是一个可行的选择。

任何解决此问题的指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:55:18.803

这意味着您的 svn 客户端是 1.7 版，但工作副本（您的项目工作区）已使用旧版本签出。

通过在 pom.xml 所在的项目根目录中执行以下命令很简单。

```
svn upgrade 
```

请注意，maven 使用您操作系统路径中的 svn 客户端。

升级后，您应该将 IDE 配置为也使用 1.7 版。就我而言，我将 Eclipes Juno sr1 与 Svnkit 一起使用。

无论如何，如果您不想更改工作副本或 IDE 配置。还有一种替代方法是安装 svn clinet 1.4/1.5/1.6 并通过操作系统路径将其设置为活动状态。

我希望这可能会有所帮助。

问候，

查理·Ch。

# ruby-on-rails - 浏览模式中两条路径上的关系

> ID：15164854
> 
> 赞同：0
> 
> 时间：2013-03-01T18:54:13.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord, eager-loading

从上到下，我的表之间有 belongs_to 关系，而从另一个方向来看，还有 has_many 关系。

```
ReportTarget
Report  
Manager
Organization 
```

和

```
Score
Manager
Organization 
```

所以请注意`Report`table 和`Score`table 在同一级别上。他们都有`Manager`Table 作为他们的父母。

我个人可以弄清楚如何通过急切加载来导航它们。对于第一个我会做：

```
@blah = Organization.includes(managers: { reports: :report_targets }).find(params[:id]) 
```

对于第二个，我可以这样做：

```
@blah = Organization.includes([managers: :scores]).find(params[:id]) 
```

但是因为我在我的控制器中使用并想将 JSON 传递给 JBuilder，所以我不知道如何传递它们？或者也许将它们结合在一起？这样生成的散列将它们放在一个散列中，但具有单独的键：

```
{
  "firstoneinfo" : [
     # stuff that first json returns, can have their own internal hashes
     ],
   "SecondOneinfo : [
    #stuff that second json returns, can have their own internal hashes
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:42:38.890

使用两个不同的实例变量，

```
@firstoneinfo =  Organization.includes(managers: { reports: :report_targets }).find(params[:id])
@SecondOneInfo = Organization.includes([managers: :scores]).find(params[:id]) 
```

然后只使用 .json.jbuilder 视图文件中的那些

# arrays - 如何将连续值复制到数组

> ID：15164862
> 
> 赞同：2
> 
> 时间：2013-03-01T18:54:58.757
> 
> 标签：arrays, numpy, replace, indexing, copy

```
copyto = zeros(10)
what = ones(3)
where = 2
copyto[where:len(what)+where] = what 
```

有没有办法将所有值从较小的数组复制到特定位置的较大数组中，而不提供上索引？我认为它会起作用的方式是

```
copyto[where:] = what 
```

但这给了我

```
ValueError: operands could not be broadcast together with shapes 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:45:18.973

在赋值的左侧和右侧，您必须具有相同形状的数组，以便各个元素之间存在一对一的对应关系。在您的情况下，数组（视图）`copyto[where:]`有 8 个元素，而`what`有 3 个元素，因此您的分配没有明确定义。（或者换一种说法：没有唯一的方法可以将三个值分配给八个变量，因此分配定义不明确。）

# java - 如何在对 Spring MVC 控制器的 GET 请求中接受日期参数？

> ID：15164864
> 
> 赞同：135
> 
> 时间：2013-03-01T18:55:06.810
> 
> 标签：java, spring, date, spring-mvc

我有一个 GET 请求，它将 YYYY-MM-DD 格式的日期发送到 Spring Controller。控制器代码如下：

```
@RequestMapping(value="/fetch" , method=RequestMethod.GET)
    public @ResponseBody String fetchResult(@RequestParam("from") Date fromDate) {
        //Content goes here
    } 
```

当我使用 Firebug 进行检查时，请求已正确发送。我得到错误：

> HTTP 状态 400：客户端发送的请求语法错误。

如何让控制器接受这种日期格式？请帮忙。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-03-01T19:03:20.290

好的，我解决了。写给那些在一整天不间断的编码之后可能会感到疲倦并且错过这么愚蠢的事情的人。

```
@RequestMapping(value="/fetch" , method=RequestMethod.GET)
    public @ResponseBody String fetchResult(@RequestParam("from") @DateTimeFormat(pattern="yyyy-MM-dd") Date fromDate) {
        //Content goes here
    } 
```

是的，这很简单。只需添加 DateTimeFormat 注释。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-04T03:05:36.880

这就是我从前端获取格式化日期的方法

```
 @RequestMapping(value = "/{dateString}", method = RequestMethod.GET)
  @ResponseBody
  public HttpStatus getSomething(@PathVariable @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) String dateString) {
   return OK;
  } 
```

你可以用它来得到你想要的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-03-06T21:54:14.227

...或者您可以以正确的方式进行操作，并为整个应用程序中的日期序列化/反序列化制定一致的规则。把它放在 application.properties 中：

```
spring.mvc.date-format=yyyy-MM-dd 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-12-05T08:00:28.067

以下解决方案非常适用于 Spring Boot 应用程序。

**控制器：**

```
@GetMapping("user/getAllInactiveUsers")
List<User> getAllInactiveUsers(@RequestParam("date") @DateTimeFormat(pattern="yyyy-MM-dd HH:mm:ss") Date dateTime) {
    return userRepository.getAllInactiveUsers(dateTime);
} 
```

所以在调用者（在我的例子中是一个网络流量）中，我们需要以这种（**“yyyy-MM-dd HH:mm:ss”**）格式传递日期时间。

**来电方：**

```
public Flux<UserDto> getAllInactiveUsers(String dateTime) {
    Flux<UserDto> userDto = RegistryDBService.getDbWebClient(dbServiceUrl).get()
            .uri("/user/getAllInactiveUsers?date={dateTime}", dateTime).retrieve()
            .bodyToFlux(User.class).map(UserDto::of);
    return userDto;
} 
```

**存储库：**

```
@Query("SELECT u from User u  where u.validLoginDate < ?1 AND u.invalidLoginDate < ?1 and u.status!='LOCKED'")
List<User> getAllInactiveUsers(Date dateTime); 
```

干杯！！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-25T21:30:03.377

如果你想使用 PathVariable，你可以使用下面的示例方法（所有方法都是并且做同样的事情）：

```
//You can consume the path .../users/added-since1/2019-04-25
@GetMapping("/users/added-since1/{since}")
public String userAddedSince1(@PathVariable("since") @DateTimeFormat(pattern = "yyyy-MM-dd") Date since) {
    return "Date: " + since.toString(); //The output is "Date: Thu Apr 25 00:00:00 COT 2019"
}

//You can consume the path .../users/added-since2/2019-04-25
@RequestMapping("/users/added-since2/{since}")
public String userAddedSince2(@PathVariable("since") @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) Date since) {
    return "Date: " + since.toString(); //The output is "Date: Wed Apr 24 19:00:00 COT 2019"
}

//You can consume the path .../users/added-since3/2019-04-25
@RequestMapping("/users/added-since3/{since}")
public String userAddedSince3(@PathVariable("since") @DateTimeFormat(pattern = "yyyy-MM-dd") Date since) {
    return "Date: " + since.toString(); //The output is "Date: Thu Apr 25 00:00:00 COT 2019"
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-05T20:39:24.883

您可以使用 ：

public @ResponseBody String fetchResult( **@RequestParam("from")@DateTimeFormat(pattern="yyyy-MM-dd")** Date fromDate) { //你的代码...

```
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-19T14:25:03.493

2000-10-31T01:30:00.000-05:00 转换为日期时间 (Joda)

```
@GetMapping("test/{dateTimeStart}")
public void getCheckDaily2(
        @PathVariable(value = "dateTimeStart", required = false)
            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)
                DateTime dateTimeStart){

body here...
} 
```

# android - 允许用户添加/删除按钮和按钮自动移动位置

> ID：15164866
> 
> 赞同：0
> 
> 时间：2013-03-01T18:55:11.697
> 
> 标签：android, android-layout

我想为 android 平台创建一个灵活的用户界面。

基本上我的布局将包括一个图像按钮，开头带有“加号”符号。当用户点击它时。调用另一个布局，提示用户命名假设创建的图像按钮。当用户单击确认时，他将返回第一个布局，新添加的图像按钮将替换“加号”符号图像按钮和加号图像按钮将向右移动。

我最初知道如何创建布局，但我不知道如何对其进行编程以按照我上面描述的方式运行。

好的，现在我的主布局文件是这样设置的：

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

<RelativeLayout 

    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000"  >
    <ImageButton
        android:id="@+id/addRoom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="25dp"
        android:layout_marginTop="38dp"
        android:background="#80000000"
        android:src="@drawable/plus" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="@+id/addRoom"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/addRoom"
        android:layout_alignRight="@+id/addRoom"
        android:layout_below="@+id/addRoom"
        android:text="@string/add_room"
        android:gravity="center"
        android:textColor="#FFFFFF" />

    </RelativeLayout>
</ScrollView> 
```

当我包含片段以移动图像按钮和文本视图时，我会遇到任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:43:09.763

当您想由用户实时操作活动的 UI 时，建议使用 Fragments 和 Fragment Manager 来更改活动视图的不同部分。

您可以在文档中找到重要信息：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

或者

[http://marakana.com/s/post/1250/android_fragments_tutorial](http://marakana.com/s/post/1250/android_fragments_tutorial)

在你的情况下，你会做这样的事情：

```
fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.remove(plusButtonFragment)
.add(R.id.containerForFragments,userNewFragment)
.add(R.id.containerForFragments, plusButtonFragment)).commit(); 
```

在创建**plusButtonFragment**和**userNewFragment 之后**。

**更新：**

要在相对布局中管理片段位置，请查看下一篇文章：

[如何在相对布局中以编程方式添加片段](https://stackoverflow.com/questions/13196682/how-to-add-fragments-programmatically-in-relativelayout)

# visual-studio-2012 - Visual Studio 2012 - Web 测试记录器栏问题

> ID：15164870
> 
> 赞同：3
> 
> 时间：2013-03-01T18:55:17.813
> 
> 标签：visual-studio-2012, performance-testing, internet-explorer-10

当我尝试在 Visual Studio 2012 中记录 Web 性能测试时，Internet Explorer 10 中不显示 Web 测试记录器栏。

当我使用其他用户登录我的电脑时，我可以看到两个 IE 插件：

*   Microsoft Web 测试记录器 10.0 助手
*   Web 性能测试 10.0

我正确地看到了网络测试记录器栏。

但是对于我的用户，没有“Web Performance Test 10.0”插件。因此，当我开始录制新的 Web 性能测试时，会打开一个新的 Web 浏览器，但浏览器没有记录器栏。

我已经研究了所有[这些建议](http://blogs.msdn.com/b/mtaute/archive/2007/11/09/diagnosing-and-fixing-web-test-recorder-bar-issues.aspx)，不幸的是没有任何运气解决问题。

我正在运行 Windows 8 x64、带有 Update 1 (11.0.51106.01) 的 Visual Studio Ultimate 2012 和 Internet Explorer 10 (10.0.9200.16484)。

# postgresql - Postgresql Autodoc 安装：“没有规则来制作目标 `postgresql_autodoc.1.in'，需要 `postgresql_autodoc.1'。停止

> ID：15164871
> 
> 赞同：1
> 
> 时间：2013-03-01T18:55:18.793
> 
> 标签：postgresql, makefile, autodoc

[我从http://www.rbt.ca/autodoc/index.html](http://www.rbt.ca/autodoc/index.html)下载了最新的 Postgresql Autodoc (v1.41)
当我运行 make 我得到这个错误：

```
make: *** No rule to make target `postgresql_autodoc.1.in', needed by `postgresql_autodoc.1'.  Stop. 
```

问题是什么？

Mac OS X Lion，10.7.5
GNU Make 3.81

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:27:36.670

它坏了。请写信给作者以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T22:19:19.037

在这种特殊情况下，您可以很容易地规避问题：

```
tar -zxf postgresql_autodoc-1.41.tar.gz
cd postgresql_autodoc
cp postgresql_autodoc.1 postgresql_autodoc.1.in
make 
```

# php - Google Maps 多个标记位置 ZOOM ERROR

> ID：15164878
> 
> 赞同：0
> 
> 时间：2013-03-01T18:55:43.187
> 
> 标签：php, javascript, api, google-maps, zooming

我刚注册寻求谷歌地图的帮助。我正在做一个项目，该项目允许我在我的网站上的谷歌地图中插入各种房屋广告。我不知道为什么那个位置永远不正确，起初我尝试使用下面的代码......

然后我不得不删除变量城市、街道、州和邮政编码，他们为什么要开战。但没有解决任何问题。因此，请转到链接以更好地了解情况。生成的代码位于地图 div 顶部的脚本标记中。

[关联](http://pineto.contat.eu/?ct_property_type=0&ct_beds=0&ct_baths=0&ct_status=0&ct_price_from=&ct_price_to=&ct_additional_features=0&search-listings=true%2a)

```
<script>var defaultmapcenter = {mapcenter: "<?php echo $ct_options['ct_home_map_center']; ?>"}; google.maps.event.addDomListener(window, 'load', function(){ estateMapping.init_property_map(property_list, defaultmapcenter); });</script>

<script>
            var property_list = [];
            var default_mapcenter = [];

            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); $count++; ?>

                var property = {
                    thumb: "<?php ct_first_image_tn_map() ?>",
                    price: "<?php currency(); ?><?php map_pin_price(); ?>",
                    fullPrice: "<?php currency(); ?><?php listing_price(); ?>",
                    bed: "<?php beds(); ?>",
                    bath: "<?php baths(); ?>",
                    size: "<?php echo get_post_meta($post->ID, "_ct_sqft", true); ?> <?php sqftsqm(); ?>",
                    street: "<?php the_title(); ?>",
                    city: "<?php city(); ?>",
                    state: "<?php state(); ?>",
                    zip: "<?php zipcode(); ?>",
                    latlong: "<?php echo get_post_meta(get_the_ID(), "_ct_latlng", true); ?>",
                    permalink: "<?php the_permalink(); ?>",
                    agentThumb: "<?php echo get_template_directory_uri(); ?>/img_resize/timthumb.php?src=<?php the_author_meta('ct_profile_url'); ?>&w=40&zc=1'",
                    agentName: "<?php the_author_meta('first_name'); ?> <?php the_author_meta('last_name'); ?>",
                    agentTagline: "<?php if(get_the_author_meta('tagline')) { the_author_meta('tagline'); } ?>",
                    agentPhone: "<?php if(get_the_author_meta('office')) { the_author_meta('office'); } ?>",
                    agentEmail: "<?php if(get_the_author_meta('email')) { the_author_meta('email'); } ?>",
                    isHome: "<?php if(is_home()) { echo "false"; } else { echo "true"; } ?>",
                    commercial: "<?php if(has_type('commercial')) { echo 'commercial'; } ?>"
                }
                property_list.push(property);

        <?php     
            endwhile; endif;
            wp_reset_query();
        ?>
            </script>
            <script>var defaultmapcenter = {mapcenter: "<?php echo $ct_options['ct_map_center']; ?>"}; google.maps.event.addDomListener(window, 'load', function(){ estateMapping.init_property_map(property_list, defaultmapcenter); });</script>

**Javascript:**
---------------

    var estateMapping = (function () {
        var self = {},
            marker_list = [],
            open_info_window = null,
            x_center_offset = 0, // x,y offset in px when map gets built with marker bounds
            y_center_offset = -100,
            x_info_offset = 0, // x,y offset in px when map pans to marker -- to accomodate infoBubble
            y_info_offset = -100;

        function build_marker(latlng, property) {
            var marker = new MarkerWithLabel({
                map: self.map, 
                draggable: false,
                flat: true,
                labelContent: property.price,
                labelAnchor: new google.maps.Point(22, 0),
                labelClass: "label", // the CSS class for the label
                labelStyle: {opacity: 1},
                icon: 'wp-content/themes/reale/images/blank.png',   
                position: latlng
                });

                self.bounds.extend(latlng);
                self.map.fitBounds(self.bounds);
                self.map.setCenter(convert_offset(self.bounds.getCenter(), x_center_offset, y_center_offset));

                var infoBubble = new InfoBubble({
                    maxWidth: 275,
                    content: contentString,
                    borderRadius: 4,
                    disableAutoPan: true
                });

                var residentialString = '';
                if(property['commercial'] != 'commercial') {
                    var residentialString='<p class="details">'+property.bed+'&nbsp;'+property.bath+'';
                }

                var contentString =
                '<div class="info-content">'+
                '<a href="'+property.permalink+'"><img class="left" src="'+property.thumb+'" /></a>'+
                '<div class="listing-details left">'+
                '<h3><a href="'+property.permalink+'">'+property.street+'</a></h3>'+
                '<p class="location">'+property.city+', '+property.state+'&nbsp;'+property.zip+'</p>'+
                '<p class="price"><strong>'+property.fullPrice+'</strong></p>'+residentialString+', '+property.size+'</p></div>'+
                '</div>';

                var tabContent =
                '<div class="info-content">'+
                '<img class="left" src="'+property.agentThumb+'" />'+
                '<div class="listing-details left">'+
                '<h3>'+property.agentName+'</h3>'+
                '<p class="tagline">'+property.agentTagline+'</p>'+
                '<p class="phone"><strong>Tel:</strong> '+property.agentPhone+'</p>'+
                '<p class="email"><a href="mailto:'+property.agentEmail+'">'+property.agentEmail+'</a></p>'+
                '</div>'+
                '</div>';

                infoBubble.addTab('Details', contentString);
                infoBubble.addTab('Contact Agent', tabContent);

                google.maps.event.addListener(marker, 'click', function() {
                    if(open_info_window) open_info_window.close();

                    if (!infoBubble.isOpen()) {
                        infoBubble.open(self.map, marker);
                        self.map.panTo(convert_offset(this.position, x_info_offset, y_info_offset));
                        open_info_window = infoBubble;
                    }
                });
        }

        function geocode_and_place_marker(property) {
           var geocoder = new google.maps.Geocoder();
           var address = property.street+', '+property.city+' '+property.state+', '+property.zip;

               //If latlong exists build the marker, otherwise geocode then build the marker
               if (property['latlong']) {
                   var lat = parseFloat(property['latlong'].split(',')[0]),
                        lng = parseFloat(property['latlong'].split(',')[1]);
                    var latlng = new google.maps.LatLng(lat,lng);
                    build_marker(latlng, property);

               } else {
                   geocoder.geocode({ address : address }, function( results, status ) {
                       if(status == google.maps.GeocoderStatus.OK) {
                            var latlng = results[0].geometry.location;
                            build_marker(latlng, property);
                        }
                    });
                }
        }

        function init_canvas_projection() {
            function CanvasProjectionOverlay() {}
            CanvasProjectionOverlay.prototype = new google.maps.OverlayView();
            CanvasProjectionOverlay.prototype.constructor = CanvasProjectionOverlay;
            CanvasProjectionOverlay.prototype.onAdd = function(){};
            CanvasProjectionOverlay.prototype.draw = function(){};
            CanvasProjectionOverlay.prototype.onRemove = function(){};

            self.canvasProjectionOverlay = new CanvasProjectionOverlay();
            self.canvasProjectionOverlay.setMap(self.map);
        }

        function convert_offset(latlng, x_offset, y_offset) {
            var proj = self.canvasProjectionOverlay.getProjection();
            var point = proj.fromLatLngToContainerPixel(latlng);
            point.x = point.x + x_offset;
            point.y = point.y + y_offset;
            return proj.fromContainerPixelToLatLng(point);
        }

        self.init_property_map = function (properties, defaultmapcenter) {
            var options = {
                zoom: 1,
                center: new google.maps.LatLng(defaultmapcenter.mapcenter),
                mapTypeId: google.maps.MapTypeId.ROADMAP, 
                disableDefaultUI: true,
                streetViewControl: false
            };

            self.map = new google.maps.Map( document.getElementById( 'map' ), options );
            self.bounds = new google.maps.LatLngBounds();
            init_canvas_projection();

            //wait for idle to give time to grab the projection (for calculating offset)
            var idle_listener = google.maps.event.addListener(self.map, 'idle', function() {
                for (i=0;i<properties.length;i++) {
                    geocode_and_place_marker(properties[i]);
                }
                google.maps.event.removeListener(idle_listener);
            });

        }

        return self;
    }()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:35:39.263

我从您的实时站点中获取了几个属性对象并简化了代码。这似乎可以正确定位标记。您的问题中有太多代码无法准确说明您出错的地方，但是如果您从这个演示开始，您可以慢慢添加您的功能并查看它在哪里中断。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/mtpma/)]]]

### 输出：

> ![输出](../Images/f7832e3c493d57df08b38ce84c812b35.png)

### 脚本：

```
var property_list = [
        {latlong: "36.738884,15.022705"},
        {latlong: "42.608127,14.067408"}
    ],
    options = {
        zoom: 4,
        center: new google.maps.LatLng( 36.73, 15.02 ),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    },
    map = new google.maps.Map( 
        document.getElementById( 'map-canvas' ), 
        options 
    );

for( var index = 0; index < property_list.length; index++ ) {
    var latlong = property_list[index]['latlong'].split(','),
        latlng = new google.maps.LatLng( latlong[0], latlong[1] ),
        marker = new google.maps.Marker( {position: latlng, map: map} );
    marker.setMap( map );
}; 
```

### HTML：

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<div id="map-canvas"></div> 
```

### CSS：

```
#map-canvas { 
    height: 300px; 
    width: 500px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:54:52.303

您的标记和javascript代码没有任何问题，所有（除了一个）标记都放置在正确的位置。

问题是你的内容。您可能已经注意到 265k 标记的阴影比 1k 标记要暗得多。这是因为在该标记后面是 8 个其他标记，**您的 9 个标记是用相等的 LatLng 定义的**。

只有 1 个标记未显示，它是带有空 latlong 的标记。由于缺少属性`street,city,state`和`zip`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T14:38:45.837

替换这一行

```
var address = property.street+', '+property.city+' '+property.state+', '+property.zip+', '+property.country; 
```

使用这些行删除具有空值的字段

```
 var city    = (property.city.trim() != '')?property.city.trim()+',':'';
        var state   = (property.state.trim() != '')?property.state.trim()+',':''; 
        var country = (property.country.trim() != '')?property.country.trim():'';
        var address = city+state+country; 
```

# angularjs - 防止 AngularJs 将 GET 错误消息输出到控制台？

> ID：15164882
> 
> 赞同：2
> 
> 时间：2013-03-01T18:55:59.850
> 
> 标签：angularjs

当我写`$http.get`请求时，即使我提供了一个`error`处理函数：

```
function Ctrl1($scope, $http){
 $http.get('www.blahNonexistent.com/api').
 success(
     function(data){console.log("SUCCESS");}
 ).
 error(
     function(data){console.log("ERROR");}
 )
} 
```

AngularJs 仍然将错误输出到控制台：

![在此处输入图像描述](../Images/46e5270c69ff70bee229caa898e61cde.png)

[这是 JsFiddle 上的一个最小工作示例](http://jsfiddle.net/W2AzM/)。

有什么办法可以防止这种行为？（如果 API 端点之一关闭，我不希望使用认为站点已损坏）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:06:47.890

这是本机错误消息，而不是 angularjs 错误，因此我认为您不能“禁用”/阻止它。

例如，如果您将以下 css 添加到您的小提琴中，您将在控制台上收到相同的 GET 错误：

```
div {
    background-image: url("image.png");
} 
```

# android - Android 视图：在设置可见性之前检查可见性可以提高性能吗？

> ID：15164885
> 
> 赞同：23
> 
> 时间：2013-03-01T18:56:27.003
> 
> 标签：android, performance, android-view

`View`我有帮助方法，根据传递给方法的状态变量设置某些 s 的可见性。有时，这些方法会被多次调用，并且`View`可见性不会改变。因此，我发现自己开始检查每个视图的可见性，`View`然后再考虑*“将视图的可见性更改为相同的可见性并无缘无故地导致刷新”，这是毫无意义的*。

```
 if (myView.getVisibility() != View.VISIBLE) {
                myView.setVisibility(View.VISIBLE);
            }
            etc... 
```

但是，现在我想知道是否`setVisibility`已经考虑到了这一点，并检查您是否对`View`已经拥有的内容设置了相同的可见性，并且没有不必要地刷新`View`（我的代码正在尝试做的事情）。

那么有谁知道我的“优化”是否真的提高了任何性能，或者 API 是否已经领先了我一步？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-01T19:02:43.740

他们已经领先了一步。请参阅以下代码`View.java:setVisibility()`：

```
public void setVisibility(int visibility) {
    setFlags(visibility, VISIBILITY_MASK);
    ...
} 
```

它调用`setFlags()`：

```
void setFlags(int flags, int mask) {
    int old = mViewFlags;
    mViewFlags = (mViewFlags & ~mask) | (flags & mask);

    int changed = mViewFlags ^ old;
    if (changed == 0) {
        return;
    }
    ....
} 
```

它检查标志是否与当前状态匹配。如果是这样，它只是简单地返回而不做任何事情。

# hadoop - Hadoop推测任务执行

> ID：15164886
> 
> 赞同：31
> 
> 时间：2013-03-01T18:56:31.310
> 
> 标签：hadoop, mapreduce

在 Google 的 MapReduce 论文中，他们有一个备份任务，我认为这与 Hadoop 中的推测任务相同。投机任务是如何实现的？当我开始一项推测性任务时，该任务是从一开始就作为较旧且缓慢的任务开始，还是仅从较旧任务到达的位置开始（如果是，是否必须复制所有中间状态和数据？）

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-01T19:17:35.887

Hadoop 系统的一个问题是，通过将任务划分到多个节点上，一些速度较慢的节点可能会限制程序其余部分的速率。

任务可能由于各种原因变慢，包括硬件降级或软件配置错误，但原因可能难以检测，因为任务仍然成功完成，尽管时间比预期的要长。Hadoop 不会尝试诊断和修复运行缓慢的任务；相反，它会尝试检测任务何时运行比预期慢，并启动另一个等效的任务作为备份。这被称为任务的推测执行。

例如，如果一个节点有一个慢速磁盘控制器，那么它读取其输入的速度可能仅为所有其他节点的 10%。所以当 99 个 map 任务已经完成时，系统还在等待最后一个 map 任务签入，这比其他所有节点花费的时间要长得多。

通过强制任务彼此隔离运行，单个任务不知道它们的输入来自哪里。任务信任 Hadoop 平台来提供适当的输入。因此，相同的输入可以并行处理多次，以利用机器能力的差异。由于作业中的大多数任务即将结束，Hadoop 平台将在几个没有其他工作要执行的节点上安排剩余任务的冗余副本。这个过程被称为推测执行。当任务完成时，他们会向 JobTracker 宣布这一事实。无论哪个任务副本首先完成，都将成为最终副本。如果其他副本是推测性地执行，Hadoop 会告诉 TaskTracker 放弃任务并丢弃它们的输出。

默认情况下启用推测执行。您可以通过分别使用旧 API将`mapred.map.tasks.speculative.execution`和JobConf 选项设置为 false 来禁用映射器和化简器的推测执行，而对于较新的 API，您可以考虑更改和.`mapred.reduce.tasks.speculative.execution``mapreduce.map.speculative``mapreduce.reduce.speculative`

因此，要回答您的问题，它确实会重新开始，与其他任务完成/完成的程度无关。

参考：http: [//developer.yahoo.com/hadoop/tutorial/module4.html](http://developer.yahoo.com/hadoop/tutorial/module4.html)

# php - PHP中的继承和函数调用

> ID：15164895
> 
> 赞同：0
> 
> 时间：2013-03-01T18:57:04.883
> 
> 标签：php, static

我不知道如何为以下设置调用 insertValue 函数：

这是我的引导程序。它设置我的控制器并加载它的模型。（不是很重要）

```
<?php
$controller = new Register;
$controller->loadModel('register');
?> 
```

这是具有 loadModel 功能的控制器类。

```
class Controller {
public static $model;
public function loadModel($name) {
    $path = 'models/'.$name.'Model.php';
    if(file_exists($path))
    {
        require 'models/'.$name.'Model.php';
        $modelName = $name .'Model';
        $this->model = new $modelName;
    }
}
} 
```

这是父模型类：

```
class Model {
public static $database;

function __construct() {
    $this->database = new Database();
}

} 
```

现在 Database 类有一个我想要调用的名为 insertValue() 的函数，而 register 类是我想要调用它的地方。它是Controller的扩展

寄存器类出现如下：

```
class Register extends Controller {

function __construct() {
    parent::__construct();
    $this->view->render("register", "index", "Register", TRUE);
    }
...
I tried calling it like so:
$this->model->database->insertValue();
but it doesn't even execute. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:04:07.220

我认为这是因为您的字段*数据库*和*模型*是静态的。但是你是动态地调用它。尝试删除静态声明。

# android - 我在 android 4.2.1 上出现错误，而不是在 4.2.2 上。动作条 Sherlock + 谷歌地图 v2

> ID：15164897
> 
> 赞同：1
> 
> 时间：2013-03-01T18:57:09.967
> 
> 标签：android, actionbarsherlock

我把它`Action Sherlock Bar`放在我的应用程序（Android）中，我可以在我的设备*4.2.2*上成功运行，但是当我尝试在我的 Android *4.1.2*上安装时，它崩溃了......

这是堆栈跟踪：

```
03-01 17:42:00.953: E/AndroidRuntime(15780): FATAL EXCEPTION: Timer-0
03-01 17:42:00.953: E/AndroidRuntime(15780): java.lang.IllegalStateException: Not on the main thread
03-01 17:42:00.953: E/AndroidRuntime(15780):    at maps.ap.q.b(Unknown Source)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at maps.au.e.b(Unknown Source)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at maps.z.ag.moveCamera(Unknown Source)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:83)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at android.os.Binder.transact(Binder.java:326)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a.moveCamera(Unknown Source)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at com.google.android.gms.maps.GoogleMap.moveCamera(Unknown Source)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at com.axousis.realweather.MainActivity$2.gotLocation(MainActivity.java:134)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at com.axousis.realweather.util.MyLocation$GetLastLocation.run(MyLocation.java:92)
03-01 17:42:00.953: E/AndroidRuntime(15780):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

编码：

```
public class MainActivity extends MySuperClass{

    private GoogleMap mapa = null;
    private int vista = 0;
    private Button checkButton; 
    private LatLng myCoords;
    private ProgressDialog pleaseWaitDialog;
    private LoadTask loadTask;
    private List<Marcador> marcadores = new ArrayList<Marcador>();
    private Geocoder geocoder;
    private SharedPreferences settings;
    private AutoCompleteTextView editTextAddress;

    private ActionBar actionBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.activity_main);

        actionBar = getSupportActionBar();

        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            BitmapDrawable bg = (BitmapDrawable)getResources().getDrawable(R.drawable.bg_striped);
            bg.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
            getSupportActionBar().setBackgroundDrawable(bg);

            BitmapDrawable bgSplit = (BitmapDrawable)getResources().getDrawable(R.drawable.bg_striped_split_img);
            bgSplit.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
            getSupportActionBar().setSplitBackgroundDrawable(bgSplit);
        }

        // Retrieve the shared preferences
        settings = getSharedPreferences(APP_PREFERENCES, Context.MODE_PRIVATE);

        //Init geocoder google
        geocoder = new Geocoder(this, Locale.getDefault());      

        //Inicializamos la busqueda de la posicion
        LocationResult locationResult = new LocationResult(){
            @Override
            public void gotLocation(Location location){
                //Got the location!
                location.getLongitude();
                location.getLatitude();
                myCoords = new LatLng(location.getLatitude(),location.getLongitude());

                //Move camera
                LatLng userLocation = MAP_INITIAL_LAT_LON;              
                if (myCoords!=null) {
                    userLocation = myCoords;
                }                       
                CameraUpdate posicionInicial = CameraUpdateFactory.newLatLngZoom(userLocation, MAP_INITIAL_ZOOM_LEVEL);
                mapa.moveCamera(posicionInicial);

            }
        };
        MyLocation myLocation = new MyLocation();
        myLocation.getLocation(this, locationResult);

        //Cargamos el mapa
        mapa = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        mapa.setMyLocationEnabled(true);
.... 
```

崩溃出现在

```
mapa.moveCamera(posicionInicial); 
```

我不知道为什么...

我只知道在我的 android *4.2.2*中它可以工作，但在我的 android *4.1.2*中它崩溃了......

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:59:28.680

您正在尝试从主线程中访问 UI 元素。

尝试这个

```
MainActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
               mapa.moveCamera(posicionInicial);
            }
        }); 
```

# search - 在 C 驱动器中搜索所有存在的文件类型

> ID：15164898
> 
> 赞同：0
> 
> 时间：2013-03-01T18:57:12.910
> 
> 标签：search

我是 VB 新手，正在创建一个小项目。我需要能够在`C:\`驱动器中搜索我的搜索字符串的任何实例。

例子。 `.jpg`是要搜索的文件类型。我希望能够`.jp"`在计算机上找到所有内容。不是主文件系统，只是用户文件和文件夹。

我的程序已经创建了我想要将结果复制到的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T11:27:06.447

尝试这个：

```
public IEnumerable<FileInfo> FindFilesInDirectory(string dirPath, string searchName)
{
    return Directory.Exists(dirPath)
               ? Directory.GetFiles(dirPath, "*.jpg", SearchOption.AllDirectories)
                          .ToList()
                          .ConvertAll(x => new FileInfo(x))
                          .Where(x => x.Name.ToLower().Contains(searchName.ToLower()))
               : null;
} 
```

# php - => 运算符在 PHP 的 foreach 循环的参数中做了什么？

> ID：15164902
> 
> 赞同：0
> 
> 时间：2013-03-01T18:57:19.553
> 
> 标签：php, foreach, assignment-operator

另一个明确的 n00b 问题：

在下面的代码片段中（可以正常工作），'=>' 运算符是做什么的？我认为这是用于创建关联数组。这里是这样吗？

任何解释都有帮助。

```
 foreach ($parent as $task_id => $todo)
       {
            echo "<li>$todo";

            if (isset($tasks[$task_id]))
            {
                make_list($tasks[$task_id]);
            }
            echo '</li>';
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:57:44.470

它拆分数组中该元素的键和值。

例子：

```
$fruitColor = array('apple'=>'red', 'banana'=>'yellow');

foreach($fruitColor as $fruit => $color){
  echo $fruit . ' = ' . $color . "<br>\n";
} 
```

输出：

```
apple = red<br>
banana = yellow<br> 
```

# wpf - 使用图像和文本创建 wpf 按钮

> ID：15164907
> 
> 赞同：5
> 
> 时间：2013-03-01T18:57:44.837
> 
> 标签：wpf, xaml, templates, styles

我想创建一个按钮模板，以便在按钮中显示图像和标签。我想在按钮上使用水平堆栈面板。

我没有成功显示标签。

**这是我的模板：**

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonImageEtTexte">
<Button Grid.Column="2" BorderBrush="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="27" >
    <Button.Content>
        <StackPanel Orientation="Horizontal">
            <Border CornerRadius="3">
                <ContentPresenter/>
                <Border.Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Background" Value="#58585a" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource DegradeCouleurTheme}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
            </Border>
            <Label>
                <Label.Content>Fichiers joints</Label.Content>
                <Label.Foreground>white</Label.Foreground>
                <Label.VerticalAlignment>center</Label.VerticalAlignment>
                <Label.HorizontalAlignment>center</Label.HorizontalAlignment>
            </Label>
        </StackPanel>
    </Button.Content>
    <Button.Style>
        <Style TargetType="{x:Type Button}" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}" >
                        <ContentPresenter />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Button.Style>
</Button> 
```

**这是我对这个模板的调用：**

```
<Grid Margin ="10,180,10,14">
            <Button Template="{StaticResource BoutonImageEtTexte}" HorizontalAlignment="Left" Margin="13,0,0,0"> 
                <Image Source="ToolBar_FicJoints.png" />
            </Button>
        </Grid> 
```

**这是另一种使用文本框而不是标签的方法**

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonImageEtTexte">
    <Button Grid.Column="2" BorderBrush="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="27" >
        <Button.Content>
            <StackPanel Orientation="Horizontal">
                <Border CornerRadius="3">
                    <ContentPresenter/>
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="Background" Value="#58585a" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource DegradeCouleurTheme}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                </Border>
                    <TextBlock Text="LabelText" />
                </StackPanel>
        </Button.Content>
        <Button.Style>
            <Style TargetType="{x:Type Button}" >
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}" >
                            <ContentPresenter />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Button.Style>
    </Button>
</ControlTemplate> 
```

我的问题是我只看到我的图像，而不是模板中指定的标签。任何人都可以帮助我吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T21:23:22.053

TextBlock 比标签更适合您的需求。如果您不使用额外的标签功能（例如目标、对象内容），请坚持使用良好的 'ole TextBlock。

如果您想禁用所有按钮样式并且按钮中只有一个图像和标签（注意，这会使鼠标悬停/鼠标按下效果无效，但您可以在触发器中提供逻辑）：

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="SimpleButton">
    <ContentPresenter/>
</ControlTemplate> 
```

用法：

```
<Button Template="{StaticResource SimpleButton}"> 
    <StackPanel Orientation="Horizontal">
        <Image Source="ToolBar_FicJoints.png" />
        <TextBlock Text="LabelText" />
    </StackPanel>
</Button> 
```

如果您只想将 Image/TextBlock 放在普通样式的按钮中，那就更容易了：

```
<Button> 
    <StackPanel Orientation="Horizontal">
        <Image Source="ToolBar_FicJoints.png" />
        <TextBlock Text="Fichiers joints" />
    </StackPanel>
</Button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:58:24.827

使用画布如下。

```
<Button Height="50" Width="150" >
                        <Button.Template>
                            <ControlTemplate>
                                <Canvas>
                                    <Image Source="./Images/Cancel.png"/>
                                    <TextBlock Canvas.Left="22" Canvas.Top="8" Text="Cancel" FontFamily="Arial" FontSize="18"/>
                                </Canvas>
                            </ControlTemplate>
                        </Button.Template>
                     </Button> 
```

您可以根据自己的要求`Canvas.Left`进行调整。`Canvas.Top`我希望这个对您有所帮助，因为它将在图像顶部显示 Textblock。

# java - 为帮助类使用 EJB 接口

> ID：15164913
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:03.237
> 
> 标签：java, interface, ejb

我的同事告诉我，EJB 本身不应该包含任何方法实现，它只能将方法调用委托给一些“帮助”类，即 EJB 方法应该如下所示：

```
public String bsuinessMethod1() {
   return helper.bsuinessMethod1()
}

public void bsuinessMethod2() {
   helper.bsuinessMethod2()
} 
```

像上面这样委托方法的原因是减少耦合代码（例如，当我想重用不在 EJB 上下文中的“帮助器”类的方法时）。他还告诉业务方法不应该对 Java EE 有任何了解。

（如果上面的说法有误，请纠正我，请注意我们不使用 JPA 事务，我们使用另一个框架来处理数据持久性）

所以如果上面的陈述是正确的，我的“帮助”类应该有与 EJB 相同的方法。那么我可以为帮助类重用EJB接口（即让帮助类实现与EJB相同的接口）吗？从建筑的角度来看，这不是很糟糕吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:30:46.760

我不认为

> 将方法调用委托给一些“帮助”类

, 意味着将 ejb 方法保留为仅调用帮助程序类的衬里。将实现委托给辅助类的目的是通过不同类型的服务公开者（ejb、pojo、Web 服务等）使用核心计算。这也有助于轻松地将服务从 ejb 移植到非 ejb。

如果需要，在辅助类中进行计算将有助于以多种方式公开服务。他们都可以使用这些辅助类进行核心计算。

比如说，我们需要一项服务来检索给定城市一天的平均温度。请原谅这个例子看起来不太好，但我希望它表达了这个想法。该服务需要

1.  从数据库中检索当天给定城市的温度列表。（在 DB 中，它们存储为 40 F、5 C 等）。
2.  解析温度以识别测量单位并转换为华氏度。
3.  过滤无效温度（零和包含无效字符的值等）。
4.  计算平均值。

在这种情况下，将项目 2、3 和 4 移至帮助程序类是有意义的。不建议将第 1 项作为助手类的一部分。

现在这个助手类可以被 a) 一个 pojo 服务使用。b) 一个 ejb。c) 网络服务或其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:35:58.593

> 我的同事告诉我，EJB 本身不应该包含任何方法实现，它只能将方法调用委托给一些“帮助”类

我认为你不会从中得到太多好处。为什么不将业务逻辑直接放在 EJB 中？老实说，我没有看到任何缺点。

> 像上面这样委托方法的原因是减少耦合代码（例如，当我想重用不在 EJB 上下文中的“帮助器”类的方法时）

您仍然可以拥有解耦的类并使用您的 EJB，而不仅仅是委派给辅助类。解耦更多地依赖于[程序到接口](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)和使用依赖注入，而不是委托给辅助类。

> 他还告诉业务方法不应该对 Java EE 有任何了解。

如果您使用`@Stateless`（它是 Java EE 的一部分）注释您的业务类 (EJB)，它们将不再与 Java EE 无关。

> 所以如果上面的陈述是正确的，我的“帮助”类应该有与 EJB 相同的方法。那么我可以为帮助类重用EJB接口（即让帮助类实现与EJB相同的接口）吗？从建筑的角度来看，这不是很糟糕吗？

从设计的角度来看，这没有任何意义，并且回到了简单地调用帮助类的虚拟 EJB 的问题上。

# erlang - 如何在erlang中通过uid获取用户名？

> ID：15164914
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:03.567
> 
> 标签：erlang

**[File](http://www.erlang.org/doc/man/file.html)模块**具有 File:file_info() 和 File:read_file_info 等函数，它们返回相对于文件的#file_info[**记录**](http://www.erlang.org/doc/man/file.html#type-file_info)。它包含诸如**uid**和**gid**之类的字段，它们是与操作系统用户 ID 和组 ID 相关的**数字标识符。**

所有文件操作都使用数字 uid 和 gid 值，但最好通过用户名（字符串）来识别它，因为主机上的 uid 可能与另一台主机不同，但用户名可能相同部门惯例（安装政策/等）。

**问题：**是否有适用于大多数操作系统的模块或函数来检索给定 uid 或 gid 的用户名和组名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:15:32.937

选择的`C`功能`getpwuid`适用于符合 POSIX 的操作系统。要获取组名，等效的是`getgrgid`.

Jungerl 曾经有一个`posix_drv` [驱动程序模块](https://github.com/gebi/jungerl/blob/master/lib/posix_drv/README)，可以同时提供这两种功能。但它已经很老了，并且无法在 R15 中影响驱动程序 API 的更改中幸存下来。

另一种选择可能是：[https](https://github.com/sergey-miryanov/erlang-pwd) ://github.com/sergey-miryanov/erlang-pwd - 给你一个`get_by_uid`（调用`getpwuid`）但没有等效于`getgrgid`.

# hibernate - 如何在没有服务构建器的情况下在 Liferay 事务中创建服务方法

> ID：15164915
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:04.457
> 
> 标签：hibernate, liferay, liferay-6, spring-transactions, transactional

我有一个名为 NotificationService 的实用程序服务。它遵循 MailService 的思路，服务层具有 NotificationService 接口（定义服务）和 NotificationServiceUtil 类（静态提供服务），并且我有一个提供 NotificationServiceImpl（实现）的 impl 层。然后我在 ext-spring.xml 中注册了服务：

```
 <bean id="org.mitre.asias.portal.notification.service.NotificationService"
    class="org.mitre.asias.portal.notification.service.impl.NotificationServiceImpl">
    ...
  </bean>
  <bean id="org.mitre.asias.portal.notification.service.NotificationServiceUtil"
    class="org.mitre.asias.portal.notification.service.NotificationServiceUtil">
    <property name="service"
      ref="org.mitre.asias.portal.notification.service.NotificationService" />
  </bean> 
```

一切都按预期进行，直到我尝试将交易混入其中。我在 NotificationServiceImpl 中有一个需要事务性的方法：

```
public void sendAndUpdate( Message message, List<Event> eventsToUpdate ) throws SystemException, MessagingException {
    for ( Event event : eventsToUpdate ) {
        eventLocalService.updateEvent( event );
    }
    Transport.send( message );
} 
```

这个想法是，如果由于某种原因消息发送失败，对模型对象的更改将被回滚，因此我可以稍后重试发送。我尝试使用以下方法注释此方法：

```
@Transactional( isolation = Isolation.PORTAL,
        rollbackFor = { PortalException.class, SystemException.class, MessagingException.class } ) 
```

但它没有采取。我尝试将该注释移动到 NotificationService 接口，但仍然没有骰子。我启用了调试日志记录，`org.hibernate.transaction.JDBCTransaction`并且可以看到对该方法的调用从未启动事务，但是为`updateEvent`循环中的每个调用启动并提交了一个事务。

深入研究源代码，Liferay 似乎有一个名为的 bean 后处理器`ServiceBeanAutoProxyCreator`，其中包含以下代码：

```
...
protected Object[] getAdvicesAndAdvisorsForBean(
        Class<?> beanClass, String beanName, TargetSource targetSource)
    throws BeansException {

    if (beanName.endsWith(_SERVICE_SUFFIX)) {
        return PROXY_WITHOUT_ADDITIONAL_INTERCEPTORS;
    }
    else {
        return DO_NOT_PROXY;
    }
}

private static final String _SERVICE_SUFFIX = "Service";
... 
```

这使它看起来好像每个名称以 Service 结尾的 bean（就像我的 bean 所做的那样：）都`...id="org.mitre.asias.portal.notification.service.NotificationService"...`应该包装在`ServiceBeanAopProxy`根据生成的服务构建器添加事务建议的bean 中`base-spring.xml`：

```
<bean class="com.liferay.portal.spring.aop.ServiceBeanAutoProxyCreator">
    <property name="methodInterceptor" ref="serviceAdvice" />
</bean>
<bean class="com.liferay.portal.spring.context.PortletBeanFactoryCleaner" />
<bean class="com.liferay.portal.spring.context.PortletBeanFactoryPostProcessor" />
<bean class="com.liferay.portal.spring.bean.BeanReferenceAnnotationBeanPostProcessor" />
<bean id="portletClassLoader" class="com.liferay.portal.kernel.portlet.PortletClassLoaderUtil" factory-method="getClassLoader" />
<bean id="servletContextName" class="com.liferay.portal.kernel.portlet.PortletClassLoaderUtil" factory-method="getServletContextName" />
<bean id="basePersistence" abstract="true">
    <property name="dataSource" ref="liferayDataSource" />
    <property name="sessionFactory" ref="liferaySessionFactory" />
</bean>
<bean id="serviceAdvice" class="com.liferay.portal.monitoring.statistics.service.ServiceMonitorAdvice">
    <property name="monitoringDestinationName" value="liferay/monitoring" />
    <property name="nextMethodInterceptor" ref="asyncAdvice" />
</bean>
<bean id="asyncAdvice" class="com.liferay.portal.messaging.async.AsyncAdvice">
    <property name="defaultDestinationName" value="liferay/async_service" />
    <property name="nextMethodInterceptor" ref="threadLocalCacheAdvice" />
</bean>
<bean id="threadLocalCacheAdvice" class="com.liferay.portal.cache.ThreadLocalCacheAdvice">
    <property name="nextMethodInterceptor" ref="transactionAdvice" />
</bean>
<bean id="transactionAdvice" class="com.liferay.portal.spring.transaction.TransactionInterceptor">
    <property name="transactionAttributeSource" ref="transactionAttributeSource" />
    <property name="transactionManager" ref="liferayTransactionManager" />
</bean>
<bean id="transactionAttributeSource" class="com.liferay.portal.spring.transaction.AnnotationTransactionAttributeSource" /> 
```

有谁知道我怎么能做到这一点？

我在 tomcat 6.0.32 容器中使用 Liferay 6.0 EE sp2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:42:28.887

Try to move the @transactional annotation on to the interface (not on the method of the interface)

Liferay wraps transactions over beans which names end with Service (depends on the bean name not the class name).

Also the problem could be in placement of the code. Where do you define your bean? I suppose in extplugin? If you liked to extend Liferay transaction in your own portlet without service builder, it can get tricky. However it should be possible to share Liferay spring context in 6.1\.

# javascript - Javascript 定义对象，逗号大小写

> ID：15164916
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:04.907
> 
> 标签：javascript, object

当我在 Javascript 中尝试一些fundemantels时，我遇到了一个问题，这让我很惊讶，但我找不到答案。我得到了以下内容，效果很好：

```
var obj= new Object ();
    obj.test = "Hello" 

    obj.testTwo= function (){
        console.log(this.test)
    },obj.testTwo(); 
```

当我在没有逗号的情况下尝试它时，它不起作用。

```
var obj= new Object ();
    obj.test = "Hello" 

    obj.testTwo= function (){
        console.log(this.test)
    }obj.testTwo(); 
```

所以我尝试了这个作为第三种选择......它有效吗？

```
var obj= new Object ();
    obj.test = "Hello" 

    obj.testTwo= function (){
        console.log(this.test)
    }
    obj.testTwo(); 
```

现在我很困惑。为什么要使用逗号，为什么要使用逗号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T19:00:50.160

您所看到的是逗号运算符的作用。[https://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/](https://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:13:06.467

在第一个片段中，逗号运算符按照文档中的说明履行职责： " `evaluates both of its operands (from left to right) and returns the value of the second operand.`" [^(MDN)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)。

基本上你的第二个片段是一个作业。赋值应始终以分号结束，即使它们的最后一个表达式是一个语句块。[但是，这对ASI](http://es5.github.com/#x7.9)来说并不明显。因此，这个片段在块和对象方法调用之间没有分号或换行符就失败了，解释器希望看到一个运算符或赋值的终止。如果没有找到这些，`Unexpected token`则会引发错误。同样的解释代表了为什么第三个片段有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T19:06:22.523

换行符 ( `\n`or `\r\n`) 和逗号 ( `,`) 充当语句分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:59:54.843

逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

因此，它会评估您的两个代码。但是当你把它们放在一起时它不会。

阅读[更多](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)...

例子：

这和你做的时候一样

```
var a = 10, b = 40; 
```

# c# - 如何在 .aspx 页面上显示用户控件源代码？

> ID：15164918
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:10.307
> 
> 标签：c#, asp.net, ascx

我正在尝试构建一个 aspx 页面，该页面显示用户控件以及用户控件背后的代码和代码。有没有办法从用户控制页面获取代码并显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:09:05.720

谷歌的乐趣：

`<pre>`
`<![CDATA[`

对于您的 .aspx 页面中的任何内容。

至于单独的代码隐藏页面，您必须复制该代码并将其放入 yoru aspx 页面中的 html 标记中。

要查看的另一件事是`.renderhtml`某些对象具有的方法（gridviews 等）。

**编辑**
您可以使用一个 VS Power Tools 扩展（向下滚动到“HTML COPY”：http: [//visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)，如果您这样做可能会很好用使用 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:38:33.767

您可以做的是创建一个处理程序来读取 .ASCX、.ASPX 或 C# 页面并显示内容。查看 MSDN 上关于[使用 HTTP 处理程序提供动态内容的这篇文章](http://msdn.microsoft.com/en-us/library/ms972953.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:14:35.777

你可以这样做：

```
FileInfo myControl = new FileInfo(Server.MapPath(@"~\test.aspx.cs"));
StreamReader myControlSource = myControl.OpenText();
string myControlSourceHtml = Server.HtmlEncode(myControlSource.ReadToEnd()); 
```

把它放在一个方法中，然后你可以将它指向任何文件以获取 HTML 格式的源代码，然后使用 CSS 来设置你认为合适的样式。

# apache - htaccess 重定向到子文件夹

> ID：15164921
> 
> 赞同：0
> 
> 时间：2013-03-01T18:58:19.650
> 
> 标签：apache, .htaccess, redirect, subdirectory

我有一个网站，我想将默认请求重定向到`subdir/index.php`其他`subdir/$1`人。我找到了一些有效的 htaccess 示例（如下所示）

```
RewriteRule ^(.*)$ subdir/$1 [L] 
```

但如果我不输入文件名，它就不起作用。所以如果我去`mydev.com`它会给出一个错误。如果我去`mydev.com/somefile.php`然后它工作。我该如何设置它，以便如果没有给出文件，它的默认值`subdir/index.php`与上述相同？

*编辑* 如果我的网站位于 mydev.com/ 或 mydev.com/somedir，我希望它能够工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:32:45.260

如果使用默认值，您的意思是仅域而其他域是其他一切，您可以只使用这两个规则

```
RewriteEngine On

RewriteBase /

RewriteRule ^/?$ subdir/index.php [R,L]

RewriteCond %{REQUEST_URI} !^/subdir/index\.php$
RewriteRule .+ subdir/$0 [R,L] 
```

如果您只想重写而不是重定向，请省略`R`.

# android - 传入TextView的Android测试AsyncTask

> ID：15164932
> 
> 赞同：1
> 
> 时间：2013-03-01T18:59:02.583
> 
> 标签：android, android-asynctask, mocking, android-testing

我有一个要为其编写测试的 AsyncTask。它有一个传入的 TextView：

```
public LoadAssetTask(TextView target, boolean skipSingleLineBreak, InputStream in) { ...} 
```

我该如何为此编写一个 Adroid JUnit 测试？有没有办法使用模拟对象来模拟带有文本字段的活动，我不想创建一个完整的活动或使用一个已经存在的活动，因为我只想测试这个类。我尝试使用模拟活动，但您必须将其添加到清单中，我不想为我拥有的每一个 AsyncTask 都这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:11:05.340

您是否尝试过使用 android.test.ActivityInstrumentationTestCase2？此类为另一个 Activity 中的方法运行 JUnit 测试。事实上，这是针对 Activity 中的方法（或 Activity 包含的类中的方法）运行 JUnit 测试的*唯一方法。*AsyncTask 必须在 Android 上下文中运行（因为它使用 Android 线程 API），但我假设 ActivityInstrumentationTestCase2 可以与进程中的任何线程通信。

ActivitInstrumentationTestCase2 的文档位于[http://developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)

# android - 我有一个用 scala 编写的 android 项目 - 我如何在 eclipse 中打开和使用这个项目？

> ID：15164936
> 
> 赞同：0
> 
> 时间：2013-03-01T18:59:30.480
> 
> 标签：android, eclipse, scala, eclipse-plugin

我有一个用 scala 编写的 android 项目。如何在 Eclipse 中打开和使用这个项目？我需要哪些插件？我需要哪个 scala 编译器？我只想为项目构建一个签名的apk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:03:04.810

与这些家伙一起检查。网站上提供的 Powerpoint 和视频链接。

[http://www.swiftkey.net/en/blog/test-driven-development-on-android-using-native-scala-mocking-and-dependency-injection/](http://www.swiftkey.net/en/blog/test-driven-development-on-android-using-native-scala-mocking-and-dependency-injection/)

使用 Ant 或 SBT 编译：- (SBT 插件链接) [https://github.com/jberkel/android-plugin](https://github.com/jberkel/android-plugin)

更多链接：- [http://days2011.scala-lang.org/node/138/291](http://days2011.scala-lang.org/node/138/291)

另请阅读有关 Scala v-2.9 的一些问题：- [https://groups.google.com/forum/?fromgroups#!topic/scala-debate/El3QZEbIwHg](https://groups.google.com/forum/?fromgroups#!topic/scala-debate/El3QZEbIwHg)

杂项：- 您也可以尝试这种方法 - 在您的设备上安装 Ubuntu（如此处所述：- [http://androlinux.com/android-ubuntu-development/how-to-install-ubuntu-on-android/](http://androlinux.com/android-ubuntu-development/how-to-install-ubuntu-on-android/)）。这不会影响 Android 安装。

启动 Ubuntu，安装 JDK、Scala 等，复制你的 Scala jar 并从那里运行。

# clojure - 是否有 if-clojurescript 宏？

> ID：15164939
> 
> 赞同：5
> 
> 时间：2013-03-01T18:59:48.820
> 
> 标签：clojure, macros, clojurescript, reader-macro

是否有 Clojure 和 ClojureScript 的宏允许您根据文件是在 Clojure 还是 Clojurescript 中编译来插入不同的表达式？

```
(if-clojurescript
   (my clojurescript definition)
   (my clojure definition)) 
```

本质上，我正在寻找类似于`#ifdef SOME_PLATFORM`您可能会看到散布在 C/C++ 代码周围的宏之类的东西。我认为它对于我想成为交叉部分的文件可能很有用，但该文件的一小部分在 Clojure/ClojureScript 之间不兼容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-26T22:32:35.413

这是 Clojure 1.7 的一个新特性：[阅读器条件](http://dev.clojure.org/display/design/Reader+Conditionals)。

另请参阅[Daniel Compton 博客](http://danielcompton.net/2015/06/10/clojure-reader-conditionals-by-example)，例如：

```
#?(:clj  (Clojure expression)
   :cljs (ClojureScript expression)
   :clr  (Clojure CLR expression)) 
```

您可能还想看看[macrovitch](https://github.com/cgrand/macrovich)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T19:09:29.140

你可以检查`*clojure-version*`

```
user> (if *clojure-version* "I'm Clojure" "I'm ClojureScript")
"I'm Clojure" 

cljs.user> (if *clojure-version* "I'm Clojure" "I'm ClojureScript")
"I'm ClojureScript" 
```

这在您无法将语言中性位拆分到它们自己的文件中（这是可取的）的情况下可能很有用。我个人的观点倾向于避免使用太多这样的东西。

```
 (defmacro if-clojurescript [clj-form cljs-form]
    (if *clojure-version* clj-form cljs-form)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T10:56:07.827

不是真正的宏，而是 Leiningen 插件，它根据放置在源中的元数据注释生成 Clojure 或 ClojureScript 代码：[cljx](https://github.com/lynaghk/cljx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T20:44:36.400

有一些停滞不前的工作称为[特征表达式](http://dev.clojure.org/display/design/Feature+Expressions)，以实现在同一代码库中支持不同 Clojure 变体的通用机制。

# javascript - 停止嵌入 youtube iframe？

> ID：15164942
> 
> 赞同：62
> 
> 时间：2013-03-01T19:00:00.917
> 
> 标签：javascript, html, iframe, youtube-api

我正在使用 YouTube iframe 在我的网站上嵌入视频。

```
<iframe width="100%" height="443" class="yvideo" id="p1QgNF6J1h0"
              src="http://www.youtube.com/embed/p1QgNF6J1h0?rel=0&controls=0&hd=1&showinfo=0&enablejsapi=1"
              frameborder="0" allowfullscreen>
</iframe> 
```

我在同一页面上有多个视频。

我想通过单击使用 javascript 左右的按钮来停止所有这些或其中一个。

可能吗？

## 更新：

我尝试了**Talvi Watia**所说并使用的内容：

```
$('#myStopClickButton').click(function(){
  $('.yvideo').each(function(){
    $(this).stopVideo();
  });
}); 
```

我越来越：

```
Uncaught TypeError: Object [object Object] has no method 'stopVideo' 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2015-05-20T18:47:53.073

不幸的是，这些 API 发展得非常快。截至 2015 年 5 月，建议的解决方案不再有效，因为播放器对象没有`stopVideo`方法。

[在此页面 ( 1](http://9bugs.in/pause-youtube-video-within-iframe-using-external-button-click-in-javascript-or-jquery-268) )中可以找到一个可靠的解决方案，它适用于：

```
<iframe id="youtube_player" class="yt_player_iframe" width="640" height="360" src="http://www.youtube.com/embed/aHUBlv5_K8Y?enablejsapi=1&version=3&playerapiid=ytplayer"  allowfullscreen="true" allowscriptaccess="always" frameborder="0"></iframe> 
```

以及以下 JS/jQuery 代码：

```
$('.yt_player_iframe').each(function(){
  this.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*')
}); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-03-30T15:20:46.510

如果有人仍在寻找答案，我已经这样解决了：

```
$("#photos").on("hide",function(){
    var leg=$('.videoPlayer').attr("src");
    $('.videoPlayer').attr("src",leg);
}); 
```

其中 #photos 是模态框的 ID，.videoPlayer 是 iframe 的类。基本上它会刷新 src 属性（并停止播放视频）。所以，

```
 $('#myStopClickButton').click(function(){
      $('.yvideo').each(function(){
        var el_src = $(this).attr("src");
        $(this).attr("src",el_src);
      });
    }); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-01T19:15:29.643

您可能需要查看[Youtube JavaScript API](https://developers.google.com/youtube/js_api_reference)参考文档。

当您在页面上嵌入视频时，您需要传递此参数：

```
http://www.youtube.com/v/VIDEO_ID?version=3&enablejsapi=1 
```

如果您想要停止所有视频按钮，您可以设置一个 javascript 例程来循环播放视频并停止它们：

```
player.stopVideo() 
```

这确实涉及跟踪页面上每个视频的所有页面 ID。更简单的可能是创建一个类，然后使用 jQuery.each。

```
$('#myStopClickButton').click(function(){
  $('.myVideoClass').each(function(){
    $(this).stopVideo();
  });
}); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-07-18T16:39:12.457

这是一个[codepen](https://codepen.io/anon/pen/GBjqQr)，它对我有用。

我正在寻找将 YT 视频嵌入 iframe 的最简单解决方案，我觉得就是这样。

我需要的是让视频出现在模式窗口中并在关闭时*停止*播放

这是代码：（来自：[https](https://codepen.io/anon/pen/GBjqQr) ://codepen.io/anon/pen/GBjqQr ）

```
 <div><a href="#" class="play-video">Play Video</a></div>
    <div><a href="#" class="stop-video">Stop Video</a></div>
    <div><a href="#" class="pause-video">Pause Video</a></div>

    <iframe class="youtube-video" width="560" height="315" src="https://www.youtube.com/embed/glEiPXAYE-U?enablejsapi=1&version=3&playerapiid=ytplayer" frameborder="0" allowfullscreen></iframe>

$('a.play-video').click(function(){
    $('.youtube-video')[0].contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
});

$('a.stop-video').click(function(){
    $('.youtube-video')[0].contentWindow.postMessage('{"event":"command","func":"' + 'stopVideo' + '","args":""}', '*');
});

$('a.pause-video').click(function(){
    $('.youtube-video')[0].contentWindow.postMessage('{"event":"command","func":"' + 'pauseVideo' + '","args":""}', '*');
}); 
```

此外，*如果*您希望它在尚不可见的 DOM 对象（例如模态窗口）中*自动播放*，如果我使用相同的按钮来播放用于显示模态的视频，它将无法正常工作，所以我使用了这个：

```
https://www.youtube.com/embed/EzAGZCPSOfg?autoplay=1&enablejsapi=1&version=3&playerapiid=ytplayer 
```

注意：`?autoplay=1&`它的放置位置以及在下一个属性之前使用“&”以允许暂停继续工作。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-04-21T23:42:44.307

API 很混乱，因为它们不断变化。这种纯javascript方式对我有用：

```
 <div id="divScope" class="boom-lightbox" style="display: none;">
    <iframe id="ytplayer" width="720" height="405"   src="https://www.youtube.com/embed/M7lc1UVf-VE" frameborder="0" allowfullscreen>    </iframe>
  </div>  

//if I want i can set scope to a specific region
var myScope = document.getElementById('divScope');      
//otherwise set scope as the entire document
//var myScope = document;

//if there is an iframe inside maybe embedded multimedia video/audio, we should reload so it stops playing
var iframes = myScope.getElementsByTagName("iframe");
if (iframes != null) {
    for (var i = 0; i < iframes.length; i++) {
        iframes[i].src = iframes[i].src; //causes a reload so it stops playing, music, video, etc.
    }
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-03-23T20:53:04.413

Talvi 的回答可能仍然有效，但 Youtube Javascript API 已被标记为已弃用。您现在应该使用更新的[Youtube IFrame API](https://developers.google.com/youtube/iframe_api_reference)。

该文档提供了几种完成视频嵌入的方法，但为了您的目标，您将包括以下内容：

```
//load the IFrame Player API code asynchronously
var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

//will be youtube player references once API is loaded
var players = [];

//gets called once the player API has loaded
function onYouTubeIframeAPIReady() {
    $('.myiframeclass').each(function() {
        var frame = $(this);

        //create each instance using the individual iframe id
        var player = new YT.Player(frame.attr('id'));

        players.push(player);
    });
}

//global stop button click handler
$('#mybutton').click(function(){

    //loop through each Youtube player instance and call stopVideo()
    for (var i in players) {
        var player = players[i];
        player.stopVideo();
    }
}); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-09-13T10:35:43.517

不能简单地高估这篇文章并回答 thx OP 和 helpers。我的解决方案只有 video_id 交换：

```
<div style="pointer-events: none;">
    <iframe id="myVideo" src="https://www.youtube.com/embed/video_id?rel=0&modestbranding=1&fs=0&controls=0&autoplay=1&showinfo=0&version=3&enablejsapi=1" width="560" height="315" frameborder="0"></iframe> </div>

    <button id="play">PLAY</button>

    <button id="pause">PAUSE</button>

    <script>
        $('#play').click(function() {
            $('#myVideo').each(function(){ 
                var frame = document.getElementById("myVideo");
                frame.contentWindow.postMessage(
                    '{"event":"command","func":"playVideo","args":""}', 
                    '*'); 
            });
        });

        $('#pause').click(function() {
            $('#myVideo').each(function(){ 
                var frame = document.getElementById("myVideo");
                frame.contentWindow.postMessage(
                  '{"event":"command","func":"pauseVideo","args":""}',
                  '*'); 
            });
        });
    </script> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-18T15:52:23.523

最简单的方法是

```
var frame = document.getElementById("iframeid");
frame.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*'); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-11-20T11:59:38.443

对于内部带有视频的 Twitter Bootstrap 模式/弹出窗口，这对我有用：

```
$('.modal.stop-video-on-close').on('hidden.bs.modal', function(e) {
  $('.video-to-stop', this).each(function() {
    this.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<div id="vid" class="modal stop-video-on-close"
  tabindex="-1" role="dialog" aria-labelledby="Title">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Title</h4>
      </div>
      <div class="modal-body">
       <iframe class="video-to-stop center-block"
        src="https://www.youtube.com/embed/3q4LzDPK6ps?enablejsapi=1&rel=0"
        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
        frameborder="0" allowfullscreen>
       </iframe>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger waves-effect waves-light"
          data-dismiss="modal" type="button">Close</button>
      </div>
    </div>
  </div>
</div>

<button class="btn btn-success" data-toggle="modal"
 data-target="#vid" type="button">Open video modal</button>
```

根据[Marco 的回答](https://stackoverflow.com/a/30358006/6225838)，请注意我只需要将`enablejsapi=1`参数添加到视频 URL（`rel=0`只是为了不显示最后的相关视频）。JS`postMessage`函数完成了所有繁重的工作，它实际上停止了视频。

由于请求权限，该片段可能不会显示视频，但在常规浏览器中，这应该可以在 2018 年 11 月开始使用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-10-10T11:44:47.060

这是一个纯javascript解决方案，

```
<iframe 
width="100%" 
height="443" 
class="yvideo" 
id="p1QgNF6J1h0"
src="http://www.youtube.com/embed/p1QgNF6J1h0?rel=0&controls=0&hd=1&showinfo=0&enablejsapi=1"
frameborder="0" 
allowfullscreen>
</iframe>
<button id="myStopClickButton">Stop</button>

<script>
document.getElementById("myStopClickButton").addEventListener("click",    function(evt){
var video = document.getElementsByClassName("yvideo");
for (var i=0; i<video.length; i++) {
   video.item(i).contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}', '*');
}

}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-09-04T04:52:25.340

当我们在模态弹出窗口中使用嵌入视频时，我们如何暂停/停止 YouTube iframe

```
 $('#close_one').click(function (e) {

         let link = document.querySelector('.divclass');// get iframe class 
         let link = document.querySelector('#divid');// get iframe id
         let video_src = link.getAttribute('src');

         $('.youtube-video').children('iframe').attr('src', ''); // set iframe parent div value null 
         $('.youtube-video').children('iframe').attr('src', video_src);// set iframe src again it works perfect

     }); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-15T12:41:09.457

```
$('#aboutVideo .close').on('click',function(){
			var reSrc = $('.aboutPlayer').attr("src");
			$('.aboutPlayer').attr("src",reSrc)
		})
```

```
#aboutVideo{
	width: 100%;
	height: 100%;
}
#aboutVideo .modal-dialog, #aboutVideo .modal-dialog .modal-content, #aboutVideo .modal-dialog .modal-content .modal-body{
	width: 100%;
	height: 100%;
	margin: 0 !important;
	padding: 0 !important;
}
#aboutVideo .modal-header{
	padding: 0px; 
	border-bottom: 0px solid #e5e5e5; 
	position: absolute;
	right: 4%;
	top: 4%;
}
#aboutVideo .modal-header .close{
	opacity: 1;
	position: absolute;
	z-index: 99;
	color: #fff;
}
#aboutVideo .modal-header button.close{
      border-radius: 50%;
    width: 7vw;
    height: 7vw;
    position: absolute;
    right: 4%;
    top: 7%;
    background: aliceblue;
}
#aboutVideo .modal-header button.close:hover{
	background-color: rgba(255, 255, 255, 0.28);
}
#aboutVideo .modal-header button.close img{
	width: 20px;
	margin-top: -0.2vw;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<li class="see-video fa" type="button" data-toggle="modal" data-target="#aboutVideo">
			<label>SEE VIDEO</label>
		</li>
<div class="modal fade" id="aboutVideo" tabindex="-1" role="dialog" aria-labelledby="aboutVideoLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><img src="http://www.freeiconspng.com/uploads/white-close-button-png-16.png"></span></button>
				</div>
				<div class="modal-body">
				<iframe class="aboutPlayer" width="100%" height="100%" src="https://www.youtube.com/embed/fju9ii8YsGs?autoplay=0&showinfo=0&controls=2&rel=0" frameborder="0" allowfullscreen poster="https://www.google.co.in/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&cad=rja&uact=8&ved=0ahUKEwiOvaagmqfWAhUHMY8KHUuJCnkQjRwIBw&url=http%3A%2F%2Fnodeframework.com%2F&psig=AFQjCNEaHveDtZ81veNPSvQDx4IqaE_Tzw&ust=1505565378467268"></iframe>
				</div>
			</div>
		</div>
	</div>
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-02-01T05:14:33.840

另请参阅[当您离开选项卡视图或最小化 Ionic 应用程序时如何暂停或停止 iframe youtube 视频](https://stackoverflow.com/questions/30594641/how-to-pause-or-stop-an-iframe-youtube-video-when-you-leave-a-tab-view-or-minimi)

```
$scope.stopVideo = function() {
 var iframe = document.getElementsByTagName("iframe")[0].contentWindow;
 iframe.postMessage('{"event":"command","func":"'+'stopVideo'+   '","args":""}', '*');
 } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2022-01-12T11:03:05.200

这是我使用更新的 youtube API 的解决方案。包括开始、停止、暂停。

[https://codesandbox.io/s/youtube-video-player-73x4b](https://codesandbox.io/s/youtube-video-player-73x4b)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-02-20T11:21:43.780

```
var vid_element = $('.youtube-player');
vid_element.detach();
$('#parent').append(vid_element); 
```

我发现分离然后附加元素比重新分配 src 属性更可靠。

# asp.net-mvc - 使用 IIS 7.5 进行表单身份验证 - 未授权

> ID：15164943
> 
> 赞同：0
> 
> 时间：2013-03-01T19:00:03.770
> 
> 标签：asp.net-mvc, iis-7, forms-authentication

我有一个使用 IIS 7.5 部署到 Windows Server 2008 R2 的 Web 应用程序。该应用程序是带有 .Net Framework 4.0 的 ASP.NET MVC 3。

身份验证设置：启用匿名和表单身份验证。我已将匿名属性下的匿名用户身份值设置为指向“应用程序池身份”而不是特定用户。

网络配置

尝试从我的机​​器远程访问应用程序时，我收到消息“401 - 未经授权：由于凭据无效，访问被拒绝”。访问“帐户/登录”页面时。

我通过 Visual Studio 访问本地计算机上的应用程序没有问题。我还可以毫无问题地访问 Windows 2008 Server 上的应用程序。只有当我尝试从本地计算机访问服务器上的应用程序时，我才会遇到问题。

有任何想法吗？

一些额外的注意事项： - 在我进入登录屏幕之前它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:20:51.300

*我已将匿名属性下的匿名用户身份值设置为指向“应用程序池身份”而不是特定用户。*
尝试将其设置回原始文件`IUSR`并确保`IUSR_YourComputerName`用户可以访问站点的文件/文件夹

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-10T12:34:55.610

[http://social.technet.microsoft.com/Forums/windowsserver/en-US/c9239a89-fbee-4adc-b72f-7a6a9648331f/401-unauthorized-access-is-denied-due-to-invalid-credentials](http://social.technet.microsoft.com/Forums/windowsserver/en-US/c9239a89-fbee-4adc-b72f-7a6a9648331f/401-unauthorized-access-is-denied-due-to-invalid-credentials)

引用那篇文章：

> IIS 7 很难弄清楚为什么我得到 401 - 未经授权：由于凭据无效，访问被拒绝......直到我这样做......
> 
> 1.）打开iis并选择导致401的网站
> 
> 2.) 打开“IIS”标题下的“Authentication”属性
> 
> 3.) 点击“Windows Authentication”项，然后点击“Providers”
> 
> 4.) 对我来说，问题在于协商高于 NTLM。我假设在幕后进行了某种握手，但我从未真正通过身份验证。我把 NTLM 移到了最上面的位置，然后 BAM 修复了它。

# php - 使用复选框的html表单查询

> ID：15164945
> 
> 赞同：0
> 
> 时间：2013-03-01T19:00:07.947
> 
> 标签：php, mysql, phpmyadmin

我正在 phpmysql 中开发一个癌症风险评估工具。用户将需要从包含复选框的 html 表单中选择风险和症状，然后将根据存储在数据库中的内容检查这些选择。这是表格。 ![评估癌症风险的html表格](../Images/9984f6e2670578d637c072dcd1991641.png)

这是存储在 mysql 数据库中的数据的屏幕截图，将检查提交的复选框。

食管癌_风险因素_tbl ![风险因素](../Images/6b1e79c4e052718624ddf3aa650de0e2.png)

esophageal_carcinoma_symptoms_tbl ![症状](../Images/9c2c4fab97a24af8fb6673e627095059.png)

食管癌_风险因素_tbl ![响应：包含用户在提交带有复选框的 html 表单后应该得到的响应的表](../Images/16afc7ef6f1a89883e7df73bb00d3b91.png)

万一有人在这里检查了html

![在此处输入图像描述](../Images/44c071612814d3cbc0ffd2e69daccc8b.png)

查询要获取的响应应该来自响应表中的 responseID = 1。

我的链接外键的表应该如何以及查询数据库的 PHP 代码应该如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:37:32.757

尼克，当你说你需要一个“关系”表时，你的评论是正确的。我建议使用自己的主键和作为外键的 3 个附加列创建一个表。例如：

```
|id|risk_id|symptom_id|response_id|
___________________________________
| 1|    2  |   3      |     4     | 
```

并且对于良好的度量索引外键列。

# ruby - 如何根据 Ruby 版本限制特定 Ruby 模块的加载

> ID：15164948
> 
> 赞同：0
> 
> 时间：2013-03-01T19:00:29.200
> 
> 标签：ruby, enumerable, ruby-2.0

Ruby 2.0 中已包含对枚举的惰性求值： [http ://railsware.com/blog/2012/03/13/ruby-2-0-enumerablelazy/](http://railsware.com/blog/2012/03/13/ruby-2-0-enumerablelazy/)

我想`.lazy`在我正在编写的应用程序中包含这个符号 ( )，但适用于运行任何 Ruby 版本的人。但是，如果那个人正在运行 Ruby 2.0，我希望让本机实现接管。

这是我可能用作模板的项目： [https ://github.com/yhara/enumerable-lazy/blob/master/lib/enumerable/lazy.rb](https://github.com/yhara/enumerable-lazy/blob/master/lib/enumerable/lazy.rb)

如果 Ruby 的活动版本 < 2.0，我将如何仅加载此模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:03:46.703

请注意，yhara 的版本已过时。你应该使用我的[`backports`](https://github.com/marcandre/backports)宝石中的那个。它通过了 MRI 的测试`lazy`：

```
require 'backports/2.0.0/enumerable/lazy'
(1..42).lazy... # => works in all Rubies 
```

只需使用一个条件`Enumerable.method_defined?(:lazy)`，例如知道您是否应该定义它（就像我在 中所做的那样`backports`）

# oauth - Google+ 无法插入时刻

> ID：15164949
> 
> 赞同：5
> 
> 时间：2013-03-01T19:00:30.337
> 
> 标签：oauth, google-plus

尝试使用 g+ 文档中的[示例](https://developers.google.com/+/api/latest/moments/insert#examples)`Authorize requests using OAuth 2.0: ON`。结果得到`Unauthorized`了。这是输出：

```
Request

POST https://www.googleapis.com/plus/v1/people/me/moments/vault?debug=true&key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer *my_token*
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "target": {
  "url": "https://developers.google.com/+/web/snippet/examples/thing"
 },
 "type": "http://schemas.google.com/AddActivity"
}

Response

401 Unauthorized

cache-control:  private, max-age=0
content-encoding:  gzip
content-length:  93
content-type:  application/json; charset=UTF-8
date:  Fri, 01 Mar 2013 18:56:34 GMT
expires:  Fri, 01 Mar 2013 18:56:34 GMT
server:  GSE
www-authenticate:  AuthSub realm="https://www.google.com/accounts/AuthSubRequest" allowed-scopes="https://www.googleapis.com/auth/plus.login,https://www.google.com/accounts/OAuthLogin"

{
 "error": {
  "errors": [
   {
    "message": "Unauthorized"
   }
  ],
  "code": 401,
  "message": "Unauthorized"
 }
} 
```

试图撤销 google api explorer 权限并再次进行身份验证。没有改变。我做错了什么还是 g+ api 还没有准备好用于生产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:23:17.017

在我看来，API 资源管理器目前无法将应用程序活动写入 Google，因为它没有将 requestvisibleactions 字段传递给 OAUTH2 流。正如我将在下面描述的那样，您仍然可以手动执行操作。

您需要做两件事：

首先，确保您使用为您插入的应用活动类型设置的 requestvisibleactions 呈现登录按钮。以下示例显示了如何使用添加活动呈现登录：

```
<div id="gConnect">
  <button class="g-signin"
      data-scope="https://www.googleapis.com/auth/plus.login"
      data-requestvisibleactions="http://schemas.google.com/AddActivity"
      data-clientId="YOUR_CLIENT_ID"
      data-callback="onSignInCallback"
      data-theme="dark"
      data-cookiepolicy="single_host_origin">
  </button>
</div> 
```

接下来，您将需要构建和编写应用程序活动。以下示例使用 JavaScript 显示了这一点：

```
 var payload = {
    "target": {
      "id" : "replacewithuniqueidforaddtarget",
      "image" : "http:\/\/www.google.com\/s2\/static\/images\/GoogleyEyes.png",
      "type" : "http:\/\/schema.org\/CreativeWork",
      "description" : "The description for the activity",
      "name":"An example of AddActivity"
    },
    "type":"http:\/\/schemas.google.com\/AddActivity",
    "startDate": "2012-10-31T23:59:59.999Z"
  };
  var args = {
    'path': '/plus/v1/people/me/moments/vault',
    'method': 'POST',
    'body': JSON.stringify(payload),
    'callback': function(response) {
       console.log(response);
     }
  };

  gapi.client.request(args); 
```

你可以在这里看到一个现场演示：

[http://wheresgus.com/appactivitiesdemo](http://wheresgus.com/appactivitiesdemo)

您可以从此处的文档中了解所有活动类型：

[https://developers.google.com/+/api/moment-types](https://developers.google.com/+/api/moment-types)

**更新**

请注意，现场演示已使用以下代码进行了更新，您不应直接调用 gapi.client.request：

```
writeListenActivity: function(url){
  var payload = {
    "type": "http://schemas.google.com/ListenActivity",
  }

  if (url != undefined){
    payload.target = { 'url' : url };
  }else{
    payload.target = {
      "type": "http:\/\/schema.org\/MusicRecording",
      "id": "uniqueidformusictarget",
      "description": "A song about missing one's family members fighting in the American Civil War",
      "image": "https:\/\/developers.google.com\/+\/plugins\/snippet\/examples\/song.png",
      "name": "When Johnny Comes Marching Home"
    };
  }
  this.writeAppActivity(payload);
},
writeAddActivity: function(url){
  var payload = {
    "type":"http:\/\/schemas.google.com\/AddActivity",
    "startDate": "2012-10-31T23:59:59.999Z"
  };
  if (url != undefined){
    payload.target = {
      'url' : 'https://developers.google.com/+/plugins/snippet/examples/thing'
    };
  }else{
    payload.target = {
      "id" : "replacewithuniqueidforaddtarget",
      "image" : "http:\/\/www.google.com\/s2\/static\/images\/GoogleyEyes.png",
      "type" : "http:\/\/schema.org\/CreativeWork",
      "description" : "The description for the activity",
      "name":"An example of AddActivity"
    };
  }
  this.writeAppActivity(payload);
},
writeAppActivity: function(payload){

  gapi.client.plus.moments.insert(
      {  'userId' : 'me',
         'collection' : 'vault',
         'resource' : payload
      }).execute(function(result){
          console.log(result);
      });
} 
```

特别值得注意的是替换 gapi.client.request 调用的 gapi.client.plus.moments.insert 代码。

# jquery - 如何使用 Twitter Bootstrap 对齐手风琴中的图标和标签

> ID：15164951
> 
> 赞同：2
> 
> 时间：2013-03-01T19:00:39.553
> 
> 标签：jquery, html, twitter-bootstrap

![在此处输入图像描述](../Images/9194e982bc039ea48d2287d1e2292ab1.png)

我正在使用 Twitter Bootstrap，当一些图标在手风琴内时，我很难将它们与标签对齐。

到目前为止我所取得的成果如下所示，但我希望左边的 3 个图标等间距，右边的标签。

另外，我想在显示 collapseOne 时将第一个图标 (icon-chevron-down) 更改为 (icon-chevron-up)。

这是一些演示html：

```
 <div class="accordion" id="accordion2">
        <div class="accordion-group">  
          <div class="accordion-heading">
          <table>  
            <tr>
              <td>
                 <div class="clearfix"></div>
              </td>
              <td>
                 <label title="link ![enter image description here][2]1">link1</label>
              </td>
              <td>
               <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"><i class="icon-chevron-down"></i></a>
              </td>
              <td>  
                <a href="#"><i class="icon-edit"></i></a>
              </td>
              <td>
                <a href="#"><i class="icon-trash"></i></a>
              </td>
             <tr>
            </table>
          </div>  
          <div id="collapseOne" class="accordion-body collapse" style="height: 0px; ">  
            <div class="accordion-inner">  
              This is link 1
            </div>  
          </div>
        </div>
        <div class="accordion-group">  
          <div class="accordion-heading">
          <table>  
            <tr>
              <td>
                 <div class="clearfix"></div>
              </td>
              <td>
                 <label title="link 2">link2</label>
              </td>
              <td>
               <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"><i class="icon-chevron-down"></i></a>
              </td>
              <td>  
                <a href="#"><i class="icon-edit"></i></a>
              </td>
              <td>
                <a href="#"><i class="icon-trash"></i></a>
              </td>
             <tr>
            </table>
          </div>  
          <div id="collapseOne" class="accordion-body collapse" style="height: 0px; ">  
            <div class="accordion-inner">  
              This is link 2
            </div>  
          </div>
        </div>
        <div class="accordion-group">  
          <div class="accordion-heading">
          <table>  
            <tr>
              <td>
                 <div class="clearfix"></div>
              </td>
              <td>
                 <label title="link 3">link3</label>
              </td>
              <td>
               <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"><i class="icon-chevron-down"></i></a>
              </td>
              <td>  
                <a href="#"><i class="icon-edit"></i></a>
              </td>
              <td>
                <a href="#"><i class="icon-trash"></i></a>
              </td>
             <tr>
            </table>
          </div>  
          <div id="collapseOne" class="accordion-body collapse" style="height: 0px; ">  
            <div class="accordion-inner">  
              This is link 1
            </div>  
          </div>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:42:15.410

简洁的使用方式如下： Jsfiddle [Demo](http://jsfiddle.net/shail/PvwxN/2/)

```
<div class="accordion-heading">
 <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
href="#collapseOne"><i class="icon-home"></i> Heading <i class="icon-chevron-down"></i>   <i class="icon-edit"></i><i class="icon-trash"></i></a>
</div> 
```

要正确拉图标（根据您的评论），您可以执行以下操作：

```
<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
href="#collapseOne"><i class="icon-home"></i> Heading<span class="pull-right"><i class=" icon-chevron-up"></i> <i class="icon-edit "></i><i class="icon-trash"></i></span></a> 
```

正如您在评论中提到的那样，您的标题长度可变，将跨度放在 a 标签之外，见下文：

```
 <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
        href="#collapseOne"><i class="icon-home"></i> Headinghjhkjhjkhkjhkjhkjhkjhkjhkjhjkhkjhjkhkjhjkhjk</a>
  <span class="ico-pull pull-right"><i class=" icon-chevron-up"></i>  <i class="icon-edit "></i><i class="icon-trash"></i>
            </span>
    </div> 
```

比使用以下 css ：

```
.accordion-heading > a {
width:8em;
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis;
}
.accordion-heading > span {
margin-right:20px;
margin-top:-28px;
} 
```

# ms-access - 如果绑定列被隐藏，则在组合框中选择一行失败

> ID：15164960
> 
> 赞同：3
> 
> 时间：2013-03-01T19:01:18.493
> 
> 标签：ms-access, vba

使用 Access 2010 我的表单上有一个未绑定的组合，它看起来像这样......

```
RowSource: SELECT EventID, DocRef FROM Events
BoundColumn: 1 
ColumnCount: 2
ColumnWidths: 0cm;2cm 
```

在 vba (MyCombo="23") 中设置组合值仅在绑定列可见时才有效。当我设置 columnWidth="0cm;2cm" 时，分配不再有效。

```
Sub Form_Open()
   evt = Me.OpenArgs
   If evt > "" Then
      MyCombo = evt
      ' MyCombo.Value = evt
      Call MyCombo_AfterUpdate
   End If
End Sub 
```

如何在不显示 eventID 的情况下选择组合行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:36:43.943

我避免处理`Form Open`. 试试这个`Form Load`。

```
Private Sub Form_Load()
    If Not IsNull(Me.OpenArgs) Then
        Me.MyCombo = Me.OpenArgs
        Call MyCombo_AfterUpdate
        'Call DoSomething
    End If
End Sub 
```

绑定列的宽度可以为 0，这应该仍然有效。

请注意，如果您的表单已经打开并在您执行此类操作时在组合中选择了一个值...

```
DoCmd.OpenForm "frmJaybob", OpenArgs:= 4 
```

...组合的值不会更改为 4。

您可能会发现`Call MyCombo_AfterUpdate`实际上并没有从`Form Load`. 如果是这样，请将您的代码移动到一个单独的过程中，并从和从`MyCombo_AfterUpdate`调用新过程。`MyCombo_AfterUpdate``Form Load`

```
Private Sub DoSomething()
    ' move your MyCombo_AfterUpdate code here
    MsgBox "DoSomething"
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T04:52:14.303

我认为这个问题与隐藏 ID 无关。我可以让它工作得很好隐藏或不隐藏。

我看到一些我会改变的事情。You Sub 没有使用正确的事件参数声明，而且我还看到您没有检查空值。如您所述，这对我将组合框设置为隐藏的 ID 字段进行了测试。（事实上​​，它会接受任何一个字段作为正确的输入。）

```
Private Sub Form_Open(Cancel As Integer)
    Dim evt As String
    If Not IsNull(Me.OpenArgs) Then
        evt = Me.OpenArgs
        If Len(evt) Then
            Me.Combo0.Value = evt
        End If
    End If
End Sub 
```

我通过转到 VB 编辑器，按 control-G 并从即时窗口运行它来测试它：

```
Docmd.OpenForm "Form1",acNormal,,,,,5329 
```

显然，需要为您的设置更正表单名称和 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-16T13:38:09.277

试试这个而不是当前行

```
MyCombo = evt 
```

如果 evt 是数值，请尝试以下操作

```
MyCombo = DLookup("DocRef","Events","EventID=" & evt) 
```

如果 evt 是字符串，则使用以下表达式

```
MyCombo = DLookup("DocRef","Events","EventID='" & evt & "'") 
```

# jquery - 使用 mbScrollable 锚定到另一个页面上的水平面板

> ID：15164963
> 
> 赞同：0
> 
> 时间：2013-03-01T19:01:44.780
> 
> 标签：jquery

我的所有页面上都有一个 CSS 菜单，一个 .mbScrollable 脚本在一页上运行，有 10 个可滚动的水平面板。早些时候，我被展示了如何使用命名锚点从该页面上的 css 菜单直接进入给定面板。

我的问题是如何从其他页面做到这一点？当我使用其他页面的菜单时，我添加的新“onclick”代码只会将我带到锚点不是特定锚点的页面。

# google-app-engine - GWT - 加载前的访问服务器

> ID：15164968
> 
> 赞同：1
> 
> 时间：2013-03-01T19:02:15.467
> 
> 标签：google-app-engine, gwt

我想知道在提供 GWT 页面之前是否有一种相对简单的方法来访问服务器端资源（如数据存储）。显然，我可以在页面加载后立即使用 RPC 调用，但我假设这会创建两个单独的请求（一个用于页面，一个用于信息），我宁愿只是将数据与页面一起发送，所以它是保证在那里。我可以这样做，还是 GWT 不是为它设计的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T04:50:16.457

您当然可以动态加载 gwt 主机页面，而不是简单地依赖纯静态的 html 页面。尽管下一篇文章的上下文是围绕登录的概念构建的，但它确实演示了如何使用包含来自数据存储的动态元素的 Dictionary 启动 gwt 应用程序。

[https://developers.google.com/web-toolkit/articles/dynamic_host_page](https://developers.google.com/web-toolkit/articles/dynamic_host_page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:45:12.423

单独使用 GWT 是不可能的，因为 GWT 会生成客户端代码。此类代码仅在页面加载*后执行。*

我认为，您想要的应该可以在服务器端实现。例如，在返回对请求的响应之前，您可以访问资源并将它们嵌入到页面中（可能是 JSON）。然后，您的 GWT 代码可以利用这些资源。

# module - 如何在 Puppet 中跨多个模块组织自定义类型

> ID：15164969
> 
> 赞同：1
> 
> 时间：2013-03-01T19:02:18.090
> 
> 标签：module, manifest, puppet, custom-type

我正在使用 Puppet 并且我有一堆模块。这些模块都使用自定义类型。每个模块都使用几乎所有自定义类型，因此将这些类型放入某个模块是没有意义的。这有点像 Java 中带有静态方法的 util 类。

我将相关类型组织成类，每个类都写入一个 .pp 文件并将它们放入 $manifestdir。在 $manifestdir/site.pp 中，每个 .pp 文件都有一个导入语句。

方案（名称是什么？）：

```
$manifestdir/site.pp
 imports $manifestdir/class1.pp
  contains class class1
   contains type definitions for custom_type1, custom_type2, custom_type3
 imports $manifestdir/class2.pp
  contains class class2
   contains type definitions for custom_type4, custom_type5, custom_type6
 imports $manifestdir/class3.pp
  contains class class3
   contains type definitions for custom_type7, custom_type8, custom_type9 
```

从每个模块内部，我可以通过寻址 class1::custom_type2 或 class3::custom_type7 来使用这种自定义类型...

现在我读到最好避免使用 import 关键字（参见[http://docs.puppetlabs.com/puppet/2.7/reference/lang_import.html](http://docs.puppetlabs.com/puppet/2.7/reference/lang_import.html)）。所以我想知道组织不是特定于模块并且几乎每个模块都需要的自定义类型的最佳方法是什么。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:37:54.650

只需创建一个具有所有共享类型的“common”或“utils”模块。就像 pupptelab 的[stdlib](https://github.com/puppetlabs/puppetlabs-stdlib)

# css - 具有固定元素的 z-index

> ID：15164973
> 
> 赞同：3
> 
> 时间：2013-03-01T19:02:25.203
> 
> 标签：css, html, z-index, fixed

我正在尝试正确显示页面上的元素。布局看起来像这样。

```
<div id='middle' style='position: fixed; z-index: 50;'></div>
<div id='bottom' style='position: fixed; z-index: 0;'>
<div id='top' style='position: fixed; z-index: 100;'></div>
</div> 
```

所以我希望底部 div 位于底部并嵌套在其中的 div 将出现在顶部，相邻的 div 位于中间。目前它正在出现（按从上到下的显示顺序）：中间，顶部，底部，但我希望它显示顶部，中间，底部。

嵌套对于顶部 div 访问底部 div 作为父对象和中间 div 独立于其他两个对象非常重要。

我正在使用内联 css 来保持这个问题的局限和直接，并省去组织 css 页面的麻烦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:10:30.480

简而言之，如果不改变你的标记，你就不能做你所追求的。"middle" 和 "bottom" 的 z-index 将生效，但 "top" 永远不会出现在 "middle" 的顶部。这是因为“middle”和“bottom”是兄弟元素——“top”作为一个子元素，不能胜过它的父元素的 z-index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:11:27.563

试试这个：

```
<div id='middle' style='position: fixed; z-index: 50;width: 100px; height: 100px; background: red; top: 100px;'></div>

    <div id='bottom' style='position: fixed; z-index: 0; width: 100px; height: 100px; background: blue; bottom: 0px;'> 
        <div id='top' style='position: fixed; z-index: 100; width: 100px; height: 100px; background: green; top: 0px;'></div> 
    </div> 
```

# ruby-on-rails-3 - 使用考拉测试 Facebook 登录

> ID：15164974
> 
> 赞同：2
> 
> 时间：2013-03-01T19:02:28.497
> 
> 标签：ruby-on-rails-3, rspec, facebook-login, koala

我正在通过 Koala 成功登录 Facebook。我现在想在 Rspec 中测试我的控制器行为，为此我想建立一个实时环境，通过 Facebook 注册用户。

如何创建 Facebook 用户的教程很简单，但我不知道如何将用户与登录事件匹配。

如果有人有一步一步的，恐怕我在这个方面超出了我的深度。我必须继续编码，但现在会让 Facebook 登录实现未经测试，你们都知道这真的不好。

# android - 在Android中将位图拖放到特定位置，否则恢复到初始位置

> ID：15164981
> 
> 赞同：0
> 
> 时间：2013-03-01T19:03:01.610
> 
> 标签：android, drag-and-drop, touch-event

colorballs 是一个有两个位图的类（此处未显示），我正在努力寻找是否将位图拖放到屏幕上的“正方形”（请参阅​​下面的“绘制方法”）中。然后位图不应该再被拖动，如果相同的位图移动到其他任何地方但不在正方形内，当我停止移动位图时它应该恢复到原始位置。请帮助代码。

```
 // the method that draws the balls
       @Override protected void onDraw(Canvas canvas) {
        //canvas.drawColor(0xFFCCCCCC);     //if you want another background color       

    //draw the balls on the canvas
    for (ColorBall ball : colorballs) {
        canvas.drawBitmap(ball.getBitmap(), ball.getX(), ball.getY(), null);

      }

    // draw the square.
    Paint rectPaint = new Paint();
    // color of the border
    rectPaint.setColor(Color.BLUE);
    rectPaint.setStrokeWidth(1);        
    rectPaint.setStyle(Paint.Style.STROKE);

    int w = this.getWidth(), h = this.getHeight();
    int offset = (h - w)/2;
    int step =w/3;
     rect= new Rect (0, offset+0*step, step, offset+step*1);
    canvas.drawRect(rect, rectPaint);

}

       // events when touching the screen
      public boolean onTouchEvent(MotionEvent event) {
    int eventaction = event.getAction(); 

    int X = (int)event.getX(); 
    int Y = (int)event.getY(); 
    ballTouchedFlag =false;

    switch (eventaction ) { 

    case MotionEvent.ACTION_DOWN: // touch down so check if the finger is on a ball
        balID = 0;
        for (ColorBall ball : colorballs) {
            // check if inside the bounds of the ball (circle)
            // get the center for the ball
            int centerX = ball.getX() + 25;
            int centerY = ball.getY() + 25;

            // calculate the radius from the touch to the center of the ball
            double radCircle  = Math.sqrt( (double) (((centerX-X)*(centerX-X)) + (centerY-Y)*(centerY-Y)));

            // if the radius is smaller then 23 (radius of a ball is 22), then it must be on the ball
            if (radCircle < 23){
                balID = ball.getID();
                initPoint.x=X;
                initPoint.y=Y;
                ballTouchedFlag =true;
                break;
            }

          }

         break; 

    case MotionEvent.ACTION_MOVE:   // touch drag with the ball
        // move the balls the same as the finger
        if (balID > 0 ) {
            colorballs[balID-1].setX(X-25);
            colorballs[balID-1].setY(Y-25);
        }

        break; 

    case MotionEvent.ACTION_UP: 
        // touch drop - just do things here after dropping
        // Determine if the ball is touched.

         break; 
    }  

    // redraw the canvas
    invalidate(); 
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:20:52.923

我想出了我想要实现的目标，这是我在上面代码中的更新，

在 MotionEvent.ACTION_DOWN 中，我做了以下更改

```
 // if the click image is not inside the rectangle

    if (radCircle < 23 && rect.contains(colorballs[balID-1].getX(), colorballs[balID-1].getY() == false){
            balID = ball.getID();
            initPoint.x=X;
            initPoint.y=Y;
            ballTouchedFlag =true;
            break;
        } 
```

在 MotionEvent.Move 中，添加以下行

```
 if ( balID > 0 && rect.contains(colorballs[balID-1].getX(), colorballs[balID-1].getY() == false )
   {.....} 
```

在 MotionEvent.ACTION_UP 中，我添加了以下代码

```
 // Now, when you drop the clicked bitmap, if it is not not in the square, store it            //  first position
   if ( rect.contains(colorballs[balID-1].getX(), colorballs[balID-1].getY() == false )
 colorballs[balID-1].setX(initPoint.x-25);
        colorballs[balID-1].setY(initPoint.y-25); 
```

# java - 递归天花板java

> ID：15164991
> 
> 赞同：0
> 
> 时间：2013-03-01T19:03:56.743
> 
> 标签：java, recursion

这是一个家庭作业问题，所以我真正想要的是一个基本的递归算法。我正在研究 AATree 的地板/天花板方法。我当前的树有这样的结构：

```
 40
  20        60
10  30    50    80
              70  90
                    100 
```

（等级顺序）。我的 floor 方法有一个迭代解决方案：

```
 /**
   * Returns the greatest element in the set <= the_target.
   * Strings are compared by ASCII values.
   * 
   * @param the_target Element to compare set values with.
   * @return Greatest element <= the_target, null if no such element exists.
   */
  public E floor(final E the_target) {
    AANode<E> current_node = my_root;
    E result = null;
    int root_value = compare(current_node.my_element, the_target);
    while (true) {
      if (root_value == 0) {
        if (current_node.my_left.equals(my_null_node) 
            && current_node.my_right.equals(my_null_node)) {
          break;
        }
        result = current_node.my_element;
        break;
      }
      if (contains(the_target)) {
        result = the_target;
        break;
      } else if (root_value > 0) { 
        if (current_node.my_left.my_element == null) {
          break;
        }
        current_node = current_node.my_left;
        root_value = compare(current_node.my_element, the_target);
      } else {
        if (current_node.my_right.my_element == null) {
          result = current_node.my_element;
          break;
        }
        result = current_node.my_element; 
        current_node = current_node.my_right;  
        root_value = compare(current_node.my_element, the_target);
      }
    }
    return result;
  } 
```

但我想让我的 ceiling() 方法递归。它必须具有此方法签名：

```
 /**
   * Returns the smallest element in the set >= the_target.
   * 
   * @param the_target Element to compare set values with.
   * @return Smallest element >= the_target, null if no such element exists.
   */
  public E ceiling(final E the_target); 
```

我将使用返回 E 的辅助递归方法来实现这一点。我试图让我的逻辑正确，并希望得到一些算法建议。

感谢大家的帮助！我知道了。

```
 /**
   * Helper recursive method for ceiling().
   * 
   * @param the_root The current node.
   * @param the_smallest The previous smallest element.
   * @param the_target The target for ceiling.
   * @return The ceiling element of the tree.
   */
  private E findCeiling(final AANode<E> the_root, final AANode<E> the_smallest,
                        final E the_target) {
    AANode<E> small = the_smallest;
    if (compare(the_target, small.my_element) > 0) {
      small = the_root;
    }
    // base case
    if (the_root.my_left.my_element == null 
        && the_root.my_right.my_element == null) {
      return small.my_element;
    } else {
      if (compare(the_target, the_root.my_element) > 0) {
        if (compare(the_smallest.my_element, the_root.my_element) > 0) {
          small = the_root;
        }
        return findCeiling(the_root.my_right, small, the_target);
      } else {
        if (compare(the_smallest.my_element, the_root.my_element) > 0) {
          small = the_root;
        }
        return findCeiling(the_root.my_left, small, the_target);
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:34:42.520

您想遍历树并跟踪迄今为止看到的集合中小于目标的最小值。让我们调用这个值`SGT`

您的辅助例程需要接受正在检查的当前节点和当前`SGT`值。

这里有一个提示，让你开始......

```
 public E ceiling(final E target) { 
     return ceilingHelper(root, root.my_element, target);
 }

 private E ceilingHelper(final AANode<E> current_node, 
                         final E SGT, 
                         final E target) { 
    //now do you get the idea ?  your recursion will need a base case
    //and a recursive step.  you can traverse the tree using a depth first
    //search
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:11:12.633

我认为提供确切的解决方案并不合适，但您应该查看[http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)。您需要递归执行此操作的所有通用算法。

通常，递归解决方案涉及将问题定义为子问题。作为提示，两个相邻子树的 ceils 是如何相关的？还要考虑递归结束的基本情况。叶节点的ceil是什么？

树问题的递归解决方案可以非常简洁和简单。

# apache - .htaccess 重写仍然可以使用 get 变量的漂亮 url

> ID：15164992
> 
> 赞同：6
> 
> 时间：2013-03-01T19:03:58.393
> 
> 标签：apache, .htaccess, url, get

我正在尝试编写一个 .htaccess 行，该行将重写为 php 脚本，但仍允许在最后添加任何额外的 get 变量。这可能吗？

目前我正在尝试使用这个：

```
RewriteRule ^item/([^/]*)([^/]*)$ /item.php?id=$1&$2 [L] 
```

目的是为了能做喜欢的事`blah.com/item/foo`，也能做`blah.com/item/foo?bar=whatever`。

目前它似乎正确地通过了第一部分`id`，但没有通过其余部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T19:04:49.917

```
RewriteRule ^item/([^/]*)([^/]*)$ /item.php?id=$1&$2 [L,QSA] 
```

您可以在此处阅读有关`QSA`（查询字符串附加）的更多信息： [https ://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](https://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T19:05:06.997

你需要完成`[L,QSA]`

# scala - 为什么同时运行三个 Spray.io 路由？

> ID：15164994
> 
> 赞同：2
> 
> 时间：2013-03-01T19:03:59.707
> 
> 标签：scala, spray

我在 Spray.io 中定义了以下路线。真正奇怪的是，每次我调用类似的东西时，`/user/8dsdf974jj`它实际上都会运行以下所有三个路线。幽默的是，我注意到了这一点，因为我同时收到了 20 封验证电子邮件。

```
pathPrefix("user") {
  pathPrefix(PathElement) { id =>
        path("") {
              get { // code here }
        } ~
        path("verify" / "request") {
              get { // code here }
        } ~
        path("verify" / "confirm") {
              get { // code here }
        }
      }
} 
```

有人可以解释为什么路径不会终止路由树吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T19:45:09.080

简而言之，问题在于您的代码在路由构建时运行，而不是在实际处理请求时运行。

本文档以较长的形式对其进行解释：http: [//spray.io/documentation/spray-routing/advanced-topics/understanding-dsl-structure/](http://spray.io/documentation/spray-routing/advanced-topics/understanding-dsl-structure/)

如果您查看邮件列表，您会发现很多关于这个确切问题的主题，这应该可以进一步帮助您。

高温高压